# StackOverflow 问答 11127000-11127999

# mysql - 从表中删除 MySQL 列名中的所有空格？

> ID：11127001
> 
> 赞同：0
> 
> 时间：2012-06-20T19:43:11.907
> 
> 标签：mysql, sql

我正在将数据库从 迁移`Access`到`MySQL`，`Xataface`用作前端。唉，`Xataface`如果列名包含空格并且创建数据库的人在列名中有大量空格，则无法修改记录`Access`。

唉，数据库相当大，因此手动修改它似乎相当有问题。我查看了 MySQL 手册，只找到了有关如何从单个行中删除空格的内容。

也许修改`INFORMATION_SCHEMA`表格是这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:06:55.253

您可以创建一个语句，其中每个输出都是一个`ALTER TABLE`语句，然后运行这些语句。

**SQL 语句**

```
SELECT 'ALTER TABLE ' 
       + Table_Name
       + ' CHANGE COLUMN `' 
       + Column_Name 
       + '` `' 
       + REPLACE(Column_Name, ' ', '')
       + '`'
FROM   INFORMATION_SCHEMA_COLUMNS
WHERE  Column_Name LIKE '% %' 
```

**输出**

```
ALTER TABLE tableX CHANGE COLUMN [column with spaces] [columnwithspaces] 
```

# sitecore - sitecore 工作流程和标准值继承的烦人问题

> ID：11127005
> 
> 赞同：10
> 
> 时间：2012-06-20T19:43:27.547
> 
> 标签：sitecore, sitecore6, sitecore-workflow

现在我遇到了 sitecore 工作流程的问题。问题如下：

我的模板标准值已设置工作流和默认工作流字段集。工作流状态设置为草稿。但是，每次我从这个模板创建一个项目时，它都不会继承工作流部分字段，它们都是空的

如果我为项目手动设置工作流和工作流状态，它会按预期工作直到最终状态。但是，如果内容作者编辑该项目，则会创建一个新版本，但仅保留工作流字段值，而工作流状态再次为空。

我做错了什么？为什么会这样？我正在使用 sitecore 6.5.0

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T19:52:40.330

您的`__Standard Values`模板应该只`Default workflow`设置字段；不要`Workflow`在项目上设置字段，`__Standard Values`因为这暗示`__Standard Values`项目本身就在工作流程中！同样，不要`State`在项目上设置字段，`__Standard Values`因为这表示`__Standard Values`项目处于该状态！

您的工作流程项目上有一个`Initial State`字段，用于定义项目将处于的初始状态（假设项目使用该工作流程）。

当您创建一个项目，并且该项目`__Standard Value`在字段中具有工作流时`Default Workflow`，该项目的字段设置将与其的字段`Workflow`相同。项目所处的状态将与所述工作流程中定义的相同。`Default Workflow``__Standard Values``Initial State`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:14:17.067

当您通过 API 创建项目时，您似乎必须明确设置工作流程和状态：

```
Item myItem = parentItem.Add("New item", myTemplate);
myItem.Editing.BeginEdit();
// set any other fields you want here
...
// Now explicitly set the workflow and state here on your new item
// (make sure you get the correct GUIDs by viewing raw values on your workflow and workflow state items)...
myItem[FieldIDs.Workflow] = "{212BCCCB-8197-45C0-81CC-621E0553C25F}";
myItem[FieldIDs.WorkflowState] = "{E8228D86-D780-4F34-B372-6A4D29B67AF9}";
myItem.Editing.EndEdit(); 
```

我假设当您通过 UI 执行此操作时，会在使用内容编辑器等时为您处理一些额外的管道，您可以使用 API 绕过这些管道。

其实这里有个SDN上的相关帖子： [http ://sdn.sitecore.net/Forum/ShowPost.aspx?PostID=45991](http://sdn.sitecore.net/Forum/ShowPost.aspx?PostID=45991)

# android - 在 wifi-direct p2p 连接中获取对等设备的 IP 地址

> ID：11127006
> 
> 赞同：8
> 
> 时间：2012-06-20T19:43:32.933
> 
> 标签：android, dhcp, wifi-direct

当我的设备是 wifi-direct P2P 连接中的组所有者 (GO) 时，我的应用程序需要知道对等设备的 IP 地址（通常 GO 充当 DHCP 服务器，对等站从服务器接收 IP）。我发现 DHCP 客户端列表存储在 /data/misc/dhcp/dnsmasq.leases 文件中，但是该应用程序必须是“dhcp”组的一部分才能读取该文件，并且我在尝试时收到 EACCES（权限被拒绝）阅读它。

我可以在清单中添加读取该文件的权限吗？或者有没有其他方法可以从没有 root 的 java/native Android 框架中获取这个 DHCP 客户端列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:44:50.500

我通过向组所有者发送对等方的本地 IP 地址（以 192.168.xx 开头）解决了这个问题。在这个并不需要时间的“握手”之后，一切都很好。没有找到其他获取peer的ip地址的方法，GroupListener/PeerListener/...提供的唯一信息就是mac地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T07:06:35.643

我在 onConnectionInfoAvailable 中获得了 GO 的 IP 地址，这是您从 BroadcastReceiver .WIFI_P2P_CONNECTION_CHANGED_ACTION 事件中获得的，该事件在您连接后触发。
因此，您在连接后调用 requestConnectionInfo(mChannel, mMyWiFiActivity)，然后挂钩到回调 onConnectionInfoAvailable(WifiP2pInfo info)。

然后给你组 owner.info.groupOwnerAddress.getHostAddress(); 的地址

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T09:47:30.940

如果您有 adb root 访问权限，您可以获得访问 DHCP 客户端列表，该列表存储在 ./data/misc/dhcp/dnsmasq.leases

以编程方式，

**在服务器端或 GO 端：**

1）在端口上打开一个套接字（比如端口：9999）

2) 调用 Accept() & 等待客户端或 GC 连接 (Socket clientSocket = Socket.accept();)

3) 一旦客户端/GC 连接，可以使用“clientSocket.getInetAddress().toString()”找到 GC IP 地址

**在客户端或 GC 端：**

1）触发从客户端（GC）到组所有者的连接

2）打开并连接套接字到组所有者的IP地址

3) P2P GO IP地址可通过“info.groupOwnerAddress.getHostAddress()”获得（WifiP2pInfo info;）

4) 连接到同一个端口，比如 9999

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-21T21:44:13.377

没有。您需要使用服务发现协议。

# regex - R：从字符串中删除最后三个点

> ID：11127010
> 
> 赞同：5
> 
> 时间：2012-06-20T19:43:44.943
> 
> 标签：regex, r

我有一个文本数据文件，我可能会使用`readLines`. 每个字符串的初始部分包含大量乱码，然后是我需要的数据。乱码和数据通常用三个点分隔。我想在最后三个点之后拆分字符串，或者用某种标记替换最后三个点，告诉 R 将这三个点左侧的所有内容视为一列。

这是 Stackoverflow 上的类似帖子，它将找到最后一个点：

[R：查找字符串中的最后一个点](https://stackoverflow.com/questions/5214677/r-find-the-last-dot-in-a-string)

然而，在我的例子中，一些数据有小数，所以定位最后一个点是不够的。另外，我认为`...`在 R 中具有特殊含义，这可能会使问题复杂化。另一个潜在的并发症是一些点比其他点大。此外，在某些行中，三个点之一被替换为逗号。

除了`gregexpr`在上面的帖子中我尝试过使用`gsub`，但无法找出解决方案。

这是一个示例数据集和我希望达到的结果：

```
aa = matrix(c(
'first string of junk... 0.2 0 1', 
'next string ........2 0 2', 
'%%%... ! 1959 ...  0 3 3',
'year .. 2 .,.  7 6 5',
'this_string   is . not fine .•. 4 2 3'), 
nrow=5, byrow=TRUE,
dimnames = list(NULL, c("C1")))

aa <- as.data.frame(aa, stringsAsFactors=F)
aa

# desired result
#                             C1  C2 C3 C4
# 1        first string of junk  0.2  0  1
# 2            next string .....   2  0  2
# 3             %%%... ! 1959      0  3  3
# 4                 year .. 2      7  6  5
# 5 this_string   is . not fine    4  2  3 
```

我希望这个问题不要被认为太具体。文本数据文件是使用我昨天关于在 R 中读取 MSWord 文件的帖子中概述的步骤创建的。

有些行不包含乱码或三个点，而只包含数据。但是，这可能是后续帖子的并发症。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:42:25.300

这可以解决问题，虽然不是特别优雅......

```
options(stringsAsFactors = FALSE)

# Search for three consecutive characters of your delimiters, then pull out
# all of the characters after that
# (in parentheses, represented in replace by \\1)
nums <- as.vector(gsub(aa$C1, pattern = "^.*[.,•]{3}\\s*(.*)", replace = "\\1"))

# Use strsplit to break the results apart at spaces and just get the numbers
# Use unlist to conver that into a bare vector of numbers
# Use matrix(, nrow = length(x)) to convert it back into a
# matrix of appropriate length
num.mat <- do.call(rbind, strsplit(nums, split = " "))

# Mash it back together with your original strings
result <- as.data.frame(cbind(aa, num.mat))

# Give it informative names
names(result) <- c("original.string", "num1", "num2", "num3") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:53:42.347

这将使您大部分时间到达那里，并且包含逗号的数字不会有问题：

```
# First, use a regex to eliminate the bad pattern.  This regex
# eliminates any three-character combination of periods, commas,
# and big dots (•), so long as the combination is followed by 
# 0-2 spaces and then a digit.
aa.sub <- as.matrix(
  apply(aa, 1, function (x) 
    gsub('[•.,]{3}(\\s{0,2}\\d)', '\\1', x, perl = TRUE)))

# Second: it looks as though you want your data split into columns.
# So this regex splits on spaces that are (a) preceded by a letter, 
# digit, or space, and (b) followed by a digit.  The result is a 
# list, each element of which is a list containing the parts of 
# one of the strings in aa.
aa.list <- apply(aa.sub, 1, function (x) 
  strsplit(x, '(?<=[\\w\\d\\s])\\s(?=\\d)', perl = TRUE))  

# Remove the second element in aa.  There is no space before the 
# first data column in this string.  As a result, strsplit() split
# it into three columns, not 4\.  That in turn throws off the code
# below.
aa.list <- aa.list[-2]

# Make the data frame.
aa.list <- lapply(aa.list, unlist)  # convert list of lists to list of vectors
aa.df   <- data.frame(aa.list)      
aa.df   <- data.frame(t(aa.df), row.names = NULL, stringsAsFactors = FALSE) 
```

剩下的唯一事情是修改正则表达式，`strsplit()`以便它可以处理`aa`. 或者也许最好手动处理这样的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:52:02.003

反转字符串
如有必要，反转您正在搜索的模式 - 这不是您的情况
反转结果

[俳句伪代码]

```
a = 'first string of junk... 0.2 0 1' // string to search
b = 'junk' // pattern to match 

ra = reverseString(a) // now equals '1 0 2.0 ...knuj fo gnirts tsrif'
rb = reverseString (b) // now equals 'knuj'

// run your regular expression search / replace - search in 'ra' for 'rb'
// put the result in rResult
// and then unreverse the result
// apologies for not knowing the syntax for 'R' regex 
```

[/haiku-伪代码]

# mysql - MySQL union - 如何在所有行中显示表 1 内容？

> ID：11127012
> 
> 赞同：0
> 
> 时间：2012-06-20T19:43:50.560
> 
> 标签：mysql, union

在下面的 mysql 查询中，我想知道是否可以从表 aitisi 中获取行以代替表成员中的空白值显示。问题是，我需要创建一个联合，但还要在所有行中显示第一个表的数据。

```
select a1.id, a1.name, a1.surname, a1.program, a1.date
from aitisi a1 
union select a.id, m.name, m.surname, null, null from members m 
join aitisi a on (a.id = m.symbid) 
```

我使用 null 作为虚拟字段，因此我可以执行具有相同列数的联合。但是这样我只能在表 aitisi 的行中获取日期和程序，其余的都是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:08:19.557

试试这个（不是很有效）：

```
SELECT u.id, u.name, u.surname,
       coalesce(u.program, aa.program),
       coalesce(u.date, aa.date)
  FROM (SELECT a1.id, a1.name, a1.surname,
               a1.program, a1.date
          FROM aitisi a1 
         UNION
        SELECT a2.id, m.name, m.surname, NULL, NULL
          FROM members m
          JOIN aitisi a2 ON a2.id = m.symbid) u
  JOIN aitisi aa ON aa.id = u.id; 
```

详细了解您的初始查询，此变体有什么问题：

```
SELECT a1.id, a1.name, a1.surname, a1.program, a1.date
  FROM aitisi a1 
 UNION
SELECT a2.id, m.name, m.surname, a2.program, a2.date
  FROM members m 
  JOIN aitisi a2 ON a2.id = m.symbid; 
```

# redis - 使用弹性搜索、monit、redis、memcached（以及 apache）为 Linode 上的 rails 应用程序设置服务器

> ID：11127018
> 
> 赞同：1
> 
> 时间：2012-06-20T19:44:17.860
> 
> 标签：redis, elasticsearch, linode

我在 linode 和 1 个节点平衡器上有 2 个 VPS。1 个 DB Vps 和 1 个应用 Vps。我通过我的 nodebalancer 发送东西，因此最终扩展应用程序服务器更容易。我的问题是 2 倍：

1.  你们建议我放弃 memcached 并使用 redis 进行缓存吗？我将 redis 用于其他事情（例如 resque），这将使我的基础设施变得更加简单。

2.  我还打算将 redis 用作会话存储。当我准备好添加另一个应用程序服务器 vps 时，是否可以让它看起来像跨 2 个 VPS 的 1 个虚拟 redis 存储？这对于缓存也很重要。

你还建议我在每个 VPS 上安装 redis、elastic search、monit，还是应该为这些服务安装一个单独的 VPS，为我的应用程序服务器安装另一个 VPS？

非常感谢。

# android - Android XMPP 通过 SMACK item-not-found

> ID：11127024
> 
> 赞同：1
> 
> 时间：2012-06-20T19:44:26.363
> 
> 标签：android, exception, xmpp

我有以下问题：

我创建了一个名为`TestNode1`. 当我尝试使用`mgr.getNode("TestNode1")`xmpp 获取此节点时会引发异常`item-not-found`，我不知道为什么。

节点已创建！

如果我通过 PC 和 java 尝试同样的事情......没有问题，我找到了节点。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T19:49:24.377

如果你在 Android 上做 XMPP，你应该使用

[aSMACK](http://code.google.com/p/asmack/)而不是[SMACK](http://www.igniterealtime.org/projects/smack/)，这就是你的问题

# ajax - 谷歌浏览器的高级 REST 客户端如何进行跨域 POST 请求？

> ID：11127025
> 
> 赞同：9
> 
> 时间：2012-06-20T19:44:28.000
> 
> 标签：ajax, json, cross-domain, cors

Google Chrome 的 ADVANCED REST CLIENT 插件如何进行跨域 POST 请求？我认为可能与 CORS 有关，但我在任何响应中都没有看到“Access-Control-Allow-Origin”。这是插件的链接：

[https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo/related?hl=en-US](https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo/related?hl=en-US)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T15:15:05.497

**简短回答**：扩展与普通网页不同。他们可以在安装过程中要求额外的权限。

（略）**长答案**：插件/扩展的主要要求是它们能够访问不同的域。他们可以在安装过程中请求额外的权限（通常会警告用户扩展程序可以访问这些域上的数据）。

查看您正在谈论的扩展的[manifest.json文件。](http://code.google.com/p/chrome-rest-client/source/browse/trunk/RestClientApp/extension/source/manifest.json)进一步来说：

```
"permissions": [
    "<all_urls>", "cookies", "history"
  ] 
```

# cakephp - 绕过 cakePHP 的 HABTM 自动魔法的最佳方法？

> ID：11127028
> 
> 赞同：0
> 
> 时间：2012-06-20T19:44:33.527
> 
> 标签：cakephp, has-and-belongs-to-many, cakephp-2.1

我的问题与这个答案有关。 [https://stackoverflow.com/a/8773953/1297775](https://stackoverflow.com/a/8773953/1297775)

我在很多地方读过@deceze 所说的：“老实说，对于任何半复杂的应用程序，依靠 Cake 对 HABTM 关系的自动处理可能会变得非常脆弱且难以调试，因此我总是自己管理 HABTM 记录。 "

甚至 CakePHP 书也暗示了它[http://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated](http://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated)

我想问，当他说他自己“管理”这个 HABTM 记录时，他是否......

1）根本不在模型中创建HABTM关系并为连接表创建模型

或者

2）在模型中创建HABTM关系，但在控制器代码中不使用它，只使用$this->FirstModel->JoinModel->saveAll($someData);

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:46:36.080

基本上你需要使用[hasManyThrough](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through)关系，它本质上是一个手动设置的 HABTM，它允许你向关系中添加额外的数据（例如创建/到期日期）。这很简单，您只需要创建一个模型来加入它们并使用模型中的法线`belongsTo`和`hasMany`属性，这是一个简单的用户/会员/课程设置：

```
class User extends AppModel {
    public $hasMany = array('Membership');
}

class Course extends AppModel {
    public $hasMany = array('Membership');
}

class Membership extends AppModel {
    public $belongsTo = array('User', 'Course');
} 
```

`memberships`表需要的唯一字段（至少）是`course_id`和`user_id`。

您现在可以像普通模型一样操作 Membership 模型，而无需 Cake 将其视为 HABTM 并在您保存记录时使用它的自动魔法。您还可以`counterCache`在会员模型上使用 cool 来计算课程有多少用户等。

# switch-statement - 如何使用 iCarousel 更改 buttonTapped 上的视图控制器？

> ID：11127031
> 
> 赞同：0
> 
> 时间：2012-06-20T19:44:39.017
> 
> 标签：switch-statement, viewcontroller, icarousel

我有一个带有 iCarousel 的视图控制器。

当我点击一个我知道如何显示 UIalert 但现在我想更改视图控制器以继续另一个已经创建的视图控制器的项目时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:00:46.053

我猜你需要这样的东西：

```
MyOtherViewControllersName *vc =[[MyOtherViewControllersName alloc]initWithNibName:@"MyOtherViewControllersName" bundle:nil];
[self presentModalViewController:vc animated:YES]; 
```

只需将其放在生成警报消息的相同方法中即可。

# c# - Asp.net c#gridview单列中的多个值

> ID：11127034
> 
> 赞同：2
> 
> 时间：2012-06-20T19:44:45.813
> 
> 标签：c#, asp.net, gridview, webforms

如何在 a 的单列中显示多个值`GridView`？例如，当我在 中搜索“Ivan”时`TextBox`，输出将返回多行 Ivan，如下所示：

> **名称 任务**
> Ivan Task1
> Ivan Task2
> Ivan Task3

我想要这样的东西

> **命名任务**
> Ivan Task1、Task2、Task3

我的表是这样的

> **员工**(id,name)
> **任务**(id,name)
> **员工**任务(employee.id,task.id)

这是我的sql代码

```
SELECT  e.name,  t.name
FROM EmployeeTask et
INNER JOIN employee e ON e.id = et.employee_id
INNER JOIN task t ON t.id = et.task_id
WHERE e.name = @Name 
```

这是我的`GridView`标记

```
<Columns>
    <asp:BoundField DataField="name" HeaderText="Name" SortExpression="name"/>
    <asp:BoundField DataField="task" HeaderText="Task" SortExpression="task"/>        
</Columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:18:18.227

在纯 SQL 中，这是一种获得所需结果的方法，然后您可以将其输入 GridView：

```
SELECT     e.name, REPLACE(REPLACE(REPLACE
                          ((SELECT     t.name
                              FROM         EmployeeTask AS et INNER JOIN
                                                    task AS t ON t.id = et.task_id
                              WHERE     (et.employee_id = e.id)
                              FOR XML RAW(''), ELEMENTS)
                   , '</name><name>', ', '), '<name>', ''), '</name>', '') AS EmployeeTasks
FROM         employee AS e
WHERE     (e.name = @Name) 
```

本质上，它是一个子查询，将任务扁平化为 XML 输出，然后用逗号替换标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:22:42.530

您必须更改您的 SQL 查询。

*   如果你使用 MySQL，你可以使用 group_concat。
*   如果您使用的是 MSSQL，您可以在[这里找到答案](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T00:12:43.213

您需要使用类似这样的 SQL 连接任务名称，请注意我没有测试过脚本

```
 DECLARE @CTasks VARCHAR(500)
    SET @CTasks = ''

    SELECT @CTasks = @CTasks  + t.Task + ', ' FROM Employee e
    INNER JOIN Tasks t ON t.EmployeeId = e.Id
    WHERE e.Name = @Name
    ORDER BY e.Name ASC

    IF LEN(@CTasks) > 0
    SELECT @Name As Name, @CTasks As Tasks

You might end up getting a ',' at the end that needs taking care from Tasks column

Hope this helps... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T01:59:06.407

如果您使用的是 mssql server 2008，那么将介绍枢轴函数，它与您在问题中提到的相同

[如何使用枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

希望对您有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T05:36:30.127

在甲骨文中：

```
select name,wm_concat(task) as task from table name group by name 
```

我不知道在 sql Server.But 我认为它可以帮助你。

[类似类型的问题，看看](https://stackoverflow.com/questions/1621747/concat-field-value-to-string-in-sql-server)

在 Sql 中：

```
SELECT Field1, Substring(Field2, 2, LEN(Field2)) AS Field2 FROM
(
    SELECT
        [InnerData].Field1,
        (SELECT  ',' + Field2 FROM @Fields WHERE Field1=[InnerData].Field1 FOR XML PATH('')) AS Field2
        FROM
        (
            SELECT DISTINCT Field1 FROM @Fields
        ) AS [InnerData]
) AS OuterData 
```

我从下面的链接得到这个查询

[参考这个链接](http://knowledgebaseworld.blogspot.in/2008/12/string-concatenation-in-sql.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T13:12:26.010

创建一个新类：

```
Class EmployeeWithTask{ string employeeName{get;set} list<string>employeeTasks {get,set}} 
```

创建一个 EmployeeWithTask 列表。在检索任务列表后，对于结果循环中的每个不同员工，遍历结果并创建一个 EmployeewithTask 实例。最后将 EmployeeWithTask 列表绑定到您的 gridview

# c# - 在 C# 中具有多个视图（或分层视图）的模型视图演示器

> ID：11127039
> 
> 赞同：4
> 
> 时间：2012-06-20T19:45:11.417
> 
> 标签：c#, mvp

我在左侧面板中有一个拆分容器，是一个带有按钮的用户控件。右侧面板中是一个初始用户控件，它将根据按下的按钮而改变。我想知道的是如何让带有溢出面板的表单知道从按钮视图的演示者在视图 x 中进行绘制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:14:15.167

理论上，Presenter 应该可以访问 Views，在这种情况下，应该通知 Presenter 左面板视图中的任何按钮单击，然后更新 Form 以在右面板中显示视图。

具体如何实现在很大程度上取决于您的具体实现。架构模式是指导方针……没有必须遵循的硬性规定（除非您使用某种 MVP 库，在这种情况下，您将受到该库实现的限制）。

编辑：要在下面回答您的问题，Chip ...

同样，这完全取决于您的实施。在某些情况下，拥有一个庞大的 Presenter 和数十个视图可能是有意义的。在其他情况下，每个视图都有一个演示者可能是有意义的。但是，即使您有多个演示者，您仍然需要维护一个层次结构，以便演示者可以相互交谈。因此，在某处，在某种程度上，演示者将了解按钮单击和等待填充的空容器，即使该知识间接来自另一个演示者。

编辑 2：（针对您更新的评论）没有硬性规定，但 MVP 实现之间的一个共同特征是 Presenter 至少保留部分控制权。这意味着 Presenter 必须具有对所有相关 UI 元素的某种级别的访问权限。如果您将视图嵌套在视图中，那么您仍然需要设计一种方法让 Presenter 与它们进行交互。

# sql-server - 将临时表中的多个值插入到表中

> ID：11127046
> 
> 赞同：3
> 
> 时间：2012-06-20T19:45:39.913
> 
> 标签：sql-server, tsql, sql-server-2000

我在一个名为 #tempIQ 的临时表中有几个值，我想使用相同的组标识符插入一个名为 IQGroups 的表中。假设每个人都有一个独特的智商：

```
create table #tempIQ
(
id int
)

declare @GroupIDas int
set @GroupID=1001    

select iq from #tempIQ

1,2,86,99,101,165,180,201 
```

我想将临时表中的这些 id 插入一个名为 IQGroups 的分组中，但我很难找到一个简单的解决方案。

```
-- now try and insert all the iqs for a group into the IQGroups table from the #tempIQ table.
  insert into IQGroups (GroupID, IQ) values (@GroupID, #tempiQ.iq) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:47:45.003

试试这个：

```
 INSERT INTO IQGroups (GroupID, IQ)
   SELECT @GroupID, IQ
   FROM #tempIQ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:48:28.993

尝试使用 SELECT 语句。

```
INSERT INTO IQGroups (GroupID, IQ)
SELECT @GroupID, iq
FROM #tempIQ 
```

这是选择多行的标准方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:30:20.310

这是另一种方法，

```
select id, 1001 as GroupID
into IQGroups 
from #tempIQ 
```

# css - css 获取宽度和背景以填充视口

> ID：11127049
> 
> 赞同：0
> 
> 时间：2012-06-20T19:45:47.993
> 
> 标签：css

嘿希望有人可以帮助我。这是我在 www.pxlmin.com/portfolio 上构建的投资组合

我想要的是背景颜色占据整个宽度，并且确实如此，但是当我将窗口的大小缩小到一半时，我只是将空白区域移到一边，（当我向右滚动时)，所以我想知道如何让中心和容器的背景都向左延伸。我有 100% 的宽度，但它显然没有起到作用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:51:41.773

`width: 100%;`从中删除`#portContainer and #middlePort`。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:04:03.147

您可以将主要背景颜色添加到 body 标签：

```
body{
margin: 0;
padding: 0;
background: #EFE6D9
} 
```

或使用带有条纹的背景图像 - 但如上所述删除 100% 宽度或将左右边框设置为 0。白色位可能是 6 像素，这是添加到宽度的边框。

```
#middlePort {
background: #E8DED0;
height: 300px;
border: 3px solid #E2DAD0;
padding-top: 49px;
} 
```

或者

```
#middlePort {
background: #E8DED0;
height: 300px;
width: 100%;
border-bottom: 3px solid  #E2DAD0;
border-top: 3px solid  #E2DAD0;
padding-top: 49px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:33:04.200

啊哈，想通了.. 只需将最小宽度设置为大于您需要用背景填充的内容量即可。在我的情况下 div #middleport min-width: 1500px;

令人惊讶的是，具有这些脱落背景的页面数量（当视口宽度减小并向右滑动时）.. tinygrab.com，nodejs.org 仅举几例..

# android - 在 android 中启动 google 视频群聊

> ID：11127051
> 
> 赞同：6
> 
> 时间：2012-06-20T19:45:53.023
> 
> 标签：android, google-plus, hangout

我想与给定的人开始新的环聊对话，但我找不到任何代码。有没有简单的解决方案来做到这一点？我尝试拨打 Skype 电话，并且很容易就可以使用。

这是Skype代码：

```
 Intent sky = new Intent("android.intent.action.VIEW");
                sky.setData(Uri.parse("skype:" + nickname));
                startActivity(sky); 
```

我想要类似的东西。（或者用skype怎么打电话会议？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T00:52:07.087

目前无法使用 Intent 或任何其他 API 在 Android 设备上创建 Google+ 视频群聊。

不过，这将是一个非常酷的功能。如果您[要求](http://code.google.com/p/google-plus-platform/issues/entry)，他们可能会添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:45:55.950

我想我找到了解决方案，很简单，代码如下：

```
Intent sky = new Intent("android.intent.action.VIEW", Uri.parse("https://talkgadget.google.com/hangouts/extras/talk.google.com/myhangout"));
startActivity(sky); 
```

您只需要提供环聊的网址，但不幸的是谷歌暂停了命名的环聊，所以这个网址每次都会改变。:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T16:35:19.257

```
 public static void sendHangout(Context ctx, String message, String urlShare, String imgPath){
            Intent hangouts = new Intent(Intent.ACTION_SEND);
                if(!Utilities.isNullorEmpty(imgPath)){
                    String file = (String)imgPath.subSequence(0, imgPath.lastIndexOf("/") + 1) + message.replace(" ", "").replace(":", "").replace(".", "")
                            .replace("/", "") + ".jpeg";
                    Utilities.copyFile(imgPath, file);
                    hangouts.setType("image/*");
                    hangouts.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///" + file));
                }
            hangouts.setPackage("com.google.android.talk");
            hangouts.setType("text/plain");
            hangouts.putExtra(Intent.EXTRA_TEXT, message + ": \n" + urlShare);
            ctx.startActivity(Intent.createChooser(hangouts, "Hangouts is not installed."));    
} 
```

我希望能帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T10:18:16.173

```
Intent i = context.getPackageManager().getLaunchIntentForPackage("com.google.android.talk");
context.startActivity(i); 
```

# asp.net - ASP.NET 不断从 HEAD 中删除属性

> ID：11127053
> 
> 赞同：0
> 
> 时间：2012-06-20T19:46:07.667
> 
> 标签：asp.net, visual-studio-2010

我的 asp.net 子母版页面设置如下：

```
<asp:Content ID="MainContent" runat="server" ContentPlaceHolderID="mainContent">
    <!doctype html public "-//w3c//dtd xhtml 1.0 strict//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-strict.dtd">
    <html>
        <head >
            <title></title>
            <asp:ContentPlaceHolder ID="HeadContent" runat="server">
            </asp:ContentPlaceHolder>
        </head>
        <body>
            ...
        </body>
    </html>
</asp:Content> 
```

为什么 ASP.NET 不断删除放在 HEAD 中的属性？具体来说，我试图让它像这样：

```
<head runat="server"> 
```

如果我在 HEAD 中没有 runat，我会收到以下错误：

```
Using themed css files requires a header control on the page. (e.g. <head runat="server" />). 
```

这是我的主控，它加载我上面的子母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.Master.cs" Inherits="HeadOffice.Site" %>
<asp:contentplaceholder id="MainContent" runat="server">
</asp:contentplaceholder> 
```

原来 asp:Content 正在从 html、head、body 中删除属性。不只是头。有没有办法阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:27:18.433

您的主主页看起来像这样？

```
 <html xmlns="http://www.w3.org/1999/xhtml">
   <head runat="server">
     <title></title>
        <asp:ContentPlaceHolder ID="head" runat="server">
        </asp:ContentPlaceHolder>
   </head>
<body>
    <form id="form1" runat="server">
    <div>
       <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

       </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

如果不使您的主母版页看起来像我提供给您的这段代码。在未加入的标签`<link rel="stylesheet" type="text/css" href="my.css"/>`之间添加 以避免删除它。`<head>``<asp:ContentPlaceHolder ID="head" runat="server"/>`

为什么您的 css 可以在每个回发中消失的另一种选择是`aspx`文件丢失`MasterPagefile`或`AutoEventWireup`属性示例时的情况：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Page.Master" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebForm1" %> 
```

**编辑：** 如果您的主要`PageMaster`有`<head>`标签，您不能像在代码中那样在同一页面上添加另一个标签，您应该只添加内容

`<asp:Content ID="content1" ContentPlaceHolderID="head" runat="server"/>`放置在您的`aspx`页面上。

如果有帮助，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:27:48.443

我认为当您使用 runat=server 时，您需要给它一个 ID，这样服务器就会知道如何访问它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:59:11.790

好吧，我发现的解决方法是，如果您触发 onSave 事件，asp:content 只会修改您的 HTML。所以你要做的就是进行编辑，然后不要保存，而是关闭 VS2010 程序，然后单击保存。这样，asp:content 将没有机会修改您的代码。之后，您可以重新打开该项目。

# java - 通过 Android 调试 PHP 代码

> ID：11127060
> 
> 赞同：0
> 
> 时间：2012-06-20T19:46:31.547
> 
> 标签：java, php, android, debugging, variables

我通过 HttpPost 方法通过 Java/Android 向 PHP 发送变量。我需要调试一些 PHP 值并将其返回给 Java。这样做的最佳方法是什么？

这是一个具体的例子：

我通过 NameValuePair 发送一个参数。到 HttpPost，然后到 PHP，然后在 PHP 中进行 $foo = $_POST['foo'] 的转换。

我想要做的是将 $foo 的值返回给 Java。只是单个字符串值，仅此而已。不是任何类型的数组。然后我想烤它，这样我就可以在我的模拟器或设备中看到正在发送的值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T20:27:50.803

这有点麻烦，但如果您可以访问服务器，您可以将请求发送给您可以在 Wireshark ( [http://www.wireshark.org/](http://www.wireshark.org/) ) 上加载。

将捕获过滤到您请求的 Android 设备的 IP。假设您只是使用 HTTP（不是 HTTPS），您可以跟随流并查看整个对话（请求和响应）。

# php - php for 循环使用 i 声明变量名

> ID：11127067
> 
> 赞同：0
> 
> 时间：2012-06-20T19:47:17.627
> 
> 标签：php, loops

我想创建一个基于 i 命名变量的循环，因此它应该是 $l_name0、$lname1 等。这是我尝试做的，但是它只是永远循环并且不起作用。

```
for ($i=0; $i<=2; $i++) {
    $L_NAME.$i='name'.$i;
    $L_AMT.$i='amt'.$i;
    $L_QTY.$i='qty'.$i;
    echo $L_NAME.$i;
} 
```

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:48:17.673

这是你做错了什么

```
for ($i=0; $i<=2; $i++) {
    ${'L_NAME'.$i} = 'name'.$i;
    ${'L_AMT'.$i} = 'amt'.$i;
    ${'L_QTY'.$i} = 'qty'.$i;
    echo $L_NAME.$i;
} 
```

# jquery - jQuery将值从textarea传递到特定tr中的特定td

> ID：11127068
> 
> 赞同：0
> 
> 时间：2012-06-20T19:47:22.670
> 
> 标签：jquery, jquery-ui

我正在尝试将 textarea 值从对话框窗口传递回其原始 td 位置。

这是 tbody 的样子：

```
<tbody class="facttbody">
    <tr class="factrow">
         <td>
            <input type="text" class="facttext" value="Replace this value" />
         </td> 
```

以下是对话窗口中的替换按钮的外观：

```
buttons: {
    "Replace": function (){
        var dialogtxt = $(".factlargetextarea").val();

        $(".factdata > tbody > tr:eq($(".facttext").index(this)) > td:nth-child(5)).html(dialogtxt);
        $(this).dialog("close"); 
```

这种工作方式是将 textarea 值返回到该 td，但它也会从 td 中删除输入标记。我也试过这个：

```
$(".factdata > tbody > tr:eq($(".facttext").index(this)) > td > input:nth-child(4)).html(dialogtxt); 
```

这也不起作用。有什么建议么？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:57:10.517

它肯定会删除**td**中的输入类型，因为您在那里使用了**.html()**，即为该元素重写 html 。

取而代之的是，您可以使用 . [附加（）](http://api.jquery.com/append/)函数这个：

```
 $(".factdata > tbody > tr:eq($(".facttext").index(this)) > td:nth-child(5)).append(dialogtxt); 
```

它将在输入元素之后附加该**td中的数据。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:57:51.083

如果 -

```
$(".factdata > tbody > tr:eq($(".facttext").index(this)) > td:nth-child(5)).html(dialogtxt) 
```

正在更改“td”的全部内容，然后是-

```
$(".factdata > tbody > tr:eq($('.facttext').index(this)) > td:nth-child(5)).find("input[type='text']").val(dialogtxt); 
```

应该改变文本框的值。第二条语句只是在 then 中找到文本框，`td`然后使用该`val`方法更改它的值。

# sql - 我是否应该合并 2 个仅在一个字段中有所不同的 sql 表

> ID：11127071
> 
> 赞同：2
> 
> 时间：2012-06-20T19:47:35.280
> 
> 标签：sql, entity, entity-relationship, mysql

我应该将这些表合并到一张表中吗？有什么棘手的选择吗？

```
Table Unit for a Template table:

Id (PK)
ParentId
Name
TemplateId (FK)

Table Unit2 for a Testplan table:

Id (PK)
ParentId
Name
TestplanId (FK) 
```

编辑：

为什么不做一张这样的桌子：

```
[UnitId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [TemplateId] [int] NULL,
    [TestplanId] [int] NULL,
    [ParentId] [int] NULL, 
```

更新2：

```
1 Template has N Unit
1 Template has N Testplan
1 Testplan has N Unit 
```

这些是使用一个单元表的关系。但这只能与 Unit 表中的 TemplateId 和 TestplanId 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:50:28.050

不，不应合并相似但不相关的表。

它们在外键列中有所不同。没有简单的方法来制作一个有时指向一个表，有时指向另一个表的外键。

在您的更新中，您通过添加两列（每个外键各一列）处理了这种情况，并且您使它们都可以为空。但是想象一下，您现在想要要求每个模板都只有一个模板 ID。`TemplateId`在您的原始设计中，您可以通过制作列轻松实现这一点`NOT NULL`。但是你不能在你的组合表中这样做，因为它会阻止你创建测试计划。

现在想象一下，如果有人添加了一个同时具有 a`TestplanId`和 a `TemplateId`... 的项目，这是您想要允许的吗？在您的旧设计中这是不可能的，但在您的组合表中可以做到。

这种情况可以通过添加`CHECK`约束来处理，但它会增加额外的复杂性，而几乎没有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:53:47.217

不，因为它们存储不相关的信息。
在您的示例中，模板和测试计划是完全不相关的实体，因此不应将它们组合到一个表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:58:25.040

您可以轻松地将这两个表组合成一个包含以下列的表：

```
Id (PK)
ParentId
Name
TemplateId (FK) 
TestplanId (FK) 
```

这是个好主意吗？这取决于。这两个表是否包含本质上相同的实体？如果这个问题很难回答，请考虑是否会在两个表上进行联合以满足查询。

两者都有一个 ParentId 列。父母总是和孩子属于同一类型吗？或者父母完全是另一回事？如果你有一个混合的树结构，那么你会想要一个表中的所有 id。如果您有两个不同的树结构，那么您可能需要两个不同的表。

同样，如果存在同时具有 TemplateId 和 TestplanId 的 id，那么将它们放在同一个表中可能是个好主意。同样，如果有两个都没有的 id，那么将它们全部放在一个表中可能是个好主意。

您可以在原始的两个表上放置外键约束，并坚持该键永远不会为 NULL。在单表版本中，您不能完全做到这一点。您可以添加一个约束，说明两个键中的至少一个（或恰好一个）为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:10:38.527

如果您的目标是模拟继承，我建议您先阅读有关[鉴别器列](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)的内容，然后相应地更改您建议的表。

如果您的目标是为许多实体提供一个通用的 Unit 表以共享，您可以尝试这样的操作：

```
create table UnitList (
      Id int not null primary key
)

create table Unit (
      Id int not null primary key
    , ParentId int null
    , Name nvarchar(50) not null
    , UnitListId int not null references UnitList (Id)
)

create table Template (
      Id int not null primary key
    , UnitListId int not null references UnitList (Id)
)

create table Testplan (
      Id int not null primary key
    , UnitListId int not null references UnitList (Id)
) 
```

此时，您可能希望根据您的业务规则在 Unit 表上放置一些独特的约束。如果您希望 Unit 表中没有重复项，但希望允许一个单元出现在多个列表中，您也可以创建一个 UnitToList 联结。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:25:55.483

即使两个表看起来非常相似且重复，我认为您不应该合并它们。虽然它们没有以任何方式连接，但它们意味着保持不同的表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T18:08:26.380

根据有问题的评论：

试图减少表的数量会混淆它们的预期目的。当你试图设计一个对象的关系数据库时，问自己两个关于每个关系的问题。*A*是*B*吗？*A*有*B*吗？

[http://en.wikipedia.org/wiki/Is-a](http://en.wikipedia.org/wiki/Is-a)

[http://en.wikipedia.org/wiki/Has-a](http://en.wikipedia.org/wiki/Has-a)

你有一系列的has-a关系。（具体来说，has-many）模板有单位。模板有测试计划。测试计划有单位（但是，正如您将看到的，不同的单位）

对于每一个has-many 关系，您将在属性表​​中添加一个外键列，例如，该单元将具有一个template_id。

```
Template
----------
id
<other columns>

TemplateUnit
----------
id
template_id (FK)
parent_id (FK) -- references same table?
name
<other columns>

Testplan 
----------
id
template_id (FK)
<other columns>

TestplanUnit
---------
id
testplan_id (FK)
parent_id (FK)
name
<other columns> 
```

有了这样的模式，就不会混淆哪些表和哪些列与哪些其他对象相关。这也使查询变得非常容易。

```
SELECT *
FROM Template a
JOIN TemplateUnit b
    ON a.id = b.template_id
JOIN Testplan c
    ON a.id = c.template_id
JOIN TestplanUnit d
    ON c.id = d.testplan_id 
```

现在您知道所有*b*列都是模板单元，所有*d*列都是测试计划单元。十分简单。

# html - 如何从另一个域为画布加载 img src？

> ID：11127087
> 
> 赞同：0
> 
> 时间：2012-06-20T19:48:50.173
> 
> 标签：html, canvas, image, src

当我在画布中加载图像并指定其 src 时，我使用与 html 文件位于同一文件夹中的文件名，并加载 img。所以它会是这样的：

```
img.src = 'Untitled.png'; 
```

但是如果我尝试这个，img 不会加载

```
img.src = 'http://dgroover.wikispaces.com/file/view/bill-gates-car.jpg'; 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:30:29.040

使用此代码：

*标记部分*

```
<canvas id="cnv" width="500" height="500"></canvas> 
```

*脚本部分*

```
var img = new Image();
img.onload = function(){
    document.getElementById("cnv").getContext("2d").drawImage(this,0,0);
};
img.src="http://dgroover.wikispaces.com/file/view/bill-gates-car.jpg";​ 
```

[**演示**](http://jsfiddle.net/fqd5R/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T08:28:39.157

以这种方式尝试：

```
> var canvas = document.getElementById("myCanvas");
>         var ctx = canvas.getContext("2d");      
>         ctx.translate(0.5, 0.5);
>         ctx.strokeStyle = "#5F7FA2";
>         ctx.strokeRect(50, 50, 25, 25);
>         var img = new Image();
>         img.src = "http://www.cs.washington.edu/education/courses/csep576/05wi/projects/project4/web/artifact/liebling/average_face.gif";
>         img.onload = function(){
>         ctx.drawImage(img, 50, 50);} 
```

# python - 非常规命名实体识别

> ID：11127088
> 
> 赞同：2
> 
> 时间：2012-06-20T19:48:52.193
> 
> 标签：python, nlp, nltk, stanford-nlp

我正在尝试设计一个有点非传统的 NER 系统，将某些多字字符串标记为单个单元/标记。

那里有很多很酷的 NER 工具，但我有一些特殊需求，这使得直接使用开箱即用的东西几乎是不可能的：

首先，实体不能仅仅被提取并打印在一个列表中——它们需要以某种方式标记并合并为标记。

其次，分类并不重要——人/组织/位置并不重要（至少在输出中）。

第三，这些不仅仅是我们正在寻找的典型的 ENAMEX 命名实体。我们需要公司和组织，但也需要“气候变化”和“同性婚姻”等概念。我在一些工具上看到过这样的标签，但它们都是“提取式”的。

我将如何获得这种类型的功能？在我自己的手动注释数据集上训练斯坦福标注器会完成这项工作吗（其中“气候变化”式的短语被标记为 MISC 或其他东西）？还是我最好只列出“奇怪”实体的候选名单，并在通过常规 NER 系统运行后检查文本？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:29:31.137

命名实体标记器（如斯坦福 NER）的底层 CRF 模型实际上可用于识别任何事物，而不仅仅是命名实体。肯定有人非常成功地使用它们来挑选各种术语短语。该软件当然可以在上下文中为您提供标记的令牌序列。

但是，您可以选择是否以“更无监督”的方式处理此问题，其中使用 NP 分块和搭配统计等方法，或者直接 CRF 的完全监督方式，您提供大量注释您想要输出的短语类型的数据。

# c++ - 两个类之间的循环引用

> ID：11127089
> 
> 赞同：5
> 
> 时间：2012-06-20T19:48:55.363
> 
> 标签：c++, pointers, client-server, pass-by-reference, circular-reference

我知道这肯定是一个 n00b 问题，但是我必须实现一个模型客户端-服务器顺序交互应用程序，并且由于客户端-服务器调用的数量不同，我不能只迭代外部函数中的步骤，总是从客户端，然后将其转发到服务器，反之亦然，所以我需要让我的类`Server`和`Client`类相互了解，以便它们可以在它们之间调用它们的公共方法。一种方法是将两者都设计为单例，但我希望以更简单的方式来实现，更准确地说是使用循环引用：客户端存储对服务器的引用，服务器存储对客户端的引用。我知道这可能不是一个好方法，并且[当它变得太深时可能会导致调用堆栈爆炸](https://stackoverflow.com/questions/1825964/c-c-maximum-stack-size-of-program)，因此欢迎对我的设计进行任何改进。

为了实现所描述的实现，我认为我可以使用`std::shared_ptr`, 因为`std::unique_ptr`如果我还想防止 main 中的两个变量在我调用两个 setter 时被破坏（对吗？）。所以，这就是我所拥有的（简化代码）：

```
#include <iostream>
#include <memory>

class Server;

class Client
{
public:
    void SetServer (const Server &server);
private:
    std::shared_ptr<const Server> server;
};

void Client::SetServer (const Server &server)
{
    this->server = std::shared_ptr<const Server>(&server);
}

class Server
{
public:
    void SetClient (const Client &client);
private:
    std::shared_ptr<const Client> client;
};

void Server::SetClient (const Client &client)
{
    this->client = std::shared_ptr<const Client>(&client);
}

int main ()
{
    Server server;
    Client client;

    server.SetClient(client);
    client.SetServer(server);

    //Here I ask the client to start interacting with the server.
    //The process will terminate once the client
    //exhausts all the data it needs to send to the server for processing

    return 0;
} 
```

不幸的是，我的代码似乎试图多次调用客户端和服务器（隐式）析构函数，或者一些类似的讨厌的事情，我确信这是由于我对`std::shared_ptr`应该如何工作的理解不足造成的。请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:00:03.260

您在堆栈上分配您的服务器和客户端实例，它们将在`main()`退出时被删除。您也不想`std::shared_ptr`删除它们。因此，有两种解决方案：

1.  在客户端和服务器中使用非托管指针，并在外部管理它们的生命周期。

2.  到处使用托管指针，包括`main()`. 请注意，这`shared_ptr`意味着所有权。在当前设计中，服务器拥有客户端，但客户端也拥有服务器。这是一个循环引用：默认情况下，它们永远不会被释放，除非您在仍然可以的时候重置其中一个指针。

    例如，您可以决定客户端保持服务器处于活动状态，因此如果没有其他 shared_ptrs 指向它，最后消失的客户端将关闭服务器。服务器`weak_ptr`对客户端有一个，但客户端`shared_ptr`对服务器有一个。

```
class Client;
class Server;

class Client
{
public:
    void SetServer (const std::shared_ptr<const Server> &server);
private:
    std::shared_ptr<const Server> server;
};

void Client::SetServer (const std::shared_ptr<const Server> &server)
{
    this->server = server;
}

class Server
{
public:
    void SetClient (const std::weak_ptr<const Client> &client);
private:
    std::weak_ptr<const Client> client;
};

void Server::SetClient (const std::weak_ptr<const Client> &client)
{
    this->client = client;
}

int main()
{
  std::shared_ptr<Server> server(new Server);
  std::shared_ptr<Client> client(new Client);

  server->SetClient(client);
  client->SetServer(server);

  // do stuff

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:53:30.840

您的变量具有自动生命周期，并且在超出范围时将被销毁。

因此，使用任何生命周期管理的智能指针都是错误的，因为它会再次调用 delete。

# asp.net - Google Calendar Api v3 .net MVC - 在 Razor 视图中显示

> ID：11127090
> 
> 赞同：2
> 
> 时间：2012-06-20T19:48:55.457
> 
> 标签：asp.net, asp.net-mvc-3, razor, google-calendar-api

我一辈子都找不到如何在我的视图中显示日历。我可以编写代码 我只是喜欢使用新 API 和剃刀视图在 iframe 中显示日历的示例

这是来自谷歌的代码。问题是AuthenticatorFactory ..它不存在。如果你让类在 .dll 之外使用，它还会引用不存在的类，以及带有不正确参数的方法。

我显然没有使用“Main”方法，但是由于authorizationfactory和其他几个缺少的类/方法，无法实现此代码

```
 public static void Main(string[] args)
  {
      // Register the authenticator. The Client ID and secret have to be copied from the API Access
      // tab on the Google APIs Console.
      var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
      provider.ClientIdentifier = "YOUR_CLIENT_ID";
      provider.ClientSecret = "YOUR_CLIENT_SECRET";
      AuthenticatorFactory.GetInstance().RegisterAuthenticator(
              () => new OAuth2Authenticator(provider, GetAuthentication));

      // Create the service. This will automatically call the previously registered authenticator.
      var service = new CalendarService();

  }

  private static IAuthorizationState GetAuthentication(NativeApplicationClient arg)
  {
      // Get the auth URL:
      IAuthorizationState state = new AuthorizationState(new[] { CalendarService.Scopes.Calendar.GetStringValue() });
      state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
      Uri authUri = arg.RequestUserAuthorization(state);

      // Request authorization from the user (by opening a browser window):
      Process.Start(authUri.ToString());
      Console.Write("  Authorization Code: ");
      string authCode = Console.ReadLine();
      Console.WriteLine();

      // Retrieve the access token by using the authorization code:
      return arg.ProcessUserAuthorization(authCode, state);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:54:50.390

我建议永远不要推荐 Google 的 Calender API 3 for .NET，我只是使用 Python。他们的文档对于其他一切都是可笑的。

# c# - 如何在 C#/.NET/DirectX 中检索 mp3 音频文件的正确持续时间？

> ID：11127092
> 
> 赞同：3
> 
> 时间：2012-06-20T19:48:58.803
> 
> 标签：c#, .net, directx, mp3

我正在编写一个媒体演示程序，我几乎完成了，但由于某种原因，我得到的 mp3 文件的持续时间不正确。我使用 Microsoft.DirectX.AudioVideoPlayback.Audio 类播放音频文件，它适用于 wav 文件。从谷歌搜索中，我可以看出当 mp3 使用可变比特率编码时似乎是一个问题，但是无论媒体的比特率设置如何，我都需要我的程序准确报告。这是代码：

```
Media_Audio aud = (Media_Audio)item.MediaFile;
TimeSpan total = aud.EndTime - aud.StartTime;
if (aud.EndTime.TotalSeconds == 0)
{
    total = TimeSpan.FromSeconds(aud.Player.Duration)-aud.StartTime;
}
TimeSpan now = TimeSpan.FromSeconds(aud.Player.CurrentPosition) - aud.StartTime;
string nows = now.Hours.ToString() + ":" + now.Minutes.ToString() + ":" + now.Seconds.ToString();
string tots = total.Hours.ToString() + ":" + total.Minutes.ToString() + ":" + total.Seconds.ToString();
item.currentPosition.Text = nows + "/" + tots; 
```

关键是：

```
total = TimeSpan.FromSeconds(aud.Player.Duration)-aud.StartTime; 
```

aud.Player 是 Microsoft.DirectX.AudioVideoPlayback.Audio 的一个实例。

对于事实上 5:49 秒长的歌曲，它报告 39:13 作为持续时间。与 Windows Explorer 和 VLC Player 的长度相同。另外，安装 K-Lite Mega Codec 包。所以它可能会干扰。我知道这个问题：[如何在 .NET 中检索 MP3 的持续时间？](https://stackoverflow.com/questions/383164/how-to-retrieve-duration-of-mp3-in-net) 但是，在我的程序的这个阶段，我没有时间从当前播放音频文件的方法切换到新的播放方法，那么我还有其他选择来确定仅使用 DirectX 的持续时间吗？还是我必须求助于 BASS.NET 或 TagLib Sharp？（元数据是否甚至包含 VBR 编码的 mp3 的准确信息？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:20:20.207

我想将它作为评论发布给@anantoline，但它太长了......他是对的！

VBR 文件的长度根本无法估计。其中的每个 mp3 帧都可能具有不同的比特率，因此通过读取文件的任何部分，您无法知道文件任何其他部分的数据密度。确定 VBR mp3 的确切长度的唯一方法是对其进行整体解码，或者（如果您知道如何）一一读取帧的所有标题，并收集它们的解码 DURATION。

只有当您使用的 CPU 是您需要节省的宝贵资源时，您才会使用稍后的方法。否则，解码整个文件，您将获得持续时间。

您可以使用我的 mpg123 端口来完成这项工作：http: [//sourceforge.net/projects/mpg123net/](http://sourceforge.net/projects/mpg123net/)

更多：许多 mp3 文件都添加了“东西”，作为 id3 标签，如果您没有浏览所有文件，您可能会错误地在持续时间计算中使用该标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:59:31.153

AFAIK 如果不遍历整个文件一次，就不可能确定 VBR 编码的 MP3 文件的正确长度（即使没有出现，也必须进行某种解码/播放）。

您可以尝试读取 ID3 标签以获取长度（由最初编码曲目/解码曲目的应用程序写入其中。但是，提供的 MP3 文件可能没有 ID3 标签或更糟 - 中的错误值ID3 标签。

# facebook-graph-api - 如何获取朋友的帖子和相册的隐私设置（共享）

> ID：11127098
> 
> 赞同：0
> 
> 时间：2012-06-20T19:49:26.767
> 
> 标签：facebook-graph-api, facebook-fql

有没有办法获取朋友的帖子和相册的隐私设置？
我可以通过在 Graph Explorer 上使用
[https://graph.facebook.com/](https://graph.facebook.com/) {friend_id}/posts来获取朋友的帖子，
但通过检查数据，我看不到任何隐私字段，如“我/帖子”中的那个
如果我查看帖子
[https://www.facebook.com/photo.php?fbid=](https://www.facebook.com/photo.php?fbid=) <>&set=at.<>&type=1
“Shared With”属性可以告诉您隐私级别是什么。
如何使用 Graph API 或 FQL 读取属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:19:43.213

您可能想查看[https://developers.facebook.com/docs/reference/fql/privacy/](https://developers.facebook.com/docs/reference/fql/privacy/)

# javascript - 无法将脚本标签添加到 iframe 头部或正文

> ID：11127104
> 
> 赞同：1
> 
> 时间：2012-06-20T19:49:42.257
> 
> 标签：javascript, jquery, iframe

我正在尝试将`<script></script>`标签添加到`iframe`头部或身体但无法成功。

```
var iframe = $("iframe#demo),
    contents = iframe.contents(),
    body = contents.find('body'); 
```

尝试一：

```
var script = document.createElement( 'script' );
script.type = 'text/javascript';
$(body).append(script); 
```

第二次尝试：

```
$("`<script></script>`").appendTo(contents.find('head')) 
```

上述任何一种方法都不适合我。

让我知道是否有人有一些指针。

谢谢

病毒性的

# java - Google AppEngine - Java - Slim3 - 在新视图中显示对象（从键中检索）属性

> ID：11127105
> 
> 赞同：0
> 
> 时间：2012-06-20T19:49:45.347
> 
> 标签：java, model-view-controller, google-app-engine, parameter-passing

我是一个新手 Google AppEngine 编码器，所以请原谅我的无知 xD

我正在使用 Slim3 MVC 框架，所以我使用 Java 进行编码。

我有一个视图中显示的对象列表，我想通过单击适当的链接来编辑一个对象。我提供了一个带有相关视图的编辑控制器，我以这种方式将密钥传递给控制器​​：

Index.jsp [extract]（列出所有对象的视图）：

```
<c:forEach var="tweet" items="${tweetList}">
    ...
    <a href="edit?key=${f:h(tweet.key)}">edit</a>
    ...
</c:forEach> 
```

编辑控制器：

```
 public class EditController extends Controller {

    @Override
    public Navigation run() throws Exception {
        Key tweetKey = asKey("key");
        return forward("edit.jsp");
    }
} 
```

在控制器中，我可以从 url 中检索密钥

```
Key tweetKey = asKey("key"); 
```

但是在传递这个键以查看（编辑视图）并准确显示我想要的对象（在检索到的键处分配）之后，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:19:32.523

我自己回答：

MyController.java [提取]

```
public class MyController extends Controller {
    private MyService service = new MyService();

    @Override
    public Navigation run() throws Exception {
        Key myKey = asKey("key");
        MyObject myObject = service.getObject(myKey);
        requestScope("myObject", myObject);
        return forward("edit.jsp");
    }
} 
```

Edit.jsp [摘录]

```
...
<p>myObject properties:</p>
prop1: ${f:h(myObject.prop1)}<br />
prop2: ${f:h(myObject.prop2)}<br />
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:45:14.630

tnx 马西米利亚诺。对于需要更多细节的人：

编辑服务.java

```
...
private MyObjectMeta n = new MyObjectMeta();  

public news getObject(Key myKey) {
    // TODO Auto-generated method stub
    return Datastore.get(n, myKey);

}
... 
```

# ios - CocoaHTTPServer 和端口 80，适用于 iPod/iPad，电话上的权限被拒绝错误

> ID：11127107
> 
> 赞同：1
> 
> 时间：2012-06-20T19:49:47.780
> 
> 标签：ios, asyncsocket, cocoahttpserver

因此，我使用[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)在 iOS 设备上提供网站。

当使用带有 iOS 5.1 的 iPod Touch 或 iPad 时，我可以在端口 80 上收听，从而减少用户的麻烦。

尝试在我的 iPhone 3G 上做同样的事情，仍然运行 iOS 4.2，得到错误

```
Error starting HTTP Server: Error Domain=NSPOSIXErrorDomain Code=13 "Permission denied" UserInfo=0x3572e0 {NSLocalizedFailureReason=Error in bind() function, NSLocalizedDescription=Permission denied} 
```

现在我知道在小于 1024 的端口上收听可能会受到限制，但为什么我的 iPod 和 iPad 都没有问题？

# emacs - Emacs 24 包系统初始化问题

> ID：11127109
> 
> 赞同：46
> 
> 时间：2012-06-20T19:49:52.800
> 
> 标签：emacs, dot-emacs, emacs24

在我看来，Emacs 24 内置的新包系统在正确加载和初始化已安装的包时存在一些缺陷。

最近，我升级到 2012 年 6 月 10 日发布的 Emacs 24.1.1，我一直在尝试使用内置的包系统并使用它安装了几个包，但它们都有与自动加载和初始化。

例如，我使用了一个名为的包`smex`，它提供了使用`M-x`和弦的增强功能。它需要您为 定义一个键`M-x`，所以我`(global-set-key (kbd "M-x") 'smex)`在我的`init.el`文件中添加了。但是在启动 emacs 之后，我按下`M-x`和弦并收到消息*“符号的函数定义无效：smex”* ......如果我也放入`(require 'smex)`我的 init.el 文件，我收到错误消息*“文件错误：无法打开加载文件，smex "*

将 smex 的位置添加到 load-path 变量使其按预期工作，但是，这似乎违背了首先拥有一个包系统的整个目的......

有什么想法吗？有没有更好的方法，或者我们现在是否接受这个限制？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-09-13T09:44:39.763

值得注意的是*为什么*Emacs 会延迟包初始化：

请参阅`C-h``i``g` `(emacs) Package Installation` `RET`，特别是：

> 加载init文件后自动加载包的原因是用户选项只有在加载init文件后才会收到他们的自定义值，包括影响打包系统的用户选项。在某些情况下，您可能希望在 init 文件中显式加载包（通常是因为 init 文件中的某些其他代码依赖于包）。在这种情况下，您的 init 文件应该调用该函数`package-initialize`。您可以确保在通话`package-load-list`之前设置相关的用户选项，例如（见下文）。`package-initialize`您还应该设置 `package-enable-at-startup`为`nil`, 以避免在处理 init 文件后再次加载包。或者，您可以选择在启动时完全禁止加载包，并调用命令 `M-x package-initialize`手动加载你的包。

因此，只要您确保您的 init 文件在调用之前为`package`自定义组¹`package-initialize`中的变量处理您想要的任何非默认值——并且在自定义包库配置时保持这种方法——应该可以这样做这个。

或者，因为`after-init-hook`在标准包初始化完成后运行，您可以使用它来评估任何依赖于包的初始化代码。因此`package-initialize`，与其直接在 init.el 中调用，不如编写：

```
(add-hook 'after-init-hook 'my-after-init-hook)
(defun my-after-init-hook ()
  ;; do things after package initialization
  ) 
```

将需要初始化的包系统的代码放在该函数中。

YMMV。

（nb 我没有测试过初始化后的方法，因为我并没有真正使用 package.el；但我确实确认了启动代码中的事件顺序，所以我相信它会按照描述的那样工作。）

¹ `M-x` `customize-group` `RET` `package` `RET`

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-21T14:41:38.583

默认情况下，您安装的软件包在加载**后**`package.el`会被激活。为了能够在结束之前使用它们，您需要使用以下命令激活它们：**`.emacs``.emacs`**

 **```
(setq package-enable-at-startup nil)
(package-initialize) 
```**

# java - 为每个请求设置 spring 属性

> ID：11127111
> 
> 赞同：0
> 
> 时间：2012-06-20T19:50:06.823
> 
> 标签：java, spring, javabeans

我有一个spring bean，我在一个方法中得到这样的 -

```
repAppCaller = CensusFileSpringUtils.getBean(CensusFileWfConstants.Spring.Bean.REP_CALLER); 
```

但是这个 bean 的属性只设置了 1 次，而不是针对每个请求？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:07:42.227

也许我不明白你的问题，试着澄清一下，但我认为你必须使用[原型范围](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-scopes)来创建每个调用的新实例，默认情况下在 spring 安装的单例范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:20:45.927

我想`repAppCaller`获得的那个实例*必须*暴露一个方法，比如`setProperty(...)`让你有这样的需求。

如果是这样，您可以使用[`OncePerRequestFilter`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html)来获取所需的请求属性，然后将其分配用于*同一*请求`repAppCaller.setProperty(...)`的后续阶段。

# jquery - jQuery优化

> ID：11127113
> 
> 赞同：1
> 
> 时间：2012-06-20T19:50:08.303
> 
> 标签：jquery

这样做有什么区别：

```
$(".topHorzNavLink").click(function() {

    var theHoverContainer = $("#hoverContainer");

    var thisHorzLink = $(this).attr('linkItem');

    if (thisHorzLink == "link2") {
        if ($("#hoverContainer").is(":visible") == true) { 
            $("#hoverContainer").slideUp('slow');
        } else {                
            $("#hoverContainer").slideDown('slow');
        }
    }

}); 
```

或这个：

```
$(".topHorzNavLink").click(function() {

    var theHoverContainer = $("#hoverContainer");

    var thisHorzLink = $(this).attr('linkItem');

    if (thisHorzLink == "link2") {
        if (theHoverContainer.is(":visible") == true) { 
            theHoverContainer.slideUp('slow');
        } else {                
            theHoverContainer.slideDown('slow');
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T19:51:18.093

您的第二种方法更有效，因为它只运行`$("#hoverContainer")`一次选择器操作并一遍又一遍地使用相同的 jQuery 对象，而不是运行相同的选择器操作三次并每次构造三个新的 jQuery 对象。

为了紧凑和高效，您可以这样做：

```
$(".topHorzNavLink").click(function() {
    if ($(this).attr('linkItem') == "link2") {
        $("#hoverContainer").slideToggle('slow');
    }
}); 
```

或者，如果`linkItem`属性不是动态分配/更改的，您可以将其烘焙到选择器中，如下所示：

```
$(".topHorzNavLink[linkItem='link2']").click(function() {
    $("#hoverContainer").slideToggle('slow');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:52:29.480

`.slideToggle()`你也可以用

```
$(".topHorzNavLink").click(function() {

    var theHoverContainer = $("#hoverContainer");

    var thisHorzLink = $(this).attr('linkItem');

    if (thisHorzLink == "link2") {

            theHoverContainer.slideToggle('slow');
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:58:32.450

它们或多或少是相同的速度。jQuery 已经通过查找“#”并对该 ID 执行 document.getElementById 来优化 ID 选择器。除非您将此功能运行 1000 次，否则您不会看到显着的速度提升。

我会采取任何你最喜欢的方法。第一种方法更清楚您选择的内容。第二种方式只定义了一次选择器，因此以后更容易修改。

# css - 如何将DIV位置设置为中心左侧200像素

> ID：11127120
> 
> 赞同：13
> 
> 时间：2012-06-20T19:50:21.630
> 
> 标签：css, positioning, center

我想`DIV`在中心左侧放置一个 200 像素。

我目前正在使用以下代码，但在更高分辨率的显示器（例如 1920×1080）上，它`DIV`滑出了位置：

```
.hsonuc {
    position: absolute;  
    top: 20px; 
    margin:auto;
    margin-left:200px;
    display:none;
} 
```

## 我想要达到的目标：

![说明位于页面中心左侧 200px 的 div](../Images/11f16994d4852e7cb39f3136c93e4405.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T20:13:18.957

只需将其`50%`从右侧 ( `right:50%;`) 定位，然后使用`margin-right:200px;`([示例](http://jsfiddle.net/Beaga/)) 将其推过。

## HTML

```
<div class="hsonuc">DIV</div> 
```

## CSS

```
.hsonuc {
    position:absolute;
    top:20px;
    right:50%; /* Positions 50% from right (right edge will be at center) */
    margin-right:200px; /* Positions 200px to the left of center */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-07T18:45:12.223

您可以使用 % 和 px 的组合；如果你的 div 宽度是 300px，那么 div 的一半是 150px。150 + 200 = 350 像素；然后用这个

```
margin-left:calc(50% - 350px); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T00:46:58.097

您还可以使用 Javascript 来确定距离浏览器左侧 200px 的中心实际有多少像素。这样你就不必使用`position: absolute`.

示例（jQuery）：

```
var centerMark = Math.round( $(window).width() / 2 ); //define the center of the screen
var elementWidth = $('.hsonuc').width();
var position = centerMark - 200 - elementWidth; //define where 200 left of the center is and subtract the width of the element.

//now you have `position` you can use it almost any way you like.
//I prefer to use margins, but that's all up to you.

$('.hsonuc').css('margin-left', position); 
```

# java - 来自 swingx 的 JComboBox

> ID：11127126
> 
> 赞同：1
> 
> 时间：2012-06-20T19:51:03.703
> 
> 标签：java, swing, jcombobox, swingx

如何使用 JComboBox（严格或非严格）`swingx`？有人可以发布一个简单的示例或教程吗？[http://swingx.java.net/](http://swingx.java.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:49:48.690

你的问题是：

## “我如何将 SwingX`AutoCompleteDecorator`用于`J(X)ComboBoxes?`”

答案是：

“您可以在来自[http://swingx.java.net/的 webstartable](http://swingx.java.net/) [SwingX 演示](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)中找到严格和非严格 JComboBoxes、JTextFields 和带有 JList 的严格 JTextField 的示例源代码。启动演示，单击“自动完成演示”在任务列表部分“功能”中输入，您将看到示例和“AutoCompleteDemo.java”-源代码。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:26:21.577

Swingx 的 JXComboBox 除了对标准的 Swing JComboBox 进行视觉增强外，没有添加任何东西。和所有其他 Swing 组件一样，JComboBox 的使用在[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)中得到了很好的描述。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-21T11:56:44.467

SwingX 组件扩展了它们的`JComponent`对应组件，并且可以像任何其他组件一样添加`JComponent`（例如使用`addComponent(....)`方法）。如果您使用的是 NetBeans IDE 7.0（或更早版本），您可以将 的类复制`JXComboBox`到您正在使用的包中，然后像从调色板中添加一样拖放。

# google-app-engine - 谷歌应用引擎（GAE）中的分页

> ID：11127129
> 
> 赞同：1
> 
> 时间：2012-06-20T19:51:27.523
> 
> 标签：google-app-engine, paging

在过去的几天里，我一直在花时间试图弄清楚如何在 Google App Engine 中进行正确的分页。一旦我有了一个可行的解决方案，我就会在谷歌代码上打开这些东西，因为我看到很多人都在为此苦苦挣扎。

目标：为 GAE 创建一个简单但功能强大的分页解决方案，具有以下功能：

*   向前和向后分页，支持首页和末页
*   按字段的（子集）排序（一次仅一个订单）
*   具有类似方式的过滤条件（例如，输入“Tom”将过滤并仅显示名称以“Tom”开头的人）
*   跟踪总页数

设计决策：

*   不要使用限制/偏移，因为它不会缩放。而是依靠游标
*   使用分片保持总页数更新
*   接受妥协，但以最佳性能/可扩展性为目标

障碍（即最后的堡垒）：我觉得剩下的唯一问题是当我有一个过滤标准（例如，名称以“Tom”开头）和一个不同属性的排序标准时。

例如人[姓名，年龄]

*   按名称“汤姆*”过滤
*   按年龄排序

通读文档，我想我找到了解决方案：

```
Query q = new Query("Person");
q.addFilter("name", FilterOperator.GREATER_THAN_OR_EQUAL, nameFilter);
q.addFilter("name", FilterOperator.LESS_THEN, nameFilter + "\uFFFD");
q.addSort("name", SortDirection.ASCENDING);
q.addSort("age", SortDirection.ASCENDING); 
```

我以为这会回来：

*   汤姆2 18
*   汤姆1 20

不幸的是，这会返回

*   汤姆1 20
*   汤姆2 18

因为查询首先按名称过滤，然后按年龄作为辅助键。

我能想到的唯一解决方案是将整个过滤器结果放入 Java 结构中，使用比较器进行排序，然后选择我想要显示的记录。但这还有一个问题是我的光标逻辑消失了。这有点意味着我有 2 条逻辑路径来解决分页问题。这可能是最终的解决方案，但我想知道是否有更聪明的人有更好的主意。

欢迎任何想法。

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:16:43.063

我怀疑您可能想查看全文搜索。 [http://googleappengine.blogspot.jp/2012/05/looking-for-search-find-it-on-google.html](http://googleappengine.blogspot.jp/2012/05/looking-for-search-find-it-on-google.html)

如果您为名称创建索引，您应该能够使用（未记录的）“~”运算符进行词干匹配。有人提到它将在下一个版本中由 Google（我相信）的某个人在[GAE Full Text Search API 短语匹配中记录](https://stackoverflow.com/questions/10523987/gae-full-text-search-api-phrase-matching?rq=1)

If you put the entity id into the text index, you'd have a list of entities containing that name stem and then couldn't you filter by a list of keys and sort by age.

Shawn

UPDATE: Now that the docs are released I see the "~" operator is NOT stem matching but rather merely plurals

> To search for plural variants of an exact query, use the ~ operator: ~"car" # searches for "car" and "cars"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:58:25.053

第一个建议是不要在名称上使用不等式过滤器。如果您必须使用不等式过滤器，那么您是对的，您必须先按名称排序，然后再按年龄排序。哪个，是的，真的很糟糕，因为如果你想分页，你需要整个结果然后排序并弄清楚如何分页。

我会尝试通过您的 UI 或通过非规范化数据存储区中的名称字段来找出如何避免不等式过滤器的方法。

我真的不知道你为什么会有 Tom1 和 Tom2，但如果你知道你会有一堆 Toms，你可能有一个 name_base 字段只存储“Tom”，那么你可以在没有不等式。

# javascript - 在拆分中包含分隔符（javascript）

> ID：11127132
> 
> 赞同：3
> 
> 时间：2012-06-20T19:51:47.327
> 
> 标签：javascript, jquery, split

这是一个文本区域。用户可以写任何东西。

```
<textarea id="text">First sentence. Second sentence? Third sentence!
Fourth sentence.

Fifth sentence
</textarea> 
```

最后，我必须将所有文本拆分为一个数组。

```
var sentences = $('#text').val().split(/\r\n|\r|\n|[.|!|?]\s/gi); 
```

我遇到的问题是数组项值中不存在分隔符。这是**句子**返回的内容：

```
["First sentence", "Second sentence", "Third sentence", "Fourth sentence", "Fifth sentence"] 
```

它应该是：

```
["First sentence.", "Second sentence?", "Third sentence!", "", "Fourth sentence.", "", "", "Fifth sentence"] 
```

额外注意事项：

*   最后一句不需要分隔符（它可以以任何字符结尾）
*   如果一个句子有多个分隔符，它也应该包含在数组项中。例：**第二句？？**应该是 [...,"第二句??",...]

有任何想法吗？欢迎任何方法（不一定是 split() ） -**谢谢**！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:03:18.730

改为使用`.match`（[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)）。当您将它与`/.../g`-type 正则表达式一起使用时，它会返回一个包含所有匹配项的数组。您只需要先修改您的正则表达式：

```
var sentences = $('#text').val().match(/[^\r\n.!?]+(\r\n|\r|\n|[.!?])\s*/gi); 
```

​<a href="http://jsfiddle.net/kEHhA/3/" rel="nofollow">http://jsfiddle.net/kEHhA/3/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T20:02:42.830

```
var re = /[^\r\n.!?]+(:?(:?\r\n|[\r\n]|[.!?])+|$)/gi;
("First sentence.. Second sentence?? Third sentence!!\n"+ "Fourth sentence").match(re).map($.trim)
//["First sentence..", "Second sentence??", "Third sentence!!", "Fourth sentence"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:10:36.843

这对您的目的有用吗？看起来您已经在使用 jQuery，但如果没有，它应该很容易修改：

```
var sentences = [];
$.each($('#text').val().split(/([^\.\?\!\r\n]+.)\s/gi), function(i, sentence) {
  if(i%2 !== 0) {
    sentences.push(sentence)
  }
});
// sentences = ["First sentence.", "Second sentence?", "Third sentence!", "Fourth sentence."] 
```

编辑：Blazemonger 的解决方案类似但更优雅，使用 match() 而不是 split()，因此不需要删除数组中奇数元素的第二步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:54:54.353

关于什么

```
var sentences = $('#text').val().split(/\r\n|\r|\n|\s/gi); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:02:34.103

[使用look-behinds](http://www.regular-expressions.info/lookaround.html)会很容易，但由于 JavaScript 不支持它，我的建议是：

找到要拆分的空白字符，然后用一些虚拟字符替换它们。然后在那个角色上分裂。

就像是：

```
$('#text').val().replace(/\r\n|\r|\n|([.!?])\s/gi, '$1\0').split(/\0/g);​​​​​ 
```

*编辑：*显然有更好的解决方案不依赖拆分。但是，我将把它作为替代方案。

# html - IE 在图片后显示文本的方式存在错误

> ID：11127137
> 
> 赞同：-1
> 
> 时间：2012-06-20T19:52:07.727
> 
> 标签：html, css

我的页面在 Chrome 和 Firefox 中运行良好，但在 IE 中没有很好地解码。我修复了大多数错误，但我有一个似乎可以解决的错误。当前显示图片，并且

都挤在它旁边；该表显示正常。这是代码：

```
<div id="page">
            <div id="slider">
                <!-- Here is where the pictures for the slider go -->
                <div id="PhotoSlider">
                    <ul class="bjqs">
                        <li><img src="images/test2.png"></img></li>
                        <li><img src="images/test1.png"></img></li>                        
                    </ul>
                </div>
            <!-- Java Script for the slider -->
            <script>                 
                $("#PhotoSlider").bjqs({
                    'height' : 286,
                    'width' : 1000,
                    'animationDuration' : 800,
                    'showMarkers' : true,
                    'useCaptions' : false,
                    'keyboardNav' : false,
                    'showControls' : false
                });
            </script>
            </div>
            <div id="content">
                <div class="box">
                    <h1>Welcome!</h1><br/>
                        <p></p>
                        <p></p>
                </div>  
            </div>  

            <div id="contentRight">
                <p></p>
                <p></p>
            </div>
            <!-- This is the newsletter form -->
            <div id="sidebar">
                <img align="left" src="images/kidsSmiling1.png"></img><br>
                <h2>Newsletter</h2>
                <p>Sign up to receive the lastest news and special offers</p>
                <table>             
                    <tr>
                        <td>First Name<req>*</req>&nbsp;</td>
                        <td><input id="firstName" name="firstName" type="text" style="width:180"/>
                    </tr>
                    <tr>
                        <td>Last Name<req>*</req>&nbsp;</td>
                        <td><input id="lastName" name="lastName" type="text" style="width:180"/>
                    </tr>
                    <tr>
                        <td>Email<req>*</req>&nbsp;</td>
                        <td><input id="email" name="email" type="text" style="width:180"/>
                    </tr>
                </table>
                <p align="middle"><input align="middle" type="submit" value="Submit" onclick="save()"  style="width:65"></P>
                <p><req>*</req>&nbsp;Required fields</p>                
            </div>
            <br class="clearfix" />
            <!-- Social media div -->
            <div id="media">
                <img align="right" src="images/facebookLogo.png"></img> <img align="right" src="images/twitterLogo.png"></img>
            </div> 
        </div>
    </div>
    <!-- Footer -->
    <div id="footer">
        Copyright &copy; 2012 Kaysville Dental | <a href="mailto:ToothDocPaul@msn.com?Subject=Customer Inquiry">Email Us</a> | Phone:(800) 376-2241 | 690 Main Street. Kaysville, Utah
    </div> 
```

我希望我有这个网站，以便你们可以看到，但不幸的是它只是在本地主机上......问题出在下面的图像和文本上。由于某种原因，图像被显示并且文本都在左侧，而不是在它自己的段落中。这是该部分的CSS：

```
#sidebar {
background: white;
padding: 0px 5px 0px 50px;
margin-left: 0;
border-right: 1px solid #C0C0C0 ;
float: left;
width: 312px;
}

#sidebar p {
font-size: 12px;
margin-bottom: 0.5em
}

#sidebar img{
margin-bottom: 1.5em;
}
#sidebar req {
font-size: 12px;
color: red;
}

#sidebar td{
padding: 0px 0px 10px 0px;
font-size: 14px;
}

#sidebar h2{
text-transform: uppercase;
}

#contentRight {
background: white;
padding: 0px 50px 0px 0px;
float: right;
width: 550px;
} 
```

The last "contentRight" is the div that goes on the other side of the sidebar(to the right) so basically you have the side bar with a picture and a little form underneath and then to the right there is a section with just text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:08:57.967

You are missing td closing tags on the second cell of each row and also get rid of align="left" on the img tag

see [http://jsfiddle.net/Y9yf8/1/](http://jsfiddle.net/Y9yf8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:10:31.560

Try to assign `float: left` to the `<img>` tag and then `float: left; width: 100%;` to the `<h2>` tag...

Proof: [http://jsfiddle.net/Y9yf8/3/](http://jsfiddle.net/Y9yf8/3/) =)

P.S. or do as Huangism said...

# sharepoint - SharePoint 2007 - 是否可以在 SPServices quickUpdateListItem 中使用变量列名？

> ID：11127138
> 
> 赞同：0
> 
> 时间：2012-06-20T19:52:11.367
> 
> 标签：sharepoint, sharepoint-2007

使用 SPServices 时，是否可以使用变量来指定要更新的列？

```
res = lists.quickUpdateListItem('MyListHere', { ID: ReqD, columnVar : userName }); 
```

在上面的语句中，是否可以这样使用变量columnVar？我无法成功地让它工作。它不会抛出错误，但它只是不更新​​。

如果有人有替代解决方案，我也不会只使用 SPServices。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:19:40.360

这是可能的，但不是很明显。该库区分您传递给函数的内容。如果您构建一个数组然后将其传入，您可以按照我的希望动态构建它：

```
var columnVar = whatever your column name is;

var myArray = new Object();
myArray['ID'] = ReqD;
myArray[columnVar] = userName;          

res = lists.quickUpdateListItem('MyListHere', myArray); 
```

# ios5 - 将具有多个属性的可变数组保存到 plist

> ID：11127141
> 
> 赞同：0
> 
> 时间：2012-06-20T19:52:25.643
> 
> 标签：ios5, nsmutablearray, plist, archive

我有一个可变数组，其中包含大约 100 个对象，每个对象都有三个属性。我无法将其保存到 plist 中？？我可以保存一个只有没有属性的对象的数组，但是单个属性的东西给我带来了问题。有什么建议么？另外，保存到 plist 是最好的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:52:29.907

您可以将 NSDictionary 存储在 NSDictionary 中，或者您的意思是一个包含 NSDictionary 的 NSArray？

```
NSMutableArray *myArray = [[NSMutableArray alloc] init];

NSMutableDictionary *myDict1 = [[NSMutableDictionary alloc] init];
[myDict1 setValue:@"string 1" forKey:@"item_1"];
[myDict1 setValue:@"string 2" forKey:@"item_2"];
[myDict1 setValue:[NSNumber numberWithInt:10]   forKey:@"item_3"];     

// add the array 3 times
[myArray addObject:myDict1];
[myArray addObject:myDict1];
[myArray addObject:myDict1];
NSLog(@"%@", myArray);

// write to plist    
[myArray writeToFile:@"/tmp/array_with_dict.plist" atomically:YES];

// dict inside dict
NSMutableDictionary *mainDict = [[NSMutableDictionary alloc] init];
[mainDict setValue:myDict1 forKey:@"dict_1"];

// write to plist
[mainDict writeToFile:@"/tmp/dict_with_dict.plist" atomically:YES]; 
```

# ruby - 提供给 Rails 验证功能的参数有时会丢失

> ID：11127142
> 
> 赞同：1
> 
> 时间：2012-06-20T19:52:28.947
> 
> 标签：ruby, ruby-on-rails-2

我遇到了一个非常奇怪的问题，即仅在包含此模块时才使用的验证器。在运行某些测试时，我会按预期得到验证失败。但是，错误不是`RecordInvalid`; 相反，它是一个`ArgumentError: wrong number of arguments (0 for 1)`，在这种情况下绝对没有意义。

这是包含验证代码的 mixin。

```
module AccountStateIntegrityMixin
  def self.included(base)
    base.class_eval do
      base.validate :account_state_integrity
    end
  end

  def account_state_integrity
    history = self.account_state_history_entries.order("start ASC").all
    return if history.blank?

    vald_methods = [
      :end_with_nil,
      :no_self_transitions,
      :no_overlaps_or_gaps
    ]

    vald_methods.each do |m|
      p "history = #{history.inspect}"
      if !self.send(m, history)
        return
      end
    end
  end

  def no_self_transitions(*args)
    p "no_self_transitions"
    p args
    history = args[0]
    # I want everything except the last element. I want to compare each
    # element with its successor
    history[0..-2].each_with_index do |entry, i|
      next_elem = history[i+1]
      if entry.account_state_id == next_elem.account_state_id
        self.errors.add(:account_state_history, "has a self-transition entries with " +
                        "IDs #{entry.id} and #{next_elem.id}")
        self.errors.add(:no_self_transitions, "violated")
        return false
      end
    end

    true
  end

  def end_with_nil(*args)  # ArgumentError was being thrown here
    p "end_with_nil"
    p args
    history = args[0]
    last = history.last  # with debugging statement, NoMethodError here

    if last.end != nil
      self.errors.add(:account_state_history, "is missing a nil ending. Offending " +
                      "entry has ID = #{last.id}")
      self.errors.add(:end_with_nil, "violated")
      return false
    end

    true
  end

  def no_overlaps_or_gaps(*args)
    p "no_overlaps_or_gaps"
    p args
    history = args[0]
    # Again, everything except the last element
    history[0..-2].each_with_index do |entry, i|
      next_elem = history[i+1]
      if next_elem.start != entry.end
        self.errors.add(:account_state_history, "has an overlap or gap between " +
                        "entries with IDs #{entry.id} and #{next_elem.id}")
        self.errors.add(:no_overlaps_or_gaps, "violated")
        return false
      end
    end

    true
  end
end 
```

您可能已经注意到，我添加了一些打印语句来帮助我在测试期间调试某些变量的状态。我还更改了方法参数以采用可变数量的参数，因此我可以看到实际发送到方法的内容。（注 1：由于进行了这些更改以使调试更容易，错误已更改为`MethodError: You have a nil object when you didn't expect it!`。注 2：方法签名更改主要包括`def method(history) -> def method(*args)`和设置`history = args[0]`）以下是这些语句的一些输出：

```
"history = [#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >]"
"end_with_nil"
[[#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >]]
"history = [#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >]"
"no_self_transitions"
[[#<AccountStateHistoryEntry id: 1007, account_id: 684, ... ]]
"history = [#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >]"
"no_overlaps_or_gaps"
[[#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >]]
"history = [#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >, <AccountStateHistoryEntry id: 1008, account_id: 684, ... >]"
"end_with_nil"
[[#<AccountStateHistoryEntry id: 1007, account_id: 684, ... >, #<AccountStateHistoryEntry id: 1008, account_id: 684, ... >]]
"end_with_nil"
[] 
```

鉴于该`account_state_integrity`方法的内容，我看不出为什么`end_with_nil`突然缺少一个明显在`account_state_integrity`.

如果这个错误是由一个已经修复的遗留错误引起的，我会澄清这一点：我们使用的是旧版本的 Ruby (1.8.7) 和 Rails (2.3.14)。在不久的将来，我们将迁移到更新版本的 Ruby 和 Rails。

编辑：单元测试的完整堆栈跟踪输出

```
A free-trial account An account with no state with an account state history entry set to end in the future should still be able to end the account state:
NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.last
app/models/account_state_integrity_mixin.rb:51:in `end_with_nil'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:42:in `send'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:42:in `value'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:125:in `default_options'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:36:in `full_message'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:287:in `full_messages'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:287:in `map'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:287:in `full_messages'
/Users/Daniel/.rvm/gems/.../activesupport/lib/active_support/whiny_nil.rb:52:in `inject'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:286:in `each'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:286:in `inject'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:286:in `full_messages'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:13:in `initialize'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:1101:in `new'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/validations.rb:1101:in `save_without_dirty!'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/dirty.rb:87:in `save_without_transactions!'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/transactions.rb:200:in `save!'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:136:in `transaction'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/transactions.rb:182:in `transaction_without_always_new'
config/initializers/always_nest_transactions.rb:11:in `transaction'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/transactions.rb:200:in `save!'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/transactions.rb:208:in `rollback_active_record_state!'
/Users/Daniel/.rvm/gems/.../activerecord/lib/active_record/transactions.rb:200:in `save!'
app/models/account_state_lib.rb:260:in `clear_capability_overrides!'
app/models/account_state_lib.rb:321:in `clear_capabilities_cache'
app/models/account_state_lib.rb:256:in `clear_capability_overrides!'
app/models/account_state_lib.rb:121:in `end_state!'
test/unit/account_state_lib_test.rb:173:in `__bind_1340223707_845108'
/Users/Daniel/.rvm/gems/.../thoughtbot-shoulda-2.11.1/lib/shoulda/context.rb:382:in `call'
/Users/Daniel/.rvm/gems/.../thoughtbot-shoulda-2.11.1/lib/shoulda/context.rb:382:in `test: A free-trial account An account with no state with an account state history entry set to end
in the future should still be able to end the account state. '
/Users/Daniel/.rvm/gems/.../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `__send__'
/Users/Daniel/.rvm/gems/.../activesupport/lib/active_support/testing/setup_and_teardown.rb:62:in `run'
 (2.221 s) (0.000 s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:15:04.743

问题是[ActiveRecord::Errors.add](http://ar.rubyonrails.org/classes/ActiveRecord/Errors.html#M000302)是在向**attributes**添加错误时使用的。

`end_with_nil`不是属性。您需要改用[ActiveRecord::Errors.add_to_base](http://ar.rubyonrails.org/classes/ActiveRecord/Errors.html#M000301)。

您也应该更正其他`errors.add`行。

发生的情况是，Shouda（您的测试运行程序）注意到名为 的属性存在错误`end_with_nil`，它将尝试为失败的测试生成一条消息，如下所示：

```
"You have an error for end_with_nil: value was #{record.end_with_nil}, 
 when it should have been xyz". 
```

..因此`end_with_nil`在没有参数的情况下被调用，一切都失败了。

# c# - 如何在不捕获或录制的情况下在 Monotouch 中获取麦克风数据

> ID：11127144
> 
> 赞同：0
> 
> 时间：2012-06-20T19:52:34.260
> 
> 标签：c#, ios, audio, xamarin.ios, monogame

使用 Monotouch，我想访问麦克风数据，以便可以在我正在开发的游戏中使用它。我已经看到了录制音频和捕获媒体的示例，但我的愿望不是保存这些数据只是为了使用它来支持我的游戏的各个方面。任何如何做到这一点的例子都将不胜感激。我的猜测是这是可能的，但需要在比其他方法允许的更低的级别上完成。谢谢

# drush - `drush up` 最终要求输入密码。为什么？

> ID：11127148
> 
> 赞同：1
> 
> 时间：2012-06-20T19:52:45.777
> 
> 标签：drush

我不熟悉使用 drush 更高级的功能。`drush up`今天，我希望通过使用 all inclusive命令让我的核心更新变得轻松。

通过 ssh 登录时，终端会显示该服务器的用户，如下例所示

```
serveruser [~/public_html/staging/sites/all]# drush up 
```

在我之前使用过的所有 drush 命令中，没有一个需要密码。`drush sqlc`例如不提示一个，因此我知道它知道 sql 用户和密码。然而，运行`drush up`最终提示输入密码，但不是`serveruser`！相反，它要求用户输入密码`wray`。

这应该是什么密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:24:45.767

默认情况下， using`drush up`将执行数据库转储作为备份。这就是文档会告诉你的。他们还会告诉你，如果 drush 在任何地方找到一个 SVN 存储库，它就会尝试使用它。当它找到该 SVN 存储库时，它可能会询问您的 SVN 密码。Drush 对于 SVN 存储库的实际用途并不是很聪明。因此，要禁用该功能并将其强制返回到默认数据库转储中，您必须将默认设置重新附加到 drush 命令，如下所示：

```
drush up --version-control=backup 
```

# r - 在插入符号 trainControl 中进行回测或自定义拆分？

> ID：11127154
> 
> 赞同：2
> 
> 时间：2012-06-20T19:53:31.513
> 
> 标签：r

有什么方法可以`train()`使用数据的自定义训练/测试分区运行？我对*回测*时间序列数据感兴趣（当传统的重采样/CV/等不合适/泄漏时）。即，如果数据按时间从 1...N 排序，那么我在某个截止值之前重复训练数据以预测截止值之后的数据（直到某个滑动窗口大小）。在利用 caret 的其余部分时，我无法确定如何解决这个问题`train()`。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:47:48.843

麦克斯在这里。

您可以在 trainControl(index = list()) 中指定自定义重采样索引，其中列表包含用于训练的训练数据元素。

...但是 train() 将使用其他所有内容作为保留，我认为这不是您想要的。

对于这个功能，我可能有大约 10 个不同的请求。需要对 train() 进行一些修改才能做到这一点，但应该不会太糟糕。

然而，1）我不了解时间序列分析（除了简单的基础知识），所以一些带有一两个测试示例的原型代码会很有帮助；2）直到我完成这本书（大约 4 个月）我不会真的有时间做这件事。

因此，如果您愿意贡献一些技术位并且可以等待几个月（可以根据您希望的主动程度来减少），可以通过一些修改来完成。

如果您想进一步讨论，请给我发送电子邮件至包裹上列出的地址。

# canvas - Canvas Xpress 示例代码..？

> ID：11127155
> 
> 赞同：0
> 
> 时间：2012-06-20T19:53:38.187
> 
> 标签：canvas, express

我正在尝试开始使用 Canvas Xpress，但我对 javascript 不是很熟悉，而且我遇到了语法问题。

有人可以向我展示一个示例基本代码，它只会将示例画布放在空白页面上吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:18:18.127

您可以随时查看[http://canvasxpress.org/documentation.html上的官方文档](http://canvasxpress.org/documentation.html)

# c++ - CodeBlocks：如何动态链接 libstdc++？

> ID：11127156
> 
> 赞同：2
> 
> 时间：2012-06-20T19:53:42.407
> 
> 标签：c++, gcc, linker, g++, codeblocks

可能我会做出一些隐含的假设。如果其中任何一个是错误的，请纠正我。

## 环境

Win32、TDM GCC 4.6.1、Codeblocks 10.05、Codeblocks 能够使用 gnu 工具链编译 C++。

## 问题

据我所知，也可以动态和静态地链接 stdlibc++。目前 CodeBlocks**静态**链接 libstdc++ 。虽然我在代码块“构建设置”面板中找不到与动态/静态链接相关的任何设置，但我可以使用进程监视器验证它静态链接 c++ 标准库。

CodeBlocks 使用以下参数执行 g++：

```
mingw32-g++.exe  -o bin\Release\fltk-hello.exe
obj\Release\fltk-hello.o   -s C:\MinGW32\lib\libfltk.a
C:\MinGW32\lib\libgdi32.a C:\MinGW32\lib\libole32.a
C:\MinGW32\lib\libuuid.a C:\MinGW32\lib\libcomdlg32.a
C:\MinGW32\lib\libcomctl32.a 
```

然后，有一个来自 g++ 的调用：

```
"c:/mingw32/bin/../libexec/gcc/mingw32/4.6.1/collect2.exe"
"-Bdynamic" "-o" "bin\Release\fltk-hello.exe" "-s"
"c:/mingw32/bin/../lib/gcc/mingw32/4.6.1/../../../crt2.o"
"c:/mingw32/bin/../lib/gcc/mingw32/4.6.1/crtbegin.o"
"-Lc:/mingw32/bin/../lib/gcc/mingw32/4.6.1"
"-Lc:/mingw32/bin/../lib/gcc"
"-Lc:/mingw32/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/lib"
"-Lc:/mingw32/bin/../lib/gcc/mingw32/4.6.1/../../.."
"obj\Release\fltk-hello.o" "C:\MinGW32\lib\libfltk.a"
"C:\MinGW32\lib\libgdi32.a" "C:\MinGW32\lib\libole32.a"
"C:\MinGW32\lib\libuuid.a" "C:\MinGW32\lib\libcomdlg32.a"
"C:\MinGW32\lib\libcomctl32.a" "-Bstatic" "-lstdc++" "-Bdynamic"
"-lmingw32" "-lgcc" "-lmoldname" "-lmingwex" "-lmsvcrt" "-ladvapi32"
"-lshell32" "-luser32" "-lkernel32" "-lmingw32" "-lgcc" "-lmoldname"
"-lmingwex" "-lmsvcrt"
"c:/mingw32/bin/../lib/gcc/mingw32/4.6.1/crtend.o" 
```

现在，这部分

```
"-Bstatic" "-lstdc++" 
```

清楚地表明，stdc++ 是静态链接的。我还可以在进程资源管理器中验证加载的 dll 不包含 libstdc++-6.dll。

## 到目前为止我尝试过的

我环顾了代码块构建设置页面，一无所获。Codeblock 提供了向 g++ 添加参数的可能性。不幸的是，我找不到明确的 gcc 参数来打开 libstdc++ 的动态链接，http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html 上的[文档](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)说

> 如果 libstdc++ 可用作共享库，并且未使用 -static 选项，则此链接针对 libstdc++ 的共享版本。

**那么，我怎样才能让它动态链接到 stdc++ 呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:24:15.963

最后，我找到了解决方案。一个必须添加

```
-shared-libstdc++ 
```

到链接器选项。现在它动态链接 stdc++ 库。

# html - 始终具有 100% 高度内容的 3 行 div

> ID：11127159
> 
> 赞同：-7
> 
> 时间：2012-06-20T19:53:52.460
> 
> 标签：html, css

我有 3 行 div 布局，页面底部有页脚，但我需要让内容 div 从页眉到页脚始终全尺寸。在内容 div 中，我还有一个 iframe，我需要让这个 iframe 始终处于 100% 的内容高度，然后在页眉和页脚之间保持 100% 的空间高度。这是我的（示例）页面：

```
 <body>
        <div id="container">
            <div id="header">
                    logo
            </div>
            <div id="content">
                <h2 id="appname"><img alt="App" src="/images/b_nextpage.png">&nbsp;Home</h2>
                <iframe class="appcont" src="" width="100%" height="100%" name="youriframe" frameborder="0" vspace="0" hspace="0" marginwidth="0" marginheight="0" scrolling="yes" noresize></iframe>
            </div>
            <div id="footer">
                <button name="menu" type="button" id="menuopen"><img alt="App" src="/images/s_process.png">&nbsp;<b>Menu</b>
                </button>
            </div>
        </div>
    </body> 
```

这是我的CSS：

```
html, body {
font-family: sans-serif;
padding: 0em;
margin: 0em;
color: #444;
background: #fff;
text-align: center;
height: 100%; /* Important */
width: 100%;
}

#container {
margin: 0px auto;
text-align: center;
height: 100%;
} 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:38:43.337

使用它作为您的标记：

```
<div id="wrapper">
    <div id="header">HEADER</div>
    <div id="content">
        <iframe class="appcont" src="" width="100%" height="100%" name="youriframe" frameborder="0" vspace="0" hspace="0" marginwidth="0" marginheight="0" scrolling="yes" noresize></iframe>
    </div>
    <div id="footer">hi</div>
</div> 
```

这作为你的CSS：

```
html, body {
    height: 100%;
    margin: 0px;
    padding: 0px;
}

#wrapper {
    width: 100%;
    height: 100%;
    margin: auto;
    position: relative;
}

#header {
    height: 40px;
    background-color: green;
    color: #fff;
}

#content {
    position:absolute;
    bottom:40px;
    top: 40px;
    width:100%;
    overflow: auto;
    background-color: #333;
    color: #666;
}

#footer {
    height: 40px;
    width:100%;
    position:absolute;
    bottom:0;
    background-color: blue;
    color: #fff;
} 
```

这会让你上路吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:33:15.723

这个[带有 CSS 的页眉、正文、页脚......](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)将向您展示如何操作。

但实际上这很简单，即使你不知道......

![在此处输入图像描述](../Images/4e4d4891d75bff8660ad3a5f28d3da7e.png)

同样在评论部分，*Elgoog*提供了一个链接，指向该网站上已经回答的[答案。](https://stackoverflow.com/questions/4884636/css-header-always-bottom-footer-and-100-content)

请做你的研究。

# scala - 如何确定类型参数是否是 trait 的子类型？

> ID：11127164
> 
> 赞同：17
> 
> 时间：2012-06-20T19:54:02.210
> 
> 标签：scala

假设我有以下类型

```
class Foo
trait Bar 
```

有没有办法制作一个接受类型参数 T 并确定 T 是否为 Bar 的方法？例如，

```
def isBar[T <: Foo: Manifest] = 
  classOf[Bar].isAssignableFrom(manifest[T].erasure) 
```

可悲`isBar[Foo with Bar]`的是，`false`因为擦除似乎会擦除 mixins。

还有，`manifest[Foo with Bar] <:< manifest[Bar]`是假的

这可能吗？

我看了这个问题：[如何判断 Scala reified 类型是否扩展了某个父类？](https://stackoverflow.com/questions/8874227/how-to-tell-if-a-scala-reified-type-extends-a-certain-parent-class)

但该答案不适用于混合特征，因为它们似乎已被擦除，如上所示。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T20:27:12.827

这可以通过[TypeTags](http://www.scala-lang.org/api/milestone/index.html#scala.reflect.base.TypeTags)（至少 2.10M7）来实现：

```
scala> class Foo; trait Bar
defined class Foo
defined trait Bar

scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> def isBar[A <: Foo : TypeTag] = typeOf[A].baseClasses.contains(typeOf[Bar].typeSymbol)
isBar: [A <: Foo](implicit evidence$1: reflect.runtime.universe.TypeTag[A])Boolean

scala> isBar[Foo]
res43: Boolean = false

scala> isBar[Foo with Bar]
res44: Boolean = true 
```

TypeTag 提供 Scala 类型的 1:1 转换，因为它们代表编译器知道的类型。因此它们比普通的旧清单更强大：

```
scala> val fooBar = typeTag[Foo with Bar]
fooBar: reflect.runtime.universe.TypeTag[Foo with Bar] = TypeTag[Foo with Bar] 
```

通过该方法`tpe`，我们可以完全访问 Scalas 的新反射：

```
scala> val tpe = fooBar.tpe // equivalent to typeOf[Foo with Bar]
tpe: reflect.runtime.universe.Type = Foo with Bar

scala> val tpe.<tab><tab> // lot of nice methods here
=:=                 asInstanceOf        asSeenFrom          baseClasses         baseType            contains            declaration         
declarations        erasure             exists              find                foreach             isInstanceOf        kind                
map                 member              members             narrow              normalize           substituteSymbols   substituteTypes     
takesTypeArgs       termSymbol          toString            typeConstructor     typeSymbol          widen 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T21:33:10.543

可以在 2.10 之前执行此操作，但不是（据我所知）使用清单：

```
def isBar[T <: Foo](implicit ev: T <:< Bar = null) = ev != null 
```

这有点像黑客，但它可以按需要工作。

```
scala> isBar[Foo with Bar]
res0: Boolean = true

scala> isBar[Foo]
res1: Boolean = false 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T22:13:38.830

您可以使用类型类在不反射的情况下解决它：

```
trait IsBar[T] {
  def apply():Boolean
}

trait LowerLevelImplicits {
  implicit def defaultIsBar[T] = new IsBar[T]{
    def apply() = false
  }
}

object Implicits extends LowerLevelImplicits {
  implicit def isBarTrue[T <: Bar] = new IsBar[T] {
    def apply() = true
  }
}

def isBar[T<:Foo]( t: T )( implicit ib: IsBar[T] ) = ib.apply()

scala> import Implicits._

scala> isBar( new Foo )
res6: Boolean = false

scala> isBar( new Foo with Bar )
res7: Boolean = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T02:21:25.213

另一个类型类用法（更通用）：

```
 trait SubClassGauge[A, B] {
    def A_isSubclassOf_B: Boolean
  }

  implicit class IsSubclassOps[A](a: A) {
    def isSubclassOf[B](implicit ev: SubClassGauge[A, B]): Boolean = ev.A_isSubclassOf_B
  }

  trait LowerLevelImplicits {
    implicit def defaultSubClassGauge[A, B] = new SubClassGauge[A, B] {
      override def A_isSubclassOf_B: Boolean = false
    }
  }

  object Implicits extends LowerLevelImplicits {
    implicit def subClassGauge[A <: B, B]: SubClassGauge[A, B] = new SubClassGauge[A, B] {
      override def A_isSubclassOf_B: Boolean = true
    }
  }

  trait Prime
  class NotSuper
  class Super extends Prime
  class Sub extends Super
  class NotSub 
```

现在，在 REPL 中：

```
@ import Implicits._ 
import Implicits._
@ (new Sub).isSubclassOf[NotSuper] 
res29: Boolean = false
@ (new Sub).isSubclassOf[Super] 
res30: Boolean = true
@ (new Sub).isSubclassOf[Prime] 
res31: Boolean = true
@ (new Super).isSubclassOf[Prime] 
res32: Boolean = true
@ (new Super).isSubclassOf[Sub] 
res33: Boolean = false
@ (new NotSub).isSubclassOf[Super] 
res34: Boolean = false 
```

`TypeTag`现在属于 scala reflect 包。需要添加额外的依赖才能使用它。

# c# - 由于 Fluent NHibernate ClassMap，NServiceBus 抛出“未找到端点配置”错误

> ID：11127170
> 
> 赞同：0
> 
> 时间：2012-06-20T19:54:31.810
> 
> 标签：c#, fluent-nhibernate, nservicebus

我有一个 NServiceBus 3.0 端点设置为使用 FluentNHibernate 作为我的 ORM，当我启动端点时，我收到了令人敬畏的“在扫描的程序集中找不到端点配置。这通常发生在 NServiceBus 无法加载包含 IConfigureThisEndpoint 的程序集时”错误消息。

我尝试只使用休眠 xml 类映射，并且效果很好。另外，我有一个使用 NServiceBus 2.6 的端点，它使用 Fluent Nhibernate 并且工作得很好。

我真的很想坚持使用 NSB V3，因为我正在使用 Raven Saga Persistence，如果我能提供帮助，我不想编写 Nhibernate xml 文件。有谁知道这个问题的解决方案？

编辑：这是重现该问题的[要点。](https://gist.github.com/2965666/%22gist%22)如果您注释掉类 FooMapping，端点就可以正常启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:55:36.930

万一其他人在修复之前遇到同样的问题，问题是我通过 NuGet 添加了 FluentNhibernate。这导致 NHibernate 3.3.1.400 也被添加。然而，FluentNHibernate 在内部引用了 NHibernate 3.3.0.400。

我使用的解决方案是将 NHibernate 降级到 3.3.0.4000。

# php - 使用对象创建 PHP 模板

> ID：11127172
> 
> 赞同：0
> 
> 时间：2012-06-20T19:54:43.347
> 
> 标签：php, oop, templates

我正在尝试创建一个包含面向对象代码的 php 模板。这是我正在尝试做的一个简化示例。

*索引.php*

```
<?php  require 'requiredfile.php'; ?>

    <html>
      <body>
         <h1><?php echo $object1->variable ?></h1>
      </body>
    </html> 
```

但是，如果我想对多个对象使用相同的模板怎么办？我绝对不想为对象 1、2 和 3 创建不同版本的 index.php。我假设我可以做类似`$this->variable`的事情并传入对象，但我不完全确定该怎么做因为它在该类的声明之外。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T20:08:15.893

有一个很好的技巧可以做你想做的事。反转逻辑并让类调用模板：

```
class MyClass {
  //
  // add whatever properties you like here
  //
  public function Render(){ 
    include ( 'mytemplate.php' );
  }
} 
```

现在，在文件`mytemplate.php`中，您可以通过简单地使用来调用类的任何属性或方法`$this->whatever`。

这种模式很容易与不同的对象重用：

```
$x = new MyClass;
$x->Render();

$y = new MyClass;
$y->Render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:07:32.743

你想访问这样的变量吗？
假设您有 2 页主页和关于

```
 //requiredfile.php
        Class PageFromTemplate{
            function __construct($title,$type){
            $this->type = $type;
                  $this->_setTitle($title);
            }

            private function _setTitle($title){
                  $this->title = $title;
            }

            }.

        //index.php

        <?php  require 'requiredfile.php'; 

        $home =  new PageFromTemplate("myHomeTitle","Home");

        ?>

            <html>
              <body>
                 <h1><?php echo "this page is of type : " . $home->type; ?></h1>
              </body>
            </html> 
```

在 about 页面上也做同样的事情，

```
$about = new PageFromTemplate("myAboutTitle","About");` 
```

# iphone - iPhone 的 gps 有哪些准确度级别

> ID：11127173
> 
> 赞同：-1
> 
> 时间：2012-06-20T19:54:50.517
> 
> 标签：iphone, gps

我想知道是否有人可以提供有关通过 iPhone 4 GPS 查询用户位置时可以预期的准确度的信息。

到目前为止，我已经看到了一些估计，例如：

*   5米
*   10米
*   65米
*   100米

是否有完整的概述？

与仅 GPS 和 GPS+WIFI 的预期区别是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:39:41.090

这是来自[Apple 支持网站](http://support.apple.com/kb/HT1975?viewlocale=en_US&locale=en_US)：

> GPS 精度取决于可见 GPS 卫星的数量。定位所有可见卫星可能需要几分钟时间，随着时间的推移精度会逐渐提高。

这个问题 - [iPhone GPS Accuracy](https://stackoverflow.com/questions/3515158/iphone-gps-accuracy) - 也有一些有用的见解。

希望这可以帮助！

# php - 如果目录为空，如何使目录列表文本消失

> ID：11127175
> 
> 赞同：0
> 
> 时间：2012-06-20T19:54:58.760
> 
> 标签：php, directory, directory-listing

我对当前用于显示目录文件内容的 php 代码感到满意，但它目前显示“文件列表”，我想知道如果目录为空，如何使该文本消失，如果可能的话。我目前使用的代码是这样的：

```
<?php
 if ($handle = opendir('.')) {
   while (false !== ($file = readdir($handle)))
  {
      if ($file != "." && $file != "..")
  {
        $thelist .= '<a href="'.$file.'">'.$file.'</a>';
      }
   }
  closedir($handle);
  }
?>
<P>List of files:</p>
<P><?=$thelist?></p> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:01:38.577

只需在最后一部分加上一个条件：

```
<?php if (!empty($thelist)) { ?>
<P>List of files:</p>
<P><?=$thelist?></p>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:09:23.147

试试这个：

```
<?php
if ( $handle = opendir('.')) {
    while ( false !== ( $file = readdir( $handle ) ) ) {
        if ( $file != "." && $file != ".." ) {
            $thelist .= "<a href=\"".$file."\">".$file."</a><br />";
            }
        }
    }
closedir( $handle );
if ( strlen( $thelist ) > 0 ) {
    echo "<p>List of files:</p>";
    }
?>
<p><?=$thelist?></p> 
```

# php - 解码 JSON 和不可访问的变量

> ID：11127177
> 
> 赞同：0
> 
> 时间：2012-06-20T19:55:12.047
> 
> 标签：php, json

在[这个](https://stackoverflow.com/questions/11122638/generating-multi-level-json/11122999#11122999)问题中，我在简化和形成有效的复杂 JSON POST 请求方面得到了帮助。但是，我现在在服务器端遇到了一些奇怪的行为。

```
function postTour(){
  $post = json_decode($_POST['json'];
  $success = false;

  for ($i=0; $i<count($post); $i++){
    $filename = $post[i]['location']['filename'];

  }
} 
```

在这里，`$filename`永远不会初始化，也永远不会在调试器中显示为变量。 `$post`返回格式的多级数组

```
$post[3]
   [0] =>
       location = [ 5 key/value pairs ]
       links = one to n arrays

   [1] =>
       location = [ 5 key/value pairs],
       links = one to n arrays 
```

在调试器中，每个最外层数组和位置数组都有 type `stdClass`，而 links 数组有 type `array[n]`。但是，我无法访问内部的任何信息`$post`。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:59:48.613

尝试`true`作为第二个参数传递`json_decode()`，以便将其转换为实际数组。

```
$post = json_decode($_POST['json'], true); 
```

# javascript - 重新加载链接的文件 HTML

> ID：11127179
> 
> 赞同：1
> 
> 时间：2012-06-20T19:55:12.363
> 
> 标签：javascript, lightbox

我正在使用灯箱来显示多个画廊。有一个外部导航片段执行内部 HTML 并将一系列新图像写入“图库部分”。一旦调用改变信息的 onClick 函数，灯箱就不起作用。我已经坚持了一段时间了，我什至不确定要问什么，所以这是我目前的想法：

我认为我需要重新加载或重新初始化灯箱脚本以包含新的图像集以预加载它们。我不知道该怎么做。这甚至是一个可能的解决方案吗？

```
//--lightbox launch params
$(function() { 
    $('#gallery a').lightBox();
});

//--switch gallery
function newGallery(){
    document.getElementById('main_content_container').innerHTML = ('<div id="gallery"><a href="imgs/1.jpg"><img src="imgs/thumb/1.jpg" id="gallery_thumbnail"/></a></div>');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:58:04.427

你可以尝试重新初始化灯箱的代码，像这样

```
function newGallery(){
    $('#main_content_container').html('<div id="gallery"><a href="imgs/1.jpg"><img src="imgs/thumb/1.jpg" id="gallery_thumbnail"/></a></div>');
    $('#gallery a').lightBox();
} 
```

# html - Dotnetnuke - 在创建新页面时选择哪些窗格中包含 HTML 模块

> ID：11127180
> 
> 赞同：2
> 
> 时间：2012-06-20T19:55:30.500
> 
> 标签：html, module, dotnetnuke, skin

简单的问题：

我正在研究 DNN 皮肤，我需要知道如何让 DNN 选择在创建新页面时 HTML 模块将出现在其中的窗格。

这样，当我创建新皮肤时，我可以根据我创建布局的方式在我想要的位置显示新的页面内容。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:21:05.810

默认页面模板`ContentPane`在皮肤中放置一个 HTML 模块。但是，如果您想在其他窗格中使用不同的模块，您也可以创建其他页面模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:57:42.487

在任何皮肤文件中，ID 为“ContentPane”的窗格将接收默认页面内容。

# spring - Spring MDP 线程安全资源池

> ID：11127183
> 
> 赞同：1
> 
> 时间：2012-06-20T19:55:42.683
> 
> 标签：spring, message-driven-bean, spring-jms

正在从 EJB2.0 进行 Spring 迁移。在现有的 MessageListener 中，我们缓存了一些重量级的对象，因为它在初始阶段使用反射和复杂的操作，例如 JAXB 对象。例如，我们有 100 个作为侦听器的最大大小，因为 EJB 侦听器创建了 100 个对象，我们没有线程安全问题。当我尝试使用 Spring 2.5 时，MDP 使用单个侦听器对象进行多线程处理，因此我们遇到了侦听器类级别对象的问题，我们无法提供线程对象。我正在使用 Spring.aop.target.CommonsPoolTargetSource 和 proxyFactoryBean 来池化重量级实例，但该实例不是线程安全的，它可能会破坏预期。我试图找出这个问题的解决方案，我得到了一些信息，因为我们可以使用类和使用 process() 而我们没有 不想实现监听器类，但我们需要使用 jmscontainer 进行配置，但我们的团队想要一个标准的方法来做到这一点。因为项目可能会增长，它需要遵循框架模式，需要一些标准。

请帮助我在实现 MessageListener 和 onMessage 作为获取消息的方法的类中解决这个线程安全的资源池。但我们需要线程安全资源。过去一天我一直在研究这个问题，但无法弄清楚这个问题。

提前感谢您提出解决此问题的标准方法。

# c# - 我什么时候使用 HttpUtility.UrlEncode() 而不是 HttpUtility.UrlPathEncode()？

> ID：11127197
> 
> 赞同：1
> 
> 时间：2012-06-20T19:56:44.620
> 
> 标签：c#, asp.net, .net, urlencode

> **可能重复：**
> [HttpServerUtility.UrlPathEncode vs HttpServerUtility.UrlEncode](https://stackoverflow.com/questions/4145823/httpserverutility-urlpathencode-vs-httpserverutility-urlencode)

当我调用`HttpUtility.UrlEncode(title)`并将它用于我的 URL 时，IIS 给了我一个 404.11 错误。

从研究看来，`HttpUtility.UrlPathEncode(title)`由于 + 号，我必须使用它，这很有效。

我的问题是为什么两者都有，我什么时候使用非路径？

# css - 奇怪的浮动 div 行为

> ID：11127200
> 
> 赞同：1
> 
> 时间：2012-06-20T19:57:07.017
> 
> 标签：css, html, css-float

我正在尝试使用图像和描述创建 UL 列表。列表中有 5 个项目很好，第 6 个项目在右侧浮动，第 7 个项目下降并在左侧浮动。什么可能导致这种行为？这在 IE 8 和 Firefox 13 中都会发生

[![看起来像这样](../Images/b1f486ae0569f61fa5db1d33528a0b82.png)](https://i.stack.imgur.com/ihRXd.jpg)

这是HTML：

```
<ul class="subpagesList subpagesGallery" id="subList2"><li class="l1">
      <div class="photo">
        <a href="?galeria-1,15"><img src="files/150/_demo_01.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-1,15">Galeria 1</a></h2>
          <div class="description"><p>Galeria 1</p></div>
      </div>
    </li><li class="l2">
      <div class="photo">
        <a href="?galeria-2,16"><img src="files/150/_demo_02.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-2,16">Galeria 2</a></h2>
          <div class="description"><p>Galeria 2</p></div>
      </div>
    </li><li class="l3">
      <div class="photo">
        <a href="?galeria-3,17"><img src="files/150/_demo_03.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-3,17">Galeria 3</a></h2>
          <div class="description"><p>Galeria 3</p></div>
      </div>
    </li><li class="l4">
      <div class="photo">
        <a href="?galeria-4,18"><img src="files/150/_demo_04.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-4,18">Galeria 4</a></h2>
          <div class="description"><p>Galeria 4</p></div>
      </div>
    </li><li class="l5">
      <div class="photo">
        <a href="?galeria-5,19"><img src="files/150/_demo_05.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-5,19">Galeria 5</a></h2>
          <div class="description"><p>Galeria 5</p></div>
      </div>
    </li><li class="lL">
      <div class="photo">
        <a href="?galeria-6,20"><img src="files/150/_demo_01.jpg" alt="" /></a>
      </div>
      <div class="descriptionBox">
          <h2><a href="?galeria-6,20">Galeria 6</a></h2>
          <div class="description"><p>Galeria 6</p></div>
      </div>
    </li></ul> 
```

和 CSS：

```
/* SUB PAGES LIST STYLES */
.subpagesList {
    float: left;
    width: 100%;
    margin: 7px 0;
    list-style: none;
}
.subpagesGallery {
    /*width: 100%;*/
    overflow: hidden;
    width: 800px;
}

.subpagesList li {
    clear: left;
    float: left;
    width: 96%;
    margin: 10px 0;
    padding: 13px 2%;
    border-left: 2px solid #e7eaee;
    background: url('img/items_shade.png') repeat-x left top;
}
.subpagesGallery li {
    clear: none;
    float: left;
    margin: auto auto;
    padding: 0 0;
    overflow: hidden;
    width: 150px;
}

* html .subpagesList li {
    width: 100%;
}

.subpagesList li .photo {
    float: left;
    margin: 0 18px 5px 0;
}
.subpagesGallery li .photo {
    clear:both;
    overflow: hidden;
}

.subpagesGallery li .descriptionBox{
    clear:both;
    width:180px;
    overflow: hidden;
}

.subpagesList li h2 {
    padding-bottom: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:44:06.030

你问**为什么**会发生这种情况，而不是如何解决它。下图应该清楚地说明发生了什么。

![在此处输入图像描述](../Images/06aa8f56f75effbfbd75dd32038385d7.png)

div 向左浮动；第 6 个 div 在向左“途中”下降到前 5 个下方，但由于 div 5 比 div 4 短，所以 div 6 与 div 4 对接，不能再向左移动。div 7 低于 div 6，并且**可以**一直向左移动。

这绝对是 div 的一个陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:01:43.163

这是由于缺少 'LI' 元素的 'height' 属性造成的。“Gallery 5”元素比其他元素短一些，“Gallery 6”元素实际上不是向右浮动，而是在“Gellery 5”元素下方。然后“Gallery 6”元素开始自然地漂浮在左侧。

```
.subpagesGallery li {
    clear: none;
    float: left;
    margin: auto auto;
    padding: 0 0;
    overflow: hidden;
    width: 150px;
    height:200px; /*that helped*/
} 
```

也许只是在SO上发布问题会让你更聪明......我不确定;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:06:46.063

您可以使用 JQuery equl height 使每个`<li>`高度相同，请在下面找到代码：-

```
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
       thisHeight = $(this).height();
       if(thisHeight > tallest) {
         tallest = thisHeight;
       }
    });
    group.height(tallest);
}

 $(document).ready(function() {
    equalHeight($(".subpagesList li"));
 }); 
```

[这里是教程](http://www.cssnewbie.com/equal-height-columns-with-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:07:21.083

就我个人而言，我会给这些物品 a`min-height`代替。这样，无论图像大小/内容如何，​​您都将至少保持一定的高度，同时允许内容增长。当然，这是在理解`<li>`不会超过某个（极端）高度的情况下，否则您会再次遇到此问题。

# c# - 从 DataTable 中删除 DataRows

> ID：11127203
> 
> 赞同：0
> 
> 时间：2012-06-20T19:57:28.820
> 
> 标签：c#, collections, datatable

我想从 DataTable 中删除 DataRows。要删除的行位于数据行列表“wantDelete”中。由于异常，请更正我的代码：

```
foreach (DataRow dr in myTable.Rows)
{
     if (wantDelete.Contains(dr))
     myTable.Rows.Remove(dr);
} 
```

例外是：

![例外](../Images/c177f2f0ba6a4ee04c744390fe9b5157.png)

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:06:22.650

您不能在枚举期间修改集合，因为 foreach 使用枚举器，而枚举器无法更改基础集合。

因此，您应该使用 a或使用您已预先过滤的`for-loop`另一个 collection( )。`deleteItems`

我在您的代码中看到您已经对其进行了预过滤（我假设 wantDelete 是`List<DataRow>)`：

```
foreach (DataRow dr in wantDelete)
{
     myTable.Rows.Remove(dr);
} 
```

旁注：`DataTable`如果您使用的是，您知道从 a 中删除行不会在您的 dbms 中删除它们`DataAdapter`？因此，您需要使用`DataRow.Delete()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:08:53.053

在这种情况下不要使用 foreach 循环。使用整数迭代：

```
for (int I = myTable.Rows.Count - 1; I >= 0; I -= 1) {
   if (wantDelete.Contains(myTable.Rows(I))) {
      myTable.Rows.Remove(myTable.Rows(I));
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:24:48.220

在迭代它所属的 DataTable 时，您不能删除 DataRow。因此，在迭代另一个 DataRows 列表时存储 DataRows 并将其删除，如下所示：

```
 List<DataRow> rowsToDelete = new List<DataRow>();
        foreach (DataRow dr in myTable.Rows)
        {
            if (wantDelete.Contains(dr))
            {
                rowsToDelete.Add(dr);
            }
        }

        foreach (var dataRow in rowsToDelete)
        {
            myTable.Rows.Remove(dataRow);   
        } 
```

希望这可以帮助 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:01:35.350

您正在循环和删除同一个表..换句话说，删除行后 myTable.Rows 将发生变化，因此您不能在其上使用“循环”。将表复制到另一个表并将其删除。（foreach 应该循环“复制”表并将其从“原始”表中删除）

# python - 如何通过 ssh 进入运行 cygwin/sshd 的 Windows 框并让生成的终端会话使用 cygwin 而不是默认的 BASH？

> ID：11127205
> 
> 赞同：1
> 
> 时间：2012-06-20T19:57:42.200
> 
> 标签：python, windows, ssh, cygwin

我正在尝试将我的 linux 网络自动化移植到一组 Windows 机器上。我的程序从一个管理控制台开始，并通过套接字和 ssh 隧道将指令传输到客户端机器，指示它们运行特定的 mozmill/python 脚本。我已经使用 cygwin 让单个客户端脚本在 Windows 上运行，但是我需要能够从 ssh 会话中调用它们，并且通过 Cygwin 的 sshd 分发 ssh 使我使用基本的 Bash 终端而不是 Cygwin 终端登录. 在这种情况下如何切换使用哪个终端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:47:30.907

知道了。解决方案是简单地从 c:\cygwin 文件夹运行 Cygwin.bat，这会将您放入 cygwin 终端，从而允许使用所有需要的功能。这同样适用于我需要的 mozilla-build 终端。:-D

# php - 如何正确地将数据保存到数据库中？

> ID：11127210
> 
> 赞同：3
> 
> 时间：2012-06-20T19:58:05.163
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我通常像这样将新数据保存到数据库中：

```
$this->MyTable->set(array(
 'id' => $id,
 'code' => $temp_code,
 'status' => $status,
 'age' => $age,
 'location' => $location,
 'money' => $money
));

$this->MyTable->save(); 
```

如果 ID 已存在于数据库中，我将更新其相应字段，如下所示：

```
$this->Adtweet->id = $id;
$this->Adtweet->saveField('code', $temp_code);
$this->Adtweet->saveField('status', $status); 
```

有没有更好或“正确”的方法来做到这一点？

当我尝试输入已经存在的 ID 并使用该`set`函数时，我收到以下 SQL 完整性错误：

> （错误：SQLSTATE [23000]：完整性约束违规：1062 键 'PRIMARY' 的重复条目 '150245925'）

如何编写一个干净地处理重复条目而不返回错误的函数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T20:07:44.113

如果要保存新数据，只需使用`Model::save()`：

```
$data = array(
    'ModelName' => array(
        'foo' => $foo
    )
)

// prepare the model for adding a new entry
$this->ModelName->create();

// save the data
$this->ModelName->save($data); 
```

如果您想更新数据，只需使用相同的方法而不调用`Model::create()`

```
$data = array(
    'ModelName' => array(
        'id' => $id
        'foo' => $foo
    )
)

$this->ModelName->save($data); 
```

另见：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array)

**编辑：**

我想这就是你要找的东西：

```
$this->ModelName->id = $id;
if (!$this->ModelName->exists()) {
    $this->ModelName->create();
}

$this->ModelName->save($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T13:45:34.617

发布数据示例

```
Array
(
    [ModelName] => Array
        (
            [column1] => value
            [column2] => value
            [column3] => value
        )

) 
```

试试这个添加

```
if ($this->request->is('post')) {
    $this->ModelName->create();
    $this->ModelName->save($this->request->data);
} 
```

试试这个来编辑

```
if ($this->request->is('post')) {
    $this->ModelName->id = 2;
    $this->ModelName->save($this->request->data);
 } 
```

# android - 无法在应用程序phonegap中加载图标的图像

> ID：11127211
> 
> 赞同：0
> 
> 时间：2012-06-20T19:58:08.710
> 
> 标签：android, html, jquery-mobile, cordova

我使用 phonegap 开发应用程序并创建 index.html -> html5，当然还使用 jquery

此插图语法 index.html：

```
 <ul data-role="listview" data-inset="true">
          <li><a href="#jk">
            <img src="http://xxxx.com/demo/m/images/icon_menu1.png" width="88" height="88"/><h3>menu1</h3>
            <p>Eat & Drinks</p>
</li>
</ul> 
```

**但是当我在 android 中打开我的应用演示时无法加载**

我的问题是“**无法为图标列表加载外部图像**”

你能帮助我吗 ？

**我的计划：** 我认为需要在本地下载我的图像并加载...使用 phonegap 的应用程序可能吗？

谢谢jk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:57:11.370

不需要。您可以将图像从网络直接加载到您的 android phonegap 应用程序。为此，您必须在 phonegap xml 文件 (cordava.xml) 中提供权限。

此 xml 位于 appfolder->res->xml->cordava.xml

在这里只需将权限添加到您想要的网址。例子，

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
    <access origin="http://xxxx.com/"/>
</cordova> 
```

要从您的应用程序中访问所有网站信息，您只需这样做，

```
<?xml version="1.0" encoding="utf-8"?>
    <cordova>
        <access origin="*"/>
    </cordova> 
```

# c# - c#中多个windows窗体之间的通信

> ID：11127212
> 
> 赞同：1
> 
> 时间：2012-06-20T19:58:10.233
> 
> 标签：c#, winforms, forms

我正在开发一个程序，该程序涉及由按钮、事件等触发的多个表单。而且我在通过多个表单传递和更改对象时遇到了麻烦。

例如，假设我有`form 1`、`form 2`和`form 3`。

我在表格 1 中定义了一个列表，但所有 3 个表格都需要能够更改该列表中的值？

我猜这并不像写这么简单：

```
Form1 frm1 = new Form1(); 

Form2 frm2 = new Form2(); 
```

ETC...

有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:32:27.397

我认为有两种方法可以继续，这取决于列表：

*   该列表是一个全局变量，在这种情况下，我认为您已经构建了一个静态类并将您的列表放入其中以供所有人访问。
*   该列表不是全局的，在这里您必须覆盖表单的构造函数并在每个构造函数中传递列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:07:56.093

您不需要任何静态成员来完成这项工作。我建议以下内容：

1.  实例化所有表单都可以访问的列表。如果您要将一些控件（列表框、组合框...）数据绑定到它，请查看`BindingList`类型。

2.  让表单的构造函数接受他们将使用的列表，例如作为绑定的数据源。

    ```
    var list = new BindingList(...);
    var form1 = new Form1(list);
    var form2 = new Form2(list); 
    ```

3.  如果您的表单需要同时打开，请使用`Show`方法而不是`ShowDialog`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:22:44.867

您实际上正在做[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式试图解决的问题。您将需要模型（您的列表或其他）、视图（您的表单）和控制器。这样每个视图都可以使用控制器共享/访问数据

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T07:34:40.510

如果您不想要静态列表，只需将列表公开，然后从 Application.OpenForms 检查打开表单

```
if (Application.OpenForms["Form1"] != null)
{
    ((Form1)Application.OpenForms["Form1"]).list[0] = 5;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T20:02:19.127

我假设您正在从 Form1 创建 Form2 和 Form3。您可以简单地以这些形式创建一个属性并将列表传递给它（可能使用构造函数）。由于列表是引用类型，在 Form2 中修改它也会在 Form 1 中修改它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T20:03:26.363

您可以构建一个静态全局类来保留所有全局可访问数据。或者您可以通过它们的构造函数将在第一个表单中创建的列表传递给每个子表单

例如：（在表格 1 中）

```
Form2 frm = new Form2(myList); 
```

在表格 2 中

```
public class Form2:Form
{
    List<MyObjects> _globalList = null;

    public Form2(List<MyObjects> listData)
    {
        InitializeComponent();
        _globalList = listData;
    }

} 
```

然后在 Form2 中，您可以使用传递的列表并更改/添加/删除其元素。这些更新也将在 Form1 中可见。当然，打开 Form3 时也可以使用相同的方法。

另一种解决方案需要构建一个全局静态类，该类专用于包含应用程序中随处使用的全局值。如果谨慎使用可能会非常有用。

在 GlobalData.cs 文件中

```
public static class MyAppData
{
     public static List<MyObjects> GlobalData { get; set; }
} 
```

在表格 1

```
MyAppData.GlobalData = new List<MyObjects>();
MyAppData.GlobalData.Add(new MyObjects(......)); 
```

在 Form2 中

```
if(MyAppData.GlobalData.Contains(.......)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-20T20:05:35.073

使用单例模式？

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# sorting - 如何对 DataView 进行排序？

> ID：11127213
> 
> 赞同：1
> 
> 时间：2012-06-20T19:58:14.760
> 
> 标签：sorting, datatable, dataset, dataview

我正在尝试`DataSet`根据需要对 a 进行排序：

```
protected void GridView1_Sorting1(object sender, GridViewSortEventArgs e)
{
   DataSet data = (DataSet)GridView1.DataSource;

   //sort data by e.SortExpressions

   //data.Sort   that doesn't work
   //data.Tables[0].Sort    that doesn't work
   DataView view = data.Tables[0].DefaultView;
   view.Sort = e.SortExpression;

   GridView1.DataBind();
} 
```

不要尝试排序`DataSet`- 这是不可能的。相反，只有努力去了解真相……

`DataView`...您对`DataTable`内部进行排序`DataSet`：

```
protected void GridView1_Sorting1(object sender, GridViewSortEventArgs e)
{
   DataSet dataSet = (DataSet)GridView1.DataSource;
   DataTable dataTable = (DataTable)dataSet.Tables[0];
   DataView dataView = dataTable.DefaultView;

   dataView.Sort = "TransactionNumber";

   GridView1.DataBind();
} 
```

除了网格没有按`TransactionNumber`Data* 中的列排序。

*在排序“生效”*`view.RunSort()`之前是否需要调用一些方法？

 *## 奖金阅读

*   [如何对数据集进行排序？](https://stackoverflow.com/questions/670701/how-to-sort-dataset)
*   [GridView 排序：SortDirection 总是升序](https://stackoverflow.com/questions/250037/gridview-sorting-sortdirection-always-ascending)
*   [数据集中过滤和排序简介](http://msdn.microsoft.com/en-us/library/b51xae2y%28v=vs.71%29.aspx)
*   [如何在执行 DataBind 之前对 DataSet 进行排序？](https://stackoverflow.com/questions/228875/how-can-i-sort-a-dataset-before-doing-a-databind)*

# variables - 在LESS中将变量附加到自身

> ID：11127214
> 
> 赞同：0
> 
> 时间：2012-06-20T19:58:18.457
> 
> 标签：variables, less

是否可以将变量连接到自身？

```
@varA: "hello ";
@varB: "world";

@varA: "@{varA}@{varB}"; 
```

（输出“你好世界”）

我能够做到这一点，

```
@varA: "hello ";
@varB: "world";

@varC: "@{varA}@{varB}"; 
```

但是关于使用变量本身的一些事情似乎破坏了一切。这是一个更少的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:44:45.063

只是少装了试一下，确实，这是我得到的第一种方式

```
stack_overflowError: Maximum call stack size exceeded in <file>
1 @varB: "world"; 
```

实际上，将变量分配给自身会导致相同的错误。我查看了源代码，但不能确定是什么原因造成的（尽管由于错误的性质，我们可以很容易地猜到）。就文档而言，它提到变量是常量，但是经过一些测试，我发现您实际上可以定义一个与旧变量同名的新变量。所以：

```
@vA = "hi";
@vA = "hello"; 
```

实际上会起作用，并且当您稍后使用 vA 时，它将具有“hello”的值。如果您确实发现需要它，我建议您只使用一个临时变量。

只需保留@tmp 并在需要时使用它，只要您不尝试根据自身定义新的@tmp。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T03:57:07.150

试试这个

```
@varA: hello;
@varB: world;

@varC: @varA@varB;

.test {
  text: @varC;
} 
```

编译时会导致这个

```
.test {
  text: hello world;
} 
```

或者试试这个：

```
@varA: hello;
@varB: world;

@varC: "@{varA} @{varB}";

.test {
  text: @varC;
} 
```

要得到这个：

```
.test {
  text: "hello world";
} 
```

# objective-c - iOS 上一篇/下一篇文章或页面中使用硬件音量按钮的常用应用程序

> ID：11127215
> 
> 赞同：1
> 
> 时间：2012-06-20T19:58:21.013
> 
> 标签：objective-c, ios, jailbreak

我正在尝试在我越狱的 iPhone 上进行调整，以使用音量按钮更改 Reeder、iBooks 等中的页面，但我被困在我告诉应用程序在按下按钮时要做什么的部分。我发现我无法模拟触摸，那么我有什么选择？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:06:44.143

要告诉应用程序翻页，您需要做的是查看每个应用程序的头文件，并找到用于翻页的方法。每种方法很可能会有所不同。

找到它们后，您需要挂钩某种初始化方法并将对象添加为 AVSystemController_SystemVolumeDidChangeNotification 的观察者，并将选择器设置为您之前找到的选择器。

当页面视图消失或不再需要时，不要忘记删除观察者，否则你会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:03:23.910

像这样处理 AVSystemController_SystemVolumeDidChangeNotification

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChanged:) 
                                        name:@"AVSystemController_SystemVolumeDidChangeNotification" 
                                        object:nil];  

-(IBAction)volumeChanged:(id)sender{
  [volumeViewSlider _updateVolumeFromAVSystemController];
} 
```

# node.js - 是否有一个简单的基于文本文件的数据库来保存基本 node.js/Passport 身份验证的帐户信息？

> ID：11127222
> 
> 赞同：3
> 
> 时间：2012-06-20T19:58:33.550
> 
> 标签：node.js, authentication, passport.js

我有一个在嵌入式 Linux 系统上运行的 Node.js Web 服务器。对于身份验证，我目前正在使用 Passport 的本地策略，并且用户帐户信息存储在 Node 脚本本身中，如下所示。

```
var users = [
    { id: 1, username: 'bob', password: 'secret', email: 'bob@example.com' }
  , { id: 2, username: 'joe', password: 'birthday', email: 'joe@example.com' }
]; 
```

它可以工作，但我想将用户名和密码存储在一个单独的文件中，并能够通过 Web 浏览器界面添加、删除和更改用户。我不想使用数据库服务器来存储用户帐户，因为我觉得这对我的嵌入式系统来说开销太大。

有谁知道将用户帐户存储在一个单独的文件中的好方法，可能还有一个库来帮助更新帐户？

**编辑：** 节点服务器在电子硬件上运行，用户很少（可能有 2-20 个），所以人们互相踩踏进行用户列表更新应该没有问题。初始设置后，用户列表不会有太大变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:10:06.593

您可能已经意识到以明文形式存储密码是一个坏主意。至少，我建议使用[bcrypt](https://github.com/ncb000gt/node.bcrypt.js/)进行散列。但是，这不是问题所在，所以我们将继续前进。:)

你有几个选择：

1.  `JSON.stringify`使用和手动读取数据并将其保存到磁盘`JSON.parse`。将数据加载到内存中，当数据发生变化时，将其序列化回磁盘。
2.  使用[Persistance](https://github.com/creationix/node-persistence)，一个支持内存存储并自动为您持久保存到磁盘的 Node 模块（与 #1 基本相同，但已经构建。:)
3.  使用[SQLite](https://github.com/developmentseed/node-sqlite3)，它为您提供 RDBS 的大部分功能，但序列化为文件而不需要运行的服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T20:05:42.413

一个非常简单的方法是从 JSON 文件中读取。在更新时写入`accounts.json.(process id).tmp`文件并将其重命名为`accounts.json`. 如果两个同时进来，你会丢失一个更新的风险很小，但也许你可以忍受。（如果您不能使用“真实”数据库来获取“真实”的某些值）。

您可以使用`JSON.stringify(data)`将数据结构`JSON.parse(json)`转换为 JSON 并将 JSON 字符串从文件转换为数据结构。

如果您的服务/服务器没有足够的使用，您可以阻止您可以读取帐户

```
var data = JSON.parse(fs.readFileSync( file_name ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:16:40.000

我完全不知道你使用的所有三个标签，但我被你的问题所吸引，你在问一个基于简单文本文件的数据库。如果您发现我的回答无关紧要，请不要介意，因为我来自完全不同的背景。

看看 MongoDB。它是一个面向文档的 DBMS，在处理大量文档时非常有用。

MongoDB 使用 BSON，一种类似于 JSON 的二进制对象格式，但比 JSON 更具表现力。它是一个 NOSQL 数据库，它以 BSON 格式存储具有动态模式的结构化数据，而不是像在“经典”RDBMS 中那样将数据存储在表中。

如果您觉得它很吸引人，您可以访问此链接了解更多详细信息：[MongoDb](http://www.mongodb.org/display/DOCS/Introduction)

# macos - 如何在 Mac OS X 上的 Emacs 中编写波浪号 (~) 字符？

> ID：11127224
> 
> 赞同：6
> 
> 时间：2012-06-20T19:58:42.317
> 
> 标签：macos, emacs, key-bindings, aquamacs

我习惯于在 Mac OS X 上按 Alt+N 来写一个 ~ 字符。这在 Emacs 中不起作用。Alt+N 键似乎绑定到命令历史记录。所以我的问题是如何在 Mac OS X 上的 Emacs 中写一个 ~ 字符？

编辑：我正在使用 Aquamacs。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-08T21:29:45.567

虽然这个问题已经很老了，但对于[Emacs for OS X](http://emacsformacosx.com/)（当今最流行的选择）来说，似乎没有一个答案能令人满意。所以，对于未来的读者...

默认情况下，适用于 OS X 的普通 Emacs 使用这两个`Alt`键`Meta`。由于在德语 Mac 键盘上输入了许多字符`Alt`（波浪号、方括号、花括号等），我建议设置`ns-right-alternate-modifier`为，这样可以使用*右键*`nil`输入波浪号 ( `Alt-n`) 和其他字符，而可以使用*左键*作为（如）。 *`Alt`*`Meta``M-x`**

 **或者`Cmd`可以定制为`Meta`. 所有选项都可以在`M-x customize-group ns`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:36:22.173

您可以随时打开“字符查看器”，选择“标点符号”，找到“~”（波浪号），然后双击它。这会将其插入 Emacs 点。（在“系统偏好设置”窗口的“键盘”窗格中选中“在菜单栏中显示键盘和字符查看器”后，可以轻松访问“字符查看器”。）

您还可以将 emacs-lisp 函数定义为：

```
(defun tilde () (interactive) (insert "~")) 
```

然后调用它`M-x tilde`来插入一个波浪号。然后可以将该功能分配给您选择的组合键

```
(global-set-key "\M-\C-!" 'tilde)   ;; you choose the combo 
```

并将所有这些添加到您的“emacs init”文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:39:26.077

`quoted-insert`应该处理这个。

`C-q``Alt-N`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T11:04:01.043

Aquamacs：选项-> 选项命令元键-> 元和法语？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-26T12:12:54.210

不幸的是，在终端（emacs -nw）中运行 emacs 时，fpbhb 的答案不起作用。

我能够想出一个适用于两种情况（独立和终端）的解决方案。另外，我有一个国际键盘，我还能够解决在终端中运行 emacs 时无法输入特殊字符的问题。

当将 emacs 作为应用程序运行时（即不在终端中），此代码段将左选项键正确绑定到“META”。它不绑定正确的选项键，可用于键入特殊字符：

```
(setq mac-command-key-is-meta nil
      mac-command-modifier nil)
(setq mac-option-key-is-meta t
      mac-option-modifier 'meta
      mac-right-option-modifier nil) 
```

在终端中运行 emacs 时，以上所有内容均无效。要在终端中获得相同的键绑定，您必须：

终端首选项 -> 键盘 -> 使用选项作为元键

不幸的是，这样做之后，您将无法使用选项键在国际键盘中键入特殊字符。特别是我错过了波浪号、反斜杠和@。

我通过将缺少的键映射添加到我的 .emacs 来解决最后一个问题：

```
(define-key key-translation-map (kbd "M-ñ") (kbd "~"))
(define-key key-translation-map (kbd "M-º") (kbd "\\"))
(define-key key-translation-map (kbd "M-2") (kbd "@")) 
```

瞧。**

# javascript - 我可以使用 webtrends 跟踪对 Web 表单的更改吗？

> ID：11127226
> 
> 赞同：0
> 
> 时间：2012-06-20T19:58:46.100
> 
> 标签：javascript, google-analytics, webtrends

有谁知道跟踪网络表单更改的方法，即使用 webtrends 选择或文本字段？

我知道 Google Analytics 有类似的功能，这可以在 WebTrends 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:48:20.107

Webtrends 具有 Javascript 点击跟踪，因此您必须将 Javascript onChange 或 onClick 事件添加到您需要跟踪的任何内容中。

由于 Web 表单通常不会触发 Webtrends 链接跟踪，因此您必须使用 dcsMultiTrack 函数，传递需要跟踪的变量。

例如，您可以使用以下内容来跟踪您所在的 URL 以及单击特定字段的事实：

onClick="onclick="dcsMultiTrack('DCS.dcssip','www.domain.com','DCS.dcsuri','/yourpage','WT.ti','formfield1','WT.dl',' 1');"

请注意，应设置 WT.dl 参数，这样您就不会计算额外的页面浏览量。另请注意，WT.ti 参数用于自动跟踪此作为链接点击。如果您需要更多粒度，您始终可以定义另一个变量（例如，“formname”）并将 Webtrends 配置为将其报告为另一个维度。

# jquery - jquery用数组序列化输入

> ID：11127227
> 
> 赞同：15
> 
> 时间：2012-06-20T19:58:48.353
> 
> 标签：jquery, json, forms, serialization, multidimensional-array

我的网站上有这样的表格：

```
<form id="myform" action="" method="">
 <input type="text" name="name[1][first]">
 <input type="text" name="name[2][first]">
 <input type="text" name="name[3][first]">
</form> 
```

我想简单地获取所有数据并将其发送到网络服务，所以有这个 js：

```
$fields = $('#myform').serializeArray(); 
```

问题是，它使用输入名称中显示的所有括号创建了 json，所以我得到一个解析错误。

如何使用 serializeArray 并获得正确的 json？

我想看到的结果格式是这样的：

```
{
  "name": {
    "1": {
      "first": "val1"
    },
    "2": {
      "first": "val2"
    },
    "3": {
      "first": "val3"
    }
  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-02-28T23:29:24.483

我做了一个递归函数/插件来做到这一点：

```
$.fn.serializeControls = function() {
  var data = {};

  function buildInputObject(arr, val) {
    if (arr.length < 1)
      return val;  
    var objkey = arr[0];
    if (objkey.slice(-1) == "]") {
      objkey = objkey.slice(0,-1);
    }  
    var result = {};
    if (arr.length == 1){
      result[objkey] = val;
    } else {
      arr.shift();
      var nestedVal = buildInputObject(arr,val);
      result[objkey] = nestedVal;
    }
    return result;
  }

  $.each(this.serializeArray(), function() {
    var val = this.value;
    var c = this.name.split("[");
    var a = buildInputObject(c, val);
    $.extend(true, data, a);
  });

  return data;
}

$("#output").html(JSON.stringify($('#myform').serializeControls(), null, 2));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<form id="myform" action="" method="">
 <input type="text" name="name[1][first]" value="beep">
 <input type="text" name="name[1][second]" value="bloop">
 <input type="text" name="name[2][first]" value="derp">

 <input type="text" name="foo" value="bar">  
</form>

<pre id="output">
</pre>
```

除了整个`form`. 例如，调用：

`$('input[name^="name\\["]').serializeControls()`

将返回一个仅包含`name`字段的对象。有关更多示例，请参见[http://codepen.io/alexweissman/pen/MyWZdN](http://codepen.io/alexweissman/pen/MyWZdN)。

请注意（目前），这不适用于带空括号的字段名称（例如，字段 like`input name="potatoes[]"`将被忽略，因为无法提取唯一键）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-03T06:15:17.663

这是 alexw 代码的一个版本，**适用于带空括号的字段名称**。这允许您管理具有多个值的字段（复选框、选择多个）。

```
$j.fn.serializeObject = function() {
    var data = {};

    function buildInputObject(arr, val) {
        if (arr.length < 1) {
            return val;  
        }
        var objkey = arr[0];
        if (objkey.slice(-1) == "]") {
            objkey = objkey.slice(0,-1);
        }  
        var result = {};
        if (arr.length == 1){
            result[objkey] = val;
        } else {
            arr.shift();
            var nestedVal = buildInputObject(arr,val);
            result[objkey] = nestedVal;
        }
        return result;
    }

    function gatherMultipleValues( that ) {
        var final_array = [];
        $j.each(that.serializeArray(), function( key, field ) {
            // Copy normal fields to final array without changes
            if( field.name.indexOf('[]') < 0 ){
                final_array.push( field );
                return true; // That's it, jump to next iteration
            }

            // Remove "[]" from the field name
            var field_name = field.name.split('[]')[0];

            // Add the field value in its array of values
            var has_value = false;
            $j.each( final_array, function( final_key, final_field ){
                if( final_field.name === field_name ) {
                    has_value = true;
                    final_array[ final_key ][ 'value' ].push( field.value );
                }
            });
            // If it doesn't exist yet, create the field's array of values
            if( ! has_value ) {
                final_array.push( { 'name': field_name, 'value': [ field.value ] } );
            }
        });
        return final_array;
    }

    // Manage fields allowing multiple values first (they contain "[]" in their name)
    var final_array = gatherMultipleValues( this );

    // Then, create the object
    $j.each(final_array, function() {
        var val = this.value;
        var c = this.name.split('[');
        var a = buildInputObject(c, val);
        $j.extend(true, data, a);
    });

    return data;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:04:45.787

鉴于您已成功将数组序列化为`$fields`，您现在可以遍历它并将其转换为更易于消化的结果对象：

```
var result = {};
for(var i in $fields) {
   var parts = $fields[i].name.split("[");
   var resultIndex = parseInt(parts[1].replace(']', ''), 10);
   result[resultIndex] = $fields[i].value; 
} 
```

虽然`$fields`是全局变量的有效名称，但我不能对此事保持沉默：在 JavaScript 中，局部变量是用`var`关键字定义的，并且它们前面没有美元符号 - 美元符号通常是指 jQuery 对象。因此，您可以通过调用来获取字段：

```
var fields = $('#myform').serializeArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-30T15:39:43.497

我使用`serializeArray()`了功能它解决了我的问题

```
 let fd = $( "input[name^='INPUT_NAME']" ).serializeArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-15T15:19:45.417

如果`serializeArray()`它写入输入数组。但是它用名称'imputName []'保存它，问题是提取它。但在这里我有一个解决方案。请检查代码语法。

```
var formArraySerializado = $("#form").serializeArray();

var imputArray = [];

$(formArraySerializado).each(function(i, field){

    row[field.name] = field.value;

    if (field.name.indexOf("imputArray[]") >=0){
        imputArray.push(field.value)
    }
}); 
```

# firefox-addon - 如何区分我正在构建的 Firefox 扩展中的开发和生产？

> ID：11127232
> 
> 赞同：2
> 
> 时间：2012-06-20T19:59:14.850
> 
> 标签：firefox-addon, firefox-addon-sdk

在我的 Google Chrome 扩展程序中，我使用这个漂亮的小技巧来区分开发版本和生产版本：[如何判断 Chrome 扩展程序是由真实用户安装还是由我在开发期间安装？](https://stackoverflow.com/questions/9034702/how-to-tell-if-a-chrome-extension-is-installed-by-a-real-user-vs-by-me-during-d)

我可以将类似的技巧用于 Firefox 扩展吗？我想在开发时在我的代码中使用一些稍微不同的设置，但不必在发布之前手动更改它们。

就像是：

```
if (addon_in_development) {
    setting = 'abc';
}
else {
    setting = 'def';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:44:56.637

您可以在 shell 中设置一个环境变量，然后像这样检测它：

```
var { env } = require('api-utils/environment');

console.log(env.IS_DEV);
console.log(typeof env.IS_DEV);

if (env.IS_DEV) {
    console.log("IS_DEV is set, we're running under cfx run...");
}
else {
    console.log("IS_DEV is not set?");
} 
```

有关更多信息，请参阅文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/packages/api-utils/environment.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/packages/api-utils/environment.html)

使用上述用例，您将像这样运行 cfx：

```
IS_DEV=1 cfx run 
```

# sql - SQL 计数不同

> ID：11127234
> 
> 赞同：2
> 
> 时间：2012-06-20T19:59:18.360
> 
> 标签：sql, count, group-by, distinct

如何进行计数不同的选择？基本上我有所有这些费用，我只想计算涉及该费用的不同员工的数量。（我已经有分组依据的其他字段）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:01:43.110

```
SELECT COUNT(DISTINCT employeeid) FROM .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:02:15.627

简单如：`select count(distinct(field)) from table`

现场样本：[http ://sqlfiddle.com/#!3/81379/2/3](http://sqlfiddle.com/#!3/81379/2/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:01:33.880

您可以将 a`DISTINCT`放入`COUNT`（在 TSQL 中）：

```
SELECT COUNT(DISTINCT(employee)) ... 
```

# java - jws 应用程序无法加载摆动布局

> ID：11127236
> 
> 赞同：0
> 
> 时间：2012-06-20T19:59:29.533
> 
> 标签：java, swing, jakarta-ee, java-web-start

我有一个使用 swing-layout 的旧应用程序，我必须通过 java webstart 使其可用。它从 netbeans 运行良好，但如果我使用 jws 启动它，我会收到此错误：

```
exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/jdesktop/layout/GroupLayout$Group
    at Gui.Accueil.jMenuItemConsPHActionPerformed(Accueil.java:2331)
.....
Caused by: java.lang.ClassNotFoundException: org.jdesktop.layout.GroupLayout$Group
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 41 more 
```

我曾尝试在 jnlp 文件中添加 swing-layout，但运行时出现此错误：

```
com.sun.deploy.net.FailedDownloadException: Impossible de charger la ressource : http://my_url:8080/___JWSappclient/___app/test/lib/swing-layout-1.0.4.jar 
```

这是 jnlp ：

```
<jnlp spec="1.0+" codebase="" href="">

    <information>
        <title>test </title>
           </information>
    <eligible>True</eligible>
    <security>
        <all-permissions/>
    </security>
    <resources>

        <jar href="./lib/swing-layout-1.0.4.jar"/> 
    </resources>

</jnlp> 
```

谢谢 。

**第一次编辑：**

我已经删除并尝试了许多路径，但几乎是相同的错误`com.sun.deploy.net.FailedDownloadException: Impossible de charger la ressource : http://url/___JWSappclient/___app/test/lib/swing-layout-1.0.4.jar`

我试图将 swing-layout 名称更改为 sl.jar 但没有帮助。我不明白为什么 jws 尝试从服务器下载 swing-layout.jar ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:04:56.247

该元素`<eligible>`未出现在[*JNLP File Syntax*](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)中，并且您的文件格式不正确，如图所示。在您[之前](https://stackoverflow.com/q/11118903/230513)关于此主题的问题中，您提到需要支持 Java 6。要支持 Java 5，请在`<resources>`. 包含的 JAR`org.jdesktop.layout.GroupLayout`看起来是正确的，但路径是可疑的。尝试这样的事情：

```
<resources>
    <j2se version="1.5+" />
    <jar href="lib/swing-layout-1.0.4.jar"/>
</resources> 
```

附录：*我不明白为什么 JWS 会尝试* `swing-layout.jar` *从服务器*下载。

JNLP 客户端通过 HTTP 从服务器下载所有 JAR。每个 JAR 都必须可以使用`href`属性中指定的相对路径进行访问。特别是，包含应用程序 JAR 和 JNLP 文件的`lib`目录还必须有一个包含布局 JAR 的目录。

```
测试/
    应用程序.jnlp
    应用程序.jar
    库/
        swing-layout-1.0.4.jar

```

# mysql - 是否可以遍历 MySQL SELECT 中的逗号分隔列表？

> ID：11127238
> 
> 赞同：1
> 
> 时间：2012-06-20T19:59:35.197
> 
> 标签：mysql, regex, select, stored-procedures, loops

我需要从 MySQL 表中选择满足用户提交的尺寸/数量对的所有产品。

例如，我最终得到

```
S  = 2
M  = 2
L  = 3
XL = 1 
```

我得到两个分隔符字符串，如下所示：

```
S,M,L,XL 
2,2,3,1 
```

我的数据库查询当前位于 Coldfusion8 页面中，我只是循环遍历从两个字符串创建的二维数组，并在 SELECT 语句中执行循环

```
 <cfloop from="1" to="#array.length#" index="i">
 OR  ( size = <cfqueryparam cfsqltype="cfsql_varchar" value="#var.lotArray[i][1]#"> AND qty  >= <cfqueryparam cfsqltype="cfsql_varchar" value="#var.lotArray[i][2]#"> )
 </cfloop> 
```

**问题：**
有没有办法在 MySQL INSIDE a SELECT 在存储过程中执行此操作？我想我可以遍历字符串长度并在每次迭代中选择一次，但这将是很多结果集，我不确定如何将它们组合在一起。我还查看了正则表达式，但我不确定如何使用两个正则表达式字符串以及两个字符串需要关联（M = 2，L = 3 ...）

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:34:39.990

我不是很喜欢 MySQL... 似乎它不起作用。我曾希望至少能够像这样使用 ELT 遍历我的变量名：

```
 ELT( loopcounter, passed_sizes ) 
```

循环计数器从 1,2,3... 开始，passed_sizes 是一个像 'S','M','L','XL' 这样的字符串，但我想你也不能构造这样的元素。

所以我最终做了过多代码的解决方案：

```
BEGIN
    SELECT art.a, art.v, art.c
    FROM arts AS art
    WHERE ( (filter = '') AND (1=1)
        OR art.d = filter
        )          
    AND ( (size_1 = '') AND (1=1) OR ( art.size = size_1 AND art.qty >= qty_1 ) )
    AND ( (size_2 = '') AND (1=1) OR ( art.size = size_2 AND art.qty >= qty_2 ) )
    AND ( (size_3 = '') AND (1=1) OR ( art.size = size_3 AND art.qty >= qty_3 ) )
    AND ( (size_4 = '') AND (1=1) OR ( art.size = size_4 AND art.qty >= qty_4 ) )
    AND ( (size_5 = '') AND (1=1) OR ( art.size = size_5 AND art.qty >= qty_5 ) )
    AND ( (size_6 = '') AND (1=1) OR ( art.size = size_6 AND art.qty >= qty_6 ) )
    AND ( (size_7 = '') AND (1=1) OR ( art.size = size_7 AND art.qty >= qty_7 ) )
    AND ( (size_8 = '') AND (1=1) OR ( art.size = size_8 AND art.qty >= qty_8 ) )
    AND ( (size_9 = '') AND (1=1) OR ( art.size = size_9 AND art.qty >= qty_9 ) )
    AND ( (size_10 = '') AND (1=1) OR ( art.size = size_10 AND art.qty >= qty_10 ) )
    GROUP BY art.a, art.v, art.c
    HAVING anzahl = length;
 END 
```

并传入 22 个参数而不是两个字符串。可读但男孩我想念易于使用的循环......如果有人知道更简单的实现，请发布作为答案。谢谢！

# c# - 如何允许 WCF 路由器充当 Web 服务的直接替代品？

> ID：11127240
> 
> 赞同：1
> 
> 时间：2012-06-20T19:59:41.627
> 
> 标签：c#, wcf, web-services, rest, wcf-routing

假设我目前有一个符合此合同的（实时）WCF Web 服务

```
namespace MyWeb
{
    [ServiceContract]
    public interface IMyWebService
    {
        [OperationContract]
        [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "VersionCheck/")]
        bool VersionCheck(string version, string device);
    }
} 
```

这目前按预期工作；Web 客户端使用 AJAX 将参数（作为 JSON 字符串）发布到服务，然后 Web 服务返回 JSON 响应。

但是，我需要破坏即将推出的客户端版本的 API 兼容性，并且我不能保证所有用户都会立即使用客户端的更新版本。

我想做的是以下几点：

1.  重命名`MyWebService`为指示它所针对的客户端版本的名称，例如`MyWebService_1_0`.
2.  [创建一个与IRequestReplyRouter](http://msdn.microsoft.com/en-us/library/system.servicemodel.routing.irequestreplyrouter.aspx "IRequestReplyRouter")相同的新路由服务，并将其命名 `MyWebService`为替代现有服务
3.  在请求的 HTTP 标头中包含一个`version`标头，以便新的`MyWebService` 可以确定`MyWebService_1_0`要路由到的适当的实际服务（在本例中为 ）。

从理论上讲，这似乎很简单。我遇到的问题是，每当我尝试创建上述服务时，Ajax 调用就会`www.mywebsite.com/MyWebService.svc/VersionCheck/`完全失败（请记住，在这种情况下，`MyWebService`它是一个路由服务，而不是我们开始使用的那个服务）。

我想我的问题是，在这种情况下，我能做些什么来让路由器作为替代品工作？或者，有没有更好的方法来处理这个问题？目前无法进行客户端更新。

# delphi - 如何让多级 PopupMenu 中的所有项目作为一个无线电组？

> ID：11127246
> 
> 赞同：3
> 
> 时间：2012-06-20T19:59:53.837
> 
> 标签：delphi, submenu, radio-group, popupmenu

我有一个带有子菜单的 PopupMenu，一次只能检查一项。`GroupIndex`据我尝试，并且`RadioItem`属性在相应的子菜单之外不起作用。

我找到[了这段代码](https://stackoverflow.com/a/134583/1462564)来检查 PopupMenu 及其直接子组件，但我没有任何运气来创建这样的弹出窗口。我需要一个快速的解决方案——PopupMenu 有 4x14 条目，总是遍历所有菜单和子条目，这不是最好的解决方案，我想。

是否有一个我缺少的简单属性，或者迭代的艰难路径是我唯一的选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:28:05.797

将所有 56 项作为操作添加到**一个**ActionList 并赋予所有`GroupIndex`属性相同的值。

现在，以任何树状方式添加菜单项、子菜单和子子菜单，并将它们中的每一个链接到一个动作。选中一个菜单项，无论位于何处，都会自动取消选中所有其他菜单项。

瞧！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:57:16.027

[NGLN 的回答](https://stackoverflow.com/a/11127663/757830)更好，但如果你真的不想或不喜欢使用 ActionList，那么这个例程也可以：

```
procedure CheckMenuItem(Item: TMenuItem);

  procedure UncheckMenu(Menu: TMenuItem; GroupIndex: Byte);
  var
    I: Integer;
  begin
    if Menu.RadioItem and (Menu.GroupIndex = GroupIndex) then
      Menu.Checked := False;
    for I := 0 to Menu.Count - 1 do
      UncheckMenu(Menu[I], GroupIndex);
  end;

begin
  if (not Item.Checked) and Item.RadioItem and (Item.GroupIndex <> 0) then
  begin
    UncheckMenu(Item.GetParentMenu.Items, Item.GroupIndex);
    Item.Checked := True;
  end;
end; 
```

# android - 在 android 上执行子例程后处理“返回”按钮

> ID：11127250
> 
> 赞同：1
> 
> 时间：2012-06-20T20:00:08.383
> 
> 标签：android, android-activity

我想知道如何处理带有后退按钮的子进程。

例如：

1.  从默认视图返回时跳过登录屏幕
2.  预上传处理视图。我希望后退按钮在用户上传或取消后返回到上传前的最后一个活动。

我想解决方案将包括覆盖 finish() 行为，我只是不确定细节。

帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:15:35.223

为了防止用户使用后退按钮时出现以前的活动，您应该使用[`noHistory`](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)清单标志。

我建议您更详细地阅读 Activity backstack 的工作原理。本指南应该证明是有用的：

[http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:03:38.310

首先，您只需覆盖`onBackButtonPressed()`

然后从那里你可以执行任何你想做的动作。如果你想杀死你的Activity并返回堆栈中的前一个，你可以调用finish()。没有必要覆盖它。

查看这篇文章了解更多信息 [http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html)

# javascript - 异步更新标签有问题

> ID：11127256
> 
> 赞同：0
> 
> 时间：2012-06-20T20:01:08.073
> 
> 标签：javascript, asp.net, html, ajax, webforms

我正在尝试一个简单的 ajax 表单，它将在按钮单击时更新标签。

我收到以下错误：

> Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。

在下面的函数在线：“抛出错误；”

```
function Sys$WebForms$PageRequestManager$_endPostBack(error, executor, data) {
    if (this._request === executor.get_webRequest()) {
        this._processingRequest = false;
        this._additionalInput = null;
        this._request = null;
    }
    var handler = this._get_eventHandlerList().getHandler("endRequest");
    var errorHandled = false;
    if (handler) {
        var eventArgs = new Sys.WebForms.EndRequestEventArgs(error, data ? data.dataItems : {}, executor);
        handler(this, eventArgs);
        errorHandled = eventArgs.get_errorHandled();
    }
    if (error && !errorHandled) {
        ***throw error;***
    }
} 
```

这是我的表单代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<script runat="server">

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "Hello";
    }
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Test Form
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<form id="form1" runat="server">
<div style="text-align: left; height: 395px;">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>                
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
               <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
               <br />
               <asp:Button ID="Button1" runat="server" onclick="Button1_Click" style="margin-left: 66px" Text="Button" Width="176px" />
               <br />
            </ContentTemplate>
        </asp:UpdatePanel>
</div>
</form>

</asp:Content> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:58:40.927

我将上面的代码插入到空的 aspx 页面中，删除了对 masterpage 和 asp:Content 的引用，它对我有用。标签更改了其文本。如果它仍然对您不起作用，您可以使用 Firefox+Firebug 在单击按钮后查看实际的服务器响应。它可能包含详细的异常，会给你一个提示。

# asp.net-mvc - 带有 Microsoft ASP.NET Web 优化框架的 MVC4-RC (.net 4.0) 中的错误

> ID：11127264
> 
> 赞同：3
> 
> 时间：2012-06-20T20:01:44.603
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization

我正在使用最新的 MVC4-RC (.net 4.0) 和 Microsoft ASP.NET Web 优化框架[http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0-beta3](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0-beta3)我收到了这个错误。

> 找不到方法：'无效 System.Web.Optimization.Bundle..ctor(System.String, System.Web.Optimization.IBundleTransform[])'。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.MissingMethodException：找不到方法：'Void System.Web.Optimization.Bundle..ctor(System.String, System.Web.Optimization.IBundleTransform[])'。
> 
> [MissingMethodException：找不到方法：'Void System.Web.Optimization.Bundle..ctor（System.String，System.Web.Optimization.IBundleTransform[]）'。] App.MVC.BundleConfig.RegisterBundles（BundleCollection bundles）在C :...\App_Start\BundleConfig.cs:53 App.MVC.MvcApplication.Application_Start() 在 C:...\Global.asax.cs:47
> 
> [HttpException (0x80004005): Method not found: 'Void System.Web.Optimization.Bundle..ctor(System.String, System.Web.Optimization.IBundleTransform[])'。] System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context , HttpApplication 应用程序）+4057141 System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS（IntPtr appContext，HttpContext 上下文，MethodInfo[] 处理程序）+191 System.Web.HttpApplication.InitSpecial（HttpApplicationState 状态，MethodInfo[] 处理程序，IntPtr appContext，HttpContext 上下文）+ 352 System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407 System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375
> 
> [HttpException (0x80004005): Method not found: 'Void System.Web.Optimization.Bundle..ctor(System.String, System.Web.Optimization.IBundleTransform[])'。] System.Web.HttpRuntime.FirstRequestInit(HttpContext context ) +11700896 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4869125

这是我正在使用的代码：

在 global.asax.cs

```
protected void Application_Start()
{
    ...
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    ... 
```

然后在 App_Start/BundleConfig.cs

```
using System.Web.Optimization;

namespace App.MVC.App_Start
{
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new Bundle("~/scripts/packed.js", new JsMinify()).Include(
                    // jquery
                    "~/Scripts/jquery-1.7.1.js",
                    "~/Scripts/jquery-ui-1.8.17.js",
                    "~/Scripts/jquery.validate.js",
                    "~/Scripts/jquery.validate.unobtrusive.js",
                    "~/Scripts/jquery.unobtrusive-ajax.js"));

        bundles.Add(new Bundle("~/content/css/packed.css", new CssMinify()).Include(
                    // reset
                    "~/Content/css/cssreset-min.css", 
                    "~/Content/css/cssfonts-min.css",

                    // themes
                    "~/Content/themes/base/jquery-ui-1.8.16.custom.css",

                    // site
                    "~/Content/css/Site.css"));
    }
}
} 
```

我也在这个项目中使用 Azure，有趣的是，当我第一次启动 Azure 时，我得到了这个错误。然后，当我重建 MVC 项目并刷新页面时，它就可以工作了。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:51:44.307

当我通过引用错误的包时，我收到了同样的错误

```
 Install-Package Microsoft.Web.Optimization -Version 1.0.0-beta -Pre 
```

通过引用正确的较新包解决

```
Install-Package Microsoft.Web.Optimization -Pre 
```

# cuda - CUDA 和 Sconscript

> ID：11127266
> 
> 赞同：1
> 
> 时间：2012-06-20T20:02:03.443
> 
> 标签：cuda

我正在运行一个 cuda 项目。但不知何故，我无法在其他人编写的 sconscript 文件中设置标志 -arch=sm_20 。我需要在内核中使用 printf 进行调试，我对 sconscript python 的经验很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:13:57.143

具体情况取决于您设置 SCons 以使用 CUDA 的方式。我使用这些脚本：http: [//github.com/BryanCatenzaro/cuda-scons](http://github.com/BryanCatanzaro/cuda-scons)

使用此设置，您需要做的就是使用您喜欢的架构调用 SCons：

```
scons arch=sm_20 
```

并且将使用 -arch=sm_20 标志调用 nvcc。

您的设置细节可能有所不同，但如果您查看 SCons 脚本，您应该会看到如何更改此标志。

# python - python文本读取

> ID：11127272
> 
> 赞同：0
> 
> 时间：2012-06-20T20:02:24.320
> 
> 标签：python, file-io

```
datafile = open("temp.txt", "r")
record = datafile.readline()

while record != '':
    d1 = datafile.strip("\n").split(",")
    print d1[0],float (d1[1])
    record = datafile.readline()

datafile.close() 
```

临时文件包含

```
a,12.7
b,13.7
c,18.12 
```

我无法获得输出。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:06:40.133

正确的代码应该是：

```
with open('temp.txt') as f:
    for line in f:
        after_split = line.strip("\n").split(",")
        print after_split[0], float(after_split[1]) 
```

您没有在代码中获得输出的主要原因是数据文件没有 strip() 方法，我很惊讶您没有收到异常。

我强烈建议您阅读 Python 教程 - 看起来您正在尝试用另一种语言编写 Python，这**不是** *一件好事*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:05:37.570

您想在线上调用 strip 和 split ，而不是文件。

代替

`d1 = datafile.strip("\n").split(",")`

和

`d1 = record.strip("\n").split(",")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:06:48.467

您使用文件处理程序进行操作，但应该在线工作

像这样**d1 = record.strip("\n").split(",")**

```
datafile = open("temp.txt", "r")
record = datafile.readline()

while record != '':
    d1 = record.strip("\n").split(",")
    print d1[0],float (d1[1])
    record = datafile.readline()

datafile.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:12:48.560

也许以下内容对您更有效（评论作为解释）：

```
# open file this way so that it automatically closes upon any errors
with open("temp.txt", "r") as f:
    data = f.readlines()

for line in data:
    # only process non-empty lines
    if line.strip():
        d1 = line.strip("\n").split(",")
        print d1[0], float(d1[1]) 
```

# python - 使用openpyxl从excel中的列中获取值

> ID：11127275
> 
> 赞同：2
> 
> 时间：2012-06-20T20:02:38.873
> 
> 标签：python, excel, openpyxl

我本来打算在最后一块代码中使用答案中的代码来做到这[一点](https://stackoverflow.com/questions/10614518/iterating-over-a-range-of-rows-using-ws-iter-rows-in-the-optimised-reader-of-ope)。但是，我在`for cell in ws.iter_rows(range_string=range_expr):`说“工作表对象没有属性 iter_rows”的行中出现错误。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T15:05:15.650

我需要的只是将工作簿声明更改为以下内容：`wb = load_workbook('path/doc.xls', use_iterators=True)`，添加 use_iterators 参数。简单的问题，简单的解决方案:)

# css - 仅在一页上从类中删除样式？

> ID：11127277
> 
> 赞同：0
> 
> 时间：2012-06-20T20:02:43.187
> 
> 标签：css, wordpress, class, styles, border

我只需要在[我的联系页面](http://www.frshstudio.com/contact/)`border-top: 1px solid #202020;`上删除from ，并在所有其他情况下保持原样。这可能吗？如果是这样，我该如何进行这些更改？`.contact``.contact`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:04:46.867

给那个页面的正文一个特殊的类，比如

```
<body class="contact-page"> 
```

然后在你的CSS

```
body.contact-page .contact{
    border-top:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:14:07.767

将此行添加到您的[http://frshstudio.com/wp-content/themes/frsh/style.css](http://frshstudio.com/wp-content/themes/frsh/style.css)文件中：

```
.contact_contact{border-top: none;} 
```

和你的html：

```
<div class="contact contact_contact">
  <p>
    <span>Let's Chat</span>
  </p>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:05:48.483

您可以将类添加到正文或其他包装标记，例如`<body class="contacts-page">`

然后使用下面的 CSS`.contacts-page .contact { border-top: none }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:23:39.090

您始终可以使用内联 css 覆盖样式表 css。所以像所有其他人建议的那样，把 .contact { border-top: none; 但这样做

```
<head>
      <style>
       .contact { border-top: none; }
      </style>
</head> 
```

这只会禁用页面上的边框，而所有其他页面都将遵循样式表。

# android - 安装后从市场应用程序打开时应用程序崩溃

> ID：11127279
> 
> 赞同：0
> 
> 时间：2012-06-20T20:03:00.193
> 
> 标签：android, google-play

我在 Google Market 上推出了一个应用程序，但是当人们在安装后直接从 Market App 中打开它时，一切都崩溃了。市场应用程序强制关闭，您将返回主屏幕。

但是当我的应用程序从主屏幕启动时，一切正常。我找不到解决方案，也找不到我做错的任何事情。

有没有人见过这个？

更新：ANR keyDispatchingTimedOut

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:22:01.503

[https://stackoverflow.com/a/5513623/413127](https://stackoverflow.com/a/5513623/413127)您从 Google Play 获得的 ANR 日志对您没有帮助。

您在应用程序的启动器活动中做什么。您是否创建数据库/从互联网下载一些东西？

听起来它不会在您的本地设备上崩溃，因为这已经完成，因此您的活动不会执行您的 UI 线程上运行的任何冗长的代码。

要尝试重新创建问题，请进入模拟器上的菜单并手动卸载您的应用程序（按清除数据）也可以，或者您可以使用 adb：

./adb 卸载 com.your.package

现在使用 ADB 安装您提交到 Google Play 的 APK，例如：

./adb install /folder/to/YourLiveApp.apk

打开应用程序，10 次中有 9 次出现 ANR 错误。

# ms-access - 将数组传递给函数/子例程时 MS Access/VBA 类型不匹配

> ID：11127280
> 
> 赞同：4
> 
> 时间：2012-06-20T20:03:08.200
> 
> 标签：ms-access, vba

谁能向我解释为什么，在 MS-Access 2007 表单上的按钮的 VBA 代码中，这会给出错误“编译错误：类型不匹配：预期数组或用户定义类型”

```
Private Sub Button_Click()
    Dim Arr() As Integer
    Foo (Arr())
End Sub

Private Sub Foo(Arr() As Integer)
    Me.Field.Value = "Foo"
End Sub 
```

但这编译得好吗？

```
Private Sub Button_Click()
    Dim Dummy
    Dim Arr() As Integer
    Dummy = Bar (Arr())
End Sub

Private Function Bar(Arr() As Integer)
    Me.Field.Value = "Bar"
End Function 
```

我正在编写的函数/子例程不返回任何内容，但我无法编译它，除非我将函数调用的返回值分配给一个虚拟变量，就像上面的 Bar 函数一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:05:16.703

如果您希望在参数周围使用括号，则必须使用 Call，因此请跳过括号：

```
Private Sub Button_Click()
    Dim Arr() As Integer
    ''No brackets
    Foo Arr()
    ''Or 
    ''Call Foo(Arr())
End Sub

Private Sub Foo(Arr() As Integer)
    Me.Field.Value = "Foo"
End Sub 
```

# sqlite - 由于违反约束而中止列 C1、C2、C3 不是唯一的

> ID：11127281
> 
> 赞同：1
> 
> 时间：2012-06-20T20:03:10.857
> 
> 标签：sqlite

我在表上有一个复合主键（C1+C2+C3）。这是DDL

```
 CREATE TABLE "InputFiles" (
  [PlantID] INTEGER, 
  [FileID] INTEGER, 
  [VesselDataCase] CHAR(9), 
  [Comments] CHAR(73),  
Primary key([PlantID], [FileID]),
  FOREIGN KEY(PlantId) REFERENCES Plant(PlantId) ON DELETE CASCADE);

CREATE TABLE [VesselData] (
[MaterialType] NVARCHAR(100) NOT NULL,
[Operating_Temperature] NUMERIC, 
  [IRTndt] numeric, 
  [VDID] integer, 
  [PlantId] integer, 
  [FileId] integer,
FOREIGN KEY([plantid], [fileid]) REFERENCES [inputfiles]([plantid], [fileid]) ON DELETE cascade, 
  CONSTRAINT [sqlite_autoindex_VesselData_1] PRIMARY KEY ([VDID], [PlantId], [FileId])); 

When I try to insert a new row in VesselData Table 
```

假设 VDID = 1，Fileid = 2，Plantid = 3。所以它寻找（1+2+3）组合。即使表中不存在具有这些值的字段，由于违反约束列 VDID、PlantId、FileId 不是唯一的 SQlite 异常，它也会给我中止

但是，它是在表中插入字段。插入此字段后，它给了我这个异常。由于无效的字段值，它不应该插入或中止

谢谢孙

# php - 在 Magento 块中附加自定义船舶选项

> ID：11127282
> 
> 赞同：0
> 
> 时间：2012-06-20T20:03:11.997
> 
> 标签：php, magento

[我按照这里](http://www.excellencemagentoblog.com/magento-create-custom-shipping-method)的教程为我的 Magento 安装创建了一个自定义的运输方式。我遇到的唯一问题是在前端的运输方式中添加额外的特殊选项。例如。

![邮寄方式](../Images/e34eeccdb79df7c8dd78458e490f1c9d.png)

UPS Freight 的“地面”方法是我的自定义方法。在它的侧面或下方，我想添加两个复选框，一个用于“电梯门”，另一个用于“住宅”。我想我需要在某个地方覆盖一个块，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:23:42.997

magento shipping API 不提供向运输方式添加其他选项。可以做到，但需要更改模板等等，因此通常不是最好的方法。
相反，建议向您的承运人添加两种运输方式，以便您获得（例如）

**陆运**
[ ] UPS 货运（电梯门）**$815.51**
[ ] UPS 货运（住宅）**$815.51**
**客户**
自提 [ ] 安排**$0.00**

为此，只需在第一个中调整方法标题，`shipping/rate_result_method`将带有第二个选项的第二个实例添加到返回的结果对象中。

# .net - 关闭 Visual Studio 解决方案中所有正在运行的项目

> ID：11127292
> 
> 赞同：1
> 
> 时间：2012-06-20T20:03:39.667
> 
> 标签：.net, visual-studio-2010

在您有一个包含多个启动项目的解决方案的场景中，有没有办法从一个正在运行的项目中以编程方式关闭当前正在调试的所有其他项目？

另一个类似的问题：我如何从一个项目中检测当前正在调试的其他项目？（我假设如果我可以获得它们的列表，那么我就可以关闭它们。）

# c - 在 C 中查找数据模型

> ID：11127293
> 
> 赞同：1
> 
> 时间：2012-06-20T20:03:45.230
> 
> 标签：c, architecture, datamodel

可以安全地假设：

```
#if defined(_M_X64) || defined(_M_AMD64) || (defined(_M_IA64) && !defined(__itanuim__))
/* LLP64 Data Model */
#elif defined(__amd64__) || defined(__ia64__) || defined(__ia64) || defined(__itanuim__)
/* LP64 Data Model */
#else
/* 32-bits Data Model(s) */
#endif 
```

适用于 Unix、BSD、Windows、Linux 和 HP？或者我完全错了:-) 或者遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:32:08.170

如果你真的没有`UINT_MAX`和 Co 可以通过包含文件获得，你至少可以确定`UINTMAX_MAX`：

```
typedef unsigned long long uintmax_t;
typedef signed long long intmax_t;

// start testing with the smaller values
#if -1U == 4294967295U
# define UINTMAX_MAX 4294967295
#elif -1U == 18446744073709551615U
...
#endif 
```

预处理器计算的宽度与`uintmax_t`. 所以你至少知道架构的那一部分。

对于其他事情，我会编写一个测试代码来创建一个小的包含文件：

```
printf("#define CHAR_IS_SIGNED %d\n", ((char)-1 < 0));
printf("#define UCHAR_MAX %hhu\n", (unsigned char)-1);
printf("#define USHRT_MAX %hu\n", (unsigned short)-1);
printf("#define UINT_MAX %u\n", (unsigned)-1);
printf("#define ULONG_MAX %lu\n", (unsigned long)-1);
printf("#define ULLONG_MAX %llu\n", (unsigned long long)-1); 
```

在合理的假设下（二进制补码，没有填充位），您可以推断出有符号类型的值，并且您也可以`typedef`对这些`uintXX_t`类型进行正确处理。

# python - Imagekit - 删除原始图像后未删除缓存图像

> ID：11127294
> 
> 赞同：2
> 
> 时间：2012-06-20T20:03:49.223
> 
> 标签：python, django, caching, imagekit, django-imagekit

在我的项目中，我有一个使用 Imagekit 处理图像的模型。当我保存图像时，我有以下要求：

*   将图像和缩略图重命名为唯一名称
*   加载新图像时，应删除旧图像（缓存中的缩略图应刷新为新图像）。

为此，我使用以下代码：

该模型：

```
def generate_cache_filename(instance, path, specname, extension):
    extension = '.jpg'
    return 'cache/images_upload/%s_%s%s' % (instance.pk, specname, extension)

def generate_image_filename_1(instance, filename):
    filename = '1'
    extension = '.jpg'
    return 'images_upload/%s_%s%s' % (instance.pk, filename, extension)

class Model(models.Model):
    name = models.CharField(max_length=40)
    image_1 = ProcessedImageField([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(500, 370)], upload_to=generate_image_filename_1, format='JPEG', options={'quality': 90})
    thumbnail_1 = ImageSpec([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(83, 78)], image_field='image_1', cache_to=generate_cache_filename, format='JPEG', options={'quality': 90}) 
```

表格（当图像被新图像替换时删除）：

```
if form.is_valid():
    form_image = form.cleaned_data['image_1']
        try:
            details = Model.objects.get(pk=pk)
            if details.image_1 != form_image:
                details.image_1.delete(save=False)
        except Model.DoesNotExist: 
            pass
        form.save() 
```

重命名图像和替换`image_1`（=加载新的和删除旧的）的部分工作得很好。但由于某种原因`thumbnail_1`，缓存中的 不会刷新（= 仍然是旧图像的缩略图）。

我认为它与表单中的删除代码有关，但我无法弄清楚为什么以及如何解决它。有人有建议吗？

**更新1**：它也与“重命名”有关。我做了一些额外的测试：当我不重命名`image_1`文件时，一切正常（也刷新缩略图）。但是当我加载另一个同名的图像时，我遇到了同样的问题：`image_1`更新了，但`thumbnail_1`仍然是旧图像的缩略图。

**更新 2**：做了更多测试，当上传具有相同文件名的新图像时，我肯定会输入`if statement`in `try`。所以旧图像被删除。根据 Imagekit 的文档，缩略图也应该被删除。但这种情况并非如此。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:12:51.950

与此同时，我找到了一个可行的解决方案。上面代码不起作用的主要原因是因为删除原始图像后没有删除缓存中的缩略图，特别是在新图像与前一个文件名相同的情况下=>然后缩略图是从未删除。 ***=> 我还是不知道为什么...，因为我希望在删除原始图像时总是删除缓存的图像。***

使用以下代码，一切都按预期工作：基本上我确保新上传的图像始终具有另一个文件名：

模型.py

```
def generate_cache_filename(instance, path, specname, extension):
    extension = '.jpg'
    return 'cache/images_upload/%s_%s%s' % (instance.pk, specname, extension)
# generate random string of 10 characters
def id_generator(size=10, chars=string.ascii_uppercase + string.digits):
    return ''.join(random.choice(chars) for x in range(size))

def generate_random_filename(instance, filename):
    filename = id_generator()
    extension = '.jpg'
return 'images_upload/%s_%s%s' % (instance.pk, filename, extension)

class Model(models.Model):
    name = models.CharField(max_length=20)
    image_1 = ProcessedImageField([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(500, 370)], upload_to=generate_random_filename, format='JPEG', options={'quality': 90})
    thumbnail_1 = ImageSpec([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(83, 78)], image_field='image_1', cache_to=generate_cache_filename, format='JPEG', options={'quality': 90}) 
```

查看.py：

```
# thanks to jdi for the help in the for-loop
if form.is_valid():
        # A for loop is used here, because my database contains 5 images and 5              thumbnails
        image_list = ['image_%d' % i for i in xrange(1,6)]
        for image_name in image_list:
            form_image = form.cleaned_data[image_name]
            try:
                details = Model.objects.get(pk=pk)
                if getattr(details, image_name, None) != form_image:
                    getattr(details, image_name, None).delete(save=False)
            except Model.DoesNotExist: 
                pass 
```

希望这也可以帮助其他人。

亲切的问候

# javascript - 为什么这个 jQuery 选择器有效？它的依据是什么？

> ID：11127295
> 
> 赞同：1
> 
> 时间：2012-06-20T20:03:51.300
> 
> 标签：javascript, jquery, jquery-mobile, jquery-selectors

在[这个问题](https://stackoverflow.com/questions/4465278/jquery-how-to-select-only-within-a-selection-see-code-example-if-not-clear)中，使用了以下代码 -

```
var parent = $("#jcontent"); 
var button1 = $(".button1", parent) ; 
```

`button1`在 id 的父级中选择一个类按钮`jcontent`。

为什么这行得通？将 jQuery 对象作为参数传递给 jQuery 选择器如何告诉它在该对象中进行选择？有人可以链接到解释此功能的文档吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T20:05:31.417

它是[核心方法调用](http://api.jquery.com/jQuery/#jQuery1)`context`的参数。

参数描述为：

> 用作上下文的 DOM 元素、文档或 jQuery

然后有一个标有“选择器上下文”的部分，其开头是：

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以使用 $() 函数的可选第二个参数为搜索提供替代上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T20:07:51.077

第二个参数是选择器上下文：选择器在其中匹配的 DOM 元素、文档或 jQuery 对象。如果没有此参数，则假定为文档根。

以下声明：

```
var button1 = $(".button1", parent); // parent = $("#jcontent") 
```

和写**一样：

```
var button1 = parent.find(".button1"); // parent = $("#jcontent") 
```

并且（在这种情况下）产生与此相同的结果：

```
var button1 = $("#jcontent .button1"); 
```

** 如此[处](http://api.jquery.com/jQuery/)所述：

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

# python - 从什么“种类”的 Python 开始？

> ID：11127296
> 
> 赞同：5
> 
> 时间：2012-06-20T20:03:51.447
> 
> 标签：python, ironpython, jython, pypy, python-stackless

我想学习 python，所以我从 python 站点下载了它，我看到出现了 4 种其他类型的 python：

*   蟒蛇（正常）
*   铁蟒
*   杰通
*   派皮
*   无堆栈 Python

我真的可以找到这些之间的不同之处。还有哪一个是最好的开始。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:14:59.127

**更新以在评论部分包含来自好心人的更正：**

在您提到的 python 实现中，原始和最常用的是 CPython（您列表中的 python - 它是用 C 实现并作为本机应用程序运行的 python 的解释器），并且可用于几乎所有平台。其他变体是：

*   IronPython：在 .Net 通用运行时上运行（与其他 .Net 应用程序的接口更干净）
*   Jython：在 JVM 上运行（与 Java 和其他 JVM 应用程序的接口更干净）
*   PyPy：一个 Python 解释器，包括一个即时编译器，可以显着提高程序执行性能。解释器和 JIT 是在 RPython（而不是 C）中实现的，RPython 是 Python 的一个受限子集，可以进行静态分析和类型推断。
*   Stackless Python：python 解释器的实现，它不依赖于本地 C 运行时堆栈上的递归，因此允许加载 CPython 中不可用的其他有趣的编程结构和技术（包括轻量级线程）。

Python 有大量的库（该语言的主要优点之一），其中大多数是为 CPython 开发的。出于多种兼容性原因，目前没有一个变体支持与主要实现一样多。因此，出于这个原因，CPython 是最好的起点，如果您未来的需求适合其他平台之一 - 您将处于一个很好的地方，可以从坚实的基础知识中学习变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T20:06:34.383

Python。您将找到的用于学习该*语言*的所有文档都假定了这一点。然后，如果您发现需要其他*实现*之一，文档将假定您了解 Python 并解释差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T20:05:31.153

从 Python 开始。

替代方案适用于主要适用于将 Python 与其他语言集成时的特殊用例，这是该语言的一种非常高级的用法。

# javascript - 具有不同回调处理程序的单例 Websockets 对象

> ID：11127297
> 
> 赞同：8
> 
> 时间：2012-06-20T20:03:53.430
> 
> 标签：javascript, websocket

我有一个 JavaScript Websockets 实现，我想使用一个单例模型，该模型使用一个 Websocket 连接对服务器进行多次调用，但具有不同的回调事件处理程序。我的实现工作得很好，但注意到一些奇怪的行为，消息被定向到错误的回调处理程序。这是一些代码：

Connection.js 文件

```
var connection = function(){
    var _socket = null;
    return {
        socket : function(){
            if (_socket == null){
                _socket = new WebSocket("ws://localhost:8081/index.ashx");
                _socket.onclose = function(evt){alert('Closed');}
                _socket.extraParameter = null;
            }
            return _socket;
        },
        send : function(data, callback){
            var localSocket = connection.socket();
            localSocket.extraParameter = new Date().toString();
            localSocket.onmessage = callback;
            localSocket.originalDataSent = data;
            localSocket.send(data);
        }
    }
}(); 
```

应用程序.js 文件

```
var App = function(){
    return {
        cpuUtilization : function(evt){
            var localSocket = this;
            var dateTimeOfRequest = localSocket.extraParameter;
            var originalDataSent = localSocket.originalDataSent
            var jsonData = $.parseJSON(evt.data);
            if ($.parseJSON(originalDataSent).type == "cpu"){
                $("#dateTimeContainer").html();
                $("#cpuContainer").html(jsonData.value);
            }
        }
    }
}(); 
```

第三方 Signal.js 文件

```
var Signal = function(){
    return {
        handlerProcess : function(evt){
            //  Does some third party stuff...
        }
    }
}(); 
```

用法

```
connection.send("{type:'process'}", Signal.handlerProcess);
connection.send("{type:'cpu'}", App.cpuUtilization);
connection.send("{type:'memory'}", Signal.handlerMemory);
connection.send("{type:'harddrive'}", Signal.handlerHardDrive); 
```

现在我认为我看到的问题是当通过同一个 websocket 发出多个请求并且消息返回时。由于这是异步的，我无法将请求与事件回调联系起来。我的解决方案使用处理程序中的选项作为参考，但根据 websocket 请求运行所需的时间，错误的回调处理程序被调用并且进程失败。我认为它失败了，因为我正在从 websocket 实例访问可能在调用之间发生变化的属性。

有没有办法将引用或附加参数与 evt 参数一起传递？也许以某种方式包装这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T20:18:20.950

> 我认为它失败了，因为我正在从 websocket 实例访问可能在调用之间发生变化的属性。

是的。

> 由于这是异步的，我无法将请求与事件回调联系起来。

不，您可以为回调函数创建一个闭包，而不是`callback`直接调用 using：

```
... send: function(data, callback){
    var localSocket = connection.socket();
    var extraParameter = new Date().toString();
    localSocket.onmessage = function(evt) {
        callback(evt.data, /* original- */ data, extraParameter);
    };
    localSocket.send(data);
} 
```

但是，您仍然有一个不断变化的`onmessage`回调处理程序。这意味着，一个事件可能被发送到一个不值得它的处理程序。拥有一个异步系统，您需要向服务器响应添加一条信息，指示数据属于哪个进程。然后，一个通用消息处理程序可以解决该问题并调用正确的回调。

# iphone - C++ 将 NSStringwithformat: 转换为别的东西 Cocos2dx

> ID：11127298
> 
> 赞同：0
> 
> 时间：2012-06-20T20:03:56.157
> 
> 标签：iphone, c++, objective-c, ios, cocos2d-iphone

对 C++ 来说仍然很新，所以要轻松一点，但我在这里遇到了一个小问题。

我正在运行一个 for 循环来添加精灵帧，但是我在将我的 Objective-C 转换为 C++ 时遇到了一些问题

目标-c

```
 for (int i = 0; i < 24; i++) {
        [initalTurnAnimationFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"%@%d.png", tilt, i]]];
} 
```

C++

```
for (int i = 0; i < 24; i++) {

    stringstream tempString;
    tempString <<i<<".png";        
    frameStore->addObject(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(tempString.str().c_str()));
} 
```

但是每次我用一个引用“引用计数应该大于 0”的引用来获取错误的访问权限

请帮忙，如果我错过了我确定我有的基本概念，请您指出！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:03:38.910

SpriteFrames 与 Spritesheets 一起使用。添加一个精灵表

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile(<#const char *pszPlist#>) 
```

您可以使用许多工具创建精灵表。我使用纹理打包器。一个替代品应该是 Zwoptex。当你使用 Texturepacker 创建 Spritesheet 时，你会得到一个 Spritesheet 和一个 .plist 文件。上面的参数是 .plist 文件的名称。在这个 .plist 文件中是键。

```
CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(key) 
```

该方法为您提供了来自先前添加的 Spritesheet 的 CCSpriteFrame*。如果您从未添加 Spritesheet，它会抛出您刚刚遇到的错误。

# javascript - 基于php变量在Javascript中创建循环

> ID：11127300
> 
> 赞同：1
> 
> 时间：2012-06-20T20:04:02.713
> 
> 标签：javascript

假设我有以下脚本，计算总和。

这是代码：

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script language="javascript" type="text/javascript">

    function updatesum() {

    line1 = ((document.form.price_1.value -0) * (document.form.number_1.value -0));

    line2 = ((document.form.price_2.value -0) * (document.form.number_2.value -0));

    line3 = ((document.form.price_3.value -0) * (document.form.number_3.value -0));

    line4 = ((document.form.price_4.value -0) * (document.form.number_4.value -0));

    line5 = ((document.form.price_5.value -0) * (document.form.number_5.value -0));

    document.form.sum.value = line1 + line2 + line3 + line4 + line5;

    }
    </script>

    </head>        
    <body>

    <?php

$tR = 1;
$maxlines = 5;

echo '<form name="form" method="post" action="action.php">';
echo '<table><tbody>';

while($tR <= $maxlines)
{
echo '<tr>';
echo '<td width="1"><input name="price_' . $tR . '" onChange="updatesum();"         type="text"></td>';
echo '<td width="1"> x </td>';
echo '<td width="1"><input name="number_' . $tR . '" onChange="updatesum();"         type="text" value="1"></td>';
echo '</tr>';
++$tR;
}
echo '</tbody></table>';

echo 'Total: <input name="sum" value="0" type="text" readonly="readonly">';
echo '<button type="submit" name="Submit" style="display: hidden;">Submit</button>';
echo '</form>';

    ?>

    </body>
    </html> 
```

没关系...但是现在我将变量 $maxlines 从 5 更改为 500...如何调整 Javascript，而无需编写类似的内容：

```
function updatesum() {

line1 = ((document.form.price_1.value -0) * (document.form.number_1.value -0));

line2 = ((document.form.price_2.value -0) * (document.form.number_2.value -0));

line3 = ((document.form.price_3.value -0) * (document.form.number_3.value -0));

line4 = ((document.form.price_4.value -0) * (document.form.number_4.value -0));

line5 = ((document.form.price_5.value -0) * (document.form.number_5.value -0));

line6 = ((document.form.price_6.value -0) * (document.form.number_6.value -0));

  .......................

line500 = ((document.form.price_500.value -0) * (document.form.number_500.value -0));

document.form.sum.value = line1 + line2 + line3 + line4 + line5 + line6 ........... + line500;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:15:03.177

您可以使用循环遍历所有字段：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script language="javascript" type="text/javascript">

        function updatesum() {
            var prices = document.getElementsByName('price');
            var numbers = document.getElementsByName('number');
            var sum = 0;

            for (var i = 0; i < prices.length; i++) {
                sum += prices[i].value * numbers[i].value;
            }
            document.form.sum.value = sum;
        }
        </script>
    </head>        
    <body>
        <?php
            $tR = 1;
            $maxlines = 50;

            echo '<form name="form" method="post" action="action.php">';
            echo '<table><tbody>';

            while($tR <= $maxlines)
            {
                echo '<tr>';
                echo '<td width="1"><input name="price" onChange="updatesum();"         type="text"></td>';
                echo '<td width="1"> x </td>';
                echo '<td width="1"><input name="number" onChange="updatesum();"         type="text" value="1"></td>';
                echo '</tr>';
                ++$tR;
            }
            echo '</tbody></table>';

            echo 'Total: <input name="sum" value="0" type="text" readonly="readonly">';
            echo '<button type="submit" name="Submit" style="display: hidden;">Submit</button>';
            echo '</form>';
        ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:30:03.070

简短的版本是更新脚本并在那里有一个循环来完成所有这些。

**但是**（一个巨大的但就是这样）

除了解决方案本身之外，您还可以在脚本中改进一些内容。您可以尝试不同的方法来解决您的问题：

*   您不必分别将函数绑定到每个输入更改元素，并且`onchange`在 HTML 中使用属性是一种有点过时的方法。
*   您不必定义每一行。您可以使用 JavaScript 将它们全部汇总，而无需知道您有多少。
*   我会将您的`input`元素`name`属性重命名为您可以在 PHP 中使用的属性，而无需事先知道它的大小。例如，如果您将属性的名称更改为`name="price[]"`and `name="number[]"`，您的值将神奇地以 and 的形式发送到您的 PHP`$_POST["price"]`脚本`$_POST["number"]`。从那里，您可以动态地玩它。

现在来一些真实的代码：

通过按照我解释的那样构建 HTML，您最终会得到以下想法：

```
<form name="form">
<input type="text" name="price[]" value="1" /><input type="text" name="number[]" value="10" /><br />
<input type="text" name="price[]" value="2" /><input type="text" name="number[]" value="20" /><br />
<input type="text" name="price[]" value="3" /><input type="text" name="number[]" value="30" /><br />
<input type="text" name="price[]" value="4" /><input type="text" name="number[]" value="40" /><br />
<br /><input type="text" name="sum" value="0" id="sum" />
</form> 
```

然后，按照我建议的事件绑定技术，您的 JavaScript 将被简化为如下所示：

```
function updateSum() {
    var prices = document.getElementsByName("price[]");
    var numbers = document.getElementsByName("number[]");
    var sum = 0;
    for (var i=0; i < prices.length; i++) {
         sum += prices[i].value * numbers[i].value;
    }

    document.getElementById("sum").value = sum;
} 

var prices = document.getElementsByName("price[]");
var numbers = document.getElementsByName("number[]");
for (var i=0; i < prices.length; i++) {
    prices[i].addEventListener('change', updateSum, false);
    numbers[i].addEventListener('change', updateSum, false);
} 
```

我创建了一个 jsFiddle ( [http://jsfiddle.net/nXqgW/2/](http://jsfiddle.net/nXqgW/2/) ) 来展示这个代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:14:13.773

您可以像这样轻松地将 php 变量传输到 javascript

```
<script>
var maxlines = <?php echo $maxLines?>;
</script> 
```

您现在有一个 javascript 变量 maxlines 等于您的 php 变量另外，请记住，如果您正在传输字符串以将其放在引号中

```
<script>
var myString = '<?php echo $myString?>';
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:12:07.753

你需要用 PHP 输出 javascript 行，所以在 PHP 中你有你的 maxlines 变量你可以做一个循环；

```
<script>
    ...
    <?php for($i = 0; $i < $maxlines; $i++) {
        //Output javascript line
        ?>

        line<?php echo $i; ?> = ((document.form.price_<?php echo $i; ?>.value -0) * (document.form.number_<?php echo $i; ?>.value -0));
    <?php
    } ?>

    document.form.sum.value = 0 <?php for($int i = 0; $i < $maxlines; $i++) {
        echo '+ line' . $i;
    } ?>
</script> 
```

我还没有测试过这段代码，但它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:09:12.227

您可以使用这样的代码：

```
<script>
function updatesum() {
    <?php $lines = array() ?>
    <?php for($i = 0; $i < $count; $i++) : ?>
        line<?= $i ?> = ((document.form.price_<?= $i ?>.value -0) * (document.form.number_<?= $i ?>.value -0));
        <?php $lines[] = 'line' . $i;
    <?php endfor; ?>
    document.form.sum.value = <?= implode(' + ', $lines);
}
</script> 
```

# android - Android：ScrollView 中的视图不会出现在空的 LinearLayout 之后

> ID：11127307
> 
> 赞同：0
> 
> 时间：2012-06-20T20:04:50.050
> 
> 标签：android, android-layout

在 Android 4 上，我有一个简单`ScrollView`的表单来填写。在视图中我有许多按钮，然后是这个布局，

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layoutImages" /> 
```

然后是更多按钮。布局总是在`LinearLayout`. 如果我将布局向下移动到视图列表中，则会出现其上方的所有视图。我可以很好地引用代码中的其他布局，这样它们就在那里，只是不可见。

我需要做些什么来`LinearLayout`防止它停止渲染所有后续视图吗？

作为参考，这是完整的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:minWidth="25px"
 android:minHeight="25px"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:fillViewport="true"
 android:id="@+id/scrView">
 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_selector">
    <Button
        android:text="Call Crime Stoppers"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnCall"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/blue_button_selector"
        android:textSize="25dp"
        android:textColor="@color/white"
        android:drawableLeft="@drawable/phone_element" />
    <TextView
        android:text="About the Incident:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/lblDescriptionTop"
        android:layout_marginTop="15dp" />
    <Button
        android:text="Take a Picture"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnPicture"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/blue_button_selector"
        android:textSize="25dp"
        android:textColor="@color/white"
        android:drawableLeft="@drawable/icon_camera" />
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/layoutImages" />
    <Button
        android:text="Location Type"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnLocationType"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/blue_button_selector"
        android:textSize="25dp"
        android:textColor="@color/white" />
    <Button
        android:text="Nature of the Incident"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnNature"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:background="@drawable/blue_button_selector"
        android:textSize="25dp"
        android:textColor="@color/white"
        android:layout_marginTop="5dp" />
    <TextView
        android:text="Please Describe:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/lblDescription"
        android:layout_marginTop="15dp" />
    <EditText
        android:inputType="textMultiLine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txtDescription"
        android:minHeight="150dp"
        android:maxHeight="150dp"
        android:layout_marginTop="5dp"
        android:minWidth="150dp"
        android:maxWidth="150dp" />
    <TextView
        android:text="Optional Contact Info:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/textView1"
        android:layout_marginTop="15dp" />
    <CheckBox
        android:text="Use Phone Number?"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/chkPhone" />
    <EditText
        android:inputType="phone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/editPhone"
        android:hint="Phone Number" />
    <CheckBox
        android:text="Use Email"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/chkEmail" />
    <EditText
        android:inputType="phone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/editEmail"
        android:hint="Email" />
    <Button
        android:text="Send"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnSend"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:background="@drawable/blue_button_selector"
        android:textSize="25dp"
        android:textColor="@color/white"
        android:layout_marginTop="15dp" />
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:06:55.343

那是因为您将 layout_height 设置为“fill_parent”，因此它占用了其下方的其余空间。这就是为什么它在底部时有效，但在中间时无效。尝试将其更改为“wrap_content”或使用RelativeLayout。

# ruby-on-rails - 使用 activeadmin has_many 表单操作 h3 标题

> ID：11127310
> 
> 赞同：0
> 
> 时间：2012-06-20T20:04:56.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我查看了[这个问题](https://stackoverflow.com/questions/7099080/how-to-use-activeadmin-on-models-using-has-many-through-association)，并且能够正确设置 has_many 表单。

这是我所在的位置：

```
f.has_many :related_contents do |rc|
  rc.inputs "first configuration" do
    #...
  end
end
f.has_many :related_contents do |rc|
  rc.inputs "second configuration do
    #...
  end
end 
```

所以我想有不同的字段配置。我想不通的是如何设置`<h3>`activeadmin 生成并设置为嵌套字段的标题。我想像

```
f.has_many :related_contents, :title => "first set" do |rc| 
```

会工作，但它不会。有谁知道我需要做些什么才能让它正常工作？

我假设更改`<h3>`也将更改生成添加的按钮。我还需要为此设置另一个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T20:30:41.330

为方法添加一个`:heading`选项`f.has_many`

```
f.has_many :related_contents, :heading => "first set" do |rc|
  #...
end 
```

要完全删除标题，请将其设置为`false`或`nil`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:12:50.627

你需要遵循下一个命令，我的意思是，你需要在第一行设置“输入”，然后设置“has_many”块，我希望这就是你正在寻找的，问候！

```
form do |f|
  f.inputs "details #1" do
    f.input :title, :label => "Title"
    f.input :description, :label => "Description"
    f.input :image, :as => :file, :required => false, :label=>'Image'  

  end

  f.inputs "details #2" do
   f.has_many :subdetails do |a|
       a.input :description, :label => "Description"
       a.input :image, :as => :file, :required => false, :label=>'Image'
   end  
 end 
```

好的，在 has_many 的标题出现一些问题后，我可以弄清楚正确的方法是如何做到的，我认为它更干净、更花哨......

```
form do |f|
    f.inputs "Post" do

      f.input :title
      f.input :description

    end

    f.inputs "Comments" do
     f.has_many :comments do |a|

        a.input :title
        a.input :description

      end  
    end

    f.buttons
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:25:15.310

```
$('h3:contains("Related Contents")').hide().first().show(); 
```

不完美，但绝对看起来更好。

# jquery - jquery嵌套ajax列表和onclick函数设计

> ID：11127313
> 
> 赞同：0
> 
> 时间：2012-06-20T20:05:13.260
> 
> 标签：jquery, ajax, onclick, nested

我有以下一对多数据模型：区域有客户，客户有备注和警报

我已经实现了获取填充，如下所示：

```
When the page loads all the regions load and populate their view.
When you click on a region all the clients for that region load and populate their view.
When you click on a client all the notes/alerts for that client load and populate .their view. 
```

用于此的 jquery 代码如下所示：

```
 RegionDAO.getRegions(function(data){
        $("#regionlist").empty();
        $("#clientlist").empty();
        $(data).each(function(index){
            $("#regionlist").append("<li class='regionrow blendRow' id='"+this.rid+"'>" + this.name + "</li>");
        });
        $('.regionrow').blend(150);
        $(".regionrow").click(function(){
             $(".regionrow").removeClass("activerow");
             $("#"+$(this).attr("id")).addClass("activerow");
             RegionDAO.getClientsByRegion($(this).attr("id"),function(data){
                 $("#clientlist").empty();
                 $(data).each(function(index){
                     $("#clientlist").append("<li class='clientrow blendRow' id='"+this.cid+"'>" + this.lastname + "</li>");
                 });
                 $('.clientrow').blend(150);
                 $('.clientrow').click(function(){
                     RegionDAO.getNotesByClient($(this).attr("id"),function(data){
                         $("#notelist").empty();
                         $(data).each(function(index){
                             $("#notelist").append("<li class='noterow blendRow' id='"+this.nid+"'>" + this.text + "</li>");
                         });
                         $('.noterow').blend(150);                           
                     });
                    RegionDAO.getAlertsByClient($(this).attr("id"),function(data){
                         $("#alertlist").empty();
                         $(data).each(function(index){
                             $("#alertlist").append("<li class='alertrow blendRow' id='"+this.nid+"'>" + this.text + "</li>");
                         });
                         $('.alertrow').blend(150);                          
                     });
                 });
             });
        });
    });
}); 
```

在我在单独的单击处理程序中实现 addRegion 功能之前，一切都运行良好。我想要发生的是，在您单击保存（我有一个处理程序）后，区域列表会重新填充。问题是因为它在一个单独的处理程序中，我必须重新定义整个嵌套列表>再次单击函数结构，这就是代码重复。下面是 addRegion 代码：

```
$("#addregiondialog").dialog({                          
                    title: 'Add a region',
                    show: "up",
                    open: function(event, ui){

                    },
                    buttons: { "Save": function() {

                            $(this).dialog("close"); 

                            RegionDAO.addRegion($('#region_name').val());
                            RegionDAO.getRegions(function(data){
                                $("#regionlist").empty();
                                $("#clientlist").empty();
                                $(data).each(function(index){
                                    $("#regionlist").append("<li class='regionrow blendRow' id='"+this.rid+"'>" + this.name + "</li>");
                                });
                                $('.regionrow').blend(150);
                                $(".regionrow").click(function(){
                                    //MUST REDEFINE THE CLIENT LOADING AND CLICK STRUCTURE
                                    //HERE AS WELL AS THE CLICKS AND EVERYTHING FOR NOTES AND ALERTS. IE THE ABOVE CODE>
                                });

                            });
                        } 
                    }                       
                }); 
```

这对我来说似乎是一种非常常见的模式，并且想知道实现这一点的最佳方法是什么，因为显然（它有效，但是）这并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:52:23.527

您在上面的代码中使用的 .click() 是 .bind('click') 的快捷方式。**这为所有已经存在**的匹配元素绑定了一个事件处理程序。.live() 是 .bind() 的对应物，它对**将来添加的**元素也是如此。但是 jQuery 文档指出：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。
> 
> 此方法提供了一种将委托事件处理程序附加到页面的文档元素的方法，这在将内容动态添加到页面时简化了事件处理程序的使用。有关更多信息，请参阅 .on() 方法中对直接事件与委托事件的讨论。

我的意思是在我的评论中。
现在你必须做的（假设`#parent`是所有`.regionrow`s 的共同父级）而不是

```
$(".regionrow").click(function(){
    (...)
}); 
```

是

```
$("#parent").on("click", ".regionrow", function(){
    (...)
}); 
```

# google-chrome-extension - 移动扩展而不惹恼用户

> ID：11127315
> 
> 赞同：1
> 
> 时间：2012-06-20T20:05:21.337
> 
> 标签：google-chrome-extension, webstore

好的，

所以大约一年前（我认为）谷歌经历了一个转变，他们让 Google Apps 帐户“真实”，这样我们就可以在 Chrome 网上应用店等地方使用它们。不幸的是，在此之前，我已经编写了一些扩展，这些扩展位于现在冲突的帐户下。所以，现在我得到的是一个两个帐户，其中旧的扩展名在这个冲突的帐户下，而超过该日期的任何内容都在新帐户下。

所以，是时候升级其中的一些（旧扩展）了，我想做的是以不会给用户带来问题的方式移动应用帐户下的扩展。有人知道方法吗？似乎唯一的选择是将扩展程序放在新帐户下并在旧帐户下删除它们，但我认为所有用户都必须知道安装新帐户。

想法？有人经历过这个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:11:55.103

**编辑：**正如@a​​rtur-nowak 在评论中指出的那样，现在可以使用[这种形式](https://support.google.com/chrome_webstore/contact/dev_account_transfer)在帐户之间转移扩展名。

* * *

如果您的扩展程序仅托管在 Chrome Web Store (CWS) 之外，则可以通过修改`update_url`in `manifest.json`（以便扩展程序开始从其他来源下载更新）来解决此问题。但它们不是，而且 CWS 不允许您修改`update_url`参数。因此，我相信您还有两个选择：

*   等待谷歌在 CWS 中添加“更改所有权”功能

*   或将您的扩展作为所需用户再次添加到 CWS 并更新旧的以显示弹出/通知“请更新”并带有指向新版本的链接。如果您包含一些新功能来吸引他们，用户应该更渴望更新。此外，如果保留配置，它们将不那么烦人。为此，将设置导出到书签面板（很容易访问它们）并在安装时将它们导入新版本的扩展程序中。

# c# - C# 模糊调用 DataColumnCollection.Add(System.Data.DataColumn)' 和 'System.Data.DataColumnCollection.Add(string)

> ID：11127318
> 
> 赞同：3
> 
> 时间：2012-06-20T20:05:31.853
> 
> 标签：c#

下面是我正在使用的代码，我以前用过这个 100x。现在它抛出了一个错误，基本上我正在尝试根据 excel 文件的第一行动态创建列。我现在收到的错误是：

`The call is ambiguous between the following methods or properties: 'System.Data.DataColumnCollection.Add(System.Data.DataColumn)' and 'System.Data.DataColumnCollection.Add(string)'`

```
DataTable excel_Holding_Table = new DataTable();
        DataRow row;
        Microsoft.Office.Interop.Excel.Range range = workSheet.UsedRange;
        for (int i = 1; i <= range.Columns.Count; i++)
        {
            excel_Holding_Table.Columns.Add(Convert.ToString(((Microsoft.Office.Interop.Excel.Range)workSheet.Cells[1, i]).Value2));
        } 
```

我需要做些什么来防止这种情况发生，这从未出现过。

这是我的使用：

```
使用系统；
使用 System.Collections.Generic；
使用 System.ComponentModel；
使用 System.Data；
使用 System.Drawing；
使用 System.Linq；
使用 System.Text；
使用 System.Windows.Forms；
使用 System.Runtime.InteropServices；
使用 System.IO；

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:10:17.983

我的猜测是`Convert.ToString`正在返回`null`，但是因为您是`Add`动态调用的，所以它无法根据实际类型计算出重载。

幸运的是，我们可以在提高代码可读性的*同时*修复问题：

```
for (int i = 1; i <= range.Columns.Count; i++)
{
     // Note: Add using directive for Microsoft.Office.Interop.Excel
     Range range = (Range) workSheet.Cells[1, i];
     string value = Convert.ToString(range.Value2);
     excel_Holding_Table.Columns.Add(value);
} 
```

# android - 为什么我的 Android 应用程序从 java.lang.ExceptionInInitializerError 强制关闭，并且它没有被 try/catch 块捕获？

> ID：11127319
> 
> 赞同：1
> 
> 时间：2012-06-20T20:05:34.850
> 
> 标签：android, exception, reflection

我正在使用反射来查看 Equalizer 类是否可用于 Android OS 2.3 及更高版本，然后使用该类（如果可用）。但是，我会定期收到带有“ExceptionInInitializerError”的崩溃报告。这是堆栈跟踪：

```
java.lang.ExceptionInInitializerError
at java.lang.Class.classForName(Native Method)
at java.lang.Class.forName(Class.java:234)
at java.lang.Class.forName(Class.java:181)
at com.myapp.EQ.<init>(SourceFile:16)
at com.myapp.mainAct.onCreate(SourceFile:209)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1312]: 277 cannot locate '_ZN7android11AudioEffect25queryDefaultPreProcessingEiP19effect_descriptor_sPj'...

at java.lang.Runtime.loadLibrary(Runtime.java:455)
at java.lang.System.loadLibrary(System.java:554)
at android.media.audiofx.AudioEffect.<clinit>(AudioEffect.java:63) 
```

这是引发错误的自定义类：

```
public class EQ{
    private Class<?> eqClass = null;

    public EQ(){
        if(Build.VERSION.SDK_INT >= 9){
            try {
                eqClass = Class.forName("android.media.audiofx.Equalizer"); 
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

因此，崩溃发生在“Class.forName”行，任何异常都应该被`Catch`块捕获。为什么不是？

这种情况偶尔会发生，在过去的 2 个月中，我收到了 5 份不同的崩溃报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:08:04.977

`java.lang.ExceptionInInitializerError`不是一个`Exception`，因此无法使用您的`try catch`块捕获。

[Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ExceptionInInitializerError.html)说它是`Error`

而是尝试像这样捕获**特定类型的错误**：

```
catch (java.lang.ExceptionInInitializerError er) 
```

# iphone - 带有 UIButtons 的小水平滚动视图

> ID：11127321
> 
> 赞同：1
> 
> 时间：2012-06-20T20:05:35.367
> 
> 标签：iphone, uiscrollview, uibutton

我想用几个按钮创建一个小的水平滚动视图，如图所示。用户可以选择其中任何一个，详细信息将相应显示。我不确定如何以编程方式对其进行编码。请帮忙。

图片：- [http://i.stack.imgur.com/uDqkn.jpg](http://i.stack.imgur.com/uDqkn.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:55.760

好的，请按照步骤执行相同的操作。

第 1 步：取 UITableview 并应用仿射变换 90 度。第 2 步：在每个单元格上取一个按钮，同时应用 90 度的仿射变换。第 3 步：将借助 NSString 的 stringwidth 函数计算每个表格单元格的高度（现在您可以说宽度）。所以请在回调方法（heightforRowatIndexPath）中输入代码。第 4 步：获取 tableview 层并应用值为 10.0f 的圆角属性 第 5 步：您可以对按钮的颜色执行相同操作。

第 6 步：对于外部箭头，您需要实现一些 UIScrollview 模块。

## 这里所有的内存都将由 tableview 管理，用于水平滚动的 n 个按钮。

谢谢，有任何问题请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:35:49.137

在 ARC 视图控制器中...

```
#define kHEIGHT  35.0

- (void)createButtonScrollViewWithButtonTitles:(NSArray *)titles {

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0,100.0,320.0,kHEIGHT)];

    CGFloat buttonPositionX = 0.0;
    for (NSString *title in titles) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button addTarget:self action:@selector(pressedButton:) forControlEvents:UIControlEventTouchDown];

        [button setTitle:title forState:UIControlStateNormal];
        button.frame = CGRectMake(buttonPositionX, 0.0, 90.0, kHEIGHT);
        buttonPositionX += 90.0;
        [scrollView addSubview:button];
    }
    scrollView.contentSize = CGSizeMake(buttonPositionX, kHEIGHT);
    [self.view addSubview:scrollView];
} 
```

完成这项工作后，您可以创建一个包含一组图像的版本。为此，按钮类型将更改为 UIButtonTypeCustom。您将使用 setImage: 而不是 setTitle: 并且您将有机会通过将 buttonPositionX 推进 image.size.width 而不是常数来改变宽度。

不知道如何解释您发布的图像两侧的小滚动箭头外观。另一个后续增强功能是在每一端覆盖一个与这些箭头匹配的小图像视图（userInteractionEnabled = NO）。

# emacs - 如何让 Emacs 使用带有版本号的 OpenVMS Files-11 样式文件名创建备份文件？

> ID：11127322
> 
> 赞同：2
> 
> 时间：2012-06-20T20:05:35.917
> 
> 标签：emacs, versioning, openvms

这个[关于 .emacs 文件的 SO 答案](https://stackoverflow.com/a/845311/101954)包含：

```
;; keep backup files neatly out of the way in .~/
(setq backup-directory-alist '(("." . ".~"))) 
```

[这引发了一个想法，即如果 Emacs 使用OpenVMS](http://en.wikipedia.org/wiki/OpenVMS) [Files-11](http://en.wikipedia.org/wiki/Files-11#Disk_organization_and_naming)版本命名创建备份文件会很方便。例如，`x.txt;3`或者`x.txt.3`对于第三版`x.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:53:46.357

查看这篇文章：[http](http://www.glindra.org/doc/version_number.html) ://www.glindra.org/doc/version_number.html 。短篇小说要补充：

```
(setq version-control t) 
```

在您的 .emacs 文件中。

# python - service = build("fusiontables", "v1", http=http) 无法开始工作

> ID：11127331
> 
> 赞同：0
> 
> 时间：2012-06-20T20:06:05.860
> 
> 标签：python, google-fusion-tables, google-api-python-client

我正在使用通用[的 google-api-python-client](http://code.google.com/p/google-api-python-client)来访问 Fusion Tables API，并且无法用它做任何有用的事情。

好吧，我已经阅读了函数的帮助：

```
service = build("fusiontables", "v1")
help(service) 
```

得到了这个：

```
class Resource(__builtin__.object)
 |  A class for interacting with a resource.
 |  
 |  Methods defined here:
 |  
 |  __init__(self)
 |  
 |  column = methodResource(self)
 |      A collection resource.
 |  
 |  query = methodResource(self)
 |      A collection resource.
 |  
 |  style = methodResource(self)
 |      A collection resource.
 |  
 |  table = methodResource(self)
 |      A collection resource.
 |  
 |  template = methodResource(self)
 |      A collection resource. 
```

但它仍然没有给我任何东西。

我已经尝试了[示例中的代码](http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py)

```
f = file('key.p12', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
    '...',
    key,
    scope='https://www.googleapis.com/auth/fusiontables')
http = httplib2.Http()
http = credentials.authorize(http)

service = build("fusiontables", "v1", http=http)
print(service.table().list().execute()) 
```

它给了我“{u'kind': u'fusiontables#tableList'}”。

但我仍然不明白如何运行 SQL 查询，如何向表中插入行？你能解释一下那一刻吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:52:50.593

[在http://code.google.com/p/fusion-tables-client-python/](http://code.google.com/p/fusion-tables-client-python/)有一个更简单的专门 Fusion Table Client python 代码 我已经成功使用了这个。

# javascript - 使用 jquery 返回单个 html 元素

> ID：11127332
> 
> 赞同：0
> 
> 时间：2012-06-20T20:06:09.270
> 
> 标签：javascript, jquery

我怎样才能让 jQuery 以这种方式返回一个 html 元素`getElementById`？

如果`console.log($('#container'))`我会得到：

```
[<div id="container"></div>] 
```

但是我与之交互的 API 显然不想要那个（数组） - 它想要：

```
<div id="container"></div> 
```

我知道我可以通过`$('#container').get(0)`其他一些方法来实现这一点，这似乎有点矫枉过正——尤其是当我选择一个永远唯一的 ID 时。

我想念什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:10:14.753

如果你只想要一个 DOM 元素，那么只需使用普通的 javascript：

```
var obj = document.getElementById("container"); 
```

jQuery 选择器总是创建一个 jQuery 对象，其中包含一组元素。这就是它的设计方式。如果你想要一个元素，你要么从 jQuery 对象中获取第一个元素，要么使用不同的工具。

从 jQuery 对象中，您可以通过以下方式获取第一个对象：

```
$('#container').get(0) 
```

或与：

```
$('#container')[0] 
```

但是，我会争辩说，如果您想要的只是具有 id 的单个对象，那么两者都超出了您的需要。只需使用`document.getElementById()`. 如果您想减少打字，您可以制作自己的短功能：

```
function $$(id) {
    return(document.getElementById(id));
}

var obj = $$("container"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:09:19.643

尝试使用 .html() 它将返回您选择的元素的 html，请参见：

[http://api.jquery.com/html/](http://api.jquery.com/html/)

# javascript - .load() 问题，从另一个页面加载

> ID：11127337
> 
> 赞同：0
> 
> 时间：2012-06-20T20:06:28.137
> 
> 标签：javascript, jquery, asp-classic

我有这个表格：

```
<form name="form1" method="post" action="enviaorcamento.asp">
    <strong>Nome:</strong><input name="nome" type="text" class="formsahn" id="nome" size="50">
    <input name="enviar" type="submit" class="mensagem" id="enviar" value="enviar">
</form> 
```

此内容从另一个页面加载到 div 内的 home.html`#conteudo_mostrar`

我的 jquery`.load()`脚本是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){
       $("#conteudo_mostrar").load("form.asp");
    });
    function abrirPag(valor)
    {
    $("#conteudo_mostrar").load(valor).fadeIn("slow");
    }
</script> 
```

最后在`enviaorcamento.asp`（我的发送页面）我有脚本：

```
<script>alert('Orçamento Enviado com Sucesso!'); window.parent.$('#conteudo_mostrar').load('obrigadoorcamento.asp');</script> 
```

但这不起作用。

`obrigadoorcamento.asp`我想从`#conteudo_mostrar`发送页面加载。

我希望我清楚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:10:59.247

从[http://api.jquery.com/load/](http://api.jquery.com/load/)请检查并告诉我们。如果它不起作用，请尝试使用 $.get() 并手动插入 DOM。

![在此处输入图像描述](../Images/44ef238447c98855c8cd7305aa8adc48.png)

# javascript - HTML 浏览器“文本”选择：选择整个单词（如 iBooks 中）

> ID：11127339
> 
> 赞同：2
> 
> 时间：2012-06-20T20:06:39.133
> 
> 标签：javascript, html, css, selection

我有一个结构：

```
<span class="word">This</span><span class="word">is</span><span class="word">the</span><span class="word">text</span><span>.</span> 
```

我希望用户能够选择整个单词（spans，class="words"）（在桌面和 iOS 上的浏览​​器中 - 就像在 iBooks 中一样）。

我怎样才能用css设计它？

这样做的正确方法是什么？（之前没有与选择一起使用）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:14:02.913

我知道你没有提到 jQuery - 但是对于这种动态的东西，我认为使用它是非常可取的。

将整个交易包装在一个 div 中。

```
<div id="wordSelector"><spans></div> 
```

然后将 mousedown 事件附加到 div。使用信号量确保仅在鼠标按下期间处理事件。捕获跨度上的 mouseover 事件，直到注册 mouseup 事件。

注意：这些事件可能需要附加到文档而不是 div 以确保处理 div 之外但进入 div 的 mousedown 事件，以及 mouseup 以及以防 mouseup 事件位于 div 之外。

```
var spansTouched = [];
var mouseDown = 0;
$("#wordSelector").mousedown( function(){
 //track spans touched with a semaphore
 mouseDown++;
});
$("#wordSelector").mouseup( function(){
 mouseDown = 0;
 //handle spansTouched and then reset it to []
});
$(".word").mouseover( function(){
 if(mouseDown > 0){
  spansTouched.push(this);
 }
}); 
```

显然这里还有改进的余地，这只是为了强调一种使用信号量和鼠标事件的可能方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:14:15.803

不知道你的意思是用户应该选择一个词。如果用户应该通过单击来“选择”一个单词，您可以使用 jQuery 插件，如[TipTip](http://code.drewwilson.com/entry/tiptip-jquery-plugin)或任何其他[tooltip-plugin](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)。至少tiptip支持点击。

不确定是否有任何工具提示插件默认支持触发文本突出显示，但使用 JavaScript 侦听文本突出显示并触发适当的工具提示以手动显示，如果取消选择文本，则再次隐藏它。

Dave Welsh 编写了[一小段 jQuery](http://davidwalsh.name/text-selection-ajax)来嗅探文本选择，可以使用它。

# mysql - 如何在mysql的for循环中使用选择查询？

> ID：11127341
> 
> 赞同：0
> 
> 时间：2012-06-20T20:06:40.660
> 
> 标签：mysql

我有以下 SQL 代码，它适用于小型数据集。我有一个朋友告诉我，我应该考虑将它放入 MySQL 中的 FOR 循环中，使用 a`SELECT DISTINCT c.name`作为循环条件。

```
SELECT c.name, c.limit, c.price, c._low, c._high, c.date
FROM comp c
WHERE c.e_id IN 
(SELECT e_id FROM part_e WHERE core_id=23)
OR c.pn IN
(SELECT pn FROM part_ct WHERE core_id=23)
GROUP BY c.name
ORDER BY c.date DESC, c.name ASC
LIMIT 0,200 
```

作为一个新的 SQL 程序员，我正在寻找如何在 MySQL 中执行循环。虽然在概念上看起来很简单，但我很难弄清楚如何实际设计 SQL 语句以在循环中实际运行它。

我的朋友告诉我，你应该使用循环的原因是，在处理非常大的数据集或处理非常大的查询请求时，对 SQL 数据集使用“post”运算符会对性能产生负面影响。

这对我来说很有意义，所以我正在寻找一些帮助来理解如何做到这一点，以及更多关于为什么子查询被认为是不好的做法的信息。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:47:20.887

你能解释一下“for”和“loop”是什么意思吗

在 SQL 中，您会使用 Select 字符串获得大量数据，这些数据必须在您的代码中使用（php、c、java ...），然后您从一行到另一行数据集到数据集，直到完成

性能提示：[SQL 连接与 SQL 子查询（性能）？](https://stackoverflow.com/questions/3856164/sql-joins-vs-sql-subqueries-performance)

提示：您应该按 c.e_id 分组（按数字分组更快）

# debugging - Visual Studio 2008 调试问题

> ID：11127353
> 
> 赞同：0
> 
> 时间：2012-06-20T20:07:12.560
> 
> 标签：debugging, visual-studio-2008

每次我尝试调试我的代码时，我都会收到错误消息

程序“[2840] link.exe: Native”已退出，代码为 1171 (0x493)。

代码中有错误，但如果没有正常运行的调试器，我无法修复它。我如何解决它？

# android - android“state_pressed”仅在第二次尝试时有效

> ID：11127355
> 
> 赞同：0
> 
> 时间：2012-06-20T20:07:24.870
> 
> 标签：android

我有一个菜单按钮和一个动作类，用于更长的 state_pressed 状态（0,5 秒）。这么久一切正常，但出现了一个问题：

我必须第一次按下按钮，state_pressed 第一次不起作用，然后第二次尝试我的代码正常工作，state_pressed 的持续时间为 0.5 秒。

我怎样才能让它在第一次印刷机上工作？我认为 tehre 是 hover.xml 文件和 setBackgroundDrawable 结合的问题？

提前感谢大家的帮助！

**这是我的 hover.XML 可绘制对象**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_focused="false" 
      android:state_pressed="true" 
      android:drawable="@drawable/buttonstyle_pressed" />

<item android:drawable="@drawable/buttonstyle" /> 
```

**这是我的java代码**

```
 Button menubutton_start;

    menubutton_start = (Button) FindViewById(R.id.menustart);

 menubutton_start.setOnClickListener(new View.OnClickListener() {

 public void onClick(View v) {     

  menubutton_start.setBackgroundDrawable(getResources().getDrawable(R.drawable.hover));

   final Handler handler = new Handler();            

        handler.postDelayed(new Runnable() {

              public void run() {

               Intent myIntent = new Intent(GameActivity.this, NextActivity.class);
               GameActivity.this.startActivity(myIntent);

                    }

                }, 500);  // end of Handler new Runnable()

    }  // end of OnClick()

});  // end of setOnClickListener 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:30:02.780

如果您将该样式应用于按钮，则按下状态将自动发生。

您根本不必在代码中手动设置按下状态。

# sql - 在两个可为空的 FK 之间添加 SQL XOR 约束

> ID：11127356
> 
> 赞同：12
> 
> 时间：2012-06-20T20:07:28.623
> 
> 标签：sql, sql-server-2005, database-design

我想在表中定义两个可为空的 FK 之间的约束，如果一个为空，则另一个需要一个值，但两者都不能为空，并且两者都不能有值。逻辑是派生表从任一 FK 表中继承数据以确定其类型。另外，为了有趣的奖励积分，这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T20:34:58.850

实现它的一种方法是简单地写下“异或”的实际含义：

```
CHECK (
    (FK1 IS NOT NULL AND FK2 IS NULL)
    OR (FK1 IS NULL AND FK2 IS NOT NULL)
) 
```

但是，如果您有很多 FK，上述方法很快就会变得笨拙，在这种情况下，您可以执行以下操作：

```
CHECK (
    1 = (
        (CASE WHEN FK1 IS NULL THEN 0 ELSE 1 END)
        + (CASE WHEN FK2 IS NULL THEN 0 ELSE 1 END)
        + (CASE WHEN FK3 IS NULL THEN 0 ELSE 1 END)
        + (CASE WHEN FK4 IS NULL THEN 0 ELSE 1 END)
        ...
    )
) 
```

*顺便说一句，该模式有合法用途，例如[这个](https://stackoverflow.com/questions/9174200/how-to-create-multiple-one-to-ones/9178524#9178524)（尽管由于缺乏延迟约束而不适用于 MS SQL Server）。在您的特定情况下是否合法，我无法根据您迄今为止提供的信息来判断。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:15:02.887

您可以使用[检查约束](http://msdn.microsoft.com/en-us/library/ms188066%28v=sql.90%29.aspx)：

```
create table #t (
   a int,
   b int);

alter table #t add constraint c1 
check ( coalesce(a, b) is not null and a*b is null );

insert into #t values ( 1,null);

insert into #t values ( null ,null); 
```

跑步：

```
The INSERT statement conflicted with the CHECK constraint "c1". 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T20:26:30.293

另一种方法是在过程中定义此检查约束。在派生表中插入记录之前，应满足约束条件。否则插入失败或返回错误。

# python - 从此 XML 文件中提取数据的最有效方法

> ID：11127361
> 
> 赞同：2
> 
> 时间：2012-06-20T20:07:42.083
> 
> 标签：python, xml, parsing, lxml, elementtree

XML 文件示例

```
<GateDocument> 
  <GateDocumentFeatures>
    ...
  </GateDocumentFeatures>
  <TextWithNodes>
    <Node id="0"/>
    MESSAGE SET
    <Node id="19"/> 
    <Node id="20"/>
    1\. 1/1/09 - sample text 1
    <Node id="212"/>
    sample text 2
    <Node id="223"/>
    sample text 3
    ...
    <Node id="160652"/>
  </TextWithNodes>
  <AnnotationSet></AnnotationSet>
  <AnnotationSet Name="SomeName">
    ...
  </AnnotationSet>
</GateDocument> 
```

刚开始，这是我第一次用 Python 编码和处理 XML，如果我错过了非常明显的东西，非常抱歉！

我的目标是在特定节点 id 处提取示例文本。

第一次尝试 - 我使用了 minidom，由于这个原因，它没有给我正确的方法来处理提取（http://stackoverflow.com/questions/11122736/extracting-text-from-xml-node-with-minidom）自闭合标签中节点 ID 的奇怪格式。

第二次尝试 - 我在查看 lxml 时接受了建议，我已成功将文本提取为如下内容：

```
['\n\t\t','n\t\tMESSAGE SET\n\t\t','\n\t\t','\n\t\t1\. 1/1/09 - sample text 1,....,'\n\t'] 
```

通过一些清理，我想我可以得到很好的文本，但是，我丢失了关联的节点 id 值。

使用代码：

```
from lxml import etree
from StringIO import StringIO
xmlfile = ('C:\...AnnotationsXML.xml')
xmldoc = etree.parse(xmlfile)  
print xmldoc.xpath("//TextWithNodes/text()") 
```

所以我想我的问题是：

1.  有没有办法在没有 \n\t\t 的情况下提取上述内容？我读到它是空间格式（即制表符），但我不确定去了哪里`<Node id = 0>`。
2.  是否有更好或更有效的方法来提取此文件？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:23:27.450

```
In [1]: from lxml import etree

In [2]: tree = etree.parse('awful.xml')

In [3]: data = {int(node.attrib['id']): node.tail.strip()
   ...: for node in tree.xpath('//TextWithNodes/Node') if node.tail.strip()}

In [4]: data
Out[4]: 
{0: 'MESSAGE SET',
 20: '1\. 1/1/09 - sample text 1',
 212: 'sample text 2',
 223: 'sample text 3'} 
```

[`strip`](http://docs.python.org/library/stdtypes.html#str.strip)用于摆脱标签后的文本之`\t\n`类的东西。[`tail`](http://lxml.de/tutorial.html#the-element-class)

# excel - 创建一个带有“无序日期”和剩余工作量的 excel 燃尽图

> ID：11127369
> 
> 赞同：1
> 
> 时间：2012-06-20T20:08:12.057
> 
> 标签：excel, date, backlog, burndowncharts

我正在尝试将我的数据转换为燃尽图来监控我的项目进度。我的 excel 表的内容被简化了，看起来像这样：

ID - 描述。- 故事点 (SP) - 剩余 SP - 计划剩余 SP - 完成日期

布拉1; 布拉; 20; 100; 100; 01-jan-12
bla2; 布拉; 20; 80; ""; 02-jan-12
bla3; 布拉; 15; 65; ""; 01-jan-12 <-- 注意，日期不必按逻辑排序！
bla4; 布拉; 30; 35; ""; 12-jan-12
..
..
bla5; 布拉; 5个；0; 0; 2012 年 2 月 31 日

基本上，我知道项目的开始日期和项目的结束日期。我大概知道完成这个项目需要付出多少努力。所有需要完成的项目在实际完成时都会得到一个时间戳（因此，日期中的顺序是不保证的）。我想在燃尽图中可视化进度，其中日期开始到日期结束绘制在 X 上，剩余工作量和计划剩余工作量绘制在 Y 上。

我无法在 Excel 中获取此图表。我用的是2010，我是office的普通用户。谁能帮帮我？

提前非常感谢！

干杯，

巴斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:16:07.013

您应该能够在 Excel 中制作这样的图表。这将相当简单。

您需要两列中的数据，每列上方都有标题。然后突出显示这两列并转到插入>折线图。

wiki 上的示例燃尽图看起来像是在这里用 excel 本身制作的：

[http://en.wikipedia.org/wiki/Burn_down_chart](http://en.wikipedia.org/wiki/Burn_down_chart)

希望这可以帮助！

# php - 使用 AJAX 和 XMLHttpResponse 响应 JSON

> ID：11127372
> 
> 赞同：0
> 
> 时间：2012-06-20T20:08:17.150
> 
> 标签：php, javascript, json, xmlhttprequest

我不是 100% 如何表达这个问题。我有一个类似的 URL 请求

```
example.php?miscData=JSON_FILE_NAME 
```

现在 JSON_FILE_NAME 包含该文件独有的数据。我有类似于下面的 example.php 设置

```
 xmlHttpReq.open('GET', strURL, true);
    xmlHttpReq.onload = function(e) {
        var data = JSON.parse(this.response);
    }
    xmlHttpReq.send(); 
```

请求文件具有处理调用成功的功能，设置如下

```
function(retData, textStatus, xhr) { } 
```

我预计 retData 将包含 JSON 数据 {"name":"Dominic"} 等......但它没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:43:53.240

[您来自http://pastebin.com/c7h8V9JK](http://pastebin.com/c7h8V9JK)的服务器端代码正在响应 HTML 页面，而不是 JSON 响应。PHP 之外的代码只不过是 HTML。所以很自然，当请求页面时，服务器将返回您放在该 php 脚本之外的 HTML。

请记住，就从服务器发送和接收数据而言，最基本的 AJAX 请求并没有什么特别之处。想象一下，您在最喜欢的选项卡式浏览器中打开了另一个选项卡，并且该选项卡正在导航到您的 AJAX 请求正在导航到的 URL。这就是您发出 AJAX 请求时发生的情况。

如果您尝试从 example.php 获取 JSON 数据，请首先从该文件中删除所有 HTML，然后使用 JSON 序列化程序序列化您尝试获取的数据。

[使用php编码json？](https://stackoverflow.com/questions/7531965/encode-json-using-php)

# android - Android - 如何禁用对 ListView 项目的第二次点击

> ID：11127375
> 
> 赞同：0
> 
> 时间：2012-06-20T20:08:35.603
> 
> 标签：android, listview, click

我创建了一个简单的 Android 测验应用程序。当我单击 ListView 项目时，应用程序运行正常。但是，如果我双击同一个项目，应用程序就会崩溃。第一次单击后如何禁用项目单击？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:13:58.457

仅从给出的模糊信息来看，听起来您在第一次单击时正在消耗一些东西，而在下次单击时，您会得到一个空值。然而，这纯粹是猜测。请根据每个人的评论添加代码和错误。

# json - org.codehaus.jackson.map.JsonMappingException：无法从 JSON 字符串实例化类型 [简单类型，类 models.Job] 的值

> ID：11127376
> 
> 赞同：5
> 
> 时间：2012-06-20T20:08:37.110
> 
> 标签：json, rest, playframework, jackson

我使用 playframework 并尝试将一些 json 反序列化为 java 对象。它工作得很好，除了模型中的关系。我得到了以下异常

> 在此处输入代码org.codehaus.jackson.map.JsonMappingException：无法从JSON字符串实例化类型[简单类型，类models.Job]的值；没有单字符串构造函数/工厂方法（通过引用链：models.Docfile["job"]）

我认为杰克逊与 play 结合可以做到这一点：

这是json

```
{"name":"asd","filepath":"blob","contenttype":"image/png","description":"asd","job":"1"} 
```

这是我的代码，没什么特别的：

```
public static Result getdata(String dataname) {
        ObjectMapper mapper = new ObjectMapper();
        try {
            Docfile docfile = mapper.readValue((dataname), Docfile.class);
            System.out.println(docfile.name);
            docfile.save();

        } catch (JsonGenerationException e) {

            e.printStackTrace();

        } catch (JsonMappingException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }

        return ok();
    } 
```

希望对我有帮助，谢谢马库斯

更新：

文档文件豆：

```
package models;

import java.util.*;

import play.db.jpa.*;
import java.lang.Object.*;
import play.data.format.*;
import play.db.ebean.*;
import play.db.ebean.Model.Finder;
import play.data.validation.Constraints.*;
import play.data.validation.Constraints.Validator.*;

import javax.persistence.*;

import com.avaje.ebean.Page;

@Entity
public class Docfile extends Model {

    @Id
    public Long id;

    @Required
    public String name;

    @Required
    public String description;

    public String filepath;

    public String contenttype;

    @ManyToOne
    public Job job;

    public static Finder<Long,Docfile> find = new Model.Finder(
            Long.class, Docfile.class
            );

    public static List<Docfile> findbyJob(Long job) {
        return find.where()
                .eq("job.id", job)
                .findList();
    }

    public static Docfile create (Docfile docfile, Long jobid) {
        System.out.println(docfile);
        docfile.job = Job.find.ref(jobid);
        docfile.save();
        return docfile;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:53:01.510

您可以更改 JSON 以描述您的“工作”实体：

```
{
   "name":"asd",
   "filepath":"blob",
   "contenttype":"image/png",
   "description":"asd",
   "job":{
      "id":"1",
       "foo", "bar"
   }
} 
```

或者您在 Job bean 中创建一个带有 String 参数的构造函数：

```
public Job(String id) {
// populate your job with its id
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-24T21:04:09.350

限时+ee: +jax-rs && +persistence, +gson; 我已经解决了它：

```
@Entity
@XmlRootElement
@Table(name="element")
public class Element implements Serializable {
    public Element(String stringJSON){
        Gson g = new Gson();
        Element a = g.fromJson(stringJSON, this.getClass());
        this.setId(a.getId());
        this.setProperty(a.getProperty());
    }

    public Element() {}
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;
    ...
} 
```

# c# - 如何通过动态反射在运行时创建 RelayCommand 的实例？

> ID：11127377
> 
> 赞同：1
> 
> 时间：2012-06-20T20:08:37.183
> 
> 标签：c#, reflection, dynamic, mvvm, runtime

我正在 WPF 中构建一个 MVVM 应用程序，并将一个 Menu 绑定到一个 MenuItem 模型。我的 MenuItem 类具有以下属性：

```
public class MenuItem
{
    private List<MenuItem> _Items;

    public MenuItem(string header, ICommand command)
    {
        Header = header;
        Command = command;
    }

    public MenuItem()
    {

    }

    public string Header { get; set; }

    public List<MenuItem> Items
    {
        get { return _Items ?? (_Items = new List<MenuItem>()); }
        set { _Items = value; }
    }

    public ICommand Command { get; set; }
    public string CommandName { get; set; }
    public object Icon { get; set; }
    public bool IsCheckable { get; set; }
    public bool IsChecked { get; set; }
    public bool Visible { get; set; }
    public bool IsSeparator { get; set; }
    public string ToolTip { get; set; }
    public int MenuHierarchyID { get; set; }
    public int ParentMenuHierarchyID { get; set; }
    public string IconPath { get; set; }
} 
```

此 MenuItem 模型类由来自数据库的数据填充。在这种情况下，从 DB 填充的唯一属性是 CommandName。

假设它用字符串“OpenFile”填充它

**在这里编辑** 我的 MenuViewModelConstructor：

```
 public MenuViewModel(MainViewModel _MainViewModel)
    {
       ....
    } 
```

它依赖于 MainViewModel，因为这是 OpenFile 和 CanOpenFile 方法所在的地方。

我的 MenuViewModel 有一个注册命令的方法，如下所示：

```
 private void RegisterMenuCommand(MenuItem item)
        {
            if(!string.IsNullOrEmpty(item.CommandName))
            {
                //How can I create a new RelayCommand instance from
                //my CommandName string???? 
                //e.g. item.Command = new RelayCommand(_MainViewModel.<item.CommandNameHere>, _MainViewModel."Can" + <item.CommandNameHere>
                item.Command = new RelayCommand(_MainViewModel.OpenFile, _MainViewModel.CanOpenFile);
            }

            foreach(MenuItem child in item.Items)
            {
                RegisterMenuCommand(child);
            }
        } 
```

顺便说一下，R​​elayCommand 的签名是：

```
public RelayCommand(Action execute, Func<bool> canExecute) 
```

是否可以使用反射或动态 lambda 或类似的东西实例化我的 RelayCommand，以便我可以在运行时动态使用来自数据库的命令字符串？什么是最优化的方式？

**编辑：解决方案** 感谢@Nathan 为我指出正确的解决方案，这是我的工作方法：

```
 private void RegisterMenuCommand(MenuItem item)
    {
        if(!string.IsNullOrEmpty(item.CommandName))
        {
            MethodInfo method1 = _MainViewModel.GetType().GetMethod(item.CommandName);
            Delegate d1 = Delegate.CreateDelegate(typeof(Action),_MainViewModel, method1);

            MethodInfo method2 = _MainViewModel.GetType().GetMethod("Can" + item.CommandName);
            Delegate d2 = Delegate.CreateDelegate(typeof (Func<bool>),_MainViewModel, method2);

            item.Command = new RelayCommand((Action)d1, (Func<bool>)d2);
        }

        foreach(MenuItem child in item.Items)
        {
            RegisterMenuCommand(child);
        }
    } 
```

我正在使用 .NET 4.0

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:44:16.880

我在 Google 上快速搜索了使用反射创建委托，发现这篇非常好的文章[How to: Hook Up a Delegate Using Reflection](http://msdn.microsoft.com/en-us/library/ms228976.aspx)

我在本地机器上创建了一个快速测试并让它工作

```
MethodInfo miHandler = typeof(MainWindow).GetMethod("OpenCommandHandler", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Public);
Delegate d = Delegate.CreateDelegate(typeof(Action<object>), this, miHandler);
btnTest.Command = new DelegateCommand((Action<object>)d); 
```

我正在使用的视图在哪里（`this`MainWindow ）`CreateDelegate`

你必须稍微调整一下才能让你的工作，但我想它会是这样的：

```
var obj = <object containing your method>

MethodInfo miHandler = typeof(obj).GetMethod(item.CommandName, BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Public);
Delegate openDelegate = Delegate.CreateDelegate(typeof(Action), obj, miHandler);
item.Command = new RelayCommand((Action)openDelegate, ...); 
```

# java - Quartz - 'JobSchedulingDataLoaderPlugin_jobInitializer' 的 JobExecutionException

> ID：11127379
> 
> 赞同：4
> 
> 时间：2012-06-20T20:08:47.727
> 
> 标签：java, scheduled-tasks, quartz-scheduler

我遇到了 Quartz 1.8.4 的问题。“问题”（除了弄乱我的日志文件外，似乎对 Quartz 没有影响）如下所示。

问题：为什么会抛出这个异常？

```
Jun 20, 2012 12:33:29 PM org.quartz.impl.jdbcjobstore.JobStoreSupport storeTrigger
INFO: note: volatile triggers are effectively non-volatile in a clustered environment.
Jun 20, 2012 12:33:29 PM org.quartz.plugins.history.LoggingJobHistoryPlugin jobToBeExecuted
INFO: Job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz_jobs_xml fired (by trigger JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz_jobs_xml) at:  12:33:29 06/20/2012
Jun 20, 2012 12:33:29 PM org.quartz.core.JobRunShell run
INFO: Job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz_jobs_xml threw a JobExecutionException: 
org.quartz.JobExecutionException: FileScanListener named 'JobSchedulingDataLoaderPlugin_jobInitializer' not found in SchedulerContext
    at org.quartz.jobs.FileScanJob.execute(FileScanJob.java:83)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549)
Jun 20, 2012 12:33:29 PM org.quartz.plugins.history.LoggingJobHistoryPlugin jobWasExecuted
WARNING: Job JobSchedulingDataLoaderPlugin.JobSchedulingDataLoaderPlugin_jobInitializer_quartz_jobs_xml execution failed at  12:33:29 06/20/2012 and reports: FileScanListener named 'JobSchedulingDataLoaderPlugin_jobInitializer' not found in SchedulerContext
org.quartz.JobExecutionException: FileScanListener named 'JobSchedulingDataLoaderPlugin_jobInitializer' not found in SchedulerContext
    at org.quartz.jobs.FileScanJob.execute(FileScanJob.java:83)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549) 
```

石英属性文件：

```
#============================================================================
# Configure Main Scheduler Properties  
#============================================================================

org.quartz.scheduler.instanceName = AcertJobScheduler
org.quartz.scheduler.instanceId = AcertJobScheduler
org.quartz.scheduler.skipUpdateCheck = true

#============================================================================
# Configure ThreadPool  
#============================================================================

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
org.quartz.threadPool.threadPriority = 5
org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread = true

#============================================================================
# Configure JobStore  
#============================================================================

org.quartz.jobStore.misfireThreshold = 60000

org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.oracle.OracleDelegate
org.quartz.jobStore.useProperties = false
org.quartz.jobStore.dataSource = myDS
org.quartz.jobStore.tablePrefix = QRTZ_

org.quartz.jobStore.isClustered = true
org.quartz.jobStore.clusterCheckinInterval = 20000

#============================================================================
# Configure Datasources  
#============================================================================
<sanitized>

#============================================================================
# Configure Plugins 
#============================================================================
org.quartz.plugin.triggHistory.class = org.quartz.plugins.history.LoggingJobHistoryPlugin

org.quartz.plugin.jobInitializer.class = org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin
org.quartz.plugin.jobInitializer.fileNames = quartz_jobs.xml
org.quartz.plugin.jobInitializer.failOnFileNotFound = true
org.quartz.plugin.jobInitializer.scanInterval = 0
org.quartz.plugin.jobInitializer.wrapInUserTransaction = false 
```

quartz_jobs.xml 文件：

```
<?xml version='1.0' encoding='utf-8'?>
<job-scheduling-data xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
  version="1.8">

<!-- SAP ACERT Synchronization Job-->
<schedule>
        <job>
            <name>AcertSapImport</name>
            <group>SapImport</group>

            <description>Synchronize the staff information from the HR SAP database
            to the ACERT users table; Locations, and org tree</description>
            <job-class>my.company.acert.sap_import.SapAcertSyncJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>myTrigger</name>
                <group>SapImport</group>
                <job-name>AcertSapImport</job-name>
                <job-group>SapImport</job-group>
                <cron-expression>0 0 1 * * ?</cron-expression>
            </cron>
        </trigger>

        <job>
            <name>Nightly Course Maintenance</name>
            <group>Acert Maintenance</group>
            <description>Activates and deactivates courses and course versions based 
            on their started and end dates.</description>
            <job-class>my.company.acert.job.CourseMaintenanceJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>courseTrigger</name>
                <group>Acert Maintenance</group>
                <job-name>Nightly Course Maintenance</job-name>
                <job-group>Acert Maintenance</job-group>
                <cron-expression>0 0 2 * * ?</cron-expression>
            </cron>
        </trigger>
        <job>
            <name>Historic Backup</name>
            <group>Acert Maintenance</group>
            <description>Runs the stored procedure to take a snapshot of acert at this date.</description>
            <job-class>my.company.acert.job.HistoricBackupJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>historicBackupTrigger</name>
                <group>Acert Maintenance</group>
                <job-name>Historic Backup</job-name>
                <job-group>Acert Maintenance</job-group>
                <cron-expression>0 0 3 1 * ?</cron-expression>
            </cron>
        </trigger>
        <job>
            <name>Parse XMLs for OrgUnit Trees</name>
            <group>Org Tree</group>

            <description>Parses the xml files for the org tree and reporting org tree</description>
            <job-class>my.company.acert.sap_import.ParseTreeXMLJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>parseOrgTreeTrigger</name>
                <group>Org Tree</group>
                <job-name>Parse XMLs for OrgUnit Trees</job-name>
                <job-group>Org Tree</job-group>
                <cron-expression>0 0 2 1 * ?</cron-expression>
            </cron>
        </trigger>
        <job>
            <name>Notify Expiry Courses</name>
            <group>Notifications</group>

            <description>Send email notification to supervisor and learners of current and upcoming course expirations.</description>
            <job-class>my.company.acert.job.NotifyCourseExpiryJob</job-class>
        </job>
        <trigger>
            <cron>
                <name>notifyExpiryCoursesTrigger</name>
                <group>Notifications</group>
                <job-name>Notify Expiry Courses</job-name>
                <job-group>Notifications</job-group>
                <cron-expression>0 0 3 * * ?</cron-expression>
            </cron>
        </trigger>

</schedule>
</job-scheduling-data> 
```

我在 Tomcat 7.0.27 上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T06:06:40.673

我调试了代码并发现，当在调度程序上下文中找不到侦听器名称时会发生此异常。简而言之，请查看您要调用的类文件是否存在于类路径中，并且它们的路径是否在属性文件中正确设置。一个简单的拼写错误可能会导致此异常。一种简单的方法是首先只安排一个实例以查看它是否在没有警告的情况下工作，然后添加另一个实例并查看是否有警告等等。

```
 FileScanListener listener = (FileScanListener)schedCtxt.get(listenerName);

  if(listener == null) {
        throw new JobExecutionException("FileScanListener named '" + 
                    listenerName + "' not found in SchedulerContext");
  } 
```

希望能帮助到你。

# php - 如何检查 $max_viewers 是否大于 $current_viewers？

> ID：11127381
> 
> 赞同：0
> 
> 时间：2012-06-20T20:08:51.867
> 
> 标签：php, operators

我有一个脚本，可以在各种直播频道处于活动状态时更新它们的信息。我想检查 $max_viewers 是否大于 $current_viewers。

在这种情况下，我不需要采取行动，但是如果 $current_viewers 较大，我想更新数据库中的 max_viewers 字段。

我从研究中尝试了几种方法和方法，但是我的 PHP 是有限的并且是自学的，我认为我误解了我的陈述的结果。

我努力了：

```
$current_viewers > $max_viewers
$current_viewers >= $max_viewers 
```

但是这些似乎总是更新 max_viewer 计数，或者如果反转则永远不会。因此，我认为我误解了这些是如何工作的以及它们返回什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:11:16.053

你应该有类似的东西：

```
$max_viewers = 4;
$current_viewers = 2;

if ($current_viewers > $max_viewers) {
    // Current viewers has exceeded the maximum
    echo 'exceeded';
} else {
    // Current viewers is either less than or equal to the maximum
    echo 'not exceeded';
} 
```

在上面的示例中，`not exceeded`将显示。对于您的示例，您可能希望替换`echo 'exceeded';`为更新数据库记录的调用。

# pdf - 隐藏/更改经典 ASP 中的虚拟路径

> ID：11127386
> 
> 赞同：0
> 
> 时间：2012-06-20T20:09:00.743
> 
> 标签：pdf, asp-classic, virtual-path

我们有一个需要用户名和密码的网站。登录后，用户可以在 Web 浏览器中选择指向 PDF 的链接。一旦发生这种情况，他们就可以看到 PDF 的完整 URL 路径，他们可以将路径复制并粘贴到不同的浏览器中，而无需登录，或者将地址发送给其他人查看。

我问一个同事，所以我不太确定需要什么，但他们想将它从“documents/customerlist.pdf”更改为“documents/info.asp”（不确定文件类型是什么应该是，也许只是“文档/信息”？）我认为这就是目标。这可能吗？如果有人能指出我正确的方向，我们可能会弄清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:31:07.383

我应该认为你可以在 ASP 中做到这一点。您需要通过 ASP 页面动态交付 PDF，该页面检测用户的会话并仅在经过适当身份验证时才提供数据（因此将 URL 复制到不同的浏览器/机器将导致 404 或访问被拒绝，如你希望）。您需要从文件中读取数据并将其二进制写入浏览器，并为 mime 类型、内容长度等设置 HTTP 标头。

我会从在 URL 上提供它开始`pdf.asp?file=customerlist`，但您可以稍后尝试将其更改为更易读的内容 ( `docs/customerlist.php`)。您需要在此处查看 URL 重写。

所以，这是一般的方法。如果您围绕这些主题进行网络搜索（“ASP 服务二进制文件”、“ASP URL 重写”），您肯定会获得大量示例。

# objective-c - 找出哪个类正在调用函数 - iOS，目标 C

> ID：11127388
> 
> 赞同：0
> 
> 时间：2012-06-20T20:09:12.507
> 
> 标签：objective-c, ios5

我在 A 类中有一个函数 - myFunc()。还有多个其他类调用此函数。

我如何能够找出在特定实例中哪个类正在调用 myFunc()？

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:18:47.987

使用访客模式

1.  让每个调用类实现一个通用协议，该协议定义您希望实现的行为的接口。
2.  将协议作为参数添加到 myFunc。
3.  调用 myFunc() 时，将**self**指定为参数。
4.  myFunc 现在可以在不知道其他特定类的情况下调用任何协议方法。

这样您就可以遵循封装的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:21:03.517

从概念上讲，这些信息在堆栈中是可用的，但并不容易获得。大多数解决方案将涉及创建异常以捕获堆栈跟踪，然后读取跟踪。我还没有尝试过，但它可能会起作用：

```
void myFunc()
{
    NSArray *stack = [NSThread callStackSymbols];
    // I have no idea if the current function call is at the 0 or last position
    // of the array. Experiment here!
} 
```

相关文档：[NSThread 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)

请注意，如果您希望您的函数根据调用者的不同而表现不同，请**不要这样做**。它很脆弱（不能保证返回的格式是否`callStackSymbols`会改变）。

**最好将参数简单地传递给您的函数。**如果您正在处理 C 函数回调 API，通常有一个`void *`“context”或“info”参数可用于传入任意指针。这可能是指向您的对象的指针。

# mysql - 在 MySQL 中查找有关重复电子邮件的统计信息

> ID：11127392
> 
> 赞同：1
> 
> 时间：2012-06-20T20:09:46.367
> 
> 标签：mysql, sql

我需要在我的数据库表中查询有关重复值的统计信息。例如，假设我有一个电子邮件字段，并且多行可以有相同的电子邮件。我知道想知道的是*多少个地址*被重复*了多少次*。换句话说：“908 封邮件重复 10 次，1783 封邮件重复 9 次”等等。

```
Repeated       # of Emails
10             908
9              1783 
```

我不需要查看实际的电子邮件地址，只需查看这些统计信息。

知道我有这个查询，它也检索电子邮件地址：

```
select email_address,
count(email_address) as NumberOccurrences
from table_user_info
group by email_address
having ( count(email_address) > 1 ) 
```

我如何对这些结果进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:12:20.250

`COUNT()`带有子查询的聚合也返回聚合将`COUNT()`提供此功能。子查询对每个电子邮件地址进行分组和计数，如 中`abc@example.com - 10`，然后外部查询按子查询返回的重复次数进行计数和分组，丢弃实际的电子邮件地址。

```
SELECT
  repeated,
  COUNT(*) AS numemails
FROM (
  SELECT 
     email,
     COUNT(*)
  FROM emails
  GROUP BY email
) emailcounts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:18:25.377

```
select email_address,
       count(email_address) as NumberOccurrences
from table_user_info
group by email_address
having count(*) > 1 
```

# asp.net - LinkBut ton 未正确触发

> ID：11127393
> 
> 赞同：1
> 
> 时间：2012-06-20T20:09:56.323
> 
> 标签：asp.net, linkbutton

我很想使这段代码正常工作。我有一个添加到面板的简单链接按钮。当我点击链接时，就像触发了某些东西（整个页面刷新并且我的链接按钮消失了）但是当我调试它时，我从来没有进入我的 DownloadItems 函数。

```
LinkButton linkTest = new LinkButton();
linkTest.ID = "ID";
linkTest.Click += new EventHandler(DownloadItems);
linkTest.Text = "Test"; 
```

在另一页中，一切都很好，但我不能指望它：s

# vim - 在 Windows XP 中“注册”GVim

> ID：11127399
> 
> 赞同：0
> 
> 时间：2012-06-20T20:10:19.923
> 
> 标签：vim, windows-xp

*这可能在这里与题外话接壤，但在 SuperUser 上并没有很多人使用 GVim，而不是在这里，所以我把它留在这里。*

问题很简单——我使用的是 GVim 7.3。从*vim.org*，像往常一样以存档二进制文件（两个存档文件）的形式下载它并替换旧版本。但是，我无法让 Windows*识别*它并将文件扩展名关联到它。

从 Windows 资源管理器转到*.py*文件，在其目录中使用 ... / Browse / gvim.exe 打开，然后...*什么也没有。*就像从未发生过一样。

有谁知道可能导致这种行为的原因是什么？必须手动从 Vim 中打开每个文件非常烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T14:21:33.033

我放弃了通过注册表尝试各种技巧，但这个解决方案对我来说很好。我可以补充一下，我在 Windows 7 上遇到了同样的问题。由于 Windows 似乎能够很好地与 vim.exe 进行关联，而且这显然与文件名相关，所以我将 vim.exe 移走vim.ex$ 并将 gvim.exe 复制到 vim.exe。解决这个愚蠢问题的廉价而简单的方法，我不能说我曾经故意使用 vim.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:45:11.723

这不能回答您的问题，但它是从上下文菜单中使用 gvim 进行编辑的另一种方式。

使用以下内容创建一个 .reg 文件（调整 gvim.exe 的路径）并执行它。然后，每当您在资源管理器中右键单击文件时，您都会有一个“使用 GVIM 打开”选项。

```
REGEDIT4 

[HKEY_CLASSES_ROOT\Unknown\shell] 
@="Open with GVIM" 

[HKEY_CURRENT_USER\SOFTWARE\Classes\*\shell] 

[HKEY_CURRENT_USER\SOFTWARE\Classes\*\shell\Open with &GVim] 
@="Open with GVIM" 

[HKEY_CURRENT_USER\SOFTWARE\Classes\*\shell\Open with &GVim\command] 
@="C:\\Vim\\gvim.exe \"%1\"" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:22:10.153

我认为 vim.org 的默认安装程序（“自安装可执行文件”）允许您注册 shell 关联；这意味着您会在资源管理器的每个上下文菜单中获得一个“使用 vim 打开”条目。你没用过这个文件吗？

我正在看[这个页面](http://www.vim.org/download.php)，我正在考虑[这个下载](ftp://ftp.vim.org/pub/vim/pc/gvim73_46.exe)。

# php - PHP：保留 System() 的输出格式

> ID：11127403
> 
> 赞同：1
> 
> 时间：2012-06-20T20:10:43.820
> 
> 标签：php, formatting, system

如何获得控制台上显示的命令输出？

```
<?php
ob_start();
system('faxstat -s' , $retval);
$last_line = ob_get_contents();
ob_end_clean();
preg_match('/^32.+\s{9}(.*)/m', $last_line, $job_id);
?> 
```

在控制台中，输出如下：

```
JID  Pri S  Owner Number       Pages Dials     TTS Status
36   127 R www-da 0xxxxxxxx     0:1   0:12         
32   127 R www-da 0xxxxxxxx     0:1   0:12         
35   127 R www-da 0xxxxxxxx     0:1   0:12 
```

但在 PHP 中，的回声`$last_line`是这样的：

> JID Pri S Owner Number Pages Dials TTS Status 36 127 R www-da 0xxxxxxxx 0:1 0:12 32 127 R www-da 0xxxxxxxx
> 0:1 0:12 35 127 R www-da 0xxxxxxxx 0:1 0:12

**注意：**我不想打印输出，所以不需要`<pre>`标签。我想要`preg_match`它。因为它丢失了格式，所以我的正则表达式没用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:27:50.190

您需要将[exec](http://www.php.net/manual/en/function.exec.php)与通过引用传递给它的变量一起使用以捕获您的输出线。

```
$lastLine = exec('df -h',$output); 
```

exec 只返回它遇到的最后一行作为它的返回值，你会发现在你的 $output 参数中执行的命令 exec 的完整输出（你[通过引用](http://www.php.net/manual/en/language.references.pass.php)提供的变量exec() 转换为一个数组并填充，请参阅也[PHP：参考解释](http://php.net/manual/en/language.references.php)）

例如

```
<?php
$lastLine = exec('df -h',$output);

print "\n$lastLine\n";
print_r($output); 
```

将打印

```
none                  990M     0  990M   0% /var/lock

Array
(
    [0] => Filesystem            Size  Used Avail Use% Mounted on
    [1] => /dev/sda1             145G  140G  5.8G  97% /
    [2] => none                  981M  668K  980M   1% /dev
    [3] => none                  990M  3.4M  986M   1% /dev/shm
    [4] => none                  990M  240K  989M   1% /var/run
    [5] => none                  990M     0  990M   0% /var/lock
) 
```

所以你可以看到 $lastLine 真的是命令打印的最后一行

我不明白为什么 shell_exec 或反引号对你不起作用，对不起。

现在为您的解析模式：

```
<?php

// was stil using your posted 'wrong output'
$output = "JID Pri S Owner Number Pages Dials TTS Status 36 127 R www-da 0xxxxxxxx 0:1 0:12 32 127 R www-da 0xxxxxxxx 
0:1 0:12 35 127 R www-da 0xxxxxxxx 0:1 0:12";

// we just strip the header out
$header = "JID Pri S Owner Number Pages Dials TTS Status ";

$headerless = str_replace($header,'',$output);

$pattern = '/([0-9]+)\s+([0-9]+)\s+([A-Z]+)\s+([^\s]+)\s+([^\s]+)\s+([0-9:]+)\s+([0-9:]+)/m'; // m to let it traverse multi-line

/*
  we match on 0-9 whitespace 0-9 WS A-Z 'Anything not WS' WS ANWS WS 0-9:0-9 WS 0-9:0-9
*/
preg_match_all($pattern,$headerless,$matches);
print_r($matches); 
```

这将为您提供所有单独的元素。显然，当您使用 exec 将其返回到数组中时，您不需要剥离标题以及所有这些，但我认为该模式应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:29:41.770

使用反引号运算符 (`) 应保留输出格式。

```
$lastline = `ls`; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:36:02.053

如果您不想输出任何内容，也可以使用`exec()`. 但是`$last_line`将只包含命令打印的实际最后一行。如果要处理整个输出，可以将其重定向到第二个参数为`exec()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:18:15.567

如果没有看到您用于匹配的正则表达式，很难说。我的猜测是您正在尝试匹配不在此转换字符串中的非打印字符。**尝试在\s**上进行匹配，这将查找多种类型的空白字符。

# php - 记住我与会话超时有何不同

> ID：11127405
> 
> 赞同：6
> 
> 时间：2012-06-20T20:10:48.953
> 
> 标签：php, session, cakephp, cookies

我在 CakePHP 中构建了一个应用程序，它允许用户登录并做一些事情，我认为默认情况下它让用户登录大约 24 小时。这由会话/cookie处理，因为cookie也被创建......

1.) 那么，记住我会为聚会带来什么？所要做的就是创建另一个 cookie 设置超时并保持用户登录...但是默认情况下，此功能存在于每个应用程序中，会话对吗？但是我已经看到很多网站都在这样做，但我不明白为什么，因为会话开箱即用：/

2.) 即使用户继续使用网站，为什么会话也会过期？例如，如果我将其设置为 1 分钟，但每 30 秒刷新一次，它仍然会过期......但我在网站过期之前保持了活动状态，那么它怎么会过期？这很烦人，因为我的应用程序的有效期为 1 小时，但即使客户端使用该站点，它也会在 1 小时后过期，无论活动如何。

如果有人能回答这两个问题，那就太好了。

**更新：我已经为此创建了一个赏金，希望得到一个 CakePHP 专家来帮助解决这个问题。问题是会话在超时后过期，无论用户交互如何。我想做的是说我有一个持续 5 分钟的会话，并且用户每 30 秒回发一次，那么该会话在 5 分钟后仍然存在。目前情况并非如此……**

```
Configure::write('Session', array(
        'start' => true,
        'defaults' => 'php',
        'timeout' => 1,
        'cookieTimeout' => 1,
        'autoRegenerate' => true
    )); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:16:04.413

1.  它会带来的是，如果用户关闭浏览器并重新启动它，它仍然会自动登录。会话 cookie 不是这种情况，因为一旦关闭浏览器，此类 cookie 就会被删除。

2.  也许您每 30 秒访问一次的页面并未启动会话。在这种情况下，不使用会话机制，并且会话的到期日期不会重置为`now + 1 minute`。或者也许刷新只命中浏览器缓存，而不是服务器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T12:35:19.373

好的，让我们看看我是否可以抓住一些赏金（战利品？），同时也测试我的解释能力:)

所以让我们从#1 开始。

> 那么，记住我会为聚会带来什么？

这里需要区分的重要一点是“会话 cookie”和“记住我的 cookie”之间的区别。

由于 HTTP 是[无状态协议](http://en.wikipedia.org/wiki/Stateless_protocol)，因此会话 cookie 用于将多个请求绑定到单个用户。没有它，对您的网络服务器的每个请求都与其他所有请求完全无关。你能想象编写没有会话的应用程序吗？每个请求都是空的，没有登录，没有会话变量..每个请求都是未知用户！这基本上意味着*没有网络应用程序*！

现在，重要的是要意识到您**绝对不希望**您的会话持续 24 小时！在我的书中，这是一个非常大的禁忌。您的会话越短，它就越安全（至少在理论上）。为什么？因为[会话可以被劫持](http://en.wikipedia.org/wiki/Session_hijacking)！您的会话时间越长，被劫持的机会就越大。

例如，想象一个银行应用程序。另外，假设您的用户正在公共 PC 上访问它（我们的用户不是最聪明的）。所以他正在管理他的帐户或其他什么......他的电话响了。作为一个白痴，他接了电话就离开了，没有退出。您希望会话在 5 分钟、15 分钟还是 24 小时后到期？不了解你，但对于像网上银行这样重要的事情，我希望该会议尽快结束。

继续“记住我”部分。

那么会话 cookie 在单个会话中“连接”多个请求，“记住我”cookie 有什么作用？简单来说：它将多个*会话绑定*到一个用户。

您希望您的网站易于使用且令人愉悦，而登录几乎从来都不是一件令人愉快的事情。在做你真正想做的事情之前，你每次都必须做一件烦人的事情。记住我的 cookie 消除了这种烦恼。

您登录一次，选中该框，现在您始终在*该 PC 上*登录。这就是为什么您**永远不**应该在共享 PC 上使用“记住我”功能，因为下一个人将拥有您的身份。*合法地*。这就是为什么记住我 cookie 也是一种安全风险，它们可以像会话 cookie 一样被劫持。

最后，会话 cookie 和记住我 cookie 之间有一个关键区别：[过期](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)。会话 cookie 通常会在您关闭浏览器时（或在您明确指定的时间后）过期，而记住我的 cookie 通常会持续更长时间。

> 即使用户继续使用网站，会话如何过期？

为了简单起见，*他们没有*。您必须更改 cake（或您的应用程序）处理会话的方式。答案必须在您的代码中。您在这里没有得到满意答案的原因是我们看不到您的代码。您只需要调试和跟踪您的 cookie 会发生什么。JB Nizet 给了你一些建议。

我知道可能会在某些服务器上引起问题的一件事是 cake 的安全级别。尝试降低它在你的`/Config/core.php`：

```
Configure::write('Security.level', 'medium'); // or 'low' 
```

如果这没有帮助，那么答案肯定在您的代码中。我希望这个答案能把你推向正确的方向！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:02:36.230

1.) 会话 cookie 和“记住我”之间的区别在于会话 cookie 的过期日期为“0”。这意味着“浏览器关闭时过期”。而“记住我”则为同一个会话 cookie 提供了一个特定的到期日期，比如一个月后。这是唯一的区别。您可能会认为这种功能上的差异微不足道或毫无意义，但请考虑一下：在家里，我不想每天晚上都登录同一个该死的 Yahoo！帐户，而在工作中，我不想每次必须去小便时都删除我的 cookie。

2.) 即使在使用应用程序时，会话 cookie 也不会过期。您在哪里以及在什么情况下会看到这种行为？这是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T12:08:41.867

了解安全设置与超时的组合，这是非常重要的部分。当安全性设置为高级别时，会话可能会在您预期之前被终止。

在内部蛋糕会话存储的测试旁边。这样本地系统配置就不会影响它。可能是 PHP 设置覆盖了 Cake 中的设置。所以将会话存储设置为 Cake。这将创建一个包含您可以控制的会话的目录。

同样，它是服务器设置的组合，并且期望 Cake 的配置会覆盖这些服务器设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T12:35:42.883

如果我这样做：

```
 Configure::write('Session', array(
        'start' => true,
        'defaults' => 'cake',
        'timeout' => 1,
        'cookieTimeout' => 1,
        'autoRegenerate' => true
    ));

/**
 * The level of CakePHP security.
 */
    Configure::write('Security.level', 'high'); 
```

它解决了这个问题！所以会话持续 10 秒，但如果我每 2-3 秒刷新一次，那么我仍然会在 10 秒后登录，因为 cookie 正在刷新。因此，似乎我的托管环境的 PHP 设置正在/正在导致会话/cookie 过期......为什么会发生这种情况？

# layout - 如何计算 D3.js 中堆叠的移动折线图的基线？

> ID：11127406
> 
> 赞同：0
> 
> 时间：2012-06-20T20:10:50.393
> 
> 标签：layout, stack, d3.js

我正在尝试渲染移动流图。我有简单的折线图在移动，但堆栈让我失望。具体来说，基线设置为 y0=height，其中 height 是绘图的高度。下面的代码是我尝试合并 y0 但我遇到了解析错误。数据格式如下：

```
data = [
           {
               "name": "foo"
               "values": [ {time: 1, value: 23}, {time: 2, value: 32}, ... ]
           },
           {
               "name": "bar"
               "values": [ {time: 1, value: 33}, {time: 2, value: 62}, ... ]
           },
           {
               "name": "baz"
               "values": [ {time: 1, value: 13}, {time: 2, value: 2}, ... ]
           },
           ...
       ]; 
```

区域生成器如下所示：

```
var area = d3.svg.area()
    .interpolate("linear")
    .x(function(d) { return x(d.time); })
    .y0(function(d) { return height - y(d.y0); })
    .y1(function(d) { return y(d.value + d.y0); }); 
```

堆栈布局如下所示：

```
var stack = d3.layout.stack()
    .values(function(d) { return d.values; })
    .x(function(d) { return d.time; })
    .y(function(d) { return d.value; })
    .out(function(d, y0, y) {
        d.y0 = y0;
        d.value = d.value;
    }); 
```

然后，生成我的路径：

```
var path = svg.append("g")
    .selectAll("path")
    .data(stack(data))
  .enter().append("path")
    .attr("d", function(d) { return line(d.values); }); 
```

我最初用值 0 填充数据，所以我不希望一开始会看到任何东西。它似乎可以工作，并渲染了路径。

问题出现在更新上。路径有解析错误，并在路径生成的各种突发处命中 NaN，我假设是因为访问器 y0、y 或 x 之一未定义？

d="M328.60871678767865,104...{normal}...L395.02613982034944,NaNL395.02613982034944,NaNL401.6597510373444,NaNL401.6597510373444,NaNL401.6597510373444,NaNL401.6597510373444,NaNL401.6597510373444,NaNL401.6597510373444,NaNL401 .6597510373444,NaNL401.6597510373444,NaNL395.02613982034944,NaNL395.02613982034944,NaNL395.02613982034944,NaNL395.02613982034944,NaNL388.3857526981277,NaNL388.3857526981277,NaNL388.3857526981277,NaNL388.3857526981277,NaNL381.7521414811327,NaNL381.7521414811327,NaNL381.7521414811327 ,NaNL381.7521414811327,NaNL375.111754358911,NaNL375.111754358911,NaN...{正常}...L330,0Z"

这是重绘功能：

```
for (var i = 0; i < data.length; i++) {
    d3.select("#line" + id + "-" + i)
        .attr("d", function(d) { return line(d.values); })
        .attr("transform", null);
}

xAxis.call(x.axis);
yAxis.call(y.axis);

for (var i = 0; i < data.length; i++) {
    path.attr("transform", "translate(" + x(now - (n - 1) * duration) + ")");
} // the translation calculations can be safely ignored 
```

好奇是否有人可以对此有所了解。谢谢！

# mysql - MySQL UPDATE 仅当其他表中的字段满足条件时

> ID：11127407
> 
> 赞同：0
> 
> 时间：2012-06-20T20:10:57.017
> 
> 标签：mysql, sql, if-statement, conditional

我在尝试完成此操作时遇到了一些麻烦。这是我需要做的要点：

```
UPDATE links SET
 link = '$link', rid = $rid, order = $order
WHERE lid = $lid
IF (SELECT COUNT(*) FROM resources WHERE rid = $rid AND (sid = $sid OR sid IS NULL) AND types IS NULL) == 1; 
```

所以基本上，当且仅当资源表中的资源与站点（sid）关联或不与任何特定站点关联并且类型为空时，我才想运行 UPDATE。

我想我可以运行一个 PHP 条件，但如果我可以用一个查询来做到这一点会更好。是否可以？

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:14:36.170

```
UPDATE links
SET link = '$link', rid = $rid, order = $order
WHERE lid = $lid
and (SELECT COUNT(*) 
    FROM resources 
    WHERE rid = $rid 
    AND (sid = $sid OR sid IS NULL) 
    AND types IS NULL) = 1; 
```

# python - Python：将列表与整数进行比较

> ID：11127409
> 
> 赞同：4
> 
> 时间：2012-06-20T20:11:02.320
> 
> 标签：python, hex

好的，不，我不相信这是这里其他人的重复问题。这是我正在尝试做的事情（我是 Python 和自学新手，所以请耐心等待）。

我有一组长度为 3 的数据。该组构成一个十六进制值，即 0,9,9f 实际上只是十六进制值 99f。

我想获取该数据集并将其与我拥有的整数（2463）进行比较。我知道有一个十进制到十六进制的转换器，但是我如何组合数据集或拆分整数值以便能够比较两者以确保它们相等？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T20:13:48.177

您的列表是包含 '99f' 的 3 个元素 - 以下返回 2463

```
int(''.join(your_list), 16) 
```

# c# - WP8 支持 XNA 吗？

> ID：11127410
> 
> 赞同：11
> 
> 时间：2012-06-20T20:11:15.307
> 
> 标签：c#, c++, xna, windows-phone, windows-phone-8

在看了一点峰会主题演讲之后，我听到了一些相互矛盾的报道，但是 XNA 被 WP8 淘汰是官方的吗？我猜测，因为未来版本的 WP 支持上一代应用程序，这可能不是真的。

如果它是使用 C# 甚至是游戏的一个选项，或者是带有 DirectX 的 C++ 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T21:48:25.087

wp7dev 官方推特账号也这么说

“WP8 完全支持 XNA Framework 应用程序。新的 WP SDK 将支持为 WP7.x 和 WP8 构建 XNA Framework 游戏” [https://twitter.com/wp7dev/status/215513026374270977](https://twitter.com/wp7dev/status/215513026374270977)

就我个人而言，鉴于缺乏 XNA 更新或信息以及在 windows 8 上缺乏任何 Metro 支持，在我看到 SDK 和发布规则之前，我一直持怀疑态度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T20:20:24.160

Mary Jo Foley 对此有[话要说](http://www.zdnet.com/blog/microsoft/microsofts-windows-phone-8-finally-gets-a-real-windows-core/12975)：

> 微软官员表示，Windows 8 不支持主要由游戏开发人员使用的 XNA 工具/运行时环境。在 Windows Phone 8 上，“支持”XNA，因此现有的 Windows Phone 游戏将运行。但*微软对手机开发者的建议，就像对 Windows 8 的建议一样，是使用本地代码（即 C 和 C++）来编写游戏*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T17:08:39.180

由于公共[WP8 SDK 现已推出](http://www.microsoft.com/en-us/download/details.aspx?id=35471)，我可以确认您不能直接为#WP8 平台开发 XNA 应用程序。您的 XNA 应用程序只能针对 WP7 平台，它们可以在 WP8 设备上正常运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-20T20:18:23.133

我敢肯定，现在推测这一点还为时过早，我们将看到 SDK 何时发布。但从我目前所见的情况来看——我会说是的， WP8 及更高版本*可能*不会正式支持 XNA（请阅读——新功能可能只能通过 DirectX 接口使用，但现有功能将继续得到支持）。但是，根据[这个](http://monogame.codeplex.com/discussions/353549)帖子，使用[Monogame](http://monogame.codeplex.com/)在 Windows 8 Metro 上运行的游戏将通过认证。因此，无论如何，平台都不会消亡。

**编辑：**我刚刚注意到来自 Shawn Hargreaves 的[这条推文：](https://twitter.com/shawnhargreaves/status/215526214868287489) *Windows Phone 8 运行所有 7 个应用程序，包括 XNA 应用程序。我们正在添加新功能（本机代码、D3D）而不是删除旧功能*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-12T16:43:23.213

我一直在使用 VS2010 和 WP 7 SDK 开始的 XNA 游戏，后来升级到 7.5 (Mango)。我在 VS2012 和 WP8 SDK 中加载了该项目，它运行得很好，编译没有错误并且运行顺利。

如前所述，VS2012 和 WP8 SDK 中的 XNA 项目只能针对 WP 7.1 平台。从好的方面来说，所有运行 WP 7.5、即将推出的 7.8 和 WP8 的手机都可以毫无问题地运行您的游戏。从这个角度来看，WP8 SDK 和 WP8 设备完全支持 XNA，但这些不会是 WP8 项目。

由于不是 WP8 项目，缺点是您不能使用 WP8 独有的功能，例如：

*   应用内购买/微交易（这对 XNA 开发者的伤害最大）
*   您的游戏将始终为 800x480，因为您需要 WP8 项目来支持更高分辨率。您的 XNA 游戏在分辨率更高的设备上运行时应该会自动扩展
*   独有的 WP8 网络功能和 API，包括蓝牙和 NFC
*   语音和语音识别 API
*   您的 XNA 游戏无法注册应用程序间通信的协议扩展
*   新的动态磁贴模板

[WP8 的开发亮点位于http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/05/windows-phone-8-developer-platform-highlights.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/05/windows-phone-8-developer-platform-highlights.aspx)的 wpdev 博客上。

# php - 分组并显示该组的最新进入日期

> ID：11127412
> 
> 赞同：0
> 
> 时间：2012-06-20T20:11:24.070
> 
> 标签：php, mysql

我有一个 groupby 和 sum 表，用于显示当前股票（它对所有股票条目进行分组和汇总）。我现在想显示每个 groupby 组的最新进入日期。

这是我正在使用的内容：

```
-------------------------------------------------------------------
ProductID   |  Color  | Timestamp          |  Quantity  |  RowID  |
-------------------------------------------------------------------
25          |  Red    | 10/10/10 06:22:15  |  250       |  1      |
-------------------------------------------------------------------
32          |  Green  | 10/10/10 06:23:45  |  100       |  2      |
-------------------------------------------------------------------

$query = "SELECT productid, color, SUM(Quantity) AS TotalQuantity FROM inventory GROUP BY productid, color";
$result = mysql_query($query) or die(mysql_error());

   // Table markup here
   echo '<tr><td>'. $row['productid'] . '</td><td>' . $row['color']. '</td><td>'. $row['TotalQuantity'];
   // Table markup here 
```

我试图使用最大值函数来获取每个 groupby 的最大 rowid，但它变得如此混乱！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:32:25.020

好吧，如果每个组的最新进入日期也是最近的一个，你可以简单地使用：

```
SELECT
    productid,
    color,
    SUM(Quantity) AS TotalQuantity,
    MAX(Timestamp) AS LatestDate
FROM inventory
GROUP BY productid, color; 
```

# java - Java DecimalFormat 的问题

> ID：11127413
> 
> 赞同：0
> 
> 时间：2012-06-20T20:11:26.250
> 
> 标签：java, formatting, decimal, decimalformat

我将如何创建一个总共只有七位数字的 DecimalFormat 并且还让它有利于数字的左侧。

例如： 1234.5678 将转换为 1234.567 1.2345678 将转换为 1.234567 1234567.8 将转换为 1234567

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:25:04.583

我不认为您使用 DecimalFormat 进行这种格式化，但您执行字符串操作

```
double d = 1234567.8;
System.out.println(new StringBuilder()
     .append(d).substring(0, 8)
     .replaceAll("\\.$", "") // to remove last decimal
     .toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:17:05.207

DecimalFormat 不能做你想做的事，但我认为这更像是一个字符串问题。一旦你有你的格式化十进制，你可以这样做：

```
String number = "123.45678"; // output from decimal format

number = number.substring(0, 7 + (number.contains(".") ? 1 : 0)).replaceAll("\\.$", ""); 
```

这会将字符串长度截断为 7，如果找到小数点则截断为 8（然后删除任何尾随小数点），这是您需要的。

下面是一些测试代码：

```
private static String format(String number) {
    return number.substring(0, 7 + (number.contains(".") ? 1 : 0)).replaceAll("\\.$", "");
}

public static void main(String[] args) {
    System.out.println(format("1234567"));
    System.out.println(format("1.2345678"));
    System.out.println(format("1234.5678"));
    System.out.println(format("1234567.8"));
    System.out.println(format(".12345678"));
} 
```

输出：

```
1234567
1.234567
1234.567
1234567 
```

    .1234567

# symfony - Symfony2，控制器中的一个动作是否可以有两条路线？

> ID：11127414
> 
> 赞同：6
> 
> 时间：2012-06-20T20:11:30.580
> 
> 标签：symfony, routes

我的控制器类中有一个动作，我想要两条不同的路线，如下所示：

```
/**
 * Displays a form to create a new entity.
 *
 * @Route("/edit/choose/date", name="user_choose_date")
 * @Route("/supervisory/choose/date", name="sup_choose_date")
 * @Template()
 */
public function chooseDateAction()
{
    return array( );
} 
```

我想将路由访问权限授予某些用户但用户角色不同的原因。

比方说：

具有`supervisor`角色的用户可以访问`sup_choose_date`

具有`user`角色的用户可以访问`user_choose_date`

问题是一个动作是否可以有两条不同的路线？或者我复制了不同路线的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:34:54.237

是的，在使用 YAML（或 XML）路由时是可能的。

例子：

```
sup_choose_date:
    pattern:   /supervisory/choose/date
    defaults:  { _controller: MyBundle:Default:chooseDate }

user_choose_date:
    pattern:   /edit/choose/date
    defaults:  { _controller: MyBundle:Default:chooseDate } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-11-06T12:49:22.180

**为我工作！**

您必须设置不同的名称；如果不是，请明确指定

[![在此处输入图像描述](../Images/dcf705db7acb2a2a7520b3179cbf7229.png)](https://i.stack.imgur.com/88Zg9.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T09:10:07.470

我可以使用包括注释在内的各种格式。只要您为每条路线使用不同的名称，它就应该起作用。

# python - 函数应该打印一个字符串还是返回它？

> ID：11127416
> 
> 赞同：5
> 
> 时间：2012-06-20T20:11:56.087
> 
> 标签：python, styles, conventions

我正在编写一个 Python 脚本，它需要向控制台打印一行。很简单，但我不记得（或决定）接受的做法是否是在函数中打印，例如：

```
def exclaim(a):
    print (a + '!') 
```

或者让它返回一个字符串，例如：

```
def exclaim(a):
    return (a + '!') 
```

然后在主脚本中打印。我可以为任何一种方法提出论据。是否有一种普遍接受的方式来做到这一点，还是取决于偏好？

* * *

编辑：澄清一下，这不是我正在使用的功能。我不想在这里发布代码，所以我把这些函数写成一个过于简单的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:13:29.267

通常，函数应该生成并返回其输出，并让调用者决定如何处理它。

如果您直接在函数中打印结果，那么很难重用该函数来做其他事情，并且很难测试，因为您必须拦截 stdout 而不仅仅是测试返回值。

然而，在这个简单的例子中，似乎几乎没有必要重用或测试该功能，甚至根本不需要该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:30:16.223

我最欣赏 Python 的一件事是它鼓励适当的关注点分离。将任务分解为其原子组件几乎没有摩擦。

计算值和显示值是两个不同的东西，它们不应该混在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:23:00.200

如果您确定该函数不能被重用，并且您形成该函数只是为了增强代码的可读性，您可以在函数中打印它。

否则，如果您以后可以通过任何方式重新使用它，则应该返回该值。第二种方法是首选，因为函数的目的之一是重用。

没有真正的开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:17:21.410

要记住的一件事是，如果您打印它，您的函数将不会返回任何内容，因此如果您打算使用您希望编写的行，您应该返回它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:35:01.357

如果一个函数计算值然后立即打印它们，我经常会发现我最终会希望在不同的地方或以不同的方式显示或使用这些值。

我将决定将结果写入文件，将它们作为网页的一部分发送出去，将它们用作其他函数的部分值，以不同的方式显示它们的排序或过滤，等等。

在您进行原型设计时，让函数立即打印计算值是很好的，或者如果函数非常简单......但迟早，如果程序变得更大更有价值，您将需要转换那个简单的“打印出来吧！” 函数转换为更纯粹的计算和返回函数。

因此，我尝试从返回结果、稍后打印的编码风格开始。它看起来更干净，通常可以节省我以后的时间。但与所有风格上的东西一样，这是一个判断电话，还有 YMMV。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T20:24:33.170

我一直混合两种方式，但我认为它可以归结为这样：

*   如果整个函数的唯一目的是输出到终端（向用户打印一条消息），那么该函数应该打印。或者，您可以使用一些返回值作为错误状态或布尔值，但作为辅助步骤。通常打印的字符串/消息在程序流程中不会有其他用途，因为用户收到消息并且字符串变量已经被消费，可以被垃圾收集。

*   如果函数实际执行某些操作，从而返回一个真实值（即使该值是一个字符串），并且您想在终端上检查该值，那么您调用该函数并在另一个语句中打印其结果。在调试的情况下，您只需删除或注释该打印语句，但该函数将继续静默执行。只是为了比较，如果 print 语句在函数内部，您需要修改函数本身。

最后考虑一下，这两种方法在某种程度上是等效的，但是对于阅读您的代码的任何人（甚至是您自己），从可读性的角度来看，它的布局方式有助于捕获代码的意图。

希望这可以帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T20:15:26.500

在我看来，函数应该返回值。

# javascript - Ruby on Rails - 添加由 JavaScript 生成的内容以查看

> ID：11127417
> 
> 赞同：0
> 
> 时间：2012-06-20T20:11:58.207
> 
> 标签：javascript, ruby-on-rails-3

我正在尝试将我的 JavaScript(generate_graph.js.erb) 生成的一些图形添加到视图中。
我正在使用 rails 3.2.1
所以在我看来 -

# index.html.erb

```
<table>
<tr>
  <th>Description</th>
  <th>chart</th>
</tr>

<%= render @stats %> 
```

# 部分 _stat.html.erb

```
<tr>
  <td><%= stat.description %></td>
  <td> javascript_fn(stat.data)</td>
</tr> 
```

所以问题是
1\. 我应该把 generate_graph.js.erb 放在哪里
2\. 如何调用这个 js 以便将图形添加到“td”

谢谢阅读 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:45:19.117

您将 generate_graph 文件设为 .js.erb 而不仅仅是 .js 是否有原因？

如果它可以作为常规 js 文件工作，请将其放在 app/assets/javascripts 中。

然后只需执行以下操作：

```
<tr>
    <td><%= stat.description %></td>
    <td>
        <script>
           javascript_fn(<%= stat.data %>);
        </script>
    </td>
</tr> 
```

我知道有些人不喜欢使用内联 javascript，但有时它更容易，imo。

# sql - 如何将查询结果合并到一个文件中，从其他两个查询中添加页眉和页脚

> ID：11127420
> 
> 赞同：0
> 
> 时间：2012-06-20T20:12:13.240
> 
> 标签：sql, sql-server-2008, tsql

我正在做一个合并三个不同查询的查询。

我的查询看起来像这样......

```
HEADER ( a query  with only one line of information).    
BODY ( a query with many rows).    
FOOTER ( a query  with only one line of information) 
```

我有三个独立的查询，但我必须将它们合并到一个结果中才能发送到一个 txt 文件。

我不知道该怎么做，因为理论上第一个查询必须是结果的第一行，最后一个查询必须是脚......

一切都必须是连续文本......问题是在结果中添加页眉和页脚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:15:18.110

除非您将每一行作为单个值返回，否则您将很难在单个查询中执行此操作。例如：

```
;WITH header AS
(
  SELECT rn = 1, val = 'col1,col2,col3'
),
query AS
(
  SELECT rn = 2, val = CONVERT(VARCHAR(12), col1)
    + ',' + col2 + ',' + CONVERT(CHAR(10), col3, 112)
  FROM dbo.sometable
),
footer AS
(
  SELECT rn = 3, val = 'footer ----'
)
SELECT val FROM header
UNION ALL
SELECT val FROM query
UNION ALL 
SELECT val FROM footer
ORDER BY rn; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-07T20:15:57.843

这确实帮助我在提取的数据集中添加页眉和页脚。为了在页眉、页脚和提取的数据集中保持相同数量的列，我们使用以下代码添加 n 个额外列： select a, b,'' as ' ' '' as ' ' 可以添加任意数量的所需列以保持一致性，不会影响输出。

# php - 根据另一个变量（SQL）多次显示一个变量

> ID：11127422
> 
> 赞同：0
> 
> 时间：2012-06-20T20:12:21.517
> 
> 标签：php, sql

我想根据不同列的数字显示一个变量（这是一个图像）一定次数。

所以我想让 $image 显示 $numberofratings 次（最多 5 次）。我对 SQL 很陌生，所以我可能缺少一些非常基本的东西，但是感谢任何帮助的人！

```
 <?
 $query = mysql_query("SELECT * FROM alex_demo23");
 while ($row = mysql_fetch_array($query)){
 $rating=$row['rating'];
 $numberofratings=$row['numberofratings'];
  $image = '<img src="images/star.png">';  

 echo ("addMarker(Rated: $rating $image from $numberofratings reviews');\n");
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:15:35.630

只需使用 for() 或 str_repeat：

```
$image = '';
for($i=0; $i<$numberofratings; $i++){
    $image .= '<img src="images/star.png">';
} 
```

或者

```
$image = str_repeat('<img src="images/star.png">', $numberofratings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:14:37.627

这应该这样做：

```
$image = "";

for ($i = 0; $i < $row['numberofratings']; $i++) {
    $image .= '<img src="images/star.png">';  
} 
```

没有错误检查来确保数据有效，但这应该是一个开始。

# xcode4 - XCode 4.3.3 在运行 10.7.4 时崩溃

> ID：11127424
> 
> 赞同：2
> 
> 时间：2012-06-20T20:12:28.467
> 
> 标签：xcode4

在安装了 Xcode 的最新预览版后，我安装的另一个 Xcode 4.3.3 在启动时开始崩溃。我正在运行 OS X Lion 10.7.4。这是我在打开 Xcode 几秒钟后遇到的崩溃。

```
 Application Specific Information:
ProductBuildVersion: 4E3002
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-1193/Framework/Classes/Model/Logging/ActivityLog/IDEActivityLogSection.m:666
Details:  Assertion failed: _uniqueIdentifier
Object:   <IDEActivityLogSection: 0x40797e340>
Method:   -dvt_initFromDeserializer:
Thread:   <NSThread: 0x40797e700>{name = (null), num = 19}
Hints:   None
Backtrace:
  0  0x0000000106967b9f -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x0000000105e225d5 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010643aac3 -[IDEActivityLogSection dvt_initFromDeserializer:] (in IDEFoundation)
  3  0x0000000105df4085 -[DVTSimplePlainTextDeserializer decodeObject] (in DVTFoundation)
  4  0x0000000105df4888 -[DVTSimplePlainTextDeserializer decodeObjectList] (in DVTFoundation)
  5  0x000000010643a455 -[IDEActivityLogSection dvt_initFromDeserializer:] (in IDEFoundation)
  6  0x0000000105df4085 -[DVTSimplePlainTextDeserializer decodeObject] (in DVTFoundation)
  7  0x0000000106489b2b +[IDEActivityLogSection sectionWithContentsOfFile:error:] (in IDEFoundation)
  8  0x000000010643a27d -[IDEOnDiskActivityLogRecord fullLogWithError:] (in IDEFoundation)
  9  0x0000000106500b31 __45-[IDEBuildIssueProvider _blueprintsDidChange]_block_invoke_0 (in IDEFoundation)
 10  0x00007fff8afb8ae1 -[NSBlockOperation main] (in Foundation)
 11  0x00007fff8af7f6b4 -[__NSOperationInternal start] (in Foundation)
 12  0x00007fff8af92912 ____NSOQSchedule_block_invoke_2 (in Foundation)
 13  0x00007fff87df7a86 _dispatch_call_block_and_release (in libdispatch.dylib)
 14  0x00007fff87df8965 _dispatch_worker_thread2 (in libdispatch.dylib)
 15  0x00007fff866e33da _pthread_wqthread (in libsystem_c.dylib)
 16  0x00007fff866e4b85 start_wqthread (in libsystem_c.dylib) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:12:29.400

最后，我能够通过执行以下操作来启动它。

```
cd ~/Library/Developer/Xcode/DerivedData 
```

删除上述目录中的所有内容

按住 Option 并双击 XCode 图标。您将看到一个弹出窗口，询问您是否要从上次会话中恢复窗口。打不恢复。

现在 Xcode 4.3.3 似乎正在启动

# ruby-on-rails-3 - Rails 3 polymorphic_path - 如何更改默认 route_key

> ID：11127426
> 
> 赞同：6
> 
> 时间：2012-06-20T20:12:29.050
> 
> 标签：ruby-on-rails-3, routing

我有一个带有`Cart`和`CartItem`( `belongs_to :cart`) 模型的配置。

我想要做的是调用`polymorphic_path([@cart, @cart_item])`，以便它使用`cart_item_path`，而不是`cart_cart_item_path`。

我知道我可以将路由生成的 url 更改为`/carts/:id/items/:id`，但这不是我感兴趣的。此外，重命名`CartItem`为`Item`不是一种选择。我只想`cart_item_path`在整个应用程序中使用方法。

在此先感谢您提供任何提示！

只是为了说明我的观点：

```
>> app.polymorphic_path([cart, cart_item])
NoMethodError: undefined method `cart_cart_item_path' for #<ActionDispatch::Integration::Session:0x007fb543e19858> 
```

所以，重复我的问题，我能做些什么`polymorphic_path([cart,cart.item])`来寻找`cart_item_path`而不是`cart_cart_item_path`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T08:26:23.760

在一路向下调用堆栈之后，我想出了这个：

```
module Cart    
  class Cart < ActiveRecord::Base
  end  

  class Item < ActiveRecord::Base
    self.table_name = 'cart_items'
  end

  def self.use_relative_model_naming?
    true
  end

  # use_relative_model_naming? for rails 3.1 
  def self._railtie
    true
  end
end 
```

相关的 Rails 代码是[`ActiveModel::Naming#model_name`](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/naming.rb#L90)和[`ActiveModel::Name#initialize`](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/naming.rb#L20)。

现在我终于得到：

```
>> cart.class
=> Cart::Cart(id: integer, created_at: datetime, updated_at: datetime)
>> cart_item.class
=> Cart::Item(id: integer, created_at: datetime, updated_at: datetime)
>> app.polymorphic_path([cart, cart_item])
=> "/carts/3/items/1"
>> app.send(:build_named_route_call, [cart, cart_item], :singular)
=> "cart_item_url" 
```

我认为在班级级别上，同样的方法可以`Cart`代替`Cart::Cart`, 。`use_relative_model_naming?``Cart`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:48:49.237

你可以在你的路由文件中声明这样的资源。

```
resources :carts do
  resources :cart_items, :as => 'items'
end 
```

请参阅[导轨指南的这一部分](http://guides.rubyonrails.org/routing.html#nested-names)

# jquery - 发布到 iframe 在 Internet Explorer 中不起作用？

> ID：11127431
> 
> 赞同：0
> 
> 时间：2012-06-20T20:12:46.810
> 
> 标签：jquery, html, internet-explorer, post, iframe

我有一个难题。已经在网站上进行了研究，并尝试了许多提出的解决方案，但没有一个在 Internet Explorer 8 中工作（是我在我的机器上安装的版本）。在 Chrome 和 Firefox 中运行良好。我有一个网站，用户需要上传 10 张照片。我需要进行上传并将它们显示在页面上的一个 div 中，无需 Flash 且无需重新加载页面。我使用了设置表单目标属性的技术，在 iframe 中发布帖子，iframe 发布帖子，当重新加载时，它只是一个带有上传图像的 img 标签（我在服务器端脚本中执行 - PHP）在 Internet Explorer 中 iframe 的内容不会改变，帖子不会发生。

有人奇迹可以帮助我吗？已经在论坛里研究了很多，但是这些问题大部分都与javascript动态生成的iframe有关，但在我的情况下，iframe已经在html中了

这是我的代码：

```
//javascript

$(document).ready(function() {          
//this part works in every browser, is jut´s to triger click in input type file    
   $(".div_input_file").click(function(){               
        var rel = $(this).attr("rel");              
        $(".arq"+rel).trigger('click');             
    })
}); 

function loadPicture(number)
{               
    $(".remover_produto").remove();
    //just a gif animation until ends animation
    $("#image_load_"+number).attr("src","images/loading.gif");
    $("#image_load_"+number).css("width","172px");      
    $("#image_load_"+number).css("height","176px");     
    //when iframe load after post
    $("#upload_target_"+number).load(function() {
        //get image that was loaded in iframe after post
            var image = $("#upload_target_"+number).contents().find("img").attr("src");
        $("#div_input_file_"+number).html("<img src='"+image+"' alt=''  class='img_uploaded' />");
        $("#div_input_file_"+number).parent().append('<a class="remover_produto" rel="remover_'+number+'"');           
    });   

}   

    //html
    <iframe id="upload_target_1" class="upload_target" name="upload_target_1" src="upload.php"></iframe>
    <div id="div_input_file_1" class="div_input_file" rel="1">
        <img src="images/criar_anuncio/gallery_pic05.png" alt="" id="image_load_1" />
    </div>      
    <form action="/upload.php" id="form_upload_1" enctype="multipart/form-data" method="post" target="upload_target_1" onsubmit="loadPicture(1)">   
        <input name="arquivo" type="file" size="30" class="arquivo arq1" onchange="$('#form_upload_1').submit();"/>
        <input type="hidden" name="num_imagem" value="1" /> 
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:27:20.360

终于发现问题了。这些行导致了问题：

```
$(document).ready(function() {          
//this part works in every browser, is jut´s to triger click in input type file    
   $(".div_input_file").click(function(){               
        var rel = $(this).attr("rel");              
        $(".arq"+rel).trigger('click');             
    })
}); 
```

为了设置输入类型文件的样式，我使用了以下技术：单击 div，触发隐藏的输入文件类型。

此操作会导致 Internet Explorer 中的错误。我放了没有样式的普通输入类型文件，所以我可以测试，并且可以证明它运行良好

感谢所有帮助过的人

# ruby-on-rails - 最新的红宝石厨师食谱

> ID：11127440
> 
> 赞同：7
> 
> 时间：2012-06-20T20:13:33.103
> 
> 标签：ruby-on-rails, ruby, chef-infra

有最新的 ruby​​ 食谱吗？我在 opscode 食谱网站上找不到。即红宝石 1.9.3 或 1.9.2p280。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T19:34:14.743

我刚刚[完成了](http://github.com/hilary/chef-ruby1.9 "更新后的版本")Carlo Zottman 的[ruby​​ 1.9.x 食谱](http://github.com/carlo/chef-ruby1.9 "厨师-ruby1.9")的更新（在吃午饭的时候注意到了这个问题，在写一个拉取请求之前，哈​​哈......）

唯一的依赖是来自 opscode cookbook 站点的标准 build-essential 和 apt 食谱。

至于何时可能需要这样一本食谱的讨论，在使用 rbenv 食谱（以及其他各种食谱）*之前，我正在使用它在我的 12.04.01 vagrant 盒子上从 ruby​​ 1.8 升级到 ruby​​ 1.9。*

我意识到我应该能够使用 rbenv cookbook 来安装 1.9.3，但是在尝试了几个小时没有成功之后，我意识到无论如何我对源代码安装更满意，因为它使我的整个食谱堆栈不那么脆。而作为流浪用户的 rbenv 安装 1.9.3 的 shell 脚本编写起来很简单。

## 更新

我找到了一种依赖更少的替代方法（是的！）我正在使用[Fletcher Nichol 的](http://github.com/fnichol "弗莱彻尼科尔")食谱：

*   [来自opscode](http://community.opscode.com/cookbooks/ruby_build "ruby_build")社区页面的 ruby​​_build
*   [来自 github 的chef-rbenv](http://github.com/fnichol/chef-rbenv "厨师-rbenv")（与 opscode 的 rbenv 食谱不同）

严格来说，当然，您可以只使用 ruby​​_build 安装您喜欢的 1.9 并停止，但我也想要 rbenv。

我已经从我的设置中包含了一些片段（当然，还有更多的 Berksfile 和 Vagrantfile，但这些都是相关的部分。）唯一真正棘手的部分是如果你想使用的话，`chef-rbenv`食谱的本地名称必须是`rbenv`任何现成的食谱，包括食谱中的其他现成食谱，因为它称自己为 rbenv。Berkshelf 让这变得微不足道。

[伯克斯文件](http://berkshelf.com/ "伯克谢尔夫")：

```
group :ruby do
  cookbook 'ruby_build'
  cookbook 'rbenv', git: 'https://github.com/fnichol/chef-rbenv'
end 
```

流浪文件：

```
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = 'chef/cookbooks'
  chef.roles_path     = 'chef/roles'
  chef.json           = {
    'rbenv' => {
      'global' => '1.9.3-p194',
      'rubies' => [ '1.9.3-p194' ],
      'gems'   => {
        '1.9.3-p194' => [
          { 'name'   => 'bundler' }
        ]
      }
    }
  }
  chef.add_role 'ruby'
end 
```

厨师/角色/ruby.json：

```
{
  "name": "ruby",
  "description": "Install ruby and rbenv",
  "chef_type": "role",
  "json_class": "Chef::Role",

  "run_list": [
    "recipe[ruby_build]",
    "recipe[rbenv::system]"
  ]
} 
```

最后的评论是，一旦我想出了解决方案，我意识到维克多的答案很可能是同一件事的厨师服务器版本。到目前为止，我只使用过 chef-solo，所以我不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:24:48.147

我不确定您是否会找到一个用于更新 Ruby 系统版本的工具，因为 chef 是建立在 Ruby 之上的，因此会在运行时进行自我更新，我不确定这是否可能。

但是，我肯定看过针对 RBenv 和 RVM 等 Ruby 版本管理器的 Chef 食谱，例如[这本用于 rbenv](https://github.com/fnichol/chef-rbenv)，而[这本用于 RVM](https://github.com/fnichol/chef-rvm)。这是用于服务器还是 OSX 开发盒？如果是后者，那么我发现[Smeagol](https://github.com/atmos/smeagol)在配置机器时是一个非常方便的快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:52:52.830

我认为最简单的方法是使用两本食谱：ruby_build 和 rbenv。在您的角色 ( `<proj>/roles/role_name.rb`) 中：

```
name "your-role-name"

description "All the shelves!"

run_list(
  "recipe[ruby_build]",
  "recipe[rbenv::system]"
)

override_attributes(
  'rbenv' => {
    'global' => '1.9.2-p280',
    'rubies' => [
      '1.9.2-p280'
    ]
  }
) 
```

将这个角色（最好在需要这些红宝石的其他角色之前）添加到你的运行列表中应该可以做到。

要编辑运行列表： `knife node edit <node name>`

不要忘记更新角色！`knife role from file role_name.rb`

最后，与 rvm 相比，rubyenv 可能是一种更简洁的 rubies 管理方式。

# performance - 复制整个列表并附加一个元素如何比仅附加它更有效？

> ID：11127443
> 
> 赞同：0
> 
> 时间：2012-06-20T20:13:35.773
> 
> 标签：performance, append, immutability

有人[声称](http://himera.herokuapp.com/synonym.html)附加到不可变列表更有效。这是真的？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:03:33.203

不可变对象可以在线程之间共享而无需同步。同步会对扩展产生负面影响，并且可能比复制成本更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:54:27.333

通过分配一个足够大的数组来保存修改后的版本并复制所有未修改的元素来生成列表的修改版本有点昂贵，无论修改是追加、插入、删除、替换还是其他任何东西. 成本大致与生成未修改但不同的列表副本的成本相当。

如果一个对象`Foo`希望以一种只有在更改它时才能更改它的方式来维护一个元素列表，那么`Foo`它可以使用两种常见的方法来做到这一点：

1.  它可以使用“不可变列表”类型，以保证任何曾经暴露于外部世界的实例将永远拥有相同的对象序列。对象 Foo 可以自由地公开对这个列表的引用，因为没有人能够改变它。如果 Foo 想要将一个项目添加到它的列表中，它会生成一个新的不可变列表，其中包含列表中的所有项目，加上新的，并开始持有对它的引用而不是旧的。
2.  它可以创建一个可变的列表对象，但永远不会暴露给外界。如果有人需要从列表中检索项目序列，`Foo` 会将列表的内容复制到一个新列表中，调用者可以在不影响 `Foo` 列表的情况下以任何它认为合适的方式使用该列表。

如果使用方法#1，那么每次`Foo`更改列表时，它都必须创建一个新的“不可变列表”实例，但`Foo`可以回答对列表内容的请求，而无需复制它。如果使用方法#2，将项目添加到列表（和其他修改）将更便宜，但回答对列表内容的请求将需要复制列表。使用方法#1 还是方法#2 是否更好取决于列表更新的频率，以及应用程序需要它的副本的频率。

# android - 如何在Android开发中停止线程中具有睡眠方法的线程

> ID：11127444
> 
> 赞同：1
> 
> 时间：2012-06-20T20:13:36.460
> 
> 标签：android, multithreading, methods, timer, sleep

**所以我有一个拥有 sleep 方法的线程，我认为这是问题所在，因为当我尝试使用 stop() 方法停止它时，我的程序崩溃了。当用户点击后退按钮（硬件后退按钮）时，我试图完全停止线程。我该怎么办？我应该使用睡眠方法以外的方法吗？**

```
Thread timer2 = new Thread() { // Threads - do multiple things
        public void run() {
            try {
                sleep(5000); // 5000 mil secs = 5 secs . sleeps thread
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                cdt2.start();
            }
        }
    };
    timer2.start(); // starts thread

public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
          timer1.stop(); //error
          timer2.stop(); //error
          cdt.cancel();
          cdt2.cancel();
          Intent menu = new Intent("android.intent.action.MENU");
          startActivity(menu);
          return true;
        }
        return false;
      } 
```

日志猫：

```
06-20 13:08:58.006: D/dalvikvm(22050): GC_CONCURRENT freed 951K, 7% free 15393K/16455K,    paused 2ms+3ms
06-20 13:08:58.944: D/dalvikvm(22050): GC_CONCURRENT freed 700K, 6% free 15533K/16455K, paused 2ms+1ms
06-20 13:09:01.733: D/dalvikvm(22050): GC_CONCURRENT freed 955K, 7% free 15630K/16647K, paused 2ms+2ms
06-20 13:09:02.069: D/dalvikvm(22050): GC_CONCURRENT freed 880K, 7% free 15707K/16711K, paused 2ms+2ms
06-20 13:09:02.678: D/dalvikvm(22050): GC_CONCURRENT freed 762K, 5% free 15940K/16775K, paused 2ms+2ms
06-20 13:09:03.303: D/AccountTypeManager(21214): Registering external account type=ro.weednet.contactssync, packageName=ro.weednet.contactssync
06-20 13:09:03.311: D/AccountTypeManager(21214): Registering external account type=com.skype.contacts.sync, packageName=com.skype.raider
06-20 13:09:03.311: W/ResourceType(21214): getEntry failing because entryIndex 1377 is beyond type entryCount 189
06-20 13:09:03.311: W/ResourceType(21214): Failure getting entry for 0x7f020561 (t=1 e=1377) in package 0 (error -2147483647)
06-20 13:09:03.311: W/ResourceType(21214): getEntry failing because entryIndex 1378 is beyond type entryCount 189
06-20 13:09:03.311: W/ResourceType(21214): Failure getting entry for 0x7f020562 (t=1 e=1378) in package 0 (error -2147483647)
06-20 13:09:03.311: W/ResourceType(21214): getEntry failing because entryIndex 1379 is beyond type entryCount 189
06-20 13:09:03.311: W/ResourceType(21214): Failure getting entry for 0x7f020563 (t=1 e=1379) in package 0 (error -2147483647)
06-20 13:09:03.311: W/ResourceType(21214): getEntry failing because entryIndex 1778 is beyond type entryCount 189
06-20 13:09:03.311: W/ResourceType(21214): Failure getting entry for 0x7f0206f2 (t=1 e=1778) in package 0 (error -2147483647)
06-20 13:09:03.311: D/AccountTypeManager(21214): Registering external account type=com.yahoo.mobile.client.share.sync, packageName=com.yahoo.mobile.client.android.mail
06-20 13:09:03.319: D/AccountTypeManager(21214): Registering external account type=com.facebook.auth.login, packageName=com.facebook.katana
06-20 13:09:03.319: W/ResourceType(21214): getEntry failing because entryIndex 344 is beyond type entryCount 189 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:17:57.360

您不应该在可运行文件上调用 stop() 。相反，您需要让 Thread 返回。为此，您只需要一个可以设置为 true 的标志。在这种情况下，您将 mStopThread 设置为 false，当您可以终止线程时，只需将其设置为 true，它就会返回。但是，我通常会在睡眠时间较短的某种循环中看到这一点。

```
Thread timer2 = new Thread() { // Threads - do multiple things
        public void run() {
            try {
                if (mStopThread) return;
                sleep(5000); // 5000 mil secs = 5 secs . sleeps thread
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                cdt2.start();
            }
        }
    };
timer2.start(); // starts thread 
```

如果您没有选择修改代码示例以使循环更紧密，那么您总是可以通过调用 timer2.interrupt() 来唤醒您的线程，然后让它返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:25:45.603

你试过用吗

```
timer.interrupt() 
```

代替

```
timer.stop() 
```

这就是现在的“更正确的方式”。然而，真正干净的方法，正如 Frank Sposaro 已经证明的那样，是有一个内部标志，您可以查看线程中可以停止的每个点，然后从内部停止线程。至于 sleep() 场景，试试 interrupt()

# java - 以编程方式分析java堆转储文件

> ID：11127447
> 
> 赞同：4
> 
> 时间：2012-06-20T20:13:51.383
> 
> 标签：java, heap-dump

我想编写一个程序（最好在java中），它将解析和分析java堆转储文件（由jmap创建）。我知道有很多很棒的工具已经这样做了（jhat、eclipse 的 MAT 等等），但我想从特定的角度分析堆到我的应用程序。

我在哪里可以阅读有关堆转储文件的结构、如何阅读它的示例等信息？没有找到任何有用的搜索它...

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T00:16:39.923

以下是使用 Eclipse 版本完成的：Luna Service Release 1 (4.4.1) 和 Eclipse Memory Analyzer Version 1.4.0

# 以编程方式与 Java 堆转储接口

## 环境设置

1.  在eclipse中，Help -> Install New Software -> install Eclipse Plug-in Development Environment
2.  在eclipse中，Window -> Preferences -> Plug-in Development -> Target Platform -> Add
3.  无 -> 位置 -> 添加 -> 安装
4.  名称 = 垫
5.  位置 = /path/to/MAT/installation/mat

## 项目设置

1.  文件 -> 新建 -> 其他 -> 插件项目

    名称：垫扩展

2.  下一个

    *   禁用激活器
    *   禁用对 UI 的贡献
    *   禁用 API 分析
3.  下一个
    *   禁用模板
4.  结束

## 代码生成

打开插件.xml

1.  依赖项 -> 添加
    *   选择 org.eclipse.mat.api
2.  扩展 -> 添加
    *   选择 org.eclipse.mat.report.query
3.  右键单击report.query -> 新建
    *   名称：MyQuery
    *   点击“impl”生成类

## 实施 IQuery

```
@CommandName("MyQuery") //for the command line interface
@Name("My Query") //display name for the GUI
@Category("Custom Queries") //list this Query will be put under in the GUI
@Help("This is my first query.") //help displayed
public class MyQuery implements IQuery
{
     public MyQuery{}

     @Argument //snapshot will be populated before the call to execute happens
     public ISnapshot snapshot;

     /*
      * execute : only method overridden from IQuery
      *           Prints out "My first query." to the output file.
     */
     @Override
     public IResult execute(IProgressListener arg0) throws Exception
     {
            CharArrayWriter outWriter = new CharArrayWriter(100);
            PrintWriter out = new PrintWriter(outWriter);
            SnapshotInfo snapshotInfo = snapshot.getSnapshotInfo();
            out.println("Used Heap Size: " + snapshotInfo.getUsedHeapSize());
            out.println("My first query.")
            return new TextResult(outWriter.toString(), false);
     }
} 
```

ctrl+shift+o 将生成正确的“导入”语句。通过访问您打开的 hprof 文件顶部的工具栏的“打开查询浏览器”，可以在 MAT GUI 中访问自定义查询。

## ISnapshot 接口

可用于从堆转储中提取数据的最重要接口是 ISnapshot。ISnapshot 表示堆转储，并提供各种方法来从中读取对象和类、获取对象的大小等……</p>

要获得 ISnapshot 的实例，可以使用 SnapshotFactory 类的静态方法。但是，仅当 API 用于实现独立于 Memory Analyzer 的工具时才需要这样做。如果您正在为 MAT 编写扩展，那么您的编码将通过注入或作为方法参数获得与已打开的堆转储相对应的实例。

[参考](https://wiki.eclipse.org/MemoryAnalyzer/Reading_Data_from_Heap_Dumps)

# 内置命令行实用程序

如果您希望让程序生成通常的报告，那么可以在任何[下载 Eclipse 的 MAT 工具时](https://eclipse.org/mat/downloads.php)使用名为 ParseHeapDump 的命令行实用程序。您将能够获得所有信息 MAT 存储的有用 html 转储。

```
> ParseHeapDump <heap dump> org.eclipse.mat.api:suspects org.eclipse.mat.api:top_components org.eclipse.mat.api:overview #will dump out all general reports available through MAT 
```

希望这是足够的信息来帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:32:40.197

我不熟悉 jhat，但 Eclipse 的 MAT 是开源的。他们的[SVN 链接](http://dev.eclipse.org/viewcvs/viewvc.cgi/?root=TOOLS_MAT)可用，也许您可​​以查看他们的解析器，甚至可以使用它。

# python - 在 Django 中获取“最受欢迎”列表

> ID：11127448
> 
> 赞同：4
> 
> 时间：2012-06-20T20:13:52.053
> 
> 标签：python, django

所以我试图通过每个中有`events`多少来获得最受欢迎的列表。`attendees``'event'`

**楷模**

```
class Event(models.Model):
    heading = models.CharField(max_length=200)
    sub_heading = models.CharField(max_length=200, null=True, blank=True)
    url = models.CharField(max_length=200, null=True, blank=True)
    description = models.TextField()
    tags = models.ManyToManyField(Tag, null=True, blank=True)
    date = models.DateTimeField()
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)

    def attendees(self):
        return Attendee.objects.filter(event=self)

class Attendee(models.Model):
    event = models.ForeignKey(Event)
    content_type = models.ForeignKey(ContentType, related_name='event_attendee')
    object_id = models.PositiveIntegerField()
    profile = generic.GenericForeignKey('content_type', 'object_id') 
```

**意见**

```
def event(request, id):
    ...
    events = Events.objects.all()
    attendees = Attendee.objects.filter(event__in=events).count()
    if attendees > 50:
        popular_events = Event.objects.filter(what should i filter by).annotate(attendees_count=Count('attendees')).order_by('-attendee_count') ???
   # I'm probably going about this the wrong way :\ 
```

我真的很感激对此的一些见解。我在做什么是行不通的。如何查询热门活动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T20:18:32.740

使用[注释](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)：

```
from django.db.models import Count

popular_events = Events.objects.annotate(attendee_count=Count('attendee')).filter(attendee_count__gt=50) 
```

# javascript - 在文档中添加新元素后，Jquery 显示无法正常工作

> ID：11127453
> 
> 赞同：3
> 
> 时间：2012-06-20T20:14:08.830
> 
> 标签：javascript, jquery, javascript-events

我正在使用 Ajax / Request 将元素加载到 div 容器中。默认情况下，我隐藏了一个输入框。如果用户单击该 div 上的编辑图标，我想显示输入框。这是我的代码：

**代码**

```
 <div class='container'>
      <input type = 'text' onkeydown='saveFn(event,this)' name = 'editemail' class = 'editemail' style='display:none;     height:20px;' />
    </div> 
```

**JS代码**

```
 $(".container").click(function(){
      console.log($(this).find(".editemail").show()); //Note it works fine If i didn't load any new elements into the div.
 }); 
```

将新元素加载到容器中之前的控制台日志输出。

```
 <input type="text" onkeydown="saveFn(event,this)" name="editemail" class="editemail" style="height: 20px; " value="hyther@zohocorp.com" title="press enter to save"> 
```

将元素加载到容器后的控制台日志输出。

```
<input type="text" onkeydown="saveFn(event,this)" name="editemail" class="editemail" style="height: 20px; display: none; " value="saravanan@zohocorp.com" title="press enter to save"> 
```

即使我也尝试从这个元素中删除“样式”属性并添加一个新的样式元素，它仍然不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T20:19:39.277

首先你应该阅读 jQuery Docs FAQ 部分：[Why_do_my_events_stop_working_after_an_AJAX_request](http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F)

使用 on() 将处理程序委托给未来的元素

```
$(document).on('click', ".container", function(){
/* your code*/
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T20:18:23.697

试试这个：

```
$(document).on('click','.container',function(){ 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:24:42.693

试试这个：

```
$('.container').live('click', function(){
     /* Your Code Here */
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:24:01.227

问题是`click()`在 ajax 请求之后绑定丢失了。`JQuery`您可以使用函数来使其正常工作，但是现在`.live()`不推荐使用此函数，他们鼓励您使用`.on()`or `.delegate()`。就我个人而言，我有大量的 headecks 使用`.on()`并且`.delegate()`宁愿使用插件`livequery`。使用 livequery 插件非常简单：

```
 $(function(){

    $('#elementId').livequery('click',function(){
       //do something on click
    }) 
 }); 
```

欲了解更多信息，请访问： [.livequery()](http://archive.plugins.jquery.com/project/livequery) [.on()](http://api.jquery.com/on/) [.delegate()](http://api.jquery.com/delegate/)

# objective-c - 目标 - C http 请求

> ID：11127454
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:14:09.277
> 
> 标签：objective-c, ios, cocoa-touch, afnetworking

我需要在我正在做的服务器上发送 http 请求，然后我使用 AFNetworking 发送请求。我不知道我必须在参数中设置什么

```
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://supreme2.ru/wp-comments-post.php"]
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval:15.0];
    request.HTTPMethod = @"POST";
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    NSString* params = @"author=pavel&email=xxxdozorxxx@gmail.com&url=http://supreme2.ru/0335-elektronnyj-myach/#comments&comment=afafaffsafasf";
    request.HTTPBody = [params dataUsingEncoding:NSUTF8StringEncoding];
    AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id object){
    NSData *data = (NSData *)object;

} failure:^(AFHTTPRequestOperation *operation, NSError *err) {
    NSLog(@"error %@", err);
} ];
NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];
    [queue addOperation:operation]; 
```

一切正常，但我没有从服务器回答，也许我没有正确设置参数？或者它可能是服务器不好的工作？下面是服务器的php代码

```
<?php
    if ('comments.php' == basename($_SERVER['SCRIPT_FILENAME']))
        die ('Please do not load this page directly. Thanks!');
        if (!empty($post->post_password)) { // if there's a password
            if ($_COOKIE['wp-postpass_' . COOKIEHASH] != $post->post_password) {  // and it doesn't match the cookie
                <p class="nocomments">input password to see this detail<p>
                <?php
                return;
            }
        }
        $oddcomment = 'alt';
?>

<div class="mainzag"><div class="contzag"><h4>Comments (<?php comments_number('0','1','%')?>)</h4></div></div>
<?php if ( get_option('comment_registration') && !$user_ID ) : ?>
<?php else : ?>
<form action="http://supreme2.ru/wp-comments-post.php" method="post" id="commentform">
<?php if ( $user_ID ) : ?>
<?php else : ?>
            <div id="comsund">
                <div id="authbtn"><a href="https://loginza.ru/api/widget?token_url=<?php the_permalink() ?>&amp;providers_set=vkontakte,google,yandex,mailru,twitter,facebook" class="loginza authbtn1" rel="nofollow">Авторизация</a></div>
                <div id="comname"><input type="text" name="author" id="author"  onblur="if(this.value=='') this.value='Your name';" onfocus="if(this.value=='Ваше имя') this.value='';" value="Your name" maxlength="50" tabindex="1" /></div>
                <div id="commail"><input type="text" name="email" id="email"  onblur="if(this.value=='') this.value='Your E-mail';" onfocus="if(this.value=='Ваш E-mail') this.value='';" value="Your E-mail" maxlength="50" tabindex="2" /></div>
            </div>
<?php endif; ?>
            <div id="comms">
                <div id="combg"><textarea name="comment" id="comment" cols="" rows="" tabindex="4"></textarea></div>
                <div id="combtn"><input type="image" name="submit" value="submit" src="http://supreme2.ru/img/combtn.jpg" tabindex="5" /></div>
                <input type="hidden" name="comment_post_ID" value="<?php echo $id; ?>" />
            </div>

<?php do_action('comment_form', $post->ID); ?>
</form>
<?php endif; ?>
<?php if ( $user_ID ) : ?>
<div class="comexit"><a href="<?php echo wp_logout_url( get_permalink() ); ?>" title="Quit">Выйти</a></div>
<?php endif; ?>
    <?php foreach ($comments as $comment) : ?>
        <div class="comline"></div>
            <div class="compod" id="comment-<?php comment_ID() ?>">
                <div class="cominfo">
                    <div class="comman"><p><?php comment_author_link() ?><span>, <?php comment_date('j.m.Y') ?> (<?php comment_time() ?>)</span></p></div>
                    <div class="comtext"><?php if ($comment->comment_approved == '0') : ?><p style="color:#a6c232;font-style:italic;">Your comment in moderation</p><?php endif; ?><?php comment_text() ?></div>
                </div>
                <div class="comrate">
                <?php ckrating_display_karma();  ?>
                </div>
            </div>

    <?php endforeach; ?>
  <?php if ('open' == $post->comment_status) : ?> 
     <?php else : ?>
        <p class="nocomments">Comments are closed</p>
            <?php endif; ?>

<?php if ('open' == $post->comment_status) : ?>
<?php endif; ?>Your E-mail 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:21:30.613

正如亚历克斯所说，你应该做一个

```
[operation start]; 
```

或一个

```
NSOperationQueue *queue = [[[NSOperationQueue alloc] init] autorelease];
[queue addOperation:operation]; 
```

在您的代码末尾（如果它不存在）

# javascript - 如果我为 JS 变量分配一个新值，它会破坏它的绑定吗？

> ID：11127457
> 
> 赞同：1
> 
> 时间：2012-06-20T20:14:15.520
> 
> 标签：javascript, javascript-events

我有一个存储 websocket 连接的 javascript 变量，如下所示：

```
var ws = $.websocketSettings.factory(url);
        $(ws)
            .bind('open', $.websocketSettings.open)
            .bind('close', $.websocketSettings.close)
            .bind('message', $.websocketSettings.message)
            .bind('error', $.websocketSettings.error)
            .bind('relaySent', $.websocketSettings.relayTimeout)
            .bind('relayRetry', $.websocketSettings.relayRetry)
            .bind('jumpStart', $.websocketSettings.jumpFactory); 
```

但是，如果连接断开，我有一个`jumpStart`事件会`ws`使用新连接重置变量。

```
jumpFactory: function(event){
            var ws = this;
            ws = $.websocketSettings.factory( getEngineUrl() );
            return ws;
        }, 
```

这会打破绑定事件`ws`吗？我看到一些奇怪的行为，所以试图查明原因。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:31:51.217

您不会将事件绑定到任何变量，而是绑定到它的值 - 其中引用的对象。将新对象分配给变量不会以某种方式自动将这些绑定从旧对象转移到新对象。此外，只要从某处引用此对象旧对象，这些事件将继续触发。

# sql - 选择列值已更改的行

> ID：11127461
> 
> 赞同：29
> 
> 时间：2012-06-20T20:14:37.053
> 
> 标签：sql, sql-server-2008, tsql, select

假设我有下表：

```
Value    Time
0        15/06/2012 8:03:43 PM
1        15/06/2012 8:03:43 PM     *
1        15/06/2012 8:03:48 PM 
1        15/06/2012 8:03:53 PM
1        15/06/2012 8:03:58 PM     
2        15/06/2012 8:04:03 PM     *
2        15/06/2012 8:04:08 PM
3        15/06/2012 8:04:13 PM     *
3        15/06/2012 8:04:18 PM
3        15/06/2012 8:04:23 PM
2        15/06/2012 8:04:28 PM     *
2        15/06/2012 8:04:33 PM 
```

如何选择已加星标的行，即在哪里`Value`发生了变化？基本上，我试图找出`Value`发生变化的时间，以便我可以根据这些时间间隔进行其他查询。解决方案不应该依赖于知道`Value`或`Time`提前。

在我看来，这应该不是很难（但显然对我来说已经够难了！）。

我目前正在使用 SQL Server 2008，但如果新的窗口/分析功能有用，我可以访问 2012。

我尝试在这里调整解决方案[http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012- analytic-function/](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)但我的查询一个小时后没有完成！我认为连接将行大小爆炸到无法管理的程度（或者我搞砸了）。

我可以使用 C# 代码和多个 db 调用来解决这个问题，但它似乎可以在表值函数或 SP 中完成，这样会更好。

`Value`此外，如果更容易，仅适用于增加的解决方案是可以的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-20T20:18:33.417

我想这就是你所追求的：

```
;WITH x AS
(
  SELECT value, time, rn = ROW_NUMBER() OVER 
  (PARTITION BY Value ORDER BY Time)
  FROM dbo.table
)
SELECT * FROM x WHERE rn = 1; 
```

如果结果集很大并且没有良好的支持索引，这可能会很慢......

**编辑**

啊，等一下，值会上升和下降，而不仅仅是上升......如果是这种情况，你可以尝试这种慢得多的方法：

```
DECLARE @x TABLE(value INT, [time] DATETIME)

INSERT @x VALUES
(0,'20120615 8:03:43 PM'),--
(1,'20120615 8:03:43 PM'),--*
(1,'20120615 8:03:48 PM'),--
(1,'20120615 8:03:53 PM'),--
(1,'20120615 8:03:58 PM'),--
(2,'20120615 8:04:03 PM'),--*
(2,'20120615 8:04:08 PM'),--
(3,'20120615 8:04:13 PM'),--*
(3,'20120615 8:04:18 PM'),--
(3,'20120615 8:04:23 PM'),--
(2,'20120615 8:04:28 PM'),--*
(2,'20120615 8:04:33 PM');

;WITH x AS
(
  SELECT *, rn = ROW_NUMBER() OVER (ORDER BY time)
  FROM @x
)
SELECT x.value, x.[time]
FROM x LEFT OUTER JOIN x AS y
ON x.rn = y.rn + 1
AND x.value <> y.value
WHERE y.value IS NOT NULL; 
```

结果：

```
value  time
-----  -----------------------
1      2012-06-15 20:03:43.000
2      2012-06-15 20:04:03.000
3      2012-06-15 20:04:13.000
2      2012-06-15 20:04:28.000 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-29T15:12:21.277

```
DECLARE @x TABLE(value INT, [time] DATETIME)

INSERT @x VALUES
(0,'20120615 8:03:43 PM'),--
(1,'20120615 8:03:43 PM'),--*
(1,'20120615 8:03:48 PM'),--
(1,'20120615 8:03:53 PM'),--
(1,'20120615 8:03:58 PM'),--
(2,'20120615 8:04:03 PM'),--*
(2,'20120615 8:04:08 PM'),--
(3,'20120615 8:04:13 PM'),--*
(3,'20120615 8:04:18 PM'),--
(3,'20120615 8:04:23 PM'),--
(2,'20120615 8:04:28 PM'),--*
(2,'20120615 8:04:33 PM');

; with temp as
(
SELECT 
    value, [time],  lag(value,1,-1) over (order by [time] ) as lastValue
FROM    @x
) 
SELECT 
    [value],[time] 
FROM 
    temp 
WHERE value <> lastValue 
```

结果：

```
value   time
---------------------------
0   2012-06-15 20:03:43.000
1   2012-06-15 20:03:43.000
2   2012-06-15 20:04:03.000
3   2012-06-15 20:04:13.000
2   2012-06-15 20:04:28.000 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-22T04:09:29.297

我们也可以使用子查询来做到这一点

```
SELECT sub1.value, sub1.time FROM 
  (SELECT *,rn,id FROM 
     (SELECT *,row_number() over (partition by value order by time) AS rn, row_number() over (order by time) AS id FROM x ) order by time) sub1
  LEFT OUTER JOIN 
  (SELECT *,rn,id FROM 
     (SELECT *,row_number() over (partition by value order by time) AS rn, row_number() over (order by time) AS id FROM x ) order by time) sub2
  ON sub1.id = sub2.id + 1 
  WHERE sub1.rn - sub2.rn <> 1 OR sub2.rn IS NULL; 
```

因此，我比较了 2 行的值，如果它发生变化，则 rn 的差值将不等于 1，否则 rn 值将增加 1 所以，我选择了与下一行的 rn 值差值不为 1 的所有行，并且sub2.rn IS NULL 用于第一行，因为连接将从 id = 2 开始。

# java - Tomcat 找到欢迎文件但找不到其他 JSP

> ID：11127466
> 
> 赞同：0
> 
> 时间：2012-06-20T20:15:00.743
> 
> 标签：java, jsp, tomcat, tomcat7, web.xml

我确信我犯了一些疯狂的错误，但无法弄清楚。我刚刚安装了 Tomcat 7.0 并部署了只包含几个 JSP（简单测试）的“应用程序”。但是，当我运行tomcat并尝试访问页面时，如果我将它放在“welcome-file-list”中，我只能访问JSP，并且无法以任何其他方式访问它。有人可以帮忙，因为我无法弄清楚我做错了什么。

这是 webapp 结构 -

```
sampleapp -
   /META-INF
   /javascripts
   /stylesheets
   /WEB-INF
      web.xml
      /lib
      /classes
      /jsp
         /test1.jsp
         /test2.jsp 
```

这是 web.xml。除了欢迎文件列表之外，它真的没有任何东西 -

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>sampleapp</display-name>
  <servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
      <param-name>debug</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>listings</param-name>
      <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
      <param-name>fork</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>xpoweredBy</param-name>
      <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
    <url-pattern>*.jspx</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>/WEB-INF/jsp/test1.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

在此示例中，我将 Welcome-file 设置为 test1.jsp，因此当我运行 tomcat 并访问默认应用程序时`http://localhost:8080/sampleapp`，它会成功加载 test1.jsp 的内容。但是，如果我尝试访问 test2.jsp 的路径，我将无法这样做。同样，如果我将欢迎文件设置为 test2.jsp，我可以通过简单的访问来访问它，`http://localhost:8080/sampleapp`但是当我尝试显式访问 test1.jsp 或 test2.jsp 时，它会返回 404 错误。

任何人都可以帮助弄清楚出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:20:54.940

WEB-INF 目录无法从外部访问。如果您希望 JSP 可以从外部访问，则必须将它们放在 WEB-INF 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:22:11.710

由于您的项目不是标准的 Java Web 项目格式，因此您无法访问。首先，您需要将 Web 内容放在 WEB-INF 文件夹之外。类似于 WebContent 文件夹，然后在 web.xml 中为您的文件夹定义上下文。

# node.js - 哪里有一些在 Express.js 中显示动态数据的好例子

> ID：11127469
> 
> 赞同：0
> 
> 时间：2012-06-20T20:15:04.627
> 
> 标签：node.js, express, html-rendering

我正在尝试显示来自父子数据的各种数据元素，包括重复数据、分页数据、数据等。我想知道最好的网站是什么，提供教程或与此相关的其他信息。我主要使用 Express.js、Jade 来解决这个问题，并希望主要坚持这些，如果合理的话，可能会使用其他工具，如 knockout.js 或backbone.js。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:49:59.963

对于一般的 node.js 目的，我发现[http://howtonode.org/](http://howtonode.org/)非常有用，是最新的。

[对于 express.js，我认为，他们的文档很好， http](http://howtonode.org/) ://howtonode.org/ 上关于 Express.js的文章很少。这个问题包含许多关于如何使用 express.js [Learning Express for Node.js 的](https://stackoverflow.com/questions/8144214/learning-express-for-node-js)好资源。

我无法弄清楚你的意思，父母和孩子数据，重复数据。假设您的意思是存储在 Mongodb 中的数据的 JSON 服务。

*   RailwayJS 框架允许自动生成（脚手架）。 [在 node.js 中自动生成 Rest 服务](https://stackoverflow.com/questions/10096237/auto-generate-rest-service-in-node-js)。
*   一个简单的网络服务教程 [http://blog.nodejitsu.com/a-simple-webservice-in-nodejs](http://blog.nodejitsu.com/a-simple-webservice-in-nodejs)

如果您正在寻找更具体的资源，请提供详细信息。

# ios5 - 在 iOS5、XCode 4.3.2 的文本视图中禁用键盘交互

> ID：11127472
> 
> 赞同：0
> 
> 时间：2012-06-20T20:15:14.803
> 
> 标签：ios5, textview, uitextview, xcode4.3

有人可以告诉我如何在文本视图中禁用键盘吗？每当我点击单词时，键盘就会弹出，我可以操作我的原始文本。我只是希望它是可选择的，所以你可以复制、粘贴。我更喜欢在整个应用程序中禁用此功能。如果有人能告诉我如何以及在哪里实现这一点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:18:49.090

我认为它在检查器中，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T04:01:04.490

要禁用使用代码，请使用下面给定的代码。

继承 UITextFieldDelegate 协议 在您的视图控制器中添加文本

```
@interface YourViewController () <UITextViewDelegate> 
```

在 viewDidLoad 中将自己设置为委托：

```
yourUITextView.delegate = self;
Implement the delegate method below:

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{ 
   return NO; 
} 
```

# c# - SelectedIndices 更改的列表框

> ID：11127475
> 
> 赞同：2
> 
> 时间：2012-06-20T20:15:21.647
> 
> 标签：c#

是否有一些事件可以用来判断`SelectedIndices`列表框的属性何时发生变化？我想根据项目的某个属性值取消选择列表框中的项目。我已经连接了一个适用于 a`SelectedIndex`更改的事件，但不确定如何在`SelectedIndices`属性更改以进行多选时执行此操作。

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
     Curve curItem = (Curve)listBox1.SelectedItem;
     int index = listBox1.Items.IndexOf(curItem);

     if (curItem.newName == null)
     {
          listBox1.SetSelected(index, false);
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:32:50.267

您可以使用`ListBox.SelectedItems`和 LINQ 来查找所有`Curves`以`newName==null`取消选择它们：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    var nullNameCurves = listBox1.SelectedItems
        .Cast<Curve>()
        .Where(c => c.newName == null)
        .ToList();
    listBox1.SelectedIndexChanged -= listBox1_SelectedIndexChanged;
    foreach (Curve curve in nullNameCurves)
        listBox1.SetSelected(listBox1.Items.IndexOf(curve), false);
    listBox1.SelectedIndexChanged += listBox1_SelectedIndexChanged;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:24:17.257

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged)，每次选择更改时都会触发此事件：

> 如果将 SelectionMode 属性设置为 SelectionMode.MultiSimple 或 SelectionMode.MultiExtended，则对 SelectedIndices 集合的任何更改（包括从选择中删除项目）都将引发此事件。

所以基本上，您可以像使用单选一样使用它。

**样本：**

例如，如果您想取消选择所有带有 null 作为 newName 的项目：

```
foreach (var item in listBox1.SelectedItems)
{
    if ((item as Curve).newName == null)
    {
        int index = listBox1.SelectedItems.IndexOf(item);
        listBox1.SetSelected(index, false);
    }
} 
```

（我不确定您是否可以在 foreach 循环中取消选择项目，因为它会更改 SelectedItems 对象本身。如果它不起作用，您仍然可以制作这些项目的临时列表并在循环后取消选择它们。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:01:48.413

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Curve curItem = null;
        for (int i = 0; i < listBox1.SelectedItems.Count; i++)
        {
            curItem = (Curve)listBox1.SelectedItems[i];
            if (curItem != null)
            {
                int index = listBox1.Items.IndexOf(curItem);

                if (curItem.newName == null)
                {
                    listBox1.SetSelected(index, false);
                }
            }
        }
    } 
```

# maven - 在 Netbeans 中运行/调试 Maven JavaFX 2

> ID：11127477
> 
> 赞同：2
> 
> 时间：2012-06-20T20:15:23.120
> 
> 标签：maven, netbeans, javafx-2

我为 JavaFX 2 应用程序设置了一个 Maven 项目，它使用 javafxpackager throw exec-maven-plugin 来构建一个可运行的 jar。此构建过程运行良好，并且可以从命令行启动应用程序。

有谁知道如何修改 nbactions 以在 IDE 中运行和调试这个 jar？

在命令行上执行jar的命令是：

```
java -Djavafx.runtime.path=$JAVAFX_HOME/rt -jar ./target/MyApp.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T09:19:02.083

它的修改，对于每个“动作”标签，更改标签如下：

```
 <exec.args>-classpath %classpath  -Xbootclasspath/a:"C:/Program Files/Oracle/JavaFX 2.2 SDK/rt/lib/jfxrt.jar"  ${packageClassName}</exec.args> 
```

当然，更改“C:/Program...”以适合您的设置。

# yii - Yii：捕获特定控制器的所有异常

> ID：11127479
> 
> 赞同：18
> 
> 时间：2012-06-20T20:15:28.003
> 
> 标签：yii

我正在开发一个包含 REST API 组件的项目。我有一个专用于处理所有 REST API 调用的控制器。

有没有办法捕获该特定控制器的所有异常，以便我可以对这些异常采取与应用程序的其余控制器不同的操作？

IE：我想使用包含异常消息的 XML/JSON 格式的 API 响应来响应，而不是默认的系统视图/堆栈跟踪（这在 API 上下文中并不是很有用）。宁愿不必将控制器中的每个方法调用都包装在自己的 try/catch 中。

感谢您提前提供任何建议。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-11T11:50:16.797

**通过注册onError**和**onException**事件监听器，你可以完全绕过 Yii 的默认错误显示机制。

例子：

```
class ApiController extends CController
{
  public function init()
  {
    parent::init();

    Yii::app()->attachEventHandler('onError',array($this,'handleError'));
    Yii::app()->attachEventHandler('onException',array($this,'handleError'));
  }

  public function handleError(CEvent $event)
  {        
    if ($event instanceof CExceptionEvent)
    {
      // handle exception
      // ...
    }
    elseif($event instanceof CErrorEvent)
    {
      // handle error
      // ...
    }

    $event->handled = TRUE;
  }

  // ...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T09:16:34.543

我无法在控制器中附加事件，我通过重新定义 CWebApplication 类来做到这一点：

```
class WebApplication extends CWebApplication
{
protected function init()
{
    parent::init();

    Yii::app()->attachEventHandler('onError',array($this, 'handleApiError'));
    Yii::app()->attachEventHandler('onException',array($this, 'handleApiError'));
}

/**
 * Error handler
 * @param CEvent $event
 */
public function handleApiError(CEvent $event)
{
    $statusCode = 500;

    if($event instanceof CExceptionEvent)
    {
        $statusCode = $event->exception->statusCode;
        $body = array(
            'code' => $event->exception->getCode(),
            'message' => $event->exception->getMessage(),
            'file' => YII_DEBUG ? $event->exception->getFile() : '*',
            'line' => YII_DEBUG ? $event->exception->getLine() : '*'
        );
    }
    else
    {
        $body = array(
            'code' => $event->code,
            'message' => $event->message,
            'file' => YII_DEBUG ? $event->file : '*',
            'line' => YII_DEBUG ? $event->line : '*'
        );
    }

    $event->handled = true;

    ApiHelper::instance()->sendResponse($statusCode, $body);
}
} 
```

在 index.php 中：

```
require_once(dirname(__FILE__) . '/protected/components/WebApplication.php');
Yii::createApplication('WebApplication', $config)->run(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T00:51:25.570

您可以为每个控制器编写自己的 actionError() 函数。有几种方法可以做到[这里描述](http://www.yiiframework.com/forum/index.php/topic/15484-custom-errorhandler-for-specific-controller/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:31:14.410

我正在为 API 使用以下 Base 控制器，请注意，它不是无状态 API，但它也可以提供服务。

类 BaseJSONController 扩展 CController{

```
 public $data = array();

        public $layout;

        public function filters()
        {
                return array('mainLoop');
        }

        /**
         * it all starts here
         * @param unknown_type $filterChain
         */
        public function filterMainLoop($filterChain){
                $this->data['Success'] = true;
                $this->data['ReturnMessage'] = "";
                $this->data['ReturnCode'] = 0;
                try{
                        $filterChain->run();

                }catch (Exception $e){
                        $this->data['Success'] = false;
                        $this->data['ReturnMessage'] = $e->getMessage();
                        $this->data['ReturnCode'] = $e->getCode(); 
                }

                echo json_encode($this->data);
        }
} 
```

您还可以捕获 dbException 并通过电子邮件发送它们，因为它们有些关键，并且可以显示代码/数据库设计中的潜在问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T14:00:27.477

将此添加到您的控制器：

```
Yii::app()->setComponents(array(
    'errorHandler'=>array(
        'errorAction'=>'error/error'
    )
)); 
```

# php - Curl 和 gotomeeting.com

> ID：11127480
> 
> 赞同：1
> 
> 时间：2012-06-20T20:15:30.413
> 
> 标签：php, curl

我正在尝试使用 PHP Curl 自动注册[https://www3.gotomeeting.com/register/432624022](https://www3.gotomeeting.com/register/432624022)。

根据人们所做的更正，这就是我正在使用的：

```
<?

$array=array(
    'Name_First'=>'Steve',
    'Name_Last'=>'Jobs',
    'Email'=>'steve@jobs.com',
    'Template'=>'island/webinar/registration.tmpl',
    'Form'=>'webinarRegistrationFo‌​rm',
    'WebinarKey'=>'432624022',
    'ViewArchivedWebinar'=>'false',
    'registrant'=>'',
    'RegistrantTimeZoneK‌​ey'=>'55',
);

function dump($logArray) {
    echo '<pre>';
    print_r($logArray);
    echo '</pre>';
}

function go2webinar($array){

    $url='https://www3.gotomeeting.com/en_US/island/webinar/registration.flow';
    $url1='https://www3.gotomeeting.com/register/432624022';

    $cookie='/therightpath/cookie';
    $query=http_build_query($array);
    $c=curl_init();

    curl_setopt($c,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0.1) Gecko/20100101 Firefox/9.0.1');
    curl_setopt($c,CURLOPT_URL,$url);    
    curl_setopt($c, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($c,CURLOPT_POST,count($array));
    curl_setopt($c,CURLOPT_POSTFIELDS,$query);
    curl_setopt($c,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($c, CURLOPT_SSL_VERIFYPEER,false);
    curl_setopt($c, CURLOPT_SSL_VERIFYHOST,0);
    curl_setopt($c, CURLOPT_COOKIEFILE,$cookie);
    curl_setopt($c, CURLOPT_COOKIEJAR,$cookie);
    curl_setopt($c, CURLOPT_REFERER,$url1);

    $r=curl_exec($c);//result
    dump(curl_getinfo($c));

    if(curl_errno($c)) return curl_error($c);
    else{
        curl_close($c);
        return trim($r);
    }
}

//GotoMeeting
echo go2webinar($array); 
```

* * *

cookie 正在按应有的方式保存：

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

.gotomeeting.com    TRUE    /   TRUE    1371763493  g2mVisitor  FirstVisit%3D1340218507523%26LastVisit%3D1340227493492%26RSN%3DDEFAULT
www3.gotomeeting.com    FALSE   /   TRUE    0   g2mSession  SessionInfo%3D200000000139397572%253A2B00BFBA6275B45
www3.gotomeeting.com    FALSE   /   FALSE   0   JSESSIONID  abc6tY1HKr4Hh9l-3plGt 
```

但是，我现在收到“网络研讨会不可用”页面......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:55:17.587

这是工作脚本，我把它编码得太硬了，但你应该知道什么是不工作的。

1.  利用`curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);`
2.  用户代理`curl_setopt($c,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0.1) Gecko/20100101 Firefox/9.0.1');`
3.  始终使用 firebug/tamper data 找到正确的参数![这是篡改数据屏幕截图](../Images/b2f79dcd3c5a93edd677d45ef0d0c6ff.png)
4.  您应该发布到`$url = 'www3.gotomeeting.com/en_US/island/webinar/registration.flow';` 不`$url1='www3.gotomeeting.com/register/432624022';` 使用 $url1 作为推荐人。

    $query="Template=island%2Fwebinar%2Fregistration.tmpl&Form=webinarRegistrationForm&WebinarKey=432624022&ViewArchivedWebinar=false®istrant=&RegistrantTimeZoneKey=55&Name_First=BobS&Name_Last=Gnoomw&Email=asas%40cc.com&RegistrantTimeZoneKey=55";

    ```
     function curlit(){

        $url = 'https://www3.gotomeeting.com/en_US/island/webinar/registration.flow';
        $url1='https://www3.gotomeeting.com/register/432624022';

        $mypath = getcwd();
                $mypath = preg_replace('/\\\\/', '/', $mypath);
                $cookie = "$mypath/cookie.txt";
            $query="Template=island%2Fwebinar%2Fregistration.tmpl&Form=webinarRegistrationForm&WebinarKey=432624022&ViewArchivedWebinar=false&registrant=&RegistrantTimeZoneKey=55&Name_First=BobS&Name_Last=Gnoomw&Email=asas%40cc.com&RegistrantTimeZoneKey=55";
            $c=curl_init();

            curl_setopt($c,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0.1) Gecko/20100101 Firefox/9.0.1');
            curl_setopt($c,CURLOPT_URL,$url);    
            curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
            curl_setopt($c,CURLOPT_POST,count($array));
            curl_setopt($c,CURLOPT_POSTFIELDS,$query);
            curl_setopt($c,CURLOPT_RETURNTRANSFER,1);
            curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($c, CURLOPT_SSL_VERIFYHOST, 0);
            curl_setopt($c, CURLOPT_COOKIEFILE, $cookie);
            curl_setopt($c, CURLOPT_COOKIEJAR, $cookie);
            curl_setopt($c, CURLOPT_REFERER, $url1);
            $r=curl_exec($c);//result
            dump(curl_getinfo($c));

            if(curl_errno($c)) return curl_error($c);
            else{
                curl_close($c);
                return trim($r);
            }
        }
        function dump($logArray) {
            echo "<pre>";
            print_r($logArray);
            echo "</pre>";
        }

        //GotoMeeting
        curlit();

        ?> 
    ```

# java - 在android中的gridview底部添加一个按钮

> ID：11127484
> 
> 赞同：0
> 
> 时间：2012-06-20T20:15:45.050
> 
> 标签：java, android, android-layout, android-gridview

几天来，我一直在尝试将按钮放在网格视图的底部，但我仍然无法正常工作，也无法在任何地方找到可行的解决方案，以前有没有人这样做过？下面是我的代码和我试图实现的一个例子，任何帮助都会有很长的路要走，如果你能给我一个真正有效的答案，非常感谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/profile_user_avatar"
        android:layout_width="48px"
        android:layout_height="48px"
        android:layout_marginTop="5dp"
        android:adjustViewBounds="true" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="5dp" >

        <TextView
            android:id="@+id/profile_realname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textSize="20dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/profile_username"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="2dp"
            android:gravity="left" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tweets_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#FFFFFF"
            android:textSize="20dp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Tweets"
            android:textColor="#FFFFFF"
            android:textSize="15dp"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/followers_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#FFFFFF"
            android:textSize="20dp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Followers"
            android:textColor="#FFFFFF"
            android:textSize="15dp"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/following_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#FFFFFF"
            android:textSize="20dp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Following"
            android:textColor="#FFFFFF"
            android:textSize="15dp"
            android:textStyle="bold" />
    </LinearLayout>
</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView>

    <Button
        android:id="@+id/profile_button"
        style="@style/TextAppearance.Button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/gridView1"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@drawable/button_background"
        android:text="Load more photos" />
</RelativeLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/831add42b07a991f3f596ebfded60395.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:28:41.323

尝试使用这个：

```
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/profile_button"
    style="@style/TextAppearance.Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:background="@drawable/button_background"
    android:text="Load more photos" />

<GridView
    android:id="@+id/gridView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/profile_button"
    android:layout_alignParentTop="true"
    android:columnWidth="90dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp" >
</GridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:36:16.130

我同意@Frank Sposaro，但尝试使用：`android:layout_centerInParent="true"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T07:39:42.667

这对我有用：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
    android:id="@+id/feature_add_confirm_buttons"
    android:layout_alignParentBottom="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
        <Button
            android:id="@+id/feature_add_cancel_btn"
            android:text="@string/button_cancel"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content" />
    </LinearLayout>

<GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_alignParentTop="true"
    android:layout_above="@id/feature_add_confirm_buttons"
    android:id="@+id/feature_grid_types"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="30dp"
    android:horizontalSpacing="30dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
    >

</GridView>

 </RelativeLayout> 
```

# c# - 为asp.net控件调用javascript方法不起作用

> ID：11127485
> 
> 赞同：0
> 
> 时间：2012-06-20T20:15:46.997
> 
> 标签：c#, javascript, asp.net, referenceerror

这是我的 JavaScript：

```
$(document).ready(function () {
    function ShowHelp() {
        window.open('../WebHelp/' + '<%= SessionManager.CurrentDictionaryId %>' + '/mweb.htm#cshelp/assetsdetail.htm', '', 'toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes');
    }
    function RunPrint(values) {
        window.open('../Reports/Assets/AssetProfile.aspx?id=' + values, '', 'toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes');
    }
}); 
```

我有两个`<asp:Hyperlink>`这样的标签：

```
<asp:HyperLink ID="lnkHelp" runat="server" EnableViewState="False" ImageUrl="~/Images/Help.png"
        NavigateUrl="javascript:ShowHelp();" />
<asp:HyperLink ID="lnkPrint" ImageUrl="~/Images/PrintMed.png" runat="server" EnableViewState="false"
        NavigateUrl="javascript:GetSelectedToPrint();" /> 
```

在 Chrome 中运行调试器工具时，我收到以下消息：

```
"Uncaught ReferenceError: ShowHelp is not defined"
"(anonymous function)" 
```

我对javascript相当无知，但我觉得我知道的足够多，可以阅读那里的内容，但我看不到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:18:28.697

您是否尝试删除 $(document).ready(function(){ ？

如果您只想创建一个在加载控件后将触发的函数（在您的情况下），则不需要该代码。

# ruby-on-rails - rails - postgres 错误：原因：库版本不兼容：libpq.5.dylib 需要 1.0.0 或更高版本，

> ID：11127486
> 
> 赞同：10
> 
> 时间：2012-06-20T20:15:49.280
> 
> 标签：ruby-on-rails, ruby, macos, postgresql, osx-snow-leopard

我坚持在我的 Mac (10.6.8) 上设置 Ruby (1.9.3)、Rails 和 Postgres (9.0.8)。每次我运行时`rails console`都会出现以下错误：

```
/Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/pg-0.13.2/lib/pg.rb:4:in `require': dlopen(/Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/pg-0.13.2/lib/pg_ext.bundle, 9): Library not loaded: @loader_path/../lib/libssl.dylib (LoadError)
  Referenced from: /usr/lib/libpq.5.dylib
  Reason: Incompatible library version: libpq.5.dylib requires version 1.0.0 or later, but libssl.0.9.8.dylib provides version 0.9.8 - /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/pg-0.13.2/lib/pg_ext.bundle  
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/pg-0.13.2/lib/pg.rb:4:in `<top (required)>'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
    from /Users/dc/Documents/Aptana Studio 3 Workspace/http/config/application.rb:7:in `<top (required)>'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/railties-3.2.6/lib/rails/commands.rb:39:in `require'
    from /Users/dc/.rvm/gems/ruby-1.9.3-head@global/gems/railties-3.2.6/lib/rails/commands.rb:39:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我真的不知道如何解决这个问题。我已经尝试安装不同的 Postgres 版本，但仍然遇到相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:03:21.883

I ran into this also, but was able to fix it following the instructions on [python pip install psycopg2 install error](https://stackoverflow.com/questions/11538249/python-pip-install-psycopg2-install-error).

First, make sure you have the [most recent version of OpenSSL](http://www.openssl.org/support/faq.html#MISC1) installed:

```
MacBook Pro:~> openssl version -a
OpenSSL 1.0.0c 2 Dec 2010
built on: Mon Jan  3 17:26:21 PST 2011
platform: darwin64-x86_64-cc
options:  bn(64,64) rc4(ptr,char) des(idx,cisc,16,int) idea(int) blowfish(idx) 
compiler: /usr/bin/gcc-4.2 -fPIC -fno-common -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -arch x86_64 -O3 -DL_ENDIAN -DMD32_REG_T=int -Wall
OPENSSLDIR: "/opt/local/etc/openssl" 
```

...and note the OPENSSLDIR. On my system, it's in /opt/local/, because I installed it via MacPorts. I just needed to update the symlinks in /usr/lib/ for libssl.dylib and libcrypto.dylib so that they pointed to the correct versions in /opt/local/lib instead of the old version in usr/lib:

```
MacBook Pro:~> ls -la /usr/lib/libssl.dylib 
lrwxr-xr-x  1 root  wheel  33 Aug 17 12:25 /usr/lib/libssl.dylib -> /opt/local/lib/libssl.1.0.0.dylib
MacBook Pro:~> ls -la /usr/lib/libcrypto.dylib 
lrwxr-xr-x  1 root  wheel  36 Aug 17 12:28 /usr/lib/libcrypto.dylib -> /opt/local/lib/libcrypto.1.0.0.dylib 
```

You can create the links by using the `ln` command:

```
sudo ln -s /path/to/postgres/install/lib/libcrypto.dylib /usr/lib/libcrypto.dylib
sudo ln -s /path/to/postgres/install/lib/libssl.dylib /usr/lib/libssl.dylib 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T01:07:52.483

如上所述对文件进行符号链接对我不起作用。pg 总是会查看 libssl-0.9.8.dylib。

这个问题似乎包含正确的答案：[gem install pg --with-pg-config works, bundle failed](https://stackoverflow.com/questions/9234960/gem-install-pg-with-pg-config-works-bundle-fails)

归结为

`bundle config build.pg --with-pg-config=/Library/PostgreSQL/9.1/bin/pg_config`

（或您所针对的任何 pg）

其次是`gem uninstall pg`然后`bundle install`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:43:13.460

在一个项目中，这个解决方案（“gem install & uninstall pg”）很好。

但是在另一个项目中，它使用相同的 rails 和 Postgres 版本，我必须在 gemfile 中明确使用版本才能使其工作：

```
 gem 'pg', '0.14.1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T02:53:05.883

在这里找到了一个对我有用的解决方案： [https ://github.com/PostgresApp/PostgresApp/issues/109](https://github.com/PostgresApp/PostgresApp/issues/109)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T13:37:52.970

安装新的 PostgreSQL 版本（我用的是自制软件）

```
brew install postgres 
```

然后重新安装 gem pg：

```
gem uninstall pg
gem install pg 
```

希望能帮助到你。

# c++ - 整数的默认值？

> ID：11127487
> 
> 赞同：4
> 
> 时间：2012-06-20T20:15:55.547
> 
> 标签：c++

我的程序需要在程序启动时将几个浮点数设置为默认数字。当程序运行时，这些整数将被设置为它们的真实值。然而，这些真值可以是*任何实数*。我的程序将始终检查这些数字，以查看它们的值是否已从默认值更改。

例如，假设我有整数 A、B、C。所有这些整数都将在开始时设置为默认值（比如说-1）。然后随着程序的进行，假设 A 和 B 分别设置为 3 和 2。由于 C 仍处于默认值，因此程序可以得出结论，C 尚未被分配非默认值。

尝试找到唯一的默认值时会出现问题。由于数字的值可以设置为任何值，如果其设置的值与默认值相同，我的程序将不知道浮点数是否仍然具有默认值或其真实值与默认值相同.

我认为 NULL 作为默认值，但在 C++ 中 NULL 等于 0，导致同样的问题！

我可以创建一个由 bool 和 float 作为成员组成的整个对象，其中 bool 指示 float 是否已被分配了自己的值。然而，这似乎有点矫枉过正。是否有一个默认值我可以将我的浮点数设置为使得该值与任何其他值都不相同？（示例包括无穷大或 i）

我要求 C/C++ 解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:20:32.040

> 我可以创建一个包含一个 bool 和一个整数作为成员的整个对象，其中 bool 指示该数字是否已被分配了自己的值。然而，这似乎有点矫枉过正。

您所描述的在.NET中称为“可为[空类型”。](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.110%29.aspx)C++ 实现是[boost::optional](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)：

```
boost::optional<int> A;

if (A)
  do_something(*A); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T20:43:38.873

在二进制补码机器上，有一个整数值不如其他整数值：`INT_MIN`. 你不能通过否定它来产生一个有效的正值。由于它是整数范围内最没用的值，因此它是标记值的不错选择。它还有一个易于识别的十六进制值 0x80000000。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T20:18:57.033

没有位模式可以分配给不是实际 int 的 int。如果您确实没有超出范围的整数值，则需要保留单独的标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:19:19.210

如果有效值的域`int`是无限的，则唯一的选择是一个管理位，指示它是否被分配。

但是，您确定`MAX_INT`是理想的选择吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T20:20:25.050

无法保证您分配 int 的值不会等于另一个随机 int。确保您想要发生的事情发生的唯一方法是创建一个单独的布尔值来说明更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T20:20:29.873

不，您必须创建自己的数据类型，其中包含有关它是否已分配的信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T20:22:21.070

如果如您所说，没有整数值是禁止的，那么您不能分配默认的“未初始化”值。只需按照您在问题中的建议使用带有 int 和 bool 的结构。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T20:29:46.717

> 我可以创建一个包含一个 bool 和一个整数作为成员的整个对象，其中 bool 指示该数字是否已被分配了自己的值。然而，这似乎有点矫枉过正。

我的第一个猜测是有效地使用标志并标记每个变量。但这当然不是您唯一的选择。

1.  您可以使用指针（可以为 NULL）并动态分配内存。不是很方便。
2.  您可以选择一个几乎从未使用过的自定义值。然后，您可以将此值定义为默认值。Ofc，有时，您需要将此值分配给您的浮点数，但这种情况不会经常发生，您只需要跟踪这些变量。鉴于这种情况的发生，应该使用简单的链表。

# c# - 在运行时更改实体模型数据库

> ID：11127488
> 
> 赞同：0
> 
> 时间：2012-06-20T20:16:01.840
> 
> 标签：c#, .net, entity-framework-4

如何切换我的实体模型在运行时连接到的数据库？

例如，如果我有一个培训数据库和一个生产数据库，如何通过更改应用程序中的设置来使我的应用程序在两者之间切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:17:32.457

通常这是通过配置文件设置完成的。[这是关于 EF 连接字符串的 MSDN](http://msdn.microsoft.com/en-us/library/cc716756.aspx)，[这里有一些关于它的更多信息，基本上说它应该在你的 app.config 中](http://msdn.microsoft.com/en-us/library/bb896291.aspx)

而且，如果你想从代码中得到一些东西，[这里是一个代码项目](http://www.codeproject.com/Tips/234677/Set-the-connection-string-for-Entity-Framework-at)：

```
string connectionString = new System.Configuration.ConfigurationSettings.AppSettings["ConnectionString"]);

System.Data.SqlClient.SqlConnectionStringBuilder scsb = new System.Data.SqlClient.SqlConnectionStringBuilder(connectionString);

EntityConnectionStringBuilder ecb = new EntityConnectionStringBuilder();
ecb.Metadata = "res://*/Sample.csdl|res://*/Sample.ssdl|res://*/Sample.msl";
ecb.Provider = "System.Data.SqlClient";
ecb.ProviderConnectionString = scsb.ConnectionString;

dataContext = new SampleEntities(ecb.ConnectionString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:47:06.403

Justin Pihony 有正确的答案。如果您想同时访问两个数据库（来回切换）而不是更改配置并重新启动应用程序.....那么您有两个设置，一个用于 Train，一个用于 Prod，那么您可以像这样执行上下文：

```
string training = ConfigurationManager.ConnectionStrings["Train"].ToString();
string production = ConfigurationManager.ConnectionStrings["Prod"].ToString();

.....
EFContext context = null;
if (InTraining) 
   context = new EfContext(training);
else
   context = new EfContext(production); 
```

# extjs - 在 ext js 4 中为按钮设置“minWidth”默认配置

> ID：11127495
> 
> 赞同：1
> 
> 时间：2012-06-20T20:16:35.817
> 
> 标签：extjs, extjs4

我目前正在尝试了解 ext js 4 的主题功能，并且在按钮样式方面遇到了一些问题。

使用提供的 scss 变量设置按钮尺寸不太可能，但有一些 javascript 配置选项。因为我不想将这些设置应用于每个按钮实例，所以我正在寻找一种为按钮类设置“配置默认值”的方法。

设置默认高度时，以下方法效果很好：

```
Ext.button.Button.prototype.height = 15; 
```

不幸的是，这对于“minWidth”配置似乎是不可能的：

```
Ext.button.Button.prototype.minWidth = 1; //nope, sorry 
```

有没有办法为“minWidth”设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:25:26.957

如果您想为框架中的每个按钮更改它。使用超控系统。

**应用程序/覆盖/Button.js**

```
Ext.define('App.overrides.Button', {}, function() {
    Ext.override(Ext.button.Button, {
        minWidth: 20
    });
}); 
```

**应用程序.js**

```
Ext.onReady(function() {
    /*
     * Load Overrides
     */
    Ext.require([
        'App.overrides.Button'
    ]);
});

var app = Ext.Application({..... 
```

但是，我不确定这是多么明智，因为选项卡之类的东西从按钮延伸出来，并且可能会产生一些不利影响。但这就是它的完成方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:15:23.227

## 简短的回答

```
Ext.override(Ext.panel.Panel, {
    minButtonWidth: 1
});
Ext.override(Ext.button.Button, {
    minWidth: 1
}); 
```

## 更长的答案

设置`Ext.button.Button.prototype.minWidth = 1;`是正确的（最好使用简短答案中提到的覆盖），但被 ExtJs 设置默认 minWidth 的 75 的内部处理忽略`Ext.panel.Panel`（参见`bridgeToolbars()`函数）。因此，如果您要使用面板工具栏之外的按钮，那么您的初始尝试会奏效。

`makeButtons()`此外，在函数中还有一个硬编码的 minWidth 为 75 个按钮`Ext.window.MessageBox`。

在我看来，你应该打开一个错误报告@sencha，因为应该有一个主题化的、更全局的设置。

更新：这是用 ExtJS 4.1 测试的

# exchange-server - Exchange 2003 OWA galfind 仅返回 HTML 响应

> ID：11127504
> 
> 赞同：1
> 
> 时间：2012-06-20T20:17:28.830
> 
> 标签：exchange-server, webdav, outlook-web-app

我有一个查询 galfind 的例程，在大多数情况下，它会在发出基本 GET 后返回预期的 XML 响应。我现在在旧的（Exchange 2003）服务器上尝试它，galfind GET 只会返回 HTML 搜索表单。查询响应数据与表单内容一起正确返回，但最好以 XML 格式获取。所以两个相关的问题：

1.  Exchange 2003 中的 OWA 是否支持 galfind 的 XML 响应？
2.  如果是这样，如何修改 HTTP 请求或配置服务器以从 galfind 查询中检索 XML 格式的响应？

这是我一直在玩的一个示例 GET 请求：

> 得到
> 
> [http://mail.mydomain.com/exchange/administrator@mydomain.com/?cmd=galfind&dn=C](http://mail.mydomain.com/exchange/administrator@mydomain.com/?cmd=galfind&dn=C)
> 
> HTTP/1.1 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1) Gecko/20100101 Firefox/8.0.1
> 
> 接受：文本/xml
> 
> 授权：基本
> 
> 主机：mail.mydomain.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:41:05.847

将“MSIE 6.0”添加到用户代理似乎允许您切换到 XML 格式的响应，例如

> 得到
> 
> [http://mail.mydomain.com/exchange/administrator@mydomain.com/?cmd=galfind&dn=C](http://mail.mydomain.com/exchange/administrator@mydomain.com/?cmd=galfind&dn=C)
> 
> HTTP/1.1 用户代理：Mozilla/5.0（**MSIE 6.0；** Windows NT 6.1；WOW64；rv:8.0.1）Gecko/20100101 Firefox/8.0.1
> 
> 接受：文本/xml
> 
> 授权：基本
> 
> 主机：mail.mydomain.com

# javascript - 定义坐标系

> ID：11127506
> 
> 赞同：2
> 
> 时间：2012-06-20T20:17:34.050
> 
> 标签：javascript, charts, scale, d3.js

我刚刚进入 javascript 和 d3.js。请原谅这个简单的问题，但我厌倦了看这个无济于事。我敢肯定它非常明显和简单，但为什么这些条形图是自上而下而不是自下而上绘制的。我试图翻转域和范围中的值并尝试转换组，但似乎没有任何效果。谢谢。

```
<!DOCTYPE html>
<html>

<head>
<title>Test</title>

<script src="http://d3js.org/d3.v2.js"></script>

<style type="text/css">
    .background
    {
        background-color:Gray;
        border:solid 1px black
    }

    #container
        { 
             margin:auto;
         width:700;
    }

    body
        {
             margin:0px;
         padding:0px;
    }   

</style>
</head>

<body>
<div id="container"></div>

<script type="text/javascript">
    var data = {};

    data.distance = [3.17, 2.6, 3.08, 3.12, 3.14, 3.16, 3.19, 3.24, 3.21, 4.51, 3.18, 3.16,      3, 3.2, 3.07, 3.16, 3, 0.01, 2, 3.32, 3.33, 3, 3, 5, 3.41, 3.05, 3.01, 5, 5.03, 5, 1.68, 3, 3, 1.93, 1.96, 6.08, 4.27, 4.86, 3, 3, 2.51, 3.97, 2.87, 4, 4, 7.94, 6.64, 4, 4.03, 0.25, 2.64, 8.09, 1.96, 4.64, 5.48, 5.54, 7, 4, 4]

    var y = d3.scale.linear()
        .domain([0,d3.max(data.distance)])
        .range([0,250]);

    var chart = d3.select("div")
        .append("svg")
            .attr("class","background")
            .attr("width",10*data.distance.length)
            .attr("height",350)
        .append("g")

        chart.selectAll("rect")
            .data(data.distance)
            .enter()
                .append("rect")
                .attr("fill", "white")
                .attr("stroke","black")
                .attr("width", 10) 
                .attr("height",y)  
                .attr("x",function(d,i){return i *10});
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:24:24.123

如果同时添加`y`and `height`，则可以计算从底部开始的条形图：

```
.attr("height", 350)  
.attr("y", function(d) { return 350-d; }) 
```

# matlab - MATLAB 在 XY 平面上移动一个点

> ID：11127507
> 
> 赞同：0
> 
> 时间：2012-06-20T20:17:35.003
> 
> 标签：matlab

在 MATLAB 中，我有一个由有限数量的点表示的 XY 平面。x 的可能值存储在向量 X 中，y 的可能值存储在另一个向量 Y 中。我有一个点，比如 A，这样 A(1) 属于 X 是 x 坐标，A(2 ) 属于 Y 是 y 坐标。

如果 A 点在中间，它可以以 8 种方式之一移动：

```
 .   .   .                      .   A                .    .

          .   A   .        OR            .   .       OR       .    A

          .   .   .                                           .     . 
```

当然，如果点 A 在边上，这些点的集合会发生变化（有时只有 5 个，有时如果是角，则只有 3 个）。如何找到这些“1-hop”相邻点的集合？那么“k-hop”相邻点的集合呢？集合是指两个向量，一个用于 x 坐标，另一个用于 y 坐标。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:16:56.217

考虑以下代码：

```
%# create grid of 2D coordinates
sz = [5 6];
[X,Y] = meshgrid(1:sz(2),1:sz(1));

%# point A
A = [1 2]

%# neighboring points
k = 2;                               %# hop size
[sx,sy] = meshgrid(-k:k,-k:k);       %# steps to get to neighbors
xx = bsxfun(@plus, A(1), sx(:));     %# add shift in x-coords
xx = min(max(xx,1),sz(2));           %# clamp x-coordinates within range
yy = bsxfun(@plus, A(2), sy(:));
yy = min(max(yy,1),sz(1));
B = unique([xx yy],'rows');          %# remove duplicates
B(ismember(B,A,'rows'),:) = [];      %# remove point itself 
```

`A = (1,2)`带有`k=2`啤酒花的点的结果：

```
B =
     1     1
     1     3
     1     4
     2     1
     2     2
     2     3
     2     4
     3     1
     3     2
     3     3
     3     4 
```

以及解决方案的说明：

```
x A x x . .
x x x x . .
x x x x . .
. . . . . .
. . . . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:56:28.150

让我们说`A = [Xcenter Ycenter]`

对于 K-hop，您可以访问点：

```
pointsX = [];
pointsY = [];
for i=-k:k
  pointsX = [pointsX  Xcenter+i]; 
  pointsY = [pointsY  Ycenter+i];
end 
```

此外，您可以按顺序坐标过滤这些点并删除异常值。例如考虑

```
(1,1)  (1,2)  (1,3)
(2,1)  (2,2)  (2,3)
(3,1)  (3,2)  (3,3) 
```

现在您知道允许的最小值 X 和 Y 为 1，因此只需过滤掉任何纵坐标和/或横坐标小于该值的点。

# c# - 如何模拟对 url 的访问？

> ID：11127510
> 
> 赞同：5
> 
> 时间：2012-06-20T20:17:41.997
> 
> 标签：c#, asp.net

我有一个用户提交订单的页面，在他们提交订单后，我想点击一个 url ( `http://externalsite.com?id=12345&sessionid=abc123`) 而不实际将它们重定向到外部页面。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:19:31.660

当然，使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)服务器端代码中的 an 。这是一个例子：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(
    "http://externalsite.com?id=12345&sessionid=abc123");
request.Method = "GET";

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
using (StreamReader reader = new StreamReader(response.GetResponseStream()))
{
    string result = reader.ReadToEnd();
    // Process the response text if you need to...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T20:20:26.487

如果您需要用户的 cookie（登录详细信息和其他用户设置）`http://externalsite.com/`，您可以嵌入一个*或*伪造的图像*或*使用来自用户浏览器的 ajax 请求。[`<iframe>`](http://www.w3.org/TR/html4/present/frames.html#h-16.5)

 **使用[`<iframe>`](http://www.w3.org/TR/html4/present/frames.html#h-16.5)：

```
<iframe src="http://externalsite.com?id=12345&sessionid=abc123" width="1" height="1" frameborder="0"></iframe> 
```

使用“伪造”图像请求（如果您可以忽略任何潜在的图像类型问题）：

```
<img src="http://externalsite.com?id=12345&sessionid=abc123" width="1" height="1" /> 
```

以最简单的形式使用[jQuery 的跨浏览器 ajax 支持：](http://api.jquery.com/category/ajax/)

```
$.ajax({
    url: "http://externalsite.com?id=12345&sessionid=abc123"
}); 
```

您还可以应用其他格式来隐藏 iframe 或图像，或者在其达到访问其他服务器的目的时使用 javascript 将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T20:19:58.747

您可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类在服务器端 Asp.Net 代码中发出 HTTP 请求。然后，您可以对生成的 html 做任何您喜欢的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:45:26.233

结合上面来自 voithos 和 Joel Purra 的两个答案，我建议您也考虑第三种选择。以下是我对每一个的评价：

1) 更可靠的访问站点的方法是在服务器端作为您的操作处理程序的一部分来实际提交用户信息。这可以通过上面的 voithos 方法轻松完成：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(
    "http://externalsite.com?id=12345&sessionid=abc123");
request.Method = "GET";

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
using (StreamReader reader = new StreamReader(response.GetResponseStream()))
{
    string result = reader.ReadToEnd();
    // Process the response text if you need to...
} 
```

这允许您的服务器访问他们的服务器并确保它被调用。这种方法的缺点是它使您的服务器具有辅助 HTTP 请求的开销。如果另一台服务器很慢，这可能会产生阻塞问题，从而导致您的终端明显变慢。你可以通过多线程/异步来解决这个问题——但你明白了：它引入了一堆你无法控制的问题需要解决——但是——它确保你知道远程源是否被击中，并且回复是什么。

2) 或者，如果您的用户正在发布实际帖子并将 HTML 响应作为新页面返回，您可以简单地将 Joel Purra 的响应注入该结果页面的 HTML，强制用户的浏览器负责访问远程服务器。

```
<div style="display: none;">
 <iframe src="http://externalsite.com?id=12345&sessionid=abc123"></iframe>
</div> 
```

这种方法的缺点是，如果您的客户端出于某种原因触发请求并且不等待下一页加载，则外部站点返回 404 错误等，不仅外部处理不会完成 -你不会知道它没有完成。

3) 如果您有能力使用 jQuery 等客户端库来进行处理，我建议您将所有表单提交以内联和异步方式进行。该方法将是这样的：

```
<script type="text/javascript">
    $(document).bind('ready', function () {
        $('#formSubmitButton').bind('click', function (ev) {
            ev.preventDefault();  // These two lines stop the default processing from
            ev.stopPropagation(); // occurring on form-submit (i.e. no full post-back)

            // This line starts an asynchronous call to the server, posting your form
            // data itself.
            $.ajax({
               url: '/My/Post/Url',
               type: 'POST',
               async: false,

               // You could use a library for this kind of form parsing. I suggest
               // http://www.json.org/js.html - for serialization, and 
               // http://code.google.com/p/form2js/ - for form conversion. It's great.
               data: { my: 'form', data: 'fields' },

               success: function (data) {
                   $.ajax({
                       url: '/The/External/Url',
                       type: 'POST',
                       async: false,

                       data: { external: 'data', goes: 'here' },
                       success: function (remoteData) {
                           if (remoteData) // validate response here
                               displaySuccess();
                           else
                               displayFailure();
                       },
                       error: displayFailure
                   });
               },
               error: displayFailure
            });
        });
    });
</script> 
```

在这种方法中——你在自己的服务器上发帖，成功后——立即向远程服务器发出第二个请求。但是，因为您要等到第二个请求已被触发之后才向用户显示成功/失败 - 您知道至少在 UI 层，两个请求都已在客户端获得离开页面的队列之前发出。

所以 - 从工作流程和开销的角度来看可能更安全 - 但是，它需要您在 JavaScript 中编写一些 UI 级别的逻辑，这可能会出现问题，具体取决于您的项目。**

# c# - WPF DataGrid 和 ScrollViewer 性能下降

> ID：11127511
> 
> 赞同：8
> 
> 时间：2012-06-20T20:17:44.283
> 
> 标签：c#, .net, wpf, performance

我对数据网格有这种风格：

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type DataGrid}">
            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
                    <ScrollViewer.Template>
                        <ControlTemplate TargetType="{x:Type ScrollViewer}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter"
                                                                Grid.Column="1"
                                                                Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>

                                <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                        CanContentScroll="{TemplateBinding CanContentScroll}"
                                                        Grid.ColumnSpan="2"
                                                        Grid.Row="1" />

                                <ScrollBar x:Name="PART_VerticalScrollBar"
                                           Grid.Column="2"
                                           Maximum="{TemplateBinding ScrollableHeight}"
                                           Orientation="Vertical"
                                           Grid.Row="1"
                                           Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                           ViewportSize="{TemplateBinding ViewportHeight}"/>

                                <Grid Grid.Column="1" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <ScrollBar x:Name="PART_HorizontalScrollBar"
                                               Grid.Column="1"
                                               Maximum="{TemplateBinding ScrollableWidth}"
                                               Orientation="Horizontal"
                                               Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportWidth}"/>
                                </Grid>
                            </Grid>
                        </ControlTemplate>
                    </ScrollViewer.Template>

                    <Grid>
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                        Grid.Row="0" />

                        <Canvas Width="128"
                                VerticalAlignment="Stretch"
                                HorizontalAlignment="Left"
                                Grid.Row="0"
                                x:Name="Image" />
                    </Grid>
                </ScrollViewer>
            </Border>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

我知道，如果您在数据网格上加载大量数据，性能会受到影响。我可以使用虚拟化来减轻对性能的影响，但是，一旦我将网格放入自定义滚动查看器中，虚拟化就会丢失。

我正在尝试取回它，但我不确定如何——同时仍保留`Image`在我的 XAML 中命名的元素。

基本上，我想要一个带有数据网格内容的图像滚动，上面的代码工作正常，只是我不知道如何启用虚拟化。甚至可能吗？

**更新：**看起来我发现了一个问题。模板中的最后一个`Grid`导致问题：

```
<Grid>
    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                    Grid.Row="0" />

    <Canvas Width="128"
            VerticalAlignment="Stretch"
            HorizontalAlignment="Left"
            Grid.Row="0"
            x:Name="Image" />
</Grid> 
```

一旦我取出`Canvas`和`Grid`取出，只留下`ItemsPresenter`，然后它又快了。我怎样才能快速获得它并且仍然保留它`Canvas`？

**更新 2：**我如何为上面显示的我应用这个（[ScrollViewer 使用 DataGrid 的缓慢性能](https://stackoverflow.com/a/7256780/283055)）策略`Grid`？我试过这个：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Rectangle Name="sizingElement" Grid.Row="0" Fill="Transparent" Margin="1"/>

    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                    Grid.Row="0"
                    Height="{Binding ElementName=sizingElement, Path=ActualHeight, FallbackValue=1}" />

    <Canvas Width="128"
            VerticalAlignment="Stretch"
            HorizontalAlignment="Left"
            Grid.Row="0"
            x:Name="Image" />
</Grid> 
```

但是，现在滚动条消失了？

我意识到我不能虚拟化 a `Canvas`，我也不需要。事实上，整体`Canvas`被绘制，我没有逻辑将它分成更小的部分。只要我可以保持行虚拟化，完全渲染图像是完全可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:06:11.143

我已经为基于 TreeView (.Net 4.0) 的自定义控件进行了虚拟化。我修改了一些样式以匹配 DataGrid，希望它适用于您的情况：

```
 <Style TargetType="{x:Type DataGrid}">
<Setter Property="OverridesDefaultStyle" Value="True" />
<Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True" />
<Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling" />
<Setter Property="BorderThickness" Value="1" />
<Setter Property="ItemsPanel">
  <Setter.Value>
    <ItemsPanelTemplate>
      <VirtualizingStackPanel IsItemsHost="True" VirtualizingStackPanel.IsVirtualizing="True"
                              VirtualizingStackPanel.VirtualizationMode="Recycling" />
    </ItemsPanelTemplate>
  </Setter.Value>
</Setter>
<Setter Property="Template">
  <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGrid}">
      <Border x:Name="Border" Grid.Column="0" Background="{TemplateBinding Background}"
              BorderBrush="{StaticResource SolidBorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2">
        <DockPanel>

            <ScrollViewer x:Name="PART_Body_Scroll" Background="White" HorizontalScrollBarVisibility="Auto"
                        VerticalScrollBarVisibility="Auto" CanContentScroll="True">

              <ItemsPresenter x:Name="ItemsHost" VirtualizingStackPanel.IsVirtualizing="True"
                            VirtualizingStackPanel.VirtualizationMode="Recycling" />

          </ScrollViewer>

        </DockPanel>
      </Border>
    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:21:05.473

问题是虚拟化只有在滚动查看器的内容支持 IScrollInfo / VirtualizingPanel 时才有效。

据我所知，您希望您的项目带有画布，其下方有一些东西 - 全部在您的滚动区域内。它实际上是你想要的一种特殊的行吗？如果是这样，您可以那样做并插入一个特殊的行吗？或者您可以将其移到数据网格之外 - 或尝试使用 RowDetails - 这与我所知道的外观不同 - 但使用起来更容易。

要使虚拟化与您的画布一起工作，您的画布必须位于虚拟化面板内。

# c++ - 我可以阻止派生类调用自己的函数吗？(C++)

> ID：11127514
> 
> 赞同：0
> 
> 时间：2012-06-20T20:18:06.253
> 
> 标签：c++, inheritance, private-members, defensive-programming

考虑以下基类，它将计算我调用 CallDerivedFunction 的次数：

```
class B {
  public:
    B() {numCalls = 0;}
    void CallDerivedFunction() {numCalls++; DerivedFunction();}
    int GetNumCalls() {return numCalls;}
  private:
    virtual void DerivedFunction() = 0;
    int numCalls;
}; 
```

除了我之外，其他人将编写实现 DerivedFunction 的派生类。但是，我试图计算调用 DerivedFunction 的次数。

有什么方法可以防止派生类 D 直接调用它自己的 DerivedFunction 实现，例如。不允许：

```
class D : public B {
  private:
    void DerivedFunction() {
      if(<some condition>) DerivedFunction(); // I don't want to allow this.
      if(<some condition>) CallDerivedFunction(); // This is OK.
    }
}; 
```

注意：好的，当然这是一个简化；更普遍的问题是，当我的基类应该充当管理器并为派生类的集合执行跟踪使用模式等操作时，我可以强制派生类通过管理器类调用吗？还是我必须依靠派生类开发人员来做正确的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T22:16:15.270

是的，你可以这样做——我相信这被称为密码习语。

您向您的基类添加一个“关键”帮助类，只有基类可以实例化（即ctor 是私有的，但基类的朋友），但派生类可以看到。然后，您将对该辅助类的引用添加到您希望“锁定”的函数的签名中，以便只有基类可以调用它——因为它是唯一可以实例化“键”的类。

```
class A
{
   public:
     class Key {Key(); friend ::A;};
     // Only A can call this, since only A can instantiate A::Key
     virtual void Foo(A::Key&)=0; 
};

class B:public A
{
  public:
    virtual void Foo(A::Key&) override
    {
      // B can override this...
    }

    void Bar()
    {
      Key k; // <- this wont compile, so you cannot call Foo from B
      this->Foo(k);
    }
}; 
```

请注意，这不会像您的示例中那样阻止递归。但是您可能可以通过使用值而不是引用并禁用键的复制构造函数来使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:21:47.633

如果该函数是 Private ，您将如何在 D 类中调用 DerivedFunction ？这意味着您只能从 B 类调用 CallDerivedFunction

# javascript - RegEx 用于 5 位 zip 或空

> ID：11127515
> 
> 赞同：6
> 
> 时间：2012-06-20T20:18:12.463
> 
> 标签：javascript, regex

我有这个正则表达式可以检查 5 位数字`^\d{5}$`

如何更改它以使其对于空字符串也返回 true？

```
<script type="text/javascript">
var regex = /^\d{5}$/;

alert(regex.test(12345));
alert(regex.test(''));
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T20:19:33.990

将其括起来`()`并添加一个`?`以使整个模式可选。实际上，您要么匹配`^\d{5}$`OR `^$`（空字符串）。

```
var regex = /^(\d{5})?$/;

console.log(regex.test(12345));
console.log(regex.test(''));
// true
// true

// Too long, too short
console.log(regex.test(123456));
console.log(regex.test('1'));
// false
// false 
```

请注意，除非您打算对 5 位数字做一些事情而不是证明它们存在，否则您可以使用非捕获组`(?: )`来节省一点点资源。

```
var regex = /^(?:\d{5})?$/; 
```

# list - 使用不可变列表是否需要大量内存？

> ID：11127516
> 
> 赞同：0
> 
> 时间：2012-06-20T20:18:13.930
> 
> 标签：list, memory, immutability

想象一下，您正在模拟粒子物理。然后，您的每个对象都有一个以每秒数次的速度变化的位置向量。如果您的向量没有被破坏而只是被复制，这不会导致您的程序在结束之前淹没您的内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:21:33.303

如果您在谈论 java，垃圾收集是自动的，并且可以随时发生。我制作了一个程序，每秒将 matrix1 复制到 matrix2 并将 matrix2 复制到 matrix3（每个 2k 个元素）1000 次。没问题 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:32:55.187

> 想象一下，您正在模拟粒子物理。

我会尽力。

> 然后，您的每个对象都有一个位置向量

我只是假设这些只是每个 sim 中少数抽象的基本粒子，而不是 TB 的实验数据。

> 它以每秒数次的速度变化。如果您的向量没有被破坏而只是被复制，这不会导致您的程序使用过多的内存直到它结束吗？

除了上述所有内容之外，这是一个非常基本的问题。答案是“视情况而定”。

你的语言垃圾被收集了吗？它特别是什么语言（没有双关语）？

你需要历史数据吗？或者更一般地说，首先不破坏向量的原因是什么？是否所有这些仍然被积极使用，被引用？

如果您需要所有这些用于 sim，即上述问题的答案是：是的，但您无能为力。也许a）使用大小优化的，可能是自定义的，数据和列表类型和b）如果实际适用-取决于数据的波动性-应用允许您仅存储差异的模式（未更改的向量可以存储为对以前的版本等）

如果您不需要它们来运行 sim，但需要保留它们“以备后用”，只需将它们以足够大的块刷新到磁盘中，以免浪费 IO 周期，在该步骤之后，同样适用于...：

如果您根本不需要它们，请确保让垃圾收集器有效工作（同样，细节取决于所使用的语言）或释放它们或重新使用分配的内存等......

这是一个非常笼统的问题，你给出的上下文虽然让你很有趣，但并没有真正给我们太多的继续。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T20:21:14.957

当然，这取决于列表的大小。

我不会将粒子物理学中的位置向量放在不可变列表类别中，因为它们很可能是瞬态的和不断变化的（除非你打破了费米原理并将它们固定下来。）

我会说美国各州缩写的列表会是一个更好的候选者，因为那些不会改变 - 不包括分裂运动和战争。

# php - Wordpress - 主页和内页都必须列出最近的帖子：如何链接主页中的内页？

> ID：11127526
> 
> 赞同：0
> 
> 时间：2012-06-20T20:18:34.367
> 
> 标签：php, html, wordpress

我在使用 Wordpress 时遇到问题。我想做的网站主页有一个菜单和一个名为“文章”的链接。我的问题是我不知道“文章”应该链接到哪里。

在我使用模板的主页上`front-page.php`，有一个滑块显示最近的帖子。我正在使用 The Loop 来获取帖子并显示它们。然后是“文章”页面的模板，它还必须列出最近的帖子，但使用不同的布局。我已经编写了所有 HTML 代码并包含了 The Loop，但我不知道如何在 Wordpress 中显示该页面。

例如，我尝试命名文件`home.php`，然后将我的链接指向它。但是当页面加载时，它会抛出一个错误，`Call to undefined function get_header()`就像没有加载 Wordpress 函数一样。我猜他们并没有真正加载，但为什么呢？该文件在我的主题目录中，为什么我的方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:25:57.513

步骤是这样的：-

1.  在 wordpress 中创建一个名为 Articles 的空白页面。
2.  获取该页面的 slug 名称或页面 ID。
3.  在文章链接中提供该页面链接。
4.  现在创建一个新的自定义模板，或者您已经创建了 home.php
5.  在 home.php 的顶部给出一个模板名称。
6.  现在将该模板分配给您创建的文章页面。

按照上述步骤，您可以分配自定义代码并将其分配给页面。仅供参考，这里是模板创建教程的链接。

编辑：忘记放置教程链接

*   [http://www.wordpressmax.com/customize-wordpress/custom-page](http://www.wordpressmax.com/customize-wordpress/custom-page)
*   [http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch](http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch)

# python - Python中带有minidom的MemoryError

> ID：11127529
> 
> 赞同：2
> 
> 时间：2012-06-20T20:18:48.047
> 
> 标签：python, minidom

我在 Python 中有一个带有 minidom 解析器的 MemoryError。我正在读取 8000 个小文件（大多数小于 50 Kb），并且在读取 2500 次后出现此错误......`

```
Traceback (most recent call last): 

 File "C:\eclipse\plugins\org.python.pydev.debug_2.4.0.2012020116\pysrc\pydevd.py", line 1307, in <module>
    debugger.run(setup['file'], None, None)
  File "C:\eclipse\plugins\org.python.pydev.debug_2.4.0.2012020116\pysrc\pydevd.py", line 1060, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:\Users\calculator_2012.py", line 81, in <module>
    file_content, economicFlow, elementaryFlow = XML_reader(spoldFile)
  File "C:\Users\XML_reader.py", line 10, in XML_reader
    xmltree = parse(spold_filename)
  File "C:\Python27\lib\xml\dom\minidom.py", line 1914, in parse
    return expatbuilder.parse(file)
  File "C:\Python27\lib\xml\dom\expatbuilder.py", line 924, in parse
    result = builder.parseFile(fp)
  File "C:\Python27\lib\xml\dom\expatbuilder.py", line 207, in parseFile
    parser.Parse(buffer, 0)
  File "C:\Python27\lib\xml\dom\expatbuilder.py", line 294, in character_data_handler_cdata
    _append_child(self.curNode, node)
  File "C:\Python27\lib\xml\dom\minidom.py", line 274, in _append_child
    def _append_child(self, node):
  File "C:\eclipse\plugins\org.python.pydev.debug_2.4.0.2012020116\pysrc\pydevd.py", line 942, in trace_dispatch
    traceback.print_exc()
  File "C:\Python27\lib\traceback.py", line 232, in print_exc
    print_exception(etype, value, tb, limit, file)
MemoryError 
```

有没有人可以建议“无内存泄漏”解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:57:32.817

我还建议使用内置的 cElementTree。Minidom 有很多问题：/

否则 lxml 也相当不错，并且有更多的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T03:28:33.013

我似乎minidom可以占用很多内存。

我尝试解析一个 56MB 的文件，读取它需要 8G 内存。

你算了。。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:29:23.157

libxml2 更快并且没有内存泄漏，但它太 C 了，没有任何好处，而且文档很糟糕

lxml 是 libxm2 和 etree 模块之上的一层，因此这是具有 libxml2 性能的 python 方式

[http://lxml.de/](http://lxml.de/)

编辑：错别字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:17:31.600

好吧，回溯表明您正在 PyDev 调试器中运行，那么，您是否尝试在没有调试器的情况下在 Eclipse 中运行它？

# ios - iOS 开发者计划公司分布

> ID：11127531
> 
> 赞同：1
> 
> 时间：2012-06-20T20:18:53.990
> 
> 标签：ios, xcode, certificate

所以我对 xcode 和 iOS 很陌生，只是习惯了一切。我已经成功地理解了开发者证书是如何工作的，但我对分发证书感到困惑。由于公司的每个成员都使用相同的分发证书，私钥应该分配给谁？对不起，如果这没有意义，但我很难掌握如何使用它。我为自己（管理员角色）成功创建了一个 Dist Cert，它可以工作，我可以创建上传到 TestFlight 的 .ipa 文件，但我团队中的其他人将如何使用这个证书？我需要给他们我的私钥吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:22:57.267

私钥应位于编译应用程序的开发人员的钥匙串中。编译和打包后，他可以将二进制文件和配置文件分发给公司中的其他人。

这是 AdHoc 和 Enterprise 分发的工作方式。

如果需要，您可以将私钥从创建它的开发者的钥匙串中导出为 p12 文件，然后安装在其他机器上。这样，不止一个开发人员可以创建和分发二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:24:06.067

理论上，将私钥分配给谁并不重要。在实践中，您希望它成为您公司中更负责任的人之一（您作为帐户的管理员角色，这是有道理的）。

编译应用程序版本以进行分发的每个人都需要使用该证书，并且需要您的私钥副本。并不是每个人都必须拥有私钥的副本，因为您可以只有一个集中位置来构建分发包，并且该机器上将安装私钥

# c++ - c++ clock_gettime() 和夏令时

> ID：11127538
> 
> 赞同：2
> 
> 时间：2012-06-20T20:19:27.280
> 
> 标签：c++, time, clock, dst

我在我的 C++ 程序中使用 clock_gettime() 来获取当前时间。但是，返回值是UTC 纪元以来的秒数。在夏令时期间，当时间偏移一小时时，此代码可能会在我的时区混乱。

系统本身有 NTP 同步它以始终在 EST 中提供正确的时间。有没有办法让clock_gettime() 报告当地时间而不是UTC，这样我就可以避免夏令时问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:31:27.763

意识到这`time`也报告了自 1970 年初以来的秒数（在 a 中`time_t`）。如果你把 的`tv_sec`成员`timespec`传递给`localtime`or `localtime_r`，你应该得到你想要的。

```
timespec tsv;
clock_gettime(CLOCK_REALTIME, &tsv);
time_t t = tsv.tv_sec; // just in case types aren't the same
tm tmv;
localtime_r(&t, &tmv); // populate tmv with local time info 
```

您可以随心所欲地处理`tv_nsec`成员。`timespec`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T21:49:35.473

如果您使用的是 Windows，则可以使用此[GetTimeZoneInformation](https://msdn.microsoft.com/en-us/library/ms724421%28VS.85%29.aspx)，但您必须包含 Windows API。

实现此目的的另一种方法是 struct tm。您将在此处找到详细信息：[struct tm](http://www.cplusplus.com/reference/ctime/tm/)。“如果夏令时有效，夏令时标志 (tm_isdst) 大于零，如果夏令时无效，则为零，如果信息不可用，则小于零。” 我认为这是更简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:24:32.990

如果您能够使用 Boost，则可以使用日期时间库显式控制所有这些：http: [//www.boost.org/doc/libs/1_49_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time.html)

我不得不在各种平台和各种语言上处理时间，我发现 boost 库比其他任何可用的库都优越得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-09T18:35:12.500

```
#include <time.h>
time_t rawtime;
struct tm *timeinfo;

    time(&rawtime);
    timeinfo = localtime(&rawtime);
    if (timeinfo->tm_isdst)
        Hour -= 1; // daylight savings time 
```

# javascript - EXT JS 4 折线图显示数据不正确

> ID：11127542
> 
> 赞同：1
> 
> 时间：2012-06-20T20:19:42.977
> 
> 标签：javascript, extjs, charts

[我的问题与这个 SO question](https://stackoverflow.com/q/6802158/101294)中描述的问题非常相似，但并不完全相同。

我正在从数据库中动态填充一个带有时间戳和一个应该显示在折线图上的整数值的图表。图表显示数据不正确。例如，这个数据集有 3 个项目，y = 1, y = 5, y = 1 与下面对应的 X 值时间戳匹配。![外部图表问题](../Images/4281a8e6a7b932e2ff8578bbaa2690a8.png)

此图表在 X 轴上指示的时间戳处具有 y=1 和 y =1 的两项。问题是，图表在这里重复了两次。不知道发生了什么。![EXT Funky Y 轴](../Images/5572a427d39ea718cd8d3a894037fed6.png)

如您所见，突出显示的元素表示该点应在 y = 5 处绘制，而不是 y = 1.5ish。最左边的点也应该从 y = 1 开始，而不是 y = 0。我整天都在阅读文档、论坛和 SO，我很困惑。我什至现在已经重写了两次愚蠢的东西来遵循“好”的例子，但这似乎也没有帮助。

型号代码，

```
 Ext.define('ROOT.model.dataset', {
    extend: 'Ext.data.Model',
    alias: 'event',
    fields: ['count', 'time'],

    constructor: function (config) {
        this.callParent(arguments);
        Ext.apply(this, config);
    }
}); 
```

图形代码，

```
Ext.define('Root.view.ChartPanel', {
    extend: 'Ext.panel.Panel',
    title: 'Event Metrics',

    initComponent: function () {
        Ext.apply(this, {
            store: new Ext.data.SimpleStore({fields: [
            {name: 'count', type: 'int'},
            {name: 'time', type: 'string'}
            ]})
        });
        this.callParent(arguments);

        //CREATE CHART
        this.barChart = Ext.create('Ext.chart.Chart', {
            renderTo: Ext.getBody(),
            width: 700,
            height: 500,
            animate: false,
            store: this.store,

            axes: [
                {
                    type: 'Numeric',
                    position: 'left',
                    fields: ['count'],
                    label: {
                        renderer: Ext.util.Format.numberRenderer('0,0')
                    },
                    title: 'Count',
                    grid: true,
                    adjustMaximumByMajorUnit: false,
                   adjustMinimumByMajorUnit: false,
                    minorTickSteps: 5,
                    majorTickSteps: 3,
                    minimum: 0
                },
                {
                    type: 'Category',
                    position: 'bottom',
                    fields: ['time'],
                    title: 'Date'
                }
            ],

            series: [
                {
                    type: 'line',
                    axis: ['left', 'bottom'],
                    highlight: true,
                    tips: {
                        trackMouse: true,
                        width: 175,
                        height: 20,
                        renderer: function(storeItem, item) {
                            this.setTitle(storeItem.get('time') + ': ' + storeItem.get('count'));
                        }
                    },
                  /*  label: {
                        display: 'insideEnd',
                        field: 'count',
                        renderer: Ext.util.Format.numberRenderer('0'),
                        orientation: 'horizontal',
                        color: '#333',
                        'text-anchor': 'middle',
                        constrast: true
                    },*/
                    xField: 'time',
                    yField: ['count'],
                    markerConfig: {
                        type: 'cross',
                        size: 4,
                        radius: 4,
                        'stroke-width': 0
                    }
                }   
            ]
        });
        this.add(this.barChart);
    }, //end init

    refreshEventChart: function (data) {
        this.clear();
        this.store.loadData(data);
        this.barChart.redraw();
    },

    clear: function() {
        this.store.removeAll();
        this.barChart.surface.removeAll();
    }
}); 
```

任何帮助解决这个问题将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:21:01.420

我发现了问题。事实证明，当我请求数据时，我的数据提供者没有将值从字符串转换为整数——因此图表看起来很不稳定。在修改数据提供程序以确保计数字段始终生成整数后，当来自服务器时，图表开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:17:07.130

我遇到了同样的问题，在使用 JSON_NUMERIC_CHECK 将您的解决方案应用于我的 php 代码之后

`json_encode($response, JSON_NUMERIC_CHECK );`

问题仍然没有解决。

我正在动态生成我的折线图，并且在我这样做时必须输入最大步长值。我发现如果最大值设置小于 5，则步长会中断，如果值为 5 或更大，则步长看起来就好了。

```
 axes: [{
            type: 'Numeric',
            minimum: 0,                
            maximum: maxValue,                     
            position: 'left',
            fields:  vs ,
            grid: true,
            title: 'Visitors',
            label: {
               renderer: Ext.util.Format.numberRenderer('0,0'),
                font: '10px Arial'
            } 
```

希望这对其他人有帮助。
链接到 maxValue 设置为 4 和 5 的示例图像 [http://swimmingturtle.com/temp/lt5_max.png](http://swimmingturtle.com/temp/lt5_max.png)

# javascript - 如何在 Three.js 中向前移动对象？

> ID：11127543
> 
> 赞同：35
> 
> 时间：2012-06-20T20:19:52.790
> 
> 标签：javascript, three.js

有没有办法在 Three.js 中向前移动对象？

也许我应该将 rotation.x,y,z 转换为向量，然后处理它。但我是初学者，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-21T17:46:05.833

[Object3D](https://threejs.org/docs/#api/core/Object3D)有一些方便的方法。

```
object.translateZ( 10 ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T20:25:28.823

请使用 ThreeJS 的创建者 @mrdoob 的上述答案：

`object.translateZ( delta );`

**===旧答案===**

适用于旧版 ThreeJS 的教程： [http ://www.aerotwist.com/tutorials/getting-started-with-three-js/](http://www.aerotwist.com/tutorials/getting-started-with-three-js/)

```
// set position of YOUR_OBJECT
YOUR_OBJECT.position.x = 10;
YOUR_OBJECT.position.y = 50;
YOUR_OBJECT.position.z = 130; 
```

更多的选择：

```
var STEP = 10;
var newCubeMatrix = cube.matrix;        
newCubeMatrix.identity();
//newCubeMatrix.multiplySelf(THREE.Matrix4.rotationYMatrix(cube.rotation.y));
newCubeMatrix.multiplySelf(THREE.Matrix4.translationMatrix(cube.position.x, cube.position.y, cube.position.z + STEP));
cube.updateMatrix(); 
```

此处发布的详细信息[https://gamedev.stackexchange.com/questions/7490/translate-object-in-world-space-usings-its-local-rotation](https://gamedev.stackexchange.com/questions/7490/translate-object-in-world-space-usings-its-local-rotation)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-14T17:36:39.130

相机是空间中的一个点。“前进”是空间的另一个点。因此您可以简单地使用第二个点的坐标，并使相机位置更接近“前”位置。

但是，您可能还需要左右转，这可能涉及极坐标。

为方便起见调整这些值：

```
var scene;
var camera;
var playerDirection = 0;//angles 0 - 2pi
var dVector;
var angularSpeed = 0.01;
var playerSpeed = 0.075;
var playerBackwardsSpeed = playerSpeed * 0.4; 
```

这个函数将初始化场景：

```
function init(){
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

    renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );

    camera.position.z = 5;

    dVector = new THREE.Vector3( 0, 0, 0 ) ;
    camera.lookAt( dVector );

    animate();

} 
```

当玩家按下向上键时，玩家的移动停止。

```
function key_up(event){
    playerIsMovingForward = 0;
    playerIsMovingBackwards = 0;
    playerIsRotatingLeft = 0;
    playerIsRotatingRight = 0;
    playerGoesUp = 0;
    playerGoesDown = 0;
} 
```

当玩家移动时，我们更新位置：

```
function updatePlayer(){
    if(playerIsRotatingLeft){ // rotate left
        playerDirection -= angularSpeed;
    }
    if(playerIsRotatingRight){ // rotate right
        playerDirection += angularSpeed;
    }
    if(playerIsRotatingRight || playerIsRotatingLeft){
        setPlayerDirection();

    }
    if(playerIsMovingForward){ // go forward
        moveForward(playerSpeed);

    }
    if(playerIsMovingBackwards){ // go backwards
        moveForward(-playerBackwardsSpeed);

    }

} 
```

我们假设转发您的意思是“使用 WASD 键”

```
function key_down(event){
    var W = 87;
    var S = 83;
    var A = 65;
    var D = 68;
    var minus = 189;
    var plus = 187;

    var k = event.keyCode;
    console.log(k);
    if(k == A){ // rotate left
        playerIsRotatingLeft = 1;
    }
    if(k == D){ // rotate right
        playerIsRotatingRight = 1;
    }
    if(k == W){ // go forward
        playerIsMovingForward = 1;
    }
    if(k == S){ // go back 
        playerIsMovingBackwards = 1;
    }

} 
```

播放器的移动速度与他的浏览器一样快。所以也许调整这段代码？

```
function animate() {
    requestAnimationFrame( animate );

    updatePlayer();

    renderer.render( scene, camera );
} 
```

这是将相机移动到 dVector 对象的位置并重新定位方向矢量 (dVector) 的代码，以便它始终从相机向前。

```
function moveForward(speed){
    var delta_x = speed * Math.cos(playerDirection);
    var delta_z = speed * Math.sin(playerDirection);
    var new_x = camera.position.x + delta_x;
    var new_z = camera.position.z + delta_z;
    camera.position.x = new_x;
    camera.position.z = new_z;

    var new_dx = dVector.x + delta_x;
    var new_dz = dVector.z + delta_z;
    dVector.x = new_dx;
    dVector.z = new_dz;
    camera.lookAt( dVector );    

} 
```

向前移动通常涉及向左和向右转动，这里有一些代码可以做到这一点，它还使用极坐标来移动相对于相机的点（这是“圆”的中心给定的度数（在弧度）

```
function setPlayerDirection(){
    //direction changed.
    var delta_x = playerSpeed * Math.cos(playerDirection);
    var delta_z = playerSpeed * Math.sin(playerDirection);

    var new_dx = camera.position.x + delta_x;
    var new_dz = camera.position.z + delta_z;
    dVector.x = new_dx;
    dVector.z = new_dz;
    console.log(dVector);
    camera.lookAt( dVector ); 
}

animate(); 
```

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-23T22:51:47.323

另一种选择是使用 Vector3 的 set 方法/函数。

```
 position.set(x, y, z); 
```

# jquery - Jsplumb 可以用来做什么？

> ID：11127546
> 
> 赞同：1
> 
> 时间：2012-06-20T20:19:59.483
> 
> 标签：jquery, jsplumb

我读了几篇关于 jsplumb 的文章，但还不能理解它的用法。我的意思是连接两个元素有什么用？我们还能从这种联系中得到什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:23:44.550

我以前没见过这个。但它看起来对创建工作流很有用。例如，如果您正在构建一个自动执行任务的应用程序。

# visual-studio-2010 - 是否有在 Visual Studio 2010 中的方法之间移动光标的键盘快捷键？

> ID：11127547
> 
> 赞同：49
> 
> 时间：2012-06-20T20:20:02.073
> 
> 标签：visual-studio-2010, plugins, keyboard-shortcuts, visual-studio-extensions

是否有任何键盘快捷键可以在 Visual Studio 中的方法之间移动光标？有没有可以做同样工作的插件？

一直以来，当我编程时，我想在当前方法的结尾处​​，如果我可以有一个快捷方式，可以在下一个方法的开头移动光标，然后只需键入几个向上箭头即可我想要的地方会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-10-11T07:24:19.237

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-07T14:35:29.840

嗨，另一个（更便宜的）替代方法可能是 CTRL+M+M 来折叠/扩展当前方法到它的定义，让您可以快速导航到下一个。CTRL+M+O 折叠所有成员也很有用，使用 CTRL+M+L 再次展开所有成员。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-20T20:23:56.977

Visual Studio 没有这样的功能，但 JetBrains 的 ReSharper 有。至少是我所知道的唯一提供此功能的。

对于 ReSharper，快捷方式是`Alt-Up`和`Alt-Down`，对于上一个/下一个成员。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-12-08T12:09:07.560

尝试 CTRL + ALT + UP。这首先将您带到范围选择器，您可以在其中选择一个类（如果适用），然后按 TAB 将您带到方法选择器，您可以在其中从所选范围中选择一个方法。

注意我在Visual Studio 2012 中使用，不知道是否适用于其他版本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-19T17:34:20.173

Jason Malinowski 的评论是正确的。它甚至说快捷键是`Ctrl`+`Down Arrow`和`Ctrl`+ `Up Arrow`。我曾经在 VB6 中一直使用它，但是当我最近使用最新版本的 Visual Studio 尝试它时，它不起作用；它只会向上或向下滚动编辑窗口一行。

当我进入工具 - >选项时，选择左侧的“环境”，然后选择“键盘”的子类别，然后输入“Edit.ScrollLineDown”它说`Ctrl`+ `Down Arrow`。当我删除此快捷方式（以及用于 ScrollLineUp 的快捷方式）时，下一个/上一个方法快捷方式就起作用了！我个人对此感到非常高兴。

显然，如果您能找到正确的命令，您可以在此处以任何您喜欢的方式自定义键盘快捷键。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-16T02:49:20.223

我知道这是旧的，但看起来它是从那以后添加的。

试试`Alt`+`[`或`Alt`+`]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-14T12:11:07.720

在具有*商业***Visual Assist扩展的****Visual Studio 2013**中，您可以使用+打开包含当前文件中所有方法的列表。选择一个，点击，光标会跳转到它。 ***`ALT``M``ENTER`***

 **** * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-02T07:44:33.477

不要忘记出色的免费 DPack 扩展，它将添加 Alt+m 快捷方式，该快捷方式将打开当前类中所有方法的列表。您可以键入一个搜索字符串进行过滤，如果您向下 Tab 并输入一个方法，然后再次执行 Alt+m，如果您进入窗口，您将在您选择的最后一个方法上。DPack 还具有更多功能，例如书签，但我确实发现您必须设置热键，或者更准确地说，将热键从其他功能重新分配给 DPack：[https ://marketplace.visualstudio.com/items?itemName=谢尔盖 M.DPack-16348](https://marketplace.visualstudio.com/items?itemName=SergeyM.DPack-16348)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-17T09:46:22.100

它的 Ctrl + } - 通过将光标放在行尾 - 使用 studio 2015

同样也会使光标回到底部。

所以将光标放在函数末尾并按 Ctrl + }

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2017-10-17T08:21:47.197

在 Visual Studio 2015 中：

`Alt`+`Up`或`Alt`+`Down`***

# iphone - 当手势从不同的对象\类启动时如何触发动作

> ID：11127554
> 
> 赞同：0
> 
> 时间：2012-06-20T20:20:29.280
> 
> 标签：iphone, objective-c, xcode

我的代码 UIViewController 正在实例化一个对象\类，它是一个 UIView，它有一个框架，我画了一个实心圆圈等。我向第二类框架添加了一个手势，当点击发生时我想关闭\释放第二类和触发写在第一个对象中的一些方法（在 UIViewController 中）。现在第二个班级识别水龙头，但我不知道如何从内部释放班级并告诉第一个班级做某事（调用一个方法）？

希望这很清楚，知道该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:40:31.887

在我看来，最简单的方法是为第二类创建一个代表。例如，我们只假设有 FirstClass 和 SecondClass，每个都有自己的文件。

在 FirstClass 中，当您设置其 SecondClass 的实例（实例化 UIView）时，您将拥有如下内容：

```
SecondClass *class2 = [[SecondClass alloc] init....];
// set up the delegate, which basically creates a link between SecondClass and FirstClass;
class2.delegate = self; 
```

在 SecondClass.h 中，您需要设置如下内容：

```
@property (nonatomic, strong) id delegate; 
```

在 SecondClass.m 中，您将获得委托的综合值以及手势处理方法：

```
// add the FirstClass header file;
#import "FirstClass.h"

// synthesize the value;
@synthesize delegate;

// later on into the implementation file;
- (void)gestureHandlingMethod:(UIGestureRecognizer *)gesture {
    // do whatever you need for the gesture in SecondClass;
    // send a message to FirstClass (now defined as delegate of SecondClass);
    [self.delegate handleGesture:gesture forClass:self];
} 
```

最后，您需要将此手势处理方法添加到 FirstClass，以便它完成您需要的操作。因此，在 FirstClass.h 中，添加`-(void)handleGesture:(UIGestureRecognizer *)gesture forClass:(id)secondClass;`. 然后通过将此方法添加到 FirstClass.m 来完成，如下所示：

```
- (void)handleGesture:(UIGestureRecognizer *)gesture forClass:(id)secondClass {
    // do what you want here from within the FirstClass;
    [self doSomethingWithGestureIfYouWant:gesture];
    // then deallocate SecondClass if that's what you want to do;
    [secondClass dealloc]; // you may need to specify [(SecondClass *)secondClass dealloc];
} 
```

那应该这样做。这只是将不同文件链接在一起的一种不错的小方法。希望这可以帮助你。

# apache - .htaccess 在页面上添加尾部斜杠，除非 # 在 URL 中

> ID：11127558
> 
> 赞同：2
> 
> 时间：2012-06-20T20:20:43.930
> 
> 标签：apache, .htaccess, mod-rewrite, expressionengine

我希望我的 URL 添加尾部斜杠，但前提是 URL 不以锚结尾。

这是我当前的 .htaccess 文件

```
# ----------------------------------------------------------------------
# Enable Rewrite Engine
# ----------------------------------------------------------------------

RewriteEngine On
RewriteBase /

# ----------------------------------------------------------------------
# Remove the www from the URL
# ----------------------------------------------------------------------

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# ----------------------------------------------------------------------
# Add a trailing slash to paths without an extension
# ----------------------------------------------------------------------

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301]

# ----------------------------------------------------------------------
# Remove index.php
# ----------------------------------------------------------------------

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**当我链接到锚定部分时，URL 会被写入：**

```
http://mysite.com/subdir/#anchor 
```

**当它们看起来像这样时：**

```
http://mysite.com/subdir#anchor 
```

**常规 URL 应如下所示：**

```
http://mysite.com/directory/sub/ 
```

我很困惑，所以任何帮助都会很棒！

干杯，
丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:19:25.473

你看过 Apache 的[Directory Slash](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)设置吗？

这是我们在 .htaccess 中用来处理类似问题的方法

```
DirectorySlash Off
DirectoryIndex index.php index.html index.htm 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T20:43:44.127

不要认为问题在于您的重写规则。片段（`#something`URI 的末尾）永远不会被发送到服务器，它们被用作浏览器呈现的页面内的从属资源。

确保您提供的 HTML 中的锚点中不包含斜杠，或者您没有将它们附加到浏览器端的 javascript。

* * *

编辑：

好吧，如果要删除 URI 末尾添加的斜杠，您可能需要注释掉这条规则：

```
# ----------------------------------------------------------------------
# Add a trailing slash to paths without an extension
# ----------------------------------------------------------------------

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301] 
```

# jquery - jQuery 工具：等待手风琴幻灯片完成，然后在手风琴中显示图像

> ID：11127562
> 
> 赞同：0
> 
> 时间：2012-06-20T20:20:57.423
> 
> 标签：jquery, jquery-tools

我在这里使用 jQuery 工具的标签手风琴：[http ://www.jquerytools.org/demos/tabs/accordion.htm](http://www.jquerytools.org/demos/tabs/accordion.htm)

整个事情被激活

代码：

```
$("#accordion").tabs(
  "#accordion div.pane",
  {tabs: 'h2', effect: 'slide', initialIndex: null}
); 
```

虽然通过幻灯片功能显示窗格的内容，但在我的设置中，我希望仅在幻灯片动画完成后才显示窗格中的图像，并且应尽快隐藏当前选项卡的图像单击手风琴标题。我摆弄了一下，但无法让它工作。

我想将图像设置为显示：无；然后在显示其余内容后将它们更改为显示？

我可以通过在上面的代码中添加一些东西来做到这一点吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:35:34.127

我想你会想做一个自定义动画。这应该很简单。

```
 $.tools.tabs.addEffect("custom", function(tabIndex, done) {

  // hide any images
  $("#accordion img").hide();

  // hide all panes and show the one that is clicked, on complete show images
  this.getPanes().hide().eq(tabIndex).show('fast',function(){
      //show the images again now that the animation has finished
      $("#accordion img").show();
  });

  // the supplied callback must be called after the effect has finished its job
  done.call();
  }); 
```

然后您可以将动画效果“幻灯片”替换为“自定义”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:27:41.243

> 我想将图像设置为显示：无；然后在显示其余内容后将它们更改为显示？

我就是这样做的。在所有图像上显示：无，然后：

```
$(document).ready(function () {
    $("#accordian img").show();
}); 
```

在加载整个文档之前，不会显示图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:30:45.530

如果您的意思是要打开手风琴的窗格然后显示其中的图像，请查看手风琴的[change](http://jqueryui.com/demos/accordion/#event-change)事件，当窗格打开时，此事件可能会通知您。是的，您需要先将图像设置为隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:35:19.647

您可以直接绑定到选项卡的“加载”事件...

```
$("#accordion").tabs(
  "#accordion div.pane",
  {tabs: 'h2', effect: 'slide', initialIndex: null,
    load: function(event, ui){
      $('accordian img').show();
    }
  }
); 
```

Now when the tab loads complete (DOM is ready), it will show the images in the div, and ONLY AFTER the `DOM has been updated to completely reflect the changes to the elements in the tab`.

# java - Swing 代码如何变成真正的图形应用程序

> ID：11127563
> 
> 赞同：5
> 
> 时间：2012-06-20T20:21:02.990
> 
> 标签：java, swing, graphics

这个问题可能看起来不是很有技术性，但出于好奇，我想知道：

**我编写的裸/原始 Swing 代码如何变成出色的图形应用程序？**

例如：

*   就像我们让 JFrame 可见，或者我们在其上放置一个 JButton 时一样。谁让它发生？操作系统或 Java 或 JVM。

*   谁让颜色出现？

*   幕后的过程是怎样的？

我问这个可能是因为这是我人生中第一次制作 RealWorld 图形应用程序，这些问题突然出现在我的脑海中！

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:33:10.443

在 Swing 中，所有 GUI 组件都完全用 Java 编写并使用 Java 呈现。例如，JButton 将由 Java 绘制，而不是由任何内部操作系统的东西绘制。因此，Swing 组件被称为“轻量级组件”，因为它们是由 Java 而不是由操作系统（或任何本机小部件工具包）管理和呈现的。

请注意，Java 也有一个称为 AWT 的工具包。Swing 基于 AWT 的嵌套和继承方法，不同之处在于它使用操作系统创建本机小部件。

所以在某些时候，Sw​​ing 将不得不在屏幕上创建一个窗口并在其上绘图。实际创建窗口的魔法由 AWT 处理。请注意，[`JFrame`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)extend from [`java.awt.Frame`](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html)which 意味着尽管 JFrame 可能主要由 Java 呈现，但它由重量级的本机 OS 窗口支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:45:31.963

简而言之，有一个 AWT 工具包，它是执行所有窗口管理和绘图的层。它在 JVM 中调用本机平台特定代码。它还负责java2d绘图。它可以使用加速的 directx 或 opengl 管道。

Swing是在它之上开发的。Swing 实际上使用纯 Java 代码绘制每个按钮和每个对象。绘图被处理为决定如何绘制组件的当前外观。因此，您可以覆盖他们的绘制方法，并添加一些额外的东西而不会出现任何问题。

Metal 和 Nimus LaF 是 100% java2d 绘制的，所以在它们里面你会发现像 drawRectangle 和 drawLine 这样的东西来绘制组件。原生外观和感觉，如 windows、gtk，访问当前操作系统主题以绘制类似于原生小部件的东西。这就是为什么它们并不总是看起来像原生应用程序。

还有其他用于 java 的 gui 工具包，如 SWT，例如在 Eclipse 中使用。它所做的是从 AWT 获取窗口，然后将 100% 本机小部件放在上面。它与操作系统更好地集成，看起来更好，工作更快，使用更少的内存。但是有了它，您必须使用特定于操作系统的本机库来分发您的应用程序，并且与 Swing 相比，它的可定制性较低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:33:58.057

我不知道所有细节，但实际的图形是通过 JVM 本身通过 swing/awt 包显示/渲染的。

# c# - 如何使 WCF 数据服务查询拦截器以 JSON 格式返回结果？

> ID：11127569
> 
> 赞同：3
> 
> 时间：2012-06-20T20:21:22.320
> 
> 标签：c#, ado.net, jsonp, wcf-data-services

我目前有一个 WCF 数据服务，位于`www.mywebsite.com`. 这是一个看起来像这样的基本服务：

```
namespace MyWeb
{
    [JSONPSupportBehavior]
    public class MyDataService : DataService<MyEntities>
    {
        public static void InitializeService(IDataServiceConfiguration config)
        {
            config.UseVerboseErrors = true;
            config.SetEntitySetAccessRule("Entities", EntitySetRights.AllRead);
            ServiceOperationRights.All);
        }
    }
} 
```

目前，我们有现场客户通过发布 ajax 调用来发出请求，例如：

```
$.ajax({
        url: serverAddress + "MyDataService.svc/Entities?$top=20&$filter=IsConfirmed%20eq%20null&$format=json&$callback=?",
        headers: {
        version: "1.0",
        platform: "a platform"
        },
        timeout: 12000,
        dataType: 'jsonp',
        cache: false,
        context: document.body
}) 
```

这按预期工作，返回一个包含实体表中所需对象的 javascript 对象。

但是，我们想在服务器端添加一些智能来限制可以从此查询返回的结果。为此，我试图在上述`MyDataService`类中实现一个查询拦截器：

```
[QueryInterceptor("Entities")]
public IQueryable<Entity> OnQueryFares(IQueryable<Entity> query)
{
    return from e in query 
           where DataCheck(e) 
           select e;
} 
```

预期的逻辑是服务现在将只返回 DataCheck(e) 评估为 true 的表条目。这个功能**似乎起作用了**。但是，在使用客户端进行测试时，我收到以下错误：

```
Web Console(4448): Uncaught SyntaxError: Unexpected token < at
http://www.mywebsite.com/MyDataService.svc/Entities?$top=20&$filter=IsConfirmed%20eq%20null&$format=json&$callback=jQuery17207441281890496612_1340223164872&_=1340223166622:1 
```

这个特殊的错误让我猜测，出于某种原因，我实现的查询检查器返回的数据是以 XML 形式出现的，而不是像我实现拦截器之前的查询那样以 JSON 形式出现。

我找不到任何关于此的说明。如何在查询拦截器中强制执行 JSON 响应行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:25:01.163

有关查询拦截器的用法，请参阅此：http: [//msdn.microsoft.com/en-us/library/dd744842.aspx](http://msdn.microsoft.com/en-us/library/dd744842.aspx)

我很惊讶上面甚至启动了服务（我怀疑它没有启动，并且您返回了一个错误有效负载，因此无法读取它，您可以尝试使用例如 Fiddler 进行确认）。

查询拦截器返回一个谓词（表达式），该谓词在执行之前添加到查询中。因此，您无需返回新查询，只需修改现有查询即可。

在上面的示例中，只需像这样修改它：

```
[QueryInterceptor("Entities")]
public Expression<Func<Entity,bool>> OnQueryFares()
{
    return e => DataCheck(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T01:13:33.570

这是一个扩展版本

```
[QueryInterceptor("Entities")]
public Expression<Func<Entity,bool>> OnQueryFares()
{
    // Assuming e has two properties Name and Age. 
    return e => e.Name=="John" && e.Age=23 ;
} 
```

# xml - 返回 XML 的不同记录

> ID：11127570
> 
> 赞同：2
> 
> 时间：2012-06-20T20:21:23.147
> 
> 标签：xml, xslt

我对 XML 和 XLST 完全陌生。我有一份以 XML 格式输出的报告。它有几千条记录，但它是相同的两行数据，一遍又一遍地重复。我需要一种方法将输出 XML 文件限制为只有那两个唯一的数据行。

这是我的 XML 文件当前的示例：

```
<zd:Report_Data xmlns:zd="urn:com.xxxx.report/xxxx-Employee_Status-Outbound">
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>1</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>1</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>0</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>0</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   </zd:Report_Data> 
```

这就是我希望它看起来的样子：

```
<zd:Report_Data xmlns:zd="urn:com.xxxx.report/xxxx-Employee_Status-Outbound">
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>1</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   <zd:Report_Entry>
<zd:empStat.emplStatusCode>A</zd:empStat.emplStatusCode>
<zd:empStat.name>Active Employee</zd:empStat.name>
<zd:worker>
<zd:empStat.lastUpdateDate>1/1/1968</zd:empStat.lastUpdateDate>
<zd:empStat.actvInd>0</zd:empStat.actvInd>
</zd:worker>
   </zd:Report_Entry>
   </zd:Report_Data> 
```

^^已更新

* * *

我看到了一些我认为可以在这个网站上工作的东西（http://stackoverflow.com/questions/3016929/selecting-unique-records-in-xslt-xpath），但我无法将它应用到我的情况。任何帮助将不胜感激！

这是我迄今为止根据我在这里阅读的另一篇文章所做的。不幸的是，它没有返回任何数据：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:key name="kItemBy3Children" match="Report_Entry"
     use="concat(empStat.emplStatusCode, '+', empStat.name, '+', empStat.lastUpdateDate, '+', empStat.actvInd)"/>

 <xsl:template match="/">
       <xsl:copy-of select=
        "*/item[generate-id()
              = generate-id(key('kItemBy4Children',
                                concat(empStat.emplStatusCode,
                                       '+', empStat.name,
                       '+', empStat.lastUpdateDate,     
                                       '+', empStat.actvInd)
                               )
                            )
               ]
        "/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:15:09.573

这个样式表...

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:ZD="urn:com.xxxx.report/xxxx-Employee_Status-Outbound">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

<xsl:key name="kItemBy4Children" match="ZD:Report_Entry"
     use="concat(ZD:empStat.emplStatusCode, '+', ZD:empStat.name, '+', ZD:worker/ZD:empStat.lastUpdateDate, '+', ZD:worker/ZD:empStat.actvInd)"/>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

 <xsl:template match="ZD:Report_Data">
  <xsl:copy>
    <xsl:apply-templates select="@*" />
    <xsl:copy-of select=
      "ZD:Report_Entry[ generate-id() = generate-id(key('kItemBy4Children',
       concat(ZD:empStat.emplStatusCode, '+', ZD:empStat.name, '+', ZD:worker/ZD:empStat.lastUpdateDate, '+', ZD:worker/ZD:empStat.actvInd))[1])]"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

... 将转换此输入文档 ...

```
<ZD:Report_Data xmlns:ZD="urn:com.xxxx.report/xxxx-Employee_Status-Outbound">

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Terminated Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>0</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Terminated Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>0</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

</ZD:Report_Data> 
```

...进入此输出文档...

```
<ZD:Report_Data xmlns:ZD="urn:com.xxxx.report/xxxx-Employee_Status-Outbound">
  <ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>
  <ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Terminated Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>0</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>
</ZD:Report_Data> 
```

* * *

# 解释

Report_Data 节点被分组，其内容与 4 个子成员所测量的内容相同。换句话说，每个不同的 Report_Data 恰好有一个组，并且仅输出每个组的第一个成员。该技术称为 Muenchian 分组。我可以对 Muenchian 分组给出一个很长的解释，或者你可以搜索已经解释过这一点的数百个 StackOverflow 问题。我只会重复别人写的东西。

搜索起点：

*   Stackoverflow（在 Muenchian 上搜索）
*   谷歌
*   [http://www.jenitennison.com/xslt/grouping/muenchian.html](http://www.jenitennison.com/xslt/grouping/muenchian.html)

# 更新

我对 empStat.emplStatusCode 字段进行了更正，并且 empStat.name 字段应以 ZD:worker/ 开头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:31:44.617

如果您只需要选择前两行，那很容易：

```
<xsl:template match="/*">
  <xsl:copy>
    <xsl:copy-of select="*[1]|*[2]"/>
  </xsl:copy>
</xsl:template> 
```

但也许我误解了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:47:43.863

这是与您的尝试不同的解决方案，因为我没有使用任何密钥。我认为这样更容易，因为您不必知道 XSLT 中的键是如何工作的（事实上，我不知道它们是如何工作的，因为到目前为止我从来不需要它们）。

请注意，我已经为您的命名空间前缀声明了一些 URI `ZD`；你需要插入你的。

首先，我已经应用了身份模板，基本上复制了所有内容。

然后，有一个`<ZD:Report_Entry>`元素模板。在该模板中，如果所选元素具有先前具有相同内容的同级元素，则省略所选元素。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ZD="http://xyz.abc">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/ZD:Report_Data/ZD:Report_Entry">
        <xsl:choose>
            <xsl:when test="preceding-sibling::ZD:Report_Entry[(ZD:empStat.emplStatusCode = current()/ZD:empStat.emplStatusCode) and (ZD:empStat.name = current()/ZD:empStat.name) and (ZD:worker/ZD:empStat.lastUpdateDate = current()/ZD:worker/ZD:empStat.lastUpdateDate) and (ZD:worker/ZD:empStat.actvInd = current()/ZD:worker/ZD:empStat.actvInd)]"/>
            <xsl:otherwise>
                <xsl:copy-of select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

通过选择前面的兄弟元素来检查前面的兄弟`<ZD:Report_Entry>`元素。该元素的一个条件是其四个内容元素值与所选节点 ( `current()`) 的相应内容元素值相匹配。

如果您需要根据不同的标准比较记录是否相等，请修改方括号中的部分。

***测试用例***

此示例文档：

```
<ZD:Report_Data xmlns:ZD="http://xyz.abc">

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Terminated Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>0</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>2</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Active Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>1</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

<ZD:Report_Entry>
<ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
<ZD:empStat.name>Terminated Employee</ZD:empStat.name>
<ZD:worker>
<ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
<ZD:empStat.actvInd>0</ZD:empStat.actvInd>
</ZD:worker>
</ZD:Report_Entry>

</ZD:Report_Data> 
```

被转换成这个输出：

```
<ZD:Report_Data xmlns:ZD="http://xyz.abc">
    <ZD:Report_Entry>
        <ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
        <ZD:empStat.name>Active Employee</ZD:empStat.name>
        <ZD:worker>
            <ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
            <ZD:empStat.actvInd>1</ZD:empStat.actvInd>
        </ZD:worker>
    </ZD:Report_Entry>
    <ZD:Report_Entry>
        <ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
        <ZD:empStat.name>Terminated Employee</ZD:empStat.name>
        <ZD:worker>
            <ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
            <ZD:empStat.actvInd>0</ZD:empStat.actvInd>
        </ZD:worker>
    </ZD:Report_Entry>
    <ZD:Report_Entry>
        <ZD:empStat.emplStatusCode>A</ZD:empStat.emplStatusCode>
        <ZD:empStat.name>Active Employee</ZD:empStat.name>
        <ZD:worker>
            <ZD:empStat.lastUpdateDate>1/1/1968</ZD:empStat.lastUpdateDate>
            <ZD:empStat.actvInd>2</ZD:empStat.actvInd>
        </ZD:worker>
    </ZD:Report_Entry>
</ZD:Report_Data> 
```

***更新：***正确复制`<ZD:Record_Entry>`元素而不仅仅是其内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T22:32:29.420

我试图将一些东西放在一起，以实现您在一般工作时想要的东西，而不是专门针对这个 XML 模式。

我累了，而且它非常软糖和 hackey（在讨厌之前请注意，人们），所以可能有更好的方法，但它似乎有效。

```
 <!-- root and static content -->
    <xsl:template match="/">
        <root>
            <xsl:apply-templates select='*/*' />
        </root>
    </xsl:template>

    <!-- children - output only unique -->
    <xsl:template match='*'>
        <xsl:variable name='node' select='.' />

        <!-- does this node have identical siblings up ahead? If so, skip it, and we'll output a sibling later -->
        <xsl:variable name='has_identical_siblings'>
            <xsl:for-each select='following-sibling::*[name() = name($node)]'>
                <xsl:call-template name='check_identical'>
                    <xsl:with-param name='this_node_profile'>
                        <xsl:copy-of select='$node' />
                    </xsl:with-param>
                    <xsl:with-param name='check_against'>
                        <xsl:copy-of select='.' />
                    </xsl:with-param>
                </xsl:call-template>
            </xsl:for-each>
        </xsl:variable>

        <!-- output? -->
        <xsl:if test='not(normalize-space($has_identical_siblings))'>
            <xsl:copy-of select='.' />
        </xsl:if>
    </xsl:template>

    <!-- util: two nodes are identical? -->
    <xsl:template name='check_identical'>
        <xsl:param name='this_node_profile' />
        <xsl:param name='check_against' />
        <xsl:if test='$this_node_profile = $check_against'>true</xsl:if>
    </xsl:template> 
```

[您可以在此处运行它](http://www.xmlplayground.com/pTadtm)（请参阅输出源 - 一名在职员工，一名已终止）。

# c++ - C++ 与 static_cast 和“this”对象的 const_cast 添加 const-ness 的区别？

> ID：11127572
> 
> 赞同：19
> 
> 时间：2012-06-20T20:21:28.030
> 
> 标签：c++, static-cast, const-cast

根据 Scott Meyers 的说法，为了防止在 getter 的 const 版本和 getter 的非常量版本中重复代码，请从非常量版本调用方法的 const 版本：`static_cast<const A&>(*this).Methodology();` *但是*，由于过度热心而意外使用我输入了 Visual Assist X Intellisense：`const_cast<const A&>(*this).Methodology();`它工作得很好。

在这种情况下，使用特定演员表有什么区别？

使用的 IDE：Visual Studio 2010。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:30:09.047

假设类型`this`为`A*`，则没有区别。

通常`const_cast`可以抛弃说明`const`符（来自任何级别的间接或模板参数）

`static_cast<>`如果目标类型在源的类型层次结构中，则可以将一个类型强制转换为另一个类型。

他们不能做彼此的工作。

它们在您的情况下都起作用的原因是因为您*引入了*const-ness，而不是把它拿走了（从函数的非 const 版本调用`this`is的类型`A*`，没有 const）。你也可以写

```
const A& tmp = *this;
tmp.Methodology(); 
```

它可以在不需要任何铸造的情况下工作。强制转换是为了方便和简洁而不必引入新变量。

*注意*：您可以`static_cast<>`在此处使用，因为您*知道*您正在转换为正确的类型。在其他情况下（当您无法确定时），您需要使用`dynamic_cast<>`它进行运行时类型检查以确保转换有效

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T21:49:41.167

在重新阅读第 3 条后，`Effective C++ 3rd Ed.`我意识到他实际上是在提倡*同时*使用. 添加 const 以调用 const 版本，然后丢弃返回值的 const-ness（如果有的话）。在我的特殊情况下，没有 const 返回值，只有一个 const 函数，因此不需要包装的 const_cast<> 版本，实际上导致有**问题的两个调用之间没有区别**

> （第 13 页）第 3 项：**尽可能****使用** ***const***
> 
>  **...
> 
> (p. 23)**避免** ***const*** **和** **非** ***const*** **成员函数中的重复**
> 
> ...您真正想要做的是实现一次*operator[]*功能并使用它两次。也就是说，您希望一个版本的 *operator[]*调用另一个版本。这让我们抛弃了 constness。
> 
> ...在这种情况下，丢弃返回值上的*const*是安全的，因为调用非*const operator[]*的人首先必须有一个非*const*对象......所以拥有非*const operator[]*调用*const*版本是避免代码重复的安全方法，即使它需要强制转换...
> 
> ```
> class TextBlock {
> public:
> 
> ...
> 
>     const char& operator[](std::size_t position) const      //same as before
>     {
>         ...
>         ...
>         ...
>         return text[position];
>     }
> 
>     char& operator[](std::size_t position)        //now just calls const op[]
>     {
>         //cast away const on op[]'s return type;
>         //add const to *this's type;
>         //call const version of op[].
>         return const_cast<char&>(static_cast<const TextBlock&>(*this)[position]);
>     }
> ...
> }; 
> ```
> 
> 如您所见，代码有两种类型转换，而不是一种。我们想要非*const operator[]* ...为了避免无限递归，我们必须指定我们要调用*const operator[]*，但没有直接的方法可以做到这一点。相反，我们将 * *this*从其原生类型*TextBlock&*转换为*const TextBlock&*。是的，我们使用 cast 来*添加 const*！所以我们有两种强制转换：一种将*const*添加到 * *this*（这样我们对*operator[]*的调用将调用*const*版本），第二种从 *const operator[] 的返回值中删除*const 。***

# javascript - 用 JQuery 替换 $j

> ID：11127577
> 
> 赞同：1
> 
> 时间：2012-06-20T20:21:50.957
> 
> 标签：javascript, jquery, clone

我有一个有趣的问题。我`clone()`在谷歌浏览器扩展中使用 jQuery 函数。该函数正在克隆表格行。问题是 TR 中有一些内联的 javascript/jquery 使用`$j()`而不是`jQuery()`.

每次我尝试输出克隆的行时，我都会收到错误“$j 未定义”。

所以我想到了 2 种可能的解决方案来解决这个问题：

1.  使我的 chrome 扩展程序与`$j()`（尝试使用 jquery 没有冲突）而不是`jQuery()`

或者

1.  在输出之前在克隆的项目中进行搜索，替换`$j`为`jQuery`.

我的问题是我都无法完成...

```
 var rows = jQuery("#field-mapping-template").clone(true);
 rows.insertBefore("#field-mapping-template"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:53:15.000

我的意思是，我真的不建议这样做，但*如果你真的需要，*你可以这样做。

进入 jQuery 的开发版本并一直向下滚动到底部，直到看到这行代码：

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

现在只需将其更改为：

```
// Expose jQuery to the global object
window.jQuery = window.$j = jQuery; 
```

现在，当您编写如下脚本时：

```
<input type="hidden" name="name" value="test" />
<script type="text/javascript">
    $j(function () {
        alert($j('input').val());
    });
</script> 
```

而不是`$`，它将适用于`$j`。

这与替换不同`jQuery()`。是的`$`简写`jQuery()`。

**我真的，真的，真的不建议用`jQuery()`$j 或任何东西代替。**

截至最新版本 (v1.7.2)，开发代码中有**879个对`jQuery`对象**的引用，您必须将其更改为`$j`.

如果你有一个好的查找和替换，你可以这样做，*但我不建议这样做*。

# java - java.lang.ClassCastException：libcore.net.http.HttpURLConnectionImpl 无法转换为 javax.net.ssl.HttpsURLConnection

> ID：11127578
> 
> 赞同：20
> 
> 时间：2012-06-20T20:21:59.480
> 
> 标签：java, android, http, https, urlconnection

我正在编写一些代码以通过 HTTPS 将文件从设备上传到云。

相关片段：

```
HttpsURLConnection conn = null; 
URL url = new URL(urlstring);
conn = (HttpsURLConnection) url.openConnection(); // exception here. 
```

但演员不会编译：

```
06-20 15:58:05.311: E/FNF(30286): java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection 
```

我发现了这个类似的问题：[Using java class HttpsURLConnection](https://stackoverflow.com/questions/3038026/using-java-class-httpsurlconnection)，但我没有从 sun 包中导入任何东西。

我的进口：

```
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.URL;
import android.net.Uri;
import javax.net.ssl.HttpsURLConnection;
import android.util.Log;
import edu.mit.media.funf.storage.RemoteFileArchive;
import edu.mit.media.funf.util.LogUtil; 
```

我一直在为这个问题摸不着头脑，有什么建议吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-20T20:25:41.470

**方法 1：** 你`urlString`必须以`https://`而不是`http://`你能够将其转换为`HttpsURLConnection`.

**方法 2：** 如果您的 urlString 以 开头`http://`，则更`HttpsURLConnection`改为`HttpURLConnection`应该可以

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-25T06:57:28.637

我有同样的例外`java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection`

```
uri = new URL("http://www.google.com");
HttpsURLConnection connection = (HttpsURLConnection) uri.openConnection(); // Exception 
```

我变了

```
uri = new URL("http://www.google.com"); 
```

到

```
uri = new URL("https://www.google.com"); 
```

现在它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:25:57.490

`url.openConnection();``libcore.net.http.HttpURLConnectionImpl`当您将“conn”对象声明为 type 时，似乎正在返回一个类型的对象`import javax.net.ssl.HttpsURLConnection;`。您需要对导入和使用的对象进行分类。也许您错过了您所遵循的教程中的某些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-04T04:06:25.363

简单移除`urlConnection.setDoOutput(true);`

它会正常工作。

# ruby-on-rails - Ruby on Rails、form_for、回形针和受保护参数的批量赋值

> ID：11127583
> 
> 赞同：1
> 
> 时间：2012-06-20T20:22:22.787
> 
> 标签：ruby-on-rails, file-upload, paperclip

我一直在开发一个上传和处理图像的 Rails 应用程序。图像以及其他字符串信息通过 form_for 提交。我一直在研究这个主题大约 16 个小时，但没有任何解决方案有效。老实说，这就像 rails 甚至没有阅读我的代码。

一个 Processmodel 有许多 Assets，其中一个 Asset 只是一个保存一个图像文件的模型。创建流程模型时，我永远无法访问资产，总是收到无法批量分配的属性：assets_attributes

```
Completed 500 Internal Server Error in 13ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: asset):
  app/controllers/process_controller.rb:20:in `new'
  app/controllers/process_controller.rb:20:in `create' 
```

- 此表单用于 new.html.erb

```
<%= semantic_form_for @processmodel, :url => { :action => 'create' }, :html => {     :multipart => true } do |f| %>
    <%= f.input :batch, :as => :string, :name => "Batch" %>
    <%= f.input :batchset, :as => :string, :name => "Batchset" %>
    <%= f.input :numSlots, :as => :number, :name => "Number of slots" %>    
    <%= f.input :key, :as => :file, :name => "Key" %>   

    <%= f.semantic_fields_for :asset do |asset| %> 
        <%= asset.input :asset, :as => :file, :label => "Image" %>
    <% end %><br />

    <%= f.submit %>
<% end %> 
```

-

```
class Processmodel < ActiveRecord::Base
  attr_accessible :user_id, :batch, 
                :batchset, :numSlots,
                :key,:assets_attributes

  attr_accessor :key_file_name

  has_many :assets, :dependent => :destroy
  belongs_to :user  
  has_attached_file :key
  #    :url => Rails.root.join('/assets/readimages/:basename.:extension'),
  #    :path => Rails.root.join('/assets/readimages/:basename.:extension'),

  accepts_nested_attributes_for :assets, :allow_destroy => true

  . 
  . 
  .

end 
```

-

```
require 'RMagick'
class Asset < ActiveRecord::Base
    attr_accessible :results_string, 
        :name, 
        :ambiguous_results, 
        :image 
    belongs_to :batch_element
    belongs_to :processmodel
    has_attached_file :image 
    validates_attachment_presence :image
end 
```

-

```
class ProcessController < ApplicationController
def create
    @Processmodel = Processmodel.new(params[:processmodel])
    @Processmodel.save    
    all_img = Array.new(@processmodel.assets.all)
    respond_to do |format|
      if @processmodel.beginRead(...)
        redirect_to :action => 'results_main', :controller => 'results' 
      else
        format.html { render action: "new" }
   end
end 
end 
```

-

```
def new
  @processmodel = Processmodel.new
  #5.times{@processmodel.assets.build}
  respond_to do |format|
    format.html #new.html.erb
end
end 
```

我要求提供有关如何解决此问题并使我的应用程序正常运行的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:22:24.213

你在这里调用了你的附件`:image`：

```
has_attached_file :image 
```

但`:asset`在你看来，你称之为：

```
<%= asset.input :asset, :as => :file, :label => "Image" %> 
```

要修复，只需将此行更改为

```
<%= asset.input :image, :as => :file, :label => "Image" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:09:55.107

您需要更新数据库迁移。跑：

```
rails g migration AddIdToAsset processmodel_id:integer
rake db::migrate 
```

# php - 给定页面的社交统计信息

> ID：11127584
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:22:24.037
> 
> 标签：php, facebook, twitter, social, stumbleupon

我浏览了 facebook 和 twitter 的 API，但我似乎找不到我的问题的答案。

在[http://punchfork.com/recipe/Porkitos-Crispy-Prosciutto-Chips-Nom-Nom-Paleo等网站上](http://punchfork.com/recipe/Porkitos-Crispy-Prosciutto-Chips-Nom-Nom-Paleo)

在右侧，他们有社交统计页面，其中包含推文、Facebook 分享和 Stumbleupons 等信息。

我的问题是他们如何记录或收集这些结果？是不是他们有一个按钮将其记录在他们的数据库中，然后将您发送到该页面以发推文/分享/绊倒？但这肯定不准确，因为人们可能不会继续填写行动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:15:08.060

由于人们似乎不喜欢第 3 方解决方案，这里是另一个使用 jQuery 的解决方案：

```
 // Get Number of Twitter Followers From Twitter.com
    $.getJSON('http://twitter.com/users/USERHANDLE.json?callback=?',function(data) {
        if ('followers_count' in data) {
            $('.followercount').text(format_number(data.followers_count,0,'',','));
        }
    });

    // Get facebook likes
    $.getJSON("https://graph.facebook.com/ACCOUNTNAME?callback=?", function(data) { 
        if ('likes' in data) {
            $('.likecount').text(format_number(data.likes,0,'',','));

        }
    }); 
```

如果您要查找特定术语的推文数，则网址为：

```
http://search.twitter.com/search.json?q=SEARCHTERM&rpp=10&lang=en&callback=? 
```

如果你想在 facebook 上为一个 url “分享”它是：

```
http://graph.facebook.com/http://www.google.com 
```

如果您想要的网址是 Google。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:00:53.050

也许这是他们网站上的一个脚本，它捕获点击并将它们发送到服务器端脚本，该脚本更新数据库然后显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T23:03:22.187

如果您在 Wordpress 中运行您的网站，则有这个插件：[Top Social Stories](http://codecanyon.net/item/top-social-stories-plugin-and-widget/5888553?WT.ac=portfolio&WT.seg_1=portfolio&WT.z_author=ginoplusio)，它通过存储每天在您的帖子上发布的分享、推文和 +1 用户的数量来帮助您跟踪这些社交数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T21:00:46.070

我只是使用[http://sharethis.com/](http://sharethis.com/)

然后自定义外观：

[http://support.sharethis.com/customer/portal/articles/446558-custom-buttons](http://support.sharethis.com/customer/portal/articles/446558-custom-buttons)

# orchardcms - 在另一个中加载一个果园模块

> ID：11127587
> 
> 赞同：0
> 
> 时间：2012-06-20T20:22:44.970
> 
> 标签：orchardcms

我有两个模块，其中一个依赖于另一个。
当我转到我的主页时，“从模块”加载得很好，但是当我转到“主模块”（已路由）时，我看不到第一个。

如何在主模块中显示或强制渲染从属形状？

* * *

我不知道如何更好地解释，所以我只告诉确切的情况。

我创建了一个名为“Store”的模块（主模块），它实现了到“/Store/{optional_parameters}”的路由。当我导航到这个 url 时，我得到了没有问题的预期结果。

但是，我创建了另一个名为“Search”（从模块）的模块，它依赖于 Store 模块，需要在每个页面中显示（就像导航和页脚一样）。我以为我设法做到了，在 SearchDriver 上的显示覆盖中执行此操作： workContextAccessor.GetContext().Layout.Zones["Search"].Add(shape, "10");
然后，如果我导航到“/”（或我未定义的任何路线），我可以在正确的位置看到搜索形状，但如果我导航到“/Store”（或我定义的任何路线），我可以再也见不到了
顺便说一句，StoreController 具有“主题”符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:41:42.680

你为什么不使用小部件？那只会起作用，而且工作量会大大减少。它也可以在无需更改代码的情况下进行管理。

# arrays - Scala 在两个条件下过滤

> ID：11127594
> 
> 赞同：50
> 
> 时间：2012-06-20T20:23:21.163
> 
> 标签：arrays, scala, filter, multiple-conditions

我想一次在两个条件下过滤我的数据集。

可能吗？

我想要这样的东西：

```
mystuff = mystuff.filter(_.isX && _.name == "xyz") 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-20T20:25:56.733

使用稍微不那么简洁的 lambda 语法：

```
mystuff = mystuff.filter(x => (x.isX && x.name == "xyz")) 
```

[您可以在此处](http://www.codecommit.com/blog/scala/quick-explanation-of-scalas-syntax)找到有关 Scala 匿名函数语法的更多详细信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T21:45:04.340

虽然根据“myStuff”的不同可能会对性能产生一些影响，但您始终可以过滤两次

```
mystuff = mystuff.filter(_.isX).filter(_.name == "xyz") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T21:56:03.580

If you need to frequently filter with several predicate, you could define a way of combining them:

```
case class And[A]( p1: A=>Boolean, p2: A=>Boolean ) extends (A=>Boolean) {
  def apply( a: A ) = p1(a) && p2(a)
} 
```

Here is how to use it to keep only the odd numbers bigger than 10:

```
scala> (0 until 20) filter And( _ > 10, _ % 2 == 1 )
res3: scala.collection.immutable.IndexedSeq[Int] = Vector(11, 13, 15, 17, 19) 
```

It easy to write `Or` and `Not` combinators in the same fashion.

# pdf - 在打开 PDF 时显示警告框

> ID：11127596
> 
> 赞同：1
> 
> 时间：2012-06-20T20:23:24.430
> 
> 标签：pdf, adobe, alert

我想创建一个 PDF，当用户打开它时会弹出一个典型的“确定/取消”警报框。理想情况下，这将被内置到 PDF 中，因此可以下载和传递它而不会丢失警告框。

在当前的 Adob​​e PDF 标准下可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:28:37.510

似乎有可能：

[警报框：第 1 部分（共 5 部分）在弹出窗口上](http://acrobatusers.com/tutorials/popup_windows_part1)

# javascript - 如何测试一个字符是数字、大写还是小写？

> ID：11127598
> 
> 赞同：1
> 
> 时间：2012-06-20T20:23:34.147
> 
> 标签：javascript

我试图让这段 JavaScript 运行。我不断收到一条错误消息：

```
ThisChar.toUpperCase() is not a function 
```

我曾尝试使用 jsfiddle.net，但似乎无法解决此错误。这是怎么回事？

```
// CREATE ARRAY OF CHARACTERS
CharacterArray = ["1", "2", "3", "a", "b", "c", "D", "E", "F", "/", "+", ")"];

// TEST CHARACTERS 
function testCharacters() {
   // GET ARRAY LEN
   var CharacterArrayLen = CharacterArray.length;
   // LOOP THROUGH ARRAY
   for (i = 0; i < CharacterArrayLen; i++) {
       // PARSE SINGLE CHARACTER
       var ThisChar = CharacterArray.slice(i, i + 1);
       if (!isNaN(ThisChar * 1)) {
           alert(ThisChar + ' is numeric!');
       } else {
           if (ThisChar == ThisChar.toUpperCase()) {
               alert(ThisChar + ' is upper case true');
           } else if (ThisChar == ThisChar.toLowerCase()) {
               alert(ThisChar + " is lower case");
           } else {
               alert(ThisChar + " is unknown");
           }
       }
   }
}
testCharacters();​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T20:25:06.723

`.slice`总是返回一个数组。只需访问元素：

```
var ThisChar = CharacterArray[i]; 
```

* * *

您不必将值乘以`*1`，传递给的值`isNaN`将隐式转换为数字：

```
!isNaN(ThisChar) 
```

# java - 获取带有数学表达式的字符串，将其解析为函数数学表达式以稍后对其进行评估（Java）

> ID：11127599
> 
> 赞同：0
> 
> 时间：2012-06-20T20:23:37.113
> 
> 标签：java, string, parsing

我将此作为服务器响应：

`"[(sin(1+3*4)+2)/7]+10"`

此响应意味着 1、3、4、2、7 和 10 是 DB（mysql）上的某种索引项，我需要对其进行多次评估。我在 java 中寻找一个好的库，我发现 exp4j、expr、jep 和 jeval 就像数学表达式解析器一样，但我看不到在哪里获取这些“索引”的选项，因为服务器只给了我那个字符串但是不要给我需要在我的数据库中查阅的“索引项”。请帮忙 ：（

额外：1、3、4、2、7 和 10 是变量，我需要获取它（不总是数字），因为这些变量名称是我在数据库中的索引。当我得到名称时，我创建一个 sql 查询来获取该变量的实际值。

就像这样...

```
ParseMath function = new ParseMath("[(sin(1+3*4)+2)/7]+10");
String[] variables = function.getVariables();

System.out.println(values) = 1, 3, 4, 2, 7, 10 
```

然后...

```
String[] realValues = SqlQuery(variables);

for(int i=0; i<variables.lenght(); i++){
function.setValue(variable[i],realValue[i]);
}

double result = function.exec(); 
```

PS：我写的函数和方法不存在，我只是把它当作我的问题的上下文......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:56:31.503

大多数表达式解析器会将数字视为数字。如果您希望它们被视为变量，请用字母替换或前缀它们，即执行以下操作：

```
ParseMath function = new ParseMath(replaceVariables("[(sin(1+3*4)+2)/7]+10")); 
```

其中 replaceVariables 将是这样的：

```
String replaceVariables(String expr) {
  StringBuilder sb = new StringBuilder();
  boolean wasDigit = false;
  for (int i = 0; i < expr.length; i++) {
    char c = sb.charAt(i);
    if (c >= '0' && c <= '9') {
      if (!wasDigit) {
        sb.append('x');
      }
      wasDigit = true;
    } else if (c == '[') {
      c = '(';
    } else if (c == ']') {
      c = ')';
    }
    sb.append(c);
  }
  return sb.toString();
} 
```

这应该将示例表达式转换`((sin(x1+x3*x4)+x2)/x7)+x10`为更容易被表达式解析器识别的表达式。

请注意，当您设置变量时，您需要进行相同的转换，即如果您的服务器响应在 String 数组`realValues`中，您需要执行与此类似的操作来设置它们：

```
for (int i = 0; i < realValues.length; i++) {
  function.setValue("x" + i, Double.parseDouble(realValues[i]));
}
double result = function.exec(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:09:31.440

我对我的正则表达式有点生疏，但我认为这是最有效的方法。正则表达式将为您提供表达式中变量和数字的名称，然后您可以使用表达式库为您提供的任何工具来替换值。请注意，您需要知道服务器可以返回的每个函数，以便您可以从您的结果中排除它们（它们看起来像变量）。

```
public static void main( String[] args ) {
    String expression = "[(sin(1+3*4)+2)/7]+10";
    LinkedList<String> vars = new LinkedList<>();

    Pattern p = Pattern.compile("(?:[^0-9a-zA-Z]|\\G|^)([0-9a-zA-Z]+)(?:[^0-9a-zA-Z]|$)");
    Matcher m = p.matcher( expression );

    while(m.find()) {
        vars.add( m.group( 1 ) );
    }

    for(String s : vars ) {
        // Here's where you'd filter out the functions like "sin", "cos", etc.
        System.out.println( s );
    }
} 
```

我建议您使用一些示例对其进行测试，以确保我的正则表达式中没有任何漏洞。

# php - 从 sql - php 中检索数据

> ID：11127601
> 
> 赞同：0
> 
> 时间：2012-06-20T20:23:39.260
> 
> 标签：php, sql

我需要从数据库表中检索一条信息，如何从db中获取mpn号？

我在代码的第 11 行添加了它，但没有显示在结果中？

这是数据库的图像：

![http://www.roofboxstore.org.uk/screenshot.jpg](../Images/7442002105ef105fd1ff317a19e9722f.png)

```
<?php
$path = str_replace('/autorun','',str_replace('/controlpanel','',dirname($_SERVER['SCRIPT_FILENAME'])).'/');
$path = '../';
require($path.'start/autorun.php');

$file = $path.'googlebase.txt';
$fh = fopen($file, 'w');

$headerline .= "id\t";

$headings[0] = 'id';
$headings[1] = 'title';
$headings[2] = 'description';
$headings[3] = 'link';
$headings[4] = 'price';
$headings[5] = 'brand';
$headings[6] = 'condition';
$headings[7] = 'image_link';
$headings[8] = 'quantity';
$headings[9] = 'model_number';
$headings[10] = 'availability';
$headings[11] = 'MPN';

fwrite($fh, implode("\t",$headings)."\n");

# Products (+ Reviews)
$products = $db->query('SELECT * FROM products WHERE parent_id = 0 AND enabled = 1 AND hidden = 0 AND id IN (SELECT product_id FROM products_categories) ORDER BY salesrank ASC LIMIT 2000');
$products = $products->getFullArray();
foreach ($products as $product)
{   

    $productattributes = getProductAttributes($product['id']);
    $manufacturer = getManufacturer($product['manufacturer_id']);
    $images = getAllProductImages($product['id'], '500', '500');
    $mainimage = $images[0]; unset($images[0]);

    # Write Line
    $row = array();
    $row[0] = $product['id'];
    $row[1] = $product['title'];
    $row[2] = $product['metadescription'];
    $row[3] = URL_SITE.$product['pagename'].'/';
    $row[4] = $product['price']/100;
    $row[5] = $manufacturer['name'];
    $row[6] = 'new';
    $row[7] = URL_SITE.$mainimage['resized'];
    $row[8] = '100';
    $row[9] = $productattributes['Model'];
    $row[10] = 'in stock';
    $row[11] = $productattributes['mpn'];

    fwrite($fh, implode("\t",$row)."\n");
}

fclose($fh);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:30:20.227

也许您可以尝试以下方法：

```
SELECT *,
  (SELECT value
   FROM productattributes
   WHERE name = 'MPN'
     AND productattributes.product_id = products.id) MPN
FROM products
WHERE parent_id = 0
  AND enabled = 1
  AND hidden = 0
  AND id IN
    (SELECT product_id
     FROM products_categories)
ORDER BY salesrank ASC LIMIT 2000 
```

这将选择MNP 和=行`productattributes`所在的行。`name``product_id``products`

甚至更好：

```
SELECT products.*,
       productattributes.value
FROM products
LEFT JOIN productattributes ON (name = 'MPN' AND productattributes.product_id = products.id)
WHERE parent_id = 0
  AND enabled = 1
  AND hidden = 0
  AND id IN
    (SELECT product_id
     FROM products_categories)
ORDER BY salesrank ASC LIMIT 2000 
```

# mysql - 使用 SUM 和 JOIN 获取唯一值

> ID：11127605
> 
> 赞同：0
> 
> 时间：2012-06-20T20:23:59.573
> 
> 标签：mysql

我正在尝试获取 calc.transport 表 3_product_folder 的总数包含重复值（列“folder_id”），如何防止弄乱 SUM？我试过 DISTINCT 没有成功。

有什么建议么？

```
SELECT
SUM(calc.transport) AS transport
FROM 0_calculatie_id AS calc
LEFT JOIN 0_calculatie_inh_id AS id
ON id.calculatie_id = calc.id
LEFT JOIN 3_product_folder AS fld_id
ON fld_id.product_id = id.id
LEFT JOIN 4_folder_dossier AS fld
ON fld.product_folder_id = fld_id.folder_id
LEFT JOIN 10_factuur_inh AS fac_inh
ON fac_inh.folder_id = fld.id
LEFT JOIN 9_factuur_id AS fac
ON fac.id = fac_inh.factuur_id
WHERE YEAR(fac.datum_verstuurd) = ".$row['jaar']." AND MONTH(fac.datum_verstuurd) = ".$row_mth2['maand']." 
```

我已经尝试过这个嵌套查询，但并不是所有的项目都计算出来：

```
SELECT
SUM(temp.transport) AS transport
FROM
(SELECT DISTINCT
calc.transport,
fld_id.folder_id
FROM 0_calculatie_id AS calc
LEFT JOIN 0_calculatie_inh_id AS id
ON id.calculatie_id = calc.id
LEFT JOIN 3_product_folder AS fld_id
ON fld_id.product_id = id.id
LEFT JOIN 4_folder_dossier AS fld
ON fld.product_folder_id = fld_id.folder_id
LEFT JOIN 10_factuur_inh AS fac_inh
ON fac_inh.folder_id = fld.id
LEFT JOIN 9_factuur_id AS fac
ON fac.id = fac_inh.factuur_id
WHERE YEAR(fac.datum_verstuurd) = 2012 AND MONTH(fac.datum_verstuurd) = 7) AS temp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:33:36.423

表的结构是什么？

您尚未对 SQL 语句进行分组：

```
WHERE YEAR(fac.datum_verstuurd) = ".$row['jaar']." AND MONTH(fac.datum_verstuurd) = ".$row_mth2['maand']."
GROUP BY fld_id.product_id 
```

# macos - 如何在 OSX 中添加到 PATH 变量

> ID：11127609
> 
> 赞同：0
> 
> 时间：2012-06-20T20:24:06.160
> 
> 标签：macos, terminal, osx-snow-leopard, komodo, komodoedit

我将尝试为 Komodo Edit 构建自定义语言扩展。

为了构建 xpi 文件，我需要在 PATH 变量中添加一些内容。

我对命令行不是很熟悉，所以我不是 100% 确定如何做到这一点。

我首先在我的用户目录中创建了一个空的 .profile 文件。

我可以在文本编辑器中添加修改以完成我需要做的事情吗？

这是我要遵循的说明。 [http://community.activestate.com/forum/introduction-building-komodo-extension](http://community.activestate.com/forum/introduction-building-komodo-extension)

> 这是将 Mako UDL 打包到 Komodo 扩展中的工作原理。Komodo 在其安装树中包含一个 SDK。在 Linux 和 Windows 上，它位于“installdir/lib/sdk”，对于 Mac，它位于“komodo.app/Contents/SharedSupport/sdk”。该 SDK 在 /lib/sdk/bin 目录中包含一个 koext 帮助工具：将 SDK bin 目录放在您的 PATH 中，您应该能够在命令行中运行 koext。类似于 cvs 或 svn 等工具，这些工具具有多个子命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:28:41.087

类似的东西应该会有所帮助

[http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/](http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/)

```
export PATH=/ANYTHING_YOU_ARE_WORKIN_ON/bin:/opt/local/bin:/opt/local/sbin:$PATH export 
```

# rally - 导航到拉力赛应用程序中的外部 URL

> ID：11127610
> 
> 赞同：1
> 
> 时间：2012-06-20T20:24:06.240
> 
> 标签：rally

我想构建一个类似于“自定义 URL 应用程序”的应用程序，我可以从下拉列表中选择多个 URL 以导航到

听起来很简单，但我找不到在 Rally 应用程序中进行外部导航的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:43:55.737

我自己想通了

通过使用 javascript

```
window.location.replace('http://www.bing.com'); 
```

# android - Android：4.x 上图片的文件路径

> ID：11127623
> 
> 赞同：2
> 
> 时间：2012-06-20T20:25:07.843
> 
> 标签：android, mono, camera, xamarin.android

（Java 或 C# 答案很好，我使用 Mono）

我正在调用相机意图：

```
var intent = new Intent(MediaStore.ActionImageCapture);
intent.PutExtra(MediaStore.ExtraOutput, Android.Net.Uri.FromFile(_file));                
StartActivityForResult(intent, 0); 
```

在哪里`_file`：

```
/mnt/sdcard/Pictures/crime/mypic.jpg 
```

路径通过以下方式检索：

```
var dir = new Java.IO.File(
       Android.OS.Environment.GetExternalStoragePublicDirectory
           (Android.OS.Environment.DirectoryPictures), "crime"); 
```

但是，`the root of this path does not exist on my device`（/mnt）和相机应用程序加载时，我只能按取消，而不是完成。

我认为路径有问题。

`The question is`，有没有更好的方法来获取路径，这就是为什么相机应用程序中的完成按钮什么都不做的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:00:04.240

使用`DirectoryDcim`而不是`DirectoryPictures`解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T17:28:41.070

希望 Google 将为 Xamarin Android Camera 目录路径索引这些字符串

“/storage/emulated/0/DCIM/Camera/”。

可以通过符号链接访问

/SD卡/DCIM/

这最终是

/mnt/shell/emulated/0/DCIM/

在到达这里之前，我已经搜索了几天。

# wcf - 配置 WCF 服务 (Web.config) - HttpsGetEnabled、HttpsGetUrl

> ID：11127624
> 
> 赞同：12
> 
> 时间：2012-06-20T20:25:08.370
> 
> 标签：wcf, iis-7, web-config

我正在尝试将带有 WCF 服务的 Silverlight 部署到主机。基本上，我和这个人有同样的问题： [How to configure WCF services to work through HTTPS without HTTP binding?](https://stackoverflow.com/questions/4863590/how-to-configure-wcf-services-to-work-through-https-without-http-binding) 除了解决方案对我不起作用。

//编辑：我一直粘贴错了，但它仍然不起作用。

我已经尝试过 Ladislav Mrnka 的答案 - 在 Web.config 文件中更改了这个：

```
 <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" /> 
```

当我导航到服务器上的 .svc 文件时，仍然会出现可怕的错误：

```
The HttpsGetEnabled property of ServiceMetadataBehavior is set to true and the
HttpsGetUrl property is a relative address, but there is no https base address.
Either supply an https base address or set HttpsGetUrl to an absolute address. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T20:47:16.780

> 现在应该是正确的，我只是在适当的位置更改了 httpGetEnabled 和 httpsGetEnabled（它已经在配置文件中）。但我仍然得到错误。我应该在某处指定 HttpsGetUrl 吗？在哪里？

是的，看[这里](http://msdn.microsoft.com/en-us/library/ms731317.aspx)。

应该：

```
<behaviors>
 <serviceBehaviors>
  <behavior name="NewBehavior">
    <serviceMetadata httpsGetEnabled="true" 
     httpsGetUrl="https://myComputerName/myEndpoint" />
  </behavior>
 </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-04T06:52:39.103

在配置中，在您设置 httpsGetEnabled="true" 的行为下，也设置 httpsGetUrl="https://UserSystemName/EndPointName" 并解决问题。

```
<behaviors>
  <serviceBehaviors>
    <behavior name="mexBehaviour">
      <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https:///UserSystemName/EndPointName"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T04:37:39.157

发生此错误是因为设置在逻辑上是错误的。如果启用 httpsGetEnabled 方式，则允许客户端通过 https 检索元数据。如果您不提供有关 https 的 URL，客户端如何从 https 检索元数据。因此，错误消息会提醒您提供 URL。

```
Either supply an https base address or set HttpsGetUrl to an absolute address. 
```

你有三个选择。

1.  提供 httpsGetUrl 作为上面显示的其他答案
2.  通过 IIS 绑定地址

[![绑定](../Images/886d1f138cbbdd9e3a9611031ee14718.png)](https://i.stack.imgur.com/CNsrH.png) [![站点绑定](../Images/814cf3ecb67eb336f2261e47e7f72f02.png)](https://i.stack.imgur.com/Jzxi2.png)

（如果您仍在 Visual Studio 中开发，那么您只需要使用 SSL Enabled 模式进行调试） [![启用 SSL](../Images/1e421d90173164d4c438ee713329ad23.png)](https://i.stack.imgur.com/bLJrR.png)

3.  将 httpsGetEnabled 设置为 false

# entity-framework - 如何将 mvc-mini-profiler 用于数据库优先实体框架？

> ID：11127633
> 
> 赞同：1
> 
> 时间：2012-06-20T20:25:53.970
> 
> 标签：entity-framework, mvc-mini-profiler, database-first

我正在尝试将 mvc-mini-profiler 用于 db-first EF，但它无法正常工作。

（请注意，我使用的是 objectcontext，而不是 dbcontext）

这是我尝试过的stackoverflows列表：

*   [为 EF-db- first 设置 mvc-mini-profiler](https://stackoverflow.com/questions/6843155/setup-of-mvc-mini-profiler-for-ef-db-first)
*   [如何让 MVC-mini-profiler 首先在 EF 4.1 数据库上工作](https://stackoverflow.com/questions/7212926/how-to-get-mvc-mini-profiler-working-on-ef-4-1-database-first)

版本：

*   实体框架：4.3.1
*   迷你分析器：2.0.2
*   MiniProfiler.ef：2.0.3

这就是我设置 miniprofiler 的方式：

1.  我在 Global.asax 中添加了以下内容

    ```
    protected void Application_BeginRequest(
    {
        MiniProfiler.Start();   
    }

    protected void Application_EndRequest()
    {
        MiniProfiler.Stop();
    }

    protected void Application_Start()
    {
        ...

        MiniProfilerEF.Initialize_EF42();
    } 
    ```

2.  然后配置一个objectcontext，

    ```
    var entityConnection = new EntityConnection(ConnectionString);
    var profiledDbConnection = new EFProfiledDbConnection(entityConnection, MiniProfiler.Current);
    var context = profiledDbConnection.CreateObjectContext<MyContext>();
    var list = context.MyEntities.ToList(); 
    ```

如果我执行此操作，运行“context.MyEntities.ToList()”时会发生以下异常

[System.Data.EntityCommandCompliationException]

内部异常中的消息说：EntityClient 不能用于从存储命令树创建命令定义。

我配置错了吗？有什么帮助吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:24:26.450

我使用 MiniProfiler 和数据库优先的实体框架，它运行良好。您可能需要根据此相关答案在数据库上下文中关闭数据库初始化策略：[https ://stackoverflow.com/a/9762989/325727](https://stackoverflow.com/a/9762989/325727)

```
public class EmployeeContext : DbContext
{
    static EmployeeContext() { Database.SetInitializer<EmployeeContext>(null); }    
    public IDbSet<Employee> Employees { get; set; } 
} 
```

该参数`null`通过确保没有可用的初始化程序来关闭数据库初始化。

# windows-8 - 在开发 Metro 风格的应用程序时，是否可以使用任何内置声音？

> ID：11127639
> 
> 赞同：1
> 
> 时间：2012-06-20T20:26:12.427
> 
> 标签：windows-8, winrt-xaml

在开发 Metro 风格的应用程序时，是否可以使用任何内置声音？我需要播放一些简单的声音，例如点击或掷硬币等。我是否需要将 mp3 文件添加到我的应用程序中，或者是否有一些简单的声音可以开箱即用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:35:58.067

我还没有找到从 WinRT 应用程序播放“系统”声音的任何方法。有一个小例外，您可以控制出现 Toast 时播放的声音。

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh761492.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh761492.aspx)

除此之外，我不相信这是可能的。

# ios - iOS 6 Beta 中的自动布局

> ID：11127641
> 
> 赞同：1
> 
> 时间：2012-06-20T20:26:19.367
> 
> 标签：ios, ios6, autolayout

自动布局是在 iOS 6 中宣布的，但我一直很难找到有关它的任何信息或文档。它究竟是如何使用的？它使用 NSLayoutConstraint 吗？有可用的资源吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T23:26:41.550

如果 iOS 6 中的 Auto Layout 与 Mac OSX 10.7 中的[Cocoa Auto Layout 类似，那么公开文档 Cocoa Auto Layout Guide](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)可能会让您了解它在 Cocoa Touch 中的工作方式。

Cocoa Touch 使用的底层引擎是[Cassowary](http://www.cs.washington.edu/research/constraints/cassowary/)，它也被用于其他工具包中，例如[enaml](http://docs.enthought.com/enaml/)。我最近写了一篇[关于 Cassowary 的简要概述，比较了 Cocoa Touch 和 enaml](http://stacks.11craft.com/cassowary-cocoa-autolayout-and-enaml-constraints.html)，其中我将一个 Cocoa Auto Layout 示例移植到 Python 和 enaml。

# excel - 如何制作一个自引用的简单减法方程？

> ID：11127644
> 
> 赞同：0
> 
> 时间：2012-06-20T20:26:38.167
> 
> 标签：excel, excel-2010

因此，我正在制作一个电子表格，用于跟踪客户支付的应付金额、已付金额和任何滞纳金。

我目前的公式是

```
=(B5-B6)+B8 
```

问题是，我在该行中有数百个其他单元格，但不同的列都需要该公式，但我每次都被迫手动输入列字母。

```
=(C5-C6)+C8
=(D5-D6)+D8
=(E5-E6)+E8
=(F5-F6)+F8
=(G5-G6)+G8 
```

等等。

我想知道是否有一种方法可以创建一个自引用其自己列的公式，我可以使用该公式而无需使用类似于 =(CurrentColumn5-CurrentColumn6)+CorrentColumn8 的自引用变量更改列字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:35:27.690

只需在您想要保留的公式中的列字母或行号之前放置一个 $ 字符。这将防止在使用填充手柄时对该部分进行相对更改。

例如把公式

```
B1 + C$1 + $D$5 
```

进入单元格 A1。然后使用填充手柄填充单元格 A2。自动完成的公式将是：

```
B2 + C$1 + $D$5 
```

请注意，C$1 和 $D$5 没有变化。现在使用填充手柄从 A1 填充 B1。自动完成的公式将是：

```
C1 + D$1 + $D$5 
```

这次 C$1 更改为 D$1，B1 更改为 C1，一如既往。$D$5 永远不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:37:54.780

您不能制作“自引用”单元格，但如果您复制一个已包含公式的单元格并将其粘贴到另一列的下一个单元格中，Excel 将自动更新列字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:08:09.157

虽然 Alexander 是正确的，但您声明您的公式都在一行中，因此在填写时您只需沿着该行拖动即可。这意味着您甚至不需要使用`$`，因为行永远不会改变，因此即使不使用静态行值，行值也永远不会改变。有关更多信息，请参阅[deathApril 的评论](https://stackoverflow.com/questions/11127644/how-do-i-make-a-self-referencing-simple-subtraction-equation/11128206#comment14582537_11127644)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:38:34.597

一般来说，

```
(CurrentColumn$5 - CurrentColumn$6) + CurrentColumn$8 
```

列字母会继续增加，但会在公式中保持 5、6 和 8 作为常数。

# javascript - jQuery移动图像幻灯片冻结

> ID：11127645
> 
> 赞同：0
> 
> 时间：2012-06-20T20:26:38.770
> 
> 标签：javascript, jquery, ios, mobile, jquery-mobile

我的移动网站： http: [//mobile.jshjohnson.com](http://mobile.jshjohnson.com) 有一个图像滑块，在初始加载时可以正常工作，但是如果您在底部提交表单然后返回原始页面，图像滑块会冻结。有谁知道我将如何阻止这种情况发生？它只是 jQuery mobile 中的一个错误吗？

乔什

编辑：对不起，我在 iOS 上遇到这个

# .net - 本地数据存储 - .Net 中的 SQL Server Express、MySQL、XML 或 NoSQL

> ID：11127647
> 
> 赞同：0
> 
> 时间：2012-06-20T20:26:48.833
> 
> 标签：.net, nosql, tethering, xml-database

设想：

1.  我正在构建一个离线（是的，你在 2012 年没看错）应用程序，它需要在本地存储数据。
2.  并在连接时与中央 mysql 数据库同步。
3.  此客户端应用程序必须在 XP/Win7/Win 8 和 Windows 手机中运行。但也可能移植到 Droid 和 iOS。

数据量不大，关系也没有那么复杂。同样在某些时候 thi 所以我正在考虑使用：

1.  SQL Server Express / Compact（可能无法在基于 linux 的 droid / ios 中工作）
2.  MS-Access（不喜欢）
3.  基于 XML 文件的数据存储和手写数据处理（有趣但更多工作）
4.  XML 数据库（昂贵）
5.  没有 SQL 选项（可能是 Redis）

在我进入 Redis 之前，想听听大师的意见，是否有人遇到过类似的情况并实现了类似的东西。

提前感谢拉胡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:29:31.073

您绝对应该考虑[SQLite](http://www.sqlite.org/)选项。

> SQLite 是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。

# asp.net - 如何使 ASP.NET 服务器控件获得最短的 ID？

> ID：11127652
> 
> 赞同：7
> 
> 时间：2012-06-20T20:27:19.413
> 
> 标签：asp.net, asp.net-mvc-3, webforms

我正在使用 ASP.NET 4.0 WebForms。我还使用从其他母版页继承的母版页。我在面板内有控件。基本上有多层容器。这导致元素具有巨大的 ID。我看到 ID 大约 300 字节长！

当页面中有数百个元素时，这些 ID 会显着增加页面的大小。我有一个`GridView`带有绑定控件的控件。

让每个服务器控件具有最短 ID 的最佳方法是什么？有没有办法让每个元素不依赖于它的容器（除了`ClientIDMode="static"`）ID，即使但在页面中仍然是唯一的？最后，ASP.NET MVC 是否缓解了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:34:30.747

我建议[将 ClientIdMode 更改](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)为**Predictable**或**Static**，以查看是否会产生更短的 ID。

此外，这篇[CodeProject 文章](http://www.codeproject.com/Articles/34124/How-To-Shorten-ASP-NET-Automatically-Generated-Con)似乎可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:40:00.773

MVC 绝对缓解了这个问题，因为没有以相同方式呈现 html 代码的服务器端。您的所有 html 都直接在您的视图中，因此您可以完全控制每个项目。您还冒着冲突输入的风险（对于具有数百个输入的页面）。

您可以帮助缩短 WebForms 中生成的所有 html 的一种方法是删除任何对于成为 webusercontrol 不是绝对必要的内容。例如，大多数标签都是静态的。它们可以正常替换为标准文本或不包含该`runat="server"`属性的项目。这将首先防止生成 id。减少生成的垃圾数量的另一种方法是从 ViewState 中删除尽可能多的控件。这将阻止他们加载他们的状态数据并保持 ViewState 更短。

ClientIDMode 是一个可继承的属性，因此您可以在 web.config（全局）、web.config（本地）或页面级别进行设置。您也可以单独使用它。您的问题专门消除了这一点，但它可能是具有最大灵活性的最佳选择，而无需重写您已有​​的内容。如果重写不是问题，我建议使用 MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:38:13.893

> 最后，ASP.NET MVC 是否缓解了这个问题？

是的。

MVC中没有`ViewState`，并且您没有在服务器上运行任何控件。

您没有使用任何会生成大量难以阅读的 HTML 的服务器控件。

您可以完全控制`ClientID`MVC 中的 's。

```
<a href="#" id="myID">Click</a> 
```

`myID`除非我自己更改，否则上述标记将始终具有 id 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:32:01.387

我认为`ClientIDMode=static`是其中一种方式。你也可以在你的 web.conf 中设置它。在 Asp.Net mvc 中，您可以完全控制 html（尤其是在 Razor 中）。没有像网络表单这样的想法。您可以控制将 id 分配给 html 标签。事实上 Asp.Net mvc 是对所有其他框架的回答。

# javascript - 为什么 ProgressEvent.lengthComputable 为假？

> ID：11127654
> 
> 赞同：18
> 
> 时间：2012-06-20T20:27:29.697
> 
> 标签：javascript, xmlhttprequest

我在 Google Chrome、Safari 和 Firefox 中使用 XMLHttpRequest 加载 JSON 文件。在所有三个浏览器中，我都收到`ProgressEvent`了正确显示`.loaded`属性的 s。但是该`.lengthComputable`属性为假且该`.total`属性为零。我检查了`Content-Length`HTTP 标头是否正在发送并且是正确的 - 是的。响应是 gzip 编码的，但`Content-length`正确显示了编码长度（解压缩之前）。

为什么我`ProgressEvent`的 s 中没有总长度？

以下是标题：

```
HTTP/1.1 200 OK
ETag: "hKXdZA"
Date: Wed, 20 Jun 2012 20:17:17 GMT
Expires: Wed, 20 Jun 2012 20:17:17 GMT
Cache-Control: private, max-age=3600
X-AppEngine-Estimated-CPM-US-Dollars: $0.000108
X-AppEngine-Resource-Usage: ms=2 cpu_ms=0 api_cpu_ms=0
Content-Type: application/json
Content-Encoding: gzip
Server: Google Frontend
Content-Length: 621606 
```

注意：该文件是通过 Google App Engine 提供的。

这是JavaScript：

```
var req;
if (window.XMLHttpRequest){
    req = new XMLHttpRequest();
    if(req.overrideMimeType){
        req.overrideMimeType( "text/json" );
    }
}else{
    req = new ActiveXObject('Microsoft.XMLHTTP');
}

// Listen for progress events
req.addEventListener("progress", function (event) {
    console.log(event, event.lengthComputable, event.total);
    if (event.lengthComputable) {
        self.progress = event.loaded / event.total;
    } else if (this.explicitTotal) {
        self.progress = Math.min(1, event.loaded / self.explicitTotal);
    } else {
        self.progress = 0;
    }
    self.dispatchEvent(Breel.Asset.ON_PROGRESS);
}, false);

req.open('GET', this.url); 
```

注意：该`console.log`代码中的 s 显示了数百个具有最新`.loaded`s 的事件，但`.lengthComputable`始终为假且`.total`始终为零。`self`指负责 this 的对象`XMLHttpRequest`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T15:12:12.687

如果 XMLHttpRequestProgressEvent 中的 lengthComputable 为 false，则意味着服务器从未在响应中发送 Content-Length 标头。

如果您使用 nginx 作为代理服务器，这可能是罪魁祸首，特别是如果它没有将上游服务器的 Content-Length 标头通过代理服务器传递到浏览器。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-14T13:31:01.513

与此同时，2017 年，Firefox 一切正常，但 Chrome 并未显示 gzip 内容的进度。

这似乎是由于规范曾经不清楚是指压缩还是未压缩的内容`loaded`。[自](https://github.com/whatwg/xhr/commit/b9f6bcf9800963eb450b20cc96492a670fb96a99)2014 年6 月 26 日以来， [XMLHttpRequest 规范](https://xhr.spec.whatwg.org/)明确表示它们应该引用传输（压缩）的内容：`total`

> 6.1。`ProgressEvent`使用接口触发事件
> 
> [...] 给定*传输*和*长度*[...] 触发事件 [...] `ProgressEvent`，`loaded`属性初始化为*传输*，如果*长度*不为 0 ，则`lengthComputable`属性初始化为 true ，`total`属性初始化为*length*。

但是，2015 Chromium 错误报告[“XHR 的进度事件应该处理 gzip 压缩的内容”](https://bugs.chromium.org/p/chromium/issues/detail?id=463622)解释说情况有所不同，并指出：

> 编码时，`total`保持为 0`lengthComputable`且未设置

事件本身仍然被触发，并且`event.loaded`仍然被填充。但是 Chrome 正在动态解压缩 gzip 的内容，并且（今天）设置`loaded`为解压缩后的长度，而不是*传输*的长度。这不能与`Content-Length`标头的值进行比较，因为这是*压缩*内容的长度，因此`loaded`会大于内容长度。

充其量可以假设一些压缩因子进行比较`loaded`，`Content-Length`或者让服务器添加一些自定义标头以提供原始长度或真正的压缩因子，假设 Chrome 的动态解压缩不会改变。

我不知道 Chrome 对`Content-Encoding`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-11T11:18:45.053

使用**req.upload.addEventListener**进行上传

*req.addEventListener* event.lengthComputable 将始终为 false

```
req.upload.addEventListener("progress", function (event) {
    console.log(event, event.lengthComputable, event.total);
    if (event.lengthComputable) {
        self.progress = event.loaded / event.total;
    } else if (this.explicitTotal) {
        self.progress = Math.min(1, event.loaded / self.explicitTotal);
    } else {
        self.progress = 0;
    }
    self.dispatchEvent(Breel.Asset.ON_PROGRESS);
}, false); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-30T20:12:37.650

只需在 PHP 或 apache/nginx 中设置

```
header("Content-Encoding: none"); 
```

问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-25T15:51:52.847

在控制器代码中设置 Content-Length。这将设置`event.lengthComputable`.

```
var fileSize = new FileInfo(filePathAbs).Length;
context.Response.AddHeader("Content-Length", fileSize.ToString());
context.Response.AddHeader("content-disposition", "inline;filename=" + fileName);

var req = new XMLHttpRequest();

req.open('GET', '/EReader/GetDocument?p=@Model.EncodedTempFilePath');
req.responseType = "arraybuffer";
req.onprogress = function (event) { 
    if (event.lengthComputable) {
        percentage = Math.floor(event.loaded * 100 / event.total); // give the percentage
        var elem = document.getElementById("bar");
        elem.style.width = percentage + '%';
    }
}; 
```

# java - 如何记录最后合同（通过 jaxb schemagen）网络服务？

> ID：11127661
> 
> 赞同：3
> 
> 时间：2012-06-20T20:27:52.997
> 
> 标签：java, web-services, jakarta-ee, jaxb, schemagen

我开发了一个网络服务，我的用户理所当然地希望看到文档。我更喜欢简单地记录我的代码，使用 javadoc 注释或显式注释，例如

```
@XmlComment("This is used to [blah blah]")
@XmlElement(name = "referenceDate", namespace = NAMESPACE, type = Date.class)
public void setReferenceDate(Date referenceDate) {
    this.referenceDate = referenceDate;
} 
```

或者

```
/**
 * This is used to [blah blah]
 */
@XmlElement(name = "referenceDate", namespace = NAMESPACE, type = Date.class)
public void setReferenceDate(Date referenceDate) {
    this.referenceDate = referenceDate;
} 
```

不支持上述内容，如下所示：

*   [JAXB-273](http://java.net/jira/browse/JAXB-273?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab) - 2006 请求从注释中生成 xs:documentation 元素
*   [JAXB-369](http://java.net/jira/browse/JAXB-369?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab) - 2007 请求从评论中制作 xs:documentation 元素
*   [SO-470001](https://stackoverflow.com/questions/470001/jaxb-documentation-annotation) - “你不能那样做”stackoverflow 问题

所以我知道我不能使用上述内容来评论我的服务。但是......当然还有一种方法可以以非手动方式进行。我必须为此手工制作所有的 XML 吗？如果*这*就是答案，为什么没有更多地关注将这个特性引入 JAXB 呢？对于企业级 Web 服务来说，这似乎是完全强制性的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:49:22.087

你是对的，它很穷。这些天最关注的是合同优先，所以我想它没有被优先考虑。您可以使用 XSLT 从单独的 XML 文档向 WSDL 添加注释。不如从 Java 代码生成它，但总比没有好。这是一个古老的帖子[http://www.gridlab.org/WorkPackages/wp-5/guide/wsdltips.html](http://www.gridlab.org/WorkPackages/wp-5/guide/wsdltips.html)

# java - Jetty+Jersey servlet+Weld：焊接注入未初始化，怎么回事？

> ID：11127665
> 
> 赞同：3
> 
> 时间：2012-06-20T20:28:18.840
> 
> 标签：java, jetty, jersey, jboss-weld

我正在尝试从 Glassfish+Jersey+Weld 迁移到 Jetty。

我有这样的设置：[pom.xml、web.xml 和 Java 启动器的要点](https://gist.github.com/2961967)。

应用程序似乎可以正常启动，但是在处理任何请求时，我看到应该由 Weld ( `logger`) 注入的字段为空。

```
@RequestScoped
@Path("/foobar")
@Consumes({ ExtendedMediaType.APPLICATION_JSON, 
    ExtendedMediaType.APPLICATION_JAVASCRIPT })
@Produces({ ExtendedMediaType.APPLICATION_JSON, 
    ExtendedMediaType.APPLICATION_JAVASCRIPT })
public class EmailResource extends {

    @Inject
    private Logger logger;

    @Override @POST
    public Response create(EmailJob document) 
        throws URISyntaxException, ResourceException 
    {
       logger.debug("Hi there!");
    }
} 
```

问题是什么？

**更新：**记录器生产者看起来很可疑，但它甚至没有被调用：

```
/** This class uses CDI to alias Java EE resources into CDI beans. **/
public class Resources {

    @Produces
    public Logger produceLog(InjectionPoint injectionPoint) {
        return LoggerFactory.getLogger(
            injectionPoint.getMember().getDeclaringClass().getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:42:44.637

嗨，维克多，我按照要求回答了我的问题，我用嵌入式码头写了一篇关于这个的[博客。](http://www.lifeasageek.com/2012/06/java-ee-6-web-profile-without-app.html)我还将一个完整的工作示例推送到[github](https://github.com/justinwyer/goodstuff-example/tree/part2)，您可以克隆它。

我看不出你的要点有什么问题，但是你能告诉你的 Logger 制作人吗？

更新：

我在您的代码中看到拼写错误“BeanMnanager”，但不确定是否是原因

```
new Resource("BeanManager", new Reference("javax.enterprise.inject.spi.BeanMnanager",
        "org.jboss.weld.resources.ManagerObjectFactory", null)); 
```

# css - 重写 URL 时的参考

> ID：11127666
> 
> 赞同：1
> 
> 时间：2012-06-20T20:28:21.403
> 
> 标签：css, .htaccess, easyphp

我想将像这样 [http://www.mydomain.com/it/archive.php=321123](http://www.mydomain.com/it/archive.php=321123)这样的 URL 转换成 如下 [http://www.mydomain.com/it/R/321123](http://www.mydomain.com/it/R/321123) 在一本书中我发现了一些有用的东西，我得到了以下内容

```
RewriteEngine On
RewriteRule ^R/(.*) archive.php?$1 [PT] 
```

哪些工作正常。问题是代码中的任何引用都像

```
<link rel="stylesheet" type="text/css" href="css/layout.css" /> 
```

被转化为

```
<link rel="stylesheet" type="text/css" href="www.mydomain.com/it/R/css/layout.css" /> 
```

R 文件夹在现实中不存在，所以它不包含任何 css 文件，所有 css 文件都存储在文件夹[http://www.mydoman.com/it/css](http://www.mydoman.com/it/css)中。Chrome 开发人员实用程序给了我以下信息： *Resouce 被解释为样式表，但使用 MIME 类型 text/html 传输：“http://www.mydomain.com/it/R/css/style.css”。*

可以更改地址，但在页面内部保留与原始页面相同的引用。我可以写

```
<link rel="stylesheet" type="text/css" href="http://www.mydomain.com/it/css/layout.css" /> 
```

但是当我使用 EasyPHP 离线工作时，这应该不起作用。

PS：我想将 .htaccess 文件放入[http://www.mydomain.com/it](http://www.mydomain.com/it)文件夹，这样它只会影响 it 语言部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:35:27.747

您可以将其添加到页面的标题中：

```
<base href="/it/"> 
```

这应该使得*相对*URI 路径（例如“css/layout.css”）不会与`/R/`重写混淆。

如果这不可能，您可以尝试添加额外的规则以使 css 工作：

```
RewriteRule ^R/css/(.*)$ css/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:34:15.420

假设 R/ 之后的部分总是数字，试试这个：

```
RewriteEngine On
RewriteRule ^R/([0-9]*) archive.php?$1 [PT] 
```

# authentication - 本地用户的 Windows AD 身份验证

> ID：11127670
> 
> 赞同：1
> 
> 时间：2012-06-20T20:28:43.790
> 
> 标签：authentication, windows-7, login, active-directory, winlogon

我想使用 AD 对某些实验室 PC​​ 的用户进行身份验证，但我希望他们登录到共享的本地配置文件。

我不想使用漫游配置文件，也不想等待大约 30 秒为每个登录实验室 PC​​ 的用户创建一个帐户（因此将他们指向一个共享的本地帐户）

有任何想法吗？

# jquery - 在没有屏幕刷新的情况下，使用 jQuery 更改不透明度在 Chrome 或 Safari 中不起作用

> ID：11127675
> 
> 赞同：1
> 
> 时间：2012-06-20T20:29:12.900
> 
> 标签：jquery, css, google-chrome, safari, opacity

我希望在点击时显示/隐藏内容，并设置 CSS 不透明度而不是使用`toggle()`或`hide()`，`show()`因为我希望内容仍然占据页面上的空间。

这是问题页面（单击右上角的 wee 按钮隐藏/显示内容）：http: [//indigobrazilianportuguese.com/about-us/](http://indigobrazilianportuguese.com/about-us/)

和 jQuery：

```
$('.close').toggle(function() {
    $(this).siblings('p').text('Show content');
    $('#container').css('opacity', 0);
    $('#footer-container').css('opacity', 0);
}, function() {
    $(this).siblings('p').text('Show image');
    $('#container').css('opacity', 1);
    $('#footer-container').css('opacity', 1);
}); 
```

在 Firefox 和 Opera 中可以正常工作，但在 Chrome 或 Safari 中不行。

在 Chrome 和 Safari 中，需要刷新屏幕才能正常工作（例如，当我调整浏览器窗口的大小时，内容会显示/隐藏），尽管在网站上的其他页面上相同的按钮可以正常工作......

还尝试添加/删除类以应用 CSS 不透明度更改，但没有成功。

有小费吗？愿意使用 CSS 不透明度的替代方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:31:23.003

如果您希望它占用空间，请使用可见性：隐藏

做 addClass 和 removeClass 但使用可见性而不是不透明度，看看你是否得到你想要的

见[http://www.w3schools.com/cssref/pr_class_visibility.asp](http://www.w3schools.com/cssref/pr_class_visibility.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:36:59.560

试试这个：

```
$('.close').toggle(function() {
    $(this).siblings('p').text('Show content');
    $('#container, #footer-container').css('visibility', 'hidden');
}, function() {
    $(this).siblings('p').text('Show image');
    $('#container, #footer-container').css('visibility', 'visible');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:55:34.967

我发现每当一个浏览器，不管是哪个，有绘画问题，你只**知道**你的代码没有问题（一个放弃是预期的结果会出现在所有其他浏览器中）：然后简单地做**阅读**此属性，您应该没问题。读取迫使有故障的浏览器“注意”。像这样：

```
var never_mind_me = $(elem).css('opacity'); 
```

然后丢弃该值（因此您甚至不需要将值存储在变量中，为了便于阅读，在我的示例中这样做了）。它应该可以解决问题。当然，请确保将阅读内容放在正确的位置（！重要）。这是一个更完整的示例：

```
$('#myDiv').css('opacity', 0.5);
$('#myButton').on('click', function () {
    $('#myDiv').animate({opacity: 1}, {duration: 1000, complete: function () {
        // Oh no, we figured one or another
        // browser didn't finish his painting job.
        // The sorcery should be applied here:
        $(this).css('opacity');
        }});
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T13:44:24.497

Chrome 中存在关于不透明度的已知问题。

不要使用“不透明度”来隐藏元素——使用“可见性”

在你的情况下不应该是这样的：

```
$('.close').toggle(function() {
    $(this).siblings('p').text('Show content');
    $('#container').css('opacity', 0);
    $('#footer-container').css('opacity', 0);
}, function() {
    $(this).siblings('p').text('Show image');
    $('#container').css('opacity', 1);
    $('#footer-container').css('opacity', 1);
}); 
```

但应该是这样的：

```
$('.close').toggle(function() {
    $(this).siblings('p').text('Show content');
    $('#container').css('opacity', 0);
    $('#footer-container').css('visibility', 'hidden');
}, function() {
    $(this).siblings('p').text('Show image');
    $('#container').css('opacity', 1);
    $('#footer-container').css('visibility', 'visible');
}); 
```

希望它会帮助别人！

# html - 是否可以修改 HTML 图表？

> ID：11127678
> 
> 赞同：0
> 
> 时间：2012-06-20T20:29:34.963
> 
> 标签：html, charts

在尝试制作 HTML 代码时，我是全新的。我想知道是否可以让查看页面的随机用户修改 HTML 图表中的某些行/列。

如果是这样，是否有可能做到这一点，一旦修改，他们点击一个按钮，它会像计算器一样改变其他一些行，基于我预设的（数字）

希望这是有道理的......

谢谢

顺便说一句，我使用的是我制作的谷歌网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:38:19.013

HTML 表格是静态数据的列和行，不可修改。一种解决方案是使用 javascript 并在每个 .onClick 方法上执行一个 .onClick 方法`<td>`。该方法会将文本转换为类似的内容`<input type="text" name="cell_x_y" value="original_value" />`，然后是另一种处理 ENTER 键或离开该文本字段并将值提交给服务器的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:40:23.363

您可以使用`<input>`元素来允许人们输入文本，并使用 javascript 进行涉及其内容的任何计算，或更改页面上的内容。

有关这些内容的更多信息，请参阅[https://developer.mozilla.org/en/HTML/Element/Input](https://developer.mozilla.org/en/HTML/Element/Input)和[https://developer.mozilla.org/en/JavaScript 。](https://developer.mozilla.org/en/JavaScript)

# regression - 调查数据的交叉表（加权和未加权）

> ID：11127680
> 
> 赞同：0
> 
> 时间：2012-06-20T20:29:39.960
> 
> 标签：regression, survey

我有正在处理的调查数据。我需要对数据做一些表格和回归分析。附加数据后，这是我用于四个变量的表的代码：

> ftable(var1, var2, var3, var4)

这是我用于数据的回归代码：

> logit.1 <- glm(var4 ~ var3 + var2 + var1, family = binomial(link = "logit")) 摘要(logit.1)

到目前为止，对于未加权分析来说非常好。但是我怎样才能对加权数据进行相同的分析呢？以下是一些附加信息：数据集中有四个变量反映了抽样结构。这些是

strat：stratum（城市或（县）农村）。

集群：同一随机游走中的一批访谈

vill_neigh_code：村庄或社区代码

重量：重量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:19:10.397

```
library(survey)

data(api)

# example data set
head( apiclus2 )

# instead of var1 - var4, use these four variables:
ftable( apiclus2[ , c( 'sch.wide' , 'comp.imp' , 'both' , 'awards' ) ] )

# move it over to x for faster typing
x <- apiclus2

# also give x a column of all ones
x$one <- 1

# run the glm() function specified.
logit.1 <-
    glm( 
        comp.imp ~ target + cnum + growth , 
        data = x ,
        family = binomial( link = 'logit' )
    )

summary( logit.1 )

# now create the survey object you've described
dclus <-
    svydesign(
        id = ~dnum + snum , # cluster variable(s)
        strata = ~stype ,   # stratum variable
        weights = ~pw ,     # weight variable
        data = x ,
        nest = TRUE
    )

# weighted counts
svyby( 
    ~one , 
    ~ sch.wide + comp.imp + both + awards , 
    dclus , 
    svytotal 
)

# weighted counts formatted differently
ftable(
    svyby( 
        ~one , 
        ~ sch.wide + comp.imp + both + awards , 
        dclus , 
        svytotal ,
        keep.var = FALSE
    )
)

# run the svyglm() function specified.
logit.2 <-
    svyglm( 
        comp.imp ~ target + cnum + growth , 
        design = dclus ,
        family = binomial( link = 'logit' )
    )

summary( logit.2 ) 
```

# objective-c - 方法仍在运行时调用了 Dealloc

> ID：11127683
> 
> 赞同：2
> 
> 时间：2012-06-20T20:29:52.603
> 
> 标签：objective-c, ios, synchronized

在我正在处理的一个项目中（我拿起了这段代码，我一直在尝试调试它），我有一个被观察者调用的函数。观察者调用一个方法来更新要放在屏幕上的数据。在发生此更新时（更新需要几秒钟），用户可以按导航栏上的“返回”按钮，这会导致发生 dealloc 调用。当方法运行时，dealloc 调用释放所有 ivars，当方法尝试访问 ivars 时，最终会导致 EXC_BAD_ACCESS。更新方法的结构也包含在一个`@synchronized`块中。

```
- (void)update {

@synchronized(self){
  // some code here...
  // Also access ivars here.
  }

} 
```

可以做些什么来告诉控制器在解除分配之前先完成该方法？我尝试在 dealloc 中运行带有条件的 while 循环，但这似乎效率不高。如果控制器被释放，它也永远不会完全执行，并处于死锁状态。我觉得解决方案很简单，但是我的大脑因一整天的工作而煎熬，我无法思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:42:09.070

您可以调用`retain`以`self`确保在运行较长时间的方法时引用计数不会达到零；并以这种方式避免dealloc：

```
- (void) update {
    [self retain]

    // do work ...

    [self release]
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:51:53.297

如果你把需要做的工作放在一个块中，编译器会自动保留块内引用的所有对象（包括self）。例如：

```
- (void)update {
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        // some code here, access ivars, do whatever you want
    }];
} 
```

update 方法将立即返回，并且该块将被安排在主运行循环上运行（此处不涉及辅助线程）。

如果更新工作是一项长时间运行的任务，您可以使用后台队列而不是主队列，然后（在该块内）安排另一个块在主队列上运行并在工作完成时与 UI 交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:17:28.610

既然您在谈论 NavigationBar，我的猜测是您的 NavigationController 正在释放其对您的 UIViewController 类的引用，而后者又持有 ivars。一种解决方法是将对象保留在视图控制器中，直到进行计算，正如其他答案所暗示的那样。但是，如果您所做的计算是为了计算应该在该视图中显示哪些数据，那么下次打开同一个视图时，您将重新从头开始重新加载该视图。

我要做的是保留对您在导航控制器之外使用的 ViewController 的引用，这样当用户按下后退按钮时它不会被释放。

稍后，如果用户回到同一个视图，您将已经加载了数据。只需使用相同的参考再次推动它。

例子：

```
@interface YourRootViewController : UIViewController {
    YourNextControllerClass *nextController;
}

@property (nonatomic, retain) YourNextControllerClass *nextController;

@end 
```

在您的顶级 ViewController 的 ViewDidLoad 中：

```
self.nextController = [[[YourNextControllerClass alloc] initWithNibName:@"YourNextControllerNib" bundle:nil] autorelease]; 
```

当您要显示视图时：

```
[myNavigationController pushViewController:nextController animated:YES]; 
```

如果用户按下后退按钮，视图控制器将不会被释放，所以当你再次按下它时，一切都会在你离开它时出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T08:35:46.217

解决方案取决于您是否要使该对象保持活动状态直到方法结束。但是，您也使用@synchronized (self)：如果 self 被释放并且 @synchronized 试图移除对 self 的锁定，我会非常害怕会发生什么，所以在这种情况下，我会尝试让它保持活动状态。（但是，@synchronised 然后运行大量代码在我看来不是一个好主意；@synchronised 应该用于尽可能少的代码以避免死锁）。

使用 ARC，让对象在方法中保持活动状态很简单。

```
typeof (self) myself = self; 
```

将创建对自我的强烈引用。最好在方法体中使用我自己而不是自我。

如果您不想让对象“自我”保持活动状态，这将是通常的情况：

```
__weak typeof (self) weakSelf = self; 
```

然后无论你想确保 self 还在哪里，你都可以写

```
typeof (self) strongSelf = weakSelf;
if (strongSelf != nil) {
} 
```

# sql - NOT IN 查询不起作用，SQL Server 2008

> ID：11127684
> 
> 赞同：0
> 
> 时间：2012-06-20T20:29:53.667
> 
> 标签：sql, tsql

![在此处输入图像描述](../Images/3a9eedc146ca952c596f82e63309543c.png)

运行前查询的第一部分`not in`给了我一个包含 100 条记录的列表。第二个查询运行并给我一个包含 75 条记录的列表。我尝试使用的查询`not in`是获取一个结果集中的记录，而不是另一个结果集中的记录。我得到的错误是`incorrect syntax near the word not`.

```
SELECT distinct  Patient.patientid
FROM Patient INNER JOIN
 patientICD ON Patient.patientid = patientICD.patientid AND Patient.admissiondate = patientICD.admissiondate AND 
                      Patient.dischargedate = patientICD.dischargedate INNER JOIN
                      tblICD ON patientICD.primarycode = tblICD.ICD_ID
WHERE     (tblICD.descrip LIKE N'%diabetes%') and  not in
(
SELECT    distinct Patient.patientid
FROM         Patient INNER JOIN
 patientICD ON Patient.patientid = patientICD.patientid AND Patient.admissiondate = patientICD.admissiondate AND 
                      Patient.dischargedate = patientICD.dischargedate INNER JOIN
                      tblICD ON patientICD.primarycode = tblICD.ICD_ID
WHERE     (tblICD.icd_id LIKE N'25000')
) 
```

是否允许使用 编写查询`expression AND NOT IN (select query`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:32:31.980

您需要指定第二个查询中没有的字段

```
and Patient.patientid not in 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:32:31.360

你的意思是写这个吗？

```
WHERE     (tblICD.descrip LIKE N'%diabetes%') and Patient.patientid not in 
```

**更新**

是否有可能将整个事情改写成这样？

```
SELECT distinct  Patient.patientid
FROM Patient INNER JOIN
 patientICD ON Patient.patientid = patientICD.patientid AND Patient.admissiondate = patientICD.admissiondate AND 
                      Patient.dischargedate = patientICD.dischargedate INNER JOIN
                      tblICD ON patientICD.primarycode = tblICD.ICD_ID
WHERE tblICD.descrip LIKE N'%diabetes%' AND tblICD.icd_id NOT LIKE N'25000' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:33:50.140

您在 NOT 之前忘记了一个字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:40:01.677

我相信您需要指定`not in`正在查看的列。所以根据你的剧本，我想你会想要`and Patient.patientid not in`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T21:16:13.053

纯粹的风格：您可以“挤出” PatientICD*tblICD 产品，并将其放入 CTE，并引用两次，例如：（未经测试）

```
WITH zzz AS (
        SELECT pic.patientid , pic.admissiondate , pic.dischargedate
        , tab.ICD_ID , tab.descrip
        FROM patientICD pic
        JOIN tblICD tab ON pic.primarycode = tab.ICD_ID
        )
SELECT DISTINCT p.patientid
FROM  Patient p
JOIN zzz one ON one.patientid = p.patientid
             AND one.admissiondate = p.admissiondate 
             AND one.dischargedate = p.dischargedate 
WHERE one.descrip LIKE N'%diabetes%'
AND p.patientid NOT IN (
        SELECT two.patientid 
        FROM zzz two
        WHERE two.admissiondate = p.admissiondate
        AND two.dischargedate = p.dischargedate
        AND two.icd_id LIKE N'25000'
        ); 
```

注意：我不喜欢`LIKE N'25000'`. 我认为完全匹配会很好。icd_id-field 应该是数字，可能。{admissiondate,dischargedate} 对也应该建模；可能通过使用诊断 ID 或事件 ID。

# python - 龙卷风框架 src 不工作

> ID：11127687
> 
> 赞同：0
> 
> 时间：2012-06-20T20:30:04.487
> 
> 标签：python, tornado

我正在使用 Tornado，我有以下代码：

```
class UserHandler(RequestHandler):
    def get(self):
        user = self.get_argument("username")
        self.set_cookie("user", user)
        out = tableize(user)
        self.render('chat.html',table=out) 
```

现在，chatter.html 看起来像这样：

```
<iframe src="{{ static_url('mess.html') }}" width="500" height="400"></iframe> 
```

mess.html 是：

```
<div id="chat">
    {% for x in table %}
        <b> x </b>
    {% end %}
</div> 
```

我的问题是，如何将 'table' 参数传递给 mess.html？我不知道如何让它正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:44:45.877

看看[Tornado 文档](http://www.tornadoweb.org/documentation/template.html)`{% include %}`，它可能会做你想要实现的目标。不要使用 iframe，而是直接执行.`{% include "mess.html" %}`

如果要保留独立框架以便单独刷新，则必须将 iframe 视为单独的请求。因此，您还必须提供自己`RequestHandler`的 cookie 获取位置，然后为您的用户生成表格。然后将 iframe src 设置为您为此选择的 URL `RequestHandler`。

# sql - 如何在 XSLT 中执行类似“while”的循环？

> ID：11127693
> 
> 赞同：3
> 
> 时间：2012-06-20T20:30:38.317
> 
> 标签：sql, xslt, loops, while-loop

我是 XSLT 的新手，我在这个问题上遇到了很多困难：我需要在 XSLT 中做一个类似于 while 的循环。我认为 for-each 不足以解决这个问题。

我有一个变量是 SELECT 语句的结果。它可以返回 0 或整数。如果值为0，则需要再次执行SELECT，发送另一个参数，看看值是否不同。

我只能考虑使用类似while的循环，但也许它有另一种实现方式？就像使用模板并最终调用自己一样？是否可以？

像这样的东西：

```
<!-- initiate TEMPLATE -->
<!-- WHILE $VALUE = 0 -->
<xsl:variable name="sql.query">
    <sql:param name="SQL_QUERY">SELECT $value FROM date_table WHERE date='$date'</mx:param>
</xsl:variable>

<xsl:variable name="VALUE">
    <xsl:value-of select="sql:exec-formula('generic.sql', exsl:node-set($sql.query)//sql:param)" /> <!-- this will bring the result of the SELECT in the variable -->
</xsl:variable>

<xsl:variable name="date">
    <xsl:value-of select="$date-1" /> <!-- something like that, it doesn't matter -->
</xsl:variable>

<xsl:if test="$VALUE ='0'">
    <!-- call template again -->
</xsl:if>
<!-- end of template --> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T20:41:04.700

```
<!-- recursive named template -->
<xsl:template name="while">

 <xsl:variable name="VALUE">
 <!-- your evaluation -->
 </xsl:variable>

 <!-- evaluate and recurse -->
 <xsl:if test="$VALUE=0">
    <xsl:call-template name="while"/>
 </xsl:if>

</xsl:template> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T21:28:08.453

> 就像使用模板并最终调用自己一样？

正确：尾递归是该问题的常用解决方案，如 empo 所示。更好的 XSLT 处理器将优化尾递归，因此它不会占用堆栈。更糟糕的将在 500 次左右迭代后耗尽堆栈空间，在这种情况下，您需要寻找不同的解决方案。

注意：尽量避免这种构造

```
<xsl:variable name="date">
    <xsl:value-of select="$date - 1" /> 
</xsl:variable> 
```

你什么时候可以做

```
<xsl:variable name="date" select="$date - 1" /> 
```

它不必要地冗长，而且效率也很低，因为变量值是一棵树而不是简单的字符串或数字。

# javascript - 在 .click() 事件到 .get() 页面并在 jquery 中替换 .html()

> ID：11127694
> 
> 赞同：0
> 
> 时间：2012-06-20T20:30:40.923
> 
> 标签：javascript, jquery, html, ajax

我有`div class="contentBlock"`它被视为更新的容器

```
 <div class="contentBlock"></div> 
```

我有一个我写的脚本不起作用：c

```
$(document).ready(function(){
  $('.postLink').on('click', function () {
    $.get("page.php", function (data) {
      $(".contentBlock").html(data);
    });
  });
}); 
```

我有一个锚 html

```
<div class="box"> 
  <a class="postLink" "href="#">
    <h1 title="Light me up"></h1>
    <div class="innerbox">
      <figure><img src="http://cpsr-rspc.hc-sc.gc.ca/PR-RP/servlet/ShowImage?photoId=1789" /></figure>
      <ul class="categorySelect">
        <li class="print"></li>
        <li class="video"></li>
        <li class="web"></li>
      </ul>
    </div>
  </a> 
</div> 
```

这`page.php`只是一个`img`标签和一些 lorem。

我从来没有使用过`.get()`我确定我使用不正确。此外，加载时我会在哪里添加加载 .gif 和淡入淡出的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:32:19.100

```
<a class="postLink" "href="#"> 
```

应该

```
<a class="postLink" href="#"> 
```

你有一个额外的报价。

```
$(document).ready(function(){
  $(".postLink").on('click', function () {
     // load in animation.gif here
     $(".contentBlock").load("page.php", function() {
         // end loading animation now
     });
  });
}); 
```

在 jQuery 中使用负载就是为了这个目的。

这是用于加载的 jQuery 文档：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

# sql - 按会计年度按月排序

> ID：11127696
> 
> 赞同：1
> 
> 时间：2012-06-20T20:30:48.257
> 
> 标签：sql, excel, odbc

我有一个包含这样的数据的 excel 电子表格

```
 Month         Value1   FY11Count     FY12COunt
         ----------------------------------------------
          jul          xxx      23             39
          aug          yy       33             49

          ..etc 
```

我正在使用 ODBC 为仪表板应用程序查询此数据。我想按财政年度（七月，八月......等到六月）订购这些数据。我可以添加另一个伪列，比如 MonthNo 并使用某种逻辑来说当 Month=Jul 然后 1、aug 然后 2..etc 并按该伪列排序？

还有比这更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:37:11.683

不确定这是否不是“伪列”的意思，但 SQL 方式是这样的：

```
order by case Month
           when 'jul' then 1
           when 'aug' then 2
           ...
         end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-06T08:37:41.537

```
ORDER BY CASE 
    WHEN Month(application_receiving_date) = 1 THEN 13 
    WHEN Month(application_receiving_date) = 2 THEN 14 
    WHEN Month(application_receiving_date) = 3 THEN 15                       
ELSE Month(application_receiving_date) END 
```

# git - Git结帐错误

> ID：11127697
> 
> 赞同：0
> 
> 时间：2012-06-20T20:30:50.007
> 
> 标签：git, github, tortoisegit

在尝试签出存储库时，我收到以下错误

```
Cloning into 'C:\Users\xyz\Desktop\test'..
fatal: The remote end hung up unexpectedly

git did not exit cleanly (exit code 128) 
```

关于如何调试此错误的任何想法，在此先感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T20:32:51.403

看着

```
yourdir/.git/config 
```

并确保它正在寻找正确的位置。如果是，请确保您有权限。这可能是一个关键问题。

编辑：没关系，如果您无法克隆，您将不会拥有 .git 目录。但问题仍然是路径或许可。

# ruby-on-rails - 带有一些默认文件的新脚手架生成器

> ID：11127698
> 
> 赞同：1
> 
> 时间：2012-06-20T20:30:50.997
> 
> 标签：ruby-on-rails, ruby

我正在制作一个新的 rails 脚手架生成器来替换默认的，大多数文件保持不变，只有一些不同。那么如何在生成器中调用一些默认的脚手架文件呢？另外，有没有办法可以检查原始脚手架生成器的源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:42:51.963

源代码位于[github 上项目的 railties 部分](https://github.com/rails/rails/tree/0ccdeeb6b589b486f9ffdfb56cbbf901ec955d88/railties/lib/rails/generators/rails)。要访问脚手架模板，我只需[调用实际的脚手架生成器](https://stackoverflow.com/questions/4081478/how-to-invoke-generators-from-code)，然后在需要进行更改时 gsub 文件。

# python - pyramid_mailer 不发送电子邮件？

> ID：11127706
> 
> 赞同：2
> 
> 时间：2012-06-20T20:31:36.257
> 
> 标签：python, email, pyramid

这里是 Pyramid 的新手，并尝试设置 pyramid_mailer 向自己发送电子邮件：

我在 development.ini 中有：

```
mail.host = smtp.gmail.com
mail.username = EMAIL@gmail.com
mail.password = PASSWORD
mail.port = 587
mail.ssl = True
[handlers]
keys = console 
```

在我的项目/__init__.py 中：

```
config.include('pyramid_mailer') 
```

在我的项目/views.py

```
from pyramid_mailer.mailer import Mailer
from pyramid_mailer import get_mailer
from pyramid_mailer.message import Message 
```

> ```
> @view_config(renderer="templates/site_view.pt")
> def site_view(self): 
> ```

...

```
 config.registry['mailer'] = Mailer.from_settings(settings)
    mailer = request.registry['mailer']
    message = Message(subject="It works!",
                      sender="EMAIL@gmail.cm",
                      recipients=["EMAIL@gmail.com"],
                      body="Hey there!")

    mailer.send(message) 
```

我在这里错过了一些非常基本的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:34:15.933

事实上，你错过了一些基本的东西！:-)

`.send()`是一个延迟发送，它将消息添加到事务管理器。如果您不使用`pyramid_tm`，则在请求结束时不会发送邮件。事务性电子邮件很好，因为如果在调用之后在您的代码中引发异常`send()`，则不会发送邮件。

无论如何，让您的代码发送的方法是通过`.send_immediately()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:17:14.530

您可能需要检查并使用：

```
mail.tls = True 
```

[无法使用 pyramid_mailer 和 gmail 发送电子邮件](https://stackoverflow.com/questions/6799146/cant-send-emails-with-pyramid-mailer-and-gmail)

你也可以使用`.send_immediately(message, fail_silently=False)`

你会有这样的事情：

```
mail.host = smtp.gmail.com
mail.username = EMAIL@gmail.com
mail.password = PASSWORD
mail.port = 587
mail.tls = True 
```

在您的设置中：

```
config.include('pyramid_mailer') 
```

进而

```
mailer = get_mailer(request)
message = Message(subject="It works!",
                  sender="EMAIL@gmail.cm",
                  recipients=["EMAIL@gmail.com"],
                  body="Hey there!")

mailer.send_immediately(message, fail_silently=False) 
```

如果仍然没有工作，您可以使用启用调试

mail.debug = 真

它应该在标准输出中转储 smtp 会话。如果某事没有奏效。你会确切地知道为什么。如果一切都好。

# html - 重叠 div 的图层顺序与内容和背景颜色混淆

> ID：11127713
> 
> 赞同：5
> 
> 时间：2012-06-20T20:32:30.447
> 
> 标签：html, css

给定以下 HTML：

```
<div class="foo">howdy howdy howdy how</div>
<div class="bar">Hello</div>​ 
```

和以下CSS：

```
.foo {
    background-color:green;
    overflow:hidden;
    height:.75em;
}

.bar {
    color: white;
    background-color: red;
    margin-top: -10px;
    width: 200px;
} 
```

层顺序是这样的：

![奇怪的层序](../Images/0dfa2f4745b88997395e02f1680348dc.png)

这是相关的jsfiddle：http: [//jsfiddle.net/q3J8D/](http://jsfiddle.net/q3J8D/)

我希望红色背景位于黑色文本之上，并且不明白为什么黑色文本位于红色背景之上。

我可以使用 解决这个问题`position: relative`，但我只是好奇。

**为什么黑色文字在红色背景之上？**

我特别在寻找解释这种行为的官方来源/标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:37:31.370

[即使在](http://www.w3.org/TR/CSS21/visuren.html#z-index) 多次阅读[规范和](http://www.w3.org/TR/CSS21/zindex.html)[BoltClock](https://stackoverflow.com/a/11088328/825789)对[链接问题](https://stackoverflow.com/questions/11088176/before-pseudo-element-stacking-order-issue)的回答之后，我也花了一段时间才理解它。

**但似乎解释很简单：因为它们是同一堆叠上下文**（根上下文）内的两个静态（即非定位）块级元素，它们按以下顺序绘制：

*   背景`#foo`
*   背景`#bar`
*   的文字内容`#foo`
*   的文字内容`#bar`

因此，我们在问题中看到的输出。

绘制顺序由CSS 2.1 规范的[附录 E中描述的算法决定。](http://www.w3.org/TR/CSS21/zindex.html)附录中没有（但在[此处](http://www.w3.org/TR/CSS21/visuren.html#z-index)提到）的内容是该算法递归地*应用于每个堆叠上下文*（不是每个*元素*）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T20:58:45.550

[http://www.w3.org/TR/CSS21/visuren.html#z-index](http://www.w3.org/TR/CSS21/visuren.html#z-index)

> “此示例演示了透明度的概念。背景的默认行为是允许其后面的框可见。在示例中，每个框透明地覆盖其下方的框。可以使用现有背景之一覆盖此行为特性”

# lucene - Lucene - 哪个字段包含搜索词？

> ID：11127716
> 
> 赞同：1
> 
> 时间：2012-06-20T20:32:34.313
> 
> 标签：lucene

我用 Lucene 开发了一个搜索应用程序。我已经创建了基本搜索。基本上，我的应用程序的工作原理如下：

*   我的索引有很多字段。（约 40 人）
*   用户可以向多个字段输入查询，即：**+NAME:John +SURNAME:Doe**
*   查询可以包含通配符，例如？和 * 即：**+NAME:J?hn +SURNAME:Do***
*   查询也可以包含模糊，即：**+NAME:Jahn~0.5**

现在，我想查找哪个字段包含我的搜索词。由于我使用通配符和模糊，我不能只进行字符串比较。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:08:50.007

如果出于调试目的需要它，可以使用[IndexSearcher.explain](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/IndexSearcher.html#explain%28org.apache.lucene.search.Query,%20int%29)。

否则，这个问题看起来像突出显示，所以你应该能够找出匹配的字段：

*   重新分析您的文档，
*   或使用其术语向量。

# ios - 着色图像忽略 Alpha 通道 - 为什么以及如何修复？

> ID：11127720
> 
> 赞同：4
> 
> 时间：2012-06-20T20:32:50.660
> 
> 标签：ios, opacity, quartz-2d, alphablending, colorize

这就是我想要做**的：左边**是一个通用的、未着色的 RGBA 图像，我在屏幕外创建并缓存了速度（最初创建速度很慢，但以后用任何颜色着色都非常快，如需要）。这是一个带有圆形漩涡的方形图像。在圆圈内，图像的 alpha/opacity 为 1。在圆圈外，它的 alpha/opacity 为 0。我在 UIView 中显示了它，背景颜色为`[UIColor scrollViewTexturedBackgroundColor]`. **右边**是当我尝试通过在设置后在其顶部填充一个纯红色矩形来为图像着色时发生的情况`CGContextSetBlendMode(context, kCGBlendModeColor)`。

![未着色](../Images/b69b0f28b9f8aa67f3e8bc30ee7f01e5.png) ![着色不正确](../Images/22ad91867f802fff42e3466b0e1d30f6.png)

这不是我想要的，也不是我所期望的。显然，出于某种奇怪的原因，对完全透明的像素（例如，alpha 值为 0）进行着色会导致完全填充颜色，而不是像我预期的那样保持透明。

我想要的实际上是这样的：

![正确着色](../Images/946e2e96b3aab3feb9c1ddf027fa10f1.png)

现在，*在这种特殊情况下*，我可以将剪切区域设置为一个圆圈，这样圆圈之外的区域就不会受到影响——这就是我在这里所做的一种解决方法。

但在我的应用程序中，我还需要能够为我不知道剪切/轮廓路径的任意形状着色。一个示例是通过叠加渐变来为白色文本着色。这是怎么做到的？我怀疑必须有某种方法可以有效地做到这一点——通常，没有奇怪的路径/剪辑技巧——使用图像蒙版……但我还没有找到关于这方面的教程。显然这是可能的，因为我在其他游戏中看到过彩色渐变文本。

顺便说一句，我不能从渐变开始，然后剪裁/清除我不需要的部分——因为（如上例所示）我的未着色源图像通常是灰度而不是纯白色。所以我真的需要从未着色的图像开始，然后对其进行着色。

ps —`kCGBlendModeMultiply`在为部分透明的图像着色时也有相同的缺陷/缺点/特质。有谁知道*为什么*苹果决定这样做？就好像 Quartz 着色代码将 RGBA(0,0,0,0) 视为 RGBA(0,0,0,1)，即它完全忽略并破坏了 alpha 通道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:52:06.647

您可以采用的一种可行的方法是从原始图像构造一个蒙版，然后在使用多重混合模式集渲染图像之前调用 CGContextClipToMask() 方法。这是在将图像绘制为彩色之前设置遮罩的 CoreGraphics 代码。

```
 CGContextRef context = [frameBuffer createBitmapContext];
  CGRect bounds = CGRectMake( 0.0f, 0.0f, width, height );
  CGContextClipToMask(context, bounds, maskImage.CGImage);
  CGContextDrawImage(context, bounds, greyImage.CGImage); 
```

稍微棘手的部分是获取原始图像并生成一个 maskImage。为此，您可以编写一个循环来检查每个像素并写入一个黑色或白色像素作为掩码值。如果图像中要着色的原始像素是完全透明的，则写入黑色像素，否则写入白色像素。请注意，掩码值将是 24BPP 图像。这里有一些代码可以给你正确的想法。

```
 uint32_t *inPixels = (uint32_t*) MEMORY_ADDR_OF_ORIGINAL_IMAGE;
  uint32_t *maskPixels = malloc(numPixels * sizeof(uint32_t));
  uint32_t *maskPixelsPtr = maskPixels;

  for (int rowi = 0; rowi < height; rowi++) {
    for (int coli = 0; coli < width; coli++) {
      uint32_t inPixel = *inPixels++;
      uint32_t inAlpha = (inPixel >> 24) & 0xFF;
      uint32_t cval = 0;
      if (inAlpha != 0) {
        cval = 0xFF;
      }
      uint32_t outPixel = (0xFF << 24) | (cval << 16) | (cval << 8) | cval;
      *maskPixelsPtr++ = outPixel;
    }
  } 
```

您当然需要填写所有细节并创建图形上下文等。但总体思路是简单地创建自己的蒙版，以过滤掉圆圈外部红色部分的绘制。

# json - Go中基于字符串动态创建某种类型的变量

> ID：11127723
> 
> 赞同：3
> 
> 时间：2012-06-20T20:32:57.597
> 
> 标签：json, dynamic, types, interface, go

**简单版**
如何根据字符串的值创建某种类型的变量？

```
type ta struct { a int }
type tb struct { b float }
type tc struct { c string }

t := "tb"
v := MagicVarFunc(t) // Returns a new allocated var of type interface{}
v.(tb).b = 8.3 
```

**真正的例子**
在下面的工作示例中，令人惊讶的是，我正在基于*字符串*动态创建变量。这是通过在*映射*中注册每个结构类型来完成的，其中*字符串是键，**类型*的空指针是值。
每种*类型*都使用 New() 方法实现一个*接口*，该方法返回该特定类型的新变量。

下面的示例非常接近我想要做的，其中每个操作都有一组 JSON 编码数据，这些数据将填充相应的结构。我构建它的方式也是因为我希望能够创建我注册到地图的新的独立操作。

我不确定现在是否在滥用语言。
如果我完全失去理智，有人可以给我任何指示吗？有明显更简单的方法吗？

```
package main

import (
    "fmt"
    "encoding/json"
)

// All I require of an action is that it may be executed
type ActionHandler interface {
    Exec()
    New() ActionHandler
}

// My list of actions
var mActions = make(map[string]ActionHandler)

// Action Exit (leaving the program)
type aExit struct {}
func (s *aExit) Exec() { fmt.Println("Good bye") }
func (s *aExit) New() ActionHandler { return new(aExit) }
func init() {
    var a *aExit
    mActions[`exit`] = a
}

// Action Say (say a message to someone)
type aSay struct {
    To  string
    Msg string
}
func (s *aSay) Exec() { fmt.Println(`You say, "` + s.Msg + `" to ` + s.To) }
func (s *aSay) New() ActionHandler { return new(aSay) }
func init() {
    var a *aSay
    mActions[`say`] = a
}

func inHandler(action string, data []byte) {
    a := mActions[action].New()
    json.Unmarshal(data, &a)
    a.Exec()
}

func main(){
    inHandler(`say`, []byte(`{"to":"Sonia","msg":"Please help me!"}`))
    inHandler(`exit`, []byte(`{}`))
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T01:56:48.013

如果可以在运行时获取值，则可以使用反射来获取零值，或使用反射分配`new`类型的新值（如 ）`Type`。但是，我认为没有办法`Type`从字符串中获取。您需要具有该类型的值才能获取类型本身。

我采纳了你的想法，使用地图。我将字符串映射到类型本身，您可以使用`reflect.TypeOf`它从接口值中获取类型。然后我用来`reflect.Zero`获取该类型的零值（每个类型都存在的方便值）。然后我将值作为接口输出。

```
package main
import "reflect"

type ta struct { a int }
type tb struct { b float64 }
type tc struct { c string }

var mActions map[string]reflect.Type = make(map[string]reflect.Type)
func init() {
  var a ta
  mActions[`ta`] = reflect.TypeOf(a)
  var b tb
  mActions[`tb`] = reflect.TypeOf(b)
  var c ta
  mActions[`tc`] = reflect.TypeOf(c)
}

func MagicVarFunc(action string) interface{} {
  return reflect.Zero(mActions[action]).Interface()
}

func main() {
  t := "tb"
  v := MagicVarFunc(t) // Returns a new allocated var of type interface{}
  x := v.(tb)
  x.b = 8.3
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:22:29.350

首先定义一个做你想做的事情的函数类型：

```
type Producer func([]byte) interface{} 
```

做几个：

```
func FooProducer(raw []byte) interface{} {
    foo := new(Foo)
    ... // do something to foo
    return foo
}

func BarProducter(raw []byte) interface{} {
    bar := new(Bar)
    ... // do something to bar
    return bar
} 
```

把它们贴在地图上：

```
likeThis := map[string]Producer{
    "foo": FooProducer,
    "bar": BarProducer,
} 
```

然后只需执行以下操作之一：

```
myVal := likeThis[someString](raw) 
```

但您可能想定义一些接口并使您的生产者更像：

```
type Producer func([]byte) MyAwesomeInterface 
```

因为您可能想要对正在解码的那些事情做一些常见的事情。您可能还想处理错误字符串输入的情况，例如：

```
f, ok := likeThis[someString]
if !ok {
    // return, break, panic... something, just get the hell away from here.
}
myVal := f(raw) 
```

检查类型的整个概念在 Go 中有点麻烦。与尝试使用类型系统进行反射体操相比，添加新类型通常更少工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T22:40:22.067

jorelli 的回答非常好。我只是要展示几个选项。您的“真实示例”看起来基本上像命令调度，命令参数用 JSON 指定。从执行此操作的简单代码开始，

```
package main

import (
    "encoding/json"
    "fmt"
)

func inHandler(action string, data []byte) {
    arg := make(map[string]interface{})
    json.Unmarshal(data, &arg)
    switch action {
    case "say":
        fmt.Printf("You say, %q to %s\n", arg["msg"], arg["to"])
    case "exit":
        fmt.Println("Good bye")
    }
}

func main() {
    inHandler(`say`, []byte(`{"to":"Sonia","msg":"Please help me!"}`))
    inHandler(`exit`, []byte(`{}`))
} 
```

通过在 switch 语句中添加 case 来注册新命令。是的，没想到你会喜欢。因此，添加您的地图和 init() 想法，

```
package main

import (
    "encoding/json"
    "fmt"
)

type jmap map[string]interface{}

var mActions = map[string]func(jmap){}

func init() {
    mActions["say"] = func(arg jmap) {
        fmt.Printf("You say, %q to %s\n", arg["msg"], arg["to"])
    }
}

func init() {
    mActions["exit"] = func(jmap) { fmt.Println("Good bye") }
}

func inHandler(action string, data []byte) {
    args := make(jmap)
    json.Unmarshal(data, &args)
    mActions[action](args)
}

func main() {
    inHandler(`say`, []byte(`{"to":"Sonia","msg":"Please help me!"}`))
    inHandler(`exit`, []byte(`{}`))
} 
```

现在，如果您愿意，您可以将这些 init 函数中的每一个放在一个单独的源文件中，并且可以通过使用新的 init 函数创建一个新的源文件来注册新命令。

程序的其余部分通过一些假设进行了简化，即命令具有平面参数列表，JSON 将始终编码为对象。这允许您为每个命令省去单独的 Go 结构定义。inHandler 只是为所有命令创建相同类型的对象（映射），将其解组，然后将其传递给命令。如果您想处理更多任意 JSON，您可以解组为一个空接口，并且这些函数必须做一些额外的工作来挖掘参数。如果这工作量太大，并且您真的想直接解组到结构中，那么您将接近 jorelli 的解决方案，即让每个命令函数解组其自己的 JSON。

# javascript - javascript 我无法捕捉到语法错误

> ID：11127725
> 
> 赞同：0
> 
> 时间：2012-06-20T20:33:14.423
> 
> 标签：javascript, try-catch, syntax-error

我正在开发一个需要使用 youtube api 的项目。html 和 javascript 在不同的浏览器中运行良好。然而，当我只是 WPF 的 webbrowser 运行它时，我收到以下错误：

```
Script Error
line:1
char:1
Error: Syntax Error
Code:0
URL about://:/

Do you want to continue running scripts on this page?
yes no 
```

当我单击是时，消息框消失了，程序运行正常。我注释掉了html文件上的大部分内容，发现是下面这句话导致了这个问题：

```
google.load("swfobject", "2.1"); 
```

所以现在，我只想抓住这个错误，只是不想弹出消息框。我试过

```
try{
      google.load("swfobject", "2.1");
}catch(err)
 {alert("caught");} 
```

然而，我仍然得到最初的错误框。无论如何要删除错误框吗？非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T20:35:05.023

您实际上不能使用`try/catch`块来捕获语法错误。语法错误意味着解析器无法正确解析 JavaScript。语法错误发生*在*代码运行之前。

# java - 改变价值 我在我的 jsp 上使用以下表达式 <c:set var="flag" value="false">我在每个循环中都有一个条件，我可能想将此变量更改为 true。有没有办法做到这一点。我到处寻找，但找不到解决方案。</c:set>

> ID：11127728
> 
> 赞同：4
> 
> 时间：2012-06-20T20:33:31.370
> 
> 标签：java, jsp, jstl

我在我的 jsp 上使用以下表达式

```
<c:set var="flag" value="false" /> 
```

我在每个循环中都有一个条件，我可能想将此变量更改为 true。有没有办法做到这一点。我到处寻找，但找不到解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T02:10:06.620

这是您正在寻找的示例代码：

```
<c:choose>
   <c:when test="${yourcondition}">
      <c:set var="flag" value="true" />
   </c:when>
   <c:otherwise>
      <c:set var="flag" value="false" />  
   </c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T20:37:22.883

为什么不在循环中重用相同的代码

```
<c:set var="flag" value="true" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-28T23:33:36.853

你也可以这样做

```
<c:set var="flag" value="${(yourcondition)? true : false}"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T21:56:36.147

简单地，

句法：

```
<c:set var="flag" value="${(condition)}" /> 
```

前任：

```
<c:set var="flag" value="${(myVariable == "stackoverflow")}" />

<c:out value="${flag}" />     // true or false 
```

# javascript - 使用 AJAX 提交时使浏览器缓存表单数据

> ID：11127731
> 
> 赞同：2
> 
> 时间：2012-06-20T20:33:36.503
> 
> 标签：javascript, ajax, forms

我有一个包含许多表单的 Web 应用程序。一切都使用 AJAX 提交，而不是进行实际的表单提交。我遇到的问题是，我希望浏览器仍然缓存用户在表单中输入的值，以便在以后填写相同的表单时自动完成。我确信有些东西可以用 localstorage 破解，但如果可能的话，我更愿意使用浏览器对表单数据的本机缓存。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:36:47.990

如果我没记错的话，这完全取决于用户浏览器的设置，无法更改。唯一的方法是使用 localStorage（或旧浏览器的服务器端存储）。

# .net-4.0 - 使用 Visual Studio 2012 开发 .NET 4.0 (Windows XP)

> ID：11127734
> 
> 赞同：5
> 
> 时间：2012-06-20T20:33:57.393
> 
> 标签：.net-4.0, windows-xp, expression-blend, .net-4.5

.NET 4.5 是就地升级，因此取代了 .NET 4.0。因此，当我使用 Visual Studio 2012 安装 .NET 4.5 时，我无法再为 .NET 4.0 开发应用程序。

由于 Windows XP 不支持 .NET 4.5，**我如何维护现有的 .NET 4.0 应用程序**，这些应用程序在安装 Visual Studio 2012 后仍需在 Windows XP 下运行**？**

直到现在，只要安装了 VS2003，我总是可以为每个版本开发 .NET 应用程序，甚至是 .NET 1.1。我对微软在 XP 上不支持 .NET 4.5 没有意见，我认为砍掉旧的东西是可以的。但由于我们仍有客户使用 Windows XP，我们需要能够在创建 .NET 4.5 的同时创建 .NET 4.0 程序。

编辑：

我刚刚遇到了第一个不兼容问题：我在 Windows Server 2012 上安装了 VS 2012。我创建了一个面向 .NET 4.0 的项目。在 blend 4.0 中，我创建了复选框控件模板的副本。生成的模板包含仅在 .NET 4.5 下可用的颜色参考。该解决方案无法再编译。然而，同样的情况在我的 Windows 7 安装上运行良好。

我假设 .NET 4.5 的安装已经替换了我的标准控件的控件模板。因此，我无法再创建副本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:07:11.387

[具有讽刺意味的是， Mono](http://www.mono-project.com)似乎支持[大部分 .NET 4.5 功能](http://mono-project.com/Compatibility)，并且可以安装在[Windows XP](http://www.go-mono.com/mono-downloads/download.html)上。

如果您需要 C# 5.0`async`并且您的客户拒绝升级它的操作系统，这可能是一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:12:35.627

与此同时，我发现了一个很棒的 Scot Hanselman 博客，它回答了我的担忧：[http ://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

.NET 4.5 是就地升级并替换 .NET 4.0 CLR，但仍可以使用 Visual Studio 2012 创建 .NET 4.0 应用程序。

编辑：我现在安装了 VS2012 的最终版本。我现有的 .NET 4.0 项目编译并运行，到目前为止没有问题。唯一的缺点是，它不再支持 Windows Installer 项目。您可以在 VS2010 和 VS2012 之间前后切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-24T19:59:12.373

我在针对安装了 4.5 的计算机开发 4.0 的 .NET 程序时遇到了一些严重问题。例如，一个问题是，如果您正在进行 WPF 开发并且在属性上有一个私有设置器 - 如果您使用 Mode=TwoWay 绑定到该属性，那么如果您针对 .NET 进行开发，则不会出现异常4.5！如果您在仅安装了 .NET 4.0 的环境中（即使您正在开发以 Visual Studio 中的 4.0 为目标），您应该会遇到异常。现在显然您不应该拥有 Mode=TwoWay 和私有设置器，但也许您最初打算将属性设置为仅 OneWay。关键是，这只是 4.5 简单地扫过的众多问题示例之一，并导致我重新使用 Visual Studio 2010 和 .NET 4 在 Windows 7 中进行开发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:48:24.613

大编辑：我们应该等到微软宣布最终决定，目前还不清楚，只有结论。

但是，我认为微软不会那么容易放弃对 XP 和 Vista 的支持，似乎减少支持的问题只是为了向开发人员展示它的速度目的。

此外，如果它成为现实并且微软停止了对 XP 和 Vista 的支持，那么您可以将虚拟机作为一个绝佳的选择！

最良好的祝愿

# sql-server-2008 - 用新表替换 sql server 表

> ID：11127739
> 
> 赞同：0
> 
> 时间：2012-06-20T20:34:19.303
> 
> 标签：sql-server-2008, tsql, stored-procedures

我想用应用程序中的新数据表替换我的 sql server 数据库中的表“Met”。我的基本想法是循环新表中的每一行并比较现有表。

我使用了一个存储过程，但它只有“插入”和“更新”功能。我需要先删除旧表吗？

谢谢

对于每一行，我想循环以下存储过程。

```
;WITH CTE AS (SELECT skey=@skey,ProbMetID=@ProbMetID,Interval=@Interval,Counts=@Counts)
MERGE Met AS TARGET
USING CTE SOURCE
ON SOURCE.skey = TARGET.skey
WHEN MATCHED THEN
UPDATE
SET ProbMetID = SOURCE.ProbMetID,
    Interval = SOURCE.Interval,
    Counts = SOURCE.Counts,
    WHERE skey = @skey
WHEN NOT MATCHED THEN    
INSERT INTO Met(skey,ProbMetID,Interval,Counts)
VALUES(@skey,@ProbMetID,@Interval,@Counts); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:52:31.653

MERGE 语句确实包含一个 DELETE 函数。查看 Pinal Dave 的帖子：http: [//blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)

我发现从应用层执行此操作的最简单方法是将所有内容插入临时表，然后在临时表和实际表之间执行整个 MERGE 操作。最重要的是，您可以在一次事务中完成整个事情。另外，您可以将应用程序表批量插入到临时表中，以获得超棒的数据库速度 (TM)。

# mysql - Moodle 1.9 REPLACE 会破坏 utf8_unicode_ci 字符串

> ID：11127740
> 
> 赞同：0
> 
> 时间：2012-06-20T20:34:26.503
> 
> 标签：mysql, corruption, moodle

我正在测试从 1.9 版到 2.2 版的 Moodle 站点升级。在一个测试盒上，我创建了我的 Moodle 1.9 站点的副本。为了让站点在测试框架上运行，我必须做的一件事是将硬编码的 URL 更新为在测试机器上有效的东西。为此，我使用 Moodle 1.9 中的管理/替换功能，即

```
http://mytestsite/admin/replace.php 
```

在生成的表单中，我指定了要切换的 URL。根据文档，此处的脚本将继续遍历 Moodle 安装中的所有表并运行如下所示的脚本：

```
UPDATE adodb_logsql 
SET    PARAMS = REPLACE(PARAMS, 'some_url', 'another_url') 
```

更新过程似乎工作正常。但是，它有以下**意想不到的副作用**：

保存在数据库中的站点中的某些内容看起来在 REPLACE 过程中已损坏：

```
Before: Welcome to Company’s Learning
After : Welcome to Companyâ€™s Learning 
```

根据 MySQL，REPLACE 语句是[多字节安全的](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)。

我的问题：

1.  我究竟做错了什么？一个简单的`REPLACE`不应该有这些奇怪的副作用。
2.  有没有简单的方法可以消除损坏？

测试服务器：* IIS 7 * PHP 5.3.13 * MySQL 服务器 5.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:45:48.980

尽管 Moodle 可以直接从 1.9 升级到 2.2，但如果有大量数据，它也不是 100% 安全的。

在最近的所有升级中，我都遵循这条路径：1.8 到 1.9、1.9 到 2.0、2.0 到 2.1 和 2.1 到 2.2。这个过程很乏味，但它避免了数据损坏的任何风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:12:48.197

这里真正的问题是数据导出工具没有向 utf-8 导出添加 BOM 标头。在导入期间，导入器解析几千行以检查编码，但它从未命中导致问题的行，因此假定编码不正确。

# python - 在 python 中，有没有办法让 re.finditer 将文件作为输入而不是字符串？

> ID：11127743
> 
> 赞同：4
> 
> 时间：2012-06-20T20:34:36.977
> 
> 标签：python, regex, file-io

假设我有一个非常大的文件`foo.txt`，我想在找到正则表达式时对其进行迭代。目前我这样做：

```
f = open('foo.txt')
s = f.read()
f.close()
for m in re.finditer(regex, s):
    doSomething() 
```

有没有办法做到这一点而不必将整个文件存储在内存中？

注意：逐行读取文件不是一个选项，因为正则表达式可能跨越多行。

更新：如果可能的话，我也希望它可以使用`stdin`。

更新：我正在考虑以某种方式使用自定义文件包装器模拟字符串对象，但我不确定正则表达式函数是否会接受自定义的类似字符串的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:51:54.017

如果您可以将正则表达式可以跨越的行数限制为某个合理的数量，那么您可以使用 a`collections.deque`在文件上创建一个滚动窗口并仅在内存中保留该数量的行。

```
from collections import deque

def textwindow(filename, numlines):
    with open(filename) as f:
        window   = deque((f.readline() for i in xrange(numlines)), maxlen=numlines)
        nextline = True
        while nextline:
            text = "".join(window)
            yield text
            nextline = f.readline()
            window.append(nextline)

 for text in textwindow("bigfile.txt", 10):
     # test to see whether your regex matches and do something 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T20:40:30.647

您必须逐块读取文件，重叠以允许表达式的最大可能长度，或者使用 mmapped 文件，该文件几乎/与使用流一样好：[https://docs。 python.org/library/mmap.html](https://docs.python.org/library/mmap.html)

更新到您的更新：考虑 stdin 不是文件，它的行为很像一个文件，因为它有一个文件描述符等等。这是一个posix流。如果您不清楚差异，请进行一些谷歌搜索。操作系统无法映射它，因此 python 不能。

还要考虑到您正在做的事情可能不适合使用正则表达式。正则表达式非常适合捕获小东西，例如解析连接字符串、日志条目、csv 数据等。它们不是解析大量数据的好工具。这是设计使然。您最好编写一个自定义解析器。

过去的一些智慧之言： [http ://regex.info/blog/2006-09-15/247](http://regex.info/blog/2006-09-15/247)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:37:51.043

也许你可以编写一个函数，在文件的时间产生一行（读取一行），然后调用 re.finditer 直到它产生一个 EOF 信号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-07T22:42:57.370

这是另一种解决方案，使用内部文本缓冲区逐步产生找到的匹配项，而无需将整个文件加载到内存中。

这个缓冲区就像文件文本中的“滑动窗口”一样，向前移动，同时产生找到的匹配项。

由于文件内容是按块加载的，这意味着该解决方案也适用于多行正则表达式。

```
def find_chunked(fileobj, regex, *, chunk_size=4096):
    buffer = ""

    while 1:
        text = fileobj.read(chunk_size)
        buffer += text
        matches = list(regex.finditer(buffer))

        # End of file, search through remaining final buffer and exit
        if not text:
            yield from matches
            break

        # Yield found matches except the last one which is maybe 
        # incomplete because of the chunk cut (think about '.*')
        if len(matches) > 1:
            end = matches[-2].end()
            buffer = buffer[end:]
            yield from matches[:-1] 
```

但是，请注意，如果根本找不到匹配项，它可能最终将整个文件加载到内存中，因此如果您确信您的文件多次包含正则表达式模式，则最好使用此功能。

# javascript - if 语句中多个 OR 表达式的简写

> ID：11127753
> 
> 赞同：9
> 
> 时间：2012-06-20T20:35:08.453
> 
> 标签：javascript, jquery

以下是否有简写 -

```
if(tld == "com" || tld == "net" || tld == "co" || tld == "org" || tld == "info" || tld == "biz")
{
    //do something;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T20:38:33.053

你可以使用一个数组

```
if(["","com","net","co","org","info","biz"].indexOf(tld) > -1) {
     // do something
} 
```

或者如果您使用的是 jquery：

```
$.inArray(tld, ["com","net","co","org","info","biz"]) 
```

REF - [OR 运算 ( || ) 与 inArray() 的性能](https://stackoverflow.com/questions/10479056/performance-of-or-operation-vs-inarray/10479102#10479102)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T20:37:11.307

使用正则表达式：

```
if ( /^(com|net|co|org|info|biz)$/i.test(tld) ) {
    // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:38:13.617

您是否考虑过使用 switch 语句？像这样的东西：

```
switch(tld)
{
   case 'com':
   case 'net':
   case 'co':
   ...
   ...
   // do something for all of them
   break;
   default:
   // if you want you can have default process here
   break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-22T13:33:37.313

[位索引速记](https://www.sitepoint.com/shorthand-javascript-techniques/#23bitwiseindexofshorthand)

```
if (~["com", "net", "co", "org", "info", "biz"].indexOf(method)){/*Do somthing if true*/}
if (!~["com", "net", "co", "org", "info", "biz"].indexOf(method)){/*Do somthing if false*/} 
```

# c++ - 将 DLL 链接到 DLL

> ID：11127755
> 
> 赞同：1
> 
> 时间：2012-06-20T20:35:15.177
> 
> 标签：c++, dll, header-files

我正在向具有多个 DLL 的 Visual Studio 2010 解决方案添加代码。一些 DLL 依赖于其他 DLL。

我想知道如何指定一个（现有）DLL 的 lib 文件应该输入到另一个（新）DLL。

首先，如何指定应该在现有的DLL项目中创建一个lib文件？

二、如何表示新建的DLL项目应该依赖现有的lib文件？

代码编译得很好。我得到了未解决的外部问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:54:14.937

1.  在项目属性中：您必须在每个项目的属性中添加库引用——包括生成 DLL 的项目。

    假设项目 DLL_B 使用 DLL_A。在解决方案资源管理器中选择 DLL_B，按 Alt-Enter，转到 Configuration Properties -> Linker -> Input，将 DLL_A.lib 添加到 Additional Dependencies。还将 ..\Release 添加到 General -> Additional Library Dependencies（类似地，在调试模式下添加 ..\Debug）。确保为 Debug 和 Release 版本修改它。

2.  在解决方案中：您需要使用户依赖于他们使用的库。

    在解决方案资源管理器中选择您的解决方案，按 Alt-Enter，转到通用属性 -> 项目依赖项。对于 DLL_B 项目，检查“取决于”窗格中的 DLL_A。

这是基于VS2008的，但我相信在VS2010中应该是类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:11:46.583

事实证明，我忽略了源 DLL 项目（在项目创建向导中指定）上的“导出符号”设置。这将创建一个头文件，其 declspec 定义如下：

```
#ifdef TESTFILTERS_EXPORTS
#define TESTFILTERS_API __declspec(dllexport)
#else
#define TESTFILTERS_API __declspec(dllimport)
#endif 
```

这是一个名为“TestFilters”的 DLL 项目。

对于要导出的类定义，必须在类的头文件中使用 TESTFILTERS_API 定义，如下所示：

```
class TESTFILTERS_API CTestFilters {...}; 
```

至少一个类定义中存在 declspec(dllexport) 会导致 lib 文件（即 TestFilters.lib）被自动创建。

# c# - 处理对象图 - Web API

> ID：11127756
> 
> 赞同：0
> 
> 时间：2012-06-20T20:35:15.783
> 
> 标签：c#, .net, json, asp.net-web-api

我最近在玩弄一个涉及返回对象图以便可以将它们读取为 JSON 的 Web API 项目时遇到了一个（希望如此）小问题。

**任务对象示例** *（通过 EF 生成）* **：**

```
//A Task Object (Parent) can consist of many Activities (Child Objects)
public partial class Task
{
    public Task()
    {
        this.Activities = new HashSet<Activity>();
    }

    public int TaskId { get; set; }
    public string TaskSummary { get; set; }
    public string TaskDetail { get; set; }

    public virtual ICollection<Activity> Activities { get; set; }
} 
```

在我的 ApiController 中，通过以下方式向我请求一个特定的任务（按 Id）及其所有相关的活动：

**单任务请求示例**

```
//Simple example of pulling an object along with the associated activities.
return repository.Single(t => t.Id == id).Include("Activities"); 
```

一切似乎都工作正常 - 但是当我尝试导航到 URL 以访问它时，例如`/api/tasks/1`，该方法按应有的方式执行，但没有返回任何对象（只是一个简单的找不到该页面）。

如果我请求一个不包含活动的任务 - 一切都按预期工作，它会返回正确的 JSON 对象`Activities : []`。

我确信有很多方法可以解决这个问题 - 我只是想我会了解人们认为处理这个问题的最佳方法。

**考虑的方法（到目前为止）：**

*   使用替代的 JSON 解析器（例如 Newtonsoft.JSON）修复了该问题，但在整个返回数据中附加了 $id 和 $refs，我相信这可能会使 Knockout 的解析变得困难。

*   使用投影并利用匿名类型返回数据。（目前未测试）

*   完全删除包含并通过另一个请求简单地访问子数据。

任何和所有的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:17:55.713

我最近遇到了与 EF 类型和 Web API 类似的问题。根据生成的 EF 模型的设置方式，导航属性可能会导致循环依赖。因此，如果您生成的 Activity 类有一个 Task 引用，则序列化程序将尝试遍历对象图并陷入一个有点讨厌的循环。

一种解决方案是创建一个简单的视图模型来让序列化器工作

```
public class TaskViewModel {
  public TaskViewModel ()
  {
     this.Activities = new List<ActivityViewModel>();
   }

  public int TaskId { get; set; }
  public string TaskSummary { get; set; }
  public string TaskDetail { get; set; }

  public virtual IList<ActivityViewModel> Activities { get; set; }
}

public class ActivityViewModel{
  public ActivityViewModel()
  {        
  }

  //Activity stuff goes here
  //No reference to Tasks here!!
} 
```

根据您正在做的事情，您甚至可以创建一个比这更扁平的模型，但删除 Task 引用将有助于序列化。这可能就是当活动为空时它起作用的原因

# javascript - 多个 javascript 块乱序执行

> ID：11127758
> 
> 赞同：1
> 
> 时间：2012-06-20T20:35:20.440
> 
> 标签：javascript, asp.net, html

我正在创建一个使用 google map api 的 asp.net 页面。该页面在包含谷歌地图初始化内容的 head 标记中加载 GoogleMap.js。在后面的代码中，我使用 Page.ClientScript.RegisterClientScriptBlock() 注入了更多的 javascript 代码（我也尝试过 RegisterStartupScript()）。此函数将额外注入的代码放置在 body 标记内的脚本块中（在 GoogleMap.js 脚本下方）。我正在使用 Chrome 开发人员窗口来调试我的 javascript，现在当我输入一些断点来检查执行顺序时，正文中的脚本块在头部脚本之前执行。所以它不像我认为的那样从 HTML 页面的顶部到底部按顺序进行。这是怎么回事？？？我该如何解决？为了组织起见，我

问题是body标签首先执行，并且由于没有为“map”变量分配谷歌地图任何对象，因此不会添加标记。

这是asp.net生成并返回到客户端浏览器的一些代码...

```
</title><link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="../css/master.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>

    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">
        var map;

        function initialize() {
            var chicago = new google.maps.LatLng(41.879535, -87.624333);

            var mapOptions = {
                zoom: 4,
                center: chicago,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            var marker = new google.maps.Marker({
                position: chicago,
                map: map,
                title: "Hello World!"
            });

            $('#Debug').html(CountryDropDownList.children("option").filter(":selected").text().trim());
        }

        $(document).ready(function() {
            initialize();
        });
    </script>

    <script src="SearchTabs.js" type="text/javascript"></script>

    <!--[if gte IE 9]>
    <style type="text/css">
    .gradient {
       filter: none;
    }
    </style>
    <![endif]-->
<style type="text/css">
    .ctl00_MainMenu_0 { background-color:white;visibility:hidden;display:none;position:absolute;left:0px;top:0px; }
    .ctl00_MainMenu_1 { text-decoration:none; }
    .ctl00_MainMenu_2 {  }
    .ctl00_MainMenu_3 { font-size:12pt; }
    .ctl00_MainMenu_4 { padding:0px 10px 0px 10px; }

</style></head>
<body>
    <form name="aspnetForm" method="post" action="HertzMap.aspx" id="aspnetForm">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="VIEWSTATE_CRAP" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script type="text/javascript">
var marker1 = new google.maps.Marker({
    position: new google.maps.LatLng(41.79068,-77.26577),
    map: map,
    title: "WHEEL LOADER/3YD/GEN BKT/DSL            "
});
var marker2 = new google.maps.Marker({
    position: new google.maps.LatLng(41.72962,-76.12181),
    map: map,
    title: "CRAWLER LOADER/3/4 YD/GENERAL/DSL       "
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:46:31.960

看着：

```
$(document).ready(function() {
    initialize();
}); 
```

意味着jQuery将延迟执行，`initialize`直到文档完全加载。

但是，如果您将代码放在`script`元素内，它将立即执行。这正是您现在对标记所做的事情：它们在实际`map`对象可用之前被初始化，这会导致不良结果。

尝试在 的末尾`initialize`或在它内部调用它之后调用脚本初始化`$(document).ready`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:46:10.723

该函数`initialize()`是在头部声明的，但是您在准备好事件时调用它，那是在页面加载之后（所有内容都已解析并按顺序执行脚本）。所以body中调用的代码会先运行。

如果你想`initialize()`直接在 head 中执行，直接放在 head 中即可。

在您的情况下，这可能会导致问题，因为您正在访问正文中定义的元素。所以你应该使用 onReady 作为一切的起点。您首先执行初始化，然后还初始化/执行正文的脚本。

# javascript - Javascript：在指定行插入文本

> ID：11127763
> 
> 赞同：0
> 
> 时间：2012-06-20T20:35:29.780
> 
> 标签：javascript, mirth

我对javascript有点陌生，但我想看看是否可以在指定位置向文件中添加一行文本？即每个文件都需要在第 1 行插入相同的文本。3

有人建议“按换行符拆分，添加数据，然后重新加入”，但我不知道该怎么做。只是寻找开始的地方或指向正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:38:46.867

按换行符拆分：

```
data = data.split(/\r?\n/); 
```

添加数据：

```
data = data.splice(2, 0, new_data); 
```

重新加入：

```
data = data.join("\r\n"); 
```

# macos - 如何在基于视图的 NSOutlineView 中自定义披露单元格

> ID：11127764
> 
> 赞同：16
> 
> 时间：2012-06-20T20:35:30.177
> 
> 标签：macos, cocoa, osx-lion, nsoutlineview, disclosure

我正在尝试在基于视图的 NSOutlineView 中自定义披露箭头的外观。我看到建议使用

```
- (void)outlineView:(NSOutlineView *)outlineView willDisplayOutlineCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item 
```

委托方法来实现它。问题是由于某种原因没有调用此方法。我有 2 个自定义单元格视图 - 一个用于项目，第二个用于标题项目。可能是基于视图的大纲视图不调用此方法吗？可能是狮子坏了？

请阐明一些观点。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-12-08T14:17:47.987

### 解决方案1：

子类 NSOutlineView 并覆盖`makeViewWithIdentifier:owner:`

```
- (id)makeViewWithIdentifier:(NSString *)identifier owner:(id)owner {
    id view = [super makeViewWithIdentifier:identifier owner:owner];

    if ([identifier isEqualToString:NSOutlineViewDisclosureButtonKey]) {
        // Do your customization
    }

    return view;
} 
```

对于源列表，请使用`NSOutlineViewShowHideButtonKey`.

### 解决方案2：

**界面生成器**

按钮被添加到列中并且标识符设置为`NSOutlineViewDisclosureButtonKey`。

[![在此处输入图像描述](../Images/febada0fa7e6dfcbbb1f5dd641e3eede.png)](https://i.stack.imgur.com/c8SCt.png)

### 官方文档来自`NSOutlineView.h`

```
/* The following NSOutlineView*Keys are used by the View Based NSOutlineView to create the "disclosure button" used to collapse and expand items. The NSOutlineView creates these buttons by calling [self makeViewWithIdentifier:owner:] passing in the key as the identifier and the delegate as the owner. Custom NSButtons (or subclasses thereof) can be provided for NSOutlineView to use in the following two ways:
 1\. makeViewWithIdentifier:owner: can be overridden, and if the identifier is (for instance) NSOutlineViewDisclosureButtonKey, a custom NSButton can be configured and returned. Be sure to set the button.identifier to be NSOutlineViewDisclosureButtonKey.
 2\. At design time, a button can be added to the outlineview which has this identifier, and it will be unarchived and used as needed.

 When a custom button is used, it is important to properly set up the target/action to do something (probably expand or collapse the rowForView: that the sender is located in). Or, one can call super to get the default button, and copy its target/action to get the normal default behavior.

 NOTE: These keys are backwards compatible to 10.7, however, the symbol is not exported prior to 10.9 and the regular string value must be used (i.e.: @"NSOutlineViewDisclosureButtonKey").
 */
APPKIT_EXTERN NSString *const NSOutlineViewDisclosureButtonKey NS_AVAILABLE_MAC(10_9); // The normal triangle disclosure button
APPKIT_EXTERN NSString *const NSOutlineViewShowHideButtonKey NS_AVAILABLE_MAC(10_9); // The show/hide button used in "Source Lists" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-21T08:23:29.203

*此答案是在考虑 OS X 10.7 的情况下编写的，对于较新版本的 OS X/macOS，请参阅[WetFish 的答案](https://stackoverflow.com/a/20454413/644348)*

该方法不会被调用，因为它仅与基于单元格的大纲视图相关。

在基于视图的大纲视图中，显示三角形是可展开行的行视图中的常规按钮。我不知道它是在哪里添加的，但确实如此，并且`NSView`'s`didAddSubview:`方法恰好处理了视图被添加到其他地方的情况。

因此， subclass`NSTableRowView`和 override `didAddSubview:`，如下所示：

```
-(void)didAddSubview:(NSView *)subview
{
    // As noted in the comments, don't forget to call super:
    [super didAddSubview:subview];

    if ( [subview isKindOfClass:[NSButton class]] ) {
        // This is (presumably) the button holding the 
        // outline triangle button.
        // We set our own images here.
        [(NSButton *)subview setImage:[NSImage imageNamed:@"disclosure-closed"]];
        [(NSButton *)subview setAlternateImage:[NSImage imageNamed:@"disclosure-open"]];
    }
} 
```

当然，您的大纲视图的委托必须实现`outlineView:rowViewForItem:`以返回新的行视图。

尽管名称，`frameOfOutlineCellAtRow:`of`NSOutlineView`仍然被称为基于视图的轮廓视图，因此对于三角形的定位，您可能希望子类化轮廓视图并覆盖该方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-01T07:42:54.397

对于 Swift 4.2 macOS 10.14，@WetFish 的回答可以实现如下：

```
class SidebarView: NSOutlineView {

  override func makeView(withIdentifier identifier: NSUserInterfaceItemIdentifier, owner: Any?) -> NSView? {
    let view = super.makeView(withIdentifier: identifier, owner: owner)

    if identifier == NSOutlineView.disclosureButtonIdentifier {
      if let btnView = view as? NSButton {
        btnView.image = NSImage(named: "RightArrow")
        btnView.alternateImage = NSImage(named: "DownArrow")

        // can set properties of the image like the size
        btnView.image?.size = NSSize(width: 15.0, height: 15.0)
        btnView.alternateImage?.size = NSSize(width: 15.0, height: 15.0)
      }
    }
    return view
  }

} 
```

看起来相当不错！

![](../Images/5329da9250e9a796643542da832ea43c.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-05T12:52:21.047

@Monolo 的答案的 Swift2 版本：

```
override func didAddSubview(subview: NSView) {
    super.didAddSubview(subview)
    if let sv = subview as? NSButton {
        sv.image = NSImage(named:"icnArwRight")
        sv.alternateImage = NSImage(named:"icnArwDown")
    }
} 
```

# cocoa-touch - 输出西班牙语字符

> ID：11127767
> 
> 赞同：0
> 
> 时间：2012-06-20T20:35:42.120
> 
> 标签：cocoa-touch, cocoa

我需要将 Ñ 打印到屏幕上。我正在使用此代码，它适用于除大写字母 Ñ 之外的所有内容。它显示：√ë。

```
CGContextShowText(textContext, [text UTF8String], strlen([text UTF8String])); 
```

而且，所有这些编码都给出了相同的结果：

```
const char *cn = "Ñ";
NSLog(@"%@", [NSString stringWithUTF8String: cn]);
NSLog(@"%C", 0x00d1);
NSLog(@"%@", @"Ñ");

2012-06-20 16:27:09.388 app[406:707] √ë
2012-06-20 16:27:09.392 app[406:707] √ë
2012-06-20 16:27:09.394 app[406:707] √ë 
```

那么，如何使用 NSLog 或 CGContextShowText 显示 Ñ 而不是 √ë？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:29:51.213

以下在我的 Mac 上正常工作：

```
NSLog(@"%@", [NSString stringWithUTF8String:"Ñ"]); 
```

确保在 Xcode 中正确设置了文本编码：

![Xcode 编码](../Images/b99e1492500e5813e6d36e09c017069e.png)

# matlab - matlab中的二维矩阵直方图，将每一列解释为一个单独的元素

> ID：11127769
> 
> 赞同：0
> 
> 时间：2012-06-20T20:36:04.780
> 
> 标签：matlab, histogram

我在 matlab 中有一个 128 x 100 矩阵，其中每一列都应被视为一个单独的元素。我们称这个矩阵为 M。

我有另一个 128 x 2000 矩阵（称为 V），由矩阵 M 的列组成。

我将如何制作一个直方图来映射第二个矩阵中使用的每一列的频率？

```
hist(double(V),double(M)) gives the error:

 Error using histc
Edge vector must be monotonically
non-decreasing. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:52:06.800

> [Lia,Locb] = [ismember(A,B,'rows')](http://www.mathworks.com/help/techdoc/ref/ismember.html)还返回一个向量 Locb，其中包含 A 中的每一行（也是 B 中的一行）在 B 中的最高索引。输出向量 Locb 包含 0只要 A 不是 B 的行。

`ismember`使用`rows`参数可以识别另一个矩阵的行来自一个矩阵的哪一行。由于它适用于行，并且您正在寻找列，因此只需转置两个矩阵。

```
[~,Locb]=ismember(V',M');
histc(Locb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:20:51.807

这是一个例子。我们从与您描述的数据相似的数据开始

```
%# a matrix of 100 columns
M = rand(128,100);
sz = size(M);

%# a matrix composed of randomly selected columns of M (with replacement)
V = M(:,randi([1 sz(2)],[1 2000])); 
```

然后：

```
%# map the columns to indices starting at 1
[~,~,idx] = unique([M,V]', 'rows', 'stable');
idx = idx(sz(2)+1:end);

%# count how many times each column occurs
count = histc(idx, 1:sz(2));

%# plot histogram
bar(1:sz(2), count, 'histc')
xlabel('column index'), ylabel('frequency')
set(gca, 'XLim',[1 sz(2)]) 
```

![在此处输入图像描述](../Images/c2ae33022d0303fad173a21e879f547c.png)

# git - 使用 git rebase 时自动跳过空提交

> ID：11127771
> 
> 赞同：16
> 
> 时间：2012-06-20T20:36:11.713
> 
> 标签：git, git-rebase

通常，您必须这样做`git rebase --skip`，如果有一个开关可以自动跳过这些空提交，那就太好了。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:40:53.997

**G2** - 使用以下别名`continue`

到 G2 的网址 - [https://github.com/orefalo/g2](https://github.com/orefalo/g2) 备忘单 - [http://orefalo.github.com/g2/](http://orefalo.github.com/g2/)

```
#!/bin/bash
#
# This command is used to resume a conflict, either rebase or merge
#  it will smartly do a rebase --skip when necessary

state=$("$GIT_EXE" g2brstatus)

[[ $state = "rebase" ]] && {

action="--continue"
if git diff-index --quiet HEAD --; then
    echo "The last commit brings no significant changes -- skipping"
    action="--skip"
fi

"$GIT_EXE" rebase $action 2> /dev/null

}

[[ $state = "merge" ]] && {
# Count the number of unmerged files
count=$("$GIT_EXE" ls-files --unmerged | wc -l)
[[ $count -ne 0 ]] && echo "I am afraid you still have unmerged files, please run <g mt> to resolv conflicts" ||"$GIT_EXE" commit
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-25T21:58:17.527

很老的话题，但对我来说是搜索引擎上的第一个结果。

我终于发现有一个`--empty`参数可以取以下值之一：keep、drop、ask。

链接到文档： [https ://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---emptydropkeepask](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---emptydropkeepask)

所以你现在可以简单地做`git rebase ... --empty=drop`

# drupal - 使幻灯片出现在第一页以上

> ID：11127772
> 
> 赞同：0
> 
> 时间：2012-06-20T20:36:11.860
> 
> 标签：drupal, drupal-7, responsive-design, drupal-theming

我正在使用 Drupal 7 中的高级响应主题来创建站点。在主题中，首页上有幻灯片。是否可以让幻灯片显示在每一页的顶部？

**编辑**

所以我又搞砸了一点，我尝试将代码放入 page.tpl.php 以便它出现在所有页面上，但什么也没发生。然后我尝试在maintenance.tpl.php 页面上执行此操作，但仍然没有任何反应。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:24:16.147

看起来我们正在解决类似的问题，但既然你帮助回答了我的问题，我想我会帮你的。在模板文件夹中，您必须创建一个新页面--front.tpl.php（我确定您有），并将此网站的代码放入其中：

[到这里](http://www.thatagency.com/design-studio-blog/2011/02/creating-a-unique-homepage-in-drupal-7-using-page-front-tpl-php/)

这将使您的首页独一无二，您可以将类似的代码复制到您的 page.tpl 以对其余节点进行更改。

# javascript - 为什么这些字符被认为是大写的？

> ID：11127776
> 
> 赞同：0
> 
> 时间：2012-06-20T20:36:32.493
> 
> 标签：javascript, passwords, special-characters

我正在尝试测试密码。我需要对字符串进行一些测试。当我使用 toUpperCase() 测试我的特殊字符时，我发现它们的评估结果为真。我怀疑他们会评估为假。

我应该如何测试特殊字符？

```
// CREATE ARRAY OF CHARACTERS
CharacterArray = ["1","2","3","a","b","c","D","E","F","/","+",")"];

// TEST CHARACTERS 
function testCharacters() {
    // GET ARRAY LEN
    var CharacterArrayLen = CharacterArray.length;
    // LOOP THROUGH ARRAY
    for (i = 0; i < CharacterArrayLen; i++) {
        // PARSE SINGLE CHARACTER
        var ThisChar = CharacterArray[i];

        if (!isNaN(ThisChar)) {
            alert(ThisChar + ' is numeric!');
        } else {
            if (ThisChar === ThisChar.toUpperCase()) {
                alert(ThisChar + ' is upper case');
            } else if (ThisChar === ThisChar.toLowerCase()) {
                alert(ThisChar + " is lower case");
            }
        }   
    }
}
testCharacters(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:13:39.520

根据直觉和 Unicode 标准，特殊字符是无大小写的（既不是小写也不是大写）。但是 JavaScript 已被定义为对于无大小写字符，`toUpperCase()`and`toLowerCase()`方法返回字符本身。

即使从已编辑的问题中也不清楚您到底想测试什么。但是如果你需要测试一个字符是大写字母还是小写字母，那么 JavaScript 中合适的*基本*逻辑是这样的： if `ThisChar !== ThisChar.toUpperCase()`, then`ThisChar`是小写字母；if ThisChar !== ThisChar.LowerCase() `, then`ThisChar`是大写字母；否则，它是不区分大小写的——要么是特殊字符，要么是书写系统中不区分大小写的字母。

对于某些字符，这个基本逻辑是失败的，例如尖 s “ß”，它在 Unicode 中没有大写映射（因为大写等效是两个字母，“SS”，这必须单独处理）。因此，如果它们相关，您需要将它们作为特殊情况处理。

在其他编程语言中，您可以简单地使用字符的 General Category 属性，但 JavaScript 当前无法访问它。您可以从 Unicode 字符数据库下载相关文件，可能对其进行预处理以删除不必要的信息，并让您的程序检查 General Category 属性，但这会有些尴尬，并且在 Unicode 标准更改时需要更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:42:37.933

它们不是大写或小写。两者都`toUpperCase`为`toLowerCase`这些角色返回相同的东西。如果您先测试小写字母，您会发现它们都是小写字母！

您可以使用一些正则表达式来查看字符是否在字母表中。

```
ThisChar.match(/^[a-zA-Z]$/) 
```

将返回`null`非字母字符。

如果您只是想查看这些字符中的每一个是否都在您的数组中，您可以使用`indexOf`

```
CharacterArray.indexOf('a')
> 3
CharacterArray.indexOf('A')
> -1 
```

第二个返回`-1`，因为`A`不在数组中。

这是一个使用正则表达式的[**演示**](http://jsfiddle.net/twMSG/3/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:43:11.117

这是预期的行为。如果您删除“其他”，那么

```
if (ThisChar === ThisChar.toUpperCase()) {
    alert(ThisChar + ' is upper case');
} else if (ThisChar === ThisChar.toLowerCase()) {
    alert(ThisChar + " is lower case");
} 
```

变成

```
if (ThisChar === ThisChar.toUpperCase()) {
    alert(ThisChar + ' is upper case');
} if (ThisChar === ThisChar.toLowerCase()) {
    alert(ThisChar + " is lower case");
} 
```

你会看到'/'、'+'和'('被认为是大写和小写。

当您考虑确定字符串是否全部为特定情况的函数时，这是有道理的。说“abcde%”不全是小写，或者“ABCDE%”不全是大写真的有意义吗？对于这两种情况，非字母字符被定义为大写和小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:43:41.897

为什么不使用正则表达式？

```
function testCharacters(string) {
    var exp = /^[a-z]+$/ig;
    return exp.test(string);
} 
```

请注意，使用正则表达式，您可以一次测试整个字符串，而不必迭代每个字符。

# puppet - Puppet DSL：顺序无所谓？

> ID：11127778
> 
> 赞同：2
> 
> 时间：2012-06-20T20:36:36.270
> 
> 标签：puppet

根据木偶文档：

> 顺序在声明性语言中无关紧要。

如果是这样，为什么这段代码有效：

```
class myserver {
  $package_to_install = 'libcapture-tiny-perl'
  package {
   $package_to_install: ensure => present;
  }
} 
```

但这段代码*不起作用*：

```
class myserver {
  package {
   $package_to_install: ensure => present;
  }
  $package_to_install = 'libcapture-tiny-perl'
} 
```

如果顺序很重要，那么我可以看到为什么一个有效而另一个无效，但是既然顺序无关紧要，为什么它们的行为会有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:41:05.037

免责声明：我是 Puppet 开发人员之一。

因为正如我们的文档所声称的那样，我们的语言实际上不是声明性的。它实际上是订购的。:(

评估或多或少在类或声明中自上而下。该评估的产品是目录中的资源，但不是目录的评估。

将 DSL 视为构建目录的非完全声明性方式，即资源图，在处理过程中完全是声明性的。

# ios - 将照片从 iPhone 上传到 4D 服务器

> ID：11127779
> 
> 赞同：2
> 
> 时间：2012-06-20T20:36:47.917
> 
> 标签：ios, web-services, 4d-database

我希望将照片从 iPhone 上传到 4D 服务器。专门用于上传在 iPhone 上拍摄的照片，上传到 4D 服务器并作为 JPEG 图像存储在 WebFolder 中。我正在使用 4D Server 版本 12 和 13。我在这里查看了其他帖子，但我无法将它们中的任何一个应用于 4D。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:35:50.503

我花了一段时间，但最终我将各种程序组合在一起以完成这项工作。竖起大拇指 iriphon 博客 (http://www.iriphon.com/2011/11/09/ios-uploading-an-image-from-your-iphone-to-a-server/) 把我放在右边追踪。

这是我使用的 iOS 代码：

```
-(IBAction)uploadPhoto:(id)sender {
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.domain.com/4DACTION/showcaseUploadPic"]
                                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                        timeoutInterval:60]; 

[request setHTTPMethod:@"POST"]; 

// We need to add a header field named Content-Type with a value that tells that it's a form and also add a boundary.
// I just picked a boundary by using one from a previous trace, you can just copy/paste from the traces.
NSString *boundary = @"----WebKitFormBoundaryQkZe6RUJZ2xbzXLB";

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
// end of what we've added to the header.

// the body of the post.
NSMutableData *body = [NSMutableData data];

// Now we need to append the different data 'segments'. We first start by adding the boundary.
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// Now append the image
// Note that the name of the form field is exactly the same as in the trace ('picBLOB' in my case).
// You can choose whatever filename you want.
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"picBLOB\" filename=\"image001.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// We now need to tell the receiver what content type we have.
// In my case it's a jpg image. If you have a png, set it to 'image/png'.
[body appendData:[[NSString stringWithString:@"Content-Type: image/jpg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// Now we append the actual image data.
// I use a NSData object called photoData.
[body appendData:[NSData dataWithData:photoData]];

NSLog(@"photoData size = %i",[photoData length]);

// and again the delimiting boundary.
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// adding the body we've created to the request.
[request setHTTPBody:body];

NSURLConnection * connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
NSLog(@"connection = %@",connection);
} 
```

不要忘记包含 NSURLConnection 代表！

如博客中所述，我使用 Wireshark 来获取我需要的确切数据。我正在使用 NSData 存储我刚刚用相机拍摄并想要上传的照片。因此，我的代码与您想上传存储的文件略有不同。

这是 4D（版本 12）代码：

```
$ba:=BLOB size(picBLOB)
C_PICTURE(imageVar)
If (Undefined(picBLOB))  // in case user tries to reload /4DACTION/WEB_Set_Limits
C_BLOB(picBLOB)
End if 

If (BLOB size(picBLOB)>0)  // did user select a file for uploading?
C_STRING(255;$fileHeader)
$offset:=0  // BLOB to text requires a variable for the offset parameter
$fileHeader:=BLOB to text(picBLOB;Mac text without length;$offset;255)
$fileNameBegin:=Position("filename=";$fileHeader)+10
For ($i;$fileNameBegin;255)
If ($fileHeader≤$i≥=Char(Double quote))
$fileNameEnd:=$i
$i:=255
End if 
End for 
$fileName:=Substring($fileHeader;$fileNameBegin;$fileNameEnd-$fileNameBegin)
$contentTypeBegin:=Position("Content-Type:";$fileHeader)+14
For ($i;$contentTypeBegin;255)
If ($fileHeader≤$i≥=Char(Carriage return))
$contentTypeEnd:=$i
$i:=255
End if 
End for 
contentType:=Substring($fileHeader;$contentTypeBegin;$contentTypeEnd-$contentTypeBegin)
DELETE FROM BLOB(picBLOB;0;$contentTypeEnd+3)

BLOB TO PICTURE(picBLOB;imageVar;"JPEG")
$FILENAME:=":WebFolder:myPhoto.jpg"
WRITE PICTURE FILE($FILENAME;imageVar;"JPEG")

End if 
```

这是 4D（版本 13）代码：

```
C_BLOB(picBLOB)
C_PICTURE(imageVar)

WEB GET BODY PART(1;picBLOB;myPhoto)

If (BLOB size(picBLOB)>0)
BLOB TO PICTURE(picBLOB;imageVar;"JPEG")
$FILENAME:=":WebFolder:myPhoto.jpg"
WRITE PICTURE FILE($FILENAME;imageVar;"JPEG")
End if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:59:13.187

此[页面](http://www.4dresources.com/codefaq/uploads1.shtml)包含使用早期版本的说明。iNug（4D 的开发者邮件列表）上的[最新帖子](http://4d.1045681.n5.nabble.com/Uploading-files-in-v12-td4686550.html)表明这仍然有效，可能需要几个星期。

仅仅因为 4D 社区太小，你会在[iNug](https://lists.4d.com/mailman/listinfo/4d_tech)上得到更好的回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:44:10.380

我对这个“4D 服务器”不是特别熟悉，但听起来你只需要一个简单的服务器端 PHP 脚本来上传照片，可能使用 NSData。

您到底尝试了什么，或者您在这两个领域的知识程度如何？

# javascript - DHTML - 限时显示图片

> ID：11127785
> 
> 赞同：0
> 
> 时间：2012-06-20T20:37:08.187
> 
> 标签：javascript, dhtml

我尝试使用 DHTML 来制作 3-5 秒的动画（动画假设从左到右开始......）。

知道该怎么做吗？？？

```
//this one will set the the pictue on the right side of the screen
function setUpPicture() {
    subRunnerOBJ = new Object();
    subRunnerOBJ.topPos = 100;
    subRunnerOBJ.leftPos = 0;
    subRunnerOBJ.velX = 400;
    subRunnerOBJ.velY = 0;
    subRunnerOBJ.score = 0;
    hide1.style.visibility = "visible";
    hide1.style.left = subRunnerOBJ.leftPos + "px";
    hide1.style.top = subRunnerOBJ.topPos + "px";
    hide1.style.position = "absolute";
    //once we place the location of the sub , we will Call to new function that will move it
    startMovePicture();
}

function startMovePicture() {
    dt = 50; // in miliseconds
    h = setInterval("moveObj(subRunnerOBJ)", dt);
}

function moveObj(someObj) {
    counter = 0;
    while (counter < 30000) {
        subRunnerOBJ.leftPos = subRunnerOBJ.leftPos + subRunnerOBJ.velX * dt / 1000;
        subRunnerOBJ.topPos = subRunnerOBJ.topPos + subRunnerOBJ.velY * dt / 1000;
        hide1.style.left = subRunnerOBJ.leftPos + "px";
        hide1.style.top = subRunnerOBJ.topPos + "px";
        counter = counter + 50;
        if (counter == 3000) {
            stopRunning();
        }
    }
}

function stopRunning() {
    clearInterval(h);
    hide1.style.visibility = "hidden";
} 
```

使用此功能，我可以在不到一秒的时间内看到图片……我如何在这里设置时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:03:30.783

将毫秒值替换为等于所需秒数的数字，即 5000 持续 5 秒。删除内部的while循环并通过添加和 `moveObj`替换它作为该块内的最后一条语句。`clearInterval(h)``hide1.style.visibility = "hidden";`

# java - java - 如何在java中并行执行具有不同输入的方法的多个实例？

> ID：11127792
> 
> 赞同：1
> 
> 时间：2012-06-20T20:37:38.173
> 
> 标签：java, multithreading, parallel-processing

我有一个方法，它需要一个列表并对其进行一些处理，然后它会更新另一个全局列表。我需要使用不同的列表输入并行运行此方法的多个实例。多线程支持吗？如果是，我该如何使用它，即：我应该在线程中放入什么？高度赞赏示例。

* * *

我正在考虑在线程类中有一个静态列表，该列表在运行时由线程的不同实例更新（该列表包含字符串和计数器，因此更新是添加新字符串或增加现有字符串的计数器）.. i需要每 10 秒读取一次添加到此全局列表中的任何内容并打印它.. 使用适合此的静态列表以及如何使其线程安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T20:43:13.097

是的，这是多线程编程的一个非常常见的用法。

```
class ListProcessor implements Runnable {
    /* field/s representing param/s */
    public ListProcessor(/* param/s */) {
        /* ... */
    }

    @Override
    public void run() {
        /* process list */
    }
} 
```

然后，当您想要实际处理一些列表时。

```
class SomeClass {
    ExecutorService listProcessor;
    public SomeClass(/* ... */) {
        listProcessor = ExecutorService.newFixedThreadPool(numThreads);
        /* for each thread, however you want to do it */
        listProcessor.execute(new ListProcessor(/* param/s */));
        /* when finished adding threads */
        listProcessor.shutdown();
        /* note that the above two lines of code (execute/shutdown) can be
         * placed anywhere in the code. I just put them in the constructor to
         * facilitate this example.
         */
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:55:49.413

@purtip31 有一个并行处理的开始。

我担心结果——你提到你更新了一个“全局列表”。如果多个线程同时尝试更新该列表，则可能会出现问题。几个选项：

1.  确保该列表是正确的线程安全的。这可能会也可能不会容易 - 取决于到底发生了什么变化。
2.  使用`ExecutorService`，但使用`invokeAll()`方法，该方法并行运行一堆 Callables 并等待它们全部完成。然后，您可以浏览所有结果并*一次*更新它们。结果没有线程问题。这意味着您的代码必须实现 Callable 而不是 Runnable（没什么大不了的）。 [我有一个博客，这里有一个例子](http://flyingspaniel.blogspot.com/2012/06/how-to-parallelize-your-algorithm-with.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T21:11:29.613

好吧，山姆……我对你的问题不太清楚……

试试这个....

以下是可以帮助您运行多个实例的代码......

**主线程**

```
 public class mainprocess
    {

          public static LinkedList globallist;
          public static String str;
          public int num;
          public static void main(String Data[])
          { 
                 globallist = new LinkedList();
                 // LinkedList will be passed as pass by reference.....
                 // globalist is made static and assigned likewise for global use..
                 childprocess.assignlist(globallist);
                 childprocess p1 = new childprocess("string input");  // a string input...
                 childprocess p2 = new childprocess(number input);   // a number input...

                 p1.t.join();
                 p2.t.join();
           }
     } 
```

**子线程......**

```
 public class childprocess implements Runnable
     {
               public Thread t1,t2;
               public boolean inttype,stringtype;     
               String string;
               int num;
               public static LinkedList temp = new Linkedlist();
               public static assignlist(LinkedList ll)
               {
                       temp = ll;
               }
               public childprocess(String str)
               {
                        string = str;
                        t1 = new Thread(this,"stringThread");
                        t1.start();
               }

               @override
               public childprocess(int n)
               {
                         num = n;
                         t2 = new Thread(this,"numberThread");
                         t2.start();
               }

               @override 
               public void run()
               {
                         // Both will be executed in a threader manner based on the condition...
                         if(Thread.currentThread().getName().equals("stringThread")
                         {
                               // your process using string......
                               childprocess.temp.add(str);
                         }
                         else if(Thread.currentThread().getName().equals("numberThread")
                         {
                                 // your process using number.....
                                 chilprocess.temp.add(num);
                         }
                }                              

        } 
```

*如果您使用的函数应该一次仅限于一个线程*......

包括语法....

```
 public synchronized func_type func_name()
   {

   } 
```

# .net - xbap 未正确检测 .NET 运行时

> ID：11127794
> 
> 赞同：1
> 
> 时间：2012-06-20T20:37:44.287
> 
> 标签：.net, clickonce, xbap

在我的公司，我们构建了一个完全信任的 xbap 应用程序，该应用程序将通过公共互联网下载给客户。它需要 .NET 4.0。如果我在根本没有 .NET 40 的机器上运行它，它会检测到，并安装 4.0 文件，然后正确运行。如果仅打开了 4.0 客户端配置文件而不是 Framework 4.0 Extended，则检测失败并且应用程序不会加载。显然有些客户有这种配置。

这是一个已知问题吗？有解决办法吗？

谢谢哈罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:55:34.373

您是否使用 ClickOnce 发布您的 xbap？您能否检查您选择的先决条件并确保它是 .NET 4 而不是 .NET 4 CF？

# php - PHP - 在数组初始化期间从先前定义的键访问值

> ID：11127797
> 
> 赞同：1
> 
> 时间：2012-06-20T20:37:49.847
> 
> 标签：php, arrays

我正在寻找是否可以访问我之前在同一个数组中定义的键的值。

就像是：

```
$test = array(
    'foo' => 1,
    'bar' => $test['foo']
); 
```

我知道在初始化后我总是可以这样做，我只是想知道在初始化期间是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:44:17.600

不，`$test`在评估完整的构造函数之前不存在。

例如：[http ://codepad.viper-7.com/naUprJ](http://codepad.viper-7.com/naUprJ)

```
Notice: Undefined variable: test..
array(2) { ["foo"]=> int(1) ["bar"]=> NULL } 
```

这可能是最好的。想象一下这个工作：

```
$test = array('foo' => $test['foo']); // mwahaha 
```

如果您经常需要这样做，您可以创建一个类，该类采用特定格式的键，该键向类构造函数标记，它应该被解析，直到所有相关键都被评估。

# regex - 调试 Perl 正则表达式

> ID：11127800
> 
> 赞同：12
> 
> 时间：2012-06-20T20:37:53.327
> 
> 标签：regex, perl, debugging

我正在尝试使用以下方法调试一些正则表达式：

```
perl -Mre=debug file.pl 
```

file.pl脚本有很多*正*则表达式。其中一些是重复的。使用上述语法，正在调试*file.pl中的所有正则表达式。*

有没有办法告诉 Perl 只调试脚本中的特定正则表达式？

我熟悉[YAPE::Regex](https://metacpan.org/pod/YAPE::Regex)模块，但这不是我需要的。所以请不要建议使用它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T20:41:51.993

与许多其他 pragma 一样，您可以使用[`no`](http://p3rl.org/no)取消以前`use`的 .

```
use re 'debug';

$str=~/\d{3}/;

no re 'debug';

$str=~/\d{3}/; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T20:48:47.223

> 从 5.9.5 开始，该指令使用 re 'debug'，它的等价物是词法范围的，就像其他指令一样。

采用：

```
{
    use re 'debug';
    # Debugged regexp here.
} 
```

# android - 清除与电子邮件附件关联的默认选项

> ID：11127801
> 
> 赞同：0
> 
> 时间：2012-06-20T20:37:53.757
> 
> 标签：android

这里我的问题与编码无关，我想知道如何清除“使用完成操作”对话框中的默认值。

在这里我正在运行我的应用程序，单击按钮会将其重定向到 gmail 应用程序，然后单击任何电子邮件附件显示 2 个选项“使用完整操作”对话框来预览此附件。

然后我错误地选择了一个选项并将其设置为默认选项。现在每次我从这个gmail应用程序打开任何附件时，它都会直接将此附件文件打开到以前的默认应用程序中，现在它显示了2个选项和“使用对话框完成操作”..

那么如何清除这些默认值，以便再次显示该对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:40:09.837

在您的设备上，转到设置 > 应用程序 >（单击应用程序）> 清除默认值。或者，在模拟器上，只需选中“擦除”复选框即可重新启动它，基本上将其恢复出厂设置。

# codeigniter - 使用 CI 钩子设置公共变量

> ID：11127804
> 
> 赞同：3
> 
> 时间：2012-06-20T20:37:59.083
> 
> 标签：codeigniter

我有几个想要使用钩子设置的公共变量。例如，我有一个 post_controller_constructor 钩子，在其中我想执行一些逻辑来设置用户主文件夹：

```
public function post_controller_constructor() {             
  $home_folder = isset($_SESSION['hf']) ? $_SESSION['hf'] : NULL;

  // Check whether the homefolder value has been set            
  $home_folder = isset($_SESSION['hf']) ? base_url($_SESSION['hf']) : base_url('default');
} 
```

但是如何将结果变量 $home_folder 传递回我的控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:09:37.900

```
public function post_controller_constructor() {             
  $home_folder = isset($_SESSION['hf']) ? $_SESSION['hf'] : NULL;

  // Check whether the homefolder value has been set            
  $home_folder = isset($_SESSION['hf']) ? base_url($_SESSION['hf']) : base_url('default');

  $CI =& get_instance();

  $CI->home_folder = $home_folder;

} 
```

会做的。

# jquery - 是否可以将带有文本的按钮用于 jquery 移动拆分按钮列表？

> ID：11127805
> 
> 赞同：0
> 
> 时间：2012-06-20T20:38:00.067
> 
> 标签：jquery, button, mobile, split

JQuery Mobile 在拆分按钮列表中使用右栏中的操作图标：http: [//jquerymobile.com/demos/1.1.0/docs/lists/lists-split.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-split.html)。我需要为右列显示一个带有文本和图标的全尺寸按钮。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:28:22.243

这玩意儿我玩了好多年了……

我看不出它是如何轻松完成的——也许其他人会。

但是，对于 hack，由于拆分列表的整个右侧是一个链接，为什么不使用 css 使其更宽，并在其中放入一个看起来像按钮的图像，CSSing 以在 :hover 上更改它?

我知道这并不理想，但它可能只是工作。

抱歉不能给你更适应的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T01:41:57.390

就我而言，我需要按钮旁边的静态文本。我能够使用 CSS2+ 完成这一切。不需要javascript。希望这可以帮助某人。

CSS：

```
.split-icon-link {
width: 116px !important;
}

 .split-icon-link > .ui-btn-inner:before {
float: left;
font-size: 15px;
padding: .7em 4px;
content: "View Store"; /*this is the text to display*/
} 
```

HTML：

```
 <ul data-role="listview" data-inset="true" data-split-icon="home"
 data-split-theme="d">
        <li>
            <a href="#yoururl">
                <span>The big button text</span>
            </a>
            <a class="split-icon-link" href="#splitbututoniconurl"></a>
        </li>
  </ul> 
```

# c++ - 防止临时对象的传递引用

> ID：11127807
> 
> 赞同：10
> 
> 时间：2012-06-20T20:38:08.873
> 
> 标签：c++, pass-by-reference, rvalue-reference, pass-by-rvalue-reference

我有一个“记住”对某个对象（例如整数变量）的引用的类。我不能让它引用一个立即被破坏的值，我正在寻找一种方法来保护我的班级的用户不会意外这样做。

右值引用重载是防止传入临时值的好方法吗？

```
struct HasRef {
    int& a;
    HasRef(int& a):a(a){}
    void foo(){ a=1; }
};

int main(){
    int x=5;
    HasRef r1(x);
    r1.foo();  // works like intended.

    HasRef r2(x+4);
    r2.foo(); // dereferences the temporary created by x+4

 } 
```

私人右值重载会吗？

```
 struct HasRef {
   int& a;
   HasRef( int& a ):a(a){}
   void foo(){ a=1; }
 private: 
   HasRef( int&& a );
 };

 ... HasRef r2(x+1); // doesn't compile => problem solved? 
```

有没有我没看到的陷阱？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-23T13:06:39.533

如果您必须将某个`const`类型实例的引用存储`B`到您的类`A`中，那么您肯定希望确保`A`实例的生命周期将超过`B`实例的生命周期：

```
B b{};
A a1{b}; // allowed
A a2{B{}}; // should be denied
B const f() { return B{}; } // const result type may make sense for user-defined types
A a3{f()}; // should also be denied! 
```

为了使它成为可能，您应该显式地对`= delete;`所有可以接受右值（`const &&`和`&&`）的构造函数重载。为此，您应该只`= delete;`使用`const &&`构造函数的版本。

```
struct B {};

struct A
{
    B const & b;
    A(B const & bb) : b(bb) { ; } // accepts only `B const &` and `B &`
    A(B const &&) = delete; // prohibits both `B &&` and `B const &&`
}; 
```

这种方法允许您禁止向构造函数传递各种右值。

这也适用于内置标量。例如`double const f() { return 0.01; }`，虽然它会导致如下警告：

> 警告：返回类型上的 'const' 类型限定符无效 [-Wignored-qualifiers]

如果您只是构造函数的版本，它仍然可以`= delete;`生效`&&`：

```
struct A
{
    double const & eps;
    A(double const & e) : eps(e) {} // binds to `double const &`, `double &` AND ! `double const &&`
    A(double &&) = delete; // prohibit to binding only to `double &&`, but not to `double const &&`
};

double const get_eps() { return 0.01; }

A a{0.01}; // hard error
A a{get_eps()}; // no hard error, but it is wrong! 
```

对于非转换构造函数（即非一元），存在一个问题：您可能必须为`= delete;`构造函数的所有可能组合版本提供 -d 版本，如下所示：

```
struct A
{
    A(B const &, C const &) {}
    A(B const &&, C const &&) = delete;
    // and also!
    A(B const &, C const &&) = delete;
    A(B const &&, C const &) = delete;
}; 
```

禁止混合情况，例如：

```
B b{};
A a{b, C{}}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T20:47:03.880

忽略代码无效的事实，只是回答有关私人重载的问题......

在 C++11 中，我更喜欢删除函数而不是私有函数。更明确一点，你*真的*不能调用它（即使你是班级的成员或朋友也不能。）

注意，如果删除的构造函数是`HasRef(int&&)=delete`，则不会在此处选择：

```
int i;
HasRef hr(std::forward<const int>(i)); 
```

对于类型的参数，`const int&&`将`HasRef(const int&)`使用构造函数，而不是那个`HasRef(int&&)`。在这种情况下没问题，因为`i`真的是一个左值，但通常情况可能并非如此，所以这可能是*const*右值引用有用的极少数情况之一：

```
HasRef(const int&&) = delete; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T20:42:16.150

那不应该编译。一个好的 C++ 编译器（或几乎所有我见过的 C++ 编译器）将阻止这种情况发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:56:28.327

我猜你是在 MSVS 中编译的。在这种情况下，关闭语言扩展，你应该得到一个错误。

否则，即使标记引用也不会`const`延长临时的生命周期，直到构造函数完成。之后，您将引用一个无效对象。

# sql-server-2008 - 我是否在 VBscript 中正确使用 DO WHILE NOT 和 EOF

> ID：11127812
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:38:26.977
> 
> 标签：sql-server-2008, asp-classic, vbscript

最后管理员为我配置了 IIS，下面列出了错误消息。设置 SQLStream = CreateObject("ADODB.Stream") 设置 SQLConnection = CreateObject("ADODB.Connection") 设置 SQLCommand = CreateObject("ADODB.Command") 设置 SQLRecordSet = CreateObject("ADODB.RecordSet") SQLConnection.Open "Provider= sqloledb;SERVER=SQLPROD;DATABASE=MyDataBase;UID=MyUsername;PWDMyPassword;"

```
 'Response.Write("Connection Status: " & SQLConnection.State) & vbnewline
    'Response.Write("Connection Provider: " & SQLConnection.Provider) & vbnewline
    'Response.Write("Version: " & SQLConnection.Version) & vbnewline

    SQLCommand.ActiveConnection = SQLConnection
    SQLCommand.CommandText = "SELECT Seminars.Year, Seminars.SeminarID, Seminars.Theme, Seminar_Week.First, Seminar_Week.Last, Seminar_Week.WeekID, Seminar_Week.Date, Seminar_Week.Affiliation FROM Seminars CROSS JOIN Seminar_Week"
    'Response.Write("SQL Command Passed in: " & SQLCommand.CommandText)

    Set adoRec = SQLCommand.Execute()
        file1 = "./seminars/" & seminar_type & "/" & seminar_year & "/" & adoRec("Date") & "-" & adoRec("Year") & "_" & adoRec("Last") & ".pdf"
        file2 = "./seminars/" & seminar_type & "/" & seminar_year & "/" & adoRec("Date") & "-" & seminar_year & "_" & adoRec("Last") & "(handouts).pdf"
        file3 = "./seminars/" & seminar_type & "/" & seminar_year & "/" & adoRec("Date") & "-" & seminar_year & "_" & adoRec("Last") & "_Flyer.pdf"
    Set fso = CreateObject("scripting.filesystemobject")
        Response.Write("<p style=" & "margin-left:10px;" & "><img src=" & "./img/right_arrowblue.png" & " alt=" & "Expand/Collapse" & " id=" & "arrow_" & adoRec("Week") & " /><strong>[" & adoRec("Date") & "]</strong> " & "<a href=" & "javascript:toggle('seminar_" & adoRec("Week") &"')"">"&aroRec("First") & adoRec("Last") & ", " & adoRec("Affiliation") & "</a></p>") 
```

最后一行代码导致此错误

ADODB.Recordset 错误“800a0cc1”

在与请求的名称或序号对应的集合中找不到项目。

*文件路径*，第 244 行

第 244 行是最后一行代码，应该在网页上写下有关每个研讨会的一些信息。

我很确定此时我指向的文件路径不正确，因为我在所有不同的字符串的某个地方都有一个额外的空间。

我现在的问题是一开始的那些，意思是那些在

```
"<p style=" & "margin-left:10px;" & "><img src=" & "./img/right_arrowblue.png" 
```

造成麻烦。

我也不熟悉使用“展开/折叠”，所以如果有人能告诉我更多关于这一点的信息。我正在尝试修复别人的代码，所以我有点落后于 8 号球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:32:22.890

解决方案的一小步：

你的 SQL

```
"SELECT * FROM Seminars WHERE [SeminarID] = 5 ORDER BY DESC" 
```

绝对是错误的：ORDER BY 需要（至少）一个列名：ORDER BY [SeminarID] DESC。

如果这不能解决您的所有问题，我们将不得不考虑一步一步的方法。

如果您遇到错误，请告诉我们（编号、描述、行）。当我要求您发布它们时，这就是我的意思。如果您无法从 IIS 中获得比“处理 URL 时出错”更好的信息，那么您**必须**编写一些命令行脚本来完全正确地获取与数据库相关的代码。

从 Experiments.vbs 开始：

```
 Dim sCS : sCS     = !your connection string!
  Dim oCN : Set oCN = CreateObject("ADODB.Connection")
  oCN.Open sCS
  WScript.Echo "CN open:", oCN.State

  Dim sSQL : sSQL    = !your SQL statement!
  Dim oRS  : Set oRS = oCN.Execute(sSQL)
  WScript.Echo "RS EOF:", CStr(oRS.EOF)
  WScript.Echo "Frs Col:", oRS.Fields(0).Name, oRS.Fields(0).Type

  Dim i : i = 0
  Do Until oRS.EOF
     WScript.Echo i, oRS.Fields(0).Value
     i = i + 1
     oRS.MoveNext
  Loop
  oCN.Close 
```

并在命令窗口（DOS 框）中运行它：cscript Experiments.vbs。这应该会给你一些类似的行：

```
CN open: 1
RS EOF: False
Frs Col: Id 3
0 ...
1 ...
2 ... 
```

或聚焦/可发布的错误消息，例如：

```
... .vbs(2465, 14) Microsoft OLE DB Provider for SQL Server: Falsche Syntax in der Nä
he des 'DESC'-Schlüsselworts. 
```

（DESC 附近的语法错误），当我尝试该语句时得到

```
"SELECT * FROM Alpha ORDER BY DESC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:58:33.443

```
RS.MoveNext 
```

将上面的代码放在 Loop 关键字之前的行以避免无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:41:17.313

您是否缺少`loop`循环块末尾的关键字？

在此处检查语法：http: [//msdn.microsoft.com/en-us/library/eked04a7.aspx](http://msdn.microsoft.com/en-us/library/eked04a7.aspx)

# java - Java 反射库 - 使用没有包信息的 Class.forName()

> ID：11127813
> 
> 赞同：4
> 
> 时间：2012-06-20T20:38:28.753
> 
> 标签：java, class, reflection, dynamic

我有一个项目需要在运行时动态创建类，其中唯一可用的信息是字符串形式的类名称。我现在正在使用一些简单的反射库方法进行测试，但我的问题是，如果我试图“动态”加载的类位于同一目录中，为什么我必须提供完全限定的类名称？我使用的是linux，没有开发环境，只是我试图在同一个目录中调用的所有类，没有任何包声明。我必须设置一个包系统才能使用反射吗？这是这个小代码片段......

```
public class ReflectionTest {
    public static void main(String[] args) {
        try {
            Class nodeClass = Class.forName("Node");
            System.out.println(nodeClass.toString());
        } catch (ClassNotFoundException cnfe) {
            System.out.println("Error");
        }
    }
} 
```

现在，这会引发错误。但是当我创建一个 Node 实例，然后使用 获得它的完全限定类名时`Node.getClass().getName()`，我只会得到“Node”作为回报。所以我不明白为什么反射库与使用“java”调用 JVM 的工作方式不同，如果没有提供包名，它只会在同一个目录中查找。*当我的类都*没有关联的包名称时，我不确定如何将此库与用户定义的类一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:46:22.503

您的代码应该按照描述工作。也就是说，如果你可以打电话，`new Node()`你也应该可以打电话`Class.forName("Node")`。我刚刚尝试使用无包类进行验证，一切都按预期工作。

`Node.class`在类路径中可用吗？您可以通过将当前目录添加到类路径来使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:47:51.473

包名是java命名系统的一个组成部分。但是，如果您的类没有声明包，它位于根包中，您发布的代码应该可以工作。

我的猜测：该目录实际上不在 CLASSPATH 中。尝试添加当前目录 (./) 并确保它实际上是当前目录，或者在 CLASSPATH 中明确包含目录（绝对路径）。请参阅文档以了解如何设置 CLASSPATH（环境、jvm 选项、运行时是您的选项）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:46:53.110

Java 中没有类目录的概念。类在包中，或者在默认包中，并且从必须在类路径中的目录或 jar 中加载。

如果包含的目录`Node.class`在类路径中，则上面的代码应该可以工作。

但是使用默认包是一个非常非常糟糕的做法。每个类都应该在一个包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:46:11.413

首先，您需要确保您尝试加载的类位于类路径中，因此在启动 jvm 时尝试将当前文件夹添加到其中：`java -cp . ReflectionTest`

包的概念是让你的东西井井有条并且能够重用名称。提供完全限定的名称，确保您使用的是正确的 Node 类，例如不使用`org.w3c.dom.Node`或类似的东西，它会隐式地随 java.util 提供。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:46:13.500

它适用于我使用`ReflectionTest.java`上面的确切内容和以下内容`Node.java`：

```
public class Node { } 
```

你编译`Node.java`好了`ReflectionTest.java`吗？由于类对`ReflectionTest`类没有编译时依赖，javac 在编译时`Node`不会自动编译。`Node.class``ReflectionTest.class`

# jquery - 从一个 li 中的 div 获取类并添加到同一个 li

> ID：11127819
> 
> 赞同：0
> 
> 时间：2012-06-20T20:38:45.447
> 
> 标签：jquery

从 li 中的 div 获取类并添加到同一个 li。

列表项与此类似：

```
<li class="original">
<div id="one" class="text">foo</div>
<div id="two" class="photo">foo</div>
<div id="three" class="video">foo</div>
</li>

<li class="original">
<div id="one" class="text">foo2</div>
<div id="two" class="photo">foo2</div>
<div id="three" class="video">foo2</div>
</li>

... 
```

我需要从每个列表项的 div 中获取 id 为“三”的类，并将其添加到父 li 的类中。因此，代码运行后，列表将如下所示：

```
<li class="original video">
<div id="one" class="text">foo</div>
<div id="two" class="photo">foo</div>
<div id="three" class="video">foo</div>
</li>

<li class="original text">
<div id="one" class="video">foo2</div>
<div id="two" class="photo">foo2</div>
<div id="three" class="text">foo2</div>
</li> 
```

我试过这样的事情，但它只更新第一个列表项：

```
$("#three").each(function(i) { 
    var newclass = $(this).attr("class");                   
   $(this).parent().addClass(newclass);
}); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:54:29.713

如果您被重复的 ID 卡住了

```
 $('[id="three"]').each(function(){  
     $(this).parent().addClass( this.className);

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:47:43.143

不能有多个具有相同 ID 的元素。在这种情况下，jquery each 都在做正确的事情并找到第一个 ID 然后停止。您可以改用该类来解决此问题：

```
<li class="original video"><div class="text one">foo</div></li>
<li><div class="photo two">foo</div></li>
<li><div class="video three">foo</div></li>

<li class="original"><div class="video one">foo2</div></li>
<li><div class="text two">foo2</div></li>
<li><div class="photo three">foo2</div></li> 
```

然后是jQuery：

```
$(".three").each(function(i) { 
var newclass = $(this).attr("class");                   
$(this).parent().addClass(newclass);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:57:38.460

这是您可能想看看的另一个解决方案：[demo](http://jsfiddle.net/DnPrB/29/)

这是 JS 代码（在修复了上面评论的损坏的 HTML 问题后，但保留了重复的 ID）

```
$(document).ready(function(){

    $('.original').each(function(i) {
    var div = $(this).find('div').eq(2);
    var newclass = $(div).attr("class");                   
   $(this).addClass(newclass);
});
    });​ 
```

# c# - 如何将有序值应用于同一个 BindingList？

> ID：11127822
> 
> 赞同：0
> 
> 时间：2012-06-20T20:39:08.817
> 
> 标签：c#, .net, linq

我有：

```
var orderedStatItmes = item.Statistics.OrderByDescending(t=>t.StartTime); 
```

注意

```
public BindingList<IStatistics> Statistics { set; get; } 
```

我需要的是重新分配的最佳方式，`orderedStatItmes`因此`item.Statistics`它应该*就位*。

怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:41:34.127

我不能说我自己用`BindingList<T>`的太多。

如果您可以访问它，您可能最好对基础集合进行排序。或者，如果它`BindingList<T>`本身支持排序，您可能需要使用[`IBindingList.ApplySort`](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.applysort).

一种非常骇人听闻的做法是：

```
var ordered = item.Statistics.OrderByDescending(t => t.StartTime).ToList();
for (int i = 0; i < ordered.Count; i++)
{
    item.Statistics[i] = ordered[i];
} 
```

...但我不想说在更新时这会对任何绑定产生什么影响。

* * *

**旧答案**（在编辑提问题之前`BindingList<T>`）

你的意思是你需要改变现有的数组，或者你很乐意只为`item.Statistics`属性分配一个新的数组引用？如果是后者：

```
item.Statistics = item.Statistics.OrderByDescending(t=>t.StartTime).ToArray(); 
```

如果您想基本上对数组进行排序（我假设它是一个数组，根据您的问题标题），您可以使用：

```
Array.Sort(item.Statistics, (x, y) => x.StartTime.CompareTo(y.StartTime)); 
```

# xcode - Xcode 4.3.3 找不到任何头文件

> ID：11127824
> 
> 赞同：3
> 
> 时间：2012-06-20T20:39:27.687
> 
> 标签：xcode, header-files, gsl

到目前为止，我已经设法让 Xcode 链接到我安装在 /usr/local/lib/ 下的 Gnu Scientific Libraries (GSL) 以及 /usr/local/include 下的头文件。在“Build Phases”>“Link Binary With Libraries”下，我添加了 libgsl.a 等。今天，Xcode 给出了一条错误消息，声称它找不到头文件。

例如

```
#include <stdio.h>
#include <gsl/gsl_matrix.h>

int main(int argc, const char * argv[])
{

    printf("Hello, World!\n");
    return 0;
} 
```

导致找不到“gsl/gsl_matrix.h”文件。我试图更改用户标题搜索路径无济于事。在命令行上使用 gcc main.c -lgsl -lgslcblas 效果很好。谁能告诉我需要做什么才能让它在 Xcode 中工作？另外，为什么它突然无缘无故停止工作。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T22:41:24.940

当我升级到 4.3.3 并在我的 /usr/local/include 文件夹中安装了包含文件时，我遇到了同样的问题。在敲了几下之后，我发现我必须将 /usr/local/include 添加到项目构建设置中搜索路径下的“标题搜索路径”设置中。在以前版本的 XCode 中我不必这样做。不知道为什么会改变，但希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-25T15:58:48.563

在 Xcode 12.x 中，确保选择选项卡 All（而不是预先选择的基本）： [![在此处输入图像描述](../Images/825d4c6de626c1115f0590dfbafcbdca.png)](https://i.stack.imgur.com/Yi2Zu.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:21:42.980

感谢帮助。

在 Xcode 4.6 中，我必须：

*   将默认编译器更改为：LLVM GCC 4.2

并添加此路径：

*   框架搜索路径：/Library/Frameworks
*   标头搜索路径：/usr/local/include
*   库搜索路径：/usr/include/lib

# jquery - jQuery mouseon/mouseout 或悬停在“on”绑定事件中

> ID：11127825
> 
> 赞同：3
> 
> 时间：2012-06-20T20:39:34.240
> 
> 标签：jquery, jquery-on

我有以下 jquery 代码，当尝试实现与 on 事件的绑定时，它不能正常工作。`

```
 $(".editable_template_region").on({"mouseover":function(){
        $('<a href="javascript:void(0)" class="hoverItTemplate">click to edit</a>').appendTo($(this));

    }, "mouseout" : function() {
        $(this).find(".hoverItTemplate").remove();
    }});` 
```

我认为这段代码不正确，因为这会导致事件“闪烁”或反复来回循环。所以我的悬停类只是闪烁着闪烁。

这是我之前的代码，但我想将其切换到 on 事件以更好地绑定。

```
 $(".editable_template_region").hover(function() {
        $('<a href="javascript:void(0)" class="hoverItTemplate">click to edit</a>').appendTo($(this));
    }, function() {
        $(this).find(".hoverItTemplate").remove();
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:44:50.577

尝试这个：

```
$(".editable_template_region").on({
    mouseenter: function() {
        $('<a href="javascript:void(0)" class="hoverItTemplate">click to edit</a>').appendTo($(this));
    },
    mouseleave: function() {
        $(this).find(".hoverItTemplate").remove();
    }
});​ 
```

我不确定您所说的“更好的绑定”是什么意思，但上述内容或您的计划 .hover() 都应该有效。

# arrays - 将派生数据类型假定形状数组从子例程传递给fortran 90中的函数

> ID：11127828
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:39:52.180
> 
> 标签：arrays, fortran, derived-types

我对 fortran 很陌生。而且我使用的是 fortran 内置的库，该库有许多 TYPE 数组。我尝试使用以下方法通过 ac 程序将值分配给 lib 中的 TYPE 数组。我已经构建了一个 c-fortran 接口，我从 sqlite 数据库获取值到 c prg 中的 ac 结构数组中。然后将此结构数组传递给一个 fortran 子例程，在其中我将其声明为派生类型，匹配声明的 TYPE 变量的定义在 lib 中。然后我将传递的数组中的值复制到 lib 中声明的实际 TYPE 数组，并将其传递给 fortran 函数。

发生的事情是数组中的值可以从 c 传递到 fortran 子例程，我打印它们以在 fortran 子例程中检查它们，但是当数组从子例程传递到函数时，这些值会变得乱码。我将数组作为假定的形状数组传递。该函数在模块内声明，因此我认为调用子例程不需要接口。

我不完全理解发生了什么，我也尝试使用 TYPE 声明中的序列。我正在使用 g95 ， gcc 4.0.3 编译器。数组中的所有值都是 REAL(KIND =8) 类型，c 程序中的等价物是 double 。

考虑一个在其中声明了 TYPE(something), TYPE(Something2) 的库。我将 lib 作为模块导入到 fortran 子例程中。

让我们假设

```
 TYPE(something_lib) is

              REAL(kind =8) ::A 
              REAL(kind=8)  ::B

            END TYPE 
```

在库中

```
 TYPE(SOMETHING2_lib) !this is also declare in the lib

           !I have a C program  in which

            ! in which 
```

///////////////////////////////////////// //////////////////////////////////

```
 // C program

  struct SomethingC    

   {
    double a

     double b

 } ;

  struct SomethingC  x[2]

  struct  something2C s[2]  // something similar to the first struct

//i fill the values in x ,s from database in proper format.(doubles).

 //i call the fortran subroutine in the c program

   A_(x,s);   //call to fortran subroutine 
```

///////////////////////////////////////// ////////////////////////////////////fortan 子程序

```
 SUBROUTINE A (x,s)

        USE Lib_module       ! this LIB_Module also contains the function func

         TYPE G

            REAL(kind =8)        ! this is defined similar to TYPE something(in lib) by me
             REAL(kind =8)

         END TYPE G

          TYPE G2

            similar to TYPE Something2 in lib

          END TYPE G2

         TYPE(something_lib) :: D(2)      !derived type declared in lib
         TYPE(Something2_lib)::E(2)       ! derived type declared in lib
         TYPE(G)::x(2)            
         TYPE(G2)::s(2)           

  ! x, s are struct arrays from c which are now declared in the fortran function

          copy code for 
          copying values from
            x to D
            s to E

          print all values of 
             D

          Print all values of 
            E

         !this prints the values correct as expected for both x,d

          func(D,E)    ! this function is defined in the lib . The function is in the                      

                     !  LIB_module                    
                     ! so no interface will be required (i think)

         ! IN the  Function

           FUNCTION func(D,E) (while debugging)

            TYPE(something_lib) :: INTENT (IN) D(:)
            TYPE (something2_lib)::INTENT (IN) E(:)

              when i try to print values of D , E in the 
              function i get garbled values like 

                1180333333

               2.33419537006E-313

        !when  out of the function  and back in the subroutine i.e after the call(while                        debugging)
                ! if I print the values of D,E here  they print ok

  END SUBROUTINE 
```

因此，它们在函数中传递后会出现乱码，但在子例程中是可以的。我的问题是为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:05:20.137

我建议使用 ISO C 绑定，它使 C 和 Fortran 之间的变量传递成为 Fortran 语言标准的一部分。这将需要 gcc/gfortran 4.3 或更高版本；我不确定g95版本。但是，不支持将假定形状的数组作为 C 的参数。假定形状的数组是高级别的，不仅包含数组，还包含有关大小的信息，并且将它们传递给 C 可能需要了解特定 Fortran 编译器的内部结构。

# python - 谷歌应用引擎初学者的 django 有用资源

> ID：11127834
> 
> 赞同：0
> 
> 时间：2012-06-20T20:40:16.373
> 
> 标签：python, django, google-app-engine

我是初学者，正在尝试构建一个在 Google App Engine 上运行的 django 项目。一周以来，我一直在努力寻找可以让我启动并运行的好资源，但徒劳无功。官方的谷歌应用程序引擎文档本身已经过时了，我获得的任何外部资源也无关紧要。尝试它们，最终会出现一堆错误。

请向我指出任何资源、教程或任何可以让我开始在谷歌应用引擎中部署 django 项目的东西。

我正在使用 django version-1.3，因为这是 google app engine version-1.6.5 支持的最新版本。

帮助可能非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:02:29.633

在 django-nonrel 上查找文档。我不知道有多少很棒的文档，但您可能很容易在 Google 上找到文档。

最新的仓库在这里：[https ://github.com/django-nonrel](https://github.com/django-nonrel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:25:15.257

我不确定 Django 是否是您最好的解决方案。这是一个非常好的框架，但我不再使用它有两个主要原因：

1.  它比其他的要大，因此比您需要的要重。
2.  它在 App Engine 中没有得到很好的支持，所以你必须使用旧版本（norel）

如果你是初学者，我建议你看看这个[开源项目](http://github.com/coto/gae-boilerplate/blob/master/README.rdoc)，它有很多很棒的功能，你可以在其中学习他们是如何做到的。

该项目使用的是 Google App Engine 支持的最后一种技术，并且有很多贡献者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:03:12.823

如果您还没有阅读[django-nonrel 的文档，请阅读。](http://django-nonrel.readthedocs.org/en/latest/)我记得在设置它时遇到了一些麻烦，但恐怕我不记得确切的问题是什么（您可能需要使用`dev_appserver.py .`而不是运行您的开发服务器`manage.py runserver`）。但是，一旦我启动并运行它，它就像一个魅力。

# android - android列表视图在适配器填充数据后更改TextView

> ID：11127836
> 
> 赞同：0
> 
> 时间：2012-06-20T20:40:25.513
> 
> 标签：android, listview

我有一个带有用于自定义视图的 BaseAdapter 的列表视图。我在适配器中的 TextView 中设置希伯来语文本时遇到问题。我想在设置适配器后进入列表的每一行..

有没有办法在屏幕上显示列表后，我可以进入一个特定的行视图，`findById`一个 TextView 并编辑它？我不是说第一次自定义..我想在加载后更改它...

我真的不明白为什么它在希伯来语中不起作用......但我正在努力克服这个错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:44:25.093

是的。您可以在[getView()中执行 findViewById() 调用](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)

不可以。您无法在其他任何地方执行此操作，并且希望能够处理除 BaseAdapter 之外的列表行中的项目。

# java - JAXB 不会解组接口列表

> ID：11127837
> 
> 赞同：7
> 
> 时间：2012-06-20T20:40:25.307
> 
> 标签：java, xml, jaxb

似乎 JAXB 无法读取它所写的内容。考虑以下代码：

```
interface IFoo {
    void jump();
}

@XmlRootElement
class Bar implements IFoo {
    @XmlElement
    public String y;

    public Bar() {
        y = "";
    }

    public Bar(String y) {
        this.y = y;
    }

    @Override
    public void jump() {
        System.out.println(y);
    }
}

@XmlRootElement
class Baz implements IFoo {
    @XmlElement
    public int x;

    public Baz() {
        x = 0;
    }

    public Baz(int x) {
        this.x = x;
    }

    @Override
    public void jump() {
        System.out.println(x);
    }
}

@XmlRootElement
public class Holder {
    private List<IFoo> things;

    public Holder() {
        things = new ArrayList<>();
    }

    @XmlElementWrapper
    @XmlAnyElement
    public List<IFoo> getThings() {
        return things;
    }

    public void addThing(IFoo thing) {
        things.add(thing);
    }
}

// ...

try {
    JAXBContext context = JAXBContext.newInstance(Holder.class, Bar.class, Baz.class);

    Holder holder = new Holder();
    holder.addThing(new Bar("1"));
    holder.addThing(new Baz(2));
    holder.addThing(new Baz(3));

    for (IFoo thing : holder.getThings()) {
        thing.jump();
    }

    StringWriter s = new StringWriter();
    context.createMarshaller().marshal(holder, s);

    String data = s.toString();

    System.out.println(data);

    StringReader t = new StringReader(data);
    Holder holder2 = (Holder)context.createUnmarshaller().unmarshal(t);

    for (IFoo thing : holder2.getThings()) {
        thing.jump();
    }
}
catch (Exception e) {
    System.err.println(e.getMessage());
} 
```

当然，这是一个简化的例子。关键是我必须在一个集合中存储两个实现方式非常不同的类，Bar 和 Baz。好吧，我观察到它们有非常相似的公共接口，所以我创建了一个接口 IFoo 并让它们两个来实现它。现在，我想要有工具来保存这个集合并将其加载到 XML 或从 XML 加载。不幸的是，这段代码并不能很好地工作：集合被保存，但无法加载！预期的输出是

```
1
2
3
some xml
1
2
3 
```

但不幸的是，实际输出是

```
1
2
3
some xml
com.sun.org.apache.xerces.internal.dom.ElementNSImpl cannot be cast to testapplication1.IFoo 
```

显然，我需要以不同的方式使用注释？还是放弃 JAXB 并寻找其他东西？我，好吧，可以为我不想（de）编组的所有类编写“XMLNode toXML（）”方法，但是......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:53:15.083

试试下面的`@XmlAnyElement(lax=true)`。该`lax`标志告诉 JAXB (JSR-222) 实现根据元素`@XmlRootElement`和`@XmlElementDecl`注释将元素与域对象匹配。没有它，内容将被视为 DOM 节点。

```
@XmlRootElement
public class Holder {
    private List<IFoo> things;

    public Holder() {
        things = new ArrayList<>();
    }

    @XmlElementWrapper
    @XmlAnyElement(lax=true)
    public List<IFoo> getThings() {
        return things;
    }

    public void addThing(IFoo thing) {
        things.add(thing);
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)

# python - 如何删除二维数组子集？

> ID：11127838
> 
> 赞同：6
> 
> 时间：2012-06-20T20:40:30.080
> 
> 标签：python, arrays, numpy

我有一个 800x800 数组，我想只分析它外部的元素。我需要一个没有切片 [5:-5,5,5:-5] 元素的新数组。它不一定要返回二维数组，平面数组或列表也可以。例子：

```
import numpy

>>> a = numpy.arange(1,10)
array([1, 2, 3, 4, 5, 6, 7, 8, 9])

>>> a.shape = (3,3)
array([[1, 2, 3],
   [4, 5, 6],
   [7, 8, 9]]) 
```

我需要丢弃核心元素，例如：

```
del a[1:2,1:2] 
```

我希望有：

```
array([1, 2, 3, 4, 6, 7, 8, 9]) 
```

我尝试使用 numpy.delete() 但它似乎一次只适用于一个轴。我想知道是否有更直接的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:21:18.630

您可以使用布尔数组以任何您喜欢的方式索引您的数组。这样，如果您不想更改原始数组中的任何值，就不必更改。这是一个简单的例子：

```
>>> import numpy as np
>>> a = np.arange(1,10).reshape(3,3)
>>> b = a.astype(bool)
>>> b[1:2,1:2] = False
>>> b
array([[ True,  True,  True],
       [ True, False,  True],
       [ True,  True,  True]], dtype=bool)
>>> a[b]
array([1, 2, 3, 4, 6, 7, 8, 9]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:58:35.977

您可以用一些占位符值替换中间区域（我使用了-12345，在您的实际数据中不可能出现的任何内容都可以），然后选择不等于该值的所有内容：

```
>>> import numpy as np
>>> a = np.arange(1,26)
>>> a.shape = (5,5)
>>> a
array([[ 1,  2,  3,  4,  5],
       [ 6,  7,  8,  9, 10],
       [11, 12, 13, 14, 15],
       [16, 17, 18, 19, 20],
       [21, 22, 23, 24, 25]])

>>> a[1:4,1:4] = -12345
>>> a
array([[     1,      2,      3,      4,      5],
       [     6, -12345, -12345, -12345,     10],
       [    11, -12345, -12345, -12345,     15],
       [    16, -12345, -12345, -12345,     20],
       [    21,     22,     23,     24,     25]])
>>> a[a != -12345]
array([ 1,  2,  3,  4,  5,  6, 10, 11, 15, 16, 20, 21, 22, 23, 24, 25]) 
```

如果您使用浮点数组而不是整数数组，则可以使用[NaN](http://docs.scipy.org/doc/numpy/reference/generated/numpy.isnan.html)和[isfinite](http://docs.scipy.org/doc/numpy/reference/generated/numpy.isfinite.html#numpy.isfinite)更优雅地执行此操作：

```
>>> a = np.arange(1,26).astype('float32')
>>> a.shape = (5,5)
>>> a[1:4,1:4] = np.nan
>>> a
array([[  1.,   2.,   3.,   4.,   5.],
       [  6.,  nan,  nan,  nan,  10.],
       [ 11.,  nan,  nan,  nan,  15.],
       [ 16.,  nan,  nan,  nan,  20.],
       [ 21.,  22.,  23.,  24.,  25.]], dtype=float32)
>>> a[np.isfinite(a)]
array([  1.,   2.,   3.,   4.,   5.,   6.,  10.,  11.,  15.,  16.,  20.,
    21.,  22.,  23.,  24.,  25.], dtype=float32) 
```

# r - 从 R 中的 hclust 中提取文本中的树结构

> ID：11127843
> 
> 赞同：1
> 
> 时间：2012-06-20T20:40:56.773
> 
> 标签：r, forecasting, hierarchical-clustering, hclust

在需求预测项目的范围内，我想确定对彼此相似的时间序列进行分组的最佳方法，以便我可以应用自上而下的预测算法。目前，我的关键问题是确定什么是适当的组以及这些组的适当层次结构是什么。在做了一些阅读之后，我相信动态时间扭曲可能会有所帮助。为了对此进行测试，我创建了一个小测试用例，但我面临一个问题，那就是我如何提取层次结构，例如文本树或类似的东西。我希望你们中的一个人能够进一步帮助我。

我创建了以下案例来展示我的目标。

```
sc2 <- read.table("http://dl.dropbox.com/u/9641130/R/hclust.data", header=F, sep="")
SampleLabels <- c("ID1", "ID2", "ID3", "ID4", "ID5", "ID6", "ID7", "ID8", "ID9", "ID10", "ID11", "ID12", "ID13", "ID14", "ID15")
distMatrix2 <- dist(sc2, method="DTW")
hc2 <- hclust(distMatrix2, method="average")
# show the visual tree
plot(hc2, labels=SampleLabels) 
```

不知何故，我想以文本形式获取集群的名称和成员，以便我可以继续使用它。有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:20:20.177

您可以使用 dendrapply 和属性来访问树中的每个节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T07:33:04.413

按照上述评论中赛斯的回答，我得出了以下解决方案：

```
numgroups <- 5
groups <- cutree(hc2,k=numgroups)
LabelsAndGroups <- t(rbind(SampleLabels,groups)) # t is just to get a better overview when presenting the results here. 
LabelsAndGroups
      SampleLabels groups
 [1,] "ID1"        "1"   
 [2,] "ID2"        "1"   
 [3,] "ID3"        "2"   
 [4,] "ID4"        "1"   
 [5,] "ID5"        "3"   
 [6,] "ID6"        "4"   
 [7,] "ID7"        "1"   
 [8,] "ID8"        "4"   
 [9,] "ID9"        "5"   
[10,] "ID10"       "1"   
[11,] "ID11"       "2"   
[12,] "ID12"       "3"   
[13,] "ID13"       "4"   
[14,] "ID14"       "4"   
[15,] "ID15"       "1" 
```

# opencv - 如何使用 OpenCV 水平或垂直拉伸图像

> ID：11127844
> 
> 赞同：0
> 
> 时间：2012-06-20T20:41:01.220
> 
> 标签：opencv, video-streaming, image-manipulation

我需要将两个视频流放在一起。我需要操纵其中一个，使它们适合另一个视频流的指定四个角。角落可能会形成梯形。是否有允许我这样做的 OpenCV 函数？我不确定最好/最简单的选择是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:01:07.513

对于梯形，您需要[warpPerspecive](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#warpperspective)和[getPerspectiveTransform](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform)。

# objective-c - 为什么我的屏幕向上滚动后又向下滚动？

> ID：11127847
> 
> 赞同：1
> 
> 时间：2012-06-20T20:41:07.943
> 
> 标签：objective-c, ios, keyboard, scroll

我在 iPad 应用程序中滚动屏幕时遇到问题。在我的应用程序中，页面底部附近可能有很多字段。因此，我不想根据当前活动字段的位置频繁调整屏幕位置，而是希望屏幕处于以下两个位置之一：滚动或不滚动。如果用户正在处理任何部分将被键盘隐藏的字段，我想将屏幕向上滚动键盘的高度。

我的问题是，在键盘出现并且屏幕滚动了我的代码指定的距离后，屏幕会迅速回落到一个位置，使得光标（无论它在哪里）正好位于键盘顶部的上方。我不明白是什么导致了最后的快照。我的滚动代码（从教程中提取）如下。

谢谢

```
//Scroll the screen up if the keyboard hides the current field
- (void)keyboardDidShow:(NSNotification *)notification
{
    // Step 1: Get the height of the keyboard.
    if ([self interfaceOrientation] == UIInterfaceOrientationPortrait || [self interfaceOrientation] == UIInterfaceOrientationPortraitUpsideDown) 
    {
        keyboardHeight = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size.height;
    }
    else 
    {
        keyboardHeight = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size.width;
    }

    // Step 2: Adjust the bottom content inset of your scroll view by the keyboard height.
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, keyboardHeight, 0.0);
    [(UIScrollView*)[self view] setContentInset: contentInsets];
        [(UIScrollView*)[self view] setScrollIndicatorInsets: contentInsets];

    // Step 3: Scroll the screen up by the height of the keyboard.
        visibleRect = self.view.frame;
        visibleRect.size.height -= (keyboardHeight + [[self toolbar] bounds].size.height);
        if (([self.activeField frame].origin.y + [self.activeField frame].size.height) > visibleRect.size.height) 
        {
            //make sure scrolling is vertical only
            CGPoint scrollPoint = CGPointMake(currentLeftEdge, keyboardHeight);
            [(UIScrollView*)[self view]  setContentOffset: scrollPoint animated:YES];
        } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:03:31.030

您是否没有更改某些文本字段委托方法的其他任何内容？如果没有，您似乎没有正确设置滚动视图的内容大小，因此在 setContentOffset:Animated: 之后，滚动视图只会自行调整。

# jquery - 无法使默认值大于 0 的 jQuery Spinner 为空白

> ID：11127848
> 
> 赞同：1
> 
> 时间：2012-06-20T20:41:08.190
> 
> 标签：jquery, jquery-ui, spinner

我正在使用 Brant Burnett 的 jQuery UI spinner 1.2。我想让我的微调器的最小值为 1，最大值为 10。但是，我希望微调器默认为空白，如果用户点击则转到 1，如果用户点击则转到 10。否则，该值应被视为 null。

这里有一个问题：如果我将“min”值设置为 0，我会得到我想要的行为。微调器开始空白。向上将其变为 1，向下将其变为 10。但是，如果我将该最小值从 0 更改为 1，则微调器始终默认为 1。即使我尝试选择微调器中的值并清除它，它也会强行更改焦点在控件上丢失后，值恢复为 1。

有没有人有这可能的原因？以后的版本会纠正这个问题吗？还是我应该修改 JS 文件？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:00:50.357

我更改了 jquery.ui.spinner 文件中的第 546 行。添加了一个条件以确保在返回“min”选项之前该值不为空。这让我得到了我正在寻找的默认“空白”行为。

（感谢 Brant Burnett，此插件的原作者：[btburnett.com](http://btburnett.com/)

```
_validate: function(value) {
    var options = this.options,
        min = options.min,
        max = options.max;

    if ((value == null) && !options.allowNull)
        value = this.curvalue != null ? this.curvalue : min || max || 0; // must confirm not null in case just initializing and had blank value

    if ((max != null) && (value > max))
        return max;
    else if ((min != null) && (value < min) && (value != null))
        return min;
    else
        return value;
}, 
```

# ruby-on-rails-3 - Capistrano 初始部署失败

> ID：11127849
> 
> 赞同：0
> 
> 时间：2012-06-20T20:41:08.687
> 
> 标签：ruby-on-rails-3, capistrano, vps

在将带有 Capistrno 的 Rails 3 项目部署到 linode VDS 时遇到问题。错误看起来像：

```
lifecoder@lifecoder-VirtualBox:~/projects/ruby/avtolife$ cap deploy:update
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@bitbucket.org:lifecoder/avtolife.git master"
    command finished in 2964ms
  * executing "if [ -d /srv/avtolife/shared/cached-copy ]; then cd /srv/avtolife/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard aec5c7f44151ca74d8eb384c478d6707719ee680 && git clean -q -d -x -f; else git clone -q git@bitbucket.org:lifecoder/avtolife.git /srv/avtolife/shared/cached-copy && cd /srv/avtolife/shared/cached-copy && git checkout -q -b deploy aec5c7f44151ca74d8eb384c478d6707719ee680; fi"
    servers: ["original-parts.net"]
    [lifecoder@original-parts.net] executing command
 ** [original-parts.net :: err] Host key verification failed.
 ** [original-parts.net :: err] fatal: The remote end hung up unexpectedly
    command finished in 1401ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /srv/avtolife/releases/20120620203352; true"
    servers: ["original-parts.net"]
    [lifecoder@original-parts.net] executing command
    command finished in 588ms
    failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.2' -c 'if [ -d /srv/avtolife/shared/cached-copy ]; then cd /srv/avtolife/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard aec5c7f44151ca74d8eb384c478d6707719ee680 && git clean -q -d -x -f; else git clone -q git@bitbucket.org:lifecoder/avtolife.git /srv/avtolife/shared/cached-copy && cd /srv/avtolife/shared/cached-copy && git checkout -q -b deploy aec5c7f44151ca74d8eb384c478d6707719ee680; fi'" on lifecoder@original-parts.net 
```

我需要一个关于如何跟踪特定错误发生位置的想法。我是 *nix 和 rails 的新手，所以配置的某些部分对我来说看起来很神奇:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:00:32.617

当 Capistrano 部署出现问题时 - 在远程服务器上一一运行场景命令。我的问题出在目标服​​务器上——本地 Ubuntu 要求接受远程 IP 地址并在 cap 脚本没有回答时死掉。接受后，相同的脚本运行良好。

# openstreetmap - OpenStreetMap 路由 - Java Swing 应用程序

> ID：11127852
> 
> 赞同：3
> 
> 时间：2012-06-20T20:41:25.080
> 
> 标签：openstreetmap

我对 OSM 很陌生。我必须为我的理学硕士项目构建一个 Java 应用程序。在这个项目中，我的应用程序需要从 OSM（XML 格式）下载原始数据，解析以将其显示在我的应用程序上。之后，我必须在我的应用程序上部署路由服务。老实说，我以前从未这样做过，所以我现在很困惑。你们有什么想法或源代码可以帮助我吗？请你帮助我好吗？

非常感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T20:50:15.583

您可以使用[piccolo2d](http://www.piccolo2d.org/)之类的 2d 绘图框架来渲染地图。对于路线，您需要构建一个[图表](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)来描述地图上的道路/方式，它们如何连接以及表示的距离。在地图上选择了起点和终点后，[A 星](http://en.wikipedia.org/wiki/A*_search_algorithm)等算法将帮助您找到两点之间的最短路径。

**更多细节：**

OSM XML 转储由三类实体组成（比这更复杂：有关详细信息，请参阅[官方文档）：](http://wiki.openstreetmap.org/wiki/OSM_XML)

*   *节点*：表示地图上的单个点，由经度和纬度定义。这些要么代表显着特征（种类繁多，但例如：商店、古代纪念碑、小路上的大门等），要么是道路的一部分。
*   *方式*：在地图上表示多边形。这些由节点的有序列表（由 id 引用）组成，可以表示线性事物，例如道路和路径（与您的路由问题相关），但也可以表示有界区域，例如田野或森林边界、城市区域的形状、湖泊、河流等
*   *关系*：我不会在这里讨论，但你可以在官方文档中找到更多关于这些的信息。

上述三种节点类型中的每一种都将具有以“标签”形式与它们关联的附加数据，这些数据是键值（字符串）对，指定节点/方式表示的实体类型。可以在[此处找到一般列表，并在](http://wiki.openstreetmap.org/wiki/Map_Features)[此处](http://wiki.openstreetmap.org/wiki/OSM_tags_for_routing)找到路由列表。取自 OSM 网站的一个示例，代表一条小型本地道路（在本例中为德国）：

```
<!-- The nodes representing points along the way -->
<node id="298884269" lat="54.0901746" lon="12.2482632" ... />
<node id="261728686" lat="54.0906309" lon="12.2441924" ... />
...
<node id="298884272" lat="54.0901447" lon="12.2516513" ... />

<!-- A way, built of the points above, with a tag
     declaring it to be an unclassified road -->
<way id="26659127" ...>
    <nd ref="292403538"/>
    <nd ref="298884289"/>
    ...
    <nd ref="261728686"/>
    <tag k="highway" v="unclassified"/>
</way> 
```

在两条路相交的地方（例如，当两条道路交叉时），它们将在交叉点共享一个公共节点。

要过滤到生成路由图所需的数据，您需要：

*   阅读感兴趣领域的 XML，至少阅读节点和方式。
*   过滤掉，只留下基于标签的你想要的方式（例如，其中 k="highway" 等）。
*   过滤掉所有节点，但其余相关方式引用的节点除外。

仅隔离了您需要的信息后，您需要从 OSM 格式转换为更适合路由的格式。尽管所描述的 OSM 图可用于路由，但将地图表示为每个路径的起点和终点的一组节点以及路径之间的任何交叉点和表示交叉点之间路径的一组边会更有效，以及它们的长度。

例如，您可能想要转换以下内容（使用交叉方式 ab、cd、ef）：

![OSM节点和方式](../Images/350a213aa2844a65dbec9fe0a74331de.png)

更像是：

![路由图](../Images/c55bf74af8fb95efdbc838dc9a4611a7.png)

仅保留末端节点和相交节点的位置。在此表示中，您将在路由图中从 3 种方式转换为 8 条边（ax、cx、xe、ed、xy、ey、yf、yb），每条边都有一个关联距离，您通过沿着节点中的节点步进计算方式，随着你去累积距离：（例如ax：200m，ey：350m等）。请注意，您需要计算经度/纬度空间中相邻点之间的距离，您可以在[此处](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)找到公式。

您可以使用自己的数据结构或使用第三方图形库（例如[JGraphT](http://jgrapht.org/)或[Jung](http://jung.sourceforge.net/) ）来表示这些数据。从这里开始，路由是（粗略地，并且为简单起见，假设您剩余的节点集足够细粒度以表示所有必需的起点/终点）选择代表旅程开始的节点的问题，节点代表最后并使用诸如A-star（如上所述）之类的算法来计算最短路径。

唯一的问题是，据我所知，我提到的两个库都没有 A-star 的实现。但是您可以通过以较低的速度运行 Dijkstra 的最短路径（在两个库中都存在）来获得正确的结果 - 然后当您对这些概念更有信心时自己实现 A-star。

为了让这一切变得更有趣：您可以根据估计的旅行时间（考虑道路上的平均速度）而不是使用距离。或者您可以根据路线的需要修改距离：例如，对于骑自行车，在交通较少的道路上降低距离，以便选择更长但更安全的路线。或者，对于徒步旅行，减少穿过特别风景区或靠近地标（如古代纪念碑或酒吧）的路径的距离。

鉴于 OSM 数据有不错的现有路由服务（例如来自[Cloudmade](http://developers.cloudmade.com/projects/show/routing-http-api)），您想要做这样的事情的主要原因是为了使用您自己的自定义距离度量......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T12:49:25.937

亚历克斯的答案包含重要部分。尤其是将节点减少到只有必要的节点！

如果你有兴趣：我在我的[GraphHopper](http://graphhopper.com)项目中用 Java 开发了所有这些东西，并带有一个非常粗糙的 Swing UI。

还实现了 Dijkstra、双向 dijkstra 和 astar。在我的测试中，当强制它不返回路线的近似值时，星星比 dijkstra 慢 30%。将来我会尝试允许近似值，但与此同时，您可以使用双向 dijkstra，它比普通 dijkstra 快约 50% ;) 并像这样工作：

![在此处输入图像描述](../Images/89670b13659cd7ec037f2dce124d053e.png)

# css - 跨度和锚点默认高度

> ID：11127855
> 
> 赞同：1
> 
> 时间：2012-06-20T20:41:53.160
> 
> 标签：css

你能告诉我为什么`<a>`跨度元素的高度不同吗？

为什么`<a>`垂直居中对齐并且 span 占用了所有垂直可用空间？

[http://jsfiddle.net/vpVEf/12/](http://jsfiddle.net/vpVEf/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:01:47.763

这是因为您的列表项行高是 70 像素。跨度高度基于行高。

```
#MenuEventos li {
line-height: 70px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:27:46.053

您的代码存在一些问题。首先你有`font-size:3em`for`span`但不是 for `a`。你`float:right`也是跨度，但你没有`float:left`因此`a`的`span`内容到达 parent 的右上方`li`。

解决方案：添加`font-size:3em`for`li`并将其从`span`. 添加`float:left`为`a`. 清除`float`添加`overflow:hidden`为`li`. 但是因为你使用`outline`的黑色线条将不可见。所以`outline`改为`border:3px solid #000`

**演示：http:** [//jsfiddle.net/vpVEf/13/](http://jsfiddle.net/vpVEf/13/)

# jqgrid - Jqgrid - 格式化程序和使用 celledit 取消格式化：true 不起作用

> ID：11127863
> 
> 赞同：1
> 
> 时间：2012-06-20T20:42:26.677
> 
> 标签：jqgrid, jqgrid-formatter

我创建了自己的数字格式化程序和取消格式化方法，但是当我单击单元格进行编辑并填充数字时，cellvalue 参数为空。默认类型的格式化程序也不起作用。

如何处理编辑字段格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:15:10.380

如果我理解正确您的问题，您应该使用[formatCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#events)回调。

# sql - 需要 SQL 中的特定输出

> ID：11127864
> 
> 赞同：-4
> 
> 时间：2012-06-20T20:42:33.923
> 
> 标签：sql, oracle

我需要做一个查询输出

使用表格，我想要以下报告，格式为：

```
-----------     -------
ids < 90000     100,000
ids > 90000     100,000 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:50:45.127

我们需要你的表结构...

或者你使用：;-)

```
SELECT CONCAT('ids', ' > ','9000'),'100,00' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:52:29.600

你不能做这样的事情：

```
(SELECT 'ids < 90000', COUNT(*) FROM TABLE WHERE ID < 9000)
UNION
(SELECT 'ids >= 90000',COUNT(*) FROM TABLE WHERE ID >= 9000) 
```

# gwt - Google Web Toolkit java 文件和 html 之间的粘合剂是什么

> ID：11127865
> 
> 赞同：1
> 
> 时间：2012-06-20T20:42:35.750
> 
> 标签：gwt

当我寻找有关 GWT 的信息时，我发现了很多 java 示例。然后我在我的计算机上安装了 GWT，它生成的示例包含一个 HTML，其中包含我的页面的基础知识，当然还有控制它的 java 文件。

两者之间的胶水是什么？HTML文件是编译的结果，框架自动生成，我们只需要处理java文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:48:08.577

GWT 通过将这些 Java 源文件编译成浏览器可以运行的 JavaScript 来工作。

您编写 GWT 支持的 Java 代码，GWT 编译器将使用它来创建 Web 浏览器以后可以使用的 HTML 和 JS 输出。那么，这个编译器就是你绑定 Java 文件和最终输出的“粘合剂”。

# javascript - 优化这个脚本

> ID：11127867
> 
> 赞同：1
> 
> 时间：2012-06-20T20:42:38.933
> 
> 标签：javascript

任何人都可以建议一种方法来节省这个脚本的任何时间吗？

```
var countObject = new Object();
var length = data.length;
for(var i = 0; i < length; i += 4) {
  var key = data[i] + ',' + data[i+1] + ',' + data[i+2];
  if(typeof(countObject[key]) == 'number') {
    countObject[key]++
  } else {
    countObject[key] = 0
  }  
} 
```

它是建立在从画布检索到的数据中发现的 RGB 值的出现次数。大概来自 context.getImageData() 的数据已经是优化的数组类型......？

编辑：我不需要格式为“255,255,255”的RGB值，这只是我能想出的用作数组键的全部。也欢迎采用不同的方法:-D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:53:38.017

我不知道这是否会产生任何显着差异（您必须有*很多*值才能看到任何明显的性能差异），但您可以：

*   使用快速位移操作而不是慢速字符串连接创建键
*   删掉作业中的几个步骤：

所以：

```
for(var i = 0, l = length; i < l; i += 4) {
   var key = (data[i] << 16) + (data[i+1] << 8) + data[i];
   countObject[key] = (countObject[key] || 0) + 1;
} 
```

编辑：由于您提到从键中获取 RGB 值，所以它是如何完成的：

```
/** 
 * From a color key (integer)  return an object 
 * with keys 'r', 'g' and 'b'
 */
var colorFromKey = function(key) {
   return {
      'r': (key >> 16) & 0xFF,
      'g': (key >> 8) & 0xFF,
      'b': key & 0xFF
   };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:55:29.777

> 任何人都可以建议一种方法来节省这个脚本的任何时间吗？

不，看起来不错，但我还有其他一些建议：

```
var countObject = new Object(); // use {} instead, that's more common
var length = data.length; // why that? You are already using var l=...
for(var i = 0, l = length; i < l; i += 4) {
  var key = data[i] + ',' + data[i+1] + ',' + data[i+2];
  if(typeof(countObject[key]) == 'number') { // remove the brackets. typeof is no function
    countObject[key]++ // ; missing
  } else {
    countObject[key] = 0 // are you sure this should not start with 1?
  }  
} 
```

如果您有彩色图像，则进行`countObject`之前的初始化可能会更快（将每个可能的键设置为`0`）。然后为每次迭代保存 if 条件。

# c# - 使用 ServiceStack 的 Soap12ServiceClient 将请求对象发送到使用 ServiceStack.Factory 配置的服务时出现 404 错误

> ID：11127872
> 
> 赞同：3
> 
> 时间：2012-06-20T20:43:07.510
> 
> 标签：c#, asp.net, servicestack

这是我从通用处理程序调用的相关客户端代码：

```
private static readonly IServiceClient Client = new Soap12ServiceClient("http://localhost/MyService/Send");

_serviceRequest = new ServiceRequest
                                 {
                                     String1 = "string1",
                                     String2 = "string2",
                                     String3 = "string3"
                                 };
Client.Send<ServiceResponse>(_rawMessage); 
```

在服务端，我的 web.config 中有以下内容：

```
<system.webServer>
  <handlers>
    <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true"/>
  </handlers>
</system.webServer> 
```

并遵循我的 Global.asax.cs：

```
public class MyServiceAppHost : AppHostBase
    {
        public MyServiceAppHost() : base("My Service", typeof(MyService).Assembly) { }
        public override void Configure(Container container)
        {
            Routes.Add<ServiceRequest>("/Send");
        }
    }

    protected void Application_Start(object sender, EventArgs e)
    {
        new MyServiceAppHost().Init();
    } 
```

最后，MyService 类：

```
public class MyService : IService<ServiceRequest>
{
    public object Execute(ServiceRequest request)
    {
        return new ServiceResponse
        {
            Response = true
        };
    } 
```

这是我的 POCO 课程：

```
[DataContract]
public class ServiceRequest
{
    [DataMember(Order = 1)]
    public string String1 { get; set; }

    [DataMember(Order = 2)]
    public string String2 { get; set; }

    [DataMember(Order = 3)]
    public string String3 { get; set; }
}
[DataContract]
public class ServiceResponse
{
    [DataMember(Order = 1)]
    public bool Response { get; set; }
} 
```

我尝试将我的客户端和服务放在同一个 IIS 服务器（不同的应用程序池/网站）以及不同的服务器上。

如果我通过浏览器访问 url `http://localhost/MyService/Send`，我会在浏览器上得到正确的响应（true），表明服务已启动。但是当我从客户端使用 Soap12ServiceClient 时，我得到“远程服务器返回错误：（404）未找到。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:50:14.693

SOAP 不能使用自定义路由，它只支持 HTTP POSTing SOAP 消息到同一个端点。因此，您应该只将其配置为对所有服务使用基本 url。

# asp.net-mvc - MVC 如何实现两种不同的 post 动作

> ID：11127874
> 
> 赞同：3
> 
> 时间：2012-06-20T20:43:11.453
> 
> 标签：asp.net-mvc

我正在开发这个非常重要的松鼠应用程序。

有一个向导可以将松鼠添加到数据库中。

所以说这个向导有三个屏幕：

1.  松鼠名字详情
2.  身高和体重
3.  坚果储存

因此，在向导的每个步骤中，我都希望将详细信息保存到数据库中。

身高和体重视图如下所示：

```
@model HeightWeightViewModel
@{
    ViewBag.Title = "Height and weight";
}

<h2>Height and weight</h2>

@using (Html.BeginForm()) {

    <h3>Height</h3>
    <div>
        @Html.EditorFor(model => model.Squirrel.Height)
    </div>

    <h3>Weight</h3>
    <div>
        @Html.EditorFor(model => model.Squirrel.Weight)
    </div>
    <input type="submit" value="Previous" />
    <input type="submit" value="Next" />
} 
```

所以我希望上一个和下一个按钮能保存这些细节。保存时的上一个按钮也会将用户带到松鼠名称详细信息页面。Next 将保存并将用户带到坚果存储页面。

我让 Next 按钮使用：

```
public ActionResult Edit(SquirrelViewModel squirrelViewModel)
        {
            _unitOfWork.SaveHeightWeight(squirrelViewModel);

            return RedirectToAction("Edit", "NutStorage", new { id = squirrelViewModel.Squirrel.Id });
        } 
```

因此 Next 按钮保存详细信息并将用户发送到 NutStorage 页面。

上一个按钮与下一个按钮的作用相同，但我实际上希望它在保存后将用户发送到向导的第一步。

我不知道该怎么做。我有另一种方法可以发布到上一个吗？

我无法想象如何实现这一点。

也许我应该使用 ActionLinks 而不是提交按钮，但这不会发布要保存的详细信息。

谁能建议如何获取上一个按钮以保存并将用户发送到向导的第一页，同时仍然具有下一个功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T21:12:46.270

您可以设置提交按钮的名称：

```
<input type="submit" name="direction" value="Previous" />
<input type="submit" name="direction" value="Next" /> 
```

然后将该名称添加为控制器操作的参数并测试它的值以确定要执行的操作：

```
public ActionResult Edit(SquirrelViewModel squirrelViewModel, string direction)
{
    _unitOfWork.SaveHeightWeight(squirrelViewModel);

    if (direction == "Next")
        return RedirectToAction("Edit", "NutStorage", new { id = squirrelViewModel.Squirrel.Id });
    if (direction == "Previous")
        return RedirectToAction("Edit", "SquirrelName", new { id = squirrelViewModel.Squirrel.Id });
    return View();
} 
```

# .net - 自举初始化

> ID：11127879
> 
> 赞同：0
> 
> 时间：2012-06-20T20:43:30.523
> 
> 标签：.net, vb.net

我有两个类，一个继承自另一个。基类是 MustInherit/abstract 并定义了 MustOverride/abstract 属性。

作为基类初始化的一部分，它根据抽象属性的值设置一个变量。问题是继承类接受应该分配给覆盖属性的值作为其参数。继承的类设置此属性，但不是在调用基类的初始化程序之前。

基本上，我需要初始化部分基类，然后让继承类初始化它的一些属性，然后返回基类完成更多属性的初始化。

我会将属性作为基类的一部分，但是继承类使用强类型，而基类只需要一个接口。

代码示例：

```
MustInherit Class A
  MustOverride Property X As IExample

  Sub New()
    ' Do some stuff
    _privateY = X.Foo() ' NullReferenceException
  End Sub
End Class

Class B
  Inherits A

  Override Property X As IExample ' returns StrongX
  Property StrongX As ConcreteExample ' ConcreteExample implements IExample

  Sub New(x As ConcreteExample)
    MyBase.New(x)
    StrongX = x
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:04:12.600

正是出于这个原因，不应在构造函数中调用抽象成员。 [http://msdn.microsoft.com/en-us/library/ms182331(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms182331(v=vs.100).aspx)

如果您可以控制抽象类，我建议您通过基类构造函数传递值。

```
public abstract class A
{
    public A(IExample x)
    {
        // Do Stuff
        var _privateY = x.Foo();
    }
}

public class B : A
{
    public B(IExample x):base(x)    {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:08:21.170

> 编辑：对不起，我的答案是 C# :(

一种选择是让基本抽象类调用子类可以实现的虚拟（或抽象）初始化方法：

```
public abstract class A
{
    public abstract IExample X { get; set; }

    private object _privateY;

    protected A()
    {
        PreInit();

        PostInit();
    }

    protected abstract void PreInit();

    protected virtual void PostInit()
    {
        if (X == null)
            throw new InvalidOperationException("Must assign a value to X.");

        _privateY = X.Foo();
    }
} 
```

然后在 中`B`，覆盖`PreInit`并分配您的数据：

```
public class B : A
{
    public override IExample X { get; set; }

    public B()
    {

    }

    protected override void PreInit()
    {
        X = new ConcreteExample();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:52:07.667

您可以使用`Lazy<T>`：

```
public abstract class A
{
    private Lazy<IExample> _privateY = new Lazy(() => this.X.Foo());
} 
```

# swing - Jpanel 中的组件不遵守大小/位置

> ID：11127887
> 
> 赞同：1
> 
> 时间：2012-06-20T20:43:55.613
> 
> 标签：swing

我在 JPanel 中添加组件时遇到了一些问题，特别是我添加了一个 JButton 和一个 JLabel，但它们似乎并不尊重我给它们的大小和位置。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class test extends JFrame{
    private JPanel panel,panel2;
    private JLabel insMatriz;
    private JButton envMatriz;

    public test(){
        super("Test");
        setLayout(new BorderLayout());
        getContentPane().setBackground(Color.red);

        panel = new JPanel();
        add(panel,BorderLayout.WEST);
        panel.setBackground(Color.blue);

        panel2 = new JPanel();
        add(panel2,BorderLayout.EAST);
        panel2.setBackground(Color.GRAY);

        panel.setPreferredSize(new Dimension(330,300));
        panel2.setPreferredSize(new Dimension(330,300));

        insMatriz = new JLabel();
        panel.add(insMatriz);
        insMatriz.setSize(new Dimension(50,10));
        insMatriz.setLocation(5,5);
        insMatriz.setText("Insert:");

        envMatriz = new JButton();
        panel2.add(envMatriz);
        envMatriz.setSize(new Dimension(100,50));
        envMatriz.setLocation(5,5);
        envMatriz.setText("Submit");

        setSize(700,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:27:41.053

这是因为您正在混合绝对布局和[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)的。在 Swing 中，您有两个选项，您必须为每个组件选择其中一个。试图同时做这两件事总是会遇到麻烦：

1.  您使用绝对布局：这意味着您调用`setLayout(null)`该组件并且您负责子组件的大小和定位。您必须使用 setBounds/setSize-setPosition 来定位和调整子组件的大小。
2.  您使用 LayoutManager（BorderLayout、FlowLayout、GridBagLayout 等），并将定位和调整大小留给 LayoutManager。为了表明您希望如何执行此操作，您选择适当的 LayoutManager，您可能会提供约束并且您有时（但这应该是例外）需要强制最小/最大/首选大小。

我强烈推荐使用[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)，因为它会提供更简洁的组件、更好的跨平台体验、尊重 L&F 特性并且更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:58:23.223

我认为您应该在主面板中插入另一个面板。然后将标签插入内板。

# c++ - c++ 如何从派生类中调用派生类中重载的模板类函数？

> ID：11127890
> 
> 赞同：0
> 
> 时间：2012-06-20T20:44:00.543
> 
> 标签：c++, templates, inheritance, name-hiding

有没有办法在派生类中重载基模板类函数，并且仍然能够调用基类函数，如下所述？

```
template <class A>
class testBase {

public:
  void insert() {
    // Whatever
  }
};

class testDerived : public testBase<double> {
private:

  void insert(int a) {
    // something
  }
};

int main() {

  testDerived B;

  // Compiler doesn't recognize overloaded insert,
  // How do you do this?
  B.insert();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:49:50.293

您遇到的问题称为*name-hiding*。

您可以通过名称限定基类函数来调用它：

```
B.testBase<double>::insert(); 
```

或者通过“取消隐藏”它，通过在派生类中使用 using 声明来声明它：

```
class testDerived : public testBase<double> {
public:
  using testBase<double>::insert;
private:
  void insert(int a) {
    // something
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:49:26.500

添加

```
public:
  using testBase<double>::insert; 
```

的定义`testDerived`。这将使基类的隐藏成员在派生类中可用

# css - 如何在 mac 上的 webkit 中摆脱 html5 搜索输入中的水平填充或缩进？

> ID：11127891
> 
> 赞同：4
> 
> 时间：2012-06-20T20:44:05.657
> 
> 标签：css, html, search, input, padding

仅在 mac 上的 webkit 中，搜索输入中的文本从左侧缩进。[这是一个演示](http://oscorp.net/experiments/search-input/)。即使在去除所有填充、文本缩进和设置`-webkit-appearance`为`textfield`or`none`之后，文本仍然是缩进的。它看起来大约是 10px 左右，但检查器没有显示任何似乎应用此样式的 CSS 规则（甚至是浏览器默认值）。有任何想法吗？

```
<input type="search" value="Search">

-webkit-appearance: textfield;
border: 1px solid #ccc;
padding: 0;
margin: 0;
text-indent: 0; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T21:12:12.977

这是您真正重置 WebKit 中默认样式的方式：

```
input[type="search"] {
    -webkit-appearance: textfield;
}

input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
} 
```

之后，填充问题应该消失了。如果您还想标准化非 WebKit 浏览器中不存在的取消按钮，请添加`input[type="search"]::-webkit-search-cancel-button`为第二条规则的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:07:50.520

默认情况下，基于 WebKit 的浏览器使用边框模型作为 input[type="search"]。如果您使用传统的 box-sizing（如果您没有声明任何其他模型，您就是这样），您可能会遇到奇怪的填充和边框行为。使固定：

```
input[type="search"] {
box-sizing: content-box;
} 
```

至于`-webkit-appearance`- try `textarea`( `textfield`) 和`none`. 无论如何在 iOS 设备上测试您的页面，以确保在输入字段成为焦点后样式不会有所不同（奇怪的行为，可能是错误 - 我正在使用带有 iOS 6.0 的 iPhone 4S）

# android - 按照指南制作相机应用程序，出现错误。安卓-sdk

> ID：11127898
> 
> 赞同：3
> 
> 时间：2012-06-20T20:44:29.517
> 
> 标签：android, camera, mediarecorder

所以我试图按照[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)创建一个简单的应用程序来捕获视频和音频并将文件保存到 sd 卡。并取得成功。在 pro android 4 的帮助下（相当不错的书）

这是带有代码的 github 存储库：[https ://github.com/androidAwesome/Android-Camcorder](https://github.com/androidAwesome/Android-Camcorder)

在 Sam 的帮助下，再次感谢！，我有一个可以自定义的相机应用程序的工作副本。文档有点不稳定，我认为它在 prepareVideoREcorder() 方法中缺少一行。应该有一个 mCamera.stopPreview(); 在调用 mCamera.unlock() 之前。希望没有运气，您应该能够创建一个 android 项目，为 SurfaceView 添加一个类，然后将所有内容复制到这里，并拥有一个可以继续自定义的可工作的摄像机应用程序！

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.camera123.cr"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Camera123"
            android:label="@string/app_name" 

            android:screenOrientation="landscape">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

cameraPreview.java:

```
package com.camera123.cr;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d("DEBUG", "Error setting camera preview: " + e.getMessage());
        }

    }

    public void surfaceDestroyed(SurfaceHolder holder) {

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d("DEBUG", "Error starting camera preview: " + e.getMessage());
        }
    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
  <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

  <Button
    android:id="@+id/button_capture"
    android:text="Capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />
</LinearLayout> 
```

Camera123.java：

```
package com.camera123.cr;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.app.SearchManager.OnCancelListener;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.media.CamcorderProfile;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout;

public class Camera123 extends Activity{
    /** Called when the activity is first created. */
private Camera mCamera;
    private CameraPreview mPreview;
    private MediaRecorder mMediaRecorder;
    private boolean isRecording = false;
    private Button captureButton;

    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);

        captureButton = (Button) findViewById(R.id.button_capture);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);

        captureButton.setOnClickListener(
                new View.OnClickListener() {
                    public void onClick(View v) {
                        if (isRecording) {
                            // stop recording and release camera
                            mMediaRecorder.stop();  // stop the recording
                            releaseMediaRecorder(); // release the MediaRecorder object
                            mCamera.lock();         // take camera access back from MediaRecorder

                            // inform the user that recording has stopped
                            captureButton.setText("Capture");
                            isRecording = false;
                        } else {
                            // initialize video camera
                            if (prepareVideoRecorder()) {
                                // Camera is available and unlocked, MediaRecorder is prepared,
                                // now you can start recording
                                mMediaRecorder.start();

                                // inform the user that recording has started
                                captureButton.setText("Stop");
                                isRecording = true;
                            } else {
                                // prepare didn't work, release the camera
                                releaseMediaRecorder();
                                // inform user
                            }
                        }
                    }
                }
       );
    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera c = null;
        try {
        c = Camera.open(); // attempt to get a Camera instance
        if (c != null){
            Camera.Parameters params = c.getParameters();
            c.setParameters(params);
        }
    }
    catch (Exception e){
        Log.d("DEBUG", "Camera did not open");
        // Camera is not available (in use or does not exist)
    }
        return c; // returns null if camera is unavailable
    }

    private boolean prepareVideoRecorder(){

        mMediaRecorder = new MediaRecorder();

        // Step 1: Unlock and set camera to MediaRecorder
        mCamera.stopPreview();
        mCamera.unlock();
        mMediaRecorder.setCamera(mCamera);

        // Step 2: Set sources
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        // Step 4: Set output file
        mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

        // Step 5: Set the preview output
        mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

        // Step 6: Prepare configured MediaRecorder
        try {
            mMediaRecorder.prepare();
        } catch (IllegalStateException e) {
            Log.d("DEBUG", "IllegalStateException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            Log.d("DEBUG", "IOException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        }
        return true;
    }

    /** Create a file Uri for saving an image or video */
    private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }

    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        } else if(type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "VID_"+ timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaRecorder();       // if you are using MediaRecorder, release it first
        releaseCamera();              // release the camera immediately on pause event
    }

    private void releaseMediaRecorder(){
        if (mMediaRecorder != null) {
            mMediaRecorder.reset();   // clear recorder configuration
            mMediaRecorder.release(); // release the recorder object
            mMediaRecorder = null;
            mCamera.setPreviewCallback(null);
            mCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
        if (mCamera != null){
            isRecording = false;
            mCamera.stopPreview();
        mCamera.setPreviewCallback(null);
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:51:25.997

我猜你需要改变这个：

```
Button captureButton = (Button) findViewById(R.id.button_capture);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);

    setContentView(R.layout.main);
    ... 
```

到：

```
Button captureButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    captureButton = (Button) findViewById(R.id.button_capture);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview); 
```

在您使用 setContentView() 指定要查看的 XML 文件或布局之前，您的 Activity 无法找到视图。

**添加**

您似乎在剪切和粘贴代码时遇到了一些错误。尝试改变这个：

```
super.onCreate(savedInstanceState);

// Create an instance of Camera
mCamera = getCameraInstance(); // Setting this too early!
setContentView(R.layout.main);

// Create our Preview view and set it as the content of our activity.
mPreview = new CameraPreview(this, mCamera);
captureButton = (Button) findViewById(R.id.button_capture);
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
preview.addView(mPreview);

setContentView(R.layout.main); // Duplicate code that will cause lots of trouble 
```

对此：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 

// Create an instance of Camera
mCamera = getCameraInstance();

// Create our Preview view and set it as the content of our activity.
mPreview = new CameraPreview(this, mCamera);
captureButton = (Button) findViewById(R.id.button_capture);
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
preview.addView(mPreview); 
```

如果这有帮助，请将答案标记为正确。如果您有更多错误，请仔细检查您是如何剪切和粘贴代码的，如果您找不到，请随时发布新问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T02:27:59.053

我在 Droid X 2.3.4 上编译并运行了代码，它崩溃了。
它设置*mCamera = null* 因为 getCameraInstance() 在第二次调用时返回 null。
代码中的其他地方不检查 null 所以你会得到错误。
如*CameraPreview：mCamera.startPreview();* 上文提到的。试试这个：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create an instance of Camera
    if(mCamera==null) 
        mCamera = getCameraInstance(); 
```

# python - 在 Pydev/Eclipse 的 python 程序中使用外部 C 库

> ID：11127901
> 
> 赞同：3
> 
> 时间：2012-06-20T20:44:39.887
> 
> 标签：python, c, eclipse, external, pydev

我将 Eclipse + PyDev 用于 Python 项目。我安装了 PyDAQmx，它利用了 DAQmx 的 C 库。但是，每当我从该文件调用任何函数或引用任何常量时，尽管导入了必要的部分，我都会收到“未定义变量”错误。该程序运行得很好，所以我相信这是 Eclipse/PyDev 没有与 C 库链接。我已将它作为外部库包含在内，但我仍然遇到同样的错误。

这是一个代码示例。如果我运行它，这是有效的并且工作正常，但是试图寻找实际错误，Eclipse 总是告诉我它有未定义的变量，这很烦人。

```
from PyDAQmx.DAQmxFunctions import *
from PyDAQmx.DAQmxConstants import *

counter="Dev1/ctr0"
DAQmxResetDevice(counter.split('/')[0]) 
```

我需要做什么才能让 Eclipse 对我使用这些函数/常量感到满意？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:31:28.580

您想要做的是强制 PyDev 通过实际导入模块并使用来获取模块内容`dir()`，而不是尝试使用它的解析器（它无法查看已编译的扩展）。这适用于许多扩展模块，因此希望它也适用于 PyDAQmx。

为此，您需要将这些模块添加到“强制内置”列表中。可以从以下位置访问此列表：

```
Windows -> Preferences -> PyDev -> Interpreter -> Python -> Forced Builtins 
```

# jquery-ui - jquery-wysiwym 编辑器中的可拖动按钮栏

> ID：11127906
> 
> 赞同：1
> 
> 时间：2012-06-20T20:44:54.257
> 
> 标签：jquery-ui, jquery-ui-draggable, jwysiwyg

我正在尝试构建一个从[本教程](http://pushingkarma.com/projects/jquery-wysiwym/)学习[的降价编辑器](http://editortest.comule.com/)。大多数情况下，我只是调整了一些 CSS。

我尝试使用[此博客文章](http://woork.blogspot.com/2009/02/ultra-small-code-to-drag-everything-in.html)使按钮面板可拖动。但是在添加该代码后，编辑器停止工作。

在头部（在所有 js 文件之后）：

```
$(function() {  
      $('#pad').wysiwym(Wysiwym.Markdown,{ helpEnabled: true, helpToggle: true });
       $('#draggables div').each(function(drag){new Drag.Move(drag);});
}); 
```

在正文部分：

```
<div id='draggables'>
<textarea id = 'pad' wrap="off" >
</textarea>
</div> 
```

Textarea 被转换为`Wysiwym.Markdown`编辑器。转换后的按钮被添加`div`在`textarea`. 根据博客，这`div`应该是可移动的。但相反，插件停止工作，即`textarea`未转换为编辑器。

基本思想是使按钮栏可移动，以便用户可以根据自己的方便使用它。[类似于 aloha-editor 的主屏幕上的东西。](http://aloha-editor.org/)面板是可移动的，但它`textarea`是固定的。为什么它不起作用？

# javascript - .click() 和实际单击按钮之间的区别？(javascript/jQuery)

> ID：11127908
> 
> 赞同：25
> 
> 时间：2012-06-20T20:45:01.727
> 
> 标签：javascript, jquery, button, click

我试图弄清楚我一直遇到的这个奇怪的问题，根本原因是**实时点击和触发之间的区别`.click()`**。

我不会深入讨论问题的细节，但基本上当你点击输入按钮时它工作正常（有一个`onclick`事件）。但是，如果我`.click()`从其他地方打电话（而不是物理单击按钮），它就不能正常工作。

我的问题是 - 有没有办法真正复制按钮的实际点击？

* * *

***编辑***

问题：我正在打开一个加载内联 PDF 的新窗口（aspx 页面）。**如果我真的点击链接，窗口会打开并加载 PDF。如果我使用`.click()`该窗口打开并提示我下载 PDF 文件。**我已经通过有关提示的 Adob​​e Reader 设置、浏览器设置和注册表设置 - 我知道这些可能是影响大局的因素，但现在我担心为什么鼠标单击和 .click( ) 正在做任何不同的事情。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T20:59:12.687

在阅读以下讨论如何规避问题的内容之前，让我更全面地回答您开始遇到问题的原因：

现代浏览器根据您单击的鼠标按钮、是否按住`Shift`/ `Ctrl`/等对链接采取不同的操作`Alt`。例如，在 Chrome 中，如果您中键单击链接而不是左键单击，浏览器将自动在新选项卡中打开窗口。

当您使用 时`.click()`，jQuery 必须对您单击的“方式”做出假设-并且您会得到默认行为-在您的情况下，这不是正确的行为。您需要以设置的形式为浏览器指定“正确”的设置`MouseEvents`才能解决问题。

现在，对修复它的方法进行简短讨论：

当您使用`.click()`不带参数的 jQuery 事件时，这实际上并不是对相关元素“假装点击”。相反，根据[http://api.jquery.com/click/](http://api.jquery.com/click/)上的 jQuery 文档：

> ...当`.click()`不带参数调用时，它是 .trigger("click") 的快捷方式

这意味着当您触发时`$('#div1').click()`- 如果事件没有实际的 jQuery 处理程序`'click'`，您将获得默认处理。因此，请考虑以下两种情况：

**案例一**：

```
<a id='myLink' href='/some/link/'>Click me!</a>
<script type='text/javascript'>
    $('#myLink').click();
</script> 
```

在第一个场景中，`.click()`调用什么也不做，因为它没有处理程序。事件触发，但没有任何东西可以捕捉和响应 - 因此使用`a`标签的默认处理，并且用户被带到`/some/link/`- 而且由于您没有指定哪个鼠标按钮或任何其他参数 - 它是真正的默认值。

**案例2**：

```
<a id='myLink' href='/some/link/'>Click me!</a>
<script type='text/javascript'>
    $('#myLink').bind('click', function (ev) {
        ev.preventDefault();
        ev.stopPropagation();

        alert('you clicked me!');
    }).click();
</script> 
```

在这种情况下，因为`click`创建了一个处理程序，所以当用户单击链接时 -`ev.preventDefault()`和`ev.stopPropagation()`调用将停止发生默认处理，并且将触发警报。

但是，此时您有一个`ev`代表`MouseEvents`- 的对象，您可以根据需要更改设置。例如，您可以执行以下操作：

```
ev.altKey = true; // Held Alt
ev.button = 1;    // Middle Mouse Button 
```

这些设置将更改处理事件的默认方法。

**替代的非 jQuery 解决方案**

您还可以通过修改以下代码来真正模拟按钮单击。

```
function fakeClick(event, anchorObj) {
  if (anchorObj.click) {
    anchorObj.click()
  } else if(document.createEvent) {
    if(event.target !== anchorObj) {
      var evt = document.createEvent("MouseEvents"); 
      evt.initMouseEvent("click", true, true, window, 
          0, 0, 0, 0, 0, false, false, false, false, 0, null); 
      var allowDefault = anchorObj.dispatchEvent(evt);
      // you can check allowDefault for false to see if
      // any handler called evt.preventDefault().
      // Firefox will *not* redirect to anchorObj.href
      // for you. However every other browser will.
    }
  }
} 
```

（有关更完整的实现，请参阅原帖：[如何模拟对锚标记的点击？](https://stackoverflow.com/questions/1421584/how-can-i-simulate-a-click-to-an-anchor-tag/1421968#1421968) - 并查看所选答案）

这实际上会使浏览器相信您通过以与浏览器的默认处理程序相同的方式从头开始构建事件来单击鼠标单击锚点/跨度/等 - 除了您可以覆盖某些设置。但是，我不建议使用这种方法，因为它更容易在跨浏览器应用程序上中断，并且您必须弄清楚所有参数映射到什么。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-20T20:47:48.513

我使用这个函数来真正模仿鼠标点击：

```
function clickLink(link) {
    var cancelled = false;

    if (document.createEvent) {
        var event = document.createEvent("MouseEvents");
        event.initMouseEvent("click", true, true, window,
            0, 0, 0, 0, 0,
            false, false, false, false,
            0, null);
        cancelled = !link.dispatchEvent(event);
    }
    else if (link.fireEvent) {
        cancelled = !link.fireEvent("onclick");
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-18T06:38:31.597

```
 $('img').click(function(event){
    console.log(event.hasOwnProperty('originalEvent')); // output : true

  });
  $('img').trigger("click",function(event){
    console.log(event.hasOwnProperty('originalEvent')); // output : false

 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-25T08:53:50.417

要创建和触发与 user-click 相同的点击事件：

```
function simulateClick() {
  var event = new MouseEvent('click', {
    view: window,
    bubbles: true,
    cancelable: true
  });
  var cb = document.getElementById('checkbox');  //whichever element you want to click
  var cancelled = !cb.dispatchEvent(event);
  if (cancelled) {
    // A handler called preventDefault.
    alert("cancelled");
  } else {
    // None of the handlers called preventDefault.
    alert("not cancelled");
  }
} 
```

当然，像这样调用函数。

```
simulateClick(); 
```

来源：[https ://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events)

注意：不推荐使用 initMouseEvent()。避免使用它，而是使用 MouseEvent() ，如本解决方案所示。

# perl - 用perl将sqlite查询结果保存在excel中

> ID：11127909
> 
> 赞同：1
> 
> 时间：2012-06-20T20:45:11.863
> 
> 标签：perl, excel, sqlite

我有以下 perl 代码来执行 sqlite 查询并将结果保存在文本文件中。但我想将结果保存在 Excel 表中。有什么办法可以做到吗？

```
#!/usr/local/bin/perl -w
use strict;
use DBI;
my $dbfile = 'C:\usage.db3';      # your database file
my $dbh = DBI->connect(          # connect to your database, create if needed
    "dbi:SQLite:dbname=$dbfile", # DSN: dbi, driver, database file
    "",                          # no user
    "",                          # no password
    { RaiseError => 1 },         # complain if something goes wrong
) or die $DBI::errstr;

#use Data::Dump::Streamer;

my $array1 = $dbh->selectall_arrayref("SELECT  USR.id,USR.name, ST.license FROM users USR, status ST, upd_ate UD WHERE UD.upt_id = (select max(p2.upt_id) from upd_ate p2) AND ST.id = USR.id AND ST.upt_id = UD.upt_id ORDER BY ST.license,USR.name");

open FILE, ">btc.txt" or die $!;

foreach my $Ilink (@$array1) {
my ($id, $name, $license) = @$Ilink;
print FILE "$id|$name|$license\n";
}
close FILE; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:29:05.313

我使用[Excel::Template](https://metacpan.org/module/Excel%3a%3aTemplate)模块实现了一些类似的目标：在我们的项目中，我们必须创建数百（甚至数千）个 .xls 格式的电子表格。这些电子表格具有相同的布局，但当然，内部的数据非常不同。)

我喜欢这个模块的总体思路：您创建一个模板文件（我们称之为`license.xml`），如下所示：

```
<workbook>
  <worksheet name="licenses">
    <loop name="license_data">
      <row>
        <cell text="$id"></cell>
        <cell text="$name"></cell>
        <cell text="$license"></cell>
      </row>
    </loop> 
  </worksheet>
</workbook> 
```

...然后将一些数据传递给它，如下所示：

```
use strict;
use Excel::Template;

my $template = Excel::Template->new(
    filename => 'license.xml',
);

$template->param('license_data' => [
  { id => 1, name => 'John Doe', license => '77-77-7' },
  { id => 2, name => 'Jack Right', license => '88-88-8' }
]);

$template->write_file('license.xls'); 
```

……瞧！在此脚本的工作结束时，您有一个完整的 XLS 文件。)

**更新：**很久以前，我在这篇文章的第一版中完全弄乱了模板的语法。:( 现在它工作正常，我已经检查过了。)

此外，我还想提一下 Excel::Template 的能力有些有限（例如，插入合并单元格是一个非常复杂的过程）。我读过[Excel::Template::Plus](https://metacpan.org/module/Excel%3a%3aTemplate%3a%3aPlus)的能力更强，但还没有找到真正的任务来练习它。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:22:00.270

我使用[DBI_to_Excel.pm](https://github.com/mishin/presentation/blob/master/4_trans/DBI_to_Excel.pm "DBI_to_Excel.pm")和[from_dbi_to_excel.pl](https://github.com/mishin/presentation/blob/master/4_trans/from_dbi_to_excel.pl "from_dbi_to_excel.pl")使用[fbs_load.yml](https://github.com/mishin/presentation/blob/master/4_trans/fbs_load.yml "fbs_load.yml")

# mysql - “WHERE IN (...)”的替代方案？

> ID：11127910
> 
> 赞同：0
> 
> 时间：2012-06-20T20:45:16.533
> 
> 标签：mysql

我有一个正在进行中的项目，它开始时非常小并且发展得很快，因此有点失控（在组织良好和深思熟虑方面）。

无论如何，我们有一个系统可以跟踪用户活动、记录 UUIDS 以及特定的联系活动，我们使用它来生成关于客户在网站上查看的确切内容的信息。很标准。无论如何，它变得有点复杂和缓慢，我希望能帮助优化查询。

我确信有比我目前使用的更好的方法（也许使用 JOINS），但我似乎无法理解它。一些帮助将不胜感激。相关信息如下。

谢谢。

**表：visitor_activity**

```
创建表`visitor_activity`（
 `vaid` int(11) NOT NULL AUTO_INCREMENT,
 `uuid` varchar(128) 默认为空，
 `ip_address` varchar(15) 默认为 NULL，
 `datetime` 日期时间 DEFAULT NULL，
 `url` varchar(255) 默认为空，
 `user_agent` varchar(255) 默认为空，
 主键（`vaid`），
 KEY `uuid` (`uuid`),
 KEY `ip_address` (`ip_address`)
) 引擎=MyISAM AUTO_INCREMENT=70134 默认字符集=utf8
```

**表：contact_uuids**

```
创建表`contact_uuids`（
 `contact_id` int(11) NOT NULL DEFAULT '0',
 `uuid` varchar(128) NOT NULL DEFAULT '',
 主键（`contact_id`，`uuid`），
 KEY `contact_id`（`contact_id`），
 KEY `uuid` (`uuid`)
) 引擎=MyISAM 默认字符集=utf8
```

**表：contact_log**

```
创建表`contact_log`（
 `contact_log_id` int(11) NOT NULL AUTO_INCREMENT,
 `contact_id` int(11) 非空，
 `datetime` 日期时间不为空，
 `action` varchar(128) NOT NULL,
 `performed_by` varchar(64) NOT NULL,
 `ip_address` varchar(15) NOT NULL,
 主键（`contact_log_id`），
 KEY `contact_id`（`contact_id`），
 KEY `ip_address` (`ip_address`),
 KEY `performed_by` (`performed_by`)
) 引擎=MyISAM AUTO_INCREMENT=9017 默认字符集=utf8
```

**当前 SQL 语句：**

```
SELECT DISTINCT(`va`.`vaid`),
         `va`.`datetime`,
         `va`.`uuid`,
         `va`.`ip_address`,
         `va`.`url`
FROM `visitor_activity` `va`
WHERE `va`.`uuid` IN (SELECT `uuid` FROM `contact_uuids` `cu` WHERE `cu`.`contact_id` = '1') ||
         `va`.`ip_address` IN (SELECT DISTINCT(`ip_address`) FROM `contact_log` `cl` WHERE `cl`.`contact_id` = '1' && `performed_by` = 'Contact'）
ORDER BY `va`.`datetime` DES
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:38:47.020

将查询拆分为两个选择以连接不同的表，然后用于`union`连接所有数据。查询可能如下所示：

```
(SELECT   DISTINCT(`va`.`vaid`),
     `va`.`datetime`,
     `va`.`uuid`,
     `va`.`ip_address`,
     `va`.`url`
FROM     `visitor_activity` `va`,`contact_uuids` `cu`
WHERE    `va`.`uuid`=`cu`.`uuid`
and `cu`.`contact_id` = '1')
UNION
(SELECT   DISTINCT(`va`.`vaid`),
     `va`.`datetime`,
     `va`.`uuid`,
     `va`.`ip_address`,
     `va`.`url`
FROM  `visitor_activity` `va`,`contact_log` `cl`
where `va`.`ip_address` = `cl`.`ip_address` 
and `cl`.`contact_id` = '1' and `performed_by` = 'Contact')
ORDER BY datetime DESC 
```

# json - WCF 将字典转换为 JSON 数组

> ID：11127914
> 
> 赞同：1
> 
> 时间：2012-06-20T20:45:27.200
> 
> 标签：json, wcf, dictionary

为什么 WCF 将 Dictionary 或 Hashtable 都转换为具有键/值对的对象数组？是否有解决此问题的设置，以便生成的 json 对象是真正的 javascript 字典？

我应该能够使用生成的 json 对象来做到这一点。

```
myObject["MyKey"] 
```

班上：

```
[DataContract]
public class BasicData
{
    [DataMember]
    public Dictionary<string, string> Values { get; set; }
} 
```

输出：

```
"Values":[{"Key":"Date","Value":"2012-06-20T17:37:46.48Z"}...] 
```

# java - Java jList基于组合框选择添加项目

> ID：11127917
> 
> 赞同：0
> 
> 时间：2012-06-20T20:45:42.387
> 
> 标签：java, swing, csv, jcombobox, jlist

我的程序中正在加载一个 csv 文件。它包含城市和地区以及其他一些东西（这里不重要）。选择 csv 后，我将数据加载到几个组合框中。

1 事情不正常，我有一个包含所有城市的组合框，现在我需要根据从组合框中的选择列出该国家/地区的所有地区。

这是事件：

```
 private void cboProvinciesItemStateChanged(java.awt.event.ItemEvent evt) {                                               
   //System.out.println(Arrays.asList(gemeentesPerProvincie(gemeentes)));
    invullenListProvincie(gemeentes);
} 
```

这是方法：

```
 private void invullenListProvincie(ArrayList<Gemeentes> gemeentes) {

    Gemeentes gf = (Gemeentes) cboProvincies.getSelectedItem();
    DefaultListModel model = new DefaultListModel();
    JList list = new JList(model);

    for (Gemeentes gemeente : gemeentesPerProvincie(gemeentes)) {
        model.addElement(gemeente);
    }

    lstGemeentes.setModel(model);

} 
```

这是过滤所有等于组合框中选择的区域的方法：

```
 private ArrayList<Gemeentes> gemeentesPerProvincie(ArrayList<Gemeentes> gemeentes) {

    String GemPerProv = (String) cboProvincies.getSelectedItem();
    ArrayList<Gemeentes> selectie = new ArrayList<Gemeentes>();
    for (Gemeentes gemeente : gemeentes) {
        if (gemeente.getsProvincie().equals(GemPerProv)) {
            selectie.add(gemeente);
        }
    }

    return selectie;
} 
```

我确信错误是我尝试将项目添加到 jList gemeentesPerProvincie() 的方式，我已经尝试了很多东西。我真的希望有人能看到我明显缺少的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:04:39.320

*   use [AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968) instead of plain [JCombobox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

*   use [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html) with one Column (maybe without `JTableHeader`)

*   create [TableMode](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)l with two Columns, cities and areas, then both `JComboBox` and `JTable` have got the same data, from `JTable` to remove Column cities (`JTable.removeColumn()` is only about `JTables view`, data are still presents in the `TableModel`)

*   add [RowFilter to JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting) to the Column contains cities, output to the `JTables view` will be only areas for cities,

*   value for `RowFilter` will be became from `JComboBox.getSelectedItem`

*   data for `JCombobox` are from `TableModel`

# html - 如何让我的 HTML 页面自动适应移动用户？

> ID：11127920
> 
> 赞同：11
> 
> 时间：2012-06-20T20:45:52.170
> 
> 标签：html, mobile

有没有一种简单的方法可以让 HTML 页面为手机用户自动调整？我的页面：[http](http://www.xiexianhui.com/baxjoomla15/index0.html) ://www.xiexianhui.com/baxjoomla15/index0.html显然不适合我的索尼 xperia ray 手机。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-20T20:53:45.950

您应该首先了解[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)的概念。太多了，这个问题太笼统了，无法回答所有问题。但简而言之，它需要 3 个组件：

1.  媒体查询，为不同的屏幕尺寸提供不同的 css 样式。
2.  流畅的 css 网格，因此网站的布局会自动适应屏幕的大小。
3.  灵活的图像，因此所有图像都可以流畅地缩小，因此它们不会与内容容器重叠。

如果您只想让您的网站在手机屏幕上完整呈现，则必须使用[viewport 元标记](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)。把它放在`<head>`你的页面中：

```
<meta name="viewport" content="width=device-width"> 
```

您的页面将完全适合屏幕。但是你会注意到现在所有东西都非常小而且不可用。响应式网页设计就是解决这个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:00:56.203

背负已经说过的内容：WURFL，[http](http://wurfl.sourceforge.net/) : //wurfl.sourceforge.net/，无线通用资源文件，是一个设备描述存储库 (DDR)，即一个将 HTTP 请求标头映射到配置文件的软件组件发出请求的 HTTP 客户端（台式机、移动设备、平板电脑等）的名称。

一条捷径：准备 3 种不同的布局，涵盖基本的旧手机、新的彩色手机以及高级功能手机和 PDA。这是一项相当简单的任务，同时提供了很好的结果。我也会看看这个链接。[http://mobiforge.com/developing/story/introduction-wurfl](http://mobiforge.com/developing/story/introduction-wurfl)

# google-apps-script - 将 K 列中具有给定值的一张工作表中的每一行数据复制到另一张工作表

> ID：11127923
> 
> 赞同：0
> 
> 时间：2012-06-20T20:46:01.927
> 
> 标签：google-apps-script

我正在研究一个谷歌电子表格，它将使用一个脚本将每一行数据从一张在 K 列中具有“过去 30 天完成”的工作表复制到另一张工作表。

“工作表”是指每个选项卡。源选项卡是“Arley” 目标选项卡当前是“ArleysSandbox” 每行都有 ll 列，AK。整行应结转。工作表中的总行数将随着时间的推移而增加。每次我运行脚本时，我都希望它首先清除“ArleysSandbox”上的所有现有数据。K 列显示“过去 30 天内完成”是一个公式。我最终会想要从多个工作表中提取并在沙箱工作表上进行编译。

我使用旧论坛的帖子作为起点，但由于缺乏知识而陷入困境。[http://productforums.google.com/forum/#!msg/apps-script/FNGzVkEqZh4/x8WCYtjvpI8J](http://productforums.google.com/forum/#!msg/apps-script/FNGzVkEqZh4/x8WCYtjvpI8J)提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-30T09:33:23.407

```
//Find current filter and remove     
var currentFilter = master_sheet.getFilter();
      if ( currentFilter !== null ) {
        master_sheet.getFilter().remove();
      } 
     var master_lr=master_sheet.getLastRow();
     var master_lc=master_sheet.getLastColumn();

//Apply filter here
      master_sheet.getRange(1,1,master_lr,master_lc).createFilter();
      var criteria = SpreadsheetApp.newFilterCriteria().setHiddenValues(['Reject','Approved']).build();
      master_sheet.getFilter().setColumnFilterCriteria(45, criteria);

      master_sheet.getFilter().getRange().copyTo(harmonize_approvers.getRange(1,1,master_lr-1,master_lc), SpreadsheetApp.CopyPasteType.PASTE_NORMAL, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:56:34.547

不要被冒犯，但我认为这个论坛不是一个可以免费获取应用程序的市场，它应该为试图自己获得结果的人们带来答案。

也就是说，这是一个“骨架”，应该让你走上正确的轨道，我试图用评论解释发生了什么。（没有测试，可能需要调试）

```
function copy2(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = SpreadsheetApp.setActiveSheet(ss.getSheets()[0]); selects the first sheet in your spreadsheet
  var data=sh.getDataRange().getValues();// data is a 2D array, index0 = col A
  // so column k is index 10
  var target=new Array();// this is a new array to collect data
  for(n=0;n<data.length;++n){ // iterate in the array, row by row
    if (data[n][10]=="Done In The Past 30 Days"){ ;// if condition is true copy the whole row to target
    taget.push(data[n]);// copy the whole row
    }
    }
    if(target.length>0){// if there is something to copy
  var sh2=SpreadsheetApp.setActiveSheet(ss.getSheets()[1]); //second sheet of your spreadsheet
  sh2.getRange(1,1,target.length,target[0].length).setValues();// paste the selected values in the 2cond sheet in one batch write
  }
} 
```

# ruby-on-rails - 在 js.erb 文件中渲染部分

> ID：11127934
> 
> 赞同：49
> 
> 时间：2012-06-20T20:46:32.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试创建一个基于 ajax 的评论表单，它会在提交时更新我的​​评论列表。很基本的东西。

我有一个部分`comments/_single.html.haml`，它有一个`<li>`带有基本评论信息的标签，这是我的`comments/create.js.erb`文件（实际上这是三个不同的测试文件合并为一个，向您展示我的问题是什么）：

```
$('#comments ul.comments').append("<%= render :partial => 'comments/single', :locals => { :c => @comment } %>");
$('#comments ul.comments').append("<%= render :partial => 'comments/foobar' %>");
$('#comments ul.comments').append("foobar");
alert('foobar'); 
```

的内容`comments/_foobar.html.haml`只是`foobar`，里面没有html。我的问题是前两行不起作用。我的开发服务器控制台中没有错误，对象检查器说注释代码已正确返回，但它们没有添加到我的注释列表中。第三行工作正常，所以第四行。使用起来似乎有一些问题`render`。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-20T21:30:30.140

在 Javascript 代码中渲染局部时，你应该使用 escape_javascript 方法，像这样

```
$('#comments ul.comments').append("<%= escape_javascript render(:partial => 'comments/single', :locals => { :c => @comment }) %>"); 
```

这个方法别名为j，所以你也可以这样做

```
$('#comments ul.comments').append("<%= j render(:partial => 'comments/foobar') %>"); 
```

> 该方法为 JavaScript 段转义回车和单引号和双引号 *[ActionView::Helpers::JavaScriptHelper Rails docs](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript)*

# c# - 无法使用 C# 访问 sqlserver.dts.runtime 中的 Collections.Item 属性

> ID：11127937
> 
> 赞同：0
> 
> 时间：2012-06-20T20:46:51.290
> 
> 标签：c#, .net, sql-server, vb.net

我最近实现了一个解决方案来获取一个 SSIS 包并使用 VB.net 重新配置包的连接字符串。代码很简单：

```
 Const packageLocation As String = "C:\mylocation"
    Dim app As New Application
    Dim pkg = app.LoadPackage(packageLocation, Nothing)

    pkg.Connections.Item(0).ConnectionString = "Data Source=MySource" 
```

我需要用 C# 编写相同的代码，因为那是我们 QA 团队的母语，但是我似乎无法访问 Item 属性：

```
 const string PackageLocation = @"C:\MyLocation";
     Application app = new Application();
     Package pkg = app.LoadPackage(PackageLocation, null);

     pkg.Connections.Item(0).ConnectionString = "Data Source=Mysource"; 
```

我不明白为什么我不能在我的代码的 C# 版本中访问 Connections.Item，但我可以使用 VB 版本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:49:11.947

在 C# 中，数组语法使用方括号：

```
pkg.Connections.Item[0].ConnectionString = "Data Source=Mysource"; 
```

或者，因为`Item`似乎是`Connections`该类的默认索引器，所以完全不考虑它：

```
pkg.Connections[0].ConnectionString = "Data Source=Mysource"; 
```

# java - 分隔来自套接字的数据

> ID：11127939
> 
> 赞同：3
> 
> 时间：2012-06-20T20:47:01.543
> 
> 标签：java, sockets, networking

在我的 Java 应用程序中，打开了一个 Socket，并且正在从其 InputStream 中读取数据。

在最佳条件下，每个传入的数据包都会调用 read() 返回其应用层数据。这就是我想要得到的 - 每个**数据包**一个“消息” 。

但是，数据可能会根据 getReceiveBufferSize() 返回的内容在套接字中缓冲。如果发生这种情况并从中读取流，则可能存在来自多个数据包的数据。

是否有另一种方法可以从单个数据包中获取数据，或者这是否违反了抽象层？或者，是否可以为数据附加到缓冲区设置某种分隔符？还是平台级别的事情无法完成？

这是一些示例代码来演示我在做什么：

```
import java.io.InputStream;
import java.net.Socket;

public class Belnets {

public Belnets() {
    try{
        Socket s = new Socket("address", 23);
        System.out.println("platform will buffer this much: "+s.getReceiveBufferSize());
        InputStream sin = s.getInputStream();
        byte[] data = new byte[1024];
        int c;
        while(true){
            c = sin.read(data);
            for(int i=0; i<c; i++){
                System.out.print((char)data[i]);
            }
            System.out.println("=END OF READ=");

            //if you dont do this, read() seems to return once for each packet as this loop 
            //appears to be running fast enough to keep up with the rate of data that comes in.
            //otherwise data gets buffered and you get multiple packets worth of data before seeing
            //=END OF READ=
            Thread.sleep(1000);     

        }

    }catch(Exception e){
        e.printStackTrace();
    }
}   

public static void main(String args[]){
    new Belnets();
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:02:04.610

Java API 不提供任何读取 TCP 数据包的方法。它是基于流的，您绝对无法一次读取一个数据包。

如果要发送和接收多条消息，则需要实现应用程序级协议，例如，该协议可能在消息之间使用特定的分隔符，或者发送消息的长度后跟消息体本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T03:43:50.943

> 在最佳条件下，每个传入的数据包都会调用 read() 返回其应用层数据。

不，这不是“最佳条件”，这纯粹是运气。Java 或底层 BSD 套接字 API 或 TCP RFC 中没有任何内容赋予任何依赖该行为的权利。TCP是流协议，句号，API是字节流API，也是句号。

如果您想要应用程序消息或数据包，您必须自己实现它们，通过：

1.  为每条消息添加一个长度字的前缀。
2.  使用更高级别的协议，例如对象序列化、XDR 等。
3.  使用自描述协议，例如 XML、JSON 等。

在每种情况下，您都必须在接收器处循环读取，直到您获得整个消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:04:15.917

您的 while 循环需要更改：

```
while (true) {
    c = sin.read(data);
    if (c < 0)
        break;    // quit if there's nothing else to read.
    for(int i=0; i<c; i++){
        System.out.print((char)data[i]);
    }
...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T21:11:31.547

尝试读取 TCP 数据包实际上是不可能的，也不是一个好主意。TCP 是基于流的，这意味着不能保证所有内容都会同时发送/接收。您可能会考虑使用 UDP（它不太可靠，但所有内容都会立即发送），或者提出您自己的定界方案。（一种流行的方法是发送“数据包”的长度，然后是实际数据包本身。）

# jsf - Omnifaces CombinedResourceHandler -- 有没有办法抑制某些资源？

> ID：11127942
> 
> 赞同：3
> 
> 时间：2012-06-20T20:47:08.537
> 
> 标签：jsf, jsf-2, omnifaces, combinedresourcehandler

我将 Omnifaces 1.0 与 Richfaces 4.0 结合使用。通常，我会抑制 Richfaces 包含的一些 css/js，因为它是不必要且笨拙的。我通过为渲染器类型 javax.faces.resource.Script 或 javax.faces.resource.Stylesheet 定义自定义渲染器来做到这一点。

当我启用 org.omnifaces.resourcehandler.CombinedResourceHandler 时，一些以前被抑制的 CSS 似乎正在合并。有没有办法定义我想从 ResourceHandler 中排除的资产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:22:19.407

未提供此功能，但理论上可以通过提供特殊的上下文参数并更改`CombinedResourceHandler`以将它们排除在组合之外。

就像是：

```
<context-param>
    <param-name>org.omnifaces.COMBINED_RESOURCE_HANDLER_EXCLUDED_RESOURCES</param-name>
    <param-value>libraryName:resourceName1.ext,libraryName:resourceName2.ext</param-value>
</context-param> 
```

或者，另一种可能性是实际抑制它们，这样您就不需要自定义渲染器来抑制它们：

```
<context-param>
    <param-name>org.omnifaces.COMBINED_RESOURCE_HANDLER_SUPPRESSED_RESOURCES</param-name>
    <param-value>libraryName:resourceName1.ext,libraryName:resourceName2.ext</param-value>
</context-param> 
```

如果您打开一个新功能请求，那么它很可能会被实施。

# mysql - 连接到 MySQL 中的 Web 服务/API？

> ID：11127943
> 
> 赞同：3
> 
> 时间：2012-06-20T20:47:10.750
> 
> 标签：mysql, sql, web-services

我正在创建一个基于 sql 的过程，它可以

1.  接受一张桌子
2.  一次加载一个值
3.  将变量发送到远程 API
4.  记录 API 的响应
5.  将响应写入表格以供稍后查看

我已经成功地实现了 1,2 和 5。我希望有一些方法可以选择联系地址，并且 SQL 也可以监听响应。如果您有任何建议，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:04:43.797

如果不使用用户定义的函数扩展 MySQL 服务器，MySQL 无法使用在服务器上执行的 SQL 代码来执行此操作。

其他一些 SQL 表服务器（例如 PostgreSQL、Microsoft SQL Server、Oracle）可以使用存储过程来实现这一点。但是，从驻留表服务器的代码访问网络资源（如 API）是一项棘手的工作，因为这些资源可能会超时或以其他方式失败。

当您在表服务器中运行它时，这种事情是一个总要调试的毛球。

您最好编写一大块客户端代码（我的意思是作为 MySQL 服务器客户端的代码）来执行此操作。有很多语言可以很容易地支持这一点，包括 python、php、PERL、C#、Java 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:05:13.207

MySQL 调用 Web 服务的唯一方法是通过自定义 UDF。

请参阅下面的链接，但基本上您需要做的是构建一个 C 程序，该程序将使用变量作为参数调用远程 Web 服务 API，通过 UDF 将响应返回到您的实际 SQL，该 SQL 可以将结果插入表中。不过，这是一项相当多的工作，尤其是如果您对 C 完全不熟悉的话。

[http://www.codeguru.com/cpp/data/mfc_database/misc/article.php/c12615/MySQL-UDFs.htm](http://www.codeguru.com/cpp/data/mfc_database/misc/article.php/c12615/MySQL-UDFs.htm)

# jquery - jQuery 切换收音机/父样式也将切换不同名称的相邻收音机

> ID：11127944
> 
> 赞同：0
> 
> 时间：2012-06-20T20:47:12.050
> 
> 标签：jquery, toggle, radio, removeclass, closest

首先让您了解我的 HTML 是什么样的，我有一个包含 3 组单选按钮的页面，每组单选按钮由它们的容器命名（即 Page1、Page2、Page3）。所以第一组无线电都共享名称“page1”，第二组共享名称“page2”，依此类推。

所以我使用jQuery来切换单选按钮和该单选包含表的类（即addClass，removeClass on toggle）。切换工作正常，在切换上添加和删除类也是如此。我的问题是，如果我选择了 page2 或 page3 中的收音机，然后选择/重新选择 page1 收音机，jQuery 将删除 page2 和 page3 选中收音机样式的类。

这是[JSfiddle 演示的链接。](http://jsfiddle.net/stevenschemers/5YnBq/)

下面来看看我正在使用的 jQuery。

```
$(function() {

$('table').click(function(event) {
    $(this).closest('.container').addClass('selected').parent().siblings().each(function() {
        $(this).find('.container').removeClass('selected');
    });

    if(event.target.type != "radio") {

        var that = $(this).find('input:radio');

        that.attr('checked', !that.is(':checked'));

        if (that.is(':checked'))  {
        that.closest('table').addClass('selected');
    }
   else {
        that.closest('table').removeClass('selected');
}
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:03:53.207

正在`.parent().siblings()`拾取其他页面，因为`div`如果您添加它可以解决问题[http://jsfiddle.net/5YnBq/1/ ，那么您没有第 1 页左右](http://jsfiddle.net/5YnBq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:04:03.250

好吧，我对此不是 100%，但请尝试 event.preventDefault();

我认为它正在冒泡，所以当它以 input:radio 为目标时，它使用最外面的表，因此它基本上会针对所有单选按钮。我没有对此进行测试，因为单击继续后小提琴对我不起作用，但试一试，看看会发生什么

# directx - DirectX Demo 不在屏幕上绘制任何内容

> ID：11127945
> 
> 赞同：1
> 
> 时间：2012-06-20T20:47:15.507
> 
> 标签：directx, directx-11

我现在正在学习 DirectX 11，并且正在尝试“开始 DirectX 11 编程”一书中的演示之一。我按照书籍指南制作了一个处理窗口创建和销毁的基类（包括 d3d11 设置）。所有其他演示都基于这个类。所以我正在编写 Triangle 演示，其目的是绘制一个 2d 三角形。下面是 Triangle 类的实现：

```
#include "Triangle.h"

Triangle::Triangle(void): mVertexShader(0), mPixelShader(0), mInputLayout(0), mVertexBuffer(0)
{
}

Triangle::~Triangle(void)
{
}

void Triangle::Update(float deltaTime){

}

void Triangle::UnloadContent(){
    if(mVertexShader)
        mVertexShader->Release();

    if(mPixelShader)
        mPixelShader->Release();

    if(mInputLayout)
        mInputLayout->Release();

    if(mVertexBuffer)
        mVertexBuffer->Release();

    mVertexBuffer = 0;
    mPixelShader = 0;
    mVertexShader = 0;
    mInputLayout = 0;
}

bool Triangle::LoadContent(){
    //Load Vertex Shader and make it active
    ID3DBlob* vsBlob = 0;

    if(!CompileShader(L"shaders.fx", "VS_Main", "vs_4_0", &vsBlob)){
        MessageBox(0, L"Error Loading Vertex Shader", L"Compile Error", MB_OK);
        return false;
    }
    HRESULT hr;
    if(FAILED(hr = mDevice->CreateVertexShader(vsBlob->GetBufferPointer(), vsBlob->GetBufferSize(), 0, &mVertexShader))){
        if(vsBlob)
            vsBlob->Release();

        return false;
    }

    D3D11_INPUT_ELEMENT_DESC vertexLayout[] = {
        {
            "POSITION", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0
        }
    };

    unsigned int layoutSize = ARRAYSIZE(vertexLayout);

    if(FAILED(mDevice->CreateInputLayout(
            vertexLayout,
            layoutSize,
            vsBlob->GetBufferPointer(),
            vsBlob->GetBufferSize(),
            &mInputLayout
        ))){
            vsBlob->Release();
            return false;
    }

    vsBlob->Release();

    ID3DBlob* psBlob = 0;

    if(!CompileShader(L"shaders.fx", "PS_Main", "ps_4_0", &psBlob)){
        MessageBox(0, L"Error Loading Pixel Shader", L"Compile Error", MB_OK);

        if(psBlob)
            psBlob->Release();

        return false;
    }

    if(FAILED(mDevice->CreatePixelShader(
            psBlob->GetBufferPointer(),
            psBlob->GetBufferSize(),
            0,
            &mPixelShader
        ))){
            psBlob->Release();
            return false;
    }

    psBlob->Release();

    //vertex buffer creation
    VertexPos vertices[] =
    {
        XMFLOAT3( 0.5f, 0.5f, 0.5f ),
        XMFLOAT3( 0.5f, -0.5f, 0.5f ),
        XMFLOAT3( -0.5f, -0.5f, 0.5f )
    };

    D3D11_BUFFER_DESC vertexDesc;
    ZeroMemory(&vertexDesc, sizeof(vertexDesc));

    vertexDesc.Usage = D3D11_USAGE_DEFAULT;
    vertexDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
    vertexDesc.ByteWidth = sizeof(VertexPos) * 3;

    D3D11_SUBRESOURCE_DATA subresourceData;
    ZeroMemory(&subresourceData, sizeof(subresourceData));
    subresourceData.pSysMem = vertices;

    if(FAILED(mDevice->CreateBuffer(
            &vertexDesc,
            &subresourceData,
            &mVertexBuffer
        ))){
            return false;
    }

    return true;
}

bool Triangle::CompileShader(wchar_t* filePath, char* entry, char* shaderModel, ID3DBlob** buffer){
    DWORD shaderFlags = D3DCOMPILE_ENABLE_STRICTNESS;

#if defined(DEBUG) || defined(_DEBUG)
    shaderFlags |= D3DCOMPILE_DEBUG;
#endif

    ID3DBlob* errorBuffer = 0;
    HRESULT result;

    result = D3DX11CompileFromFileW(
            filePath,
            0,0,
            entry,
            shaderModel,
            shaderFlags,
            0,0,
            buffer,
            &errorBuffer,
            0
        );

    if(FAILED(result)){
        if(errorBuffer != 0){
            OutputDebugStringA((char*) errorBuffer->GetBufferPointer());
            errorBuffer->Release();
        }
        return false;
    }
    if(errorBuffer)
        errorBuffer->Release();

    return true;
}

void Triangle::Render(){
    float clearColor[4] = { 1.0f, 0.0f, 1.25f, 1.0f };
    mDeviceContext->ClearRenderTargetView(mRenderTarget, clearColor);

    unsigned int stride = sizeof(VertexPos);
    unsigned int offset = 0;

    mDeviceContext->IASetInputLayout(mInputLayout);
    mDeviceContext->IASetVertexBuffers(0, 1, &mVertexBuffer, &stride, &offset);
    mDeviceContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);

    mDeviceContext->VSSetShader(mVertexShader, 0, 0);
    mDeviceContext->PSSetShader(mPixelShader, 0, 0);
    mDeviceContext->Draw(3, 0);

    mSwapChain->Present(0, 0);

} 
```

现在，当我运行它时，屏幕会清除并采用我指定的颜色，但屏幕上没有绘制任何内容。只是为了确保我刚刚编译了本书提供的源代码，它工作得很好。使用的着色器也相同。我的电脑确实支持directx 11。我认为大多数名称都是不言自明的，但你可以问我是否令人困惑。我已经用其他演示测试了我的框架，它运行良好。我似乎无法在我的代码中找到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:47:58.587

位置需要在标准欧几里得空间坐标中编码，一个 3 元组 - 或 - 传入 4D 齐次坐标，其中第 4 个分量设置为 1（一个 4 元组）（因为它们是点）。当你传入你的输入元素描述，你的顶点数据的布局，你设置`DXGI_FORMAT_R32G32B32A32_FLOAT`：

```
 D3D11_INPUT_ELEMENT_DESC vertexLayout[] = 
{
    {
         "POSITION", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0
    }
}; 
```

但只传递 3D 顶点：

```
VertexPos vertices[] =
    {
        XMFLOAT3( 0.5f, 0.5f, 0.5f ),
        XMFLOAT3( 0.5f, -0.5f, 0.5f ),
        XMFLOAT3( -0.5f, -0.5f, 0.5f )
    }; 
```

一开始你可能会猜到你的 w 坐标被初始化为 0 并且它以某种方式弄乱了顶点着色器中的变换，但发生的事情是线性内存布局所固有的，以及你如何向 GPU 承诺它将获取它的数据。你说它得到一个 32 位 4 元组，它只得到 32 位 3 元组。*现在，由于它们是相邻的，乍一看*，它们似乎被抽到了错误的插槽中。但是，在边界上破坏类型是 HLSL 严格禁止的，所以它就死了。

**如何解决？**

简单，更改`DXGI_FORMAT_R32G32B32_FLOAT`并调整您的 HLSL 代码以添加点的第四个组成部分并将其设置为 1.0，如 float4(pos, 1.0) 并将其与您在 CPU 上构建的世界、视图、投影矩阵相乘，另外，做记住 HLSL 是列优先的，而 C++ 是行优先的。这意味着您需要将所有内容转置到 HLSL 以使计算有意义。

快乐编码。

# ruby - 根据另一个 CSV 中的值从一个 CSV 中提取一个值

> ID：11127948
> 
> 赞同：0
> 
> 时间：2012-06-20T20:47:20.790
> 
> 标签：ruby, fastercsv

我试图找出从 CSV 文件中提取值的最佳方法，该文件`lookup.csv`基于.`master.csv``output.csv`

在下面的示例中，主文件具有三列数据，最后一列是`City`. 我想用文件中的名称替换`City`名称。`City Code``lookup.csv`

我没有可以查找的数据库，因此我必须使用 CSV 文件。我正在尝试将 FasterCSV 与 Ruby 1.8.7 一起使用。

示例文件结构：

主.csv：

```
First Name | Last Name | City
Joey       | Jello     | Atlanta
Home       | Boy       | Dallas 
```

查找.csv：

```
City    | City ID
Atlanta | 12345
Dallas  | 12346
Houston | 12347 
```

输出.csv：

```
First Name | Last Name | City
Joey       | Jello     | 12345
Home       | Boy       | 12346 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:08:44.467

我使用的是 1.9，在标准库`FasterCSV`中可用。`CSV`首先，我将创建一个查找散列`lookup.csv`：

```
cities = Hash[CSV.read('lookup.csv', :col_sep => ' | ').to_a[1..-1]] 
```

如果文件非常大，您可能需要遍历它`CSV.foreach`并逐行构建哈希：

```
cities = {}
CSV.foreach('lookup.csv', :col_sep => ' | ', :headers => true, :return_headers => false) do |line|
  cities[line['City']] = line['City ID']  
end 
```

然后迭代`master.csv`，在哈希中查找城市并将其写入`output.csv`：

```
CSV.open('output.csv', "w", :headers => ['First Name', 'Last Name', 'City ID'], :write_headers => true) do |output|
  CSV.foreach('master.csv', :col_sep => ' | ', :headers => true, :return_headers => false) do |line|
    output << [line['First Name'], line['Last Name'], cities[line['City']]]
  end  
end 
```

# xml - 批量更新 xml 文件

> ID：11127950
> 
> 赞同：3
> 
> 时间：2012-06-20T20:47:27.743
> 
> 标签：xml, windows, file, batch-file, insert-update

1.  我一直在寻找一个小时没有运气
2.  我的老板希望它是一个批处理文件

我有一个包含以下内容的 xml 文件。

```
 <?xml version="1.0"?>
    <profiledoc default="*** Last Run ***">
    <profile name="*** Last Run ***" >
    <workingdir>c:\proj</workingdir>
    <somestuff>none</somestuff>
    <smpnumprocs>4</smpnumprocs>
    <otherstuff></otherstuff>
    <llama>FLUFFY</llama>
    <language>en-us</language>
    <customexe></customexe>
    <addlparams></addlparams>
    <graphicsdevice>win32</graphicsdevice>
    </profile>
    </profiledoc> 
```

我们希望将`<smpnumprocs>4</smpnumprocs>`（使用的处理器数量）设置为 2，因此，该行应如下所示`<smpnumprocs>2</smpnumprocs>`

我想出了如何用这个达到我想要的价值

```
FOR /f "tokens=3 delims=><  " %%a IN ('TYPE %LOCAL_FILE% ^| FIND "<smpnumprocs>"') DO SET NUM_PROCS=%%a 
```

现在如何更改值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:51:51.560

你可以使用我写的脚本：

```
@echo OFF
@setlocal ENABLEDELAYEDEXPANSION

if "%~1" == "" (
    echo Please provide xml file path as a first parameter.
    exit /B 1
)

if not exist "%~1" (
    echo Xml file with given path does not exist.
    exit /B 2
)

if exist "%~1.tmp" del /F /Q "%~1.tmp"

for /F "delims=" %%G in (%~1) do (
    set LINE=%%G
    if not "!LINE!" == "!LINE:smpnumprocs=!" (
        set LINE=!LINE:4=2!
    )
    >> "%~1.tmp" echo !LINE!
)

del /F /Q "%~1"
ren "%~1.tmp" "%~1"

@endlocal 
```

脚本扫描给定的 xml 文件并`smpnumprocs`在其中找到行。如果找到那种线，它将 4 替换为 2。

所有行都转储到`<xmlFilePathHere>.tmp`文件中，最后替换原始文件。

# java - Android 自定义键盘 Row 类未找到异常

> ID：11127952
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:47:28.200
> 
> 标签：java, android

我正在研究 android 中的自定义键盘实现。到目前为止，我已经在一个 xml 文件中声明了我的键盘布局：

```
<android.inputmethodservice.Keyboard.Row>
    <Key android:codes="113" android:keyLabel="q" android:keyEdgeFlags="left"/>
    <Key android:codes="119" android:keyLabel="w"/>
    <Key android:codes="101" android:keyLabel="e"/>
    <Key android:codes="114" android:keyLabel="r"/>
    <Key android:codes="116" android:keyLabel="t"/>
    <Key android:codes="121" android:keyLabel="y"/>
    <Key android:codes="117" android:keyLabel="u"/>
    <Key android:codes="105" android:keyLabel="i"/>
    <Key android:codes="111" android:keyLabel="o"/>
    <Key android:codes="112" android:keyLabel="p" android:keyEdgeFlags="right"/>
</android.inputmethodservice.Keyboard.Row> 
```

当我尝试扩展此布局时，出现以下错误：

```
E/AndroidRuntime( 4775): FATAL EXCEPTION: main
E/AndroidRuntime( 4775): android.view.InflateException: Binary XML file line #9: Error inflating class android.inputmethodservice.Keyboard.Row
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
E/AndroidRuntime( 4775):    at com.mykeyboard.MyKeyboardService.onCreateInputView(MyKeyboardService.java:23)
E/AndroidRuntime( 4775):    at android.inputmethodservice.InputMethodService.updateInputViewShown(InputMethodService.java:967)
E/AndroidRuntime( 4775):    at android.inputmethodservice.InputMethodService.showWindowInner(InputMethodService.java:1320)
E/AndroidRuntime( 4775):    at android.inputmethodservice.InputMethodService.showWindow(InputMethodService.java:1295)
E/AndroidRuntime( 4775):    at android.inputmethodservice.InputMethodService$InputMethodImpl.showSoftInput(InputMethodService.java:398)
E/AndroidRuntime( 4775):    at android.inputmethodservice.IInputMethodWrapper.executeMessage(IInputMethodWrapper.java:176)
E/AndroidRuntime( 4775):    at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:61)
E/AndroidRuntime( 4775):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 4775):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 4775):    at android.app.ActivityThread.main(ActivityThread.java:3703)
E/AndroidRuntime( 4775):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 4775):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 4775):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
E/AndroidRuntime( 4775):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/AndroidRuntime( 4775):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 4775): Caused by: java.lang.ClassNotFoundException: android.inputmethodservice.Keyboard.Row in loader dalvik.system.PathClassLoader[/data/app/com.mykeyboard-2.apk]
E/AndroidRuntime( 4775):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
E/AndroidRuntime( 4775):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
E/AndroidRuntime( 4775):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
E/AndroidRuntime( 4775):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
E/AndroidRuntime( 4775):    ... 19 more 
```

貌似找不到`android.inputmethodservice.Keyboard.Row in loader dalvik.system.PathClassLoader`，但这是什么意思？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:55:28.510

即兴发挥，这似乎是一个无效的键盘文件。JavaDocs`Keyboard`展示了一个这样的示例：

```
<Keyboard
         android:keyWidth="%10p"
         android:keyHeight="50px"
         android:horizontalGap="2px"
         android:verticalGap="2px" >
     <Row android:keyWidth="32px" >
         <Key android:keyLabel="A" />
         ...
     </Row>
     ...
</Keyboard> 
```

而且，SDK 中的 SoftKeyboard 应用程序以类似的方式显示 XML：根`Keyboard`元素、嵌套`Row`元素以及`Key`其中的元素。

您可能希望从 SDK 示例开始并从那里进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:59:14.630

查看 Keyboard.Row 的可用 ctor。如果没有父 Keyboard 对象，您将无法实例化这些对象之一。该错误是因为类加载器找不到正在调用的构造函数。

要解决您的问题，只需围绕键盘中的内容即可。

# javascript - JavaScript 在 IE、Firefox 和 Opera 中运行良好，但在 Safari 或 Chrome 中运行良好（Textbox.value）

> ID：11127953
> 
> 赞同：0
> 
> 时间：2012-06-20T20:47:36.577
> 
> 标签：javascript, google-chrome, safari

每次用户在我的网页上选择登录按钮时，都会执行下面的 JavaScript 代码，该功能基本上确保`username`and`password`字段已接收到文本（然后去除任何前导或尾随空格），然后将浏览器重定向到 php 登录脚本。该代码在 IE、Firefox 和 Opera 中完美运行，但在 Safari 和 Chrome 中却不行。

在 Safari 和 Chrome 中，文本框的值为`undefined`. 其他浏览器完美地返回键入的值。

```
var button;
var name;
var pass;

function logIn()
{

    name.value = name.value.replace(/^\s+|\s+$/g,"");
    pass.value = pass.value.replace(/^\s+|\s+$/g,"");

    if(name.value == "")
    {

        alert("Please Enter A Username");

    }

    else if(pass.value == "")
    {

        alert("Please Enter A Password");

    }

    else
    {

        window.location.href = "loginScript.php?username=" + name.value + "&password=" + pass.value;

    }

}

function onLoad()
{

    button = document.getElementById('button');
    name = document.getElementById('username');
    pass = document.getElementById('password');

    button.onclick = logIn;

}

window.onload = onLoad; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:59:25.453

我相信您使用的变量 name 是 Chrome 中的保留关键字。

尝试将名称变量更改为用户名之类的变量。

```
var button;
var username;
var password;

function logIn()
{

    username.value = username.value.replace(/^\s+|\s+$/g,"");
    pass.value = pass.value.replace(/^\s+|\s+$/g,"");

    if(username.value == "")
    {

        alert("Please Enter A Username");

    }

    else if(password.value == "")
    {

        alert("Please Enter A Password");

    }

    else
    {

        window.location.href = "loginScript.php?username=" + username.value + "&password=" + password.value;

    }

}

function onLoad()
{

    button = document.getElementById('button');
    username = document.getElementById('username');
    password= document.getElementById('password');

    button.onclick = logIn;

}

window.onload = onLoad; 
```

编辑：也将密码更改为密码

# jquery - 如何使用可排序的 jquery 保留原始源列表

> ID：11127955
> 
> 赞同：0
> 
> 时间：2012-06-20T20:47:38.703
> 
> 标签：jquery, jquery-ui-sortable

我知道这已经在stackoverflow中被问过了，但我找不到我的问题的确切答案。

如果我有两个列表（源列表和第二个列表）。我想从源中复制并放入第二个列表，但我想将原始项目保留在源列表中。有没有办法只使用可排序而不是可拖动的？

我真的很感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:04:09.740

您可能没有使用适当的插件，并且使用可拖放和可拖动会做得更好。有几种方法可以设置它们，您可以在可拖动对象上使用克隆助手选项，使其保持原位并将克隆显示给用户，或者您设置恢复以动画它在放下时滑回原始位置。

然后，您将使用 droppable 的 drop 事件将可拖动的附加到它

[http://jqueryui.com/demos/droppable/#revert](http://jqueryui.com/demos/droppable/#revert)

# c++ - 是否可以在 Linux 中将数据写入自己的标准输入

> ID：11127970
> 
> 赞同：12
> 
> 时间：2012-06-20T20:48:44.897
> 
> 标签：c++, linux, cgi

我想从 IDE 调试我的 cgi 脚本（C++），所以我想创建一个“调试模式”：从磁盘读取文件，将其推送到自己的标准输入，设置一些与此文件相对应的环境变量并运行其余部分Web 服务器调用的脚本。是否有可能，如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T20:50:28.603

您不能“推送到自己的标准输入”，但您可以将文件重定向到您自己的标准输入。

```
freopen("myfile.txt","r",stdin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:01:38.723

大家都知道标准输入是一个文件描述符，定义为`STDIN_FILENO`. 虽然它的价值不能保证是`0`，但我从未见过其他任何东西。无论如何，没有什么可以阻止您写入该文件描述符。举个例子，这是一个小程序，它向自己的标准输入写入 10 条消息：

```
#include <unistd.h>
#include <string>
#include <sstream>
#include <iostream>
#include <thread>

int main()
{
    std::thread mess_with_stdin([] () {
            for (int i = 0; i < 10; ++i) {
                std::stringstream msg;
                msg << "Self-message #" << i
                    << ": Hello! How do you like that!?\n";
                auto s = msg.str();
                write(STDIN_FILENO, s.c_str(), s.size());
                usleep(1000);
            }
        });

    std::string str;
    while (getline(std::cin, str))
        std::cout << "String: " << str << std::endl;

    mess_with_stdin.join();
} 
```

将其保存到`test.cpp`，编译并运行：

```
$ g++ -std=c++0x -Wall -o test ./test.cpp -lpthread
$ ./test 
Self-message #0: Hello! How do you like that!?
Self-message #1: Hello! How do you like that!?
Self-message #2: Hello! How do you like that!?
Self-message #3: Hello! How do you like that!?
Self-message #4: Hello! How do you like that!?
Self-message #5: Hello! How do you like that!?
Self-message #6: Hello! How do you like that!?
Self-message #7: Hello! How do you like that!?
Self-message #8: Hello! How do you like that!?
Self-message #9: Hello! How do you like that!?
hello?
String: hello?
$ 
```

“喂？” 部分是我在发送完所有 10 条消息后键入的内容。然后按`Ctrl`+`D`表示输入结束和程序退出。

# javascript - 函数中的 if 语句

> ID：11127972
> 
> 赞同：4
> 
> 时间：2012-06-20T20:48:57.023
> 
> 标签：javascript, jquery

我正在尝试向`if`我的函数添加一条语句，但它不起作用。（所有变量都已经在我的完整代码中声明了。）

这是原始代码：

```
function processCheckout() {
    //static paypal request arguments
    var pp_settings = {
        cmd: '_cart',
        upload: 1,
        no_note: 0,
        bn: 'JQPayPalShop_ShoppingCart_EC_US',
        tax: 0,
        rm: 2,
        custom: ''
    };

    //copy settings.paypal to pp_settings 
    $.extend(pp_settings, settings.paypal);

    //create form for POST request
    var form = $('<form />');
    form.attr('action', 'https://www.paypal.com/cgi-bin/webscr');
    form.attr('method', 'post');
    form.attr('target', '_blank');

    //add paypal variables
    var arg;
    for (var key in pp_settings) {
        arg = $('<input type="hidden" />');
        arg.attr('name', key);
        arg.attr('value', pp_settings[key]);
        //add to form
        form.append(arg);
    }

    //now process items in cart
    var item_index = 0;
    //properties map for 'cart' to the paypal variables
    var map = {
        name: 'item_name',
        quantity: 'quantity',
        checkout_price: 'amount',
        shipping: 'shipping',
        number: 'item_number',
        handling: 'handling'
    };

    for (var g in cart) {
        //group
        for (var i in cart[g]) {
            //item
            if (i == 'length')
                continue;
            //skip length property
            item_index++;
            //process item
            for (var k in map) {
                arg = $('<input type="hidden" />');
                arg.attr('name', map[k] + '_' + item_index);
                arg.attr('value', cart[g][i][k]);
                form.append(arg);
            }
        }
    }

    //add form to the document
    shop.append(form);
    form.submit();
    //remove form
    shop.remove(form);
} 
```

这是我试图修改的代码：

```
function processCheckout() {
    if (canBuy = false)
    {
        alert("False");
    }
    else
    {
        //static paypal request arguments
        var pp_settings = {
            cmd: '_cart',
            upload: 1,
            no_note: 0,
            bn: 'JQPayPalShop_ShoppingCart_EC_US',
            tax: 0,
            rm: 2,
            custom: ''
        };

        //copy settings.paypal to pp_settings 
        $.extend(pp_settings, settings.paypal);

        //create form for POST request
        var form = $('<form />');
        form.attr('action', 'https://www.paypal.com/cgi-bin/webscr');
        form.attr('method', 'post');
        form.attr('target', '_blank');

        //add paypal variables
        var arg;
        for (var key in pp_settings) {
            arg = $('<input type="hidden" />');
            arg.attr('name', key);
            arg.attr('value', pp_settings[key]);
            //add to form
            form.append(arg);
        }

        //now process items in cart
        var item_index = 0;
        //properties map for 'cart' to the paypal variables
        var map = {
            name: 'item_name',
            quantity: 'quantity',
            checkout_price: 'amount',
            shipping: 'shipping',
            number: 'item_number',
            handling: 'handling'
        };

        for (var g in cart) {
            //group
            for (var i in cart[g]) {
                //item
                if (i == 'length')
                    continue;
                //skip length property
                item_index++;
                //process item
                for (var k in map) {
                    arg = $('<input type="hidden" />');
                    arg.attr('name', map[k] + '_' + item_index);
                    arg.attr('value', cart[g][i][k]);
                    form.append(arg);
                }
            }
        }

        //add form to the document
        shop.append(form);
        form.submit();
        //remove form
        shop.remove(form);
    }
} 
```

我希望整个函数只有在`canBuy`变量等于`true`, else, 时才能工作`alert("False")`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:52:01.073

```
// WRONG
if (canBuy = false)

// GOOD
if (canBuy == false)

// BETTER
if (!canBuy) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T20:51:12.783

新`if`语句应该使用`==`(comparison) 而不是`=`(assignment)

```
if (canBuy = false) 
```

改成...

```
if (canBuy == false) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T20:50:47.213

更改`if (canBuy = false)`为`if (canBuy == false)`

你错过了一个额外的等号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T20:51:35.393

```
if (canBuy = false) 
```

做作业，应该是`==`为了比较

```
if (canBuy == false) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T21:05:11.530

假设`canBuy`在某处声明了`processCheckout`函数可以看到它，请将初始比较更改为`==`or`===`或 go with `if (!canBuy) {`or `if (canBuy) {`（取决于您喜欢阅读逻辑的方式）。

```
//Assignment
if (canBuy = false) {...};    //assignment, won't work.

//Coerced comparison
if (canBuy == false) {...}    //this would work

//Non-coerced compparison
if (canBuy === false) {...}   //if canBuy is an actual boolean, this would work

//Also (in the category of "is more readable"...)
if (!canBuy) {      //this would work
    //...
}
if (canBuy) {       //as would this
    //...
} 
```

# javascript - 使用 Tabbable Tabs 将选项卡内容 #ID 返回到两个 DIV

> ID：11127973
> 
> 赞同：0
> 
> 时间：2012-06-20T20:48:59.770
> 
> 标签：javascript, twitter-bootstrap

我已经为每个 data-toogle="Tab" 指定了一个 NavBar，而无需编写任何 Javascript 并使用 Twitter Bootstrap 的“[可选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)”：

```
 <ul class="tabnavcenter">
      <li class="active"><a href="#home" data-toggle="tab">**Name 1**</a></li>
      <li><a href="#tab2" data-toggle="tab">Name 2</a></li>

 </ul> 
```

...然后使用以下方法返回其上方的内容：

```
<div class="tab-content">
  <div class="tab-pane active" id="home">
   **Content 1** 
  </div>
</div> 
```

它既好又简单，而且效果很好，但现在我需要破解它才能将选项卡内容返回到两个单独的 DIV。这是 twitter 标签的 API：

```
/* TAB DATA-API
   * ============ */

 $(function () {
   $('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
     e.preventDefault()
   $(this).tab('show')
   })
  })

 }(window.jQuery); 
```

这正是我想要做的：

![在此处输入图像描述](../Images/7bba77ee9e5bf5646227e65b8ec0099c.png)

...因此，当您单击#tab 1 时，内容会出现在其上方和下方。

谢谢你。

# python - Python子进程执行的脚本不会写入文件

> ID：11127975
> 
> 赞同：1
> 
> 时间：2012-06-20T20:49:17.220
> 
> 标签：python, subprocess, multiprocessing

我编写了两个脚本，其中一个脚本调用 subprocess.Popen 来运行终端命令来执行第二个脚本。等待 5 秒后，它将终止子进程。

在子进程中，我有一个 while 循环轮询寄存器并将该寄存器的内容写入文件。

我使用的方法是

```
f = open(filename, 'w')
...
while 1:
    *poll register*
    f.write(fp0)
    sleep(1) 
```

每当我单独使用 while 循环运行脚本时，它都会将寄存器的内容写入文件。但是，当我执行主脚本并将轮询脚本作为子进程执行时，它在终止后不会写入文件。

任何人都可以对这个问题提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:56:24.567

在打开文件时使用上下文，并在你睡觉之前添加一个刷新：

```
with open(filename, 'w') as f:
    ...
    while 1:
        *poll register*
        f.write(fp0)
        f.flush()
        sleep(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:54:31.037

由于您正在终止子进程，因此它可能没有将输出刷新到文件中。尝试调用`f.flush()`以确保将输出写入文件。

# javascript - Javascript refresh() 方法

> ID：11127979
> 
> 赞同：-1
> 
> 时间：2012-06-20T20:49:34.297
> 
> 标签：javascript, html

我试图在页面上重新加载一个表格 [Ajax 有点混乱]

```
var table = document.getElementById ("table");
table.refresh(); 
```

这与使用 ajax 重新加载表的结果相同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:51:31.847

没有这样的 JavaScript 方法。您将不得不学习如何使用 Ajax。

您可能想研究使用[jQuery](http://jquery.com/)及其[`ajax()`](http://api.jquery.com/jQuery.ajax/)方法。jQuery 使 Ajax 更易于理解。这是jquery的ajax方法的一个例子。

```
$.ajax({
    type: "POST",
    url: "pathToPage",
    data: "yourParamsToGetData",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (result) {
        FillTableFromResults(result);
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        if (errorThrown != null)
            alert(textStatus + " : " + errorThrown);
    }
}); 
```

# ruby-on-rails-3 - Rails 3 执行原始 SQL/调用范围时可能出现的 ERB 错误？

> ID：11127980
> 
> 赞同：0
> 
> 时间：2012-06-20T20:49:36.950
> 
> 标签：ruby-on-rails-3, postgresql, scope, erb

在我的用户模型中，我有一个范围：

```
scope :with_tournament_entrees, :include => :registers, :conditions => "registers.id IS NOT NULL" 
```

我想看看这个范围生成的 SQL 并产生：

```
"SELECT \"users\".* FROM \"users\"  WHERE (registers.id IS NOT NULL)" 
```

我没有看到任何提及我添加的包含参数，如果在控制台中作为原始 SQL 在`ActiveRecord::Base.connection.execute`. 另一方面，如果我要在控制台中查询 User.with_tournament_entrees ，它会产生我需要的正确的**8 条记录**，没有任何错误，查看日志我看到正在执行的 SQL 语句......

```
SELECT "users"."id" AS t0_r0, "users"."email" AS t0_r1, 
       "users"."encrypted_password" AS t0_r2, ....
       "registers"."id" AS t1_r0, "registers"."competition_id" AS t1_r1,
       "registers"."user_id" AS t1_r2 ... 
       FROM "users" LEFT OUTER JOIN "registers" ON "registers"."user_id" = "users"."id"
       WHERE (registers.id IS NOT NULL) 
```

这看起来是正确的，所以只是为了仔细检查，我复制了 SQL 并将其包装在里面`ActiveRecord::Base.connection.execute`，它执行得很好——除了现在而不是像我调用范围时那样得到**8 条记录，而是得到****12 条记录**。

是什么赋予了？它正在执行完全相同的 SQL 对吗？那么为什么我会得到不同的结果呢？我正在使用 PostgreSQL 数据库。

哦，我知道你不应该在 Rails 3 中使用范围，这就是为什么我要尝试使用 SQL，以便弄清楚如何 ActiveRecordify(?) 它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:00:27.833

这可以通过 2 个事实来解释： 1\. 有效地添加连接意味着您可以根据用户行和寄存器行的每个有效组合获得一个结果集行。因此，如果某个用户在寄存器表中有 2 条记录 - 您将获得该用户记录的两行。2\. Active Record 知道上述内容并且能够“合并”行，这样你就可以得到一个用户有两个寄存器，而不是两个相同的用户每个有一个寄存器。

这样，从 MySQL 的角度来看，运行裸查询会产生 12 行的结果。ActiveRecord 将它们处理到 8 条记录，因为有些行包含相同的用户字段，只是多个寄存器的字段。

希望这可以帮助 ：）

# wpf - WPF 工具包：使用对象数据提供程序将图表绑定到数据视图

> ID：11127981
> 
> 赞同：0
> 
> 时间：2012-06-20T20:49:42.747
> 
> 标签：wpf, binding, charts, dataview, toolkit

我正在尝试使用从数据集表返回的数据视图创建图表。我在 C# 中创建了一个数据提供程序对象，该对象使用从数据源向导创建的数据集和表适配器。数据提供者对象有一个方法，一旦它被填满，它就会返回表上的默认视图。

数据检索部分工作正常，如果我将数据网格绑定到它，我就能看到数据。我的问题是，如何将数据视图绑定到柱形图（或任何图表）？我的独立数据是数据视图中的一个文本列，依赖数据是一个数字量。当我运行此代码时，我收到如下运行时错误：

> 设置属性“System.Windows.Controls.DataVisualization.Charting.DataPointSeries.DependentValueBinding”引发异常。行号“17”和行位置“18”。

我究竟做错了什么？

```
<Window xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"  xmlns:my="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit"   x:Class="GraphingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:GraphingTest"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <ObjectDataProvider ObjectType="{x:Type local:CustomDataProvider}"  x:Key="odp1">            
        </ObjectDataProvider>
        <ObjectDataProvider ObjectInstance="{StaticResource odp1}" MethodName="GetQualitativeData" x:Key="odp2">

        </ObjectDataProvider>
    </Window.Resources>
    <ScrollViewer>
    <StackPanel DataContext="{Binding Source={StaticResource odp2}}">
            <chartingToolkit:Chart  >
                <chartingToolkit:ColumnSeries DependentValueBinding="MyNumberValue" IndependentValueBinding="MyTextLabel" ItemsSource="{Binding}">

                </chartingToolkit:ColumnSeries>

            </chartingToolkit:Chart>
        </StackPanel>
    </ScrollViewer>
</Window> 
```

这是我的 C# 数据提供者对象

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using GraphingTest.MyDataSetTableAdapters;

namespace GraphingTest
{
    public class CustomDataProvider
    {
        // construct the dataset
        MyDataSet dataset;

        MyDataTableAdapter adapter;

        public CustomDataProvider()
        {

            dataset = new MyDataSet();
            adapter = new MyDataTableAdapter();
            // use a table adapter to populate the Customers table
            adapter.Fill(dataset.MyData);
        }

        public DataView GetQualitativeData()
        {

            // use the Customer table as the DataContext for this Window
            var x= dataset.MyData.DefaultView;
            return x;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:32:59.887

```
<chartingToolkit:ColumnSeries DependentValueBinding="MyNumberValue" IndependentValueBinding="MyTextLabel" ItemsSource="{Binding}"> 
```

应该是：

```
<chartingToolkit:ColumnSeries DependentValueBinding="{Binding MyNumberValue}" IndependentValueBinding="{Binding MyTextLabel}" ItemsSource="{Binding}"> 
```

或者

```
<chartingToolkit:ColumnSeries DependentValuePath="MyNumberValue" IndependentValuePath="MyTextLabel" ItemsSource="{Binding}"> 
```

# regex - 用于电子邮件验证的两种正则表达式变体

> ID：11127982
> 
> 赞同：1
> 
> 时间：2012-06-20T20:49:43.663
> 
> 标签：regex

我有这两个正则表达式，都用于验证电子邮件。第一个来自 ASP.NET 电子邮件正则表达式验证器，第二个来自我在 SO 上找到的。我的问题是它们之间有什么区别，哪个更好？

```
/^\w+([-+.\']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/

/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/ 
```

两个正则表达式都允许`ukkkk`

```
<script type="text/javascript">

var regex = /^\w+([-+.\']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
var regex2 = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

alert(regex.test('nhassyk@yahoo.co.ukkkk'));
alert(regex2.test('nhassyk@yahoo.co.ukkkk'));

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:02:25.267

“更好”是一个非常主观的术语——它取决于你到底在寻找什么。

第一个正则表达式允许在电子邮件地址的第一部分使用单引号字符并使用包含下划线的 \w+，因此如果您将其用作“更好”的标准之一，则它更具包容性。

第二个不会在第一个使用的任何地方都使用下划线，但这很简单，因为顶级域中没有下划线。它也更慢，因为`{2,4}+$/`它将地址的末尾分成 2、3 或 4 个组，直到它“正确”。它应该更改`{2,})$`为运行得更快。

最终，它将归结为您希望被视为有效的电子邮件地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:09:51.300

其实，两者都不完美。

让我们让它们变得更好：因为`[a-zA-Z0-9_]`和`\w`是相同的，我们使用第二个变体。
有第一级域如`travel`，所以我们会增加它的最大长度，但当然我们不会`*`在第一个正则表达式中使用 as 。
毕竟，第二个正则表达式有一个错误——不应该有最后一个加号。我们需要有一级域名，但只有一个。

这是一个结果：`^([\w\.\-\+])+\@(([\w\-])+\.)+([a-zA-Z0-9]{2,6})$`

无论如何，`nhassyk@yahoo.co.ukkkk`是有效的电子邮件，即使它不存在。

有人知道：有没有超过 6 个符号的一级域名？

**更新**：[这](http://www.regular-expressions.info/email.html)是一篇关于根据 RFC 标准验证电子邮件的精彩文章。最终变体非常令人印象深刻。

# php - 一个困难的一对多 mysql 查询

> ID：11127984
> 
> 赞同：1
> 
> 时间：2012-06-20T20:50:04.907
> 
> 标签：php, mysql

我有两张桌子，一张是“用户”，一张是“社交网络”。我想以某种格式从两者中获取数据，并且社交网络表将 user_id 作为列。

我想最终得到类似的东西

```
array{
    0 => array{
        name => "Bob",
        id => 1,
        facebook => array{ <all data from the fb row> },
        twitter => array{ <all data from the tw row> },
        linkedin => array{ <all data from the li row> }
    },
    1 => array{
        name => "Jill",
        id => 2,
        facebook => array{ <all data from the fb row> },
        twitter => array{ <all data from the tw row> },
        linkedin => array{ <all data from the li row> }
    }
} 
```

这可能吗？

为清楚起见进行编辑：

social_networks 表如下所示：

user_id、social_network、account_url 等。

用户表如下所示：

id、姓名、图片等

social_networks 表中的 user_id 与 users 表中的 id 匹配。每个用户在 social_networks 表中可以有几行。

我要获取的是用户表中的整行和社交网络表中的每一行。我宁愿在单个查询中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:01:52.770

你不能直接通过mysql来做，但你可以很容易地做到。这是伪代码：

```
// connect to database
// query for all users
// foreach user
  // add user to array
  // add user's fb info to array
  // add user's tw info to array
  // add user's li info to array 
```

更详细一点（使用 PDO，因为我什至不会假装 mysql_* 没问题）。

```
<?php

// create a PDO object to connect to the db
$pdo = new PDO('mysql:host=localhost;dbname=testdb', 'username', 'password');

// get a basic list of users with their IDs and names
$query = $pdo->query('select user_id, name from users');

// prepare the final array that will hold it all
$users = array();

// loop through the users returned by the query
while($row = $query->fetch(PDO::FETCH_ASSOC)) {
  // make an array for this user with the basic data
  $user = array('id' => $row['user_id'], 'name' => $row['name']);

  // add fb data
  $user['fb'] = $pdo->prepare('select * from fb where user_id = :user_id')
    ->execute(array(':user_id' => $user['id']))
    ->fetch(PDO::FETCH_ASSOC);

  // add li data
  $user['li'] = $pdo->prepare('select * from li where user_id = :user_id')
    ->execute(array(':user_id' => $user['id']))
    ->fetch(PDO::FETCH_ASSOC);

  // add tw data
  $user['tw'] = $pdo->prepare('select * from tw where user_id = :user_id')
    ->execute(array(':user_id' => $user['id']))
    ->fetch(PDO::FETCH_ASSOC);

  // add new user to the full array
  $users[] = $user;
}

// do stuff with the $users array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:57:21.610

所以你可以做类似的事情

```
SELECT u.ID, u.Name, s.* FROM users u
INNER JOIN socialNetworks s ON u.ID = s.user_id
ORDER BY u.ID 
```

并遍历相同的 ID，为每个用户构建您的数组：

```
$id = -1;
$i = 0;
$userArr = array();
while($row = mysqli_fetch_array($res))
{
    //parse row set user/SN info

    if($id != $row["ID"])
    {
        $tempUserArr = array();
        $id = $row["ID"];
        //set user and sn info to $tempUserArr
        $userArr[] = $tempUserArr;
    }
    else
    {
        $tempSN_arr = array();
        //set social network info to $tempSN_arr
        $userArr[$i][$row["sn_type"]] = $tempSN_arr;
    }
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:57:32.007

```
$sql = "SELECT * FROM user";
$rows = mysql_query($sql);

$user_array = array()

while($record = mysql_fetch_array($orws){

   $new_array = array();
   $new_array['name']  = $record['name'];
   $new_array['id']  =$record['user_id'];
   $new_array['facebook'] = array(); //function or query to fill data
   $new_array['twitter'] = array();//function or query to fill data
   $new_array['linkedin'] = array();//function or query to fill data

     $user_array[]=$new_array;
}
print_r($user_array); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T21:13:41.157

作为我其他答案的替代方案，这个答案将在一个查询中为您提供所有数据：

```
select
  users.id,
  users.name,
  fb.account_url as 'facebook_account_url',
  li.account_url as 'linkedin_account_url',
  tw.account_url as 'twitter_account_url',
from
  users
  inner join social_network as fb on users.id = fb.user_id and fb.social_network = 'fb'
  inner join social_network as tw on users.id = tw.user_id and tw.social_network = 'tw'
  inner join social_network as li on users.id = li.user_id and li.social_network = 'li' 
```

结果数据不会像您在问题中显示的那样是多维数组，但它将在单个 MySQL 查询中完成。

# cakephp-1.3 - 访问控制器 cakePHP 中的视图元素

> ID：11127987
> 
> 赞同：0
> 
> 时间：2012-06-20T20:50:20.443
> 
> 标签：cakephp-1.3

我正在 CakePHP 中创建一个表单。下面给出了代码片段。我正在尝试将 $i 的值传递给将军控制器的分页器功能。请告诉我如何在将军控制器的分页器功能中获取和访问 $i 的值。

```
echo "<div align = 'center'>";
for($i=1;$i<=10;$i++)
{
echo $this->Html->link($i ,array('controller' => 'generals','action' => 'paginator'));
echo " ";
}
echo "</div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:04:27.787

只需在链接选项中添加要作为附加数组键传递的变量，如下所示：

```
echo $this->Html->link($i ,array(
    'controller' => 'generals',
    'action' => 'paginator',
    $i // Add this after your action in order to call /generals/paginator/$i
)); 
```

# sql - 带多个表的复杂 SQL 查询

> ID：11127990
> 
> 赞同：0
> 
> 时间：2012-06-20T20:50:32.180
> 
> 标签：sql

我的数据库中有以下表格：

**产品**

```
ID_PRODUCT
PRODUCTNAME
PRICE 
```

**顾客**

```
ID_CUSTOMER
NAME 
```

**订单**

```
ID_ORDER
CUSTOMER_ID
PRODUCT_ID
QUANTITY 
```

我将如何选择订购 4 种或更多产品的所有客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:54:48.780

假设您的意思是“如何选择订购了四种或更多不同产品的所有客户 ID？”，那么您将使用以下内容：

```
select customer_id
from orders
group by customer_id
having count(distinct product_id) >= 4 
```

如果您只希望订单上有四个或更多产品线，那么您可以从“count”中删除“distinct”。

如果您想要更多客户信息，那么您可以将其加入到客户表中以获取名称（等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:55:18.383

```
select *
from Customers as c
where (select count(*) from Orders as o where o.CUSTOMER_ID = c.CUSTOMER_ID) > 3 
```

# c# - 配置 Spring.Http.Client.WebClientHttpRequestFactory

> ID：11127991
> 
> 赞同：0
> 
> 时间：2012-06-20T20:50:36.560
> 
> 标签：c#, dropbox, spring.net

我正在使用 spring-net-social-dropbox 库创建一个应用程序以在 Dropbox 服务上发布文件。是否可以更改/配置 WebClientHttpRequestFactory 类的属性？我想更改 Timeout 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:10:51.610

您可以将您的`IDropbox`实例转换为`DropboxTemplate`. 然后，您将可以访问`RestTemplate`具有`RequestFactory`属性的底层实例。

# ruby-on-rails - Ruby 1.9 Base64 编码写入文件错误

> ID：11127992
> 
> 赞同：4
> 
> 时间：2012-06-20T20:50:38.670
> 
> 标签：ruby-on-rails, ruby, character-encoding, base64, ruby-1.9

我收到以下错误：

```
Encoding::UndefinedConversionError: "\x81" from ASCII-8BIT to UTF-8 
```

以下都在 Ruby 1.8.7 中工作，所以我认为这与 Ruby 1.9 如何处理编码有关，但我不太确定如何解决它。我目前正在使用 Ruby 1.9.3。

> ```
>  decode_base64_content = Base64.decode64(content) 
> 
>   File.open("index.txt", "w") do |f|
>     f.write(decode_base64_content)
>   end 
> ```

内容类似于：

```
CgcZAAEAAABQcmVzZW50YXRpb24RMQAGSUIyQjdCNjBCLUZBRTMtMjVGMS1DQ0E1LTM1REM4NjBC
MDlCRgYCBklBMjk2OTQ4MC0yMkQyLURENzMtQUY5Ni1DNURDMDIyQTVFRjkGBAZJNUJCRTI3REYt
Q0QyRC03NkY0LTk1MUMtQzYxRkYxQjgxN0Y4BgYGSTg0QjM3M0FGLTVFNjEtMkMwMy1DMTBCLUNB
MUZCMDY0Q0NERQYIBkkwOTIwNDRBRC02QTQ5LTg0NzEtMzc5QS0yRjQxMzU2MUY0OUQGCgZJODlC
NDczOTUtOTk1MS01OTk1LTk4NDctNkU1NjI4RjhGNjYzBgwGSThCQ0RFM0VDLUMyREItMDkyNy1G
NTFFLTJGNDE4OEMzNURDMwYOBklGMDk5QkRDOC1GOEFDLTg1QjEtMjgzMC0yRjQ5RkZFMDFCNUEG
EAZJNTJCOEQ3RUItMzZEQi1CMjNELUU2MTYtMkY0QjUxNDIwMjBFBhIGSUM2RjkzNjgwLTFBNjMt
NzU5Qi0yOEE5LTUwMDc2NjZCOEYyNgYUBkk2MDIwRjg4Ni1BQTk4LTRBNDQtQjZGNS1DNDAyMTMz
NzEzOEQGFgZJRDFEMjcxMzYtQTkwQy0xRDBBLTc4RjAtQ0ExRUFCQzgzRUE1BhgGSUZBRDQzMjI1
LTUwODctNENEMy1ENjkzLUQ4Qzg0NDc3RTMyRAYaBklFMjc5NjA5Mi0xNUYzLUY4NkItMEFBQi0x
MUEzQjIwNEFBRTIGHAZJNERFNEYzNUItQzAyNy1DOTQ1LTY2MzUtMDE4NTZDRTdBMDM3Bh4GSUM4
NjA4RkI4LUI4RDEtMjM5RS04ODY4LUNBMjIzNUUwNjk5MAYgBkk4QjcxOEFDRi03NEE0LTA4REQt
QzZENC1DQTEyNDQwRTkzOUYGIgZJQjA3NTk0OEMtQzA3MS0wQTQ3LTYxNDQtNEU1OUIwN0QwQ0VF
BiQGSUM2M0VFQkU1LUZFOEEtRUVDMC1GNDFFLTc3QTI3Qzg2RDE1OAYmBkk5QkQ2M0NEQi02NDg2
LTM2OUQtMTY0NS0xMDIzMTQ5Njk1OUQGKAZJOTI3NDUzNDEtRUYzRC04MEU1LUZDQkUtQ0EyMTZG
Q0FGRTcyBioGSUI3MzlFMTBFLTk2M0QtMDA0Ny1EMkU1LUNBMjA2ODM2MjZFNgYsBkk4RUY5QkZB
Ni0wNDAyLTQwQUQtRjAxQi0xMTRBNDBFODMwRjMGLgZJQjY2N0YxODktNzQ4My05RkE4LTYwMDkt 
```

持续约 3000 行。

如何解决此转换错误？上面的代码片段有效，但在 3000 行中，我认为 base64 解码方法使用了无效编码。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T21:06:28.290

鉴于这`"\x81"`是一个控制字符，所以它不是任何形式的文本，您应该打开文件二进制文件：

```
File.open("index.txt", "wb") do |f|
  f.write(decode_base64_content)
end 
```

# c# - 如何从 Gridview 检索动态创建的标签控件

> ID：11127993
> 
> 赞同：0
> 
> 时间：2012-06-20T20:50:40.747
> 
> 标签：c#, asp.net

我有在网格视图模板页面中动态创建的按钮和标签框，这是在 C# 中完成的。在页面加载时，只有按钮可见。单击按钮时，我希望相应的标签将其可见性更改为 true。

我无法在 Gridview OnRowCommand 中检索控件。我已经声明了以下内容：

```
lblAvailone = (Label)row.FindControl("lblFirstAvail"); 
```

您能否告诉我如何在行命令中获取该标签值？

# c# - CPU使用百分比，使用c#和monobjc从虚拟机在mac上远程运行

> ID：11127998
> 
> 赞同：3
> 
> 时间：2012-06-20T20:50:48.913
> 
> 标签：c#, visual-studio-2010, virtual-machine, monobjc

如果您需要知道这是 monobjc [http://www.monobjc.net/](http://www.monobjc.net/)（我特意引用了允许您在远程 Mac 上运行的部分）

正如我所说，我在 Visual Studio 中使用 C# 进行编码，并且我正在使用 monobjc 在托管 mac 计算机上运行，​​这是一项相当繁琐的设置，但一切正常（保存以供直接调试）。我已经尝试使用 PerfomanceCounter NextValue() 方法来获取处理器使用的百分比，但我仍然得到 0%（甚至在单声道中尝试过并使用了 thread.sleep 方法，但什么也没有）

所以这可能是一个艰难的过程。我编写了一个计时器事件，它每三分钟触发一次，并将一些使用情况统计信息记录到日志文件中。截至目前，它正在记录应用程序占用的总 RAM，因此获取日志记录的逻辑工作正常。这是为起点执行日志记录部分的代码。

```
 string strUsage;
        Process procST = Process.GetCurrentProcess();
        double dlRamUsage = procST.WorkingSet64 * (9.53674316 * Math.Pow(10, -7));
        strUsage ="Ram Usage: " + dlRamUsage + " MB"
        Log(strUsage, asInfo); //Writes to the log file with an INFO tag 
```

现在我的问题是，除了 NextValue() 之外还有哪些替代方法？我可以让 NextValue 工作吗？我可以使用什么来获取我的应用程序的 CPU 使用率（百分比）？我需要注意从 vm 到 mac 的编码有什么特别之处吗？

谢谢！

# styling - 如何使用 css 设置 JavaFX ContextMenu 的样式？

> ID：11127999
> 
> 赞同：15
> 
> 时间：2012-06-20T20:50:52.050
> 
> 标签：styling, javafx-2

我正在尝试`ContextMenu`使用单独的 CSS 文件更改项目的样式。我查看了 caspian.css 部分，发现了以下定义：

*   。上下文菜单
*   .context-menu .separator
*   .context-menu .滚动箭头
*   .context-menu .scroll-arrow:hover
*   .context-menu: 显示助记符 .mnemonic-underline

我将它们完全复制到我的 css 文件中，并仅更改了背景颜色值作为测试：

```
.context-menu {
    -fx-skin: "com.sun.javafx.scene.control.skin.ContextMenuSkin";
    -fx-background-color: #006699;
    -fx-background-insets: 0, 1, 2;
    -fx-background-radius: 0 6 6 6, 0 5 5 5, 0 4 4 4;
/*    -fx-padding: 0.666667em 0.083333em 0.666667em 0.083333em;  8 1 8 1 */
    -fx-padding: 0.333333em 0.083333em 0.666667em 0.083333em; /* 4 1 8 1 */
}

.context-menu .separator {
    -fx-padding: 0.0em 0.333333em 0.0em 0.333333em; /* 0 4 0 4 */
}

.context-menu .scroll-arrow {
    -fx-padding: 0.416667em 0.416667em 0.416667em 0.416667em; /* 5 */
    -fx-background-color: #006699;
}

.context-menu .scroll-arrow:hover {
    -fx-background: -fx-accent;
    -fx-background-color: #006699;
    -fx-text-fill: -fx-selection-bar-text;
}

.context-menu:show-mnemonics .mnemonic-underline {
    -fx-stroke: -fx-text-fill;
} 
```

这显然行不通，否则我不会在这里。无论我更改什么值，它似乎都没有效果。

我打开 JavaFX Scene Builder 来看看（旁注我把它作为最后的手段，因为我发现它使用起来很笨拙）。我注意到在 CSS 部分的 Styleable Parts 下，上下文菜单中的列表`CSSBridge[context-menu]`看起来很奇怪。其他的东西，比如 Label 有`Label[label]`.

**任何人都可以向我解释这里发生了什么，因为它似乎忽略了我的上下文菜单的 css 文件并使用 caspian.css 中的默认值？**

* * *

附加示例 FXML 文件、css 和 java 代码以运行。

**示例.fxml**

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<AnchorPane fx:id="myroot" xmlns:fx="http://javafx.com/fxml">
  <children>
    <Label text="Right click for options">
      <contextMenu>
        <ContextMenu>
          <items>
            <MenuItem text="Help" />
            <MenuItem text="Me" />
          </items>
        </ContextMenu>
      </contextMenu>
    </Label>
  </children>
  <stylesheets>
    <URL value="@contextcolor.css" />
  </stylesheets>
</AnchorPane> 
```

**上下文颜色.css**

```
.root {
  -fx-background-color: cornsilk; 
  -fx-padding: 10;
}

.context-menu {
  -fx-background-color: #006699;
  -fx-text-fill: white;
}

.menu-item .label {
  -fx-text-fill: yellow;
}

.menu-item:focused .label {
  -fx-text-fill: white;
} 
```

**测试.java**

```
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Test extends Application {

    public static void main(String[] args) {
        Application.launch(Test.class, args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        System.out.println(com.sun.javafx.runtime.VersionInfo.getVersion());

        Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

        stage.setScene(new Scene(root));
        stage.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T21:29:46.863

这是一个通过 css 设置 JavaFX 上下文菜单样式的简单示例。

在 WinXPsp3、Jdk7u6b14ea、JavaFX 2.2b12 上测试。

**应用程序**

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.stage.Stage;

public class ContextColor extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    Label label = new Label("Right click for options");
    label.setContextMenu(new ContextMenu(new MenuItem("Help"), new MenuItem("Me")));
    Scene scene = new Scene(label);
    scene.getStylesheets().add(ContextColor.class.getResource("contextcolor.css").toExternalForm());
    stage.setScene(scene);
    stage.show();
  }
} 
```

**css 样式表**

```
/** contextcolor.css
 *   place in same folder as ContextColor.java
 *   ensure your build system copies this file to the ContextColor.class output directory on build
 */
.root {
  -fx-background-color: cornsilk; 
  -fx-padding: 10;
}

.context-menu {
  -fx-background-color: #006699;
  -fx-text-fill: white;
}

.menu-item .label {
  -fx-text-fill: yellow;
}

.menu-item:focused .label {
  -fx-text-fill: white;
} 
```

我无法告诉您 css 样式未按预期运行的确切原因。一些可能的原因是：

1.  您没有正确加载它。
2.  您的 css 文件不会复制到您的输出路径。
3.  您的 css 文件已损坏或语法不正确。
4.  您正在使用较早版本的 JavaFX，该版本难以从 css 中设置上下文菜单的样式。

**更新**

查看通过 fxml 加载 css 文件的问题中的完整代码，我可以重现上下文菜单未设置样式的问题。如果不是在 fxml 中设置样式表，而是在代码中设置*场景*中的样式表（如在我的测试应用程序中），那么一切正常。

通过 fxml 设置 css 的区别在于，fxml 不是在场景上设置样式表，而是在场景的父根节点上设置。如果在代码中我将样式表添加到父级而不是场景，那么我最终会从代​​码实现中得到与 fxml 相同的行为。所以这并不是 fxml 本身的问题，而是 JavaFX 2.2 css 处理的继承规则的问题。IMO，css处理是错误的 - 无论样式表是在场景中还是在场景的根节点上设置的，样式都应该是相同的。

[我建议在http://javafx-jira.kenai.com](http://javafx-jira.kenai.com)上提交一个针对 JavaFX 运行时控件的错误，并附上您的测试用例和返回此 StackOverflow 问题的链接，JavaFX 团队将在适当的时候解决该问题。

作为一种解决方法，现在只需在代码中的场景中设置您的样式表。

* * *

**更新**

此问题的根本原因似乎是[RT-19435: popup control not styled be parent's style sheet declarations](http://javafx-jira.kenai.com/browse/RT-19435)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T06:44:31.603

```
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.ContextMenu;
import javafx.scene.control.Label;
import javafx.scene.control.MenuItem;
import javafx.scene.control.TextArea;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.GridPane;
import javafx.stage.Stage;
import javafx.geometry.Insets;

/**
 *
 * @author nidhi.a.agrawal
 */
public class Context extends Application {

    @Override
    public void start(Stage stage) throws Exception {
      //  Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

        TextArea notification = new TextArea();
        ContextMenu contextMenu = new ContextMenu();

        Node itemIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_createnew.png")));
        Node con_test_hierIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_Configure_Test _Hierachy.png")));
        Node cutIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_cut.png")));
        Node copyIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_copy.png")));
        Node pasteIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_paste.png")));
        Node insertIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_insert.png")));
        Node editIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_edit.png")));
        Node renameIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_rename.png")));
        Node deleteIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_delete.png")));
        Node tagIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_tag.png")));
        Node refreshIcon = new ImageView(new Image(getClass().getResourceAsStream("icon_refresh.png")));

        MenuItem sap_new = new MenuItem("Create New Sap System", itemIcon);
        MenuItem con_test_hier = new MenuItem("Configure Test Hierarchy", con_test_hierIcon);
        MenuItem cut = new MenuItem("Cut", cutIcon);
        MenuItem copy = new MenuItem("Copy", copyIcon);
        MenuItem paste = new MenuItem("Paste", pasteIcon);
        MenuItem insert = new MenuItem("Insert", insertIcon);
        MenuItem edit = new MenuItem("Edit", editIcon);
        MenuItem rename = new MenuItem("Rename", renameIcon);
        MenuItem delete = new MenuItem("Delete", deleteIcon);
        MenuItem tag = new MenuItem("Tag", tagIcon);
        MenuItem refresh = new MenuItem("Refresh", refreshIcon);

         contextMenu.getItems().addAll(sap_new,con_test_hier,cut,copy,paste,insert,edit,rename,delete,tag,refresh);
notification.setContextMenu(contextMenu);
 Group root = new Group();
        root.getChildren().add(notification);
         Scene scene = new Scene(root);
          scene.getStylesheets().add(Context.class.getResource("contextcolor.css").toExternalForm());
        stage.setScene(scene);
        stage.show();

       }
public static void main(String[] args) {
        launch(args);
    }
} 
```

对于这些菜单，我设置了如下样式：---

.

```
root {
  -fx-background-color: cornsilk; 
  -fx-padding: 10;
}

.context-menu {
  -fx-background-color: #C8CFD7;
  -fx-border-color: #BBC2CC;
  -fx-text-fill: white;
}

.menu-item .label {
  -fx-fill:red;
    -fx-font-family:tahoma;
    -fx-font-size: 12px;;
    -fx-stroke:#C8CFD7;
    -fx-strok-width:.25;
}

.menu-item:focused .label {
  -fx-text-fill: white;
}
.menu-item{
    -fx-border-color: #DDDEE2 transparent #B9C0C8 transparent;

    -fx-border-width:0.50px;

}
.menu-item:focused {
     -fx-background: -fx-accent;
     -fx-background-color: #7092BE;
     -fx-text-fill: -fx-selection-bar-text;
} 
```

它运行良好，我可以更改背景颜色、边框颜色、设置图标等。