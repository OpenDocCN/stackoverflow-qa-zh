# StackOverflow 问答 11021000-11021999

# knockout.js - KO：“Throttle”扩展器是否会降低 PausableComputed 的实用性？

> ID：11021002
> 
> 赞同：0
> 
> 时间：2012-06-13T18:21:56.220
> 
> 标签：knockout.js, knockout-2.0

像我之前的许多其他 Knockout 开发人员一样，我[在 IE 中遇到了“运行缓慢的脚本”警告](https://stackoverflow.com/q/10316957/109941)。

在分析我的客户端脚本之前，我想看看其他人是如何解决类似问题的。[顺便说一下，这是我找到[的最好的 Knockout 分析建议](http://www.coderenaissance.com/2011/10/named-function-expressions-in-jquery.html)。]

*   @RP Niemeyer 建议[PauseableComputeds](http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html)在这些情况下很有用。
    *   他是对的。事实上，PausableComputed在这些情况下很有用*。*我在代码中实现了 PauseableComputed，它解决了我的问题。
*   但后来，我通过阅读[这个答案发现了](https://stackoverflow.com/a/9077264/109941)[“油门”扩展器](http://knockoutjs.com/documentation/throttle-extender.html)。

* * *

这是我的两部分问题：

1.  引入扩展器是为了解决PauseableComputeds`throttle`试图解决的相同问题吗？
2.  解决 IE 中“运行缓慢的脚本”警告的两个同样好的结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:46:42.277

是的，`throttle`扩展器在 KO 2.0 中添加了对核心的更改，以帮助处理这种类型的场景。

可暂停想法的唯一优点是您可以选择何时暂停和恢复它，而不是在扩展器中使用时间阈值。

# sql-server-2008 - 预览查询时 Pentaho 报表设计器中的 java.lang.NullPointerException 异常

> ID：11021004
> 
> 赞同：1
> 
> 时间：2012-06-13T18:22:03.343
> 
> 标签：sql-server-2008, nullpointerexception, pentaho, pentaho-report-designer

我是报表设计器的新手，正在尝试创建我的第一个报表。我创建了一个 JDBC 数据源，但是当我尝试预览查询时，我得到一个错误异常：

> java.lang.NullPointerException

当我的查询没有“加入”时，我可以预览结果，所以我认为这与此有关。我的 sql 查询如下所示：

```
select
table1.column_x, --data type: tinyint
table2.column_y --data type: varchar(max)
from schema_name.table_one as table1
left join schema_name.table_two as table2
on table1.table_two_key = table2.key 
```

当我没有从第二个表中选择任何内容时，它将返回预览结果：

```
select
table1.column_x
from schema_name.table_one as table1
left join schema_name.table_two as table2
on table1.table_two_key = table2.key 
```

当我从第二个表中选择要选择的键时，它也会返回预览结果：

```
select
table1.column_x,
table2.key --data type: bigint
from schema_name.table_one as table1
left join schema_name.table_two as table2
on table1.table_two_key = table2.key 
```

我正在使用报表设计器 3.9.0。

有 3 个空点异常，这是我通过单击“复制到剪贴板”得到的结果：

> java.lang.NullPointerException at javax.swing.JTable.prepareRenderer(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source) at javax.swing.plaf.ComponentUI.update(Unknown Source) at javax.swing.JComponent.paintComponent(Unknown Source) at javax.swing.JComponent.paint( Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source) at javax.swing.JComponent.paint(Unknown Source) at javax.swing.JViewport.paint(Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source ) 在 javax.swing.JComponent.paint(Unknown Source) 在 javax.swing.JComponent.paintChildren(Unknown Source) 在 javax.swing.JComponent.paint(Unknown Source) 在 javax.swing.JComponent。paintChildren(Unknown Source) at javax.swing.JComponent.paint(Unknown Source) at javax.swing.JLayeredPane.paint(Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source) at javax.swing.JComponent.paintToOffscreen( Unknown Source) 在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source) 在 javax.swing.RepaintManager$PaintManager.paint(Unknown Source) 在 javax.swing.RepaintManager.paint(Unknown Source) 在 javax.swing.JComponent。油漆（未知来源）在 java.awt.GraphicsCallback$PaintCallback.run（未知来源）在 sun.awt.SunGraphicsCallback.runOneComponent（未知来源）在 sun.awt.SunGraphicsCallback.runComponents（未知来源）在 java.awt.Container。在 javax.swing.RepaintManager 的 java.awt.Window.paint(Unknown Source) 上的paint(Unknown Source)。javax.swing.RepaintManager.paintDirtyRegions(Unknown Source) at javax.swing.RepaintManager.seqPaintDirtyRegions(Unknown Source) at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknown Source) at java.awt.event 的paintDirtyRegions(Unknown Source)。 InvocationEvent.dispatch(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread。 pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.awt.Dialog。 show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component。setVisible(Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog.setVisible(Unknown Source) at org.pentaho.reporting.libraries.designtime.swing.background.DataPreviewDialog.showData(DataPreviewDialog. java:133) at org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog$PreviewAction.actionPerformed(JdbcDataSourceDialog.java:141) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing.AbstractButton$ Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java. awt.Component.processMouseEvent(Unknown Source) at javax.swing.JComponent.processMouseEvent(Unknown Source) at java。awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt。 Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container。 dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(未知源）在 java.awt.EventDispatchThread.pumpEventsForFilter（未知源）在 java.awt。EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.awt。 Dialog.show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component.setVisible(Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog。 setVisible(Unknown Source) at org.pentaho.reporting.libraries.designtime.swing.CommonDialog.performEdit(CommonDialog.java:156) at org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog.performConfiguration(JdbcDataSourceDialog.java :759) 在 org.pentaho.reporting.designer.core.actions.report.AddDataFactoryAction 的 org.pentaho.reporting.ui.datasources.jdbc.JdbcDataSourcePlugin.performEdit(JdbcDataSourcePlugin.java:67)。actionPerformed(AddDataFactoryAction.java:79) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing .DefaultButtonModel.setPressed(Unknown Source) at javax.swing.AbstractButton.doClick(Unknown Source) at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source) at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased (未知源) 在 java.awt.AWTEventMulticaster.mouseReleased(未知源) 在 java.awt.Component.processMouseEvent(未知源) 在 javax.swing.JComponent.processMouseEvent(未知源) 在 java.awt.Component.processEvent(Unknown源）在 java.awt.Container.processEvent（未知源）在 java.awt.Component。dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent( Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source ) 在 java.awt.EventQueue.dispatchEvent(Unknown Source) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) 在 java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) 在java.awt.EventDispatchThread。java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)
> 
> java.lang.NullPointerException at javax.swing.JTable.prepareRenderer(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source) at javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source) at javax.swing.plaf.ComponentUI.update(Unknown Source) at javax.swing.JComponent.paintComponent(Unknown Source) at javax.swing.JComponent.paint( Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source) at javax.swing.JComponent.paint(Unknown Source) at javax.swing.JViewport.paint(Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source ) 在 javax.swing.JComponent.paint(Unknown Source) 在 javax.swing.JComponent.paintChildren(Unknown Source) 在 javax.swing.JComponent.paint(Unknown Source) 在 javax.swing.JComponent。paintChildren(Unknown Source) at javax.swing.JComponent.paint(Unknown Source) at javax.swing.JLayeredPane.paint(Unknown Source) at javax.swing.JComponent.paintChildren(Unknown Source) at javax.swing.JComponent.paintToOffscreen( Unknown Source) 在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source) 在 javax.swing.RepaintManager$PaintManager.paint(Unknown Source) 在 javax.swing.RepaintManager.paint(Unknown Source) 在 javax.swing.JComponent。油漆（未知来源）在 java.awt.GraphicsCallback$PaintCallback.run（未知来源）在 sun.awt.SunGraphicsCallback.runOneComponent（未知来源）在 sun.awt.SunGraphicsCallback.runComponents（未知来源）在 java.awt.Container。在 javax.swing.RepaintManager 的 java.awt.Window.paint(Unknown Source) 上的paint(Unknown Source)。javax.swing.RepaintManager.paintDirtyRegions(Unknown Source) at javax.swing.RepaintManager.seqPaintDirtyRegions(Unknown Source) at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknown Source) at java.awt.event 的paintDirtyRegions(Unknown Source)。 InvocationEvent.dispatch(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread。 pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.awt.Dialog。 show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component。setVisible(Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog.setVisible(Unknown Source) at org.pentaho.reporting.libraries.designtime.swing.background.DataPreviewDialog.showData(DataPreviewDialog. java:133) at org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog$PreviewAction.actionPerformed(JdbcDataSourceDialog.java:141) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing.AbstractButton$ Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java. awt.Component.processMouseEvent(Unknown Source) at javax.swing.JComponent.processMouseEvent(Unknown Source) at java。awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt。 Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container。 dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(未知源）在 java.awt.EventDispatchThread.pumpEventsForFilter（未知源）在 java.awt。EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.awt。 Dialog.show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component.setVisible(Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog。 setVisible(Unknown Source) at org.pentaho.reporting.libraries.designtime.swing.CommonDialog.performEdit(CommonDialog.java:156) at org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog.performConfiguration(JdbcDataSourceDialog.java :759) 在 org.pentaho.reporting.designer.core.actions.report.AddDataFactoryAction 的 org.pentaho.reporting.ui.datasources.jdbc.JdbcDataSourcePlugin.performEdit(JdbcDataSourcePlugin.java:67)。actionPerformed(AddDataFactoryAction.java:79) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing .DefaultButtonModel.setPressed(Unknown Source) at javax.swing.AbstractButton.doClick(Unknown Source) at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source) at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased (未知源) 在 java.awt.AWTEventMulticaster.mouseReleased(未知源) 在 java.awt.Component.processMouseEvent(未知源) 在 javax.swing.JComponent.processMouseEvent(未知源) 在 java.awt.Component.processEvent(Unknown源）在 java.awt.Container.processEvent（未知源）在 java.awt.Component。dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent( Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source ) 在 java.awt.EventQueue.dispatchEvent(Unknown Source) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) 在 java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) 在java.awt.EventDispatchThread。java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)
> 
> java.lang.NullPointerException 在 javax.swing.JTable.prepareRenderer(Unknown Source) 在 javax.swing.ToolTipManager$insideTimerAction.actionPerformed(Unknown Source) 在 javax.swing.JTable.getToolTipText(Unknown Source) 在 javax.swing.Timer。 fireActionPerformed(Unknown Source) at javax.swing.Timer$DoPostEvent.run(Unknown Source) at java.awt.event.InvocationEvent.dispatch(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt。 EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog java.awt.Dialog 的 java.security.AccessController.doPrivileged(Native Method) 的 $3.run(Unknown Source)。show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component.setVisible(Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog.setVisible( Unknown Source) at org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog$PreviewAction.actionPerformed(JdbcDataSourceDialog .java:141) 在 javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) 在 javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) 在 javax.swing.DefaultButtonModel 的 javax.swing.AbstractButton.fireActionPerformed(Unknown Source)。 setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java.awt.Component。processMouseEvent(Unknown Source) at javax.swing.JComponent.processMouseEvent(Unknown Source) at java.awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl( Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source ) 在 java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) 在 java.awt.Container.dispatchEventImpl(Unknown Source) 在 java.awt.Window.dispatchEventImpl(Unknown Source) 在 java.awt.Component.dispatchEvent(Unknown Source) 在java.awt.EventDispatchThread 中的 java.awt.EventQueue.dispatchEvent(Unknown Source)。pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.Dialog$1.run(Unknown Source) at java.awt.Dialog$3。在 java.awt.Dialog.show(Unknown Source) at java.awt.Component.show(Unknown Source) at java.awt.Component.setVisible( Unknown Source) at java.awt.Window.setVisible(Unknown Source) at java.awt.Dialog.setVisible(Unknown Source) at org.pentaho.reporting.libraries.designtime.swing.CommonDialog.performEdit(CommonDialog.java:156)在 org.pentaho.reporting.ui.datasources.jdbc.JdbcDataSourcePlugin 的 org.pentaho.reporting.ui.datasources.jdbc.ui.JdbcDataSourceDialog.performConfiguration(JdbcDataSourceDialog.java:759)。performEdit(JdbcDataSourcePlugin.java:67) at org.pentaho.reporting.designer.core.actions.report.AddDataFactoryAction.actionPerformed(AddDataFactoryAction.java:79) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing。 AbstractButton$Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.AbstractButton.doClick(Unknown Source) at javax.swing。 plaf.basic.BasicMenuItemUI.doClick(Unknown Source) at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown Source) at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source) at java.awt.Component.processMouseEvent(未知源）在 java.awt.Component 的 javax.swing.JComponent.processMouseEvent（未知源）。processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(未知源) 在 java.awt.LightweightDispatcher.retargetMouseEvent(未知源) 在 java.awt.LightweightDispatcher.processMouseEvent(未知源) 在 java.awt.LightweightDispatcher.dispatchEvent(未知源) 在 java.awt.Container.dispatchEventImpl(未知源) ) 在 java.awt.Window.dispatchEventImpl(Unknown Source) 在 java.awt.Component.dispatchEvent(Unknown Source) 在 java.awt.EventQueue.dispatchEvent(Unknown Source) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) 在java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) 在 java.awt.EventDispatchThread。pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source)

# pentaho - Pentaho Data Integration (Kettle) 支持的 I/O 格式列表

> ID：11021009
> 
> 赞同：0
> 
> 时间：2012-06-13T18:22:24.027
> 
> 标签：pentaho, kettle, data-integration

我想知道在哪里可以找到 Pentaho 的数据集成产品支持的 I/O 格式的官方列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:13:05.410

我找不到任何其他资源，但不妨检查一下 wiki。大多数 I/O 格式在 Category 列中列为 Input 或 Output。

[http://wiki.pentaho.com/display/EAI/Pentaho+Data+Integration+Steps](http://wiki.pentaho.com/display/EAI/Pentaho+Data+Integration+Steps)

太糟糕了，类别列无法排序。

# c# - 使用 Parallel.For 处理时 Kinect 深度图像闪烁

> ID：11021010
> 
> 赞同：0
> 
> 时间：2012-06-13T18:22:28.933
> 
> 标签：c#, kinect

我正在将 Kinect 中的深度数据转换为图像（Bgr565 格式）。当我使用标准 for 循环遍历深度像素数组（将它们映射到颜色）时，我得到了一个很好的平滑图像。但是当我使用 Parallel.For 时，我得到一个闪烁的图像。

这是代码部分。任何帮助将不胜感激：

```
// === Single-threaded depth to color conversion ===
        for (int i = 0; i < depthPixelsArray.Length; ++i)
        {
            depth = (short)(depthPixelsArray[i] >> DepthImageFrame.PlayerIndexBitmaskWidth);
            if (depth >= colorBoundary)
                unchecked { colorPixelsArray[i] = (short)0xF800; }
            else colorPixelsArray[i] = depth;
        }

// === Multi-threaded depth to color conversion ===
 Parallel.For (0, depthPixelsArray.Length, delegate(int i)
            {
                depth = (short)(depthPixelsArray[i] >> DepthImageFrame.PlayerIndexBitmaskWidth);
                if (depth >= colorBoundary)
                    unchecked { colorPixelsArray[i] = (short)0xF800; }
                else colorPixelsArray[i] = depth;
            }
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:41:47.520

如果您在并行处理进行时渲染它们，似乎会发生这种情况。在单线程的情况下，渲染和处理可能是顺序操作，所以看起来都不错。当您调用 Parallel.For 时，您得到的只是[ParallelLoopResult](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopresult.aspx)但循环尚未完成。渲染这个仍在处理的结果可能是您闪烁的原因。在继续渲染之前，您需要确保在结果上设置了[IsCompleted 。](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopresult.iscompleted.aspx)

希望有帮助！

# c# - 缺少流畅的 NHibernate NaturalId？

> ID：11021017
> 
> 赞同：0
> 
> 时间：2012-06-13T18:22:50.033
> 
> 标签：c#, orm, fluent-nhibernate

我正在尝试做一个非常简单的映射。我正在关注 NHibernate 3.0 Cookbook，我遇到了 FluentNHibernate.dll 中缺少 NaturalId() 方法的问题。这本书让我建立了这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FluentNHibernate.Mapping;
using Eg.Core;

namespace Eg.FluentMappings.Mappings
{
    public class ProductMapping : ClassMap<Product>
    {
        public ProductMapping()
        {
            Id(p => p.Id)
                .GeneratedBy.GuidComb();
            DiscriminateSubClassesOnColumn("ProductType");
            Version(p => p.Version);
            NaturalId()
                .Not.ReadOnly()
                .Property(parentIsRequired => parentIsRequired.Name);
            Map(p => p.Description);
            Map(p => p.UnitPrice)
                .Not.Nullable();
        }
    }
} 
```

当我尝试编译它时，我收到一个错误：名称“NaturalId”在当前上下文中不存在。我是否缺少另一个 dll 或其他什么？

我环顾四周，发现了很多。这是一个似乎已经回答的问题，但我无法使用`map.NaturalId()`or让它工作`Map.NaturalId()`。[SharpArchitecture / Fluent NHibernate](https://stackoverflow.com/questions/4489576/sharparchitecture-fluent-nhibernate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:48:17.323

找到了答案。不知道为什么，但您必须在 NaturalId() 上使用 base 关键字。以下是我修改后的课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FluentNHibernate.Mapping;
using Eg.Core;

namespace Eg.FluentMappings.Mappings
{
    public class ProductMapping : ClassMap<Product>
    {
        public ProductMapping()
        {
            Id(p => p.Id)
                .GeneratedBy.GuidComb();
            DiscriminateSubClassesOnColumn("ProductType");
            Version(p => p.Version);
            base.NaturalId()
                .Not.ReadOnly()
                .Property(parentIsRequired => parentIsRequired.Name);
            Map(p => p.Description);
            Map(p => p.UnitPrice)
                .Not.Nullable();
        }
    }
} 
```

# android - 如何通过多个操作来制定意图

> ID：11021021
> 
> 赞同：36
> 
> 时间：2012-06-13T18:23:04.050
> 
> 标签：android, android-intent

我想显示一个活动选择器，显示所有可以查看**和/或**编辑某些数据的应用程序。有没有一种简单的方法可以做到这一点，还是我必须实现自己的活动选择器对话框？或者我可以只是子类`Intent`？谢谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-14T17:31:53.630

我通过使用 EXTRA_INITIAL_INTENTS 找到了部分解决方案：

```
Intent viewIntent = new Intent(Intent.ACTION_VIEW);
Intent editIntent = new Intent(Intent.ACTION_EDIT);
viewIntent.setDataAndType(uri, type);
editIntent.setDataAndType(uri, type);
Intent chooserIntent = Intent.createChooser(editIntent, "Open in...");
chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Intent[] { viewIntent });
startActivity(chooserIntent); 
```

我之所以说部分是因为如果一个应用程序同时支持 ACTION_VIEW 和 ACTION_EDIT ，它将在列表中显示两次，其中一个将打开文件进行查看，另一个将打开文件进行编辑，您不一定知道哪个是哪个。正如 Tim 所建议的，我认为一个完整的解决方案需要一个自定义应用程序选择器。

**编辑（完整的解决方案！）：**

我找到了一个不涉及编写自定义应用程序选择器的解决方案。为了将 ACTION_EDIT 应用程序与 ACTION_VIEW 应用程序区分开来，我找到了一种方法，通过使用 Tim 提供的代码行，将“（用于编辑）”字符串附加到其中一个（在我的情况下为 ACTION_EDIT）的标签上。此外，为了确保附加的字符串看起来不是应用程序名称的一部分，我将它的颜色更改为青色：

```
PackageManager pm = kyoPrint.getPackageManager();
Intent viewIntent = new Intent(Intent.ACTION_VIEW);
Intent editIntent = new Intent(Intent.ACTION_EDIT);
viewIntent.setDataAndType(uri, type);
editIntent.setDataAndType(uri, type);
Intent openInChooser = Intent.createChooser(viewIntent, "Open in...");

// Append " (for editing)" to applicable apps, otherwise they will show up twice identically
Spannable forEditing = new SpannableString(" (for editing)");
forEditing.setSpan(new ForegroundColorSpan(Color.CYAN), 0, forEditing.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
List<ResolveInfo> resInfo = pm.queryIntentActivities(editIntent, 0);
Intent[] extraIntents = new Intent[resInfo.size()];
for (int i = 0; i < resInfo.size(); i++) {
    // Extract the label, append it, and repackage it in a LabeledIntent
    ResolveInfo ri = resInfo.get(i);
    String packageName = ri.activityInfo.packageName;
    Intent intent = new Intent();
    intent.setComponent(new ComponentName(packageName, ri.activityInfo.name));
    intent.setAction(Intent.ACTION_EDIT);
    intent.setDataAndType(uri, type);
    CharSequence label = TextUtils.concat(ri.loadLabel(pm), forEditing);
    extraIntents[i] = new LabeledIntent(intent, packageName, label, ri.icon);
}

openInChooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, extraIntents);
startActivity(openInChooser); 
```

![在此处输入图像描述](../Images/75bd2077752a537a23b73aee1faa712f.png)

**编辑 2：错误**

如果第一个意图没有找到任何活动，则将显示 NO 活动，包括第二个意图找到的任何活动。我最终编写了自己的选择器。我刚刚填充了一个 ExpandableListView，其中包含每种意图类型的标题，并将它们各自的活动作为子项（存储为单独的 LabeledIntents）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T18:30:54.667

取决于你的数据是什么。但通常使用 ACTION_VIEW 并附加一些数据，您可以使用 IntentChoooser 向用户填充选项列表。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "some data");  
startActivity(Intent.createChooser(intent, "Open with")); 
```

请务必正确设置您的类型，以便应用程序知道您要打开它们可能能够处理的东西。

**编辑：**我认为您必须使用包管理器查询来获取您的两个列表，然后将它们组合成一个并制作您自己的活动/对话框，该活动/对话框将弹出并填充您组合列表中包含的数据。

这是进行查询的示例：

```
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(intent, 0); 
```

因此，如果您创建两个 Intent 并调用它两次，传入每个 Intent，您应该能够组合结果列表以获得您的全部可能性。然后是创建一个活动或对话框来显示它们。

# javascript - 在 Rails 中，如何强制更新客户端的 js/css 文件？

> ID：11021022
> 
> 赞同：0
> 
> 时间：2012-06-13T18:23:18.177
> 
> 标签：javascript, css, ruby-on-rails, caching, static-files

当我使用`javascript_include_tag`或`stylesheet_link_tag`包含文件时，它们末尾有一个数字，以便更容易绕过浏览器缓存（更新文件而不更改数字，浏览器仍然使用缓存版本；更改数字，浏览器将下载并使用更新的文件）。

但是这个数字是从哪里来的呢？什么时候更新？以及如何手动更新它？

我仍在使用 Rails 2.3.9，但我想任何版本的 Rails 的答案都会有帮助，因为我找不到任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:34:54.327

基本上，在 Rails 2 中，数字来自文件的最后修改日期，并作为查询参数添加到链接中。在 Rails 3 中，它来自文件内容的散列，并被添加到文件名本身。后者应该是一种改进 -有关两者之间差异的更多信息，请参阅[此页面。](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:33:38.423

阅读[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)

# android - 带有列表选择项的警报框保持为空

> ID：11021026
> 
> 赞同：1
> 
> 时间：2012-06-13T18:23:35.820
> 
> 标签：android, android-alertdialog, android-dialog

我想在几个按钮的 Onclick 事件中检查一些 Spinner 控件（如果用户离开 Activity），如果一个或多个未填写，则向用户显示带有 2 个选项的警告消息：

```
@Override
public void onClick(View v) {

    int i1 = spinner1.getSelectedItemPosition();
        (..)

    if ((i1 == 0) | (i2 == 0) | (i3 == 0) | (i4 == 0) | (i5 == 0)) {
        AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
        alertbox.setMessage("Answers missing, what do you want to do?");
        final CharSequence[] items = {
                "Oops.. let me fix that…",
                "I want to leave the app now" };
        alertbox.setTitle("Pick an item");
        alertbox.setItems(items, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                if (item == 1) {
                                        finish();
                                      // should lead back to the spinner controls on the page

                }else if (item == 2){
                    finish();
                android.os.Process.killProcess(android.os.Process
                            .myPid());
                }
            }
        }).create();
        alertbox.show(); 
```

但是，我只看到一个带有标题的空框，但没有显示使用 setMessage() 设置的消息，并且我没有得到任何列表项供选择 - 框是空的！知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T22:59:03.817

我一直有同样的问题，我发现如果我删除 .setMessage 行，那么列表就会出现标题。不知道为什么会这样。如果您使用 .setpositive 按钮、.negative 等，那么您可以收到一条消息。我还注意到谷歌示例都没有使用带有项目列表的 .setMessage 。他们只使用 .setTitle，它不会给你太多空间。
因此，虽然如果您想要一条长消息，这对您没有帮助，但如果这是您的主要目标，它将使您的列表可见。

# html - Firefox 文本比 chrome 和 ie 低 1px

> ID：11021028
> 
> 赞同：9
> 
> 时间：2012-06-13T18:23:40.977
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

这真让我抓狂。Firefox 文本比 chrome 和 ie 低 1px。这不是 html 或 body 上的边距或填充问题，尝试过。似乎也不是一个四舍五入的问题。这是一张图片：

![在此处输入图像描述](../Images/90ebca3ba50e9809eefb1e613fa57e74.png)

第一个“Hello”是 Firefox 13，第二个“Hello”是 IE9，“Hello World”是 Chrome。

这是代码（非常简单）：

```
<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <!-- Always force latest IE rendering engine and chrome frame -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Pixel Bug?</title>
    <style type="text/css">
        html{
            font-size: 100%;
        }
        body{
            font-size: 1em;
            line-height: 1.5;
            background: white url('images/grid16.png') -4px -6px;
        }
        p{
            margin: 1.5em 0;
        }
    </style>
</head>
<body>
    <p>Hello World!</p>
    <p>Hello World 2!</p>
</body>
</html> 
```

这只是一个错误吗？这里发生了什么？我不想只使用 FireFox，我只想了解为什么会这样。

**编辑：**

经过进一步研究，它似乎是一个渲染错误，但它仍然让我感到困惑。例如，文本的高度应为 24px。这不应该真正导致会导致这种情况的舍入错误。然而，如果我将 line-height 显式更改为 23px，它就会对齐。我不知道为什么。

**EDIT2：**可能的原因？[https://bugzilla.mozilla.org/show_bug.cgi?id=442139](https://bugzilla.mozilla.org/show_bug.cgi?id=442139)

**EDIT3：**使用 20px 字体和 40px 行高排列。让我觉得这就是渲染错误。这很糟糕，因为 16/24 非常标准：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:26:46.420

在这里查看我之前的答案:: [CSS white-space 和 list-style-image 在 Firefox 11+ 中不堆叠](https://stackoverflow.com/a/10996086/1085285)

您没有使用 reset.css 从而产生问题

[在这里你可以找到 reset.css 的许多链接](https://stackoverflow.com/q/116754/1085285) 使用 reset.css 的原因是因为它将所有用户代理（浏览器）css 设置为基本设置，因此它们在不同的浏览器中看起来不会有所不同。

**编辑::** 因为 OP 使用了 reset.css 。我无法重现该问题。所以其他原因可能是

*   不同broser引擎的字体渲染问题。没有特别的修复[阅读更多](https://webmasters.stackexchange.com/questions/9972/how-can-i-make-fonts-render-the-same-way-across-different-web-browsers)
*   硬件问题。[Joel 在他的博客中谈到了这一点。](http://www.joelonsoftware.com/items/2007/06/12.html)

另外，我同意@steveax 所说的。

**编辑 2::** 如果你想深入了解它。

*   提出一个错误
*   [尝试自己调整浏览器](http://www.ghacks.net/2011/03/23/blurry-fonts-in-firefox-try-anti-aliasing-tuner/)

# linker - 意外的链接器部分输出位置

> ID：11021032
> 
> 赞同：0
> 
> 时间：2012-06-13T18:24:03.183
> 
> 标签：linker, ld, linker-scripts, multiboot

我正在尝试`ld`在内核的程序集文件上使用 linux 中的命令。要使用 grub 启动，它需要位于 1Mb 地址之后。所以我的链接脚本有文本到地址 0x00100000。

这是我正在使用的链接器脚本：

```
 SECTIONS {
       .text 0x00100000 :{
            *(.text)
       }
       textEnd = .;
       .data :{
            *(.data)
            *(.rodata)
       }
       dataEnd = .;
       .bss :{
            *(.common)
            *(.bss)
       }
       bssEnd = .;
    } 
```

我的问题是关于输出文件。当我查看文件的二进制文件时，文本部分从 0x1000 开始。当我更改脚本中的文本位置并使用低于 0x1000 的地址（例如 0x500）时，文本将从那里开始。但是每当我超过 0x1000 时，它就会将其四舍五入（0x2500 会将文本放在 0x500 处）。

当我指定文本应该在 0x100000 时，它不应该在输出文件中吗？或者二进制文件的另一部分是否指定还有更多工作要做。我问是因为启动我的内核时出现问题，但现在我只是想了解链接器输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:36:39.773

您指的是两个不同的地址空间。您在链接文件中引用的地址（例如 0x1000 和 0x500）只是文件偏移量。链接描述文件中指定的地址，例如 0x00100000，是相对于计算机内存（即 RAM）而言的。

在链接器脚本的情况下，链接器被告知二进制/可执行文件的 .text 部分应加载到 RAM 中的 1MiB 点（即 0x00100000）。这与链接器输出的文件布局无关，而与执行时如何加载文件有关。

实际文件中的部分位置与对齐有关。也就是说，您的链接器似乎将第一部分对齐在 4096 字节边界。例如，如果每个部分的大小小于 4096 字节，并且每个部分都位于 4096 字节的边界，则它们在文件中的相应偏移量将为 0x1000、0x2000、0x3000 等。默认情况下，这种对齐方式也会在文件中保持被加载到 RAM 中，这样前面的示例将产生位于 0x00100000、0x00101000、0x00102000 等处的部分。

并且似乎当您将加载位置更改为足够小的数字时，链接器会自动更改对齐方式。但是，如果您想手动指定对齐方式，可以使用“对齐”功能。

对于链接器的简短而甜蜜的解释（更详细地描述以上所有内容），我建议：

[http://www.math.utah.edu/docs/info/ld_3.html](http://www.math.utah.edu/docs/info/ld_3.html)

或者

[http://sourceware.org/binutils/docs-2.15/ld/Scripts.html](http://sourceware.org/binutils/docs-2.15/ld/Scripts.html)

# html - 应用程序缓存 html5

> ID：11021039
> 
> 赞同：0
> 
> 时间：2012-06-13T18:24:21.257
> 
> 标签：html, caching

我正在学习应用程序缓存的工作原理，但我遇到了问题。

我创建了清单文件并将其“导入”到我的 index.html 中。在我添加的 offline.manifest 文件中：

```
CACHE MANIFEST
34567.js 
```

在我的索引文件中：

```
<html manifest="offline.manifest"> 
```

我在本地主机上工作，但是当我尝试搜索脚本时，我什么也没得到。我也删除了缓存，但结果是一样的。

我阅读了有关创建 .htaccess 文件的信息，并使用以下字符串创建了它： AddType text/cache-manifest .manifest

但是，我会把它放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:25:47.973

`.htaccess`只要您正确编写指令路径，Apache 的配置 Web 服务器的文件就可以放在目录树中的任何位置。根据语法`AddType text/cache-manifest .manifest`，您需要将 保存在与此处`.htaccess`的文件相同的目录中。`.manifest`

通过 StackExchange 网络查看[这个非常相似的问题。](https://webmasters.stackexchange.com/questions/15235/where-do-i-create-the-file-htaccess-in-order-to-serve-my-html5-cache-manifest)

如果您没有提供`.manifest`正确的`text/cache-manifest`内容类型，它将被忽略。

# java - 从 JSON 文件中检测和解析转义字符“\”？

> ID：11021041
> 
> 赞同：3
> 
> 时间：2012-06-13T18:24:22.497
> 
> 标签：java, android, json

我在处理 JSON 文件的数据时遇到问题。我正在使用来自谷歌的以下链接。

```
http://www.google.com/finance/company_news?q=AAPL&output=json" 
```

当我想解析数据并将其放在屏幕上时，就会出现我的问题。由于某种原因，数据没有被正确解码。

原始数据：

```
 1.) one which must have set many of the company\x26#39;s board on the edge of their
 2.) Making Less Money From Next \x3cb\x3e...\x3c/b\x3e 
```

当我引入数据时，我会执行以下操作：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
is = httpEntity.getContent();        
BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8); 
StringBuilder sb = new StringBuilder();
String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
}
is.close();
json = sb.toString(); 
```

我收到的输出，使用 org.json 从 json 文件中提取数据，如下（注意缺少反斜杠）：

```
1.)one which must have set many of the companyx26#39;s board on the edge of their
2.)Making Less Money From Next x3cbx3e...x3c/bx3e 
```

我目前处理第一个问题的方法是：

```
JSONRowData.setJTitle((Html.fromHtml((article.getString(TAG_TITLE).replaceAll("x26", "&")))).toString()); 
```

第二个虽然逃脱了我（没有双关语）

我认为这不起作用的原因是反冲用于转义字符。我尝试了许多不同的方法来读取数据，但我没有运气。有没有办法在不使用正则表达式的情况下导入数据来处理这个问题？

* * *

**解决方案**

我们今天的克星：“\​​x26”——ASCII（十六进制）

将原始数据读入字符数组。来自 apache 的 commons.io 库是一个很好的方法。完成此操作后，在 for 循环中读取 char 数组以查找“\”，如果命中则在下一个数组位置查找“x”。如果再次命中，则取 char 数组中的下两个字符。这两个字符是您的 ASCII 十六进制值。将十六进制转换为十进制形式，然后将十进制转换为字符。获取此字符并将其附加到字符串生成器。

如果没有匹配（带有“\”），则将字符附加到字符串生成器。我们现在可以调用该`.toString()`方法并将其转换为字符串。

从那里，数据可能包含一些 HTML 残余（'和/或**在这种情况下）。使用 Html.fromHtml() 处理了这个。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:22:24.490

这里的问题是 google - 或者至少是那个 url -[提供了*无效*的JSON](http://json.org/) ^(1,2)。JSON 库虽然没有直接拒绝无效的 JSON，但正在以“好吧，让我们忽略这个\废话并继续”的方式对其进行解析。也就是说，不是*渲染*错误，而是*输入*错误。

¹*不允许*出现`\x`在字符串中（除非*本身*`\`已转义），因为（`\`未转义时）后面只能跟一小部分字符（不包括`x`）。字符代码的转义必须由`\u1234`and not完成`\x12`。

我能想到的唯一“修复”是非常严重的黑客攻击：即阅读原始文本并转换`\x12`为`\u0012`. （实际上，黑客攻击并没有*那么*糟糕，因为不需要考虑上下文相关的东西；但是，它不应该*是*必需的！在 Google 上感到羞耻。）

²提取的*无效*JSON 字符串文字：

> “苹果公司（纳斯达克股票代码：AAPL）的股票在今年的表现中继续领跑大型科技股。在周一开始的关键事件之后，该股的价格没有出现重大变动。”

（要使其有效，请替换`\x26`为`\u0026`or `&`。）

快乐的编码和 - 祝你好运:)

* * *

在 Java 中，一种 [未经测试的] 方法可能是使用正则表达式（通过`String.replaceAll`）：

```
inputString.replaceAll("\\x(\d{2})", "\\u00$1") 
```**

# google-maps-api-3 - google api最近的一对点

> ID：11021042
> 
> 赞同：0
> 
> 时间：2012-06-13T18:24:32.413
> 
> 标签：google-maps-api-3, points

是否有谷歌 api 可以计算最接近的点对？我可以在哪里给它很多积分，它会计算它们之间的最短路线？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:34:33.527

距离矩阵对你有用吗？ [https://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)

# postgresql - 最佳数据库连接池大小

> ID：11021046
> 
> 赞同：2
> 
> 时间：2012-06-13T18:24:47.707
> 
> 标签：postgresql, glassfish-3, connection-pooling

我已经读到您应该保持数据库连接池中的连接数低于应用程序服务器中运行的线程数，并且可能正确使用该池？我也读过，拥有大量连接并不好，但我真的不知道为什么？它会使用更多的内存吗？现在在挑选时间，我的服务器连接不足，我不知道仅仅增加连接数会很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:03:06.590

使用小型连接池，您可以更快地访问连接表，但可能没有足够的连接来满足请求。

另一方面，对于大型连接池，有更多连接来满足请求，请求将在队列中花费更少（或没有）时间，但对连接表的访问速度较慢。

[http://docs.oracle.com/cd/E19316-01/820-4343/abehs/index.html](http://docs.oracle.com/cd/E19316-01/820-4343/abehs/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T10:29:06.737

core_count = 4

连接数 = ((core_count * 2) + Effective_spindle_count) = 9

# python - 网络摄像头流和 OpenCV - python

> ID：11021047
> 
> 赞同：8
> 
> 时间：2012-06-13T18:24:49.730
> 
> 标签：python, opencv, webcam

我想使用 python 和 OpenCV 从我的网络摄像头获取视频流，为此我实现了这个简单的代码：

```
import cv

cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)
capture = cv.CaptureFromCAM(0)

def repeat():
  frame = cv.QueryFrame(capture)
  cv.ShowImage("w1", frame)

while True:
  repeat() 
```

当我尝试执行它时，出现以下错误：

```
andfoy@ubuntu:~/Python$ python camera.py
VIDIOC_QUERYMENU: Argumento inválido   
VIDIOC_QUERYMENU: Argumento inválido
VIDIOC_QUERYMENU: Argumento inválido 
```

我按照其他帖子的建议更改了以下行：

```
capture = cv.CaptureFromCAM(0) 
```

到：

```
capture = cv.CaptureFromCAM(-1) 
```

但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T19:32:04.523

您需要`waitkey`在最后添加功能。

下面的一段代码对我来说很好。

```
import cv
cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)
capture = cv.CaptureFromCAM(0)

def repeat():
    frame = cv.QueryFrame(capture)
    cv.ShowImage("w1", frame)

while True:
    repeat()
    if cv.WaitKey(33)==27:
        break

cv.DestroyAllWindows() 
```

如果你不知道，Present OpenCV 使用新的 python api `cv2`，它有很多特性。在那，相同的代码写成：

```
import cv2
import numpy as np
c = cv2.VideoCapture(0)

while(1):
    _,f = c.read()
    cv2.imshow('e2',f)
    if cv2.waitKey(5)==27:
        break
cv2.destroyAllWindows() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T19:12:13.073

下面的代码适用于 python 2.7 和为 python 2.7 构建的 opencv

```
import numpy as np
import cv2

cap = cv2.VideoCapture(0)

if not(cap.isOpened()):
    cap.open()

while(cap.isOpened()):
    ret, frame = cap.read()
    cv2.imshow('frame',frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 
```

# css - div内的CSS Div全宽和全高，相对于彼此

> ID：11021048
> 
> 赞同：2
> 
> 时间：2012-06-13T18:24:58.737
> 
> 标签：css, html, css-position

我正在尝试构建以下布局：

```
+-----------------------------------+
|                                   |
+-----------------------------------+
+-----------------------------------+
| +-------------------------------+ |
| |                               | |
| +-------------------------------+ |
| +-----+  +-------------+ +------+ |
| |     |  | +---------+ | |      | |
| |     |  | |         | | |      | |
| |     |  | |         | | |      | |
| |     |  | +---------+ | |      | |
| |     |  | +---+ +---+ | |      | |
| |     |  | |   | |   | | |      | |
| |     |  | |   | |   | | |      | |
| |     |  | |   | |   | | |      | |   
| |     |  | +---+ +---+ | |      | |
| +-----+  +-------------+ +------+ |
+-----------------------------------+ 
```

但由于某种原因，div 不会扩展到全宽或全高：http: [//jsfiddle.net/vmpgf/](http://jsfiddle.net/vmpgf/)

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:58:23.070

好吧，这会让你非常接近，我在右边的 div 上有一些问题，出于某种原因，它只适合三个中的总 div 宽度加起来为 99%，所以我确信这不是“答案“但会让你靠近。

HTML -

```
<div id="divbanner">Top Banner</div>
<div id="container">
    <div id="banner">
        Banner
    </div>
    <div id="left">
        Left
    </div>
    <div id="center">
        <div id="centertop">
            Center Top
        </div>
        <div id="centerleft">
            Center Left
        </div>
        <div id="centerright">
            Center Right
        </div>
    </div>
    <div id="right">
        Right
    </div>
</div> 
```

CSS -

```
#divbanner {
    width: 100%;
    background: #F45;
}
#container {
    width: 100%;
    background: #00C;
}
#banner {
    width: 100%;
    background: #778;
}
#left {
    width: 30%;
    background: #cc5;
    display: inline-block;
}
#center {
    width: 39%;
    background: #cc7;
    display: inline-block;
}
#right {
    width: 30%;
    background: #cc7;
    display: inline-block;
}
#centertop {
    width: 100%;
    background: #445;
}
#centerleft {
    width: 50%;
    background: #c62;
    float: left;
}
#centerright {
    width: 50%;
    background: #062;
    float: right;
}​ 
```

​在这里试试：http: [//jsfiddle.net/tyDq5/](http://jsfiddle.net/tyDq5/)

# javascript - 如何持续检测是否设置了焦点？（Javascript，jQuery）

> ID：11021050
> 
> 赞同：1
> 
> 时间：2012-06-13T18:25:00.470
> 
> 标签：javascript, jquery, html

我对 Javascript（和 jQuery）很陌生。我的 JSFiddle 确实以最好的方式显示了这个问题。[http://jsfiddle.net/mkLsr/3/](http://jsfiddle.net/mkLsr/3/)

我试图使它成为一个专注于页面加载的搜索框文本输入，因此用户可以在不点击的情况下输入它。但是，我还希望其中的默认文本在用户单击文本输入时消失，如果他们在没有写任何内容的情况下单击文本字段，则会重新出现。

问题是我在页面上有其他文本输入，并且现在正在运行，如果用户单击一个并开始输入，焦点会跳转到最初聚焦的文本输入。我怎样才能阻止这种情况发生？

我尝试使用`if ($('input:focus').size() == 0)`它，所以它只会在没有设置其他焦点的情况下设置焦点。它不起作用是因为它在页面加载后没有重新检查吗？我怎样才能让它重新检查，还是有其他问题？

我认为您可以自动输入的搜索框，其默认文本在输入时会被删除，这与您可以获得的用户友好度差不多 - 但我真的希望在不花费其他输入用户费用的情况下做到这一点 -友善。

任何帮助，将不胜感激！

***** 编辑*******

 **Kai 的 Javascript 解决方案和“占位符”HTML 属性的使用确实帮助了我。（[http://jsfiddle.net/wgwTC/4/](http://jsfiddle.net/wgwTC/4/)）。

我只是好奇是否有人知道如何跨浏览器应用它，以便第一个文本输入仍然是焦点，但占位符文本在加载页面时就在那里。目前它适用于 Chrome，但不适用于 IE（我使用的是 9）或 Firefox（5.0）。如果有一个跨浏览器解决方案，它可能会帮助其他想要在未来项目中使用相同或类似功能的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:52:16.703

这是一个使用该`placeholder`属性但将回退到 IE <= 9 的 JS 的解决方案：（有关工作示例，请参见[http://jsfiddle.net/wgwTC/2/ ）：](http://jsfiddle.net/wgwTC/2/)

```
// Focus on this box by default
$('#header-search-box').focus();

// Support placeholder text for IE <= 9 (which doesn't support placeholder attribute)
if ( $.browser.msie && (parseInt($.browser.version, 10) <= 9) ) {
    $('input[name=search]').attr('value', 'Search New Equipment...');

    // Set placeholder text on blur
    $('input[name=search]').on('blur', function (e) {
        if (!e.currentTarget.value.length) {
            e.currentTarget.value = 'Search New Equipment...';
        }
    });    

    // Clear placeholder text on focus
    $('input[name=search]').on('focus', function (e) {
        if (e.currentTarget.value === 'Search New Equipment...') {
            e.currentTarget.value = '';
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:56:19.867

我认为这可以满足您的要求（假设我理解正确）。

这是小提琴：http: [//jsfiddle.net/jVvX3/2/](http://jsfiddle.net/jVvX3/2/)**

# mysql - Chef中的MySql服务器配方未设置指定密码

> ID：11021058
> 
> 赞同：1
> 
> 时间：2012-06-13T18:25:25.620
> 
> 标签：mysql, chef-infra

我正在尝试使用 chef-solo 在 CentOS 6.2 机器上运行 mysql::server 配方。安装运行正常，但是我在属性 node['mysql']['server_root_password'] 中设置的密码不起作用。当 mysql-install-privileges 即将运行并且我也无法访问 mysql 服务器时，我总是会收到一个错误，无论是否使用我指定的密码。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:20:11.453

问题在于 $$ 字符。一旦我将其更改为另一件事，它就起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:55:49.900

打开您的 MySQL 控制台并以 root 或 SU 身份登录。

```
update mysql.user set password=password('your_password') where user='username'; 
```

只有当您 100% 知道用户在那里并且也有权限时，如果您需要创建用户并授予访问权限，那是另一回事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T17:10:06.820

我遇到了这个问题。我发现如果不将属性设置`node["mysql"]["server_root_password"]`在正常级别，那么它就不会粘住。我通过将以下内容放入包装说明书的默认属性文件中来修复它：

在 chef-repo/WRAPPERCOOKBOOK/attributes/default.rb

```
node.normal["mysql"]["server_root_password"] = "YOUR_PASSWORD" 
```

# css - IE 7 CSS 浮动问题

> ID：11021059
> 
> 赞同：0
> 
> 时间：2012-06-13T18:25:34.633
> 
> 标签：css, internet-explorer-7

我的强制指标类星号及其在 IE7 中的外观存在问题。由于某种原因，星号几乎出现在 City: 标签的顶部，但在 Firefox 和 IE 8 及更高版本中看起来不错。我还包括了 HTML 的受影响部分。任何帮助将不胜感激。

```
.mandatoryIndicator {
    margin: 0 0 0 -.75em;
    padding: 0 4px 0 2px;
    color: #cc0000;
    font-weight: bold;
    float: left;
    position: relative;
}

<td class="alignTop width35">
   <label for="mailingCityEntry">
      <span class="mandatoryIndicator" title="Mandatory">*</span>
      City:
  </label>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:14:05.630

尽量不要在 CSS中使用`negative value`to 。`margin`这总是在 IE7 中产生样式问题。无论如何，你不应该使用 position: relative 作为内联元素（`span`）。它仅用于块级元素，`i.e. div`, 以包含其他元素。

# python - django 1.3 - 无法注册我的自定义 UserAdmin

> ID：11021062
> 
> 赞同：4
> 
> 时间：2012-06-13T18:25:36.320
> 
> 标签：python, django, django-admin

我正在尝试使用内联的 memberprofile 注册自定义用户管理员。基于 SO 答案和谷歌我的`admin.py`样子：

```
class MemberProfileInline(admin.StackedInline):
    model = MemberProfile
    fk_name = 'user'

class FSUserAdmin(UserAdmin):
    list_display = ('id', 'username',)
    inlines = [MemberProfileInline,]

admin.site.unregister(User)
admin.site.register(User, FSUserAdmin) 
```

当我加载管理员时，没有发生任何定义的更改`FSUserAdmin`。如果我注释掉

```
admin.site.register(User, FSUserAdmin) 
```

我收到用户站点未注册的错误，所以我知道它正在成功取消注册。

有人对我所缺少的有任何见解吗？

**更新：** `django.contrib.auth`并`django.contrib.admin`出现在`INSTALLED_APPS`列表中的任何项目特定应用程序之前`settings.py`

我的项目中有以下内容`urls.py`

```
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:28:29.267

确保此应用出现`contrib.auth`在您的`INSTALLED_APPS`设置下方。

# c# - 将 C# 值传递给 Javascript

> ID：11021066
> 
> 赞同：7
> 
> 时间：2012-06-13T18:26:05.320
> 
> 标签：c#, javascript, asp.net

在加载页面时，我想将一个值从服务器端变量传递给我的 javascript 函数。

我似乎无法让它工作，这就是我所拥有的：

网络

```
protected void Page_Load(object sender, EventArgs e)
{
    string blah="ER432";
} 
```

Javascript

```
<script type="text/javascript">

    var JavascriptBlah = '<%=blah%>';

    initObject.backg.product_line = JavascriptBlah;

</script> 
```

将此添加到页面

```
 public string blah { get; set; }

        protected void Page_Load(object sender, EventArgs e)
        {
           blah="ER432";
        } 
```

我仍然收到错误消息：CS0103：当前上下文中不存在名称“blah”

我也想尝试在不使用 hdden 字段的情况下完成此操作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T18:29:35.700

我相信你的 C# 变量必须是一个类成员才能做到这一点。尝试在类级别声明它而不是`Page_Load()`. 一旦 page_load 完成，它显然会失去作用域。

```
public partial class Example : System.Web.UI.Page
{
    protected string blah;

    protected void Page_Load(object sender, EventArgs e)
    {
        blah = "ER432";
        //.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:29:49.693

在这种特殊情况下，对于您来说`blah`是本地的，`Page_Load`您必须将其设为类级别成员（可能将其设为属性）才能像这样公开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T18:35:47.957

您可以在您的 html 页面中放置一个隐藏的输入：

```
<input  type="hidden" runat='server' id="param1" value="" /> 
```

然后在后面的代码中将其设置为您想要传递给 .js 函数的内容：

```
param1.value = "myparamvalue" 
```

最后你的javascript函数可以访问如下：

```
document.getElementById("param1").value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:29:58.987

您应该`blah`在类级别声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T18:30:21.597

您`string blah`需要成为`Page`类的公共属性，而不是`Page_Load`. 您需要了解范围界定。

```
public class MyPage
{
    public string blah { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        blah = "ER432";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T18:31:04.007

我过去所做的是 webforms 的功能——创建一个隐藏字段来存储客户端所需的值。如果您使用的是 4.0，您可以将隐藏字段客户端 ID 模式设置为静态，以帮助保持清洁。基本上，将您的值添加到隐藏字段，然后您可以从 javascript 获取该值或修改它（如果您想将其传回），因为它只是一个 dom 元素。

如果你真的想使用代码——比如一个变量，它需要在类范围内是可访问的。

# iphone - 在阅读障碍辅助应用程序中嵌入字体

> ID：11021069
> 
> 赞同：1
> 
> 时间：2012-06-13T18:26:25.827
> 
> 标签：iphone, xcode4

[https://github.com/sammytaggart/Help-with-OCR](https://github.com/sammytaggart/Help-with-OCR)

我是贝尔法斯特的一名设计老师，我有一个 12 岁的学生，他为阅读障碍的读者设计了一种字体。

我们通过从网络上截取开源内容来构建应用程序。我们有一个相当实用的应用程序，其中：

1.  用户拍照
2.  选择图片
3.  OCRs the text 4 以选择的字体呈现文本 (dyslexia.ttf)

我已经能够将字体更改为任何自定义字体，但不能更改为首选字体。我非常不确定代码（不是线索）

这是一个添加到学生字体设计中的应用程序（字体是主要功能....任何人都可以解释一下吗？我尝试过使用和不使用.ttf，据我所知，我确信一切都被嵌入和捆绑等......无济于事。

一切都可以在 github 上的上述链接中查看 我已经用谷歌搜索了它并在一次又一次的调整之后，我完成了......仅为请求道歉，但这根本不是我的专业领域，但会增加锦上添花我的学生项目的蛋糕。

非常感谢萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:33:06.977

这适用于 iOS 3.2，并且非常简单。您需要按照以下步骤操作：

1.  将 TTF 文件复制到 Xcode 中的 Resources 文件夹中，以便在编译应用程序时将其复制到应用程序包中。
2.  编辑 Info.plist 文件并添加以下键：

    ```
    <key>UIAppFonts</key>
    <array>
        <string>dyslexia.ttf</string>
    </array> 
    ```

3.  在应用程序中，您可以`UIFont`通过调用来实例化 a：

    ```
    [UIFont fontWithName:@"dyslexia" size:12]; 
    ```

    并将其设置为例如的`font`属性。`UILabel`

不过需要注意的一件重要事情是：您传递给的字体`+ fontWithName:`名称不一定是 ttf 文件的名称，而是字体元数据中的字体名称。确保您在那里使用正确的名称。

# arrays - 在 Powershell 的表中格式化计数器数据

> ID：11021073
> 
> 赞同：1
> 
> 时间：2012-06-13T18:26:32.440
> 
> 标签：arrays, powershell, formatting, performancecounter

我正在尝试使用以下脚本创建一个用于监视目的的表：

```
$w3wppriv = get-counter '\process(w3w*)\working set - private'
$w3wpid = get-counter '\process(w3w*)\id process'

0..($w3wpid.Length -1) | 
select-object (
   @{n="Proces ID"; e={$w3wpid.CounterSamples.Cookedvalue[$_]}},
   @{n="Memory Usage(KB)";  e={$w3wppriv.CounterSamples.CookedValue[$_]}}
              ) | 
   format-table -auto; 
```

我正在尝试获得以下输出：

```
Process ID Memory Usage(KB)
---------- ----------------
44353      234324343
35343      230909324
2341       932423234 
```

但是，输出不显示任何数据。我想它与数组有关，但我不清楚如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:29:46.583

这是另一个除了如何搜索之外什么都不知道的例子:)

```
$w3wppriv = ((get-counter -counter '\process(w3w*)\working set - private').CounterSamples) | select-object -expandproperty cookedvalue
$w3wpid = ((get-counter '\process(w3w*)\id process').CounterSamples) | select-object -expandproperty cookedvalue

0..($w3wpid.Length -1) | 
   select-object (
       @{n="Proces ID"; e={$w3wpid[$_]}},
       @{n="Memory Usage(KB)";  e={$w3wppriv[$_]}}
          ) | 
   format-table -auto; 
```

# sql - SQL 特殊字符

> ID：11021082
> 
> 赞同：2
> 
> 时间：2012-06-13T18:27:17.927
> 
> 标签：sql, sql-server

我需要编写一个查询，我需要在其中找到 ' 字符。

就像 Shivam 的一样——我需要找到 ' 标记。

```
select * from DTCountries where CountryCode like '%'%' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T18:28:38.520

只需要逃避它。

```
SELECT * FROM DTCountries WHERE CountryCode LIKE '%''%' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T18:29:07.567

加倍

```
select * from DTCountries where CountryCode like '%''%' 
```

# c++ - 浮点计算和舍入

> ID：11021085
> 
> 赞同：0
> 
> 时间：2012-06-13T18:27:58.807
> 
> 标签：c++, floating-point, cpu, rounding

我想我在某处读到 cpu 的“以 50 位进行一些浮点计算，以便它们可以正确舍入到 32 位”。我认为这意味着在上述浮点运算中计算的中间值是以 50 位计算的，因此可以实现“正确舍入到浮点大小”。

这个声明是什么意思？这是真的吗？如果是这样，您能否指出一些资源来解释为什么它们需要计算 18 个额外位？为什么不是 19 或 17？或者它只是完全错误的？

编辑：-我发现此链接非常有用且详尽... [http://www.gamasutra.com/view/news/167402/Indepth_Intermediate_floatingpoint_precision.php](http://www.gamasutra.com/view/news/167402/Indepth_Intermediate_floatingpoint_precision.php)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:36:22.330

我不能以任何方式保证，但我猜你遇到的实际上是 53 位而不是 50 位。他们使用 53 位的原因是因为这是浮点类型的下一个标准大小。在 IEEE 754 标准中，最小的类型是总共 32 位。下一个大小是总共 64 位，它有一个 53 位的有效位（又名尾数）。由于他们已经有了专门处理该尺寸的硬件，因此（在大多数情况下）以该尺寸进行计算可能是最简单的，然后四舍五入到较小的尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:24:28.050

在现代计算机上，双精度计算（1 个符号位、11 个指数位、52 个显式有效位）与单精度计算（1 个符号位、8 个指数位、23 个有效位）一样快是很常见的。因此，当您加载浮点对象、计算和存储浮点对象时，编译器可能会将浮点值加载到双精度寄存器中，以双精度计算并存储单精度结果。这通过以极低的成本提供额外的精度而使您受益。结果可能更经常“正确舍入”（返回的结果是最接近数学精确结果的可表示值），但这不能保证（因为仍然存在舍入误差，

有时双精度比单精度更昂贵，尤其是在执行 SIMD 编程时。

通常，高级语言让编译器可以自由决定如何评估浮点表达式，因此编译器可能会使用单精度或双精度，具体取决于供应商的选择（或编译器的质量）、优化和目标切换您已传递给编译器、正在编译的代码的其他方面（例如，用于进行计算的机器寄存器的可用性）以及出于实际目的可能是随机的其他因素。所以这不是你可以依赖的行为。

您所听到的另一个含义可能是单精度函数的库例程（例如 sinf 或 logf）可能以双精度编写，因此它们比必须完全编写它们更容易获得所需的结果在单精度。这很常见。但是，此类库例程是由分析计算过程中可能出现的错误的专家精心编写的，因此不仅仅是假设更多的位会产生更好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:35:15.020

这与 epsilon 值有关。以经典的 0.1 + 0.2 问题为例：http: [//0.30000000000000004.com/](http://0.30000000000000004.com/)

在大多数语言中，0.1 + 0.2 != 0.3。这是因为虽然 0.1 和 0.2 以 10 为底结束小数，但以 2 为底，0.1 看起来像 0.0001100110011... 而 0.2 看起来像 0.001100110011... 所以这意味着当您将这两个值相加时，您将得到一个重复的二进制当您获得无限精度时接近 0.3 的数字，类似于 0.333333333... + 0.33333333.... 随着您获得越来越多的精度接近 2/3。

至于为什么 18 个额外位与 19 个额外位，这是一个更复杂的讨论。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Machine_epsilon 。](http://en.wikipedia.org/wiki/Machine_epsilon)

# html - 溢出-y 影响容器内元素的可见性

> ID：11021090
> 
> 赞同：0
> 
> 时间：2012-06-13T18:28:16.577
> 
> 标签：html, css

我有一个 div，其中一些内容具有相对的负位置。我希望跨度出现在 x 轴上其容器的上方，但溢出-y 正在剪切我的文本。我需要它有一个垂直滚动条。

我不想要水平滚动。我想要一个垂直滚动。文本应出现在容器上方。

我怎样才能做到这一点？

```
<div id="test">
    <span class="row"> Text Text Text </span>   
    <span class="row"> Text Text Text </span>  
    <span class="row"> Text Text Text </span>   
</div>​

#test {
    height:100px;
    width:100px;
    clip: rect(auto,auto,auto,auto);
    overflow-y: auto;
}
.row {
    position:relative;
    left:-11px;
    display: block;
}​ 
```

[http://jsfiddle.net/jZrER/](http://jsfiddle.net/jZrER/) 。尝试删除 overflow-y 看看会发生什么。我需要这样的东西：http: [//jsfiddle.net/e7MXD/](http://jsfiddle.net/e7MXD/) 但带有垂直滚动。

这就是我想要完成的：蓝色部分是垂直滚动条（我没有时间画它）。

![在此处输入图像描述](../Images/d126bc98b3ff39cb36b917844e00fbd5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:21:18.537

我希望有人在这方面证明我错了。我不认为它可能在 css 中使用溢出。我使用了overflow-x:visible;，而且滚动条似乎有一个内置的裁剪功能（毕竟，你不希望内容在滚动条上方/下方）。然而，可能有一个聪明的方法来复制它。

**编辑**：我的“证明”是如果你把

```
overflow-x: visible; !important
overflow-y: auto; 
```

它不会添加卷轴，但如果你删除`!important`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:33:08.640

比 use `overflow-x: auto;`as well 或者更好的是，省略 both 和 use `overflow: auto`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:44:47.580

仍然对您要实现的目标感到有些困惑。不过我玩过这个。

[http://jsfiddle.net/e7MXD/1/](http://jsfiddle.net/e7MXD/1/)

```
<div id="test">
    <span class="row"> Text Text Text </span>   
    <span class="row"> Text Text Text </span> 
    <span class="row"> Text Text Text </span> 
    <span class="row"> Text Text Text </span> 
     <span class="row"> Text Text Text </span> 
     <span class="row"> Text Text Text </span> 
     <span class="row"> Text Text Text </span> 
</div>​​​​

#test {

    margin-left:50px;
    margin-top:50px;
    border:1px solid black;
    height:100px;
    width:100px;
}

.span-container {
    margin-left:50px;
    margin-top:50px;    
overflow-y:scroll; 
overflow-x:visible;  
height:100px;   
    width:200px
}

.row {
    position:relative;
    left:-11px;
    display: block;
}​ 
```

# php - 如何在 php/html 表单中编写链接

> ID：11021096
> 
> 赞同：0
> 
> 时间：2012-06-13T18:28:31.747
> 
> 标签：php, javascript

我想输入 som 文本以在表单字段中生成更新链接，但由于这些字段是从 sql 数据库填充的并且在代码的 php 部分中，我需要帮助来弄清楚如何正确编写链接。

链接是：

```
<a href="javascript:void(0);" onclick='$.get("do.php",{ cmd: "ban", id: "<?php echo $rrows['id']; ?>" } ,function(data){ $("#ban<?php echo $rrows['id']; ?>").html(data); });'>Ban</a> 
```

这是我想要放置链接的部分，标记为 my_link：

```
$result = mysql_query("SELECT * FROM logg WHERE UserGroup='".$_SESSION['user_group']."'     AND CompletedEvent='0'  ORDER BY RegDate DESC");

echo "<table border='1'>
<tr>
<th>RegDate</th>
<th>RegByUser</th>
<th>Event</th>
<th>Status</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['RegDate'] . "</td>";
  echo "<td>" . $row['RegByUser'] . "</td>";
  echo "<td>" . $row['Event'] . "</td>";
  echo "<td>" my_link "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con); 
```

我希望有人可以展示编写此链接的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:36:52.707

将以下内容放在标题中：

```
<script type="text/javascript">
    function banUser(id)
    {
        $.get("do.php",{cmd: "ban",id: id}, 
            function(data){$("#ban"+id).html(data);}
        );
    }
</script> 
```

然后在你的while循环中使用它：

```
echo "<td><a href='#' onclick='banUser(\"" .
     $row['id'] . 
    "\");'>Ban</a></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:38:41.610

```
echo "<td><a href=\"javascript:void(0);\" onclick=\"$.get('do.php',{cmd:'ban',id:'" . $rrows['id'] . "'},function(data){\$('#ban" . $rrows['id'] . "').html(data);});\">Ban</a>my_link \"</td>"; 
```

# ruby-on-rails - 对实体执行全文搜索的问题

> ID：11021104
> 
> 赞同：0
> 
> 时间：2012-06-13T18:29:13.073
> 
> 标签：ruby-on-rails, ruby, neo4j

我正在使用 neo4j 作为我的 Ruby on Rails 项目的后端，并且我正在尝试实现一些搜索功能。贝娄是我的模型：

```
class Entity < Neo4j::Rails::Model
    property :name
    has_n(:friends).to(Entity)
    index :name, :type => :fulltext
end 
```

我创建了以下记录：

```
Neo4j::Transaction.run do
  Entity.destroy_all

  tony = Entity.new :name => "Tony Soprano"
  paulie = Entity.new :name => "Paulie Gualtieri"
  robert = Entity.new :name => "Robert Baccalier"
  silvio = Entity.new :name => "Silvio Dante"

  tony.friends << paulie << robert << silvio
  tony.save
end 
```

最后我的搜索方法是这样的：

```
def search
  terms = params[:q]

  render :json => Entity.all(:name => terms, :type => :fulltext)
end 
```

当我运行上述搜索方法时，出现以下错误：`no index on field type`

我已经阅读了Neo4j-Rails Guides 的[全文搜索](http://neo4j.rubyforge.org/guides/rails3.html#fulltext-search)部分，但我看不出我缺少什么来完成这项工作。我的理解是 :name 属性应该被索引，因为我配置模型的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:01:19.640

您使用的是哪个版本的 neo4j.rb？如果您使用的是 2.0，您应该查看[Neo4j Github Wiki Pages](https://github.com/andreasronge/neo4j/wiki/Neo4j%3a%3aRails-Lucene)。

这是一个如何使用 2.0 解决该问题的示例：

```
Entity.all("name: hello*", :type => :fulltext).count 
```

我想这也适用于 Neo4j.rb 1.3.1。哈希查询不适用于全文搜索。

以下查询：

```
Entity.all(:name => "hello*", :type => :fulltext).count 
```

将使用精确的 lucene 索引并查询两个字段：`name`和`type`.

# sql - SQL 计数和区分和分区

> ID：11021109
> 
> 赞同：2
> 
> 时间：2012-06-13T18:29:42.263
> 
> 标签：sql, oracle, oracle11g

我正在尝试一些带有分析函数的示例，并且我创建了一个 sql fiddle 来理解一个 count distinct over partition by 子句。这是我的[sqlfiddle](http://sqlfiddle.com/#!4/510f7/3)。

```
create table dummy (value1 varchar2(10),value2 varchar2(10));

insert into dummy values ('abc','abc1');
insert into dummy values ('abc','abc1');
insert into dummy values ('abc','abc2');
insert into dummy values ('def','abc1');
insert into dummy values ('ghi','abc2');
insert into dummy values ('xyz','abc3');
insert into dummy values ('xyz','abc3');

select value1,
       value2,
       count(distinct value2) over (partition by value1) as ValCount
from dummy 
```

如果您查看结果集，我希望第三行的 valcount 为 1，而不是 2，我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:44:10.080

abc（值 1）在第二列（abc1 和 abc2）上只有 2 个不同的值，并且由于您计算在第 1 列上分区的 column2 上的不同值，您确实应该得到 2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:44:51.093

valcount 应该是 2。

您已按 value1 分区，因此计数在该上下文中执行。也就是说，在value1 = "abc"的结果组中，value2有2个不同的值("abc1", "abc2")。

# database - 将 Matlab 数组存储在 SQL Server varbinary 字段中

> ID：11021114
> 
> 赞同：1
> 
> 时间：2012-06-13T18:29:57.100
> 
> 标签：database, matlab, serialization, bytearray, ado

有谁知道如何将一维 Matlab 数组存储在 Microsoft SQL Server 表的单个字段中（以及如何检索它）？我希望能够存储不一定是固定大小的 Matlab 数据数组，并且我考虑将其存储为逗号分隔的字符串，但我希望有一个更优雅的解决方案。我的想法是它应该与存储和读取一个字节[]相同。但是，我已经尝试了几个小时，但无法在互联网上找到任何真正有用的东西。这是我用于存储数组的 Matlab 代码（使用 ADO）：

```
buf = [1,2,3,4,5]; 
buf = int8(buf);
cmd = actxserver('ADODB.Command');
cmd.ActiveConnection = db.connection; % db.connection stores my connection
% Note that Matlab throws an error when setting the ActiveConnection. This
% command is still valid though and works, so the error should be ignored

cmd.CommandText = 'INSERT INTO dbo.TESTTABLE VALUES(?)'; % According to the MSDN
% website, this should be @val instead of ?, but for some reason that doesn't 
% work and the ? does.

param = cmd.CreateParameter(@val',205,1,8000,buf);
cmd.Parameters.Append(param);
cmd.Execute(); 
```

可能这段代码是正确的，我只是不知道如何再读一遍。另外，我举了一个大小为 5 的数组作为示例，但我希望能够存储更大的数组。谢谢你的帮助，

麦迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:47:39.833

您可以使用 TYPECAST 将矩阵序列化为字节向量 ( `uint8`)，并将结果与​​原始矩阵大小和类型一起存储在数据库中。

考虑以下示例。我使用的是文件而不是数据库，但这个想法仍然适用。

```
%# some matrix, and record its size and type
x = rand(4,3);
sz = size(x);
cls = class(x);

%# serialize and write to file
b = typecast(x(:),'uint8');          %# byte array
fid = fopen('file.dat','wb');
fwrite(fid, b, 'uint8')
fclose(fid);

%# read file and deserialize
fid = fopen('file.dat','rb');
b = fread(fid, '*uint8');
fclose(fid);
xx = reshape(typecast(b,cls), sz);

%# compare against original matrix
isequal(x,xx) 
```

在上面我只存储序列化的数据，但你也应该存储大小和类型。在您的情况下，只需在表中创建两个附加字段，例如，一个用于大小，另一个用于类型..

* * *

[如此处](https://stackoverflow.com/a/6261884/97160)所述，如果您不想手动对矩阵及其大小/类型进行序列化，则有未记录的函数`mxSerialize`/ `mxDeserialize`in `libmx`。[评论](https://stackoverflow.com/questions/4807035/is-it-possible-to-intercept-a-matlab-save-bytestream#comment9584484_6261884)中甚至还有一个简单的 MEX 包装器的链接。

它们的优点是它们适用于任何 MATLAB 数据类型（包括结构、元胞数组等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-15T19:22:16.260

SQL 表中列的类型应该是二进制的。然后只需使用常规的 mat lab 一维数组并尝试将它们导出到数据库。

你不需要任何逗号或任何额外的东西。它们由 Matlab 库手持。

例如你可以这样做：

```
colnames = {'ContentBinary' }; %this is the name of the column with the binary %content
data =   {[1:100000]}; % a one-d array in matlab
tablename = 'myData';
whereclause = 'where Id = 4028'; %this shows which row you are trying to write to
update(conn,tablename,colnames,data,whereclause)
close(conn); %conn is the connection to SQL DB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:39:07.333

对于那些正在尝试类似问题的人，我找到了一种有效的方法。我在问题中发布的代码对于将字节数组从 Matlab 存储到 MS SQL Server 数据库中是正确的。不过，您应该知道，我将它存储到 VARBINARY(MAX) 的字段中，并且它会自动存储为无符号。此外，它只会存储类似于 buf = [1,2,3,4,5] 的数组，并且只会存储类似于 buf = [1;2;3;4;5] 的数组的第一个值

当您检索它时，例如在 ADO 记录集中，您必须将其转换回 int8 ，这可以像 Amro 的回答中那样完成。

至于序列化，我编写了一个简单的 Java 类，它实现了 Serializable 以将对象转换为字节数组，反之亦然。因为可以从 Matlab 调用 Java，所以这个方法效果很好，现在我可以在 varbinary 列中存储和检索任何 Matlab 向量、数组或字符串。

# sql - Sql Server TOP - 使用过？

> ID：11021117
> 
> 赞同：5
> 
> 时间：2012-06-13T18:30:06.130
> 
> 标签：sql, sql-server, database-performance

SQL Server 中是否有关键字或元信息会告诉您 TOP 是否生效？

```
EX:
Select TOP 5 * From Stuff

RESULT: 5 rows 
```

确定是否会有 6 个或更多的最佳方法是什么？

```
I could do:
SELECT TOP 6 count(*) FROM Stuff 
```

但我担心单独调用来检索计数，因为实际查询比这个要复杂得多，而且在一张大表上。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T18:38:43.357

没有什么可以自动使用的。你可以使用这些方面的东西

```
DECLARE @N INT = 5;

WITH T
     AS (SELECT TOP (@N + 1) *
         FROM   master..spt_values
         ORDER  BY number)
SELECT TOP (@N) *,
             CASE
               WHEN Count(*) OVER () = (@N + 1) THEN 1
               ELSE 0
             END AS MoreRecords
FROM   T
ORDER  BY number 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T18:43:24.210

好吧，您可以选择前 N+1（在您的示例中 N 为 5，因此在您的示例中选择前 6 个）并丢弃客户端代码中的最后一个，并使用第六个元素的存在来确定是否 TOP如果您首先使用 N 会产生影响。但是，我不确定这样做有多大价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:36:26.337

您可以将布尔值附加到查询中，当具有相同逻辑的子查询的 COUNT(*) 返回大于 5 的值时返回 true，当返回值 5 或更少时返回 false。

这会将您需要的信息添加到返回的数据中。如果您关心性能，并且查询非常复杂，那么与单独的查询相比，这可能不会带来很大的改进，但充其量只能带来很小的改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:37:05.947

如果没有两个查询或执行性能扼杀重新计算，就没有办法做到这一点......

```
Select TOP 5 * From Stuff 
```

和

```
Select Count(*) From Stuff 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T18:42:24.790

```
SELECT TOP 5 Field1, field2, recordcount 
FROM Stuff
CROSS JOIN  (SELECT  COUNT(*) as recordcount FROM Stuff) a
ORDER BY Field1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T18:42:53.213

```
select top 5 *,
    case when count(*) OVER() <= 5 then 'yes' else 'no' end as AllRecordsReturned
from supportContacts 
```

# git - 创建一个新的远程分支？

> ID：11021118
> 
> 赞同：0
> 
> 时间：2012-06-13T18:30:14.400
> 
> 标签：git

快速健全性检查 - 我想为自己创建一个新的远程分支。我想做以下事情：

```
git clone git@github.com:orange/orange.git
git branch foo
git checkout foo
git push foo foo 
```

我想简单地克隆 master，创建一个名为“foo”的新分支（使用 master 中的内容），然后将其推送到一个名为“foo”的远程仓库。上面的可以吗？最后一行似乎有点奇怪，因为我两次命名“foo”。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:32:40.520

我认为您对“远程”一词感到困惑。远程是存在于其他地方的存储库。远程存储库有分支；这些被称为“远程分支”。如果您的目标是将本地`foo`分支推送到刚刚克隆的存储库，那么：

```
git push origin foo 
```

当你`git clone`，Git 创建一个名为`origin`. 所以这是您要推送到的遥控器。您的`git push`线路假定有一个名为`foo`. 如果您没有明确创建一个，那么它不存在。

# jsf - 如何在模糊中使 JSF inputText 字段大写

> ID：11021123
> 
> 赞同：8
> 
> 时间：2012-06-13T18:30:27.767
> 
> 标签：jsf, jsf-2, uppercase, onblur

当用户将焦点从字段移开时，我想将 JSF inputText 字段设为大写。最好使用`f:ajax`标记来执行此操作并让`blur`事件触发对服务器的调用以进行大写，还是最好在 JavaScript 中执行此操作？在 JavaScript 中*不*这样做的原因是什么？最好总是使用对服务器端的 ajax 调用来做这些事情吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T22:29:51.877

确实有两种方法可以挽救这一点。

1.  使用 JavaScript。

    ```
    <h:inputText ... onblur="value=value.toUpperCase()" /> 
    ```

2.  使用 JSF。

    ```
    <h:inputText ... converter="toUpperCaseConverter">
        <f:ajax event="blur" render="@this" />
    </h:inputText> 
    ```

    ```
    @FacesConverter("toUpperCaseConverter")
    public class ToUpperCaseConverter implements Converter {

        @Override
        public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
            return (submittedValue != null) ? submittedValue.toUpperCase() : null;
        }

        @Override
        public String getAsString(FacesContext context, UIComponent component, Object modelValue) {
            return (modelValue != null) ? modelValue.toString() : "";
        }

    } 
    ```

JS 方法非常简单。但是，最终用户可以篡改，因为它完全在客户端执行，在最终用户的完全控制下。最终用户可以在实际发送到服务器端之前禁用/跳过该 JS 代码和/或编辑请求参数。JSF 方法是不可篡改的，因为这是在服务器端完全执行的，因此这会产生更可靠的结果。

您必须根据这些事实来决定哪一个最适合业务需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T07:22:43.570

使用这个：style="text-transform: uppercase"，它对我有用。并使用您使用的任何平台 :) 我认为您不必对简单的事情使用复杂的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-21T12:14:39.627

我建议将 BalusC 和 BlackKat 提供的解决方案结合起来：

```
<h:inputText ... onblur="value=value.toUpperCase()" style="text-transform: uppercase" /> 
```

在这种情况下，您甚至不会在输入时看到任何小写字母（BlackKat 解决方案的优势），并且提交的值将是大写的（BalusC 解决方案的优势）

# python - 并行 Pip 安装

> ID：11021130
> 
> 赞同：30
> 
> 时间：2012-06-13T18:30:39.287
> 
> 标签：python, parallel-processing, pip

我们的 Django 项目越来越庞大。我们有数百个应用程序并使用大量 3rd 方 python 包，其中许多需要编译 C。当我们需要为主要版本创建新的虚拟环境时，我们的部署需要很长时间。话虽如此，我希望从 Pip 开始加快速度。有谁知道将并行安装软件包的 Pip 分支？

到目前为止我采取的步骤：

*   我一直在寻找一个能做到这一点但收效甚微的项目。我确实找到了这个 Github Gist：[https](https://gist.github.com/1971720) ://gist.github.com/1971720但结果几乎与我们的单线程朋友完全相同。

*   然后我在 Github 上找到了 Pip 项目，并开始查看分叉网络，看看我是否能找到任何提到做我想做的事情的提交。里面乱七八糟的 如果必须的话，我会分叉它并尝试自己并行化它，我只是想避免花时间这样做。

*   我在 2011 年 DjangoCon 上看到 ep.io 的一个演讲，解释了他们的部署内容，他们提到了并行化 pip、传送 .so 文件而不是编译 C 和镜像 Pypi，但他们没有谈到他们是如何做到的或他们使用了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-14T02:44:14.803

# 并行 pip 安装

此示例使用[xargs](http://linux.die.net/man/1/xargs)将构建过程并行化大约 4 倍。您可以使用下面的 max-procs 增加并行化因子（使其大约等于您的内核数）。

如果您正在尝试例如加快您一遍又一遍地执行的成像过程，那么直接在结果上进行成像而不是每次都这样做可能会更容易并且肯定会降低带宽消耗，或者使用[pip构建图像-t](http://blog.zoomeranalytics.com/pip-install-t/)或[virtualenv](https://virtualenv.pypa.io/en/latest/)。

**并行下载和安装软件包，一次四个：**

```
xargs --max-args=1 --max-procs=4 sudo pip install < requires.txt 
```

注意： xargs 在不同的 Linux 发行版上有不同的参数名称。检查您的发行版的手册页以获取详细信息。

***[使用here-doc](http://tldp.org/LDP/abs/html/here-docs.html)*内联的相同内容：**

```
 cat << EOF | xargs --max-args=1 --max-procs=4 sudo pip install
 awscli
 bottle
 paste
 boto                                                                         
 wheel
 twine                                                                        
 markdown
 python-slugify
 python-bcrypt
 arrow
 redis
 psutil
 requests
 requests-aws
 EOF 
```

警告：如果多个 pip 尝试在完全相同的时间安装相同的依赖项，则此方法的速度可能会混淆包清单（取决于您的发行版），但如果您只在 4一次。可以很容易地修复它`pip install --uninstall depname`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-05T17:54:57.683

基于 Fatal 的回答，以下代码执行并行 Pip 下载，然后快速安装包。

首先，我们将包并行下载到分发（“dist”）目录中。这很容易并行运行，没有冲突。打印出来的每个包名都是在下载前打印出来的，有助于调试。如需额外帮助，请将 , 更改`-P9`为`-P1`, 以按顺序下载。

下载后，下一条命令告诉 Pip 安装/更新包。文件没有下载，它们是从快速本地目录中获取的。

它与当前版本的 Pip 1.7 兼容，也与 Pip 1.5 兼容。

要仅安装一部分软件包，请将“cat requirements.txt”语句替换为您的自定义命令，例如“egrep -v github requirements.txt”

```
cat requirements.txt | xargs -t -n1 -P9 pip install -q --download ./dist

pip install --no-index --find-links=./dist -r ./requirements.txt 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-13T18:43:37.693

您是否分析了部署过程以了解时间真正花在了哪里？令我惊讶的是，运行多个并行 pip 进程并没有加快速度。

如果花时间查询 PyPI 和查找包（特别是当您还从 Github 和其他来源下载时），那么设置自己的 PyPI 可能会有所帮助。您可以自己托管 PyPI 并将以下内容添加到您的`requirements.txt`文件 ( [docs](http://www.pip-installer.org/en/latest/requirements.html) )：

```
--extra-index-url YOUR_URL_HERE 
```

或者如果您希望完全替换官方 PyPI，请使用以下内容：

```
--index-url YOUR_URL_HERE 
```

这可能会加快下载时间，因为现在可以在附近的机器上找到所有包。

很多时间也花在用 C 代码编译包上，比如 PIL。如果这被证明是瓶颈，那么值得研究在多个进程中编译代码。您甚至可以在您的机器之间共享已编译的二进制文件（但许多事情需要相似，例如操作系统、CPU 字长等）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T19:36:11.433

如果您让构建系统（例如 Jenkins）构建并将所有内容安装到特定于构建的虚拟环境目录中，它会有所帮助吗？构建成功后，您使虚拟环境可重定位，将其打包并将生成的 tablall 推送到您的“released-tarballs”存储中。在部署时，您需要获取最新的 tarball 并将其解压缩到目标主机上，然后它应该可以执行了。因此，如果下载 tarball 需要 2 秒，在目标主机上解压需要 0.5 秒，那么您的部署将需要 2.5 秒。

这种方法的优点是所有包安装都发生在构建时，而不是部署时。

**警告：**构建/编译/安装东西到虚拟环境中的构建系统工作人员必须使用与目标硬件相同的架构。此外，您的生产盒配置系统将需要处理某些 Python 包可能具有的各种 C 库依赖项（例如，在编译 JPEG 相关代码之前`PIL`需要安装它，如果目标盒上没有安装`libjpeg`，事情也会中断）`libjpeg`

它对我们很有效。

使虚拟环境可重定位：

```
virtualenv --relocatable /build/output/dir/build-1123423 
```

在此示例`build-1123423`中是特定于构建的虚拟 env 目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-22T09:10:43.207

我遇到了类似的问题，最终得到以下结果：

```
cat requirements.txt | sed -e '/^\s*#.*$/d' -e '/^\s*$/d' | xargs -n 1 python -m pip install 
```

这将逐行读取 requirements.txt 并执行 pip。我无法从哪里找到正确的答案，因此对此深表歉意，但我在下面找到了一些理由：

1.  sed 的工作原理：[https ://howto.lintel.in/truncate-empty-lines-using-sed/](https://howto.lintel.in/truncate-empty-lines-using-sed/)
2.  另一个类似的答案，但使用 git：[https ://stackoverflow.com/a/46494462/7127519](https://stackoverflow.com/a/46494462/7127519)

希望这有助于替代方案。我在这里发布了这个解决方案[https://stackoverflow.com/a/63534476/7127519](https://stackoverflow.com/a/63534476/7127519)，所以也许那里有一些帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-18T16:03:33.730

手头的答案是使用例如[诗歌](https://python-poetry.org)，如果可以的话，默认情况下并行下载/安装。但问题是关于点子的，所以：

如果你们中的一些人需要安装`requirements.txt`具有`hash`参数和 python 说明符（或只是散列）的依赖项，则不能正常使用`pip install`，因为它不支持它。您唯一的选择是使用`pip install -r`

所以问题是如何从每个依赖项都定义了哈希和 python 说明符的需求文件中并行安装？这里是需求文件的外观：

```
swagger-ui-bundle==0.0.9; python_version >= "3.8" and python_version < "4.0" \
    --hash=sha256:cea116ed81147c345001027325c1ddc9ca78c1ee7319935c3c75d3669279d575 \
    --hash=sha256:b462aa1460261796ab78fd4663961a7f6f347ce01760f1303bbbdf630f11f516
typing-extensions==4.0.1; python_version >= "3.8" and python_version < "4.0" \
    --hash=sha256:7f001e5ac290a0c0401508864c7ec868be4e701886d5b573a9528ed3973d9d3b \
    --hash=sha256:4ca091dea149f945ec56afb48dae714f21e8692ef22a395223bcd328961b6a0e
unicon.plugins==21.12; python_version >= "3.8" and python_version < "4.0" \
    --hash=sha256:07f21f36155ee0ae9040d810065f27b43526185df80d3cc4e3ede597da0a1c72 
```

这是我带来的：

```
# create temp directory where we store split requirements
mkdir -p pip_install
# join lines that are separated with `\` and split each line into separate 
# requirements file (one dependency == one file),
# and save files in previously created temp directory
sed ':x; /\\$/ { N; s/\\\n//; tx }' requirements.txt | split -l 1 - pip_install/x
# collect all file paths from temp directory and pipe them to xargs and pip
find pip_install -type f | xargs -t -L 1 -P$(nproc) /usr/bin/python3 -mpip install -r
# remove temp dir
rm -rf pip_install 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-05-24T20:02:35.973

受[Jamieson Becker 的回答](https://stackoverflow.com/a/29618322/1698426)启发，我修改了一个安装脚本来进行并行 pip 安装，这似乎是一种改进。我的 bash 脚本现在包含这样的片段：

```
requirements=''\
'numpy '\
'scipy '\
'Pillow '\
'feedgenerator '\
'jinja2 '\
'docutils '\
'argparse '\
'pygments '\
'Typogrify '\
'Markdown '\
'jsonschema '\
'pyzmq '\
'terminado '\
'pandas '\
'spyder '\
'matplotlib '\
'statlab '\
'ipython[all]>=3 '\
'ipdb '\
''tornado>=4' '\
'simplepam '\
'sqlalchemy '\
'requests '\
'Flask '\
'autopep8 '\
'python-dateutil '\
'pylibmc '\
'newrelic '\
'markdown '\
'elasticsearch '\
"'"'docker-py==1.1.0'"'"' '\
"'"'pycurl==7.19.5'"'"' '\
"'"'futures==2.2.0'"'"' '\
"'"'pytz==2014.7'"'"' '

echo requirements=${requirements}
for i in ${requirements}; do ( pip install $i > /tmp/$i.out 2>&1 & ); done 
```

我至少可以手动查找问题。

# r - R中的组合图

> ID：11021136
> 
> 赞同：0
> 
> 时间：2012-06-13T18:30:54.260
> 
> 标签：r, statistics

我看到即使通过编写单独的命令，我们也可以在 R 中组合两种不同类型的图。例如，如果在 R 中创建了一个直方图，其中直方图绘制了表示项目频率的点，我们可以通过调用连接这些点一个 line() 函数。现在，这两个图是单独的命令。

这在 R 中是如何工作的？它什么时候可以结合情节以及这里实际支持什么？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:30:05.843

一旦你绘制了一个绘图，你通常可以在它上面绘制任何其他不需要新绘图的绘图功能（即清除绘图窗口并重置坐标系）。当然也有一些注意事项。

一个重要的一点是绘图功能需要保留正确的坐标系，否则用于添加线条和绘图的数据映射将被破坏 - 它们不会对齐。

另一个考虑因素是，您建议的内容仅适用于单个“面板”图或多面板图中绘制的最后一个面板。如果绘制了多面板图，通常您会发现绘图功能是一个很好的公民，并将坐标空间/绘图窗口重置为单个面板。这将破坏数据和难以重新创建的绘图之间的联系。

# asp.net - 通过网站访问和修改文件

> ID：11021142
> 
> 赞同：0
> 
> 时间：2012-06-13T18:31:13.220
> 
> 标签：asp.net

我想通过 Web 应用程序访问文件（Microsoft Office 文件，例如 Word、ppt、exl）并对其进行修改并保存。对文件所做的更改应保存到服务器上的文件位置。

如果文件被其他用户访问，则应通知其他用户。（就像 SharePoint 一样。）

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:35:45.410

有很多方法可以做到这一点。但就在我的脑海中，我是否建议使用 System.IO.File 打开文件进行写入。您可以设置某种标志来判断文件当前是否已打开，并在每次查看文件时检查该标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:46:30.093

IIRC SharePoint 通过数据库而不是文件系统来管理文件共享/版本控制。对于办公文件，您希望在本地打开和修改它们，而不是在网页中。

你所描述的听起来很像版本控制。在这种情况下，您最好使用现有产品，而不是自己开发产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T21:52:23.967

我正在做一个将gridview数据导出到xsl的项目，我发现我可以将xsl写成html！它用 microsoft exel 打开，我建议你在编辑器中打开你的文件，例如 ckeditor 并修改它然后保存它。

# ms-access - 从父表单过滤子表单

> ID：11021143
> 
> 赞同：1
> 
> 时间：2012-06-13T18:31:14.280
> 
> 标签：ms-access, vba, ms-access-2003

我在父表单中有一个子表单。子表单在父表单内显示为数据表。我在父表单中有两个组合框。当用户从组合框中选择一个值时，子表单应根据这两个值进行过滤。

以下是我使用的代码。它打开另一个窗口并显示过滤后的值，而不是在父子窗体中显示它。

```
Dim stDocName As String
Dim stLinkCriteria As String

stDocName = "3_Properties"

stLinkCriteria = "[Program_Name]=" & "'" & Me![Combo2] & "'"
DoCmd.OpenForm stDocName, , , stLinkCriteria 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:35:54.923

您可以利用链接子字段和主字段来过滤子表单，而无需使用任何代码。您可以将子表单的链接主字段设置为组合框控件的名称，将子字段设置为相关的相关列（字段）。用分号分隔每个条目。

您还可以在运行时设置子窗体的记录源。

```
 sSQL = "SELECT BText FROM Table WHERE AText = '" & Me.MyCombo & "'"
 Me.MySubformControlName.Form.Recordsource = sSQL 
```

# jquery - jquery - 使用复选框来允许自动填充

> ID：11021146
> 
> 赞同：0
> 
> 时间：2012-06-13T18:31:37.923
> 
> 标签：jquery

我有一个弹出框，其中包含一个带有四个输入值和一个复选框的表单。我想让它在选中复选框时，当一个人在一个复选框中输入他的名字时，它会自动开始在每个其他输入中输入他的名字。我将如何使用 jquery ajax 完成此操作？有没有任何地方的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:35:54.060

如果我理解正确，您可以执行以下操作，

```
$("#txtbox").bind("keyup", function() {
    if ($("#CheckBox").attr("checked")) {
        $("#OtherTextBox1").val($(this).val());
        $("#OtherTextBox2").val($(this).val());
        $("#OtherTextBox3").val($(this).val());
    }
}); 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:44:08.743

这是一个快速的想法，可以将所有输入的更改相互同步。

[http://jsfiddle.net/kQaXm/2/](http://jsfiddle.net/kQaXm/2/)

```
<input type="checkbox" id="checkbox" />
<input type="input" id="input1" />
<input type="input" id="input2" />
<input type="input" id="input3" /> 
<input type="input" id="input4" />

$(function(){
    var $inputs =  $('input[id^=input]');
    $inputs.keyup( function(){
        if( $('#checkbox').is(':checked') )
            $inputs.val( this.value );
    });
}); 
```

# python - Graphite & statsd 生成许多节点

> ID：11021151
> 
> 赞同：0
> 
> 时间：2012-06-13T18:31:47.197
> 
> 标签：python, node.js, graphite, statsd, graphite-carbon

我刚刚安装了 Graphite & statsd 来获取我的网络应用程序的一些统计数据。它已经跟踪了数据，但是它在 Graphite webapp 的树中生成了太多的节点。见附图： [一只忙碌的猫 http://mmeg-de.gefaellt-mir.me/media/hm.PNG](http://mmeg-de.gefaellt-mir.me/media/hm.PNG)

我已经用谷歌搜索了，但我找不到任何解释。我只想跟踪我的索引页面被访问了多少次。我使用以下命令在 Python 中执行此操作：

```
statsd.incr('mmeg.de.aufrufe.index') 
```

有人对此有解释吗？为什么有这么多（不同的）图表？我以为只有一张图表可以显示我的索引页面随着时间的推移被访问了多少次。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:41:43.323

转到用户的个人资料并关闭高级 UI。通配符文件夹是高级 UI 的一项功能。

# html - html 将图像保存到 android 和 ios 设备

> ID：11021153
> 
> 赞同：3
> 
> 时间：2012-06-13T18:31:53.743
> 
> 标签：html, mobile, web

我正在创建一个基于 HTML5 和 CSS3 的移动网站。我正在尝试查找有关以下功能的信息：

是否可以通过链接将图像从移动网站下载到 Android 或 iPhone 设备？

但我没有找到任何有关的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T20:10:31.233

你应该使用下载属性：

```
<a href="image.jpg" download>Download</a> 
```

[您可以在w3schools.com](http://www.w3schools.com/tags/att_a_download.asp)上阅读更多信息

# c# - Asp.net MVC3 C#，StreamWriter 错误

> ID：11021155
> 
> 赞同：1
> 
> 时间：2012-06-13T18:32:08.913
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用 StreamWriter 写入日志文件。

这是写日志的方法，

```
public void Write(string fileNamePrefix, string msg){
    GenerateFileName(fileNamePrefix);

    string logTime = "> "+DateTime.Now.ToShortDateString().ToString() + " " + DateTime.Now.ToLongTimeString().ToString()+"\r\n";

    using (StreamWriter sw = new StreamWriter(fileName, true))
    {
    sw.WriteLine(logTime + msg);
    sw.Flush();
    sw.Close();
    sw.Dispose();
    }
} 
```

在使用该方法写入日志时，我收到一条错误消息，显示“ **进程无法访问文件 'C:\Users\mark\documents\visual studio 2010\Projects\eee\eee.WebUI\log\Order_20120613' 因为它正在被另一个进程使用。** ”

并非总是出现错误消息，当我同时运行多个进程并且进程正在使用该方法写入日志时，我会收到该错误消息。

有人知道我做错了什么吗？如何避免这个错误？

那是写日志的正确方法吗？你通常如何写进程日志？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:38:10.103

I/O 故障是I/O 相关类的**预期行为**。所以准备处理它们。

在您的特定情况下，它很可能是由文件名冲突引起的 - 确保“日志”文件的名称在每个进程中的进程和线程之间是唯一的。

无关评论：

*   `sw.Flush();sw.Close(); sw.Dispose();`如果您正在使用，则绝对不需要调用`using`（因为它已经正确调用，`sw.Dispose()`包括异常情况）。即使您不这样做，同时调用 Close 和 Dispose 也没有任何价值，因为它们都只是调用相同的代码。

*   发明（通常称为“重新发明轮子”）日志写入和跟踪库是传统开发人员过去的时间。除非您认为它是学习练习或娱乐，否则请使用现有的库，例如已经是 .Net 框架一部分的库（它允许您配置多个跟踪侦听器等）或其他库，例如 Log4Net。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:38:44.057

您应该查看[log4net](http://logging.apache.org/log4net/)。线程安全（这是您在这里遇到的问题，多个线程/进程试图使用同一个文件）并且非常灵活。

# css - 使用 CSS 伪类创建下拉选项卡：hover

> ID：11021156
> 
> 赞同：0
> 
> 时间：2012-06-13T18:32:11.393
> 
> 标签：css, sass

我有一个带有顶栏的页面，其中包含一个列表，当用户将“关于”链接悬停在上面时，该列表包含我试图删除的选项卡。

```
 <!-- page top bar -->
    <div id="topBar">
        <ul class="dropper">
            <li>

                <a id="about" >
                    About
                </a>

                <ul>
                    <span class="dropTab">
                    <img class="thumb" src="assets/images/StephenBW.jpg"/>
                    <p>
                        This blog is written by ...
                    </p>
                    </span>
                </ul>

            </li>

        </ul>    
    </div> 
```

这是（s）css

```
 #topBar{
@include goldTopper;
top:0px;
display:block;
@include bar;
margin: auto;
@include containerShadow;
border-bottom:1px solid gold; border-top-color:#FF9;
ul, ul li {
    display:inline;
    list-style:none;
}

ul li {
    position:relative;
}

#about {
    padding-left:8px; 
    color:#836B15;
    font-weight:850;
    font-family: Arial, Helvetica, sans-serif;
    text-align:left;
    position:absolute; top:15px;

}

p{
    color:#836B15;
    font-weight:850;
    font-family: Arial, Helvetica, sans-serif;
    text-align:left;
    list-style: none;
    margin-top:10px;
    clear:left;
}

li ul {
    span{}
}
}

#about:hover {
.dropTab{
    display:block;
}

}

.dropTab {
display:none;
top:47px;left:8px;position:absolute;
width:285px; height:625px; @include whiteGradient; padding:6px;
border-bottom:solid 1.5px; border-left:solid 1.5px; border-right:solid 1.5px;
p{
    font-size:10pt;
}
}

.thumb {
height:131px; display:inline;
float:left; padding:10px;
} 
```

这不起作用，我不知道为什么。我可以说的很清楚的问题是，当仅使用 css 将 about 链接悬停在上方时，如何使下拉选项卡下降？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:01:19.810

css 中的一个小改动就可以解决问题。

```
#关于：悬停{
.dropTab{
    显示：块；
}

}

.dropTab {
显示：无；
上：47px；左：8px；位置：绝对；
宽度：285px；高度：625px；@包括白色渐变；填充：6px；
边框底部：实心 1.5px；左边框：实心 1.5px；右边框：实心 1.5px；
p{
    字体大小：10pt；
}
}

```

至

```
#关于 ul{
 显示：无；   
}
#about:悬停 ul{
    显示：块；

}

.dropTab {
上：47px；左：8px；位置：绝对；
宽度：285px；高度：625px；@包括白色渐变；填充：6px；
边框底部：实心 1.5px；左边框：实心 1.5px；右边框：实心 1.5px；
p{
    字体大小：10pt；
}
}
```

并且还添加了缺失的 li

可能并不完美（删除了跨度和缺少导入的定位样式），但悬停现在可以工作：http: [//jsfiddle.net/pPkLQ/](http://jsfiddle.net/pPkLQ/)

# eclipse - 从 Eclipse 项目中导出 WAR 文件的问题

> ID：11021161
> 
> 赞同：2
> 
> 时间：2012-06-13T18:32:27.103
> 
> 标签：eclipse, dynamic, web, war

当我尝试通过右键单击 Project--> Export--> War File 在 Eclipse 中创建 WAR 文件 () 时，指示 WAR 文件创建的窗口在没有通知的情况下退出。正常吗？如果没有，我能否得到一些建议，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-29T07:56:28.513

您需要将 eclipse java 项目的类型更改为 web 项目。

最好的方法是创建一个新的 Web 项目并将旧项目中的数据复制到 Web 项目中。

就我而言，我执行了以下步骤

1.  旧项目\WEB-INF\src 到新 Web 项目\src
2.  旧项目\WEB-INF\lib 到新 Web 项目\lib

否则，如果您想手动执行步骤，请 [在将现有 eclipse 项目导出到 war 文件时参考以下链接“模块名称无效”](https://stackoverflow.com/questions/6129780/module-name-is-invalid-when-exporting-an-existing-eclipse-project-to-a-war-fil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:09:17.290

可能`war`已经存在具有相同文件名的文件。如果是这种情况，请务必选中导出向导中的“覆盖现有文件”复选框。

如果不是问题，那么您的 Eclipse IDE 中肯定存在一些错误。原因是您应该更新（WTP Patches 3.4.0），这会导致 Eclipse 在导出`war`文件时出错。

我曾经遇到过这个问题，解决方法是安装一个新的 Eclipse IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T05:18:30.563

由于 C: 驱动器中的存储空间不足，有时会出现向导错误。在清除临时存储后尝试创建相同的内容，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T16:14:03.227

我不得不将 .project 文件中的项目性质更改为：

```
 <nature>org.eclipse.jem.workbench.JavaEMFNature</nature>
    <nature>org.eclipse.wst.common.modulecore.ModuleCoreNature</nature>
    <nature>org.eclipse.wst.common.project.facet.core.nature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>org.jboss.tools.jst.web.kb.kbnature</nature>
    <nature>org.jboss.tools.cdi.core.cdinature</nature>
    <nature>org.eclipse.wst.jsdt.core.jsNature</nature> 
```

# javascript - 将画廊添加到 lightbox1

> ID：11021162
> 
> 赞同：0
> 
> 时间：2012-06-13T18:32:31.050
> 
> 标签：javascript, lightbox, lightbox2

我正在尝试将图片库功能添加到原始灯箱 - [http://lokeshdhakar.com/projects/lightbox/](http://lokeshdhakar.com/projects/lightbox/)。我在 ContentFlow 的插件中使用它，并希望用户能够在选择图像后导航上一张和下一张图片。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:19:41.710

这可能有帮助或没有帮助，但我为图片库软件[Jalbum](http://www.jalbum.net "贾布姆")编写了一个皮肤，该皮肤 将许多 Lightbox（虽然不是原始 Lightbox）与 ContentFlow 集成在一起。这是[链接](http://jalbum.net/en/skins/skin/LightBoxes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:57:52.317

首先，您需要一个后端，您可以使用 ftp 将您的图像上传到一个文件夹，或者您可以使用您最喜欢的 cms 创建一个插件或小部件。然后对于网格，您可以使用 Jquery 插件砌体。事实上，它像树状图一样对图像进行排序，但它也适用于任何水平网格。在网格上方，您可以添加 Jquery Anything Slider 以浏览每个类别。当您单击网格缩略图时，它可以打开一个灯箱。

# c# - 变量后面的绑定代码不起作用

> ID：11021164
> 
> 赞同：0
> 
> 时间：2012-06-13T18:32:37.220
> 
> 标签：c#, data-binding

我的用户控件中有一个`RequiredFieldValidator`DropDownLists。`ErrorMessage`呈现为`<%# areaType %> is required.`

```
<asp:RequiredFieldValidator runat="server" ID="areaRequiredFieldValidator" Display="None" ControlToValidate="area" EnableClientScript="False" ErrorMessage="<%# areaType %> is required."></asp:RequiredFieldValidator> 
```

后面的代码...

```
private StateAreaDropDownEnums.AreaTypes _areaType;

protected string areaType {
    get { return _areaType.ToString(); }
} 
```

我`Page.DataBind()`在`Page_Load`和所有其他对变量后面其他代码的引用都绑定得很好，只有这个失败了。有任何想法吗？

**注意**：这是一个 3.5 的网站项目，而不是一个网络应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:03:22.437

```
ErrorMessage='<%=string.Format("{0} is required.", areaType)%>'> 
```

应该管用。在这种情况下，您只是设置一个值，而不是绑定，因此绑定语法不适用。

# python - 在heroku中推送烧瓶应用程序时出错：sqlite3丢失

> ID：11021179
> 
> 赞同：1
> 
> 时间：2012-06-13T18:33:35.613
> 
> 标签：python, heroku, sqlite, flask

我正在尝试将 Flask 应用程序推送到 Heroku。但是如果我启动应用程序，它会崩溃并出现以下错误：

```
2012-06-13T18:30:36+00:00 app[web.1]:   File "/usr/local/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
2012-06-13T18:30:36+00:00 app[web.1]: ImportError: No module named _sqlite3
2012-06-13T18:30:36+00:00 app[web.1]:     from _sqlite3 import * 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:04:32.970

我不确定 Heroku 是否支持 SQLite。我会将 PostgreSQL 用于生产网站。

您可以按照[此处](https://devcenter.heroku.com/articles/django)的 Django 教程了解如何设置 PostgreSQL。

# python - 分配中的元组解包

> ID：11021185
> 
> 赞同：3
> 
> 时间：2012-06-13T18:34:01.097
> 
> 标签：python, tuples, iterable-unpacking

我想在 python 语句中解压缩一个元组，如下所示：

```
a = 5, *(6,7) 
```

但这引发了`SyntaxError`. 实现这样的事情的最干净的方法是什么？

到目前为止，我想出的最好的是：

```
a = tuple([5]+list((6,7))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T18:36:17.670

您可以直接连接元组：

```
>>> a = (5,)+(6, 7)     
>>> a
(5, 6, 7) 
```

# android - 在android中的本机相机预览上覆盖图像

> ID：11021194
> 
> 赞同：2
> 
> 时间：2012-06-13T18:34:57.587
> 
> 标签：android, image-processing, overlay, javacv, mylocationoverlay

我尝试使用本机摄像头在实时视频上实现图像叠加。代码如下：

```
if (bmp != null) 
{ 
    Canvas canvas = mHolder.lockCanvas(); 
    if (canvas != null)
    {
        canvas.drawBitmap(bmp, (canvas.getWidth() - bmp.getWidth()) / 2,(canvas.getHeight() - bmp.getHeight()) / 2, null); 
        canvas.drawBitmap(drawable,0,0, null); 
        mFps.draw(canvas, (canvas.getWidth() - bmp.getWidth()) / 2, 0); 
        mHolder.unlockCanvasAndPost(canvas); 
    } 
    bmp.recycle(); 
} 
```

但是当我运行程序时，它说强制关闭。我使用的图像尺寸是 751 x 500。请问有什么建议吗？（或任何替代方法？）

提前感谢您的输入。

# php - 当我通过 $_POST 将数据发送到 PHP 时，我从隐藏的输入中丢失了数据？

> ID：11021195
> 
> 赞同：0
> 
> 时间：2012-06-13T18:34:58.360
> 
> 标签：php, javascript, post, hidden-field

我在 javascript 中构建一个数组，在其上使用 JSON.stringify()，然后将隐藏输入字段的 value 属性设置为结果字符串。

```
function setSelectedArray(){

        var ticketInfo = new Array();   //creates new array for later
        var num=0;                      //num accumulates the number of the next row
        for(var i=0;i<hlRows.length;i++){
            if(hlRows[i]){  //hlRows is an array with boolean values telling me
                            //which dataArray values to set ticketInfo to
                ticketInfo[num] = dataArray[i];
                //dataArray is a pre-defined array and contains a large amount of data
                //ticketInfo is a smaller array that is gathering all data specified from hlRows
                num++;
            }
        }
        //line below sets 'tix'(hidden input field).value to the JSON version of ticketInfo
        document.getElementsByName('tix').value = (JSON.stringify(ticketInfo));

        //At this point, my alert below displays everything I want to see.
        //It looks like correct JSON to me
        alert("The VALUE of 'tix' is: "+document.getElementsByName('tix').value);

        //this submits the form that the hidden field is inside of.
        //it wouldn't go to the next page(which it does) without
        //this calling the form's action attribute correctly (i think..)
        document.forms["hiddenForm"].submit();
    } 
```

如果您需要更多描述，可以阅读我的评论。这是该过程的 HTML 部分：

```
<!-- This button, when clicked, calls the setSelectedArray() function -->
<input class="button" type="button" id="btnContact" value="Select Tickets" onclick="setSelectedArray()" style="width:20em;float:right;"/>

<form id="hiddenForm" action="email.php" method="post">
    <input type="hidden" name="tix" value=""/> <!-- I tried this with no value specified too -->
</form> 
```

我不知道我在 email.php 中尝试了多少不同的东西来获得任何类型的输出。我尝试了 echos 和 print 和 print_r 并从循环中打印并在“数组”中打印值，但似乎没有任何效果。这是 email.php 现在所在的位置：

```
<?php
    $jsArray = json_decode($_POST['tix']);
    var_dump($jsArray);
?> 
```

我从 email.php 得到的唯一输出是“NULL”（在警报中不是早 2 秒）或“Array”。否则，它什么也没说，我只是得到一个空屏幕。我在这里做错了什么？我需要使用 AJAX 来发布数据吗？我觉得这样不对。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:47:18.303

你的问题是 getElementsByName 返回一个元素数组。

```
document.getElementsByName('tix')[0].value = (JSON.stringify(ticketInfo));

alert("The VALUE of 'tix' is: "+document.getElementsByName('tix')[0].value); 
```

# xcode - 如何解决此内存泄漏？

> ID：11021203
> 
> 赞同：0
> 
> 时间：2012-06-13T18:35:43.123
> 
> 标签：xcode, memory-leaks, instruments, reachability

我从 servin.com 网站获得了以下代码。尽管代码有效，但 Instruments 报告了内存泄漏。我在代码中看不到任何分配、保留、复制，所以我无法弄清楚如何解决这个内存泄漏。Instruments 的代码和结果如下。任何帮助，将不胜感激。

```
// Part 1 - Create Internet socket addr of zero
struct sockaddr_in zeroAddr;
bzero(&zeroAddr, sizeof(zeroAddr));
zeroAddr.sin_len = sizeof(zeroAddr);
zeroAddr.sin_family = AF_INET;

// Part 2- Create target in format need by SCNetwork
SCNetworkReachabilityRef target = 
SCNetworkReachabilityCreateWithAddress(NULL, (struct sockaddr *) &zeroAddr);

// Part 3 - Get the flags
SCNetworkReachabilityFlags flags;
SCNetworkReachabilityGetFlags(target, &flags);

// Part 4 - Create output
NSString *sNetworkReachable;
if (flags & kSCNetworkFlagsReachable)
    sNetworkReachable = @"YES";
else
    sNetworkReachable = @"NO";

NSString *sCellNetwork;
if (flags & kSCNetworkReachabilityFlagsIsWWAN)
    sCellNetwork = @"YES";
else
    sCellNetwork = @"NO";

NSLog (@"Network Reachable: %@", sNetworkReachable);
NSLog (@"Cell Network: %@", sCellNetwork); 
```

仪器的结果...

泄漏对象 - # - 地址 - 大小 - 负责库 - 负责框架

Malloc 16 字节 - 1 - 0x5141d50 - 16 字节 - SystemConfiguration - SCNetworkReachabilityCreateWithAddress

SCNetworkReachability - 1 - 0x51347b0 - 288 字节 - SystemConfiguration - SCNetworkReachabilityCreateWithAddress

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:41:40.550

泄漏在那里。完成所有代码后，您应该释放对`target`. 从苹果的文档中`SCNetworkReachabilityCreateWithAddress`：

> 返回值
> 
> 一个新的不可变可达性参考。您必须释放返回的值。

尝试使用`CFRelease(target)`函数来消除呼叫。如果您需要在函数调用之间保持引用 - 将其设为类中的实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:40:40.040

如果您阅读[SCNetworkReachabilityCreateWithAddresss的文档](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)

> 返回值
> 
> 一个新的不可变可达性参考。您必须释放返回的值。

# oauth-2.0 - 在网站上实施 OAuth 支持

> ID：11021206
> 
> 赞同：0
> 
> 时间：2012-06-13T18:35:49.630
> 
> 标签：oauth-2.0, oauth-provider

我想扩展我的网站以支持 OAuth，以便第三方应用程序可以代表网站用户访问数据并执行操作。我应该怎么做？

基本上我想知道如何去生成访问令牌和应该完成的数据库设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:09:08.503

首先，您应该选择将在您的站点上实施的授权模式。在您的情况下，它可能是：

1.  [授权码授予](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.1)
2.  [隐式授权](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.2)

然后考虑到编程语言和框架，您可以做出选择。

在任何情况下，您都必须为 OAuth url 和重定向以及持久存储配置某种路由。

# batch-file - 将“=”符号作为参数传递给 bat 文件

> ID：11021210
> 
> 赞同：0
> 
> 时间：2012-06-13T18:35:58.467
> 
> 标签：batch-file, argument-passing

我正在尝试使用以下代码从 bat 文件启动 exe

```
start "" "abc.exe" %1 %2 %3 %4 
```

我的第一个参数**(%1)**是一个加密的身份验证 id，这个 id 包括两个**=** sings 结尾

我的问题是每次我传递**%1**参数时，这两个**=**签名都会被 bat 文件删除。

结果我无法按预期运行应用程序。

请给我一些关于如何解决这个问题的想法

——兰加纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:43:31.620

如果你启动一个 exe 程序，它应该能够解析它的所有命令。

因此，您应该确保您的参数确实包含预期的数据。

您可以尝试使用硬编码参数。

```
start "" "abc.exe" a$deD343aD5== param2 param3 param4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:32:25.573

Batch 将以下字符视为参数分隔符：`<space> <tab> , ; = <0xFF>`. 请注意，这`<0xFF>`是一个不间断的空格。

将任何分隔符作为参数值的一部分包含在内的唯一方法是将参数括在双引号中。

由调用者将值括在引号中。所以如果第一个参数应该是 a$deD343aD5==，那么你的批处理脚本必须被称为

```
scriptName "a$deD343ad5==" param2 param3 param4 
```

如果您不想将引号传递给您的 exe，那么您可以`~`在批处理脚本中使用修饰符来修剪封闭的引号。但是您必须小心，因为`< > & |`如果不引用或转义特殊字符，则会导致问题。

```
::This will preserve any enclosing quotes around each parameter
start "" "abc.exe" %1 %2 %3 %4

::This will strip any enclosing quotes around each parameter (if they exist)
start "" "abc.exe" %~1 %~2 %~3 %~4 
```

# ios - 即使在 CLLocationManager 上显式调用 stopUpdatingLocation 后，状态栏上的位置服务指示器仍然出现

> ID：11021212
> 
> 赞同：5
> 
> 时间：2012-06-13T18:36:03.320
> 
> 标签：ios, mkmapview, cllocationmanager, statusbar

我有一个视图，有一个地图视图的子视图。我使用 CLLocationManager 来获取当前位置并显示在地图上。然后当视图即将关闭时，我执行以下操作

```
_mapView.delegate = nil;
_mapView = nil;

[_locationManager stopUpdatingLocation];
_locationManager.delegate = nil;
_locationManager = nil; 
```

但是状态栏上的定位服务（GPS）指示灯仍然没有消失。当应用程序进入后台然后返回前台时，它会等待指示器显示在状态栏上，然后再激活。

指标仍然存在有什么原因吗？

编辑 - 以下是 CLLocationManager 的初始化和启动方式

```
 if (_locationManager == nil) {
        _locationManager = [[CLLocationManager alloc] init];
        _locationManager.delegate = self;
        _locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
        _locationManager.distanceFilter = kCLDistanceFilterNone;

        [_locationManager startUpdatingLocation];
    } 
```

以下是我如何停止它

```
 if (_locationManager != nil) {
        [_locationManager stopUpdatingLocation];
        _locationManager.delegate = nil;
        _locationManager = nil;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:39:37.593

正如定位工程师在 WWDC 上所解释的那样，该图标会在右上角保留特定的时间，具体取决于上次使用的服务。我相信一旦你停止使用 location, `[locationManager stopUpdatingLocation]`，计时器就会在图标消失之前开始。某些服务的时间更长。他们没有详细说明这些计时器有多长。我知道它们在 iOS 6 中会变得更长。

停止监视位置后，只需等待（30-60 秒），然后查看图标是否消失。它应该假设你已经停止了一切。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T20:19:35.580

我遇到了类似的问题，在这里找到了答案：

[是什么决定了状态栏中 iPhone 定位服务图标的存在？](https://stackoverflow.com/questions/4413963/what-determines-the-presence-of-the-iphone-location-services-icon-in-the-status)

我的解决方案（正在开发中）是重置位置警告（设置>常规>重置>重置位置警告）

# encryption - 这是什么样的加密？

> ID：11021214
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:36:15.523
> 
> 标签：encryption, deobfuscation

我正在和我的朋友们进行拼图比赛，我被困在这个问题上：

有谁知道这是什么样的加密？我真的不期待答案，但我**想**我排除了凯撒式密码，我想知道是否有人可以识别这种加密（如果它有帮助，我认为它是从网站的电子邮件生成的地址混淆器）。

```
%61%72%40%67%6f%6f%67%6c%65%6d%61%69%6c%2e%63%6f%6d%5c%22%3e%74%69%6d%75%72%2e%61%73%61%72%40%67%6f%6f%67%6c%65 
```

感谢您的帮助（并对可能愚蠢的问题感到抱歉）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:43:31.903

对我来说，该字符串看起来像 URL 编码的字符。我把它扔进一个转换器，得到的结果看起来比我预期的要少。

```
 ar@googlemail.com\">timur.asar@google 
```

这对你来说意味着什么吗？

# php - MySQL INSERT 查询 - 不再有效

> ID：11021220
> 
> 赞同：2
> 
> 时间：2012-06-13T18:36:37.377
> 
> 标签：php, mysql, insert

我遇到了一个过去可以工作的 INSERT 查询的问题，但正如标题所示，它已停止工作。

这是有问题的（或不那么有问题的）代码：

```
$qryd = "INSERT INTO 
         trans_deposits (login, walletadd, depamount, tickamount, recadd) 
         VALUES
         ('$login', '$walletadd', '$thefee', '$ticketamount', '$recaddress')";
$resultd = @mysql_query($qryd);
session_write_close(); 
```

...但更重要的是...我不小心删除了原始表（trans_deposits），所以我创建了另一个具有相同表名和列名等的表。之后，查询不再起作用。- 我不明白怎么做，但这会导致问题吗？

我已经尝试过`mysql_error()`“技巧”，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:47:28.367

```
$qryd = "INSERT INTO trans_deposits(login, walletadd, depamount, tickamount, recadd) VALUES('$login', '$walletadd', '$thefee', '$ticketamount', '$recaddress')";
$resultd = mysql_query($qryd); //remove @
//For INSERT, UPDATE, DELETE, DROP, etc, mysql_query() returns TRUE on success or FALSE on error. 
if (!$resultd) {
    echo "Error! ", mysql_error(); //Read the text of the error message
} 
```

# c# - 字符串的自定义排序

> ID：11021224
> 
> 赞同：2
> 
> 时间：2012-06-13T18:36:54.113
> 
> 标签：c#

我有班级成绩，我需要检查特定成绩是通过还是失败。这是按顺序排列的等级列表：

1.  一种
2.  一种-
3.  乙+
4.  乙
5.  乙-

如果`B`是及格分数，并且学生有`B+`，使用正常排序，如果我检查学生成绩> passMark，那么它会说它是失败的，因为系统将字符串排序如下：

1.  一种
2.  一种-
3.  乙
4.  乙+
5.  乙-

如何设置自定义比较器以将列表排序为 C# 中的第一个列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:39:53.353

如何按数值设置字母等级？

*   A = 4.0
*   A- = 3.7
*   B+ = 3.3
*   B = 3.0

等等....

然后按数值而不是字母等级排序。`3.0`可以作为及格标志。

只是一个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:40:48.940

您可以创建一个实现 的自定义类[`IComparer<string>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)，并根据需要使用它进行排序。

话虽如此，成绩通常以数字方式处理，而不是通过字符串比较。使用数值会使这更简单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:42:21.060

使用[List<> 类的 sort 方法](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)并提供自定义[比较](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)是可行的方法（至少一种方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T18:46:35.357

一个枚举给他们一个权重怎么样？

```
public enum ComparisonType
{ 
    A = 1, 
    AM = 2, 
    BP = 3,
    B = 4,
    BM = 5
} 
```

创建自定义比较器时更容易。

```
public class GradeComparer : IComparer {} 
```

之后，通过调用列表上的 .Sort() 方法就轻而易举了，瞧。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T18:47:51.933

试试这个 ：

```
public class MyComparer : IComparer<MyObject>
{     
    public int Compare(string s1, string s2)
    {
          var grad1 = s1.Replace('+','1').Replace('-','2');
          var grad2 = s2.Replace('+','1').Replace('-','2');             
          if (grad1 > grad2)
              retun 1;
          else if (grad1 < grad2)
              return -1;
          else
              return 0;

    }
}

List<string> list = new List<string>{"A","A+","A-"};

var sortedList = list.OrederBy(o=>o,new MyComparer()).OrderBy(o=>o.Length); 
```

# orchardcms - 以编程方式将字段添加到分类术语

> ID：11021233
> 
> 赞同：0
> 
> 时间：2012-06-13T18:37:44.523
> 
> 标签：orchardcms

当启用模块功能时，我创建了一个分类调用“ **Stuff ”。**与此同时，我正在使用 AlterTypeDefinition 向它添加一个正文部分，没有任何问题。

我现在有一个名为“ **Stuff Term** ”的 ContentType 并附有正文部分。都好！

在启用功能的同时，在“ **Stuff Term** ”上，我想添加一个名为“ **StuffId** ”的文本类型字段，这样当我开始为“ **Stuff** ”创建/添加我的分类术语时，我也可以更新具有我选择的 ID 的术语上的“ **StuffId** ”字段。这样我就可以在同步期间通过“ **StuffId ”获得正确的术语。**

我似乎找不到如何以编程方式将字段添加到内容类型的示例。我可以看到它可以/必须添加到某个部分，但是应该添加“ **Stuff Term** ”内容类型的哪个部分？

任何指示将不胜感激。

PS我有很多分层的东西和一些同名的东西。但是，相同的名称永远不会出现在层次结构的同一级别。术语的路径为 Stuff 提供了上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:42:55.757

将其添加到与类型同名的部件中（该部件不需要预先存在）。

# javascript - 在 JavaScript 中创建唯一标识符

> ID：11021234
> 
> 赞同：2
> 
> 时间：2012-06-13T18:37:48.623
> 
> 标签：javascript, uniqueidentifier

> **可能重复：**
> [如何在 Javascript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

我需要在 JavaScript 中创建一个唯一标识符。我不在乎它是什么，只要它在世界上所有计算机中都是独一无二的。我想以某种方式将 PC 的唯一 ID（mac 地址？）与日期/时间戳连接起来，但不知道该怎么做。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:54:04.533

您将无法从浏览器 (javascript) 获取 mac 地址，而且在服务器上这很棘手 - （但并非不可能）。它也不能保证在世界上是独一无二的——我听说过大型组织在其公司网络内部发生冲突。

# language-agnostic - 函数是否应该用于只使用一次的连贯过程？

> ID：11021238
> 
> 赞同：1
> 
> 时间：2012-06-13T18:37:59.307
> 
> 标签：language-agnostic

我读过良好的编程实践声称如果要在程序中重复使用一个块，则应该使用一个函数。但是，如果您有一个具有明确概念边界的过程，但它只被调用一次怎么办。你应该立即将它写在主代码中，还是应该将它放入一个函数并在主代码中调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:51:08.390

一次写入是使用函数的原因之一。但是，任何具有明确概念边界的代码块都是函数的理想候选者。

生成的脚本逻辑流程将更直接且更易于阅读/调试。

例如，假设您有一个数据库脚本，它在继续主要工作之前运行一些基本审计。这在脚本中发生一次，但结果逻辑流将是：

```
dbConnect()
dbAudit()
...
do main loop
... 
```

美观大方，便于他人阅读和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:41:40.627

除非有充分的理由不这样做，否则将其放入函数中。您的代码将保持清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:44:01.193

简单的答案是这完全取决于您。如果存在概念边界，我倾向于将它放在一个函数中，除非它太短以至于额外的样板文件会使代码的整体可读性降低。

关于您引用的编程实践，值得考虑的一件事是：“如果要在程序中重复使用块，则应该使用函数”并不意味着“如果要使用一次块，则不应使用函数”。这实际上是在否定前件，是一个逻辑谬误。

正确的反转更像是这样：如果由于某种原因您被禁止将代码块放入函数中，那么您最好希望该块只需要调用一次（每次执行该代码块所在的函数）位于）。:-)

# android - FacebookMobile.init OAuthException

> ID：11021241
> 
> 赞同：2
> 
> 时间：2012-06-13T18:38:04.613
> 
> 标签：android, facebook-graph-api, air, facebook-android-sdk

首先抱歉，如果我弄错了，这是我的第一篇文章。

我一直在构建一个 Android 游戏，并且一直在尝试将 Facebook 发帖集成到其中。以下是技术细节：

*   Windows 7的
*   在 FDT 中开发
*   使用适用于 Android 的 Flex 4.6 和 Adob​​e Air
*   动作脚本 3.0。

我已插入 FacebookMobile.init 并传入我的应用程序 ID 和回调函数。但是我收到以下消息：

> "{"error":{"message":"必须使用活动访问令牌来查询当前用户的信息。","type":"OAuthException","code":2500}}"

我注意到在其他一些页面上，人们在没有真正解决方案的情况下购买了这个。我已经尝试过在另一个站点上找到的 damarmada 解决方案，但这也不起作用。

谢谢你的时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T14:14:55.420

对我来说它的工作。这就是我所做的。

1，我使用 facebook 应用程序设置页面中的“添加平台”按钮为我的应用程序添加了 android 平台。
2、我下载了源码，用它代替了swc。
3，在 facebook 应用程序设置页面中，转到设置 -> 高级并将[http://www.facebook.com/connect/login_success.html](http://www.facebook.com/connect/login_success.html)添加到“有效 OAuth 重定向 URI”字段中。并设置“本机或桌面应用程序？” “是”。现在我的应用程序会将 facebook 登录页面加载到 StageWebView 中，我们可以在那里登录。这就是我登录的方式。

```
var permissions:Array = ["user_about_me","user_friends","publish_actions"];
var stageWeb:StageWebView = new StageWebView ();
stageWeb.stage = stage;// Your app stage
stageWeb.viewPort = new Rectangle (0, 0, stage.stageWidth, stage.stageHeight);
FacebookMobile.login (onLogin, stage, permissions, stageWeb); 
```

希望这对你也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:13:26.333

解决方案 ！！

```
private function onAddedToStage(event:Event):void
{
    FacebookMobile.init(_appId, initHandler);
}   
private function initHandler(success:Object,fail:Object):void
{
    if(success)         
{               
    // good the user is already connected           
}           
else            
{
    var myWebView:StageWebView = new StageWebView();
    myWebView.stage = Starling.current.nativeStage;
    myWebView.viewPort = new Rectangle(0,0,stage.stageWidth,stage.stageHeight);
    FacebookMobile.login(loginHandler, Starling.current.nativeStage, PERMISSIONS, myWebView);
    }       
} 
```

来自：[http ://forums.adobe.com/thread/928058](http://forums.adobe.com/thread/928058)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:33:56.683

听起来您的应用程序尚未登录，或者如果您使用 SingleSignOn，则 Facebook 应用程序未登录。登录为您/Facebook 应用程序提供了一个访问令牌，然后您在请求数据时提供该令牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:10:31.350

**更新** 我现在相信您将 FacebookMobile.login() 放在错误的位置。将它添加到 FacebookMobile.init() 的处理程序中，理想情况下，在某种**else**测试下，**成功**对象是否返回 null（当您未初始化时它会返回 null）。

您仍然可以使用以下内容，尽管 facebook-actionscript-api 似乎确实有效。

为了让自己更简单，建议遵循“Windows、OS X 和 Linux 原生应用程序”标题下的建议：[https ://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

根据该文档的最后一行，使用 StageWebView ( [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html) ) 并监听 StageWebView locationChange 事件。

随心所欲地处理位置重定向 uri，但这里的关键是他们为您提供的带有访问令牌 (https://www.facebook.com/connect/login_success.html) 的默认值，从 url 获取访问令牌使用 StageWebView 位置属性，一旦它在您的应用程序中，您就可以轻松创建自己的 URLRequest 并按照您的远程服务使用它。

最好的，如果你有更好的方法，请评论。

# django - 在表单集中访问多对多“通过”关系字段

> ID：11021242
> 
> 赞同：10
> 
> 时间：2012-06-13T18:38:07.460
> 
> 标签：django, django-forms, django-templates, django-orm

我的模型：

```
class End_User(models.Model):
    location = models.ForeignKey(Location) 
    first_name = models.CharField(max_length=70, blank=True, null=True)
    email_address = models.CharField(max_length=70, blank=True, null=True)

class Phone_Client(models.Model):
    end_user = models.ManyToManyField(End_User)
...
    extensions = models.CharField(max_length=20)

class Line(models.Model):
    phone_client = models.ManyToManyField(Phone_Client, through='Phone_Line' )
    ....
    voicemail = models.BooleanField(default=False)  

class Phone_Line(models.Model):
    phone_client = models.ForeignKey(Phone_Client)
    line = models.ForeignKey(Line)
    line_index = models.IntegerField() 
```

所以基本上一个终端用户可以有很多电话，一个电话可以有很多线路，通过Phone_line关联。

我的页面需要在同一页面中为 Phone_Clients 和 Line 创建所有这些对象可编辑的运行时和新实例。目前我正在为 Phone_Client 和 Lines 创建一个简单的 End_User 模型表单和 modelformset_factory 对象。由于电话可以有很多行，所以 phone_formset 中的每个电话表单都可以有一个线路表单集对象。我目前正在做这样的事情

```
end_user = End_User.objects.get(pk=user_id)
user_form = End_UserForm(instance=end_user)

Phone_ClientFormSet = modelformset_factory(Phone_Client,form=PartialPhone_ClientForm,  extra=0, can_delete=True)

phone_clients_formset = Phone_ClientFormSet(queryset=end_user.phone_client_set.all(), prefix='phone_client')

all_lines = modelformset_factory(Line, form=PartialLineForm, extra=0, can_delete=True)

phone_clients = end_user.phone_client_set.all()

client_lines_formsets = {}
for phone in phone_clients:
    client_lines_formsets[phone.id] = all_lines(queryset=phone.line_set.all(), prefix='phone_client_'+str(phone.id)) 
```

我正在使用此列表使用表单集在模板中显示属于 phone_client 的行。

我有以下问题，关于模型

1.  我可以使用 inline_formset 工厂来处理包含直通类的多对多关系吗？如果是这样，我该如何通过关系对 Phone_Client、Line 和 Phone_Line 执行此操作？

2.  我需要显示给定电话、线路组合的 line_index，如何在模板中执行此操作？我查看了
    [如何从 django 模板访问多对多“直通”表的属性？](https://stackoverflow.com/questions/3368442/how-do-i-access-the-properties-of-a-many-to-many-through-table-from-a-django-t) 我不想只显示，而是将值绑定到电话、线路组合（如果可能）在线路或电话表单集中，这样如果用户更改索引，我可以在发布表单集数据时将其保存在数据库中。

我是 django 的新手，所以非常感谢任何帮助。谢谢！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T20:11:26.033

您可能知道，您不能使用内联表单集编辑多对多关系。但是，您可以编辑直通模型。因此，对于您的内联表单集，您只需将模型设置为直通模型，例如：

```
inlineformset_factory(Phone_Client, Line.phone_client.through) 
```

`line_index`实际上将是内联表单上的可见字段，因此您实际上不必做任何事情。如果有人更改了索引，它将在保存内联表单时保存，就像其他字段一样。

# c - 使用 select 检测键盘输入

> ID：11021244
> 
> 赞同：0
> 
> 时间：2012-06-13T18:38:08.027
> 
> 标签：c, select

我正在编写一个简单的服务器，使用 select 来监控多个病。

这是我的代码：

```
while (1) { /* Main server loop - forever */
    build_select_list();
    timeout.tv_sec = 1;
    timeout.tv_usec = 0;

    readsocks = select(maxSock+1, &socks, (fd_set *) 0, (fd_set *) 0, &timeout);

    if (readsocks < 0) {
        perror("select");
        exit(EXIT_FAILURE);
    }
    if (readsocks == 0) {
        printf(".");
        fflush(stdout);
    } else
        read_socks();
} 
```

我知道 select 检测它正在监视的套接字中的变化并“报告”它。我可以使用 select 检测用户的键盘输入（对于退出等命令）吗？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:46:05.773

您可以使用`STDIN_FILENO`（来自 unistd.h）或使用`fileno(stdin)`（来自 stdio.h）来获取控制台输入的文件描述符。将其添加到您的“读取”fdset，`select`并将“做正确的事情”，指示何时有可用的控制台输入。从那里，就像任何其他文件描述符一样从中读取。

# makefile - 在 Makefile 中查看 shell 脚本的输出

> ID：11021245
> 
> 赞同：3
> 
> 时间：2012-06-13T18:38:08.307
> 
> 标签：makefile, gnu-make

如何在 Makefile 中构建目标之前执行 shell 脚本，并在运行时查看输出？

我有一个称为`prepare.sh`生成一堆 .pyx 文件的脚本。.pyx 文件是我涉及 make 的构建过程的起点。它来自 .pyx -> .c -> .o -> .so

我不喜欢在 make 之前单独运行 prepare.sh。我想为我运行它。

我让它工作，但我没有看到命令的输出。我想看看。这就是我现在所拥有的：

```
PATH := ${PYTHONHOME}/bin:${PATH}

NOTHING:=$(shell ./prepare.sh)

PYXS?=$(wildcard merged/*.pyx)
SOURCES=$(PYXS:.pyx=.c)
OBJECTS=$(SOURCES:.c=.o)
SOBJECTS=$(OBJECTS:.o=.so) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T19:21:44.880

将脚本的输出重定向到 stderr。在这种情况下，您还可以摆脱虚拟`NOTHING`变量：

```
$(shell ./prepare.sh >&2) 
```

## UPD。

另一种选择是在运行之前运行的配方中执行脚本：

```
.PHONY : prepare
prepare :
    ./prepare.sh

-include prepare 
```

另请参阅：原始 Beta 对这个 hack 的[回答](https://stackoverflow.com/a/10727593/545027)，GNU Make 手册[条目](http://www.gnu.org/software/make/manual/make.html#Remaking-Makefiles)解释了它是如何工作的。

# iphone - 我的应用程序中的音频，播放暂停滑块

> ID：11021247
> 
> 赞同：0
> 
> 时间：2012-06-13T18:38:17.847
> 
> 标签：iphone, ios, xcode, audio, avaudioplayer

伙计们，我在将 UISlider 合并到我的音频应用程序时遇到了错误，任何建议都会很棒，这是我的第一个应用程序，我是新手......

曲目播放正常，停止正常，但是当我尝试跳过应用程序崩溃时，我确定我错过了一些东西，只需要对代码有一些新的看法，希望有人可以建议......

**NoGraceViewController.h**

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface NoGraceViewController : UIViewController<AVAudioPlayerDelegate> {
    AVAudioPlayer *audioPlayer;
    UISlider *volumeControl;
}

@property(nonatomic,retain)IBOutlet UISlider *volumeControl;
@property(nonatomic,retain) AVAudioPlayer *audioPlayer;
@property (weak, nonatomic) IBOutlet UITextField *timeLabel;
@property (weak, nonatomic) IBOutlet UISlider *skipSlider;

-(IBAction) nograceButton;

-(IBAction)playbutton;

-(IBAction)stopbutton;

-(IBAction)skipSliderMoved;

@end 
```

**NoGraceViewController.m**

```
#import "NoGraceViewController.h"

@interface NoGraceViewController ()

@end

@implementation NoGraceViewController
@synthesize skipSlider;
@synthesize timeLabel;

-(IBAction) nograceButton { 
    [[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"http://itunes.apple.com/us/album/no-grace-original-mix-single/id392597812?uo=4"]];
}

@synthesize audioPlayer;

- (IBAction)playbutton
{
    [audioPlayer play];

}

-(IBAction)stopbutton
{
    [audioPlayer stop];
}

- (IBAction)skipSliderMoved:(UISlider *)sender {
    self.audioPlayer.currentTime = self.audioPlayer.duration*sender.value;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    NSURL *url=[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"001.mp3" ofType:nil]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
    if (error)
    {
        NSLog(@"Error in audioPlayer: %@", 
              [error localizedDescription]);
    } else {
        audioPlayer.delegate = self;
        [audioPlayer prepareToPlay];
    }

}

- (void)viewDidUnload {
    [self setSkipSlider:nil];
    [self setTimeLabel:nil];

    self.volumeControl=nil;
    self.audioPlayer=nil;
}

-(void)updateDisplay { 
    self.skipSlider.value = self.audioPlayer.currentTime / self.audioPlayer.duration; 
    NSString *timeString = [[NSString alloc] initWithFormat:@"%d:%02d", (int)   self.audioPlayer.currentTime / 60,(int) self.audioPlayer.currentTime % 60];
    self.timeLabel.text = timeString;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:13:22.880

尝试这个：

```
self.audioPlayer.currentTime = (self.audioPlayer.duration / 100) * sender.value; 
```

# mysql - 一个数据库中有多个网站？

> ID：11021248
> 
> 赞同：-4
> 
> 时间：2012-06-13T18:38:19.077
> 
> 标签：mysql, database, installation

我正在构建一个网站模板系统，多个用户可以在其中创建自己的迷你网站。我预计该系统有可能扩展到数百万用户。最好将每个人的迷你站点的所有数据存储在一个 MySQL 数据库中，还是为每个用户创建一个单独的 MySQL 数据库？

为数百万用户处理未来可扩展性的设置是什么？每个选项的优缺点是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:40:56.587

在一个数据库中拥有数百万条记录很容易，而在一台（或几台）计算机中处理数百万个数据库是不可能的。

如果您确实为每个用户提供的数据很少，并且确实计划拥有很多用户，那么甚至不要尝试为每个用户提供其数据库。数据库用于增长和处理许多记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:42:59.473

向后工作……创建 100 万个数据库实例不是很实际。

所以是的，您可能希望至少使用更少数量的数据库。此类问题称为[多租户应用程序](http://en.wikipedia.org/wiki/Multitenancy)。

如果您在每个网站上存储几千个条目，您会发现 MySQL 使用单个数据库（加上至少一个用于备份和故障转移的从属服务器......）让您走得很远。

在某些时候，您将需要设置第二个主/从数据库对来处理下一批客户。

# android - 如何使用 getorientation 和 getrotation 矩阵计算俯仰、滚动

> ID：11021255
> 
> 赞同：1
> 
> 时间：2012-06-13T18:38:46.400
> 
> 标签：android, device-orientation, pitch

我想获得滚动和俯仰值来检测设备在 4 个方向上的倾斜。我想使用 getorientation 和 getrotation 矩阵来做到这一点。我该怎么做？甚至链接也会有所帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T10:56:56.993

如果您只需要一个**链接**，请尝试完整阅读本节：

[http://developer.android.com/guide/topics/sensors/sensors_position.html#sensors-pos-orient](http://developer.android.com/guide/topics/sensors/sensors_position.html#sensors-pos-orient)

**您应该关注第 4 段**（以“方向传感器派生[...]”开头的一段）。

# .htaccess - 我将如何在 apache 中处理这个 301 重定向？

> ID：11021259
> 
> 赞同：1
> 
> 时间：2012-06-13T18:39:16.577
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301

我有很多页面都是从旧站点设置的：

```
http://www.domain.com/directory/onedirectory/whatever1
http://www.domain.com/directory/onedirectory/whatever2
http://www.domain.com/directory/onedirectory/whatever3

http://www.domain.com/directory/anotherdirectory/whatever1
http://www.domain.com/directory/anotherdirectory/whatever2
http://www.domain.com/directory/anotherdirectory/whatever3 
```

基本上，我已经摆脱了所有“随便”的目录，所以只有一个目录有一个页面（和 index.php），所以现在只有：

```
http://www.domain.com/directory/onedirectory
http://www.domain.com/directory/anotherdirectory 
```

我将如何使所有“任何”目录都重定向回父目录？我不知所措。我尝试了很多东西，但都没有奏效，它们通常最终会创建一个无限循环。

提前感谢您的任何帮助。

-杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:44:22.327

您在这里要做的最好的事情就是使用[mod_redirect](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)，例如：-

```
ReWriteRule /directory/onedirectory/whatever1 /directory/onedirectory 
```

您甚至可以扩展它并使用正则表达式进行内联替换，请查看[本教程](http://www.mediacollege.com/internet/server/apache/mod-rewrite/)以获得一些帮助

# label - 自定义标签到 JFreeChart

> ID：11021260
> 
> 赞同：1
> 
> 时间：2012-06-13T18:39:18.583
> 
> 标签：label, jfreechart

我正在使用 JFreeChart 创建一个 XYStepChart，我的数据集与 (TimeStamp, X1, X2) 一样发送给我。我需要为给定的时间戳绘制 X1，但是我想使用 X2 的值作为给定点的标签。

有人可以指导我实现这一目标吗？我尝试了以下方法：

```
XYItemLabelGenerator itemLabelGenerator = new StandardXYItemLabelGenerator();
plot.getRenderer().setBaseItemLabelGenerator(itemLabelGenerator);
plot.getRenderer().setSeriesItemLabelsVisible(0, true); 
```

但这只是将 X1 的值显示为标签。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:44:13.693

在大多数情况下，您可以使用由识别的*ArgumentIndex值，如此*[处](https://stackoverflow.com/a/3158958/230513)[`StandardXYItemLabelGenerator`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/StandardXYItemLabelGenerator.html)所示。为了更好地控制，您可以在子类中覆盖。`generateLabel()`

# c++ - 根据模板变量类型执行不同的方法

> ID：11021267
> 
> 赞同：10
> 
> 时间：2012-06-13T18:39:58.150
> 
> 标签：c++, templates, types, typeid

有没有办法确定传递给模板的变量的类型并根据它是否是`int`或`std::string`等来调用函数......？

例如

```
template <class T>
struct Jam
{
     Jam(T *var)
     {
         if (typeid(var) == typeid(std::string*)
                *var = "Hello!";
         else if (typeid(var) == typeid(int*)
                *var = 25;
     }
}; 
```

当我尝试使用该代码时，出现错误`invalid conversion from const char* to int`。我怀疑这是因为编译器将模板“扩展”为单独的函数，当我指定结构的新实例时，`throw Jam<std::string>(&setme);`它检测到`var* = 25`语句并拒绝编译。

有没有合适的方法来做到这一点？也许有宏守卫？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T18:42:29.847

改用常规函数重载：

```
template <class T>
struct Jam
{
    Jam(std::string* var)
    {
        *var = "Hello!";
    }

    Jam(int* var)
    {
        *var = 25;
    }
}; 
```

除非您想专门研究`T`用于实例化的类型`Jam`。在这种情况下，你会这样做：

```
template<>
struct Jam<std::string>
{
    Jam(std::string* var)
    {
        *var = "Hello!";
    }
};

template<>
struct Jam<int>
{
    Jam(int* var)
    {
        *var = 25;
    }
};

template<typename T>
struct Jam
{
    Jam(T* var)
    {
        // every other type
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T18:46:05.303

查找“部分模板专业化”。

将 Jam() 的主体从 Jam{} 中取出：

```
template <class T>
struct Jam
{
  Jam(T *var);
}; 
```

现在写两个主体：

```
Jam<int>::Jam(int *var) {
   // stuff
}

Jam<std::string>::Jam(std::string *var) {
   // stuff
} 
```

（警告：生锈的 C++。但这通常是你的做法。）

新问题：如果你需要鸭式打字，你为什么要使用 C++？我会切换到 Ruby，并为需要速度的插件保存 C++。但是 C++ 仍然会支持优雅的设计，需要做更多的工作！

# javascript - 将缩放功能添加到 jquery 宝丽来画廊

> ID：11021269
> 
> 赞同：0
> 
> 时间：2012-06-13T18:40:12.020
> 
> 标签：javascript, jquery, css, photo

我正在使用来自 [该](http://www.marcofolio.net/webdesign/creating_a_polaroid_photo_viewer_with_css3_and_jquery.html)站点的 jquery 和 css3 照片库，并且我希望能够在单击时放大图像。作者已经说过有一种方法可以做到这一点，但没有明确说明如何（我不是 jquery 专家）。

我尝试创建一个单独的脚本来更改图像的宽度和高度，但我认为现有的 jquery 或 css 可能已经覆盖了它。
这只是一个测试，看看我是否可以来回改变它：

```
var size = false;
function enlarge(){

    if (size == false){
    document.getElementById("photo1").style.width = "100%";
    document.getElementById("photo1").style.height = "100%";
    size = true; 
    }
    else{
        document.getElementById('photo1').width = '134px';
        document.getElementById('photo1').height = '134px';
        size = false;
    } 
```

关于我如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:25:14.957

我想到了三种不同的方法来做你所要求的（就在我的脑海中）。

1.  从图像的较小版本开始，当用户单击它时，它会切换到较大版本（这将具有最少的模糊量）
2.  更改包含元素的大小。确保包含元素具有样式`max-width:100%; max-height:100%;`
3.  使用[CSS3 转换](http://www.w3schools.com/css3/css3_2dtransforms.asp)（2D/3D 比例）

我创建了一个 jsFiddle 来演示最后两个选项（我假设您可以轻松找出第一个选项）。

至于插件是否在劫持您的样式更改的问题，这将需要对您的特定代码进行一些调试。

[例子](http://jsfiddle.net/UgKeq/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:37:17.680

假设你`$(this)`从 click 函数传递函数并传递它（放大（项目）），你应该能够让它发生。你也可以在你的其他

```
$('img').each(function(){
    $(this).width = '134px';
    $(this).height = '134px';
}); 
```

这样您就不必担心单击另一个后调用它。我会测试它，但不确定你已经拥有什么，并且将整个东西放在 jsfiddle 中对我不起作用（加上不在家里，所以只使用 v13，所以我无法正确测试）。

# r - 在 2 个文件之间寻找重叠值

> ID：11021274
> 
> 赞同：1
> 
> 时间：2012-06-13T18:40:28.690
> 
> 标签：r, bioconductor, overlapping-matches

我有 2 个数据集，每个数据集都包含 Start、End 和 Chromosome 列名。我想比较两个文件中的值，看看是否有任何不重叠的区域（考虑到开始、结束和色度位置）并使用 R 将它们包含在列表中。什么是遍历所有文件的最佳方法两个文件中的数据点并进行比较

文件示例 1：

```
Start   End Chr
0   4   1
26  31  2
48  55  3 
```

文件示例 2：

```
Chr Start   Stop
1   0.779727    4.836056
1   0.852863    3.700089
2   5.334127    21.181346
2   6.218477    6.734267 
```

谢谢

# java - JFrame 仅在方法结束时刷新

> ID：11021276
> 
> 赞同：0
> 
> 时间：2012-06-13T18:40:35.430
> 
> 标签：java, swing, jframe, jlabel, event-dispatch-thread

我正在使用 Netbeans 开发游戏，但现在我被卡住了。

在主`JFrame`类中，我开发了一些方法，每个方法都有很多行，例如框架包含的组件的图标发生变化。问题是我只有在方法完成执行后才能同时看到更改，而不是按顺序查看它们。

我知道这一点是因为在我的一种方法中，例如，我使用多个线程在多次`JLabel`图标更改之间花费几秒钟，但结果是在等待我使用的所有线程对象的全部秒数之后，所有更改都是正好同时显示。我想它一定是在方法结束之前刷新框架的一种方式，但是哪一种呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:49:48.593

看看 SwingWorker。您应该在此线程中进行所有计算，并让 EventDispatchThread 空闲，以便它可以刷新您的 UI。

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

# android - 检测多点触控功能android

> ID：11021280
> 
> 赞同：1
> 
> 时间：2012-06-13T18:40:55.627
> 
> 标签：android, multi-touch

我目前正在开发一款使用多点触控将变焦应用到相机的游戏，但我想在那些没有多点触控功能的设备上放一个放大镜。

我已经搜索了，我找不到答案，

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:49:26.650

我认为[这](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH)就是你要找的：

```
if(getPackageManager().hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH)) {
  //do multitouch
} else {
  //do magnifying glass
} 
```

# git - git 快速检测是否有未跟踪的文件

> ID：11021287
> 
> 赞同：8
> 
> 时间：2012-06-13T18:41:25.963
> 
> 标签：git

有没有办法快速检测是否有任何未跟踪的文件？

我可以[列出所有未跟踪的](https://stackoverflow.com/questions/3801321/git-list-only-untracked-files-also-custom-commands)文件

```
git ls-files --other --directory --exclude-standard 
```

但是如果有很多未跟踪的文件，这会很慢。是否有类似`git diff -q`退出状态决定是否存在任何未跟踪文件的地方？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T22:09:01.467

如果您在看到第一个未跟踪的文件时有想要的东西，请立即退出。

如果你在 GNU/任何东西上

```
git ls-files --other --directory --exclude-standard | sed q1 
```

如果有，将设置 rc1

除此以外，

```
anyuntracked() {
    return `git ls-files -o --directory --exclude-standard | sed q | wc -l`
}
anyuntracked 
```

会做同样的工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:43:35.377

`git status`将通知您任何未跟踪的文件。

示例输出：

```
remco@Prosperpine ~/code/Sick-Beard (master) $ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   init.osx
nothing added to commit but untracked files present (use "git add" to track) 
```

# c# - 在运行时更改变量类型

> ID：11021288
> 
> 赞同：0
> 
> 时间：2012-06-13T18:41:40.000
> 
> 标签：c#, .net

我有一个类层次结构（在 .Net 3.5 中），如图所示：

```
Parent
   - Child1
   - Child2
   - Child3 
```

我有一个基类，如图所示：

```
public abstract class BaseClass
{
    protected Parent field;

    public BaseClass(Parent someField)
    {
        this.field = someField
    }

    public string Property1
    {
        get { return field.Child1Property; }
        set { field.Child1Property = value; }
    }
} 
```

我在构造函数中传递的参数将是孩子之一。有没有办法通过 Parent 类型的变量访问 Child 属性？

或者，是否可以这样做：

```
public abstract class BaseClass
{
    protected Parent field;
    protected Type childType; //Type? Or something else?

    public BaseClass(Parent someField)
    {
        //assign the runtime type of someField to childType
        this.field = someField
    }

    public string Property1
    {
        get { return ((childType)field).Child1Property; }  //Is this possible?
        set { ((childType)field).Child1Property = value; }
    }
} 
```

如果我使用 Type 它似乎不起作用，因为 ((childType)field).Child1Property 是不允许的。问题是，我只知道在运行时传递的是什么类型的孩子，因此似乎不可能将字段转换为适当的类型。

帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:47:43.323

你可以这样做：

```
public abstract class BaseClass
{
    protected Parent field;

    public BaseClass(Parent someField)
    {
        this.field = someField
        if (someField is Child1)
            this.Property1 = ((Child1)someField).Foo();
    }

    public Int32 Property1
    {
        get { return field.Child1Property; }
        set { field.Child1Property = value; }
    }
} 
```

***但是***，这里有一个警告。你需要*知道*传入的实例`parent`是 type`Child1`，否则什么都不会发生。一般来说，如果/则涵盖所有可能的子类被认为是一个糟糕的设计，因为这意味着当您将来添加另一个子类时，您需要记住回到这里并将其添加到 if/then .

正确的方法是在 Parent 中有一个在 child 中被覆盖的属性：

```
public class Parent {
    public virtual Int32 Foo() { return 5; }
}

public class Child1 : Parent {
    public override Int32 Foo() { return 7; } 
} 
```

然后使用该属性：

```
 public BaseClass(Parent someField)
    {
        this.field = someField

        // If someField happens to be a Child1, this will be 7
        this.Property1 = someField.Foo();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:46:32.760

看起来您可能想要使用[Interface](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=VS.80%29.aspx)或[generics](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=VS.80%29.aspx)。

# objective-c - 用一个类别声明符合objective-c协议并用另一个类别实现它

> ID：11021291
> 
> 赞同：4
> 
> 时间：2012-06-13T18:41:42.280
> 
> 标签：objective-c, objective-c-category

clang 报告未`Test1(FooBar)`实现`foo`or `bar`，尽管 foo 已在. 由于's存在于's 之上，clang 应该看到该实现并且不应该要求我在. 由于implements ，clang 不应该要求我在.`Test1(Foo)``bar``Test1``Test1(Foo)``@interface``Test1(FooBar)``Test1(Foo)``foo``Test1(FooBar)``Test1``bar``Test1(FooBar)`

```
@interface Test1 : NSObject

- (void) bar;

@end

@interface Test1(Foo)

- (void) foo;

@end

@protocol FooBar <NSObject>

- (void) foo;
- (void) bar;

@end

@interface Test1(FooBar)<FooBar>

@end

@implementation Test1(Foo)

- (void) foo {
}

@end

@implementation Test1(FooBar)

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:54:44.510

我的理解是这一行：

```
@interface Test1(FooBar)<FooBar> 
```

可以用简单的英语解释为“类 Test1 上的*类别*FooBar 应该实现协议 FooBar”。换句话说，该协议适用于类别，而不是类。

# .htaccess - .htaccess 重写动态 URL 的代码 (Joomla tpjobs)

> ID：11021293
> 
> 赞同：0
> 
> 时间：2012-06-13T18:41:43.457
> 
> 标签：.htaccess, joomla, joomla1.5

1.来自：[http ://www.topcafirms.com/index.php/component/tpjobs/articletraineedetails/49](http://www.topcafirms.com/index.php/component/tpjobs/articletraineedetails/49)

1.至：[http ://www.topcafirms.com/article/49](http://www.topcafirms.com/article/49)

我是非技术人员....请让我知道要在 .htaccess 中添加什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:47:02.887

你实际上想要：

```
/article/49 => index.php/component/tpjobs/articletraineedetails/49 
```

这是`RewriteRule`

```
RewriteEngine On
RewriteBase /

RewriteRule ^article/(\d+)/?$ /component/tpjobs/articletraineedetails/$1 [L] 
```

**注意：**我不熟悉 Joomla。它可能需要进一步重定向链接。因此，`L`可能需要删除该标志。

# android - 小部件图像的大小

> ID：11021296
> 
> 赞同：0
> 
> 时间：2012-06-13T18:42:00.510
> 
> 标签：android

我有一个不想缩放的图像，我正在使用 fitStart。我需要多大尺寸才能确保它覆盖 4x2 小部件？我目前有一个 1024x768 的图像，它没有覆盖。

更新：这是 xml 和屏幕截图：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_bg_rl"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <ImageView
        android:id="@+id/widget_bg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitStart" />

    <LinearLayout 
        android:id="@+id/current_layout"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:focusable="true"
        android:weightSum="8">
        <RelativeLayout
            android:id="@+id/city_time_rl"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="2.5"
            android:background="@drawable/rounded_corners_top">
            <TextView
                android:id="@+id/city" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="MECHANICSBURG"
                android:textSize="16dp"
                android:textColor="@color/dk_blue"
                /> 
```

![在此处输入图像描述](../Images/f8c2e5b3fc33d6be482619b6b635d0d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:31:59.190

您正在使用`fitStart`，它保持图像纵横比，并确保一个维度（在本例中为高度）完全适合。听起来您想要以下两者之一：

*   如果要填充空间，显示整个图像（并根据需要进行拉伸），请使用`fitXY`.

*   如果要填充空间，保持图像的纵横比（并根据需要进行裁剪），请使用`centerCrop`.

# jquery - 自动滚动页面

> ID：11021299
> 
> 赞同：0
> 
> 时间：2012-06-13T18:42:06.513
> 
> 标签：jquery, html, jquery-mobile

我在 jQuery mobile 的页面内容部分编写了以下代码，每当我尝试在文本框中编写任何内容时，页面都会自动上下滚动。也就是说，我的屏幕不会固定在我正在编写的文本框中，它会上下滚动. 请帮忙，
谢谢。

```
<div data-role="content" class='content'>

   <div data-role="collapsible">
   <h3>Purchased Product</h3>
   <h5 id="list">
   <p1></p1>
   </h5>
   <hr/>
   <h4></h4>
   <hr/>
   </div> <!-- collapsible -->

  <div data-role="collapsible">

   <h3>Customer Information</h3> 

   <div data-role="fieldcontain">
    <label for="fname">First Name:</label>
    <input type="text" name="fname" id="fname" value=""  />
</div>  <!--fieldcontain  -->

<div data-role="fieldcontain">
    <label for="lname">Last Name:</label>
    <input type="text" name="lname" id="lname" value=""  />
</div>  <!--fieldcontain -->

<div data-role="fieldcontain">
<label for="address">Address :</label>
    <textarea name="address" id="address"></textarea>
</div>

<div data-role="fieldcontain">
    <label for="email">Email ID:</label>
    <input type="text" name="email" id="email" value=""  />
</div>  <!--fieldcontain -->

<div data-role="fieldcontain">
    <label for="pcode">Postal Code:</label>
    <input type="text" name="pcode" id="pcode" value=""  />
</div>  <!--fieldcontain  -->

     </div><!--collapsible -->   

<fieldset>
<a href="#page_dashboard" data-role="button" data-inline="true">Cancel</a>
   <form>
    <input type="submit" value="order" />
   </form> 
  <!-- <a href="#page_order" data-role="button" data-inline="true" id="button_order">Order</a>-->
</fieldset>
</div><!-- content --> 
```

当我不在`<input type="submit" value="order" />`上面的代码中写行时，我的页面不滚动，但是当我包含这一行时，页面开始滚动为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:10:38.943

$.mobile.silentScroll

*   [http://jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

> **$.mobile.silentScroll (method)**
> 滚动到特定的 Y 位置而不触发滚动事件侦听器。
> · 参数：yPos（数字，默认为0）。传递任意数字以滚动到该 Y 位置。例子：
> 
> ```
> //scroll to Y 100px
> $.mobile.silentScroll(100); 
> ```

# python - 如何将命令行参数输入 Python Anywhere 的调度程序？

> ID：11021300
> 
> 赞同：3
> 
> 时间：2012-06-13T18:42:13.920
> 
> 标签：python, bash, python-3.x, command-line-arguments, pythonanywhere

我有一个 Python3 脚本，它可以采用脚本读取的可选命令行参数`sys.argv`。如果我从终端窗口运行它，我的脚本可以正常工作，但是每当我将它添加到带有参数的 PA 计划选项卡时，我都会在日志中得到一个 bash 126 退出代码。根据 bash 附录，此退出代码意味着`Permission problem or command is not an executable`. 因此，从终端窗口运行的脚本似乎不会在与从计划运行的脚本相同的上下文中运行，因为我的脚本从 bash 终端运行良好。

我需要想办法让脚本通过调度选项卡使用可选的命令行参数运行。

我想我可以编写另一个脚本来调用带有可选参数的第一个脚本，但是在我看来应该有另一种方法来解决这个问题，你可以将你希望运行脚本的参数直接放在你的行上给调度选项卡运行。否则，我将不得不为我想调用的每组单独的参数编写一个脚本，而不仅仅是一个条目来安排脚本运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:39:11.917

感谢@Lattyware 提供此解决方案。如果您遇到此问题，您可以通过转到终端并在脚本上添加执行位来解决它。您可以使用 chmod 添加执行权限，例如：

```
chmod 700 foo.py 
```

您可能还希望在进行任何更改之前验证您的文件权限，以确保您不会添加或删除您不打算添加或删除的内容。

如果需要，您可以[在此处阅读 chmod 。](https://en.wikipedia.org/wiki/Chmod "维基百科上的 chmod")

# javascript - 隐藏 Div 显示另一个使用 LI href

> ID：11021301
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:42:16.430
> 
> 标签：javascript, html, html-lists, hide, show

在隐藏/显示 div 方面需要一点帮助。我知道这里有一些帖子，但没有一个专门针对我想要做的事情。

我的代码如下。我想做的是从leftColum LI单击时显示相应的DIV。

```
<div id="leftColumn">
      <ul>
        <li> <a href="#">Painting</a> </li>
        <li> <a href="#">Landscaping</a> </li>
        <li> <a href="#">Kitchen</a> </li>
        <li> <a href="#">What's next?</a> </li>
      </ul>
   </div>
  <div id="rightColumnPainting">
        <ul>
          <li> <a href="painting.html"></a><img src="./img/house1.jpg" width="100" height="100" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house1.jpg" width="100" height="100" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house1.jpg" width="100" height="100" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house1.jpg" width="100" height="100" /> </li>
        </ul>
      </div>
      <div id="rightColumnLandscaping">
        <ul>
          <li> <a href="painting.html"></a><img src="./img/paint1.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/paint2.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/paint3.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/paint4.jpg" /> </li>
        </ul>
      </div>
      <div id="rightColumnKitchen">
        <ul>
          <li> <a href="painting.html"></a><img src="./img/yard1.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/yard2.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/yard3.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/yard4.jpg" /> </li>
        </ul>
      </div>
  <div id="rightColumnNext">
        <ul>
          <li> <a href="painting.html"></a><img src="./img/house1.jpg" width="100" height="100" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house2.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house3.jpg" /> </li>
          <li> <a href="painting.html"></a><img src="./img/house4.jpg" /> </li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:45:21.140

为此，您需要隐藏`div ul`元素，然后使用`:target`选择器`display: block`：

```
#leftColumn {
    display: block;
}

#leftColumn ul {
    display: block;
}

div ul {
    display: none;
}

div:target ul {
    display: block;
} 
```

当然，您确实需要确保`#leftColumn`ul 首先是可见的；并且，进一步，要求`a`您在页面中导航的元素`id`在其属性中具有适当的`href`属性：

```
<ul>
    <li><a href="#rightColumnPainting">Painting</a></li>
    <li><a href="#rightColumnLandscaping">Landscaping</a></li>
    <li><a href="#rightColumnKitchen">Kitchen</a></li>
    <li><a href="#rightColumnNext">What's next?</a></li>
</ul> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lks3G/2/)。

# oracle - JDBC 连接默认的 autoCommit 行为

> ID：11021304
> 
> 赞同：26
> 
> 时间：2012-06-13T18:42:19.850
> 
> 标签：oracle, jdbc, autocommit

我正在使用 JDBC 连接到 Oracle。我测试了`connection.setAutoCommit(false)`vs `connection.setAutoCommit(true)`，结果符合预期。

虽然默认情况下连接应该像`autoCommit(true)`[如果我错了，请纠正我] 一样工作，但是`connection.commit()`在调用之前没有插入任何记录。关于默认行为的任何建议？

```
String insert = "INSERT INTO MONITOR (number, name,value) VALUES (?,?,?)";

conn = connection; //connection  details avoided
preparedStmtInsert = conn.prepareStatement(insert);
preparedStmtInsert.execute();

conn.commit(); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-13T19:58:07.300

来自[Oracle JDBC 文档](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html)：

> 创建连接时，它处于自动提交模式。这意味着每个单独的 SQL 语句都被视为一个事务，并在执行后立即自动提交。（更准确地说，**默认情况下，SQL 语句在完成时提交，而不是在执行时提交。一条语句在检索到所有结果集和更新计数时完成**。然而，在几乎所有情况下，语句在执行后立即完成，因此被提交。）

另一件事是-您省略了连接创建细节，所以我只是在猜测-如果您正在使用某些框架，或者从数据源或连接池获取连接，则`autocommit`可能会`off`被那些框架/池/数据源打开-解决方案是永远不要相信默认设置;-)

# css - 表格单元格中的 CSS 绝对定位在 Firefox 中不起作用

> ID：11021308
> 
> 赞同：10
> 
> 时间：2012-06-13T18:42:25.637
> 
> 标签：css, firefox, position, positioning

我无法弄清楚 Firefox 中的这个定位问题。它似乎不遵循绝对定位规则。有没有我正在做的事情不应该做，但有些浏览器会处理它而有些则不会？

**JS小提琴：**

原创 - [http://jsfiddle.net/g9qzh/](http://jsfiddle.net/g9qzh/)

更新 - [http://jsfiddle.net/g9qzh/2/](http://jsfiddle.net/g9qzh/2/)

适用于 IE、Chrome、Safari、Opera

这是实际的代码。如果我没有遵循某种我不知道的标准，请告诉我。

**HTML：**

```
<table>
    <tr>
        <td>
            <div id="three">Three</div>
            <div id="two">Two</div>
        </td>
    <tr>
    <tr>
        <td>
            <div id="three">Three</div>
            <div id="two">Two</div>
        </td>
    <tr>
</table> 
```

**CSS：**

```
#two {
   position: absolute;
   top: 0;
}
td {
   position: relative;
} 
```

​我唯一的线索是，我应该分配一些其他值来`td`使其工作。其他一些 stackoverflow 问题提到了 Firefox 的行为不端，但我一直无法找到答案。我尝试将顶部和左侧的值都分配为零，但 FF 不会让步。​</p>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T18:49:33.807

将 ID 更改为类并将其显示为块修复它：

[http://jsfiddle.net/GchWZ/](http://jsfiddle.net/GchWZ/)

使用内部 div 更好，更“合适”，尽管从这个堆栈溢出帖子中引用：[Firefox 是否支持位置：相对于表格元素？](https://stackoverflow.com/questions/5148041/does-firefox-support-position-relative-on-table-elements)

```
<td>
  <div style="position:relative">
      This will be positioned normally
      <div style="position:absolute; top:5px; left:5px;">
           This will be positioned at 5,5 relative to the cell
      </div>
  </div>
</td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:45:54.990

您正在使用 ID

ID 是唯一的。如果您想重用样式分配，请使用类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:58:55.110

试试这个：

```
<tr>
    <td>
        <div id="wrapper">
            <div id="three">Three</div>
            <div id="two">Two</div>
        </div>
    </td>
</tr>
<tr>
    <td>
        <div id="wrapper">
            <div id="three">Three</div>
            <div id="two">Two</div>
        </div>
    </td>
</tr> 
```

对于CSS：

```
#two {
    position: absolute;
    top: 0px;
}

#wrapper {
    position: relative;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T19:01:08.550

问题来自FF如何呈现表格。如果您将 TD 设置为`display:inline-block;`它应该正确显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T18:51:04.413

除了`ID`Brandt 指出的重复问题之外，将[定位分配给表格单元格充其量是狡猾的](http://css-tricks.com/absolutely-position-element-within-a-table-cell/)- 我很惊讶它在任何浏览器中都有效。如果必须使用表格，请将要放置的元素包装在 div 中并分配包装器 div `position: relative`：

```
<table>
    <tr>
        <td>
        <div class="wrapper">
            <div id="three">Three</div>
            <div id="two">Two</div>
        </div>
        </td>
    <tr>
</table> 
```

CSS

```
#two {
   position: absolute;
   top: 0;
}
.wrapper {
   position: relative;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T13:04:59.640

如果你想在单元格的顶部*和*底部放置东西，同样在 Firefox 中，我让它工作在下面的 CSS 和（不幸的是）jQuery 组合中。

1.  在 td 中使用包装 div (div.inner)，它在 td 中具有 position=relative 样式。在包装器内部，我添加了 2 个 div，它们将位于单元格的顶部和底部。 ![在此处输入图像描述](../Images/db949ede29c626afdc77d327b2b938ed.png)

2.  通过 CSS 定位在顶部（class=interval-start）定位是免费的。

3.  将 div.interval-end 定位在底部是通过脚本完成的，它添加了图片中显示的样式。使用变量 td-heights 并且包装器 div 默认为 0-height，您需要一种方法来告诉元素它应该到底部多远。脚本如下：

    ```
     $("table .inner .interval-end").each(function () {
                $(this).css({top: ($(this).parent().parent().height() - 10) + "px"})
            }).show() 
    ```

4.  我最初使 div.interval-end 不可见，设置“顶部”样式，然后通过 jQuery show() 使其可见。

希望这可以帮助任何试图实现相同目标的人。让我知道是否有更好的方法，特别是如果这些方法不需要脚本。顺便说一句：我尝试设置包装器 div.inner 的高度样式，但它与 Firefox 中的表格布局相混淆。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-05T23:16:46.553

使用 CSS 显示有正当理由：表格样式。它消除了 display: block 和 display: inline-block 无法解决的问题。这些原因占据了一本关于 CSS 样式的书的整章，所以我不会在这里讨论它们。同一本书还描述了在具有该显示类型的项目中定位的问题。CSS 2.1 规范根本没有解决这个问题，Mozilla 选择了一门课程，忽略了使用这些元素创建定位上下文的尝试。CSS-table 定位是完善的、成熟的方法，而不是“狡猾的”——它只需要了解它的限制——就像任何其他 CSS 元素一样。对于元素大小可变或未知的液体布局和其他布局，垂直间距和定位是必不可少的。

在这个线程中提出了一个建议 - 在“table-cell”元素中创建一个 div 设置为 position: relative 并将其用于定位上下文。另一种方法是在该单元格中嵌入另一个 CSS 表格，并使用它在网格中定位元素。第三种方法是将您的 CSS 表包装在另一个创建定位上下文的项目中。

# csv - 如何批量上传文件到谷歌融合表？

> ID：11021323
> 
> 赞同：0
> 
> 时间：2012-06-13T18:43:28.520
> 
> 标签：csv, batch-processing, google-fusion-tables

我有许多单独的文件（约 40 个）要上传到并从中创建 Fusion 表。所有文件都是 csv，可以单独上传。是否可以通过指定目录或类似的方式以某种形式的批处理方式上传它。

我不是编程专家，但足够了解批处理过程。但是我不想使用 POST 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:04:43.367

我认为 API 只允许通过 GET 和 POST 进行交互。

# c# - 如何在 C# 中建模这个 JSON 数据？

> ID：11021325
> 
> 赞同：1
> 
> 时间：2012-06-13T18:43:33.177
> 
> 标签：c#, json, serialization, json.net

我正在使用 JSON.Net 进行序列化。我需要我的数据看起来像这个 json 对象：

```
{
        name: "0.8C",
        data: [["10-10-2011", 10], ["10-11-2011", 20], ["10-12-2011", 25], ["10-13-2011", 40], ["10-14-2011", 50], ["10-15-2011", 60], ["10-16-2011", 70], ["10-17-2011", 80], ["10-18-2011", 100]]
} 
```

所以我像这样建模我的对象：

```
public class ScatterLineChartSeriesModel
{                
    public IList<IDictionary<DateTime, double>> Data { get; set; }        
} 
```

但是，这会像这样序列化 Data 属性：

```
[
        {
          "01/31/1966 00:00:00": 1008.795324292118,
          "02/28/1966 00:00:00": 992.18823885452684,
          "03/31/1966 00:00:00": 967.39109875352267,
          "04/30/1966 00:00:00": 985.79507840133135
        }
] 
```

如何构造我的 C# 数据属性以直接序列化为所需的结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:48:30.287

它必须是这样的（添加*Name*属性，并使 IDictionary 成为 IList）：

```
public class ScatterLineChartSeriesModel
{                
    public string Name { get; set; }
    public IList<IList<object>> Data { get; set; }        
} 
```

您想要的输出 ["10-10-2011", 10] 是一个异构数组，因此源必须是对象列表。

另一种选择（对我来说似乎是一个更好的选择，如果实际上您的架构与您的示例所建议的一样固定）是将*日期*和*数字*设置为属性：

```
data: [ { date: "10-10-2011", number: 10 }, { ... } ] 
```

像这样：

```
public class SomeInnerClass
{
    public string Date { get; set; }
    public string Number { get; set; }
}

public class ScatterLineChartSeriesModel
{                
    public string Name { get; set; }
    public IList<IList<SomeInnerClass>> Data { get; set; }        
} 
```

# c# - 在 C# label.Update() 中不起作用，但 textbox.Update() 呢？

> ID：11021327
> 
> 赞同：2
> 
> 时间：2012-06-13T18:43:34.890
> 
> 标签：c#, winforms, user-interface

所以我在另一堂课上做了一个漫长的进步，我想给我的 GUI 一些进步信息。我知道后台工作人员，如果需要的话可以使用它，但是这个操作非常简单，我觉得后台工作人员比我需要的多一点。相反，我使用事件处理程序来处理更新，但操作不一致。

当工人阶级达到一个点时，它会提出一个事件来讲述它的进展。在 GUI 类中，我有一个监听该事件的事件处理程序。当它找到它时，它会创建一个关于它的字符串，并将该字符串作为标签的文本。

然后我在该事件处理程序中调用 labelname.Update()，但没有任何反应。这是真正令人困惑的部分，我在那里放了一个文本框，设置它的文本，然后调用 textboxname.Update()，它就起作用了。为什么 .Update() 不适用于一个控件，而不适用于另一个控件。有什么技巧可以让它为标签工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T21:53:30.177

我正在将 Roken 的评论变成答案，但他的评论*就是*答案。您必须在后台工作人员期间实现后台操作。

请参阅[这篇](http://www.codeproject.com/Articles/28485/Beginners-Guide-to-Threading-in-NET-Part-5-of-n)关于原因和方式的优秀文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T21:50:52.983

(1) 打电话[`labelname.Invalidate();`](http://msdn.microsoft.com/en-us/library/598t492a.aspx)前先试一下`labelname.Update();`

> 调用 Invalidate 方法不会强制**同步**绘制；要强制同步绘制，请在调用 Invalidate 方法后调用 Update 方法。( [MSDN](http://msdn.microsoft.com/en-us/library/598t492a.aspx) )

(2) 另一种选择是调用[`labelname.Refresh();`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)

> 强制控件使其客户区无效并**立即** 重绘自身和任何子控件。( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx) )

# performance - 是否有库/技术来收集 Prolog 中最佳子句排序的统计信息？

> ID：11021330
> 
> 赞同：4
> 
> 时间：2012-06-13T18:43:43.777
> 
> 标签：performance, optimization, prolog, swi-prolog, sicstus-prolog

我正在编写一个程序，我需要查看字符串是否与特定模式匹配。现在我已经在 Prolog 中实现了这个作为规则 matchPattern(S)，有超过 20 种不同的定义。

我最终通过模式检查谓词将所有二进制字符串运行到​​一定长度。该程序相当慢（正如Prolog通常那样），并且由于有很多不同的定义，我理想地希望对它们进行排序，以便最匹配的那些在排序中最早，因此由Prolog首先匹配，避免回溯尽我所能。

我现在正在使用 SWI Prolog，但我可以访问 SICStus，所以我愿意使用它或我可以免费获得的任何 Prolog 解释器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:02:40.467

SWI-Prolog 有[profile/3](http://www.swi-prolog.org/pldoc/doc_for?object=profile/3)和[show_profile/2](http://www.swi-prolog.org/pldoc/doc_for?object=show_profile/2)可以帮助你完成任务。

如果模式之间存在公共部分，则左考虑您的模式规则并应用削减可以改善运行时间。此类分析应与统计数据相结合。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-13T20:23:31.030

你应该考虑使用 DCG 和削减。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-13T22:03:47.863

你应该看看削减。序言语法是：

```
! 
```

# tags - 您如何在 Plone 中全局更改标签？

> ID：11021336
> 
> 赞同：2
> 
> 时间：2012-06-13T18:44:01.607
> 
> 标签：tags, plone, categorization

Plone 具有使用标签和标签 cloub 对内容进行整洁的分类功能。我想全局更改标签的名称。相反，我必须找到每一页并以这种方式进行更改。有没有更简单的方法来重命名标签并将其应用于使用它的任何地方？我们正在使用 Plone 4.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:49:36.847

使用插件 PloneKeywordManager：[http](http://plone.org/products/plonekeywordmanager) ://plone.org/products/plonekeywordmanager 。

# c# - 让一个确认框出现并在后面的代码中获取它的值

> ID：11021340
> 
> 赞同：0
> 
> 时间：2012-06-13T18:44:20.283
> 
> 标签：c#, javascript, asp.net, confirmation

这就是我想做的。我有一个用户填写的表单（创建部分和子部分），当他们单击保存时，我想检查数据库以查看他们是否将一个部分命名为与已经存在的部分相同。如果他们有，我想从他们那里得到确认，让他们知道如果他们继续，他们将创建一个副本。如果他们点击是，我需要继续，否则我需要中止。这是我到目前为止所拥有的一些伪代码。

```
 protected void SaveButton_Click(object sender, EventArgs e)
{
    try
    {
        if (CheckForDuplicates())
        {
            //proceed normally
        }
    }
}

private bool CheckForDuplicates()
{
    //check database

            if (/*there are duplicates*/)
            {
                string message = "A duplicate name exists. Would you like to continue?";
                string scriptString = "<script language='javascript' 
                    type='text/javascript'>" + "return confirm('" + message + "');</script>";

                ScriptManager.RegisterStartupScript(this, this.GetType(), 
                    "script", scriptString, false);

                //here i would like to return their confirmation
            }
        }
    }
    return true;
} 
```

感谢所有帮助，并提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:51:33.947

添加 Javascript，如果用户确认，您可以调用 JavaScript`__doPostBack('','UserConfirmed');`函数。只需在您的代码隐藏中添加逻辑以及您正在向 ScriptManager 注册的确认逻辑。当回发发生时，您可以检查以确保回发实际上是由用户的确认发起的（与页面上的某些其他操作相反）：

```
public void Page_Load(object sender, EventArgs e)
{
  string parameter = Request["__EVENTARGUMENT"];
  //if parameter equals "UserConfirmed"
  //       User confirmed, so do whatever
  //
} 
```

有关信息`__doPostBack`：[了解 JavaScript __doPostBack 函数](http://aspalliance.com/895_Understanding_the_JavaScript___doPostBack_Function)

# php - basedir问题，我读对了吗？

> ID：11021342
> 
> 赞同：0
> 
> 时间：2012-06-13T18:44:21.640
> 
> 标签：php, plesk, open-basedir

> 警告：touch() [function.touch]：open_basedir 限制生效。File() 不在允许的路径内：/var/www/vhosts/site.com/httpdocs/Manuals/updater.php 中的 (/var/www/vhosts/site.com/httpdocs/) 第 5 行加载您的手册时出错，请按返回按钮并重试。

我试图弄清楚为什么这不起作用 - 目前，我正在使用 plesk，它被设置为默认值，这应该可以工作，因为它位于 httpdocs 的子目录中......

有任何想法吗？

更新程序.PHP

```
<?php
//    $URL="manualframe.php";
$URL=$_GET["URL"];
//    header( 'Location: '.$URL.'' ) ;
if (touch($URL)) {
echo 'loading!';
} else {
echo 'There was an error loading your Manual, please press the back button and try again.';
}
echo '<meta http-equiv="refresh" content="1;URL='.$URL.'">';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:50:30.847

Manuals 目录是否会成为指向 webroot 外部目录的符号链接？

`open_basedir`对您允许的路径中的符号链接也有效。

有关更多信息，请参阅[关于 open_basedir 的 PHP 手册](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)，其中指出：

> 当脚本尝试使用例如 fopen() 或 gzopen() 打开文件时，会检查文件的位置。当文件在指定的目录树之外时，PHP 将拒绝打开它。所有符号链接都已解析，因此无法使用符号链接避免此限制。如果文件不存在，则无法解析符号链接，并将文件名与（已解析的） open_basedir 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:51:49.950

看起来 PHP 在[安全模式下](http://php.net/manual/en/features.safe-mode.php)运行。此限制意味着您无法读取 Web 根目录之外的任何文件。这可能就是 updater.php 正在尝试做的事情。

# .net - .NET 正则表达式如何

> ID：11021344
> 
> 赞同：1
> 
> 时间：2012-06-13T18:44:26.427
> 
> 标签：.net, regex

正则表达式的新手。我想验证这种格式：

*   允许使用任何字符，'{' 和 '}' 除外。
*   '{' 字符必须后跟特定字符串之一

在这些字符串之后，任何字符都可以去

*   每个 '{' 必须有一个结束 '}'
*   允许嵌套“{”

例子：

```
abc{FILE:any text} def {FILE:mno{ENV:xyz}} 
```

`FILE:`并且`ENV:`是“{”字符后所需的特定字符串的示例。我写了这个正则表达式：

```
^
(
  [^\{\}]+
  |
  (?<Depth>\{)(FILE:|ENV:)
  |
  (<-Depth>\})
)*
(?(Depth)(?!))
$ 
```

但它不符合我想要的格式。我想念什么？
非常感谢。
编辑：做同样的链接，我希望成功:-) [MSDN](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#balancing_group_definition)，[其他网站](http://blog.stevenlevithan.com/archives/balancing-groups)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:09:18.810

您忘记了平衡组中的问号。

```
string pattern = @"(?x)
^
(?:
    [^{}]+
    |
    (?<Depth>{) (?:FILE|ENV):
    |
    (?<-Depth>})
)*
(?(Depth)(?!))
$
"; 
```

应该匹配字符串，如`a {FILE: {ENV: foo } bar } baz`

# eclipse - 将 TortoiseSVN 连接到 Ubuntu 存储库

> ID：11021345
> 
> 赞同：0
> 
> 时间：2012-06-13T18:44:28.120
> 
> 标签：eclipse, ubuntu, tortoisesvn

我们的系统管理员在我们的 Ubuntu 服务器上创建了一个 SVN 服务器，我使用 svn+ssh://myuser@111.111.111.111/home/svn/myrepo/trunk 将 Eclipse 连接到它，但我现在想在我的 Windows7 机器上使用 Tortoise 进行连接我就是无法让它工作。

我右键单击一个空文件夹 TortoiseSVN>Repo-browser 并提示我提供一个 URL。在有人推荐它之前，我确实尝试了 svn+ssh://myuser@111.111.111.111/home/svn/myrepo/trunk 但没有！它说“无法打开连接”

我什至可以连接 TortoiseSVN 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:52:06.113

你是否安装了 Tortoise 的所有 SSH 依赖项以通过 SSH 使用 SVN？如果没有查看 tortoise SVN[常见问题部分，了解](http://tortoisesvn.net/ssh_howto.html)具体操作方法，请参阅标题为 SSH 客户端工具与 TortoiseSVN 一起使用的部分。

# github - 如何在 GitHub for Windows 中使用分支

> ID：11021346
> 
> 赞同：7
> 
> 时间：2012-06-13T18:44:41.193
> 
> 标签：github, github-for-windows

我刚开始使用“GitHub for Windows”，不知道如何查看其他分支（或创建其他分支）。

[帮助页面](http://windows.github.com/help.html)提到了此功能，甚至显示了屏幕截图，但没有详细说明如何使用它。

我知道如何从命令行创建和签出分支，但我想从 UI 中执行此操作。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T19:25:34.310

找到了！当你意识到在哪里看时，这实际上很容易。您的分支名称显示在“同步”或“推送到 github”按钮旁边。单击它会显示所有现有分支，以及一个用于创建新分支的文本框：

![在此处输入图像描述](../Images/b970be7436b9b5f4bcfaaac4ffa8c7a3.png)

# asp.net - 远程服务器上的无效转换异常 Guid 到字符串

> ID：11021348
> 
> 赞同：1
> 
> 时间：2012-06-13T18:44:43.207
> 
> 标签：asp.net

我的项目中有这段代码：

```
string userId = Membership.GetUser(username).ProviderUserKey.ToString();
SqlConnection conn = new SqlConnection(connectionString);
SqlCommand cmd = new SqlCommand("UPDATE aspnet_Membership SET IsLockedOut = 0, LastLockoutDate = @LastLockedOutDate WHERE UserId = @Userid", conn);
cmd.Parameters.Add("@LastLockedOutDate", SqlDbType.DateTime).Value = DateTime.Now;
cmd.Parameters.Add("@Userid", SqlDbType.VarChar, 255).Value = userId;
int rowsAffected = 0;
conn.Open();
rowsAffected = cmd.ExecuteNonQuery(); 
```

这在我的本地机器上非常有效。用户解锁没问题。但是由于某种原因，当我将它部署到远程服务器上的演示站点时，我收到了这个错误：

```
InvalidCastException: Failed to convert parameter value from a Guid to a String 
```

它在 cmd.ExecuteNonQuery 行上失败。我尝试将参数更改为唯一标识符并传递实际的 guid，但这也不起作用。

有人知道为什么这会在本地工作，但不能在远程服务器上工作吗？或者知道我可以修改代码以使其可能工作的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:49:08.017

而不是尝试手动解锁用户，您不能使用：-

```
 var oUser = Membership.GetUser(username);
 oUser.UnlockUser();
 Membership.UpdateUser(oUser); 
```

这允许 .NET 进程为您完成所有繁重的工作。

[编辑以回答原始问题]

```
 Guid gUserID = (Guid)Membership.GetUser(username).ProviderUserKey;
        if (gUserID != Guid.Empty)
        {
            using (
                var oConn =
                    new SqlConnection(connectionString)
            {
                oConn.Open();
                using (SqlCommand oCmd = oConn.CreateCommand())
                {
                    oCmd.CommandType = CommandType.Text;
                    oCmd.CommandText = "UPDATE aspnet_Membership SET IsLockedOut = 0, LastLockoutDate = @LastLockedOutDate WHERE UserId = @gUserID";
                    oCmd.Parameters.Add(new SqlParameter("@gUserID", gUserID));
                    oCmd.Parameters.Add(new SqlParameter("@LastLockedOutDate", DateTime.UtcNow));
                    oCmd.ExecuteNonQuery();
                }
            }
        } 
```

将您的 DateTime.Now 更改为 DateTime.UtcNow 也可能是值得的，这样如果您不得不移动时区或与其他机器共享您所在的位置，那么您都处于等价时间。

如果您在 ProviderUserKey 上引发错误，则可能是用户不存在或 UserID 毕竟不是 GUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:50:31.980

也许你可以尝试类似

`cmd.Parameters.Add("@Userid", SqlDbType.Guid).Value = new Guid(userId);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T21:21:22.923

很抱歉跛脚回答我自己的问题，但我解决了这个问题。我剥离了自定义成员资格提供程序，只使用了默认的 membersUser.UnlockUser(); 而且效果很好。自定义提供程序实际上并没有做任何事情。我认为它是为不再使用的功能而开发的。

# mysql - MYSQL - 将 HTML 文件导入单列

> ID：11021349
> 
> 赞同：1
> 
> 时间：2012-06-13T18:44:47.003
> 
> 标签：mysql, load

我的本地计算机中有大约 1000 个 html 文件，我必须将它们导入到数据库表中的单个列中。我的意思是将一个完整文件放入一个单元格中，将 1000 个 HTML 文件放入 1000 行中。

**表结构**

```
CREATE TABLE `content` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `data` text ,
  PRIMARY KEY (`ID`)
) 
```

一行包含 ID 和一个 html 文件内容

我试过

```
load DATA LOCAL INFILE 'C:\\Users\\userD\\Desktop\\data\\alter-data.html' INTO TABLE content LINES TERMINATED BY '</html>'; 
```

因为每个文件结束行都是`</html>`，但这无助于加载任何数据..

谁可以帮我这个事？

谢谢你

问候

基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:28:30.893

我需要做同样的事情并花了很长时间解决它，但结果很简单。

注意测试表，test_html 字段被定义为“文本”字段

```
truncate table test;
load data local infile 'data.htm' 
into table test
fields terminated by '</html>'
lines terminated by '</html>'
(test_html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:19:42.057

我使用了下面的 Java 程序并且能够上传内容

[http://www.roseindia.net/tutorial/java/core/files/javafilesavetodatabase.html](http://www.roseindia.net/tutorial/java/core/files/javafilesavetodatabase.html)

谢谢大家

问候

基兰

# android - 使 Activity 只是一个弹出窗口

> ID：11021365
> 
> 赞同：2
> 
> 时间：2012-06-13T18:45:44.340
> 
> 标签：android, user-interface, bluetooth, popup

我目前正在制作一个程序，该程序应该提示用户选择它想要连接的某个蓝牙设备。我通过选项菜单在我的代码中设置了它。

我希望它看起来像 BlueTerm 的弹出窗口。我实际上有来自 BlueTerm 的代码（因为它可以免费查看），但我无法弄清楚如何使窗口显示为弹出窗口而不是全屏视图。这是弹出窗口图片的链接：https: [//play.google.com/store/apps/details?id=es.pymasde.blueterm&hl=en](https://play.google.com/store/apps/details?id=es.pymasde.blueterm&hl=en)

它是在xml文件中完成的吗？因为我找不到我的 XML 文件与他们的文件有什么不同，这会导致这个错误。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
  android:orientation="vertical" 
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent">
  <TextView android:id="@+id/title_paired_devices" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content" 
  android:text="@string/title_paired_devices" 
  android:visibility="gone" 
  android:background="#666" 
  android:textColor="#fff" 
  android:paddingLeft="5dp" /> 
  <ListView android:id="@+id/paired_devices" 
  android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:stackFromBottom="true" 
   android:layout_weight="1" /> 
  <TextView android:id="@+id/title_new_devices" android:layout_width="fill_parent"       android:layout_height="wrap_content" android:text="@string/title_other_devices" android:visibility="gone" android:background="#666" android:textColor="#fff" android:paddingLeft="5dp" /> 
  <ListView android:id="@+id/new_devices" android:layout_width="fill_parent" android:layout_height="wrap_content" android:stackFromBottom="true" android:layout_weight="2" /> 
  <Button android:id="@+id/button_scan" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="@string/button_scan" /> 
  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:55:13.187

您必须在 AndroidManifest.xml 文件中将该活动的主题定义为 Theme.Dialog

例子：

```
<activity android:name="AleartMeassage" android:theme="@android:style/Theme.Dialog"></activity> 
```

# wpf - 可见性不一致的自定义按钮

> ID：11021368
> 
> 赞同：0
> 
> 时间：2012-06-13T18:45:55.993
> 
> 标签：wpf, xaml, custom-controls

下面定义的 EditCommandButton 样式表现出奇怪的行为；它只显示定义的最后一个实例（在下面的 Avatar 标签旁边）。

我尝试制作样式 x:Shared="true" 并使用 DynamicResource 但结果相同。

我最终确实希望该按钮在请求之前不可见，这就是为什么您会看到触发该按钮的原因。但在我弄清楚这一点之前，我只有默认可见性可见。

有人可以解释这种行为并提供修复吗？

干杯，
贝里尔

# 设计视图

![在此处输入图像描述](../Images/e795c115e2cab281cd9a33c9931add7e.png)

# 运行时视图

![在此处输入图像描述](../Images/ce802d78ca609f7e8354becafabcdafb.png)

# 按钮样式

```
<Style x:Key="EditCommandButtonStyle" TargetType="{x:Type Button}" >
    <Setter Property="Content">
        <Setter.Value>
            <TextBlock Text="a" Foreground="Navy" FontWeight="Bold" FontFamily="Wingdings 3" FontSize="24" Width="30"/>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="theBorder" Background="Transparent" CornerRadius="4">
                    <ContentPresenter x:Name="theContent" Visibility="Visible" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Orange"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Command" Value="{Binding SelectedSatelliteVm.EditCommand}"/>
</Style> 
```

# 用法

```
<DataTemplate x:Key="PersonInfoEditingControlTemplate">

    <Grid>

        ...

        <Label Grid.Column="0" Grid.Row="0" ... />
        <Button Style="{StaticResource EditCommandButtonStyle}" Grid.Column="1" Grid.Row="0"/>
        <TextBlock .../>

        <Label Grid.Column="0" Grid.Row="1" ... />
        <Button Style="{StaticResource EditCommandButtonStyle}" Grid.Column="1" Grid.Row="1"/>
        <TextBlock .../>

        <TextBlock  Grid.Column="0" Grid.Row="2"  .../>
        <Button Style="{StaticResource EditCommandButtonStyle}" Grid.Column="1" Grid.Row="2"/>
        <Image Grid.Column="2" Grid.Row="2" ... />

    </Grid>

</DataTemplate> 
```

# 为雷切尔编辑

看马，没有触发器！虽然只有最后一个按钮显示箭头...

```
<Style x:Key="TestCommandButtonStyle" TargetType="{x:Type Button}" >
    <Setter Property="Content">
        <Setter.Value>
            <TextBlock Text="a" Foreground="Navy" FontWeight="Bold" FontFamily="Wingdings 3" FontSize="24" Width="30"/>
        </Setter.Value>
    </Setter>
    <Setter Property="Command" Value="{Binding SelectedSatelliteVm.EditCommand}"/>
</Style> 
```

![在此处输入图像描述](../Images/b00215ee9d5b0b40e5c6b9142753d694.png)

# 修复

```
<Style x:Key="EditCommandButtonStyle" TargetType="{x:Type Button}" >
    <Setter Property="Content" Value="a" />
    <Setter Property="Foreground" Value="Navy" />
    <Setter Property="FontFamily" Value="Wingdings 3" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontSize" Value="18" />
    <Setter Property="Width" Value="30" />
    <Setter Property="Height" Value="Auto" />
    <Setter Property="Command" Value="{Binding SelectedSatelliteVm.EditCommand}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="theBorder" CornerRadius="4">
                    <ContentPresenter x:Name="theContent" VerticalAlignment="Center" HorizontalAlignment="Center" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="theContent" Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Transparent"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Orange"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

原来写的样式实际上有两个问题，都是由上面的样式修复的。（固定我的意思是它按预期工作，而不是它是“正确”的方法！）：

1.  DP Precedence - 这就是 Rachel 的回答所要解决的问题，尽管她的回答是。但我发现唯一有效的解决方法是使用 IsMouseOver 的两个触发器设置可见性，如图所示。
2.  只有网格中的最后一项显示了任何内容！- 这对我来说毫无意义，但是将之前在 TextBlock 内容中的属性移动到样式上的 Setters 可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:35:52.823

中定义的依赖属性`<Tag>`比触发器中定义的项目具有更高的优先级，因此将始终覆盖它们。

例如，在这种情况下，按钮`Visibility`将始终`Collapsed`与触发器无关，因为该属性是在`<Button>`标记中定义的

```
<Button Visibility="Collapsed">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Style.Triggers>
                <DataTrigger Property="{Binding SomeValue}">
                    <Setter Property="Visibility" Value="Visible" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

要使此触发器工作，请将`Visibility`属性移动到样式设置器，其优先级低于样式触发器，因此触发值将覆盖它

```
<Button>
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
                <DataTrigger Property="{Binding SomeValue}">
                    <Setter Property="Visibility" Value="Visible" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

有关详细信息，请参阅 MSDN 的[Dependency Property Precedence List](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)

**编辑**

至于您关于 Content 仅出现一次的第二个问题，我怀疑这是因为您`Content`的风格受到限制，而不是`ContentTemplate`.

WPF是创建一个`TextBlock`箭头的实例，一个控件只能有一个父级，所以应用样式后，只有一个`Button`可以包含箭头`TextBlock`

解决方法是使用`ContentTemplate`属性而不是`Content`属性。

```
<Setter Property="ContentTemplate">
    <Setter.Value>
        <DataTemplate>
            <TextBlock Text="a" Foreground="Navy" FontWeight="Bold" FontFamily="Wingdings 3" FontSize="24" Width="30"/>
        </DataTemplate>
    </Setter.Value>
</Setter> 
```

老实说，我很惊讶它没有给你一个关于`Specified element is already the logical child of another element`. 在这种情况下通常会发生这种情况（有关更多详细信息，请参阅我的[帖子](https://rachel53461.wordpress.com/2011/07/17/wpf-error-specified-element-is-already-the-logical-child-of-another-element-disconnect-it-first/)）

# python - Python CGIHTTPServer 因“OSError：[Errno 13] Permission denied”而崩溃

> ID：11021369
> 
> 赞同：8
> 
> 时间：2012-06-13T18:45:56.333
> 
> 标签：python, linux, cgi

我正在从我的主目录运行以下命令：

```
python -m CGIHTTPServer 
```

这会运行服务器，但是当我尝试访问 cgi-bin 目录中的脚本时，我得到：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/CGIHTTPServer.py", line 251, in run_cgi
    os.execve(scriptfile, args, env)
OSError: [Errno 13] Permission denied 
```

以 root 身份运行并没有什么不同。这些文件似乎具有所有正确的权限：

```
student@bandersnatch:~$ ls -lhR
.:
total 12K
drwxr-xr-x 2 student student 4.0K Jun 13 18:38 cgi-bin
drwxr--r-- 2 student student 4.0K Jun 10  2004 kalpy
-rwxrwxrwx 1 student student 2.0K Jun 13 12:37 test.html

./cgi-bin:
total 8.0K
-rwxr-xr-x 1 student student 31 Jun 13 18:38 test.py 
```

编辑： test.py 的内容是：

```
#!/usr/bin/python
print "test" 
```

shebang 有效：

```
~$ which python
/usr/bin/python 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T21:55:00.363

您是否有机会以 root 身份运行该进程？

如果您*使用源代码*，您将`CGIHTTPServer.py`在调用之前看到`execve`：

```
try:
    os.setuid(nobody)
except os.error:
    pass 
```

也就是说，如果它能够更改 UID，即它是 root，它将以无人身份运行 CGI 脚本。如果它不是 root，这个调用很可能会失败，然后继续。

所以我的猜测是您以 root 身份运行服务器，因此脚本以*nobody*运行，但该用户无权访问该脚本。正如您所说，这是预期的，它位于您的主目录中。

我能想到的两个解决方案：

*   建议：不要以root身份运行服务器！
*   解决方法：将脚本复制到*没有人*可以读取它的目录（`/tmp`例如）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:46:46.050

就个人而言，除非有一些我不知道的原因，否则我建议使用 subprocess.Popen 而不是 os.execve。我之前遇到过 Errno 13，试图用 Popen(['open execName.app']) 启动一个 .app。我不得不改用 Popen(['execName.app/Contents/MacOS/execName', 'arg1', 'arg2'...]) 。不知道这是否有帮助，但试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-04T14:15:21.543

我在 ubuntu Linux 上遇到了同样的问题。遵循“迈克”的解决方案，并进行了修改。而是对具有多个文件夹的“/ usr”进行 chmod，更改包含被拒绝的可执行文件的文件夹的权限。（您可以检查在同一位置加载静态 html 文件时服务器是否可以正常运行，并且仅在脚本运行时显示错误）。

```
cd /pathto/folder/with/deniedscript
sudo chmod -R 755 ./ 
```

现在脚本有权限，所以应该可以正常运行。请注意， -R 授予此文件夹（以及子文件夹，如果有）中的所有文件的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T01:00:06.667

在 Windows 上运行时，文件会直接在命令提示符之外运行。

对于 Linux 和 Windows 用户，情况并非如此！

我收到以下错误：

回溯（最后一次调用）：文件“/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/http/server.py”，第 1158 行，在 run_cgi os.execve(scriptfile, args, env ) PermissionError: [Errno 13] 权限被拒绝：

您需要执行以下操作来解决这些问题：

对于 Linux 用户：

1) 确保针对在 Linux 和 Mac OSX 系统上运行的 Python 3 调整 shebang：

`#!/usr/bin/env python3`

2) 由于原始可执行文件是在 Windows 上编写的，因此它们将在必须删除的文件中隐藏“\r”。以下是三种可能的方法：a）在终端命令行类型中：（`tr -d ‘\r’ < input file name > output file name` 只需将输出文件重命名为新名称->擦除旧文件->然后将输出文件名重新更改回原始名称）b）在终端命令行类型中：（`cat inputfile | col -b > outputfile` 只需将输出文件重命名为新名称 --> 擦除旧文件 --> 然后将输出文件名改回原来的名称） c) 下载 dos2unix，然后在终端命令行中输入：dos2unix 输入文件名

3) 使文件可执行：在终端命令行输入：a) chmod 755 文件名或 b) chmod +x 文件名或 chmod a+x 文件名

对于 Mac OSX 用户来说几乎是一样的：

1.  从 Linux 重复步骤 1)
2.  从 Linux 重复步骤 2)

对于第 3 步，事情发生了变化：

基于 apache.org wiki 页面：[https](https://wiki.apache.org/httpd/13PermissionDenied) ://wiki.apache.org/httpd/13PermissionDenied 它说你必须让每个可执行文件从文件位置遍历到 /Users 根目录。

您必须执行以下操作。

3）在终端命令行中：

```
a) type command: `cd /Users`
b) type command: `sudo chmod -R 755` 
```

现在您可以通过以下方式运行您的服务器 .py 文件：

```
sudo webserver.py 
```

和通过正常的输入文件：

```
python3 inputfile.py 
```

现在您应该一切顺利，不再出现权限错误！如果运行 python 2，您可以对 shebang 和命令行进行必要的调整。

# python - HTTP 流媒体

> ID：11021370
> 
> 赞同：1
> 
> 时间：2012-06-13T18:46:01.127
> 
> 标签：python, http, web, streaming

我正在编写一个网络服务来流式传输视频（例如，网络摄像头）。我想知道我有什么选择。

例如，我能想到的一种天真的方法是定期从源中获取 jpeg 并显示它。

但我也知道一些媒体类型，如 mjpeg 可以[通过 HTTP 流式传输](http://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP)。但是我不知道这在技术上是如何实现的。任何例子都会受到欢迎。

更新：

我找到了下面的链接，它使用 mjpeg 和 python WSGI 通过 HTTP 实现了实时视频流。

[使用 gstreamr 和 python 通过 HTTP 流式传输 MJPEG – WSGI 版本 (GIST)](https://gist.github.com/2409785)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-24T09:48:14.503

忘记 gstreamer 或 ffmpeg。

1.  创建内存盘
2.  安装 openCV ，在无限循环中使用“read()”将每一帧作为 jpg 和 Pillow 写入 RAM DISK
3.  安装[https://snapcraft.io/mjpg-streamer](https://snapcraft.io/mjpg-streamer)指向 ram 磁盘并启用读取后删除。

# android - 媒体播放器显示视频

> ID：11021376
> 
> 赞同：0
> 
> 时间：2012-06-13T18:46:22.783
> 
> 标签：android, video, media-player

为什么 MediaPlayer 没有在视频可用时立即显示。我的意思是在 iPhone 上播放视频时，视频会立即显示。即使从暂停中返回。但在 Android 上，屏幕会保持黑屏几毫秒到一秒，具体取决于所使用的设备和后台运行的进程数量。

我问这个是因为我想使用我的视频播放中的一个开始帧作为一种屏幕截图，目前我正在使用处理程序在暂停视频之前等待 1 秒。

有人可以告诉我一种快速的方法来让视频在开始甚至准备好后立即显示出来，而不是我的解决方法吗？

编辑：这是我准备视频播放器的方法，因此应该正确准备。

```
private void initVideo() 
{
    Log.i("VideoPlayer", "Initialize Video File" + videoFileName);

    AssetFileDescriptor afd;
    try {
        if(videoFileName != null);
        {

            afd = getAssets().openFd(videoFileName);

            vidplayer = new MediaPlayer();

            vidplayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getDeclaredLength());

            vidplayer.setDisplay(holder);
            vidplayer.prepare();
            vidplayer.setOnCompletionListener(this);
            vidplayer.setOnPreparedListener(this);  
            //Log.i("INITVIDEO", Integer.toString(videoPausedAt));
            vidplayer.seekTo(videoPausedAt);
            //Log.i("VideoPlayer", "video Prepared");

            videoDuration = vidplayer.getDuration()/1000;

            isVideoReady = true;

        }

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e)
    {
        //Log.i("InitPlayer", e.getClass().toString());
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:55:53.100

对于背景，您可以获得视频的缩略图：

```
private Bitmap getThumbnail(String path){
    try{
        return ThumbnailUtils.createVideoThumbnail(path, MediaStore.Images.Thumbnails.MINI_KIND);

    }catch(Exception e){
        return null;
    }
} 
```

视频开始时，您需要将背景设置回 null，否则您将无法看到视频。

至于它不会立即播放，如果您准备正确，它应该在调用 start() 时立即播放，但如果它必须从互联网上的流中加载数据，它可能会延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:58:33.440

我发现这是手机故障。（大多数情况下）视频会自动显示，除非手机被应用程序卡住，因此加载视频需要更长的时间（在运行 voip 服务后注意到）。

# objective-c - 在 cocos2d 和 Objective C 中赋值或保留

> ID：11021386
> 
> 赞同：0
> 
> 时间：2012-06-13T18:46:55.880
> 
> 标签：objective-c, ios, memory-management, cocos2d-iphone

这是我目前的情况：我有一个名为 dictKeyArray 的 NSMutableArray，我为其分配了一个属性，并`@property(nonatomic,retain)NSMutableArray *dictKeyArray`
在实现文件中合成了我的可变数组。
后来，我有了一个字典名storeDict。我将字典的所有键分配给 dictKeyArray，如下所示：
`dictKeyArray = [[storeDict allKeys] mutableCopy];`
现在我稍后在我的实现文件中使用这个字典。但是，在释放它时，我在我的`dealloc`方法中释放它一次。用仪器检查时，出现泄漏！为什么 dictKeyArray 泄漏？我应该使用`assign`而不是`retain`吗？我仍然不清楚到底有什么区别......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:49:54.897

你必须发送一个

```
[[[storeDict allKeys] mutableCopy] autorelease]; 
```

只是为了说明这一点：与您声称拥有相关对象的所有权`mutableCopy`相同。`alloc`您必须将 retainCount 减一。

顺便说一句：您应该使用为它编写的访问器。您现在只是将其分配给您的 iVar。如果你想让你的访问器工作，你将不得不使用类似的东西

```
object.dictKeyArray = ...; 
```

一般来说。或者在这里（如dreamlax所述）

```
self.dictKeyArray = ...; 
```

因为您指的是代码所在的特定类的对象。

只有这样，您才能确保您的对象被访问者正确保留。否则编写访问器代码根本没有意义，因为它永远不会被调用。

请注意：正如 Josh 在评论中所说，您的代码应该是有效的（至少从我的角度来看）。我建议的解决方案不像您的那样容易出错，因为您遵守规则（可以在不久的将来使您免于头痛）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:50:36.253

你应该使用`self.dictKeyArray = ...`. 如果没有 ，`self.`您将直接访问实例变量，绕过属性的任何内存管理优势，但请记住，您拥有 的结果`mutableCopy`，并且分配给也具有所有权的属性将导致双重所有权，因此请使用：

```
self.dictKeyArray = [[[storeDict allKeys] mutableCopy] autorelease]; 
```

# jquery - 如何使用 jquery 使某些东西看起来从顶部展开

> ID：11021387
> 
> 赞同：0
> 
> 时间：2012-06-13T18:46:57.160
> 
> 标签：jquery

看到这个问题。

[如何在stackoverflow中显示弹出消息](https://stackoverflow.com/q/659199/1240324)

我试图让悬垂从顶部优雅地出现在 jquery 中，就像有人在拉它的底部，这一切都跟随而不是让它淡入。

我无法弄清楚如何在 jQuery 中执行此操作。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:54:13.467

那就好好利用`slideToggle`吧。

[http://jsfiddle.net/62HeB/1](http://jsfiddle.net/62HeB/1)

不知道你是如何触发它的，所以我使用了一个按钮。

```
div {
    position: fixed; 
    top: 0; 
    width: 200px; 
    border: 1px solid gray; 
    background: lightgray; 
    border-radius: 0px 0px 5px 5px; 
    padding: 5px; 
    left: 50%;
    margin-left: -100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:54:32.090

这应该使用幻灯片工作。

```
$(document).ready(function() {
        $("#message").slideDown("slow");
        $("#message a.close-notify").click(function() {
            $("#message").slideUp("slow");
            return false;
        });
    }); 
```

# graphics - 透明物体相互覆盖

> ID：11021388
> 
> 赞同：0
> 
> 时间：2012-06-13T18:46:59.897
> 
> 标签：graphics, 3d, xna, hlsl, pixel-shader

对于一个学术项目，我正在尝试编写一个从头开始绘制广告牌的代码；现在我正处于使它们半透明的地步。我已经设法让它们在背景下看起来不错，但它们仍然可以用它们应该是透明的角相互覆盖，就像这张照片中一样：

![](../Images/bfab5145fc86c133ffcff1c15a6101d4.png)

我不确定我做错了什么。这是我用来绘制广告牌的效果文件。我省略了与顶点着色器相关的部分，我认为这些部分现在无关紧要。

```
//cut

texture Texture;
texture MaskTexture;

sampler Sampler = sampler_state
{
    Texture = (Texture);

    MinFilter = Linear;
    MagFilter = Linear;
    MipFilter = Point;

    AddressU = Clamp;
    AddressV = Clamp;
};

sampler MaskSampler = sampler_state
{
    Texture = (MaskTexture);

    MinFilter = Linear;
    MagFilter = Linear;
    MipFilter = Point;

    AddressU = Clamp;
    AddressV = Clamp;
};

//cut

struct VertexShaderOutput
{
    float4 Position : POSITION0;
    float4 Color : COLOR;
    float2 TexCoord : TEXCOORD0;
};

//cut

float4 PixelShaderFunction(VertexShaderOutput input) : COLOR0
{
    float4 result = tex2D(Sampler, input.TexCoord) * input.Color;
    float4 mask = tex2D(MaskSampler, input.TexCoord);
    float alpha = mask.r;
    result.rgb *= alpha;
    result.a = alpha;
    return result;
}

technique Technique1
{
    pass Pass1
    {
        VertexShader = compile vs_2_0 VertexShaderFunction();
        PixelShader = compile ps_2_0 PixelShaderFunction();

        AlphaBlendEnable = true;
        SrcBlend = SrcAlpha;
        DestBlend = InvSrcAlpha;
    }
} 
```

我有两个纹理，命名为 Texture 和 MaskTexture，后者是灰度的。广告牌很可能在同一个顶点缓冲区中，并`GraphicsDevice.DrawIndexedPrimitives()`通过 XNA 的一次调用来绘制。

我有一种感觉，我没有把整件事都做对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:18:22.717

您必须按顺序绘制它们。从最远到最近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:34:32.277

我找到了解决方案。着色器很好，问题出在 XNA 代码中，很抱歉让您注意错误的事情。

解决方案是在绘制广告牌之前启用深度模板缓冲区（无论它是什么）：

```
device.DepthStencilState = DepthStencilState.DepthRead; 
```

之后可以禁用它：

```
device.DepthStencilState = DepthStencilState.Default; 
```

# powershell - Powershell getfiles.count() 排除 thumbs.db

> ID：11021390
> 
> 赞同：2
> 
> 时间：2012-06-13T18:47:06.847
> 
> 标签：powershell, getfiles

我们每天都会运行一个脚本，该脚本会从人们用来传输数据的区域中删除旧文件和目录。除了一小部分之外，一切都很好。如果文件夹超过 7 天并且它是空的，我想删除它。由于 thumbs.db 文件，该脚本始终在文件夹中显示 1 个文件。我想我可以检查一个文件是否为 thumb.db，如果是，则删除该文件夹，但我确信有更好的方法。

```
 $location = Get-ChildItem \\dropzone -exclude thumbs.db
foreach ($item in $location) {

  other stuff here going deeper into the tree...

  if(($item.GetFiles().Count -eq 0) -and ($item.GetDirectories().Count -eq 0)) {

    This is where I delete the folder but because the folder always has
     the Thumbs.db system file we never get here

  } 

} 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:55:10.143

```
$NumberOfFiles = (gci -Force $dir | ?{$_ -notmatch "thumbs.db"}).count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:24:48.717

您可以尝试 get-childitem -exclude 选项，其中将计算目录中的所有文件/项目，除了以 db 结尾的文件/项目：

```
$location = get-childitem -exclude *.db 
```

如果您指定要排除的文件也可以解决，在本例中为 thumbs.db

```
$location = get-childitem -exclude thumb.db 
```

让我知道这是否可行。

* * *

啊，我也刚刚注意到一件事，

```
$location = get-childitem -exclude *.db 
```

将仅处理位置目录中的 .db 项目，如果您深入到树中（例如从您的 GetFiles() 和 GetDirectories() 方法），那么您可能仍然会找到 thumb.db。因此，您必须在这些方法中添加排除选项以忽略 thumbs.db。

因此，例如在您的 $item.getFiles() 方法中，如果您使用 get-childitem 您还必须指定 -exclude 选项。

对不起，我应该更仔细地阅读你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:48:53.050

使用此方法以简单文本文件的形式提供排除列表，以从您的计数中排除特定文件或扩展名：

```
$dir = 'C:\YourDirectory'
#Type one filename.ext or *.ext per line in this txt file
$exclude = Get-Content "C:\Somefolder\exclude.txt"
$count = (dir $dir -Exclude $exclude).count
$count 
```

# ios - NSNetService/Bonjour 发现仅适用于 iPhone 模拟器

> ID：11021393
> 
> 赞同：4
> 
> 时间：2012-06-13T18:47:18.563
> 
> 标签：ios, bonjour, nsnetservice

我正在开发一个需要基本客户端/服务器交互模型的 iPhone 应用程序。为此，我将使用 Bonjour 和 NSNetService，以及 NSNetServiceBrowser 来发现同一网络上的其他人。我遵循了几个不同的指南，它们或多或少具有相同的示例代码。

**相关服务器代码**

```
...
serverName = [[UIDevice currentDevice] name];
netService = [[NSNetService alloc] initWithDomain:@"local."
                                             type:@"_myservice._tcp."
                                             name:serverName
                                             port:port];
... 
```

服务发布成功，即我得到 netServiceDidPublish: 回调

**相关浏览器代码**

```
...
browser = [[NSNetServiceBrowser alloc] init];
[browser setDelegate:delegate];
[browser searchForServicesOfType:@"_myservice._tcp." 
                        inDomain:@"local."];
... 
```

现在这一切的结果很有趣：

1.  在 iPhone 上运行，设备只能看到自己发布的 NSNetService。
2.  在两台 iPhone 上运行，两台设备都看不到对方的 NSNetService。
3.  在 iPhone Simulator 上运行，它会找到*所有*的 NSNetServices，包括它自己的。

**iPhone模拟器截图**

![在此处输入图像描述](../Images/4ebebbae0184521fe4d9e05798952a85.png)

我在这里有点不知所措......模拟器*完全*按预期工作。但是在设备上却不是，我不能让 2 部不同的 iPhone 在同一个 WiFi 上看到对方，他们只能看到自己。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:06:13.013

原来我使用的路由器默认启用了“SPI防火墙”。关闭它解决了这个问题。

我仍然好奇的一件事是：来自我的 Mac（iPhone 模拟器和 Bonjour 浏览器）的请求为何能够通过此防火墙，但 3 部不同的 iPhone 却没有？

# android - 如何使用ontouch方法在android中切换屏幕？

> ID：11021394
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:47:23.133
> 
> 标签：android, touch-event

我的应用程序中有多个屏幕。我想在用户滑动屏幕时切换屏幕。我为此使用了 dispatchTouchEvent 并且它正在切换屏幕。但问题是我希望当用户滑动至少一半屏幕时应该翻转屏幕。任何建议。下面是我的代码..

```
 public boolean dispatchTouchEvent(MotionEvent event)
 {
       int eventaction=event.getAction();
        switch(eventaction) 
        {
          case MotionEvent.ACTION_MOVE:
          view1.setAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_left));
          view1.showNext();
          break;

          default:
          break;
        }

        return super.dispatchTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:02:54.977

对于您想要实现的目标，我建议您使用[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html). 更好的是，实现[ActionBarSherlock](http://actionbarsherlock.com/)或[ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)中可用的扩展之一。

这两个项目都带有完整的工作（但简单）示例这一事实只是一个不错的奖励，因为即使没有示例，它们也*非常*容易使用。

最后，记住记住：

> 优秀的程序员代码，优秀的程序员重用。

...[或类似的东西](http://www.codinghorror.com/blog/2004/12/never-design-what-you-can-steal.html)。;-)

祝你好运！

[ps.：如果您在 Stack Overflow 上搜索“ [android] pager](https://stackoverflow.com/search?q=%5Bandroid%5D%20pager) ”和“ [[android] viewpager](https://stackoverflow.com/search?q=%5Bandroid%5D%20viewpager) ” ，会有一些类似答案的问题。我已经在这个问题上发布了一个答案，但你也可以[在这里](https://stackoverflow.com/q/10912602/489607)、[这里](https://stackoverflow.com/q/10272812/489607)等等看到其他人（关注点略有不同）......我什至没有考虑谷歌。

# android - Android 模拟器或 Android 手机

> ID：11021396
> 
> 赞同：2
> 
> 时间：2012-06-13T18:47:30.720
> 
> 标签：android, android-emulator

我希望你们一切都好。我正在开发一个 android 应用程序项目，我主要使用 android 模拟器来测试应用程序。Android Emulator 需要太多时间来加载应用程序，并且由于我正在设计设计，因此我必须在几秒钟后一次又一次地运行应用程序。由于模拟器速度慢，我认为我的时间被浪费了，我无法专注于工作。

我最近尝试使用我的 Galaxy Note 运行应用程序，它的速度非常快，运行体验要好得多。我想知道的是..在我的手机上运行eclipse项目会以任何方式伤害我的手机吗？因为在使用手机的时候，屏幕卡住了，图标变成了不同的绿色、红色和蓝色。我重新启动了手机，现在它的行为正常了。但是我想知道是不是因为手机上运行的eclipse项目造成的？安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:53:49.620

可能会损坏您的手机。

除了反复将您的应用程序刷新到内存的磨损 (YMMV) 之外，您可能会在不知不觉中（或以其他方式）创建病毒。

在应用程序终止并占用处理器减慢速度后，我一直处于线程运行异常的情况。它最终确实退出了（可能在选择性重启之后）。我经常在调试手机时重启手机。我不会太担心这一点（尽管我的域名是三星的 bada，但平台的健壮性要低得多）。

我认为 Java 应用程序没有太多风险，因为该语言管理得非常好。本机代码是一个风险，至少，缓冲区溢出可能会将不需要的代码放在进程地址空间之外，因此在应用程序退出时会被清理掉。此类错误可能会导致关闭和/或强制关闭。

# javascript - 正则表达式 Javascript 获取以下值：value1[value2]

> ID：11021399
> 
> 赞同：-2
> 
> 时间：2012-06-13T18:47:41.887
> 
> 标签：javascript, regex

我希望在 JS 中创建一个 reg ex，它从字符串中获取 2 个值：

该字符串始终采用以下格式`value1[value2]`。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:50:13.570

```
var str = "value1[value2]";
var match = str.match(/([^\[]*)\[([^\]]*)\]/);
// match = ["value1[value2]", "value1", "value2"] 
```

**解释**

*   `([^\[]*)`: 捕捉到`[`角色之前的一切。
*   `\[`:`[`性格。
*   `([^\]]*)`: 捕捉到`]`角色之前的一切。
*   `\]`:`]`性格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:53:13.880

```
var str = "value1[value2]";
var arr = str.split('[');

var value1 = arr[0];
var value2 = arr[1].substr(0, arr[1].length -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:53:21.073

```
function getValues(str) {
  var m = (''+str).match(/^(.*?)\[(.*?)\]$/);
  return (m) ? [m[1], m[2]] : null;
}
getValues('value1[value2]'); // => ["value1", "value2"]
getValues('foobar'); // => null 
```

当然，如果您*确定*您的输入已经过验证，那么您可以简单地按索引提取值，这应该是最快的：

```
function getValues2(str) {
  var idx = str.indexOf('[');
  return [str.substr(0, idx), str.substr(idx+1, str.length-idx-2)];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:55:54.073

我认为最易读的正则表达式将类似于以下内容：

```
str.match(/(.+?)([?)(.+?)(]?)/) 
```

简单地返回您感兴趣的结果。亚历山大的回答肯定会奏效，但我个人发现过度使用括号和斜线很难阅读。

# .net - 泛型列表中的 OrderBy 可为空属性抛出 InvalidCastException

> ID：11021404
> 
> 赞同：1
> 
> 时间：2012-06-13T18:48:09.140
> 
> 标签：.net, vb.net, lambda, nullable

我需要以正确的顺序为我的项目返回一个通用列表，并且我收到 InvalidCastException 错误。这是代码：

```
Dim lDt As List(Of Comment) = RemapCommentsForE1(so.CommentList). _
OrderBy(Function(x) x.CreateDate.Value). _
ThenBy(Function(x) x.Sequence). _
ThenBy(Function(x) x.SubSequence) 
```

注意：

*   CreateDate 是一个`Nullable(Of DateTimeOffset)`
*   序列是一个`Nullable(Of Int32)`
*   子序列是一个`Nullable(Of Int32)`

我得到的确切错误是：

> 无法转换类型为“System.Linq.OrderedEnumerable `2[DTDataUploader.Comment,System.Int32]' to type 'System.Collections.Generic.List`1 [DTDataUploader.Comment]”的对象。

我已经尝试转换为实际类型...

```
Dim lDt As List(Of Comment) = RemapCommentsForE1(so.CommentList). _
OrderBy(Function(x) x.CreateDate.Value). _
ThenBy(Function(x) Convert.ToInt32(x.Sequence)). _
ThenBy(Function(x) Convert.ToInt32(x.SubSequence)) 
```

...但我得到同样的错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:51:00.760

LINQ 操作喜欢`Where`并`OrderBy`产生*查询*，而不是*结果*。如错误所述，完整 LINQ 表达式的结果是`OrderedEnumerable(Of DTDataUploader.Comment, System.Int32)`，而不是列表。

要将其转换为列表，请将调用添加到`ToList()`表达式的末尾。

```
Dim lDt As List(Of Comment) = RemapCommentsForE1(so.CommentList). _
OrderBy(Function(x) x.CreateDate.Value). _
ThenBy(Function(x) x.Sequence). _
ThenBy(Function(x) x.SubSequence).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:50:46.103

查询的结果是一个`OrderedEnumerable`，只需`.ToList()`在末尾添加即可实现结果为列表。

# python - 将未知单词解析为已知单词的有效方法？

> ID：11021405
> 
> 赞同：3
> 
> 时间：2012-06-13T18:48:16.383
> 
> 标签：python, language-agnostic, machine-learning, nlp, oov

我正在设计一个文本处理程序，它将从一个长的逐项文本文档中生成一个关键字列表，并为含义相似的单词组合条目。那里有一些指标，但是我遇到了一个新问题，即处理不在我使用的字典中的单词。

我目前正在使用 nltk 和 python，但我这里的问题具有更抽象的性质。给定一个不在字典中的单词，将它解析为字典中的单词的有效方法是什么？我目前唯一的解决方案是遍历字典中的单词并从输入的单词中选择具有最短 Levenshtein 距离（编辑距离）的单词。

显然，这是一种非常缓慢且不切实际的方法，我实际上并不需要字典中的绝对最佳匹配，只要它是一个包含的单词并且非常接近。在解决方案中，效率对我来说更为重要，但也需要基本的准确性。

关于如何将某些未知单词通常解析为字典中的已知单词的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-14T19:27:35.480

看起来您需要拼写校正器来匹配字典中的单词。下面的代码有效，直接取自Peter Norvig 编写的博客[http://norvig.com/spell-correct.html ，](http://norvig.com/spell-correct.html)

```
import re, collections

def words(text): return re.findall('[a-z]+', text.lower()) 

def train(features):
    model = collections.defaultdict(lambda: 1)
    for f in features:
        model[f] += 1
    return model

NWORDS = train(words(file('big.txt').read()))

alphabet = 'abcdefghijklmnopqrstuvwxyz'

def edits1(word):
    splits     = [(word[:i], word[i:]) for i in range(len(word) + 1)]
    deletes    = [a + b[1:] for a, b in splits if b]
    transposes = [a + b[1] + b[0] + b[2:] for a, b in splits if len(b)>1]
    replaces   = [a + c + b[1:] for a, b in splits for c in alphabet if b]
    inserts    = [a + c + b     for a, b in splits for c in alphabet]
    return set(deletes + transposes + replaces + inserts)

def known_edits2(word):
    return set(e2 for e1 in edits1(word) for e2 in edits1(e1) if e2 in NWORDS)

def known(words): return set(w for w in words if w in NWORDS)

def correct(word):
    candidates = known([word]) or known(edits1(word)) or known_edits2(word) or [word]
    return max(candidates, key=NWORDS.get) 
```

big.txt 是包含已知单词的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:17:49.310

您的任务听起来真的只是非单词拼写更正，因此相对简单的解决方案是使用现有的拼写检查器，如 aspell 和自定义词典。

一种快速而肮脏的方法是只使用一个语音映射，如 metaphone（这是 aspell 使用的算法之一）。对于从您的字典中派生的每个可能的代码，选择一个代表词（例如，组中最常见的词）作为更正建议，并为没有找到匹配项的情况选择一个默认更正。但是使用 aspell 可能会得到更好的结果。

如果您确实想计算编辑距离，您可以通过在尝试中存储字典和可能的编辑操作来相对快速地完成，请参阅[Brill 和 Moore (2000)](http://www.aclweb.org/anthology/P/P00/P00-1037.pdf)。如果你有一个相当大的拼写错误及其更正语料库，并且可以实现 Brill 和 Moore 的整个方法，你可能会比 aspell 好很多，但它听起来像 aspell（或任何可以让你创建自己的字典的拼写检查器） ) 足以完成您的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T08:33:27.520

我看不出有理由使用 Levenshtein distance 来查找含义相似的*单词*。LD 查看表格（您想将“公共汽车”映射到“卡车”而不是“灌木丛”）。

正确的解决方案取决于您接下来要做什么。

除非您真的需要那些未知单词中的信息，否则我会将它们全部映射到一个通用的“UNKNOWN_WORD”项。

显然，您可以通过上下文和其他特征对未知单词进行聚类（例如，它们是否以大写字母开头）。对于上下文聚类：由于您对含义感兴趣，我会为这些词使用更大的窗口（比如 +/- 50 个词），并且可能使用一个简单的词袋模型。然后，您只需使用一些距离度量（例如，余弦）找到该空间中的向量最接近未知词的已知词。如果您需要有关此的更多信息，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:58:44.000

希望这个答案不会太模糊：

1）听起来您可能需要先查看您的标记化和短语分块层。这是您应该在将符号短语块提交给任何模糊拼写检查之前丢弃它们的地方。

2）我仍然建议编辑距离以在此之后提出任何“拼写错误”标记的替代方案，但这可能会返回一个同样接近的可能性列表。

3）当你有你的可能列表时，你可以使用共现算法从这个列表中选择最相似的候选人。我只有一些可以提供帮助的软件的 java 示例（[http://www.linguatools.de/disco/disco_en.html#was](http://www.linguatools.de/disco/disco_en.html#was)）。您可以提交一个词，这将返回该词的同现词。然后，您可以将此列表与“拼写错误”单词的上下文进行比较，并从所有潜在的编辑距离单词中选择重叠最多的单词。

# android - REST URI 在内部是如何工作的？

> ID：11021408
> 
> 赞同：2
> 
> 时间：2012-06-13T18:48:22.527
> 
> 标签：android, ios, api, rest

我正在尝试创建一个 REST API 来与 MySQL 数据库交互。我想使用此 API 从 Android 或 iOS 设备访问数据库，而无需（显然）直接通过应用程序公开数据库。但是我在思考关于 REST 的一个关键方面以及根据其原则设计的 API 的实现时遇到了问题。

我从理论的角度理解 REST 的概念。几天来我一直在努力理解的是**REST URI 如何映射到位于数据库服务器上的东西。**

如果我向服务器发出 GET 请求以获取具有给定 URI 的资源，例如[http://www.example.com/resource](http://www.example.com/resource)，在内部，这在服务器上的什么地方？我理解它的方式是它进入根目录，然后进入“资源”目录。从那里它返回该“资源”目录中的所有文件。我只是感到困惑，因为资源位于数据库服务器上，而不是从中调用 API 的服务器上。资源路径/层次结构是代表服务器上的实际目录还是资源的抽象？如果是后者，那么我该如何处理该抽象资源名称以使其映射到数据库中的表或行？无法找到具体的实现示例令人沮丧，我可以很容易地理解这个 URI 路径在内部是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:18:39.287

您可以使用框架为您完成很多工作，但在后台发生的事情并不神奇。在某种程度上，URI 映射到一些数据库表。它们不是指某个目录结构，而是试图解释资源之间的层次关系。

例如，假设我们正在为一所大学建模。数据库中的元素存储在*Faculties*或*Courses*两个表之一中。Faculties 表由描述法学院、医学院等的行组成。它有一个独特的*Faculty_id*列，然后是用于描述我们需要的任何内容的列。Courses 表有一个唯一的*course_id*列和一个外键*Faculty_id*列，以告知该课程属于哪个学院。

设计此 API 的 RESTful 方式可能是

*   `/faculties`获取所有院系的列表，检索`SELECT * FROM Faculties`
*   `/faculties/2`获取有关某个学院的信息，使用检索`SELECT * FROM Faculties WHERE faculty_id=2`
*   `/faculties/2/courses`获取属于某个学院的所有课程，检索`SELECT * FROM Courses WHERE faculty_id=2`
*   `/faculties/2/courses/15`检索某个课程，如果它确实属于教师 2，则检索`SELECT * FROM Courses WHERE faculty_id=2 AND course_id=15`

其具体实现取决于您选择的编程语言（可能还有框架），但在某些时候，您需要选择应该如何查询数据库。这并不明显。你需要仔细计划它才有意义！

来自数据库的结果当然必须以某种方式编码，通常是 XML 或 JSON（但其他表示形式也一样好，尽管可能不那么常见）。

除此之外，您还应该确保正确实现这四个动词，以便它们匹配 SQL 命令（`GET`= `SELECT`，`POST`= `INSERT`，`PUT`= `UPDATE`，`DELETE`= `DELETE`），正确处理编码协商，返回正确的 HTTP 响应代码以及所有其他预期的东西一个 RESTful API。

作为最后一条建议：如果你能巧妙地做到这一点，那么你设计移动应用程序就会变得*容易得多*。我真的不能强调这一点。例如，如果您在`POST`请求中返回现在在数据库中查看的完整条目，您可以立即使用正确的 ID 将其存储在手机上，并且您可以使用相同的代码来呈现内容，如果它有已使用`GET`请求下载。此外，在您知道该请求是否成功之前，您不会通过过早更新来欺骗用户（手机失去连接很多）。

**编辑：**在评论中回答您的问题：创建 API 可以被视为一种艺术形式，并且可能不应该在设计阶段涉及任何编码。API 应该是有意义的并且不依赖于特定的实现（即不同的数据库选择不应该影响您的 API）。您的下一个任务将是在 API 的人类可读结构和您的数据库之间建立联系（不管它是关系的还是其他的）。所以是的，你需要做一些翻译，但我看不出查询字符串对你有什么帮助。典型的结构是`api.my.website/collection/element/collection/element`。查询可用于过滤。例如，您可以编写`example.com/resource?since=2012-06-01`以从“资源”集合中检索元素的子集，*用唯一的 ID 表达。*

 *根据我的理解，您认为传入的请求必须始终根据 PHP 和 HTTP 服务器的工作方式转到单独的文件。事实**并非**如此。您可以[配置您的 Web 服务器以将每个请求路由到单个 PHP 文件](http://www.kavoir.com/2010/02/use-php-to-handle-all-incoming-url-requests-in-a-seo-friendly-manner.html)，然后解析`$_SERVER['REQUEST_URI']`. 根据您选择的 HTTP 服务器，您的里程可能会有所不同，但这基本上是您想要做的。

通过谷歌搜索，我找到[了 PHP 框架列表，](http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/)但我不知道其中任何一个。不过，还有其他人，我最近也听到有人提到[Apify](http://www.apifydoc.com/)，尽管我也不能告诉你太多。PHP 可能是实现 API 的更常见的选择之一。然而，据我所知，[cURL](http://php.net/manual/en/book.curl.php)是一个仅用于连接*其他网站的库/工具。*您当然可以使用[它的命令行版本](http://curl.haxx.se/)来调试您的 API，但我认为您在服务器端不会有太多用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:02:52.373

我认为您应该从要构建 REST 应用程序的框架开始。Rails、RestEasy for java、Codeigniter，都具备良好的 REST 路由能力的基础。这包括从数据库甚至业务流程的下划线资源中提取 URL。他们使用 URL 映射或为抽象创建外观来完成此操作。
通常 REST 与带有查询参数的传统 GET/PUT/POST 并没有真正的区别。事实上，Apache URL 重写通常用于支持 REST 风格的路由。我建议您应该选择其中一个框架并研究它们如何实现此功能。Rails i 的东西在其他框架中具有显着的优势。*

# java - 如何将 JSON 对象映射到 Spring 对象

> ID：11021417
> 
> 赞同：3
> 
> 时间：2012-06-13T18:49:27.410
> 
> 标签：java, json, spring, spring-mvc

如何将 JSON 对象映射到 Spring 对象...我有 AJAX，将 JSON 对象发布到我的 Spring 控制器，但是如何让 Spring 将该 JSON 转换为 java 中的对象

Java 代码：

```
@RequestMapping(method=RequestMethod.POST, value="/employee")
    public ModelAndView addEmployee(@RequestBody String body) {

        System.out.println("in post: " + body);
        Source source = new StreamSource(new StringReader(body));

        System.out.println("source: " + source.toString());
        //
        // how do I turn the JSON String into a Java Object?
        //
        return new ModelAndView(XML_VIEW_NAME, "object", body);
    } 
```

JavaSript/html 代码：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>This is a project to show how to use RESTful</title>
</head>
<body>
<script type="text/javascript">var contexPath = "<%=request.getContextPath()%>";</script>
<script src="<%=request.getContextPath()%>/js/jquery.js"></script>

<script type="text/javascript">
function doAjaxPost() {  

    var queryString = $('#htmlform').serialize();

    alert("doAjaxPost Called :" + queryString +":");

       $.ajax({
            contentType : "application/json",
            dataType : 'json',
            type : "POST",
            url : contexPath + "/service/employee",
            data : queryString, //json serialization (like array.serializeArray() etc)

            success : function(data) {
                alert("Thanks for submitting.  \n\n" + response.result);
               // response
            },
            error : function(request, status, error) {
                   alert('Error: ' + e); 
            }
        });
    }  
</script>

<H1>Add Employee</H1>

<p>
<form name="htmlform" id="htmlform">
<table border=1>
    <thead><tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
    </tr></thead>

    <tr>
        <td><input  type="text" name="ID" maxlength="5" size="3"></td>
        <td><input  type="text" name="Name" maxlength="10" size="10"></td>
        <td><input  type="text" name="Email" maxlength="10" size="10"></td>
    </tr>

</table>
<input type="button" value="Save Employee" onclick="doAjaxPost();" />
<p>
<p>
</form>
[<a href="http://localhost:8080/RESTful/service/employees">List all Employees</a> | <a href="add.jsp">Employee Form Test</a>]

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:30:59.993

确保：

*   发送 JSON 对象，而不是 JSON 字符串
*   在你的类路径中包括杰克逊

然后你可以 `@RequestBody Employee employee`在控制器的方法签名处添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:59:25.133

我想你正在使用 Spring 3.0+。[查看有关JSON 简化](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)的 Spring Source 博客文章。看来你已经成功了一半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:04:13.960

**使用 JSON 映射库**，例如[Jackson](http://jackson.codehaus.org/)或[Gson](http://code.google.com/p/google-gson/)

您的代码大致如下：

```
Employee e;
try {
    e = objectMapper.readValue(body, Employee .class);
} catch (IOException e) {
    throw new IllegalArgumentException("Couldn't parse json into a employee", e);
} 
```

如果您使用 Spring 3 或更高版本，还有更简单的方法：http: [//blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)

# vb.net - VB.NET 括号 () {} [] <>

> ID：11021420
> 
> 赞同：7
> 
> 时间：2012-06-13T18:49:36.847
> 
> 标签：vb.net, syntax, punctuation

有人可以帮我填空吗，包括使用的简要说明，也许还有代码片段？我特别清楚前两个，但对最后一个有点模糊，尤其是：

*   () - 用于调用函数、对象实例化、传递参数等。
*   {} - 用于定义和添加元素到数组或集合。
*   [] - 用于强制将对象视为类型而不是关键字。
*   <> - 用于...？

例如，我一直看到这样的东西，但仍然不太清楚括号是什么意思......

```
<TemplateContainer(GetType(TemplateItem))> _
Public Property MessageTemplate As ITemplate 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T19:04:41.187

VB.net 使用括号表示算术分组和函数参数（在 C# 中都使用括号），以及数组下标和默认属性参数（在 C# 中都使用括号），（索引器），等等。它还用于`(Of ... )`包含类型列表（将包含`< ... >`在 C# 中，没有“ `Of`”关键字。

大括号用于数组或集合初始化表达式，也用于定义具有多个约束的泛型类型（例如`(Of Foo As {IEnumerable, IDisposable, Class})`）。请注意，后一种用法只允许在约束中使用；这是不可能的，例如`Dim MyThing As {IEnumerable, IDisposable, Class}`）。

大括号现在也用于`New With {}`构造：

```
Dim p = New Person With {.Name = "John Smith", .Age = 27}
Dim anon = New With {.Name = "Jack Smythe", .Age = 23} 
```

方括号用于将其拼写与保留字的拼写匹配的标识符括起来。例如，如果一个类定义了一个名为的方法`Not`（可能该类是用一种没有关键字的语言编写的`Not`），则可以通过将其名称括在方括号中（例如`someVariable = [Not](5)`）在VB 中使用这种方法。在没有方括号的情况下，上述表达式将设置`someVariable`为 -6（将 vb.net`Not`运算符应用于值 5 的结果）。

如别处所述，尖括号用于属性。请注意，在许多情况下，属性放置在它们影响的事物上方的行上（以避免将受影响的变量推过屏幕的右边缘）。在旧版本的 vb 中，这种用法需要使用续行标记（尾随下划线）。

尖括号也用于[XML Literals](https://msdn.microsoft.com/en-us/library/bb384629.aspx)和[XML Axis Properties](https://msdn.microsoft.com/en-us/library/bb384769.aspx)：

```
Dim xml = <simpleTag><anotherTag>text</anotherTag></simpleTag>
Console.WriteLine(xml.<anotherTag>.First.Value) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T19:05:10.420

在这种情况下，它用于属性声明。它也可以在 XML Literals 中使用，如下所示：

```
<TestMethod>
Public Sub ThisIsATest()
  If 1 <> 0 Then
    Dim foo = <root>
                <child>this is some XML</child>
              </root>
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T18:50:50.573

在 VB.Net 中，`<>`用于包围[Attributes](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T18:53:23.460

VB.NET`<>`用于属性以及指示“不等于” ( `!=`)

在您的示例中，它只是包含属性。C# 中的相同代码将是

```
[TemplateContainer(GetType(TemplateItem))]
public ITemplate MessageTemplate { get; set; } 
```

此属性用于开发模板化控件，将数据与表示分离。换句话说，模板化控件可以在更改外观的同时保留相同的功能。

# c# - 如何在 WPF 应用程序启动期间显示等待光标？

> ID：11021422
> 
> 赞同：30
> 
> 时间：2012-06-13T18:49:41.687
> 
> 标签：c#, wpf, mouse-cursor

以下是我希望在 WPF 应用程序启动时发生的基本事件。这与 Word 在我的机器上的启动方式非常相似。

1.  显示忙碌光标。
2.  执行基本初始化。这需要几秒钟，需要在显示初始屏幕之前完成。
3.  显示闪屏。此初始屏幕显示更深入初始化的进度，可能需要一段时间（缓存来自数据库的信息）。
4.  显示默认光标。由于启动屏幕现在正在显示进度，因此无需显示忙碌光标。
5.  启动屏幕进度完成后，显示主窗口。
6.  关闭启动画面。

除了在显示初始屏幕之前显示繁忙光标外，一切正常。当我通过快捷方式执行应用程序时，等待光标闪烁，但很快又恢复到默认值。我尝试了不同的方法来设置光标，但没有奏效，但我认为问题在于我不在控件/窗口中——我是在 App.xaml.cs 中进行的。而且，我设置的属性似乎是 Windows 窗体属性。这是我在 App.xaml.cs 中的代码的摘录。

```
protected override void OnStartup(StartupEventArgs e)
{
  base.OnStartup(e);

  System.Windows.Forms.Application.UseWaitCursor = true;
  //System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.WaitCursor;
  //System.Windows.Forms.Application.DoEvents();

  Initialize();

  SplashWindow splash = new SplashWindow();
  splash.Show();

  System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Default;

  // Right now I'm showing main window right after splash screen but I will eventually wait until splash screen closes.
  MainWindow main = new MainWindow();
  main.Show();
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-13T18:54:56.733

这应该工作

```
Mouse.OverrideCursor = System.Windows.Input.Cursors.Wait; 
```

`System.Windows.Input`不使用`System.Windows.Forms`。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-10-30T19:54:55.777

如果您的任务需要花费大量时间，并且它在非 GUI 线程上运行（这是一个好主意），您可以使用以下代码更改应用程序光标：

```
Application.Current.Dispatcher.Invoke(() =>
{
    Mouse.OverrideCursor = Cursors.Wait;
}); 
```

当繁忙的过程完成时，使用这个：

```
Application.Current.Dispatcher.Invoke(() =>
{
    Mouse.OverrideCursor = null;
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-12T14:11:48.437

```
 Mouse.OverrideCursor = System.Windows.Input.Cursors.Wait;
        InitializeComponent();
        ...
        Mouse.OverrideCursor = null; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-06T03:04:27.807

我假设 Initialize() 是您希望忙碌光标出现的部分，是吗？

如果是这样，请尝试以下方法：

1.  在 MainWindow.xaml 中，在`<Window>`元素上设置以下属性：`Visibility="Hidden"`和`Cursor="Wait"`.
2.  在 MainWindow.xaml.cs 中，将初始化代码移出构造函数并移到公共 Initialize() 方法中，这样任何依赖于 Initialize() 调用的代码都不会被执行。确保 Initialize() 方法的末尾将`Visiblity`属性设置为`Visible`并重置`Cursor`。
3.  将上面发布的代码片段更新为如下所示：

```
protected override void OnStartup(StartupEventArgs e)
{
  base.OnStartup(e);

  MainWindow main = new MainWindow();
  main.Show(); // this should set the cursor how you want it
  Initialize();
  SplashWindow splash = new SplashWindow();
  splash.Show();
  main.Initialize(); // now invoke the Initialize method you created
  // Right now I'm showing main window right after splash screen but I will eventually wait until splash screen closes.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-16T12:42:28.297

对我来说，它使用了上述内容的混合：

```
class MyForm : System.Windows.Window {}

class Test{
   MyForm myForm;

   void ShowWaitCurserInMyForm(){
      //before kicking off the stuff I'm waiting for: 
      System.Windows.Forms.Application.UseWaitCursor = true; // disables all Input from the mouse
      myForm.Cursor = System.Windows.Input.Cursors.Wait; // actually displays a wait Cursor

      // do time intensive stuff here, if we wait for an event, following stuff belongs in its handler

      System.Windows.Forms.Application.UseWaitCursor = false; // reenables all Input from the mouse
      myForm.Cursor = null; // reset the Cursor visually
   }
} 
```

# java - Spring Container 是否调用 bean 的构造函数？如果没有，如何使用“new”关键字将字段初始化为新实例？

> ID：11021423
> 
> 赞同：2
> 
> 时间：2012-06-13T18:49:42.167
> 
> 标签：java, spring

我有这样的课-

```
class Messages
  {
      ...
      LinkedList<String> inputs;
      LinkedList<String> outputs;
      ...
  } 
```

通常，我会在构造函数中初始化输入和输出 -

```
public Messages()
 {
    inputs = new LinkedList<String>();
    outputs = new LinkedList<String>();
 } 
```

但是，我想使用 spring 配置来实现相同的结果。那么我应该在以下节点下放置什么？

```
<bean id="Messages" class="com.somename.Messages">
                                                   <--- what goes here?
</bean> 
```

当 Spring Container 创建“Messages”bean 时，它还会调用构造函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:52:41.627

是的，它会调用构造函数。*IoC 容器不*调用构造函数会很奇怪——它必须花费一些时间来构造对象的实例而不通过构造函数，而且这几乎总是一个坏主意。

当然，您也可以将变量初始化为声明的一部分：

```
class Messages
{
    ...
    private final LinkedList<String> inputs = new LinkedList<String>();
    private final LinkedList<String> outputs = new LinkedList<String>();
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:52:22.670

Spring 将调用构造函数。如果有的话，它也会匹配构造函数参数。

这里详细解释[http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-collaborators](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-collaborators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:55:17.420

如果您只想在没有任何数据的情况下进行初始化，那么您可以在构造函数中执行此操作，因为将调用对象创建构造函数。如果您想分配特定数据，那么您的类中应该有设置器，并且需要在创建 bean 时使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T16:09:22.683

我认为值得一提的是，代理对象的行为可能非常棘手。

Spring 在创建代理方面非常复杂。例如，从 Spring 3.2 开始，CGLIB 被重新封装在下面`org.springframework`，它会至少调用一次构造函数来创建代理。

当我们谈论 AOP 时，似乎不止一次[。](http://forum.spring.io/forum/spring-projects/aop/73853-cglib-proxy-method-calls-constructor-twice)

同时，从 Spring 4.0 开始，您的代理对象的构造函数将不再被调用两次，因为 CGLIB 代理实例将通过 Objenesis 创建。

Objenesis 是一个小型库，用于在不调用构造函数的情况下实例化对象。

所以，没有简单的是或否的答案。当然，无论框架如何，都会在某个时候调用构造函数来实例化对象。但是在现代框架中，有一些技巧可以帮助将构造函数调用的数量减少到最低限度。

# python - Pyramid - 表格和数字格式/本地化

> ID：11021426
> 
> 赞同：1
> 
> 时间：2012-06-13T18:49:46.663
> 
> 标签：python, forms, validation, localization, pyramid

我正在考虑切换到 Pyramid，但我想知道如何本地化表单。我怎样才能有一个可以接受/验证特定语言环境格式的数字的表单？（千位和小数点分隔符等）

Django 目前通过使用`localize=True`字段来为我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:57:27.377

Pyramid 项目以其出色的文档而闻名，并且有一个[国际化和本地化部分](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html)可用。

然而，Pyramid 并没有规定您在应用程序中使用的表单框架。本地化服务本身通常被推迟到[Babel](http://babel.edgewall.org/)，包括数字和日期格式化例程。你必须要么将它们绑定到你选择的表单框架中，要么找到一个已经绑定到 Babel 的框架来完成这项工作（我不知道，但这并没有说太多）。

# delphi - XE2 exe 和 dcu 位置

> ID：11021430
> 
> 赞同：5
> 
> 时间：2012-06-13T18:50:11.090
> 
> 标签：delphi, delphi-xe2

我正在尝试从 Delphi 6 迁移到 XE2。

当我编译并创建一个 exe 时，exe 和 dcu 似乎放在项目下的 \win32\debug 目录中。

有没有办法让它把exe和dcu放在与项目和源相同的目录中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T19:02:54.807

转到项目选项并删除这些：

![在此处输入图像描述](../Images/851e2b65a746a0ef35c3dea51f228382.png)

# java - Java堆内存是否会根据RAM而变化？

> ID：11021434
> 
> 赞同：2
> 
> 时间：2012-06-13T18:50:17.397
> 
> 标签：java, memory-management

我知道默认的 Java 堆内存是 128 MB。由于它是**默认值**，我想知道该内存是否会根据 RAM 大小**自动更改。**例如，对于具有 128 MB RAM 的机器，堆内存 128 太多，应该自动更改。因为如果一个应用程序使用了所有的 128 个堆，PC 最终会遇到麻烦。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T18:56:48.793

在 Java 1.6 更新 18（及更高版本）中，如果未指定，客户端 JVM 中的默认堆大小遵循以下规则：

> 默认的最大堆大小是物理内存的一半，最大物理内存大小为 192 MB，否则为物理内存的四分之一，最大物理内存大小为 1 GB。
> 
> 例如，如果您的机器有 128 MB 的物理内存，那么最大堆大小为 64 MB，大于或等于 1 GB 的物理内存导致最大堆大小为 256 MB。

取自[1.6.0_18 更新说明](http://www.oracle.com/technetwork/java/javase/6u18-142093.html)

在以前的 Java 版本中，堆大小默认情况下是不可变的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T18:52:37.220

`-Xmx`不，除非您在启动时使用该选项要求它，否则它不会自动更改。

在任何情况下，32 位机器上的内存都不能超过 2 GB。如果您需要更多，则必须获得具有大量 RAM 的 64 位操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:52:45.660

您可以使用 aptions -Xmx 和 -Xms 指定 JVM 堆大小

-Xmx - 最大尺寸。-Xms - 最小尺寸。

你指定喜欢

```
 -Xmx64m -Xms32m  (for 64 and 32 MB) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T18:54:51.103

不，它不会自动更改。[在此处](http://javarevisited.blogspot.com/2011/11/hotspot-jvm-options-java-examples.html)查看有关 HotSpot JVM 内存选项的更多信息。

更多关于处理 Java OutOfMemoryError 的信息[。](http://javarevisited.blogspot.com/2011/09/javalangoutofmemoryerror-permgen-space.html)

# php - gmagick几何

> ID：11021440
> 
> 赞同：0
> 
> 时间：2012-06-13T18:50:55.770
> 
> 标签：php, gmagick

我遇到了以下问题：

```
// $data contains some image data

$gm = new gmagick;
$gm->readImageBlob($data);
$gm->resizeImage(
    100,
    50,
    gmagick::FILTER_LANCZOS,
    1
);

$gm->readImageBlob($data);
$gm->resizeImage(
    140,
    70,
    gmagick::FILTER_LANCZOS,
    1
);
$output = $gm->getImageBlob();

print_r($gm->getImageGeometry()); 
```

将打印

```
Array ( [width] => 100 [height] => 50 ) 
```

这是一个意想不到的结果。如果我用 imagick 而不是 gmagick 执行完全相同的代码，我会得到不同的（预期的）结果

```
Array ( [width] => 140 [height] => 70 ) 
```

另外，有趣的是，对于 gmagick，如果我省略该行

```
$output = $gm->getImageBlob(); 
```

然后我得到预期的图像尺寸 140x70..

我在这里错过了什么重要的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:20:16.817

`getimageblob`imagick 和 gmagick 版本中的方法有一个区别。第二个重置内部计数器，因此您将始终拥有第一个添加图像的尺寸，而不是最后一个。

[gmagick 的 getimageblob 版本](http://svn.php.net/viewvc/pecl/gmagick/trunk/gmagick_methods.c?view=markup&pathrev=325921#l1034)

[imagick 的 getimageblob 版本](http://svn.php.net/viewvc/pecl/imagick/trunk/imagick_class.c?revision=325896&view=markup#l6494)

看起来像一个错误，因为在重置计数器之前对图像缓冲区进行了检查。请注意，这个函数没有记录在 php net 的 gmagick 部分的任何地方，因此它可能不受支持和维护。

# c# - 在 pageloadcomplete VB.net 上使用 jquery 更新隐藏字段

> ID：11021441
> 
> 赞同：0
> 
> 时间：2012-06-13T18:50:56.567
> 
> 标签：c#, javascript, jquery, asp.net, vb.net

好吧，我在学习 VB 的几个小时里一直试图理解这一点：

如果我有这个（PageLoadComplete 函数/HiddenField/linkBut​​ton）：

```
 Protected Sub PageLoadComplete(sender As Object, e As System.EventArgs) Handles     Me.LoadComplete
    If Request.QueryString("viewPDF") = 1 Then
        MsgBox(myfield.Value)
    End If
End Sub 
```

此链接打开一个链接到同一页面的新选项卡（它加载同一页面）：

```
 <asp:LinkButton runat="server" CssClass="lnkBtn" ID="btnViewPDF" 
 OnClientClick="var url = 'CIP_frmCIPEventExplore.aspx?ViewPDF=1;
  parent.showNewTab(url, 'CIP Chart - PDF', 'CIP');">
  <img alt=""src="External_Files/images/view_pdf_icon.png" />
   <span>View MsgBox</span></asp:LinkButton> 
```

和具有值的隐藏字段：

```
<asp:HiddenField ID="myfield" runat="server" Value="myfields" /> 
```

如果我点击链接，它会打开一个带有 MsgBox 的新选项卡，该选项卡的 HiddenField (ID="myfield") 值非常好，但是：

如果我修改此隐藏字段并删除它的值，如下所示：

```
 <asp:HiddenField ID="myfield2" runat="server" /> 
```

然后使用 javascript 添加这个值：

```
 $("#<%=btnViewPDF.ClientID%>").click(function(){
               $("#<%=myfield2.ClientID%>").val('this is the field2 val') ; ) ; 
            }); 
```

我得到一个空 MsgBox() ，所以我怎样才能让 jquery 在调用 PageLoadComplete 函数之前更新这个隐藏字段 ID="myfield2" 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:04:14.763

好吧，您为 定义了两个点击事件`btnViewPDF`，因此它们很可能相互冲突。尝试将 Javascript 从`OnClientClick`属性移动到 jQuery`click()`函数中。

# java - API 设计：最好将 IKVM java.util.Set 包装在 .NET 4 ISet 中？

> ID：11021448
> 
> 赞同：1
> 
> 时间：2012-06-13T18:51:11.837
> 
> 标签：java, .net, api-design, ikvm

我正在使用[IKVM](http://www.ikvm.net/)向 .NET 公开一个 Java 库，它将 Java 字节码编译为 CLR 字节码。这很好用，我的问题与 API 设计有关。我的 API 非常简单和小巧。方法调用返回一个实现 java.util.Set 的对象。我的问题是，从 .NET 开发人员的角度来看，以下哪一项对开发人员更友好：

1.  要将此 Java 对象直接返回给开发人员，在这种情况下，开发人员必须将 IKVM Core 和 Util 库导入到他们的代码中，或者
2.  尝试将返回的 Java 对象包装在 .NET 友好的界面中？.NET 的唯一 Set 接口标准是[ISet](http://msdn.microsoft.com/en-us/library/dd412081.aspx)，它只存在于 .NET 4 中。

一般来说，我认为将返回的对象包装在 .NET 开发人员期望看到的接口中会更好，这表明最好将我的公共 API 设计为返回 ISet。但是，我也认为允许我的应用程序在早期版本的 .NET 上运行会很好，如果 API 依赖于 ISet，这是不可能的。如果我不使用 ISet，那么似乎任何 Set 接口都是可以接受的，包括 java.util.Set。

任何人都可以提供任何指导，我将不胜感激。

# webdeploy - 升级到 VS 2012 后 Web 部署失败

> ID：11021450
> 
> 赞同：14
> 
> 时间：2012-06-13T18:51:15.217
> 
> 标签：webdeploy, visual-studio-2012

我有一个项目，在 VS 2010 下发布（Web 部署）到 localhost。除了在 VS 2012 RC 中打开它之外，我没有对项目进行任何更改。

当我尝试从 VS 2012 RC 发布时失败，消息说该服务不存在，即使该站点存在于 IIS 中并且可以发布到。

现在，当我在 VS 2010 中打开项目并尝试发布时，发布失败并出现同样的问题。我没有尝试在 VS 2012 RC 中发布的其他项目仍然有工作的发布配置文件。

有没有其他人遇到过这个问题，如果有，你做了什么来纠正它？我已经研究了所有常见问题，为什么发布可能会失败，但是将其他项目发布到 IIS 作为同一台机器上的本地主机正在工作，所以我认为这排除了任何失败的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:12:14.280

你的问题很老了。我建议安装的不是 RC，而是最终的 VS 和最新的更新 - 女士们解决了一堆问题。

# boost - Boost.Build 重建

> ID：11021451
> 
> 赞同：1
> 
> 时间：2012-06-13T18:51:16.080
> 
> 标签：boost, boost-build

当我重建我的应用程序时，之前构建的可执行文件不会被删除，如果出现编译错误，我的脚本会继续执行并执行实际上没有更新的可执行文件。如何在构建过程发生之前删除可执行文件？我想在编译操作中这样做：

```
exe myapp : 
    #here I want to remove the executable file
    sources
    libraries
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:52:56.783

不确定是否有更简单的方法，但这会起作用：

```
# cleanexe.jam
import project ;
import targets ;
import generators ;
import type ;

type.register CLEAN_EXE : clean-exe ;

rule clean-exe ( source : requirements * : target-name ? )
{
    target-name ?= $(source:D=:S=).cleanexe ;
    return [ targets.create-typed-target CLEAN_EXE : [ project.current ] : $(target-name) : $(source) : $(requirements) ] ;
}

generators.register-standard cleanexe.clean-on-failure : EXE : CLEAN_EXE ;

rule clean-on-failure ( target : source : requirements * )
{
    RMOLD $(source) ;
} 
```

然后在您的 jamfile 中，您可以执行以下操作：

```
# jamfile
exe myapp : 
    sources
    libraries
    ;

import cleanexe : clean-exe ;
clean-exe myapp ; 
```

或者，您可以考虑检查 b2 (bjam) 的退出代码，如果失败，则酌情跳过脚本的其余部分。

# c++ - 如何从 XCode 编译的命令行可执行文件中重定向 STDOUT？

> ID：11021452
> 
> 赞同：1
> 
> 时间：2012-06-13T18:51:16.953
> 
> 标签：c++, xcode, macos, bash, command

我有一个写入标准输出的 C++ 程序，我试图将其编译成 XCode 中的命令行实用程序。我需要将程序编译成发布版本（看起来，XCode 调用存档 - 去图），而不是作为调试运行它。

我基本上想将程序的输出通过管道传输到这样的文本文件中

> 我的程序 > TextFile.txt

我可以将程序编译成命令行并通过这样的 Bash shell 运行它：

> 打开我的程序

这会产生一个新进程（不是我想要的）。但是，如果这可行，我可以忍受：

> 打开我的程序 > TextFile.txt

...但它没有:-(。如果我尝试直接从 Bash 运行 MyProgram，我会收到错误消息：**-bash: MyProgram: command not found。**

我究竟做错了什么？如何编译我的命令行工具以在 Mac OSX 下不需要 Open 命令？

感谢您的任何帮助，您可以提供。我在 Mac 平台上学习 C++，我开始发现它比 Visual Studio 更麻烦一些。与它一起工作是否会变得不那么痛苦？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:55:22.257

*   使您的项目成为`Command Line Tool`. 这将使您可以直接从命令行运行它。

*   通过键入`./MyProgram`或`./MyProgram > TextFile.txt`不运行它`open MyProgram`。

# sql - 在 SQL 中解析 JSON 字符串

> ID：11021453
> 
> 赞同：1
> 
> 时间：2012-06-13T18:51:23.307
> 
> 标签：sql, json, parsing, hive

我的 SQL 表中有一列 JSON 字符串。我想提取“页面”值，知道怎么做吗？{"action.type":"click","page":1424}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:29:50.213

Hive 实际上有一个仅针对该[get_json_object的命令](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-getjsonobject)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:30:09.213

这是一个纯 SQL 版本。

```
DECLARE @json varchar(64);
DECLARE @index int;
SELECT @json = '{"action.type":"click","page":1424}';
DECLARE @length int = LEN(@json);
DECLARE @pageIndex int = CHARINDEX('page":', @json);
DECLARE @difference int = @length - (@pageIndex + 6); -- 6 is for page":
SELECT @index =  CHARINDEX('page', @json);
SELECT SUBSTRING(@json, @index + 6, @difference); 
```

这会给你一个结果`1424`

它真的很啰嗦，但它一步一步地展示了它是如何获得这个价值的。您可以轻松地将其重构为存储过程。

# c# - 在 C# 中读取 .db 文件

> ID：11021455
> 
> 赞同：5
> 
> 时间：2012-06-13T18:51:24.653
> 
> 标签：c#, .net, database, paradox

```
 string Path = @"c:\Database\Mydatabase.db";

     string myConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Path + ";Extended Properties=Paradox 5.x;";

    // Define the database query    
    string mySelectQuery = "SELECT id,name FROM people WHERE id < 3;";

    // Create a database connection object using the connection string    
    OleDbConnection myConnection = new OleDbConnection(myConnectionString);

    // Create a database command on the connection using query    
    OleDbCommand myCommand = new OleDbCommand(mySelectQuery, myConnection);

    // Open the connection    
    myCommand.Connection.Open();

    // Create a database reader    
    OleDbDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection); 
```

错误在 myCommand.Connection.Open(); 它说：'c:\Database\Mydatabase.db' 不是有效路径。确保路径名拼写正确并且您已连接到文件所在的服务器。

我正在尝试在 C# 中读取 .db 文件。但是，我收到一个错误，我确定该文件位于那里，该错误对我没有意义。请你帮助我好吗 ？或者如何在 C# 中读取 .db(paradox) 数据库文件？

**编辑：** 字符串路径 = @"c:\Database\";

这种情况下的错误是“Microsoft Jet 数据库引擎找不到对象'people'。确保对象存在并且正确拼写它的名称和路径名。”

如果我这样改变它，C#如何找到要使用的数据库文件？因为，我没有在任何地方指定文件名“Mydatabase.db”

![在此处输入图像描述](../Images/c188ea2da81c937a4cec1fa40075976a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:55:23.020

如果应用程序看不到文件，则很可能是安全问题。而“你”可以访问该文件。应用程序不能。

这是一个网络应用程序吗？如果是这样，那么这就是问题所在。asp.net/IIS 无法看到其虚拟目录之外的内容。在这种情况下，您需要提升/修改 asp.net 用户帐户的权限才能访问该文件，或者在虚拟目录中移动数据库文件。这是 App_Data 目录的一个很好的候选者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:02:29.553

确认它是一个 SQLite 数据库，我只是将它下载到我的手机上并使用 SQLite 查看器查看它。

* * *

您需要为 SQLite 下载 ADO.NET 提供程序：

“官方”版本（来自 SQLite，而不是 MS）

[http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

旧版本

[http://sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:54:30.273

请尝试使用[这些](http://connectionstrings.com/sqlite)连接字符串之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:56:15.143

[根据这个站点](http://www.connectionstrings.com/paradox)，您应该只指定文件夹名称，而不是 db 文件。

> 请注意，您应该只指定数据库所在的文件夹。不是数据库名称本身。

链接的[MSDN 文章](http://support.microsoft.com/kb/230126/EN-US/)说，如果要更新数据，应该使用 Jet 4.0 Service Pack 5，否则它可能是只读的。在任何情况下，我都建议安装服务包。

# ruby - 从 Rakefile 中打开 Vim？

> ID：11021456
> 
> 赞同：5
> 
> 时间：2012-06-13T18:51:32.650
> 
> 标签：ruby, rake

我正在为个人笔记创建日记应用程序，并在我的`Rakefile`：

```
task :new do
  entry_name = "Entries/#{Time.now.to_s.gsub(/[-\ :]+/, '.').gsub(/.0500+/,'')}.md"
  `touch #{entry_name}`
  `echo "# $(date)" >> #{entry_name}`
end 
```

我想包括的最后一部分是打开 Vim 文本编辑器，但我无法弄清楚如何打开它，就好像我直接从 bash 终端调用它一样。

我试过了：

```
vim #{entry_name} 
```

但不幸的是，我认为这两个都将它作为后台进程打开。

我一直在参考“[在 Ruby 中运行 Shell 命令的 6 种方法](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T19:23:39.050

正如在[您引用的文章中](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)， s 在当前进程的*子shell*```中运行命令，但真正的问题是它也试图从命令运行中获取输出，这与 Vim 不兼容。

 *您可以：

*   用于`exec`将当前进程*替换*为新进程（请注意，Ruby/Rake 进程将在您调用 后结束`exec`，之后将不再运行）。

*   用于`system`创建类似```s 的子 shell，但避免了试图抓取 Vim 的标准输出的问题。与 不同`exec`的是，在 Vim 终止后，Ruby 将继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-07T16:59:32.757

您需要将 tty 作为退格键等的标准输入传递，以便在 vim 中正常工作：

```
exec("</dev/tty vim a b") 
```

* * *

显然反引号 ( ```) 不起作用，但我遇到了脚本`system`/的问题。`exec`

首先我得到`Vim: Warning: Input is not from a terminal`，然后我看到`^?`我何时使用退格键。*

# c# - 更新按钮在IE中单击刷新时不断更新

> ID：11021459
> 
> 赞同：0
> 
> 时间：2012-06-13T18:51:40.753
> 
> 标签：c#, asp.net, sql-server, viewstate

我有一个表单，其中我使用存储过程填充内容并对内容执行更新操作。现在我的更新按钮工作正常。我的问题是每次我点击 IE 中的“刷新”按钮时，内容都会更新，我不希望这种情况发生。我是 .Net 和所有这些 ViewState 的新手。任何帮助表示赞赏..

这是我的代码：

```
 public partial class _Default : System.Web.UI.Page
            {

         protected void Page_Load(object sender, EventArgs e)
         {

         }
        public void BindGridView()
   {
    string constring =     ConfigurationManager
           .ConnectionStrings["shaConnectionString"].ConnectionString;

    using (SqlConnection con = new SqlConnection(constring))
    {
        using (SqlCommand cmd = new SqlCommand("spd_pc", con))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = con;
            cmd.Parameters.Add("@city", SqlDbType.VarChar).Value = txt_city.Text;

            con.Open();
            IDataReader idr = cmd.ExecuteReader();
            GridView1.DataSource = idr;
            GridView1.DataBind();
            idr.Close();
            con.Close();

        }
    }
}
protected void Button1_click(object sender, EventArgs e)
{
    BindGridView();
}
private void DeleteRecords(int id)
{
    string constring = ConfigurationManager.
      ConnectionStrings["shaConnectionString"].ConnectionString;

    using (SqlConnection conn = new SqlConnection(constring))
    {

        using (SqlCommand cmd = new SqlCommand("del_pc", conn))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = conn;
            conn.Open();
            cmd.Parameters.Add("@id", SqlDbType.VarChar).Value = id;

            cmd.ExecuteNonQuery();

            conn.Close();
        }
    }

}

protected void ButtonDelete_Click(object sender, EventArgs e)
{
    foreach (GridViewRow row in GridView1.Rows)

        CheckBox chkb = (CheckBox)row.FindControl("CheckBox1");

        if (chkb.Checked)
        {
            int id = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Values[0]);

            if (!(id.Equals(System.DBNull.Value)))
            {
                DeleteRecords(id);
            }
        }
    }
    BindGridView();
}
protected void Button2_Click(object sender, EventArgs e)
{
    if (!IsCallback)
    {

        string active = "active";
        string inactive = "inactive";
        foreach (GridViewRow row in GridView1.Rows)
        {
            CheckBox chkb = (CheckBox)row.FindControl("CheckBox1");

            if (chkb.Checked)
            {
                int id = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Values[0]);
                string status = row.Cells[5].Text;

                if (!(id.Equals(System.DBNull.Value)))
                {
                    if ((String.Equals(active, status)))
                        UpdateRecords(id);
                    if ((String.Equals(inactive, status)))
                        UpdateRecords(id);
                }
            }
        }
    }
}
private void UpdateRecords(int id)
{
    string constring = ConfigurationManager.
           ConnectionStrings["shaConnectionString"].ConnectionString;

    using (SqlConnection conn = new SqlConnection(constring))
    {

        using (SqlCommand cmd = new SqlCommand("upd_pc", conn))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = conn;
            conn.Open();
            cmd.Parameters.Add("@id", SqlDbType.VarChar).Value = id;

            cmd.ExecuteNonQuery();

            conn.Close();
        }
    }
    BindGridView();
          }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:59:56.713

是的，这会发生。问题是您正在刷新按钮单击的发布事件。解决方案是更新完成后重定向回页面。

```
button_click(...)
{
   //save to db
   Response.Redirect(Request.Referrer);
} 
```

或类似的东西。

现在，如果用户单击刷新，它将提交 GET 请求以加载页面，而不是 POST 以发出按钮单击事件。

如果您搜索 Post Get Redirect（或类似的东西），您会发现很多关于该主题的文章。描述您遇到的情况以及此解决方案为何有效。

# linux - 将人类可读的日期从 Epoch 转换为变量

> ID：11021460
> 
> 赞同：7
> 
> 时间：2012-06-13T18:51:41.387
> 
> 标签：linux, bash, epoch

好的，这可能是一个非常基本的问题；但是，我刚刚回到 Linux 的马鞍上。

我有一个变量，它保存一个称为 pauseTime 的纪元时间。我需要该变量成为人类可读的（类似于 2012-06-13 13:48:30）。

我知道我可以输入

```
date -d @133986838 //just a random number there 
```

这将打印类似的东西。但我需要让变量保存人类可读的日期，而不是纪元时间......我尝试的所有事情都不断出错。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:53:33.623

这样做：

```
VARIABLENAME=$(date -d @133986838) 
```

接着

```
export VARIABLENAME 
```

或在 Bash 中直接执行：

```
export VARIABLENAME=$(date -d @133986838) 
```

如果要格式化，请使用通常的 ISO 格式：

```
export ISODATE=$(date -d @133986838 +"%Y-%m-%d %H:%M:%S")
# or
EPOCHDATE=133986838
export ISODATE=$(date -d @$EPOCHDATE +"%Y-%m-%d %H:%M:%S") 
```

后面的格式在 中`+`进行了解释`man date`。

注意：`$()`是反引号的现代形式。即将命令的输出捕获到变量中。然而，`$()`这让一些事情变得更容易，最显着的是逃避其中的规则。因此，如果你的 shell 理解它，你应该总是更喜欢它而不是反引号。

# iphone - 如何确定应用程序是否显示“App X 想使用您当前的位置”警报？

> ID：11021461
> 
> 赞同：0
> 
> 时间：2012-06-13T18:51:42.947
> 
> 标签：iphone, ios, ipad, core-location, cllocationmanager

有没有办法以编程方式确定 CoreLocation 是否显示该警报？

我正在显示一个欢迎屏幕，如果出现警报，我想调整它的外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:06:01.213

当您调用 的实例方法时`CLLocationManager` `-startUpdatingLocation`，您可以安排一个`NSTimer`间隔为例如 1 秒的时间，并在计时器回调中调用 的`-authorizationStatus` *类*方法`CLLocationManager`。如果返回`kCLAuthorizationStatusNotDetermined`，则显示警报，用户应选择允许或拒绝。如果他拒绝，则`-locationManager:didFailWithError`使用错误代码调用委托方法`kCLErrorDenied`，您应该停止更新位置。

# ruby-on-rails - Postgres 适配器似乎为实际上具有非 NULL 值的列返回 nil 日期

> ID：11021466
> 
> 赞同：1
> 
> 时间：2012-06-13T18:52:11.760
> 
> 标签：ruby-on-rails, postgresql, pg, active-relation

```
Postgres 9.0.4
Rails 3.0.7
AR 3.0.7
pg 0.12.2 
```

我有一个包含 3 条记录的表，其中 DATE 列的值为“0001-01-01 BC”（不确定它们最初是如何进入的，列上没有设置默认值）。

当我请求这些记录，然后通过 ActiveRelation 查询此日期列值时，它们返回 nil，但它们实际上在数据库中不是 NULL。

看：

```
[3] pry(main)> User.where(birthday: '0001-01-01 BC').map {|u| u.birthday}
=> [nil, nil, nil] 
```

任何人都见过这样的事情或知道这里发生了什么？

谢谢，韦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:22:26.943

这看起来像是通过[此拉取请求](https://github.com/rails/rails/pull/1097)修复的问题。更新rails应该可以解决您的问题。

# ruby-on-rails - ruby on rails 3.2 将默认资产路径从 /asset 更改为其他目录

> ID：11021475
> 
> 赞同：2
> 
> 时间：2012-06-13T18:52:47.920
> 
> 标签：ruby-on-rails, asset-pipeline

我之前一直在使用 rails 3.0.9，并尝试为同一个项目迁移到 rails 3.2。我在我的 Gem 文件中添加了以下内容：

```
 gem 'rails', '3.2.3'

  gem 'nokogiri'

  gem 'rack', "~>1.1"

  group :assets do

  gem 'sass-rails', "~> 3.2.3"

  gem 'coffee-rails', "~> 3.2.1"

  gem 'uglifier', '>=1.0.3'

  end 
```

我在 applcation.rb 中添加了以下内容

```
config.assets.enabled = true                 
config.assets.version = '1.0'                                
config.assets.prefix = "/public" 
```

我更改了前缀，因为在项目中我的所有 javascript 和样式表都在公共文件夹中。

但不知何故，前缀的更改不起作用。它总是选择路径作为/assets。

当我执行 rails c 并输入： Rails.application.config.assets.paths

它总是给我结果，就好像它是从 /assets 中选择路径一样。

任何人都可以帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:50:30.343

我同意 Zajin 在您问题的评论中的观点。顺应新的开始不仅大声疾呼，而且在生产中运行时让很多事情变得更容易。

我强烈推荐观看这些很棒的 Railscasts.com 视频：

[http://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)

[http://railscasts.com/episodes/318-upgrading-to-rails-3-2](http://railscasts.com/episodes/318-upgrading-to-rails-3-2)

是先升级到3.1再升级到3.2，所以先看再跟新标准。在了解新版本的 rails 所提供的内容方面，他是最出色的。

他还继续解释了 Rails 3.1 提供的很多内容：

[http://railscasts.com/episodes/265-rails-3-1-overview](http://railscasts.com/episodes/265-rails-3-1-overview)

这是一个测试版视频，但它会帮助你兴奋起来，尤其是他的视频，它涵盖了 sass 和咖啡脚本。

我知道这不是您正在寻找的答案，而且似乎需要做更多的工作来遵守新标准，但这只会让未来的事情变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:06:24.850

尝试设置：

```
config.assets.manifest = '/path/to/some/other/location' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:09:28.110

设置`config.assets.prefix`只是告诉 sproket 在哪里存储预编译的资产。默认情况下，这是`public/assets`. 我认为您尝试做的是更改搜索路径（sprokets 在其中查找您的原始资产）。`config.assets.paths << Rails.root.join("app", "assets", "special")`通常，您可以使用例如添加到搜索路径。但是@Zajn 是正确的，您应该将原始资产放在 app/assets 中以符合 rails 资产管道约定。

# hadoop - “从地图中键入不匹配的键：预期 org.apache.hadoop.io.IntWritable，收到 org.apache.hadoop.io.LongWritable” - 一切看起来都正确

> ID：11021478
> 
> 赞同：1
> 
> 时间：2012-06-13T18:52:50.447
> 
> 标签：hadoop

我正在尝试编写简单的 map reduce 程序来使用新的 API（0.20.2）找到最大的素数。这就是我的 Map 和 reduce 类的样子……

```
public class PrimeNumberMap extends Mapper<LongWritable, Text, IntWritable, IntWritable> {

public void map (LongWritable key, Text Kvalue,Context context) throws IOException,InterruptedException
{
    Integer value = new Integer(Kvalue.toString());
    if(isNumberPrime(value))
    {
            context.write(new IntWritable(value), new IntWritable(new Integer(key.toString())));
    }
}

boolean isNumberPrime(Integer number)
{
    if (number == 1) return false;
     if (number == 2) return true;

     for (int counter =2; counter<(number/2);counter++)
     {
         if(number%counter ==0 )
             return false;
     }
            return true;

}
}
public class PrimeNumberReduce extends Reducer<IntWritable, IntWritable, IntWritable, IntWritable>  {

public void reduce ( IntWritable primeNo, Iterable<IntWritable> Values,Context context) throws IOException ,InterruptedException
{
    int maxValue = Integer.MIN_VALUE;
    for (IntWritable value : Values)
    {
        maxValue=  Math.max(maxValue, value.get());
    }
    //output.collect(primeNo, new IntWritable(maxValue));
    context.write(primeNo, new IntWritable(maxValue));  }

}  

 public static void main(String[] args)  throws IOException, InterruptedException, ClassNotFoundException{

    if (args.length ==0)
    {
        System.err.println(" Usage:\n\tPrimenumber <input Directory> <output Directory>");
        System.exit(-1);
    }
    Job job = new Job();
    job.setJarByClass(Main.class);

    job.setJobName("Prime");
    // Creating job configuration object

    FileInputFormat.addInputPath(job, new Path (args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    job.setMapOutputKeyClass(IntWritable.class);
    job.setMapOutputValueClass(IntWritable.class);

    job.setOutputKeyClass(IntWritable.class);
    job.setOutputValueClass(IntWritable.class);
    String star ="*********************************************";
    System.out.println(star+"\n Prime number computer \n"+star);
    System.out.println(" Application started ... keeping fingers crossed :/ ");
    System.exit(job.waitForCompletion(true)?0:1);

}

} 
```

我仍然收到有关地图键不匹配的错误

> java.io.IOException：映射中的键类型不匹配：预期的 org.apache.hadoop.io.IntWritable，在 org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect 收到 org.apache.hadoop.io.LongWritable（MapTask .java:1034) 在 org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80) 在 org.apache.mapTask$NewOutputCollector.write(MapTask.java:595) 在 org.apache。 hadoop.mapreduce.Mapper.map(Mapper.java:124) 在 org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144) 在 org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java: 668) 在 org.apache.hadoop.mapred.MapTask.run(MapTask.java:334) 在 org.apache.hadoop.mapred.Child$4.run(Child.java:270) 在 java.security.AccessController.doPrivileged(本机方法）在 javax.security.auth.Subject.doAs(Subject.java:396) 在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1109) 在 org.apache.hadoop.mapred.Child.main(Child.java:264) 2012-06-13 14:27:21,116 INFO org.apache.hadoop.mapred.Task：为任务运行清理

有人可以建议什么是错的。我已经尝试了所有的钩子和骗子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T19:26:54.320

您尚未在主块中配置 Mapper 或 reducer 类，因此正在使用默认 Mapper - 这被称为身份映射器 - 它作为输入接收的每一对都是输出（因此 LongWritable 作为输出键）：

```
job.setMapperClass(PrimeNumberMap.class);
job.setReducerClass(PrimeNumberReduce.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T15:02:37.013

我是 hadoop mapreduce 程序的新手。

映射时，我使用`IntWritable`但我减少`IntWritable`格式中的值并将结果转换为双精度，然后`DoubleWritable`在上下文写入中使用。

运行时失败。

我处理 map 中的隐性 int 以在 reduce 中加倍的方法是：

```
Mapper(LongWritable,Text,Text,DoubleWritable)
Reducer(Text,DoubleWritable,Text,DoubleWritable)
job.setOutputValueClass(DoubleWritable.Class) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T13:11:50.800

1.  映射器应定义如下，

    ```
    public class PrimeNumberMap extends Mapper<**IntWritable**, Text, IntWritable, IntWritable> { 
    ```

    代替

    ```
    public class PrimeNumberMap extends Mapper<LongWritable, Text, IntWritable, IntWritable> { 
    ```

2.  正如评论中提到的那样，您应该定义映射器和减速器。

    ```
    job.setMapperClass(PrimeNumberMap.class);
    job.setReducerClass(PrimeNumberReduce.class); 
    ```

请参阅 Hadoop 权威指南第 3 版，第 2 章，第 24 页

# javascript - 简单的 javascript for 循环，奇怪的行为

> ID：11021479
> 
> 赞同：0
> 
> 时间：2012-06-13T18:52:56.757
> 
> 标签：javascript, regex, loops

我有一个相当简单的循环，它应该遍历文档中的所有元素，并将这些元素与包含“toggler”的类放在一个数组中。[这是一个带有示例的 JSFiddle](http://jsfiddle.net/RyxKS/16/)

如您所见，显然定义了 3 个切换器，但循环只计算了两个。它似乎在正匹配之后直接跳过任何元素，但我不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:05:07.877

删除`g` [示例](http://jsfiddle.net/RyxKS/17/)：

```
 var togglerTest = /toggler/; 
```

> 与 exec （或与它结合使用）一样，在同一个全局正则表达式实例上多次调用 test 将超过上一次匹配。

这意味着它将匹配所有其他切换器，因为`g`.

# android - 如何保存显示在 Android 的 WebView 中的完整网页？

> ID：11021481
> 
> 赞同：7
> 
> 时间：2012-06-13T18:53:06.853
> 
> 标签：android, html, webview, webpage

我正在开发一个有 WebView 的 Android 应用程序。我想将加载在此 webview 中的整个网页（Html + 所有资源 + 图像 + 图标等）保存到一个文件夹中，然后将其压缩并上传到服务器。

如果您使用 WebView 的[saveWebArchive](http://developer.android.com/reference/android/webkit/WebView.html#saveWebArchive%28java.lang.String%29)，则它以存档格式保存。我如何从这个档案中取回 Html 和图像？该档案的格式是否有任何文档？

[如果我使用 addJavaScriptInterface 来获取此处](http://lexandera.com/2009/01/extracting-html-from-a-webview/)描述的 html ，我仍然需要从 webview 缓存目录 (/data/data/your app package/cache/webviewCache/) 复制图像和其他资源。但是我在 Icecream Sandwich 中没有找到 webview 缓存目录（/data/data/your app package/cache/webviewCache/）。

有没有办法将 webview 中显示的整个网页与 Android 中的资源一起保存？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T06:14:12.183

如果还有人感兴趣，这里有一个开源项目，可以读取`WebView`的存档格式（用 保存`saveWebArchive`）并将其显示回 WebView。

[https://github.com/gregko/WebArchiveReader](https://github.com/gregko/WebArchiveReader)

我还找不到实际格式的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:33:49.527

您可以使用 HTML 5 将页面存储在缓存中并从缓存本身加载。

使用 HTML5 缓存很容易，您所要做的就是创建并引用一个清单文件，该文件包含有关所有元素需要缓存的信息。 [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

这是在 webview 中实现缓存功能的好方法。[http://alex.tapmania.org/2010/11/html5-cache-android-webview.html](http://alex.tapmania.org/2010/11/html5-cache-android-webview.html)

阿曼高塔姆

# java - java中的铸造问题

> ID：11021482
> 
> 赞同：0
> 
> 时间：2012-06-13T18:53:13.693
> 
> 标签：java

我是 java 新手，在 Casting 上有一些问题。我有一个类叫Parent，还有一个类叫Children，Children 类是Parent 的子类。

```
public class Parent
{
    int age;
    String occupation;

    public void print()
    {
        System.out.println("My age is:"+ age + "and i am a:" + occupation);
    }
}

public class Children extends Parent
{
    int height;

    public static void main(String args[])
    {
        Children c = new Children();
        Parent p = new Parent();

        p=c;
        c=(Children) p;

        /**Here***/

    }

} 
```

我的问题是，当我在选角后添加 p.XXX 时，我只能看到可以访问的年龄和职业，例如 p。当我做 c.xxx 时，我可以看到所有年龄、职业和身高。我想当我做 p=c 时，p 现在被认为是子类的一个实例，不是吗？如果是，那么为什么我没有看到可访问的高度整数？当我执行 c=(Children)p 时，Parent 类的一个实例被分配给 Children 类的一个实例，并且由于 Parent 实例没有选项，这就是为什么我们要进行从父级到子级的强制转换，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:54:37.430

> 我想当我做 p=c 时，p 现在被认为是子类的一个实例，不是吗？

不，变量的*类型*`p`仍然是`Parent`。该*值*将是对 的实例的引用`Children`，但编译器不会考虑到这一点。它只使用变量的声明类型。

> 当我这样做时`c=(Children)p`，一个`Parent`类的实例被分配给一个`Children`类的实例，并且由于该`Parent`实例没有选项，这就是为什么我们要进行从父级到子级的强制转换，对吗？

好吧，您根本没有更改*实例*。您正在转换类型的表达式`Parent`- 该值将是一个引用。在执行时，JVM 将确保该值实际上是对某个实例`Children`或某个子类型（或 null）的引用——如果不是，JVM 将抛出异常。

区分变量、引用和对象非常重要——它们是三个完全不同的概念，确保你理解它们之间的区别会让很多其他事情变得更清楚。

# java - 如何保存位图数组？

> ID：11021495
> 
> 赞同：0
> 
> 时间：2012-06-13T18:53:56.167
> 
> 标签：java, android

我一直在开发绘图应用程序，但我遇到了问题：我的应用程序有页面数组（位图），我需要保存/打开它。我认为我可以使用序列化机制，但位图不可序列化，我不知道如何将位图数组保存到用户可以更改文件位置的 1 个文件中。所以，请给我一些建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:33:03.667

我不知道使位图可序列化的奇特方法，但是，如果您可以访问该类，则可以覆盖 toString 方法并在保存到文本文件时调用 toString。读取时，您只需读取数据并将其手动转换回位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:34:07.253

你可以做类似[Android 可序列化问题中的第二个答案的事情](https://stackoverflow.com/questions/6002800/android-serializable-problem)

除了写入 FileOutputStream，您可以将每个位图写入 ByteArrayOutputStream。从 ByteOutputStream 中获取字节数组，并将字节数组放入数组列表中，然后可以对其进行序列化。

编辑：直接链接到答案：[https ://stackoverflow.com/a/6640191/606771](https://stackoverflow.com/a/6640191/606771)

# javascript - 即使我正在检查未定义，也会在控制台中收到未定义的错误通知

> ID：11021496
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:01.057
> 
> 标签：javascript

这段代码：

```
if(typeof(Listings.page_num) != 'undefined') {
   // something
} 
```

在 firebug 控制台中触发此通知：

```
Listings is not defined http://mysite.com/js/content_ads.js Line 13 
```

嗯，这就是我检查的原因！有什么办法可以摆脱这个通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:01:13.627

做这个。

```
var Listings = Listings || {};
if (typeof Listings.page_num !== "undefined") // page_num isset 
```

# jquery - 类似于 Cakephp 中的对话框的工具提示 - 类似于 stackoverflow 框

> ID：11021499
> 
> 赞同：2
> 
> 时间：2012-06-13T18:54:10.980
> 
> 标签：jquery, html, cakephp, dialog, tooltip

我正在开发一个基于 cakephp 框架的项目。在我的索引页面上，如果您添加或编辑一个项目，目前 cakephp Session->setFlash 代码将文本放在页面标题的正上方。它将显示“itemName 已成功更改”或“itemName 已成功添加”。（itemName 是他们添加/编辑到数据库表的对象的名称）。

目前，在添加或编辑项目时，会弹出一个对话框，其中包含信息输入字段。所有这些东西都有效，我只想添加更多功能。我想要做的是，当输入有效数据并单击提交时，我想要一个小弹出框，类似于对话框，其中有一条消息，它会在几秒钟后自动消失，也可以手动关闭。

我想要一些类似于 stackoverflow 使用的对话框的东西，例如，当您单击 upvote 箭头并出现消息框时，显示您没有足够的声誉来进行投票。

任何帮助，将不胜感激。谢谢

PS - 我不知道如何称呼这些框，它们是对话框和工具提示的混合体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:56:14.807

对于这样的事情，您需要使用触发但 ajax 调用的 jQuery，无论成功与否。

1.  为表单提交设置 AJAX
2.  使用 jQuery 处理带有 POPUP 的 AJAX 响应。

就 jQuery 而言，有几种选择：

1.  [http://www.jquerypopup.com/demo.php](http://www.jquerypopup.com/demo.php)
2.  [http://www.shanestrong.com/jquery/popup/popup.htm](http://www.shanestrong.com/jquery/popup/popup.htm)
3.  [http://dinbror.dk/bpopup/](http://dinbror.dk/bpopup/)

如果你在谷歌上搜索 jQuery Popup，你会发现很多选项。

就编码本身的帮助而言，如果您在此处发布代码，这里的任何人都应该能够帮助您。

# monodevelop - 在 Monodevelop IDE 中搜索整个单词

> ID：11021500
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:11.900
> 
> 标签：monodevelop, replace

这真让我抓狂。各种页面都提到了全词搜索的标志，但我找不到它们。在 Ubuntu 中运行 MonoDevelop 2.4。到目前为止，我只能进行简单的文本搜索，因此搜索“Sit”会导致“SitAction”等。我只想找到“Sit”以空白或编辑器边界为界的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:16:42.033

首先，我强烈建议升级 MD，最好升级到当前版本（撰写本文时为 3.0.3.1）。MonoDevelop 2.4 已经很老了。

如果您使用增量搜索，当您单击放大镜时，该选项位于下拉菜单中：

![增量搜索中的“仅全词”选项](../Images/929e2acc2517044d2daa8c882769484d.png)

如果您使用在文件中查找，复选框就在对话框中：

![在文件中查找中的“仅全字”选项](../Images/ea501ee77cfa1979dd4f5e24d10191e8.png)

# android - 静音一个音频并在其位置播放其他音频（VideoView）

> ID：11021503
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:14.193
> 
> 标签：android, media-player, android-videoview, android-audiomanager

```
package z.x;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.RandomAccessFile;
import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.TextView;
import android.widget.VideoView;

public class AsdqweActivity extends Activity {
    /** Called when the activity is first created. */
    VideoView myVideoView;
    TextView translation;
    String SrcPath = "/sdcard/bunny.MP4",txtdisplay="";
    Thread Thread1,Thread2;
    Button tag;
    int count=0,tstart=-1,tend=0;
    AudioManager am;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myVideoView = (VideoView) findViewById(R.id.newVideoView);
        translation= (TextView) findViewById(R.id.translation);
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(myVideoView);
        myVideoView.setMediaController(mediaController);
        myVideoView.setKeepScreenOn(true);
        Runnable runnable = new VideoPlayer();
        Thread2= new Thread(runnable);   
        Thread2.start();

        runnable = new CountDownRunner();
        Thread1= new Thread(runnable);   
        Thread1.start();

        runnable = new AudioPlayer();
        Thread1= new Thread(runnable);   
        Thread1.start();

        am = 

        tag = (Button) findViewById(R.id.start);
        tag.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                //how to change the text on the button????????
                if(count%2==0)
                {
                    tstart=myVideoView.getCurrentPosition();
                    System.out.println("tag starts here: "+ tstart);
                    myVideoView.pause();
                    tend=tstart+1000;
                    count++;
                    if((tstart+1000)>myVideoView.getDuration())
                    {
                        tend=myVideoView.getDuration();
                        count++;
                    }
                }
                else
                {
                    tend = myVideoView.getCurrentPosition();
                    if(tend>=(tstart+1000)){
                        System.out.println("tag ends here: "+ tend);
                        count++;
                        myVideoView.pause();    
                    }
                    else
                    {
                        System.out.println("invalid tagging");
                    }
                    tstart=-1;
                }
            }
        });
        myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
        {
            public void onCompletion(MediaPlayer mp) 
            {
            Log.v("log_tag", "On Completion");
            try {
                Thread1.join();
                Thread2.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //r.stopThread();
            finish();
            }
        });
    }

    class VideoPlayer implements Runnable{

        public void run()
        {
            myVideoView.requestFocus();
            myVideoView.setVideoPath(SrcPath);
            myVideoView.start();
        }

    }

    class AudioPlayer implements Runnable{

        public AudioPlayer() {
            // TODO Auto-generated constructor stub

        }
        public void run()
        {
            /*myVideoView.setsetvolume(0,0);
            audio.requestFocus();
            audio.setVideoPath(SrcPathaudio);
            audio.start();*/
        }

    }

    class CountDownRunner implements Runnable
    {   
        File file = new File("/sdcard/harsh.srt");
        long r=0;
        RandomAccessFile rand;
        public CountDownRunner() {
            // TODO Auto-generated constructor stub
            if(!file.exists())
            {
              System.out.println("File does not exist.");
              System.exit(0);
            }
            try {
                rand = new RandomAccessFile(file,"r");
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            translation = (TextView)findViewById(R.id.translation);

        }
        public void run() 
        {   
            // Get the object of DataInputStream
            while(!Thread.currentThread().isInterrupted())
            {
                try 
                {
                    doWork();
                    Thread.sleep(100);
                }catch (InterruptedException e) 
                {
                    Thread.currentThread().interrupt();
                    e.printStackTrace();
                }catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
            closeRandFile();

        }
        public void closeRandFile(){
            try {
                rand.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public void doWork(){
            runOnUiThread(new Runnable() {
                public void run() {
                    try{
                        rand.seek(r);
                        //If it returns  milliseconds, divide by 1000
                        int playTime = myVideoView.getCurrentPosition();
                        long t1=0,t2=0;
                        int i=0,j=0;
                       /* String textValue = "i havent entered it yet";
                        System.out.println(playTime);
                        if(playTime<15000){
                        textValue = "its still not 15000";
                        System.out.println(textValue);
                        }else if(playTime>3000)
                        {textValue = "its more than 15000";}*/
                        ////////////////////////////////////
                        try{
                          // Open the file that is the first 
                          // command line parameter

                          String strLine;
                          //Read File Line By Line
                          while(((strLine = rand.readLine()) != null)&&((strLine=="")))
                          {
                              System.out.println(strLine+"  line 184");
                          }
                          if(strLine != null)
                          {
                              i = Integer.parseInt(strLine);
                              System.out.println(strLine+"  line 189");
                              if(i>j){
                                  if((strLine = rand.readLine()) != null)
                                  {
                                      //02:03:24,100 --> 02:03:25,500
                                      //String substring(int startIndex, int endIndex)
                                      int h =Integer.parseInt(strLine.substring(0,2));
                                      int m =Integer.parseInt(strLine.substring(3,5));
                                      int s =Integer.parseInt(strLine.substring(6,8));
                                      int ms=Integer.parseInt(strLine.substring(9,12));
                                      t1 = (((((h*60)+m)*60)+s)*1000)+ms ;
                                      System.out.println("start of this text time "+t1);
                                      int l = strLine.indexOf("-->")+4;
                                      h =Integer.parseInt(strLine.substring(l+0,l+2));
                                      m =Integer.parseInt(strLine.substring(l+3,l+5));
                                      s =Integer.parseInt(strLine.substring(l+6,l+8));
                                      ms=Integer.parseInt(strLine.substring(l+9,l+12));
                                      t2 = (((((h*60)+m)*60)+s)*1000)+ms ;
                                      System.out.println("end of this text time "+t2);
                                  }
                                  if((playTime<=t2)&&(playTime>=t1)){
                                        while (((strLine = rand.readLine()) != null)&&(strLine!="")){
                                              // Print the content on the console
                                                  txtdisplay=txtdisplay+strLine;    
                                          }
                                          System.out.println(txtdisplay);
                                          r=rand.getFilePointer(); 
                                          translation.setText(txtdisplay);
                                  }
                                  txtdisplay="";
                          }
                          }
                          //Close the input stream

                            }catch (Exception e){//Catch exception if any
                          System.err.println("Error: " + e.getMessage());
                          }
                        //////////////////////////////////////  
                    }catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });

        }
    }
} 
```

我刚来这地方。我的教授要求我在播放同一视频时播放其他音频（例如，一个人不懂英语并希望应用程序播放法语）。我用过视频视图。一种可能的方法是将当前音频静音并播放存储在我的 SD 卡中的法语音频。但视频视图不支持静音（我找不到）。我读到我必须使用媒体播放器而不是视频视图。请帮忙...！！我该怎么办...提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:01:44.587

如果你想访问 VideoView 的 MediaPlayer，你必须调用 MediaPlayer.OnPreparedListener 和 MediaPlayer.OnCompletionListener，然后你可以调用 setVolume(0f, 0f); 功能将音量设置为 0。

做这个：

```
@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_video);

  VideoView videoView = (VideoView)this.findViewById(R.id.VVSimpleVideo);
  MediaController mc = new MediaController(this);
  mc.setAnchorView(videoView);
  mc.setMediaPlayer(videoView);
  videoView.setMediaController(mc);
  String _path = "/mnt/sdcard/Movies/video5.mp4";

  videoView.setVideoPath(_path);
  videoView.setOnPreparedListener(PreparedListener);

  videoView.requestFocus();

  //Dont start your video here
  //videoView.start();

}

MediaPlayer.OnPreparedListener PreparedListener = new MediaPlayer.OnPreparedListener(){

     @Override
     public void onPrepared(MediaPlayer m) {
         try {
                if (m.isPlaying()) {
                    m.stop();
                    m.release();
                    m = new MediaPlayer();
                }
                m.setVolume(0f, 0f);
                m.setLooping(false);
                m.start();
            } catch (Exception e) {
                e.printStackTrace();
            }    
     }
 }; 
```

# php - 在 Linux 上使用 PHP 将元数据或文本注入 WMV

> ID：11021505
> 
> 赞同：1
> 
> 时间：2012-06-13T18:54:27.077
> 
> 标签：php, linux, video, metadata, wmv

我经营一个网站，该网站向可以下载它们的月度订阅者提供视频。大多数视频是 WMV 和 MP4。是否有 PHP 或 Linux 库可以将元数据或文本注入视频文件而不重新编码整个文件？

我的问题是视频被盗版并在其他网站上共享；我们正在赔钱。所以，我想注入下载者的用户名，这样我们就可以抓到海盗了。

我不能为每次下载重新渲染/重新编码电影，因为这会给服务器带来很大压力。

我正在寻找一些解决方案，将`fopen`这些`fwrite`数据保存到文件中。

关于如何实现这一点的任何想法，或者是否有任何图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:13:10.107

正如 Pekka 所提到的，插入元数据不会帮助您打击盗版。盗版者重新编码文件的那一刻，元数据就会丢失。此外，还有编辑元数据的软件（例如[TigoTago ）。](http://tigotago.com/assets/images/pr0xy/index.php)

更好的方法是：

1.  不允许下载。相反，请使用加密流。
2.  允许下载，但追查盗版内容；每当您在 Rapidshare 和其他文件共享网站上找到视频时，请提出投诉。

因为*惩罚海盗起*不了多大作用。他们只需使用不同的姓名、不同的电子邮件和不同的预付信用卡再次注册。

如果您仍然不确定；看看iTunes。您下载的文件不能在任何未经授权的计算机上播放（如果文件受到保护）。但是，一旦用户转换文件或重新编码，文件就可以在任何地方播放。

*编辑*

无论如何，大多数盗版分享和种子都是以 MKV 或 AVI 格式上传的。因此，盗版者很可能会在上传之前对其进行转换和重新编码；使元数据无用。

# visual-studio-2010 - 如何在 Visual Studio 2008 中链接 2010 生成的 DLL？

> ID：11021510
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:37.903
> 
> 标签：visual-studio-2010, visual-studio-2008

我有一个从 Visual Studio 2010 生成的 DLL，但我需要将它链接到一个 2008 年的项目，由于其他各种原因，该项目需要保持 2008 年。有人遇到类似的麻烦或有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:00:34.123

> 动态链接库 (DLL) 从一开始就是 Windows 平台的集成部分。DLL 允许将一个功能封装在一个独立模块中，其中包含可供外部用户使用的 C 函数的显式列表。在 1980 年代，当 Windows DLL 被引入世界时，与广大开发人员交流的唯一可行选择是 C 语言。因此，很自然地，Windows DLL 将其功能公开为 C 函数和数据。在内部，DLL 可以用任何语言实现，但为了在其他语言和环境中使用，DLL 接口应该回退到最低公分母——C 语言。

[http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

标准化的 C 样式接口应该没问题，尽管它仅适用于非托管 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:14:08.443

VS2010 是 .NET 4.0
VS2008 是 .NET 3.5
所以你的问题的答案是否定的，因为如果 dll 正在使用任何特定的 .NET 4 功能，它不会在你的 3.5 环境中执行。也可能发生在 .NET 版本中的程序集映射不同，这可能成为 4.0 dll 未在 3.5 环境中执行的原因之一。
我不确定，但您可以查看 COM 互操作功能。也许它可以帮助你实现你想要的。但是会太乱！！

# perl - Perl 三点运算符...示例

> ID：11021512
> 
> 赞同：29
> 
> 时间：2012-06-13T18:54:43.707
> 
> 标签：perl

`..`任何人都可以用一些例子来说明和运算符之间的确切区别`...`吗？

从[perlop](http://perldoc.perl.org/perlop.html)手册页：

> 如果您不希望它在下一次评估之前测试正确的操作数，如在 sed 中，只需使用三个点（“...”）而不是两个点。

但这究竟意味着什么？我不明白 perlop 的例子：

```
@lines = ("   - Foo",
          "01 - Bar",
          "1  - Baz",
          "   - Quux"
);
foreach (@lines) {
    if (/0/ .. /1/) {
        print "$_\n";
    }
} 
```

with`...`将打印`Baz`- 但为什么呢？更准确地说，为什么`Baz`不印有两个点而只印有`...`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T19:08:50.653

« `...`» 在真正的翻转过牌后不会立即进行翻牌过牌。

与 « `..`»,

1.  `" - Foo"`
    1.  `/0/`返回假。
    2.  `..`返回假。
2.  `"01 - Bar"`
    1.  `/0/`返回真。翻动！
    2.  `/1/`返回真。翻牌！**⇐**
    3.  `..`返回真（因为第一次检查为真）。
3.  `"1 - Baz"`
    1.  `/0/`返回假。
    2.  `..`返回假。
4.  `" - Quux"`
    1.  `/0/`返回假。
    2.  `..`返回假。

与 « `...`»,

1.  `" - Foo"`
    1.  `/0/`返回假。
    2.  `...`返回假。
2.  `"01 - Bar"`
    1.  `/0/`返回真。翻动！
    2.  `...`返回真。
3.  `"1 - Baz"`
    1.  `/1/`返回真。翻牌！
    2.  `...`返回真。
4.  `" - Quux"`
    1.  `/0/`返回假。
    2.  `...`返回假。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T19:11:27.753

如果您有类似`/start/ .. /end/`输入的情况

```
start some text end
start
some other text
end 
```

`..`操作员将在`end`读取第一行后立即处理它，并且只会打印`some text`. `...`操作员不会处理`end`第一行的，因此其他文本也将被打印。基本上，如果结束值与开始在同一行上匹配，则可以避免停止范围。将`...`检查推迟到下一次迭代。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T19:14:16.967

在这里重复这个例子：

```
@lines = ("   - Foo",
          "01 - Bar",
          "1  - Baz",
          "   - Quux"
);
foreach (@lines) {
    if (/0/ .. /1/) {
        print "$_\n";
    }
} 
```

这很棘手......当您使用 2 个点时发生的情况`..`是，当您达到 时`"01 - Bar"`，两个条件都经过测试并且都成功（因为该行有 a`0`和 a `1`）。因此，您的打印已打开并立即关闭。

但是，当您使用 时`...`，第一个条件成功，但直到循环的下一次迭代才尝试第二个条件，因此`"01 - Bar"`将其`"1 - Baz"`打开并关闭。因此，您会看到打印的两行。

棘手的部分是要意识到`"01 - Bar"`满足这两个测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-09T17:05:36.433

# 文章

有一篇很棒的文章叫做[Dots and Perl](http://perlhacks.com/2014/01/dots-perl/)，我建议你阅读它。

总结一下：

### 一个点

*   **连接运算符**：

    ```
    say "one" . "two";
    # Outputs "onetwo" 
    ```

### 两个点

*   **范围运算符**：

    ```
    my @numbers = (1..100); # has one hundred numbers from 1 to 100 
    ```

*   **触发器运算符**：

    ```
    while (my $line = readline($fh)) {
        process_this_line($line) if m/START/ .. m/END/;
    } 
    ```

### 三个点

*   **雅达-雅达声明**：

    ```
    sub example {
        ...
        # throws "Unimplemented" exception when called
    } 
    ```

*   **触发器运算符，三点版本**：

    ```
    while (my $line = readline($fh)) {
        process_this_line($line) if m/START/ ... m/END/;
        # The only difference between this and the two-dot version
        # occurs when a single line has both START and END
    } 
    ```

其他答案更详细地介绍了两个触发器运算符之间的区别。

# xcode - Xcode 4.x 将新项目添加到工作区

> ID：11021514
> 
> 赞同：9
> 
> 时间：2012-06-13T18:54:49.817
> 
> 标签：xcode

有人会认为在 Xcode 中将项目添加到工作区会很直观。

1）但是当您添加一个新项目时，它会添加到现有项目中 - 它一定是一个错误，或者实际上是有原因的。

2）然后如何添加项目（ctr +右键单击等）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-07T17:51:40.747

您可以使用 Xcode IDE 左下角的加号 (+) 按钮将新项目添加到工作区。您必须首先有一个空白工作区，您可以使用菜单（带有快捷方式的**New/Workspaces** **^%N**）。

![在此处输入图像描述](../Images/817b5c1bc96e04a105d350653d961359.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-07T04:49:04.760

到早上我会花一些时间做你要求做的事情。所以这里是步骤（如果你已经遵循了一些步骤，你可以跳过）。

*   创建一个新的空白工作空间
*   通过单击文件->将新文件添加到“您的工作空间”或“命令+选项+A”来添加一个项目
*   选择您的项目文件夹或 yourproject.xcodeproj 文件

只需让索引正确完成，恭喜您已成功将新项目添加到您的 xcode 工作空间。

**注意：**确保您要添加的项目尚未打开，Xcode 对此非常敏感，并且在这种情况下不会在工作区中显示文件树。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-07T21:16:29.650

我的回答适用于 XCode 5，但也应该适用于 XCode 4。

以典型的 Apple 方式，他们为您提供了多种方法来完成*几乎*相同的事情。非常混乱和烦人。有三种方式，只有一种方式与原始海报问题有关：

(1) 使用 File --> Add Files to ... 问题在于，如果没有选择任何项目，它只会将文件添加到工作区。问题在于，一旦您选择了一个项目，我就无法取消选择它。

(2) 使用左下角的“+”。问题在于，它相当于使用下拉菜单（上面的#1）

(3) 在左窗格中右键单击（在空白区域），您将看到“将文件添加到” 这是唯一正确的方法，因为它保证文件将被添加到工作区，而不是任何选定的项目。

选择现有项目后尝试所有三种方法，您就会明白我的意思。

根据我之前使用 XCode 的经验，Apple 将需要大约 10 年的时间来解决这类问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-31T12:00:04.230

> 有人会认为在 Xcode 中将项目添加到工作区会很直观。

当然不是，这是苹果，只对某些专家有用……

> 1）但是当您添加一个新项目时，它会添加到现有项目中 - 它一定是一个错误，或者实际上是有原因的

您确实错过了三个对话框页面中最后一个中的下拉选择列表“添加到：”，即指定 .xcodeproj 文件位置的位置。在那里您可以选择您当前使用的工作区。所以只需使用“文件”“新建...”“项目...”，给它一个名称并从模板中选择，永远不要直观地双击放置项目文件的目录，但一定要调整选择下拉列表到您当前打开的工作区。当然，这种选择从来都不是预先选择的。

# c# - FxCop 和内存泄漏搜寻

> ID：11021518
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:57.950
> 
> 标签：c#, .net, fxcop

根据 MSDN，FxCop 是一个应用程序，它分析托管代码程序集（针对 .NET Framework 公共语言运行时的代码）并报告有关程序集的信息，例如可能的设计、本地化、性能和安全改进。

FxCop 是否有任何预定义的规则，可用于发现潜在的内存泄漏代码？

更新：这是我使用 ANTS Memory Profiler 进行调查的结果 -[链接](https://www.dropbox.com/s/dkcplop6ai0rn6s/Mem_leack.xlsx)

它只显示非托管内存增加。也许我没有以正确的方式使用它。我会很高兴有任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:01:39.410

FxCop 具有与未处置对象相关的规则。未能调用 Dispose 或以其他方式（通过使用块）处理实现 IDisposable 的对象可能会导致泄漏。但是，我不会认为 FxCop 是识别内存泄漏的主要工具。

这些 StackOverflow 问题涵盖了专门为识别内存泄漏而创建的合适工具的主题：

[哪些策略和工具可用于查找 .NET 中的内存泄漏？](https://stackoverflow.com/questions/134086/what-strategies-and-tools-are-useful-for-finding-memory-leaks-in-net)

[https://stackoverflow.com/questions/2259433/how-to-detect-memory-leaks-in-c-sharp-application](https://stackoverflow.com/questions/2259433/how-to-detect-memory-leaks-in-c-sharp-application)

我过去使用的工具之一是 AQTime，它同时进行性能分析和分配分析。标准版可免费使用：[http ://smartbear.com/products/free-tools/aqtime-standard](http://smartbear.com/products/free-tools/aqtime-standard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:13:21.623

FxCop 不是发现内存泄漏的正确工具。它是您用来确保您的代码遵循既定准则的东西。

市场上有一些内存分析器可用[。Net Memory Profiler](http://memprofiler.com/)、[JetBrains dotTrace](http://www.jetbrains.com/profiler/)、[来自 RedGate 的 ANTS Profiler](http://www.red-gate.com/products/ants_performance_profiler/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:19:36.770

CLR Profiler 是免费的，包括一些内存分析工具。这是 .NET 4 的一个：http: [//www.microsoft.com/en-us/download/details.aspx?id=16273](http://www.microsoft.com/en-us/download/details.aspx?id=16273)

# android - Android ListAdapter 如何更正：无法对非静态方法进行静态引用

> ID：11021519
> 
> 赞同：0
> 
> 时间：2012-06-13T18:54:58.780
> 
> 标签：android, class, android-listview, android-fragments, listadapter

我正在尝试将一些自定义列表适配器放入他们自己的类中，以使我的应用程序具有更少的冗余代码并使其更易于管理。

我通过 ListFragment 中的条件语句调用不同的适配器类。我最初在 ListFragment 类中有适配器，这一切都按计划工作。现在要清理所有内容并从 ListFragment 中获取所有代码，我将适配器移出并移入它们自己的类中。既然这样做了，这些方法必须是静态的，所以我可以调用它们，但是这些新类现在包含很多：

> 无法从 ListFragment 类型对非静态方法 setListAdapter(ListAdapter) 进行静态引用

特别是 setListAdapter、setListAdapter、getFragmentManager 和 getFragmentManager 方法。我不想要大量的 ListView Fragment 类，并且由于会重用大量代码，因此只有一个 ListFragment 并使用条件来获得正确的适配器，因此会做得更多，但我不知道如何修复这些新类所以我可以使用它们。

抱歉，解释太长了。我将尝试仅发布相关代码以了解我要完成的工作并为您提供指导。

这可以按照我这样做的方式完成吗？我该如何纠正？

如果有更好的方法，请在我的适配器类中发布一些您的解释或代码中需要更改的代码。

在我的片段的 onActivityCreated 中：

```
. . .

    // Get the string to query from last Fragment and pass it to this
    // Fragment
    Bundle args = this.getArguments();

    boolean rawRes = args.getBoolean(KEY_IS_RAW_RES);
    String url = args.getString(KEY_URL);
    int fileName = args.getInt(KEY_RES_FILE);

    this.getJsonFile(url, rawRes, fileName);

}

public void getJsonFile(String url, boolean rawRes, int fileName) {

    if (rawRes == true) {
        getFromRawRes(fileName);
    } else {
        getFromURL(url);
    }
}

public void getFromRawRes(int fileName) {
        InputStream file = getResources().openRawResource(fileName);
        JSONParser jParser = new JSONParser();
        JSONArray json = jParser.getJSONFromRes(file);
        ListAdapter_SevenItem.callback(json, context);//<--THIS IS A CALL TO THE ADAPTER!!
    } 
```

适配器之一：

```
public class ListAdapter_SevenItem extends ListViewFragment {

. . .

public static void callback(JSONArray json, Context c) {
    if (json != null) {
    // Hashmap for ListView
    . . .
    // create the list item mapping
        String[] from = new String[]{TAG_LABEL, TAG_TITLE, TAG_DISCR, TAG_RES_FILE, TAG_IS_RAW_RES, TAG_CONT_ID};
        int[] to = new int[]{R.id.listLabel, R.id.listTitle, R.id.listDiscription, R.id.listResFile, R.id.listIsRawRes, R.id.listContID};

        // Updating parsed JSON data into ListView
        SimpleAdapter adapter = new SimpleAdapter(c, mList, R.layout.list_item, from, to);
        setListAdapter(adapter);

        // selecting single ListView item
        final ListView lv = setListAdapter();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {
                MainActivity.mLayout.toggleSidebar();
                setHasOptionsMenu(true);

                FragmentManager fm = getFragmentManager();
                final FragmentTransaction lcFT = fm.beginTransaction();
                lcFT.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out, R.anim.hyperspace_in, R.anim.slide_out);

                final Bundle args = new Bundle();

                String resFile = ((TextView) view.findViewById(R.id.listResFile)).getText().toString();
                int passResFile = getFragmentManager().getIdentifier(resFile, "raw", "com.andaero.app");
                args.putInt("KEY_RES_FILE", passResFile);

                boolean isRawRes = true;
                args.putBoolean("KEY_IS_RAW_RES", isRawRes);

                // Delayed to improve animations
                final Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                        ListViewFragment lvf = new ListViewFragment();
                        lcFT.replace(R.id.listContainer, lvf).commit();
                        lvf.setArguments(args);
                    }
                }, 300);
            }
        });
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:22:23.870

你把事情复杂化了。

不应该有像您使用的那样的静态方法/调用。应该很简单。在列表片段中`onActivityCreated(Bundle savedInstanceState)`，您创建列表适配器的一个实例，并使用`setListAdapter()`.

检查[片段教程](http://developer.android.com/intl/zh-CN/guide/topics/fundamentals/fragments.html#Example)中的 TitlesFragment 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:44:09.120

**可以在应用程序中重用的 ListView 片段类。**

我使用 jgilfelt 的通用[JasonArrayAdapter](https://github.com/jgilfelt/android-jsonarrayadapter)类，可以在 GitHub 上下载。下面的类可以在整个应用程序中反复使用，因此它是唯一需要的 ListView 类——这意味着减少了冗余代码/类。特别是，如果您有需要不同属性和/或布局的列表视图。

如果您从另一个 Fragment 加载此 ListViewFragment：

```
String uri = "http://www.xxxx/myjsonfile.json";//EXAMPLE IF FROM A URL
String uri = "json/myjsonfile.json";//EXAMPLE GETTING FROM YOUR ASSETS FOLDER
args.putString("KEY_URI", uri);

String adptrID = "#";//USED TO DETERMINE WHICH LAYOUT TO USE
args.putString("KEY_ADPTR_ID", adptrID);

ListViewFragment lvf = new ListViewFragment();
lcFT.replace(R.id.myContainer, lvf).commit();
lvf.setArguments(args); 
```

如果您从自身加载此 ListViewFragment，只需在 JSON 文件中添加适当的项目并将它们放入您的 setArguments(args) Bundle。

如果您对方法有任何改进/等，请随时将其添加到您的评论/答案中。我是 Android 新手，边走边学... Thnx

ListViewFragment 类：

```
public class ListViewFragment extends ListFragment implements OnItemClickListener {
. . .
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Bundle getArgs = this.getArguments();
        String URI = getArgs.getString(KEY_URI);
            . . .
        new GetJSONTask().execute(URI);
    }

    class GetJSONTask extends AsyncTask<String, Integer, String> {

        protected String doInBackground(String... arg0) {

            String uri = arg0[0];

            InputStream is = null;

            if (uri.contains("http") == true) {// Get JSON from URL
                try {
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    HttpPost httpPost = new HttpPost(uri);
                    HttpResponse httpResponse = httpClient.execute(httpPost);
                    HttpEntity httpEntity = httpResponse.getEntity();
                    is = httpEntity.getContent();

                    BufferedReader rd = new BufferedReader(new InputStreamReader(is, "UTF-8"));
                    while ((line = rd.readLine()) != null) {
                        json += line;
                    }
                    rd.close();
                    return json;
                } catch (Exception e) {
                    e.printStackTrace();
                    return null;
                  }
                } else {//Get JSON from Assets

                Writer writer = new StringWriter();
                char[] buffer = new char[1024];

                try {
                    InputStream jsonFile = getActivity().getAssets().open(uri);
                    Reader reader = new BufferedReader(new InputStreamReader(jsonFile, "UTF-8"));
                    int n;
                    while ((n = reader.read(buffer)) != -1) {
                        writer.write(buffer, 0, n);
                    }
                    jsonFile.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                json = writer.toString();
                // return JSON String
                return json;
            }
        }

        @Override
        protected void onPostExecute(String result) {
            try {
                showData(result);
            } catch (JSONException e) {
                e.printStackTrace();
                Toast.makeText(getActivity(), "something went wrong", Toast.LENGTH_SHORT).show();
            }
        }
    }

    private void showData(String json) throws JSONException {
        JSONObject o = new JSONObject(json);
        JSONArray data = o.getJSONArray("results");

        Bundle getArgs = this.getArguments();
        String adptrID = getArgs.getString(KEY_ADPTR_ID);

        if (adptrID == "3") {//Adapter for 3 items
            String[] from = new String[]{"label", "title", "description", "uri", "adapterID", "containerID"};
            int[] to = new int[]{R.id.listLabel, R.id.listTitle, R.id.listDiscription, R.id.listURI, R.id.listAdapterID, R.id.listContID};
            ListAdapter adapter = new JSONArrayAdapter(getActivity(), data, R.layout.list_item, from, to, null);
            getListView().setOnItemClickListener(this);
            getListView().setAdapter(adapter);
        }
        if (adptrID == "4") {//Adapter for 4 items - Get the idea?
        . . .
        } . . .//Additional Adapter can be added....
    }

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        final Bundle args = new Bundle();
        Bundle getArgs = this.getArguments();

        String uri = ((TextView) view.findViewById(R.id.listURI)).getText().toString();
        args.putString("KEY_URI", uri);

        String adptrID = ((TextView) view.findViewById(R.id.listAdapterID)).getText().toString();
        args.putString("KEY_ADPTR_ID", adptrID);

        String contID = ((TextView) view.findViewById(R.id.listContID)).getText().toString();
        args.putString("KEY_CONTAINER_ID", contID);

        //Conditional to determine witch container to load the ListViewFragment(this)
         if (containerID == "listContainer") {
         lcFT.replace(R.id.listContainer, lvf).commit();
         lvf.setArguments(args);
         }
         if (containerID == "someOtherContainer") {
         lcFT.replace(R.id.discriptionListContainer, lvf).commit();
         lvf.setArguments(args);
         }. . .
    } 
```

# c# - datagrid.validationrules 错误

> ID：11021524
> 
> 赞同：2
> 
> 时间：2012-06-13T18:55:16.487
> 
> 标签：c#, wpf, mvvm

您好，我希望您能帮我找到我的问题：

我正在使用两个数据网格，其中一个已绑定到数据表，另一个已绑定到具有数据关系的子行。我的问题是当我试图验证日期时，只是查看该行是否有错误。

```
<DataGrid x:Name="myDataGrid2" ItemsSource="{Binding ElementName=myDataGrid1, Path=SelectedItem.myDataRelation}">
     <DataGrid.RowValidationRules>
         <validation:ValidationRules ValidationStep="UpdatedValue"/>
     </DataGrid.RowValidationRules>
</DataGrid> 
```

我的 ValidationRules 定义为：

```
public class ValidationRules : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        BindingGroup group = (BindingGroup)value;
        StringBuilder error = null;
        foreach (var item in group.Items)
        {
            DataRowView rowView = item as DataRowView;
            if (rowView != null)
            {
                if (!string.IsNullOrEmpty(rowView.Row.RowError))
                {
                    if (error == null)
                        error = new StringBuilder();
                    error.Append((error.Length != 0 ? ", " : "") + rowView.Row.RowError);
                }
            }
        }
        if (error != null)
            return new ValidationResult(false, error.ToString());
        return ValidationResult.ValidResult;
    }
} 
```

当我在 myDataGrid1 中选择一个项目并在 myDataGrid2 中编辑一行时，这是错误的，然后当我选择另一个项目然后返回到其中的项目时，myDataGrid1 中的项目根据 myDataGrid2 出现错误，应用程序会抛出我：

```
"DeferRefresh is not allowed during an addNew or EditItem transaction.: 
 An unhandled exception ocurred, and the application is terminating". 
```

有人知道我应该怎么做吗？？

# php - 将复选框添加到 Wordpress 登录表单 - 条款和条件

> ID：11021542
> 
> 赞同：1
> 
> 时间：2012-06-13T18:56:22.303
> 
> 标签：php, wordpress, logging

找不到为 wordpress 登录表单上的复选框添加验证的位置。我设置了一个名为“条款”的附加复选框，我需要用户在每次要登录时检查它。

问题是，如果他们不检查，我将无法停止 wordpress 登录。登录代码在哪里。

还安装了一个可能会使事情复杂化的插件，称为他们-我的登录。

我面前有所有的代码，只要告诉我我在找什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:55:20.807

我知道这已经相当老了，但我只是偶然发现了它，并且能够查看法典并找到解决方案。希望这可以帮助某人。感谢@Jason 指出正确的方向。

需要将此代码添加到您的主题`functions.php`文件中：

```
<?php

// As part of WP authentication process, call our function
add_filter('wp_authenticate_user', 'wp_authenticate_user_acc', 99999, 2);

function wp_authenticate_user_acc($user, $password) {
    // See if the checkbox #login_accept was checked
    if ( isset( $_REQUEST['login_accept'] ) && $_REQUEST['login_accept'] == 'on' ) {
        // Checkbox on, allow login
        return $user;
    } else {
        // Did NOT check the box, do not allow login
        $error = new WP_Error();
        $error->add('did_not_accept', 'You must accept the terms and conditions' );
        return $error;
    }
}

// As part of WP login form construction, call our function
add_filter ( 'login_form', 'login_form_acc' );

function login_form_acc(){
    // Add an element to the login form, which must be checked
    echo '<label><input type="checkbox" name="login_accept" id="login_accept" /> I agree</label>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:01:06.530

[WordPress 过滤器/操作](http://codex.wordpress.org/Plugin_API/Action_Reference/)是您的朋友。

看一眼：

*   [管理员初始化](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_init#Example%3a_Access_control)
*   [wp_login](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_login)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-03T15:15:33.103

Patrick Moore 给出的答案对我不起作用，但我确实对其进行了修改以提供有效的解决方案。这可能是因为他早在 2013 年就回答了，现在代码已经改变了。我将过滤器更改为 login_form_middle，并将最后的函数修改为变量，然后通过 return 将值传递回：

```
<?php

// As part of WP authentication process, call our function
add_filter('wp_authenticate_user', 'wp_authenticate_user_acc', 99999, 2);

function wp_authenticate_user_acc($user, $password) {
    // See if the checkbox #login_accept was checked
    if ( isset( $_REQUEST['login_accept'] ) && $_REQUEST['login_accept'] == 'on' ) {
        // Checkbox on, allow login
        return $user;
    } else {
        // Did NOT check the box, do not allow login
        $error = new WP_Error();
        $error->add('did_not_accept', 'You must accept the terms and conditions' );
        return $error;
    }
}

// As part of WP login form construction, call our function
add_filter ( 'login_form_middle', 'login_form_acc' );

function login_form_acc(){
    // Add an element to the login form, which must be checked
    $termsLink = '<label><input type="checkbox" name="login_accept" id="login_accept" /> I agree</label>';
    return $termsLink;
} 
```

# windows-phone-7 - SelectedItem 必须始终设置为有效值。Windows Phone 本地数据库

> ID：11021544
> 
> 赞同：0
> 
> 时间：2012-06-13T18:56:48.893
> 
> 标签：windows-phone-7

我正在使用 Microsoft 创建的本地数据库示例。

我可以将项目添加到列表中，然后将其删除。但我现在想选择项目并获取项目的文本并在下一页中使用它。

这是选择更改事件：

```
 private void allToDoItemsListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        NavigationService.Navigate(new Uri("/LiveTimes.xaml?selectedItem=" + allToDoItemsListBox.SelectedIndex, UriKind.Relative));

    //    string urlWIthData = string.Format("/LiveTimes.xaml?name={0}", " ");
    //    this.NavigationService.Navigate(new Uri(urlWIthData, UriKind.Relative));

    } 
```

然后这是另一个页面上的页面加载。

```
 string selectedIndex = "";
       if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
       {
           int index = int.Parse(selectedIndex);
           DataContext = App.ViewModel.HomeToDoItems[index];

       } 
```

然后当我使用它时，错误出现在 DataContext 行上。

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:17:32.247

您显示的上述代码没有问题，实际问题可能在于您定义 ViewModel 和 HomeToDoItems 的方式。如果您可以显示其中的一些代码，它可以帮助我们解决您的问题。

此外，在将数据设置为 DataContext 之前，请尝试以下步骤：首先，确保您获得了有效的 selectedIndex。

```
var tempData = App.ViewModel.HomeToDoItems[index];
DataContext = tempData; 
```

然后在 tempData 处插入一个断点来检查你是否得到了预期的数据。

此答案可能无法解决您的问题，但会指导您确定实际问题。

# asp.net-mvc - 控制器找不到视图

> ID：11021546
> 
> 赞同：3
> 
> 时间：2012-06-13T18:56:52.593
> 
> 标签：asp.net-mvc, vb.net, mef

我做了一个项目，我有一个基本的`DemoController`：

```
<Export(GetType(IController))> _
<ExportMetadata("controllerName", "Demo")> _
<PartCreationPolicy(CreationPolicy.NonShared)> _
Public Class DemoController Inherits Controller

    Public Function Index() As ActionResult
        Return View("~/Views/Demo/Index.aspx")
    End Function

End Class 
```

在具有此控制器的“插件”项目中，它具有路径`/View/Demo/Index.aspx`. 当我运行我的主要网络应用程序时，我可以到达该`return View`行，但它说找不到该文件。

为什么会这样？

我希望这一切都有意义，并对糟糕的格式感到抱歉。

我可能应该提一下，我的 .aspx 文件位于 Web 应用程序之外的另一个项目中。我将所有内容构建到一个 dll 中，然后将其放入我的 Web 应用程序项目中的一个文件夹中。我得到的错误是“未找到视图'~/Views/Demo/Index.aspx'或其主视图或没有视图引擎支持搜索的位置。搜索了以下位置：~/Views/Demo/Index.aspx "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:07:18.317

你必须为你的插件注册视图

使用 asp.net mvc 的流程![流asp.net mvc](../Images/71a28b06f4087fe044f9cabb98522fb6.png)

因此，如果您正在使用 DI 开发插件，您必须记住一些事情 - 自定义视图引擎 - 自定义控制器工厂

默认的ControllerFactory不能解析你插件的控制器，viewEngine也是一样，你必须告诉viewEngine那个view在哪里

这是一个示例[http://blog.maartenballiauw.be/post/2008/05/20/Creating-a-custom-ViewEngine-for-the-ASPNET-MVC-framework.aspx](http://blog.maartenballiauw.be/post/2008/05/20/Creating-a-custom-ViewEngine-for-the-ASPNET-MVC-framework.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:45:34.110

您说您将所有视图嵌入到一个单独的项目中。使用内置视图引擎将不起作用。[您必须在此线程](https://stackoverflow.com/questions/19746/views-in-separate-assemblies-in-asp-net-mvc)中指定的内置视图引擎中指定视图位置，或者创建[自定义视图引擎](https://stackoverflow.com/questions/236972/using-virtualpathprovider-to-load-asp-net-mvc-views-from-dlls)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:04:42.213

```
~/Demo/Index 
```

应该是正确的路线

另外，请像这样修复退货

```
Return View() 
```

或者

```
Return View("Index") 
```

# c# - WinAPI 等效于 Win32_ComputerSystem.Domain

> ID：11021550
> 
> 赞同：4
> 
> 时间：2012-06-13T18:57:27.910
> 
> 标签：c#, winapi

我的应用程序正在加入 Active Directory 域的计算机上运行。有没有办法使用 WinAPI 方法获取该域的 DNS 名称？即使没有可用的 DNS 服务器或域控制器，我也想要一些可以工作的东西。

现在，我能找到的唯一方法是通过 Win32_ComputerSystem WMI 类的 Domain 属性：

```
using System.Management;

public class WMIUtility
{
    public static ManagementScope GetDefaultScope(string computerName)
    {
        ConnectionOptions connectionOptions = new ConnectionOptions();
        connectionOptions.Authentication = AuthenticationLevel.PacketPrivacy;
        connectionOptions.Impersonation = ImpersonationLevel.Impersonate;
        string path = string.Format("\\\\{0}\\root\\cimv2", computerName);
        return new ManagementScope(path, connectionOptions);
    }

    public static ManagementObject GetComputerSystem(string computerName)
    {
        string path = string.Format("Win32_ComputerSystem.Name='{0}'", computerName);
        return new ManagementObject(
            GetDefaultScope(computerName),
            new ManagementPath(path),
            new ObjectGetOptions()
        );
    }

    public static string GetDNSDomainName(string computerName)
    {
        using (ManagementObject computerSystem = GetComputerSystem(computerName))
        {
            object isInDomain = computerSystem.Properties["PartOfDomain"].Value;
            if (isInDomain == null) return null;
            if(!(bool)isInDomain) return null;
            return computerSystem.Properties["Domain"].Value.ToString();
        }
    }
} 
```

我在 WinAPI 中唯一能找到的是 NetGetJoinInformation 方法，它返回 NetBIOS 域名：

```
using System.Runtime.InteropServices;

public class PInvoke
{
    public const int NERR_SUCCESS = 0;

    public enum NETSETUP_JOIN_STATUS
    {
        NetSetupUnknownStatus = 0,
        NetSetupUnjoined,
        NetSetupWorkgroupName,
        NetSetupDomainName
    }

    [DllImport("netapi32.dll", CharSet = CharSet.Unicode)]
    protected static extern int NetGetJoinInformation(string lpServer, out IntPtr lpNameBuffer, out NETSETUP_JOIN_STATUS BufferType);

    [DllImport("netapi32.dll", SetLastError = true)]
    protected static extern int NetApiBufferFree(IntPtr Buffer);

    public static NETSETUP_JOIN_STATUS GetComputerJoinInfo(string computerName, out string name)
    {
        IntPtr pBuffer;
        NETSETUP_JOIN_STATUS type;
        int lastError = NetGetJoinInformation(computerName, out pBuffer, out type);
        if(lastError != NERR_SUCCESS)
        {
            throw new System.ComponentModel.Win32Exception(lastError);
        }
        try
        {
            if(pBuffer == IntPtr.Zero)
            {
                name = null;
            }
            else
            {
                switch(type)
                {
                    case NETSETUP_JOIN_STATUS.NetSetupUnknownStatus:
                    case NETSETUP_JOIN_STATUS.NetSetupUnjoined:
                    {
                        name = null;
                        break;
                    }
                    default:
                    {
                        name = Marshal.PtrToStringUni(pBuffer);
                        break;
                    }
                }
            }
            return type;
        }
        finally
        {
            if(pBuffer != IntPtr.Zero)
            {
                NetApiBufferFree(pBuffer);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:15:10.530

我认为您正在寻找的是[`GetComputerNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301.aspx)第`ComputerNameDnsDomain`一个参数。但是您可能想要其中一种其他类型。不过，`GetComputerNameEx`从我对问题的理解来看，您正在寻找的功能是什么。

[P在此处](http://www.pinvoke.net/default.aspx/kernel32.getcomputernameex)调用详细信息。

您在评论中提出了一个公平的观点，所以可以肯定的是，在这种情况下[`LsaQueryInformationPolicy`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378313.aspx)，`PolicyDnsDomainInformation`可能是获取计算机所属域的 DNS 名称的更好方法。

但这是一个特例，你的问题没有提到任何这样的特例。只有当主 DNS 后缀已设置且与机器所属的 DNS 域名不同时，才会出现这种情况。出于所有实际目的，`GetComputerNameEx`将完全按照您的意愿行事。

# java - 连接到 .NET REST 端点的 Android 中的对等错误导致间歇性连接重置

> ID：11021551
> 
> 赞同：8
> 
> 时间：2012-06-13T18:57:43.737
> 
> 标签：java, android, wcf-rest

我通过 SSL 连接到我的 IIS REST 服务的设备出现间歇性错误。我的应用程序运行良好，但有时我会遇到此异常。它处理得当，不会关闭应用程序..

ut 我想知道这是什么意思，是否有任何方法可以解决它？目前，它会导致检索数据的延迟。此外，它淹没了日志，我真的不能忽视它。我想知道我是否可以改善这种情况。

当我处理 REST 服务时，这是我应该期待的吗？我的服务器在 Amazon EC2 上。

> 读取错误：ssl=0x1211a88：系统调用期间的 I/O 错误，对等方重置连接
> 
> javax.net.ssl.SSLException：读取错误：ssl=0x1211a88：系统调用期间的 I/O 错误，org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_read(Native Method) 的对等方重置连接。 apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:671) 在 libcore.io.Streams.readSingleByte(Streams.java:41) 在 org.apache.harmony.xnet.provider.jsse。 OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:655) 在 libcore.io.Streams.readAsciiLine(Streams.java:201) 在 libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544) 在 libcore.net.http .HttpEngine.readResponse(HttpEngine.java:784) 在 libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274) 在 libcore.net.http.HttpURLConnectionImpl.getResponseMessage(HttpURLConnectionImpl.java:第475章）

这不是我可以复制的。不是权限或类似的东西。这是间歇性问题。我每天从每分钟连接的 200 台设备中看到大约 1000 台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-04T19:23:58.557

似乎客户端发生了超时问题，导致服务器端出现此异常。我已经在我的服务上的上传方法上看到了这种情况，因为上传文件需要一些时间，手机在网络之间移动的机会非常高，这可能会导致这个问题。

我将研究以下解决方案：

1.  尝试确定是否是某个移动设备制造商导致您的日志因这些异常而泛滥。我遇到过制造商网络处理行为与其他品牌不同的情况。如果您确实发现有特定品牌导致此问题，您可能会延长该特定设备上的默认超时时间，或者进一步调查并尝试在该设备上重现。
2.  我还将检查导致这些异常的客户端是否由于该特定调用方法的延迟问题而超时。可能某些客户在调用某个方法时遇到了某个性能问题。如果这是一个性能问题，您可能会在服务器端修复它，而调查客户端是没有用的。

如果您有任何进一步的细节，请更新。

# ajax - 从 Google Analytics 抓取实时访问者

> ID：11021554
> 
> 赞同：26
> 
> 时间：2012-06-13T18:57:55.667
> 
> 标签：ajax, google-analytics, screen-scraping, web-scraping, google-analytics-api

我有很多网站，想构建一个仪表板，在单个页面上显示每个网站上的实时访问者数量。（其他人想要这个吗？）现在查看此信息的唯一方法是为每个站点打开一个新选项卡。

谷歌没有实时 API，所以我想知道是否可以抓取这些数据。Eduardo Cereto 发现 Google 通过实时/绑定网络请求传输实时数据。任何更精明的人都知道我应该如何开始？这就是我的想法：

1.  弄清楚如何以编程方式进行身份验证

2.  检查所有实时/绑定*请求*，看看它们是如何变化的。每个请求都有唯一的密钥吗？那是从哪里来的？以下是我对请求的细分：

    [https://www.google.com/analytics/realtime/bind?VER=8](https://www.google.com/analytics/realtime/bind?VER=8)

    & `key`= **[这是什么？它从何而来？21 个字符的小写字母数字，每个请求保持相同]**

    & `ds`= **[这是什么？它从何而来？21 个字符的小写字母数字，每个请求保持相同]**

    & `pageId`=rt-standard%2Frt-概述

    & `q`=t%3A0%7C%3A1%3A0%3A%2Ct%3A11%7C%3A1%3A5%3A%2Cot%3A0%3A0%3A4%2Cot%3A0%3A0%3A3%2Ct%3A7%7C%3A1% 3A10%3A6%3D%3DREFERRAL%3B%2Ct%3A10%7C%3A1%3A10%3A%2Ct%3A18%7C%3A1%3A10%3A%2Ct%3A4%7C5%7C2%7C%3A1%3A10%3A2！ %3Dzz%3B%2C&f

    变量 URI 解码为这个`q`（什么？）：t:0|:1:0:,t:11|:1:5:,ot:0:0:4,ot:0:0:3,t: 7|:1:10:6==REFERRAL;,t:10|:1:10:,t:18|:1:10:,t:4|5|2|:1:10:2!=zz ;，＆F

    & `RID`=rpc

    & `SID`= **[这是什么？它从何而来？16 个字符的大写字母数字，每次请求保持不变]**

    & `CI`=0

    & `AID`= **[这是什么？它从何而来？整数，从 1 开始，奇怪地递增到 150，然后是 298]**

    & `TYPE`=xmlhttp

    & `zx`= **[这是什么？它从何而来？12 个字符的小写字母数字，每个请求都会更改]**

    & `t`=1

3.  检查所有实时/绑定*响应*以了解它们如何变化。数据是怎么进来的？它看起来像一些改变的 JSON。我需要连接多少次才能获取数据？网站上的活跃访问者在哪里？以下是示例数据的转储：

```
19
[[151,["noop"]
]
]
388
[[152,["rt",[{"ot:0:0:4":{"timeUnit":"MINUTES","overTimeData":[{"values":[49,53,52,40,42,55,49,41,51,52,47,42,62,82,76,71,81,66,81,86,71,66,65,65,55,51,53,73,71,81],"name":"Total"}]},"ot:0:0:3":{"timeUnit":"SECONDS","overTimeData":[{"values":[0,1,1,1,1,0,1,0,1,1,1,0,2,0,2,2,1,0,0,0,0,0,2,1,1,2,1,2,0,5,1,0,2,1,1,1,2,0,2,1,0,5,1,1,2,0,0,0,0,0,0,0,0,0,1,1,0,3,2,0],"name":"Total"}]}}]]]
]
388
[[153,["rt",[{"ot:0:0:4":{"timeUnit":"MINUTES","overTimeData":[{"values":[52,53,52,40,42,55,49,41,51,52,47,42,62,82,76,71,81,66,81,86,71,66,65,65,55,51,53,73,71,81],"name":"Total"}]},"ot:0:0:3":{"timeUnit":"SECONDS","overTimeData":[{"values":[2,1,1,1,1,1,0,1,0,1,1,1,0,2,0,2,2,1,0,0,0,0,0,2,1,1,2,1,2,0,5,1,0,2,1,1,1,2,0,2,1,0,5,1,1,2,0,0,0,0,0,0,0,0,0,1,1,0,3,2],"name":"Total"}]}}]]]
]
388
[[154,["rt",[{"ot:0:0:4":{"timeUnit":"MINUTES","overTimeData":[{"values":[53,53,52,40,42,55,49,41,51,52,47,42,62,82,76,71,81,66,81,86,71,66,65,65,55,51,53,73,71,81],"name":"Total"}]},"ot:0:0:3":{"timeUnit":"SECONDS","overTimeData":[{"values":[0,3,1,1,1,1,1,0,1,0,1,1,1,0,2,0,2,2,1,0,0,0,0,0,2,1,1,2,1,2,0,5,1,0,2,1,1,1,2,0,2,1,0,5,1,1,2,0,0,0,0,0,0,0,0,0,1,1,0,3],"name":"Total"}]}}]]]
] 
```

让我知道您是否可以帮助解决上述任何问题！

![在此处输入图像描述](../Images/f26572a1c276ae4ec0177a3891266386.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-04T08:21:46.690

为了达到同样的效果，谷歌推出了新的实时 API。使用此 API，您可以轻松检索实时在线访问者以及具有以下维度和指标的多个 Google Analytics。[https://developers.google.com/analytics/devguides/reporting/realtime/dimsmets/](https://developers.google.com/analytics/devguides/reporting/realtime/dimsmets/)

这与 Google Analytics API 非常相似。要开始开发， [https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide](https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T07:34:45.223

使用谷歌浏览器，我可以在网络面板上看到数据。

请求端点是`https://www.google.com/analytics/realtime/bind`

似乎连接保持打开状态 2.5 分钟，在此期间它只是不断获得越来越多的数据。

大约 2.5 分钟后，连接关闭并打开一个新连接。

在“网络”面板上，您只能看到已终止连接的数据。所以让它打开 5 分钟左右，你就可以开始看到数据了。

我希望这能给你一个开始的地方。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-14T22:41:50.597

让谷歌进入循环似乎是多余的。建议您使用从仪表板服务器按需提供的通用元素，并通过绝对 URL 在所有页面上包含此项目，以针对给定站点进行监控。输出项目的脚本可以读取浏览器询问的 IP，这些都可以登录到数据库中并过滤唯一性，从而提供实时人数。

```
<?php
$user_ip = $_SERVER["REMOTE_ADDR"];
/// Some MySQL to insert $user_ip to the database table for website XXX  goes here

$file = 'tracking_image.gif';
$type = 'image/gif';
header('Content-Type:'.$type);
header('Content-Length: ' . filesize($file));
readfile($file);
?> 
```

**修正案：** 数据库还可以为其存储的每一行数据添加时间戳。这可用于进一步过滤结果并提供过去一小时或一分钟内的访问者数量。

**带有 AJAX 的客户端 Javascript 用于微调或过度** 杀伤 onblur 和 onfocus javascript 命令可用于判断页面是否可见，通过 Ajax 将数据传回仪表板服务器。[http://www.thefutureoftheweb.com/demo/2007-05-16-detect-browser-window-focus/](http://www.thefutureoftheweb.com/demo/2007-05-16-detect-browser-window-focus/)

*当访问者关闭页面时，body 标签中的 javascript onunload*函数也可以检测到这一点，并且 Ajax 可用于在浏览器最终关闭页面之前最后一次将数据发送回服务器。

由于您可能还希望收集有关访问者的一些信息，例如谷歌分析，这个页面[https://panopticlick.eff.org/](https://panopticlick.eff.org/)有很多可以检查和调整的 javascript。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-22T15:31:51.233

我需要/想要个人使用的实时数据，所以我对他们的系统进行了一点逆向工程。

而不是绑定到`/bind`我从`/getData`（没有双关语）获取数据。

最低`/getData`要求显然是：`https://www.google.com/analytics/realtime/realtime/getData?pageId&key={{propertyID}}&q=t:0|:1`

以下是可能的查询参数和语法的简短说明，请记住，这些都是猜测，我不知道所有这些：

查询语法：`pageId&key=propertyID&q=dataType:dimensions|:page|:limit:filters`

价值观：

```
pageID: Required but seems to only be used for internal analytics.

propertyID: a{{accountID}}w{{webPropertyID}}p{{profileID}}, as specified at the Documentation link below. You can also find this in the URL of all analytics pages in the UI.

dataType:
    t: Current data
    ot: Overtime/Past
    c: Unknown, returns only a "count" value

dimensions (| separated or alone), most values are only applicable for t:
    1:  Country
    2:  City
    3:  Location code?
    4:  Latitude
    5:  Longitude
    6:  Traffic source type (Social, Referral, etc.)
    7:  Source
    8:  ?? Returns (not set)
    9:  Another location code? longer.
    10: Page URL
    11: Visitor Type (new/returning)
    12: ?? Returns (not set)
    13: ?? Returns (not set)
    14: Medium
    15: ?? Returns "1"

page:
    At first this seems to work for pagination but after further analysis it looks like it's also used to specify which of the 6 pages (Overview, Locations, Traffic Sources, Content, Events and Conversions) to return data for.

    For some reason 0 returns an impossibly high metrictotal

limit: Result limit per page, maximum of 50

filters:
    Syntax is as specified at the Documentation 2 link below except the OR is specified using | instead of a comma.6==CUSTOM;1==United%20States 
```

您还可以通过逗号分隔多个查询（即`q=t:1|2|:1|:10,t:6|:1|:10`）将多个查询组合在一个请求中。

按照上面的“文档”，如果您想构建一个查询，以请求流量来源类型为 CUSTOM 位于美国的前 10 名活跃访问者的页面 URL 和城市，您将使用此 URL：`https://www.google.com/analytics/realtime/realtime/getData?key={{propertyID}}&pageId&q=t:10|2|:1|:10:6==CUSTOM;1==United%20States`

[文档](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/#Management.profiles)

[文档 2](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#filterSyntax)

我希望我的答案是可读的并且（虽然有点晚了）足以回答你的问题并在未来帮助其他人。

# jquery-mobile - 使用相对路径时，jquery mobile js 和 css 的安全 (https) 导入失败

> ID：11021555
> 
> 赞同：3
> 
> 时间：2012-06-13T18:57:55.530
> 
> 标签：jquery-mobile

我正在使用相对路径来包含 jquery mobile。但是当通过安全（https）链接加载时，导入失败。我执行以下操作：

```
<link rel="stylesheet" href="//code.jquery.com/mobile/1.1.0/jquery.mobile.min.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

来自 googleapis 的 jquery 运行良好。但是对于上面的移动 .js 和 .css 导入，我收到以下错误。

加载资源失败 https://code.jquery.com/mobile/1.1.0/jquery.mobile.min.css 加载[资源](https://code.jquery.com/mobile/1.1.0/jquery.mobile.min.css)
失败[https://code.jquery.com/mobile/1.1.0/jquery.mobile .js](https://code.jquery.com/mobile/1.1.0/jquery.mobile.js)

抱歉，如果这似乎是一个行人问题，我对此并不陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:59:30.677

如果您单击两个失败的资源链接，您就会明白原因。

code.jquery.com 没有有效的 SSL 证书。

正如 Quinn 所说，您应该将这些 JS 文件复制到您的服务器并自己提供服务，或者使用 PHP 或其他脚本语言设置代理页面，通过 HTTP 获取文件并从您的服务器提供它们。

# python - python/django fork 后的 SSL 错误

> ID：11021560
> 
> 赞同：4
> 
> 时间：2012-06-13T18:58:26.770
> 
> 标签：python, database, django, postgresql, fork

我有一个 python django 应用程序，其中一部分正在解析一个大文件。这需要很长时间，所以我放了一个 fork 来处理处理，让用户继续浏览该站点。在 fork 代码中，有大量对我们托管在亚马逊上的 postgres 数据库的调用。

我收到以下错误：

```
SSL error: decryption failed or bad record mac 
```

这是代码：

```
pid = os.fork()
if pid == 0:
    lengthy_code_here(long)
    database_queries(my_database)
    os._exit(0) 
```

我的数据库调用都没有工作，尽管在我插入 fork 之前它们工作得很好。环顾四周后，似乎它可能是一个陈旧的数据库连接，但我不知道如何修复它。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T19:04:15.663

在保持套接字打开（例如数据库连接）的同时进行分叉通常是不安全的，因为两个进程最终会尝试同时使用同一个套接字。

您至少需要在分叉后关闭并重新打开数据库连接。

不过，理想情况下，这可能更适合像[Celery](http://celeryproject.org/)这样的任务队列系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:26:22.150

生产环境中的 Django 通常有一个进程分派给包含 django/python 的一堆进程。这些过程是长期运行的，即。他们在处理一个请求后不会终止。相反，他们处理一个请求，然后是另一个，然后是另一个，等等。这意味着在服务请求结束时未恢复/清理的更改将影响未来的请求。

当你 fork 一个进程时，子进程会从父进程继承各种东西，包括所有打开的描述符（文件、队列、目录）。即使您对描述符什么都不做，仍然存在问题，因为当一个进程终止时，所有打开的描述符都将被清除。

因此，当您从一个长时间运行的进程中分叉时，您将自己设置为在子进程完成处理后死亡时关闭所有打开的描述符（例如 ssl 连接）。有一些方法可以防止这种情况在分叉中发生，但有时很难做到正确。

更好的设计是不分叉，而是移交给另一个正在运行或以更安全的方式启动的进程。例如：

*   at(1) 可用于将作业排队以供稍后（或立即）执行
*   消息队列可用于将消息传递给其他守护进程
*   标准 IPC 结构（例如管道）可用于与其他守护进程通信

**更新：**

如果要使用 at(1)，则必须创建一个独立的脚本。您可以使用序列化程序将数据从 django 传递到脚本。

# jquery - 如何进行长轮询ajax请求并在返回结果后停止它

> ID：11021561
> 
> 赞同：3
> 
> 时间：2012-06-13T18:58:27.653
> 
> 标签：jquery, ajax, django, form-submit, long-polling

我有一个网站（在 django 中）向用户显示一个报告，该报告是数据库查询和一些后处理工作的结果。

这需要 30 多秒并触发超时（我无法更改超时数，因为我使用的是 Heroku）。

我想到的唯一可能的解决方案是使用长轮询方法。现在，我在提交按钮上触发了一个 ajax 请求，如下所示：

```
var options = {
          dataType: 'json',
          url: '/report/url/',
          error: custom_error,
          success: show_report,
        };

$('#report_form').submit(function() { 
        // submit the form 
            $(this).ajaxSubmit(options);
            // return false to prevent normal browser submit and page navigation 
            return false; 
        }); 
```

这在我的开发机器和生产环境中运行良好，直到数据量增加。

现在，我想包括一个长轮询方法来解决这个问题。我按照此[链接](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)上的说明进行操作，但没有按预期工作。

我的代码如下所示：

```
var options = {
      dataType: 'json',
      url: '/report/url/',
      error: custom_error,
      success: show_report,
      complete: poll
        };

$('#report_form').submit(function() { 
    $(this).ajaxSubmit(options);
    return false; 
        });
function poll(){
    $.ajax({ url: "/report/long-polling/", success: show_report, dataType: "json", complete: poll, timeout: 30000 });
}; 
```

我创建了一个 url ("/report/long-polling/")，它不会返回任何重要的内容，只是为了保持连接打开。

这是行不通的。这是发生的事情：1）在表单提交后，新的 $.ajax 触发对服务器的请求，不考虑 30 秒超时（据我从上面的链接了解，它应该每 30 秒触发一个新请求，而不是更少）。2）这并不能解决真正的问题 3）在我的开发服务器中，即使是第一个代码也可以工作，即使在我获得要显示的报告数据后，对“/report/long-polling/”的请求也不会停止

我怎样才能使这项工作？我是否也需要更改后端的内容？

# database - 如何正确使用 CONSTRAINTS_AS_ALTER 进行 GET_DDL？

> ID：11021562
> 
> 赞同：0
> 
> 时间：2012-06-13T18:58:33.463
> 
> 标签：database, oracle, database-schema, ddl, dbms-metadata

```
exec dbms_metadata.set_transform_param(DBMS_METADATA.SESSION_TRANSFORM, 'CONSTRAINTS_AS_ALTER', TRUE);

SELECT DBMS_METADATA.GET_DDL(object_type, object_name, owner) FROM all_OBJECTS WHERE  
OWNER = 'USERNAME' AND OBJECT_TYPE = 'TABLE'; 
```

当我运行这些命令时，不幸的是，我在每个表之后都得到了 alter 语句。我更愿意为我的所有表生成 DDL，然后在之后使用 alter 语句来设置约束。目前，alter 语句对某些表运行并失败，因为所引用的表尚未创建。

我见过这个命令：

```
select dbms_metadata.get_ddl('CONSTRAINT',constraint_name) from user_constraints; 
```

但是要使用它，我是否不必以某种方式告诉`GET_DDL`根本不产生任何约束？

有什么方法可以让表格以正确的顺序创建吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:49:04.007

您可以`GET_DDL`通过运行以下命令来告知不生成参照完整性约束：

```
exec dbms_metadata.set_transform_param(DBMS_METADATA.SESSION_TRANSFORM, 'REF_CONSTRAINTS', FALSE); 
```

然后运行约束 DDL，但仅`where constraint_type = 'R'`. （您不想单独运行所有约束，否则您需要在外键之前生成主键，并遇到相同的依赖问题。）

有关转换参数的列表，请参见[此处](http://docs.oracle.com/cd/E11882_01/appdev.112/e23448/d_metada.htm#BGBJBFGE)。

# python - 包含来自多个模型的字段的表单

> ID：11021564
> 
> 赞同：2
> 
> 时间：2012-06-13T18:58:58.937
> 
> 标签：python, django

我有一个基于 django.contrib.auth.models 的模型用户的表单

我创建了另一个名为 UserProfile 的模型，其中包含有关用户的更多信息。

在我的 forms.py 中，我有一个基于以下内容的表单：

```
class Meta:
    model = User 
```

如何在我的 html 中显示 UserProfile 类拥有的字段？

PS.：在 UserProfile 类中，我已经创建了一个字段 user = models.OneToOneField(User)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:18:00.780

创建两个表单并将它们都显示在同一个`<form>`标​​签中。然后手动检查表单是否有效并调用`form.save()`它们。这比将它们强行合并为一种形式要多一些工作，但也许更干净。

（[信用](https://stackoverflow.com/questions/2770810/muliple-models-in-a-single-django-modelform)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:55:31.123

本质上，您需要查看的是内联表单。它们很好地涵盖了管理员自定义，但在使用 ModelForms 时也适用相同的原则。通常人们只是子类用户？

# business-objects - BO XI 中的 Transact-SQL？

> ID：11021566
> 
> 赞同：0
> 
> 时间：2012-06-13T18:59:03.120
> 
> 标签：business-objects, infoview

我最近问了一个问题，得到了一个很好的答案：[SQL: Dynamic view with column names based on column values in source table](https://stackoverflow.com/questions/10986031/sql-dynamic-view-with-column-names-based-on-column-values-in-source-table)

作为一个完全不熟悉 BusinessObjects 的人，有没有办法在 InfoView 中执行此操作？我必须编辑宇宙吗？

抱歉，我知道这是一个可怕的问题……但我们陷入了困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:34:30.463

我不这么认为。它需要动态创建和销毁对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:15:35.903

这可能通过 Universe 中的派生表实现。派生表允许您编写自定义查询以提供 Universe 中的对象。

# html - 这种对齐是否可以在没有 的情况下实现？ 我的目标是对齐，如附图所示（左侧的字段可以有任何宽度，但右侧的字段应该从相同的X坐标开始）。 现在我正在使用一个简单的表格代码来实现这一点：

| Left1< 问问题 问问题 2012-06-13T18:59:15.380 16664 次 This question shows research effort; it is useful and clear 12 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我的目标是对齐，如附图所示（左侧的字段可以有任何宽度，但右侧的字段应该从相同的X坐标开始）。 现在我正在使用一个简单的表格代码来实现这一点： 

&#124; Left1 &#124; Right 1 &#124;
&#124; Left 2 &#124; Right 2 &#124;

但是，我听说使用表格通常很糟糕。有没有办法可以使用 CSS 实现相同的设计？该网站是为可能不支持精美 CSS 的移动设备设计的，因此代码必须尽可能简单。 编辑：因为我仍然偶尔会从那些（大概）刚开始使用 HTML 的人那里收到关于这个问题的通知，就像我制作它时一样，请参考 BT 接受的答案，因为这是迄今为止实现的最佳方法这个功能。建议为“可能重复”的问题（2016 年 5 月 31 日）目前不提供基于 CSS 的 table-row/table-column 方法，需要您进行猜测工作。 虽然可以使用表格来实现相同的效果，但将表格用于布局的目的在语义上会被认为是不正确的。尤其是因为您只需使用一两行 CSS 就可以实现相同的效果。 给你的标签一个固定的宽度（比你最长的标签文本大）。   
  例子 htmlcssoptimizationhtml-table 4 5 回答 5 This answer is useful 12 我偶然发现了一个更简单的方法来做到这一点。假设您有以下内容：Something elseSome text 1Some text 2Some text 3Some text 4您可以像这样对齐Some text 1和 Some text 2使用 css 表格显示样式： .a { display: table-row; } .a div { display: table-cell; } 最酷的是，只要 'top' div 没有设置样式display: table，那么在对齐方面可以忽略其他内容，例如“Something else”。如果'top' div IS styled display: table，那么“Some text 1”将与“Something else”对齐（即，它将所有子元素视为表格行，即使它们具有不同的显示样式）。 这在 Chrome 中有效，不确定它是否应该以这种方式运行，但我很高兴它有效。 .a { display: table-row; } .a div { display: table-cell; }Something elseSome text 1Some text 2Some text 3Some text 4于 2015-07-17T01:03:15.713 回答 This answer is useful 5 在这里，您可以使用它来获取所需的输出。 使用表格 IMO 并不是一个坏习惯，事实上它们应该用于需要表格数据或数据格式类似于表格的地方。 但是，不鼓励使用表格来设计整页或不以表格格式显示的任何内容，这实际上是非常非常错误的。这是一个使用非表结构的示例： HTML：CSS： label { width: 80px; display: block; vertical-align: middle; float:left; clear:left; } input { border-top-left-radius:5px; border-bottom-right-radius: 10px; background: #141414; color: #fdd56c; outline: none; } 这是一个例子 于 2012-06-13T19:18:18.830 回答 This answer is useful 5 虽然可以使用表格来实现相同的效果，但将表格用于布局的目的在语义上会被认为是不正确的。尤其是因为您只需使用一两行 CSS 就可以实现相同的效果。 给你的标签一个固定的宽度（比你最长的标签文本大）。   
  例子 于 2012-06-13T19:02:38.957 回答 This answer is useful 3 是的，这样的对齐是可能的。使用 CSS 类，您可以标记 HTML 以实现与表格相同的外观，而无需为使用表格而头疼（或使标记看起来难看）。 使用这个 CSS： .label { display: inline-block; width: 100px; } .inputBox { width: 200px; } 这个HTML： E-mail:
Password: 你会得到你想要的布局。 要在 IE7 支持下执行此操作，请将上面的 CSS 更改为： .label { display: block; width: 100px; float: left; clear: left; } 然后，将此行添加到已显示的行下方：使用 IE7 兼容设置的示例：http: //jsfiddle.net/bbXXp/ 于 2012-06-13T19:03:09.530 回答 This answer is useful 0 真的。我正在艰难地学习它。我使用表格进行对齐，现在，某些对齐在较小的屏幕（例如手机、平板电脑等）中变得奇怪。因此，我切换到 div。首选使用...，如果屏幕较小，它将自动对齐。因此，我的建议是Table 应该只用于真正的表格，而不是用于对齐正文中的控件。 于 2016-10-21T06:53:05.083 回答 Related 1 c# - C#如何让列表视图上的子项目与项目保持在同一行？ 2 javascript - 如何在html中设置输入类型按钮的样式 4 javascript - 如何让函数在 2 分钟后执行，然后每隔 2 分钟执行一次？ 1 iis - 两个域上的一个网站 1 javascript - dojo 网格：将过滤条件发送到服务器，日期有效 2 alloy - 合金中的内存问题 0 c# - URL 末尾的点会导致未处理的错误 1 php - php 文件中的 ASP.NET 用户控件 (ascx) 1 java - 使用 Scanner 从 Java 中的命令提示符读取整数 2 python - ZMQ软件与语言绑定的区别 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11021567
> 
> 赞同：12
> 
> 时间：
> 
> 标签：html, css, optimization, html-table

![想要的结果](../Images/f9067c9939117d7defe01da8f601de37.png)我的目标是对齐，如附图所示（左侧的字段可以有任何宽度，但右侧的字段应该从相同的`X`坐标开始）。现在我正在使用一个简单的表格代码来实现这一点：

```
<table><tr>
<td>Left1</td><td>Right 1</td></tr>
<tr><td>Left 2</td><td>Right 2</td></tr></table> 
```

但是，我听说使用表格通常很糟糕。有没有办法可以使用 CSS 实现相同的设计？该网站是为可能不支持精美 CSS 的移动设备设计的，因此代码必须尽可能简单。**编辑**：因为我仍然偶尔会从那些（大概）刚开始使用 HTML 的人那里收到关于这个问题的通知，就像我制作它时一样，请参考 BT 接受的答案，因为这是迄今为止实现的最佳方法这个功能。建议为“可能重复”的问题（2016 年 5 月 31 日）目前不提供基于 CSS 的 table-row/table-column 方法，需要您进行猜测工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-17T01:03:15.713

我偶然发现了一个更简单的方法来做到这一点。假设您有以下内容：

```
<div class='top'>
  <div>Something else</div>
  <div class='a'>
    <div>Some text 1</div>
    <div>Some text 2</div>
  </div>
  <div class='a'>
    <div>Some text 3</div>
    <div>Some text 4</div>
  </div>
</div> 
```

您可以像这样对齐`Some text 1`和 `Some text 2`使用 css 表格显示样式：

```
.a {
  display: table-row;
}
.a div {
  display: table-cell;
} 
```

最酷的是，只要 'top' div 没有设置样式`display: table`，那么在对齐方面可以忽略其他内容，例如“Something else”。如果'top' div IS styled `display: table`，那么“Some text 1”将与“Something else”对齐（即，它将所有子元素视为表格行，即使它们具有不同的显示样式）。这在 Chrome 中有效，不确定它是否应该以这种方式运行，但我很高兴它有效。

```
 .a {
      display: table-row;
    }
    .a div {
      display: table-cell;
    }
```

```
 <div class='top'>
      <div>Something else</div>
      <div class='a'>
        <div>Some text 1</div>
        <div>Some text 2</div>
      </div>
      <div class='a'>
        <div>Some text 3</div>
        <div>Some text 4</div>
      </div>
    </div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T19:18:18.830

在这里，您可以使用它来获取所需的输出。使用表格 IMO 并不是一个坏习惯，事实上它们应该用于需要表格数据或数据格式类似于表格的地方。但是，不鼓励使用表格来设计整页或不以表格格式显示的任何内容，这实际上是非常非常错误的。这是一个使用非表结构的示例：HTML：

```
<form>
    <label for="name">Email: </label><input id="name" type="email" placeholder="@" />
    <br/><br />
    <label>Password: </label><input type="password" id="password"  placeholder="*"/>
</form> 
```

CSS：

```
label {
    width: 80px;
    display: block;
    vertical-align: middle;
    float:left;
    clear:left;
}
input {
    border-top-left-radius:5px;
    border-bottom-right-radius: 10px;
    background: #141414;
    color: #fdd56c;
    outline: none;
} 
```

这是一个[例子](http://jsfiddle.net/ATewW/4/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T19:02:38.957

虽然可以使用表格来实现相同的效果，但将表格用于布局的目的在语义上会被认为是不正确的。尤其是因为您只需使用一两行 CSS 就可以实现相同的效果。给你的标签一个固定的宽度（比你最长的标签文本大）。

```
<style>
label {
    width: 100px;
    display: inline-block;
}​
</style>

<label>Name</label>
<input type="text" />
<br/>
<label>Email Address</label>
<input type="text" />​ 
```

[**例子**](http://jsfiddle.net/7fRj3/3/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T19:03:09.530

是的，这样的对齐是可能的。使用 CSS 类，您可以标记 HTML 以实现与表格相同的外观，而无需为使用表格而头疼（或使标记看起来难看）。使用这个 CSS：

```
.label {
    display: inline-block;
    width: 100px;
}

.inputBox {
    width: 200px;
} 
```

这个HTML：

```
<span class="label">E-mail:</span><input type="email"></input><br>
<span class="label">Password:</span><input type="text"></input> 
```

你会得到你想要的布局。

* * *

要在 IE7 支持下执行此操作，请将上面的 CSS 更改为：

```
.label {
    display: block;
    width: 100px;
    float: left;
    clear: left;
} 
```

然后，将此行添加到已显示的行下方：

```
<div style="clear: left"></div> 
```

使用 IE7 兼容设置的示例：http: [//jsfiddle.net/bbXXp/](http://jsfiddle.net/bbXXp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-21T06:53:05.083

真的。我正在艰难地学习它。我使用表格进行对齐，现在，某些对齐在较小的屏幕（例如手机、平板电脑等）中变得奇怪。因此，我切换到 div。首选使用`<div style="display:inline-block">...</div>`，如果屏幕较小，它将自动对齐。因此，我的建议是**Table 应该只用于真正的表格，而不是用于对齐正文中的控件。** |

# java - 使用 Ecf-bittorent 下载种子时出现 NegativeArraySizeException

> ID：11021570
> 
> 赞同：1
> 
> 时间：2012-06-13T18:59:19.783
> 
> 标签：java, bittorrent

我正在尝试通过 Ecf Bittorent API 下载 torrent，但每个运行的线程都有 NegativeArraySizeExceptions。

我的代码：

```
package com.djoxx.freakzlauncher;

import java.io.File;
import java.io.IOException;
import java.util.Timer;
import java.util.TimerTask;

import org.eclipse.bittorrent.ITorrentStateListener;
import org.eclipse.bittorrent.Torrent;
import org.eclipse.bittorrent.TorrentConfiguration;
import org.eclipse.bittorrent.TorrentConfiguration.IDebugListener;
import org.eclipse.bittorrent.TorrentFactory;
import org.eclipse.bittorrent.TorrentFile;
import org.eclipse.bittorrent.TorrentServer;
import org.eclipse.bittorrent.internal.net.TorrentManager;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

        try {
            ITorrentStateListener stateListener = 
                new ITorrentStateListener() {
            public void stateChanged(int state) {
                switch (state) {
                    case ITorrentStateListener.STARTED:
                        System.out.println("The torrent set-up is starting...");
                    break;
                    case ITorrentStateListener.EXCHANGING:
                        System.out.println("Exchanging pieces with peers...");
                    break;
                    case ITorrentStateListener.STOPPED:
                        System.out.println("The exchanging has stopped...");
                    break;
                    case ITorrentStateListener.FINISHED:
                        System.out.println("The download is now complete...");
                    break;
                }
            }
        };

        File confPath = new File("F:/torrent/");

        if(!confPath.exists())confPath.createNewFile();
            TorrentConfiguration.setConfigurationPath(confPath);
        TorrentConfiguration.setDebugListener(new IDebugListener() {

            @Override
            public void print(String message) {
                System.out.println(message);
            }
        });

        TorrentManager.setStatePath(new File("F:/torrent/"));
        TorrentFile tf = 
            new TorrentFile(new File("C:/Users/Josselin/Desktop/torrent.torrent"));
        tf.setTargetFile(new File("F:/torrent/"));
        final Torrent torrent = TorrentFactory.createTorrent(tf);
        torrent.addTorrentStateListener(stateListener);
        torrent.start();

        /*Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                try {
                torrent.stop();
                } 

                catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }, (long)10000);*/
        } 

        catch (IllegalArgumentException | IllegalStateException | IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

我真的不知道我是如何得到这个异常的，但我认为它可能来自我的互联网连接......

有什么线索吗？

编辑：如果重要的话，我正在使用 JRE 7

Stacktrace（它很大）：

```
The torrent set-up is starting...
Exchanging pieces with peers...
Exception in thread "Thread-28" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-7" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-23" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-5" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-19" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-27" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-12" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-8" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-24" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-25" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-26" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-38" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-39" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-18" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-29" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-21" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-36" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-34" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-48" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-41" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-42" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-45" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-47" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-17" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-49" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.query(PeerConnection.java:478)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:357)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-20" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-40" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-10" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-2" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-35" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-43" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-6" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-13" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-30" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-15" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-9" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.query(PeerConnection.java:478)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:357)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-37" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:328)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242)
Exception in thread "Thread-3" java.lang.NegativeArraySizeException
    at org.eclipse.bittorrent.internal.net.PeerConnection.processBitfield(PeerConnection.java:756)
    at org.eclipse.bittorrent.internal.net.PeerConnection.query(PeerConnection.java:478)
    at org.eclipse.bittorrent.internal.net.PeerConnection.call(PeerConnection.java:357)
    at org.eclipse.bittorrent.internal.net.PeerConnection.connect(PeerConnection.java:230)
    at org.eclipse.bittorrent.internal.net.PeerConnection.run(PeerConnection.java:1242) 
```

# solr - 如何在每个关键字单独加权的情况下进行 Solr 搜索？

> ID：11021573
> 
> 赞同：0
> 
> 时间：2012-06-13T18:59:25.560
> 
> 标签：solr

我了解您如何使用查询函数对正在搜索的不同字段应用不同的权重，但是 Solr 中有没有一种方法可以对单独搜索的各个关键字进行加权，以便分数可以合并权重并基于此对我的结果进行排名？

想象一下搜索：

```
lebron james basketball heat 
```

其中`lebron`和`james`的权重为 1.0，`basketball`权重为 0.9，`heat`权重为 0.5。

如果标准 Solr 没有内置方法，您能否指出我编写插件的正确方向，我可以在其中构建此功能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:15:01.373

您可以像这样对查询的每个部分进行提升：

```
q=(lebron james)^100 (basketball)^90 (heat)^50 
```

# php - 如何使 apache 错误日志条目更长

> ID：11021575
> 
> 赞同：9
> 
> 时间：2012-06-13T18:59:40.057
> 
> 标签：php, apache, stack-trace, error-logging, error-log

我正在使用 php 的“error_log()”向 apache 错误日志发送一些相当长的堆栈跟踪，并且条目被截断。我还没有找到使条目更长的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T19:15:44.523

通过 error_log() 的错误消息的最大长度的默认限制是 1024 字节。

详细信息有[http://www.php.net/manual/en/errorfunc.configuration.php#ini.log-errors-max-len](http://www.php.net/manual/en/errorfunc.configuration.php#ini.log-errors-max-len)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-07T15:04:16.080

正如 Leopoldo[所说](https://stackoverflow.com/a/41555768/1571839)，在这种情况下设置`log_errors_max_len`似乎毫无用处，PHP 手册清楚地说明了这一点。

到目前为止，我能找到的唯一解决方案是使用：

```
error_log("Long error message...", 3, CUSTOM_LOG_FILE); 
```

的第二个参数`error_log()`允许您将消息重定向到自定义文件。因此，最后一个参数应该是自定义日志文件的路径。

这样我就会收到完整的错误消息，而且对某人来说可能更重要的是，非 ASCII 字符在那里清晰可读（虽然不确定，可能是我的错，但是当我用标准日志文件记录它们时 - 我得到了之类的东西`\xd0\xbf`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-09T19:48:35.947

[PHP 手册](https://secure.php.net/manual/en/errorfunc.configuration.php#ini.log-errors-max-len)介绍了`log_errors_max_len`php.ini*中*的设置：

> 以字节为单位设置 log_errors 的最大长度。(...) 默认值为 1024，0 允许根本不应用任何最大长度。

有些人建议您可以更改它，例如：

```
ini_set("log_errors_max_len", 2048); 
```

但手册补充说：

> 此长度应用于记录的错误、显示的错误以及 $php_errormsg，**但不适用于显式调用的函数，例如 error_log()**。

我正在努力寻找解决方案。如果我这样做会编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T21:48:09.050

阅读上面的问题让我想知道问题是否在 Apache 内部。是的，在 PHP for Apache 中发生的截断甚至允许超过 10,000 个字符。这是一个评估 Apache 将长错误消息发布到其日志中的能力的 Perl 脚本：

```
#!/usr/bin/perl -w
#
# Test error log length limitations
# Result: no limitation
# 
#

use strict;
use CGI;

my $query = CGI->new;
print $query->header;

print "<html><body>You have reached "
    ."cgi-bin/admin/test_error_log.pl"
    ."</body></html>\n";
print STDERR "This is an error message from $0\n";
print STDERR "
[Above should be a blank line] here is a multiline error message
here is the third and final line of it\n";
print STDERR 'abcde' x 200;   #1,000 characters
print STDERR "\nAbove is 1,000 characters of output of 'abcde'\n";
print STDERR 'vwxyz' x 2000;  #10,000 characters
print STDERR "\nAbove is 10,000 characters of output of 'vwxyz'\n"; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-13T19:13:59.753

```
ErrorLog "|bin/rotatelogs /var/logs/errorlog.%Y-%m-%d-%H_%M_%S 5M" 
```

此配置将在错误日志文件大小达到 5 兆字节时轮换它，并且日志文件名称的后缀将以 errorlog.YYYY-mm-dd-HH_MM_SS 形式创建。

有关更多信息，请阅读 apache.org [Link Here的官方文档](http://httpd.apache.org/docs/2.2/programs/rotatelogs.html)

# javascript - IOS 上的 Safari 生成“ReferenceError: Ca ni n't find variable:”

> ID：11021576
> 
> 赞同：3
> 
> 时间：2012-06-13T18:59:44.493
> 
> 标签：javascript, ios, safari

以下代码适用于所有浏览器，包括 Mac 上的 Safari，但 iPhone 上的 Safari 除外。

我有一个可能正在运行的计时器对象，其定义如下：

```
//delay background change until animation is finished
lastTimer = setTimeout(function () {
  $('#' + targetDiv).removeClass('open');
}, 150); 
```

稍后，我需要检查计时器是否正在运行，如果是，请取消它。这是我正在使用的代码：

```
if (lastTimer != null) { clearTimeout(lastTimer); } 
```

这是 IOS Safari 生成 JavaScript 错误的地方：

> “ReferenceError：找不到变量：lastTimer”。

关于为什么检查 null 不能防止错误的任何想法，就像其他浏览器似乎一样？

以下是回答以下回复的两个相关函数的完整代码：（使用解决方案编辑）

```
// Class for handling the animations for the drop down menus
var dropDownMenu = {
lastTimer: null,
openMenu: function (targetDiv) {
    if (targetDiv != null) {
        var targetHeight = $('#' + targetDiv).height();
        $('#' + targetDiv).stop(true); //stop an previous animations and clear queue
        if (this.lastTimer != null) { clearTimeout(this.lastTimer); } //stop possible pending timer to prevent background change
        console.log("testing b");
        $('#mainNavigation #dropDownMenu ul').removeClass('open'); // make sure all closed menus show corrent bgd
        $('#' + targetDiv).animate({
            bottom: -(targetHeight + 30)
        }, 200, 'swing');
        $('#' + targetDiv).addClass('open');
    }

},
closeMenu: function (targetDiv) {
    if (targetDiv != null) {
        $('#' + targetDiv).stop(true); //stop an previous animations and clear queue
        $('#' + targetDiv).animate({
            bottom: 0
        }, 200, 'swing');
        //delay background change until animation is finished
        this.lastTimer = setTimeout(function () {
            $('#' + targetDiv).removeClass('open');
        }, 150);
    }
}
} 
```

当 iOS 中发生错误时，执行停止并且我的测试`console.log`之后立即不会执行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T21:04:55.653

我想插话解释一下。使用简单检查检查未定义时，Mobile Safari 的宽容度较低，

```
if variable 
```

当您遇到这样的情况时，请使用，

```
if typeof variable === "undefined" 
```

将变量附加到“this”是这里的一种解决方案，但它只是利用了definedVariable.undefinedProperty 返回未定义的事实，而直接引用未定义的变量会在某些运行时环境中导致引用错误。

如果没有必要，我建议不要养成依附于“这个”的习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:41:03.233

您的问题似乎是在IOS上，`openMenu`首先被调用。

这意味着您正在尝试获取未声明变量的值，从而导致`ReferenceError`.

奇怪的是，您可以*分配*给未声明的变量，这隐含地使其成为全局变量。因此，如果`closeMenu`首先调用，则首先进行赋值，从而隐式声明变量。

正确的解决方案是始终在使用变量之前声明它们。

```
var lastTimer; 
```

但事实证明，您更喜欢在当前对象上使用属性而不是变量。因此，解决方案是访问方法中的属性......

```
this.lastTimer 
```

`ReferenceError`即使未声明该属性，这也永远不会抛出 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-30T13:53:54.460

我认为还有一个潜在的问题需要说明。iOS* 上的 Safari 可以非常积极地缓存而不是重新加载代码的干净副本。

例如，如果您在没有定义变量的情况下执行了一个版本的代码，然后修复了代码，但重新加载时错误继续显示（即使您关闭浏览器/重新启动手机）

要解决此问题，请点击并按住（又名长按）地址栏中的重新加载图标，然后会弹出一个菜单，其中包含 2 个选项**Request Desktop Site**和**Reload without Content Blockers**。选择其中任何一个都会导致所有内容的***真正***重新加载......这解决了任何缓存错误代码的问题。

*不仅仅是Safari。iOS 上的 Chrome（基于 Apple 的 WebKit 版本）可能会出现同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T19:29:46.453

您的代码中有一个全局变量。不声明 var 使其成为全局变量。

尝试改变：

```
if (lastTimer != null) 
```

到

```
if (typeof lastTimer !=="undefined" && lastTimer) 
```

如果你坚持它是全球性的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T11:00:15.603

就我而言，Safari 13 不适用于 ES6，`const`因此我需要将其替换为`var`

# php - 如何按原样存储xml文件特殊字符值？

> ID：11021577
> 
> 赞同：1
> 
> 时间：2012-06-13T18:59:54.673
> 
> 标签：php, xml

我正在使用我的 xml 文件来存储特殊字符。

这是我的原始文件

```
<root>
  <popups>
        <popup id="1">
            <text1>
                <![CDATA[dynamic text popup 2a]]>
            </text1>
            <text2>
                <![CDATA[dynamic text popup 2b]]>
            </text2>
         </popup>
     </popups>
</root> 
```

现在，当我使用 php 保存特殊字符时，例如，它变成了这样

```
<root>
    <popups>
        <popup id="1">
            <text1>&lt;![CDATA[Hello world]]&gt;</text1>
            <text2>&lt;![CDATA[asassa]]&gt;</text2>
        </popup>
    </popups>
</root> 
```

我使用了以下代码：

```
$this->xmlDocument = simplexml_load_file("xml/conf.xml");
    $pages_node = $this->xmlDocument->xpath("/root/popups/popup[@id=1]");

    $name = $_POST['popup-name'];
    $editor1 = trim(strip_tags($_POST['editor1']));
    $editor2 = trim(strip_tags($_POST['editor2']));
    if (!empty($name)){
        if (!empty($editor1)){ 
            $pages_node[0]->text1 = "<![CDATA[".$editor1."]]>"; 
        }
        if (!empty($editor2)){ 
            $pages_node[0]->text2 =  "<![CDATA[".$editor2."]]>" ;
        }
        $this->xmlDocument->asXml($this->basePath() . "conf/conf.xml");
    } 
```

如何保存特殊字符而不需要对其进行编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:41:15.343

Simplexml 旨在简单，因此没有这样的选项。`dom_import_simplexml`可以帮助您`domdocument`从 simplexml 对象创建。

您必须创建 DOMDocument 的新实例，然后创建 CDATA 部分并将其放入导入的 DOMElement 节点中。

如果您使用的是 php `DomDocument`，则必须创建[DOMCDATASection](http://php.net/manual/en/domdocument.createcdatasection.php)并将其附加到 text1/text2 节点。

如果没有`text1`and`text2`节点，则必须先创建它们，然后将 cdata 节点附加到它们，最后将它们附加到`popup`：

```
$cdata = $dom->createCDATASection("test");

$text1 = $dom->createElement('text1');
$text1->appendChild($cdata);

$text1 = $dom->createElement('text2');
$text2->appendChild($cdata);

$popupNode->appendChild($text1);
$popupNode->appendChild($text2); 
```

# java - 如何在 if else 循环中对同一数据使用多个条件？- java/安卓

> ID：11021583
> 
> 赞同：9
> 
> 时间：2012-06-13T19:00:38.740
> 
> 标签：java, if-statement, conditional-statements

我有 3*个*输入类型为**数字**的编辑文本和 1 个显示**完成的***按钮*

 **我必须检查在编辑文本中输入的值的两个*条件*

当我单击**完成**按钮时，我应该能够执行以下操作

----首先是检查编辑文本是否为空

```
if ((a.getText().toString().equals("")) || (b.getText().toString().equals("")) || (c.getText().toString().equals("")))
    Toast.makeText(getApplicationContext(), "Don't leave grade points empty",0).show(); 
```

----二是检查输入的值是否在一定范围内

```
if((a1<5 || a1>10)||(b1<5 || b1>10)||(c1<5 || c1>10))
    Toast.makeText(getApplicationContext(), "Range should be between 15 to 25", 0).show(); 
```

a,b,c 和 a1,b1,c1 都表示相同的值，我刚刚将 a,b,c 的值解析为a1,b1,c1中的**int**

----那么在其他部分，如果它们通过上述条件，我应该能够使用这些值。

```
else
{
//do something
} 
```

我的问题是如何使它工作，因为 当所有 3 个*编辑文本*都为空时，我在单击**完成**按钮时遇到**强制关闭错误。**我尝试将它们放入*if、else if 和 else 循环*中，并尝试了*if、if 和 else 循环*。

 *****如果它不满足两个条件然后转到其他部分，我应该如何编码？

帮助 ！！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T19:04:34.260

```
if ((a.getText().toString().equals("")) || (b.getText().toString().equals("")) || (c.getText().toString().equals("")))
    Toast.makeText(getApplicationContext(), "Don't leave grade points empty",0).show();
else {
    //Convert your a/b/c.getText() to a1/b1/c1 now you know they are not empty
    if((a1<5 || a1>10)||(b1<5 || b1>10)||(c1<5 || c1>10))
        Toast.makeText(getApplicationContext(), "Range should be between 15 to 25", 0).show();
    else
    {
    //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:12:28.037

我认为这是因为您正在尝试对为空的变量执行某种检查。你可以试试：

```
if (a.getText() == null || b.getText() == null || c.getText() == null ){
     //Toast code
} else {
    //Convert string to int code
    if ((a1<5 || a1>10) || (b1<5 || b1>10) || (c1<5 || c1>10)){
    //Toast code
    } else {
        //Do something with numbers in the correct range code here
    }
} 
```

查看您的 logcat 输出也将有所帮助。你应该看到一行写着：“Caused by ....”，它会告诉你是什么导致你的力关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:31:39.353

不是 Android 程序员，但如果 x.getText() 返回 null，.toString() 会产生 NullPointerException。创建方法：

```
private static boolean isEmpty(Button button)
{
    if (button != null)
    {
        final String text = button.getText();
        return text != null && text.length() > 0;
    }

    return false;
} 
```

然后：

```
if (isEmpty(a) || isEmpty(b) || isEmpty(c)
    ...... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T19:04:46.100

我认为你只需要做第二个 if 和 else if

```
if ((a.getText().toString().equals("")) || (b.getText().toString().equals("")) || (c.getText().toString().equals("")))
    Toast.makeText(getApplicationContext(), "Don't leave grade points empty",0).show();
else if((a1<5 || a1>10)||(b1<5 || b1>10)||(c1<5 || c1>10))
    Toast.makeText(getApplicationContext(), "Range should be between 15 to 25", 0).show();
else {
    //logic
} 
```

有点奇怪的执行流程，但我认为这会解决你的问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-31T10:21:07.287

这样做，肯定会工作，检查：

```
 if ((a.getText().toString().equals("")) || (b.getText().toString().equals("")) || (c.getText().toString().equals("")))

  Toast.makeText(getApplicationContext(), "Don't leave grade points empty",0).show();

 else{

if((a1<5 || a1>10)||(b1<5 || b1>10)||(c1<5 || c1>10))
    Toast.makeText(getApplicationContext(), "Range should be between 15 to 25", 0).show();
else
{
//do something
}} 
```*******

# arrays - 如何构建从文本文件中收集的名称数组，这些名称对应于从同一文件中收集的链接数组？

> ID：11021587
> 
> 赞同：1
> 
> 时间：2012-06-13T19:00:51.117
> 
> 标签：arrays, parsing, text, hyperlink, names

我需要创建一个名称数组，这些名称对应于我存储在另一个数组中的图像的链接。图像的名称和链接都在同一个文本文件中，并且图像的链接遵循文件中相应的名称。我通过使用以下代码解析文本文件来构建图像链接数组：

```
import re
images = []
with open('html_test.txt') as f:
    for line in f:
        images.extend(re.findall(r'"([^"]*\.(?:jpg|gif)[^"]*)"',line)) 
```

如果每个图像链接只有一个名称，我可以使用类似的方法构建一个名称列表。不幸的是，每个名称后面的图像链接数量是可变的，有些名称后面只有一个图像链接，有些名称后面有很多。

我认为我需要做的是计算每个名称后面有多少个图像链接，然后在名称数组中为每个名称创建重复条目，然后是一个以上的图像。（每个名称的重复名称条目数将等于每个名称后面的图像链接数减去 1。）但是，当我尝试这样做时，我得到的只是整个文本中名称总数的计数文件。有谁知道如何构建一个名称数组，以便为​​每个指向其后的图像文件的链接将每个名称输入到数组中一次？（文本文件中的下一个名称除外）

下面是文本文件的示例：

```
<a href="/admin/user/view/41900" title="example_name_1" rel="41900">
<div class="thumb"><a href="#"><img src="https://jibbertyjob.com/asset/image/resize/2/32/32/1/5d4e6a0fjfe94980ny8en9uf98frnoad1876c00.jpg" width="32" height="32" alt="" /></a></div>
<a href="/admin/user/view/41900" title="example_name_2" rel="41900">
<div class="thumb"><a href="#"><img src="https://jibbertyjob.com/asset/image/resize/2/32/32/1/5d4e6a0fjfe9dfgsdfg9uf98frnoad1876l00.jpg" width="32" height="32" alt="" /></a></div>
<div class="thumb"><a href="#"><img src="https://jibbertyjob.com/asset/image/resize/2/32/32/1/5d4e6a0fjf4567w034098h9h5fg4gr33r3rggr376c09940.jpg" width="32" height="32" alt="" /></a></div> 
```

非常感谢我已经坚持了半天！

# java - 如何从 arrayList 对象中生成所有可能的幂集（或子集）？

> ID：11021594
> 
> 赞同：1
> 
> 时间：2012-06-13T19:01:11.657
> 
> 标签：java, collections, hashmap, subset, powerset

假设我有以下课程：

```
class A {
    String name;
    Double value;
} 
```

以及可能具有的上述类对象的列表：

```
[{f  2.1}, {c  1.1}, {a  0.3}... and so on]
[{n  0.5}, {f  1.9}, {x  0.1}, {a  1.9}, {b  1.1}... and so on]
... and so on 
```

我只想做以下事情：

```
1\. Building power subsets from the internal list items(N.B: skip the single subsets).
2\. Push the subset in another List as an object of the above class A like this:
    a. if f,c is a subset of 1st element then f,c would be the name property of class A
       and the value property will be the minimum of f and c from the list. 
       Like: {f,c  1.1} [ where f,c is a subset and min of 2.1(value of f) 
       and 1.1(value of c) is 1.1]

so, from the above list if I take 1st element the subsets and their values
in the pushing list would be like this(after skipping the single subsets):
[{f,c  1.1}, {c,a  0.3}, {f,a  0.3}, {f,c,a  0.3}]

and for the 2nd element this would be:

[{n,f  0.5}, {f,x  0.1}, {x,a  0.1}, {a,b  1.1}, {n,x  0.1}, {n,a  0.5}, {n,b  0.5},
{f,a  1.9}, {f,b  1.1}, {x,b  0.1}, {n,f,x   0.1}, {n,x,a  0.1}, 
{n,a,b  0.5}, {f,x,a  0.1}, {f,x,b  0.1}, {x,a,b  0.1}, {n,f,x,a  0.1}, 
{n,f,x,b  0.1}, {n,f,a,b  0.5}, {n,x,a,b  0.1}, {f,x,a,b   0.1}, 
{n,f,x,a,b  0.1}] 
```

任何人都可以建议我如何在Java中做到这一点（如果可能的话，使用一些示例代码）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:50:02.277

我假设输出列表的每个元素上的子集的顺序是不相关的。

对于任何显着大小的输入，您的输出将非常大，因此不要尝试将其保存在内存中。您最好将 PowerList 实现为自己的集合。以下草稿仅适用于长度为 31 或更短的输入，并且不会过滤单例或空列表。

```
public class PowerList extends AbstractList< A > {
    private final List< A > laUnderlying;
    public PowerList( List< A > laUnderlying ) {
        this.laUnderlying = laUnderlying;
    }
    @Override
    public A get( int index ) {
        StringBuilder sbLabel;
        A aOut = new A();
        aOut.value = Double.MAX_VALUE;
        int iUnderIndex = 0;
        while ( 0 < index ) {
            while ( 0 == ( index & 1 ) ) {
                ++iUnderIndex;
                index = index >> 1;
            }
            A aComponent = laUnderlying.get( index );
            sbLabel.append( ',' ).append( aComponent.name );
            if ( aComponent.value < aOut.value )
                aOut.value = aComponent.value;
        }
        if ( !sbLabel.isEmpty() )
            aOut.name = sbLabel.substring( 1 );
        return aOut;
    }
    public int size() {
        return 1 << laUnderlying.size();
    }
} 
```

现在你原来的问题减少到

```
List< List< A > > llaOutput;
for ( List< A > laEach : llaInput )
    llaOutput.add( new PowerList( laEach ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:29:43.907

请注意，功率集很快就会变大，因此即使是相当小的输入也会耗尽内存。但是，如果您有内存，则没有其他限制。

```
// As stated.
class A {
    String name;
    double value;

    A(String name, double value) {
        this.name = name;
        this.value = value;
    }
}

// Powerset set.
class ASet {
    final ArrayList<String> names = new ArrayList<String>();
    double value = Double.MAX_VALUE;

    void adjoin(A a) {
        names.add(a.name);
        value = Math.min(value, a.value);
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append('{');
        for (String name : names) {
            sb.append(name);
            sb.append(',');
        }
        sb.append(value);
        sb.append('}');
        return sb.toString();
    }
}

// Make power sets.
class PowerSetFactory {

    // Stack for intermediate results.
    final ArrayDeque<A> stack = new ArrayDeque<A>();

    // Source data.
    ArrayList<A> src;

    // Powerset under construction
    ArrayList<ASet> dst;

    // Recursive powerset calculator
    private void recur(int i) {
        if (i >= src.size()) {
            // Stack is complete. If more than 1 element,
            // add its contents to the result.
            if (stack.size() > 1) {
                ASet set = new ASet();
                for (A a : stack) set.adjoin(a);
                dst.add(set);
            }
        }
        else {
            // Otherwise recur both without and with this element
            // added to the stack.  Clean up the stack before return.
            recur(i + 1);
            stack.offerLast(src.get(i));
            recur(i + 1);
            stack.pollLast();
        }
    }

    // Get a powerset for the givens source data.
    ArrayList<ASet> getPowerSet(ArrayList<A> src) {
        this.src = src;
        this.dst = new ArrayList<ASet>();
        recur(0);
        return dst;
    }

    public void test() {
        ArrayList<A> data = new ArrayList<A>();
        data.add(new A("f", 2.1));
        data.add(new A("c", 1.1));
        data.add(new A("a", 0.3));
        for (ASet set : getPowerSet(data)) {
            System.out.print(set);
        }
        System.out.println();

        data.clear();
        data.add(new A("n", 0.5)); 
        data.add(new A("f",  1.9)); 
        data.add(new A("x",  0.1)); 
        data.add(new A("a",  1.9)); 
        data.add(new A("b",  1.1));
        for (ASet set : getPowerSet(data)) {
            System.out.print(set);
        }
        System.out.println();
    }
} 
```

# c# - 带有组的 ASP.net ListView

> ID：11021598
> 
> 赞同：0
> 
> 时间：2012-06-13T19:01:15.467
> 
> 标签：c#, asp.net, listview

我似乎无法为此找到一个好的答案。我正在尝试设置一个网页以从数据库中获取数据并将其显示为：

**用户名**
1 image1.jpg
图像名

image2.jpg 图像名称
2

**用户名**
2 image3.jpg
imagename3

**用户名**
3 image4.jpg
imagename4

image5.jpg 图像名称
5

image6.jpg
imagename6

有一个用户名，使用该用户名有一个或多个图像和图像名称。并非所有用户名都有相同数量的图像。

我的问题是，最好的方法是什么？我可以使用带有嵌套中继器的中继器控件来完成此操作。它很乱但有效。

根据我的阅读，ListView 应该能够做同样的事情，但更干净。我对 ListView 的问题是我必须设置 GroupItemCount，它不像我需要的那样动态。我想我可以嵌套另一个 ListView，但事实证明它的代码与使用中继器一样多。

这些方法中的一种（中继器或列表视图）是否优于另一种。或者有没有更好的方法来做到这一点，我没有想到？我不认为我正在尝试做的事情与众不同，所以我认为会有更快的方法。对我来说，使用 for 循环在经典 asp 中执行此操作似乎要容易得多。

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:20:40.670

当实例化一定数量 (GroupItemCount) 的 ItemTemplate 时，实例化 GroupTemplate。为集合中的每个对象调用 ItemTemplate，您首先拥有一个用户集合。即使您可以在 ItemDataBound 事件期间更改 GroupItemCount，这也将反映下一组用户的创建方式。直到现在还没有关于图像的内容，所以我可以说你不能使用 ListView 来完成这样的任务。

在主Repeater的ItemTemplate中使用repeater（如果需要，也可以使用ListView）是最好的选择，也很常见，所以你不必担心乱七八糟，其他开发人员会很容易看到你的意图。

# c++ - 我需要清理非指针数据成员吗？

> ID：11021603
> 
> 赞同：3
> 
> 时间：2012-06-13T19:01:44.563
> 
> 标签：c++, destructor

如果我不使用`new`来分配类的数据成员，那么在析构函数中是否还需要进行任何清理？例如，在以下情况下，我需要`delete`向量吗？还是取决于`MyType`？

```
class A {
  A();
  ~A();
  MyType x;
  std::vector<MyType> v;
};
A::A() {
  x = MyType(42);
  v = std::vector<MyType>(5);
}
A::~A() {
  // what goes here?
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T19:05:46.833

要迂腐，**这取决于**是什么`MyType`。如果您有`typedef char* MyType`并且为 分配内存`MyType`，并且希望该内存归对象所有，那么是的，您需要一个析构函数。

否则，您不需要为未使用`new`or分配的任何内容释放内存`malloc`，因此不需要。

**您的班级甚至根本不应该有析构函数。**有一个普遍的共识是你应该只在你真正需要的时候使用析构函数。拥有析构函数还意味着实现赋值运算符和复制构造函数（**三规则**）。如果您不管理任何内存，最好依赖编译器提供的内存 - 即如果您不管理，编译器**将生成**这三个。

此外，您的**构造函数**应如下所示：

```
A::A() : x(42), v(5){
} 
```

否则你的成员将被初始化然后分配给，这是浪费的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T19:03:50.870

您的类不需要显式析构函数。`vector`无论如何都会自动调用 's 的析构函数。而且由于矢量对象本身（与内部的数据相反）不是动态的，因此您不必这样做`delete`。事实上，这将是一个语法错误，因为`v`它不是一个指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:03:38.223

析构函数是自动调用的，所以你不需要这样做。此外，对于指针，请使用[智能指针](https://stackoverflow.com/q/417481/1203803)（例如`std::unique_ptr`）而不是`delete`手动设置它们。

```
class A {
  A();
  ~A();
  MyType x;
  std::vector<MyType> v;
};
A::A() : x(42), v(5) { }
A::~A() {
  // x.~MyType() implicitly called.
  // v.~std::vector<MyType>() implicitly called.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T19:06:08.020

向量在销毁时会自动删除。但是，如果您将指针存储在向量中，例如，如果您说 vector<Foo *> v;，则需要编写代码来删除向量中的指针。避免这种情况的一种方法是使用 vector<std::unique_ptr<Foo>> 或 vector<std::shared_ptr<Foo>>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T19:04:16.987

不，你不必。它们的构造函数将被隐式调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T19:11:55.917

对于*A*类，不，你没有，因为它没有使用*new*或*malloc*分配的任何指针成员。

Beware that if your class/struct *MyType* have any pointers as a member, the destructor of *MyType* is the responsible to free the memory of such pointer, but you don't have to worry with that in class *A*, since when its destructor is called, the destructor of the vector calls the destructor of *MyType*.

# razor - 我如何知道 Razor Html 助手生成的 id 是什么？

> ID：11021604
> 
> 赞同：2
> 
> 时间：2012-06-13T19:01:52.577
> 
> 标签：razor, html-helper, id-generation

在 Razor 视图中，假设我有这样的东西：

```
@Html.HiddenFor(model => model.Värde) 
```

在这里，“Värde”是瑞典语的“价值”。注意它包含“ä”。为此，Razor 将生成如下 HTML：

```
<input id="V_rde" name="Värde" type="hidden" /> 
```

请注意，元素的 id 是“V_rde”，而不是“Värde”。

那么，如何使用 getElementById 从 JavaScript 访问此元素？我知道我可以使用“V_rde”，但我想要一些通用的东西，而不仅仅是“Värde”，像这样的东西（意思是 htmlAttributes 参数）：

```
@Html.Whatever(..., new { onclick = "JavaScript:alert(document.getElementById('@Html.IdFor("Värde")'));" }) 
```

我希望 @Html.IdFor(string name) 转换名称，就像在标签、复选框、编辑框等的 @Html 帮助器中转换的 id 一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-17T10:05:35.337

同时`@Html.IdFor(x=>x.YourProperty)`进入MVC，我认为这是现在简单的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:14:52.407

这行得通吗？

```
@HtmlHelper.GenerateIdFromName("originalName") 
```

如果是这样，您可以轻松地制作自己的`HtmlHelper`扩展，该扩展采用 lambda 表达式。

# msbuild - 为什么 TeamCity 在通过 MSBuild 执行构建时会忽略我的 Web 项目的包/发布设置？

> ID：11021605
> 
> 赞同：0
> 
> 时间：2012-06-13T19:01:59.827
> 
> 标签：msbuild, teamcity, msdeploy, web-application-project, teamcity-7.0

当我运行以下 msbuild 命令时：

```
msbuild /t:Package /p:Configuration=Release;PackageLocation={MY PACKAGE LOCATION} 
```

我的包创建正确，我的 SetParameters 文件的内容如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<parameters>
  <setParameter name="IIS Web Application Name" value="Default Web Site/SiteNameIWant" />
</parameters> 
```

“SiteNameIWant”直接来自我的 Web 应用程序项目文件：

```
<DeployIisAppPath>Default Web Site/SiteNameIWant</DeployIisAppPath> 
```

我以这种方式为调试和发布配置配置了我的 Web 应用程序项目文件。

但是，当我通过 TeamCity 运行构建时，我的站点名称显示为“SiteNameIWant.csproj_deploy”。我通过显式添加构建参数找到了一种解决方法：

```
system.DeployIisAppPath=Default Web Site/SiteNameIWant 
```

但是，我对此解决方案不满意，因为 TeamCity 忽略了我的 Web 应用程序项目中的值（按配置设置）。

**如何让 TeamCity 尊重我的 Web 应用程序项目文件的设置？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:26:01.607

这总是显而易见的，不是吗？毫不奇怪，**问题出在我身上**，而不是 TeamCity。:D

我意识到正在发生的事情是我为`DeployIisAppPath`设置应用到我的 Web 应用程序项目文件的更改未提交到源代码管理。因此，在`msbuild`本地运行可以正常工作，但 TeamCity 仍在获取尚未在源代码管理中更新的旧值。嗬！

# windows-phone-7 - 绑定类属性

> ID：11021607
> 
> 赞同：0
> 
> 时间：2012-06-13T19:02:03.217
> 
> 标签：windows-phone-7

我想绑定我的类属性之一。我在`FileList.DataContext = fileManager;` 下面做，我把代码隐藏了。

C＃

```
 public class File : ListBoxItem
    {
        private string name;
        public string Name
        {
            get { return this.name; }
            set { this.name = value; }
        }
        private string id;
        public string Id
        {
            get { return this.id; }
            set { this.id = value; }
        }
    }

public class FilesManager
    {
        public ObservableCollection<File> Files { get; set; }

        public FilesManager()
        {
            Files = new ObservableCollection<File>();
        }
    } 
```

XAML

```
<ListBox Name="FileList" Width="auto" Height="578" ItemsSource="{Binding Files, Mode=OneWay}" Tap="FileList_Tap" FontSize="36" Margin="0,14,0,15">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
          </ListBox.ItemTemplate>
</ListBox> 
```

当应用程序启动时，数据被分配，之后我得到 Application_UnhandledException，之前绑定很好。我做错了什么？

更新

```
// Code to execute on Unhandled Exceptions
        private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
        {
            if (System.Diagnostics.Debugger.IsAttached)
            {
                // An unhandled exception has occurred; break into the debugger
                System.Diagnostics.Debugger.Break();
            }
        }//here debugger stops. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:05:15.563

您不需要从 ListBoxItem 继承您的类，因为您使用 ItemTemplate。

使用简单的类并将其绑定到您的列表。

```
public class File 
    {
        private string name;
        public string Name
        {
            get { return this.name; }
            set { this.name = value; }
        }
        private string id;
        public string Id
        {
            get { return this.id; }
            set { this.id = value; }
        }
    } 
```

# debugging - 在 C++ 文件流中将十六进制字符串写入二进制文件

> ID：11021608
> 
> 赞同：-1
> 
> 时间：2012-06-13T19:02:03.980
> 
> 标签：debugging, hex, filestream, binaryfiles

例如，如果我想使用 c++ 将数字（假设它是十六进制格式）写入二进制文件，

```
#include <fstream>
#include <iostream>

using namespace std;

int main()
{
    int num = 0xabcd;
    ofstream outfile("tmp.bin", ios::out | ios::binary);
    outfile.seekp(0x8000, ios_base::beg);
    outfile.write(num, sizeof(num));
    return 0;
} 
```

这个程序不会运行，因为`ostream& write()`它只`char* chars[]`作为它的第一个参数，而我需要将一个`int`类型号写入`num`二进制文件“tmp.bin”。

期望的结果是，当我以十六进制模式查看“tmp.bin”时，我可以看到`ab cd`address `0x8000`。我想知道这是否可能，有人可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:08:11.720

你可以把你`int`的`char*`

```
outfile.write((char*)&num, sizeof(num)); 
```

# google-bigquery - Big Query 作业因“遇到错误字符 (ASCII 0)”而失败。

> ID：11021610
> 
> 赞同：3
> 
> 时间：2012-06-13T19:02:26.580
> 
> 标签：google-bigquery

我有一份因错误而失败的工作

> 行：14222274 / 字段：1，遇到错误字符 (ASCII 0)。其余文件未处理。

数据已压缩，我已验证文件中不存在 ASCII 0 字符。文件中只有 14222273 行，因此错误消息中打印的行号是文件末尾之后的一行。我有来自同一数据集的其他块已成功上传，所以我怀疑这要么是 BQ 错误，要么错误消息并不表示潜在问题。任何解决此问题的帮助将不胜感激。谢谢。

```
>>> data = open("data.csv").read()
>>> chr(0) in data
False
>>> data[-1]
'\n' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-09T16:14:25.977

我遇到了类似的问题，试图在 BigQuery 中加载一个压缩文件（将其保存在 Google Cloud Storage 中）。这些是日志：

```
文件：0 / 偏移量：4563403089 / 行：328480 / 字段：21：遇到错误字符（ASCII 0）：字段开头为：（错误代码：无效）
文件：0 / 偏移量：4563403089 / 行：328485 / 字段：21：遇到错误字符（ASCII 0）：字段开头为：（错误代码：无效）
文件：0 / 偏移量：4563403089 / 行：328490 / 字段：21：遇到错误字符（ASCII 0）：字段开头为：（错误代码：无效）
文件：0 / 偏移量：4563403089 / 行：328511 / 字段：21：遇到错误字符（ASCII 0）：字段开头为：（错误代码：无效）
文件：0 / 偏移量：4563403089 / 行：328517 / 字段：21：遇到错误字符（ASCII 0）：字段开头为：（错误代码：无效）

```

为了解决这个问题，我所做的是从压缩文件中删除 ASCII 0 字符。为此，我从安装了 sdk 的 Compute Engine 实例中执行了以下命令：

```
gsutil cp gs://bucket_987234/compress_file.gz - | 枪弹 | tr -d '\000' | gsutil cp - gs://bucket_987234/uncompress_and_clean_file
```

通过使用管道，我避免了将所有存储都放在硬盘上（1G 压缩 + 52G 解压缩）。第一个程序从 Storage 中获取压缩文件，第二个程序将其解压缩，第三个程序删除 ASCII 0 字符，第四个程序将结果上传到 Storage。

当我再次上传到存储时，我不会压缩结果，因为 BigQuery 加载未压缩文件的速度更快。之后，我可以毫无问题地在 BigQuery 上加载数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:38:20.617

当你压缩你使用什么实用程序？

当我以 ZIP 格式（在 Windows 中）压缩我的 csv 文件时，我看到了这个问题。Google BigQuery 似乎只接受 gzip 格式。

确保使用 gzip 压缩 CSV。如果你在 windows [7-zip](http://www.7-zip.org/)是一个很棒的实用程序，它允许你在 gzip 中压缩。

在 Unix 中 gzip 是标准的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T09:49:54.707

> **遇到错误字符 (ASCII 0)。其余文件未处理。**

清楚地说明您那里有一个无法解码的 UTF-16 字符。BigQuery 服务仅支持 UTF-8 和 latin1 文本编码。因此，该文件应该是 UTF-8 编码的。

> 文件中只有 14222273 行，因此错误消息中打印的行号是文件末尾之后的一行。

可能您在文件末尾有一个 UTF-16 编码的制表符，无法解码。

* * *

**解决方案**：在命令中使用`-a`or`--ascii`标志。`gzip`它会被解码`bigquery`。

# jquery - jquery 切换动画

> ID：11021615
> 
> 赞同：0
> 
> 时间：2012-06-13T19:02:56.767
> 
> 标签：jquery, position, jquery-animate, toggle

我有这种情况：

```
$("#button").toggle(function(){
    $("#window").animate({top:'0%'},1000);
},function(){
    $("#window").animate({top:'-100%'},1000);
}); 
```

但我需要将其更改为与`.click`事件一起使用，如下所示：

```
$("#button").click(function(){ 
```

如果`#window`位置是`top:'0%'`，动画到`top:'-100%'`

如果`#window`位置是`top:-100%'`，动画到`top:'0%'`

并且当用户多次单击时`#button`，动画不会重复

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:11:22.103

这段代码应该可以工作......

```
var i = 0;
$("#button").on('click', function(){
    if(i == 0) {
        $("#window").stop().animate({top:'0%'},1000);
        i = 1;
    } else {
        $("#window").stop().animate({top:'-100%'},1000);
        i = 0;
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:15:27.297

这应该有效！

```
$("#button").click(function(){
     if($("#window").css('top') == '0%'){
       $("#window").stop().animate({top:'-100%'},1000);
     };
     if($("#window").css('top') == '-100%'){
        $("#window").stop().animate({top:'0%'},1000);
     };
 });

```

确保你的 CSS 有这个：

```
​#window{
   position: absolute;
   top:0%;   /* -100% as the default case may be */
}​ 
```

在这里工作小提琴：http: [//jsfiddle.net/dNPWg/](http://jsfiddle.net/dNPWg/) 点击动画的红色条（将 -100% 更改为 100% 以便更好地了解 .stop() 是否工作）

# tags - 将 tld 文件 META-INF 文件夹放在 m2e 项目的 jar 中

> ID：11021622
> 
> 赞同：1
> 
> 时间：2012-06-13T19:03:28.297
> 
> 标签：tags, m2eclipse, tld, meta-inf

对于使用 m2eclipse 插件开发的项目，我必须在 jar 的 META-INF 文件夹中放置一个自定义 tld 文件。谁能帮我？

# python - 使用 Numpy 插入一个矩阵作为另一个矩阵的元素

> ID：11021623
> 
> 赞同：0
> 
> 时间：2012-06-13T19:03:30.217
> 
> 标签：python, matrix, numpy, mapping

我正在使用 Numpy 并且有一个 7x12x12 矩阵，我想将其值填充为 12x12 块，7 个不同的时间。假设我有这些 12x12 矩阵：

```
first_Matrix
second_Matrix
third_Matrix
... (etc)
seventh_Matrix = first_Matrix + second_Matrix + third_Matrix... 
```

我想添加到：

```
grand_Matrix 
```

我怎样才能做到这一点？我认为有比将坐标从一个矩阵映射到下一个矩阵的循环更好的方法，如果没有，有人可以写出将 first_Matrix 映射到 grand_Matrix 的第一个 12x12 元素的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:05:18.267

```
grand_Matrix[0,...] = first_Matrix
grand_Matrix[1,...] = second_Matrix 
```

等等。

无论如何，正如@Lattyware 评论的那样，为如此多的同类对象提供额外的名称是一个糟糕的设计。

如果您有 12x12 矩阵的列表：

```
grand_Matrix = np.vstack(m[None,...] for m in matrices) 
```

`None`为每个矩阵添加一个新维度并将它们沿该维度堆叠。

# xcode - 在 Xcode 中为预先存在的项目设置 git 存储库

> ID：11021626
> 
> 赞同：29
> 
> 时间：2012-06-13T19:03:42.893
> 
> 标签：xcode, git, version-control

> **可能重复：**
> [将 Git 与现有 Xcode 项目一起使用](https://stackoverflow.com/questions/5383609/using-git-with-an-existing-xcode-project)

创建项目后在 Xcode 中设置 git 存储库。（即创建项目时没有创建git仓库）

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-04T20:54:19.020

最后一个答案工作正常，但相当冗长且与较新的 Xcode 版本不兼容。我将尝试更好地重申它：

1.  选择您的 git 存储库文件夹（目录），通常这将是包含 Xcode 工作区或项目的目录。
2.  在该目录中，创建一个名为“.gitignore”的文本文件，并将以下内容放入其中：

    ```
    UserInterfaceState.xcuserstate
    build
    *.pbxuser
    *.perspectivev3
    *.mode1v3
    *~
    *~.nib
    *~.xib 
    .DS_Store 
    xcuserdata/ 
    ```

3.  退出 Xcode（如果它是打开的）
4.  在终端中执行以下操作：

    ```
    \> cd <path of the repository folder>
    \> git init
    \> git add .
    \> git commit -m "Initial commit - or whatever text you'd prefer" 
    ```

你完成了！在 Xcode 中打开工作区/项目并在管理器窗口中检查您的存储库。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-13T19:03:43.470

1.  退出 Xcode（不确定这是否有必要，但我这样做以防万一）
2.  运行终端
3.  进入项目文件夹目录
4.  寻找 。
5.  找到显示“UserInterfaceState.xcuserstate”的文件并将整个文件名复制到 ./
6.  echo "在此处粘贴 UserInterfaceState.xcuserstate 文件" >.gitignore
7.  猫.gitignore
8.  混帐初始化
9.  混帐添加。
10.  git commit -m "你可以像现在一样在源代码控制下输入评论"

您现在有一个存储库，并且您的项目处于源代码控制之下

# sqlite - 在 Twisted 中使用 SQLite 中的 id 进行增量选择

> ID：11021633
> 
> 赞同：0
> 
> 时间：2012-06-13T19:04:02.620
> 
> 标签：sqlite, twisted

我试图从 SQLite 中的表中为每次调用该函数一次仅选择一行数据，并且我希望该行在每次调用时递增（self.count 在其他地方初始化，'line' 在这里无关紧要）我我在 Twisted 中使用 adbapi 连接池连接到数据库。这是我尝试过的代码：

```
def queryBTData4(self,line):
    self.count=self.count+1
    uuId=self.count
    query="SELECT co2_data, patient_Id FROM btdata4 WHERE uid=:uid",{"uid": uuId}          
    d = self.dbpool.runQuery(query)
    return d 
```

如果我只是在数据库中设置 uid=1 或任何其他数字（我在创建数据库时使用了 uid 的自动增量），则此代码有效，但是当我尝试为 uid 分配一个值（即通过 uuId 的 self.count）时，它报告说运算符必须是字符串或 unicode。（我都尝试过，但似乎没有帮助）但是，我知道当我使用游标和执行命令时，上面的查询语句在以前的程序中工作得很好，但我不能看看为什么它在这里不起作用。我尝试了各种组合并搜索了解决方案，但还没有找到任何可行的方法。（我也尝试过带括号和其他形式的语句）

感谢您的任何帮助或建议。

这是整个代码：

```
from twisted.internet import protocol, reactor
from twisted.protocols import basic
from twisted.enterprise import adbapi
import sqlite3, time

class ServerProtocol(basic.LineReceiver):
    def __init__(self):
        self.conn = sqlite3.connect('biomed2.db',check_same_thread=False)
        self.dbpool =  adbapi.ConnectionPool("sqlite3" , 'biomed2.db',  check_same_thread=False)

    def connectionMade(self):
        self.sendLine("conn made")
        factory = protocol.ClientFactory()
        factory.protocol = ClientProtocol
        factory.originator = self
        reactor.connectTCP('localhost', 1234, factory)

    def lineReceived(self, line):
        self._received = line
        self.insertBTData4(self._received)
        self.sendLine("line recvd") 

    def forwardLine(self, recipient):
        recipient.sendLine(self._received)      

    def insertBTData4(self,data):
        print "data in insert is",data
        chx=data
        PID=2
        device_ID=5
        query="INSERT INTO btdata4(co2_data,patient_Id, sensor_Id) VALUES ('%s','%s','%s')" % (chx, PID, device_ID) 
        dF = self.dbpool.runQuery(query)
        return dF

class ClientProtocol(basic.LineReceiver):
    def __init__(self):
        self.conn = sqlite3.connect('biomed2.db',check_same_thread=False)
        self.dbpool =  adbapi.ConnectionPool("sqlite3" , 'biomed2.db',  check_same_thread=False)
        self.count=0

    def connectionMade(self):
        print "server-client made connection with client"
        self.factory.originator.forwardLine(self)
        #self.transport.loseConnection()

    def lineReceived(self, line):
        d=self.queryBTData4(self)
        d.addCallbacks(self.sendData,self.printError )

    def queryBTData4(self,line):
        self.count=self.count+1
        query=("SELECT co2_data, patient_Id FROM btdata4 WHERE uid=:uid",{"uid": uuId})          
        dF = self.dbpool.runQuery(query)
        return dF

    def sendData(self,line):
        data=str(line)
        self.sendLine(data) 

    def printError(self,error):
        print "Got Error: %r" % error
        error.printTraceback()

def main():
    factory = protocol.ServerFactory()
    factory.protocol = ServerProtocol
    reactor.listenTCP(4321, factory)
    reactor.run()

if __name__ == '__main__':
    main() 
```

数据库是在另一个程序中创建的，因此：

```
import sqlite3, time, string
conn = sqlite3.connect('biomed2.db')

c = conn.cursor()
c.execute('''CREATE TABLE btdata4
             (uid INTEGER PRIMARY KEY, co2_data integer, patient_Id integer, sensor_Id   integer)''') 
```

主程序将数据放入服务器套接字并插入数据库。在客户端套接字端，一次一行地从数据库中删除数据并发送到外部服务器。如果需要，该程序还可以将数据从服务器端发送到客户端，但我目前不这样做。

在 queryBTData() 中，每次调用该函数时，计数都会增加，然后我将该值分配给 uuId，然后将其传递给查询。我有这个查询语句在我不使用 adbapi 的程序中工作，但它似乎在这里不起作用。我希望这足够清楚，但如果没有，请告诉我，我会再试一次。

编辑：

我已修改程序以一次从数据库中获取一行（请参阅下面的 queryBTData()），但遇到了另一个问题。

```
def queryBTData4(self,line):
    self.count=self.count+1
    xuId= self.count
    #xuId=10
    return self.dbpool.runQuery("SELECT co2_data FROM btdata4 WHERE uid = ?",xuId)
    #return self.dbpool.runQuery("SELECT co2_data FROM btdata4 WHERE uid = 10") 
```

当计数达到 10 时，我收到一个错误（我将在下面发布），指出：“提供的绑定数量不正确。当前语句使用 1，提供了 2 个”

我尝试将 xuId 设置为 10（请参阅注释掉的 xuId=10 行），但我仍然遇到相同的错误。但是，如果我切换返回语句（以注释掉返回），我确实得到了正确的行而没有错误。我已经尝试将 xuId 转换为 unicode 但这没有区别，我仍然得到同样的错误。基本上，如果我在 return 语句中将 uid 设置为 10 或更多（注释掉 return）它可以工作，但如果我在第一次返回时将 uid 设置为 xuId（即 uid=?,xuId），它仅在 xuId 低于 10 时才有效. 据我所知，API 文档没有给出为什么会发生这种情况的任何线索。（我还禁用了插入 DB 以消除这种情况并检查了 SQLite3_ 限制，即 999）

这是我在使用第一个 return 语句时遇到的错误。

```
Got Error: <twisted.python.failure.Failure <class 'sqlite3.ProgrammingError'>>
Traceback (most recent call last):
File "c:\python26\lib\threading.py", line 504, in __bootstrap
self.__bootstrap_inner()
File "c:\python26\lib\threading.py", line 532, in __bootstrap_inner
self.run()
File "c:\python26\lib\threading.py", line 484, in run
self.__target(*self.__args, **self.__kwargs)
--- <exception caught here> ---
File "c:\python26\lib\site-packages\twisted\python\threadpool.py", line 207, i
n _worker
result = context.call(ctx, function, *args, **kwargs)
File "c:\python26\lib\site-packages\twisted\python\context.py", line 118, in c
allWithContext
return self.currentContext().callWithContext(ctx, func, *args, **kw)
File "c:\python26\lib\site-packages\twisted\python\context.py", line 81, in ca
llWithContext
return func(*args,**kw)
File "c:\python26\lib\site-packages\twisted\enterprise\adbapi.py", line 448, i
n _runInteraction
result = interaction(trans, *args, **kw)
File "c:\python26\lib\site-packages\twisted\enterprise\adbapi.py", line 462, i
n _runQuery
trans.execute(*args, **kw)
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current sta
tement uses 1, and there are 2 supplied. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:04:07.903

考虑[runQuery 的 API 文档](http://twistedmatrix.com/documents/current/api/twisted.enterprise.adbapi.ConnectionPool.html#runQuery)。接下来，考虑这三个函数调用之间的区别：

```
c = a, b
f(a, b)
f((a, b))
f(c) 
```

最后，不要解释错误消息。总是逐字引用它们。尽可能复制/粘贴；当您手动转录它们时记下它们。

# sql - 如何使用 VB.NET “INNER JOIN”来自两个不同数据库的两个不同查询的结果？

> ID：11021634
> 
> 赞同：0
> 
> 时间：2012-06-13T19:04:03.600
> 
> 标签：sql, database, vb.net, dataset

我连接到 SQL Server 数据库并使用以下函数获取结果的 DataSet：

```
Public Function GetDataSQL(ByVal queryString As String, ByVal addParameters As Action(Of SqlParameterCollection)) As DataTable
    Dim result As New DataTable()
    Using cn As New SqlConnection("server=.\sqlexpress;Integrated Security=SSPI; database=Pancakes"), _
    cmd As New SqlCommand(queryString, cn)
        addParameters(cmd.Parameters)
        cn.Open()
        Using rdr = cmd.ExecuteReader()
            result.Load(rdr)
        End Using
    End Using
    Return result
End Function 
```

然后我执行一个几乎相同的函数来获取对 Access 数据库的查询结果。

如何对这两个数据集进行“INNER JOIN”？有一个“合并”方法，但我不认为它会做一个“内部连接”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:08:25.787

您可以`OPENROWSET()`在 SQL Server 中使用将 Access 数据库视为本机数据，并在那里进行内部联接。有关语法详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:09:20.503

使用 LINQ 到数据集。这样，无论 2 个 DataTables 从哪里获取数据 - 您都可以统一加入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:10:45.330

由于您将结果作为 DataTables 带回，因此您需要使用 LINQ to DataSets 之类的东西，或者在 DataSet 中的 DataTables 之间建立关联。如果您想了解 LINQ to DataSets，[请查看 http://www.manning.com/marguerie/](http://www.manning.com/marguerie/)上的免费赠品第 14 章。

# c - 通过随机重命名覆盖 Windows 中的文件失败

> ID：11021639
> 
> 赞同：2
> 
> 时间：2012-06-13T19:04:20.750
> 
> 标签：c, windows, file, edit, overwrite

我有一个文本文件，我想通过将其重写为临时文件然后覆盖原始文件来进行编辑。这段代码没有这样做，因为它被简化了，但它确实包含了我遇到的问题。在 Windows 上，当重命名功能失败时，EXAMPLE.TXT 文件将在看似随机的运行次数后消失。我不知道为什么，但到目前为止它在 Linux 上运行良好。为什么会发生这种情况，我该如何以完全不同的方向解决它，例如从程序中覆盖原始文件而不重命名？

此外，还有什么其他更好的方法存在？此方法在 Windows 上还有其他缺陷，例如程序在调用 remove 之后重命名之前被用户关闭，这在 Linux 上不会出现问题（摆脱 remove 之后）？

```
#include <stdio.h>
#include <assert.h>

int main(int argc, char *argv[]) {
  unsigned int i=0;
  FILE *fileStream, *tempStream;
  char fileName[] = "EXAMPLE.TXT";
  char *tempName = tmpnam(NULL);

  while(1) {
     printf("%u\n",i++);
     assert(fileStream = fopen(fileName, "r+"));
     assert(tempStream = fopen(tempName, "w"));

     fprintf(tempStream,"LINE\n");
     fflush(tempStream); /* fclose alone is enough on linux, but windows will sometimes not fully flush when closing! */

     assert(fclose(tempStream) == 0);
     assert(fclose(fileStream) == 0);
     assert(remove(fileName) == 0); /* windows fails if the file already exists, linux overwrites */
     assert(rename(tempName,fileName) == 0);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T20:49:38.163

这样做确实很可能会引起麻烦。在 Windows 上，您的代码有四种可能的结果：

*   删除很好，重命名工作，没问题
*   删除很好，但另一个进程通过删除共享打开了文件。常见于恶意软件扫描程序和文件内容索引器。这可确保在文件的最后一个句柄关闭时文件实际被删除。问题是，重命名失败，因为文件仍然存在
*   不会因为文件被锁定而删除，您的断言会触发
*   什么都没有发生，因为 assert() 在您构建发布版本时是无操作的。

顺便说一句，最后一个子弹的可能性很大，它肯定解释了可重复的失败。你需要一个更具防御性的策略来处理第二个子弹：

*   删除filename.bak，如果失败则报告错误
*   将fileName重命名为filename.bak，如果失败则报告错误
*   将 tempName 重命名为文件名，如果失败则报告错误并重命名 filename.back
*   删除filename.bak，不报错

这是一种常见的场景，winapi 有一个函数[ReplaceFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365512%28v=vs.85%29.aspx)。请务必使用备份文件选项以获得最大的收益。-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:32:06.797

有时，防病毒软件会在不方便的时候扫描文件，从而导致此类问题。

如果`remove`失败，请尝试休眠一小段时间，然后重试。

# vb.net - 调用函数时未将对象引用设置为对象的实例

> ID：11021646
> 
> 赞同：0
> 
> 时间：2012-06-13T19:04:49.280
> 
> 标签：vb.net

我调用函数 GetDataTable，当它到达返回行时，我收到错误消息：对象引用未设置为对象的实例。

```
Dim DB As New DBConn
Dim gd As New DataAccess.GetData
Dim DT As New DataTable

Dim repotid1 As Decimal = 1150
Dim startdata1 As DateTime = "6/1/2012"
Dim EndDate1 As DateTime = "6/12/2012"
Dim StartDate3 As DateTime = "11/1/2011"
Dim Enddate3 As DateTime = "5/1/2012"

Dim sql1 As String = String.Format("EXEC [dbo].[usp_GetReportData_All] @ReportID=N'{0}', @StartDate=N'{1}' @EndDate=N'{2}', @StartDate2=N'{3}' @EndDate2=N'{4}'", repotid1, startdata1, EndDate1, StartDate3, Enddate3)

DT = DB.GetDataTable(sql1)

Public Class DBConn
Dim gd As New DataAccess.GetData

Public Function GetDataTable(ByVal sql As String) As DataTable

    Dim _appID As String = "IS"
    Dim _transID As String = "MSSQL01"

    Return gd.getDataTable(_appID, _transID, sql) 'I get the error message here

End Function
End Class 
```

更新。我会看看是否可以使用 DataAccess.GetData 代码进行更新。我最初没有把它放在那里，因为我们的商店一直在使用它并且没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:16:00.380

没有看到`gd.getDataTable`里面有什么，我们可以做很多事情来帮助你。你正在编写什么样的应用程序来调用这个函数？您能否在编辑器中的该行上放置一个断点并单步执行以查看错误发生的位置？否则，您可以访问`DataAccess.GetData`代码吗？如果是这样，如果您在不破坏堆栈跟踪的情况下抛出原始异常，您将从中获得更多信息：

**坏的！！！！**

```
Try
    'your code
Catch ex As Exception
    Throw New Exception(ex.Message)
End Try 
```

**好的：**

```
Try
    'your code
Catch ex As Exception
    Throw
End Try 
```

# android - 如何从另一个类调用一个类中存在的函数？

> ID：11021647
> 
> 赞同：1
> 
> 时间：2012-06-13T19:04:57.907
> 
> 标签：android, android-intent

我试图通过创建对象来从另一个类中调用一个类中存在的函数。不知何故，它不起作用。新活动未加载。

我的java代码：

```
public class MessagesActivity extends TabActivity {

    public WorkEntryScreenActivity workEntryObject = new WorkEntryScreenActivity() ;

    public void AddWorkEntryClick(View v) {
        workEntryObject.newWorkEntry();
    }
} 
```

另一类：

```
public class WorkEntryScreenActivity extends Activity {

public void newWorkEntry() {
    try {
        Intent i = new Intent(this, WorkEntryActivity.class);
        i.putExtra("CurDate", mDateDisplay.getText());
        i.putExtra("DD", String.valueOf(mDay));
        i.putExtra("MM", String.valueOf(mMonth));
        i.putExtra("YYYY", String.valueOf(mYear));
        startActivity(i);
        finish();
    } catch (Exception e) {
        System.out.println("Exception" + e.getStackTrace());
        Log.d(TAG, "Exception" + e.getStackTrace());
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:07:15.537

您必须首先创建您的 workEntryObject（它不是 C++）。像这样

```
public WorkEntryScreenActivity workEntryObject=new WorkEntryScreenActivity(); 
```

另外，我强烈推荐你阅读 Android Basics [http://developer.android.com/guide/index.html](http://developer.android.com/guide/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:12:04.550

@biovamp 是正确的。看起来您有一个尝试调用方法的空引用。为了调用非静态方法，您需要该对象的实例。

从您的方法的命名来看，您可能正在尝试在应用程序的另一部分重用您的某些 UI。在 Android 中，实现这一点的方法是通过[Intents](http://developer.android.com/guide/topics/intents/intents-filters.html)和[Activities](http://developer.android.com/guide/topics/fundamentals/activities.html)。如果您不熟悉这些或如何使用它们，我强烈建议您研究它们。

# datagrid - 避免使用 DataGrid 组件 vb6 在 adodc 中首次加载

> ID：11021648
> 
> 赞同：0
> 
> 时间：2012-06-13T19:05:06.067
> 
> 标签：datagrid, vb6

我有一个使用 Data 组件和 DBGrid 制作的应用程序来显示结果，但现在我们想将其更改为使用 Datagrid 和 Adodc 访问 sql 数据库。

这里的问题是，与具有 Data 组件时相比，from 加载速度似乎非常慢。

有一个表单可以避免加载表单时加载Adodc，以后手动做？

# google-app-engine - App Engine 加载请求，即使空闲实例可用

> ID：11021654
> 
> 赞同：3
> 
> 时间：2012-06-13T19:05:29.840
> 
> 标签：google-app-engine, python-2.7

我在 App Engine 上运行了一个简单的应用程序，但我遇到了奇怪的延迟问题。这是一个 Python 2.7 应用程序，加载请求需要 1.5 到 10 秒（我猜这取决于 GAE 的感觉）。目前这是一个低流量站点，因此之前 GAE 没有空闲实例，大多数请求都是加载请求，导致第一个页面视图的等待时间很长。

我已经尝试将空闲实例的最小数量配置为“1”，这样这些不常见的页面浏览量就可以立即达到温暖的实例。

但是，我现在已经看到了几种情况，即使有一个实例未使用，GAE 也会将传入请求路由到加载实例，而不会触及暖实例：

[显示奇怪调度的 gae 仪表板](http://i.imgur.com/xpF67.png)

我怎样才能防止这种情况发生？我觉得我一定是理解错了，因为我当然不期望这种行为。

**更新**：此外，使这更难理解的是该应用程序启用了线程安全，所以我真的不明白为什么 GAE 会为一个单独的请求而慌张并启动一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:54:50.640

其实，我相信这是正常的行为。空闲实例应该保证最小数量的实例始终可用（用于尖峰负载）。

因此，当一些请求开始进入时，它们最初由空闲实例提供服务，但同时 AE 调度程序将开始启动新实例以始终保证相同数量的空闲实例，即使在负载突然增加的情况下也是如此。也就是说，“覆盖”那些忙于服务请求的空闲实例。

在[调整应用程序性能](https://developers.google.com/appengine/docs/adminconsole/performancesettings)页面上有详细描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:26:02.643

啊！自己受此苦。这个主题领域已经出现在几个线程中（GAE 组和 SO）。如果有人可以拨入低流量站点的设置（开/关），那将是一个真正的好处。IIRC，我认为具有深厚 GAE 经验的人在一个线程中指出，调度程序不能很好地处理非常低容量的应用程序。我还在相对较短的时间内看到了截然不同的启动时间。几分钟后看到启动需要 700 毫秒然后 7000 毫秒，这很痛苦。总的来说，问题不是我的成本，而是基础设施资源的浪费。在测试中，尽管每隔几分钟就使用 RPC 对应用程序执行一次 ping 操作，但我仍然运行了两个实例。如果有 50,000 名其他开发人员进行类似的测试，那可能会累积成巨大的浪费。

# structuremap - 将注册名称绑定到结构图中的组件实例

> ID：11021657
> 
> 赞同：1
> 
> 时间：2012-06-13T19:05:41.237
> 
> 标签：structuremap

我即将从 Windsor 切换到 Structuremap 以用于现有项目，其中包含大约 100 个注册组件（主要是单例）。所有组件都继承自一个提供日志记录和健康跟踪的通用基类，因此，它包含一个用于标识组件实例的“名称”属性。

使用 Windsor，可以将组件的 Name 属性设置为用于在 IOC 容器中注册组件的名称（我们为此使用了 Facility）。

我的问题：Structuremap 可以做到这样吗？

（我梦想在某个地方接到`c.For<IFoo>.Use<Bar>.Named("Doe")`一个神奇的电话`instanceOfBar.Name = "Doe"`。）

这是我尝试过的：

```
using System;
using StructureMap;
using StructureMap.Interceptors;
using System.Diagnostics;

namespace ConsoleApplication1
{
    interface IServiceA { }

    interface IServiceB { }

    class Base
    {
        public string Name { get; set; }
    }

    class ComponentA : Base, IServiceA { }

    class ComponentB : Base, IServiceB
    {
        public ComponentB(IServiceA serviceA)
        {
            this.ServiceA = serviceA;
        }

        public IServiceA ServiceA { get; private set; }
    }

    class SetNameInterceptor : TypeInterceptor
    {
        public bool MatchesType(Type type) { return true; }

        public object Process(object target, IContext context)
        {
            // *** Any other way? This does not work...
            string name = context.BuildStack.Current != null ? context.BuildStack.Current.Name : context.RequestedName;
            ((Base)target).Name = name;
            return target;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Container container = new Container(c =>
            {
                c.RegisterInterceptor(new SetNameInterceptor());
                c.For<IServiceA>().Use<ComponentA>().Named("A");
                c.For<IServiceB>().Use<ComponentB>().Named("B");
            });

            var b = container.GetInstance<IServiceB>();

            // both Fail:
            Debug.Assert(((ComponentB)b).Name == "B"); 
            Debug.Assert(((ComponentA)((ComponentB)b).ServiceA).Name == "A");
        }
    }
} 
```

以上显然不起作用，我尝试了几种变体但没有运气。目标对象的注册名称似乎无法始终通过`IContext`.

我的第二个最佳方法是定义一个解析为的新“NamedComponent(...)”扩展方法`Named(name).WithProperty(x => x.Name).EqualTo(name)`，但我想知道是否可以避免这种情况，以尽可能保持组件注册为“类似结构图”？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:51:21.800

我以前从未使用过WithProperty，但如果它按我预期的方式工作，它*应该*可以为你解决问题。

我想我会喜欢使用 EnrichWith。就像是：

```
c.For<IFoo>().Use<Foo>().Named(name).EnrichWith(f => f.Name = name); 
```

EnrichWith 对 IMO 所做的工作更加明确，并允许您在将实例返回给调用者之前调用实例上的任何代码。我喜欢这也可以让你做一个简单的作业。

还有一个更复杂的处理程序可以与 EnrichWith 一起使用，它可以访问请求的上下文 - 这将允许您执行以下操作：

```
c.For<IFoo>().Use<Foo>().Named(name)
    .EnrichWith((c, i) => {
        i.Name = c.RequestedName;
        return i;
    }); 
```

这对于您的情况可能有点过分，但上下文意识可能非常有用。

# php - 在php中创建一个可写的目录？

> ID：11021658
> 
> 赞同：1
> 
> 时间：2012-06-13T19:05:45.020
> 
> 标签：php

```
mkdir('..'.$this->path.$user, 0777); 
```

我正在尝试在我的服务器上创建一个具有写权限的目录，以便可以将上传的图像写入其中。

我执行上述操作，但是当我检查创建的文件夹的写权限时，它是 755。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T19:08:23.757

首先想到的是[`umask`](http://php.net/manual/en/function.umask.php)。

```
$old = umask(0);
mkdir('..' . $this->path . $user, 0777);
umask($old); 
```

此外，您可以尝试在使用创建后设置文件夹权限[`chmod`](http://be.php.net/manual/en/function.chmod.php)。

```
mkdir('..' . $this->path . $user);
chmod('..' . $this->path . $user, 0777); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:08:05.150

是的，我知道，这是 Linux 目录的默认权限。

您可以更改它`umask`，请参阅[http://php.net/umask](http://php.net/umask)

# c - 使用斜率的 C 中的微控制器峰值检测

> ID：11021660
> 
> 赞同：1
> 
> 时间：2012-06-13T19:05:52.830
> 
> 标签：c, detection, microcontroller

我正在使用 LED 和接收器制作手指体积描记器（FP）。该传感器产生一个模拟脉冲波形，该波形经过滤波、放大并馈入范围为 3.3-0V 的微控制器输入。这个信号被转换成它的数字形式。

采样率为 8MHz，处理器频率为 26MHz，精度为 10 或 8 位。

我在提出一种强大的峰值检测方法时遇到了问题。我希望能够从手指体积描记器中检测到心脏脉搏。我已经设法使用阈值方法准确测量心率。然而，FP 对运动极为敏感，信号的偏移量会随着运动而变化。然而，信号的峰值仍然会出现，但电压偏移会发生变化。

因此，我提出了一种使用斜率检测峰的峰检测方法。例如，如果产生一个峰值，则最大值点之前和之后的斜率将分别为正和负。

您认为这种方法的可行性如何？有没有更简单的方法来使用微控制器执行峰值检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:12:54.190

您仍然可以在设备移动时引入虚假峰值检测。无论您是计时平均峰值持续时间还是应用 FFT（快速傅立叶变换），都会出现这种情况。

使用 FFT，您应该能够忽略您正在考虑的频率范围之外的峰值（例如，那些 < 30 bpm 和 > 300 bpm 的峰值）。

正如 Kenny 所说，8MHz 可能会压倒 26MHz 芯片。如此高的采样率有什么特别的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:24:20.467

如果您可以使用过零检测周期，即使在 10 Hz 的 10 倍过采样下，您也可以使用 quick-n-dirty-edge 的线拟合来找到确切的周期，然后减去该周期中的新波样本前一个，并获得一个直流偏移。周期测量将具有您的采样率的精度。对时间和幅度归一化数据进行操作会容易得多。

与仍需要额外数据处理的 FFT 相比，这个想法在计算上是轻量级的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:59:10.690

像一些评论一样，我也建议降低您的采样率，因为您现在只关心脉搏（即心率）。因此，假设您要查看静息心率，您将处于低于 1Hz 到 2Hz 的范围内（60 BPM = 1Hz），具体取决于受试者的健康状况、年龄等。

为了隔离感兴趣的频率范围，我还推荐一个简单的低阶数字滤波器。如果您可以访问 Matlab，您可以使用其滤波器设计和分析工具（[FDATool 简介](http://www.mathworks.com/products/signal/demos.html?file=/products/demos/shipping/signal/introfdatooldemo.html)）来玩转数字滤波器设计。您会发现，数字滤波 ( [wiki](http://en.wikipedia.org/wiki/Digital_filter) ) 在计算上并不昂贵，因为它是乘法和加法的问题。

要回答您问题的检测部分，是的，在微控制器内对体积描记器波形实施峰值检测当然是可行的。以您的示例为例，基于斜率的峰值检测算法将对您的波形数据进行操作，搜索斜率的变化，主要是斜率波形与零交叉的位置。

以下是有关您的应用程序需要考虑的其他一些事项：

*   计算斜率可以有一个“传播”​​（即你找到相邻样本之间的斜率，还是相隔几个样本的样本？）
*   如果您的峰值检测算法定位到的峰值在生理意义上太近或相距太远怎么办？
*   脉搏血氧仪 ( [wiki](http://en.wikipedia.org/wiki/Pulse_oximetry) ) 通常使用发射红光和红外光的 LED。LED 的频率如何影响体积描记器？（提示：它可能并不重要，但我相信您会发现一个波长在您感兴趣的频率范围内产生更大的振幅。）

当然，如果您进行文献搜索，您会发现各种潜在的算法，但我认为基于斜率的检测因其简单性而非常有用。希望能帮助到你。

# css - 如何摆脱这种布局中丑陋的水平滚动条？

> ID：11021661
> 
> 赞同：2
> 
> 时间：2012-06-13T19:05:56.163
> 
> 标签：css

我觉得这样的菜鸟问这个但是，由于某种原因，一个水平滚动条出现在 NOWHERE 之外。

**如何摆脱底部丑陋的水平滚动条？**

CSS 样式表文件：[style_sample.css](http://avisuals.web.fc2.com/style_sample.css)

网页：[http ://avisuals.web.fc2.com/sample.html](http://avisuals.web.fc2.com/sample.html)

这个网站是一个很好的实践经验学习资源。我边走边学。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:08:10.487

您可以将 CSS 添加`overflow-x:hidden;`到您的`<body>`元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:10:15.737

您已在页脚上放置边距以使其居中，然后使用相对定位将其向右移动 250 像素，因此它向右伸出。

在其上使用边距或相对定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T14:07:37.770

如果您将 gridview 嵌入到面板中，请确保面板的宽度大于 gridview 的宽度。如果 gridview 的宽度大于或等于面板的宽度加上垂直滚动条的宽度（如果您指定了），水平滚动条将始终存在。在我的例子中，垂直滚动条是 20px 宽。例如，这将始终导致水平滚动条：

```
<asp:Panel id="Panel1" runat="server" Width="1200px" ScrollBars="Vertical" 
      Height="500px">
    <asp:GridView id="GridView1" runat="server" Width="1200px" 
                        Height="500px" HeaderStyle-Height="34px"> 
```

而这不会：

```
 <asp:Panel id="Panel1" runat="server" Width="1200px" ScrollBars="Vertical" 
          Height="500px">
        <asp:GridView id="GridView1" runat="server" Width="1180px" 
                            Height="500px" HeaderStyle-Height="34px"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T19:10:37.180

使您的浏览器窗口更宽。它可能“刚刚出现”，因为您的窗口不再最大化 -**除非您更改了样式表或布局中的某些**内容，在这种情况下，该更改使页面更宽。

看起来您`left:`向`p:footer-text`. 删除它，如果您想将文本居中，请`text-align:center;`改为使用它。

# java - Java 非阻塞套接字写入

> ID：11021664
> 
> 赞同：0
> 
> 时间：2012-06-13T19:06:10.687
> 
> 标签：java, nio

我正在寻找有关 Java 中非阻塞套接字写入的建议。我的代码只需要将一些数据写入套接字并完全忘记它。我不关心响应或实际消耗数据的时间。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:08:57.817

当你遇到这样的复杂性时，最好的主意是使用像[KryoNet](http://code.google.com/p/kryonet/)（更复杂，更多功能）或[PryoNet](http://code.google.com/p/pyronet/)（更简单，更少功能）这样的网络库，它们都支持简单的基于套接字的异步 I/O。如果你真的想的话，你可以把它们分开来了解它们是如何工作的。`Socket`请注意，只有在发送缓冲区已满时才会阻止对 a 的写入。

如果您不采取这条路线，要在没有线程同步的情况下处理这个简单的情况，您需要使用`Selectors`and `Channels`，因为如果套接字在没有缓冲区填充的任何时间点是“可写”的，那么如果没有繁忙的循环，就无法轻松确定基础`Socket`类中的级别通知机制。您也可以在线程中使用套接字，然后它可以无限期地阻塞而不会出现问题，但是您可能会遇到一些同步问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:54:02.640

在我看来，您正在使用异步 I/O。这是一个简短的例子：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.AsynchronousSocketChannel;
import java.nio.channels.CompletionHandler;

public class Test
{
    public static void main(String[] args)
    {
        final AsynchronousSocketChannel out = AsynchronousSocketChannel.open();
        out.connect(new InetSocketAddress("www.google.com", 80), null,
            new CompletionHandler<Void, Void>()
            {
                @Override
                public void completed(Void result, Void attachment)
                {
                    ByteBuffer buffer = ByteBuffer.allocate(1024);
                    buffer.asCharBuffer().put("GET /index.html HTTP/1.1");
                    out.write(buffer, null, new CompletionHandler<Integer, Void>()
                    {
                        @Override
                        public void completed(Integer result, Void attachment)
                        {
                            // ignore the result
                        }
                            @Override
                        public void failed(Throwable t, Void attachment)
                        {
                            t.printStackTrace();
                        }
                    });
                }

                @Override
                public void failed(Throwable t, Void attachment)
                {
                    t.printStackTrace();
                }
            });
    }
} 
```

你不需要任何花哨的框架。Java7 异步套接字非常容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:20:21.373

您可以使用 Java NIO（复杂）中的选择器和通道 - 或者您可以尝试更友好的网络库，例如支持非阻塞 I/O 的[Apache MINA 。](http://mina.apache.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T19:10:17.127

创建一个将这些事件发布到的线程，它将在后台运行并将数据提交到服务器。

# html - css - 对齐问题

> ID：11021665
> 
> 赞同：1
> 
> 时间：2012-06-13T19:06:18.353
> 
> 标签：html, css

我想在我的 Web 应用程序中进行一些设计调整，但由于一些对齐问题我被卡住了。

请访问[http://qlimp.com](http://qlimp.com)

登录用户名/密码：`dummy/dummy`.

然后转到此链接[http://qlimp.com/information](http://qlimp.com/information)。

在那里，您可以找到底部未正确放置的带有**添加按钮的关键字****输入文本。**我不能改变. 但是当你移除那个添加按钮 ( ) 时，我们可以改变那个输入文本的位置。为什么会这样？**`input text``#add-button``#add-keywords`**

 **谁能指导我正确定位它？

谢谢！

**更新**

请检查这个[http://jsfiddle.net/RxHuN/](http://jsfiddle.net/RxHuN/)

我需要的是，我希望将添加按钮放置在输入文本上并且它希望是可移动的，我的意思是改变位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:17:54.277

尝试这个：

```
#add-keywords{
   float:left;
}

#add-button{
   float:left;
   position:relative;
   bottom:8px
} 
```**

# ms-access - Microsoft Access 日期格式

> ID：11021668
> 
> 赞同：1
> 
> 时间：2012-06-13T19:06:32.173
> 
> 标签：ms-access, ms-access-2003

我正在尝试在 MS Access 2003 数据库中检索存储的日期.. 它以格式存储`dd/mm/yyyy`，但是当它被检索时，它以格式`mm/dd/yyyy`

如何强制 MS Access 以格式返回日期`dd/mm/yyyy`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:37:50.210

我设法解决了它。

向字段添加格式以强制它们为 dd/mm/yyyy

在我的 C# 应用程序中，我对其进行了调整以处理该格式的日期/一切都很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-05T08:44:25.590

您可以使用 Excel TEXT 函数，该函数可以指定语言环境。这是一个`formatLocale`MS Access UDF 示例。

```
Option Compare Database
Option Explicit

'see https://excel.tips.net/T003299_Specifying_a_Language_for_the_TEXT_Function.html
'for countries list

Dim xl As Excel.Application

Function formatLocale(dt As Variant, xlFormat As String) As Variant
    setXl
    formatLocale = xl.WorksheetFunction.Text(dt, xlFormat)
End Function

Sub test_formatLocale()
    'print this month's name in US english
    Debug.Print formatLocale(Now, "[$-409]mmmm")
End Sub

Function setXl()
    On Error Resume Next
    If xl Is Nothing Then
        'try getting
        Set xl = GetObject(, "Excel.Application")
    End If
    If xl Is Nothing Then
        Set xl = CreateObject("Excel.Application")
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:01:18.107

使用格式化功能。

```
Format(dateVar, "dd/mm/yyyy") 
```

其中 dateVar 最好是 DateTime 类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:24:10.423

在我的经验中。无论您在某个阶段做什么，微软软件都会对欧洲日期感到困惑，无论是 asp、.net、sql、IE 还是操作系统本身。主要是当有一些歧义时，例如 2012 年 6 月 5 日，可能是 5 月 6 日或 6 月 5 日。我保证在某个阶段这会出错。

设置语言环境会让你产生一种虚假的安全感。

因此，要么坚持使用古怪的美国日期格式 mmddyyyy，要么像我们一样做，完全忘记微软的日期格式，并根据数字字段中的 yyyymmddhhmmss 让您拥有。它更灵活、更强大，因为它与时间结合并允许非常有效的时间比较。微软的问题是他们试图默默地解决问题，我觉得这根本没有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T19:15:31.343

在 Access 中，日期始终在内部存储，不区分日期/月份。与许多数据库和语言一样，它只是一个实数。

该数字如何转换为日期并显示为日期完全取决于客户端程序及其本地或系统用户设置。

如果 Access 本身是该客户端程序，则日期以当前用户设置格式显示和编辑，可根据当前 Windows 用户区域设置进行推测。除了在 VBA 中：那么在代码和 SQL 中输入和比较的格式始终是 mm/dd/yyyy，因为 VBA 是一种英语（美国）书面语言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-08T00:49:43.343

如果区域设置不是美国，则在 Microsoft Access 中使用今天的日期作为默认值时要非常小心。（我的是英国）。

*   确保将日期字段类型指定为日期/时间。
*   使用 Date() 作为默认值。两条规则都必须遵守。日期/时间字段的转换以正确的语言环境格式正确显示。

这克服了我在匆忙中将字段定义为短文本并随后引入了默认值 =Date$() 时遇到的问题。是的，它很草率，生成了美国 mm/dd/yyyy 格式，并且必须使用日期选择器进行修复。

# tsql - ASP - SELECT 子句中的 SQL 注入保护

> ID：11021669
> 
> 赞同：1
> 
> 时间：2012-06-13T19:06:32.720
> 
> 标签：tsql, asp-classic, sql-server-2000, sql-injection

[在从经典的 ASP 防止 SQL 注入保护](https://stackoverflow.com/questions/11020846/classic-asp-protection-against-sql-injection/11020916)中获得了防止 SQL 注入的巨大帮助后，我遇到了一个**无法**使用参数化查询解决的主要问题。

```
name = Trim(Request.QueryString("name"))
flds = Trim(Request.QueryString("flds"))
sql = "set rowcount 0 select " & flds & " from [TABLE] where Name = '" & name & "'" 
```

据我了解，参数化查询将防止 WHERE 子句中的 SQL 注入（在本例中为`name`字段。

`flds`是用户希望返回的参数的逗号分隔列表。很明显，它**很**容易受到 SQL 注入的攻击。

我必须保护我的代码的一个想法是拥有一个静态生成的有效字段字典，`flds`用“，”分割字符串，根据字典验证每个值，并构造包含所有字段的 SQL 查询存在于字典中。

在我看来，虽然这种方法可以保证安全，但它需要我在数据库中的每次更改时修改静态列表（尽管很少见）。

是否有更好/正确的方法来保护此代码免受 SQL 注入攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:22:29.403

在 SQL Server 中创建一个拆分函数（对于较新的版本有更好的函数，但这是您在 SQL Server 2000 中得到的）：

```
CREATE FUNCTION dbo.SplitStrings
(
   @List       NVARCHAR(4000),
   @Delimiter  CHAR(1)
)
RETURNS @Items TABLE
(
   Item NVARCHAR(4000)
)
AS
BEGIN
   DECLARE
       @Item VARCHAR(12),
       @Pos  INT;

   WHILE LEN(@List)>0
   BEGIN
       SET @Pos = CHARINDEX(@Delimiter, @List);

       IF @Pos = 0
           SET @Pos = LEN(@List)+1;

       SET @Item = LEFT(@List, @Pos-1);

       INSERT @Items SELECT LTRIM(RTRIM(@Item));

       SET @List = SUBSTRING(@List, @Pos + LEN(@Delimiter), LEN(@List));

       IF LEN(@List) = 0 BREAK;
   END
   RETURN;
END
GO 
```

然后创建一个存储过程：

```
CREATE PROCEDURE dbo.RunScaryQuery
  @columns NVARCHAR(4000),
  @table   NVARCHAR(255)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @collist NVARCHAR(4000), @sql NVARCHAR(4000);

  SELECT @collist = COALESCE(@collist + ',', '') + c.name 
    FROM syscolumns AS c
    INNER JOIN dbo.SplitStrings(@columns, ',') AS s
    ON s.Item = c.name
    WHERE c.id = OBJECT_ID(@table);

  SELECT @sql = 'SELECT ' + @collist + ' FROM ' + @table
  -- where ...
  ;

  EXEC sp_executesql @sql;
END
GO 
```

现在使用正确参数化的命令对象从 ASP 调用该存储过程。

这将确保您的 SQL 查询仅使用表中实际存在的列名生成。（任何废话都会被忽略。）

这假定您将在列表中获得至少一个有效的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:06:06.007

嗯...所以我要使用另一种解决方案。

我首先有一个返回所有有效字段的 SQL 查询

```
select
   tcol.name
from
  sysObjects tobj
  join syscolumns tcol on tobj.id = tcol.id
where
  tobj.xtype = 'U'
  and tobj.name = '[TABLE]' 
```

然后我按照@peter 的建议验证每个元素。然后使用所有经过验证的参数来构建查询字符串，并在第二个查询中将名称作为参数传递。

这似乎最大限度地减少了数据库的开销和压力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:33:22.933

我在家，没有要测试的数据库，但应该这样做基本上，从数据库中获取所有适合 where 的字段，在数组中获取请求的字段并比较两个列表，只输出请求的字段。

```
name = Trim(Request.QueryString("name"))
flds = split(Trim(Request.QueryString("flds")),",")
sql = "set rowcount 0 select * from [TABLE] where Name = '" & name & "'"
set oRst = oConn.execute(sql)
on error resume next
do while not oRst.eof
  result    = ""
  separator = ""
  for each field in flds
    for each requested_field in flds
      if uCase(field.name) = uCase(trim(requested_field)) then
        result = result & separator & field.value
        separator = ","
      end if
    next
  next
  response.write result & "<br>"
  oRst.movenext
loop 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T11:06:35.170

看看[http://www.userfriendlythinking.com/Blog/BlogDetail.asp?p1=7013&p2=119&p7=3001](http://www.userfriendlythinking.com/Blog/BlogDetail.asp?p1=7013&p2=119&p7=3001)

它显示了参数化查询的用法。

# php - php mysql_connect()：如何通过 SSH 隧道连接到 MySQL 服务器

> ID：11021672
> 
> 赞同：-1
> 
> 时间：2012-06-13T19:07:11.527
> 
> 标签：php, mysql

我的 MySQL 服务器托管在外面的某个地方，需要一个 ssh 隧道才能访问它；如何通过 PHP 连接到该服务器？有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:24:04.993

我没有但谷歌搜索我发现了以下示例：

```
<?php
  shell_exec("ssh -f -L 3307:127.0.0.1:3306 user@remote.rjmetrics.com sleep 60 >> logfile");         
  $db = mysql_connect('127.0.0.1', 'sqluser', 'sqlpassword', 'rjmadmin', 3307);
?> 
```

*   看来您首先需要设置一个 ssh Tunel（超时 60 秒）。这适用于操作系统级别（shell_exec）；
*   在本例中，您创建了一个 SSH 隧道，将 mysql 主机服务器上的**3306**端口重定向到本地（网络服务器）的**3307端口；**
*   然后连接（mysql_connect），因为 mysql 服务器位于您自己的网络服务器中，重定向到 3307 端口。

我无法验证此解决方案，但我希望这可以帮助您向前迈出一步。

（[来源](http://info.rjmetrics.com/blog/bid/44903/PHP-MySQL-and-SSH-Tunneling-Port-Forwarding)）

# python - 为什么这部分python代码会在执行过程中挂起？

> ID：11021673
> 
> 赞同：2
> 
> 时间：2012-06-13T19:07:14.837
> 
> 标签：python, python-2.7, mechanize, urllib2

```
try:
    html = urlopen('http://glbse.com/api/asset/' + asset.name)
except:
    print 'error while updating the price of ' + asset.name
    continue
json_txt = html.read()
ticker = json.loads(json_txt)
average_price = int(ticker['t24havg'])
if average_price == 0:
    average_price = int(ticker['t5davg'])
if average_price == 0:
    average_price = int(ticker['t7davg'])
if average_price == 0:
    average_price = int(ticker['latest_trade'])
if average_price == 0:
    print 'could not determine the price of ' + asset.name
    continue
asset.average_price = average_price 
```

我正在使用 mechanize 进行 urlopen。这段代码（和程序的其余部分）似乎可以运行好几个小时，但是在循环了这部分数千次之后，最终会挂在这部分代码的某个地方。

它会挂起无限长的时间。我什至回到它发现它已经挂在那里几个小时了。

谷歌搜索我提出的所有问题都是关于类似问题的报告，其中执行挂在 .read() 上，据报道该问题已在几年前修复。

那么是什么导致执行挂起，我该如何修复或解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:30:50.767

使用`mechanize.Browser().open()`而不是`urlopen`显示单独`urllib2.URLError urlopen connection time out`使用时不会引发的“” 。`urlopen`我强烈怀疑这是问题所在，我的解决方案是`mechanize.Browser().open()`在`urlopen`所有情况下都使用

# fortran - 从 Fortran 调用 C：``void*`` 返回值

> ID：11021678
> 
> 赞同：3
> 
> 时间：2012-06-13T19:07:46.440
> 
> 标签：fortran

# 如何`void *function(...)`从 Fortran 调用一个？

我目前正在尝试从 Fortran 调用一些 C 函数。我以前这样做过，但我只调用了我自己的函数。例如，调用：

```
void add(int *csum, int *ca, int *cb) { *csum = *ca + *cb; } 
```

来自 Fortran，我使用过：

```
INTEGER :: fsum, fa, fb
CALL add(fsum, fa, fb) 
```

**这工作正常。**现在我有几个功能大致如下：

```
void *create_obj(void);
void use_obj(void *obj);
void free_obj(void *obj); 
```

甚至：

```
struct private_struct; /* defined somewhere else */
struct private_struct *create_p(void);
void use_p(struct private_struct *p);
void free_f(struct private_struct *p); 
```

其中结构是私有的，即我不知道它的成员。

***问题：*****如何将返回值导入 Fortran？**我真的不需要访问它们，但我必须在它们的生命周期中以某种方式`create`存储它们`use`。`destroy`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T20:02:25.657

您可以在 C 中创建对象，将指向它的指针传递给 Fortran，然后将该指针传递给 C 例程。最后，调用 C 例程来释放内存。ISO C 绑定提供 Fortran 类型 C_PTR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:41:05.897

您可以将其保存在 C 库内的数组（或其他容器）中，并返回并索引到数组（或任何适合您的容器）中，而不是返回指向对象的指针。

```
int create_obj(); // returns the obj_id
void use_obj(int *obj_id);
void free_obj(int *obj_id); 
```

您将必须计算正在使用的数组元素。就像是

```
struct Entry {
    bool used;
    struct Obj value; 
}
Entry objects[100]; 
```

# boost - cygwin链接错误

> ID：11021679
> 
> 赞同：1
> 
> 时间：2012-06-13T19:07:46.707
> 
> 标签：boost, linker

我想用cygwin制作网络模拟器shawn.exe，当我在链接步骤过程中断中调用make时，该模拟器需要提升库。请帮助我，这都是 make 命令的结果：

```
{.
.
[100%] Built target shawnlib
Scanning dependencies of target shawn
[100%] Building CXX object CMakeFiles/shawn.dir/frontend/console/con_main.o
[100%] Building CXX object CMakeFiles/shawn.dir/apps/apps_init.o
Linking CXX executable shawn.exe
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_regex-gcc-mt
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_date_time-gcc-mt
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_thread-gcc-mt
collect2: ld returned 1 exit status
CMakeFiles/shawn.dir/build.make:111: recipe for target `shawn.exe' failed
make[2]: *** [shawn.exe] Error 1
CMakeFiles/Makefile2:60: recipe for target `CMakeFiles/shawn.dir/all' failed
make[1]: *** [CMakeFiles/shawn.dir/all] Error 2
Makefile:72: recipe for target `all' failed
make: *** [all] Error 2
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:16:01.617

确保您已`libboost-devel`安装 Cygwin 软件包。重新运行 Cygwin 的 setup.exe 并安装该软件包（以及它的依赖项，如果您没有明确排除它们，它们应该会自动安装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-12T15:27:16.733

无需重新安装cygwin。只需运行：
`apt-cyg install libboost-devel`。
如果您没有安装“apt-cyg”，请先运行以下步骤：
`lynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg > apt-cyg`
`install apt-cyg /bin`

# android - 在 Android 中查看文件的更改

> ID：11021680
> 
> 赞同：0
> 
> 时间：2012-06-13T19:07:58.267
> 
> 标签：android

我在 Android SD 卡上有一个文件，并希望通过任何外部应用程序通过代码监视它发生的任何更改。有没有办法做到这一点？类似 [http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:11:13.123

[http://developer.android.com/reference/android/os/FileObserver.html](http://developer.android.com/reference/android/os/FileObserver.html) 你试过 FileObserver 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:11:16.563

我不认为系统提供任何类型的回调类型接口。

如果您想要该信息，我认为您必须经常检查文件的内容并将其与您上次找到的内容进行比较。如果它不相等，那么您知道该文件被其他东西触及。

尽管我想，这肯定会在电池方面效率低下。如果您必须走这条路线，我建议您在两次检查之间留出尽可能长的时间。

**编辑：**我的立场得到纠正。FileObserver 看起来就是您想要的。我以前从来没有碰到过那个。@Grey 的道具。

# c# - 自动生成设计器集合项目的代码隐藏名称

> ID：11021682
> 
> 赞同：9
> 
> 时间：2012-06-13T19:08:04.177
> 
> 标签：c#, winforms, designer

我有一个自定义控件，其公共集合标记为`DesignerSerializationVisibility.Content`.

当我使用设计器将项目添加到集合中时，它将它们添加到设计器文件并分配所有所需的值，但它为集合的每个元素提供了一个通用名称，例如`MyClass1`,`MyClass2`等。我想要每个的“名称”属性item 成为项目的代码名称，以便我可以通过代码中的名称访问项目。

这是 ContextMenuStrip 和 ToolStrip 工作方式的功能。在这些情况下，Name 属性显示为`(Name)`在属性网格中。

有没有我可以用来获得这个功能的属性或东西？还是我必须编写一个完整的自定义设计器对话框？如果是这样，**我可以实现这一目标的最简单方法的例子是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T23:33:40.490

您可以尝试从 Component 继承来获得该功能。

在此示例中，我创建了一个名为 的类`PanelItem`，它将是我自己的 Panel 类在我的集合中使用的类。我添加`DesignTimeVisible(false)`以便它不会填充设计器中的组件托盘。

另外，我添加了一个`Name`对设计器隐藏但可以在代码中使用的属性。它似乎在我的测试中起作用：

```
[DesignTimeVisible(false)]
public class PanelItem : Component  {

  [DefaultValue(typeof(string), "")]
  public string PanelText { get; set; }

  private string name = string.Empty;

  [Browsable(false)]
  [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
  public string Name {
    get {
      if (base.Site != null) {
        name = base.Site.Name;
      }
      return name;
    }
    set {
      name = value;
    }
  }
} 
```

然后是我的自定义面板控件：

```
public class MyPanel : Panel {
  private List<PanelItem> panelItems = new List<PanelItem>();

  [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
  public List<PanelItem> PanelItems {
    get { return panelItems; }
  }
} 
```

结果：

![在此处输入图像描述](../Images/7bd7e79a36f45037a683c38513f25f43.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:09:14.780

我相信您的自定义控件本身将需要 DesignerSerializer，而仅仅用 the 装饰集合`DesignerSerializationVisibility.Content`是不够的。

我使用 ILSpy 检查：ToolStrip 将其 DesignerSerializer 设置为内部 ToolStripCodeDomSerializer，我认为它负责生成所涉及的所有代码属性。

我认为实现这将是一项专门的工作。这是帮助您入门的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/ms171834.aspx](http://msdn.microsoft.com/en-us/library/ms171834.aspx)。您正在寻找 CodeDomSerializer 的实现，我相信：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.design.serialization.codedomserializer.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.design.serialization.codedomserializer.aspx)。

# macos - 链接 gcc-4.7 Mac OSX 10.6 的问题

> ID：11021684
> 
> 赞同：0
> 
> 时间：2012-06-13T19:08:05.487
> 
> 标签：macos, gcc, g++

所以我使用自制软件下载了 gcc，以便我可以将 gcc 和 g++ 更新到 4.7。

那么我：

```
$ mkdir ~/bin 
```

使用内容创建`~/.bashrc`：

```
'export PATH=$HOME/bin:$PATH' 
```

使用内容创建`~/.bash_profile`：

```
'. $HOME/.bashrc' 
```

接着：

$`ln -s /usr/local/bin/g++-4.7 ~/bin/g++`

所以现在我跑了`g++ -v and it's 4.7`，耶！

现在我去更新 gcc 并执行以下操作：

$`ln -s /usr/local/bin/gcc-4.7 ~/bin/gcc`

我没有收到任何错误，但是当我运行 gcc -vi get 时：

```
gcc-4.7: error trying to exec '/usr/local/bin/i686-apple-darwin10-gcc-4.2.1': execvp: No such file or directory 
```

所以它似乎出于某种原因在寻找 4.2？如果我 cd to`~/bin/gcc`并这样做`./gcc -v`，它工作正常。echo $PATH 也有正确的`~/bin path`. 我不确定为什么 g++ 有效而 gcc 没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:23:31.107

我有同样的问题。这是因为 bash 已经对其他文件夹中的 gcc 进行了哈希处理。

```
run: hash gcc 
```

那么一切都应该顺利进行。

# asp.net - 可以用asp.net完成工作流程吗？

> ID：11021686
> 
> 赞同：0
> 
> 时间：2012-06-13T19:08:11.777
> 
> 标签：asp.net, workflow

我们目前有使用 infopath、sharepoint 和 bitztalk 构建的工作流应用程序。

基本上，员工填写表格，保存并单击“转发给经理”

他/她会收到一封电子邮件通知，通知他/她的队列中正在等待填写表格。

经理完成并转发给下一个上级。

该过程一直持续到最终经理签字为止，并且该过程现在被认为已完成。

循环可以以新的形式重新开始。

该公司聘请了一个承包商来做这件事，现在找不到了。

不幸的是，我们内部没有人有知识来维护这一点。

我被要求尝试从您的专家那里了解是否可以在 asp.net 中执行此操作。

如果是，您能否提供一些链接让我开始？

提前谢谢了

# c# - 为什么 StreamWriter 无法在其构造函数中获取字符串？

> ID：11021688
> 
> 赞同：1
> 
> 时间：2012-06-13T19:08:16.737
> 
> 标签：c#, streamwriter, .net, microsoft-metro

> **可能重复：**
> [如何在 Windows 8 中使用 StreamWriter 写入文件？](https://stackoverflow.com/questions/10290820/how-write-a-file-using-streamwriter-in-windows-8)

我正在开发一个 Metro 应用程序，我想将我的数据序列化为一个 XML 文件。当我想创建一个新的`StreamWriter`时，它不会将字符串数据作为地址，它只是获取流。我关闭并重新打开了 VS，但我看不到任何变化。

# python - Web 应用程序中的动态子域处理（Flask）

> ID：11021691
> 
> 赞同：35
> 
> 时间：2012-06-13T19:08:25.540
> 
> 标签：python, web, subdomain, flask, wildcard-subdomain

我将使用flask 来创建一个Web 应用程序，并且该应用程序的一部分将涉及一个子域（例如，user1.appname.org）。

我不确定如何在烧瓶配置中动态创建这些子域，或者如何将它们部署到生产服务器。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-14T05:22:36.443

所有 Flask 的路由构造都支持[`subdomain`](http://flask.pocoo.org/docs/1.0/api/?highlight=subdomain#url-route-registrations)关键字参数（这包括对路由变量的支持）。

```
@app.route("/", subdomain="static")
def static_index():
    """Flask supports static subdomains
    This is available at static.your-domain.tld"""
    return "static.your-domain.tld"

@app.route("/dynamic", subdomain="<username>")
def username_index(username):
    """Dynamic subdomains are also supported
    Try going to user1.your-domain.tld/dynamic"""
    return username + ".your-domain.tld" 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-07-01T11:50:46.030

为了补充 Sean Viera 的帖子，您还需要设置 SERVER_NAME 配置变量。

文档： http: [//flask.pocoo.org/docs/config/#SERVER_NAME](http://flask.pocoo.org/docs/config/#SERVER_NAME)

> 服务器的名称和端口号。需要子域支持（例如：'myapp.dev:5000'） 请注意，localhost 不支持子域，因此将其设置为“localhost”没有帮助。默认情况下，设置 SERVER_NAME 也会启用没有请求上下文但有应用程序上下文的 URL 生成。

要在本地进行测试，您需要在`hosts`文件中添加条目，如下所示：

```
127.0.0.1       cvshark.local
127.0.0.1       robert.cvshark.local
127.0.0.1       www.cvshark.local 
```

# arrays - 比较两个数组，删除匹配项

> ID：11021693
> 
> 赞同：2
> 
> 时间：2012-06-13T19:08:35.993
> 
> 标签：arrays, perl

我有两个数组，`@names`和`@employees`，其中填充了代表名称的字符串。 `@names`是二维的，持有对匿名数组的引用，但我们关心的数据的位置在`@names[i][0]`. 我想遍历`@names`并查找哪些名称不在`@employees`.

起初我认为`@names`向后循环，将其与其中的任何匹配项进行比较并从中`@employees`删除任何匹配项`@names`都可以，但我遇到了一些错误。这是我所拥有的：

```
for my $i (reverse(0 .. $#names)) {
  foreach my $employee (@employees) {
    if ($names[$i][0] eq $employee) {  # line 67
      splice(@names, $i, 1);
    }
  }
} 
```

我遇到了这个错误：

> 在 script.pl 第 67 行第 2 行的字符串 eq 中使用未初始化的值。

字符串都在数组中定义。所以我猜这是因为我在循环遍历数组时删除了数组中的元素，但我认为向后循环数组可以防止这样的问题发生。

那么我的循环哪里出错了？此外，我一直在为这个循环而苦苦挣扎，这暗示我的整个思维过程出了点问题。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T19:26:53.490

没有理由在这里显式循环。您想要过滤名称：这是一个`grep`. 您想检查成员资格：这也可以由 a 完成`grep`。

```
@names = grep {my $name = $$_[0]; not grep $_ eq $name, @employees} @names; 
```

内部数组的重复扫描不是特别有效；可以通过提前预先填充一个集合（实际上是一个哈希）来避免这种情况。

```
my %employees = map +($_ => 1), @employees;
@names = grep !$employees{$$_[0]}, @names; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:13:43.950

如果不提供代码，我会返回一个新的@names 列表。对于@names 中的每个名称，检查它是否在@employees 中，如果没有则将其添加到新的名称列表中。

# php - JsTree v1.0 - 如何有效地操作来自后端的数据以渲染树并正确操作？

> ID：11021695
> 
> 赞同：2
> 
> 时间：2012-06-13T19:08:41.247
> 
> 标签：php, mysql, database, jstree

我正在使用来自 Github 的 JsTree 稳定版本，我正在尝试添加逻辑以使其足够动态，以将每个类别的数据保存在表中，无论是讨论、文件还是要标记的联系人，所以基本上是标记系统。

我的问题基本上是，如果以下数据库设计可以阻止执行“复制”操作：

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
          `parent_id` int(11) NOT NULL DEFAULT '0',
          `user_id` int(11) NOT NULL DEFAULT '0',
          `label` varchar(16) DEFAULT NULL,
          `position` bigint(20) unsigned NOT NULL DEFAULT '0',
          `left` bigint(20) unsigned NOT NULL DEFAULT '0',
          `right` bigint(20) unsigned NOT NULL DEFAULT '0',
          `level` bigint(20) unsigned NOT NULL DEFAULT '0',
          `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
          `h_label` varchar(16) NOT NULL DEFAULT '',
          `fulllabel` varchar(255) DEFAULT NULL,
          UNIQUE KEY `uidx_3` (`id`),
          KEY `idx_1` (`user_id`),
          KEY `idx_2` (`parent_id`)
        ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ; 
```

原来的样子是这样的：

```
 CREATE TABLE IF NOT EXISTS `tree` (
          `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
          `parent_id` bigint(20) unsigned NOT NULL,
          `position` bigint(20) unsigned NOT NULL,
          `left` bigint(20) unsigned NOT NULL,
          `right` bigint(20) unsigned NOT NULL,
          `level` bigint(20) unsigned NOT NULL,
          `title` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
          `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
          PRIMARY KEY (`id`)
        ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ;

        INSERT INTO `tree` (`id`, `parent_id`, `position`, `left`, `right`, `level`, `title`, `type`) VALUES
        (1, 0, 2, 1, 14, 0, 'ROOT', ''),
        (2, 1, 0, 2, 11, 1, 'C:', 'drive'),
        (3, 2, 0, 3, 6, 2, '_demo', 'folder'),
        (4, 3, 0, 4, 5, 3, 'index.html', 'default'),
        (5, 2, 1, 7, 10, 2, '_docs', 'folder'),
        (6, 1, 1, 12, 13, 1, 'D:', 'drive'),
        (12, 5, 0, 8, 9, 3, 'zmei.html', 'default'); 
```

我们正在使用 JSON 将数据传回服务器，我在其中添加了一些小逻辑来获取与 user_id 匹配的记录的最小值和最大值。这样，我将在每次与操作交互时更新“左”和“右”的前两个记录值。有人可以帮我理解为什么如果其他所有操作都有效，复制/粘贴不起作用吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:29:09.690

它最终在之前删除的源代码中，我的意思是修复在许多地方仅呈现基于当前登录到系统的用户的记录，但只有这些行应该归功于图像中的 Ivan Bozhanov下面提供了违规行。希望它可以帮助任何被困在同一地点的人。我们正在使用与嵌套集的记录匹配的 user_id 引用另一个表

```
 if($is_copy) {
                        $sql[] = "" . 
                            "INSERT INTO `".$this->table."` (" . 
                                "`".$this->fields["parent_id"]."`, " . 
                                "`".$this->fields["position"]."`, " . 
                                "`".$this->fields["left"]."`, " . 
                                "`".$this->fields["right"]."`, " . 
                                "`".$this->fields["level"]."` ," . 
                                                        "`user_id`," . 
                                                        "`label`" . 
                            ") " . 
                                "SELECT " . 
                                    "".$ref_id.", " . 
                                    "`".$this->fields["position"]."`, " . 
                                    "`".$this->fields["left"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                                    "`".$this->fields["right"]."` - (".($idif + ($node[$this->fields["left"]] >= $ref_ind ? $ndif : 0))."), " . 
                                    "`".$this->fields["level"]."` - (".$ldif."), `user_id`,`label` " . 
                                "FROM `".$this->table."` " . 
                                "WHERE " . 
                                    "`user_id`= ".$uid." AND `".$this->fields["id"]."` IN (".implode(",", $node_ids).") " . 
                                "ORDER BY `".$this->fields["level"]."` ASC";
                    } 
```

# php - Javascript/PHP：设置选中的脚本选项不起作用我有一个 select 语句正在运行，它将数据拉入 $row。$result = mysql_query("Select * FROM Recipes WHERE rID = $sent_rID"); $fields_num = mysql_num_fields($result); $error = mysql_error($link); $row = mysql_fetch_array($result); 接下来我有我的 SELEC

> ID：11021696
> 
> 赞同：0
> 
> 时间：2012-06-13T19:08:46.050
> 
> 标签：php, javascript, html, web

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:29:25.923

您需要添加引号。

您的代码将输出：

```
DepartmentSelect(Deli) 
```

而是这样做：

```
<SCRIPT LANGUAGE='javascript'>
DepartmentSelect('<?=$row["rDepartment"];?>');
</SCRIPT> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:10:35.223

尝试：

```
<SCRIPT LANGUAGE='javascript'>
DepartmentSelect(<?php echo $row[rDepartment]; ?>);
</SCRIPT> 
```

或者：

```
<SCRIPT LANGUAGE='javascript'>
DepartmentSelect(<?php echo $row["rDepartment"]; ?>);
</SCRIPT> 
```

# javascript - 聆听文本区域的变化

> ID：11021700
> 
> 赞同：0
> 
> 时间：2012-06-13T19:09:00.373
> 
> 标签：javascript, dom-events, textarea

我正在寻找一个文本区域的变化 - 文本区域是隐藏的，不是由用户直接更新，而是由另一个动作间接更新。

据我所知，只有在移除焦点时才会触发更改事件 - 在我的情况下，焦点永远不会发生。我应该如何监控文本区域的变化？-**注意我没有使用 JS 库。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:18:52.090

如果您不打算使用 js 库，最好的方法可能是使用 setInterval 和 Timing 功能，并简单地每隔一段时间检查一下 textarea。

这是一个可能有帮助的链接：http: [//www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# java - java发布和下载文件

> ID：11021706
> 
> 赞同：0
> 
> 时间：2012-06-13T19:09:18.717
> 
> 标签：java, http, https

我们有一个表单，一旦提交文件就会被创建并返回。我创建了一个 java 方法来执行 post 并返回 ok 状态。但是，我如何在发布后下载文件？

对不起，不清楚它让我发疯。我们有一个业务对象，它根据发送给它的参数生成报告。在浏览器中填写表单后，会弹出（保存/打开）文件。我想做的是创建一个Java独立程序，它将位于我的桌面上，这样当我运行这个程序时（将我的姓名和密码以及要发布到的URL传递给它，这已经完成了）它将下载创建的文件在服务器端。问题是我不知道文件在服务器上的存储位置（如果存储的话）或文件的名称。我所知道的是，在浏览器上我们去表格填写它，文件返回到浏览器。到目前为止，该职位正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:38:07.060

当您在浏览器中的表单上时（例如`http://localhost/my/form`），您应该检查页面的来源（IE 是 Menu View > Source ）。在源代码中，您应该搜索表单标签。此标记包含一个操作值，例如：

```
<form action="myaction.dhtml" method="...>

</form> 
```

所以请求的 URL 是`http://localhost/myaction.dhtml`，服务器的响应将是一个“文件”。好的。

您可以发送与 Java 浏览器相同的请求。为了不再编码所有这些东西，您可以使用像[HttpComponents](http://hc.apache.org/)这样的库。

可能您的表单也在向服务器发送参数（用户名、密码等）。查看表单组件服务器期望的参数。您的网址可能如下所示：

`http://localhost/myaction.dhtml?name=Joe;pass=myPassWRD`

您不必知道文件的存储位置，但您需要正确的 URL，服务器将使用该 URL 获取或生成正确的数据并发送到客户端。

# python - 为什么 python / django 在 split() 之后返回一个 unicode 列表

> ID：11021709
> 
> 赞同：-2
> 
> 时间：2012-06-13T19:09:21.843
> 
> 标签：python, database, django, unicode, split

我在 Django 中有一个带有 TextField 的表单，它接收逗号分隔的输入，例如 test1、test2、test3、test4，然后像这样拆分：

```
test = request.POST.get('test', '').split(',') 
```

然后保存到 Postgres 数据库模型

然后检索并显示

然而，当显示时，返回的拆分列表是 unicode，

```
[u'test1', u'test2', u'test3', u'test4'] 
```

而不是想要的

```
['test1', 'test2', 'test3', 'test4'] 
```

为什么是这样？问题是我不知道如何在 django 模板页面中显示数组的每个元素 - 常规

```
{% for element in list %}
    <p>{{ element }}</p>
{% endfor %} 
```

不工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T19:12:03.067

[默认情况下，Django 尽可能使用 Unicode](https://docs.djangoproject.com/en/dev/ref/unicode/)。总的来说，这是一件好事。

您获得 Unicode 字符串的原因是该`get()`方法返回您正在拆分的 Unicode 字符串。

这应该不是问题 - Django 将按照您的期望在任何地方接受和处理 Unicode 字符串。事实上，上面链接的 Django 文档建议采用 Python 3.x 样式并将 Unicode 作为默认字符串：

> 正如我们在 1.5 版的 Django 代码中所做的那样，我们建议您`__future__`在代码中从库中导入 unicode_literals。然后，当您特别想创建一个字节串文字时，在字符串前面加上'b'。

您的循环应该完全按预期工作。

# excel-formula - 基于 Excel 中的结束数字的整数

> ID：11021716
> 
> 赞同：1
> 
> 时间：2012-06-13T19:10:17.983
> 
> 标签：excel-formula

我需要 excel 中的公式来四舍五入我的价目表。

我的价格的最后一位数字以

0-1-2 = 9（例如：如果价格是 $50-$51-$52 将是 $49）（减去）

3 = 4（例如：如果价格是 53 美元将变为 54 美元）（加 1）

4 = 4 （例如：如果价格为 54 美元，则相同为 54 美元）

5 = 5 （例如：如果价格为 55 美元，则相同为 55 美元）

6-7-8 = 9（例如：如果价格是 $56-$57-$58 将是 $59）（添加）

9 = 9 （例如：如果价格为 59 美元，则相同为 59 美元）

我的价格从 8 美元到 1,106 美元不等。

谢谢，我很感激你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T19:25:57.523

假设单元格中的价格`P1`：

```
=P1+CHOOSE(MOD(P1,10)+1,-1,-2,-3,1,0,0,3,2,1,0) 
```

该`MOD(x, y)`函数返回 的余数`x/y`，因此`MOD(x, 10)`可以自己获取最后一个数字。

该`CHOOSE(i, c1, c2, c3, c4, ... )`函数`ci`根据给定的索引返回项目`i`。

在函数的结果中加一，`MOD()`得到一个介于 1 和 10 之间的指数，然后使用指数值根据您的规范调整价格。

# html - jquery 表单提交操作在 document.ready 上不起作用

> ID：11021717
> 
> 赞同：2
> 
> 时间：2012-06-13T19:10:21.993
> 
> 标签：html, ajax, forms, jquery

我有这个 jQuery 代码：

```
$(document).ready(function() {
    $.ajax({
          url: "pages/"+page+".php",
          cache: false
    }).done(function( html ) {
        $('#main').html(html).css({"max-height":mH-30,"height":mH-30}).jScrollPane();

        $('form').not('#loginf').submit(function(event) {
            event.preventDefault();
            var inputs = $(this).serialize();   
            $.ajax({
              url: "pages/"+page+".php?"+inputs+'&action='+param,
              cache: false
            }).done(function( html ) {
                update(html);
                rs();
            }).fail(function (){
                window.location = "/CMS/";
        });
    });
}); 
```

所以表单上的提交功能不起作用..

有趣的是，当单击某些 li 元素时，我在页面上还有另一个 ajax，并且在 done 功能上，我也有表单提交功能，它在那里工作。

这段代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:14:23.380

试试这个。

```
$(document).ready(function() {
    $.ajax({
          url: "pages/"+page+".php",
          cache: false
    }).done(function( html ) {
        $('#main').html(html).css({"max-height":mH-30,"height":mH-30}).jScrollPane();

        $('form').not('#loginf').submit(function(event) {
            event.preventDefault();
            var inputs = $(this).serialize();   
            $.ajax({
              url: "pages/"+page+".php?"+inputs+'&action='+param,
              cache: false
            }).done(function( html1 ) {
                update(html1);
                rs();
            }).fail(function (){
                window.location = "/CMS/";
        });
    }); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:15:16.310

没关系，我通过查看这个问题的答案解决了这个问题：

[表单页面中的ajax请求问题。jQuery](https://stackoverflow.com/questions/4016246/problems-with-ajax-request-in-page-with-form-jquery?rq=1)

问题就像他们在那里所说的那样，`function(event)`所以我将其更改为`function(e)`奇怪为什么第一个不起作用。

# jquery - JQUERY - 如何验证/检查代码结构中的复选框/收音机？

> ID：11021731
> 
> 赞同：0
> 
> 时间：2012-06-13T19:11:19.200
> 
> 标签：jquery, validation, button, checkbox, radio

我让这件事变得更糟、更困难，但我无法弄清楚这一点。

我需要为我们正在工作的特殊客户端应用程序进行一些自定义验证编码，**所以不能使用 jquery val 插件**

我想要的只是一个复选框和无线电验证功能，它与我为文本字段验证构建的基本相同。我的复选框和无线电验证代码太糟糕了，它破坏了最初工作的文本字段验证

我已经消除了我遇到的非工作代码灾难 - 有人可以告诉我如何工作吗？

使用我的 jsfiddle/下面的代码结构：当您单击“btnCatchReqFlds”按钮时，我希望它运行文本字段检查，然后运行复选框，单选检查并显示所有必需但未填写的字段/选中/选中。

看看**[jsfiddle](http://jsfiddle.net/justmelat/mPXAw/)**，你会看到它是如何与文本字段验证一起工作的。我只需要使用复选框/单选按钮合并相同的功能/检查。

**我想我很接近，很接近。我已经更新了代码，我知道这不是很好的编码，但要逐步获得我需要的东西。下面的代码现在检查必需但为空的文本和检查/单选字段。现在的问题是，代码抓取了正确的字段，但是“.not(':checked');” 无法正常工作。如果我选中其中一个收音机/复选框，我会得到相同的返回值**。我做错了什么：**`return $(this).not(':checked');`**

**[我的jsfiddle](http://jsfiddle.net/justmelat/mPXAw/)：**

**jQuery：**

```
$("#btnCatchReqFlds").on('click', function()  
{
    $("#holdErrMsg").empty();
    $("#holdErrMsg_checkRadios").empty();
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() 
            {
                return $.trim($(this).val()) === "";  
            });
    var chk_requiredButEmpty = $("fieldset:visible").find(":input:checkbox[class*='-required'],:input:radio[class*='-required']").filter(function()
            {
                return $(this).not(':checked');
            });
    if (requiredButEmpty.length) 
        {
            requiredButEmpty.each(function () 
                {
                    $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
                });
        }
    if (chk_requiredButEmpty.length) 
    {
        chk_requiredButEmpty.each(function () 
            {
                $("#holdErrMsg_checkRadios").append("Please fill in the " + this.name + "<br />");
            });
    }
    return !requiredButEmpty.length;
    return !chk_requiredButEmpty.length;
}); 
```

**HTML**：

```
<form method="post" action="">
    <div id="holdErrMsg"></div>
    <div id="holdErrMsg_checkRadios"></div>
    <fieldset id="mainSection" name="mainSection">
        <legend style="color:blue; font-weight:bold">Project Overview Section</legend>
        <table style="width: 100%">
            <tr>
                <td style="height: 33px; width: 178px;">Name<span style="color: red">*</span></td>
                <td style="height: 33px"><input id="1125" name="1125" class="1125-required" type="text" /> - 1125</td>
            </tr>
            <tr>
                <td style="height: 33px; width: 178px;">Email<span style="color: red">*</span></td>
                <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" /> - 1126</td>
            </tr>
            <tr>
                <td style="width: 178px">Product Title</td>
                <td><input id="1089" name="1089" type="text" /></td>
            </tr>
            <tr>
                <td style="width: 178px">Product Type</td>
                <td>
                    <select id="1169" name="1169">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                </td>
            </tr>
        </table>
    </fieldset>
    <!-- Car Section  -->
    <fieldset id="section-11" name="section-11">
        <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>
        <table cellpadding="2" style="width: 100%">
            <tr>
                <td style="width: 334px; height: 35px"><label>Size:<span style="color: red">*</span></label></td>
                <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" /> - 1245</td>
            </tr>
            <tr>
                <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                <td style="height: 35px">
                    <select id="1433" class="1433-required" name="1433">
                        <option value="">Select</option>
                        <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
                    </select>
                    - 1433
                </td>
            </tr>
            <tr>
                <td style="width: 334px">Description:</td>
                <td>
                    <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
                </td>
            </tr>
        </table>
    </fieldset>
    <!-- Plane Section  -->
    <fieldset id="section-12" name="section-12">
        <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>
        <table cellpadding="2" style="width: 100%">
            <tr>
                <td style="width: 334px; height: 35px"><label>Size:</label></td>
                <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
            </tr>
            <tr>
                <td style="height: 35px; width: 334px">Color<span style="color: red">*</span>:</td>
                <td style="height: 35px">
                    <input type="checkbox" name="1433[]" id="1433[]" value"Orange" class="1433[]-required" />Orange
                    <input type="checkbox" name="1433[]" id="1433[]" value"Blue" class="1433[]-required" />Blue
                    <input type="checkbox" name="1433[]" id="1433[]" value"Green" class="1433[]-required" />Green
                    |  1302
                </td>
            </tr>
            <tr>
                <td style="width: 334px">Description:</td>
                <td>
                    <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
                </td>
            </tr>
        </table>
    </fieldset>
    <!-- Boat Section  -->
    <fieldset id="section-13" name="section-13">
        <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>
        <table cellpadding="2" style="width: 100%">
            <tr>
                <td style="width: 334px; height: 35px"><label>Size:</label></td>
                <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
            </tr>
            <tr>
                <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                <td style="height: 35px">
                    <input type="radio" name="1834" id="1834" value="None" class="valuetext 1834-required" />None
                    <input type="radio" name="1834" id="1834" value="All" class="valuetext 1834-required" />All
                    - 1834
                </td>
            </tr>
            <tr>
                <td style="width: 334px">Description:</td>
                <td>
                    <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
                </td>
            </tr>
        </table>
    </fieldset>
    <br />
    <!-- Misc. Info Section  -->
    <fieldset id="section-1011" name="section-1011">
        <legend style="color:green; font-weight:bold">Misc. Info Section</legend>
        <table cellpadding="2" style="width: 100%">
            <tr>
                <td style="width: 334px; height: 35px"><label>Size:</label></td>
                <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
            </tr>
            <tr>
                <td style="height: 35px; width: 334px">Color:</td>
                <td style="height: 35px">
                    <select id="1302" name="1302">
                        <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="width: 334px">Description:</td>
                <td>
                    <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea>
                </td>
            </tr>
        </table>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:30:32.653

> 我做错了什么：**`return $(this).not(':checked');`**

您假设`.not`是 的倒数`.is`，但事实并非如此。[`.not`](http://api.jquery.com/not)不返回布尔值，它返回一个 jQuery 对象，其中包含与选择器不匹配的元素*。*

你应该简单地使用：

```
!$(this).is(":checked") 
```

以确定是否未检查某些内容。甚至更好：

```
!this.checked 
```

**更新小提琴：http:** [//jsfiddle.net/VSx6M/](http://jsfiddle.net/VSx6M/)

* * *

其他一些注意事项：

*   `return`在事件处理程序的末尾有两个语句。第二个是无法访问的，因为`return`立即将程序流返回给调用函数。
*   数组文字 ( `[]`) 表示法优于`new Array`.
*   单选按钮被多次验证，因为您没有考虑单选按钮组。这会导致单选按钮被标记为无效，因为它们都被标记为必需。

^(*我知道您不能使用 jQuery 验证，但我强烈建议您尝试使用。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:38:47.217

在您最近的更新中，您需要做的就是检查是否检查了所有兄弟姐妹，然后从它返回给您的变量的元素数组中抓取一个。如果您在开始附加错误消息之前插入下面的代码，它应该按照您想要的方式工作。这是一个更新的小提琴 [http://jsfiddle.net/mPXAw/7/](http://jsfiddle.net/mPXAw/7/)

```
var chk_requiredButEmpty = $("fieldset:visible").find(":checkbox[class*='-required'],:radio[class*='-required']").filter(function()
{
       if(!$(this).siblings().is(':checked')){
               return !$(this).is(':checked');
       }
});
chk_requiredButEmpty = chk_requiredButEmpty.eq(0); 
```

# mongodb - MongoDB MapReduce - 发出一个键/一个值不调用reduce

> ID：11021733
> 
> 赞同：20
> 
> 时间：2012-06-13T19:11:27.123
> 
> 标签：mongodb, mapreduce, pymongo

所以我是 mongodb 和 mapreduce 的新手，遇到了这个“怪癖”（或者至少在我看来是一个怪癖）

假设我的收藏中有这样的对象：

> {'键'：5，'值'：5}
> 
> {'键'：5，'值'：4}
> 
> {'键'：5，'值'：1}
> 
> {'键'：4，'值'：6}
> 
> {'键'：4，'值'：4}
> 
> {'键'：3，'值'：0}

我的**地图**函数只是发出键和值

我的**reduce**函数只是简单地添加值**并且**在返回它们之前添加1（我这样做是为了检查reduce函数是否被调用）

我的结果如下：

> {'_id'：3，**'值'：0** }
> 
> {'_id'：4，'值'：11.0}
> 
> {'_id'：5，'值'：11.0}

正如您所看到的，对于键 4 和 5，我得到了 11 的预期答案，但是对于键 3（集合中只有一个带有该键的条目）我得到了意想不到的 0！

这是 mapreduce 的自然行为吗？对于 MongoDB？对于 pymongo（我正在使用）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-13T19:32:43.683

reduce 函数将具有相同键的文档合并为一个文档。如果 map 函数为特定键发出单个文档（如键 3 的情况），则不会调用 reduce 函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-28T12:46:27.803

我意识到这是一个较老的问题，但我来到它并觉得我仍然不明白为什么会存在这种行为以及如何构建 map/reduce 功能，所以这不是问题。

如果只有一个键实例，MongoDB 不调用 reduce 函数的原因是因为它不是必需的（我希望这稍后会更有意义）。以下是[reduce函数的要求](http://docs.mongodb.org/manual/tutorial/troubleshoot-reduce-function/)：

> *   reduce 函数必须返回一个对象，其类型必须**与**map 函数发出的值的类型相同。
> *   valuesArray 中元素的顺序不应影响 reduce 函数的输出
> *   reduce 函数必须是幂等的。

第一个要求非常重要，似乎很多人都忽略了它，因为我看到很多人在 reduce 函数中映射，然后在 finalize 函数中处理单键情况。然而，这是解决问题的错误方法。

可以这样想：如果键只有一个实例，一个简单的优化就是完全跳过 reducer（没有什么可以减少的）。单键值仍然包含在输出中，但 reducer 的目的是构建集合中多键文档的聚合结果。如果 mapper 和 reducer 输出相同的类型，那么通过查看map/reduce 函数的输出的**对象结构**，您应该完全没有意识到这一点。您不必使用 finalize 函数来更正未通过 reducer 运行的对象的结构。

简而言之，在您的 map 函数中进行映射，并将多键值减少为一个单一的聚合结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-24T11:31:43.517

解决方案：

*   **在地图**中添加了新字段：单：0
*   在**减少**将此字段更改为：单：1
*   在**finalize**中检查该字段并进行必要的操作

    ```
    $map = new MongoCode("function() {
        var value = {
            time: this.time,
            email_id: this.email_id,
            single: 0
        };

        emit(this.email, value);
    }");

    $reduce = new MongoCode("function(k, vals) {

        // make some need actions here
        return {
            time: vals[0].time,
            email_id: vals[0].email_id,
            single: 1
        };
    }");

    $finalize = new MongoCode("function(key, reducedVal) {
        if (reducedVal.single == 0) {
            reducedVal.time = 11111;
        }
        return reducedVal;
    };"); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-29T20:00:33.520

“MongoDB 不会为只有一个值的键调用 reduce 函数。值参数是一个数组，其元素是“映射”到键的值对象。”

[http://docs.mongodb.org/manual/reference/command/mapReduce/#mapreduce-reduce-cmd](http://docs.mongodb.org/manual/reference/command/mapReduce/#mapreduce-reduce-cmd)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T19:44:13.390

> 这是 mapreduce 的自然行为吗？

是的。

# c++ - 提升 asio 有状态服务器设计

> ID：11021735
> 
> 赞同：3
> 
> 时间：2012-06-13T19:11:28.490
> 
> 标签：c++, boost, tcp, boost-asio

我正在写一个服务器应用程序`boost::asio`

1.  在这里我实例化一个`Server`拥有一个`io_service`

2.  服务器由`server.start()`调用的方法启动，**甚至在它获得新连接之前**`Server::accept()`创建一个新的`Session`
***   调用`_acceptor.async_accept`thats设置一个回调，该回调调用`Session::handler()`执行握手的方法。**

 **现在可以在获得新客户端之前创建一个套接字吗？在这段代码中，会话在编写`"Hello "`消息后自动销毁，在 HTTP 的情况下没问题，但我想进行有状态通信。所以套接字必须`async_wait`在它刚刚写完之后才能阅读`"Hallo "`。我也想知道这个设计好不好？或者它有任何设计缺陷。

这是我的可编译代码

~

```
class Session: public boost::enable_shared_from_this<Session>, private boost::noncopyable{
  private:
    size_t _id;
    boost::asio::ip::tcp::socket   _socket;
  public:
    typedef boost::shared_ptr<Session> pointer;
    static pointer create(boost::asio::io_service& ios){
      return pointer(new Session(ios));
    }
  private:
  explicit Session(boost::asio::io_service& ios): _socket(ios){
    static size_t counter = 0;
    _id = counter++;
    std::cout << ">> Session " << id() << " constructing" << std::endl;
  }
  public:
    void handler(const boost::system::error_code &ec){
      const std::string message = (boost::format("HTTP/1.1 200 OK\r\nContent-Length: %2%\r\n\r\nHello, %1%!") % id() % (7+boost::lexical_cast<std::string>(id()).length())).str();
      if(!ec){
        boost::asio::async_write(_socket, boost::asio::buffer(message), boost::bind(&Session::write_handler, this));
      }else{
        std::cout << ec.message() << std::endl;
      }
    }
    void write_handler(){

    }
    size_t id() const{
      return _id;
    }
    boost::asio::ip::tcp::socket& socket(){
      return _socket;
    }
    virtual ~Session(){
      std::cout << ">> Session " << id() << " destructing" << std::endl;
    }
    };

class Server: public boost::enable_shared_from_this<Server>, private boost::noncopyable{
  private:
    boost::asio::io_service        _ios;
    boost::asio::ip::tcp::acceptor _acceptor;
  public:
    explicit Server(boost::asio::ip::tcp::endpoint& endpoint):_acceptor(_ios, endpoint){

    }
    void start(){
      accept();
      _ios.run();
    }
    void accept(){
      std::cout << "accepting " << std::endl;;
      Session::pointer session = Session::create(_ios);
      _acceptor.async_accept(session->socket(), boost::bind(&Server::handler, this, session, boost::asio::placeholders::error));
    }
    void handler(Session::pointer session, const boost::system::error_code &ec){
      if(!ec){
        session->handler(ec);
      }else{
        //possible destroy session ? but how to destroy a shared pointer ?
      }
      accept();
    }
};

int main(){  
  const unsigned int port = 5050;
  boost::asio::ip::tcp::endpoint endpoint(boost::asio::ip::tcp::v4(), port);

  Server server(endpoint);
  server.start();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:10:38.293

整体设计看起来还可以，但是有一些实现错误：

*   `Session::handler()`: `message`，提供的底层缓冲区，在被调用[`async_write()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/async_write/overload1.html)之前可能会超出范围。`async_write()`这违反了 API 要求的保证。考虑为 制作`message`一个成员变量`Session`，或者`static`在成员函数中制作它。这是文档的相关摘录：

    > 尽管缓冲区对象可以根据需要被复制，但底层内存块的所有权由调用者保留，它必须保证它们在调用处理程序之前保持有效。以下是文档的相关摘录：

*   对于继承自 的对象，在将实例句柄传递给 时`boost::enable_shared_from_this`使用`shared_from_this()`而不是指针。否则，可能会在处理程序运行之前删除指向的对象实例。`this``boost::bind``this`

另外，`Server::handler()`为了`Session`解决`boost::shared_ptr`.**

# javascript - JQuery 和 Twitter Bootstrap “按钮”插件 - 选择值

> ID：11021736
> 
> 赞同：3
> 
> 时间：2012-06-13T19:11:29.940
> 
> 标签：javascript, jquery, twitter-bootstrap

我有以下 HTML 并想使用 Bootstrap 的按钮插件 - [http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)来选择“值”元素：

```
<div class="btn-group pull-right nav-tabs" data-toggle="buttons-radio">
  <button class="btn" value="60">Hour</button>
  <button class="btn" value="1440">Day</button>
  <button class="btn" value="10080">Week</button>
  <button class="btn" value="43200">30 Day</button>
</div> 
```

我有以下 JavaScript 成功执行 onClick，但返回未定义。

```
$('.nav-tabs').button().click( function(e){     

  var selected = $(this).attr('value');

  console.log(selected);
}); 
```

谁能建议我如何从 html 中获取“值”元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T19:13:47.553

您没有选择按钮。它应该看起来像这样。

```
$('.nav-tabs').on('click', 'button', function(e){     

  var selected = $(this).attr('value');

  console.log(selected);
}); 
```

# actionscript - 在 actionscript 中获取当前 UTC 时间

> ID：11021744
> 
> 赞同：1
> 
> 时间：2012-06-13T19:12:07.553
> 
> 标签：actionscript, timestamp, actionscript-2, unix-timestamp

如何获得自纪元以来的 UTC 时间毫秒数？

就像`myDate.getTime()`返回本地时间的毫秒一样，我需要在通用（UTC）时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:25:33.223

[ActionScript 2 Date 对象](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)有一个 getTimezoneOffset 方法，可以为您提供 UTC 和本地时区之间的差异（以分钟为单位）。

```
var utc = myDate.getTime() + (myDate().getTimezoneOffset() * 60000); 
```

# c# - Asmx Web 服务下载大文件

> ID：11021746
> 
> 赞同：4
> 
> 时间：2012-06-13T19:12:10.703
> 
> 标签：c#, web-services, soap, asmx, large-files

使用 Web 服务下载大文件（大约 400mb）时出现问题。今天我们有一个 asmx Web 服务（使用肥皂协议）来获取这个文件（返回一个字节 []）和一个使用这个 Web 服务的引用来下载文件的 Windows 服务。如果文件很大，它会消耗大量 RAM MEMORY（几乎是所有可用的计算机内存）。我想知道什么是通过 Windows 服务下载文件的更好方法，而不消耗大量内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:27:38.893

根据您的文件是什么，您可能会通过内置压缩获得非常好的结果，以减少文件大小，从而减少您的问题。检查类的`EnableDecompression`属性`SoapHttpClientProtocol`，您可以在客户端上对它进行子类化并使用 IIS 提供的压缩功能。这种方法可以消除对任何其他修改的需要。几百兆应该没什么大不了的，还是你的应用程序消耗更多？

编辑：在仔细阅读您的问题后，我突然想到您正在寻找一种不同的方式来完全 dl 您的文件。`WebClient`在这种情况下，通过 http/ftp 公开文件并让您的 Windows 服务使用类下载它可能是最简单的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:16:29.867

您可以使用[MTOM](http://www.tfabraham.com/blog/2006/12/optimize-large-data-transfer-in-web-services-with-mtom/)进行大文件转换。

# android - 从 phonegap 应用程序中单击 Facebook“喜欢”会导致空白页面

> ID：11021749
> 
> 赞同：0
> 
> 时间：2012-06-13T19:12:30.150
> 
> 标签：android, facebook, cordova, facebook-like, phonegap-plugins

我有我连接到 facebook 的 phonegap 应用程序。我有一个点赞按钮，单击该按钮我希望触发一个事件并将通知发送到我的 facebook 页面。但另一方面，它只是打开一个空白网页。这是我的代码。任何人都可以指出我是否在某个地方出错了..

```
//Graph Tag
<meta property="og:title" content="Hello world" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Hello World" />
<meta property="og:description" content="Hello World!  This is my mobile web sample app." />
<meta property="og:image" content="http://www.facebookmobileweb.com/start/img/facebook_icon_large.png"/>

//Initializing the facebook JS and the javascript
<!-- This initializes the Facebook JS SDK. -->
<div id="fb-root"></div>
<!--<script src=" http://connect.facebook.net/en_US/all.js"></script>-->
<script src="cordova-1.5.0.js"></script>
 <!-- cordova facebook plugin -->
<script src="cdv-plugin-fb-connect.js"></script>
 <!-- facebook js sdk -->
<script src="facebook_js_sdk.js"></script>

   <script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '281846961912565', // App ID
    channelUrl : 'https://www.facebook.com/appcenter/281846961912565?preview=1', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

    // Additional initialization code here
   };

    // Load the SDK Asynchronously
    (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
 }(document));

</script>

//The like button
<fb:like href="https://www.facebook.com/appcenter/281846961912565?preview=1" send="true" width="450" show_faces="true"></fb:like> 
```

在此先感谢，

# java - Java 应用程序的安装程序

> ID：11021753
> 
> 赞同：-3
> 
> 时间：2012-06-13T19:12:47.273
> 
> 标签：java, deployment, jar, installation

我需要为我的 java 桌面应用程序创建一个安装程序。我不喜欢手动编写安装程序。无论如何我可以为Java应用程序创建安装程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:15:51.753

如果您希望为 Windows 应用程序创建安装程序，请查看[Advanced Installer](http://www.advancedinstaller.com/)。对于基于 linux 的机器，我只需要常规的 tar.gz 文件和 README 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:15:55.943

1.  Pack Jacket 软件：这是一款带有简单 GUI 的免费软件。可从 sourceforge 下载。该文件能够创建扩展名为 .exe、.jar 等的安装程序。完整的教程可在 youtube 上找到。只需在 youtube 中搜索“如何为常规 java 项目制作安装程序”，然后第一个结果，您就会找到教程（我试图在此处粘贴链接，但 stackoverflow 不允许它:(）。

2.  IZPack：IZpack 没有任何 GUI，只有一些文件。您必须手动完成。它将 xml 文件作为参数来指示它如何创建安装程序。使用 IZpack 的教程在[这里](http://www.softwarepassion.com/deploy-your-java-application-with-izpack-installer/)。我正在使用 IZpack，我个人比打包夹克更喜欢它。

有更多用于创建这些安装程序的应用程序，但据我所知，这些是最著名的，因为我在使用过的许多应用程序中都看到了这些安装程序。

希望您可以通过阅读本文来简化您的工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:44:36.143

> ..我的 java 桌面应用程序的安装程序。

[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)通过网络交付它。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

# c++ - 移动向量是否会使迭代器无效？

> ID：11021764
> 
> 赞同：72
> 
> 时间：2012-06-13T19:13:27.903
> 
> 标签：c++, iterator, c++11

如果我有一个指向 vector 的迭代器`a`，那么我 move-construct 或 move-assign vector `b`from `a`，该迭代器是否仍然指向同一个元素（现在在 vector 中`b`）？这就是我在代码中的意思：

```
#include <vector>
#include <iostream>

int main(int argc, char *argv[])
{
    std::vector<int>::iterator a_iter;
    std::vector<int> b;
    {
        std::vector<int> a{1, 2, 3, 4, 5};
        a_iter = a.begin() + 2;
        b = std::move(a);
    }
    std::cout << *a_iter << std::endl; // Is a_iter valid here?
    return 0;
} 
```

`a_iter`仍然有效，因为`a`已被移入`b`，或者迭代器是否因移动而失效？作为参考，`std::vector::swap` [不会使迭代器无效](https://stackoverflow.com/a/4125186/185171)。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T20:00:37.920

虽然假设`iterator`s 在 a 之后仍然有效可能是合理的`move`，但我认为标准实际上并不能保证这一点。因此，迭代器在`move`.

* * *

我在标准中找不到任何参考，该参考*明确指出*在a 之前存在的迭代`move`器*在*`move`.

`iterator`从表面上看，假设 an通常实现*为*指向受控序列的指针似乎是完全合理的。如果是这种情况，那么迭代器在`move`.

但是 an 的`iterator`实现是实现定义的。这意味着，只要`iterator`在特定平台上满足标准规定的要求，它就可以以任何方式实施。从理论上讲，它可以实现为返回`vector`类的指针和索引的组合。如果*是*这种情况，那么迭代器将在`move`.

是否以`iterator`这种方式实际实现是无关紧要的。它可以以这种方式实现，因此如果没有标准的特定保证后`move`迭代器仍然有效，您不能假设它们是有效的。还要记住，**在**`swap`. 这在之前的标准中得到了明确的说明。也许这只是 Std 委员会的疏忽，没有在 a 之后对迭代器做出类似的澄清`move`，但无论如何都没有这样的保证。

因此，总而言之，你不能假设你的迭代器在`move`.

## 编辑：

草案 n3242 中的 23.2.1/11 规定：

> 除非另有规定（明确地或通过根据其他函数定义函数），调用容器成员函数或将容器作为参数传递给库函数不应使该容器内对象的迭代器无效或更改其值.

这可能会导致人们得出结论，迭代器在 a 之后是有效的`move`，但我不同意。在您的示例代码`a_iter`中，是`vector` `a`. 之后`move`，那个容器，`a`肯定已经改变了。我的结论是上述条款不适用于本案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-13T19:36:50.427

我认为将移动构造更改为移动分配的编辑会改变答案。

至少如果我正确地阅读了表 96，移动构造的复杂性被给出为“注释 B”，除了`std::array`. 然而，移动*分配*的复杂度是线性的。

因此，移动构造基本上别无选择，只能从源中复制指针，在这种情况下，很难看出迭代器如何变得无效。

然而，对于移动分配，线性复杂性意味着它*可以*选择将单个元素从源移动到目标，在这种情况下，迭代器几乎肯定会变得无效。

描述加强了元素移动分配的可能性：“a 的所有现有元素要么被移动分配，要么被销毁”。“销毁”部分对应于销毁现有内容，并从源“窃取”指针——但“移动分配到”表示将单个元素从源移动到目标。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-06T03:05:36.353

**tl;dr ：是的，移动 a`std::vector<T, A>`可能会使迭代器无效**

[常见的情况（`std::allocator`就地）是无效不会发生，但不能保证，如果您依赖于您的实现当前不会使迭代器无效的事实，切换编译器甚至下一次编译器更新可能会使您的代码行为不正确。]

* * *

*移动任务*：

在移动赋值之后迭代器是否`std::vector`实际上保持有效的问题与向量模板的分配器意识有关，并且取决于分配器类型（可能还有其各自的实例）。

在我见过的每个实现中，移动赋值`std::vector<T, std::allocator<T>>`**¹**实际上不会使迭代器或指针无效。然而，当涉及到使用它时存在一个问题，因为**标准不能保证迭代器对于`std::vector`实例的任何移动分配通常保持有效，因为容器是分配器感知的。**

自定义分配器可能具有状态，如果它们在移动分配时不传播并且不比较相等，则向量必须使用其自己的分配器为移动的元素分配存储空间。

让：

```
std::vector<T, A> a{/*...*/};
std::vector<T, A> b;
b = std::move(a); 
```

现在如果

1.  `std::allocator_traits<A>::propagate_on_container_move_assignment::value == false &&`
2.  `std::allocator_traits<A>::is_always_equal::value == false &&`（*可能从 c++17 开始*）
3.  `a.get_allocator() != b.get_allocator()`

然后`b`将分配新的存储空间并将元素`a`一个接一个地移动到该存储空间中，从而使所有迭代器、指针和引用无效。

原因是满足上述条件**1.**禁止在容器移动时分配器的移动分配。因此，我们必须处理分配器的两个不同实例。如果这两个分配器对象现在既不总是比较相等（**2.**）也不实际比较相等，那么两个分配器具有不同的状态。分配器`x`可能无法释放另一个`y`具有不同状态的分配器的内存，因此具有分配器的容器`x`不能仅仅从通过 分配其内存的容器中窃取内存`y`。

如果分配器在移动分配上传播，或者如果两个分配器比较相等，那么实现很可能会选择只生成`b`自己`a`的数据，因为它可以确保能够正确地解除分配存储。

**¹** :`std::allocator_traits<std::allocator<T>>::propagate_on_container_move_assignment`并且`std::allocator_traits<std::allocator<T>>::is_always_equal`两者都是`std::true_type`（对于任何非专业的`std::allocator`）的 typdefs。

* * *

*移动施工*：

```
std::vector<T, A> a{/*...*/};
std::vector<T, A> b(std::move(a)); 
```

分配器感知容器的移动构造函数将从当前表达式从中移动的容器的分配器实例中移动构造其分配器实例。因此，确保了适当的释放能力，并且内存可以（实际上将）被盗，因为移动构造（除了`std::array`）必然具有恒定的复杂性。

*注意：即使对于移动构造，仍然不能保证迭代器保持有效。*

* * *

*交换时*：

要求两个向量的迭代器在交换后保持有效（现在只是指向相应的交换容器）很容易，因为交换只有在以下情况下才具有定义的行为

1.  `std::allocator_traits<A>::propagate_on_container_swap::value == true ||`
2.  `a.get_allocator() == b.get_allocator()`

因此，如果分配器不在交换时传播，并且如果它们不比较相等，那么交换容器首先是未定义的行为。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T19:49:45.157

由于没有什么可以阻止迭代器保持对原始容器的引用或指针，我想说你不能依赖迭代器保持有效，除非你在标准中找到明确的保证。

# jquery - 在 jQuery 中的原始选择器之后没有立即放置时选择下一个匹配的类/元素

> ID：11021765
> 
> 赞同：0
> 
> 时间：2012-06-13T19:13:29.947
> 
> 标签：jquery, jquery-selectors

我想我已经差不多了，但还没有完全...

仅当 DOM 中上一层和下两层的元素包含某个字符串时，我才想从此 HTML 中选择 a.rate 按钮。我知道这扩展了 jQuery 选择器的限制，但它只是为了好玩而不是生产。

HTML：

```
<div class="comment">

    <div class="submitted">
        <a href="#" title="View user profile.">Blow, Jo</a>  
    </div><!-- CLASS submitted -->

    <div class="content">
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
  </div><!-- CLASS content -->

      <ul class="links">
        <li class="comment_delete first"><a href="/comment/delete/1204">delete</a></li>
            <li class="comment_edit"><a href="/comment/edit/1204">edit</a></li>
            <li class="flag_content_add">hippo</li>
            <li class="rate_thumbup_comments last">
                <span>
                    <div class="rate-widget-1 rate-widget clear-block rate-average">
                        <a class="rate-button" rel="nofollow" href="#">up</a>
                        <div class="rate-info">1 person likes this.</div>
                    </div>
                </span>
            </li>
        </ul>

</div> 
```

到目前为止，我得到的 jQuery 选择器：

```
$('.submitted a:contains("Blow")').parent().parent().next('.links .rate_thumbup_comments .rate-widget').find('a').css('display', 'none'); 
```

所以，重申一下：我想选择 div.rate-widget 内的标签，它位于 li.rate_thumbup_comments 内，只有当容器 div.submitted 有一个带有“Blow”的字符串时。所有这些都在容器 div.comment 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:28:58.433

因此，例如，您想要隐藏特定用户评论的所有评级小部件。如我错了请纠正我。

```
$('.submitted a:contains("Blow")').closest(".comment").find('.rate-widget a').hide(); 
```

这就是你本质上想要做的吗？

`.next()`仅选择下一个元素，并且仅当它与选择器匹配时才传入。如果您需要选择一个不立即下一个的元素，请使用`.nextUntil(targetselector).next()`，或者在您的情况下，`.nextUntil(".links").next()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:32:55.413

这似乎适用于您提供的 html：

```
$('.submitted a:contains("Blow")').parent().parent().children('.links').find('.rate-button').css('display', 'none'); 
```

# javascript - 无论屏幕分辨率如何，我如何居中 javascript css popup div？

> ID：11021766
> 
> 赞同：16
> 
> 时间：2012-06-13T19:13:33.707
> 
> 标签：javascript, css, popup

我有以下代码在禁用背景的同时打开一个新的弹出窗口，问题是我必须定位它，使其距离顶部 100px（已经通过 CSS #dialog 得到）并且也在屏幕的中心，不管用户的分辨率是多少？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <script type="text/javascript">
        function showPopUp(el) {
            var cvr = document.getElementById("cover")
            var dlg = document.getElementById(el)
            cvr.style.display = "block"
            dlg.style.display = "block"
            if (document.body.style.overflow = "hidden") {
                cvr.style.width = "1024"
                cvr.style.height = "100%"
            }
        }
        function closePopUp(el) {
            var cvr = document.getElementById("cover")
            var dlg = document.getElementById(el)
            cvr.style.display = "none"
            dlg.style.display = "none"
            document.body.style.overflowY = "scroll"
        }
    </script>
    <style type="text/css">
        #cover {
            display:        none;
            position:       absolute;
            left:           0px;
            top:            0px;
            width:          100%;
            height:         100%;
            background:     gray;
            filter:         alpha(Opacity = 50);
            opacity:        0.5;
            -moz-opacity:   0.5;
            -khtml-opacity: 0.5
        }

        #dialog {
            display:    none;
            left:       100px;
            top:        100px;
            width:      300px;
            height:     300px;
            position:   absolute;
            z-index:    100;
            background: white;
            padding:    2px;
            font:       10pt tahoma;
            border:     1px solid gray
        }
    </style>
</head>
<body>
<div id="cover"></div>
<div id="dialog">
    My Dialog Content
    <br><input type="text">
    <br><input type="button" value="Submit">
    <br><a href="#" onclick="closePopUp('dialog');">[Close]</a>
</div>
<a href="#" onclick="showPopUp('dialog');">Show</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-13T19:16:50.687

**基于 CSS 的**中心解决方案：

您需要使用这些样式使其看起来死心：

```
position:absolute;
top:50%;
left:50%;
width:400px;  /* adjust as per your needs */
height:400px;   /* adjust as per your needs */
margin-left:-200px;   /* negative half of width above */
margin-top:-200px;   /* negative half of height above */ 
```

所以`position`应该指定。和`top`应该`left`是`50%`。`margin-left`和`margin-top`应该分别是盒子宽度和高度的负值的一半。

请注意，如果您希望您的弹出窗口即使在页面滚动时也出现在中心，您将不得不使用`position:fixed`它在 IE6 中不起作用的回退。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-18T15:42:12.073

只需这样做：

```
.body {
    position: relative;
}
.popup {
    position: absolute;
    max-width: 800px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
} 
```

无论屏幕或弹出窗口大小。这将使`<div class="popup"></div>`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T20:06:53.017

你需要的是一个**灯箱**。

要创建它，您应该修改 HTML、CSS 和 JS 代码。

假设您的灯箱仅包含字符串“登录表单”。（你可以把你想要的一切都放在那里） HTML 代码应该是这样的：

```
<div id = "loginBox">login form</div> 
```

现在，我们需要用 CSS 隐藏它：

```
div#loginBox {
    display: none;
} 
```

现在我们的盒子是不可见的。让我们修改我们的框，使其距离顶部 100px：

```
div#loginBox {
    display: none;
    top: 100px;
} 
```

我们稍后会担心禁用背景。

我们的下一个工作是制作一个按钮，在需要时显示该框。十分简单：

```
<div id = "loginBox" >login form</div>
<a id = "displayButton">login</a> 
```

请注意，我们不需要“href”属性，因为这会在点击和其他不需要的行为时移动屏幕。

让我们通过 JS 在按钮上附加事件处理程序：

```
var IE = document.all ? true : false; // obligatory "browser sniffing"

function display_box() {
    document.getElementsById("loginBox").style.display = "inline-block"; // or "inline" 
}

window.onload = function() {
    var login_box = document.getElementsById("loginBox");
    if (!IE) {
        login_box.addEventListener( "click", display_box , false );
    }
    else {
        login_box.attachEvent( "onclick", display_box );
    }
} 
```

但是您希望它位于屏幕中央吗？然后函数是这样的：

```
function display_box() {
    var theBox = document.getElementsById("loginBox").style,
        left = document.width / 2 - 50;   // 150 because it is 300 / 2

    theBox.display = "inline-block";
    theBox.left = left.toString() + "px";
} 
```

我猜你会想在某个时候关闭窗口并制作“禁用背景”效果。为此，您可以创建一个在整个屏幕上扩展的 div 类，在其上附加一个“显示”事件，在 css 中放置一些 z-index 以确保 loginBox 位于“禁用背景”之上，并附加一个“关闭“背景”div 上的 loginBox”事件。现在最终的代码如下所示：

请注意，我们只关心登录按钮的位置，因为其他按钮是隐藏的，然后由 JS 修改：

HTML：

```
<div id = "loginBox" >login</div>
<a id = "displayButton">login</a>
<div id = "backgroundDarkener"> </div> 
```

CSS：

```
div#loginBox {
    display: none;
    top: 100px;
    width: 300px; #it is important to know the width of the box, to center it correctly
    z-index: 2;
}
div#backgroundDarkener {
    background: #000;
    display: none;
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    z-index: 1;
    opacity: 0.8; 
    # needless to say, you should play with opacity or if you want your
    # css to validate - background image (because I suspect it won't 
    # validate for old versions of IE, Safari, etc.) This is just a suggestion
} 
```

JS：

```
var IE = document.all ? true : false; // obligatory "browser sniffing"

function display_box() {
    var theBox = document.getElementsById("loginBox").style,
        background = document.getElementsById("loginBox").style,
        left = document.width / 2 - 150;   // 150 is 300 / 2

    theBox.display = "inline-block";
    theBox.left = left.toString() + "px";
    background.display = "inline-block";
}
function hide_box() {
    document.getElementsById("loginBox").style.display = "none";
    document.getElementsById("backgroundDarkener").style.display = "none"; 
}

window.onload = function() {
    var login_box = document.getElementsById("loginBox"),
        background = document.getElementsById("backgroundDarkener");

    if (!IE) {
        login_box.addEventListener( "click", display_box , false );
        background.addEventListener( "click", hide_box , false );
    }
    else {
        login_box.attachEvent( "onclick", display_box );
        background.attachEvent( "onclick", hide_box );
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-09T19:26:06.823

这就是 flexbox 现在来救援的地方！

```
.parent {
  display: flex;
  height: 300px; /* Or whatever */
}

.child {
  width: 100px;  /* Or whatever */
  height: 100px; /* Or whatever */
  margin: auto;  /* Magic! */
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T19:15:15.570

一个快速的谷歌搜索发现[了这个](http://www.nigraphic.com/blog/java-script/how-open-new-window-popup-center-screen)；

```
function PopupCenter(pageURL, title,w,h) {
  var left = (screen.width/2)-(w/2);
  var top = (screen.height/2)-(h/2);
  var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-27T06:11:27.053

您需要使用这些样式来使 div 居中：

```
width:500px; 
left:0;
right:0;
margin:0 auto; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T19:15:58.633

很简单，`margin: 100px auto;`。无需在 JavaScript 中进行计算。

**[现场示例](http://dabblet.com/gist/2925895)**

# java - java中的音频波形已完成编码，但波形的读数不同

> ID：11021772
> 
> 赞同：0
> 
> 时间：2012-06-13T19:14:00.370
> 
> 标签：java, audio, visualization, javasound, waveform

我已经从麦克风捕获音频并绘制了录音波形，我怀疑波形读数会在 -1+1 或 +5-5 之间吗？我的读数在 1000 之间。有人可以帮忙吗？

使用来自互联网的代码（例如：SamplingGraph.java，CapturePlayback.java）我完成了这个。，

记录后，我在 Jpanel 中缩放和绘制波形和刻度读数，但波形的最高和最低值就像 3000 和 -1890 之类的东西，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:19:39.147

来自麦克风的样本几乎总是`short`类型，它们是范围从 -32768..+32767 的整数。这似乎与您看到的值一致。如果您希望它们的`doubles`范围从 -1 到 1，请在循环中修复它们

```
double[] dSamples = new double[iSamples.length];

for (int i=0:i<iSamples.length:i++) {
    dSamples[i] = iSamples[i] / 32768.0d;
} 
```

# grails - 可以在 grails 2.x 中使用 g:form 和 g:link 构建安全的 https 链接吗？

> ID：11021776
> 
> 赞同：0
> 
> 时间：2012-06-13T19:14:05.087
> 
> 标签：grails, https, spring-security

这类似于我尚未回答的问题[https://stackoverflow.com/questions/10825422/can-grails-redirect-command-be-told-to-respect-protocol-of-the-current-request](https://stackoverflow.com/questions/10825422/can-grails-redirect-command-be-told-to-respect-protocol-of-the-current-request)但在此如果我只是想确保我指定给控制器的某些链接和表单操作是明确的 https。我知道我可以手动构建这些链接，但这违背了标签自动添加正确主机名、应用程序路径等的目的。

在一个完美的世界中，如果我在 https 页面上，链接将是相对的，如果不是，则绝对链接，但如果不可能，我将始终采用绝对链接。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:28:59.007

这个请求有一个[开放的jira](http://jira.grails.org/browse/GRAILS-3625)。

我认为您可以创建自己的标签库来完成这项工作。只需调用`g.createLink`并将 http 替换为 https。

```
class MyTagLib {
  def secureLink = { attrs, body ->
    def link = g.createLink(attrs)
    out << link.replace('http','https')
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T19:53:57.670

扩展 Sergios 解决方案，但强制 absolute="true"：

```
class MyTagLib {
  def secureLink = { attrs, body ->
    // forcing creation of an absolute url
    attrs.absolute = 'true'

    def link = g.createLink(attrs)
    out << link.replaceFirst(/^http:/, 'https:')
  }
} 
```

或者对于你的“完美世界”场景，你可以试试这个：

```
class MyTagLib {
  def secureLink = { attrs, body ->
    if (!request.isSecure()) {
      attrs.absolute = 'true'
      def link = g.createLink(attrs)
      out << link.replaceFirst(/^http:/, 'https:')
    } else {
      out << g.createLink(attrs)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T20:40:32.150

要做到这一点，最快的方法是将您的`grails.serverURL`in配置`Config.groovy`为使用 https 协议。然后`absolute="true"`在您的[gsp 表单标签](http://grails.org/doc/latest/ref/Tags/form.html)和链接标签中使用。

# android - 在 logcat 中过滤内存消息

> ID：11021782
> 
> 赞同：0
> 
> 时间：2012-06-13T19:14:28.520
> 
> 标签：android, shell, grep, adb

我的 windows-7 命令提示符是否允许我为我的应用程序过滤内存 logcat 消息。

如果这是可能的，我如何过滤消息。

我试过这个 adb shell logcat | grep pid > "输出文件的路径"

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:29:07.350

当您编写代码来打印日志消息时，您有日志标签，您可以使用 grep 来获取该标签。

例如，

```
private static final String TAG = "applog";
....
{
    Log.e(TAG, "this is a log");
} 
```

要查看这些消息，请键入`adb logcat | grep 'applog'` 另外，如果您有多个不同的日志标签，您可以使用命令`adb logcat | grep 'tagone\|tagtwo'`

希望有帮助！

# ruby-on-rails - 如何在多个模型中声明和引用单个哈希变量（DRY，ruby on rails）

> ID：11021784
> 
> 赞同：0
> 
> 时间：2012-06-13T19:14:38.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, model, global-variables

我有几个模型需要调用一个将特定哈希作为输入的方法。我应该在哪里声明这个哈希以保持干燥，然后我如何在多个模型中使用它？

所有用途的哈希值都是相同的。具体来说，它只是我想传递给调用[建立](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-establish_connection)连接的连接详细信息的散列。我意识到该方法需要一个 URL，尽管我仍在使用 rails 3.1，并且该方法直到稍后才可用。

我不想在五个模型中重复以下内容，我只想调用类似 `establish_connection(legacy_db_connection_hash)`.

```
establish_connection(
  :adapter  => 'mysql',
  :host     => ENV['LEGACY_DATABASE_HOST'],
  :username => ENV['LEGACY_DATABASE_USERNAME'],
  :password => ENV['LEGACY_DATABASE_PASSWORD'],
  :database => ENV['LEGACY_DATABASE_NAME']
) 
```

我在想也许有办法通过`/lib`，但我真的不知道该怎么做。

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:21:26.507

您还可以在 application.rb 文件中声明配置

```
模块 Yourapp
  类应用程序 < Rails::应用程序

    config.db_connection_config = {
     ......
    }

  结尾
结尾

```

你可以使用它`Yourapp::Application.config.db_connection_config` 如果需要，你也可以在单独的环境文件中修改它们。

并且可能不是使用建立连接每个时间，您可以在 lib 模块中放入一个单独的模块，就像它在上一个答案中建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:17:08.347

它应该进入一个`module`.

例如，`Foo`在文件中声明一个模块`lib/foo.rb`（不要忘记`self.`在方法名前面）：

```
module Foo
  # returns a hash of connection settings
  def self.settings
    {
      adapter: 'mysql2',
      database: ENV['LEGACY_DATABASE_NAME'],
      username: ENV['LEGACY_DATABASE_USERNAME'],
      password: ENV['LEGACY_DATABASE_PASSWORD'],
      host:     ENV['LEGACY_DATABASE_HOST']
    }
  end
end 
```

`Foo.settings``include Foo`当您在您的模型中时将可用。

此外，请确保将`lib`目录添加到`config.autoload_paths`in `config/application.rb`，以便`lib/foo.rb`读取并`Foo`加载其包含的模块：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:40:52.897

这是我的做法：

### 配置/初始化程序/profile_store.rb

```
config = YAML.load_file('config/profile_store.yml')[Rails.env]
Rails.application.config.profile_store = config.symbolize_keys 
```

### 配置/profile_store.yml

```
development:
  host: localhost
  prefix: dev-profile

test:
  host: localhost
  prefix: test-profile 
```

您稍后可以访问它，`Rails.application.config.profile_store`并且在开发中您将获得

```
{:host => 'localhost', :prefix => 'dev-profile'} 
```

# hadoop - hdfs数据目录“处于不一致状态：与他人不兼容”。

> ID：11021786
> 
> 赞同：3
> 
> 时间：2012-06-13T19:15:00.127
> 
> 标签：hadoop, hdfs

对不起，但这让我很紧张...

正是当我开始通过配置单元加载表时，我开始收到此错误。亲爱的老谷歌也无能为力。

我的情况 -

1.  单节点设置。Namenode 工作正常。
2.  datanode 启动失败并显示此消息 -

```
错误datanode.DataNode：org.apache.hadoop.hdfs.server.common.InconsistentFSStateException：目录/xxxxxx/hadoop/hdfs-data-dir处于不一致状态：与其他不兼容。

```

我已经尝试重新格式化我的名称节点，但它没有帮助。

另外，我试图找到“格式化”我的数据节点的方法，但到目前为止没有成功..

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T22:21:21.760

[该网站](http://jvilaikeo.com/?p=72)在驱动器重新格式化后向我指出了一个解决方案：

> 我遇到了 hadoop 的问题，在我重新格式化驱动器后它无法启动。要解决此问题，请确保所有 hadoop 目录的 VERSION 编号相同
> 
> md5sum /hadoop/sd*/dfs/data/current/VERSION
> 
> 如果它们在所有分区中的版本不同，那么您将收到错误消息。

我只是从其他驱动器之一复制了 VERSION 信息，更改了权限，然后重新启动了 HDFS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:44:11.177

找到了解决办法。需要

1.  创建一个新的 hdfs 目录，
2.  从组中删除写权限（chmod gw xxxx）和
3.  从 /tmp 中删除所有与 hadoop/hdfs 相关的临时文件。

我相信可能/将会有更好/更清洁的方法来解决这个问题。

因此，问题仍然悬而未决。

# math - 绘制 NSolve 的结果

> ID：11021787
> 
> 赞同：0
> 
> 时间：2012-06-13T19:15:00.833
> 
> 标签：math, wolfram-mathematica, plot

我正在尝试绘制一个使用 NSolve 部分获得的参数方程。这是我尝试的代码：

```
VolumeDiff[v_] = 1.7 - v
SolveR[ v_] = 
 Re[NSolve[16 v^2 - 16 v*(r^3) + 3 (r^2) + 1 == 0, r, Reals]]
EnergyPos[r_] = r/2 (r + Sqrt[r^2 - 1])
EnergyNet[r_] = EnergyPos[SolveR[r]] + EnergyPos[SolveR[VolumeDiff[r]]]
ParametricPlot[{Re[EnergyNet[x]], 1.7 - 2\. x}, {x, .1, 1.6}] 
```

基本上，我有一个包含两个变量的三次方，我求解一个给定另一个变量，并尝试根据该原始给定变量绘制两个参数方程。这应该是两个气泡连接在一起的能量与体积差的关系图。但是，我的轴是空白的。我使用 NSolve 来隔离三次方程的实根，我猜 Mathematica 在涉及 NSolve 的绘图时存在问题。我浏览了整个互联网，但找不到任何答案。谢谢你的帮助！大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:36:24.007

修正了几个错误。您应该阅读有关如何`SetDelayed ( := )` 和`Solve[]`工作的信息。

```
VolumeDiff[v_] := 1.7 - v
SolveR[v_] := NSolve[16 v^2 - 16 v*(r^3) + 3 (r^2) + 1 == 0, r, Reals][[1]]
EnergyPos[r_] := r/2 (r + Sqrt[r^2 - 1])
EnergyNet[r_] := EnergyPos[r /. SolveR[r]]+EnergyPos[r /. SolveR[VolumeDiff[r]]]
ParametricPlot[{EnergyNet[x], 1.7 - 2\. x}, {x, .1, 2}] 
```

![在此处输入图像描述](../Images/ed3848aab09f57fe186e3bb52b7a6876.png)

# php - 如果图像魔法命令位于多行上，它们会运行吗？

> ID：11021790
> 
> 赞同：1
> 
> 时间：2012-06-13T19:15:06.913
> 
> 标签：php, imagemagick

我正在尝试运行跨越两行以提高可读性的图像魔法命令。使用 PHP exec 方法可以正常运行吗？例如，请看以下几行：

```
exec("convert thumbnail.gif  autumn_leaves.png +swap 

        -gravity center -compose DstOver -composite 

        border_leaves.gif"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:17:06.183

可能不是。除了将新行实际放入字符串中，您还可以使用连接，使其看起来像多行，但最终字符串仍然是一行：

```
exec("convert thumbnail.gif  autumn_leaves.png +swap " .    
     "-gravity center -compose DstOver -composite " .
     "border_leaves.gif"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:19:51.387

这就是我现在编写代码以提高可读性的方式：

```
$cmd = "thumbnail.gif autumn_leaves.png +swap ".
" -gravity center -compose DstOver -composite ";

exec("convert $cmd border_leaves.gif"); 
```

这有一个额外的好处，如果您在代码中使用变量，您可以回显 $cmd 以查看实际命令是什么。

另一个想法是，如果您在块中编写代码，您可以在查找错误时注释掉块以查看代码哪里出错了。

# c# - 使用 DataProtection.DataProtector c# 加密/解密

> ID：11021797
> 
> 赞同：1
> 
> 时间：2012-06-13T19:15:41.150
> 
> 标签：c#, encryption, data-protection

我需要解密最初在不再可用的帐户下创建的连接。

为此，我制作了一个简单的应用程序：

```
private void btnEncrypt_Click(object sender, EventArgs e)
    {            
        DataProtection.DataProtector dp = new DataProtection.DataProtector(DataProtection.DataProtector.Store.USE_MACHINE_STORE);
        try
        {
            byte[] dbToEncrypt = Encoding.ASCII.GetBytes(txtText.Text);
            string resultEncrypted = Convert.ToBase64String(dp.Encrypt(dbToEncrypt, null));
            txtEncrypt.Text = resultEncrypted;                
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex.Message);
        }
    }
private void btnDecrypt_Click(object sender, EventArgs e)
    {            
        DataProtection.DataProtector dp = new DataProtection.DataProtector(DataProtection.DataProtector.Store.USE_MACHINE_STORE);
        try
        {
            byte[] dbToDecrypt = Convert.FromBase64String(txtEncrypt.Text);
            string resultDecrypted = Encoding.ASCII.GetString(dp.Decrypt(dbToDecrypt, null));
            txtDecrypt.Text = resultDecrypted;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex.Message);
        }
    } 
```

现在，我注意到当我在我的计算机上进行测试并尝试在另一台计算机上解密加密结果时，我得到：

> 异常解密。解密失败。密钥在特定状态下无效。

然后，我做了一些研究，发现了这一点：

> 您是否将密钥从一台服务器导出到另一台服务器，因此它们的设置相同？如果不是，您使用的密钥不匹配，这将导致加密/解密错误。

我可以在这里找到钥匙：

> 如何获取validationkey值和decryptionkey值？
> 
> > decryption key can be found at "D:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys"

so my question is: If I export the keys in that location from my computer the the one I want to decrypt the data will that work? and by export mean just copy the key files or do another operation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:24:48.100

AFAIK this is not possible - and in any case is not desirable. DPAPI regularly creates new keys, so even if you could copy the keys between machines, they would become obsolete after a period of time.

If you want to decrypt data on more than one computer, use a different method, e.g. RSA.

# ruby-on-rails-3 - 为什么 Rails 控制器动作方法需要参数

> ID：11021800
> 
> 赞同：6
> 
> 时间：2012-06-13T19:15:53.580
> 
> 标签：ruby-on-rails-3

这是一个全新的项目。这是我运行的确切命令：

1.  `rails new MyProject`
2.  `bundle install`
3.  `rails generate controller Image`

我添加了这条路线：

1.  `root :to => "image#process"`

我已将此功能添加到`ImageController`( `image_controller.rb`)

```
def process
  render :nothing => true
end 
```

最后我删除了默认的`index.html`. 当我运行项目时，它有一个错误说进程需要 0 个参数，而不是 1。所以我修改了方法来告诉我什么参数试图发送给进程。

```
def process(arg)
  p arg
  render :nothing => true
end 
```

字符串“process”被打印到屏幕上。我之前做过几个 Rails 项目，但从未遇到过这种情况。我在某个地方错过了一步吗？这是 Rails 3.0.10 中的新功能吗？或者可能是由 Ruby 1.9.2 引起的？我想我通常使用 1.8.7。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T19:33:21.317

您不能将动作命名为[process](https://github.com/rails/rails/blob/master/actionpack/lib/abstract_controller/base.rb#L117)，这是 rails 控制器的内部方法，请命名为其他名称。

还有许多其他名称不能用于控制器操作，例如渲染、参数、请求。不幸的是，没有这些东西的清单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:53:20.667

为了将来参考，如果你不使用它，你可以在这里查看所有内部方法和类：[ruby doc with nav on top right](http://rubydoc.info/docs/rails/)

在选择名称时帮助我。

# github - 需要没有用户名和密码的github

> ID：11021803
> 
> 赞同：2
> 
> 时间：2012-06-13T19:15:56.917
> 
> 标签：github

我想将项目上传到存储库，但问题是，当我运行命令时：

```
$ git push -u origin master 
```

它向我展示了以下内容：

```
Username: 
Password: 
error: The requested URL returned error: 403 while accessing https://github.com/sanxelsanto/books3.git/info/refs

fatal: HTTP request failed 
```

我应该怎么做才能避免这样的错误信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T19:42:20.917

对于 https 地址，git 将使用 curl 并且需要：

```
$HOME/.netrc 
```

或（对于 Windows）：

```
%HOME%/_netrc 
```

（`%HOME%`定义到您想要的任何目录：`HOME`默认情况下未定义）
其内容：

```
machine github.com
login <your_github_login>
password <your_github_password> 
```

请参阅“ [Git - 如何`.netrc`在 Windows 上使用文件来保存用户和密码](https://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password/6031266#6031266)”。
其他参数在“[与 github 同步](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)”中有详细说明（特别是如果您在防火墙后面并且需要指定代理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:50:06.910

我在 github 上遇到了类似的问题，并通过通过 SSH 而不是 HTTP 配置我的 git repo 来解决它。

第 1 步：在您的 repo 的 github.com 页面上，您将看到三个按钮 HTTPS、SSH 和 Git Read Only。单击“SSH”并复制文本字段的内容。现在有几种方法可以更改配置：

步骤 2a：通过手动编辑配置文件：
打开 repo 的 .git 文件夹并编辑配置文件。查找 [remote "origin"] 并设置 url 配置如下：

```
[remote "origin"]
#The contents of the text field you copied in Step 1
url = git@github.com:<username>/<projectname>.git 
```

步骤 2b：使用 git 命令：
只需运行以下命令（替换用户名和项目名变量）：

```
git config remote.origin.url git@github.com:<username>/<projectname>.git 
```

Step3：您可以使用以下命令查看/确认更改。查找“remote.origin.url”配置：

```
git config -l 
```

# git - git 如何决定在 git-svn 中使用哪个版本的 svn？

> ID：11021804
> 
> 赞同：6
> 
> 时间：2012-06-13T19:15:57.903
> 
> 标签：git, path, git-svn, homebrew

我已经在运行 10.7.4 的 Mac 上安装`git`并使用自制软件。我的机器上`svn`有一个版本似乎是正在使用的版本。`svn``/usr/bin``git svn`

```
$ git --version
git version 1.7.10.4

$ svn --version
svn, version 1.7.5 (r1336830)

$ git svn --version
git-svn version 1.7.10.4 (svn 1.6.17)

$ /usr/bin/svn --version
svn, version 1.6.17 (r1128011) 
```

那么，我可以更改 git-svn 使用的 svn 版本吗？如果是这样，我该怎么做？

谢谢阅读。

--更新评论--

```
$ which git svn
/usr/local/bin/git
/usr/local/bin/svn

$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin:/usr/local/git/bin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T05:33:58.490

我做了一点挖掘，看起来 git-svn 使用了颠覆的 perl 绑定。经过一些实验，我发现安装*启用 perl*的升级版 svn 可以解决问题。在 Mac OSX 上，这将是这样的：

```
# First, I had to take ownership of the perl libs dir,
# so homebrew could create perl modules
chown $USER -R /Library/Perl/5.12/darwin-thread-multi-2level

# Then, remove and reinstall Subversion, but add the perl option:
brew remove svn
brew install --perl svn

# Lastly, reinstall git (this may be optional, but it may also help.)
brew remove git
brew install git 
```

您的问题归结为一个简单的事实，即您更新的 Subversion 安装不包括随附的 perl 模块，因此 git-svn 依赖于更完整的系统安装。

作为记录，将 /usr/bin/svn 符号链接到 /usr/local/bin/svn 绝对没有好处。这与 perl 模块无关，`$PATH`也与 perl 模块有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:48:54.120

Your system has two versions of Subversion installed: 1.6.17 in `/usr/bin/svn`, and 1.7.5 in `/usr/local/bin/svn`. When you run `svn`, it parses your `$PATH` correctly to pick up the one in `/usr/local/bin/svn`, but `git-svn` doesn't bother, and just uses the version in `/usr/bin`.

Having had a quick glance through the code, there's nothing in `git-svn.pl` or Alien-SVN (the Perl Subversion library that `git-svn` uses) that explicitly points to any particular `svn` binary, so I suspect it's a security "feature" to avoid looking at your custom `$PATH`.

The easy option, if you have access, is to replace `/usr/bin/svn` with `/usr/local/bin/svn`; possibly by deleting and replacing with a symlink. Otherwise, I suspect you'll need to dig into the source of `git-svn.pl` and rewrite it to accept your custom `$PATH`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T14:51:34.607

对于那些遇到同样问题的人：现在 GIT 可以选择使用 Homebrew 的 SVN 版本：

```
brew install --with-brewed-svn git 
```

希望有帮助（我挖了很长时间才找到它！）

# c# - 如何将字符串与列表框中的所有项目进行比较？

> ID：11021809
> 
> 赞同：5
> 
> 时间：2012-06-13T19:16:09.653
> 
> 标签：c#, winforms

我正在创建一个应用程序，允许用户存储有关他们的课程的信息。我的应用程序中有一个按钮允许用户输入信息，如果它与其中的任何项目匹配，`listBox`那么它应该显示有关它的信息。

`Items[0]`如果我按位置（例如）指定特定项目`listBox`，然后将其转换为字符串，我只能让它工作。我的目标是比较`listBox`.

```
private void button3_Click(object sender, EventArgs e)
{
    if (listBox2.Items[0].ToString() == "PersonalInfo")
    {
        label.Text = "test";               
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T19:20:18.470

您需要遍历列表中的所有项目。尝试这样的事情：

```
foreach(var item in listBox2.Items)
{
  if(item.ToString() == stringToMatch)
  {
    label.Text = "Found a match";
  }
} 
```

另一种更简单的实现（如果/当它找到匹配项时将停止，而不是继续检查每个项目）将是

```
if(listBox2.Items.Any(item => item.ToString() == stringToMatch))
{
  label.Text = "Found a match";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T19:19:15.240

编写一个循环来检查每个项目

```
foreach(var item in listBox2.Items)
{
  if (item.ToString()== "PersonalInfo")
  {
     label.Text = "test";
     break; // we don't want to run the loop any more.  let's go out              
  }    
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T19:19:09.250

好吧，您可以使用 LINQ ... 像这样：

```
if (listBox2.Items
            .Cast<object>()
            .Select(x => x.ToString())
            .Contains("PersonalInfo"))
{
    label.Text = "test";
} 
```

或者，如果您想获取第一场比赛的详细信息：

```
var match = listBox2.Items
                    .Cast<object>()
                    .FirstOrDefault(x => x.ToString() == "PersonalInfo");
if (match != null)
{
    // Use match here
} 
```

# javascript - 如何有效地以 YYYYDDMM 格式在 javascript 中获取三个月前的日期

> ID：11021810
> 
> 赞同：6
> 
> 时间：2012-06-13T19:16:11.527
> 
> 标签：javascript, javascript-framework

我知道用java做的一种方法：

```
Calendar c5 = Calendar.getInstance();
c5.add(Calendar.MONTH, -6);
c5.getTime(); //It will give YYYYMMDD format three months ago. 
```

有没有办法在javascript中做到这一点。我知道我可以使用 Date d = new Date(); 解析它并做一些代码来获取格式。但现在我不想解析和获取三个月前的日期。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T19:21:49.970

```
var dt = new Date('13 June 2013');
dt.setMonth(dt.getMonth()-1) 
```

然后您可以使用此[答案](https://stackoverflow.com/a/3067896/219118)中的这段代码将其转换为 YYYYMMDD

```
 Date.prototype.yyyymmdd = function() {
   var yyyy = this.getFullYear().toString();
   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based
   var dd  = this.getDate().toString();
   return yyyy + (mm[1]?mm:"0"+mm[0]) + (dd[1]?dd:"0"+dd[0]); // padding
  };

d = new Date();
d.yyyymmdd(); 
```

有什么要小心的。如果你在 3 月 31 日减去一个月，会发生什么？你不能得到2月31日！有关更多详细信息，请参阅[此](https://stackoverflow.com/a/499846/219118)答案。

# c - C socket recv 返回字节数，但缓冲区中没有任何内容

> ID：11021811
> 
> 赞同：2
> 
> 时间：2012-06-13T19:16:17.403
> 
> 标签：c, sockets, network-programming

我有 2 个程序一个客户端和一个服务器。客户端发送一个 4 字节的 ascii 命令

```
client command: BD?\r
server reads: 
```

服务器代码

```
while(1) {

    int numbytes = 0;
    printf("MAIN: waiting for commands\n");
    memset(theRecvBuffer, '\0', THE_BUFFER_SIZE);
    numbytes = recv(theCSock, theRecvBuffer, THE_BUFFER_SIZE, 0);
    if(numbytes == 0) {
        printf("client socket closed\n");
        break;
    }
    if(numbytes == -1) {
        printf("cmd loop received socket error: %s\n", strerror(errno));
        break;
    }
} 
```

服务器的 recv 调用返回 4 个字节，但缓冲区中填充了 NULL 字节。有什么可能导致 recv 调用丢失缓冲区信息吗？无论如何，我可以使用 print 语句调试 recv 调用中发生的事情吗？我受到限制，因为该程序位于具有不同芯片组的设备上，因此我无法使用调试器。errno 没有帮助，因为它返回 4 个字节，因此没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:59:56.830

如果您的代码片段实际上是从您的代码中提取的（我对此表示怀疑），那么问题就很明显了：在每次调用 recv 之前清除缓冲区。读取 4 个字节

```
clear buffer
recv() = 4
not 0 (eof)
not -1 (error)
loop
clear buffer
recv() = 0
is 0 (eof)
break
loop exits with cleared buffer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:58:24.463

如果您使用多个线程，则在您的 memset 函数在主循环中将其归零之前，另一个线程可能无法读取您的缓冲区。这只是一个猜测，但如果没有完整的代码，很难给出确定的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:28:13.703

这是我错过的两个不同套接字上的两个不同线程中的共享缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T19:42:21.340

```
strace -e trace=recv -s 65535 -v -p PID 
```

应该在用户空间再次看到它之前向您展示系统调用之后缓冲区的样子。这`-s`是要捕获的字符串的缓冲区大小。如果它是二进制数据，可选地`-x`可能会有所帮助。

# php - 使用另一个数组作为输入对数组进行排序

> ID：11021814
> 
> 赞同：3
> 
> 时间：2012-06-13T19:16:23.980
> 
> 标签：php, arrays, multidimensional-array

我想使用下面提供的另一个数组对以下数组进行排序。

例如。我有以下数组：

```
[note] => Array
(
   [0] => 'note1'
   [1] => 'note2'
   [2] => 'note3'
), 
[text] => Array
(
   [0] => 'text1'
   [2] => 'test3'
), 
[year] => Array
(
   [0] => '2002'
   [1] => '2000'
   [2] => '2011'
) 
```

我有数组：

```
$sortBy = array('2011', '2000', '2002'). 
```

我想根据 $sortBy 数组的值对上面的数组进行排序。

期望的结果是：

```
[note] => Array
(
   [0] => 'note3'
   [1] => 'note2'
   [2] => 'note1'
), 
[text] => Array
(
   [0] => 'test3'
   [2] => 'text1'
), 
[year] => Array
( 
   [0] => '2011'
   [1] => '2000'
   [2] => '2002'
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T20:10:00.697

你有一个数组：

```
$array = array(
    'note' => array('note1', 'note2', 'note3'),
    'text' => array('text1', 'text2', 'text3'),
    'year' => array('2002', '2000', '2011')
); 
```

还有一些东西的顺序：

```
$sortBy = array('2011', '2000', '2002');
$sortOrder = $array['year']; 
```

然后，您会发现需要如何对年份进行排序：

```
array_walk($sortOrder, function(&$v) use ($sortBy) {$v = array_search($v, $sortBy);}); 
```

然后根据该顺序对整个数组进行排序：

```
array_multisort($sortOrder, $array['note'], $array['text'], $array['year']); 
```

完整示例：

```
$array = array(
    'note' => array('note1', 'note2', 'note3'),
    'text' => array('text1', 'text2', 'text3'),
    'year' => array('2002', '2000', '2011')
);
$sortBy = array('2011', '2000', '2002');
$sortOrder = $array['year'];
array_walk($sortOrder, function(&$v) use ($sortBy) {$v = array_search($v, $sortBy);});
array_multisort($sortOrder, $array['note'], $array['text'], $array['year']); 
```

输出/[演示](http://codepad.viper-7.com/MUlDAV)：

```
Array(
    [note] => Array(
            [0] => note3
            [1] => note2
            [2] => note1
        )
    [text] => Array(
            [0] => text3
            [1] => text2
            [2] => text1
        )
    [year] => Array(
            [0] => 2011
            [1] => 2000
            [2] => 2002
        )
) 
```

*编辑：*映射的变体，备用`array_search`：

```
$sortBy = array_flip(array('2011', '2000', '2002'));
$sortOrder = $array['year'];
array_walk($sortOrder, function(&$v) use ($sortBy) {$v = $sortBy[$v];});
array_multisort($sortOrder, $array['note'], $array['text'], $array['year']); 
```

*Edit2：* PHP 5.2 包装成一个函数，完全参数化：

```
/**
 * @param array $array
 * @param string|int $by key/offset
 * @param array $order
 * @return array
 */
function array_multisort_by_order(array $array, $by, array $order)
{
    $order = array_flip($order);
    $params[] = $array[$by];
    foreach($params[0] as &$v) $v = $order[$v];
    foreach($array as &$v) $params[] = &$v; unset($v);
    call_user_func_array('array_multisort', $params);
    return $array;
}

// Usage:
array_multisort_by_order($array, 'year', array('2011', '2000', '2002')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:32:53.143

我会像这样为它创建一个函数：

```
function sort_by($arr, $sub, $order){
    // Create a map from old key to new key
    $value_kmap = array_flip($arr[$sub]);
    $sort_kmap = array_flip($order);
    foreach($order as $value)
        $kmap[$value_kmap[$value]] = $sort_kmap[$value];

    // Create your result array
    foreach($arr as $name => $sub_arr)
        foreach($kmap as $key => $new_key)
            if(isset($sub_arr[$key]))
                $result[$name][$new_key] = $sub_arr[$key];

    return $result;
} 
```

该函数是通用的，没有引用`year`. 它以子数组的名称作为参数进行排序。你会像这样使用它：

```
$arr = array(
    'note' => array('note1', 'note2', 'note3'),
    'text' => array('text1', 'text3'),
    'year' => array('2002',  '2000',  '2011' )
);

print_r(sort_by($arr, 'year', array('2011', '2000', '2002'))); 
```

输出 [[**键盘**](http://codepad.org/wjjdKIZ1)]：

```
大批
(
    [注] => 数组
        (
            [0] => 注3
            [1] => 注2
            [2] => 注1
        )

    [文本] => 数组
        (
            [1] => 文本3
            [2] => 文本1
        )

    [年份] => 数组
        (
            [0] => 2011
            [1] => 2000
            [2] => 2002
        )

)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:22:49.757

我将您的数组命名为 $haystack 排序。

```
$newArray = array(); // not necessary, but starts your new array
// you know how you want to sort it, so loop through your sorting array
foreach( $sortBy as $year ){ 
   // get the key of the 2nd level of the 2D array, which we are saving as $k
   foreach( $haystack['year'] as $key => $value ){
      if( $value == $year ) $k = $key;
      break; // since we got what we need, we don't need to let this foreach loop finish
      // you could also do an array_search() here instead of this foreach
   }
   if( $k > 0 ){
      // if k is 0, we didn't find that value so we're not going to sort it or include it in the new array
      foreach( $haystack as $key => $a ){ 
         // just save it into a new array
         $newArray[$key][$k] = $a;       
      }
   }
}
var_dump( $newArray ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T19:33:37.863

未经测试（当您发布这些有点问题时，您应该提供数组的 var_export() ）

```
//$orig = ...

$sorted = array();

$map = array_flip($orig['year']);
foreach ($sortBy as $year) {
    $originalNumerickey = $map[$year];
    foreach ($orig as $stringKey => $subArray) {
        $sorted[$stringKey][$originalNumerickey] = $subArray[$originalNumerickey];
    }
} 
```

# winapi - 如何在win32中创建具有默认行为的按钮

> ID：11021817
> 
> 赞同：0
> 
> 时间：2012-06-13T19:16:26.090
> 
> 标签：winapi, button

我一直在尝试创建一个具有默认行为的按钮，即当用户按下 ENTER 时，该按钮被触发。我使用 WS_TABSTOP 样式创建了按钮，并向其发送了带有 BS_DEFPUSHBUTTON 的 BM_SETSTYLE 消息具有 WPARAM 参数，但它仍然无法正常工作。

```
HWND hwnd_Ok = CreateWindow("button", "Ok", WS_VISIBLE | WS_CHILD | WS_TABSTOP, 285, 195, 70, 25, hwnd, (HMENU)OK_BUTTON, NULL, NULL);

SendMessage(hwnd_Ok, BM_SETSTYLE, (WPARAM)BS_DEFPUSHBUTTON, TRUE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:07:51.793

我正在尝试处理在您的控件的 WndProc 中获取`WM_GETDLGCODE`消息。示例代码：`WM_KEYDOWN``VK_RETURN`

```
case WM_GETDLGCODE: {
  if(wParam==VK_RETURN) {
    return DLGC_WANTALLKEYS;
  }
}
break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:45:39.307

BS_DEFPUSHBUTTON 只是添加到按钮的标志。您描述的行为（以及许多其他字段导航行为）实际上是由 实现的[`IsDialogMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645498%28v=vs.85%29.aspx)，您免费获得的是一个模态对话框。

如果您尝试在自己的窗口类（或无模式对话框）中处理此问题，则可以将 IsDialogMessage 添加到消息循环中以获得对话框样式的处理。

# php - 用 php 连接两个 Mysql 查询

> ID：11021819
> 
> 赞同：0
> 
> 时间：2012-06-13T19:16:35.803
> 
> 标签：php, mysql, arrays

基本上我有来自 2 个不同数据库的 2 个 SQL 查询，我试图比较它们在哪里相等，然后将其他信息连接在一起以获得该值。我的第一个查询包含一个 id 和一个产品名称，我的第二个查询包含一个产品名称和组件。所以我试图加入他们的产品名称，然后与他们一起展示另外两个信息。我选择的数据库正在第二个查询中使用。知道我应该怎么做吗？到目前为止，我有这个，它似乎只显示一个结果：

```
$catid = mysql_query("Select a.entry_id, b.cat_name from blog.exp_category_posts a inner join blog.exp_categories b on a.cat_id=b.cat_id where b.Group_ID = 3");

$results = mysql_query("Select a.name, c.product from wr_scientific a inner join wr_scientific_products b on a.id=b.scienc_id Join xcart_products c on b.prod_id=c.productid LIMIT 1000");

while($row1 = mysql_fetch_array($catid)){
$row2= explode("&#8482;", $row1['cat_name']);
$row3= explode("&#174;", $row2[0]);

while($row = mysql_fetch_array($results)){
$rowpro = explode("&trade;", $row['product']);
$rowprod = explode("&reg;", $rowpro[0]);

if($rowprod[0] == $row3[0]){
echo $rowprod[0].$row['name'].$row1['entry_id'];
 }  
  }
 } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:27:08.123

如果两个数据库位于 MySQL 的同一个实例上（~同一台机器），那么您可以通过在表名前加上数据库名来引用 say `db2`from (say)中的表。`db1`

例如：

```
USE db1 ;
SELECT
    db1.table_in_db1.id,  -- you can specify the database name here, but
    table_in_db2.id,      -- there is no ambiguity, the database name is optional
    field_in_table_in_db2 -- the same way the table name is optionnal when there is no ambiguity
FROM
    db1.table_in_db1      -- database name is optionnal here, current database is assumed
JOIN
    db2.table_in_db2
ON ... 
```

# php - PHP sprintf 中使用的这个格式字符串的解释

> ID：11021822
> 
> 赞同：2
> 
> 时间：2012-06-13T19:16:46.333
> 
> 标签：php, printf

我一直在使用`echo "$".sprintf("%01\$.2f",$numvar);`我的美元格式，但我只是复制并粘贴了它。我查看了 php.net 上的文档，但我仍然不清楚。

请帮助我了解每个部分`"%01\$.2f"`在该功能中的作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:29:42.397

*   `%`是*转换规范的开始*

*   `01\$`表示该值将放在结果的第一项中

    ^(更常见的是，同样的写成`1$`)

*   `.2`是*精度说明符*，它指示应该显示多少个十进制数字

*   `f`表示参数被视为浮点数，并显示为浮点数（区域设置感知）

有关上述内容的完整详细信息以及可用的内容，请参阅 的`format`参数说明[`sprintf()`](http://php.net/sprintf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:21:38.997

该`sprint`函数的第一个参数是“格式”。可能的格式包括：

> 可能的格式值：
> 
> 1.  %% - 返回一个百分号
> 2.  %b - 二进制数
> 3.  %c - 根据 ASCII 值的字符
> 4.  %d - 有符号十进制数
> 5.  %e - 科学记数法（例如 1.2e+2）
> 6.  %u - 无符号十进制数
> 7.  %f - 浮点数（本地设置感知）
> 8.  %F - 浮点数（不支持本地设置）
> 9.  %o - 八进制数
> 10.  %s - 字符串
> 11.  %x - 十六进制数（小写字母）
> 12.  %X - 十六进制数（大写字母）
> 
> 其他格式值。它们位于 % 和字母之间（例如 %.2f）：
> 
> 1.  “+”（强制在数字前面同时加上 + 和 -。默认情况下，仅标记负数）
> 2.  '（指定用作填充的内容。默认为空格。必须与宽度说明符一起使用。示例：%'x20s（这使用“x”作为填充）
> 3.  “-”（左对齐变量值）
> 4.  [0-9]（指定保持到变量值的最小宽度）
> 5.  .[0-9]（指定小数位数或最大字符串长度）

# objective-c - Objective-C：启用/禁用文件读取（chmod ar）

> ID：11021824
> 
> 赞同：1
> 
> 时间：2012-06-13T19:17:02.700
> 
> 标签：objective-c, file-permissions, chmod

使用 Objective-C，我如何授予/获取所有用户读取文件的权限？

我需要与 和 具有相同效果的`chmod a-r`东西`chmod a+r`。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T19:24:48.350

您是否也熟悉`chmod 755 file`更改权限的方法？使用八进制数？

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; 

//Prefixing zero is octal.
int readPermission = 04;
int writePermission = 02;
int executePermission = 01;

//End multiplication is to shift digits left.
int owner = (readPermission | writePermission | executePermission) * (8 * 8);   //7
int group = (readPermission)                                       * (8);       //4 
int other = (executePermission);                                                //1

int permissions = owner + group + other;  //0741

[dict setObject:[NSNumber numberWithInt:permissions] forKey:NSFilePosixPermissions]; 

NSError *error = nil;
[[NSFileManager defaultManager] setAttributes:dict ofItemAtPath:[file path] error:&error]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T20:27:48.843

要在目标 C 中执行此操作：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSError *error = nil;
NSDict *attribs = [fm attributesOfItemAtPath:[file path] error:&error];
int permissions = [[attribs objectForKey:@"NSFilePosixPermissions"] intValue];
permissions |= (S_IRSUR | S_IRGRP | S_IROTH);
NSDict *newattribs = [NSDict dictionaryWithObject:[NSNumber numberWithInt:permissions]
                                           forKey:NSFilePosixPermissions];
[fm setAttributes:dict ofItemAtPath:[file path] error:&error]; 
```

或者，只需获取一个 POSIX 路径（使用 -[NSFileManager fileSystemRepresentationForPath]）并在 C 中使用 chmod 函数执行此操作 - 这是 chmod 命令行工具使用的，并且可以移植到任何 POSIX 平台。

# c# - 如何在自身内部嵌套一个 ASP.Net 用户控件？

> ID：11021827
> 
> 赞同：4
> 
> 时间：2012-06-13T19:17:10.990
> 
> 标签：c#, asp.net, vb.net, user-controls

我认为简短的回答是你不能，但必须有某种方式来实现它。我想制作一个项目列表，然后在其中有一个项目列表，只嵌套一个级别。IE：

```
 Repeater  
    UserControl1  
        UserControl1  
        UserControl1  
    UserControl1
        UserControl1  
    UserControl1  
    UserControl1 
```

如果可能的话，我真的很想避免使用 LoadControl，因为我在服务器端 Click 事件中添加了这个列表，所以我不能在 PageInit 上执行 loadControl 来让所有视图状态的东西工作。

我将尝试编写一个快速的伪代码示例，它看起来像这样：

**页面.aspx**

```
<asp:repeater runat="Server" id="someRepeater">
<uc:UserControl1 runat="Server" id="ctrlParent" />
</asp:repeater> 
```

**用户控件1.ascx**

```
<asp:label id="label1" runat="server" />
<asp:repeater runat="server" id="childRepeater">
    <uc:UserControl1 runat="server" id="ctrlChild" />
</asp:repeater> 
```

**用户控件1.ascx.vb**

```
If me.HasChildren then
    'BindChildRepeater'
end if

sub Fill(Data as RelevantData)
    label1.Text = Data.SomeText
end sub

sub ChildRepeater_ItemDataBound(object as sender, e as someArgs)
    Dim childCtrl = e.item.findcontrol("ctrlChild")
    childCtrl.Fill(e.item.dataitem)
end sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:02:15.673

您可以在中继器中嵌套中继器

```
<asp:repeater runat="Server" id="someRepeater1">
    <uc:UserControl1 runat="Server" id="ctrlParent1" />
    <asp:repeater runat="Server" id="someRepeater2">
        <uc:UserControl1 runat="Server" id="ctrlParent2" />
    </asp:repeater>
</asp:repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:59:37.893

只需`<%@ Register src="" tagname="" tagprefix=""%>`在要调用另一个用户控件的用户控件中调用 .. 在另一个用户控件中调用用户控件与在普通 aspx 页面中调用用户控件相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T19:57:16.587

这就是我所做的。基本上，您使用 LoadControl 添加的控件将在回发后消失，所以我所做的只是在回发期间调用此函数`Page_Load`

```
Private Sub AddSubCategorizedQuestionItemControls()

    If rptSubCategorizedquestionList.Items IsNot Nothing AndAlso
        rptSubCategorizedquestionList.Items.Count > 0 Then

        For Each _item As RepeaterItem In rptSubCategorizedquestionList.Items

            If _item.ItemType = ListItemType.AlternatingItem OrElse
                     _item.ItemType = ListItemType.Item Then

                Dim _hfCategoryID As HiddenField = _item.FindControl("hfCategoryID")

                Dim _placeHolderSubCategoryQuestionItem As PlaceHolder = _item.FindControl("placeHolderSubCategoryQuestionItem")

                Dim _nestedCategorizedListItemControlUserControlObject As UserControl =
                                                                LoadControl("__categorizedQuestionListItem.ascx")

                _nestedCategorizedListItemControlUserControlObject.ID =
                                      String.Format("ucCategorizedQuestionListItem", _hfCategoryID.Value)

                _placeHolderSubCategoryQuestionItem.Controls.Add(_nestedCategorizedListItemControlUserControlObject)

                Dim _nestedCategorizedListItem As Common_Questions__categorizedQuestionListItem =
                    DirectCast(_nestedCategorizedListItemControlUserControlObject, Common_Questions__categorizedQuestionListItem)

            End If

        Next

    End If

End Sub 
```

# c# - 在数据集中将当前日期设置为默认值？

> ID：11021832
> 
> 赞同：1
> 
> 时间：2012-06-13T19:18:05.710
> 
> 标签：c#, dataset, literals

我有一个数据集，我试图将默认值设置为当前日期和时间。我认为 value 需要是文字。有什么方法可以做到这一点吗？因为我似乎无法使用 System.DateTime 来做到这一点。任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T19:33:27.060

您可以将相关列的默认值设置为

```
dataTable1.Columns["dateTimeColumn"].DefaultValue = System.DateTime.Now; 
```

如果您从 SQL Server 数据库中获取数据，则可以使用以下`GETDATE`函数设置默认值：

```
ALTER TABLE MyTable
ADD CONSTRAINT DF_MyTable_MyColumn
DEFAULT GETDATE() FOR MyColumn 
```

使用此代码：

```
UploadHistory.Columns["FileUploadDate"].DefaultValue = System.DateTime.Now; 
```

当表格写成`XML`：

```
<xs:element name="FileUploadDate" 
            type="xs:dateTime" 
            default="2017-03-13T11:39:26.7980069-05:00" 
            minOccurs="0" /> 
```

# wpf - 在 WPF 中禁用复选框检查

> ID：11021836
> 
> 赞同：4
> 
> 时间：2012-06-13T19:18:22.800
> 
> 标签：wpf, checkbox, checkboxpreference

我想让WPF 中的*复选框不可能检查（来自 C# 代码）。*只允许取消选中。
我该怎么做？

**附言**。*在Click 事件*
上编写事件处理程序，在检查后立即取消选中复选框是不可接受的。

 ***[编辑]**
复选框应始终启用，以便用户可以认为可以选中复选框。这很奇怪，但它是特定的程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T19:23:53.900

```
<CheckBox Content="Checkbox"
          IsEnabled="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}" /> 
```

* * *

在被告知复选框必须始终处于可检查状态后进行编辑，即使它不是。这是一个工作示例：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" x:Class="WpfTest.MainWindow"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ControlTemplate x:Key="DeceptiveCheckbox" TargetType="{x:Type CheckBox}">
            <BulletDecorator Background="Transparent" SnapsToDevicePixels="True">
                <BulletDecorator.Bullet>
                    <Microsoft_Windows_Themes:BulletChrome BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" IsChecked="{TemplateBinding IsChecked}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}"/>
                </BulletDecorator.Bullet>
                <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </BulletDecorator>
            <ControlTemplate.Triggers>
                <Trigger Property="HasContent" Value="True">
                    <Setter Property="FocusVisualStyle">
                        <Setter.Value>
                            <Style>
                                <Setter Property="Control.Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Rectangle Margin="14,0,0,0" SnapsToDevicePixels="True" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Padding" Value="4,0,0,0"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Window.Resources>
    <Grid>
        <CheckBox Content="CheckBox"  IsEnabled="{Binding IsChecked, RelativeSource={RelativeSource Self}}" Template="{StaticResource DeceptiveCheckbox}" />
    </Grid>
</Window> 
```

修复很简单。我只是创建了当前复选框模板的副本并删除了：

```
<Trigger Property="IsEnabled" Value="False">
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T19:25:45.190

这个怎么样：

```
<Grid>
    <Grid.Resources>
        <Style TargetType="CheckBox">
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="IsEnabled" Value="False" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Grid.Resources>

    <CheckBox IsChecked="True" />
</Grid> 
```

这种方法的好处是可以应用于所有（原样）或许多（如果您应用`x:Key`属性然后将资源分配给所需的复选框），而无需执行任何特殊操作或更改各个复选框的绑定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T19:22:08.910

一个简单的解决方案可能是将 IsEnabled 属性绑定为等于 IsChecked 属性。*

# php - 已知条件未被 if 语句捕获

> ID：11021837
> 
> 赞同：-3
> 
> 时间：2012-06-13T19:18:47.037
> 
> 标签：php, if-statement

```
$trial = $row['Trial'];
$level = $row['membership_level'];

print $trial;

$number = count($domains);
if (strlen($domain) == 0) {$number = 0;}
if ($level == 4 and $number >= 10) {exit('You have reached your 10 domain limit and     cannot add anymore');}
if ($level == 3 and $number >= 1) {exit('You have reached your 1 domain limit and cannot add anymore');}
if ($level == 2 and $trail >= 1) {exit('You have already activated the trial, please purchase a license');}

if ($level == 2) { 
```

根据打印的 Trail = 1，根据在下一个 if 语句中失败的级别 = 2。但由于某种原因，它永远不会失败

```
if ($level == 2 and $trail >= 1) 
```

我已经尝试过 intval、strlen 并不管它。即使我知道 trail = 1 和 level = 2，它也不会在这一点上失败。

那么我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:20:59.750

您拼错了 trial/trail：

```
$trial = $row['Trial'];
...
if ($level == 2 and $trail >= 1) 
```

# java - 将持续时间字符串解析为毫秒

> ID：11021838
> 
> 赞同：7
> 
> 时间：2012-06-13T19:18:48.190
> 
> 标签：java, string, parsing, time

我需要将格式`98d 01h 23m 45s`为毫秒的持续时间字符串解析。

我希望有类似的`SimpleDateFormat`持续时间，但我找不到任何东西。有人会推荐或反对尝试为此目的使用 SDF 吗？

我目前的计划是使用正则表达式来匹配数字并做类似的事情

```
Pattern p = Pattern.compile("(\\d+)");
Matcher m = p.matcher("98d 01h 23m 45s");

if (m.find()) {
    int days = Integer.parseInt(m.group());
}
// etc. for hours, minutes, seconds 
```

然后使用[TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)将它们放在一起并转换为毫秒。

我想我的问题是，这似乎有点矫枉过正，可以做得更容易吗？出现了很多关于日期和时间戳的问题，但这可能有点不同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T19:28:00.587

查看[`PeriodFormatter`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatter.html)并[`PeriodParser`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodParser.html)从[JodaTime 库](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatter.html)中查看。

您还可以`PeriodFormatterBuilder`像这样为您的字符串构建解析器

```
String periodString = "98d 01h 23m 45s";

PeriodParser parser = new PeriodFormatterBuilder()
   .appendDays().appendSuffix("d ")
   .appendHours().appendSuffix("h ")
   .appendMinutes().appendSuffix("m ")
   .appendSeconds().appendSuffix("s ")
   .toParser();

MutablePeriod period = new MutablePeriod();
parser.parseInto(period, periodString, 0, Locale.getDefault());

long millis = period.toDurationFrom(new DateTime(0)).getMillis(); 
```

现在，所有这些（尤其是`toDurationFrom(...)`部分）可能看起来很棘手，但我真的建议您研究一下`JodaTime`您是否正在处理 Java 中的周期和持续时间。

另请查看[有关从 JodaTime 期间获取毫秒数的答案](https://stackoverflow.com/a/1440795/1344008)以进行进一步说明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T19:29:26.407

使用 a`Pattern`是一种合理的方法。但是为什么不使用一个来获取所有四个字段呢？

```
Pattern p = Pattern.compile("(\\d+)d\\s+(\\d+)h\\s+(\\d+)m\\s+(\\d+)s"); 
```

然后使用索引组提取。

编辑：

根据您的想法，我最终编写了以下方法

```
private static Pattern p = Pattern
        .compile("(\\d+)d\\s+(\\d+)h\\s+(\\d+)m\\s+(\\d+)s");

/**
 * Parses a duration string of the form "98d 01h 23m 45s" into milliseconds.
 * 
 * @throws ParseException
 */
public static long parseDuration(String duration) throws ParseException {
    Matcher m = p.matcher(duration);

    long milliseconds = 0;

    if (m.find() && m.groupCount() == 4) {
        int days = Integer.parseInt(m.group(1));
        milliseconds += TimeUnit.MILLISECONDS.convert(days, TimeUnit.DAYS);
        int hours = Integer.parseInt(m.group(2));
        milliseconds += TimeUnit.MILLISECONDS
                .convert(hours, TimeUnit.HOURS);
        int minutes = Integer.parseInt(m.group(3));
        milliseconds += TimeUnit.MILLISECONDS.convert(minutes,
                TimeUnit.MINUTES);
        int seconds = Integer.parseInt(m.group(4));
        milliseconds += TimeUnit.MILLISECONDS.convert(seconds,
                TimeUnit.SECONDS);
    } else {
        throw new ParseException("Cannot parse duration " + duration, 0);
    }

    return milliseconds;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-17T15:26:19.457

Java 8 中的新[java.time.Duration](http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html)类让您可以开箱即用地解析持续时间：

```
Duration.parse("P98DT01H23M45S").toMillis(); 
```

格式略有不同，因此需要在解析之前进行调整。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-06T22:47:16.987

我建议使用[`java.time.Duration`](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html)它以[ISO-8601 标准](https://en.wikipedia.org/wiki/ISO_8601)为模型，并作为[JSR-310 实现](https://jcp.org/aboutJava/communityprocess/pfd/jsr310/JSR-310-guide.html)的一部分与*Java-8*一起引入。

根据 ISO-8601 标准，1 天 2 小时的持续时间表示为 P1DT2H，而 2 小时的持续时间表示为 PT2H。将您的字符串转换为 ISO-8601 格式后，您可以使用该[`Duration#parse`](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-)方法对其进行解析。请注意（感谢 Ole VV 提供此信息）后缀“D”、“H”、“M”和“S”表示天、小时、分钟和秒，可以大写或小写。

**演示：**

```
import java.time.Duration;
import java.util.regex.Pattern;
import java.util.stream.Stream;

public class Main {
    public static void main(String[] args) {
        // Test
        Stream.of(
                "98d 01h 23m 45s",
                "01d 02h 03m 04s",
                "02h 03m 04s",
                "03m 04s",
                "04s"
        ).forEach(s -> System.out.println(durationMillis(s)));
    }

    static long durationMillis(String s) {
        if (Pattern.compile("\\d+d\\s").matcher(s).find()) {
            int idxSpace = s.indexOf(" ");
            s = "P" + s.substring(0, idxSpace) + "T" + s.substring(idxSpace + 1);
        } else
            s = "PT" + s;
        s = s.replace(" ", "");
        return Duration.parse(s).toMillis();
    }
} 
```

**示例运行：**

```
8472225000
93784000
7384000
184000
4000 
```

另一种解决方法是检索每个部分的值（天、小时、分钟和秒）并将它们添加到`Duration.ZERO`：

```
static long durationMillis(String s) {
    long millis = 0;
    Matcher matcher = Pattern.compile("(?:(?:(?:0*(\\d+)d\\s)?0*(\\d+)h\\s)?0*(\\d+)m\\s)?0*(\\d+)s").matcher(s);
    if (matcher.find()) {
        int days = matcher.group(1) != null ? Integer.parseInt(matcher.group(1)) : 0;
        int hours = matcher.group(2) != null ? Integer.parseInt(matcher.group(2)) : 0;
        int minutes = matcher.group(3) != null ? Integer.parseInt(matcher.group(3)) : 0;
        int seconds = matcher.group(4) != null ? Integer.parseInt(matcher.group(4)) : 0;
        millis = Duration.ZERO.plusDays(days).plusHours(hours).plusMinutes(minutes).plusSeconds(seconds).toMillis();
    }
    return millis;
} 
```

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的更多信息。

**[正则表达式](https://regex101.com/r/QX8u5o/1)的解释：**

*   `(?:`: 非捕获组的开始
    *   `(?:`: 非捕获组的开始
        *   `(?:`: 非捕获组的开始
            *   `0*`: 任意数量的零
            *   `(\\d+)d\\s`：一个或多个数字（组#1）后跟`d`一个空格。
        *   `)?`: 非捕获组结束。这`?`使它成为可选的。
        *   `0*`: 任意数量的零
        *   `(\\d+)h\\s`：一个或多个数字（组#2）后跟`h`一个空格。
    *   `)?`: 非捕获组结束。这`?`使它成为可选的。
    *   `0*`: 任意数量的零
    *   `(\\d+)m\\s`：一个或多个数字（组#3）后跟`m`一个空格。
*   `)?`: 非捕获组结束。这`?`使它成为可选的。
*   `0*`: 任意数量的零
*   `(\\d+)s`：一位或多位数字（组#4）后跟`s`

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

# php - MYSQL INSERT 循环 - 使用 PHP

> ID：11021840
> 
> 赞同：0
> 
> 时间：2012-06-13T19:18:54.173
> 
> 标签：php, mysql

我假设我要这样做是完全错误的方式，有人可以帮忙吗？

我想从一个表中取出所有具有特定产品编号的行，并在销售时将其放入另一个表中。

提前致谢。

```
$addinfo1 ="";
    //Connect to the database through our include
include_once "connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM tm_interested_buyers WHERE fk_product_id='$productid");

while($row = mysql_fetch_array($sql)){
$interestedbuyersid = $row["pk_interested_buyers_id"];
$fkproductid = $row["fk_product_id"];
$fkcustomerid = $row["fk_customer_id"];

    $addinfo1 .= mysql_query("INSERT INTO tm_int_buyers_complete (fk_interested_buyers_id, fk_product_id, fk_customer_id) VALUES('$interestedbuyersid','$fkproductid','$fkcustomerid')") or die (mysql_error());
echo $addinfo1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:23:23.587

您只需要一个查询：

```
INSERT INTO tm_int_buyers_complete (fk_interested_buyers_id, fk_product_id, fk_customer_id) 
SELECT pk_interested_buyers_id, fk_product_id, fk_customer_id 
   FROM tm_interested_buyers
   WHERE fk_product_id='$productid' 
```

有了这个选择语句（第 2 行及以下）是您的原始选择，具有您想要指定的值。这允许您将所有选定的行插入到您的表格中（顶行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:24:16.737

仅使用一个查询 INSERT from SELECT：

```
INSERT INTO `tm_int_buyers_complete` (fk_interested_buyers_id, fk_product_id,     fk_customer_id)
  SELECT fk_interested_buyers_id, fk_product_id, fk_customer_id
  FROM `tm_interested_buyers` WHERE fk_product_id='$productid"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:28:40.643

使用插入选择。

这要容易得多。

```
INSERT INTO tm_int_buyers_complete (`fk_interested_buyers_id`, `fk_product_id`,
`fk_customer_id`) SELECT tm_interested_buyers.pk_interested_buyers_id,
tm_interested_buyers.fk_product_id, tm_interested_buyers.fk_customer_id
FROM tm_interested_buyers WHERE tm_interested_buyers.fk_product_id='$productid' 
```

# shell - 如何更改或删除由 Doctrine2 在 Symfony2 中创建的实体/表？

> ID：11021843
> 
> 赞同：0
> 
> 时间：2012-06-13T19:19:09.273
> 
> 标签：shell, symfony, doctrine-orm, entity

假设我在命令行中创建了一个错误的实体，或者至少是一个格式错误的实体：yml 而不是注释。我想改变这一点。我该怎么办？

我弄完了

```
php app/console generate:doctrine:entity
configuration format : yml 
```

这就是我想要注释的地方。

我怎么能改变呢？如果我不能，我怎么能删除我的实体因为当我尝试生成 CRUD 时，我有

```
Class XXXXXXXXXX is not a valid entity or mapped super class 
```

编辑：我这样做是删除文件本身，但如果可能的话我宁愿使用外壳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:15:29.570

不幸的是，shell 工具不允许删除捆绑包等。

# wpf - “资源字典 (WPF)” 命名约定和管理建议

> ID：11021844
> 
> 赞同：7
> 
> 时间：2012-06-13T19:19:12.770
> 
> 标签：wpf, xaml, naming-conventions, resourcedictionary

只是想问一个关于人们用于“资源字典（WPF）”项目的命名约定的一般问题。

在我继承的项目中，我到处都有资源字典，有各种命名约定。因此，我正在寻找一般管理资源字典的建议。

请从任何答案中排除主题文件夹和那些资源字典。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T19:29:23.823

我喜欢为不同的资源类型使用单独的文件：

*   字体和字体大小 (Fonts.xaml)
*   画笔和颜色 (Brushes.xaml)
*   通用控件样式，无键 (CoreStyles.xaml)
*   数据模板和模板选择器 (DataTemplates.xaml)
*   转换器 (Converters.xaml)
*   用作图像源的位图图像 (Icons.xaml)
*   特定的键控样式 (Styles.xaml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-07T12:51:25.600

我也对我们的 WPF 项目的约定感兴趣。此[pdf](http://www.cookingwithxaml.com/content/xamlguidelines/xamlGuidelinesDraft0.pdf)非常有用，其中包含有关管理资源的部分。作者与BTownTKD的观点不同：

*在进入资源组织之前，我需要讨论将资源分成文件的不同理念。我将它们分为两种方法：*

1.  *一种物理或基于类型的组织，其中一个类型的所有实例都组合在一起。例如，资源字典将包括所有常量（或度量）、所有颜色的单独文件、画笔的另一个文件等等。我尝试了几次，但对我来说效果不佳。它会导致冗余，您最终会包括所有文件并复制周围的资源。跨参考导航也更难（例如，从颜色到画笔）。*
2.  *一种逻辑组织，其中资源按文件分组以完成逻辑任务。例如，一个组包括一个主题的所有资源，或者用于一组特定控件（例如图表）的所有资源被组合在一起作为一个逻辑实体。资源文件将包括常量、颜色、画笔、样式等。这种方法已被证明在许多项目中更有效，因此它是本文中讨论的方法。*

# emacs - 检测 Emacs 窗口已拆分

> ID：11021847
> 
> 赞同：7
> 
> 时间：2012-06-13T19:19:25.207
> 
> 标签：emacs, configuration, elisp

如何检测 Emacs 窗口已被拆分？

在我的`.emacs`文件中，我有：

```
(when (display-graphic-p)
  (set-frame-size (selected-frame) 166 85)
  (split-window-horizontally)) 
```

这允许我有两个并排的缓冲区，每个缓冲区正好 80 个字符宽。

每隔一段时间我都会更改我的 .emacs 文件并想重新加载它，所以我`M-x load-file`在我的 .emacs 文件上运行并且我所在的那个窗口会被重新分割。

是否有某种命令我可以调用来检查框架是否已经被分割并且只有在没有分割的情况下才调用`(split-window-horizontally)`？就像是：

```
(when (window-is-root)
  (split-window-horizontally)) 
```

或者

```
(when (not (window-is-already-split))
  (split-window-horizontally)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T19:23:15.773

`window-list`将返回一个窗口列表（对于当前帧），所以你应该能够做到：

```
(when (= (length (window-list)) 1)
  (split-window-horizontally)) 
```

查看[windows 的相关文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Windows-and-Frames.html#Windows-and-Frames)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-13T21:33:23.657

这是一个无意义的问题，windows 没有拆分。

是的，有名为 split-window... 的函数，但它们所做的只是减小窗口的大小，并在由此释放的空间中创建一个新窗口。

您不能只使用 (= 1 (length (window-list))) 因为每帧至少有一个窗口（不包括 minibuffer 的 simili-window）。

你可以试试：

```
(< (length (frame-list)) (length (window-list))) 
```

但这并不能告诉您所选框架中是否有多个窗口，这是您实际要问的，因为显然它可能是另一个包含多个窗口的框架。

所以如果你问的问题是正确的，“我怎么知道所选的框架是否包含多个窗口”，你可以很容易地找到答案：

```
(require 'cl)

(defun complement (fun)
  (byte-compile `(lambda (&rest args) (not (apply ',fun args)))))

(defun* more-than-one-window-in-frame-p (&optional (frame (selected-frame)))
  (< 1 (length (remove* frame (window-list)
                        :key (function window-frame)
                        :test (complement (function eql)))))) 
```

# jquery - 出现和消失的背景图像

> ID：11021848
> 
> 赞同：0
> 
> 时间：2012-06-13T19:19:29.953
> 
> 标签：jquery, image, background, navigation, scroll

我对编码相当陌生，希望在网站上拥有多层背景图像。将有一个静态背景，然后单击导航栏上的按钮或向下滚动站点时，静态背景上会出现一个新背景。当您向上或向下滚动时，该图像会代替另一个图像消失。这将重复多次。

我假设我应该使用 jquery 来解决这个问题？

我会链接 Big Omaha 2012 网站，但他们现在已将其删除。但类似于当您滚动浏览他们的信息时每个演讲者的卡通形象会如何出现。如果你熟悉那个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:32:20.620

我会说你应该在给定的html标签上有背景，并且使用jquery你只是检测你何时想要更改背景图像，并使用 $('your_tag').css('background-image',"image_url" ) 更改背景。这样您就不需要将多个图像加载到页面。

另一种方法是，可能有一个 div 作为静态图像覆盖整个页面，另一个图像的 z-index 高于静态图像，您将使用该图像显示其他图像。

# android - 无法在 sqlite android 中创建第二个表

> ID：11021849
> 
> 赞同：0
> 
> 时间：2012-06-13T19:19:33.500
> 
> 标签：android, sqlite

我是使用sqlite数据库android的新手。现在我在 android 中的 sqlite 数据库有问题，首先我创建第一个表：

```
 private static final String CREATE_TABLE_MASTER = "create table"
        + TABLE_MASTER + " (" + MASTER_ID
        + " integer primary key autoincrement, " + NAMA_MASALAH
        + " Integer not null, " + JLH_KRITERIA + " Integer not null, "
        + JLH_ALTERNATIVE + " text not null);"; 
```

这是成功的，但是当我创建第二个表时：

```
 private static final String CREATE_TABLE_KRITERIA = "create table if not exist "
    +TABLE_KRITERIA+ "("+ KRITERIA_ID
    + "integer primary key autoincrement, " 
    +KRITERIA_NAMA+ "text);"; 
```

但这是错误的，在 LogCat 中它说：

> 没有这样的表：tableKriteria：编译时：从 tableKriteria 中选择 idKriteria、namaKriteria

这里是我的 SQLiteAdapter.java 的完整代码：

```
package com.MFrameworkAHP;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {
public static final String NAMA_DATABASE = "MY_DATABASE";
public static final String TABLE_MASTER = "MY_TABLE";
public static final int MYDATABASE_VERSION = 1;
public static final String MASTER_ID = "_id";
public static final String NAMA_MASALAH = "Content1";
public static final String JLH_KRITERIA = "Content2";
public static final String JLH_ALTERNATIVE = "Content3";

public static final String TABLE_KRITERIA = "tableKriteria";
public static final String KRITERIA_ID= "idKriteria";
public static final String KRITERIA_NAMA = "namaKriteria";
public static final String KRITERIA_IDDATA = "idDataKriteria";

// create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String CREATE_TABLE_MASTER = "create table"
        + TABLE_MASTER + " (" + MASTER_ID
        + " integer primary key autoincrement, " + NAMA_MASALAH
        + " Integer not null, " + JLH_KRITERIA + " Integer not null, "
        + JLH_ALTERNATIVE + " text not null);";

private static final String CREATE_TABLE_KRITERIA = "create table if not exist "
    +TABLE_KRITERIA+ "("+ KRITERIA_ID
    + "integer primary key autoincrement, " 
    +KRITERIA_NAMA+ "text);";

;
//private static final String

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;
private Context context;

public SQLiteAdapter(Context c) {
    context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, NAMA_DATABASE, null,
            MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, NAMA_DATABASE, null,
            MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    return this;
}

public void close() {
    sqLiteHelper.close();
}

public long insert(String namaMasalah, String jlhKriteria, String jlhAlternative) {
    ContentValues contentValues = new ContentValues();
    contentValues.put(NAMA_MASALAH, namaMasalah);
    contentValues.put(JLH_KRITERIA, jlhKriteria);
    contentValues.put(JLH_ALTERNATIVE, jlhAlternative);
    return sqLiteDatabase.insert(TABLE_MASTER, null, contentValues);
}

public long insertKriteria(String namaKriteria){
    ContentValues cv = new ContentValues();
    //cv.put(KRITERIA_ID, idKriteria);
    cv.put(KRITERIA_NAMA,namaKriteria);

    return sqLiteDatabase.insert(TABLE_KRITERIA, null, cv);
}
public int deleteAll() {
    return  sqLiteDatabase.delete(TABLE_MASTER, null, null);

}

public void delete_byID(int id) {
    sqLiteDatabase.delete(TABLE_MASTER, MASTER_ID + "=" + id, null);
}

public void update_byID(int id, String v1, String v2, String v3) {
    ContentValues values = new ContentValues();
    values.put(NAMA_MASALAH, v1);
    values.put(JLH_KRITERIA, v2);
    values.put(JLH_ALTERNATIVE, v3);
    sqLiteDatabase
            .update(TABLE_MASTER, values, MASTER_ID + "=" + id, null);
}

public Cursor queueAll() {
    String[] columns = new String[] { MASTER_ID, NAMA_MASALAH, JLH_KRITERIA,
            JLH_ALTERNATIVE };
    Cursor cursor = sqLiteDatabase.query(TABLE_MASTER, columns, null,
            null, null, null, null);
    return cursor;
}

public Cursor queueKriteria() {
    String[] columns = new String[] { KRITERIA_ID, KRITERIA_NAMA };
    Cursor cursor = sqLiteDatabase.query(TABLE_KRITERIA, columns, null,
            null, null, null, null);
    return cursor;
}

public Cursor queueAll_SortBy_namaMasalah() {
    String[] columns = new String[] { MASTER_ID, NAMA_MASALAH, JLH_KRITERIA,
            JLH_ALTERNATIVE };
    Cursor cursor = sqLiteDatabase.query(TABLE_MASTER, columns, null,
            null, null, null, NAMA_MASALAH);

    return cursor;
}

public class SQLiteHelper extends SQLiteOpenHelper {
    public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(CREATE_TABLE_KRITERIA);
        db.execSQL(CREATE_TABLE_MASTER);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
    }

} 
```

}

我已经尝试了大约一周来解决我的问题，比如更改数据库版本，更改第二个表的创建语句等，但它没有工作:(这个论坛中有很多问题与我的问题相同，但它不能解决我的问题，比如[here](https://stackoverflow.com/questions/8158029/unable-to-create-second-table-in-sqlite)，[here](https://stackoverflow.com/questions/5829010/problem-when-creating-second-table-in-sqlite)等。

伙计们，请帮助我，。.

之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:25:23.307

看来您可能需要在“创建”字符串中添加一些空格。它也应该是`exists`而不是`exist`。尝试...

```
private static final String CREATE_TABLE_KRITERIA = "create table if not exists "
+TABLE_KRITERIA+ " ("+ KRITERIA_ID
+ " integer primary key autoincrement, " 
+KRITERIA_NAMA+ " text);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:44:37.200

如果您的代码仍然相同，那么您的第一个代码`create table`缺少空格。

你有

```
private static final String CREATE_TABLE_MASTER = "create table" 
```

它应该是

```
private static final String CREATE_TABLE_MASTER = "create table " 
```

另外，你能发布你的错误信息吗？

在 onUpgrade() 中，您应该执行升级。最快的方法是删除表然后重新创建。

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.i("MFrameworkAHP", "Upgrading database to " + newVersion);
    db.execSQL("drop table if exists " + TABLE_KRITERIA);
    db.execSQL("drop table if exists " + TABLE_MASTER);
    onCreate(db);
}

   public void onCreate(SQLiteDatabase db) {
        Log.i("MFrameworkAHP", CREATE_TABLE_KRITERIA);
        db.execSQL(CREATE_TABLE_KRITERIA);

        Log.i("MFrameworkAHP", CREATE_TABLE_MASTER);
        db.execSQL(CREATE_TABLE_MASTER);
    } 
```

这将删除升级中不理想的所有内容，但至少它会在您更改数据库版本时重新创建测试中的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T14:43:12.153

我刚才遇到了这个问题，解决方案是从一开始就创建所有表。如果您创建一个只有一个表用于测试的数据库，然后您尝试创建其余表，它将无法工作。因此，定义一个新的数据库名称并立即创建您需要的所有表，这就足够了。

# java - 在 Java Compiler API 中仅支持清单 jar

> ID：11021850
> 
> 赞同：4
> 
> 时间：2012-06-13T19:19:33.620
> 
> 标签：java, compilation, manifest, javac, manifest.mf

Java Compiler API 是否支持仅清单 jar 文件，其中`Class-Path`包含类路径参数中的条目？

我正在尝试在 Maven Surefire 测试中使用 Java Compiler API，但似乎 Java Compiler API，或更准确地说[`ToolProvider.getSystemJavaCompiler()`](http://docs.oracle.com/javase/7/docs/api/javax/tools/ToolProvider.html#getSystemJavaCompiler%28%29)，不能正确处理仅清单的 Surefire jar。

这是一个显示失败测试的代码片段

```
 new File("target/out").mkdir();
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    URLClassLoader classLoader = (URLClassLoader)Thread.currentThread().getContextClassLoader();

    // create classpath
    StringBuilder path = new StringBuilder();
    for (URL url : ((URLClassLoader) classLoader).getURLs()) {
        if (path.length() > 0) {
            path.append(File.pathSeparator);
        }
        String decodedPath = URLDecoder.decode(url.getPath(), "UTF-8");
        path.append(new File(decodedPath).getAbsolutePath());
    }
    System.err.println(path);

    // compile
    List<String> options = Arrays.asList(
      "-classpath", path.toString(),      
      "-s", "target/out",
      "src/test/java/com/mysema/codegen/SimpleCompilerTest.java");
    int compilationResult = compiler.run(null, null, null,
            options.toArray(new String[options.size()]));
    if (compilationResult != 0) {
        Assert.fail("Compilation Failed");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:14:47.717

我在surefire单元测试中运行带有jsp编译的嵌入式码头时遇到了类似的问题。更简单的解决方案是将surefire插件配置为不使用仅清单jar

```
 <plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
      <useManifestOnlyJar>false</useManifestOnlyJar>
    </configuration>
  </plugin> 
```

更难的解决方案是扩展类路径以包含从清单类路径字段引用的 jar 文件

```
static List<String> getClassPathForJspCompiler() throws IOException {
    List<String> classPath = Lists.newArrayList(System.getProperty("java.class.path")
            .split(File.pathSeparator));
    return expandManifestClassPathElements(classPath);
}

private static List<String> expandManifestClassPathElements(List<String> classPath)
        throws IOException {
    for (int i = 0; i < classPath.size(); i++) {
        String element = classPath.get(i);
        if (element.endsWith(".jar")) {
            for (String manifestElement : getManifestClassPath(element)) {
                // add to the end of the class path so it will get processed
                if (!classPath.contains(manifestElement)) {
                    // only add if not already present to prevent cyclic loop
                    classPath.add(manifestElement);
                }
            }

        }
    }
    return classPath;
}

private static List<String> getManifestClassPath(String jarFilePath) throws IOException {
    File jarFile = new File(jarFilePath);
    if (!jarFile.isFile()) {
        return ImmutableList.of();
    }
    Manifest manifest = new JarFile(jarFile).getManifest();
    if (manifest == null) {
        return ImmutableList.of();
    }
    String manifestClassPath = manifest.getMainAttributes().getValue(
            Attributes.Name.CLASS_PATH);
    if (manifestClassPath == null) {
        return ImmutableList.of();
    }
    // split at all spaces that are not preceded by a backslash
    return Lists.newArrayList(manifestClassPath.split("(?<!\\\\) "));
} 
```

# python - IPython Notebook 会话中的多个目录和/或子目录？

> ID：11021853
> 
> 赞同：32
> 
> 时间：2012-06-13T19:19:51.430
> 
> 标签：python, ipython, directory, subdirectory

IPython 文档页面建议打开 IPython 笔记本的多个不同会话是与不同目录或子目录中保存的笔记本交互的唯一方法，但这在任何地方都没有明确确认。

我面临一种情况，我可能需要与数百个不同的笔记本进行交互，这些笔记本根据不同的属性进行分类并存储在主目录的子目录中。我已将配置文件中的主目录（我们称之为`/main`）`ipython_notebook_config.py`设置为默认目录。

当我启动 IPython 笔记本时，它确实显示了其中的所有已保存笔记本`/main`（但未*在*中的子目录中保存的笔记本`/main`）。

如何实现一个 IPython 仪表板，它向我显示其中的笔记本`/main` *并*显示子目录，让我扩展子目录并从其内容中进行选择，或者只显示所有子目录中的所有笔记本？

通过每次启动新的 IPython 实例来做到这一点是完全不可能的。

如果我需要这种能力，我愿意修改源代码。这是一种非常基本的特性，我们需要它，而且令人惊讶的是，它不仅仅是默认的 IPython 行为。对于任何数量超过 10 或 15 的已保存笔记本，此功能是*必要*的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T00:37:53.733

> IPython 文档页面建议打开 IPython 笔记本的多个不同会话是与不同目录或子目录中保存的笔记本交互的唯一方法，但这在任何地方都没有明确确认。

是的，这是笔记本服务器的当前（*临时*）限制。notebook 待办事项列表中的多目录支持非常高（不幸的是，该列表很长，开发人员很少而且有日常工作），只是还没有。到 0.14（可能是秋季），您应该没有理由运行多个 nb 服务器，但目前这是多个目录的唯一选择。一个简单的初稿所缺少的只是：

1.  将单个笔记本与目录相关联（相当简单），以及
2.  用于简单文件系统导航的 Web UI（稍微不那么琐碎）。

> 如果我需要这种能力，我愿意修改源代码

如果您想在源代码中四处寻找，限制因素是[NotebookManager](https://github.com/ipython/ipython/blob/rel-0.13/IPython/frontend/html/notebook/notebookmanager.py)，它与特定目录相关联。如果你调整 list_notebooks() 方法来处理子目录，你就完成了 90%。

我也对此很好奇，所以我[在这里](https://github.com/minrk/ipython/tree/nbwalk)整理了一个简单的示例，它至少允许您在子目录中读取/运行/编辑/保存笔记本（步行深度限制为 2，但易于更改）。任何新的笔记本都将位于顶级目录中，并且没有用于移动它们的 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T21:12:45.693

iPython notebook 的多目录支持（更一般地是“项目”支持）的接口和架构设计问题对于正确处理很重要。设计描述于

[IPEP 16：笔记本多目录仪表板和 URL 映射](https://github.com/ipython/ipython/wiki/IPEP-16%3A-Notebook-multi-directory-dashboard-and-URL-mapping)

并在[IPEP 16 上进行讨论：笔记本多目录仪表板和 URL 映射 · 问题 #3166 · ipython/ipython](https://github.com/ipython/ipython/issues/3166)

# c++ - 如何捕获此异常 C++

> ID：11021856
> 
> 赞同：0
> 
> 时间：2012-06-13T19:19:53.990
> 
> 标签：c++, exception, cin

我想捕获当有人在 cin 上没有给出数字值时发生的异常，因此程序将读取下一个值。

```
#include <iostream>

using namespace std;

int main()
{
    int x = 0;
    while(true){
        cin >> x;
        cout << "x = " << x << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:22:10.543

根本没有抛出异常。相反，`cin`设置一个“错误输入”标志。你想要的是这样的：

```
while ((std::cout << "Enter input: ") && !(std::cin >> x)) {
    std::cin.clear(); //clear the flag
    std::cin.ignore (std::numeric_limits<std::streamsize>::max(), '\n'); //discard the bad input
    std::cout << "Invalid input; please re-enter.\n";
} 
```

[这一系列的问题](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.3)很好地解释了它。

链接：
[`clear()`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)
[`ignore()`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T19:23:06.457

如果你真的想使用异常处理，你可以这样做：

```
cin.exceptions(ios_base::failbit); // throw on rejected input
try {
// some code
int choice;
cin >> choice;
// some more code
} catch(const ios_base::failure& e) {
    cout << "What was that?\n";
    break;
} 
```

参考：[http ://www.cplusplus.com/forum/beginner/71540/](http://www.cplusplus.com/forum/beginner/71540/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T19:26:16.000

添加类似：

```
if(cin.fail())
{   
  cin.clear();
  cin.ignore(std::numeric_limits<std::streamsize>::max(),' '); 
  cout << "Please enter valid input";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T19:23:34.450

```
int main()
{
    int x = 0;
    cin.exceptions(ios::failbit);
    while(true){
        try
        {
            cin>>x;
        }
        catch(ios_base::failure& e)
        {
            //..
        }
        cout<<"x = "<<x<<endl;
    }
    return 0;
} 
```

这应该有效。

# android - 所选按钮android的文本颜色

> ID：11021862
> 
> 赞同：0
> 
> 时间：2012-06-13T19:20:18.953
> 
> 标签：android, button, textcolor

我有一个像这样的按钮：

```
<Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:text="Button"
        android:textColor="@color/my_gray" /> 
```

按下按钮后，文本颜色变为深灰色（“已按下”颜色）。我该如何防止这种情况？在按钮上按下我会`button.setTextColor(R.color.my_gray);`重置颜色，但它没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:44:15.543

尝试使用不同类型的按钮。[CompoundButton](http://developer.android.com/reference/android/widget/CompoundButton.html)或[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)可能适合您，因为您可以更轻松地控制它们的背景/图像。

但是，最好的方法可能是使用[本指南](http://adnan.chohdry.com/android-button-image-pressed-effect/)所示的选择器。

# php - 如何评估 PHP 中的 HTML 深度？

> ID：11021863
> 
> 赞同：1
> 
> 时间：2012-06-13T19:20:20.037
> 
> 标签：php

我现在正在编写一个 PHP 框架，并且遇到了一些格式问题。

我的意图是加载几个文件的组合，一起编译它们，然后将它们作为适当的 HTML 踢出。在这个过程中，我打算在逐行进行时缩进或突出。现在，我结合使用对 '<'、'</' 和 '/>' 的简单检查（此处无法使用真实字符）以及一些 XML 解析来实现这一点，但我确信那里是一个更好的方法来做到这一点。

现在我的代码给了我这样的东西：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" />
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Your Sitename - Module - Index</title>
    <link rel="stylesheet" href="layout/layout/default/css/styles.css" type="text/css" />
     <link rel="stylesheet" href="php/plugins/MoviePlayer/windows/IE/Silverlight/css/silverlight.css" type="text/css" />
      <script type="text/javascript" src="js/Cookies.js"></script>
       <script type="text/javascript" src="js/GlobalReady.js"></script>
        <script type="text/javascript" src="js/PluginDetection.js"></script>
         <script type="text/javascript" src="js/Silverlight.js"></script>
          <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
           <script type="text/javascript" src="js/jquery.flow.1.2.js"></script>
            <script type="text/javascript" src="layout/layout/default/js/LayoutInit.js"></script>
             <script type="text/javascript" src="php/plugins/MoviePlayer/windows/IE/Silverlight/js/SLPlayer.js"></script>
              <script type="text/javascript" src="php/plugins/MoviePlayer/windows/IE/Silverlight/js/wmvplayer.js"></script>
             </head>
              <body onLoad="javascript: GlobalReady();">
               <div id="container">
                <div id="header">
                 </div>
                </div>
               </body>
              </html> 
```

这有点偏离我想要实现的目标。

我不是任何正则表达式专家。甚至是用户，我认为我可以以这种方式实现这一目标，但不知道如何去做。

实际上，我的问题是这样的；如果您一次打印一行，您将如何正确格式化（以编程方式）？是否有一个库可以识别一行中的所有元素，而不管它们与后面的元素的关联如何？

如果不是，我确定我会编写一个新课程来自己处理这个问题。

我正在尝试实现这样的目标：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" />
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Your Sitename - Module - Index</title>
  <link rel="stylesheet" href="layout/layout/default/css/styles.css" type="text/css" />
  <link rel="stylesheet" href="php/plugins/MoviePlayer/windows/IE/Silverlight/css/silverlight.css" type="text/css" />
  <script type="text/javascript" src="js/Cookies.js"></script>
  <script type="text/javascript" src="js/GlobalReady.js"></script>
  <script type="text/javascript" src="js/PluginDetection.js"></script>
  <script type="text/javascript" src="js/Silverlight.js"></script>
  <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
  <script type="text/javascript" src="js/jquery.flow.1.2.js"></script>
  <script type="text/javascript" src="layout/layout/default/js/LayoutInit.js"></script>
  <script type="text/javascript" src="php/plugins/MoviePlayer/windows/IE/Silverlight/js/SLPlayer.js"></script>
  <script type="text/javascript" src="php/plugins/MoviePlayer/windows/IE/Silverlight/js/wmvplayer.js"></script>
 </head>
 <body>
 </body>
</html> 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:25:30.967

加载一些文件，将它们连接成一个字符串，并用于**[`tidy`](http://www.php.net/manual/en/tidy.examples.basic.php)**格式化它们。

但是，这很可能是生成 HTML 的代码的问题，应该修复而不是输出格式错误的代码并在以后修复它。

# java - 使用字符串内容创建 MimeMessage 对象

> ID：11021865
> 
> 赞同：2
> 
> 时间：2012-06-13T19:20:22.483
> 
> 标签：java

如何在 java 中使用 String 创建 MimeMessage 对象

```
MimeMultipart multiPart = new MimeMultipart(); 
```

并且需要从字符串对象中设置内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:30:01.487

此代码将执行此操作：

```
MimeBodyPart messagePart = new MimeBodyPart();
MimeMultipart multipart = new MimeMultipart();

messagePart.setText("You message's string content goes here.", "utf-8");
multipart.addBodyPart(messagePart); 
```

您必须创建一个`MimeBodyPart`对象，然后为其设置所有需要的属性并将其添加到 `MimeMultipart`.

# internet-explorer - PDF 无法在 Internet 浏览器上打开

> ID：11021867
> 
> 赞同：-3
> 
> 时间：2012-06-13T19:20:28.553
> 
> 标签：internet-explorer, pdf, browser

我有一个不能在我的浏览器 (Internet Explorer) 的新窗口中打开的 PDF。如果尝试使用“F5”刷新页面，PDF 也不会打开。但是，如果我单击链接并按“Enter”，PDF 就会打开。

“F5”和“Enter”有什么区别？

其他浏览器也打不开；它位于远程 Web 服务器上，并且文档是动态生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:22:55.863

我们需要更多信息.. 但我猜“Enter”会创建一个提交，而 F5 只是重新加载页面。

# android - 更新 ADT 后获取 SensorManager 时出现 ANR 错误

> ID：11021868
> 
> 赞同：0
> 
> 时间：2012-06-13T19:20:33.820
> 
> 标签：android, adt

今天把Eclipse中的ADT插件更新为“Android SDK Tools 19”和“Android SDK Platform-tools 11”。之后，我的应用程序在 AVD 上运行时出现 ANR 错误（但在真实设备上很好）。我检查了 traces.txt 文件并找到了这些信息：

```
Cmd line: com.mycomp.myapp

DALVIK THREADS:
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x4001d8e0 self=0xccb0
  | sysTid=379 nice=0 sched=0/0 cgrp=default handle=-1345026008
  | schedstat=( 1037525402 663090534 89 )
  at android.hardware.SensorManager.sensors_module_get_next_sensor(Native Method)
  at android.hardware.SensorManager.<init>(SensorManager.java:559)
  at android.app.ContextImpl.getSensorManager(ContextImpl.java:1123)
  at android.app.ContextImpl.getSystemService(ContextImpl.java:950)
  at android.content.ContextWrapper.getSystemService(ContextWrapper.java:363)
  at com.mycomp.myapp.clamato.service.ClamatoService.onCreate(ClamatoService.java:91)
  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2959)
  at android.app.ActivityThread.access$3300(ActivityThread.java:125)
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:123)
  at android.app.ActivityThread.main(ActivityThread.java:4627)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:521)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
  at dalvik.system.NativeStart.main(Native Method) 
```

所以，我检查了 ClamatoService.java:91 中的代码，是这样的：

```
sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE); 
```

显然，我无法获得 AVD 上的传感器信息。我重新创建了 AVD，但它没有帮助。有人可以帮忙吗？

谢谢。

# c# - 使用 C# 重新加载网页

> ID：11021871
> 
> 赞同：0
> 
> 时间：2012-06-13T19:20:52.720
> 
> 标签：c#

我有一个网页，在某些表格单元格中通过 DropDownLists 提示用户输入。进行选择时，该选择将替换 DropDownList，因此该操作只能执行一次。在需要进行更改的情况下，我希望能够单击一个从头开始重新加载页面的按钮。我已经用谷歌搜索和搜索，但我还没有设法找到一种方法来做到这一点。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:22:26.500

在页面上放置一个链接，其中包含文本“重新加载”和 url 页面的 url。拥有一个带有自身链接的页面是完全有效的。

如果您不喜欢链接的想法，请使用标准 Button 并在单击事件中使用 Response.Redirect 重定向到当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:27:57.500

您可以为按钮设置 OnClick，将每个 DropDownList 的 SelectedIndex 重置为 0，而不是从头开始重新加载页面。[或者，您可以按照此处](http://www.velocityreviews.com/forums/t232190-how-to-clear-viewstate-in-aspx-or-ascx-page.html)的建议将 Response.Redirect([页面的 url]) 设置到 OnClick 中。

# objective-c - 覆盖基类@property，同时仍然允许基类访问它

> ID：11021877
> 
> 赞同：0
> 
> 时间：2012-06-13T19:21:10.017
> 
> 标签：objective-c, oop

我不认为我想做的事情是可能的，但是这里有比我更狡猾的人，所以我想我还是问一下……

假设我们有一个 A 类：

```
@interface A
@property (strong) NSArray *items;
// There'll be methods and stuff too
@end 
```

现在，我们需要替换这个类来改变一些行为方面：

```
@interface B : A
@property (strong) NSArray *items;
// There'll be methods and stuff too
@end 
```

特别是，我们覆盖了“items”属性，因为我们需要它返回不同的东西。

直到在 B 的实例上调用的方法（该方法在 A 中实现且未被 B 覆盖）尝试访问“self.items”之前，这种方法运行良好。它不是访问它自己的副本，而是访问 B 的覆盖版本，因此会看到意想不到的结果 - 并且在我的真实案例中确实使应用程序崩溃:(

我可以通过重命名 B 中的属性来解决这个问题——但这不再是替代品，这是一种耻辱。

请注意，B 类可以通过 super 访问 A 的属性版本。理想情况下，从 A 类对属性的任何访问也将访问 A 的版本。有什么建议么？例如，在我的吸气剂中，有没有办法知道谁在请求它？

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:35:50.537

你的问题很混乱，但无论如何......

覆盖方法/属性不会全局更改它；它仅针对执行覆盖的类更改它。如果 A 的一个实例访问该属性，它仍然会访问它自己的属性，它不会被子类的实现神奇地接管。

（顺便说一句，如果你需要这样的行为，你的班级可能设计得很糟糕......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:46:04.187

嗯，很好地覆盖 B 中的属性意味着 B 中的任何访问器都将访问 B 中的新属性。A 的行为保持不变，A 中的访问器将始终访问 A 中的原始属性。A 类不能也不应该知道它的子类。

如果您希望子类继续访问超类属性，则不能覆盖它。时期。

另请注意，必须在接口中声明属性（或其访问器）（基本上将其公开），才能在子类中直接访问其副本。这是必要的，因为在 Objective-C 中没有“受保护的属性”之类的东西。

最后，假设您将 A、B 甚至 C 类型的类放在一个包中，然后忘记它们的类型，只知道它们共享一个 is-a 关系，然后您可以使用动态绑定/自省来决定将调用哪个类的方法基于它的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:27:24.063

你可以在技术上实现你想要的，但是在一个可怕的迂回黑客攻击中。将这类事情放入您的生产代码中，后果自负，如果这一切都崩溃了，不要指望任何同情。

不要创建`B`的子类`A`，仅将其作为具有`A`. 实现那些`B`你本来会在子类中替换的方法。对于处理`items`，请确保对`B`'`setItems:`进行适当的相应调用`A`- 确实为您覆盖但您希望也与`A`.

然后创建一个`C`具有 a`B`和a 的类`A`。不要在上面实施任何东西。遵循正常约定`alloc`并`init`返回`(id)`并执行以下稍微奇怪的任务：

```
A *instance = [[C alloc] init]; 
```

仅`C`实施您喜欢的转发逻辑：

```
@implementation C

- (id)forwardingTargetForSelector:(SEL)aSelector
{
    if([self.instanceOfB respondsToSelector:aSelector]) return self.instanceOfB;
    return self.instanceOfA.
}

@end 
```

现在每个引用`A`都是对`self`实例`A`而不是子类的引用。尽管如此，您`B`在系统中有一个 的实例，它会`A`通过获取相关实例`A`优先服务的任何消息来表现它的继承，同时能够将它想要的任何内容推迟到`A`.

通过给那些具有 的实例`A`的类`C`，它们将通过您独特的继承逻辑而不是默认的东西。此外，因为您已`(id)`在适当的位置返回并且两者都是对象，所以这是一个安全的隐式强制转换，编译器不会抱怨您继续调用`C`未实现的方法。

# windows - 使用 Powershell 或命令行在 Windows 中创建压缩/压缩文件夹

> ID：11021879
> 
> 赞同：23
> 
> 时间：2012-06-13T19:21:15.483
> 
> 标签：windows, powershell, command-line, compression

我正在创建一个夜间数据库模式文件，并希望将每晚创建的所有文件（每个数据库一个文件）放入一个文件夹并压缩该文件夹。我有一个创建模式的 PowerShell 脚本。仅创建数据库的脚本，然后将所有文件添加到新文件夹中。问题在于这个过程的压缩部分。

是否有人知道这是否可以通过预安装的处理文件夹压缩的 Windows 实用程序来完成？

如果可能，最好使用该实用程序而不是 7zip 之类的工具（我不想在每个客户的服务器上安装 7zip，如果我问他们可能需要几年的时间来完成）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-11T21:25:30.020

采用最新 .NET 4.5 框架的原生方式，但完全没有功能：

创建：

```
Add-Type -Assembly "System.IO.Compression.FileSystem" ;
[System.IO.Compression.ZipFile]::CreateFromDirectory("c:\your\directory\to\compress", "yourfile.zip") ; 
```

萃取：

```
Add-Type -Assembly "System.IO.Compression.FileSystem" ;
[System.IO.Compression.ZipFile]::ExtractToDirectory("yourfile.zip", "c:\your\destination") ; 
```

如前所述，完全没有功能，所以不要指望*覆盖*标志。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-13T19:58:11.340

下面是一些不依赖扩展的与 zip 相关的函数：[Compress Files with Windows PowerShell](http://blogs.msdn.com/b/daiken/archive/2007/02/12/compress-files-with-windows-powershell-then-package-a-windows-vista-sidebar-gadget.aspx)。

您可能感兴趣的主要功能是：

```
function Add-Zip
{
    param([string]$zipfilename)

    if(-not (test-path($zipfilename)))
    {
        set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
        (dir $zipfilename).IsReadOnly = $false  
    }

    $shellApplication = new-object -com shell.application
    $zipPackage = $shellApplication.NameSpace($zipfilename)

    foreach($file in $input) 
    { 
            $zipPackage.CopyHere($file.FullName)
            Start-sleep -milliseconds 500
    }
} 
```

用法：

```
dir c:\demo\files\*.* -Recurse | Add-Zip c:\demo\myzip.zip 
```

有一个警告：如果路径不是绝对的，则`shell.application`对象的`NameSpace()`函数无法打开 zip 文件进行写入。因此，如果您将相对路径传递给`Add-Zip`，它将失败并返回 null 错误，因此 zip 文件的路径必须是绝对路径。

或者你可以`$zipfilename = resolve-path $zipfilename`在函数的开头添加一个。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-08T06:40:27.170

从 PowersShell 5 开始，有一个[Compress-Archive](https://technet.microsoft.com/en-us/library/dn841358.aspx) cmdlet 可以开箱即用地完成任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T16:39:26.450

这将 .\in 内容压缩到 .\out.zip 并使用 System.IO.Packaging.ZipPackage 按照[此处的示例](http://www.winsoft.se/2010/12/easy-archiving-of-files-using-powershell/)

```
$zipArchive = $pwd.path + "\out.zip"
[System.Reflection.Assembly]::Load("WindowsBase,Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35")
$ZipPackage=[System.IO.Packaging.ZipPackage]::Open($zipArchive, [System.IO.FileMode]"OpenOrCreate", [System.IO.FileAccess]"ReadWrite")
$in = gci .\in | select -expand fullName
[array]$files = $in -replace "C:","" -replace "\\","/"
ForEach ($file In $files) {
   $partName=New-Object System.Uri($file, [System.UriKind]"Relative")
   $part=$ZipPackage.CreatePart($partName, "application/zip", [System.IO.Packaging.CompressionOption]"Maximum")
   $bytes=[System.IO.File]::ReadAllBytes($file)
   $stream=$part.GetStream()
   $stream.Write($bytes, 0, $bytes.Length)
   $stream.Close()
                                                    }
$ZipPackage.Close() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-17T22:26:09.103

使用voithos在powershell中压缩文件的答案，只是Add-Zip功能出现了一个问题，如果文件在那段时间内无法完全压缩，则Start-sleep -milliseconds 500会导致问题->下一个开始在它完成之前导致错误和一些文件没有被压缩。

所以在玩了一会儿之后，首先尝试让一个计数器检查 $zipPackage.Items() 的计数，并且只有在项目计数增加后才继续（这不起作用，因为在某些情况下它会返回 0不应该）我发现如果包仍在压缩/复制文件，它将返回 0（我认为，哈哈）。添加了一个简单的 while 循环，其中包含 start-sleep，等待 zipPackage.Items().count 在继续之前为非零值，这似乎解决了问题。

```
function Add-Zip
{
param([string]$zipfilename)

if(-not (test-path($zipfilename)))
{
    set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
    (dir $zipfilename).IsReadOnly = $false  
}

$shellApplication = new-object -com shell.application
$zipPackage = $shellApplication.NameSpace($zipfilename)

foreach($file in $input) 
{ 
        $zipPackage.CopyHere($file.FullName)
        do
        {
            Start-sleep -milliseconds 250
        }
        while ($zipPackage.Items().count -eq 0)
}
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-07-29T23:30:29.910

使用 PowerShell 3.0 版：

```
Copy-ToZip -File ".\blah" -ZipFile ".\blah.zip" -Force 
```

希望这可以帮助。

# c# - 在从查询中返回字符串值之前检查异常

> ID：11021880
> 
> 赞同：0
> 
> 时间：2012-06-13T19:21:15.737
> 
> 标签：c#, sql, winforms, postgresql, npgsql

我的功能导致很多异常，因此性能不是那么好。

您能否建议在我返回字符串之前如何修复函数并验证数据？我试图查看表的数量是否超过 0，但情况并非总是如此。

```
 public String getString(String sql)
    {
        DataSet ds = new DataSet();
        string connstring = String.Format("Server={0};Port={1}; User Id={2};Password={3};Database={4};", tbHost, tbPort, tbUser, tbPass, tbDataBaseName);
        NpgsqlConnection conn = new NpgsqlConnection(connstring);
        try
        {
            conn.Open();
            NpgsqlDataAdapter da = new NpgsqlDataAdapter(sql, conn);
            ds.Reset();
            da.Fill(ds);           
            conn.Close();
            return ds.Tables.Count == 0 ? "0" : ds.Tables[0].Rows[0][0].ToString();
        }
        catch (Exception msg)
        {
            if (conn.State.ToString() == "Open")
            {
                conn.Close();
            }
            return "0";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:32:53.623

您应该使用[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)自动处理您创建的对象。您可能会显式打开/关闭连接，但这里不需要这样做，因为行为将完全相同。如果未打开 DataAdapter 将打开连接，并记得在之后关闭它。

关于`validate the data`- 查看代码中的注释。

```
public String getString(String sql)
{
    using (DataSet ds = new DataSet())
    {
        string connstring = String.Format("Server={0};Port={1}; User Id={2};Password={3};Database={4};", tbHost, tbPort, tbUser, tbPass, tbDataBaseName);
        using (NpgsqlConnection conn = new NpgsqlConnection(connstring))
        {
            using (NpgsqlDataAdapter da = new NpgsqlDataAdapter(sql, conn))
            {
                da.Fill(ds);
                // You did check count of tables
                if (ds.Tables.Count > 0)
                {
                   DataTable dt = ds.Tables[0];
                   // But forgot to check count of Rows
                   if (dt.Rows.Count > 0)
                   {
                      object o = dt.Rows[0][0];
                      //  And returned value for nulls
                      //  Check for null is here because I don't know
                      //  This Postgresql classes
                      if (o != DBNull.Value && o != null)
                      {
                         return o.ToString();
                      }
                  }
              }
           }
        }
    }
    // Return default value
    return "0";
} 
```

最后一件事 - 在测试枚举时，不要将其转换为字符串。要查看连接是否打开，只需说：

```
if (conn.State == ConnectionState.Open) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:28:07.170

也尝试使用“finally”块。

此外，我建议将 Connect 功能划分为其他方法，以便更好地控制异常发生的位置。

还可以将存储过程与 SQL 一起使用，以最大限度地减少 SQL 字符串的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:31:03.177

```
public String getString(String sql)
{
    DataSet ds = new DataSet();
    string connstring = String.Format("Server={0};Port={1}; User Id={2};Password={3};Database={4};", tbHost, tbPort, tbUser, tbPass, tbDataBaseName);
    NpgsqlConnection conn = new NpgsqlConnection(connstring);
    conn.Open();
    NpgsqlDataAdapter da = new NpgsqlDataAdapter(sql, conn);
    ds.Reset();
    try
    {
       da.Fill(ds);          
    }
    catch (Exception msg)
    {
        // do something here or log the error.
    }
    finally
    {
       if (conn.State.ToString() == "Open")
       {
            conn.Close();
       }
    }
    return ds.Tables.Count == 0 ? "0" : ds.Tables[0].Rows[0][0].ToString();
} 
```

# ruby-on-rails - 渲染：js 是如何工作的？

> ID：11021882
> 
> 赞同：2
> 
> 时间：2012-06-13T19:21:23.320
> 
> 标签：ruby-on-rails

Rails 究竟是如何渲染 JavaScript 代码的，然后由浏览器执行？这种事情的数据流是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:41:04.660

在执行控制器视图时，Rails 将 Javascript 代码呈现为浏览器的回调。使用称为 AJAX 的东西。

当我单击一个元素或使用 AJAX 通过浏览器进行调用时，就会发生这种情况。AJAX 允许您在不刷新页面的情况下进行远程浏览器调用。由于您不刷新页面，因此更新您正在查看的当前页面的唯一方法是让控制器在浏览器中呈现 javascript。浏览器接受这个 javascript 并像代码一样执行它。javascript 可用于做任何事情，从更新页面上显示的数字，到从页面中删除某些内容，再到添加整个 DIV 信息。

例如，例如，您单击网页上的删除按钮以删除您的帖子。删除按钮向服务器发送 REMOTE 消息，通常在 RAILS 项目的 VIEW CONTROLLER 中调用 METHOD。在我们的例子中，它只是告诉服务器从数据库中删除帖子。它执行此操作，然后 METHOD 看到由于您以远程方式请求某些内容，因此它选择呈现 JS 响应。

```
def destroy
  @note = Note.find(params[:id])
  @note_id = @note.id
  @note.destroy
  respond_to do |format|
    format.html do // This is Rendered if the Message to Delete was NOT sent remotely
      flash[:success] = "Note Deleted Successfully" 
      redirect_to root_path
    end
    format.js  // Since we did send it Remotely, it then renders our Javascript Response
  end
end 
```

在我们删除某些内容的情况下，javascript 响应将是一条消息，告诉浏览器删除包含您要删除的内容的 DIV 或页面元素。

```
$('#note-<%= @note_id %>').hide('slow', function(){ $('#note-<%= @note_id %>').remove();  }); // Hides the Post and then Removes it in a Smooth slow animation
$('.alert').slideUp('slow', function(){ $('.alert').remove(); }); // Shows the Alert with the alert 
```

如果我们没有将调用返回给浏览器，因为页面没有刷新，所以在您手动刷新页面之前，它不会显示帖子已被删除。这允许页面更加动态并节省带宽，因为您不必刷新页面，因此您不再需要再次从服务器下拉所有内容，从而实现更无缝的用户体验。而且，由于您在 JQuery 中使用动画，它看起来也令人印象深刻。

这是一个迷你教程，我发现它以非常相似的方式使用 Rails 3 和 JQuery：

[http://blog.bernatfarrero.com/jquery-and-rails-3-mini-tutorial/](http://blog.bernatfarrero.com/jquery-and-rails-3-mini-tutorial/)

# c# - 防止 MessageBox 移出父窗体

> ID：11021883
> 
> 赞同：1
> 
> 时间：2012-06-13T19:21:25.807
> 
> 标签：c#, winforms, messagebox

我需要将消息框保留在父表单中。因此，当用户尝试将 Messagebox 移到父级之外时，它会留在父级中。我自己的消息表单没有问题。但我喜欢使用消息框功能。

理想情况下，我想添加到这种方法。 [在父窗体中居中 MessageBox](https://stackoverflow.com/questions/1732443/center-messagebox-in-parent-form)

如何捕获消息框移动事件并且不允许它超出父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:24:36.073

实现这一点的方法是创建自己的 MessageBox 类，并复制功能。

作为提示：使用打开“自动调整大小”的标签可能会有所帮助。然后，您可以使用标签的大小来调整 MessageBox 的大小以匹配。

话虽如此，这听起来是个坏主意。为什么不让用户根据需要移动消息框？

# .net - 由于以下错误，检索具有 CLSID {XXXX} 的组件的 COM 类工厂失败：8007007e

> ID：11021886
> 
> 赞同：1
> 
> 时间：2012-06-13T19:21:30.450
> 
> 标签：.net, windows-services, com-interop, 32-bit

我们开发了一个项目，它会爬取 Sharepoint 的所有文档并找到法律条款并插入到数据库中。为此，我们创建了一个可以在所有环境中工作的安装程序。除了 Win 2003 等少数 Win Server 机器（在客户的位置）外，它似乎在任何地方都能正常工作。我们已经将配置与运行良好的机器进行了比较，但我们不断收到与下面提到的相同的错误：

由于以下错误，检索具有 CLSID {XXXX} 的组件的 COM 类工厂失败：8007007e

请提供帮助或指点。

# javascript - 用于计算两个 JavaScript 对象之间差异的 jQuery 函数

> ID：11021893
> 
> 赞同：15
> 
> 时间：2012-06-13T19:21:51.900
> 
> 标签：javascript, jquery, json, knockout.js, underscore.js

我有一个使用**JQuery** + **Knockout**的丰富的基于 AJAX 的 Web 应用程序。我有一个 JQuery 插件，它包装了我的 Knockout 视图模型以公开实用程序方法，如*.reset()*、*.isDirty()*等。

我有一个名为*.setBaseline()*的方法，它本质上是在填充数据模型后（通过映射插件）拍摄数据模型的**快照**。然后我可以使用这个快照来快速确定模型是否发生了变化。

我正在寻找的是某种**通用函数**，它可以返回一个对象，该对象表示**两个 JavaScript 对象之间的差异，**其中一个对象被认为是主对象。

例如，假设这是我的快照：

```
var snapShot = {
  name: "Joe",
  address: "123 Main Street",
  age: 30,
  favoriteColorPriority: {
     yellow: 1,
     pink: 2,
     blue: 3
  }
}; 
```

然后假设实时数据如下所示：

```
var liveData = {
    name: "Joseph",
    address: "123 Main Street",
    age: 30,
    favoriteColorPriority: {
        yellow: 1,
        pink: 3,
        blue: 2
    }
}; 
```

我想要一个返回以下内容的*.getChanges(snapShot, liveData)*实用程序函数：

```
var differences = {
    name: "Joseph",
    favoriteColorPriority: {
        pink: 3,
        blue: 2
    }
}; 
```

我希望**_.underscore 库**可能有这样的东西，但我找不到任何看起来像这样工作的东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T19:52:42.007

我不认为下划线有这样的功能，但是很容易自己实现：

```
function getChanges(prev, now) {
    var changes = {};
    for (var prop in now) {
        if (!prev || prev[prop] !== now[prop]) {
            if (typeof now[prop] == "object") {
                var c = getChanges(prev[prop], now[prop]);
                if (! _.isEmpty(c) ) // underscore
                    changes[prop] = c;
            } else {
                changes[prop] = now[prop];
            }
        }
    }
    return changes;
} 
```

或者

```
function getChanges(prev, now) {
    var changes = {}, prop, pc;
    for (prop in now) {
        if (!prev || prev[prop] !== now[prop]) {
            if (typeof now[prop] == "object") {
                if(c = getChanges(prev[prop], now[prop]))
                    changes[prop] = c;
            } else {
                changes[prop] = now[prop];
            }
        }
    }
    for (prop in changes)
        return changes;
    return false; // false when unchanged
} 
```

这不适用于数组（或任何其他非普通对象）或不同结构的对象（删除、原始对象类型的更改）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:10:37.370

发布我自己的答案，以便人们可以看到也适用于数组的最终实现。在下面的代码中，“um”是我的命名空间，我还使用了 Underscore.js 中的 _.isArray() 和 _.isObject 方法。

查找“_KO”的代码用于跳过对象中存在的 Knockout.js 成员。

```
// This function compares 'now' to 'prev' and returns a new JavaScript object that contains only
// differences between 'now' and 'prev'. If 'prev' contains members that are missing from 'now',
// those members are *not* returned. 'now' is treated as the master list.
um.utils.getChanges = function (prev, now) {
    var changes = {};
    var prop = {};
    var c = {};
    //-----

    for (prop in now) { //ignore jslint
        if (prop.indexOf("_KO") > -1) {
            continue; //ignore jslint
        }

        if (!prev || prev[prop] !== now[prop]) {
            if (_.isArray(now[prop])) {
                changes[prop] = now[prop];
            }
            else if (_.isObject(now[prop])) {
                // Recursion alert
                c = um.utils.getChanges(prev[prop], now[prop]);
                if (!_.isEmpty(c)) {
                    changes[prop] = c;
                }
            } else {
                changes[prop] = now[prop];
            }
        }
    }

    return changes;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-18T02:58:48.800

我在我的项目中使用[JsonDiffPatch](https://github.com/benjamine/JsonDiffPatch)来查找增量，通过网络传输它，然后在另一端修补对象以获得确切的副本。它非常易于使用并且效果很好。

它也适用于数组！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T14:04:41.110

## 使用 jQuery.isEmptyObject() 的解决方案

这会修改上面的**getChanges(prev, now)**解决方案。它也应该适用于不同类型的对象，并且当**prev[prop]**未定义时（导致 now[prop]）

```
function getChanges(prev, now)
{
    // sanity checks, now and prev must be an objects
    if (typeof now !== "object")
        now = {};
    if (typeof prev !== "object")
        return now;

    var changes = {};
    for (var prop in now) {
         // if prop is new in now, add it to changes
        if (!prev || !prev.hasOwnProperty(prop) ) {
            changes[prop] = now[prop];
            continue;
        }
        // if prop has another type or value (different object or literal)
        if (prev[prop] !== now[prop]) {
            if (typeof now[prop] === "object") {
                // prop is an object, do recursion
                var c = getChanges(prev[prop], now[prop]);
                if (!$.isEmptyObject(c))
                    changes[prop] = c;
            } else {
                // now[prop] has different but literal value
                changes[prop] = now[prop];
            }
        }
    }

    // returns empty object on none change
    return changes;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-06T20:29:55.633

无需为此使用 jquery。我最近写了一个模块来做到这一点：[https](https://github.com/Tixit/odiff) ://github.com/Tixit/odiff 。这是一个例子：

```
var a = [{a:1,b:2,c:3},              {x:1,y: 2, z:3},              {w:9,q:8,r:7}]
var b = [{a:1,b:2,c:3},{t:4,y:5,u:6},{x:1,y:'3',z:3},{t:9,y:9,u:9},{w:9,q:8,r:7}]

var diffs = odiff(a,b)

/* diffs now contains:
[{type: 'add', path:[], index: 2, vals: [{t:9,y:9,u:9}]},
 {type: 'set', path:[1,'y'], val: '3'},
 {type: 'add', path:[], index: 1, vals: [{t:4,y:5,u:6}]}
]
*/ 
```

在 odiff 的自述文件中，我列出了我认为不符合我需要的其他模块，如果您也想查看这些模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T15:26:59.437

基于上述解决方案。此版本更正了一个错误，原始解决方案未检测到某些更改。

```
getChanges = function (prev, now) {
        var changes = {}, prop, pc;
        for (prop in now) {
            if (!prev || prev[prop] !== now[prop]) {
                if (typeof now[prop] == "object") {
                    if (c = getChanges(prev[prop], now[prop]))
                        changes[prop] = c;
                } else {
                    changes[prop] = now[prop];
                }
            }
        }

        for (prop in prev) {
            if (!now || now[prop] !== prev[prop]) {
                if (typeof prev[prop] == "object") {
                    if (c = getChanges(now[prop], prev[prop]))
                        changes[prop] = c;
                } else {
                    changes[prop] = prev[prop];
                }
            }
        }

        return changes;
    }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-07T16:59:40.227

请注意，`typeof now[prop] == "object"`即使`now[prop]`是 Date 也是如此。

代替： `typeof now[prop] == "object"`

我用了： `Object.prototype.toString.call( now[prop] === "[object Object]")`

# nfc - 防止复制nfc芯片信号

> ID：11021894
> 
> 赞同：3
> 
> 时间：2012-06-13T19:22:03.400
> 
> 标签：nfc

我想知道 NFC 芯片是否有某种唯一标识符？我有 Mifare Classic 1K 和 Mifare Ultralight C 贴纸，我希望 NFC 手机使用我的 android 应用程序读取，是否有一些常见的做法来保护信号，所以有人不能只是进来使用通用应用程序扫描数据（NFC 阅读器)，然后将数据写入另一个芯片以伪造我的贴纸信号。或者，是否有一个独特的 ID，比如这些芯片中内置的手机 UUID 是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:27:23.337

我担心标签总是存在窃听、中间人或中继攻击的风险。您可能希望的最好结果是使用您的设备和标签上的一个已知秘密来加密数据。

这仍然存在秘密被发现然后被复制的风险。

NFC 的设计初衷并不是一个高度安全的平台。

对于设备到设备，您可以在现有 NFC 堆栈（例如 SSL）的 TOP 上实施协议，但这不适用于预生成的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:52:27.207

是的，每个芯片都有一个唯一的标识符，但是这里其他人关于缺乏安全性的评论令人担忧，因为这是当前（不断增长的）未来金融交易首选的首选硬件平台。

克隆比仅仅从一个芯片上吸取数据并将其复制到另一个芯片上是一个更大的挑战。

您为“高度安全”的 Android 应用程序设想了哪些具体用途？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:56:12.047

您有 MIFARE Ultralight C 标签。这些标签具有允许人们保护对存储在标签上的数据的访问的功能，这些数据将受到基于 3DES 的身份验证的保护。这将防止未经授权的读取访问。

一般来说，我建议不要使用标签的唯一 ID 作为安全功能。

# objective-c - 为什么 NSString 不通过引用来接听电话？

> ID：11021905
> 
> 赞同：-1
> 
> 时间：2012-06-13T19:22:27.470
> 
> 标签：objective-c, nsstring

我正在尝试通过调用方法来更改 NSString 类型的变量。但它不起作用。我用其他类型尝试了同样的方法，效果很好。你能帮我吗？

界面：

```
- (void) changeNSString: (NSString *) stringToChange; 
```

执行：

```
- (void) changeNSString: (NSString *) stringToChange{

    stringToChange = @"Test";    
}

- (IBAction)actionBla:(id)sender {

    NSString *myString = [NSString string];
    [self changeNSString:myString];
    NSLog(myString);            //Returns nothing or empty string

} 
```

====================== 编辑：感谢 CrimsonDiego 的帮助，这是一个可行的解决方案。虽然我仍然有一点理解问题：为什么将 NSMutableString 分配给 NSString var 时没有类型错误？

界面：

```
- (void) changeNSMutableString: (NSMutableString *) stringToChange; 
```

执行：

```
- (void) changeNSMutableString: (NSMutableString *) stringToChange{

    [stringToChange setString:@"Test"]    
}

- (IBAction)actionBla:(id)sender {

    NSMutableString *myString = [NSMutableString string];
    [self changeNSMutableString:myString];
    self.myLabel.text = myString;           //Why is there no type error???

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:24:38.117

您正在将新变量分配给函数内的局部变量。

局部变量`stringToChange`引用与最初相同的变量`myString`，但是当您将 @"Test" 分配给 stringToChange 时，它​​不再引用原始字符串。

这里的解决方案是使用`NSMutableString`，或者有一个类变量（或属性）并使用它而不是将其传递给函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T19:30:20.040

您`stringToChange`在函数中的本地设置。尝试以下操作：

```
- (NSString*) changeNSString: (NSString *) stringToChange{

    stringToChange = @"Test";
    return stringToChange;
}

- (IBAction)actionBla:(id)sender {

    NSString *myString = [NSString string];
    myString = [self changeNSString:myString];
    NSLog(myString);            //Returns nothing or empty string

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T19:28:58.783

我不是 Objective-C 方面的专家，但在我看来`stringToChange`，就像在“普通”C 中一样，是一个可以包含指向字符串的指针的参数。该参数是按值传递的，因此，当您分配`@"Test"`给`stringToChange`您时，实际上只是更改本地参数`stringToChange`而不是`myString`. 如果要更改`myString`，则必须将参数类型更改为并作为参数`NSString **`传递。`&myString`

# php - 通过类型提示对象获取类中私有变量的值以在 php 5.3 中分配它

> ID：11021911
> 
> 赞同：0
> 
> 时间：2012-06-13T19:22:53.860
> 
> 标签：php, php-5.3, type-hinting

我一直在阅读 Martin Fowler 的 Rafactoring，在本书的开头，他使用了一个示例应用程序（用 Java 编写），我正试图将其转换为 PHP 用于培训目的。（为了提出这个问题，我已经精简了代码，但如果变量是公开的，它就可以工作。）

麻烦是创建一个语句，我需要使用 Movie 类的 getCode() 方法访问一个值（参见 switch），因为 $code 是私有的。（当然，如果所有变量都是公开的，下面的代码就可以工作，但我想让它们保持私有。）

有人可以解释一下我将如何从 statement() 中的 switch 访问调用 Movie 的 getCode() 方法的私有变量。（或者如果有更好的方法，请告诉我。）

```
class Movie {
    private $title;
    private $code;

    public function __construct($title, $code) {
        $this->title = $title;
        $this->code = $code;
    }

    public function getCode() {
        return $this->code;
    }

    public function getTitle() {
        return $this->title;
    }
}

class Rental {
    private $movie; // will carry a Movie object
    private $days;

    public function __construct(Movie $movie, $days) {
        $this->movie = $movie;
        $this->days = $days;
    }

    public function getMovie() {
        return $this->movie;
    }
}

class Customer {
    private $name;
    private $rentals; // will be a collection of Rental Objects

    public function __construct($name) {
        $this->name = $name;
    }

    public function addRental(Rental $rental) {
        $this->rentals[] = $rental;
    }

    public function statement() {
        $thisAmount = 0;

        foreach ($this->rentals as $each) {
            // what is the better way to call this value??????
            switch ($each->movie->code) {
                case 1:
                    $thisAmount+= ($each->days - 2) * 1.5;
                    break;

                case 2:
                    $thisAmount += $each->days * 3;
                    break;

                case 3:
                    $thisAmount += 1.5;
                    break;
            }

            // show figures for this rental
            $result = "\t" . $each->movie->title . "\t" . $thisAmount . "\n";
        }

        return $result;
    }
}

// pick a movie
$movie = new Movie('Star Wars', 0);
// now rent it
$rental = new Rental($movie, '2');

// now get statement
$customer = new Customer('Joe');
$customer->addRental($rental);

echo $customer->statement(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:27:27.890

您正在遍历`movie`foreach 中的集合。所以你可以这样做：

```
foreach($this->rentals as $rental) {
   switch($rental->getMovie()->getCode()) { 
```

当然，您可以将变量命名为`each`. 我只是发现`$movie`在这种情况下更具可读性和可理解性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T19:27:29.170

将您的行替换为：

```
$each->getMovie->getCode() 
```

# apache-flex - FLEX - 加载远程对象并与模块共享它们

> ID：11021916
> 
> 赞同：0
> 
> 时间：2012-06-13T19:23:16.423
> 
> 标签：apache-flex, module, remoteobject

我想首先说我是 flex 新手。我的背景更多的是 .NET。我正在 flex 中启动一个新项目，该项目将包含许多模块。我在许多帖子中读到远程对象访问数据应该放在主应用程序中，并且您应该在模块中共享这些远程对象。我在网上搜索了所有内容，但没有找到任何有关如何执行此操作的示例。

如果有人可以分享一些示例代码，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:35:12.097

您应该首先将模块仅用于视图层。这是最简单的方法。理想情况下，您使用接口作为模块和应用程序之间的契约，如果您想要很棒的代码，您将使用 MVC 方式。我敢打赌，与视图层相比，控制器、服务和域层只是应用程序的一小部分，就字节大小而言，因此您可以将它们完全编译到应用程序中。这样，模块不需要知道服务层，只需要知道保存数据的领域层。

# sql-server - Sql BIDS 聚合转换

> ID：11021918
> 
> 赞同：0
> 
> 时间：2012-06-13T19:23:31.857
> 
> 标签：sql-server, aggregate, bids

我对 BIDS 聚合转换有疑问。我的数据流任务从 Excel 源开始，经过聚合转换，然后进入 OLE 数据库。我通过 project_id 聚合我的数据。

但是，当我按 project_id 聚合时，我不再拥有其他字段的信息。我想保留 project_name 字段。这是怎么做到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:53:37.640

我的第一个想法是，如果 Excel 源中的 project_id 和 project_name 字段具有 1:1 对应关系，那么您可以在聚合转换中添加 project_name 作为附加输入列，并进行分组操作。

否则，您将需要将 project_name 映射到 project_id 的某种“官方”映射，您可以将其存储在数据库中并使用查找转换将 project_name 列添加到数据流中。

# python - 一段时间后关闭 tkinter 窗口

> ID：11021920
> 
> 赞同：2
> 
> 时间：2012-06-13T19:23:37.237
> 
> 标签：python, time, tkinter, window

我有一段 Python 代码应该打开一个新窗口一段时间，然后关闭窗口。通过单击按钮触发窗口。这是我所拥有的基础知识。

```
def restore(self):
    self.restore = Toplevel()

    message = "Select an available Backup to Restore to."

    Label(self.restore, text=message).pack()
    # We then create and entry widget, pack it and then
    # create two more button widgets as children to the frame.

    os.chdir('.')
    for name in os.listdir("."): 
        if os.path.isdir(name):
            self.button = Button(self.restore, text=name,command=self.restoreCallBack)
            self.button.pack(side=BOTTOM,padx=10)

def restoreCallBack(self):
    self.restoreCB = Toplevel()

    message = "Please wait while the database is restored..."
    Label(self.restoreCB, text=message, padx=100, pady=20).pack()

    time.sleep(5)

    self.restore.destroy()
    self.restoreCB.destroy() 
```

我需要显示 restoreCallBack 窗口 5 秒钟，然后关闭窗口。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:30:55.673

看看`after`方法。例如：

```
widget.after(5000,callback) 
```

您不应该在 GUI 的（主线程）中使用 sleep —— 整个事情都会冻结。

# facebook - Facebook js sdk 是否足以对我网站中的用户进行身份验证？

> ID：11021924
> 
> 赞同：0
> 
> 时间：2012-06-13T19:23:56.687
> 
> 标签：facebook, asp.net-mvc-3, c#-4.0, facebook-c#-sdk

在我的站点中，我使用 facebook js sdk 登录（我在 facebook 页面中尝试了该示例），但是我如何告诉服务器该用户已通过身份验证？我尝试使用 ajax 发布到服务器。但这似乎不安全！

**我的问题是身份验证过程可以只使用 JS sdk 吗？**

如果无法使用 Js 完成身份验证过程，那么 facebook c# sdk 或其他非官方的 facebook c# sdk 呢？

```
 FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
       // POST TO SERVER AND TELL HIM THAT THE USER IS AUTHENTICATED NOW
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:29:35.463

JS SDK 可以在登录时设置一个cookie，您可以在服务器端读取该cookie。如果您在那里再次呼叫 /me，那么您可以相对确定一切正常。

# html - 使用固定 DIV 时禁用 Firefox 抗锯齿

> ID：11021925
> 
> 赞同：5
> 
> 时间：2012-06-13T19:24:00.893
> 
> 标签：html, css, antialiasing

我在 Firefox 中发现了一个奇怪的错误。我也在 Chrome 中测试过，但没有发生..

我正在使用背景对象。这是一个位置固定、大小为 1920*1050 的 div。我需要这个，因为我希望我的网站与所有分辨率兼容。较小的分辨率隐藏了大部分背景，但全高清用户可以看到整个背景。

如果我对这个 div 使用绝对位置，我的浏览器会给我水平滚动的能力。我可以用隐藏溢出来隐藏它，但我不能禁用滚动功能。使用固定位置，浏览器不会“看到”整个对象，这相当于禁用水平滚动。

如果有人有任何其他解决方案，我将不胜感激。

这个解决方案的问题是：

![](../Images/814a39ff9314a42af0258a40494e6c65.png)

你可以看到两者之间的区别。它是相同的文本样式，但在固定样式上没有抗锯齿。使用较小的字体大小真的很烦人。

过去有人遇到过这个错误吗？我该如何解决它，或者背景图像的任何其他解决方案？

**更新**

好的，我删除了 div，并为我的 body 标签添加了背景，具有固定的属性，并且发生了同样的事情...... background-attachment：fixed; < 导致同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T06:39:49.607

从父元素中删除任何 box-shadow 属性。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:11:24.603

不太清楚你的背景应该做什么。但是如果你需要一个适合所有浏览器窗口大小的比例缩放背景，你可以使用[这个](http://dev.andreaseberhard.de/jquery/superbgimage/)插件和一个相当高分辨率的 JPG 并预加载。

# perl - 我可以在通过拆分有条件地插入哈希时避免字符串复制吗？

> ID：11021929
> 
> 赞同：2
> 
> 时间：2012-06-13T19:24:08.690
> 
> 标签：perl, performance

我是从 构建`%grouped`的`%uniq_c`，其中`%grouped`包含通过拆分`%uniq_c`的 key IF`%uniq_c`的值足够高生成的键/值对。它相当有效，但我想做得更好。

```
%uniq_c = (
    'foo:baz'   => 3,
    'foo:quux'  => 12,
    'bar:corge' => 15,
    'bar:fred'  => 8,
);

foreach my $gv (keys %uniq_c) {
        if( $uniq_c{$gv} >= 10 ) {
                my ($g, $v) = split /:/, $gv, 2;
                push( @{$grouped{$g}}, $v );
        }
} 
```

我*认为*每次循环迭代都会发生三个字符串副本；1 代表 $g，2 代表 $v。有没有办法消除一个 $v 副本，或者更好的是，一个 $v 和一个 $g 副本（可能是某种字符串切片）？

作为参考，Data::Dump::dump(%grouped) 产生以下内容：

```
(
  "bar", ["corge"],
  "foo", ["quux"],
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:32:28.190

对返回的值进行复制`split`非常有效；字符串缓冲区被盗而不是被复制。但是当你 push 时还有另一个副本完成`$v`。所有这三个副本都可以通过混叠来避免。

```
use Data::Alias qw( alias );

foreach my $gv (keys %uniq_c) {
        if( $uniq_c{$gv} >= 10 ) {
                alias my ($g, $v) = split /:/, $gv, 2;
                alias push @{$grouped{$g}}, $v;
        }
} 
```

# .net - 如何在 XElement 上设置命名空间属性

> ID：11021931
> 
> 赞同：20
> 
> 时间：2012-06-13T19:24:15.487
> 
> 标签：.net, xml, linq-to-xml

我需要将以下属性添加到 XElement：

```
<xmlns="http://www.mysite.com/myresource" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mysite.com/myresource TheResource.xsd"> 
```

由于“：”，将它们添加为 XAttribute 不起作用，而且我确信这不是正确的方法。我如何在那里添加这些？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-13T23:10:00.767

它花[了很多博客](http://www.falconwebtech.com/post/2010/06/03/Adding-schemaLocation-attribute-to-XElement-in-LINQ-to-XML.aspx)，但我终于想出了我认为是“正确”的方法来做到这一点：

```
XNamespace ns = @"http://www.myapp.com/resource";
XNamespace xsi = @"http://www.w3.org/2001/XMLSchema-instance";

var root = new XElement(ns + "root", 
  new XAttribute(XNamespace.Xmlns+"xsi", xsi.NamespaceName),
  new XAttribute(xsi + "schemaLocation", @"http://www.myapp/resource TheResource.xsd")
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T20:48:44.230

我认为这里描述了您想要的内容：[如何：使用命名空间创建文档 (C#) (LINQ to XML)](http://msdn.microsoft.com/en-us/library/bb387075.aspx)

举个例子：

```
// Create an XML tree in a namespace.
XNamespace aw = "http://www.adventure-works.com";
XElement root = new XElement(aw + "Root",
    new XElement(aw + "Child", "child content")
);
Console.WriteLine(root); 
```

会产生：

```
<Root xmlns="http://www.adventure-works.com">
  <Child>child content</Child>
</Root> 
```

# ios - 应用内购买恢复按钮

> ID：11021932
> 
> 赞同：44
> 
> 时间：2012-06-13T19:24:16.737
> 
> 标签：ios, in-app-purchase, appstore-approval

我第一次在我的应用程序更新中实施了应用程序购买，也只是等待了 3 周，但由于以下原因被拒绝：

> 我们发现您的应用提供可以恢复的应用内购买，但它不包含允许用户恢复之前购买的应用内购买的“恢复”功能。要恢复以前购买的应用内购买产品，最好提供一个“恢复”按钮并在点击“恢复”按钮时启动恢复过程。

现在我正在考虑在`navbar`表格的右侧（顶部）添加一个按钮，可以看到/点击应用购买，并添加以下将链接到该按钮的代码：

```
 [[SKPaymentQueue defaultQueue]   restoreCompletedTransactions]; 
```

有人可以验证这是正确的并且很可能是所有需要的吗？希望这次能顺利通过。提前致谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-14T08:28:09.523

我使用这个的变体：

```
//inside of an IBaction
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue]restoreCompletedTransactions];

// Then this is called
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue {
    NSLog(@"%@",queue );
    NSLog(@"Restored Transactions are once again in Queue for purchasing %@",[queue transactions]);  

    NSMutableArray *purchasedItemIDs = [[NSMutableArray alloc] init];
    NSLog(@"received restored transactions: %i", queue.transactions.count);

    for (SKPaymentTransaction *transaction in queue.transactions) {
        NSString *productID = transaction.payment.productIdentifier;
        [purchasedItemIDs addObject:productID];
        NSLog (@"product id is %@" , productID);
        // here put an if/then statement to write files based on previously purchased items
        // example if ([productID isEqualToString: @"youruniqueproductidentifier]){write files} else { nslog sorry}
    }  
} 
```

对不起，如果这没有意义，我在我的 iPad 上。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-13T19:40:53.903

亚历克斯，上周我因为同样的原因被拒绝了，这正是苹果想要的——在添加了这样一个**恢复**按钮之后，他们没有就这个主题提出任何其他问题。

当然，您不仅需要调用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`，还需要实现恢复本身（我的意思是，向用户提供内容）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-23T02:50:28.087

这是因为您可以在不同的 iOS 设备上使用相同的 Apple ID 登录。

例如，假设我`test@iCloud.com`在 iPad 上登录。当我下载您的应用程序时，我意识到我想删除广告，所以我支付了 99 美分来删除它们。

一年后，我决定购买一部 iPhone，并使用该帐户登录 test@iCloud.com，然后再次下载您的应用程序。但是，广告仍然存在，即使我已经付费在 iPad 上将其删除。这就是**恢复**功能的用武之地。使用它，我可以恢复我在 iPad 上购买的内容，并让它们在我的 iPhone 上运行。

要恢复购买，您可以使用：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

这导致

```
(void) paymentQueueRestoreCompletedTransactionsFinished: (SKPaymentQueue *)queue 
```

要调用的方法。在其中，您需要向用户提供他们购买的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T19:30:42.700

恢复按钮的替代方案可能是[应用程序设置包](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)中的恢复开关。它不会压倒 UI，而且似乎 Apple 很欢迎它（但请务必提及您已经以这种方式实现了机制）。

```
BOOL shouldRestorePurchases = [[NSUserDefaults standardUserDefaults] boolForKey:@"restorePurchasesKey"]; 
```

# python - 使用 Python 将函数存储在稀疏数组中

> ID：11021940
> 
> 赞同：0
> 
> 时间：2012-06-13T19:24:45.990
> 
> 标签：python, sparse-array

我有一个相对较大的枚举，其中每个成员代表一个消息类型。客户端将收到一条消息，其中包含与枚举中的 msg 类型关联的整数值。对于每种味精类型，都会有一个单独的函数回调来处理味精。

我想通过使用枚举值映射到回调索引的稀疏数组（或向量）来尽可能快地查找和调度回调。在给定数组不能保存函数类型的 Python 中，这可能吗？

```
#pseudo code for 'enum'
class MsgType(object):
    LOGIN, LOGOUT, HEARTBEAT, ... = range(n)

#handler class
class Handler(object):
    def handleMsg(self, msg):
        #dispatch msg to specific handler

    def __onLogin(self, msg):
        #handle login

    def __onLogout(self, msg):
        #handle logout 
```

**更新：** 我的术语不清楚。我现在理解 Python 字典查找的复杂度为 O(1)，这使它们成为完美的候选者。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:32:08.920

```
class MsgID(int):
    pass

LOGIN = MsgID(0)
LOGOUT = MsgID(1)
HEARTBEAT = MsgID(2)
... # add all other message identifier numbers

class MsgType(object):
    def __init__(self, id, data):
        self.id = id
        self.data = data

def login_handler(msg):
    ...  # do something here

def logout_handler(msg):
    ...  # do something here

def heartbeat_handler(msg):
    ...  # do something here

msg_func = {
    LOGIN  : login_handler,
    LOGOUT : logout_handler,
    HEARTBEAT : heartbeat_handler,
    ...
}

class Handler(object):
    def handleMsg(self, msg):
        try:
            msg_func[msg.id](msg)  # lookup function reference in dict, call function
        except KeyError:
            log_error_mesg('message without a handler function: %d' % msg.id) 
```

它不是严格需要的，但我添加了一个`int`消息 ID 的子类。这样您就可以检查 ID 值是否真的是一个 ID 值，而不仅仅是一些随机整数。

我假设每条消息都会有一个 ID 值，标识它是什么类型的消息，以及一些数据。`msg_func`字典使用值`MsgID`作为键，映射到函数引用。

您可以将所有函数放在一个类中，但我在这里没有这样做；它们只是功能。

# javascript - javascript - 将子页面中的选定值传递回启动子弹出窗口的父行

> ID：11021945
> 
> 赞同：0
> 
> 时间：2012-06-13T19:25:03.647
> 
> 标签：javascript, parent-child

我有一个包含多行的表单，每行都有一个输入框。每个输入框旁边是一个“从列表中选择”按钮。单击后，将打开一个 javascript 弹出页面，用户可以在其中从下拉列表中进行选择，然后将其提交回父页面。

我可以很容易地为 1 行和输入框工作。问题是我希望每一行都能够选择一个值并将其返回到该行。

请查看[此链接](http://www.beginawebsite.co.za/parent.html)作为示例。请查看以更好地了解我要解释的内容

我给了每个人一个ID。如何修改 javascript 以将弹出页面上的值传递回父页面上调用子弹出页面的行上的输入框。

请在下面查看我的代码。

**父.php**

```
<form method=post action='' name=f1>
<table>
        <tr id="r1">
        <td>
        Pack Code 1
        <input type=text name='packcode1'  size='8'>
            <a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>
            select pack code from list
            </a> 
        </td>
        </tr>

        <tr id="r2">
        <td>
        Pack Code 2
        <input type=text name='packcode2'  size='8'>
            <a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>
            select pack code from list
            </a> 
        </td>
        </tr>

        <tr id="r3">
        <td>
        Pack Code 3
        <input type=text name='packcode3'  size='8'>
            <a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>
            select pack code from list
            </a> 
        </td>
        </tr>
</table>
</form> 
```

**子.php**

```
<? 

  $con = mysql_connect('localhost', 'user', 'pass'); 
 if (!$con) 
   { 
   die('Could not connect to server: ' . mysql_error()); 
   } 
   $db=mysql_select_db("db", $con); 

    if (!$db) 
   { 
   die('Could not connect to DB: ' . mysql_error()); 
   } 

$sql="select cat_id,packcode,category from skudata order by category, packcode";
$result=mysql_query($sql);

 ?> 

<script type="text/javascript"> 

  function AjaxFunction(cat_id) { 
    var httpxml; 
    try { 
      // Firefox, Opera 8.0+, Safari 
      httpxml = new XMLHttpRequest(); 
    } catch (e) { 
      // Internet Explorer 
      try { 
        httpxml = new ActiveXObject("Msxml2.XMLHTTP"); 
      } catch (e) { 
        try { 
          httpxml = new ActiveXObject("Microsoft.XMLHTTP"); 
        } catch (e) { 
          alert("Your browser does not support AJAX!"); 
          return false; 
        } 
      } 
    } 
    function stateck() { 
      if (httpxml.readyState == 4) { 
        var myarray = eval(httpxml.responseText); 
        // Before adding new we must remove previously loaded elements 
        for (j = document.frm.c_name.options.length - 1; j >= 0; j--) { 
          document.frm.c_name.remove(j); 
        } 
        for (i = 0; i < myarray.length; i++) { 
          var optn = document.createElement("OPTION"); 
          optn.text = myarray[i]; 
          optn.value = myarray[i]; 
          document.frm.c_name.options.add(optn); 
        }  
      } 
    } 
    var url="dd.php"; 
    url = url+"?cat_id="+cat_id; 
    url = url+"&sid="+Math.random(); 
    httpxml.onreadystatechange = stateck; 
    httpxml.open("GET",url,true); 
    httpxml.send(null); 
  } 

</script> 

 <script langauge="javascript">
function post_value(){
opener.document.f1.packcode1.value = document.frm.c_name.value;
self.close();
}
</script>

<form name="frm">
Category: &nbsp; <select name=cat id=cat onchange="AjaxFunction(this.value);" style="width=300"> <br>
<option value='' style="width=300">Select One</option> 
<br>
<? 
  $con = mysql_connect('localhost', 'user', 'pass'); 
 if (!$con) 
   { 
   die('Could not connect to server: ' . mysql_error()); 
   } 
   $db=mysql_select_db("db", $con); 

    if (!$db) 
   { 
   die('Could not connect to DB: ' . mysql_error()); 
   } 

  $q=mysql_query("select * from categories"); 
  while($n=mysql_fetch_array($q)){ 
    echo "<option value=$n[cat_id]>$n[category]</option>"; 
  } 

?> 
</select> 
 <br><br>
 Pack Code:
<select name=c_name > 
 <br><br>
</select>
<br><br>
<td><input type=button value="Select" onclick="post_value();"></td>
</form> 
```

所以总结一下，我想从弹出页面中选择一个包代码 1 并将其传递回 packcode1 中。对于packcode 2，我想从弹出窗口中选择一个pack code并将其传递回packcode3

提前感谢您的帮助，如果我可以提供更多信息，请告诉我。

谢谢和问候， 瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:03:23.740

您需要在弹出窗口完成时传递要更新的输入元素的名称。例如，对于 window.open() 调用，页面上的链接应该有不同的 URL：

```
<a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php?element_name=packcode1","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>

<a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php?element_name=packcode2","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>

<a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("child.php?element_name=packcode3","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");> 
```

最后，您的 child.php Javascript 函数应该类似于：

```
function post_value(){
    opener.document.f1.<?php echo $_GET["element_name"]; ?>.value = document.frm.c_name.value;
    self.close();
} 
```

那有意义吗？

# c# - 解析大 Xml

> ID：11021946
> 
> 赞同：-3
> 
> 时间：2012-06-13T19:25:09.700
> 
> 标签：c#, xml, windows-phone-7

我如何使用 C# WP7 将此 XML 解析为不同的列表以绑定不同的全景页面：

```
<root>
 <main1>
  <item>
   <id>1</id>
  </item>
 <item>
  <id>2</id>
 </item>
 </main1>
 <main2>
  <item>
   <id>1</id>
  </item>
  <item>
   <id>2</id>
  </item>
 <main2>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:28:59.917

解析大型 XML 文档的最有效（和内存保留）方法是使用[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx). 请参阅[MSDN howto](http://msdn.microsoft.com/en-us/library/cc189056.aspx)以获得一个合理的示例。

解析 XML 文档最简单的方法通常是[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)类，但该类一次将整个文档读入内存，不推荐用于大型文档。

# sql - 关于 select into 的简单 sql（将另一个表中的单个列复制到具有多列的空表中）

> ID：11021947
> 
> 赞同：0
> 
> 时间：2012-06-13T19:25:13.043
> 
> 标签：sql, sql-server

我有两张桌子：

```
TABLE A (columns: FirstValue, SecondValue, SeatNumber)

currently empty

TABLE B(1 column: SeatNumber)

Contains 300 rows with different numbers. 
```

如何填充表 A，以便 FirstValue 和 SecondValue 分别为“1”和“2”，但 SeatNumber 是从表 B 中填充的？我假设这可以使用“选择进入”来完成。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:28:36.173

```
INSERT INTO A (FirstValue, SecondValue, SeatNumber)
SELECT 1,
       2,
       SeatNumber
  FROM B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:28:34.097

```
insert into A(FirstValue, SecondValue, SeatNumber)
select '1', '2', SeatNumber 
     from B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:29:43.213

您可以执行以下操作

```
INSERT INTO TABLEA (FirstValue, SecondValue, SeatNumber) 
SELECT
  '1',
  '2',
  SeatNumber
FROM
   TABLEB 
```

希望这可以帮助！！

# vb.net - PowerShell：禁用 Windows.Forms 调整大小

> ID：11021950
> 
> 赞同：1
> 
> 时间：2012-06-13T19:25:25.317
> 
> 标签：vb.net, powershell

我想阻止最终用户调整我创建的 GUI 的大小。

```
$objForm = New-Object System.Windows.Forms.Form 
$objForm.Text = "ADX v2.1.2.0"
$objForm.minimumSize = New-Object System.Drawing.Size(965,665) 
$objForm.StartPosition = "CenterScreen"
$objForm.backcolor = "gray" 
```

我试过`$objform.resize = 'false'`了，但这不起作用。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T19:35:43.617

$objForm.FormBorderStyle = 'None' 或 'FixedDialog'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:15:14.047

因此，经过一番折腾，我发现这是最简单的方法：

```
$objForm.minimumSize = New-Object System.Drawing.Size(965,665) 
$objForm.maximumSize = New-Object System.Drawing.Size(965,665) 
```

# ruby - 无法加载 require_dependency

> ID：11021955
> 
> 赞同：2
> 
> 时间：2012-06-13T19:25:42.360
> 
> 标签：ruby, activesupport

我正在尝试`require_dependency`从`ActiveSupport`库中使用：

```
require 'active_support'  #=> true
require_dependency 'test' #=> NoMethodError: undefined method  
                          #=> `require_dependency' for main:Object 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T20:15:52.003

通过在 require 上加载大量内容，ActiveSupport 过去是非常邪恶的。“厨房水槽”方法打开了许多核心类并改变了它们的行为（如 JSON）。这导致了与其他 gem 和代码的不兼容/问题，这些 gem 和代码期望核心 ruby​​ 函数表现得像它们的 vanilla 本身。

所以现在只需要 active_support 不会加载任何东西。

见[http://edgeguides.rubyonrails.org/active_support_core_extensions.html](http://edgeguides.rubyonrails.org/active_support_core_extensions.html)

在您的情况下，您可能需要`require 'active_support/core_ext'`

# javascript - 为什么相同的 RegExp 行为不同？

> ID：11021956
> 
> 赞同：12
> 
> 时间：2012-06-13T19:25:45.283
> 
> 标签：javascript, regex

> **可能重复：**
> [Javascript RegExp](https://stackoverflow.com/questions/604860/interesting-test-of-javascript-regexp)
> [正则表达式测试的有趣测试无法决定真假（JavaScript）](https://stackoverflow.com/questions/2669861/regular-expression-test-cant-decide-between-true-and-false-javascript)

[问题示例](http://jsfiddle.net/RKcTw/)。当内联运行时，结果与我预期的一样。但是当存储为变量时，它会跳过中间跨度元素。

```
// Inline RegExp
function getToggleClasses() {
  var toggler = [],
      elements = document.getElementsByTagName("*"),
      i=0,
      len = elements.length;

  for (i; i < len; i++) {
    if (/toggler/g.test(elements[i].className)) {
      toggler.push(elements[i]);
    }
  }

  document.getElementById('results').innerHTML += "<br />Inline: " + toggler.length;
}

// Variable
function getToggleClasses2() {
  var toggler = [],
      elements = document.getElementsByTagName("*"),
      tester = /toggler/g,
      i=0,
      len = elements.length;

  for (i; i < len; i++) {
    if (tester.test(elements[i].className)) {
      toggler.push(elements[i]);
    }
  }

  document.getElementById('results').innerHTML += "<br />Variable: " + toggler.length;
}
​ 
```

标记：

```
<span class="toggler">A</span>
<span class="toggler">B</span>
<span class="toggler">C</span> 
```

**Given** : 我知道没有理由使用 RegExp 进行这种比较，而且我也了解 jQuery 等库有多么出色。我也知道`g`在这种情况下不需要。

我不明白为什么这两种方法应该返回不同的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T19:34:54.017

`RegExp`实例是有状态的，因此重用它们可能会导致意外行为。在这种特殊情况下，这是因为实例是[global](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/global)，这意味着：

> 应该针对字符串中的所有可能匹配项测试正则表达式。

然而，这并不是使用 引起的唯一区别`g`。[来自`RegExp.test`@MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test#Description)：

> 与`exec`（或与其结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

* * *

[**删除**`g`标志](http://jsfiddle.net/mattball/mZTMt/)，或[设置`lastIndex``0`](http://jsfiddle.net/mattball/SfeSM/)[为](http://jsfiddle.net/mattball/mZTMt/)（感谢[@zzzzBov](http://jsfiddle.net/mattball/SfeSM/) [）](https://stackoverflow.com/users/497418/zzzzbov)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T19:33:03.300

`/g`在这种情况下*不需要*也不应该使用。

这些情况下的行为不同，因为在“内联”情况下，正则表达式对象在循环的每次迭代中都会重新创建。While in 变量创建一次，并[`lastIndex`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/lastIndex)在循环迭代之间保持其状态 ( )。

将 var 移动到循环中，您将得到相同的结果：

```
// Variable
function getToggleClasses2() {
  var toggler = [],
      elements = document.getElementsByTagName("*"),
      i=0,
      len = elements.length;

  for (i; i < len; i++) {
    var tester = /toggler/g;
    if (tester.test(elements[i].className)) {
      toggler.push(elements[i]);
    }
  }

  document.getElementById('results').innerHTML += "<br />Variable: " + toggler.length;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T19:42:00.620

正则表达式维护一个名为 的变量`lastIndex`，它是开始下一次搜索的索引。来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)：

> 与`exec`（或与其结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

当您为每次迭代定义内联正则表达式时，状态会丢失并且`lastIndex`始终为 0，因为您每次都有一个新的正则表达式。如果您将正则表达式保存在可验证中，`lastIndex`则会将其保存为最后一个匹配的结束位置，在这种情况下，这会导致下一次搜索 begin 在下一个字符串的末尾，从而导致匹配失败。当第三次比较出现时，`lastIndex`已被重置为 0，因为正则表达式知道它上次没有结果。

# ios - Xcode 存档链接器错误。在 Debug-iphonos 目录中创建的静态库

> ID：11021960
> 
> 赞同：1
> 
> 时间：2012-06-13T19:26:03.773
> 
> 标签：ios, xcode, app-store-connect, archive

我正在使用 Xcode 4.3.3 为 iTunes 提交创建存档，但出现链接器错误。我发现背后的原因是我的子项目创建的静态库是在 build\Debug-iphoneos 目录中创建的，而不是在 Release-iphoneos 中创建的。在 Product->Edit Scheme 对话框中，我确认子项目 Archive scheme 都具有“Release”构建配置集并选中“Reveal Archive in Organizer”。另外，我的主项目将跳过安装设置为是，目标跳过安装设置为否。所有子项目都将“跳过安装”设置为“是”。因此，我得出结论，当我 Product->Archive 时，主项目可能不会调用子项目的存档方案。看了很多设置都不知道怎么办？

谢谢....

# android - 编辑活动标签

> ID：11021963
> 
> 赞同：0
> 
> 时间：2012-06-13T19:26:20.730
> 
> 标签：android, xml, label

现在，我的 Activity 的标签具有当前 Activity 的名称。我对此很好，但我还想在我的活动的右上角添加一个可以更改的功能。基本上我希望它是一个文本视图，上面写着“蓝牙：启用”或“禁用”或“发现”

有没有办法为活动添加辅助标签？我觉得在我的第一个项目中，我是这样设置的，但现在我找不到了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:29:09.340

你应该做`Custom title bar for that and put textview in layout of title bar.`

*   [请参阅此示例](http://www.helloandroid.com/tutorials/how-create-custom-titlebar)

# solr - Solr 的分面日期范围查询错误

> ID：11021965
> 
> 赞同：0
> 
> 时间：2012-06-13T19:26:22.883
> 
> 标签：solr, faceted-search

我正在尝试获取年份方面的列表，例如

```
2000 (3)
2001 (27)
2002 (15)
... 
```

[我有一个从 Solr wiki 教程http://lucene.apache.org/solr/api/doc-files/tutorial.html](http://lucene.apache.org/solr/api/doc-files/tutorial.html)运行的 Solr 3.6 本地实例

我尝试了以下查询：

```
http://localhost:8983/solr/select/?q=*:*
&version=2.2
&start=0
&rows=10
&indent=on
&facet=true
&facet.range=manufacturedate_dt
&facet.range.gap=+1YEAR
&f.manufacturedate_dt.facet.range.start=/NOW/YEAR-5YEARS
&f.manufacturedate_dt.facet.range.end=/NOW 
```

我使用范围是因为这里有警告[http://wiki.apache.org/solr/SimpleFacetParameters#rangefaceting](http://wiki.apache.org/solr/SimpleFacetParameters#rangefaceting)

“注意：从 Solr3.1 开始，日期分面已被弃用，取而代之的是下面描述的更通用的范围分面。响应结构略有不同，但功能是等效的（除了它支持数字字段和日期）”

我得到的错误是：

```
HTTP ERROR 400

Problem accessing /solr/select/. Reason:

    Can't parse value /NOW/YEAR-5YEARS for field: manufacturedate_dt 
```

如另一个 StackOverflow 问题中所述，我尝试将 + 替换为 %2B 。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:45:14.763

去掉 NOW 前面的斜线——所以 facet.range.end=NOW/YEAR .....

# python - Python：在 Tkinter 中为文本分配标签

> ID：11021967
> 
> 赞同：0
> 
> 时间：2012-06-13T19:26:28.053
> 
> 标签：python, tags, tkinter

我想将文本添加到 Tkinter 中的文本小部件，其中每个单词都有一个单独的标签。简短的例子：

```
text.insert('end',
    'Hello, ', 'TAG1',
    'how ', 'TAG2',
    'are you.', 'TAG3',) 
```

这给出了输出：“你好，你好吗”

这很好用，但我的问题是我想用跨越几个段落的文本来做到这一点。我尝试了一种方法，我使用脚本来编辑文本文件，以便每个单词后面都有一个标签，与上面的示例相同。

但是如果我将文本粘贴到脚本中，我会收到以下错误：

```
There's an error in your program:
*** more than 255 arguments(scriptname.py, line 77) 
```

但是，没有追溯。

此方法也没有提供所需的输出：

```
infile = open('filepath').read()
text.insert('end', infile) 
```

使用上述方法，脚本实际运行，但文本小部件中的文本结果如下：

```
'The ', 'TAG1',
'Hundred ', 'TAG2',
'Years', 'TAG3',
'War ', 'TAG4', 
```

而不是这样：'百年战争'，就像它应该的那样，不用说标签没有分配给这些词。

有谁知道是否有这样做的正确方法，或者仅仅是您不能为那么多单词分配标签的情况？

编辑：澄清一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:10:19.410

似乎 python 函数的参数数量限制为 255（见[此处](https://stackoverflow.com/questions/3706199/creating-a-list-with-255-elements)）——显然 Guido 认为（明确）调用具有更多参数的函数是错误的（我认为我在这一点上同意他的观点；） . 绕过此限制的最简单方法是使用“splat”或“unpacking”运算符。

```
import Tkinter as tk

words="""this is a really large file, it has a lot of words"""*25

args=['end']
for i,w in enumerate(words.split()):
   args.extend((w+' ','TAG%d'%i))

root=tk.Tk()
text=tk.Text(root)
text.grid(row=0,column=0)
text.insert(*args)
root.mainloop() 
```

# facebook - 黑莓 - 网络上的 Facebook 连接

> ID：11021972
> 
> 赞同：0
> 
> 时间：2012-06-13T19:27:05.100
> 
> 标签：facebook, blackberry

我有一个正在构建的移动微型网站，目前我无法让 facebook 连接到与黑莓一起工作。我收到错误“ ***_* __ *_***发生错误。请稍后再试。”

我已经在我可以使用的所有其他设备上对此进行了测试，只有黑莓会给我带来问题。

这是我用来加载应用程序的代码。

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
FB.init({
  appId      : 'xxxxxxxxxxxxxxxxx', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

FB.Event.subscribe('auth.statusChange', handleStatusChange);
};

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
}(document));
</script>

<script>
function loginUser() {    
 FB.login(function(response) { }, {scope:'email'});     
 }
</script>
<script>
function handleResponseChange(response) {
  document.body.className = response.authResponse ? 'connected' : 'not_connected';
  if (response.authResponse) {
    console.log(response);
    updateUserInfo(response);
  }
}
</script>

<script>
function updateUserInfo(response) {
 FB.api('/me', function(response) {
  window.location.href='home.php';
 });
}
</script>

<div id="login"><p><button id="fblogin" onClick="loginUser();"></button></p></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:46:48.777

发现 OAuth 更改正在破坏它。
[https://developers.facebook.com/bugs/416132398431057?browse=search_4fd05d1660f9a9c22137268](https://developers.facebook.com/bugs/416132398431057?browse=search_4fd05d1660f9a9c22137268)

# sinatra - 如何使用 HAML 提高 Sinatra 性能？

> ID：11021975
> 
> 赞同：0
> 
> 时间：2012-06-13T19:27:14.663
> 
> 标签：sinatra, haml, erb

我发现当我在我的 Sinatra 应用程序中使用 HAML 来呈现模板时，它比 ERb 慢 10 倍。

是否有任何解决方案可以通过 HAML 渲染提高应用程序性能？

PS 我在生产环境中运行 Sinatra。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:40:12.983

这取决于您的模板是否创建缓存视图。Haml 确实缓存视图，因此它们基本上是静态的。sass 也是如此，但您必须调查 erb 是否这样做。

# linux - 设置 rsyslog 过滤器

> ID：11021976
> 
> 赞同：0
> 
> 时间：2012-06-13T19:27:20.300
> 
> 标签：linux, logging, rsyslog

我正在写一些东西，我想利用 Linux API 进行日志记录，我想将我的应用程序的日志放到不同的文件中，所以我将这些行添加到 rsyslog.conf

```
if $programname == 'RearWindowDaemon' then /var/log/RearWindowDaemon.log 
if $programname == 'RearWindow' then /var/log/RearWindow.log 
```

但有些东西不起作用，即使使用这个简单的代码：

```
int main()
{
openlog("RearWindow",0,LOG_LOCAL0);
syslog(LOG_ERR,"some err");
syslog(LOG_ERR,"other err");
return;
} 
```

我得到日志`/var/log/syslog`而不是`/var/log/RearWindow`.

我应该再做点什么吗？如果重要的话，我正在使用 XUbuntu 11.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:40:42.447

大概是有点晚了。但我能理解的是，您应该编译您的代码，使其生成名为“RearWindow”的二进制文件。$programname 检查日志是否来自具有指定名称的进程，而不是日志包含字符串“RearWindow”。希望这会有所帮助。

# javascript - JQuery 脚本的小问题

> ID：11021981
> 
> 赞同：1
> 
> 时间：2012-06-13T19:27:40.883
> 
> 标签：javascript, jquery, this, mouseover, mouseout

我有一个带有叠加层的图像列表。当我将鼠标悬停在图像上时，文本和叠加层应该会使用 JQuery 消失。当我将鼠标悬停在图像上时，该特定图像的覆盖消失，这是正确的。问题是文本。当我将鼠标悬停在图像上时，该图像和所有其他图像上的文本都会消失。我只希望隐藏该特定图像的文本和叠加层。这似乎是一个小问题，因为我让叠加层正常工作。先谢谢朋友。

这是JQuery：

```
//Hides the screen and text on mouseover
$('.screen').mouseover(function() {
    $('.screen_text').hide();
    $(this).slideUp(400);

});
//Shows the screen and text on mouseout
$('.portfolio img').mouseout(function() {
    $('.screen_text').show();
    $('.screen').slideDown(400);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:30:50.570

without seeing your html mockup, my assumption is that your jquery selector brings back all the text element (because you are doing $('.screen_text') ) I think what you want to do is something like:

```
$('.screen_text',this).hide(); 
```

which should only bring back the elements that has a class name screen_text in the context of this

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:30:44.540

类选择器匹配太多。

```
//Hides the screen and text on mouseover
$('.screen').mouseover(function() {
    $(this).find('.screen_text').hide();
    $(this).slideUp(400);

});
//Shows the screen and text on mouseout
$('.portfolio img').mouseout(function() {
    $('.screen_text').show();
    $('.screen').slideDown(400);

}); 
```

使用 jQuery`.find()`搜索`.screen_text`作为悬停的后代`.screen`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T19:31:32.747

The issue is that you are hiding every element which has the class name "screen_text" when you perform `$('.screen_text').hide();`. You should find a better way to select or differentiate them.

There is no way to provide any more support without seeing an example of the DOM. Although there may be a logical error in the execution of this jQuery, there is nothing wrong syntactically.

# mysql - mysql速度问题

> ID：11021983
> 
> 赞同：0
> 
> 时间：2012-06-13T19:27:54.003
> 
> 标签：mysql

关于如何让这个查询运行得更快的任何建议？

```
SELECT *, p.*
FROM grouped g 
INNER JOIN form p 
on p.id = g.id 

LEFT JOIN prospect ps 
ON (p.appphone = phone_bus OR p.appphone = phone_res OR p.appphone = phone_fax) AND p.appphone != '' 
WHERE p.agname like '%test%'
ORDER BY p.agname DESC 
limit 0, 100 
```

如果我将 ON 更改为不使用 OR，它会快速运行。像这样需要30-40秒。

p.appphone、phone_bus、phone_res、phone_fax 和 p.agname 都在表中进行了索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:42:41.663

你正在做一个内连接，如果索引正确，它应该会很快，匹配“%test%”的左连接可能是它需要时间的地方。

它正在遍历您的最大 60k 行（您正在选择所有列），并且当它到达 agname 字段时，它必须遍历字符串以匹配字符串中某处的单词 test 60,000 次。我会说优化'%test%'，如果没有办法解决这个问题......你可以

appphone——有多少种不同的场景——

```
ON (**p.appphone = phone_bus OR p.appphone = phone_res OR p.appphone = phone_fax**) AND p.appphone != '' 
```

您可以加入键，然后在 WHERE 子句中使用嵌套的 OR 语句，不是吗？

也许您可以说 where p.appphone <> phone_print 或将包含此嵌套 OR 语句的内容，但对其进行了优化，因此它只是查找它不是什么而不是它可能是什么的三个不同实例...。 p。 appphone真的=''还是为空？不确定它究竟会快多少，但你可以说 p.appphone 在左连接上的位置不为空，如前所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:56:50.240

我会尝试：

1.  使用`ANY`运算符；
2.  进入`p.appphonne != ''`该`WHERE`条款；
3.  精确`SELECT`列表，'cos`*`已经包含了这些`p.*`字段。

请尝试以下查询：

```
SELECT *, p.*
  FROM grouped g 
  JOIN form p ON p.id = g.id 
  LEFT JOIN prospect ps
    ON p.appphone = ANY(ps.phone_bus, ps.phone_res, ps.phone_fax) 
 WHERE p.agname LIKE '%test%'
   AND p.appphone != ''
 ORDER BY p.agname DESC 
 LIMIT 0, 100; 
```

请`EXPLAIN`在您的第一条消息中包含查询的输出。

# ios - 将 App 置于可编辑状态

> ID：11021985
> 
> 赞同：2
> 
> 时间：2012-06-13T19:28:00.363
> 
> 标签：ios, app-store, iad

我是一个可以在应用商店出售的应用。我想更改我的 iAd 设置，但收到以下消息：

“只有当您的应用程序的最新版本处于可编辑状态时，您才能更改您的 iAd 设置。”

如何将我的应用程序置于可编辑状态？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:29:17.017

我相信那是您提交应用更新的时候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:32:09.323

您必须为包含 iAd 的应用程序提交新的二进制文件作为更新

# php - 将变量传输到另一个数据库的序列化

> ID：11021990
> 
> 赞同：0
> 
> 时间：2012-06-13T19:28:10.277
> 
> 标签：php, mysql, sql

我似乎无法让它工作，所有静态数据都有效，但对于下面的变量，

```
 $customf = $row["ps_custom_fields"];
        $cfarr = unserialize($customf);
        $name = $cfarr[5];
        $desc = $cfarr[2];
        $cat = $cfarr[3];
        $tags = $cfarr[4]; 
```

我无法让他们将数据传送到下一个数据库并输入我需要的所有数据，它用于一个广告系统，该系统运行另一个处理所有发票、购买和数据收集的数据库，第二个数据库只是输出到广告网站。

```
//Connect to Local Server Database
    $link1 = mysql_connect("localhost","usr","pass") or die("Opps Local Connection Failed!");
    $db = mysql_select_db("pulseem1_ipb",$link1) or die ("Local Connection Failed Again!");

//Select Result to pull
    $result = mysql_query("SELECT ad_id, ad_image, ad_link FROM ipb_nexus_ads")
    or die ("Results Didnt pull Correctly!");

//Second Results to pull
$result2 = mysql_query("SELECT ps_custom_fields FROM ipb_nexus_purchases")
    or die ("Second Results Didnt pull Correctly!");

    while ($row = mysql_fetch_array($result,$result2))
{

//Put Results into a Variable

    $customf = $row["ps_custom_fields"];
    $cfarr = unserialize($customf);
    $name = $cfarr[5];
    $desc = $cfarr[2];
    $cat = $cfarr[3];
    $tags = $cfarr[4];
    $url = $row["ad_link"];
    $image = $row["ad_image"];

}

//Upload Advert to Remote Host with values of Variables
//Connect To Remote Database
    $link2 = mysql_connect("localhost","user","pass") or die("Opps Second Connection Failed!");
    $db = mysql_select_db("onlyclic_adverts",$link2) or die ("Second Connection Failed Again!");

// Insert Values from Original Database
    mysql_query("INSERT INTO busadverts (advert_name, advert_url, advert_image, advert_description, advert_catergory, advert_tags, active) VALUES ('$name','$url','$image','$desc','$cat','$tags','1')");

//Release Connection and Results 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:41:35.017

如果我没记错的话，您正在尝试在 mysql_fetch_array 中传递两个数据变量。该函数接受作为资源传递的第一个参数，第二个参数是结果类型，例如 MYSQL_ASSOC、MYSQL_NUM 和 MYSQL_BOTH。因此，这可能就是您看到结果有问题的原因。

在没有看到来自结果的数据的情况下，有几个选项可以处理这些数据。您可以在遍历数据之前对它们进行array_merge，或者您可以单独遍历每个数据集，将它们放入其受尊重的变量中。

每当您没有从变量中看到适当的结果时，请确保您是 var_dump 代码的某些部分以查看结果。

-- 回复评论 --

数组合并示例

```
while ($row = mysql_fetch_array($result1){
    $array1 = $row;
}

while ($row2 = mysql_fetch_array($result2){
    $array2 = $row;
}
//array merge
$items = array_merge($array1, $array2);

//Loop over data and setup variables
foreach ($items as $id => $item){
    //Setup what you need while looping over items
} 
```

只是循环数据

```
while ($row = mysql_fetch_array($result1){
    //unserialize pieces from this array and put them in the appropriate variables
}

while ($row2 = mysql_fetch_array($result2){
    //unserialize pieces from this array and put them in the appropriate variables. 
} 
```

# ruby-on-rails - 如何使用带有 JSON 的 rails remote: true 参数？

> ID：11021991
> 
> 赞同：13
> 
> 时间：2012-06-13T19:28:20.650
> 
> 标签：ruby-on-rails, ajax, json

如何指定我希望在使用 rails remote: true 参数提交 ajax 请求时返回 JSON 对象？一旦返回 JSON 对象，我该如何捕捉和使用它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T21:45:13.780

有很多方法可以回答这个问题，具体取决于您的具体情况（例如：您使用的是 jquery 和 UJS 适配器），但我将从我自己使用的文档中发布内容以更好地理解整个过程：我使用这个很棒在很大程度上[发布](http://www.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)：我会更新我的答案，因为我目前也在自己处理这些东西。

您可以像这样将 data-type 属性添加到 DOM 元素：

```
<%= link_to "Add a new task", new_project_task_path(@project), "data-type" => "json", :id => "add_task_btn" %> 
```

您还可以在 jQuery 的全局 $.ajaxSetup() 函数中定义默认数据类型。更改所有 Ajax 请求：

```
$.ajaxSetup({
      dataType: 'json'
}); 
```

第三种方式是在 beforeSend 回调中：

```
$(“#add_some_button”).live(“ajax:beforeSend”, function(e, xhr, settings){
        new_data_type = “application/json, text/javascript, */*; q=0.01”;
        xhr.setRequestHeader('accept', new_data_type);
}) 
```

（q=0.01 是 0 和 1 之间的偏好）

因此，您可以更改该 dataType 属性和 HTTP 标头以满足您的需求。作为参考，这里列出了可能的 MIME 类型：[这里](http://www.iana.org/assignments/media-types/index.html)

以及具体的 javascript 媒体类型列表：[这里](http://www.rfc-editor.org/rfc/rfc4329.txt)

从服务器发回的数据格式概述： 1.) Ajax 发送请求时将 Accept 标头设置为所需的 MIME 类型。2.) Rails 控制器检查 Accept 标头以确定它应该返回什么。3.) 控制器将确定操作是否处理特定的 MIME 类型。在 Rails 3 中，我们可以使用 respond_with，在 3.0 之前，它是控制器动作中的一个 respond_to 块。

在 Rails 3.1 中使用 Ajax 的方式概述：

我相信现在首选的方法是使用默认的 dataType 作为脚本，然后使用 js.erb 或 js.coffee 文件处理 AJAX 请求。

选项：1.) 单击事件：插入 DOM 元素 2.) 通过 Ajax 提交表单 3.) 通过 Ajax 删除 4.) 使用 Ajax 进行客户端验证（在输入字段上使用数据远程） 5.) 添加动态选择（在选择字段上使用 data-remote） 6.) Ajax 分页 - 直接返回 HTML。 

同样，我在这里包括的是我自己的大纲/评论，要了解详细信息，请查看 Andrea Singh 的精彩[帖子](http://www.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-16T17:21:08.113

请试试这个：

**应用程序/控制器/examples.rb**

```
class ExamplesController < ApplicationController
    def new
        @my_json = { :message => "Hello json"}
    end
end 
```

**应用程序/视图/示例/new.html.haml**

```
= link_to "New", new_examples_path :remote => true 
```

**应用程序/视图/示例/new.js.erb**

```
console.log("<%= @my_json %>");
console.log("<%= @my_json['message'] %>"); 
```

# jquery - jqGrid 不保存内联行编辑

> ID：11021992
> 
> 赞同：6
> 
> 时间：2012-06-13T19:28:23.927
> 
> 标签：jquery, jqgrid

我在 ASP.NET MVC 4 网站 jQuery 1.7.2 中使用 jqGrid 4.3.2。应用程序中有几个地方用到了 jqGrid。我现在的一般设置是所有编辑都在本地（`loadonce: true`和`clientArray`）通过内联导航和编辑完成，并且所有网格数据都通过 AJAX 调用在表单提交时发布到服务器。我在行编辑以及他们提交的事件中遇到了一些困难。[您可以在此处](http://goo.gl/dysfQ)查看该站点（和源代码，正在进行的全部工作，请注意）。如果您添加或编辑行，然后单击页面上的其他位置，则不会保存行编辑。用户必须在行编辑期间在某处按下回车键才能保存该行。

[我在这个问题](https://stackoverflow.com/q/10886699/27457)中稍微提到了这一点，[奥列格](https://stackoverflow.com/users/315935/oleg)很友好地回答了这个问题。除了按下回车键（例如当行失去焦点时）之外，有没有办法提交行编辑？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T20:07:37.520

您可以执行以下操作：

1.  首先，您必须设置[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)`restoreAfterSelect: false`的选项。我看到该选项没有记录，但您可以在[源代码](https://github.com/tonytomov/jqGrid/blob/v4.3.3/js/grid.inlinedit.js#L410-423)中看到它。没有设置使用调用（见[这里](https://github.com/tonytomov/jqGrid/blob/v4.3.3/js/grid.inlinedit.js#L544-565)）。`inlineNav``beforeSelectRow``restoreRow`
2.  实现将上一个编辑行保存在内部（请参阅[答案](https://stackoverflow.com/a/10887652/315935)`onSelectRow`中的代码）或内部。可能会更容易使用，因为需要保存的最后一个编辑行可能只是您可以从选项中获得的最后一个选定行，因为.`beforeSelectRow``beforeSelectRow``selrow``beforeSelectRow`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T03:09:42.340

对于 2016 年阅读此书的任何人，此功能现已合并到 jqGrid 中。请参阅[https://github.com/tonytomov/jqGrid/issues/785](https://github.com/tonytomov/jqGrid/issues/785)。在撰写本文时，jqGrid 5.1 已经发布，因此我希望从 5.2 版本开始可以使用此功能。或者，只需从 GitHub 获取最新的代码。

要使用它，只需在 jqGrid 上设置以下属性：

```
...
restoreAfterSelect: false,
saveAfterSelect: true,
... 
```

不再需要实施您自己的解决方案。

# javascript - 变量不包含真值。如何。为什么？

> ID：11021994
> 
> 赞同：2
> 
> 时间：2012-06-13T19:28:28.887
> 
> 标签：javascript, variables

`document.write()`当我使用我没有得到真实值来写入它的值时，我有一个变量。看到这个——

```
 <div onclick="a=this;document.write(a)">this is div</div> 
```

通过单击 div 我得到了这个`[object HTMLDivElement]`。但这不是真正的价值，看看如何-

```
 <button onclick="[object HTMLDivElement].style.visibility='hidden'">click me</button> 
```

当我使用此代码时。我预计它将隐藏所有 div 元素。但我没有。为什么？

笔记：-

我不想要更好的方法来做到这一点，我想知道我的代码中的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:30:42.623

将对象传递给`document.write`将通过调用将对象转换为字符串`.toString()`。

在`<div>`DOM 元素上调用时，`toString()`返回`"[object HTMLDivElement]"`.

这只是对象的字符串表示；从该字符串中检索原始对象基本上是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:31:02.567

那是因为在您的第一个示例`this`中`[object HTMLDivElement]`不是布尔值....

```
<button onclick="this.hidden=true;">click me</button> 
```

将工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:39:24.777

document.write 要求您向其发送原始 html（基本上是一个字符串），但您错误地尝试向其发送“div”对象。

我没有对此进行测试，但我认为它应该可以工作

```
<div onclick="a=this.innerHTML;document.write(a)">this is div</div> 
```

或者在语义上更正确：

```
<div onclick="a=this;document.write(a.innerHTML)">this is div</div> 
```

换句话说，获取“div”对象的 html 源（使用它的 innerHTML 属性），而不是渲染的“div”对象本身，然后发送它。

# iphone - Cocos2d - animationwithframes:delay: deprecated

> ID：11021997
> 
> 赞同：8
> 
> 时间：2012-06-13T19:28:40.903
> 
> 标签：iphone, ios, cocos2d-iphone, deprecated

我想知道我应该用什么代替

```
animationWithFrames:delay: 
```

和

```
actionWithAnimation:restoreOriginalFrame: 
```

因为他们发出警告说他们已被弃用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T21:53:27.023

Cocos2d 2.0 使用

CC动画

```
+(id) animationWithSpriteFrames:(NSArray*)frames delay:(float)delay 
```

CCAnimate

```
+(id) actionWithAnimation: (CCAnimation*)anim 
```

文件：

[http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animation.html](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animation.html)

[http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animate.html](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_animate.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-01T11:16:09.927

您需要做的唯一更改是使用新属性：restoreOriginalFrame。

从构造函数中删除 restoreOriginalFrame，然后在新行中设置属性：

```
animation.restoreOriginalFrame = NO; 
```

就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:18:55.867

```
 CCAnimation *sampleAnim = [CCAnimation animationWithAnimationFrames: 
                                     sampleAnimFrames delayPerUnit:0.2f loops:7]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T09:52:10.627

我在我使用的项目中遇到了同样的问题。

```
CCSprite *image = [CCSprite spriteWithSpriteFrameName:@"a0001.png"];
        image.position = ccp(s.width/2,s.height/2);
        [self addChild:image];
        image.tag = 1;

        NSMutableArray *frames = [[NSMutableArray alloc] init];
        for (int i = 1; i <= 10; i++) {
            NSString *frameName = [NSString stringWithFormat:@"a%04i.png",i];
            [frames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:frameName]];
        }
        CCAnimation *ani = [CCAnimation animationWithSpriteFrames:frames delay:1.0f/8.0f];
        [image runAction:[CCAnimate actionWithAnimation:ani]]; 
```

这对我来说很好。

# ruby-on-rails - 在没有网络服务器的情况下使用 rails 生成 HTML 页面

> ID：11021999
> 
> 赞同：0
> 
> 时间：2012-06-13T19:28:49.777
> 
> 标签：ruby-on-rails, ruby, webserver, html-generation

是否可以在不使用网络服务器的情况下使用 Ruby on Rails 框架生成 HTML 页面？我想做这样的事情：

```
html = RailsHTMLGenerator.generate('path/to/rails/root', '/posts/540')
puts html 
```

第一个参数是`Rails.root`，第二个是 HTTP 路径，该函数以字符串形式返回该页面的 HTML。

有人可以告诉我该怎么做吗？泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:10:47.267

我找到了一个解决方案：

```
require '/path/to/application.rb'
app = APPName::Application.initialize!
session = ActionDispatch::Integration::Session.new(app)
session.get '/'
puts session.body 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:45:06.407

好吧，您可以从 Rails 控制台执行此操作

```
app.get '/foo' 
```

如果您想尝试这种方法，这就是控制台的初始化方式：

[https://github.com/rails/rails/blob/master/railties/lib/rails/commands/console.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/console.rb)