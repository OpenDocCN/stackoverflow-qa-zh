# StackOverflow 问答 10917000-10917999

# makefile - 向使用 makefile 生成的可执行文件添加自定义扩展

> ID：10917003
> 
> 赞同：0
> 
> 时间：2012-06-06T15:07:08.840
> 
> 标签：makefile

我有这个非常基本的makefile：

```
CC=gcc
CFLAGS=-Wall -g -O -pedantic -Wformat=2 -Wextra -lm 
```

实际上它编译`foo.c`为`foo.`如何添加自定义扩展，例如我希望它编译`foo.c`为`foo.run`.

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:12:56.487

将此添加到您的`makefile`：

```
foo.run : foo.c
        $(CC) $(CFLAGS) -o $@ $< 
```

确保第二行以制表符开头，而不是空格。然后查看您的 make 版本的手册页或其他文档。

# javascript - 如何设置 url(callback) 以通过 javascript 收听答案

> ID：10917007
> 
> 赞同：1
> 
> 时间：2012-06-06T15:07:20.907
> 
> 标签：javascript, rest, callback, asynccallback

目前，我正在使用具有签名的休息服务

```
http://service.ip/auth?clien=xx&redirect=URIXX 
```

其中**URIXXX**应为

```
 http://localhost:8080/auth/callback 
```

我想知道是否可以在 javascript 中打开“URIXXX”以便从服务器接收答案？像回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:08:56.553

如果脚本使用`JSONP`然后是，否则声明 a`HTTPRequest`然后解析然后从返回中解析额外的内容并将内容注入到包装函数中的文档头部，该函数会打开一个指示的窗口并将需要的脚本/内容写入新的创建的窗口...

如果您的意思是您试图告诉您的请求去另一个位置进行响应，我建议您查看我的支持 Comet 样式交互的 WebServer 类...

[https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1752948](https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1752948)

提交请求后，您可以在响应中收到添加令牌的位置...您可以获取此令牌并将其发送到响应中指示的页面，然后您将实现您想做的事情..

我想在没有我的网络服务器的情况下可以使用相同的技术来做同样的事情......

# c - 什么是 char * const *？

> ID：10917009
> 
> 赞同：0
> 
> 时间：2012-06-06T15:07:27.787
> 
> 标签：c, pointers, casting

所以它似乎意味着`a pointer to a constant pointer to char`。那就是它指向 a `char * const`，到目前为止一切顺利。

让我感到困惑的是我在哪里以及如何看到它使用的。我正在查看手册页，[`qsort`](http://linux.die.net/man/3/qsort)示例执行以下操作以将指向 a `char **`（字符串数组）的元素的指针（指向被视为 的元素的指针`const void *`）转换为可提供给的普通 char 指针`strcmp`：

```
static int
cmpstringp(const void *p1, const void *p2)
{
    /* The actual arguments to this function are "pointers to
       pointers to char", but strcmp(3) arguments are "pointers
       to char", hence the following cast plus dereference */
    return strcmp(* (char * const *) p1, * (char * const *) p2);
} 
```

我的问题是，为什么会有演员表`char * const *`？为什么它不只是 a `const char **`（因为最终我们想发送 a `const char *`to `strcmp`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:07:28.893

`char * const *`确实意味着指向字符的常量指针的指针。在问题的代码中执行此转换的原因如下：

`p1`并且`p2`是（非常量）指向常量位置的指针。让我们假设这个位置的类型是`const T`。

现在我们要转换`p1`为`p2`它们的真实类型。我们知道数组的每个元素都是一个`char *`，因此`T = char *`。那是`const T`一个指向 char 的常量指针，写成`char * const`.

因为`p1`和`p2`是指向数组元素的指针，所以它们的类型`const T *`是 ，即`char * const *`.

由于该函数仅调用`strcmp`，因此实际上，如果将参数强制转换为`char **`or`const char **`或`const char * const *`or ，则不会有任何区别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T15:10:53.873

当一个函数声明它需要一个指向 const 元素的指针（例如`strcmp()`）时，这意味着该函数承诺不会通过指针修改元素，这并不意味着传递给该函数的参数必须是指向 const 的指针他们自己。

请记住：`const`修饰符是一个合同条款，基本上意味着声明函数承诺不会修改被修改的元素`const`。因此，非 const -> const 方向的转换通常是可以的。

# nsstring - 如何将 NSString 从模态视图传递到父视图

> ID：10917020
> 
> 赞同：0
> 
> 时间：2012-06-06T15:07:47.753
> 
> 标签：nsstring, modalviewcontroller, segue, parentviewcontroller

我有一个父视图和一个带有文本框的模式视图。我想要做的是将模式视图中输入的任何内容传递到文本框中，然后将其传递给父视图中的标签，该标签将标签更新为输入的内容。我希望这有任何意义。

几个星期以来，我一直在拔头发，试图解决这个问题，但没有运气。我发现了许多关于 segues 和在被推送的视图之间传递的示例和教程，但没有关于模态视图和传递回父视图的内容。

我一直试图理解这一点，需要一个很好的例子。我有点理解为 segue 做准备的概念，但由于某种原因，我无法弄清楚这一点。对此的任何帮助将不胜感激，您将成为我一生的英雄，哈哈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:56:11.223

在我使用 segues 的项目中，我是这样做的（请注意，我是 iOS 新手，所以可能有“更好”的方法，这对于 iOS 的老手来说可能很明显）：

简短版本：在模态视图控制器的`.h`文件中定义回调协议。当您的模态视图控制器关闭时，它会检查演示者是否实现了该协议并调用这些方法来传递数据。

所以就像你说的，假设你的模态视图控制器只是从用户那里收集一个字符串值，然后他们点击确定或取消。该类可能如下所示：

```
@interface MyModalViewController : UIViewController
...
@end 
```

我建议您将这样的协议添加到同一个标头中：

```
@protocol MyModalViewControllerCallback
-(void) userCancelledMyModalViewController:(MyModalViewController*)vc;
-(void) userAcceptedMyModalViewController:(MyModalViewController*)vc
                                withInput:(NSString*)s;
@end 
```

然后在 中`MyModalViewController.m`，添加`viewDidDisappear`类似这样的代码：

```
-(void) viewDidDisappear:(BOOL)animated {
    UIViewController* presenter = self.presentingViewController;
    // If the presenter is a UINavigationController then we assume that we're
    // notifying whichever UIViewController is on the top of the stack.
    if ([presenter isKindOfClass:[UINavigationController class]]) {
        presenter = [(UINavigationController*)presenter topViewController];
    }
    if ([presenter conformsToProtocol:@protocol(MyModalViewControllerCallback)]) {
        // Assumes the presence of an "accepted" ivar that knows whether they
        // accepted or cancelled, and a "data" ivar that has the data that the
        // user entered.
        if (accepted) {
            [presenter userAcceptedMyModalViewController:self withInput:data];
        }
        else {
            [presenter userCancelledMyModalViewController:self];
        }
    }
    [super viewDidDisappear:animated];
} 
```

最后在父视图中，您实现新的`@protocol`，例如`.h`：

```
@interface MyParentViewController : UIViewController <MyModalViewControllerCallback>
...
@end 
```

并在`.m`：

```
@implementation MyParentViewController
...
-(void) userCancelledMyModalViewController:(MyModalViewController*)vc {
    // Update the text field with something like "They clicked cancel!"
}
-(void) userAcceptedMyModalViewController:(MyModalViewController*)vc
                                withInput:(NSString*)s {
    // Update the text field with the value in s
}
...
@end 
```

# php - 一个应用程序的多个数据库连接

> ID：10917023
> 
> 赞同：0
> 
> 时间：2012-06-06T15:07:56.757
> 
> 标签：php, mysql, smarty

我正在使用这个 php 邮件应用程序，我试图在一个文件夹下拥有多个数据库，而不必一遍又一遍地重复。数据库连接正在使用 smarty 模板，我不太确定如何去做。

**申请文件： http:** [//pommo-ext.googlecode.com/svn/trunk/](http://pommo-ext.googlecode.com/svn/trunk/)

**我正在尝试这样做：**

```
If username/password is Smith => connect to DB_1 
If username/password is John => connect to DB_2 
If username/password is Jim => connect to DB_3 
```

**这是我用于 DB 连接器的 config.php 文件：**

[http://pommo-ext.googlecode.com/svn/trunk/config.sample.php](http://pommo-ext.googlecode.com/svn/trunk/config.sample.php)

```
[db_hostname] = localhost
[db_username] = root
[db_password] = root
[db_database] = db_1
[db_prefix] = db_ 
```

这里也是数据库的类。 [http://pommo-ext.googlecode.com/svn/trunk/inc/classes/pommo.php](http://pommo-ext.googlecode.com/svn/trunk/inc/classes/pommo.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:22:47.230

我对 Pommo 不熟悉，但从您的问题来看，我认为您正在尝试通过安装一个应用程序，但使用不同的数据库设置来创建某种多用户环境。通常（对于任何应用程序）没有直接或简单的方法来做到这一点。

首先，您必须重写 Pommo 的所有内部逻辑，以确保它们根据用户名使用不同的数据库连接。但是，在这种情况下，用户名不能存储在任何数据库中，因为必须根据用户名选择数据库。您可以为这些信息添加另一个数据库，但这很愚蠢。

其次，你想要不同的数据库，但我无法想象你为什么想要那样。对于初学者，为什么不使用表前缀？其次，我确信 Pommo 具有某种多用户环境，因此您可以与多个用户共享同一个安装。也许这是不可能的，但你可以做两件事：

*   开始寻找其他应用程序。
*   开始寻找其他已经写过你想要的东西的爱好者。

最后，Smarty 不必对数据库连接做任何事情。我想象 Pommo 使用 Smarty 进行模板化或将 Smarty 模板放入数据库中，但实际的数据库设置必须在 PHP 中的某个地方进行。

* * *

但是，如果您不需要一些“好”的解决方案，准备好面对严重的丑陋并想要一个快速的解决方案，您可能可以使用 PHP 会话。`$_SESSION['custom_username']`您可以通过在登录页面上请求来存储用户的用户名。但是请注意，在 Pommo 尝试验证在其数据库中传递的用户名之前，您必须有一个登录页面，因为数据库依赖于用户名。我建议独立于您的 Pommo 安装的单独页面。也许您想创建类似文件的东西，它使用 GET 参数、设置会话并转发给应用程序。

之后，在 config.php 中，您可以检查会话中的用户名并根据该用户名更改属性。

为此，您必须正确设置 PHP 会话，如果 Pommo 已经使用会话，您可能可以重用该功能，但要确保它不会干扰 Pommo 对它的使用。

# qt - shell 脚本中的错误

> ID：10917025
> 
> 赞同：0
> 
> 时间：2012-06-06T15:08:13.143
> 
> 标签：qt, shell, install-name-tool

我正在使用 shell 脚本来帮助我解析库路径，以便我可以发送我的应用程序包。我对 shell 脚本了解不多，并且正在从其他部分中破解一些东西，所以我真的不知道如何解决这个问题。问题围绕着诸如`done << ...`

这是一些代码！请注意，这是基于 Qt 项目。

```
echo "Below is the list of install_name_tools that need to be added:"
while IFS= read -r -d '' file; do
    baseName=`basename "$file"`
    #echo "otool -L \"$file\" | grep -e \"*$baseName\""
    hasUsrLocal=`otool -L "$file" | grep -v -e "*$baseName" | grep -v libgcc_s.1.dylib | grep -v libstdc++.6.dylib | grep "/usr/local\|/Users"`
    if [ -n "$hasUsrLocal" ]; then
        #echo "WARNING: $file has /usr/local dependencies"
        #echo "\"$hasUsrLocal\""

        #echo "To Fix:"

        while read line; do
            #Remove extra info
            library=`echo "$line" | perl -pe 's/(.*?)\s\(compatibility version.*/\1/'`
            libraryBaseName=`basename "$library"`
            frameworkNameBase="$libraryBaseName.framework"
            isframework=`echo "$library" | grep "$frameworkNameBase"`

            unset fixCommand;
            if [ -n "$isframework" ]; then
                #Print out how to fix the framework
                frameworkName=`echo $library | perl -pe "s/.*?($frameworkNameBase\/.+)/\1/"`
                fixCommand=`echo "install_name_tool -change \"$library\" \"@executable_path/../Frameworks/$frameworkName\" \"$file\""`
            else
                #Print out how to fix the regular dylib
                if [ "$baseName" != "$libraryBaseName" ]; then
                    fixCommand=`echo "install_name_tool -change \"$library\" \"@executable_path/../Frameworks/$libraryBaseName\" \"$file\""`
                fi
            fi

            echo "$fixCommand"
        done << (echo "$hasUsrLocal")
        #echo "---------------------------------------------------------"
    fi

done << (find MyProgram.app -type f -print0) 
```

此打印的错误是指该行`done << (echo "$hasUsrLocal")`

```
./deploy.sh: line 563: syntax error near unexpected token `('
./deploy.sh: line 563: `        done << (echo "$hasUsrLocal")' 
```

`done << (find MyProgram.app -type f -print0)`如果我注释掉一些脚本，我也会遇到类似的问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:11:01.127

我相信作者打算使用流程替换：

```
done < <( find ... 
```

您也可以尝试将 find 传递到 while 循环中：

```
find MyProgram ... | while IFS= read -r -d '' file; do ... done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:18:05.890

我修好了它！感谢 William Pursell 提出的关键字“过程替换”。这让我有了“谷歌”的基础。

我注意到这是一个间距问题。需要间隔`done < <(echo "$hasUsrLocal")`，例如！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:18:47.387

### 回答

该`<<`符号用于此处的文档。您可能想要的是重定向进程替换：

```
< <( : ) 
```

该`<(command_list)`构造用于[进程替换](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)，而第一个小于符号将循环的标准输入重定向到由该行后面的进程替换创建的文件描述符。

### 专家提示

这是一种方便但令人困惑的语法。从右到左阅读它真的很有帮助。

# jquery - 为 jQuery UI 滑块设置最小值限制

> ID：10917033
> 
> 赞同：6
> 
> 时间：2012-06-06T15:08:30.580
> 
> 标签：jquery, jquery-ui

我有一个范围从 0 到 80 的滑块。我想添加一个最小范围，所以用户不能滑块低于该范围。比如我想设置一个像 20 这样的值，用户不能滑动低于这个值，但是滑动的范围仍然是 0 到 80。

这是我的滑块脚本：

```
 $("#showslider").keyup(function (e){
 $(".slider").slider("value", $("#showslider").val());
 $("#slider-result").html($("#showslider").val());
$( ".slider" ).slider({
animate: true,
    range: "min",
    value: 50,
     min: 0,
 max: 80,
 step: 1,
slide: function (event, ui) {
$("#slider-result").html(ui.value);
    $("#showslider").val(ui.value);
},
change: function(event, ui) { 
    $('#hidden').attr('value', ui.value);
    }
}); 
```

如果可以，请详细指导我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T15:14:33.610

在`slide`函数中，您可以检查滑块的值，看它是否在您想要的范围内。

```
if (ui.value < 20)  // corrected
    return false; 
```

这是为了将最小值保持在 0，但现在允许值低于 20，这是我认为 Siwa 所要求的。如果您只想制作最少 20 个，请更改`min: 0`为`min: 20`.

[这](http://erraticdev.blogspot.com/2011/08/advanced-jquery-ui-range-slider.html)可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:11:51.470

将代码中的属性更改`max`为 20。[示例](http://jqueryui.com/demos/slider/#rangemin).

但是如果你想显示整个 100 个值并且只允许用户在 0 到 20 之间滑动，你应该绑定到`change`事件你的方法，一旦用户试图忽略它，它将返回允许的滑动位置。[文档页面](http://jqueryui.com/demos/slider/#event-change)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T19:15:17.307

我发现以下滑动方法在尝试滑过 20 时将较低的值固定为 20，而不是保持之前的值（某个数字略高于 20）。

```
slide: function (event, ui) {
  if (ui.value < 20) { 
    $(this).slider('value',20);
    return false;
  }
}, 
```

# c# - System.Web.Http.HttpConfiguration.get_ServiceResolver() 未找到

> ID：10917047
> 
> 赞同：2
> 
> 时间：2012-06-06T15:09:08.293
> 
> 标签：c#, azure, asp.net-web-api

我已经更新到本周发布的新 mvc 4 RC 版本，部署到 azure 后，我收到错误消息：

> 找不到方法：“System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> > 异常详细信息：System.MissingMethodException：找不到方法：'System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()'。

我正在使用 GlobalConfiguration.Configuration 对象来配置所有东西，并且一切都在我的机器上运行。

你能帮我解决这个问题吗？

谢谢！

# directx - DirectCompute 和多个设备？

> ID：10917048
> 
> 赞同：1
> 
> 时间：2012-06-06T15:09:10.803
> 
> 标签：directx, directcompute

是否可以像使用 CUDA 一样在多个设备 (GPU) 之间拆分工作？这在代码中看起来如何？

很难找到适用于 DirectCompute 的文档，并且 SDK 没有显示任何示例。

# css - 使用 css 设置 div 外宽

> ID：10917049
> 
> 赞同：12
> 
> 时间：2012-06-06T15:09:14.807
> 
> 标签：css

我想知道是否有办法设置`outerwidth`一个`div`使用`css`来忽略填充和边框。

当我将 a 设置`div`为`50%`宽度时，填充和边框将添加到宽度中。`javascript`如果没有or ，我该如何解决`jQuery.outerWidth()`？

不想使用额外的元素

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T15:54:17.413

> 我想知道是否有办法使用 css 设置 div 的外部宽度以忽略填充和边框。

你可以`box-sizing: border-box`用来制作`padding`和`border`计算里面`width`：

```
div {
    box-sizing: border-box;
} 
```

**请参阅**：http : [//jsfiddle.net/thirtydot/6xx3h/](http://jsfiddle.net/thirtydot/6xx3h/)

浏览器支持：[http ://caniuse.com/css3-boxsizing](http://caniuse.com/css3-boxsizing)

规范：[http ://www.w3.org/TR/css3-ui/#box-sizing](http://www.w3.org/TR/css3-ui/#box-sizing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:11:41.930

将另一个嵌套`div`在您的内部，并将填充/边框应用于嵌套的一个：

```
<div style="width:50%;"> <div style="padding:5px;">  ....  </div> </div> 
```

不幸的是，没有纯粹的 CSS 方法来实现这一点（或者至少我不知道有一种方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:24:04.777

我假设您不想添加更多元素并稍微不同地回答您的问题。

1.  浏览器，而不是样式表，决定了相对度量的实际大小，例如 em 和 %。
2.  没有通用/标准机制将计算数据从浏览器的内部布局引擎反馈回样式表（这可能是一个危险的循环问题）。

确实，做到这一点的唯一方法是：

1.  使用固定宽度尺寸并将像素计算添加到您的样式中。
2.  使用 JavaScript 或相关框架来实现结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:11:59.693

如果可能的话，我会简单地在该 div 中添加一个 div。

```
<div id="outerwidth">
  <div class="inner">
   //Content
  </div>
</div>

.outerwidth { width: 50%; }
.inner { padding: 20px; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T15:35:49.690

您可以将分配给宽度的 50% 值拆分为：

```
width: 46%;

margin: 0 1%; // 0 top/bottom and 1% each for left and right

padding: 0 1%; // same as above 
```

您可以重新计算百分比以满足您的需要，只要总数为 50% 就可以了。

我会避免使用 js 来解决小的外观问题，因为这在 js 关闭的情况下不起作用，并且会给您的客户端浏览器增加额外的工作量 - 想想移动设备，您就会明白为什么性能很重要！

# html - 如何在 IE 中找出页面下载时间/大小？

> ID：10917052
> 
> 赞同：6
> 
> 时间：2012-06-06T15:09:32.857
> 
> 标签：html, internet-explorer, firefox, add-on, page-size

有没有免费的IE工具可以让我知道页面下载时间和下载大小？

我正在使用 IE Web Developer 工具，但它不显示下载时间/大小。

对于 FireFox，有一个[名为 Lori 的插件](https://addons.mozilla.org/en-US/firefox/addon/lori-life-of-request-info/)可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-18T10:32:45.590

事实上，IE11 开发工具似乎缺少那么好的总时间。为了解决这个问题，您可以在 IE11 中将数据导出为 CSV。网络选项卡上的开始/停止按钮旁边有一个导出按钮。

1.  打开 CSV，观察每个组件的时间都以毫秒和秒为单位。
2.  在“已采取”列旁边添加一个新的空列。
3.  过滤 Taken 列以仅显示“ms”。
4.  使用文本到列功能将字母 ms 移动到下一列（使分隔符成为空格。请注意，< 1ms 数字会将 1 移动到新列。因此，如果您真的很细化，那么您需要找到这些并将 1 移回 Taken 列并删除其中的 <。）
5.  使用 SUM 功能获取总毫秒数。
6.  重复这个过程，但这次是几秒钟。

将您的 ms 转换为秒并将此数字添加到总秒数中，您将获得总页面加载时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:54:29.047

[MySpace 的 Performance Tracker](http://msfast.myspace.com/)适用于 IE 6 及更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:33:25.463

再次检查 IE 开发人员工具。按 F12，然后单击网络选项卡并按“开始捕获”按钮。这将为您提供下载时间、大小、顺序，并让您查看请求和响应标头/正文。

![在此处输入图像描述](../Images/8bba4cfc1e5a213a1e2eaa3e086ef362.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-06T15:53:01.393

只需在 Google Chrome 中按 F12 时使用 Google Chrome 开发人员工具，然后转到网络并刷新您需要大小的页面，它会为您提供一个图表，其中包含引用的每个文件的大小

# sql - db 将某个值附加到所有记录的特定字段

> ID：10917054
> 
> 赞同：1
> 
> 时间：2012-06-06T15:09:35.290
> 
> 标签：sql, database, informix

我有一个组表，其中有一个名为权限的字段，该字段具有管道分隔值。例如

```
permissions='1-1|2-2|3-2|4-2|5-2|6-2|7-1|8-2|9-2|10-2|11-2|12-2|13-3|14-2|15-2|16-2| 
```

现在我想将以下值附加到组表中的所有权限字段：|17-0|18-0|19-0

所以我需要类似的东西

`UPDATE groups SET permissions='existing value+|17-0|18-0|19-0';`

我不知道该怎么做。（我正在使用informix）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:11:37.623

```
UPDATE groups SET permissions = permissions + '|17-0|18-0|19-0' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:12:18.530

读一点关于这个，informix concatenation with null 给出 null。如果字段权限可以为空，则需要稍微更改更新。

```
UPDATE groups SET permissions = NVL(permissions || '|17-0|18-0|19-0', '17-0|18-0|19-0'); 
```

如果权限不能为空，那么这就足够了：

```
UPDATE groups SET permissions = permissions || '|17-0|18-0|19-0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:13:32.423

谷歌说，使用 ConCat 命令或 ||

# jquery-ui - 在具有左/右约束的 div 内拖动图像

> ID：10917061
> 
> 赞同：3
> 
> 时间：2012-06-06T15:10:15.930
> 
> 标签：jquery-ui, constraints, jquery-ui-draggable

我正在尝试将图像嵌套在 div 中，并使其可在此 div 内的 X 轴上拖动。

[这是一个 jsFiddle 来说明我的观点](http://jsfiddle.net/YVEb3/)

一旦用户到达它的左/右边缘，我希望蓝色框停止拖动，他应该再也看不到任何红色包装。

想象一下蓝色框是一个非常宽的图像，我希望能够将它从左侧拖到右侧而不超出其宽度。这意味着当你到达它的左边时你不能把它拖到右边，当你到达它的右边时你不能把它拖到左边。

简而言之，当你到达图像的边缘时，你不能再拖动它了。

我该如何设置这种行为？

我试着玩，`containment`但我无法达到我想要的。

谢谢你的帮助。

HTML：

```
<div id="wrapper">
    <p id="timeline"><img src="" alt="Timeline" width="2000" height="400"/></p>    
</div> 
```

CSS：

```
#wrapper {
    width: 800px;
    height: 400px;
    background-color : red;
    overflow: hidden;
    cursor: w-resize;
}

#timeline {
    width: 2000px;
    height: 400px;
    margin: 0 auto;
    background-color: blue;
} 
```

JS：

```
$("#timeline").draggable({
    axis: "x"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:11:29.933

您使用该选项是正确的，`containment`但您需要传入坐标数组来约束`draggable`.

根据[jQuery UI 文档](http://jqueryui.com/demos/draggable/#option-containment)，该`containment`选项可以采用 Array 格式`[x1, y1, x2, y2]`。在您的情况下，y 值无关紧要，因为您已经将 约束`draggable`到 x 轴，因此您可以简单地传入 0。

对于 x 值 0 将适用于 x1，因为图像已经从右边缘开始。对于 x2，您需要使用：

```
(width of parent - width of image) 
```

所以

```
(800 - 2000) = -1200 
```

因此，您可以为选项传递以下内容`containment`：

```
containment: [-1200, 0, 0, 0] 
```

**现场示例**- [http://jsfiddle.net/LMXLj/](http://jsfiddle.net/LMXLj/)

# c - 关于分段错误

> ID：10917064
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:10:32.583
> 
> 标签：c, segmentation-fault

我正在尝试使用 UDP 做某种 voip 应用程序。我添加了 RSA 算法以确保安全。但是它的给出和分段错误。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/ioctl.h>
#include <stdlib.h>
#include <stdio.h>
#include <linux/soundcard.h>
#include <stdlib.h>
#define LENGTH 3    /* how many seconds of speech to store */
#define RATE 8000   /* the sampling rate */
#define FILE_INPUT "/dev/dsp" /* Path to the sound card. */
#define FILE_OUTPUT "/dev/dsp"

/*-RSA-*/
//Her is gcd function
int gcd(int a,int b)
{
    while(a!=b){

        if(a>b)
            a-=b;
        else
            b-=a;
    }
    return a;
}

//This is called  Extended Euclid’s Algorithm to find d.

int findD(int e,int n)
{

    int f=e;
    int d=n;

    int x1, x2, x3, y1, y2, y3;
    x1 = 1; x2 = 0; x3 = f; //p
    y1 = 0; y2 = 1; y3 = d; //d

    int q = 0, i = 1;
    int t1 = 0, t2 = 0, t3 = 0;
    do
    {
        if (i == 1)
        {
            q = x3 / y3;
            t1 = x1 - (q * y1);
            t2 = x2 - (q * y2);
            t3 = x3 - (q * y3);
        }
        else
        {
            x1 = y1; x2 = y2; x3 = y3;
            y1 = t1; y2 = t2; y3 = t3;
            q = x3 / y3;
            t1 = x1 - (q * y1);
            t2 = x2 - (q * y2);
            t3 = x3 - (q * y3);
        }
        i++;

        if (y3 == 0)
        {
            break;
        }

    } while (y3 != 1);

    if (y3 == 0)
    {
        //printf("Sayinin tersi yoktur!!!!");
    }
    else
    {
        // printf("\nSayinin tersi : %d" , y2);
    }

    if(y2<=0)
    {

        y2=e+y2;

    }
    return y2;

}

//Instead of using pow function,I have choose to write square and multiply method which is faster and
//more suitable for big integers.Because we have no such a change to find 104^30 such like that
//Here computes pow(a,b)%n
int squareMul(int a,int b,int n)
{

    int y = 1;

    /*  Compute pow(a, b) % n using the binary square and multiply method. */
    while (b != 0)
    {
        /*  For each 1 in b, accumulate y. */
        if (b & 1)
        {
            y = (y * a) % n;
        }

        /* Square a for each bit in b. */
        a = (a * a) % n;

        /*  Prepare for the next bit in b. */
        b = b >> 1;
    }

    return y;

}
//Encyrption function
//Assume our plain-text is M
int *encyrpt(int text[],int e,int n)
{

    int t=0;
    int *s=(int *)malloc(100);

    for(t=0;t<sizeof(text);t++)
    {
        int gec=(int)text[t];

        //Here computes E(M)=M^e mod n;
        s[t]=squareMul(gec,e,n);

    }

    return s;

}

//Here is decyrption
//Assume our chipher-text is C
int *decyrpt(int enc[],int d,int e,int n)
{
    int i=0;
    int *s=(int *)malloc(100);

    for(i=0;i<sizeof(enc);i++)
    {
        int gelenEnc=(int)enc[i];
        //Here computes D(C)=C^d mod n;
        s[i]=squareMul(gelenEnc,d,n);

    }
    return s;

}

//Here is totient function to find prime to  m.
int totient(int m)
{

    int i;
    int ph=1;
    for(i=2;i<m;i++){

        if(gcd(i,m)==1)
        {
            ph=i;
            break;

        }
    }
    return ph;

}
/*-RSA-*/

int main()
{
    int sock,bytes_recv;
    struct sockaddr_in server_addr;
    struct hostent *host;
    char send_data[LENGTH*RATE];
    char recv_data[LENGTH*RATE];
    int addr_len, bytes_read;
    struct client_addr;

    /* this buffer holds the digitized audio */
    unsigned char buf[LENGTH*RATE];

    /*----------RSA-----------------------*/    

    //Here are some variables that I used for RSA ALGORİTHM
    //str is our plain-text
    char *plainText;
    int *ascii;
    int *enc;
    int *dec;
    int p,q;
    int k=0;
    int n;
    int e;
    int c;
    int phi;
    int d;

    plainText="Merhaba";

    //Here enter 2 relatively prime number
    //I have chose the p=73 and q=151

    p=73;
    q=151;

    printf("\n\ p :%d and q :%d \t \n",p,q);
    //Here computes n
    n = p*q;
    //Here computes phi func simply
    phi=(p-1)*(q-1);

    printf("\n\ n :\t= %d \n",n);
    printf("\n\ Phi :\t= %d \n",phi);

    //Here Euilers Totient function.It finds a number 'e' which is relatively prime with phi.
    e=totient(phi);
    //Here computes d,which is multiplicative inverse of e modula phi.
    d=findD(phi,e);

    printf("\n\ e :\t= %d  \n",e);

    printf("\n\ d :\t= %d which is multiplicative inverse of e modula phi \n",d);

    //Here is the ascii values for plainText.I have created new array in order to store plainText's ascii for simplicty
    ascii=(int *)malloc(sizeof(int)*sizeof(plainText)/sizeof(char));

/*---------------RSA------------*/

    int sound_device;

    /* open sound device */
    //I defined sound card both read and write mode for simplicity
    sound_device = open("/dev/dsp", O_RDWR);
    if (sound_device < 0) {
        perror("Open sound card failed");
        exit(1);
    }

    host= (struct hostent *) gethostbyname((char *)"127.0.0.1");

    if ((sock = socket(AF_INET, SOCK_DGRAM, 0)) == -1)
    {
        perror("socket");
        exit(1);
    }

    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(5000);
    server_addr.sin_addr = *((struct in_addr *)host->h_addr);
    bzero(&(server_addr.sin_zero),8);

    while(1){

        read(sound_device, buf, sizeof(buf)); /* record some sound */

          printf("\n Size of buff: %d",sizeof(buf));
          ascii=malloc(LENGTH*RATE);
          buf=malloc(LENGTH*RATE);

                  printf("\n Size of ascii: %d",sizeof(ascii));

          //Here ascii stores plaintText's ascii number.
        for(c=0;c<LENGTH*RATE;c++)
        {

        int k=(int)buf[c];

        ascii[c]=k;
        printf("\n\t Ascii's of %c  \t= %d  \n",buf[c],ascii[c]);
            printf("\n\t C: %c  \t= %d  \n",c);
        }

         enc=encyrpt(ascii,e,n);

        //Send function to server
        sendto(sock, enc, LENGTH*RATE, 0,(struct sockaddr *)&server_addr, sizeof(struct sockaddr));

        //Listen from server for 3 seconds
        ioctl(sound_device, SOUND_PCM_SYNC, 0);
        bytes_recv = recvfrom(sock,buf,LENGTH*RATE,0,(struct sockaddr *)&server_addr, &addr_len);

        printf("\n Sended:");
        if(bytes_recv==LENGTH*RATE){

            printf("\nMessage received from server,listen:");
            //Here is decyription
            dec=decyrpt(buf,d,e,n);
            write(sound_device, dec, sizeof(dec));

            ioctl(sound_device, SOUND_PCM_SYNC, 0);
            }
    }

}

 Ascii's of �   = 131  

 C: �   = 10989 
```

分段故障

但是，我的 RSA 算法在其他字符数组中可以正常工作。知道吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:17:47.217

正如评论中的人们所指出的那样，您应该使用调试器来找出分段错误到底发生在哪里。

然而，粗略的分析（这是开发人员在挖掘调试器之前应该始终做的事情）显示了一些被随意使用的指针。

任何时候调用`malloc`，都应该确认它是成功的。如果不是，并且您尝试使用您`malloc`编辑的指针，则可能会出现段错误。

您还将字符串分配给 un `malloc`ed 指针 ( `plainText`)... BOOM：segfaults，哎呀！

你的一堆函数也做 unchecked `malloc`。

所以，有几个地方你应该看看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:20:16.657

分段错误通常是由于试图访问未为进程分配的内存而引起的。这通常发生在您索引数组（尤其是动态创建的数组）时。

在您的代码`malloc()`中，`encypt()`and`decrypt()`函数具有固定大小，但您根据输入数组的大小访问其元素，这*可能*是 seg.fault 的原因。

可以肯定的是，您将需要使用调试器并查看过度/不足索引发生的位置。一定要检查对其他数组的访问（无论是否动态分配）

Also, `sizeof(plainText)` returns the size of a pointer-to-char, not the length of the string. You will either need to declare `plaintext` as a stack-based array, or use the `strlen()` function.

# android - CSipSimple PjSip 获取一些 voip 指标

> ID：10917065
> 
> 赞同：2
> 
> 时间：2012-06-06T15:10:34.700
> 
> 标签：android, pjsip

我想显示`VOIP`丢包抖动等指标。在`PJSIP`代码中有一个类`RTPC.c`，我可以在其中获取此信息。所以我的问题是：是否`CSipSimple`有收集这些信息的 Java 对象，或者任何人都可以给我一个设备如何更改 Java 类以获取这些信息`JNI`？

# java - JUnit：AssertionFailedError，在中找不到测试

> ID：10917069
> 
> 赞同：2
> 
> 时间：2012-06-06T15:10:45.533
> 
> 标签：java, exception, junit

这是我`testMethod`的问题，

```
public class DetailsTest extends TestCase
{
    public void testGetQuotes() throws Exception
    {
        int bookSize = getBookSize();
        List<Details> detailList = getDetailLists();
        assertNotNull(bookSize);
        assertEquals(bookSize, detailList.size());
        assertNotNull(detailList.size());
    }
} 
```

我的课程扩展`JUnit : TestCase`了，不确定这里有什么问题导致问题...正在使用`junit 3.8.1`

**更新** 我已经解决了关于 SO 的类似问题，但它并没有太大帮助。

**更新 2：**堆栈跟踪

```
1) warning(junit.framework.TestSuite$1)junit.framework.AssertionFailedError: No tests found in com.comp.Details.DetailsTest
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
    at junit.extensions.TestSetup.run(TestSetup.java:23) 
```

失败！！！测试运行：1，失败：1，错误：0

**更新 3：**我的 testSuite 中只有 Details 类，而不是 DetailsTest，修复了它，现在它工作正常......那些日子之一......你看......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:41:35.287

你打电话给 addTestSuite

```
suite.addTestSuite(DetailsTest.class) 
```

你应该在哪里调用 addTest

```
suite.addTest(DetailsTest.class) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-01T03:56:30.757

如果您的测试在 Android 框架中，请将其添加到您的 gradle 文件中：

```
 defaultConfig {
     testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
  }

  packagingOptions {
     exclude 'LICENSE.txt'
  } 
```

那么就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T05:50:14.973

用于`JUnit4TestAdapter`在迁移时使您的测试类适应新环境。

当您遇到`junit.framework.AssertionFailedError: No tests found`错误时，它很有用。

例如：`TestSuiteEx`包含我所有的测试用例类，如下所示：

```
@RunWith(Suite.class)
@SuiteClasses({ 
    SampleTest.class,
    myTestCases.class
}) 
```

然后我添加了`AllTests`包含以下代码：

```
public static Test suite() {
    TestSuite suite = new TestSuite("all tests");
    suite.addTest(new JUnit4TestAdapter(TestSuiteEx.class));
    return suite;
} 
```

它非常适合我。:)

快乐编码。

# c# - 为什么忽略 SmtpClient.UseDefaultCredentials？

> ID：10917074
> 
> 赞同：7
> 
> 时间：2012-06-06T15:10:58.753
> 
> 标签：c#, smtp, credentials, smtpclient

我正在尝试通过使用集成 Windows 身份验证的域 SMTP 服务器发送电子邮件。明确指定凭据时，一切正常：

```
using (var client = new SmtpClient("<Server>"))
{
    client.Credentials = new NetworkCredential("<User name>", "<Password>");
    client.EnableSsl = true;
    client.Send(...);
} 
```

SMTP 服务器日志显示 EHLO、STARTTLS、STARTTLS 和 EHLO，然后是 AUTH、MAIL 等。

另一方面，当使用默认凭据时：

```
using (var client = new SmtpClient("<Server>"))
{
    client.UseDefaultCredentials = true;
    client.EnableSsl = true;
    client.Send(...);
} 
```

*   被`SmtpException`抛出，并显示消息“发送邮件失败。”；

*   内部`IOException`消息是：“无法从传输连接读取数据：现有连接被远程主机强制关闭。”，和

*   inner-inner`SocketException`是：“一个现有的连接被远程主机强行关闭”。

SMTP 服务器日志显示 EHLO、STARTTLS、STARTTLS 和 EHLO，然后什么也没有。

`configuration/system.net/mailSettings/smtp/network`如果选项从源代码移动到 App.config并且无论是否指定了端口号，结果都是完全相同的（第一个示例成功，第二个示例失败） 。

鉴于：

*   [根据文档](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.usedefaultcredentials)，`SmtpClient.UseDefaultCredentials`“[g]ets 或设置一个布尔值，用于控制 DefaultCredentials 是否随请求一起发送”，即

*   “对于客户端应用程序，[ [`CredentialCache.DefaultCredentials`](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials.aspx)] 通常是运行应用程序的用户的 Windows 凭据（用户名、密码和域）”，并且

*   测试代码是一个 Windows 窗体客户端应用程序，从上面第一个示例中指定的凭据相同的帐户运行，

为什么第二个样本失败，而第一个样本有效？

* * *

在一个论坛上[，有人建议](http://www.vistax64.com/net-general/156052-smtpclient-usedefaultcredentials-does-not-work-authenticated-sm.html#post723823)该问题可能是由 SMTP 服务器不支持 NTLM 引起的。通过 EHLO 访问服务器，似乎支持 NTLM，响应行之一*是*`250-AUTH GSSAPI NTLM`​​ .

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-08-23T14:33:04.943

如果*UseDefaultCredentials*设置为 true，则并不意味着使用*Credentials*属性中的值。这意味着使用“**当前登录用户**”的凭据，在 IIS Web 应用程序的情况下通常是应用程序池标识，在 Windows 服务的情况下是服务的标识，在桌面应用程序，它是登录到 Windows 的用户的身份。

如果*UseDefaultCredentials*为 false（默认值），**如果该属性具有值 set ，则将使用***Credentials*属性，否则将**匿名**发送邮件。

 ****请参阅 Microsoft 文档[https://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.usedefaultcredentials](https://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.usedefaultcredentials(v=vs.110).aspx) (v=vs.110).aspx（在备注部分）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T15:56:35.933

我认为您实际上还必须指定凭据。UseDefaultCredentials 只是一个标志，告诉 SMTPClient 使用提供给 Credentials 属性的凭据。

```
client.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

这里有一些其他的尝试：

*   这是使用 .NET 4 吗？[此 Connect 错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/560365/system-net-mail-smtpclient-sending-mail-failed-through-server-with-integrated-windows-authentication#details)表明该版本存在问题（尽管它很旧且未解决）。您可以尝试 .NET v3.5 或 v4.5
*   会不会是[跨区问题](http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/108a0786-7438-4c40-abcc-4020ed61b86f)？
*   尝试使用您的[app.config 文件](http://msdn.microsoft.com/en-us/library/ms164240.aspx)指定设置，看看会发生什么变化。****

# c# - 在关闭表格之前进行检查？

> ID：10917076
> 
> 赞同：2
> 
> 时间：2012-06-06T15:11:08.310
> 
> 标签：c#, winforms

下面的代码在 MainFrame.cs 中，它打开并检查 MovieForm.cs。在将新电影添加到列表之前，我想检查输入的电影标题是否已经存在。但问题是，如果标题已经存在并且出现了消息框，那么 MovieForm.cs 已经关闭，所有其他数据都消失了，用户无法将标题更改为另一个！这可以通过其他一些不太复杂的方式来完成吗？有没有办法停止关闭表格？谢谢！

```
private void btnNewMovie_Click(object sender, EventArgs e)
{
    movieForm = new MovieForm();

    if (movieForm.ShowDialog() == DialogResult.OK)
    {

        if (!movieManager.GetMovieFromList(index).Split(',')  [0].Equals(movieForm.GetTitle))
        {
            movieManager.AddNewMovieToMediaLibrary(movieForm.GetNewMovie); // Anropar properties i objektet movieManager

            UppdateListboxOfMovies(); 
        }
        else
        {
            MessageBox.Show("Det finns redan en film med titeln " + movieManager.GetMovieFromList(index).Split(',')[0], "Ooops!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:22:01.970

您有机会取消表格关闭：

```
private void btnNewMovie_Click(object sender, EventArgs e)
{
    using (var movieForm = new MovieForm())
    {
        movieForm.Closing += (s, a) =>
            {
                if (movieForm.DialogResult == DialogResult.OK)
                {
                    if (!movieManager.GetMovieFromList(index).Split(',')  [0].Equals(movieForm.GetTitle))
                    {
                        movieManager.AddNewMovieToMediaLibrary(movieForm.GetNewMovie); // Anropar properties i objektet movieManager

                        UppdateListboxOfMovies(); 
                    }
                    else
                    {
                        MessageBox.Show("Det finns redan en film med titeln " + movieManager.GetMovieFromList(index).Split(',')[0], "Ooops!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

                        // Prevent the form from closing and let the user try again
                        a.Cancel = true;
                    }
                }
            };

        movieForm.ShowDialog();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:20:13.240

movieForm 对象仍在范围内，因此您仍然可以从中访问任何公共数据。我假设 movieForm.GetTitle 正确返回。您现在需要做的就是应用以下更正，因为此时您只是将您的标题与列表中的第一个标题进行比较：

```
if (!movieManager.GetMovieFromList(index).Split(',').Contains(movieForm.GetTitle))
  ... 
```

那应该可以解决您的问题。

编辑：好的，我误解了你的问题。您希望表单保持打开状态，以便用户可以进行更正。可能的解决方案：

*   **解决方案1**：通过参数化构造函数将movieManager对象传入MovieForm。这样，您可以在关闭表单之前检查列表（在按钮的单击事件上）。
*   **解决方案 2**：创建一个静态 MovieManager.GetMovieFromList 方法，这样您就不需要实例化它。

我希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:18:54.040

您仍然拥有 movieForm 对象。你可以再做`movieForm.ShowDialog()`一次。不要忘记使用 onShow 或类似方法中的值再次填写编辑字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:19:03.427

在您的 MovieForm 中移动检查/添加代码，然后您只需调用`movieForm.ShowDialog()`. 您还可以向添加电影的主窗体引发事件。

# ruby - Sunspot/Solr：索引时间字段会导致 NumberFormatException

> ID：10917077
> 
> 赞同：2
> 
> 时间：2012-06-06T15:11:09.197
> 
> 标签：ruby, solr, lucene, sunspot, sunspot-solr

我正在尝试将时间戳字段添加到我的模型中，以便通过 Sunspot/Solr 进行索引。Solr 对此感到窒息并产生`NumberFormatException`：

```
class Book < ActiveRecord::Base
  attr_accessible :lastUpdated, :category, :title  # etc...

  searchable do
    text :title
    text :category
    time :lastUpdated   # mysql 'datetime' field
    # etc...
  end
end

Jun 06, 2012 10:59:10 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.NumberFormatException: For input string: "2012-01-02T03:29:00Z" 
```

我也尝试过使用`date :lastUpdated`相同的结果。

考虑到我的模型可能有一些虚假`lastUpdated`值，我尝试从 索引结果`Time.now`，并得到相同的结果。

我在外部使用 Solr 3.4.0，但使用提供的“内部”Solr 重现了相同的问题`sunspot-installer`，并进行了相应调整`sunspot.yml`。我的情况看起来很像[这里](https://groups.google.com/forum/?fromgroups#!topic/ruby-sunspot/c7GluD8jsHk)提到的问题，但是重新安装 Sunspot/Solr 配置似乎并没有解决它。

**编辑**：也尝试过 Solr 3.6.0；同样的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T00:54:42.340

我怀疑这是由于 Sunspot 的 type.rb 中的一个错误造成的。`TimeType`将其定义`indexed_name`为“_d”，而不是“_dt”。我在我的模型代码中使用以下方法解决了这个问题：

```
module Sunspot
  module Type
    class TimeType < AbstractType
      def indexed_name(name) #:nodoc:
        "#{name}_dt"
      end
    end
    register TimeType
  end
end 
```

# asp.net-web-api - Ajax 帖子：不允许使用 405 方法

> ID：10917085
> 
> 赞同：16
> 
> 时间：2012-06-06T15:11:28.997
> 
> 标签：asp.net-web-api, wcf-web-api, http-status-code-405

在我的称为 Payment 的 API 控制器中，我有以下方法：

```
[HttpPost]
public HttpResponseMessage Charge(Payment payment)
{
    var processedPayment = _paymentProcessor.Charge(payment);
    var response = Request.CreateResponse(processedPayment.Status != "PAID" ? HttpStatusCode.ExpectationFailed : HttpStatusCode.OK, processedPayment);
    return response;
} 
```

在我的 HTML 页面中，我有：

```
$.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "http://localhost:65396/api/payment/charge",
        data: $('#addPayment').serialize(),
        dataType: "json",
        success: function (data) {
            alert(data);
        }
    }); 
```

每当我启动 POST 时，我都会得到

```
"NetworkError: 405 Method Not Allowed - http://localhost:65396/api/payment/charge" 
```

我错过了什么？

谢谢你。

更新

这是路由信息（默认）

```
 routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T15:29:45.533

很可能没有为要调用的操作配置您的路由。因此，请求最终无处可去，并且 ASP.NET Web API 发送了一条空白消息“方法不允许”。

你能用你的路由更新问题吗？

* * *

# 更新

和我想象的一样！您正在发送到，`http://localhost:65396/api/payment/charge`而您需要发送到`http://localhost:65396/api/payment`- 假设您的控制器被调用`PaymentController`。

请注意，路线没有`action`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-11T13:10:27.143

原来我需要实现 CORS 支持。[http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T13:31:23.663

我的控制器也有同样的问题。唯一不同的是 URL 的结尾。最后将“/”添加到“ [http://localhost:65396/api/payment/charge](http://localhost:65396/api/payment/charge) ”，这对我有帮助

# sas - 在 SAS 中合并数据集

> ID：10917091
> 
> 赞同：0
> 
> 时间：2012-06-06T15:07:10.080
> 
> 标签：sas

我有一个相当简单的问题。

> 有没有办法在 $n > 2$ 的 SAS 中合并 $n$ 数据集。我知道如何合并 2 个数据集。

谢谢

高尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:10:58.853

除了@itzy 提供的代码之外，您还可以使用 MERGE 语句上的 IN= 选项来识别您的数据集。这允许您只接受您需要的匹配。此外，您必须在 BY 语句中使用通用变量名称。您可以包含一个 RENAME= 语句来创建一个公共变量以在您的 BY 语句中使用。

（未经测试的代码）

```
data all;
 merge ds1(in=one rename=(ds1_id=id)) 
       ds2(in=two rename=(ds2_id=id))
       ds3(in=three rename=(ds3_id=id))
       ;
 by some_list_of_variables;
 if one and two and three ; /* Creates only matching records from all */ 
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:37:31.730

您可以使用与仅两个相同的语法合并多个数据集：

```
data all;
 merge ds1 ds2 ds3 ...;
 by some_list_of_variables;
run; 
```

如果您有许多要合并的数据集，您可能需要修改一个将它们全部列出的宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:57:07.953

即使您已经说过要“合并”数据集，请注意 MERGE 语句不是唯一的选择。如果您的合并键在超过 1 个数据集中有重复项，那么使用 MERGE 语句可能会给出逻辑错误的结果，即使它可以正常工作而不会抱怨。在这种情况下，您可以使用 PROC SQL - 我还记得 PROC SQL 从 SAS 9.1 开始可以更高效。

例子 -

```
proc sql;
select <fieldlist>
from data1 t1, data2 t2, data3 t3, data4 t4
where <join condition>;
quit; 
```

# mysql - MYSQL - 获取用户的最后一条消息MAX（时间）

> ID：10917100
> 
> 赞同：3
> 
> 时间：2012-06-06T15:12:01.143
> 
> 标签：mysql, sql

一个对话包含消息，一条消息可以发送给 2 个或更多用户。

目标是按用户检索每个对话的最后一条消息，因此每个对话中的消息都是最新的。

还有`message_user.time`就是当用户已经阅读了消息，所以当它等于0时，这意味着消息还没有被阅读，所以如果第一个顺序是时间等于0的message_user和消息，那就更好了.time 是最大的数字。

我有那些桌子

**留言用户**

```
user   message      time   
-----|------------|-------
 7   | 1          | 0
 8   | 1          | 0
 7   | 2          | 300
 8   | 2          | 300
 7   | 3          | 400 
```

**信息**

```
id    text         conversation   time
---|-------------|--------------|----------
1  | blah blah1  | 1            | 200
2  | blah blah2  | 1            | 300
3  | blah blah3  | 2            | 400
4  | blah blah4  | 2            | 500 
```

目标是按对话对消息进行分组，然后获取链接到该对话的最后一个 message_user，该对话首先具有较大的时间戳。

我试过的是这个，但我没有收到最后一条消息（错误的顺序）

```
 SELECT m.user, mu.message, mu.time, mu.id, m.text, m.time as message_time, m.conversation
    FROM message_user as mu,message as m 
    WHERE mu.message=m.id AND mu.user=8
    GROUP BY m.conversation
    ORDER BY m.time DESC'; 
```

**然后下一步将是：** 我不知道是否有可能，但如果 order by 可以输出 message_user ，其中时间首先等于 0，然后第二个 order 是 message.time （我什至不知道它是否可能在一个完美的请求中！）

**对于用户 8，输出应该是这样的：**

```
text        conversation 
-----------|------------
blah blah1 | 1         //because message_user.time = 0 (means message is unread)
blah blah3 | 2         //because message.time is the highest in the conversation 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:28:58.937

首先，我建议重组您的表格以使其更容易，但这就是我认为您所要求的......每个对话，仅显示最后创建的转换消息，最后一次和阅读它的用户（但更喜欢未读超过这个）。

```
SELECT m.user as User_Sent, m.conversation, m.text, m.time as Time_Sent
, mu.id, mu.user as User_Read, mu.time as Time_Read
FROM message as m 
JOIN (
  SELECT mx.conversation, MAX(mx.time) as MaxTime 
  FROM message as mx GROUP BY mx.conversation
  ) as mx
On m.conversation = mx.conversation
And m.time = mx.MaxTime
JOIN (
  SELECT mu.message, MAX(mu.time) as MaxTime, MIN(mu.time) as MinTime 
  From message_user as mu 
  GROUP BY mu.message
) as mux
On m.id = mux.message
JOIN message_user as mu
ON m.id = mu.message
AND CASE WHEN mux.MinTime = 0 THEN mux.MinTime ELSE mux.MaxTime END = mu.time 
```

# ssh - 了解使用 PKI 的 ssh 登录

> ID：10917103
> 
> 赞同：1
> 
> 时间：2012-06-06T15:12:17.907
> 
> 标签：ssh, cryptography, rsa, public-key-encryption, pki

我已经生成了一个密钥对（公共和私有）并将公钥复制到远程服务器，`ssh-copy-id`公钥和禁用的基于密码的登录。现在我可以在不提供密码的情况下通过 ssh 进入机器。

我一直在寻找可能发生的协议或消息交换，当我通过 ssh 连接到我一直在寻找的远程机器时，却找不到描述在这种情况下如何准确确认身份的文章。我非常了解 PKI 和 Diffie-Hellman，但我无法全面了解我 ssh 进入远程机器时究竟发生了什么。

有人可以解释/链接我到做同样的文章吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:24:09.967

来自 RFC：

> 使用这种方法，拥有私钥作为身份验证。此方法通过发送使用用户的私钥创建的签名来工作。服务器必须检查密钥是否是用户的有效身份验证器，并且必须检查签名是否有效。如果两者都成立，则必须接受身份验证请求；否则，它必须被拒绝。请注意，成功验证后，服务器可能需要额外的验证。

如果您在 ssh 上使用详细信息，您可以看到，客户端会在登录时提供一条消息，该消息使用您的私钥签名。如果您使用多个密钥，它将一一发送。服务器在您的公钥的帮助下检查签名是否有效。如果签名有效并且服务器知道公钥，它将授予访问权限。如果没有，您的客户将尝试下一个，或者如果没有留下，它将拒绝访问。

# qt - Qt QcolorDialog - 确定按钮不起作用

> ID：10917105
> 
> 赞同：0
> 
> 时间：2012-06-06T15:12:35.433
> 
> 标签：qt, colordialog

我正在使用窗口 qt，这是我的代码：

```
LaserEllipse::LaserEllipse(QWidget *parent):
                .....
        QLabel(parent),
        _colore(new QColorDialog(this))
{
    ......
    _colore->setCurrentColor(....);

    // COSTRUZIONE MENU     
    _action_remove = new QAction("Remove Item" , this );
    _action_color = new QAction("Change color" , this );    

    _contextMenu->addAction(_action_color);
    _contextMenu->addAction(_action_remove);

    connect(_action_remove, SIGNAL(triggered()), this, SLOT(action_remove()));
    connect(_action_color, SIGNAL(triggered()), this, SLOT(action_color()));

    _contextMenu->setStyleSheet("QMenu{background-color: rgba(255,255,255,255);selection-color: black;selection-background-color: rgba(162,217,247);}");
    _colore->setStyleSheet("background-color: rgba(255,255,255,255);");
};

void LaserEllipse::action_color()   
{   
    _colore->open(this, SLOT(aggiornaEllipse()));   
}

void LaserEllipse::aggiornaEllipse()
{
    _ellipse_t->setColor(_colore->currentColor().toRgb().name().toStdString());
    _ellipse_t->setCX(this->geometry().center().x()); 
    _ellipse_t->setCY(this->geometry().center().y()); 
    _ellipse_t->setRX(this->width() / 2);
    _ellipse_t->setRY(this->height() / 2);  
} 
```

在最后一行，在`action_color`插槽功能中，出现`QColorDialog`，但如果我点击“确定”按钮按住不工作，如果我点击“取消”没有任何反应。要更改颜色，我必须按 Enter。

怎么了 ？

# ruby-on-rails - 活动管理员：为自定义页面传递实例变量

> ID：10917108
> 
> 赞同：1
> 
> 时间：2012-06-06T15:12:47.963
> 
> 标签：ruby-on-rails, controller, activeadmin

我在 ActiveAdmin 中有一个名为统计的自定义页面，我想在其中显示包含数据库数据的图表。

现在我使用了[Gon gem](http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast)并希望通过实例变量将数据传递到我的自定义页面。

通常您会将 gon 线添加到索引操作中

```
class ProductsController < ApplicationController
  def index
    gon.rabl "app/views/products/index.json.rabl", as: "products"
  end
end 
```

但是我的自定义页面的活动管理员中没有控制器。我该怎么做？还是我必须通过仪表板执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-18T05:24:13.147

活动管理员中有控制器，尽管如此，您不能将实例变量传递给 arbre 部分。但是您可以`params`为此使用哈希：

```
ActiveAdmin.register_page 'SomePage' do
  menu :label => 'Menu label'

  controller do
    def index
      params[:some_var] = 'value_of_some_var'
    end
  end

  content 'Page title' do
    h2 "This is some_var: #{params[:some_var]}"
  end
end 
```

PS：如果你不想改变`params`，那么所有的实例变量都存储在`@arbre_context.assigns`. 你也可能喜欢：

```
ActiveAdmin.register_page 'SomePage' do
  menu :label => 'Menu label'

  controller do
    def index
      @some_var = 'value_of_some_var'
    end
  end

  content 'Page title' do
    h2 "This is some_var: #{@arbre_context.assigns[:some_var]}"
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:36:19.220

您的自定义页面是否从“资源”控制器（即您在应用程序中创建的资源）呈现？如果是，那么这就是控制器本身。您可以在控制器中定义任何自定义操作。您可以使用与部分数据相同的策略将数据传递到您的页面，即使用 :locals

# apache-flex - Flex/AIR Mobile：DateSpinner 组件性能问题

> ID：10917124
> 
> 赞同：1
> 
> 时间：2012-06-06T15:13:32.923
> 
> 标签：apache-flex, air, flash-builder, flexbuilder

我正在使用 FB 4.6/AIR 为 Android 开发移动应用程序。我花了一个晚上的大部分时间来缩小我的视图加载时间如此之长的原因。低头，我发现它是 DateSpinner 组件。我已经在 Galaxy SII 和 Galaxy Nexus 上对其进行了测试，两者的性能是相同的......速度很慢。此外，我调整/简化[了 Devgirl 的 DateSpinner 示例](http://devgirl.org/2011/11/17/flex-mobile-development-datespinner-sample-with-source/)，看看我是否会得到与我的 APP 相同的结果，我确实做到了。[我在这里](https://www.box.com/s/0ef3f21eb0ea70f579b3)发布了项目文件/FXP

提前致谢。

编辑：添加代码

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" title="DateSpinner Sample">
<fx:Script>
    <![CDATA[
        import spark.components.calendarClasses.DateSelectorDisplayMode;
    ]]>
</fx:Script> 

<s:HGroup verticalAlign="middle">
</s:HGroup>
<s:Label text="{dt.selectedDate}"/>
<s:DateSpinner id="dt" x="81" y="138" displayMode="{rg.selectedValue}"
               maxDate="{new Date(2011,11,31)}" minDate="{new Date(2011,06,01)}"
               minuteStepSize="10" selectedDate="{new Date(2011,11,31)}"/>
</s:View> 
```

# orchardcms - 高级菜单 1.4.1 菜单设置？

> ID：10917126
> 
> 赞同：1
> 
> 时间：2012-06-06T15:13:48.817
> 
> 标签：orchardcms

我正在使用带有高级菜单 1.4.1 模块的 Orchard CMS 1.4。当我启用模块并创建新菜单和菜单项时，我看不到我的站点上显示的菜单。此外，如果我创建多个菜单，我看不到选择显示哪个菜单的方法。我可以在设置中的哪个位置选择显示哪个菜单？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:35:19.413

您必须将菜单小部件添加到某个区域（例如导航区域）才能显示菜单。添加该小部件时，您可以选择它应该显示的菜单。

# java - 一个tomcat应用的aop拦截方法

> ID：10917128
> 
> 赞同：0
> 
> 时间：2012-06-06T15:13:58.100
> 
> 标签：java, tomcat, aop, aspectj

我有一个很难解释的问题，所以让我们开始吧：

上下文：我有一个在 tomcat 服务器上运行的应用程序让我们称之为“管理员”。管理员具有导入/导出功能。我们自己的应用程序是对此的扩展，当“管理应用程序”使用导入/导出功能时，我们需要收集一些信息。

问题：包含类 ImportController 的第三方 jar 位于：`~/someFolder/admin/WEB-INF/lib/admin.jar`. 目标是收集旧项目 ID 和新项目 ID，以便我们的扩展可以将我们的类链接到正确的项目。因为我知道方法签名，但我可以使用 AOP 来做到这一点。

想法：我提出的想法是`idHiJacker.jar`将包含单个切入点和建议的东西放入`~/someFolder/admin/WEB-INF/lib/`并启用加载时编织。该建议只是将信息放入 xml 文件中，以便我们的扩展在项目导入后想要放回链接时能够读取它。

另外我必须说我是 AOP 和 web 的纯新手。但是我不希望仅仅为了用 AOP 做这个小操作而导入一个怪物。目前我正在阅读 aspectJ 和 AspectWerkz

问题：

*   1）我的方向正确吗？你有没有看到任何东西会让这个想法根本不起作用？
*   2）如果这是可能的，那么以非常干净的方式做这件事的好习惯是什么？
*   3) 我应该用 AspectJ 来做吗？AspectWerkz？或者是其他东西？
*   4）我这样做是白费吗？有没有更简单的方法来做这个操作？

编辑：另外，如果你有很好的教程来链接答案，那就太棒了

感谢您的时间和回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:51:11.450

> 问题：
> 
> ```
> 1) Am I in the right direction? Do you see anything that would make this idea not work at all? 
> ```

我看不出这不起作用的任何原因。除了关注点之外，of 的概念`Aspect Oriented Programming`是在其他切入点之前或之后执行一些操作，并且通常会影响该建议函数的行为。你在这里就是这样做的。`cross-cutting``advice`

> ```
> 2) If this is possible what would be the good practice to do it in a very clean manner? 
> ```

方面/建议存在一些固有的混乱——由于控制流被劫持更多，因此需要简单的顺序读取代码来了解发生了什么。

> ```
> 3) Should i do it with AspectJ? AspectWerkz? Or Something else? 
> ```

我从未使用过 AspectWerkz，但我对 AspectJ 有很好的体验；特别是在 stackoverflow 上的支持方面，甚至可能在其邮件列表上提供更多支持。

> ```
> 4) Am i doing this for nothing? Is there an easier way to do that operation? 
> ```

除非您可以更改导入控制器的代码或更改客户端以进行额外调用来执行链接操作，否则这种基于拦截的方法似乎是最好的恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:38:25.997

我有一个更简单的解决方案的建议 - 使用装饰器模式来包装第三方 ImportController，将您的功能放在调用第三方库之前。您应该能够执行此操作，因为您似乎可以访问管理应用程序。

这本质上是在做 AOP 正在做的事情，但是使用代码。您使用加载时间编织器的方法也应该有效，但在我看来很复杂 - 如果您绝对打算这样做，请使用 AspectJ。

# php - 页面加载时自动登录

> ID：10917135
> 
> 赞同：1
> 
> 时间：2012-06-06T15:14:33.940
> 
> 标签：php, jquery, login

基本上我有以下网站，允许帐户客户通过填写​​适当的详细信息登录到该网站：[这里](http://www.marandy.com/onlinebooking_golden/login.php)

我创建了一个单独的登录页面，该页面与已经填写的登录值相同：[这里](http://www.marandy.com/onlinebooking_golden/login-guest.php)

我基本上添加了以下代码：

```
$(document).ready(function(){
   $('#btn-login').click();
}); 
```

这样当您转到第二个链接时，它会自动以访客身份登录。虽然它工作正常，但当您以访客身份注销并尝试通过第二个链接重新登录时，它会重定向到第一个链接（login.php），我不明白为什么，因为第二个链接所做的所有事情都是提交正确的价值观。

有没有更好的方法来做到这一点，或者有没有办法防止这种情况发生？

如果我删除重定向，如果您注销然后尝试转到自动登录链接，它会将您带到页面并填写所有详细信息，但不会自动登录。

任何帮助将非常感激。

请参阅下面的登录代码（session-controller.php）

```
<?php

require_once("controllers/server.filter.php");
require_once('models/server.php');
require_once("models/useraccount.php");
require_once("models/sql.php");

class SessionController {

private static $login_status;
private static $redirect_url;
public static $form_action;

## Getters ##

private static function get_loginstatus() {return self::$login_status;}

## Setters ##

private static function set_loginstatus($in_str) {self::$login_status = $in_str;}

## Functions ##

public static function validate_user() {

    UserAccount::set_username($_REQUEST['txt-username']);  
    UserAccount::set_password($_REQUEST['txt-password']);  

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        // Does user exist?
        $query = "SELECT COUNT(UserName) FROM tblusers WHERE UserName = :in_username";

        $stmt = $dbh->prepare($query);

        $param = Filter::san_str_html(UserAccount::get_username());

        $stmt->bindParam(':in_username', $param, PDO::PARAM_STR);   

        $stmt->execute();

        $number_of_rows = $stmt->fetchColumn(); 

        $stmt->closeCursor();

        if ($number_of_rows <= 0) {

            self::set_loginstatus("The user does not exist in our database, please try again.");
            $_SESSION['login-status'] = self::get_loginstatus();
            self::redirect(false);

        } else {

            // User verified, check password...
            self::verify_password();

        }

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage());
    }

    $pdo = null;

}

private static function verify_password() {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        // Does the password given match the password held?
        $query = "SELECT COUNT(*) FROM tblusers WHERE UserName = :in_username AND Password = :in_password";

        $stmt = $dbh->prepare($query);

        $param1 = UserAccount::get_password();
        $param2 = Filter::san_str_html(UserAccount::get_username());

        $stmt->bindParam(':in_username', $param2, PDO::PARAM_STR);
        $stmt->bindParam(':in_password', $param1, PDO::PARAM_STR);      

        $stmt->execute();

        $number_of_rows = $stmt->fetchColumn(); 

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage());
    }

    $pdo = null;

    if ($number_of_rows == 1) {

        $_SESSION['username'] = UserAccount::get_username();

        // Begin verification.. 
        self::set_useraccount(true);

    } else {

        self::set_loginstatus("Verification failed! Password incorrect, please try again.");
        $_SESSION['login-status'] = self::get_loginstatus();
        self::redirect(false);

    }

}

private static function verify_account() { 

    // Account types: 9 = Disabled, 0 = Normal/Restricted, 1 = Administrative
    if (UserAccount::get_accounttype() == 9) {
        self::set_loginstatus("Verification failed! This account has been disabled."); ## Account disabled
        $_SESSION['login-status'] = self::get_loginstatus();
        self::redirect(false);

    } else 

        // User login types: 9 = Disabled, 0 = Normal/Restricted, 1 = Administrative
        if (UserAccount::get_usertype() == 9) {
            self::set_loginstatus("Verification failed! This login has been disabled."); ## User login disabled
            $_SESSION['login-status'] = self::get_loginstatus();
            self::redirect(false);

        } else {

            // Set redirect url here
            if (UserAccount::get_accounttype() == 1) {
                self::$redirect_url = 'controlpanel.php';
            }

            if (UserAccount::get_accounttype() == 0 && UserAccount::get_usertype() == 1) {
                self::$redirect_url = 'controlpanel.php';
            }

            if (UserAccount::get_accounttype() == 0 && UserAccount::get_usertype() == 0) {
                self::$redirect_url = 'newbooking.php';
            }

            // All ok, set user and account properties
            return true;

        }

}

public static function set_useraccount($redirect_bool) {

    // If username session is set...
    if (isset($_SESSION['username'])) {

        UserAccount::set_username($_SESSION['username']);

        // Query Database for the rest of the data
        $pdo = new SQL();
        $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

        try {

            $query = "SELECT AccountName 
                      FROM tblusers 
                      WHERE UserName = :in_username";

            $stmt = $dbh->prepare($query);

            $param1 = UserAccount::get_username();

            $stmt->bindParam(':in_username', $param1, PDO::PARAM_STR);

            $stmt->execute();

            // Parse
            $row = $stmt->fetch(PDO::FETCH_BOTH);

            $stmt->closeCursor();

        }

        catch (PDOException $pe) {
            die("Error: " .$pe->getMessage());
        }   

        UserAccount::set_accountname($row['AccountName']);

        try {

            $query = "SELECT a.Id, a.AccountName, a.AccountNumber, a.AccountEmail, a.AccountTel, 
                             a.AccountContact, a.AccountType, a.PaymentType, u.UserName, 
                             u.FullName, u.UserEmail, u.UserTel, u.UserType
                      FROM tblaccounts a JOIN tblusers u 
                      ON a.AccountName = u.AccountName
                      WHERE a.AccountName = :in_accname
                      AND u.UserName = :in_username";

            $stmt = $dbh->prepare($query);

            $param2 = UserAccount::get_accountname();
            $param3 = UserAccount::get_username();

            $stmt->bindParam(':in_accname', $param2, PDO::PARAM_STR);       
            $stmt->bindParam(':in_username', $param3, PDO::PARAM_STR);

            $stmt->execute();

            // Parse
            $row = $stmt->fetch(PDO::FETCH_BOTH);

        }

        catch (PDOException $pe) {
            die("Error: " .$pe->getMessage());
        }   

        // Set properties and sessions variables
        UserAccount::set_id($row['Id']);
        UserAccount::set_accountname($row['AccountName']);
        UserAccount::set_accountnumber($row['AccountNumber']);
        UserAccount::set_accountemail($row['AccountEmail']);
        UserAccount::set_fullname($row['FullName']);
        UserAccount::set_accounttel($row['AccountTel']);
        UserAccount::set_accountcontact($row['AccountContact']);
        UserAccount::set_accounttype((int)$row['AccountType']);
        UserAccount::set_paymenttype((int)$row['PaymentType']);
        UserAccount::set_useremail($row['UserEmail']);
        UserAccount::set_usertel($row['UserTel']);
        UserAccount::set_usertype((int)$row['UserType']);

        if (self::verify_account()) {

            switch (UserAccount::get_paymenttype()) {
                case 0:
                $_SESSION['ua-paymenttype-asstr'] = 'Credit/Debit Card';
                self::$form_action = 'addressdetails.php';
                break;
                case 1:
                $_SESSION['ua-paymenttype-asstr'] = 'Account';
                self::$form_action = 'makebooking.php';
                break;
                case 2:
                $_SESSION['ua-paymenttype-asstr'] = 'Cash';
                self::$form_action = 'makebooking.php';
                break;
            }

            switch (UserAccount::get_usertype()) {
                case 9:
                $_SESSION['ua-usertype-asstr'] = 'Disabled/Suspended';
                break;
                case 0:
                $_SESSION['ua-usertype-asstr'] = 'Standard';
                break;
                case 1:
                $_SESSION['ua-usertype-asstr'] = 'Account Administrator';
                break;
            }

            switch (UserAccount::get_accounttype()) {
                case 9:
                $_SESSION['ua-accounttype-asstr'] = 'Disabled/Suspended';
                break;
                case 0:
                $_SESSION['ua-accounttype-asstr'] = '  ';
                break;
                case 1:
                $_SESSION['ua-accounttype-asstr'] = '(SA)';
                break;
            }

            // Redirect
            if ($redirect_bool) {
                self::redirect(true);
            }

        }

    } else {

        self::set_loginstatus("Pre-requisite failure! Browser not supporting cookies!");
        $_SESSION['login-status'] = self::get_loginstatus();

        self::redirect(false);

    }

}

private static function redirect($auth_bool) {

    //parent::set_sessionstate(true); ## Set session to active -- persistance to DB

    //self::$determine_session_type(); ## Set session type --  persistance to DB

    if ($auth_bool == true) {

        $doc_root = $_SERVER['DOCUMENT_ROOT'];
        self::set_loginstatus('');
        $_SESSION['login-status'] = self::get_loginstatus();

        header("Location: ".self::$redirect_url);

    } else {

        header("Location: login.php");

    }

}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:24:29.070

我不确定，因为您没有显示实际的登录/注销代码，但也许您没有正确销毁会话？

```
session_start();
session_destroy(); 
```

编辑：没关系，我想我可能误读了你的问题。

# c# - 使用 LINQ 和 CRM 选择 Distinct

> ID：10917136
> 
> 赞同：2
> 
> 时间：2012-06-06T15:14:34.703
> 
> 标签：c#, linq, distinct

我正在尝试使用 LINQ to CRM 查询选择不同的集，它继续返回重复的记录。我正在使用的查询是：

```
 var linqQuery = (from r in gServiceContext.CreateQuery("opportunity")
                   join c in gServiceContext.CreateQuery("account") on ((EntityReference)r["accountid"]).Id equals c["accountid"]
                   join u in gServiceContext.CreateQuery("systemuser") on ((EntityReference)r["ownerid"]).Id equals u["systemuserid"]
                   where (r["statuscode"].Equals("100000004") || r["statuscode"].Equals("100000003")) && r["statecode"].Equals("Open")
                   where u["internalemailaddress"].Equals(_currentUser.Email)

                       select new
                           {
                                 AccountId = !c.Contains("accountid") ? string.Empty : c["accountid"],
                                 Account = !c.Contains("name") ? string.Empty : c["name"]
                             }).Distinct(); 
```

我错过了什么可以`.Distinct()`工作吗？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:37:16.220

使用指定的：http `IEqualityComparer<T>`: [//msdn.microsoft.com/en-us/library/bb356803](http://msdn.microsoft.com/en-us/library/bb356803)

另一件事，我不确定匿名类是否支持这些`IEqualityComparer<T>`实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:54:59.773

没有显式比较器的[`Distinct`](http://msdn.microsoft.com/en-us/library/bb299412)调用仅使用默认的相等比较器，在匿名类型的情况下归结为`Object.Equals`. 如果类型的所有属性都相等，则在匿名类型中将其覆盖为相等。在这种情况下，它将检查`AccountId`和`Account`属性。

我怀疑这是可行的，并且值在大小写方面是不同的（因为默认情况下字符串比较区分大小写），或者它们实际上是不同的，你只是看不到它。

幸运的是，它与特定于 CRM 的 Linq 提供商无关。

# jquery - 在某个点停止滚动

> ID：10917139
> 
> 赞同：3
> 
> 时间：2012-06-06T15:14:53.453
> 
> 标签：jquery

我正在尝试复制与[此类](http://jsfiddle.net/Tgm6Y/1/)似的内容。

当您向下滚动时，div 会随着您滚动 ( `position: fixed`) 直到它到达某个点并停止 ( `position: absolute`)，当您继续向下滚动时，它会保留页面上的该位置 ( `250px`)，直到您向上滚动以选择它再次备份。

[我到目前为止所拥有的](http://jsfiddle.net/JaJ5Q/)。

现在我的小提琴做了所有事情，除了它不保留它被“放下”的位置，而是回到原来的位置。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:31:48.860

您需要计算窗口的 scrollTop 值，然后将其应用为 top 的值并将位置设置为绝对值。

```
$('element').css({
    'top': $(window).scrollTop(),
    'position': 'absolute'
}); 
```

当你继续滚动时，scrollTop 值会改变，所以你只能这样做一次。使用变量来跟踪元素处于什么状态。据我所知，有三个：

1.  相对的
2.  固定的
3.  绝对

使用此变量，您还可以通过仅在需要时设置一个类来减少浏览器的压力。例如：

```
if( y > 100 && pos != 'fixed' ){

    pos = 'fixed';

    $('element').addClass('fixed');

}else if( y > 100 && pos != 'relative' ){

    pos = 'relative';

    $('element').addClass('relative');

} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:26:12.740

我做了以下更改：

```
if (y >= socialTop & y <= 150) {
    $('#static-social').addClass('fixed');
} else {
    $('#static-social').removeClass('fixed');
} 
```

到：

```
if (y >= socialTop & y <= 150) {
    $('#static-social').css('marginTop', $(this).scrollTop());
} 
```

这确保了元素根据窗口的位置停留在页面顶部，因此当您向上滚动时，它会留在原来的位置。

# ruby - 解决ruby中的迭代算法

> ID：10917142
> 
> 赞同：0
> 
> 时间：2012-06-06T15:15:17.523
> 
> 标签：ruby, algorithm, iteration

所以这让我很头疼，我显然不太擅长编程。我有，

```
LetterArray = [a,b,c,d,e,f,g]
NumArray = [1,2,3,4,5,6,7,8,9,10]
ListOfLetters = [] 
```

我想从`NumArray`and 中获取一个元素，从 开始，在 LetterArray 中`LetterArray[0]`增加 var的次数，然后添加该元素（比如 var到数组中。然后开始在 中增加下一个数字，依此类推。然后打印去安慰。`x``y``y``NumArray``ListOfLetters`

我的目标是输出是这样的：`[a, c, f, c, a, f, e, e, f, a]`.

我在如何在代码中解决这个问题上画了一个空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:23:46.377

像这样的东西（如果我当然满足您的要求）？

```
letter_array = %w[a b c d e f g]
number_array = [1,2,3,4,5,6,7,8,9,10]
list_of_letters = []

number_array.inject(0) do |offset, delta| 
  list_of_letters << letter_array[offset] 
  (offset + delta) % letter_array.size
end

p list_of_letters #=> ["a", "b", "d", "g", "d", "b", "a", "a", "b", "d"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:00:41.543

```
ar = ('a'..'g').to_a.cycle #keeps on cycling 
res = []
p 10.times.map do |n|
  n.times{ar.next} #cycle one time too short (the first time n is 0)
  res << ar.next #cycle once more and store
end
p res #=>["a", "c", "f", "c", "a", "g", "g", "a", "c", "f"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:46:00.180

要么我不理解您的问题描述，要么您显示的示例输出从某个点开始是错误的。无论如何，也许这会让你开始：

```
letter_array = [*?a..?g]
number_array = *1..10
list_of_letters = []

number_array.inject(0) do |s, n| 
  i = s + n
  list_of_letters << letter_array[i % letter_array.size - 1] 
  i 
end 
```

这将产生输出`["a", "c", "f", "c", "a", "g", "g", "a", "c", "f"]`。

或者，您也可以先创建索引然后使用它们（这不需要预初始化`list_of_letters`）：

```
indices = number_array.inject([]) { |a, n| a << (a.last || 0) + n ; a})
list_of_letters = indices.map { |i| letter_array[i%letter_array.size-1] } 
```

# c# - 正则表达式用于数字和打开和关闭圆括号

> ID：10917149
> 
> 赞同：0
> 
> 时间：2012-06-06T15:15:33.847
> 
> 标签：c#

我想要只接受数字格式的正则表达式，像这样（091）（022）（2）（123-4567）

这是我想在 C# 中使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:20:00.053

我会使用的正则表达式是这样的：

```
^(\([0-9-]+\))+$ 
```

此表达式将匹配所有内容，或不匹配。

要根据 C# 中的表达式测试字符串，它看起来像这样：

```
var str = "(091)(022)(2)(123-4567)";
var isMatch = Regex.IsMatch(str, @"^(\([0-9-]+\))+$"); 
```

# vba - 如何使用宏查找 MS Word 文档中的所有首字母缩略词？

> ID：10917155
> 
> 赞同：4
> 
> 时间：2012-06-06T15:16:00.383
> 
> 标签：vba, ms-word, acronym

我有一个包含许多首字母缩略词的文档，需要捕获这些首字母缩略词并将其放入文档末尾的首字母缩略词表中。

术语首字母缩写词具有多种含义。我想创建一个包含所有已初始化单词的表；两个或多个大写字母的缩写，表示较长的含义。即CD-ROM、USB、SYNC、MMR、ASCAP等。

我如何创建一个宏来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T16:06:14.253

这样的事情可能会让你开始。添加对“Microsoft VBScript 正则表达式”的引用（编辑宏：工具 > 引用）。该库是文件“vbscript.dll”。

如果您的所有首字母缩写词不仅仅是大写字母（例如，有些可能包含数字），您可能需要调整正则表达式。

```
Sub Acronyms()

    Dim dict, k, tmp
    Dim regEx, Match, Matches
    Dim rngRange As Range
    Set regEx = New RegExp
    Set dict = CreateObject("scripting.dictionary")

    regEx.Pattern = "[A-Z]{2,}" '2 or more upper-case letters
    regEx.IgnoreCase = False
    regEx.Global = True
    Set Matches = regEx.Execute(ActiveDocument.Range.Text)
    For Each Match In Matches
        tmp = Match.Value
        If Not dict.Exists(tmp) Then dict.Add tmp, 0
        dict(tmp) = dict(tmp) + 1
    Next

    For Each k In dict.Keys
        Debug.Print k, dict(k)
    Next k

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T08:39:43.907

谢谢蒂姆，你的代码很好用！

如果它对其他人有用，该模式`[A-Z]{1,}([a-z]*|\&|\.*)[A-Z]{1,}`会找到更多的首字母缩略词......

（我无权发表评论，因此将其添加为答案）

编辑（仍然无法添加注释）：`\b[A-Z]{1,}([a-z*]|\&|\.|\-)[A-Z]{1,}\b`更健壮，但如果首字母缩写词的最后一个字符不大写，则会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-23T07:27:37.543

我发现以下方法效果很好（可以容忍一些企业名称的首字母缩写词）。我用它来测试 Access 中的数据条目，它也应该适用于 Word 文档范围。

```
objRegExp.Pattern = "([A-Z]{1,}((\&(?![A-Z]\s[\w]{3})\w*)+|\.\w*)+)|[A-Z]{2,}(?![A-Z]*\s[A-Z]{1}[a-z])" 
```

*   J&K =匹配
*   JK&S =匹配
*   JSS =匹配
*   JK&S.K =匹配
*   JSK =匹配
*   JK =匹配
*   DKD And Sons =没有比赛
*   J&K Engineering =不匹配
*   PKF Rogers and Associates = 不匹配

我使用[RegExHero](http://regexhero.net/tester/)来测试我的表达

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-20T22:31:22.530

我使用以下内容在我的博士论文中查找缩写词。他们都在“（）”中。

```
regEx.Pattern = "\([A-Z]{1,}([a-z]*|\&|\.|\-*)[A-Z]{1,}\)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T17:23:43.787

您将在主 Word 文档上运行宏。打开一个单独的空白 Word 文档。这将用于存储发现的首字母缩略词。

1.  按“录制宏”。选择一个唯一的名称，并指定一个快捷键，例如 CTRL + ALT + A。
2.  打开查找对话框 (CTRL + F)。粘贴以下搜索文本： `<[A-Z]{2,}>.` 在“查找”对话框中，选择“更多”> 选中“使用通配符”复选框。单击查找下一个按钮。
3.  右键单击所选文本，注意不要更改突出显示。从上下文菜单中选择复制。
4.  导航到单独的 Word 文档（ALT + TAB，选择 Word 文档）。粘贴复制的文本，然后按 Enter。ALT + TAB 回到原来的 Word 文档。
5.  关闭查找对话框并单击右箭头一次。这会将光标从突出显示的文本上移开，并为下一次搜索做好准备。
6.  停止宏录制。

您现在有一个宏，它可以查找包含两个或多个大写字母的单词，并将文本保存到单独的文档中。要搜索剩余的首字母缩略词，请连续按 CTRL + ALT + A 直到到达文档末尾。或者，编辑宏，并添加 while 循环。

这是宏的样子（没有循环）：

```
Sub GetAcronyms()
    Selection.Find.ClearFormatting
    With Selection.Find
        .Text = "<[A-Z]{2,}>"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute
    Selection.Copy
    Windows("Document1.docx").Activate
    Selection.PasteAndFormat (wdPasteDefault)
    Selection.TypeParagraph
    Windows("TheOriginalDocument.docx").Activate
    Selection.MoveRight Unit:=wdCharacter, Count:=1
End Sub 
```

# ruby-on-rails - 获取facebook好友位置列表的最有效方法

> ID：10917158
> 
> 赞同：0
> 
> 时间：2012-06-06T15:16:18.717
> 
> 标签：ruby-on-rails, facebook

因此，似乎有多种方法可以获取有关 facebook 用户朋友的信息。我正在尝试获取特定 facebook 用户拥有的朋友列表的位置列表（纬度和经度坐标）。

这样做最有效的方法是什么？批量请求似乎是一种选择，但如果某人有 2,000 个朋友怎么办？

# html - HTML attribute tag identifier?

> ID：10917162
> 
> 赞同：1
> 
> 时间：2012-06-06T15:16:33.643
> 
> 标签：html

If for example, I have a tag: `<a href="#">Ex1</a>`, I want to identify what that tag is doing there. Title,class & id attributes aren't options as I use class&id for CSS and title displays text when hovered. So, is there any attribute to do that? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:19:00.220

Not really sure what your asking, but are you trying to apply meta-data as an attribute? If so, you can add more than one class (`class="one two three fourClasses"`), or use the [`data-`](http://ejohn.org/blog/html-5-data-attributes/) attribute.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:20:14.123

You can also use "data-[yourText]" as a cross-browser-safe attribute in any elements, and this often makes it nice to describe things because you can include more information in the custom data attribute value:

```
<a href="#" data-example="1">Ex1</a>
<a href="#" data-example="2">Ex2</a>
<a href="#" data-example="3">Ex3</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:17:50.687

What's wrong with `<!-- HTML comments -->` for annotations?

# math - 平面 3D 三角形网格到 2D

> ID：10917163
> 
> 赞同：0
> 
> 时间：2012-06-06T15:16:36.390
> 
> 标签：math, 3d, geometry

我有一组三角形沿着同一平面创建一个网格（想想一个房间的墙壁，它的三角形定义了几何形状）。我需要显示网格的 2D 表示，以便每个三角形 (x, y, z) 的每个点都转换为 (x, y)。我需要每个三角形具有完全相同的形状/面积，放置在其他三角形的相同相对位置。

已经有这样的答案可以解决如何像这样将 3D 三角形转换为 2D

[展平 3d 三角形](https://stackoverflow.com/questions/8051220/flattening-a-3d-triangle)

但他们需要将三角形的一个顶点设置为原点。我如何应用相同的想法，以便与其他三角形相比，我不需要将每个三角形放在正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:24:33.887

您可以使用相同的方法。只需选择一个点（第一个三角形的第一个顶点与任何一个顶点一样好）作为原点，并对网格中的所有点使用相同的值。

这应该以一致的方式改变它们。

# android - 未调用 BroadcastReceiver

> ID：10917166
> 
> 赞同：0
> 
> 时间：2012-06-06T15:17:03.283
> 
> 标签：android, android-intent

我必须按照以下代码调用 BroadcastReceiver：

```
 public class WorkItemAlarmManager {
    ...
        public void initAlarm(HelpMe helpMe, String delay,String period,WorkItem workItem){
            //HelpMe = Activity
helpMe.registerReceiver(new WorkItemAlarmHandler() , new IntentFilter("WORK_ITEM_ALARM"));

            Intent intent = new Intent("WORK_ITEM_ALARM");
            intent.setClass(helpMe, WorkItemAlarmManager.class);
            intent.putExtra("work_item", workItem);
            PendingIntent mAlarmSender = PendingIntent.getService(helpMe, 0,intent, 0);

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            //System.out.println("START"+System.currentTimeMillis());   
            calendar.add(Calendar.SECOND, calcDelayMillis(delay));
            //System.out.println("END"+calendar.getTimeInMillis());
            AlarmManager am = (AlarmManager) helpMe.getSystemService(Context.ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), mAlarmSender);
        }
    ...
    } 
```

和广播接收器：

```
public class WorkItemAlarmHandler extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        ....
    }

} 
```

但是 WorkItemAlarmHandler 永远不会被调用。

更新：我首先尝试在清单中注册广播接收器。但这没有用：

```
<receiver
            android:name="de.helpme.alarm.WorkItemAlarmHandler"
            android:enabled="true"
            android:label="WorkItemAlarmHandler" >
            <intent-filter>
                <action android:name="WORK_ITEM_ALARM" />
            </intent-filter>
        </receiver> 
```

感谢您的回答:)。现在它可以工作了——但我还不知道哪个是正确的，因为我同时实现了两个答案。如果确定哪个是正确的，我将正确标记为答案。

**更新：** 我认为问题的原因是：

```
PendingIntent mAlarmSender = PendingIntent.getService(helpMe, 0,intent, 0); 
```

使用此代码可以正常工作：

```
PendingIntent mAlarmSender = PendingIntent.getBroadcast(helpMe, 0, intent, 0); 
```

再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:39:09.773

试试这个 ：

在 WorkItemAlarmManager 中；

```
public class WorkItemAlarmManager {
    ...
        public void initAlarm(HelpMe helpMe, String delay,String period,WorkItem workItem){
            Intent intent =new Intent(helpMe, WorkItemAlarmHandler.class);
            intent.setAction("WORK_ITEM_ALARM");
            intent.putExtra("work_item", workItem);
            PendingIntent mAlarmSender=
            PendingIntent.getBroadcast(helpMe, 0, intent, 0);
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            //System.out.println("START"+System.currentTimeMillis());   
            calendar.add(Calendar.SECOND, calcDelayMillis(delay));
            //System.out.println("END"+calendar.getTimeInMillis());
            AlarmManager am = (AlarmManager) helpMe.getSystemService(Context.ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), mAlarmSender);
        }
    ...
    } 
```

在 WorkItemAlarmHandler 中：

```
public class WorkItemAlarmHandler extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals("WORK_ITEM_ALARM")){
            Toast.makeText(context, "WORK_ITEM_ALARM", Toast.LENGTH_LONG).show();
            }else{
            Toast.makeText(context, "repeating alarm",
            Toast.LENGTH_LONG).show();
            }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:46:39.023

您的代码使用：

```
intent.setClass(helpMe, WorkItemAlarmManager.class); 
```

但是使用 setClass(...) 方法，您可以指定最终应该处理意图的类。

因此你应该写：

```
intent.setClass(helpMe, WorkItemAlarmHandler.class); 
```

据我记得，如果您手动指定类或组件（例如使用 setClass() 方法），则必须在清单中指定此对象，因此请确保在此处提及接收者。

# php - PHP：迭代数组以填充选择

> ID：10917167
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:17:06.983
> 
> 标签：php, arrays, forms, multidimensional-array

对不起，如果这太明显了，但我正在学习如何处理数组，我完全被卡住了，不能继续:(

具有以下数组：

```
$myarray: array =
0:array=
 0:string=-
 1:string=-
1:array=
 0:string=AA1
 1:string=Book title 1
 2:string=Author 1
2:array=
 0:string=AA2 
 1:string=Book title 2
 2:string=Author2
.
. 
```

我需要在 html 表单中构建一个选择，以这种方式填充它：

```
<select id="bookTitles">
<option value="-" selected="selected">Select..</option>
<option value="AA1"> Book title 1</option> 
<option value="AA2"> Book title 2</option> 
.
.
   </select> 
```

我怎样才能循环`$myarray`这样做？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:21:04.523

试试这个：

```
<select name = "theSelect">
<option value = "-" selected = "selected">Select...</option>
<?php
    array_shift($myarray); // take off the first element that is empty
    foreach( $myarray as $k => $v) {
        echo('<option value = "' . $v[0] . '">' . $v[1] . '</option>');
    }
?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:22:37.683

```
<select id="bookTitles">
    <option value="-" selected="selected">Select..</option>
    <?php foreach ($myarray as $value) : ?>
        <option value="<?php echo $value[0]; ?>"> <?php echo $value[1]; ?></option> 
    <?php endforeach; ?>
</select> 
```

几点注意事项：

*   我正在使用 foreach() 循环遍历数组
*   我使用`:`and`endforeach;`而不是`{`and`}`因为它在输出 HTML 时通常看起来更干净
*   我在循环之前添加了默认选项，因为...好吧，为什么不呢？
*   或者，您可以使用短标签，如下所示：（`<?=$value[0]?>`在[此处阅读更多信息](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)）

# disassembly - 如何拆卸 AMD ELF？

> ID：10917168
> 
> 赞同：0
> 
> 时间：2012-06-06T15:17:12.700
> 
> 标签：disassembly

我尝试使用 objdump 反汇编 AMD ELF。
但是 objdump 说“文件格式无法识别”。
如何在 x86 操作系统上反汇编 AMD ELF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T01:39:26.820

您是在谈论 AMD64（又名 x86_64）二进制文件吗？你正在运行什么样的操作系统？我假设是 Linux，因为您使用的是“objdump”，但也许是另一个 UNIX 变体？什么类型的CPU？如果您使用的是 Linux，请运行“uname -a”并将结果发布在此问题中。另外，什么发行版（'cat /etc/issue' 找出来）？

我最好的猜测是您正在运行一个不支持 x86_64 二进制文件的 32 位 x86 Linux 发行版（我只是尝试在我的 x86_32 Ubuntu 11.04 发行版上反汇编一个 x86_64 二进制文件，它运行良好）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T00:48:38.947

您可以使用此工具[http://www.onlinedisassembler.com/odaweb/file_upload](http://www.onlinedisassembler.com/odaweb/file_upload)为几乎任何体系结构反汇编文件。

# java - main方法可以放在父类中吗？如果是这样，可以在该主要方法中实例化子对象吗？

> ID：10917171
> 
> 赞同：0
> 
> 时间：2012-06-06T15:17:15.360
> 
> 标签：java, inheritance, subclass, main-method

假设我有一个类'Person'和另一个类'Survey'，它扩展了person，所以Survey是子类，Person类是父类。Person 是我编写的第一个类，因此现在在那里定义了 main 方法，因为我有一个子类，我可以从父类中的 main 方法调用子类的方法吗（或者我是否需要继续将 main 方法转移到尽管我确信这永远不会是必要的，但在等级制度中最低的阶级......）？如果是这样，这是否与子类继承父类的属性但父类不继承子类的任何属性的概念相悖？请务必回复。提前致谢。

此外，我还阅读了另一篇文章，其中有一个单独的类可能是 'driver.java 仅用于主方法，这是否意味着所有类都必须导入到这个类中才能让我们在主方法中调用其他类的方法？

我希望我的问题不会太复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:21:20.887

让我给你解释一下，

1.  当您通过调用创建子类的实例时`new`，`sub class type`然后调用`immediately`它`Super class constructor is called`，并且它保留`going till`了`Object class`，这被称为`Constructor chaining`。

2.  都是`instance variable`在`declared and initialized`这个过程中。

3.  是当它调用它的子类的构造函数时，`most important`它会转到它的超类，依此类推，直到 Object 类，然后`1st creating the Object class object`，`then the class under`它`till it reaches the subclass on whose class new was called`，你会看到`constructor of the super class is called first then its subclass's`

对于您的上述问题，我还创建了一个示例，该示例与我给出的理论解释相吻合。

例如：

```
 public class a {
    public static void main(String[] args) {

        B b = new B();
        b.go();
    }
}

class B extends a{

    public void go(){

        System.out.println("hello");

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:04:33.840

好吧，我试过了，即使我把 main 方法放在父类中，它也能正常工作。但是我已经做了一些阅读，观察到的做法是在一个单独的类中创建 main 方法，这样该类中只有 main 方法而没有其他方法。这在某些情况下提高了效率，并且是一种更清洁的方式。

# java - 字符串和字符数组之间的内存有什么不同？

> ID：10917172
> 
> 赞同：-5
> 
> 时间：2012-06-06T15:17:16.210
> 
> 标签：java

`str`第一行和第二行引用的内容有什么不同？

```
char[] str={'A','B','C'}; 
```

对比

```
String str= new String("ABC"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:18:43.910

一个是原语数组。

另一个是具有有用功能的完整对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:19:44.203

简单来说，

`String str= new String("ABC");` String 是表示字符序列的不可变对象（其值不能更改）。它具有有用的字符串操作方法（indexOf、split 等）

`char str[]={'A','B','C'};` 一个字符数组就是这样：一个字符数组。它具有固定长度，您可以根据需要更改其内容。它没有任何字符串操作方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:20:07.933

```
char str[]={'A','B','C'}; 
```

这是一个长度为三个元素的字符数组

```
String str= new String("ABC"); 
```

这是一个`String`具有可以在其上调用的有用方法的对象。

# java - 如何在 Java 中计算循环标准差？

> ID：10917173
> 
> 赞同：0
> 
> 时间：2012-06-06T15:17:17.043
> 
> 标签：java, statistics

我发现了一些关于循环统计的平均值和标准差的信息。即，[维基百科](http://en.wikipedia.org/wiki/Directional_statistics)

但是我不清楚如何用 Java 编写代码。

对于循环平均值，我尝试过类似的方法：

```
for double radian : radians then
    cos += Math.cos(radian)
    sin += Math.sin(radian)
next

atan2 = Math.atan2(cos, sin)

if atan2 < 0 then
    atan2 += 2 * PI
end if

mean = Math.toDegrees(atan2) % 360 
```

这似乎给了我一个整洁的结果，但对于标准偏差我很不清楚。

任何帮助，将不胜感激。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:46:31.547

首先：Jeffrey 是对的，在取 atan2 之前，您必须将 cos 和 sin 除以值的数量！

关于标准偏差：您可能想查看以下论文（CircStat：A MATLAB Toolbox for Circular Statistics，Journal of Statistical Software 2009），该论文描述了用于循环统计的 matlab 工具箱（用于科学研究）。即使您不知道 matlab，该论文也给出了许多基础方程，包括圆形标准偏差。

[http://kyb.mpg.de/fileadmin/user_upload/files/publications/attachments/J-Stat-Softw-2009-Berens_6037%5b0%5d.pdf](http://kyb.mpg.de/fileadmin/user_upload/files/publications/attachments/J-Stat-Softw-2009-Berens_6037%5b0%5d.pdf)

干杯，

科尼利厄斯

# jquery - 计算选中的复选框数

> ID：10917177
> 
> 赞同：2
> 
> 时间：2012-06-06T15:17:38.067
> 
> 标签：jquery

我有一些这样的 HTML：

```
<div id="SomeID">
 <div class="Wrapper">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
 </div>

 <div class="Wrapper">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
 </div>
</div> 
```

当用户单击一个复选框时，我想清除父 Wrapper div 中的所有相邻复选框。基本上，我只希望在任何给定时间为每个 Wrapper 选择一个 SomeCheckboxClass。现在，我写了这个：

```
$('#SomeID').on({

   change: function () {

        if ($(this).attr('checked') === 'checked') {

        var TheIndex = $(this).index();

        $(this).parent().find('.SomeCheckboxClass').each(function () {

            if ($(this).index() !== TheIndex) {
                $(this).attr('checked', false);
            }
        });
      }
   }
}, '.SomeCheckboxClass'); 
```

有更简单的方法吗？在花了一些时间之后，我认为必须有一个更简单的方法。请注意，HTML 是在运行时生成的。让我知道是否有更容易/更好/更快的方法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:20:14.643

您可以使用[兄弟姐妹（）](http://api.jquery.com/siblings/)：

```
var $this = $(this);
if ($this.is(":checked")) {
    $this.siblings().prop("checked", false);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:20:38.190

无需计数：

```
​$(":checkbox").on("change", function(){
    this.checked && $(this).siblings().prop("checked", false); 
});​​​​​​​​​​​​​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/82QcL/2/](http://jsfiddle.net/jonathansampson/82QcL/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:19:26.660

正如您的问题标题所询问的那样，以下将为您提供所选复选框的计数：

```
$("#SomeID .Wrapper input.SomeCheckboxClass:checked").length 
```

[http://jsfiddle.net/d9KcH/](http://jsfiddle.net/d9KcH/)

但是，正如[@dunsmoreb](https://stackoverflow.com/a/10917217/370103)所建议的那样，您应该使用单选按钮列表来获得这种功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T15:19:46.270

您似乎正在尝试复制单选按钮的功能。单选按钮一次只允许检查一个值。这是一个例子。

```
<input type="radio" name="group1" value="Hello">
<input type="radio" name="group1" value="Hey">
<input type="radio" name="group1" value="Yo"> 
```

每个组只能选择一个按钮，该按钮在名称中指定。

**注意：**如果您想要看起来像复选框的单选按钮，那么[这个答案](https://stackoverflow.com/a/8079482/672118)会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T15:20:58.643

这是一个快速尝试：

```
if($(this).is(':checked')) {
  $(this).parent().find('.SomeCheckboxClass').not(this).attr('checked', false);
} 
```

你可能需要稍微调整一下。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-06T15:21:00.083

```
$('#SomeID').on({
   change: function() {
      if(this.checked){
         $(this).siblings(':checkbox').prop('checked', false);
      }
  }
}, '.SomeCheckboxClass'); 
```

**[演示 1](http://jsfiddle.net/thecodeparadox/yLBMU/1/)**

但是，如果您想取消选中所有复选框，那么

```
$('#SomeID').on({
   change: function() {
       $('.SomeCheckboxClass:checkbox').not(this).prop('checked', false);
  }
}, '.SomeCheckboxClass'); 
```

**[演示 2](http://jsfiddle.net/thecodeparadox/yLBMU/)**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-06T15:21:32.847

我喜欢将选择与检查复选框是否被选中的行为分开。我认为读起来更好：

```
$("input[type=checkbox]").is(":checked").length; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-06T15:22:24.150

尝试如下，

```
$('#SomeID').on({
   change: function () {
      if (this.checked) {
        $(this)              
          .siblings('.SomeCheckboxClass')
          .prop('checked', false);
      }
   }
}, '.SomeCheckboxClass'); 
```

**演示：http:** [//jsfiddle.net/82QcL/3/](http://jsfiddle.net/82QcL/3/)

# css - IE6“自动”添加背景颜色？

> ID：10917183
> 
> 赞同：-2
> 
> 时间：2012-06-06T15:17:57.067
> 
> 标签：css, cross-browser, internet-explorer-6

我遇到了一个在**IE6**中遇到的 css 问题。

该类`.ci_title`奇怪地显示灰色背景颜色，而在 Chrome、FF 和其他现代浏览器中它是透明的。

我添加`background-color:transparent`了，`.ci_title`但它不起作用。

css 规则位于[该文件](http://s2.pinglun.la/md/css/cb_base.css)的**第 322 行**。

这是[演示](http://www.pinglunla.com/comment_box?url=http%3A%2F%2Fwww.pinglunla.com%2Fdemo&pt=%E6%8F%90%E5%8D%87%E7%BD%91%E7%AB%99%E4%BA%BA%E6%B0%94%20%E7%A4%BE%E4%BC%9A%E5%8C%96%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E8%AF%84%E8%AE%BA%E5%95%A6%20-%20%E8%AF%84%E8%AE%BA%)链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:26:14.193

IE6 本身不处理透明度。这些人将帮助您提高透明度： http: [//www.twinhelix.com/css/iepngfix/](http://www.twinhelix.com/css/iepngfix/)

根据您要执行的操作，您可以添加`background-color: none;`。

# php - 由于某种原因，我在尝试使用 php 运行 HandBrakeCLI 时遇到问题

> ID：10917184
> 
> 赞同：1
> 
> 时间：2012-06-06T15:17:57.793
> 
> 标签：php, shell, scripting, exec, command-line-interface

这个简单的脚本：

```
<?php
        $cmd='./HandBrakeCLI -i ./a.flv -o ./ab.mkv';
        echo exec($cmd.'&');
?> 
```

输出：编码：任务 1 of 1, 0.46 %

或者类似的低百分比并且不产生真正的输出文件。

# php - 在 Mac OSX 上设置 localhost 邮件服务器

> ID：10917191
> 
> 赞同：2
> 
> 时间：2012-06-06T15:18:18.853
> 
> 标签：php, email, osx-snow-leopard, localhost

我希望能够在我的 Mac 上测试需要通过电子邮件发送注册信息等的 php webapp。我下载了一个 CommuniGate Pro 版本。我需要邮寄到本地主机内部或外部（以最佳者为准）的帐户。同样，这将用于测试目的，以在上传到托管服务之前验证和调试我的代码。任何想法、帮助和/或示例将不胜感激。如果它更容易，我可以转到 Windows XP。这只是意味着设置 wamp 并通过 Dropbox 从 mac 端传输我的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:08:41.453

以下教程将帮助您在 Mail.app 中查看本地 Web 应用程序发送的电子邮件

[http://traumwind.de/tindertraum/archives/local_mail_osx.html](http://traumwind.de/tindertraum/archives/local_mail_osx.html)

# java - Hibernate saveOrUpdate() 在应该更新时尝试保存

> ID：10917192
> 
> 赞同：6
> 
> 时间：2012-06-06T15:18:18.820
> 
> 标签：java, hibernate

我有一个名为 IssueParticipant 的 Hibernate 实体。它基本上描述了用户和问题之间的关系（类似于 JIRA 或 Bugzilla 问题）。它表示数据库中的一种多对多链接表，将用户 ID 链接到问题 ID，但还包含与通知设置相关的其他信息，因此它被视为自己的实体。

我在使用 userId 和 issueId 作为复合键时遇到了很大的问题，所以我创建了一个合成键，它是一个字符串（以及 postgres 数据库中的一个 varchar），其格式为：_。

现在，我有一个屏幕，用户可以在其中编辑与问题关联的所有用户，同时还可以编辑通知设置。在控制器类中，我创建了一个 IssueParticipants 列表，如下所示：

```
IssueParticipant participant = new IssueParticipant();
participant.setUser(accountUser);
participant.setIssue(issue); 
```

所以这些当然不是由 Hibernate 管理的。

然后在我的 DAO 中，我遍历它们并调用 saveOrUpdate()，期望如果数据库中存在具有相同合成密钥的 IssueParticipant，它将更新；否则将被插入：

```
 for (IssueParticipant participant : participants) {
        getCurrentSession().saveOrUpdate(participant);
        savedIds.add(participant.getIssueUserKey());
    } 
```

（savedIds 是我正在维护的一个列表，以便我以后知道应该从数据库中删除哪些 IssueParticipants）。

但是，我得到了一个例外，而不是我所期望的：

```
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "issue_participant_pkey" 
```

这是我的实体类，缩写：

```
public class IssueParticipant extends Entity {

    private String issueUserKey;
    private Long issueId;
    private Long userId;

     // Edit: adding 'dateAdded' definition
    private Date dateAdded;
// ...

    // below may be null
    private SPUser user;
    private Issue issue;

    public static IssueParticipant nulledIssueParticipant() {
        IssueParticipant ip = new IssueParticipant();
        return ip;
    }
    public String getIssueUserKey() {
        return issueUserKey;
    }

    public void setIssueUserKey(String issueUserKey) {
        this.issueUserKey = issueUserKey;
    }

    public Long getId() {
        // currently meaningless
        return 0L;
    }

    public Long getIssueId() {
        return this.issueId;
    }

    public void setIssueId(Long issueId) {
        this.issueId = issueId;
        updateKey();
    }

    public Long getUserId() {
        return this.userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
        updateKey();
    }

    private void updateKey() {
        issueUserKey = getIssueId() + KEY_SEP + getUserId();
    }

    public SPUser getUser() {
        return user;
    }

    public void setUser(SPUser user) {
        this.user = user;
        setUserId(user.getId());
    }

    public Issue getIssue() {
        return issue;
    }

    public void setIssue(Issue issue) {
        this.issue = issue;
        setIssueId(issue.getId());
    }

// edit: adding 'dateAdded' methods
public Date getDateAdded() {
    return dateAdded;
}

public void setDateAdded(Date dateAdded) {
    this.dateAdded = dateAdded;
}

...

} 
```

这是它的 hbm 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping default-lazy="false">
    <class name="com.xxx.yyy.IssueParticipant" table="issue_participant">
        <id name="issueUserKey" column="issue_user_key" type="string">
            <generator class="assigned"/>
        </id> 
        <version name="dateAdded" column="date_added" type="timestamp" unsaved-value="null" />
        <property name="issueId" column="issue_id" />
        <many-to-one name="user" column="user_id" class="com.xxx.yyy.SPUser" not-null="true" cascade="none" />
        <property name="alertRss" column="alert_rss" type="boolean" />
        <property name="alertEmail" column="alert_email" type="boolean" />
        <property name="alertWeb" column="alert_web" type="boolean" />
        <property name="alertClient" column="alert_client" type="boolean" />

    </class>
</hibernate-mapping> 
```

而且确实`user_issue_key`是对应数据库表中的主键。

我觉得正确的解决方案可能只是`SpringJDBC`在这种情况下使用，但我真的很想弄清楚这里发生了什么。有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T15:35:57.207

`saveOrUpdate()`不查询数据库来决定是否应该保存或更新给定的实体。它根据实体的状态做出该决定，如下所示：

> *   如果对象已在此会话中持久存在，则不执行任何操作
> *   如果与会话关联的另一个对象具有相同的标识符，则抛出异常
> *   如果对象没有标识符属性，则保存（）它
> *   如果对象的标识符具有分配给新实例化对象的值，则保存（）它
> *   如果对象由 <version> 或 <timestamp> 进行版本控制，并且 version 属性值与分配给新实例化对象的值相同，则 save() 它
> *   否则更新（）对象

因此，据我了解，您的情况决定是基于`dateAdded`字段的值，因此您需要保留它以区分新实例和分离实例。

**也可以看看：**

*   [11.7。自动状态检测](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-saveorupdate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:20:17.903

如果你真的想的话，你可以让它查询数据库来做出这个决定。将您的标识符映射更改为：

```
<id name="issueUserKey" column="issue_user_key" type="string" unsaved-value="undefined">
    <generator class="assigned"/>
</id> 
```

通常这不是最好的方法。实际上，您确实有一个`<version/>`映射，它通常是标识符的更好后备，用于在保存/更新之间做出决定，而无需查询数据库的开销。您尝试将其设置为`unsaved-value="null"`. 但是您没有显示您的 IssueParticipant.dateAdded 属性的属性映射（这是您尝试映射的内容`<version/>`；您确实意识到版本在每次更新时都会增加，对吗？而且，您确实知道`<timestamp/>`而不是`<version/>`正确的？）。无论如何，这就是你的问题所在。你能显示你的 IssueParticipant.dateAdded 属性的定义吗？

# c++ - 传感器数据的转换

> ID：10917197
> 
> 赞同：0
> 
> 时间：2012-06-06T15:18:37.013
> 
> 标签：c++, rotation, android-sensors, coordinate-transformation

我想转换这些数据（有人告诉我从对象的角度来做）。数据列表如下：

*   `[0, -20.790001, -4.49]`组成加速度 xyz 坐标 - `accel(x,y,z)`。

*   `[-0.762739, -3.364226, -8.962189]`组成角度 xyz 坐标 - `angle(x,y,z)`。

我正在尝试使用 Rodrigues 的旋转公式或线性变换矩阵进行旋转？这与传感器数据不同吗？
我能够从中读取数据`.csv`，但不确定如何转换为 C++ 以及如何在 C++ 中创建矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:08:19.627

只要你有数据转换的公式，你只需要应用它。至于矩阵和创建一个，有多种方法，或者使用双数组：

```
float matrix[][] ( or matrix** if you want to use pointers ) 
```

或使用包含行和列的类（或结构，由您决定）

```
class Matrix
  float rows[]
  float columns[] 
```

祝你好运！

注意：显然，只是伪代码肯定不会开箱即用

# internet-explorer-8 - 无法在 Internet Explorer 上禁用证书吊销（证书过期）

> ID：10917201
> 
> 赞同：0
> 
> 时间：2012-06-06T15:18:55.050
> 
> 标签：internet-explorer-8, webdriver

显然，我用于使用 Selenium Webdriver 进行自动化测试的站点上有一个过期的证书。我尝试在 Internet 设置中禁用证书吊销，并重新启动 IE（以及 Windows，为了安全起见），但无济于事。

我还尝试使用 Webdriver 浏览警告页面，但也没有成功。由于某种原因，它无法检测到页面上的“继续”按钮，无论是使用 xpath 还是内置的“By.id”定位机制。我愿意使用 WebDriver 解决此问题，但我更喜欢允许我禁用证书吊销的解决方案。除了在 VM 上进行自动化测试之外，我不会将 IE 用于其他任何事情，所以我不担心安全问题。

万一WebDriver是唯一的选择，这里是页面的源代码

```
<HTML dir=ltr><HEAD><TITLE>Certificate Error: Navigation Blocked</TITLE><LINK rel=stylesheet type=text/css href="ErrorPageTemplate.css">
<META name=MS.LOCALE content=EN-US>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<META content=Yes http-equiv=MSThemeCompatible>
<SCRIPT language=javascript type=text/javascript src="errorPageStrings.js">
</SCRIPT>

<SCRIPT language=javascript type=text/javascript src="httpErrorPagesScripts.js">
</SCRIPT>

<SCRIPT language=javascript type=text/javascript src="invalidcert.js">
</SCRIPT>
</HEAD>
<BODY class=securityError onload="BodyLoad(); initMoreInfo('infoBlockID');">
<TABLE border=0 cellSpacing=0 cellPadding=0 width=730><!-- Main title -->
<TBODY>
<TR>
<TD id=shieldIconAlign vAlign=top rowSpan=3 width=60 align=left><IMG id=shieldIcon alt="Shield icon" src="red_shield_48.png"> </TD>
<TD id=mainTitleAlign vAlign=center width=* align=left>
<H1 id=mainTitle>There is a problem with this website's security certificate.</H1></TD></TR>
<TR>
<TD>
<H3>
<DIV id=linkdiv name="linkdiv"></DIV></H3></TD></TR>
<TR><!-- This row is for the the divider-->
<TD id=errorCodeAlign class=errorCodeAndDivider align=right>&nbsp; 
<DIV class=divider></DIV></TD></TR><!-- Error Body -->
<TR>
<TD></TD>
<TD>
<H3>
<DIV style="DISPLAY: none" id=CertUnknownCA name="CertUnknownCA"></DIV>
<DIV style="DISPLAY: block" id=CertExpired name="CertExpired">The security certificate presented by this website has expired or is not yet valid.</DIV>
<DIV style="DISPLAY: block" id=CertCNMismatch name="CertCNMismatch">The security certificate presented by this website was issued for a different website's address.</DIV>
<DIV style="DISPLAY: none" id=CertRevoked name="CertRevoked"></DIV><NOSCRIPT id=securityCert1></NOSCRIPT><BR><ID id=securityCert2>Security certificate problems may indicate an attempt to fool you or intercept any data you send to the server.</ID> </H3></TD></TR><!-- Recommendation-->
<TR>
<TD>&nbsp;</TD>
<TD>
<H2 id=recommendation><B>We recommend that you close this webpage and do not continue to this website. </B></H2></TD></TR><!-- close webpage-->
<TR>
<TD>&nbsp;</TD>
<TD id=closeWebpageAlign vAlign=center align=left>
<H4 id=closeWebpage><IMG class=actionIcon border=0 alt="Recommended icon" src="green_shield.png"><A href="javascript:closePage()">Click here to close this webpage.</A> </H4></TD></TR><!-- continue to site-->
<TR>
<TD>&nbsp;</TD>
<TD id=continueToSiteAlign vAlign=center align=left>
<H4 id=continueToSite><IMG id=ImgOverride class=actionIcon border=0 alt="Not recommended icon" src="red_shield.png"><A id=overridelink href="<href>" name=overridelink>Continue to this website (not recommended).</A> </H4></TD></TR><!-- InfoBlock -->
<TR>
<TD id=infoBlockAlign vAlign=top align=right>&nbsp; </TD>
<TD id=moreInformationAlign vAlign=center align=left>
<H4>
<TABLE>
<TBODY>
<TR>
<TD vAlign=top><A onclick="javascript:expandCollapse('infoBlockID', true); return false;" href="#"><IMG id=infoBlockIDImage class=actionIcon border=0 alt="More information" src="down.png"></A> </TD>
<TD vAlign=top><SPAN id=moreInfoContainer><A href="javascript:expandCollapse('infoBlockID', true);">More information</A></SPAN><NOSCRIPT></NOSCRIPT></TD></TR></TBODY></TABLE></H4>
<DIV style="DISPLAY: none" id=infoBlockID class=infoBlock>
<P>
<LI id=errorExpl1>If you arrived at this page by clicking a link, check the website address in the address bar to be sure that it is the address you were expecting. 
<LI id=errorExpl2>When going to a website with an address such as https://example.com, try adding the 'www' to the address, https://www.example.com. 
<LI id=errorExpl3>If you choose to ignore this error and continue, do not enter private information into the website. 
<P></P>
<P id=moreInfoSeeHelpPF>For more information, see "Certificate Errors" in Internet Explorer Help.</P></LI></DIV></TD></TR></TBODY></TABLE></BODY></HTML> 
```

这是我尝试过的（在Java中）：

```
ieDriver.findElement(By.id("overridelink")).click();    
ieDriver.findElement(By.xpath("//a[@id='overridelink']")).click();
ieDriver.findElement(By.xpath("//A[@id='overridelink']")).click(); 
```

我猜这不起作用，因为属性值没有在引号中指定，所以它是不正确的 html。

我也试过这个：

```
ieDriver.findElement(By.xpath("//a[@href='<href>']")).click();
ieDriver.findElement(By.xpath("//A[@id='<href>']")).click(); 
```

在哪里

```
<href> 
```

表示实际的 URL。

我也无法使用相同的方法找到周围的标签。

注意：这对我也不起作用：[Webdriver not find elements in remote IE](https://stackoverflow.com/questions/6983184/webdriver-not-finding-elements-in-remote-ie)

我怀疑是因为信任过期证书并不能减轻安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:50:42.727

如果这是 IE 正在创建的警报框，您可以尝试将`.SwitchTo()`它用于警报框。

```
 WebDriver.SwitchTo().Alert().Accept(); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:05:28.663

好吧，一种可行的解决方案就是创建一个具有可接受结束日期的新证书。仅当您有权访问服务器、管理员允许这样做并且不介意签署您自己的证书（至少是暂时的）时，这才有效。我不太喜欢这个解决方案，但因为它似乎是对我的问题的有效答案，所以我会接受它。我将专门创建一个与 WebDriver 功能相关的新问题。

# .net - WPF RadioButton - 覆盖状态更改

> ID：10917208
> 
> 赞同：1
> 
> 时间：2012-06-06T15:19:15.443
> 
> 标签：.net, wpf, radio-button

在 .NET Framework v4.0 中，是否可以覆盖 WPF 的状态更改`RadioButton`？

在下面的 XAML 中，我使用列表框来显示动态数量的项目，其中单个项目被视为“选定项目”。

```
<ListBox Height="Auto"
         Name="listBoxItems"
         ItemsSource="{Binding Mode=OneWay, Path=Items}"
         SelectedItem="{Binding Path=UserSelectedItem}">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <RadioButton GroupName="SameGroup" Checked="OnItemSelected" IsChecked="{Binding Mode=TwoWay, Path=IsSelected}" CommandParameter="{Binding}"/>
        <TextBlock Text="{Binding Mode=OneTime, Converter={StaticResource itemDescriptionConverter}}"/>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

单击 RadioButton 时，OnItemSelected 方法将进行一些验证，然后提供一个对话框，通知用户将保存新的“选定项”。

如果出现错误情况，或者用户取消保存，我希望重置/覆盖 RadioButton 状态更改。即我手动更改 IsSelected 属性的值。

通过调试，我看到了以下事件序列。

1.  选中单选按钮导致`IsSelected`属性更改值，并`NotifyPropertyEvent`触发a
2.  `IsSelected`读取属性的新值。
3.  该`OnSelected`方法被调用，产生一个对话框。
4.  用户取消操作，我手动调用`IsSelected`每个绑定对象，将值重置回来。这会触发多个`NotifyPropertyEvents`.
5.  永远不会重新读取重置值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:05:58.317

我有一些代码可以清除任何 RadioButtons，它对我有用。检查您的代码。该事件是 NotifyPropertyChanged 而不是 NotifyProperty。

```
<ListBox ItemsSource="{Binding Path=cbs}" SelectionMode="Single">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <RadioButton GroupName="UserType" Content="{Binding Path=name}" IsChecked="{Binding Path=chcked, Mode=TwoWay}" Checked="RadioButton_Checked" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

    public class cb: INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        private bool c = false;
        public bool chcked 
        {
            get { return c; }
            set 
            {
                if (c == value) return;
                c = value;
                NotifyPropertyChanged("chcked");
            } 
        }
        public string name { get; private set; }
        public cb(string _name) { name = _name; }
    }

    private void btnClickClearAll(object sender, RoutedEventArgs e)
    {
        foreach (cb c in cbs.Where(x => x.chcked))
        {
            c.chcked = false;
        }
    }

    private void RadioButton_Checked(object sender, RoutedEventArgs e)
    {
        if (cbs[0].chcked) cbs[0].chcked = false;   
    } 
```

# package - 如何构建一个 debian 软件包，其源代码包含源代码树之外的符号链接？

> ID：10917214
> 
> 赞同：4
> 
> 时间：2012-06-06T15:19:34.283
> 
> 标签：package, debian, symlink, tar

我有一个项目，其源代码包含指向其他源代码树（特别是`CppUTest`框架）的符号链接。我需要从我的项目中构建一个 debian 包，但`dpkg-source`不会遵循符号链接。

进一步挖掘，我相信这是因为默认行为`tar`是不取消引用符号链接，除非明确告知 (with `-h`)。

`tar`在构建 debian 源代码压缩包时，我无法找到一种方法来传递这个额外的选项。

那么我在这里做错了什么？是否可以构建一个包含符号链接的 debian 源代码压缩包？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T07:48:55.070

正如在这个线程中所读的.. [http://ubuntuforums.org/showpost.php?p=9752860&postcount=3](http://ubuntuforums.org/showpost.php?p=9752860&postcount=3)

它们可以像普通文件一样包含在包中。

详细信息取决于您进行打包的方式，但在 debian/rules 的“安装”目标中使用类似以下内容应该可以：

```
ln -s /usr/share/whatever/file/you/want $(CURDIR)/debian/<pkgname>/usr/whatever/place/you/want/the/link 
```

debian/ 中的所有内容都将在 .deb 中结束，包括您放置在那里的符号链接。

# c# - 如何创建一个所有字段/属性默认为 const 的类？

> ID：10917218
> 
> 赞同：0
> 
> 时间：2012-06-06T15:19:52.070
> 
> 标签：c#, constants

可以在 C# 中创建一个所有字段和属性默认为 const 的类吗？

*   想象的例子 *

`public class foo : const /* or readonly */ { public int baa = 3; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:22:27.440

不，这不对。

您可以将类设为静态，但这会强制所有成员都是静态的。

前任：

```
public static class Constants
{
    public const int SomeId = 123;
    public const string SomeName = "foo";

    public static readonly DateTime myDateTime = new DateTime();

    public string notConstant = "test"; //does not compile
} 
```

# c# - 关于命令行编译器和 MSBuild 的一些混淆

> ID：10917219
> 
> 赞同：1
> 
> 时间：2012-06-06T15:19:52.423
> 
> 标签：c#

[C# CSC.exe](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

如果我们给它一个 C# 文件，一个 .CS ，它是否能够编译它并说例如一个“;” 在您的代码的第 12 行缺少？在我的程序后面的表单中 - 这是 Java RCP 应用程序，我可以在电子表格中显示这些编译错误

MSBuild怎么样？这是否能够显示与我之前的示例相同的编译错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:21:47.667

将 MSBuild 视为一种美化`make`或类似的东西`ANT`- 它是一种用于描述编译/构建任务的语言。当您使用 MSBuild 构建您的 c# 程序时，您实际上是在使用`csc.exe`编译部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:18:28.303

假设这是您的代码（program.cs）：

```
namespace MyCustomBuild
{
     class Program
     {
         static void Main(string[] args)
         {
             System.Console.WriteLine("Hello World")
         }
     }
} 
```

您可以调用`csc program.cs`并接收以下输出

```
Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

program.cs(7,52): error CS1002: ; expected 
```

或者，您可以使用 msbuild 来实现完全相同的结果！这里是内容`build.msbuild`

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Default">
     <Csc Sources="program.cs"/> 
  </Target>
</Project> 
```

然后，您可以调用具有不同详细级别的 msbuild 文件，如图所示。

`msbuild build.msbuild /verbosity:quiet`和`msbuild build.msbuild /verbosity:minimal`

```
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.269]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

program.cs(7,52): error CS1002: ; expected [<filePath>\build.msbuild] 
```

`msbuild build.msbuild /verbosity:normal`：

```
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.269]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

Build started 6/6/2012 12:13:00 PM.
Project "<filePath>\build.msbuild" on node 1 (default targets).
Default:
  C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe /out:program.exe program.cs
program.cs(7,52): error CS1002: ; expected [<filePath>\build.msbuild]
Done Building Project "<filePath>\build.msbuild" (default targets) -- FAILED.

Build FAILED.

"<filePath>\build.msbuild" (default target) (1) ->
(Default target) -> 
  program.cs(7,52): error CS1002: ; expected ["<filePath>\build.msbuild]

    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:00.28 
```

其余两个详细级别是详细的和诊断性的，如果您需要，它们会提供更多信息。我不确定您想要为电子表格提供多少信息，但希望其中一种对您有用。

# ajax - 以输入值作为参数调用 aciton 方法

> ID：10917220
> 
> 赞同：1
> 
> 时间：2012-06-06T15:19:58.027
> 
> 标签：ajax, jsf, jsf-2

我有这样的看法：

```
<h:form id="carlin">
    <h:outputText id="carlinInput" value="#{userBean.model.varAjax}"/>
    <a class="btn" data-toggle="modal" href="#myModal" >Launch Modal</a>
</h:form> 
```

我有一个显示另一种形式的模态对话框：

```
<h:form>
    <h:inputText value="#{userBean.model.varAjax}"/>
    <h:commandLink action="#{userBean.processPage1()}" value="Ok">
        <f:ajax render=":carlin:carlinInput" />
    </h:commandLink>
</h:form> 
```

我需要设置键入的值`<h:inputText>`并将其作为参数传递给我的`<h:commandLink action="#{userBean.processPage1()}"`value="OK">`

这是我的`processPage1()`方法：

```
public void processPage1(String zip) {
    this.model.varAjax = zip;
} 
```

我试过这个：

```
<h:commandLink action="#{userBean.processPage1(userBean.model.varAjax)}" value="OK"> 
```

但它不起作用。如果我传递一个硬编码的值，它会起作用：

```
<h:commandLink action="#{userBean.processPage1('teste')}" value="OK"> 
```

但是我需要将用户输入的内容传递`inputText`给我的操作方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:46:52.063

这不是正确的做法。您需要通过 的`execute`属性指定需要处理/执行的输入组件的客户端 ID `<f:ajax>`。

```
<h:form>
    <h:inputText id="varAjax" value="#{userBean.model.varAjax}"/>
    <h:commandLink action="#{userBean.processPage1}" value="Ok">
        <f:ajax execute="varAjax" render=":carlin:carlinInput" />
    </h:commandLink>
</h:form> 
```

这样 JSF 将使用提交的值设置模型值。

```
public void processPage1() {
    System.out.println(model.getVarAjax()); // Look, JSF has already set it.
} 
```

另一种方法是使用`execute="@form"`它将处理*整个*表单，这是您在标准 ajaxified 按钮中通常需要的。

```
 <f:ajax execute="@form" render=":carlin:carlinInput" /> 
```

请注意，PrimeFaces 和 RichFaces 等组件库已经设置`@form`了默认的执行属性，因此您无需在其命令组件中显式指定它。在标准`<f:ajax>`中，它默认为`@this`命令组件，这确实是不直观的。

# asp.net - 在 ASP.NET Web 应用程序中托管 powershell

> ID：10917224
> 
> 赞同：3
> 
> 时间：2012-06-06T15:20:09.943
> 
> 标签：asp.net, powershell

我希望这不属于非问题类别。

我想在我的 ASP.NET 应用程序中托管一个 powershell 环境，在与应用程序池相同的进程中运行，并且能够远程连接到托管环境。我已经有了一个包含自定义 Cmdlet 的 dll，我还想在托管会话中使用它。

请注意，我不只是希望在 ASP.NET 中运行任意命令。相反，我希望有一个完整的类似 shell 的界面，我可以在其中工作。

我查看了扇入和创建/池化运行空间，但这太模糊了，我似乎无法找到关于这个特定场景的好信息。所以任何指针都会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:16:36.980

看看 PowerShellASP - [http://www.powershellinside.com](http://www.powershellinside.com)上列出的产品套件的一部分。这应该允许您使用 ASP.NET 托管 PowerShell。另一种选择（如果您想在同一页面中混合使用 ASP.NET 和 PowerShell）将是 PowerShell 面板： [http ://www.powershellinside.com/powershell/panel/](http://www.powershellinside.com/powershell/panel/)

# uml - Enterprise Architect：以高质量导出 UML 图

> ID：10917228
> 
> 赞同：56
> 
> 时间：2012-06-06T15:20:15.580
> 
> 标签：uml, image, class-diagram, enterprise-architect

使用 Enterprise Architect（9.2 版），我创建了一些类和序列 UML 图。现在我需要 Word 文档中的这些图表。

我的第一种方法是使用 Windows 7 Snipping Tool 将它们剪掉，然后将它们粘贴到文档中。但是出于印刷目的，质量太差了。

第二种方法是 Enterprise Architect 中提供的“将它们另存为图像”。但这样一来，质量就更差了。

第三种方法是将它们导出为 pdf 文件。有了这个质量相当不错，我可以将这些 pdf 导入 Inkscape，然后将它们转换为 *.png 文件以将它们导入 word。问题是，Enterprise Architect 在字体方面有点失败。这意味着图片本身具有高质量，但它尝试转换类的字体，然后我在字母之间有一些空格，应该没有空格。

长话短说 - 有没有办法将我的 UML 图从 Enterprise Architect 导出为常见的图片格式，如`.png`or `.tiff`，同时保持良好的质量？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-07T19:59:52.823

我相信您已经知道，您可以将图表保存为多种格式的图像，包括 PNG 但不包括 TIFF。

图像的质量可以在选项（工具 - 选项），“图表”选项卡中控制。“图像内存限制”控制图像转换过程允许的内存量；增加这个应该可以提高大图的质量。“将保存的位图缩放到”允许您为图像设置更高的分辨率。

我没有检查这些是否也会影响复制到剪贴板功能（在图表菜单或`CTRL`+`B`中），这是我通常将图表复制到文档中的方式。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-07T08:33:38.370

有图有文字有很简单的方法。

简单地说，在 ea 中打开图表，然后用`CTRL`+全选`A`，然后复制`CTRL`+ `C`，进入 word 并粘贴`CTRL`+ `V`。简单而完美的品质。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-02T10:36:11.757

出于某种原因，当您使用 Ctrl-B 将 Sparx EA 模型导出到 MS Word 时，您会得到一个复制到剪贴板的位图，但是当您粘贴到 Powerpoint 时，您会得到一个增强的图元文件。这是矢量图形，可以放大等而不会丢失细节。

准备

1.  在开始之前，进入 EA 和工具->选项（或按 Ctrl-F9）。
2.  确保选择了常规属性页面。
3.  检查“剪贴板”是否设置为“元文件”（如果设置为位图，即使在 Powerpoint 中，您也只会生成位图）。

脚步

1.  打开要导出的 EA 模型。
2.  打开 Powerpoint 并清除默认边界框，留下空白幻灯片。
3.  打开 Word 并在文档中找到要粘贴模型的位置。
4.  返回 EA，打开模型窗口并按 Ctrl-B（图表->将图像粘贴到剪贴板）
5.  进入 Powerpoint 并按 Ctrl-V 进行粘贴。
6.  调整模型大小以适合幻灯片。
7.  点击 Ctrl A 然后 Ctrl C 以确保所有内容都复制到剪贴板。
8.  进入 Word 并按 Ctrl-V 进行粘贴 - 您现在应该有一个 EMF 图元文件格式的 EA 模型，而不是位图。文档审阅者现在可以放大并查看模型中的全部细节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-09T15:42:43.043

请执行下列操作：

包->文档->发布为 HTML

为输出创建新文件夹并在“输出”字段中设置路径。

-> 按生成

转到 ..[您的文件夹]\EARoot，名为 EA*.[png|gif] 的文件是您的图表

原始分辨率的图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-14T23:22:04.283

我自己，我使用 ctrl+P 并使用我的 pdf 转换器进行打印。- 在此之前，我在图表属性 -> 图表 -> 页面设置 -> 高级中设置页面大小。- 我设置“缩放到一页”，然后单击“页面设置”，选择合适的页面大小和方向。- 我的 PDF 转换器是 PDFCreator：http: [//download.cnet.com/PDFCreator/3000-2064_4-10558866.html](http://download.cnet.com/PDFCreator/3000-2064_4-10558866.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-30T13:53:15.077

更改图表主题，转到工具->图表->主题并将图表主题更改为“蓝图”并转到文件->打印为 PDF

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-01T15:18:47.967

虽然我看到您似乎已经解决了这个问题（很高兴听到），但我会发布这个，以防其他人对上述内容没有任何运气。

我一直只是选择（整个图表按 ctrl+A）并粘贴到 Word/PPT/Outlook 中，图表会自动转换为漂亮的 PNG 可缩放图像（无需更改内存/质量设置）。

但在最近的一个项目中，似乎当我尝试做同样的事情时，质量非常差/模糊，而且文本有点被压扁。

您是否偶然使用远程桌面连接到运行 Sparx EA 的机器？还有另一个线程漂浮在某个地方（抱歉没有链接），其他人在全屏显示模式下通过 RDP 连接时遇到了类似的问题。我能够从非 RDP 会话中导出高质量，或者我认为如果我通过 RDP 连接但不是在全屏模式下，它应该以我习惯的质量导出。

希望这可以帮助其他有类似问题的人

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-29T06:55:14.663

使用第 13 版（也可能是旧版本），您可以按`Ctrl-T`打开“另存为图像”对话框。您可以在其中选择 .png、.bmp、.jpeg、.tga、.gif、.wmf 和 .emf。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-11-26T07:06:38.693

复制图表`Ctrl`+ `A`，`Ctrl`+`C` 并将其粘贴到 Microsoft Paint 中，然后将其保存为`jpg/png`文件。

# outlook - 从 Outlook 解析 iCal：我如何判断此事件的重复计划是什么？

> ID：10917232
> 
> 赞同：3
> 
> 时间：2012-06-06T15:20:28.383
> 
> 标签：outlook, icalendar, rfc2445, rfc5545

我正在使用 Python，但我认为这与这里无关。下面的 iCal 片段来自 Outlook 2010 导出（完整数据）。在 Outlook 中，该事件显示为重复出现，包括 2012 年 4 月 12 日的事件实例。如果您打开该系列，它会显示

重复：每周四发生，从 2012 年 3 月 29 日起，从 12:00 PM 到 12:30 PM

我的问题是：是否可以从以下信息中得出重复计划？哪些字段会给我信息？我希望找到一个 RRULE，但这里没有这样的东西。

```
BEGIN:VEVENT
CLASS:PUBLIC
CREATED:20120312T133301Z
DESCRIPTION:\n
DTEND;TZID="Eastern Standard Time":20120329T123000
DTSTAMP:20120411T220938Z
DTSTART;TZID="Eastern Standard Time":20120329T120000
LAST-MODIFIED:20120531T155022Z
LOCATION:1501 Fake Street\, Conference Room G
PRIORITY:5
RECURRENCE-ID;TZID="Eastern Standard Time":20120419T120000
SEQUENCE:8
SUMMARY;LANGUAGE=en-us:My Cool Event
TRANSP:OPAQUE
UID:040000008200E00074C5B7101A82E008000000000029934B3300CD01000000000000000
    0100000001516438BA45C3946AF9C4C2A563FB2BE
X-ALT-DESC;FMTTYPE=text/html:<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//E
    N">\n<HTML>\n<HEAD>\n<META NAME="Generator" CONTENT="MS Exchange Server ve
    rsion 14.02.5004.000">\n<TITLE></TITLE>\n</HEAD>\n<BODY>\n<!-- Converted f
    rom text/rtf format -->\n\n<P DIR=LTR><SPAN LANG="en-us"></SPAN><SPAN LANG
    ="en-us"></SPAN></P>\n\n</BODY>\n</HTML>
X-MICROSOFT-CDO-BUSYSTATUS:BUSY
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-DISALLOW-COUNTER:FALSE
X-MS-OLK-APPTLASTSEQUENCE:16
X-MS-OLK-APPTSEQTIME:20120411T220937Z
X-MS-OLK-AUTOFILLLOCATION:FALSE
X-MS-OLK-CONFTYPE:0
END:VEVENT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:59:36.590

我使用以下程序浏览了您的 ICS 文件：

```
from icalendar import Calendar, Event
from datetime import datetime

cal = open('test.ics','rb')
ical = Calendar.from_ical(cal.read())
for component in ical.walk():
    if component.name == 'VEVENT':
        for item in component.sorted_items():

            if item[0] == 'RECURRENCE-ID':
                reoccur_item = item[1]
                print reoccur_item.params
                print reoccur_item.dt
                continue
            if item[0] == 'DTSTART':
                print 'DSTART', item[1].dt
                continue
            if item[0] == 'DTEND':
                print 'DTEND', item[1].dt
                continue
            if item[0] == 'DTSTAMP':
                print 'DTSTAMP', item[1].dt
                continue
            print item

cal.close() 
```

以下是我获得的输出

```
('SUMMARY', vText(u'My Cool Event'))
DSTART 2012-03-29 12:00:00
DTEND 2012-03-29 12:30:00
DTSTAMP 2012-04-11 22:09:38+00:00
('UID', vText(u'040000008200E00074C5B7101A82E008000000000029934B3300CD01000000000000000   0100000001516438BA45C3946AF9C4C2A563FB2BE'))
RECURRENCE-ID Parameters({'TZID': 'Eastern Standard Time'})
RECURRENCE-ID 2012-04-19 12:00:00
('SEQUENCE', 8)
('CLASS', vText(u'PUBLIC'))
('CREATED', <icalendar.prop.vDDDTypes instance at 0x101c4e518>)
('DESCRIPTION', vText(u'\n'))
('LAST-MODIFIED', <icalendar.prop.vDDDTypes instance at 0x1020874d0>)
('LOCATION', vText(u'1501 Fake Street, Conference Room G'))
('PRIORITY', 5)
('TRANSP', vText(u'OPAQUE'))
('X-ALT-DESC', vText(u'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//E   N">\n<HTML>\n<HEAD>\n<META NAME="Generator" CONTENT="MS Exchange Server ve   rsion 14.02.5004.000">\n<TITLE></TITLE>\n</HEAD>\n<BODY>\n<!-- Converted f   rom text/rtf format -->\n\n<P DIR=LTR><SPAN LANG="en-us"></SPAN><SPAN LANG   ="en-us"></SPAN></P>\n\n</BODY>\n</HTML>'))
('X-MICROSOFT-CDO-BUSYSTATUS', vText(u'BUSY'))
('X-MICROSOFT-CDO-IMPORTANCE', vText(u'1'))
('X-MICROSOFT-DISALLOW-COUNTER', vText(u'FALSE'))
('X-MS-OLK-APPTLASTSEQUENCE', vText(u'16'))
('X-MS-OLK-APPTSEQTIME', vText(u'20120411T220937Z'))
('X-MS-OLK-AUTOFILLLOCATION', vText(u'FALSE'))
('X-MS-OLK-CONFTYPE', vText(u'0')) 
```

重新发生规则是空的，这几乎看起来像是重新发生事件的单个实例，但最终是针对各种 Microsoft 特定数据。这有序列号 8 和 X-MS-OLK-APPTLASTSEQUENCE:16 表明最后一个实例应该有序列 16。

几乎看起来它已经在每个具有相同 UID 的团队上创建了多个带有序列标记的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:39:45.743

您是否尝试使用 vba 导出日历？这可能是您获得规则的一个选择。您必须注意 Item.GetRecurrencePattern（Item 被声明为 myItem As AppointmentItem）并与 olRecursMonthly、olRecursYearly、...进行比较，然后查找项目的间隔和计数属性以重建整个 rrule 字符串。

您可以在此项目中找到更多详细信息：http: [//sourceforge.net/projects/outlook2ical/files/outlook2ical/v1.04/](http://sourceforge.net/projects/outlook2ical/files/outlook2ical/v1.04/)

# installshield - InstallShield 安装程序当前目录

> ID：10917234
> 
> 赞同：1
> 
> 时间：2012-06-06T15:20:36.817
> 
> 标签：installshield

如何获取运行安装程序包的目录？

谢谢，阿贝德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:56:46.010

使用属性`SOURCEDIR`。

# java - Selenium WebDriver 设置具有 webelement 的属性

> ID：10917236
> 
> 赞同：1
> 
> 时间：2012-06-06T15:20:48.737
> 
> 标签：java, selenium, webdriver

目前我有一个问题 - 我想从当前帧切换到父帧。应用程序有很多内部框架，因此不能使用 driver.switchTo().defaultContent()。在此[讨论](https://groups.google.com/group/webdriver/browse_thread/thread/66658caf429821e6?pli=1)中，建议了可能的解决方案 - 您应该记住您访问过的所有帧，并使用从顶部迭代它们

> driver.switchTo().defaultContent()

主要问题在于，在我的应用程序中，有时我被迫使用切换到由 xpath 和其他定位器定位的帧 - 使用 WebElement 切换。并且正如上面讨论中已经提到的那样，在切换所有定位的 WebElement 后，它变得无效，不能用于切换。所以我应该有办法再次在框架内找到这个元素。虽然我可以找到执行某些 js 调用（即）的该框架元素的索引`(WebElement)executeScript("window.frames[i]").equals(myWebElement)`，但事实并非如此，因为当从页面中删除某些框架时，索引可能会发生变化。我可以尝试查找框架名称和 ID，但可能未指定它们。

因此，我看到了唯一可能的解决方案 - 将某些属性设置为当前选择的父级框架 - 示例属性为活动且值为 true。此外，我应该能够对所有可以切换帧的方法执行此操作（存在 3 个）。在所有方法中，我都可以接收表示框架的 WebElement，但据我所知，要更改属性值，您应该执行一些 js 代码。所以问题是如何在js中定位当前的WebElement。

感谢您阅读这一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:25:06.860

看看上面的代码片段。这是在 Js 中定位当前元素的最佳方式，将元素作为参数传递以执行脚本并在 js 中使用参数 [0] 引用它

```
WebElement element = driver.findElement(By.id("foo"));
String contents = (String)((JavascriptExecutor)driver).executeScript("return arguments[0].innerHTML;", element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:31:17.193

您必须使用 javascript 实现自定义逻辑

如果元素具有 id，那么您可以使用 javascript 中可用的 findElementById() 方法，否则使用 findElementsByName() 然后遍历数组并匹配其他属性以缩小到您的元素

# java - 无断言编译

> ID：10917241
> 
> 赞同：13
> 
> 时间：2012-06-06T15:21:08.977
> 
> 标签：java, performance, assert

我知道断言可以在运行时启用/禁用，分别用于调试和生产。但是我发现断言也会增加生成的二进制文件的大小（在下面的示例中约为 100-200 个字节）。

在 C 和 C++ 中，我们可以在编译时通过`#define NDEBUG`before来执行此操作`#include <assert.h>`。

Java 编译器有没有办法自动执行此操作？我想将它们留在源代码中，以便稍后进行调试。但我也不希望生成的二进制文件比必要的大（我们有一个大小限制作为设计要求）。

C代码：

```
//#define NDEBUG
#include <assert.h>

int main(void) {
    assert(0); // +200 bytes without NDEBUG, 0 with NDEBUG
    return 0;
} 
```

Java代码：

```
public class Test {
    public static void main(String[] args) {
        assert(System.nanoTime()==0); // increases binary size by about 200 bytes
    }
} 
```

* * *

回应 bn. 的回答：

```
public class Test2 {
    public static final boolean assertions = false;

    public static void main(String[] args) {
        if(assertions) {
            assert(System.nanoTime()==0);
        }
    }
} 
```

编辑：事实上，在我看来，这种启用/禁用是一个比运行时更有用的编译时特性。我的意思是，有多少最终用户将启用它们？就调试过程中的程序员而言，他/她可能无论如何都会重新编译代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:34:09.720

作为内置编译步骤，这是不可能的。但是，您可以通过在断言周围添加条件块来做到这一点。

有关详细信息，请参阅文章[“从类文件中删除所有断言跟踪”](http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#usage-adv-removing)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:07:07.217

Personally I would not do the following because of the complexity added to the source code but javac generated the exact same intermediate code for `main` in the following two fragments:

**conditional asserts**

```
class C {
    public final static boolean assertions = false;

    public static void main(String[] args) {
        if(assertions) {
            assert(System.nanoTime()==0);
        }
    }
} 
```

**no asserts**

```
class C {
    public static void main(String[] args) {
    }
} 
```

**compiled code**

```
 public static void main(java.lang.String[]);
    Code:
       0: return        
    LineNumberTable:
      line 3: 0 
```

**EDIT**

> In fact, it seems to me that this enabling/disabling is a more useful compile-time feature than run-time. I mean, how many end users will enable them?

Its not end users that enable them, it is the customer support that tells the end user to enable them. I do wish though they were enabled, not disabled, by default.

# java - 来自 Servlet/Filter 的重定向不起作用

> ID：10917242
> 
> 赞同：2
> 
> 时间：2012-06-06T15:21:09.603
> 
> 标签：java, servlets, servlet-filters

我有重定向问题 - 它根本不适用于有效路径。现在我在 Servlet 中使用页面转发，但我需要在过滤器中进行重定向。

所有页面都位于“页面”文件夹中，并具有 .jspx 扩展名

我尝试了以下方法（此路径适用于转发）：

```
httpResponse.sendRedirect("/pages/login.jspx"); 
```

browser url is `http://[localhost]/pages/login.jspx`，它显示Tomcat的404页面，url中缺少上下文路径（在我的例子中是'/hotel'），所以，如果我添加它：

```
httpResponse.sendRedirect("/hotel/pages/login.jspx"); 
```

重定向没有发生，浏览器 url 没有改变，我看到了浏览器的 404 页面（这个程序无法显示网页）。

我究竟做错了什么？

用于测试的过滤器具有以下映射：

```
@WebFilter(filterName = "SecurityFilter", urlPatterns = "/*") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:30:27.373

重定向的 URL 确实与最初请求的 URL 相关。要动态添加上下文路径，建议使用`HttpServletRequest#getContextPath()`而不是硬编码它，因为上下文路径值可以通过特定于服务器的配置在外部进行更改。

As to your concrete problem, I'm not sure if I understand "browser's 404 page" properly, perhaps you mean the browser-default error page which can occur when the server is unreachable or when the request has been redirected in an infinite loop (that should however have been made clear in the actual message of the browser default error page, at least Chrome and Firefox do that).

Given that your filter is mapped on `/*`, it's actually redirecting in an infinite loop because the request URL of the login page in turn also matches the URL pattern of the filter.

You'd need *either* to put the filter on a more specific URL pattern which does **not** cover the login page, e.g. on `/secured/*` where all restricted pages are been moved in there (or map it on `/pages/*` and put the login page outside there), *or* to fix your filter as follows:

```
String loginURL = request.getContextPath() + "/pages/login.jspx";

if (needsToRedirect && !request.getRequestURI().equals(loginURL)) {
    response.sendRedirect(loginURL);
}
else {
    chain.doFilter(request, response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:25:04.520

1 - 您的 servlet 代码中是否有日志记录或其他可观察到的事件来确认它确实在运行？

*2 - 如果您在重定向之前*编写任何实际响应内容，重定向可能会失败- 您有这样做吗？

3 - 另一种选择，在根目录中设置一个页面，甚至是“hello.html”静态页面，看看是否可以使用“/hello.html”和“hello.html”中的任何一个重定向到该页面。

只是我将在自己的调试方法中使用的一些想法，希望有所帮助！

# javascript - 如何检测覆盖的 CSS 属性？

> ID：10917244
> 
> 赞同：3
> 
> 时间：2012-06-06T15:21:24.643
> 
> 标签：javascript, css, firebug, stylesheet, google-chrome-devtools

我可以使用 document.stylesheets 获取元素的所有 css 属性，但其中一些属性不是活动的，因为这些属性被覆盖了。在 firebug 中（chrome 开发者工具也有这个特性），如果有一个被覆盖的 css 属性，你会看到类似这样的东西： ![在此处输入图像描述](../Images/6718c9ce18bf54386a5ae7eba2e226d1.png)

我能想到的唯一方法是比较元素的活动 css 属性（在 jQuery 中`$(element).css(property)`）和定义的 css 属性，`document.stylesheets`但这不是一种可靠的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-16T10:54:02.423

在 webkit 中，你可以使用`getMatchedCSSRules`来实现你想要的。它按照浏览器应用的继承顺序返回一个 CSS 规则集，这[是 webkit 检查器](https://bugs.webkit.org/show_bug.cgi?id=79653)前一段时间使用的。[对于像 Firefox 这样的基于 Gecko 的浏览器，这里](https://gist.github.com/ydaniv/3033012)似乎有一个可用的 polyfill ，虽然我没有测试过。

## 一个基本的、有效的解决方案

[**以下代码也可用作小提琴**](http://jsfiddle.net/UXJHt/)

因为`getMatchedCSSRules` [仅适用于内联样式表](http://code.google.com/p/chromium/issues/detail?id=69626)，所以您首先必须内联链接的样式表：

```
function inlineStyles() {
    var stylesheets = document.getElementsByTagName('link'),
        head = document.getElementsByTagName('head')[0];

    for (var i = 0; i < stylesheets.length; i++) {
        if (stylesheets[i].getAttribute('rel') == 'stylesheet') {
            (function (stylesheet) {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("GET", stylesheet.getAttribute('href'), true);
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        var inlineStyle = document.createElement('style');
                        inlineStyle.setAttribute('type', 'text/css');
                        inlineStyle.innerText = xmlhttp.responseText;
                        head.replaceChild(inlineStyle, stylesheet);
                    }
                };
                xmlhttp.send();
            })(stylesheets[i]);
        } else {
            continue;
        }
    };
} 
```

然后，大块：这是第一枪，随意改进。它可以处理`inherit`规​​则和最多一个`!important`定义，仅此而已。对于非常复杂的设置，必须改进：

```
function getStyle(s, id) {
    var element = typeof id === 'string' ? document.getElementById(id) : id,
        css = window.getMatchedCSSRules(element),
        style = window.getComputedStyle(element),
        value = style[s],
        styles = [],
        rules = [],
        inherited, currentRule;

    // if there's a computed style, start calculation
    if (value) {

        // add matched rules if there are any
        if (css) {
            for (var i = 0; i < css.length; i++) {
                styles.push(css[i]);
            }
        }

        // add the element style attribute as a matched rule
        styles.push({
            style: element.style,
            cssText: 'element.style {' + element.getAttribute('style') + ' }'
        });

        for (var i = styles.length - 1; i >= 0; i--) {
            var def = styles[i],
                rule = {
                    index: rules.length,
                    style: s,
                    value: styles[i].style[s],
                    cssText: def.cssText
                };

            if (rule.value == 'inherit' && !currentRule) {
                if (inherited = getInherited(element, s, value)) {
                    rule.inheritedFrom = inherited;
                    currentRule = rule;
                    inherited = undefined;
                } else {
                    rules.push(rule);
                }
            } else if (rule.value == 'inherit' && currentRule && isImportant(s, value, def.cssText)) {
                if (inherited = getInherited(element, s, def)) {
                    rule.inheritedFrom = inherited;
                    rules.splice(currentRule.index, 0, currentRule);
                    currentRule = rule;
                    inherited = undefined;
                } else {
                    rules.push(rule);
                }
            } else if (rule.value == value && !currentRule) {
                currentRule = rule;
            } else if (rule.value == value && currentRule && isImportant(s, value, def.cssText)) {
                rules.splice(currentRule.index, 0, currentRule);
                currentRule = rule;
            } else if (rule.value.length) {
                rules.push(rule)
            }
        }

        return {
            current: currentRule,
            overwritten: rules
        };

    } else {
        return false;
    }
} 
```

如果发生继承，我们沿着 DOM 节点查找使用此辅助函数定义 CSS 规则的元素并获取其样式：

```
function getInherited(element, s, value) {
    while (element.parentNode && window.getComputedStyle(element.parentNode)[s] == value) {
        element = element.parentNode;
    }

    if (element) {
        return getStyle(s, element).current;
    } else {
        return null;
    }
} 
```

我们使用此辅助函数确定是否将 CSS 规则标记为重要：

```
function isImportant(s, style, text) {
    return new RegExp(s.replace(/([A-Z])/g, '-$1').toLowerCase() + ':\\s+' + style + '\\s+!important').test(text)
} 
```

[**看看小提琴看看它的工作原理**](http://jsfiddle.net/UXJHt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:37:04.337

这个片段可能对你有用，它在过去帮助了我，将它应用到你的一个 CSS 文件中，你将能够通过查找元素 CSS 的特定位置来查看其他类/id 规则覆盖的对象声明是，并通过跟踪他们的父母。我的猜测是您在继承方面遇到问题。

```
* { outline: 2px dotted red }
* * { outline: 2px dotted green }
* * * { outline: 2px dotted orange }
* * * * { outline: 2px dotted blue }
* * * * * { outline: 1px solid red }
* * * * * * { outline: 1px solid green }
* * * * * * * { outline: 1px solid orange }
* * * * * * * * { outline: 1px solid blue } 
```

或者，您可以为它们添加一个 :hover 属性，这会使导航更容易一些，但该片段的基本原理是向您展示元素的嵌套，并且可以帮助您确定 CSS 中的问题所在是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T19:40:32.397

您必须解析链接到页面的 CSS 文件才能确定正在使用的样式。您还必须确定可以使用哪些属性来定位 CSS 中的元素。这是您必须遵循的流程：

**元素可以通过以下方式成为目标：**标签、ID、类、伪类和继承

然后，您将拥有一个给定的元素，例如：

`<a href="#" id="link" class="button">Woop</a>`

默认情况下，该元素有几个与之关联的选择器。所有元素都可以继承父 CSS，因此您必须创建父元素的层次结构。以后的样式将优先。然后，您必须考虑标签`a`和任何也共享此选择器的父级，例如`body a`. 同样，您必须创建继承属性的层次结构。您将对类、属性和伪类重复此过程。一旦你为元素编译了你的树列表，你就可以解析 CSS 文档以获得适当的样式。

这绝对是一项艰巨的任务，重新发明轮子没有任何意义。我的建议是查看已经这样做的开源项目。[WebKit](https://github.com/WebKit/webkit)是一个已经构建了这个系统的开源项目。考虑使用他们的实现作为起点并从那里进行更改。

# python - Numpy：ImportError：无法导入名称TestCase

> ID：10917245
> 
> 赞同：5
> 
> 时间：2012-06-06T15:21:30.260
> 
> 标签：python, numpy, scipy

我从安装 numpy

```
sudo apt-get install numpy 
```

然后在python2.7中导入numpy

```
import numpy 
```

我收到这个错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/usr/local/lib/python2.7/dist-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/usr/local/lib/python2.7/dist-packages/numpy/core/__init__.py", line 45, in <module>
    from numpy.testing import Tester
  File "/usr/local/lib/python2.7/dist-packages/numpy/testing/__init__.py", line 8, in <module>
    from unittest import TestCase
ImportError: cannot import name TestCase 
```

然后我删除了 Numpy 和 Scipy。然后再次从 github repo 安装。但我仍然得到同样的错误。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T15:30:11.953

我怀疑您有一个名为的本地文件被`unittest.py`导入而不是标准模块。

# bash - 为什么 ${z$i}=$line 会导致“错误替换”错误？

> ID：10917247
> 
> 赞同：1
> 
> 时间：2012-06-06T15:21:34.143
> 
> 标签：bash

我需要使用由另一个变量的名称组成的变量

```
#!/bin/bash -x

i=0
cat << EOF | while read -r line
a
b
c
d
EOF
do
    ((i++))
    ${z$i}=$line
done 
```

但不工作，我得到“坏替代”

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:23:51.993

如果没有特别的理由坚持`z1`，`z2`等等。我建议改用[数组](http://tldp.org/LDP/abs/html/arrays.html)。

# php - 我无法使用以下代码发送批量短信

> ID：10917251
> 
> 赞同：-2
> 
> 时间：2012-06-06T15:21:47.420
> 
> 标签：php, mysql, kannel

我是 PHP 和 MySQL 的新手，我编写了下面的代码，以启用批量短信发送，其中电话号码被选择用于数据库，电话号码位于不同的表格中，使用表格选择它们但无法发送群发短信的任何帮助将不胜感激。

```
 if (!$con)
     {
     die('Could not connect: ' . mysql_error());
      }

       mysql_select_db("demo_forum", $con);

       if($result = mysql_query("SELECT phn_number FROM gen");
  ($row = mysql_fetch_array($result))

       elseif ($result = mysql_query("SELECT phn_number FROM tec"); 
  ($row = mysql_fetch_array($result))

  elseif ($result = mysql_query("SELECT phn_number FROM news"); 
    ($row = mysql_fetch_array($result))

   elseif ($result = mysql_query("SELECT phn_number FROM pol");
    ($row = mysql_fetch_array($result))

   else ($result = mysql_query("SELECT phn_number FROM pol, gen, news, tec"); 
    ($row = mysql_fetch_array($result))

     function sendSmsMessage($phn_number, $message)
      {
     $ch= curl_init();curl_setopt($ch, "http://$gw_host/process_sm/sendsms.php?to=$phn_numbermessage=.urlencode($message");
      curl_exec($ch);
      curl_close($ch);

       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:12:05.880

```
 $ch= curl_init();curl_setopt($ch, "http://$gw_host/process_sm/sendsms.php?to=$phn_numbermessage=.urlencode($message"); 
```

缺少与[号 (&)](http://en.wikipedia.org/wiki/Query_string)分隔查询字符串中的不同字段，并且您的字符串包含文字`.urlencode($message`，因为您的第二个“位置不正确**”**

尝试

```
 $ch= curl_init();curl_setopt($ch, "http://$gw_host/process_sm/sendsms.php?to=$phn_number&message=" . urlencode($message)); 
```

# excel - 通过文件夹中的多个工作簿循环命令

> ID：10917255
> 
> 赞同：0
> 
> 时间：2012-06-06T15:21:58.487
> 
> 标签：excel, for-loop, vba

**背景**
首先，我意识到所有这些对于数据库来说都是一项完美的任务，但我目前没有可用的选项，我认为继续在 excel 中执行此操作是一种很好的学习体验。

我有多个工作簿，每个工作簿都包含一个标识号列表，通过下面的代码输入我需要的工作簿的名称，然后将该列表导入到包含多列数据的工作簿的主工作簿中。然后我运行我的[Match 和 Export 子程序](https://stackoverflow.com/questions/10297551/matching-two-data-lists-in-excel-vba-and-exporting-to-new-sheet)将主要数据集分解为不同的工作表。

**问题**
有没有办法为包含文件夹中的每个文件使用 for 循环，这样我就不必依次识别每个工作簿？

```
Sub Export_Specified_Contractor()

    Dim listwb As Workbook, mainwb As Workbook
    Dim fname As String
    Dim sht As Worksheet, oput As Worksheet
    Dim LRow As Long, oLRow As Long
    Dim cprng As Range, orng As Range

    '--> Get the name of the contractor list to be exported
    fname = Application.InputBox("Enter Contractor Name", "Name?")

    Set mainwb = ThisWorkbook

    With Application

    '--> Set contractor list file
    Set listwb = .Workbooks.Open _
    ("C:\Documents and Settings\alistairw\My Documents\Disallowed Items\Contractor Lists\" & fname)
    End With

    Set sht = listwb.Sheets("Sheet1")

    '--> Copy contractor list
    With sht
        LRow = .Range("A" & Rows.Count).End(xlUp).Row
        .Range("A1:A" & LRow).Copy
    End With

    mainwb.Activate

    '--> Create contractor list sheet in main workbook and paste values
    With mainwb
        On Error Resume Next
        Sheets("Sheet2").Delete
        Sheets.Add.Name = "Sheet2"
        Set oput = Sheets("Sheet2")
        With oput
            .Range("A1").PasteSpecial
        End With
    End With

    Call Match_and_Export

    '--> Delete the list workbook and list sheet
    Application.DisplayAlerts = False
    listwb.Close
    oput.Delete
    Application.DisplayAlerts = True
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:01:28.243

循环浏览文件夹：

```
MyPath = "C:\Documents and Settings\alistairw\My Documents\Disallowed Items\Contractor Lists\"
strFilename = Dir(MyPath & "\*.xlsx", vbNormal) 'change to xls if needed

If Len(strFilename) = 0 Then Exit Sub ' exit if no files in folder

Do Until strFilename = ""
    'Your code here
    strFilename = Dir()    
Loop 
```

# android - android - 如何在谷歌分析上自动发送消息？

> ID：10917257
> 
> 赞同：0
> 
> 时间：2012-06-06T15:22:15.313
> 
> 标签：android, session, google-analytics

我对谷歌分析很陌生。

我已经阅读了一些教程并观看了一些视频。事实证明，建议使用自动调度而不是手动调度，以减少电池和 CPU 的使用。

我使用了“startNewSession”和自动调度之间的秒数（将其设置为 5 分钟，即 5*60=300 秒的值），并且我还启用了调试模式以查看日志更改我一发送消息。

但是，出于某种原因，无论我等待多长时间，消息都不会以这种方式发送。只有当我手动发送消息时，日志才会显示信息，告诉我正在发送某些内容。

为什么会这样？时间只是对跟踪器的建议吗？

这是一个问题，因为我不想错过任何曲目。以防万一，我在应用程序的服务中，在 onDestroy 中，调用了 dispatch() 方法（也调用了 stopSession()）。希望如果我解决了我的问题，就不需要它了。

说到谷歌分析，我必须调用“stopSession”还是它会自动调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:30:32.543

我不会费心自己手动做，这里有一个 EasyTracker jar 文件你可以使用：

[http://code.google.com/p/analytics-api-samples/downloads/detail?name=EasyTrackerAndroid_1.0.zip&can=2&q=](http://code.google.com/p/analytics-api-samples/downloads/detail?name=EasyTrackerAndroid_1.0.zip&can=2&q=)

[http://code.google.com/p/analytics-api-samples/downloads/list](http://code.google.com/p/analytics-api-samples/downloads/list)

这有一个您可以使用的活动，因此`extend Activity`您可以“扩展 TrackedActivity”

扩展`TrackedActivity`后，您可以通过以下方式获得对 Tracker 的引用`EasyTracker.getTracker();`

这样您就不必担心何时何地或是否调用 dispatch() 或 stopSession()

如果你卡住了，[源代码在这里](http://code.google.com/p/analytics-api-samples/source/browse/#svn/trunk/src/tracking/mobile/android/EasyTracker/Library/src/com/google/android/apps/analytics/easytracking)供你浏览

# visual-c++ - Directshow 连续捕获

> ID：10917258
> 
> 赞同：0
> 
> 时间：2012-06-06T15:22:15.360
> 
> 标签：visual-c++, directshow, video-capture

我有直接显示的 Mp4 捕获应用程序。在我的应用程序中，我需要连续捕获 30 分钟（或说一些动态值）视频

对于我做了一个 WaitableTimer 例程，30 分钟后我想停止捕获然后重新开始......但是在我停止捕获开始捕获的下一个样本后，流不会被添加到文件中。要开始下一次捕获，我必须再次释放所有捕获变量获取设备并构建图形，然后我才能开始捕获。

我不能简单地停止捕获，然后重命名输出文件并再次开始捕获吗？是否需要添加额外的东西来做到这一点？

请帮助我。

谢谢

**编辑：** 下面是我用来记录的图表

```
Video Source --> x264vfw - H.264/MPEG-4 AVC Codec --------->GDCL MPEG-4 Multiplexer --> File Writer                                             
                                                        | 
Audio Source --> ACM Wrapper --> Monogram AAC Encoder --| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:39:16.903

我们做一些类似于捕捉 DV-Avi 的事情。您是否尝试过：

1.  停止图表
2.  删除文件编写器
3.  创建新的文件编写器（并配置）
4.  将 File-Writer 连接到 mux
5.  重新开始

如果这不起作用，则 Muxer 或其他过滤器之一有问题。您可以轻松地对此进行测试，只需将 Muxer 替换为音频和视频渲染器，然后尝试播放、停止、播放。

您也可以尝试另一个 MP4 mux 过滤器，例如[monogram mp4 mux](http://blog.monogram.sk/janos/2009/01/13/monogram-mp4-mux-0930-alpha/)。

# regex - Eclipse 条件替换为正则表达式

> ID：10917259
> 
> 赞同：0
> 
> 时间：2012-06-06T15:22:17.030
> 
> 标签：regex, eclipse, replace

鉴于文本

```
public void MyFunction(int i, String str, boolean doIt) {
    Log.i(TAG, "Enter MyFunction(int i, String str, boolean doIt)"); 
```

我想在第二行做一些替换，但不是第一行

```
public void MyFunction(int i, String str, boolean doIt) {
    Log.i(TAG, "Enter MyFunction( i:" + i + ", str:" + str ", doIt:" + doIt + ")"); 
```

到目前为止，使用以下正则表达式我设法得到这些结果：

找到“ `\w+\s+(\w+)([,\)])`”
替换为“ `$1:" + $1 + "$2`”

```
public void MyFunction(i:" + i + ", str:" + str ", doIt:" + doIt + ") ") {
    Log.i(TAG, "Enter MyFunction( i:" + i + ", str:" + str ", doIt:" + doIt + ") "); 
```

有没有办法强制只在**Log.i**行上执行替换？

**编辑：**
我尝试了以下正则表达式“ `Log\.i\(.*?\((\s*(\w+\s+(\w+)([,\)]))+`”
但 $1,$2,$3 仅包含最后一个匹配项（最后一个参数：doIt）

> $1=布尔值 doIt)
> $2=doIt
> $3=)

当应该有 3 组 $1,$2,$3 时，每个参数一个。如果您知道如何检索多个匹配项，那也可以作为解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:46:24.560

我屈服了，

我用这个小 perl 来完成这项工作：

```
next unless /Log\.i/;
s/TAG,/TAGG/;
s/(final\s+)?[^ \(]+\s+(\w+)([,\)])/$2:\" \+ $2 \+ \"$3/g;
s/TAGG/TAG,/; 
```

使用命令行：

```
perl -pi <scriptname> <file> 
```

如果有人仍然想贡献一些，我知道我可以运行 perl 作为 Eclipse 外部工具来处理 java 文件。我怎么做？

**更新：**

我写了一篇关于如何使用外部 perl 从 Eclipse IDE 中运行脚本的帖子，
[请参阅帖子](https://stackoverflow.com/questions/10960339/android-eclipse-use-external-tools-to-run-a-script-on-the-code/10960605#10960605)

# javascript - .is(':visible') 的 JQuery if 语句不起作用

> ID：10917263
> 
> 赞同：3
> 
> 时间：2012-06-06T15:22:32.160
> 
> 标签：javascript, jquery, function, toggle

我有一个 div，当页面加载时设置为`display:none;`. 我可以使用这个简单的代码打开它：

```
$(".field-group-format-toggler").click(function()
{
$(".field-group-format-wrapper").css({'display':'block'});
}); 
```

一旦打开，我希望用户能够关闭它，所以我尝试使用 .is(':visible') 函数，然后将我的原始代码包装在 if 语句中，但这次使用`display:none;`

```
if($('.field-group-format-wrapper').is(':visible')){

   $(".field-group-format-toggler").click(function()
  {
    $(".field-group-format-wrapper").css({'display':'none'});
 });

} 
```

这似乎不起作用，我没有收到任何我知道的语法错误。

我也试过这个：

```
if ($('.field-group-format-wrapper').is(':visible'))
$(".field-group-format-toggler").click(function () {
$(".field-group-format-wrapper").css({'display':'none'});
}); 
```

...但这也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:24:39.847

您可以只使用[切换](http://api.jquery.com/toggle/)功能：

```
$(".field-group-format-toggler").click(function()
{
  $(".field-group-format-wrapper").toggle();
}); 
```

这将显示当前隐藏的`'.field-group-format-wrapper'`元素，如果当前可见则隐藏它们。

仅供参考，您的问题中的代码片段不起作用的原因是因为您只是在 dom 就绪时检查元素的可见性，而不是在每次单击时检查 - 因此永远不会附加显示元素的事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:28:01.947

我猜你的函数只在页面加载时被调用，此时所有 div 都被隐藏了。

为什么不在点击事件处理程序中检查可见性？

```
$('.field-group-format-toggler').click(function(){
  var $wrapper = $('.field-group-format-wrapper'); //Maybe $(this).parent()?
  if($wrapper.is(':visible'))
    $wrapper.hide();
  else
    $wrapper.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:29:02.803

如前所述，您可以使用[切换](http://api.jquery.com/toggle/)功能来实现您想要的。

要添加一些额外的信息，当您像这样附加事件时，您实际上是在使用订阅模型。

注册一个事件会将其放入订阅该处理程序的事件队列中。在这种情况下，当您添加第二个事件来更改 CSS 时，您添加的是一个事件，而不是覆盖第一个事件。

虽然事情实际上并没有导致您的问题，但值得注意。

# jquery - 在 jQuery UI 对话框中时 observableArray 绑定表不更新

> ID：10917264
> 
> 赞同：0
> 
> 时间：2012-06-06T15:22:34.173
> 
> 标签：jquery, asp.net-mvc-3, knockout.js, coffeescript

我正在尝试创建一个带有按钮的页面，单击该按钮会打开一个模式对话框，允许用户搜索产品并将选定的搜索结果添加到订单中。

我已经创建了我认为可行的方法（[jsfiddle 示例](http://jsfiddle.net/YuV55/1/)），但是绑定到 an 的搜索结果表`observableArray`不会更新。

如果我从 中删除该`data-bind`属性，`<div id="myDialog"/>`则搜索结果表会正确更新。

此外，我只能通过将 JavaScript 放在正文中（框架选项*no wrap (body)*）让 jsfiddle 示例重复相同的行为，即使在实际实现中的[ready()](http://api.jquery.com/ready/)回调期间加载了脚本。

我哪里错了？

（我已经在[这里](https://gist.github.com/2882533/5be81bd53cfadec4c7c283d0f8afab131b6635f3)发布了我所有的代码。）

**更新：**

似乎 Knockout`foreach`绑定无法看到对`observableArray`. 我创建了自己的绑定（[更新的 jsfiddle 示例](http://jsfiddle.net/YuV55/2/)）模板，它几乎可以满足我的要求，但不是很令人满意。

如何让`foreach`绑定识别集合何时更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:38:11.423

这是您的损坏示例，稍作修改即可`.dialog()`在 setTimeout 中调用：http: [//jsfiddle.net/rniemeyer/YuV55/5/](http://jsfiddle.net/rniemeyer/YuV55/5/)。`ko.applyBindings`jQuery UI 对话框功能将元素移动到页面底部，因此它可能会在初始传递第二次命中它时弄乱绑定。

`ko.applyBindings`这是另一个特定于容器元素调用的示例（没有 setTimeout）：http: [//jsfiddle.net/rniemeyer/YuV55/6/](http://jsfiddle.net/rniemeyer/YuV55/6/)。这意味着`ko.applyBindings`第二次不会点击移动的对话框，因为它将在容器元素之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:13:30.660

经过大量测试后，我认为不可能在绑定到 viewmodel 的 jQuery UI 对话框中使用`foreach`绑定`observableArray`- 其他绑定，例如`text`，`observable`看起来工作正常的绑定。

这个[损坏的示例](http://jsfiddle.net/YuV55/4/)使用了一个绑定到视图模型的对话框，该对话框基于我在[此处](http://jsfiddle.net/rniemeyer/SnPdE/)找到的示例（我认为）。

这个[示例](http://jsfiddle.net/YuV55/3/)完成了我想要的。然而，对话框并没有绑定到视图模型，而是我将一个单击处理程序连接到一个按钮以启动对话框（摘自这篇[文章](http://blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/)）。

这很好用，我对结果很满意。

# bash - 如何使用 bash 将文件从一台基于 unix 的服务器移动到另一台服务器？

> ID：10917270
> 
> 赞同：1
> 
> 时间：2012-06-06T15:23:04.760
> 
> 标签：bash

我有两台服务器。我想使用 bash 将文件从服务器 A 中的目录移动到服务器 B 中的目录。任何人都知道最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:25:08.133

你为什么不使用`scp`（[看看](http://en.wikipedia.org/wiki/Secure_copy)）或`rsync`（[再次，你可以在这里找到一些信息](http://linux.about.com/library/cmd/blcmdl1_rsync.htm)）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:27:58.880

复制它

```
$ scp user@server:/location/of/file . 
```

删除它

```
$ ssh user@server 'rm /location/of/file' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:28:27.973

“移动文件”的标准命令包括“cp”（如果安装了远程目录）、“scp”（“rcp”的安全后继），当然还有“ftp”。这些命令中的任何一个都可以使用“bash”编写脚本。要“移动”文件，您的脚本将“rm”原始文件。

如果您经常这样做，对于许多文件，其中一些可能已经存在（并且不需要重新复制），那么也许“rsync”可能是一个更好的方法：

[http://www.howtoforge.com/mirroring_with_rsync](http://www.howtoforge.com/mirroring_with_rsync)

'希望有帮助！

# visual-studio - 适用于 Windows Phone 8 的 Visual Studio Express 2012 - 它在哪里？

> ID：10917274
> 
> 赞同：5
> 
> 时间：2012-06-06T15:23:44.473
> 
> 标签：visual-studio, windows-phone-7, visual-studio-express, visual-studio-2012

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/fda2bad5%28v=vs.110%29.aspx)指的是 Visual Studio Express 2012 的 3 种风格：

> “这包括适用于 Windows 8 的 Visual Studio Express 2012、适用于 Windows Phone 7 的 Visual Studio Express 2012 和适用于 Web 的 Visual Studio Express 2012。”

~~但是，我找不到任何其他参考或下载链接到 **Visual Studio Express 2012 for Windows Phone 8**。有人知道吗？~~

**更新**： [Windows Phone SDK 8.0](http://dev.windowsphone.com/en-us/downloadsdk)和[Visual Studio Express 2012 for Windows Phone](http://go.microsoft.com/fwlink/p/?LinkId=269891)版本已于 2012 年 10 月 30 日在[Build](http://www.buildwindows.com/)会议上公布。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T15:55:18.973

根据[http://www.microsoft.com/visualstudio/11/en-us/products/express](http://www.microsoft.com/visualstudio/11/en-us/products/express)，一旦 Windows Phone 产品组再次发布更新版本的 SDK（可能是主要版本），它们将立即可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:17:43.077

适用于 Windows Phone 的 Visual Studio Express 2012 现已推出，您可以从[此处](http://aka.ms/JenVS2012)下载。向下滚动到“Visual Studio Express 2012”部分并展开“Visual Studio Express 2012 for Windows Phone”的节点。

更新：您现在可以在此处找到 Visual Studio Express 2012 下载：[https ://www.microsoft.com/en-us/search/Results.aspx?q=visual%20studio%20express%202012&form=DLC](https://www.microsoft.com/en-us/search/Results.aspx?q=visual%20studio%20express%202012&form=DLC)

# wpf - 需要将对象与窗口 WPF 中的文本块绑定

> ID：10917278
> 
> 赞同：0
> 
> 时间：2012-06-06T15:23:58.320
> 
> 标签：wpf, mvvm

我正在使用 MVVM 模式将条目日志与文本块绑定。

```
<Window.DataContext>
        <viewModel:WindowsEventsAutoMountViewModel x:Name="xWindowsEventsDetail"/>
    </Window.DataContext>
    <TextBlock x:Name="xCategoryTextBox" Grid.Column="1"  Grid.Row="0" TextAlignment="Center" Text="{Binding Path= xWindowsEventsDetail.Event.Category}"/> 

            <Label Grid.Row="1" Grid.Column="0" Content="{x:Static res:RecoveryManagerResources.EventDetailViewLabel_Level}" Name="xlabelLevel" ContentStringFormat="{}{0}:"/>
            <TextBlock x:Name="xLevelTextBox" Grid.Column="1"  Grid.Row="1" TextAlignment="Center" Text="{Binding Path= xWindowsEventsDetail.Event.Level}"/> 
```

还有其他领域

但在该领域没有得到任何价值

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:29:32.040

如果 WindowsEventsAutoMountViewModel 是您的类并且它被设置为 DataContext，那么绑定将默认引用该类的子类。

例如，如果您的班级声明：

```
public class WindowsEventsAutoMountViewModel
{
    public string Name { get; set; }
} 
```

您可以将其绑定为：

```
{Binding Path=Name} 
```

只要它设置为您的 DataContext。基本上，从绑定中删除“xWindowsEventsDetail”。

如果您想绑定到不是您的 DataContext 的资源，您可以在绑定中设置 Source 属性到资源：

```
{Binding Path=Name, Source={StaticResource xWindowsEventsDetail}} 
```

DataContext 使您不必指定第二部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:30:16.190

你的路径是错误的。您应该直接绑定到 DataContext，而不是元素。

```
<Window.DataContext>
        <viewModel:WindowsEventsAutoMountViewModel x:Name="xWindowsEventsDetail"/>
    </Window.DataContext>
    <TextBlock x:Name="xCategoryTextBox" Grid.Column="1"  Grid.Row="0" TextAlignment="Center" Text="{Binding Path=Event.Category}"/> 

            <Label Grid.Row="1" Grid.Column="0" Content="{x:Static res:RecoveryManagerResources.EventDetailViewLabel_Level}" Name="xlabelLevel" ContentStringFormat="{}{0}:"/>
            <TextBlock x:Name="xLevelTextBox" Grid.Column="1"  Grid.Row="1" TextAlignment="Center" Text="{Binding Path=Event.Level}"/> 
```

# jquery - 使用 ajax 将 lambda 表达式传递给控制器

> ID：10917281
> 
> 赞同：1
> 
> 时间：2012-06-06T15:24:08.060
> 
> 标签：jquery, asp.net, ajax, json, lambda

我想知道是否可以将 lambda 表达式从视图传递回控制器，例如我有一个模型：

```
public class ExpressionModel<T>
{
    public Expression<Func<T, string>> Expression { get; set; }
} 
```

将模型传递给视图的控制器看起来像这样：

```
public ViewResult Index()
{
    var expressionModel =  new ExpressionModel<SomeClass>();
    expressionModel.Expression = r => r.SomeStringProperty;

    return View(expressionModel);
} 
```

现在视图有一个模型：

```
@model ExpressionModel 
```

现在使用 Ajax 我想将模型传回控制器

```
var model = @Html.Raw(Json.Encode(Model));

$.ajax({ url: "@someControllerUrl",  
    type: 'POST',
    data: JSON.stringify(model),
    contentType: 'application/json; charset=utf-8',
    success: function (data) {
        alert(data.success);
    },
    error: function () {
        alert("error");
    }
 }); 
```

从视图中获取表达式模型的控制器方法看起来像这样

```
[HttpPost]
public ViewResult Index(ExpressionModel expressionModel)
{
    return View();
} 
```

这甚至可以使用ajax吗？或者您只能回发标准类型，如 int、string、bool（或它们在列表或另一个类中的任何组合）？如果不可能，那么我可以以某种方式将字符串转换为 lambda 表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:47:16.693

这个问题似乎与您的相似： [在 JSON 结果中定义函数是否有效？](https://stackoverflow.com/questions/2001449/is-it-valid-to-define-functions-in-json-results)

简而言之：不，您只能回发标准类型。

最后：AJAX 只是通过 Javascript 将 HTTP 数据异步传递回您的服务器。该数据可以是您喜欢的任何数据。然后服务器必须决定如何解析该数据。将用户输入（来自客户端的*任何内容都应视为用户输入）转换为 lambda 表达式是一个**坏主意。*它将允许用户在您的服务器上执行任意代码。

您*应该*做的是创建一个有效 lambda 表达式的服务器端列表，然后传回与您要使用的 lambda 对应的索引。这样，您就可以完全控制在您的服务器上运行的代码。或者，除此之外，使用一些简单的输入解析，从字符串构造 lambda。但是要非常小心，因为这样很容易造成安全漏洞。

# text - 在 Sublime Text 2 中突出显示 nbsp 字符？

> ID：10917285
> 
> 赞同：1
> 
> 时间：2012-06-06T15:24:16.917
> 
> 标签：text, syntax-highlighting, whitespace, sublimetext2

有没有办法在 Sublime Text 2 中突出显示特殊的空白字符，如 nbsp？有几次我将文字从 word 用户复制到我的代码中，但它崩溃了，因为我看不到这些“非法”空白字符......

谢谢！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:12:28.673

这是一个用于完成这项工作的 Sublime Text 插件： [https ://github.com/possan/sublime_unicode_nbsp](https://github.com/possan/sublime_unicode_nbsp)

如果尾随空格的突出显示让您烦恼，您可以注释掉第 125 和 126 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:22:31.540

编辑您的用户设置如下（您可能进入“ `Preferences->Settings Default.`”或“ `Preferences->Setting User.`”取决于您是否已经有一些自定义设置）：

```
{
    "color_scheme": ...,
    "font_size": ...,
    "draw_white_space": "$your_selection"
} 
```

设置设置的规则是：

1.  设置为“无”以关闭绘图空白
2.  设置为列表以仅绘制列表中的空白
3.  设置为“all”以绘制所有空白

# django - Django 选择小部件变量

> ID：10917287
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:24:23.337
> 
> 标签：django, forms, templates, select, widget

任何人都知道如何在模板中获取 Select Widget 选项。

我做过论文。我正在覆盖管理模板，我可以只更改管理表单代码，但我不想出于应用程序完整性的目的。

```
{{field.choices}} 
```

一无所获。

```
{%for i in field%}{{i.choices}}{%endfor%} 
```

产量 ()

我需要从模板访问这个 var。我想将选择字段更改为收音机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:54:46.360

如果`field`是`BoundField`,

```
{{ field.field.widget.choices }} 
```

应该为您提供可迭代的选择。

# php - Zend Framework 中 AJAX 调用后在动作之间传递变量

> ID：10917295
> 
> 赞同：0
> 
> 时间：2012-06-06T15:24:44.643
> 
> 标签：php, javascript, ajax, zend-framework

我正在对控制器进行 ajax 调用，该调用应该更新页面上显示的文章数量。我在控制器中创建了一个处理 ajax 请求的操作。看这里：

```
public function articleswitchAction(){
    $this->view->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);

    $tileLayout = $this->_request->getParam('tc');

    $landscape = 14;
    $portrait = 16;
        if ($tileLayout == "portrait"){
            $limit = $portrait;
        }elseif ($tileLayout == "landscape"){
            $limit = $landscape;
        }else{
            $limit = 15;
        }
    } 
```

$limit 变量在同一控制器内的另一个操作中设置，此变量设置初始视图。

使用 AJAX 调用更改变量后，我需要做什么来更新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:35:14.823

如果您使用 AJAX，则只能使用 javascript 更改 HTML 内容。对此操作的 AJAX 调用将返回类似

```
15 
```

您需要获取此值并将其设置为显示计数的元素。

例如：

```
$.get(
    'url/to/action',
    {'tc':'landscape'},
    function(returned_data) {
        $('#articleCount').text(returned_data);
    }
); 
```

还是我误解了你的问题？

# jquery - XMLHttpRequest 无法加载 Origin http://m.snapbatch.com 不允许 Access-Control-Allow-Origin

> ID：10917296
> 
> 赞同：2
> 
> 时间：2012-06-06T15:24:45.743
> 
> 标签：jquery, ajax, jquery-mobile

我有一个子域网站（移动），它试图在我的主域网站上调用一个 aspx 页面。这里不涉及本地文件（域到域）。我正在使用 jquery mobile 并尝试进行 ajax 调用。通过浏览网络，我知道有人会 A. 理解我的问题并且 B. 可以回答的可能性很小。

再来一次。从 jquery 移动站点到域站点进行 ajax 调用，得到错误 Origin is not allowed by Access-Control-Allow-Origin。

我添加了这个，它没有工作

```
$(document).bind("mobileinit", function () {
        $.mobile.allowCrossDomainPages = true;
        $.support.cors = true;
    }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:29:27.133

您的服务器需要发送此 HTTP 标头：

```
Access-Control-Allow-Origin * 
```

使用[PHP](http://en.wikipedia.org/wiki/Php)（在服务器上），您将使用以下代码：

```
header('Access-Control-Allow-Origin: http://www.yourdomain.com'); 
```

或使用 PHP 允许来自任何客户端域的请求：

```
header('Access-Control-Allow-Origin: *'); 
```

您可以将 Apache 配置为在配置文件中为您发送此标头：

[http://harthur.wordpress.com/2009/10/15/configure-apache-to-accept-cross-site-xmlhttprequests-on-ubuntu/](http://harthur.wordpress.com/2009/10/15/configure-apache-to-accept-cross-site-xmlhttprequests-on-ubuntu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:28:07.540

您正在更改的属性与您是否可以执行 CORS 无关。它们只是指示当前平台是否支持它的标志。改变它们没有任何作用。

如果您想进行跨域请求，您请求的服务器必须返回 JSONP 或返回正确的 CORS 标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:35:10.277

我目前使用 nginx 作为代理在需要跨域生成 jquery ajax 请求的本地环境中解决此问题。

# extjs - Extjs4 MVC，如何从控制器类中获取模型或视图？

> ID：10917297
> 
> 赞同：9
> 
> 时间：2012-06-06T15:24:48.287
> 
> 标签：extjs, view, model, extjs4

```
Ext.define('DigitalPaper.controller.Documents', {
 extend: 'Ext.app.Controller',

 views:  ['Documents'],
 stores: ['Documents'],
 models: ['Documents'],

 init: function() {
     console.log('[OK] Init Controller: Documents');
 } 
}); 
```

获取此控制器的模型或视图的功能是什么？我试过了

```
 Ext.getModel('Documents');
  this.getModel('Documents');
  this.getModel();
  this.getDocumentsModel(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T09:26:56.913

找到的解决方案：

In the Controller it is possible to use the reference to the View:

```
refs: [{
    ref: 'viewDocuments', // will be create the method this.getViewDocuments();
    selector: 'Documents'
}], 
```

So you can get the View with this:

```
this.getViewDocuments(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T01:12:11.447

Ext 控制器很奇怪，因为给定控制器只有一个实例，不管你有多少相关的视图实例。在大多数 MVC 或 MVP 系统中，每个视图实例都有一个控制器实例。

如果您计划使用多个视图实例，则不应在控制器中保留对这些视图的引用。

您可能想查看 Deft 的 ExtJs MVC 扩展，每个视图实例有一个控制器实例（加上依赖注入）：

[http://deftjs.org/](http://deftjs.org/)

无论如何，controller.getView() 返回对视图类的引用，而不是对象实例。与 getModel() 相同。getStore() 确实返回一个商店实例。

在您的控制器中，您可以执行以下操作：

```
this.viewInstance = this.getDocumentsView().create(); 
```

我还建议以单数命名您的模型。它不是文件。它是一个文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T01:11:50.570

这应该有效：

```
Ext.define('DigitalPaper.controller.Documents', {
 extend: 'Ext.app.Controller',

 views:  ['Documents'],
 stores: ['Documents'],
 models: ['Documents'],

 init: function() {
     console.log('[OK] Init Controller: Documents');

     // get references to view and model classes which can be used to create new instances
     console.log('View', this.getDocumentsView());
     console.log('Model', this.getDocumentsModel());

     // reference the Documents store
     console.log('Store', this.getDocumentsStore());

 } 
```

});

这些方法由 Ext 控制器中创建 getter 的方法创建。 [http://docs.sencha.com/ext-js/4-0/source/Controller.html#Ext-app-Controller](http://docs.sencha.com/ext-js/4-0/source/Controller.html#Ext-app-Controller)

该方法如下所示：

```
createGetters: function(type, refs) {
    type = Ext.String.capitalize(type);
    Ext.Array.each(refs, function(ref) {
        var fn = 'get',
            parts = ref.split('.');

        // Handle namespaced class names. E.g. feed.Add becomes getFeedAddView etc.
        Ext.Array.each(parts, function(part) {
            fn += Ext.String.capitalize(part);
        });
        fn += type;

        if (!this[fn]) {
            this[fn] = Ext.Function.pass(this['get' + type], [ref], this);
        }
        // Execute it right away
        this[fn](ref);
    },
    this);
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:37:06.433

getModel() 和 getView() 不返回控制器的模型/视图——它们在应用程序中返回这些的实例（如果不存在，它们将被实例化）。

您可以简单地使用它来获取视图/模型名称：

```
this.views[0] 
```

我不确定你在哪里使用你的获取（即 this.getModel('Details') ），但这些应该正确返回模型的实例（构造函数是唯一可能在引用这些时遇到问题的地方）。

# java - 我对 JLabel 和 JPanel 的 BorderLayout 有疑问

> ID：10917298
> 
> 赞同：1
> 
> 时间：2012-06-06T15:24:51.387
> 
> 标签：java, swing, jpanel, jlabel, border-layout

我正在研究这个绘图程序项目，（更像是扩展它）我遇到了一个讨厌的错误。我在 JPanel 上，在 BorderLayout 的南部添加了一个 JLabel，但它不仅没有被添加到 JPanel 的南部，而且在我在 JPanel 上绘制某些东西后它也会变得模糊。我不明白为什么会发生这两件事。

类代码：

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Painter extends JPanel{

private int pointCount = 0; // count the number of points

// array of 10000 java.awt.Point references
private Point[] points = new Point[10000];
JLabel myCount = new JLabel();

// set up GUI and register mouse event handler
public Painter() {

    myCount.setText("Points so far: " + pointCount);
    add(myCount, BorderLayout.SOUTH);

    // handle frame mouse motion event
    addMouseMotionListener(
            new MouseMotionAdapter() { // anonymous inner class
                public void mouseDragged(MouseEvent event) {
                    if (pointCount < points.length) {
                        points[pointCount] = event.getPoint(); // find the point
                        ++pointCount; // increment number of points in the array
                        repaint();
                        myCount.setText("Points so far: " + pointCount);
                    } // end if     
            } // end of mouseDragged method
        } // end anonymous inner class
    ); // end of addMouseMotionListener
}// end Painter constructor

// draw ovals in a 4-by-4 bounding box at specified locations on window
public void paintComponent(Graphics g) {
    super.paintComponents(g); // clears drawing area

    // draw all points in the array
    for (int i = 0; i < pointCount; i++) {
        g.fillOval(points[i].x, points[i].y, 12, 12);
    } // end for loop
} // end method paintComponent
} // end of Painter class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:41:17.977

第一个问题可以通过调用 setLayout(new BorderLayout); 来解决。作为构造函数的第一行

第二个问题可以通过从paintComponents中删除's'并调用paintComponent来解决

# axapta - 使用相同形式的 2 个网格的多对多关系

> ID：10917299
> 
> 赞同：1
> 
> 时间：2012-06-06T15:24:53.520
> 
> 标签：axapta, x++, dynamics-ax-2012

我是 AX 新手，所以这可能是一个简单的问题。

想象一下多对多关系中的两个表**用户**和**组：**

*   一个用户可以属于多个组。
*   一个组可以属于多个用户。

因此，我在 AX 中创建了 3 个表来表示这种关系：

*   **用户**
*   **团体**
*   **GroupUser**（用于创建与用户和组表中的 PK 的多对多关系的中间表）

现在想象我有一个有 2 个网格的表格。

每个网格只有一列不可编辑。一个网格包含用户列表（用户表定义为数据源），另一个网格包含组列表（组表定义为数据源）。

**一切都显示正常，但我希望在选择组时只显示它所属的用户，并且我可以选择用户。**

最后一部分怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:39:33.280

显示属于某个组的用户需要`exists join`在`GroupUser`桌面上使用一个。

从你的描述中我不清楚，是总是这样还是只有在选择了一个组时才会出现这种情况。

使用`GroupUser`with `JoinMode`set 创建一个新的表单数据源`ExistsJoin`并链接到`User`表。

如果仅在选择组时过滤，则`GroupUser`禁用数据源：

```
user_ds.query().dataSourceTable(tableNum(GroupUser)).enabled(<group is selected>); 
```

# f# - 如何让 F# Interactive 窗口使用与项目相同的路径？

> ID：10917300
> 
> 赞同：7
> 
> 时间：2012-06-06T15:24:56.937
> 
> 标签：f#, f#-interactive

在我的项目中，我正在打开一个文件，其中包含一些可执行文件的相对路径。我试图在 F# Interractive 窗口中测试我的代码，但它似乎从完全不同的路径运行。如何更改路径/使其从与项目相同的路径运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T15:30:36.550

我认为[`__SOURCE_DIRECTORY__`](http://msdn.microsoft.com/en-us/library/dd233234.aspx)标识符在这里可以提供帮助。

您应该使用[编译器指令](http://msdn.microsoft.com/en-us/library/dd233195.aspx)来区分使用 F# Interactive 和编译 F# 项目。

```
#if INTERACTIVE
  let path = __SOURCE_DIRECTORY__ + some_relative_path
#else
  let path = another_relative_path
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T16:01:54.760

在 FSI 中运行时，您可以设置当前工作目录：

```
#if INTERACTIVE
System.IO.Directory.SetCurrentDirectory("<project_path>")
#endif 
```

# samsung-mobile - 三星 S3 和 51-android.rules，找不到设备

> ID：10917301
> 
> 赞同：1
> 
> 时间：2012-06-06T15:25:01.360
> 
> 标签：samsung-mobile

我的 51-android.rules 如下，它可以与我的三星 i9000 连接（通过 DDMS...）

# 三星i9000

SUBSYSTEM=="usb", ATTR{idVendor}=="04E8", MODE="0666", GROUP="plugdev"

但如果使用三星 i9300 则不起作用

也许我缺少“ATTRS{idProduct}”？

但我找不到三星 i9300 的值。

任何评论都会有所帮助...

谢谢*哦*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T06:22:58.133

1`$ sudo apt-get install mtp-tools`

2 在 MTP 模式下连接你的 Galaxy 手机

3 `$ mtp-detect`，然后它会输出如下内容：

> 设备 0（**VID=04e8**和**PID=6860**）是三星 GT-P7310/P7510/N7000/I9100/Galaxy Tab 7.7/10.1/S2/Nexus/Note。找到 1 个设备：三星：GT-P7310/P7510/N7000/I9100/Galaxy Tab 7.7/10.1/S2/Nexus/Note (04e8:6860) @ bus 1, dev 9

4 找出供应商 ID 和产品 ID。编辑 /etc/udev/rules.d/51-android.rules。

> SUBSYSTEM=="usb", ATTR{idVendor}==" **04E8** ", ATTR{idProduct}==" **6860** ", MODE="0666", OWNER="用户名"

“用户名”是被授权通过 USB 访问电话的用户的实际用户名。

5`$ sudo service udev restart`

6 重新连接手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:51:53.617

您确定在开发者选项中启用了“USB 调试”吗？尝试使用 6860 作为产品 ID。

# visual-studio-2010 - sql 查询 - 变量 - 日期 - Visual Studio 210

> ID：10917306
> 
> 赞同：0
> 
> 时间：2012-06-06T15:25:12.853
> 
> 标签：visual-studio-2010, sql-server-2008, date-comparison

试图在两个日期之间进行搜索以获取某些`rows`. 7天的搜索。

```
 @date = DateTime.Today
   @date2 = //need it to be the prior 7 days

SelectCommand = "SELECT [DateReceived], [DeviceLevel] FROM [TBLReadings] WHERE [DateReceived=@date] <= [DateReceived=@date2] ORDER BY [DateReceived] DESC; 
```

这是错误的，但我希望它能解释我正在尝试做的事情 - 只使用过`PHP`和`MySQL`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:32:58.443

如果您尝试在 2 个日期之间进行搜索，则可以使用`between`

查询将类似于

```
select [dateRecieved], [DeviceLevel] from YourTable where DateReceived between @date and @date2 ORDER BY [DateReceived] DESC 
```

在 c# 中，要获得 7 天，您可以使用`Datetime.Now.AddDays(7)`

[http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)

对不起英语不好！

编辑：这只是查询，在选择命令中将其用作字符串

# asp.net - 从客户端 jQuery 在代码中调用 webmethod

> ID：10917309
> 
> 赞同：1
> 
> 时间：2012-06-06T15:25:25.200
> 
> 标签：asp.net, jquery

我正在尝试使用 jQuery 直接调用 ASP.NET AJAX 页面方法。我使用[encosia.com](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)作为参考。我的内联 javascript 是

```
 <script type="text/javascript">
           $(document).ready(function() {
               // Add the page method call as an onclick handler for the div.
               $("#Result").click(function() {                   
                   $.ajax({
                       type: "POST",
                       url: "Default.aspx/GetDate",
                       data: "{}",
                       contentType: "application/json; charset=utf-8",
                       dataType: "json",
                       success: function(msg) {
                           // Replace the div's content with the page method's return.
                           $("#Result").text(msg.d);
                       }
                   });
               });
           });

            </script>
       <div id="Result">Click here for the time.</div> 
```

我的网络方法是

```
<WebMethod()> _
Public Shared Function GetDate() As String
    Return DateTime.Now.ToString()
End Function 
```

我会使用 FF 并检查发送的 POST，但由于我目前所在的位置只有 IE 7，这有点难以做到。其他相关信息，ASP.net 2.0。有谁知道我做错了什么？

* * *

## 更新

web.config - 预先存在的仍然无法正常工作

```
<httpModules>
  <remove name="FormsAuthentication" />
  <remove name="PassportAuthentication" />
  <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</httpModules> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T01:44:41.817

由于您使用的是 ASP.NET 2.0，因此您需要安装 ASP.NET AJAX Extensions，就像 Joe Enos 提到的那样。我在这里有一些关于必要配置工作的信息：http: [//encosia.com/asmx-scriptservice-mistakes-installation-and-configuration/](http://encosia.com/asmx-scriptservice-mistakes-installation-and-configuration/)

此外，`.d`响应的包装器是[一个直到 ASP.NET 3.5 才出现的附加功能](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)。因此，即使您的其他一切工作正常，您`msg.d`也将使用`undefined`ASP.NET 2.0。省略`.d`并做那个：

```
success: function(msg) {
  // Replace the div's content with the page method's return.
  $("#Result").text(msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:19:34.490

In .NET 2.0, you need to make sure you install the ASP.NET AJAX extensions. In .NET 3.5 and 4.0, the encosia solution works without any modifications.

I don't remember exactly what you need to install, but it might be [this](http://www.microsoft.com/en-us/download/details.aspx?id=883).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:42:37.927

您是否检查过您的 web.config 以允许页面方法？

```
<system.web>
  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </httpModules>
</system.web> 
```

这里的这篇文章也有[类似的问题](https://stackoverflow.com/a/752815/523496)

# blackberry - 从字节黑莓获取图像

> ID：10917314
> 
> 赞同：0
> 
> 时间：2012-06-06T15:26:04.887
> 
> 标签：blackberry

我正在开发一个从服务器检索图像的黑莓应用程序，一些图像正在被检索，而其他图像在编码图像行中出现错误

```
 ImageFromUrl _img = new ImageFromUrl(item.getThumbLink());
            byte[] bytes = _img.getbitmap();
            Bitmap newBitmap = new Bitmap(width, fieldHeight);
            if (bytes != null) {
                // bitmap = Bitmap.createBitmapFromBytes(bytes, 0,
                // bytes.length, Bitmap.SCALE_TO_FIT);
                EncodedImage image = EncodedImage.createEncodedImage(bytes,
                        0, bytes.length);
            } 
```

这就是获取字节的连接

```
ImageFromUrl(String url) {
    this.url = url;
}

public byte[] getbitmap() {

    try {

        connection = (HttpConnection) Connector.open(
                url + Connection.getBlackBerryConnectionParams(),
                Connector.READ, true);

        InputStream is = connection.openInputStream();

        DataInputStream dis = new DataInputStream(is);
        ByteArrayOutputStream bStrm = new ByteArrayOutputStream();

        int ch;
        while ((ch = dis.read()) != -1) {
            // System.out.println((char) ch);
            // msg = msg + (char) ch;
            bStrm.write(ch);
        }
        dataArray = bStrm.toByteArray();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return dataArray;
} 
```

我怎样才能解决这个问题以使所有图像都没有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:43:11.920

试试这个代码：

```
public Bitmap getBitmapFromUrl(String url)
{
Bitmap bitmap=null;
try
{
    HttpConnection connection=(HttpConnection)Connector.open(url);
    connection.setRequestMethod(HttpConnection.GET);
    InputStream is=connection.openInputStream();
    int length=is.available();
    byte[] data=new byte[length];               
    data=IOUtilities.streamToBytes(is); 
    connection.close();
    is.close();
    bitmap=Bitmap.createBitmapFromBytes(data,0,data.length,1);
    if(bitmap!=null)
        return bitmap;
    else
        return bitmap=Bitmap.getBitmapResource("noimage.png");

}
catch (Exception e) 
{
    return bitmap=Bitmap.getBitmapResource("noimage.png");
}
} 
```

# asp.net - 混淆网址

> ID：10917320
> 
> 赞同：2
> 
> 时间：2012-06-06T15:26:31.103
> 
> 标签：asp.net, url

我正在一个资产管理网站上工作，每当向用户发布资产时，系统都会发送一封电子邮件通知，其中包含一个 URL，该 URL 将向用户显示所有发给他的资产。我本可以使用查询字符串来传递用户 ID，但人们可能再次滥用它来查看发给其他用户的资产。我的客户不希望用户在单击链接时进行身份验证。所以我需要一些东西来隐藏在查询字符串中传递的参数，或者至少让它们变得模糊。我已经阅读了有关 url 编码、GUID 等的信息，但我不确定该怎么做。我只是一个初学者。请原谅我的无知并指出我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:42:52.007

采取你所说的，你只是一个初学者，并假设这将是公开的，你可以做最简单的方法：

在您的数据库中创建一个新表并调用例如`tbl_links`，列只需添加 3

```
user_id (foreigner key to the user table)
guid (primary key, unique)
settings (nvarchar(250) 
```

当您需要发送电子邮件时，为用户创建一个新行，例如：

```
Guid guid = Guid.New();
String settings = "date_from:2012/01/01;date_to:2013/01/01"; 
```

并将其插入数据库，您在电子邮件中放置的链接应具有 guid，例如[http://domain.com/info/?g=](http://domain.com/info/?g=) ...。

您可以将 Json 附加到该`settings`列并在代码中再次将其解析为一个对象，如果您想采用这条路线，请提出一个新问题。

我个人使用安全算法仅通过`user_id`但您确实说您是初学者，所以我只向您展示了简单且仍然有效的方法。

* * *

**PS**出于安全原因，您应该在电子邮件中说明您的链接仅在接下来的 4 小时左右有效，因此您可以阻止人们生成 GUID 以尝试获取一些信息.... 只需添加一`create_date`列类型`datetime`和用它来查看链接是否已经过期......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:30:32.677

对于模糊 URL 参数，您需要使用[修改后的 Base64 编码](http://en.wikipedia.org/wiki/Base64#URL_applications)。请记住，模糊性不是安全性，Base64 编码不会以任何方式确保任何安全性。

如果您打算将其用于身份验证目的，我认为您应该重新考虑。研究公钥加密和数字签名作为起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:41:13.130

试图保护对 URL 的访问不是正确的方法。自由地提供网址并验证您的用户。

我还强烈建议使用 SSL 来提供这些数据。

一旦模糊性不再模糊，通过模糊性实现的安全性就会 100% 失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T16:00:46.213

您可以做的是为 id 添加一些前缀和后缀并加密该字符串。像这样的东西：

```
static public string EncodeTo64(string toEncode)
{
  byte[] toEncodeAsBytes
        = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
  string returnValue
        = System.Convert.ToBase64String(toEncodeAsBytes);
  return returnValue;
}

static public string DecodeFrom64(string encodedData)
{
  byte[] encodedDataAsBytes
      = System.Convert.FromBase64String(encodedData);
  string returnValue =
     System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);
  return returnValue;
}

string prefix = "lhdsjñsdgñdfj";
string suffix  = "dfknsfñn3ih";

var strToEncode = prefix + "|" + id + "|" + suffix;
var encoded =  EncodeTo64(str);

var decoded = DecodeFrom64(encoded).Split('|');

if( decoded.length != 3 || decoded[0] != prefix || decoded[2] != suffix )
    throw new InvalidArgumentException("id");

var decodedId = decoded[1]; 
```

# mysql - 如果多行不匹配，Mysql 将默认设置为 null

> ID：10917322
> 
> 赞同：0
> 
> 时间：2012-06-06T15:26:37.000
> 
> 标签：mysql, select, setdefault

我有一张叫做发票的表。为了帮助简化这个问题，我们将说发票中有 4 列。

```
id                    (PK auto int)
booking_id            (int)
is_business_invoice   (1 or 0 or NULL)
amount                (decimal) 
```

一个预订可以有多个发票。

我试着写一个查询，什么将确定对于给定的预订 ID，它们都是商业发票还是个人发票。如果有多个不同`is_business_invoice`类型的发票，它将默认为空。如果有 3 个预订并且所有 3 个预订，`is_business_invoice`那么它将返回 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:31:59.687

```
select case when count(is_business_invoice) = sum(is_business_invoice) 
            then 1 
            when sum(is_business_invoice) = 0
            then 0
            else null 
      end as IsBusinessInvoices
from invoices
group by booking_id 
```

# jsf-2 - 当我选择复选框时如何在jsf中呈现选定的复选框值

> ID：10917323
> 
> 赞同：1
> 
> 时间：2012-06-06T15:26:38.583
> 
> 标签：jsf-2

我已经渲染了复选框。当我选择复选框时，复选框值应该显示在面板中。我为此编写了代码但没有工作

```
 <h:selectManyCheckbox id="chkedition" value="#{newspaperBean.selectedEditions}" layout="lineDirection" styleClass="nostyle">
                                  <f:selectItems value="#{newspaperBean.searchEditionByNewspaper()}" var="item" itemLabel="#{item.editionName}" itemValue="#{item.editionName}"/>
                                  <f:ajax render="display" event="select"/>
                              </h:selectManyCheckbox>
                          </td>
                        </tr>
                            <tr>
                                <td colspan="2">
                                    <p:panel id="display" header="You have selected">
                                    <c:forEach items="#{newspaperBean.selectedEditions}" var="it">
                                        <h:outputText value="#{it}"/><br/>
                                    </c:forEach>
                                    </p:panel>
                                </td>
                            </tr> 
```

这在我提交表单时有效，但我希望在我选择复选框时这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:39:49.193

删除`event="select"`属性。这是不正确的事件。它仅在您选择输入字段和文本区域中的任何文本时触发，而不是在您单击复选框时触发。

```
<f:ajax render="display" /> 
```

默认事件已经在复选框`valueChange`中解析`click`，这正是您所需要的。如有必要，您可以通过 明确指定它`event="click"`，但如上所述，它已经是默认值，因此只需省略它。

另一个潜在的问题是`<c:forEach>`在面板中。如果 bean 是视图范围的，这将失败，因为它在视图构建期间运行并获得其自己的单独的视图范围 bean 实例，该实例可能不包含提交的数据。你需要`<ui:repeat>`改用。

```
<ui:repeat value="#{newspaperBean.selectedEditions}" var="it">
    <h:outputText value="#{it}"/><br/>
</ui:repeat> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# jquery - 控制器处理 ActionResult 和 JSON 数据？

> ID：10917324
> 
> 赞同：0
> 
> 时间：2012-06-06T15:26:48.063
> 
> 标签：jquery, asp.net-mvc-3, jquery-tokeninput

好的 - 从我的控制器/创建，我想更新我的模型的两个部分：

*   杂志
*   作者

Journal\Create - 将创建一个基本日志，并查询作者表并使用作者姓名填充自动完成输入框（使用 JQuery，tokenInput）。

这很好用，到目前为止，我有一个空白表格来填写我的期刊详细信息，并且是选择一个或多个作者的好方法。

我感到困惑的是我如何让选定的作者回到我的控制器，因为签名是：

```
[HttpPost]
public ActionResult Create(JOURNAL journal)
{
    //persist the journal object in the database ....

    but where to get the authors that were picked in the input box??? and persist those
    in the model?
} 
```

现在，我涉足了，发现我可以使用

```
Request.Form["authorlist"]; 
```

这让 ID 回来了（不太确定如何？？），但它们都连接在一起，没有任何分隔字符，所以没有多大意义，例如

1564654324544434344797361679

它应该是

1564,6543,2454,4434,3447,9736,1679

然后我可以对数据做一些事情。

无论如何，如果你们知道如何以更好的方式从我的输入框中取回结果，以及使用模型对象来填充数据库，那就太好了。

下面是代码：

**看法**

```
@using (Html.BeginForm()){
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>JOURNAL</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.TITLE)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TITLE)
            @Html.ValidationMessageFor(model => model.TITLE)
        </div>
        <div class="editor-label">
            Select Authors</div>
        <div class="authors">
            <div class="editor-field">
                <input type="text" id="authorlist" name="q"/>               
            </div>
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

**JAVASCRIPT**

```
 $("#authorlist").tokenInput('/author/getauthors/', {
        hintText: "Enter surname please..",
        searchingText: "Searching...",
        preventDuplicates: true,
        allowCustomEntry: true,
        highlightDuplicates: false           
    }); 
```

**CONTROLLER（获取作者列表）**

```
public JsonResult GetAuthors(string term)
        {
            Debug.WriteLine("Term is: " + term);
            term = term.ToUpper();
            var authors = db.AUTHOR
                .Where(a => a.FULL_NAME.ToUpper().StartsWith(term))
                .Select(a => new { id = a.AUTHOR_ID, name = a.FULL_NAME });
            return Json(authors, JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:44:25.407

将作为参数置于操作中：

```
[HttpPost]
public ActionResult Create(JOURNAL journal, FormCollection collection)
{
    //persist the journal object in the database ....

    var authors = collection["q"]; // gets by name
} 
```

# coordinates - 从坐标转换为像素

> ID：10917326
> 
> 赞同：0
> 
> 时间：2012-06-06T15:27:09.530
> 
> 标签：coordinates, pixel

我正在我的 google v3 地图上实现右键单击上下文菜单，我需要获取像素 x 和 y 以正确定位菜单。我得到了 lat 和 lng，任何人都有一个很好的解决方案来获取像素 x 和 y？

此致

亨克莫塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T19:36:33.037

对上述答案的更正：

```
index=x+(y*width) 
```

//（不是 y*height ... 因为您正在使用一条完整的水平像素线（例如 1280 像素）并将其乘以 x 所在的屏幕向下的行数 (y)，然后添加 x 以说明x 像素在下一个完整的行中。）

```
x = index % width
y = index / height 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:32:48.343

```
index=x+(y*height)

x = index % width
y = index / height 
```

# php - 从上传文件中获取 mime 类型 - 不一致

> ID：10917328
> 
> 赞同：0
> 
> 时间：2012-06-06T15:27:22.823
> 
> 标签：php, mime-types, uploading

我有一个脚本，主要基于从[jQuery Uploader](http://blueimp.github.com/jQuery-File-Upload/)上传 PHP 文件的示例。它使用以下代码获取文件类型（它获取此 $_FILES 组件）...

```
$fileType = (isset($_SERVER['HTTP_X_FILE_TYPE']) ? $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type']); 
```

笔记; $upload['type'] 来自 $_FILES['files']['type']。

现在，这很好 - 除了某些文件似乎没有文件类型信息。[我可以通过在 PHP 中使用文件信息](http://www.php.net/manual/en/function.finfo-open.php)和 mimetype 函数获得更准确的响应- 但它们不适用于 $_FILES 对象，我正在尝试在将文件传输到 s3 之前进行此检查，所以我真的不想在本地加载它。

谁能建议我是否可以从 $_FILES 获得更准确的报告类型，还是必须在本地加载才能运行这些替代 PHP 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:30:39.463

`finfo`是这样做的*唯一方法。*您*不能*依赖客户端发送给您的信息，从客户端伪造太容易了。

没有理由不使用它`$_FILES`，您只需将`$_FILES['files']['tmp_name']`其作为文件路径传递 - 这仍然是有效的文件路径，您无需调用`move_uploaded_file()`即可访问数据。将文件留在临时位置还有一个好处，即如果您没有对它做任何事情，它会在脚本完成时被销毁。

# c# - 如何使 watwp.codeplex.com NuGet Phone.Storage.Sample 应用程序工作？

> ID：10917330
> 
> 赞同：0
> 
> 时间：2012-06-06T15:27:30.947
> 
> 标签：c#, windows-phone-7, azure, azure-blob-storage

我对使用 Windows Phone 应用程序中的 blob 存储感兴趣。

适用于 Windows Phone 的 Windows Azure 工具包应启用此功能。[http://watwp.codeplex.com/](http://watwp.codeplex.com/)

他们在 NuGet 上有一个示例应用程序，您可以通过运行以下命令将其安装在 VS 的默认 WP 应用程序中：

PM> Install-Package Phone.Storage.Sample，在包管理器控制台中

[http://www.nuget.org/packages/Phone.Storage.Sample](http://www.nuget.org/packages/Phone.Storage.Sample)

运行应用程序所需的唯一配置是将 WMAppManifest.xml 中的默认导航页面更改为“/Pages/StoragePage.xaml”。

但是，当我尝试在 VS 的默认 WP 应用程序中运行此示例应用程序时，我收到**错误消息：“HTTP 标头之一的值格式不正确。RequestId:38df4766-0da8-4212-84a1-3da0c994a876 时间:2012-06-06T14:50:02.0209600Z" 知道该怎么做才能让它工作吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:10:18.047

由于您刚刚在示例中进行了一项更改，我相信您正在使用 Azure Storage Emulator。您是否已验证 Azure 存储模拟器是否正在运行。还要确保在您的主机中有一个物理网络而不是虚拟网络来连接，因为我已经看到了虚拟网络和环回地址的此类问题。

这是非常机器特定的问题，因为我只是尝试完全相同的步骤而没有错误。此问题可能存在任何随机错误，当您尝试重新启动机器时，重新安装 sdk 和其他组件，它就会消失。我可以帮助您找到一些解决问题的方法：

当您在 WP 模拟器中运行此应用程序时，在使用开发存储时，HTTP 请求通过 localhost:PORT/storage_container 表示网络流量在 localhost 上，因此您可以运行 fiddler 以捕获 127.0.0.1 上的流量（默认情况下未设置为你需要配置它一旦你有网络跟踪你可以找到根本原因但是很难找到修复，就像我过去看到的那样。

# android-cursor - java.lang.IllegalStateException：试图重新查询已经关闭的游标 android.database.sqlite.SQLiteCursor@

> ID：10917331
> 
> 赞同：2
> 
> 时间：2012-06-06T15:27:51.743
> 
> 标签：android-cursor

我已经阅读了几篇相关的帖子，甚至在[这里](https://stackoverflow.com/questions/5915597/android-error-java-lang-illegalstateexception-trying-to-requery-an-already-clo/10845810#10845810)发布和回答，但似乎我无法解决问题。

我有 3 个活动：Act1（主要）Act2 Act3

当来回 Act1->Act2 和 Act2->Act1 时我没有问题 当去 Act2->Act3 我没有问题 当去 Act3->Act2 时我偶尔会遇到以下错误：`java.lang.IllegalStateException: trying to requery an already closed cursor android.database.sqlite.SQLiteCursor@...`. 这是一个 ListView 游标。

我尝试了什么： 1\. 添加`stopManagingCursor(currentCursor);`到 Act2 的 onPause() 以便在离开 Act2 到 Act3 时停止管理光标

```
protected void onPause() 
{
    Log.i(getClass().getName() + ".onPause", "Hi!");

    super.onPause();
    saveState();

    //Make sure you get rid of the cursor when leaving to another Activity
    //Prevents: ...Unable to resume activity... trying to requery an already closed cursor
    Cursor currentCursor = ((SimpleCursorAdapter)getListAdapter()).getCursor();
    stopManagingCursor(currentCursor);
} 
```

2.  从 Act3 返回 Act2 时，我执行以下操作：

    私人无效populateCompetitorsListView() { ListAdapter currentListAdapter = getListAdapter(); 光标 currentCursor = null; 光标锦标赛StocksCursor = null;

    ```
    if(currentListAdapter != null)
    {
    currentCursor = ((SimpleCursorAdapter)currentListAdapter).getCursor();

    if(currentCursor != null)
    {
        //might be redundant, not sure
                    stopManagingCursor(currentCursor);

        // Get all of the stocks from the database and create the item list
        tournamentStocksCursor = mDbHelper.retrieveTrounamentStocks(mTournamentRowId);
                ((SimpleCursorAdapter)currentListAdapter).changeCursor(tournamentStocksCursor);
        }   
        else
        {
            tournamentStocksCursor = mDbHelper.retrieveTrounamentStocks(mTournamentRowId);
        }
    }
    else
    {
        tournamentStocksCursor = mDbHelper.retrieveTrounamentStocks(mTournamentRowId);
    }

        startManagingCursor(tournamentStocksCursor);        

        //Create an array to specify the fields we want to display in the list (only name)
        String[] from = new String[] {StournamentConstants.TblStocks.COLUMN_NAME, StournamentConstants.TblTournamentsStocks.COLUMN_SCORE};

        // and an array of the fields we want to bind those fields to (in this case just name)
        int[] to = new int[]{R.id.competitor_name, R.id.competitor_score};

        // Now create an array adapter and set it to display using our row
        SimpleCursorAdapter tournamentStocks = new SimpleCursorAdapter(this, R.layout.competitor_row, tournamentStocksCursor, from, to);

        //tournamentStocks.convertToString(tournamentStocksCursor);
        setListAdapter(tournamentStocks);       
    } 
    ```

所以我确保我使光标无效并使用不同的光标。我发现当我进入 Act3->Act2 时，系统有时会为列表视图使用相同的光标，有时它会有不同的光标。

这很难调试，我在调试时永远无法捕捉到崩溃的系统。我怀疑这与调试所需的时间（长）和运行应用程序所需的时间有关（短得多，不会因断点而暂停）。

在 Act2 中，我使用以下 Intent 并期望没有结果：

```
protected void onListItemClick(ListView l, View v, int position, long id) 
{       
    super.onListItemClick(l, v, position, id);

    Intent intent = new Intent(this, ActivityCompetitorDetails.class);

    intent.putExtra(StournamentConstants.App.competitorId, id);
    intent.putExtra(StournamentConstants.App.tournamentId, mTournamentRowId);   

    startActivity(intent);
} 
```

移动 Act1->Act2 Act2->Act1 从来没有给我带来麻烦。我在那里使用`startActivityForResult(intent, ACTIVITY_EDIT);`但我不确定 - 这可能是我麻烦的根源吗？

如果有人能对这个主题有所了解，我将不胜感激。我有兴趣了解更多关于这个主题的信息。

感谢：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T05:52:15.853

放这个它可能对你有用：

```
 @Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();

            orderCursor.requery();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:45:14.767

我称之为二维问题：造成这次崩溃的原因有两个： 1\. 我使用`startManagingCursor(mItemCursor);`了我不应该使用的地方。2\. 我忘了 initCursorAdapter() （用于自动完成）`onResume()`

```
//@SuppressWarnings("deprecation")
private void initCursorAdapter()
{
    mItemCursor = mDbHelper.getCompetitorsCursor("");      
    startManagingCursor(mItemCursor); //<= this is bad!

    mCursorAdapter = new CompetitorAdapter(getApplicationContext(), mItemCursor);       

    initItemFilter();
} 
```

现在它似乎工作正常。但愿如此...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T14:30:16.910

这也有效

```
 if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
            startManagingCursor(Cursor);
        } 
```

# iphone - 如何在 iphone sdk 中压缩音频文件

> ID：10917333
> 
> 赞同：0
> 
> 时间：2012-06-06T15:27:56.273
> 
> 标签：iphone, xcode

我有一个正在录制长音频的应用程序。我希望使用 Web 服务将此音频文件保存在服务器中。我想压缩文件，然后将其上传到服务器以便快速上传。

请建议我如何压缩音频文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:39:52.833

“试试 AQuA Wideband：

[http://www.sevana.fi/aqua_music.php](http://www.sevana.fi/aqua_music.php)

该过程很简单，只需请求使用 MP3 和 OGG 优化脚本和套件进行评估，您就可以从音频中获得最佳质量/压缩比。我敢肯定，如果您要求提示以确保它适合 100Mb，它们也会对您有所帮助。”

[iphone如何压缩音频文件大小](https://stackoverflow.com/questions/5752451/iphone-how-to-compress-audio-file-size)

# php - 修改 htaccess 以从 url 中提取和删除整数值

> ID：10917334
> 
> 赞同：0
> 
> 时间：2012-06-06T15:27:57.303
> 
> 标签：php, .htaccess

我有一个 htaccess 文件，如下所示：

```
Options +FollowSymLinks -MultiViews

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?$1=$1&pid=$2 [L,QSA]
RewriteRule ^([^/]+)/?$ /index.php?pid=$1 [L,QSA] 
```

它将诸如 fe “administration/modules”之类的链接指向“index.php/administration=administration&pid=modules”或“administration”指向“index.php?pid=administration”。

出于性能原因，我想修改 htaccess，所以它可以直接链接

“管理_55”

至

index.php?pid=55"

所以'55'（记录的id）必须以某种方式从pid参数“pid=administration_55”中提取出来。因为我也希望有一个可见的 url，比如“www.example.com/administration”，没有“_55”部分，我想知道，如何直接在 htaccess 文件或在响应带有标头重定向的 php 文件？

提前感谢，杰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:51:59.950

```
# e.g. /administration/modules 
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?$1=$1&pid=$2 [L,QSA]
# e.g. /administration_55
RewriteRule ^([^/]+)_([[0-9]+)/?$ /index.php?$1=$1&pid=$2 [L,QSA]
# e.g. /test
RewriteRule ^([^/]+)/?$ /index.php?pid=$1 [L,QSA] 
```

至于去掉55，最好的办法是用PHP。我的数据库表中有一个名为“url”的单独字段，因此我可以找到具有正确 url(-part) 的记录。为了提高性能，我还向该字段添加了索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:41:44.910

您可以使用 htaccess 进行重定向，但您必须有带有 _55 部分的 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:33:45.223

仅仅因为你可以并不意味着你应该......你不能在站点本身的 index.php 中处理这个基于`REFERRER`另外的更安全并且不需要启用 .htaccess 支持...... ?

# windows - 无法在没有 MSI 的 Windows 上安装 ODBC 驱动程序 (DLL)

> ID：10917338
> 
> 赞同：0
> 
> 时间：2012-06-06T15:28:06.947
> 
> 标签：windows, installation, odbc, driver

我们已经为一些数据源实现了一个 ODBC 驱动程序，并在 Linux 上使用 UnixODBC 驱动程序管理器对其进行了测试。该驱动程序应该可以在 Linux 和 Windows 上运行。所以，我们也想在 Windows 上部署和使用这个驱动程序。我们在 Windows 上构建了这个驱动程序代码，使用 Visual Studio 2010 高级版创建了一个 64 位驱动程序 DLL。

现在，我们要在 Windows 上安装这个驱动程序，在 microsfot 驱动程序管理器中注册它，然后使用一些应用程序对其进行测试。我们没有此驱动程序的 MSI/setup 安装程序。所以我们想在 Windows 上手动安装这个驱动程序（Dll）。

我们尝试在 Windows 上使用“regsvr32”工具，使用以下命令：“regsvr32”，并出现以下错误：“模块已加载，但未找到入口点 DLLRegisterServer”

我们在网上搜索，似乎这个命令寻找一些我们的 DLL 中不存在的入口点函数。DLL是否需要具有此功能？

在网上做了一些调查，发现一些方法，如InstallDriver，ConfigDSN，ConfigDriver需要作为Driver的一部分来实现。我们的驱动程序中没有实现这些方法，这会是一个问题吗？ODBC 驱动程序代码中是否需要这些方法来安装驱动程序 dll？此代码还有一个名为“DLLMain”的方法。这在 Windows 上的典型 ODBC 驱动程序实现中是否需要？

有没有其他方法可以在 Windows 上安装我们的 ODBC 驱动程序 (DLL)？请建议您是否有类似的经历，或者我们遗漏了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:47:00.553

我有类似的问题，并且必须实现所有需要的方法。据我所知 DllMain 是没有必要的。但我从未使用过 odbc dll 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:35:30.797

您只需要“regsvr32”即可注册 COM/ActiveX .dll。

并非所有 .dll 都是 COM/ActiveX - 听起来你的不是。

并非所有程序都需要 .msi - 也许一个简单的文件副本就足够了。

建议：

如果您从其他人那里复制了这个 .dll ......那么请阅读他们的安装说明！

# dictionary - 在 Python 中将项目推送到字典上

> ID：10917342
> 
> 赞同：2
> 
> 时间：2012-06-06T15:28:12.050
> 
> 标签：dictionary, python-2.7

我有一本看起来像这样的字典：

```
diction = {1: {'Type': 'Cartoon', 'Time': 8:00},
           2: {'Type': 'Movie', 'Time': 19:30},
           3: {'Type': 'Show', 'Time': 16:00}} 
```

所以它是一个包含字典的字典。我读过无法对字典进行排序，因此我尝试在创建这些内部字典时将它们动态添加到字典中。我需要它们按时间排序。最早的时间优先。例如，当程序需要将 show 类型的内部字典添加到字典中时，它会根据它们的时间值将其添加到卡通和电影之间。基本上，有没有办法将项目推到字典的中间？我知道您可以将它们弹出，但我找不到任何等效的推送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:44:57.307

正如 Junuxx 建议的那样：“如果您使用字典列表代替会更好吗？” 为什么你不尝试：

```
diction = [{'Type': 'Cartoon', 'Time': 8:00},
           {'Type': 'Movie', 'Time': 19:30},
           {'Type': 'Show', 'Time': 16:00}] 
```

列表是有序的，字典，正如你所说，不是因为它们是用哈希键“探索”的。

现在您可以使用 diction[0]、diction[1] 等简单地检索您的内部字典，并且您将确定它将给出列表中的确切元素，按附加时间排序

# regex - 如何使用正则表达式仅在字符串中删除前面的所有数字

> ID：10917343
> 
> 赞同：0
> 
> 时间：2012-06-06T15:28:13.897
> 
> 标签：regex, actionscript-3

我正在尝试删除字母字符前面的任何数字字符以及以下复杂字符：

```
text = "12 132 2 5517 Publication Date: 12 June, 2012" 
```

在应用正则表达式后，它需要看起来像 ->

```
text = "Publication Date: 12 June, 2012" 
```

我试过`/^\d+ /g`没有成功，有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:33:43.690

你可以试试这个正则表达式：`/^[\d ]+/gi`

# ruby-on-rails - 从 Rails 3.2 到 Cake PHP 2.0。如何做一些 Rails 常见的任务？

> ID：10917346
> 
> 赞同：12
> 
> 时间：2012-06-06T15:28:23.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cakephp, cakephp-2.0

我的目的不是进行比较或讨论哪个框架更好。我知道 CakePHP 和 Rails 的强大功能。我确信有一种方法可以在两者中做类似的事情。

所以，情况就是这样：在 Rails 框架中，我习惯于做一些我想在 CakePHP 上做的事情（其中一些我在文档中没有找到）。

他们是：

**包管理**

在 Rails 中，我有一个“Gemfile”文件，我在其中编写了应用程序中使用的每个“gem”的版本。如果我想升级或降级，我更改版本并运行“捆绑更新”命令。你如何更新插件？您是否使用 GIT 之类的工具来检查每个新版本？

**迁移**

当我需要更改数据库时，我通过控制台命令“rails generate migration”创建了一个空的“迁移”文件。然后，在生成的文件中，添加更改，例如“rename_column :users, :address, :location”。之后，我运行“rake db:migrate”并迁移数据库。如何在 CakePHP 上做到这一点？

**自动化部署**

Rails 中的部署可以使用“Capistrano”红宝石 gem 实现自动化。基本上，我在命令行中运行“cap production deploy”。然后，根据“deploy.rb”文件上的说明，它登录到服务器，从 git 存储库中克隆最新版本的代码，并备份当前版本，以便我可以回滚。它还可以为“共享”文件夹（如用户上传）创建符号链接，重新编译资产，运行挂起的迁移，安装新的依赖项，重新启动一些服务器进程，重新启动应用程序本身，并可以执行其他命令行任务。CakePHP 上有类似的东西吗？

**资产压缩**

在 Rails 中，当我处于生产模式时，CSS 和 JS 资产会自动编译为单个文件，并在每次部署后重新生成。这是 Rails 3.1+ 的原生特性。在 CakePHP 上可能吗？

**工人和后台作业**

Rails 可以使用名为“delayed_job”的 gem 将任务排入队列，以由“workers”在后台执行，例如在用户注册后发送电子邮件。你是怎样做的？

**控制器的命名空间**

如果我想创建管理界面、Web 服务（例如，使用“api”命名空间）或“mobile”命名空间，我只需在“controllers”文件夹中创建相应的文件夹。然后，我将控制器放在那里并创建访问它们的路由。在 Cake 上最好的方法是什么？

**从视图访问模型方法**

当我从数据库中获取数据时，CakePHP 似乎返回了一个关联数组，而不是真正的“对象”。所以，我无法访问模型方法。假设我的 UserModel 类提供了一个名为“age”的方法，该方法根据用户的生日计算用户的当前年龄。在 Rails 中，我可以在视图上执行此操作：<%= @user.age %>。我需要在 Cake 上创建一个视图助手来执行此操作吗？像 calc_user_age($user); ?>（或类似的东西）？另一种情况：假设我想获取用户的最后一条评论，并在评论中使用帖子标题插入指向相关帖子的链接。在 Rails 中，我会执行类似 @user.comments.last.post.title 的操作来获取帖子标题。如果不使用获取大量不必要数据的“recursive=3”功能，我怎么能在 Cake 中做到这一点？

**链接模型范围**

假设我有一个名为 Post 的模型。在 Rails 中，我可以在模型上创建范围并按照我想要的方式混合它们。例如，如果我想获取“按访问最多的编程类别中最后发布的 5 个帖子”，我会这样称呼它们：“Post.published.from_category("programming").most_accessed.limit(5 )”。如果我只想要按最近排序的草稿帖子，并与分页集成，我会调用“Post.drafts.recent.page(2)”。在 CakePHP 上创建和链接作用域的最佳方法是什么？动态构建条件数组并将其作为“查找”的参数发送？

**测试**

CakePHP 社区采用了哪些测试工具？我需要测试模型及其方法，测试控制器及其响应和变量，测试视图内容（还有 Javascript 交互），创建固定装置等。我还想知道是否有办法创建类似自动测试的东西，在文件保存后运行测试。

嗯，基本上就是这些了。对不起，很长的帖子，以及我容易出错和多余的英语（我不是母语人士）。另外，我不是专家。所以，我可以在这里写一些错误的东西。

希望我们能好好谈谈。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T15:58:20.437

**Package management**

~~AFAIK there is no up to date and wide used package manager. Usually we add plugins using git. Plugins are equal to gems in RoR I think.~~

Edit: There is now [composer](https://github.com/composer/composer) which is used by CakePHP now and a lot plugins.

**Migrations**

Use the [CakeDC migrations plugin](https://github.com/cakedc/migrations) or the [build in schema shell](http://book.cakephp.org/2.0/en/console-and-shells/schema-management-and-migrations.html).

**Automated Deployment**

We use [fabric](http://docs.fabfile.org/en/1.4.2/index.html). Afaik there is no plugin for cake that will do that I'm aware of.

**Asset Compression**

[Use this plugin.](https://github.com/markstory/asset_compress)

**Namespaces for controllers**

Simply put them into the controller folder and [use the Router](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration) to create routes for them. Same way you describe it for Rails.

**Access model methods from view**

Eh? You do that in Rails? I dislike it. In CakePHP you should not do that and IMO not in any MVC application.

Set the data you need in the views from the controller.

```
$this->set('data', $this->Model->yourMethod()); 
```

**Workers & Backround Jobs**

This can be done by [writing shells](http://book.cakephp.org/2.0/en/console-and-shells.html).

**Chaining Models**

Chaining models in CakePHP is done trough [associations](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html). And yes they would be accessible like $this->User->Post->find('first') for example. You can also build [complex find queries](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions) and conditions over multiple tables.

**Tests**

CakePHP is using [phpunit](http://www.phpunit.de/manual/current/en/) for unit testing. Read [this section](http://book.cakephp.org/2.0/en/development/testing.html) about it in the CakePHP book.

**My recommendation**

Read the book: book.cakephp.org It will definitely answer most of your questions and show you how to do thinks. The documentation quality of the 2.0 version is excellent.

# java - Java - Oracle - XML 时区

> ID：10917348
> 
> 赞同：0
> 
> 时间：2012-06-06T15:28:33.997
> 
> 标签：java, linux, oracle, datetime, timezone

我有一个与时区相关的问题，我无法解决。也许这里有人可以帮帮我。我将尝试解释这种情况：

我有 2 台服务器：

*   Windows Server 2008：这是一个应用服务器，我在其中有一个通过 Apache Tomcat 6.29 运行的 Web 服务。安装的JVM是1.6_20
*   Linux Red Hat Enterprise：这是安装了 Oracle 数据库服务器 11.1.0.6.0 的数据库服务器

两台服务器都有时区 UTC+2 (CAIRO) 并显示相同的时间。另一方面，在 Windows 服务器中运行的 Web 服务是使用 Java 和 Apache CXF (JAX-WS + JAXB) 开发的。WS 返回的所有日期和时间都来自数据库，我使用注释将日期编组为 XML 格式。WS 响应示例：

```
 @XmlSchemaType(name = "date")
    protected Date birthDate;
    @XmlSchemaType(name = "dateTime")
    protected Date activationDate; 
```

我遇到的问题是，其中一些日期由时区 +02:00 的 WS 返回，而其他一些时区 +03:00 的日期，我无法找到解释。

据我所知，时区是由 java 从操作系统中获取正确值设置的，我不确定，但我认为 Oracle 不会存储日期的时区，如果我错了，请纠正我。因此，据我了解，所有日期都应使用相同的时区。

任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:48:05.617

您可以让 oracle 存储时区，这不是我们在这里做的事情，但这是可能的。

这两个链接可能会对您有所帮助。 [带有本地时区](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm#i1006169)和 [NLS_TIMESTAMP_FORMAT的 TIMESTAMP](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch3globenv.htm#i1007035)

# mysql - 如何跟踪更新的行数

> ID：10917352
> 
> 赞同：2
> 
> 时间：2012-06-06T15:28:51.067
> 
> 标签：mysql, sql-server

我正在使用 sql2000，但我也在使用 mysql 和 sql2008，并且对如何计算我刚刚更新的更新数量感兴趣？我确实看到了更新表的位置，但不确定这是否在正常查询中。谢谢

```
declare @updateCount as int
set @updateCount = 0
begin transaction
set @updateCount = update GENIUSES set IQ=161 where IQ=86 and username like 'RetroCoder'
print @updateCount
if @updateCount = 1 
  commit
else
  rollback 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:31:38.250

在 SQL Server 中：

```
DECLARE @updateCount INT;
UPDATE dbo.GENIUSES set IQ=161 where IQ=86 and username like 'RetroCoder';
SELECT @updateCount = @@ROWCOUNT; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:32:06.780

```
Declare @count  int
update GENIUSES set IQ=161 where IQ=86 and username like 'RetroCoder'
Set @count =  @@Rowcount
select @count 
```

# java - 如何知道一个类是来自 JRE 还是来自外部 Jar？

> ID：10917353
> 
> 赞同：1
> 
> 时间：2012-06-06T15:28:57.677
> 
> 标签：java, introspection

有人知道是否有可能（是否有库）知道`Class<?>`变量是否包含在 JRE 中？

这是我想要的：

```
Class<String> stringClass = String.class;
System.out.println(TheMagickLibrary.isJREClass(stringClass)); // should display true

Class<AnyClass> anotherClass = AnyClass.class;
System.out.println(TheMagickLibrary.isJREClass(anotherClass)); // should display false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:59:15.193

我可以为您提供 2 个解决方案。

1.  获取类包并检查它是否以`java.`, `sun.`,开头`com.sun.`
2.  获取类的类加载器：

> ```
> Returns the class loader for the class.  Some implementations may use
> null to represent the bootstrap class loader. This method will return
> null in such implementations if this class was loaded by the bootstrap
> class loader. 
> ```

正如您所看到的，他们说“某些实现可能会返回 null”。这意味着对于这些实现`clazz.getClassLoader() == null`意味着该类由引导类加载器加载，因此属于 JRE。顺便说一句，这适用于我的系统（Java(TM) SE 运行时环境（构建 1.6.0_30-b12））。

如果不检查以下文档`ClassLoader#getParent()`：

> ```
>  Returns the parent class loader for delegation. Some implementations may
>  use <tt>null</tt> to represent the bootstrap class loader. This method
>  will return <tt>null</tt> in such implementations if this class loader's
>  parent is the bootstrap class loader. 
> ```

同样，如果当前类加载器是引导程序，某些实现将返回 null。

最后，我推荐以下策略：

```
public static boolean isJreClass(Class<?> clazz) {
    ClassLoader cl = clazz.getClassLoader();
    if (cl == null || cl.getParent() == null) {
        return true;
    }
    String pkg = clazz.getPackage().getName();
    return pkg.startsWith("java.") || pkg.startsWith("com.sun") || pkg.startsWith("sun."); 
} 
```

我相信这对于 99% 的情况来说已经足够了。

# java - 安全 (https) 将 Javascript 报告从 HTML 转换为 PDF

> ID：10917355
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:04.113
> 
> 标签：java, html, pdf, export-to-pdf

在我的 JAVA Web 应用程序中，我有一个 HTML 报告页面，它是使用大量 Javascript 图表（使用 highcharts）以及基于文本的数据创建的。它是安全页面上的机密数据，需要用户登录。我需要允许用户单击一个链接，该链接会将报告保存为 PDF 文档。

我需要一个不需要将数据传递到任何第三方服务器的具有成本效益的解决方案。我想避免模板 PDF 的需要，我宁愿它采用 HTML 视图并从中创建 PDF。

我可以使用哪些产品/技术解决方案？提前致谢

# wordml - WordML：设置表格单元格宽度

> ID：10917356
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:05.817
> 
> 标签：wordml

WordML 中的单元格宽度是如何设置的？我尝试了 w:tcW 标签的 w:w 属性，但没有效果。我想独立于列设置单元格宽度。我还希望每行有不同数量的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:55:29.130

`<w:tblGrid>`如果您想设置单元格宽度而不考虑列宽，我认为您需要使用 检查[此](http://blogs.msdn.com/b/ericwhite/archive/2009/11/05/comparison-of-html-css-tables-to-wordprocessingml-tables.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:34:33.273

该`tcW`元素还有一个可选属性：`w:type`，它确定宽度的度量。默认似乎是`auto`. 尝试将其设置为其他度量，例如`dxa`、`in`或`pct`。

# bash - 执行脚本-a后如何传递另一个命令？

> ID：10917359
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:16.597
> 
> 标签：bash, logging, ssh

我正在编写一个将执行的 bash 脚本

```
script -a logfile.log 
```

如何将另一个命令传递给脚本生成的新 shell？例如，我想在执行此操作后通过 SSH 连接到主机，以便脚本记录我的 SSH 会话。我试过这个：

```
script -a logfile.log | ssh hosname 
```

出现以下错误：

```
Pseudo-terminal will not be allocated because stdin is not a terminal. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:37:01.383

```
script -a logfile.log -c some-command 
```

查看手册页以`script`获取其他选项。

在您的特定示例中，这可能是您正在寻找的内容：

```
script -a logfile.log -c ssh -t host run-something-else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:36:31.193

可以忽略该警告，但 -T 选项应该摆脱它。

脚本-a logfile.log | ssh -T 主机名

# android - 一些有线的android行为

> ID：10917364
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:28.107
> 
> 标签：android

我正在使用 misc 小部件面板控件，所以我得到了一个库项目的引用。

大多数时候我没有问题，但有时（重建后）我收到以下错误

```
06-06 18:25:00.053: ERROR/AndroidRuntime(2449): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dilbord/com.dilbord.ui.GroupedDealsActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class org.miscwidgets.widget.Panel
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
    at android.app.ActivityThread.access$600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4507)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class org.miscwidgets.widget.Panel
    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
    at android.view.LayoutInflater.parseInclude(LayoutInflater.java:800)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:729)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:271)
    at android.app.Activity.setContentView(Activity.java:1835)
    at com.dilbord.ui.GroupedDealsActivity.onCreate(GroupedDealsActivity.java:87)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
    ... 11 more
    Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
    ... 27 more
    Caused by: java.lang.NoClassDefFoundError: org.miscwidgets.R$styleable
    at org.miscwidgets.widget.Panel.<init>(Panel.java:85)
    ... 30 more 
```

所以问题出在 R.stylable 上，但我不知道如何避免它以及为什么会发生这种情况。

我还使用了令人惊叹的列表视图库、facebook sdk、分段按钮库。

任何想法，想法？

# wordpress - 重写 Wordpress 的博客存档 URL 结构

> ID：10917371
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:47.133
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting

目前，我网站的存档页面列表显示为：

> example.com/2012/05

我想将 url 结构更改为：

> example.com/blog/2012/05

我尝试将重定向与重写结合使用，但我不确定效果是否良好。我也只是尝试做一个简单的重写，比如

> 重写规则 ^([0-9]+)/([0-9]+)/$ /blog/$1/$2 [L]

捕获 /year/month 网址并转换它们，但我不成功。

我知道如何编辑存档导航菜单以在 URL 的其余部分之前添加 blog/，但我无法通过此重写来正确链接到页面

它不在子文件夹中。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:00:38.243

有一个**非常简单**的方法可以做到这一点......

在设置 > 永久链接下，更改

```
 /%year%/%monthnum%/%postname%/ 
```

到

```
 /blog/%year%/%monthnum%/%postname%/ 
```

**请注意**，您的主页不会在 /blog/ 上。如果您愿意，您需要创建一个名为“博客”的页面，并将“设置”>“阅读”下的“帖子页面”更改为您创建的“博客”页面。更多信息在这里：[http ://codex.wordpress.org/Creating_a_Static_Front_Page](http://codex.wordpress.org/Creating_a_Static_Front_Page)

# jquery - 将 Zend View Helpers 和 Jquery 分配给模块

> ID：10917373
> 
> 赞同：0
> 
> 时间：2012-06-06T15:29:56.220
> 
> 标签：jquery, zend-framework, module, helpers, zend-view

我不确定如何正确地将 Zend View Helper 添加到我的项目中。

我的项目如下所示：

```
Project
--application
----configs
----controllers
----layouts
----models
----modules
------content
--------controllers
----------Index
--------forms
--------models
--------views
----------filters
----------helpers
------------myHelper
----------scripts
------------index
----views 
```

我的引导文件如下所示：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {

    protected function _initViewHelpers()
    {
        $view = new Zend_View();
        $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
        $viewRenderer->setView($view);
        Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
    }
} 
```

我的模块引导文件如下所示：

```
class Content_Bootstrap extends Zend_Application_Module_Bootstrap {

    public function _initAutoload() {
        $resourceLoader = $this->_resourceAuloloader;

        $autoloader = new Zend_Application_Module_Autoloader(array('namespace' => 'Application',
                                                                    'basePath'  => APPLICATION_PATH));

        Zend_Controller_Action_HelperBroker::addPath(
        APPLICATION_PATH . '/modules/content/controllers/helpers', 'Content_Controller_Helper_');

        return $autoloader;
    }

} 
```

最后我的 application.ini 文件看起来像这样：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules = ""

resources.db.adapter = "PDO_MYSQL"
resources.db.params.host = "localhost"
resources.db.params.username = "root"
resources.db.params.password = "****"
resources.db.params.dbname = "database"

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

resources.router.routes.contentroute.route = "/wms/content/:controller/:action/*"
resources.router.routes.contentroute.defaults.module = content
resources.router.routes.contentroute.defaults.controller = index
resources.router.routes.contentroute.defaults.action = index

autoloaderNamespaces[] = "ZendX"

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

现在我有一个视图，在那个视图中我尝试调用我自己制作的视图助手名称 MyHelper

```
class Content_View_Helper_MyHelper {

    public function test() {
        return 'test';
} 
```

当我尝试通过使用`echo $this->test();`它在我的视图中调用它时，会出现错误

> 在注册表中找不到名为“test”的插件；使用的路径： Content_View_Helper_: C:/wamp/www/HPU/application/modules/content/views\helpers/ ZendX_JQuery_View_Helper_: ZendX/JQuery/View/Helper/ Zend_View_Helper_: Zend/View/Helper/

我尝试用谷歌搜索答案，但遗憾的是，所提供的答案都没有奏效。他们中的大多数人告诉我通过引导程序或在 application.ini 中添加辅助路径但是我随后收到关于 Jquery 的错误消息...

所以我对如何解决这个问题有点茫然，任何可能的解决方案都将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:14:16.877

您应该根据类名最后一个前缀词为该方法使用相同的名称。

```
class Content_View_Helper_MyHelper {

    public function MyHelper() {
        return 'test';
} 
```

仅供参考：[查看助手](http://devzone.zend.com/1235/view-helpers-in-zend-framework/)

# asp.net-mvc - 使用 jQuery Mobile 和 ASP.NET MVC4 显示对话框

> ID：10917376
> 
> 赞同：0
> 
> 时间：2012-06-06T15:30:14.287
> 
> 标签：asp.net-mvc, jquery-mobile, razor, dialog

我的 ASP.NET MVC4 项目中有一个搜索表单。当有人没有填写一个文本框时，页面顶部会显示一条消息。

我想要的是一个出现在那个时刻的对话框，而不是页面顶部的文本。

我尝试了一切，但我得到的只是页面顶部的一个黑色方块。

任何人都可以帮助我使用 jQuery Mobile 对话框吗？只要最简单的设计就可以了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:49:39.437

[这个库对http://dev.jtsage.com/jQM-SimpleDialog/](http://dev.jtsage.com/jQM-SimpleDialog/)很有用

# ios - 在 iOS 上，为什么设置图层的 sublayerTransform 会变成像 CATranformLayer 一样的行为？

> ID：10917380
> 
> 赞同：7
> 
> 时间：2012-06-06T15:30:28.193
> 
> 标签：ios, core-animation, calayer, catransform3d, catransformlayer

众所周知，`zPosition`层数只决定了哪一层覆盖哪一层。无论是`zPosition`10 还是 1000 都不会影响其位置。

也就是说，除非我们[使用`CATransformLayer`包含那些图层](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATransformLayer_class/Reference/Reference.html)，否则`zPosition`这些图层的 将影响图层的位置。

但是，在 iOS 5.1.1 中运行的以下代码确实会`zPosition`改变图层的位置...您可以在新的 Single View App 中尝试，并将以下代码添加到`ViewController.m`. 如果 的`zPosition`由`layer2`变为`88`，`188`我们可以看到图层相应地移动。所以`CATransformLayer`代码中没有；为什么会这样？（请引用 Apple 文档或任何参考资料）。

同样相关的是，如果将线`self.view.layer.sublayerTransform = transform3D;`更改为，`self.view.layer.transform = transform3D;` 则`zPosition`将不会影响位置。但[根据 Apple 文档，`transform`仅`sublayerTransform`在 self 是否被转换方面有所不同](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082-SW1)：

> 两个层属性指定变换矩阵：`transform`和 `sublayerTransform`。由 指定的矩阵`transform property`应用于层及其相对于层的子层 `anchorPoint`。[...]该 `sublayerTransform`属性指定的矩阵仅应用于图层的子图层，而不是图层本身。

所以奇怪的是，为什么改变它会导致表现`self.view.layer`得像`CATransformLayer`.

```
-(void) viewDidAppear:(BOOL)animated {

    CATransform3D transform3D = CATransform3DIdentity;

    transform3D.m34 = -1.0 / 1000;

    transform3D = CATransform3DRotate(transform3D, M_PI / 4, 0, 1, 0);

    self.view.layer.sublayerTransform = transform3D;

    CALayer *layer1 = [[CALayer alloc] init];
    layer1.zPosition = 33;
    layer1.frame = CGRectMake(100, 100, 100, 100);
    layer1.backgroundColor = [[UIColor orangeColor] CGColor];

    [self.view.layer addSublayer:layer1];

    CALayer *layer2 = [[CALayer alloc] init];
    layer2.zPosition = 88;
    layer2.frame = CGRectMake(100, 120, 100, 100);
    layer2.backgroundColor = [[UIColor yellowColor] CGColor];

    [self.view.layer addSublayer:layer2];    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:10:28.543

我们可以把图层想象成一个坐标图层，当我们将图层transfrom3D时，它的坐标变成3D，但是它的subLayer仍然显示为2D，但是当设置sublayer transfrom3D时，图层会使其所有子图层显示为3D。和旋转一样

# sql - 为什么我不能使用 With 关键字同时更新多个列？

> ID：10917381
> 
> 赞同：7
> 
> 时间：2012-06-06T15:30:28.973
> 
> 标签：sql, oracle, oracle11g, sql-update

我有一个如下所示的更新语句，它工作正常，我在子查询中使用了一个 with 语句来大大提高性能，但由于某种原因，我不允许从同一个表中添加一个额外的列来更新。

作品：

```
UPDATE Table_A SET (Col_One) = (WITH OneValue AS (SELECT DISTINCT t.Col_One
                                                  FROM Table_Two t, Table_A a
                                                  WHERE t.id = a.New_Id))
                                SELECT Col_One FROM OneValue); 
```

我想做的只是包括另一列也像这样从 table_two 更新

```
UPDATE Table_A SET (Col_One, Col_Two) = (WITH OneValue AS (SELECT DISTINCT t.Col_One, T.Col_two
                                                  FROM Table_Two t, Table_A a
                                                  WHERE t.id = a.New_Id))
                                SELECT Col_One, Col_Two FROM OneValue); 
```

但我得到 ora-01767 更新集表达式必须是子查询。我理解这个错误，但看不到我是如何生成它的。任何帮助是极大的赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T15:42:00.473

这似乎可行（无论如何，它都是使用 DUAL 进行简单查询）：

```
UPDATE Table_A SET (Col_One, Col_Two) = (select col_one, col_two from
                                          (WITH OneValue AS (SELECT DISTINCT t.Col_One, T.Col_two
                                                  FROM Table_Two t, Table_A a
                                                  WHERE t.id = a.New_Id))
                                           SELECT Col_One, Col_Two FROM OneValue)
                                        ); 
```

至于子查询以“WITH”开头为什么不起作用，我只能想象是因为Oracle SQL的设计者没有预料到这种用法。

# java - 将 Xtext 与 StringTemplate 代码生成器链接

> ID：10917386
> 
> 赞同：4
> 
> 时间：2012-06-06T15:30:37.453
> 
> 标签：java, xtext, stringtemplate

在我当前的项目中，我试图将用 xtext 编写的 DSL 规范和用 StringTemplate 编写的代码生成器联系起来。

例如，我的 DSL 规范的语法如下。我通过 xText 提供的不错的编辑器工具输入这些信息。

```
structs:
    TempStruct
        tempValue : double;
            unitOfMeasurement : String;

abilities :
    sensors:    
        TemperatureSensor
            generate tempMeasurement : TempStruct;
            attribute responseFormat : String; 
```

上述DSL规范的语法如下：

```
 VocSpec:

          'structs' ':'
          (structs += Struct)+

          'abilities' ':'
           ('sensors' ':' (sensors += Sensor)+ )+ 
         ;

      Sensor:
          name = ID
          ((attributes += Attributes ) |
          (sources += Sources))* 
          ;

     Sources:
          'generate' name=ID ':' type = Type ';' 
           ;

     Attributes:
         'attribute' name=ID ':' type = Type ';' 
           ; 

    Struct:
          name = ID
          (fields += Field)+ 
         ;

    Field:
         name=ID ':' type += Type ';' 
        ; 
```

xText 生成对应于上述规范的语义模型。在我们的示例中，xText 生成语义模型，其中包含诸如`struct.java`、`Field.java`、`Attribute.java`、`Sensor.java`等文件。

我可以清楚地看到这个语义模型可以与`StringTemplate`文件联系起来。该`StringTemplate`文件采用类的对象。例如，`StringTemplate`文件将`TemperatureSensor`（传感器的实例）作为输入并生成 Java 代码。

我的问题是如何实例化语义模型（由 xText 生成）以及如何链接 StringTemplate 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:24:48.457

如果您想在 Eclipse 中使用 StringTemplate 生成代码：

在 DSL 的运行时项目中找到生成器存根。应该有一个实现 IGenerator 接口的类。将使用资源和 IFileSystemAccess 实例调用方法#doGenerator。资源是一个 EMF 概念——基本上是对对象物理位置的抽象。它提供 getContents ，这反过来将提供对 VocSpec 实例列表的访问（如果语法片段完整）。这些实例可以传递给将产生输出的字符串模板事物。输出应通过 IFileSystemAccess#generateFile 写入

如果您想将其作为一个独立的过程来执行，您应该按照[Xtext FAQ](http://wiki.eclipse.org/Xtext/FAQ#How_do_I_load_my_model_in_a_standalone_Java_application.C2.A0.3F)中的步骤进行操作。他们解释了如何加载 EMF 资源。之后，您可以执行与基于 Eclipse 的解决方案几乎相同的操作。也就是说，实现 IGenerator 并将结果传递给 IFileSystemAccess。

给你一个简短的例子，这是在几分钟内开始应该做的事情：

首先，您应该在“GenerateMyDsl.mwe2”工作流文件中启用以下代码片段并运行工作流。

```
fragment = generator.GeneratorFragment {
    generateMwe = false
    generateJavaMain = true
} 
```

您将在运行时项目的包中找到一个带有后缀 .generator 的新工件。即“Main.java”文件。

第二步是实现生成器。以下片段可用于“MyDslGenerator.xtend”类：

```
package org.xtext.example.mydsl.generator

import org.eclipse.emf.ecore.resource.Resource
import org.eclipse.xtext.generator.IGenerator
import org.eclipse.xtext.generator.IFileSystemAccess
import org.antlr.stringtemplate.StringTemplate
import org.antlr.stringtemplate.language.DefaultTemplateLexer
import org.xtext.example.mydsl.myDsl.Model

class MyDslGenerator implements IGenerator {

    override void doGenerate(Resource resource, IFileSystemAccess fsa) {
        val hello = new StringTemplate("Generated with StringTemplate, $greeting.name$!", typeof(DefaultTemplateLexer))
        val model = resource.contents.head as Model
        hello.setAttribute("greeting", model.greetings.head)
        fsa.generateFile("Sample.txt", hello.toString())
    }
} 
```

Java 等价物是这样的：

```
package org.xtext.example.mydsl.generator;

import org.antlr.stringtemplate.StringTemplate;
import org.antlr.stringtemplate.language.DefaultTemplateLexer;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.xtext.generator.IFileSystemAccess;
import org.eclipse.xtext.generator.IGenerator;
import org.xtext.example.mydsl.myDsl.Model;

public class StringTemplateGenerator implements IGenerator {

    public void doGenerate(Resource input, IFileSystemAccess fsa) {
        StringTemplate hello = new StringTemplate("Generated with StringTemplate, $greeting.name$!", DefaultTemplateLexer.class);
        Model model = (Model) input.getContents().get(0);
        hello.setAttribute("greeting", model.getGreetings().get(0));
        fsa.generateFile("Sample.txt", hello.toString());
    }

} 
```

接下来必须更改存根“Main.java”的内容以反映输入文件的位置和预期的输出路径。

```
package org.xtext.example.mydsl.generator;

import java.util.List;

import org.eclipse.emf.common.util.URI;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.emf.ecore.resource.ResourceSet;
import org.eclipse.xtext.generator.IGenerator;
import org.eclipse.xtext.generator.JavaIoFileSystemAccess;
import org.eclipse.xtext.util.CancelIndicator;
import org.eclipse.xtext.validation.CheckMode;
import org.eclipse.xtext.validation.IResourceValidator;
import org.eclipse.xtext.validation.Issue;

import com.google.inject.Inject;
import com.google.inject.Injector;
import com.google.inject.Provider;

public class Main {

    public static void main(String[] args) {
        Injector injector = new MyDslStandaloneSetupGenerated().createInjectorAndDoEMFRegistration();
        Main main = injector.getInstance(Main.class);
        main.runGenerator("input/Sample.mydsl");
    }

    @Inject 
    private Provider<ResourceSet> resourceSetProvider;

    @Inject
    private IResourceValidator validator;

    @Inject
    private IGenerator generator;

    @Inject 
    private JavaIoFileSystemAccess fileAccess;

    protected void runGenerator(String string) {
        // load the resource
        ResourceSet set = resourceSetProvider.get();
        Resource resource = set.getResource(URI.createURI(string), true);

        // validate the resource
        List<Issue> list = validator.validate(resource, CheckMode.ALL, CancelIndicator.NullImpl);
        if (!list.isEmpty()) {
            for (Issue issue : list) {
                System.err.println(issue);
            }
            return;
        }

        // configure and start the generator
        fileAccess.setOutputPath("output/");
        generator.doGenerate(resource, fileAccess);

        System.out.println("Code generation finished.");
    }
} 
```

输入文件位于运行时项目中新创建的文件夹“input”中。文件“Sample.mydsl”的内容是

```
Hello Pankesh! 
```

现在您可以运行主类，在 Eclipse 中快速刷新后，您会在我的运行时项目中找到新的“输出”文件夹，其中包含一个文件“Sample.txt”：

```
Generated with StringTemplate, Pankesh! 
```

顺便说一句：Xtext 文档包含一个关于如何使用 Xtend 生成代码的[教程](http://www.eclipse.org/Xtext/documentation/2_1_0/040-first-code-generator.php)——它比 StringTemplate 好，因为它与 Eclipse 和现有的 Java 实用程序无缝集成：

```
package org.xtext.example.mydsl.generator

import org.eclipse.emf.ecore.resource.Resource
import org.eclipse.xtext.generator.IFileSystemAccess
import org.eclipse.xtext.generator.IGenerator
import org.xtext.example.mydsl.myDsl.Model

class MyDslGenerator implements IGenerator {

    override void doGenerate(Resource resource, IFileSystemAccess fsa) {
        val model = resource.contents.head as Model
        fsa.generateFile("Sample.txt", '''
            Generated with Xtend, «model.greetings.head»!
        ''')
    }
} 
```

# android - android adjustViewBounds 错误？

> ID：10917388
> 
> 赞同：4
> 
> 时间：2012-06-06T15:30:42.047
> 
> 标签：android, imageview

当我在 imageView xml 中使用 android:adjustViewBounds="true" 时，它不起作用。如果我把 setAdjustViewBounds(true); 在我的 ImageView 的构造函数中，它工作正常。有什么区别，或者这是一个错误？

```
<ImageView
                android:id="@+id/PageViewMainImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:scaleType="matrix"     
                android:adjustViewBounds="true"               
                android:visibility="invisible"/> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T16:01:50.447

构造函数中的操作顺序`ImageView`（[请参见此处的源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ImageView.java)）在`adjustViewBounds`从 XML 解析和设置属性之前从 XML 解析并设置`scaleType`属性。该`setAdjustViewBounds()`方法的一部分（由构造函数使用您的 XML 属性值调用）是在值为 true 时将设置`ScaleType`为。`FIT_CENTER`

因此，当您发布的 XML 被加载时，`ScaleType`首先设置为`FIT_CENTER`，然后重新设置为`MATRIX`，所有这些都在构造函数中。将此与您`setAdjustViewBounds()`在 Java 中调用的示例进行比较，现在最终`ScaleType`结果将是`FIT_CENTER`您的 Java 调用将在解析 XML 属性之后发生（实际上意味着您的`android:scaleType="matrix"`属性被忽略。这种差异可能是您在“作品”之间看到的和“不起作用”。

我不确定 Google 是否会称其为错误，因为他们只是将 设置`ScaleType`为他们认为您想要的以方便保留方面，但仍允许您对其进行修改。视图本身的边界仍会随着属性名称的指示而改变，图像可能会以您未预料到的方式剪辑。

不过，文档可能会更清楚地说明此“功能”，因此您可以在[http://b.android.com提交错误报告](http://b.android.com)

高温高压

# php - 注意：Joomla php 联系表单中未定义的索引

> ID：10917389
> 
> 赞同：0
> 
> 时间：2012-06-06T15:30:46.830
> 
> 标签：php, post, joomla, contact-form

我整天都在搜索类似的帖子，但无法解决这个问题。我得到： 注意：未定义索引：第 21 行 E:\Joomla!\New XAMPP\xampp\htdocs\makbilit\app.php 中的联系人

我看到很多建议 isset() 和 empty() 函数的答案，但是当我将它们添加到该行时： if (!isset($_POST['contact']=="1")) 我得到 Parse error: syntax error,意外的 T_IS_EQUAL，在第 21 行的 E:\Joomla!\New XAMPP\xampp\htdocs\makbilit\app.php 中期待 ',' 或 ')'

而且该错误似乎并没有导致解决方案....

非常感谢任何人花时间检查代码并帮助我。我添加了整个东西......希望它没问题。

```
<?php

function SendEmail($subject,$msg,$ip)
// This function emails the admin about different notices
 {
$fake = "site@makbilit.com";
$email = "moshe@makbilit.com";
$subject = "From Website - Contact";

$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=windows-1255" . "\r\n";
$headers .= 'From:' . $fake . "\r\n";

if (mail($email,$subject,$msg,$headers))  {
  ?><script> alert('יצירת הקשר נשלחה בהצלחה! נשתדל לחזור אליך בהקדם האפשרי');</script><?
 } else {
  echo("<p></p>");
 }
}

if ($_POST['contact']=="1") {

    // Get all the posts
    $name = $_POST[name];
    $phone = $_POST[phone];
    $moed = $_POST[moed];
    $msg = $_POST[msg];
    $date = date("d.m.Y");

    // Build the Message
$msg = "
<center><h2> לקוח מתעניין באמצעות האתר </h2>מקבילית</center>

שם מלא: $name
טלפון: $phone
מייל: $moed

הערות:
$msg

-------------------------------------------
יצירת הקשר התקבלה ב $date
";

// Convert BR's
$msg = nl2br($msg);

// Send the Email
 SendEmail($subject,$msg,$ip);

}

?>

<html>
<head>
<META content="text/html; charset=iso-8859-8-i" http-equiv=Content-Type  dir="rtl">
<META name="description" content="Makbilit">
<style>A {text-decoration:none} </style>
<style>A:hover {text-decoration:underline}  A:hover {font: bold}</style>

<style type="text/css">
.menutitle{
cursor:pointer;
margin-bottom: 5px;
color:"#000";
width:140px;
padding:2px;
text-align:center;
font-weight:bold;
font-size:13px;
font-family:Arial;
/*/*/border:0px solid indianred;/* */
}
a{
text-align:center;
font-weight:bold;
font-family:Arial;
font-size:13px;
color:"#000";
text-decoration:none;
}
.a3{
color:indianred;font-size:13px;
}
body{text-align:center;margin:0 auto;background:#ffffff}
.submenu{
margin-bottom: 0.5em;
}
</style>

<script type="text/javascript">

/***********************************************
* Switch Menu script- by Martial B of http://getElementById.com/
* Modified by Dynamic Drive for format & NS4/IE4 compatibility
* Visit http://www.dynamicdrive.com/ for full source code
***********************************************/

function formCheck(formobj){
    // Enter name of mandatory fields
    var fieldRequired = Array("phone");
    // Enter field description to appear in the dialog box
    var fieldDescription = Array("טלפון");
    // dialog message
    var alertMsg = "עלייך למלא את הפרטים הבאים:\n";

    var l_Msg = alertMsg.length;

    for (var i = 0; i < fieldRequired.length; i++){
        var obj = formobj.elements[fieldRequired[i]];
        if (obj){
            switch(obj.type){
            case "select-one":
                if (obj.selectedIndex == -1 || obj.options[obj.selectedIndex].text == ""){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            case "select-multiple":
                if (obj.selectedIndex == -1){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            case "text":
            case "textarea":
                if (obj.value == "" || obj.value == null){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            default:
            }
            if (obj.type == undefined){
                var blnchecked = false;
                for (var j = 0; j < obj.length; j++){
                    if (obj[j].checked){
                        blnchecked = true;
                    }
                }
                if (!blnchecked){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
            }
        }
    }

    if (alertMsg.length == l_Msg){
        return true;
    }else{
        alert(alertMsg);
        return false;
    }
}

function showHide(id){
 var a =  document.getElementById(id).style.display;
 document.getElementById(id).style.display = (a == "none") ? "block" : "none";
}

var persistmenu="yes" //"yes" or "no". Make sure each SPAN content contains an incrementing ID starting at 1 (id="sub1", id="sub2", etc)
var persisttype="sitewide" //enter "sitewide" for menu to persist across site, "local" for this page only

if (document.getElementById){ //DynamicDrive.com change
document.write('<style type="text/css">\n')
document.write('.submenu{display: none;}\n')
document.write('</style>\n')
}

function SwitchMenu(obj){
    if(document.getElementById){
    var el = document.getElementById(obj);
    var ar = document.getElementById("masterdiv").getElementsByTagName("span"); //DynamicDrive.com change
        if(el.style.display != "block"){ //DynamicDrive.com change
            for (var i=0; i<ar.length; i++){
                if (ar[i].className=="submenu") //DynamicDrive.com change
                ar[i].style.display = "none";
            }
            el.style.display = "block";
        }else{
            el.style.display = "none";
        }
    }
}

function get_cookie(Name) { 
var search = Name + "="
var returnvalue = "";
if (document.cookie.length > 0) {
offset = document.cookie.indexOf(search)
if (offset != -1) { 
offset += search.length
end = document.cookie.indexOf(";", offset);
if (end == -1) end = document.cookie.length;
returnvalue=unescape(document.cookie.substring(offset, end))
}
}
return returnvalue;
}

function onloadfunction(){
if (persistmenu=="yes"){
var cookiename=(persisttype=="sitewide")? "switchmenu" : window.location.pathname
var cookievalue=get_cookie(cookiename)
if (cookievalue!="")
document.getElementById(cookievalue).style.display="block"
}
}

function savemenustate(){
var inc=1, blockid=""
while (document.getElementById("sub"+inc)){
if (document.getElementById("sub"+inc).style.display=="block"){
blockid="sub"+inc
break
}
inc++
}
var cookiename=(persisttype=="sitewide")? "switchmenu" : window.location.pathname
var cookievalue=(persisttype=="sitewide")? blockid+";path=/" : blockid
document.cookie=cookiename+"="+cookievalue
}

if (window.addEventListener)
window.addEventListener("load", onloadfunction, false)
else if (window.attachEvent)
window.attachEvent("onload", onloadfunction)
else if (document.getElementById)
window.onload=onloadfunction

if (persistmenu=="yes" && document.getElementById)
window.onunload=savemenustate

</script>

<style type="text/css"> 
blink {behavior: url(blink.htc);}

</style>
<public:component>

<public:property name="msec" value="500"/>
<public:method name="blink"/>
<public:method name="pause"/>
<public:attach event="oncontentready" onevent="initBlink()"/>
<public:attach event="onpropertychange" onevent="checkProperty()"/>
</public:component>

<script language="JScript">

// Declare a reference to the interval
var blinkInterval;

function initBlink() {
if (element.style.visibilty == null) element.style.visibility = "visible";
blinkInterval = window.setInterval(element.uniqueID +".blink()", msec);
paused = false;
}

function blink() {
element.style.visibility = (element.style.visibility == "visible") ? "hidden" : "visible";
}

function pause() {
if (paused)
blinkInterval = window.setInterval(element.uniqueID + ".blink()", msec);
else
window.clearInterval(blinkInterval);
paused = !paused;
}

function checkProperty() {
window.status = event.propertyName;
if (event.propertyName == "msec") {
element.pause();
element.pause();
}

}
</script>

</head>
<center>
<body dir="rtl" marginheight=0 topmargin=0> 

    <table border=0 width=195 height=135 cellpadding=0 cellspacing=0 background="images/contact-side.png">
<tr>
 <td align="center" height="33"><font color="#FFFFFF">רוצה לקבל פרטים נוספים?</font></td></tr>
    <tr>
    <td width=195 valign=top><form method="POST" name="contactform" id="contactform" onSubmit="return formCheck(contactform);">
      <input type="hidden" value="1" name="contact" />
      <table width=195 border=0 align="center">
        <tr>
<td align=right> 
<font color="#000"> 
שם:</font> </td><td>
<INPUT type="text" size=20 name="name"> </td></tr><tr><td>
  <font color="#000"> טלפון:</font> </td>
<td>
<INPUT type="text" size=20 name="phone"> </td></tr><tr>
<td>
<font color="#000"> מייל:</font> </td><td>
<INPUT type="text" size=20 name="moed"> </td></tr>

<tr><td colspan="2" align="center">
<input type="submit" name="sendform" value="שלח" /> </td></tr>

</table></FORM>

    </td>
    </tr>
    </table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5876426-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:43:01.157

您将需要更新以下内容：

```
$name = $_POST[name];
$phone = $_POST[phone];
$moed = $_POST[moed];
$msg = $_POST[msg]; 
```

至

```
$name = $_POST['name'];
$phone = $_POST['phone'];
$moed = $_POST['moed'];
$msg = $_POST['msg']; 
```

如果 $_POST 括号中没有 ' 或 "，PHP 会假定 name、phone、moed 和 msg 是 CONSTANTS，它们很可能不存在于您的 POST 数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T17:04:01.657

使用此代码：

`if(isset($_POST['save'])){ ....... }`

# php - 无法让 Google 登录和 Facebook 登录一起工作，它们分开工作

> ID：10917391
> 
> 赞同：0
> 
> 时间：2012-06-06T15:30:50.050
> 
> 标签：php, facebook, oauth, oauth-2.0

正如标题所说，我无法让两者一起工作。

这两个都可以自己完美地工作，但是当两者都包含在内并且我尝试使用 Facebook 登录时，我收到以下错误消息：

> 致命错误：在 /home/a801/public_html/Assignment_v2/google-api-php-client/src/auth/apiOAuth2.php:105 中带有消息“获取 OAuth2 访问令牌时出错，消息：'invalid_grant'”的未捕获异常“apiAuthException”堆栈跟踪：#0 /home/a801/public_html/Assignment_v2/google-api-php-client/src/apiClient.php(138): apiOAuth2->authenticate(Array) #1 /home/a801/public_html/Assignment_v2/googlelogin .php(38): apiClient->authenticate() #2 /home/a3422801/public_html/Assignment_v2/index.php(4): require('/home/a801/...') #3 {main} 抛出/home/a801/public_html/Assignment_v2/google-api-php-client/src/auth/apiOAuth2.php 在第 105 行

就我而言，Facebook 登录不应靠近该代码，这是用于 Google 登录的代码。

我很乐意提供您认为可能需要解决此问题的任何代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:37:03.603

Google 登录和 Facebook 登录是完全独立的。一旦你了解了基础知识，让它们工作并不难。

看看这个，我已经为我自己的项目使用了一些代码。这真的很容易理解。

[混合认证](http://hybridauth.sourceforge.net/)

干杯

# java - 使用 Ehcache 自动完成

> ID：10917393
> 
> 赞同：1
> 
> 时间：2012-06-06T15:31:00.940
> 
> 标签：java, autocomplete, ehcache

我正在开发的表单中有几个自动完成字段。我最大的包含近 2 万条记录，最小的包含大约 1k 条记录。到目前为止，我只是使用 TreeMap 来处理此任务，但是我发现它非常高效。我目前的结构看起来像这样。

```
private SortedMap<String, Set<String>> cache;

public AutocompleteCacheServiceImpl() {
    cache = Collections.synchronizedSortedMap(new TreeMap<String, Set<String>>());
} 
```

在像这样居住的同时，

```
private void populateCache(String id, String name) {
    int len = name.length();

    for (int i = 1; i <= len; i++) {
        String key = name.substring(0, i).toLowerCase();
        if(this.cache.containsKey(key)) {
            Set<String> exist = cache.get(key);
            if(!exist.contains(id)) {                
                exist.add(id);
            }                
        } else {
            Set<String> _e = new HashSet<String>();
            _e.add(id);
            this.cache.put(key, _e);
        }

    }        
} 
```

输出 1 h 1 ho 1 hou 1 hou 1 house

我希望用 Ehcache 之类的东西替换我的缓存实现，但是我对它不是很熟悉。我想知道是否有人对设置这样的东西有任何建议，这样击键的响应时间将保持在 500 毫秒或更短。

我看到了这个页面[http://ehcache.org/documentation/get-started/getting-started](http://ehcache.org/documentation/get-started/getting-started)

但也许我目前的填充方法导致我过度寻找更好的方法。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:39:41.197

如果您希望优化性能，请查看[patricia Trys](http://en.wikipedia.org/wiki/Radix_tree)，这里有一个[实现](http://code.google.com/p/patricia-trie/)SortedMap 的实现。

# xpages - 是否可以在 xpages 的 ckeditor 富文本控件中使用 8.5.3 iNotes 中的拼写检查器？

> ID：10917394
> 
> 赞同：1
> 
> 时间：2012-06-06T15:31:01.563
> 
> 标签：xpages

我们需要在我们的应用程序中具有拼写检查功能，并且我们需要 IE 浏览器（没有内置拼写检查功能）。我知道您可以添加一个插件来使用使用 Web Spell Checker 服务的拼写检查器。这在公司环境中对我们不起作用，因为它将数据传输到第三方服务。

你们中的任何人是否有任何其他可能有用的选项？或者有没有人找到一种方法来使用 iNotes 使用的拼写检查器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:19:57.930

我没有解决方案，但我认为您的出发点可能是使用 dojox.editor.plugins.SpellChecker。但我不确定 Dojo 是否可以正常工作和发布。我知道它使用某种字典，所以也许您可以为此使用内置注释 dict 文件。 [http://dojotoolkit.org/reference-guide/1.7/dojox/editor/plugins/SpellCheck.html](http://dojotoolkit.org/reference-guide/1.7/dojox/editor/plugins/SpellCheck.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:15:16.497

在 XPages 训练营期间，我多次被问到这个问题，我和其他几个人一直在寻找解决方案，据我所知，没有人想出它。

# iphone - 在目标 c 中更新 Brightcove 上的视频时出错

> ID：10917395
> 
> 赞同：0
> 
> 时间：2012-06-06T15:31:03.310
> 
> 标签：iphone, objective-c, json, video, brightcove

我正在尝试在 Bright Cove 上更新我的视频，但是当我发送请求时，它会返回一个错误作为回报。这是我发送的 JSON 请求

```
{"method":"update_video","params":{"video":{"id":"myID","economics":"AD_SUPPORTED"},"token":"myToken.."}} 
```

响应是：

```
{"name":"MissingJSONError","message":"Could not find JSON-RPC.","code":211}, "result": null, "id": null} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:21:39.927

在这里您可以找到[Brightcove API 错误详细信息](http://support.brightcove.com/en/docs/media-api-error-message-reference)。对于这个错误，原因如下：

> 211 MissingJSONError 找不到 JSON-RPC。我们为 json 参数（对于非多部分帖子）或多部分帖子的第一部分获得了一个空字符串。

看起来结果告诉您 ID 为空。如果您要传递一个 ID，请检查它是否存在并且是 Brightcove 期望的 ID 类型（即，brightcove ID 与 reference_id）。

您可以在此处查看所有 API 参数：[Brightcove Video Cloud / Media API Reference](http://docs.brightcove.com/en/media/#Video_Write)

# c# - 一起使用事件驱动的 TCP 客户端和 NotifyPropertyChanged 会导致异常

> ID：10917396
> 
> 赞同：3
> 
> 时间：2012-06-06T15:31:14.757
> 
> 标签：c#, .net, tcp, inotifypropertychanged

我正在编写一个 C# 控制台应用程序，它通过 TCP 连接到服务器并接收定期数据。我正在使用我在[此处](http://www.daniweb.com/software-development/csharp/code/422291/user-friendly-asynchronous-event-driven-tcp-client)找到的一些代码，这是一个易于使用的异步客户端。使用它，我的代码启动，建立连接，然后等待事件：

```
static void Main(string[] args)
        {
            agents = new ObservableCollection<AgentState>();
            EventDrivenTCPClient client = new EventDrivenTCPClient(IPAddress.Parse("192.168.0.1"), 5000);
            client.DataReceived += new EventDrivenTCPClient.delDataReceived(client_DataReceived);

               client.Connect();

                do
                {
                    while (!Console.KeyAvailable)
                    {
                        Thread.Sleep(50);
                    }

                } while (Console.ReadKey(true).Key != ConsoleKey.Q);

client.Disconnect();

       } 
```

这将启动应用程序，连接到端口 5000 上的 192.168.0.1，然后开始侦听响应。收到它们后，我用结果更新一个名为“clients”（由对象“ClientState”组成）的 ObservableCollection：

```
 static void client_DataReceived(EventDrivenTCPClient sender, object data)
    {
               string received = data as string;

        string parameters=received.Split(',');

        ClientState thisclient = clients.FirstOrDefault(a => a.clientName == parameters[0]);

        var index = clients.IndexOf(thisclient);
        if (index < 0)
        {

            ClientState newclient = new ClientState();
            newclient.clientName = clientname;
            newclient.currentState = state;
            newclient.currentCampaign = campaign;
            clients.Add(newclient);
        }
        else
        {
            clients[index].currentState = state;
            clients[index].currentCampaign = campaign;
        }

    } 
```

令我惊讶的是，这一切都运行良好：代码运行良好，收集统计信息并添加和更新 ObservableCollection。但是，问题是当我尝试连接到 PropertyChanged... 首先，我添加

```
 clients.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(agents_CollectionChanged); 
```

到 Main()，然后我添加：

```
 static void clients_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {

                 foreach (INotifyPropertyChanged item in e.NewItems)
                     item.PropertyChanged += new PropertyChangedEventHandler(newagent_PropertyChanged); 
    } 
```

我希望当 ObservableCollection 发生任何变化时调用 newagent_PropertyChanged 方法（此时它只是吐出到控制台）.. 但出于某种原因，一旦触发 PropertyChanged 事件，我就会在“ TCP 代码中的 cbDataRecievedCallbackComplete" 方法：

> 无法将“ClientState”类型的对象转换为“System.ComponentModel.INotifyPropertyChanged”类型。

...所以不知何故，试图引发 PropertyChanged 的​​行为导致“cbDataRecievedCallbackComplete”代码触发；就好像这些事件是“交叉路径”。如果我“捕获”错误，代码就会停止并且不再处理任何传入的数据。

我没有足够的经验来知道这是我引入的问题还是源代码的问题。我会把钱放在前者上：谁能看到问题出在哪里？

**更新：**针对以下答案，我将类定义更改为：

```
 public class ClientState : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }

        public string agentName { get; set; }
        public string currentCampaign { get; set; }

        public string _currentState;
        public string currentState
        {
            get { return _currentState; }
            set
            {
                if (value != _currentState)
                {
                    _currentState = value;
                    OnPropertyChanged("CurrentState");

                }
            }
        }
    } 
```

...所以我希望对“currentState”的任何更改都会触发一个事件。但是，我在同一个地方得到一个错误，除了现在错误是：

> 你调用的对象是空的。

在`r.DataReceived.EndInvoke(result)`cbDataRecievedCallbackComplete 的行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:36:01.387

此行将导致异常：

```
foreach (INotifyPropertyChanged item in e.NewItems) 
```

您将每个对象隐式转换`e.NewItems`为`INotifyPropertyChanged`. 由于`e.NewItems`包含`ClientState`我猜`ClientState`不实现的实例`INotifyPropertyChanged`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:40:37.910

如果您对 ClientState 的类定义看起来不像这样

```
public class ClientState : INotifyPropertyChanged 
```

那么您不能将其转换为 INotifyPropertyChanged 类型。您没有收到编译时异常，因为 e.NewItems 集合是对象类型，因此它可以让您尝试将其转换为任何内容。

# java - 无法获得 Java 数组的正确输出

> ID：10917400
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:31:31.370
> 
> 标签：java, arrays, user-input

作业的问题是：-

> 您被要求为帮助跟踪书籍的书店创建应用程序。
> 
> 您需要为您的应用程序创建以下类：
> 
> 1.  用正确的数据类型描述书名和书价的属性或变量的类。
> 2.  该类应存储书籍的集合（使用数组）。这个类还应该跟踪收藏中的书籍总数，收藏中书籍的总成本。
> 3.  【加分】班级还应显示最贵的书名和价格以及最便宜的书名和价格。
> 
> ### 要求
> 
> 您应该实现数组来存储书籍详细信息。无需实现任何数据库或文件。
> 
> 所有 java 源文件都必须包含您的姓名、学生 ID、课程和日期。将此信息包含在源代码的注释中（在标题中）。
> 
> 你的每个类都应该被适当地注释并检查代码

我已经成功地将书籍存储在数组中，并使其显示。但是我有问题，这本书的价格。它输出书名，但不输出购买书籍的价格和总价，请看我下面的编码。

```
import java.util.Scanner;

public class array_userinput {
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        int numOfBook;
        // prompts the user to enter the number of books he/she wants
        System.out.print("How many numbers of books u want: "); 

        double[] bookPrice = new double[numOfBook];
        int num = input.nextInt();
        // double price[];
        double totalCost = 0;
        String array[] = new String[num];

        System.out.print("Enter the " + num + " book names now: ");

        for (int i = 0; i < array.length; i++) {

            array[i] = input.next();

            System.out.println("These are the books you have entered: "
                    + array[i]);
            System.out.print("Please enter book price: ");
            bookPrice[i] = input.nextDouble();
            System.out.println(numOfBook);

            totalCost += bookPrice[i];
            double max = prices[i];
            int maxBook = 0;
            for (int i = 1; i < books.length; i++) {
                if (prices[i] > max) {
                    max = prices[i];
                    maxBook = i;
                }
            }

            System.out.print("Cheapest book: " + books[maxBook]);
            double min = prices[i];
            int minBook = 0;
            for (int i = 1; i < books.length; i++) {
                if (prices[i] < min) {
                    min = prices[i];
                    minBook = i;
                }
            }
            System.out.print("Cheapest book: " + books[minBook]);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:37:26.707

这个作业让我觉得这是一个代码设计练习，而不是“让代码工作”练习。所以仅仅让它发挥作用并不会削减它（如果你想要一个好成绩）。

“用正确的数据类型描述书名和书价的属性或变量的类”。“该类应该存储书籍集合（使用数组）”，您并没有真正这样做，您只是在 main 函数中完成所有操作。

您需要使用一点 OO 设计来创建一些简单的类（例如 Book 应该具有标题和价格以及构造函数和 getter 方法）。然后，您可以将它们的实例存储在您的阵列中并询问它们。对于最便宜的图书问题，您可以实现 compareTo 并使用 for(Book book in books) 构造。

还要考虑在“main”中尝试实现的功能分解，保持功能简单易读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:34:34.633

更多的工作[，](https://stackoverflow.com/questions/10853199/dynamic-object-creation-using-input-loops/10853349#10853349)对吧？

我在实现中犯了一个错误：`double max = prices[i];`不应该编译，因为我没有在这个上下文中初始化。尝试这个：

```
double min = prices[0];
int minBook = 0;
for(int i = 1; i < books.length; i++) {
    if(prices[i] < min) {
        min = prices[i];
        minBook = i;
    }
}
System.out.print("Cheapest book: " + books[minBook]); 
```

Jeff Watkins 的回答也完全正确：根据家庭作业，您将需要更好的设计。听从他对 Book 对象的建议；这很好。关于将 main 分解为函数，您可以编写将使用`public Book minBook(Book[] books)`的函数或类似的东西。`public Book maxBook(Book[] books)``aBook.compareTo(Book other)`

# c++ - 如何使用特定的 unicode 代码点 rtrim wchar_t？

> ID：10917404
> 
> 赞同：0
> 
> 时间：2012-06-06T15:31:42.103
> 
> 标签：c++, trim, wchar-t

例如我定义了这样的字符串：

```
const wchar_t mystring[] = L"зеленыйййййййййййййййййййййййй" 
```

我需要将其更改为：`зелены`

我有什么选择？有没有类似的东西：`wsrtrim(input,char_code)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:17:56.497

Nip：`mystring`是的`const`，你不能改变它。

如果您使用 C++，我建议使用 STL `string`（或者，在这种情况下，`wstring`）。这样，您可以选择使用 Boost 或字符串的内置功能（对于 Boost，使用任何类似 STL 的容器都可以）：

```
std::wstring wstr(mystring);
boost::algorithm::trim_right_if(wstr, [](wchar_t wch) { return wch == L'й'; });
// or
size_t pos = wstr.find_last_not_of(L'й');
if (pos != std::wstring::npos)
   wstr.erase(pos + 1);
else
   wstr.clear(); 
```

之后，您还可以复制`wstr`回`mystring`（假设您将其设为非常量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:29:39.003

```
#include <iostream>
#include <string>

std::wstring wstrtrim(std::wstring const &w,std::wstring const &trim) {
    std::wstring::size_type first = w.find_first_not_of(trim);
    if (first!=std::wstring::npos)
      return w.substr(first, w.find_last_not_of(trim)-first+1);
    return L"";
}

int main() {
    const wchar_t mystring[] = L"зеленыйййййййййййййййййййййййй";
    std::wstring w = wstrtrim(mystring,L"й");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:20:40.760

StrTrimW()

这就是 wchar_t 替换所需的全部内容。

艺术

# sql - ISNULL() 不起作用...可能是错误的位置？

> ID：10917405
> 
> 赞同：1
> 
> 时间：2012-06-06T15:31:43.910
> 
> 标签：sql, isnull

以下查询在它之外工作得很好，它仍然返回空值`NULL`而不是`0`. 具体来说，这是对指定日期范围内某事发生的次数的总和。如果参数中不存在该值（即`NULL`，），那么为了便于阅读，我希望它返回一个 0（该表是多个临时表的连接，仅包含整数。）我已经研究并发现这种情况“[如何从 SQL 函数获取单个值时将 NULL 更改为 0？](https://stackoverflow.com/questions/1005036/how-can-i-change-null-to-0-when-getting-a-single-value-from-a-sql-function) ”并尝试了那里的所有建议，包括`COALESCE`.

```
(SELECT tn.teamtext, tn.teamid, ISNULL(sum(ISNULL(case when CONVERT(smalldatetime,ca.dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end, 0)), 0) AS cnt3
  FROM teamnames AS tn 
    LEFT OUTER JOIN caseaudit AS ca
    ON tn.teamID = ca.referteamID2
  WHERE ca.referteamid1 <> ca.referteamid2 AND ca.isactive = 1 AND ca.groupid = 18 AND ca.accountid = 2 AND ca.referteamid1 = 31 AND ca.auditnote <> 'Suspend Case'
  GROUP BY tn.teamtext, tn.teamid) AS c 
```

为了了解我正在查看的返回表，这里是：

```
4H BOSS                    55   59  3
4H BSG                     0    3   2
4H SALES AND MKTG          0    0   0
ACCOUNTS RECEIVABLE        0    0   0
ASSET MANAGEMENT           9    16  0
AUDIT                      0    0   NULL
BOSS                       4    5   0
CORPORATE BSG              0    7   5
CUSTOMER SUPPORT           87   133 NULL
NETWORK ENGINEERING        11   15  0
PRODUCTION ENGINEERING     116  142 5
PRODUCTION OPERATIONS      0    1   0
SECURITY                   2    6   3
SNFAL PRODUCT TEAM         0    14  11
VOICE SERVICES             18   21  0
XEROX                      4    8   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:19:40.087

我同意（到目前为止）另外两个回应——这个查询中的 NULL 逻辑应该像你说的那样工作。但...

我在本地表上运行了类似于您的查询的内容，一切正常。然后我添加了最外面的括号：

```
(SELECT...
 ...) AS c 
```

并得到一个错误，因为 SQL 不支持该格式。这与显示四列的示例相结合，其中查询中仅列出了三列，这让我强烈怀疑这是更大查询中的子查询......在这种情况下，null/not null 问题可能与*完整*查询的逻辑，而不仅仅是这个子查询。如果我的猜测是正确的，请发布完整的查询供我们考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:56:25.203

我假设由于`CONVERT(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10'`引用了正确的表，有时它可以评估为 NULL 并且案例没有得到它。

你可以尝试明确地做`when (dModLast is null) then 0`

编辑：

```
case
   when dModLast is null then 0
   when CONVERT(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 
   else 0 
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:06:43.280

改成

```
ISNULL(SUM(CASE WHEN ISNULL(ca.dModLast,0)=0 THEN 0 ELSE CASE WHEN CONVERT(smalldatetime,ca.dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' THEN 1 ELSE 0 END END),0) as cnt3 
```

# maven - 使用 maven 在 tar 程序集中包含 Jar 依赖项

> ID：10917410
> 
> 赞同：0
> 
> 时间：2012-06-06T15:31:57.957
> 
> 标签：maven, dependency-management, maven-assembly-plugin

我正在使用带有 maven-assembly-plugin 的自定义 assembly.xml 文件构建 tar.gz 程序集。在该 tar 中是 {stuff +} 一个 WAR 文件，当前具有一定的依赖关系：

```
WEB-INF/lib/my-dependency.jar 
```

这一切都很好。

现在我想获取该依赖项，并将其从 WAR 文件中删除，然后将其放入 tar.gz 的根目录中。

**当前不正确的解决方案**

我可以将依赖项放入 tar 中，但我无法将其从战争中删除（使用我当前的解决方案）

```
<fileSets>
    <fileSet>
        <outputDirectory>/config/lib</outputDirectory>
        <directory>${project.build.directory}/fa/WEB-INF/lib</directory>
        <includes>
            <include>my-dependency-*.jar</include>
        </includes>
    </fileSet>
</fileSets> 
```

要解决上述问题，我还需要一些方法在创建 WAR 之前在程序集插件中删除 ${project.build.directory}/fa/WEB-INF/lib/my-dependency-*.jar ...（我'很确定它在执行上述指令时已经创建。

或者，另一种方法可能更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:52:41.847

如果战争是这个项目的一个依赖，你可以使用程序集插件来解压它并重新打包，而不需要 jars。关键配置是 unpack 和 unpackOptions 属性。

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>my-stripped-war</id>

<formats>
    <format>war</format>
</formats>    

<dependencySets>
    <dependencySet>
        <outputDirectory></outputDirectory>
        <useTransitiveDependencies>false</useTransitiveDependencies>
        <useProjectArtifact>false</useProjectArtifact>
        <includes>
            <include>*:war</include>  <!-- however specific you need here -->
        </includes>
        <unpack>true</unpack>
        <unpackOptions>
            <excludes>
                <!-- jars to exclude here -->
            </excludes>
        </unpackOptions>
    </dependencySet>
</dependencySets>
</assembly> 
```

然后，在您当前的程序集描述符中，您使用文件或文件集拉入这个剥离的战争。如果剥离的战争应该附加到项目中，您只需将此描述符添加到当前的程序集插件元素之前；如果不应该附加它，请使用多个程序集插件执行并将`<attach>`剥离的战争执行设置为 false。

如果战争是作为该项目的一部分构建的，请尝试使用`<packagingExcludes>`战争插件配置中的元素来防止不需要的 jar 进入战争。您不需要额外的程序集描述符。

# iphone - 过早调用 Dealloc 方法

> ID：10917414
> 
> 赞同：1
> 
> 时间：2012-06-06T15:32:17.190
> 
> 标签：iphone, ios, uialertview, dealloc

我有一个`UIAlertView`带 2 个按钮的。但我无法得到它的`clickedButtonAtIndex`事件。问题是因为 `- (void)dealloc`方法被过早地调用，我将代表设置为零。因此，无法处理警报视图按钮单击。这可能是什么原因。

编辑：我的代码有 2 个流向。在一个流动方向上，它工作正常。以正确的方式调用了 dealloc 方法。视图提前发布没有问题。

但是在第二个流程中，出现了这个问题。截至目前，我的理解是，`[self retain]`在视图过早释放的情况下，我需要将 UIAlertView 委托设置为。但是我将如何检查视图是否被释放或仍然保留，以免打扰第一个流程？

我正在发布代码的相关部分。我认为这是视图被释放的地方。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(actionSheet.tag == 102)
    {
        if(buttonIndex == 0)
        {
            [self.infoView removeFromSuperview]; 
            self.isSaveInfo = NO;
            [self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton.target];  //This is where the view is getting released.

            if([[NSBundle mainBundle] loadNibNamed:@"UploadView" owner:self options:nil])
            {
                [self.uploadView setFrame:CGRectMake(0, 0, 320, 480)];

                [[UIApplication sharedApplication].keyWindow addSubview:self.uploadView];
            }
            [self performSelector:@selector(RemoveView) withObject:nil afterDelay:3.0];
       }

       if(buttonIndex == 1)
       {
           [self.infoView removeFromSuperview];
           self.isSaveInfo = YES;

           [[NSNotificationCenter defaultCenter] removeObserver:self];
           [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadSaveButton) name:@"callThisMethod" object:nil];

           MyInfoViewController *myInfoViewController = [[MyInfoViewController alloc]initWithNibName:@"MyInfoViewController" bundle:nil];
           self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil] autorelease];
           [self.navigationController myInfoViewController animated:YES];
           [myInfoViewController release];
       }
   }
}

-(void)RemoveView
{
    if([MyViewController OnSave])
    {
        self.testAlert = [[[ UIAlertView alloc]initWithTitle:messageTitle message:messageBody delegate:self cancelButtonTitle:messageClose otherButtonTitles:nil]autorelease];
        self.testAlert.tag = 1;
        [self.testAlert show];
        [MyViewController setValue:NO];
    }
    else
    {
        self.testAlert = [[[ UIAlertView alloc]initWithTitle:messageTitle message:messageBody delegate:self cancelButtonTitle:messageClose otherButtonTitles:messageTryAgain, nil]autorelease];
        self.testAlert.tag = 2;
        [self.testAlert show];
    }
}

-(void)loadSaveButton
{
    [doneButton.target performSelector:doneButton.action];

    if([[NSBundle mainBundle] loadNibNamed:@"UploadView" owner:self options:nil])
    {
        [self.uploadView setFrame:CGRectMake(0, 0, 320, 480)];
        [[UIApplication sharedApplication].keyWindow addSubview:self.uploadView];

    }
    [self performSelector:@selector(RemoveView) withObject:nil afterDelay:3.0];
} 
```

按钮 0 索引内的代码`UIActionSheet`是视图被释放的地方，而按钮 1 索引工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:35:15.940

如果过早地调用了 dealloc 方法，那么您可能需要在某个地方保留您没有保留的视图。但是，如果不知道您的代码的更多详细信息，我们无法告诉您它可能在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:38:42.917

我认为，这段代码是问题所在。

```
[self performSelector:@selector(RemoveView) withObject:nil afterDelay:3.0]; 
```

在这里，我应该使用 withObject:self 而不是 withObject:nil，这似乎解决了发布问题。

# xml-namespaces - 配置 XML 命名空间

> ID：10917416
> 
> 赞同：1
> 
> 时间：2012-06-06T15:32:25.057
> 
> 标签：xml-namespaces

我已经制作了一个带有几个不同选项的 XML 生成器，其中一个是样式选项，它定义是对原始数据类型使用属性还是元素。

目前不支持 XML 模式，但我需要允许设置 XML 命名空间，并且我一直在做一些研究。我的理解是 XML 命名空间可以有前缀，但不是必须的。它还需要一个唯一的字符串属性值，该值**通常**是 URI，但并非必须如此。

我有点困惑，因为我是 XML 命名空间的新手，如果我们看一下示例 xml 文档，我对此有一些疑问

```
<?xml version="1.0"?>
<root xmlns="some_identifier">
<oneKey>value</oneKey>
</root> 
```

这是使用键值示例的元素样式，我将允许配置“some_identifier”。在这个例子中是 XML 命名空间下的“oneKey”元素吗？还是我必须指定一个前缀`xmlns:ns`，然后在“oneKey”前面加上“ns”？

另外，如果我们看一下属性样式：

```
<?xml version="1.0"?>
<root xmlns="some_identifier" oneKey="value" /> 
```

在这个例子中，我们是否需要在 oneKey 中定义类似的前缀？

如果我在这些问题上偏离了标准，我深表歉意，如果我没有意义，请告诉我，

更新：

我找到了这个网站：[http ://www.rpbourret.com/xml/NamespacesFAQ.htm#exec_1](http://www.rpbourret.com/xml/NamespacesFAQ.htm#exec_1)

也就是说这两个是相同的：

```
<foo:A xmlns:foo="http://www.foo.org/">
     <foo:B>abcd</foo:B>
</foo:A> 
```

和

```
<A xmlns="http://www.foo.org/">
     <B>abcd</B>
</A> 
```

这非常有用，但关于属性样式。我需要为属性添加前缀吗？或者 xmlns 默认也适用于这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:46:35.763

```
<root xmlns="some_identifier"> 
```

这声明了默认命名空间，root 及其所有子项都属于它，您不需要前缀。

```
<root xmlns="some_identifier" oneKey="value" /> 
```

默认命名空间不适用于属性。如果你想让 oneKey 属于一个命名空间，你必须创建一个前缀并在属性上使用它

```
<root xmlns="some_identifier" xmlns:myns="some_identifier" myns:oneKey="value"/> 
```

# cuda - CUDA 直接访问 DirectX 11 后备缓冲区

> ID：10917421
> 
> 赞同：0
> 
> 时间：2012-06-06T15:32:55.663
> 
> 标签：cuda, directx

是否可以直接通过 CUDA 访问 DX11 后备缓冲区？因此，与其将数据复制回 CPU，然后发送回设备以渲染为纹理，我可以直接在内核中访问缓冲区吗？

这在 DirectCompute 中似乎是可能的，所以我想知道我是否可以这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:51:22.540

是的。查看 CUDA 编程指南中的 DirectX 互操作性。

# html - 如何通过 CSS 在可变高度内容区域上设置复杂的阴影背景？

> ID：10917422
> 
> 赞同：4
> 
> 时间：2012-06-06T15:32:55.940
> 
> 标签：html, layout, css, css-float

我正在尝试在网站的可变长度内容部分构建复杂的阴影背景。我已经尝试了所有我知道的技巧来完成这项工作，只是无法弄清楚如何让它正常工作。我希望这里的 CSS 忍者可以提供帮助。

你可以在这里看到我想要完成的一个例子：http: [//mpgnet.com/example.jpg](http://mpgnet.com/example.jpg)

如您所见，顶部和底部阴影很容易。左右两边的阴影是麻烦制造者。顶部和底部 150px 与中心部分不同，中心部分需要随着中心内容垂直增长而扩展。

这就是它变得非常棘手的地方：这些阴影必须有一个透明的背景，因为背景不是实心的（就像在这个示例图像中突出阴影一样），而且因为长度是可变的，所以你永远不知道端盖的位置落在背景图案上。正因为如此，我不能只用一个重复的阴影制作整个东西，然后用顶部和底部的部分覆盖它。

任何关于如何实现这一点的建议/想法/灵感都值得赞赏。CSS3 使用没问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T17:49:27.560

这使用了 CSS3，所以它在 IE8 或更早版本中不起作用，但我想我已经写了一些你可以使用的东西。[你可以在这里](http://projects.atdev.is/maggi/shadows/test.html)看到一个工作演示。（只需扩展和收缩浏览器窗口即可查看它的工作）。

我看到有人提到使用border-image，但这种方式不需要图像并且具有更好的浏览器支持（尤其是IE9）。

我没有做顶部和底部阴影，因为它们不需要在您的设计中扩展和收缩。

```
.shadowbox {
    position: relative;
    margin: 100px auto;
    width: 80%;
}

.shadowbox:after {
    position: absolute;
    content: '';
    top: 10px;
    bottom: 10px;
    left: 0;
    width: 20px;
    box-shadow: 0px 0px 15px rgba(0,0,0,0.7);
    border-radius: 50%;
}

.shadowbox:before {
    position: absolute;
    content: '';
    top: 10px;
    bottom: 10px;
    right: 0;
    width: 15px;
    box-shadow: 0px 0px 15px rgba(0,0,0,0.7);
    border-radius: 50%;
}

.shadowbox.content {
    position: relative;
    z-index: 1;
    background: #fff;
    padding: 30px;
    z-index: 10;
} 
```

# gwt - GWT 锁定/冻结/引脚行

> ID：10917423
> 
> 赞同：0
> 
> 时间：2012-06-06T15:32:57.637
> 
> 标签：gwt

我正在寻找固定行，在我的情况下是前 n 行（+ 标题行），以便在滚动表格时这些行保持在顶部。

```
Header 1 (pinned)
Row 1    <- pin at top
Row 2    <- pin at top
Row 3    <- scroll with rest of table 
```

我知道 DataGrid 让你固定标题，但我也想要一些行。我以为我在某个时候看到了一个这样的例子，但找不到它。CellTable、DataGrid 甚至可视化表都是可以接受的。起初我以为我可以制作一个自定义 DataProvider，但这看起来不是正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:41:20.523

对于跨浏览器解决方案，我认为您别无选择，只能制作 2 个 CellTables：一个用于标题行和“固定行”，另一个在 ScrollPanel 中用于表格的其余部分。

这基本上就是`DataGrid`幕后的工作。

当然，这意味着您必须使用自定义数据提供程序：一个用于固定行，一个用于可滚动行。

# javascript - 创建跨浏览器可编辑的 iframe

> ID：10917435
> 
> 赞同：0
> 
> 时间：2012-06-06T15:34:01.117
> 
> 标签：javascript, iframe, cross-browser

我一直在使用允许用户创建和编辑内容的可编辑 iframe 开发 HTML 编辑器。我发现 iframe 中生成的 HTML 因所使用的浏览器而异。例如，在 IE 和 Opera 中，文本块被`<p>`标签包围；

```
<p>Hello world!</p> 
```

在 Firefox 中，文本块以`<br>`标签结尾；

```
Hello world!<br> 
```

在 Safari 和 Chrome 中，文本块被`<div>`标签包围；

```
<div>Hello world!</div> 
```

如果用户在一个浏览器中创建内容并尝试在另一个浏览器中编辑它，这可能会出现问题，并且随着时间的推移会导致 HTML 代码不一致。

我发现一些 HTML 编辑器可以生成相同格式的 HTML，而不管所使用的浏览器如何。例如，在[CKEditor](http://ckeditor.com/demo)中，文本块总是被`<p>`标签包围，允许在任何浏览器中干净地创建和编辑 HTML。

**有没有办法强制 iframe 使用一组特定的 HTML 标签，主要是`<p>`在有人创建新段落或文本块时只创建标签，而不管浏览器如何？**任何人都可以为我提供任何提示、代码示例或解决我的问题的方法吗？我知道我可以使用现有的 HTML 编辑器，但我只对这个特定方面感兴趣。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:40:37.050

没有简单的方法。CKEditor 等通过添加大量自定义事件处理来实现。我建议查看他们的源代码以获取灵感。

有一个[HTML 编辑规范](http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html)已经达到了合理的完成水平，但据我所知，到目前为止浏览器开发人员几乎没有努力实现它。

# javascript - 使用用户未安装的自定义字体

> ID：10917436
> 
> 赞同：1
> 
> 时间：2012-06-06T15:34:02.027
> 
> 标签：javascript, html, css

> **可能重复：**
> [如何合法使用网络字体？](https://stackoverflow.com/questions/1805324/how-to-use-web-fonts-legally)
> [在 CSS 中使用自定义 (ttf) 字体](https://stackoverflow.com/questions/7512468/using-a-custom-ttf-font-in-css)

只是一个简单的 - 想知道如果我说，找到一种用户可能不会安装的好字体，有没有一种方法可以在不安装在用户计算机上的情况下使用它？我的意思是不让它成为一个图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T15:35:14.913

你需要使用[CSS 的 @font-face](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:38:05.290

是的，您可以使用 CSS3 @font-face。您必须在服务器内以特殊格式上传字体文件。确保字体的许可证允许这样做。

[您可以在http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)上找到可供选择的免费字体，它还提供 CSS 属性生成器并将字体文件转换为所需的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T16:01:24.150

在 CSS 中使用以下内容。您需要将 .ttf 转换为 .eot 才能正常使用 IE。

```
@font-face { 
   font-family: "SFSpeedway"; 
    /* IE */
    src: url(./fonts/fontname.eot');
    /* IE */

    /* Not IE */
    src: local("SF Speedwaystar Condensed"), url(./fonts/fontname.ttf');
    format("truetype");
    /* Not IE */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:39:44.557

如果字体可用，您可以使用 css 的 @font-face - 请记住，使用它会影响您的页面加载时间，这也可能会影响慢速（移动）连接的性能。

否则使用后备字体会更安全：

```
font-family: helvetica neue, arial, serif; 
```

你也可以看看cufon，但我个人不喜欢它

# c# - C# 属性是隐藏实例变量还是发生了更深层次的事情？

> ID：10917437
> 
> 赞同：3
> 
> 时间：2012-06-06T15:34:06.850
> 
> 标签：c#, .net

考虑类：

```
public class foo
{
    public object newObject
    {
        get
        {
            return new object();
        }
    }
} 
```

根据 MSDN：

> 属性是提供灵活机制来读取、写入或计算私有字段值的成员。属性可以像公共数据成员一样使用，但它们实际上是称为访问器的特殊方法。这样可以轻松访问数据

和：

> 属性使类能够公开获取和设置值的公共方式，同时隐藏实现或验证代码。
> 
> get 属性访问器用于返回属性值，而 set 访问器用于分配新值。这些访问器可以具有不同的访问级别。有关详细信息，请参阅访问器辅助功能。
> 
> value 关键字用于定义由 set indexer 分配的值。
> 
> 未实现 set 方法的属性是只读的。同时仍然提供方法的安全性和灵活性。

因此，这是否意味着在某个时间点 newObject 属性的值具有对返回的新对象的引用？

**编辑**从属性中删除只读

**edit2**还想澄清一下，这不是属性的最佳用途，而是尝试更有效地说明问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T15:37:14.570

每次访问属性时都会返回一个新对象，这不是属性的预期行为。相反，您应该每次都返回相同的值（例如，存储在字段中的值）。**属性 getter 只是对返回值的方法的美化语法**。你的代码编译成这样的（编译器通过在属性名称前加上前缀来创建一个 getter，`get_`然后作为 IL 发出）：

```
public class foo
{
    public object get_newObject()
    {
        return new object();
    }
} 
```

`foo`对 getter 的每次调用都会创建一个不知道或无法访问的新对象。

> 因此，这是否意味着在某个时间点 newObject 属性的值具有对返回的新对象的引用？

不。

* * *

使用支持字段的属性：

```
class Foo {

  readonly Object bar = new Object();

  public Object Bar { get { return this.bar; } }

} 
```

使用自动属性：

```
class Foo {

  public Foo() {
    Bar = new Object();
  }

  public Object Bar { get; private set; }

} 
```

使用与公共字段相同的简单语法访问属性。但是，通过使用属性，您可以向 getter 和 setter 添加代码，从而允许您在 getter 中进行延迟加载或在 setter 中进行验证（等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:46:05.523

在后台，您的属性将简单地调用一个名为 get_newObject() 的函数，如下所示：

```
public object get_newObject()
{
    return new object();
} 
```

既然是这种情况，每次调用它总是会返回一个新对象。

如果您想保留对对象的引用，那么我建议创建一个私有字段来保存数据并让属性访问该字段，如下所示：

```
private object myObject;
public object newObject
{
    if(myObject == null)
    {
        myObject  = new object();
    }
    return myObject;
} 
```

由于您的属性未定义集合，并且您的字段是私有的，因此 newObject 基本上在包含类之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:47:28.913

C# 中的属性是“语法糖”。属性块内的代码`get`实际上是放入隐藏`get_PropertyName()`方法中，而`set`块​​中放入隐藏`set_PropertyName()`方法。对于您的代码，将创建以下方法：

```
public object get_newObject()
{
    return new object();
} 
```

如果您使用 Reflector 或 ildasm 查看已编译的程序集，则可以看到这些隐藏的方法。

使用该属性时，C# 编译器会将您的属性的任何“get”访问转换为`get_newObject()`方法调用。举个例子：

如果您要编写以下内容：

```
var foo = new foo();
var aNewObject = foo.newObject; 
```

编译器会将其转换为：

```
var foo = new foo();
var aNewObject = foo.get_newObject(); 
```

因此，在回答您的另一个问题时，当有人“获取”该属性时返回的新创建的对象不会存储在您的 foo 实例中，调用者每次都会简单地获取一个新对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:38:30.700

不完全是。属性只是语法糖，因此您不必编写访问器方法（如 Java）。

所以这：

```
private int _myInteger;
public int MyInteger
{
    get { return _myInteger; }
    set { _myInteger = value; }
} 
```

相当于这个：

```
private int _myInteger;
public int GetMyInteger()
{
    return _myInteger;
}

public void SetMyInteger(int value)
{
   _myInteger = value;
} 
```

并且它变得更好，这也是等价的：

```
public int MyInteger { get; set; } 
```

# jquery - jQuery UI 滑块背景

> ID：10917442
> 
> 赞同：2
> 
> 时间：2012-06-06T15:34:29.750
> 
> 标签：jquery, user-interface, background, slider, range

我有一个范围滑块，我有一个滑块选定部分的图像。 ![范围滑块](../Images/19d62668ced0dffe39efe78b3ebc1ef0.png)

问题是当我移动左滑块时，背景图像也会移动。我希望背景图像保持固定。我能想到的唯一方法是计算滑块移动了多少像素，然后从背景图像的 x 位置中减去。有没有其他更简单的方法来做到这一点。

```
.ui-widget-header{ //selected part of the bar
        background: url('../images/elements/sliderBarSelected.png'); 
```

那是改变背景的代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:07:15.180

我认为用css不可能做到这一点。因为 ui-widget-header 的宽度是动态设置的，所以您需要使用 'slide' 回调动态更改背景图像的背景位置。

您也可以尝试使用：

```
background: url('../images/elements/sliderBarSelected.png') 50% 50%; 
```

所以两个滑块的效果是一样的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-17T05:12:07.577

尝试使用 `background-attachment: fixed`

# android - 在主活动中使用edittext preferenceactivity的新值，无需关闭应用程序

> ID：10917445
> 
> 赞同：0
> 
> 时间：2012-06-06T15:34:57.567
> 
> 标签：android, save, android-edittext, preferenceactivity, preference

我想在主要活动中使用作为 ip 的 edittext 首选项的新值。我不必在主要活动中显示价值。当我尝试这样做时，我只会获得默认值，直到我关闭并再次打开应用程序。

我只知道如何在写入后保存新值。

这是主要活动的代码

```
public String IP;
public int puerto;

//Para crear el menu de settings
@Override
public boolean onCreateOptionsMenu(Menu menu){

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
    return true;

}

//Se ponen las opciones de los iconos del menu
public boolean onOptionsItemSelected(MenuItem item){

    switch (item.getItemId()) {
    case R.id.settings:
        startActivity(new Intent(getApplicationContext(),SettingsActivity.class));
        break;

    case R.id.camera:

        break;

    case R.id.exit:
        this.finish();
        break;

    default:
        break;
    }

    return true;

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    IP = preferences.getString("prefIP", "127.0.0.1");
    puerto = Integer.parseInt(preferences.getString("prefPort", "1101"));

 //After that I use the values to use a socket connection

} 
```

//偏好活动代码

```
 import android.os.Bundle;
 import android.preference.PreferenceActivity;

public class SettingsActivity extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:42:45.977

一种方法是，在您的主要活动中，覆盖`onResume()`并使用它来检查首选项是否已更改：

```
@Override
protected void onResume() {
    super.onResume();
    SharedPreferences preferences =
        PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String nuevoIP = preferences.getString("prefIP", "127.0.0.1");
    int nuevoPuerto = Integer.parseInt(preferences.getString("prefPort", "1101"));
    if (puerto != nuevoPuerto || !IP.equals(nuevoIP)) {
        // IP and/or puerto have changed
        IP = nuevoIP;
        puerto = nuevoPuerto;
        // close and reopen socket if appropriate
    }
} 
```

每当您从 SettingsActivity 返回主要活动时，都会调用此方法。

如果共享首选项可能会在不暂停您的主要活动的情况下发生更改，则您必须[`OnSharedPreferenceChangeListener`](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)使用共享首选项注册并在那里执行上述逻辑。然后，取消注册侦听器`onPause()`并将其注册到`onResume()`. 您仍然需要进行上述签入，`onResume()`因为在暂停时它不会一直在监听更改。

# javascript - nextDay、nextWeek、nextMonth 文本字段中显示的 Javascript 更改日期

> ID：10917452
> 
> 赞同：0
> 
> 时间：2012-06-06T15:35:25.437
> 
> 标签：javascript, date, datepicker, textfield, datechooser

我很确定某处有答案，找到了很多答案，但不知何故无法在我的代码中实现它。我知道我的代码中有错误，但是我不确定在这种情况下 javascript 是如何工作的，因此我的问题是。我想知道我的功能无法正常工作的原因（为什么要添加几个月？）以及如何使其工作。感谢您的任何回答。

```
<input type='text' id='calendar_form' />
<input type='button' onclick="nextDay()" value='NextDAY' />
<script>
    function nextDay() {
        var example = document.getElementById('calendar_form').value;
        var date = new Date();
        var parts = example.split('.');
        date.setFullYear(parts[2], parts[0], parts[1]);
        date.setTime(date.getTime() + 86400000);
        var dateDay = date.getDate();

        var dateMonth = date.getMonth();

        var dateYear = date.getFullYear();

        document.getElementById("calendar_form").value = dateDay + "." + dateMonth + "." + dateYear;

    }
</script> 
```

我试图实现的是一组函数，它们允许我更改文本字段中显示的日期（dd.MM.yyyy）（如下一个/上一个日期、下一个/上一个星期、下一个/上一个月份）。如果您能指出我寻找答案的任何好方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:41:10.787

您交换了月/年，因为[顺序](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date#Syntax)是年-月-日。我会推荐`new Date`而不是推荐`setFullYear`。你可以这样做：http: [//jsfiddle.net/nQtQP/](http://jsfiddle.net/nQtQP/)。

```
var date = new Date(parts[2], parts[1], parts[0]); 
```

# accordion - jQuery 手风琴部分索引

> ID：10917455
> 
> 赞同：0
> 
> 时间：2012-06-06T15:35:43.613
> 
> 标签：accordion, jquery-ui-accordion

我怎样才能使这个手风琴通用？也就是说，而不是 active:2 我希望它指向下一部分（可能是诸如 next() 之类的函数......）。同样，对于上一节。

$('#accordion').accordion({collapsible: true, active:2});

还有一次，如果它打开一个部分，有没有办法专注于该部分的第一个或最后一个输入字段？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:46:52.747

```
$("#selector").accordion({ 
    change : function(event, ui) {
        // Your code to expand the next section and/or select the first element
    }
    // There is also a changestart event you could use instead of change
}); 
```

# tfs-2012 - 如何在 TFS 2012 中自定义任务板？

> ID：10917457
> 
> 赞同：10
> 
> 时间：2012-06-06T15:35:55.257
> 
> 标签：tfs-2012

我已经安装了 TFS 2012 RC，并设法自定义我的工作项类型以添加​​自定义字段以及附加状态。

我希望能够在 In progress 列和 Done 列之间看到这种附加状态，并且没有找到执行此操作的方法。

关于如何实现板的定制的任何想法（我正在使用 SCRUM 模板）。

问候，

# php - php_memcache.dll 用于 php 5.2.4

> ID：10917458
> 
> 赞同：0
> 
> 时间：2012-06-06T15:35:55.790
> 
> 标签：php, windows, dll, memcached

试图在 php 5.2.4 上找到 memcache 的 dll。在 Windows 服务器 2k3 x64 上运行

我可以为 5.3 找到一些，但要么它们不工作，要么我不知道如何让它们工作。php.ini 文件指向 ext 文件中的正确扩展名，但失败并出现以下错误：

致命错误：在第 2 行的 \PATH\ 中找不到类“Memcache”

无论是否存在 ext 文件夹中 php 5.3 的 php_memcache.dll，都会发生此错误。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:41:52.330

[http://museum.php.net/php5/pecl-5.2.4-Win32.zip](http://museum.php.net/php5/pecl-5.2.4-Win32.zip)

该 zip 中的版本是为 5.2.4 编译的，我不知道它是否可以在 x64 上运行。

[http://www.php.net/releases/](http://www.php.net/releases/)始终是寻找旧东西的起点，也是我找到该链接的地方。但我建议升级到 5.3 或 5.4，或者至少升级到 5.2.17。

# php - 有一个 Mysql 包装类来支持 mysqli 的一些功能

> ID：10917462
> 
> 赞同：2
> 
> 时间：2012-06-06T15:35:58.213
> 
> 标签：php, mysql, mysqli, wrapper

**简而言之**
，我们需要从 mysqli 切换到 mysql。我们想要一个包装类，它使用 PHP 的 mysql 扩展的函数，但支持 mysqli 的以下函数的功能 -

```
query(), real_escape_string(), multi_query(), store_result(), more_results() , next_result(), use_result(), mysqli_connect_error(). 
```

例如，使用 mysql_pconnect() 进行持久连接。

基本上，它将确保我们对所有函数都有相同的逻辑和返回类型，我们将必须根据所有相关函数的文档进行验证，并且可能还必须研究 mysqli 函数的实现。

但是，有没有人想出类似的东西？

**背景**
我们在系统中使用[Tera-WURFL](http://dbapi.scientiamobile.com/wiki/index.php/Main_Page)进行移动设备检测。我们遇到了一些问题，因为我们的生产 PHP 版本是 5.2.6，而 TeraWurfl 使用数据库连接器 TeraWurflDatabase_MySQL5.php，它使用以下内容：

*   mysqli_connect_error()，直到 php 5.2.9 才支持（我们使用 php 5.2.6）
*   在 php 5.3.0 之前不支持的持久连接（我们使用 php 5.2.6）

直到 php 5.3.0 才完全支持 mysqli。

所以，我们有两个选择——

1.  升级 PHP - 但是，这需要大量的回归测试，因为我们使用的 OpenX 版本似乎没有针对这些最新的 PHP 版本进行测试。我们系统的核心在于 Openx。

2.  编写一个包装类以具有与 MySQLi 相同的面向对象的 API。这看起来更简单。

因此，我们决定估计提出包装类所需的工作量。这是我们的想法——

由于 PHP 仅为其 mysql 扩展提供过程接口并`TeraWurflDatabase_MySQL5.php`以面向对象的方式调用 mysqli 的函数，因此我们必须创建一个包装类，该类将提供与 mysqli 类相同的接口，以便切换到 mysql。

我们可以创建与 mysqli 中名称相同的函数，例如 query()、store_result() 并返回类似的参数，这样我们只需要更改`TeraWurflDatabase_MySQL5.php`文件中的对象初始化。

有人做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:46:39.660

首先至少升级到最新的 5.2.x 版本 - 它与您的 5.2.6 完全兼容，顺便说一句，它现在已经 4 年了，并且有 4 年的未修复错误，包括安全问题。

其次，mysqli 引入了许多 mysql 扩展不支持的特性，你将无法使用包装器解决这些特性。如果您的 php 代码使用准备好的语句，则多个语句或事务包装器将不会这样做。

顺便说一句，如果您应用此修复程序，OpenX 似乎可以与 PHP 5.3 一起使用：[http](http://www.outofcontrol.ca/thoughts/comments/openx-causing-segmentation-fault-11-in-php-5-3-6) ://www.outofcontrol.ca/thoughts/comments/openx-causing-segmentation-fault-11-in-php-5-3-6 它没有t 与 PHP 5.4 一起工作，我严重怀疑它永远不会，因为似乎不再开发开源版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:39:17.227

你试过[PDO](http://www.php.net/manual/en/intro.pdo.php)吗？由于您使用 php 5.2 和手册“PDO 随 PHP 5.1 提供，并且可作为 PHP 5.0 的 PECL 扩展使用”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:14:55.843

也许可以试试**Zebra_Database**一个轻量级的[mysql 数据库包装器](http://stefangabos.ro/php-libraries/zebra-database/)- 只有一个文件，成熟且[有据可查](http://stefangabos.ro/wp-content/docs/Zebra_Database/Zebra_Database/Zebra_Database.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:37:41.797

如果您进行以下更改，OpenX 2.8.10 可以在 PHP 5.4 中运行：

A) 在 /openx2.8.10/lib/pear/PEAR.php 中更改以下内容（第 335 行）

```
function setErrorHandling($mode = null, $options = null) 
```

到

```
public static function setErrorHandling($mode = null, $options = null) 
```

B）在 openx2.8.10/lib/OA/Admin/Statistics/Delivery/CommonEntity.php 更改以下（第 294 行）

```
$oPlugin->mergeAds($this->childrendata['ad_id']); 
```

到

```
$oPlugin->mergeAds(&$this->childrendata['ad_id']); 
```

C）在 openx2.8.10/lib/OA/Admin/Statistics/Delivery/CommonEntity.php 更改以下（第 324 行）

```
$oPlugin->mergeZones($this->childrendata['zone_id']); 
```

到

```
$oPlugin->mergeZones(&$this->childrendata['zone_id']); 
```

随着这些变化，OpenX 及其统计页面将在 PHP 5.4 中可用

# android - 如何将倒数计时器值传递给另一个活动

> ID：10917470
> 
> 赞同：0
> 
> 时间：2012-06-06T15:36:40.323
> 
> 标签：android, timer

我正在尝试制作一个 android 应用程序，管理员将设置计时器倒计时，并且用户必须能够看到倒计时的时间......我可以设置计时器，但我不知道如何将其传递给另一个活动。 ..请帮助我的代码

```
public class Timer extends Activity  {
    public TextView mTextField;

    public String formatTime(long millis) { 
        String output = "00:00"; 
        long seconds = millis / 1000; 
        long minutes = seconds / 60; 

        seconds = seconds % 60; 
        minutes = minutes % 60; 

        String secondsD = String.valueOf(seconds); 
        String minutesD = String.valueOf(minutes); 

        if (seconds < 10) 
          secondsD = "0" + seconds; 
        if (minutes < 10) 
          minutesD = "0" + minutes; 

        output = minutesD + " : " + secondsD; 
        return output; 
      } 
    public CountDownTimer Counter1;

     @Override 
     public void onCreate(Bundle savedInstanceState) { 
         super.onCreate(savedInstanceState); 
         setContentView(R.layout.main); 

//Declare Start/Stop button 
Button btnstart = (Button)findViewById(R.id.button01); 
Button btnstop = (Button)findViewById(R.id.button02); 
Button btnpass = (Button)findViewById(R.id.button03);

//Declare Text fields to show time left 
final TextView mCounter1TextField=(TextView)findViewById(R.id.textView01); 
final TextView mCounter2TextField = (TextView)findViewById(R.id.textView02); 
final TextView mCounter3TextField=(TextView)findViewById(R.id.textView03); 

//Counter 1 
 Counter1 = new CountDownTimer(120000 , 1000) { 
public void onTick(long millisUntilFinished) { 
    mCounter1TextField.setText("Seconds left: " + formatTime(millisUntilFinished)); 
} 

public void onFinish() { 
    mCounter1TextField.setText("Finished!"); 
   // Counter1.start();
} 
}; 
```

以及我需要接收计时器的活动

```
public class f extends Activity {
     public TextView tt;

      public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.dfsdfsd);

             Timer objtime = new Timer();

          TextView productTitleTextView = (TextView) findViewById(R.id.textViewtimer);

          productTitleTextView.setText("Left Time is : " + objtime.Counter1);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:57:41.847

当您说管理员设置时间时，这是否发生在另一台设备上？

如果您想在同一设备的同一应用程序中将信息从一个 Activity 传递到另一个 Activity，您可以使用以下两件事：

Activity.startActivityForResult(Intent intent, int requestCode) 并在onActivityResult方法中获取结果。

或者，您可以使用 Extras 将您想要的任何信息从一个 Activity 传递到另一个：调用 Activity 中的 putExtra() 和接收 Activity 中的 getIntent().getExtras()。

以下是一些可能适合您的示例的代码：确保在您的 Timer.java 类中，无论您传递给另一个 f.java Activity 都是全局声明的，而不仅仅是在 formatTime 内，以便您能够实际传递它，我猜你什么时候按下 btnpass 按钮。

如果我上面的假设是正确的，那么这段代码可能会进入 btnpass 的 onClick() 方法。

```
Intent timerIntent = new Intent(this, f.class); //sets your intent to call the f.java class
timerIntent.putExtra("result", output); //puts the String you want to pass
startActivity(timerIntent); //starts the f.java Activity 
```

在 f.java Activity 中，您会得到 String 输出，我猜这将在您的 onCreate() 方法中，如下所示：

```
String output = getIntent().getExtras().getString("result"); //gets the output string from your previous Activity 
```

# android - opencv android java matrix submatrix (ROI Region of Interest)

> ID：10917480
> 
> 赞同：0
> 
> 时间：2012-06-06T15:37:11.560
> 
> 标签：android, opencv, submatrix

我已经`mRgba Matrix and a Rect r`（在框架中识别出的东西）

我想要一个由定义的框架的这一部分的子矩阵`Rect r.`

当我这样使用它时：

`sub = mRgba.submat(r);`

我得到了正确的子矩阵，但是接下来的步骤有问题，我想更改框架的这一部分，然后将其复制回原来的。

*例如：*

```
 Imgproc.cvtColor(sub, sub, Imgproc.COLOR_RGBA2GRAY, 1); //make it gray
 Imgproc.cvtColor(sub, sub, Imgproc.COLOR_GRAY2RGBA, 4); //change to rgb 
```

我怎样才能把这个改变的子矩阵复制回原来的。或者我怎样才能获得/创建一个与 mRgba 相同大小的掩码，除了 Rect r 部分之外全为零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:43:38.037

您的代码无法按预期工作，因为无法就地更改颜色数量。您需要一个临时矩阵才能使其工作：

```
Mat tmp;
Imgproc.cvtColor(sub, tmp, Imgproc.COLOR_RGBA2GRAY); //make it gray
Imgproc.cvtColor(tmp, sub, Imgproc.COLOR_GRAY2RGBA); //change to rgb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:21:13.300

```
sub = mRgba.submat(r);

Imgproc.cvtColor(sub, sub, Imgproc.COLOR_RGBA2GRAY, 1); //make it gray
Imgproc.cvtColor(sub, sub, Imgproc.COLOR_GRAY2RGBA, 4); //change to rgb

sub.copyTo(mRgba.submat(r)); 
```

好的，这似乎可以解决问题 :) 它将更改后的子图片/矩阵复制回源区域..（通常使用 setROI 和 copyto 完成的操作）

# asp.net-mvc-3 - 为什么我的局部视图不起作用？

> ID：10917483
> 
> 赞同：1
> 
> 时间：2012-06-06T15:37:22.030
> 
> 标签：asp.net-mvc-3

这让我很烦，我不知道发生了什么。我创建了一个局部视图来正确格式化数字。

该文件`_PermitNumber.cshtml`位于`/Views/Shared`并包含：

```
@model System.Int32
@Html.Raw(Model.ToString("00-0000")) 
```

在我的主页上，我这样做：

```
@Html.DisplayFor(model => model.BuildingPermit.PermitId, "_PermitNumber") 
```

`model.BuildingPermit.PermitId`被定义为一个`int`。

我的输出是 120456 而不是预期的 12-0456。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:15:14.467

为什么要使用视图来格式化输出？这似乎是您添加到视图中的不必要的复杂性。IMO 更好的位置将在您的视图模型的属性内：

```
public string FormattedPermitNumber
{
    get 
    {
         return PermitId.ToString("00-0000"));
    }
} 
```

但要回答您的问题，如果您要删除部分视图，您会看到您的号码仍显示为 120456。为了呈现您的部分视图，您需要按如下方式呈现部分视图：

```
@{ Html.RenderPartial("_PermitNumber",  Model.BuildingPermit.PermitId); } 
```

# c# - C# linq group by 在同一实体中的不同键上

> ID：10917484
> 
> 赞同：4
> 
> 时间：2012-06-06T15:37:22.893
> 
> 标签：c#, asp.net, linq, lambda

我已经玩了一段时间了，只是无法理解。我是 Linq、C# 和这些 Lambda 的新手。

我想要做的是根据每个实体的两个属性对实体进行分组。这是一个消息实体：

```
Message
{
int UserId; //The user generating the message
int UserIdTo; //The receiver of the message
|...| // Other stuff 
} 
```

所以，我希望这些 UserId=5, UserIdTo=6 和 UserId=6, UserIdTo=5 位于同一个组中。

这是我的开始：

```
var groupList = (from m in db.Messages
                             where m.UserId == userId || m.UserIdTo == userId
                             join u in db.Users on m.UserId equals u.UserId
                             join w in db.Users on m.UserIdTo equals w.UserId
                             orderby m.MessageTimestamp descending
                             select new DomMessage
                             {
                                 MessageId = m.MessageId,
                                 MessageContent = m.MessageContent,
                                 MessageTimestamp = m.MessageTimestamp,
                                 UserId = m.UserId,
                                 UserIdTo = m.UserIdTo,
                                 ScreenName = u.ScreenName,
                                 ScreenName2 = w.ScreenName
                             }).GroupBy(m=>m.UserId == userId)
                             .ToList(); 
```

这是按 UserId 分组的第一步，但我一直在尝试扩展它，以便结果组中的任何 UserId 值等于其他地方的 UserIdTo 将其添加到该组？

编辑：我需要将结果放入列表，因为我还需要处理其他事情......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:20:34.957

Try this:

```
var payload = new[] 
        {
            new{ To = 1, From = 2, Message = "msj1" },
            new{ To = 1, From = 2, Message = "msj2" },
            new{ To = 2, From = 1, Message = "msj3" },
            new{ To = 4, From = 1, Message = "msj4" },
            new{ To = 1, From = 3, Message = "msj5" }
        };

        var groupped = payload.Select(x => new { Key = Math.Min(x.To, x.From) + "_" + Math.Max(x.To, x.From), Envelope = x }).GroupBy(y => y.Key).ToList();

        foreach (var item in groupped)
        {
            Console.WriteLine(String.Format(@"Group: {0}, messages:", item.Key));

            foreach (var element in item)
            {
                Console.WriteLine(String.Format(@"From: {0} To: {1} Message: {2}", element.Envelope.From, element.Envelope.To, element.Envelope.Message));
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:42:15.377

试试下面的 GroupBy 表达式：

```
.GroupBy(m => Math.Min(m.UserId, m.UserIdTo) + ',' + Math.Max(m.UserId, m.UserIdTo)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:37:36.500

我认为这是最简单的方法：

```
var groupList = from a in (
from m in db.Messages
where m.UserId == userId || m.UserIdTo == userId
join u in db.Users on m.UserId equals u.UserId
join w in db.Users on m.UserIdTo equals w.UserId
select new 
{
 MessageId = m.MessageId,
 MessageContent = m.MessageContent,
 MessageTimestamp = m.MessageTimestamp,
 UserId = m.UserId,
 UserIdTo = m.UserIdTo,
 ScreenName = u.ScreenName,
 ScreenName2 = w.ScreenName
})
group a by new { 
    UserId = a.UserId,
     UserIdTo = a.UserIdTo
    } into grp
orderby grp.Max(a => a.MessageTimestamp) descending
select new
{
 UserId = grp.Key.UserId
 UserIdTo = grp.Key.UserIdTo,
 MessageId = grp.Max(a => a.MessageId),
 MessageContent = grp.Max(a => a.MessageContent),
 MessageTimestamp = grp.Max(a => a.MessageTimestamp),
 ScreenName = grp.Max(a => a.ScreenName),
 ScreenName2 = grp.Max(a => a.ScreenName2)
} 
```

您必须告诉它如何处理您未分组的字段。在这种情况下，我得到了每个的 MAX 值。

# facebook - 应用中心 - 移动网站未通过 oauth 代码

> ID：10917485
> 
> 赞同：1
> 
> 时间：2012-06-06T15:37:25.377
> 
> 标签：facebook, mobile, facebook-apps

我正在尝试为 App Center 设置我的应用，但在移动网站预览中遇到了问题。

对于主网站预览，Facebook 正在按预期在查询字符串中传递 code auth token 参数。我正在使用它来登录用户并显示他们在指南中要求的个性化体验。

然而，在移动网站上，Facebook 在身份验证后并未传递此参数。唯一的选择似乎是使用 Javascript SDK 自动登录用户。

我还注意到，在预览页面上，网站版本直接链接到我的网站，而移动预览链接到 m.facebook.com/apps URL，尽管它们应该设置相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T09:55:22.250

我也有这个问题，但是使用非常网站选项，因为我不使用移动选项。事实上，我从未见过直接来自应用中心的查询参数中的代码，并且我已经这样做了一段时间。

# asp.net-mvc-3 - 在混合设置中使用实体框架和 ADO 进行转换？

> ID：10917487
> 
> 赞同：0
> 
> 时间：2012-06-06T15:37:27.650
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0

我们在 ASP.NET MVC 3 中有一个应用程序，由于遗留和移植的原因，它完全使用传统的 ADO.NET 作为数据层编写。

我现在的任务是向这个网站添加一些报告，这些报告可能会导致一些极其复杂的查询。

使用 EF Power Tools 对代码优先模型进行逆向工程并将其与我们当前的 ADO.NET 模型并排使用是否有任何缺陷？这样做可以让我使用 LINQ 来查询我需要的数据，从而大大加快编写每个报告所需的时间。我需要关闭数据上下文初始化，因为我们当前的模型会这样做，但是尝试这样做是否存在任何明显的风险或问题？

如果它有任何相关性（我知道 EF 5 有很多新功能），我们正在使用 .NET 4 并且将在它启动后立即开始迁移到 .NET 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:56:57.177

我认为这是一件非常明智的事情。您还可以使用数据库优先模型，您可以在数据库更改时刷新该模型，并且不会尝试初始化数据库。

由于您将使用只读上下文，您可以通过将s的[MergeOption](http://msdn.microsoft.com/en-us/library/system.data.objects.objectquery.mergeoption.aspx)属性设置为 来优化查询过程。这减少了开销，因为上下文不会跟踪生成对象的更改。`ObjectQuery``MergeOption.NoTracking`

一个问题可能是，如果数据库发生更改，则需要进行更多维护，但我认为没有用于报告旧数据层的样板查询代码的情况远远超过了这一点。

有一天 :) 你甚至可能决定使用 EF 模型来显示用户想要在 UI 中过滤的数据，并使用旧数据层来执行 CUD 命令。（有点像 CQRS）。

# c - 在c中构建日期字符串

> ID：10917491
> 
> 赞同：4
> 
> 时间：2012-06-06T15:37:48.107
> 
> 标签：c

我目前正在从事 ac 项目，我正在尝试从系统中获取日期并将其构建为字符串。

我对 c 很陌生，所以我目前正在学习，但我无法让它发挥作用。下面是我的代码

```
time_t now = time(NULL);
struct tm *t = localtime(&now);
char currentDate[13];
char day[3];
char month[3];
char year[5];
char hour[3];
char min[3];
sprintf(day, "%02d", t->tm_mday, sizeof(day));
sprintf(month, "%02d", t->tm_mon+1, sizeof(month));
sprintf(year, "%04d", t->tm_year + 1900, sizeof(year));
sprintf(hour, "%02d", t->tm_hour, sizeof(hour));
sprintf(min, "%02d", t->tm_min, sizeof(min));
strcat(currentDate, day);
strcat(currentDate, month);
strcat(currentDate, year);
strcat(currentDate, hour);
strcat(currentDate, min);
printf("Current Date: %s", currentDate); 
```

当它执行 printf 时，它只会打印一堆垃圾，例如

> 当前日期：ÃÃÃ××ZÂ¤Ã¿Â·Ã¸ÃÃÂ©Ã´ÃÃ¿Â·^XÃÃÂ©<95>ÃºÃ¾Â·^F^FÃ^P^_

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T15:44:53.343

我会考虑使用[ctime](http://linux.die.net/man/3/ctime)和/或[strftime](http://linux.die.net/man/3/strftime)。它可能会为您提供您想要的东西，而不会过多地使用字符串和时间字段。

使用 strftime：

```
char text[100];
time_t now = time(NULL);
struct tm *t = localtime(&now);

strftime(text, sizeof(text)-1, "%d %m %Y %H:%M", t);
printf("Current Date: %s", text); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T15:40:02.720

将第一个 strcat 更改为以下内容。 `currentDate`否则不初始化。

```
strcpy(currentDate, day); 
```

但是，使用它可能更简单[`strftime`](http://linux.die.net/man/3/strftime)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:40:42.580

```
char currentDate[12] = {'\0'}; 
```

currentDate 包含随机数据并且未初始化，因此 strcat 查找终止字符串的零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T15:43:57.080

@markWilkins 的答案是正确的，但是一次打印字符串可能更容易。

```
sprintf(currentDate, "%02d%02d%04d%02d%02d", t->tm_mday, t->tm_mon+1, 
 t->tm_year + 1900, t->tm_hour,t->tm_min); 
```

这使您可以将格式视为一种格式，并且意味着您不必进行所有字符串操作。

另请注意， sprintf 不将最大大小作为参数

# php - Spry 选项卡式面板不显示动态数据

> ID：10917493
> 
> 赞同：0
> 
> 时间：2012-06-06T15:37:49.967
> 
> 标签：php, jquery, mysql, html

嗨，我正在尝试使用动态数据设置 spry 选项卡式面板，我想使用单个查询来完成这项工作，我只在“Tab 1”、“Tab 2”、“Tab 3”中得到结果不显示任何数据，我想我在重复区域中使用 while 循环三次使用相同的查询，这就是为什么会发生这种情况，我尝试使用 foreach 循环但没有帮助，这是我到目前为止的测试代码，请提出正确的方法这个。

谢谢。

我的 spry 选项卡式面板代码是这样的。

```
<div id="TabbedPanels1" class="TabbedPanels">
<ul class="TabbedPanelsTabGroup">
<li class="TabbedPanelsTab" tabindex="0">Tab 1</li>
<li class="TabbedPanelsTab" tabindex="0">Tab 2</li>
<li class="TabbedPanelsTab" tabindex="0">Tab 3</li>
</ul>
<div class="TabbedPanelsContentGroup">

<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['title'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div>

<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['id'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div>

<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['rating'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div>

</div>
</div>
<script type="text/javascript">
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
</script> 
```

而php查询是这样的。

```
$offset = ($currentpage - 1) * $rowsperpage;
$sqlquery = "SELECT * FROM $tablename ORDER BY $orderby $sortby LIMIT $rowsperpage OFFSET $offset";
$queryresult = mysql_query($sqlquery, $connection) or trigger_error("SQL", E_USER_ERROR); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:40:41.077

更简单的方法是为每个选项卡使用单独的 MySQL 查询，如下所示

```
$sqlquery1 = "SELECT id FROM table_name ORDER BY id ASC";
$queryresult1 = mysql_query($sqlquery1, $connection) or trigger_error("SQL", E_USER_ERROR);
$sqlquery2 = "SELECT title FROM table_name ORDER BY id ASC";
$queryresult2 = mysql_query($sqlquery2, $connection) or trigger_error("SQL", E_USER_ERROR);
$sqlquery3 = "SELECT rating FROM table_name ORDER BY id ASC";
$queryresult3 = mysql_query($sqlquery3, $connection) or trigger_error("SQL", E_USER_ERROR); 
```

并在选项卡式菜单中这样做。

```
<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult1)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['id'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div>

<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult2)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['title'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div>  

<div class="TabbedPanelsContent">
<?php while ($list = mysql_fetch_assoc($queryresult3)): ?>
<div class="category-main-container">
<div class="category-main-desc"> <?php echo $list['rating'];?></a>
</div><!--end of category-desc-->
</div><!--end of category-container-->
<?php endwhile;?>
</div> 
```

这应该可以解决您的问题。

# python - Matplotlib：在 3d 图中显示 imshow

> ID：10917495
> 
> 赞同：8
> 
> 时间：2012-06-06T15:37:57.327
> 
> 标签：python, 3d, plot, matplotlib

在下面的图中，取自 matplotlib 的画廊，contourf 用于在 3d 下创建一个 2d 图。我的问题是，是否可以使用 imshow 来做同样的事情？我希望二维图中的颜色更平滑。

制作二维图似乎是可能的，因为 contourf 接受 zdir 参数，而我看过而 imshow 没有。这表明这是不可能的，但为什么不呢？pcolor 也会完成工作，有可能吗？

![](../Images/828f50642649bf47b0d4e7e79667e3e4.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T18:10:43.293

只需为 contourf 指定 levels= 选项，例如

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt,numpy as np
plt.clf()
fig = plt.figure(1)
ax = fig.gca(projection='3d')
X, Y, Z = axes3d.get_test_data(0.05)
ax.plot_surface(X, Y, Z, rstride=8, cstride=8, alpha=0.3)
cset = ax.contourf(X, Y, Z, zdir='z', offset=-100,
        levels=np.linspace(-100,100,1200),cmap=plt.cm.jet)
cset = ax.contourf(X, Y, Z, zdir='x', offset=-40, cmap=plt.cm.jet)
cset = ax.contourf(X, Y, Z, zdir='y', offset=40, cmap=plt.cm.jet)
ax.set_xlabel('X')
ax.set_xlim(-40, 40)
ax.set_ylabel('Y')
ax.set_ylim(-40, 40)
ax.set_zlabel('Z')
ax.set_zlim(-100, 100)    
plt.show() 
```

![图片](../Images/27ba82ea719ee030b9954fa5b12da8da.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-12T18:10:32.947

比 sega_sai 的答案稍长一点的代码，但速度更快，而且我的经验对于更复杂的表面要好得多。

使用 plot_surface 在您想要的地方绘制一个平面，并使用 facecolors 使用您想要的值对其进行着色

您可能需要使用 scipy 的缩放使您的数据更平滑

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt,numpy as np
plt.clf()
fig = plt.figure(1)
ax = fig.gca(projection='3d')
X, Y, Z = axes3d.get_test_data(0.05)

ax.plot_surface(X, Y, Z, rstride=8, cstride=8, alpha=0.3)
cset = ax.contourf(X, Y, Z, zdir='x', offset=-40, cmap=plt.cm.jet)
cset = ax.contourf(X, Y, Z, zdir='y', offset=40, cmap=plt.cm.jet)

### strating here:

# normalize Z to [0..1]
Z=Z-Z.min()
Z=Z/Z.max()

#use zoom to make your data smoother
from scipy.ndimage.interpolation import zoom

#make data 5 times smoother
X=zoom(X,5)
Y=zoom(Y,5)
Z=zoom(Z,5)

#draw a surface at -100, using the facecolors command to color it with the values of Z
cset = ax.plot_surface(X, Y, np.zeros_like(Z)-100,facecolors=plt.cm.jet(Z),shade=False)

ax.set_xlabel('X')
ax.set_xlim(-40, 40)
ax.set_ylabel('Y')
ax.set_ylim(-40, 40)
ax.set_zlabel('Z')
ax.set_zlim(-100, 100)    
plt.show() 
```

![准备好的图像](../Images/c52afae61371ac43ba24f8a82a5e8036.png)

这也使得创建彩条变得更加困难，以便：

```
cb = plt.cm.ScalarMappable(cmap=plt.cm.jet)
cb.set_array(Z)
plt.colorbar(cb)
plt.show() 
```

# ruby-on-rails-3 - Formtastic / ActiveAdmin多选多对多复选框关联问题

> ID：10917496
> 
> 赞同：5
> 
> 时间：2012-06-06T15:38:01.637
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic

我正在使用activeadmin，它内置了许多使用它的人都知道的formtastic。我有一个名为 Project 的模型，它与 ProjectResources 具有多对多关联。

我在 Project 的活动管理员中的自定义“编辑”和“创建”表单看起来像这样。

```
form do |f|
          f.inputs "Project" do
            f.input :name, :input_html => { :readonly => true }
          end
          f.inputs "Resources" do
            f.input :id, :label => "Selected Resources",  
                :as => :check_boxes, 
                :multiple => true, 
                :collection => ProjectResource.all,
                :selected => @resources
          end
          f.buttons
    end 
```

我的复选框呈现得很好，此时我没有收到任何错误。如果您可能已经猜到，问题是在呈现“编辑”页面时，如果项目已经有一个 ProjectResource 作为关联，我想将复选框区域中的项目显示为“已选择”。

现在复选框都显示取消选中状态。我正在使用最新版本的 activeadmin 并且 formtastic 安装了以下版本。（2.2.0、2.1.1、2.1.0、2.0.2、1.2.4）

不确定此时 activeadmin 使用什么版本。我的猜测是最新版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T12:48:24.470

对我来说，很简单：

```
ActiveAdmin.register Subscription do

  form do |f|
    f.inputs do
      f.input :users, as: :check_boxes
      # other fields...
    end
    f.buttons
  end
end 
```

只是工作。

更多代码：

-用户类

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :users
  attr_accessible :fields...
end 
```

-订阅类

```
class Subscription < ActiveRecord::Base
  has_and_belongs_to_many :subscriptions
  attr_accessible :fields...
end 
```

PS 我正在使用 ActiveAdmin 0.4.2 和 Formtastic 2.0.2。

# sql-server - Yii 在具有 char 主键和点的现有数据库上

> ID：10917502
> 
> 赞同：0
> 
> 时间：2012-06-06T15:38:25.087
> 
> 标签：sql-server, yii

我正在使用 Yii 开发一个应用程序来与现有的 SQL-Server 数据库进行交互。我无法对数据库进行更改，因为还有其他应用程序依赖于它。

有几个表具有 char 类型的主键，并且一些字符串包含点。

生成模型和 CRUD 后，我意识到如果密钥包含点，我将无法打开项目。

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:18:21.483

我通过评论解决了这个问题

```
 /*'<controller:\w+>/<id:\d+>'=>'<controller>/view',
'<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:20:43.230

经过一些审查后，我对 urlManager 的默认规则进行了一些更改。

现在我正在使用以下内容：

```
'<controller:\w+>' => '<controller>/index',
'<controller:\w+>/<action:\w+>' => '<controller>/<action>', 
```

这样，它接受像[http://example.com/myController/myAction?id=ident¶m1=value¶m2=value](http://example.com/myController/myAction?id=ident&param1=value&param2=value)或[http://example.com/myController这样的网址](http://example.com/myController)

为了保持干净，我还将它添加到 urlManager：

```
'showScriptName'=>false, 
```

# c# - 我们可以缩短 s1.Equals(s2, StringComparison.InvariantCultureIgnoreCase) 吗？

> ID：10917507
> 
> 赞同：2
> 
> 时间：2012-06-06T15:38:44.460
> 
> 标签：c#, string, comparison, equals

当我不区分大小写地比较两个字符串时，我使用：

```
if (s1.Equals(s2, StringComparison.InvariantCultureIgnoreCase)) ... 
```

我想在我的代码中缩短这个语句，因为`String.Comparison.InvariantCultureIgnoreCase`它非常冗长，特别是如果你必须进行多重比较。

有没有办法给它起别名，以便在整个 MVC 项目中拾取它？（我也有外部类，我也必须添加这个别名）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:44:40.183

您可以使相等比较器成为私有静态变量，并在您的方法中使用该变量：

在您的班级声明中：

```
private static readonly IEqualityComparer<string> EqIgnoreCase =
    StringComparer.InvariantCultureIgnoreCase; 
```

在你的方法中：

```
if (EqIgnoreCase.Equals(s1, s2)) {
    // ...
} 
```

这种方法的一个优点是它看起来是对称的。另一个是它不会抛出 if`s1`或`s2`is `null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:40:11.677

你可以为它写一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

```
namespace ExtensionMethods
{
  public static class MyExtensions
  {
    public static bool MyEqual(this String s1, string s2)
    {
        return s1.Equals(s2, StringComparison.InvariantCultureIgnoreCase);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:41:04.663

为什么不编写一个扩展方法来进行这种不带大小写的比较呢？

```
public static bool EqualsIgnoreCase(this string s1, string s2)
{
    return s1.Equals(s2, StringComparison.InvariantCultureIgnoreCase);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T15:42:17.913

一种简单的扩展方法。

```
public static bool EqualsCaseLess(this string s1, string value)
{
  return s1.Equals(value, StringComparison.InvariantCultureIgnoreCase);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T15:40:59.460

扩展方法：

```
public static CiEquals(this string s1, string s2)
{
    return s1.Equals(s2, StringComparison.InvariantCultureIgnoreCase);
} 
```

# php - 使用输入类型文件和 PHP 循环的多个文件上传（没有 jQuery 或 Javascript）

> ID：10917511
> 
> 赞同：-2
> 
> 时间：2012-06-06T15:38:58.390
> 
> 标签：php, html, web

我想一次选择更多图像文件并上传为 1,2,3,4,... 喜欢：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    <input type="file" name="imgs[]" id="imgs" multiple/> 
    <input type="submit" name="submit" value="Submit" />
</form> 
```

PHP代码：

```
<?php

if (file_exists("upload/" . $_FILES["imgs"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";

      }
    else
      {

//I think loop goes here 
===================
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
===================

      }
?> 
```

==================================================== =================

这是作品...

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    <input type="file" name="uploads[]" multiple>
    <input type="submit" name="submit" value="Submit" />
</form> 
```

PHP

```
<?php
$count=1;
foreach ($_FILES['uploads']['tmp_name'] as $file) {
  echo '<li>' . $file . '</li>';

  copy($file, "uploads/" . $count.".jpg");
      echo "Stored in: " . "uploads/" . $count.".jpg";
    $count++;
}
?> 
```

这是作品....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:49:19.353

****用这个替换你的 php 代码：****

 **```
<?php
for($i=0;$i<count($_FILES["imgs"]["name"]);$i++) 
{
if (file_exists("upload/" . $_FILES["imgs"]["name"][$i]))
      {
      echo $_FILES["imgs"]["name"][$i] . " already exists. ";
      }
    else
      {

//I think loop goes here 
===================
      move_uploaded_file($_FILES["imgs"]["tmp_name"][$i],
      "upload/" . $_FILES["imgs"]["name"][$i]);
      echo "Stored in: " . "upload/" . $_FILES["imgs"]["name"][$i];
===================

      }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:43:40.487

`$_FILES`当您有多个上传时，PHP 以一种奇怪（但一致）的方式构建数组。尝试使用三个文件输入创建此表单：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    <input type="file" name="imgs[]" id="imgs" multiple /> 
    <input type="submit" name="submit" value="Submit" />
</form> 
```

然后在接收表单的 PHP 代码中，仅放置：

```
<?php print_r($_FILES); ?> 
```

所以你可以看到`$_FILES`数组结构。在这一点上，您将清楚一切，您将了解如何循环保存所有上传的图像。祝你好运 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T21:44:59.963

我已经测试了这段代码，它可以工作，一旦我解决了我就忘了回答它。

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
 <input type="file" name="uploads[]" multiple>
 <input type="submit" name="submit" value="Submit" />
</form> 
```

在 PHP 文件中获取数据，如下所示。

```
<?php
 $count=1;
 foreach ($_FILES['uploads']['tmp_name'] as $file) {
   echo '<li>' . $file . '</li>';

   copy($file, "uploads/" . $count.".jpg");
   echo "Stored in: " . "uploads/" . $count.".jpg";
   $count++;
 }
?> 
```**

# html - 加载时间思考 - 图像和域

> ID：10917513
> 
> 赞同：1
> 
> 时间：2012-06-06T15:39:07.223
> 
> 标签：html, image, download, load-time

所以我正在为我的网站上添加图片链接，我遇到了一些有趣的事情。

我链接到的所有图像都位于另一个域中，但该域恰好与我正在处理的站点位于同一服务器上。现在通常我会从另一个域下载图像并将它们放在我网站的目录结构中，以避免必须连接到另一台服务器，从而在页面加载时抓取图像时节省加载时间。但是在这种情况下，由于两个文件结构位于同一服务器上，我想知道在页面加载时下载图像的时间是否与绝对链接到“兄弟”域与将图像存储在我的网站上几乎相同本身。

有人知道是不是这样吗？？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:51:31.580

我认为这是您的想法误入歧途的地方：

> 现在通常我会从另一个域下载图像并将它们放在我网站的目录结构中，以避免必须连接到另一台服务器，从而在页面加载时抓取图像时节省加载时间。

这不是真的。将所有图像放在同一台服务器上并不会节省加载时间。浏览器是发出图像请求的客户端。浏览器向其发出请求的服务器无关紧要。

# c# - 时间：2019-04-10 标签：c#wpf layout reusability

> ID：10917517
> 
> 赞同：1
> 
> 时间：2012-06-06T15:39:17.657
> 
> 标签：c#, wpf, layout, code-reuse, reusability

我正在尝试使窗口布局可从不同的窗口使用。 ![在此处输入图像描述](../Images/2abe2ebb513d59db313152bf4f7a6613.png)

从图片中可以看出，我在窗口底部有一个徽标、一个左侧垂直进度条和两个控制按钮（加上菜单栏和状态栏）。

这些部分在不同的窗口中应该始终相同，并且播放/停止应该在运行时与公共部分进行交互，但也应该与窗口中间的部分进行交互（“每个窗口中的部分不同”）。

我不明白我应该使用什么来创建可从我需要的每个窗口调用的标准布局，以某种方式制作，我可以将这些窗口中的每一个替换为中间部分。

有小费吗？我可能只需要了解要走的路（很遗憾成为 c# wpf 新手）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:46:11.790

您可以使用内容控件，然后只需切换内容

[区域的母版页](https://stackoverflow.com/questions/8728807/master-page-but-for-regions)

这个链接有你需要的。如果要进行大量内容切换，可以将页面模板放在单独的文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:56:02.843

如果您创建一个用户控件，`<ContentPresenter>`其中包含您希望变量内容所在的位置，您可以将自己的控件注入到用户控件中。

用户控件如下所示：

```
<UserControl>
  <Grid>
    <!-- Header Stuff -->

    <ContentPresenter Name="MyContentPresenter" />

    <!-- Footer Stuff -->
  </Grid>
</UserControl> 
```

在您的窗口中，您将拥有：

```
<Window>
  <Grid>
    <MyUserControl>
      <MyUserControl.Content>
        <!-- your window specific code here -->
      </MyUserControl.Content>
    </MyUserControl>
  </Grid>
</Window> 
```

您需要在用户控件上公开一个名为 Content 的属性，该属性返回/设置用户控件上 ContentPresenter 元素的 Content 属性。

在用户控件的代码隐藏中：

```
public object Content
{ 
  get { return MyContentPresenter.Content; } 
  set { MyContentPresenter.Content = value; } 
} 
```

# bazaar - bzr 忽略 Linux 下的所有可执行文件

> ID：10917519
> 
> 赞同：1
> 
> 时间：2012-06-06T15:39:41.777
> 
> 标签：bazaar

有没有办法让 bazaar 忽略 Linux 下的所有可执行文件？它们没有特定的扩展名，因此我无法使用正则表达式来完成此操作。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:48:49.837

如果您的所有可执行文件都在某个目录下，您可以忽略目录内容（例如。`bzr ignore "mybindir/*"`）。我意识到这并不完全是您想要的，但除了 bialix 的解决方法之外，我认为目前没有更好的答案。将来可能会在文件中添加一个关键字 like`EXECUTABLE:`来`.bzrignore`指示您需要什么。更好的是能够将它们链接起来，例如。`EXECUTABLE:RE:someprefix.+`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:18:09.643

根据`bzr ignore -h`没有模式选择可执行文件。

但是您可以一一忽略它们。

```
find . -type f -perm /111 -print0 | xargs -0 bzr ignore 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:47:03.170

您可以使用以下正则表达式忽略所有*没有*`RE:\.?[^.]+`扩展名的文件：但它也会忽略所有没有“扩展名”的目录和符号链接，即点之后的任何内容。

有时它是不可取的，所以如果你没有很多可执行文件，你最好按名称忽略它们。

# c# - 如何从 Twitter 获取每日趋势？

> ID：10917523
> 
> 赞同：1
> 
> 时间：2012-06-06T15:39:50.587
> 
> 标签：c#, json, twitter, trend

我想问是否有人知道如何提取“名称”和“查询”并将其存储在数组列表中。

源文件：[https ://api.twitter.com/1/trends/daily.json](https://api.twitter.com/1/trends/daily.json)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:48:28.643

您可以使用[JObject](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Linq_JObject.htm)，例如：-

```
 string response = requestData("https://api.twitter.com/1/trends/daily.json");
 JObject jsonResponse = new JObject();
 var name = string.Empty;
 var query = string.Empty;
 try
 {
       jsonResponse = JObject.Parse(response);
       name = (string)jsonResponse["name"];
       query = (string)jsonRespone["query"];
 }
 catch
 {
       return "";
 }

public string requestData(string url)
{
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();

    StreamReader sr = new StreamReader(resp.GetResponseStream());
    string results = sr.ReadToEnd();
    sr.Close();

    return results;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:44:10.870

基于这个问题：[Parse JSON in C#](https://stackoverflow.com/questions/1212344/parse-json-in-c-sharp)

创建一个代表您要提取的 JSON 的类，并使用`JSONHelper`链接问题中的类中的代码从 JSON 中提取类：

```
public class JSONHelper
{
    public static T Deserialise<T>(string json)
    {
        T obj = Activator.CreateInstance<T>();
        MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
        DataContractJsonSerializer serialiser = new DataContractJsonSerializer(obj.GetType());
        ms.Close();
        return obj;
    }
} 
```

# http - 每个 HTTP 请求都使用一个单独的 TCP 连接

> ID：10917527
> 
> 赞同：7
> 
> 时间：2012-06-06T15:40:00.697
> 
> 标签：http, tcp, jboss, persistent

**观察：**

*   我的网络应用程序在 JBoss 中运行。

*   由于图像等原因，每次用户单击都会生成 >5 个 HTTP 请求。

*   在服务器上运行 netstat 表明正在为每个 HTTP 请求打开一个新的 TCP 连接（基本上我正在查看端口 80 上来自客户端 IP 的 TCP 连接总数）。

**事实：**

*   JBoss HTTP 协议设置为 1.1。

*   我检查过 FF、IE9 和 Chrome——所有浏览器都这样做。

*   我有两个测试环境——一个在 Windows7 上运行，另一个在 CentOS 上运行。我在两者中都看到了相同的行为。

**我想要完成的事情**

*   持久的 TCP 连接，因为希望这会 a) 增强用户体验 b) 减少服务器上的负载

在这一点上，我不确定我应该将哪些代码、配置详细信息或日志附加到问题中，但如果你让我知道，我会提供。任何形式的帮助表示赞赏。

ps 从标题[TCP connection is not reused for HTTP requests with HttpURLConnection](https://stackoverflow.com/questions/5459162/tcp-connection-is-not-reused-for-http-requests-with-httpurlconnection)看来，这个线程看起来很有希望，但它主要处理客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:06:57.237

我想我已经找到了解决方案。感谢您的指点和建议。他们真的有帮助。

第 1 部分：我使用 Firefox 中的 HttpFox 插件查看响应标头。Philippe 怀疑 Connection 标头的值为“close”。

第 2 部分：在我自己的过滤器中添加一行代码来更改响应标头没有帮助。所以我下载并添加了 jbossWebService.jar 到 WEB-INF/lib 目录，以便使用 org.jboss.web.tomcat.filters.ReplyHeaderFilter 类。（在 JBoss 7 之前，显然这个包默认包含在 JBoss 中。）在我的 web.xml 中添加了以下内容：

```
<filter>

<filter-name>CommonHeadersFilter</filter-name>

<filter-class>

org.jboss.web.tomcat.filters.ReplyHeaderFilter</filter-class>

<init-param>

     <param-name>Connection</param-name>

     <param-value>keep-alive</param-value>

</init-param>

</filter> 
```

这成功了（嗯，几乎）。现在，浏览器的第一次“点击”会产生大约 4 个 TCP 连接——不确定这个数字的原因，因为每次点击都会产生 >=7 个 http 请求。但是，如果在 ttl 周期（15 秒）内执行所有后续点击，则不会生成额外的 TCP 连接。我想按照菲利普的建议，进行更彻底的调查会揭示一些东西。但在这一点上，我必须继续前进。因此，我暂时将这个问题标记为已回答。如果将来需要，我会重新打开它。

# r - 内存分配“错误：无法分配大小为 75.1 Mb 的向量”

> ID：10917532
> 
> 赞同：42
> 
> 时间：2012-06-06T15:40:12.487
> 
> 标签：r, memory-management

在矢量化一些模拟代码的过程中，我遇到了内存问题。我在 Windows XP 下使用 32 位 R 版本 2.15.0（通过 RStudio 版本 0.96.122）。我的机器有 3.46 GB 的 RAM。

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Matrix_1.0-6   lattice_0.20-6 MASS_7.3-18   

loaded via a namespace (and not attached):
[1] grid_2.15.0  tools_2.15.0 
```

这是该问题的一个最小示例：

```
> memory.limit(3000)
[1] 3000
> rm(list = ls())
> gc()
          used (Mb) gc trigger  (Mb)  max used   (Mb)
Ncells 1069761 28.6    1710298  45.7   1710298   45.7
Vcells  901466  6.9   21692001 165.5 173386187 1322.9
> N <- 894993
> library(MASS)
> sims <- mvrnorm(n = N, mu = rep(0, 11), Sigma = diag(nrow = 11))
> sims <- mvrnorm(n = N + 1, mu = rep(0, 11), Sigma = diag(nrow = 11))
Error: cannot allocate vector of size 75.1 Mb 
```

（在我的应用程序中，协方差矩阵 Sigma 不是对角线，但无论哪种方式我都会得到相同的错误。）

我花了一个下午阅读 R 中的内存分配问题（包括[这里](https://stackoverflow.com/questions/5171593/r-memory-management-cannot-allocate-vector-of-size-n-mb)、[这里](https://stackoverflow.com/questions/6198531/r-ggplot2-cannot-allocate-vector-of-size-128-0-mb)和[这里](https://stackoverflow.com/questions/8920722/cannot-allocate-vector-in-r-despite-being-in-64-bit-version)）。根据我的阅读，我得到的印象不是可用 RAM 本身的问题，而是可用的连续地址空间的问题。不过，75.1Mb 对我来说似乎很小。

如果您有任何想法或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2017-05-18T08:51:59.337

我使用 raster 包也有同样的警告。

```
> my_mask[my_mask[] != 1] <- NA
Error: cannot allocate vector of size 5.4 Gb 
```

解决方案非常简单，包括增加 R 的存储容量，这里的代码行：

```
##To know the current storage capacity
> memory.limit()
[1] 8103
## To increase the storage capacity
> memory.limit(size=56000)
[1] 56000    
## I did this to increase my storage capacity to 7GB 
```

希望这将帮助您解决问题 干杯

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-06T15:50:48.853

R 已经到了操作系统无法再分配**75.1Mb**内存的地步。那就是执行下一个子操作所需的内存块大小。它不是关于完成整个过程所需的连续 RAM 数量的声明。至此，所有可用 RAM 都已用尽，但您需要更多内存才能继续，并且操作系统无法为 R 提供更多 RAM。

对此的潜在解决方案是多方面的。显而易见的是获得一台具有更多 RAM 的 64 位机器。我忘记了细节，但是在 32 位 Windows 上的 IIRC，任何单个进程都只能使用有限数量的 RAM（2GB？），并且不管 Windows 会为自己保留一大块内存，所以 R 可用的 RAM 会比您拥有的 3.4Gb。在 64 位 Windows R 将能够使用更多 RAM，并且您可以安装/安装的最大 RAM 量将增加。

如果这不可能，则考虑另一种方法；也许您的模拟分批进行，每批的 n 远小于`N`. 这样你就可以绘制更少的模拟，做任何你想做的事情，收集结果，然后重复这个过程，直到你完成了足够的模拟。您没有显示是什么`N`，但我怀疑它很大，因此请尝试较小`N`的次数以`N`全面了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-15T12:12:30.620

`gc()`能够帮助

将数据保存为 .RData、关闭、重新打开 R 并加载 RData 会有所帮助。

在这里查看我的答案：[https](https://stackoverflow.com/a/24754706/190791) ://stackoverflow.com/a/24754706/190791了解更多详情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-07T16:28:25.527

无论您使用 N 值，R 都会停止吗？尝试使用较小的值并查看问题是否是 mvrnorm 函数，或者您可以简单地在子集上循环它。在循环中插入`gc()`函数以连续释放一些 RAM

# jquery - $.when 对单个 $.Deferred 有什么作用？

> ID：10917533
> 
> 赞同：8
> 
> 时间：2012-06-06T15:40:15.497
> 
> 标签：jquery, jquery-deferred

我试图理解`$.when`，我可以看到，当您想在继续之前等待多个延迟时，它会很有用。但是，我不确定我是否理解`$.when`与延迟一起使用的用例。为了显示：

```
var deferred = $.Deferred();

// Is this ever useful?
$.when(deferred).then(...)

// Or can I always do this?
deferred.then(...) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:42:40.680

来自[`$.when` *^([docs])*](http://api.jquery.com/jQuery.when/)文档：

> 如果将单个 Deferred 传递给`jQuery.when`，则该方法将返回其 Promise 对象（Deferred 方法的子集）。

所以`$.when(deferred).then(...)`是一样的`deferred.promise().then(...)`。

承诺对象只是延迟对象的有限接口。它允许添加回调，但不能更改 Deferred 的状态（解决，拒绝它）。

所以结论是，直接在延迟对象上使用`$.when`和调用基本上没有区别。`.then`

我认为将单个延迟对象*显式*传递给是没有意义的`$.when`，因为您没有任何优势。但是，在某些情况下，您有*未知*数量的延迟对象，这意味着它也可能只有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:42:13.837

你总是可以做的`.then`，`.then`无非是当你需要同时使用`.done`和`.fail`

# android - 自定义对话框和生成器对话框有不同的主题

> ID：10917534
> 
> 赞同：2
> 
> 时间：2012-06-06T15:40:18.180
> 
> 标签：android, user-interface, android-dialog, android-theme

对于我的大多数 Android 应用程序的对话框，我使用 Builder 的内置方法，例如 setSingleChoiceItems，但我需要 2-3 个对话框，它们是使用我自己的视图的自定义 AlertDialogs。

自定义对话框看起来与现成的（文本大小、背景等）非常不同。

如何使我的自定义对话框看起来像 Builder 的？我没有为任何对话框指定任何主题。

我使用带有 setSingleChoiceItems(...) 方法的 AlertDialog.Builder 创建了这个。

![使用 AlertDialog.Builder 创建](../Images/2a8af8c0ae8ded1cd0da1ef1c4d97ed7.png)

这个是使用 builder.setView(layout) 创建的。

![使用视图创建](../Images/47f2b902910650dea86c3cac841c5acf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:05:45.717

试试这个

在对话框中设置自定义主题以设置背景并且没有对话框标题，如下所示

```
<style name="ActivityDialog" parent="@android:style/Theme.Dialog">      
    <item name="android:windowBackground">@drawable/dialog_background_image</item>
    <item name="android:windowNoTitle">true</item>      
    </style> 
```

并制作 UI 布局

```
protected void createDialog() {
         // TODO Auto-generated method stub

             dialog = new Dialog(this,R.style.ActivityDialog);//this take context and style parameter

             dialog.setContentView(R.layout.dialogUI); // here load coustom UI layout 

             Button okbtn = (Button)dialog.findViewById(R.id.button1);
             Button cancelbtn = (Button)dialog.findViewById(R.id.rep_cancel_Button);
             okbtn .setOnClickListener(okClickListener);
             cancelbtn .setOnClickListener(cancelClickListener);

             dialog.show();

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:48:27.333

您可以将自定义视图与**setView**一起使用，但我建议使用 DialogFragment，在 DialogFragment 中您可以使用任何**View**并且只使用 View 事件处理程序，例如 onClickListener 等。

# javascript - 有没有办法在数组项值发生更改时获取回调？

> ID：10917536
> 
> 赞同：5
> 
> 时间：2012-06-06T15:40:23.750
> 
> 标签：javascript, cross-browser, dom-events

**这可能看起来很傻，但是在这个时代，如果数组的内容发生了变化**，人们应该能够期望 JS 引发一个事件。

**关于在变量**更改时获得通知的几个问题（定义 getter 或 setter）。似乎[有办法做到这一点](http://johndyer.name/native-browser-get-set-properties-in-javascript/)（至少对于大多数浏览器，包括 IE6+）

我的问题是，如果数组中的项目发生更改，我会尝试收到通知：

```
 var ar = ["one", "two", "three"];
    // setting the whole array will call the custom setter method
    // (assuming you defined it)

    ar = ["one", "three", "five"];

    // however, this will only call the getter method and won't call the setter
    // without defining custom setters for every item in the array.  

    ar[1] = "two"; 
```

显然，我试图避免强迫编码人员使用老式的 Java 风格`.getVale()`和`.setValue()`函数来访问/修改数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:22:34.327

简而言之：不，你不能。您会注意到[数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)不提供任何事件分派机制，并且它们的 API 不包含任何回调类型的功能。

更长的时间：正如其他人所指出的，可以包装数组......而且还可以轮询数组内容：

```
function watchArray(arr, callback) {
    var oldVal = "" + arr;
    setInterval(function() {
        var curVal = "" + arr;
        if (curVal != oldVal) {
            callback();
            oldVal = curVal;
        }
    }, 100);
} 
```

但是这种方法有一些明显的问题：它会轮询，观察一堆数组会变慢等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:03:29.013

好的，根据@David Wolever 的代码和其他评论，实际上有一个解决方案：

使用[John Dyer](http://johndyer.name/native-browser-get-set-properties-in-javascript/)的注释来实现 addProperty 方法。在 getter 方法中放置一个 setTimeout 以在读取发生后不久与原始值进行比较：

```
addProperty(myObject, 'vals',
    function () {
        var _oldVal = "" + this._val;
        var _parent = this;
        console.log('getter!');
        setTimeout(function () {
            var curVal = "" + _parent._val;
            if (curVal != _oldVal)
                console.log('array changed!');
        }, 200);
        return this._val;
    },
    function (value) {
        console.log('setter!');
        this._val = value;
    });

    myObject.vals = ["one", "two", "three"];
    myObject.vals[1] = "five"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T12:04:48.777

我认为`timeout`基于解决方案不是最好的。
如果你只能使用 push 和 pop 来修改你的数组，你可以覆盖原型的`push`和`pop`方法`Array`（或者只是你想要监控的一些对象）：

```
var myWatchableArr = [];
myWatchableArr.setChangeCallback = function(callback){
    this.changeCallback = callback;
}
myWatchableArr.push = function(e){
    Array.prototype.push.call(this,e);
    if(typeof this.changeCallback == "function")
      this.changeCallback(this);
}
myWatchableArr.push(3);
myWatchableArr.setChangeCallback(function(arr){
    console.log("the array has been changed", arr);
});
// now watching for changes
myWatchableArr.push(4); 
```

如果 push 和 pop 不够用，你可以添加一些`setAt`方法来使用 like`myWatchableArr.setAt(3, value)`而不是`myWatchableArr[3]=value`.

# c# - C# 异常处理范围

> ID：10917543
> 
> 赞同：3
> 
> 时间：2012-06-06T15:41:00.740
> 
> 标签：c#, .net, exception, handler

C#中异常处理的范围是什么。我目前正在审查我团队中另一位程序员的一些代码，他的功能布局有点像这样：

```
private void function1() {
try {
function2();
}
catch (Exception ex) {
EmailException(ex.message());
}}

private void function2() {
try {
// Do stuff
}
catch (Exception ex) {
// Handle it here
}} 
```

大部分处理代码在function2中。但是他的报告处理在function1中。function2 中的异常会返回到发送报告的 function1 处理程序吗？

编辑： **感谢您的回复，他们都非常有帮助！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:44:02.920

假设`// Handle it here`不重新抛出异常，`function1`将永远不会看到原始异常。

不过，它可能`function2`会引发一个*新*问题`catch`，就像它可能`EmailException`会在`function1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T15:44:12.043

除非

a)`function2`重新抛出原始异常`throw`或新异常`throw new ...`

b) 在 的 catch 块内或之后发生意外异常`function2`（在这种情况下实际上是不可能的，因为该`catch`块是在 中发生的最后一件事`function2`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:43:48.577

不，异常*只会*在被捕获之前传播。

`catch`但是，您可以在in末尾重新抛出异常`function2`，从而导致所需的行为：

```
private void function2() {
    try {
        // Do stuff
    }
    catch (Exception ex) {
        // Handle it here
        throw;    // <- Re-throw the exception.
                  // Note this is different from `throw ex;`
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T15:44:27.407

> function2 中的异常会返回到发送报告的 function1 处理程序吗？

没有，除非

*   在 function2 的 try 块之外发生异常
*   在function2异常块内发生异常
*   抛出异常，例如`trow`或`trow ex`从 function2 的异常块
*   在 function2 的 try 块中引发了一个异常，该异常会自动追溯，如`ThreadAbortException`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T17:26:14.487

在.net中，当异常发生时，系统会搜索`try`堆栈中的嵌套块，以确定是否有`catch`可以捕获异常的块。这发生在任何`finally`块运行之前。如果没有任何块可以捕获异常，系统将调用“未处理的异常”处理程序而不运行任何`finally`块。

如果系统确实确定有一个可以捕获异常的块，它将开始展开堆栈并运行`finally`与内部块关联的`try`块，直到它已经将堆栈一直展开到`catch`它找到的块，或者异常发生在执行`finally`块时抛出。在后一种情况下，前面的异常将被放弃，不再进一步处理；异常处理将从新抛出的异常重新开始。

尽管想要*捕获*异常与仅仅想要对其采取行动（但让它被视为未捕获）之间存在语义差异，但在 C# 中没有明确的方式来表达这种区别。捕获异常的代码有望解决它。在 C# 中可以做的最好的事情是使用 a `catch`（表示系统的异常处理逻辑认为有人会捕获异常），然后使用 a `throw`，表示毕竟不想解决它（这会发生在内部“终于”块运行后）。在其他一些语言（例如 vb.net）中，可以在`finally`块运行之前对异常采取行动，而无需捕获它们。虽然没有大量的情况是 a`catch`和`throw`与在没有 ing 的情况下捕获异常不同`catch`，很少有区别很重要的情况。如果一个人正在使用 C# 并且希望避免对可能希望在终结器块运行之前从内部代码中捕获异常的周围代码产生敌意，那么最好的方法可能是编写一个用 vb 编写的异常处理包装器方法（或者让其他人做它），将其编译为 DLL，然后使用 lambdas 提供这样的函数方法，以便它在合适的 try/filter/catch/finally 块中调用。

# php - 重复使用关键字进行搜索

> ID：10917547
> 
> 赞同：0
> 
> 时间：2012-06-06T15:41:11.857
> 
> 标签：php, mysql

我必须创建一个搜索功能，用户搜索附加到不同文章的标签，例如：PC、健康、时尚服装……等。我当前的表格是这样的：

```
Tag_id  | Tag            | Article_id
-----------------------------------
1       | scary          |   2
-----------------------------------
2       | daunting       |   2
-----------------------------------
3       | chilling       |   2
-----------------------------------
4       | creepy         |   2
-----------------------------------
5       | scary          |   5
-----------------------------------
6       | daunting       |   5
-----------------------------------
7       | chilling       |   5
-----------------------------------
8       | creepy         |   5 
```

如您所见，每个标签都有同义词，必须在每篇共享相同标签的文章中重复。我的问题是：什么表结构允许标签被重用（没有重复的标签），同时搜索不友好。（不能使用正常的词库，因为标签是短语和俚语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:44:02.890

你想要三个表：

```
ARTICLE
id   (a primary uid)
link (links to the article)

TAG
id   (a primary uid)
name (ie 'chilling')

ARTICLETAG
article (a foreign key: a uid that exists in ARTICLE)
tag     (a foreign key: a uid that exists in TAG) 
```

每次您想要标记一篇文章时，您都会在`ARTICLETAG`一个新行中插入您想要标记的文章和您想要标记它的标签的 ID。根据需要添加到新文章`TAG`和标签。`ARTICLE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:49:20.943

**文章表**

> -id -- UNIQUE（是否自动递增，由您决定）
> 
> -更多属性...

**标签表**

> -id -- UNIQUE（是否自动递增，由您决定）
> 
> -标签

关系表 **ARTICLE_TAG TABLE**

> -article_id
> 
> -tag_id

您可以将尽可能多的标签与您想要的文章相关联

# c# - 如何从 c# web 服务调用 c++ Oppencv 项目？

> ID：10917549
> 
> 赞同：1
> 
> 时间：2012-06-06T15:41:15.123
> 
> 标签：c#, c++, web-services, dll, opencv

我已经将图像识别算法实现为 OpenCV c++ 项目，并且我有 C# web 服务。我想从我的 c# web 服务调用我的 c++ Opencv 项目。这就是我的项目应该如何工作。从移动设备将图像发送到 c# web 服务。然后我需要调用 Opencv c++ 项目以进行图像识别。我尝试通过使用 DLL 来做到这一点。如果您认为使用 DLL 是最好的方法，请告诉我如何将我的 Opencv c++ projetc 转换为 DLL 或者是否有任何其他方法。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:51:25.680

我认为您应该使用 PInvoke 来完成您的工作。没用过，但据我所知，这是这样做的：

[http://msdn.microsoft.com/en-us/library/aa446536.aspx](http://msdn.microsoft.com/en-us/library/aa446536.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:20:27.453

您需要创建一个 C++ DLL 项目，您将在其中编写项目的图像识别部分。您可以查看本教程，了解如何使用 Visual Studio 创建 C++ DLL 项目：[演练：创建和使用动态链接库](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.80%29.aspx)

您应该在该 DLL 文件中创建一个类，并且您将能够使用该类来处理图像。通过使用 PInvoke，您将能够在 C# 项目中使用该类。这是一个关于如何在 C# 项目中使用 DLL 中的 C++ 类的精彩教程：[如何编组 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)。我在许多项目中使用该文章中的解决方案 A 从 C# 调用 C++ 代码。

为了将现有的 C++ 项目转换为 DLL，您可以更改其输出类型。转到 Project->Properties，在该窗口中，您需要转到 Configuration Properties->General，然后将 Configuration type 更改为 Dynamic Library (.dll)，如下图所示：![项目属性 DLL](../Images/239514b2dbd36d832da59661e3e700bf.png)

之后，您需要公开要从 dll 导出的类或函数。我强烈建议您开始一个新的 dll 项目（按照第一个链接）并从那里开始工作，因为 AppWizard 会为您创建一些代码并且它会更容易。

# xml - 在 XML 中添加新的换行符/换行符

> ID：10917555
> 
> 赞同：88
> 
> 时间：2012-06-06T15:41:57.170
> 
> 标签：xml

我一直在尝试在 XML 中的代码中添加新行/换行符，但没有成功。

到目前为止我已经尝试过：

```
&lt;br /&gt;
&lt;br&gt; 
&#xA; 
```

这是我正在使用的代码示例。我包括“ `&#xA;`”以显示中断在代码中的位置。

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="dummy.xsl"?>
  <item>
     <summary>Tootsie roll tiramisu macaroon wafer carrot cake.       
               &#xA; Danish topping sugar plum tart bonbon caramels cake.
     </summary>
  </item> 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-06T16:24:38.363

新行 XML

使用 XML

1.  *回车*：`&#xD;`
2.  *换行*：`&#xA;`

或尝试像@dj_segfault 提出的（见他的回答）与 CDATA 一样；

```
 <![CDATA[Tootsie roll tiramisu macaroon wafer carrot cake.                       
            Danish topping sugar plum tart bonbon caramels cake.]]> 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-07-31T12:09:32.437

这个问题的解决方案是：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="dummy.xsl"?>
  <item>
     <summary>
        <![CDATA[Tootsie roll tiramisu macaroon wafer carrot cake. <br />      
                 Danish topping sugar plum tart bonbon caramels cake.]]>
     </summary>
  </item> 
```

通过在 `<br />`里面添加`<![CDATA]]>`this 可以让行中断，从而创建一个新行！

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-06-06T22:46:49.647

您不需要任何花哨的东西：以下包含一个新行（实际上是两个）：

```
<summary>Tootsie roll tiramisu macaroon wafer carrot cake.       
         Danish topping sugar plum tart bonbon caramels cake.
</summary> 
```

问题是，为什么这个换行符没有达到预期的效果：这是一个关于 XML 的接收者实际上在用它做什么的问题。例如，如果收件人正在将其翻译为 HTML，并且 HTML 正在浏览器中显示，则换行符将被浏览器转换为空格。你需要告诉我们一些关于处理管道的事情。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-10-23T13:31:16.270

您可能使用的是 Windows，所以换行符是`CR + LF`（回车 + 换行）。所以解决方案是：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="dummy.xsl"?>
  <item>
     <summary>Tootsie roll tiramisu macaroon wafer carrot cake.&#13;&#10;Danish topping sugar plum tart bonbon caramels cake.
     </summary>
  </item> 
```

对于 Linux，只有`LF`Mac OS `CR`。

有问题有显示Linux方式。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-04-11T07:18:04.977

这个解决方案对我有用：

```
<summary>Tootsie roll tiramisu macaroon wafer carrot cake. &#xD;Danish topping sugar plum tart bonbon caramels cake.</summary> 
```

您将有两行文本。

这对我有用 XmlReader.Read 方法。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-06T15:47:06.570

您可能需要将其放在[CDATA 块](http://www.w3schools.com/xml/xml_cdata.asp)中以保留空格

```
<?xml version="1.0" encoding="utf-8"?> <?xml-stylesheet type="text/xsl" href="dummy.xsl"?>   
   <item>      
      <summary>
         <![CDATA[Tootsie roll tiramisu macaroon wafer carrot cake.                       
            Danish topping sugar plum tart bonbon caramels cake.]]>
      </summary>   
   </item> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-26T22:55:04.587

不使用 CDATA，尝试

```
<xsl:value-of select="'&#xA;'" /> 
```

注意双引号和单引号。

如果您不创建 xml aka 文本，这将特别有用。`<xsl:output method="text" />`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-09T17:17:11.473

给出换行符的最简单方法是执行以下操作：
1> 在 CSS 中添加以下内容 - `e{display:block}`
2> 现在，无论您想给出换行符，输入 -

```
<e></e> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-02T03:16:24.567

在 XML 中进行换行的方法是使用`&#xA;`

当我设计 XML 布局并使用 TextView 时，它在 Eclipse IDE 中为我工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-20T20:07:31.443

当我不得不开发固定长度的字段格式时遇到了同样的问题。

通常我们不会对二进制文件使用换行符，但出于某种原因，我们的客户希望在记录之间添加换行符作为分隔符。他们设置

<记录分隔符值="\n"/ >

但这不起作用，因为记录有两个额外的字符：
< record1 > \n < record2 > \n.... 等等。

做了以下改变，它就奏效了。

<record_delimiter value="\n"/> => <record_delimiter value=" "/>

解组后 Java 解释为换行符。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-08T20:40:46.337

想添加我的解决方案：

`&lt; br/ &gt;`

这与上面建议的基本相同
在我的情况下，我不得不使用`&lt`for < 和`&gt`for > 简单地`<br />`说没有用。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-05-20T05:57:02.263

只需简单地按回车就可以休息一下

```
<![CDATA[this is
my text.]]> 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2017-01-13T14:30:09.927

这可以通过 CSS 属性简单地解决：

***XML:*** `<label name="pageTac"> Hello how are you doing? Thank you I'm Good</label>`

***CSS***

```
.pageText{
white-space:pre !important; // this wraps the xml text.} 
```

***HTML / XSL***

```
<tr>
        <td class="pageText"><xsl:value-of select="$Dictionary/infolabels/label[@name='pageTac']" />
            </td></tr> 
```

* * *

## 回答 #14

> 赞同：-5
> 
> 时间：2015-11-24T13:13:33.597

```
(Using system.IO) 
```

您可以简单地使用`\n`换行符并`\t`在字符串前面缩进它。

例如在`c#`：

```
public string theXML() {
    string xml = "";
    xml += "<Scene>\n";
    xml += "\t<Character>\n";

    xml += "\t</Character>\n";
    xml += "</Scene>\n";
    return xml;
} 
```

这将导致输出： http: [//prntscr.com/96dfqc](http://prntscr.com/96dfqc)

# javascript - 从 jscolor 获取颜色

> ID：10917556
> 
> 赞同：3
> 
> 时间：2012-06-06T15:42:00.177
> 
> 标签：javascript, code-generation, jscolor

我正在使用来自[http://jscolor.com的 jscolor.js](http://jscolor.com)

下面的函数是我之前用来将用户输入添加到代码生成器的函数。他们输入他们选择的十六进制颜色，它会被添加到代码生成器中。

```
function changeOutlineColour(){
   var jj_input4 = document.getElementById('jj_input4').value;
   document.getElementById('outlinecolour').innerHTML = jj_input4;
   document.getElementById('jj_preview2').style.outlineColor = '#' + jj_input4;
} 
```

这是在标签之间添加`span`代码的地方

```
<div class="jj_yourcode">
    <p>#<span id="outlinecolour"></span>;</p>
</div> 
```

现在我正在使用 jscolor，十六进制代码没有添加到生成器中，所以我的问题是，我必须对函数进行哪些更改才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:31:32.217

用一个按钮想出来

HTML：

```
<button type="submit" onClick="submitColour()">Set Colour</button> 
```

Javascript：

```
function submitColour(){
    var jj_input4 = document.getElementById('jj_input4').value;
    document.getElementById('outlinecolour').innerHTML = jj_input4;
} 
```

# javascript - IE 未显示在 Javascript 中完成的更新的 IMG SRC 更改

> ID：10917558
> 
> 赞同：6
> 
> 时间：2012-06-06T15:42:03.650
> 
> 标签：javascript, css, internet-explorer

ISSUE: IE 版本 7 和 8 未显示在 JavaScript 中完成的更新的 IMG SRC 更改

如果您转到下面的 URL，您可以看到我的意思，在左侧 (3) 我想要一个不同的衬里，您选择一个样本；假设您选择“Asahi Chartreuse”。请注意，左侧的预览没有任何变化。但是，如果您继续选择另一个样本，您将在左移上看到预览，以显示 Asahi Chartreuse。所以它落后了。这就是为什么我认为这是一个“刷新”问题。它在 Chrome 中运行良好。

在 IE 中：请注意，如果您单击其他控件，则会发生刷新。

你可以在这里看到代码：[https ://www.casemodo.com/test.asp](https://www.casemodo.com/test.asp)

到目前为止我尝试过的：

我试过添加标题来表示“无缓存”。

我试过添加“？” 和 png 文件名后的随机数。

更改 src 后，我尝试将 focus() 设置为图像。

我试过，在更改 src 后，告诉 style.display 隐藏然后可见。

我尝试在页面上创建一个隐藏（而不是隐藏）的文本输入框，然后在更改 img src 后将 focus() 设置为它。

我试过设置window.focus()。

我已经尝试（如您现在所见）在更改 src 后设置警报。

GUESS：现在的情况是，JavaScript 引擎在我设置 src 后暂停，直到您手动单击（聚焦）屏幕上的其他位置。所以它甚至从来没有涉及到我上面尝试过的所有脚本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T16:23:52.377

将 src 属性设置为 null，然后将其设置为您的新 url：

在jQuery中：

```
var myImg = $('#myImg');
myImg.attr('src', null);
myImg.attr('src', newUrl); 
```

在直接的js中：

```
var myImg = document.getElementById('myImg');
myImg.src = null;
myImg.src = newUrl 
```

这对我有用 - 它让我发疯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:53:23.653

尝试使用 onclick 而不是 onchange。后者不适用于某些浏览器中的某些表单元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:53:16.390

我已经看到类似的 IE 问题通过对 innerHTML 的看似奇怪的重新分配来解决。假设“容器”是一个引用 img 的 parentNode 的变量。试试“container.innerHTML = container.innerHTML”。这会触发重新渲染，并可能使错误的 img 栩栩如生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T04:59:03.917

对问题的评论：

*   请在问题中包含代码片段。
*   javascript 是在 onchange 事件中，还是在哪里？
*   如果客户端浏览器是谷歌浏览器，它可以工作吗？（听起来像是又一个 IE-image-src-bug。）
*   自发布此问题以来，您链接到的演示页面已更改；在我写这篇文章时，单击样本会导致提交，这会导致加载不同的页面。

一条建议：

*   使用`setTimeout`, 以便在触发超时事件时发生实际更改，而不是在原始 GUI 事件线程中。例如，如果原始 javascript 是

    ```
    SomeFunction(); 
    ```

    将其更改为

    ```
    setTimeout(SomeFunction, 10); 
    ```

    （`image.src = newURL;`里面是在哪里做的`SomeFunction`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T12:52:51.013

我正在使用延迟加载实现，并遇到了类似的问题。出于某种原因，在代码中将*data-srcset*属性更改为*srcset*后，即使使用本页描述的其他方法，元素似乎仍然没有获得新的属性值。经过一番研究，我到[了 github 上的这个页面](https://github.com/digitoimistodude/dude/commit/0519dc5cf31c9a47c6b66a02818208ca64453082)，关于延迟加载插件的错误修复。它给了我一个想法，而不是使用这里描述的替换选项或`your_element.src=null`方法，而是使用这样的东西：

```
your_element.setAttribute("src", your_element.getAttribute("data-srcset")); 
```

它最终为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-20T18:25:13.033

这个问题可能不再相关，但我们今天在检查我们的一个库的向后兼容性时遇到了同样的问题。

唯一对我们有用的是在更改`src`属性值之前自行替换图像元素：

```
var myImg = document.getElementById('myImg');
myImg.parentNode.replaceChild(myImg, myImg);
myImg.src = newUrl; 
```

# java - 番石榴 com.google.common.net.InetAddresses

> ID：10917559
> 
> 赞同：0
> 
> 时间：2012-06-06T15:42:04.520
> 
> 标签：java, guava

如果 IP 地址（IPv4、IPv6）有效，我想检查 java。

谷歌的番石榴库在我看来是一个可行的选择。它的`isInetAddress(String ipString)`方法适用于 IPv4 地址。但是对于 IPv6 地址，我必须使用该`isIsatapAddress(Inet6Address ip)`方法。

问题是我想使用`args`from`void main(String []args)`来捕获用户的输入，因为该方法需要一个 Inet6Address 对象，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:19:53.867

[`InetAddresses.isInetAddress(String)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/net/InetAddresses.html#isInetAddress%28java.lang.String%29)应该适用于 IPv4 和 IPv6 地址。

如果您还想接受类似`2607:f0d0:1002:51::4/64`可以用一点 indexOf 和子字符串剥离网络掩码的东西，我认为在 Guava 中还没有这样的方法：

```
static boolean isInetAddressOrBlock(String address) {
  int slash = address.lastIndexOf('/');
  if (slash != -1) {
    address = address.substring(0, slash);
  }
  return InetAddresses.isInetAddress(address);
} 
```

如果您考虑使用`sun.net.util.IPAddressUtil`，请不要 -`sun.*`包是您的 JRE 的实现细节，不打算使用，并且并非在所有 JRE 上都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T07:50:04.330

我同意 InetAddresses.isInetAddress(String)。它应该完成验证 IPV4 和 IPV6 地址的工作。

但是，我想分享我对包含超过 4 个字符和前导零的 IPV6 地址的验证问题的经验。

例如，假设我得到以下地址：

```
1234:000002001:1234:0000:0000:C1C0:ABCD:0876 
```

InetAddresses.isInetAddress 返回的有效地址，但另一方面，如果我考虑[RFC4291中的文本表示，它看起来不是有效的 IPV6 地址](https://www.rfc-editor.org/rfc/rfc4291)

# c# - 实体框架和带日期时间的迁移

> ID：10917572
> 
> 赞同：0
> 
> 时间：2012-06-06T15:42:51.760
> 
> 标签：c#, entity-framework, entity-framework-4, migration

我正在使用 EF 4.3 和迁移脚本。但是我对一个没有创建他的字段的属性有疑问。

```
public class Test {
    [HiddenInput(DisplayValue = false)]
    public int Id { get; set; }

    [ScaffoldColumn(false)]
    public string Author { get; set; }

    [ScaffoldColumn(false)]
    public DateTime UpdateUtc { get; set; }

} 
```

当我在`Add-Migration`这里运行命令是生成的代码：

```
 public override void Up()
    {
        CreateTable(
            "Test",
            c => new
                {
                    Id = c.Int(nullable: false, identity: true),
                    Author = c.String(),
                })
            .PrimaryKey(t => t.Id);

    } 
```

我的第一个想法是因为该`ScaffoldColumn`属性，但 Author 字段已正确添加。我看到的唯一区别是该字段的类型`UpdateUtc` 不是原始类型。

什么会导致这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:49:31.110

尝试手动添加它，使用类似：

```
UpdateUtc = c.DateTime() 
```

我认为应该是这样。然后使用更新命令更新数据库。生成数据库时，请查看生成的列的名称，看看是否类似于[UpdateUtc]。如果是这样，则名称 UpdateUtc si 保留并且不能使用。

# javascript - jquery firstChild.data 等效

> ID：10917575
> 
> 赞同：3
> 
> 时间：2012-06-06T15:43:02.167
> 
> 标签：javascript, jquery

JQuery 中是否有 firstChild.data 的等价物？

给定以下 HTML：

```
<p id='test'>Hello<span>world</span>/<p> 
```

下面的 javascipt 将返回：“你好”

```
document.getElementById('test').firstChild.data 
```

给定的 JQuery 将返回：`Hello< span>world</span>`

```
$('#test').text() 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:45:53.577

您需要一个文本节点，因此您可以使用`.contents`：

```
$("#test").contents().first().text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:44:00.010

试试这个：

```
 $('#test').contents()[0].nodeValue; 
```

`contents()`帮助您获取文本节点。

# php - 检索 Twitter 关注者的更快方法？

> ID：10917576
> 
> 赞同：1
> 
> 时间：2012-06-06T15:43:02.437
> 
> 标签：php, twitter

我编写了以下代码来检索用户的 Twitter 关注者。它适用于拥有 150 个或更少关注者的用户（我已经用多个帐户进行了测试）

然而，由于用户拥有超过 500 个关注者，脚本需要很长时间才能加载，有时会由于 PHP 的最大执行时间而超时。

我想找到一种更好的方法来做这件事，我不想编辑我的 php.ini 来增加允许的执行时间。

```
<?php
   $cursor = -1;
   $account_from = 'twitter';
   do
   {
     $json = file_get_contents('http://api.twitter.com/1/followers/ids.json?cursor='.$cursor.'&screen_name='.$account_from.'');
     $accounts = json_decode($json);

     foreach ($accounts->ids as $account)
      {
        $a[] = $account ; 
      }

      $cursor = $accounts->next_cursor;

    }while ($cursor > 0);

    $n = ceil(count($a) / 100) ; 
    $b = array_chunk($a, 100) ; 

    for($i=0 ; $i<$n ; $i++) {

        $user = ''; 

        for($j=0 ; $j<count($b[$i]) ; $j++) {

                    $user =  $user.$b[$i][$j].',' ;

        }

        $json=file_get_contents('http://api.twitter.com/1/users/lookup.json?user_id='.$user.'') ;
        $fo= json_decode($json);

        foreach ($fo as $key => $jsons) {

             foreach($jsons as $key => $value) {

                     if($key == 'screen_name'){

                             $arr[] = $value;

                    }

            }

        }

    }

    echo "<pre>" ; 
    print_r($arr) ;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:26:51.680

根据[文档](https://dev.twitter.com/docs/api/1/get/users/lookup)

> 强烈建议您对较大的请求使用 POST。

我发现任何超过 50 个用户 ID 的东西都需要使用 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:48:07.997

当每个追随者都需要第二个 json 请求时，无论您如何优化代码，您都无法更快地执行脚本。HTTP 请求的响应时间是您的瓶颈。

唯一的解决方案是执行一些[并行](https://stackoverflow.com/questions/2101640/patterns-for-php-multi-processes)请求。

# android - 从 android 应用程序向 facebook graph api 发送分数

> ID：10917579
> 
> 赞同：1
> 
> 时间：2012-06-06T15:43:28.213
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我想从我的 android 应用程序中使用 facebook graph api 发布分数

我在 facebook 开发者页面中创建 android 应用程序。我设置为 Native Android App ，并设置 Mobile Web 设置，如下图所示

![在此处输入图像描述](../Images/b76e09793036dbd51f86d3c5cb4335bf.png)

在 android 代码中，我为我的应用程序使用此权限：

`String[] permissions = {"publish_stream","publish_actions","user_games_activity","friends_games_activity"};`

在 facebook 上成功登录后，我尝试使用这个 android 代码将分数发布到 facebook

```
Bundle params = new Bundle();
    params.putString("score", "100");
    //params.putString("access_token", "token as constant");

    String response = "null";

    Utility.mFacebook.setAccessToken("token as constant");

    try {
        response = Utility.mFacebook.request("user_id/scores", params, "POST");
    } catch (FileNotFoundException e) {

        e.printStackTrace();
    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } 
```

我收到了这个回复：

`{"error":{"message":"(#15) This method must be called with an app access_token.","type":"OAuthException","code":15}}`

如果我使用 Graph API Explorer，我会得到同样的错误：

![在此处输入图像描述](../Images/5f5252b828b09e2a5dcf301284d86dde.png)

在 facebook 设置 -> 应用程序 -> 应用程序名称 -> 高级 -> 应用程序类型设置为“Web”（我也尝试使用本机/桌面，但我得到同样的错误）

谁能帮助我并告诉我如何将分数从我的 android 应用程序发送到 fb？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:05:09.777

> “(#15) 必须使用**应用程序**access_token 调用此方法。”

看起来您尝试使用用户访问令牌。

有关如何获取应用访问令牌的信息，请参阅[https://developers.facebook.com/docs/authentication/applications/ 。](https://developers.facebook.com/docs/authentication/applications/)

# xml - 在 XPath 表示法中，表达式 //*[self::SOME_LABEL] 与 //SOME_LABEL 有何不同？

> ID：10917580
> 
> 赞同：2
> 
> 时间：2012-06-06T15:43:30.913
> 
> 标签：xml, xslt, xpath, transformation

在工作中，我正在更新一些 XSLT 转换代码，在某些地方，以前的程序员使用前一个表达式从 XML 文档中检索名为 SOME_LABEL 的元素的值。

//*[self::SOME_LABEL] 和 //SOME_LABEL 形式似乎都产生相同的结果节点集。

最初的程序员不再在这里工作，但在我的研究中，我找不到任何理由前者比后者更可取。我当然不想破坏工作代码，但第二种形式更具可读性和自我记录（可维护性）。

我倾向于在我正在编写的新代码中使用它来完成相同的结果，并希望使所有这些表达式保持一致；不这样做会使代码奇怪地混合了两者。

有什么理由我不应该将第一种形式的所有出现都更改为第二种形式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:07:31.157

> 在 XPath 表示法中，表达式与 有何`//*[self::SOME_LABEL]`不同`//SOME_LABEL`？

它的可读性不同。否则是等价的。

在 XPath 1.0中使用轴的一个原因`self`是，当您想要在给定路径位置选择一组不同的元素节点时，这些节点的类型很长并且您不想重复：

```
/some/longish[@and='complicated']/path/then[ self::a or self::b or self::c ] 
```

在您的示例中不是这种情况。因此，您可以进行更改以简化维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:51:37.700

默认轴是 child:: ，因此含义不同。下图由 Crane Softwrights 提供。

![有效的 XHTML](../Images/eb80cdb5c78aaed4536af96a4b0b49d9.png).

然而， //*[self::X] 确实会匹配与 //X 相同的节点。所以是的，做这个替换。

# python - Python中任意大小的字节块的高效FIFO队列

> ID：10917581
> 
> 赞同：18
> 
> 时间：2012-06-06T15:43:36.107
> 
> 标签：python

如何实现一个 FIFO 缓冲区，我可以有效地将任意大小的字节块添加到头部，并从中有效地从尾部弹出任意大小的字节块？

背景：

我有一个类，它以任意大小的块从类似文件的对象中读取字节，并且它本身就是一个类似文件的对象，客户端可以从中读取任意大小的块中的字节。

我实现这个的方式是，每当客户端想要读取一个字节块时，该类将重复从底层的类似文件的对象（具有适合这些对象的块大小）中读取并将字节添加到 FIFO 的头部排队，直到队列中有足够的字节来为客户端提供请求大小的块。然后它从队列的尾部弹出这些字节并将它们返回给客户端。

当底层类文件对象的块大小远大于客户端从类中读取时使用的块大小时，会出现性能问题。

假设底层类文件对象的块大小为 1 MiB，客户端读取的块大小为 1 KiB。客户端第一次请求 1 KiB 时，该类必须读取 1 MiB 并将其添加到 FIFO 队列中。然后，对于该请求和随后的 1023 个请求，该类必​​须从 FIFO 队列的尾部弹出 1 KiB，该队列的大小逐渐从 1 MiB 减小到 0 字节，此时循环再次开始。

我目前已经使用 StringIO 对象实现了这一点。将新字节写入 StringIO 对象的末尾很快，但从开头删除字节非常慢，因为必须创建一个新的 StringIO 对象，该对象保存整个先前缓冲区的副本减去第一个字节块。

处理类似问题的 SO 问题往往指向双端队列容器。然而，双端队列被实现为双向链表。将块写入双端队列需要将块拆分为对象，每个对象包含一个字节。然后，双端队列将添加两个指向每个对象的指针以进行存储，与字节相比，内存需求可能至少增加了一个数量级。此外，遍历链表并处理每个对象以将块拆分为对象和将对象连接为块都需要很长时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T16:05:00.507

> 我目前已经使用 StringIO 对象实现了这一点。将新字节写入 StringIO 对象的末尾很快，但从开头删除字节非常慢，因为必须创建一个新的 StringIO 对象，该对象保存整个先前缓冲区的副本减去第一个字节块。

实际上，实现 FIFO 的最典型方法是使用两个指针环绕缓冲区，如下所示：

![在此处输入图像描述](../Images/5b2e3d4214c7153fda8f28d98251fa03.png) *[图片来源](http://users.ece.utexas.edu/~valvano/embed/chap7/chap7.htm#FIFO)*

现在，您可以`StringIO()`使用[`.seek()`](http://docs.python.org/library/stdtypes.html#file.seek)从适当的位置读/写来实现它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-06T15:55:23.470

**更新：这是来自**[vartec 答案](https://stackoverflow.com/a/10917913/21475)的循环缓冲区技术的实现（基于我的原始答案，为好奇的人保留在下面）：

```
from cStringIO import StringIO

class FifoFileBuffer(object):
    def __init__(self):
        self.buf = StringIO()
        self.available = 0    # Bytes available for reading
        self.size = 0
        self.write_fp = 0

    def read(self, size = None):
        """Reads size bytes from buffer"""
        if size is None or size > self.available:
            size = self.available
        size = max(size, 0)

        result = self.buf.read(size)
        self.available -= size

        if len(result) < size:
            self.buf.seek(0)
            result += self.buf.read(size - len(result))

        return result

    def write(self, data):
        """Appends data to buffer"""
        if self.size < self.available + len(data):
            # Expand buffer
            new_buf = StringIO()
            new_buf.write(self.read())
            self.write_fp = self.available = new_buf.tell()
            read_fp = 0
            while self.size <= self.available + len(data):
                self.size = max(self.size, 1024) * 2
            new_buf.write('0' * (self.size - self.write_fp))
            self.buf = new_buf
        else:
            read_fp = self.buf.tell()

        self.buf.seek(self.write_fp)
        written = self.size - self.write_fp
        self.buf.write(data[:written])
        self.write_fp += len(data)
        self.available += len(data)
        if written < len(data):
            self.write_fp -= self.size
            self.buf.seek(0)
            self.buf.write(data[written:])
        self.buf.seek(read_fp) 
```

* * *

原始答案（由上述答案取代）：

您可以使用缓冲区并跟踪起始索引（读取文件指针），当它变得太大时偶尔压缩它（这应该会产生相当好的摊销性能）。

例如，像这样包装一个 StringIO 对象：

```
from cStringIO import StringIO
class FifoBuffer(object):
    def __init__(self):
        self.buf = StringIO()

    def read(self, *args, **kwargs):
        """Reads data from buffer"""
        self.buf.read(*args, **kwargs)

    def write(self, *args, **kwargs):
        """Appends data to buffer"""
        current_read_fp = self.buf.tell()
        if current_read_fp > 10 * 1024 * 1024:
            # Buffer is holding 10MB of used data, time to compact
            new_buf = StringIO()
            new_buf.write(self.buf.read())
            self.buf = new_buf
            current_read_fp = 0

        self.buf.seek(0, 2)    # Seek to end
        self.buf.write(*args, **kwargs)

        self.buf.seek(current_read_fp) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-09-01T18:31:17.303

> ...但是从头开始删除字节非常慢，因为必须创建一个新的 StringIO 对象，该对象包含整个先前缓冲区的副本减去第一个字节块。

这种类型的缓慢可以通过`bytearray`在 Python>=v3.4 中使用来克服。请参阅此[问题](https://bugs.python.org/issue19087)中的讨论，补丁在[此处](https://github.com/python/cpython/commit/5df8a8a1fd6cc6f4469dc7d3994d06e2aea24c52)。

关键是：从`bytearray`by中删除头字节

```
a[:1] = b''   # O(1) (amortized) 
```

比

```
a = a[1:]     # O(len(a)) 
```

什么时候`len(a)`很大（比如 10**6）。

与需要将对象连接成块的双端队列容器相比，`bytearray`它还为您提供了一种将整个数据集预览为数组（即其本身）​​的便捷方式。

现在可以按如下方式实现高效的 FIFO

```
class byteFIFO:
    """ byte FIFO buffer """
    def __init__(self):
        self._buf = bytearray()

    def put(self, data):
        self._buf.extend(data)

    def get(self, size):
        data = self._buf[:size]
        # The fast delete syntax
        self._buf[:size] = b''
        return data

    def peek(self, size):
        return self._buf[:size]

    def getvalue(self):
        # peek with no copy
        return self._buf

    def __len__(self):
        return len(self._buf) 
```

基准

```
import time
bfifo = byteFIFO()
bfifo.put(b'a'*1000000)        # a very long array
t0 = time.time()
for k in range(1000000):
    d = bfifo.get(4)           # "pop" from head
    bfifo.put(d)               # "push" in tail
print('t = ', time.time()-t0)  # t = 0.897 on my machine 
```

Cameron 回答中的循环/环形缓冲区实现需要 2.378 秒，而他/她的原始实现需要 1.108 秒。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-06T15:50:54.990

你能假设*一下*预期的读/写量吗？

例如，将数据分块为 1024 字节片段并使用`deque`[1] 可能会更好；您可以只读取 N 个完整的块，然后将最后一个块拆分并将剩余部分放回队列的开头。

1)[集合.deque](http://docs.python.org/library/collections.html#deque-objects)

`class collections.deque([iterable[, maxlen]])`

> 返回一个新的双端队列对象，从左到右初始化（使用 append()），其中包含来自可迭代的数据。如果未指定 iterable，则新的双端队列为空。
> 
> 双端队列是堆栈和队列的概括（名称发音为“deck”，是“双端队列”的缩写）。双端队列支持从双端队列的任一侧进行线程安全、内存高效的追加和弹出操作，在任一方向上的 O(1) 性能大致相同。...

# windows-phone-7 - 是否有适用于 Windows Phone 平台的 Twitter SDK？

> ID：10917588
> 
> 赞同：0
> 
> 时间：2012-06-06T15:43:57.370
> 
> 标签：windows-phone-7, twitter, sdk

> **可能重复：**
> [适用于 Twitter API 的 Windows Phone 的 SDK](https://stackoverflow.com/questions/5729877/sdk-for-windows-phone-for-twitter-api)

我一直在构建一个 Windows Phone 应用程序。我需要在 Twitter 和 Facebook 上与我的朋友分享一些图片和评论。

但我还没有找到任何适用于 Windows Phone 平台的 Twitter SDK。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:54:00.513

如果您只想分享评论（即文本），您可以使用 Windows 手机的[ShareStatusTask](http://msdn.microsoft.com/en-us/library/hh394027%28v=vs.92%29.aspx)类，它允许您同时分享到 Twitter 和 facebook。

但是如果你想分享图片或者如果你想实现一个自定义的推特分享功能，你可以使用一些第三方库，比如[Hammock](http://nuget.org/packages/Hammock)、[Twitterizer](http://www.twitterizer.net/)等。

而对于定制的 facebook 分享，这篇[文章](http://dotnetslackers.com/articles/net/wFace-windows-phone-7-facebook-integration-part-1.aspx)可能会对你有所帮助

# ruby - 在使用扩展的 rvm 命令行语法时将参数传递给 ruby 脚本？

> ID：10917602
> 
> 赞同：0
> 
> 时间：2012-06-06T15:44:41.277
> 
> 标签：ruby, rvm

rvm 命令让你告诉它你想使用什么环境，并传递一个块给它来调用一个脚本或其他东西（对于命令的一次性运行），例如：

```
rvm 1.9.2-p290@whatever-gemset do ruby my-script.rb 
```

但是，如果脚本也接受命令行参数并且您尝试在调用时将脚本传递给它们，rvm 会报错。有谁知道 rvm 是否有语法来支持/允许这个？

例如：

```
rvm 1.9.2-p290@whatever-gemset do ruby my-script.rb -p
ERROR: Unrecognized command line argument(s): '-p' ( see: 'rvm usage' ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:32:01.113

为避免`rvm`尝试将这些参数解析为`rvm`自身的参数，请将它们放在引号中以将它们作为单个参数传递：

```
rvm 1.9.2-p290@whatever-gemset do "ruby my-script.rb -p" 
```

这将失败的唯一原因是，如果在实际执行此命令之前进行了某种 shell 扩展，这是非标准行为。

# asp.net-mvc - UpdateModel 更改 MVC1 与 MVC3

> ID：10917603
> 
> 赞同：1
> 
> 时间：2012-06-06T15:44:43.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在将应用程序从 ASP.NET MVC 1 转换为 MVC 3，但`UpdateModel()`在提交表单时调用时遇到了一些问题。

这是我的模型类：

```
public class TestModel
{
    public string Name { get; set; }
    public string Description { get; set; }
    public int Age { get; set; }
    public int? SubValue { get; set; }
    public int AgeSub
    {
        get
        {
            return SubValue.Value - Age;
        }
    }
} 
```

在我的控制器中：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult TestModelSave()
{
    TestModel tm = new TestModel();

    try
    {
        UpdateModel(tm);

        if (ModelState.IsValid)
        {
            return RedirectToAction("TestModelEdit");
        }
    }
    catch
    {
    }

    return View("TestModelEdit", tm);
} 
```

如果我在提交时将 SubValue 保留为空，则在 MVC 1 中它可以正常工作。但是在 MVC 3 中，当我调用它时，会在 TestModel 类`UpdateModel(tm)`的行中引发异常。`return SubValue.Value - Age;`

我可以去更改`SubValue.Value`为`SubValue.GetValueOrDefault()`，但我不想这样做。为什么在 MVC 版本之间进行这种更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:53:14.773

你可以尝试几件事。您的 AgeSub 属性应该对 subvalue 属性进行空检查：

```
 public int AgeSub
    {
        get
        { 
            if(SubValue == null)
            {
                return 0;
            }

            return SubValue.Value - Age;
        }
    } 
```

您可以清理控制器操作并摆脱 try catch 块，如下所示：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult TestModelSave()
    {
        TestModel tm = new TestModel();

        if (ModelState.IsValid)
        {
            if(TryUpdateModel(tm))
            {
                return RedirectToAction("TestModelEdit");    
            }

        }

        return View("TestModelEdit", tm);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T02:47:05.930

我知道这是一个相当古老的问题，但仅供将来参考，

在 MVC 1 中，UpdateModel 方法仅更新表单集合 ModelState.IsValid 中指定的字段，仅检查那些被修改的字段的有效性。

在 MVC 2 RC 及更高版本中，它发生了变化，现在，Model.IsValid 检查模型中所有属性的有效性，而不是只检查修改的字段。

***这意味着，当您在 MVC1 中调用 ModelState.IsValid 时，您的 AgeSub 属性未被验证，但在 MVC 2 及更高版本中被调用***

参考： [http ://weblogs.asp.net/scottgu/archive/2010/02/05/asp-net-mvc-2-release-candidate-2-now-available.aspx#7335401](http://weblogs.asp.net/scottgu/archive/2010/02/05/asp-net-mvc-2-release-candidate-2-now-available.aspx#7335401)

另请查看 MVC 2 发行说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:50:22.687

如果您的代码在 MVC1 下工作（我无法理解它是如何工作的），那么这只是纯粹的运气。如果您尝试访问这样的可为空的 int 的值，它*应该*抛出异常。

您的代码已损坏，您应该修复它。不要抱怨它曾经有效，因为如果有效，它就不应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T16:54:17.790

如果要访问该对象的属性，则该对象不能为空。所以最好的办法是检查对象是否不为空，然后尝试访问该属性。我非常怀疑相同的代码在 MVC1 中是否正常工作（如果它正在工作，你在 MVC1 中获得的价值是什么）

在您的情况下，您可以这样做`AgeSub`以避免引发异常。

```
public int AgeSub
{
   get
   {
       return SubValue.HasValue ? SubValue.Value - Age : 0;
   }
} 
```

# extendscript - 当我尝试使用 ExtendScript 复制页面时，Adobe InDesign 无限期挂起

> ID：10917607
> 
> 赞同：1
> 
> 时间：2012-06-06T15:45:07.747
> 
> 标签：extendscript, adobe-indesign

我有一个非常简单的 ExtendScript 脚本，它从当前活动文档的子集创建一个新文档：

```
var sourceDocument = app.activeDocument;
var i, j;

for(i = 0; i < sourceDocument.layers.length; i++) {
  sourceDocument.layers.item(i).locked = false;
}
for(i = 0; i < sourceDocument.spreads.length; i++) {
  for(j = 0; j < sourceDocument.spreads.item(i).textFrames.length; j++) {
    if(sourceDocument.spreads.item(i).textFrames.item(j).locked) {
      sourceDocument.spreads.item(i).textFrames.item(j).locked = false;
    }
  }
}

var destDocument = app.documents.add();
var firstPageIndex = 0; // In the actual script, this is chosen by the user.
var lastPageIndex = 5; // In the actual script, this is chosen by the user.

destDocument.importStyles(ImportFormat.paragraphStylesFormat, new File(sourceDocument.filePath + "/" + sourceDocument.name), GlobalClashResolutionStrategy.LOAD_ALL_WITH_OVERWRITE);
destDocument.importStyles(ImportFormat.characterStylesFormat, new File(sourceDocument.filePath + "/" + sourceDocument.name), GlobalClashResolutionStrategy.LOAD_ALL_WITH_OVERWRITE);
destDocument.viewPreferences.horizontalMeasurementUnits = sourceDocument.viewPreferences.horizontalMeasurementUnits;
destDocument.viewPreferences.verticalMeasurementUnits = sourceDocument.viewPreferences.verticalMeasurementUnits;
destDocument.documentPreferences.facingPages = sourceDocument.documentPreferences.facingPages;
destDocument.documentPreferences.pageHeight = sourceDocument.documentPreferences.pageHeight;
destDocument.documentPreferences.pageWidth = sourceDocument.documentPreferences.pageWidth;
destDocument.documentPreferences.pageSize = sourceDocument.documentPreferences.pageSize;
destDocument.documentPreferences.allowPageShuffle = true;

var range = sourceDocument.pages.itemByRange(firstPageIndex, lastPageIndex);
range.duplicate(LocationOptions.AFTER, destDocument.pages[destDocument.pages.length - 1]);
destDocument.pages[0].remove(); // An empty spread containing an empty page is added when the new document is created and we cannot remove it before other pages are inserted (Documents must have at least one page) 
```

该脚本适用于许多文档。但是当我对一个特定的文档（我们称之为 foo.indd）执行它时，InDesign 在执行复制时变得无响应：`range.duplicate(LocationOptions.AFTER, destDocument.pages[destDocument.pages.length - 1]);`. 从那时起，我唯一能做的就是强制 InDesign 退出。

这是一个 InDesign 错误吗？我怎样才能找到这个特定文档的哪一部分造成了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:23:49.507

试试这个脚本到你的有问题的文件上。如果失败，请查看它应该在桌面上生成的报告。

[http://www.loicaigon.com/downloads/cloneDocument.jsx](http://www.loicaigon.com/downloads/cloneDocument.jsx)

Loic [http://www.loicaigon.com](http://www.loicaigon.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:32:58.990

我真的不能说你的例子有什么问题，但如果 indesign 挂起，那可能是由循环引起的（到无穷大和超越:)）

因此，您可以尝试通过输出循环限制来避免问题，以避免 InDesign 重新计算

```
var limit = …
for ( i = 0; i<limit ; i++)… 
```

此外，您可以尝试在控制台上写入信息，以获取 InDesign 实际被卡住的位置的信息。因此，在报告文件中即时写入信息，您最终可能会确定问题区域。

此外，您可以尝试询问每个关键项目以查看文件是否有问题。

最后但并非最不重要的一点是，尝试手动导出到该文件的 idml，重新打开并再次运行该脚本。有时文件变得笨重，并且通过 idml 修复其中的大部分。

# android - Android 应用 facebook https 网址未加载

> ID：10917608
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:45:25.263
> 
> 标签：android, facebook, ssl, https, android-2.2-froyo

试图开发一个集成社交网络的安卓应用程序，我正在测试的第一个是 Facebook。在执行授权功能时，我使用 WebView 而不是调用本机应用程序（尽管我也让它尝试使用本机应用程序并获得相同的结果）。执行授权功能时，它会显示“正在加载”对话框，但过了一会儿它就会死掉并返回到我的 Activity。

在模拟器中工作时一切正常，登录/允许/拒绝屏幕显示，当我尝试在实际设备上使用它时，没有任何 https url 将加载（例如：[https ://graph.facebook.com/ 19292868552](https://graph.facebook.com/19292868552) https://m.facebook.com/dialog/ 等）。

奇怪的是，当尝试将应用程序尝试在 android 设备上的任何浏览器中使用的相同 facebook https 链接放置时，它们也不在那里加载，我得到一个“网页不可用”。所有其他 https 链接都可以正常工作 gmail、paypal、greendotcard 等。在我的 PC 上的浏览​​器中尝试相同的 https 链接时，尽管页面加载正常。

装置：

1.  安卓 2.2.2 (LG-P505)
2.  使用 WIFI 连接（是的，连接正常）

我已经在另一台设备上尝试过这个（完全相同的型号和 android 版本）并得到相同的结果。但是，如果我将设备切换为使用 Android 4.0.3（clockworkmod/rom 管理器等），则应用程序会正常工作（facebook https 链接工作正常）

我看到其他人也有类似的问题，所以我尝试了以下方法：

1.  重启手机
2.  检查互联网连接
3.  在 WebViewClient 中设置 onReceiveSslError：

> ```
> public void onReceivedSslError (WebView view, SslErrorHandler handler, SslError error) 
> {
>   Log.d("Facebook connection","SSL ERROR");
>   handler.proceed() ;
> } 
> ```

**执行 facebook 授权功能的代码：**

```
 facebook.authorize(this, new String[] { "read_stream", "publish_stream" }, new DialogListener() {
        public void onComplete(Bundle values) 
        {
            Log.d("Facebook onComplete",""+values);
        }

        public void onFacebookError(FacebookError error) {
            Log.d("Facebook onFacebookError",error.getMessage());
        }

        public void onError(DialogError e) 
        {
            Log.d("Facebook onError",e.getMessage());
        }

        public void onCancel() 
        {
            Log.d("Facebook onCancel","It canceled?");
        }
    }); 
```

**日志猫：**

```
06-06 10:43:48.991: V/webkit(22468): BrowserFrame constructor: this=Handler{44be3ba0}
06-06 10:43:49.001: V/webcore(22468): LOAD_URL arg1=0 arg2=0 obj=android.webkit.WebViewCore$GetUrlData@44be55c8
06-06 10:43:49.011: V/webcore(22468):  CORE loadUrl https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.011: V/webkit(22468): startLoadingResource: url=https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess, method=GET, postData=null, isMainFramePage=true, mainResource=true, userGesture=true
06-06 10:43:49.021: V/webkit(22468): LoadListener constructor url=https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.021: D/KeyguardViewMediator(1384): setHidden false
06-06 10:43:49.031: V/http(22468): 44550853 http0 RequestQueue.getRequest() => null
06-06 10:43:49.031: V/http(22468): 44550854 http0 ConnectionThread: Waiting for work
06-06 10:43:49.031: V/webview(22468): sendOurVisibleRect=(14,39,r=306,b=466
06-06 10:43:49.031: V/http(22468): 44550856 http1 RequestQueue.getRequest() => null
06-06 10:43:49.031: V/http(22468): 44550856 http1 ConnectionThread: Waiting for work
06-06 10:43:49.041: V/http(22468): 44550866 http2 RequestQueue.getRequest() => null
06-06 10:43:49.041: V/http(22468): 44550866 http2 ConnectionThread: Waiting for work
06-06 10:43:49.041: V/http(22468): 44550867 http3 RequestQueue.getRequest() => null
06-06 10:43:49.041: V/http(22468): 44550867 http3 ConnectionThread: Waiting for work
06-06 10:43:49.051: D/KeyguardViewMediator(1384): setHidden false
06-06 10:43:49.051: V/webview(22468): WEBCORE_INITIALIZED_MSG_ID
06-06 10:43:49.051: V/webcore(22468): SET_SCROLL_OFFSET arg1=0 arg2=0 obj=Point(0, 0)
06-06 10:43:49.051: V/webcore(22468): SET_GLOBAL_BOUNDS arg1=0 arg2=0 obj=Rect(14, 39 - 306, 466)
06-06 10:43:49.051: V/webcore(22468): VIEW_SIZE_CHANGED arg1=0 arg2=0 obj=android.webkit.WebView$ViewSizeData@44bf1b88
06-06 10:43:49.051: V/webcore(22468): viewSizeChanged w=292; h=427; textwrapWidth=292; scale=1.0
06-06 10:43:49.051: V/webcore(22468): viewSizeChanged
06-06 10:43:49.051: V/webcore(22468): UPDATE_CACHE_AND_TEXT_ENTRY arg1=0 arg2=0 obj=null
06-06 10:43:49.061: V/webview(22468): setCertificate=null
06-06 10:43:49.081: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.081: W/Flex(22468): getString FLEX_MCC_CODE 310
06-06 10:43:49.081: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.081: W/Flex(22468): getString FLEX_MNC_CODE 410
06-06 10:43:49.081: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.091: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.091: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.131: V/webkit(22468): [web] x-wap-profile info is read from flex.
06-06 10:43:49.131: V/webkit(22468): [web] x-wap-profile added = http://gsm.lge.com/html/gsm/P505-M6-D1.xml
06-06 10:43:49.131: W/Flex(22468): getString FLEX_OPERATOR_CODE ATT
06-06 10:43:49.131: V/webkit(22468): [web] x-att-deviceid : LG-P505/V10i
06-06 10:43:49.141: V/webkit(22468): getCookie: uri: https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess value: datr=yLHOT47krLHRlqDkKtLSPq5-; m_ts=1338946325; reg_fb_gate=http%3A%2F%2Fm.facebook.com%2Flogin.php%3Fapp_id%3DCLIENTID%26cancel%3Dfbconnect%253A%252F%252Fsuccess%253Ferror_reason%253Duser_denied%2526error%253Daccess_denied%2526error_description%253DThe%252Buser%252Bdenied%252Byour%252Brequest.%26fbconnect%3D1%26next%3Dhttp%253A%252F%252Fm.facebook.com%252Fdialog%252Fpermissions.request%253F_path%253Dpermissions.request%2526app_id%253DCLIENTID%2526redirect_uri%253Dfbconnect%25253A%25252F%25252Fsuccess%2526display%253Dtouch%2526type%253Duser_agent%2526perms%253Dread_stream%25252Cpublish_stream%2526fbconnect%253D1%2526from_login%253D1%2526client_id%253DCLIENTID%26rcount%3D1; reg_fb_ref=http%3A%2F%2Fm.facebook.com%2Flogin.php%3Fapp_id%3DCLIENTID%26cancel%3Dfbconnect%253A%252F%252Fsuccess%253Ferror_reason%253Duser_denied%2526error%253Daccess_denied%2526error_description%253DThe%252Buser%252Bdenied%252Byour%252Brequest.%26fbconnect%3D1%26next%3Dhttp%253A%252F%252Fm.facebook.com%252Fdialog%252Fpermissions.request%253F_path%253Dpermissions.request%2526app_id%253DCLIENTID%2526redirect_uri%253Dfbconnect%25253A%25252F%25252Fsuccess%2526display%253Dtouch%2526type%253Duser_agent%2526perms%253Dread_stream%25252Cpublish_stream%2526fbconnect%253D1%2526from_login%253D1%2526client_id%253DCLIENTID%26rcount%3D1
06-06 10:43:49.141: V/webkit(22468): FrameLoader: http GET load for: https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.151: V/http(22468): 44550972 WebViewWorkerThread RequestQueue.queueRequest https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.151: V/http(22468): 44550974 http0 RequestQueue.getRequest() => /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.151: V/http(22468): 44550974 http0 ConnectionThread: new request https://m.facebook.com:443 /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:43:49.151: V/http(22468): 44550975 http0 SEND pipe 0
06-06 10:43:49.161: V/webkit(22468): LoadListener.attachRequestHandle(): requestHandle: android.net.http.RequestHandle@44c0eef8
06-06 10:43:49.201: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:43:49.201: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:43:49.201: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:43:49.201: V/webview(22468): UPDATE_TEXT_ENTRY_MSG_ID
06-06 10:43:49.261: V/webcore(22468): SET_ACTIVE arg1=0 arg2=0 obj=null
06-06 10:43:50.391: D/DfeApi(17382): [1] DfeRequest.deliverResponse: Not delivering second response for request=[[ ] https://android.clients.google.com/fdfe/details?doc=sui.m NORMAL 415]
06-06 10:43:50.391: D/Volley(17382): [1] Request.finish: 5076 ms: [ ] https://android.clients.google.com/fdfe/details?doc=sui.m NORMAL 415
06-06 10:44:00.061: I/hs(21761): android.intent.action.TIME_TICK
06-06 10:44:02.841: D/Finsky(17382): [1] 5.onFinished: Installation state replication succeeded.
06-06 10:44:10.491: V/http(22468): 44572311 http0 Connection.openHttpConnection() 21336 https://m.facebook.com:443
06-06 10:44:10.491: V/http(22468): 44572312 http0 RequestQueue.getRequest() => /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:44:10.491: V/http(22468): 44572313 http0 ConnectionThread: new request https://m.facebook.com:443 /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:44:10.491: V/http(22468): 44572314 http0 SEND pipe 0
06-06 10:44:31.501: V/http(22468): 44593321 http0 Connection.openHttpConnection() 21006 https://m.facebook.com:443
06-06 10:44:31.501: V/http(22468): 44593321 http0 RequestQueue.getRequest() => /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:44:31.501: V/http(22468): 44593322 http0 ConnectionThread: new request https://m.facebook.com:443 /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:44:31.501: V/http(22468): 44593323 http0 SEND pipe 0
06-06 10:44:52.511: V/http(22468): 44614331 http0 Connection.openHttpConnection() 21006 https://m.facebook.com:443
06-06 10:44:52.511: V/http(22468): 44614332 http0 httpFailure() ******* java.io.IOException: The operation timed out count 2 https://m.facebook.com:443 /dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
06-06 10:44:52.511: V/webkit(22468): LoadListener.error url:https://m.facebook.com/dialog/oauth?display=touch&client_id=CLIENTID&scope=read_stream%2Cpublish_stream&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess id:-6 description:The connection to the server was unsuccessful.
06-06 10:44:52.511: V/webkit(22468): LoadListener.detachRequestHandle(): requestHandle: android.net.http.RequestHandle@44c0eef8
06-06 10:44:52.521: V/http(22468): 44614343 http0 RequestQueue.getRequest() => null
06-06 10:44:52.521: D/Facebook onError(22468): The connection to the server was unsuccessful.
06-06 10:44:52.521: V/http(22468): 44614345 http0 ConnectionThread: Waiting for work
06-06 10:44:52.521: V/webview(22468): setCertificate=null
06-06 10:44:52.551: I/ActivityManager(1384): Displayed activity com.fadedfootsteps/.FadedFootstepsActivity: 64220 ms (total 64220 ms)
06-06 10:44:52.591: V/webkit(22468): startLoadingResource: url=file:///android_asset/webkit/android-weberror.png, method=GET, postData=null, isMainFramePage=true, mainResource=false, userGesture=true
06-06 10:44:52.591: V/webkit(22468): LoadListener constructor url=file:///android_asset/webkit/android-weberror.png
06-06 10:44:52.601: V/webkit(22468): LoadListener: from: file:///android_asset/webkit/android-weberror.png major: 1 minor: 1 code: 200 reason: OK
06-06 10:44:52.601: V/webkit(22468): LoadListener.headers
06-06 10:44:52.601: V/webkit(22468): LoadListener.data(): url: file:///android_asset/webkit/android-weberror.png
06-06 10:44:52.601: V/webkit(22468): LoadListener.endData(): url: file:///android_asset/webkit/android-weberror.png
06-06 10:44:52.601: V/webkit(22468): guessMimeTypeFromExtension: url = file:///android_asset/webkit/android-weberror.png
06-06 10:44:52.631: V/webkit(22468): LoadListener.detachRequestHandle(): requestHandle: null
06-06 10:44:52.631: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:44:52.631: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:44:52.631: V/webview(22468): SET_SCROLLBAR_MODES
06-06 10:44:52.641: V/webcore(22468): didFirstLayout standardLoad =true
06-06 10:44:52.641: V/webcore(22468): WEBKIT_DRAW arg1=0 arg2=0 obj=null
06-06 10:44:52.651: V/webcore(22468): webkitDraw start
06-06 10:44:52.651: V/webview(22468): UPDATE_TEXT_ENTRY_MSG_ID
06-06 10:44:52.681: V/webcore(22468): webkitDraw NEW_PICTURE_MSG_ID
06-06 10:44:52.691: V/webview(22468): NEW_PICTURE_MSG_ID
06-06 10:44:52.701: V/webview(22468): NEW_PICTURE_MSG_ID {0,0,1063,427} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:40:42.080

想通了问题。这是由于我的 wifi 网络设置方式。有互联网连接共享，将我的移动宽带（USB 设备）共享到我的 wifi 路由器，并将路由器设置为接入点。将其改回正常使用状态，并将 android 设备放入 DMZ，确保没有任何东西会阻止其网络调用。

通常会事先检查这一点，但所有其他安全网站都运行良好，所以直到后来才想到。

# visual-c++ - 如何在 Visual Studio 2012 中为本地 C++ 可执行文件创建项目

> ID：10917609
> 
> 赞同：1
> 
> 时间：2012-06-06T15:45:30.730
> 
> 标签：visual-c++, exe, visual-studio-2012

如何在 Visual Studio 2012 中为本地 C++ 可执行文件创建项目。在以前的版本中新建项目 -> Visual C++ -> Win32 项目。我安装了 msvc 2012 RC，但找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:51:00.197

文件 -> 新项目 -> 已安装 -> 模板 -> 其他语言 -> Visual C++ -> Win32 项目)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:27:32.743

打开新项目对话框时看到的内容取决于第一次加载 VS 时选择的设置。如果您选择了 C++ 或常规开发设置以外的其他设置，C++ 将默认隐藏。然后您可能需要展开“其他语言”才能看到它。

但是，如果您选择了 C++ 或常规开发设置，您应该会在新项目对话框中看到 Visual C++ as on 选项。将有 Visual C++ -> Win32 控制台应用程序。

# php - 替代 MySQL 的 UUID Version 1 功能？

> ID：10917613
> 
> 赞同：12
> 
> 时间：2012-06-06T15:45:45.683
> 
> 标签：php, mysql, uuid

**语境**

Web 应用程序，PHP 5，MySQL 5.0.91

**问题**

我最近从使用自动递增整数切换到 UUID 作为我的某些表的主键。通过 MySQL 的[`UUID()`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid)函数生成 UUID 时，它们非常相似：

```
| uuid                                 |
----------------------------------------
| 1e5988da-afec-11e1-9877-5464f7aa6d24 |
| 408092aa-afad-11e1-9877-5464f7aa6d24 |
  ^------^   ^^
  1      8   11-12 
```

可以看到，只有前 8 个字符和第 11 个和第 12 个字符不同。我了解 UUID 版本 1 使用时间戳和硬件 MAC 地址来生成 UUID。但是，由于这些相似之处（以及在我的情况下 MAC 地址永远不会改变的事实），我在使用版本 1 时犹豫不决。此外，如果 MAC 地址永远不会改变，那么大部分 UUID 都是无用的，而且是在浪费空间。

**我的自定义 UUID 函数**

作为一个实验，我用 PHP 编写了一个自定义 UUID 生成器：

```
public static function GenerateUUID()
{
    return
    substr(sha1(Account::GetUsername() . Account::GetUserID()), 18, 8) . "-" .
    substr(md5(time()), rand() % 28, 4) . "-" . 
    substr(md5(date("Y")), rand() % 28, 4) . "-" . 
    substr(sha1(rand()), 20, 4) . "-" . 
    substr(sha1(rand() % PHP_INT_MAX), 17, 12);
} 
```

结果样本：

```
| uuid                                 |
----------------------------------------
| 574d18c2-5080-bac9-5597-45435f363ea1 |
| 574d18c2-30d4-8b5b-4ffd-001744d3d287 | 
```

在这里，前 8 个字符对于同一个用户是相同的。这是有意的，但不是必需的。

**问题**

是否有首选/推荐的方式*在 MySQL 查询*中生成版本 4 或版本 5 UUID ？

如果不是，是否可以在 PHP（如上）中生成不符合规范的自定义 UUID？

**限制**

*   我正在使用具有命令行访问权限的共享主机计划，但无法修改现有的 MySQL 安装。
*   我宁愿避免使用第三方包/库。

**笔记**

*   我不会也不会执行合并、同步或其他需要包含 MAC 地址的 GUID 的操作。这不是这里的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:33:43.480

您担心“大多数 UUID 无用且浪费空间”是数据类型大小所固有的。您将永远无法在数据库中拥有与 16 字节的理论限制所允许的一样多的条目。

事实上，如果将 UUID 用作表 ID，V1 UUID 比 V4 更合适——因为它使用 MAC 地址和时间戳来防止冲突。在 V4 中没有这样的机制，尽管实际上您也不需要过多担心冲突 :) 如果您需要使 UUID 不可预测，则应该使用 V4 UUID 而不是 V1。

另外，请注意，组合例如 4x4 字节的随机值可能与创建 16 字节的随机值不同。与加密和随机性一样：我不建议您实现自己的 UUID::V4 例程。

如果安装在您的机器上，您可以使用该`php-uuid`软件包。

~~可以在此处找到示例代码（可以在您的应用程序中使用）： [http ://rommelsantor.com/clog/2012/02/23/generate-uuid-in-php/](http://rommelsantor.com/clog/2012/02/23/generate-uuid-in-php/)~~

像这样使用它：

```
$uuid = uuid_create(1); 
```

能够在其网络服务器上安装软件包的用户可以安装所需的软件包，例如：（此处为 ubuntu）

```
apt-get install php5-dev uuid-dev
pecl install uuid 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T16:37:45.700

欣赏拥有“相似部分”实际上是一个相当不错的主意。它将允许您利用 MAC 地址来识别“我的哪些服务器生成了此 UUID？”......这在远程位置之间迁移数据时非常有用。您甚至可以通过这种方式做到“这是我的测试数据”和“这是我的生产数据”。

PHP 有大量的 UUID 生成器库。

这是一件 PECL/PEAR 的事情（我从未使用过）：

[http://pecl.php.net/package/uuid](http://pecl.php.net/package/uuid)

从 CakePHP 框架：

[http://api.cakephp.org/class/string#method-Stringuuid](http://api.cakephp.org/class/string#method-Stringuuid)（蛋糕 2.x） [http://api13.cakephp.org/class/string#method-Stringuuid](http://api13.cakephp.org/class/string#method-Stringuuid)（蛋糕 1.3）

最后一个生成器选项：

考虑使用具有版本控制标志和相关选项的 Linux 命令行`uuid`程序，`-v`并使用它来提供数据库。这有点低效，但至少您不必编写自己的生成器函数。

[http://linux.die.net/man/1/uuid](http://linux.die.net/man/1/uuid) - 手册页

（`uuid`Debian 软件包）

我注意到对于命名空间版本，您将生成大量“长人名”以转换为 uuid。只要你和那些没有冲突，它可能会很甜蜜。例如，使用电子邮件地址注册的用户...获取该电子邮件地址的 v5 uuid...您总能找到那个人！似乎每次都吐出相同的 UUID，而 UUID 将代表 bob@bob.com 作为成员与 example.com 的唯一关系。

`uuid -v5 ns:URL "http://example.com/member/bob@bob.com/"`

评论：

此外，UUID，你似乎存储它们的方式，是 CHAR(36)？您可能会后悔，一旦比较运算符起作用。

Postgres 会将 UUID 视为 128 位值（并且可能会进行优化的二进制操作），而 MYSQL 的 CHAR(36) 解决方案正在查看 36 字节 = 288 位 ANSI 或 576 位 UTF8 加或减位/字节用于办公室-保持（并且可能会执行更慢的多字节字符逐多字节字符字符串例程）。

实际上，我已经对 MySQL 和 UUID 的问题进行了很多考虑……我的结论是，您需要编写一个存储函数，将十六进制表示形式转换为二进制表示形式进行存储，这将使所有“选择”语句都需要转换回十六进制表示......谁知道其中的效率会有多......所以最后只需要切换到 Postgres。XD

如果您确实想切换到 Postgres，如果它们是生产服务器，请在现有服务器上安装它时要非常小心。如...在实际进行迁移之前进行克隆以测试迁移过程。我以某种方式设法杀死了我的系统，因为“安装此软件包将删除大量重要的其他软件包”（我不知道安装程序是如何做出这些决定的）。

或者，如果您准备最终向他们支付大量资金来操作数据库，则可以使用 Microsoft SQL 获得他们的 GUID 等价物......

目前做 UUID 和 MySQL 只是一个坏主意。

# uipickerview - 具有多个文本字段的一个视图中的多个 UIPickerViews

> ID：10917615
> 
> 赞同：1
> 
> 时间：2012-06-06T15:45:50.380
> 
> 标签：uipickerview, textfield

我现在的编码有问题。我想在一个视图中有两个选择器视图，每个选择器中的数据不同。因此，当我单击文本字段时，选择器会出现数据，当我单击另一个文本字段时，选择器会出现不同的数据。我设法创建了选择器，但相同的数据出现在每个文本字段中。我试图做一个分离选择器数据的操作，但我无法让它工作。

```
- (void)viewDidLoad{   
    dataArray = [[NSMutableArray alloc] init];
    [dataArray addObject:@" "];
    [dataArray addObject:@"IG"];
    [dataArray addObject:@"G"];
    [dataArray addObject:@"VG"];
    [dataArray addObject:@"MVG"]; 
}

   - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)picker;{
        return 1;
    }

    - (void)pickerView:(UIPickerView *)picker didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
        currentTextField.text = [dataArray objectAtIndex:row];
        selectedText = currentTextField.text;        
    }

    - (NSInteger)pickerView:(UIPickerView *)picker numberOfRowsInComponent:(NSInteger)component;{
        return [dataArray count];
    }

    - (NSString *)pickerView:(UIPickerView *)picker titleForRow:(NSInteger)row forComponent:(NSInteger)component;{
        return [dataArray objectAtIndex:row];
} 
```

这是我用于选择器的代码，我试图为其他文本字段做一个精确的副本，但数据不同。

这是包含此代码的文本字段的操作：

```
- (IBAction)showPicker:(id)sender {

    picker = [[UIPickerView alloc] init];
    picker.showsSelectionIndicator = YES;
    picker.dataSource = self;
    picker.delegate = self;

    UIToolbar* toolbar = [[UIToolbar alloc] init];
    toolbar.barStyle = UIBarStyleBlackTranslucent;
    [toolbar sizeToFit];

    //to make the done button aligned to the right
    UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                   style:UIBarButtonItemStyleDone target:self
                                                                  action:@selector(doneClicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpaceLeft, doneButton, nil]];

    //custom input view
    textField3.inputView = picker;
    textField3.inputAccessoryView = toolbar;
    textField5.inputView = picker;
    textField5.inputAccessoryView = toolbar; 
    textField7.inputView = picker;
    textField7.inputAccessoryView = toolbar; 
    textField9.inputView = picker;
    textField9.inputAccessoryView = toolbar; 
```

如何继续并将选择器中的其他数据连接到其他文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:43:49.103

1.  创建 2 个数组 - 每个选择器视图一个。在这些数组中，包含用户应该能够从中选择的选项。这可以通过 NSArray 轻松完成。

2.  在 Interface Builder 中设置您的文本字段（即在您的 Storyboard 文件中），并将每个文本字段的 IBAction 连接到视图控制器代码中的函数。

3.  在每个函数中，使用与当前选择器对应的数组内容实例化一个新的 UIPickerView。

4.  用户选择项目后，将文本字段的内容设置为包含在选择器选择的索引中的数组值。

5.  从当前视图中移除选取器。

# r - r 替代“rimage” - 在绘图中显示图形

> ID：10917617
> 
> 赞同：1
> 
> 时间：2012-06-06T15:45:56.173
> 
> 标签：r, graphics, plot

我正在寻找“rimage”的替代品，因为 rimage 不幸已从 Cran 存储库中删除。我想在一个图中显示几个小图像（“png”）。

预先感谢任何好的建议。

鹬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:18:59.757

You can use the `rasterImage` function to plot a single image (after imported and converted to a raster) in the current plot.

You can use the `ms.image` and `my.symbols` functions in the `TeachingDemos` package to use the png as a plotting symbol in a scatterplot (see the example for `ms.image` for reading from the .png file and plotting).

# gnuplot - 使用 GNU plot 在文件中绘制数据列表

> ID：10917619
> 
> 赞同：4
> 
> 时间：2012-06-06T15:46:03.317
> 
> 标签：gnuplot

我有一个文件，文件中的随机值介于 -256 到 +256 之间。每个条目都在一个新行中。我想用 y 轴上文件中的值绘制这个文件。我不知道执行 plot 命令时的条目数。有人知道有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:13:50.010

如果我理解正确，您的文件如下所示：

```
100
-120
248
10
-212
... 
```

（我使用了整数，但浮点数可以正常工作......即使是像“1.e-5”这样的数字也可以）如果是这样的话，你可以很容易地绘制它：

```
plot 'datafile.txt' using 1 
```

x 值将从 0 开始，直到文件中的行数。有关`help datafile using`更多信息，请参阅。

如果您希望所有点都具有相同的 x 值，您可以执行以下操作：

```
plot 'datafile.txt' using (0.0):1 
```

您可能会收到关于 x 轴为零范围的警告（这不是问题——gnuplot 做了正确的事情）。如果您真的想摆脱警告，请在绘图之前（或在绘图时...）设置 xrange

例如

```
set xrange [-1:1]
plot 'datafile.txt' using (0.0):1 
```

或者

```
plot [x=-1:1] 'datafile.txt' using (0.0):1 
```

**编辑**

根据您在下面的评论中所说的，您运行 gnuplot 的脚本如下所示：

```
set terminal png 
set output "waveform-hy1-00000001-20120501-160221.929.raw.png" 
plot 'waveform.txt' with dots # it shouldn't matter, but I always use a using statement just for clarity.
replot        # <--- a replot after a plot is probably not what you want here.
set output "delta-hy1-00000001-20120501-160221.929.raw.png"  #<-- Nothing will be written to this file... 
```

一些评论 - 首先，您确定在绘图之前刷新/关闭输出文件（waveform.txt）和脚本文件（temp）吗？如果输出正在被缓冲，那么当 gnuplot 读取它时，其中一个文件很可能是空的。接下来，在不重置输出文件名的情况下进行绘图和重新绘图不是（通常）您想要的。你想达到什么目的？您可能想要：

```
set terminal png 
set output "waveform-hy1-00000001-20120501-160221.929.raw.png" 
plot 'waveform.txt' using 1 with dots
set output "delta-hy1-00000001-20120501-160221.929.raw.png"
replot 
```

虽然这会在两个不同的文件中生成相同的图。这两个不同文件的目的是什么？还有更多你没有展示的吗？也许如果您粘贴文件的全部内容`temp`以及您正在尝试执行的操作的描述，我们可以提供更多帮助。（此外，您在此脚本中混合了引号——如果您在 c++ 程序中编写脚本，则应检查以确保在创建 temp 时正确地转义了引号）。

最后，你在什么操作系统上？在我没有经验的 Windows 上使用 gnuplot 有很多...

# .net - 在 .Net 应用程序中设置电子邮件标头（返回路径、发件人、邮件 ID）

> ID：10917624
> 
> 赞同：1
> 
> 时间：2012-06-06T15:46:14.920
> 
> 标签：.net, email, header, smtp, return-path

我们正在.Net 中创建一个应用程序，目前正处于最后阶段，需要通过 SMTP 注入电子邮件消息，同时在“电子邮件标头”中设置各种选项。

我们关注的三个价值观是：

*   返回路径*   发件人*   消息 ID

目前在我们的代码中，我们有这个：

```
BodyMessage.Sender = new MailAddress(bounce_address); 
```

（“bounce_address”是我们希望退回的地址。）

此代码似乎同时设置了**Return-Path**和**Sender**。

但是，我们希望这些值*不同*。

有没有我们可以使用的值，这样当我们发送消息时，我们可以将返回路径指定为一件事，而将发送者指定为另一件事？

我们试过这个，但它不起作用：

```
BodyMessage.Headers.Add("Sender", "1234567@example.com"); 
```

该代码完全被忽略了。

有任何想法吗？

对于消息 ID，我们已经尝试过：

```
BodyMessage.Headers.Add("Message-ID", "abcdefgh@sample.com"); 
```

但是，这也被忽略了。

但是，如果我们指定自定义标头值，例如“X-Message-ID”，则此代码有效：

```
BodyMessage.Headers.Add("X-Message-ID", "abcdefgh@sample.com"); 
```

但是，这不是我们想要的，因为我们不想添加额外的 email-header 项目，而是提供主要的 message-id 标头元素。

任何帮助是极大的赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:50:30.337

当我遇到这样的问题时（在他们引入 ReplyTo 集合之前，它曾经只是一个项目），我最终使用了 3rd-party SMTP 库并完全停止使用 .NET 库。我发现基本上，没有办法覆盖默认行为 - 他们明确禁止您自己设置这些标头。（出于某种我无法理解的原因）

[域名服务器](http://dnsmtp.codeplex.com/)

正如该库的作者所承认的那样，它的边缘到处都是粗糙的，在使用它之前我必须自己打磨它。但我最终成功了。

PS。您可以使用任何 .NET 电子邮件库，不一定是 DnSmtp。或者您可以编写自己的 SMTP 客户端（有点乏味，但可能）。

# postgresql - pgsql_fdw 的选项

> ID：10917626
> 
> 赞同：1
> 
> 时间：2012-06-06T15:46:29.160
> 
> 标签：postgresql, postgresql-9.1

我正在探索[pgsql_fdw](http://interdbconnect.sourceforge.net/pgsql_fdw/pgsql_fdw-en.html)模块，我遇到了以下情况：

我有一个本地数据库，它是远程数据库的副本，但数据不同。开发与生产。我想创建一个指向生产版本的外部表。由于文档表明外部表的名称必须是唯一的，因此我决定创建一个 fdw 模式并将所有外部表放在其中。我表演了：

```
create foreign table foreign_table(columna bigint, columnb text)  
server foreign_server; 
```

然而，显然 pgsql_fdw 在完全限定的表名之间使用 1 对 1 映射，当然，foreign_server 上不存在“fdw.foregin_table”，它是“public.foreign_table”，所以我得到：

```
ERROR:  could not execute EXPLAIN for cost estimation  
DETAIL:  ERROR:  schema "fdw" does not exist 
```

在[文档](http://www.postgresql.org/docs/9.1/static/sql-createforeigntable.html)中有一个用于 CREATE FOREIGN TABLE 的选项参数：

```
OPTIONS ( option 'value' [, ...] )  
Options to be associated with the new foreign table.  
The allowed option names and values are specific to each foreign data wrapper  
and are validated using the foreign-data wrapper's validator function.  
Option names must be unique. 
```

我的问题是：pgsql_fdw 的选项是什么？是否有一个特定的选项来指定外部表名而不是假设远程和本地是相同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T18:12:43.230

您需要的选项是：

```
CREATE FOREIGN TABLE your_local_shema.your_local_table (
  field_1 int, field_2 int, ...
)
SERVER foreign_server
OPTIONS (SCHEMA_NAME 'your_remote_schema', TABLE_NAME 'your_remote_table') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:14:25.600

根据要求推广我的评论解决方案以回答：

想出了如何改用 dblink contrib 模块。安装 dblink contrib 模块设置 dblink 连接：

```
select dblink_connect('connection_name', 'host=hostname dbname=fdbname user=user password=secret');
create foreign data wrapper dblink_fdw validator postgresql_fdw_validator;
create server dblink_fdw_server foreign data wrapper dblink_fdw options(hostaddr 'hostname', dbname 'fdbname');
select * from dblink('connection_name', 'select * from public.foreigntable') as foreign_table(columna bigint, columnb text); 
```

参考：[postgresql.org/docs/9.1/static/contrib-dblink-connect.html](http://postgresql.org/docs/9.1/static/contrib-dblink-connect.html)

# .net - .net 中的用户排序方式，数据类型为日期

> ID：10917627
> 
> 赞同：0
> 
> 时间：2012-06-06T15:46:29.480
> 
> 标签：.net, vb.net, datetime, date, sql-order-by

我尝试使用“Order by”来订购从 VB.Net 中最早开始的日期列表。

变量和方法是：

```
Dim SetupStart As DateTime 
Dim SetupTimeList As New List(Of Date) 
```

'方法 p.ReadFieldDateTime 用于连接 SQL 数据库并读取字段 Setup Time

```
SetupStart = p.ReadFieldDateTime("Orders", "Setup Time", record)
SetupTimeList.Add(SetupStart)

Dim SetupTimeListeOrdered = from SetupTime In SetupTimeList
Order By SetupTime 
```

我希望这个代码片段有意义，如果没有任何意义，如果有人能告诉我如何按最早日期升序排列这个列表，我会很高兴。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:51:55.120

您想像这样使用`OrderBy(...)`扩展名`IEnumerable`：

```
Dim SetupTimeListeOrdered = SetupTimeList.OrderBy(Function(d) d) 
```

不过，我不太确定`VB.NET`语法，抱歉。

在 C# 中：`List SetupTimeListOrdered = SetupTimelist.OrderBy(d => d);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:24:11.300

通过测试以下代码，它运行良好，我不确定您用于获取日期值的方法：

Sub Main(args As String()) Dim dtList As List(Of Date) = CreateListofDateTime()

```
 Dim NonOrderedList = From t In dtList

    Console.WriteLine("Non Ordered List")
    For Each item As DateTime In NonOrderedList
        Console.WriteLine(item.ToString())
    Next

    Dim OrderedList = From t In dtList Order By t
    Console.WriteLine("Ordered List")
    For Each item As DateTime In OrderedList
        Console.WriteLine(item.ToString())
    Next
End Sub

Function CreateListofDateTime() As List(Of DateTime)
    Dim dtValue As New DateTime()
    Dim ldtListTosendBack As New List(Of Date)()
    dtValue = DateTime.Now
    ldtListTosendBack.Add(dtValue)

    dtValue = DateTime.Now.AddDays(5)
    ldtListTosendBack.Add(dtValue)
    dtValue = DateTime.Now.AddDays(-5)
    ldtListTosendBack.Add(dtValue)
    dtValue = DateTime.Now.AddDays(-9)
    ldtListTosendBack.Add(dtValue)
    dtValue = DateTime.Now.AddDays(-10)
    ldtListTosendBack.Add(dtValue)
    Return ldtListTosendBack
End Function 
```

# facebook - Facebook 应用程序：从 ID 获取用户名

> ID：10917630
> 
> 赞同：8
> 
> 时间：2012-06-06T15:46:37.217
> 
> 标签：facebook, facebook-apps

我刚刚收到了一个 FB 应用程序项目，我正在尝试在它上线之前清理一些项目。

原始程序员将用户 ID 号存储在数据库中，但不显示它或名称。我想在他们上传的图片下显示用户的名字。

我的代码是`<?php echo $row['user_id']; ?>`，有没有一种简单的方法可以将其转换为用户名？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T15:52:27.263

使用名称字段从 API 调用 id。

```
 https://graph.facebook.com/user_id?fields=name 
```

它应该返回

```
{
   "name": "First Lastname",
   "id": "user_id"
} 
```

将其保存到变量中，然后提取

```
 $user['name']; 
```

欲了解更多信息[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

没有 SDK/访问令牌的示例，

```
$response = file_get_contents("https://graph.facebook.com/4?fields=name");  
$user = json_decode($reponse,true);  
echo $user['name']; 
```

应该打印，

```
'Mark Zuckerberg' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:18:15.013

尝试像这样使用 php graph api：

```
$facebook = new Facebook(array(
   'appId'  => "your appID",
   'secret' => "your app secret",
   'cookie' => true,
));

$answer = $facebook->api("/{$row[user_id]}");
$username = $answer['name'];
print $username; 
```

# jquery - jQuery在选择器内使用带有字符串的变量

> ID：10917641
> 
> 赞同：0
> 
> 时间：2012-06-06T15:47:06.617
> 
> 标签：jquery

此代码打印大约 15 行数据，每行附近都有这个选择框。我需要为每一行捕获用户选择的值，以将其发送到下一个函数。我收到此错误：未捕获的类型错误：对象 # 没有方法“val”。有没有更好的方法来实现这一目标？

```
count = 1;
$.each(data, function(index, element) {
    $('<div class="hd_field">Payment Format: <select name="Payment_Format" id="Payment' + count + '" class="Payment_Format"><option value="CTX" selected="selected">Company to Company</option><option value="PPD">Company to Person</option></select><div id ="Selected_Format' + count + '"></div></div>').appendTo(newDiv3);
    $('select#Payment' + count).change(function() {
        alert(this.val());
        PaymentFormat = $(this).val();
        element.PmtRec.PmtFormat = PaymentFormat;
        $('#Selected_Format' + count).text(PaymentFormat);
    });
    console.log(data);
    count = count + 1;
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:49:55.017

您的错误在这一行被抛出：

```
$('select#Payment'+count).change(function() { 
    alert(this.val()); //Here
    //...
}); 
```

问题是在`change`事件处理程序中，`this`指的是实际的 DOM 节点，而不是 jQuery 对象，并且 DOM 节点不会有`val`方法。如果你想使用，你需要将它传递给 jQuery `val`：

```
$('select#Payment'+count).change(function() {
    alert($(this).val()); //Pass `this` to jQuery
    //...
}); 
```

# c# - 线程数组，一次只有几个活动？

> ID：10917646
> 
> 赞同：0
> 
> 时间：2012-06-06T15:47:31.143
> 
> 标签：c#, winforms, multithreading, .net-4.0, threadpool

如果这是一个简单的问题，我很抱歉，但我非常疲惫，虽然思考得直。我最近设置了线程并且它工作得很好。用户选择要对其执行工作的项目，我`Thread`为他们选择的项目动态创建一个 s 数组，并为每个项目调度一个线程。

但是，我注意到如果选择太多，则文件所在的服务器不会播放得很好。我知道一个事实，我一次只能声明 5 个活动线程，即使有 30 个项目需要工作，但我无法理解它。

PS：如果我描述 ThreadPool 让我知道......我试图让它工作，但有一段时间没有运气，对 .NET 的线程方式很新。

**当前方式：**

```
threadedResults = new List<string>[SelectedItems.Count];
List<string> results = new List<string>();
ThreadSettings tsArgs = (ThreadSettings)args;

for (int i = 0; i < SelectedItems.Count; i++)
{
    threadedResults[i] = new List<string>();
}

Thread[] threads = new Thread[SelectedItems.Count];

for (int i = 0; i < SelectedItems.Count; i++)
{
    KeyValuePair<int, ThreadSettings> threadArgs = new KeyValuePair<int, ThreadSettings>(i, (ThreadSettings)tsArgs);

    threads[i] = new Thread(new ParameterizedThreadStart(DoWork));
    threads[i].Start(threadArgs);
}
for (int i = 0; i < SelectedItems.Count; i++)
{
    if (CommandTask != null)
        threads[i].Join();
    else
    {
        // User Cancelled, abort all threads and break
        for (int j = 0; j < SelectedItems.Count; j++)
        {
            threads[j].Abort();
        }
        break;
    }
}

// Gather all results, format and return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:02:09.927

基本上，你会想在 TPL 中做这样的事情：

```
 // source for cancelling work
        var cxlSource = new CancellationTokenSource();

        // create and schedule tasks to start
        var tasks =
            Enumerable.Range(0, SelectedItems.Count)
                .Select(i => Task.Factory.StartNew(DoWork, yourStateInfo, cxlSource.Token))
                .ToArray();

        // then wait for the results
        Task.WaitAll(tasks); 
```

如果在任何时候，您需要取消任务，您可以请求取消：

```
 cxlSource.Cancel(); 
```

这将阻止任何等待执行的任务开始，并且您的任务可以定期检查令牌本身，以便如果在进行中被取消，它们可以提前中止。

使用 TPL（以及一般的线程）有很多细微差别，但这是一个*粗略*的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:56:34.070

如果你想坚持你的版本，我会声明 Environment.ProcessorCount 线程数，而不是 5（如果你有 2 个处理器，5 个线程中只有 2 个将同时运行）。线程过多会导致系统开销（这可能是您的问题）。

如果没有，请考虑在 .net 4 或 TreadPool 中使用 Task。

# google-maps - Google Maps API v3 将地图重新 定位到标记

> ID：10917648
> 
> 赞同：20
> 
> 时间：2012-06-06T15:47:33.047
> 
> 标签：google-maps, google-maps-api-3, google-api, google-maps-markers, google-maps-api-2

如果标记在地图外，我正在寻找一种方法来重新定位（聚焦）地图。例如，如果您单击不在您的视图区域中的标记... 标记 1：纽约 标记 2：旧金山

在 V2 中我这样做了...但是对于 v3，containsLatLng 需要一个额外的库并且对我不起作用...（请参阅我的另一篇文章： [Google Maps v3 map.getBounds().containsLatLng is not a function](https://stackoverflow.com/questions/10899711/google-maps-v3-map-getbounds-containslatlng-is-not-a-function)）是他们还有其他方法可以聚焦到标记位置吗？

更新：

```
 if ((!map.getBounds().contains(marker.getPosition())) & (showAllCategoryElements == 0)) {
        var newCenterPointLng = (map.getBounds().getCenter().lng() + marker.getPosition().lng()) / 2;
        var newCenterPointLat = (map.getBounds().getCenter().lat() + marker.getPosition().lat()) / 2;

        map.panTo(marker.getPosition());
        //map.setCenter(new google.maps.LatLng(newCenterPointLat, newCenterPointLng));

        if (!map.getBounds().contains(marker.getPosition())){
            map.zoomOut();
        } 
    } 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-06T15:56:44.690

您想要的方法是 contains()，而不是 containsLatLng()。`map.getBounds().contains(marker.getPosition())`

您可以使用地图的 setCenter() 或 panTo() 方法以标记位置为中心：`map.setCenter(marker.getPosition())`或`map.panTo(marker.getPosition())`

因此，如果我正确理解您要执行的操作，它应该如下所示：

```
if ((!map.getBounds().contains(marker.getPosition())) && (showAllCategoryElements == 0)) { //Note the double &  
    map.setCenter(marker.getPosition());  
    //OR map.panTo(marker.getPosition());  
} 
```

# javascript - 选择任何一个单选按钮后，单选按钮选项卡焦点无法正常工作

> ID：10917649
> 
> 赞同：3
> 
> 时间：2012-06-06T15:47:36.327
> 
> 标签：javascript, jquery, html

选择其中任何一个后，我使用单选按钮的选项卡焦点出现问题。请检查这个，例如。[http://jsfiddle.net/muthukumar0705/yGeGr/7/](http://jsfiddle.net/muthukumar0705/yGeGr/7/)

在选择任何单选按钮之前，将光标放在例如的第一个文本框上，然后单击选项卡。选项卡焦点工作正常是移动文本框，单选按钮，文本框单选按钮..但是当我选择任何一个单选按钮时。选项卡焦点不会像上面那样。

我需要的是标签焦点总是像文本框，单选按钮，文本框，单选按钮一样移动......当我选择单选按钮时。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:50:45.307

你应该使用标签索引

```
tabindex="1"
tabindex="2"
etc... 
```

[tabindex 的 W3C 链接](http://www.w3.org/TR/html401/interact/forms.html#h-17.11.1)

# php - php中密码错误登录成功

> ID：10917652
> 
> 赞同：1
> 
> 时间：2012-06-06T15:47:51.187
> 
> 标签：php, password-protection, login-script

我正在创建一个登录页面。下面的代码是用户填写用户名和密码输入字段时的代码。

**但是，如果我输入用户名作为“管理员”和错误的密码，它仍然会接受它并将我重定向到成员页面。**

请注意我刚刚开始使用 PHP。

```
$input['user'] = htmlentities($_POST['username'], ENT_QUOTES);
$input['pass'] = htmlentities($_POST['username'], ENT_QUOTES);

if ($stmt = $mysqli->prepare("SELECT * FROM members WHERE username=? AND password=?"))
{
    $stmt->bind_param("ss", $input['user'], md5($input['pass'] . $config['salt']));
    $stmt->execute();
    $stmt->store_result();

    if ($stmt->num_rows > 0)
    {
        //successful login/set session
        $_SESSION['username'] = $input['user'];
        header("Location: members.php");
    }
    else
    {
        $error['alert'] = "Error: Username/password incorrect!";
        include('views/v_login.php');
    }
}
else
{
    echo "Error: Could not prepare MySqli result.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:50:34.597

```
$input['pass'] = htmlentities($_POST['username'], ENT_QUOTES); 
```

改成

```
$input['pass'] = htmlentities($_POST['password'], ENT_QUOTES); 
```

尽管从逻辑上讲，此错误不应让您使用 bum 密码进入，但它应该拒绝密码与用户名不同的任何尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:33:15.397

只是为了更新..现在已修复，这是我愚蠢的错误用户名和密码在顶部

```
$input['user'] = htmlentities($_POST['username'], ENT_QUOTES);
$input['pass'] = htmlentities($_POST['password'], ENT_QUOTES); 
```

另外，我在 IF ELSE 条件下进行了适当的比较来修复它，如

```
$stmt->num_rows != 0 
```

谢谢大家 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:56:36.043

看了一下，这个贴出来了

改变：

```
$stmt->num_rows > 0 
```

至：

```
$stmt->num_rows == 1 
```

首先，没有关于你的数据库是什么样子的描述，所以谁知道有多少结果。此外，如果每个用户有 1 次登录，则该结果应该只包含 1 行。

# drawing - 为什么重用 GradientStopCollection 会导致异常？（数值不在预期范围内）

> ID：10917653
> 
> 赞同：0
> 
> 时间：2012-06-06T15:47:57.447
> 
> 标签：drawing, silverlight-5.0

我正在使用 Silverlight 在图像上绘制一些形状和文本。这些形状使用一组通用的渐变颜色，因此我有一组预定义的 GradientStopCollections，我打算用它来定义用于填充形状的画笔。只要我最多只使用每个 GradientStopCollections 一次，它就可以工作。如果我再次尝试使用 GradientStopCollections 之一实例化 LinearGradientBrush，它会引发 ArgumentException，说明“值不在预期范围内”。

```
 _yellowFill = new GradientStopCollection();
        _yellowFill.Add(new GradientStop(){ Color = Color.FromArgb(128, 255, 255, 0), Offset = 0 });
        _yellowFill.Add(new GradientStop() { Color = Color.FromArgb(128, 128, 128, 0), Offset = 1 }); 
```

...

```
 _shapeLinearFillBrush = new LinearGradientBrush(_yellowFill, 90);
        ...
        _shapeLinearFillBrush = new LinearGradientBrush(_yellowFill, 90); 
```

上面的最后一行将抛出异常。为什么会抛出此异常，如何使用 GradientStopCollections 定义多个渐变画笔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:30:49.890

我相信这个问题与 Silverlight 缺少可冻结对象有关。如果您使用的是 WPF，这应该不是问题。Silverlight 中无法重用相同的 GradientStopCollection。我认为您甚至不能使用相同的 GradientStop。要解决此问题，您可以在克隆 GradientStopCollection 上创建一个扩展方法，如下所示：

```
_yellowFill = new GradientStopCollection();
_yellowFill.Add(new GradientStop() { Color = Color.FromArgb(128, 255, 255, 0), Offset = 0 });
_yellowFill.Add(new GradientStop() { Color = Color.FromArgb(128, 128, 128, 0), Offset = 1 });

_shapeLinearFillBrush1 = new LinearGradientBrush(_yellowFill.Clone(), 90);
_shapeLinearFillBrush2 = new LinearGradientBrush(_yellowFill.Clone(), 90);

public static GradientStopCollection Clone(this GradientStopCollection stops)
{
    var collection = new GradientStopCollection();

    foreach (var stop in stops)
        collection.Add(new GradientStop() { Color = stop.Color, Offset = stop.Offset });

    return collection;
} 
```

# android - 如何在 WP7 和 Android 之间进行通信（任何库？）

> ID：10917654
> 
> 赞同：1
> 
> 时间：2012-06-06T15:47:59.393
> 
> 标签：android, wifi, windows-phone-7.1, communication

我想在移动设备之间的本地 WIFI 网络上创建多人游戏。WP 有一个 NetworkSession 对象，它可以处理通信（尤其是游戏通信），但仅限于 WP 设备之间（当然）。是否有任何库可以很好地替代此 NetworkSession 并且还支持 WP-Android 通信？我在这个领域是真正的“新手”，因此我找不到任何东西。还是只有一种解决方案 - WP 和 And 之间的通信。只用 Sockets 一些如何？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:44:01.970

您可以使用 UDP 在双方发送和接收数据。我将为您提供 Windows 端的链接。

[示例应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286407%28v=vs.92%29.aspx)

[套接字概述](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.92%29.aspx)

[多人游戏示例](http://blogs.msdn.com/b/rickyt/archive/2011/06/15/windows-phone-peer-to-peer-multiplayer-game-using-sockets-in-xna.aspx)

最后一个对你特别有用。您可以轻松找到适用于 Android 的类似示例。

# python - sed 替换与 python 替换

> ID：10917657
> 
> 赞同：3
> 
> 时间：2012-06-06T15:48:09.597
> 
> 标签：python, sed

输出的格式是相同的，只是使用 python 时，输出在每个字符串之间添加一个新行。知道为什么以及如何使用 sed 做到这一点吗？

```
sed 's:\x01: | :g'

01.06.2012 07:51:55.135 | 3732 | INFO | xxx | 8=FIX.4.2 | 9=157 | 35=V | 56=xxx | 49=xxx | 52=20120601-07:51:54 | 34=40 | 262=VMD1338537114945 | 263=1 | 264=0 | 265=1 | 
01.06.2012 07:51:55.135 | 3732 | INFO | xxx | 8=FIX.4.2 | 9=157 | 35=V | 56=xxx | 49=xxx | 52=20120601-07:51:54 | 34=41 | 262=VLT1338537114945 | 263=1 | 264=1 | 265=1 | 

for line in sys.stdin:
    print line.replace("\01", " | ")

01.06.2012 07:51:55.135 | 3732 | INFO | xxx | 8=FIX.4.2 | 9=157 | 35=V | 56=xxx | 49=xxx | 52=20120601-07:51:54 | 34=40 | 262=VMD1338537114945 | 263=1 | 264=0 | 265=1 | 

01.06.2012 07:51:55.135 | 3732 | INFO | xxx | 8=FIX.4.2 | 9=157 | 35=V | 56=xxx | 49=xxx | 52=20120601-07:51:54 | 34=41 | 262=VLT1338537114945 | 263=1 | 264=1 | 265=1 | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:57:15.743

我不是`sed`专家，但您可以使用以下命令在 sed 的每一行末尾添加一个换行符：

```
 sed -e 's/$/\n/g' 
```

这有效，因为`$`匹配行尾。请注意，您可以将多个`sed`命令串在一起`-e`（正如 Michael Mrozek 所指出的——`man sed`有关更多信息，请参阅）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:57:53.280

Add a second substitution that replaces the end of the line with a newline: `s/$/\n/`. Since you have two patterns now, you need to use `-e`:

```
sed -e 's:\x01: | :g' -e 's/$/\n/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:24:39.060

这可能对您有用：

```
sed '/\x01/{s// | /g;G}' file 
```

或者，如果您只想为每一行添加一个换行符：

```
sed G file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:52:02.863

打印添加一个新行试试这个

```
sys.stdout.write(line.replace("\01"," | ")) 
```

# windows - 连接到 Windows 7 上的 Git 守护程序出现“由对等方重置”错误

> ID：10917664
> 
> 赞同：0
> 
> 时间：2012-06-06T15:48:29.307
> 
> 标签：windows, git, git-daemon

我在 MinGW 的 Win7 (Ultimate - x64) 上运行 Git 守护进程。当我第一次启动守护程序时（就像它自上次重新启动以来第一次运行一样），我可以从远程计算机上执行服务器上的任何命令而不会发生意外。

但是，一段时间后，命令将失败并显示`fatal: read error: Connection reset by peer`. 我尝试重新启动守护程序，重新启动与网络的连接，并禁用和启用我的无线适配器。唯一的解决方案是重新启动。

我打开了详细信息，并且守护程序看到了传入连接。从输出来看，服务器似乎正常处理命令：

```
[7232] Connection from 192.168.2.169:60163
[7232] Extended attributes (19 bytes) exist <host=192.168.2.99>
[7232] Request upload-pack for '/asterisk-config-client'
[2964] [7232] Disconnected 
```

通常，我从计算机上的虚拟机调用任何 Git 命令。所以，我尝试在本地运行命令（我可以在没有 MinGW 的情况下使用 Git，但我不想这样做）但仍然遇到同样的错误。我什至尝试在 MinGW 之外启动守护进程（不重新启动我的计算机），但没有成功。

据我所知，听起来套接字绑定搞砸了。但我不知道如何在 Windows 上清除套接字或类似的东西。在管理方面，我喜欢 Linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:03:08.903

Windows firewall is known to cause this error. try disabling it and see if it improves.

# javascript - html5 画布 - 更新文本

> ID：10917665
> 
> 赞同：2
> 
> 时间：2012-06-06T15:48:32.573
> 
> 标签：javascript, html, canvas

这是我的项目：http: [//jsfiddle.net/fknjz/17/](http://jsfiddle.net/fknjz/17/)

当我在画布下输入文本框并单击“更新”时，它会起作用并将文本添加到画布中。但是每次我单击更新时，它都会在之前输入的内容上添加文本框内容。所以画布中的文本开始相互堆叠。

我需要修改画布中的文本，以便当我单击更新时，它实际上会更新文本，而不是在旧文本上创建新的文本行。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T16:22:54.503

请记住，画布只是一堆像素：当您调用 时`fillText`，画布看不到字符，它看到的是一组像素。此外，作为一个不同的组，该组像素会立即丢失——无法向画布询问“请删除我刚刚添加的那组特定像素”。

您的选择是：

*   使用[clearRect](https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#clearRect%28%29)擦除绘图的矩形部分。

*   用于`canvas.width = canvas.width;`重新初始化画布的像素状态。这需要您重新绘制整个画布，同时`clearRect`为您提供更高的精度。

对于未来的工作，您可能会考虑使用[画布绘图库](https://encrypted.google.com/#q=js+canvas+library)，该库可以维护绘图组件的状态并允许您删除或更改特定元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:56:28.693

您可以像这样清除画布：

```
canvas.width = canvas.width; 
```

请参阅更新的[小提琴](http://jsfiddle.net/fknjz/22/)。请注意，由于画布已完全清除，因此每次都需要重新绘制图像。

或者，正如 apsillers 和 Joceyln 所建议的，使用`clearRect`画布的方法。但是，这将要求您计算要清除的矩形区域，该区域可能需要根据用户输入的文本量而有所不同，并且会删除您在背景中绘制的图像部分（可能不是如果它总是是白色背景，这是一个问题）。

# jquery - 如何在 Nivo 滑块中设置单个图像的宽度和高度？

> ID：10917668
> 
> 赞同：1
> 
> 时间：2012-06-06T15:48:42.337
> 
> 标签：jquery, nivo-slider

我正在使用一些我想要没有宽度或高度的图像。换句话说，我想删除为滑块中的每个图像提供的自动生成的 CSS 属性，因为在页面上的 DOM 中包含“宽度”和“高度”会使图像由于某种原因看起来像素化。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:16:30.117

与其去掉 CSS，不如这样显示图像： 1) 如果图像尺寸大于屏幕尺寸（图像查看器尺寸），您可以随意显示。2) 但是，如果图像尺寸小于屏幕尺寸（图像查看器尺寸），则以实际尺寸显示。

# delphi - 为什么 OnEditError 或 OnPostError 不能捕获 TClientDataSet 中的无效用户条目？

> ID：10917671
> 
> 赞同：4
> 
> 时间：2012-06-06T15:49:01.263
> 
> 标签：delphi, delphi-xe2, tclientdataset

我有一个通过一些数据源附加到 TDBGrid 的内存数据集。问题是，每当用户在数字字段中输入减号并按 ENTER 或导航到另一条记录时，都会触发 AV（验证错误）。我无法从 TDBGrid 或 TClientDataSet（OnEditError、OnPostError）中捕获 AV。

我在这里做错什么了吗。如果没有，是否有人有解决方法？

使用 Delphi XE2 Enterprise，第 4 次更新；最新的 MIDAS.DLL；目标平台：Win64。

==================================================== ==============================

请尝试以下方法：

1- 创建一个新的 VCL 应用程序/表单，并将对象：TClientDataSet、一个 TDBGrid 和一个 TDataSource 添加到表单中。ClientDataSet 未附加到任何数据库（内存中）

2- 向 Table1（TClientDataSet）添加一个持久的数字字段。

3-链接上述三个对象。持久字段的列应该出现在 TDBGrid 上。

4- 在主窗体的 OnShow 方法中添加以下行：

Table1.Active := 假；

表1.创建数据集；

Table1.Active := 真；

5- 运行您的程序并在数字字段列中键入减号，然后按 Enter。

检查 AV，然后尝试将 OnEditError 和/或 OnPostError 事件处理程序添加到 Table1 以捕获 AV。您不能中止帖子。意思是，AV 会发生，你只能使用 Application.OnException 处理程序来捕获它。这不好。假设您的应用程序包含许多表单和例程，而不是更高级别，您应该能够在程序运行的级别上执行某些操作。

我希望我的问题更清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:31:00.237

正如 Ken 所说，没有示例代码很难为您提供帮助。所以我无法直接回答你的问题，但是通过一些提示你可能能够自己弄清楚。所以我要试着教你钓鱼。;)

我确实对 Delphi 3 和 6 中的 TClientDataSet 有相当多的经验。我怀疑事情已经发生了很大的变化。另外，我将更多地关注技术，以帮助您朝着正确的方向发展。

首先，确保使用 Debug DCU 进行编译，以便在 VCL 代码中获得断点。不要害怕阅读并单步执行该代码——这是一种很好的学习方式。此外，您还可以看到 Borland/CodeGear/Embarcadero 在其丑陋的荣耀中所犯的错误。

我假设您已经启用了 Stop on Exceptions（因此您知道自己特别遇到了 AV 错误）。

做你的测试。当您获得您的 AV 时，您可能会出现在 DbClient.pas（或者可能是较低级别的单元之一）中。

通过调用堆栈寻找一个位置，您在**try..except块的****try**部分中，该块要么吞下异常，要么短路到另一个处理程序，然后吞下它。

 **注意： DbClient.pas 中充斥着以下错误代码的大量实例：

```
except //swallowing or squashing exceptions is 
end;   //very dangerous and should be avoided.

except
  //short-circuiting to Application.HandleException (usually informs the user)
  //but is not much better. The point is the rest of the program up the 
  //call-stack remains blissfully unaware that something went wrong.
  Application.HandleException(Self);
  Action := raAbort;
end; 
```

> 旁注：仅仅因为 Borland 做到了，并不意味着它是好的做法。你和其他许多人已经并将为此而焦头烂额。

一旦你发现了这一点，你就成功了一半。您现在知道为什么您没有被告知 AV。
现在，在构成该调用堆栈一部分的代码中的某处将成为您希望如何处理错误的线索。您还可以在 VCL 代码中稍早放置一个断点，以便您可以单步执行以查看导致异常的事件序列。由于您特别提到了 AV（访问冲突），因此请查找引用**nil**的对象。

D5 DbClient.pas 的以下代码片段中可能导致问题的一个示例

```
 FOnReconcileError(DataSet, E, UpdateKind, Action);
  finally
    E.Free;
  end;
except
  Application.HandleException(Self);
  Action := raAbort;
end; 
```

从上面可以看出，某些情况需要您实现 OnReconcileError 事件处理程序。没有它，dll就不会被回调到上面的代码片段中，许多错误都被悄悄地踢到地毯下，让你摸不着头脑。

我对 TClientDataSet 的经验是，您必须做一些额外的事情才能“正确”使用它。这在文档中并不是特别明显。虽然一旦你弄清楚了你应该做的所有点点滴滴，如何做的例子就更好了。

不幸的是，我对所有这些事情的记忆有点模糊。所以这是一个非常**粗略**的指南，可能缺少很多。

*   考虑使用 OnReconcileError 事件处理程序。
*   考虑实现一个 UpdateProvider 对象。
*   您提到将其用作内存数据集，因此您可能正确使用了 CreateDataSet。但是，如果我没记错的话，您有 2 个用于指定字段的选项，并且一些更精细的属性有点挑剔。
*   *无关提示*：注意字符串字段的长度，TClientDataSet 过去（并且可能仍然）以类似于短字符串的方式占用内存。

### 编辑

根据问题中的其他信息并使用上述技术，您将收到从以下方法引发的 EDatabaseError。

```
procedure TIntegerField.SetAsString(const Value: string);
var
  E: Integer;
  L: Longint;
begin
  if Value = '' then Clear else
  begin
    Val(Value, L, E);
    if E <> 0 then DatabaseErrorFmt(SInvalidIntegerValue, [Value, DisplayName]);
    SetAsInteger(L);
  end;
end; 
```

在调用堆栈的上层，您将获得以下方法，该方法提示如何解决问题。

```
procedure TField.SetEditText(const Value: string);
begin
  if Assigned(FOnSetText) then FOnSetText(Self, Value) else SetText(Value);
end; 
```

**此外，如果您一直跟踪调用堆栈直到KeyPress**，您会注意到根本不涉及任何数据集或网格代码。

您尝试在 OnPost 错误中处理错误的尝试无效的原因是您没有接近尝试发布您的记录。您收到字段验证错误，处理该错误的地方是在现场。

回到提示如何解决错误 - 您必须为该字段实现 OnSetText 事件。

**但是**，我建议不要这样做。开箱即用的行为是完全可以接受的！用户收到一条错误消息，说明他们做错了什么，他们有机会修复它并重试。如果他们改变主意，他们可以点击 Escape 并取消编辑。**

# javascript - 单击后退按钮时，强制浏览器将用户带到页面的顶部？

> ID：10917673
> 
> 赞同：0
> 
> 时间：2012-06-06T15:49:11.123
> 
> 标签：javascript, jquery, html, browser

当点击后退按钮时，用户不仅会被带到前一页，还会被带到他/她在来到当前页面之前所在的页面部分。至少这是 Firefox 中的行为。

因此，例如，如果您在页面底部并单击其中一个页脚链接，然后单击后退按钮，您将被带到上一页的页脚部分。

有没有办法强制浏览器忽略用户所在页面的哪个部分，每次单击后退按钮时都将它们带到上一页的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:51:18.333

添加这个：

```
 <script>
    $(window).load(function(){$('html, body').animate({scrollTop:0}, 'fast');});
   </script> 
```

但我同意 Steve 和 Bathz 的观点：检查您的网页是否需要它，因为用户不喜欢更改浏览器的功能。

# macos - 从 mac 客户端搜索 nfs 网络卷

> ID：10917679
> 
> 赞同：0
> 
> 时间：2012-06-06T15:49:33.080
> 
> 标签：macos, search, cluster-computing, nfs

被问到：Mac OSX SL 或 Lion 用户如何在集群中搜索特定文件 (foo.txt)

“从集群中，您需要对所需文件运行某种形式的递归查找。例如，使用“查找”。

```
 RAM-1# find /ifs |grep test.txt
    /ifs/Elements/avid2test.txt
    /ifs/Elements/test.txt 
```

我建议联系 Apple 支持，了解他们建议从 Mac 客户端本身搜索远程文件系统上的文件”

好的，这很好，但我不希望用户使用 CLI ！！！有人知道一个好方法（非CLI）吗？聚光灯不是一种选择。BTW 集群大约 80TB

# html - Zen Code 为数独求解器创建 html 布局

> ID：10917683
> 
> 赞同：0
> 
> 时间：2012-06-06T15:49:57.633
> 
> 标签：html, css, emmet

我正在 html/css/js 中制作数独求解器，我要的布局是：主容器 div 。. . 结束主容器 div

我在禅宗代码 div#container>input:text*81 中已经做到了这一点，但是如果我尝试添加一个 id 它不起作用 div#container>input:text*81#i$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:59:15.823

试试这个

```
div#container>input:text#$*81 
```

# javascript - jquery获取选中复选框的索引

> ID：10917686
> 
> 赞同：1
> 
> 时间：2012-06-06T15:50:18.613
> 
> 标签：javascript, jquery

我有一些这样的 HTML：

```
<div id="Myclass">

 <div class="Wrapper">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
 </div>

 <div class="Wrapper">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
    <input type="checkbox" class="SomeCheckboxClass">
 </div>

</div> 
```

我想找到所选文本框的索引（如果有）。

现在，我写了这个：

```
$('#MyClass .Wrapper').each(function () {

    Index = 0;

    $(this).find('.SomeCheckboxClass').each(function () {
        if ($(this).attr('checked')) {
            Index = $(this).index();
        }
    });

    SomeFunction(Index);
}); 
```

有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:54:11.950

您可以使用`.map`：http: [//jsfiddle.net/p4nD7/1/](http://jsfiddle.net/p4nD7/1/)。

```
$("#Myclass .Wrapper :checkbox:checked").map(function() {
  return $(this).index();  // index in parent
}).each(function() {
  "use strict";  // no object for `this` but just the primitive value
  SomeFunction(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:52:00.897

```
$('#Myclass .Wrapper').each(function() {
    var Index = $('.SomeCheckboxClass:checked', this).index();
    SomeFunction(Index);
}); 
```

**[​演示](http://jsfiddle.net/QStkd/159/)**

你也可以使用`map()`

```
$('#Myclass .Wrapper').map(function() {
    var Index = $('.SomeCheckboxClass:checked', this).index();
    SomeFunction(Index);
}); 
```

**[演示](http://jsfiddle.net/QStkd/158/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:53:30.077

为什么不这样做：

```
$('.checkbox').click(function() {
    if($(this).attr('checked')) {
        SomeFunction($(this).index());
    }
}); 
```

# javascript - 将 Jquery 应用于生成的内容

> ID：10917690
> 
> 赞同：0
> 
> 时间：2012-06-06T15:50:45.273
> 
> 标签：javascript, jquery

希望有人能指出我正确的方向。

我有这个代码：

```
//nextButton processing
    $('.nextButton').on("click", function(){
    //$('.nextButton').click(function(){

         var querystring = $("#formStep").serialize() + "&step=" + step + "&session=" + session;
        // Ajax Call
        $.ajax({
                type: "POST",
                data: querystring,
                url: "includes/processnext.php",
                dataType: 'json',
                success: function(msg){
                    $('.result').append(msg.answerRow);

                }
            });

  // End Ajax Call
    }); 
```

现在这适用于那里的第一个 .nextbutton，但 ajax 结果用下一个下一个按钮替换它。

为了解决这个问题，我尝试使用 Jquery .on() （旧代码注释掉），但这似乎也没有解决它。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:53:58.577

将`click`事件处理程序附加到容器元素，如下所示：

```
$('#container').on("click", ".nextButton", function(){ 
```

然后，容器元素将“捕捉”点击事件，因为它从`.nextButton`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:57:03.270

你是对的，`.on()`它的方式，但你缺少最后一步。您必须将事件委托给父级。

这样，任何具有该类的对象都将处理 click 事件。

```
$('#parent').on('click','.nextButton',function(e){...}); 
```

更多信息 --> [http://api.jquery.com/live/](http://api.jquery.com/live/)

# jquery - 让 Fancybox 工作

> ID：10917696
> 
> 赞同：0
> 
> 时间：2012-06-06T15:50:55.810
> 
> 标签：jquery, fancybox

我一定是在这里失明了，我一直在努力让 Fancybox 触发！我已经阅读并重新阅读了文档，甚至复制了他们使用的确切代码，但 Fancybox 拒绝触发......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="EN:UK"> 
<head> 
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" /> 
<meta name="description" content="" /> 
<meta name="keywords" content="" /> 
<meta name="robots" content="index,follow" /> 
<link type="text/css" rel="stylesheet" href="styles/style.css" />
<link rel="stylesheet" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.0.6"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".various").fancybox({
maxWidth    : 800,
maxHeight   : 600,
fitToView   : false,
width       : '70%',
height      : '70%',
autoSize    : false,
closeClick  : true,
openEffect  : 'none',
closeEffect : 'none'
});
});
</script>
<title>Title</title>
</head>

<body>

<div id="wrapper">
<div class="menu">
    <div id="box1_and_2">
        <a class="various" data-fancybox-type="iframe" href="http://fancyapps.com/fancybox/demo/iframe.html">
        <div id="box1" class="link">
            <img src="images/box1.jpg" alt="" class="fade" />
            <div class="info">
                <p>Title</p>
                <img src="images/info.png" alt="" />
            </div>
        </div> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:56:46.200

您在调用 jquery 之前调用了 fancybox js。在结束正文标记之前添加任何其他脚本也是一种很好的做法。我对此进行了测试，并且可以正常工作。:)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="EN:UK">

    <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"
    />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="robots" content="index,follow" />
    <link type="text/css" rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.0.6"
    type="text/css" media="screen" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.0.6"></script>
    <title>Title</title>
</head>

<body>
    <div id="wrapper">
        <div class="menu">
            <div id="box1_and_2">
                <a class="various" data-fancybox-type="iframe" href="http://fancyapps.com/fancybox/demo/iframe.html">
    <div id="box1" class="link">
        <img src="images/box1.jpg" alt="" class="fade" />
        <div class="info">
            <p>Title</p>
            <img src="images/info.png" alt="" />
        </div>
    </div>
    <script type="text/javascript">
$(document).ready(function() {
$(".various").fancybox({
maxWidth    : 800,
maxHeight   : 600,
fitToView   : false,
width       : '70%',
height      : '70%',
autoSize    : false,
closeClick  : true,
openEffect  : 'none',
closeEffect : 'none'
});
});
</script>
    </body>
    </html> 
```

# jquery - jQuery拖放防止

> ID：10917705
> 
> 赞同：1
> 
> 时间：2012-06-06T15:51:22.310
> 
> 标签：jquery, drag-and-drop

我有一个简单的绘图应用程序，您可以使用它为表格的单元格着色，如果按住鼠标按钮，您可以在移动鼠标时为多个单元格着色。请参阅此处的示例：http: [//jsfiddle.net/mFzkG/21/](http://jsfiddle.net/mFzkG/21/)

它运作良好，唯一的问题是，在某些情况下，在鼠标按住时，浏览器认为我正在拖放，所以它不会在 mouseup 时停止，只有当我用鼠标单击时。

有谁知道防止拖放功能的方法或知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:55:50.487

我相信这应该这样做：

```
 $('td').mousedown(function(e) {    
                e.preventDefault();
                isMouseDown = true;
            }); 
```

您可能还想将您的`mouseup`事件添加到整个主体，以便如果鼠标移出框然后松开按钮，它仍然会重置。

```
 $("body").mouseup(function() {
                isMouseDown = false;
            }); 
```

附带说明一下，不要在 jsfiddle 中放置`html`和标记或在 css 窗格中放置标记。`body``style`

# javascript - 如何从 Ember.js 中另一个 ArrayController 的选定值更新一个 ArrayController 的内容

> ID：10917706
> 
> 赞同：6
> 
> 时间：2012-06-06T15:51:24.650
> 
> 标签：javascript, arrays, binding, ember.js, observers

我在 ember.js 中有以下问题。子控制器依赖于父控制器中的选定值来确定其内容。在数据库中，孩子有一个 parent_id 参考。

```
App.parentsController = Em.ArrayController.create({
    content: [],
    selected: null
});

App.sonsController = Em.ArrayController.create({
    // the value of content depends on the id of
    // the selected item in the parentsController
    content: [], 
    selected: null
});

App.daughtersController = Em.ArrayController.create({
    // the value of content depends on the id of
    // the selected item in the parentsController
    content: [], 
    selected: null
}); 
```

我宁愿解决这个问题，而无需 parentsController 了解其他控制器的任何信息。这应该可以通过观察者、绑定甚至通过计算来实现，但我不知道从哪里开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T16:32:50.127

您可以使用绑定系统。`sonsController`需要观察`parentsController.selected`属性，然后更新其内容。

这是一个如何做到这一点的示例：

```
App.parentsController = Em.ArrayController.create({
    content: [],
    selected: null
});

App.sonsController = Em.ArrayController.create({
    parentControllerBinding: 'App.parentsController',
    content: [], 

    updateContent: function() {
        var selected = this.getPath('parentController.selected');
        var newContent = Ember.A();
        newContent.pushObject(selected);
        this.set('content', newContent);
    }.observes('parentController.selected')
}); 
```

这[是相关的 jsfiddle](http://jsfiddle.net/Ef2Gu/)。

注意：您也可以直接绑定选定的属性：

```
App.sonsController = Em.ArrayController.create({
    parentSelectedBinding: 'App.parentsController.selected',
      ...

    updateContent: function() {
       ...
    }.observes('parentSelected')
}) 
```

# c# - ASP.net / c# SQL 代码通过文本框提交

> ID：10917713
> 
> 赞同：2
> 
> 时间：2012-06-06T15:51:37.110
> 
> 标签：c#, asp.net, sql

我是asp.net / c#的相对论新手。我写了几个应用程序，所以我可以解释语言，但我不流利。

基本上每年我们都有学生进入大学，我希望能够有一个文本框，我可以将 SQL 代码放入其中，它会自动更新数据库。当然，此页面将受到保护。

但是像这样的东西。

```
(,'11JB0666@gmail.org', '12', 'Joe', 'Bloggs', 'Joseph Bloggs', '11JB0666') 
```

所以这将是sql脚本中VALUES的代码。

这可能吗？

我确实认为我可以使用这样的东西......

```
SqlConnection conn = new
 SqlConnection(ConfigurationManager.ConnectionStrings["ExtensionActivitesConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand(" Insert into dbo.Names (Email,Year,FirstName,LastName,Name,Username) VALUES (@SQL)", conn);
    cmd.Parameters.AddWithValue("@SQL", SqlTextBox.Text);

    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close(); 
```

任何帮助或建议将非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T15:53:20.470

这是一种**可怕**且具有潜在危险的方法。我建议您创建一个表单来收集您需要的信息，其中包含单独的、正确标记的字段。

由于您只收集少量数据，因此表单应该非常简单。在将数据插入数据库之前，它应该包括客户端和服务器端验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:58:23.453

That won't work with a parameterized query like you're doing -- the single quotes will be escaped and the SQL sent to the server will not be valid. That pattern is used to avoid [SQL injection attacks](http://en.wikipedia.org/wiki/SQL_injection).

You would be better off creating a complete form with all the fields you want and passing the individual fields to your SQL statement. Create a separate TextBox for each field you want to insert into your `Names` table. In my example below, I have named them emailTextBox, yearTextBox, firstnameTextBox, lastnameTextBox, nameTextBox, and usernameTextBox.

Also, although I am providing a very basic example, you should probably *validate* each field before you actually send the data to the database. You should validate to ensure required fields have values as well as for format -- email for example has a very specific format, and year should probably be a number. For more information on validation, see the following:

[http://msdn.microsoft.com/en-us/library/7kh55542.aspx](http://msdn.microsoft.com/en-us/library/7kh55542.aspx)

Example:

```
var qry = "Insert into dbo.Names (Email,Year,FirstName,LastName,Name,Username) " + 
          "VALUES (@email, @year, @firstname, @lastname, @name, @username)";    
var cmd = new SqlCommand(qry);
cmd.Parameters.AddWithValue("@email", emailTextBox.Text);
cmd.Parameters.AddWithValue("@year", yearTextBox.Text);
cmd.Parameters.AddWithValue("@firstname", firstnameTextBox.Text);
cmd.Parameters.AddWithValue("@lastname", lastnameTextBox.Text);
cmd.Parameters.AddWithValue("@name", nameTextBox.Text);
cmd.Parameters.AddWithValue("@username", usernameTextBox.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:55:17.783

从您的代码中可以清楚地看出，这些值几乎已定义并且没有任何动态，因此您应该提供适当的表格来输入数据。

这种方法很危险，并且容易发生 SQL 注入。

# php - 如何避免在 PHP 的 While 循环中使用 MySQL 查询

> ID：10917715
> 
> 赞同：4
> 
> 时间：2012-06-06T15:51:50.563
> 
> 标签：php, mysql, database, loops, while-loop

我有一个输出类列表的while循环。在类数据库中，教师姓名由用户数据库中的教师 ID 确定。

这是我的数据库结构。

```
Classes Database
-----------------------------
ID       CLASS              TEACHER
1        product design     3

User Database
-----------------------------
ID       NAME
3        John Doe 
```

因此，在列出我的课程时，我需要将“3”转换为“John Doe”。

这是我当前的代码：

```
<?php 
  $classdetails = mysql_query("SELECT * FROM class");
  while($class = mysql_fetch_array($classdetails)) {
    $marklist_class = $class['class'];
    $marklist_teacher = $class['teacher']; //This is a userid                                   

    //------Somewhere here i need to get the userid and look it up in the user database
    if($marklist_class=="") {

    } else {
      echo $marklist_class . ' ' . $marklist_teacher;}
    }
  }
?> 
```

我知道只是将另一个 mysql 查询放在那里会降低性能并且不建议这样做，所以我将如何在不向 while 循环中添加查询的情况下查找每一行的用户数据库。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:55:02.277

您可以使用连接查询来一次获取您需要的所有信息。然后在您的应用程序中，您可以对其进行排序并相应地显示。例如

```
SELECT Classes.class, Users.Name
FROM Classes JOIN Users on Classes.Teacher = Users.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:55:21.027

您想在 mysql中使用[JOIN 。](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
SELECT * FROM class c JOIN user u ON u.ID = c.TEACHER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:56:15.593

您可以在初始查询中使用 JOIN。

```
Select c.id, c.class, c.teacher, u.name from class c join user u on u.id = c.teacher 
```

这将在一个查询中返回 Class 中的所有列，以及 User 中匹配的教师姓名列。

# iphone - 如何删除 Core Data 存储中除一个对象之外的所有对象？

> ID：10917720
> 
> 赞同：1
> 
> 时间：2012-06-06T15:52:03.380
> 
> 标签：iphone, objective-c, core-data, restkit

有没有一种有效的方法可以删除 Core Data 存储中除一个或几个对象之外的所有对象？我们当前的解决方案是删除整个存储（使用`RKObjectStore.deletePersistantStore`-- 我们使用 RestKit）并重建对象，但这不是最佳的，因为它涉及额外的服务器请求。理想情况下，会有一些很好的方法将对象从存储中“分离”，转储存储，然后重新插入。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:05:15.250

您可以先获取对象的数量，然后再少取一个：

```
NSInteger count = [self.managedObjectContext countForFetchRequest:fetchRequest error:nil];
fetchRequest.fetchLimit = count-1; 
```

执行获取，遍历结果并删除它们。

您还可以通过使用 sqlite 框架向存储文件发送`vacuum`查询来减小数据库大小，但如果无论如何它会再次填满，这并不是必需的。

# iis-7 - IIS 7 上的 Razor 网站

> ID：10917723
> 
> 赞同：0
> 
> 时间：2012-06-06T15:52:21.963
> 
> 标签：iis-7, razor, web, webserver

我使用 Razor (Microsoft WebMatrix) 开发了一个网站，现在我想让它在 Intranet 上可用。我的服务器运行的是 Windows Server 2008 Standard。问题是，当我尝试访问该网站时，我收到以下错误：HTTP 错误 403.14 - 禁止，Web 服务器配置为不列出此目录的内容。

如果有人以前见过这个错误或知道如何解决它，请告诉我。我在论坛上发现了很多类似的问题，但没有一个解决方案对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:28:52.223

它工作正常，我只需将下一行添加到 web.config：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

# google-app-engine - Google App Engine 环境下通过 Google API Java Client 访问 Google Data API

> ID：10917726
> 
> 赞同：0
> 
> 时间：2012-06-06T15:52:33.983
> 
> 标签：google-app-engine, google-docs-api, google-api-java-client, google-data-api

几乎所有内容都在标题中，我的问题是：是否有任何更新的教程/示例/清晰文档可以在 Google App Engine 环境下通过 Google API Java 客户端执行 Google Data API 访问？

我尝试使用这些链接以及 Stackoverflow 中的其他一些链接：

[官方文档](http://javadoc.google-api-java-client.googlecode.com/hg/1.9.0-beta/index.html)

[Google 数据 API 示例](http://code.google.com/p/google-api-java-client/wiki/APIs#Google_Data_APIs)

官方谷歌组及其问题

...

但是在 App Engine 的情况下（即 HTTP 通信受到限制）和通过 Google Data API 访问 Google Documents List API 的情况下，我找不到任何与 API 的最新版本相对应的示例。

所以目前我正在摸索......我所知道的是我必须使用 URLFetch 因为 Google App Engine。此外，我按照第二个链接创建了我的类来翻译 JSON<->XML，但是由于 AtomParser 不再存在，我不知道如何使用 AtomPatchContent 来替换它......

请问有人遇到过这种情况吗？你有帮助吗？

干杯，

Ricola3D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:54:56.387

请参阅以下文章（除了评论中@alex 指出的那篇文章）： [Retrieving Authenticated Google Data Feeds with Google App Engine (Java)](https://developers.google.com/appengine/articles/java/retrieving_gdata_feeds)

这将向您展示如何从 App Engine 对 Document List API 进行经过身份验证的调用。

请注意，文档列表 api (GData) 的库与您在问题中链接的库 (Google API/JSON) 不同。

# c++ - QGroupBox中的QScrollArea

> ID：10917727
> 
> 赞同：0
> 
> 时间：2012-06-06T15:52:37.220
> 
> 标签：c++, qt, qt4, qwidget, qscrollarea

我正在尝试实现以下架构：

*   QGroupBox --> 设置布局
    *   QVBoxLayout --> addWidget
        *   QScrollArea --> setWidget
            *   QWidget --> 设置布局
                *   QVBoxLayout --> addWidget
                    *   我的小部件（Mesures）

我正在寻找的结果是有一个带有滚动区域的组框，里面有我所有的小部件。但是当我尝试实现这一点时，滚动区域中没有任何内容。

这是我所拥有的：http: [//imgur.com/SgQkJ](http://imgur.com/SgQkJ)

编辑：这就是我删除滚动区域并直接将我的小部件放入 gorupbox [http://imgur.com/iuTnV时所拥有的](http://imgur.com/iuTnV)

这是我的代码：

测量.h

```
#ifndef MESURE_H
#define MESURE_H

#include <QWidget>
#include <QHBoxLayout>
#include <QToolButton>
#include <QLabel>
#include <QCheckBox>
#include <QString>

class Mesure : public QWidget
{
    public:
    Mesure(QString angle, QWidget *parent);

    private:
    QHBoxLayout *m_hlayoutMesure;
    QToolButton *m_buttonClose;
    QLabel *m_labelAngle;
    QCheckBox *m_checkboxMesure;
};

#endif 
```

测量.cpp

```
#include "Mesure.h"

Mesure::Mesure(QString angle, QWidget *parent) :
    QWidget(parent),
    m_hlayoutMesure(new QHBoxLayout(this)),
    m_buttonClose(new QToolButton(this)),
    m_labelAngle(new QLabel(angle, this)),
    m_checkboxMesure(new QCheckBox(this))
{
    m_buttonClose->setText("X");
    m_labelAngle->setAlignment(Qt::AlignCenter);

    m_hlayoutMesure->addStretch(1);
    m_hlayoutMesure->addWidget(m_checkboxMesure);
    m_hlayoutMesure->addWidget(m_labelAngle);
    m_hlayoutMesure->addWidget(m_buttonClose);
    m_hlayoutMesure->addStretch(1);
    m_hlayoutMesure->setSpacing(10);
    m_hlayoutMesure->setMargin(0);

    QObject::connect(m_buttonClose, SIGNAL(clicked()), this, SLOT(close()));
} 
```

PanneauMesure.h

```
#ifndef PANNEAUMESURE_H
#define PANNEAUMESURE_H

#include <QWidget>
#include <QVBoxLayout>
#include <QHBoxLayout>
#include <QToolButton>
#include <QLabel>
#include <QCheckBox>
#include <QString>
#include <QPushButton>
#include <QSlider>
#include <QSpacerItem>
#include <QGroupBox>
#include <QScrollArea>
#include <vector>
#include "Mesure.h"

class PanneauMesure : public QWidget
{
    Q_OBJECT

    public:
    PanneauMesure();
    void add(Mesure *mesure);

    public slots:
    void remiseAZero();

    private:
    QVBoxLayout *m_vlayoutTotal;
    QGroupBox *m_groupboxMesures;
    QVBoxLayout *m_vlayoutGroupBoxMesures;
    QScrollArea *m_scrollareaMesures;
    QWidget *m_widgetMesures;
    QVBoxLayout *m_vlayoutMesures;
    QGroupBox *m_groupboxOptions;
    QVBoxLayout *m_vlayoutOptions;
    QCheckBox *m_checkboxAfficherMesures;
    QPushButton *m_buttonRAZ;
    QWidget *m_widgetAlpha;
    QHBoxLayout *m_hlayoutAlpha;
    QLabel *m_labelAlphaText;
    QLabel *m_labelAlphaValeur;
    QSlider *m_sliderAlpha;
};

#endif 
```

PanneauMesure.cpp

```
#include "PanneauMesure.h"

PanneauMesure::PanneauMesure() :
    QWidget(),
    m_vlayoutTotal(new QVBoxLayout(this)),
    m_groupboxMesures(new QGroupBox("Mesures", this)),
    m_vlayoutGroupBoxMesures(new QVBoxLayout(m_groupboxMesures)),
    m_scrollareaMesures(new QScrollArea(m_groupboxMesures)),
    m_widgetMesures(new QWidget(m_groupboxMesures)),
    m_vlayoutMesures(new QVBoxLayout(m_widgetMesures)),
    m_groupboxOptions(new QGroupBox("Options", this)),
    m_vlayoutOptions(new QVBoxLayout(m_groupboxOptions)),
    m_checkboxAfficherMesures(new QCheckBox("Afficher les mesures", m_groupboxOptions)),
    m_buttonRAZ(new QPushButton("Remise à zéro", m_groupboxOptions)),
    m_widgetAlpha(new QWidget(m_groupboxOptions)),
    m_hlayoutAlpha(new QHBoxLayout(m_widgetAlpha)),
    m_labelAlphaText(new QLabel("Alpha :", m_groupboxOptions)),
    m_labelAlphaValeur(new QLabel("50", m_groupboxOptions)),
    m_sliderAlpha(new QSlider(m_groupboxOptions))
{
    // Alpha
    m_sliderAlpha->setMaximum(100);
    m_sliderAlpha->setValue(50);
    m_hlayoutAlpha->addWidget(m_labelAlphaText);
    m_hlayoutAlpha->addWidget(m_labelAlphaValeur);
    m_labelAlphaText->setAlignment(Qt::AlignRight);
    m_labelAlphaValeur->setAlignment(Qt::AlignLeft);
    m_sliderAlpha->setOrientation(Qt::Horizontal);
    QObject::connect(m_sliderAlpha, SIGNAL(valueChanged(int)), m_labelAlphaValeur, SLOT(setNum(int)));

    // Afficher Mesures
    m_checkboxAfficherMesures->setChecked(true);

    // Options
    m_vlayoutOptions->addWidget(m_buttonRAZ);
    m_vlayoutOptions->addWidget(m_checkboxAfficherMesures);
    m_vlayoutOptions->addWidget(m_widgetAlpha);
    m_vlayoutOptions->addWidget(m_sliderAlpha);

    // Mesures
    m_scrollareaMesures->setWidget(m_widgetMesures);
    m_vlayoutGroupBoxMesures->addWidget(m_scrollareaMesures);

    // Total
    m_vlayoutTotal->addWidget(m_groupboxOptions);
    m_vlayoutTotal->addWidget(m_groupboxMesures);

    setLayout(m_vlayoutTotal);
}

void PanneauMesure::add(Mesure *mesure)
{
    m_vlayoutMesures->addWidget(mesure);
    QObject::connect(m_buttonRAZ, SIGNAL(clicked()), mesure, SLOT(close()));
    QObject::connect(m_buttonRAZ, SIGNAL(clicked()), this, SLOT(remiseAZero()));
}

void PanneauMesure::remiseAZero()
{
    m_sliderAlpha->setValue(50);
    m_checkboxAfficherMesures->setChecked(true);
} 
```

主文件

```
#include <QApplication>
#include "PanneauMesure.h"
#include "Mesure.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    PanneauMesure panneau;
    Mesure mesure1("14°", &panneau);
    Mesure mesure2("12°", &panneau);
    Mesure mesure3("9°", &panneau);
    Mesure mesure4("8°", &panneau);
    Mesure mesure5("7°", &panneau);
    Mesure mesure6("5°", &panneau);
    Mesure mesure7("2°", &panneau);
    Mesure mesure8("1°", &panneau);

    panneau.add(&mesure1);
    panneau.add(&mesure2);
    panneau.add(&mesure3);
    panneau.add(&mesure4);
    panneau.add(&mesure5);
    panneau.add(&mesure6);
    panneau.add(&mesure7);
    panneau.add(&mesure8);

    panneau.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:59:46.293

默认情况下，`QScrollArea`视图（内部滚动部分）在其内容更改时不会调整其大小，您可以使用以下任一方法进行更改：

```
m_vlayoutMesures->setSizeConstraint(QLayout::SetMinAndMaxSize); 
```

或者

```
m_scrollareaMesures->setWidgetResizable(true); 
```

后者还将调整外部大小，`QScrollArea`以尽可能避免滚动条。

# java - 分析 .war 文件

> ID：10917729
> 
> 赞同：1
> 
> 时间：2012-06-06T15:52:45.887
> 
> 标签：java, apache-flex, tomcat, profiler

我有一个多线程应用程序，我通过 .war 部署在 Tomcat 服务器上（它包括 Java 和 Adob​​e Flex），由于某种原因，它占用了 100% 的 cpu（50% 在 2 核上，25 % 在 4 核上，等等）。据我所知，我没有错误的轮询或 while(true)，而且我很难找到问题所在。

过去我分析过 C/C++ 代码，很容易看到“哦，这个函数被多次调用 x 并且占用了 X% 的时间”。是否有一些实用程序可以做类似的事情？该项目不能从 IDE 运行（所以我假设不能以正常方式进行分析），它必须通过 .war 部署。该项目位于 Netbeans/FlashBuilder 中，如果有影响的话。

# javascript - 监听 ajax 调用触发事件

> ID：10917730
> 
> 赞同：0
> 
> 时间：2012-06-06T15:52:55.537
> 
> 标签：javascript, jquery, ajax

我使用的是现成的解决方案，其中包含大量我真的无法进入的代码。一旦进行了ajax调用，我就试图触发一个事件（他们没有使用jquery！他们是手动完成的）

我找到了这个

```
yourXMLHTTPRequest.onreadystatechange = function () {
  if (this.readyState == 4) {
      doJQueryStuff();
  }
} 
```

此处：[使用 jQuery 侦听未使用 jQuery.AJAX 加载的 AJAX 加载](https://stackoverflow.com/questions/2833152/using-jquery-to-listen-for-an-ajax-load-that-is-not-loaded-using-jquery-ajax)

不知道我是如何找到“yourXMLHTTPRequest”部分的（不要太多使用ajax，更不用说手动编写了）

这需要在编写代码的地方之外，也不确定它来自哪里，只需要在它被拉出后触发。

编辑：要清除它，如果可能的话，我需要在实时站点上找到正在发出的请求（例如在 firebug 或 chrome 工具中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:57:21.130

yourXMLHTTPRequest 将像这样定义

```
var yourXMLHTTPRequest = new XMLHttpRequest(); 
```

完整的文档可以在这里找到[https://developer.mozilla.org/en/xmlhttprequest](https://developer.mozilla.org/en/xmlhttprequest)和这里[https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest)

# java - 哈希码是否返回内存地址？

> ID：10917731
> 
> 赞同：3
> 
> 时间：2012-06-06T15:53:00.113
> 
> 标签：java, hashcode

> **可能重复：**
> [什么是对象 hashcode](https://stackoverflow.com/questions/2237720/what-is-an-objects-hashcode)
> [hashCode() 和 identityHashCode() 如何在后端工作？](https://stackoverflow.com/questions/4930781/how-do-hashcode-and-identityhashcode-work-at-the-back-end)

我不是在谈论 String 类或任何其他覆盖哈希码的类。假设我只是创建了一个`Object`类的新对象，那么`hashcode()`or 无论如何都会`identityHashCode(Object x)`返回该对象的内存地址？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T15:55:47.107

不必要。从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)（强调我的）：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，**但 JavaTM 编程语言不需要这种实现技术**。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:02:57.413

不，HashCode() 函数返回一个整数。如果你没有为你的对象定义一个 HashCode() 函数，Java 可以将对象的内存地址转码为一个整数并返回它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:57:54.243

You can always check by looking at the source that ships with your JDK.

My `java.lang.Object` shows `hashCode` as a native method. Here are the javadocs.

```
/**
 * Returns a hash code value for the object. This method is 
 * supported for the benefit of hashtables such as those provided by 
 * <code>java.util.Hashtable</code>. 
 * <p>
 * The general contract of <code>hashCode</code> is: 
 * <ul>
 * <li>Whenever it is invoked on the same object more than once during 
 *     an execution of a Java application, the <tt>hashCode</tt> method 
 *     must consistently return the same integer, provided no information 
 *     used in <tt>equals</tt> comparisons on the object is modified.
 *     This integer need not remain consistent from one execution of an
 *     application to another execution of the same application. 
 * <li>If two objects are equal according to the <tt>equals(Object)</tt>
 *     method, then calling the <code>hashCode</code> method on each of 
 *     the two objects must produce the same integer result. 
 * <li>It is <em>not</em> required that if two objects are unequal 
 *     according to the {@link java.lang.Object#equals(java.lang.Object)} 
 *     method, then calling the <tt>hashCode</tt> method on each of the 
 *     two objects must produce distinct integer results.  However, the 
 *     programmer should be aware that producing distinct integer results 
 *     for unequal objects may improve the performance of hashtables.
 * </ul>
 * <p>
 * As much as is reasonably practical, the hashCode method defined by 
 * class <tt>Object</tt> does return distinct integers for distinct 
 * objects. (This is typically implemented by converting the internal 
 * address of the object into an integer, but this implementation 
 * technique is not required by the 
 * Java<font size="-2"><sup>TM</sup></font> programming language.)
 *
 * @return  a hash code value for this object.
 * @see     java.lang.Object#equals(java.lang.Object)
 * @see     java.util.Hashtable
 */
public native int hashCode(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:59:49.100

As the [documentation](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29) on Object.hashCode() states,

> As much as is reasonably practical, the hashCode method defined by class Object does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the JavaTM programming language.)

So, the Java language has no requirement for the hashcode of the Object class to return the memory address of the object and therefore you should not rely on this.

# javascript - Wordpress 被黑以包含反向链接

> ID：10917733
> 
> 赞同：0
> 
> 时间：2012-06-06T15:53:01.687
> 
> 标签：javascript, php, wordpress, eval

**症状：**

*   一些奇怪的链接到不同的购物网站插入首页
*   mydomain.com/page_name=XYZ&id=123 重定向到不同的购物网站（通过评论提示）

**已经尝试过：**

*   在 footer.php 中找到 PHP 条目 eval(base64_decode('ICRmZl9vdXRsaW5rX2ZpbGVf...)，它负责一些奇怪的链接注入 --> 删除了
*   文件和数据库搜索“eval”、“page_name”和其他可疑关键字 --> 没有发现明显错误的东西

**但肯定有更多的后门**

带有 page_name 和 id VARS（症状）的提示是由匿名评论带来的（奇怪？）

有人遇到同样的问题或知道解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:42:14.123

那很奇怪！我建议通过 shell 搜索具有大哈希字符串的文件：

```
find ./ -name "*.php" -type f -print0 | xargs -0 grep '[a-zA-Z0-9]\{400\}' 
```

那会给你一个清单。在我的情况下，我的根文件夹中有一个文件 include.class.php，它包含很多后门。更多文件（带有加密名称）位于我的 wp-includes/ 文件夹中。他们似乎负责创建后门文件。删除后门文件和加密！

玩得开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:56:06.947

检查[Wordpress Codex: Help I think I have been hacked](http://codex.wordpress.org/FAQ_My_site_was_hacked)。这是您将找到的最佳建议。

# c# - Websocket，标题和排名

> ID：10917748
> 
> 赞同：0
> 
> 时间：2012-06-06T15:54:05.697
> 
> 标签：c#, c#-4.0, websocket

我正在尝试调用外部 websocket 服务器，但它不起作用，我有错误：nonzero hanshake。

我在 ac# 应用程序中使用 superwebsocket 的客户端。

我将（使用wireShark）我发送的内容与一个工作的例子（但在javascript中）进行了比较，我发现唯一的区别是标题中字段的排名。

这可能是我的问题的原因吗？我应该尊重领域的排名吗？

PS：我按此顺序发送

```
GET / HTTP/1.1
Upgrade: WebSocket
Connection: Up grade
Sec-WebSocket-Key1:  DC1M 5VEEm 731
Sec-WebSocket-Key2: 7 tQG6 7540Q226
Host: 127.0.0.1
Origin: 127.0.0.1
Sec-WebSocket-Protocol: myProtocol 
```

以及 javascript 发送的内容：

```
GET / HTTP/1.1
Host: 127.0.0.1:8080
Origin:  null
Sec-WebSocket-Key1: 3O45   82 4   ;Q 0 376
Connection: Upgrade
Sec-WebSocket-Key2: <361      6  W 12 Z152
Upgrade: WebSocket
Sec-WebSocket-Protocol: myProtocol 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:04:19.170

标头字段未排序。来自 websocket 协议，草案 17：

> ```
>  After the leading line in both cases come an unordered set of header
>    fields.  The meaning of these header fields is specified in Section 4
>    of this document.  Additional header fields may also be present, such
>    as cookies [RFC6265].  The format and parsing of headers is as
>    defined in [RFC2616]. 
> ```

[https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17)

# database - Database issue- how to resolve low level of TABLESPACE FREE PAGES?

> ID：10917751
> 
> 赞同：0
> 
> 时间：2012-06-06T15:54:15.180
> 
> 标签：database, db2

We are implementing some system to our customers which uses DB2 database and we hadn't have problem with table spaces free pages before! But now in implementation phase I can see low level of database free pages. We had 56304 pages and now we have only 288 free. Can some one tell me does it can be harmful and dangerous? How to solve it? I tried with making some attributes of tables to decrease their size (on example ALN from 250 I set it to 100) but instead of growing my table spaces got smaller? How to solve this? I will be very thankful

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:26:12.727

On Linux, UNIX, and Windows platforms, DB2 automatically grows its tablespaces unless they're explicitly defined otherwise. The following query will show you which tablespaces require manual resizing via the ALTER TABLESPACE command:

`SELECT VARCHAR( RTRIM( tbsp_name ) || ' does not have AUTORESIZE enabled', 60 ) FROM sysibmadm.snaptbsp WHERE tbsp_type = 'DMS' AND tbsp_auto_resize_enabled <> 1 ;`

If the above query returns no rows, then all of the tablespaces in your database will automatically grow as needed until there is no space left on the drive, volume, or file system that your database is using for storage.

When you alter a table to reduce the maximum size of one of its columns, that change won't affect existing rows in the table until they are modified by an UPDATE statement or a REORG TABLE command.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:21:37.280

Yes, if you run out of free pages, then DB2 will not be able to write any more data to the table.

There are a few ways you can increase the number of free pages. You need to know how many file containers are assigned to the tablespace and how many free and used pages you have using the following query (or `db2 list tablespaces show detail` from the command line):

```
SELECT SUBSTR(TBSP_NAME,1,15) NAME
      ,TBSP_TYPE TYPE
      ,TBSP_AUTO_RESIZE_ENABLED AUTO_RESIZE
      ,TBSP_NUM_CONTAINERS CONTAINERS
      ,TBSP_TOTAL_PAGES TOTAL_PGS
      ,TBSP_USED_PAGES USED_PGS
      ,TBSP_FREE_PAGES FREE_PGS
      ,TBSP_MAX_SIZE MAX_SZ
      ,TBSP_PAGE_SIZE PG_SZ
FROM SYSIBMADM.TBSP_UTILIZATION
WHERE TBSP_CONTENT_TYPE IN ('ANY','SYSTEMP') 
```

You can then calculate the number of pages to increase using the formula:

```
numPages = (usedPages - freePages) / numberOfContainersInTS 
```

You'll then take the result and use [`ALTER TABLESPACE`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000890.html) to extend the tablespace:

```
ALTER TABLESPACE <yourTS> EXTEND (ALL <numPages>) 
```

Additionally, you may be able to [`REORG`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001966.html) the table, which may free up some unused pages.

# string - 帕斯卡错误中的字符串

> ID：10917756
> 
> 赞同：0
> 
> 时间：2012-06-06T15:54:50.153
> 
> 标签：string, pascal

这是我的程序：

```
program str_err;

var st:string;

begin

      st:='ERROR';

      delete(st,2,1);

      writeln(st);

      write(st[5]);

      readln;

end. 
```

我运行它，它显示`st='EROR'`和`st[5]='R'`？

我已经从字符串中删除了一个字符，并且`st[5]`必须删除`''`，而它仍然是`R`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:06:03.303

如果您的编译器使用范围检查，您将在尝试读取字符串结尾时遇到运行时错误。否则，您只会得到该内存空间中的任何垃圾。难怪它仍然被以前在那里的同一个角色占据。st 删除前是 5ERROR，删除后是 4ERORR（字符串长度在前），所以 R 仍然存在。如果 delete 复制了字符串而不是将其改组，您将得到随机垃圾。

# php - Ubuntu PHP 服务器之间的日期时间格式差异

> ID：10917758
> 
> 赞同：0
> 
> 时间：2012-06-06T15:54:55.703
> 
> 标签：php, sql-server-2008, datetime, ubuntu

我有 2 台服务器，每台都运行完全相同版本的 PHP（5.3.5-1ubuntu7.8）。它们也是完全相同的 Ubuntu (11.04) 版本。我编写了一个 PHP 脚本来连接到 SQL Server 2008 R2 数据库，选择一个日期时间值，然后将其 print_r() 打印到屏幕上。

当我在一台服务器上运行脚本时，日期时间以这种格式返回：2011-08-20 00:00:00.000。当我在另一台服务器上运行它时，使用从同一数据库记录中提取的完全相同的脚本，我得到这种格式：2011 年 8 月 20 日 12:00:00.000AM。

我的问题是我无法弄清楚我的服务器上的差异在哪里导致了我的日期时间格式的差异。我已经在 Apache 和 CLI 的 php.ini 文件中使用了 mssql.datetimeconvert 设置，但无济于事。

有没有人遇到过这个问题并确定是什么原因造成的？在我决定重建服务器之前，任何想法都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:59:04.687

Does PHP not have the ability to format datetime values in a specific format? This is likely to do with local regional settings on the operating system rather than anything else, but you can always request a specific format from SQL Server instead of relying on PHP or the O/S to format them the same way by coincidence.

```
SELECT CONVERT(CHAR(10), col, 120) + ' ' + CONVERT(CHAR(8), col, 108)
FROM dbo.table; 
```

That said, PHP is probably the best place to do this, but I have to apologize - I'm not versed in PHP well enough to tell you how to do that (in C#, for example, you'd use `.Format()`).

From here:

[http://php.net/manual/en/datetime.format.php](http://php.net/manual/en/datetime.format.php)

Looks like instead of just dumping the string to the screen you should be using

```
echo date_format($date_var_from_rs, 'Y-m-d H:i:s'); 
```

As for the default formats on your Ubuntu servers, this blog post might be useful as well:

[http://ccollins.wordpress.com/2009/01/06/how-to-change-date-formats-on-ubuntu/](http://ccollins.wordpress.com/2009/01/06/how-to-change-date-formats-on-ubuntu/)

# ios - 在 appWillEnterForeground 上重新加载表

> ID：10917762
> 
> 赞同：1
> 
> 时间：2012-06-06T15:55:05.497
> 
> 标签：ios, uitableview, reloaddata

每当用户重新进入我的 iphone 应用程序时，我一直在尝试重新加载表格。表格的所有信息都是正确和正确的。该表正在输入正确的数据源和委托，并且我打印出来的值是我想要的，但从视觉上看，表不会重新加载。我的调用在 appWillEnterForeground 中，调用 viewWillLoad。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T16:36:40.797

您不应该像上面评论中描述的那样触发 viewDidLoad 。viewDidLoad 是 CocoaTouch 框架在适当的时候调用的特殊方法。您的代码不应直接调用它。

相反，您可以使用通知来完成同样的事情。这是执行您要求的正确方法：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    // Fire a notification to let all views know that our app entered foreground.
    [[NSNotificationCenter defaultCenter] postNotificationName:@"EnteredForeground" 
                                                        object:nil];
} 
```

在您的特定 ViewController 中处理通知：

```
- (void)viewDidLoad {
    ...
    [NSNotificationCenter defaultCenter] addObserver:self 
                                            selector:@selector(enteredForeground:) 
                                                name:@"EnteredForeground" 
                                              object:nil];
}

// Handle the notification in your ViewController:

- (void)enteredForeground:(id)object {
    // Reload the tableview
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T20:16:17.800

您可以只观察 UIApplicationWillEnterForegroundNotification 而不是发布自己的通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self.tableView selector:@selector(reloadData) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

# java - Spring MVC 如何确定与给定控制器关联的 .xhtml

> ID：10917763
> 
> 赞同：2
> 
> 时间：2012-06-06T15:55:17.337
> 
> 标签：java, jsf, spring-mvc

我按照[本教程](http://papweb.wordpress.com/2011/07/29/spring-mvc-3-jsf-2-with-maven-2-and-tomcat/)创建了一个基本的 Spring MVC 3 和 JSF 2 应用程序。对于任何给定的控制器，Spring MVC 如何将控制器与适当的 .xhtml 文件相关联。例如在上面的教程中 helloWorld.xhtml 与 HelloWorldController 相关联。但我看不到任何创建此关联的配置文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:08:10.007

魔法发生在 applicationContext.xml 中，这个块特别定义了 viewResolver bean：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="cache" value="false" />
    <property name="viewClass" value="org.springframework.faces.mvc.JsfView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".xhtml" />
</bean> 
```

这部分配置在 webapp 的 /WEB-INF/views/ 目录中查找与控制器返回的视图名称模式匹配的 .xhtml 文件。

# jquery - 使用控件数组进行 JQuery 验证（同名）

> ID：10917780
> 
> 赞同：2
> 
> 时间：2012-06-06T15:56:05.493
> 
> 标签：jquery, javascript-events

我已经在 jquery 验证中阅读了这个东西，但我仍然坚持使用表单中的这个需要控制数组。

我有这个代码：

```
//already link the validation js script of course

<scrip>
    $(document).ready(function() {  
    $("#hh").validate();
    });
</script>

<form id="hh">
<input type="text" name="name[]" class="required" /><br />
<input type="text" name="name[]" class="required" /><br />
<input type="text" name="name[]" class="required" /><br />
<input type="submit" name="Submit" />
</form> 
```

问题是，第一行名为“name[]”的控件是必需的，其余的什么都没有。我已经对 jquery.validate.js 上的 checkForm: function() 进行了更新，正如这个[链接](https://stackoverflow.com/questions/4526229/jquery-validation-for-array-of-input-elements)所说的那样，但它什么都没有......

将 class="required" 添加到每个控件实际上对我有用，但我坚持使用这个控件数组...

任何人都可以请逐步提交有关如何解决此问题的方法。一个非常简单的代码行是一个很好的帮助。就像修改我上面发布的代码一样。

对不起，我已经对这件事感到沮丧。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:58:08.493

How about this:

```
<form id="hh">
<input type="text" name="name[0]" class="required" /><br />
<input type="text" name="name[1]"  /><br />
<input type="text" name="name[2]"/><br />
<input type="submit" name="Submit" />
</form> 
```

?

# actionscript-3 - 如何将文件保存到特定目的地（因此没有“另存为”对话框）

> ID：10917795
> 
> 赞同：1
> 
> 时间：2012-06-06T15:56:57.370
> 
> 标签：actionscript-3, flash, actionscript, save, filereference

我正在尝试使用当前代码将图像保存在闪存中：

```
var fileReference:FileReference = new FileReference();
fileReference.save(byteArray); 
```

该代码会打开一个“另存为”对话框，提示用户选择应保存文件的目标位置。

我想在代码中指定文件的具体位置，所以不需要“另存为”框的提示。

我试图添加第二个参数，`fileReference.save();`但这似乎只设置了默认文件名，而不是路径：

```
fileReference.save(byteArray,"myfile.jpeg"); 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:19:42.337

如果这是一个 Flash Player Web 项目而不是 AIR 项目，那么恐怕你就不走运了。出于安全原因，Flash Player 中的所有文件访问操作都必须经过用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:22:27.600

出于安全原因，您不能这样做。但是，如果您正在构建一个 AIR 应用程序，您可以使用[FileStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:09:06.457

不确定这是您要查找的内容，但如果您想将文件保存在用户计算机内的隐藏位置，您可以使用`SharedObject`该类， [此处的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

# batch-file - 尝试使用 AD 中的 dsmod 组实用程序将安全组复制到用户

> ID：10917796
> 
> 赞同：0
> 
> 时间：2012-06-06T15:56:57.820
> 
> 标签：batch-file, active-directory, dsquery

我正在尝试创建一个批处理文件，要求输入源 samid 和目标 samid。然后使用 dsquery 和 dsget 找出源 samid 分配给哪些安全组，并使用 dsmod 将目标 samid 分配给这些安全组。

除 dsmod group 命令外，一切正常。它不做任何事情并且批处理文件停止。如果我真的把`"CN=marketing,OU=test group,DC=abc,DC=com"`而不是`%%g`和`"CN=test1,OU=test group,DC=abc,DC=com"`而不是`%dusercn%`，它工作正常。

有人能帮忙吗？我已经在这里粘贴了我的脚本。这最后一件小事要了我的命。

```
echo off
echo %date% at %time%
set /p susername=enter source user name:
set /P dusername=enter destination user name:
echo %susername%
echo %dusername%
set dusercn=
%dusercn%=dsquery user -samid %dusername%
echo %dusercn%

for /f "tokens=*" %%g in ('dsquery user -samid %susername% ^|dsget user -memberof') do **(dsmod group %%g -addmbr %dusercn%)**

echo completed
pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:38:06.460

感谢你的帮助。我正在发布对我有用的答案。希望它可以帮助像我这样的其他新手。

```
echo off

echo %date% at %time% 

set /p susername=enter source user name:

set /P dusername=enter destination user name:

rem echo+ is used for new line.
echo+

echo entered source user name: %susername%

echo entered destination user name: %dusername%

echo+

set dusercn=0

set lines=0

for /f "tokens=*" %%g in ('dsquery user -samid %susername% ^|dsget user -memberof') do (

echo %%g

dsquery user -samid %dusername% | dsmod group %%g -addmbr -c

set /a lines=lines+1
)

echo+

echo+

echo **************************

echo number of lines processed %lines%

echo script completed

echo **************************

pause 
```

# string - Borland C++ Builder 6 和字符串连接

> ID：10917797
> 
> 赞同：2
> 
> 时间：2012-06-06T15:57:00.030
> 
> 标签：string, c++builder, c++builder-6

我正在使用 Borland C++ Builder 6 来尝试做一些简单的字符串连接。但是，我遇到了一个我认为有趣的问题。

我能在网上找到的所有东西都表明我应该能够做这样简单的事情：

```
String word = "a" + "b" + "c"; 
```

但是，当我尝试编译此代码时，我收到“无效的指针添加”错误。我可以将每个部分分配给它自己的变量并将每个部分加在一起以获得所需的输出。但是，鉴于这是一个多么简单的例子，我认为这是不必要的。

我能够使与上述类似的东西按需要工作的唯一方法是这样做：

```
String a = "";
String word = a + "a" + "b" + "c"; 
```

我的问题是：为什么第二个例子可以正常工作，但第一个例子不行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:02:26.450

原因是类型`"a"`是`char*`（即：pointer-to-char），也就是说当你写

```
"a" + "b" 
```

您正在尝试将指针添加到一起，这是不允许的。

当你创建一个`String`类型时，它`operator+`被重载了，所以

```
String a = "";
a + "b" 
```

向 a 添加一个指向字符的指针`String`，它有自己的连接定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:04:36.063

我不太确定，但这可能是因为争论。第一行中的“a”是`char*`，因此添加其他字符串仍然会产生结果，`char*`并且无法直接将其分配给 oa`String`对象。第二种情况表明，如果第一个参数是`String`类型，所有结果也是字符串，所以赋值是可能的。

# mks - 在 MKS Integrity 中禁用关键字扩展

> ID：10917804
> 
> 赞同：1
> 
> 时间：2012-06-06T15:57:13.573
> 
> 标签：mks, mks-integrity

有没有办法避免/禁用 MKS Integrity (2009) 中的关键字扩展？

我发现似乎根本没有影响的参数`--unexpand`。`si ci`

然后是可以设置的首选项`si setpreferences`。当我的沙盒文件的设置`keywordExpand=noexpand`没有`ci`改变时。但是如果我创建一个新的沙箱，关键字会再次被替换。

用户手册建议，替换实际上发生在结帐时。但后来，我想知道为什么会有`keywordExpand`登记入住的偏好。设置也无济于事`keywordExpand=noexpand`。`co`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:31:55.670

回答我自己：似乎在入住*和*退房时都会发生关键字扩展。要完全禁用它，以下命令有帮助：

```
si setprefs --command=add keywordExpand=noexpand
si setprefs --command=annotate keywordExpand=noexpand
si setprefs --command=ci keywordExpand=noexpand
si setprefs --command=co keywordExpand=noexpand
si setprefs --command=resync keywordExpand=noexpand
si setprefs --command=revert keywordExpand=noexpand
si setprefs --command=viewrevision keywordExpand=noexpand 
```

此外，MKS 可以/将用原始关键字（未扩展）替换扩展关键字，可以禁用

```
si setprefs --command=add unexpandKeywords=false
si setprefs --command=import unexpandKeywords=false
si setprefs --command=ci unexpandKeywords=false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:27:11.293

您还可以将存档转换为二进制格式，以防止 MKS 进行任何类型的修改，无论是关键字扩展还是行尾转换。

归档转换只能在数据库后端进行，需要 ChangeArchiveType 权限。

```
si updatearchive --archiveType=binary ... 
```

# iphone - 没有编辑模式的 UITableViewCell 删除按钮（如邮件应用程序）

> ID：10917808
> 
> 赞同：0
> 
> 时间：2012-06-06T15:57:24.453
> 
> 标签：iphone, objective-c, uitableview

不确定此功能是否内置`UITableViewCell`，但我想模仿邮件应用程序的行为。我有一个`UITableView`动态单元格。当用户执行向左滑动手势时，一个删除按钮（我相信邮件应用程序中的按钮文本是归档而不是删除）应该出现在单元格的右侧。

我对删除该行之后的操作感到满意。如果用户向右滑动或点击`UITableView`.

我宁愿在不添加“编辑”`UINavigationItem`按钮的情况下执行此操作，并且按照“表视图编程指南”将 tableView 置于编辑模式，但感谢使用任何内置方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:18:23.267

`-tableView:canEditRowAtIndexPath:`委托不会导致按钮在滑动时显示。您可以使用它来确定您希望允许编辑（删除）哪些行，如果您希望允许编辑所有行，则可以将其保留为未实现。但是，要在滑动时显示删除按钮而不将表格视图置于编辑模式，您需要实现：

```
- (void)tableView:(UITableView *)tableView 
                  commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
                   forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Get the object you want to remove from your 
        // collection and delete it here.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:00:53.640

将 UITableViewDelegate 方法添加`-tableView:canEditRowAtIndexPath:`到您的控制器。对可以删除的行返回 YES。

# ssas - SSAS dimension design - new vs existing customer

> ID：10917809
> 
> 赞同：1
> 
> 时间：2012-06-06T15:57:37.203
> 
> 标签：ssas, cube

I'm very new to SSAS and would like to pick you experts' brains.

I'm working on changing existing cubes. One of the cube is for getting customers and sales data, e.g. sales by customers for Q1 2012, etc. I want to add a grouping for new or existing customer base on customer create date, like below:

```
Q1 2012
-------
New customers           2500
  Customer Name 1       1000
  Customer Name 2       1500
Existing Customers      5500
  Customer Name 3       4500
  Customer Name 4       1000 
```

When the filter changed from Q1 2012 to Q2 2012, customer name 1 and name 2 would be under existing customer grouping.

I have customer dimension, sales measures but can't figure out how I can incorporate new/existing customer into customer dimension.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:57:16.917

Chris Webb 的这篇[博](http://cwebbbi.wordpress.com/2010/10/08/counting-new-and-returning-customers-in-mdx/)文应该可以帮助您。

# java - 底层流返回零字节

> ID：10917814
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:57:57.993
> 
> 标签：java, io, inputstream, filestream

我目前正在用 Java 编写自己的 Brainfuck 解释器，因为我希望它能够从文件中读取代码，所以我编写了一个`BFInputStream`过滤掉不必要符号的文件。它看起来像这样：

```
import java.io.FilterInputStream;
import java.io.InputStream;
import java.io.IOException;

public class BFInputStream extends FilterInputStream {
    public BFInputStream(InputStream in) {
        super(in);
    }
    public int read() throws IOException {
        while(true) {
            int i = super.read();
            // keep LF for line number checking.
            if(i == -1 || i == 10 ||( i >= 43 && i <= 46) || i == 60 || i == 62 || i == 91 || i == 93)
                return i;
        }
    }
    public int read(byte[] b, int off, int len) throws IOException {
        if(off < 0 || len < 0 || len > b.length - off) throw new IndexOutOfBoundsException();
        for(int i=0; i<len; i++) {
            int j = read();
            if(j < 1) return i;
            b[off+i] = (byte)j;
        }
        return len;
    }
} 
```

我的解释器使用`LineNumberReader`<- `InputStreamReader`<- `BFInputStream`<-`FileInputStream`来读取文件。但每次到达文件末尾时，它都会抛出：

> java.io.IOException：基础输入流返回零字节
> 
> ```
>  at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:268)
>   at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
>   at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
>   at java.io.InputStreamReader.read(InputStreamReader.java:167)
>   at java.io.BufferedReader.fill(BufferedReader.java:136)
>   at java.io.BufferedReader.read(BufferedReader.java:157)
>   at java.io.LineNumberReader.read(LineNumberReader.java:108)
>   at Interpreter.run(Interpreter.java:101)
>   at Interpreter.main(Interpreter.java:180) 
> ```

Interpreter.java:101 包含对`BFInputStream.read()`.

我不确定我是否正确理解了异常。我认为流根本没有返回任何字节（因为超时）。我想如果有一大块非 BF 字符，那么这可能是可能的，但在文件末尾？`FileInputStream`因此`FilterInputStream`并且`BFInputStream`应该返回-1。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:18:32.273

`if (j < 1)`应该是`if (j < 0)`，因为 EOF 由 表示`-1`。此外，您的方法永远不会在 EOF 处返回 -1。

正确的实现如下所示：

```
public int read(byte[] b, int off, int len) throws IOException {
    if(off < 0 || len <= 0 || len > b.length - off) throw new IndexOutOfBoundsException();         
    int i = 0;
    while (i < len) {
        int j = read();
        if (j < 0) break; // Stop reading at EOF
        b[off + i] = (byte) j;
        i++;
    }
    if (i == 0) return -1; // If we get EOF with no data, return it to the caller
    else return i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:27:33.133

之前做过同样的事情，但是使用了 File、FileReader/Writer 和 BufferReader/Writer。我给你我用作指导的代码片段.. 试试看

从文件中读取

```
File f = new File("my.txt");
FileReader fr = new FileReader(f);
BufferedReader br  = new BufferedReader(fr);

String s = null;

while ((br=readLine())!=null) {

// Do whatever u want to do with the content of the file.

}

br.close(); 
```

对于写入文件：

```
Boolean isDone = true;
Scanner scan = new Scanner(System.in);
File f = new File("my.txt");
FileWriter fr = new FileWriter(f);
BufferedWriter br  = new BufferedWriter(fr);

while (b) {

   if (!b) {

 br.write(new Scanner(System.in).nextLine());

 }

} 
```

# java - 基本最低 WAR 配置

> ID：10917815
> 
> 赞同：0
> 
> 时间：2012-06-06T15:58:02.873
> 
> 标签：java, tomcat, servlets, war, web.xml

我有一个突然需要重新打包为 WAR 的 JAR（不要问为什么）。它将部署在 Tomcat 上。我想知道`web.xml`指示 Tomcat 部署应用程序并运行通常由 JAR 方法调用的`main(String[])`方法的最低设置是什么（就 conf 文件和任何其他 conf 文件而言）：

```
public class AppDriver {
    public static void main(String[] args) {
        AppDriver app = new AppDriver();
        app.run();
    }

    // This is the method I need ran by Tomcat at deploy-time.
    public void run() {
        // ...
    }
} 
```

由于我没有使用 Spring 或任何其他类型的 MVC 框架，并且由于没有 servlet 或需要 CDI/上下文，我想我`web.xml`可以很简单；但令人惊讶的是，我找不到任何解释我需要什么的东西。

我还想我需要以`run()`某种方式注释该方法，或者在`web.xml`. 但这就是我卡住的地方。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:04:44.127

您可以实现`ServletContextListener`，在这种情况下，当 tomcat 部署您的应用程序并启动它时，您的`contextInialized`方法将被调用，在该方法中您调用您的 run 方法。

然后在 web.xml 中，您将在`listener`标签下为您的类添加一个条目。

以上方法适用于 2.5 及以下的 servlet 规范

如果您使用的是 Servlet Spec 3.0，您可以简单地`@ServletContextListener`向您的类添加注释，而无需在 web.xml 中进行配置，当您的应用程序启动时，它将被您的容器调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:15:37.793

修改您的`AppDriver` 类`Daemon thread`并从该`ServletContextListener.contextInitialized()`方法启动线程。

```
@WebListener
//Use the above annotation if it is Servlet 3.0
AppDriverInitializer implements ServletContextListener
{

   public void contextInitialized(ServletContext ctx)
   { 
      Thread appDriverThread = new Thread() {
         public void run() {
         //Have your AppDriver class run() method implemented here...
         }
      }
      appDriverThread.start();
   }
} 
```

在你的 WAR 中定义 ServletContextListener 监听器有两种方式之一

*   在 web.xml 中定义监听器

    <listener> <listener-class> AppDriverInitializer </listener-class> </listener>

*   如果您使用 Servlet 3.0 容器，请使用`@WebListener`注解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:16:30.963

如果您想与您的 web 应用程序进行外部通信，您将需要一个 WSDL。除此之外，这里是一个示例 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
  xmlns="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
  http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
  version="2.4">
  <display-name>SemanticAdaptationCoreService</display-name>
  <welcome-file-list>
    <!-- You can skip this part -->
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
  <!-- context-params allow you to pass parameters to your app at runtime -->
  <context-param>
    <param-name>param1</param-name>
    <param-value>value1</param-value>
  </context-param>

  <!-- You can provide a listener class to handle WSDL requests -->
  <listener>
    <listener-class>your.listener.AClass</listener-class>
  </listener>

  <!-- the initializer servlet allows you to run custom methods when the webapp is loaded -->
  <servlet>
    <servlet-name>initializer</servlet-name>
    <servlet-class>your.Initializer</servlet-class>
    <!-- a 1 value requests running the class at load time -->
    <load-on-startup>1</load-on-startup>
  </servlet>
</web-app> 
```

确保您的类扩展`HttpServlet`并覆盖`public void init()`将在加载时调用的方法。

# php - Rails 3 与 PHP 合作问题

> ID：10917816
> 
> 赞同：0
> 
> 时间：2012-06-06T15:58:06.213
> 
> 标签：php, ruby-on-rails, ruby-on-rails-3, character-encoding

我正在尝试使用 php5 编写服务并使用 Rails 3 使用它。
这就是我所做的。

**PHP：**

```
// $DATA is an associative array that contains an Ukrainian characters.
// I am converting all of values with Ukrainien characters to utf-8 using **utf8_encode** function

header('Content-Type: json; charset=utf8');
echo json_encode($DATA);
exit; 
```

PHP 转换字符串如**\u00ca\u00e2\u00e8\u00f2\u00e0\u00ed\u00f6\u00b3\u00ff**

**导轨：**

```
url = URI.parse("http://127.0.0.1/searchInvStat/showclaimdetails.php?app_n=#{@claim.claim_db[:app_number]}")
req = Net::HTTP::Get.new(url.request_uri)
res = Net::HTTP.start(url.host, url.port) {|http|
   http.request(req)
}

@states = ActiveSupport::JSON.decode( res.body ) 
```

但在结果页面上，我得到一个字符串，如**Îïèñ âèíàõîäó (ÊÌ)**而不是**Опис винаходу (КМ)**

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:23:24.893

我找到了解决方案：

而不是使用`json_encode($DATA)`你应该使用`iconv("windows-1251", "UTF-8", $DATA['OUTDOCS'][$i]['regNumb']);`

# php - PHP WideImage - 性能问题

> ID：10917821
> 
> 赞同：1
> 
> 时间：2012-06-06T15:58:28.727
> 
> 标签：php, image-manipulation

我在使用 PHP 的 WideImage 库 - [http://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)时遇到了严重的性能问题。使用 WideImage::load() 加载 2.2 MB .png 文件的内存使用量峰值为 93 MB！此外，加载、调整大小和写入 750 KB .jpg 的文件系统需要将近 30 秒。我已经在两台不同的服务器上运行了这些基准测试，结果相似。

有没有其他人遇到过这些问题？只是 WideImage 是资源猪吗？如果我用直接 GD 而不是 WideImage 重写我的图像处理，我可以期待更好的性能，还是差不多？我知道 PHP 不是图像处理的最佳语言，但我宁愿不必在 C 中编译一些东西然后从 PHP 中调用它:(

谢谢你的时间 - 安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:09:52.217

运行了一些简化的基准测试，我想我明白了。WideImage 的调整大小方法不是持久的。例子：

```
$image = WideImage::load('path/to/file.png');
$image->getWidth();   <-- lets say that returns a width of 2000 pixels
$image->resize(100, 100);
$image->getWidth();   <-- that will still return a width of 2000 pixels, the original $image has not been altered 
```

WideImage 操作返回一个新的图像实例，并保持前一个图像不变，因此要获得操作结果，您需要将其分配给一个变量：

```
$image = WideImage::load('path/to/file.png');
$image->getWidth();        // 2000 px
$resizedImage = $image->resize(100, 100);
$image->getWidth();        // still 2000 px
$resizedImage->getWidth(); // 100 px 
```

所以我在比我想象的要大得多的图像周围移动，因为我的调整大小方法实际上并没有改变我的源图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:24:59.303

也许您应该使用自定义解决方案。WideImage 可能存在一些性能问题。这里是有趣的调查[WideImage 性能和内存问题](http://starikovs.com/2012/09/17/wideimage-performance-issues/)。

# mongodb - MongoDB 搜索“null”比搜索“不存在”更快吗？

> ID：10917822
> 
> 赞同：3
> 
> 时间：2012-06-06T15:58:35.197
> 
> 标签：mongodb, nosql

我的理解是查询 null 查找为 null 的字段以及不存在的字段。

mongo 手册还指出*“$exists 即使有索引也不是很有效”*

查询 null 是否也应该被认为是低效的？

如果您知道您要查找的字段存在但为空，那么编写以下代码是否更有效：

db.foo.find( { "y" : { $type : 10 } } )

比：

db.foo.find( { "y" : null } )

假设该字段已编入索引

编辑：给出一些使用方式的背景信息，以便人们可以提出更好的方法：我正在跟踪文档上发生的处理步骤。我有每个步骤的时间戳，所以我知道它何时发生。定期运行内务处理过程并检查任何尚未发生的任务（即不存在完成的时间戳）以确保没有遗漏任何事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:44:41.090

我不能肯定地说哪个更快，但是[新闻组中有一个线程](http://groups.google.com/group/mongodb-user/browse_thread/thread/24bff29c9b8b5c76)，有人对`$type`-query 的性能有疑问。

撇开这一点不谈，出于三个原因，我不会使用该`$type`查询：

1.  它更难阅读和理解。即使是普通的 MongoDB 用户也可能不知道自己脑子里想`{type : 10}`的是什么。
2.  正如您已经指出的那样，语义是不同的。该`$type`查询允许“两种不同的空值”，即字段不存在的文档，以及字段存在但为空的文档。在反序列化时，这可能会在大多数语言中变成相同的对象，但`$type`-query 会区分它们。
3.  索引用于索引数据，而不是元信息。即使查询优化器能够映射它，我仍然会坚持更直接的解决方案。

我相信另一个性能风险可能是 null 值的潜在低选择性：如果一半的文档具有某些值`y`，而一半的文档具有 null `y`，则查询 null 元素将返回大量文档，并且可以迭代游标昂贵的。但这仅在有很多空值时才成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:17:56.047

我在这里做了一个快速测试并运行了几个解释来查看每个查询的样子，第一个是指定类型的查询：

```
PRIMARY> db.nulltest.find( { "a" : { $type : 10 } } ).explain()
{
    "cursor" : "BtreeCursor a_1",
    "nscanned" : 110011,
    "nscannedObjects" : 110011,
    "n" : 110011,
    "millis" : 121,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "a" : [
            [
                null,
                null
            ]
        ]
    }
} 
```

然后以 null 为标准：

```
PRIMARY> db.nulltest.find( { "a" : null  } ).explain()
{
    "cursor" : "BtreeCursor a_1",
    "nscanned" : 110011,
    "nscannedObjects" : 110011,
    "n" : 110011,
    "millis" : 122,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "a" : [
            [
                null,
                null
            ]
        ]
    }
} 
```

结果看起来几乎相同（1ms 并不重要），并且在说明中的索引范围相同。因此我怀疑这里根本没有区别，所以坚持使用更易读的语法是个好主意

# objective-c - 捏 UIScrollView 时发生奇怪的崩溃

> ID：10917829
> 
> 赞同：1
> 
> 时间：2012-06-06T15:59:21.907
> 
> 标签：objective-c, ios, uiscrollview, uigesturerecognizer, uipinchgesturerecognizer

在过去的几个小时里，这个问题一直让我发疯。所以我有一个非常简单的 UIScrollView 设置：

```
-UIScrollView
    -UIImageView 
```

就是这样。scrollview 和 imageview 在 Storyboard 中生成。现在我想要做的就是能够缩放到这个图像。最小缩放设置为 1，最大缩放设置为 3。滚动视图的委托设置为我的 RootViewController

在我的 RootViewController 中，我添加了这个功能（需要支持缩放）

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
   return _theImageView;
} 
```

我相信我所做的一切都是正确的，但是每当我捏住滚动视图时，我都会得到很棒的 EXE_BAD_ACCESS。我试图到处寻找，但似乎找不到问题。故障转储附在下面

```
0   libobjc.A.dylib                 0x34b80f7e objc_msgSend + 22
1   UIKit                           0x3516899e -[UIScrollView _getDelegateZoomView] + 70
2   UIKit                           0x351908f2 -[UIScrollView _zoomScaleFromPresentationLayer:] + 22
3   UIKit                           0x3523bf5a -[UIScrollViewPinchGestureRecognizer touchesBegan:withEvent:] + 102
4   UIKit                           0x35102436 -[UIWindow _sendGesturesForEvent:] + 278
5   UIKit                           0x351021ee -[UIWindow sendEvent:] + 82
6   UIKit                           0x350e868e -[UIApplication sendEvent:] + 350
7   UIKit                           0x350e7f34 _UIApplicationHandleEvent + 5820
8   GraphicsServices                0x32c85224 PurpleEventCallback + 876 
```

我究竟做错了什么？

也许我太困了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T14:24:19.667

有类似的问题，通过在视图控制器的 dealloc 中添加以下内容来解决它：

```
self.scrollView.delegate = nil;
self.scrollView = nil; 
```

而且我正在使用 ARC，所以它似乎是多余的，但它确实解决了这个问题。我怀疑这是问题的原因：

```
@property(nonatomic,assign) id<UIScrollViewDelegate>      delegate;                       // default nil. weak reference 
```

从`UIScrollView.h`文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:36:07.390

所以第二天早上我用一双新的眼睛看了代码后解决了这个问题。我有一个`MainViewController`初始化并添加`RootViewController`到它的子视图中。问题是这是一个 _weak 引用，而 ARC 正在释放它。

将其分配为全局 _strong 变量`MainViewController`，一切都已修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:08:39.620

是什么`_theView`？如果是你的`UIScrollView`，那么你需要这样做：

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [_theView viewForZoomingInScrollView:scrollView];
} 
```

此外，您根本不需要这个。除非您明确设置滚动视图的委托，否则双指缩放应该会自动工作；如果你这样做，捏缩放在 iOS 5 中应该仍然自动工作，所以你只需要实现它就可以`viewForZoomingInScrollView:`在 iOS 4 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T17:03:57.340

您需要计算出滚动视图的最小缩放比例。缩放比例为 1 表示内容以正常大小显示。低于 1 的缩放比例显示缩小的内容，而大于 1 的缩放比例显示放大的内容。要获得最小缩放比例，您需要计算需要缩小多远才能使图像紧贴您的滚动视图的边界基于其宽度。然后你根据图像的高度做同样的事情。这两个结果缩放比例中的最小值将是滚动视图的最小缩放比例。这为您提供了一个缩放比例，您可以在完全缩小时看到整个图像。

迅速：

```
let scrollViewFrame = scrollView.frame
let scaleWidth = scrollViewFrame.size.width / scrollView.contentSize.width
let scaleHeight = scrollViewFrame.size.height / scrollView.contentSize.height
let minScale = min(scaleWidth, scaleHeight);
scrollView.minimumZoomScale = minScale; 
```

Objective-C

```
CGFloat scrollViewFrame = scrollView.frame
CGFloat scaleWidth = scrollViewFrame.size.width / scrollView.contentSize.width
CGFloat scaleHeight = scrollViewFrame.size.height / scrollView.contentSize.height
CGFloat minScale = min(scaleWidth, scaleHeight);
scrollView.minimumZoomScale = minScale; 
```

从其他项目和在 iOS 上执行大量 GPU 的个人经验（无限滚动、最大位图大小等），我注意到每个设备都有自己的阈值。对于过去的项目，我还将以下值硬编码为 minimumZoomScale 以防止崩溃：

```
scale :
        {
                iPad : {
                    min : 0.8
                ,   max : 1.6
            }
            , iPhone : {
                    min : 0.25
                ,   max : 1.6
            }
            , iPhone6 : {
                    min : 0.3333
                ,   max : 1.6
            }
            , iPhoneResizable: {
                    min : 1
                ,   max : 1.6
            }
        } 
```

适合初学者的好教程：[http ://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift](http://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift)

# c# - c# mvc3 加载不同的视图

> ID：10917830
> 
> 赞同：0
> 
> 时间：2012-06-06T15:59:29.443
> 
> 标签：c#, asp.net-mvc-3

我正在检查用户是否已通过身份验证，如果用户未通过身份验证，则需要定向到不同的视图。

```
public ActionResult UserMaintenance()
{

  if (User.Identity.IsAuthenticated)
  {
    return View();
  }
  else
  {
    LogOn.View;   //// this is the area that needs help
  }
} 
```

我想向用户展示输入登录名和密码的视图....

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:06:15.017

您可以使用`RedirectToAction`任何控制器中的任何操作。

```
return RedirectToAction("Action", "Controller"); 
```

当您使用 ASP.net MVC 时，您可以将其重定向到控制器中的`LogOn`操作`Account`

```
public ActionResult UserMaintenance()
{

  if (User.Identity.IsAuthenticated)
  {
    return View();
  }
  else
  {
    return RedirectToAction("LogOn", "Account");   
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:04:02.147

我会用

[http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction(v=vs.98).aspx)

并创建一个新的控制器方法来处理登录。

# jquery-mobile - jquery mobile redirect not happening

> ID：10917831
> 
> 赞同：0
> 
> 时间：2012-06-06T15:59:40.303
> 
> 标签：jquery-mobile

I'm using jQueryMobile to create an ipad application. I have the following code:

```
function coursesandmodules()
            {
                var companyDBName = "abc3";
                var studentId = "2";
                $.ajax({
                       type : "GET",
                       url : "http://192.168.1.78:8087/teach/rest/student/getcoursesandmodules/" +  companyDBName + "/" + studentId ,
                       dataType : "json",
                       error: function(error) {
                       alert("ERROR");
                       },
                       success : function(data,text,xhqr) {

                       var divElement = "<div id='coursesandmodules' data-role='page'><header data-role='header'><h1>Courses and Modules</h1></header><ul data-role='listview'></ul></div>";
                       $('#loginpage').after(divElement);
                       var jsonobj = eval(data);
                       for (i in jsonobj) {
                       var stringArray =  separate(i);
                       var CTId = stringArray[0];
                       var CTName = stringArray[1];

                       var listDivider = "<li data-role='divider' data-theme='b'>" +  CTName + "</li>";
                       $('#coursesandmodules ul').append(listDivider);
                       for(j in jsonobj[i]) {
                       var myObj = JSON.stringify(jsonobj[i][j]);
                       var myJsonObj = eval('(' + myObj + ')');
                       for (h in myJsonObj) {
                       var moduleId = h;
                       var moduleName = myJsonObj[h];
                       var list = "<li><a href='#module"+ moduleId + "'>" +  moduleName + "</a></li>";
                       $('#coursesandmodules ul').append(list);
                       topics(moduleId, moduleName, companyDBName);
                       }
                       }
                       }
                       }
                       });
            }

            function topics(moduleId, moduleName, companyDBName)
            {
                var id = "module" + moduleId;
                var url = "http://192.168.1.78:8087/teach/rest/student/getmoduletopics/" +  companyDBName + "/" + moduleId;
                $.ajax({
                       type : "GET", 
                       url :  url,
                       dataType : "json",
                       error : function(error) {
                       alert("ERROR");
                       },
                       success : function(data,text,xhqr) {
                       var jsonobj = eval(data);
                       var modulePage = "<div id='" + id + "' data-role='page'><header data-role='header'><h1>" + moduleName + "</h1><a href='#coursesandmodules'>Back</a><a href='#' onclick='savemodule(" +  moduleId  + ")'>Save</a></header></div>";
                       $('#loginpage').after(modulePage);
                       for (i in jsonobj){
                       var stringArray =  separate(i);
                       var topicId = stringArray[0];
                       var topicName = stringArray[1];
                       var topicText = jsonobj[i];

                       var topicCollapsible = "<div data-role='collapsible'><h1>"  +  topicName + "</h1>" +  topicText +  "</div>";
                       $("#" +  id).append(topicCollapsible);
                       }
                       }

                       });

            }

            function separate(string) {
                var str = string.substring(1,(string.length - 1));
                var stringArray = str.split("=");
                return stringArray;
            }

            function submit() {

                var username = $("#username").val();
                var password = $("#password").val();

                var url = "http://192.168.1.78:8087/teach/rest/student/authenticate?username=" +  username + "&password="+ password;

                $.ajax({
                       type : "GET", 
                       url :  url,
                       dataType : "json",
                       error : function(error) {
                       navigator.notification.alert("Error connecting to webservice");
                       },
                       success : function(data,text,xhqr) {
                       if(data) {
                       var jsonobj = eval(data);

                       // student info
                       var currentModule = data.currentModule;
                       var studentId = data.studentId;
                       var studentUserId = data.studentUserId;
                       var companyDbName = data.companyDbName;
                       var studentName = data.studentName;
                       var userName =  data.userName;
                       var companyId = data.companyId;
                       //save data
                       $.mobile.changePage('#coursesandmodules'); 
                       }
                       else {
                       navigator.notification.alert("Incorrect username/password combination");
                       }

                       }

                       });

            } 
```

When I call the coursesandmodules function in the onDeviceRead() function and submit a login form that calls the submit method, the redirect works. But right now I'm hardcoding the companyDBName and studentID values used in the coursesandmodules method. I tried calling coursesandmodules() in the submit method and passing the values from there with something like:

```
 coursesandmodules(companyDBName, studentID)
 $.mobile.changePage('#coursesandmodules'); 
```

And I removed the call to cursesandmodules() from the onDeviceRead() function. The redirect didnt work. It remained on the login page

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:04:36.183

在您的代码中，您只是简单地指向一个锚点，文档对此只字未提：

[文档](http://jquerymobile.com/test/docs/api/methods.html)

这些是他们的例子：

```
 //transition to the "about us" page with a slideup transition
$.mobile.changePage( "about/us.html", { transition: "slideup"} );

//transition to the "search results" page, using data from a form with an id of "search"
$.mobile.changePage( "searchresults.php", {
    type: "post",
    data: $("form#search").serialize()
});

//transition to the "confirm" page with a "pop" transition without tracking it in history   
$.mobile.changePage( "../alerts/confirm.html", {
    transition: "pop",
    reverse: false,
    changeHash: false
}); 
```

# portal - 门户网站工具

> ID：10917834
> 
> 赞同：0
> 
> 时间：2012-06-06T15:59:52.440
> 
> 标签：portal

我的团队正在远离 APEX 4.1，有人提出问题，我们应该使用哪种技术来开发我们的新 Web 门户。

我们目前有 SharePoint 和 Cognos，但我想看看您是否有任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:27:02.137

就 JSR-168/JSR-286 门户网站而言，您可以从通常的嫌疑人那里获得很多选择：

*   IBM——Web Sphere
*   甲骨文 - 网络中心

或者你可以开源：

Liferay（我偏爱“现成”门户，也有企业支持）

还有一大堆开源的[http://java-source.net/open-source/portals](http://java-source.net/open-source/portals)

但我想你需要问问自己，你是否真的需要一个门户，或者你只需​​要一个 CMS 或带有一些后端集成的自定义 Web 应用程序。

通常，门户的学习曲线和重要性很容易掩盖它们带来的任何好处，并且可以更快地构建整个自定义应用程序，运行更精简，更便宜并且更符合您的要求。

无论哪种方式，您都需要内部专业知识来设置和维护它，因此请考虑您是否也想为相当昂贵的许可付费。

如果您只是想决定在一个平台上构建您自己的应用程序，那么请考虑他们的功能集、未来以及您的团队技能和经验。

我已经在 J​​ava EE 和 asp.net MVC 中成功构建了“门户”，并实现了 liferay 门户。我今天的偏好和建议是使用 asp.net MVC 构建所需的内容。

# perl - 用 git 有效地重写（rebase -i）很多历史

> ID：10917835
> 
> 赞同：6
> 
> 时间：2012-06-06T15:59:52.643
> 
> 标签：perl, git, git-rebase

我有一个 git 存储库，在最新版本中有大约 3500 个提交和 30,000 个不同的文件。它代表了多人大约 3 年的工作，我们已获得将其全部开源的许可。我正在努力发布整个历史，而不仅仅是最新版本。为此，我对“回到过去”感兴趣，并在创建文件时在文件顶部插入许可证标题。我实际上有这个工作，但它需要大约 3 天的时间完全用完一个 ramdisk，并且仍然需要一点手动干预。我知道它可以快很多，但我的 git-fu 并不能胜任这项任务。

问题：我怎样才能更快地完成同样的事情？

我目前在做什么（在脚本中自动执行，但请耐心等待......）：

1.  确定将新文件添加到存储库的所有提交（其中只有 500 个，fwiw）：

    ```
    git whatchanged --diff-filter=A --format=oneline 
    ```

2.  将环境变量 GIT_EDITOR 定义为我自己的脚本，在文件的第一行只替换`pick`一次`edit`（你很快就会明白为什么）。这是操作的核心：

    ```
    perl -pi -e 's/pick/edit/ if $. == 1' $1 
    ```

3.  对于上述输出中的每个提交，在`git whatchanged`添加文件的提交之前调用一个交互式变基：

    ```
    git rebase -i decafbad001badc0da0000~1 
    ```

我的自定义 GIT_EDITOR（即 perl 单行）更改`pick`为`edit`，我们被放到 shell 以对新文件进行更改。另一个简单`header-inserter`的脚本在我尝试插入的标头中查找已知的唯一模式（仅在已知文件类型中（*.[chS] 对我来说））。如果它不存在，它会插入它，并且`git add`是文件。这种天真的技术不知道在当前提交期间实际添加了哪些文件，但它最终会做正确的事情并且是幂等的（对同一个文件多次运行是安全的），并且无论如何都不是整个过程的瓶颈.

在这一点上，我们很高兴我们已经更新了当前提交，并调用：

```
 git commit --amend
    git rebase --continue 
```

这`rebase --continue`是昂贵的部分。`git rebase -i`由于我们为 的输出中的每个修订都调用一次`whatchanged`，所以这是很多变基。该脚本运行的几乎所有时间都花在观察“变基 (2345/2733)”计数器的增量上。

它也不只是慢。有必须解决的周期性冲突。至少在以下情况下会发生这种情况（但可能更多）： (1) 当“新”文件实际上是现有文件的副本时，它的第一行（例如，`#include`语句）做了一些更改。这是一个真正的冲突，但在大多数情况下可以自动解决（是的，有一个处理该问题的脚本）。(2) 当一个文件被删除时。这可以通过确认我们要删除它来轻松解决`git rm`。(3) 有些地方看起来像`diff`只是表现不佳，例如，更改只是添加了一个空白行。其他更合理的冲突需要人工干预，但总的来说它们并不是最大的瓶颈。最大的瓶颈绝对是坐在那里盯着“Rebasing (xxxx/yyyy)”。

现在，各个变基是从较新的提交到较旧的提交启动的，即从`git whatchanged`. 这意味着第一个 rebase 会影响昨天的提交，最终我们将 rebase 3 年前的提交。从“较新”到“较旧”似乎违反直觉，但到目前为止，我不相信这很重要，除非我们在调用变基时将多个更改`pick`为一个。`edit`我害怕这样做，因为冲突确实会到来，而且我不想处理由于试图一次性重新确定所有内容而引发的冲突浪潮。也许有人知道避免这种情况的方法？我一直想不出一个。

[我开始研究 git objects 1](http://git-scm.com/book/en/Git-Internals-Git-Objects)的内部工作原理！似乎应该有一种更有效的方法来遍历对象图并进行我想要进行的更改。

请注意，这个存储库来自一个 SVN 存储库，我们实际上没有使用标签或分支（我已经`git filter-branch`删除了它们），所以我们确实有直线历史的便利。没有 git 分支或合并。

我确定我遗漏了一些关键信息，但这篇文章似乎已经过长了。我将尽我所能根据要求提供更多信息。最后我可能只需要发布我的各种脚本，这是有可能的。我的目标是弄清楚如何在 git 存储库中重写历史；不讨论其他可行的许可和代码发布方法。

谢谢！

2012-06-17 更新：包含所有血腥细节的[博客文章。](http://jonmccune.wordpress.com/2012/06/17/code-release-history-and-aesthetics-with-git-filter-branch-and-friends/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:21:01.960

使用

```
git filter-branch -f --tree-filter '[[ -f README ]] && echo "---FOOTER---" >> README' HEAD 
```

本质上会在文件中添加一个页脚行`README`，并且历史看起来自文件创建以来就一直存在，我不确定它是否对您来说足够有效，但这是正确的方法。

制作一个自定义脚本，您最终可能会得到一个很好的项目历史记录，做太多的“魔术”（rebase、perl、脚本编辑器等）可能最终会以意想不到的方式丢失或更改项目历史记录。

[jon](https://stackoverflow.com/users/516647/jon)（OP）使用这种基本模式来实现目标，并显着简化和加速。

```
git filter-branch -d /dev/shm/git --tree-filter \
'perl /path/to/find-add-license.pl' --prune-empty HEAD 
```

一些对性能至关重要的观察。

*   使用`-d <directory>`指向 ramdisk 目录的参数（如`/dev/shm/foo`）将显着提高速度。

*   使用其内置的语言功能从单个脚本进行所有更改，在使用小型实用程序（如`find`）时完成的分叉将多次减慢该过程。避免这种情况：

    ```
    git filter-branch -d /dev/shm/git --tree-filter \
    'find . -name "*.[chS]" -exec perl /path/to/just-add-license.pl \{\} \;' \
    --prune-empty HEAD 
    ```

这是 OP 使用的 perl 脚本的净化版本：

```
#!/usr/bin/perl -w
use File::Slurp;
use File::Find;

my @dirs = qw(aDir anotherDir nested/DIR);
my $header = "Please put me at the top of each file.";

foreach my $dir(@dirs) {
  if (-d $dir) {
    find(\&Wanted, $dir);
  }
}

sub Wanted {
  /\.c$|\.h$|\.S$/ or return; # *.[chS]
  my $file = $_;
  my $contents = read_file($file);
  $contents =~ s/\r\n?/\n/g; # convert DOS or old-Mac line endings to Unix
  unless($contents =~ /Please put me at the top of each file\./) {
    write_file( $file, {atomic => 1}, $header, $contents );
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T18:13:40.330

Blob 是内容可寻址的。您不能在不更改其哈希值的情况下单独修改单个文件，这会更改包含它的任何提交所引用的目录 blob，从而更改从它派生的任何提交。基本上你必须重写世界，因为我理解这个问题。我想我可以想象一个算法以反向 DAG 顺序完成所有这些工作，具有原始到修改对象哈希的大哈希表，每个对象只重写一次。

如果您已经有了一个正确的解决方案（即使是一个需要三天的解决方案），那么尝试优化它真的值得吗？我**无法**想象实际调试此代码并正常工作以在不到天真的解决方案所需的三天内发布结果。

# c# - 使用 ICollection。转换为字典

> ID：10917837
> 
> 赞同：-4
> 
> 时间：2012-06-06T15:59:58.540
> 
> 标签：c#, .net

我正在使用一个 API 来公开这样的覆盖

```
SuperAwesomeNinjaMethod(ItemToProcess item, ICollection itemProperties)
{

} 
```

这一切都很好，花花公子，除了`ICollection`是一本字典。

我该如何使用它？我想我可以传入一个列表，但我想保留项目名称和项目值之间的关联，所以我不会神奇地从集合中挑选项目并将它们分配给**item**。

[编辑]

抱歉，我的问题显然不清楚。我遇到的问题是，当调用层次结构中某处传递的对象是字典时，如何使用 ICollection。本质上，我不知道在这种情况下通过 ICollection 枚举将通过 KeyValuePair 对象的集合进行枚举。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:09:18.533

不知道你在这里问什么，但如果你需要这个方法来不同地处理字典，你可以测试看看是否`ICollection`也是`IDictionary`：

```
if (itemProperties is IDictionary)
{
    // Dictionary specific code here.
    var itemPropertiesAsDictionary = itemProperties as IDictionary;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:12:06.473

如果我正确理解了您的问题，您希望将其`SuperAwesomeNinjaMethod`与指定的签名一起使用，并且对于第二个参数，您希望传递 的实例`System.Collections.Generic.Dictionary<TKey, TValue>`，对吗？

该类`Dictionary`实现了`ICollection`接口，因此您可以只传递您的`Dictionary`实例。你会得到一个集合[`KeyValuePair<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/5tbh8a42)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:12:45.130

问题是什么？您是否在问如何将字典传递给需要 ICollection 的方法？该方法是否需要将项目列表或字典转换为 ICollection？

在任何情况下[Dictionary<>](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)都实现了 ICollection ，因此您应该按原样传递它。如果要传递键或值，也可以使用[Keys](http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx)和[Values](http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx)属性。他们都实现了ICollection。

以下调用将在没有任何类型转换的情况下成功：

```
 var dict = new Dictionary<string, string> {{"aKey", "aValue"}};
        var item = new ItemToProcess();

        SuperAwesomeNinjaMethod(item,dict);
        SuperAwesomeNinjaMethod(item, dict.Keys);
        SuperAwesomeNinjaMethod(item, dict.Values); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-06T16:12:52.520

您是否尝试过仅对字典进行类型转换？

```
SuperAwesomeNinjaMethod(ItemToProcess item, ICollection itemProperties)
{
    // Just pretending your dictionary is string, string...
    var myDictionary = (Dictionary<string string>)itemProperties;

    // ... carry on...

} 
```

`IDictionary`如果您只需要合同，您也可以进行类型转换。

# mysql - 如何最好地查询多对多关系以获取“每个 X 的所有 Y 都具有匹配的 Y”

> ID：10917838
> 
> 赞同：1
> 
> 时间：2012-06-06T15:59:58.820
> 
> 标签：mysql, many-to-many

我有一张桌子，两列，`user`和`group`。这是一个多对多的关系，所以我们可能...

```
group |  user
1     |  1
1     |  2
1     |  3
2     |  1
2     |  3
3     |  1
3     |  4
4     |  2
4     |  3 
```

... 等等。

我需要获取包含特定用户 ID 的所有组中的用户列表。因此，对于上述情况，如果我给它用户 ID 3，它将首先获取该用户 ID 的所有组（在本例中为 1、2 和 4），然后返回这些组的所有用户（在本例中为 1 , 2 和 3)。现在，这是通过两个嵌套选择完成的：

```
SELECT * FROM other_table
WHERE user_id IN (
    SELECT user_id FROM table WHERE group_id IN (
        SELECT group_id FROM table WHERE user_id = 3
    )
) 
```

这被证明是非常低效的。我在这里有什么明显的遗漏吗？

即使我自己运行查询，它的运行效率也很低：

```
SELECT user_id FROM table WHERE group_id IN (
    SELECT group_id FROM table WHERE user_id = 3
) 
```

编辑：这是`CREATE TABLE`桌子的。

```
CREATE TABLE `user_groups` (
  `user_id` bigint(12) unsigned NOT NULL,
  `group_id` bigint(12) unsigned NOT NULL,
  PRIMARY KEY  (`user_id`,`group_id`),
  KEY `user_id` (`user_id`),
  KEY `group_id` (`group_id`),
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

编辑：并在下面的答案中解释查询会发生什么：

```
id | select_type | table | type   | possible_keys            | key      | key_len | ref         | rows | Extra
1  | SIMPLE      | t1    | ref    | PRIMARY,user_id,group_id | PRIMARY  | 8       | const       | 839  | Using index
1  | SIMPLE      | t2    | ref    | PRIMARY,user_id,group_id | group_id | 8       | t1.group_id | 2331 | 
1  | SIMPLE      | users | eq_ref | PRIMARY                  | PRIMARY  | 8       | t2.user_id  | 1    | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:09:41.997

只需使用自加入：

```
SELECT other_table.*
FROM   `table` t1
  JOIN `table` t2 USING (group_id)
  JOIN other_table ON other_table.user_id = t2.user_id
WHERE  t1.user_id = 3 
```

# iphone - Xcode，iPhone上非常奇怪的SQLite SQL SELECT LIKE问题

> ID：10917841
> 
> 赞同：1
> 
> 时间：2012-06-06T16:00:07.853
> 
> 标签：iphone, sqlite, select

我为我的 iPhone 制作了一个 SQLite 应用程序。当我在我的 iMac 上的 SQLite DB 上测试我的 SELECT 时，一切正常，但是在 iPhone 上我没有返回任何行。

```
SELECT ID, SAP_PART_NR, SAP_DESC, MOQ, INC, NLT, DISCOUNT_CODE, AD_EURO, AD_USD, OEM_EURO, OEM_USD FROM Component WHERE SAP_PART_NR LIKE '%AWM423%' LIMIT 200 
```

### 现在奇怪的部分

当我在 iPhone 上使用下面的选择时，一条记录返回 SAP_PART_NR **AWM42300V**

```
SELECT ID, SAP_PART_NR, SAP_DESC, MOQ, INC, NLT, DISCOUNT_CODE, AD_EURO, AD_USD, OEM_EURO, OEM_USD FROM Component WHERE SAP_PART_NR LIKE '%AWM42%' LIMIT 200 
```

在 iMac 上测试时，两个选择都返回一行（应该如此）

这是 iPhone/SQlite 上的某种错误吗？

我无法弄清楚....我所有的头发都变白了....:-(

### 非工作代码（未选择行）

```
-(void) searchDB:(NSString *)strSearch {

    NSString *wildcardSearch = [NSString stringWithFormat:@"%%%@%%", strSearch];

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if(searchSTMT == nil) {
       const char *sql = "SELECT ID, SAP_PART_NR, SAP_DESC, MOQ, INC, NLT, DISCOUNT_CODE, AD_EURO, AD_USD, OEM_EURO, OEM_USD FROM Component WHERE SAP_PART_NR LIKE '%AWM4230%'";
        if(sqlite3_prepare_v2(database, sql, -1, &searchSTMT, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating view statement. '%s'", sqlite3_errmsg(database));
    }

    if(SQLITE_DONE != sqlite3_step(searchSTMT)) {

        while(sqlite3_step(searchSTMT) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(searchSTMT, 0);
            Database *DatabaseObj = [[Database alloc] initWithPrimaryKey:primaryKey];
            DatabaseObj.sapPart = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 1)];
            DatabaseObj.sapDesc = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 2)];
            DatabaseObj.sapMOQ = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 3)];                
            DatabaseObj.sapINC = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 4)];                 
            DatabaseObj.sapNLT = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 5)];
            DatabaseObj.sapDISCOUNT = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 6)]; 

            DatabaseObj.oemEURO = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 7)];
            DatabaseObj.oemUSD = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 8)];    
            DatabaseObj.adEURO = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 9)];         
            DatabaseObj.adUSD = [NSString stringWithUTF8String:(char *)sqlite3_column_text(searchSTMT, 10)];                        

            [appDelegate.compArray addObject:DatabaseObj];
        }
    }
    else 
        NSAssert1(0, @"Error while getting the rows. '%s'", sqlite3_errmsg(database));

    //Reset the detail statement.
    sqlite3_reset(searchSTMT);

} 
```

### 选择工作代码 1 行

```
+ (void) getInitialDataToDisplay:(NSString *)dbPath {<p>
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    sqlite3_stmt *selectstmt = NULL;

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

       const char *sql = "SELECT ID, SAP_PART_NR, SAP_DESC, MOQ, INC, NLT, DISCOUNT_CODE, AD_EURO, AD_USD, OEM_EURO, OEM_USD FROM Component WHERE SAP_PART_NR LIKE '%AWM4230%'";

        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
                Database *DatabaseObj = [[Database alloc] initWithPrimaryKey:primaryKey];
                DatabaseObj.sapPart = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                DatabaseObj.sapDesc = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
                DatabaseObj.sapMOQ = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];                
                DatabaseObj.sapINC = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];                 
                DatabaseObj.sapNLT = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)];
                DatabaseObj.sapDISCOUNT = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 6)]; 
                //PRICES
                DatabaseObj.oemEURO = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 7)]; 
                DatabaseObj.oemUSD = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 8)];    
                DatabaseObj.adEURO = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 9)];         
                DatabaseObj.adUSD = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 10)];                      

                [appDelegate.compArray addObject:DatabaseObj];
            }
        }
    }
    else
        sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.

    sqlite3_reset(selectstmt);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:43:10.787

已解决 - 查看评论。我仍然不是 100% 确定为什么/如何解决它。

# wpf - 数据触发器绑定未按预期工作

> ID：10917842
> 
> 赞同：2
> 
> 时间：2012-06-06T16:00:11.543
> 
> 标签：wpf, xaml, data-binding, wpf-controls

我有一种样式，它定义了内容控件的模板。

对于所有内容属性为空的控件，我想显示文本说控件是空的......但是下面的 xaml 不起作用，有人知道为什么吗？

```
 <Style TargetType="ContentControl" x:Key="style">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Content, RelativeSource={RelativeSource Self}}" Value="{x:Null}">
                    <Setter Property="ContentControl.Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <TextBlock Background="Blue">EMPTY!</TextBlock>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>

<ContentControl Content="{x:Null}" Style="{StaticResource style}" /> 
```

它没有向我显示文本“EMPTY！”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:14:26.713

**Your code works.** Take that GUI designer of yours and throw it out the window.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:10:03.893

以下作品：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">    
    <Window.Resources>
    <Style TargetType="ContentControl" x:Key="style">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=Content, RelativeSource={RelativeSource Self}}" Value="{x:Null}">
                <Setter Property="ContentControl.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <TextBlock Background="Blue">EMPTY!</TextBlock>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
        </Style.Triggers>
    </Style>     
    </Window.Resources>
    <Grid>
        <ContentControl Content="{x:Null}" Style="{StaticResource style}" />
    </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T16:05:53.670

只需将您的文本块值从上下文之间更改为属性 text="empty" 就像

```
 <TextBlock Background="Blue" Text="Empty"></TextBlock> 
```

![在此处输入图像描述](../Images/6a35db1eb1993837409cceccf7ebd5b8.png)

# php - 如何获取特定数组 ID 的值

> ID：10917847
> 
> 赞同：0
> 
> 时间：2012-06-06T16:00:27.633
> 
> 标签：php, arrays, if-statement

我有一个名为 $fields 的数组。如果我这样做：

```
foreach ($fields as $id => $field) {
  print $id."<br />";
} 
```

我得到：

```
field_track_icon
field_session_number
field_job_title 
```

我知道这很简单，但我的大脑就是想不出答案，而且我似乎无法用谷歌搜索正确的术语。如何将 foreach 包装在基于正在处理的 id 的 if 语句中？

伪代码将是：

```
if($fields['field_session_number'] == 'S2') {
   foreach($fields as $id=>$field) {
      print $field->content;
   }
} 
```

基本上，我正在处理 $fields 数组中返回的单个数据记录。如果正在处理的字段的 id 是 S2，我只想打印出单个字段属性（`$field->content`或`$field->prefix`，例如）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:16:21.107

如果您想获得具有特定键的元素，则不必进行循环 - 您只需获得它。

```
$field = $fields['field_session_number'];
echo $field->content;
echo $field->prefix; 
```

如果 ID 不是数组键，而是与内容或前缀相同，则需要循环：

```
foreach ($fields as $field) {
    if ($field->id === 'S2') {
        echo $field->content;
    }
} 
```

# asp.net-mvc - MVC：创建指向应用程序基本 URL 的链接的最简单方法？

> ID：10917852
> 
> 赞同：4
> 
> 时间：2012-06-06T16:00:43.397
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-routing

我有一个页面，我想在其中包含一个“主页”链接，该链接将我带到我的应用程序的基本 URL。到目前为止，我设法实现这一目标的最简单方法是通过以下 Razor 代码行，但它并不漂亮，我对此也不是非常有信心：

```
@Html.RouteLink(MyResources.HomeLinkLabel, new { controller = "" }) 
```

请注意，如果我不包含，`controller = ""`那么它生成的超链接会将我带到当前页面，而不是我的基本 URL。

我觉得我错过了一些明显的东西......这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T16:10:03.567

您可以使用以下代码获取根 URL

```
Url.Content("~/"); 
```

服务器端`~/`语法引用应用程序的根目录（这意味着如果您的应用程序在 IIS 的虚拟路径中注册，它将考虑在内）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T16:04:01.483

如果要执行特定操作，只需包含控制器名称和要执行的操作：

```
@Html.RouteLink(MyResources.HomeLinkLabel, new { controller = "Home", action = "Index" }) 
```

现在，如果你想进入根目录，你可以放一些类似的东西

```
<a href="@Url.Content("~/")">...</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T05:46:35.023

你也可以只写普通的 HTML：

```
<a href="/">@MyResources.HomeLinkLabel</a> 
```

# python - App Engine OpenID - 对于 /_ah/xrds 的请求，我收到 404 错误

> ID：10917855
> 
> 赞同：1
> 
> 时间：2012-06-06T16:01:04.047
> 
> 标签：python, google-app-engine, openid, xrds

Yahoo 和 AOL 正在我的一个 App Engine 应用程序上向 /_ah/xrds 提交请求。我的理解是 xrds 是[提供 OpenIDs](http://openid.net/specs/openid-authentication-2_0.html#XRDS_Sample)时响应的一部分。我不打算提供 OpenID。我现在假设有人试图利用 OpenID 系统中的漏洞来处理垃圾邮件之类的事情，因为我也收到了来自俄罗斯的请求。这是一个我很少有经验的领域，所以我的假设可能不正确，有问题可以随时纠正我。

为什么 Yahoo 和 AOL 向 /_ah/xrds 发送请求？

如何在 python/webapp2 中响应该请求，让他们知道我不提供 OpenID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:20:56.243

如果您可以在流程中发布，则此请求即将到来，它将有助于调试问题。然而，最有可能的解释是 Yahoo! 并且 AOL 正在尝试对提供的“领域”字符串执行发现，以确保可以从领域字符串指定的站点中发现 return_to URL。这是 OpenID2 规范第 11.1 和 13 节中指定的安全措施。

AOL OpenID 提供程序的正常流程是验证 return_to URL（根据第 11.1 节），该 URL 对领域字符串执行发现（第 13 节中的 XRDS）。如果无法验证 return_to URL，则 AOL 将在 UI 中向用户显示警告消息。

可以在此处找到有关上述流程的更详细描述以及如何解决：[AOL openid 网站验证](https://stackoverflow.com/questions/7529013/aol-openid-website-verification/7529593#7529593)

# java - 控制何时创建对象

> ID：10917858
> 
> 赞同：1
> 
> 时间：2012-06-06T16:01:13.320
> 
> 标签：java

假设我需要如下创建一个对象并设置一些值

```
 FileMetaData fileMeta = fileContainer.getMetaData();

    fileMeta.setFileName("file name");
    fileMeta.setServer("my box");
    fileMeta.setDirectory("/path/to/dir");
    fileMeta.setFileType(FileType.PROPERTIES); 
```

后来我打算使用这个对象引用来做一些有用的事情。

我想认识到系统用户可能不设置某些字段这一事实，例如，人们可能会忘记

```
 fileMeta.setDateModified(12345); 
```

是否有可能保证在使对象可用之前设置所有（或某些特定）字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:08:10.000

语言中没有任何东西可以强制执行此操作（除了有一个单独的可见构造函数，它接受所有必需的参数），但您可以通过构建器模式的变体和一些方法链接来惯用地执行此操作：

```
FileMetaData fileMeta = new FileMetaDataBuilder(fileContainer.getMetaData())
    .setFileName("file name")
    .setServer("my box")
    .setDirectory("/path/to/dir")
    .setFileType(FileType.PROPERTIES)
    .build(); 
```

该`build()`方法可以确保在`FileMetaData`使用所有必需参数调用适当的构造函数之前设置所有必需的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:04:21.933

使用构建器模式并将引用传递给构建器。当您在顶部完成添加附加内容后，调用 .build 并捕获返回的 FileMetaData 实例。

您可以通过在设置所有先决条件之前不允许构建成功来限制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:10:05.000

基本上我可以分为以下3种方式。

首先是基于类本身。您可以将方法添加`isReady()`到您的课程中。此方法将执行所有检查并返回 true 或 false。

其他方法是使用工厂或生成器模式以及可能的对象存储库。factory 和 builder 都保证创建处于就绪状态的对象。存储库可用于在那里“发布”就绪对象，因此其他代码请求对象并仅在就绪状态下接收它们。

另一种方法是使用包装器（装饰器）模式。

```
interface Foo {
    public void foo(); //business method
}

class FooImpl implements Foo {
    public void foo(){} // does the work
}

class FooDecorator implmeents Foo {
    Foo foo;
    public void foo(){
        if (isInitialized()) {
            foo.foo();
        }
        throw IllegalStateException("Not initialized");
    } 
} 
```

该解决方案可以使用动态代理或使用 AOP 框架来实现。

# java - java.lang.NoSuchMethodError：org.codehaus.jackson.JsonFactory.configure

> ID：10917859
> 
> 赞同：0
> 
> 时间：2012-06-06T16:01:19.133
> 
> 标签：java, eclipse, jakarta-ee, jboss6.x

我正在使用以下代码并引发异常

```
accessTokenResponse = new GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant(new NetHttpTransport(), new JacksonFactory(), CLIENT_ID,CLIENT_SECRET, authorizationCode, REDIRECT_URI).execute(); 
```

例外：

```
java.lang.NoSuchMethodError: org.codehaus.jackson.JsonFactory.configure(Lorg/codehaus/jackson/JsonGenerator$Feature;Z)Lorg/codehaus/jackson/JsonFactory; 
```

JavaType 类在 jackson-core JAR 中，ObjectMapper 类在 jackson-mapper 中，它们都是相同的版本。

# visual-studio-2010 - Visual Studio 无法扫描/查找 MSTest 方法

> ID：10917864
> 
> 赞同：2
> 
> 时间：2012-06-06T16:01:34.380
> 
> 标签：visual-studio-2010, unit-testing, automation, mstest

我用 nunit 测试转换了一个项目，所以它有 mstests。它编译，当我右键单击项目时，我可以选择“运行单元测试”。它可以工作，并且测试成功执行。

但是，我无法在“测试列表编辑器”或“测试视图”中看到我的测试。我试过了：

*   在这两个列表中选择“刷新”按钮
*   重建解决方案
*   重新启动视觉工作室
*   [激活的后台发现](https://stackoverflow.com/a/6759929/284758)（我有 VS 2010 SP1 和 resharper）

这些，单独或组合，都没有奏效。还可以尝试什么来强制 Visual Studio 完全识别这些测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T22:43:34.127

我发现答案是我必须[将类库转换为 MsTest 项目](http://alexduggleby.com/2008/02/19/turning-a-class-library-project-into-a-mstest-project-or-using-mbunit-mstest-and-other-frameworks-in-one-project/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T04:27:43.683

还要确保您的测试类是公开的，我花了将近一天的时间试图弄清楚为什么 MS 测试框架无法发现我的测试，直到我将访问修饰符从默认修改为公开

# javascript - JavaScript 谷歌地图坐标验证

> ID：10917867
> 
> 赞同：3
> 
> 时间：2012-06-06T16:01:52.533
> 
> 标签：javascript, google-maps

我有一个表格，您可以在其中选择地图上的一个点，它会填充纬度和经度文本框，或者您可以自己输入坐标。

我需要添加验证以确保用户输入有效范围，但我不确定我是否有正确的 RegEx。这是我正在使用的方法：

```
var regex_coords = "[-]?[0-9]*[.]{0,1}[0-9]";

// ...

valid_coords: function (number) {
if (number.match(regex_coords) && !isNaN(Number(number))) {
    $("#btnSaveResort").removeAttr("disabled");
    return true;
} else {
    $("#btnSaveResort").attr("disabled", "disabled");
    return false;
}
}, 
```

无论我在文本框中输入了什么，此函数都会返回 false。

有什么更好的方法建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T17:31:12.730

纬度和经度有不同的范围：纬度是（-90,90），经度是（-180,180），所以使用单个正则表达式并不能真正起作用。您可能还想检查纬度是否可以绘制在地图上——这意味着它需要大致位于 (-85,85) 范围内。或者您可能希望将范围限制为包含特定区域的边界矩形。

为什么不明确测试范围？

```
function inrange(min,number,max){
    if ( !isNaN(number) && (number >= min) && (number <= max) ){
        return true;
    } else {
        return false;
    };
} 
```

然后，您可以根据需要定制代码。如果纬度和经度都有效，您可能只想启用保存按钮。

```
valid_coords: function(number_lat,number_lng) {
    if (inrange(-90,number_lat,90) && inrange(-180,number_lng,180)) {
        $("#btnSaveResort").removeAttr("disabled");
        return true;
    }
    else {
        $("#btnSaveResort").attr("disabled","disabled");
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:05:29.993

您的正则表达式看起来不正确。尝试：

```
var regex_coords = /\-?[0-9]+[\.]{0,1}[0-9]*/; 
```

# php - 尝试访问数组中的对象元素

> ID：10917869
> 
> 赞同：1
> 
> 时间：2012-06-06T16:01:55.050
> 
> 标签：php, html, arrays, object

我在工作中使用了一个我稍微不熟悉的框架，并尝试访问存储在名为`$items`. 我试图`die(print_r($items[0]))`尝试获取第一个元素，但它说 0 是未定义的索引。这是结果`print_r($items)`：

任何帮助深表感谢。如果您有任何问题，我很乐意回答，因为我知道这有点含糊。我认为解释这个框架实际上是如何工作的会占用太多的空间。

我发现第一个元素是 2 而不是 0，但我仍然无法访问对象中的任何元素。当我尝试`print_r($items[2]->fields)`它没有返回任何东西，只是一个空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:09:21.390

您在此处列出的数组的索引不为 0（有关更多帮助，请查看此处： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)）而不是尝试使用索引访问每个项目。你为什么不使用一个`foreach`？

```
foreach($items as $item)
{
  //Do what you want with each object here
  var_dump($item);
} 
```

这将允许您在不使用索引的情况下访问每个对象。有关更多信息，`foreach`请查看此处：[http ://us3.php.net/manual/en/control-structures.foreach.php](http://us3.php.net/manual/en/control-structures.foreach.php)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:29:15.503

我认为这就是你想要的：

```
$item = current($items);
foreach ($item->fields as $key => $val) {
  echo "$key => $val\n";
} 
```

**更新：**

似乎您无法获得`$item->fields`，因为它是`Dase_DBO_Project`对象的受保护属性：

```
[fields:protected] => Array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:07:31.717

我在您的数组中没有看到任何索引为 0 的元素，只有键 5、4、3 和 2。要从数组中获取第一项，请使用`current($items)`or `reset($items)`。

# c++ - gcc 4.7 中的错误？与否，我不确定，所以我在这里问

> ID：10917875
> 
> 赞同：1
> 
> 时间：2012-06-06T16:02:25.337
> 
> 标签：c++, gcc, c++11

在此代码段中：

```
template<class T, int Min, int Max>
class Range
{
    const T min_ = Min; // works without const

    T max_ = Max;

}; 
```

我收到错误

> 没有 ctor 的类中的非静态 const 成员

但如果我在一个类中初始化它，这无关紧要。应该将其记录为错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:06:04.843

是的。隐式构造函数包括那些初始化程序，因此不会发生错误。§12.1/6：

> 隐式定义的默认构造函数执行类的一组初始化，这些初始化将由用户编写的该类的默认构造函数执行，没有 ctor-initializer (12.6.2) 和空的复合语句。如果该用户编写的默认构造函数格式不正确，则程序格式错误。

和 12.6.2/8：

> 在非委托构造函数中，如果给定的非静态数据成员或基类不是由 mem-initializer-id 指定的（包括由于构造函数没有 ctor-initializer 而没有 mem-initializer-list 的情况）并且实体不是抽象类（10.4）的虚拟基类，则
> 
> — 如果实体是具有大括号或等号初始化器的非静态数据成员，则实体按照 8.5 中的规定进行初始化；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:53:13.640

您收到的是**警告**而不是错误，但您可能正在使用`-Werror`将其变成错误。您应该学会区分差异，因此如果警告无用，您可以禁用错误。警告在行尾显示相关的警告选项，例如`[-Wuninitialized]`在这种情况下，并`-Werror`导致编译器打印：

```
cc1plus: all warnings being treated as errors 
```

或为`-Werror=uninitialized`

```
cc1plus: some warnings being treated as errors 
```

The warning is incorrect, so I've reported it as a bug: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53594](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53594)

# sql - Oracle sql 查询重写

> ID：10917877
> 
> 赞同：1
> 
> 时间：2012-06-06T16:02:32.143
> 
> 标签：sql, oracle

我要查询数据库中的数据，有下表

```
COLUMNS:  Type, Location, name, etc.

DATA:
 1\. Stores in NJ, name = xyz
 2\. Restaurants in NY
 3\. Hotels in US
 4\. Stores in PA
 5\. Restaurants in VA
 6\. Hotels in MD
 7\. Stores in NJ, name = abc
 8\. etc. 
```

我需要一个查询，从 1、2、3 中获取数据

现在，我有以下查询。这运行得更快。但是没有UNION我可以使用任何其他查询吗

```
select type, location from table1 
where type='stores' and location='NJ' and name='XYZ'
  UNION
select type, location from table1 
where type='restaurants' and location='NY'
  UNION
select type, location from table1 
where type='hotels' and location='US' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:07:24.830

您可以使用或：

```
select type, location from table1 
where (type='stores' and location='NJ' and name='XYZ')
or (type='restaurants' and location='NY')
or (type='hotels' and location='US'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:10:15.597

`UNION ALL`比使用更快，`OR`并且 prolly 是您真正需要的：

```
select type, location from table1 
where type='stores' and location='NJ' and name='XYZ'
  UNION ALL
select type, location from table1 
where type='restaurants' and location='NY'
  UNION ALL
select type, location from table1 
where type='hotels' and location='US' 
```

如果你真的想要`OR`：

```
select type, location from table1 
where (type='stores' and location='NJ' and name='XYZ')
or (type='restaurants' and location='NY')
or (type='hotels' and location='US'); 
```

* * *

为了使您的查询更快，请在`type`和`location`列上创建索引`name`！

# java - 将字符串评估为条件 Java

> ID：10917878
> 
> 赞同：23
> 
> 时间：2012-06-06T16:02:37.697
> 
> 标签：java, string, parsing

我必须从 D/B 中检索一组列值并将其作为条件进行检查。

例如，我将在 D/B 列中有类似`"value > 2"`,的字符串。`"4 < value < 6"`（值是一直比较的值）。我将在我的代码中声明一个变量值，我应该评估这个条件。

```
int value = getValue();
if (value > 2)  //(the string retrieved from the D/B)
  doSomething(); 
```

我怎样才能做到这一点？？任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-06T16:09:17.453

下面是一个使用标准（Java 1.6+）脚本库的例子：

```
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;

public class Test {

    public static void main(String[] args) throws Exception {
        ScriptEngineManager factory = new ScriptEngineManager();
        ScriptEngine engine = factory.getEngineByName("JavaScript");

        engine.eval("value = 10");
        Boolean greaterThan5 = (Boolean) engine.eval("value > 5");
        Boolean lessThan5 = (Boolean) engine.eval("value < 5");

        System.out.println("10 > 5? " + greaterThan5); // true
        System.out.println("10 < 5? " + lessThan5); // false
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:05:40.123

这不会是微不足道的：您需要一个解析器来解析数据库中使用的表达式语言。如果它是某种标准的、明确指定的语言，那么您可能可以在 Internet 上找到它，但如果它是内部的东西，那么您可能需要编写自己的语言（可能使用像 ANTLR 这样的解析器生成器。）

[javax.script](http://docs.oracle.com/javase/6/docs/api/javax/script/package-summary.html)包包含一些用于集成外部脚本引擎的工具，例如 Javascript 解释器。另一种想法是引入脚本引擎并将表达式提供给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:07:01.960

You are basically evaluating a scripted expression. Depending what is allowed in that expression, you can get away with something very simple (regular expression identifying the groups) or very complex (embed a javascript engine?).

I'm assuming you're looking at the simple case, where the expression is: [boundary0] [operator] "value" [operator] [boundary1]

Where one, but not both of the [boundary] [operator] groups might be omitted. (And if both are presents, operator should be the same)

I would use a regular expression for that with capturing groups.

Something like: (?:(\d+)\s*([<>])\s*)?value(?:\s*([<>])\s*(\d+))?

And then: boundary1 = group(1); operator1 = group(2); operator2 = group(3); boundary2 = group(4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T16:10:11.260

为了以最大的灵活性评估条件，请使用为嵌入而设计的脚本语言，例如[MVEL](http://mvel.codehaus.org/)可以解析和评估简单的条件表达式，例如问题中的条件表达式。

与在 Java 1.6+ 中使用脚本引擎（特别是使用 JavaScript）相比，使用 MVEL 具有一个巨大的优势：使用 MVEL，您可以将脚本*编译*为字节码，从而在运行时对它们的评估更加高效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T16:10:55.217

这本身并不能回答您的问题；它提供了一种替代解决方案，可能会产生相同的结果。

与其使用定义条件的伪代码存储单个数据库列，不如创建一个表，其中架构定义必须满足的条件类型和这些条件的值。这简化了对这些条件的编程评估，但如果您有多种类型的条件要评估，它可能会变得复杂。

例如，您可能有一个如下所示的表。

```
CONDITION_ID | MINIMUM | MAXIMUM | IS_PRIME  |   ETC.
______________________________________________________
      1      |    2    |   NULL  |   NULL    |   ...
      2      |    4    |    6    |   NULL    |   ... 
```

这些行条目分别映射到规则`value > 2`和`6 > value > 4`。

与您提供的方法相比，这带来了许多好处。

*   提高性能和清洁度
*   您的条件可以在数据库级别进行评估，并可用于过滤查询
*   您不必担心处理伪代码语法被破坏的场景

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T16:08:05.213

您应该尝试通过执行类似的操作来解析 if 语句中的字符串

```
if(parseMyString(getValue()))
    doSomething(); 
```

在 parseMyString 中可以确定您需要为条件评估什么。如果您不知道如何创建解析器，请查看：[http ://www.javapractices.com/topic/TopicAction.do?Id=87](http://www.javapractices.com/topic/TopicAction.do?Id=87)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-06T16:07:11.840

最新版本的 java (Java 7) 允许在字符串上使用 Switch Case 语句，如果没有太多可能的变化，您可以这样做或类似：

```
int value = getValue();
switch(myString) {
  case "value > 2" : if (value > 2) {  doSomething();} break;
  case "4 < value < 6" : if (value > 4 && value < 6) {  doSomethingElse();} break;
  default : doDefault();
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-06-06T17:17:02.200

除了使用 Java 7 之外，一个非常好的方法是使用枚举。如下所示声明枚举

上面的枚举有一个常量集合，其值设置为您期望从数据库返回的字符串。由于您可以在 switch case 中使用枚举，因此其余代码变得简单

```
enum MyEnum
{
    val1("value < 4"),val2("4<value<6");
    private String value;

    private MyEnum(String value)
    {
        this.value = value;
    }
}

public static void chooseStrategy(MyEnum enumVal)
{   
    int value = getValue();
    switch(enumVal)
    {
        case val1:
        if(value > 2){}
        break;
        case val2:
        if(4 < value && value < 6) {}
        break;
        default:
    }
}

public static void main(String[] args)
{
    String str = "4<value<6";
    chooseStrategy(MyEnum.valueOf(str));
} 
```

您所要做的就是将您的字符串传递给 enum.valueof 方法，它将返回适当的枚举，该枚举被放入 switch case 块中以执行条件操作。在上面的代码中，您可以传递任何字符串来代替本示例中传递的内容

# exception-handling - 嵌入式 ECL Lisp 错误处理获取默认错误字符串和可能的行号

> ID：10917887
> 
> 赞同：0
> 
> 时间：2012-06-06T16:03:10.470
> 
> 标签：exception-handling, lisp, common-lisp, conditional-statements, ecl

请先查看[#7755661](https://stackoverflow.com/questions/7755661/embedded-ecl-lisp-error-handling)。我正在使用 ECL，基本上是想执行一些代码，捕获任何可能发生的条件，然后继续执行，而不提示或进入调试器。使用以下处理程序案例宏很容易实现这一点：

```
(handler-case
  (load "code.lisp") ; this may raise a condition

  (error (condition)
    (print condition))) ; this prints sth like #<a UNBOUND-VARIABLE> 
```

我唯一的问题是我找不到一种通用的方法来为用户打印更有意义的错误。事实上，我的应用程序是一个 HTTP 服务器，输出到一个网页。code.lisp 是由用户编写的，它可以引发任何类型的条件，我现在想在我的代码中列出它们。当我不使用处理程序案例时，我只想打印在 REPL 上看到的相同错误消息，但在 HTML 页面中，例如对于“未绑定变量”错误，类似“变量 VAR 未绑定”的字符串。

通过检查类型的条件对象，`UNBOUND-VARIABLE`我看到它有两个插槽：`SI:REPORT-FUNCTION`，这是一个编译函数，并且`SI:NAME`在这种情况下设置为变量的名称。我想`SI:REPORT-FUNCTION`可能是我需要调用的，但我该如何调用它？如果我尝试：

```
(handler-case foo (error (condition) (SI::REPORT-FUNCTION condition))) 
```

它告诉我 SI:REPORT-FUNCTION 未定义。ECL 中的 SI 或 SYS 是实现内部函数和变量的包，但我不担心我的代码是否不可移植，只要它可以工作。

顺便说一句，在其他类型的条件对象中，还有其他显然有用的插槽，命名为`SI:FORMAT-CONTROL`and `SI:FORMAT-ARGUMENT`，但我也无法从我的代码中访问它们中的任何一个。

我一直在寻找与`getMessage()`Lisp 中 Java 异常对象的方法类似的东西，但我的资料中没有一个提到过类似的东西。

此外，是否有希望能够在 code.lisp 中获得错误发生的行号？否则，用户将很难在他的 code.lisp 源文件中找到问题所在。我真的很想提供这些信息，并且在第一个错误处停止对我来说是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:16:37.060

在 Common Lisp 中，当禁用打印转义时，会打印错误消息。

```
 CL-USER > (handler-case
               a       
             (error (condition)
               (write condition :escape nil)))

The variable A is unbound.
#<UNBOUND-VARIABLE 4020059743> 
```

请注意，`PRINT`绑定`*print-escape*`到`T`.

使用`PRINC`作品 - 它绑定`*print-escape*`到`NIL`.

```
CL-USER > (handler-case
              a                
            (error (condition)
              (princ condition)))

The variable A is unbound.
#<UNBOUND-VARIABLE 4020175C0B> 
```

这在[CLHS 9.1.3 打印条件](http://www.lispworks.com/documentation/lw50/CLHS/Body/09_ac.htm)中进行了描述。

还要注意，当你有一个对象，它有一个槽并且这个槽的值是一个函数，那么你需要使用函数获取槽值`SLOT-VALUE`，然后使用`FUNCALL`or`APPLY`并使用正确的参数调用函数。

如果你有一个类型的条件，`simple-condition`那么它有一个格式控制和一个格式参数信息。这将通过一个示例描述如何`FORMAT`在[CLHS 函数 SIMPLE-CONDITION-FORMAT-CONTROL、SIMPLE-CONDITION-FORMAT-ARGUMENTS中使用它](http://www.lispworks.com/documentation/lw50/CLHS/Body/f_smp_cn.htm#simple-condition-format-control)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:07:38.120

我下面的答案是基于我在 ECL 邮件列表中给出的答案。实际上，我会声称这不是嵌入问题，而是 Lisp 问题。您想在导致错误的表单的文件位置获取一些信息。这与条件无关，因为条件的发生与评估的表单是被解释、编译还是已安装在 Lisp 映像中的函数的一部分无关。换句话说，您可以知道正在读取的文件的位置并进行一些包装以添加信息。

以下是非标准的并且容易更改： ECL 通过在源文件上使用 LOAD 时定义变量 ext:: *source-location来帮助您。*此变量包含一个用户永远不应更改或存储的 CONS，但您可以获得文件 as`(CAR EXT:*SOURCE-LOCATION*)`和文件位置为`(CDR EXT:*SOURCE-LOCATION*)`. 然后计划将您的 LOAD 表单嵌入到 HANDLER-BIND 中

```
(defparameter *error-message* nil)
(defparameter *error-tag* (cons))

(defun capture-error (condition)
   (setf *error*
      (format nil "At character ~S in file ~S an error was found:~%~A"
         (cdr ext:*source-location*)
         (car ext:*source-location*)
         condition)))
  (throw *error-tag* *error-message*))

(defun safely-load (file)
  (handler-bind ((serious-condition #'capture-error))
      (catch *error-tag*
        (load file)
        nil))) 
```

`(SAFELY-LOAD "myfile.lisp")`将返回 NIL 或格式化错误。

无论如何，我坚信依靠 LOAD 来实现这一点注定要失败。您应该创建自己的 LOAD 版本，从这里开始

```
(defun my-load (userfile)
  (with-open-file (stream userfile :direction :input :external-format ....whateverformat...)
     (loop for form = (read stream nil nil nil)
        while form
        do (eval-form-with-error-catching form)))) 
```

其中 EVAL-FORM-.... 实现了类似上面的代码。这个函数可以做得更复杂，你可以跟踪文件位置、行号等。这样你的代码也将更便携。

因此，请阅读 ANSI 规范并学习该语言。您不知道如何以可读的方式打印条件，而是尝试使用 ECL 内部，这表明您将来可能会面临更多问题，尝试使用非便携式解决方案（隐藏插槽名称、报告功能等）而不是首先尝试标准方式。

# ruby-on-rails - 使用 < :: 时的类继承

> ID：10917888
> 
> 赞同：0
> 
> 时间：2012-06-06T16:03:10.467
> 
> 标签：ruby-on-rails, ruby

REST API railscast 具有以下代码示例：

```
module Api
  module V1
    class ProductsController < ApplicationController
      class Product < ::Product
        def as_json(options={})
          super.merge(released_on: released_at.to_date)
        end
      end
    end
  end
end 
```

我无法遵循以下内容：

```
 class Product < ::Product 
```

...做？当我尝试在 irb 中重新创建类似的东西时，我得到：

```
module Fooirb(main):001:0> module Foobar
irb(main):002:1> class Product < ::Product
irb(main):003:2> end
irb(main):004:1> end
NameError: uninitialized constant Product
    from (irb):2:in `<module:Foobar>'
    from (irb):1 
```

[屏幕投射](http://railscasts.com/episodes/350-rest-api-versioning?view=asciicast)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T16:09:12.050

令牌表示一个命名空间，`::`如果之前没有直接使用任何东西，它会访问顶级命名空间。因此，例如，以这个小程序为例：

```
class Bar
  def initialize
    puts "New ingot created"
  end
end

module Foo
  class Bar
    def initialize(location)
      puts "New bar built in #{location}".
    end
  end

  def self.new_bar(which)
    if which == :top
      Bar.new("Rubytown, USA")
    else
      ::Bar.new
    end
  end
end 
```

如果您致电，则会打印`Foo.new_bar(:top)`该消息。`New bar built in Rubytown, USA`如果改为使用，比如说，`Foo.new_bar(:place_to_drink)`它会打印`New ingot created`“.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:10:48.377

此代码有效：

```
class Product
end

module Foo
  class Product < ::Product
  end
end 
```

关键是命名空间：你在全局命名空间中定义第一个 Product（即 Object，so `Object::Product == ::Product`）（就像在 javascript`foo = bar`中等于`window.foo = bar`）

相反，`module Foo; class Product`在模块 Foo 范围内，所以等于`Foo::Product`. 所以可以这样写前面的例子：

```
class Object::Product
end

module Object::Foo
  class Object::Foo::Product < Object::Product
  end
end 
```

意思是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T16:12:44.097

::Product 在顶级命名空间中查找 Product 类。在这种情况下，它正在访问现有模型。从铁轨演员：

> 我们要做的是在 ProductsController 中创建一个新的 Product 类，它继承自我们现有的 Product 模型类并在那里进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T16:19:02.650

< 表示继承自

:: 表示命名空间，但如果以 :: 开头表示没有命名空间

class Product < ::Product 表示类 Product 继承自位于当前命名空间之外的另一个类 Product

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T16:23:18.943

About the error you have, don't use `irb` use `rails console` (IRB doesn't load rails app, see [http://guides.rubyonrails.org/command_line.html#rails-console](http://guides.rubyonrails.org/command_line.html#rails-console))

# objective-c - 如何在 webview 中禁用 contextualMenu（自定义）？

> ID：10917889
> 
> 赞同：1
> 
> 时间：2012-06-06T16:03:11.223
> 
> 标签：objective-c, macos, cocoa, webview

我实现了 `contextMenuItemsForElement' for`WebView`

```
 - (NSArray *)webView:(WebView *)sender contextMenuItemsForElement:(NSDictionary *)element defaultMenuItems:(NSArray *)defaultMenuItems
{

    NSMenuItem* newMenuItem = [[NSMenuItem alloc] initWithTitle:@"NewMenuItem" action:@selector(newContextualMenu:) keyEquivalent:@""];
    [newMenuItem setEnabled:YES];
    NSArray *menuItemArray =  [NSArray arrayWithObject:newMenuItem];
    return menuItemArray;
} 
```

我试图`[newMenuItem setEnabled:NO];`禁用 中的上下文菜单`WebView`，但它不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:56:03.063

我相信上下文菜单中的`WebViews`自动确定其状态`NSMenuItems`，这可能是手动状态设置不起作用的原因（`-setEnabled:`）。

因为`- (NSArray *)webView:(WebView *)sender contextMenuItemsForElement:(NSDictionary *)element defaultMenuItems:(NSArray *)defaultMenuItems`每次右键单击时都会调用，所以最简单的方法是在不需要`NSMenuItem`时不添加，但这可能不是您想要的。

我不知道[如何](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74276)为`WebView`. 您最好的选择可能是利用已有的验证机制与[自动菜单启用](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74653)相一致。

```
- (BOOL)validateMenuItem:(NSMenuItem *)item {
    BOOL shouldEnable = ... 
    if ([item action] == @selector(newContextualMenu:) &&
        !shouldEnable) {
        return NO;
    }
    return [super validateMenuItem:item]; // only use if super implements
} 
```

这将在定义您的操作的位置进行定义，因为它会在同一个位置搜索它们。

*   相关[菜单启用/禁用文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html)。
*   启用验证文档的相关[菜单](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSMenuValidation_Protocol/Reference/Reference.html)。

# ms-access - 如何使用表单名称作为字符串创建新的表单实例

> ID：10917896
> 
> 赞同：1
> 
> 时间：2012-06-06T16:03:41.333
> 
> 标签：ms-access, instance, vba, ms-access-2010

使用表单名称创建封闭表单的新表单实例的代码

**我想用一个变量替换长的 Select Case 列表。**

[模块的完整代码](http://pastebin.com/Cw7GjPMT)

* * *

在 Access 2010 中，我有一个 VBA 函数，当给定包含表单名称的字符串时，它会打开一个新的表单实例。通过将表单变量“frm”添加到集合中：

```
mcolFormInstances.Add Item:=frm, Key:=CStr(frm.Hwnd) 
```

我能弄清楚打开“frm”的唯一方法是使用我手动输入的 Select Case 语句。

```
Select Case strFormName
    Case "frmCustomer"
        Set frm = New Form_frmCustomer
    Case "frmProduct"
        Set frm = New Form_frmProduct        
    ... etc ... !
End Select 
```

我希望它自动完成，有点像这样（尽管这不起作用）：

```
Set frm = New Eval("Form_" & strFormName) 
```

或者通过一些代码：

```
For Each obj In CurrentProject.AllForms 'or AllModules, neither work
    If obj.Name = strFormName Then
        Set FormObject = obj.AccessClassObject 'or something
    End If
Next

Set frm = New FormObject 
```

我只是想避免列出我项目中的每一个表单，并且必须在添加新表单时更新列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:32:55.140

我也做了一些我自己的测试和一些关于这个的在线阅读。据我所知，在不使用 DoCmd.OpenForm 的情况下，不可能使用代表该表单名称的字符串创建新表单对象并将其设置为现有表单的实例。

换句话说，除非别人能证明我错了，否则你想做的事是做不到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:53:23.637

我认为您正在寻找类似 MS-Access 2010 功能的东西。（GetForm sub 仅用于测试）：

```
Function SelectForm(ByVal FormName As String, ByRef FormExists As Boolean) As Form
    For Each f In Application.Forms
      If f.Name = FormName Then
        Set SelectForm = f
        FormExists = True
        Exit Function
      End If
    Next
    FormExists = False
End Function

Sub GetForm(ByVal FormName As String)

  Dim f As New Form
  Dim FormExists As Boolean
  Set f = SelectForm(FormName, FormExists)
  If FormExists Then
    MsgBox ("Form Found: " & f.Caption) 
  Else
    MsgBox ("Form '" & FormName & "' not found.")
  End If

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T03:35:46.133

这是我发现的一个丑陋的黑客：

```
DoCmd.SelectObject <acObjectType>, <YourObjectsName>, True
DoCmd.RunCommand acCmdNewObjectForm 
```

RunCommand 步骤不会让您以编程方式控制对象，您必须使用 Forms.Item() 对 Form 变量进行调暗并设置。我通常在 DoCmd.RunCommand 之后关闭表单，然后用有用的东西关闭 DoCmd.Rename（我的用户不喜欢 Form1、Form2 等）。

希望有帮助。

# android - Android TCP/IP Socket通信返回数据失败

> ID：10917910
> 
> 赞同：0
> 
> 时间：2012-06-06T16:04:37.843
> 
> 标签：android, sockets, networking, tcp-ip

我目前正在开发一个 Android 应用程序，以便为我的雇主链接到现有产品。该系统是运行固件的设备，可使用 .NET Windows 程序、直接串行通信或控制网页通过串行、以太网或 wi-fi 进行控制。Android 应用程序旨在自动连接控制网页，以便可以通过手机控制设备，而无需任何人手动查找 IP 地址。为此，我需要能够找到 IP 地址并确定该地址是否对应于这些固件设备之一。

本质上，我想要做的是遍历 Android 看到的所有 IP 地址，并将每个 IP 地址发送到上述方法。这个东西应该用固件命令ping地址，看看发回了什么来确定地址是否对应于固件设备。目前，我一直在通过发送诸如“HOME”或“GETINFO”之类的命令（当然，为固件正确格式化）并比较发送回的内容与预期的响应。像 home 这样的命令还具有引起物理响应的好处，因此我们无需微芯片调试器就知道是否至少收到了命令。

就目前而言，我将正确的地址硬编码并发送到此方法。我知道该应用程序可以使用与 URL 相同的地址成功加载网页控件，因此它必须正确且连接必须良好，但无法直接与设备通信。没有观察到物理响应，也没有发回任何信息——输入流只是超时并返回 -1。让我非常难过的是，据我所知，我发送信息的方式与 .NET Windows 控件完全相同，但它不起作用。

进一步说明：我知道将 IP 地址字符串作为主机名发送到套接字构造函数可能不起作用，但由于没有抛出 UnknownHostException，我知道套接字可以将其解析为 IP 地址。正确的？

我的代码如下：

```
 private class NetworkTask extends AsyncTask<String, Boolean, Boolean> {    
  protected Boolean doInBackground(String... addr){
   try {
          String message = "<FHGETHUBINFO>";
          byte[] input = new byte[8];

          //addr is an array of string parameters containing a single IP address string. E.g. addr[0]=”192.168.199.108”  
          Socket s = new Socket(addr[0],80);

          //outgoing stream redirect to socket
          OutputStream out = s.getOutputStream();
          out.write(message.getBytes());

          Log.v(TAG, "output sent. Waiting for input.");

          InputStream in = s.getInputStream();
          //Skip the exclamation mark and newline. Verified that nothing is received even without a skip.
          in.skip(2);
          int numBytes = in.read(input,0,8);
          Log.v(TAG, "Input received: "+numBytes);
          String st = input.toString();
          //Close connection
          s.close();

          if(st != "HUB INFO"){
                 return true;
          }
          else{
                 return false;
          }

   }

   catch (UnknownHostException e) {
          Log.v(TAG,"UnknownHostException: "+e.getMessage());
          e.printStackTrace();
   }

   catch (IOException e) {
          Log.v(TAG,"IOException: "+e.getMessage());
          e.printStackTrace();
   }
   return false; 
```

感谢您提供的任何帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:30:03.590

同意我应该在套接字上调用 isReachable 只是为了验证目的，所以谢谢你的提示！然而，事实证明问题是设备没有在端口 80 上通信，所以我有错误的端口这一事实肯定是问题的根源。谢谢你的建议，无论如何。

# ruby-on-rails - 使用 kaminari 加载页面范围

> ID：10917916
> 
> 赞同：1
> 
> 时间：2012-06-06T16:05:06.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, kaminari

我需要用 kaminari 加载页面范围。我的意思是这样的：

模型.page(1..5).per(10)

所以我会在第一页获得前 50 个项目，然后每页继续 10 个项目。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:07:59.600

我通过以下方式解决了同样的问题：

```
if first_load
    ar = []
    (1..n).each do |p|
        ar << Model.page(p)
    end
    ar.flatten 
else
    Model.page(n).per(10)
end 
```

# php - HL7 - 触发 SIU 从 EMR 中提取信息

> ID：10917919
> 
> 赞同：1
> 
> 时间：2012-06-06T16:05:09.717
> 
> 标签：php, hl7, medical, emr

我正在寻找一种使用 HL7 从 EMR 中提取信息的方法。我需要从现有的 EMR 中获取调度信息。我需要的所有信息都在 SIU 消息中。但是，据我了解，这些只是通知并提供新信息的提要。我需要一种方法来为每个现有的调度记录触发 SIU-12，以便提取所有调度日期/时间。有没有办法用 HL7 实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:19:20.957

根据我的经验，每个供应商都会以不同的方式实现这一点，并且没有一致的方法来获取所有现有的调度消息。您最好的选择是独立与每个供应商合作，并确定获取这些数据的最佳方法。并非每个供应商都会在这里友好/乐于助人，所以期待一些不同的反应。

如果您想在没有供应商帮助的情况下使用它，这里有几种我见过的不同方法：

1.  设置一个硬开始日期，在上线之前不会有任何信息。由于 HL7 是基于事件的，因此这是最常支持的工作流程，因为它实际上不需要 EMR 方面的任何更改。这里最大的缺点是您将错过预先存在的信息。结果是它应该适用于每个供应商。
2.  让 EMR 员工从他们的系统中触摸或触发所有计划。执行此操作将因供应商而异。对于某些系统，批量导出将很容易，而对于其他系统，这可能是一个手动过程。
3.  从供应商的数据存储中提取数据并进行批量导入。这可能是最棘手的，因为每个供应商将使用不同的技术（SQL Server、缓存等），以不同的方式存储数据等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T18:04:07.983

只有一种方法可以在不“破解”供应商数据库的情况下真正做到这一点。调度系统必须：

1) 符合 HL7 标准。他们甚至是否支持HL7。如果他们不与他们一起放弃 HL7，那将不会发生。

2）如果他们确实支持 HL7，那么他们是否会导出计划消息。如果他们再不这样做，你就完了。HL7不会发生这种情况。

3) 如果你走到这一步，那么你需要获得他们的 OUTBOUND HL7 实施指南（他们可能称之为“HL7 规范”等）。您还需要为其调度接口获取示例 HL7 消息。如果你幸运的话，他们正在使用 SIU 消息并尝试至少保持接近 HL7 标准。如果您不走运（假设您正在使用 Misys Tiger 执行此操作），那么您会对一些供应商滥用 HL7 标准的严重程度感到非常不愉快的震惊。

4）一旦你看过他们的样本和他们的文件（你会对他们不完全匹配的频率感到不快的惊讶）。然后您就可以实际设置 HL7 源并开始比赛了。

一些提示。

1）不要指望这些都是免费的。预计您的客户（拥有生成 SIU 消息的系统的许可证的人）将不得不向他们的供应商付款以便为他们进行设置。在美国，一个 HL7 接口的平均成本约为 5000.00 美元

2）它并不像听起来那么糟糕。只需将您的 HL7 接口设计为模块化即可。请记住，您不是在为客户设计 HL7 接口，而是在为特定供应商的系统设计接口。一旦完成，您应该能够将其从货架上拉下来并为使用该系统的任何客户重复使用，因此（如果可能）首先连接到更流行的系统。随着您创建越来越多的模块，您会发现它们变得越来越容易执行，并且您会发现具有相同实现的不同供应商。这样你的 SystemA 接口就可以成为你的 SystemA AND SystemG 接口。

希望这可以帮助。

# linux - 如何从linux中另一个文件的数据中编辑一个文件中带有扩展名的行

> ID：10917922
> 
> 赞同：0
> 
> 时间：2012-06-06T16:05:11.540
> 
> 标签：linux, sed, awk, numbers, edit

在我的文本文件中，我有以下几行。

```
input.k 
```

有

```
2684717    -194.7050476      64.2345581     150.6500092       0       0
2684718    -213.1575623      62.7032242     150.6500092       0       0
*INCLUDE
$# filename
./meshes/exportneu/147.k
*END 
```

和

```
mesh.k 
```

有

```
100 
```

我想将 input.k 中的 147.k 替换为另一个数字，形成另一个文件，即 mesh.k 中的 100

所需输出

```
2684717    -194.7050476      64.2345581     150.6500092       0       0
2684718    -213.1575623      62.7032242     150.6500092       0       0
*INCLUDE
$# filename
../meshes/exportneu/100.k
*END 
```

我用了

```
sed '/\<meshes\>/!d;=;s/.* ([^ ]\+).*/\1/;R mesh.k' input.k | 
sed 'N;N;s|\n|s/|;s|\n|/|;s|$|/|;q'  >temp.sed       
sed -i -f temp.sed input.k 
```

关键是我想将这个 147.k 替换为 100.k ，其中 100 写在另一个文件 mesh.k 中，就像在另一个文件中只有 100 存在或者它可以是 3 位数的任何其他数字。

我知道它可以用于搜索带有单词网格的行，并用 last / 分割并管道来自其他文件的数据，但我无法制定 sed 或 awk。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:36:30.810

你可以尝试这样的事情。

```
awk 'NR==FNR{a[++i]=$1; next} {{sub(/[0-9]+/,a[++j]); print}}' f2 f1 
```

但是，请注意，您从另一个文件中进行的替换需要与需要替换的输入行的顺序相同 -

```
$ cat f1
../meshes/exportneu/147.k
../secondline/exportneu/10.k

$ cat f2
100
40

$ awk 'NR==FNR{a[++i]=$1; next} {{sub(/[0-9]+/,a[++j]); print}}' f2 f1
../meshes/exportneu/100.k
../secondline/exportneu/40.k 
```

您可以根据`awk`文件改进内部替换。这只是为了让您朝着正确的方向前进。

# php - 如何将内容分成相等的部分，然后在 PHP 中写入文件

> ID：10917931
> 
> 赞同：1
> 
> 时间：2012-06-06T16:05:52.810
> 
> 标签：php, file, split

自昨晚以来，我一直在阅读/测试示例，*但奶牛从未回家。*

我有一个（例如）大约的文件。一行 1000 个字符，想把它分成 10 个相等的部分，然后写回文件。

**目标：**

```
1\. Open the file in question and read its content
2\. Count up to 100 characters for example, then put a line break
3\. Count 100 again and another line break, and so on till it's done.
4\. Write/overwrite the file with the new split content 
```

**例如：**

```
I want to turn this => KNMT2zSOMs4j4vXsBlb7uCjrGxgXpr

Into this:

KNMT2zSOMs
4j4vXsBlb7
uCjrGxgXpr 
```

**这是我到目前为止所拥有的：**

```
<?php
$MyString = fopen('file.txt', "r");

$MyNewString;
$n = 100; // How many you want before seperation
$MyNewString = substr($MyString,0,$n); 
$i = $n;
while ($i < strlen($MyString)) {
$MyNewString .= "\n"; // Seperator Character
$MyNewString .= substr($MyString,$i,$n);
$i = $i + $n;
}
file_put_contents($MyString, $MyNewString);

fclose($MyString);
?> 
```

但这并不像我预期的那样工作。

我意识到还有其他类似的问题，但他们没有展示如何读取文件，然后写回它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:25:40.093

```
<?php

$str = "aonoeincoieacaonoeincoieacaonoeincoieacaonoeincoieacaonoeincoieacaon";

$pieces = 10;

$ch = chunk_split($str, $pieces);
$piece = explode("\n", $ch);
foreach($piece as $line) {
// write to file
}

?> 
```

[http://php.net/manual/en/function.chunk-split.php](http://php.net/manual/en/function.chunk-split.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:11:03.627

查看[`str_split`](http://php.net/manual/en/function.str-split.php). 它将接受一个字符串并根据长度将其拆分为块，将每个块存储在它返回的数组中的单独索引处。然后，您可以遍历数组，在每个索引后添加一个换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T17:09:12.500

坚持住这里。您没有提供文件名/路径`file_put_contents();`，而是提供了文件句柄。

试试这个：

```
file_put_contents("newFileWithText.txt", $MyNewString); 
```

您会看到，在执行 时`$var=fopen();`，您给出`$var`了一个句柄的值，这并不意味着要与它一起使用，`file_put_contents();`因为它不要求句柄，而是一个文件名。所以，它应该是：`file_put_contents("myfilenamehere.txt", "the data i want in my file here...");`

简单的。

# jquery - 使用 Jquery 根据 div 中的值进行排序

> ID：10917936
> 
> 赞同：2
> 
> 时间：2012-06-06T16:06:07.503
> 
> 标签：jquery, sorting, xhtml

所以我正在编写一个需要根据 div 的内容进行排序的程序。我想要的是两件事：

1.  该程序按默认隐藏的孙 div 的项目进行排序。“重量值”是我希望排序的（如果它低于某个点，则将其移至另一张表）

2.  对项目进行排序时，其中具有某种覆盖的项目将被排序到另一个“不太可能被调用”的表中

所以这是我目前的代码：

```
<div id="likelyToBeCalled">
    <div class="likelyOddHeader" id="Test1">
        <div class="likelyOddA">Test1</div>
        <div class="likelyOddB"><img src="image002.png"/></div>
        <div class="timeZone">West</div>
    </div>
    <div class="hidden">
            <div class="weight">Weight:56</div>
            <div class="values">Value1: Value Here.  Value 2: Value Here. Value 3: Value Here.  Value 4:  Value here.  Value5: Value here. <br />
                                            DbValue1: 123, DbValue2: 1234, DbValue3, 123456 DbValue4: 123, DbValue5: 1234, DbValue6, 123456</div>
            <div class="overrides">Overrides: 0</div>
    </div>
...More divs / values here

<div id="unlikelyToBeCalled">
    <div class="likelyOddHeader" name="Test3">
        <div class="likelyOddA">Test3</div>
        <div class="likelyOddB"><img src="image002.png"/></div>
        <div class="timeZone">West</div>
    </div>
...More divs / values here 
```

到目前为止，我一直在尝试仅使用 jQuery 来做到这一点，但进展并不顺利。我不知道如何处理'if'逻辑或如何处理排序，我仍在努力从一个区域移动到另一个区域......

我一直在尝试的代码涉及一个提交按钮：

```
<script type="text/javascript">

$(document).ready(function() {
$("input.buttonDhide").click(function(){ $(".row").find(".left").hide("slow"); });
)};
)};
</script> 
```

编辑：请注意，上面的代码实际上只是为了看看我是否可以这样选择一个元素，它根本不起作用。

编辑：更改标记以使用类，因为我错误地复制了 id，现在全部设置在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:45:01.163

对我来说，这似乎是[knockout.js](http://knockoutjs.com/)的完美候选者。您可以直接对绑定到您的 html 结构的 javascript 数组 (ko.observableArray) 进行排序，而不是尝试通过 jQuery 的类或数据属性来查找某个元素进行排序。

[这是一个匆忙拼凑在一起的 jsdfiddle](http://jsfiddle.net/u7zDp/)，展示了一种可以做到这一点的方法。我不确定您是否要检查重量或覆盖变量，所以我只是使用（如果覆盖 == 1）。你可以很容易地改变它，即（如果重量 < 10）。我强烈建议您阅读一些 Knockout.js 教程。国际海事组织，它很重要... Gorlami！

为了以防万一，我将在此处包含代码。请记住，这可以并且可能应该清理一下：

HTML：

```
<div data-bind="with: likelyToBeCalled">
    <div data-bind="with: likelyOddHeader">
        <div data-bind="text: likelyOddA"></div>
        <div><img data-bind="attr: { src: likelyOddB }" alt="" /></div>
        <div data-bind="text: timeZone"></div>
    </div>
    <div data-bind="foreach: hidden">
        <div data-bind="text: 'Weight: ' + weight"></div>
        <div data-bind="text: 'Values: ' + values"></div>
        <div data-bind="text: 'Overrides: ' + overrides"></div>
    </div>
</div>

<p>
    <button data-bind="click: buttonClick">Sort likely to be called</button>
</p>

<div data-bind="with: unlikelyToBeCalled">
    <div data-bind="with: likelyOddHeader">
        <div data-bind="text: likelyOddA"></div>
        <div><img data-bind="attr: { src: likelyOddB }" alt="" /></div>
        <div data-bind="text: timeZone"></div>
    </div>
    <div data-bind="foreach: hidden">
        <div data-bind="text: 'Weight: ' + weight"></div>
        <div data-bind="text: 'Values: ' + values"></div>
        <div data-bind="text: 'Overrides: ' + overrides"></div>
    </div>
</div> 
```

还有 JS（不要忘记包含 knockout.js）：

```
var viewModel = {
    likelyToBeCalled: {
        likelyOddHeader: {
            likelyOddA: "Test1",
            likelyOddB: "image001.png",
            timeZone: "West"
        },
        hidden: ko.observableArray([
            { weight: 56, values: "your values string 1", overrides: 1 },
            { weight: 20, values: "your values string 2", overrides: 0 },
            { weight: 12, values: "your values string 3", overrides: 0 },
            { weight: 16, values: "your values string 4", overrides: 1 }
        ])
    },
    unlikelyToBeCalled: {
        likelyOddHeader: {
            likelyOddA: "Test2",
            likelyOddB: "image002.png",
            timeZone: "East"
        },
        hidden: ko.observableArray([
            { weight: 1, values: "your values string 4", overrides: 1 }
        ])
    },
    buttonClick: function () {
        var likely = viewModel.likelyToBeCalled;
        var unlikely = viewModel.unlikelyToBeCalled;

        for (var i in likely.hidden()) {
            if (likely.hidden()[i].overrides == 1) {
                unlikely.hidden.push(likely.hidden()[i]);
                likely.hidden.remove(likely.hidden()[i]);
            }
        }

        likely.hidden.sort(function (a, b) {
            return a.weight > b.weight ? 1 : -1;
        });
    }
};

ko.applyBindings(viewModel); 
```

# javascript - 从xml列表填充的asp下拉列表如何添加工具提示

> ID：10917938
> 
> 赞同：-2
> 
> 时间：2012-06-06T16:06:10.803
> 
> 标签：javascript, asp.net, drop-down-menu, tooltip

请帮助我做错了什么？

我有一个国家/地区的 xml 列表，格式为

```
 <COUNTRY value="blah" title="blah">blah blah</COUNTRY> 
```

我有一个从广泛的 xml 列表填充的 asp 下拉列表，下拉列表 html 格式是：

```
<asp:DropDownList ID="mCOUNTRY" runat="server" Width="205"      onmouseover="showHideTooltip()"> </asp:DropDownList> 
```

-----下面的showHideTooltip()-----

```
<script language="JavaScript">

function showHideTooltip() 
{
var obj = document.getElementById("mCOUNTRY");
obj.title[obj.selectedIndex].title;
}

</SCRIPT>
</CODE> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-22T05:21:15.230

在鼠标悬停事件显示工具提示下拉列表项目使用 C# 示例在 Asp.net 下拉列表项目中使用工具提示通过鼠标悬停事件与使用 C# 的示例：http: [//asp-net-by-parijat.blogspot.in/2014/08/show -tooltip-dropdownlist-items-by.html](http://asp-net-by-parijat.blogspot.in/2014/08/show-tooltip-dropdownlist-items-by.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:02:41.593

你可能想看看这篇关于[使用 jQuery 显示/隐藏工具提示的](http://ephekt.com/?p=111)帖子，你可以适应这个[SO 答案](https://stackoverflow.com/a/10030383/96505)，或者这个[SO 答案](https://stackoverflow.com/a/1313353/96505)

我*认为*你需要做这样的事情：

```
<div id="tooltip" style="display:none;">Content will go here</div>
<asp:DropDownList ID="mCOUNTRY" runat="server" Width="205" 
onmouseover="showTooltip()" onmouseout="hide()"> </asp:DropDownList> 
```

用这个用于javascript

```
<script language="JavaScript">
function showTooltip() {
  var obj = document.getElementById("mCOUNTRY");
  var title = obj.title[obj.selectedIndex].title;
  var tooltip = document.getElementById("tooltip");
  tooltip.innerHtml = title;
  tooltip.style.visibility = 'visible';
  tooltip.style.left = event.screenX + 'px';
  tooltip.style.top = event.screenY + 'px';
}

function hideTooltip(){
  document.getElementById("tooltip").style.visibility = 'hidden';
}
</script> 
```

一个 jQuery 解决方案（如上所述会更优雅）

# android - 如何查询声学回声消除能力？

> ID：10917939
> 
> 赞同：1
> 
> 时间：2012-06-06T15:55:20.253
> 
> 标签：android, audio

一些 Android 手机具有声学回声消除组件。有没有办法从 Android 应用程序中检测此组件的存在？API 调用或系统属性或任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:25:42.287

使用`AcousticEchoCanceller.isAvailable()`. 有关更多信息，请参阅[参考资料](http://developer.android.com/reference/android/media/audiofx/AcousticEchoCanceler.html#isAvailable%28%29)。

# sql - SSRS 从报告中删除列

> ID：10917941
> 
> 赞同：2
> 
> 时间：2012-06-06T16:06:14.377
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services, ssrs-2008

我在`13`这里将列作为虚拟列包括在内：

```
+----+---+---+---+----+---+---+---+---+---+----+----+----+----+
|    | 1 | 2 | 3 | 4  | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 |
+----+---+---+---+----+---+---+---+---+---+----+----+----+----+
|  1 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  2 | 0 | 0 | 1 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  3 | 0 | 0 | 0 |  0 | 0 | 1 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  4 | 1 | 0 | 0 | 20 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  5 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  6 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  7 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  8 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
|  9 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
| 10 | 0 | 0 | 0 |  0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |  1 |
+----+---+---+---+----+---+---+---+---+---+----+----+----+----+ 
```

我包含一个虚拟列的原因是，如果`1`通过`12`的列全部为零，我仍然想为该行包含一个条目。

如您所见， row`1`不会被包括在内。

此报告由 SSRS 生成。

我想知道是否有办法隐藏列`13`？

我可以做某种条件格式吗？

澄清这是我的查询：

```
select tat.*, tat.tat as tat2 from tat 
```

报告中的组织方式如下：

![在此处输入图像描述](../Images/e2045790106ef6ed39dd620888ca673b.png)

该数据集`[TAT]`包含专门用于列的虚拟数据`13`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:28:44.647

可以通过以下步骤根据值隐藏列组中的特定列。

右键单击要隐藏的列组的标题，`Column Group`->`Group Properties`

![SSRS 列组属性](../Images/79ac898c8aa226ae4c93053a190ffa2a.png)

单击`Visibility`窗格并选择`Show or hide based on an expression`单选按钮。使用表达式来确定何时隐藏列。

`True`隐藏列，`False`显示它。您需要在我的示例中更新字段名称以匹配您的`month`字段名称。

![SSRS 列组可见性](../Images/00bb6c8192c9e5e11c40e4ec3a0530f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:09:47.987

不要在您的选择中包含第 13 列？如果您正在执行 a `select *`，请将其更改为`Select col1, col2, ...., col12`

# php - Migrating pure PHP project to Yii framework

> ID：10917946
> 
> 赞同：9
> 
> 时间：2012-06-06T16:06:40.133
> 
> 标签：php, frameworks, yii

I have almost completed a PHP project, using MVC, jQuery and Ajax. It is pure PHP project. I don't use any frameworks in the code right know. I would like to change that. Doing some research, I found, that Yii turns out to be one of the best frameworks out there.

Is it possible to somehow migrate pure PHP project to Yii?

If so, then how to do this? Which steps should I follow in order to reduce the workload and enjoy the benefits the Yii framework presents?

I'm a total Yii newbie, any insights appreciated.

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-09T11:40:01.407

**TL; DR：**不要这样做。这真是一个可怕的想法。

## 咆哮..

### “框架”不是你添加到项目中的魔法酱，它可以让它变得更好、更闪亮。

> 做了一些研究，我发现 Yii 是目前最好的框架之一。

你做了多么奇怪的研究……我很想看看这些材料。特别是，因为我将它列为第三差的 PHP 框架。只有 CodeIgniter 和 CakePHP 超过了它的可怕性。

其原因是该框架显示的代码质量极差，再加上它一直存在的不良实践。

## 为什么要避免迁移？

从您的描述中可以明显看出，您不熟悉此框架，也没有使用过它的经验。

在项目管理中有一个主题：[风险管理](http://en.wikipedia.org/wiki/Risk_management)。在这种情况下，在项目的最后阶段添加一个以前未使用的框架将很可能构成高*影响**风险*，而且由于项目的成熟度，这也是完全*没有缓解*的。

这意味着出现问题的可能性非常大。当它发生时，它很可能会导致项目失败。或者至少将发布数据推迟相当长的时间。

在完美世界中，框架用于简化开发的重复性任务，但会牺牲一些性能。这些是您在项目开始时执行的任务。你不是在一个项目的开始。这意味着您不会从这种“机动”中获得任何好处。

## 为什么不是伊？

正如我之前提到的，不仅有避免向现有项目添加框架的原因，还有避免使用 Yii 的原因。

### 遗产噩梦

你的所有控制器都将扩展类[`CController`](https://github.com/yiisoft/yii/blob/master/framework/web/CController.php)，扩展类[`CBaseController`](https://github.com/yiisoft/yii/blob/master/framework/web/CBaseController.php)，扩展类[`CComponent`](https://github.com/yiisoft/yii/blob/master/framework/base/CComponent.php)

您所有的“模型”都将扩展 ether[`CActiveRecord`](https://github.com/yiisoft/yii/blob/master/framework/db/ar/CActiveRecord.php)或[`CFormModel`](https://github.com/yiisoft/yii/blob/master/framework/web/CFormModel.php), which extends [`CModel`](https://github.com/yiisoft/yii/blob/master/framework/base/CModel.php), which extends [`CComponent`](https://github.com/yiisoft/yii/blob/master/framework/base/CComponent.php)。

这两个链都包含静态变量并在许多不同的其他类上执行静态方法。这些因素的结合将使调试变得极其困难和乏味。

### 全局状态

有几种形式的全局状态。PHP 中的人通常知道的是`global`变量。但这不是唯一的形式。每次你有一个包含`static`变量的类时，它也会创建一个全局状态，它可以（并且几乎总是 - 将）导致看似不相关的实例神秘地交互。

使用全局状态是核心机制。你会在整个代码库中看到静态调用，如果没有全局状态，Yii 的[配置文件将无法运行。](http://www.yiiframework.com/wiki/59/)

每次您打电话时，[`Yii::app()`](https://github.com/yiisoft/yii/blob/1.1.14/framework/YiiBase.php#L132)您都在访问和/或更改它。

这使得 Yii 应用程序无法进行单元测试。调试变成了`grep`在整个项目上使用的练习。

### 紧耦合

当你在 Yii 中创建应用程序时。它与它绑定。如果不启动完整的框架，您将无法执行应用程序的某些部分。主要是由于静态调用，您最终会添加到代码中。

每次您在自己的代码中添加静态调用时，这段代码都会与**类的名称相关联**。这本质上是紧耦合。

您可能已经注意到（希望如此），还有另一种方法可以达到相同的效果 - 使用`new`运算符。这是将您的某些代码耦合到类的特定名称的另一种方法。

### 没有接口..没有..任何

无论 Yii 项目的配置多么糟糕，配置文件都是一个善意的姿态。在如此混乱的代码库中引入外部代码和替换现有组件的危害最小的方法。

但不幸的是，它把焦点集中在了缺乏接口和现有耦合所带来的问题上。

开发人员将尝试替换的组件之一是[`CUrlManager`](https://github.com/yiisoft/yii/blob/master/framework/web/CUrlManager.php). 主要是由于您如何传递其他参数。

OOP 中的接口指定两个实例之间的契约。它允许您定义实例的功能、其他人可以使用的方法。当它不存在时，在大型代码库中，您只能猜测哪些方法是必需的，哪些不是。

在 Yii 组件的情况下，由于静态调用和深度继承，问题更加复杂。上面提到的`CUrlManager`extends [`CApplicationComponent`](https://github.com/yiisoft/yii/blob/master/framework/base/CApplicationComponent.php)，就是extends [`CComponent`](https://github.com/yiisoft/yii/blob/master/framework/base/CComponent.php)。同样的文件定义`CUrlRule`和`CBaseUrlRule`类。

当你写一个替代品时，你必须写一些代码，把它插入配置中，然后通过运行你的应用程序来测试它。这样您就知道接下来需要添加哪个方法（或参数）。

基本上，它是*“save-an-see-what-blows-up”*的开发方法。

### 那不是MVC！

Yii 没有实现 MVC 或任何受 MVC 启发的设计模式。它所谓的“MVC”可以描述为*ActiveRecord-Template-Logic*模式。

Yii 的创建者没有选择适当的模型层（是的，它应该是一个层），而是选择了[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)的收集和表单包装器。这迫使应用程序逻辑被强制在“控制器”中。

另一方面，您拥有美化的模板，而不是包含表示逻辑的正确视图实例。使用[小部件](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#widget)在一定程度上缓解了这种情况，但它们反而遭受[SRP](https://en.wikipedia.org/wiki/Single_responsibility_principle)违规，因为小部件被迫包含一些表示逻辑并执行部分渲染。其余的表示逻辑再次在控制器中结束。

更糟糕的是，“控制者”还必须处理[授权](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#access-control-filter)。这通常意味着，每当您更改访问方案时，您都必须检查每个实例`CController`以检查它是否也需要更改。

这不是 MVC。取自 MVC 设计模式并在某些组件上打上的名称是一团糟。

### 所有的小事情 ..

该框架还带有一些小问题，不值得单独的部分：

*   每个文件定义一个以上的类：

    这将很快变得烦人，因为在类文件中会有一些类被完全不相关的文件名。这意味着，调试经常需要使用搜索。

*   拍打“模块”：

    从外观上看，这些[模块](http://www.yiiframework.com/doc/guide/1.1/en/basics.module)是在事后添加到框架中的。这就是为什么当您需要设置默认模块时，您必须在配置文件参数中设置它，即`'defaultController'`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T13:41:54.540

实际上，我最近将我从头开始构建的 MVC 模式网站转换为 Yii。确实需要一些时间来设置它，但老实说，这是非常值得的。我能够扔掉很多代码，因为已经有 Yii 扩展在做我需要的事情。我还建议您保留数据库，因为您可以使用 Gii 创建控制器和模型，这将为您节省大量时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T16:18:34.297

我不知道对此有任何快速解决方案。这取决于代码是如何编写的。你有数据库和视图，所以当你进入 yii 时，它并不是一个完整的新项目。Yii 会为你生成数据库模型。您已经拥有来自现有项目的视图。编写控制器和操作，并在必要时修改视图。

尝试这些链接，因为它们涉及相同的问题。

[如何将旧的 oop 项目转换为 Yii](https://stackoverflow.com/questions/9339245/how-do-you-convert-an-old-oop-php-project-into-the-yii-framework)

[将现有站点迁移到 Yii 的提示](http://www.yiiframework.com/forum/index.php/topic/27458-tips-on-migrating-an-existing-site-to-yii-incrementally-script-by-script/)

[Drupal 到 Yii 迁移](http://erickennedy.org/blog/Drupal-to-Yii-Migration-Tips)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:49:13.773

由于您已经在 mvc 中有代码，因此迁移起来会容易得多。但是，在迁移到 Yii 时，由于它可以使用 gii 非常轻松地生成控制器和模型，因此您可以利用它。

因此，首先使用 gii 生成控制器和模型，然后您可以将现有代码（通过替换我的意思是，将您的代码替换为控制器和模型中的特定功能）到内置控制器和模型，以便您的站点的功能仍然有效。您可以相应地修改您的视图。但这不会是一件大事。

您可以简单地为 ajax、jquery 和 css 注册您的脚本。这些也将起作用。

是的，Yii 是目前最好的框架，所以尽可能多地受益。

谢谢， 乌杰瓦尔

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-02T06:44:56.717

在这个项目中，您将 php 转换为 yii 框架。如果您执行以下步骤，这对您来说真的很容易。

由于您已经在 mvc 中有代码，因此迁移起来会容易得多。但是，在迁移到 Yii 时，由于它可以使用 gii 非常轻松地生成控制器和模型，因此您可以利用它。

其次，如果你的数据库是准确的，那么 50% 的工作就完成了。当你使用 gii 创建 CRUD 操作时，会自动创建模型视图控制器。如果你在 php 中创建 mvc，那么它对你有利。

第三，您可以简单地包含您的 ajax、jquery 和 css 脚本。这些也可以在主题（CSS、JS、AZAX、BOOTSTRAP）中创建一个文件夹。

四保护->视图->布局，您可以在其中更改主题..仅此而已

你也帮助 www.yiiframework.com/doc-2.0/guide-intro-yii.html

如果您认为我的回答对您有帮助，请给我评分...谢谢。

# c - macro arguments

> ID：10917948
> 
> 赞同：-2
> 
> 时间：2012-06-06T16:06:51.857
> 
> 标签：c

What will the program print when the inputs are 2,3?

```
#include <stdio.h>
#define min(a,b)  ((a) > (b) ? (b) : (a))
#define inc(a)    a++
#define mult(a,b) (a * b)

int main(void) {
    int x = 1, y = 2;
    scanf("%d %d",&x,&y);
    printf("min(%d,inc(%d))",x,y);
    printf("=%d\n",min(x,inc(y)));
    printf("min(mult(%d,%d+2),11)",x,y);
    printf("=%d\n",min(mult(x,y+2),11));
    return 0;
} 
```

edit: I get funny answer for negative numbers i.e `-1`,`-2`.
Why is `inc(-2)` change `y` to zero instead of -1?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:18:07.163

将宏视为简单的字符串替换。只需将宏名称和括号替换为宏定义的主体，将宏参数替换为传入的内容。示例更简单：

```
#define hello(a) a+a
...
int y = hello(x); 
```

将被替换为：

```
int y = x+x; 
```

要回答您的问题，请手动执行此操作，并且非常非常小心。对于嵌套宏，从内部宏开始。我有没有仔细提到过这样做？不要添加或删除任何括号集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:13:16.853

输出将是：

```
min(2,inc(3))=2
min(mult(2,4+2),11)=11 
```

覆盖是什么意思？如果您像上面那样定义一个函数并调用例如：

```
inc(x); 
```

.. 然后编译器把它变成`x++`. 变量 a 只是“参数”的名称，也将被实际变量替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:16:07.507

你运行的是什么操作系统？您可以轻松地自己运行它并查看结果

如果您在 Windows 上，我建议您获取 CodeBlocks 或 Visual Studios

如果您在 Linux 或 MAC 上，请学习使用 gcc 或 g++ 从终端编译

# android - DBMS and View optimization

> ID：10917949
> 
> 赞同：1
> 
> 时间：2012-06-06T16:06:57.463
> 
> 标签：android, optimization, database

is it true that a DBMS can optimize the access to a View by performing the query that defines the View only when the data that is backing the View is modified and not everytime I query the View itself?

**EDIT** What about SQLite for Android?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:26:22.250

德拉米尔，

您的问题的答案很大程度上取决于您对视图、数据库查询和底层结构的实现。*本质上，核心问题是数据的性质以及需要*多久重新查询一次。

在我发布的一些应用程序中，我的数据只有在 Window 获得焦点时才需要查询。在这些情况下，调用简单的手动刷新。这些通常是原子查询，这意味着它们是极少量的数据。使用这种方法，我将许多应用程序和它们的数据桥接在一起，形成一个有凝聚力的几乎即时的查询。

在其他情况下，数据会经常变化，但可以预见。在这些情况下，减少查询数量会适得其反，但绑定观察者也是无效的。

最后，还有几种情况，数据会发生不规则的变化，而且变化的量是不可预测的。在这些情况下，最佳解决方案是使用观察者。这将确保只运行需要运行的查询。一旦适配器更新，视图就会更新。

关于您的问题，最后一个场景（我认为）传达了您的要求。简而言之，答案是肯定的.... ***但是... ***指的是前两种情况。要决定适合自己的最佳解决方案，您需要对以下问题有答案：

1.  您在任何给定时间查询多少数据？

2.  该数据多久会更改一次？

3.  你的应用程序运行时它会改变吗？

一旦你有了这些问题的答案，你就可以相应地调整你的解决方案。如果没有更多信息，这就是您可能会收到的指导范围。我还强烈建议，如果您不熟悉基本的数据库工程概念，请先熟悉规范化、关系模型和索引的概念。深入了解这些可以极大地提高数据库、应用程序和适当视图的性能。

希望这可以帮助，

模糊逻辑

# iphone - 使用 Apple Accelerate Framework 中的 vDSP_conv 执行自相关

> ID：10917951
> 
> 赞同：7
> 
> 时间：2012-06-06T16:07:05.500
> 
> 标签：iphone, c, accelerate-framework, cross-correlation

我需要执行数组（向量）的自相关，但我无法找到正确的方法。我相信我需要来自 Accelerate Framework 的方法“vDSP_conv”，但我不知道如何成功设置它。最让我失望的是需要 2 个输入。也许我有错误的功能，但我找不到对单个向量进行操作的功能。

文档可以在[这里找到](http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)

从网站复制

> vDSP_conv
> 
> 对两个向量执行相关或卷积；单精度。
> 
> 无效vDSP_conv（常量浮动__vDSP_signal[]，vDSP_Stride __vDSP_signalStride，常量浮动__vDSP_filter[]，vDSP_Stride __vDSP_strideFilter，浮动__vDSP_result[]，vDSP_Stride __vDSP_strideResult，vDSP_Length __vDSP_lenResult，vDSP_Length __vDSP_lenFilter）；
> 
> 参数
> 
> __vDSP_signal
> 
> ```
> Input vector A. The length of this vector must be at least __vDSP_lenResult + __vDSP_lenFilter - 1. 
> ```
> 
> __vDSP_signalStride
> 
> ```
> The stride through __vDSP_signal. 
> ```
> 
> __vDSP_filter
> 
> ```
> Input vector B. 
> ```
> 
> __vDSP_strideFilter
> 
> ```
> The stride through __vDSP_filter. 
> ```
> 
> __vDSP_result
> 
> ```
> Output vector C. 
> ```
> 
> __vDSP_strideResult
> 
> ```
> The stride through __vDSP_result. 
> ```
> 
> __vDSP_lenResult
> 
> ```
> The length of __vDSP_result. 
> ```
> 
> __vDSP_lenFilter
> 
> ```
> The length of __vDSP_filter. 
> ```

例如，假设您有一个`float x = [1.0, 2.0, 3.0, 4.0, 5.0]`. 我将如何看待它的自相关？

输出应该类似于`float y = [5.0, 14.0, 26.0, 40.0, 55.0, 40.0, 26.0, 14.0, 5.0] //generated using Matlab's xcorr(x) function`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:31:13.710

执行自相关仅仅意味着您将一个向量与其自身进行互相关。它没有什么花哨的。

所以在你的情况下，做：

```
vDSP_conv(x, 1, x, 1, result, 1, 2*len_X-1, len_X); 
```

检查示例代码以获取更多详细信息：（进行卷积）

[http://disanji.net/iOS_Doc/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html](http://disanji.net/iOS_Doc/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html)

编辑：这有点荒谬，但是您需要将 x 值偏移特定数量的零，这太疯狂了。

以下是一个工作代码，只需将 filter 设置为您想要的 x 值，它会将其余部分放在正确的位置：

```
float          *signal, *filter, *result;

int32_t         signalStride, filterStride, resultStride;

uint32_t        lenSignal, filterLength, resultLength;

uint32_t        i;

filterLength = 5;

resultLength = filterLength*2 -1;

lenSignal = ((filterLength + 3) & 0xFFFFFFFC) + resultLength;

signalStride = filterStride = resultStride = 1;

printf("\nConvolution ( resultLength = %d, "

       "filterLength = %d )\n\n", resultLength, filterLength);

/* Allocate memory for the input operands and check its availability. */

signal = (float *) malloc(lenSignal * sizeof(float));

filter = (float *) malloc(filterLength * sizeof(float));

result = (float *) malloc(resultLength * sizeof(float));

for (i = 0; i < filterLength; i++)

    filter[i] = (float)(i+1);

for (i = 0; i < resultLength; i++)
    if (i >=resultLength- filterLength)
        signal[i] = filter[i - filterLength+1];

/* Correlation. */

vDSP_conv(signal, signalStride, filter, filterStride,

          result, resultStride, resultLength, filterLength);

printf("signal: ");
for (i = 0; i < lenSignal; i++)        
    printf("%2.1f ", signal[i]);

printf("\n filter: ");
for (i = 0; i < filterLength; i++)
    printf("%2.1f ", filter[i]);

printf("\n result: ");
for (i = 0; i < resultLength; i++)
    printf("%2.1f ", result[i]);

/* Free allocated memory. */

free(signal);

free(filter);

free(result); 
```

# java - 评估 JAXB

> ID：10917968
> 
> 赞同：4
> 
> 时间：2012-06-06T16:08:05.577
> 
> 标签：java, xml, jaxb

我有几个问题`JAXB`：

1.  有哪些解析选项？我可以轻松实现/插入自己的解析器吗？

2.  有效性呢？假设我有一个放松的解析器，它在模式方面有点放松。我仍然可以创建（无效的）对象结构吗？

3.  是否`JAXB`提供特殊的方法来对对象进行例如验证？我想解析一个“无效”的对象结构，有一些算法修复它，然后验证（在 Java 中）。

4.  `JAXB`确实提供了其他方法来对对象做一些花哨的事情（例如访问者模式）。

5.  内存占用怎么办？对象表示（忽略解析）对于`XML`10-100MB 的文件是否可行？

涵盖此类问题的良好教程值得赞赏，谷歌仅显示粗略的概述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:12:43.230

以下是我对您的问题的回答：

> 有哪些解析选项？我可以轻松实现/插入自己的解析器吗？

JAXB ( [JSR-222](http://jcp.org/en/jsr/detail?id=222) ) 实现可以从许多不同的输入类型中解组： `InputStream`、`InputSource',`Node `,`XMLStreamReader `,`XMLEventReader `,`File `,`Source`。如果您的 XML 表示与其中任何一个匹配，那么您就完成了。

> 有效性呢？假设我有一个放松的解析器，它在模式方面有点放松。我仍然可以创建（无效的）对象结构吗？

JAXB 实现要求 XML 格式正确，但不要求它对 XML 模式有效。它旨在处理各种文件。如果您想确保“有效性”，那么您可以设置 XML 模式（请参阅[JAXB 和 Marshal/Unmarshal Schema Validation](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html)）。

> JAXB 是否提供了特殊的方法来对对象进行例如验证？我想解析一个“无效”的对象结构，有一些算法修复它，然后验证（在 Java 中）。

您可以使用`javax.xml.validation`API 对对象模型进行验证。有关完整示例，请参见：

*   [http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)

> JAXB 是否提供其他方法来对对象做一些花哨的事情（例如访问者模式）。

JAXB 模型是 POJO，因此您可以根据需要设计它们。您可能对以下课程感兴趣：

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.Listener.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.Listener.html)
*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.Listener.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.Listener.html)

> 内存占用怎么办？对象表示（不考虑解析）对于 10-100MB 的 XML 文件是否可行？

是的，JAXB 可用于处理该大小的文档。如果您担心大小，可以使用 an`XMLStreamReader`来解析 XML 文件，然后从`XMLStreamReader`in 块中解组对象。

# android - 使android剪切/复制/粘贴栏与其他视图重叠

> ID：10917974
> 
> 赞同：0
> 
> 时间：2012-06-06T16:08:18.780
> 
> 标签：android, views, android-actionbar

我没有在我的应用程序中使用操作栏，因此当屏幕顶部显示剪切/复制/粘贴栏时，它会将所有其他视图向下推。是否有可能代替其他视图重叠而不移动它们？TIA

# javascript - 如何在网页中使用 div 在窗口之间模拟 alt-tabbing？

> ID：10917976
> 
> 赞同：3
> 
> 时间：2012-06-06T16:08:23.753
> 
> 标签：javascript, jquery, css

我正在寻找一个插件或一种方法来模仿在网页中使用 div 的窗口之间的 alt-tabbing。澄清一下，用户不会按下 alt-tab，而是会用鼠标在 div 之间切换。

准确地说：

*   我需要弹出一组 div
*   用户可以向左或向右导航，类似于窗口之间的 alt-tabbing。
*   中心 div 应该很大，而侧面 div 应该越来越小。
*   当用户向左移动鼠标光标时，它应该向右旋转列表，将中心 div 向左移动。
*   我还希望它可以处理触摸设备上的滑动事件（但我可以单独实现）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:25:28.943

这些应该工作：

*   [jcoverflip](http://www.jcoverflip.com/)
*   [内容流](http://www.jacksasylum.eu/ContentFlow/)

如果它们不是您要找的东西（以及为什么），请告诉我。

# php - 使用 php 从 sql server 获取大量数据

> ID：10917979
> 
> 赞同：1
> 
> 时间：2012-06-06T16:08:35.457
> 
> 标签：php, sql, sql-server-2008

我有一个包含 200 千条目的表调用 Access，我需要获取所有数据并将其显示在地图上。数据库的架构是：

```
long    |  lat    |  service
12.00   | 34.33   |    3
133.32  | 32.4213 |    5
-58.3   | -3.3233 |    10 
```

如果我尝试查询：

```
SELECT long, lat, service FROM Access; 
```

在 SQL SERVER 控制台上，我得到了所有数据，并且效果很好，但是如果我用这个 php 代码尝试它：

```
$result = mssql_query($query) or die('Query Failed ' . mssql_error()); 
```

我什么都得不到。没有错误也没有数据。我增加了 php.ini 的内存限制并将其设置为 1024M，但我得到了相同的输出，没有错误也没有数据。

有什么方法可以从 php 数组的数据库中获取数千个条目？我有什么不好？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:59:41.993

mssql_query() 不返回任何数据，它在成功时返回结果资源。查看文档： http: [//php.net/mssql_query](http://php.net/mssql_query)
您还必须使用另一个函数，例如[http://php.net/mssql_fetch_assoc](http://php.net/mssql_fetch_assoc)来检索所有数据。

```
mssql_connect(...); // put valid server/login/password here
$result = mssql_query($query) or die('Query Failed ' . mssql_error());
while($r = mssql_fetch_assoc($result))
{
    // use $r['long'], $r['lat']...to access the data of the fetched record
} 
```

while() 循环是获取所有记录所必需的，每次调用 mssql_fetch_assoc() 一条记录。

# iphone - 我的 iPad 应用程序需要更多内存

> ID：10917982
> 
> 赞同：0
> 
> 时间：2012-06-06T16:08:51.277
> 
> 标签：iphone, ios, xcode, ipad, memory-management

我正在 iPad 上开发一个邮件客户端（类似于默认的应用程序客户端），并使用核心数据框架作为缓存来提高性能。我的应用程序使用了大约 4.5 - 5 MB 的堆内存，然后由于内存溢出而崩溃（使用分配工具检测到这一点）。如果我尝试减少内存，我的性能会变得非常缓慢和迟缓，因为我无法缓存我的视图、数据结构（存储文件夹和所有邮件）和表格视图。

我检查了我的 crashLogs，我看到我的应用程序前面写着被抛弃的字样，这证实操作系统已经强行关闭了我的应用程序！

我已经使用仪器来检测这些限制。[请在此处找到附加的图像](http://i.stack.imgur.com/oRqmU.png) 这是我在应用程序崩溃之前录制的快照。

我已经在模拟器上测试了我的应用程序，它稳定在 6 - 7 MB 的堆内存。有什么办法可以让我通过在我的代码中进行一些重新设计来要求操作系统提供更多内存或避免崩溃。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:30:21.583

6-8MB 的内存绝对不是问题。很可能您正在浪费内存，或者如果您正在运行调试版本并打开了 Zombies，则默认设置是永远不会删除僵尸。NSZombiesEnabled=YES 和 NSDeallocateZombies=NO 似乎会泄漏内存，因为没有任何内容被删除。

# ruby-on-rails - ActiveRecord::ConnectionNotEstablished 与正确的 YAML 设置

> ID：10917984
> 
> 赞同：0
> 
> 时间：2012-06-06T16:09:11.973
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, castle-activerecord

我刚开始一个新的`spree`应用程序。我生成了项目、安装`capistrano`和其他 gem。

当我运行`rake db:create`（和任何其他任务）时，我得到（使用`--trace`）

```
rake aborted!
ActiveRecord::ConnectionNotEstablished
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:228:in `columns'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:248:in `column_names'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/ordering.rb:61:in `ordering_condition_details'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/ordering.rb:52:in `method_missing'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/spree_core-0.40.0/lib/spree_core/find_by_param.rb:105:in `<class:Base>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/spree_core-0.40.0/lib/spree_core/find_by_param.rb:104:in `<top (required)>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/spree_core-0.40.0/lib/spree_core.rb:47:in `<top (required)>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/spree-0.40.0/lib/spree.rb:1:in `require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/spree-0.40.0/lib/spree.rb:1:in `<top (required)>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
/home/dever/code/corsisulweb_it/config/application.rb:13:in `<top (required)>'
/home/dever/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/dever/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/dever/code/corsisulweb_it/Rakefile:5:in `<top (required)>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/dever/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/dever/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `load'
/home/dever/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `<main>' 
```

当然我配置`config/database.yml`正确（我在我的 devbox 上共享同一个 db 用户）。

这是`Gemfile`：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'mysql2', :groups => [:development, :test]

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development do
  gem 'capistrano'
end

group :production do
  gem 'pg'
end

gem 'spree' 
```

这是`config/database.yml`

```
# MySQL.  Versions 4.1 and 5.0 are recommended.
# 
# Install the MYSQL driver
#   gem install mysql2
#
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: project_it_development
  pool: 5
  username: dever
  password: dever
  socket: /var/run/mysqld/mysqld.sock

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: project_it_test
  pool: 5
  username: dever
  password: dever
  socket: /var/run/mysqld/mysqld.sock

production:
  adapter: postgres
  encoding: utf8
  reconnect: false
  database: project_it
  pool: 5
  username: user-production
  password: pwd-user-production
  socket: /var/run/mysqld/mysqld.sock 
```

`bundle --without production`因为我在本地机器上使用 mysql 并且无法正确编译 gem，所以我运行了`pg`。

我可以使用 mysql 客户端的凭据登录。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:18:49.333

看来您使用的是旧版本`spree_core-0.40.0/lib/spree_core/find_by_param.rb:104:in`

尝试在 gemfile 中指定它

```
gem 'spree', '1.1.0' 
```

然后安装新版本并\或清理旧版本。

# css - css中的绝对位置概率

> ID：10917993
> 
> 赞同：1
> 
> 时间：2012-06-06T16:09:41.873
> 
> 标签：css

html代码

```
<body>
       <div id="container">

               <div id="left">
                            <h2>rerererere</h2>
               </div>
               <div id="right">
                            <h2>sdadsad</h2>
               </div>
       </div>
</body> 
```

CSS 文件

```
div#container {
position: relative;
    border: 1px solid #000;
}

#left {
    position: absolute;
    width: 480px;
    height: 480px;
    border: 1px solid #0092ef; 
            /*        blue*/
}

#right {
    position: absolute;
    top: 10px;
    right: 10px;
    bottom: 10px;
    width: 250px;
    border: 1px solid #783201;
            /*        brown*/
} 
```

当我只使用正确的 div 作为绝对比没有问题。但是当我在左右 div 中都使用绝对值时。右 div 变得像线一样小。我是 CSS 新手。所以这可能是一个菜鸟问题。为什么如果我将两个绝对 div 放在一个相对 div 下不起作用？请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:12:06.967

您的权利`<div>`崩溃了，因为您没有在 CSS 中声明它的固定高度，仅此而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T16:14:33.100

您的右侧 div 没有高度。

**[这是一个带有高度的右侧 div 的 jsfiddle](http://jsfiddle.net/bGVBU/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:30:58.243

您的右侧 div 没有指定高度，这就是它折叠到行高的原因。

加上删除`bottom: 10px;`右侧的 div 因为这是多余的，因为已经指定了一个最高值。

# c# - UserControl 事件非常慢

> ID：10917995
> 
> 赞同：1
> 
> 时间：2012-06-06T16:09:41.930
> 
> 标签：c#, wpf, xaml

我最近开始在 DLL 中移动我的用户控件。这些控件通常看起来像这样：

```
<UserControl x:Class="DialogBase.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d"
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <Button Content="OK" Click="OkButton_Click"/>
    </Grid>
</UserControl> 
```

我希望能够像在标准控件中一样使用控件中的每个按钮。例如，当有人使用上面的控件时，他应该能够以自己的方法处理 click 事件，如下所示：

```
<lib:UserControl1 
        OkButtonClick="MyCostomClickMethod"
        /> 
```

我通常是这样实现的：（用户控件的代码隐藏文件）

```
 public static RoutedEvent OkButtonClickEvent = EventManager.RegisterRoutedEvent("OkButtonClick", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(UserControl1));

    public event RoutedEventHandler OkButtonClick
    {
        add 
        { 
            AddHandler(OkButtonClickEvent, value); 
        }
        remove
        {
            RemoveHandler(OkButtonClickEvent, value);
        }
    }

    private void OkButton_Click(object sender, RoutedEventArgs e)
    {
        RaiseEvent(new RoutedEventArgs(OkButtonClickEvent));
    } 
```

这工作正常但很慢。单击和产生的操作之间的延迟可能长达一秒。有人可以告诉我是否有更快或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:27:30.497

我会在你真正想要的事件的类中创建一个命令。然后将按钮命令绑定到它。您可以创建自己的命令或使用[DelegateCommand 之类的东西](http://kentb.blogspot.com/2009/04/mvvm-infrastructure-delegatecommand.html)

# git - Git / Gitolite 有些文件夹是空的，权限问题？

> ID：10917996
> 
> 赞同：3
> 
> 时间：2012-06-06T16:09:43.510
> 
> 标签：git, gitolite

我正在使用 git，但在集中式庄园中。我有一个服务器托管我们拉/推的回购。当我在另一台机器上拉/克隆时，我注意到 repo 中的几个文件夹是空的（当我得到一台新计算机并将 repo 克隆到时注意到了这一点）。我查看了 gitolite Web 界面，这些文件夹的权限是“m----------”，其他文件夹的权限是`drwxr-xr-x`. 我不确定它是怎么做到的……我尝试了一些方法，但无法修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:33:30.923

这可以在[gitweb 源代码](https://github.com/git/git/blob/master/gitweb/gitweb.perl#L1886)中解释为：

```
# convert file mode in octal to symbolic file mode string
sub mode_str {
  my $mode = oct shift;

  if (S_ISGITLINK($mode)) {
    return 'm---------';
  } elsif (S_ISDIR($mode & S_IFMT)) {
    return 'drwxr-xr-x';
  } elsif (S_ISLNK($mode)) {
    return 'lrwxrwxrwx';
  } elsif (S_ISREG($mode)) {
    # git cares only about the executable bit
    if ($mode & S_IXUSR) {
      return '-rwxr-xr-x';
    } else {
      return '-rw-r--r--';
    };
  } else {
    return '----------';
  }
} 
```

With `S_IFGITLINK => 0160000`，这是**子模块的特殊模式**

自 2007 年和[此补丁](http://kerneltrap.org/mailarchive/git/2007/7/28/253130)以来，子模块条目显示在 gitweb 中：

> 目前只有超级模块（当前存储库）中子模块条目历史的链接，因为 gitweb 不知道在哪里搜索子模块存储库对象。

所以它们不是空目录，只有子模块根目录。

有关更多信息，请参阅“ [Git - 轻松拉取最新的所有子模块](https://stackoverflow.com/questions/1030169/git-easy-way-pull-latest-of-all-submodules)”。