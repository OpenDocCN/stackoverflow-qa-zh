# StackOverflow 问答 10130000-10130999

# jsf - JSF 中的消息包

> ID：10130001
> 
> 赞同：4
> 
> 时间：2012-04-12T18:59:48.250
> 
> 标签：jsf, internationalization

我正在使用 JSF，并且我想使用消息包，所以我在下面添加了 XML 配置。现在我想知道是否有人可以写一些他们在使用它们时的经验。最好的做法是拥有一个包含页面上所有翻译的大属性文件，如果是这样，您如何命名您的键。如果没有，那么我猜你有多个资源文件，你如何构造它们 - 它们为页面的哪个部分提供消息？- 以及任何命名惯例？

我知道这可能是主观的，但无论如何它对我来说可能是有价值的见解。

```
<application>
    <resource-bundle>
        <base-name>com.myapp.blah</base-name>
        <var>msgs</var>
    </resource-bundle>
</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:45:28.180

我建议您从单一文件方法开始，每种语言一个。如果它增长到您根本无法管理的水平，数千行，那么您可能会拆分它。

然后，您可以使用具有以下内容的模板国际化您的页面：

```
<f:view locale="#{userBean.userLocale}"> 
```

并且您可以启用一个选择组件来保存用户切换的可用语言：

```
FacesContext.getCurrentInstance().getViewRoot().setLocale(locale); 
```

在 faces-config.xml 中：

```
 <application>        
        <locale-config>            
            <default-locale>pt-br</default-locale>
            <supported-locale>en</supported-locale>            
        </locale-config>

        <resource-bundle>
            <base-name>com.myapp.blah.ApplicationResources</base-name>
            <var>msg</var>
        </resource-bundle>
... 
```

那么每种语言你应该有一个文件：

ApplicationResources.properties
ApplicationResources_en.properties
ApplicationResources_pt_BR.properties

# facebook - Facebook 对话内容不会将窗口移动到屏幕

> ID：10130006
> 
> 赞同：0
> 
> 时间：2012-04-12T19:00:09.437
> 
> 标签：facebook, ruby-on-rails-3, facebook-javascript-sdk

我正在尝试使用以下代码弹出一个 apprequests 对话框：

```
$("#fbInviteButton").click(function(){
  FB.ui({
    method: "apprequests",
    message: "Test"
  };
}); 
```

单击按钮时，加载程序会弹出一个框，然后就坐在那里。在 Chrome 的开发者控制台中，我可以看到 ajax 请求完成并且内容返回。

当我查看 HTML 源代码时，我看到另一个对话框（类：“fb_dialog fb_dialog_advanced”），其中包含填充的内容，并且当我切换该窗口的 CSS 时：

```
top: -10000px 
```

包含内容的对话框进入视野。

所以由于某种原因，当内容被加载时，它不会弹出到位并替换加载器。知道什么会导致这种情况吗？

该应用程序是使用 Asset Pipeline 的 Ruby on Rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:29:17.567

我相信 Facebook 的 JavaScript SDK 中的一个错误会导致这个问题。[我目前正在使用从这里](https://stackoverflow.com/questions/9188117/fb-uiserver-loadednodesa-frame-is-undefined)获取的旧版 SDK作为解决方法。

# django - 在 Django 中建模异构多对多关系的最佳方法是什么？

> ID：10130010
> 
> 赞同：1
> 
> 时间：2012-04-12T19:00:27.927
> 
> 标签：django, django-admin, many-to-many, junction-table

我已经搜索了一段时间，但似乎无法找到一个现有的问题（尽管这可能是不知道术语的问题）。

我是 Django 的新手，并且一直在尝试采用随着时间的推移应该非常可扩展的设计，并使其与 Django 的 ORM 一起使用。本质上，它是一系列使用共享连接表的多对多关系。

该设计是一个通用的游戏制作系统，上面写着“如果你满足[要求]，你可以使用[成本]作为材料来创造[奖励]。” 这允许使用相同系统从任意数量的商店出售物品，并且通用性足以支持广泛的机制 - 我在过去看到它成功使用过。

Django 不支持共享同一个联结表的多个 M2M 关系（显然是因为它无法计算出反向关系），所以我似乎有以下选项：

*   让它创建自己的联结表，最终有六个或更多，或者
*   使用联结表的外键代替内置的 MTM 关系。

第一个选项有点混乱，因为我知道我最终必须在联结表中添加额外的字段。第二个选项效果很好。不幸的是，因为没有从联结表 BACK 到其他每个表的外键，我一直在与管理系统作斗争，以让它做我想做的事。

以下是受影响的型号：

```
class Craft(models.Model):
    name        = models.CharField(max_length=30)
    description = models.CharField(max_length=300, blank=True)
    cost        = models.ForeignKey('Container', related_name="craft_cost")
    reward      = models.ForeignKey('Container', related_name="craft_reward")
    require     = models.ForeignKey('Container', related_name="craft_require")

class ShopContent(models.Model):
    shopId      = models.ForeignKey(Shop)
    cost        = models.ForeignKey('Container', related_name="shop_cost")
    reward      = models.ForeignKey('Container', related_name="shop_reward")
    require     = models.ForeignKey('Container', related_name="shop_require")
    description = models.CharField(max_length=300)

class Container(models.Model):
    name        = models.CharField(max_length=30)

class ContainerContent(models.Model):
    containerId = models.ForeignKey(Container, verbose_name="Container")
    itemId      = models.ForeignKey(Item, verbose_name="Item")
    itemMin     = models.PositiveSmallIntegerField(verbose_name=u"min amount")
    itemMax     = models.PositiveSmallIntegerField(verbose_name=u"max amount")
    weight      = models.PositiveSmallIntegerField(null=True, blank=True)
    optionGroup = models.PositiveSmallIntegerField(null=True, blank=True,
                                                   verbose_name=u"option group") 
```

有没有一种更简单、可能很明显的方法来让它发挥作用？我正在尝试允许对 Craft 编辑界面上每个相关列的 ContainerContent 信息进行内联编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:26:31.547

听起来您有一种“交易”，它具有名称、描述和类型，并定义了成本、奖励和要求。您应该将其定义为单个模型，而不是多个模型（`ShopContent`、`Craft`等）。

```
class Transaction(models.Model):
    TYPE_CHOICES = (('Craft', 0),
                    ('Purchase', 1),
                   )
    name        = models.CharField(max_length=30)
    description = models.CharField(max_length=300, blank=True)
    cost        = models.ForeignKey('Container')
    reward      = models.ForeignKey('Container')
    require     = models.ForeignKey('Container')
    type        = models.IntegerField(choices = TYPE_CHOICES) 
```

现在`Shop`etc. 可以有一个`ManyToManyField`to `Transaction`。

无论您是否使用此特定模型，`cost`和`reward`关系`require`都应该在一个地方 - 如上所述，或者`OneToOne`与 等关系`Craft`。`ShopContent`正如您所猜测的，您不应该有一大堆复杂的多对多`through`完全一样的表。

* * *

您在帖子底部提到您是

> 试图允许对编辑界面`ContainerContent`上每个相关列的信息进行内联编辑。`Craft`

如果您正在建模多个级别的关系，并使用管理应用程序，您将需要应用某种[嵌套的内联](https://code.djangoproject.com/ticket/9025)补丁，或者使用某种链接方案，例如我在最近的问题中使用的那种，我该[怎么做添加从一个对象的 Django 管理页面到相关对象的管理页面的链接？](https://stackoverflow.com/questions/9919780/how-do-i-add-a-link-from-the-django-admin-page-of-one-object-to-the-admin-page-o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:47:19.703

我在这里[闻](http://en.wikipedia.org/wiki/Code_smell)到的东西太复杂了，但我可能错了。作为开始，这会更好吗？（`ContainerContent`稍后会弄清楚）

```
class Cost(models.Model):
    name        = models.CharField(max_length=30)

class Reward(models.Model):
    name        = models.CharField(max_length=30)

class Require(models.Model):
    name        = models.CharField(max_length=30)

class Craft(models.Model):
    name        = models.CharField(max_length=30)
    description = models.CharField(max_length=300, blank=True)
    cost        = models.ForeignKey(Cost)
    reward      = models.ForeignKey(Reward)
    require     = models.ForeignKey(Require)

class Shop(models.Model):
    name        = models.CharField(max_length=30)
    crafts      = models.ManyToMany(Craft, blank=True) 
```

# c# - 用于 UI 更新的 INotifyPropertyChanged 的 替代方案

> ID：10130013
> 
> 赞同：0
> 
> 时间：2012-04-12T19:00:44.583
> 
> 标签：c#, user-interface, c#-4.0, inotifypropertychanged

我正在尝试创建一个系统，其中每次更改我的一个业务对象的属性时都不会更新用户界面，而是仅以受控方式更新。

这是我的推理：

1.  业务对象每秒更新数百次，但在我看来，用户实际上只需要每 250 毫秒左右查看一次更新。我正在考虑有一个计时器，它每 250 毫秒过去一次，并且每次它过去调用一个方法，该方法会告诉 UI 它需要刷新自己。

2.  UI 相当大，我想这样做，以便刷新自己的唯一控件将是用户当前正在查看的控件。

我知道该`INotifyPropertyChanged`模型，但是每次更新任何内容时，这不会不必要地更新 UI 吗？

我尝试使用`.RefreshDataSource()`，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:08:35.670

> 我知道 INotifyPropertyChanged 模型，但这不会在每次更新任何内容时都不必要地更新 UI 吗？

好吧，只要你调用`NotifyPropertyChanged("PropertyName")`属性的设置器，它就会显示在 UI 上。**因为这实际上会在每次**再次设置属性时强制 UI 更新- 意味着每个属性每秒数百次。您还可以调用`NotifyPropertyChanged("PropertyName")`该方法，该方法会在您的计时器每次经过时调用。所以没有必要使用`RefreshDataSource()`代替`INotifyPropertyChagend`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:21:31.177

您可以选择何时调用 NotifyPropertyChange - 为什么不通过抑制频繁调用来创建实现 INotifyPropertyChanged 的​​基类？

# c# - 如何在 LINQ 中对字符串执行转换？

> ID：10130014
> 
> 赞同：0
> 
> 时间：2012-04-12T19:00:50.367
> 
> 标签：c#

我有以下查询，它从名为 dtRows 的数据表中选择行。dtRows 包含 2 列 FieldId 和 FieldValue，FieldId 包含如下值。当我选择 FieldId 时，我需要去掉前两个字符并将最后一个字符转换为不同的字符串。例如，1_3_1 应该是 3_FirstName，1_3_2 应该是 3_LastName，1_3_3 应该是 3_MiddleName。有人有什么建议吗？？非常感谢您的任何想法！

FieldId 值：

1_1_1
1_1_2
1_1_3
1_2_1
1_2_2
1_2_3
1_3_1
1_3_2
1_3_3

```
var Names = from row in dtRows.AsQueryable()
                   where Convert.ToInt16(row.Field<string>("FieldId").Substring(2)) == prefix
                   select new
                   {
                       fieldId = 
           fieldValue = row.Field<string>("FieldValue")
                   }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:05:34.893

我会编写一个函数来计算不同的字符串，然后调用它：

```
var Names = from row in dtRows.AsQueryable() 
               let id = row.Field<string>("FieldId")
               where Convert.ToInt16(id.Substring(2)) == prefix 
               select new 
               { 
                   fieldId = ConvertString(id),
                   fieldValue = row.Field<string>("FieldValue") 
               }; 
```

和

```
private string ConvertString(string original)
{
    // implementation left as an exercise
} 
```

# api - Rest API 返回 HTTP 状态码

> ID：10130021
> 
> 赞同：0
> 
> 时间：2012-04-12T19:01:18.563
> 
> 标签：api, rest, http-status-codes

我有一个场景，我的 API 应用程序联系外部数据源，对于这个特定示例，我的 API 请求来自外部数据源的颜色列表。有时数据源没有这些颜色并返回“没有要显示的选项”的纯文本响应，HTTP 状态代码为 200 OK。

我想知道在这种情况下我应该向正在使用我的 API 的客户端返回什么状态代码？A 404 not found 或 204 no content...？我不确定什么最适合。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:12:59.963

不退回任何颜色是否有效？在这种情况下，您的原件`200`可能是正确的状态码。

`204`通常用于表示成功，但客户端不需要更新它持有的任何信息；例如，删除或更新资源是使用的有效时间`204`。

`404`如果访问相同的 URL 似乎是错误的，在您的场景中，听起来资源的状态可能会随着时间的推移而改变（并且它可能是空的），但它始终存在。

# jquery - 每隔 xHours 或 xDays 显示一次 Div

> ID：10130022
> 
> 赞同：1
> 
> 时间：2012-04-12T19:01:24.813
> 
> 标签：jquery, html, cookies, slide

有两件事我遇到了麻烦。

我已经构建了一个通知，当页面加载时滑入并在设定的时间后滑出。

首先，我不希望它在每次页面加载时都运行，因为这会惹恼成员。这可以用 cookie 完成吗？如果是这样，怎么做？

其次，我想`<div>`在用户单击关闭按钮时使幻灯片退出，这样他们就不必等待脚本完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:26:04.333

我已经用一个基本示例修改了您现有的 jsFiddle，如果用户已经看到了弹出窗口，如何使用 cookie 进行记录：http: [//jsfiddle.net/Jk2AG/27/](http://jsfiddle.net/Jk2AG/27/)

```
$(document).ready(function() {

    if (getCookie("show-slide") == null) {
        $("#dimBackgrnd").hide().delay(1000).fadeIn("slow");

        $("#slide").hide().delay(2000).show("drop", {
            direction: "up"
        }, 500);

        $("#dimBackgrnd").hide().delay(7500).fadeOut("slow");

        $("#slide").delay(6000).hide("drop", {
            direction: "down"
        }, 500);

        setCookie("show-slide", "false", 7);
    }
    else {
        $("#dimBackgrnd").hide();
        $("#slide").hide();
    }

});

function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:19:57.957

您可以使用任何类型的长期存储来做到这一点。

1.  用户登录
2.  检查上次通知显示的日期
3.  是 CurrentDate - LastShownDate > X 吗？显示通知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:25:47.990

如果您没有在服务器上存储最后通知日期，您可以在用户的​​计算机上存储一个 cookie，该 cookie 在 X 天后过期。如果没有 cookie，则显示消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:31:22.220

好的，卡尔！

首先看看这个：[https](https://github.com/carhartl/jquery-cookie) ://github.com/carhartl/jquery-cookie 有了这个，你应该能够制作 cookie 的东西。

然后看着我的小提琴，有点脱光但工作得很好！ [http://jsfiddle.net/Jk2AG/28/](http://jsfiddle.net/Jk2AG/28/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:37:43.567

我的示例可能比需要的多一些，因为您可以使用 JavaScript 创建 cookie，但我想我会展示我将使用的服务器端解决方案。

如果您使用的是 PHP，您可以在单击时将其作为会话变量传递，让我们检查一下：

```
$(function(){
  $('#slide #submit').click(function(){
    $.ajax({
      url: 'cookie_parser.php',
      data: 'setShowSlide=1', //we'll explain 0/1 methodology in the php description
      success: function(data){
        //we could do stuff with the (data) object, but we're not going to. 
        //Instead, we need to check it on page load.
      }
    });
  });
}); 
```

PHP解析数据，设置会话，然后返回ID以便我们检查。

```
<?php
  session_start(); /* so we can deal with our cookie variables */
  if(!empty($_GET['setShowSlide']) || !empty($_SESSION['setShowSlide'])){
    if(!empty($_GET['setShowSlide']) && empty($_SESSION['setShowSlide'])){
      $setShowSlide = $_GET['setShowSlide']
      if($setShowSlide == 1){
        session_start();
        $_SESSION['setShowSlide'] = $setShowSlide;
        return '<input type="hidden" id="setShowSlideCheck" value="'.$_SESSION['setShowSlide'].'">';
      }else if ($setShowSlide != 1){
        return false;
        /* We don't need to return any other instance. If it's not 1, then we're being hijacked, and we want to stop all script execution. */
      }
    }else if(empty($_GET['setShowSlide']) && !empty($_SESSION['setShowSlide'])){
      return '<input type="hidden" id="setShowSlideCheck" value="'.$_SESSION['setShowSlide'].'">';
    }else if(empty($_GET['setShowSlide']) && empty($_SESSION['setShowSlide'])){
      /* Do not do anything. This is default behavior. We want this to display on page load the first time. */
    }
  }
?> 
```

在您的“模板”文件或“index.php”文件中，无论您使用什么文件来持续包含 javascript/css 以维护您的设计/流程。

```
<?php
  session_start();
  include_once('cookie_parseer.php');
?> 
```

在我们的 jQuery 中，我们现在可以测试 DOM 对象是否存在，`'setShowSlideCheck'`.

```
$(function(){
  if($('#setShowSlideCheck').length != 0){
    //Don't show the slide, show the slide in variations, more checking to see if user needs to see the slide again, etc.
  }else{
    $("#slide").hide().delay(2000).show("drop", {
        direction: "up"
      }, 500
    );        
    // let's build the click function you wanted now
    $('#slide #submit').click(function(){
      $.ajax({
        url: 'cookie_parser.php',
        data: 'setShowSlide=1', //we'll explain 0/1 methodology in the php description
        success: function(data){
        //we could do stuff with the (data) object, but we're not going to. 
        //Instead, we need to check it on page load.
        $("#slide").hide('drop', {
            direction: "down"    
          }, 500
        );
        //I'm choosing to hide the above in the callback for the success on ajax request.
        //You can actually do this wherever you like.
      }
    });
  });
  }
}); 
```

这是帮助您入门的一般目的。“点击”功能也包括在内，如您所愿。

# c# - 在 Jquery UI AutoComplete 中解析 JSON 对象

> ID：10130026
> 
> 赞同：1
> 
> 时间：2012-04-12T19:02:05.430
> 
> 标签：c#, asp.net, jquery-ui

我觉得对此有一个简单的答案，但是在将我的 JSON 数据返回到 JQuery UI 自动完成功能时遇到了问题。我正在使用“标签”和“值”字段，所以我可以存储一个 id 字段。问题是一旦将对象中的值传递回 JQuery 函数，我就无法解析它们。

在 ASP.NET C# 中，我有一个对象：

```
public class AutoCompleteItem
{
    public string label { get; set; }
    public string value { get; set; }
} 
```

并将它们设置为列表，格式化为 JSON，然后返回：

```
List<AutoCompleteItem> autoCompleteItems = new List<AutoCompleteItem>();
// Loop through data, add objects to list
var oSerializer = new JavaScriptSerializer();
string sJSON = oSerializer.Serialize(autoCompleteItems);
return sJSON; 
```

传递给 JQuery 后的 JSON 数据：

```
"[{"label":"Steve","value":"ID4545"},{"label":"Joe","value":"ID1212"},{"label":"Rick","value":"ID6767"}]" 
```

这是我用来尝试从 JSON 获取数据的函数：

```
success: function (data) {
      response($.map(data.d, function (item) {
          return {
              label: item.label,
              value: item.value
          }
                                }));
}, 
```

我注意到在使用“标签”、“值”格式之前，我只使用了一个 IList 字符串。传递的数据在外面没有引号，而我原来的例子有

```
["Steve", "Joe", "Rick"] 
```

我不知道这是否与问题有关，但我尝试了很多方法都无济于事。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:18:36.927

您显示的 JSON 中没有`.d`属性。所以：

```
success: function (data) {
    response(
        $.map(data, function (item) {
            return {
                label: item.label,
                value: item.value
            };
        })
    );
}, 
```

但是，如果您使用 ASP.NET Page 方法，那么您拥有 .d 属性，并且您不需要手动序列化 JSON。例如，您可以在后面的代码中使用以下 PageMethod：

```
[WebMethod]
public static List<AutoCompleteItem> GetAutoCompleteValues(string term)
{
    // the term variable will contain what the user entered so far

    var autoCompleteItems = new List<AutoCompleteItem>();
    // Loop through data, add objects to list
    return autoCompleteItems;
} 
```

接着：

```
source: function(request, response) {
    $.ajax({
        url: '/foo.aspx/GetAutoCompleteValues',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ term: request.term }),
        success: function(data) {
            response(
                $.map(data.d, function(item) {
                    return {
                        label: item.label,
                        value: item.value
                    };
                });
            );
        })
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:19:27.107

您不需要转换 JSON 响应 - jQuery UI 已经在期待这些令牌。

来自 jQuery UI 文档：

```
$(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#birds" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }
        });
    }); 
```

您可以直接访问项目的`value`和`id`属性，因为 jQuery 传递给这些事件处理程序的第二个参数（在文档示例中`select:`）。不需要转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:26:22.047

为什么`JavaScriptSerializer()`首先使用？你只需要

```
 public ActionResult GetUserAutoComplete(string term)
 {  
      var users = _userRepository.GetUsersByTerm(term);
      var autoCompleteData = users.Select(x => new { label = x.Name + " " + x.Surname, value = x.Name + " " + x.Surname, id = x.UserId, }).ToArray();
      return Json(data, JsonRequestBehavior.AllowGet);
} 
```

# javascript - Nginx（服务 html）和 Node.js 设置

> ID：10130028
> 
> 赞同：0
> 
> 时间：2012-04-12T19:02:32.113
> 
> 标签：javascript, node.js, nginx, client-side

我正在考虑构建一个单页面的网络应用程序，仅使用 javascript 来更新页面（不重新加载）。所以我对使用什么样的设置感到困惑。

我对这两种技术都很陌生，所以我想知道你是否可以设置 nginx 来像普通的 web 服务器一样提供 html（+ js、css 和其他静态资源），然后从这些页面连接到 node.js websocket 服务器（相同的主机/IP）使用类似socket.io的东西？

这个设置是好是坏？什么是更好的方法？如果我在 node.js 中提供 html 页面并从 nginx 获取静态资源（css、js、图像...），我将获得什么优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:06:49.633

我不认为从 nodejs 本身提供少量图像和静态 html 将成为瓶颈，理想情况下，如果您需要在多个服务器之间进行负载平衡以及将内部 http 服务公开为 https 流量，则需要像 nginx 这样的前端代理。如果你没有这个要求，那将是一个矫枉过正的恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:55:02.683

从当前接受的答案中的各种评论中，我想注意以下几点。

NodeJS 本身在提供静态内容方面做得相当不错，在许多情况下与 nginx 一样好。

尝试代理 WebSocket 连接目前充其量是有问题的，因为大多数代理代码根本不支持它。目前，最好直接使用Node。

如果/当您需要单独交付静态内容时，最好在此时使用另一个域和 CDN。

# c - net-snmp：如何注册新的企业陷阱？

> ID：10130029
> 
> 赞同：1
> 
> 时间：2012-04-12T19:02:35.660
> 
> 标签：c, snmp, net-snmp, snmp-trap

我正在使用 net-snmp 和 agentx。我必须为标量和表注册我的企业 OID。例如：

```
netsnmp_register_read_only_scalar(...); // register my scalars
netsnmp_tdata_register(...); // register my table 
```

在我在我的 agentx 代码中进行这些调用之前，我的 OID 不会出现在 snmpd 中。

我的 MIB 文件也有 NOTIFICATION-TYPE 定义，例如：

```
myTrapTest NOTIFICATION-TYPE
    STATUS          current
    DESCRIPTION     "A sample trap."
    ::= { myNotifications 1 } 
```

我看了看，`#include <net-snmp/agent/agent_trap.h>`但这个文件似乎是关于发送陷阱，而不是注册自定义的。

***我的问题：*** 我应该调用什么来注册我的陷阱定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:06:31.383

事实证明，陷阱不需要注册。当我在 NET-SNMP 邮件列表中询问时，我收到的答案是：

> 您需要“注册”变量/表，以便主代理知道在获取/设置特定 OID 时要调用/调用哪个子代理（您与其他人），但是......
> 
> 您不必“注册”陷阱定义，您只需“发送”（正确组合的）通知（agentx-Notify-PDU）。

（来源： http: [//permalink.gmane.org/gmane.network.net-snmp.user/35320](http://permalink.gmane.org/gmane.network.net-snmp.user/35320)）

# django - 我应该把这些自定义权限放在 django 哪里？

> ID：10130039
> 
> 赞同：2
> 
> 时间：2012-04-12T19:03:18.283
> 
> 标签：django, permissions, location

[Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/#custom-permissions)展示了如何将您自己的权限放入 YourModel.Meta 类。

我想拥有一些与特定模型无关的权限。他们只会允许/限制不同的用户访问某些视图/页面。

定义这些权限的首选位置是什么？我应该为他们创建一个虚拟模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:05:28.747

如果可用，我将在“用户配置文件”模型中定义这种权限（请参阅[存储](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)有关用户的其他信息）。

如果由于某种原因“用户配置文件”不是一个选项，您仍然可以在模型中存储其他权限。请`User`参阅以[编程](https://docs.djangoproject.com/en/dev/topics/auth/#programmatically-creating-permissions)方式在 django 文档中创建权限，了解如何在`permissions`无法设置模型元属性时创建权限（即用户模型是在第三个应用程序库中定义）。

# excel - 通过文本自动创建到另一个工作表的超链接

> ID：10130040
> 
> 赞同：5
> 
> 时间：2012-04-12T19:03:19.247
> 
> 标签：excel, vba

我想知道如何根据各自工作表中两个单元格具有的相同文本值，通过脚本自动创建从一个 Excel 工作表到另一个工作表的超链接。

如果这可以在没有脚本的情况下完成，使用某种公式（如 VLOOKUP），这将是可取的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T21:55:59.883

*   使用 A1 中的值在同一张纸上的超链接：

**=HYPERLINK("#" & 地址(MATCH(A1, B1:B5, 0), 2), "链接")**

*   使用 A1 中的值超链接到特定的不同工作表：

**=HYPERLINK("#'我的数据库'！" & ADDRESS(MATCH($A1, '我的数据库'!$A:$A, 0), 1), "Link")**

*   超链接到单元格 A1 中列出的工作表

**=HYPERLINK("#'" & A1 & "'!A1", "链接")**

*   超链接到必须在单元格 C3 中列出的随机表上找到的列中的随机位置，与 A1 中的值匹配，3D 索引/匹配/超链接：

**=HYPERLINK("#" & CELL("地址", INDEX(INDIRECT(C3 & "!A:A"), MATCH(A1, INDIRECT(C3 & "!A:A"), 0))), "链接")**

这里有一个示例表，您可以在其中看到这些应用： ***[3D 超链接示例](https://sites.google.com/a/madrocketscientist.com/jerrybeaucaires-excelassistant/search-functions/3d-hyperlink)***

# c - 函数指针在这里如何工作？

> ID：10130041
> 
> 赞同：0
> 
> 时间：2012-04-12T19:03:27.220
> 
> 标签：c

我在这里问了一个关于函数指针使用的问题，有人回答给出了经典计算器的例子

```
float Plus    (float a, float b) { return a+b; }
float Minus   (float a, float b) { return a-b; }
float Multiply(float a, float b) { return a*b; }
float Divide  (float a, float b) { return a/b; }

in some way you select your operation

 /* Here there should be an if or a switch/case that selects the right operation */
 float (*ptrFunc)(float, float) = Plus; 
```

现在他说“这里应该有一个 if 或一个 switch/case 来选择正确的操作”

并且已经阅读了很多次函数指针可以用来替换 if 或 switch/case 语句，但无法理解（即使在这个计算器示例中）函数指针如何替换 if 或 switch/case？

谁能帮助我如何可视化函数指针替换 if 或 switch/case。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:05:31.300

如果你需要多次调用计算器函数，那么你只需要决定调用哪个函数一次，然后根据需要调用多少次。

```
if (something) {
    ptrFunc = Plus;
} else {
    ptrFunc = Minus;
}

c = ptrFunc(a, b);
z = ptrFunc(x, y); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:05:57.980

他不希望你*替换*它，他希望你写一个来选择正确的操作：

```
float (*ptrFunc)(float, float);
switch (something)
{ 
  case 1: 
    ptrFunc = Plus;
    break;

     .
     .
     .
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:07:56.543

考虑这样的事情：

```
typedef float (*op)(float a, float b);

typedef struct { 
   char name;
   op implementation;
} operation;

operation ops[] = {
    { '+', Plus},
    { '-', Minus},
    { '*', Multiply},
    { '/', Divide}
}; 
```

当您阅读您的输入时，您会找到`ops[n].name`与您从输入中获得的运算符匹配的 ，然后调用`ops[n].implementation`.

# java - Proguard 混淆，无需收缩或优化

> ID：10130043
> 
> 赞同：1
> 
> 时间：2012-04-12T19:03:29.057
> 
> 标签：java, android, proguard

我主要对混淆能力感兴趣。我看到只有混淆是可能的：[stackoverflow.com/questions/6633411/android-proguard-only-obfuscation](https://stackoverflow.com/questions/6633411/android-proguard-only-obfuscation)

这是否比与收缩和优化结合使用时更容易混淆，如果是这样的话，安全性会降低多少。

消除收缩和优化也会使应用程序更有可能通过其测试集，并且不太可能出现异常吗？包括这些步骤的 + 和 - 是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:59:42.370

收缩肯定**会**影响代码的正确性。例如，如果您在 xml 布局中设置 clickhandler，其中包含如下行：

```
 android:onClick="myClickHandler" 
```

那么除非您明确告诉 Proguard 保留该代码，否则它将在启用收缩时将其删除。直到运行时单击/触摸该小部件时，此错误才会显现出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:24:27.890

收缩和优化完全不会影响正确性；您的程序将完全正常工作。实际上，Proguard 引入错误的唯一方法是弄乱反射的某些方面，这将是由于混淆，而不是缩小或优化。

如果您询问缩小和优化对 jar 大小的影响有多大，请查看[http://proguard.sourceforge.net/#results.html](http://proguard.sourceforge.net/#results.html)以获取示例统计信息。

# java - 交互式甘特图

> ID：10130047
> 
> 赞同：3
> 
> 时间：2012-04-12T19:03:41.747
> 
> 标签：java, javascript, gantt-chart

我一直在使用 jfreechart 创建甘特图，甚至设法为其添加了里程碑。我还可以在网页上动态显示这些图表。

但现在我想在图表中添加更多交互，所以我需要某种客户端的东西。我检查了 jsgantt，它一般工作正常，我尝试扩展它以满足我自己的要求。我放弃了它，因为代码中到处都有 HTML CSS 样式，这使得它难以理解——作者声称这是为了更好的跨浏览器支持，但跨浏览器行为仍然是一个问题：树的文本没有与 Firefox 上的图表本身正确对齐。

我现在正在考虑从头开始，但不知道从哪里开始。这里似乎有几种选择：

1.  Javascript、HTML 和 CSS - 使用表格和背景颜色来格式化图表，这实际上是 jsgantt 方式。
2.  HTML5 Canvas 和 Javascript - 旧浏览器不支持并且对 DOM 不友好。
3.  Java 小程序 - 不确定。
4.  SVG 和 Javascript - 以前从未工作过。

任何人都可以根据您的选择经验给我一些建议。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:32:20.407

首先，问问自己你需要支持哪些浏览器和/或平台，因为这个问题的答案将决定你走哪条路。

正如您所说，旧浏览器不支持 Canvas，因此如果您需要支持它们，这将是一个问题。有一些 polyfill hack 可以为旧版本的 IE 添加画布支持，但速度很慢。

旧版本的 IE 也不支持 SVG。但是，在这种情况下，有一个很好的备用解决方案，因为 IE 从 IE5.5 开始就支持称为 VML 的替代矢量格式。几个 JS 库，例如优秀的[Raphael](http://raphaeljs.com/)，同时支持 SVG 和 VML，这取决于它们所运行的浏览器，允许您非常轻松地创建跨平台矢量图形。

鉴于上述情况，很明显 SVG（带有 VML 后备）是一个很好的选择。SVG 唯一的缺点是 Android v2.x 不支持它。v3 和 v4 确实支持它，但目前大多数 Android 设备仍在运行 v2.x。

所以暂时，如果您需要包括移动支持，请不要使用 SVG。然而，这种情况会迅速改变，我希望在一年后给出不同的建议。如果您不担心 Android 用户，那么我肯定会说现在就使用 SVG。

Java 小程序是个坏主意。这肯定会在很多移动环境中崩溃，并且会在其他环境中缓慢运行。小程序已经非常失宠，因为它们占用了过多的处理资源，并且在它们与它们所在页面的其余部分之间经常有一个尴尬的用户界面断开连接。

Flash 和 ActiveX 也有类似的说法。如果你打算走这条路，Flash 可能是最安全的选择，而不是 Java 小程序，但 Flash 当然不能在 iOS 设备上运行。

综上所述，很明显，如果你想要一个完全跨浏览器和跨平台的完全干净的解决方案，那么你需要使用纯 JS、HTML 和 CSS。这不是它听起来的负担，特别是对于像甘特图这样的图表，其中所有内容都是水平和垂直的线条和框。您甚至不需要为此使用 HTML 表格——事实上，我强烈建议不要使用表格，因为它们确实引入了跨浏览器的怪癖。只需将`<div>`元素用于所有内容，并仔细定位和布局，就可以了。

无论你使用什么，如果你想让它具有交互性，我强烈建议使用 jQuery 来处理点击和拖动、移动和调整大小。可以用纯JS来做，也可以很好用，但是工作量很大，jQuery让它轻松了很多。

希望有帮助。

# wpf - Avalon Dock Auto Hide 加载问题

> ID：10130050
> 
> 赞同：4
> 
> 时间：2012-04-12T19:03:48.280
> 
> 标签：wpf, avalondock

我在使用 Avalon Docking 时遇到问题，我的第二个面板停靠在底部并设置为 AutoHide。当 UI 运行时，窗格默认加载为停靠/可见。我想让它隐藏/最小化。

```
<ad:DockingManager>
    <ad:ResizingPanel Orientation="Vertical">
        <ad:DocumentPane>
            <ad:DocumentContent>
                <... data grid that fills the view>
            </ad:DocumentContent>
        <ad:DocumentPane>
       <ad:DockablePane>
            <ad:DockableContent Title="output" DockableStyle="AutoHide" IsCloseable="False">
                <...some control> 
```

我已经尝试过 Avalon 论坛上建议的各种“黑客”，在 OnLoad，你可以

```
outputDockablePane.ToggleAutoHide(); 
```

这很有效，这意味着当加载 UI 时，窗格会被隐藏。但是，一旦您在 .cs 代码中切换自动隐藏，在运行时单击停靠标题以使窗格可见/浮动停止工作。因此，您必须连接 DockingMananger.OnMouseUp() 并解析几个布尔状态并手动调用 ToggleAutoHide() - 我猜只是在时间上。对我来说似乎是一个黑客。

这就是我现在正在做的事情，直到我找到一个合适且干净的解决方案：

```
 private void OnDockManagerLoaded(object sender, RoutedEventArgs e)
    {
        if(_firstTimeLoad && !_isDataGridLoaded)
        {
                outputDockablePane.ToggleAutoHide();
                _forcedToAutoHide = true;
        }
    }

    private void OnDockingManagerMouseUp(object sender, MouseButtonEventArgs e)
    {
        if (_forcedToAutoHide)
        {
            _forcedToAutoHide = false;

            outputDockableContent.Activate();
            outputDockablePane.ToggleAutoHide();
        }
    } 
```

是否有我完全丢失的设置/属性，或/和更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T08:21:43.780

4 年仍然 Avalon Docking 有同样的问题。虽然我还没有找到合适的解决方案，但我已经尝试改进你的解决方法逻辑。

```
private void OnDockingManagerMouseUp(object sender, MouseButtonEventArgs e)
{
     if (outputDockableContent.IsAutoHidden)
     {
        outputDockableContent.IsActive = false;
     }
} 
```

# ant - 使用并行任务时如何停止多个 Ant 任务的输出混乱？

> ID：10130052
> 
> 赞同：1
> 
> 时间：2012-04-12T19:03:58.953
> 
> 标签：ant

我正在修改我们的 build.xml 以使用并行任务，主要是为了加快我们在 CI 服务器上的构建速度。

我遇到的一个小问题是阻止输出（stdout）变得混乱。

```
<target name="build">
    <antcall target="clean"/>
    <antcall target="prepare"/>
    <antcall target="externals"/>
    <antcall target="migrate"/>

    <parallel>
        <antcall target="phpunit"/>         
        <antcall target="jshint"/>
        <antcall target="phploc"/>
        <antcall target="phpcpd"/>
        <antcall target="pdepend"/>
        <antcall target="phpcs"/>
        <antcall target="phpmd"/>
        <antcall target="php-lint"/>
    </parallel>
</target> 
```

输出的片段（来自 php-lint 和 phpunit 任务）：

```
[apply] No syntax errors detected in /home/bhafichuk/workspace/icarus/source/library/Icarus/Model/DbTable/User.php
 [exec] ............................................................
 [exec] 
 [exec] Time: 02:11, Memory: 24.75Mb
 [exec] 
        OK (123 tests, 433 assertions)

[apply] No syntax errors detected in /home/bhafichuk/workspace/icarus/source/library/Icarus/Model/DbTable/User/Contact.php 
```

我希望有一种方法可以缓冲任务的输出，直到任务完成，然后写入标准输出。

请注意，我真的不关心输出相对于任务的顺序，只关心一个任务输出与另一个任务输出的交错。

有人对如何做到这一点有任何建议吗？是否有更好的方法来提高不会导致此问题的构建速度？

# java - 为什么要使用 new 创建一个 String 对象

> ID：10130054
> 
> 赞同：1
> 
> 时间：2012-04-12T19:04:10.880
> 
> 标签：java, string

> **可能重复：**
> [Java 字符串：“String s = new String(”silly“);”](https://stackoverflow.com/questions/334518/java-strings-string-s-new-stringsilly)
> [Java 中“new String(…)”这个表达式的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)

有两种方法可以创建 String 对象：

1) 在 String s ="hello" 中使用字面量（创建一个对象）
2) 在 String s = new String("hello") 中使用 new （创建两个对象）

我想知道为什么我需要采用 2) 方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T19:05:57.857

如果你用 new 创建一个字符串，那么你会得到一个不同的字符串引用。这可以避免令人毛骨悚然的行为：

```
String s = "hello";
String t = "hello";
String u = new String("hello");
System.out.println(s==t);
System.out.println(t==u); 
```

打印真假。我真的想不出我会在哪里使用它的真正软件。但从某种意义上说，创建新引用更“安全”，因此 == 并不会让我们感到惊讶。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:08:43.237

它们之间的基本区别是内存分配。

第一个选项即

```
String s1 = "hello"; 
```

当您使用此**s1**时，它被称为**字符串文字**，并且 s1 的内存是在**编译时**分配的。

但在第二种情况下

```
String s2 = new String("hello"); 
```

在这种情况下，s2 被称为代表**hello的 String 对象**

当您尝试使用第一种情况创建两个字符串文字时，这两个文字仅引用一个内存。我的意思是字符串文字正在使用**字符串池**的概念。当您创建具有相同内容的第二个字符串文字时，而不是分配新的空间编译器将返回相同的引用。因此，当您使用**==**运算符比较这两个文字时，您会得到**正确**的结果。

 **但在第二种情况下，每次 JVM 都会为每个创建一个新对象。并且您必须使用**equals()**方法而不是**==**运算符来比较它们的内容。

如果您想使用第二种情况创建一个新的字符串对象并且您不想要一个新对象，那么您可以使用**intern()**方法来获取相同的对象。

```
String s = "hello";
String s1 = new String("hello").intern();
System.out.println(s == s1); 
```

在这种情况下，JVM 不会创建新对象，而是返回相同的引用**s**。所以输出将是**真实的**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:04:41.253

第二种方法只是一种可能。实际上从未使用过（大多数开发人员）。第一种是后者的一个不太方便的版本，没有理由使用第二种方式。

PS。第二个只是创建一个与文字不同的链接。从技术上讲，他们将重用相同的 char 数组。唯一的区别是引用会不同（即 == 将给出错误，但永远不要使用 == 进行字符串比较）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:09:48.973

*唯一*`new String("foo")`应该使用的精神健全的场合是单元测试。您可以确保代码不`==`用于字符串比较，而是使用正确的`.equals()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:10:10.533

这可以理解为每个副本的构造函数。它们在 C++ 中非常常用。最终效果是具有作为参数传递的对象的副本，在本例中为字符串。**

# visual-studio-2010 - 从 64 位开发系统到 32 位虚拟机的远程调试

> ID：10130055
> 
> 赞同：1
> 
> 时间：2012-04-12T19:04:25.517
> 
> 标签：visual-studio-2010, remote-debugging

我有一台装有 Visual Studio 2010 Pro 的 Windows 7 64 位机器。在这台机器上，我有一个 Vista Business 32 位虚拟机 (VMWare)。现在我想建立远程调试。我可以建立连接并附加到现有进程（例如 firefox）。

但是当我尝试启动我非常简单的项目时，我收到错误“Visual Studio 远程调试器不支持此版本的 Windows”。

我关闭了远程调试器的身份验证。

有任何想法吗？

# javascript - 浏览 javascript 日期对象

> ID：10130059
> 
> 赞同：1
> 
> 时间：2012-04-12T19:04:43.333
> 
> 标签：javascript, date, object, navigation

你知道在不编写自己的扩展名的情况下“导航”日期对象的方法吗？例如。你有：

```
var x = new Date(); 
```

然后您想单击一个按钮并向前或向后移动一个月以自动获取下一个/上一个月份（自动更改年份？..这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:11:41.927

看来您只需要查看[对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)[上的方法`Date()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)即可。

此代码会将日期提前一个月，并在需要时正确滚动到下一年：

```
var x = new Date();
x.setMonth(x.getMonth() + 1); 
```

您可以对其他属性执行类似的操作。

示例： http: [//jsfiddle.net/jfriend00/qBRgF/](http://jsfiddle.net/jfriend00/qBRgF/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:12:02.943

您可以使用以下方法增加或减少天数：

```
Date.prototype.addDays = function(days) {
   this.setDate(this.getDate()+days);
} 
```

[http://javascript.about.com/library/bladddays.htm](http://javascript.about.com/library/bladddays.htm)

月份和年份将是相似的。

但如果你真的在寻找一个日期选择器，使用这个：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

# asp.net - asp.net中的复选框渲染

> ID：10130060
> 
> 赞同：0
> 
> 时间：2012-04-12T19:04:44.360
> 
> 标签：asp.net, html

![Internet Explorer 中的复选框渲染](../Images/a9fbd5fa79e362251e87dc5bc0f4aa5b.png)

以上是 Internet Explorer 8 中复选框渲染的附加图像。

使用的代码是 `<asp:CheckBox runat="server" ID="selectCheckBox" />`

虽然它在 Firefox 和 chrome 中完美呈现，但无法选中复选框，但任何帮助都会更好地解决不同浏览器中的这个呈现问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:37:48.217

您没有定义`Text`复选框。

```
<asp:CheckBox ID="selectCheckBox" runat="server" Text="Label" Checked="False" OnCheckedChanged="selectCheckBoxChanged" /> 
```

# silverlight - Windows 8 Metro XAML 本地化

> ID：10130065
> 
> 赞同：2
> 
> 时间：2012-04-12T19:05:15.423
> 
> 标签：silverlight, xaml, localization, windows-runtime, winrt-xaml

我正在将 silverlight XAML/C# 应用程序转换为 Metro。对于 C# 代码，没有问题。对于 XAML，根据我的阅读，有对 XAML 的新支持以简化流程。但是，我希望重用相同的 resx 文件，因此我更喜欢 XAML 的旧 silverlight 机制，即标记扩展或绑定。我刚刚尝试了 MarkupExtension 但它似乎不支持。如何转换资源绑定。请注意，我的目标是重用资源文件中的名称-值对，因此我将无法使用新的 Metro 绑定机制。

有什么建议吗？

在silverlight中是这样的：

XAML：

```
<sdk:TabItem Header="{Binding Path=Resource.charts, Source={StaticResource LocalizedStrings}}"/> 
```

本地化字符串.cs

```
 public partial class LocalizedStrings
    {

        private static Resources.Resource resource = new Resources.Resource();

        public Resources.Resource Resource { get { return resource; } }
    } 
```

由于旧代码重用，我将无法使用的新 Metro 风格本地化：

```
<TextBlock x:Uid="HelloWorld" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:54:02.860

我最终编写了一个转换器来更改我所有的资源文件。Silverlight 资源文件中的“somekey”被转换为“somekey.Content”。这将使用 Content 属性自动处理一些 UI 元素，例如 Button。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:30:25.730

如果您不想更改名称-值对，则必须使用`ResourceLoader`该类来访问`.resw`文件。

```
var resourceLoader = new ResourceLoader();
// access a given name key
var var someValue = resourceLoader.GetString("someKey"); 
```

这意味着您还必须编写相当多的属性来绑定并将 XAML 更改为新的可绑定属性。因此，也许值得考虑改用新的 Metro 本地化。

一个完整的本地化示例可以在[win8 开发中心](http://code.msdn.microsoft.com/windowsapps/Application-resources-and-cd0c6eaa)找到。

# python - **keyword 形式的形参

> ID：10130070
> 
> 赞同：1
> 
> 时间：2012-04-12T19:05:31.540
> 
> 标签：python, keyword

“**关键字形式的形式参数”的目的究竟是什么？我把它放在引号中，因为这就是它在文档中所指的，但我很难找到关于它的信息，并认为它可能有一个正式的术语。

据我了解，它允许用户执行类似的操作

```
def foo(**keywords):
   for i in keywords:
       print(i, ":", keywords[i])

foo(val1="1", val2="2", val3="3") 
```

输出：

```
val1 : 1
val2 : 2
val3 : 3 
```

这究竟有什么好处？为了便于理解，传递字典变量不是更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:13:16.843

如果使用字典，调用函数将如下所示：

```
myfunv({"key1": "value1", "key2": "value2"}) 
```

使用 **kwargs 这变成

```
myfunc(key1="value1", key2="value2") 
```

许多人更喜欢后者。

当您将参数透明地传递给另一个函数或类时，此构造也非常有用。例如，我在继承 Tkinter 小部件时经常使用它。我想支持基类的所有选项，所以我这样编码：

```
class MyFrame(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        <more code here> 
```

这使我可以支持所有相同的论点，而不必明确列出所有论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:10:56.623

一种用途是当您想要转发参数时。例如：

```
def do_some_work(kwd1=None, kwd2=None, ...):
    ....

def intermediate_function(some_other_params, **kwargs):
    ...
    do_some_work(**kwargs)

def main():
    intermediate_function(some_other_params, kwd1=5, kwd2='foo') 
```

这样，如果您将参数添加到`do_some_work`，则不必将其添加到定义`intermediate_function`和调用中`do_some_work`。

* * *

另一个使用它的地方是 Django 的信号处理程序。当你写一个处理程序时，你把它写成表格

```
def handle_signal(sender, instance, **kwargs): 
```

以便将来可以更改 API 以传递其他参数，而无需用户将参数添加到一堆不会使用它们的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:08:14.923

使用此构造，调用者可以使用标准关键字参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:11:40.017

从历史上看，参数传递是通过位置参数或关键字参数传递的。将复杂对象作为参数传递是一个相对较新的功能，人们更愿意将值作为参数传递

1.  这很简单
2.  可读性

现在扩展概念，在支持时传递变量位置和关键字参数会产生上述结构。

有趣的是，通过构造仍然可以传递字典，但是负责任的程序员不想要的意图变得不那么明显了。

# oop - 如果两个子类具有相同的方法，什么是更好的设计？

> ID：10130073
> 
> 赞同：1
> 
> 时间：2012-04-12T19:05:36.657
> 
> 标签：oop

举个例子， if`House`是基类，`Colonial`是 的子类`House`，Colonial 有一个方法是`goUpstairs`。还有另一个类称为`Mansion`，它也是 的子类`House`，并且`Mansion`有一个方法`useElevator`（比如说一个豪宅可以有很多楼层，比如 1 到 35 层）。

事情应该这样开始吗？或者，如果 6 个月后，需要一个新类`Duplex`，它是 的子类`House`，并且还需要一个方法`goUpstairs`？如果我们在and中复制`goUpstairs`代码，那么它就不是那么 DRY（不要重复自己）。最初的类应该设计不同吗？还是应该在 6 个月后才进行不同的设计，应该如何改变？`Colonial``Duplex`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:14:30.610

我认为构建这样的继承树不是一个好主意。正如你所说，它发生了置换爆炸

尝试使用“接口”

在java中

```
public abstract class House {
 ...
}

public interface HasStairs {
    public boolean putUpstairs (Thing x);
    public boolean putDownstairs (Thing x);
}

public interface HasElevator {
    public boolean putUp (Thing x);
    public boolean putDown (Thing x);
    public boolean putTo (Thing x, Floor pFloor);
}

public MyHouseA extends House {}

public MyHouseB extends House implements HasStairs {}

public MyHouseC extends House implements HasElevator {}

public MyHouseD extends House implements HasStairs, HasElevator {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:12:06.110

如果房子是一个完整的（非抽象的）类，那么它应该只具有所有子类中通用的功能。如果您想让多个类具有并非所有房屋共有的类似功能，则可以有多个子类。

```
Public House ...

Public MultiLevelHouse extends House {
    public void goUpstairs() ...

Public Duplex extends MultiLevelHouse {
   ...

Public Colonial extends MutliLevelHouse {
   ...

Public Mansion extends MutliLevelHouse {
    //Override goUpstairs to use useEvalator if you want 
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:17:17.847

那么在这种情况下，让我们考虑一下语义。

*   房子*有*楼梯。
*   房子*有*电梯。

所以，这样想，我们自然会得出*构图*。

与其把上升的方法放在房子本身，不如把房子想象成一个组件的容器。没有电梯也可以存在豪宅。

所以，你实现了一个`Elevator`类和一个`Stairs`类（或者也许`Escalator`）。如果他们共享一些代码或方法，例如`goUp`or `goDown`，您可能会有一些接口或基类之类的`IVerticalTransport`东西。

继续这个思路，你也会有一个`Floor`对象。An`IVerticalTransport`将连接一个或多个`Floor`s，而这些 s 又将包含在 a 中`House`。

稍微扩展一下以再次包括您提到的 Mansion 和 Duplex 概念，拥有一个`HouseFactory`. A`HouseFactory`将具有`House`使用特定设置配置 s 的方法。

*   `HouseFactory.getMansion()`将返回 a `House`4 `Floor`s 和几个`Stair`s
*   `HouseFactory.getDuplex()`将返回`House`10`Floor`秒和 2`Elevator`秒的a
*   等等

我可以继续这样做真的......：D

# c# - 模拟 IRavenQueryable 并附加 Where() 表达式

> ID：10130077
> 
> 赞同：12
> 
> 时间：2012-04-12T19:05:43.193
> 
> 标签：c#, unit-testing, mocking, moq, ravendb

我正在尝试为新的 mvc3 项目做一些基本的概念验证类型代码。我们将 Moq 与 RavenDB 一起使用。

行动：

```
public ActionResult Index(string id)
{
    var model = DocumentSession.Query<FinancialTransaction>()
        .Where(f => f.ResponsibleBusinessId == id);
    return View(model);
} 
```

测试：

```
private readonly Fixture _fixture = new Fixture();

[Test]
public void Index_Action_Returns_List_Of_FinancialTransactions_For_Business([Random(0, 50, 5)]int numberOfTransactionsToCreate)
{
    // Arrange
    var session = new Mock<IDocumentSession>();
    var financialController = new FinancialController { DocumentSession = session.Object };

    var businessId = _fixture.CreateAnonymous<string>();
    var transactions = _fixture.Build<FinancialTransaction>()
        .With(f => f.ResponsibleBusinessId, businessId)
        .CreateMany(numberOfTransactionsToCreate);

    // Mock
    var ravenQueryableMock = new Mock<IRavenQueryable<FinancialTransaction>>();
    ravenQueryableMock.Setup(x => x.GetEnumerator()).Returns(transactions.GetEnumerator);
    ravenQueryableMock.Setup(x => x.Customize(It.IsAny<Action<Object>>()).GetEnumerator()).Returns(() => transactions.GetEnumerator());

    session.Setup(s => s.Query<FinancialTransaction>()).Returns(ravenQueryableMock.Object).Verifiable(); 

    // Act
    var actual = financialController.Index(businessId) as ViewResult;

    // Assert
    Assert.IsNotNull(actual);
    Assert.That(actual.Model, Is.InstanceOf<List<FinancialTransaction>>());

    var result = actual.Model as List<FinancialTransaction>;
    Assert.That(result.Count, Is.EqualTo(numberOfTransactionsToCreate));
    session.VerifyAll();
} 
```

看来问题出在 .Where(f => f.ResponsibleBusinessId == id) 中。从模拟的 IRavenQueryable 中，我返回了一个 FinancialTransactions 列表，所以有人会认为 .Where() 会根据它进行过滤。但由于它是 IQueryable，我猜它在枚举时试图将表达式全部作为一个执行。

为了验证，我将操作的查询更改为：

```
var model = DocumentSession.Query<FinancialTransaction>()
    .ToList()
    .Where(f => f.ResponsibleBusinessId == id); 
```

这确实让测试通过，但是，它并不理想，因为这意味着它将枚举所有记录，然后过滤它们。

有什么方法可以让 Moq 使用它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T09:05:43.420

正如评论中提到的，您不应该在测试中模拟 RavenDB API。

由于 InMemory 模式，RavenDB 对单元测试有出色的支持：

```
[Test]
public void MyTest()
{
    using (var documentStore = new EmbeddableDocumentStore { RunInMemory = true })
    {
        documentStore.Initialize();

        using (var session = documentStore.OpenSession())
        {
            // test
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-14T16:57:56.637

正如其他人所提到的，如果您可以使用内存/嵌入式模式，那么它非常适合*集成*测试。但在我看来，它对于单元测试来说不够快或不够容易。

我发现Sam Ritchie 的[一篇博客文章](http://samritchie.net/2012/11/28/fakeravenqueryablet/)为 IRavenQueryable提供了一个“假”（围绕标准 LINQ 的包装器`IQueryable`），用于此类情况。他有点过时了，因为较新版本的 Raven（当前为 2.5）在`IRavenQueryable`界面上提供了一些额外的方法。虽然我目前不使用这些新方法（`TransformWith`, `AddQueryInput`, `Spatial`），所以我现在只是懒洋洋地留`NotImplementedException`在下面的代码中。

有关我基于此的原始代码以及使用示例，请参阅[Sam 的帖子。](http://samritchie.net/2012/11/28/fakeravenqueryablet/)

```
public class FakeRavenQueryable<T> : IRavenQueryable<T> {
    private readonly IQueryable<T> source;

    public FakeRavenQueryable(IQueryable<T> source, RavenQueryStatistics stats = null) {
        this.source = source;
        this.QueryStatistics = stats;
    }

    public RavenQueryStatistics QueryStatistics { get; set; }

    public Type ElementType {
        get { return typeof(T); }
    }

    public Expression Expression {
        get { return this.source.Expression; }
    }

    public IQueryProvider Provider {
        get { return new FakeRavenQueryProvider(this.source, this.QueryStatistics); }
    }

    public IRavenQueryable<T> Customize(Action<IDocumentQueryCustomization> action) {
        return this;
    }

    public IRavenQueryable<TResult> TransformWith<TTransformer, TResult>() where TTransformer : AbstractTransformerCreationTask, new() {
        throw new NotImplementedException();
    }

    public IRavenQueryable<T> AddQueryInput(string name, RavenJToken value) {
        throw new NotImplementedException();
    }

    public IRavenQueryable<T> Spatial(Expression<Func<T, object>> path, Func<SpatialCriteriaFactory, SpatialCriteria> clause) {
        throw new NotImplementedException();
    }

    public IRavenQueryable<T> Statistics(out RavenQueryStatistics stats) {
        stats = this.QueryStatistics;
        return this;
    }

    public IEnumerator<T> GetEnumerator() {
        return this.source.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator() {
        return this.source.GetEnumerator();
    }
}

public class FakeRavenQueryProvider : IQueryProvider {
    private readonly IQueryable source;

    private readonly RavenQueryStatistics stats;

    public FakeRavenQueryProvider(IQueryable source, RavenQueryStatistics stats = null) {
        this.source = source;
        this.stats = stats;
    }

    public IQueryable<TElement> CreateQuery<TElement>(Expression expression) {
        return new FakeRavenQueryable<TElement>(this.source.Provider.CreateQuery<TElement>(expression), this.stats);
    }

    public IQueryable CreateQuery(Expression expression) {
        var type = typeof(FakeRavenQueryable<>).MakeGenericType(expression.Type);
        return (IQueryable)Activator.CreateInstance(type, this.source.Provider.CreateQuery(expression), this.stats);
    }

    public TResult Execute<TResult>(Expression expression) {
        return this.source.Provider.Execute<TResult>(expression);
    }

    public object Execute(Expression expression) {
        return this.source.Provider.Execute(expression);
    }
} 
```

# javascript - 根据 jQuery/JS 中的另一个选择显示更多选择

> ID：10130086
> 
> 赞同：0
> 
> 时间：2012-04-12T19:06:24.767
> 
> 标签：javascript, jquery

```
<div class="deals_options">
    Choose: 
    <?php
    echo '<select name="chosen_options[]">';
    foreach($deals_options as $option)
    {
    echo '
    <option value="'.$option['value'].'">'.$option['displaytext'].'</option>
    ';
    }
    echo '</select>';
    ?>
</div> 
```

这是我目前拥有的。这会输出一个选择，显示此交易报价存在的选项，您可以在其中进行选择。

现在对于交易要约，您还可以选择所需的交易要约数量。我想这样做，它会显示与您选择的交易报价一样多的选择器。

例如，如果您在 How many deal 报价中选择了 3，那么它应该显示您可以选择的 3 个选择器。

这是一个例子：

[http://jsfiddle.net/LWayp/](http://jsfiddle.net/LWayp/)

这是行不通的，所以当您选择一个数量时，什么也没有发生，但正如您所见，HTML/输出是我希望它工作的方式。当您选择 3 时，它会显示其中的 3 个选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:13:24.387

这应该工作

```
$(function(){

    $(".deals_options select").hide();    
    $('.deals_amount').change(function() {        
        $(".deals_options select").hide();

        var amount = $(this).val();

        var counter=0;
        $(".deals_options select").each(function(){
          if(counter<amount)
          {                          
            $(this).show();
            counter++            
          }
          else
          {
           // We dont want .each loop to run any more. So lets return !
            return false;               
          } 
        });
    });
}) 
```

工作样本：http: [//jsfiddle.net/LWayp/11/](http://jsfiddle.net/LWayp/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:13:33.287

**编辑：**如果您想从 DOM 中添加/删除，请参见下面的代码，[**DEMO**](http://jsfiddle.net/LWayp/15/)

```
 $('.deals_amount').change(function() {
    var amount = $(this).val();
    var selectCount = $('.deals_options select').length;
    if (amount < selectCount) { //remove
        $('.deals_options select:gt(' + (amount - 1) + ')').remove();
    } else {
        var $orig = $('.deals_options select:first');
        for (var i = 0; i < Math.abs(amount - selectCount); i++) {
            $orig.clone().insertAfter('.deals_options select:last');
        }
    }
}).change(); //<-- Triggered on load to populate with what it was set 
```

或者，您也可以根据交易金额选择显示/隐藏，

[**演示**](http://jsfiddle.net/LWayp/8/)

```
 $('.deals_options select').each(function () {
        if ($(this).index() < amount) {
            $(this).show();
        } else {
            $(this).hide();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:11:53.610

你的意思是这样的吗？

[http://jsfiddle.net/LWayp/7/](http://jsfiddle.net/LWayp/7/)

# python - 使用 dateutil 进行日期转换时的默认“未来”年份

> ID：10130091
> 
> 赞同：0
> 
> 时间：2012-04-12T19:06:40.537
> 
> 标签：python, python-datetime, python-dateutil

以下日期模式

```
1st January
30th April 
```

很容易被解析成`datetime.date`via的实例`dateutil.parser.parse()`：

```
In [1]:from dateutil.parser import parse

In [2]: parse('1st January')
Out[2]: datetime.datetime(2012, 1, 1, 0, 0)

In [3]: parse('8th April')
Out[3]: datetime.datetime(2012, 4, 30, 0, 0) 
```

**如何从解析中返回*未来日期？***

即解析`'1st January'`将返回`datetime.datetime(2013, 1, 1, 0, 0)`，2013 年 1 月 1 日而不是 2012 年 1 月 1 日。任何优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:08:04.207

从[mensi 对您上一个问题的出色回答](https://stackoverflow.com/a/10129479/5987)开始，这里有一个解决方案，它采用没有指定年份的日期并确保它们不是过去的。如果年份作为字符串的一部分给出，则保持不变。

```
import datetime
import dateutil

def parse(date_string):
    result = dateutil.parser.parse(date_string, default=datetime.datetime(1581, 1, 1))
    if result.year == 1581:
        now = datetime.datetime.now()
        result = result.replace(year=now.year)
        if result < now:
            result = result.replace(year=now.year + 1)
    return result

parse('8th April') 
```

# iphone - MkPolygon：点击时显示弹出气泡

> ID：10130092
> 
> 赞同：2
> 
> 时间：2012-04-12T19:06:48.220
> 
> 标签：iphone, objective-c, ios, mapkit

我有一组已添加到地图视图的 mkpolygons。

*   当用户点击任何多边形时，我想显示一个弹出窗口（标注）。弹出窗口应显示在水龙头的位置。
*   我希望气泡看起来与用户单击 pin 注释时相同，例如[http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Art/bullseye_view.jpg](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Art/bullseye_view.jpg)（尽管我不想在多边形顶部显示任何图钉或图标）。
*   现在只在气泡中显示 mkpolygon 的标题和副标题就可以了。

我的问题是：如何做到这一点？

仔细阅读，这似乎可以分解为两个步骤：

*   首先，使用手势识别器检测到 mkpolygon 已被点击（如：http://jona.than.biz/blog/detecting-touches-on-mkoverlayview/ [；](http://jona.than.biz/blog/detecting-touches-on-mkoverlayview/)但它似乎不是很有效）
*   然后，显示弹出窗口（我不知道如何在不显示 pin 的情况下做到这一点）

但是我对细节很模糊......

（对不起，如果这是微不足道的：我刚刚开始使用 iOS 开发和 MapKit）

谢谢你的帮助。

杰斯特拉

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-06T01:04:09.970

要自动获取弹出气泡（标注视图），您必须将 MKAnnotations 添加到您的 mapView。您可以自定义注释的外观

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
```

通过返回 MKAnnotationView 的自定义实例。

第二种选择是自己重新创建 UICalloutView 并在检测到点击时显示它（使用链接中描述的 UIGestureRecognizer），可以在此处找到可能的（未经测试的）实现：[http://www.eidac。 de/?p=183](http://www.eidac.de/?p=183)

# php - PHP - 致命错误：允许的内存大小为 268435456 字节已用尽

> ID：10130094
> 
> 赞同：2
> 
> 时间：2012-04-12T19:06:52.053
> 
> 标签：php, html, memory-leaks, garbage-collection

致命错误：已用完允许的 268435456 字节内存大小。

我已经安装了 PHP 5.3 版本并添加了 gc_collect_cycles();

需要的地方。

我正在使用具有大量 URL（网站）的 PHP 简单 dom 库来检查它们是否良好（它检查 iframe 并在 HTML 中嵌入标签，如果存在与 youtube、metacafe 不同的 SRC 属性的 iframe 或嵌入标签或 dailymotion 会将 URL 标记为不好。

网站是我的（不刮任何人）。

如果每次在循环结束时调用 clear() 方法、null、unset 和 gc_collect_cycles，为什么会出现内存泄漏。

```
 foreach ($data as $blog) {
         $htm = file_get_html($blog['blogurl']);

         if ($htm->find('iframe', 0)) {

        foreach ($htm->find('iframe') as $if) {
          if (! preg_match('/(dailymotion\.com|metacafe\.com|youtube\.com)/i', @ $if->src)) {
            //this URL i
            mark_url_not_good($blog['blogurl']);

            $htm->clear();
            $htm = null;
            unset($htm);
            gc_collect_cycles();
            continue 2;
          }
        }

      }
            $htm->clear();
            $htm = null;
            unset($htm);
            gc_collect_cycles();

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:13:14.980

> 如果每次在循环结束时调用 clear() 方法、null、unset 和 gc_collect_cycles，为什么会出现内存泄漏。

*好吧，简单的 dom 库*中可能只是内存泄漏，垃圾收集无法解决这个问题。在没有看到您的代码的情况下，很难给出在这种情况下最好做什么的建议。

您可能想用更原生的解析器（如`DOMDocument`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T01:14:23.677

你真正需要的是：

```
$htm->__destruct(); 
```

每次不再需要 $htm 信息时清除 simple_html_dom 内存。例如，在您拥有的地方使用它：

```
$htm->clear(); 
```

注意双下划线！

# c++ - 构建后 D3DX11EffectsD.lib 未显示（vs2010）

> ID：10130098
> 
> 赞同：0
> 
> 时间：2012-04-12T19:06:59.000
> 
> 标签：c++, visual-studio-2010, directx

我开始学习 DX11 并在效果框架上遇到了麻烦。我知道它是作为源发布的，我必须构建它，但是构建的输出不是我所期望的。根据我对这个问题所做的研究，构建的输出应该是 D3DX11EffectsD.lib 用于调试 D3DX11Effects.lib 用于发布

但是，当我在构建项目后查看“Effects11\Debug”目录时，我只看到一个文件 Effects11.lib（好吧，我假设是一个 .lib 的 Effects11 对象库文件，我是 c++ 新手），和“Effects11\Release”中完全相同的文件。这里发生了什么？我以前从未使用过 VS 2010 for c++，但我认为我正在正确构建解决方案。

这是重命名文件的问题还是我在没有意识到的情况下做错了什么？我真的找不到太多关于在 vs 2010 中构建和链接库的文档。有人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:50:57.100

如果你准确地编译了你从网上得到的东西，那么我*认为*这只是一个命名约定问题。

您应该尝试将其编译到您的最终应用程序中，看看它是否会因为缺少调试符号而大喊大叫。

您还可以进入构建设置（我已经有一段时间没有将 Visual Studio 用于 C# 以外的任何东西了，所以我不知道该菜单选项的确切位置（我假设右键单击该项目应该会产生一些有用的信息）结果）...我通常在 linux 上做我的 C++ 东西）并检查构建的目标是用于调试和发布的。如果事实证明两者的名称相同，但是构建目标（即文件夹和其他一些选项，例如包括调试符号）不同，那么您应该很好，这只是一个命名问题。

此外，如果文件大小完全相同，则它们很可能是相同的，因为调试文件应该至少比发布文件大一点。

如果事实证明它们是同一个文件，请尝试重新下载或重新提取源代码，然后再次编译项目而不做任何更改，看看是否有任何结果。

# arrays - 访问数组中的单个字节

> ID：10130104
> 
> 赞同：0
> 
> 时间：2012-04-12T19:07:42.130
> 
> 标签：arrays, pointers, byte

我正在尝试访问宽字符数组的各个字节，以便我可以通过 winsock 发送它，这就是我到目前为止所得到的：

```
WCHAR* buffer_in_bytes = (WCHAR*)msc->wcArray;
unsigned char l;
for (unsigned int i = 0; i <= (msc->bSize*2); i++ )
{
    l = (unsigned char)(*(buffer_in_bytes +i));
    char s[256] ;
    _itoa(l,s,16);
    OutputDebugString(s);
} 
```

它们的数组包含一系列 a(s) (aaaaaaaaaaaaaaaaaaaa....)，我希望看到`00 61 00 61 00 61` 我得到的结果`61 61 61 61 61 61`

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:11:02.113

每个元素都包含一个“a”或 ASCII 61，这就是您所看到的打印内容。我不知道为什么你会期望看到这些穿插着 0。

# javascript - 我在未定义的错误中得到 2 $

> ID：10130105
> 
> 赞同：0
> 
> 时间：2012-04-12T19:07:47.607
> 
> 标签：javascript, html

我在下面有一个表单和 2 个 javascript 函数，但在我的控制台中出现 2 个“$ is defined”错误。如何修复下面的这 2 个错误（错误位于该行旁边包含“//err”的行中：

```
<body>

<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload();' class='imageuploadform' >
<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/>
<label>Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/>
<label><input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
<label><input type='button' name='imageClear' class='imageClear' value='Clear File'/></label>
</p> 
<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>

<script type="text/javascript">
var sourceImageForm; 

function startImageUpload(imageuploadform){
 //err $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

      return true;
}

function stopImageUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }
     //err  $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><label>(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');

      return true;   
}

</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:12:10.020

该`$`变量最常用于`jQuery`，您的页面上似乎没有。这*不是*javascript 的一部分；它是一个图书馆。`script`如果要使用它，则需要将其包含在标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:11:42.580

如果您使用 jQuery，则需要确保此代码位于您包含 jQuery 的位置之后，并且它不会在 document.ready 之前运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:16:33.437

在您的函数上方包含 jQuery。并且，确保它们在页面加载时加载如下：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" />
$(document).ready(function () {
    // FUNCTIONS GO HERE
}); 
```

# scala - Scala 如何知道“def foo”和“def foo()”之间的区别？

> ID：10130106
> 
> 赞同：21
> 
> 时间：2012-04-12T19:07:48.423
> 
> 标签：scala

我知道 scala 中空参数和无参数方法之间的使用差异，我的问题与生成的类文件有关。当我在 javap 中查看这两个类时，它们看起来完全一样：

```
class Foo {
  def bar() = 123;
}

class Foo {
  def bar = 123;
} 
```

但是当我在 scalap 中查看它们时，它们准确地反映了参数列表。scalac 在类文件中的什么地方可以知道这种区别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T19:27:23.717

在 .class 文件中，有一个名为 的类文件属性`ScalaSig`，其中包含 Scala 所需的所有额外信息。它不是人类真正可读的，但它就在那里：

```
$ javap -verbose Foo.class
const #195 = Asciz      ScalaSig;
const #196 = Asciz      Lscala/reflect/ScalaSignature;;
const #197 = Asciz      bytes;
const #198 = Asciz      ^F^A!3A!^A^B^A^S\t\tb)^[7f^Y^Vtw\r^^5DQ^V^\7.^Z:^K^E\r!^
Q^A^B4jY^VT!!^B^D^B^UM^\^W\r\1tifdWMC^A^H^.... 
```

另请参阅[如何存储 Scala 签名？](http://www.scala-lang.org/node/945)和[scala.reflect.ScalaSignature](https://github.com/scala/scala/blob/2.12.x/src/library/scala/reflect/ScalaSignature.java)，这不是很有趣:-)

# javascript - jquery 验证自定义规则：如果选择 a ，则 b 是必需的，反之亦然

> ID：10130108
> 
> 赞同：1
> 
> 时间：2012-04-12T19:07:54.367
> 
> 标签：javascript, jquery, jquery-validate

我想验证两个文本框

文本框 a，文本框 b

如果 a 输入，b 是必需的 如果 b 输入，a 是必需的

简单地说，如果任何一个框/两者都有输入，则所有框都需要这个自定义有效规则应该是什么？谢谢

```
$(document).ready(function(){
$('.tabbable').tabs();
$("#selectList").validate({
    rules: {
   ...what rules should be add
           },
       })
    }); 
```

# blackberry - 黑莓定位问题

> ID：10130117
> 
> 赞同：-1
> 
> 时间：2012-04-12T19:08:07.527
> 
> 标签：blackberry, geolocation, gps, location

我的应用程序使用 gps 位置，但是如果我留在建筑物内，每次请求都会失败（超时错误），但是如果我也留在建筑物中，当我从设备位置设置选项刷新位置时，位置会很好地刷新。

这是我的代码

```
Criteria myCriteria = new Criteria();
myCriteria.setCostAllowed(false);
LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);

Location myLocation = myLocationProvider.getLocation(((int)timeOutInMiliseconds/1000));
lastLatitude = myLocation.getQualifiedCoordinates().getLatitude();
lastLongitude = myLocation.getQualifiedCoordinates().getLongitude();
lastAltitude = myLocation.getQualifiedCoordinates().getAltitude();
lastAccuracy = myLocation.getQualifiedCoordinates().getHorizontalAccuracy();
lastSpeed = myLocation.getSpeed(); 
```

请指教。

阿里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:32:10.950

当您将成本设置设置为**false** ( `myCriteria.setCostAllowed(false);`) 时，您将 GPS 模式设置为**自主**（下表取自[基于位置的服务开发指南 - 标准映射属性](http://docs.blackberry.com/en/developers/deliverables/17954/Criteria_mapping_880982_11.jsp)。

![在此处输入图像描述](../Images/f751c53a3b91e9f0cc81b21d21665be0.png)

**自主**模式仅依赖 GPS 卫星（[在此处](http://docs.blackberry.com/en/developers/deliverables/17954/GPS_modes_880984_11.jsp)查看有关 GPS 模式的更多信息）。

> 此模式使用 BlackBerry 设备上的 GPS 接收器来检索位置信息。此模式不能在室内或靠近许多物理障碍物的情况下使用，并且可能需要几分钟才能与四颗或更多卫星完全同步以进行第一次 GPS 定位。

这就是您的请求失败的原因。尝试使用其他 GPS 模式：**辅助**或**蜂窝站点**。

* * *

## **辅助**模式

> 辅助模式依赖于无线网络上的 GPS 卫星和服务器。此模式使用无线网络检索卫星信息。这种模式可以实现对第一个 GPS 定位的快速检索。

对于辅助模式，请使用此代码段（值得注意的是，有几种辅助模式）：

```
Criteria myCriteria = new Criteria();
myCriteria.setPreferredPowerConsumption(Criteria.POWER_USAGE_MEDIUM);
myCriteria.setHorizontalAccuracy(100);
myCriteria.setVerticalAccuracy(100);
myCriteria.setCostAllowed(true); 
```

* * *

## **基站**模式

> Cellsite 模式依靠地理定位服务或无线网络来提供当前基站的位置信息。此模式使用无线网络实现首次 GPS 定位，通常被认为是最快的模式。此模式不提供 BlackBerry 设备跟踪信息，例如速度和方位。

对于 cellsite 模式，请使用以下代码段：

```
Criteria myCriteria = new Criteria();
myCriteria.setPreferredPowerConsumption(Criteria.POWER_USAGE_LOW);
myCriteria.setHorizontalAccuracy(Criteria.NO_REQUIREMENT);
myCriteria.setVerticalAccuracy(Criteria.NO_REQUIREMENT);
myCriteria.setCostAllowed(true); 
```

# wordpress - 用户从 wordpress 发布到 Twitter

> ID：10130118
> 
> 赞同：0
> 
> 时间：2012-04-12T19:08:09.760
> 
> 标签：wordpress, twitter, passwords

我有一个房产网站，用户可以在 twitter 登录后添加房产。现在我想在他/她的 Twitter 页面上发布关于房产的更新。怎么可能？我已经设置了twitter aap。我的网站在 wordpress 中，所以我无法追踪用户密码。您能提供什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:11:21.237

你试过[这个插件](http://wordpress.org/extend/plugins/twitter-tools/)吗？

# jquery - 用于动态添加数据库行的 Jquery ajax 调用不会反映最新更改

> ID：10130128
> 
> 赞同：1
> 
> 时间：2012-04-12T19:08:46.327
> 
> 标签：jquery, dbcontext

我有一个 MVC3 应用程序，我在其中创建了一个页面，用于将新县添加到当前的健康计划中。每个健康计划都有一组县。从下拉列表中，您首先选择一个健康计划，这会导致附属于给定健康计划的所有县名称显示在它旁边。为此，我通过使用 jquery 中的 .getJson() 函数来动态实现这一点。

然后从另一个下拉列表中选择要添加到列表中的新县。单击添加按钮后，更改将通过对控制器的 ajax 调用动态保存在数据库中，但即使刷新页面后，添加的新县也不会显示在该健康计划的列表中。

我研究了这个问题，发现视图没有调用使用 .getJson() 动态调用以获取附属于健康计划的县列表的函数。有人可以解释一下这个场景，为什么会这样？如何分枝它？

谢谢！

# sql-server - 是否将所有内容存储在 MongoDB 中？同时使用 SQL？（最终一致性）

> ID：10130134
> 
> 赞同：2
> 
> 时间：2012-04-12T19:09:26.993
> 
> 标签：sql-server, mongodb, eventual-consistency, nosql

我和我的大学正在重新考虑使用 MongoDB 存储我们应用程序的所有数据。有些人认为，由于 Mongo 在用户注册或更新他的个人资料（或类似但更重要的东西）时的最终一致性，因此不会立即看到结果，并且可能会让用户感到沮丧。

我很确定，除非我们有大量数据并且我们进行一些复制，否则我们不会看到最终一致性的影响。但我不确定。

有什么建议吗？仅使用 mongo 还是添加额外的 SQL 服务器来存储敏感数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:27:15.650

让我们先回答一个不同的问题：您需要 MongoDB 的特殊功能还是可以使用普通的旧关系数据存储？

我不能回答那个（你可以）。

如果答案是“否”，您可以将所有内容都切换到 ACID SQL 数据库，而不必再担心此类问题。

全面阐述 NoSQL 和 SQL 之间的权衡将超出此文本编辑器的限制。我建议你在网上做一些研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:48:46.517

MongoDB 不是最终一致的，但它具有异步复制。您可以避免读取旧值的风险，方法是不从从属设备读取（一个简单的连接标志），或者写入一个等待复制完成后再返回的标志。查看文档或 getLastError 命令以获取有关后者的所有详细信息。

将 MongoDB 用于您所描述的内容很好。

# open-source - GPL/LGPL 和静态链接

> ID：10130143
> 
> 赞同：83
> 
> 时间：2012-04-12T19:10:01.253
> 
> 标签：open-source, gpl, static-linking, lgpl

我在网上读到存在以下组合：

**专有源代码 + GPL 源代码**-> GPL 源代码（所有代码必须在 GPL 下发布）

**专有源代码 + LGPL 源代码**-> 专有源代码（所有代码保持专有）

现在**静态/动态**链接 GPL 和 LGPL 代码如何与上述组合一起工作？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-16T17:59:16.073

如果您想分发组合作品，则必须使用以下许可；

**专有源代码 + GPL 源代码**

*   静态链接或动态链接：[您必须将这两个部分发布为 GPL](http://www.gnu.org/licenses/gpl-faq.html#IfLibraryIsGPL)。

**专有源代码 + LGPL 源代码**

*   静态链接：
    *   [您必须将这两个部分都发布为](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License#Differences_from_the_GPL)LGPL 。
    *   或者[提供允许用户使用不同版本的 LGPL 源代码重新链接应用程序的所有内容](http://www.gnu.org/licenses/gpl-faq.html#LGPLStaticVsDynamic)。在这种情况下，其他要求与动态链接相同。
*   动态链接：[LGPL 代码保持 LGPL，您可以保持专有代码专有](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License#Differences_from_the_GPL)。

另请参阅[从专有源代码执行 (L)GPL 程序](https://stackoverflow.com/q/1394623/33499)。

**更新（2014 年 11 月）**：[综合教程和指南](http://copyleft.org/guide/)包含对 (L)GPL 及其使用（包括分发）的清晰详细描述。我推荐它以获取更多详细信息。

# java-me - 如何使用 lwiit Painter

> ID：10130146
> 
> 赞同：1
> 
> 时间：2012-04-12T19:10:20.430
> 
> 标签：java-me, lwuit

我想用 Painter 创建一组按钮。我写了下一个代码

```
class ListButton extends Button{
int id;
    ListButton(int id, final Image unsel, final Image sel, final Image pres) {
        this.id = id;
        getUnselectedStyle().setBgTransparency(255);
        getSelectedStyle().setBgTransparency(255);
        getPressedStyle().setBgTransparency(255);            
        getUnselectedStyle().setAlignment(Component.LEFT);
        getSelectedStyle().setAlignment(Component.LEFT);
        getPressedStyle().setAlignment(Component.LEFT); 
        getUnselectedStyle().setBgPainter(new Painter(){

            public void paint(Graphics graphics, Rectangle rectangle) {

                graphics.drawImage(buttonBgImage, 0, 0);
                int w= rectangle.getSize().getWidth();
                int h= rectangle.getSize().getHeight();
                graphics.drawImage(unsel, w- unsel.getWidth()-10, (h- unsel.getHeight())/2+ 3);
            }
        });
        getSelectedStyle().setBgPainter(new Painter(){

            public void paint(Graphics graphics, Rectangle rectangle) {
                graphics.drawImage(buttonBgImage, 0, 0);
                int w= rectangle.getSize().getWidth();
                int h= rectangle.getSize().getHeight();
                graphics.drawImage(sel, w- sel.getWidth()-10, (h- sel.getHeight())/2+ 3);
            }
        });
        getPressedStyle().setBgPainter(new Painter(){

            public void paint(Graphics graphics, Rectangle rectangle) {
                graphics.drawImage(buttonBgImage, 0, 0);
                int w= rectangle.getSize().getWidth();
                int h= rectangle.getSize().getHeight();
                graphics.drawImage(pres, w- pres.getWidth()-10, (h- pres.getHeight())/2+ 3);
            }
        });

    }

} 
```

如果我在表单中插入 2 个按钮，则只会显示第一个按钮。第二个按钮没有背景图像（buttonBgImage）并且没有图标（sel、unsel 或 pres）。我随机发现如果将第二个按钮插入某个容器中，它将被绘制。什么奇怪的行为？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:16:34.613

List 对 Renderers/Painters 进行了特定的优化，打破了这一点。我们通常建议人们坚持使用样式和 UIID 操作，并避免使用画家来完成此类任务。

例如，在[Codename One](http://www.codenameone.com/) /LWUIT 中，我们甚至在 GUI 构建器中为列表渲染器中的细条纹 UI 提供了特定支持。

如果您坚持使用这种方法，请尝试使用 list.setMutableRendererBackgrounds(true); 禁用此优化。

# java - 2维数组初始化及使用

> ID：10130150
> 
> 赞同：1
> 
> 时间：2012-04-12T19:10:48.330
> 
> 标签：java, arrays, matrix, initialization, declaration

我正在编写一个使用大量矩阵计算的 java 程序，并且在某些计算期间，我在进一步计算之前使用多个临时“存储”矩阵。

我已经在类变量中声明了临时矩阵

`private double[][] intermediateMatrixA; private double[][] intermediateMatrixB; private double[][] intermediateMatrixC; private double[][] intermediateMatrixD;`

但是，我从未在构造函数或方法中以`intermediateMatrix = new double[][]`. 相反，我正在为每个临时矩阵执行此操作`intermediateMatrix = [the product of a matrix calculation]`

我的问题：我使用的方法是否安全考虑临时数组将在其他计算中重用？每次我声明我的一个临时矩阵应该等于另一个数组时，它将等于该矩阵的确切维度和值？

提前致谢 问候迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:23:37.100

是的，它是“安全的”，因为您的变量从上面指向您的方法或计算的结果，并且行和列将被保留。

```
private double[][] intermediateMatrixA = new double[3][4];
//etc etc
intermediateMatrixA =new double[5][6]; 
```

完全没问题，只要它始终是`double[][]`; 不过，跟踪行和列的逻辑取决于您。

您可以将类型分配`double[][]`给其他类型`double[][]`，但不能分配`double[]`给`double[][]`。

如果您打算一次又一次地使用它们，我建议您在分配它们之前将它们设置为 null，以防万一。

# php - 在 jquery 中解析 $.post 响应

> ID：10130152
> 
> 赞同：0
> 
> 时间：2012-04-12T19:11:00.940
> 
> 标签：php, jquery

我得到`$.post`了数组的响应。如何使用 jQuery 解析这个？

我需要输出为

```
array[0][gender]
array[1][lang] 
```

这是回复

```
Array
(
   [0] => Array
   (
       [gender] => <label for="genderType">Gender</label><input type="radio" id="femaleId" class="radioBtn" name="genderType" checked="checked" value="1"/>input type="radio" id="maleId" class="radioBtn" name="genderType" value="2" />Male 
       [lang] => <label for="email">Preferred Language:</label><select class='selectStaff dateClass' name='lang' id='lang'><option value=""></option>\n<option value="English">English</option>\n</select>
   )

) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:21:48.757

[`parseJSON`](http://api.jquery.com/jQuery.parseJSON/)您可以在返回的 json 上使用 jQuery 的函数。

例子：

```
data = jQuery.parseJSON(returnedData); 
```

# python - python错误处理中的类型转换

> ID：10130154
> 
> 赞同：1
> 
> 时间：2012-04-12T19:11:12.747
> 
> 标签：python, file-io

所以我正在阅读一个包含 2 列的文本文件

```
 foo, bar 
```

所以我做了类似的事情

```
for each_line in f:
   each_line = each_line.split(',')
   foo = int(each_line[0])
   bar = int(each_line[1]
   foobar = FooBar(foo,bar)
   foobar_list.append(foobar) 
```

现在，有时 foo 或 bar 是空白的.. 因此不能被类型转换为 int.. 有没有办法如果 foo 或 bar 为空的东西我可以跳过这个功能

（没有附加到食物栏）但是循环仍然继续进行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:28:22.697

有几个地方可能会失败，如果 each_line 没有足够的逗号，或者任何一个值都不是数字（例如，一个空字符串）。在每种情况下，您都可以捕获错误并使用以下内容`continue`跳至下一项`f`：

```
for each_line in f:
   try:
       foo_line, bar_line = each_line.split(',')
   except ValueError:
       # "Too many/few values to unpack" meaning wrong number of commas!
       continue
   try:
       foo, bar = int(foo_line), int(bar_line)
   except ValueError:
       # "invalid literal for int()" meaning it wasn't digits
       continue
   foobar = FooBar(foo,bar)
   foobar_list.append(foobar) 
```

我将其分解为两个独立的异常处理程序，因为它有两种不同的失败方式。你实际上可以像这样折叠它：

```
for each_line in f:
   try:
       foo_line, bar_line = each_line.split(',')
       foo, bar = int(foo_line), int(bar_line)
   except ValueError:
       # there was invalid input.
       continue
   foobar = FooBar(foo,bar)
   foobar_list.append(foobar) 
```

因为这是同一个例外，而且它们发生的很近。就个人而言，我更喜欢前者，以明确指出有两种错误。你不应该做的是：

```
# !!! BAD !!!
for each_line in f:
    try:
        each_line = each_line.split(',')
        foo = int(each_line[0])
        bar = int(each_line[1]
        foobar = FooBar(foo,bar)
        foobar_list.append(foobar)
    except ValueError:
        continue 
```

因为`FooBar()`甚至`foobar_list.append()`可能失败，但异常处理程序可以吞下它；始终使`try:`yoru 异常处理程序中的套件尽可能小，以便它们只捕获一个错误，并且很容易找到错误所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:19:50.410

这是异常处理的一个例外示例

```
for each_line in f:
   each_line = each_line.split(',')
   try:
       foo = int(each_line[0])
       bar = int(each_line[1]
       foobar = FooBar(foo,bar)
       foobar_list.append(foobar)
   except ValueError:
       None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:14:22.797

这测试它们是否为空（假设它们是字符串）：

```
if not foo or not bar:
    continue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:15:35.857

以防万一零件只有空格：

```
if foo.strip() != "":
    foo = int(each_line[0])
else:
    ??? 
```

# android - 使用计数器和 LVL 的有效宽限期

> ID：10130155
> 
> 赞同：0
> 
> 时间：2012-04-12T19:11:12.890
> 
> 标签：android, google-play, android-lvl

我正在考虑将当前付费的 Android 应用程序设为免费的可能性，但宽限期是根据应用程序的实际使用情况计算的。我的问题是关于 Android 许可的实际运作方式以及如何探索其可能性。

我想到的方案如下：

1.  用户免费下载该应用程序
2.  用户可以自由使用它`N`多次，计数器在特定成功操作后递增
3.  之后出现一个唠叨屏幕，用户必须停止使用该应用程序或从市场购买无限制许可证

实际上，另一种制作宽限期的方法不是基于时间的。

特别是，我必须确保**绝不允许**用户通过从设置菜单中删除应用数据来重置计数器。

实际上，如果我在存储在磁盘中`SharedPreferences`或磁盘上的计数器中编写上述要求，并在第一次启动时重置一个普通计数器（当应用程序存储为空时），那么用户可以作弊并通过以下方式重置计数器删除与应用程序关联的数据。

我想知道 Google 许可服务是否允许操作远程存储的数据。在我的例子中，我可以远程增加我的计数器，这样当应用程序第一次启动时，它会检查计数器的远程值，而不是存储在本地设备上的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:57:37.780

Google 的许可验证库 (LVL) 似乎提供了您想要做的大部分事情。它实际上提供了更多的东西，比如混淆等。

1.  [政策概述](http://developer.android.com/google/play/licensing/overview.html)
2.  [如何为其搭建开发环境](http://developer.android.com/google/play/licensing/setting-up.html)
3.  [如何在您的应用程序中实现 API](http://developer.android.com/google/play/licensing/adding-licensing.html)

> 用户最多可以自由使用 N 次，其中计数器在特定成功操作后递增

要了解这是如何实现的，请[在此处](http://developer.android.com/google/play/licensing/licensing-reference.html)阅读有关可设置为许可证一部分的重试期限和最大重试次数。

> 我想知道 Google 许可服务是否允许操作远程存储的数据。就我而言，我可以远程增加我的计数器，这样当应用程序第一次启动时，它会检查计数器的远程值，而不是存储在本地设备上的值。

这是你可以做的：

1.  在`GR`License 文件的额外标签中，存储一个 App 在系统上可以使用多少次。

2.  对许可证执行“严格政策”

3.  在应用程序每次启动时向服务器发送一个请求（带有唯一的设备/用户 ID），以返回应用程序启动的次数。

4.  检查收到的这个值和`GR`标签的值，看看是否可以运行应用程序。

    一世。如果有效，请运行应用程序并向您的服务器发送请求（使用唯一的设备/用户 ID）以增加有关此应用程序已使用次数的计数器并将此记录保留在那里。

    ii. 否则显示一条*烦人*的消息并退出。

我引用 LVL 的“严格政策”：

> LVL 包括一个称为 StrictPolicy 的 Policy 接口的替代完整实现。StrictPolicy 实现 **提供了比 ServerManagedPolicy 更严格的策略，因为它不允许用户访问应用程序，除非在访问时从服务器接收到许可响应，表明用户已获得许可。**StrictPolicy 的主要特点是它不会在本地存储任何许可证响应数据，在持久存储中。因为没有存储数据，所以不会跟踪重试请求，并且缓存的响应不能用于完成许可证检查。

# php - PHP OOP 无法编辑类属性

> ID：10130157
> 
> 赞同：0
> 
> 时间：2012-04-12T19:11:14.997
> 
> 标签：php

PHP 新手，尤其是 OOP。

我有一个类 User.php，我在 login.php 中使用它。

```
$vars = $user->login($email, $pass) 
```

目前我正在调用上述登录方法，最终我将调用一个 if 语句来验证等。然而，此刻，我正在尝试连接到数据库，提取一些信息并将该信息添加到我班上的属性。我可以提取信息（由方法 login() 中对象的 var_dumps 验证（$results 的 vardump），但由于某种原因，我当前的代码无法更新我的类属性。

这是我的代码

用户.php

```
<?php

class User {

public $id, $password, $first_name, $last_name;
private $user_level;
protected static $db_fields = array('id', 'first_name', 'last_name', 'pass');
protected static $table_name="users";

public function login($email, $pass) {
    global $database;
    $sql = "SELECT user_id, first_name, last_name, user_level FROM users WHERE (email='$email' AND pass=SHA1('$pass')) AND active IS NULL LIMIT 1";
    $results = self::find_by_sql($sql);
    if (!empty($results)) {
        $this->setuservars($results);
        return array_shift($results);
    } else {
        return false;
    }
//  return !empty($results) ? array_shift($results) : false;
}

private function setuservars($uservariables) {
    $this->id = $uservariables->id;
    $this->first_name = $uservariables->first_name;
    $this->last_name = $uservariables->last_name;
    $this->user_level = $uservariables->user_level;

    }

public static function find_by_sql($sql="") {
    global $database;
    $results_array = $database->query($sql);
    $object_array = array();
    while ($row = $results_array->fetch_assoc()) {
        $object_array[] = self::instantiate($row);
    }
    return $object_array;
}

public function mysqli_array_escape($arg1){
    global $database;
    foreach ($arg1 as $key => $value) {
        $arg1[$key] = $database->real_escape_string($value);
    }
    return $arg1;
}

private static function instantiate($record) {
    // Could check that $record exists and is an array
    $object = new self;
    foreach($record as $attribute=>$value){
        if($object->has_attribute($attribute)) {
            $object->$attribute = $value;
        }
    }
    return $object;
}

private function has_attribute($attribute) {
    return array_key_exists($attribute, $this->attributes());
}

protected function attributes() {
    // return an array of attribute names and their values
    $attributes = array();
    foreach(self::$db_fields as $field) {
        if(property_exists($this, $field)) {
            $attributes[$field] = $this->$field;
        }
    }
    return $attributes;
}

}

$user = new User();

?> 
```

这是我的 login.php（我已经编辑了 if 语句以验证用户是否成功登录，我已替换为“if (1 == 1) {”语句只是为了帮助调试代码。

```
if (isset($_POST['submitted'])) {

$postdata = $user->mysqli_array_escape($_POST);

//var_dump($user->results);

if (((!isset($_POST['email'])) || ($_POST['email']) == '') || (!isset($_POST['pass']) || ($_POST['pass']) == '') ) {
    //error handling eventually
} else { 
    $email = $_POST['email'];
    $pass = $_POST['pass'];
    $vars = $user->login($email, $pass);
    echo $vars->first_name;

    if (1 == 1) {
        echo "you have successfully logged in";
        var_dump($user->id);

    } else { 
        echo "not logged in"; 
    }
}   

} 
```

哦，我收到的当前错误是“第 26 行的脚本 'F:\internet\www\htdocs\blissoop\classes\User.php' 中发生错误：尝试获取非对象日期/时间的属性：4 -13-2012 05:01:09"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:55:52.490

我在这个问题的帮助下解决了这个问题

这是帮助的代码：[从包含对象的多维数组中获取值](https://stackoverflow.com/questions/1128519/get-value-from-multidimentional-array-containing-an-object)。

我对有帮助的答案 +1 了。

```
foreach ($array as $item) {
$userId = $item->user_id;
//do something with the userId for this item
} 
```

我必须遍历数组才能获取对象的属性。

# php - 删除 PHP 中的多个逗号

> ID：10130160
> 
> 赞同：2
> 
> 时间：2012-04-12T19:11:16.353
> 
> 标签：php, codeigniter, replace

对不起，如果这真的很基础，但我只是在学习 PHP。

我有一些看起来像的代码：

```
<h4><?=$prop['house_number']?>, <?=$prop['street']?>, <?=$prop['town']?></h4> 
```

即从数据库中返回，例如：55, main street, townname

当地址不包含街道名称时，它会返回例如：55, , townname。

我想知道如何删除 commer，所以它只会带回例如：55，townname。

希望这是一个非常简单的方法，但我已经尝试了几件事，但似乎无法做到正确。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:15:49.113

使用数组来保存值，并且[`implode()`](http://php.net/manual/en/function.implode.php)

像这样的东西：

```
$result = array();

if (!empty($prop['house_number'])
    $result[] = $prop['house_number'];

if (!empty($prop['street'])
    $result[] = $prop['street'];

if (!empty($prop['town'])
    $result[] = $prop['town'];

$result = implode(',',$result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:14:36.557

代替

`<?=$prop['street']?>,`

和

`<?php if(strlen($prop['street'] > 0) echo $prop['street'] . ", "; ?>`

旧代码输出街道名称后跟逗号，新代码检查街道名称是否超过 0 个字符，如果是则仅输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:17:09.490

您可以使用内联条件，试试这个：

```
<?php
    $house_num=($prop['house_number']) ? $prop['house_number'].',' : null;
    $street=($prop['street']) ? $prop['street'].',' : null;
    $town=($prop['town']) ? $prop['town'] : null;
    $h4=$house.' '.$street.' '.$town;
?> 
```

然后在使用中：

```
<h4><?php echo($h4); ?></h4> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:16:07.113

您可以稍后修复您的输出：

```
ob_start();
?>
<h4><?=$prop['house_number']?>, <?=$prop['street']?>, <?=$prop['town']?></h4>
<?php
echo strtr(ob_end_clean(), ', , ', ', '); 
```

但实际上有一百种方法可以解决它，这只是一种。

```
echo '<h4>' , implode(', ', array_filter(
        array($prop['house_number'], $prop['street'], $prop['town']), 'strlen')
      ),  '</h4>'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T19:16:45.230

您可以使用三元运算符来检查每个 var 是否为空。看看[http://davidwalsh.name/php-shorthand-if-else-ternary-operators](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)

代码将如下所示：

```
<h4>
<?=!empty($prop['house_number']) ? $prop['house_number'].', ' : ''?>
<?=!empty($prop['street']) ? $prop['street'].', ' : ''?>
<?=!empty($prop['town']) ? $prop['town'].', ' : ''?>
</h4> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T19:19:52.567

建议你习惯于数组函数，并内爆；假设您的 $prop 数组如下所示：

```
$prop = array(
    "house_number" => 55,
    "street" => "",
    "town" => "Houston"
); 
```

您可以过滤数组并使用 implode：

```
function filter_empty( $a ) {
    if( strlen(trim($a)) > 0 ) return( true );
    return( false );
}

$filtered = array_filter( $prop, 'filter_empty' ); 
```

从那时起，数组将如下所示：

```
print_r( $filtered );
/*
Array
(
    [house_number] => 55
    [town] => Houston
)
*/ 
```

人类可读的文本行很简单：`echo implode( ", ", $filtered );`

将输出类似的东西`55, Houston`- 绕过所有空。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T02:01:59.960

这只是另一种方式，您可以将地址字符串保存在变量中，并将双逗号 [,,] 替换为单个逗号。[类似于 hakre](https://stackoverflow.com/users/367456/hakre)所暗示的想法。

例子：

```
<?php $str = $prop['house_number']  . ',' . $prop['street'] . ',' . $prop['town']?> ;?>
<h4><?=str_replace(',,','',$str);?></h4> 
```

# android - Android 浏览器宽度拉伸到 iframe 内容宽度，尽管溢出：隐藏

> ID：10130162
> 
> 赞同：3
> 
> 时间：2012-04-12T19:11:26.653
> 
> 标签：android, iframe, mobile, scroll, stretch

我正在尝试在 Android（Dolphin 浏览器）中模仿桌面风格的 iframe，并取得了一些成功。使用的技巧是将`<iframe>`with`position:relative;`放入`<div>`具有固定尺寸的 a 和`overflow:hidden;`中，然后使用 jQuery Mobile（或者更确切地说只是 vmouse 事件）来处理鼠标事件以进行滚动。

除了一件事，所有这些都很好；即使`<iframe>`被剪裁，它的内容也会拉伸浏览器以匹配大小。这在高度上很明显。

这是 JSFiddle 中的简化示例代码：http: [//jsfiddle.net/euKhG/](http://jsfiddle.net/euKhG/)

这是在 Android 浏览器中观看的结果：http: [//jsfiddle.net/euKhG/embedded/result/](http://jsfiddle.net/euKhG/embedded/result/)（仅适用于 Android 浏览器！）。

有谁知道如何解决这个问题？我在其他地方看到过 iScroll 和类似的建议，但它们似乎用这样的遥控器触摸框架`src`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:22:00.793

尝试在元标记中设置 target-densitydpi

```
 <meta id="viewport" name="viewport" content="initial-scale=1, user-scalable=no, width=device-width, target-densitydpi=160dpi"/> 
```

但是你也必须改变所有其他的css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:58:30.373

嗯，我想你在这里错过了一些东西。现在你的 iFrame 被切断了，是的，但不是因为你设置了溢出：滚动，也不是因为你设置了容器框架的宽度/高度属性；您当前看到的截止值完全是任意的。

为了证明这一点，在你的容器 div 中添加一个 background:#ff0000，你会发现它确实不是 div 的宽度/高度定义了你的 iframe 的截止区域，而是一些“默认”的 iframe 尺寸属性：[http： //jsfiddle.net/kauUr/](http://jsfiddle.net/kauUr/)

我的建议是，如果您说您的 div 具有固定尺寸，请使用相同尺寸的宽度/高度属性设置您的 iframe，以使其匹配。您可以使用宽度和高度属性来执行此操作，或者更干净地使用 CSS，就像您为容器 div 所做的那样。一旦您为 iFrame 提供了正确的宽度/高度，截止值应该与您的预期相匹配，并且浏览器不应滚动到 iframe 内容的大小，而是滚动到您指定的尺寸。事实上，即使事先不知道 div 的尺寸，您也可以使用 Javascript 获取它们，然后在运行时正确调整 iFrame 的大小。

```
<div style="width: 400px; height: 400px; overflow: scroll; background:#ff0000">
    <iframe style="width: 400px; height: 400px" src="http://doc.jsfiddle.net" frameborder="0" scrolling="no"></iframe>
</div>​ 
```

如果这不起作用，请尝试`overflow:none`在 iframe 样式中添加一个。

# solr - Solr 查询 - HTTP 错误 404 未定义字段文本

> ID：10130163
> 
> 赞同：24
> 
> 时间：2012-04-12T19:11:18.773
> 
> 标签：solr, lucene

我使用 Solr 下载附带的默认 Jetty 服务器在我的 Ubuntu 机器上运行了一个 Solr 实例。每当我开始使用 Solr

> java -jar start.jar

服务器启动正常，但总是抛出异常：

```
INFO: SolrDispatchFilter.init() done
Apr 12, 2012 2:01:56 PM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: undefined field text 
```

正如我所说，服务器仍将启动，我可以看到 Solr 管理界面。我将我的模式定义如下。

```
<fields>
    <field name="id" type="string" indexed="true" stored="true" />
    <field name="phraseID" type="int" indexed="true" stored="true" />
    <field name="translation" type="string" indexed="true" stored="true" />
</fields>
<uniqueKey>id</uniqueKey> 
```

我还能够执行 JSON 更新 - 我提交了一个被接受的样本数据数组。到目前为止，一切都很好。

当我尝试运行查询时：

```
http://localhost:8983/solr/select/?q=*:*&version=2.2&start=0&rows=10&indent=on 
```

它正确返回了我之前在示例中提交的所有数据。

但是，当我尝试使用文本进行查询时，我收到了 HTTP ERROR 404。

```
http://localhost:8983/solr/select/?q=fruit&version=2.2&start=0&rows=10&indent=on

--- returns ---

HTTP ERROR 400

Problem accessing /solr/select/. Reason:

    undefined field text
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-23T15:09:26.493

我有同样的问题。如果文件中没有`<defaultSearchField>`，`solrconfig.xml`请查找`/select`处理程序。

在里面你会发现这样的东西

```
<str name="df">text</str> 
```

那是罪魁祸首。`df`表示默认字段，默认情况下，并且非常愚蠢，它被设置为`text`许多人可能没有的字段。

删除它并将其替换为您的默认搜索字段。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-12T19:31:06.723

默认 solr 配置定义了一些请求处理程序，其默认值与 solr tarball 中包含的默认模式匹配。

检查 solrconfig 中定义的请求处理程序，您可能会发现 `<str name="qf">`其他配置值包含一些您未在架构中定义的字段。

另外，检查您的 schema.xml，默认搜索字段未设置为如下**文本**：`<defaultSearchField>text</defaultSearchField>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:29:19.163

我有同样的问题，有时会出现在 404 答案中，如上所述，或者是码头堆栈跟踪中的异常：

> 严重：org.apache.solr.common.SolrException：未定义的字段文本
> 
> > ```
> >  at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
> >    at org.apache.solr.schema.IndexSchema.getFieldType(IndexSchema.java:1282)
> >    at org.apache.solr.search.SolrQueryParser.getWildcardQuery(SolrQueryParser.java:234)
> >    at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1414) 
> > ```

我检查了设置为“内容”的 defaultSearchField（这对我来说似乎没问题）

编辑：我在我的 schema.xml 中有以下类型文本的定义（看没有问题）

```
<fieldType name="text" class="solr.TextField"
    positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory"
            ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory"
            generateWordParts="1" generateNumberParts="1"
            catenateWords="1" catenateNumbers="1" catenateAll="0"
            splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory"
            protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
</fieldType> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:55:36.583

文本字段由默认 schema.xml 中指定的其他字段的副本组成（插入新文档时）。

因此，当我们在 solrconfig.xml 中有 df“文本”时，我们进行搜索而不指定 solr 管理页面上的字段，例如：video。它将在文本字段（由另一个字段的副本组成）中查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-05T05:43:43.873

情况可能并非总是如此，但是当我遇到类似问题时，结果发现使用*restart*命令重新启动 Solr 服务器是不够的。*使用stop*命令显式停止服务器，然后使用*start*命令启动它实际上起到了作用。我不需要编辑任何文件。

PS 我的问题是我的 Solr 核心只有 /clustering 无法访问。

# c# - 如何更有效地完成 @Model 项目的装饰？

> ID：10130169
> 
> 赞同：0
> 
> 时间：2012-04-12T19:11:43.110
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个 asp.net mvc3 C# 应用程序。它使用数据库。由于需求，数据库支持软删除方案。软删除方案不会级联。已标记为已删除的记录将显示为灰色。我的问题是如何做到这一点，而不必总是用一些 html 标记和样式围绕模型中的每个显示。

例如：

```
<span @if(m.Box.isDeleted){
 <text>style="background-color:gray"</text>
 }>@m.Box.Name @m.Box.Description</span> 
```

我可以做到这一点，但是看看我必须对每个 ViewModel 对象显示做的所有额外标记。

我想做的是@m.Box.Name.AddMarkup() 或类似的东西。也许我可以制作一个助手来获取该项目，然后返回正确的标记，例如

```
namespace place.Markup
public class Markup
{
 public ModelItem(object o, property name)
 {
  //perhaps use reflection so the flag isnt passed all the time
  //create markup with flag conditional decoration
  //return markup
 }
} 
```

进而

```
@Markup.ModelItem(@m.Box.Description) 
```

我不知道我应该如何处理这个问题，或者如果任何一种建议的方式是其他人处理这个问题的方式。您尝试过什么来显示软删除的项目？在某个地方有一个很好的教程吗？我真的找不到很多关于这个主题的材料。

请注意：过滤这些对象不是问题，它们是有意显示的，并且需要以反映软删除的方式显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:28:09.800

我会根据 DisplayFor 的一个或多个重载来制作一个 htmlHelper

就像是

```
 public static MvcHtmlString DisplayDeleteCheckFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression, bool condition) {

     var value = html.DisplayFor(expression).ToString();
     var style=condition ? "style=\"background-color:gray\"" : string.Empty;

     return MvcHtmlString.Create(
         string.Format("<span {0}>{1}</span>", style, value));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:29:32.330

更简单的方法是利用 CSS。这是一个非常粗略的例子。

```
<style>
.isDeleted .showGrayIfDeleted
{
  background-color:gray;
}
</style> 
```

在您的控制器中：

```
if (m.Box.isDeleted)
{
  m.Box.listOfClasses.Add("isDeleted");
} 
```

在您看来：

```
<div class="@string.Join(" " , m.Box.listOfClasses)">
  <span>blah</span><br/>
  <span class="showGrayIfDeleted">This will be gray if deleted.</span><br/>
  <span class="showGrayIfDeleted">@m.Box.Name @m.Box.Description</span><br/>
</div> 
```

通过利用 CSS 的级联效应，您只需将单个类应用于容器 html 元素，即可让所有内部元素具有不同的背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T06:02:55.493

我为此所做的是拥有一个结构如下的 CSS 静态帮助器类：

```
public static class ProductCssHelper
{
    public static string IsDeleted(bool IsDeleted)
    {
        return IsDeleted ? "deleted" : String.Empty
    }

    public static string IsAction(bool IsActiveAction)
    {
        return IsAction ? "active-action" : "inactive-action"
    }
} 
```

在剃须刀中：

```
<table>
    <thead>
        <tr>
            <td>Date</td>
            <td>Name</td>
            <td>Is Deleted</td>
            <td>Active</td>
        </tr>
    </thead>
         <tr>
             <td>Today</td>
             <td>Bottle</td> 
             <td class="@(ProductCssHelper.IsDeleted(Model.IsDeleted))">Yes</td>
             <td class="@(ProductCssHelper.IsActive(Model.IsActiveAction))">No</td>
         </tr>
</table> 
```

不包括 CSS 定义，但这将返回定义的 CSS 类的字符串。

我喜欢这种方法，因为您可以创建一个 CSSHelper 文件夹，并在其中包含您需要通过控制器或视图/区域拆分的尽可能多的帮助类，这样您就可以将所有东西放在一个地方。

最初不是我的想法，但我找到了我得到这个想法的来源： [http ://www.arrangeactassert.com/asp-net-mvc-view-best-practices-keep-logic-out-of-your-views/](http://www.arrangeactassert.com/asp-net-mvc-view-best-practices-keep-logic-out-of-your-views/)

# iphone - 另一个类的objective-c调用函数

> ID：10130170
> 
> 赞同：1
> 
> 时间：2012-04-12T19:11:43.173
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在需要从其他类访问的类“loadingViewController”上有一个函数。我第一次调用如下函数时，它可以工作，但如果我从另一个类再次调用它，不要因为再次分配它并重置参数。如果我创建一个实例方法也是如此。如何简单地从另一个类调用一个函数而不进行初始化或再次分配？可能是基本的新手问题...谢谢。

类在标题中声明并正确合成。

```
self.loadingController = [[loadingViewController alloc] initWithNibName:@"loadingViewController" bundle:nil];
[loadingController incrementProgress:0.1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:15:30.237

在没有看到更多代码的情况下很难确定，但我认为您只需要确保只初始化`loadingController`一次：

```
if ( self.loadingController == nil ) {
    self.loadingController = [[loadingViewController alloc] initWithNibName:@"loadingViewController" bundle:nil];
}
[self.loadingController incrementProgress:0.1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:20:33.920

你可以`protocols`在这里实现。协议用于从一个类调用另一个类的方法。一般来说，它将定义您的类将实现的方法集。要查看如何实现它，您可以看到这个[答案](https://stackoverflow.com/questions/10052594/xcode-update-viewcontroller-label-text-from-different-view/10052641#10052641)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:36:04.267

我会这样做：

```
-(void) loadingViewController
{
    if ( self.loadingController == nil ) {
        self.loadingController = [[loadingViewController alloc] initWithNibName:@"loadingViewController" bundle:nil];
    }
    [self.loadingController incrementProgress:0.1];
} 
```

并确保您没有从主 UI 线程以外的任何其他线程调用 [xyz loadingViewController]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:44:45.873

看起来您想在视图控制器上调用函数的原因是向用户展示长时间操作的进度。

更常见的方法是让视图控制器开始操作，然后*观察*它的进度，相应地更新视图。

# java - Hibernate 搜索注释和 Lucene 字段

> ID：10130171
> 
> 赞同：1
> 
> 时间：2012-04-12T19:11:50.210
> 
> 标签：java, lucene, annotations, indexing, hibernate-search

是否有一个库可以扫描 pojo 数据模型以查找 Hibernate Search Annotations 并列出将由该模型中的注释创建的 Lucene 字段（索引目录结构）？

# asp.net - 如何注册不在 App_code 文件夹中的 HttpModule

> ID：10130178
> 
> 赞同：-1
> 
> 时间：2012-04-12T19:12:10.867
> 
> 标签：asp.net, httpmodule

我想将我的 HttpModule 代码放在 App_code 文件夹之外的其他地方，这可能吗？

编辑：现在，我的模块位于我的 Web 应用程序的 App_code 文件夹中的类文件中。我已经成功地在我的 web.config 中用这一行注册了它

```
<httpModules>
  <add name="myModule" type="myModule,App_code"/>
</httpModules> 
```

我想做的是能够将我的类文件放在 Ape_code 文件夹之外的其他地方。就像是 ：

```
<httpModules>
  <add name="myModule" type="myModule, myOtherFolder"/>
</httpModules> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:28:09.080

所以，最后，这就是我解决问题的方法。我发现要注册一个 HttpModule，你必须使用愚蠢的语法。

```
<httpModules>
  <add name="MyModuleName" type="MyApplicationNamespace.MyModuleNamespace.MyModuleClassName, MyApplicationAssemblyName"/>
</httpModules> 
```

笔记：

*   MyModuleName 不受限制，应用程序使用它来引用模块
*   由于 MyApplicationName 和 MyApplicationAssemblyName 通常是相同的（在我的情况下），因此上面的语法可能并不完全准确。

希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:22:59.987

是的，有可能。您必须从“Web 站点项目”切换到“Web 应用程序项目”。以下是一些帮助您入门的资源：

[演练：在 Visual Studio 中将网站项目转换为 Web 应用程序项目](http://msdn.microsoft.com/en-us/library/aa983476%28v=vs.90%29.aspx)

[Web 应用程序项目与网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

[Web 应用程序项目简介](http://msdn.microsoft.com/en-us/library/aa730880%28v=vs.80%29.aspx)

[ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/q/398037/475820)

# cakephp - 在 Cakephp 2.1.1 中集成 MeioUpload 行为

> ID：10130182
> 
> 赞同：0
> 
> 时间：2012-04-12T19:12:23.450
> 
> 标签：cakephp, cakephp-2.1, meio-upload

我正在使用来自[https://github.com/jrbasso/MeioUpload的 MeioUpload 4.0 行为插件](https://github.com/jrbasso/MeioUpload)

我通过 git 安装了插件： git clone git://github.com/jrbasso/MeioUpload.git Plugin/MeioUpload 现在，我的目录结构如下：

```
/app
 /Plugin
  /MeioUpload
   /Model
    /Behavior
     /MeioUploadBehavior.php
   /Locale
   /Test 
```

我的图片模型如下所示：

```
 <?php
 App::uses('AppModel', 'Model');
 class Picture extends AppModel {
$actsAs = array(
    'MeioUpload.MeioUpload' => array(
        'picture' => array(
            'dir' => 'img{DS}pictures',
            'create_directory' => true,
            'allowed_mime' => array('image/jpeg', 'image/pjpeg', 'image/png'),
            'allowed_ext' => array('.jpg', '.jpeg', '.png'),
            'zoomCrop' => true,             
            'thumbsizes' => array(
                'small'  => array('width'=>165, 'height'=>115),
                'medium' => array('width'=>800, 'height'=>600)

            ),
            'default' => 'default.jpg'
        )
    )
);
 }
 ?> 
```

当我尝试访问 /pictures/add 时，我在 debug.log 中收到以下错误：

```
 2012-04-12 21:42:38 Error: [MissingPluginException] Plugin MeioUpload could not be found.
#0 C:\wamp\www\starter211\lib\Cake\Core\App.php(364): CakePlugin::path('MeioUpload')
#1 C:\wamp\www\starter211\lib\Cake\Core\App.php(225): App::pluginPath('MeioUpload')
#2 C:\wamp\www\starter211\lib\Cake\Core\App.php(542): App::path('Model/Behavior', 'MeioUpload')
#3 [internal function]: App::load('MeioUploadBehav...')
#4 [internal function]: spl_autoload_call('MeioUploadBehav...')
#5 C:\wamp\www\starter211\lib\Cake\Model\BehaviorCollection.php(121): class_exists('MeioUploadBehav...')
#6 C:\wamp\www\starter211\lib\Cake\Model\BehaviorCollection.php(68): BehaviorCollection->load('MeioUpload.Meio...', Array)
#7 C:\wamp\www\starter211\lib\Cake\Model\Model.php(725): BehaviorCollection->init('Picture', Array)
#8 [internal function]: Model->__construct(Array)
#9 C:\wamp\www\starter211\lib\Cake\Utility\ClassRegistry.php(156): ReflectionClass->newInstance(Array)
#10 C:\wamp\www\starter211\lib\Cake\View\Helper\FormHelper.php(145): ClassRegistry::init(Array)
#11 C:\wamp\www\starter211\lib\Cake\View\Helper\FormHelper.php(331): FormHelper->_getModel('Picture')
#12 C:\wamp\www\starter211\app\View\Pictures\add.ctp(2): FormHelper->create('Picture', Array)
#13 C:\wamp\www\starter211\lib\Cake\View\View.php(908): include('C:\wamp\www\sta...')
#14 C:\wamp\www\starter211\lib\Cake\View\View.php(872): View->_evaluate('C:\wamp\www\sta...', Array)
#15 C:\wamp\www\starter211\lib\Cake\View\View.php(463): View->_render('C:\wamp\www\sta...')
#16 C:\wamp\www\starter211\lib\Cake\Controller\Controller.php(959): View->render(NULL, NULL)
#17 C:\wamp\www\starter211\lib\Cake\Routing\Dispatcher.php(110): Controller->render()
#18 C:\wamp\www\starter211\lib\Cake\Routing\Dispatcher.php(85): Dispatcher->_invoke(Object(PicturesController), Object(CakeRequest), Object(CakeResponse))
#19 C:\wamp\www\starter211\app\webroot\index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#20 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:15:49.303

首先，您需要在克隆文件夹时将文件夹重命名为 MeioUpload，它具有 ckaephp-MeioUpload 清晰且仅放

> 美欧上传

在

> yourapp/app/config/boostrap.php

添加这个

> CakePlugin::load('MeioUpload');

一切都很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:17:32.597

你把这条线放在你的引导程序中了吗？

```
CakePlugin::loadAll(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T21:58:11.427

我有同样的问题。为了解决我这样做：

*   将 MeioUploadBehavior.php 移至 /app/Model/Behavior 文件夹（即从其子文件夹中取出）
*   加载不带点符号的行为。

    ```
    $actsAs = array(
      'MeioUpload' => array(...options here...)
    ); 
    ```

不知道为什么将它放在子文件夹中会引发此版本 CakePHP 的缺失插件异常，但如果您想要临时修复，就是这样！

# c# - 如何在没有 SynchronizationContext 的情况下使用 INotifyPropertyChanged 实现线程安全？

> ID：10130183
> 
> 赞同：3
> 
> 时间：2012-04-12T19:12:29.380
> 
> 标签：c#, multithreading, inotifypropertychanged

如何保持实现 INotifyPropertyChanged 的​​对象线程安全？我不能使用 SynchronizationContext 因为我需要能够序列化对象。

```
 protected void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
           // What can I add here to make it thread-safe? 
            handler(this, new PropertyChangedEventArgs(propertyName));
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-17T02:40:16.203

所以......事实证明，如果您不介意依赖扩展在编译时为您生成一些代码，那么实际上有一个非常好的方法。无论如何，我一直在使用 Fody/PropertyChanged，这使更改变得非常容易。这避免了必须引用`SynchronizationContext`真正没有业务了解 UI 的模型。

1.  首先，安装可以从 NuGet 获得的[PropertyChanged.Fody 。](https://github.com/Fody/PropertyChanged)

2.  当前实现的每个类都`INofityPropertyChanged`应该具有属性`[ImplementPropertyChanged]`。应该删除手动实现。有关更多信息，请参阅[自述文件](https://github.com/Fody/PropertyChanged/blob/master/README.md)和[wiki](https://github.com/Fody/PropertyChanged/wiki)。

3.  需要实现[PropertyChangedNotificationInterceptor 。](https://github.com/Fody/PropertyChanged/wiki/NotificationInterception)它们在 wiki 中提供了 WPF 的示例；我对 WinForms 项目的实现：

    ```
    public static class PropertyChangedNotificationInterceptor
    {
        public static SynchronizationContext UIContext { get; set; }

        public static void Intercept(object target, Action onPropertyChangedAction, string propertyName)
        {
            if (UIContext != null)
            {
                UIContext.Post(_ =>
                {
                    onPropertyChangedAction();
                }, null);
            }
            else
            {
                onPropertyChangedAction();
            }
        }
    } 
    ```

4.  设置在`PropertyChangedNotificationInterceptor.UIContext`某处。您可以放入`PropertyChangedNotificationInterceptor.UIContext = WindowsFormsSynchronizationContext.Current;`主窗体的构造函数。

    构造[`Form`函数](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Form.cs,52be64ac3517a0a7)通过[Control 构造函数](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Control.cs,03d2aaba96563a71)，最终将创建`WindowsFormsSynchronizationContext`if 一个不存在。因此，在这里捕获是安全的`.Current`。（注意：这可能是一个实现细节，并且可能会在未来的 .NET 版本、不同平台等中发生变化。）

请记住，这仅在您只有一个同步上下文（单个 UI 线程）时才有效。如果您曾经陷入多个 UI 线程的混乱中，*并且*需要对多个 UI 线程进行数据绑定，那么这将变得更加复杂。所以请不要那样做。

感谢[Simon Cropp](http://piers7.blogspot.com/2013/02/inotifypropertychanged-worst-interface.html?showComment=1362905979631#c2877374371984976135)的写作`PropertyChanged`并帮助我找到了它的这个特殊功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T19:41:46.813

如果您使用的是 WPF，则可以使用 Dispatcher 编组对 UI 线程的调用。

```
App.Current.Dispatcher.Invoke(new Action(()=>{ 
    if (handler != null)
        handler(this, new PropertyChangedEventArgs(propertyName));
})); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-26T16:11:15.367

如果您不走运并且必须使用 Winforms，请尝试使用应用程序的 MainForm 在 UI 线程中调用处理程序。坏事是你必须包括

`using System.Windows.Forms;`

```
protected void OnPropertyChanged(string propertyName)
{
    var handler = PropertyChanged;
    if (handler != null)
    {
        if (Application.OpenForms.Count == 0) return; 
        var mainForm = Application.OpenForms[0];
        if(mainForm == null) return; // No main form - no calls

        if (mainForm.InvokeRequired) 
        {
            // We are not in UI Thread now
            mainform.Invoke(handler, new object[] {
               this, new PropertyChangedEventArgs(propName)});
        }
        else
        {
            handler(this, new PropertyChangedEventArgs(propertyName)); 
        }              
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T12:36:03.003

我知道这个问题已经回答了。但是我前段时间偶然发现了同样的问题。我的第一种方法与 Dan Busha 和其他人的答案非常相似：在 gui 同步上下文中调用 PropertyChanged 事件。但在我看来，这不是最好的解决方案，因为您的模型需要了解与 GUI 相关的内容。绑定本身与 GUI 线程同步会更好。在 Windows 窗体中有 BindingSource。为了便于在设计器中创建 DataBindings 和其他与绑定相关的东西。我的想法是使用 BindingSource 来同步线程。基本上我的想法是覆盖所有 OnBlaEvent 并在 GUI 线程中调用它们。只需像普通的绑定源一样使用它。这就是我想出的：

```
using System.ComponentModel;
using System.Drawing;
using System.Threading;

namespace System.Windows.Forms.More
{
  [ToolboxBitmap(typeof(BindingSource))]
  public class SynchronizedBindingSource : BindingSource
  {

    #region constructors

    public SynchronizedBindingSource()
    {
      this.SynchronizationContext = SynchronizationContext.Current;
    }

    public SynchronizedBindingSource(IContainer container)
      : this()
    {
      container?.Add(this);
    }

    #endregion

    /// <summary>
    /// Changed events of binding source will be called from this synchronization context
    /// This is initialized at constructor
    /// </summary>
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public SynchronizationContext SynchronizationContext { get; set; }

    #region thread safe events

    protected override void OnAddingNew(AddingNewEventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnAddingNew(e));
    }

    protected override void OnBindingComplete(BindingCompleteEventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnBindingComplete(e));
    }

    protected override void OnCurrentChanged(EventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnCurrentChanged(e));
    }

    protected override void OnCurrentItemChanged(EventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnCurrentItemChanged(e));
    }

    protected override void OnDataError(BindingManagerDataErrorEventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnDataError(e));
    }

    protected override void OnDataMemberChanged(EventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnDataMemberChanged(e));
    }

    protected override void OnDataSourceChanged(EventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnDataSourceChanged(e));
    }

    protected override void OnListChanged(ListChangedEventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnListChanged(e));
    }

    protected override void OnPositionChanged(EventArgs e)
    {
      this.InvokeOnUiThread(() => base.OnPositionChanged(e));
    }

    private void InvokeOnUiThread(Action action)
    {
      this.SynchronizationContext?.Post(o => action(), null);
    }

    #endregion
  }
} 
```

# image - 在 Inno Setup 的 ProgressGauge 栏下的 wpInstalling 页面上显示多个图像（幻灯片）

> ID：10130184
> 
> 赞同：7
> 
> 时间：2012-04-12T19:12:30.470
> 
> 标签：image, slideshow, inno-setup, pascalscript

我准备了简单的脚本，`ProgressGauge`在页面的栏下显示图像`wpInstalling`。

但是...我需要更复杂的功能。

我需要的是多个图像显示，每个在 X（例如 7）秒后（安装时的循环时间长于 X 秒 * 图像数量）或每个在 X（例如 10）% 的安装后。我曾尝试在 中嵌入图像显示`ProgressGauge.Position`，但失败了。

这是我所拥有的：

```
procedure CurPageChanged(CurPageID: Integer);
var
  BmpFile: TBitmapImage;
begin
  ExtractTemporaryFile('01.bmp');
  ExtractTemporaryFile('02.bmp');
  ExtractTemporaryFile('03.bmp');

  if CurPageID = wpInstalling then
  begin
    BmpFile:= TBitmapImage.Create(WizardForm);
    BmpFile.Bitmap.LoadFromFile(ExpandConstant('{tmp}\01.bmp'));
    BmpFile.Width:= ScaleX(420);
    BmpFile.Height:= ScaleY(180);
    BmpFile.Left := WizardForm.ProgressGauge.Left + ScaleX(0); 
    BmpFile.Top := WizardForm.ProgressGauge.Top + ScaleY(35);

    // BmpFile.Parent:= WizardForm.InstallingPage;
    // BmpFile:= TBitmapImage.Create(WizardForm);
    // BmpFile.Bitmap.LoadFromFile(ExpandConstant('{tmp}\03.bmp'));
    // BmpFile.Width:= ScaleX(420);
    // BmpFile.Height:= ScaleY(400);
    // BmpFile.Left := WizardForm.ProgressGauge.Left + ScaleX(0); 
    // BmpFile.Top := WizardForm.ProgressGauge.Top + ScaleY(35);
    // BmpFile.Parent:= WizardForm.InstallingPage;  

    // BmpFile:= TBitmapImage.Create(WizardForm);
    // BmpFile.Bitmap.LoadFromFile(ExpandConstant('{tmp}\03.bmp'));
    // BmpFile.Width:= ScaleX(420);
    // BmpFile.Height:= ScaleY(400);
    // BmpFile.Left := WizardForm.ProgressGauge.Left + ScaleX(0); 
    // BmpFile.Top := WizardForm.ProgressGauge.Top + ScaleY(35);
    // BmpFile.Parent:= WizardForm.InstallingPage;
  end;
end; 
```

目标是：每隔 X 秒或 X% 的安装后，应该显示 X 个图像
。`wpInstalling`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T19:44:38.417

Since the [`ProgressGauge`](http://www.jrsoftware.org/ishelp/topic_scriptclasses.htm#TNewProgressBar) has no progress change events and there is no way to process setup application messages you will need to use the Windows API timer. This timer needs a callback function which you can't define in Inno Setup script unfortunately so you will need some external library to do this job for you. However there's the [`InnoCallback`](http://www.sherlocksoftware.org/page.php?id=55) library which can do exactly this.

For the following code copy the [`InnoCallback.dll`](http://www.sherlocksoftware.org/file.php?id=21) library into your setup directory, merge this code with your Inno Setup script and implement some kind of a slideshow page turning in the `OnSlideTimer` event which will be called periodically (with the current settings each second).

```
[Files]
Source: "InnoCallback.dll"; DestDir: "{tmp}"; Flags: dontcopy

[code]
var
  TimerID: Integer;

type
  TTimerProc = procedure(Wnd: HWND; Msg: UINT; TimerID: UINT_PTR; 
    SysTime: DWORD);

function WrapTimerProc(Callback: TTimerProc; ParamCount: Integer): LongWord;
  external 'wrapcallback@files:InnoCallback.dll stdcall';    
function SetTimer(hWnd: HWND; nIDEvent, uElapse: UINT;
  lpTimerFunc: UINT): UINT; external 'SetTimer@user32.dll stdcall';
function KillTimer(hWnd: HWND; uIDEvent: UINT): BOOL; 
  external 'KillTimer@user32.dll stdcall'; 

procedure OnSlideTimer(Wnd: HWND; Msg: UINT; TimerID: UINT_PTR; 
  SysTime: DWORD);
begin
  { here you can turn your slideshow pages; use some variable to store the }
  { current index of the slide you are on, note that this procedure is called }
  { periodically each 1000 ms (see below why), so here you can also check the }
  { progress value, if you want to }
end;

procedure StartSlideTimer;
var
  TimerCallback: LongWord;
begin
  TimerCallback := WrapTimerProc(@OnSlideTimer, 4);
  { third parameter here is the timer's timeout value in milliseconds }
  TimerID := SetTimer(0, 0, 1000, TimerCallback);
end;

procedure KillSlideTimer;
begin
  if TimerID <> 0 then 
  begin
    if KillTimer(0, TimerID) then
      TimerID := 0;
  end;
end;

function InitializeSetup: Boolean;
begin
  Result := True;
  TimerID := 0;
end;

procedure DeinitializeSetup;
begin
  KillSlideTimer;
end; 

procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = wpInstalling then
    StartSlideTimer
  else
    KillSlideTimer;
end; 
```

# html - 我应该如何根据行悬停切换操作链接

> ID：10130187
> 
> 赞同：2
> 
> 时间：2012-04-12T19:12:47.473
> 
> 标签：html, css

我有一个使用 HTML/jQuery 从数据库中显示的项目表。在表格的最后一列，我有一些操作链接（删除、编辑等...）。我只希望当鼠标悬停在行上时这些链接可见，所以我这样设置表格：

```
<table class="data" ...>
    <tr>
        <td>...</td>
        <td>...</td>
        <td>...</td>
        <td class="actions>...</td>
    </tr>
</table> 
```

我的 CSS 看起来像：

```
table.data td.actions { visibility: hidden; }
table.data tr:hover td.actions { visibility: visible; } 
```

只要我首先将鼠标悬停在行中的任何其他列上，这就会很好。如果我将鼠标移到操作列应该在的位置上，它永远不会出现。我猜是因为该列是隐藏的，它不会触发该行的悬停事件。我怎样才能解决这个问题？

示例：http: [//jsfiddle.net/wB5KC/](http://jsfiddle.net/wB5KC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:21:50.347

我最初删除了这个问题，但我想我会把它放回去以防其他人发现它有用。解决方案是将链接移动到单元格内的 div 内，并切换 div 本身的可见性，而不是单元格。一旦单元格始终可见，它就会触发该行的悬停事件，即使没有可见内容也是如此。一旦触发悬停事件，就会显示内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:12:41.223

[http://jsfiddle.net/wB5KC/5/](http://jsfiddle.net/wB5KC/5/)

刚改成这样：

```
table.data td.actions {
    zoom: 1;
    filter: alpha(opacity=0);
    opacity: 0;
}
table.data tr:hover td.actions {
    zoom: 1;
    filter: alpha(opacity=100);
    opacity: 1; 
} 
```

# ruby-on-rails - ctags 生成最新版本的 gem

> ID：10130189
> 
> 赞同：5
> 
> 时间：2012-04-12T19:12:52.270
> 
> 标签：ruby-on-rails, vim, ctags

我使用[vim-rails](http://github.com/tpope/vim-rails)和`ctags`导航方法。为此，我`ctags -R *`在`/home/***/.rvm/gems/ruby***/gems`. 但是在这个目录中，一个 gem 的许多文件夹只是不同的版本（例如`activerecord`v. `3.0.7/3.1.3/3.2.2/3.2.3`）。当我尝试 go to( `ctrl+]`) 方法时，我会使用旧版本。如何仅使用最新的 gems 版本运行 ctags？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T14:27:38.850

您可以使用 bundler 显示 gemfile 中 gems 的位置

```
bundle show --paths 
```

如果您将此列表导入 ctags，我认为您将拥有所需的内容。

```
bundle show --paths | xargs ctags -R 
```

编辑：在这篇博文中总结：http: [//heim.no/VIM/2012/04/19/generate-ctags-for-all-bundled-gems-in-a-ruby-project/](http://heim.no/VIM/2012/04/19/generate-ctags-for-all-bundled-gems-in-a-ruby-project/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-10T03:12:11.397

如果您想为您的项目添加标签以及 gemfile 标签，您可以使用`-a`附加选项，这样您就可以这样做：

```
ctags -R -f .tags && bundle show --paths | xargs ctags -R -a -f .tags 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:42:03.367

解决方法：我不确定直接的方法，但您始终可以选择手动编辑“标签”文件，搜索/替换所有旧版本的 gems 并删除它们，或者删除所有与 gems 相关的部分，然后再删除您可以使用 [ctags -a *3.2.3* ]附加到标签文件

# php - 使用 PHP 和 AJAX 插入 MySQL 记录

> ID：10130192
> 
> 赞同：1
> 
> 时间：2012-04-12T19:13:00.493
> 
> 标签：php, javascript, mysql, ajax

第一次尝试使用 AJAX 在我的数据库中插入记录。我有以下...

**形式**

```
 <form>
     <input type="text" id="salary" name="salary">
     <input type="button" onclick="insertSalary()">
 </form> 
```

**AJAX**

```
<script type="text/javascript">

function insertSalary()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById('current-salary').innerHTML=xmlhttp.responseText;
    }
  };
xmlhttp.open("POST","insert_salary.php",true);
xmlhttp.send("salary=" + document.getElementById("salary").value);
}

</script> 
```

**PHP**

```
$uid = $_SESSION['oauth_id'];      
$monthly_income = mysql_real_escape_string($_POST['salary']);

#Insert a new Record
$query = mysql_query("INSERT INTO `income` (user_id, monthly_income) VALUES ($uid, '$monthly_income')") or die(mysql_error());
$result = mysql_fetch_array($query);
return $result; 
```

现在我的数据被插入到表中，除了输入为“0”的“***薪水***”

插入后，我还有一个 div 'current-salary'，然后应该用输入的值填充它，但它不是，有人可以帮助我了解我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:21:37.600

如果您想为自己节省大量时间、精力和心痛，请使用 jquery 库来处理您的 ajax 请求。您可以在[http://jquery.com/下载它](http://jquery.com/)

将引用（脚本标记）添加到 jquery 脚本后，您的 ajax 请求的 javascript 将变为：

```
function insertSalary()
{
    var salary = $("#salary").val();
    $.post('insert_salary.php', {salary: salary}, function(data) 
    {
        $("#current-salary").html(data); 
    });
} 
```

还要记住，使用“insert_salary.php”作为 url 意味着它是一个相对路径，并且必须在当前运行脚本的文件夹中。

您的 php 脚本还需要回显您希望注入当前工资标签的任何内容。

# java - 如何将 Maven 生成的源代码置于版本控制之下？

> ID：10130193
> 
> 赞同：2
> 
> 时间：2012-04-12T19:13:04.230
> 
> 标签：java, maven, version-control, generated-code

我正在使用 Maven 构建和部署[jOOQ](http://www.jooq.org "jOOQ（Java Object Oriented Querying）是一种类型安全的 SQL 查询构建器，它直接在 Java fluent API 中建模标准和特定于供应商的 SQL 构造。")。我现在想开始使用适当的 Maven 插件生成 XJC 生成的类（之前，我使用了 ant 脚本）。这对我来说非常有效，但我担心一些想要在没有 Maven 的情况下自己构建 jOOQ 的用户现在将无法生成那些缺失的源代码。所以我想将这些源移出`target/generated-sources/xjc`和移入`src/main/java`，以便能够将它们置于版本控制之下。

*   这是一种常见的做法吗？
*   我该怎么做（我应该使用插件将文件移动到低级别，还是应该直接将文件生成到`src/main/java`）？
*   我还有其他选择吗？

请注意，底层 XSD 几乎不会更改，因此我不必每次构建时*都生成这些源...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:16:59.877

这是一个糟糕的主意，你永远不应该将生成的源代码放在版本控制中，因为它们生成的任何东西都可能发生变化，然后你的代码就会不同步。

即使 XSD 永远不会改变，请注意我说 never，不是*几乎永远*，正如你所说，这是不同的，我不会将源代码置于版本控制之下。如果 XSD 没有改变，Maven 可以被告知**不要**每次都生成源代码。

如果你走 Maven 路线，那么任何构建你的东西​​的人都应该使用相同的工具链。这不是特定于 Maven 的。如果这是 Ant 或带有 make 文件的 C++ 项目，您也不想这样做。

如果你真的想提供一个 Maven 自由独立的发行版，那么让 Maven 生成它，有很多插件可以将所有工件导出为你可以分发的存档。但是不要因为一些可能不存在的模糊外部要求而损害您的构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:24:45.017

也许另一种方法是使用 Maven 程序集插件来压缩所有这些源并将它们公开为版本化的工件。依赖插件将允许您从本地或远程存储库中提取这些源，并确保您拥有这些源的正确版本。

（在我看来，保持原样。如果 Maven 是您的构建系统，那么每个尝试构建您的代码的人都应该使用它）

# jquery - 带有cookie的标签，完全隐藏内容

> ID：10130194
> 
> 赞同：1
> 
> 时间：2012-04-12T19:13:10.800
> 
> 标签：jquery, cookies, tabs

有 cookie 支持的选项卡[http://jsfiddle.net/q9Epk/1/](http://jsfiddle.net/q9Epk/1/)
最后几行代码在单击选定的导航项时必须完全隐藏内容，但它不起作用

```
// hide tab
$('ul.tabs li.current').click(function() {
    $('div.section').find('div.box').hide();
    $(this).removeClass('current');

    eraseCookie('tabCookie');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:41:39.260

在修改函数中找到了解决办法

```
$('ul.tabs').delegate('li:not(.current)', 'click', function() {
    $(this).addClass('current').siblings().removeClass('current')
        .parents('div.section').find('div.box').hide().eq($(this).index()).fadeIn();
    var ulIndex = $('ul.tabs').index($(this).parents('ul.tabs'));
    eraseCookie('tabCookie'+ulIndex);
    createCookie('tabCookie'+ulIndex, $(this).index(), 365);
}).delegate('li.current', 'click', function() {
    $(this).parents('div.section').find('div.box').hide()
    $(this).removeClass('current');

    eraseCookie('tabCookie'+0);
}); 
```

[http://jsfiddle.net/q9Epk/2/](http://jsfiddle.net/q9Epk/2/)

# javascript - JavaScript 组织 | 带模块的模块模式

> ID：10130209
> 
> 赞同：5
> 
> 时间：2012-04-12T19:13:51.170
> 
> 标签：javascript

我将我的代码组织成 20-60 行模块，通常采用模块模式。我想要一个结构良好的面向对象的 JavaScript 库。

这是最好的方法吗？该代码已经过测试并且可以工作。

我喜欢它，因为程序员可以从库中提取模块并根据需要使用它们，它们是自包含的。

这是工具、消息、效果和文本，都包含在 NS 中。

**问题？**

这是组织我的图书馆的好方法（最佳实践）吗？

**笔记**

到目前为止，评论和答案中的共识为 0……非常令人沮丧。

**外部模块模式**

```
var NS = ( function ( window, undefined ) 
{ 
/* All Modules below here */ 
} )( window ); 
```

**工具**

```
/**
 *Tools
 *    getTimeLapse - benchmark for adding
 */

var Tool = ( function () 
{
    var Tool = function ( ) 
    {
    };
    Tool.prototype.getTimeLapse = function( numberOfAdds ) 
    {
        var end_time;
        var start_time = new Date().getTime();
        var index = 0;           
        while ( index <= numberOfAdds )
        {
            index++;
        }
        end_time = new Date().getTime();
        return ( end_time - start_time );
    };
    return Tool;
} () ); 
```

**信息**

```
/**
 *Message
 *    element - holds the element to send the message to via .innerHTML
 *    type - determines the message to send
 */

var Message = ( function () 
{
    var messages = 
    {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        email_s:      'Please enter a valid email.',
        pass:         'Please enter passoword, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:foo@foo.com">support</a> to reset your password',
    };
    var Message = function (element) 
    {
        this.element = element;
    };
    Message.prototype.display = function( type ) 
    {
        this.element.innerHTML = messages[ type ];
    };
    return Message;
} () ); 
```

**效果**

```
/**
 *Effects
 *    element - holds the element to fade
 *    direction - determines which way to fade the element
 *    max_time - length of the fade
 */

var Effects = ( function () 
{
    var Effects = function ( element )
    {
        this.element = element;
    };
    Effects.prototype.fade = function( direction, max_time ) 
    {
        var element = this.element;
        element.elapsed = 0;
        clearTimeout( element.timeout_id );
        function next()
        {
            element.elapsed += 10;
            if ( direction === 'up' )
            {
                element.style.opacity = element.elapsed / max_time;
            }
            else if ( direction === 'down' )
            {
                element.style.opacity = ( max_time - element.elapsed ) / max_time;
            }
            if ( element.elapsed <= max_time ) 
            {
                element.timeout_id = setTimeout( next, 10 );
            }
        }
        next();
    };
    return Effects;
} () ); 
```

**文本**

```
/**
 *Text
 *    form_elment - holds text to check
 */

var Text = ( function () 
{
    var Text = function ( form_element )
    {
        this.text_array = form_element.elements;
    };
    Text.prototype.patterns = 
    {
        prefix_url:     /^(http:)|(https:)\/\//,
        aml:            /<(.+)_([a-z]){1}>$/,
        url:            /^.{1,2048}$/,
        tweet:          /^.{1,40}$/, 
        title:          /^.{1,32}$/,
        name:           /^.{1,64}$/, 
        email:          /^.{1,64}@.{1,255}$/,
        pass:           /^.{6,20}$/
    };
    Text.prototype.checkPattern = function( type ) 
    {
        return this.patterns[ type ].exec( this.text_array[type].value );
    };
    Text.prototype.checkUrl = function( type ) 
    {
        return this.patterns[ type ].exec( this.text_array.url.value );
    };
    Text.prototype.checkSameEmail = function() 
    {
        return ( ( this.text_array.email.value ) === ( this.text_array.email1.value ) );
    };
    Text.prototype.checkEmpty = function() 
    {
        for ( var index = 0; index < this.text_array.length; ++index ) 
        {
            if ( this.text_array[ index ].value === '') 
            { 
                return 0; 
            }
        }
        return 1;
    };
    return Text;
} () ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:28:06.387

我建议更改以使您的代码更清洁并减少其占用空间的一件事是立即设置原型属性，而不是这样做

```
Object.prototype.method1 = function(){};
Object.prototype.method2 = function(){}; 
```

你做

```
Object.prototype = {
    method1: function(){},
    method2: function(){}
}; 
```

如果您需要保存推荐的构造函数引用，则应在之后重新分配构造函数。[有关更多详细信息，请参阅此答案](https://stackoverflow.com/questions/4944278/advantages-of-setting-the-constructor-property-in-the-prototype)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:23:51.157

我个人更喜欢使用像[ncore这样的模块化代码组织库](https://github.com/Raynos/ncore)

这鼓励您将代码编写为一组模块（每个文件一个模块），然后使用依赖注入和引导将它们连接在一起。

该代码具有轻微的可移植性，因为模块本身就是对象，但是如果不使用 ncore，就会失去优势。

[排行榜应用](https://github.com/Raynos/ncore-leaderboard)展示了OO代码组织的详细示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:48:33.733

一些建议...首先是创建一个命名空间对象作为库的范围... jQuery 使用“jQuery”和“$”，下划线使用“_”。我倾向于使用“CompanyName.SiteName”

```
if (typeof CompanyName == "undefined") var CompanyName = {};
CompanyName.SiteName = CompanyName.SiteName || {};
```

第一行明确地检查未定义，因为您会在许多浏览器中得到错误，否则使用 SiteName 属性上的方法查找根变量。

从那里，我会做一些调整......当你内联调用匿名函数时，最好将整个调用包装在括号内。

```
CompanyName.SiteName.ModuleName = (function(w){
    ...
    return moduleImplementation;
}(window || this)); //CompanyName.SiteName.ModuleName
```

这倾向于通过让括号包裹整个内容并在模块声明的末尾添加注释来避免混淆。

根据上面的评论，您可能希望将原型声明作为更单一的声明。我建议不要这样做，因为更长的模块会使可读性成为问题。

```
myModule.prototype = {
    "method1": function(){
    }
    ...
    "methodN": function(){
       //by the time you get here, you may not see the top, and where you are nested in
    }
};

//with the dot-notation, or hash notation
myModule.prototype.methodN = ...
myModule.prototype["methodN"] = ...
//you can see where you are binding to at that function 
```

您可能还想研究[RequireJS](http://requirejs.org/)和[AMD](http://requirejs.org/docs/whyamd.html)

还有处理更简单对象和使用功能绑定器的概念。将您的库视为一组函数（类似于 C 导出），它们被传递并使用更简单的对象/类型。这实际上取决于您的需求/使用以及您的需求和使用的具体情况。

您可能还想查看一些示例，例如[KnockoutJS](http://knockoutjs.com/)、[Underscore](http://documentcloud.github.com/underscore/)和[Backbone等 javascript 库。](http://backbonejs.org/)

# node.js - 链接到其他玉文件

> ID：10130215
> 
> 赞同：15
> 
> 时间：2012-04-12T19:14:23.620
> 
> 标签：node.js, hyperlink, express, pug

我试图了解 Express 和 Jade 的工作原理。

首先，当我使用 layout.jade 作为模板文件（页眉、正文、页脚）并使用不同的文件在正文中显示信息（参见下面的示例）时，我做得对吗？

代码工作正常，但我不确定这是否是在 Express 中做事的正确方法。如果我应该继续使用这种结构，我如何从内部链接到其他文件（例如。About.jade），例如 index.jade，以显示该文件而不是 index.jade？

提前致谢！

布局.jade：

```
!!! 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(type='text/javascript', src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js')
    script(type='text/javascript', src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js')
    script(type='text/javascript', src='/javascripts/external.js')

  // Header
  header#header

  // Navigation
  nav#nav
    // Navigation code (ul, li etc)...

  // Sidebar
  aside#sidebar
    // Sidebar code...

  // Body
  body!= body 
```

index.jade:

```
!!! 5
html
  head
    title= title

    section#wrapper
      img.imageStyle(src = '/images/test1.png')
      // And so on... 
```

关于.jade：

```
// You get it... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T02:15:43.627

我认为您正在寻找的是快速查看渲染路线：http: [//expressjs.com/en/guide/using-template-engines.html](http://expressjs.com/en/guide/using-template-engines.html)

所以你可以设置这样的东西：

```
app.get('/', function(req, res){
  res.render('index.jade', { title: 'index' });
});

app.get('/about', function(req, res){
  res.render('about.jade', { title: 'about' });
}); 
```

要从一个链接到另一个链接，一旦配置了正确的路由，您就可以执行以下操作：

```
a(href='/') index

a(href='/about') about 
```

**更新**另外，您不需要在索引中再次重复此操作。

```
!!! 5
html
  head
    title= title 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T15:24:22.203

除了 Wes Freeman 所写的内容之外，您还可以在您的翡翠文件中包含其他翡翠模板。

这样你就可以拥有你的 header.jade、footer.jade 并将它们包含在你的 about.jade 文件中。这是玉的包含文档： [https ://github.com/visionmedia/jade#a13](https://github.com/visionmedia/jade#a13)

这样，如果您添加例如应该在每个页面上的脚本或样式表标签，您只需更改 header.jade 文件。

# mysql - 在 MySQL 中查找 2 个日期之间的差异

> ID：10130220
> 
> 赞同：0
> 
> 时间：2012-04-12T19:14:39.757
> 
> 标签：mysql

我有 2 个不同的日期列：detail_returndate 和 detail_duedate。我试图找出两者之间的区别并将其返回为`days_overdue`.

这是基本的选择。我曾尝试使用 diffday 并减去 2，但我运气不佳。

```
 select rent_num, vid_num, detail_returndate, detail_duedate
    from   detailrental 
```

如果您需要表格的完整 sql 代码，请告诉我，但我认为您不需要它

`detail_returndate`为了清楚起见，我需要通过计算和之间的差异来找出逾期的天数`detail_duedate`。这应该产生逾期金额，*以天为单位*

```
/* Database Systems, 9th Ed., Coronel/MOrris/Rob */
/* Type of SQL : MySQL */

/*Create table price*/
CREATE TABLE price  
(price_code         INTEGER     PRIMARY KEY AUTO_INCREMENT,
 price_description  VARCHAR(20) NOT NULL,
 price_rentfee      DECIMAL(5,2),
 price_dailylatefee DECIMAL(5,2));

/*Insert data into price*/
INSERT INTO price VALUES(1,'Standard',2,1);
INSERT INTO price VALUES(2,'New Release',3.5,3);
INSERT INTO price VALUES(3,'Discount',1.5,1);
INSERT INTO price VALUES(4,'Weekly Special',1,.5);

/*Create table movie*/
CREATE TABLE movie
(movie_num    INTEGER     PRIMARY KEY AUTO_INCREMENT,
 movie_title  VARCHAR(75) NOT NULL,
 movie_year   INTEGER,
 movie_cost   DECIMAL(5,2),
 movie_genre  VARCHAR(50),
 price_code   INTEGER,
 FOREIGN KEY(price_code) REFERENCES price(price_code));

/*Insert data into movie*/
INSERT INTO movie VALUES(1234,'The Cesar Family Christmas',2007,39.95,'FAMILY',2);
INSERT INTO movie VALUES(1235,'Smokey Mountain Wildlife',2004,59.95,'ACTION',1);
INSERT INTO movie VALUES(1236,'Richard Goodhope',2008,59.95,'DRAMA',2);
INSERT INTO movie VALUES(1237,'Beatnik Fever',2007,29.95,'COMEDY',2);
INSERT INTO movie VALUES(1238,'Constant Companion',2008,89.95,'DRAMA',NULL);
INSERT INTO movie VALUES(1239,'Where Hope Dies',1998,25.49,'DRAMA',3);
INSERT INTO movie VALUES(1245,'Time to Burn',2005,45.49,'ACTION',1);
INSERT INTO movie VALUES(1246,'What He Doesn''t Know',2006,58.29,'COMEDY',1);

/*Create table video*/
CREATE TABLE video
(vid_num     INTEGER PRIMARY KEY AUTO_INCREMENT,
 vid_indate  DATE,
 movie_num   INTEGER,
 FOREIGN KEY(movie_num) REFERENCES movie(movie_num));

/*Insert data into video*/
INSERT INTO video VALUES(54321,'2008-06-18',1234);
INSERT INTO video VALUES(54324,'2008-06-18',1234);
INSERT INTO video VALUES(54325,'2008-06-18',1234);
INSERT INTO video VALUES(34341,'2007-01-22',1235);
INSERT INTO video VALUES(34342,'2007-01-22',1235);
INSERT INTO video VALUES(34366,'2009-03-02',1236);
INSERT INTO video VALUES(34367,'2009-03-02',1236);
INSERT INTO video VALUES(34368,'2009-03-02',1236);
INSERT INTO video VALUES(34369,'2009-03-02',1236);
INSERT INTO video VALUES(44392,'2008-10-21',1237);
INSERT INTO video VALUES(44397,'2008-10-21',1237);
INSERT INTO video VALUES(59237,'2009-02-14',1237);
INSERT INTO video VALUES(61388,'2007-01-25',1239);
INSERT INTO video VALUES(61353,'2006-01-28',1245);
INSERT INTO video VALUES(61354,'2006-01-28',1245);
INSERT INTO video VALUES(61367,'2008-07-30',1246);
INSERT INTO video VALUES(61369,'2008-07-30',1246);

/*Create table membership*/
CREATE TABLE membership
(mem_num     INTEGER     PRIMARY KEY AUTO_INCREMENT,
 mem_fname   VARCHAR(30) NOT NULL,
 mem_lname   VARCHAR(30) NOT NULL,
 mem_street  VARCHAR(120),
 mem_city    VARCHAR(50),
 mem_state   VARCHAR(2),
 mem_zip     VARCHAR(5),
 mem_balance DECIMAL(10,2));

/*Insert data into membership*/
INSERT INTO membership VALUES(102,'Tami','Dawson','2632 Takli Circle','Norene','TN','37136',11);
INSERT INTO membership VALUES(103,'Curt','Knight','4025 Cornell Court','Flatgap','KY','41219',6);
INSERT INTO membership VALUES(104,'Jamal','Melendez','788 East 145th Avenue','Quebeck','TN','38579',0);
INSERT INTO membership VALUES(105,'Iva','Mcclain','6045 Musket Ball Circle','Summit','KY','42783',15);
INSERT INTO membership VALUES(106,'Miranda','Parks','4469 Maxwell Place','Germantown','TN','38183',0);
INSERT INTO membership VALUES(107,'Rosario','Elliott','7578 Danner Avenue','Columbia','TN','38402',5);
INSERT INTO membership VALUES(108,'Mattie','Guy','4390 Evergreen Street','Lily','KY','40740',0);
INSERT INTO membership VALUES(109,'Clint','Ochoa','1711 Elm Street','Greenville','TN','37745',10);
INSERT INTO membership VALUES(110,'Lewis','Rosales','4524 Southwind Circle','Counce','TN','38326',0);
INSERT INTO membership VALUES(111,'Stacy','Mann','2789 East Cook Avenue','Murfreesboro','TN','37132',8);
INSERT INTO membership VALUES(112,'Luis','Trujillo','7267 Melvin Avenue','Heiskell','TN','37754',3);
INSERT INTO membership VALUES(113,'Minnie','Gonzales','6430 Vasili Drive','Williston','TN','38076',0);

/*Create table rental*/
CREATE TABLE rental
(rent_num  INTEGER PRIMARY KEY AUTO_INCREMENT,
 rent_date DATE,
 mem_num   INTEGER,
 FOREIGN KEY(mem_num) REFERENCES membership(mem_num));

/*Insert data into rental*/
INSERT INTO rental VALUES(1001,'2009-03-01',103);
INSERT INTO rental VALUES(1002,'2009-03-01',105);
INSERT INTO rental VALUES(1003,'2009-03-02',102);
INSERT INTO rental VALUES(1004,'2009-03-02',110);
INSERT INTO rental VALUES(1005,'2009-03-02',111);
INSERT INTO rental VALUES(1006,'2009-03-02',107);
INSERT INTO rental VALUES(1007,'2009-03-02',104);
INSERT INTO rental VALUES(1008,'2009-03-03',105);
INSERT INTO rental VALUES(1009,'2009-03-03',111);

/*Create table detailrental*/
CREATE TABLE detailrental
(rent_num            INTEGER,
 vid_num             INTEGER,
 detail_fee          DECIMAL(5,2),
 detail_duedate      DATE,
 detail_returndate   DATE,
 detail_dailylatefee DECIMAL(5,2),
 PRIMARY KEY(rent_num, vid_num),
 FOREIGN KEY(rent_num) REFERENCES rental(rent_num),
 FOREIGN KEY(vid_num)  REFERENCES video(vid_num));

/*Insert data into dailyrental*/
INSERT INTO detailrental VALUES(1001,34342,2,'2009-03-04','2009-03-02',1);
INSERT INTO detailrental VALUES(1001,61353,2,'2009-03-04','2009-03-03',1);
INSERT INTO detailrental VALUES(1002,59237,3.5,'2009-03-04','2009-03-04',3);
INSERT INTO detailrental VALUES(1003,54325,3.5,'2009-03-04','2009-03-09',3);
INSERT INTO detailrental VALUES(1003,61369,2,'2009-03-06','2009-03-09',1);
INSERT INTO detailrental VALUES(1003,61388,0,'2009-03-06','2009-03-09',1);
INSERT INTO detailrental VALUES(1004,44392,3.5,'2009-03-05','2009-03-07',3);
INSERT INTO detailrental VALUES(1004,34367,3.5,'2009-03-05','2009-03-07',3);
INSERT INTO detailrental VALUES(1004,34341,2,'2009-03-07','2009-03-07',1);
INSERT INTO detailrental VALUES(1005,34342,2,'2009-03-07','2009-03-05',1);
INSERT INTO detailrental VALUES(1005,44397,3.5,'2009-03-05','2009-03-05',3);
INSERT INTO detailrental VALUES(1006,34366,3.5,'2009-03-05','2009-03-04',3);
INSERT INTO detailrental VALUES(1006,61367,2,'2009-03-07',NULL,1);
INSERT INTO detailrental VALUES(1007,34368,3.5,'2009-03-05',NULL,3);
INSERT INTO detailrental VALUES(1008,34369,3.5,'2009-03-05','2009-03-05',3);
INSERT INTO detailrental VALUES(1009,54324,3.5,'2009-03-05',NULL,3);
INSERT INTO detailrental VALUES(1001,34366,3.5,'2009-03-04','2009-03-02',3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:18:03.387

```
SELECT  rent_num, 
        vid_num, 
        detail_returndate, 
        detail_duedate, 
        DATEDIFF( detail_duedate, detail_returndate) as days_overdue    
FROM detailrental 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:58:04.857

它应该如上所示工作。也许添加强制性的`。

```
SELECT `rent_num`,
       `vid_num`,
       `detail_returndate`,
       `detail_duedate`,
       DATEDIFF(`detail_returndate`,`detail_duedate`) as days_overdue
FROM detailrental 
```

此外，DATEDIFF 从第一个值中减去第二个值，如图所示，它应该为 days_overdue 提供一个正数。

# c - 无法弄清楚这个递归代码的含义

> ID：10130221
> 
> 赞同：1
> 
> 时间：2012-04-12T19:14:44.903
> 
> 标签：c, recursion

我不明白这个递归代码的含义。它是否检查连续两个节点中的任何两个值是否相同？

```
bool has_repeats(element_t *e) 
{
    if (e == NULL) 
       return false;
    if (contains_value(e->next, e->val)) 
       return true;
    return has_repeats(e->next);
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:16:14.247

是的，您通过回答自己的问题知道您在说什么！用下一个节点检查当前节点。如果它们相同，则返回`true`，否则递归回调自身`return has_repeats(e->next);`。

我想这将有助于我们了解`contains_value(x, y)`实际情况。正如@Ben 评论的那样，更有`contains_value(x,y)`可能检查列表中的所有值。

# android - 处理程序的重点？

> ID：10130225
> 
> 赞同：2
> 
> 时间：2012-04-12T19:15:02.380
> 
> 标签：android, handlers

我知道这很可能是一个非常愚蠢的问题，但我无法完全理解处理程序的意义。我知道这个想法是处理程序在主线程上执行，它们似乎最常与工作线程一起使用，但是为什么工作线程不能只调用调用 Activity 上的方法而不是说 Activity 与 Handler 一起创建线程接收消息？

再次，我为我的问题的无知道歉，但我在网上找到的只是关于如何使用处理程序的教程，而我的 Pro Android 3 书并没有解决我的问题（或者我太愚蠢了，无法正确理解它！）

或者，就此而言，为什么要在 AsyncTasks 上使用它们，它可以毫无问题地修改 UI？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:26:20.990

当使用处理程序（或消息）时，每个任务都会“序列化”。这样做的好处是没有并发，因此不需要锁定。使消息驱动系统稳定比多线程系统容易得多。

顺便说一句，AsyncTask 也使用 Handlers

直接使用处理程序可以为您提供更大的灵活性。例如，您可以安排将来发送一条消息。或者您可以中止预定的消息。

处理程序是一个非常强大的工具。

# mysql - SQL 索引性能 - ASC 与 DESC

> ID：10130230
> 
> 赞同：23
> 
> 时间：2012-04-12T19:15:14.237
> 
> 标签：mysql, sql, indexing, primary-key

我有一个用户表键入自动增量 int 列，看起来像这样：

```
CREATE TABLE `user_def` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(20) NOT NULL,
  `date_created` datetime NOT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `user_name_UNIQUE` (`user_name`),
) ENGINE=MyISAM 
```

使用 DESC 索引（主键）而不是默认 ASC 是否有任何实际的性能优势？

我的怀疑/推理如下：我假设最近的用户会更活跃（即更频繁地访问表），因此使索引更有效率。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-12T19:17:09.377

## MySQL 8.0 的更新答案

正如 Kazimieras Aliulis 在评论中指出的那样，[MySQL 8.0 中添加了对降序索引的支持](https://dev.mysql.com/doc/refman/8.0/en/descending-indexes.html)：

> MySQL 支持降序索引：索引定义中的 DESC 不再被忽略，而是导致键值按降序存储。以前，可以以相反的顺序扫描索引，但会降低性能。降序索引可以按正序扫描，效率更高。当最有效的扫描顺序混合了某些列的升序和其他列的降序时，降序索引还使优化器可以使用多列索引。

* * *

## 早期版本的原始答案

[`DESC`MySQL 中当前未实现索引...引擎忽略提供的排序并始终使用`ASC`：](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

> index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字被允许用于指定升序或降序索引值存储的未来扩展。目前，它们被解析但被忽略；索引值始终按升序存储。

对于另一个实现此功能的 RBDMS，例如 SQL Server，[该`DESC`规范仅在按复合索引排序时才有用](http://explainextended.com/2009/04/27/descending-indexes/)……并且不会影响新创建用户与旧用户的查找时间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-25T13:02:14.143

从[MySQL 5.6 文档](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)：

> index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字被允许用于指定升序或降序索引值存储的未来扩展。目前，它们被解析但被忽略；索引值始终按升序存储。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-25T13:26:03.647

有一天，我得到了一个简单而绝妙的技巧，如何为 mysql 创建一个降序索引：只需添加另一列负数（镜像值）。说，对于 unsigned int 它只是`value*-1`- 所以，它适用于 unix 时间戳。
对于 varchars，这个想法是相似的，但实现要复杂一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T13:04:51.510

在 MySQL 中为索引定义 ASC 或 DESC 不仅不受支持，而且毫无意义。MySQL 可以根据需要双向遍历索引，因此不需要显式定义顺序。

# iis - IIS URL 重写

> ID：10130238
> 
> 赞同：0
> 
> 时间：2012-04-12T19:15:31.203
> 
> 标签：iis, iis-7, url-rewriting

使用 URL Rewrite 模块，我有一个规则设置，定义为：

```
Matches the pattern
Regular Expressions
Pattern: /support/viewmessages.aspx
Ignore Case: true
Action Type: Redirect

Redirect URL: http://newdomain/support/viewmessages.aspx
Append Query String: true
Redirect Type: 301 
```

在我看来，这听起来应该重定向任何格式如下的 URL：
[http://olddomain/support/viewmessages.aspx?forum=20&topic=75942&ForumName=General%20Discussion](http://olddomain/support/viewmessages.aspx?forum=20&topic=75942&ForumName=General%20Discussion)
要成为：
[http://newdomain/support/viewmessages.aspx ?forum=20&topic=75942&ForumName=General%20讨论](http://newdomain/support/viewmessages.aspx?forum=20&topic=75942&ForumName=General%20Discussion)

然而，似乎什么都没有发生。我在旧域上得到了我的 404，它不会在附加了查询字符串的情况下进入 404。

这是 IIS 在我的 web.config 中生成的代码：

```
<rule name="Forum Posts" patternSyntax="ECMAScript" stopProcessing="true">
    <match url="/support/viewmessages.aspx" />
    <action type="Redirect" url="http://newdomain/support/viewmessages.aspx" appendQueryString="true" />
</rule> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:23:29.763

尝试 1：您是否尝试过没有正斜杠的模式？我的另一个想法是斜线和点是否有一些特别的事情要做，因为它们可能被视为正则表达式中的特殊字符。

* * *

第 2 点：您确实认识到点是[正则表达式中的特殊字符，](http://www.regular-expressions.info/reference.html)对吗？您可能必须找到一种方法来逃避它，以便 url 喜欢“/support/viewmatches\.aspx”

# java - Java 使用 Comparable 接口

> ID：10130246
> 
> 赞同：3
> 
> 时间：2012-04-12T19:15:52.967
> 
> 标签：java, interface, comparable

我正在做一个关于实现接口的家庭作业，有点迷茫。我需要实现可比较的接口并使用 compareTo() 方法。这是我的超类的代码，它有三个子类，它们都是不同形式的车辆。在这种情况下，我试图计算他们拥有的门的数量。

下面是“Vehicle”超类的代码

```
package vehicle;

abstract public class Vehicle implements Comparable {
    private String color;
    private int numberOfDoors;

    // Constructor
    /**
     * Creates a vehicle with a color and number of doors
     * @param aColor The color of the vehicle
     * @param aNumberOfDoors The number of doors
     */
    public Vehicle(String aColor, int aNumberOfDoors) {
        this.color = aColor;
        this.numberOfDoors = aNumberOfDoors;
    }

    // Getters
    /**
     * Gets the color of the vehicle
     * @return The color of the vehicle
     */
    public String getColor() {return(this.color);}
    /**
     * Gets the number of doors the vehicle has
     * @return The number of doors the vehicle has
     */
    public int getNumberOfDoors() {return(this.numberOfDoors);}

    // Setters
    /**
     * Sets the color of the vehicle
     * @param colorSet The color of the vehicle
     */
    public void setColor(String colorSet) {this.color = colorSet;}
    /**
     * Sets the number of doors for the vehicle
     * @param numberOfDoorsSet The number of doors to be set to the vehicle
     */
    public void setNumberOfDoors(int numberOfDoorsSet) {this.numberOfDoors = numberOfDoorsSet;}

    public int compareTo(Object o) {
        if (o instanceof Vehicle) {
            Vehicle v = (Vehicle)o;
        }
        else {
            return 0;
        }
    }

    /**
     * Returns a short string describing the vehicle
     * @return a description of the vehicle
     */
    @Override
    public String toString() {
        String answer = "The car's color is "+this.color
                +". The number of doors is"+this.numberOfDoors;
        return answer;
    }
} 
```

目前这是一项正在进行的工作，我不确定 compareTo 方法从这里到哪里去。任何帮助深表感谢。

谢谢！

*编辑* 一旦我让 compareTo() 方法在超类中工作，我需要添加到子类中以实现此功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:17:42.077

你应该有 Vehicle implement `Comparable<Vehicle>`，所以你的`compareTo`方法可以接受一个`Vehicle`参数而不是强制转换。

但是如果你问如何实现该`compareTo`方法，那么如果这辆车应该小于另一辆车，则返回一个负数；如果它应该更大，则返回一个正数，如果它们应该相等，则返回`0`。您可能会`color.compareTo(otherVehicle.color)`用来比较颜色，因为它们是`String`s。

这应该是足够的提示！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:21:23.530

如果比较应仅基于门数，请尝试以下操作：

```
public int compareTo(Object o) {
    if (o instanceof Vehicle) {
        Vehicle v = (Vehicle) o;
        return getNumberofDoors() - v.getNumberOfDoors();
    } else {
        return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:19:53.720

`compareTo()`应该返回一个`int`表示当前对象与给定对象（参数）的比较。换句话说，如果您当前的对象“小于”传递的对象，那么它应该返回一个负数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:23:25.347

首先让你的车辆`Comparable<Vehicle>`按照路易斯所说的方式实施。然后在您的 compareTo 方法中，您希望返回一个值来比较您希望它们进行比较的 Vehicle 的方面。

```
public int compareTo(Vehicle v) {
        return this.getNumberOfDoors() - v.getNumberOfDoors();
    } 
```

如果门的数量相同，这将返回零。如果 v 有更多的门，则为负值，如果 v 的门更少，则为正值。

您还可以比较其他东西（如果添加的话，例如汽车的品牌）

```
public int compareTo(Vehicle v) {
            return this.make.compareTo(v.make);
        } 
```

# rally - Rally App SDK：有没有办法为表格设置可变列？

> ID：10130254
> 
> 赞同：2
> 
> 时间：2012-04-12T19:16:38.490
> 
> 标签：rally

使用 Rally App SDK，是否可以创建具有可变列数的表格？例如，对于选定的版本，列是该发布日期范围内的迭代，行是每个项目。

我有我想要显示的所有数据，但不确定如何创建表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:22:48.480

这是一个示例应用程序，它以迭代名称作为列动态构建表配置，然后向其中添加一些虚拟数据。不太令人兴奋，但它说明了这个想法。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <!-- Copyright (c) 2002-2011  Rally Software Development Corp. All rights reserved. -->

    <html>
    <head>
        <title>Iterations as Table Columns</title>
        <meta name="Name"    content="App: Iterations as Table Columns"/>
        <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.29/sdk.js"></script>

        <script type="text/javascript">
            function iterationsAsTableColumns(rallyDataSource)
                {

                    var wait = null;
                    var table = null;
                    var tableHolder = null;

                    // private method the builds the table of Iteration columns and your info
                    function showResults(results)
                    {
                        if (wait) {
                            wait.hide();
                            wait = null;
                        }
                        if (table) {
                            table.destroy();
                        }

                        var myIterations = results.iterations;

                        if (myIterations.length === 0) {
                            tableHolder.innerHTML = "No iterations were found";
                            return;
                        }

                        var columnKeys = new Array();
                        var columnHeaders = new Array();
                        var columnWidths = new Array();
                        var columnWidthValue = '80px';
                        var keyName;

                        // Dynamically build column config arrays for table config
                        for (i=0; i<myIterations.length;i++){
                            keyName = "Column"+i;
                            columnKeys.push(keyName);
                            columnHeaders.push("'" + myIterations[i].Name + "'");
                            columnWidths.push("'" + columnWidthValue + "'");
                        }

                        var config = { 'columnKeys'    : columnKeys,
                                       'columnHeaders' : columnHeaders,
                                       'columnWidths'  : columnWidths
                                     };

                        table = new rally.sdk.ui.Table(config);

                        var cellValue;
                        var propertyAttributeStatement;
                        var rowData = new Array();

                        for (i=0;i<10;i++){

                            // create Object for row data
                            rowItem = new Object();

                            for (j=0; j<columnKeys.length;j++){

                                cellValue = "Cell[" + i + "][" + j + "] = Your Data Here";
                                propertyAttributeStatement = "rowItem." + columnKeys[j] + " = '"+cellValue+"';";
                                eval(propertyAttributeStatement);
                            }

                            rowData.push(rowItem);
                        }

                        table.addRows(rowData);
                        table.display(tableHolder);
                    }

                    //private method to query for iterations that get listed as columns
                    function runMainQuery(sender, eventArgs) {

                        var queryCriteria = '(Project.Name = "Avalanche Hazard Mapping"")';

                        var queryConfig =
                            {
                             key   : "iterations",
                             type  : "Iteration",
                             fetch : "FormattedID,Name,Project,StartDate,EndDate,CreationDate",
                             order : "CreationDate desc",
                            };

                        tableHolder.innerHTML = "";
                        wait = new rally.sdk.ui.basic.Wait({});
                        wait.display(tableHolder);

                        rallyDataSource.findAll(queryConfig, showResults);
                    }

                    //private method to start building controls on page
                    function initPage() {

                        buttonSpan = document.getElementById('buttonSpan');
                        tableHolder   = document.getElementById('table');

                        var buttonConfig = {
                               text: "Show Table",
                               value: "myValue"
                        };

                        var showTableButton = new rally.sdk.ui.basic.Button(buttonConfig);
                        showTableButton.display(buttonSpan, runMainQuery);

                    }

                    // only public method
                    this.display = function() {
                        rally.sdk.ui.AppHeader.showPageTools(true);

                        initPage();
                    };

                }

        </script>
        <script type="text/javascript">
            rally.addOnLoad(function() {
                var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                                                         '__PROJECT_OID__',
                                                                         '__PROJECT_SCOPING_UP__',
                                                                         '__PROJECT_SCOPING_DOWN__');
                var iterationsAsTableColumnsExample = new iterationsAsTableColumns(rallyDataSource);
                iterationsAsTableColumnsExample.display();
            });
        </script>
    </head>

    <body>
      <div>
          <span id="buttonSpan"></span>
       </div>
      <div style="height: 15px;">&nbsp;</div>
      <div id="table"></div>
    </body>

    </html> 
```

# nhibernate - NHibernate CreateSQLQuery 处理更新的实体

> ID：10130257
> 
> 赞同：0
> 
> 时间：2012-04-12T19:16:50.923
> 
> 标签：nhibernate

我正在尝试通过存储过程中的 nhibernate 的 CreateSQLQuery 从数据库中检索数据。类似于以下代码。

然后我基本上是在进行会话事务提交，但是提交会引发“**无法更新**”异常。它正在尝试在 CustomEntityDao 上执行更新语句。

```
 const string selectSQL = "EXEC GetDataSP @Id = :Id";
        var query = Session.CreateSQLQuery(selectSQL);
        query.SetString("Id", "10");
        query.AddEntity(typeof (CustomEntityDao));

        var entityList = query.List<CustomEntityDao>();

        try
        {
            Session.Transaction.Commit();
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

我的问题是为什么实体被视为已**修改**，正如您在代码中看到的那样，我只是在进行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:59:30.477

您的代码可能还有其他问题，我可以建议使用 NHibernate Profiler 的试用版，该试用版可以从 www.nhprof.com 下载并监视正在触发的 SQL 命令并注意正在检索的对象。

另外我不明白你为什么首先提交交易。

要解决这个特殊问题，您可以始终使用`StatelessSession`不跟踪实体的 NHibernate，或者您也可以使用`Session.Evict`并要求 Nhibernate 停止跟踪特定对象。

# php - 从 FROM_UNIXTIME 返回 0 计数

> ID：10130259
> 
> 赞同：3
> 
> 时间：2012-04-12T19:17:08.550
> 
> 标签：php, mysql

## 背景

这是支持前端 Highcharts 安装的 API。用户可以选择“天”（24 小时）、一周（7 天）或自定义间隔，没有任何限制。由于所选日期范围的性质（已完成），x 轴（日期/时间）需要完全动态。

## Y轴

我们计算 X 轴（日期）的方式工作得很好，但是我们在某一天返回空值时遇到了麻烦。

我们使用这个查询来计算值：

```
SELECT COUNT(u.videoid)                   AS metric, 
       FROM_UNIXTIME(u.TIME, '%M %e, %Y') AS `sqltime` 
FROM   videos u 
WHERE  ( u.TIME >= 1291179600 
         AND u.TIME <= 1293858000 ) 
       AND u.channel = '48' 
GROUP  BY `sqltime` 
ORDER  BY `sqltime` ASC 
```

这是一个示例输出：

```
metric  sqltime 
2   December 13, 2010
9   December 14, 2010
1   December 15, 2010
7   December 16, 2010
32  December 17, 2010
10  December 18, 2010
6   December 19, 2010
17  December 20, 2010
19  December 21, 2010
10  December 22, 2010
20  December 23, 2010
8   December 24, 2010
9   December 26, 2010
33  December 27, 2010
29  December 28, 2010
24  December 29, 2010
34  December 30, 2010
11  December 31, 2010 
```

问题是它没有返回 12 月 25 日的值（以 0 作为度量值）。这导致 Highcharts 完全跳过该值，而不是显示 0。所以这是当前图表的样子：

![样本](../Images/40c2ad9f7ed650f9c11bde9c9c1c486f.png)

但它真的应该是这样的： ![已更正](../Images/310989abce38236fec3a242817e66738.png)

红线在哪里。唯一的方法是为 2010 年 12 月 25 日返回 0 值（例如）。

## 问题

`videos`所以问题又是，当表中没有该日期/时间和 WHERE 条件的行时，如何修改我的查询以返回值 0 ？

## 更多信息

以下是我们当前计算 x 轴的方式：

```
 public function getCordinateCount()
    {
        $totalTime = $this->endTime - $this->startTime;

        // 86400 seconds in a day.
        $days = ceil($totalTime / 86400);

        if($days <= 1) {
            return 'FROM_UNIXTIME( u.time, \'%M %e, %Y %H:00\') AS `sqltime`';
        } elseif ($days < 60) {
            return 'FROM_UNIXTIME( u.time, \'%M %e, %Y\') AS `sqltime`';
        } else {

            return 'DATE_FORMAT(
                        SUBDATE(
                          FROM_UNIXTIME( u.time ),
                          INTERVAL WEEKDAY( FROM_UNIXTIME( u.time ) ) DAY
                        ),
                        \'%M %e, %Y\') as `sqltime`';
        } 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:48:52.460

我会尝试在所有日子（从 1 月 1 日到 12 月 31 日）都有一张 DAYS 表。

然后做一个左连接。如果指标为空，则结果为零 =>

```
SELECT IF(tmp.metric IS NULL,0,tmp.metric),DAYS.datestr FROM DAYS LEFT JOIN (
SELECT COUNT(u.videoid)                   AS metric, 
       FROM_UNIXTIME(u.TIME, '%M %e, %Y') AS `sqltime` 
FROM   videos u 
WHERE  ( u.TIME >= 1291179600 
         AND u.TIME <= 1293858000 ) 
       AND u.channel = '48' 
GROUP  BY `sqltime` 
) tmp ON DAYS.datestr=tmp.`sqltime`
ORDER  BY `sqltime` ASC 
```

（我想这里 DAYS.datestr 的格式与 sqltime 相同）。

这就是我在QUERY中的做法。但我真的会在 PHP 中这样做，首先将整个数组设置为 0 值，然后将其与查询结果合并。

HIH

# php - 向谷歌图表添加动态行

> ID：10130269
> 
> 赞同：1
> 
> 时间：2012-04-12T19:17:52.453
> 
> 标签：php, javascript, google-visualization

我正在为我的大学项目使用谷歌折线图，在这里我想根据数据库中的用户选择动态添加行，addRow() 函数用于添加行，但我希望它通过循环添加。有人可以帮助我吗？

这是我的代码：

```
var rowArray1 = [];
var rowArray2 = [];
<?php
for($i=1;$i<=$count;$i++)
{
$row=mysql_fetch_array($rows);
echo "rowArray1.push('". $row['a'] ."')";
echo "rowArray2.push(". $row['b'].")";

array_push($rowArray,"'".$row['a']."',".$row['b']);
} 
?>

for(i=0;i<count;i++)
{
   data.addRow( [rowArray1[i], rowArray2[i]] );
} 
```

它无法正常工作... :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T05:54:47.427

最后我得到了解决方案。这是非常简单的方法。当我问这个问题时，我只是一个初学者，所以我不知道该怎么做。现在我得到了答案。

我只是在这样的javascript代码中包含了PHP脚本，

```
<script>
// Google chart codes....

<?php
  $row=mysql_fetch_array($rows);
  foreach($row as $data) {
    echo "data.addRow( $data['a'] , $data['b'] );";  
  } 
?>

// Google chart codes....
</script> 
```

它工作得很好...... :)

# jquery - 在 fancybox v2 中添加一个完整尺寸的按钮

> ID：10130274
> 
> 赞同：1
> 
> 时间：2012-04-12T19:18:04.570
> 
> 标签：jquery, fancybox

目前，在 Fancybox 中查看全尺寸图像的唯一方法是调用按钮助手，但这也会带来其余按钮（播放、下一个、上一个等）。我想在 Fancybox 容器的一角添加一个按钮，用于切换全/自动大小；最好添加对常规 js 和 css 文件的更改，以避免额外的请求。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-29T11:24:21.613

另一种变体为例（fancybox 2.1.5）：

```
$('.fancybox').fancybox({
  afterShow: function() {
    $('<div class="fancybox-fullsize"></div>').appendTo(this.skin).click(function() {
      $.fancybox.toggle();
      $(this).toggleClass('fancybox-fullsize fancybox-fullsize-r');
    });
  }
}); 
```

和CSS：

```
.fancybox-fullsize, .fancybox-fullsize-r {
  position: absolute;
  width: 36px;
  height: 36px;
  top: -18px;
  left: -18px;
  z-index: 99999;
  cursor: pointer;
}

.fancybox-fullsize {
  background-image: url(img/fancybox_fullsize.png);
}

.fancybox-fullsize-r {
  background-image: url(img/fancybox_fullsize-r.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:13:43.763

不要浪费你的时间来改变 javascript，你可以用这个 css 技巧只显示关闭和全尺寸按钮。

```
#fancybox-buttons a.btnPrev, #fancybox-buttons a.btnNext, #fancybox-buttons a.btnPlay {
   display:none;
}

#fancybox-buttons ul {
  width:80px;
} 
```

# c# - 如何在其他方法中访问变量

> ID：10130275
> 
> 赞同：0
> 
> 时间：2012-04-12T19:18:06.230
> 
> 标签：c#, .net-4.0

我不知道如何正确解释我想要的。这是一个例子^

```
public void foo()
{
  StackFrame trace = new StackFrame(1);
  MethodBase method = trace.GetMethod(); //so, here we'll get bar-method info
  MthodBody body = method.GetMethodBody(); //and here we'll get bar-method body
  /*now i need get access to the local vars in bar
    i know about MethodBody.LocalVariables
    but i don't have any idea how i can get values of variables i and hello,
    that defined in bar-method. I think it may be possible if i'll get
    pointers to the vars,
    and then copy it with Marshal.Copy*/
}

public void bar()
{
  int i = 42;
  string hello = "Hello!";
  foo();
} 
```

**PS**我希望我的例子并不可怕，你明白我到底想要什么。 **PPS**对不起，我的英语很糟糕：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:00:26.783

我想，您真正想做的是某种方法拦截（我认为您正在尝试记录参数值或类似的东西）。看看 PostSharp [http://www.sharpcrafters.com/blog/post/Day-7-Interception-Aspects-e28093-Part-1.aspx](http://www.sharpcrafters.com/blog/post/Day-7-Interception-Aspects-e28093-Part-1.aspx)或Castle Windsor 中的[DynamicProxy](http://www.castleproject.org/dynamicproxy/index.html)。

# sql - 如何从 [存储过程] 中选择 [temp table1] = [subselect 1]、[temp table2] = [subselect 2]

> ID：10130276
> 
> 赞同：5
> 
> 时间：2012-04-12T19:18:07.663
> 
> 标签：sql, tsql, sql-server-2005, stored-procedures

我有一个存储过程，它返回两个选择，我在报告中使用。第一个选择是以表格格式显示的数据，第二个是要显示在报表头中的元数据，如下所示：

```
CREATE PROCEDURE dbo. GetReport    
@Input INT
AS 
BEGIN          
   --Get #Metadata    
   -- #Results = f(#Metadata) … compex calculation          
   SELECT * FROM #Results    
   SELECT * FROM #Metadata    
END 
```

由于 sproc 计算非常密集，我想在一夜之间为一些最常用的 sproc 参数准备报告行作为纯数据（在两个表中：PrecalcResults 和 PrecalcMetadata）。泡沫我会直接选择预先计算的值或根据参数用sproc计算它们。

出于维护原因，我想使用相同的 sproc 来计算以下数据： 1\. 显示在报告中 2\. 存储在 PrecalcResults 和 PrecalcMetadata 中（使用使用的参数）

如果我有单个选择存储过程，我会在这里描述一种方法： [将存储过程的结果插入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

由于我有 multiselect sproc，我想做类似上面的事情，但有两个表。在 .net 中我会执行 DataSet.Tables[0] 和 DataSet.Tables[1]...，但我想在 tsql 中执行它，以便在日常工作中运行它。

这在 MS SQL 中是否可行？

* * *

我不得不向自己道歉，从下面的答案中我可以看出我不是很清楚。我想将此功能实现为纯 TSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:49:45.660

是的，这是可能的。

[正如您所建议的，从单个存储过程返回多个结果集是非常好的。](https://stackoverflow.com/questions/3876146/stored-procedure-return-multiple-result-sets)

您唯一的潜在问题是`TableAdapter`能够从存储过程中提取两个结果集的限制，[但是对于该问题有一个非常简单的解决方法。](http://blogs.msdn.com/b/vbteam/archive/2007/03/13/tableadapter-multiple-result-sets.aspx)

# arrays - 将字符串拆分为数组 Shellscript

> ID：10130280
> 
> 赞同：21
> 
> 时间：2012-04-12T19:18:16.807
> 
> 标签：arrays, shell

如何在 shell 脚本中将字符串拆分为数组？

我试过了`IFS='delimiter'`，它适用于循环`(for, while)`，但我需要该字符串中的一个数组。

如何从字符串中创建一个数组？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-12T19:26:14.013

```
str=a:b:c:d:e
set -f
IFS=:
ary=($str)
for key in "${!ary[@]}"; do echo "$key ${ary[$key]}"; done 
```

输出

```
0 a
1 b
2 c
3 d
4 e 
```

* * *

另一种（bash）技术：

```
str=a:b:c:d:e
IFS=: read -ra ary <<<"$str" 
```

这将限制对 IFS 变量的更改仅在读取命令期间进行。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-04-18T15:05:43.317

```
#!/bin/bash

str=a:b:c:d:e
arr=(${str//:/ }) 
```

输出：

```
echo ${arr[@]}
a b c d e 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-09T02:58:10.080

找到了不需要更改 IFS 或循环的解决方案：

```
str=a:b:c:d:e
arr=(`echo $str | cut -d ":"  --output-delimiter=" " -f 1-`) 
```

输出：

```
echo ${arr[@]}
a b c d e 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-09T14:52:09.540

将上面的答案组合成对我有用的东西

```
set -- `echo $PATH|cut -d':' --output-delimiter=" " -f 1-`; for i in "$@"; do echo $i; done 
```

给

```
# set -- `echo $PATH|cut -d':' --output-delimiter=" " -f 1-`; for i in "$@"; do echo $i; done
/usr/local/sbin
/usr/local/bin
/usr/sbin
/usr/bin
/sbin
/bin
# 
```

# weblogic - 为 X.509 智能卡身份验证配置 Weblogic Server

> ID：10130281
> 
> 赞同：3
> 
> 时间：2012-04-12T19:18:19.660
> 
> 标签：weblogic

我正在运行 Oracle Weblogic 11g (10.3.6) 并尝试配置双向 SSL（请求并强制执行客户端证书）。客户端证书位于智能卡上。

我在 weblogic 服务器中启用了“基本”ssl，并使用 keytool 将相关的根 CA 证书导入到 DemoTruststore.jks 文件中。我已将双向客户端证书行为设置为服务器的客户端证书请求和强制执行。

不幸的是，尝试访问我的应用程序会导致以下问题：

```
<Certificate chain received from 127.0.0.1 - 127.0.0.1 was incomplete.> 
<NO_CERTIFICATE alert was received from 127.0.0.1 - 127.0.0.1\. Verify the SSL configuration has a proper SSL certificate chain and private key specified.>
<Certificate chain received from 127.0.0.1 - 127.0.0.1 was incomplete.> 
```

ActivClient 对话框永远不会出现从智能卡中选择证书，并且永远不会请求 pin。因此，我认为我配置错误。

帮助将不胜感激。

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:06:17.727

忘记了我问过这个，所以我无法证明答案。以下是我设置它的步骤：

1.  登录到 weblogic 控制台[http://whateveryourhostnameis.com:7001/console](http://whateveryourhostnameis.com:7001/console)。你必须知道你的用户名和密码（我不知道）

2.  单击服务器链接，然后单击实际服务器实例的名称。（带有 weblogic 的开发盒可能只有一个）

3.  在常规选项卡上，单击“启用 SSL 侦听端口”。点击保存。

4.  在 SSL 选项卡上，单击高级箭头以打开高级选项。

5.  将“双向客户端证书行为”更改为“请求并强制执行客户端证书”

6.  选中“使用 JSSE SSL”复选框

尽管服务器可能会说不需要重新启动，但请记住它是 Oracle 产品，因此本质上是邪恶的。我建议重新启动服务器。

# jquery - jQuery：使用验证查询

> ID：10130290
> 
> 赞同：0
> 
> 时间：2012-04-12T19:19:03.853
> 
> 标签：jquery, validation

我正在查看 jQuery 文档中的以下来源。你可以看到它说`field:`我是否将它设置为这样的特定字段`field:('#fieldname');`

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript">
jQuery.validator.setDefaults({
    debug: true,
    success: "valid"
});;
</script>

  <script>
  $(document).ready(function(){
    $("#myform").validate({
  rules: {
    field: {
      required: true,
      url: true
    }
  }
});
  });
  </script>
  <style>#field { margin-left: .5em; float: left; }
    #field, label { float: left; font-family: Arial, Helvetica, sans-serif; font-size: small; }
    br { clear: both; }
    input { border: 1px solid black; margin-bottom: .5em;  }
    input.error { border: 1px solid red; }
    label.error {
        background: url('http://dev.jquery.com/view/trunk/plugins/validate/demo/images/unchecked.gif') no-repeat;
        padding-left: 16px;
        margin-left: .3em;
    }
    label.valid {
        background: url('http://dev.jquery.com/view/trunk/plugins/validate/demo/images/checked.gif') no-repeat;
        display: block;
        width: 16px;
        height: 16px;
    }
</style>
</head>
<body>

<form id="myform">
  <label for="field">Required, URL: </label>
  <input class="left" id="field" name="field" />
  <br/>
  <input type="submit" value="Validate!" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:18:57.200

该字段是对要验证的页面元素名称的引用。在您的情况下，您正在验证的页面元素的名称称为“字段”：

```
<input class="left" id="field" name="field" /> 
```

如果它有不同的名称，那么您将在代码中使用该名称。

例如，如果您有另一个名为 first_name 的表单字段：

```
<input class="left" id="first_name" name="first_name" /> 
```

验证“field”和“first_name”文本框的 jQuery 代码如下：

```
<script>
  $(document).ready(function(){
    $("#myform").validate({
      rules: {
       field: {
         required: true,
         url: true
       }, 
       first_name: {
         required: true
       }
     }
   });
  });
 </script> 
```

# java - Android - 通过文本视图将文本从一个类传递到另一个类

> ID：10130291
> 
> 赞同：1
> 
> 时间：2012-04-12T19:19:07.850
> 
> 标签：java, android, eclipse, class, textview

我正在android上制作一个日历/约会应用程序来发展我的技能，打开屏幕有一个日历、一个文本视图（日期选择）和一个​​按钮（创建）。textview(dateselected) 显示用户选择的日期，创建按钮打开另一个类，用户在其中填写约会详细信息。这第二类也有一个 textview(dateselected2)

如何将所选日期中的文本从第一堂课带到第二堂课中的 dateselected2。

我知道如何在一个班级中传递数据，但我发现在两个班级中很难做到这一点。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:30:01.753

您可以使用 Intent 将数据从一个 Activity 发送到另一个：

开始活动.class

```
Intent i = new Intent(this, MyNewActivity.class);
Intent.putExtra(MY_STRING_KEY, dataselected.getText());
startActivity(i); 
```

新活动类

```
public void onCreate(Bundle savedInstance) {
super.onCreate(savedInstance);

Bundle extras = getIntent().getExtras();
String text = extras.getString(MY_STRING_KEY);

    dataselected.setText(text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:27:47.370

尝试这样的事情：

```
Intent myIntent = new Intent(class1.this,class2.class);
myIntent.putExtra("user_date", yourStringName);
StartActivity(myIntent); 
```

现在，在 onCreate 的第二堂课中尝试：

```
Bundle extras = getIntent().getExtras();
myStringName = (extras != null ? extras.getString("user_date") : null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:29:07.213

真的很简单

在第一次活动中使用

```
intent.putExtra("data", dateselected2); 
```

并在第二次活动中使用

```
String data = getIntent().getExtras().getString("data"); 
```

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# url - Globals!ReportServerUrl 返回 LocalHost 而不是报表服务器 URL

> ID：10130294
> 
> 赞同：0
> 
> 时间：2012-04-12T19:19:22.900
> 
> 标签：url, reporting-services, ssrs-2008, localhost, globals

我在 SSRS 中使用了一个全局变量，但它返回了错误的值。

`Globals!ReportServerURL`应该返回实际的报表服务器 URL，但它返回“localhost”作为报表服务器 URL。

在`Globals!ReportServerURL`测试服务器上返回了正确的 URL 值，但是一旦我将它部署到生产服务器，它就开始返回`http://localhost:8090/`。

有人可以指导我如何解决这个问题吗？

提前致谢，

马旺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:06:18.413

我通过在服务器配置文件中添加以下内容解决了这个问题：

```
<UrlRoot>
     http://ServerName/ReportServerName
</UrlRoot> 
```

# mysql - mysql5 - 作为“root”不能创建数据库或做任何事情（访问被拒绝）

> ID：10130296
> 
> 赞同：20
> 
> 时间：2012-04-12T19:19:27.070
> 
> 标签：mysql, macos, osx-lion, macports, mysql5

我在 Mac OS X Lion 上，刚刚使用 MacPorts 安装了 mysql5。

然后我成功运行：

```
sudo /opt/local/lib/mysql5/bin/mysql_install_db --user=mysql 
```

我可以启动服务器并以“root”身份连接，但我无法创建任何数据库。

```
$ mysql5 -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.1.61 Source distribution

mysql> create database dbname;
ERROR 1044 (42000): Access denied for user 'root'@'localhost' to database 'dbname' 
```

我已经做了很多谷歌搜索试图解决这个问题，似乎问题可能与 /opt/local/var/db/mysql5 的文件系统权限有关，但我尝试更改这些无济于事：

```
$ ls -l /opt/local/var/db/
total 0
drwxrwxrwx  8 _mysql  _mysql  272 Apr 12 11:55 mysql5 
```

我已经尝试过所有者是“_mysql”、“mysql”和“root:wheel”，但它们都没有改变。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-13T21:20:31.723

已修复——mysql 创建了我没有权限的“root”帐户（我是 mysql 新手）。

我通过启动mysql解决了

```
--skip-grant-tables 
```

然后启动：

```
mysql5 
```

并运行：

```
mysql> UPDATE mysql.user SET Grant_priv='Y', Super_priv='Y' WHERE User='root';
mysql> FLUSH PRIVILEGES;
mysql> GRANT ALL ON *.* TO 'root'@'localhost'; 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-06T18:55:01.273

我知道这是一个老问题，但我在运行 Catalina 的新 Macbook 上遇到了这个问题。我正在进行的项目需要我运行旧版本的 MySQL (5.7)，所以我通过 Homebrew 安装它并遇到了同样的问题；`root`即使作为用户，也无法做几乎所有事情。

重新启动我的机器解决了这个问题，我一直在等待我的整个 Stack Overflow 职业生涯来发布这个作为答案，所以这里是：

**将其关闭并重新打开**

# excel - 我们如何知道 VBA 中按钮的发送者？

> ID：10130300
> 
> 赞同：0
> 
> 时间：2012-04-12T19:19:47.067
> 
> 标签：excel, vba, events

我想找出**许多按钮**的**发件人**。

 ****在C#**中类似的东西：

```
Button b = new Button();
b.Text = "Click 1";
b.Location = new Point(20, 20);
b.Size = new Size(100, 20);
// Our Handler
b.Click += new EventHandler(myClick);

// Implementation of next button...

// Add to form
this.Controls.Add(b);
this.Controls.Add(nextButton);
...

// And our event
private void myClick(object sender, System.EventArgs e)
{
   var mysender = ((Button)sender).Name;
   doAnything(mysender);
} 
```

可以在 VBA *（Visual Basic for Applications）中使用*吗？我正在使用 Excel。我试过**Application.Caller**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T20:07:37.923

您必须连接按钮事件。您可以在 Worksheet Activate 事件处理程序中执行此操作：

```
Dim arrEvents As Collection

Private Sub Worksheet_Activate()

Dim objButtonEvents As ButtonEvents
Dim shp As Shape

Set arrEvents = New Collection

For Each shpCursor In Me.Shapes
    If shpCursor.Type = msoOLEControlObject Then
        If TypeOf shpCursor.OLEFormat.Object.Object Is MSForms.CommandButton Then
            Set objButtonEvents = New ButtonEvents
            Set objButtonEvents.cmdButton = shpCursor.OLEFormat.Object.Object
            arrEvents.Add objButtonEvents
        End If
    End If
 Next

End Sub 
```

然后使用以下代码创建一个名为 ButtonEvents 的类模块：

```
Public WithEvents cmdButton As MSForms.CommandButton

Private Sub cmdButton_Click()
 MsgBox cmdButton.Caption & " was pressed!"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T17:55:46.663

将您的 Shapes.Name 值重命名为您可以根据需要使用的名称。

当您在 Excel 中创建一组形状时，比如说矩形，右键单击第一个对象，然后转到“公式”选项卡并单击“定义名称”。在弹出窗口的底部会有一行： 指 [ ="Rectangle 73" ] 这是您的 VBA Shapes.Name 值。（在这里做任何事情都不会改变 VBA Shapes.Name 的值）

您可以使用单个对象名称，`IF Application.Caller.Name = "Rectangle 73"`也可以将 VBA 中的形状重命名为更有用的名称。

如果您手动创建每个形状，它们将是“矩形 73”、“矩形 74”、“矩形 75”……如果您复制并粘贴，它们将是“矩形 73”、“矩形 102”、“矩形 103” ... 现在我们有了 Shapes.Name 值，我们可以根据需要在 VBA 中重新定义它们。

```
Sub nameShapes()
    Dim shp As String
    Dim shpType As String
    Dim myName As String

'original root name of group shapes *do not include trailing space*
    shpType = "Rectangle"

'new name of group shapes
    myName = "newName"

'first number value of new shape names
    n = 1

'number values of first, second, and last shapes
    n1 = 73
    n2 = 103
    nx = 124

'active code --------------------------------------
'--------------------------------------------------
    shp = shpType & " " & n1
    ActiveSheet.Shapes(shp).Name = myName & " " & n

    For x = n2 To nx
        n = n + 1
        shp = shpType & " " & x
        ActiveSheet.Shapes(shp).Name = myName & " " & n
    Next n
'--------------------------------------------------
'active code --------------------------------------
End Sub 
```

将此代码放在其自己的单独模块中，然后只需输入值并单击 RunSub 的 VBA 窗口工具栏中的播放按钮。

现在，您可以使用`n = Right(Application.Caller, 2)`来获取单击按钮的数值。一定要定义`Dim n As Integer`.

如果不同的按钮组调用相同的函数，您可以使用`Select Case Left(Application.Caller, 7)`获取 shape.name 的前 7 个字母以及`Case "newName"`特定于该按钮组的操作。**

# sql - 检查 2 个 sql 列并在 1 列 pt2 中显示结果

> ID：10130318
> 
> 赞同：0
> 
> 时间：2012-04-12T19:21:43.740
> 
> 标签：sql, logic, case

我有 2 个表......它们基本上是相同的，除了其中一个中的列名，因为它们处理 2 个不同的名称，但是......我想要的数据在具有相同名称的列中。几乎我想要做的是......它们也需要是不同的，所以我不计算重复......我可以将它们作为单独的表......但我不能把它们放在一起......我需要它们在 1 列中，因为它是如何被发送到 C3 代码页以及它是如何读取它的……结构之前已经设置好了……并且在这样的一个存储过程中正在执行大约 5 条其他语句（我也不是设置这个的人）。所以如果这是可能的..请让我知道..如果您想看到真实的代码，我也会粘贴我的确切代码..我只是试图简化它以使其更容易理解。一世'

图 1 是当前设置的内容：

![http://imgur.com/h0rNU](../Images/98c78af320004618398fcc43c68bb17c.png)

顶部是存储在表中的内容。底部是更多的结果，它基本上运行此代码以获取底部

```
DECLARE @id INT;
DECLARE @invest nvarchar(50);
SET @id = '7633';
SET @invest = '';

SELECT 'a' + CONVERT(nvarchar, orderfindings.risk_rating) AS cat, COUNT(DISTINCT orderfindings.prnt_id) AS stat
    FROM orderheader, orderaudits, orderfindings
    WHERE orderheader.id = orderaudits.orderheader_id AND orderaudits.ID = orderfindings.prnt_id
    AND orderheader.id = @id AND orderfindings.risk_rating > 0 AND orderaudits.Investor_Name LIKE '%' + @invest + '%'
    GROUP BY orderfindings.risk_rating 
```

如果我想要机构而不是调查结果..只需替换它..机构和调查结果是两张表..它们在列方面几乎相同...但我希望将结果放在一起..我尝试了几种方法..但我似乎无法得到它图像 2-底部的表格是我正在寻找的更多..它将它们组合成 1：

![http://imgur.com/a4qXW](../Images/2c94c01f981ab6251c9e706d78faab31.png)

如果订单中有发现或机构或两者兼而有之..那么它被标记为该风险等级的 1...如果它没有..那么该风险等级为 0..然后将它们加起来看看我得到了什么.. 任何帮助表示赞赏.. 如果你不明白，我会澄清我能做的；

编辑：
我一直在使用它..这个[http://pastebin.com/117Z2TVh](http://pastebin.com/117Z2TVh) ..让它显示2列..但仍然不是正确的结果...我得到a1 = 1。 ..a2 = 1 ......所以它没有运行所有订单......或者它需要一种方法来计算它......我在case语句的开头加上了一个总和......因为计数而出错......所以我计算出来...并没有真正起作用..有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:37:53.953

您是否尝试过使用 UNION 子句？

如果您不熟悉：http: [//msdn.microsoft.com/en-us/library/ms180026.aspx](http://msdn.microsoft.com/en-us/library/ms180026.aspx)

基本上，您编写两个查询，返回 UNION 任一侧有问题的两列之一，并将它们作为最终结果集中的一列返回。如果列名不同，则在任一侧为它们别名，以便它们可以组合在最终的联合结果集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:15:24.747

; 发现 AS (select oa.id, oa.Risk_Rating, COUNT (orf.Prnt_ID) Findingcount FROM orderaudits oa LEFT JOIN orderfindings orf on oa.ID = orf.Prnt_ID --WHERE oa.risk_rating > 0 and oa.Investor_Name like ' %' + @invest + '%' GROUP BY oa.id, oa.Risk_Rating), Agency AS (select oa.id, oa.Risk_Rating, COUNT (ora.Prnt_ID) Agencycount FROM orderaudits oa LEFT JOIN orderagencies or on oa.ID = ora.Prnt_ID --WHERE oa.risk_rating > 0 and oa.Investor_Name like '%' + @invest + '%' GROUP BY oa.id, oa.Risk_Rating) /* SELECT 'Finding Only', oa.Risk_Rating, COUNT (oa.id) as a, SUM(CASE WHEN f.findingcount >0 then 1 ELSE 0 END ) as b FROM orderaudits oa LEFT JOIN find f ON oa.id = f.id LEFT JOIN orderheader oh ON oh.id = oa.orderheader_id WHERE oh.id = @id and oa.risk_rating > 0 and oa.Investor_Name like '%' + @invest + '%' GROUP BY oa.Risk_Rating

联合所有

SELECT 'Agency Only', oa.Risk_Rating, COUNT(oa.id) as a, SUM(CASE WHEN a.agencycount > 0 then 1 ELSE 0 END ) as b FROM orderaudits oa LEFT JOIN Agency a ON oa.id = a。 id LEFT JOIN orderheader oh ON oh.id = oa.orderheader_id WHERE oh.id = @id and oa.risk_rating > 0 and oa.Investor_Name like '%' + @invest + '%' GROUP BY oa.Risk_Rating

UNION ALL */ --Together SELECT 'aa' + convert(nvarchar, oa.risk_rating) as cat, SUM(CASE WHEN f.findingcount > 0 OR a.agencycount > 0 then 1 ELSE 0 END ) as b FROM orderaudits oa LEFT JOIN find f ON oa.id = f.id LEFT JOIN Agency a ON oa.id = a.id LEFT JOIN orderheader oh ON oh.id = oa.orderheader_id WHERE oh.id = @id and oa.risk_rating > 0 and oa .Investor_Name like '%' + @invest + '%' GROUP BY oa.Risk_Rating

# javascript - 如何在函数中使用 JavaScript 哈希作为参数？

> ID：10130319
> 
> 赞同：2
> 
> 时间：2012-04-12T19:21:46.463
> 
> 标签：javascript, hash

JS 纽布在这里。

我正在使用一个函数，该函数的文档说“函数的参数必须是 JavaScript 哈希，其中键是要过滤的（数据库）字段，值是字符串或数组弦”。

对我有用的例子：

```
//New York Knicks fan....
viz.filter({CitiesILoathe: ['Boston']});
viz.filter({CitiesILoathe: ['Boston','Miami']}); 
```

这些片段中的任何一个都对我有用，在 filter() 完成后从我看到的内容中删除了所述城市。

现在我想直接传入我之前创建/填充的哈希值。

想不通怎么弄。

我试过了：

```
var CitiesILoathe= new Object(); //my "hash"
CitiesILoathe['Boston'] = 1;
CitiesILoathe['Miami'] = 2;
viz.filter({CitiesILoathe}); // also tried same thing w/o curly braces 
```

......但没有快乐。我一直在搜索文档，但此时我的 JavaScript 词汇量/智力很低，我真的不知道我在寻找什么。

谁能给我推动正确的方向？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:30:44.887

```
//inline declaration
var CitiesILoath = {
    "CitiesILoath": [
        "Boston"
        ,"Miami"
    ]
}
viz.filter(CitiesILoath)

//ad-hoc
var myFilter = {}; //same as "new Object()"
myFilter["CitiesILoath"] = []; //same as "new Array()"
myFilter["CitiesILoath"].push("Boston"); //append to array
myFilter["CitiesILoath"].push("Miami"); //append to array

//or, use decimal notation
var myFilter = {}; //same as "new Object()"
myFilter.CitiesILoath = []; //same as "new Array()"
myFilter.CitiesILoath.push("Bostom"); //append to array
myFilter.CitiesILoath.push("Miami"); //append to array
viz.filter(myFilter)
```

“哈希”是对象本身。“键”是字段，在本例中是“CitiesILoath”，这些键的值是一个数组，用字符串填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:25:33.623

```
var x= { "CitiesILoathe" : [
    "Boston",
    "Miami"
] };
viz.filter(x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:27:27.690

你想要一个对象（它的名字无关紧要，所以我称它为 x），它有一个名为`CitiesILoathe`. 该属性是一个数组，因此您可以使用[push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)添加到它：

```
var x = {CitiesILoathe: []};
x.CitiesILoathe.push('Boston');
x.CitiesILoathe.push('Miami');
viz.filter(x); 
```

你也可以这样做：

```
var CitiesILoathe = [];
CitiesILoathe.push('Boston');
CitiesILoathe.push('Miami');
viz.filter({CitiesILoathe: CitiesILoathe}); 
```

# wordpress - Wordpress WP_Query 无限循环

> ID：10130322
> 
> 赞同：1
> 
> 时间：2012-04-12T19:21:53.220
> 
> 标签：wordpress, custom-post-type

我想要做的是获取自定义帖子类型中所有帖子的 ID。我正在使用这段代码，但它似乎陷入了无限循环。

```
$query = new WP_Query(array('post_type' => 'rdv-events', 'posts_per_page' => -1));

while ($query->have_posts()) {
    $values = get_post_custom();
    print_r($values);
}

wp_reset_postdata(); 
```

人们在网站上放置一个简码，然后我想用它来循环一些事件，然后回显然后输出。也许不重要，但值得一提:)

谁能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T20:37:40.727

你错过了

```
$query->the_post(); 
```

把它放在while循环的首位。

# jqgrid - 有没有办法恢复以前版本的jqGrid的一些功能？

> ID：10130323
> 
> 赞同：0
> 
> 时间：2012-04-12T19:21:53.780
> 
> 标签：jqgrid

我们最近将 jqgrid 从 3.8.2 更新到 4.3.1，因为我们希望能够使用搜索模板并确保我们有所有可用的错误修复。但是，有两件事发生了变化，我想看看我是否可以让新版本的行为像以前的版本一样。

我们使用了高级搜索，并将我们的站点配置为始终显示固定在网格上方的搜索对话框。

1.  在以前的版本中，我们可以通过选择现有过滤器旁边的加号按钮来添加新过滤器。使用此 + 按钮将导致新创建的过滤器具有与现有过滤器相同的选项。

![旧搜索](../Images/c203c030742153f5b2d3255f1595acba.png)

![新搜索](../Images/c9ecac54cae2900cd6bc141111d344b0.png)

2.  在以前的版本中，我无法从搜索框中删除所有过滤器。当框中只有一个过滤器时单击删除没有任何作用。我需要一种方法来防止用户删除最后一个过滤器控件。

![已删除所有过滤器](../Images/21566d9367d0c3813a0b4721716db797.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:49:37.440

您一起发布了**两个单独的问题**。其他用户很难找到信息。最好将当前问题一分为二。

不过，关于您问题的第一部分，我只想描述旧搜索对话框的行为是因为使用了[jQuery.clone](http://api.jquery.com/clone/)。该功能有许多错误，长期以来没有修复。所以搜索对话框在某些情况下会出错。在搜索对话框的新实现中，没有明确使用[jQuery.clone](http://api.jquery.com/clone/)作为解决问题的唯一安全方法。您在新版本的搜索对话框中遗漏的行为**默认**实现。在新的搜索对话框中，相应的代码不存在，但您可以自己编写。大多数情况下，您需要在[afterRedraw](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)回调中编写自定义代码。

您应该考虑到 jqGrid 支持现在强大的`multipleGroup: true`选项。因此，您需要的可能是从*同一组的另一个控件中*复制选择：

![在此处输入图像描述](../Images/8d3f22b11be8c5d21c640bdb52e8e874.png)

关于你的第二个问题：

[答案](https://stackoverflow.com/a/6117351/315935)包含描述解除绑定想法[的演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithAdvSearching2.htm)`click`。只有当它是唯一的按钮时，最好的事件可能是取消绑定或隐藏“删除规则”按钮。

如果您不使用`multipleGroup: true`选项，您可以尝试以下操作

```
$.extend($.jgrid.search, {
    multipleSearch: true,
    overlay: 0,
    afterRedraw: function () {
        // don't permit to remove the last rule
        $('input.delete-rule:first',this).unbind('click').hide();
    }
}); 
```

在使用`multipleGroup: true`的情况下，更好的可能是另一个代码

```
$.extend($.jgrid.search, {
    multipleSearch: true,
    multipleGroup: true,
    overlay: 0,
    afterRedraw: function () {
        // don't permit to remove the last rule
        var $delRules = $('input.delete-rule', this);
        if ($delRules.length === 1) {
            $delRules.unbind('click').hide();
        }
    }
}); 
```

# security - 使用哈希验证用户密码？

> ID：10130325
> 
> 赞同：3
> 
> 时间：2012-04-12T19:22:00.160
> 
> 标签：security, winapi, hash, credentials, kerberos

我知道可以使用以下方式以编程方式验证用户的 Windows（例如域）凭据：

*   [`LogonUser(username, password)`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)
*   [来自 .NET ValidateCredentials（用户名、密码）](https://stackoverflow.com/a/327073/12597)
*   [或直接使用 SSPI API](https://stackoverflow.com/questions/9788318/what-targetname-to-use-when-calling-initializesecuritycontext-negotiate)

有一段时间我想坚持这些凭据。

我正在使用[数据保护 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)（通过[CredUI API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375187%28v=vs.85%29.aspx)）来加密密码。这意味着加密数据只能由用户自己访问。我的程序以用户身份运行，然后可以解密受保护的数据。

但这也意味着以用户身份运行的**恶意**程序可以解密受保护的数据；窃取用户的加密凭据。

我知道 Windows 本身不存储用户的`password`. 他们存储的是密码的加盐和散列版本；并形成用户和 Windows 之间的*“共享机密” 。*

*当我知道密码的加盐哈希*时，是否有一个 API 可以让我询问 Windows 用户的密码是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T01:07:15.313

您真的不想存储 Windows 密码散列，因为如前所述，如果存在域控制器，散列可用于模拟用户。实际上，知道 Kerberos 中的实际密钥与知道攻击者的密码一样糟糕。相反，你应该做的是用不同于 Windows 使用和存储的盐对密码进行加盐。我建议寻找像 PBKDF2 这样的良好密码哈希的实现并使用它。请参阅[Wikipedia 的](http://en.wikipedia.org/wiki/PBKDF2#Implementations)实现列表。有关 Kerberos 对密码进行加盐处理的信息，请参阅[RFC 3962](https://www.rfc-editor.org/rfc/rfc3962)。Windows 将该进程用于 AES，并为 NTLM 和 RC4 Kerberos 使用不同的进程。

我有理由确定没有公开 API 来比较 Kerberos 加盐密码。我对 NTLM API 不太熟悉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:00:05.740

如果您有域控制器，您可以使用 kerberos 协议并发送从密码派生的密钥以验证用户身份。不幸的是，尽管恶意程序无法从密钥中获取原始密码，但它仍然可以使用您的哈希值并使用它代表用户获取域凭据。

看这里找出如何从密码中派生密钥

[http://www.opensource.apple.com/source/Heimdal/Heimdal-172.18/kuser/kinit.c](http://www.opensource.apple.com/source/Heimdal/Heimdal-172.18/kuser/kinit.c)

顺便说一句，Kerberos 不使用密码的普通加盐哈希。实际的密钥生成函数涉及更多，这是因为密码本身没有足够的熵来创建不可猜测的密钥。请记住，kerberos 应该能够抵御窃听攻击。

# asp.net - asp.net noob jquery + runat="server" vs 用所有选项声明表单

> ID：10130328
> 
> 赞同：0
> 
> 时间：2012-04-12T19:22:10.130
> 
> 标签：asp.net

我有一个表格，当我这样输入时：

```
<form name="formLogin" id="formLogin" action="index.aspx" method="post"> 
```

我的 javascript 工作正常，网页的源代码与上面列出的相同。

当我这样输入时：

```
<form name="formLogin" id="formLogin" runat="server"> 
```

我的页面崩溃了。我基本上正在使用第三方模板并尝试将其转换为 asp.net。

显示的源代码是这样的：

```
<form id="formLogin" action="index.aspx" method="post"> 
```

似乎当我使用该`runat="server"`选项时，它会重新创建没有名称的表单元素？我必须在 .net 上使用`runtat="server"`if 并且想要处理 Jquery 和服务器端验证吗？

如果我不包含`runat="Server"`?

```
 $(document).ready(function () {     
            onfocus();
            $(".on_off_checkbox").iphoneStyle();
            $('.tip a ').tipsy({gravity: 'sw'});
            $('#login').show().animate({   opacity: 1 }, 2000);
            $('.logo').show().animate({   opacity: 1,top: '30%'}, 800,function(){           
                $('.logo').show().delay(1200).animate({   opacity: 1,top: '0%' }, 300,function(){
                    $('.formLogin').animate({   opacity: 1,left: '0' }, 300);
                    $('.userbox').animate({ opacity: 0 }, 200).hide();
                 });        
            })  
        }); 

        $('.userload').click(function(e){
            $('.formLogin').animate({   opacity: 1,left: '0' }, 300);               
              $('.userbox').animate({ opacity: 0 }, 200,function(){
                  $('.userbox').hide();             
               });
        });

    $('#but_login').click(function(e){              
          if(document.formLogin.username.value == "" || document.formLogin.password.value == "") // BREAKS HERE
          {
              showError("Please Input Username / Password");
              $('.inner').jrumble({ x: 4,y: 0,rotation: 0 });   
              $('.inner').trigger('startRumble');
              setTimeout('$(".inner").trigger("stopRumble")',500);
              setTimeout('hideTop()',5000);
              return false;
          }     
         hideTop();
         loading('Checking',1);     
         setTimeout( "unloading()", 2000 );
         setTimeout( "Login()", 2500 );
    }); 

function Login(){
    $("#login").animate({   opacity: 1,top: '49%' }, 200,function(){
         $('.userbox').show().animate({ opacity: 1 }, 500);
            $("#login").animate({   opacity: 0,top: '60%' }, 500,function(){
                $(this).fadeOut(200,function(){
                  $(".text_success").slideDown();
                  $("#successLogin").animate({opacity: 1,height: "200px"},500);                  
                });                           
             }) 
     }) 
    setTimeout( "window.location.href='dashboard.html'", 3000 );
}

$('#alertMessage').click(function(){
    hideTop();
});

function showError(str){
    $('#alertMessage').addClass('error').html(str).stop(true,true).show().animate({ opacity: 1,right: '0'}, 500);   

}

function showSuccess(str){
    $('#alertMessage').removeClass('error').html(str).stop(true,true).show().animate({ opacity: 1,right: '0'}, 500);    
}

function onfocus(){
                if($(window).width()>480) {                   
                        $('.tip input').tipsy({ trigger: 'focus', gravity: 'w' ,live: true});
                }else{
                      $('.tip input').tipsy("hide");
                }
}

function hideTop(){
    $('#alertMessage').animate({ opacity: 0,right: '-20'}, 500,function(){ $(this).hide(); });  
}   

function loading(name,overlay) {  
      $('body').append('<div id="overlay"></div><div id="preloader">'+name+'..</div>');
              if(overlay==1){
                $('#overlay').css('opacity',0.1).fadeIn(function(){  $('#preloader').fadeIn();  });
                return  false;
         }
      $('#preloader').fadeIn();   
 }

 function unloading() {  
        $('#preloader').fadeOut('fast',function(){ $('#overlay').fadeOut(); });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:25:16.683

如果您不`runat=Server`这样做，您将无法访问实际表单/任何未在代码后面（服务器端）中标记 runat=server 的控件。请发布您的 jquery 代码，如果我看到一些奇怪的东西，我可以编辑这个答案。

使用`$("#username").val().length`和 相同的密码来查看名称/密码是否存在。您混合了 js 和 jquery，这使得找到罪魁祸首变得更加困难。

`if($("#username").val().length == 0 && $("#password").val().length == 0)`

```
 //enter here if one is missing 
```

# java - Hibernate/jpa 多对多

> ID：10130330
> 
> 赞同：0
> 
> 时间：2012-04-12T19:22:14.857
> 
> 标签：java, spring, hibernate, jpa

我有 2 桌比萨饼和配料，

```
 class pizza{
...
    @ManyToMany(targetEntity = com.pizzastudyds.db.bean.Topping.class, fetch = FetchType.EAGER)
        @JoinTable(name = "PIZZATOPPING", joinColumns = @JoinColumn(name = "PIZZAID"), inverseJoinColumns = @JoinColumn(name = "TOPPINGID"))
        public Set<Topping> getToppings() {
            return toppings;
        }
...
    } 

class toppings{
@ManyToMany(mappedBy = "toppings", targetEntity = com.pizzastudyds.db.bean.Pizza.class)
    public Set<Pizza> getPizzas() {
        return pizzas;
    }
} 
```

当我为披萨定义浇头时，这两个类有多对多的关系。然后尝试删除我可以这样做的比萨，但是当我删除顶部对象时，以及顶部和比萨之间是否存在关系。那么我无法删除顶部并获得约束违规的异常。

无论关系如何，我都想分别删除披萨和浇头；我想更新连接表以及从双方删除。我怎样才能做到这一点？

实际上我想要的是分别删除比萨饼和浇头，即；就像我删除披萨一样，当我删除顶部时，它会被删除并更新连接表，它会被删除，更新连接表中的关系。我并不是说如果我删除了浇头，披萨就会被删除，或者反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:04:26.150

```
@Cascade(org.hibernate.annotations.CascadeType.DELETE_ORPHAN) 
```

在两边加上这个。我希望这能解决你的问题。

# ruby-on-rails - 当前的 NGINX 是否对上传大文件有某种缓冲区支持？

> ID：10130331
> 
> 赞同：2
> 
> 时间：2012-04-12T19:22:20.267
> 
> 标签：ruby-on-rails, nginx

我正在编写一个可以上传大文件的 ruby​​ on rails 应用程序。(20-100MB)。我已经研究了在不捆绑 Rails 进程的情况下做到这一点的方法。我遇到了一个专门执行此操作的 nginx 模块。(http://www.grid.net.ru/nginx/upload.en.html)

但是，在我看来，在查看日志和我的服务器时，在上传大文件时，它似乎在发送到我的 rails 进程之前缓冲了..即使没有安装 nginx 模块上传模块。

然后我的问题是：似乎nginx默认安装是这样做的......我还需要安装和使用上传模块吗？这里到底发生了什么？

~柯克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:54:15.367

nginx 总是在打开与上游的连接之前缓冲请求主体。我相信本机行为与您找到的模块之间的区别在于，使用本机行为，文件内容将通过连接发送到后端，而上传模块仅将文件名发送到后端，减少了数据量通过套接字发送，仅当 nginx 和后端在同一台机器上时才有效。

# visual-studio-2010 - 无法使用 NuGet 安装包 - 500 内部服务器错误

> ID：10130333
> 
> 赞同：5
> 
> 时间：2012-04-12T19:22:24.863
> 
> 标签：visual-studio-2010, nuget

这对我来说毫无意义。NuGet 之前工作正常，但现在当我尝试安装软件包时它会引发服务器错误。我已经卸载并重新安装了最新的 NuGet，但仍然没有运气。

```
PM> Install-Package EntityFramework
Install-Package : The remote server returned an error: (500) Internal Server Error.
At line:1 char:16
+ Install-Package <<<<  EntityFramework
    + CategoryInfo          : NotSpecified: (:) [Install-Package], WebException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

有没有人见过这样的事情？谢谢。

我指的`https://nuget.org/api/v2/`是似乎是现场直播的...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:53:09.800

也发生在我身上。

试试这个：

1.  以管理员模式运行 VS。
2.  从 Tools->Extension Manager 卸载 NuGet（VS 2015 中的扩展和更新）
3.  删除所有简称`%AppData%\NuGet`或全名`C:\Users\[YourUsername]\AppData\Roaming\NuGet`
4.  重新安装 NuGet

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:51:50.990

来自 Twitter 上的 NuGetTeam (@nuget) [https://twitter.com/#!/nuget](https://twitter.com/#!/nuget)

> 我们正在调查 NuGet 库服务器上的问题。我们将很快提供更新。我们对不便表示抱歉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:50:23.180

重试，它现在在这里工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T16:26:28.167

Visual Studio 有时会出现此错误。尝试重新启动您的视觉工作室（我有 2019）。如果仍然无法修复，请修复您的 VS 安装。**这当然是为未来的观众准备的，因为我也遇到了这个问题，并通过重新启动 VS 来解决**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T11:10:24.617

在新的 Visual Studio 2017 社区中遇到了类似的问题。关闭任务（结束挂起任务）并使用管理员权限重新启动 Visual Studio 解决了该问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-13T10:05:51.643

如果您在本地 Nuget 源上收到此 HTTP 500 服务器错误，请访问网站（例如 http://mynugetsource/nuget/Packages）以获取有关该错误的更多信息。

就我而言，一个 .nupkg 文件是在某人的计算机上打开的。关闭文件解决了这个问题。

# c++ - 我的论点被破坏了？

> ID：10130337
> 
> 赞同：0
> 
> 时间：2012-04-12T19:23:01.120
> 
> 标签：c++, corruption

哇，我真的完全不知道这里到底发生了什么。这真的让我大吃一惊。我有这种方法，我正在尝试开始工作（这里的东西似乎随机中断而没有改变），我注释掉了部分，所以我可以让它至少工作。

```
Font* ResourceLoader::getFont(const std::string &name, int size) {
size = size;
//for(std::list<std::string>::iterator itr = mPaths.begin(); itr != mPaths.end(); itr++) {
    //if(fileExists((*itr)+name)) {
        std::string filename(name);
        TTF_Font *font = TTF_OpenFont(filename.c_str(), size);
        TTF_SetFontHinting(font, TTF_HINTING_MONO);
        std::string err = std::string(TTF_GetError());

        Font* result = new Font(font);

        return result;
    //}
//}

return NULL;
} 
```

我的问题是“大小”参数正在通过该方法损坏。这是它的样子

![在此处输入图像描述](../Images/4af24c09b8d3b663dbc92497ac99b618.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:28:50.887

关闭编译器优化，看看这是否仍然发生。

我的猜测是`size`编译器优化了参数存储，因为它没有在函数中使用，因此调试器向您显示垃圾数据。

您可以尝试查看是否正在发生的其他事情是`size`在每行之后打印出函数中的参数

```
std::cout << "size at line " << __LINE__ << ": " << size << std::endl; 
```

我敢打赌 的价值`size`将停止变化。

PS。我刚刚注意到您确实`size`在其中一个函数调用中使用了。无论如何尝试打印出它的值。另外，为什么`size = size;`在函数顶部有语句？你想用它来完成什么？

聚苯乙烯。为了解决您的访问冲突——确保`font`在尝试在下游使用它之前检查它的值。

# java - HTML 帮助在结果集中显示多行

> ID：10130338
> 
> 赞同：0
> 
> 时间：2012-04-12T19:23:15.930
> 
> 标签：java, html

好的，我已经看了又看，哈哈，我遇到了问题。这是我的代码的最后一部分，显示演员的电影，我已经建立了一个 SQL 数据库，其中包含这些信息。虽然当我显示为网页时，我只看到每个演员一部电影，其中一些演员至少有三部任何建议或帮助？希望这不是愚蠢的大声笑我对此很陌生。

```
<h3><FONT COLOR="B22222">Filmography</FONT></h3>
<%
newaid = request.getParameter("selectedName");

String queryFilm = "SELECT * FROM artist, movies, artistmovie WHERE  artistmovie.mid = movies.mid AND artist.aid = artistmovie.aid AND artist.aid = '"; 
    queryFilm += request.getParameter("selectedName") + "';";

ResultSet rsFilm = stm.executeQuery(queryFilm);

while(rsFilm.next())
{
    title = rsFilm.getString("title");
    studio = rsFilm.getString("studio");
    rlsdate = rsFilm.getString("rlsdate");
    role = rsFilm.getString("role");
    oscar = rsFilm.getInt("oscar");
    }

    out.println("<tr><td>&nbsp;</td><td>" + title + "</td>");
    out.println("<td>&nbsp;&nbsp;&nbsp;</td><td>(" + studio + "</a></td>"); 
    out.println("<td></td><td>" + rlsdate + ")</td>");  
    out.println("<td>&nbsp;&nbsp;</td><td>" + role + "</td>");
if (oscar == 0)
{
    out.println("<td>&nbsp;</td><td><br /></td>");
}
else
{
    out.println("<td>&nbsp;</td><td>Won oscar</td></tr>");
}
%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:26:02.523

我的猜测是你在打印数据之前关闭了 while 语句。试试这个：

```
while(rsFilm.next())
{
    title = rsFilm.getString("title");
    studio = rsFilm.getString("studio");
    rlsdate = rsFilm.getString("rlsdate");
    role = rsFilm.getString("role");
    oscar = rsFilm.getInt("oscar");

    out.println("<tr><td>&nbsp;</td><td>" + title + "</td>");
    out.println("<td>&nbsp;&nbsp;&nbsp;</td><td>(" + studio + "</a></td>"); 
    out.println("<td></td><td>" + rlsdate + ")</td>");  
    out.println("<td>&nbsp;&nbsp;</td><td>" + role + "</td>");
} 
```

# r - 合并 NA 替换

> ID：10130339
> 
> 赞同：1
> 
> 时间：2012-04-12T19:23:18.943
> 
> 标签：r

我正在尝试将两个数据框合并到一个唯一的 ID 和年份。在 SQL 语言中，我试图做一个左外连接，所以在合并中是 all.x=TRUE。y 数据框的某些元素没有 x DF 中的所有值（唯一 id、年份组合）。在缺少匹配的情况下，我想合并 y 数据框中与 x 数据框中具有相同唯一 ID 的行，但使用丢失之前的第一年。有关如何处理此合并的任何建议？非常感谢！

*编辑*想让它更具体

数据框 x：

```
Id  year    var1 
1   2010    100
1   2011    105
1   2012    110
2   2010    100 
2   2011    105
2   2012    106 
```

数据框 y：

```
Id  year    var2    var3
1   2010    5       7
1   2011    10      8
2   2010    9       6 
```

期望的合并：

```
Id  year    var1    var2    var3
1   2010    100     5       7
1   2011    105     10      8
1   2012    110     10      8
2   2010    100     9       6
2   2011    105     9       6
2   2012    106     9       6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:57:59.503

我将分两步执行此操作：

```
> out <- merge(x, y, all.x=T)
> out
  Id year var1 var2 var3
1  1 2010  100    5    7
2  1 2011  105   10    8
3  1 2012  110   NA   NA
4  2 2010  100    9    6
5  2 2011  105   NA   NA
6  2 2012  106   NA   NA 
```

然后`na.locf`从`zoo`包中使用：

```
library(zoo)

> apply(out, 2, na.locf)
     Id year var1 var2 var3
[1,]  1 2010  100    5    7
[2,]  1 2011  105   10    8
[3,]  1 2012  110   10    8
[4,]  2 2010  100    9    6
[5,]  2 2011  105    9    6
[6,]  2 2012  106    9    6 
```

这可以很容易地强制转换为 data.frame 。

```
> as.data.frame(apply(out, 2, na.locf))
  Id year var1 var2 var3
1  1 2010  100    5    7
2  1 2011  105   10    8
3  1 2012  110   10    8
4  2 2010  100    9    6
5  2 2011  105    9    6
6  2 2012  106    9    6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:10:40.760

这不使用`merge`，而是一次循环遍历一行以`x`在 中找到适当的匹配项`y`。可能效率不高，但它有效。

```
do.call(rbind,
  lapply(seq(length=nrow(x)), function(r) {
    yid <- y[y$Id==x$Id[r],]
    yeardiff <- x$year[r] - yid$year
    yeardiff[yeardiff < 0] <- NA
    cbind(x[r,], yid[which.min(yeardiff),])
})) 
```

结果是

```
 Id year var1 Id year var2 var3
1  1 2010  100  1 2010    5    7
2  1 2011  105  1 2011   10    8
3  1 2012  110  1 2011   10    8
4  2 2010  100  2 2010    9    6
5  2 2011  105  2 2010    9    6
6  2 2012  106  2 2010    9    6 
```

# git - 去，去获取，去安装，本地包和版本控制

> ID：10130341
> 
> 赞同：68
> 
> 时间：2012-04-12T19:23:25.123
> 
> 标签：git, package, go

我无法理解创建具有本地包的 go 项目的工作流程。

假设我创建了一个新项目，使用 git 进行版本控制，它有一个 main.go 文件和一个 tools.go 文件，它们将在包 utils 中。所以我有一个这样的目录结构：

```
/myproject/
   main.go
   utils/
     tools.go 
```

main.go 看起来像这样：

```
package main
import "./utils"
func main() {
    utils.DoSomthing()
} 
```

和 tools.go 看起来像这样：

```
package utils;
func DoSomething() {
} 
```

*使用go build*和*go run*在本地一切正常。但这是托管在 github 上的，我希望能够让其他人使用*go get*命令来安装它。所以本地包导入必须改成使用“github.com/user/project/utils”的格式，这样才有效，除了现在我有两份源代码，真正的问题是那个带有git历史的副本有一个使用下载的副本的导入。因此，如果我正在处理带有 git 历史记录的副本，对 tools.go 所做的任何更改都不会被注意到，因为它将使用下载的副本。

所以我想知道是否有人可以解释在同一个项目中使用*go get*、版本控制和包导入的正确方法。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-13T14:05:19.863

我刚刚就如何使用新的[go 工具](http://golang.org/cmd/go/)和[github.com](http://github.com/)编写了一个简短的分步指南。您可能会发现它很有用：

**1\. 设置你的 GOPATH**

您可以将环境变量设置为`GOPATH`您喜欢的任何目录。如果你有更大的项目，为每个项目创建一个不同的 GOPATH 可能是个好主意。我会特别推荐这种方法用于部署，以便为项目 A 更新库不会破坏项目 B，这可能需要相同库的早期版本。

另请注意，您可以将 GOPATH 设置为由冒号分隔的目录列表。因此，您可能有一个包含所有常用包的 GOPATH，并为每个带有附加包或现有包的不同版本的项目单独的 GOPATH。

但是除非你同时处理许多不同的 Go 项目，否则本地只有一个 GOPATH 可能就足够了。所以，让我们创建一个：

```
mkdir $HOME/gopath 
```

然后你需要设置两个环境变量来告诉[go 工具](http://golang.org/cmd/go/)它可以在哪里找到现有的 Go 包以及它应该在哪里安装新的包。最好将以下两行添加到您的`~/.bashrc`or中`~/.profile`（并且不要忘记之后重新加载您的 .bashrc）。

```
export GOPATH="$HOME/gopath"
export PATH="$GOPATH/bin:$PATH" 
```

**2.新建项目**

如果你想创建一个新的 Go 项目，以后应该在[github.com](https://github.com/)上托管，你应该在`$GOPATH/src/github.com/myname/myproject`. 路径与 github.com 存储库的 URL 匹配很重要，因为 go 工具将遵循相同的约定。因此，让我们创建项目根目录并在那里初始化一个新的 git 存储库：

```
mkdir -p $GOPATH/src/github.com/myname/myproject
cd $GOPATH/src/github.com/myname/myproject
git init 
```

因为我不喜欢输入这么长的路径，所以我通常在我的主文件夹中为我当前正在处理的项目创建符号链接：

```
ln -s $GOPATH/src/github.com/myname/myproject ~/myproject 
```

**3\. 编写你的应用程序**

开始编码，不要忘记`git add`和`git commit`你的文件。另外，不要像`import "./utils"`子包那样使用相对导入。它们目前没有记录，根本不应该使用，因为它们不能与 go 工具一起使用。改用进口`github.com/myname/myproject/utils`。

**4\. 发布你的项目**

[在 github.com](https://github.com/repositories/new)创建一个新的存储库，上传您的 SSH 公钥（如果您之前没有这样做过）并将您的更改推送到远程存储库：

```
git remote add origin git@github.com:myname/myproject.git
git push origin master 
```

**5\. 继续你的项目**

如果您在 .bashrc 中设置了 GOPATH 并且在主文件夹中创建了指向项目的符号链接，则可以在`cd myproject/`此处键入和编辑一些文件。之后，您可以使用 提交更改`git commit -a`并将它们发送到[github.com](https://github.com/)通过执行`git push`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-12T20:32:14.317

您可能不想要源的两个副本。在[如何编写 Go 代码](http://golang.org/doc/code.html)之后，您应该有一个进行 Go 开发的路径，比如说“godev”，在它下面是一个“src”目录，在它下面是您的“github.com/user/project”和“github.com/user/project/utils”。（我同意，这似乎有点死板，但向我们解释的优点是无需制作文件。）放弃 myproject，这是您将要做的工作。

您至少将 GOPATH 设置为 godev，但您可能希望您的 GOPATH 以不属于您的外部包的路径开始。例如我使用的 GOPATH 是`<my place on the file system>/goext:<my place on the file system>/godev`.

你是对的，你在 main.go 中的导入现在应该是“github.com/user/project/utils.

不用担心 go get 或任何 go 命令会覆盖您的文件或弄乱版本控制。通过 GOPATH，他们可以看到你在哪里工作，并且知道版本控制是如何工作的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-05T05:19:20.150

如果您想将代码保存在本地版本存储库中，只需将您的代码放在 GOPATH 中。

GOPATH 接受多个路径。例如。在 Linux 上

```
GOPATH=$HOME/go:$HOME/prj/foo 
```

所以，你可以在 $HOME/go/src/...

参考：`go help gopath`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-07-19T02:03:40.707

很多人说应该使用绝对路径来构建项目结构和导入：

```
import "github.com/user/utils" 
```

但这可能会将您的项目限制在单个 repo (github) 内。我想改用相对路径：

```
 import "./utils" 
```

我还没有找到一种方法来做到这一点，我在这里提出一个问题： [如果 GO 项目包将托管在不同的 repos(github & sourceForge) 上，如何组织它](https://stackoverflow.com/questions/51413252/how-to-oraganize-go-project-packages-if-it-will-hosted-on-different-reposgithub)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-04-23T14:05:01.457

在不同的帖子和 Go 文档中寻找这个答案后，Go 1.11 发布了一种处理包的新方法，并且正在使用 Go Modules。

[在此处](https://blog.golang.org/using-go-modules)阅读有关 Go Modules 的整个系列文章。

Go Modules 还负责版本控制

# ios - 创建客户端/服务器 iOS 5 应用程序

> ID：10130346
> 
> 赞同：0
> 
> 时间：2012-04-12T19:23:46.103
> 
> 标签：ios, ios5

我正在为工作创建一个 iOS 5 应用程序，它将连接到我使用 PHP 和 MySQL 开发的 CRM。我了解应用程序如何从服务器接收数据背后的大部分理论，它将调用一个网页，该网页将连接到数据库并通过 JSON 或 XML 返回数据。据我了解，大多数人都喜欢 JSON，现在看来 iOS5 现在支持 JSON，所以我可能会使用它。此应用程序上 99% 的数据将从服务器检索。

开发此应用程序时我应该寻找什么？这将是我的第一个应用程序，我相信我会从中获得很多学习经验。

是否有任何在线教程/播客/视频专门处理我正在尝试构建的内容？视频肯定会有很大帮助。更喜欢处理 iOS5 的更新的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:42:58.043

如果你不想深入研究 NSURLConnection，你可以使用一个简单有效的库 AFNetworking [https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

它让您可以发出任何类型的请求、解析响应和失败。真的很容易使用。

但是，您可以尝试进入 NSURLConnection。然后你会看到你的每一行代码）在苹果的文档 [http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html中有很好的讨论](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

# mysql - 使用 str_to_date 将 varchar 转换为日期

> ID：10130350
> 
> 赞同：0
> 
> 时间：2012-04-12T19:23:57.367
> 
> 标签：mysql, date

我正在尝试转换正在导入到我的数据库中的表（csv）中的列中的 varchar 值。现在我事先没有任何关于 csv 文件中日期可能具有的格式的信息。我需要检查列中的所有值，如果有效，将这些列转换为 mysql 的 DATE 数据类型。问题是如果我使用 str_to_date 并且日期格式不同，则存储过程会引发错误并停止执行。我需要一种方法来忽略该错误，以便存储过程可以完成其迭代。

我还计划使用结果值来验证内容是否是有效日期？有没有更好的方法来做到这一点？请记住，我没有关于原始数据可能具有的日期格式的信息。

例如，日期可能是“2011 年 4 月 11 日”、“20110102”、“01-05-2011”等。我需要支持一些 4-5 种格式。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:49:09.240

由于您事先不知道日期的格式，因此您可以使用 处理所有内容`preg_match`，例如：

```
$regex = '<matches for dates>';
if (preg_match($regex, $stringToCheck)) {
    str_to_date($stringToCheck);
} else {
} 
```

我不知道您将如何处理未知案例而不为它们创建多个案例。PHP 怎么知道格式是 mm/dd/yy 还是 dd/mm/yy？

# facebook - Facebook 页面选项卡未接收“页面”参数

> ID：10130351
> 
> 赞同：1
> 
> 时间：2012-04-12T19:24:02.423
> 
> 标签：facebook, facebook-graph-api, facebook-canvas

我有一个 Facebook 应用程序，旨在在*Page Tab*中运行。但是，当我加载选项卡时，它似乎更像是一个画布页面。也就是说，**我不是在发送到页面中的`page`参数`signed_request`**被发送。

访问选项卡时， http: [//facebook.com/page/app_APP_ID](http://facebook.com/page/app_APP_ID)并打印`signed_request`我得到的所有数据：

```
[algorithm] => HMAC-SHA256
[code] => BASE 64 Encoded Jumble
[issued_at] => 1334257763
[user_id] => 1073670219 
```

但是，我没有收到[Facebook Docs 所说](https://developers.facebook.com/docs/appsonfacebook/pagetabs/#integrating)`page`的我应该收到的参数。

*我需要知道页面的 ID 才能显示特定于该页面的内容。我没有收到它有什么原因吗？*

# java - 无参数构造函数是否被认为是 OOP 中的最佳实践

> ID：10130352
> 
> 赞同：1
> 
> 时间：2012-04-12T19:24:02.653
> 
> 标签：java, oop

在设计一个类时，我应该努力使构造函数无参数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T19:27:27.663

**没有**。您可以拥有任意数量的构造函数，并且不一定需要默认构造函数。**您的构造函数应该对类的目的有意义**，这是唯一的最佳实践。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:27:59.677

对此有不同的想法。JavaBeans 模式需要一个默认的构造函数和getter 和setter 来完成一个对象。但是，这会导致实例处于不确定状态（有关此内容的更多信息，请参阅 Josh Bloch 的 Effective Java）。

构造函数参数可以防止任何形式的“魔法”，因为您需要提供所需的实例来创建类的实例（也称为依赖注入）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:28:21.760

答案既不是是也不是：这取决于。

通常，参数化构造函数用于初始化具有不可变 ( `final`) 值的对象。我首先想到的是下面的例子。

```
public class Car {
     public Car(String chassisCode) {...}

     public String getChassisCode();

     public String getLicenseNumber() {...}
     public void setLicenseNumber(String value) {...}
} 
```

由于车牌注册号在汽车的生命周期中可能会发生变化，因此可以将其实现为获取/设置属性。相反，底盘注册码对于每辆车都是唯一的并且是**不可变**的。汽车可以随时更改其车牌，但底盘号是不可变的，并且在任何时候车牌或车主更改时都会在文档中注册。

在其他情况下，您可能需要一个“默认”无参数构造函数来获得类的“默认”行为。一个例子

```
public class LightSwitch {
    private boolean state = false; //off

    public LightSwitch() {}

    public boolean getState();
    public void setState(boolean value);
} 
```

在这种情况下，除非明确打开，否则灯开关被认为是关闭的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:25:39.570

一点都不。默认或“无参数”构造函数通常是类具有的有用功能，但仅作为可用的构造函数之一，而不是*唯一*的构造函数。在构造过程中建立对象的重要不变量是一件*好事*，而带有参数的构造函数通常是实现这一点的必要部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T19:26:12.423

我会说不。当使用解耦机制时，例如依赖注入，构造函数的参数是定义不可变依赖的完美位置。同样，对象的任何其他不可变参数都应该放在构造函数中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-02T19:51:08.073

当听到一些断章取义的东西、没有完全听到建议或用外语听到它时，这可能是一种误解。我怀疑你听到有经验的人说（也许过分强调）这样的话：

1）“你应该总是尝试有一个无参数的构造函数。”

然后你误解了这个意思：

2）“你应该总是尝试只有一个无参数的构造函数。”

声明 (1) 是正确的，因为如果在相关类上调用无参数构造函数 - 或由子类调用 - 如果不存在，则编译器将创建自己的，并且代码的行为将难以预测。

陈述（2）通常不正确。

# objective-c - IOS Objective C ARC 转换问题

> ID：10130353
> 
> 赞同：1
> 
> 时间：2012-04-12T19:24:11.937
> 
> 标签：objective-c

我正忙于将我的 Objective C 代码转换为 ARC（自动引用计数），并遇到了以下问题：

ARC 不允许将“NSInteger”（又名“int”）转换为“SomeRandomObject”。

现在在我们的应用程序中（不幸的是）我们一直在使用标签 NSInteger 属性，例如位于 UITextField、UISwitch 等上的标签，将对象链接到控件。

例如

```
Field *field = [[Field alloc] init...
UITextField *textField = [[UITextField alloc]....
textField.tag = (NSInteger)field; 
```

当代码到达事件时，您可以简单地执行此操作

```
UITextField *textField = (UITextField*)sender;
Field *field = (Field*)textField.tag; // ARC hates this 
```

实现这一目标的更标准/更好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:30:15.730

更好的方法是继承 UITextField 并添加您希望它具有的属性。如果您绝对需要向您无法控制其类的对象添加属性，您可以使用[`objc_setAssociatedObject()`](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_setAssociatedObject)和朋友——它有点低级，可能有点hacky，但肯定比重载`tag`属性要少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:31:48.283

我不确定是否有标准的方法来做你所追求的，但你可以`UITextField`用一个`Field`属性进行子类化。

或者，您可以拥有一些`NSDictionary`s并为您的财产`Field`使用一些唯一标识符。`tag`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:37:44.953

作为@Chuck 所说的一个例子，这里是一个使用类别的简单实现：

```
@interface UITextField(fieldAdditions)

@property(strong, nonatomic) id field;

@end

@implementation UITextField(fieldAdditions)

-(id) field
{
    return objc_getAssociatedObject(self, @"field");
}

-(void) setField:(id)field
{
    objc_setAssociatedObject(self, @"field", field, OBJC_ASSOCIATION_RETAIN);
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:30:19.440

补充一下查克所说的，这比我之前发布的更正确。

您可以在 NSObject 上添加一个类别：

```
- (void) associateValue:(id)value withKey:(NSString *)aKey {

    objc_setAssociatedObject( self, (__bridge void *)aKey, value, OBJC_ASSOCIATION_RETAIN );
}

- (id) associatedValueForKey:(NSString *)aKey {

    return objc_getAssociatedObject( self, (__bridge void *)aKey );
} 
```

# javascript - 附近地点列表

> ID：10130354
> 
> 赞同：0
> 
> 时间：2012-04-12T19:24:14.653
> 
> 标签：javascript, google-places-api

如何访问地点搜索的返回结果？我只需要一个可选择的列表，就像从 facebook 签到的地方一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:40:23.613

Try using Places Autocomplete of the Places Library in the Google Maps JavaScript API v3: [https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

An example can be found here: [https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

# ios - iOS：添加到 NSMutableArray 的项目显示为一项

> ID：10130355
> 
> 赞同：0
> 
> 时间：2012-04-12T19:24:19.587
> 
> 标签：ios, nsmutablearray, nsxmlparser

我正在开发一个 iOS 应用程序，它使用 NSURL 来使用来自网站的 XML 数据：http: [//undignified.podbean.com/feed](http://undignified.podbean.com/feed)。从那里我使用 NSXMLParser 解析 XML 并在“enclosure”元素中搜索一个名为“url”的属性。然后将所有匹配“url”的属性添加到标记为 _links 的可变数组中。问题是每次找到“url”属性并将其添加到数组中时，它都会将其添加到上一个条目中，并在数组中创建一个大对象。如果我 NSLog 退出数组 _links，则会显示以下内容：

```
(
    (
    "http://undignified.podbean.com/mf/feed/hm8a2d/UndignifiedBonusShow.mp3",
    "http://undignified.podbean.com/mf/feed/cfdayc/UndignifiedShow03.mp3",
    "http://undignified.podbean.com/mf/feed/wbbpjw/UndignifiedShow02Final.mp3",
    "http://undignified.podbean.com/mf/feed/ih2x8r/UndignifiedShow01.mp3",
    "http://undignified.podbean.com/mf/feed/t4x54d/UndignifiedShow00.mp3"
    )
) 
```

我正在为数组使用 addObject 并尝试了 insertObject，但都没有奏效。我的代码在下面列出。我知道在将对象加载到数组中的其他实例中，我必须实现一个 for 循环，但不确定此处是否有必要，因为解析器方法似乎会自行循环遍历整个 XML 文档。我敢肯定，这是我缺少的一些小东西，我们将不胜感激朝正确方向轻推。

UnDigParser.H - 听文件解析：

```
@interface UnDigParser : NSXMLParser <NSXMLParserDelegate> {

}
@property (retain) NSMutableArray *links;
@end 
```

UnDigParser.M - 解析的实现文件：

```
@implementation UnDigParser
NSMutableArray *_links;

@synthesize links = _links;

-(void)parserDidStartDocument:(NSXMLParser *)parser{
_links=[[NSMutableArray alloc] init];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
if ([elementName isEqualToString:@"enclosure"]){

    NSString *link = [attributeDict objectForKey:@"url"];
    if (link){
        [_links addObject:link];
        }
}
NSLog(@"%@",_links);

}

-(BOOL)parse{
self.delegate = self;
return [super parse];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:49:29.713

我相信您在数组中构建了一个数组。

我会摆脱“NSMutableArray *_links;”

并更改“[_links addObject:link];” 到“[self.links addObject:link]”

和“_links = [[NSMutableArray alloc] init];” 到“链接 = [[NSMutableArray alloc] init];”

然后，当您想引用链接时，只需使用 self.links 即可。不要使用所有的 _links 来引用它。

我将如何编写它（其他几件事也发生了变化）：

```
@interface UnDigParser : NSXMLParser <NSXMLParserDelegate> {

    NSMutableArray *links;

}
@property (nonatomic, retain) NSMutableArray *links;
@end 
```

UnDigParser.M - 解析的实现文件：

```
@implementation UnDigParser

@synthesize links;

-(void)parserDidStartDocument:(NSXMLParser *)parser{
self.links=[[NSMutableArray alloc] init];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
if ([elementName isEqualToString:@"enclosure"]){

    NSString *link = [attributeDict objectForKey:@"url"];
    if (link){
        [self.links addObject:link];
        }
}
NSLog(@"%@",self.links);

}

-(BOOL)parse{
self.delegate = self;
return [super parse];
}

@end 
```

# jquery - 监听谷歌翻译器的点击事件

> ID：10130356
> 
> 赞同：1
> 
> 时间：2012-04-12T19:24:24.770
> 
> 标签：jquery, google-translate

我在我的网站上添加了免费的谷歌翻译器。我使用 jquery 根据标题文本的宽度向元素添加固定宽度。

如果使用谷歌翻译。页面未重新加载。所以宽度保持原来的宽度。

解决方案：我需要听谷歌翻译器，如果它被使用，那么这个 jquery 函数就会被触发。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:35:38.377

因为 jQuery 和 JavaScript 密切相关（jQuery 是 JavaScript 的少写多做版本），您可以指定一个`event listener`using JavaScript 并编写如果在 jQuery 中触发事件会发生什么。我会亲自为翻译者分配一个 id，通过它的 id 获取该元素，然后为其分配一个`event listener`。[有关事件侦听器的更多信息](http://www.howtocreate.co.uk/tutorials/javascript/domevents)。

如果您只为每个元素分配一个侦听器（并且它们`<div>`所在的元素没有事件侦听器），那么您可以使用这种类型`event listener`：

```
var saveButton = document.getElementById('savebuttonId');
saveButton.addEventListener('click',myCustomFunction,true); 
```

或者，如果您只需要使用该功能一次，比如告诉某人他们的进度已保存，这就是您需要这样的功能的唯一原因，您可以这样做：

```
var saveButton = document.getElementById('savebuttonId');
saveButton.addEventListener('click' function() {
  alert('Progress saved!');
}, true); 
```

如果按钮位于`<div>`还具有事件侦听器的元素中，您可以指定它进入的顺序。只需替换，`}, true);`如果`}, ORDER, true);`你不这样做，函数可以按照他们想要的任何顺序运行，这通常会有所不同该人正在使用的浏览器。

# c# - 随机分配一个Button的内容

> ID：10130362
> 
> 赞同：2
> 
> 时间：2012-04-12T19:24:57.767
> 
> 标签：c#, wpf, xaml

我正在为 WPF 中的孩子创建一个测验。

所有的问题都来自数据库。

该界面有一个问题的文本块和多个选择答案的四个按钮。

如何随机分配按钮的内容，以便正确答案不会一直在同一个按钮中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:34:54.557

您可以使用一种方法来打乱答案：

```
 List<string> Shuffle(List<string> answers)
    {
        Random r = new Random();
        Dictionary<int, string> d = new Dictionary<int, string>();
        foreach (var answer in answers)
        {
            d.Add(r.Next(), answer);
        }
        return d.OrderBy(a => a.Key).Select(b => b.Value).ToList();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:28:43.627

本质上，您可以通过生成 0 到 3 之间的随机数作为正确答案的位置来做到这一点。然后以它们从数据库中出现的任何顺序显示其余答案。

要获取随机数，您可以使用：

```
var placeHolder = new Random().Next(0,3); 
```

# jquery - 表单到表单 jQuery

> ID：10130364
> 
> 赞同：0
> 
> 时间：2012-04-12T19:25:04.347
> 
> 标签：jquery, forms, select, input

我一直在研究一段代码。我有大部分代码，但表格的实际传输让我失望。

```
$("#shrimpfrm").children().map(function() {
    var child = $(this);
    var value = child.val();
    var container = $("#shrimpMaster");
    var field = $("<input />");

    if (child.is(":select")) {
        $(container) 
            // THIS IS WHERE I'M LOST 

    }

    return null;
}); 
```

我需要将任何选择框的值添加`#shrimpfrm`到`#shrimpMaster`. 实际上必须在其中创建文本框，`#shrimpMaster`我相信我设置了正确的函数，并且所有变量都到位，我只是不知道从哪里开始。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:28:47.923

在没有看到您的特定 HTML 并且不知道这两种形式之间的关系的情况下，我建议：

```
$('#shrimpfrm select').each(
    function(){
        $('<input />').val($(this).val()).appendTo($('#shrimpMaster'));
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6MRYB/)。

这将找到表单中`select`的所有元素，使用当前值`#shrimpfrm`创建一个`input`（默认为`type="text"`），`select`然后将其附加到`#shrimpMaster`表单中。

为了响应对 a 所做的更改而执行此操作`select`：

```
$('select').change(
    function() {
        $('#shrimpMaster input:text').remove();
        $('#shrimpfrm select')
            .each(
                function(){
                    $('<input />')
                        .val($(this).val())
                        .appendTo($('#shrimpMaster'));
                });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6MRYB/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:30:21.083

以下内容是否符合您的目的？

```
$("#shrimpfrm").children().map(function() {
    var child = $(this);
    var value = child.val();
    var container = $("#shrimpMaster");
    var field = $("<input />");

    if (child.is(":select")) {
        $(container).text(value);
            // THIS IS WHERE I'M LOST 
    }
    return null;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:30:41.967

所以你需要为每个`select`in创建一个文本框`#shrimpfrm`？如果是这样，您可以使用`append`将新元素添加到`#shrimpMaster`.

请参阅[http://api.jquery.com/append/](http://api.jquery.com/append/)或[http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

```
$('#shrimpfrm select').each(function() {
  $('#shrimpMaster').append($('<input />').val($(this).val()));
}); 
```

# python - 爬虫进程意外死亡

> ID：10130367
> 
> 赞同：2
> 
> 时间：2012-04-12T19:25:23.610
> 
> 标签：python, scrapy, scrapyd

我面临着爬虫进程意外死亡的问题。

我正在使用scrapy 0.14，0.12也存在问题。

scrapyd 日志显示如下条目： 进程死亡：exitstatus=None 蜘蛛日志不显示蜘蛛关闭信息，如我的数据库状态所示。

有没有其他人遇到过类似的情况？我如何追踪这些过程消失的原因，任何想法，建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:38:49.380

我想我也有类似的情况。

进程死亡的原因是蜘蛛产生了一个异常使进程停止。

要找出异常，请查看文件夹中某处的日志文件`.scrapy`。对于每个启动的爬虫进程，scrapy 都会创建一个日志文件，其名称中包含作业 ID。

# cocoa - 用什么代替 NSOutlineViewDataSource outlineView:draggingSession:endedAtPoint:operation:?

> ID：10130373
> 
> 赞同：1
> 
> 时间：2012-04-12T19:25:44.260
> 
> 标签：cocoa, drag-and-drop, nsoutlineview

与 不同`NSTableViewDataSource`的是，该`NSOutlineViewDataSource`协议没有`outlineView:draggingSession:endedAtPoint:operation:`选择器。当用户从 my 中拖动一个项目时，我`NSOutlineView`如何检测该项目何时被丢弃？

我尝试`draggingSession:endedAtPoint:operation:`在我的数据源/委托中实现，但它从未被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:03:41.750

`NSOutlineViewDataSource` *确实*定义了`outlineView:draggingSession:endedAtPoint:operation:`方法，如果您查看标题，您可以看到它。我不知道为什么它不在文档中。

要查看标题，请在 Xcode 中选择“**文件”>“快速打开**`NSOutlineView`”并键入.

该方法仅在 10.7 中可用。

# iphone - 如果我在分配新分配的内存之前没有将 var 设置为 nil 会导致内存泄漏吗？

> ID：10130375
> 
> 赞同：0
> 
> 时间：2012-04-12T19:25:50.457
> 
> 标签：iphone, memory-management, memory-leaks, nsstring

所以我有以下课程。对于同一个数据实例，可以多次调用 setName。现在的问题是，如果不这样做 _name = nil; 在为其分配一个新字符串（分配的内存）之前，它会导致内存泄漏吗？

```
// data.h
@interface data : NSObject
{
@private
    NSString *_name;
}

@property (strong, nonatomic) NSString *name;

// data.m
@synthesize name = _name;

- (void)setName:(NSString *)name {
    _name = nil; // <-- if don't do this, would it end up causing memory leak?
    _name = [NSString alloc] initWithString:name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:28:49.420

代码中的属性*名称*具有强修饰符，因此我假设您使用的是 ARC。在那种情况下，不，它不会导致内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:10:05.237

在您的特定情况下，您不会出现内存泄漏。这是因为 @synthesize 如何为您设置 setter 方法。在强属性的情况下，您的 setter 如下所示：

```
- (void)setName:(NSString *)newName {
    [newName retain];
    [_name release];

    _name = newName;
    return _name;
} 
```

它基本上为您处理内存管理。首先它保留 newName，然后再释放它（如果 name 和 newName 相同，首先释放会使您的应用程序崩溃）。然后它释放旧名称并将 newName 分配给您的 _name ivar

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T19:30:03.417

不，它不会导致内存泄漏。但是，如果您在使用 var 之前没有对其进行初始化，您将永远不会知道现在正在使用哪个内存部分。即你想认为它持有一个`nil`但也许它指向内存中其他变量数据所在的随机位置。这样做可能会弄乱应用程序的数据。

# eclipse-rcp - 如何搜索 Eclipse P2 存储库？

> ID：10130376
> 
> 赞同：3
> 
> 时间：2012-04-12T19:26:01.173
> 
> 标签：eclipse-rcp, p2

> **可能重复：**
> [如何在 Eclipse 下载站点上找出哪个功能包含所需的插件](https://stackoverflow.com/questions/10025599/how-to-find-out-which-feature-contains-a-needed-plug-in-on-an-eclipse-download-s)

我正在构建一个 RCP 应用程序，目前正在尝试定义我的目标平台。我已经配置了一个软件站点 ( [http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo) ) 并选择了 Package `Eclipse RCP SDK`。

现在我缺少一些依赖项，例如`org.eclipse.core.filesystem`和`org.eclipse.ui.ide`. 但是，我不知道如何确定我必须在运行时中包含哪个包。

是否有 Eclipse 存储库的聚合搜索服务，类似于[http://search.maven.org/](http://search.maven.org/)，它可以告诉我在哪里可以找到特定的包或捆绑包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:15:07.613

[请在 Eclipse 下载站点上的 How to find which feature contains an required plug-in 中](https://stackoverflow.com/questions/10025599/how-to-find-out-which-feature-contains-a-needed-plug-in-on-an-eclipse-download-s)查看类似问题，以及那里的答案。

有一个相当复杂的方法来实现这个发布在[这个博客上](http://divby0.blogspot.com/2010/10/howto-find-feature-that-contains-plugin.html)，但通常你的问题的答案是：不，没有这样的事情（还）。

# ilmerge - ILMerge 问题错误代码 1

> ID：10130379
> 
> 赞同：3
> 
> 时间：2012-04-12T19:26:07.393
> 
> 标签：ilmerge

我知道 ilmerge 是一个控制台应用程序，但是当我运行它时，它会运行一秒钟然后关闭。所以下面是我尝试使用的预构建代码，它给出了这个问题。

```
Error   1   The command "ilmerge /out:F:\Users\Tom\Desktop\New folder\project\bin\Release\SkypePWN4G-1.5.5.0.exe F:\Users\Tom\Desktop\New folder\project\bin\Release\SkypePWN4G-1.5.5.0.exe F:\Users\Tom\Desktop\New folder\project\bin\Release\JSNet.dll F:\Users\Tom\Desktop\New folder\project\bin\Release\NAudio.dll" exited with code 1\.   Pwnage 
```

预编译代码：

```
ilmerge /out:$(TargetDir)SkypePWN4G-1.5.5.0.exe $(TargetPath) $(TargetDir)JSNet.dll $(TargetDir)NAudio.dll 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T20:08:49.830

这里有几个建议：

1.  使用 /log 标志运行 ILMerge 以获取更多信息
2.  如果您将其作为构建过程的一部分运行，我相信您的构建操作应该是构建*后*操作，而不是预构建操作
3.  尝试其他工具，例如[Costura](https://github.com/Fody/Costura)。Costura 具有能够将 dll 合并到 WPF 应用程序中的额外好处。

# java - 获取JSTL中数组的类名

> ID：10130387
> 
> 赞同：0
> 
> 时间：2012-04-12T19:26:25.317
> 
> 标签：java, jsp, jstl, el

我正在尝试从一个`Map<String, Object>`参数在 JSP 中构建一个 url。现有代码遍历映射并为键和值添加 c:params：

```
<c:url value="/">
  <c:forEach items="${myParamMap}" var="parameter">
    <c:param name="${parameter.key}" value="${parameter.value}" />
  </c:forEach>
</c:url> 
```

我遇到过映射中条目的值实际上是一个对象数组的情况。我的下一个尝试是添加一个嵌套循环来根据需要迭代这些值：

```
<c:url value="/">
  <c:forEach items="${myParamMap}" var="parameter">
    <c:forEach items="${parameter.value}" var="innerValue">
      <c:param name="${parameter.key}" value="${innerValue}" />
    </c:forEach>
  </c:forEach>
</c:url> 
```

但这当然打破了值不可迭代的正常情况。

我的下一个想法是通过某种“instanceof”检查来检查该值是否是一个数组。我可以在互联网上找到这样做的唯一方法是：`${object.class.className == 'Whatever'}`.

这不适用于 JSTL 中的数组，因为对于表达式`${someArray.class}`，JSTL 尝试将`.class`部分转换为整数以便将其用作索引（我不敢相信有人认为这是个好主意）。

我的下一步是使用 scriptlet，但我仍然很想知道是否有办法使用纯 JSTL 做到这一点。

* * *

在这种情况下，使用 scriptlet 是可行的方法。我最终得到了类似的东西：

```
<c:set var="val" value="${parameter.value}">
<% boolean isArray = pageContext.getAttribute("val").getClass().isArray(); %>
<c:choose>
  <c:when test="<%= isArray >">
     ... forEach loop to set all the params ...
  </c:when>
  <c:otherwise>
     ... just set the param with key & value ... 
  </c:otherwise>
</c:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:44:12.160

打开一个 jsp scriptlet `<% ... %>`。在这种非标准情况下，我认为最好直接使用 Java 语言。

例如，您也可以在 params 中使用 scriptlet：

```
<c:set var="className" value="<%= ... get class name ... %>" /> 
```

或者

```
<c:set var="isArray" value="<%= a.getClass().isArray() %>" /> 
```

请记住，如果您想`a`在 scriptlet 中使用，您必须从 pageContext 中获取它，例如：

```
<% Object a = pageContext.getParameter("innerValue"); %> 
```

# java - 使用 Java 从字符串缓冲区中删除子字符串

> ID：10130391
> 
> 赞同：1
> 
> 时间：2012-04-12T19:26:31.610
> 
> 标签：java, stringbuffer

每次出现此子字符串时，我都想从字符串缓冲区中删除一个子字符串，到目前为止我所做的是：

```
 public static void main(String[] args) {

        String text = "Alice Bob Alice Bob Alice Bob";
        String substr = "Alice";            
        StringBuffer strbuf = new StringBuffer(text);
        strbuf.indexOf(substr);
        strbuf.lastIndexOf(substr);
        while (strbuf != null) {
                strbuf.delete(strbuf.indexOf(substr), strbuf.indexOf(substr) + substr.length());
                System.out.println(strbuf.toString());
            }
} 
```

我想删除每次出现的“爱丽丝”。但它给出了以下错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1 
```

我认为是 while 行中的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:29:59.270

你的问题是你试图删除一个不存在的子字符串（在你删除它的所有实例之后）。您必须将循环边界更改为类似

```
while(strbuf != null && strbuf.indexOf(substr) != -1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:29:38.397

因为如果`text`不包含`substr`返回`indexOf`，`-1`而您调用`delete`with `-1`。

然后你的循环一直持续到`strbuf`is `!= null`:**那是永远的**。

`substr`在您的情况下，当您删除所有事件并且下一个`indexOf`返回时，它会引发异常`-1`。

以这种方式改变你的循环

```
int i;
while ((i = strbuf.indexOf(substr)) != -1)
    strbuf.delete(i, i + substr.length()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:29:54.327

您应该检查子字符串是否是您的字符串的一部分

```
int pos = strbuf.indexOf(substr);
if (pos < 0) { // not found... 
```

这永远不会是错误的，使循环无穷无尽

```
while (strbuf != null) { ... 
```

更好的版本应该是

```
 String text = "Alice Bob Alice Bob Alice Bob";
    String substr = "Alice";            
    StringBuffer strbuf = new StringBuffer(text);
    while (true) {
      int pos = strbuf.indexOf(substr);
      if (pos < 0) break; // ready
      strbuf.delete(pos, pos + substr.length());
      System.out.println(strbuf.toString());
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:30:06.083

您得到 -1 因为不再找到该字符串，您需要更改条件以检查您是否首先找到该字符串，然后尝试将其删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:33:56.590

这是因为一旦您从字符串缓冲区中删除字符串“Alice”，您将无法再次找到它！因此，您的 indexOf() 方法将返回 -1，因此您将获得 java.lang.StringIndexOutOfBoundsException

# c - __inline 函数与 C 中的普通函数

> ID：10130395
> 
> 赞同：4
> 
> 时间：2012-04-12T19:26:43.420
> 
> 标签：c, inline, c99

我正在研究宏，并发现了许多关于宏和内联函数之间差异的来源和问题。但是没有什么可以具体说明和区分内联函数与普通函数的优缺点。

但是如果我想在普通函数和内联函数之间进行选择呢？

我知道使用内联函数会增加代码大小。但是，虽然研究规模不是主要问题，但效率是目标。使函数成为内联函数意味着对函数的调用尽可能快。（由于堆栈和填充开销）

总是使用内联函数是否更好？如果不是，那**为什么**？使用普通函数而不是内联函数有什么好处？

在阅读其他问题时，我读到内联只是对编译器的提示。编译器可能会忽略它。编译器何时忽略它，**为什么**？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T19:47:57.133

内联函数有几个优点：

1.  它可以使程序体积*更小*。这通常是一个函数只使用一次的情况。另见 2\. 和 3。

2.  如果编译器知道变量是常量或非 NULL 或类似的东西，编译器可以消除函数的未使用位。这可以节省大小，但也可以使代码在运行时更有效率。

3.  编译器可以消除调用函数的位，甚至是其他内联函数，因为它可以看到函数对数据的作用。（假设代码检查返回值并在它为 NULL 时调用错误函数，它可能能够排除这种情况。

4.  它可以减少调用开销，但在当前具有预测分支的处理器中，这并没有你想象的那么大。

5.  它可以提升循环中的常量位，进行公共子表达式消除，以及许多其他优化以使循环代码更高效，等等。

然后是缺点：

1.  显然，它可以使代码更大。

2.  它会增加调用函数中的寄存器压力，这可能会混淆编译器并阻止其优化。

3.  拥有一个可以存在于 CPU 缓存中的热函数比将其复制到许多并不总是缓存的地方要快。

4.  它可能会妨碍调试。

内联函数只是一个提示的原因主要是因为 C 标准根本不要求编译器优化任何东西。如果它不是一个提示，那么优化就不是可选的。此外，仅仅因为函数*没有被*标记为内联并不会停止编译器内联它，如果它计算出这样做是有利的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T19:34:58.300

一般来说，如果编译器认为性能会更好，它会选择内联。因此，它必须比较实际调用非内联函数（将参数推入堆栈、保存寄存器等）的成本，而不是代码本身。因此，对于简单的访问器或简单的计算，调用函数的成本通常更高，因此编译器将内联。

编译器通常也有大小限制，因此它们不允许内联过多地增加代码。

还有地方要考虑。内联函数不太可能导致页面错误，也可能不会导致处理器缓存未命中，因此从这个角度来看通常会更快。非内联函数通常需要将代码加载到处理器缓存中，相比之下这非常慢。

将函数声明为内联还有其他原因，即使您并不真正期望编译器内联它们。C++ 中的整个 STL 都是内联的，尽管其中大部分实际上不太可能是内联的。这样做是出于模板实例化的原因，以及与应用程序二进制接口有关的问题等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:31:33.643

内联函数的好处是消除了函数调用开销，并使优化器有更好的机会使用函数代码优化调用代码。例如，优化器在某些情况下可能会完全消除内联代码。

缺点是可能会增加代码大小，如果瓶颈是 CPU 指令获取，在某些情况下也会降低执行速度。

所以这取决于。编译器使用各种启发式方法来确定内联函数是否是净收益。即使您没有指定 inline 关键字，编译器也可能内联函数，或者如果您这样做，它可能不会内联。通常有一些方法可以强制编译器内联函数以覆盖其决定。

这[对于内联函数有什么好的启发式方法？](https://stackoverflow.com/questions/2130248/what-are-good-heuristics-for-inlining-functions)对内联启发式有很好的讨论和进一步的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T19:30:29.547

当你使用内联函数时，函数代码在被调用时粘贴在行中，它生成的可执行程序也比不使用内联函数的程序大，另一方面，没有内联函数，当被调用时，程序停止并跳转到功能代码开始的内存目录...

结论：内联函数=更好的性能，更多的空间函数=更少的空间，稍微更少的性能

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T19:49:01.017

[对 gcc 的内联选项和GNU GCC](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Inline.html#Inline)的决策过程有一个很好的概述。

这确定了不可能内联的情况：“使用 varargs、使用 alloca、使用可变大小的数据类型、使用计算的 goto、使用非本地 goto 和嵌套函数”

重要的一点是一个非静态函数，即一个带有`extern`链接的函数（即每个声明为不带 的函数`static`）可以被调用，或者将其地址放在不同的源文件中。

这会强制编译器生成“正常”函数以及任何内联函数体。当然，这会生成一个比仅生成“正常”非内联函数更大的程序。

Gcc 有一个[`-ffunction-sections`](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Optimize-Options.html#index-ffunction_002dsections-870)生成目标文件的选项，它使链接器能够消除未使用的函数，但代价是“......汇编器和链接器将创建更大的目标文件和可执行文件，而且速度也会变慢。”

在较新版本的 gcc 上，支持链接时间优化 (LTO)（请参阅[“整个程序优化”](http://gcc.gnu.org/projects/lto/whopr.pdf)）。这允许优化阶段查看*所有*已编译的程序，并进行更积极的内联和优化，并排除未使用的代码。

查看一些较新的[gcc-4.6](http://gcc.gnu.org/gcc-4.6/changes.html) [gcc-4.7](http://gcc.gnu.org/gcc-4.7/changes.html)过程间优化也很有趣。例如，仅内联内联函数的“热路径”，而不是整个函数。Gcc 也可能生成一个函数的多个实例，因为常量是已知的，并且 gcc 计算出最好有多个实现，每个实现都针对那些已知的常量进行优化。

gcc 中有一些选项可以要求编译器内联所有“足够简单”的函数。

最后它说“根据 ISO C++ 的要求，GCC 认为在类的主体中定义的成员函数被标记为内联，即使它们没有使用 inline 关键字显式声明”。在这种情况下，使用“足够简单”的规则。

总结：编译器可能会做非常聪明的优化，超出普通函数或内联函数的预期。

# sql - 为报告构建查询的最佳方式

> ID：10130399
> 
> 赞同：1
> 
> 时间：2012-04-12T19:27:03.603
> 
> 标签：sql, sql-server-2008, ssrs-2008, reporting-services

我需要创建一个 SSRS 摘要报告，该报告从许多不同的来源捕获大量数据。该报告需要报告 3 种不同类型的大约十几个汇总数字。每个数字的计算都非常复杂，所以我肯定想优化整体报告。

我将调用 X/Y/Z “类型”和 A/B/C/D/E/D “项目”

例子：

```
      XYZ
```

```
10 12 14
```

```
乙 8 6 11
```

```
C 12 0 99
```

```
10 12 14
```

```
E 8 6 11
```

```
F 12 0 99
```

我有生成每个数字的 sql - 我只是传递 X/Y/Z 的每个“行”的函数。

我的问题是如何将所有数据收集在一起进行报告？我可以：

1.  将每个数据点创建为子查询，并在一个带有描述性列名的长语句中将它们串在一起

2.  将每种类型的所有数据合并到一个过程/函数中，因此我将在一个结果集中获得第一和第二列，在另一个结果集中获得第一和第三列，在第三列中获得第一和第四列。然后我想我可以把这些结合在一起。

3.  将每个数据点生成为一行（即 A;X;10）并将它们全部旋转在一起。

我最好还是为每个项目创建一个函数，所以我调用 fnA(X) 来获得 10？而不是仅仅在一个过程中将 SQL 串在一起？

我相当擅长 SQL，但刚刚进入 SSRS，所以我可能会错过一种更简单的方法。我正在尝试在 SQL 中获取所有数据，然后在 SSRS 中使用它，但如果我应该在 SSRS 中做更多而不在 SQL 中做更多，我愿意接受！

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:49:14.730

如果数据是从 SQL 查询以以下两种形式之一返回的，SSRS 可以轻松处理数据：

```
       XYZ
 10 12 14
 乙 8 6 11
 C 12 0 99
 10 12 14
 E 8 6 11
 F 12 0 99

```

**或者**

```
项目类型值
 斧头 10
 12 年
 AZ 14
 BX 8
 由 6
 BZ 11
 CX 12
 CY 0
...

```

如果这是从单个查询返回的，那么您在 SSRS 中肯定会更轻松。有几种方法可以从多个查询中获取结果，但它们并不像使用一个查询的结果那么简单。

那么问题就变成了从 SQL 中返回什么更容易。听起来您已经很好地处理了一些选项：您的答案将取决于您的数据库架构以及您对 SQL 不同功能的舒适度（或倾向）。

我会在 SSMS 中尝试几种方法：如果需要，选择最干净的代码或最佳性能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:45:27.190

我最终使用光标遍历并提取每种 X/Y/Z 类型的每个数据点并将其插入到临时表中。然后我使用 SSRS 将其显示在矩阵中。有点脏，但它的工作...

# c# - 文件名有两个反斜杠 C#

> ID：10130400
> 
> 赞同：3
> 
> 时间：2012-04-12T19:27:12.330
> 
> 标签：c#, file, datetime, save, filenames

对此可能有一个简单的答案，但是当我添加到我的文件名时，它会为我所拥有的`DateTime.Now.ToString()`每个 \ 添加一个额外的 \，这会导致文件无法保存。`C:\Temp``C:\\Temp`

这是有问题的代码

```
String fileName = @"C:\Temp\data_" + DateTime.Now.ToString() + ".txt"; 
```

例如输出可能是`C:\\Temp\\data_12/04/2012 20:08:40.txt`

它应该是`C:\Temp\data_12/04/2012 20:08:40.txt`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T19:29:15.327

不，那个字符串*真的*有一个反斜杠。把它打印到控制台，你会看到的。

如果您在*调试器*中查看它，您会看到反斜杠已转义 - 但字符串本身有单个反斜杠。这咬了很多人:(

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T19:30:01.003

实际上，文件名中的正斜杠是非法的。用合法的东西替换正斜杠，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:32:04.323

```
String fileName = String.Format(@"C:\Temp\data_{0}.txt",DateTime.Now.ToString("ddMMyyyyHHmmss")); 
```

输出：`C:\Temp\data_12042012214358.txt`

或使用

```
String fileName = String.Format(@"C:\Temp\data_{0}.txt", DateTime.Now.ToString("dd.MM.yyyy HH-mm-ss")); 
```

输出：`C:\Temp\data_12.04.2012 21-45-03.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:32:28.837

尝试设置格式：

```
String fileName = @"C:\Temp\data_" + DateTime.Now.ToString("MM d HH mm yyyy") + ".txt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:34:57.140

实际上，它在变量值中显示了两个反斜杠，因为 \ 被转义了。如果您打印变量值，您应该会看到它只有一个反斜杠。

# java - 使用 Morphia 查询 Map 键、值

> ID：10130401
> 
> 赞同：1
> 
> 时间：2012-04-12T19:27:13.510
> 
> 标签：java, maps, morphia, querying

我有这样的 mongoDB 结构。

```
{
id : id,
userid : userid,
map :{
      key1 : [value1, value2,value3],
      key2 : [value1, value2,value3],
      key3 : [value1, value2,value3],
      .......
      }

} 
```

如果 key2 和 value3 与我的参数匹配，我喜欢查询 id。我对如何做到这一点一无所知。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:45:22.993

在 mongoDB 中它必须是这样的：

```
{
   "map.key2 : "value1",
    "map.key3" : "value1",
} 
```

在 morphia 中，您还可以使用点符号：

```
ds.createQuery<YouEntity>(YouEntity.class).filter("map.key2", "value1") 
```

[从](https://groups.google.com/forum/?fromgroups#!topic/morphia/STfIoBSvt9I)

# ios - 避免 uitableview 单元格在删除时调整内部标签的大小

> ID：10130407
> 
> 赞同：0
> 
> 时间：2012-04-12T19:27:35.467
> 
> 标签：ios, uitableview

当我要删除一个单元格并出现删除按钮时，单元格内容会调整大小。我怎样才能避免这种情况？

提前致谢。

编辑：当我滑动手指删除时，cell.textLabel 和 cell.detailTextLabel 会自动调整大小。我试图避免这种情况。它不是自定义单元格。我没有手动添加任何子视图，只是使用默认属性......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:30:14.227

只有 cell.contentView 的子视图会自动调整大小。然后，您将单元格视图放在 NOT 上，`cell.contentView`而不是将它们放在`cell.view`.

# c - 生成文件简化

> ID：10130409
> 
> 赞同：0
> 
> 时间：2012-04-12T19:27:45.587
> 
> 标签：c, makefile

假设我们有客户端-服务器应用程序，由一个 makefile 编译。服务器使用 libtask 为并行客户端服务。客户端将 ncurses 用于某些图形。目录树如下所示：

```
./
--bin/
--obj/
--src/
----client/*.c
----server/*.c
--makefile 
```

所以，这里是makefile。我们可以简化它吗？我阅读了一些关于 stackoverflow 的相关问题，我认为它几乎是理想的，除了链接二进制文件，当我们可以看到重复的命令时。一些关于风格/跨平台工作的建议会很有用。谢谢！

```
.PHONY: all clean

TASKLIB = -ltask
CURSESLIB = -lncurses
CFLAGS = -Wall -Werror -pedantic

bin = server client
obj_dir = obj
bin_dir = bin
ssource := src/server
csource := src/client
search_wildcard s := $(addsuffix /*.c, $(ssource))
search_wildcard c := $(addsuffix /*.c, $(csource))
sobjs = $(addprefix $(obj_dir)/, $(patsubst %.c, %.o, $(notdir $(wildcard $(search_wildcard s)))))
cobjs = $(addprefix $(obj_dir)/, $(patsubst %.c, %.o, $(notdir $(wildcard $(search_wildcard c)))))

all: $(bin)
    @echo "done!"

server: CFLAGS+=$(TASKLIB)
client: CFLAGS+=$(CURSESLIB)

clean:
    rm $(sobjs) $(cobjs) $(obj_dir)/*.d $(bin_dir)/client $(bin_dir)/server

VPATH := $(ssource) $(csource)

server: $(sobjs)
    @test -d $(bin_dir) || mkdir $(bin_dir)
    @echo "Linking $(@F)..."
    @$(CC) $< $(CFLAGS) -o $(bin_dir)/$@

client: $(cobjs)
    @test -d $(bin_dir) || mkdir $(bin_dir)
    @echo "Linking $(@F)..."
    @$(CC) $< $(CFLAGS) -o $(bin_dir)/$@

$(obj_dir)/%.o: %.c
    @test -d $(obj_dir) || mkdir $(obj_dir)
    @echo "Compiling $(@F)..."
    @$(CC) $< $(CFLAGS) -c -MD -o $@

include $(wildcard $(obj_dir)/*.d) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:46:05.947

我有几点意见：

*   将 $(obj_dir) 添加到服务器和客户端的配方中。就目前而言，每次运行 make 它都会重建二进制文件。

*   添加配方以创建目录（bin 和 obj）并将它们从客户端和服务器配方中删除

*   $< 应该是 $^ 服务器和客户端配方

*   通过删除 bin/ 和 obj/ 进行清理

*   也许使用 -MMD 而不是 -MD 来排除系统依赖项

*   向 CFLAGS 添加更多警告

*   是否应该使用 LDFLAGS 而不是 CFLAGS 进行链接

*   如果在服务器和客户端目录中使用相同的文件名，则构建将失败。

以下是我更改的行：

```
all: $(bin_dir) $(obj_dir) $(bin_dir)/server $(bin_dir)/client
    @echo "done!"

clean:
    rm -rf $(obj_dir) $(bin_dir)

$(bin_dir) $(obj_dir) :
    test -d $@ || mkdir $@

$(bin_dir)/server: $(sobjs)
    $(CC) $^ $(CFLAGS) -o $@

$(bin_dir)/client: $(cobjs)
    $(CC) $^ $(CFLAGS) -o $@

$(obj_dir)/%.o: %.c
    $(CC) $< $(CFLAGS) -c -MMD -o $@ 
```

正如 Christoph 所示，您还可以将服务器和客户端配方合二为一。我的猜测是专家可以将其缩小，但遗憾的是我不是专家。和看起来`$(sobjs)`特别`$(cobjs)`适合还原。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:52:34.910

CMake 是一个跨平台的构建系统生成器。项目使用名称为 CMakeLists.txt 的源代码树的每个目录中包含的与平台无关的 CMake 列表文件来指定其构建过程。用户通过使用 CMake 为他们平台上的原生工具生成构建系统来构建项目。

[http://www.cmake.org/cmake/help/cmake2.4docs.html](http://www.cmake.org/cmake/help/cmake2.4docs.html)

[http://linux.die.net/man/1/cmake](http://linux.die.net/man/1/cmake)

也许这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:55:28.493

您可能比您需要的更一般：例如，我不会使目录可配置 - 这仅对目标的目的地有意义`install`。

无论如何，这就是我编写你的makefile的方式（未经测试）：

```
CFLAGS := -Wall -Werror -pedantic
RM := rm -f
MKDIR := mkdir -p

BINARIES := bin/server bin/client
SERVER_OBJECTS := $(patsubst src/%.c, obj/%.o, $(wildcard src/server/*.c))
CLIENT_OBJECTS := $(patsubst src/%.c, obj/%.o, $(wildcard src/client/*.c))
OBJECTS := $(SERVER_OBJECTS) $(CLIENT_OBJECTS)

.PHONY : build clean realclean

build : $(BINARIES)

clean :
    $(RM) $(OBJECTS) $(OBJECTS:%.o=%.d)

realclean : clean
    $(RM) $(BINARIES)

bin/server : LDLIBS := -ltask
bin/client : LDLIBS := -lncurses

bin/server : $(SERVER_OBJECTS)
bin/client : $(CLIENT_OBJECTS)

$(BINARIES) :
    @$(MKDIR) $(dir $@)
    $(CC) $(CFLAGS) -o $@ $^ $(LDLIBS)

include $(wildcard obj/*.d)

$(OBJECTS) : obj/%.o : src/%.c
    @$(MKDIR) $(dir $@)
    $(CC) $(CFLAGS) -c -MD -o $@ $< 
```

# sql - 维护自动内部关系表

> ID：10130418
> 
> 赞同：1
> 
> 时间：2012-04-12T19:28:13.840
> 
> 标签：sql, sql-server

我有几个表可以从某些日志中自动获取数据。例如，假设我的表由两列组成：

```
Country | someData
--------|---------
USA     | 123
Canada  | 4545
Mexico  | 4363
USA     | 3434
... 
```

现在我在 Country 列中有很多重复，因此使用外键和另一个表来表示 Country 是有意义的，但不幸的是，数据上传到表中的方式，我无法实现。插入数据的程序会插入 Country 字符串，我无法更改（例如 INSERT INTO table VALUES ('USA',3232)）

我想知道是否有办法让表自动维护某种关系，这样它就不会多次存储相同的字符串。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:00:35.333

我不能保证这遵循了我刚刚了解到的最佳实践，但是我不时会遇到这种需求，我一直想学习这一点，所以我认为这是使用而不是触发器。

```
create table Country (
     id int primary key not null identity(1,1)
    ,name varchar(10)
)
go

create table Item (
     id int primary key not null identity(1,1)
    ,country_id int references Country(id)
    ,data varchar(100)
)
go

create view ItemView as
select C.name, I.data
from Item I inner join Country C on I.country_id = C.id
go

create trigger tr_Item_IOI on ItemView
instead of insert as begin

    set nocount on

      -- add the country if it does not exist
    if(not exists (select C.id from Country C inner join inserted I on C.name = I.name))
         insert into Country select distinct name from inserted

      -- insert an item using the country id for the inserted country name
    insert into Item (country_id, data)
    select C.id, I.data
    from Country C inner join inserted I on C.name = I.name

end
go

insert into ItemView values 
     ('USA', '123')
    ,('Canada', '4545')
    ,('Mexico', '4363')
    ,('USA', '3434')
go

select * from ItemView
select * from Country
select * from Item 
```

![在此处输入图像描述](../Images/6b24e8ae8556c4d34572f9949ac3cbc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:20:51.390

让 INSERT TRIGGER 完成这项工作。

情景一）

插入数据的表有 3 列

```
CountryID INT NULL,
Country VARCHAR(50) NULL,
SomeData VARCHAR(MAX) NOT NULL 
```

上传者做`INSERT INTO MyTable(Country, SameData) VALUES(...)`

您的 INSERT TRIGGER 必须

*   对于`inserted`表中的每一行
*   在另一个（引用的）表中找到匹配的 CountryID（外键）
*   `UPDATE` `SET`外键匹配的 CountryID
*   `UPDATE` `SET Country = NULL`清洁空间

场景 B)

两张桌子

上传者表格

```
Country VARCHAR(50) NOT NULL,
SomeData VARCHAR(MAX) NOT NULL 
```

目标表

```
CountryID INT NOT NULL,
SomeData VARCHAR(MAX) 
```

您的 INSERT TRIGGER 必须

*   对于`inserted`表中的每一行
*   使用匹配的外键将其重写到目标表中

还可以尝试使用上述场景`INSTEAD OF INSERT TRIGGER`（与经典的 AFTER INSERT TRIGGER 相比），因此 Country 列甚至不会写到 DB 中 - 它会即时“转换”为 CountryID。在场景 B 中，上传者的表实际上可能是一个视图（上传者插入到视图中，而不是插入触发器来完成工作）。请参阅以下示例：http: [//msdn.microsoft.com/en-us/library/ms175089.aspx](http://msdn.microsoft.com/en-us/library/ms175089.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T19:32:46.107

我不明白这个问题。您可以拥有一张国家/地区表，并且可以将文本表示用作键，它不必是 ID 号（int、bigint 等）。此表将包含每个国家/地区的一个实例：美国、加拿大、墨西哥。

在您的关系中，您有另一个表，`someData`其中存储可以包含多个条目，例如 USA。好处是您的国家/地区表可以包含更多关于对象的列（在本例中为国家/地区）。

# php - 找到数字数组中的空白并填补空白 - 循环

> ID：10130423
> 
> 赞同：3
> 
> 时间：2012-04-12T19:28:37.183
> 
> 标签：php, arrays

我有数字数组：16,17,19,19,20。我需要找到一个缺失的数字/间隙（在这种情况下，它是 18/一个数字，但它可能是两个数字，例如 16、17、20、21），然后我想以阵列其余部分的方式填补空白向上移动一 (x) 个数字。这个数组可以有更多的缺失数字（间隙），例如 16、17、19、19、20、21、23、23。我有这个循环，但有问题 - 见评论：

```
 <?php
      $ar = array(16,17,19,19,20);
                $action = false;
                $new = array();
                $temp = array();

        foreach ( $ar   as $k => $v ) {
                if ( $k == 0 )
                    {
                      // case 0 - insert first value of var into array - never need to change
                        $new[] = $v; 
                    }
                elseif ( $k > 0 ) 
                    { 
                      if ( end($new) + 1 == $v ) 
                        { 
                      // case 1 - numbers are consequence/no gap - insert into array - no change 
                            $new[] = $v;
                        }

                  elseif ( end($new) + 1 != $v )
                            {
                              // case 2 - there is a gap: find the size of the gap (1,2,x) and then subtract all next values of array with the gap
                                    $gap = $v - end($new) - 1 ; // find value of the gap 
                                    //echo "<br> gap is: " . $gap; // PROBLEM - gap get increased by every loop but i need to keep gap size static and process rest of the array
                                    $action = true;
                                            if ( $action = true )
                                                {    
                                                        $temp[] = $v - $gap;
                                                }
                                        }
                            }
                        }                            

echo "<br>";            
print_r ( $new );
echo "<br>";
print_r ( $temp ); 
```

所以结果是：array new 没问题

```
 Array ( [0] => 16 [1] => 17 ) 
```

数组温度不正常

```
 Array ( [0] => 18 [1] => 18 [2] => 18 ) 
```

应该是 18,18,19

这种情况如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:21:50.390

阅读您的目标和有关填充缺失数字的当前代码，我想出了自己的代码：

[http://pastebin.com/58nNGuNB](http://pastebin.com/58nNGuNB)

```
$ar = array(16,17,19,19,20);
$action = false;
$new = array();
$temp = array();

foreach ($ar as $key => $val) {
    if($key == 0 OR $ar[$key-1] == $val) {
        // if it's first value, or current value is same as previous, just add it as is
        $new[] = $val;
    } else {
        // else, add all missing value including current one to $new array
        for($x = $ar[$key - 1] + 1; $x <= $val; $x++) {
            $new[] = $x;
        }
    }
} 
```

其输出如下：

```
Array
(
    [0] => 16
    [1] => 17
    [2] => 18
    [3] => 19
    [4] => 19
    [5] => 20
) 
```

只要告诉我我是否遗漏了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:38:44.417

试试这个，你可以制作任意数量的间隙和序列，递归将找到间隙的大小并将数字向上移动，然后寻找另一个间隙/间隙。

```
<?php

$ar = array(16,17,17,19,19,20,20,24,24);

echo '<pre>Initial:<br>';

print_r ($ar);

echo '<br>Fixed:<br>';

function find_gaps($array) {  

                $key = 0;
                $first_half = array();
                $gap = 0;                   
                $gaps = array();
                $action = false;
                $new = array();  // helper array
                $second_half = array();

    foreach ( $array as $k => $v ) {
                if ( $k == 0 )  // first number in line - no need to change
                    {
                        $new[] = $v;  
                        $first_half[$k] = $v;
                    }
                elseif ( $k > 0 )  // next numbers 
                    { 
                      if ( end($new) + 1 == $v ) // if first member of array is consequent of helper .. 
                          { 
                            $new[] = $v;        
                            $first_half[$k] = $v;  // .. it's ok- just make new array
                            }
                      elseif ( end($new) == $v )  // if there are two or more same numbers - it's ok ..
                                { 
                            $new[] = $v;
                            $first_half[$k] = $v;  // .. no action-just keep adding into array 
                           }
                    elseif ( end($new) + 1 != $v )  // if last value of helper array is not 1 less of our array - there is a gap
                                {
                                        $gap = $v - end($new) - 1 ; // find size of the gap in numbers ( can be 1,2,3..)
                                        //echo $gap; break;
                                        $gaps[] = $gap;  // put gap into array - it will get increased but you need only first value - see if ($action)
                                        $action = true;
                                }   
                                    if ( $action )
                                            { 
                                            $second_half[$k] = $v;  // make second half array
                                            } 
                  }
            } // end array  loop then..

    $second_half_fixed = array();

        foreach ( $second_half as $keys => $values )
                          $second_half_fixed[$keys] = $values - $gaps[0];

            $a['first']  = $first_half;
            $a['fixed'] = $second_half_fixed;
            $b['fixed'] = $first_half + $second_half_fixed;
            $b['gaps'] = $gaps;

            $count_gaps = count($b['gaps']);

            if ($count_gaps == 0 OR $count_gaps == 1 ){
                            return $b;
                }
            else // more gaps
                    {
                        echo 'run again<br>';
                          return ( find_gaps($b['fixed'])) ;            
                    }       
    } // end function 'find_gaps'

    $fixed = find_gaps($ar);

    print_r ( $fixed['fixed'] ); 
```

# apache - Apache2 中的别名时 RewriteRule 失败

> ID：10130424
> 
> 赞同：0
> 
> 时间：2012-04-12T19:28:42.040
> 
> 标签：apache, .htaccess, mod-rewrite, web, mod-alias

所以，我想组织我的项目以更好地发展。我选择使用这种方式来组织文件夹和文件：

```
www
    projects
        project1
           web
           design_tests
        project2
           web
           design_tests
... 
```

每个项目的网站都将位于其“web”文件夹中。我还想在浏览器上访问网络而不输入“网络”文件夹名称，所以：

```
http://localhost/projects/project1
will access the physical files of:
/www/projects/project1/web 
```

我完成了将下一行添加到我的 /etc/apache2/sites-available/default 文件：

```
AliasMatch ^/projects/([^/]*)(/.*)? /www/projects/$1/web$2 
```

完美运行。问题是，在某些网站中，我有一个带有一些 RewriteRule 规则的 .htaccess 文件。一个例子：

```
RewriteEngine On
RewriteRule styles\.css styles_20120107.css 
```

他们过去常常在没有别名和访问正常的情况下工作。现在他们没有。它重定向到 URL /project1/web/styles_20120107.css，当然，浏览器因为别名而无法获取。我真的不知道如何解决它。你能给我一些帮助吗？如果可能，在文件 /etc/apache2/sites-available/default 中进行修改，而不是在 .htaccess 中，因为我希望网站是跨服务器的。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:43:26.567

如果添加`[PT]`标志对您不起作用...为什么不使用重写规则替换别名以实现相同的效果——在这种情况下，您应该完全避免这个问题。

# javascript - 基于窗口高度和第二个div高度的Javascript动态div高度

> ID：10130426
> 
> 赞同：2
> 
> 时间：2012-04-12T19:28:45.493
> 
> 标签：javascript, jquery, dynamic, html

我如何修改下面的代码，而不是减去 210，而是减去另一个 div 高度，以便等式基本上变成“主菜单 = 窗口高度 - div 高度”？

```
$('#main-menu').css({'height':(($(window).height())-210)+'px'}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:36:27.247

这是[Jsfiddle](http://jsfiddle.net/yM8wG/1/)

像这样的标记：

```
​&lt;div id="main-menu"></div>
<div id="other-div">
    <h1>Sample Content</h1>
    <p>
        foo bar foo bar foo bar foo bar foo bar foo bar foo bar foo bar foo bar 
    </p>
</div>​ 
```

像这样的CSS：

```
​#other-div {
    background: #cdcdcd;
}​ 
```

像这样的Javascript：

```
$('#main-menu').height($(window).height()-$("#other-div").height());​ 
```

从脚本中可以看出，我调用了 height 函数。

# c++ - 从 Getline 解析空格分隔的数字

> ID：10130432
> 
> 赞同：1
> 
> 时间：2012-04-12T19:29:09.407
> 
> 标签：c++, parsing, getline

我正在编写一个小程序，它将读取一个包含 5 条记录中的 3 行的纯 ASCII 文本文件，如下所示：

> f_name l_name
> ID#
> int int int int

我成功地将前 2 行放在它们所属的一维数组中，但我无法将一系列整数放入二维数组中。我最接近解决方案的方法是使用以下行：

```
studentScores[row][col] = atoi(input.c_str()); 
```

但是，atoi 只解析第一个数字，然后丢弃该行的其余部分。我需要将字符串中的每个数字放在数组的单独元素中。我尝试使用 stringstream，但无法使其正常工作；显然，我要使用的函数包含在与我使用的不同版本的 stringstream 中。

我可以用什么来解析这个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:33:58.360

```
#include <string>
#include <sstream>

// ...

int ints[4];
std::string input;
std::getline(stream, input);
std::istringstream(input) >> ints[0] >> ints[1] >> ints[2] >> ints[3]; 
```

（为简洁起见，省略了错误处理。）

# r - 提取R中的观察指数

> ID：10130434
> 
> 赞同：0
> 
> 时间：2012-04-12T19:29:26.200
> 
> 标签：r

我有两个向量

一个<-{1,2,5,6,7}

b<-包含上述值的映射作为 b 的索引

我想在与“a”的值匹配时提取“b”的索引，例如，如果“a”中的值 2 与“b”中的索引 8 处的值匹配，则想提取“8”

我是 R 的新手，所以正在寻找解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:37:40.560

我认为你想要的是这样的：

```
a <- c(1, 2, 5, 6, 7)
b <- c(2, 3, 5, 9)

match(a, b) 
```

# android - 如何在屏幕边缘停止画廊？（安卓）

> ID：10130448
> 
> 赞同：0
> 
> 时间：2012-04-12T19:30:17.710
> 
> 标签：android, adapter, android-gallery

我正在考虑使用画廊。如果我向右滚动，我希望画廊在最左边的图像到达显示屏左侧边缘时停止滚动。理想情况下，最左边的图像将与显示器的左侧齐平，但我不确定 Gallery 是否可能。

目前，当向右滚动时，Gallery 会滚动到屏幕边缘并在左侧留下空白区域。

抱歉，我没有屏幕截图，但我想做的是：

[图片][图片][图片][图片]...

目前是

[空白][图片][图片][图片]...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:29:50.777

我改为使用水平列表视图。

# javascript - 如何解决 autosize() 问题？

> ID：10130452
> 
> 赞同：1
> 
> 时间：2012-04-12T19:30:28.077
> 
> 标签：javascript, jquery, html, css

尝试制作一个简单的 orgchart 构建器并使用 autosize() 动态更改 textarea 中的行数。在用户创建新节点并尝试重新编辑父节点之前，它一直有效。

我还有一些简单的代码，用于调整内容少于一行的文本区域的 cols 大小。我开始为行编写类似的代码，但似乎无法弄清楚。我希望做一些轻量级的东西来代替插件。

请注意，我所有的个人 jquery 代码都标记在“javascript”的末尾。 [这是jsfiddle](http://jsfiddle.net/B9L9n/1/)

任何帮助是极大的赞赏。

还有另一个额外的问题：我可以在节点之间画线的最佳方式是什么？像下拉树样式一样？

# python - 为什么 -1 和 -2 在 CPython 中都散列为 -2？

> ID：10130454
> 
> 赞同：42
> 
> 时间：2012-04-12T19:30:34.430
> 
> 标签：python, hash, cpython

> **可能重复：**
> [何时计算 python 对象的哈希值，为什么 -1 的哈希值不同？](https://stackoverflow.com/questions/7648129/when-is-a-python-objects-hash-computed-and-why-is-the-hash-of-1-different)

如果 Python，为什么`-1`两者`-2`都哈希到相同的数字？

既然他们这样做了，Python 是如何区分这两个数字的呢？

```
>>> -1 is -2
False
>>> hash(-1) is hash(-2)
True
>>> hash(-1)
-2
>>> hash(-2)
-2 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-12T19:34:23.837

`-1`是 CPython 的 C 级别的保留值，它防止哈希函数能够产生`-1`. 正如 DSM 所指出的，IronPython 和 PyPy 中的情况并非如此`hash(-1) != hash(-2)`。

请参阅[此 Quora 答案](http://www.quora.com/In-Python-why-do-1-and-2-both-hash-to-2)：

> 如果你在 C 扩展模块中编写一个类型并提供一个`tp_hash` 方法，你必须避免`-1`——如果你 return `-1`，Python 会假设你打算抛出一个错误。
> 
> 如果你用纯 Python 编写一个类并提供一个`__hash__`方法，那么谢天谢地，没有这样的要求。但那是因为调用您的`__hash__`方法的 C 代码会为您执行此操作 - 如果您的 `__hash__`返回`-1`，则`hash()`应用于您的对象将实际返回`-2`。

这实际上只是重新包装了来自[effbot](http://effbot.org/zone/python-hash.htm)的信息：

> 哈希值`-1`是保留的（它用于标记 C 实现中的错误）。如果哈希算法生成这个值，我们就简单地使用`-2`。

您也可以在源代码中看到这一点。例如对于 Python 3 的`int`对象，这是在[哈希实现](https://github.com/python/cpython/blob/v3.6.0/Objects/longobject.c#L3004)的末尾：

```
if (x == (Py_uhash_t)-1)
    x = (Py_uhash_t)-2;
return (Py_hash_t)x; 
```

* * *

> 既然他们这样做了，Python 是如何区分这两个数字的呢？

由于所有散列函数都将较大的输入空间映射到较小的输入空间，因此无论散列函数有多好，总是会发生冲突。例如，考虑散列字符串。如果哈希码是 32 位整数，则您有 2^32（略多于 40 亿）个哈希码。如果您考虑所有长度为 6 的 ASCII 字符串，您的输入空间中有 (2^7)^6（略低于 4.4 万亿）不同的项目。仅此一套，无论您多么出色，都可以保证有很多很多碰撞。向其中添加 Unicode 字符和无限长度的字符串！

因此，哈希码仅*提示*对象的位置，随后进行相等性测试以测试候选键。要在哈希表集中实现成员资格测试，哈希码会为您提供“桶”编号，以便在其中搜索值。但是，所有具有相同哈希码的集合项都在存储桶中。为此，您还需要一个相等性测试来区分存储桶中的所有候选者。

这种散列码和相等对偶性在[CPython 的可散列对象文档](http://docs.python.org/glossary.html#term-hashable)中有所暗示。在其他语言/框架中，有一个准则/规则，如果您提供自定义哈希码函数，您还必须提供自定义相等测试（在与哈希码函数相同的字段上执行）。

* * *

事实上，今天的 Python 版本正好解决了这个问题，当它（相同的哈希值，但大规模）被用作拒绝服务攻击时，它提供了一个安全补丁来解决效率问题 - [http://mail.python.org /pipermail/python-list/2012-April/1290792.html](http://mail.python.org/pipermail/python-list/2012-April/1290792.html)

# c# - 创建 SQL 字符串 - 可能涉及 DISTINCT、GROUP BY 或 ..？

> ID：10130455
> 
> 赞同：2
> 
> 时间：2012-04-12T19:30:40.057
> 
> 标签：c#, sql-server, linq, tsql

我有这个表`Test { Id:int, data:string }`- 一个有两列和 n 行的表。

事实：

*   Id 是唯一的（并说明添加项目的顺序）
*   数据可以有重复
*   如果项目按数据分组，则所有 Id 都是连续的

在 LINQ 中，我会做类似的事情：

```
class Row
{
    public int Id      { get; set; }
    public string Data { get; set; }
}
public static class MyTestClass
{
    public static void Test()
    {
        IEnumerable<Row> rows = new List<Row>
        {
            new Row { Id = 1, Data = "42"},
            new Row { Id = 2, Data = "42"},
            new Row { Id = 3, Data = "11"},
            new Row { Id = 4, Data = "11"},
            new Row { Id = 5, Data = "11"},
            new Row { Id = 6, Data = "65"},
        };
        var result = rows.GroupBy(r => r.Data)
                         .OrderByDescending(g => g.First().Id)
                         .Select(g => g.Key)
                         .ToList();
        var str = string.Join(" ", result);
        Console.WriteLine(str);
    }
} 
```

这将打印：

> 65
> 
> 11
> 
> 42

如何在 SQL 中以有效的方式编写此代码（对于 MS SQL）？我一直在使用不同的解决方案，`"SELECT DISTINCT Data, Id FROM Test ORDER BY Id DESC"`但显然这会根据两列返回不同的结果——这显然不是我想要的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:34:17.230

你能试试这个吗？

```
SELECT Data, MAX(Id)
FROM Test 
GROUP BY Data
ORDER BY MAX(Id) DESC 
```

**更新：**

由于 Id 应该带有聚合函数，并且与作者的要求无关，因此我使用了 MAX 函数，我猜可以使用任何其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:47:54.160

```
SELECT DISTINCT Test.Data
FROM (SELECT Data
    FROM Test
    GROUP BY Data) as Grouping
    INNER JOIN Test on Test.Data = Grouping.Data
ORDER BY Test.Id DESC 
```

我会试试这个

# arrays - 如何在 Cobol 中获取数组的大小？

> ID：10130463
> 
> 赞同：4
> 
> 时间：2012-04-12T19:31:14.833
> 
> 标签：arrays, cobol

我想在 COBOL 中获取表的长度（我的意思是数组中元素的数量）。我看到的惯例通常是对其进行硬编码以匹配工作存储中的出现。但是我希望代码得到长度，这样如果工作存储发生变化，程序重新编译，那么过程划分语句就不需要更改。这既是为了减少维护工作，又是为了防止在 5000 行代码中“遗漏”一次使用，并且可能允许代码位于可在具有不同表长度的多个程序中使用的复制代码中。

所以这是我想出的唯一解决方案。

```
IDENTIFICATION DIVISION.
PROGRAM-ID. TESTPROG.
DATA DIVISION.
WORKING-STORAGE SECTION.
01 THIS-LENGTH    PIC 9(04).
01 THIS-GROUP.
   05 THIS-TABLE  PIC X(20) OCCURS 15 TIMES.
PROCEDURE DIVISION.

    COMPUTE THIS-LENGTH = LENGTH OF THIS-GROUP
                         / LENGTH OF THIS-TABLE.
     DISPLAY LENGTH OF THIS-GROUP ' / ' LENGTH OF THIS-TABLE
             ' = ' THIS-LENGTH.
 EXIT-PROG.
     STOP RUN. 
```

这输出

```
000000300 / 000000020 = 0015 
```

所以这行得通，但它很笨重。它需要围绕行的虚拟组级别，只是为了获得它们的长度。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:18:59.347

我会使用一个 78 的项目作为大小并在 OCCURS 中使用它，然后如果你想在外部控制这个大小，你可以在它周围添加一些条件语句......

香草便携式示例将是：

```
 WORKING-STORAGE SECTION.
  78 THIS-TABLE-SIZE VALUE 15.

   01 THIS-LENGTH    PIC 9(04).
   01 THIS-TABLE     PIC X(20) OCCURS THIS-TABLE-SIZE TIMES.
   PROCEDURE DIVISION.
      DISPLAY THIS-TABLE-SIZE. 
```

但是使用 $if.. 示例将是：

```
 WORKING-STORAGE SECTION.
  $if THIS-TABLE-SIZE defined
  $display THIS-TABLE-SIZE is changed
  $else
   78 THIS-TABLE-SIZE VALUE 15.
  $end

   01 THIS-LENGTH    PIC 9(04).
   01 THIS-TABLE     PIC X(20) OCCURS THIS-TABLE-SIZE TIMES.
   PROCEDURE DIVISION.
      DISPLAY THIS-TABLE-SIZE. 
```

然后默认编译/运行将产生：

```
Y:\DemoAndTests\size.of>cobol testprog.cbl nologo int();
* Generating testprog
* Data:         800     Code:         464     Literals:         144

Y:\DemoAndTests\size.of>run testprog
15 
```

但是，如果设置了常数...

```
Y:\DemoAndTests\size.of>cobol testprog.cbl nologo int() constant"THIS-TABLE-SIZE(20)";
THIS-TABLE-SIZE is changed
* Generating testprog
* Data:         896     Code:         464     Literals:         144

Y:\DemoAndTests\size.of>run testprog
20 
```

我还会考虑将 78 级移至字帖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:46:21.393

我觉得将其描述为“虚拟组级别”很奇怪。我这样定义：

```
05  DELIBERATE-DUMMY-GROUP.
    10  FILLER OCCURS 15 TIMES.
        15  ACTUAL-ENTRY-NAME PIC X(20). 
```

通常会遵循

```
05  SOMETHING-ELSE PIC something. 
```

如果你有

```
05  ACTUAL-ENTRY-NAME OCCURS 15 TIMES PIC X(20).
05  SOMETHING-ELSE PIC something. 
```

你*可以*

定义

```
01  W-ADDRESS-OF-TABLE USAGE POINTER.
01  FILLER REDEFINES W-ADDRESS-OF-TABLE.
    05  W-AOT-AS-NUMBER COMP-5 PIC 9(9).
01  W-ADDRESS-OF-AFTER-TABLE USAGE POINTER.
01  FILLER REDEFINES W-ADDRESS-OF-AFTER-TABLE.
    05  W-AOAT-AS-NUMBER COMP-5 PIC 9(9).

SET W-ADDRESS-OF-TABLE TO ADDRESS OF ACTUAL-ENTRY-NAME ( 1 )
SET W-ADDRESS-OF-AFTER-TABLE TO ADDRESS OF SOMETHING-ELSE

SUBTRACT W-AOT-AS-NUMBER FROM W-AOAT-AS-NUMBER
  GIVING W-LENGTH-OF-TABLE
DIVIDE W-LENGTH-OF-TABLE BY LENGTH OF ACTUAL-ENTRY-NAME
  GIVING W-NO-OF-OCCURENCES 
```

但我更愿意将 OCCURS 作为一个组的一部分。

注意：如果在“SOMETHING-ELSE”之前插入字段而不更改代码以使用新字段，则上述内容将不再有效。如果您的领域碰巧有 SYNC（实际上是“需要的”），它也不会与 SYNC 一起使用。

# ruby-on-rails - Heroku 公钥权限

> ID：10130471
> 
> 赞同：0
> 
> 时间：2012-04-12T19:31:43.517
> 
> 标签：ruby-on-rails, heroku

我一直在尝试在 Ubuntu 上的 Heroku 上设置我的 Rails 项目（我使用的是 Windows，但决定改变）。我在使用公钥时遇到问题。起初我只是从 Windows 和`heroku add:keys`它复制我的密钥。它没有用，`Permission Denied (Public Key)`当我尝试克隆时我一直在得到。我还尝试生成新密钥、删除旧密钥并添加新密钥，我已经尝试了几乎所有可以在 StackOverflow 和 Google 上找到的解决方案：

[部署 heroku 代码时权限被拒绝（公钥）。致命：远端意外挂断](https://stackoverflow.com/questions/4269922/permission-denied-publickey-when-deploying-heroku-code-fatal-the-remote-end)

[http://www.rorexperts.com/git-push-heroku-master-permission-denied-publickey-t2280.html](http://www.rorexperts.com/git-push-heroku-master-permission-denied-publickey-t2280.html)

[Heroku 怎么会给出一个权限被拒绝的错误？](https://stackoverflow.com/questions/7440273/heroku-permission-denied-publickey)

[http://zylstra.wordpress.com/2008/08/29/overcome-herokus-permission-denied-publickey-problem/](http://zylstra.wordpress.com/2008/08/29/overcome-herokus-permission-denied-publickey-problem/)

[http://www.ruby-forum.com/topic/208308](http://www.ruby-forum.com/topic/208308)

[https://groups.google.com/forum/?fromgroups#!topic/heroku/SgiGDafu4Gg](https://groups.google.com/forum/?fromgroups#!topic/heroku/SgiGDafu4Gg)

[http://eveningsamurai.wordpress.com/2011/07/13/herokus-permission-deniedpublickey-problem/](http://eveningsamurai.wordpress.com/2011/07/13/herokus-permission-deniedpublickey-problem/)

这些都没有帮助......还有什么可能是错的吗？是否有任何其他信息可以让我更容易发现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:49:15.657

您需要为您的 ubuntu 安装设置不同的 ssh 密钥。您首先需要安装`heroku gem`，但如果您收到登录错误，听起来您已经完成了。

然后您需要登录，`heroku login`并输入您的 heroku 凭据。这应该会给您一条错误消息，或者说“找不到现有的公钥..”之类的内容。

如果出现错误，您可以尝试删除`/Users/USERNAME/.ssh/id_rsa.pub`文件，然后重复上述步骤。使用这些步骤中的错误消息更新我的状态。

# function - dart 是否支持运算符重载

> ID：10130472
> 
> 赞同：22
> 
> 时间：2012-04-12T19:31:47.060
> 
> 标签：function, overloading, operator-keyword, dart

我读到 Dart 不支持函数重载。它是否支持运算符重载？如果是的话，你能用一个简单的例子告诉我它是如何完成的吗？还有什么优点等？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2019-06-11T10:02:06.247

`==`当您在新版本中使用运算符尝试重载时，所选答案不再有效。现在你需要这样做：

```
class MyClass {
  @override
  bool operator ==(other) {
    // compare this to other
  }
} 
```

但这并不安全。`other`未指定为类型，可能会发生意外情况。例如：

```
void main() {
  var a = A(1);
  var b = B(1);
  var result = a == b;
  print(result); //result is true
}

class A {
  A(this.index);

  final int index;

  @override
  bool operator ==(other) => other.index == index;
}

class B {
  B(this.index);

  final int index;
} 
```

所以你可以这样做：

```
class A {
  A(this.index);

  final int index;

  @override
  bool operator ==(covariant A other) => other.index == index;
} 
```

你需要使用`covariant`. 因为 Object 重载了`==`操作符。

# 或者你可以

测试对象类型：
访问：[hash_and_equals](https://dart-lang.github.io/linter/lints/hash_and_equals.html)

```
class A {
  A(this.index);

  final int index;

  @override
  bool operator ==(other) => other is A && (other.index == index);

  @override
  int get hashCode => index;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-12T19:56:27.627

Dart 确实支持使用**operator**关键字后跟要重载的运算符的运算符重载。以下示例重载了**MyClass**对象的**==**运算符：

 **```
class MyClass {
  operator ==(MyClass other) {
    // compare this to other
  }
} 
```

几乎所有 Darts 内置运算符都可以重载，但有一些值得注意的例外是赋值运算符**=** ~~和引用等价运算符**===**~~（不再存在）。

至于运算符重载的优点，它允许您重用具有众所周知的语义含义的运算符，例如**==**或**+**用于对对象的操作。例如，如果您有一个重载**+**运算符的 Matrix 类，那么您可以使用语法**m1 + m2**添加两个矩阵，而不是更麻烦的**m1.plus(m2)**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-14T10:56:47.537

要扩展 Lars 的答案，您还可以使用内联函数语法重载运算符。

```
class MyClass {
  operator ==(MyClass o) => id == o.id;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-10T19:01:45.623

学习如何使用运算符重载的一个惊人示例是在**dart中处理****复数**的类：

 **```
import 'dart:core';

class Complex {
  final double real;
  final double imaginary;

  Complex({this.real = 0, this.imaginary = 0});

  Complex.ri(this.real, this.imaginary);

  Complex operator +(Complex b) {
    return Complex(
        real: this.real + b.real, imaginary: this.imaginary + b.imaginary);
  }

  Complex operator -(Complex b) {
    return Complex(
        real: this.real - b.real, imaginary: this.imaginary - b.imaginary);
  }

  Complex operator *(Complex b) {
    return Complex(
        real: this.real * b.real - this.imaginary * b.imaginary,
        imaginary: this.real * b.imaginary + this.imaginary * b.real);
  }

  Complex operator /(Complex b) {
    // https://stackoverflow.com/a/41146661/6846888
    var conjugation = b.conjugate();
    var denominatorRes = b * conjugation;

    // denominator has only real part
    var denominator = denominatorRes.real;
    var nominator = this * conjugation;

    return Complex(
        real: nominator.real / denominator,
        imaginary: nominator.imaginary / denominator);
  }

  bool operator ==(b) {
    return b.real == this.real && b.imaginary == this.imaginary;
  }

  @override
  String toString() {
    return 'Complex(real: ${real}, imaginary: ${imaginary})';
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-24T07:39:00.923

从 Dart 2.7 版开始，您可以将运算符添加到现有类中，例如：

```
extension Contains on String {
  bool operator <<(Pattern other) => contains(other);
  bool operator >>(String other) => other.contains(this);
} 
```****

# clojure - 为什么 Conditional In Reduce 会导致 nil 返回？

> ID：10130478
> 
> 赞同：1
> 
> 时间：2012-04-12T19:32:13.020
> 
> 标签：clojure

给定以下函数，它采用两个参数（csv-data1 和 csv-data2，只有两行的向量向量和保证不匹配，因此将在我的输出中得到 cmp-val）。

```
(defn test-key-inclusion
    "Accepts csv-data param and an index, a second csv-data param and an index,
     and searches the second csv-data instances' rows (at index) to see if
     the first file's data is located in the second csv-data instance."

    [csv-data1 pkey-idx1 csv-data2 pkey-idx2 lnam-idx fnam-idx]

    (reduce
        (fn [out-log csv-row1]
            (let [cmp-val (nth csv-row1 pkey-idx1 nil)
                  lnam (nth csv-row1 lnam-idx nil)
                  fnam (nth csv-row1 fnam-idx)
                  temp-rc (first (key-pres? cmp-val pkey-idx2 csv-data2))]

                (if-not (nil? cmp-val)
                    (concat out-log (sorted-map cmp-val (vector lnam fnam))))))
         {}
         csv-data1)) 
```

在函数中使用这个条件，

```
(if-not (nil? cmp-val)
  (concat out-log (sorted-map cmp-val (vector lnam fnam)))))) 
```

减少回报为零。

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:04:40.633

因为如果 cmp-val 为 nil，那么您从 reduce 函数返回 nil。

有条件的应该是

```
(if cmp-val 
    (concat out-log (sorted-map cmp-val (vector lnam fnam))))) 
     out-log) 
```

请注意，这`if-not (nil? foo)`相当于`if foo`

# python - 我应该使用哪些模块来创建游戏树？

> ID：10130480
> 
> 赞同：4
> 
> 时间：2012-04-12T19:32:20.117
> 
> 标签：python, tree, artificial-intelligence

我正在为 Python 编码类编写一个项目，我有一个问题。我正在编写一个[黑白棋](http://en.wikipedia.org/wiki/Reversi)引擎，它将在游戏中向前看几个动作，然后选择它认为最好的动作。虽然我知道 python 不是一种理想的语言（因为它不像其他一些语言那么快），但我认为可以编写至少是功能性的代码，但仍然可能有点慢。

话虽如此，我正在尝试创建两个表：一个游戏板（想想一个矩阵）和一个包含整数的游戏树。我想使用一些内存高效且快速的东西来追加、删除和读取条目。

我现在使用的板子效率不高。我想问一下任何人会建议哪些模块（以及如何使用它们的说明）来编写一些与此等效但在内存上更轻的东西（例如：数组，numpy；除非我不知道如何使用其中任何一个这些）：

```
self.board = [[0, 0, 0, 0, 0, 0, 0, 0,],
              [0, 0, 0, 0, 0, 0, 0, 0,],
              [0, 0, 0, 0, 0, 0, 0, 0,],
              [0, 0, 0, 1, 2, 0, 0, 0,],
              [0, 0, 0, 2, 1, 0, 0, 0,],
              [0, 0, 0, 0, 0, 0, 0, 0,]
              [0, 0, 0, 0, 0, 0, 0, 0,],
              [0, 0, 0, 0, 0, 0, 0, 0,]] 
```

对于游戏树，我的想法取决于列表的轻量级。我正在使用的用标准 python 编写的想法类似于：

```
tree_zero = %

tree_one =  [%, %, %]

tree_two = [[%, %, %], [%, %, %], [%, %, %]]

tree_thre = [[[%, %, %], [%, %, %], [%, %, %]],
             [[%, %, %], [%, %, %], [%, %, %]],
             [[%, %, %], [%, %, %], [%, %, %]]],

tree_four = [[[[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]]],

             [[[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]]],

             [[[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]],
              [[%, %, %], [%, %, %], [%, %, %]]]] 
```

每个百分比都将是上面给出的棋盘之一（并且非常理想：并非每一轮都恰好有三个选项）。但这是一个缓慢而沉重的对象，python 很难有效地使用内存（特别是如果我比 4 层更深）。

如果有人以前使用过这样的程序或有导入有效模块的想法，请告诉我！

举一个游戏树的例子，想想[维基百科页面](http://en.wikipedia.org/wiki/Game_tree)，尤其是页面上的第一张图片。

编辑：理想情况下，我想进一步看四步，这只是前四个级别的示例。此外，将有给定树的多个副本漂浮在周围以供使用。对于像这样呈指数增长的事物，速度很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:19:20.087

在我看来，Python 非常适合这种工作！也就是说，我在使用 Python 为棋盘游戏做 AI 时度过了一段非常有趣和高效的时光。

我的第一个建议是探索[Bit Boards](http://www.fzibi.com/cchess/bitboards.htm)。虽然这里的应用示例是针对国际象棋的，但这个概念完全可以转移到黑白棋。使用 0 和 1 来表示集合大小的板上是否存在棋子不仅具有内存占用少的优势，而且还具有提高计算速度的优势（按位运算比等式运算更快）。

此外，您应该重新设计模型以某种方式实现递归（通过评分函数促进）。这样的实现意味着您可以编写单个函数并允许它扩展无限移动深度（或者更确切地说，不受您的设计限制，仅受资源限制），而不是预测和硬编码 1、2、3、4 移动的逻辑. 一个设计良好的功能适用于双方（玩家），然后可以暂停以选择适合阈值的最佳选项（根据您选择的任何标准暂停，计算位置/实时花费）。

作为参考，这里是一个[名为 Thud 的棋盘游戏](https://github.com/hexparrot/thudgame)的 github，它的要求与您的程序几乎完全相同。在这里，我使用了一个 17x17 的棋盘、三个不同的棋子和两种不同的策略——我们都可以看到这已经比黑白棋的规则更复杂了。

哦，一个好的递归模型也可以容纳多线程！

# java - 在 JSP 页面中显示 ManagedBean 属性

> ID：10130482
> 
> 赞同：-2
> 
> 时间：2012-04-12T19:32:27.840
> 
> 标签：java, jsp, jakarta-ee, javabeans

我有一个名为的会话托管 bean `personne`，我想`name`在我的 JSP 文件中显示该属性。但我不知道我怎么能做到这一点......

谢谢你的帮助，

编

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:49:09.380

```
<h:outputText value="#{personne.name}" /> 
```

# java - Java oop 设计验证

> ID：10130484
> 
> 赞同：0
> 
> 时间：2012-04-12T19:32:30.940
> 
> 标签：java, oop

我一直在阅读 Java 和 oop 设计。其中一项练习是设计一个系统来保存天文物体及其一些基本属性。

该系统需要容纳恒星、星系和行星。

每个对象都有一个类型，例如星星；矮人，巨人和正常人

开始也有颜色。

到目前为止，我从一个名为 AstronomicalObject 的所有这些对象的抽象基类开始：

```
public abstract class AstronomicalObject {
  //Is this totally pointless?
} 
```

然后我制作了 3 个类 Star、Galaxy 和 Planet 来扩展这个类。对于这些对象的每种类型，我都制作了额外的子类，即扩展 Star 的 DwarfStar。这是一个可以接受的想法吗？额外的类感觉有点多余：

```
public class DwarfStar extends Star{
  public final String SIZE = "DWARF";
  public DwarfStar(String colour) {
    super(colour);
  }
} 
```

对于颜色属性，我这样做了：

```
public class Star extends AstronomicalObject{
  public final static String YELLOW = "YELLOW";
  public final static String RED = "RED";
  public final static String WHITE = "WHITE";
  public final static String SIZE = "NORMAL";
  private String colour;

  public Star(String colour) {
    this.colour = colour;
  }

  public String getColour(){
    return this.colour;
  }
} 
```

所以要创建一个星形对象，我会使用：

```
DwarfStar ds = new DwarfStar(Star.YELLOW); 
```

不幸的是，这本书没有答案页面或讨论这个练习，所以我想知道我的解决方案是否是有效的 oop 设计。或者如果它可以改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:36:11.590

> 这完全没有意义吗？

如果您的三个对象具有`type`您所说的 a ，那么不，它不是没用的，因为您将只能在超类中编写一个 setter 和 getter，而不是在每个子类中实现它。事实上，如果每个子类都具有共同的属性，那么超类就不是没用的。

然后对于颜色，您可以使用[Enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)而不是静态变量：

```
public enum Colours{
    YELLOW, RED, WHITE, NORMAL
} 
```

并使用`Colours.RED`例如访问它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:39:10.450

这是非常有效的，如果有的话，只是很小的改进。

这个`AstronomicalObject`类在这一点上似乎毫无意义，但如果你想在未来添加一些东西，或者如果你决定每个天文物体都有质量或形状或其他什么，就应该保留这个类。同样在更大的软件解决方案中，这可能是必要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:40:20.193

我认为这是一个 OOP 练习，重要的是要考虑行星恒星和星系的共同点。也许颜色只适用于恒星和行星？大小呢？你可能想重做这个练习，更多地思考如何以这种方式描述你的类的属性

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T02:23:48.067

在 OO 设计中，组合的使用比继承更多。因此，a`Galaxy`由`Star`s 和`Planet`s 组成。您的代码应该表明这一点。a`Planet`总是属于一个单一的`Star`吗？如果是这样，那么你应该以某种方式显示出来。

其他答案指出，`Star`对于您给出的琐碎案例，子类型不是必需的，但如果您考虑[了所有天文物体类别，](http://en.wikipedia.org/wiki/Astronomical_object#Categories_by_location)则可能是这样。我认为只有在`AstronomicalObject`确实存在所有子类共有的某些功能或特征时才真正有必要。

听起来你刚刚开始，所以练习是让你熟悉组合和继承。对真实世界对象建模的 OO 设计练习的一个警告是，它们没有给您正在设计的*软件的要求。*然而，在制作面向对象设计模型时，这些要求*非常重要。*例如，如果您正在设计的软件应该对电枢望远镜用户可见的天体进行分类，则可能不需要为黑洞添加一个类（假设它们在电枢光学望远镜中不可见）可能是不必要的。

# javascript - emile.js 和 xui 动画需要双击？

> ID：10130486
> 
> 赞同：0
> 
> 时间：2012-04-12T19:32:36.677
> 
> 标签：javascript, mobile-website, xui

我正在使用 xui 和 emile 制作可折叠面板，但第一次单击需要双击，然后所有未来的单击都可以在单击时正常工作。我需要第一次单击才能单击。我还需要最初为那些非 javascript 用户隐藏带有 javascript 的列表。

谁能看到我哪里出错了？

这是我扩展 xui 的地方

xui.扩展（{

```
 togglePanel:function(dur,thePanel)
 {
    var panel = document.getElementById(thePanel);
    var theHeight =  document.getElementById(thePanel).scrollHeight;

        if(panel.closed){

        emile(panel, 'height:'+theHeight+'px',{duration:dur});
        panel.closed = false;
        }

        else{

        emile(panel, 'height:0px', {duration:dur});
        panel.closed = true;
        }
    }
}); 
```

这就是面板的调用和隐藏

```
 x$(window).load(function(e){
                        emile('item', 'height:0px', {duration:-0});
                        x$('.panel a.panelItem').click(function(e){
          x$().togglePanel(900,'item');})

        }); 
```

我也试过

```
x$('#item')setStyle ('height','0px'); 
```

隐藏内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:17:30.050

我明白了。还从 emile 的 fork 中删减了一些补间函数

徐扩展

```
 xui.extend (
    {

     togglePanel:function(dur,thePanel)
     {
          if (dur === "slow"){
             dur = 1500;
         }
         else if (dur === "fast"){
             dur = 500;
         }

        var panel = document.getElementById(thePanel);
        var theHeight =  document.getElementById(thePanel).scrollHeight;
            if(x$(this).hasClass('closed')){
            emile(panel, 'height:'+theHeight+'px',{duration:dur,easing:bounce, after: function() {
           x$(panel).removeClass('closed');
}});

            }            
            else {
            emile(panel, 'height:0px', {duration:dur,easing:easeInStrong, after: function() {
            x$(panel).addClass('closed');    
}});
            }

        }
    }); 
```

初始化

```
 x$(window).load(function(e){
     x$('#item').addClass('closed');    

x$('.panel a.panelItem').click(function(e){
    x$('#item').togglePanel('slow','item');})
      }); 
```

[以及来自https://github.com/ded/emile](https://github.com/ded/emile)的一些额外补间方法

```
 function easeOut (pos) {
    return Math.sin(pos * Math.PI / 2);
  };

  function easeOutStrong (pos) {
    return (pos == 1) ? 1 : 1 - Math.pow(2, -10 * pos);
  };

  function easeIn (pos) {
    return pos * pos;
  };

   function easeInStrong(pos) {
    return (pos == 0) ? 0 : Math.pow(2, 10 * (pos - 1));
  };

                function bounce(pos) {
    if (pos < (1/2.75)) {
        return (7.5625*pos*pos);
    } else if (pos < (2/2.75)) {
        return (7.5625*(pos-=(1.5/2.75))*pos + .75);
    } else if (pos < (2.5/2.75)) {
        return (7.5625*(pos-=(2.25/2.75))*pos + .9375);
    } else {
        return (7.5625*(pos-=(2.625/2.75))*pos + .984375);
    }
  }; 
```

仍然需要改进一点，但我们正在到达那里。

# ios - 我在 IB 中添加的方形 uiview 在设备旋转时不会跳转 - 如何在代码中重复相同的操作？

> ID：10130489
> 
> 赞同：1
> 
> 时间：2012-04-12T19:32:48.303
> 
> 标签：ios, uiview, interface-builder

我删除了 IB 中的所有“红色橡皮筋”，并将方形 UIView 准确定位在中心。在横向和纵向模式之间旋转时它不会跳跃。当我在我的代码中创建相同的

myView.autoresizingMask = UIViewAutoresizingNone;

并进行必要的框架调整

-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation

它跳到新的位置。

诡计在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:36:24.070

IB 的逻辑和你通过代码做的有点不同。好吧，当然可以在代码中做同样的事情，但是 IB 从不同的角度看待事情。

如果您真正想要的与禁用所有弹簧时 IB 的结果相同，那么您实际上想要使用以下组合。

```
UIViewAutoresizingFlexibleRightMargin | 
UIViewAutoresizingFlexibleLeftMargin | 
UIViewAutoresizingFlexibleTopMargin | 
UIViewAutoresizingFlexibleBottomMargin 
```

等于

![在此处输入图像描述](../Images/9fced737de5aed90f503dfdeacd740d9.png)

# php - 从您的数据库中订购信息

> ID：10130490
> 
> 赞同：1
> 
> 时间：2012-04-12T19:32:56.310
> 
> 标签：php, mysql

这就是我想要做的：我想要一个脚本来抓取用户曾经在我的网站上共享的所有图像，并根据他们共享时的月份/日期将它们分组显示。

这是我的表结构：

```
| user_id | post_date | story | image |
|-------------------------------------|
| 14      | mar 2012  | BLOB  | a.jpg |
| 14      | apr 2012  | BLOB  | b.jpg |
| 14      | feb 2012  | BLOB  | c.jpg |
| 14      | mar 2012  | BLOB  | d.jpg |
|_____________________________________| 
```

因此，我希望根据用户 ID 检索信息，然后根据日期分组显示。我不知道从哪里开始。组名是月份的名称，所以我是否必须进行查询才能确定用户共享帖子的不同月份？然后我如何对数据进行分组？我不希望有人为我编写所有代码。我只是不确定如何开始。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:38:51.443

从查询开始，它可能会解决您的所有问题。如果您想要一个好的答案，请附上您想要的结果示例。就像是

```
Select image, post_date
Where user_id = @userId
Order By post_date Desc 
```

然后通读结果，当返回日期的月/年/任何变化时，创建一个新的“组”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:39:43.180

您可以通过 post_date 订购

```
select fields from mytable order by post_date 
```

但你不能真正拥有如下子组：

```
select fields from mytable group by year(post_date), month(post_date) 
```

# sql - 作为大型插入的一部分的非聚集列上的 Where 子句

> ID：10130492
> 
> 赞同：0
> 
> 时间：2012-04-12T19:33:19.117
> 
> 标签：sql, clustered-index

我有以下表架构：

```
CREATE TABLE [Foo](
[id]    [int]       NOT NULL, 
[name]  [varchar(250] NULL,
[datetime_stamp] [datetime]     NULL,
CONSTRAINT [pk_Positions] PRIMARY KEY CLUSTERED 
(   [id] ASC)) 
```

假设每天有 n 次插入。每个插入包含 26000 行。对于每个插入，id 是一个唯一值。EG：insert 1，id 1，insert 2，所有行的 id 都是 2。该表有几百万行。如果我想根据时间检索给定插入的行，在 where 子句中使用 datetime_stamp 是否有意义？虽然它没有聚集，但它仍然会一起位于表中。或者有没有更有效的方法来检索给定 n 日期的所有插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:36:41.800

`datetime_stamp`在列上创建索引。

```
CREATE INDEX IX_Foo_DatetimeStamp ON Foo(datetime_stamp) 
```

# .net - 有没有办法使用 Roslyn 确定变量的潜在值？

> ID：10130502
> 
> 赞同：5
> 
> 时间：2012-04-12T19:34:17.600
> 
> 标签：.net, roslyn

我正在使用 Roslyn CTP，我正在尝试确定类中变量的值是否具有值。假设我正在尝试检测某人何时使用 BinaryExpressionSyntax 来确定字符串是否等于无“”。

例如：

```
private void StringLiteral(string a)
        {
            if (a == "")   //flagged because we do not see a explicit set of 'a'
            {
                Console.WriteLine("Empty String");
            }
            a="42";
            if (a == "")  //not flagged because 'a' has been set
            {
                Console.WriteLine("Empty String");
            }
} 
```

我可以获得 BinaryExpressionSyntax 并使用语义和语法检查左侧和右侧，但我在调试器中看不到任何跟踪可能值的内容。我知道这可能会变得粗略，例如：

```
private void BooleanTest(string a, bool b)
        {

            if (b)   
            {
                a="";
            }
            if (!b)  
            {
                a="42";
            }
             if (a == "")  // Maybe 'a' is set maybe it isn't so we will probably not flag this one
            {
                Console.WriteLine("What Do I Do?");
            }
} 
```

Roslyn CTP 是否可以确定是否已在变量上设置了潜在值？我认为这将在 StyleCOp/FxCop 规则中发挥很大作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:38:51.770

您可以尝试使用`SemanticModel.AnalyzeRegionDataFlow()`它。您给它一个文本跨度，它会告诉您有关该文本中的数据流的信息，包括肯定会在`AlwaysAssigned`属性中分配哪些变量。

整个代码（假设您有一个编译单元，而不仅仅是一个方法）可能如下所示：

```
var tree = SyntaxTree.ParseCompilationUnit(code);

var compilation = Compilation.Create("foo")
    .AddSyntaxTrees(tree);

var semanticModel = compilation.GetSemanticModel(tree);

var methods = tree.Root.DescendentNodes().OfType<MethodDeclarationSyntax>();

foreach (var method in methods)
{
    Console.WriteLine(method.Identifier.ValueText);

    var binaryExpressions = method.DescendentNodes()
        .OfType<BinaryExpressionSyntax>()
        .Where(e => e.Kind == SyntaxKind.EqualsExpression);

    foreach (var binaryExpression in binaryExpressions)
    {
        Console.WriteLine(binaryExpression);

        // get TextSpan that starts at the beginning of the method body
        // and ends at the beginning of the binary expression
        var textBefore = TextSpan.FromBounds(
            method.BodyOpt.Span.Start, binaryExpression.Span.Start);

        //Console.WriteLine(tree.Root.GetFullTextAsIText().GetText(textBefore));

        var alwaysAssigned = semanticModel.AnalyzeRegionDataFlow(textBefore)
            .AlwaysAssigned;

        var isAAlwaysAssigned = alwaysAssigned.Any(s => s.Name == "a");

        Console.WriteLine(isAAlwaysAssigned);
    }

    Console.WriteLine();
} 
```

对于您的第一种方法，它正确检测到`a`在 first 之前未分配`if`，但肯定在 second 之前分配`if`。

对于您的第二种方法，Roslyn 似乎认为`a`不必分配。但这符合 C# 编译器的行为方式。例如，以下方法不会编译：

```
private void BooleanTest(bool b)
{
    string a;
    if (b)
        a = "";
    if (!b)
        a = "42";
    if (a == "")
        Console.WriteLine("What Do I Do?");
} 
```

但是，如果您将第二个替换为`if`，`else`它将编译。同样，Roslyn 会检测到变量总是被赋值。

# cookies - 如何有效地统计来自同一个人的不同点击次数

> ID：10130503
> 
> 赞同：2
> 
> 时间：2012-04-12T19:34:18.870
> 
> 标签：cookies, ip, unique

我们正在推动一项调查，看看如何获​​得点击重定向到另一个页面的链接的不同访问者的大致数量（通过 url 缩短器）。

目前，有两种典型的方法用于区分来自不同访问者的不同点击并计算“唯一”访问者：使用 Cookie 和/或使用 IP。

它们都不是完美的，人们可以破解它（例如删除 cookie 和/或更改移动网络中的 IP），并且有缺点（具有相同 IP 的人）

忽略 HTTP 技术允许的内容（cookie / IP），我们正在寻找其他创造性的方法来尝试人们不要破解它。

例如，对于 Adsense 程序，谷歌有一个“专有算法”来做到这一点。它的依据是什么？它是否存在可以做到这一点的开源算法？

我们正在寻找的想法示例：

*   RIPE 数据库在 RIPE 数据库的原型中工作，以具有“geoloc”字段，以便运营商设置该字段（更具体地说，移动运营商）。这样您就可以知道哪个IP在哪里。当有来自移动网络的新 IP 时，您可以使用该信息来尝试限制用户。- [https://labs.ripe.net/Members/denis/geolocation-prototype-for-ripe-database](https://labs.ripe.net/Members/denis/geolocation-prototype-for-ripe-database)

*   使用某种浏览器指纹 - [https://panopticlick.eff.org/](https://panopticlick.eff.org/)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:42:10.947

如果您已经在您的网站中使用 Google 分析，则可以使用事件跟踪功能：[http ://code.google.com/intl/es/apis/analytics/docs/tracking/eventTrackerGuide.html](http://code.google.com/intl/es/apis/analytics/docs/tracking/eventTrackerGuide.html)

# c# - 如何获取当前函数的名称？

> ID：10130504
> 
> 赞同：51
> 
> 时间：2012-04-12T19:34:19.377
> 
> 标签：c#, .net, system.reflection

> **可能重复：**
> [您可以使用反射来查找当前执行方法的名称吗？](https://stackoverflow.com/questions/44153/can-you-use-reflection-to-find-the-name-of-the-currently-executing-method)
> [C#如何从代码中获取当前方法的名称](https://stackoverflow.com/questions/2652460/c-sharp-how-to-get-the-name-of-the-current-method-from-code)

例如：

```
void foo() {
    Console.Write(__MYNAME__);
} 
```

打印：`foo`

有可能在 C# 中做到这一点吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-12T19:37:00.217

尝试这个：

```
System.Reflection.MethodBase.GetCurrentMethod().Name 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-12T19:36:55.333

您可以检查堆栈跟踪

```
using System.Diagnostics;

// get call stack
StackTrace stackTrace = new StackTrace();

// get calling method name
Console.WriteLine(stackTrace.GetFrame(0).GetMethod().Name); 
```

但请注意，如果方法是内联的，您将获得父方法名称。

# unit-testing - 如何让 Google AppEngine 测试框架示例在 Python 2.7 上运行？

> ID：10130507
> 
> 赞同：0
> 
> 时间：2012-04-12T19:34:29.963
> 
> 标签：unit-testing, google-app-engine, python-2.7

在我的项目中，我一直在使用 Google 测试框架示例，位于：[https ://developers.google.com/appengine/docs/python/tools/localunittesting](https://developers.google.com/appengine/docs/python/tools/localunittesting)

这在 Python2.5 中运行良好，但现在使用 Python 2.7（是我的默认 Python 版本）它没有使用 Python 2.7 库。

测试仍在执行，但使用 Python 2.5 运行时而不是 Python 2.7

示例： - 它使用默认的 0.96 django 库 - 使用 import json 时可以找到模块 json（在生产中工作正常）

有人知道如何运行使用 Python 2.7 AppEngine SDK 的单元测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T01:12:25.883

当我从 python2.5 转到 python2.7 时，我必须在 GoogleAppEngineLauncher 首选项窗口（GAEL -> Preferences）中更新我的 python 二进制文件的路径。是你做的吗？

# php - CakePHP：有效加载静态左侧菜单

> ID：10130510
> 
> 赞同：1
> 
> 时间：2012-04-12T19:34:40.990
> 
> 标签：php, html, cakephp

我正在为控制器设置一些 CakePHP 模板文件 (.ctp) `test`。我有`/test/index`和`test/search`页面，分别使用`index.ctp`和`search.ctp`。

每个页面都有一个左侧大小的垂直菜单部分，但在每个`.ctp`将进入`/test/`.

这个左侧菜单的代码如下所示，我想避免每次创建新页面时复制和粘贴它。有没有办法为控制器的所有`.ctp`文件加载包含此代码的单独文件？`test`或者也许我正在以不正确的方式接近这个？我现在正在学习 CakePHP 1.3 附带的默认模板文件。

```
<div class="actions">
    <h3><?php __('Menu'); ?></h3>
    <ul>
        <li><?php echo $this->Html->link(__('Product Search', true), array('action' => 'search')); ?></li>
    </ul>
</div> 
```

另外，当我提出这个问题时，`div`标签中类名（“动作”）的意义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:14:00.293

您可以将 HTML 放在一个[元素](http://book.cakephp.org/1.3/view/1081/Elements)中以轻松重用它。将要重用的 HTML 放在位于以下位置的文件中：`app/views/elements/some_element.ctp`. 随心所欲地称呼它。

然后将其添加到您的视图或布局文件中：

`echo $this->element('some_element');`

`actions`只是一个类。唯一的意义是你在你的 css 中给出了什么。

使用默认的 Cake CSS 和布局，`actions`是一个向左浮动的 div，允许轻松访问由`baking`.

# .net - 通过 IronPython 控制 Windows Media Player 实例的问题

> ID：10130511
> 
> 赞同：0
> 
> 时间：2012-04-12T19:34:46.907
> 
> 标签：.net, ironpython, windows-media-player, wmp, wmplib

使用 .NET Windows Media Player 库，我能够以编程方式获取和更改 Windows Media Player 的各种文件属性（如用户评级）。我希望使用同一个库通过`Player.openPlayer(url)`调用来控制（播放、停止、下一个等）Windows Media Player 实例。理论上，这通过 Player.controls 对象应该是非常可能的，但是当我去访问它们时，没有一个控件可用。除了控件对象之外，我几乎可以使用所有播放器属性/方法/事件。这是一些示例代码来说明我尝试过的内容：

```
import clr
clr.AddReferenceToFile( "Interop.WMPLib.dll" )
from Interop.WMPLib import WindowsMediaPlayerClass
wmp = WindowsMediaPlayerClass()
wmp.openPlayer(r"C:\Users\Public\Music\Sample Music\Kalimba.mp3") 
```

这很好用，但是当我执行以下操作时：

```
print wmp.controls.isAvailable("play").ToString()
print wmp.controls.isAvailable("pause").ToString()
print wmp.controls.isAvailable("stop").ToString()
... 
```

每个控件我都错了。为什么这些控件不适用于我的（简单）应用程序？我可能会以错误的方式解决这个问题吗？我使用的是 WMP 12，所以它应该不仅仅是兼容的。我真的不想使用其他 API，但我愿意在这一点上尝试任何东西。

以下是参考文档：http: [//msdn.microsoft.com/en-us/library/dd564034%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd564034%28v=vs.85%29.aspx)

编辑： 快速修复暂时保留，但我还没有找到实际的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:38:46.550

尝试

```
print wmp.controls.get_isAvailable("play");
print wmp.controls.get_isAvailable("stop");
etc. 
```

但请记住，在您将文件加载到所述 WMP 控件之前，这些控件将不可用。

首先设置`wmp.URL`为您要播放的文件的路径，然后，当它完成加载时，只需调用`wmp.controls.play();`. 您可以侦听一个`OpenStateChange`事件以确保它是否已加载。

# php - 如何生成 .pot 文件以获得更好的可维护性？

> ID：10130512
> 
> 赞同：1
> 
> 时间：2012-04-12T19:34:52.737
> 
> 标签：php, gettext

我有一个应用程序，我在其中使用 gettext 来轻松翻译。

我遇到的问题是，每次我需要发布新版本时，我都必须使用 ICanLocalize 扫描仪扫描 .php 文件，这给了我一个新的 .po 文件。

虽然默认语言没问题，但每当我需要将其翻译成另一种语言时，我都必须从同一个新文件重新开始。

我知道这样做我错过了 gettext 的一个重要功能，但我不知道它是哪个或如何使用它。我试过谷歌搜索，我得到的唯一线索是我需要生成 .pot 文件而不是 .po，但我真的不明白它们是如何工作的。

我的程序在每次发布时都会添加新字符串，但也会删除其他字符串，因此我不想将这些字符串留在 .po 文件中。

我在这里有点迷路，有人可以至少给我一个正确方向的指针吗？

谢谢你的帮助！

**编辑** 我发现我可以从 poedit 本身生成文件，但它带来了另一个问题。我在应用程序上有 3 个不同的文本域，并且只希望一个在 pot 文件中……我会继续寻找解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:58:00.330

`xgettext`用于从源中提取 I18N'd 字符串。`msgmerge`将现有的 .po 文件合并到一个新的 .pot 文件中，并生成一个新的 .po 文件。您必须自己处理单独的域，只传递适当的源文件。

# android - Android模拟器在webview中loadUrl几次后冻结

> ID：10130513
> 
> 赞同：2
> 
> 时间：2012-04-12T19:34:54.120
> 
> 标签：android, networking, webview, emulation

我正在尝试`http://abc.com`通过模拟器加载站点并每 X 分钟自动重新加载一次。通过运行 loadUrl( `http://abc.com`) 加载站点 1-3 次后，会发生以下情况：
1\. 应用程序不再响应，大多数时候我在“adb logcat”命令中不再看到消息（也没有 GC 消息）
2\. 运行“adb shell”不会打开 shell 提示，只是卡住
3\. 有时我会看到 facebook 错误和 javascript 错误（我仍然想忽略它们并继续工作），我不知道它们是否相关
4.在加载任何站点的问题后，例如 loadUrl("http://google.com") 失败
5\. logcat 不显示任何内存问题
6\. 模拟器 UI 仍然有效。

看起来模拟器网络模块停止响应。在 Android 设备上，它似乎可以工作，但在模拟器上失败。我真的希望它在模拟器上工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:52:15.147

使用[WebView.reload()](http://developer.android.com/reference/android/webkit/WebView.html#reload%28%29)而不是[WebView.loadUrl(String)](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29)。也许模拟器只是用完了可用内存而不释放分配的内存。或者，您可以调用[WebView.freeMemory()](http://developer.android.com/reference/android/webkit/WebView.html#freeMemory%28%29)来告诉视图它应该释放使用的内存。

# android - 对 textview 的点击未转移到底层可绘制对象

> ID：10130518
> 
> 赞同：0
> 
> 时间：2012-04-12T19:35:04.797
> 
> 标签：android, layout

我有一个 Listview，每个项目都有一个背景状态 (XML) Drawable。在这个drawable之上，我有一个TextView。

当按下文本视图时，我希望可绘制状态相应地改变。

然而，这不会发生。我究竟做错了什么 ？

编辑：从 ArrayAdapter getView 方法我有：

```
 TextView name = (TextView) v.findViewById(R.id.name);
        name.setTypeface(tf);
        name.setMovementMethod(new ScrollingMovementMethod());
        name.setOnClickListener(this); 
```

这是项目布局的 XML 的一部分：

```
 <RelativeLayout 
    android:id="@+id/relative2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:gravity="center_vertical|left"   
    android:layout_marginLeft="20sp"     
    android:layout_marginRight="20sp"     
    android:background="@drawable/blue_bar">
    <TextView android:id="@+id/name"
        android:layout_toLeftOf="@+id/comment"
        android:layout_width = "fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"  
        android:layout_marginLeft="20sp"  
        android:gravity="center_vertical"        
        android:focusable="false"
        android:singleLine="true"
        android:textSize="22sp"
        android:textColor="@android:color/white"
        android:ellipsize="end">
    </TextView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:11:21.420

如果我理解，您没有从 TextView 获得触摸事件吗？

在 TextView 上添加这个标签：

```
android:clickable="true" 
```

# c# - 如何为数据类型“日期”选择月份？

> ID：10130521
> 
> 赞同：0
> 
> 时间：2012-04-12T19:35:25.810
> 
> 标签：c#, sql-server

我正在用 C# 编写一个程序，我可以按年和月选择数据并将其放入 dataGridView 中。年份部分很简单。我从组合框中选择年份，然后执行以下查询：

```
"SELECT * FROM table WHERE YEAR(date) = '" + year_comboBox.Text + "'"; 
```

因为数据库中的年份格式是 2010、2011、2012 等等，所以一切正常。但是当谈到月份时，它们在我的组合框中，如 1 月、2 月、3 月等，它们在数据库中的格式是 01、02、03 等。所以我需要不同类型的查询，或者我需要编写更多代码，以便我可以将一月、二月和其他月份的字符串转换为 01、02 等等，这并不是真正的代码效率。

那么有没有一种简单的查询类型可以让我在不输入转换月份字符串的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:38:19.663

我认为您可以修改您的组合框，以便除了一月、二月、三月等的文本之外，每条记录还有一个*值*1、2、3 等。然后您可以将该值传递给 SQL 以使用在您的月份查询中。

（我可能错了，并且将组合框与下拉列表混淆了。但是在您的年份测试中，您注意到您正在使用`year_comboBox.Text`。如果有类似的`Value`字段，请使用它来设置月份值。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:50:22.360

[您可以使用DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法将月份名称作为字符串转换为 DateTime ：

```
var monthString = DateTime.ParseExact("April", "MMMM", System.Globalization.CultureInfo.InvariantCulture).Month.ToString("00"); 
```

上面的代码会将“04”分配给`monthString`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:44:50.430

```
string query = @"SELECT * FROM table WHERE MONTH(date) = '" +  DATEPART(mm,CAST(month_combobox+ ' 1900' AS DATETIME)) + "'"; 
```

使用 DatePart 您可以从数字中获取月份名称。（不确定 ' 或 " ）

# search - @user 和 #hashtag 的 Twitter 搜索查询

> ID：10130522
> 
> 赞同：16
> 
> 时间：2012-04-12T19:35:26.377
> 
> 标签：search, twitter, widget, hashtag, social-media

我想嵌入 twitter 小部件，它将包含带有标签和用户帐户的搜索结果。'#hashtag OR @username' 不起作用

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-13T03:16:01.510

## 2018 年 6 月 19 日更新：

虽然可以在[这里](https://publish.twitter.com/)简单地构建简单的嵌入，但似乎创建更复杂的搜索查询需要新的[搜索 API](https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets.html)（受新的免费增值定价层限制），尽管您需要自己呈现/格式化响应。

> 2018 年 7 月 27 日，将不再呈现依赖于帐户特定小部件设置的时间线小部件。从那时起，所有设置都将在嵌入代码本身中作为`data-*`标记中的属性。我们预计大多数用户的时间表将按预期工作。不会应用之前自定义的设置（例如链接颜色和高度）。时间线的内容 - 推文 - 将以相同的方式呈现。
> 
> **一个值得注意的例外是搜索时间线，它将不再以相同的方式呈现，并将回退到指向 twitter.com 上相应搜索结果的简单链接。**
> 
> 我们希望您的搜索时间线可以替换为用户时间线、列表时间线、收藏时间线或点赞时间线，这样可以更精细地控制推文在您的网页上显示的内容。
> 
> 我们还继续提供[三层 RESTful 搜索 API ，](https://developer.twitter.com/en/docs/tweets/search/overview)**如果您愿意编写自己的显示代码**，它可以帮助您从搜索时间线过渡。
> 
> 参考：[Twitter 社区 - 弃用小部件设置](https://twittercommunity.com/t/deprecating-widget-settings/102295)

（重点补充）

* * *

## 已弃用

新文档是：[https](https://dev.twitter.com/docs/embedded-timelines) ://dev.twitter.com/docs/embedded-timelines在标题“搜索和#hashtag”下。

在此处创建时间线：[https](https://twitter.com/settings/widgets/new/search) ://twitter.com/settings/widgets/new/sea​​rch 。

我在以下方面取得了成功：`#hashtag AND from:@user1 OR from:@user2`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T07:58:57.930

`https://twitter.com/about/resources/widgets/widget_search`

使用搜索字符串`#hashtag OR @username`似乎工作得很好（如果`#`或`@`比另一个更受欢迎，那么你可能看不到不太受欢迎的那个）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T09:52:55.557

'from:@username AND #hashtag' 会做到这一点，尽管我在推文中有链接时会遇到问题。

# c# - ListView 和 AddRange

> ID：10130523
> 
> 赞同：0
> 
> 时间：2012-04-12T19:35:26.657
> 
> 标签：c#, linq, listview, telerik

当您有一个`AddRange`自**定义集合**并希望将集合Items 的**2 列（属性）添加到**`ListView`****`ListView`****

 ****最好通过`Telerik ListView`

一个类似的代码 - 由于这一行，它是不正确的：

```
ListViewDataItem(wi.Name, wi.ID) 
```

如果可能的话，我想要一个更好的方法

```
 ListViewDataItem[] elements ;
        ListViewDataItem lvi; 
        int c = 0 ;
        Collection.ForEach(wi =>
        {
            lvi = new ListViewDataItem(wi.Name, wi.ID);
            elements[c]  = lvi ;
            c += 1 ;
            //LvCollection.Items.Add(wi.Name, wi.ID);
        });

        LvCollection.Items.AddRange(elements); 
```

谢谢，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:42:03.910

只是一个猜测，但是查看[Telerik 文档](http://www.telerik.com/help/winforms/m_telerik_wincontrols_ui_listviewdataitem__ctor_3.html)之类的

```
LvCollection.Items.AddRange( 
    Collection.Select(wi => new ListViewDataItem( 
        wi.Name, new string[]{wi.ID.ToString()} ) ).ToArray() ); 
```

或者

```
LvCollection.Items.AddRange( 
    Collection.Select(wi => new ListViewDataItem( 
        'test', new string[]{wi.Name, wi.ID.ToString()} ) ).ToArray() ); 
```****

# django - 带有 HTTP 响应标头的 render_to_response

> ID：10130524
> 
> 赞同：10
> 
> 时间：2012-04-12T19:35:29.343
> 
> 标签：django, http-headers, render-to-response

如何在 Django render_to_response 中使用 HTTP 响应标头

我想使用 Cache-Control 但不知道它是否有效。以下是否正确：

```
render_to_response(templatename, {'Cache-Control':'no-cache'},context_instance=RequestContext(httpreq)) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T19:39:57.057

直接在响应对象上设置标头。

[https://docs.djangoproject.com/en/dev/ref/request-response/#setting-headers](https://docs.djangoproject.com/en/dev/ref/request-response/#setting-headers)

```
response = render_to_response(...)
response['Cache-Control'] = 'no-cache'
return response 
```

# javascript - Jquery Templates - 在表格元素内附加表格行并首先清除任何现有行

> ID：10130529
> 
> 赞同：0
> 
> 时间：2012-04-12T19:35:54.330
> 
> 标签：javascript, jquery, jquery-templates

我有一个看起来像这样的模板：

```
<div id="PopUpTemplate" style="display: none">
    <tr><td>${Key}</td><td>${Value}</td></tr>
</div> 
```

我想将它附加到一个表中：

```
<div id="MessageBox">
    <table>
    </table>
</div> 
```

然后使用 Jquery UI 对话框将其显示为弹出窗口，我正在这样做：

```
$('#PopUpTemplate').tmpl(data).appendTo("#MessageBox table");

        $('#MessageBox').dialog({
            autoOpen: true,
            modal: true,
            closeOnEscape: true,
            buttons: { 'Ok': function () { $(this).dialog("close"); } },
            position: 'center'
        }); 
```

我有两个问题：

第一个是模板被附加在结束`</table>`标记之后

第二个是当我多次调用它时，我会在表中添加更多数据。但我想先清除所有现有行，然后追加新集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:30:28.653

对此很新，但在弄乱了这个[小提琴](http://jsfiddle.net/fbhRm/3/)之后，我认为你可能做错了模板。如果存储在您的页面上的模板将被大多数浏览器清理，因为它不是有效的 html，对于 chrome 的实例，tr/td 标签被剥离，您的模板然后变成单个 div。然后这个 div 被正确插入，并且很可能被您的浏览器清理并放在表格之后，因为作为一行插入是没有意义的（因为它不是）。

至于替换当前行，一旦您将模板用作模板，您就可以简单地`.html`在`#MessageBox table`选择器上使用替换任何当前行而不是使用`appendTo`.

说了这么多，没有看到更多的上下文，我不能完全确定这已经回答了你的问题。也许创建一个小提琴，这样我们就可以确切地看到发生了什么。

# iphone - 子文件夹的使用不适用于 pathForResource 或 URLforResource

> ID：10130530
> 
> 赞同：0
> 
> 时间：2012-04-12T19:35:56.147
> 
> 标签：iphone, xcode, ipad, filesystems, directory

我阅读了一些项目，很高兴找到如何 [添加真正的子文件夹](https://stackoverflow.com/questions/3949368/nsbundle-pathforresource-is-null) 但是[没有](https://stackoverflow.com/questions/5022544/nsbundle-pathforresource-returns-nil-with-subdirs)任何解决方案让我在子文件夹中看到我的文件。一切都归零。

![XCode 的路径问题](../Images/a2fd79e2f3e153723b834e1b6370a7f8.png)

![目录](../Images/25158bf83f0747455bf31849943dd720.png)

我试过 pathForResource 和 URLforResource 和 inDirectory 方法。

```
 //NSString *W = [[NSBundle mainBundle] pathForResource:@"LS_ADINFO_0000_LFSB" ofType:@"xml" inDirectory:@"/2012-03-08%20(Published%20as%2008%20MAR%202012)/AERODROMES/LFSB/"];
        //urlPDF = [NSURL URLWithString:W];
        // DEBUG output: urlPDF = nil

        //urlPDF = [[NSBundle mainBundle] URLForResource:@"LFSB/LS_ADINFO_0000_LFSB.xml" withExtension:nil]; 
        // DEBUG output: urlPDF = nil

        //urlPDF = [[NSBundle mainBundle] URLForResource:@"LS_ADINFO_0000_LFSB.xml" withExtension:nil]; 
        // DEBUG output: urlPDF = file://localhost/Users/siri/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/1F5953CD-1E13-40D4-9497-8313F9DDEA77/SwissVfrm03.app/LS_ADINFO_0000_LFSB.xml 
```

如何在 XCode 中设置子目录以在 iPad App 中访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T19:50:34.390

在 iOS 应用程序中，非本地化资源位于 bundle 目录的顶层。您可以按路径创建自定义包，但默认情况下，所有资源都位于包的顶层，无论您在 Xcode 中设置了哪些目录。

[iOS Bundle 编程指南](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFBundles/AccessingaBundlesContents/AccessingaBundlesContents.html#//apple_ref/doc/uid/10000123i-CH104-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T06:10:08.987

我有一个奇怪的问题`-pathForResource:ofType:inDirectory:`。

尽管我的资源文件的目录结构在最终构建中得到了忠实保留（我通过为模拟器构建应用程序并在 Finder 中检查应用程序包的内容来检查这一点），但它会返回一个非零（但错误）的路径就好像目标文件位于应用程序包的根目录一样。

例如，

该文件位于：

`.../MyApp.app/Subdir1/Subdir2/file.png`

但是下面的代码：

```
[[NSBundle mainBundle] pathForResource:@"file" ofType:@"png" inDirectory:@"Subdir1/Subdir2"] 
```

...改为：

`.../MyApp.app/file.png`

将所有目录名称更改为 ASCII 字符解决了该问题。

# php - 在 PHP 中显式调用构造函数

> ID：10130532
> 
> 赞同：-1
> 
> 时间：2012-04-12T19:36:06.990
> 
> 标签：php

让我先澄清一下，我对 PHP 语言不太熟悉，因为我一直在使用 Java web 和 Android。以下是一个简单的 PHP 类，我试图在其中显式调用参数化构造函数。

```
final class Demo
{
    private $x;
    private $y;             

    public function __constructor($x, $y)
    {
        $this->x=$x;
        $this->y=$y;                
    }   

    public function show()
    {
        echo "Sum = ", $this->x+$this->y;   
    }
}

$d=new Demo(10, 20);
$d->show(); 
```

然而，它显示`Sum = 0`意味着构造函数没有被调用（在 Java、C# 和类似的语言中，以这种方式调用构造函数非常方便）。然后如何在上述类中调用指定的参数化构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:38:19.960

构造函数的名称是`__construct()`. `__constructor()`只是一种好奇的寻找方法。

# java - 从 Android Emulator 调用 REST Web 服务

> ID：10130541
> 
> 赞同：2
> 
> 时间：2012-04-12T19:36:51.740
> 
> 标签：java, android, web-services, rest

我正在尝试从我在模拟器上运行的 Android 应用程序调用 REST Web 服务。我可以从我的浏览器调用该服务

```
http://localhost:39064/AndroidServiceImpl.svc/submitexcerpt?excerpt=...and+the+pirate+fell+off+the+boat 
```

我可以从我的模拟器调用服务

```
http://10.0.2.2:39064/AndroidServiceImpl.svc/submitexcerpt?excerpt=...and+the+pirate+fell+off+the+boat 
```

但是当我运行这段代码时：

```
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response1;
response1 = httpclient.execute(new HttpGet("http://10.0.2.2:39064/AndroidServiceImpl.svc/submitexcerpt?excerpt=testingthisout")); 
```

我得到一个*连接被拒绝*的异常。我已将 ThreadPolicy 添加 `<user-permission android:name="android.permission.INTERNET"></user-permission>`到我的清单文件中，并将 ThreadPolicy 设置为 LAX，但仍然没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:51:53.670

我得到了答案，而不是把 `<user-permission android:name="android.permission.INTERNET"></user-permission>`
我需要的
`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`

所以只是一些关于调用 web 服务的要点：
*添加到 Manifest.xml 文件
`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`
`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>`
*使用 10.0.2.2 而不是 localhost 用于本地使用的服务
*将线程策略设置为松弛（不推荐用于生产）或使用 AsyncTask
`ThreadPolicy tp = ThreadPolicy.LAX; StrictMode.setThreadPolicy(tp);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:19:49.660

验证这`10.0.2.2`是您的机器地址（运行 ifconfig 来验证它），这也是一个常见问题，当模拟器上没有互联网时，请确保您的模拟器已连接。

# php - PHP为TXT中的每一行，增加变量的值？

> ID：10130543
> 
> 赞同：1
> 
> 时间：2012-04-12T19:36:56.090
> 
> 标签：php, parsing, loops, time, increment

我有以下代码读取一个 TXT 文件，从每一行中提取不需要的信息，然后将编辑的行存储在一个新的 TXT 文件中。

```
<?php
$file_handle = fopen("old.txt", "rb");
ob_start();

while (!feof($file_handle) ) {

$line_of_text = fgets($file_handle);
$parts = explode('\n', $line_of_text);

foreach ($parts as $str) {
 $str_parts = explode('_', $str); // Split string by _ into an array
 array_pop($str_parts); // Remove last element
 array_shift($str_parts); // Remove first element
 echo implode('_', $str_parts)."\n"; // Put it back together    (and echo newline)
}
}

$new_content = ob_get_clean();
file_put_contents("new.txt", $new_content);

fclose($file_handle);
?> 
```

我现在想插入 $hr #min 和 $sec 变量，每次保存新行时它们都会增加 1 秒。假设我的行是这样的（旧代码）：

```
958588
978567
986766 
```

我希望我的新代码如下所示：

```
125959958588
130000978567
130001986766 
```

如您所见，小时采用 24 小时格式 (00 - 23)，然后是分钟 (00 - 59) 和秒 (00 - 59)，最后是提取的 txt。

我已经制定了变量框架，但我不知道如何让变量正确递增。有人可以帮忙吗？

```
<?php
$file_handle = fopen("old.txt", "rb");
$hr = 00;
$min = 00;
$sec = 00;
ob_start();

while (!feof($file_handle) ) {

$line_of_text = fgets($file_handle);
$parts = explode('\n', $line_of_text);

foreach ($parts as $str) {
 $str_parts = explode('_', $str); // Split string by _ into an array
 array_pop($str_parts); // Remove last element
 array_shift($str_parts); // Remove first element
 echo $hr.$min.$sec.implode('_', $str_parts)."\n"; // Put it back together  (and echo newline)
}
}

$new_content = ob_get_clean();
file_put_contents("new.txt", $new_content);

fclose($file_handle);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:56:49.937

我会更容易：

```
<?php
$contents = file('old.txt');
$time = strtotime('2012-01-01 00:00:00'); // Replace the time with the start time, the date doesn't matter
ob_start();

foreach ($contents as $line) {
    $str_parts = explode('_', $line); // Split string by _ into an array
    array_pop($str_parts); // Remove last element
    array_shift($str_parts); // Remove first element

    echo date('His', $time) . implode('_', $str_parts) . "\n"; // Put it back together  (and echo newline)

    $time += 1;
}

$new_content = ob_get_clean();
file_put_contents("new.txt", $new_content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:48:45.797

我认为您正在内部循环中寻找类似的东西：

```
$sec++;
if (($sec==60) { 
    $min++; 
    $sec=0 
    if (($min==60) { 
        $hr++; 
        $min=0; 
        if (($hr==25) { $hr=0; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:55:46.677

您拥有的格式是 UNIX 域中的日期，例如第一个日期：

```
gmdate('His', 0);    # 000000
gmdate('His', 60);   # 000100
gmdate('His', 3600); # 010000 
```

因此，您只需传入秒数，gmdate 函数就会为您设置格式。

# android - Android 形状和可绘制对象

> ID：10130546
> 
> 赞同：-1
> 
> 时间：2012-04-12T19:37:19.577
> 
> 标签：android, drawable

我想知道我是否从某个地方获得图像并对其进行分层。

例如：

我有这个包含我的 Facebook 个人资料图片的 Drawable 对象。我有另一个更大的可绘制对象，它应该是我的个人资料图片的框架。如何以编程方式将这两层添加到一个 Drawable 对象？

### 框架：

[框架 http://site.pelecode.co.il/profile/background.png](http://site.pelecode.co.il/profile/background.png)

### 资料图片：

[框架 http://site.pelecode.co.il/profile/profile.jpg](http://site.pelecode.co.il/profile/profile.jpg)

### 一起：

[框架 http://site.pelecode.co.il/profile/together.png](http://site.pelecode.co.il/profile/together.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:44:24.183

您可以执行以下操作

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip"
    android:background="@drawable/frame"
    android:src="@drawable/content" /> 
```

填充是你的框架

# c - 使用 system() 复制文件（带有“cp”）永远不会返回？

> ID：10130558
> 
> 赞同：0
> 
> 时间：2012-04-12T19:38:33.500
> 
> 标签：c, system

```
char cmd[256];
memset(cmd,0,256);
sprintf(cmd, "cp %s %s", "test1.txt", "test2.txt");
system(cmd);
printf("cmd completed\n"); 
```

当我运行上述代码时，我的应用程序在系统调用时挂起。我从来没有到达 printf 行。我在带有 GCC 编译器的 Linux Centos 上运行。

任何帮助表示赞赏。

如果我在单独的应用程序中运行上述代码（在主应用程序中复制粘贴）。它运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:58:14.147

作为一个完整的程序，下面的代码在大多数情况下都能正常工作。

我可以让它挂起的唯一方法是如果`test1.txt`是导致`cp`挂起的特殊文件类型。例如`mkfifo test1.txt`会给你有趣的结果。通过有趣的结果，我的意思是你必须用 CTRL+C、kill 等来终止程序。

您的问题很可能不在您发布的代码中。

```
/* copy.c, 
   compile using the command "gcc -o copy copy.c"
   run using "./copy"
*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define CMD_SIZE 256
char cmd[CMD_SIZE];

int main(int argc, char **argv)
{
  memset( cmd, 0, CMD_SIZE );
  sprintf( cmd, "cp %s %s", "test1.txt", "test2.txt" );
  system(cmd);
  printf("cmd complete\n");
} 
```

作为健全性检查，您可以尝试添加`printf("%d\n", BUFSIZE)`以检查的值`BUFSIZE`并`printf("%s\n", cmd)`确保命令看起来确实像您想要的那样。

# c# - NULL 上的 Radiobuttonlist 选定值

> ID：10130561
> 
> 赞同：0
> 
> 时间：2012-04-12T19:38:58.727
> 
> 标签：c#, vb.net, radiobuttonlist, selectedvalue

我在另一个帖子中得到了这个

```
<asp:RadioButtonList runat=server ID="rd" SelectedValue='<%# Bind("sex").GetType() == typeof(DBNull) ? null : Bind("sex") %>'
       <asp:ListItem Text="male" Value="1"></asp:ListItem>
       <asp:ListItem Text="female" Value="2"></asp:ListItem>
</asp:RadioButtonList> 
```

这是正确的语法吗？如果是的话，有人可以给它的VB版本吗？

```
SelectedValue='<%# Bind("sex").GetType() == typeof(DBNull) ? null : Bind("sex") %>' 
```

谢谢

编辑：这是该帖子的链接：[https ://stackoverflow.com/a/5765930/713847](https://stackoverflow.com/a/5765930/713847)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-13T16:20:49.983

如果您使用 value="" 向控件添加第三个不可见的 listitem，这将解决问题，因为 null 评估将能够与之匹配....您不再需要在 selectedvalue 中测试 dbnull属性。

```
<asp:RadioButtonList runat=server ID="rd" SelectedValue='<%# Bind("sex")%>'
       <asp:ListItem Text="male" Value="1"></asp:ListItem>
       <asp:ListItem Text="female" Value="2"></asp:ListItem>
       <asp:ListItem Text="" Value="" style="display:none"></asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:54:51.903

我很确定这行不通，正确的翻译是：

`If(TypeOf Bind("sex") Is DBNull, Nothing, Bind("sex"))`

为什么不在代码隐藏中以可读的方式进行呢？

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        Dim sex = getSexFromStoredProcedure()
        If Not sex Is Nothing Then rd.SelectedValue = sex
    End If
End Sub 
```

**编辑**：您评论说它在`FormView`. 我将在活动中向您展示如何做到这一点`DataBound`。

```
Private Sub FormView1_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles FormView1.DataBound
    Select Case FormView1.CurrentMode
        Case FormViewMode.ReadOnly
            ' adjust the DataSource accordingly if its not a DataRow '
            Dim row = DirectCast(FormView1.DataItem, DataRow)
            Dim LblSex = DirectCast(FormView1.FindControl("LblSex"), Label)
            Dim sex As String = row.Field(Of String)("Sex")
            LblSex.Text = If(sex Is Nothing, "", sex)

        Case FormViewMode.Edit
            ' adjust the DataSource accordingly if its not a DataRow '
            Dim row As DataRow = DirectCast(FormView1.DataItem, DataRow)
            ' assuming your RadioButtonList is inside the EditItemTemplate '
            Dim RblSex = DirectCast(FormView1.FindControl("RblSex"), RadioButtonList)
            Dim sex As String = row.Field(Of String)("Sex")
            If Not sex Is Nothing Then RblSex.SelectedValue = sex

        Case FormViewMode.Insert

    End Select
End Sub 
```

# c# - 在 asp.net 2.0 中启用和禁用文本框

> ID：10130562
> 
> 赞同：0
> 
> 时间：2012-04-12T19:39:06.810
> 
> 标签：c#, asp.net-2.0

所以代码的缩写是这样的

```
bool editable;

pageload()
{
    if (!ispostback)
    {
        editable = false; 
        aspTextbox.enable = editable;
    }
}

buttonclick()       
{
    editable = true;
    aspTextbox.enable = editable;
} 
```

但是将可编辑变量显式设置为 true 或在按钮单击的偶数处理程序中设置它，它们都没有启用该框。是否有其他属性用于此。或者我只是错过了什么。

感谢您的评论和帮助。如果您需要更多信息，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:43:15.080

你可以这样做：

将以下代码放入您的`<head>`标签中。

```
<script>
function disableText()
{
    document.getElementById("TextBox1").disabled=true;
}
function enableText()
{
    document.getElementById("TextBox1").disabled=false;
return false;
}
</script> 
```

**编辑**：

如果您不想使用添加`javascript`一个`panel`with`textbox`和`enable/disable`.`panel`

# c++ - QTableView 不刷新外键？

> ID：10130565
> 
> 赞同：0
> 
> 时间：2012-04-12T19:39:16.780
> 
> 标签：c++, qt, qtableview, qt4.7, qsqltablemodel

我有一个`QMainWindow`带两个`QTableViews`的。每个`QTableView`都有自己的`QSqlRelationalTableModel`. 我正在使用`OnManualSubmit`这两个模型的编辑策略。两个模型都访问同一个数据库，并使用`setTable`（每个访问不同的表）填充，然后是`select()`.

第二个表的模型通过适当的调用来设置，以`setRelation`将其链接到用于填充第一个模型的表。在第二个（子）视图中，我调用`view->setItemDelegate(new QSqlRelationalDelegate(view));`

一切似乎都很好：出现在第一个视图中的数据列在第二个视图相应字段的下拉列表中。

我的问题：当我向第一个（父）视图添加、编辑或删除记录并将其保存到数据库时，我应该如何刷新第二个视图以使下拉列表准确？

第二个（子）视图中可能有未保存的编辑，我不想丢失这些，也不想保存它们。我只想适当地更新下拉列表。

我试过`child_model->relationModel(fk_col)->select();`了，但它`child_model->relationModel(fk_col)->columnCount();`表明选择正在父表的所有字段上操作，这似乎是不必要的悲观。

这是我第一次尝试使用`<QtSql>`，`QTableView`所以我可能会遗漏一些基本的东西。也许有一种方法可以对两个视图使用相同的模型，并且刷新会自动发生？刷新子视图下拉菜单的适当方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:26:27.037

执行的查询`QSqlRelationalTableModel`不再包含外键。

例如，使用这个 db 结构：

```
CREATE TABLE countries (id, name);
CREATE TABLE cities(id, name, id_country); 
```

查询将如下所示：

```
SELECT id, name, country_name FROM cities 
    LEFT JOIN countries ON id_country = countries.id; 
```

这意味着，如果联接表发生更改，则必须重新执行查询才能更新表。

要自动刷新，我猜你会有：

*   使用常规`QSqlTableModel`来保留模型中的实际外键，
*   编写一个`QAbstractItemDelegate`类来显示映射的值并创建`QComboBox`编辑器。
*   每当第一个模型更改时，就会触发视图上映射列区域的重绘。

# jquery - jQuery UI 选项卡选择

> ID：10130567
> 
> 赞同：1
> 
> 时间：2012-04-12T19:39:34.483
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我在 jQuery UI 模态弹出窗口中有一个 jQuery UI 选项卡。该选项卡是由对服务的 ajax 调用驱动的数据。有 4 个选项卡，但有时第一个选项卡没有数据，具体取决于用户选择。如果第一个选项卡没有数据，我会隐藏第一个选项卡并选择第二个选项卡（第二个选项卡始终是数据）。如果第一个选项卡有数据，我会显示并选择它。隐藏和显示效果很好。选择在一定程度上起作用。包含选项卡的弹出窗口通过从包含搜索结果的表中选择数据来触发 - 弹出窗口显示选择的详细信息。如果用户首先选择一个包含第一个选项卡数据的选项卡 - 一切都很好。如果用户然后从表中选择数据，但并非一切都很好（隐藏第一个选项卡 - 选择了第二个选项卡）。如果用户随后选择了一些包含第一个选项卡数据的其他数据 - 显示并选择了第一个选项卡，但现在第二个选项卡仍然突出显示。选择第一个选项卡的 jQuery 是这样的：`$("#tabs").tabs('select', 0);`对于第二个标签：`$("#tabs").tabs('select', 1);`

# javascript - 在画布上绘制纬度/经度坐标

> ID：10130570
> 
> 赞同：2
> 
> 时间：2012-04-12T19:39:45.343
> 
> 标签：javascript, html

我在 html5 和 javascript 的网页上有一个小的可视化项目。我想通过在画布上绘制点之间的连接图。我的大问题是我不确定如何将纬度和经度坐标转换为与我的画布匹配的 xy 坐标。

我制作了网页，它读取包含位置的 txt 文件并将它们绘制在画布上。但它只适用于“正”坐标。

我的目标是它会喜欢这个： [http ://chrisarrison.net/projects/InternetMap/medium/worldBlack.jpg](http://chrisharrison.net/projects/InternetMap/medium/worldBlack.jpg)

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:42:45.080

如果你让它适用于所有积极的坐标，为什么不把所有的数字都加 180，然后它们都会是积极的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:15:05.973

这取决于您要使用哪种地图。不止一个。墨卡托、Equirectangular、Winkel-Tripel？Spudley 的答案可能有效（好吧，我认为您可能需要用数字 180*减去*纬度而不是相加），但您可能会发现自己想要一些不同的东西。

# ios - 如何为 UITextField 中的占位符文本设置可访问性特征？

> ID：10130573
> 
> 赞同：12
> 
> 时间：2012-04-12T19:39:52.923
> 
> 标签：ios, uitextfield, voiceover

我正在通过我们的 iOS 应用程序来解决可访问性问题。该应用程序的功能之一是用户可以在其中输入搜索查询的 UITextField。我已将该字段的 trait 设置为“搜索字段”，并且 VoiceOver 在大多数情况下都可以很好地处理该字段。当字段中有文本时，它会读取文本，然后说“搜索字段”。

我要解决的问题是 VoiceOver 如何处理占位符文本。当文本字段为空时，我们已设置占位符文本以显示示例查询。由于它显示为灰色文本，有视力的用户可以看到它只是占位符文本。但 VoiceOver 并没有为视障用户做出这种区分。它只是像普通文本一样读取占位符文本，没有额外的描述。

有没有办法向 UITextField 的占位符文本添加可访问性特征？还是人们通过其他方式解决了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-21T06:35:47.370

从 UITextField 派生一个自定义类，如下所示（代码在 Swift 中，但您可以适应 Objective-C）：

```
class MyTextField: UITextField {
    override public var accessibilityValue: String? {
        get { return self.text }
        set { super.accessibilityValue = newValue }
    }
} 
```

将此类用作自定义类而不是 UITextField。当该字段为空时，这将阻止 VoiceOver 读取占位符文本。

然后将您的可访问性标签设置为例如“搜索”并将可访问性提示设置为您想要提示的任何内容（请参阅 Apple 的[创建提示指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html)）。您可以通过编程方式分配这些值，但最好在 Interface Builder 中分配它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:23:52.720

我相信您可以在 NSString 对象上设置accessibilityLabel 和其他可访问性属性，然后将该字符串用作占位符文本。Voiceover 将发现该属性并使用它。

```
NSString *placeholderText = @"Search";
placeholderText.accessibilityLabel = @"Try searching for xxxx";
field.placeholder = placeholderText; 
```

类似的东西。未经测试，但我在 WWDC 开发者视频之一中看到了它。

警告：iOS 8.0 及更高版本中的行为与预期不同。

```
//In iOS 8+
NSString *placeholderText = @"Search"; //This will be announced
placeholderText.accessibilityLabel = @"Try searching for xxxx";//This will be ignored
field.placeholder = placeholderText; 
```

这个答案应该被认为是过时的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T00:08:49.637

你不能。特征仅对可访问性元素有意义。让您的 UITextField 成为“静态文本”可能是不正确的。在文本字段中的项目上设置特征将无效，即使它可能是有效代码。

你可以做的是编辑控件的accessibilityLabel。

# php - 即使明确定义了索引，关联数组也会返回未定义的索引

> ID：10130574
> 
> 赞同：0
> 
> 时间：2012-04-12T19:39:55.547
> 
> 标签：php, associative-array

我有以下（精简）代码：

```
$question = fetch_question($conn, $current_question);
var_dump($question);
echo $question["_id"]; 
```

`fetch_question()`使用`$conn`数据库连接来检索`$current_question`.

这给了我以下输出：

```
array(1) {
  [0]=>
  array(7) {
    ["_id"]=>
    string(1) "1"
    ["question"]=>
    string(10) "What's 2+2"
    ["answer1"]=>
    string(1) "1"
    ["answer2"]=>
    string(1) "2"
    ["answer3"]=>
    string(1) "3"
    ["answer4"]=>
    string(1) "4"
    ["is_right"]=>
    string(1) "4"
  }
}
<br />
<b>Notice</b>:  Undefined index: _id in <b>D:\Websites\htdocs\tests\general.php</b> on line <b>76</b><br /> 
```

现在我发现这很奇怪，`_id`定义很明确我不知道是什么让 PHP 表现得这样！

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:47:44.123

只有在 StackOverflow 上看到这里的输出后，我才意识到我实际上需要`$question[0]["_id"]`.

好吧，我们都知道这些小害虫的烦恼。

# drupal - 您如何防止您的 drupal 站点通过 q 变量重定向到外部站点？

> ID：10130576
> 
> 赞同：0
> 
> 时间：2012-04-12T19:39:59.840
> 
> 标签：drupal, url, redirect, phishing

我想知道如何禁止任何人输入类似于**www.example.com/?q=http://www.evilsite.com**的网址 ，而是将他们重定向到 404 页面或其他内容。如您所见，这引入了网络钓鱼漏洞。我知道这是可能的，因为我已经看到以前的安装重定向

仅供参考，我目前启用了干净的 URL。我的安装是drupal 6.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:36:37.220

这是全局重定向模块中的一个已知错误（此处描述为[http://drupal.org/node/768244](http://drupal.org/node/768244)），您是否也在使用它？如果是，您应该考虑将其更新到最新版本，以及您的 drupal 核心（以防万一您还没有这样做）。

至少，我无法在以下位置重现它： - Drupal Pressflow 6.25 - 全局重定向 6.x-1.4 选中了“非清理到清理 URL”选项。

# crystal-reports - 水晶选择专家问题

> ID：10130577
> 
> 赞同：0
> 
> 时间：2012-04-12T19:40:02.490
> 
> 标签：crystal-reports, formula, crystal-reports-2008

我在选择专家 - 报告中设置此方案时遇到问题：

从表中提取所有记录，如果

没有与此表格编号关联的 ID

或者

有一个与此表单号关联的 ID，但 ID_STATUS 不是 1、2、3 之一

或者

有一个与此表单号关联的 ID，但 ID_STATUS 为空

我的试用：

```
( isnull ({EMPLOYEE.ID}) or  
  ( Not isnull ({EMPLOYEE.ID}) and  
    ( not ({EMPLOYEE.ID_STATUS} in [3.00, 2.00, 1.00]) or  
      isnull ( ({EMPLOYEE.ID_STATUS}) )  
    )  
  ) 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:49:22.213

您的代码存在一些小问题，但阻止它工作的（可能）是您没有将 not() 视为第五行的函数。尝试这个。

```
isnull({EMPLOYEE.ID})
or isnull({EMPLOYEE.ID_STATUS})
or not({EMPLOYEE.ID_STATUS} in [1,2,3])
```

无需检查是否，`not(isnull({EMPLOYEE.ID}))`因为只有两种可能性：ID 状态为空或不是。

# r - 重塑数据集

> ID：10130579
> 
> 赞同：1
> 
> 时间：2012-04-12T19:40:05.673
> 
> 标签：r

我只是想知道您是否可以指导我如何根据特定标准重塑数据集以按小时排列，例如，我有以下示例数据集： ![数据框](../Images/ba661b518b52950a0e8230eaf60e62f4.png)

我正在尝试将数据集重塑为如下所示：

![在此处输入图像描述](../Images/3b6056d6d3a134c0a381a7677726d038.png)

请问我该如何进行这种重塑？非常感谢。

```
My sample data:

data = structure(list(date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L), .Label = "Jan-97", class = "factor"), day = c(1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L), hour = c(1L, 2L, 
3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L), Value = c(65L, 29L, 
31L, 42L, 42L, 52L, 61L, 57L, 55L, 52L, 57L, 46L)), .Names = c("date", 
"day", "hour", "Value"), class = "data.frame", row.names = c(NA, 
-12L)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:50:43.997

这使用`reshape2`包。我确信它可以用这个`reshape`函数来完成，但我并不那么容易。

```
library("reshape2")
dcast(data, date+day~hour, value.var="Value") 
```

这使

```
> dcast(data, date+day~hour, value.var="Value")
    date day  1  2  3  4
1 Jan-97   1 65 29 31 42
2 Jan-97   2 42 52 61 57
3 Jan-97   3 55 52 57 46 
```

如果您不喜欢其中的名称，您可以在之后更改它们。

```
widedata <- dcast(data, date+day~hour, value.var="Value")
names(widedata)[-(1:2)] <- paste0("hour",names(widedata[-(1:2)])) 
```

所以`widedata`是：

```
> widedata
    date day hour1 hour2 hour3 hour4
1 Jan-97   1    65    29    31    42
2 Jan-97   2    42    52    61    57
3 Jan-97   3    55    52    57    46 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:52:08.893

这可以使用解决`reshape`

```
reshape(data, idvar=c('date','day'), direction='wide', timevar='hour') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T19:53:50.467

这是在基础中执行此操作的一种方法：

```
reshape(data, timevar = c("hour"), v.names = c("Value"),  
    idvar = c("date", "day"), direction = "wide") 
```

编辑：如果想保留名称，就像 Brian 使用的那样：

```
names(DF)[-c(1:2)] <- paste0("hour", 1:4)
rownames(DF)<- 1:nrow(DF)
DF 
```

产量：

```
 date day hour1 hour2 hour3 hour4
1 Jan-97   1    65    29    31    42
2 Jan-97   2    42    52    61    57
3 Jan-97   3    55    52    57    46 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-08T19:35:10.520

使用`dplyr`和`tidyr`包的更新：

```
library(tidyr)
library(dplyr)
data %>% mutate(hour=paste0('hour', hour)) %>% spread(hour, Value)
#    date day hour1 hour2 hour3 hour4
#1 Jan-97   1    65    29    31    42
#2 Jan-97   2    42    52    61    57
#3 Jan-97   3    55    52    57    46 
```

# jquery - 这是当前的长轮询实现吗？

> ID：10130581
> 
> 赞同：4
> 
> 时间：2012-04-12T19:40:16.277
> 
> 标签：jquery, ajax, long-polling

如果是current，会不会出现调用栈溢出的问题？

因为它递归地调用自身无限

如果会出现这样的问题，有没有更好的实现方式？

```
function waitForMsg(){
    $.ajax({
        type: "GET",
        url: "xxx.php",
        async: true,
        cache: false,
        timeout: 600000,
        success: function(data){
            handleFunction(data);
            waitForMsg();
        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
            XMLHttpRequest.abort();
            waitForMsg();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:41:16.947

我想这是一种递归，但严格来说不是当前上下文，因为您将匿名函数添加到传递给 ajax 函数的对象上，并且 ajax 调用立即返回（它没有做任何评估函数）。当 ajax 最终成功或失败时，无论需要调用哪个函数都处于一个全新的上下文中，具有不同的堆栈值和堆栈位置。

顺便说一句，我不确定我是否理解`XMLHttpRequest.abort();`调用。到那时，XMLHttpRequest 已经失败，所以中止不应该是必要的（我想！）。

# sql - 使用子字符串识别记录和更新记录

> ID：10130585
> 
> 赞同：0
> 
> 时间：2012-04-12T19:40:25.083
> 
> 标签：sql, substring

我有销售代表通过客户邮政编码的前三位数字与他们的客户相关联 - 这仅适用于美国客户。Profile_Zip 表有两列 Profile_Key 代表邮政编码的前三位数字的 Rep 和 Three_Digits。

```
 Profile_Key      Three_Digits
 123456            610
 123456            611
 123456            612 
```

Profile 表中保存客户记录的两个字段是 Zip（邮政编码）和一个保存销售代表 Profile_Key 的 Association 字段。

我需要运行一个查询，使用 Profile_Zip 表中代表的配置文件密钥更新客户的关联密钥。这就是我一直在使用的。

```
 update profile set association_key = 
 (select profile_key from profile_zip where three_digits = 
 (Select substring(zip, 1, 3) as ZipPrefix
 From profile group by profile.zip)) 
```

我知道为什么会出现此错误，我不知道如何使查询正常工作，或者 Substring 是否是正确/最佳的选择。

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

还有另一种方法可以做到这一点吗？谢谢。

配置文件表。John Doe 是代表 (profile_type = 4)，Mary 是客户 (profile_type = 6)。John 的 profile_key 在 Mary 的 Association_key 字段中，这就是绑定它们的原因。记录中当然还有更多字段（地址、电话等）

```
 Profile_key    Profile_Type_Key  First_Name   Last_Name   Zip    Association_Key  ...
  123456              4            John            Doe     92112    
  987654              6            Mary            Smith   90210     123456 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:49:13.093

我认为这可以满足您的要求：

```
UPDATE P
SET Association_Key = PZ.Profile_Key
FROM [Profile] P
INNER JOIN Profile_Zip PZ
    ON PZ.Three_Digits = SUBSTRING(P.Zip, 1, 3) 
```

问题是您试图将标量值设置为结果集。在这种情况下，您希望更新结果集，然后使用正确的标量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:43:46.180

错误

`Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.`

表示您在`=`需要时使用`IN`. 使用`=`时，系统只期望 1 个结果。

特别是，我猜想：

```
Select substring(zip, 1, 3) as ZipPrefix
From profile
group by profile.zip 
```

返回大量子字符串。`IN`在此子查询之外使用。

# sql-server - 使用空间索引

> ID：10130588
> 
> 赞同：12
> 
> 时间：2012-04-12T19:40:36.263
> 
> 标签：sql-server, tsql, sql-server-2012

我想学习如何在 SQL SERVER 2012 中使用空间索引。我有一些非常耗时的查询，所以我需要它。

我将非常感谢一些示例和解释。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T10:02:14.363

不久前，我在 SQLBits 会议上介绍了一个会话，您可能会发现它对您有所帮助。您仍然可以在线观看视频和幻灯片：http: [//sqlbits.com/Sessions/Event5/Creating_High_Performance_Spatial_Databases](http://sqlbits.com/Sessions/Event5/Creating_High_Performance_Spatial_Databases)

简而言之：

*   空间索引与 SQL Server 中的聚集索引和非聚集索引完全不同。
*   它们通过为空间查询提供“主要过滤器”来工作——空间索引使用网格来选择可能的候选结果的近似集合，但其中可能包括误报。
*   然后，辅助过滤器会消除误报，以获得查询的真实结果集。
*   获得快速执行空间查询的关键是创建一个准确（即误报很少）但很小（即搜索的记录不多）的索引，以便大部分工作由主过滤器完成，而不是更昂贵的二级过滤器。
*   您可以使用 SQL Server Management Studio 或使用 CREATE INDEX T-SQL 语句在几何/地理数据列上创建空间索引。但是，该索引可能并不总是在查询中自动使用。要检查是否正在使用空间索引，请查看*聚簇索引查找（空间）*项的查询执行计划。
*   为了确保使用空间索引来完成查询，您可以通过在 SELECT 语句中的表名后面包含 WITH(index(YourSpatialIndex)) 来添加显式索引提示。

有几个特定于空间索引的设置会影响主过滤器的性能。首先，我建议您坚持默认设置，即所有四个网格级别的中等分辨率，每个对象 16 个单元格。如果您使用几何数据类型，请确保设置包含整个数据集的 BOUNDING_BOX（对于地理，空间索引始终覆盖整个地球，因此没有必要这样做）。然后，尝试一次调整一个设置并测量性能增加/减少。

<plug>在即将发布的“Pro Spatial with SQL Server 2012”中有专门的章节介绍空间索引和提高空间查询的性能</plug> - [http://www.amazon.com/Pro-Spatial-SQL-Server- 2012/dp/1430234911/ref=sr_1_3?ie=UTF8&qid=1334310547&sr=8-3](https://rads.stackoverflow.com/amzn/click/com/1430234911) （完全免责声明 - 我是作者）

# ios - 使用变换从 UIImageView 中提取图像

> ID：10130595
> 
> 赞同：4
> 
> 时间：2012-04-12T19:41:19.060
> 
> 标签：ios, uiimageview, transform, cgcontextdrawimage

我写了一个基于多点触控的照片调整程序。UIImageView 显示照片时，根据用户触摸设置变换值，以扩大/缩小图像。这是一些处理多点触控的代码。

```
-(void) viewPanned:(UIPanGestureRecognizer *)g 
{
    CGPoint translate = [g translationInView:imageView];
    CGAffineTransform nt = CGAffineTransformMake(1.0, 0, 0, 1.0, translate.x, translate.y ) ;

    imageView.transform = CGAffineTransformConcat( transform, nt ) ;

    if( g.state == UIGestureRecognizerStateEnded ) {
        transform = imageView.transform ;
    }
}

-(void) viewPinched:(UIPinchGestureRecognizer *)g
{
    switch (g.state) {
        case UIGestureRecognizerStateBegan:
        {
            startScale = g.scale ;
        }
            break;
        case UIGestureRecognizerStateChanged:
        {
            CGFloat change = g.scale ;
            switch( currentMode ) {
                case 0:
                    imageView.transform = CGAffineTransformScale( transform, change, change ) ;
                    break ;
                case 1:
                    imageView.transform = CGAffineTransformScale( transform, change, 1.0 ) ;
                    break ;
                case 2:
                    imageView.transform = CGAffineTransformScale( transform, 1.0, change ) ;
                    break ;
            }
        }
            break ;
        case UIGestureRecognizerStateEnded:
        {            
            transform = imageView.transform ;
        }
        default:
            break;
    }
}

-(void) viewRotated:(UIRotationGestureRecognizer *)g
{
    CGFloat rotation = g.rotation ;

    imageView.transform = CGAffineTransformRotate(transform, rotation) ;
    if( g.state == UIGestureRecognizerStateEnded ) {
        transform = imageView.transform ;
    }
} 
```

因此，程序会保留原始照片并更改变换值以显示调整。最后，我得到了原始图像和变换值作为结果。至于使用 UIImageView，我可以通过将 .image 设置为原始照片并将 .transform 设置为调整的结果来重现调整后的图像。现在，要将调整后的图像重绘为单个图像，我尝试使用 CGContextConcatCTM 将变换应用于绘图图像。

```
-(UIImage *)shrinkImage:(UIImage *)img size:(CGSize)size transform:(CGAffineTransform)transform
{
    UIImage *sImage ;
    CGSize trSize = CGSizeApplyAffineTransform( size, transform ) ;
    UIGraphicsBeginImageContext(trSize) ;
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGAffineTransform tr = CGAffineTransformIdentity;
    //tr = CGAffineTransformTranslate(tr, trSize.width/2, trSize.height/2);  // only works on rotate
    tr = CGAffineTransformConcat(tr , transform);
    //tr = CGAffineTransformScale(tr, 1.0, -1.0);

    CGContextConcatCTM(context, tr);
    CGRect rect ;
    rect.origin = CGPointZero ;
    rect.size = size ;
    [img drawInRect:rect] ;
    //CGContextDrawImage(context, rect, img.CGImage); // no difference

    sImage = UIGraphicsGetImageFromCurrentImageContext() ;
    UIGraphicsEndImageContext() ;
    return sImage ;
} 
```

然后我得到了一个错误的图像，大多数情况下结果与我预期的图像不同。（我可以使用 UIImageView 与变换得到什么）我搜索了这个套件和其他套件，并找到了一些旋转解决方案，但是对于任何类型的变换都没有通用解决方案。有些机制仅适用于旋转，有些适用于扩展等。似乎 UIImageView 变换和 CGContextConcatCTM 之间的轴差异导致了问题。但我找不到任何相关信息。逻辑上 Core graphics 和 UIView origin 应该是相同的。

谁能告诉我什么是通用解决方案？

# jsp - CQ5 - 如何获取渲染的 JSP 路径或文件名

> ID：10130596
> 
> 赞同：1
> 
> 时间：2012-04-12T19:41:19.803
> 
> 标签：jsp, path, adobe, render, aem

“测试”页面正在使用一个名为“myComponent”的 CQ 页面组件。myComponent 有超过 2 个不同的 JSP 文件要呈现。我想为每个请求使用并写入 JSP 输出中呈现的 JSP 的路径或文件名。此时我可以获得当前页面、节点和组件路径（/content/test、/content/test/jcr:content、/apps/application/components/page/newComponent），但我无法获取渲染的 JSP 路径. 有谁知道如何从实际呈现的 JSP 中获取信息？多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:16:45.837

您可以使用`<%= resource.getPath() %>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T22:54:22.927

如果您使用的是 CQ5.4+，那么您可以使用 SlingRequestProcessor 来允许 CQ 调用自身来收集页面的渲染输出。此博客条目有一些进一步的细节：

[http://cqdump.wordpress.com/2012/08/01/cq5-requesting-itself/](http://cqdump.wordpress.com/2012/08/01/cq5-requesting-itself/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:41:30.490

我不知道我是否理解您的问题，但您可以执行以下操作：

```
currentPage.getPath(); 
```

希望它有所帮助：D

# arrays - 如何将逻辑或应用于 Excel 中的数组

> ID：10130598
> 
> 赞同：28
> 
> 时间：2012-04-12T19:41:43.880
> 
> 标签：arrays, excel

我试图让 Excel 通过 ORing 两个数组来使我成为一个数组。例如，让两个数组`A1:A3`为`7`, `8`,`-3`和`B1:B3`, `4`, `-8`。`-8`

这应该相当简单，但似乎

```
OR ( A1:A3 > 0 ; B1:B3 > 0 ) 
```

返回`TRUE`而不是我期望的数组`(TRUE, TRUE, FALSE)`。

当然我可以用一个肮脏的把戏，比如

```
(((A1:A3 > 0)*1 + (B1:B3 > 0)*1) >= 1) *1 
```

但谁会想要维持它呢？

`Ctrl`此外，在“CSE ( ++ `Shift`)`Enter`公式”( [http://www.mrexcel.com/articles/CSE-array-formulas-excel.php](http://www.mrexcel.com/articles/CSE-array-formulas-excel.php) )周围可能有一些东西可以搜索，但它看起来确实像黑魔法。

我错过了一些简单的事情吗？

对于那些对此感到好奇的人，我正在尝试构建的实际公式当然要复杂一些。它试图计算（通过`SUMPRODUCT`）所有行其中`(status == A OR status == B) AND Date = some cell`. 我正在寻找的 OR 只是我的一个数组，`SUMPRODUCT`并且没有在单元格中定义（这太容易了）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-12T20:13:02.770

您通常不能在“数组公式”中使用 OR 或 AND，因为正如您在此处发现的那样，它们仅返回一个结果（AND 仅当所有条件为 TRUE 时为 TRUE，OR 为 TRUE 时任何为 TRUE，如您将期望，因此在您的示例中，只要 6 个值中的至少一个为正值，您就会得到 TRUE）。

我会使用与您的建议类似的东西，有效地使用 + 代替 OR，尽管您不需要前两个 *1 因为 + 强制，所以这就足够了

`=((A1:A3 > 0) + (B1:B3 > 0) >0) *1`

尽管如果您有一个可以是一件事或另一件事的列，那么这肯定是相互排斥的，所以也许只需要

`=(A1:A3="A")+(A1:A3="B")`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-03T13:17:03.730

一个干净且相对简单的方法是使用嵌套的 IF 语句：

```
IF(A1:A3 > 0, TRUE, IF(B1:B3 > 0, TRUE, FALSE)) 
```

如果 A 中的数字大于 0，则返回 TRUE，否则，如果 B 中的数字大于 0，则返回 TRUE，否则返回 FALSE。

基本上，您只是在编写自己的 OR 函数。你可以用 AND 做同样的事情。只要你有条件和不，你可以用它们做其他一切。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-23T09:34:52.143

*8年后...*

```
=BITOR(A1:A3>0,B1:B3>0)      for a 0 or 1 binary response 
```

或者

```
=BITOR(A1:A3>0,B1:B3>0)=1    for a FALSE or TRUE boolean response 
```

记住 CTRL+SHIFT+ENTER！

似乎 AND、OR 和 XOR 对数组不友好，但 BITAND、BITOR 和 NOT 很好。要进行数组友好的 XOR，您需要将其分解为其他运算符，例如

```
=BITAND(BITOR(A1:A3,B1:B3),BITOR(NOT(A1:A3),NOT(B1:B3)))=1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-16T00:12:36.340

我为表格中某些数据的中位数做了一个数组公式。例如，数据中有 X、Y 和 Z 组。我想获得两种数据 X 和 Y 的中位数，因此无法在数组中使用 OR 语句。

我所做的是在原始数据集中创建一个新列。IF 列 A=X 或 A=Y，显示“1”，IF 不显示“0”

然后我根据新列编写了数组公式，因为所有数据组在该列中都被重新分类为 1 或 0，我不再需要数组中的 OR 语句。

这对我有用，我可以轻松地将新数据复制并粘贴到原始表中，而不会弄乱这个新的 IF 语句，因此很容易更新。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-20T11:26:43.417

您可以将该`IF`函数与您的数组结果一起使用，它将为您提供一系列 1 和 0 作为 OR。例如：

```
IF(((A1:A3>0)+(B1:B3>0)),1,0) 
```

我发现这是最简单的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-16T13:58:22.867

我同意@barry houdini，但也想指出，列是否相同或不同并不重要。+ 或 * 将解决它的 OR/AND

或：

```
=(A1:A3="A")+(B1:B3="B") 
```

与：

```
=(A1:A3="A")*(A1:A3="B") 
```

这是一个工作示例公式

```
={MAX(IF((('Stock Statement Dec2019'!$A$2:$A$676=Synthesis!$A$12)*('Stock Statement Dec2019'!$B$2:$B$676=Synthesis!A13));'Stock Statement Dec2019'!$Q$2:$Q$676))} 
```

# image - 从图像程序构建建筑物

> ID：10130600
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:00.647
> 
> 标签：image, image-processing, opencv, computer-vision, image-manipulation

我有大量的图像数据集。这些图像包含建筑物。我正在寻找一种从这些图像中提取数据的智能方法。

## 输入

*   具有粗坐标的建筑物图像的收集

* * *

## 方法

*   该程序需要能够提取建筑物的面部图像。
*   修正图像，使其为“正面”（某些图像与建筑物正面成一定角度）
*   将标签分配给建筑物表面的细节元素（窗户、门等），并在建筑物的表面内为这些元素提供坐标。
*   将标签分配给建筑物的纹理（即砖、混凝土、杂项 1、杂项 2）
*   将相似的建筑物图像组合在一起（使用大小和形状）
*   将相似的细节元素和纹理元素组合到图像的子目录中。
*   为每个建筑物图像分配坐标（随源提供）

* * *

## 输出

*   一个包含所有建筑人脸图像的干净数据库，具有关联的坐标、纹理和带有图像坐标的细节元素，可通过 Javascript 或 PHP 轻松索引。

* * *

## 帮助

*   我感谢关于这个项目的任何和所有建议。任何指向有用代码片段/库/项目的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:40:49.097

I think it's more likely that you'll get this done using Mechanical Turk than with a program

[https://www.mturk.com/mturk/welcome](https://www.mturk.com/mturk/welcome)

If so, your job would be to make a very simple to use GUI for a person to provide information you need to do the transformations and extractions.

1.  Collect 4 points that are the corners of the front face
2.  Extract that quadrilateral from the image
3.  Use a quadrilateral warp to turn that into a rectangle
4.  Show the user this image
5.  Let them tag the parts
6.  Let them fill in meta-data (Concrete, etc)
7.  Assign a QA task to a different person that just checks it over (or alternatively, give the same task to a different person and QA if they disagree)

# crystal-reports - 在 Crystal Reports 中将数字转换为单词

> ID：10130603
> 
> 赞同：9
> 
> 时间：2012-04-12T19:42:05.263
> 
> 标签：crystal-reports, formula

如何将数字转换为公式中的书面等效数字？

例如，`10000`转换为`Ten Thousand`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T03:25:59.137

You want to use the `ToWords()` and `ProperCase()` functions.

```
//{@Convert}
// returns Ten Thousand
ProperCase( ToWords(10000, 0) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T11:49:43.060

```
//{@Convert}
// returns Ten Thousand
ProperCase( ToWords(20,25000, 0) ) 
```

本场演出仅二十二万五千。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-31T07:58:11.020

如果您需要正确的印度格式，例如 **40 万 23 000...** 等，请点击链接[https://archive.sap.com/discussions/thread/2030967](https://archive.sap.com/discussions/thread/2030967)。请参阅 Balakumar Viswanathan 的评论。它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-13T12:16:56.373

```
numbervar x:= int({numberfield});
numbervar y:= {numberfield}-x);
if(y>0)then
propercase("AED "+ ToWords((x),0)+" and"+ToWords((y*100),0)+" Fils Only")
else
propercase("AED "+ToWords((x),0)+" Only"); 
```

# javascript - 在 JS 中使用几个函数和回调

> ID：10130604
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:05.763
> 
> 标签：javascript, jquery, ajax, callback

我在 document.ready 上加载了这段代码，它检查用户是否登录：

```
//Checking if the user is logged in or not
$(function(){
$.getJSON("inc/API.php", {command : "getUserName"},
    function(result){
        if(result==null){
            $("#divGreeting").html("Hello, guest!");
        }
        else {
            $("#divGreeting").html("Hello, "+result+"!");
            $("#divHeader").html("Hello, "+result+"! <a href='javascript:logout()'>Logout</a>");
        }
    }); 
```

});

如果他不是 - 它会说“你好，客人”；如果他是 - 它说“你好，*用户名*”，其中用户名是`result`这个函数中的。我需要的是在这部分中设置用户名：`$("#divGreeting").html("Hello, "+result+"!");`成为一个链接，它指向另一个带有用户 ID 的页面，而我没有。像这样：`$("#divGreeting").html("Hello, <a href='userpage.html?userid="+HAVE TO GET THE ID HERE+"'>"+result+"</a>!");`

我尝试使用此功能（它确实得到：

```
function getUserID(){
    $.getJSON("inc/API.php",
    {
        command : "getUserID"
    },
    function(result){
        return result;
    });
} 
```

并这样称呼它：`$("#divGreeting").html("Hello, <a href='userpage.html?userid="+getUserID()+"'>"+result+"</a>!");`，但这不起作用，我没有得到任何结果，除了`undefined`（我知道它与异步AJAX有关）。

这是 API.php 的内容：

```
case "getUserID":
    echo getUserID();
    break; 
```

它调用`getUserID()`文件 BusinessLogic.php 中的函数，该文件具有以下功能：

```
function getUserID()
{
$arr = select("SELECT userID FROM users WHERE username='".$_SESSION["username"]."'");
return $arr[0]["userID"];
} 
```

有人告诉我我必须使用回调，但我不知道该怎么做，如何编写这个回调。我在这里迷路了...

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:45:07.827

```
$.getJSON("inc/API.php", {command : "getUserID"}, function(result){
    var id = result;
    $.getJSON("inc/API.php", {command : "getUserName"}, function(result){
         $("#divGreeting").html("Hello, "+result+"!");
         $("#divHeader").html("Hello, <a href='userpage.html?userid="+id+"'>"+result+"</a>!");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:47:23.750

使用您的 ajax 响应的代码

```
$("#divGreeting").html("Hello, <a href='userpage.html?userid="+getUserID()+"'>"+result+"</a>!"); 
```

必须在 ajax 函数的回调中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:53:07.487

AJAX 查询不会阻止函数的执行，因此当您调用 getUserID all 时，它会初始化 AJAX 调用并返回未定义，因为没有设置返回。像建议的那样添加 return 也不起作用，因为您要做的就是返回其他东西，可能是 jQuery。

您必须先获取 id，然后才能生成任何内容。因此，当您询问用户名并且您得到一个而不是立即显示内容时，您执行 AJAX 调用以获取 id，然后回调呈现您的 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:58:10.003

您已经在使用回调。

$.getJSON 语法是：

```
jQuery.getJSON( url [, data] [callback] ) 
```

*   您的代码中有 5 个`{`括号，但只有 4 个`}`括号。也许这是错误？
*   如果您 `yourdomain.com/INC/API.php?command=getUserName`在浏览器中输入内容，您会看到什么？如果文档为空，则错误出在您的 PHP 文件中，如果出现用户名，则问题出在您的 jQuery 代码中。
*   你没有告诉我们如果你执行 javascript 代码会发生什么。出现什么？“你好用户名”，“你好客人”还是什么都没有？

# java - 如果仅从外部类访问，内部类是否需要公共访问器？

> ID：10130608
> 
> 赞同：1
> 
> 时间：2012-04-12T19:42:27.033
> 
> 标签：java

因为我可以`private`直接访问内部类的变量并且......访问`inner`类的唯一方法是通过`outer`类..**为内部类提供公共访问器/突变器方法有什么价值吗？**

```
public class Outer {
    Inner   i;

    Outer() {
        i.v = 5;
    }

    private class Inner {
        private int v;
    }  
} 
```

出于此问题的目的，假设访问时不需要延迟实例化或其他数据操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:45:43.460

好吧，将字段设为非私有将避免创建合成方法来访问这些私有成员。在您的示例中，编译的`Outer$Inner`类包含如下合成方法：

```
static int access$002(Outer$Inner, int);
   Code:
      0: aload_0
      1: iload_1
      2: dup_x1
      3: putfield      #1                  // Field v:I
      6: ireturn 
```

也许它会被内联到什么都没有，也许它不会......但是除非有任何*理由*强制它存在，否则为什么不直接提供`v`默认访问权限？

至于使用访问器方法而不是直接使用字段......这更像是一个品味问题。您不能*阻止*外部类直接访问字段，所以这*有点*像询问您是否应该为类中的私有字段创建访问器。

正如另一个答案中提到的，使用访问器使其对重构更加友好。嵌套类*只是*一个*永远*不需要移动的实现细节吗？如果是这样，也许那很好。我发现如果我有一个像这样的类，它*只是*封装没有其他行为的字段，我会公开这些字段（在私有类中，不要忘记）宣传“嘿，我没有在这里检查任何东西……”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:45:32.093

如果稍后您可能会通过函数调用或其他方式公开您的 Inner 对象，那么是的，这很重要。它对于同步目的也可能很重要，具体取决于您的 Inner 类中发生的事情

# jquery - 使用嵌套的重复元素结构限制 JQuery 选择的范围

> ID：10130610
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:37.273
> 
> 标签：jquery, jquery-selectors, nested

给定一个重复的嵌套元素结构，例如：

```
<div class="A">

  <span class="B></span>
  <span class="B></span>

  <span class="B">
     <div class="A">
        <span class="B"></span>
     </div class="A">
  </span>

</div> 
```

如何选择`<span class="B"></span>`作为根`<div class="A"></div>`元素的直接子元素的最后一个？

我累了：

```
div.A > class.B 
```

...但是（正确地）这也匹配不是根元素的直接子元素的最后一个`<div class="A"></div>`元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:54:59.287

您可以添加一些 id、类或数据级对象以使嵌套搜索更容易，或者您可以执行这个稍微有点 hackish 的版本：

```
$('div.A').first().children('span.B').last(); 
```

不过，我建议添加一个数据级别、id 或其他类来处理该级别。

例如，将您的 HTML 更改为：

```
<div class="A" data-level="first">

  <span class="B" data-level="second"></span>
  <span class="B" data-level="second"></span>

  <span class="B" data-level="second">
     <div class="A" data-level="third">
        <span class="B" data-level="fourth"></span>
     </div>
  </span>

</div> 
```

您可以执行以下操作：

```
$('span.B[data-level="second"]').last(); 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:01:31.433

jQuery 有`:last`选择器。我仍然不完全清楚您要选择哪个对象。

如果你想要最后`<span class="B"></span>`一个是 root 的直接子级`<div class="A">`，那么你有以下选项：

1）给根一个标识类：

```
<div class="A root">

  <span class="B></span>
  <span class="B></span>

  <span class="B">
     <div class="A">
        <span class="B"></span>
     </div>
  </span>

</div> 
```

而这个选择器：

```
A.root > .B:last 
```

2）指定根对象的父对象来识别它：

```
body > .A > .B:last 
```

3）使用一些代码来识别根对象：

```
$(".A").filter(function() {
    // filter out items that have an "A" class as a parent
    return($(this).parents(".A").length == 0);  
}).children(".B:last"); 
```

# jquery - 使用 twitter bootstrap 定位弹出框

> ID：10130611
> 
> 赞同：6
> 
> 时间：2012-04-12T19:42:40.743
> 
> 标签：jquery, css, twitter-bootstrap

如果我在一个`<a>`元素上有一个弹出框并按如下方式调用它

```
$(function () {
    $('#element').popover({
        placement:'top',
        title:'some title',
        content: $('#some-div').html()
    });
}); 
```

弹出框显示元素的顶部中心，如何让弹出框显示元素的右上角或左上角？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T20:36:20.973

您可以添加到标准弹出框布局的样式以将弹出框移动到您想要的位置。这是直接取自 bootstrap-popover.js 的标准弹出框布局：

```
<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div> 
```

因此，要将其向右移动 15px，您可以将以下内容添加到您的样式中：

```
.popover {margin-left: 15px;} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T20:11:16.563

到目前为止，你不能，你`top | bottom | left | right`暂时受限于这样的精度，你可以修改另一个插件的显示，例如[醉酒](http://onehackoranother.com/projects/jquery/tipsy/)的jQuery 插件，它是引导工具提示插件的基础。

[Bootdtrap 弹出窗口文档](http://twitter.github.com/bootstrap/javascript.html#popovers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:51:49.037

使用“left”而不是“margin-left”。引导弹出窗口使用绝对位置。说 .popover{left:15px;}

# javascript - 检测用户浏览器高度 >= 页面正文高度

> ID：10130612
> 
> 赞同：2
> 
> 时间：2012-04-12T19:42:44.457
> 
> 标签：javascript, jquery, user-interface

我在这里遇到了一些问题，试图找出这个问题。我已经编写了一个 jquery 函数来检测用户何时点击页面底部并触发一个函数。现在，虽然这适用于最常见的屏幕尺寸，但当用户的屏幕大到可以一次看到整个页面时，它就不起作用了，从而使之前的功能变得无用。

我想要实现的是这些情况的后备，我如何判断用户是否有这样的屏幕尺寸会触发该功能并将其余部分留给另一个？

更好的解释：如何检测用户浏览器高度是否等于或大于页面正文高度？

抱歉，如果这看起来有点混乱。

PS：以下代码是我在浏览器高度小于页面正文高度时使用的代码。

```
 if ($('body').height() <= ($(window).height() + $(window).scrollTop())) {
        //run function here when the browser-height is smaller than
        //the page's height and it has reached the bottom
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:44:53.313

```
 if ($(document).height() <= $(window).height() ) { } 
```

$(文档).height(); // 返回 HTML 文档的高度

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:46:44.297

请改用文档高度。

```
if ($(document).height() <= $(window).height())
{..} 
```

# php - 完整的材料清单

> ID：10130614
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:46.937
> 
> 标签：php, mysql

我正在尝试将一个带有 Web 界面的 mysql 数据库放在一起。这需要显示一个项目的完整组成。例如：项目**A**由 5 个组件**B**、10 个组件**C**和一个组件**D**制成。组分**B**由1个子组分**e**、1个子组分**f**和10个子组分**g**组成。组件**C**由两个子组件组成：**h**和**i**各一个。组件**D**没有子组件。**当我为项目A**输入数量（在 html/php 表单上）时**. 我想对组件和子组件进行完整分解。在这个例子中，我需要 10 **A**。我的输出应该是这样的：**

 **B - 50 包括：

*   e - 50
*   f - 50
*   克 - 500

C - 100 包括：

*   h - 100
*   我 - 100

D - 10

有人可以指出我正确的方向来开始选择这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:09:51.560

我会创建一个材料表来描述您的材料名称等。然后，我将有一个连接表，其中包含父材料 ID 的列和子材料 ID 的列以及所需的子材料的数量。

示例：材料 A 的 ID 为 1，材料 B 的 ID 为 2，材料 C 的 ID 为 3，材料 D 的 ID 为 4。如果您的材料 A 需要 1 部分材料 B 和 3 部分材料 C，则连接表中的条目会显示 [ 1（A 的 ID）、2（B 的 ID）、1（零件数）] 和 [1, 3, 3]。现在，假设材料 B 有 3 个部分 C 和 4 个部分 D，它将具有条目 [2 (B's id), 3 (c's id), 3 (parts)] 和 [2, 4 (d's id), 4 （部分）。将其拉出，您将从根 (A) 开始，向联接表询问所有具有父 ID = A 的 ID 的条目，然后对每个子材料 ID 执行相同的操作（向表询问所有条目子 id 作为父材料）等等。除非您指定某种最大深度，否则它必须是递归函数

潜在的问题是，如果你让材料 A 依赖于 B，而 B 依赖于 A，你将有无限递归。您必须进行一些严重的错误检查，以确保没有任何子项引用其树的更远的任何内容，因此它不会循环。创建这个错误检查可能是这个实现中最难的部分。

您的 select 语句将无法全部执行，因为 SQL（据我所知）并不真正支持递归，因此您可能希望创建一个参数化查询，例如“SELECT * FROM TheJoinTable WHERE parentId=?” 并一遍又一遍地运行它，直到返回的行数为 0。您还需要使此函数构建在嵌套数组上，然后您可以轻松地将其转换为页面的输出。

对于参数化查询，请查看 php 的 PDO 库。参数化查询也将解决许多 sql 注入问题，我认为这应该是一种普遍的做法。

我希望这不会太令人困惑...您的问题基本上是要求实现，我发现很难保持实现描述简短，当我尝试保持简短时，有时我最终会忘记提及某些内容。**

# bpel - 将 BPM 转换为计算机系统

> ID：10130615
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:47.387
> 
> 标签：bpel, jbpm, business-process-management, bpmn

BPM 怎么能转换成计算机系统？是否有任何程序或编程语言来进行这种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:58:55.033

尽管我无法从您的问题中获得太多收益，但您添加到此问题本身的一些标签就是答案。BPM 以符号形式正式表示，即 BPMN 标准。

为了实现 BPM 要求，有几种技术方法。

1.  将 BPM 需求实现为 Web 服务调用系统……这将是 BPEL（业务流程表达语言）

2.  将 BPM 引擎实现为应用程序（如 JBPM、Activiti、Bonitasoft stc）。这些遵循 BPMN 标准。

这是基于应用程序要求/设计的选择问题，哪种方式适合您的需求。

要回答您关于 BPM 如何转换为计算机系统的问题，您必须首先非常清楚业务规则（要求）。其次，您根据 BPMN 符号绘制这些业务规则（决策序列，如自动规则或人工决策，如批准拒绝等）。绘制 BPMN 流程后，大多数免费和商业 BPM 引擎都符合 BPMN 标准（BPMN 1.1 或 BPMN 2.0 标准）。

这些 BPM 应用程序提供工具（IDE 或基于 Web 的设计器工具）来将上述 BPMN 图转换为该 BPM 引擎中的 BPM 实现。

请记住： 1\. 如果您有一个需要与 BPM 集成的现有（将是）应用程序；需要非常仔细的思考和计划。2\. 有时；仅使用自定义编写的工作流解决方案（假设对 BPM 的需求非常少）比涉及大量资源匮乏的 BPM 应用程序要好得多，因为它会导致比它所能解决的更多的问题。

如果您想了解 BPM 的功能；jbpm 和 Activiti BPM 是值得一看的免费和开源替代品。

HTH ~阿尤斯曼

# java - servlet 收到 AJAX 调用但没有响应

> ID：10130616
> 
> 赞同：0
> 
> 时间：2012-04-12T19:42:47.687
> 
> 标签：java, javascript, tomcat, servlets, google-chrome-extension

我有一个简单的 chrome 应用程序，它向运行在 tomcat 7.0 上的 servlet 发送请求。servlet 成功接收到请求，但 chrome 应用程序从未得到响应。chrome 应用程序接收到状态 0 和 readyState 4，并使用以下命令进行调用：

```
 var xmlhttp = new XMLHttpRequest();
 xmlhttp.onreadystatechange = function() { alert(xmlhttp.status + " " + xmlhttp.readyState); }
 xmlhttp.open("GET", http://localhost:8084/NewServlet");
 xmlhttp.send(null); 
```

我的 chrome 应用程序清单包含：

```
"permissions": [
    "http://localhost/",
    "tabs"
 ] 
```

servlet 本身将流打开到浏览器并打印一条消息。有人知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:36:48.850

更改`"http://localhost/"`为`"http://localhost/*"`。第一个将只允许没有路径的请求`/NewServlet`。

# assemblies - BETA LINQPad，使用 MiniMvcProfiler 时 FileVersionInfoGetVersionInfo 引发错误

> ID：10130623
> 
> 赞同：0
> 
> 时间：2012-04-12T19:43:10.277
> 
> 标签：assemblies, linqpad

在最新的 BETA 4.37.11 中，使用 FileVersionInfo.GetVersion 时会引发异常“路径不是合法形式”。

> 在 System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength) 在 System.IO.Path.GetFullPathInternal(String path)
> 在 System.IO.Path.GetFullPath(String path) 在 System.Diagnostics.FileVersionInfo.GetFullPathWithAssert （字符串文件名）在 System.Diagnostics.FileVersionInfo.GetVersionInfo（字符串文件名）

特别是在尝试使用尝试调用的 MvcMiniProfiler.ProfiledDbConnection 时会发生这种情况

```
Version = FileVersionInfo.GetVersionInfo(typeof(MiniProfiler.Settings).Assembly.Location).ProductVersion; 
```

在静态 Settings() ctor 中。

这在使用 LINQPad 的 4.31 版本时工作正常。在 BETA 中，程序集的 Location 属性显示为“”，而在 4.31 中，它返回文件的正确路径。

有什么想法或解决方法可以让它发挥作用吗？在我的脚本中，我已经习惯了新 BETA 的一些功能，并且还没有真正期待放弃它们。

还找到了这个“包含清单的加载文件的位置。如果加载的文件是影子复制的，则位置是影子复制后的文件的位置。如果程序集是从字节数组加载的，例如当使用 Load(Byte[]) 方法，Location 是一个空字符串 ("")。

想知道 LINQPad Beta 是否改变了它加载程序集的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:46:23.040

LINQPad 确实改变了它在 4.3x 中加载程序集的方式（以避免在查询运行时锁定用户引用）。由于您描述的问题（程序集丢失了它们的位置和代码库），该机制在 4.4x 中进行了更改，因此当 LINQPad 隐藏它们时，引用的程序集具有物理存在。尝试最新的测试版 - 它应该可以解决您的问题。

# jquery - 检查名称为 selected[] 的所有选择是否为 0 以外的值

> ID：10130629
> 
> 赞同：0
> 
> 时间：2012-04-12T19:43:51.053
> 
> 标签：jquery

我该怎么做才能检查 name="chosen[]" 的所有选择器没有值 0？

[http://jsfiddle.net/LWayp/16/](http://jsfiddle.net/LWayp/16/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:48:37.670

## 演示：http: [//jsfiddle.net/LWayp/17/](http://jsfiddle.net/LWayp/17/)

```
var isAny = $('select[name="chosen_options[]"] option[value=0]:selected').length;
if (!isAny) {
    alert('No option values 0');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:48:15.557

您可以通过以下方式获取每个选择元素的值：

```
$('[name="chosen_options[]"]').each(function(){
    console.log($(this).val());
}); 
```

如果你只有三个，你可以设置一个 if 条件来单独检查它们，`$('[name="chosen_options[]"]:eq(0)').val()`其中 eq 等于 0、1 和 2。例如

```
if($('[name="chosen_options[]"]:eq(0)').val()==0 || ($('[name="chosen_options[]"]:eq(1)').val()==0) || ($('[name="chosen_options[]"]:eq(2)').val()==0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:57:38.830

```
$('select[name="chosen_options[]"]:[value="0"]').length > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:52:28.050

或这个：

```
$('select[name="chosen_options[]"]').each(function() {
        if ($(this).val() == "0") {
            alert('Choose one');
        }
    }); 
```

[http://jsfiddle.net/LWayp/18/](http://jsfiddle.net/LWayp/18/)试试这个！

# objective-c - 如何将对象添加到 NSMutableArray 中以存储在 NSUserDefaults 中？

> ID：10130630
> 
> 赞同：0
> 
> 时间：2012-04-12T19:43:54.453
> 
> 标签：objective-c, ios

> **可能重复：**
> [在 NSUserDefaults 的 NSMutableArray 中](https://stackoverflow.com/questions/537044/storing-custom-objects-in-an-nsmutablearray-in-nsuserdefaults)
> [存储自定义对象 如何在 NSUserDefaults 中存储自定义对象](https://stackoverflow.com/questions/2315948/how-to-store-custom-objects-in-nsuserdefaults)

我试图将一个从我编写的名为“Animal”的类实例化的对象存储在 NSMutableArray 中，以存储在 NSUserDefaults 中。但是，我收到此错误。

```
[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '(
    "<Animal: 0xcea7060>"
)' of class '__NSArrayM'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

这是什么意思？也许我不能将对象存储在 NSMutableArrays 中以存储在 NSUserDefaults 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:54:37.537

`NSUserDefaults`可以存储数组和字典，无论是否可变，但前提是它们包含属性列表合法类（`NSNumber`、`NSString`、`NSData`和其他一些）。对于其他类，您应该先将[对象序列化为 an`NSData`](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html) ，然后再将其放入`NSUserDefaults`（或放入您正在放入`NSUserDefaults`或写入属性列表的集合中）。

在大多数应用程序中，将自定义类放入`NSUserDefaults`其中并不经常发生，因此您可能还会考虑您`Animal`的 s 是否真的属于那里。请记住，`NSUserDefaults`用于设置、状态和其他小东西——您的应用管理的数据最好保存在其他地方。使用[归档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)或属性列表在应用程序的沙箱或 Core Data（或其他一些数据库）中写入文件。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-12T20:02:03.400

你可以签出`Archive`或`Serialization`

# winforms - 如何删除在另一个事件处理程序中创建的 TabControl？

> ID：10130636
> 
> 赞同：2
> 
> 时间：2012-04-12T19:44:38.137
> 
> 标签：winforms, c++-cli

所以我正在制作一个程序，但我碰壁了，因为我不知道如何将变量从一种方法传递给另一种方法。为了解释这种情况，我添加了代码：

1）我创建了一个`toolStripMenuItem^ TestIsvalyti`表单加载。

```
 private: System::Void Form2_Load(System::Object^  sender, System::EventArgs^  e)
         {      
            MenuStrip^ menu = gcnew MenuStrip;
            menu->Location = Point(0,0);
            menu->Size = System::Drawing::Size(this->Width, 25);

            ToolStripMenuItem^ ElDienynas = gcnew ToolStripMenuItem;
            ElDienynas->Text = "El. Dienynas";
            menu->Items->Add(ElDienynas);
            Controls->Add(menu);

            //TESTUI
            ToolStripMenuItem^ TestIsvalyti = gcnew ToolStripMenuItem;
            TestIsvalyti->Text = "ISVALYTI";
            menu->Items->Add(TestIsvalyti);
            TestIsvalyti->Click += gcnew EventHandler(this, &Form2::TestIsvalyti_Click);
            Controls->Add(menu);
            //TESTUI

         } 
```

2) 我有一个事件处理程序，它创建一个`TabControl^ ElDienynasTab`

```
 private: System::Void menuGrupe_Click(Object^ sender, EventArgs^ e)
         {

             TabControl^ ElDienynasTab = gcnew TabControl;
             ElDienynasTab->Location = Point(14, 40);
             ElDienynasTab->Size = System::Drawing::Size(768, 500);
             Controls->Add(ElDienynasTab);

             TabPage^ LankomumasPazymiai = gcnew TabPage;
             LankomumasPazymiai->Text = "Lankomumas | Pazymiai";
             ElDienynasTab->Controls->Add(LankomumasPazymiai);

             TabPage^ namuDarbai = gcnew TabPage;
             namuDarbai->Text = "Namu darbai";
             ElDienynasTab->Controls->Add(namuDarbai);       
         } 
```

3) 我为 TestIsvalyti MenuStripItem 创建了另一个事件处理程序，它必须从 2) 方法中删除 ElDienynasTab，但我在那里碰壁了，因为我不知道如何将变量传递给这个事件处理程序。

```
 void TestIsvalyti_Click(System::Object^  sender, System::EventArgs^  e)
         {
              this->Controls->Remove(ElDienynasTab);
         } 
```

请向我解释如何做和/或添加一段代码。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:40:08.143

您有两个不同的功能，`menuGrupe_Click`并且`TestIsvalyti_Click`. 函数在其他函数中看不到局部变量，因此`TabControl`如果您真的想从另一个方法中使用该特定实例，则需要增加其可见性。

在表单中创建一个字段。

```
private: TabControl^ ElDienynasTab; 
```

将 TabControl 存储在字段中而不是本地变量中。

```
this->ElDienynasTab = gcnew TabControl; 
```

如果您使用设计器将组件拖放到表单上，您会发现这是遵循的模式。事实上，除非出于某种原因需要在`Form_Load`和`menuGrupe_Click`调用中动态创建控件，否则您应该使用设计器来完成所有这些操作，而不是尝试自己编写。它将初始化代码放入`InitializeComponent()`并为您处理适当字段的创建。

# java - 上传文件时的 RichFaces 4 通知

> ID：10130638
> 
> 赞同：2
> 
> 时间：2012-04-12T19:44:45.013
> 
> 标签：java, jsf, richfaces

我有一个`<rich:fileUpload>`组件，我想在文件因类型不允许而被拒绝时显示通知。我看到 RF 有一个`<rich:notifyMessage>`，但是当文件被拒绝时我无法呈现该消息。到目前为止，我有：

```
 <rich:fileUpload id="fileUploadComp"
                     addLabel="Agregar" clearAllLabel="Quitar todos"
                     clearLabel="Quitar" deleteLabel="Quitar"
                     doneLabel="Completado" uploadLabel="Subir archivos"
                     fileUploadListener="#{uploadBean.doUpload}"
                     acceptedTypes="txt, csv" onclear="onclear(event);"
                     noDuplicate="true">
        <a4j:ajax event="uploadcomplete" render="validationButton"/>
        <a4j:ajax event="typerejected" render="notificationFileRejected"/>
    </rich:fileUpload>

    <rich:notifyMessage for="fileUploadComp" 
                        id="notificationFileRejected"
                        sticky="true"
                        ajaxRendered="true"
                        title="Hello"/> 
```

但是，例如，当我选择 JPEG 时，我看不到任何通知地球。

关于如何实现这一目标的任何想法？

**更新**

这样做的主要思想是显示一个通知，告诉用户“不允许文件类型”之类的信息。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:20:52.707

就像是：

```
<rich:fileUpload id="fileUploadComp"
                 addLabel="Agregar" clearAllLabel="Quitar todos"
                 clearLabel="Quitar" deleteLabel="Quitar"
                 doneLabel="Completado" uploadLabel="Subir archivos"
                 fileUploadListener="#{uploadBean.doUpload}"
                 acceptedTypes="txt, csv" onclear="onclear(event);"
                 ontyperejected="ontyperejected();"
                 noDuplicate="true">
    <a4j:ajax event="uploadcomplete" render="validationButton"/>
</rich:fileUpload>

<a4j:jsFunction name="ontyperejected" actionListener="#{uploadBean.setMessage()}"/>

<rich:notifyMessage stayTime="2000" nonblocking="true"/> 
```

使用java代码：

```
public void setMessage() {
  String message="Wrong filetype...";
  FacesContext.getCurrentInstance().addMessage("info", new FacesMessage(FacesMessage.SEVERITY_INFO, message, message));
} 
```

MAG，米洛·范德泽

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:24:01.900

好吧，没有我想要的那么好，但它确实有效。

```
 <rich:fileUpload id="fileUploadComp"
                     addLabel="Agregar" clearAllLabel="Quitar todos"
                     clearLabel="Quitar" deleteLabel="Quitar"
                     doneLabel="Completado" uploadLabel="Subir archivos"
                     fileUploadListener="#{uploadBean.doUpload}"
                     acceptedTypes="txt, csv" onclear="onclear(event);"
                     ontyperejected="ontyperejected();"  //THIS IS MY TRICK
                     noDuplicate="true">
        <a4j:ajax event="uploadcomplete" render="validationButton"/>
    </rich:fileUpload>

    <script>
        var ontyperejected = function(){
            alert('Archivo inválido. Tipos permitidos: .txt y .csv');
        }
    </script> 
```

只需创建一个 JScript 函数并发送警报消息。瞧。不过，如果有人知道如何实现出现和淡出的那个漂亮的小通知地球，我将非常感激！

# php - mysql加入和空

> ID：10130642
> 
> 赞同：0
> 
> 时间：2012-04-12T19:44:53.100
> 
> 标签：php, mysql, sql

我有 2 个表“浏览器”和“投票”。我需要所有浏览器，只需要 vote_ranking 和 user_id 的投票。有时没有选票，但我仍然需要浏览器。这就是我写的代码：

```
SELECT browsers.*, votes.*
FROM browsers LEFT JOIN votes ON browsers.app_id = votes.app_id
WHERE vote_ranking = '$ranking' AND user_id = $userid or vote_id IS NULL 
```

问题是当没有投票时（vote_id IS NULL），app_id 更改为 NULL。但即使投票中没有 app_id，我也需要保留浏览器 app_id。

我可以仅在 the're 是 vote_id 的行上加入表格投票吗？或者任何类似的东西做我需要的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:52:39.967

尝试这个：

```
SELECT browsers.*, votes.vote_ranking, votes.user_id
FROM browsers
LEFT JOIN votes
  ON browsers.app_id = votes.app_id
  AND vote_ranking = '$ranking' 
  AND user_id = $userid 
```

这样，**只有**当它具有适当的 vote_ranking 时，才会加入来自投票的相应记录。否则会有`NULL`s，但您仍然会保留来自 的数据`browsers`。

# r - 如何在圆形和方形中绘制随机数？

> ID：10130648
> 
> 赞同：1
> 
> 时间：2012-04-12T19:45:36.733
> 
> 标签：r, statistics, plot

我想从两个角度（鸟瞰和青蛙的视角）可视化 Polar 方法的算法。

要绘制该方法的第一步，我需要在正方形和圆形中均匀分布的随机数。

我已经能够在正方形中绘制圆，但是如何`z1`在这个构造中绘制随机数（）？

```
require (plotrix)
require (grid)
z1 = runif (100)

plot (c(-1,1), c(-1,1), type="n", asp=1)
rect(-1,-1,1,1)
draw.circle (0,0,1) 
```

以及如何改变视角？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:24:56.213

您可以不“拒绝”任何积分。下面的 R 函数需要`3*n`随机数，并且会`n`在半径的圆中生成随机选择的点`r`：

```
randp <- function(n = 1, r = 1) {
    if (n < 1 || r < 0) return(c())
    x <- rnorm(n)
    y <- rnorm(n)
    r <- r * sqrt(runif(n)/(x^2 + y^2))
    if (n == 1) U <- c(x, y)
    else        U <- cbind(r*x, r*y)
    return(U)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T20:13:33.727

要绘制点，您需要 x 和 y 坐标。...但是由于您的正方形是从 -1 到 1，您还需要缩放点（或更改正方形）：

```
x = runif(100, min=-1, max=1)
y = runif(100, min=-1, max=1)
points(x,y) 
```

**更新**

这是一个在圆上生成随机数的函数。它使用拒绝来丢弃圆外的点。它使用了一种（在我看来）有趣的方式来做到这一点：它生成一批数字，拒绝一些数字，然后再生成一些数字，直到有足够的值可用。这通常比一次生成一个数字更有效......

**再次更新**我通过直到最后才追加新批次来提高速度。还添加了速度比较。

```
rndCircle <- function(n = 100, r=1) {
    scale <- 1.15 # Generate 15% more values than requested
    m <- matrix(0, 0, 2, dimnames=list(NULL, c('x','y')))
    lst <- list(m)
    nMore <- n
    while (nMore > 0) {
      #cat("nMore=", nMore, "\n") # uncomment to see how many iterations are needed

      m <- matrix(runif(floor(nMore*scale)*2, min=-1, max=1), ncol=2)
      m <- m[rowSums(m*m) <= 1, , drop=FALSE]
      nMore <- nMore - nrow(m)
      lst[[length(lst)+1L]] <- m
    }

    # Combine and truncate to desired length
    do.call(rbind, lst)[seq_len(n),]*r
}
# Measure performance
set.seed(42); system.time( rndCircle(1e6) ) # 0.19

# Compare to @Hans Werner's solution
set.seed(42); system.time( randp(1e6) )     # 0.26 
```

# sql - 这个简单的 UPDATE FROM 查询中的错误在哪里？

> ID：10130650
> 
> 赞同：0
> 
> 时间：2012-04-12T19:45:39.293
> 
> 标签：sql, sql-server, tsql

这应该很简单，但我想把它做对，因为我正在对实时数据库进行更改（它已备份）。

我将一些列值从 CSV 文件导入到数据库表中。

现在我只想从导入的源表（查询中的 S）更新目标表（查询中的 T）。

我得到错误： `The multi-part identifier "T.account_manager_id" could not be bound.`

```
update DADatabaseMarch2012.dbo.Campaign

set 
    T.[account_manager_id]=S.[account_manager_id]
   ,T.[campaign_status_id]=S.[campaign_status_id]
   ,T.[ad_manager_id]=S.[ad_manager_id]
   ,T.[advertiser_id]=S.[advertiser_id]
from 
    [zMarch12CampaignsRestore].[dbo].[March12Eom_Campaigns] S
    inner join DADatabaseMarch2012.dbo.Campaign T ON S.id = T.id 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T19:48:50.517

这样写，使用别名作为 UPDATE 的目标。

```
update T

set 
    [account_manager_id]=S.[account_manager_id]
   ,[campaign_status_id]=S.[campaign_status_id]
   ,[ad_manager_id]=S.[ad_manager_id]
   ,[advertiser_id]=S.[advertiser_id]
from 
    [zMarch12CampaignsRestore].[dbo].[March12Eom_Campaigns] S
    inner join DADatabaseMarch2012.dbo.Campaign T ON S.id = T.id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:49:53.120

由于 T 是目标表，因此您不必在分配（SET）的左侧为其命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:48:15.150

编辑：您需要在更新中引用与 from 子句中相同的表。写“更新T”。

# c# - 如何在 Visual C# 中为 dataGridView 设置预定义值？

> ID：10130652
> 
> 赞同：0
> 
> 时间：2012-04-12T19:45:45.727
> 
> 标签：c#, .net, datagridview

我有一个带有两列（URL 和 RedirectTo）的 dataGridView

![数据网格视图1](../Images/d912a3913626c07733893aa7c0f03940.png)

我想设置预定义的值，所以当 Windows 窗体出现时，用户会看到一些预定义的值

![在此处输入图像描述](../Images/ba2abd2e52f5f6168e917843a54fa73a.png)

如何为 dataGridView 组件设置预定义值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:47:58.683

只要您没有绑定到数据源，这将起作用：

```
dataGridView1.Rows.Add("http://microsoft.com", "http://facebook.com");
dataGridView1.Rows.Add("http://yahoo.com", "stackoverflow.com"); 
```

您可以将其放入表单的`OnLoad`事件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:48:31.847

```
dataGridView.Rows.Add(predefinedValue1, predefinedValue2, ...); 
```

编辑：呸，被打败了。

# iphone - 为什么 Xcode 编译器没有警告我关于部署目标的无效方法？

> ID：10130655
> 
> 赞同：2
> 
> 时间：2012-04-12T19:46:07.193
> 
> 标签：iphone, ios, xcode

我有一个带有最新 SDK 的 Xcode (4.3.2) 项目，我希望 iOS 4.0 用户能够运行它。所以在项目设置中，我将部署目标值设置为 iOS 4.0。在 Targets 设置中也是如此。

但是，我刚刚意识到我的代码正在使用 iOS 5+ API 调用。这个：

```
[self.tabController.tabBar setBackgroundImage:tabBackground];      //Invalid in iOS 4.x ??? 
```

编译器没有给我任何警告。不应该吗？？？在 iOS 4.0 设备上执行时会发生什么？可悲的是，我目前没有一个可以测试。这让我非常担心在其他地方也会发生同样的事情，而我的程序现在已经无可救药地与 iOS 5 绑定了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:49:57.933

除非您将项目的“base sdk”设置显式设置为较低的 iOS 版本，否则编译器不会警告您这些事情。

不幸的是，最新的 Xcode 版本似乎不包括 5.1 版之前的任何 iOS SDK，所以你不能在那里选择 4.0。我建议保留 iOS 4.0 SDK 附带的 Xcode 3.x 的第二次安装，并使用它来确保您没有使用来自较新 SDK 版本的方法。最后，如果您对 iOS 开发非常认真并且必须支持 4.0（为什么？），您应该在尚未升级到 iOS 5.0 的设备上进行测试（例如 ebay 上的旧 iPod touch ......）。

# ruby-on-rails - 部署 Rails 应用程序时的数据库迁移

> ID：10130657
> 
> 赞同：0
> 
> 时间：2012-04-12T19:46:26.607
> 
> 标签：ruby-on-rails, deployment, rails-migrations

我很好奇在部署到服务器时应该在哪里运行“rake db:migrate RAILS_ENV="production"。我应该在本地运行它然后部署吗？或者我应该部署然后从 /current 目录运行迁移在服务器上？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:29:36.760

您是否使用 capistrano 进行部署？如果是这样，从您的开发机器运行“cap deploy:migrations”，将同时在服务器上部署和运行迁移。

如果您有更复杂的部署方案或有分片或复制，您可以运行“cap deploy:update_code”，它只会复制您的项目。然后您可以登录到服务器并在本地运行迁移。

# delphi - TSimpleCodec.Begin_EncryptMemory - 错误模式

> ID：10130659
> 
> 赞同：0
> 
> 时间：2012-04-12T19:46:43.843
> 
> 标签：delphi, turbopower, lockbox-3

我得到 TSimpleCodec.Begin_EncryptMemory - 执行以下代码时出现错误模式异常。有什么问题吗？

```
FLibrary := TCryptographicLibrary.Create(Self);
FCodec := TCodec.Create(Self);
FCodec.CryptoLibrary := FLibrary;
FCodec.BlockCipherId := 'native.AES-256';
FCodec.ChainModeId := 'native.ECB';
FCodec.Password := 'password';
plain := 'The plain text';
FCodec.EncryptString(plain, astr);
FCodec.DecryptString(dec, astr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:08:55.837

通过运行时代码初始化编解码器时，需要设置 StreamCipherId。在设置 BlockCipherId 之前插入以下行。

```
 FCodec.StreamCipherId := BlockCipher_ProgId; 
```

如果您使用设计时值设置编解码器，则不需要这样做。在设计时做起来要容易得多。只需根据需要设置已发布的属性。

Delphi 2010 的演示程序在 TmfmLockbox3_Demo.FormCreate() 和 TmfmLockbox3_Demo.actCustomBlockEncryptExecute() 方法中给出了一个示例。

另请阅读有关它[的在线帮助](http://lockbox.seanbdurkin.id.au/LB3Help_TCodec_StreamCipherID)。

作为一般提示，如果您只是查看演示程序和/或阅读在线帮助，您将很少需要来 StackOverflow。如果文档中存在任何不足之处，请在 LockBox 论坛上发布一些建设性的可行建议，以改进文档（演示 + 在线帮助）。

# javascript - 每次循环迭代都转换为不同的类型

> ID：10130661
> 
> 赞同：-1
> 
> 时间：2012-04-12T19:46:48.807
> 
> 标签：javascript

我正在寻找一种将循环中的项目每次迭代转换为不同类型的方法。像这样的东西：

```
for (var i = 0; i < 100; i++)
for (var j = 0; j < 100; j++)
  newArr.push({
    date:arrA[i].subArr[j].myDate, 
    points+i:arrA[i].subArr[j].myPoints,
    league+i:arrA[i].subArr[j].myLeague
  }); 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:56:24.647

我认为这种方法没有多大意义。您最好为您正在创建的每个对象拥有一个完全独立的“索引”属性。

```
for (var i = 0; i < 100; i++)
  for (var j = 0; j < 100; j++)
    newArr.push({
      index: i,
      date: arrA[i].subArr[j].myDate, 
      points: arrA[i].subArr[j].myPoints,
      league: arrA[i].subArr[j].myLeague
    }); 
```

这样，您的所有对象看起来都相似，每个对象的“索引”属性都在 0 到 99 的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:53:20.080

在将其添加到数组之前，您是否尝试过创建一个对象并在之后更改属性？

```
for (var i = 0; i < 100; i++){
    for (var j = 0; j < 100; j++){
        var tmp = {};
        tmp['date'] = arrA[i].subArr[j].myDate;
        tmp['points'+i] = arrA[i].subArr[j].myPoints;
        tmp['league'+i] = arrA[i].subArr[j].myLeague;
        newArr.push(tmp);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:58:07.677

[对象初始](http://es5.github.com/#x11.1.5)值设定项中的属性名称可能不是任意表达式，因此这是无效的语法：

```
newArr.push({
    "points" + i: arrA[i].subArr[j].myPoints
}); 
```

但是，您可以在下标中使用任意表达式：

```
var tmp = {};
tmp["points" + i] = arrA[i].subArr[j].myPoints;
...
newArr.push(tmp); 
```

# sharepoint - 未找到 GAC 部署的声明成员资格提供程序程序集

> ID：10130662
> 
> 赞同：0
> 
> 时间：2012-04-12T19:46:51.750
> 
> 标签：sharepoint, gac, claims-based-identity

我正在为 SharePoint Foundation 部署创建自定义成员资格提供程序。我已构建并部署到全局程序集缓存，但在登录页面尝试加载时出现错误。我不确定为什么找不到签名的 GAC 部署程序集。

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。任何帮助或方向表示赞赏。

带有 Fusion 跟踪的 IIS 错误：

```
Parser Error Message: Could not load file or assembly 'myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 322:        <add name="i" type="Microsoft.SharePoint.Administration.Claims.SPClaimsAuthMembershipProvider, Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" />
Line 323:        <add name="ADMembers" 
Line 324:           type="myproviderProvider.myMembershipProvider, myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d" 
Line 325:           connectionStringName="myconn" 
Line 326:           enableSearchMethods="true" 

Source File: C:\inetpub\wwwroot\wss\VirtualDirectories\443\web.config    Line: 324 

Assembly Load Trace: The following information can be helpful to determine why the assembly 'myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d' could not be loaded.

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\IUSR
LOG: DisplayName = myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d
 (Fully-specified)
LOG: Appbase = file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\wss\VirtualDirectories\443\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\inetpub\wwwroot\wss\VirtualDirectories\443\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Post-policy reference: myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/87797408/25d55f52/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/87797408/25d55f52/myprovider/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/bin/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/bin/myprovider/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/_app_bin/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/_app_bin/myprovider/myprovider.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/87797408/25d55f52/myprovider.EXE.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/87797408/25d55f52/myprovider/myprovider.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/bin/myprovider.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/bin/myprovider/myprovider.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/_app_bin/myprovider.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/443/_app_bin/myprovider/myprovider.EXE. 
```

gacutil 列出程序集的输出

```
--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5448; ASP.NET Version:2.0.50727.5456 

 The Global Assembly Cache contains the following assemblies:
  myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d,
processorArchitecture=MSIL
              SCHEME: <WINDOWS_INSTALLER>  ID: <MSI>  DESCRIPTION : <Windows Ins
taller>

Number of items = 1 
```

会员提供者的 web.config enrty：

```
<add name="ADMembers" 
           type="MyClaimsProvider.MyMembershipProvider, myprovider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4120f2d354ae484d" 
           connectionStringName="myconn" 
           enableSearchMethods="true" 
           attributeMapUsername="sAMAccountName" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:10:23.313

您是否尝试重置 IIS？应用程序池将 GAC:ed dll:s 缓存在内存中，需要回收才能加载新的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:07:05.163

我创建了一个新项目并设置了针对 .Net 3.5 的项目，并在其中处理了我班级的源代码。（以前的尝试针对 VS 2010 默认网络 4。到下一个错误（我的课程不会加载）但希望这是某个地方的一些愚蠢的错字。

感谢 Rikard 始终有效的建议。

# rest - ColdFusion 宁静的 Web 服务 URI

> ID：10130666
> 
> 赞同：1
> 
> 时间：2012-04-12T19:47:47.920
> 
> 标签：rest, coldfusion, coldfusion-9

我想要做的是建立一个像这样工作的服务。

`http://server.com/html/print/helloworld`

并获得这样的 html 页面响应

```
<html>

    <head>

    </head>

    <body>
         <p>helloworld</p>
    </body>

</html> 
```

然后编写另一个像这样工作的组件。

`http://server.com/json/print/helloworld`

所以我得到一个看起来像这样的响应

```
{"helloworld"} 
```

我想我想要做的是拦截 URI，解析它，然后返回信息。有人可以让我直截了当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:19:57.390

亨利是正确的。我只想提几个框架：

*   [http://taffy.riaforge.org/](http://taffy.riaforge.org/)
*   [http://coldbox.org](http://coldbox.org)

我已经广泛使用，到目前为止是我最喜欢的 RESTful 服务框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:55:38.410

如果您想实现 RESTful 服务，请考虑使用 ColdFusion 10（截至目前为公开测试版）。

[http://blogs.coldfusion.com/post.cfm/introduction-to-restful-webservices-in-coldfusion-10](http://blogs.coldfusion.com/post.cfm/introduction-to-restful-webservices-in-coldfusion-10)

否则，您唯一的选择是为 CF8/9 使用一些 RESTful 风格的框架。AFAIK没有一个被广泛使用......

[http://fusiongrokker.com/post/taffy-a-restful-framework-for-coldfusion](http://fusiongrokker.com/post/taffy-a-restful-framework-for-coldfusion)

[http://powernap.riaforge.org/](http://powernap.riaforge.org/)

[http://quicksilver.riaforge.org/](http://quicksilver.riaforge.org/)

# python - 模板包括和 django 视图/网址。他们如何（做/应该）工作？

> ID：10130676
> 
> 赞同：0
> 
> 时间：2012-04-12T19:48:30.937
> 
> 标签：python, django, templates, include

我有一个迷你框，当悬停以显示个人资料信息时会弹出（经常被隐藏）。由于模板包括：

```
{% for i in leftbar_network|slice:":12" %}
     {% include "includes/mini_profile.html" %} 
{% endfor %} 
```

但我想添加一些条件并提取其他信息……例如：检查它们是否可以发送消息。拉那个特定的个人资料朋友数.. yadda yadda。我有一个应该可以工作的网址和视图。但似乎它们被完全忽略了。

模板：

```
<div class="mini-profile">
    <div class="mini-profile-top">
        <a href="/profile/{{i.get_type|lower}}/{{ i.user.username }}/" data-title="{{ i.user.get_full_name }}" data-content="{{i.get_type}}">
            <img class="img-frame" width="90" height="90" src="{% if i.avatar %}{% thumbnail i.avatar 120x120 crop %}{% else %}{{ DEFAULT_AVATAR }}{% endif %}" alt="{{ i.user.get_full_name }}" />
        </a>
        <a href="/profile/{{i.get_type|lower}}/{{ i.user.username }}/" data-title="{{ i.user.get_full_name }}" data-content="{{i.get_type}}">{{ i.user.get_full_name }}</a>
        <div>{{ i.get_type }}</div>
    </div>
    <div class="mini-profile-bottom">
        {% if can_message %}
        <form method="GET" action="/messages/compose/{{ i.get_type|lower }}/{{ i.user.username }}/">
            <button class="btn btn-margin" type="submit">
                <i class="icon-envelope"></i> Message
            </button>
        </form>
        {% else %}
        <button class="btn btn-margin tooltip-bottom disabled" title="You need to be connected to message {{profile.user.get_full_name}}" type="submit">
            <i class="icon-envelope"></i> Message
        </button>
        {% endif %}
    </div>
</div> 
```

有什么方法可以使用 {% include %} 并围绕它生成一个视图？还是我走错了路？如果是这样，我应该如何生成一个带有平滑弹出视图和url的迷你框？

示例：Google 聊天，当鼠标悬停在用户上时。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:07:14.617

> 我想添加一些条件并提取其他信息……例如：检查它们是否可以发送消息。拉出特定的个人资料好友数

听起来您正在寻找更具体的模板标签，[包含标签。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags)

因此，您可以将 (python/view) 逻辑放入您的标签中，并呈现与您的包含类似的适当 html。

# ruby-on-rails - 定期作业调度的工具/库（例如轮询网页）

> ID：10130679
> 
> 赞同：2
> 
> 时间：2012-04-12T19:48:32.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, scheduling, resque

是否有可用的工具/框架来支持定期轮询各种资源？例如，我想到了一个 RSS 聚合器，它每天检查一次新内容，或者一个维护用户 Twitter 头像缓存的工具，它每周轮询一次他们的 Twitter 帐户。

我不是在寻找执行实际获取或提要处理的工具；我正在寻找可以存储上次提取日期、在下一个到期时唤醒等的东西。

Resque 和 Delayed Job 等消息传递工具针对“时移”特定传入请求进行了优化，而不是处理周期性任务。换句话说，我认为您不会希望为每个用户保留一份永久的工作来检索他们的 Twitter 头像。但我必须得到纠正：D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:40:10.440

Anacron 非常适合这一点。我们让它每天唤醒一次以触发后台获取。后台提取器对 SQL 进行查询以查找需要更新的下 N 个用户，然后执行该批处理。

[http://en.wikipedia.org/wiki/Anacron](http://en.wikipedia.org/wiki/Anacron)

“它执行传统上由 cron 完成的定期命令调度，但不假设系统连续运行。因此，它可用于控制非 24 小时运行的系统上每日、每周和每月作业的执行一天。

Anacron 确保这些命令在机器正常运行时间允许的情况下以指定的时间间隔运行。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:06:31.913

我们已经使用了这个[https://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)，它满足了我们的需求。您编写一个类似 yml 文件的 cron，并且这些作业就像 resque 作业一样被安排。如果您已经在使用 resque，我会推荐这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:09:21.753

嗯...您对按需死亡和唤醒的要求似乎太理想了，无法预先构建到库中。如果您的守护程序在完成其工作后死亡，您将再次需要另一个守护程序/运行任务来引导它在必要时唤醒，这不是您想要的。

话虽如此，您可以尝试将`foreverb`其用作此类任务的自定义守护程序。它非常简单高效，您可以隔离零件。一个脚本，您可以在其中编写需求，然后一个守护程序来运行它。

[https://github.com/DAddYE/foreverb](https://github.com/DAddYE/foreverb)

如果你找到了你要找的东西，一定要让全世界知道。

# colorbox - colorbox的几个问题

> ID：10130682
> 
> 赞同：0
> 
> 时间：2012-04-12T19:48:38.443
> 
> 标签：colorbox

前几天刚刚发现了这个插件，并试图使用它，但发现了一些非常奇怪的问题。

1.  打开时颜色框周围没有覆盖
2.  没有下一个或上一个按钮
3.  图像数量比应有的数量多 1（换句话说，图像 1 显示为 18 个中的图像 2，实际上我正在运行的测试中只有 17 个图像）

代码是这样的：

$('a').colorbox({ rel:'group1', arrowKey: true, slideshow: true, slideshowAuto: false });

其中一张图片的示例是：

<a rel='group1' href='/members/photo.php?id=22' title='the dogs'> <img src='/userdocs/6/2012-01-02/thumb/dogs.jpg'宽度='100' 高度='100' 标题='狗' /> </a>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:55:56.407

1.  (*) colorbox 库带有一组（背景）图像。这些图像必须位于从中加载文件 colorbox.css 的文件夹的子文件夹“images”中。可以在 /colorbox/example1/images/ 下载的存档中找到一组这些图像。
2.  在 colorbox JS 之前加载 colorbox CSS。
3.  在 jQuery JS 之后加载颜色框 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:53:01.317

我遇到了同样的问题，盒子周围的覆盖层没有显示出来。当我将对 colorbox.css 文件的引用移到 main.css 之前时，它解决了这个问题。

确保将所需的图像和 colorbox.css 文件复制到与引用 colorbox .js 文件（例如 jquery.colorbox.js）的目录相同的目录。基于各种示例有 5 个版本，使用您喜欢的图像文件夹和 colorbox.css 文件。并确保您在包含中正确引用了足够高的 colorbox.css 文件。

# html - 使用 Java org.w3c.dom 将 XML 解析为 HTML

> ID：10130690
> 
> 赞同：0
> 
> 时间：2012-04-12T19:49:06.663
> 
> 标签：html, xml, parsing, xpath

通过 API，我得到了一个 XML 文件，我试图通过 org.w3c.dom 和 XPath 对其进行解析。XML 文件的一部分描述了 HTML 内容：

```
<Para>Since 2001, state and local health departments in the US have accelerated efforts to prepare for bioterrorism and other high-impact public health emergencies. These activities have been spurred by federal funding and guidance from the US Centers for Disease Control and Prevention (CDC) and the Health Resources and Services Administration (HRSA) 
     <CitationRef CitationID="B1">1</CitationRef>  
     <CitationRef CitationID="B2">2</CitationRef> . Over time, the emphasis of this guidance has expanded from bioterrorism to include "terrorism and non-terrorism events, including infectious disease, environmental and occupational related emergencies" 
     <CitationRef CitationID="B4">4</CitationRef> as well as pandemic influenza.
</Para> 
```

这应该变成这样：

```
<p>Since 2001, state and local health departments in the US have accelerated efforts to prepare for bioterrorism and other high-impact public health emergencies. These activities have been spurred by federal funding and guidance from the US Centers for Disease Control and Prevention (CDC) and the Health Resources and Services Administration (HRSA) 
     <a href="link/B1">1</a>  
     <a href="link/B2">3</a> . Over time, the emphasis of this guidance has expanded from bioterrorism to include "terrorism and non-terrorism events, including infectious disease, environmental and occupational related emergencies" 
     <a href="link/B4">4</a> as well as pandemic influenza.
</p> 
```

关于我如何做到这一点的任何建议？主要问题是检索标签并在保留其位置的同时替换它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:05:52.300

以下是使用 XSLT 的方法：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Para">
  <p>
    <xsl:apply-templates select="@* | node()"/>
  </p>
</xsl:template>

<xsl:template match="CitationRef[@CitationID]">
  <a href="link/{@CitationID}">
    <xsl:apply-templates/>
  </a>
</xsl:template>

</xsl:stylesheet> 
```

# c# - 我的模型的动态字段 - ASP.NET MVC 3

> ID：10130696
> 
> 赞同：0
> 
> 时间：2012-04-12T19:49:19.407
> 
> 标签：c#, jquery, asp.net-mvc-3

我想编辑特定字段的数据。例如，我遇到的问题是字段名称是一个字符串。

在我看来，我有这样的参数：

```
<div class="editable" id="cnso">@Model.cnso</div> 
```

我得到该字段并使用[jeditable](http://www.appelsiini.net/projects/jeditable)通过 Ajax 调用我的控制器：

```
$('.editable').editable('/Req/UpdateField', {
    tooltip: 'Click to edit...',
    submitdata : {
        nreqid : function() {
            return $("#nreqid").val();
        }
    }
}); 
```

我的控制器在字符串中获得了字段 (cnso) 的名称`id`。问题是更新我的模型。我的控制器的一些代码。

```
public string UpdateField(string id, string value, int nreqid)
{
    /*
     *        id - id of the field. This value can be used on the
     *             server side to determine what property of the
     *             company should be updated.
     *     value - text that is entered in the input field.
     *    nreqid - this is additional parameter that will
     *             be added to the request. Value of this parameter
     *             is a value of the hidden field with an id "ReqId".
     */
    ModelState.Clear();

    if (ModelState.IsValid)
    {
        //db.Entry(req).State = EntityState.Modified;
        //db.SaveChanges();
        Req req = db.Req.Find(nreqid);
        req."id" = "2";  // <--- Problem here !!!
    }
} 
```

我的模型对象，`Req`有字段`cnso`，我的`id`字符串有“cnso”，那么我怎样才能`cnso`从我的字符串id中选择呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:56:52.957

使用反射你可以这样做：

```
Type t = typeof(Req);
PropertyInfo p = t.GetProperty(id);
if(p != null)
    p.SetValue(req, "2", null); 
```

或者，如果没有太多属性，您可以为所需的所有属性执行不同的更新操作。我不知道你在什么情况下需要这个，但是每次更新一个表中的单个属性可能不是最好的设计。

# ruby-on-rails - rails，action mailer没有发送虽然日志说它是

> ID：10130698
> 
> 赞同：1
> 
> 时间：2012-04-12T19:49:28.490
> 
> 标签：ruby-on-rails, devise, actionmailer

我正在使用设计，并在有人使用 actionmailer 注册后尝试发送欢迎电子邮件。

我用...覆盖了设计上的注册控制器

```
 def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?

        UserMailer.welcome_email(resource).deliver

        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end 
```

在那一行

```
UserMailer.welcome_email(resource).deliver 
```

我打电话给我的 user_mailer.rb

```
 default :from => "blink@gmail.com"

  def welcome_email(user)
    @user = user
    @url = "http://example.com/login"
    mail(:to => user.email, :submit => "Welcome YEAH!")     
  end 
```

我在 app/views/user_mailer/welcome_email.text.erb 下有一个视图

在我的初始化程序文件夹中，我有一个 setup_mail.rb

```
ActionMailer::Base.smtp_settings = {
    :address                => "smtp.gmail.com",
    :port                   => 587,
    :domain                 => "gmail.com",
    :user_name              => "blink@gmail.com",
    :password               => "example",
    :authentication     => "plain",
    :enable_starttls_auto   => true
} 
```

在我的 development.rb 我有...

```
config.action_mailer.delivery_method = :sendmail
config.action_mailer.perform_deliveries = true 
```

我很困惑为什么这不起作用。我写了一个较旧的项目，我让动作邮件程序开始工作。现在的代码与我的旧项目几乎相同。例外是我现在使用设计。

在我的终端窗口中，当我运行“rails server”时，在该窗口上它还显示...

```
Sent mail to blink@gmail.com (140ms)
Date: Thu, 12 Apr 2012 12:32:48 -0700
From: blink@gmail.com
To: blink@gmail.com
Message-ID: <4f872de096f4e_1805f3fdba4834cd493153@spiderman.local.mail>
Subject: Welcome email
Mime-Version: 1.0
Content-Type: multipart/alternative;
boundary="--==_mimepart_4f872de0883d4_1805f3fdba4834cd49281a";
charset=UTF-8
Content-Transfer-Encoding: 7bit
submit: Welcome YEAH! 
```

用户注册后。我不认为它真的发送虽然。我的 gmail 从来没有得到它，它不在我的垃圾邮件中。可能与设计的邮件/视图有关吗？但我在控制器中明确使用 UserMailer，这就是我覆盖它的原因

我被困了好几天！帮助将不胜感激。谢谢一堆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:46:29.467

你有没有尝试过

```
config.action_mailer.delivery_method = :smtp 
```

看看 mailcatcher 来测试开发中的电子邮件，我发现它比实际发送邮件要容易得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:16:52.960

首先，你必须确保你告诉设计要寻找你的控制器（因为你已经继承了它，我假设）。您可以通过这样的编辑来做到这`config/routes.rb`一点：

```
# config/routes.rb
devise_for :users, :controllers => {:registrations => "registrations"} 
```

如果您已完成此操作，请确保您的控制器是正在使用的控制器。此外，`sendmail`具体而言，我还没有尝试过使用它，但假设它`sendmail`使用您的主机操作系统的内部邮件代理，并且您处于动态 IP 地址（ISP 在连接时提供给其用户）下，我相信邮件提供商像 GMail 会阻止您的邮件，因为它们不允许动态 IP 作为邮件提供商。他们这样做主要是出于安全目的。也许您可以通过编辑来检查`config/environments/development.rb`：

```
# config/environments/development.rb
config.action_mailer.raise_delivery_errors = true 
```

看看引擎盖下是否发生了什么事。如果这没有太大帮助（并且由于您实际上尝试做的是使用有效的邮件帐户发送电子邮件 - 给定您的 ActionMailer 设置），您可以使用 SMTP 传递而不是 sendmail，以及您拥有的配置，编辑这一行：

```
# config/environment/development.rb
config.action_mailer.delivery_method = :smtp 
```

在您的初始化程序中，实际上它将通过指定的帐户将电子邮件发送给指定的收件人。

作为最后（离题）建议，我建议您使用[Rails Observers](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html "观察员")，在这种情况下，您不需要覆盖 Devise 的注册控制器。这将使您的生活更加简单、干燥并遵循约定优于配置的理念。然后你可以像这样创建一个观察者：

```
# app/observers/user_observer.rb
class UserObserver < ActiveRecord::Observer
  def after_create(user)
    UserMailer.welcome_email(user).deliver
  end
end 
```

并编辑`config/application.rb`：

```
config.active_record.observers = :user_observer 
```

# sql - 调整数据库表中每个 VARCHAR 列的大小 - Oracle 11g

> ID：10130700
> 
> 赞同：3
> 
> 时间：2012-04-12T19:49:30.393
> 
> 标签：sql, oracle

我在 Table 中至少有 65`VARCHAR`个列`A`，我必须将其大小从 调整`X bytes`为`X char`。我希望找到一种比发出`ALTER TABLE A MODIFY..`命令 65 次更简单的方法。

任何人都可以帮助我如何做到这一点是一种更快的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:58:41.467

你可以写一点动态SQL。假设表在当前模式中

```
DECLARE
  l_sql_stmt VARCHAR2(1000);
BEGIN
  FOR t IN (SELECT * FROM user_tab_cols WHERE table_name = 'A')
  LOOP
    l_sql_stmt := 'ALTER TABLE ' || t.table_name || ' MODIFY (' || 
                     t.column_name || ' varchar2(' || t.char_length || ' char))';
    EXECUTE IMMEDIATE l_sql_stmt;
  END LOOP;
END; 
```

你可以在下面看到它的工作

```
SQL> ed
Wrote file afiedt.buf

  1  create table foo(
  2    col1 varchar2(10 byte),
  3    col2 varchar2(20 byte)
  4* )
SQL> /

Table created.

DECLARE
  l_sql_stmt VARCHAR2(1000);
BEGIN
  FOR t IN (SELECT * FROM user_tab_cols WHERE table_name = 'FOO')
  LOOP
    l_sql_stmt := 'ALTER TABLE foo MODIFY (' || 
                     t.column_name || ' varchar2(' || t.char_length || ' char))';
    EXECUTE IMMEDIATE l_sql_stmt;
  END LOOP;
END;

SQL> desc foo;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 COL1                                               VARCHAR2(10 CHAR)
 COL2                                               VARCHAR2(20 CHAR) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:59:46.057

你可以试试这样丑陋的东西

```
 select 'ALTER TABLE '||table_name|
        ' MODIFY ('||column_name||' VARCHAR2('||char_length||' char));'
   from all_tab_cols
   where table_name='A' and
         datatype like 'VARCHAR2%'; 
```

复制结果网格并将其粘贴并在您喜欢的 sql 编辑器中运行它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-08T15:13:36.460

贾斯汀的回答部分不正确 - 事实上 grokster 的更好 - 发现差异：

**贾斯汀：**

```
 FOR t IN (SELECT * FROM user_tab_cols WHERE table_name = 'A') 
```

**格罗克斯特：**

```
FOR x IN (SELECT * FROM user_tab_cols WHERE table_name = 'A' AND datatype LIKE 'VARCHAR%') 
```

请注意，Grokster 正确检查数据类型，而不是尝试将所有列转换为 varchar2！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T20:24:07.830

```
BEGIN
    FOR x IN (SELECT * FROM user_tab_cols WHERE table_name = 'A' AND datatype LIKE 'VARCHAR%')
    LOOP
        EXECUTE IMMEDIATE 'ALTER TABLE '||x.table_name||' MODIFY '||x.column_name ||' VARCHAR2('||x.char_length||' CHAR)';
    END LOOP; 
END;
/ 
```

# c++ - 如何查找一个点是否在一组区间内？

> ID：10130701
> 
> 赞同：7
> 
> 时间：2012-04-12T19:49:36.650
> 
> 标签：c++, c, algorithm, computational-geometry

我正在寻找最快的方法来确定一条线上的点是否在这条线的子集内。我得到一个整数点，我也有一个“列表”：

1.  点，由整数表示（3、10、1000 等）
2.  间隔，我用 2 个整数表示（ 2:10 是从 2 到 10 的所有整数，包括 50:60 等）

在此示例中，如果我的点的值为 5，那么我返回 true，因为它包含在一个区间中，对于 55 也是如此。如果我的点等于 1000，我也返回 true，因为它与点列表匹配。

我正在寻找一种快速的方法（比线性更快）来检查这种情况，而不必实例化尽可能多的整数（即，对于 1:1000 的间隔，我不想实例化 1000 个整数）。这可以在对数时间内完成吗？

谢谢

编辑：您可以认为预处理数据列表所花费的任何时间都等于 0，因为一旦处理了我的初始间隔，我需要将此测试应用于 10k 点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T19:57:40.503

嗯，也许你可以使用区间或分段树：

*   [http://en.wikipedia.org/wiki/Segment_tree](http://en.wikipedia.org/wiki/Segment_tree)
*   [http://en.wikipedia.org/wiki/Interval_tree](http://en.wikipedia.org/wiki/Interval_tree)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:54:48.193

如果您对整数范围进行了排序并且范围不重叠，则可以执行二进制搜索以在对数时间内找到正确的范围。

范围有什么限制吗？基于此，您可能会想出哈希函数来在恒定时间内进行搜索。但这取决于您的约束条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T21:18:16.790

经过反思，我认为以下代码应该在对数时间内工作，不包括构建地图所需的时间：

```
enum pointType {
    point,
    open,
    close
};
std::map<long int, pointType> mapPoints;

mapPoints.insert(std::pair<long int, pointType>(3, point));

//create the 5:10 interval:
mapPoints.insert(std::pair<long int, pointType>(5, open));
mapPoints.insert(std::pair<long int, pointType>(10, close));

int number = 4;
bool inside = false;
std::map<long int, pointType>::iterator it1 = mapPoints.lower_bound(number);

if(it1->first == number || it1->second == close) {
    inside = true;
} 
```

我认为只要地图以非重叠间隔正确填充，这应该可以工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:55:37.610

如果您不计算构建树所花费的时间（大多数树需要 n log n 或类似的时间来构建），您可以在给定树数据结构（我推荐 B 树）的亚线性时间内做到这一点。

如果您只有一个简单的列表，那么您不能做得比线性更好，因为在最坏的情况下，您可能必须检查所有点和间隔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:53:14.947

首先检查点的 hash_map。这就是简单的检查。

然后只需按第一个坐标排序间隔图，然后找到该点的 lower_bound。

然后检查您是否包含在返回的元素中。如果你不在那个，你就没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T20:06:42.850

您可以使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)来测试一个点，看看它是否**不在**一个区间内，在线性 O(1) 时间内。如果它通过了该测试，您必须使用另一种方法，例如二进制搜索，以查看它是否肯定是间隔的一部分，在 O(log n) 时间内。

# vb.net - VB.net 需要 XNPV

> ID：10130702
> 
> 赞同：0
> 
> 时间：2012-04-12T19:49:36.943
> 
> 标签：vb.net

我可以通过使用 NPV(Fixedrates, values) 成功确定 NPV（净现值）。但是，我需要具有 Excel 的 XNPV 的功能，它也将考虑日期。

有任何想法吗？

问候， 马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:44:21.223

XNPV 函数是 Excel 在现金流不一定具有周期性时计算年金的净现值。Excel 中的 NPV 函数计算定期期末付款的年金净现值。

使用 NPV 函数，第一个现金流在时间段 1 贴现，随后的现金流在时间段 2 贴现为 N，其中 N 是现金流的数量

使用 XNPV 函数，现金流在其实际时间段内贴现，该时间段通过首先找到 CFt 和 CF0 之间的天数来计算。这种差异将是 Dt-D0，其中 Dt 是现金流量 t 的交易日期，D0 是现金流量 0 的交易日期。然后将差异除以 365 以找到对特定现金流量进行贴现的时间段 t。贴现现金流的总和就是这些不规则现金流的净现值。

这是一个使用在线工具计算不规则现金流的[净现值的示例](http://finance.thinkanddone.com/npv.html)[XNPV 。](http://finance.thinkanddone.com/online-xnpv-calculation.html)

```
Date           N                 Payment     PVIF @ 4%     Present Value
01/01/2008     0                -10,000.00    1.000000     -10,000.00
03/01/2008     0.164383561644    2,500.00     0.993573     2,483.93
10/30/2008     0.83002283105     2,500.00     0.967970     2,419.93
02/15/2009     1.12602739726     2,500.00     0.956797     2,391.99
04/01/2009     1.24920091324     2,500.00     0.952186     2,380.47
XNPV     -323.68 
```

然而，Excel 中的 XNPV 函数仅限于在利息离散复利时找到净现值。在大多数金融和银行应用程序中，利息是不断复利的，在这里 Excel 对找到净现值没有帮助。您可以查看替代方案，例如[TADXL Excel 财务插件，](http://thinkanddone.com/)该插件提供 tadXNPV 功能，以在利息离散或连续复利时找到不规则现金流的净现值。

Excel 的 NPV 和 XNPV 函数的另一个缺点与在计算中使用单一贴现率有关。然而，在现实生活中的大量情况下，年金可能会以不同的利率为每个现金流贴现，就像可变利率抵押贷款一样。

在这里，用于财务的 TADXL 插件也为您提供了 tadDRNPV 和 tadDRXNPV 等功能，允许使用不同的利率对现金流进行贴现

# javascript - 将 mooRainbow 转换为 mootools 1.4.4 时出现 bindWithEvent 错误

> ID：10130708
> 
> 赞同：1
> 
> 时间：2012-04-12T19:49:58.293
> 
> 标签：javascript, events, mootools

我正在尝试让 mooRainbow 1.2b ( [http://moorainbow.woolly-sheep.net/](http://moorainbow.woolly-sheep.net/) ) 与 mootools 1.4.4 一起使用，但我遇到了一个我似乎无法找到答案的错误。

## 在本节中抛出错误...

* * *

```
OverlayEvents: function ()
{
    var lim, curH, curW, inputs;
    curH = this.snippet('curSize', 'int').h;
    curW = this.snippet('curSize', 'int').w;

    // $A is deprecated, the original line here was:
    // inputs = $A(this.arrRGB).concat(this.arrHSB, this.hexInput);

    inputs = this.arrRGB.concat(this.arrHSB, this.hexInput);

    document.addEvent('click', function ()
    {
        if (this.visible) this.hide(this.layout);
    }.bind(this));

    inputs.each(function (el)
    { 
```

* * *

```
 // this is where the error is thrown
        el.addEvent('keydown', this.eventKeydown.bindWithEvent(this, el));
        el.addEvent('keyup', this.eventKeyup.bindWithEvent(this, el)); 
```

* * *

```
 }, this);
    [this.element, this.layout].each(function (el)
    {
        el.addEvents({
            'click': function (e) { new Event(e).stop(); },
            'keyup': function (e)
            {
                e = new Event(e);
                if (e.key == 'esc' && this.visible) this.hide(this.layout);
            }.bind(this)
        }, this);
    }, this); 
```

* * *

## 这是引发的错误...

```
Uncaught TypeError: Object function (){
if (method.$protected && this.$caller == null) 
throw new Error('The method "' + key + '" cannot be called.');
var caller = this.caller, current = this.$caller;
this.caller = current; this.$caller = wrapper;
var result = method.apply(this, arguments);
this.$caller = current; this.caller = caller;
return result;
} has no method 'bindWithEvent' 
```

PS。这个问题似乎类似于[MooTools/JS: bindWithEvent](https://stackoverflow.com/questions/1972235/mootools-js-bindwithevent)但那里的答案与我的上下文无关，我不确定它是否是同一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:49:19.340

好久没说话了（这里是尾声）。回到IRC！

你真的需要看看函数本身。通常它们并不是真正的最佳选择，并且依赖于太多的论点和设置。

已弃用的 bindWithEvent 的可能解决方法是...

# 1换这个...

```
el.addEvent('keydown', this.eventKeydown.bindWithEvent(this, el));
el.addEvent('keyup', this.eventKeyup.bindWithEvent(this, el)); 
```

...类似于：

```
el.addEvents({
    keyup: this.eventKeyup.bind(this),
    keydown: this.eventKeydown.bind(this)
}); 
```

然后在 2 个事件函数中，参数 1 将是事件。`el == event.target`- 这是一种模式

# 2咖喱ftw

匿名函数中的代理。

```
var self = this;
el.addEvent("keyup", function(e) {
    self.eventKeyup(e, this);    
}); 
```

# 3 ...等等等等。天空是极限。

# algorithm - 按项目分配资源的算法（装箱？）

> ID：10130710
> 
> 赞同：0
> 
> 时间：2012-04-12T19:50:11.620
> 
> 标签：algorithm, allocation, bin-packing

**请让我知道哪种算法适合以下问题：**

在给定的 3 个月期间，我们有有限数量的项目（通常 < 50 个）。每个项目都有几个小时。

在同一个 3 个月期间，我们有有限数量的资源（通常 < 100）。

每个资源每月可以消耗唯一数量的小时数（考虑假期、个人假期等 - 每月这个小时数已经为每个资源预先计算并且可用）。

可以将一种资源分配给多个项目。

* * *

我认为，如果我们将项目视为垃圾箱，将资源视为对象，将小时视为对象体积，这就像一个装箱问题。至少有两件事使它偏离了正式的装箱问题：

1.  资源是流动的物体，可以在一个容器中滴几个小时，在另一个容器中滴几个小时。
2.  最佳解决方案不是尽量减少使用的箱（项目）的数量，而是尽量减少资源在项目之间拆分的次数，并确保所有项目都被使用。

* * *

我觉得我可能正在用垃圾箱包装角度追逐鹅。有没有更适合这个的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:01:41.200

如果世界真的像您描绘的那样简单，那么简单的队列似乎可以满足您的限制：当项目到达时，将它们放入队列中。当开发人员可用时，他们会排在队列的首位。只有当您的项目大到无法以这种方式完成时，您才需要为他们分配多个开发人员，并且您可以检测到这一点，并回溯并分配两名开发人员。

但是所有这些都忽略了开发人员之间的协调、交接、依赖关系（在其他事情之前需要首先完成的事情），有能力的开发人员具有不同的技能和经验，甚至有类似经验的开发人员，而不是无能或超级明星，都可以速度差异高达 10 倍。

# php - 如何将未定义的变量传递给没有 E_NOTICE 错误的函数？

> ID：10130715
> 
> 赞同：13
> 
> 时间：2012-04-12T19:50:26.650
> 
> 标签：php

非常简单的问题，如何将未定义的变量传递给没有 E_NOTICE 错误的函数？

将未定义的变量传递给诸如 isset() 之类的函数时，不会引发错误，但将其发送给您自己的函数，您会得到一个通知：未定义偏移量：等。

我已经想到了今天想要这个的几个原因，但是我当前的函数几乎是 isset 的克隆，除了它会检查是否设置了*任何*args，而不是像 isset(a,b,c) 那样。

```
function anyset()
{
    $argc = func_num_args();
    $argv = func_get_args();
    for ($i = 0; $i < $argc; $i++) 
        if (isset($argv[$i])) return true;
    else return false;
} 
```

现在，例如，我有一个巨大的 [x][y] 二维数组，其中的值将被随机放置。我需要检查随机坐标是否包含“旁边”的任何内容（x-1，y-1 到 x+1，y+1​​）等。

我不想做一个 20,000,000 的循环并初始化每个变量。我只想发送 9 个变量并检查是否已经设置了任何变量。

```
while (anyset($items[$x-1][$y-1],$items[$x][$y-1],$items[$x+1][$y-1],
              $items[$x-1][$y],$items[$x][$y],$items[$x+1][$y],
              $items[$x-1][$y+1],$items[$x][$y+1],$items[$x+1][$y+1])); 
```

像这样。

我可以做 isset(x) || isset(x) || isset(x) 但这看起来不太好。

**有没有办法让未定义的变量传递给我的函数而不会引发错误？**

对采取简单的选择不感兴趣；）

谢谢阅读！

\o

**更新：** 2012 年 4 月 12 日，21:03 看起来没有特殊功能允许这种情况发生。因此，要么像 anyset(@$array[0], @$array[1]) 等一样通过，要么像这样将所有内容包装在一千个 issets 中：

```
while (isset($items[$x-1][$y-1]) || isset($items[$x][$y-1]) || isset($items[$x+1][$y-1]) || 
       isset($items[$x-1][$y])   || isset($items[$x][$y])   || isset($items[$x+1][$y]) || 
       isset($items[$x-1][$y+1]) || isset($items[$x][$y+1]) || isset($items[$x+1][$y+1])); 
```

希望这对将来的其他人有所帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T19:58:31.267

通过引用传递将适用于已定义的参数。

```
function my_isset(&$k) { ... }

$bool = my_isset($_POST['hi']); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-12T19:54:09.140

你有三个选择：

*   使用 isset 正确处理逻辑 (isset($x) || isset($y) || isset($z))
*   将所有内容包装在 isset() 中，然后让您的函数检查任何论点是否为真（有点 bleh）
*   使用 @ 来抑制错误（也 bleh）

@ 的一个例子是：

```
function a($a) { } a(@$x); 
```

您应该记住，通知的存在是有原因的。我避免错误抑制。这对我来说似乎很hacky。我会正确地将所有内容包装在 isset() 中。它更冗长，但无论如何，在我看来，更正确。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T19:56:43.163

`isset`有点特别，因为它实际上是 PHP 语言结构而不是函数[[1]](http://php.net/isset#refsect1-function.isset-notes)。

如果变量未定义，则无法真正传递它，因为它未定义（因此出现警告）。

如评论中所述，您可以通过`@`在变量前面加上一个来抑制警告，这将防止在未设置的情况下发出警告。然后在函数中，您可以检查该值是否为 null 或尝试使用`isset`它来查看它是否已注册。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T19:58:05.680

也许这样的事情会为你工作？这有点骇人听闻，但我认为如果没有对函数参数的惰性求值，你想要的不太可能。

```
if (atLeastOneIsSet($myArray, 1, 3, 4, 6)) doSomething();

function atLeastOneIsSet(array $arr) {
    $args = func_get_args();
    for ($i = 1; $i < func_num_args(); ++$i)
        if (isset($arr[$args[$i]])) return true;
    return false;
} 
```

编辑：哎呀，逻辑问题。

# perl - 有没有办法查看 AnyEvent 事件队列

> ID：10130717
> 
> 赞同：4
> 
> 时间：2012-04-12T19:50:35.070
> 
> 标签：perl, unit-testing, asynchronous, anyevent

我正在开发一个使用`AnyEvent`. 在测试期间，我遇到了这样一种情况，即我的代码中的一个错误导致在我的测试完成后调用被阻塞的代码，因此测试看起来像是通过了，但后来被阻塞的调用最终污染了其他测试。

我想要发生的事情是在测试的拆解中，验证它`AnyEvent`没有等待任何其他被阻止的呼叫。这是否可以检查`AnyEvent`它是否有任何尚未执行的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-23T00:12:20.297

我的第一个答案已被删除，因为我回答后问题已更改。这是相当令人沮丧的，所以如果你想得到答案，你真的不应该像这样改变你的问题，而是修改它们，这样上下文就会保持清晰。

无论如何，至于您的新问题， AnyEvent 本身没有事件队列，因此您无法查看它。虽然一些底层事件库有一个事件队列，但有些没有，而且它们都没有公开导出他们的事件队列。

更糟糕的是，它甚至无济于事，因为事件可能尚未在队列中，即使它发生了（例如，在您处理某些事件时可能会超时，因此它不会在事件队列中，但它或多或少会立即触发）。

最后，AnyEvent（基于事件）从不等待被阻塞的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:20:07.127

使用[AnyEvent::Debug](http://search.cpan.org/dist/AnyEvent/lib/AnyEvent/Debug.pm)包装您的观​​察者并在套接字上侦听命令，包括列出所有观察者的“wl”，这将为您提供所需的方法。

例如，您可以在代码中调用 AnyEvent::Debug::shell::wl 函数来获取观察者列表，然后您可以使用 AnyEvent::Debug::Wrapped 方法对其进行迭代和检查。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T19:12:21.270

您的问题没有直接答案，但我想提出两件事可能会有所帮助

*   使用 AnyEvent::Log 确保您知道异步分支发生的位置，它还将帮助您找到您创建的不会被破坏的东西

*   在子进程中运行您的测试例程，使用 AnyEvent->child 监视它并确保它在您继续前进之前退出

还要尝试查看您在哪里失去对创建的条件变量和/或 IO 句柄的控制，它们最好可供您销毁，这将使测试更加容易。

# android - Android数组越界和SQL空指针异常

> ID：10130721
> 
> 赞同：-2
> 
> 时间：2012-04-12T19:50:42.577
> 
> 标签：android, arrays, sqlite, random, nullpointerexception

所以我正在构建这个 Android 模拟游戏，我遇到了一些 SQL 和数组问题。

在尝试将一些值从数组中的随机位置放入时，我在这些行上得到一个数组越界错误：

```
int max = 10;
int min = 0;
Random r = new Random();
int num = r.nextInt(max-min) + min;
if (west_teams[num].equals(teams[0]) ||
    west_teams[num].equals(teams[1]) ||
    west_teams[num].equals(teams[2]) ||
    west_teams[num].equals(teams[3]) ||
    west_teams[num].equals(teams[4]) ||
    west_teams[num].equals(teams[5]) ||
    west_teams[num].equals(teams[6]) ||
    west_teams[num].equals(teams[7])
   ) 
```

在 SQLite 问题中，我在以下几行中收到 Java 空指针异常错误：

```
ContentValues cv = new ContentValues();
cv.put(TEAM, team);
cv.put(LOCATION, Location);
cv.put(PLAYER, Player);
cv.put(CRANGE, cRange);
cv.put(MRANGE, mRange);
cv.put(TRANGE, tRange);
cv.put(FREETHROW, Freethrow);
cv.put(PASS, Pass);
cv.put(DEF_REBOUND, Def_rebound);
cv.put(OFF_REBOUND, Off_rebound);
cv.put(BLOCK, Block);
cv.put(STEAL, Steal);
cv.put(STAMINA, Stamina);
return ourDatabase.insert(PLAYERS_TABLE, null, cv); 
```

这是我的完整代码：

### 随机类：

```
package ent.com;

import java.util.Random;
import android.content.Context;

public class RandPlayers {
    protected Context context;

    public void fetch_players(String location, String savename){
        this.context = context;
        String[] first_names = new String[] {"John", "Jonathan", "James", "Drew", "Tim", "Tony", "Anthony", "Andrew", "Brandon", "Michael", "Mike", "Devin", "Marcus", "George", "Noah", "Martin", "Kevin", "Quentin", "Boris", "Stepehn"};
        String[] last_names = new String[] {"Parker", "Robinson", "Jackson", "Charles", "Powell", "Wilkerson", "Mitchell", "Russel", "Flint", "Griffin", "Simpson", "Springfield", "Booker", "Wilks", "Flanders", "Levingston", "Fernandez", "Rodriguez", "Evans", "Smith"};
        String[] west_teams = new String[] {"Seattle Ice", "Las Vegas Dragons", "Salt Lake Vampires", "Vancouver Wildfire", "Olympia Peninsulas", "San Diego Rings", "San Francisco Flyers", "Austin Fortress", "Idaho Eagles"};
        String[] east_teams = new String[] {"Jackson Giants", "Tampa Wildbears", "Nashville Monarchs", "Springfield Defenders", "Minneapolis Ballers", "Ottawa Moose", "Columbus Natives", "Cincinnati Lightning", "Baltimore Invaders", "Montreal Fishers"};

        String[] teams = new String[] {"","","","","","","","","","","","","","","",""};

        String[] players = new String[] {"","","","","","","","","","","","","","","",""};

        SetSql PlayerObject =  new SetSql(this.context);

        int i;
        int y;

        if(location.equals("w")){
            teams[7] = savename;
            for(i = 0; i<7; i++){
                int max = 10;
                int min = 0;
                Random r = new Random();
                int num =min + r.nextInt(max-min);
                if(west_teams[num].equals(teams[0]) ||
                   west_teams[num].equals(teams[1]) ||
                   west_teams[num].equals(teams[2]) ||
                   west_teams[num].equals(teams[3]) ||
                   west_teams[num].equals(teams[4]) ||
                   west_teams[num].equals(teams[5]) ||
                   west_teams[num].equals(teams[6]) ||
                   west_teams[num].equals(teams[7]))
                {
                    i--;
                }
                else{
                    teams[i] = west_teams[num];
                }
            }
        }
        else{
            for(i = 0; i<8; i++){
                int max = 10;
                int min = 0;
                Random r = new Random();
                int num = r.nextInt(max-min) + min;
                if(west_teams[num].equals(teams[0]) ||
                   west_teams[num].equals(teams[1]) ||
                   west_teams[num].equals(teams[2]) ||
                   west_teams[num].equals(teams[3]) ||
                   west_teams[num].equals(teams[4]) ||
                   west_teams[num].equals(teams[5]) ||
                   west_teams[num].equals(teams[6]) ||
                   west_teams[num].equals(teams[7]))
                {
                    i--;
                }
                else{
                    teams[i] = west_teams[num];
                }
            }
        }
        if(location.equals("e")){
            for(y = 8; y<15; y++){
                teams[15] = savename;
                int max = 10;
                int min = 0;
                Random r = new Random();
                int num = r.nextInt(max-min) + min;
                if(east_teams[num].equals(teams[8])  ||
                   east_teams[num].equals(teams[9])  ||
                   east_teams[num].equals(teams[10]) ||
                   east_teams[num].equals(teams[11]) ||
                   east_teams[num].equals(teams[12]) ||
                   east_teams[num].equals(teams[13]) ||
                   east_teams[num].equals(teams[14]) ||
                   east_teams[num].equals(teams[15]))
                {
                    y--;
                }
                else{
                    teams[y] = west_teams[num];
                }
            }
        }
        else{
            for(y = 8; y<16; y++){
                int max = 10;
                int min = 0;
                Random r = new Random();
                int num = r.nextInt(max-min) + min;
                if(east_teams[num].equals(teams[8])||east_teams[num].equals(teams[9])||east_teams[num].equals(teams[10])||east_teams[num].equals(teams[11])||east_teams[num].equals(teams[12])||east_teams[num].equals(teams[13])||east_teams[num].equals(teams[14])||east_teams[num].equals(teams[15]))
                {
                    y--;
                }
                else{
                    teams[y] = west_teams[num];
                }
            }
        }

        for(int w=0; w<16; w++){
            int min = 0;
            int max = 20;
            int smin = 1;
            int smax = 21;
            Random names = new Random();
            int fnum = names.nextInt(max-min) + min;
            int snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            int cRange = names.nextInt(smax-smin)+smin;
            int mRange = names.nextInt(smax-smin)+smin;
            int tRange = names.nextInt(smax-smin)+smin;
            int Freethrow = names.nextInt(smax-smin)+smin;
            int Pass = names.nextInt(smax-smin)+smin;
            int Def_rebound = names.nextInt(smax-smin)+smin;
            int Off_rebound = names.nextInt(smax-smin)+smin;
            int Block = names.nextInt(smax-smin)+smin;
            int Steal = names.nextInt(smax-smin)+smin;
            int Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[0], "w", players[0], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[1], "w", players[1], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[2], "w", players[2], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[3], "w", players[3], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[4], "w", players[4], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[5], "w", players[5], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[6], "w", players[6], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[7], "w", players[7], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[8], "w", players[8], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[9], "w", players[9], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[10], "w", players[10], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[11], "w", players[11], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[12], "w", players[12], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[13], "w", players[13], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[14], "w", players[14], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);

            fnum = names.nextInt(max-min) + min;
            snum = names.nextInt(max-min) + min;
            players[0] = first_names[fnum] + " " + last_names[snum];
            cRange = names.nextInt(smax-smin)+smin;
            mRange = names.nextInt(smax-smin)+smin;
            tRange = names.nextInt(smax-smin)+smin;
            Freethrow = names.nextInt(smax-smin)+smin;
            Pass = names.nextInt(smax-smin)+smin;
            Def_rebound = names.nextInt(smax-smin)+smin;
            Off_rebound = names.nextInt(smax-smin)+smin;
            Block = names.nextInt(smax-smin)+smin;
            Steal = names.nextInt(smax-smin)+smin;
            Stamina = names.nextInt(smax-smin)+smin;
            PlayerObject.createPlayerEntry(teams[15], "w", players[15], cRange, mRange, tRange, Freethrow, Pass, Def_rebound, Off_rebound, Block, Steal, Stamina);
        }
    }
} 
```

### SQLite 设置页面：

```
package ent.com;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class SetSql{
    String saveExtra=null;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_SAVE = "save_name";
    public static final String KEY_STADIUM = "stadium_size";
    public static final String KEY_FINANCE = "total_money";

    private static String DATABASE_NAME = null;
    private static final String DATABASE_TABLE = "save_data";
    private static final int DATABASE_VERSION = 1;
    private static final String PLAYERS_TABLE = "player_data";

    public static final String ROWID = "_id";
    public static final String TEAM = "team";
    public static final String LOCATION = "location";
    public static final String PLAYER = "player_name";
    public static final String CRANGE = "close_range";
    public static final String MRANGE = "mid_range";
    public static final String TRANGE = "three_range";
    public static final String FREETHROW = "free_throw";
    public static final String PASS = "pass";
    public static final String DEF_REBOUND = "def_rebound";
    public static final String OFF_REBOUND = "off_rebound";
    public static final String BLOCK = "block";
    public static final String STEAL = "steal";
    public static final String STAMINA = "stamina";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            //userdata db
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_SAVE + " TEXT NOT NULL, " +
                    KEY_STADIUM + " INTEGER NOT NULL, " +
                    KEY_FINANCE + " DOUBLE NOT NULL);");

            //players data db
            db.execSQL("CREATE TABLE " + PLAYERS_TABLE + " (" +
                    ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    TEAM + " TEXT NOT NULL, " +
                    LOCATION + " TEXT NOT NULL, " +
                    PLAYER + " TEXT NOT NULL, " +
                    CRANGE + " INTEGER NOT NULL, " +
                    MRANGE + " INTEGER NOT NULL, " +
                    TRANGE + " INTEGER NOT NULL, " +
                    FREETHROW + " INTEGER NOT NULL, " +
                    PASS + " INTEGER NOT NULL, " +
                    DEF_REBOUND + " INTEGER NOT NULL, " +
                    OFF_REBOUND + " INTEGER NOT NULL, " +
                    BLOCK + " INTEGER NOT NULL, " +
                    STEAL + " INTEGER NOT NULL, " +
                    STAMINA + " INTEGER NOT NULL);");

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + PLAYERS_TABLE);
            onCreate(db);
        }
    }

    public SetSql(Context c){
        ourContext = c;
    }

    public SetSql open(){
        ourHelper =  new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public void start(String num){
        saveExtra = num;
        DATABASE_NAME = saveExtra;
    }

    public long createEntry(String value, int seats, int money, String players) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_SAVE, value);
        cv.put(KEY_STADIUM, seats);
        cv.put(KEY_FINANCE, money);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getdata() {
        String[] columns = new String[]{KEY_ROWID, KEY_SAVE, KEY_STADIUM, KEY_FINANCE};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iSave = c.getColumnIndex(KEY_SAVE);
        int iSeats = c.getColumnIndex(KEY_STADIUM);
        int iMoney = c.getColumnIndex(KEY_FINANCE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + "-" + c.getString(iSave) + "-" + c.getString(iSeats) + "-" + c.getString(iMoney) + "\n";
        }
        return result;
    }

    public long createPlayerEntry(String team, String Location, String Player, int cRange, int mRange, int tRange, int Freethrow, int Pass, int Def_rebound, int Off_rebound, int Block, int Steal, int Stamina) {
        ContentValues cv = new ContentValues();
        cv.put(TEAM, team);
        cv.put(LOCATION, Location);
        cv.put(PLAYER, Player);
        cv.put(CRANGE, cRange);
        cv.put(MRANGE, mRange);
        cv.put(TRANGE, tRange);
        cv.put(FREETHROW, Freethrow);
        cv.put(PASS, Pass);
        cv.put(DEF_REBOUND, Def_rebound);
        cv.put(OFF_REBOUND, Off_rebound);
        cv.put(BLOCK, Block);
        cv.put(STEAL, Steal);
        cv.put(STAMINA, Stamina);
        return ourDatabase.insert(PLAYERS_TABLE, null, cv);
    }

    public String getplayerdata() {
        String[] columns = new String[]{ROWID, TEAM, LOCATION, PLAYER, CRANGE, MRANGE, TRANGE, FREETHROW, PASS, DEF_REBOUND, OFF_REBOUND, BLOCK, STEAL, STAMINA};
        Cursor c = ourDatabase.query(PLAYERS_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(ROWID);
        int iTeam = c.getColumnIndex(TEAM);
        int iLocation = c.getColumnIndex(LOCATION);
        int iPlayer = c.getColumnIndex(PLAYER);
        int iCrange = c.getColumnIndex(CRANGE);
        int iMrange = c.getColumnIndex(MRANGE);
        int iTrange = c.getColumnIndex(TRANGE);
        int iFreethrow = c.getColumnIndex(FREETHROW);
        int iPass = c.getColumnIndex(PASS);
        int iDef_rebound = c.getColumnIndex(DEF_REBOUND);
        int iOff_rebound = c.getColumnIndex(OFF_REBOUND);
        int iBlock = c.getColumnIndex(BLOCK);
        int iSteal = c.getColumnIndex(STEAL);
        int iStamina = c.getColumnIndex(STAMINA);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + "-" + c.getString(iTeam) + "-" + c.getString(iLocation) + "-" + c.getString(iPlayer) + "-" + c.getString(iCrange) + "-" + c.getString(iMrange) + "-" +c.getString(iTrange) + "-" +c.getString(iFreethrow) + "-" +c.getString(iPass) + "-" +c.getString(iDef_rebound) + "-" +c.getString(iOff_rebound) + "-" +c.getString(iBlock) + "-" +c.getString(iSteal) + "-" +c.getString(iStamina) + "-" +"\n";
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:59:12.980

我将 west_teams 计为有 9 个成员，其索引为 0 到 8。但是您的随机数可能是 9，这会给您带来越界错误。

# ruby - Ruby - 访问多维哈希并避免访问 nil 对象

> ID：10130726
> 
> 赞同：90
> 
> 时间：2012-04-12T19:50:51.127
> 
> 标签：ruby, hash, conditional

> **可能重复：**
> [Ruby：IF 语句中的 Nils](https://stackoverflow.com/questions/5393974/ruby-nils-in-an-if-statement)
> [是否有一种干净的方法可以避免在嵌套的参数哈希中调用 nil 上的方法？](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash)

假设我尝试访问这样的哈希：

```
my_hash['key1']['key2']['key3'] 
```

如果 key1、key2 和 key3 存在于 hash(es) 中，这很好，但如果 key1 不存在怎么办？

然后我会得到`NoMethodError: undefined method [] for nil:NilClass`. 没有人喜欢那样。

到目前为止，我处理这个有条件的，如：

`if my_hash['key1'] && my_hash['key1']['key2']`...

这合适吗，还有其他 Rubiest 方法吗？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-04-12T20:36:34.263

有很多方法可以解决这个问题。

如果你使用 Ruby 2.3 或更高版本，你可以使用[dig](http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig)

```
my_hash.dig('key1', 'key2', 'key3') 
```

很多人坚持使用纯红宝石并链接`&&`警卫测试。

您也可以使用 stdlib [Hash#fetch](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch)：

```
my_hash.fetch('key1', {}).fetch('key2', {}).fetch('key3', nil) 
```

有些人喜欢链接 ActiveSupport 的[#try](http://api.rubyonrails.org/classes/Object.html#method-i-try)方法。

```
my_hash.try(:[], 'key1').try(:[], 'key2').try(:[], 'key3') 
```

其他人使用[andand](https://github.com/raganwald/andand)

```
myhash['key1'].andand['key2'].andand['key3'] 
```

有些人认为[以自我为中心的 nil](https://github.com/raganwald/homoiconic/blob/master/2009-02-02/hopeless_egocentricity.md)是个好主意（尽管如果他们发现你这样做，有人可能会追捕你并折磨你）。

```
class NilClass
  def method_missing(*args); nil; end
end

my_hash['key1']['key2']['key3'] 
```

您可以使用[Enumerable#reduce](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)（或别名注入）。

```
['key1','key2','key3'].reduce(my_hash) {|m,k| m && m[k] } 
```

或者可能使用嵌套查找方法扩展 Hash 或只是您的目标哈希对象

```
module NestedHashLookup
  def nest *keys
    keys.reduce(self) {|m,k| m && m[k] }
  end
end

my_hash.extend(NestedHashLookup)
my_hash.nest 'key1', 'key2', 'key3' 
```

哦，我们怎么能忘记[可能](http://lostechies.com/derickbailey/2010/10/10/the-maybe-monad-in-ruby/)的单子呢？

```
Maybe.new(my_hash)['key1']['key2']['key3'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T20:24:15.920

您也可以使用[Object#andand](http://andand.rubyforge.org/)。

```
my_hash['key1'].andand['key2'].andand['key3'] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T19:58:42.963

条件`my_hash['key1'] && my_hash['key1']['key2']`不感觉[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

备择方案：

1）[自动复活](http://t-a-w.blogspot.com/2006/07/autovivification-in-ruby.html)魔法。从那个帖子：

```
def autovivifying_hash
   Hash.new {|ht,k| ht[k] = autovivifying_hash}
end 
```

然后，以您的示例：

```
my_hash = autovivifying_hash     
my_hash['key1']['key2']['key3'] 
```

它类似于 Hash.fetch 方法，两者都使用新的哈希作为默认值，但这会将细节转移到创建时间。诚然，这有点作弊：它永远不会返回 'nil' 只是一个空散列，它是动态创建的。根据您的用例，这可能是浪费。

2）通过查找机制抽象出数据结构，并在幕后处理未找到的情况。一个简单的例子：

```
def lookup(model, key, *rest) 
    v = model[key]
    if rest.empty?
       v
    else
       v && lookup(v, *rest)
    end
end
#####

lookup(my_hash, 'key1', 'key2', 'key3')
=> nil or value 
```

3）如果你觉得单子，你可以看看这个， [也许](http://meta-meta.blogspot.com/2006/12/monads-in-ruby-part-2-maybe-then-again.html)

# java - 如何访问 JEditorPane 中的小部件？

> ID：10130727
> 
> 赞同：0
> 
> 时间：2012-04-12T19:50:56.533
> 
> 标签：java, html, swing, jeditorpane

我正在使用 JEditorPane 来显示 html 文本。如果 html 文件包含

```
<form action="WORK3.html" method="get">
  <input type="text" value="Enter your name here!" size="25">
</form> 
```

JEdi​​torPane 将在编辑器小部件中放置一个文本字段小部件。我想做的是检索文本字段中的值。如何检索文本字段的文本值或小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:48:41.410

HTML 控件被添加到封装在私有内部类 Invalidator extends Container 中的 JEditorPane 中。

因此，您可以获得 JEditorPane 的所有子组件。它们中的每一个都应该是 Invalidator 实例。Invalidator 的唯一子项是编辑组件本身（例如，JTextFlied 用于`<input>`标记）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:47:13.860

Thanks Stanislav for taking the time to answer. Trying to retrieve the component was too hard for me. I found a way around the problem. I hope this will help someone else. Although I could not find a way to get access to the widget, I can create my own text widget and replace the default one. That way I have control over widget. To do this you have to subclass the HTMLEditorKit.HTMLFactory. In this class, you need to override the

```
public View create (Element elem_) {
    Document doc = elem_.getDocument();
    Object obj = elem_.getAttributes().
        getAttribute(StyleConstants.NameAttribute);

    HTML.Tag tag = (HTML.Tag) obj;

    if (tag.toString().equals ("input")) {
        // you can replace your widget here if you want
        // i choose to use the default but save the view for
        // my own use later
        ComponentView view = (ComponentView)super.create (elem_);
        // save the component view to where you want to access 
        // later.  you can retrieve the component from the 
        // ComponentView and cast it to back to JTextField
        _editor.saveView (view);

        return (view);
    }

    else {
        return (super.create (elem_);
    }
} 
```

You have to do this at least once for each type of widget that you want to control. It is a pain, but it does the job.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:59:59.960

当您在 textPane 中插入组件时，您只需将其从其 Invalidator 类中“解包”即可。

```
//Loop through the components, maybe looking for some in particular

for (Component cont : myTextPane.getComponents()) {
//Unwrap your component, means take the only one component from the wrapper container
    Component comp = ((Container) cont).getComponent(0);

    //Do your things with your component
    // ...      
} 
```

# python - 插入新值的最佳方法

> ID：10130734
> 
> 赞同：4
> 
> 时间：2012-04-12T19:51:25.793
> 
> 标签：python, pandas

我想使用 pandas 数据框来跟踪我将在交易日实时下载的一些市场数据。

假设我想记录 AAPL 和 GOOG 的价格。我首先创建一个数据框：

```
prices = DataFrame(columns = ['AAPL', 'GOOG']) 
```

假设第一个数据点在时间 t1 进入，AAPL 的价格为 555.0。然后几秒钟后，在 t2，GOOG 的价格为 430.0。

一个当然不能做：

```
prices['AAPL'][t1] = 555.0
prices['GOOG'][t2] = 430.0 
```

除了拉索引、修改索引、重新索引数据框然后插入每个标量价格之外，pandas 中是否有一种简单/快速的方法来完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:04:48.310

检查`set_value`方法（如果大小发生突变，则返回对新对象的引用）。但不要指望它很快（与嵌套字典相比）：

```
In [7]: prices
Out[7]: 
Empty DataFrame
Columns: array([AAPL, GOOG], dtype=object)
Index: array([], dtype=object)

In [8]: prices = prices.set_value(t1, 'AAPL', 5)

In [9]: prices
Out[9]: 
                            AAPL  GOOG
2012-04-12 18:02:28.178331     5   NaN 
```

最好在某个时候添加一种方法，以便通过在最后粘贴数据来更有效地调整 DataFrame 的大小（NumPy 确实有这方面的功能）。

# ruby-on-rails - 如何<%= link_to %> 整个区域 在 Ruby on Rails 中

> ID：10130735
> 
> 赞同：1
> 
> 时间：2012-04-12T19:51:28.100
> 
> 标签：ruby-on-rails, css

在我的导航栏中，我目前正在将短语“退出”链接到 signout_path：

```
 <li><%= link_to "Sign out", signout_path, :method => :delete %></li> 
```

如何使 li 标签的整个区域成为一个链接，以便当我单击渐变区域中的任意位置时，它会链接到 home？

悬停在 li 区域的 CSS：

```
 ul.TabNav li:hover {
     background:#666;
     cursor:pointer;
        } 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:53:33.997

在你的 CSS 中试试这个：

```
ul.TabNav li a {
  display: block;
} 
```

如果这不会破坏您的布局，它应该使链接填满`li`标签中的可用空间，使其全部可点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:53:42.513

您需要向 a 元素添加填充，然后填充中的任何内容都将是可点击的。

```
ul.TabNav li a {
  padding-left: 10px;
  padding-top: 5px;
  padding-right: 10px;
  padding-bottom: 5px;
} 
```

或者，正如迈克尔所说，让它显示：例如阻止

[http://jsfiddle.net/MrFdY/3/](http://jsfiddle.net/MrFdY/3/)

# java - 将项目从 JDK 1.7 切换到 1.6 BufferedReader

> ID：10130742
> 
> 赞同：2
> 
> 时间：2012-04-12T19:52:09.893
> 
> 标签：java, transfer

我不得不将我的学校项目 JDK 1.7 切换到 1.6。我在平台 1.6 上创建了一个新项目，并将所有内容复制到我的项目中，似乎 1.6 不支持这种缓冲阅读器，请帮忙？我需要从 src 中的文件中读取。如果我使用扫描仪应该可以吗？

```
try (BufferedReader br = new BufferedReader(new FileReader(sDataPath))){

Error " Resource specification not allowed here for source level below 1.7" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T19:53:34.663

这不是`BufferedReader`问题 - 这是您的[try-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，它是在 Java 7 中引入的。您需要手动关闭阅读器：

```
BufferedReader reader = new BufferedReader(new FileReader(sDataPath));
try {
    ...
} finally {
    reader.close();
} 
```

顺便说一句，我建议*不要*使用`FileReader`- 使用`InputStreamReader`包装 a`FileInputStream`以便您可以指定编码。

哦，如果您被允许使用外部库，您可能会发现[Guava](http://guava-libraries.googlecode.com)将使您的资源处理更简单:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:54:32.877

Java 7 允许使用该`try()`结构自动处理资源。Java 6 没有它。您需要编写如下内容：

```
BufferedReader br=null
try {
    br = new BufferedReader(...); // create and use BufferedReader here
}
finally {
    if(br!=null) br.close();
} 
```

# jquery - 所有可能的组合字符串 - 速度

> ID：10130743
> 
> 赞同：-4
> 
> 时间：2012-04-12T19:52:13.950
> 
> 标签：jquery, for-loop, combinations

我创建了一个 jquery 脚本，它生成字符串的所有可能组合，其中涉及数字和小写字母。我只想要 10 个字符长的字符串，所以我加入了一个 if 语句来控制它。

对于那些感兴趣的人，这是脚本：

```
$(document).ready(function(){

    var parts = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','1','2','3','4','5','6','7','8','9','0'];
    var url = "";

for (var a = 0; a < parts.length; a++) {
    for (var b = 0; b < parts.length; b++) {
        for (var c = 0; c < parts.length; c++) {
            for (var d = c + 1; d < parts.length; d++) {
                for (var e = d + 1; e < parts.length; e++) {
                    for (var f = e + 1; f < parts.length; f++) {
                        for (var g = f + 1; g < parts.length; g++) {
                            for (var h = g + 1; h < parts.length; h++) {
                                for (var i = h + 1; i < parts.length; i++) {
                                    for (var j = i + 1; j < parts.length; j++) {
                                            url = parts[a]+parts[b]+parts[c]+parts[d]+parts[e]+parts[f]+parts[g]+parts[h]+parts[i]+parts[j];
                                            if (url.length === 10) {
                                                $("#URLs").append(url+', ');
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

}); 
```

每个字符点都有一个 for 循环。如果您只想要 3 个字符的长字符串，请仅使用 3 个嵌套的 for。

它可能不优雅，但它有效。我的问题是速度/崩溃。

自然，尝试通过浏览器运行它是一个坏主意。什么是更好的程序/语言/设置速度？我知道无论如何我都可能受制于 CPU 的能力，而且暴力破解总是很慢。

如果有一项服务可以做同样的事情，我想这也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:01:05.480

您将没有地方存储输出。您说的是 3.656e+15 组合，因此您将其附加到 DOM 元素的方法行不通。

即使您使用 C/C++ 或 Java，您仍然在谈论可能不适合您的存储容量的东西。如果您只是动态提交它们（而不是存储它们），那么提交这么多请求将花费很长时间。我认为您在这里尝试完成的任何（阴暗？）事情都不会成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:09:29.553

您正在创建 3656158440062976 个字符串，以每秒 100 万个字符串的速度，您的脚本将运行 115 年，以每秒 10 亿个字符串的速度运行 42 天。结果字符串 (your `$('#URLs').append`) 将是 36 PB，每个字符 1 个字节。

我投票不可行

```
(Math.pow(36,10)/1000000)/(60*60*24*365)
=115.93602359408219
(Math.pow(36,10)/1000000000)/(60*60*24)
=42.31664861184
(Math.pow(36,10)*10)/(1000*1000*1000*1000*1000)
=36.56158440062976 
```

参见[wolfram alpha](http://www.wolframalpha.com/input/?i=alpha+numeric+password&f1=10+characters&x=8&y=5&f=PasswordSingleAdvanced.pl_10+characters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:23:08.350

尝试阅读此内容，因为我相信这是您的最终目标：[http ://en.wikipedia.org/wiki/Password_cracking](http://en.wikipedia.org/wiki/Password_cracking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:24:23.267

*什么是更好的程序/语言/设置速度？*

C/C++ 将是很好的语言。并使用递归。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:21:47.020

并不是说我完全回答了您的问题（由于大量排列，仍然存在性能和内存限制），但这是我想到的算法之一：将字符串视为基数 N 中的一个大数，其中N 是允许的字符数。

1.  以字符串 aaaaa..aa 开头
2.  如果最后一个位置的字符不相等`0`（最后一个，“最大”允许的符号），则增加它。否则，将字符设置为`a`并递增前一个符号，如果它不等于`0`。否则，……你明白了。
3.  重复步骤 2 所需的次数。

这个算法的一个好处是你可以把它包装在一个函数中，`getNextString()`然后调用它需要的次数。此外，没有递归，因此在大多数语言中应该更快。

# select - 您可以将 SELECT INTO 语句与包含 UDF 的 CTE 一起使用吗？

> ID：10130744
> 
> 赞同：0
> 
> 时间：2012-04-12T19:52:26.617
> 
> 标签：select, user-defined-functions, common-table-expression

我可以这样做：

```
With ZipCodeCTE as
            {
            select nvl(HH.GeoUSZip5 , **ZipCodeKeyLookUp**(HH.[CityName],HH.[StateName])) as TotalZipCode
            from ODSDataArchive.archive.HHJob_Data_201202 HH
            }
    /* This Is a SELECT INTO statement that inserts
       data into [Jobs].[dbo].[FactRPP]*/
    SELECT  [dbo].[FactJobsDaily].jobdid, 
            [dbo].[FactJobsDaily].DateKey,
            [dbo].[FactJobsDaily].YearMonth,
            [dbo].[FactJobsDaily].AccountKey,
            [dbo].[FactJobsDaily].BridgeSocKey,
            [dbo].[FactJobsDaily].HostSiteKey,
            [dbo].[FactJobsDaily].JobClickedCount,
            [dbo].[FactJobsDaily].JobResultsPageCount,
            (select DZ.ZipCodeKey 
               from dimensions.dbo.DimZipCode DZ
              where DZ.ZipCodeKey IN 
                               (Select CAST(TotalZipCode AS INT) 
                                 from ZipCodeCTE))
      INTO [Jobs].[dbo].[FactRPP]                                
      from dbo.FactJobsDaily  
           inner join ODSDataArchive.archive.HHJob_Data_201202  
                   on dbo.FactJobsDaily.JobDID = ODSDataArchive.archive.HHJob_Data_201202.DID  
                   and dbo.FactJobsDaily.datekey = ODSDataArchive.archive.HHJob_Data_201202.datekey 
           inner join dimensions.dbo.Dimzipcode dzc 
                   on ODSDataArchive.archive.HHJob_Data_201202.geoUSZip5 = dimensions.dbo.Dimzipcode.ZipCode
     where [dbo].[FactJobsDaily].yearmonth= 201202 
           and [dbo].[FactJobsDaily].isactivekey = 1 
         --  and ODSDataArchive.archive.HHJob_Data_201202.geoUSZip5  <> '' 
         --  and ODSDataArchive.archive.HHJob_Data_201202.geoUSZip5  IS NOT NULL
           and ODSDataArchive.archive.HHJob_Data_201202.status = 0 
           and ODSDataArchive.archive.HHJob_Data_201202.CountryName = 'US' 
    order by [dbo].[FactJobsDaily].jobdid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:54:44.723

因为 CTE 转换为常规查询，所以简短的回答是肯定的。

# ios - 核心数据 - 父/子层次结构的排序描述符

> ID：10130749
> 
> 赞同：0
> 
> 时间：2012-04-12T19:52:42.530
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

我从一个包含层次结构的 HTML 请求中得到一个 JSON 对象。

来自 JSON 对象的示例：

```
{
    "_id": "4f870f064f95ae0da8000002",
    "name": "Category",
    "parent_id": null
},
{
    "_id": "4f870f0e4f95ae0da8000004",
    "name": "Brand",
    "parent_id": null
},
{
    "_id": "4f8715bd4f95ae0da8000028",
    "name": "Dermalogica",
    "parent_id": "4f870f0e4f95ae0da8000004"
},
{
    "_id": "4f8715de4f95ae0da800002a",
    "name": "Molton Brown",
    "parent_id": "4f870f0e4f95ae0da8000004"
},
{
    "_id": "4f8715ea4f95ae0da800002c",
    "name": "Waxing",
    "parent_id": "4f870f064f95ae0da8000002"
},
{
    "_id": "4f8715f34f95ae0da800002e",
    "name": "Mens Hair",
    "parent_id": "4f870f064f95ae0da8000002"
},
{
    "_id": "4f8715fd4f95ae0da8000030",
    "name": "Ladies Hair",
    "parent_id": "4f870f064f95ae0da8000002"
},
{
    "_id": "4f87161f4f95ae0da8000032",
    "name": "Massage",
    "parent_id": "4f870f064f95ae0da8000002"
} 
```

当我以相同的方式将它保存在一个实体中时，我将如何定义获取请求（排序）以便对象按照它们的父/子关系进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T19:00:20.017

无法使用 sortDescriptors 对此类数据进行排序。这就是我解决问题的方法，对带有线程样式讨论的文章发表评论。下载所有评论后，我需要`reindexComments`

```
-(void)reindexComments{
    NSArray *articleComments = self.comments.allObjects;
    [self fetchChildsWithComments:articleComments forParentId:0 num:1];
}

-(NSUInteger)fetchChildsWithComments:(NSArray*)articleComments forParentId:(NSUInteger)parentId num:(NSUInteger)num{
    NSArray *childComments = [articleComments filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"parentId == %u", parentId]];
    childComments = [childComments sortedArrayUsingComparator:^NSComparisonResult(Comment *c1, Comment *c2) {
        if (c1.commentIdValue < c2.commentIdValue){
            return NSOrderedAscending;
        }else{
            return NSOrderedDescending;
        }
    }];

    for (Comment *newRootComment in childComments){
        newRootComment.numValue = num;
        num++;
        num = [self fetchChildsWithComments:articleComments forParentId:newRootComment.commentIdValue num:num];
    }
    return num;
} 
```

最后我只是按`numValue`字段排序以获得我很好的线程讨论

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T23:00:14.110

一种方法 - 使用 NSOrderedSet - [http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html)

其次，更方便（因为在iOS 5中引入了NSOrderedSet），只是一个简单的带有sortDescriptors的NSFetchRequest。由于它是一个数组，你可以一次使用多个描述符。因此，使用**parent_id**和**id**的描述符应该会给你想要的结果。

```
NSFetchRequest *request = [[NSFetchRequest alloc]init];
    request.entity = [NSEntityDescription entityForName:@"Child" inManagedObjectContext:context];
   // request.predicate = [NSPredicate predicateWithFormat:@"parent_id =  %@",parent_ID];You don't need any predicate,right?
    request.sortDescriptors = [NSArray arrayWithObjects:[NSSortDescriptor sortDescriptorWithKey:@"parent_id" ascending:YES],[NSSortDescriptor sortDescriptorWithKey:@"_id" ascending:YES],nil];

return [context executeFetchRequest:request error:&error]; 
```

而且，在 Objective-C 中，在名称中使用下划线并不方便。希望，这有帮助。

# wordpress - 将现有的 Wordpress 网站合并到 Joomla 网站

> ID：10130754
> 
> 赞同：0
> 
> 时间：2012-04-12T19:52:58.393
> 
> 标签：wordpress, joomla, joomla-extensions

我们有一个用 Wordpress 开发的博客网站。已经上线2年了。

我们正在尝试使用 Joomla 创建一个新站点。棘手的部分是我们希望旧的 wordpress 博客站点成为新站点的一部分。我们不只是想在 Joomla 网站上放置一些链接并指向 Wordpress 网站。我们希望在新站点中保留 Wordpress 博客功能。

关于如何处理的任何建议？

提前致谢，

米洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:21:23.137

安装您的 Joomla 站点，然后将您的 wordpress 博客迁移到子目录中；）。我以前做过这个，发现它工作得很好，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:56:49.977

[http://extensions.joomla.org/extensions/social-web/social-edition/blog-integration/6659](http://extensions.joomla.org/extensions/social-web/social-edition/blog-integration/6659)

这是我正在寻找的正确插件。现在它与 Joomla 2.5 兼容

# c++ - 类 - 获取函数 - 返回多个值

> ID：10130755
> 
> 赞同：2
> 
> 时间：2012-04-12T19:52:59.210
> 
> 标签：c++, class, return-value

假设我们有：

```
Class Foo{
    int x,y;

    int setFoo();
}

int Foo::setFoo(){
    return x,y;
} 
```

我想要实现的只是从我的 get 函数中返回多个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T19:54:25.677

C++ 不支持多个返回值。

您可以通过参数返回或创建辅助结构：

```
class Foo{
    int x,y;

    void setFoo(int& retX, int& retY);
};

void Foo::setFoo(int& retX, int& retY){
    retX = x;
    retY = y;
} 
```

或者

```
struct MyPair
{
   int x;
   int y;
};

class Foo{
    int x,y;

    MyPair setFoo();
};

MyPair Foo::setFoo(){
    MyPair ret;
    ret.x = x;
    ret.y = y;
    return ret;
} 
```

另外，不应该调用您的方法`getFoo`吗？只是在说...

编辑：

你可能想要的：

```
class Foo{
    int x,y;
    int getX() { return x; }
    int getY() { return y; }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T19:54:38.347

您可以有参考参数。

```
void Foo::setFoo(int &x, int &y){
    x = 1; y =27 ;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T19:57:48.747

*您本身*不能返回多个对象，但您可以使用`std::pair`from`<utility>`或`std::tuple`from `<tuple>`（后者仅在最新的 C++ 标准中可用）将多个值打包在一起并将它们作为一个对象返回。

```
#include <utility>
#include <iostream>

class Foo
{
  public:
    std::pair<int, int> get() const {
        return std::make_pair(x, y);
    }

  private:
    int x, y;
};

int main()
{
    Foo foo;
    std::pair<int, int> values = foo.get();

    std::cout << "x = " << values.first << std::endl;
    std::cout << "y = " << values.second << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T19:57:41.390

您不能真正在 C++ 中返回多个值。但是可以通过引用修改多个值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T19:54:49.470

您不能返回超过 1 个变量。但是您可以通过引用传递，并修改该变量。

```
// And you pass them by reference
// What you do in the function, the changes will be stored
// When the function return, your x and y will be updated with w/e you do.
void myFuncition(int &x, int &y)
{
    // Make changes to x and y.
    x = 30;
    y = 50;
}

// So make some variable, they can be anything (including class objects)
int x, y;
myFuncition(x, y);
// Now your x and y is 30, and 50 respectively when the function return
cout << x << " " << y << endl; 
```

**编辑：回答你关于如何获取的问题**：你传递一些变量，而不是只返回 1 个变量，所以你的函数可以修改它们，（当它们返回时），你会得到它们。

```
// My gen function, it will "return x, y and z. You use it by giving it 3 
// variable and you modify them, and you will "get" your values.
void myGetFunction(int &x, int &y, int &z)
{
    x = 20;
    y = 30;
    z = 40;
}

int a, b, c;
// You will "get" your 3 value at the same time when they return.
myGetFunction(a, b, c); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T19:56:08.437

C++ 不允许您返回多个值。您可以返回*包含*多个值的类型。但是您只能从 C++ 函数返回一种类型。

例如：

```
struct Point { int x; int y; };

Class Foo{
    Point pt;

    Point setFoo();
};

Point Foo::setFoo(){
    return pt;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-12T20:01:55.647

您可以使用[`std::pair`](http://en.cppreference.com/w/cpp/utility/pair)两个返回的变量和[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)（仅限 C++11）更多的变量。

# javascript - 弄清楚表单验证以验证跨多个输入的值

> ID：10130761
> 
> 赞同：0
> 
> 时间：2012-04-12T19:53:11.557
> 
> 标签：javascript, jquery, forms, validation, formwizard

我正在使用[jQuery](http://en.wikipedia.org/wiki/JQuery)表单向导插件。我有 20 个问题，每个问题都有三个答案。每个答案都可以有一个权重。对于每个问题，答案的总权重必须等于 10。

```
<fieldset id="first" class="step">
    <input type="text" size="2" maxlength="2" value="" name="question1[]" class="required"/>A: Inspiring others with a compelling vision for change.<br />
    <input type="text" size="2" maxlength="2" value="" name="question1[]" />B: Engaging others to buy-into the change.<br />
    <input type="text" size="2" maxlength="2" value="" name="question1[]" />C: Executing a project plan and managing accountabilities.<br />
    <label for="question1[]" class="error" style="display:none;">Your values must add up to 10!</label>
</fieldset> 
```

这基本上是一个性格评估。假设我觉得 A 和 C 不适用，我会为 A 输入 10。

有什么方法可以检查每个字段集是否加起来为 10，如果没有则发送错误消息？

我正在使用 jQuery 验证插件，但这似乎有点过于具体，因为我知道它会检查数字等。

我试图在以下内容中添加一些内容，甚至获得通过所需的检查，但我不确定从这里去哪里：

```
$(document).ready(function() {
    $("#Form").validate({
        submitHandler: function(form) {
            form.submit();
        }
    });
    $("#Form input[name='question1']").each(function() {
        $(this).rules("add", {
            required: true,
            maxlength: 2,
            messages: {
                required: "Required",
                minlength: jQuery.format("Max length of {2} characters.")
            }
        });
    });
}); 
```

我还发现 jQuery validate 必须编辑一个函数来容纳数组。我更改了以下功能：

```
checkForm: function() {
    this.prepareForm();
    for (var i=0, elements=(this.currentElements = this.elements()); elements[i]; i++ ) {
        if (this.findByName(elements[i].name).length != undefined &&
            this.findByName( elements[i].name ).length > 1) {

            for (var cnt = 0; cnt < this.findByName( elements[i].name ).length; cnt++) {
                this.check( this.findByName( elements[i].name )[cnt] );
            }
        }
        else {
            this.check( elements[i] );
        }
    }
    return this.valid();
} 
```

我也试过这个：

```
$(document).ready(function(){
    $("#Form").validate({
        rules: {
            question1: {
                required: true
            }
        },
        submitHandler: function(form) {
            form.submit();
        }
    });
}); 
```

这些似乎都没有给我一个“必需的”错误。控制台中没有错误。当按下“下一步”按钮时，我需要在每个问题上验证这一点。下一个按钮确实有`type=submit`，所以理论上它至少应该看到我说问题 1 必须是必需的，但无济于事。

我也试过这个：

```
$().ready(function() {
    // validate the comment form when it is submitted
    $("#Form").validate({
        rules: {
            "question1[]": "required"
        },
        messages: {
            "question1[]": "Input is required",
        }
    });
}); 
```

但它继续到下一个字段集，没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:28:10.197

在这种情况下，创建一个禁用的新输入，当各个权重值发生变化时，将此禁用输入的值更改为总和。验证禁用的输入 - 要求它的值等于 10，如果不是，则显示错误。

# macos - 10.7.4 下全局“BackgroundChanged”通知无响应

> ID：10130764
> 
> 赞同：2
> 
> 时间：2012-04-12T19:53:19.003
> 
> 标签：macos, operating-system, notifications, global

10.7.4 下全局“BackgroundChanged”通知无响应

重现步骤：

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(desktopImageChanged:) name:@"com.apple.desktop" object:@"BackgroundChanged"]; 
```

错误报告已经提交。

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:23:56.890

这是死胡同！

收到苹果的邮件：

感谢您就 Bug ID# xxxxxxxxxxx 与我们联系。

工程部门已根据以下信息确定此问题的行为符合预期：

我们不希望在桌面图片更改时发送通知。

我们现在正在关闭这个错误，因为我们的工程师已经意识到了这个问题。

# asp.net - 事务管理器已禁用对远程/网络事务的支持

> ID：10130767
> 
> 赞同：97
> 
> 时间：2012-04-12T19:53:20.300
> 
> 标签：asp.net, vb.net, transactionscope

我正在使用 SQL Server 和 ASP.NET。我有以下功能：

```
Using js = daoFactory.CreateJoinScope()
    Using tran = New Transactions.TransactionScope()
        '...
        tran.Complete()
    End Using
End Using 
```

但是，会引发以下异常：

> 事务管理器已禁用对远程/网络事务的支持。

说明`JoinScope`：

```
Public Class JoinScope
    Implements IJoinScope
    Implements IDisposable
    '...
End Class 
```

我在另一个具有相同环境的应用程序中以这种方式工作没有问题，但在这里我遇到了这个问题。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-04-12T20:31:49.177

确保“分布式事务协调器”服务正在数据库和客户端上运行。还要确保选中“网络 DTC 访问”、“允许远程客户端”、“允许入站/出站”和“启用 TIP”。

为 MS DTC 事务启用网络 DTC 访问

1.  打开组件服务管理单元。

    要打开组件服务，请单击开始。在搜索框中，键入 dcomcnfg，然后按 Enter。

2.  展开控制台树以找到要为其启用网络 MS DTC 访问的 DTC（例如，本地 DTC）。

3.  在操作菜单上，单击属性。

4.  单击安全选项卡并进行以下更改： 在安全设置中，选中网络 DTC 访问复选框。

    在事务管理器通信中，选中允许入站和允许出站复选框。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-07T09:10:20.010

我有一个存储过程，它在“链接服务器”中调用另一个存储过程。当我在 ssms 中执行它时没问题，但是当我在应用程序中调用它（通过实体框架）时，我得到了这个错误。这篇文章帮助了我，我使用了这个脚本：

```
EXEC sp_serveroption @server = 'LinkedServer IP or Name',@optname = 'remote proc transaction promotion', @optvalue = 'false' ; 
```

有关更多详细信息，请查看： [链接服务器：合作伙伴事务管理器已禁用对远程/网络事务的支持](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/24d74b4f-cf65-4b1b-8ba6-e87c1858b710/linked-server-the-partner-transaction-manager-has-disabled-its-support-for-remotenetwork?forum=sqldatabaseengine)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-02-24T11:24:16.400

我间歇性地遇到这个问题，我已经按照这里的说明和其他地方非常相似的说明进行操作。一切都已正确配置。

这个页面：[http](http://sysadminwebsite.wordpress.com/2012/05/29/9/) ://sysadminwebsite.wordpress.com/2012/05/29/9/帮助我找到了问题。

基本上，我在两台服务器上都有重复的 MSDTC 的 CID。*HKEY_CLASSES_ROOT\CID*

请参阅：http: [//msdn.microsoft.com/en-us/library/aa561924.aspx](https://docs.microsoft.com/en-us/biztalk/core/troubleshooting-problems-with-msdtc?redirectedfrom=MSDN#ensure-that-msdtc-is-assigned-a-unique-cid-value)部分**确保为 MSDTC 分配了唯一的 CID 值**

我正在使用虚拟服务器，我们的服务器团队喜欢为每台服务器使用相同的映像。这是一个简单的修复，我们不需要重新启动。但是 DTC 服务确实需要设置为自动启动，并且确实需要在重新安装后启动。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-03-09T09:36:34.950

在我的场景中，抛出异常是因为我试图在一个已经存在的连接上的 TransactionScope 内创建一个新的连接实例：

例子：

```
void someFunction()
{
    using (var db = new DBContext(GetConnectionString()))
    {
        using (var transaction = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted }))
        {
            someOtherFunction(); // This function opens a new connection within this transaction, causing the exception.
        }
    }
}

void someOtherFunction()
{
    using (var db = new DBContext(GetConnectionString()))
    {
        db.Whatever // <- Exception.
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-08T01:15:24.573

来自[答案](https://stackoverflow.com/a/10131344/76010)的评论：“确保对事务中的所有数据库调用使用相同的打开连接。- Magnus”

我们的用户存储在与我在交易中使用的数据不同的数据库中。打开数据库连接以获取用户对我来说导致了这个错误。将其他数据库连接和用户查找移到事务范围之外修复了该错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-10T16:59:02.057

我在这里发布了以下解决方案，因为经过一番搜索，这是我登陆的地方，所以其他人也可以。我试图使用 EF 6 调用存储过程，但由于存储过程使用了**链接服务器**，因此出现了类似的错误。

**无法执行操作，因为链接服务器的 OLE DB 提供程序 _ 无法开始分布式事务**

**合作伙伴事务管理器已禁用对远程/网络事务的支持***

跳转到**SQL 客户端**确实解决了我的问题，这也向我证实了这是一个 EF 问题。

EF 模型生成基于方法的尝试：

```
db.SomeStoredProcedure(); 
```

基于 ExecuteSqlCommand 的尝试：

```
db.Database.ExecuteSqlCommand("exec [SomeDB].[dbo].[SomeStoredProcedure]"); 
```

和：

```
var connectionString = db.Database.Connection.ConnectionString;
var connection = new System.Data.SqlClient.SqlConnection(connectionString);    
var cmd = connection.CreateCommand();
cmd.CommandText = "exec [SomeDB].[dbo].[SomeStoredProcedure]";

connection.Open();
var result = cmd.ExecuteNonQuery(); 
```

该代码可以缩短，但我认为该版本更便于调试和单步执行。

我不相信 Sql Client 一定是首选，但我觉得如果有类似问题的其他人被谷歌登陆这里，至少值得分享。

上面的代码是 C#，但是尝试切换到 Sql Client 的概念仍然适用。至少，尝试这样做将是诊断性的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-19T13:59:33.127

如果在组件服务中找不到本地 DTC，请先尝试运行此 PowerShell 脚本：

```
$DTCSettings = @(
"NetworkDtcAccess",               # Network DTC Access
"NetworkDtcAccessClients",        # Allow Remote Clients        ( Client and Administration)
"NetworkDtcAccessAdmin",          # Allow Remote Administration ( Client and Administration)
"NetworkDtcAccessTransactions",   #                (Transaction Manager Communication )
"NetworkDtcAccessInbound",        # Allow Inbound  (Transaction Manager Communication )
"NetworkDtcAccessOutbound" ,      # Allow Outbound (Transaction Manager Communication )
"XaTransactions",                 # Enable XA Transactions
"LuTransactions"                  # Enable SNA LU 6.2 Transactions
)
foreach($setting in $DTCSettings)
{
Set-ItemProperty -Path HKLM:\Software\Microsoft\MSDTC\Security -Name $setting -Value 1
} 
Restart-Service msdtc 
```

它出现了！

来源：[合作伙伴事务管理器已禁用对远程/网络事务的支持](https://social.msdn.microsoft.com/Forums/en-US/7172223f-acbe-4472-8cdf-feec80fd2e64/the-partner-transaction-manager-has-disabled-its-support-for-remotenetwork-transactions?forum=adodotnetdataproviders)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-17T00:06:13.290

如果其他人有同样的问题：

我发生了类似的错误。原来我在一个事务中包装了几个 SQL 语句，其中一个在链接服务器上执行（在 EXEC(...) AT Server 语句中执行 Merge 语句）。我通过打开一个到链接服务器的单独连接解决了这个问题，将该语句封装在 try...catch 中，然后中止原始连接上的事务，以防 catch 被触发。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-17T17:09:42.007

在尝试创建存储过程时，我在 SSMS 中的链接服务器上遇到了这个问题。

在链接服务器上，我将服务器选项“启用分布式事务提升”更改为 False。

[服务器选项的屏幕截图](https://i.stack.imgur.com/Mhs97.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-25T09:52:19.903

我有同样的错误信息。对我来说，在连接字符串中更改`pooling=False`为解决了问题。`;pooling=true;Max Pool Size=200`

# windows - 将命令输出放入变量中

> ID：10130768
> 
> 赞同：1
> 
> 时间：2012-04-12T19:53:24.947
> 
> 标签：windows, batch-file

给定一个包含以下文件的目录

```
image1.txt
image2.txt
image3.txt 
```

我想获取最旧的文件（让文件按数据排序，首先是旧日期）：

```
dir /b /od c:\test\image?.txt | findstr ^1 
```

手动将其键入 cmd.exe 时效果很好。现在（在批处理脚本中）我想将此命令的输出放入变量中。我怎样才能做到这一点？谢谢！

**更新：** 想知道是否有没有使用循环的直接方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:13:00.230

```
For /F %%A in ('"dir /b /od C:\test\image*.txt|findstr ^1"') do set myVar=%%A 
```

你可以通过 For 循环来做，在命令行中尝试，我刚刚测试过它，它工作正常

输出：

```
set myVar=image1.txt 
```

在命令行上执行 Set 你可以看到：

```
myVar=image1.txt
NUMBER_OF_PROCESSORS=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:36:24.940

没有*直接*的方法，FOR 循环是一种方法，或者另一种方法是使用临时文件设置 /p。

```
dir /b /od c:\test\image?.txt | findstr ^1 > oldest.tmp
< oldest.tmp set /p myVar= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-15T16:20:35.153

例子：

```
wmic path Win32_VideoController get CurrentHorizontalResolution | FINDSTR [0-9] > X.txt 'Output in a file
wmic path Win32_VideoController get CurrentVerticalResolution | FINDSTR [0-9] > Y.txt
wmic path Win32_VideoController get CurrentRefreshRate | FINDSTR [0-9] > Hz.txt
wmic path Win32_VideoController get CurrentBitsPerPixel | FINDSTR [0-9] > Bits.txt
set /p X= < X.txt 'Input from a file
set /p Y= < Y.txt
set /p Hz= < Hz.txt
set /p Bits= < Bits.txt
set X=%X: =% 'Remove the spaces
set Y=%Y: =%
set Hz=%Hz: =%
set Bits=%Bits: =%
DEL /q X.txt 'Delete file created
DEL /q Y.txt
DEL /q Hz.txt
DEL /q Bits.txt 
```

四个步骤。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T20:09:14.993

设置变量名 = dir /b /od C;\test\image?.txt | 找到str ^1

注意：这是未经测试的。资源：

[谷歌](http://www.tech-recipes.com/rx/630/using-variables-in-windows-batch-files/)

# c# - 对于这种情况，我应该使用什么排序策略？

> ID：10130769
> 
> 赞同：0
> 
> 时间：2012-04-12T19:53:30.550
> 
> 标签：c#, silverlight-5.0, icomparable, pivotviewer

我有一个字符串列表，其中显示了电影所属类别的名称。我让一个类定义该列表，实现 List<String> 和 IComparable 接口，以便在 PivotViewerStringProperty 中使用，如下所示：

```
public class SLCategoryList : List<String>, IComparable
{
    public int CompareTo(object obj)
    {
        return this[0].CompareTo((obj as SLCategoryList)[0]);
    }
} 
```

这里的重点是一部电影应该属于许多类别，我想要一个排序策略，这样它就可以制作 pivotviewer 并按每个类别对电影数据库进行排序。因此，它应该在应用程序运行时同时在两个或多个类别中显示同一部电影。

我应该使用什么排序策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:15:14.797

假设我们有一些电影元数据：

```
class MovieMetaData
{
    public string Title { get; set; }
    public List<string> Categories { get; set; }
}

IEnumerable<MovieMetaData> movies = /* Some initialization. */; 
```

我会以两种（非常相似的）方式之一对我的电影进行分组：

```
var categories = movies.SelectMany(m => m.Categories).Distinct();
var groups = categories
    .Select(c => Tuple.Create(c, movies
            .Where(m => m.Categories.Contains(c))
            .OrderBy(m => m.Title)));

foreach (var category in groups)
{
    Console.WriteLine("Category: {0}", category.Item1);

    foreach (var movie in category.Item2)
    {
        Console.WriteLine(movie.Title);
    }
} 
```

或者，对类别进行分组而不是使用 distinct（尽管在这种情况下我觉得不同更清晰 - 注意我最终不得不区分标题）：

```
var categories = movies.SelectMany(m => m.Categories);
var groups = categories
    .Select(c => Tuple.Create(c, movies
            .Where(m => m.Categories.Contains(c))
            .OrderBy(m => m.Title)))
    .GroupBy(g => g.Item1);

foreach (var category in groups)
{
    Console.WriteLine("Category: {0}", category.Key);

    foreach (var movie in category.SelectMany(c => c.Item2).Select(m => m.Title).Distinct())
    {
        Console.WriteLine(movie);
    }
} 
```

（注意：在这里我提出了一种不同的方法。它可能不适用于您尝试做的事情，但我觉得我需要更多信息才能给出更好的答案。）

# css - CSS Margin-top 在 IE7 中不起作用

> ID：10130771
> 
> 赞同：5
> 
> 时间：2012-04-12T19:53:31.280
> 
> 标签：css

> **可能重复：**
> [IE7 显示问题（添加额外的上边距）](https://stackoverflow.com/questions/4475416/ie7-display-issues-adding-extra-top-margin)

所以我有以下CSS

```
.socialMediaPlugin {
width: auto;
display: block;
.socialMediaPluginFooter {
margin-top: 15px;
margin-bottom: -12px; 
```

}

并标记

```
 <div class="socialMediaPlugin socialMediaPluginFooter">
      <div class="socialMediaLinks">
        <a class="addthis_button_facebook"></a>
        <a class="addthis_button_twitter"></a>
        <a class="addthis_button_google_plusone_share"></a>
        <a class="Pinterest"></a>
        <a class="addthis_button_email"></a>
      </div>
    </div> 
```

基本上是margin-top：15px；在 socialMediaPluginFooter 中除 IE7 之外的所有浏览器都可以正常工作有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T19:57:26.080

`margin-top`在 IE7 中非常有问题。`padding-top`在父元素上使用。

[http://reference.sitepoint.com/css/margin-top](http://reference.sitepoint.com/css/margin-top)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:59:44.457

您的问题可能源于您的格式错误的 css。应该是这样的：

```
.socialMediaPlugin {
width: auto;
display: block;
}
.socialMediaPluginFooter {
margin-top: 15px;
margin-bottom: -12px;
} 
```

除非你只是在这里打错了，在这种情况下，这是另一个问题

# java - Java超类实例化调用子类方法，不知道为什么

> ID：10130779
> 
> 赞同：-2
> 
> 时间：2012-04-12T19:54:00.500
> 
> 标签：java, overriding, subclass, superclass

所以我有一个看起来与此类似的问题：

```
package com.blah.A_package;

public class A
{
    public void f() {
        g();
    }

    protected void g() {
        System.out.println("superclass g()");
    }
}

package com.blah.B_package;

public class B extends com.blah.A_package.A
{
    protected void g() {
        System.out.println("subclass g()");
    }
}

public static void main(String[] args)
{
    A scratch = new A();
    scratch.f();
} 
```

运行时，它会打印出“子类 g()”而不是预期的“超类 g()”。

我们实际上是在创建超类和子类的对象（这是通过 jar 上的反射），将它们粘贴到地图中，然后根据需要将它们拉出，但我们通过打印出 object.getClass 进行了验证().getName() 并看到我们实际上正在使用超类实例化。

无论如何，当我们运行应用程序时，出于某种原因，它使用的是方法的子类副本而不是超类，尽管对象是超类的实例（即，它甚至不应该知道子类方法）。这是我和我的同事不知道的已知事情吗？我们完全不知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:59:44.480

简而言之，唯一可能导致这种情况的是运行时对象是 B 的一个实例，但您将其声明为 A。当调用该方法时，您的程序将开始查看它所在对象的运行时类调用，然后沿着继承树向上工作。

附带说明一下，您缺少构造函数，您的 B 类扩展了一个包，并且您的方法没有返回类型。那是完全无效的Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:03:43.413

*可能导致这种混淆的*一件事是有一个与其超类`B`同名的子类（`A`*`A`*

 *除此之外，它看起来像一个分析错误。追溯你的步骤。一些想法：删除类`B`或使其不可实例化，然后重新引入它并再次对其进行测试。*

# html - 省略结束标签是否有效？

> ID：10130781
> 
> 赞同：0
> 
> 时间：2012-04-12T19:54:23.840
> 
> 标签：html, specifications

我记得前一阵子读到，在某些情况下省略结束标记（`</li>`例如）会加快网页的呈现（和加载/解析，因为字节数较少）？

不幸的是，我忘记了我在哪里看到的，但我记得它说这个功能是 HTML 4.0 特有的。

由于我不再有权访问此来源，我想知道是否有人可以确认这一点或链接到 w3c 上的文档（因为我自己无法找到它）？

谢谢！

* * *

**编辑：**忘了提到我的意思是问这种*行为*是否也适用于 HTML5。

* * *

**编辑2：**我设法再次找到[这篇文章](http://webdesign.about.com/od/htmltags/qt/optional-html-end-tags-when-to-include-them.htm)，它确实提到它只加快了页面的下载速度，而不是实际渲染：

> 省略这些元素的结束标签的一个很好的原因是，它们会在页面下载中添加额外的字符，从而减慢页面速度。如果您正在寻找加快网页下载速度的方法，那么摆脱可选的结束标签是一个不错的起点。对于具有大量段落或表格单元格的文档，这可以节省大量资金。

抱歉问了一个毫无意义的问题！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:06:32.773

这是 HTML 4.01 元素的列表。

[http://www.w3.org/TR/html401/index/elements.html](http://www.w3.org/TR/html401/index/elements.html)

结束标签列说明结束标签是可选的。
但是，请注意，这仅在 HTML 4.01 中有效。在 Xhtml 中，所有结束标记都是必需的。不是 100% 确定 HTML5。

我曾经写过一个 HTML 解析器，相信我，如果你是一个解析器并且你在 a 中`<p>`并且你遇到一个`</table>`结束标记，那么检查你的文档树是否正确会更慢，如果是这样，关闭当前`<p>`优先，而不是仅仅遇到一个`</p>`.

**编辑：**
啊，找到了：[http](http://dev.w3.org/html5/html-author/#index-of-elements)
://dev.w3.org/html5/html-author/#index-of-elements 与 HTML 4.01 的要求相同。

**新编辑：**
哦，那是 2009 年的一页。这个是最新的： http:
[//dev.w3.org/html5/spec/syntax.html#optional-tags](http://dev.w3.org/html5/spec/syntax.html#optional-tags)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:57:22.917

AFAIK，在 XHTML 中，您必须始终至少自行关闭标签`<img ... />`

在 HTML（非 xml-html）中，一些标签不需要关闭。`<img>`例如。但是，我建议确保您确切知道您的目标是哪个版本，并使用 W3C 的验证服务进行仔细检查。

[http://validator.w3.org/](http://validator.w3.org/)

我看不出这会如何加快速度，除了你必须每页发送更少的数据字节（某些标签没有 / ，其他标签没有结束标签。）至于构建 DOM，我不知道不知道给定实现（webkit、mozilla 等）的细节以知道哪种方式解析速度更快。我想 XML 只是因为它更规则。

编辑：是的，这种行为在 HTML5 中可用。请注意，帮助页面令人困惑，例如：

[http://www.w3schools.com/html5/tag_meta.asp](http://www.w3schools.com/html5/tag_meta.asp)

非 xml-html 中的 Meta 不需要 /，但他们*可以*拥有它。由于（在我看来）倾向于 XML 风格的 HTML 的结尾斜线在书面 HTML 中更为普遍，但您可以看到它们在文档中使用了这两种样式。验证器将让您确定可以逃脱什么。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T20:09:31.343

某些版本的 HTML 规范中的某些标签具有可选的结束标签。但是，我认为排除结束标签通常被认为是不好的形式。

如前所述，`li`在 html4 中，结束标记是可选的：

[http://www.w3.org/TR/html401/struct/lists.html#h-10.2](http://www.w3.org/TR/html401/struct/lists.html#h-10.2)

所以从技术上讲这是有效的：

```
<ul>
    <li>
        text
    <li>
        <span>stuff</span>
</ul> 
```

但是你每个只保存 5 个字符`li`，不值得你在可读性/可维护性方面失去什么。

编辑：HTML5 规范有点有趣：

> 如果 li 元素后面紧跟着另一个 li 元素，或者父元素中没有更多内容，则可以省略 li 元素的结束标记。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T20:11:26.347

浏览器通常可以原谅省略结束标签（它通常足够聪明，可以知道你在做什么）。但是，未关闭标签所具有的任何 css 或 js 标记属性都可能影响后代和/或兄弟标签，让您对发生的事情摸不着头脑。

虽然 XHTML 确实希望您为自包含标签添加一个正斜杠，但 HTML 5 却没有。

```
XHTML: <img src="" />
HTML5: <img src=""> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T20:14:13.897

如果您使用 xhtml DOCTYPE 编写，那么答案是“是”，它们是必需的。xhtml 文档需要是有效的 XML，这意味着所有标签都需要正确关闭。

HTML 文档不那么繁琐。有些标签被指定为“自动关闭”，这意味着您不需要专门关闭它们。其中包括`<br>`,`<img>`等。

浏览器通常非常宽松，因为它们需要能够处理写得不好的代码。但请注意，有时跳过结束标记会导致不同的浏览器以不同的方式解释您的代码，并产生难以调试的布局故障。

就页面加载速度而言，下载速度和带宽成本的边际收益可能是对的，但这将是边际收益。在渲染方面，我怀疑如果您提供无效的 HTML，您实际上会失去速度，因为浏览器必须更加努力地解析它。

因此，即使有速度增益，它也将是微不足道的，我不认为故意跳过结束标签是值得的练习。如果您正在运行一个流量很大的网站，那么减少带宽可能会有所帮助，但我们中很少有人为 Facebook 或 Google 写作；对于几乎所有其他人来说，编写有效的代码比尝试削减那几个字节要好。

如果您担心带宽和页面加载速度，可能还有其他更好的方法来减少页面加载大小。例如，使用 gZip 压缩文件将大大减少您的带宽，对您的代码或浏览器的影响为零。gZip 压缩可以在您的网络服务器中配置，因此您只需打开它就可以忘记它。您还可以通过去除不必要的空白来“缩小”您的 CSS 和 JS 代码。（HTML 也可以在一定程度上缩小，但要注意空格在 HTML 中与语法相关，因此缩小可能不是在所有情况下都适合做的事情）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T20:08:51.837

在 1999 年成为 W3C 推荐标准的 HTML 4.01 中，您是对的：

> 9.3.1 段落：P 元素
> 
> *开始标签：**必需**，结束标签：**可选***

[http://www.w3.org/TR/1999/REC-html401-19991224/struct/text.html#h-9.3.1](http://www.w3.org/TR/1999/REC-html401-19991224/struct/text.html#h-9.3.1)

至于`<li>`,

> *开始标签：**必需**，结束标签：**可选***

[http://www.w3.org/TR/1999/REC-html401-19991224/struct/lists.html#h-10.2](http://www.w3.org/TR/1999/REC-html401-19991224/struct/lists.html#h-10.2)

# xslt - 为什么 XSLT 更新 Web.Config 会部分失败？

> ID：10130796
> 
> 赞同：0
> 
> 时间：2012-04-12T19:54:52.220
> 
> 标签：xslt, web-config, umbraco

我有一个 XSLT 文件，用于写入我的 Web.Config 作为 Umbraco 构建过程的一部分。编写诸如“umbracoConfigurationStatus”值之类的东西可以正常工作，编写新的配置文件成员资格部分也是如此。

然而，试图更新或创建 UmbracoMembershipProvider 部分的部分让我感到各种悲伤。它不会更新或写入。我错过了什么？

这是 XSLT 文件的大部分内容：

```
 <xsl:template match="/configuration/appSettings/add[@key='umbracoConfigurationStatus']/@value">
    <xsl:attribute name="value">4.7.1.1</xsl:attribute>
  </xsl:template>

    <xsl:template match="/configuration/system.web">
        <xsl:copy>
            <xsl:call-template name="copy-children" />
            <xsl:element name="profile">
                <xsl:attribute name="defaultProvider">
                    <xsl:text>UmbracoMemberProfileProvider</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="enabled">
                    <xsl:text>true</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="inherits">
                    <xsl:text>umbraco.cms.businesslogic.member.MemberProfile</xsl:text>
                </xsl:attribute>
                <xsl:element name="providers">
                    <xsl:element name="clear" />
                    <xsl:element name="add">
                        <xsl:attribute name="name">
                            <xsl:text>UmbracoMemberProfileProvider</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="type">
                            <xsl:text>umbraco.providers.members.UmbracoProfileProvider, umbraco.providers</xsl:text>
                        </xsl:attribute>
                    </xsl:element>
                </xsl:element>
                <xsl:element name="properties">
                    <xsl:element name="clear" />
                    <xsl:element name="add">
                        <xsl:attribute name="name">
                            <xsl:text>auth_guid</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="allowAnonymous">
                            <xsl:text>false</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="provider">
                            <xsl:text>UmbracoMemberProfileProvider</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="type">
                            <xsl:text>System.String</xsl:text>
                        </xsl:attribute>
                    </xsl:element>
                    <xsl:element name="add">
                        <xsl:attribute name="name">
                            <xsl:text>firstName</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="allowAnonymous">
                            <xsl:text>false</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="provider">
                            <xsl:text>UmbracoMemberProfileProvider</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="type">
                            <xsl:text>System.String</xsl:text>
                        </xsl:attribute>
                    </xsl:element>
                    <xsl:element name="add">
                        <xsl:attribute name="name">
                            <xsl:text>lastName</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="allowAnonymous">
                            <xsl:text>false</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="provider">
                            <xsl:text>UmbracoMemberProfileProvider</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="type">
                            <xsl:text>System.String</xsl:text>
                        </xsl:attribute>
                    </xsl:element>
                </xsl:element>
            </xsl:element>
        </xsl:copy>
    </xsl:template>

    <xsl:template name="copy-children">
        <xsl:copy-of select="./*"/>
    </xsl:template>

    <xsl:template match="/configuration/system.web/membership/providers">
        <xsl:copy>
            <xsl:call-template name="copy-children" />
            <xsl:element name="add">
                <xsl:attribute name="name">
                    <xsl:text>UmbracoMembershipProvider</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="type">
                    <xsl:text>umbraco.providers.members.UmbracoMembershipProvider</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="enablePasswordRetrieval">
                    <xsl:text>false</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="enablePasswordReset">
                    <xsl:text>false</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="requiresQuestionAndAnswer">
                    <xsl:text>false</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="defaultMemberTypeAlias">
                    <xsl:text>SiteMember</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="umbracoApprovePropertyTypeAlias">
                    <xsl:text>isApproved</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="umbracoLockPropertyTypeAlias">
                    <xsl:text>isLocked</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="passwordFormat">
                    <xsl:text>Hashed</xsl:text>
                </xsl:attribute>
            </xsl:element>
        </xsl:copy>
    </xsl:template>

    <!-- Default templates to match anything else -->
  <xsl:template match="@*">
    <xsl:copy/>
  </xsl:template>

  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template> 
```

我想要达到的状态是：

```
<add name="UmbracoMembershipProvider" type="umbraco.providers.members.UmbracoMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" defaultMemberTypeAlias="SiteMember" umbracoApprovePropertyTypeAlias="isApproved" umbracoLockPropertyTypeAlias="isLocked" passwordFormat="Hashed" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:30:13.340

我认为这是因为您有一个模板来匹配**configuration/system.web**元素...

```
<xsl:template match="/configuration/system.web"> 
```

...但在此范围内，您不会告诉 XSLT 处理器继续将任何模板与后代匹配。这意味着**configuration/system.web/membership/providers**的模板将不匹配。

尽管您确实调用了命名模板**copy-children**，但这所做的只是一个**xsl:copy-of**，它将完全复制子节点，但不会匹配它们可能存在的任何模板。

**将copy-children**模板更改为以下内容，看看你是怎么做的。

```
<xsl:template name="copy-children">
   <xsl:apply-templates select="*"/>
</xsl:template> 
```

附带说明一下，如果您始终使用固定名称，则没有真正需要使用**xsl:element**和**xsl:attribute来创建元素和属性。**例如

```
<xsl:element name="add">
   <xsl:attribute name="name">
      <xsl:text>UmbracoMembershipProvider</xsl:text>
   </xsl:attribute>
<xsl:element> 
```

这可以简单地替换为以下内容，这可以减少 XSLT 的大小

```
<add name="UmbracoMembershipProvider" /> 
```

编辑：除了如上所述更改**复制子**模板外，您可能遇到的另一个问题是此匹配模板。

```
<xsl:template match="/configuration/system.web/membership">
   <xsl:attribute name="MyAttrTest">the test value</xsl:attribute>
</xsl:template> 
```

在这里，您匹配一个元素，但用一个属性替换它。如果您之前没有添加文本或子元素，这很好（如错误消息中所述）。我怀疑你应该这样做......

```
<xsl:template match="/configuration/system.web/membership">
   <xsl:copy>
      <xsl:attribute name="MyAttrTest">the test value</xsl:attribute>
   </xsl:copy>
</xsl:template> 
```

这将添加创建**成员资格**元素的副本并向其添加属性。

您应该仔细检查 XSLT 中可能发生这种情况的所有实例。

# java - 当消息很大时，JOptionPane.showConfirmDialog 会离开屏幕

> ID：10130803
> 
> 赞同：3
> 
> 时间：2012-04-12T19:55:11.640
> 
> 标签：java, joptionpane

```
JOptionPane.showConfirmDialog(this, 
                              message,
                              "title",
                              JOptionPane.YES_NO_OPTION,
                              JOptionPane.WARNING_MESSAGE); 
```

消息可以是 10 行，消息可以是 500 行。它动态变化。如果消息超过屏幕高度，我想实现一个滚动条。

所以我尝试了：

```
JTextArea textArea = new JTextArea (message);
JscrollPane scrollPane = new JScrollPane(textArea,JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
JOptionPane.showConfirmDialog(this,
                              scrollPane,
                              "title",
                              JOptionPane.YES_NO_OPTION,
                              JOptionPane.WARNING_MESSAGE); 
```

这将在 Windows 中打开一个对话框和一个滚动条，它工作正常，但在 mac os 中，对话框会出现在屏幕外。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:16:17.770

您可以`scrollPane`在显示对话框之前设置首选大小以限制其大小：

```
scrollPane.setPreferredSize(new Dimension(400, 200)); 
```

要使用的尺寸可以基于您可以像这样检索的屏幕尺寸：

```
Toolkit.getDefaultToolkit().getScreenSize() 
```

请注意，我没有在 Mac OS X 以外的其他平台上对此进行过测试。

# php - 检查图像文件类型

> ID：10130804
> 
> 赞同：2
> 
> 时间：2012-04-12T19:55:19.950
> 
> 标签：php, image, file-type

我正在尝试向我的网站添加一个功能，用户可以将他们的个人资料图片设置为来自外部 url 的图片，而不是将其保存到他们的电脑，然后将其上传到我的服务器。

到目前为止，这是我想出的：

```
 $filename = $inputs['image_url'];

            if(getimagesize($filename)){
                // Get new dimensions
                list($width, $height) = getimagesize($filename);
                $new_width = 100;
                $new_height = 100;

                // Resample
                $image_p = imagecreatetruecolor($new_width, $new_height);                                           

                //a check needs to be done here $image = imagecreatefromjpeg($filename);
                imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

                $filename = "profile_pictures/". md5( uniqid(rand(),true) ).".jpg";

                imagejpeg($image_p,$filename,100);
            }else{
                echo 'This is not an image';
            } 
```

该代码可以很好地下载 .jpg 图像，但我也想支持其他文件类型。

我需要以某种方式检查图像的文件类型，以便我可以保存具有不同文件类型的其他图像......

```
 if($extension=="jpg" || $extension=="jpeg"){
                    $image = imagecreatefromjpeg($filename);
                }else if($extension=="png"){
                    image = imagecreatefrompng($filename);
                }else{
                    $image = imagecreatefromgif($filename);
                } 
```

有谁知道可以让我这样做的功能？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:04:11.473

最直接的，对于 GD 兼容性检查，您可以从字符串创建它：

```
$image = imagecreatefromstring(file_get_contents($filename)); 
```

如果加载失败，您就知道您无法处理该图像。

但也请看[`getimagesize`](http://php.net/getimagesize)，它还会检查文件类型，而不仅仅是宽度和高度：

```
list($width, $height, $type) = getimagesize($filename); 
```

第三个元素`$type`是这些`IMAGETYPE_XXX`常量中的任何一个：

```
Value   Constant
1     IMAGETYPE_GIF
2     IMAGETYPE_JPEG
3     IMAGETYPE_PNG
4     IMAGETYPE_SWF
5     IMAGETYPE_PSD
6     IMAGETYPE_BMP
7     IMAGETYPE_TIFF_II (intel byte order)
8     IMAGETYPE_TIFF_MM (motorola byte order)
9     IMAGETYPE_JPC
10    IMAGETYPE_JP2
11    IMAGETYPE_JPX
12    IMAGETYPE_JB2
13    IMAGETYPE_SWC
14    IMAGETYPE_IFF
15    IMAGETYPE_WBMP
16    IMAGETYPE_XBM
17    IMAGETYPE_ICO 
```

从[`exif_imagetype`](http://nl3.php.net/manual/en/function.exif-imagetype.php). 如果将两者结合起来，您可以先检查类型是否可以为您加载，然后检查是否可以加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:59:52.510

[`Splfileinfo::getextension.php`](http://php.net/manual/en/splfileinfo.getextension.php)可能正是您所需要的。

编辑：我看错了，您只想检查字符串的扩展名。PHP 中没有内置函数，您可以简单地使用 regexp ：

```
$ext = substr(strrchr($fileName,'.'),1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:16:09.653

你可以试试这个

```
$fileExtention = pathinfo ( $filename, PATHINFO_EXTENSION ); 
```

或者

```
$fileExtention = image_type_to_extension(exif_imagetype($filename)); 
```

最后，我建议您使用 [http://phpthumb.sourceforge.net/ 之](http://phpthumb.sourceforge.net/)类的东西，这比您操作图像所需的要多

# ios - Dropbox文件上传使用户超过配额？

> ID：10130805
> 
> 赞同：1
> 
> 时间：2012-04-12T19:55:32.697
> 
> 标签：ios, dropbox-api

如果您尝试上传大小大于可用空间的文件，有谁知道是否会触发（507 == User over Quota ）`[restClient uploadFile:filename toPath:destDir withParentRev:nil fromPath:sourcePath];`？`- (void)restClient:(DBRestClient*)client uploadFileFailedWithError:(NSError*)error``error.code == 507`

# android - 如何从同一个终端同时打开一个 android 模拟器并安装一个 .apk？

> ID：10130806
> 
> 赞同：1
> 
> 时间：2012-04-12T19:55:37.380
> 
> 标签：android, command-line, apk, emulation

我有一个奇怪的问题：我想启动一个 android 模拟器，同时安装一个已经构建的 .apk。问题是我想从命令行完成所有这些，尤其是从一个终端。（实际上来自 Makefile ...）。

如果我启动模拟器，它永远不会停止，直到我关闭它，因此我无法执行任何其他命令。另一方面，我事先不知道模拟器的名称，尽管可能是 5554。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:58:49.140

为什么不在后台启动模拟器？在命令行中，这是通过在命令中附加一个 & 符号来完成的：

```
emulator -avd <whatever> &; 
```

然后通过 ADB 与它通信：

```
adb install MyApp.apk 
```

# facebook - 当我（facebook）喜欢我们网站上的视频时，它会变成一个页面

> ID：10130812
> 
> 赞同：0
> 
> 时间：2012-04-12T19:55:50.967
> 
> 标签：facebook, facebook-graph-api, facebook-like

正如主题所描述的，当我在 Facebook 上喜欢我们主页的视频项目或其他类型的页面时，它会变成一个完整的“Facebook 页面”而不是时间线帖子。

这是为什么？

我试图在 facebook-linter 上对它进行 lint，它说有错误。视频的类型是“video.other”。

例如： http: [//metopia.se/tube/NKQeT/lanterna-education-summer-courses](http://metopia.se/tube/NKQeT/lanterna-education-summer-courses) 当我喜欢那个页面时，它变成了这个页面： http: [//www.facebook.com/pages/Lanterna-Education-Summer -课程/334204833309981](http://www.facebook.com/pages/Lanterna-Education-Summer-Courses/334204833309981)

我是管理员。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:24:03.540

你没有做错任何事；这是预期的行为：

1.  网站所有者将 FB Like 按钮放在网站上。
2.  网站访问者点击说喜欢按钮。
3.  为网站访问者生成时间线故事。它出现在他的时间线和他朋友的新闻提要中。

我喜欢自己确认的页面。

如果您喜欢该页面并且还将自己指定为该页面的管理员（即，通过 fb:admins Open Graph 元标记表示的人），那么您所看到的就是预期的。从该页面的来源来看，我猜你是 Adam 还是 Mathias？

您应该阅读 Facebook 的 Open Graph 协议。简而言之，在网站上放置一个 Like 按钮将为该 Like 按钮的 href 属性引用的任何位置创建一个相应的 Open Graph 粉丝页面。

# matlab - 为什么 Matlab 给我一个未初始化的变量？

> ID：10130815
> 
> 赞同：1
> 
> 时间：2012-04-12T19:56:06.300
> 
> 标签：matlab, function, variables, indexing, arguments

在编译时，“epoch”被确定为一个变量并且这个变量是未初始化的。“epoch”也是一个函数名，以前版本的 MATLAB 会调用该函数。但是，MATLAB 7 禁止在相同的上下文中使用相同的名称作为函数和变量。

```
function slope1_4=s(x,m)
A=xlsread(x);
slope1_4=[];
%B=xlsread(y);
%nbligneA=size(A,1);
%nbcolonneA=size(A,2);
%nbligneB=size(B,1);
%nbcolonneB=size(B,2);
for j=m %nbcolonneA
    clear ini;
    clear fin;
    ini=epoch(:,A(1,j),1);
    fin=epoch(:,A(1,j),2);
    ini(ini==0)=[];
    fin(fin==0)=[];
    for i=1:size(ini,1)
        clear f;
        clear a;
        clear b;
        clear y;
        debut=ini(i);
        ending=fin(i);
        interval=ending-debut+1;
        a=A(debut+1:ending+1,j);
        for y=1:interval
            f(y)=a(y);
        end
        y=1:interval;
        b=polyfit(y,f,1);
        slope1_4=[slope1_4,b(1)];
    end
end 
```

问题可能来自 epoch(:,A(1,j),1) 中的“：”，但我不知道如何解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:10:59.580

您不能`:`作为参数传递给函数。[冒号](http://www.mathworks.com/help/techdoc/ref/colon.html)仅作为变量的索引有效，因此 MATLAB 假定它`epoch`应该是一个变量。但是，您无法从尚未初始化的变量中提取数据，因此会出现错误。

您的函数`epoch`需要一个索引（或索引范围）作为第一个参数。因此，您必须为其提供一个标量索引或您希望它返回的数据索引向量。如果你希望它返回*所有*数据（即*所有可能的*索引），但你不知道调用时数据有多大`epoch`，那么你可以传递一个冒号*字符串*作为参数，如下所示：

```
ini=epoch(':',A(1,j),1);
fin=epoch(':',A(1,j),2); 
```

# ruby-on-rails - 从 Rails ActiveRecord 查询中获取不同的元素

> ID：10130818
> 
> 赞同：0
> 
> 时间：2012-04-12T19:56:19.453
> 
> 标签：ruby-on-rails, activerecord

我在 Rails 中有这样的查询：

```
@addresses=People.select("first_name, state").where("first_name = 'Bob'") 
```

有没有办法可以遍历地址并提取不同的状态，以便我知道名为 bob 的人生活在哪些状态？

我试图避免：

```
@states = []
@address.each.do |add|
  if !@states.contains?(add.state)
    @states.push add 
```

这似乎是一种糟糕的形式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:10:51.083

```
@states = People.where(first_name: 'Bob').uniq.pluck(:state) 
```

# java - 使用 JNI 创建、填充和返回 Java 类实例

> ID：10130819
> 
> 赞同：13
> 
> 时间：2012-04-12T19:56:21.917
> 
> 标签：java, java-native-interface

我正在尝试使用 JNI 函数来创建 Java 类并使用 DeviceId.java 构造函数方法设置该类的一些属性。我可以使用 GetMethodID 获取构造函数方法，但是如何创建 Device.java 的新实例然后设置属性（setId 和 setCache）。目标是向调用者返回一个完全填充的 Device.java 对象实例。有任何想法吗？

**JNI 功能：**

```
 JNIEXPORT jobject JNICALL Java_com_test_getID(JNIEnv *env, jclass cls) 
    {
        jmethodID cnstrctr;
        jclass c = (*env)->FindClass(env, "com/test/DeviceId");
        if (c == 0) {
            printf("Find Class Failed.\n");
         }else{
            printf("Found class.\n");
         }

        cnstrctr = (*env)->GetMethodID(env, c, "<init>", "(Ljava/lang/String;[B)V");
        if (cnstrctr == 0) {
            printf("Find method Failed.\n");
        }else {
            printf("Found method.\n");
        }

        return (*env)->NewObject(env, c, cnstrctr);
    } 
```

**Java 类：**

```
package com.test;

public class DeviceId {
    private String id;
    private byte[] cache;

        public DeviceId(){}
    public DeviceId(String id, byte[] cache){
        this.id=id;
        this.cache=cache;
    }

    public byte[] getCache() {
        return cache;
    }

    public void setCache(byte[] cache) {
        this.cache = cache;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }   
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T20:05:54.407

当您调用 时`GetMethodID`，您为双参数构造函数提供了签名。因此，您只需要在调用时传递您的`jstring`和 a - 例如：`jbytearray``NewObject`

```
return (*env)->NewObject(env, c, cnstrctr, id, cache); 
```

除非您决定调用 0-arg 构造函数，否则您不需要调用`setId`and`setCache`方法——这只会使您的代码复杂化，因为您必须`GetMethodID`调用它们并调用它们。继续沿着你正在走的路线更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T08:20:28.867

我想将**JNI 的 cpp 代码中的****自定义**Java 对象返回给 Java。解决方案是从 cpp 函数返回一个并在本地方法声明中使用我们自定义的 Java 对象。**`jobject`**

 **```
public class PyError {

    public String message;

    public boolean occurred;

    public PyError(boolean occurred, String message){
        this.message = message;
        this.occurred = occurred;
    }
} 
```

和Java中的方法声明：

```
native PyError nativePythonErrorOccurred(); 
```

在 cpp 方面：

```
extern "C" JNIEXPORT jobject JNICALL
Java_com_your_package_nativePythonErrorOccurred(JNIEnv *env, jobject obj) {

    jclass javaLocalClass = env->FindClass("com/your/package/PyError");

    if (javaLocalClass == NULL) {
        LOGP("Find Class Failed.\n");
    } else {
        LOGP("Found class.\n");
    }

    jclass javaGlobalClass = reinterpret_cast<jclass>(env->NewGlobalRef(javaLocalClass));

    // info: last argument is Java method signature
    jmethodID javaConstructor = env->GetMethodID(javaGlobalClass, "<init>", "(ZLjava/lang/String;)V");

    if (javaConstructor == NULL) {
        LOGP("Find method Failed.\n");
    } else {
        LOGP("Found method.\n");
    }

    jobject pyErrorObject = env->NewObject(javaGlobalClass, javaConstructor, true, env->NewStringUTF("Sample error body"));
    return pyErrorObject;
} 
```

使用 确定方法的签名 `javap -s java.your.package.YourClass`。另外，看看[这里](http://www.rgagnon.com/javadetails/java-0286.html)。

如果您遇到类似以下的错误：`JNI ERROR (app bug): attempt to use stale Global 0xf2ac01ba`您的方法签名错误，您传递了错误的参数，`env->NewObject()`或者您没有使用 jni 对象的全局状态 - 更多信息请[点击此处](https://android-developers.googleblog.com/2011/11/jni-local-reference-changes-in-ics.html)。**

# javascript - 在javascript中对UTC日期进行排序

> ID：10130822
> 
> 赞同：1
> 
> 时间：2012-04-12T19:56:26.693
> 
> 标签：javascript, mvvm, knockout.js, date-sorting

编辑 2012 年 4 月 16 日：我解决了将时区缩写为字母格式的问题，必须下载第三方排序方法并添加一些东西才能获得所需的结果。现在唯一的问题是夏令时处理程序，但有很多主题。但是，如果有人知道如何处理 UTC 夏令时处理程序，请随时提供帮助。

谢谢大家。///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// / 我已经制作了一个 html 表，我已经使用 knockoutjs 与一个 javscript 视图模型绑定，该表使用 JSON 函数从私有服务器中提取信息。我正在尝试使每列可排序（单击一次列标题以根据该列的信息按降序排列所有内容；再次单击标题以使所有内容按升序排列，第三次按原始顺序排列所有内容）。

请注意：我已经搜索了我的问题并看到了其他解决方案，但到目前为止对我没有任何帮助。我希望找到特定于我的代码的解决方案。

Javascript ViewModel.js 文件基本上是这样的：

```
Event(column1, column2, ...., columnN){
    var self = this;
    self.column1 = column1;
    self.column2 = column2;
    .
    .
}

//Sort column2 that has the Dates (dd (day) HHMM (hours/minutes) mmm (month) yy (year) format)

self.sortColumn = "Column2"
self.sortAscending = true;

self.SortByDates = function(){
    if(self.sortColumn == "Column2")
        self.sortAscending = !self.sortAscending;
    else{
        self.sortColumn = "Column2"
        self.sortAscending = true;
    }
    self.rows.sort(function(a,b){
        if(self.sortAscending == true)
            for(self.Column2 in self.rows)
                return a.Column2 > b.Column2 ? 1 : a.Column2 < b.Column2 ? -1 : 0;
            else
                return a.Column2 < b.Column2 ? 1 : a.Column2 > b.Column2 ? -1 : 0;
    });
}

//specify location of server and info and get them
function getEvents(){
    $.getJSON("http://.........",
        function (data){
            $.each(data.d, function(i, item){
                handleEvent(item)
            })
        }
    );
}
//pushes (AKA populates) info from server into the table
function handleEvent(item){
    var newEvent = new Event(item.Column1InfoFromServer,
                                formatJSONDate(item.Column2DateInfoFromServer), .....)
    this.Model.rows.push(newEvent);
}
//Formats the date info from server into dd (day) HHMM (hours/minutes) mmm (month) yy (year)
formatJSONDate(jsonDate){
    var date = new Date(parseInt(jsonDate.substr(6)));
    return date.format("dd HHMM mmm yy");
}

this.Model = new ViewModel();
this.getEvents();
ko.applyBindings(this.Model); 
```

我很难以转换后的形式获取日期（是的，它必须是那种形式-> 实际上，我仍然需要弄清楚如何在“HHMM”之后包含时区缩写' 部分基于 UTC）。因此，假设我在表中的其他日期中有“11 1136 Apr 12”和“22 1624 Jan 12”。现在，当我尝试根据日期对表格进行排序时，它们的排序不正确。任何帮助表示赞赏，谢谢。

编辑：要清楚，我正在尝试以军事时区代码（时区'A'-'Z'）显示时区。此外，从服务器获取的日期已经是 UTC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:38:58.833

**更新**：

我在看另一个问题，有人创建了一个淘汰赛网格插件： [https ://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)

我敢打赌这可能会帮助你:-)

*---怀旧的老答案---*

Underscore 库中有一些很棒的辅助函数，其中之一是 sort：

[http://documentcloud.github.com/underscore/#sortBy](http://documentcloud.github.com/underscore/#sortBy)

> sortBy_.sortBy(list, iterator, [context]) 返回列表的排序副本，按通过迭代器运行每个值的结果升序排列。迭代器也可以是要排序的属性的字符串名称（例如长度）。

```
_.sortBy([1, 2, 3, 4, 5, 6], function(num){ return Math.sin(num); });
=> [5, 4, 6, 3, 1, 2] 
```

我会试一试，同时为你的约会创建一个更好的模型。听起来您需要存储一个唯一时间点的属性以及用户的文本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:07:20.793

好吧，要获取日期对象的数值，请按 pDate.valueOf() 排序。这将为您提供自纪元以来的毫秒数。

但是，您的排序功能内部存在问题，但我不确定它应该做什么。您不能在排序函数中遍历对象并返回类似的值。

# linux - 如何在 Linux 上通过程序集在屏幕上显示图片？

> ID：10130833
> 
> 赞同：4
> 
> 时间：2012-04-12T19:57:17.197
> 
> 标签：linux, assembly, drawing

我想用 Linux 程序集制作一个游戏。有没有办法通过 Linux 内核系统调用在屏幕上显示（或绘制）图片？

我搜索了它，但我得到的所有结果都是关于 DOS 汇编语言的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:40:45.623

这是可能的，但如今在汇编中开发软件似乎是一种非常乏味和缓慢的方法。

假设您在 i386 平台上运行（每个平台的系统调用 ABI 不同），请查看 uClibcs​​ libc/sysdeps/linux/i386/syscall.S：

```
.text
.global syscall
.type   syscall,%function
syscall:
    pushl %ebp
    pushl %edi
    pushl %esi
    pushl %ebx

    movl  44(%esp),%ebp /* Load the 6 syscall argument registers */
    movl  40(%esp),%edi
    movl  36(%esp),%esi
    movl  32(%esp),%edx
    movl  28(%esp),%ecx
    movl  24(%esp),%ebx
    movl  20(%esp),%eax /* Load syscall number into %eax.  */
    int $0x80

    popl %ebx
    popl %esi
    popl %edi
    popl %ebp

    cmpl $-4095,%eax
    jae  __syscall_error
    ret         /* Return to caller.  */

.size syscall,.-syscall 
```

这假设所有系统调用参数以及系统调用号都已加载到堆栈上。

您可以在 Linux 内核的 include/asm-generic/unistd.h 文件中找到系统调用编号。

既然您知道如何从程序集中调用系统调用，那么您当然还需要知道要调用哪些系统调用。我建议阅读[Linux Framebuffer](http://en.wikipedia.org/wiki/Linux_framebuffer)。与 X 的交互将变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:22:59.233

如果只想使用内核函数，则必须使用 vesa framebuffer: [Using the framebuffer device under Linux](http://asm.sourceforge.net/articles/fb.html)。玩得开心 =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:58:40.020

当我还是个孩子的时候，我曾经作为一个业余爱好者在汇编程序中写东西。现在我认为它太慢且不便携——您肯定希望您的游戏也可以在基于[ARM](http://en.wikipedia.org/wiki/ARM_architecture)的手机上运行吗？但是汇编并没有真正给你这个，除非你在为 x86 或者 x86-64 编写程序之后完全重写程序。

如果你真的想做汇编程序，你可能会发现你最大的障碍是弄清楚如何调用所需的各种 C-API 函数，因为 Linux 上几乎所有东西都在一个或另一个层次上使用 C API。处理这个问题的最好方法可能是编写一个小型 C 程序来满足您的需要，然后编译它：

```
gcc -S t.c 
```

这应该在名为`t.s`.

# coffeescript - 为什么小数迭代步编译成与整数步不同的 JavaScript

> ID：10130836
> 
> 赞同：1
> 
> 时间：2012-04-12T19:57:35.363
> 
> 标签：coffeescript

我想知道 CoffeeScript 中的范围理解编译成的 JavaScript 略有不同。生成的 JavaScript 有什么不同之处吗？

按整数步迭代范围

```
numbers = (i for i in [start..end] by 2) 
```

编译成：

```
for (i = start; i <= end; i += 2) {
  _results.push(i);
} 
```

但是当通过小数步迭代时

```
numbers = (i for i in [start..end] by 1/2) 
```

生成更复杂的 JavaScript：

```
for (i = start, _ref = 1 / 2; start <= end ? i <= end : i >= end; i += _ref) {
  _results.push(i);
} 
```

那么为什么会有这个附加`start <= end`条件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:01:04.353

Coffeescript 并不完全知道表达式 1/2 的计算结果。它可能是 Math.random() - .5，它取决于脚本的特定运行。

因此，Coffeescript 不可能知道 step 是负数还是正数，所以它只是根据 start 和 end 的相对位置而不是常量 step 的符号来键入条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:53:41.043

如果你只是这样做，你会得到同样复杂的代码`numbers = (i for i in [start..end])`。这是因为当开始或结束是变量时，CoffeeScript 不知道范围的方向。编译器有一个特殊的优化，如果提供了一个常量步骤，它将输出更简单的代码，但不幸的是 1/2 被视为表达式而不是常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:49:03.057

这是常数与表达式，而不是整数与分数。当 step 是一个常量（例如`2`）时，CoffeeScript 在编译时知道是否`step`为正，并为此输出正确的代码。当 step 为表达式（如`1/2`）时，需要在运行时判断是否为正。

不幸的是，CoffeeScript 似乎将小数识别为表达式，而不管它们是如何编写的（`0.5`或`1/2`），所以没有简单的方法可以避免这个问题。

# c# - 连接到数字秤（Metler Toledo PS90）作为 HID 仅当电缆首次连接到计算机时才会运行 OnReport

> ID：10130837
> 
> 赞同：2
> 
> 时间：2012-04-12T19:57:36.580
> 
> 标签：c#, .net, usb, device, hid

我正在使用[Mike O Brien 的 HID 库](https://github.com/mikeobrien/HidLibrary)连接到数字秤，设备成功打开，然后完美显示设备附加和删除的消息。但最初只运行 OnReport 大约 20 次在 OnReport 上运行 Inital 大约 20 次
之后，它永远不会再次运行，除非我移除 USB 电缆并重新连接。

我的代码如下

```
if (scale.IsConnected)
      {
          scale.Inserted += DeviceAttachedHandler;
          scale.Removed += DeviceRemovedHandler;
          scale.MonitorDeviceEvents = true;
          scale.ReadReport(OnReport);
MessageBox.Show("Hold Application Here"); 
```

秤的事件处理程序

```
private void DeviceAttachedHandler()
    {
        MessageBox.Show("Device attached.");
        scale.ReadReport(OnReport);
    }

    private static void DeviceRemovedHandler()
    {
        MessageBox.Show("Device removed.");
    }
    private void OnReport(HidReport report)
    {
        if (!scale.IsConnected) { return; }

        //var cardData = new Data(report.Data);
        decimal weight = Convert.ToDecimal(report.Data[4]);// (Convert.ToDecimal(report.Data[4]) +

        MessageBox.Show(weight.ToString());
//Convert.ToDecimal(report.Data[5]) * 256) / 100;
            //Console.WriteLine(!cardData.Error ? Encoding.ASCII.GetString(cardData.CardData) : cardData.ErrorMessage);
            //Console.WriteLine(report.Data);
        scale.ReadReport(OnReport);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:21:46.080

我设法让规模工作，在我的回调中，当规模返回我正在做的数据时运行，`Read`这是一个阻塞调用。因此造成了死锁，应该只使用`ReadReport`或`Read`查看 Mike 在下面发布的 [示例](https://github.com/mikeobrien/HidLibrary/issues/17)。

```
using System;
using System.Linq;
using System.Text;
using HidLibrary;

namespace MagtekCardReader
{
    class Program
    {
        private const int VendorId = 0x0801;
        private const int ProductId = 0x0002;

        private static HidDevice _device;

        static void Main()
        {
            _device = HidDevices.Enumerate(VendorId, ProductId).FirstOrDefault();

            if (_device != null)
            {
                _device.OpenDevice();

                _device.Inserted += DeviceAttachedHandler;
                _device.Removed += DeviceRemovedHandler;

                _device.MonitorDeviceEvents = true;

                _device.ReadReport(OnReport);

                Console.WriteLine("Reader found, press any key to exit.");
                Console.ReadKey();

                _device.CloseDevice();
            }
            else
            {
                Console.WriteLine("Could not find reader.");
                Console.ReadKey();
            }
        }

        private static void OnReport(HidReport report)
        {
            if (!_device.IsConnected) { return; }

            var cardData = new Data(report.Data);

            Console.WriteLine(!cardData.Error ? Encoding.ASCII.GetString(cardData.CardData) : cardData.ErrorMessage);

            _device.ReadReport(OnReport);
        }

        private static void DeviceAttachedHandler()
        {
            Console.WriteLine("Device attached.");
            _device.ReadReport(OnReport);
        }

        private static void DeviceRemovedHandler()
        {
            Console.WriteLine("Device removed.");
        }
    }
} 
```

# html - 简单的表不会变大

> ID：10130842
> 
> 赞同：0
> 
> 时间：2012-04-12T19:57:47.243
> 
> 标签：html, css, joomla, alignment

请注意边栏顶部的彩色表格，上面写着 LIFESTYLE。

文本不会垂直对齐到中间，并且该表格不会变得更短。

它基本上是 Joomla 中带有 Gantry 和 K2 的自定义 html 模块，我将一些 PHP 放入（使用 Sourcerer），因此它根据一组颜色选择它的表 bg 颜色。简单吧？

必须有一些边距，填充，某处的东西，我找不到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:07:15.423

~~老实说，我不知道为什么会这样，但这似乎解决了这个问题......~~

~~替换以下内容：~~

```
<div class="titlebars">
    <font color="#FFFFFF">LIFESTYLE</font>
</div> 
```

~~和：~~

```
<span class="titlebars">
    <font color="#FFFFFF">LIFESTYLE</font>
</span> 
```

* * *

**编辑**

问题是`<br>`后面的标签`<div>`：

```
<td style="vertical-align: middle; width: 100%; line-height: normal; margin: 0px 0px 0px; padding: 0px; cellpadding=0 cellspacing=0"> 
    <div class="titlebars">
        <font color="#FFFFFF">LIFESTYLE</font>
    </div> 
<br> <----- THIS IS THE PROBLEM
</td> 
```

删除它，单元格将按照您的意愿运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:31:22.157

只需将您的`.titlebars`div 声明为`display:inline-block`，添加一些填充以稍微填充该标题，您就应该准备就绪：

**CSS**

```
.titlebars {
    display: inline-block;
    font-size: 30px;
    font-weight: 800;
    margin: 0;
    padding: 5px 0;
} 
```

还有，`<font>`标签？我相信它们已被弃用，因此您可以改用`p`标签并为其设置样式。

# java - 用于高并发情况的 Java 有界非阻塞缓冲区

> ID：10130847
> 
> 赞同：8
> 
> 时间：2012-04-12T19:57:57.053
> 
> 标签：java, collections, concurrency, buffer, guava

基本上我需要一个数据结构来存储服务器端的临时聊天消息。它应该是：

*   bounded：因为我不需要存储太多消息，所以客户端每秒都会发送请求以获取新消息。我认为绑定大小应该是最大值。在一秒钟内安装并发请求。当缓冲区已满时，旧消息将被删除。

*   适合高并发访问：我不想用Collections.synchronizedXXXX这样的数据结构，因为在迭代过程中，如果其他线程改变了数据结构，比如增加了一条消息，就会抛出异常，所以我要加锁整个数据结构，实际上我并不关心客户端请求是否可以获得最后插入的消息，因为他们会在一秒钟后发送一个新请求，另一方面写操作应该永远不会延迟。包 java.util.concurrency 下的类似乎是解决方案，但是......

*   non-blocking: LinkedBlockingQueue, ArrayBlockingQueue 它们可以有界并且在迭代过程中不会抛出异常，但它们都是阻塞队列。当队列已满时，我想将新元素添加到尾部并从头部删除旧元素，而不是在那里阻塞并等待有人删除头部。

所以我的问题是第三个库有什么好的实现吗？例如谷歌番石榴？或者，也许您对在服务器上存储临时聊天消息有更好的想法？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-24T14:58:50.357

您可以将[LinkedBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html)与非阻塞方法`offer`（或`add`）一起使用并`poll`访问它。您可以使用固定容量创建它以使其有界。

```
LinkedBlockingQueue<String> myStrings = new LinkedBlockingQueue<String>(100);
myStrings.offer("Hi!"); // returns false if limit is reached
myStrings.add("Hi, again!"); // throws exception if limit is reached
String s = myStrings.poll(); // returns null if queue is empty 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T11:21:04.087

您可以利用 Apache Commons [CircularFifoBuffer](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)。它符合您的第一个和最后一个标准。为了支持并发，您可以将基本缓冲区包装在它的同步版本中，如下所示：

```
Buffer fifo = BufferUtils.synchronizedBuffer(new CircularFifoBuffer()); 
```

祝项目好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T20:22:35.857

你看过[ConcurrentLinkedQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)吗？页面说

> 这个实现采用了一种高效的“无等待”算法......

无等待是您可以获得的最强有力的保证之一......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-11T21:24:59.603

`ArrayBlockingQueue`您可以通过使用条件语句将非阻塞行为添加到 an`offer()`中，其中队列无法接受报价会导致头部被丢弃并重新发出报价：

```
 public class LearnToQueue {

    public static void main(String[] args){
        Queue<Integer> FIFO = new ArrayBlockingQueue<Integer>(4);

        int i = 0;

        while ( i < 10 ){

            if (!FIFO.offer(i)){
            // You can pipe the head of the queue anywhere you want to
                FIFO.remove();
                FIFO.offer(i);
            }
            System.out.println(FIFO.toString());
            i++;

        }
    }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T01:34:40.097

[LinkedTransferQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html)是一个阻塞的无界队列，不强制执行严格的 FIFO 排序。它只会在从空队列中取出时阻塞，但从不会添加到一个队列中。您可以通过添加大小或读写计数器来添加软上限以逐出元素。

根据您的要求，您可以编写自定义的无锁环形缓冲区。

# javascript - 链接到 iframe 和图像的 Fancybox 哈希标签

> ID：10130851
> 
> 赞同：1
> 
> 时间：2012-04-12T19:58:06.033
> 
> 标签：javascript, jquery, fancybox

我正在使用 Fancybox，并且一直在寻找将哈希链接添加到 URL 的方法。这里提出了一个非常相似的问题：http: [//bit.ly/IMIh6D](http://bit.ly/IMIh6D)，这是一个很好的解决方法，尽管我只让它适用于内联内容。我不知何故需要能够将唯一的 URL 链接到 iframe 内容（youtube 视频）和在 fancybox 灯箱中弹出的图像。任何建议都会很棒！

干杯!

# algorithm - 同步两个有序列表

> ID：10130856
> 
> 赞同：8
> 
> 时间：2012-04-12T19:58:15.300
> 
> 标签：algorithm, data-structures, synchronization, linked-list, html-lists

我们有两个通常无法相互通信的离线系统。两个系统都维护相同的有序项目列表。他们很少能够相互通信以同步列表。

项目标有修改时间戳以检测编辑。项目由 UUID 标识，以避免在插入新项目时发生冲突（与使用自动递增整数相反）。同步时检测到新的 UUID 并将其复制到其他系统。对于删除也是如此。

上面的数据结构对于无序列表来说很好，但是我们如何处理排序呢？如果我们添加一个整数“等级”，则在插入新项目时需要重新编号（因此需要同步所有后续项目，因为只有 1 次插入）。或者，我们可以使用分数等级（使用前任和后继项目的平均等级），但这似乎不是一个可靠的解决方案，因为当插入许多新项目时它会很快遇到准确性问题。

我们还考虑将其实现为双向链表，每个项目都包含其前身和后继项目的 UUID。但是，这仍然需要在插入 1 个新项目时同步 3 个项目（或在删除 1 个项目时同步剩余的 2 个项目）。

优选地，我们希望使用只需要同步新插入的项目的数据结构或算法。这样的数据结构存在吗？

编辑：我们也需要能够处理将现有项目移动到不同位置的问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-06T01:40:16.377

插值排名方法确实没有问题。只需根据表示 0 到 1 之间的二进制分数且没有尾随零的可变长度位向量定义您自己的编号系统。二进制点在第一个数字的左边。

该系统的唯一不便之处在于，由空位向量给出的最小可能密钥为 0。因此，只有在您确定相关项目将永远是第一个列表元素时才使用它。通常，只需给第一项密钥 1。这相当于 1/2，因此在 (0..1) 范围内的随机插入将倾向于最大限度地减少位使用。要在之前和之后插入一个项目，

```
01 < newly interpolated = 1/4
1
11 < newly interpolated = 3/4 
```

再次插值：

```
001 < newly interpolated = 1/8
01
011 < newly interpolated = 3/8
1
101 < newly interpolated = 5/8
11 
111  < newly interpolated = 7/8 
```

请注意，如果您愿意，可以省略存储最后的 1！所有键（通常不使用的 0 除外）都以 1 结尾，因此存储它是多余的。

二进制分数的比较很像词法比较：0<1，从左到右扫描中的第一位差异告诉你哪个更少。如果没有差异发生，即一个向量是另一个向量的严格前缀，则较短的向量更小。

有了这些规则，很容易想出一个算法，它接受两个位向量并计算出一个大致（或在某些情况下精确地）它们之间的结果。只需添加位串，然后右移 1，删除不必要的尾随位，即取两者的平均值来分割范围。

在上面的例子中，如果删除给我们留下了：

```
01
111 
```

我们需要对这些进行插值，添加`01(0)`和并`111`获得`1.001`，然后转移到获得`1001`。这可以很好地用作插值。但请注意，最终`1`不必要地使它比任何一个操作数都长。一个简单的优化是将最后`1`一位与尾随零一起删除以获得简单`1`的 . 果然，`1`大约是我们希望的一半。

当然，如果您在同一位置进行多次插入（例如考虑在列表开头的连续插入），位向量会变长。这与在二叉树的同一点插入完全相同的现象。它长得又长又细。要解决此问题，您必须在同步期间通过使用最短的位向量重新编号来“重新平衡”，例如，对于 14，您将使用上面的序列。

**添加**

虽然我还没有尝试过，但 Postgres[位字符串类型](http://www.postgresql.org/docs/9.3/interactive/datatype-bit.html)似乎足以满足我所描述的键。我需要验证的是整理顺序是否正确。

此外，同样的推理适用于任何`k>=2`. 第一项得到 key `k/2`。还有一个简单的优化可以防止在末尾和前面分别附加和前置元素的非常常见的情况导致长度为 O(n) 的键。对于这些情况，它保持 O(log n) （尽管在内部插入同一位置仍然可以在 p 次插入后产生 O(p) 键）。我会让你解决这个问题。使用 k=256，您可以使用不定长度的字节字符串。在 SQL 中，我相信你会想要`varbinary(max)`. SQL 提供正确的字典排序顺序。如果你有一个插值操作的实现很容易`BigInteger`包类似于 Java 的。如果您喜欢人类可读的数据，您可以将字节字符串转换为例如十六进制字符串 (0-9a-f) 并存储它们。那么正常的 UTF8 字符串排序顺序是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T20:08:34.120

您可以为每个项目添加两个字段 - “创建时间戳”和“插入之后”（包含插入新项目的项目的 ID）。同步列表后，发送所有新项目。该信息足以让您能够在另一侧构建列表。

收到新添加的项目列表后，执行以下操作（在接收端）：按创建时间戳排序，然后逐个进行，并使用“插入后”字段将新项目添加到适当的位置。

如果添加项目 A，然后在 A 之后添加 B，然后删除 A，您可能会遇到麻烦。如果发生这种情况，您还需要同步 A（基本上同步自上次同步以来在列表上发生的操作，而不仅仅是当前列表的内容）。它基本上是一种日志运输形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T10:29:19.340

我认为，从广义上讲，[运营转型](http://en.wikipedia.org/wiki/Operational_transformation)可能与您在此处描述的问题有关。例如，考虑实时协作文本编辑的问题。

我们基本上有一个排序的项目（单词）列表，需要保持同步，并且可以在列表中随机添加/修改/删除。我看到的唯一主要区别是修改列表的周期性。（你说它不经常发生）

运营转型确实是一个很好的研究领域。我可以找到[这篇博客文章](http://fitzgeraldnick.com/weblog/41/)提供指导和介绍。此外，对于 Google Wave 遇到的所有问题，他们实际上在 Operational Transform 领域取得了重大进展。看看[这个。](http://www.codecommit.com/blog/java/understanding-and-applying-operational-transformation?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A%20codecommit%20%28Code%20Commit%29). 关于这个主题有相当多的文献。看看这个[stackoverflow线程](https://stackoverflow.com/questions/2043165/operational-transformation-library)，以及关于[差分同步](https://neil.fraser.name/writing/sync/)

另一个让我印象深刻的相似之处是 Text Editors - [Ropes](http://en.wikipedia.org/wiki/Rope_(data_structure))中使用的数据结构。因此，如果您有操作日志，比如“索引 5 已删除”、“索引 6 已修改为 ABC”、“索引 8 已插入”，您现在可能需要做的是从系统 A 传输更改日志到系统 B，然后在另一侧按顺序重构操作。

另一个“务实的工程师”的选择是在系统 A 发生变化时简单地重建系统 B 上的整个列表。根据更改的实际频率和大小，这可能不像听起来那么糟糕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-02T23:30:25.330

我认为您可以在这里尝试一种交易方法。例如，您不会实际删除项目，而是将它们标记为删除，并且仅在同步期间提交更改。我不确定您应该选择哪种数据类型，这取决于您希望哪些操作更有效率（插入、删除、搜索或迭代）。

**让我们在两个系统上都有以下初始状态：**

```
|1|   |2|
---   ---
|A|   |A|
|B|   |B|
|C|   |C|
|D|   |D| 
```

**之后，第一个系统将元素标记`A`为删除，第二个系统在和`BC`之间插入元素：`B``C`**

```
|1         |   |2           |
------------   --------------
|A         |   |A           |
|B[deleted]|   |B           |
|C         |   |BC[inserted]|
|D         |   |C           |
               |D           | 
```

两个系统都在考虑本地更改的情况下继续处理，系统 1 忽略元素`B`，系统 2 将元素`BC`视为正常元素。

**当同步发生时：**

*据我了解，每个系统都会从其他系统接收列表快照，并且两个系统都会冻结处理，直到同步完成。*

因此，每个系统依次迭代接收到的快照和本地列表，并将更改写入本地列表（根据修改后的时间戳解决可能的冲突），在“事务提交”之后，最终应用所有本地更改并删除有关它们的信息。例如系统一：

```
|1 pre-sync|             |2-SNAPSHOT  |   |1 result|
------------             --------------   ----------
|A         | <the same>  |A           |   |A       |
|B[deleted]| <delete B>  |B           |
             <insert BC> |BC[inserted]|   |BC      |
|C         | <same>      |C           |   |C       |
|D         | <same>      |D           |   |D       | 
```

系统唤醒并继续处理。

项目按插入顺序排序，移动可以实现同时删除和插入。此外，我认为可以不传输整个列表快照，而仅传输实际修改的项目列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-30T06:38:22.013

我认为这里合适的数据结构是[order statistic tree](http://en.wikipedia.org/wiki/Order_statistic_tree)。为了统计树，您还需要维护子树的大小以及其他数据，大小字段有助于根据需要轻松按**等级**查找元素。排名、删除、更改位置、插入等所有操作都是`O(logn)`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T04:38:17.373

你可以看看“镜头”，这是双向编程的概念。例如，您的问题似乎已经解决了我在[本文](http://repository.upenn.edu/cis_reports/915/)中描述的“匹配镜头” 。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-04T15:35:54.897

`PrecedingItemID`我已经通过在每个项目上包含一个（如果项目是有序列表的顶部/根），然后有一种本地缓存来保持所有项目的列表按排序顺序暂时解决了一个类似的问题（这纯粹是为了提高效率——因此您不必递归查询或构建基于`PrecedingItemID`s 每次在本地客户端上重新排序时）。然后，当需要同步时，我会执行稍微昂贵的操作，即查找两个项目请求相同 PrecedingItemID 的情况。在这些情况下，我只是按创建时间排序（或者您想调和哪个获胜并先出现），将第二个（或其他）放在它后面，然后继续对列表进行排序。然后我将这个新的排序存储在本地排序缓存中，并继续使用它直到下一次同步（只要确保随时保持`PrecedingItemID`更新）。

我还没有对这种方法进行单元测试——所以我不能 100% 确定我没有错过一些有问题的冲突场景——但它至少在概念上似乎可以满足我的需求，这听起来与 OP 的需求相似。

# php - 用 PHP 获取 img src

> ID：10130858
> 
> 赞同：55
> 
> 时间：2012-04-12T19:58:23.833
> 
> 标签：php, html, image, variables, src

在此示例中，我想将 SRC 属性放入一个变量中：

```
<img border="0" src="/images/image.jpg" alt="Image" width="100" height="100" /> 
```

例如 - 我想得到一个变量`$foo = "/images/image.jpg"`。重要的！src 属性是**动态**的，所以不能硬编码。有没有快速简便的方法来做到这一点？

谢谢！

编辑：图像将成为一个大字符串的一部分，该字符串基本上是新闻故事的内容。所以图像只是其中的一部分。

EDIT2：这个字符串中会有更多图像，我只想获取第一个的 src。这可能吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-12T20:16:56.097

使用 HTML 解析器`DOMDocument`，然后评估您要查找的值`DOMXpath`：

```
$html = '<img id="12" border="0" src="/images/image.jpg"
         alt="Image" width="100" height="100" />';

$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$src = $xpath->evaluate("string(//img/@src)"); # "/images/image.jpg" 
```

或者对于那些真正需要节省空间的人：

```
$xpath = new DOMXPath(@DOMDocument::loadHTML($html));
$src = $xpath->evaluate("string(//img/@src)"); 
```

对于那里的单线：

```
$src = (string) reset(simplexml_import_dom(DOMDocument::loadHTML($html))->xpath("//img/@src")); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-12T20:09:15.237

您最好使用 DOM 解析器来进行这种 HTML 解析。考虑这段代码：

```
$html = '<img id="12" border="0" src="/images/image.jpg"
         alt="Image" width="100" height="100" />';
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$nodelist = $xpath->query("//img"); // find your image
$node = $nodelist->item(0); // gets the 1st image
$value = $node->attributes->getNamedItem('src')->nodeValue;
echo "src=$value\n"; // prints src of image 
```

**输出：**

```
src=/images/image.jpg 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-28T20:43:12.257

我以更简单的方式做到了这一点，虽然没有应有的干净，但它是一个快速破解

```
$htmlContent = file_get_contents('pageURL');

// read all image tags into an array
preg_match_all('/<img[^>]+>/i',$htmlContent, $imgTags); 

for ($i = 0; $i < count($imgTags[0]); $i++) {
  // get the source string
  preg_match('/src="([^"]+)/i',$imgTags[0][$i], $imgage);

  // remove opening 'src=' tag, can`t get the regex right
  $origImageSrc[] = str_ireplace( 'src="', '',  $imgage[0]);
}
// will output all your img src's within the html string
print_r($origImageSrc); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-12T20:00:58.203

我知道人们说你不应该使用正则表达式来解析 HTML，但在这种情况下我觉得它非常好。

```
$string = '<img border="0" src="/images/image.jpg" alt="Image" width="100" height="100" />';
preg_match('/<img(.*)src(.*)=(.*)"(.*)"/U', $string, $result);
$foo = array_pop($result); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-03T10:14:07.240

```
$imgTag = <<< LOB
<img border="0" src="/images/image.jpg" alt="Image" width="100" height="100" />
<img border="0" src="/images/not_match_image.jpg" alt="Image" width="100" height="100" />
LOB;

preg_match('%<img.*?src=["\'](.*?)["\'].*?/>%i', $imgTag, $matches);
$imgSrc = $matches[1]; 
```

`[DEMO](http://ideone.com/XgPbPf)`

* * *

**注意：**您应该使用 HTML 解析器，`DOMDocument`而**不是**正则表达式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-12T20:43:40.667

```
$str = '<img border="0" src=\'/images/image.jpg\' alt="Image" width="100" height="100"/>';

preg_match('/(src=["\'](.*?)["\'])/', $str, $match);  //find src="X" or src='X'
$split = preg_split('/["\']/', $match[0]); // split by quotes

$src = $split[1]; // X between quotes

echo $src; 
```

其他正则表达式可用于确定拉取的 src 标签是否是这样的图片：

```
if(preg_match('/([jpg]{3}$)|([gif]{3}$)|([jpeg]{3}$)|([bmp]{3}$)|([png]{3}$)/', $src) == 1) {
//its an image
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-12T20:09:38.547

可能有两个简单的解决方案：

1.  HTML 它本身就是一个 xml，所以如果你将标签加载为 XML 并完全动态地获取它的属性，甚至是 dom 数据属性（如数据时间或任何东西），你可以使用任何 XML 解析方法......
2.  对 php 使用任何 html 解析器，例如 [http://mbe.ro/2009/06/21/php-html-to-array-working-one/](http://mbe.ro/2009/06/21/php-html-to-array-working-one/) 或 php parse html to array [Google this](https://www.google.co.in/#hl=en&sclient=psy-ab&q=php+parse+html+to+array&oq=php+parse+ht&aq=1&aqi=g4&aql=&gs_l=hp.3.1.0l4.0l0l1l182l0l0l0l0l0l0l0l0ll0l0.frgbld.&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=917db3fff837333b&biw=1360&bih=665)

# ssis - 分支和合并 SSIS/SSAS 项目

> ID：10130863
> 
> 赞同：4
> 
> 时间：2012-04-12T19:58:44.477
> 
> 标签：ssis, ssas

我有一个由一系列数据库、SSIS 包和一个 SSAS 数据库组成的数据仓库解决方案。SSIS 包和 SSAS 数据库都位于使用 Team Foundation Server 的源代码控制中。

我想做的是对 SSAS 和 SSIS 项目进行分支，以使我们能够处理多个工作流，然后能够在发布到生产环境之前将项目重新合并。

TFS 让我可以毫不费力地对我的项目进行分支，但是之后将它们合并在一起会导致页面拖网，并且页面很难使用 XML。

其他人如何处理这种情况？市场上是否有任何工具可以准确地处理这些情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:21:41.770

正如 Jamie Thomson 在这篇博文中所述，SSIS 文件实际上是二进制文件，因此应被视为不可合并。

[http://consultingblogs.emc.com/jamiethomson/archive/2007/08/06/SSIS_3A00_-Team-Development-Experiences.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2007/08/06/SSIS_3A00_-Team-Development-Experiences.aspx)

如果你想让多个团队成员在同一个项目上工作，他还建议尽可能使包模块化——这是我们已经采用的。

有一个名为 BIDS Helper 的工具，它为 SSIS 文件提供“智能差异”，这对于确定版本之间的更改很有用。 [http://bidshelper.codeplex.com/wikipage?title=Smart%20Diff&referringTitle=Documentation](http://bidshelper.codeplex.com/wikipage?title=Smart%20Diff&referringTitle=Documentation)

但是，一般来说，如果您想避免数小时的痛苦，SSIS 文件应被视为不可合并文件 - 我们已在 TFS 中对所有 .dtsx 文件启用了独占签出功能，这样人们就不会互相打扰。

# python - Python中的多线程MD5校验和

> ID：10130867
> 
> 赞同：5
> 
> 时间：2012-04-12T19:58:52.150
> 
> 标签：python, multithreading, md5, checksum

我有一个 python 脚本，它递归地遍历一个指定的目录，并对它找到的每个文件进行校验和。然后它会写入一个日志文件，其中列出了所有文件路径及其 md5 校验和。

因此，对于 50,000 个 15 MB 的文件，这需要很长时间。但是，我的计算机可用的资源比它实际使用的要多得多。如何调整我的方法，以便脚本使用更多资源以更快地执行？

例如，我可以将我的文件列表分成三份并为每份运行一个线程，从而给我 3 倍的运行时间吗？

我对线程不是很舒服，我希望有人不介意为我的情况做个例子。

这是我的顺序 md5 循环的代码：

```
for (root, dirs, files) in os.walk(root_path):
    for filename in files:
        file_path = root + "/" + filename
        md5_pairs.append([file_path, md5file(file_path, 128)]) 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:06:19.133

对于这类工作，我认为 multiprocessing.Pool 会给您带来更少的惊喜 - 查看[http://docs.python.org/library/multiprocessing.html上的示例和文档](http://docs.python.org/library/multiprocessing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:16:38.637

如果您要使用线程，您需要首先启动您的线程并让它们从 Queue.Queue 实例中轮询工作。然后在您的主线程中，运行您拥有的 for 循环，但不要调用 md5file(..)，而是将所有参数推送到 Queue.Queue 上。 [Python 中的线程/队列](https://stackoverflow.com/questions/7074984/threading-queue-in-python)有一个示例，但也请查看文档：[http ://docs.python.org/library/queue.html](http://docs.python.org/library/queue.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:26:55.777

使用 GIL（全局解释器锁）线程不会很有帮助。您的应用程序永远不会同时执行对 md5.update 函数的多次调用。我将继续尝试优化改进您的进程池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:45:09.687

尴尬地并行并为一大块文件启动一个进程。我们在集群上执行此操作。您可以有几十个或几百个进程，每个 md5ing 几十个文件。届时，磁盘 IO 将成为您的瓶颈。

# java - 每当创建对象时执行方法

> ID：10130868
> 
> 赞同：0
> 
> 时间：2012-04-12T19:58:56.210
> 
> 标签：java

我想知道在创建对象时如何在 java 中执行方法。

例如：

```
public class Person {
    private String name;
    private int age;
    private Date dateCreated;

    public setName(String name){
    ...
    }
    ... some other methods ...

    public setDateCreated(){
         this.dateCreated = new Date();
} 
```

我真的希望我的 setDateCreated() 方法在创建时在每个对象上执行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T20:00:21.080

只需调用`setDateCreated`您的对象构造函数：

```
 public Person(){
     setDateCreated();
 } 
```

如果您不想稍后修改它，您也可以直接在构造函数中执行此操作：

```
 public Person(){
     this.dateCreated = new Date();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:01:23.200

使用构造函数：

```
public Person(){
  setDateCreated();
} 
```

还有，`public class Person(){`应该`public class Person{`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:03:19.140

当然，您意识到这个类打破了 Java Bean 编码标准。

该标准将期望看到传递给该`setDateCreated()`方法的 Date 对象：

```
public void setDateCreated(Date newDate) { 
    this.dateCreated = ((newDate == null) ? new Date() : new Date(newDate.getTime()));
} 
```

一旦添加了 void 返回类型，您就可以按照自己的方式自由地进行操作，但是如果其他希望您符合标准的代码抱怨，请不要感到震惊。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T20:13:16.857

我会使用某种面向方面的方法——这样你就可以避免在你的类中使用代码。检查方面 j 或 spring 以进行面向方面的编程。

# windows-phone-7 - 在 Windows Phone 7.1 (SDK 7.1.1) BackgroundTransferRequest 中设置用户代理

> ID：10130869
> 
> 赞同：1
> 
> 时间：2012-04-12T19:59:01.120
> 
> 标签：windows-phone-7, windows-phone-7.1, user-agent, background-transfer

通过简单地设置适当的标头来更改引用非常容易，但是，我找不到将用户代理（“ZDM/4.0；Windows Mobile 7.0；”）更改为任何其他值的方法。到目前为止，我尝试了以下代码：

```
var request = new BackgroundTransferRequest(new Uri("http://www.somedomain.net"));
request.Headers[Convert.ToString(HttpRequestHeader.UserAgent)] = "AgentSmith";
request.Headers[Convert.ToString(HttpRequestHeader.Referer)] = "MyReferer"; 
```

有什么想法吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:01:18.860

`Convert.ToString(HttpRequestHeader.UserAgent)`返回“UserAgent”，但 HTTP Header 是“User-Agent”；试试这样的代码：

```
var request = new BackgroundTransferRequest(new Uri("http://www.somedomain.net"));
request.Headers["User-Agent"] = "AgentSmith";
request.Headers["Referer"] = "MyReferer"; 
```

# asp.net - 混合 Jquery 和 ASP.net

> ID：10130872
> 
> 赞同：0
> 
> 时间：2012-04-12T19:59:25.277
> 
> 标签：asp.net

这是我的 Jquery 代码：

```
 $(document).ready(function () {     
            onfocus();
            $(".on_off_checkbox").iphoneStyle();
            $('.tip a ').tipsy({gravity: 'sw'});
            $('#login').show().animate({   opacity: 1 }, 2000);
            $('.logo').show().animate({   opacity: 1,top: '30%'}, 800,function(){           
                $('.logo').show().delay(1200).animate({   opacity: 1,top: '0%' }, 300,function(){
                    $('.formLogin').animate({   opacity: 1,left: '0' }, 300);
                    $('.userbox').animate({ opacity: 0 }, 200).hide();
                 });        
            })  
        }); 

        $('.userload').click(function(e){
            $('.formLogin').animate({   opacity: 1,left: '0' }, 300);               
              $('.userbox').animate({ opacity: 0 }, 200,function(){
                  $('.userbox').hide();             
               });
        });

    $('#but_login').click(function(e){              
          if($('#username_id').val() == "" || $('#password').val() == "")
          {
              showError("Please Input Username / Password");
              $('.inner').jrumble({ x: 4,y: 0,rotation: 0 });   
              $('.inner').trigger('startRumble');
              setTimeout('$(".inner").trigger("stopRumble")',500);
              setTimeout('hideTop()',5000);
              return false;
          }     
         hideTop();
         loading('Checking',1);     
         setTimeout( "unloading()", 2000 );
         setTimeout( "Login()", 2500 );
    }); 

function Login(){
    $("#login").animate({   opacity: 1,top: '49%' }, 200,function(){
         $('.userbox').show().animate({ opacity: 1 }, 500);
            $("#login").animate({   opacity: 0,top: '60%' }, 500,function(){
                $(this).fadeOut(200,function(){
                  $(".text_success").slideDown();
                  $("#successLogin").animate({opacity: 1,height: "200px"},500);                  
                });                           
             }) 
     }) 
    //setTimeout( "window.location.href='dashboard.html'", 3000 );
}

$('#alertMessage').click(function(){
    hideTop();
});

function showError(str){
    $('#alertMessage').addClass('error').html(str).stop(true,true).show().animate({ opacity: 1,right: '0'}, 500);   

}

function showSuccess(str){
    $('#alertMessage').removeClass('error').html(str).stop(true,true).show().animate({ opacity: 1,right: '0'}, 500);    
}

function onfocus(){
                if($(window).width()>480) {                   
                        $('.tip input').tipsy({ trigger: 'focus', gravity: 'w' ,live: true});
                }else{
                      $('.tip input').tipsy("hide");
                }
}

function hideTop(){
    $('#alertMessage').animate({ opacity: 0,right: '-20'}, 500,function(){ $(this).hide(); });  
}   

function loading(name,overlay) {  
      $('body').append('<div id="overlay"></div><div id="preloader">'+name+'..</div>');
              if(overlay==1){
                $('#overlay').css('opacity',0.1).fadeIn(function(){  $('#preloader').fadeIn();  });
                return  false;
         }
      $('#preloader').fadeIn();   
 }

 function unloading() {  
        $('#preloader').fadeOut('fast',function(){ $('#overlay').fadeOut(); });
 } 
```

这是我的 ASP.net 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class index : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

这是HTML：

```
<div class="formLogin">

          <div class="tip">
                <input name="username" type="text"  id="username_id"  title="Username"   />
          </div>
          <div class="tip">
                <input name="password" type="password" id="password"   title="Password"  />
          </div>

          <div class="loginButton">
            <div style="float:left; margin-left:-9px;">
                <input type="checkbox" id="on_off" name="remember" class="on_off_checkbox"  value="1"   />
                <span class="f_help">Remember me</span>
            </div>
            <div style="float:right; padding:3px 0; margin-right:-12px;">
              <div> 
                <ul class="uibutton-group">
                   <li><a class="uibutton normal" href="#" id="but_login" >Login</a></li>
                   <li><a class="uibutton normal" href="#" id="forgetpass">forgetpass</a></li>
               </ul>
              </div>

            </div>
            <div class="clear"></div>
          </div>
  </div> 
```

我是 ASP.net 的新手，我有客户端验证工作以确保用户名或密码不为空。我不知道现在如何添加服务器端验证。

我来自经典 ASP 的强大背景，并且正在向 ASP.net 迈进。我知道我需要检查用户名和密码是否为空的基础知识，如果是则返回错误。

我的 but_login 上需要 runat=server 吗？如何附加一些后端 asp.net 代码，以便在单击该链接时处理服务器代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:12:42.457

我认为对您来说最好的方法是将您的典型 html 输入替换为这样的 asp 输入并使用客户端 id 模式静态，这样您就不必在 jquery 中替换 id

它可以是这样的

```
 <asp:TextBox  name="username" type="text"  id="username_id"  title="Username" ClientIDMode="Static" runat="server"></asp:TextBox>  
     <asp:TextBox   name="password" type="password" id="password"   title="Password" ClientIDMode="Static" runat="server"></asp:TextBox> 
    <asp:Label ID="Label1" runat="server" Text=""></asp:Label> 
```

和后面的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class index : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (username_id.Text == "" || password.Text == "")
            {

                Label1.Text = "Error";

            }
            else
            { 

                    ////

             }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:04:10.980

内置的 ASP.NET 验证控件自动提供客户端和服务器端功能。您可能需要考虑使用这些控件重写您的验证。

这是一个教程/概述：

[http://msdn.microsoft.com/en-us/library/debza5t0.aspx](http://msdn.microsoft.com/en-us/library/debza5t0.aspx)

**编辑**

如果您不能使用内置验证，则基本上需要将所有 JavaScript 验证移植到`Page_Load`事件中。

```
<script runat=server">
    void Page_Load(object sender, EventArgs e)
    {
        string error = ValidatePage();
        if(String.IsNullOrEmpty(error))
        {
            //validation passed, do something
        }
        else
        {
            //validation failed. output error message 
            //via Response.Write or a Label control

            //Response.Write(error);
            //or
            //Label1.Text = error;
        }
    }

    string ValidatePage()
    {
        //validate your elements here. 
        string username = Request.Form["username"];
        if(String.IsNullOrEmpty(username))
        {
            return "Username required";
        }
        //etc...
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:05:29.907

为了访问服务器上的控件，该控件需要具有 runat="server" 属性。但是，如果您这样做，这将更改控件的客户端 ID。有几种方法可以解决此问题

*   按类而不是 id 选择。
*   使用 <%= control.ClientID %> 在 javascript 变量中传递 id 并使用该变量
*   将控件 id 模式设置为静态，但请记住，如果您在数据绑定中使用控件并且它在页面上重复多次，这可能会导致问题。

另一种选择是使用 ASP.NET 验证器控件，例如 RegularExpressionValidator 和 RequiredFieldValidator。

# python - 为什么我的 Python 套接字 Web 服务器代码失败？

> ID：10130874
> 
> 赞同：1
> 
> 时间：2012-04-12T19:59:32.873
> 
> 标签：python, http, sockets, webserver

我正在尝试使用 Python 实现一个非常基本的类似 Web 服务器的应用程序，这是我当前的代码：

```
from socket import *

serverPort = 12000
serverSocket = socket(AF_INET,SOCK_STREAM)
serverSocket.bind(('', serverPort))
serverSocket.listen(1)
print 'Server is now running...'
while 1:
    connectionSocket, addr = serverSocket.accept()
    connectionSocket.sendall('''
        HTTP/1.0 200 OK\r\n
        Content-Type:text/html\r\n
        Connection:close\r\n
        \r\n
        <!DOCTYPE html>
        <head><title>Lab sign-up - AntonX Server</title></head>
        <h1>Lab Sign-up</h1>
        <table>
        <form action=\"localhost:12000\" method=\"GET\">
        <tr><td>Time</td><td>Name</td></tr>
        <tr><td>1 PM</td><td><input type=\"text\" name=\"time_1\"></td></tr>
        <tr><td>2 PM</td><td><input type=\"text\" name=\"time_2\"></td></tr>
        <tr><td>3 PM</td><td><input type=\"text\" name=\"time_3\"></td></tr>
        <tr><td>4 PM</td><td><input type=\"text\" name=\"time_4\"></td></tr>
        <tr><td>5 PM</td><td><input type=\"text\" name=\"time_5\"></td></tr>
        <tr><td colspan=\"2\"><input type=\"submit\" name=\"submit\" value=\"Steal this spot!\"></tr>
        </form></table>
        </html>\r\n
    ''')
    connectionSocket.close() 
```

问题是...当我导航到 localhost:12000 时，我收到错误 101：连接已重置。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:26:25.467

您发回的数据有很多额外的空格和换行符。例如，

```
'''
    HTTP/1.0 200 OK\r\n
    Content-Type:text/html\r\n''' 
```

将发送字符串

```
(blank line)
(extra spaces)    HTTP/1.0 200 OK  
(blank line)
(extra spaces)    Content-Type:text/html 
```

换句话说，你得到了你已经明确包含在 \r\n 中的新行和自然存在于你的源代码中的新行的混合。

此代码适用于我的网络浏览器。

```
from socket import *

serverPort = 12000
serverSocket = socket(AF_INET,SOCK_STREAM)
serverSocket.bind(('', serverPort))
serverSocket.listen(1)
print 'Server is now running...'
while 1:
    connectionSocket, addr = serverSocket.accept()
    connectionSocket.sendall("HTTP/1.0 200 OK\r\n"+
                             "Content-Type: text/html\r\n"+
                             "Connection: close\r\n"+
                             "\r\n"+
        """<!DOCTYPE html>
        <head><title>Lab sign-up - AntonX Server</title></head>
        <h1>Lab Sign-up</h1>
        <table>
        <form action=\"localhost:12000\" method=\"GET\">
        <tr><td>Time</td><td>Name</td></tr>
        <tr><td>1 PM</td><td><input type=\"text\" name=\"time_1\"></td></tr>
        <tr><td>2 PM</td><td><input type=\"text\" name=\"time_2\"></td></tr>
        <tr><td>3 PM</td><td><input type=\"text\" name=\"time_3\"></td></tr>
        <tr><td>4 PM</td><td><input type=\"text\" name=\"time_4\"></td></tr>
        <tr><td>5 PM</td><td><input type=\"text\" name=\"time_5\"></td></tr>
        <tr><td colspan=\"2\"><input type=\"submit\" name=\"submit\" value=\"Steal this spot!\"></tr>
        </form></table>
        </html>\r\n
    """)
    connectionSocket.close() 
```

（但是，这不是用 Python 编写 Web 服务器的好方法！）

您可能希望查看 Python 中的各种内置函数来帮助编写此类代码，可能从 SimpleHTTPServer 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:12:44.083

您不能同时指定“Content-Type”字段和 HTML5 Doctype。

# asp.net - 使用httpSendRequest c ++上传文件

> ID：10130880
> 
> 赞同：1
> 
> 时间：2012-04-12T19:59:52.200
> 
> 标签：asp.net, c, winapi, http, wininet

我正在尝试通过 POST 请求（c++ 和 winapi）将文件发送到 HTTP 服务器，步骤：

```
// Read file into "buff" and file size into "buffSize" 
        ....
    ....
    ....

    HINTERNET internetRoot;
    HINTERNET httpSession;
    HINTERNET httpRequest;

    internetRoot = InternetOpen(agent_info, INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, NULL);

    //Connecting to the http server
    httpSession = InternetConnect(internetRoot, IP,PORT_NUMBER, NULL, NULL, INTERNET_SERVICE_HTTP, NULL, NULL);

    //Creating a new HTTP POST request to the default resource on the server
    httpRequest = HttpOpenRequest(httpSession, TEXT("POST"), TEXT("/Post.aspx"), NULL, NULL, NULL, INTERNET_FLAG_RELOAD | INTERNET_FLAG_NO_CACHE_WRITE, NULL);

    //Send POST request
    HttpSendRequest(httpRequest, NULL, NULL, buff, buffSize);

    //Closing handles... 
```

在服务器中，我正在使用此代码（asp.net）接收文件

```
Stream httpStream;
        try
        {
            httpStream = request.RequestContext.HttpContext.Request.InputStream;
        }
        catch (HttpException)
        {
            return;
        }

            byte[] tmp = new byte[httpStream.Length];
            int bytesRead = httpStream.Read(tmp, 0, 1024 * 1024);
            int totalBytesRead = bytesRead;
            while (bytesRead > 0)
            {
                bytesRead = httpStream.Read(tmp, totalBytesRead, 1024 * 1024);
                totalBytesRead += bytesRead;
            }
            httpStream.Close();
            httpStream.Dispose();

           //Save "tmp" to file... 
```

我可以在本地服务器（visual studio asp 服务器）上发送大文件，但我不能将超过 1 MB 的文件发送到互联网服务器。（HttpOpenRequest 失败）有没有更好的上传文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:03:13.773

警告：这些天我的 Wininet 非常生锈。

我想知道您是否应该自己设置“Content-Length”标头。您的代码似乎假设 a）您正在发出 HTTP/1.0 请求或 b）`HttpSendRequest`将为您添加标头（我认为它不会）。

无论哪种方式，如果服务器无法快速确定请求大小，则 IIS 的默认配置将拒绝传入请求的大小。

我的猜测是，如果您使用函数的`lpszHeaders`and`dwHeadersLength`参数`HttpSendRequest`包含适当的“Content-Length”标头，问题将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:26:31.420

你收到什么错误？我的意思是 GetLastError() 返回什么？如果您发送文件 800KB 那么它可以正常工作吗？我真的不明白如何，因为 HttpOpenRequest 不知道数据的大小。

也许它超时？但这意味着 HttpSendRequest 实际上失败了。它可能会缓冲所有数据，但由于大小很大，因此它需要比超时允许的时间更多的时间。

使用以下代码查询当前超时（以毫秒为单位）：

```
InternetQueryOption(h, INTERNET_OPTION_RECEIVE_TIMEOUT, &dwReceiveTimeOut, sizeof(dwReceiveTimeOut));
InternetQueryOption(h, INTERNET_OPTION_SEND_TIMEOUT, &dwSendTimeOut, sizeof(dwSendTimeOut)); 
```

并按照以下设置新的：

```
InternetSetOption(h, INTERNET_OPTION_RECEIVE_TIMEOUT, &dwNewReceiveTimeOut, sizeof(dwNewReceiveTimeOut));
InternetSetOption(h, INTERNET_OPTION_SEND_TIMEOUT, &dwNewSendTimeOut, sizeof(dwNewSendTimeOut)); 
```

# javascript - 页面加载后菜单跳转

> ID：10130882
> 
> 赞同：2
> 
> 时间：2012-04-12T19:59:55.510
> 
> 标签：javascript, jquery, html, css

问题是加载新页面时我的菜单跳转（所选菜单项应该完全居中。菜单使用代码：

```
$(document).ready(function(){

    /* Menu klik animatie II */
    $("nav#menu a").click(function(e) {
        e.preventDefault();
        var dit = $(this);
        $(this).parent().siblings().removeClass("current_page_item");
        $(this).parent().addClass("current_page_item");
        geselecteerd = $('#menu li.current_page_item').sumOuterWidth(true);
        voor = $('#menu li.current_page_item').prevAll().sumOuterWidth(true);
        vader = $('#menu').parent().width();
        invoegen = parseInt(((vader-geselecteerd)/2)-voor);
        $('nav#menu').prev().animate({
            width: invoegen + 'px',
        }, {
            duration: 400,
            specialEasing: {
                width: 'linear',
                height: 'easeOutBounce'
        },
        complete: function() {
            $('#content').fadeTo('fast', 0.01, function() {
                document.location = $(dit).attr('href');
            });
        }
      });
    });

    /* Menu uitlijning: geselecteerde item centraal */
    $.fn.sumOuterWidth = function(useMargins) {
      var sum = 0;
      this.each(function() { 
        sum += $(this).outerWidth(useMargins);
      });
      return sum;
    };

    geselecteerd = $('#menu li.current_page_item').sumOuterWidth(true);
    voor = $('#menu li.current_page_item').prevAll().sumOuterWidth(true);
    vader = $('#menu').parent().width();
    invoegen = parseInt(((vader-geselecteerd)/2)-voor);
    $('#menu').before("<div style='width:" + invoegen + "px;float:left'>&nbsp;</div>");
}); 
```

我真的想不出我做错了什么；宽度（来自菜单之前的 div）在动画宽度（在新页面加载之前）和新加载页面上应该相同。有人对此有任何想法吗？

当我使用不同的字体（Varela Round -> Google web fonts）时，它不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:57:40.267

当 DOM 准备好时，此 jQuery 语法会运行代码。

```
$(document).ready(function(){ } 
```

在某些情况下，您会希望在代码运行之前加载整个页面（以及它的图像依赖项）。在这些情况下，我们如下：

```
$(window).load(function() { //code }) 
```

# sql - 比较 Access 中的日期值 - 条件表达式中的数据类型不匹配

> ID：10130883
> 
> 赞同：1
> 
> 时间：2012-04-12T20:00:02.693
> 
> 标签：sql, ms-access, date

我在比较访问数据库中的日期时遇到问题。基本上，我正在从文本字段中解析出日期，然后尝试将该日期与另一个日期进行比较，以仅提取较新/较旧的记录。

到目前为止，我一切正常，但是当我尝试将表达式添加到 where 子句时，它的行为就像它不是日期值一样。

这是完整的 SQL：

```
SELECT 
Switch(Isdate(TRIM(LEFT(bc_testingtickets.notes, Instr(bc_testingtickets.notes, ' ')))) = false, 'NOT     ASSIGNED!!!') AS [Assigned Status],
TRIM(LEFT(bc_testingtickets.notes, Instr(bc_testingtickets.notes, ' '))) AS [Last Updated Date], 
bc_testingtickets.notes AS [Work Diary], 
bc_testingtickets.ticket_id, 
clients.client_code, 
bc_profilemain.SYSTEM, 
list_picklists.TEXT, 
list_picklists_1.TEXT, 
list_picklists_2.TEXT, 
list_picklists_3.TEXT, 
bc_testingtickets.createdate, 
bc_testingtickets.completedate, 
Datevalue(TRIM(LEFT([bc_TestingTickets].[notes], Instr([bc_TestingTickets].[notes], ' '))))  AS datetest 

FROM   list_picklists AS list_picklists_3 
 RIGHT JOIN (list_picklists AS list_picklists_2 
             RIGHT JOIN (list_picklists AS list_picklists_1 
                         RIGHT JOIN (bc_profilemain 
                                     RIGHT JOIN (((bc_testingtickets 
                                                   LEFT JOIN clients 
                                                     ON 
 bc_testingtickets.broker = clients.client_id) 
              LEFT JOIN list_picklists 
                ON 
 bc_testingtickets.status = list_picklists.id) 
             LEFT JOIN bc_profile2ticketmapping 
               ON bc_testingtickets.ticket_id = 
                  bc_profile2ticketmapping.ticket_id) 
   ON bc_profilemain.id = 
      bc_profile2ticketmapping.profile_id) 
 ON list_picklists_1.id = bc_testingtickets.purpose) 
 ON list_picklists_2.id = bc_profilemain.destination) 
   ON list_picklists_3.id = bc_profilemain.security_type 
WHERE  ( ( ( list_picklists.TEXT ) <> 'Passed' 
     AND ( list_picklists.TEXT ) <> 'Failed' 
     AND ( list_picklists.TEXT ) <> 'Rejected' ) 
   AND ( ( bc_testingtickets.ticket_id ) <> 4386 ) ) 
GROUP  BY bc_testingtickets.notes, 
    bc_testingtickets.ticket_id, 
    clients.client_code, 
    bc_profilemain.SYSTEM, 
    list_picklists.TEXT, 
    list_picklists_1.TEXT, 
    list_picklists_2.TEXT, 
    list_picklists_3.TEXT, 
    bc_testingtickets.createdate, 
    bc_testingtickets.completedate, 
    DateValue(TRIM(LEFT([bc_TestingTickets].[notes], Instr([bc_TestingTickets].[notes], ' ')))) 
ORDER  BY Datevalue(TRIM(LEFT([bc_TestingTickets].[notes], Instr([bc_TestingTickets].[notes], ' ')))); 
```

我试图与不同日期比较的值是：

```
DateValue(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[notes],' ')))) 
```

如果我在 where 子句中添加一个部分，如下所示，我会收到数据类型不匹配错误：

```
WHERE DateValue(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[notes],' ')))) > #4/1/2012# 
```

我什至尝试在我正在测试的手动日期周围使用 DateValue 函数，但我仍然收到不匹配错误：

```
WHERE DateValue(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[notes],' ')))) > DateValue("4/1/2012") 
```

关于如何在这种方法中比较日期的任何提示？我无法更改数据库中的任何字段等，这就是为什么我在 SQL 中解析日期并尝试对其进行操作，以便我可以针对它运行报告。

我试过谷歌搜索，但没有具体谈论从文本中解析日期并将其转换为日期对象。我认为这可能是一个错误或从左/修剪功能返回日期的方式。您可以看到我在 SELECT 语句的末尾添加了一个名为 DateTest 的列，很明显，访问将其视为日期（运行查询时，它要求按最旧到最新/最新到最旧而不是 AZ 排序或 ZA），与选择中的第二列不同。

提前感谢有关我如何根据日期查询的任何提示/线索。

编辑：我刚刚在 where 子句中尝试了以下语句，但仍然不匹配：

```
CDate(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[notes],' ')))) > #4/1/2012#
CDate(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[notes],' ')))) >
CDate("4/1/2012") CDate(DateValue(Trim(Left([bc_TestingTickets].[notes],InStr([bc_TestingTickets].[‌​notes],' '))))) > #4/1/2012# 
```

我尝试了所有我能想到的关于将 CDate 放在 DateValue 内部、外部等方面的组合。CDate 函数看起来确实像我应该使用的。不知道为什么它仍然抛出错误。

这是显示查询结果的屏幕截图链接[http://ramonecung.com/access.jpg](http://ramonecung.com/access.jpg)。一张图片中有两个屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:44:18.260

看来您的[类型转换](http://office.microsoft.com/en-us/access-help/type-conversion-functions-HA001229018.aspx)有问题。在这种情况下，我相信您正在寻找[CDate 功能](http://www.techonthenet.com/access/functions/datatype/cdate.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:41:52.777

一个问题可能是日期部分的顺序。立即窗口中的测试显示了这一点

```
?cdate(#4/1/2012#)
01.04.2012

?cdate(#2012/1/4#)
04.01.2012

```

将日期倒写在格式中`yyyy/MM/dd`，从而避免无意中交换日期和月份！

```
DateValue("2012/1/4") 
```

和

```
CDate(#2012/1/4#) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:00:45.343

您报告此 WHERE 子句出现数据类型不匹配错误。

```
WHERE DateValue(Trim(Left([bc_TestingTickets].[notes],
    InStr([bc_TestingTickets].[notes],' ')))) > #4/1/2012# 
```

这让我想知道是否`[bc_TestingTickets].[notes]`可以为 Null，或者因为表设计允许该字段为 Null，或者 Null 被设计禁止但作为 LEFT 或 RIGHT JOIN 的结果存在于查询的候选行集中。

如果 Nulls 存在，您的情况可能类似于这个简单的查询，它也会触发数据类型不匹配错误：

```
SELECT DateValue(Trim(Left(Null,InStr(Null,' ')))); 
```

如果这被证明是您的问题的原因，您将不得不以某种方式围绕它进行设计。我无法就您应该如何做到这一点提出建议。试图分析你的查询把我吓跑了。:-(

# c# - 使用 TCP 在 C# 中实现 FTP 客户端

> ID：10130892
> 
> 赞同：0
> 
> 时间：2012-04-12T20:00:50.950
> 
> 标签：c#, tcp, ftp, stream, networkstream

我一直在搞乱 C# 中的 TCP 套接字，并且在与我设置的 FTP 服务器通信时遇到了一些问题。我最初可以连接并收到 220 消息，但是当我发送“USER nrcast”命令时，我从未得到响应，并且 DataAvailable 属性返回 false。有人知道我在做什么错吗？到目前为止，这是我的代码：

```
namespace TCPClient
{
public partial class TCPClientForm : Form
{

    private TcpClient myClient;
    NetworkStream stream;

    public TCPClientForm()
    {
        InitializeComponent();
        send();

    }

    void send()
    {

        while (true)
        {
            try
            {
                myClient = new TcpClient("nrcrast.dyndns.info", 21);
                break;
            }
            catch (SocketException ex)
            {
                Console.WriteLine(ex.ToString());
            }

        }
        stream = myClient.GetStream();
        int sendOffset = 0;
        int recOffset=0;

        int dataLength;
        Byte[] receiveData = new Byte[256];

        // wait for a response
        dataLength = stream.Read(receiveData, recOffset, receiveData.Length);
        String recvdMessage = System.Text.Encoding.ASCII.GetString(receiveData, 0, dataLength);
        Console.WriteLine(recvdMessage.ToString());
         recOffset+=dataLength;

        String message = "USER nrcrast";
        Byte[] data = System.Text.Encoding.ASCII.GetBytes(message);
        stream.Write(data, 0, data.Length);
        sendOffset += data.Length;

        // wait for a response
        while (!stream.DataAvailable)
        {
        }
        dataLength = stream.Read(receiveData, 0, receiveData.Length);
        recvdMessage = System.Text.Encoding.ASCII.GetString(receiveData, 0, dataLength);
        Console.WriteLine(recvdMessage.ToString());

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:43:05.290

在黑暗中拍摄，您需要在命令末尾添加回车和换行符

```
String message = "USER nrcrast\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:48:42.473

如果您有兴趣在类似项目上从某人的肩膀上看（不是说它完美），我很久以前做过同样的事情（这回到 .net 1.1，并在 ssl 流时将其移植到 .net 2.0添加了东西）。

关于发送命令的时间、服务器希望您打开数据连接的时间、读取服务器响应的时间等等（取决于主动/被动模式），FTP 协议有一些棘手的部分。

无论如何，在您自己实现时，请随时查看[我的 FTP 客户端库源代码以供参考。](http://sanity-free.com/net/nullfx.net-source.zip)这是一个非常完整的实现，也可以验证 ssl/tls。

# jquery - jquery 绑定，函数（e）

> ID：10130902
> 
> 赞同：0
> 
> 时间：2012-04-12T20:01:26.037
> 
> 标签：jquery

在[jQuery](http://en.wikipedia.org/wiki/JQuery)中，以下是做什么的？

```
 $("#ivid1").bind("pageshow", function (e) { 

        // Do something.
    }); 
```

特别是，什么`bind`是`pageshow`和`function(e)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:04:09.487

它将自定义事件绑定`pageshow`到具有 id 的元素并为该事件`#ivid1`定义处理程序 ( )。`function (e) {.. }`

稍后您可以触发此事件，如下所示，

```
$("#ivid1").trigger('pageshow') 
```

> **注意：**正如[Halcyon](https://stackoverflow.com/a/10131011/297641)和 Josh Davenport（见评论）所指出的，这取决于上下文和使用它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:05:14.630

这将`pageshow`事件绑定到`#ivid1`元素。当`pageshow`（无论它可能是什么）被触发时`#ivid1`，可能是通过浏览器的某种机制，被绑定的函数被执行。

我不知道是什么`pageshow`，但显然它是相对较新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:08:33.310

"pageshow" 是一个字符串字面量，它引用 OnPageShow JavaScript 事件。这是 HTML 5 的新功能，因此现在有一些浏览器支持。请参阅[w3schools](http://www.w3schools.com/html5/html5_ref_eventattributes.asp)。函数 (e) 是调用匿名函数并传入事件参数的语法。

# javascript - 使用 jQuery 从特定的文本中提取文本

> ID：10130906
> 
> 赞同：1
> 
> 时间：2012-04-12T20:01:44.663
> 
> 标签：javascript, jquery, ajax

我在外部页面上运行 AJAX 查询，并试图仅从 County 返回数据。我当前的脚本正在从所有表格单元格中提取文本，但我一辈子都无法简单地提取县名。

当前正在运行的脚本：

```
$( ".zipCode" ).each(function( intIndex ){
var zipCodeID = $(this).attr('id');
console.log('http://www.uscounties.org/cffiles_web/counties/zip_res.cfm?zip='+zipCodeID);
$.ajax({
    url: 'http://www.uscounties.org/cffiles_web/counties/zip_res.cfm?zip='+zipCodeID,
    type: 'GET',
    success: function(res) {
        var headline = $(res.responseText).find("p").text();
        console.log(headline);
        $('#'+zipCodeID).empty();
        $('#'+zipCodeID).append(headline);
    }
});
}); 
```

正在查询的页面示例： [http ://www.uscounties.org/cffiles_web/counties/zip_res.cfm?zip=56159](http://www.uscounties.org/cffiles_web/counties/zip_res.cfm?zip=56159)

这应该适用于所有输入的 ZIPS。页面布局相同，我只是无法获得仅返回县的功能。任何帮助或建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:21:49.460

由于该页面上完全没有`id`s 和`class`es，因此您实际上没有太多工作要做。如果您可以访问该页面的来源，请在单元格上粘贴`id`或`class`，让您的生活变得更轻松。如果没有，您将不得不使用您对页面结构的了解来查找县。这样的事情将特别适用于您链接到的那个页面。如果其他页面有细微的变化，这将失败：

```
var headline = $(res.responseText).find("table > tr:eq(2) > td:eq(3)").text(); 
```

这假设页面上只有一个表格，并且县始终位于第二行的第三个单元格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:21:43.187

你基本上是屏幕抓取。由于跨域和其他事情，我以某种方式认为你会遇到这个问题，但这是问题的辅助。

您需要浏览结果页面。假设屏幕上只有一页，它看起来像这样：

```
var retVal = [];

// Basically, for each row in the table...
$('tr').each(function(){
    var pTR = $(this);

    // Skip the header row.
    if (pTR.find('th').length == 0)
    {
        // This is the array of TDs in the given row.
        var pCells = $('td', pTR);
        retVal.push({state:$(pCells[0]).text(), place:$(pCells[1]).text(), county:$(pCells[2]).text()});
    }
});
// retVal now contains an array of objects, including county.
if (retVal.length > 0) 
{
    alert(retVal[0].county);
}
else
{
    alert('Cannot parse output page');
} 
```

解析代码被编写为可扩展的，因此您可以取回所有数据。使用邮政编码，虽然您可能只能返回一个县，但您肯定会返回更多的地方。另请注意...由于各种原因，并非每个邮政编码都附有县，但在这种情况下您应该返回一个空字符串。

# url - 了解不同站点的蛞蝓定位

> ID：10130907
> 
> 赞同：5
> 
> 时间：2012-04-12T20:01:49.743
> 
> 标签：url, friendly-url, seo, slug

在尝试了解如何创建更好的 URL 以方便用户并且不影响 SEO 时，我正在研究不同网站的结构。我有一些与以下相关的查询：

*   亚马逊 -> /典型产品-slug/dp/{id}

*   stackoverflow -> /questions/{id}/question-slug

*   yardellr -> for_sale#!/product-slug--{id}

[1] 亚马逊为什么像stackoverflow那样把slug放在域名后面，这样更容易理解，还提供目录结构？此外，将 {id} 保留在末尾会使它更容易出现剪切粘贴错误。

[2] amazon 和 stackoverflow 的 {id} 定位的差异是否与亚马逊的 {id} 是字母数字而 stackoverflow 只有数字有关？也许字母数字对用户来说更神秘，因此亚马逊把它放在最正确的位置，从 SEO 的角度来看？

[3] 对于亚马逊来说，使用关键字“产品”甚至“书籍”或“音乐”等高级类别来代替“dp”是否会提高 SEO 效果？

[4]yardellr 因为它的尾随 {id} 不使用“/”而是“--”作为标记。谷歌表示 URL 目录结构的深度并不重要。什么是yardellr 从这种结构中受益，它只是因为 slug 和 id 都是唯一且相同的吗？跟深度有关系吗？如果他们将 id 放在 slug 之前，那会影响 SEO 吗？

我知道其中大部分没有直接的答案。寻找您的经验和想法，以便我学习。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:08:36.737

1.  搜索引擎优化。您是否尝试过没有 slug 的 URL？SO 可以将 slugs 放在最后，因为标题可能会经常更改，然后 URL 也会更改。因此，最好仅使用问题/ID 对 SO 进行永久链接。与亚马逊相同，但在另一个方向上，他们有更大的竞争，通常产品的标题不会经常改变，可能寿命更短，但也可以在没有蛞蝓的情况下成为永久链接。

2.  身份证就是身份证。不管。与看起来更好的自动增加数字相比，像 YT 这样的神秘数字具有更大的范围和更少的位置。有很多优点和缺点。

3.  没有人搜索“product”、“book”或“cd”。只有标题和作者是重要的。

4.  始终将 slu 放在 SEO 的前面，就像在 1 中一样。深度总是很重要。

# javascript - jquery合并两个对象

> ID：10130908
> 
> 赞同：20
> 
> 时间：2012-04-12T20:01:53.057
> 
> 标签：javascript, jquery

如何将 jquery 对象合并在一起

我有

```
 {
  "merchantcontract":"Ready Reserve Foods 10104.01",
  "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
  "smi_transactiondate":"\/Date(1332140400000)\/",
  "smi_glamount2":15.2600,
  "smi_transactionclass":180870001,
  "smi_transactionclassname":"Residual Agent Commission",
  "smi_contractprodcutidname":"Traditional",
  "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
  "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
 },

 {
  "merchantcontract":"Ready Reserve Foods 10104.01",
  "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
  "smi_transactiondate":"\/Date(1332140400000)\/",
  "smi_glamount2":2.6000,
  "smi_transactionclass":180870001,
  "smi_transactionclassname":"Residual Agent Commission",
  "smi_contractprodcutidname":"Traditional",
  "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
  "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
     } 
```

我想拥有

```
 {
      "merchantcontract":"Ready Reserve Foods 10104.01",
      "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
      "smi_transactiondate":"\/Date(1332140400000)\/",
      "smi_glamount2":15.2600,
      "smi_transactionclass":180870001,
      "smi_transactionclassname":"Residual Agent Commission",
      "smi_contractprodcutidname":"Traditional",
      "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
      "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
      },

       {
      "merchantcontract":"Ready Reserve Foods 10104.01",
      "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
      "smi_transactiondate":"\/Date(1332140400000)\/",
      "smi_glamount2":2.6000,
      "smi_transactionclass":180870001,
      "smi_transactionclassname":"Residual Agent Commission",
      "smi_contractprodcutidname":"Traditional",
      "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
      "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
       }

    {"merchantcontract":"Ready Reserve Foods 10104.01"{

      "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
      "smi_transactiondate":"\/Date(1332140400000)\/",
      "smi_glamount2":15.2600,
      "smi_transactionclass":180870001,
      "smi_transactionclassname":"Residual Agent Commission",
      "smi_contractprodcutidname":"Traditional",
      "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
      "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
   },
   {

      "merchantcontractid":"c4253769-5a57-e111-b935-00155d010302",
      "smi_transactiondate":"\/Date(1332140400000)\/",
      "smi_glamount2":2.6000,
      "smi_transactionclass":180870001,
      "smi_transactionclassname":"Residual Agent Commission",
      "smi_contractprodcutidname":"Traditional",
      "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
      "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
   }
} 
```

所以两个对象都在一个对象之下。我可能有两个以上的对象。

这些对象是在 jquery 中创建的。

我不知道如何开始。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-12T20:08:36.767

jQuery 的[$.extend](http://api.jquery.com/jQuery.extend/)会做你想做的事。

```
//merging two objects into new object
var new_object = $.extend({}, object1, object2);

//merge object2 into object1
$.extend(object1, object2); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T20:15:15.353

```
anObj={'propone':'1', 'proptwo':'2'};
anotherObj={'propel':'11', 'proptlv':'12'};
var opts = {};
$.extend(opts, anObj, anotherObj, { 
    bar: "baz",
    thing: "foo"
});
console.log(opts); 
```

[**例子**](http://jsfiddle.net/heera/kC6Jb/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-21T16:36:36.650

如果要更新现有对象，请使用：

```
$.extend(obj1, obj2); //update obj1 and put all obj2 values in it. 
```

> $.extend 将更改现有对象的值

要创建一个新的第三个对象，它是两个对象的总和，您可以使用此函数

```
function merger_objects(obj1,obj2){
  $.each(obj2, function(key, value) {
     obj1[key] = value;    
  });
 return obj1;
} 
```

**例子**

```
var fruit = {apple:"sweet",graps:"bitter"}
var vege = {cucamber:"bitter",letuce:"bitter"}

var fruit_and_vege = merger_objects(fruit,vege); 
//returns {apple:"sweet",graps:"bitter",cucamber:"bitter",letuce:"bitter"} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-10T20:45:47.930

如果您希望递归地合并它们，[$.extend 会](https://api.jquery.com/jquery.extend/)提供参数`deep`。如果`deep=true`合并变得递归。上面的一个例子，

```
// Initialize two objects.
var json1 = { "a": { "a1": "value1", "a2": "value2" }};
var json2 = { "a": { "a3": "value3" }};

// Merge them recursively.
var newJson = $.extend(true, {}, json1, json2);

// Test it.
if (newJson.a.a1 && newJson.a.a3) {
    console.log("Success");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:07:56.677

你能把它们放在一个数组中吗？

```
var myObjects = []; 
```

并在您创建它们的每个地方添加：

```
myObjects.push(newObject); 
```

# java - 排列每个组合的字母

> ID：10130909
> 
> 赞同：1
> 
> 时间：2012-04-12T20:01:55.163
> 
> 标签：java, performance, permutation, superset

```
public class StringPermutation {    
    public static List<String> getPermutation(String input) {
        List<String> collection = null;   
        if (input.length() == 1) {
            collection = new ArrayList<String>();
            collection.add(input);
            return collection;
        } else {
            collection = getPermutation(input.substring(1));
            Character first = input.charAt(0);
            List<String> result = new ArrayList<String>();
            for (String str : collection) {
                for (int i = 0; i < str.length(); i++) {
                    String item = str.substring(0, i) + first
                            + str.substring(i);
                    result.add(item);
                }
                String item = str.concat(first.toString());
                result.add(item);
            }
            return result;
        }
    }

    public static void main(String[] args) {
        List<String> test = StringPermutation.getPermutation ("CAT");
        System.out.println (test);
    }
} 
```

上面的代码置换了它给出的字符串。例如，给定`cat`，它返回[ `cat, act, atc, cta, tca, tac`]，这很好，但是你们是否可以编辑我的代码，以便它也显示字母的子集，即[ `cat, act, atc, cta, tca, tac] and [at, ta, tc, ca, ac, ct, c, a, t`]？

我希望你明白我在问什么。如果您不明白，请告诉我，我会进一步解释。谢谢，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:48:12.867

我认为您可以首先生成所有字母子集，然后为给定子集生成所有排列：

```
Set<String> subsets;

public void generateSubsets(String current, String left) {
    if (left.length() == 0) {
        subsets.add(current);
    } else {
        generateSubsets(current, left.substring(1));
        generateSubsets(current + left.charAt(0), left.substring(1));
    }
}

List<String> allPermutations(String word) {
    subsets = new HashSet<String>();
    generateSubsets("", word);
    List<String> result = new ArrayList<String>();
    for (String subset : subsets) {
        result.addAll(StringPermutation.getPermutation(subset));
    }
    return result;
} 
```

所以如果你有“cat”子集将是：“”、“c”、“a”、“t”、“ca”、“ct”、“tc”、“cat”然后你会得到每个子集的排列。
关于效率，它不是最好的解决方案，但您可以改进它。

# jquery - jQuery Accordion - 扩大盒子

> ID：10130911
> 
> 赞同：0
> 
> 时间：2012-04-12T20:02:02.853
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在使用 jQuery 手风琴来实现[http://flavors.me](http://flavors.me)具有的类似功能。我设计的调色板由通向文本框、下拉框等的文本链接组成。我需要的是，当我单击手风琴中的任何链接时，应根据手风琴链接中的文本框和其他项目放大整个框。

这是我的代码：

[http://jsfiddle.net/rkumarnirmal/GXAYa/](http://jsfiddle.net/rkumarnirmal/GXAYa/)

任何人都可以修改代码为我获得该功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:15:46.900

如果我的理解正确，这应该可以解决问题吗？

```
#boxtext {
font-family: Tahoma;
color: white;
word-wrap: break-word;
} 
```

# android - 如何在android中的活动之间存储数据？，购物车之类的

> ID：10130913
> 
> 赞同：2
> 
> 时间：2012-04-12T20:02:08.730
> 
> 标签：android

我想在一些活动之间提供一些数据，就像网站上的购物车一样。

这些数据可能是字符串的集合，可能是列表、地图或类似的东西。每个项目都应该关联一个 id、数量、类型和一个文本注释（关于最后一个还不确定）

关键是它不需要在会话结束后持久化，并且在整个会话中这些数据将被删除并完全重新创建很多次。

**问题是：** 最好的选择是使用SharedPreferences？，一个数据库？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:12:45.703

更好的选择是通过工厂对象定位的一些单例 Java 集合（ map 或 list ）。只需将您的购物车存放在那里，根本不用担心数据库或偏好

如果您决定使用首选项，我可以推荐我的小型数据绑定库：

[https://github.com/ko5tik/andject](https://github.com/ko5tik/andject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:17:39.660

最简单的方法是使用一个声明了公共静态变量的类，然后从任何活动中设置它们，并通过调用静态引用即 MyContantsClass.StaticVar1 来检索在任何其他活动中保存的值

```
class MySessionVars
 {
      public static int MyVar1;
 } 
```

在第一个活动中

```
{
   MySessionVars.NyVar1=10;
} 
```

以及任何其他活动

```
{
    Var = MySessionVars.NyVar1;
} 
```

这是最简单的方法，并且会保留 vars 直到应用程序关闭

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T10:29:16.917

您可以使用[Gson](https://code.google.com/p/google-gson/)（由 Google 提供）发送和接收任何数据 btw 活动，甚至是类对象。

* * *

**发送：**（FirstActivity）

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
Gson gson = new Gson();
intent.putExtra("CustomClassObject", gson.toJson(object));
startActivity(intent); 
```

* * *

**接收：（**第二个活动）

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_second);
    Bundle extras = getIntent().getExtras();
    if (extras != null) 
    {
        Gson gson = new Gson();
        CustomClass object = gson.fromJson(extras.getString("CustomClassObject"), CustomClass.class);
    }
    //...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:15:09.443

[使用捆绑](http://developer.android.com/reference/android/os/Bundle.html)或意图。

我不建议为此目的使用数据库。数据库需要正确打开和关闭。在数据通过活动传递的情况下，哪个活动应该是最后一个关闭数据库的活动可能会变得混乱，并可能导致泄漏。如果您只是将这些数据从一个 Activity 传递到另一个 Activity，请创建一个 Bundle，在您开始下一个 Activity 时将其附加到 Intent。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:15:11.517

SharedPreferences 非常适合存储简单的键/值对和少量数据，但是，我想您的购物车对象可能比这更复杂一些。出于这个原因，我可能会使用 SQLite 数据库。但是，如果您没有复杂的数据，并且只想存储一些简单的东西，那么应该使用共享首选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T20:15:11.360

SharedPreferences 是键值对，而 Android 中的数据库是 SQLite，两者都在会话后持续存在。您可以在 SQLite 数据库上执行任意数量的操作，并在下一个会话期间使用相同的文件。如果您需要对您的特定用例进行更多说明，您可以对我的答案发表评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-27T10:04:19.473

人们可能会谈论在 sharedpreference 中创建全局数据或存储值，但根据我的经验，最简单的方法是创建一个单独的类，将变量或数组列表声明为 public static，然后通过引用类名在整个项目中使用它们。变量的名称。 `class global`

```
{
   public static arrayList<String> my;
} 
```

在你的任何活动 global.my

这是迄今为止我发现的最简单的方法！

# c# - 使用匿名方法初始化 Observable 集合

> ID：10130914
> 
> 赞同：0
> 
> 时间：2012-04-12T20:02:09.143
> 
> 标签：c#, wpf

只是试图做一些基本的事情并且我被卡住了。想要在我的模型类中初始化一个可观察的集合（参见下面的代码）并且似乎无法让它工作。我已经为不工作的部分添加了**_ 。**

有人可以提供指点吗

```
public class StockModel : ObservableCollection<KeyValuePair<string, TickerDetails>>
{
    #region Properties
    public string TickerSymbol { get; set; }
    public TickerDetails Ticker { get; set; }
    #endregion

    public StockModel()
    {
        init();   
    }

    public void init()
    {
        Add(new KeyValuePair<string, TickerDetails> { "ABC", new TickerDetails {TickerName="ABC", LastPrice=30, Ask=40, Bid=50, Volume=60 }});
    }

    public ObservableCollection<KeyValuePair<string, TickerDetails>> getData()
    {
        return this;
    }
}

public class TickerDetails
{
    public string TickerName { get; set; }
    public int LastPrice { get; set; }
    public int Bid { get; set; }
    public int Ask { get; set; }
    public int Volume { get; set; }
} 
```

我知道我可以采用传统方式（如下所示）但想学习上述方法

```
Dictionary<int, StudentName> students = new Dictionary<int, StudentName>()
{
    { 111, new StudentName {FirstName="Sachin", LastName="Karnik", ID=211}},
    { 112, new StudentName {FirstName="Dina", LastName="Salimzianova", ID=317}},
    { 113, new StudentName {FirstName="Andy", LastName="Ruth", ID=198}}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:28:48.643

查看继承的 ObservableCollection 上的类型：

```
ObservableCollection<string, List<int>> 
```

这使您的类型成为字符串和列表的集合，而不是字符串和 TickerDetails。将继承的类型更改为字符串 TickerDetails，您将能够进行初始化。但是，您还需要更改 getData() 的签名以匹配新继承的签名，或者提供从 TickerDetails 到 List、Int 的转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:24:33.627

不是这样吗

```
Add(new KeyValuePair<string, object> { "ABC", new TickerDetails { TickerName = "tick tock", LastPrice = 10 }}); 
```

?

您只需要实例化一个新的 TickerDetails 即可。

无论如何，这不匹配，`ObservableCollection<KeyValuePair<string, List<int>>>`所以它更像是：

```
Add(new KeyValuePair<string, List<int>> { "ABC", new List<int> { 1, 2, 3, 4 }}); 
```

编辑：使用您的最新编辑，第一个示例应该可以工作。

# php - 如何使用php自动调整上传图片的大小

> ID：10130915
> 
> 赞同：2
> 
> 时间：2012-04-12T20:02:09.797
> 
> 标签：php, file-upload, autoresize

我有一个脚本；

```
 $fileName = $_FILES['userfile']['name'];
        $tmpName = $_FILES['userfile']['tmp_name'];
        $fileSize = $_FILES['userfile']['size'];
        $fileType = $_FILES['userfile']['type'];

        // get the file extension first
        $ext = substr(strrchr($fileName, "."), 1); 

        // make the random file name
        $randName = md5(rand() * time());

        // and now we have the unique file name for the upload file
        $filePath = $imagesDir . $randName . '.' . $ext;

        $result = move_uploaded_file($tmpName, $filePath);
        if (!$result) {
            echo "Error uploading file";
        exit;
    } 

if(!get_magic_quotes_gpc()) {

        $fileName = addslashes($fileName);
        $filePath = addslashes($filePath);

    } 
```

用于上传图像，但我想添加一个脚本以在上传之前将图像调整为特定大小。我怎么做？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:34:35.233

编辑：我已更新此内容以包含您的脚本元素。我从您获得文件名的地方开始。

这是一个非常快速、简单的脚本：

```
$result = move_uploaded_file($tmpName, $filePath);
$orig_image = imagecreatefromjpeg($filePath);
$image_info = getimagesize($filePath); 
$width_orig  = $image_info[0]; // current width as found in image file
$height_orig = $image_info[1]; // current height as found in image file
$width = 1024; // new image width
$height = 768; // new image height
$destination_image = imagecreatetruecolor($width, $height);
imagecopyresampled($destination_image, $orig_image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);
// This will just copy the new image over the original at the same filePath.
imagejpeg($destination_image, $filePath, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:10:44.417

好吧，在它上传之前你不能改变它的大小，但是你可以在它在服务器上之后使用 GD 库来改变它的大小。查看[GD 和图像函数列表](http://www.php.net/manual/en/ref.image.php)，了解处理图像的所有相关函数。

还有[本教程](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)将向您展示一个用于调整大小的自定义类，但除非您需要整体认为您可以专注于函数调整大小以查看它是如何完成的

# java - 如果用户不接受条款，则关闭应用程序的按钮

> ID：10130918
> 
> 赞同：0
> 
> 时间：2012-04-12T20:02:17.957
> 
> 标签：java, android

好的，我已经在网上搜索了解决此问题的方法。

我是新手，请多多包涵。

我有一个应用程序要求用户同意 EULA，这是我创建的一项活动。我有一个接受和取消按钮，当按下接受按钮时，它会将数据存储在 sharedpreference 中以表示它已被接受。

我的问题出现在取消按钮上。如果我使用对话框而不是活动，它可以很好地与 finish(); 因为它关闭了应用程序。但是如果我在活动上使用取消按钮，它会关闭该活动并继续访问应用程序的其余部分。

如果用户不接受 EULA，告诉我的按钮应该关闭应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:05:43.403

在 EULA 活动中使用**setResult**将数据返回到先前的活动，然后在先前的活动中使用**onActivityResult**来检查用户是否选择了*Accept*或*Cancel*，并相应地调用`finish()`它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:13:51.197

杀死应用程序的最佳方法是调用`android.os.Process.killProcess(android.os.Process.myPid())`

# c# - 在哪里可以找到 System.Runtime.Caching 以在 Windows 窗体应用程序中引用

> ID：10130919
> 
> 赞同：2
> 
> 时间：2012-04-12T20:02:37.527
> 
> 标签：c#, .net, winforms, .net-4.0

我正在编写一个相当简单的 Windows 窗体工具来帮助我在数据库上执行一些操作。我经常需要去数据库获取 ID，而且我无法摆脱获取 ID。

我发现了一些对它的引用，例如[这个](https://stackoverflow.com/questions/5978482/net-4-caching-support)，这都表明我应该寻找 System.Runtime.Caching，但是当我去添加引用时，没有 System.Runtime.Caching 组件。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T20:15:21.487

该项目是为 .NET 4.0 客户端配置文件配置的，它是程序集/功能的缩减子集。它专为不需要 ASP.NET 和后端功能的“客户端应用程序”而设计。它应该会导致更快的安装和部署。

您可以通过右键单击 Visual Studio 中的项目来更改目标框架，然后在“应用程序”选项卡下，将目标更改为完整的 .NET 4.0 框架。有关更改内容的屏幕截图，请参见[此处](http://i.imgur.com/WJpUh.png)。

# jquery - 从 zRSS Feed 中删除网站 URL

> ID：10130920
> 
> 赞同：-1
> 
> 时间：2012-04-12T20:02:38.687
> 
> 标签：jquery, jquery-plugins, rss

我想删除 RSS 提要源自的网站 URL。

在以下示例中： [http ://www.zazar.net/developers/jquery/zrssfeed/example.html](http://www.zazar.net/developers/jquery/zrssfeed/example.html)

我想从提要中删除**Reuters：Oddly Enough 。**我查看了 // Function to create HTML result 下的 .js 文件...但不确定要注释掉哪一行代码来删除它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:29:08.167

zRSSFeed 具有从提要中删除标题链接的选项。

例如：

```
$(document).ready(function () {
    $('#test').rssfeed('http://feeds.reuters.com/reuters/oddlyEnoughNews',{
        header: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:13:33.273

简单，肮脏的方式：

将此添加到您的 CSS 中：

`.rssHeader { display: none; }`

或者使用[JSBeautifier](http://jsbeautifier.org/)来格式化你的 Javascript 代码，这样更容易找到要取消注释的行。

还要确保您有权省略来源。

# c# - 将字符串分配给表单上的 TextBox.Text 属性会导致 NullReferenceException

> ID：10130921
> 
> 赞同：0
> 
> 时间：2012-04-12T20:02:44.290
> 
> 标签：c#, winforms, constructor, textbox, arguments

使用此代码（listApplications 是一个 ListView 控件）：

```
 private void ShowApplicationPropertiesForm() {
        String FullPath = String.Empty; 
        String Title = String.Empty;
        String Description = String.Empty;
        Boolean Legacy = false;
        Boolean Production = false;
        Boolean Beta = false;
        MyCustomListViewItemDescendant lvi = (MyCustomListViewItemDescendant)listApplications.SelectedItems[0];
        FullPath = lvi.ExePath;
        Title = lvi.Text;
        Description = lvi.ToolTipText;

        ApplicationProperties ap = new ApplicationProperties(
            FullPath,
            Title,
            Description,
            Legacy,
            Production,
            Beta);
        ap.Show();
    }

//overloaded form constructor
public ApplicationProperties(String AFullPath, String ATitle, String ADescription, Boolean ALegacy, Boolean AProduction, Boolean ABeta) {
            this.Text = String.Format("{0} Properties", ATitle);
            textBoxFullPath.Text = AFullPath;
            textBoxTitle.Text = ATitle;
            textBoxDescription.Text = ADescription;
            checkBoxLegacy.Checked = ALegacy;
            checkBoxProduction.Checked = AProduction;
            checkBoxBeta.Checked = ABeta;
        } 
```

...我得到，“System.NullReferenceException 未处理 Message=Object 引用未设置为对象的实例。”

穿过它，炸弹的线是：

```
textBoxFullPath.Text = AFullPath; 
```

textBoxFullPath 是表单上的文本框；AFullPath 具有以下类型的有效值：“Q:\What\AreYou\Gonna\Do\BabyBlue.exe”

更新：

部分解决。

这是旧的“过早分配”问题。通过将赋值从构造函数移动到 Load() 事件，它不再爆炸（下面的代码）。

但是，现在运行时表单上没有显示任何内容...???!?

```
public partial class ApplicationProperties : Form {
        String _fullPath = String.Empty;
        String _title = String.Empty;
        String _description = String.Empty;
        Boolean legacy = false;
        Boolean production = false;
        Boolean beta = false;

        public ApplicationProperties() {
            InitializeComponent();
        }

        public ApplicationProperties(String AFullPath, String ATitle, String ADescription, Boolean ALegacy, Boolean AProduction, Boolean ABeta) {
            _fullPath = AFullPath;
            _title = ATitle;
            _description = ADescription;
            legacy = ALegacy;
            production = AProduction;
            beta = ABeta;
            this.CenterToScreen();
        }

        private void ApplicationProperties_Load(object sender, EventArgs e) {
            //this.Text = String.Format("{0} Properties", _title);          
            Text = String.Format("{0} Properties", _title);
            textBoxFullPath.Text = _fullPath;
            textBoxTitle.Text = _title;
            textBoxDescription.Text = _description;
            checkBoxLegacy.Checked = legacy;
            checkBoxProduction.Checked = production;
            checkBoxBeta.Checked = beta;
        } 
```

再次更新：

添加“初始化组件（）；” 重载的构造函数成功了-谢谢，SW！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:14:49.893

我是 C# 的新手，所以如果我错了，请原谅我。

[在 MSDN](http://msdn.microsoft.com/en-us/library/sxw2ez55.aspx)上，它说你得到的错误是由于错误的引用，所以，在你的情况下，我猜`textBoxFullPath`可能不存在（你应该检查拼写）。

但是在这里，它是关于文件流的，因为您使用的是路径，[这](http://social.msdn.microsoft.com/Forums/hr/csharpgeneral/thread/b8a3f598-5809-47a2-a4e1-578892f21ff1)可能会对您有所帮助。（检查第一个答案）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:24:35.890

我认为设计者总是调用无参数构造函数，所以我倾向于不尝试为 WinForm Forms 创建自己的构造函数。

请参阅下面的调整建议 - 如果您没有到达您想要的位置，请告诉我，我会更新。

```
 public ApplicationProperties(String AFullPath, String ATitle, String ADescription, Boolean ALegacy, Boolean AProduction, Boolean ABeta)
        : this() // --> Call the parameterless constructor before executing this code
    { 
        _fullPath = AFullPath; 
        _title = ATitle; 
        _description = ADescription; 
        legacy = ALegacy; 
        production = AProduction; 
        beta = ABeta; 
        this.CenterToScreen(); // --> Maybe move this to the Shown event (not sure if you need to)
    } 
```

# oracle - 浏览器关闭时防止单用户多登录

> ID：10130922
> 
> 赞同：2
> 
> 时间：2012-04-12T20:02:53.730
> 
> 标签：oracle, jsp, session, jakarta-ee, servlets

我有一个带有“loginStatus”字段的表。现在每次用户登录时，该值设置为 1，单击注销后，该值设置为 0。现在，当用户尝试登录时，检查该字段的值，如果为 0，则用户可以登录，如果为 1 则用户无法登录。现在，如果无论如何关闭浏览器，用户将无法使用该用户 ID 登录。因为那个字段的值仍然是1（他没有点击注销按钮所以它没有改变）。除非用户关闭浏览器，否则我的应用程序运行良好。

我知道这个问题可以用不同的方式解决，但我被要求这样做。现在的问题是我在 Java EE 方面不是那么专业，所以我正在寻找多种解释帮助。

我也有一个可能的解决方案，例如：创建一个数据库触发器以将 loginStatus 值更改为 0，这将在用户登录时触发，例如 15 分钟。现在我也不知道如何创建那种触发器将在特定时间后触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:49:41.563

如果您强制执行此要求，您可以自动使帐户过期，而无需运行任何作业。

代替简单的“开/关”标志，在表上设置一个日期/时间戳，该日期/时间戳设置为当前日期/时间。时不时地，当用户向服务器发出请求时，您会将此列更新为当前时间。

如果第二个会话尝试登录，该会话应检查表上的日期/时间戳，如果超过 15 分钟，则允许登录；否则它被阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:47:43.660

您可以创建一个定期运行并使旧会话过期的数据库作业。根据您使用的 Oracle 版本，您可以使用该`DBMS_JOB`软件包或更复杂的`DBMS_SCHEDULER`软件包。 `DBMS_JOB`是一个较旧的软件包，但对于像这样相对简单和孤立的任务，学习曲线较少。例如，如果您有一个存储过程`UNLOCK_ACCOUNTS`，该过程在执行时确定要解锁和解锁哪些帐户，您可以使用`DBMS_JOB`该过程每 15 分钟运行一次

```
DECLARE
  l_jobno INTEGER;
BEGIN
  dbms_job.submit( l_jobno,
                   'BEGIN unlock_accounts; END;',
                   sysdate + interval '15' minute,
                   'sysdate + interval ''15'' minute' );
  commit;
END; 
```

当然，您也可以使用 Java 调度程序（[Quartz](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CC0QFjAA&url=http://quartz-scheduler.org/&ei=Sz6HT7nKA8Oz8AHV2sixCA&usg=AFQjCNHPsctgmtehwPa9p4ipUiTUT11M-A)是一种流行的调度程序）或`DBMS_SCHEDULER`包来做同样的事情。但是，这确实需要在某处有一个字段来存储登录时间戳，以便该`UNLOCK_ACCOUNTS`过程可以确定哪些登录发生在 15 分钟以上。

然而，一般来说，这整个架构是相当可疑的。很奇怪，您希望基于 Web 的应用程序（本质上是无状态的）拒绝登录，因为用户在某个较早的时间点打开了另一个浏览器。出于安全考虑，如果会话在一段时间内处于非活动状态，则将会话超时是相对常见的，但 15 分钟对于这类事情来说通常太短了——即使是银行网站也通常允许您比这更长的空闲时间。只要登录的时间间隔超过 15 分钟，这种方法似乎甚至不会阻止您同时从多个浏览器/计算机登录。

# .net - VB.NET 处理纯文本文件

> ID：10130923
> 
> 赞同：0
> 
> 时间：2012-04-12T20:02:59.347
> 
> 标签：.net, vb.net, visual-studio

我正在尝试使用[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)来处理一个非常大的纯文本文件（2 GB）。它是一个数据库，具有 . 的字段分隔符`SOH`和 . 的记录分隔符`STX`。

我想分离文件的字段和记录。

我通常会读取文本文件的每一行，然后使用 split 函数将字段分开。我不能使用这种方法，因为每行并不总是有分隔符。

有什么方法可以读取文件直到`STX`找到（而不是一次一行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:15:51.137

.NET 中没有“Read until string 'foo'”，您需要打开 a`FileStream`并将块读取[`FileStream.Read`](http://msdn.microsoft.com/en-us/library/system.io.filestream.read.aspx)到临时缓冲区中，然后扫描该缓冲区中的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:38:16.917

我会查看 TextFieldParser 类，看看它是否可以完成任务：

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

如果不是，我会尝试免费的 FileHelpers 库：

[http://www.filehelpers.com/](http://www.filehelpers.com/)

如果这些都不能完成这项工作，那么正如 Albin 所提到的，那么你就只能使用缓冲区读取良好的老式文件流了。

# javascript - Dust.js 和表格

> ID：10130929
> 
> 赞同：2
> 
> 时间：2012-04-12T20:03:25.580
> 
> 标签：javascript, jquery, node.js, dust.js

我是 Dust.js 的新手，我正在尝试使用记录迭代 JSON 对象并将它们中的每一个呈现到表中的一行中。下面是我用来渲染表格的脚本，但我想在渲染时遇到问题，尤其是渲染函数的模板参数。感谢我是否可以指出正确的方向

```
<div id="dustPlaceholder"></div>  
    <script id="goalTemplate">
        <table id="dustGoals">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                </tr>
            </thead>
            <tbody>
                {#friends}
                <tr>
                    <td>{name}</td>
                    <td>{age}</td>
                </tr>
                {/friends}
            </tbody>
        </table>
    </script> 
    </div>

     <script type="text/javascript">
         var src = document.getElementById("goalTemplate").innerHTML;
         var compiled = dust.compile(src);
         dust.render("goalTemplate", { friends: [ { name: "Moe", age:  37}]}, 
         function(err, out) {
          document.getElementById('dustPlaceholder').innerHTML = out;
        });   
     </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:16:04.693

如果要在客户端上渲染，则需要包含整个 Dust.js 库，因此需要包含`dust-full-0.3.0.min.js`. 此外，

```
<script src="dust-full-0.3.0.min.js"></script> 
```

另外，什么是“目标模板”？

还有你在编译什么？里面没有变量。您需要编译实际的 HTML - DIV 标记中的内容。所以包括 div 标签在内的所有内容都属于 src 变量。

此外，您必须为已编译的模板命名，以便可以访问它。我真的很困惑你之前在做什么，但是这个例子应该可以工作：

```
<script src="dust-full-0.3.0.min.js"></script>
<script type = "text/javascript">
var source = "<div id="dustPlaceholder"></div>  
    <script id="goalTemplate">
        <table id="dustGoals">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                </tr>
            </thead>
            <tbody>
                {#friends}
                <tr>
                    <td>{name}</td>
                    <td>{age}</td>
                </tr>
                {/friends}
            </tbody>
        </table>
    </script> 
    </div>";

     var compiled = dust.compile(src, goalTemplate);
     dust.render("goalTemplate", { friends: [ { name: "Moe", age:  37}]}, 
     function(err, out) {
      document.getElementById('dustPlaceholder').innerHTML = out;
    }); 
     </script> 
```

# ajax - EditorTemplate as a dynamic form

> ID：10130931
> 
> 赞同：0
> 
> 时间：2012-04-12T20:03:33.517
> 
> 标签：ajax, asp.net-mvc, mvc-editor-templates, dynamicform

I have a form that will load some fields when the page is requested and some other fields that will be loaded as the user choses one option in a dropdown. The fields that should be loaded upon selection are EditorTemplates. Is there a way I could make it work without the need to refresh the page (i.e a partial view requested via ajax) and keeping the "binding" to my viewmodel?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:37:16.000

Yes, this is possible as long as you respect the naming conventions of your input fields so that the default model binder can understand them. Here's an example of those [conventions for lists](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx). And here's a [great article](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/) illustrating how you could implement editing a variable length list.

# c# - 竖曲线公式

> ID：10130932
> 
> 赞同：-1
> 
> 时间：2012-04-12T20:03:33.747
> 
> 标签：c#, .net, math

我正在制作一个基本应用程序，它只在 C# 中沿曲线写入像素。

我在[这个网站上发现了一个看起来很有希望的公式](http://www.sd-w.com/civil/vertical_curves.html)。[我相信这个网站也在这里](http://street.umn.edu/Road/javahelp/HTML/Vertical_Curve_Calculation.htm)谈论同样的事情。

我真正不明白的是如何实现它。我尝试查看[第一个链接](http://www.sd-w.com/civil/vertical_curves.html)上的 JavaScript 代码，但我无法确定我需要提供哪些数据。涉及 PVC、PVI 或 PVT 的东西是我不明白的东西。

我要设置的示例情况是两个等级（垂直倾斜/下降）都只有 5 和 -5。假设点 1 位于 0, 0 处，点 2 位于 100, 100 处。

有人可以解释公式中的一些晦涩的变量吗？我将如何使用公式来绘制曲线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:25:23.537

通常，要在 2D 中绘制曲线，您需要更改一个参数，然后收集 x、y 点对并绘制这些对。在您的情况下，只需改变水平距离（x），然后收集相应的 y 值，然后您可以绘制这些值。

至于公式，就很不清楚了。基本上它只是一条抛物线，周围有一堆（定义不明确的）行话。要绘制此图，您希望将 x 从 0 变为 L（这并不明显，顺便说一句，我必须计算出数学，即如何改变 x 以使斜率与图中所建议的一样，无论如何，它是 0 到 L，他们应该这么说）。

我现在没有运行 C#，但希望你可以翻译这个 Python 代码：

```
from matplotlib.pyplot import plot, show
from numpy import arange

G1 = .1 # an initial slope (grade) of 10%  (note that one never uses percentages directly in calculations, it's always %/100)
G2 = -.02 # a final slope (grade) of 2%
c = 0    # elevation (value of curve when x=0, that is, y at PVC
L = 10\.   # the length of the curve in whatever unit you want to use (ft, m, mi, etc), but this basically sets your unit system
N = 1000  # I'm going to calculate and plot 100 points to illustrate this curve

x = arange(0, L, float(L)/N)  # an array of N x values from 0 to (almost) L

# calculate the curve
a = (G2-G1)/(2*L)
b = G1
y = a*x*x + b*x + c  # this is shorthand for a loop y[0]=a*x[0]*x[0] + b*...

plot(x, y)    
show()

print (y[1]-y[0])/(x[1]-x[0]), (y[-1]-y[-2])/(x[-1]-x[-2]) 
```

最后一行打印初始斜率和最终斜率作为检查（在 Python 中从数组后面的 neg 索引计数），这与我为 G1 和 G2 指定的匹配。情节看起来像：

![在此处输入图像描述](../Images/741076a5b2bbd8ef002caff233887b99.png)

至于您的要求：“我要设置的示例情况是两个等级（垂直倾斜/下降）都只有 5 和 -5。假设点 1 在 0、0 和点 2 是 100， 100."，在抛物线中，你基本上得到了三个自由参数（对应于 a、b 和 c），我认为，在这里，你过度指定了它。

什么是 PVC、PVT 和 PVI？PVC：起点，所以Y_PVC是起点的高度。PVT：终点。PVI：如果你在初始斜率 G1（即左侧曲线的切线）从 PVC 画一条线，并且类似地从 PVT，它们相交的点称为 PVI（尽管为什么有人会关心这一点是超越我）。

# node.js - 通过 Socket.io 发出 Backbone.js 模型

> ID：10130933
> 
> 赞同：1
> 
> 时间：2012-04-12T20:03:41.640
> 
> 标签：node.js, backbone.js, socket.io

**基本问题**
我试图通过 socket.emit() 发送一个对象，但该对象没有被完全发送。我可能只是误解了如何做到这一点，但这是一个例子：

```
console.log(object) 
```

结果是

```
{ length: 8,
  models:
   [ { attributes: [Object],
       _escapedAttributes: {},
       cid: 'c1',
       changed: {},
       _silent: {},
       _pending: {},
       _previousAttributes: [Object],
       lots: [Object],
       _changing: false,
       collection: [Circular],
       _callbacks: [Object] },
    ... ETC 
```

尽管

```
socket.emit(e,object); 
```

结果是 ：

```
{"name":"read:AllAuctions","args":
[[{"auctionId":"298"},{"auctionId":"381"},{"auctionId":"385"},
{"auctionId":"393"},{"auctionId":"394"},{"auctionId":"395"},
{"auctionId":"402"},{"auctionId":"800"}]]} 
```

它以后一种格式到达前端。

**更多细节**
我创建了一个服务器，它试图使用 socket.io 更新客户端骨干模型。其中一些正在使用此处指定的想法：

[http://developer.teradata.com/blog/jasonsrimpel/2011/11/backbone-js-and-socket-io](http://developer.teradata.com/blog/jasonstrimpel/2011/11/backbone-js-and-socket-io)

不同之处在于我在后端创建了主干模型。我的逻辑是共享基本模型文件，并让后端处理与持久层通信并保持“真实”数据源优化，然后响应获取这些模型/集合的请求以及自动推送更新.

一切似乎都在工作，但我应该将模型转移到前端。我是否需要扩展/覆盖 toJSON 或其他实际将其转换为传输的方法？如果是这样，我该怎么做？您能给我的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:00:44.683

我认为您应该只发送数据并在客户端重新创建对象。

因此，您可以尝试使用 Backbone Collection 的[`toJSON`](http://documentcloud.github.com/backbone/#Collection-toJSON)

```
socket.emit(e, object.toJSON()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:18:32.540

在发送之前使用 JSON.stringify 并在另一端使用 JSON.parse 反序列化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:19:06.123

我讨厌回答自己的问题，但我在另一个问题中发现了问题： [将主干模型和集合保存到 JSON 字符串](https://stackoverflow.com/questions/6753512/saving-backbone-model-and-collection-to-json-string)

本质上，我没有意识到 toJSON() 只返回模型的属性。我的模型包含其他模型的集合，所以我需要覆盖 toJSON()。

集合调用其子模型的 toJSON()。因此，我最终需要更改模型的 toJSON 函数以返回属性和它们包含的模型集合。

这是示例：

```
var Auction = Backbone.Model.extend({
  defaults: {
    auctionId : null
  },
  toJSON : function() {
    var returnObject = {};
    returnObject["auctionId"] = this.get("auctionId");
    returnObject["lots"] = this.lots;
    return returnObject;
  },
  initialize : function() {
    this.lots = new Lots;
  }
}); 
```

请注意，在我的示例中，不是返回模型的所有属性，而是返回属性“auctionId”。这对我来说似乎更安全，因为这里的另一个开发人员稍后可能会添加不需要传输的属性。话虽如此，让 returnObject 的元素包含所有属性可能是更好的做法。这只是让我在客户端重新构建模型变得更加容易。

# c# - 使用 ef 和 mvc 更新所有数据

> ID：10130936
> 
> 赞同：0
> 
> 时间：2012-04-12T20:03:43.617
> 
> 标签：c#, asp.net-mvc, entity-framework

我的数据库中有一个项目列表。我正在使用带有实体框架的 Asp.Net MVC。

我的疑问是：

我有一种方法可以更新我的数据库中的所有项目，但有一个规则！

我必须选择我的数据库中的所有用户，然后我必须划分我的数据库中的所有项目并使用用户代码更新它。

我想我必须`foreach`在我的用户中使用 a 然后我必须去更新我的项目，对吗？

存在一个更新例如 50 个项目的表单，然后我触发 db.SaveChanges！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:13:10.390

根据用户数量，这可能是您最好从OR/M 框架*之外执行的一种操作。*我不了解 EF 的详细信息，因此请先检查它是否支持开箱即用的某种“批量操作”，否则请使用查询进行直接更新。利用一些所谓的微 OR/M 也可以提供帮助。

# iphone - AVQueuePlayer 和 hpple 的设计选择

> ID：10130937
> 
> 赞同：0
> 
> 时间：2012-04-12T20:03:44.370
> 
> 标签：iphone, objective-c, avplayer, hpple, avqueueplayer

我正在设计一个使用 AVQueuePlayer 类按顺序播放 3 个文件的 iPhone 应用程序。

必须首先使用 http:// 协议从 .htm 文件中提取我需要按顺序播放的 3 个 url。为此，我正在使用 TFHpple 类，来自这里的[hpple git 项目](https://github.com/topfunky/hpple)

我的问题是我的 AVQueuePlayer 播放器必须在主线程上运行，当我尝试解析 .htm 文件时，屏幕不会响应任何触摸。

我首先需要包含在要解析的这些 .htm 文件中的 url，然后将 url 提供给 AVQueuePlayer 播放器。

我正在阅读 Apple 文档，该文档说多线程对于网络应用程序来说是一个糟糕的选择，但我需要使用 hpple 来解析 .htm 内容。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:27:09.790

如果`AVQueuePlayer`在主线程上使用但从另一个线程触发是唯一的问题，只需使用从另一个线程调用的方法来包装它的启动`performSelectorOnMainThread`。

* * *

来自[NSObject 参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)；

```
- (void)performSelectorOnMainThread:(SEL)aSelector 
                         withObject:(id)arg 
                      waitUntilDone:(BOOL)wait 
```

使用默认模式在主线程上调用接收方的方法。

***讨论***

您可以使用此方法将消息传递到应用程序的主线程。主线程包含应用程序的主运行循环，是 NSApplication 对象接收事件的地方。在这种情况下，消息是您要在线程上执行的当前对象的方法。

该方法使用通用运行循环模式（即与 NSRunLoopCommonModes 常量关联的模式）在主线程的运行循环上对消息进行排队。作为其正常运行循环处理的一部分，主线程将消息出列（假设它以一种常见的运行循环模式运行）并调用所需的方法。从同一线程多次调用此方法会导致相应的选择器排队并以与调用相同的顺序执行。

您无法使用此方法取消排队的消息。如果您想要取消当前线程上的消息的选项，您必须使用 performSelector:withObject:afterDelay: 或 performSelector:withObject:afterDelay:inModes: 方法。

* * *

此外，我建议研究[RaptureXML](https://github.com/ZaBlanc/RaptureXML)来解析 xHTML，因为它精简、快速且方便。

# sorting - 在算法中组织符号的最常见方法是什么？

> ID：10130938
> 
> 赞同：0
> 
> 时间：2012-04-12T20:03:56.077
> 
> 标签：sorting

我在一个网站上，公司按字母顺序列出，以数字开头的名称排名高于字母 A，以符号 ($) 开头的名称排名高于数字 0。我在哪里可以找到符号是按字母顺序排列的吗？例如，我问网站所有者是否！会出现在 $ 之前，他们不知道，他们说这是一些现成的软件，它只是算法的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:25:28.880

您要搜索的关键字是“字典顺序”。

通常，符号将按照它们在[ASCII 字符编码](http://www.asciitable.com/)中的顺序进行排序。如果你的字符串中有“有趣的符号”（Unicode），比如俄语的“Главное в новостях”，那么它们可能会按照它们在 Unicode 表中的数字代码点进行排序。

这与您计算机的文件浏览器排序文件名的方式相同，因此您应该已经熟悉一般规则。

* * *

在这个特定的示例中，bang 字符`!`是 ASCII`0x21`并且美元符号`$`是 ASCII `0x24`，所以 bang`!`将在排序顺序中排在第一位。

* * *

有时在此之上还包含一些“人性化”的排序功能：例如，在对文件名进行排序时，我的计算机会排序前导数字，例如：

```
1.txt
2.txt
3.txt
11.txt
100.txt 
```

这是按数值排序的，而不是普通的字典排序

```
1.txt
100.txt
11.txt
2.txt
3.txt 
```

这与人类思考数字文件名的方式不太匹配。

# php - ZF MVC - 对象和映射器

> ID：10130939
> 
> 赞同：2
> 
> 时间：2012-04-12T20:03:56.367
> 
> 标签：php, model-view-controller, oop, zend-framework

我正在将 ZF 用于 MVC 应用程序，并且对我的代码应该如何构造感到非常困惑。

我有一个程序应用程序，它基本上是 1 个巨大的长文件，其中包含我希望我的应用程序执行的所有功能......比如：getUsername($id) 等。所以现在我在 ZF 中重新制作整个东西，因为我的当前的代码库不可行，垃圾且难以调试。

我是 MVC 的新手，对它应该如何布局、应该与什么对话等感到非常困惑。所以我知道关于模板的视图和需要瘦的控制器，并且你应该有胖模型，但我是混淆了逻辑需要在哪里。

我正在制作一个游戏，里面有一些常见的对象，比如......用户、村庄、军队、地图广场、资源等。

如果我完全从理论上考虑它，我只会说：1 个用户对象包含许多村庄，每个村庄属于一个方格并包含一支军队（其中包含许多单位）。

所以我认为我的模型不应该包含任何逻辑，只是一个用于检索数据的 get 和 set 函数列表，并且用于处理的逻辑、提问应该在 Mapper 内部完成......比如：

```
$villageMapper = new VillageMapper();
// Get village from database using mapper 
$village = $villageMapper->getVillage($id, new Village()); 
```

当我想确定说两个村庄互相攻击的结果时，会在哪里做呢？我会做类似的事情：

```
$outcome = $villageMapper->determineAttackOutcome($village1, $village2); 
```

或者我会说……一个里面有一点逻辑的战斗对象？

```
$battle = new Battle();
// Add participants
$battle->addAttacker($village1)->addDefender($village2);
$outcome = $battle->performAttack();
// Save village changes cause of battle
$villageMapper->save($battle->getAttacker());
$villageMapper->save($battle->getDefender()); 
```

我有一堆 DbTable php 文件，我猜所有的数据库代码都在里面......所以我的问题是：我的 Mapper 对象是否应该只用于诸如获取和保存到数据库之类的事情？

谢谢， 多姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:37:05.470

MVC有很多不同的解释，但我是这样理解的：

模型：几乎包含与特定项目有关的所有逻辑。必须建模的每件事（在您的情况下是用户、村庄等）都有一个与之配套的模型。该模型具有取出数据和放入数据的功能（即getter 和setter）。该模型还进行错误检查等，并确保没有输入任何冲突。

观点：没有任何逻辑。在 Web 应用程序中，这实际上只是说明在页面上放置内容的位置。在某些框架中，您可以为视图提供模型（即 ASP.NET MVC3），而在其他框架（如 Savant3 for php）中，它可以提供任何内容。控制器通常为视图提供数据，但如果视图被赋予模型，它只是从模型中读取而不写入。

控制器：控制用户和模型之间的交互。当用户做某事时，控制器将其转换为模型必须做的事情。例如，如果你对程序说“请将我的角色向北移动 6 格”，控制器会说“有什么东西可以跑到这里以北 6 格吗？” 如果它看到该位置很清晰，它会告诉角色模型“向北移动 6 个空格”。完成此操作后，它将向视图发送有关因此应显示的任何内容的数据。控制器中实现的大多数实际逻辑应该是用户模型而不是模型模型。模型之间的交互可以由单个模型中的方法或封装某种行为或交互的其他模型来处理。

因此，关于您的实施：

我会制作一个战斗对象（这是一个模型），它的构造函数需要两个村庄或任何正在战斗的东西。它将有一个名为 execute 或 doBattle 的方法或控制器调用的方法，然后战斗对象将执行其逻辑来决定结果并更新战斗人员的状态（即降低 hp、给予经验等）。它会将结果返回给控制器，以便控制器知道要做什么（即，如果控制器因为模型死亡而需要忘记模型，它会告诉它）。这个返回值也可以是发送到视图以告知战斗结果的东西。

您的一些模型（例如用户、村庄等）将保存在数据库中，因此模型将知道如何将自己映射到该数据库（或者它会与知道如何映射它的另一层对话）并且还采用关心更新数据库和东西的确切实现（控制器将调用实际方法来“保存”，但模型将是唯一知道幕后发生了什么的东西）。其他模型（例如战斗）不需要存在于数据库中，因为它们只是封装了一些交互的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:28:57.560

拥有一个胖模型意味着几乎所有的逻辑都存在于模型中。

一些建议...

如果您正在进行领域驱动设计 (http://en.wikipedia.org/wiki/Domain-driven_design)，您的村庄对象可能是管理该村庄业务逻辑的聚合根。

一场战斗也可以是由两个（或更多）村庄对象组成的聚合根，或者是接受两个村庄对象并返回“结果”对象的服务。你也可以按照 $village->attack($anotherVillage) 的方式做一些事情，它可以返回一个你可能会坚持的战斗对象。

在创建和持久化这些业务对象时，我建议遵循域驱动设计和存储库模式[http://msdn.microsoft.com/en-us/library/ff649690.aspx](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:49:09.560

Datamapper 只能用于从数据库中存储和检索数据，并将该数据映射到您的域对象（用户、村庄、军队、地图方阵）。

您可以将逻辑放在域对象中，但我喜欢使用服务层。

在您的控制器中，您将执行以下操作：

```
function  attackAction() {
    $gameService->doVillageBattle($villageId1,$villageId2);
} 
```

GameService 看起来像：

```
doVillageBattle($villageId1,$villageId2) {
    $village1 = villageService->getById( $villageId1);
    $village2 = villageService->getById( $villageId2);

    if ($village1->getStrength() > $village2->getStrength()) {
         $village1->winBattle();
         $village2->looseBattle();
         $villageService->save($village1);
         $villageService->save($village2);
    }

} 
```

最后 VillageService 将拥有：

```
function save( $village ) {
    villageMapper->save( $village );
} 
```

因此控制器只与服务对话，服务彼此对话或与逻辑关联的数据映射器对话。服务承载大部分“业务逻辑”并且独立于数据库。数据映射器当然独立于服务和控制器。

# python - 从 epydoc 到 sphinx 以自动记录一个简单的 python .py 文件

> ID：10130941
> 
> 赞同：1
> 
> 时间：2012-04-12T20:04:01.013
> 
> 标签：python, python-sphinx, epydoc

即使在应用补丁之后，Epydoc 也无法正常工作，所以我正在尝试迁移到 Sphinx。

我想从一个简单的 python 文件自动生成文档：*test.py*

安装并运行*sphinx-quickstart-script后，我​​将**test.py*复制到*源*文件夹并输入：

> sphinx-build -b html .\source .\build

但它只生成最小的 html 文件，它不解析*test.py*文件

我没有主意了。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:22:31.473

您必须在您的（[https://www.sphinx-doc.org/en/master/usage/configuration.html](https://www.sphinx-doc.org/en/master/usage/configuration.html)`sphinx.ext.autodoc` ）中包含扩展名，然后才能使用指令（或此模块中的对象）记录您的模块，, ...)。`conf.py``.. automodule::``.. autoclass::``.. autofunction::`

见[https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html](https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T10:28:17.873

要自动生成必要的`.rst`文件，您可以使用[sphinx-apidoc](http://sphinx-doc.org/man/sphinx-apidoc.html)。

这使生活变得更加轻松。因此，您不必手动记录每个模块。

# jquery - Internet Explorer 中的 ajaxSetup、编码和 jQuery $.load()

> ID：10130944
> 
> 赞同：2
> 
> 时间：2012-04-12T20:04:09.093
> 
> 标签：jquery, ajax, internet-explorer, firefox, load

只使用了加载-$.load()，承载了一个页面的内容，并没有显示特殊字符。

我添加了代码：

```
$. ajaxSetup ({
'beforeSend': function (XHR) {
scriptCharset "iso-8859-1"
xhr.overrideMimeType ('application / x-www-form-urlencoded; charset = iso-8859-1');
}
}); 
```

现在它可以在 FireFox 中完美运行，但在 Internet Explorer 中......不是。

如何在 Internet Explorer 中工作？Ps：我不允许更改原始页面的编码（字符集），通过 $ 调用。加载

# asp.net - 从 datetimeoffset 获取客户端 DateTime

> ID：10130949
> 
> 赞同：0
> 
> 时间：2012-04-12T20:04:14.270
> 
> 标签：asp.net

我正在尝试将 datetimeoffset 显示为客户端日期时间。我尝试使用 datetimeoffset 的 localdatetime 属性，但看起来这只是在拉取服务器的日期时间，这是有道理的，因为我正在拉取后面代码中的值。有没有办法绑定 datetimeoffset 并将其转换为客户端日期时间？

# javascript - 添加到[disabled multi]动态选择字段的选项不贴？

> ID：10130951
> 
> 赞同：0
> 
> 时间：2012-04-12T20:04:23.940
> 
> 标签：javascript, forms

我已经使用 javascript 动态创建了选项元素。我从一个选择字段中双击一个选项，将其转移到第二个禁用的多选字段。这工作正常。当我使用新信息提交表单时出现问题。第二个选择字段不传递给 PHP。我假设它认为它是空的，但我添加的每个选项都是默认选择的，我可以直观地看到它们。我一直在寻找解决此问题的方法，但运气不佳。我能找到的一切都表明最有可能是浏览器不兼容或者元素没有被添加到表单中。如果是浏览器不兼容问题，我在所有主流浏览器上都试过了，结果都一样，所以我想知道我缺少哪一个（FF、Chrome、IE）。至于不被添加到表单中，我不明白这怎么可能。select 元素已经存在于表单中，我只是在其中添加新选项。我错过了什么，还是这不可能？

```
<script type="text/javascript" language="JavaScript">
function addModule(value, title) {
    modules = document.getElementById('modules');
    modules.options[modules.options.length] = new Option(title, value, true);
}
</script>
<form name="addModules" method="POST" action="submit.php">
<select name="moduleList" size="20" ondblclick="addModule(this.options[this.selectedIndex].text, this.value);">
<?php //dynamically created options from PHP ?>
</select>
<select id="modules" name="modules[]" multiple="multiple" size="20" DISABLED></select>
<input type="submit" value="Add Modules" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:06:31.237

不提交禁用的字段。最简单的解决方案是将其更改为只读。如果您确定将其禁用，您可以创建一个隐藏字段，并使用其中的值进行更新，但我强烈建议仅使用 readonly，然后尝试根据需要对其进行样式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:07:36.007

这是因为第二个选择被禁用，提交表单时没有发送数据。

您可以尝试将其设为只读而不是禁用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:08:40.733

这是标准的浏览器行为。在将值添加到禁用的选择列表时，您还可以将其添加到隐藏的输入字段，然后在发布的请求中访问它。

# entity-framework - 实体引用未隐式加载？

> ID：10130953
> 
> 赞同：0
> 
> 时间：2012-04-12T20:04:47.080
> 
> 标签：entity-framework

我正在使用 .NET 3.5，但无法自动加载实体引用。理想情况下，它有时似乎有效，我想要类似的东西

```
Dim relocations = ctx.EmployeeRelocations.Where(Function(o) o.Employee.EmployeeNumber = employeeNumber).ToList()
If Not relocations.Where(Function(o) o.ValidTerritory.Territory = territory).Any() Then 
```

其中 ValidTerritory 是重定位中的引用类型。但相反，当我尝试这样做时，我得到 Object Not set to an instance... for o.ValidTerritory。所以，我可以做到这一点，一切正常：

```
If Not relocations.Where(Function(o)
                             o.ValidTerritoryReference.Load()
                             Return o.ValidTerritory.Territory = territory
                         End Function).Any() Then 
```

从理论上讲，发生的事情是有道理的，但我不明白为什么我需要显式加载以及为什么这种行为似乎来来去去（也就是说，它有时会很好地加载引用而没有显式加载）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:08:09.050

尝试使用[`Include`](http://msdn.microsoft.com/en-us/library/bb738708%28v=vs.90%29.aspx)来获取该数据：

```
relocations.Include("ValidTerritory").Where(Function(o) o.ValidTerritory.Territory = territory).Any() 
```

# lua - 使用其他文件中的表

> ID：10130954
> 
> 赞同：0
> 
> 时间：2012-04-12T20:04:47.287
> 
> 标签：lua

**编辑**我得到了这个工作，我不确定这是否是正确的方法，但这就是现在的工作

我刚开始学习 Lua，我正在尝试弄清楚如何在文件之间传递表，以便我可以拥有更有条理的代码空间。我已经通读了《Lua 编程》一书，出于某种原因，我无法弄清楚我做错了什么。

我得到的问题是这个错误：

lua: Test2.lua:3: 尝试调用方法'New'（一个零值）

从这段代码：

```
--Test.lua----------------
module("Test", package.seeall)
vector = require "./Hump/vector"

Bot = {}

Bot.position  =  vector.new(0,0)

function Bot:New(object)
    object = object or {}
    setmetatable(object, self)
    self.__index = self
    return object
end

--Test2.lua------------------
require "Test"

Bot1 = Test.Bot:New()

print(Bot1.position) 
```

据我了解，这个错误意味着它找不到新的方法，它实际上是未定义的。我认为需要在路径中导入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:35:42.147

`Bot`是一个空表。

```
local B = {} -- initialize local B with new table
Bot = B -- Bot now references the same table as B

B = { position = vector.new(0,0) } -- here you create a NEW table, B ~= Bot now

function B:New(object) -- store New function in B table, Bot still empty 
```

所以你要返回一个空表。

这里根本不需要两个变量。

```
local Bot = {
    -- stuff
}

function Bot:New(object)
    -- stuff
end

return Bot 
```

# ruby-on-rails - Rails 中的观察者可扩展性（成就系统）

> ID：10130957
> 
> 赞同：0
> 
> 时间：2012-04-12T20:04:56.080
> 
> 标签：ruby-on-rails, scalability, observer-pattern

试图找到关于这个的答案，但在谷歌上没有找到任何令人信服的东西。我的应用程序中有 80 多个观察者，我想知道这是否会在未来以任何方式（流量、可伸缩性、草率的应用程序、实时性、响应性等）导致潜在的麻烦（“它总是在运行”）。

如果有？任何优雅的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:37:52.657

您似乎需要大量的后期任务。如果您不介意开销，您可能想要查看后台工作人员。由于观察者是同步的，后台工作人员也会让您的应用保持响应。您可能希望查看 beanstalkd 及其轻量级后台工作程序的客户端，如果它们失败，唯一要付出的代价就是失败条件。你需要以某种方式在你的逻辑中处理它。

# mysql - 将 CSV 插入 mysql

> ID：10130963
> 
> 赞同：1
> 
> 时间：2012-04-12T20:05:24.697
> 
> 标签：mysql, csv, phpmyadmin

这可能是我问过的最愚蠢的问题。但我无法弄清楚这一点。我正在尝试将 CSV 导入到我的 mysql 中。但我无法让这些区域正确：

用以下方式分隔的列：用以下方式括起来的列：用以下方式转义的列：用以下方式终止的行：

这是 mycsv 中的示例行：AA|Armed Forces Americas|US|United States

我会在每个中放置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:21:29.130

如果您有与文件的列配置匹配的表，您要做的是：

```
LOAD DATA INFILE '<full file path>`
INTO TABLE <tbl_name>
FIELDS TERMINATED BY '|' LINES TERMINATED BY '\n'; 
```

如果某些字段可能包含`|`，则应将这些字段括起来`"`，然后最后一个子句变为：

```
FIELDS TERMINATED BY '|' ENCLOSED BY '"' TERMINATED BY '\n' 
```

# php - 升级 Magento 数据库的最快和最简单的方法是什么？

> ID：10130968
> 
> 赞同：0
> 
> 时间：2012-04-12T20:05:34.057
> 
> 标签：php, mysql, magento, upgrade

具体来说，我需要从版本 1.9.11 升级到 1.11.20。我已经对代码进行了所有更改，我只需要一些如何升级数据库（甚至可能是开箱即用的兼容）。

我知道每个核心模块的目录中都有升级脚本，但是有没有办法一次运行所有升级。我不想去每个核心模块，而必须单独运行脚本。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:11:16.317

数据库升级脚本会在您在代码升级后首次访问您的网站时自动运行。代码版本保存在数据库中，并在每次请求时进行检查。如果检测到代码升级，Magento 将从以前的代码版本开始执行所有数据库更新脚本。从理论上讲，这应该有效，并且对于小型升级也有效。但是在进行主要版本升级时要小心。

# git - 如何在 Git 中完全删除 .svn 文件

> ID：10130970
> 
> 赞同：14
> 
> 时间：2012-04-12T20:05:39.510
> 
> 标签：git, svn, dvcs

我正在尝试为我的仓库删除所有 .svn 文件和文件夹。我正在使用 Git。但是我从服务器上下载了源代码，该服务器带有所有讨厌的 .svn 文件。我不想犯这些。我已经创建了一个 .gitignore 文件来完全忽略 .svn 文件，但这不起作用。

我已经在网络和 Stack Overflow 上搜索并阅读了大量答案。我尝试使用

```
find . -type d -name '.svn' -exec git rm -rf {} \; 
```

完全删除 .svn 文件，但它们仍然存在。我正在使用 Source Tree 并尝试了 Git Tower，但所有 .svn 文件仍显示为待处理。

也许我之前不小心提交了一个 .svn 文件，所以它仍然出现。任何如何完全忽略它们或删除它们的线索都是上帝发送的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T20:12:51.760

```
find . -name '.svn' -type d -print0 | xargs -0 rm -rf
git commit -a -m "Deleting all .svn folders and files" 
```

您还可以在之后更新 .gitignore 文件。

# regex - 在awk中的反斜杠（“\”）分隔符上拆分字符串？

> ID：10130972
> 
> 赞同：3
> 
> 时间：2012-04-12T20:05:43.557
> 
> 标签：regex, unix, awk

我正在尝试根据某些分隔符将字符串拆分到文件中。但我无法正确实现它...这是我的代码如下。

```
awk 'var=split($2,arr,'\'); {print $var}' file1.dat 
```

这是我的样本数据家伙。

```
Col1 Col2
abc  123\abc
abcd 123\abcd 
```

期望输出：

```
Col1 Col2
abc  abc
abcd abcd 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:23:15.980

您不需要调用拆分。只需`\\`用作字段分隔符：

```
echo 'a\b\c\d' | awk -F\\ '{printf("%s,%s,%s,%s\n", $1, $2, $3, $4)}' 
```

**输出：**

```
a,b,c,d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:15:47.437

样本数据和输出是我对您要求的最佳猜测

```
 echo '1:2\\a\\b:3' | awk -F: '{ 
     n=split($2,arr,"\\")
     # print "#dbg:n=" n
     var=arr[3]
     print var
     }' 
```

**输出**

```
b 
```

回想一下，它`split`返回它发现要拆分的字段数。您可以取消注释调试行，您将看到返回的值 3。

另请注意，对于我的测试，我必须使用 2 个 '\' 字符来处理 1 个。我认为您不需要在文件中使用它，但如果这不适用于文件，请尝试根据需要向数据中添加额外的“\”。我尝试了几种关于如何使用“\”的变体，这似乎是最直接的。欢迎其他人发表评论！

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:25:03.907

您需要转义要拆分的反斜杠。您可以`split`使用这样的双引号来执行此操作：`"\\"`

此外，您可以采用数组切片来使您的代码更具可读性（并避免定义另一个 var）。这应该适合你：

`awk 'NR==1 { print } NR>=2 { split($0,array,"\\"); print $1,array[2] }' file1.dat`

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:51:40.510

正如提到的一些评论，您嵌套了单引号。切换一组使用双引号应该可以解决它。

```
awk 'var=split($2,arr,"\"); {print $var}' file1.dat 
```

我宁愿通过管道连接到另一个 awk 命令而不是使用 split。我不知道一个比另一个更好，这只是一种偏好。

```
awk '{print $2}' file1.dat | awk -F'\' '{...}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T00:14:44.323

```
awk '{sub(/123\\/,"")}1' file

Col1 Col2
abc  abc
abcd abcd 
```

# qt - 如何设置/读取 QSqlRelationalTableModel 列属性和约束？

> ID：10130978
> 
> 赞同：3
> 
> 时间：2012-04-12T20:06:10.823
> 
> 标签：qt, qt4.7, qsqltablemodel

有没有办法检查 a 中每一列的属性和约束`QSqlRelationalTableModel`？例如，我想询问我的`QSqlRelationalTableModel`对象某个列是否可以包含空值，或者该列有效的数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:52:26.910

您需要为`QSqlField`模型的每一列获取一个值，该值由下式给出

```
QSqlRecord record = model->database().record(model->tableName());
QSqlField field = record.field(columnIndex); 
```

然后您将能够检查一个字段是否可以为空`QSqlField::requiredStatus()`（如果驱动程序支持查询该属性）并使用`QSqlField::type()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T15:53:12.797

根据上面 alexisdm 的回答，我编写了这个简单的代码片段来输出表中每个字段的属性。将其张贴在这里以节省其他有兴趣的人的打字。

我还发现了一个问题：如果您使用`table_model::record()`或者`table_model::record(int)`您对某些属性（对我而言）得到了意想不到的结果，例如，`isAutoValue`似乎总是返回 false，即使对于在数据库中指定为自动增量字段的字段也是如此。但是，您确实得到了一个真正的值`typeID()`（尽管我无法确定 typeID() 是什么），而`typeID()`使用`model->database().record(model->tableName())`.

```
 QSqlRecord record = table_model->database().record(table_model->tableName());
  // the following get isAutoValue() wrong; but have a real typeID()
  //QSqlRecord record = table_model->record();  
  //QSqlRecord record = table_model->record(table_model->rowCount() - 1);
  qDebug() << "********** table" << table_model->tableName() << "*********";
  for (int i = 0; i < table_model->columnCount(); ++i) {
    QSqlField field = record.field(i);
    qDebug() << "---------- field" << i << field.name() << "--------";
    qDebug() << "default value" << field.defaultValue();
    qDebug() << "is auto value" << field.isAutoValue();
    qDebug() << "is generated" << field.isGenerated();
    qDebug() << "is null" << field.isNull();
    qDebug() << "is read only" << field.isReadOnly();
    qDebug() << "is valid" << field.isValid();
    qDebug() << "length" << field.length();
    qDebug() << "precision" << field.precision();
    qDebug() << "required status" << field.requiredStatus();
    qDebug() << "type" << field.type();
    qDebug() << "type id" << field.typeID();
    qDebug() << "value" << field.value();
  } 
```

# java - MigLayout的push、grow、fill有什么区别？

> ID：10130988
> 
> 赞同：8
> 
> 时间：2012-04-12T20:06:40.360
> 
> 标签：java, swing, layout, miglayout

我看到`grow`并接受了一个可选的加权参数，但除此之外： 、和`push`之间的真正区别是什么？文档对此不是很清楚。`grow``fill``push`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T00:46:03.823

`push`据我所知，只影响间隙，而不影响元素。如果一个组件设置为`fill`，这意味着将所有*子组件*设置为`grow`，同时`grow`直接影响该组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T11:58:05.897

约束确实会`push`影响元素。这只是它使差距变得贪婪的背景之一。

答案有点复杂。我在最近的一个[问题](https://stackoverflow.com/questions/25010068/miglayout-push-vs-grow/25014713#25014713)中提供了它。

# asp.net - 来自 ClientSideEvents 和 WebMethod 的 ASP.NET 验证会员电子邮件

> ID：10130989
> 
> 赞同：0
> 
> 时间：2012-04-12T20:06:40.730
> 
> 标签：asp.net, devexpress

我有 ASPxGridview，我想使用 ClientSideEvents 检查电子邮件之前是否已经在编辑表单中注册过。

有什么帮助解决这个问题吗？

## aspx 部分

这是javascript部分

```
function OnEmailValidation(s, e) {
            var error = "";
            var tfld = trim(e.value);
            var illegalChars = /^\w+([-+.'''']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
            if (!illegalChars.test(tfld)) {
                $get("spanEmail").innerHTML = "invalid email";

            } else {
                PageMethods.CheckEmail(e.value.toString(), OnCheckEmail);

                // how to check OnCheckEmail before continue
                //if(email already registered) {
                  // return false
                //}

                $get("spanEmail").innerHTML = "";
            }
            return true;
        }

function OnCheckEmail(unavailable) {
        if (unavailable == true) {
            $get("spanEmail").innerHTML = "already registered";
            $get("spanEmail").style.color = "red";
        }
        else if (unavailable != true) {
            $get("spanEmail").innerHTML = "Available";
            $get("spanEmail").style.color = "#76EB69";
        }
    } 
```

## aspx.cs

```
col_Email.PropertiesTextEdit.ClientSideEvents.Validation = "OnEmailValidation";
grid.Columns.Add(col_Email);

[WebMethod]
public static bool CheckEmail(string email)
{
    System.Threading.Thread.Sleep(200);
    if (Membership.FindUsersByEmail(email) != null)
    {
        if (Membership.FindUsersByEmail(email).Count <= 0)
        {
            return false;
        }
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

[这是我在Filip](https://stackoverflow.com/users/169195/filip)建议之后的最终代码， 但我有一个小问题：
当我使用
(async: false) 和 cntr.SetIsValid(false);
控件不应用该操作
，但如果我使用
(async: true) 和 cntr.SetIsValid(false);
控件应用动作
为什么？

我想使用 async: false

```
function OnEmailValidation(s, e) {
var illegalChars = /^\w+([-+.'''']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
var spanEmail = document.getElementById("spanEmail");

var obj = GetObj('txt_Email');
var cntr = aspxGetControlCollection().Get(obj.id);

if (!illegalChars.test(e.value)) { 
    spanEmail.innerHTML = "Invalid Email";
    spanEmail.style.color = "red";

    cntr.SetIsValid(false);

} else {
    $.ajax({
        type: "POST",
        async: false,
        url: "myweb_service.asmx/CheckEmail",
        data: "{'email':'" + e.value.toString() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(res) {
            if (res.d == "true") {
                spanEmail.innerHTML = "Email register before";
                spanEmail.style.color = "red";

                cntr.SetIsValid(false);
            }
            if (res.d == "false") {
                spanEmail.innerHTML = "Available";
                spanEmail.style.color = "#76EB69";

                cntr.SetIsValid(true);
            }
        }
    });
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:10:38.060

您需要在服务器端设置一个 Web 服务来检查电子邮件是否已经存在。然后，您将使用 JavaScript AJAX（最好是 jQuery 或 Prototype 之类的库）在验证方法期间查询 Web 服务。

完成这一切将是一项艰巨的工作。祝你好运。有关详细信息，请参阅以下链接之一：

*   [http://msdn.microsoft.com/en-us/library/bb532367.aspx](http://msdn.microsoft.com/en-us/library/bb532367.aspx)
*   [http://msdn.microsoft.com/en-us/library/t745kdsh.aspx](http://msdn.microsoft.com/en-us/library/t745kdsh.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:14:15.560

您可以使用 jQuery 调用 PageMethods（`PageMethods.CheckEmail`用此代码替换调用）：

```
$.ajax({
    type: "POST",
    async: false,
    url: "<PageName>.aspx/CheckEmail",
    data: "{" + e.value.toString() + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(res) {
        if (res.d)
            return false;
    }
}); 
```

替换`PageName`为您的页面名称。
小心同步 ( `async: false`) ajax 调用。他们将阻止您的页面，直到请求完成。
如果`res.d`不返回结果，或者您只想详细说明已发布的代码，请查看以下链接：

*   [使用jQuery直接调用aspnet ajax页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)
*   [aspnet ajax 版本之间的重大变化](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)

# sql-server - 多维数据集中的 Microsoft SSAS 平均计算

> ID：10130990
> 
> 赞同：1
> 
> 时间：2012-04-12T20:06:42.840
> 
> 标签：sql-server, sql-server-2008, ssas, mdx, bids

我对 SSAS 中的多维数据集开发非常陌生。我正在使用 Microsoft BIDS 2008。

我已经建立了一个小立方体，如下所述：

```
 India   Pakistan GrandTotal 
Apr   6      10          16
May   5       6          11 
```

我想在总计旁边添加一个称为平均值的字段

```
 India   Pakistan GrandTotal Average
Apr   6      10          16        8
May   5       6          11        5 
```

对此的任何输入都会有所帮助。平均 5.5 被截断为 5。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:09:00.073

创建一个计算成员，将当前度量除以度量组中的成员计数（通常在添加度量组时会自动创建计数度量）。

可以通过该计算的 FORMAT_STRING 属性或使用 MDX 函数来处理截断。

有关计算成员的更多信息：

[http://technet.microsoft.com/en-us/library/ms166568(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms166568(v=sql.105).aspx)

# c# - Java 和 C# 中的数学“pow”返回的结果略有不同？

> ID：10130997
> 
> 赞同：9
> 
> 时间：2012-04-12T20:07:16.097
> 
> 标签：c#, java, math, floating-accuracy

我正在将程序从 C# 移植到 java。我已经面对一个事实

爪哇

```
Math.pow(0.392156862745098,1./3.) = 0.7319587495200227 
```

C＃

```
Math.Pow( 0.392156862745098, 1.0 / 3.0) =0.73195874952002271 
```

最后一位数字会导致进一步计算中的足够差异。有什么方法可以模拟 c# 的 pow 吗？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-12T20:16:07.103

只是为了确认 Chris Shain 写的内容，我得到了相同的二进制值：

```
// Java
public class Test
{
    public static void main(String[] args)
    {
        double input = 0.392156862745098;
        double pow = Math.pow(input, 1.0/3.0);            
        System.out.println(Double.doubleToLongBits(pow));
    }
}

// C#
using System;

public class Test
{
    static void Main()
    {
        double input = 0.392156862745098;
        double pow = Math.Pow(input, 1.0/3.0);            
        Console.WriteLine(BitConverter.DoubleToInt64Bits(pow));
    }
} 
```

两者的输出：4604768117848454313

换句话说，双精度值是*完全相同*的位模式，您看到的任何差异（假设您会得到相同的结果）都是由于*格式*而不是值的差异。顺便说一句，该双精度的确切值是

```
0.73195874952002271118800535987247712910175323486328125 
```

现在值得注意的是，浮点运算中可能会发生明显奇怪的事情，特别是当优化在某些情况下允许 80 位运算但在其他情况下不允许时，等等。

正如 Henk 所说，如果最后一两个方面的差异导致您出现问题，那么您的设计就被破坏了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-12T20:11:57.633

如果您的计算对这种差异很敏感，那么您将需要其他措施（重新设计）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-12T20:23:37.947

> 最后一位数字导致进一步计算中存在足够的差异

这是不可能的，因为*它们是同一个数字*。A`double`没有足够的精度来区分`0.7319587495200227`和`0.73195874952002271`; 他们都表示为

```
0.73195874952002271118800535987247712910175323486328125. 
```

不同之处在于四舍五入：Java 使用 16 位有效数字，而 C# 使用 17 位。但这只是*显示*问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-12T20:13:09.817

Java 和 C# 都从 Math.Pow 返回一个 IEEE 浮点数（特别是双精度数）。您看到的差异几乎肯定是由于您将数字显示为十进制时的格式。基础（二进制）值可能是相同的，而您的数学问题在其他地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T20:16:45.373

浮点运算本质上是不精确的。您声称 C# 的答案“更好”，但它们都不是那么准确。例如，Wolfram Alpha（确实更准确）给出了这些值：

[http://www.wolframalpha.com/input/?i=Pow%280.392156862745098%2C+1.0+%2F+3.0%29](http://www.wolframalpha.com/input/?i=Pow%280.392156862745098%2C+1.0+%2F+3.0%29)

如果第 17 位的单位差异导致后来的计算出错，那么我认为你的数学有问题，而不是 Java 的`pow`. 您需要考虑如何重构您的计算，以便它们不依赖于如此小的差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T22:07:23.517

十七位数的精度是*任何*IEEE 浮点数所能做到的最好的，无论语言如何：

[http://en.wikipedia.org/wiki/Double-precision_floating-point_format](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)