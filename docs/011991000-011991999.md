# StackOverflow 问答 11991000-11991999

# ruby - Sinatra 没有在 Chrome 上通过重定向保持会话

> ID：11991005
> 
> 赞同：11
> 
> 时间：2012-08-16T15:50:49.897
> 
> 标签：ruby, session, google-chrome, sinatra

Sinatra 没有通过 Chrome 上的重定向来保持我的会话。它正在创建一个全新的会话，我丢失了所有以前的会话数据。

作为一个例子（类似于[Sinatra 文档](http://www.sinatrarb.com/intro#Browser%20Redirect)），我正在做这样的事情：

```
enable :sessions

get '/foo' do
  session[:user_id] = 123
  session[:session_id] # "ABC", for example

  redirect to('/bar')
end

get '/bar' do
  # this is "DEF" when responding to Chrome (wrong), 
  # but "ABC" when responding to Firefox or Safari (right)
  session[:session_id]

  # this is nil when responding to Chrome (wrong),
  # but 123 when responding to Firefox or Safari (right)
  session[:user_id]
end 
```

我认为这与不同浏览器在重定向响应后如何响应处理会话有关。有没有人见过类似的东西，或者对如何在仍然使用会话的同时解决这个问题有任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T21:31:41.680

将此添加到您的主应用程序文件中：使用 Rack::Session::Cookie, :key => 'rack.session', :path => '/', :secret => 'some-random-string'

添加后，您应该能够分配 session['whatever'] 并使其按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-26T03:46:49.153

通过这样做`enable :sessions`，您只需访问每个请求的会话。Sinatra 无法保留对上一个调用（您的重定向）的引用，因为它被视为另一个请求。

因此，长话短说：

`set :session_secret, "SecureRandom.new(10) generated thing" enable :sessions`

始终`enable :sessions`与秘密一起使用，否则每次 rack 看到请求时都会重新创建会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:07:44.723

请尝试*禁用*所有自定义 cookie 管理扩展是 Chrome（如果有）。**之后在Developer tools** → **Network**中检查标题。应该看到“Cookie：”字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T07:57:29.257

我认为只是因为您没有设置`:session_secret`，请参阅我的回答[here](https://stackoverflow.com/a/39161140/2256108)

# javascript - jQuery在更改时获取选定的下拉值

> ID：11991007
> 
> 赞同：11
> 
> 时间：2012-08-16T15:50:58.613
> 
> 标签：javascript, jquery

我正在尝试获取更改下拉列表的值（然后在第二个下拉列表中更改值）。

**编辑：**感谢所有回复，我已更新以添加 () 但代码没有返回任何内容，不返回 null 或未定义，只是一个空白警报窗口

但是，当我提醒它时， attr(value) 是未定义的。

关于我缺少什么的任何想法？

这是我的代码：

```
<script type="text/javascript">
            $(document).ready(function() {

                var roomID = "0"
                $('.dropone').load('ajaxdropdown.aspx');
                $('.droptwo').load('ajaxdropdown.aspx?drpType=room&roomid=' + roomID);

                $('.dropone').change(function() {
                var ts = new Date().getTime();
                alert($(this).val)

                    $(".droptwo").empty();
                    $(".droptwo").load("ajaxdropdown.aspx?drpType=room&roomid=" + $(this).attr("value") + "&ts=" + ts);
                });

            });        
        </script> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T15:52:45.683

[`val`](http://api.jquery.com/val/)是一种方法，而不是一种属性。

像使用它一样 `val()`

如果你在很多地方使用它，我会将它分配给一个局部变量，然后再使用它。

您也可以使用该[`$.now()`](http://api.jquery.com/jQuery.now/)功能获取唯一的时间戳。它等于 DategetTime();

```
$('.dropone').change(function() {    
    var item=$(this);
    alert(item.val())
    $(".droptwo").empty();
    $(".droptwo").load("ajaxdropdown.aspx?drpType=room
                        &roomid=" +item.attr("value") + "&ts=" + $.now());
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T15:53:29.880

```
$('.dropone').change(function() {
  var val = $(this).val(); 

  // OR

  var val = this.value;
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T15:52:01.830

您必须使用方法而不是属性来获取值。用这个：

```
alert($(this).val()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:52:04.233

将圆括号添加到您的 val：`alert($(this).val())`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T13:43:45.680

您还可以从下拉列表中获取自定义属性，如下所示；

```
 $('.someclass').change (function () { 
              var val = this.value;
              alert(val);                                       //selected value

               var element = $(this).find('option:selected');  // assign selected element
               var myTag = element.attr("aTag");              // get attribute by name
               alert(myTag);
    });

<option name='somename' id='someid' aTag='123' value='XYZ'>XYZ</option> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-12T09:11:09.793

[在此处](https://www.freakyjolly.com/how-to-get-selected-value-in-dropdown-list-using-jquery-javascript/)检查**jQuery**和**Javascript**方法以在下拉菜单中获取单个/多个选定值

**演示[链接](https://freakyjolly.com/demo/getDropDownValue_JavaScript_jQuery.html)**

jQuery 方法：从选择框中获取选定值的方法：

**HTML**

```
<select id="singleSelectValueDDjQuery" class="form-control">
    <option value="0">Select Value 0</option>
    <option value="8">Option value 8</option>
    <option value="5">Option value 5</option>
    <option value="4">Option value 4</option>
</select>

<input type="text" id="textFieldValueJQ" class="form-control"
    placeholder="get value on option select"> 
```

**jQuery**

```
$("#singleSelectValueDDjQuery").on("change",function(){
    //Getting Value
    var selValue = $("#singleSelectValueDDjQuery").val();
    //Setting Value
    $("#textFieldValueJQ").val(selValue);
}); 
```

从选择框中获取**选定值选项文本的方法：**

**HTML**

选择值 0 选项值 8 选项值 5 选项值 4

```
<input type="text" id="textFieldTextJQ" class="form-control"
                placeholder="get value on option select"> 
```

**jQuery**

```
$("#singleSelectTextDDjQuery").on("change",function(){
    //Getting Value
    var selValue = $("#singleSelectTextDDjQuery :selected").text();
    //Setting Value
    $("#textFieldTextJQ").val(selValue);
}); 
```

# javascript - 使用 javascript 中的正则表达式从字符串中过滤出百分比

> ID：11991014
> 
> 赞同：0
> 
> 时间：2012-08-16T15:51:12.363
> 
> 标签：javascript, regex

我有以下字符串值： £-155 (-2.2%)

除此之外，我希望能够提取任何数字并且可能/可能不包含“-”减号。所以上面是：-2.2

我还需要知道该值是否具有上述形式的百分比......最终代码中将使用条件语句。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:32:15.553

为什么要对这么简单的事情使用正则表达式？为什么不直接抓取字符串中的最后一个字符并检查它是数字还是 %。

同样，如果要删除它，只需使用 .substr() 方法从字符串中删除最后一个字符：

[http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:32:18.160

[你基本上想要一个匹配一个数字的正则表达式，这个数字之前](https://stackoverflow.com/questions/7690476/regex-for-decimal-number-with-limits)已经[回答过](https://stackoverflow.com/questions/4690986/regex-needed-to-match-number-to-2-decimal-places) [很多](https://stackoverflow.com/questions/9840462/php-and-preg-match-regex-to-pull-number-with-decimal-out-of-string) [次](https://stackoverflow.com/questions/1831419/whats-the-shortest-regex-that-can-match-non-zero-floating-point-numbers-with-an) 了。

然后，一旦你有了它，只需添加一个可选的百分比符号 ( `%?`) 并检查它是否存在于匹配的字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:32:26.190

```
// An optional sign and either an integer followed by an optional fraction
// or a decimal fraction.
var numberRe = '[+-]?(?:[0-9]+(?:[.][0-9]*)?|[.][0-9]+)';

// Matches a number (in group 1)
// and an optional percentage in parentheses (in group 2).
var quantity = new RegExp(
    '(' + numberRe + ')(?:\\s*[(]\\s*(' + numberRe + ')\\s*%\\s*[)])?'); 
```

如果你匹配，`quantity`你应该得到第 1 组中的数字和第 2 组中的任何百分比。

> ```
> JSON.stringify(quantity.exec('£-155 (-2.2%)'))
> ["-155 (-2.2%)", "-155", "-2.2"] 
> ```

要将它们作为数字获取，请使用`parseFloat`或一元`+`，如

> ```
> var match = quantity.exec('£-155 (-2.2%)');
> var n = +match[1], pct = match[2] != null ? +match[2] / 100 : NaN;
> alert('n = ' + n + ', whole = ' + (pct ? n / pct : "unknown")); 
> ```

# php - 在 wordpress 中使用 php 模板有条件地根据自定义字段转换更改类和 rel

> ID：11991015
> 
> 赞同：0
> 
> 时间：2012-08-16T15:51:16.380
> 
> 标签：php, jquery, wordpress, wordpress-theming

这是一个插件主题问题。我的插件适用于我制作的这个模板页面。（修改）

原始文件[product-image.php](http://snippi.com/s/9yyxtpc)。我修改后的文件[product-image-360.php](http://snippi.com/s/by9o7on)

我在产品帖子中添加了 3 个自定义字段。

*   `magnified_image_filename`- 为插件提供运行所需的文件名；
*   `magnified_image`- 给出图像的路径；
*   `360`- 类别字段用于识别帖子，以查看是否在帖子中启用漂亮照片。

这段代码非常聪明，可以让您关闭全局分配类的功能，即`prettyPhoto`. 这允许我`prettyPhoto`从特色图像中启用并在我为帖子和产品图像包含 360 yes 的类字段时将其关闭。

```
 global $post,$woocommerce;
    $threesixty = get_post_meta($post->ID, '360', true);
    if ($threesixty == '') {
    wp_register_script( 'prettyPhoto', get_template_directory_uri() . '/includes/js/jquery.prettyPhoto.js', array( 'jquery' ) ); 
    } 
```

但是我现在有两个`product-image.php`模板。如何将它们组合成一个条件语句，根据 360 的自定义字段更改 rel 和 class 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:29:47.843

好吧，如果他们没有 '360' 字段，那么我们将假设 get_post_meta($post->ID, '360', true); 将返回假。

```
<a 
  itemprop="image" 
  href="<?php echo wp_get_attachment_url( get_post_thumbnail_id() ); ?>" 
  class="<?php echo (TRUE == ($threesixty = get_post_meta($post->ID, '360', true))) ? 'Magic360' : 'somethingElse';?>" 
  rel="<?php echo (TRUE == ($threesixty = get_post_meta($post->ID, '360', true))) ? 'filename:'.$split_name.'-{col}.jpg; magnify:true; magnify-filename:'.get_post_meta($post->ID, 'magnified_image_filename', true).'-{col}.jpg' : 'somethingElse';?>"
>
  //img stuff here
</a> 
```

# r - Amazon EC2 / RStudio：有没有办法在不保持连接的情况下运行作业？

> ID：11991017
> 
> 赞同：1
> 
> 时间：2012-08-16T15:51:26.183
> 
> 标签：r, amazon-ec2, rstudio

我有一个长期运行的工作，我想使用`EC2`+运行`RStudio`。我设置了`EC2`实例，然后设置`RStudio`为我的网络浏览器上的一个页面。我需要物理移动我用来设置连接的笔记本电脑，并在一天中运行 Web 浏览器，我的工作被终止，`RStudio`但实例仍在`EC2`仪表板上运行。

有没有办法在不保持活动连接的情况下保持工作运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T16:04:46.153

是否必须通过 RStudio 启动/控制？

如果你让你的任务成为一个“普通”的 R 脚本，通过 Rscript 或更小的方式执行，那么你可以从 shell 运行它们......然后到达

*   使用老式工具`nohup`，如`batch`或`at`来控制后台运行

*   使用或之类`screen`的工具来*维护一个或多个*启动作业的会话，并在闲暇时连接/断开/重新连接。`tmux``byobu`

 *RStudio Server 以类似的方式工作，但 AFAICT 将您限制为每个用户/机器的单个用户 - 这对于交互式工作非常有意义，但如果您需要多个会话，则会受到限制。

FWIW，我非常喜欢带有 tmux 的 byobu。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:12:25.473

我最初担心它需要保持实时连接是不正确的。事实证明，错误是由于内存不足造成的，它恰逢与互联网连接断开。

实例从 AWS 仪表板启动，并从那里停止或终止。只要它仍在运行，就可以通过将公共 DNS 复制到网页上的地址栏并再次登录来从 RStudio 选项卡访问它。*

# .net - 检查用户是否在运行旧代码？

> ID：11991019
> 
> 赞同：-2
> 
> 时间：2012-08-16T15:51:28.727
> 
> 标签：.net, deployment

我们有一个为用户开发的内部应用程序。我们将所有代码存放在 unc 共享中。我们有一个加载器应用程序，他们最初运行该应用程序以将所有适当的文件下载到他们的 PC 上，然后他们在本地运行所有内容。由于各种原因，我们在用户运行旧代码时遇到了问题。在某些情况下，他们的所有文件都是旧的，而在其他情况下，它可能只是一个文件。有什么好方法可以检查程序的所有关联文件，看看它们是否正在运行任何文件的旧版本？我们希望能够通知用户他们需要重新部署以获取最新更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:54:38.383

[您可以考虑使用ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)之类的东西来部署应用程序。

实际上，这在应用程序周围放置了一个包装器，该包装器被配置为回调服务器以查看是否存在较新版本的应用程序。如果是，则下载并替换客户端计算机上应用程序的现有版本。

像这样的系统的好处是您不必对您的应用程序做任何事情。您只需通过 ClickOnce 部署它即可完成所有工作。

其他系统可从其他供应商处获得，这些供应商的工作原理相同。

# python - argparse.add_argument() 默认总是使用...有时

> ID：11991021
> 
> 赞同：2
> 
> 时间：2012-08-16T15:51:36.993
> 
> 标签：python, argparse

这个简化的脚本足以导致问题......只需检查“-d”参数是否为有效目录，如果未提供则提供默认值......

```
#!/usr/bin/python

import os
import argparse

def valid(dir):
   subdir = dir + '/Desktop'
   if not os.path.exists(subdir):
      raise argparse.ArgumentTypeError("%s is not a valid directory" % subdir)
   return dir

parser = argparse.ArgumentParser(description="blah blah blah")
parser.add_argument('-d', '--directory', help='directory to check', default=os.getcwd(), type=valid)
args = parser.parse_args() 
```

默认参数是什么并不重要，当我运行脚本时，它使用默认值，无论我在命令行上输入什么，并抛出一个未捕获的异常，如下所示：

```
Traceback (most recent call last):
  File "./parsertest.py", line 15, in <module>
    args = parser.parse_args()
  File "/usr/lib/python2.7/argparse.py", line 1688, in parse_args
    args, argv = self.parse_known_args(args, namespace)
  File "/usr/lib/python2.7/argparse.py", line 1710, in parse_known_args
    default = self._get_value(action, default)
  File "/usr/lib/python2.7/argparse.py", line 2239, in _get_value
    raise ArgumentError(action, msg)
argparse.ArgumentError: argument -d/--directory: /home/users/jrice/Desktop/Desktop is not a valid directory 
```

运行良好，我的意思是，当它应该处理 ArgumentTypeError 时，如果我执行以下操作，只需打印 msg：

1.  删除 'default=' 参数
2.  不要将 '/Desktop' 附加到 dir，所以 subdir = dir，或者只检查 dir 本身
3.  从我的主目录运行脚本！？！？

详细说明：如果我执行上述任何操作，即使 '-d' 无效，一切都很好。这是输出，这就是我想要的。

```
>./Desktop/parsertest.py -d blah
usage: parsertest.py [-h] [-d DIRECTORY]
parsertest.py: error: argument -d/--directory: blah/Desktop is not a valid directory 
```

为什么 os.getcwd() + '/Desktop' 应该有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:02:24.973

我相信您的“类型检查”过于激进。您将不存在的目录视为无效类型，这不是`argparse`人们所想的那样。在您的情况下，默认值可能不是混淆 argparse 的“有效类型”。查看以下代码及其输出：

```
#!/usr/bin/python

import os
import argparse

def valid(dir):
   print "Checking " + dir
   subdir = dir + '/Desktop'
   #if not os.path.exists(subdir):
   #   raise argparse.ArgumentTypeError("%s is not a valid directory" % subdir)
   return dir

parser = argparse.ArgumentParser(description="blah blah blah")
parser.add_argument('-d', '--directory', help='directory to check', type=valid, default=os.getcwd())
args = parser.parse_args() 
```

`/home/user/Desktop`从with执行它`-d /home/user`会给出：

```
Checking /home/user/Desktop
Checking /home/user 
```

如您所见，`argparse`首先转换默认值，然后才转换命令行给定值。

要解决上述问题，请确保默认值始终为“有效类型”，或者在`argparse`完成后检查目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:04:33.123

Argparse 尝试将默认参数转换为赋予它的任何类型。

```
import argparse

parser = argparse.ArgumentParser(description="blah blah blah")
parser.add_argument('-i',default="1",type=int)

args = parser.parse_args([])
print args          # Namespace(i=1)
print type(args.i)  # <type 'int'> 
```

这种设计选择的原因对我来说有点奇怪，但它可能是为了让您可以将字符串传递给`default`就像在命令行上获取它们一样，然后帮助将被正确格式化。

注意我真的不喜欢将验证代码传递给`type`关键字参数，即使他们在[文档](http://docs.python.org/library/argparse.html#type)中这样做。该参数是将输入字符串转换为其他类型。如果你真的想在解析时进行验证，你应该考虑使用 custom `Action`，但对于这个例子，它可能是最简单的：

```
#...snip...
parser.add_argument('-d', '--directory', help='directory to check')
args = parser.parse_args()
args.directory = valid(args.directory if args.directory is not None else os.getcwd())
#the following should work too. 
#args.directory = valid(args.directory if args.directory else os.getcwd()) 
```

# json - ASP.Net MVC3 JSON 到模型

> ID：11991022
> 
> 赞同：2
> 
> 时间：2012-08-16T15:51:37.650
> 
> 标签：json, asp.net-mvc-3

谁能带我看一些示例，展示如何将传入的 JSON 转换为 MVC3 中的模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:57:21.250

框架已经为您处理好了。

所以你定义模型：

```
public class MyViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Complex Complex { get; set; }
    public IEnumerable<Foo> Foos { get; set; }
}

public class Complex
{
    public int Id { get; set; }
}

public class Foo
{
    public string Bar { get; set; }
} 
```

然后是采用此模型的控制器操作：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    ...
} 
```

最后，您使用与您的视图模型结构匹配的 JSON 请求来锤击此控制器操作：

```
$.ajax({
    url: '@Url.Action("SomeAction")',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({
        id: 1,
        name: 'john smith of course, why asking?',
        complex: {
            id: 3
        },
        foos: [
            { bar: 'the bar' },
            { bar: 'the baz' },
        ]
    }),
    success: function(result) {
        alert('hooray');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:54:05.107

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

我会添加更多，但示例代码也在首页上。

# html - 防止css：悬停在元素上

> ID：11991030
> 
> 赞同：0
> 
> 时间：2012-08-16T15:52:10.677
> 
> 标签：html, css

假设我有这个 HTML：

```
<div class="SomeClass">test</div>
<div class="SomeClass" id="SomeID">test</div>
<div class="SomeClass">test</div> 
```

有了这个 CSS

```
.SomeClass{color:blue;}
.SomeClass:hover{color:red} 
```

我希望悬停效果不适用于`SomeID`div。我可以用 jQuery 做到这一点，但我想知道是否有更简单的方法可以只用 CSS 来做到这一点。

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:54:29.490

CSS是按顺序解析的，这意味着如果在你定义之后

```
.SomeClass:hover { color: red; } 
```

然后定义一个规则

```
#SomeId.SomeClass:hover { color: blue; } 
```

那应该“覆盖”最初的`color: red;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:54:02.297

只需将另一个规则分配给 id 为 SomeID 的 div。这将覆盖另一条规则。

```
.SomeClass{color:blue;}
.SomeClass:hover{color:red}
#SomeID:hover{color:blue} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ttvNw/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:55:25.493

只需覆盖样式：

```
#SomeID:hover {
    color:blue;
} 
```

或者，您可以使用：

```
.SomeClass:not(#SomeID):hover {
    color:red;
} 
```

然后更容易改变它，但更少的浏览器支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:57:24.010

让我们看一下链接伪类的特殊性：

记住：**LAHV** ( `:link`, `:active`, `:hover`, `:visited`)。

首先，为了正确级联，让我们将以下内容分配给`.SomeClass`：

```
.SomeClass:link, .SomeClass:active, .SomeClass:visited { color: blue; }
.SomeClass:hover { color: red; } 
```

接下来，让我们指定`#SomeID`：

```
#SomeID:hover { color: blue; } 
```

`id`总是优先于`class`.

# javascript - 在 mongodb 和 expressjs 中验证事物的问题

> ID：11991034
> 
> 赞同：0
> 
> 时间：2012-08-16T15:52:24.140
> 
> 标签：javascript, node.js, mongodb, express

我在使用 expressjs 和 mongodb 验证事物时遇到了一些问题。

这是注释类

```
// mongodb configuration
var Server = require('mongodb').Server,
  Db       = require('mongodb').Db,
  ObjectID = require('mongodb').ObjectID,
  server   = new Server('localhost',27017,{auto_reconnect:true}),
  db       = new Db('fantacalcio',server);
// mongodb end configuration

var UserModel = function() {

  // max and min username length
  this.username_max = 15;
  this.username_min = 6;
};

// create funcion
UserModel.prototype.create = function(req,callback) {

  // opening connection
  db.open(function(err,db){
    if(!err){

      // choosing the collection
      db.collection('user',function(err,collection){
          if(err){
            console.log(err);
          }
          else{

            // Passing the req.body data and a callback to the validate function (see below) 
            this.validate(req,function(results){

              // if the validate function return true, this will insert the username into the db
              if(results==true){
                collection.insert({username : req.body.username}, function(err,result){
                  if (!err) {
                    db.close();
                    callback(200);
                  }
                }); 
              }
              else{
                callback(results);
              }
            });
          }
      });
    }
  });

};

// validating function
UserModel.prototype.validate = function(req,callback) {

  var errors=0;
  var detail_error;
  var username = req.body.username;

  // check the username
  if(!username || username < this.username_min || username>this.username_max){
    errors++;
    detail_error +="this is an error";
  }

  // will execute the callback witin the error
  if(errors>0){
    callback(detail_error);
  }

  // if there arent error will return true
  else{
    callback(true);
  }
}; 
```

我得到的错误是

```
TypeError: Object #<Object> has no method 'validate' 
```

参考线：

```
 this.validate(req,function(results){ ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:44:40.733

有问题的行作为回调的一部分执行，因此在调用回调时`this`不会引用`UserModel`实例。的第一行`UserModel.prototype.create`应该声明一个变量（通常称为`self`但有些人更喜欢`that`）并分配`this`给它。然后`this`用它替换回调中的任何情况。

请记住，这`this`实际上是一个关键字，而不是一个变量，并且它的行为不像闭包中的变量。如果要在闭包中保留其值，则必须将其复制到实际变量中。

# jquery - jqgrid addRow saveRow beforeSend

> ID：11991037
> 
> 赞同：0
> 
> 时间：2012-08-16T15:52:36.600
> 
> 标签：jquery, ajax, jqgrid, jqgrid-inlinenav

我有一个 jqGrid，我正在向其中添加一个用户可以编辑的新行。他们有一个按钮来保存新行。我需要在发送之前访问 ajax，以便在调用中加入一些安全性。这适用于网格的其他几个场景，但不是这个。不知道发生了什么。

这是我添加新行的方式：

```
 jQuery("#myTable").jqGrid('addRow',{
      rowID : "new_row",
      initdata : {},
      position :"first",
      useDefValues : false,
      useFormatter : false,
      addRowParams : {extraparam:{}}); 
```

这是我的保存按钮执行的代码：

```
 jQuery("#myTable").jqGrid('saveRow',"new_row", {
          "url": "{{path('recording_create')}}",
          "mtype": "POST",
          "succesfunc": function(response) {
              return true; 
          }
      }); 
```

我试过这个，但是，它没有被解雇。我认为保存一行时会调用它：

```
$.extend($.jgrid.defaults,                 
                {
                ajaxRowOptions: { 
                    beforeSend: function () {
                        alert('Before Row Send'); // not called
                     }
                    },
                }
            ); 
```

我也试过这个，但是，我认为这只是在表单编辑上调用？

```
 $.extend($.jgrid.edit, {
                ajaxEditOptions: {
                    beforeSend: function (jqXHR, settings) {
                        alert('Before Row Send');  // not called
}}}); 
```

有什么想法吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:24:35.397

你可以尝试使用

```
$.extend($.jgrid.inlineEdit, {
    ajaxRowOptions: {
        beforeSend: function (jqXHR, settings) {
            alert('Before Row Send');
        }
    }
}); 
```

我希望它会奏效。

**更新**：对不起，但正确的代码

```
$.extend($.jgrid.defaults, {
    ajaxRowOptions: {
        beforeSend: function () {
            alert('Before Row Send');
        }
    }
}); 
```

您已经包含在问题的文本中。它应该工作。重要的是仅验证代码将在创建网格*之前执行。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:33:10.387

奥列格，谢谢你的想法。但是，那没有用。但是，以下方法确实有效：

```
 $.ajaxSetup({
        beforeSend: function (jqXHR, settings) {
           alert('Before Row Send');               
      }}); 
```

不过，问你一个问题，你怎么知道***可以***按照你上面扩展的方式扩展什么？

谢谢，斯科特

# javascript - 添加帮助弹出窗口

> ID：11991043
> 
> 赞同：0
> 
> 时间：2012-08-16T15:52:59.437
> 
> 标签：javascript, jquery

我想在我的 Web 应用程序中添加有关某些项目的“帮助”信息。用户将光标移至该项目，帮助将显示在弹出框或小窗口中。有没有人有一个很好的例子来显示在 jquery 或 javascript 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:57:08.140

您的问题很开放，但您可能有一个最初隐藏的 DIV，其内容和位置将是动态的：

```
<div id="tooltip" style="display:none; position: absolute; z-index: 1000"></div> 
```

z-index 属性是为了保证 DIV 的可见性。当然，该值取决于您是否有其他具有更高 z-index 的元素。

然后你可以创建几个 JS 函数：一个用于显示 div，另一个用于隐藏它：

```
function showTooltip (content, x, y) {
    $('#tooltip')
        .html(content)
        .css({left: x, top: y})
        .show();
}
function hideTooltip()
{
    $('#tooltip').hide();
} 
```

这些函数将由鼠标事件触发，例如 (mouseenter, mouseleave, ...)。当然，DIV 的美感可以通过 CSS 进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:57:55.180

以下是 JQuery 工具提示插件列表：

*   [醉醺醺的](http://onehackoranother.com/projects/jquery/tipsy/)
*   [qTip2](http://craigsworks.com/projects/qtip2/)
*   [提示提示](http://code.drewwilson.com/entry/tiptip-jquery-plugin)
*   [电源提示](http://stevenbenner.github.com/jquery-powertip/)
*   [线索提示](http://plugins.learningjquery.com/cluetip/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:10:41.440

这也是为新用户创建游览的好插件

[jquery-joyride](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)

# mysql - 使用线程和消息构建收件箱查询

> ID：11991045
> 
> 赞同：0
> 
> 时间：2012-08-16T15:53:04.700
> 
> 标签：mysql

所以我有两个表来处理消息`threads`和`messages`.

```
messages:
id | thread | user_from | user_to | text | created

threads:
id | user_from | user_to | created | status 
```

我想构建一个查询来获取我的线程：

1.  该线程的最新消息
2.  该线程的 id

到目前为止，我一直在通过首先获取所有线程（当然有适当的限制）然后分别获取每个线程的最新消息来处理这个问题。

有什么想法吗？

**更新：**

表关系：`messages`。`thread`= `threads`。`id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:55:43.590

```
select t.id, max(m.id) as last_message_id
from threads t
left outer join messages m on m.thread = t.id
group by t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:58:59.410

在我的头顶上：

```
SELECT t.id, m.* FROM threads t
INNER JOIN messages m ON m.thread = t.id
WHERE m.id = 
   (SELECT id FROM messages WHERE thread = t.id ORDER BY id DESC LIMIT 1); 
```

[编辑] 经过测试，它似乎工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:03:02.247

试试这个

```
SELECT  a.id     AS ThreadID, 
        c.`text` AS LatestMessage
FROM    threads a 
            INNER JOIN
            (
                SELECT  thread, max(created) maxCreated
                FROM    messages
                GROUP BY thread
            ) b on a.id = b.thread 
            INNER JOIN messages c
                    on a.id = c.thread AND
                       b.maxCreated = c.created 
```

# android - 真棒字体在安卓浏览器上不起作用

> ID：11991052
> 
> 赞同：8
> 
> 时间：2012-08-16T15:53:25.357
> 
> 标签：android, browser, fonts, icons, font-awesome

我正在使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，它是为与 Twitter Bootsrap 一起使用而设计的。

Galaxy S（型号 # GT-I9000M）手机上的 Android（2.1 版）浏览器不显示图标。它将它们显示为垂直矩形，类似于您在此处看到的：

![在此处输入图像描述](../Images/e91ead6b86a9e35250bd5ddc6fda4b18.png)

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T05:52:20.260

这是对@font-face 的全面支持：http: [//caniuse.com/fontface](http://caniuse.com/fontface)

2.1 浏览器根本不支持它，直到 4.0 才正确支持。2.2-3部分支持是指使用`local()`，完全不支持。如果您尝试获取本地字体或使用它来强制用户下载您的字体（笑脸黑客），那么字体在现有的 Android 浏览器上根本不起作用。

编辑：[如何知道字体（@font-face）是否已经加载？](https://stackoverflow.com/questions/12312323/how-to-know-if-a-font-font-face-has-already-been-loaded/12316349#12316349)你可以使用这个 jQuery 插件来检测 Font-Awesome 是否已经加载。如果它没有（由于错误的字体文件或由于电话缺乏支持），那么您可以添加一个类，将背景图像（图标）添加到 div/span/whatever （不能`<i>`已应用图标的标签）。

[你可以在这里看到一个演示。](http://pulse-dev.com/files/stackoverflow/fontfacedelay/index4.htm)

# sql - 存储过程的查询时间越来越长。- 执行与 SP_EXECUTESQL

> ID：11991054
> 
> 赞同：2
> 
> 时间：2012-08-16T15:53:29.733
> 
> 标签：sql, sql-server, linq-to-sql, stored-procedures

我正在使用一个存储过程来返回一组关于 varbinary 列中的数据的行。在我的一生中，我无法弄清楚为什么当我使用`sp_executesql`而不是`exec`.

查询`sp_executesql`时间：<1s, 1s, 2s, 4s, 8s, 24s (etc), 直到最终问题“消失”几分钟并且查询*总是*~0.006s

查询时间`exec`总是<500ms。

起初，我认为这是 Linq2Sql 的问题，但是当我们在 SQL Management Studio 中运行 Linq 生成的查询时，我们得到了相同的结果。

这是 sproc 的主体（经过严格审查）

请注意，该`varbinary`列没有被拉出

```
select DF.FileID, 
       DF.DerpFkGuid, 
       DF.DerpName, 
       DF.[FileName],
       DF.FileSize as 'FileSizeBytes', 
       ISNULL(DFA.File_Size_Bytes_String,'Unknown') as 'FileSizeFriendly', 
       CONVERT(nvarchar(30),DF.FoundDate,120) as 'FileDateUploaded', 
       CONVERT(nvarchar(30),DF.FileDateCreated,120) as 'FileDateCreated',
       CONVERT(nvarchar(30),DF.FileDateLastModified,120) as 'FileDateModified',
       CASE WHEN ISNULL(dfa.Derp_ID,'00000000-0000-0000-0000-000000000000')='00000000-0000-0000-0000-000000000000' THEN 0 ELSE 1 END as 'AttachedToDerp', 
       ISNULL(dfa.Derp_ID,'{00000000-0000-0000-0000-000000000000}') as 'Derp_ID'
from DerpFiles DF   
inner join DFDerpDerp DFdd      on DFdd.DerpName = DF.DerpName
left outer join Derp_Files_Attachments dfa      on dfa.FileID =  DF.FileID
where WR.UserName = @UserName and DF.DuplicateFileDetected=0 
```

**这是始终运行 < 500ms 的代码**

```
USE [DerpDatabase]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[DerpSproc]
        @UserName = N'derp',
        @DomainName = N'derp'

SELECT  'Return Value' = @return_value

GO 
```

**这是运行 1s ,2s ,4s, 8s , 24s 等的代码**

```
declare @p5 int
set @p5=0
exec sp_executesql N'EXEC   @RETURN_VALUE = [dbo].[DerpSproc] 
                            @UserName = @p0, 
                            @DomainName = @p1',                         
                            N'@p0 nvarchar(4000),
                            @p1 nvarchar(4000),
                            @RETURN_VALUE int output',
                            @p0=N'derp',
                            @p1=N'derp',
                            @RETURN_VALUE=@p5 output
select @p5 
```

据我所知，调用存储过程的两种方式基本相同。唯一的区别是`sp_executesql`vs`exec`

在没有关键字的情况下，它似乎`exec`也会产生同样增加的查询时间。`go`我不能确定，因为我不知道当我尝试添加时查询是否恰好缓存`go`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:39:22.143

这可能是参数嗅探问题。有时，当您将参数传递给过程时，SQL 很难弄清楚如何有效地使用它们。尝试在过程中将参数设置为局部变量，然后在 where 子句中使用局部变量。

[参数嗅探](http://www.sqloptimizationsschool.com/Troubleshooting/Parameter%20Sniffing.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:06:41.220

我们通过将`VARBINARY`字段从文件表移动到它自己的专用表来解决我们的问题。如果查询时间不长，我们就无法在文件表和元数据表之间添加适当的关系。

这只发生在我们将查询作为存储过程执行时。`WHERE`当我们执行与带有过滤器子句的视图相同的精确查询时，不会发生这种情况。我们受过良好教育的理论是 SQL Server 2012 有一个错误（？）导致`VARBINARY`我们连接的表中的字段在我们的查询中被读取，即使它没有包含在我们的`SELECT`语句中。

# php - PHP中的随机延迟计时器

> ID：11991055
> 
> 赞同：2
> 
> 时间：2012-08-16T15:53:37.743
> 
> 标签：php, random, timer

我想让一个 php 守护程序进入睡眠状态（使用 System_Daemon::iterate()），所以它在一个小时内随机运行最多 20 次。也许最小距离会很聪明，所以它在前半小时不会运行 20 次，在后半小时不会运行 0 次。

我有点卡在这里，不知道如何从这个开始，任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:55:12.400

您可以使用 cron 作业将脚本设置为经常运行。

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

* * *

... crontab：

```
0 9 * * * /path/to/bashscript 
```

在 /path/to/bashscript 中：

```
#!/bin/bash
maxdelay=$((1*60))  # every hour, converted to minutes
for ((i=1; i<=20; i++)); do
    delay=$(($RANDOM%maxdelay)) # pick an independent random delay, 20 times
    (sleep $((delay*60)); /path/to/phpscript.php) & # background a subshell, then run the php script
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:00:04.117

我想出了一种可能的解决方案，我还没有尝试过，所以它主要包含语法或逻辑错误。因为它作为守护进程运行，所以它周围有一个永无止境的循环。

```
// 3600 seconds or one hour
$timeframe=3600;
// run max 20 times in $timeframe
$runtimes=20;
// minimum delay between two executions
$mindelay=60;
// maxium delay between two executions
$maxdelay=240;

if ($cnt % $runtimes != 0) {
    $delay = rand($mindelay,$maxdelay);    
    System_Daemon::iterate($delay);    
    $sum += $delay;
    $cnt++;
} else {
    //final delay till the $timeframe
    if ($sum < $timeframe) {
        System_Daemon::iterate($timeframe - $sum); 
    }  
    $sum=0;
} 
```

它并不完美，你浪费了一些时间，但我想它会完成这项工作。任何意见？

# c++ - Allegro 5 加载数据文件

> ID：11991057
> 
> 赞同：3
> 
> 时间：2012-08-16T15:53:47.617
> 
> 标签：c++, fonts, allegro5

我正在使用 Allegro 5 库。我想从 dat 文件加载字体。在 Allegro 以前的版本中，有一些有用的方法。例如“load_datafile”、load_dat_font。我怎样才能在 Allegro 5 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:18:13.250

Allegro 5 最直接的东西是 physfs 插件。有用的链接：

*   [http://www.allegro.cc/manual/5/physfs.html](http://www.allegro.cc/manual/5/physfs.html)

*   [http://icculus.org/physfs/](http://icculus.org/physfs/)

使用它，您可以（例如）将 Zip 存档加载为文件夹。因此，您可以使用 Zip 文件，而不是使用数据文件。

有关示例，请参见手册。简而言之，它看起来像：

```
PHYSFS_init(argv[0]);
PHYSFS_addToSearchPath("data/foo.zip", 1);
// ...
al_set_physfs_file_interface(); 
```

然后将来对`al_load_bitmap()`(etc) 的调用将查看该 zip 文件的内部。

如果您想做除此之外的任何事情，则需要编写自己的自定义文件界面。这不是很困难，但我认为您不妨使用 Zip 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:57:22.523

Allegro 5 根本没有数据文件。所以你不能。

如果您有要加载的内容，则必须使用常规 fileIO 或 Allegro 5 的 fileIO 函数实际加载它。无论哪种方式，您都必须自己完成繁重的工作。

Allegro 5 比以前的版本低。这意味着它的便利功能较少。

# objective-c - 带有常量问题的预编译头文件

> ID：11991059
> 
> 赞同：8
> 
> 时间：2012-08-16T15:53:49.270
> 
> 标签：objective-c, xcode, constants, prefix, undeclared-identifier

我的项目中有一些常量文件“Constants.h”，它们包含在 Prefix.pch 文件中，可供项目中的所有类使用。它们只包含一堆#define 语句。

我的类无法识别这些常量（没有自动完成功能），并且每次使用它们时 Xcode 都会给我“未声明的标识符”错误。但是，当我运行项目时，一切正常（设置为忽略错误）。

有什么办法可以摆脱这些警告？#pragma 在前缀文件中忽略它们还是什么？我尝试了很多选项，包括在构建设置中将“预编译前缀标头”设置为 NO。

有任何想法吗？

编辑：我尝试删除派生数据和清理/删除构建文件夹无济于事。

可能值得注意的是，我的项目中有 3 个目标，并且该项目中有另一个项目。

此外，一些#imports 导入普通类。就像 UIFont 上的类别扩展和 Analytics 类。这会影响它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T21:26:32.507

为了解决这个问题，我必须在目标的构建设置中将“预编译前缀标头”标志更改为 NO。通过这样做，您将失去通过缓存已编译的头文件实现的任何构建性能，但在我的情况下，我的 Prefix Header 非常小，因此我不会在构建所需的时间内看到任何影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:12:57.203

尝试删除项目派生数据。Xcode 有时需要重新索引您的项目以删除诸如此类的“错误”。

组织者 > 项目 > 你的项目

单击派生数据行右侧的“删除”按钮。

立即退出 Xcode，然后重新打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-11T14:57:58.603

我让 PCH 文件导入带有很多宏的 .h 文件（具体来说，我使用[MJGAvailability](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Utilities/MJGAvailability.h)标头，当我使用比我的部署目标更新的功能时会发出警告）。更换：

```
#import "MJGAvailability.h" 
```

和

```
#include "MJGAvailability.h" 
```

为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:06:11.870

我在我的一个目标中有一个预处理器宏，我从“预处理器宏”移动到“未在预编译头文件中使用的预处理器宏”，这解决了问题。

# javascript - 在 Chrome 的 Ominbox 上按下回车键时触发 Keyup 事件侦听器

> ID：11991062
> 
> 赞同：8
> 
> 时间：2012-08-16T15:53:58.490
> 
> 标签：javascript, google-chrome, jquery

在 chrome 浏览器中，使用此代码段时：

```
 $(document).on('keyup', function(){
    alert("Hey");
  }); 
```

每次我`enter`在 url 栏中按下（例如，当我剪切和粘贴页面本身的 url 时），事件监听器都会触发。为什么会这样？

**编辑：**

这让我感到惊讶，因为 url bar 不在`document`（也许在`window`？）并且 Firefox 没有这种行为。当我查找时`e.target`，Chrome Inspector 显示`body`。

我认为这可能是由事件冒泡引起的，所以我尝试了这个：

```
 $(document).on('keyup', function(e){
    e.stopPropagation();
    alert("Hey");
  }); 
```

但它不起作用。如何防止它被触发？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T05:46:56.927

发生这种情况是因为一旦您在多功能框中按 Enter 键，焦点就会转到页面。如果您尝试使用 进行相同的`onkeydown`操作，多功能框不会改变任何内容，因为正如您所说，它不是文档的一部分。过滤多功能框的错误事件的一种方法是检查每个`keyup`人都有一对keydown。

```
<script>
var down = false;
document.addEventListener('keydown', function (){
    down = true;
}, false);

document.addEventListener('keyup', function (){
    if(down === true){
        alert('It was from the page!');
    }
    else{
        alert('Omnibox. Ignore it.');
    }
    down = false;
}, false);

</script> 
```

~~[演示。](http://pastehtml.com/raw/c9d7kwd2j.html#typeHereAndHitEnter)~~

~~制作您自己的 HTML 页面并最好尝试一下，因为 PasteHTML.com 会将其填充到 iframe 中。为了让它在那里正常工作，首先单击文本以赋予 iframe 焦点。~~

[演示。](http://dl.dropbox.com/u/32930499/chromeOmniEnter.html#TypeHereAndHitEnter) 请记住使用鼠标专注于多功能框和类型，而不是键盘快捷键。（这会触发 onkeydown 事件，造成误报）

**更新：**从 Chrome 35 开始，这种情况不再发生。但是，我不知道他们修复了哪个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T07:07:07.943

Chrome 的解决方案很简单：使用`keypress`而不是`keyup`. 这并非在所有情况下都有效（IE），因此您可能必须添加一个条件来根据浏览器切换类型。但是，这将解决您的问题。

请注意，查找特定键码可能会否定您的问题。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:35:42.027

您可以过滤键码...如果有帮助...13 是输入键

```
$(document).on('keyup', function(event){
  if( parseInt(event.keyCode,10) !== 13 ){
      alert("Hey");
  } 
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T15:48:09.450

一个可能的解决方案是稍微延迟“keyup”事件处理程序注册。这将跳过似乎在 Chrome 和 Safari 中发生的第一个“虚假”触发器。

```
$(function() {
    setTimeout(
        function() {
            console.log("Delayed event attachment");
            $(document).bind('keyup', log);
        }, 10);
});

function log(e) {
    console.log(e.target.localName);
} 
```

# jquery - 删除时识别项目在选择列表中的位置

> ID：11991063
> 
> 赞同：0
> 
> 时间：2012-08-16T15:54:00.717
> 
> 标签：jquery, html

我使用 jquery 从选择列表中添加/删除元素，例如：

```
var options = $('#example').attr('options');
options[options.length] = new Option('Item1'); 
```

有没有办法保存已删除项目的索引（位置）并在该位置添加新项目？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:01:22.440

您的代码正在调用某种函数，对我们其他人来说根本没有多大意义，但是要删除一个元素并用另一个元素替换它，您总是可以这样做：

```
$('option', 'select').eq(3) //select fourth option and replace it
                     .replaceWith($('<option id="newOption">New Stuff</option>')); 
```

[**小提琴**](http://jsfiddle.net/MQqD8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:08:47.710

继续使用 adeneo 代码，以防您想删除具有特定值的选项

```
 $('#somename').find('option[value=7]').replaceWith($('<option id="newOption"> New Stuff</option>')); 
```

网页部分

```
 <select name="somename" id="somename">
    <option value="1"> 1 </option>
    <option value="2"> 2 </option>
    <option value="3"> 3 </option>
    <option value="4"> 4 </option>
    <option value="5"> 5 </option>
    <option value="6"> 6 </option>
    <option value="7"> 7 </option>
    <option value="8"> 8 </option>
</select> 
```

# function - 使用函数返回其他函数的参数（在python中）

> ID：11991069
> 
> 赞同：0
> 
> 时间：2012-08-16T15:54:19.723
> 
> 标签：function, parameters, python-3.x

所以，我想知道是否可以在不使用变量的情况下将一个函数的返回信息用作另一个函数的参数。我尝试使用的函数有两个参数（和 self 因为它是类的一部分），另一个函数返回两个值。我能得到的最好的是：

```
import ccrlib
authinfo = ccrlib.getauth()
session = ccrlib.CCRSession(authinfo[0], authinfo[1]) 
```

否则我将不得不运行 getauth 两次：

```
import ccrlib
session = ccrlib.CCRSession(ccrlib.getauth()[0], ccrlib.getauth()[1]) 
```

这显然是效率较低的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:55:29.960

您可以使用星号解包：

```
session = ccrlib.CCRSession(*ccrlib.getauth()) 
```

# android - AsyncTask 不显示 ProgressDialog

> ID：11991071
> 
> 赞同：4
> 
> 时间：2012-08-16T15:54:21.363
> 
> 标签：android, android-asynctask, progressdialog

我正在使用 AsyncTask （我在我的主要活动中开始）来加载一些数据：

```
Context context = VehicleTabView.this;
ProgressDialog progressDialog = new ProgressDialog(context);
progressDialog.setMessage("Loading...");
new LoadingVehicles(context, progressDialog).execute(null, null, null); 
```

这是异步类：

```
package com.example.schedule_vehicles;

import com.example.utils.VehicleNames;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;

    // Showing a ProgressDialog once loading the list of vehicles is completed using an AsyncTask
    public class LoadingVehicles extends AsyncTask<Void, Void, Void> {
    Context context;
    ProgressDialog progressDialog;

    public LoadingVehicles(Context context, ProgressDialog progressDialog) {
        this.context = context;
        this.progressDialog = progressDialog;
    }

    @Override
    protected void onPreExecute() {
        progressDialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        new VehicleNames(context);

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
    }
} 
```

ProgressDialog 未在屏幕上显示的问题。

我键入 Log.d，以查看程序是否正在经历所有阶段 - onPreExecute、doInBackground、onPostExecute，它是否正在经历所有阶段并完成我需要的工作。**但是**ProgressDialog 没有显示。看了很多关于这个东西的资料，貌似PRE和POST执行都是由主线程启动的，被DOINBACKGROUND方法阻塞了，这也是看不到ProgressDialog的原因。我试图找到一些答案，这是如何解决的——但没有成功。

如果有人遇到这种情况，请分享您的经验。多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:59:22.200

尝试 ：

```
ProgressDialog progressDialog = new ProgressDialog([Activity Name].this); 
```

让我知道这是否解决了问题，否则我会深入了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:00:32.850

你的代码对我来说看起来不错。您对 Asynctask 的理解是正确的，并且您对它们的使用也似乎是正确的。我唯一能想到的就是你必须确保你也在 UI 线程上调用 execute()。从发布的代码中，我无法判断您所处的环境。

确保您可以将“this”作为上下文传递。这将告诉您是否在 UI 线程上。

```
ProgressDialog progressDialog = new ProgressDialog(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:41:53.933

通常在创建 ProgressDialog 时，您使用静态方法 ProgressDialog.show(context, title, message)。这将创建并显示消息并返回对对话框的引用。

onPreExecute 和 onPostExecute 在主线程上调用，不会被在另一个线程上运行的 doInBackground 阻塞。onPreExecute 在 doInBackground 之前调用，onPostExecute 在之后调用。

这是一些示例代码：

```
public static class InitializeTask extends MyAsyncTask<String, String, Response<Object>> {

    private Activity activity;
    private ProgressDialog dialog;

    public InitializeTask(Activity activity) {
        this.activity = activity;
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(activity, null, "Initializing...");
    }

    @Override
    protected void onPostExecute(Response<Object> result) {
            if (dialog != null && dialog.isShowing())
                dialog.dismiss();
    }

    @Override
    protected Response<Object> doInBackground(String... params) {

    }

    @Override
    protected void attach(Activity context) {
        this.activity = context;
        dialog = ProgressDialog.show(context, null, "Initialize...");
    }

    @Override
    protected void detach() {
        if (dialog.isShowing())
            dialog.dismiss();
        activity = null;
    }
} 
```

附加和分离是我自己引用交叉方向更改的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T16:12:48.880

也许你错过了*上下文*。

```
ProgressDialog progressDialog = new ProgressDialog(this); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T15:58:10.473

您将 ProgressDialog 传递给任务，只需在启动 AsyncTask 之前显示（）它，而不是从 AsyncTask 中。

# c# - 使用 PropertyBuilder 和 SetConstant 设置属性的默认值

> ID：11991075
> 
> 赞同：1
> 
> 时间：2012-08-16T15:54:33.697
> 
> 标签：c#, .net, reflection, properties, reflection.emit

我有一段非常简单的代码

```
var propertyBuilder =
    typeBuilder.DefineProperty(upperName, PropertyAttributes.None, propertyType, new[] { propertyType });
propertyBuilder.SetConstant(Convert.ChangeType(propertyInfo.Default, propertyType)); 
```

之后，当我调用`CreateType()`方法并创建类的实例时，我试图检查分配了默认值的属性的值，但我看不到任何更改。

创建类的实例后，我无法使用`SetValue`方法，因为所有构造的类型都存储在元数据字典中，并且可以从代码中的不同位置使用。

任何建议为什么`SetConstant`方法不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:58:56.133

`SetConstant()`不做你认为它做的事。它设置与属性关联的“默认值”，但该值实际上并未在任何地方使用（尽管您可以使用 检索它[`GetConstantValue()`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getconstantvalue.aspx)）。

要从属性的 getter 中实际返回一些常量值，您需要创建 getter 方法并将其 IL 设置为返回值。但是由于您不能在程序集本身中存储任意类型，因此通常很难做到这一点。例如，如果属性是`int`，它将如下所示：

```
var getMethodBuilder = typeBuilder.DefineMethod(
    "get_" + upperName, MethodAttributes.Public, typeof(int), Type.EmptyTypes);

var il = getMethodBuilder.GetILGenerator();
il.Emit(OpCodes.Ldc_I4, defaultValue);
il.Emit(OpCodes.Ret);

var propertyBuilder = typeBuilder.DefineProperty(
    upperName, PropertyAttributes.None, typeof(int), Type.EmptyTypes);
propertyBuilder.SetGetMethod(getMethodBuilder); 
```

`ldc.i4`是一条 IL 指令，用于将常量整数加载到 IL 堆栈中。对于其他类型，您将需要不同的说明。

# sql - 在 SQL 中选择不在 Group By 中的列

> ID：11991079
> 
> 赞同：81
> 
> 时间：2012-08-16T15:54:38.413
> 
> 标签：sql, sql-server-2008, tsql, greatest-n-per-group

我一直在尝试查找有关如何选择 SQL 中 Group By 语句中未包含的非聚合列的一些信息，但到目前为止我没有找到任何答案似乎可以回答我的问题。我有一个表，其中包含我想要的三列。一个是创建日期，一个是按特定 Claim ID 对记录进行分组的 ID，最后一个是 PK。我想在每组索赔 ID 中找到具有最大创建日期的记录。我正在选择 MAX（创建日期）和声明 ID (cpe.fmgcms_cpeclaimid)，并按声明 ID 分组。但是我需要这些记录中的 PK (cpe.fmgcms_claimid)，如果我尝试将其添加到我的 select 子句中，则会出现错误。而且我不能将它添加到我的 group by 子句中，因为那样它会破坏我的预期分组。有谁知道任何解决方法？这是我的代码示例：

```
Select MAX(cpe.createdon) As MaxDate, cpe.fmgcms_cpeclaimid 
from Filteredfmgcms_claimpaymentestimate cpe
where cpe.createdon < 'reportstartdate'
group by cpe.fmgcms_cpeclaimid 
```

这是我想要得到的结果：

```
Select MAX(cpe.createdon) As MaxDate, cpe.fmgcms_cpeclaimid, cpe.fmgcms_claimid 
from Filteredfmgcms_claimpaymentestimate cpe
where cpe.createdon < 'reportstartdate'
group by cpe.fmgcms_cpeclaimid 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-16T16:45:15.117

`select`带有子句的查询的结果集中的列`group by`必须是：

*   用作`group by`条件之一的表达式，或...
*   聚合函数，或...
*   文字值

所以，你不能在一个简单的查询中做你想做的事。首先要做的是以清晰的方式陈述您的问题陈述，例如：

> 我想在我的索赔表中的每个组中找到带有最近创建日期的个人索赔行

给定

```
create table dbo.some_claims_table
(
  claim_id     int      not null ,
  group_id     int      not null ,
  date_created datetime not null ,

  constraint some_table_PK primary key ( claim_id                ) ,
  constraint some_table_AK01 unique    ( group_id , claim_id     ) ,
  constraint some_Table_AK02 unique    ( group_id , date_created ) ,

) 
```

首先要做的是确定每个组的最近创建日期：

```
select group_id ,
       date_created = max( date_created )
from dbo.claims_table
group by group_id 
```

这为您提供了您需要的选择标准（每组 1 行，有 2 列：group_id 和高水位创建日期）来满足要求的第一部分（从每个组中选择单独的行。这需要是一个虚拟表您的最终`select`查询：

```
select *
from dbo.claims_table t
join ( select group_id ,
       date_created = max( date_created )
       from dbo.claims_table
       group by group_id
      ) x on x.group_id     = t.group_id
         and x.date_created = t.date_created 
```

`date_created`如果表在 (AK02)内不是唯一的`group_id`，您可以获得给定组的重复行。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-16T15:57:23.213

你可以用`PARTITION`and做到这一点`RANK`：

```
select * from
(
    select MyPK, fmgcms_cpeclaimid, createdon,  
        Rank() over (Partition BY fmgcms_cpeclaimid order by createdon DESC) as Rank
    from Filteredfmgcms_claimpaymentestimate 
    where createdon < 'reportstartdate' 
) tmp
where Rank = 1 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-16T15:59:58.910

直接的答案是你不能。您***必须***选择聚合或分组依据。

因此，您需要另一种方法。

1）。获取当前查询并将基础数据重新加入其中

```
SELECT
  cpe.*
FROM
  Filteredfmgcms_claimpaymentestimate cpe
INNER JOIN
  (yourQuery) AS lookup
    ON  lookup.MaxData           = cpe.createdOn
    AND lookup.fmgcms_cpeclaimid = cpe.fmgcms_cpeclaimid 
```

2）。使用 CTE 一次性完成所有操作...

```
WITH
  sequenced_data AS
(
  SELECT
    *,
    ROW_NUMBER() OVER (PARITION BY fmgcms_cpeclaimid ORDER BY CreatedOn DESC) AS sequence_id
  FROM
    Filteredfmgcms_claimpaymentestimate
  WHERE
    createdon < 'reportstartdate'
)
SELECT
  *
FROM
  sequenced_data
WHERE
  sequence_id = 1 
```

注意：使用`ROW_NUMBER()`将确保每个`fmgcms_cpeclaimid`. 即使多条记录与完全相同的`createdon`值绑定。如果您可以有联系，并且希望所有记录具有相同的`createdon`值，请`RANK()`改用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-16T15:58:52.857

你可以`join`对自己的表进行PK：

```
Select cpe1.PK, cpe2.MaxDate, cpe1.fmgcms_cpeclaimid 
from Filteredfmgcms_claimpaymentestimate cpe1
INNER JOIN
(
    select MAX(createdon) As MaxDate, fmgcms_cpeclaimid 
    from Filteredfmgcms_claimpaymentestimate
    group by fmgcms_cpeclaimid
) cpe2
    on cpe1.fmgcms_cpeclaimid = cpe2.fmgcms_cpeclaimid
    and cpe1.createdon = cpe2.MaxDate
where cpe1.createdon < 'reportstartdate' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-02T12:13:23.987

我喜欢做的是将附加列包装在聚合函数中，例如`max()`. 当您不期望重复值时，它非常有效。

```
Select MAX(cpe.createdon) As MaxDate, cpe.fmgcms_cpeclaimid, MAX(cpe.fmgcms_claimid) As fmgcms_claimid 
from Filteredfmgcms_claimpaymentestimate cpe
where cpe.createdon < 'reportstartdate'
group by cpe.fmgcms_cpeclaimid 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-30T14:31:07.380

先生，您要问的是 RedFilter 的答案。这个答案也有助于理解为什么 group by 在某种程度上是一个更简单的版本或分区： [SQL Server：PARTITION BY 和 GROUP BY 之间的区别，](https://stackoverflow.com/questions/2404565/sql-server-difference-between-partition-by-and-group-by) 因为它改变了返回值的计算方式，因此您可以（以某种方式）返回列 group by无法返回。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-07-28T10:38:23.670

您可以使用如下，

```
Select X.a, X.b, Y.c from (
                Select X.a as a, sum (b) as sum_b from name_table X
                group by X.a)X
left join from name_table Y on Y.a = X.a 
```

例子;

```
CREATE TABLE #products (
    product_name VARCHAR(MAX),
    code varchar(3),
    list_price [numeric](8, 2) NOT NULL
);

INSERT INTO #products VALUES ('paku', 'ACE', 2000)
INSERT INTO #products VALUES ('paku', 'ACE', 2000)
INSERT INTO #products VALUES ('Dinding', 'ADE', 2000)
INSERT INTO #products VALUES ('Kaca', 'AKB', 2000)
INSERT INTO #products VALUES ('paku', 'ACE', 2000)

--SELECT * FROM #products 
SELECT distinct x.code, x.SUM_PRICE, product_name FROM (SELECT code, SUM(list_price) as SUM_PRICE From #products 
               group by code)x
left join #products y on y.code=x.code

DROP TABLE #products 
```

# node.js - 在 expressjs 中，Dustjs 多个模板不起作用

> ID：11991080
> 
> 赞同：1
> 
> 时间：2012-08-16T15:54:43.183
> 
> 标签：node.js, express, dust.js

在 expressjs 中，Dustjs 多个模板不起作用，出现**500 错误：找不到模板：模板**

我的基本灰尘模板如下**（template.dust）**

```
<div class="page">
  {+pageHeader}Hello World!{/pageHeader}
  <div class="bodyContent">
    {+bodyContent/}
  </div>
  <div class="footer">
    {+pageFooter}
       <hr>
       <a href="/contactUs">Contact Us</a>
    {/pageFooter}
  </div>
</div> 
```

我试图在我的 home.dust 中调用这个基本模板我收到如下错误

```
Express
500 Error: Template Not Found: template
at Object.load (C:\office\nodejs-example\express_example\node_modules\application-name\node_modules\dust\lib\dust.js:54:27)
at Chunk.partial (C:\office\nodejs-example\express_example\node_modules\application-name\node_modules\dust\lib\dust.js:407:15)
at body_0 (undefined:1:130)
at Array.0 (C:\office\nodejs-example\express_example\node_modules\application-name\node_modules\dust\lib\dust.js:34:7)
at EventEmitter._tickCallback (node.js:192:40) 
```

**“家.尘”**

```
{>"template"/}
{<pageHeader}
   {?username}
     Welcome {username} <a href="/items">Items</a> | <a href='/logout'> Log Out</a>
      {:else}
         <form method="POST" action="/signin">
            <label>Usename <input type="text" name="username" id="s-user"></label>
            <input type="submit" class="submit" value="Login">
         </form>
      {/username}
{/pageHeader} 
```

路由类方法

```
exports.home = function(req, res){
    res.render('home', {username :  req.session.username});

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:56:51.363

为了解决这个问题，我写了：[klei-dust](https://npmjs.org/package/klei-dust)，它是一个帮助器，就像 consolidate 一样，可以将dustjs-linkedin 与 express 3.x 一起使用。klei-dust 和 consolidate.dust 之间的主要区别在于前者不需要相对于应用程序根目录的部分和基本模板路径，也不需要您指定模板文件扩展名。

你`index.dust`可能看起来像：

```
{>layout/}
{<content}
    Body content...
{/content} 
```

鉴于您有一个`layout.dust`与`index.dust`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T21:17:20.650

你并不孤单，这个问题让我发疯了！Express 的作者解释说，在 consolidate 中存在一个问题（在 Express 中使用 Dust 的包）。

> 是的，这类事情在整合中存在一个问题，
> 这些不提供
> 这种机制的引擎现在非常笨拙

作者：[来自 google群组的 Express(tjholowaychuk) 的作者](http://bit.ly/O3xGdb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:17:47.330

将dustjs-linkedin 包与consolidate 包一起使用（不再维护dustjs 包）。两者都在 npm 上。您可以通过执行以下操作将灰尘模板与布局一起使用：

布局.灰尘

```
 <body>
    <h1>{title}</h1>
{+content}
This is the base content.
{/content}
  </body> 
```

index.dust（主页部分）

```
{>"views/layout.dust"/}
{<content}
This is loaded from a partial.
{/content} 
```

应用程序.js

```
var dust = require('dustjs-linkedin')
, cons = require('consolidate');

app.engine('dust', cons.dust); 
```

完整示例：[https ://github.com/chovy/express-template-demo](https://github.com/chovy/express-template-demo)

# version-control - 如何使用 CVS 对 Mercurial 存储库中的目录进行版本控制？

> ID：11991083
> 
> 赞同：2
> 
> 时间：2012-08-16T15:54:50.707
> 
> 标签：version-control, mercurial, directory, cvs, symlink

我有一个 Mercurial 存储库`hg-repo`，其中有一个目录`cvs-dir`，我想同时在 CVS 中进行版本控制，并提交到 CVS 存储库：

```
$ ls hg-repo
cvs-dir other 
```

Mercurial 存储库的其余部分`other`不应该被 CVS 打扰。如何设置？

## 编辑

如果我只是在不同的 CVS 工作副本目录中创建一个符号链接 ( `ln -s`)`cvs-dir``cvs-repo`

```
$ pwd
 /home/foo
$ ls
hg-repo cvs-repo
$ ls -a cvs-repo
cvs-dir  -> /home/foo/hg-repo/cvs-dir 
```

然后

1.  从内部执行任何 CVS 工作，`/home/foo/cvs-repo`例如将工作副本提交到 CVS 存储库；

2.  写入`.cvsignore`忽略 Mercurial 元数据，反之亦然，

这种方法会有一些潜在的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:42:33.730

这可以提供帮助，我就是这样做的

首先：在本地获取 CVS 存储库。

第二：在此 CVS 存储库上本地创建一个 mercurial 存储库。这将用作您的远程 Mercurial 服务器。

第三：克隆这个 mercurial 存储库并在这里工作。

Mercurial 提供比 cvs 更好的合并支持，并使您的工作更轻松。提交回 CVS 需要一个额外的步骤。这是它的工作原理，一步一步。工作流程看起来很复杂，但实际上很容易。保持流程图关闭。

[详细的分步说明和流程图](https://stackoverflow.com/questions/17879829/how-to-use-mercurial-locally-with-a-central-cvs-repository)

# git - 将 git flow 与 git subtree 一起使用

> ID：11991088
> 
> 赞同：8
> 
> 时间：2012-08-16T15:55:20.060
> 
> 标签：git, configuration, git-flow, git-subtree, multiple-repositories

我刚刚将一个大型 svn repo 迁移到 git 并开始使用 gitflow。它就像一个魅力，但现在我正在考虑将那个大回购分成一些较小的回购。

假设 repo 目录树如下：

```
/repo
  - libs
  - apps
    -- app 1
    -- app 2 
```

我们希望将其拆分为三个存储库，一个具有核心结构（libs 和应用程序目录），另外两个具有应用程序目录。

如果我像这样使用 git subtree 进行拆分，我可以在每个部分中单独使用 git flow 还是必须在全局范围内使用它？

PS：这是我在stackoverflow中的第一个问题，请善待:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T14:54:17.527

我不使用 git flow，但我认为答案取决于您的模块化程度。不部署app1和app2可以部署核心结构吗？你能独立部署 app1 和 app2 吗？您的开发团队是否足够庞大和成熟，足以将它们视为独立的工作流程？

如果这些问题的答案是“是”，我认为将它们视为多个项目，每个项目都有独特的流程。但是，如果对其中任何一个的回答是“否”，我会避免破坏您的项目。事实上，如果对 app1 和 app2 的更改在大多数情况下也需要更改核心存储库，那么我将完全避免破坏您的存储库。

嵌套的存储库，无论它们是使用子树、子模块还是（禁止）仅`.gitignore`根据定义执行，都会使工作流程更加复杂。命令喜欢`git bisect`并且`git log`变得不那么有用；跟踪历史和错误变得有点困难。新开发人员必须多学习一点才能开始编码。个人经验：谨慎走这条路。如果您的子存储库紧密交织在一起，那么您将在一年后回到这里，为其他希望破坏他们的项目的人写下这个答案，就像一个有问题的 git 版本的 Pay It Forward。

# python - 使用增量 ID 抓取网站

> ID：11991097
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:55:33.873
> 
> 标签：python, screen-scraping, beautifulsoup

我有一个格式如下的网站：

[http://www.domain.com/membership/member_zoom.php?value](http://www.domain.com/membership/member_zoom.php?value)

值从 1000 开始，在 15,000 左右停止

以下是源代码示例：

```
<h1>Member Information</h1>

<h2>Company Name</h2>
<p>Address<br />
More Address<br />
City<br />
State<br />
Postal code<br />
</p>
<p><strong>Contact:</strong> Firstname Lastname, PH.D., P.ENG. - <a href="mailto:email@email.com">email@email.com</a><br /></p>
<a href="http://www.domain.com">www.domain.com</a><br />
<p><strong>Phone:</strong> (555)555-5555<br /></p> 
```

因此，我需要获取成员信息和最后一个 div 标签之间的所有内容，然后将 ID 值增加 1，重复。但是，有很多死ID。我的刮刀只是锤击该站点，增加一次然后再次击中它。有没有更简单的方法？也许某种方式来建立一个故障保险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:58:04.930

在您尝试加载它并查看它是否存在之前，无法判断一个 id 是否存在。您需要找到链接列表，或从网站的另一部分抓取成员 ID。如果你不能做到这一点，你只需要尝试每一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:11:27.427

发出 HEAD 请求。跳过 404 并用好的做 GET。忘记 read(1024)，那会浪费你和他们的带宽。

# javascript - 滚动条是否滚动到底部而不使用 Javascript？

> ID：11991098
> 
> 赞同：1
> 
> 时间：2012-08-16T15:55:34.743
> 
> 标签：javascript, html, css

我目前正在使用此 jquery 代码设置滚动条以在页面加载时滚动到底部 -

```
$(document).ready(function() {
    $('.mydiv').scrollTop($('.mydiv')[0].scrollHeight);
}); 
```

有没有办法只使用 css 来做到这一点？让这个滚动条在用户访问页面时自动滚动到底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:58:15.067

您可以在不使用 javascript 的情况下通过在 URL 和文档中使用锚点来执行此操作，并将目标锚点放在页面底部。虽然这不是很优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:09:40.637

有一个基于浏览器的扩展可以帮助你。不同的浏览器使用不同的扩展：Chrome，Safari：WebKit，IE：Trident，FF：Gecko。每个人都可以有不同的方法来做到这一点。我不知道 webkits 的具体功能，但尝试谷歌例如

::-webkit-scrollbar-track-piece:开始

我知道这不是一个直截了当的答案，但我希望它能对您的研究有所帮助。

# javascript - js'切换'或'悬停'功能？

> ID：11991101
> 
> 赞同：0
> 
> 时间：2012-08-16T15:55:45.323
> 
> 标签：javascript, css, hover, toggle

我不想使用，当主链接悬停在上面时`toggle`，我需要使用什么来使以下结构保持不变？`nav`

当前的js：

```
<script type="text/javascript"> 
  $(document).ready(function(){
    $(".downservices").hover(function(){
      $(".servicesdropped").toggle("fast");
    });
  });
</script> 
```

[示例页面](http://musclefire.com/nav2.php)

（请注意，当子菜单弹出时，我无法点击链接，因为子菜单会消失）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:00:16.740

如果您对动画不感兴趣，并且希望使用 JQuery，则可以在类上切换 CSS 可见性规则。

```
$(document).ready(function()

// Make sure the item is hidden initially, best to do
// this in CSS.
$(".servicesdropped").css("visibility", "hidden");

{
    $(".downservices").hover(function()
    {
        $(".servicesdropped").css("visibility", "display");
    },
    function()
    {
        $(".servicesdropped").css("visibility", "hidden");
    });
}); 
```

使用可见性意味着元素仍将占用它在 DOM 中的空间，但不会显示以确保其周围其他元素的结构和位置保持完好。缺点是动画，如`fadeIn()`和`fadeOut()`将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:57:25.730

像这样使用

```
<script type="text/javascript"> 
$(document).ready(function(){
$(".downservices").hover(function(){
$(".servicesdropped").slideDown();
});
});
</script> 
```

悬停在菜单上消失使用这个

```
<script type="text/javascript"> 
$(document).ready(function(){
$(".downservices").hover(
function(){
$(".servicesdropped").slideDown();
},
function(){
$(".servicesdropped").slideUp();
}
);
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:05:13.093

您的菜单的 html 标记体系结构应如下所示：

```
<ul>
  <li class="downservices"><a href="#">GUYS</a>
    <div class="servicesdropped" style="display: none;">
      <ul class="middle">
        <h3>Shirts &amp; Tanks:</h3>
        <li><a href="#">MuSkull</a></li>
        <li><a href="#">Bamboo Athletic Tank</a></li>
        <li><a href="#">Thin Strap Tank</a></li>
     </ul>

     <ul class="right">
       <h3>Other Stuff:</h3>
       <li><a href="#">Shorties</a></li>
       <li><a href="#">Hoodies</a></li>
       <li><a href="#">Socks</a></li>
       <li><a href="#">Hats</a></li>
    </ul>
   </div>
  </li>
  <li><a href="#">products</a></li>
  <li><a href="#">portfolio</a></li>
  <li><a href="#">contact</a></li>
</ul> 
```

在脚本中使用这个：

```
$(document).ready(function(){
   $("li.downservices").hover(function()
   {
      $(this).find(".servicesdropped").slideDown("fast");
   },
   function()
   {
      $(this).find(".servicesdropped").slideUp("fast");
   });
}); 
```

# php - 如何在脸书上贴墙

> ID：11991109
> 
> 赞同：1
> 
> 时间：2012-08-16T15:56:07.383
> 
> 标签：php, facebook

我目前发布到 Facebook Wall 的方式是

```
<?php
   $app_id = "XXXXXXXX";
   $canvas_page = "XXXXXXXX";
   $message = "My story";
   $feed_url = "http://www.facebook.com/dialog/feed?app_id="
                 . $app_id . "&redirect_uri=" .urlencode($canvas_page) . "&message=" . $message;

   if (empty($_REQUEST["post_id"])) {
     echo("<script> top.location.href='" . $feed_url . "'</script>");
  } else {
     echo ("Feed Post Id: " . $_REQUEST["post_id"]);
  }
?> 
```

但是这种方式，它是在网站的用户墙上发布消息。
实际上，我想将结果发布到墙上，而不是任何消息。
我怎样才能做到这一点？

# jquery - 在我的 click() 函数中传递一个值

> ID：11991111
> 
> 赞同：0
> 
> 时间：2012-08-16T15:56:14.747
> 
> 标签：jquery, click

我有这段代码，

```
<a href="#" id="addtoteam">
    Add to Team
</a> 
```

，如果我单击此链接，将出现一个模式对话框，

```
$('#addtoteam').click(function(){
      var url = '<?php echo BASEURL;?>';
      $( "#dialogbox" ).dialog({ 
        autoOpen: true,
        buttons: { 
                  "Use Registration Credits": function(){ 
                    // execute something here before redirecting it to another page, perhaps perform the updating of the registration_credits of each team here
                    window.location = url + '/administration/add_to_team/' + teamID +'/'+ playerID +'/?credit=1'; 
                  },
                  "Pay Extra Charge": function() { $(this).dialog("close"); },
                  "Cancel": function() { $(this).dialog("close"); } 
                },
        width: 800
      });
    }); 
```

如您所见，我有三个按钮，看看“使用注册积分”按钮，如果选择它，它将重定向到另一个页面，但我想要的是如果它重定向到另一个页面，我想要网址看起来像这样，

```
sample.com/administration/add_to_team/team_id/player_id?credit=1 
```

现在我的问题是，是否可以传递任何可以分配给我的`click()`函数内的变量的值，以便该值可以是我的 team_id 或玩家 id？我希望我解释清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:06:38.813

你可以在你的元素中存储像 team_id 或 player id 这样的参数作为属性：

```
<a href="#" id="addtoteam" data-team-id="4" data-player-id="5" >
    Add to Team
</a> 
```

然后你得到这些：

```
team_id = $(this).attr('data-team-id'); 
```

希望它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:08:45.160

您可以使用选择器从页面上的任何位置获取数据，如果您特别想从“点击”链接中获取数据，您可以`this`在点击事件的上下文中使用。

```
$('#addToTeam').on('click', function()
{
    var clicked = $(this);

    // Get the clicked links HREF value
    var href = clicked.attr('href');

    // Get the clicked links NAME value
    var name = clicked.attr('name');

    // And so on
    var data = clicked.attr('data-value')

}); 
```

要完全回答您的问题，您需要在`<a>`标签中添加更多数据。对于简单的东西，比如 ID 等，我只是把它们放在 HREF 值中，然后使用上面的技术将它拉到点击的链接。然后，您可以将该值附加到查询字符串。

```
$('#addtoteam').click(function()
{
    id = $(this).attr('href');

    window.location = url + '/administration/add_to_team/' + id

}); 
```

举个例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:09:52.250

如果您尝试从以下位置更改 URL：

```
sample.com/administration/add_to_team/team_id/player_id 
```

到 ：

```
sample.com/administration/add_to_team/team_id/player_id?credit=1 
```

您所缺少的只是查询字符串，您只需像这样添加它：

```
document.location.search = '?credit=1'; 
```

# php - API 与只读 mysql 用户（将数据从一个应用程序更新到另一个应用程序）

> ID：11991113
> 
> 赞同：0
> 
> 时间：2012-08-16T15:56:21.377
> 
> 标签：php, mysql, ruby-on-rails, database, synchronization

我有两个应用程序，第一个是 PHP Symfony，第二个是 Rails。两者都在自己独立的应用程序和数据库服务器上。

在我的 Rails 应用程序中，我需要定期更新第一个应用程序数据库中的**3 个表**（获取所有记录，检查是否更改/添加并更新 rails 数据库）：

```
SERVER1 [MySQL DB1 -> APP1 (in php)]
           ||
           || <--copy with some processing
           \/
SERVER2 [MySQL DB2 -> APP2 (in rails)] 
```

我考虑两种选择：

1.  构建 PHP API 以从 SERVER1 DB 接收数据。
2.  创建对 DB1 中所需表具有只读访问权限的 mysql 用户，然后`establish_connection`在表示远程 DB 的 rails 模型中使用它（with ）。

在第二个解决方案中，我需要在源服务器中打开 TCP/IP 端口，但首先我需要编写具有授权的 API。

两者的优点/缺点是什么？（性能？安全性？稳定性？可扩展性？等）

# python - Conflict resolution in ZODB

> ID：11991114
> 
> 赞同：2
> 
> 时间：2012-08-16T15:56:22.747
> 
> 标签：python, django, zodb

I do run parallel write requests on my **ZODB**. I do have multiple `BTree` instances inside my ZODB. Once the server accesses the same objects inside such a `BTree`, I get a `ConflictError` for the `IOBucket` class. For all my Django bases classes I do have `_p_resolveconflict` set up, but can't implement it for `IOBucket` 'cause its a C based class.

I did a deeper analysis, but still don't understand why it complains about the `IOBucket` class and what it writes into it. Additionally, what would be the right strategy to resolve it?

Thousand thanks for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:37:07.667

`IOBucket` is part of the persistence structure of a `BTree`; it exists to try and reduce conflict errors, and it does try and resolve conflicts where possible.

That said, conflicts are not always avoidable, and you should restart your transaction. In Zope, for example, the whole request is re-run up to 5 times if a `ConflictError` is raised. Conflicts are ZODB's way of handling the (hopefully rare) occasion where two different requests tried to change the exact same data structure.

Restarting your transaction means calling `transaction.begin()` and applying the same changes again. The `.begin()` will fetch any changes made by the other process and your commit will be based on the fresh data.

# php - 用于显示距当前日期超过 8 个月的 WordPress 自定义帖子类型的自定义查询

> ID：11991115
> 
> 赞同：0
> 
> 时间：2012-08-16T15:56:22.983
> 
> 标签：php, wordpress, archive

我在 for 循环中使用 Wordpress 中的以下自定义查询，使我能够为我为“新闻”创建的自定义帖子类型的前 8 个月创建一个选项卡式存档。

这非常有效，但是我希望在“旧新闻”标题下显示每个旧帖子。我正在努力弄清楚如何在任何时候将超过 8 个月的帖子与当前日期分开。

任何人都可以告诉我一个自定义查询结构，这将使我能够做到这一点。

这是我用来在其相关容器中输出 CPT 的代码。

```
<?php for($i = $this_month-1; $i > $this_month-8; $i--) :
        if($i==-1){$m=11;}
        if($i==-2){$m=10;}
        if($i==-3){$m=9;}
        if($i==-4){$m=8;}
        if($i==-5){$m=7;}
        if($i==-6){$m=6;}
        if($i==-7){$m=5;}
        if($i==-8){$m=4;}
        else{$m=$i;}

        query_posts( array(
            'post_type' => 'news',
            'posts_per_page' => '-1',
            'orderby' => 'date',
            'order' => 'ASC',
            'monthnum'=>$m
        ) );  
....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:22:03.563

你可以试试这个

```
<?php 
    add_filter('posts_where', 'filter_where');
    query_posts( array('post_type' => 'news', 'posts_per_page' => '-1', 'orderby' => 'date')); 
    function filter_where($where = ''){
        $where .= " AND post_date < '".date('Y-m-d', strtotime('-8 month'))."'";
        return $where;
    }
    remove_filter('posts_where', 'filter_where');
    if (have_posts()) : 
        while (have_posts()) : the_post();
        // your code
        endwhile;
    endif;
    wp_reset_query();
?> 
```

**更新：**也许这可以帮助你。

```
$args = array(
    'post_type' => 'news',
    'posts_per_page' => '-1',
    'orderby' => 'date',
    'year'     => date('Y'), // for current year, date('Y')-1 for 1 year ago
    'monthnum' => $m, // the month in the loop
    'order'    => 'ASC'
);
query_posts( $args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:36:08.460

我不太了解wordpress，但可以在逻辑上为您提供帮助。据我所知，这可以通过在检索“旧新闻”类别的帖子时检查查询中的“WHERE creation_date < 8 个月”之类的条件来完成。所以首先获取当前日期。

```
<?php $today = date('Y-m-d'); ?> 
```

然后从中减去 8 个月，你会得到一个大 8 个月的日期

```
<?php $eight_month = date('Y-m-d',strtotime("-8 month $today")); ?> 
```

现在您可以在查询中使用 $eight_month ，因此您的查询将是这样的。检查您存储在数据库中以供发布的日期格式，如果它与格式“Ymd”不同，请相应地更改我的日期

**"SELECT * FROM posts WHERE creation_date < '$eight_month'"**

希望这是您想要的，并在您的项目中为您提供帮助。祝你好运，祝你有美好的一天

# c# - c# asp.net 表单带有提交按钮和执行命令的按钮？

> ID：11991120
> 
> 赞同：1
> 
> 时间：2012-08-16T15:56:41.687
> 
> 标签：c#, asp.net, button, form-submit

基本上我有一个带有 runat 服务器标签的表单。在这个表单中，我有一个 asp 转发器和一个提交按钮——但我也想有一个按钮，它会在我的代码中调用 ac# 方法——有人可以给我一个关于如何去做的想法吗？同样在此代码中，即使它的自动回发值为 true，也不会触发 selectindexchanged 事件，这很奇怪：/

谢谢

**编辑** OK 解决方案似乎是删除操作选项卡，然后我通过一些 JavaScript 设置属性:) 为什么事情不能简单明了

* * *

```
 <form action="broadcast.aspx" id="bcForm" runat="server" onsubmit="chkChecks()"> 
            <a class="btn btn-warning" href="#" title="Create new product"> <i class="icon-plus icon-white"></i> Create new product</a> &nbsp &nbsp <a id="bcItems" data-toggle="modal" class="btn btn-primary" title="Broadcast" onclick="chkItems()"><i class="icon-share icon-white"></i> Broadcast</a>

</br></br>
<p>Filters:
<asp:DropDownList ID="groupFilter" runat="server" ToolTip="Groups"        AutoPostBack="True" onselectedindexchanged="groupFilter_SelectedIndexChanged1" ></asp:DropDownList></p>

   <div>
        <asp:Repeater ID="DepartmentList" runat="server"  OnItemmDataBound="DepartmentsList_ItemDataBound">
   <HeaderTemplate>
         <table id="grouptable" class="table table-bordered table-striped sortable"> 
                    <thead>
                            <tr>
                            <th class="sorttable_nosort" >Broadcast 
                                <br> </br><a class="label label-inverse" onclick="checkAll()">Check All</a>&nbsp<a class="label label-inverse" onclick="uncheckAll()">Uncheck All</a></th>
                            <th class="sorttable_numeric">ID</th>
                            <th>Name</th>
                            <th>Last Modified</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                </HeaderTemplate>
                <ItemTemplate>
                            <tr>
                            <td WIDTH="100">
                            <input type="checkbox" name="BroadcastSelect[]" value="<%# Eval("DEPT_ID") %>"</input></td>
                            <td>
                                <asp:Label ID="Label1" runat="server" Text='<%# Eval("DEPT_ID") %>'></asp:Label></td>
                            <td><%# Eval("DESC") %></td>
                            <td>
                                <asp:Label ID="Label2" runat="server" Text='<%# Eval("CHG_DATE") %>'></asp:Label></td>
                            <td><a class="btn btn-info" href="<%# Eval("gURL") %>">Edit</a>&nbsp;&nbsp<asp:HyperLink ID="HyperLink1" runat="server" CssClass="btn btn-danger">Broadcast Now</asp:HyperLink></td>
                            </tr>
                </ItemTemplate>
                <FooterTemplate>
                            </tbody>
                    </table>
                </FooterTemplate>
                </asp:Repeater>
                </div>

              <div id="myModal" class="modal hide fade" runat="server">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times; Select A Branch</h3>
                </div>
                <div class="modal-body">
                  <h4>Test</h4>

                <asp:Repeater ID="cfgList" runat="server">
                    <HeaderTemplate>
                   <table id="configtable" class="table table-bordered table-striped"> 
                    <thead>
                            <tr>
                            <th>Broadcast</th>
                            <th>Branch No.</th>
                            <th>Branch Name</th>
                        </tr>
                        </thead>
                        <tbody>
                </HeaderTemplate>
                <ItemTemplate>
                            <tr>
                            <td>
                            <input type="checkbox" name="BranchSelection[]" value="<%# Eval("branch") %>"</input></td>
                            <td><%# Eval("branch") %></td>
                            <td><%# Eval("name") %></a> </td>
                            </tr>
                </ItemTemplate>
                <FooterTemplate>
                            </tbody>
                    </table>
                </FooterTemplate>
                </asp:Repeater>

                </div>

                <div class="modal-footer">
                  <!--<a class="btn btn-success" onclick="document.getElementById('bcForm').submit()" title="Broadcast"><i class="icon-share icon-white"></i> Broadcast</a> -->
                  <a class="btn btn-success" onclick="chkBranches()" title="Broadcast"><i class="icon-share icon-white"></i> Broadcast</a>
                  <!--<input type="submit" value="Broadcast3" class="btn btn-success"/> -->
                  <div id="myDiv"></div>
                </div>
              </div>
              <!-- <a data-toggle="modal" href="#myModal" class="btn btn-primary">Broadcast Testing</a> -->
                <!--<a class="btn btn-success" onclick="document.getElementById('bcForm').submit()" title="Broadcast"><i class="icon-share icon-white"></i> Broadcast</a>-->
                <a id="bcItems2" data-toggle="modal" class="btn btn-primary" title="Broadcast" onclick="chkItems()"><i class="icon-share icon-white"></i> Broadcast</a>
                <ul class="pager">
                <li>
                <asp:Button ID="previousBtn" runat="server" Text="Prev" cssclass="search-query" 
                        Width="80px"/>
                </li>
                <li>
                <asp:Button ID="nextBtn" runat="server" Text="Next" cssclass="search-query" 
                        Width="80px"/>
                </li>
                </ul>
                </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:03:37.603

我一定在你的问题中遗漏了一些东西，因为这并不难，但是你去......

HTML：

```
<asp:Button runat="server" Text="Whatever" OnClick="SomeMethod_Click"/> 
```

后面的 C# 代码

```
public void SomeMethod_Click(object sender, EventArgs e); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:55:42.763

首先从表单中删除 action 属性。– 点网梦想家

这基本上是答案，检查我用修复更新的原始帖子:)

DotNet Dreamer 的道具

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T16:06:34.390

例子：

```
<script runat="server">
Sub submit(sender As Object, e As EventArgs)
lbl1.Text="Your name is " & txt1.Text
End Sub
</script>

<html>
<body>

<form runat="server">
Enter your name:
<asp:TextBox id="txt1" runat="server" />
<asp:Button OnClick="submit" Text="Submit" runat="server" />
<p><asp:Label id="lbl1" runat="server" /></p>
</form>

</body>
</html> 
```

帮助链接：[http ://www.w3schools.com/aspnet/aspnet_button.asp](http://www.w3schools.com/aspnet/aspnet_button.asp)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-16T16:06:16.930

在下拉列表属性中，您可以设置 AutoPostBack = true。这样，它会将帖子发送回服务器，因此可以触发事件。

哦。对不起，我没看到你已经有了

# android - 如何在 Android 2.2 或更高版本中展开压缩的 tar 文件

> ID：11991121
> 
> 赞同：1
> 
> 时间：2012-08-16T15:56:44.090
> 
> 标签：android, gzip, tar, compression

给定 SDCard 上的压缩 tar 文件（由 gzip 创建），我需要在 Android 应用程序中展开/解压缩它。tar 文件包含图片、文本和子文件夹以及子文件夹下的文件。我希望扩展/解压缩来维护目录层次结构。

我尝试过使用 commons-compress-1.2.jar，但 Android 报告了 .jars ArchieveException 的问题。

我想实现类似的东西：

File inputFile = new File("下载的 tar 的路径");

File outputDir = new File("SDCard 上要解压到的目录");

DecompressThis(inputFile, outputDir);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:48:54.410

不是我希望的微不足道的解决方案。我将几段公共代码/库放在一起，并创建了一个 AsyncTask 来完成我正在寻找的工作。

感谢大家的输入/帮助。

# android - ClassCastException：ActionBarView 无法转换为 TextView

> ID：11991125
> 
> 赞同：0
> 
> 时间：2012-08-16T15:56:57.167
> 
> 标签：android, android-layout, android-actionbar, textview, classcastexception

我一直在使用以下解决方法将活动标签居中（无需在 XML 布局中使用自定义标题）：

```
((TextView)((FrameLayout)((LinearLayout)((ViewGroup) getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER); 
```

这很好用，但每隔一段时间我就会看到一个用户（在 Google Play 上）得到一个

> java.lang.ClassCastException：com.android.internal.widget.ActionBarView 不能转换为 android.widget.TextView

这些可能是运行 Android 3.x 或更高版本的平板电脑用户。

没有实现我自己的自定义标题，可以让我直接访问活动标签，你能推荐另一种方法来避免`ActionBarView`ClassCastException`TextView`吗？

也许检查应用程序当前运行的 Android 版本并通过另一个级别`getChildAt(0)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:07:20.767

```
((FrameLayout)((LinearLayout)((ViewGroup) getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0) 
```

从这里开始收集子视图，并搜索您自己的 TextView...您只需要跳过操作栏，无论如何，当您开始使用 hack 时，无需对此感到满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:04:03.903

操作栏在主题中定义。因此，如果您想避免出现这种情况，您需要选择不同的主题。

或者，您可以检测用户正在使用的操作系统版本，如果是 11 (Honeycomb) 或更高版本，只需跳过操作栏并获取下一个视图。

看起来像

```
if (Integer.valueOf(android.os.Build.VERSION.SDK) > 11)
{
    ((TextView)((FrameLayout)((LinearLayout)((ViewGroup).getWindow().getDecorView()).getChildAt(1)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER);
}
else
   ((TextView)((FrameLayout)((LinearLayout)((ViewGroup).getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER); 
```

我还想像 Shark 所说的那样补充一下，这是一个完全的 hack，不是很健壮的代码。您应该使用 findViewById() 来定位您的视图并避免所有那些超级丑陋的投射。如果你继续沿着这条路走下去，你可以期待你的 hack 甚至我刚刚输入的代码在未来被破坏。

# mysql - MySQL错误代码：3错误写入文件（Errcode：28）

> ID：11991129
> 
> 赞同：7
> 
> 时间：2012-08-16T15:57:13.357
> 
> 标签：mysql

我正在尝试执行查询以返回记录数（大约 400 万）。

```
SELECT COUNT(DISTINCT col) FROM table; 
```

我收到此错误： `mysql Error Code: 3 error writing file 'C:\Winows\temp\Myffd3.tmp' (Errcode: 28).`

问题的原因是什么。如何解决？我试过搜索，可能是磁盘空间问题？但是我在 C 中有 21 GB 的可用空间。来自一列的计数命令是否需要更多？

**编辑：：** 临时文件名不是永久的。每次执行命令时，我都会在错误消息中得到不同的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:02:29.853

检查`mysql`进程用户是否具有对`C:\Windows\temp`. 一般来说，你不想写信给`C:\Windows`……你最好[将目录设置到其他地方](http://dev.mysql.com/doc/refman/5.0/en/cannot-create.html)。

* * *

好的。C盘上使用的文件系统是什么？ [如果您使用的是 FAT16 / FAT32 ，也许您在该目录中有太多文件？](https://superuser.com/questions/104220/is-there-a-limit-that-a-folder-can-store-number-of-files)

# emacs - 在elisp中读取二进制数据

> ID：11991137
> 
> 赞同：0
> 
> 时间：2012-08-16T15:57:30.343
> 
> 标签：emacs, elisp

我正在尝试通过 elisp 中的 XML-RPC 从文件（PNG 图像）传输二进制数据。这是自动将附件上传到 Confluence wiki 的一部分，特别是当前页面中使用的本地图像。这样做的代码是：

```
 ;; Open the file and get content
        (with-temp-buffer
          ;; file-name is the PNG file name, which is binary data
          (find-file (expand-file-name file-name current-dir))
          ;; Setup Confluence request alist
          (setq confl-req (list 
                           (cons "fileName" file-name)
                           (cons "contentType" mime-type)))
          ;; RPC call
          (setq confl-reply (cfln-rpc-execute 'confluence1.addAttachment
                                              page-id confl-req (buffer-substring-no-properties (point-min) (point-max)))) 
```

我的作品有问题`(buffer-substring-no-properties (point-min) (point-max))`。上传到 Confluence 的二进制数据在几个位置与 PNG 文件不匹配。我注意到附件中的字节`0xe0 0x88`被替换了。`0xc8`知道如何获取文件中包含的确切二进制数据吗？

谢谢， NMA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:11:55.457

您应该使用`insert-file-contents-literally`而不是`find-file`.

```
(insert-file-contents-literally FILENAME &optional VISIT BEG END
REPLACE)

Like `insert-file-contents', but only reads in the file literally.
A buffer may be modified in several ways after reading into the buffer,
to Emacs features such as format decoding, character code
conversion, `find-file-hook', automatic uncompression, etc.

This function ensures that none of these modifications will take place. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T15:20:30.643

f-library 提供了符合@npostavs 答案的一站式解决方案： [https ://github.com/rejeep/f.el](https://github.com/rejeep/f.el)

```
f-read-bytes 
```

它用

```
insert-file-contents-literally 
```

和...一起

```
buffer-substring-no-properties 
```

负责编码和多字节处理....

# reporting-services - SSRS - 经理与其他经理使用的员工

> ID：11991138
> 
> 赞同：1
> 
> 时间：2012-08-16T15:57:31.057
> 
> 标签：reporting-services, ssrs-tablix, ssrs-grouping

我正在尝试在 SSRS（Visual Studio 2010、SQL Server 2012）中创建员工利用率报告

我们有为多个项目经理工作的员工。我需要一份报告，显示项目经理、为他们工作的员工以及他们工作的每位经理对每位员工的利用情况。这将使我们能够确定哪些员工的利用率分布不正确。

数据集查询返回如下数据：

```
EmpID Emp Mgr Util Total Util
1234 Doe，约翰·伦迪，萨尔 100 100
2345 沃德，乔·伦迪，萨尔 40 110
3456克莱恩，罗伯史密斯，鲍勃100 100
4567雅培，弗雷德史密斯鲍勃100 100    
2345 沃德，乔·史密斯，鲍勃 70 110
```

按经理分组时，结果应如下所示（加号表示展开切换）：

```
Mgr Emp UtilMgr Util Total Util
伦迪，萨尔              
              +能源部，约翰 100
              +沃德，乔 110
史密斯，鲍勃              
              +克莱恩，抢 100
              +雅培，弗雷德 100
              +沃德，乔 110

```

当员工展开时，详细信息将显示按他们工作的不同项目经理细分的员工利用率：

```
Mgr Emp UtilMgr Util Total Util
伦迪，萨尔              
            -Doe，约翰 100
                           伦迪，萨尔 100      
            -沃德，乔 110
                           伦迪，萨尔 40  
                           史密斯，鲍勃 70  
史密斯，鲍勃              
            +克莱恩，抢 100
            +雅培，弗雷德 100
            +沃德，乔 110

```

我在报告中尝试了各种分组和属性组合（父、子、显示详细信息），但无法按照我想要的方式对结果进行分组。我尝试在查询中添加另一个管理器字段（别名为 UtilMgr），但仍然无法正确获取报告。

我正在寻找处理这个问题的最佳方法。似乎解决方案是让项目经理作为员工的父母，然后有第二组，员工是经理的父母，但我不知道如何实现。
我需要对查询做一些不同的事情吗？我是否需要使用嵌套在第一个中的子报表或第二个矩阵？有没有办法创建重叠的父/子组？

我只与 SSRS 合作了大约 2 周，所以我希望我使用的所有术语都是清晰和正确的。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:53:00.343

你能改变你的查询吗？

为了做你想做的事，你的数据集需要如下所示：

```
EmpID   Emp          Mgr          UtilMgr     Util  Total Util
1234    Doe, John    Lundy, Sal   Lundy, Sal  100    100
2345    Ward, Joe    Lundy, Sal   Lundy, Sal  40     110
2345    Ward, Joe    Lundy, Sal   Smith, Bob  70     110
3456    Kline, Rob   Smith, Bob   Smith, Bob  100    100
4567    Abbott, Fred Smith, Bob   Smith, Bob  100    100    
2345    Ward, Joe    Smith, Bob   Smith, Bob  70     110
2345    Ward, Joe    Smith, Bob   Lundy, Sal  40     110 
```

# javascript - 始终在 jQuery 自动完成中显示特定选择，即使它与输入不匹配

> ID：11991139
> 
> 赞同：5
> 
> 时间：2012-08-16T15:57:40.610
> 
> 标签：javascript, jquery, jquery-ui

我有一个 jQuery 自动完成功能（jquery ui 版本 1.8），我在其中输入了一个名称。如果可用，我希望用户从列表中选择一个名称，因为这些是我们数据库中的所有者名称。但是，有时他们需要添加新的所有者名称，在这种情况下，我希望他们从自动完成的下拉列表中选择“添加新的”。问题是，如果我在自动完成源数据中包含“添加新”作为选项，它不会在自动完成下拉列表中显示为选项，因为它与用户在文本框中输入的内容不匹配。

下面是javascript代码。我不包括服务器端代码，但假设服务器的结果在下拉列表中创建了一个列表，例如“添加新的，Betty，Bob，Cathy，Dan，Edward”。“选择器”是文本类型的标准 html 输入字段。

```
 $('.selector').autocomplete({
        autoFocus: false,
        minLength: 1,
        focus: function (event, ui) {
            $('.selector').val(ui.item.value);
            return false;
        },
        select: function (event, ui) {
            $('.selector').val(ui.item.value);
            return false;
        }
    });

    $('.selector').keyup(function(){
        // Each time a new character is entered, recreate the drop down list by matching entered characters to beginning of first name field

        $.ajax({
            type: "POST",
            url: "(url to c#.net asmx page and method)",
            contentType: "application/json; charset=utf-8",
            data: '{(various data parameters)}',
            datatype: "json",
            error: function (data) {
                var data = $.parseJSON(data.responseText);
                alert("Error: " + data.Message);
            },
            success: function (data, status, info) {
                if (data.hasOwnProperty("d")) {
                    var nameList = data.d;
                }
                else {
                    var nameList = data;
                }
                $('.selector').autocomplete("option", "source", nameList);
            }
        });
    }); 
```

我意识到我已经从我的 ajax 调用的 url 和数据部分的 javascript 代码中删除了几块，但我认为这没关系，因为获取我的自动完成的“源”不是这里的问题。

需要发生的事情是，例如，当我输入字母 b 时，我需要在列表中看到“添加新的，比尔，贝蒂”作为我的三个选项，但现在我只看到“比尔，贝蒂”，因为有“添加新”中没有“b”。

关于如何让“添加新”选项始终可用的任何想法或解决方案？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:03:22.373

我认为自动完成将检索到的对象集合构建到无序列表中。喜欢->

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all">
  <li class="ui-menu-item">
    <a class="ui-corner-all">item 1</a>
  </li>
  <li class="ui-menu-item">
    <a class="ui-corner-all">item 2</a>
  </li>
  <li class="ui-menu-item">
    <a class="ui-corner-all">item 3</a>
  </li>
</ul> 
```

它还有一种方法来检测列表何时随`open`事件打开。

```
$('selector').autocomplete({
  open: function(){
    $('.ui-autocomplete').prepend('<li class="ui-menu-item"><a class="ui-corner-all ui-add-new"> Add New </a></li>');
  }
}); 
```

您可以看到我们在自动完成下拉菜单打开时添加了一个列表项，因此您始终会在列表顶部看到“添加新的”（jQuery 的 .prepend() 处理）。

# r - 使用数据框在 r 中的排序图中着色点

> ID：11991145
> 
> 赞同：0
> 
> 时间：2012-08-16T15:57:59.870
> 
> 标签：r, text, labels

使用以下数据框：

```
df<-data.frame("sites"=as.character(1:20),"type"=c(rep("small",10),rep("large",10)))

   sites  type
1      1 small
2      2 small
3      3 small
4      4 small
5      5 small
6      6 small
7      7 small
8      8 small
9      9 small
10    10 small
11    11 large
12    12 large
13    13 large
14    14 large
15    15 large
16    16 large
17    17 large
18    18 large
19    19 large
20    20 large 
```

我想在以下排序图中按标签（即“小”、“大”）为文本标签（即 1-20）着色：

```
library(vegan)
library(stats)

data(dune)
dist <- vegdist(wisconsin(dune))

#Ordinate data
pc<-cmdscale(dist, k=10, eig=TRUE, add=TRUE, x.ret =TRUE)   

#Create ordination plot     
quartz(title="PCoA on coral data")
fig<-ordiplot(scores(pc)[,c(1,2)], type="t", main="PCoA") 
```

![在此处输入图像描述](../Images/37c173a28d9a1fb75607533b1424c012.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:46:38.423

看起来文本标签颜色在​​ ordiplot 中是硬编码的，因此您必须设置绘图，然后使用 text() 按组绘制标签：

```
score <- scores(pc)[, 1:2]
fig<-ordiplot(score, type="n", main="PCoA")
color <- c("red", "blue")
sz <- as.numeric(df$type[as.numeric(rownames(score))])
text(score, rownames(score), col=color[sz]) 
```

# c++ - 类似Minecraft的碰撞

> ID：11991153
> 
> 赞同：4
> 
> 时间：2012-08-16T15:58:16.617
> 
> 标签：c++, collision-detection, physics

我正在为教育目的开发类似 Minecraft 的游戏。到目前为止，即使有`1024x1204`块，渲染也很棒，但现在我开始整合玩家碰撞我遇到了问题。

我有一个`aabb`代表球员和`aabb`代表他周围所有街区的球员。这些是动态创建的，运行速度非常快。

我的问题如下：

我有速度矢量和当前位置。对于每个轴，我计算潜在位置并制作一个 aabb。我检查碰撞，它是自由的我移动到那里，否则我将该组件的速度设置为 0。我将轴分开，因为我希望我的播放器在部分面向墙壁的方向上滑动。

轴的顺序是 y,x,z。碰撞响应很棒，但我在角落遇到了一些问题，因为它有时会卡在世界上而无法移动。不知道这是什么原因。

我不想实现实际的物理，因为那些要求更高，基本上对我的需要来说太多了。

你们对如何以一种好的方式实现这一点有什么建议吗？我做了一些搜索，但没有发现任何对这种特殊情况有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:09:21.900

从某种意义上说，这有点抽象，您的问题的原因可能与很多事情有关。从我的脑海中，可能是您的碰撞检测代码中的一个错误：它以某种方式允许对象以 1 个（或更多）单位跨越边界。因此，当计算下一次碰撞时，1 个或多个维度被卡住（想象一下，当检测到碰撞时，手臂已经在墙内。您无法伸出手臂，因为它与墙边界的内部发生碰撞）

# ms-access - 数据表视图 - 不可编辑的字段

> ID：11991154
> 
> 赞同：0
> 
> 时间：2012-08-16T15:58:17.067
> 
> 标签：ms-access, ms-access-2010

我有一个 Pivot/CrossTab 表单，我需要它，以便左侧字段/列不可编辑，而其他列/字段可编辑。

有没有办法在禁用时将 TextBox 的颜色更改为非灰色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:01:12.027

不要禁用，锁定，然后你可以拥有任何你想要的颜色。

# coldfusion - 为服务器密集型进程暂停和恢复 ColdFusion 代码

> ID：11991160
> 
> 赞同：0
> 
> 时间：2012-08-16T15:58:30.823
> 
> 标签：coldfusion, coldfusion-9

我有一个循环运行数千条记录，并且对于它命中的每条记录都在服务器上进行一些图像大小调整和操作。该过程在测试一个小记录集时运行良好，但是当它移动到实时服务器时，我想在 50 条记录后暂停并恢复该过程，这样服务器就不会被征税到性能缓慢或完全退出的地步。

代码如下所示：

```
<cfloop query="imageRecords">
    <!--create and save images to server - sometimes 3 - 7 images for each record -->
</cfloop> 
```

就像我说的，我想在 50 条记录后暂停，然后从中断的地方继续。我看了看，`cfschedule`但不确定如何将其应用于此。

我还查看了[sleep()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6f29.html)函数，但文档讨论了在`cfthread`标签中使用它。其他人已经发布了关于使用它来模拟长流程的信息。

所以，我不确定`sleep()`能否以我需要的方式安全使用。

服务器是 CF9，数据库是 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:19:30.850

我将在默认为 0 的数据库中创建一个名为 working 的列，一旦图像更新，将标志设置为 1。然后您的查询可以类似于

```
SELECT TOP 50 imagename
FROM images
WHERE worked = 0 
```

然后设置一个 CF 计划任务每​​ x 分钟运行一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:37:48.833

这是一种不同的方法，您可以将其与其他任何方法结合使用：

```
<cfscript>
th=CreateObject("java","java.lang.Thread");
th.setPriority(th.MIN_PRIORITY);
// Your work here
th.setPriority(th.NORM_PRIORITY);
</cfscript> 
```

这应该将线程设置为比为您的其他请求提供服务的其他线程具有更低的优先级。理论上，您将在最短的时间内完成工作，但对其他用户的影响较小。我还没有机会对此进行测试，因此您的里程可能会有所不同。

# oracle - PL/SQL 初始化出站变量？

> ID：11991162
> 
> 赞同：1
> 
> 时间：2012-08-16T15:58:44.103
> 
> 标签：oracle, plsql

我正在编写一个使用 OCI 调用存储过程的 C++ 程序。在我的 PL/SQL 存储过程测试中，如果不初始化出站变量，我可能会收到[“获取的列值为 NULL”](http://ora-01405.ora-code.com/)错误，因为在 的情况下`foo != 0`，bar 为 NULL。所以在第一行，我先初始化 bar。这是处理出站变量的正确方法吗？

```
 FUNCTION function1(
    foo   IN  INTEGER,
    bar   OUT VARCHAR2
  ) RETURN INTEGER
  IS
    ret      INTEGER;
  BEGIN

    bar := ' '; -- do I need to initialize this variable?

    IF foo = 0 THEN
      ret := 0;
      bar := 'a';
    ELSE
      ret := 1;
    END IF;

    RETURN ret;

  END function1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:49:40.503

如果您没有在程序中设置 BAR，那么该变量将被初始化[为其类型的默认值](https://docs.oracle.com/database/121/LNPLS/subprograms.htm#GUID-518B8827-26CC-4734-B799-ACB038185638__PLSQLSUBPROGRAMPARAMETERMODES-521E28A5)（在这种情况下为 NULL，并且对于除具有非 NULL 默认值的记录类型之外的任何类型）。这只是基本逻辑。

所以你的选择是：

1.  接受变量类型的默认值。
2.  在 IF 语句的每个分支中将 BAR 设置为适当的值。

您发布的代码使用第一个选项。在您提出的简单逻辑中，这就是我将采取的方法。如果内部结构更复杂——IF 或具有许多分支的 CASE——我会选择让每个分支都明确设置值，因为这可能会使代码的意图更清晰。

# mongodb - In Mongo any way to do check and setting like atomic operation?

> ID：11991167
> 
> 赞同：7
> 
> 时间：2012-08-16T15:59:03.667
> 
> 标签：mongodb, pymongo

Is in Mongo any way to do check and setting like atomic operation ? I am making booking for hotels and if there is free room you can reserve, but what if two or more people want to reserve in same time. Is there anything similar to transaction in Mongo or any way to solve this problem ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:43:15.200

Yes, that's the classic use case for MongoDB's [`findAndModify`](http://www.mongodb.org/display/DOCS/findAndModify+Command) command.

Specifically for pymongo: [`find_and_modify`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find_and_modify).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:24:39.953

All updates are atomic operations over a document. Now find_and_modify locks that document and returns it back in the same operation. This allows you to combine a lock over the document during find and then applies the update operation.

You can find more about atomic operations: [http://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)

Best,

Norberto

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T20:28:26.583

The answers reference findAndModify documentation. But a practical example given the OP's requirements will do justice:

```
const current = new ISODate();
const timeAgoBy30Minutes = new Date(current.getTime()  - 1000 * 30 ).toISOString();

db.runCommand(
  {
    findAndModify: "rooms",
    query: {
      "availability" : true,
      "lastChecked" : {
        "$lt": timeAgoBy30Minutes
      }
    },
    update: { $set: { availability: false, lastChecked:  current.toISOString() } }
  }
) 
```

In the above example, my decision to use `db.runCommand` verses `db.rooms.findAndModify` was strategic. db.runCommand will return a status code as to whether the document was updated, which allows me to perform additional work if the return value was true. findAndModify simply returns the old document, unless the `new` flag is passed to the argument list by which it will return the updated document.

# php - 如何创建查询以获取使用 where 子句作为结果数组索引的结果？

> ID：11991168
> 
> 赞同：0
> 
> 时间：2012-08-16T15:59:03.037
> 
> 标签：php, mysql

这是我使用的查询：

```
$idList="32,33,21,11";          
$query = "SELECT post_id, meta_value FROM wp_posts 
          WHERE meta_key = 'grade' AND post_id IN ($idList)"; 
```

结果，where 子句成为键：

```
$result = array(
              0 => array('post_id'=> 32, 'meta_value'=>5),
              1 => array('post_id'=> 33, 'meta_value'=>2),
              2 => array('post_id'=> 21, 'meta_value'=>8),
           ) 
```

我希望有这样的结果：

```
$result = array(
              0 => array( 32 => 5 ),
              1 => array( 33 => 2 ),
              2 => array( 21 => 8 ),
           ) 
```

如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:07:25.183

像这样循环结果集：

```
$_final = array(); // new result set

foreach ($result as $value)
  $_final[] = array($value['post_id'] => $value['meta_value']);

unset($result); // free memory from old result set 
```

**更新：**如果元素太多并且您担心内存消耗，您可以通过以下方式进行操作：

```
$_final = array(); // new result set

foreach ($result as $key => $value) {
  $_final[] = array($value['post_id'] => $value['meta_value']); // composing new data
  unset($result[$key]); // unsetting already parsed value
}

unset($result); // freeing memory from old result set 
```

# c# - ViewModel 处理多个数据模型

> ID：11991170
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:59:18.423
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我的问题在这里打了 1000 次。所以我会尽量做到描述性。

我在布局中有来自不同模型的多个视图。从列表中选择记录时，它会打开此布局。在布局的顶部，它以表格格式显示记录信息。这是一个简单的 ID - /AuditSchedule/1122。这是目前的身体。这行得通。

在布局的另一个区域中，我有一个从另一个表生成的操作链接列表（侧面菜单）。我认为链接应该如下但不确定/AuditSchedule/1122/1。这是通过使用带有路由的 Global.asax 来完成的。

自然，当您打开此布局时，您应该得到以上所有内容以及布局的下一个区域（即表单）的第一条记录。在这种形式中，我需要它从问题表中显示一个问题，并在问题的右侧创建一组复选框，我将称之为分数。这些分数也在一个称为分数的表中。我在其中的所有内容几乎都在数据表中，因此可以根据需要编辑和更改所有内容。

当用户提交表单时，它将在另一个名为 MainAnswers 的表中存储 auditSchedule、mainQuestion 的 id 和分数字符串。该表是一个空白表，因此它将为该 AuditSchedule 的每个主要问题插入一条新记录。

到目前为止，我在这方面没有任何帮助。如果有人能指出他们看到的一个例子。那会很好。我不能是唯一一个试图这样做的人。但是我是 MVC C# 的新手。如果这是 Zend 和 PHP，我不会有任何问题。

我使用了代码优先的方法。我所有的关系都完成了。问题在于实现视图并将信息保存在正确的表中。

任何可以提供帮助的人将不胜感激。我在这里挣扎。

更新于 2012 年 8 月 16 日下午 3:12

让我先迈出第一步。

我希望能够从侧面选择一个菜单项，并从该部分列出一个问题列表。这是我的代码：

```
@{ Layout = null; }
@model QQAForm.ViewModels.AuditFormEdit

<table width="698" border="2" cellpadding="2">
<tr>
<td align="center"><b>Section</b><br />1.0</td>
<td>

<br />(Title of Section Goes Here - SubcategoryName - Located in Subcategory Model)<br />

<br />

(Child Questions Go here - QuestionText - Located in ChildQuestion Model)

</td>
<td>
        (This should be the result of what is written in AuditFormEdit view model - it does not currently work - Nothing shows up)
        @for (int index = 0; index < Model.ScoreCardCheckBoxHelperList.Count; index++)
        {

            @Html.CheckBoxFor(m => m.ScoreCardCheckBoxHelperList[index].Checked)
            @Html.LabelFor(m => m.ScoreCardCheckBoxHelperList[index], Model.ScoreCardCheckBoxHelperList[index].ScoreName)
            @Html.HiddenFor(m => m.ScoreCardCheckBoxHelperList[index].ScoreID)
            @Html.HiddenFor(m => m.ScoreCardCheckBoxHelperList[index].ScoreName)

        }

   </td>
 </tr>
</table> 
```

这是我正在处理的视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using QQAForm.Models;

namespace QQAForm.ViewModels
{
public class AuditFormEdit
{
    public List<SubcategoryHelper> SubcategoryHelperGet { get; set; }

    public class SubcategoryHelper : Models.SubCategory
    {
        public SubcategoryHelper(Models.SubCategory subCat)
        {
            this.SubCategoryID = subCat.SubCategoryID;
            this.SubcategoryName = subCat.SubcategoryName;
        }

    }

    public Models.MainAnswer ScoreInstance { get; set; }

    public List<ScoreCardCheckBoxHelper> ScoreCardCheckBoxHelperList { get; set; }

    public void InitializeScoreCheckBoxHelperList(List<Models.Score> ScoreList)
    {
        if (this.ScoreCardCheckBoxHelperList == null)
            this.ScoreCardCheckBoxHelperList = new List<ScoreCardCheckBoxHelper>();

        if (ScoreList != null
            && this.ScoreInstance != null)
        {
            this.ScoreCardCheckBoxHelperList.Clear();
            ScoreCardCheckBoxHelper scoreCardCheckBoxHelper;
            string scoreTypes =
                string.IsNullOrEmpty(this.ScoreInstance.Score) ?
                string.Empty : this.ScoreInstance.Score;
            foreach (Models.Score scoreType in ScoreList)
            {
                scoreCardCheckBoxHelper = new ScoreCardCheckBoxHelper(scoreType);
                if (scoreTypes.Contains(scoreType.ScoreName))
                    scoreCardCheckBoxHelper.Checked = true;
                this.ScoreCardCheckBoxHelperList.Add(scoreCardCheckBoxHelper);
            }
        }
    }

    public void PopulateCheckBoxsToScores()
    {
        this.ScoreInstance.Score = string.Empty;
        var scoreType = this.ScoreCardCheckBoxHelperList.Where(x => x.Checked)
                              .Select<ScoreCardCheckBoxHelper, string>(x => x.ScoreName)
                              .AsEnumerable();
        this.ScoreInstance.Score = string.Join(", ", scoreType);
    }

    public class ScoreCardCheckBoxHelper : Models.Score
    {
        public bool Checked { get; set; }

        public ScoreCardCheckBoxHelper() : base() { }

        public ScoreCardCheckBoxHelper(Models.Score score)
        {
            this.ScoreID = score.ScoreID;
            this.ScoreName = score.ScoreName;
        }
    }

}
} 
```

这是控制器部分：

```
 //get
    public ActionResult _Forms(int section)
    {
        AuditFormEdit viewModel = new AuditFormEdit();
        //viewModel.ScoreInstance = _db.MainAnswers.Single(r => r.MainAnswerID == id);
        _db.SubCategories.Single(r => r.SubCategoryID == section);
        viewModel.InitializeScoreCheckBoxHelperList(_db.Scores.ToList());
        return View(viewModel);
    }

    //post
    [HttpPost]
    public ActionResult _Forms(AuditFormEdit viewModel)
    {
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToScores();
            _db.Entry(viewModel.ScoreInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("/");
        }
        else
        {
            return View(viewModel);
        }
    } 
```

因此，如果您查看布局，其中显示 _Forms 的位置，该部分应通过链接 /AuditSchedule/1132/1 更改 - 它没有。以及我目前没有显示的复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:14:55.217

> ...我的复选框目前也没有显示。

这是因为`viewModel.ScoreInstance`在控制器的 GET 操作中设置的行被注释掉了：

```
//viewModel.ScoreInstance = _db.MainAnswers.Single(r => r.MainAnswerID == id); 
```

因此`viewModel.ScoreInstance`is`null`并且在`InitializeScoreCheckBoxHelperList`你中填充`ScoreCardCheckBoxHelperList`唯一的 when `viewModel.ScoreInstance`is **not** `null`：

```
if (this.ScoreCardCheckBoxHelperList == null)
    this.ScoreCardCheckBoxHelperList = new List<ScoreCardCheckBoxHelper>();

if (ScoreList != null
    && this.ScoreInstance != null)
{
    //... add elements to ScoreCardCheckBoxHelperList
} 
```

空`ScoreCardCheckBoxHelperList`= 没有复选框。

# java - if (x < … || and >= …) - 为什么这不能编译？

> ID：11991174
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:54:46.777
> 
> 标签：java

当我编译这段代码时：

```
if (yPix < 0 || >= render.LENGTH) … 
```

我收到以下两个错误：

> *令牌语法错误`>=`，删除此令牌。*

和

> *对于参数类型，运算符`||`未定义`boolean`，`int`。*

我该如何解决？我是 Java 新手。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T01:58:31.907

您需要布尔运算符的左侧参数。它应该是：

```
if (yPix < 0 || yPix >= render.LENGTH) …
//              ^^^^ 
```

# android - Android 和 AdMob：何时调用 AdView.loadAd

> ID：11991176
> 
> 赞同：3
> 
> 时间：2012-08-16T15:59:37.177
> 
> 标签：android, admob, oncreate, onresume

从 AdMob 加载新广告的“最佳时机”是什么时候？

我正在编写一个购物清单应用程序，它的主屏幕上有一个 admob 横幅。

首先我打电话

```
 m_AdView.loadAd(new AdRequest()); 
```

在 onCreate() 方法中。但所以我总是得到相同的广告。

现在我想将调用放入 onResume()。但是没有机会造成过多的网络流量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:55:07.710

加载的最佳位置`adMob`是在`onCreate()`. 所以，我会把它留在`onCreate()`方法中。不要担心正在显示什么广告，因为它是 adMob api 告诉它显示的内容。它可能处于测试模式，所以当你“实时”运行它时，它会改变。您收到广告的事实意味着它正在发挥作用。

这是我对我的应用程序所做的：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.detail);

    AdView adView = (AdView)this.findViewById(R.id.adView2);
    AdRequest re = new AdRequest();
    adView.loadAd(re);
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T23:03:28.087

官方文档告诉将 loadAd() 放入 onCreate()，因为您还必须在清单中注册 AdActivity：

```
<activity android:name="com.google.android.gms.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode"/> 
```

我猜它会坚持你的主要活动的生命周期，因此正确处理 onPause() 和 onResume() 。

**编辑**

根据[admob 示例](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals#play)，您必须将生命周期调用委托给 AdView 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-31T12:27:37.810

想知道相同的（谈论横幅而不是插页式）

我在网上找到的大多数示例都将请求（`adView.loadAd(new AdRequest())`）加载到`onCreate`.

但可以是`onStart`：

```
public void onStart() {
    super.onStart();
    if(adView != null) {
        adView.loadAd(new AdRequest());
    } 
```

根据： [AdMob 广告在 onCreate 可以，但是如果你返回活动就消失了，为什么？](https://stackoverflow.com/questions/8718233/admob-ad-in-oncreate-ok-but-disappears-if-you-return-to-activity-why)

在Activity生命周期中，`OnStart`紧随其后被调用`onCreate`

[https://developer.android.com/guide/components/activities/activity-lifecycle.html](https://developer.android.com/guide/components/activities/activity-lifecycle.html)

所以...我的东西听起来也不错

# c# - 在代码中创建一个 SelectCommand，其工作方式与在 SQLDataSource 中创建一个相同

> ID：11991177
> 
> 赞同：0
> 
> 时间：2012-08-16T15:59:38.433
> 
> 标签：c#, asp.net, webforms, code-behind, sqldatasource

我正在使用 asp.nets webforms 和 gridview 在我的网站上创建大型数据表。我在后面的代码中还有一个非常简单的方法，它允许整个 gridview 下载到一个 excel 文件。当我在 sqlDataSource 中创建 selectCommand 时，这一切都完美无缺。我的问题是我想在后面的代码中创建一个 SelectCommand，这样我就可以添加很多参数并使其更加动态。我知道您也可以在 sqlDataSource SelectCommand 中添加参数，但这对于我想要在后面的代码中执行的操作要简单得多。

在后面的代码中创建的 selectCommand 可以完美运行并显示 gridview。问题是当我尝试下载到excel时，excel文件是空的。换句话说，gridview 中的数据不会被转移。我认为这一定与我创建选择命令的方式有关......这就是我的做法。

.aspx 文件：

```
<asp:SqlDataSource ID="RegionCompliance" Runat="server"
    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">        
</asp:SqlDataSource>   

<%  
    SetSelectCommand(); // this is where the select command is created
%>

<h2>
    Download To:    
    <asp:LinkButton  ID="Button1" runat="server" OnClick="DownloadToExcel" Text="Excel" />
</h2>

    <asp:GridView 

        ID="GridView1" 
        DataSourceID="RegionCompliance" 
        DataKeyNames="Region">

        <Columns>
            <asp:BoundField ReadOnly="true" HeaderText="Region" DataField="Region"></asp:BoundField>
        </Columns>
   </asp:GridView> 
```

构建选择命令的代码隐藏

```
protected void SetSelectCommand()
{
    sqlCommand = SELECT region FROM tablename
    RegionCompliance.SelectCommand = sqlCommand;
} 
```

如果我在 sqlDataSource 中构建了 select 命令，它将完美地工作......谁能明白为什么这不允许 excel 文件使用 selectCommand 和 gridview 数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:15:38.773

代码块是[在 render 期间创建的](https://stackoverflow.com/questions/7251330/when-are-asp-net-code-blocks-e-g-executed-in-the-page-lifecycle)，这对于 excel 来说为时已晚（您可以使用调试器检查它是否被调用）。您可以在创建 excel 文件时显式调用此方法，也可以调用`DataBind()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:13:57.483

您需要使用页面方法...

```
protected void Page_Load(object sender, EventArgs e)
{
    RegionCompliance.SelectCommand = "SELECT region FROM tablename"
} 
```

你不应该尝试像那样调用内联方法——那是经典的 ASP 东西。

# javascript - 在 chrome 中将图像从 localhost 绘制到画布上

> ID：11991183
> 
> 赞同：1
> 
> 时间：2012-08-16T16:00:06.457
> 
> 标签：javascript, image, html, canvas, html5-canvas

我正在从本地主机中的文件夹访问图像。

图像在 img 标签中正确加载。但是，当我尝试将该图像绘制到画布上时，它并没有出现！

我已经实现了它，当图像被放到画布上时，它被绘制到它上面，我通过从原始源获取图像来绘制它。当我一次又一次地拖动时，经过一些尝试，它就会出现。

该功能在 Firefox 和 IE 中运行良好

这是我在 localhost 上的图像的来源：

```
b.src = "http://localhost/casema...E/2780Chrysanthemum.jpg"

ctx1.drawImage(b, x2-15*z, y2-15*z, w1, h1 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:23:18.400

在 HTML5 中，不能确定图像总是会立即加载，因此您需要确保在绘制之前图像已完全加载。此代码可以帮助您：

```
var myImage = new Image();
myImage.src = "path/to/your/image";
myImage.onload = function(){
      //context is the canvas context 
      context.drawImage(myImage,x,y,weight,height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:17:35.750

您是否在计算机上使用本地 HTML 文件？如果是这样，您需要添加参数

--allow-file-access-from-files

调用 Chrome 时。

# sql-server - 谁是最后一个修改数据库对象的？

> ID：11991187
> 
> 赞同：0
> 
> 时间：2012-08-16T16:00:20.170
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, trace

[本文](http://izlooite.blogspot.com/2010/12/sql-server-how-to-find-user-who-last.html)介绍如何运行标准报告以显示最近的 DDL 更改。

如果数据被捕获，它可能在某处的表中。我想要`Trace`这个位置，这样我就可以构建自己的报告。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:23:48.663

## 选项1

```
select * FROM sys.traces where is_default = 1 ; 
```

此查询包含路径列。复制跟踪文件的路径，现在使用以下查询

```
SELECT * FROM fn_trace_gettable('Path Column value from sys.traces', default) 
```

## 修改了哪个表（对象）以及修改了谁？

```
select ObjectName, LoginName 
from ::fn_trace_gettable( 'Path Column value from sys.traces', default)
where EventClass in (46,47,164) and EventSubclass = 0  
                                and DatabaseID = db_id() ;             

select ObjectName,       
ObjectID,       
DatabaseName,       
StartTime,       
EventClass,       
EventSubClass,       
ObjectType,       
ServerName,       
LoginName,       
NTUserName,       
ApplicationName  
from ::fn_trace_gettable( 'Trace File Path', default )            
where EventClass in (46,47,164) and EventSubclass = 0  and DatabaseID = db_id(); 
```

* * *

## 选项 #2

**[SQL Server – 使用 DDL 触发器审核架构更改](http://sqlandme.com/tag/schema-changes/)**

这种方法将告诉添加了哪一列，或者使用了什么命令添加

# sql - T-SQL 中的“+=”是什么意思

> ID：11991188
> 
> 赞同：9
> 
> 时间：2012-08-16T16:00:26.333
> 
> 标签：sql, sql-server, tsql

以下变量赋值在 T-SQL 中是什么意思？

```
SET @myvariable += 'test' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T16:02:24.903

与许多其他编程语言相同 - 附加（或添加取决于变量的数据类型，但在这种情况下附加）到现有值。

例如，如果 @myvariable 的值当前是`hello`，则在此分配之后该值将是`hellotest`。

`SET @myvariable = @myvariable + 'test'`它是SQL Server 2008 中引入的: 的快捷方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T16:12:37.280

在 SQL Server 2008 及更高版本中，它是[加法](http://msdn.microsoft.com/en-us/library/cc627392.aspx)/[连接](http://msdn.microsoft.com/en-us/library/dd206992.aspx)和赋值的简写。

```
set @x += 'test' 
```

是相同的：

```
set @x = @x + 'test' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T16:06:06.087

@myvariable acumulate 'test' 例如，如果 @myvariable 之前有一个值，例如 'hello ' @myvariable += 'test' 将值更改为 'hello test'

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T16:03:19.057

SET @v1 += 'expression' 等价于 SET @v1 = @v1 + 'expression'。

+= 运算符不能在没有变量的情况下使用。例如，以下代码将导致错误：

```
SELECT 'Adventure' += 'Works' 
```

以下示例使用 += 运算符连接。

```
DECLARE @v1 varchar(40);
SET @v1 = 'This is the original.';
SET @v1 += ' More text.';
PRINT @v1; 
```

这是结果集： **这是原始的。更多文字。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T16:02:54.637

它等于

```
SET @myvariable = @myvariable + 'test' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T16:02:55.527

它是Something = Something + SomethingElse 的简写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-13T21:59:12.017

+=（加法赋值）：将两个数字相加并为运算结果设置一个值。例如，如果变量 @x 等于 35，则 @x += 2 取 @x 的原始值，加 2 并将 @x 设置为该新值 (37)

+= (String Concatenation Assignment) : 连接两个字符串并将字符串设置为运算的结果。例如，如果变量@x 等于'Adventure'，则@x +='Works' 采用@x 的原始值，将'Works' 添加到字符串中，并将@x 设置为新值'AdventureWorks'。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T04:19:12.437

它将 += 右侧的值附加到变量 。在此示例中，@myvariable 将附加字符串值测试（假设字符串 @myvariable 可以接受字符串值。

这个逻辑也适用于大多数编程语言

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-13T13:29:02.337

```
set @value1 = 'Hello'
set @value1 = ' World'
print @value1 
```

输出：世界

```
set @value2 = 'Hello'
set @value2 += ' World'
print @value2 
```

输出：你好世界

# android - Emma Code Coverage Android 未更新

> ID：11991189
> 
> 赞同：1
> 
> 时间：2012-08-16T16:00:28.783
> 
> 标签：android, ant, junit, code-coverage, emma

经过多次试验和错误，我得到了 emma（代码覆盖工具）和 ant for Android dev 纯粹在命令行上工作。使用 Eclipse 尝试运行我得到的测试套件：

```
Conversion to Dalvik format failed with error 1 
```

这可能是问题的一部分。

任何我已经运行了我发现的所有命令，例如

```
ant emma debug clean
ant emma debug 
```

我用来运行测试套件：

```
ant emma debug install test 
```

**问题**

然而，报告指出，即使我编写了许多新测试，代码仍然未经测试。IMO，我相信新的调试版本没有被编译，我想知道是否有人遇到过类似的问题。这可能是由于我上面链接的错误，所以目前我正在尝试各种补救措施来首先解决这个问题。

非常感谢

编辑：这可能是由于生成的 build.xml 文件造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:43:06.620

就我而言，问题是 Robotium 测试虽然工作得很好，但它是否无法编译。老实说，我不完全确定为什么，但使用 Robotium 库删除测试是有效的。

# java - 我可以将 null 设置为 Spring 中 @Value 的默认值吗？

> ID：11991194
> 
> 赞同：128
> 
> 时间：2012-08-16T16:00:40.250
> 
> 标签：java, spring, spring-annotations

我目前正在使用这样的@Value Spring 3.1.x 注释：

```
@Value("${stuff.value:}")
private String value; 
```

如果属性不存在，这会将一个空字符串放入变量中。我想将 null 作为默认值，而不是空字符串。当然，我也想避免在属性 stuff.value 未设置时出现错误。

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2015-11-13T06:47:19.997

这真的很旧，但你现在可以使用 Spring EL，例如

`@Value("${stuff.value:#{null}}")`

看到[这个问题](https://stackoverflow.com/questions/16735141/specify-default-property-value-as-null-in-spring)。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-08-16T18:47:31.440

[您必须设置PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html#setNullValue%28java.lang.String%29)的 nullValue 。例如，我使用的是字符串`@null`，但您也可以将空字符串用作 nullValue。

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <!-- config the location(s) of the properties file(s) here -->
    <property name="nullValue" value="@null" />
</bean> 
```

现在您可以使用字符串`@null`来表示`null`值

```
@Value("${stuff.value:@null}")
private String value; 
```

请注意：上下文命名空间目前不支持空值。你不能使用

```
<context:property-placeholder null-value="@null" ... /> 
```

使用 Spring 3.1.1 测试

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2017-07-31T07:26:59.543

感谢@vorburger：

```
@Value("${email.protocol:#{null}}")
String protocol; 
```

将字符串值设置为**null**而无需任何其他配置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T20:55:24.803

我给予@nosebrain 信用，因为我不知道“空值”，但我更愿意完全避免使用空值，特别是因为它难以`null`在属性文件中表示。

但是这里有一个使用 null 而没有 out 的替代方法，`null-value`因此它可以与任何属性占位符一起使用。

```
public class MyObject {

   private String value;

   @Value("${stuff.value:@null}")
   public void setValue(String value) {
      if ("@null".equals(value)) this.value = null;
      else this.value = value;
   }
} 
```

就我个人而言，我更喜欢我的方式，因为也许以后你想`stuff.value`成为一个逗号分隔值或者 Enum 切换更容易。它也更容易进行单元测试:)

**编辑：根据您对使用枚举的评论以及我对不使用 null 的看法。**

```
@Component
public class MyObject {

    @Value("${crap:NOTSET}")
    private Crap crap;

    public enum Crap {
        NOTSET,
        BLAH;
    }
} 
```

以上对我来说很好。你避免空值。如果您的属性文件想要明确设置他们不想处理它，那么您可以这样做（*但您甚至不必指定它，因为它默认为 NOTSET*）。

```
crap=NOTSET 
```

`null`非常糟糕，与 不同`NOTSET`。这意味着弹簧或单元测试没有设置它，这就是恕我直言的原因。我仍然可能会使用 setter 表示法（上一个示例），因为它更容易进行单元测试（私有变量很难在单元测试中设置）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-16T12:32:38.633

如果您需要注入一个空的（0 长度）“”字符串作为 @Value 默认值 - 使用 SPEL（弹簧表达式语言），如下所示：

```
@Value("${index.suffix:#{''}}") 
private String indexSuffix; 
```

#{''} 只是为您提供一个空字符串作为注入@Value 的默认值。

由 yl

# hibernate - 配置 Hibernate 缓存时遇到问题 - org.hibernate.cache.NoCachingEnabledException：二级缓存未启用使用

> ID：11991198
> 
> 赞同：7
> 
> 时间：2012-08-16T16:01:07.200
> 
> 标签：hibernate, caching, configuration, jboss, ehcache

我正在将在 MySQL 5.5 db 上运行的 Hibernate（v 4.1.5.SP1，验证器 4.3.0.Final）应用程序（一个 Jar 文件）部署到 JBoss 4.2.3.GA（无法更改）。我在运行应用程序时收到错误“org.hibernate.cache.NoCachingEnabledException：二级缓存未启用使用”，但似乎我已经正确配置了一切。我正在使用这些 Maven 依赖项...

```
 <!-- Hibernate dependencies -->
            <dependency>
                    <groupId>org.hibernate</groupId>
                    <artifactId>hibernate-validator</artifactId>
                    <version>${hibernate.validator.version}</version>
            </dependency>
            <dependency>
                    <groupId>org.hibernate</groupId>
                    <artifactId>hibernate-entitymanager</artifactId>
                    <version>${hibernate.version}</version>
            </dependency>
            <dependency>
                    <groupId>org.hibernate</groupId>
                    <artifactId>hibernate-ehcache</artifactId>
                    <version>${hibernate.version}</version>
            </dependency> 
```

该错误很奇怪，因为我在 hibernate.cfg.xml 文件中配置了缓存...

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
        <session-factory>
                <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
                <property name="hibernate.connection.datasource">java:/MySqlDS</property>
                <property name="hibernate.connection.pool_size">10</property>
                <property name="show_sql">true</property>
                <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

                <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!--  Caching -->
        <property name="hibernate.cache.use_second_level_cache">true</property>
                <property name="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</property>

                <mapping class="org.mainco.subco.orgsclient.model.Organization" />
                <mapping class="org.mainco.subco.orgsclient.model.Community" />
                <mapping class="org.mainco.subco.orgsclient.model.Domain" />
                <mapping class="org.mainco.subco.orgsclient.model.State" />
                <mapping class="org.mainco.subco.orgsclient.model.Country" />

        </session-factory>
</hibernate-configuration> 
```

这包含在我的 META-INF/persistence.xml 文件中，该文件位于...

```
<persistence>
        <persistence-unit name="orgsclientunit" transaction-type="JTA">
                <provider>org.hibernate.ejb.HibernatePersistence</provider>
                <jta-data-source>java:/MySqlDS</jta-data-source>
                <properties>
                        <property name="hibernate.ejb.cfgfile" value="hibernate.cfg.xml" />
                        <property name="hibernate.validator.apply_to_ddl">false</property>
                        <property name="hibernate.validator.autoregister_listeners">false</property>
                        <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
                </properties>
        </persistence-unit>
</persistence> 
```

为了覆盖 JBoss 类加载器，我将这个文件包含在 META-INF/jboss.xml ...

```
<jboss>
        <class-loading java2ClassLoadingCompliance="false">
                <!-- setup classLoader repository. java2ParentDelegation to always have
                        package libs override server libs for this application -->
                <loader-repository>
                        org.mainco.subco.orgs:loader=orgsclient
                        <loader-repository-config>
                                java2ParentDelegation=false
                        </loader-repository-config>
                </loader-repository>
        </class-loading>
</jboss> 
```

这是完整的堆栈跟踪。这是什么原因？

```
2012-08-16 11:01:37,195 ERROR [org.mainco.subco.orgsclient.service.OrganizationServiceImpl] org.hibernate.HibernateException: Could not instantiate cache implementation^M
javax.persistence.PersistenceException: org.hibernate.HibernateException: Could not instantiate cache implementation^M
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:720)^M
        at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:121)^M
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:51)^M
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:33)^M
        at org.mainco.subco.orgsclient.service.AbstractTransactionService.startOperation(AbstractTransactionService.java:27)^M
        at org.mainco.subco.orgsclient.service.OrganizationServiceImpl.saveOrganization(OrganizationServiceImpl.java:87)^M
        at org.mainco.subco.orgsclient.service.OrganizationServiceImpl.getEODBOrganizations(OrganizationServiceImpl.java:221)^M
        at org.mainco.subco.orgsclient.service.OrganizationServiceImpl.saveOrgsFromWebService(OrganizationServiceImpl.java:183)^M
        at org.mainco.subco.orgsclient.quartz.UpdateOrgsJob.execute(UpdateOrgsJob.java:55)^M
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)^M
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)^M
        at java.lang.reflect.Method.invoke(Method.java:597)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)^M
        at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)^M
        at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)^M
        at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)^M
        at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)^M
        at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)^M
        at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)^M
        at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)^M
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)^M
        at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)^M
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)^M
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)^M
        at $Proxy81.execute(Unknown Source)^M
        at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)^M
        at org.quartz.core.JobRunShell.run(JobRunShell.java:203)^M
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)^M
Caused by: org.hibernate.HibernateException: Could not instantiate cache implementation^M
        at org.hibernate.cache.CacheFactory.createCache(CacheFactory.java:64)^M
        at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:214)^M
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1294)^M
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:713)^M
        ... 32 more^M
Caused by: org.hibernate.cache.NoCachingEnabledException: Second-level cache is not enabled for usage [hibernate.cache.use_second_level_cache | hibernate.cache.use_query_cache]^M
        at org.hibernate.cache.NoCacheProvider.buildCache(NoCacheProvider.java:21)^M
        at org.hibernate.cache.CacheFactory.createCache(CacheFactory.java:61)^M
    ... 35 more^M 
```

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:30:51.217

看看我用谷歌搜索找到的[这个](http://affy.blogspot.in/2006/12/solving-second-level-cache-is-not.html)是否对你有帮助......

它说你应该配置`hibernate.cache.provider_class`为`org.hibernate.cache.EhCacheProvider`

# c++ - PySide 中的多线程提升 Python C++ 代码

> ID：11991199
> 
> 赞同：4
> 
> 时间：2012-08-16T16:01:11.233
> 
> 标签：c++, python, multithreading, user-interface, boost-python

我有用 Boost Python 包装的 c++ 代码。这个想法是，我创建了一个共享对象，我的 python GUI 可以使用它来实例化包装 c++ 功能的变量

c++ 代码做了一些繁重的工作，我希望能够使包装的对象同时运行，这样 GUI 就不会阻塞。

我编译了一个用 CMake 包装的 Boost Python 共享对象，如下所示：

```
find_package(Boost COMPONENTS system thread python REQUIRED)
find_package(PythonLibs REQUIRED)
include_directories(${Boost_INCLUDE_DIRS})
include_directories(${PYTHON_INCLUDE_DIRS})
link_directories(${Boost_LIBRARY_DIRS})
link_directories(${PYTHON_LIBRARIES})
set(Boost_USE_MULTITHREADED ON)
add_library(mynewlibinpython SHARED src/boost_python_wrapper_code.cpp)
target_link_libraries(mynewlibinpython ${Boost_LIBRARIES} ${PYTHON_LIBRARIES} mylibincpp) 
```

我可以在 python 中很好地实例化对象，但它会导致 GUI 阻塞。这是我的python代码的通用片段：

```
from mynewlibinpython import *
class CppWrapper(QtCore.QObject):
    def __init__(self):
         super(CppWrapper,self).__init__()
         #some more initialization...

    @QtCore.Slot()
    def heavy_lifting_cpp_invocation():
         #constructor that takes a long time to complete
         self.cpp_object = CppObject() 
```

并且在具有成员函数的对象中，当我在 GUI 中按下按钮时会触发该函数：

```
class GuiObjectWithUnimportantName:
     def __init__(self):
          #inititalization

          self.cpp_thread = QThread()
          self.cpp_wrapper = CppWrapper()

     def function_triggered_by_button_press(self):
          self.cpp_wrapper.moveToThread(self.cpp_thread)
          self.cpp_thread.started.connect(self.cpp_wrapper.heavy_lifting_cpp_invocation)
          print "starting thread"       
          self.cpp_thread.start()
          print "Thread started" 
```

因此，cpp 代码将开始执行它的工作，并且我还将基本上立即从两个`print`语句（“启动线程”和“线程启动”）中获得输出。

但是 GUI 被冻结了。这与python GIL有什么关系吗？我尝试将这些宏添加到`boost_python_wrapper_code.cpp`并重新编译，但它会导致 python GUI 在启动时立即出现段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:40:07.670

是的，我相信您的问题与 GIL 有关。这是可能发生的事情的一个简单示例：

```
from PyQt4 import QtCore, QtGui
import time

class Window(QtGui.QDialog):

    def __init__(self):
        super(Window, self).__init__()
        self.resize(200,100)

        layout = QtGui.QVBoxLayout(self)

        layout.addWidget(QtGui.QLineEdit())

        self.button1 = QtGui.QPushButton("Sleep")
        self.button1.clicked.connect(self.go_safe)
        layout.addWidget(self.button1)

        self.button2 = QtGui.QPushButton("Crunch")
        self.button2.clicked.connect(self.go_GIL_buster)
        layout.addWidget(self.button2)

    def go_safe(self):
        t = QtCore.QThread(self)
        heavy = Heavy()
        heavy.moveToThread(t)
        t.started.connect(heavy.safe)
        print "starting thread"
        t.start()
        print "thread started"
        self.t1 = t
        self.heavy1 = heavy

    def go_GIL_buster(self):
        t = QtCore.QThread(self)
        heavy = Heavy()
        heavy.moveToThread(t)
        t.started.connect(heavy.GIL_buster)
        print "starting thread"
        t.start()
        print "thread started"
        self.t2 = t
        self.heavy2 = heavy

class Heavy(QtCore.QObject):

    def safe(self):
        print "Sleeping"
        time.sleep(10)
        print "Done"

    def GIL_buster(self):
        print "Crunching numbers"
        x = 2
        y = 500000000
        foo = x**y
        print "Done"

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = Window()
    win.show()
    win.raise_()
    app.exec_() 
```

当您单击第一个按钮时，线程将休眠 10 秒，您会注意到您仍然可以在文本字段中输入。睡眠释放 GIL，因此主线程可以继续工作。

当您单击第二个按钮时，线程会执行大量数字操作。这会一直获取 GIL，并且 GUI 将锁定直到完成。

如果您的 boost 扩展没有以任何方式对 python 对象做任何事情，我认为您可以释放 GIL 以进行操作。然后它不会阻止GUI。如果您正在对 python 对象进行繁重的操作，那么您可能会遇到问题。

有一个[关于创建基于作用域的 GIL 释放类的技巧](http://wiki.python.org/moin/boost.python/HowTo)，您可以在任何函数中使用它来在该函数的持续时间内释放 GIL（当帮助程序实例被销毁时）

```
class ScopedGILRelease
{
// C & D ----------------------------
public:
    inline ScopedGILRelease()
    {
        m_thread_state = PyEval_SaveThread();
    }

    inline ~ScopedGILRelease()
    {
        PyEval_RestoreThread(m_thread_state);
        m_thread_state = NULL;
    }

private:
    PyThreadState * m_thread_state;
}; 
```

并使用它...

```
int foo_wrapper(int x)
{
    ScopedGILRelease scoped;
    return foo(x);
} 
```

其他人在此 repo 中有更多使用此技巧的示例：[https ://bitbucket.org/wwitzel3/code/src/tip/nogil/nogil.cpp](https://bitbucket.org/wwitzel3/code/src/tip/nogil/nogil.cpp)

# webmin - 如何在 Virtualmin 上禁用 root 登录

> ID：11991204
> 
> 赞同：3
> 
> 时间：2012-08-16T16:01:22.900
> 
> 标签：webmin, virtualmin

我在 Centos 6 上使用香草 Webmin / Virtualmin 3.93 GPL 版本。我创建了一个对 Webmin 具有完全权限的新用户，所以现在我想禁止 root 登录，因为显然这可能是一个安全问题。

有谁知道如何做到这一点？在某个地方必须有一个选项，但也许我看不到树木的树木。

我已经手动禁用了 root SSH 登录，但我仍然可以使用 root 帐户登录到 Webmin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:25:15.370

感谢@Charles 的指点。

要从 Webmin 中删除 root 用户，请以具有管理员权限的用户身份登录，然后单击 Webmin -> Webmin 用户。在用户列表中，删除或移除`root`用户的所有权限。

删除该用户后，我可以以新管理员用户身份登录并管理服务器，但不能以 root 身份登录。

问题解决了，安全通过默默无闻，但总比没有好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-25T21:50:32.987

单击 Webmin 选项卡，展开 Webmin 部分并选择 Webmin 用户。然后选择root用户。展开安全和限制选项并选择仅允许从列出的地址中进行 IP 访问控制。在字段中输入环回地址 (127.0.0.1)。root 用户仍然存在，但无法登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-15T19:49:46.543

在`Webmin -> Webmin Users`单击`root`并将其重命名为您使用的用户名。

# java - 播放控制器不接受 JSON POST

> ID：11991210
> 
> 赞同：3
> 
> 时间：2012-08-16T16:01:56.243
> 
> 标签：java, json, post, controller, playframework

我正在开发 Play 1.2.4。
我已经设置了这样的路线：

```
POST    /index    Application.index(format:'json') 
```

控制器是这样的：

```
public static void index(String json) {

    Logger.info("content type: %s", request.contentType);
    Logger.info("json string: %s", json);
    MyObj obj = new Gson().fromJson(json, MyObj.class);
    ...
    ...
} 
```

我的 curl 请求是这样的：

```
curl -v -H "Content-Type: application/json" -X POST -d '{"name":"John Smith","email":"email@email.com","value1":"Value one","value2":"Value two","urls":[{"url":"http://www.google.ca"},{"url":"http://www.msn.ca"}]}' http://localhost:9000/index 
```

MyObj 具有以下字段：

```
public String name;
public String email;
public String value1;
public String value2;
public String[] urls; 
```

但是，控制器接收到一个 NULL 作为输入。我究竟做错了什么？有人可以告诉我如何使用 JSON POST 请求并将其转换为对象（特别是 url 数组）吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T19:28:21.840

尝试将方法参数中的变量名称从 json 更改为 body。

```
public static void index(String body) {

    Logger.info("content type: %s", request.contentType);
    Logger.info("json string: %s", body);
    MyObj obj = new Gson().fromJson(body, MyObj.class);
    ...
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:34:12.553

您需要在请求中更改此内容：

```
[{"url":"http://www.google.ca"},{"url":"http://www.msn.ca"}] 
```

为了这：

```
["http://www.google.ca","http://www.msn.ca"] 
```

因为您的对象有一个字符串数组，否则，它将假定数组中的每个元素都是一个对象，其中包含一个名为“url”的字段（显然 String 没有该字段）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:23:11.617

我的假设是因为您没有访问请求，并且您永远不会为正在访问的字符串输入值，从而为您提供 NULL 输入。

尝试通过`request().body().asJson();`调用访问 JSON 请求。

也看看[http://www.playframework.org/documentation/2.0.1/JavaJsonRequests](http://www.playframework.org/documentation/2.0.1/JavaJsonRequests)

它应该为您提供有关如何操作 JSON 请求的可靠想法。

# python - Flask 可以提供 CherryPy 风格的路由吗？

> ID：11991212
> 
> 赞同：6
> 
> 时间：2012-08-16T16:01:57.817
> 
> 标签：python, flask, cherrypy

默认的 CherryPy 路由样式基于类的实例，其方法由`@cherrypy.expose`.

在下面的示例中，这些 url 是通过对其他普通类进行简单调整来提供的。

```
/
/hello
/hello/again
/bye
/bye/again 
```

我想知道是否有办法使用 Flask 的 @route 或其他装饰器来实现这一点。

```
import cherrypy

class Root(object):
    @cherrypy.expose
    def index(self):
        return 'my app'

class Greeting(object):
    def __init__(self, name, greeting):
        self.name = name
        self.greeting = greeting

    @cherrypy.expose
    def index(self):
        return '%s %s!' %(self.greeting, self.name)

    @cherrypy.expose
    def again(self):
        return '%s again, %s!' %(self.greeting, self.name)

if __name__ == '__main__':
    root = Root()
    root.hello = Greeting('Foo', 'Hello')
    root.bye = Greeting('Bar', 'Bye')
    cherrypy.quickstart(root) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:42:24.110

为了做这样的事情，你必须使用一点 python 魔法，但是，绝对可以用烧瓶来做。复制您的示例最直接的方法是子类化烧瓶。这是一种方法：

```
import inspect
from flask import Flask

def expose(f):
    """Decorator that flags a method to be exposed"""
    f._exposed_method = True
    return f

class FlaskOfCherryPy(Flask):
    """Custom flask that allows cherrypy's expose decorator"""
    def quickstart(self, root_handler, *args, **kwargs):
        self._process_root_handler(root_handler)
        self.run(*args, **kwargs)

    def _process_root_handler(self, root_handler):
        # Prime the recursive processing
        root_url = []
        self._process_a_handler(root_handler, root_url)

    def _process_a_handler(self, current_handler, url_stack):
        # This gives a list of all the members of current_handler
        members = inspect.getmembers(current_handler)
        for name, value in members:
            # You probably want to skip things that start with a _ or __
            if name.startswith('_'):
                continue

            # Check if the method is decorated
            is_exposed_method = getattr(value, '_exposed_method', False)

            # If it's a callable with the _exposed_method attribute set
            # Then it's an exposed method
            if is_exposed_method and callable(value):
                self._add_exposed_url(url_stack, name, value)
            else:
                new_stack = url_stack[:]
                new_stack.append(name)
                self._process_a_handler(value, new_stack)

    def _add_exposed_url(self, url_stack, name, view_func):
        copied_stack = url_stack[:]

        if name != 'index':
            copied_stack.append(name)

        url = "/%s" % "/".join(copied_stack)

        if name == 'index':
            copied_stack.append(name)

        view_name = "_".join(copied_stack)
        self.add_url_rule(url, view_name, view_func)

class Root(object):
    @expose
    def index(self):
        return 'my app'

class Greeting(object):
    def __init__(self, name, greeting):
        self.name = name
        self.greeting = greeting

    @expose
    def index(self):
        return '%s %s!' %(self.greeting, self.name)

    @expose
    def again(self):
        return '%s again, %s!' %(self.greeting, self.name)

if __name__ == '__main__':
    root = Root()
    root.hello = Greeting('Foo', 'Hello')
    root.bye = Greeting('Bar', 'Bye')
    app = FlaskOfCherryPy(__name__)
    app.quickstart(root) 
```

本质上，诀窍是获取所有带有属性标记的方法 `_exposed_method`并将它们传递给`Flask.add_url_rule` （[请参阅此处的文档](http://flask.pocoo.org/docs/api/#flask.Flask.add_url_rule)）。flask 的美妙之处在于它是一个轻量级的系统，扩展它并不可怕。我强烈建议您自己尝试一下，但我很高兴解决您的问题，因此我将脚本作为[要点](https://gist.github.com/3412602)。

我编写的这个特定代码并不完美，也没有经过大量测试，但它绝对适用于您的特定用例。此外，这不一定是您希望在生产中运行应用程序的方式。您必须创建某种应用程序工厂才能做到这一点。再次，我强烈建议研究烧瓶的内部结构，以使其做你想做的事。您可能还想查看flask 提供的基于类的视图或蓝图。他们能够做一些类似于你在这里的事情。当然，使用它们是非常不同的，并且我知道使用普通蓝图无法设置实例属性。同样，您可以随时扩展:-)

# c++ - 派生类错误：未定义类型

> ID：11991215
> 
> 赞同：0
> 
> 时间：2012-08-16T16:02:08.050
> 
> 标签：c++

代码如下所示：

```
class B {/*something*/};

class D1: public B {
public:
void set() = 0;
friend int D2::get(D1&);
private: 
int a;
}
class D2: public B {
public:
int get(D1& d) {return d.a;}
} 
```

我已经包含`"B.h"`在派生类的 .h 文件（`"D1.h" and "D2.h"`）和`D2.h`D1 中的“”中，`"D1.h"`在 D2 中......但不断收到编译错误：

```
...\D2.h ... use of undefined type D1 
```

那么我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:11:10.753

您创建了一个循环包含：您包含`D1.h`在`D2.h`并且您还包含`D2.h`在`D1.h`. 循环包容永远不会奏效，也永远不会取得任何成就。

您的循环包含是类定义之间循环依赖的直接结果。在您的代码中，两个类定义以需要两个类类型都完整（完全定义）的方式相互引用。这意味着无论您做什么，都无法编译您的代码。您需要打破类定义之间的循环依赖关系。

在您的情况下，可以通过以下方式完成。

保持`D1.h`不变，即保持包含`D2.h`并`D1.h`保持类的定义不变`D1`。

但是，*不要*包含`D1.h`into`D2.h`而是引入 into 的前向`D1`声明`D2.h`

```
class D1; 
```

将定义更改`D2`为

```
class D2: public B {
public:
  int get(D1& d);
}; 
```

注意：不要试图`get`在 class 的定义中定义正确的方法`D2`。您必须*将*的定义重新定位`D2::get`到其他地方，其中完整的定义`D1`也是可见的（`D2.cpp`例如，应该同时包含`D1.h`和`D2.h`）

```
int D2::get(D1& d) 
{
  return d.a;
} 
```

而已。定义这种方式的一个副作用`D2::get`是它变得非内联。如果您真的想保持内联，则必须将其定义为

```
inline int D2::get(D1& d) 
{
  return d.a;
} 
```

并确保它仅*在*. `D1`例如，您可以将其放入第三个头文件（`D2_aux.h`或类似的文件）中，并记住将其包含*在*`D1.h`.

当然，尝试解决这个问题的更好方法是重新考虑整个设计。你真的需要里面的朋友声明`D1`吗？也许您应该以某种方式重新设计您的代码以消除对朋友声明的需要，从而消除这种依赖性。

* * *

或者，您可以通过更改`D1.h`和保持`D2.h`不变来解决它。但是，要遵循该路径，您必须替换您的“细粒度”朋友声明

```
friend int D2::get(D1&); 
```

具有更全面和宽容的

```
friend class D2; 
```

并删除包含`D2.h`from `D1.h`。

以前的朋友声明要求类`D2`是完整的，这实际上是创建“牢不可破”的依赖关系的原因。后一个声明不需要`D2`完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:07:48.530

在这一点上，代码提到`D2`了没有任何东西可以说明是什么`D2`（编译器并没有提前弄清楚）。因此，您需要通过在定义开始之前`D2`添加来告诉编译器是什么。`class D2;``D1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:06:31.397

如果 D1 的定义依赖于 D2 并且 D2 的定义依赖于 D1，那么您需要前向引用**这两个**类：

```
class B;
class D1;
class D2; 
```

# javascript - 通过 Requirejs 传递的未定义对象

> ID：11991218
> 
> 赞同：42
> 
> 时间：2012-08-16T16:02:27.827
> 
> 标签：javascript, requirejs

我正在使用`Requirejs`在我们的网络应用程序中加载 JavaScript。问题是我正在将一个`undefined`对象传递给一个模块，当在其他模块中使用该模块时，它的实例化非常好。

好的，这是设置。我`main.js`的 requirejs 文件在启动时运行：

```
require.config({
    baseUrl: "/scripts",
    paths: {
        demographics: "Demographics/demographics",
        complaints: "Complaints/complaints",
    }
});

require(["templates", "demographics", "complaints", "crossDomain"], function (templates, demographics, complaints) {
    "use strict";

    console.log("0");
    console.log(demographics === undefined);

    demographics.View.display();
}); 
```

在这个问题中，很多配置已被剥离为核心文件。

这是`Demographics.js`：

```
define(["ko", "templates", "complaints", "globals", "underscore"], function (ko, templates, complaints, globals) {

    // Stuff removed.
    return {
        View: view
    };
}); 
```

和`Complaints.js`

```
define([
    "demographics",
    "ko",
    "templates",
    "complaints",
    "visualeffects",
    "globals",
    "webservice",
    "underscore",
    "typewatcher",
    "imagesloaded"],
    function (demographics, ko, templates, complaints, visualeffects, globals, webservice) {
        "use strict";

        console.log("1");
        console.log(demographics === undefined);
    return {
        View: view
    };
}); 
```

问题是这个 - 在通过配置传递`Complaints.js`的参数是. 控制台注销告诉我“人口统计 === 未定义”是.`demographics``define``undefined``true`

但是，当 main.js 文件执行时，传递给它的人口统计参数不是未定义的，正如预期的那样，它是一个实例化的对象。

现在我被困住了，因为我不明白为什么`complaints.js`那个人口统计变量是未定义的。谁能发现我错过了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-16T19:23:07.520

你有一个循环依赖。该`demographics`模块依赖于`complaints`并且`complaints`依赖于`demographics`. 根据[文档](http://requirejs.org/docs/api.html#circular)：

> 如果你定义了一个循环依赖（a 需要 b，b 需要 a），那么在这种情况下，当 b 的模块函数被调用时，它会得到 a 的未定义值。

如果您无法删除循环依赖项，则解决方案是按需异步要求另一个模块中的两个模块之一（例如在实例化视图时而不是在执行定义视图的模块时）。同样，[文档](http://requirejs.org/docs/api.html#circular)很好地涵盖了这个主题。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-10T12:25:05.927

另一种情况是，当您不小心键入`require`而不是`define`定义模块时，我花了一些时间才注意到这一点。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-14T12:21:44.957

我有一个类似的问题。就我而言，在定义模块时，我写道：

```
define('some_dependency', ... 
```

代替

```
define(['some_dependency'], ... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-01T19:28:36.230

另一个可能的原因是实现了模块的接口（AMD、CommonJS），但忘记返回任何内容。我就是这么做的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-02T16:55:03.543

我刚刚遇到另一个原因：

```
define(function () {
    return {};
}()); // <-- notice the '()' typo. 
```

这个“错字”不会导致这个错误的 JS 错误，尤其是在具有许多潜在循环依赖的复杂应用程序中，可能会让人感到困惑。

当然，原因是“错字”是有效的 JS，它只是调用您定义的函数，从而将其结果传递给`define()`而不是按预期传递给函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T20:20:01.913

事后看来，另一个可能显而易见的原因是模块代码中的错误。就我而言，我试图从未定义的变量中获取属性。该错误已记录在控制台中，但由于某种原因，我没有看到它/将其误认为是未定义的模块错误。

# css - 将内容放在 TD 中而不影响动态表的布局。仅在可能的情况下使用 CSS

> ID：11991220
> 
> 赞同：1
> 
> 时间：2012-08-16T16:02:28.270
> 
> 标签：css, dynamic, html-table

我有想要保持动态的表格，这意味着我不想以像素或百分比分配列宽。

在大多数情况下，该表在分配合理的列宽方面做得很好。问题是有时我需要加载一个或多个包含异常宽数据的 TD。结果是整个表格布局被转移以处理超宽的 TD 内容。

我想以某种方式标记一个 TD 或其内容，使其恰好适合现有布局，而不会影响列宽。我**确实**希望 TD 高度受到影响。

基本上，我想强制将内容包装在现有的 TD 中，而不需要 TD 尝试通过调整列宽来容纳内容。

```
<table>
       <tr><td>Field Label #1</td><td><input name='@1'></td></tr>
       <tr><td>Field Label #2</td><td><input name='@2'></td></tr>
       <tr><td>Field Label #3</td><td><input name='@3'></td></tr>
       <tr><td>Field Label #4</td><td><input name='@4'></td></tr>
       <tr><td>&nbsp;</td><td class='ignoreContentWidth'><div>Super long message or notice to user that I want to wrap naturally but I don't want it to have any effect on the table layout..</div></td></tr>
       <tr><td>Field Label #5</td><td><input name='@5'></td></tr>
</table>​ 
```

我已经尝试了以下 CSS，它让我部分了解，但现在 TD 也忽略了内容高度。

```
.ignoreContentWidth
{
    /* display: none; */
    position:relative;
}

.ignoreContentWidth div
{
    position:absolute;
    top:0;
} 
```

一个显示问题的小提琴。 [摆弄 CSS](http://jsfiddle.net/AnthonyV/MEHWm/)

删除小提琴中的 CSS 以查看我不想要的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:11:38.523

使用

```
.ignoreContentWidth
{
    width:1px;
} 
```

似乎可以解决问题。

这有点笨拙，但是使该单元格的宽度尽可能小会将其缩小到它为空时的宽度。文本换行并强制单元格高度根据需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:08:50.277

如果你想要这样，你至少需要在桌子上的某个地方有一个宽度。

您可以使用**CSS** `width`或`max-width`. 此外，如果您希望相应地调整高度，请删除绝对定位。试试这个：

```
.ignoreContentWidth
{
    /* display: none; */
    position:relative;

}

.ignoreContentWidth div
{
max-width: 300px;
} 
```

祝你好运！

**编辑：**这是给你的 JS Fiddle：http: [//jsfiddle.net/MCHdb/](http://jsfiddle.net/MCHdb/)

# c++ - 相当于 C++ 中 Objective-C 的“valueForKey”方法？

> ID：11991222
> 
> 赞同：2
> 
> 时间：2012-08-16T16:02:31.790
> 
> 标签：c++, objective-c

假设我们有一个类或类`NSArray`的实例的 Objective-C 。这两个类都有方法。`Shoe``Computer``age`

Objective-C 将允许您通过一个简单的语句来获取所有鞋子和计算机的年龄，如下所示：

```
NSArray *agesOfShoesAndComputers = [ourArray valueForKey:@"age"]; 
```

C++ 是否有任何类似的方法可以应用于向量，或者像这样的东西在 C++ 中总是会更麻烦一些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:14:36.313

首先，`std::vector<T>`是*静态*类型的。也就是说，您需要在编译时知道它是否包含鞋子或计算机。

所以，简短的回答是它在 C++ 中总是比较麻烦（静态类型确实是一种优化，所以这是我们为性能付出的代价）。

* * *

如果你想使用传统的运行时多态，你需要一个通用的基类：

```
class MyBase
{
public:
    virtual ~MyBase();
    virtual int age() = 0;
};

class Shoe: public MyBase
{
public:
    virtual int age();
};
// same for Computer 
```

现在我可以拥有

```
std::vector<std::unique_ptr<MyBase>> ourArray; 
```

和

```
std::vector<int> ages(std::vector<std::unique_ptr<MyBase>> const &ourArray)
{
    std::vector<int> ages;
    std::transform(ourArray.begin(), ourArray.end(),
                   std::back_inserter<int>(ages),
                   [](std::unique_ptr<MyBase> const& elem) { return elem->age(); }
                  );
    return ages;
} 
```

对此处的调用`elem->age()`依赖于 定义的公共接口`MyBase`，但分派到派生类实现（`Shoe::age()`和`Computer::age()`分别）。

它不如 Objective C 版本灵活，因为你的通用接口、继承等都是静态定义的。

请注意，如果这是一个简单的属性，您*可以*完全跳过虚拟方法调用并将其放入`MyBase`。Shoes 和 Computers 仍然需要从这个类继承，但它们可以只在基类中设置属性值。

* * *

您也许可以使用编译时多态性，即模板。这在某些方面更类似于 Objective C 方法，因为它适用于支持预期方法的*任何*类型，而与继承关系无关。

```
template <typename T> // T could be Shoe, Computer or anything else
std::vector<int> ages(std::vector<T> const &ourArray)
{
    std::vector<int> ages;
    std::transform(ourArray.begin(), ourArray.end(),
                   std::back_inserter<int>(ages),
                   [](T const& elem) { return elem.age(); }
                  );
    return ages;
} 
```

但是，该机制完全不同-您仍然有*静态*不同的呼叫站点，*无论是* `vector<Shoe>` *或* `vector<Computer>`还是其他，并且永远不会相遇。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:07:03.937

C++ 的动态性稍差一些，但您要寻找的通常是`transform`：

```
vector<unique_ptr<BaseClassForShoeAndComputer>> ourArray;
vector<int> agesOfShoesAndComputers;

transform(ourArray.begin(), ourArray.end(),
          back_inserter(agesOfShoesAndComputers),
          [](unique_ptr<BaseClassForShoeAndComputer>& s) { return s->age(); }); 
```

但是，您不能在单个容器中真正拥有不相关的对象（嗯，您可以，但使用它们是另一回事）；但是，您*可以*使用模板（不幸的是，不能使用 lambdas）来实现静态鸭子类型（用于具有“年龄”方法的任何类型）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:09:12.597

如果您的编译器不支持`lambdas`您可以使用`<functional>`（但无论如何都是 c++ 11）

```
std::vector<std::shared_ptr<Base>> v;

std::vector<int> ages;
std::transform(v.begin(),
               v.end(),
               std::back_inserter(ages),
               std::bind(&Base::getAge, std::placeholders::_1)); 
```

和`Base`的基类在哪里`Shoe``Computer`

您还可以使用模板从任何支持`getAge()`函数的类型中获取年龄。

```
template <typename InputIterator>
static std::vector<int> getAges(InputIterator start, InputIterator finish)
{
    typedef typename InputIterator::value_type T;

    std::vector<int> ages;
    std::transform(start,
                   finish,
                   std::back_inserter(ages),
                   std::bind(&T::getAge, std::placeholders::_1));
    return ages;
}

int main()
{
    std::vector<Base> v;
    std::vector<int> ages = getAges(v.begin(), v.end());
} 
```

# plone - 我怎样才能只从自动表单呈现表单？

> ID：11991225
> 
> 赞同：2
> 
> 时间：2012-08-16T16:02:52.510
> 
> 标签：plone

我在 BrowserView 的上下文中。我想在页面内呈现一个表单。

```
class CommandeView(BrowserView):
    ...
    def render_myform(self):
        livraison_form = LivraisonForm(self.context, self.request)
        livraison_form.update()
        return livraison_form.render()

class ILivraisonForm(interface.Interface):
    livraison = schema.Choice(title=_(u"Mode de livraison"),
                          vocabulary=livraison_vocabulary)

class LivraisonForm(AutoExtensibleForm, form.EditForm):
    schema = ILivraisonForm

class LivraisonFormAdapter(object):
    component.adapts(ICommande)
    interface.implements(ILivraisonForm)
    def __init__(self, context):
        self.context = context
        self.livraison = self.context.livraison 
```

我希望 render_myform 只呈现表单，但它返回一个 HTML Plone 页面。

欢迎任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:10:09.673

还没有深入检查这个，但表单可能是由 plone`FormWrapper`类包装的。

在实例上查找`.form`属性：`LivraisonForm`

```
def render_myform(self):
    livraison_form = LivraisonForm(self.context, self.request).form
    livraison_form.update()
    return livraison_form.render() 
```

您*可能*需要在请求中添加一个额外的接口才能使其正常工作（包装器通常会为您执行此操作。我现在的时间有点少，所以您未经测试：

```
from plone.z3cform import z2

class CommandeView(BrowserView):
    def render_myform(self):
        z2.switch_on(self)  # Apply layer interface, set up locale, add `getURL` method
        livraison_form = LivraisonForm(self.context, self.request).form
        livraison_form.update()
        return livraison_form.render() 
```

Plone 知识库使用相同的设置[在 viewlet 中显示表单](http://plone.org/documentation/kb/using-z3c.form-forms-in-plone/creating-a-z3c.form-inside-a-viewlet/)。

# ios - NSXMLParser：尝试解析和解析外部实体时出错

> ID：11991230
> 
> 赞同：4
> 
> 时间：2012-08-16T16:03:02.280
> 
> 标签：ios, xml, nsxmlparser

我目前正在尝试使用外部已解析实体引用来解析包含另一个 XML 的 XML。但是，NSXMLParser 会引发错误，而不是解析包含的 XML。

xml 看起来有点像这样：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE parentElement[
<!ENTITY extern SYSTEM "myGreatURI">
]>

<parentElement
    attribute1="1" 
    attribute2="2" 
    ...>
    <childElement>

        &extern;

        <parentElement
        ..>
            <childElement> 
```

我已启用解析器来解析外部引用：

```
self.parser.shouldResolveExternalEntities = TRUE; 
```

随着我的外部实体的定义被解析，相应的委托方法被调用：

```
- (void)parser:(NSXMLParser *)parser foundExternalEntityDeclarationWithName:(NSString *)entityName publicID:(NSString *)publicID systemID:(NSString *)systemID 
```

它传递了**正确的值**： entityName = "extern" 和 systemID = "myGreatURI"

**但是当在 xml 中解析引用时，会发生 NSXMLParser 错误[1549](https://stackoverflow.com/questions/6028090/what-is-meant-by-nsxmlparsererrordomain-error-1549)。**

* * *

只有在发生此错误后，才会调用预期的委托方法：

```
- (NSData *)parser:(NSXMLParser *)parser resolveExternalEntityName:(NSString *)entityName systemID:(NSString *)systemID 
```

但是现在 systemID 是**nil**！此外，NSXMLParser 没有按预期使用我返回的数据。不是解析它，而是将完整的 XML 检测为一个字符串，通过以下方法交给我：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

如您所见，我有几个不同的问题。不幸的是，谷歌和苹果文档让我一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-14T09:22:07.867

据我了解，NSXMLParser 总是在 resolveExternalEntityName 中返回 systemID = nil，因为当它到达这里时，应该已经加载了 systemID 资源，如果检索失败，则意味着 systemID 无效或其他什么，所以它会是反正没用。

# c# - 如何对 WCF ServiceHost.Faulted 事件进行单元测试

> ID：11991232
> 
> 赞同：2
> 
> 时间：2012-08-16T16:03:05.430
> 
> 标签：c#, wcf, unit-testing

假设我有以下类（删除异常处理等）：

```
[ServiceBehavior(InstanceContextMode = ..., ConcurrencyMode = ..., etc)]
public class MyService : IMyService  
{
    ServiceReferenceMethodsHere....
}

public class HostStartup : IHostStartup
{
    private ServiceHost _myHost;

    public ServiceHost myHost
    {
       get { return _myHost; }
       set { _myHost= value; }
    }

    public void StartService(IMyService instance)
    {
        _myHost = new ServiceHost(instance);
    }

    public void StopService()
    }
        _myHost.Close();
    {
} 
```

现在，订阅`ServiceHost.Faulted`事件：

```
// Note: Interfaces are registered via unity container and dependency injection.
// Unity bootstrapper class not shown. 
public class TestHost : ITestHost
{
    private IHostStartup _hostStartup;
    private IMyService _myService

    public TestHost(IHostStartup hostStartup, IMyService myService)
    {
        _hostStartup = hostStartup;
        _myService = myService;
        hostStartup.StartService(_myService);
        hostStartup.myHost.Faulted += HandleHostFault;
    }

    private void HandleHostFault(object sender, EventArgs e)
    {
        HandleFaultHere.....
    }
} 
```

好的，太好了，现在我有了处理`ServiceHost.Faulted`事件的代码。（当然，我还没有展示真正使我的服务工作的所有其他 WCF 胆量......）

**我的问题是**，如何对我的私有 HandleHostFault 方法进行单元测试而不作弊并将其设置为公共（有时我们都想这样做）。
换句话说，是否可以`ServiceHost.Faulted`在单元测试环境中引发事件？

我更喜欢使用 NSubstitute 进行单元测试。我尝试了以下方法：

```
private IHostStartup _hostStartup;
private IMyService _myService;
private TestHost _testHost;

public void MyTestInitialize()
{
    _hostStartup = Substitute.For<IHostStartup>();
    _myService = Substitute.For<IMyService>();
    _hostStartup.When(x => x.StartService(Arg.Any<IMyService>())).Do(x =>
                 {
                    _hostStartup.myHost = Substitute.For<ServiceHost>();
                 });
    _testHost  = new TestHost(_hostStartup, _myService);
}

public void HandleHostFault_InitializeHost_ServiceHostStatusOpen()
{
     // Arrange

     // Act
     hostStartup.myHost.Faulted += Raise.Event();

     // Assert
} 
```

`hostStartup.myHost.Faulted += Raise.Event()`不会引发故障事件。

**任何想法如何引发此 servicehost.faulted 事件？可能吗？**

** 更新 **

我决定不直接测试 ServiceHost 通信对象。我认为它“无法使用 NSubstitute 进行测试”。我现在处理来自我的 HostStartup 类的 ServiceHost.Faulted 事件。

```
public class HostStartup : IHostStartup
{
    public event EventHandler<EventArgs> OnHostFault;

    public ServiceHost MyHost { get; private set; }

    public void StartService(IMyService instance)
    {
        MyHost = new ServiceHost(instance);
        MyHost.Faulted += HandleFault;
    }

    public void StopService()
    }
        _myHost.Close();
    {

    private void InvokeOnServiceHostFault(EventArgs eventArgs)
    {
        EventHandler<EventArgs> handler = OnHostFault;
        if (handler != null) handler(this, eventArgs);
    }

    private void HandleFault(object sender, EventArgs eventArgs)
    {
        InvokeOnServiceHostFault(eventArgs);
    }
}

// Note: Interfaces are registered via unity container and dependency injection.
// Unity bootstrapper class not shown. 
public class TestHost : ITestHost
{
    private IHostStartup _hostStartup;
    private IMyService _myService

    public TestHost(IHostStartup hostStartup, IMyService myService)
    {
        _hostStartup = hostStartup;
        _myService = myService;
        hostStartup.StartService(_myService);
        hostStartup.OnHostFault += HandleHostFault;
    }

    private void HandleHostFault(object sender, EventArgs e)
    {
        HandleFaultHere.....
    }
} 
```

最后，单元测试操作效果很好：

```
public void HandleHostFault_InitializeHost_ServiceHostStatusOpen()
{
     // Arrange

     // Act
     hostStartup.OnHostFault += Raise.Event();  // works great!! :)

     // Assert
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:31:28.850

您可以使用 PrivateObject 类对类的任何私有成员进行单元测试。有关说明和示例，请参见下面的链接

[http://msdn.microsoft.com/en-us/library/bb546207.aspx](http://msdn.microsoft.com/en-us/library/bb546207.aspx)

# php - 使用 MySql 在数据库中输入日期或空值

> ID：11991236
> 
> 赞同：1
> 
> 时间：2012-08-16T16:03:22.493
> 
> 标签：php, mysql

我搜索了该网站，虽然我找到了类似的问题和答案，但我无法找到答案。经过4个小时的搜索，我决定硬着头皮问这个问题。

我的表单中有 4 个不需要的日期字段。如果其中一个字段有条目，我希望它在数据库中输入一个日期，如果有任何一个字段留空，我希望它为空。

我有一个 if 语句，它检查值是否为空，如果是`$value = null`，则用于`$value = date("Y-m-d",strtotime($_post['value']))`将其转换为日期，这很好用。

问题出在我的查询中。如果我使用'$value'，它将正确插入日期但不会插入空值，因为使用'null'会使sql认为它是一个字符串。如果我只使用 $value，则 null 插入就好了，但日期为 0000-00-00。

任何建议将不胜感激

感谢您到目前为止的建议...

允许为空，这是我的脚本...

```
if(empty($_POST['fp32_original_install_date'])){
$fp32_install = NULL;
    }else{
$fp32_install = date("Y-m-d",strtotime($_POST['fp32_original_install_date']));
 }

 $sql = "INSERT INTO accounts_cstm (id_c, support_c, install_date_c, sware_renewal_date_c, product_key_c, account_status_c, fp32_support_type_c, fp32_support_renewal_date_c, fp32_original_install_date_c) VALUES ('$Guid','$cdr_support', '$cdr_install', '$cdr_renew', '$prod_key', '$account_status', '$fp32_support', '$fp32_renew', $fp32_install)"; 
```

如果我在查询 $fp32_install 中使用一个空值就可以了，但日期输入为 0000-00-00，如果我使用“$fp32_install”，则日期可以输入，但 NULL 值输入为 1970-01- 01（可能是因为它把 'NULL' 看作一个字符串）

如果我 echo $fp32_install 值显示为 2012-08-16 并且该列的 SQL 类型是 date 并且默认值是 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:13:03.333

如果您使用表单中的已发布值，则 $_POST['value'] 不会为 NULL。

您应该检查空值。

```
if($_POST['value']=="")
{
    $value="NULL";
}
else 
{
    $value="'".date("Y-m-d",strtotime($_POST['value']))."'";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:25:21.117

从您描述的行为来看，听起来好像您的 DATE 列是用`DEFAULT 0`子句定义的，或者您提供的值无效。

根据 MySQL 文档：

<剪辑>

无效的 DATE、DATETIME 或 TIMESTAMP 值将转换为相应类型的“零”值（'0000-00-00' 或 '0000-00-00 00:00:00'）。

</snip>

如果不查看示例代码，很难诊断出确切的问题。作为初学者，我建议您尝试回显发送到数据库的 SQL 语句。

我强烈怀疑 DATE 列的值将出现在它周围的引号中，一个字符串值`'NULL'`，而不是裸关键字`NULL`。

# ios - ios - 为什么我的某些屏幕有导航控制器而有些没有

> ID：11991238
> 
> 赞同：0
> 
> 时间：2012-08-16T16:03:35.167
> 
> 标签：ios, ios5, uinavigationcontroller, storyboard

下面是我的应用程序的故事板。出于某种原因，有些屏幕顶部有导航栏，有些则没有。如何将导航栏添加到每个屏幕？关于我做错了什么导致这种情况发生的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:29:39.897

这里有几个问题需要注意：

*   正如@ohr 所提到的`Simulated Metrics`，在布置您的视图时，它们只是为了方便。这可以让您考虑到可能有 44px 导航栏，因此您知道相应地在视图上布局您的 UI 元素。这并不*意味着*您实际上在视图中有导航控制器（或导航栏）。

*   要拥有功能性导航栏，您有几个选择：

1）在您的情节提要中，将您嵌入`UIViewController`到`UINavigationController`. 这可以通过单击菜单中的*编辑器，然后单击**嵌入*->*导航控制器*来完成。确保在情节提要中选择了所需的视图控制器。

2）如果您只需要一个一次性导航栏（假设您正在显示一个模式并且不需要将视图推送到视图层次结构中），那么您可以选择将一个`UINavigationBar`放入情节提要视图控制器中。您只需将按钮连接到 IBAction 即可让它们执行所需的任务。

希望这可以帮助！

# android - 从 Eclipse 和命令行运行时，android sdk manager 会给出不同的结果

> ID：11991241
> 
> 赞同：0
> 
> 时间：2012-08-16T16:03:45.557
> 
> 标签：android, eclipse

当我从命令行运行 SDK 管理器时，我在日志中看到：

```
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml
Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml
...
  Found Android SDK Platform-tools, revision 12
  Found Android SDK Tools, revision 20
... 
```

当我从 Eclipse 中运行 SDK 管理器时，我看到的是：

```
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Validate XML: https://dl-ssl.google.com/android/repository/repository-7.xml
Parse XML:    https://dl-ssl.google.com/android/repository/repository-7.xml
...
  Found Android SDK Platform-tools, revision 14
  Found Android SDK Tools, revision 20.0.3
... 
```

我的系统上只安装了一份 Android SDK。eclipse在启动它时是否有一些参数传递给SDK管理器，导致它识别“次要版本”？因为看起来这两种方法正在解析相同的 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:12:39.380

看起来它与 SDK 管理器使用的缓存有关。显然，当我从命令行运行它时，它正在获取陈旧的数据。清除缓存使得这两个版本看到相同的包。

# objective-c - Facebook iOS SDK 3.0 - 会话未打开

> ID：11991243
> 
> 赞同：4
> 
> 时间：2012-08-16T16:03:50.347
> 
> 标签：objective-c, ios, facebook

我正在使用最新的 Facebook iOS SDK 3.0

我在登录过程中需要帮助：

首先，我在以下位置声明此属性`AppDelegate.h`：

```
@property (nonatomic, strong) FBSession *session; 
```

在 ViewController 类中，我得到它以在代码中使用它，如下所示：

```
AppDelegate *delegate = [[UIApplication sharedApplication]delegate];
[delegate.session someproperty]; 
```

我在 ViewController 中也有这个方法，可以从以下位置调用`viewDidLoad`：

```
-(void)login
{
    AppDelegate *delegate = [[UIApplication sharedApplication]delegate];
    [delegate.session accessToken];
    NSLog(@"%d",delegate.session.isOpen);
    if (!delegate.session.isOpen)
    {
        delegate.session = [[FBSession alloc] init];
        if (delegate.session.state == FBSessionStateCreatedTokenLoaded)
        {
            [delegate.session openWithCompletionHandler:^(FBSession *session,
                                                      FBSessionState status,
                                                      NSError *error) 
            {
              NSLog(@"%d", delegate.session.isOpen); // First Line //////////////////
            }];
        }
        NSLog(@"%@", delegate.session.description);   // Second Line //////////////////
    }
 } 
```

在 facebook 应用程序获得授权后，第一个`NSLog`打印零，第二个`NSLog`表示`session`状态`FBSessionStateCreated`不是`FBSessionStateOpen`？

这是第二个的输出`NSLog`：

```
2012-08-16 18:37:24.327 Facebook3[2418:f803] <FBSession: 0x6890ff0, state:    FBSessionStateCreated, loginHandler: 0x0, appID: 193716877424306, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0x6890f20>, expirationDate: (null), refreshDate: (null), attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:()> 
```

我在这里缺少什么。

注意：在[https://developers.facebook.com](https://developers.facebook.com)的应用程序设置中，我将应用程序配置为：1- 为 iOS SSO 配置：已启用 2- iOS 本机深度链接：已启用 3- iOS 捆绑包 ID：com.mycompany.appname

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:05:03.233

我在我的项目中使用了这个框架。它工作正常。这是我的相关代码

```
 -(IBAction)logIn:(id)sender;
{
    AppDelegate *appdelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (!FBSession.activeSession.isOpen) {
        [appdelegate sessionOpener];
    }
    else {
        [self loginHelp];
    } 
```

我的 sessionOpener 函数是；

```
 -(void) sessionOpener
{

    [FBSession sessionOpenWithPermissions:nil
                        completionHandler:^(FBSession *session,
                                            FBSessionState status,
                                            NSError *error) {
                            // session might now be open.
                            if (!error) {
                                [self.viewController loginHelp];
                            }
                        }];

     NSLog(@"%d", FBSession.activeSession.isOpen);
    NSLog(@"%@", FBSession.activeSession.description );
} 
```

这个对我有用。可能对你有帮助。

我的控制台打印是：

```
 1
2012-08-16 22:24:55.899 TaraftarlikOyunu[838:c07] <FBSession: 0xd2512c0, state: FBSessionStateOpen, loginHandler: 0xd250240, appID: 433294056715040, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0xd24fda0>, expirationDate: 2012-10-15 19:02:34 +0000, refreshDate: 2012-08-16 19:05:03 +0000, attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(
    )> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:14:49.487

我和你有同样的问题，我在调用handleOpenURL时混合使用FBSession和FBSession实例。我从

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
    [FBSession.activeSession facebookSession handleOpenURL:url];
} 
```

对此

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
    [session facebookSession handleOpenURL:url];
} 
```

# java - 在 JDialog 中使用自定义图标实现最小化功能的最简单方法

> ID：11991257
> 
> 赞同：2
> 
> 时间：2012-08-16T16:04:46.100
> 
> 标签：java, swing, jdialog, windowlistener

我想为 JDialog 实现最小化功能，使用自定义最小化图形图标。我谷歌了它，但没有找到任何令人满意的解决方案。[我在此页面](http://www.javafaq.nu/java-bookpage-26-5.html)上找到了一些非常接近的解决方案

但它用于实现 JFrame ，我想为 JDialog 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:01:40.003

您可能正在寻找`WindowListener`：

```
JDialog f = new JDialog();
f.setSize(100, 100);
f.setVisible(true);

f.addWindowListener(new WindowAdapter() {

   @Override
   public void windowIconified(WindowEvent e) {
      System.out.println("Hi!");
      // Do here your custom action
   }

}); 
```

# windows-phone-7 - 隔离存储上文本文件中的希腊字符

> ID：11991261
> 
> 赞同：0
> 
> 时间：2012-08-16T16:05:03.497
> 
> 标签：windows-phone-7

当我使用 StreamReader 从独立存储中读取文件时，问题就来了。希腊字符显示为?????? 有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:25:12.427

我以 Unicode 格式保存了文件，现在可以了

# mp3 - JavaFx：播放中间有暂停的媒体文件列表

> ID：11991264
> 
> 赞同：1
> 
> 时间：2012-08-16T16:05:16.877
> 
> 标签：mp3, media-player, javafx, javafx-2, playlist

我正在尝试在 JavaFx 中播放 mp3 文件列表，并且需要在每个文件之间暂停几秒钟。这个问题可能是主观的，但我无法找到任何技术来处理当前结束时的另一个 JavaFx MediaPlayer 对象播放 mediaPlayer，它正在一个可运行对象中播放。

任何代码示例/算法都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:58:12.907

创建一个 mediaPlayer 列表，遍历列表并为每个 mediaPlayer：

1.  调用媒体播放器。[setonEndofMedia](http://docs.oracle.com/javafx/2/api/javafx/scene/media/MediaPlayer.html#setOnEndOfMedia%28java.lang.Runnable%29)。
2.  在您的媒体 Runnable 结束时，为您想要暂停的持续时间创建一个[PauseTransition 。](http://docs.oracle.com/javafx/2/api/javafx/animation/PauseTransition.html)
3.  为启动列表中下一个 MediaPlayer 的暂停转换提供一个[setOnFinished事件处理程序。](http://docs.oracle.com/javafx/2/api/javafx/animation/Animation.html#setOnFinished%28javafx.event.EventHandler%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-25T00:03:07.920

把[`@SoulMan`](https://stackoverflow.com/users/747456/soulman)的评论变成答案：

* * *

谢谢我使用了以下代码：

```
PauseTransition pt = new PauseTransition(Duration.millis(2000));
pt.play();
pt.setOnFinished(
    new EventHandler<ActionEvent>() {
      @Override
      public void handle(ActionEvent event) {
         if (mediaPlayer3 != null) {
             mediaPlayer3.play();
         }
      }
}); 
```

# php - 将 JavaScript 元素 ID 传递给 PHP 或表单变量

> ID：11991265
> 
> 赞同：1
> 
> 时间：2012-08-16T16:05:17.353
> 
> 标签：php, javascript

我正在使用谷歌地图 API 根据人员地理位置的纬度和经度来获取城市。我想获取城市名称并能够：显示名称，将其用作变量或隐藏表单字段。我在网上找到了一些很棒的代码，运行了很多这样的代码，下面的代码可以在页面上显示城市名称，但是我不知道如何将它放入 PHP 变量中。我对 Javascript 不是很熟悉，所以任何帮助都会很棒。这是我拥有的代码，如何将“geo”ID 放入 PHP 变量，甚至放入可以发布到另一个页面的隐藏表单字段中：

```
<script language="JavaScript">function updatePage() {if (xmlHttp.readyState == 4){var response = xmlHttp.responseText; document.getElementById("geo").innerHTML = response;}} </script> <? echo "<span id=\"geo\"></span>"; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:13:48.060

它几乎与您已经拥有的完全相同，只需以相同的方式使用 Javascript 将值插入到隐藏字段中，然后像您说的那样发布它。示例代码：

```
function updatePage() {
    if (xmlHttp.readyState == 4){
        var response = xmlHttp.responseText; 
        document.getElementById("geo").innerHTML = response;
        document.getElementById("city_name").value = response;
    }
} 
```

然后你会在这样的表单中拥有隐藏的输入字段：

```
<input type="hidden" name="city_name" id="city_name" value="" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

# c - C中的时间函数？

> ID：11991266
> 
> 赞同：1
> 
> 时间：2012-08-16T16:05:19.733
> 
> 标签：c

我必须找到距离现在 4,000,000 秒的日期。如果我将 4,000,000 添加到 ，我可以得到正确的答案`secondsSince1970`，但我想知道为什么如果我添加 4,000,000 它不起作用`now.tm_sec`？

```
int main(int argc, const char * argv[])
{
    long secondsSince1970 = time(NULL) + 4000000;

    struct tm now;

    localtime_r(&secondsSince1970, &now);

    printf("The date from 4,000,000 seconds from now is %i-%i-%i\n", now.tm_mon + 1, now.tm_wday, now.tm_year + 1900);
} 
```

输出：日期是 10-1-2012

* * *

```
int main(int argc, const char * argv[])
{
    long secondsSince1970 = time(NULL);

    struct tm now;

    localtime_r(&secondsSince1970, &now);
    now.tm_sec += 4000000;

    printf("The date from 4,000,000 seconds from now is %i-%i-%i\n", now.tm_mon + 1, now.tm_wday, now.tm_year + 1900);
} 
```

输出：日期是 8-4-2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:10:25.853

你`struct tm`只是一堆由`localtime_r`. 在调用 to 之后`localtime_r`，分配给这些变量之一不会神奇地使其他变量改变*它们的*值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:17:21.413

添加一个值`tm_sec`只是更改 的整数成员`now`。做你想做的最简单的方法是传递`struct tm`into[`mktime`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/mktime.html)将其转换回`time_t`. 然后调用`localtime_r`结果值。

```
void
add_seconds(struct tm* broken, int num_seconds) {
   time_t then;
   broken->tm_sec += num_seconds;
   then = mktime(broken);
   localtime_r(&then, broken);
}

int
main(int argc, char const* argv[]) {
    time_t secondsSince1970 = time(NULL);
    struct tm now;
    localtime_r(&secondsSince1970, &now);
    add_seconds(&now, 4000000);
    printf("The date at 4,000,000 seconds from now is %i-%i-%i\n",
           now.tm_mon + 1, now.tm_mday, now.tm_year + 1900);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:10:47.663

这样做是不正确的：

```
now.tm_sec += 4000000; 
```

您的 tm_sec 需要介于 0 和 59 之间（闰秒为 60）。

您需要执行以下操作：

```
now.tm_sec += 4000000;
now.tm_min += now.tm_sec / 60; now.tm_sec %= 60;
now.tm_hour += now.tm_min / 60; now.tm_min %= 60;
etc. 
```

# c# - Google Freebase Api C# .Net 示例

> ID：11991267
> 
> 赞同：4
> 
> 时间：2012-08-16T16:05:21.250
> 
> 标签：c#, json, google-api, freebase, mql

我是使用 Goolge API 开发的新手。我正在尝试让 Google.Apis.Freebase.V1 API 在 C# 中工作。有没有人有一个在 C# 中使用这个 API 的小例子？过去几天我一直在寻找，但只能找到几个旧 Freebase Api 的示例。Google API 什么都没有。

我只是在寻找一个简单的例子来建立与 API 的连接，进行搜索，然后如何将 MQL 查询处理回 Json 对象。越简单越好。

谢谢斯科特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:53:55.647

[使用Google API 客户端库](http://code.google.com/p/google-api-dotnet-client/)在 C# 中执行 MQL 查询的正确代码应如下所示：

```
string API_KEY = "your-api-key-here";
FreebaseService service = new FreebaseService{ Key = API_KEY };
String query = "[{\"id\":null,\"name\":null,\"type\":\"/astronomy/planet\"}]";
FreebaseService.MqlreadRequest request = service.Mqlread(query);
string response = request.Fetch();
Console.WriteLine (response); 
```

不幸的是，客户端库现在似乎存在某种错误，因为它没有返回任何结果。我会试着弄清楚那里发生了什么。

**更新：**问题似乎是客户端库传递了 Freebase API 无法支持的 alt=json 参数。Python 客户端库有办法禁用此功能，但在 .Net 中无法执行此操作。您可以在 Google Code 项目上关注[此打开的错误](http://code.google.com/p/google-api-dotnet-client/issues/detail?id=193)。

# allegro5 - 2 位图与 Allegro 5 的比较

> ID：11991268
> 
> 赞同：2
> 
> 时间：2012-08-16T16:05:32.860
> 
> 标签：allegro5

我搜索了很多，但我找不到任何关于在 allegro 5 中比较 2 个位图的信息。在 Allegro 4 中只有 is_same_bitmap() 。我想问你除了比较位图的像素之外是否有任何简单的方法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:22:33.497

您将需要比较像素。（或者你可以计算一个哈希值并比较它们，但是做像素可能会更快，因为你可以在找到不匹配的像素时立即停止。）

为了加快速度，您应该`al_lock_bitmap_region()`通过返回的数据结构锁定位图并直接访问内存。

# java - Android：在 onCreate 内部启动意图会导致无限循环/崩溃

> ID：11991276
> 
> 赞同：1
> 
> 时间：2012-08-16T16:06:00.133
> 
> 标签：java, android

我对 Android/java 很陌生，遇到了我的第一个令人头疼的问题。

我正在尝试根据用户是否登录有条件地更改起始视图（我已经在这里设置了 is_logged_in 以更简单地说明问题）。

非常感谢。

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        boolean is_logged_in = false;

        if(is_logged_in) {
            setContentView(R.layout.activity_main);
        } else {
            menu_sign_up(); // How would I pass the View?
        }
    }

    // Doesn't work, at least when called inside of MainActivity's onCreate
    public void menu_sign_up(/* View view */) {
        Intent intent = new Intent(this, SignUp.class);
        startActivity(intent);
    }

    // Example of a working method, at least when called from android:onClick in XML
    public void menu_sign_in(View view) {
        Intent intent = new Intent(this, SignIn.class);
        startActivity(intent);
        overridePendingTransition(0,0);
    }
}

public class SignUp extends MainActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sign_up);
    }

    // ...
} 
```

****** *** ******下面截断的堆栈跟踪******* *** ****** (adb logcat *:W)*****

 *****```
W/ActivityManager(19583): Activity idle timeout for HistoryRecord{40953fd8 com.example.digitalkarmaeclipse/.SignUp}
W/ActivityManager(): Activity idle timeout for HistoryRecord{}
W/ActivityManager(21900): Launch timeout has expired, giving up wake lock!
W/ActivityManager(21900): Activity idle timeout for HistoryRecord{40a23580 com.example.digitalkarmaeclipse/.MainActivity}
W/ActivityManager(21900): Activity idle timeout for HistoryRecord{40a2c6f8 com.example.digitalkarmaeclipse/.SignUp}
W/ActivityManager(21900): Activity idle timeout for HistoryRecord{40a30100 com.example.digitalkarmaeclipse/.SignUp}
W/ActivityManager(21900): Activity idle timeout for HistoryRecord{40a338e8 com.example.digitalkarmaeclipse/.SignUp}
W/ActivityManager(21900): Activity idle timeout for HistoryRecord{40a376e0 com.example.digitalkarmaeclipse/.SignUp} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:33:12.227

您当前的应用程序结构没有多大意义。是否`SignUp`也必须是一个活动？您可以使用 AlertDialog 来做类似的事情。如果它确实需要成为一个 Activity 然后让它 extend ，那么在这种情况下`Activity`进行扩展没有多大意义。`HomeActivity`

我也不喜欢加入`setContentView()`逻辑陈述的想法。onCreate() 仅在创建 Activity 时调用。因此，如果您启动`SignUp`Activity 然后按后退按钮，您的`HomeActivity`.

编辑：就像鲨鱼说的那样，您似乎没有办法将数据从`SignUp`回传到`HomeActivity`. 你应该尝试使用`startActivityForResult()`然后使用`setResult()`in`SignUp`来表示它是否成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:09:14.420

您需要让 onCreate() 完成，然后将新 Activity 移动到 onResume() 或 onStart(); 当您的活动显示给用户而不是它仍在初始化（本身）时，这些被调用。

此外，看起来您需要设置一个

```
onLoginFinished(int result); 
```

回调...尝试使用 startActivityForResult() 运行您的登录并在 onActivityResult() 中捕获结果

或者 ...

您创建自己的界面，一旦其他活动完成，它会调用 onLoginFinished(isOK) 回调，您可以在其中确定要使用的屏幕。*****

# php - int(1) 和 int(8) 有什么区别？

> ID：11991283
> 
> 赞同：0
> 
> 时间：2012-08-16T16:06:31.783
> 
> 标签：php, mysql

我无法理解 int(1) 和 int(8) 之间的区别，因为 int(1) 也可以有 999.9999。

如果是这样，区别在哪里？INT 数据类型上的长度修饰符是否会影响可存储的值的范围？例如，可以将六位数字存储在 INT(1) 列中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:09:23.920

这是一个可选的定义。它没有定义字段的**大小**。`int`它定义了**表示**。如果您添加`ZEROFILL`到定义中，则该字段的其余部分将用零填充，否则用空格填充。

见[数字类型](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

好处在[这里解释](https://stackoverflow.com/questions/5256469/what-is-the-benefit-of-zerofill-in-mysql)

# java - 如何绕过 Java Web 服务客户端中的证书检查

> ID：11991284
> 
> 赞同：5
> 
> 时间：2012-08-16T16:06:32.127
> 
> 标签：java, https, wsdl

用例：有一个 Web 服务发布为[https://abcd/zz?wsdl](https://a.b.c.d/zz?wsdl)

我想做的是查询这个 URI，如果我得到一个有效的 WSDL，我返回一个布尔值“true”，否则返回一个“false”。现在，如果我通过 Chrome 浏览器访问这个 URL，我将不得不手动接受在证书警告上，然后下载 WSDL。但是如何通过 Java / HttpsURLConnection 做到这一点

```
import java.net.URL;
import java.io.*;
import javax.net.ssl.HttpsURLConnection;

public class JavaHttpsExample
{
  public static void main(String[] args)
  throws Exception
  {
    String httpsURL = "https://a.b.c.d/zz/V2.0/api?wsdl";
    URL myurl = new URL(httpsURL);
    HttpsURLConnection con = (HttpsURLConnection)myurl.openConnection();
    InputStream ins = con.getInputStream();
    InputStreamReader isr = new InputStreamReader(ins);
    BufferedReader in = new BufferedReader(isr);

    String inputLine;

    while ((inputLine = in.readLine()) != null)
    {
      System.out.println(inputLine);
    }

    in.close();
  }
} 
```

我得到一个错误：

> 线程“主”javax.net.ssl.SSLHandshakeException 中的异常：java.security.cert.CertificateException：在 com.sun.net.ssl.internal.ssl.Alerts.getSSLException 中找不到与 IP 地址 abcd 匹配的主题替代名称（未知来源) 在 com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source) 在 com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source) 在 com.sun.net.ssl。 internal.ssl.Handshaker.fatalSE(Unknown Source) at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source) at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source ) 在 com.sun.net.ssl.internal.ssl.Handshaker.process_record(Unknown Source) 在 com.sun.net.ssl 的 com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)。 internal.ssl.SSLSocketImpl。readRecord(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source) at com.sun。 net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source) at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source) at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source ) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source) at JavaHttpsExample.main(JavaHttpsExample.java:14) ：java.security.cert.CertificateException：在 sun.security.util.HostnameChecker 中找不到与 IP 地址 abcd 匹配的主题替代名称。matchIP(Unknown Source) at sun.security.util.HostnameChecker.match(Unknown Source) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkIdentity(Unknown Source) at com.sun.net.ssl.internal。 ssl.X509TrustManagerImpl.checkServerTrusted（未知来源）

我已经用 abcd 替换了真实 IP（当然）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T16:26:30.743

不要使用已存根的 TrustManager，因为这会使您的应用程序信任***所有人***。我建议下载该站点提供的证书并将其添加到私有的、受信任的密钥库中。这使您可以为该站点创建一个例外，而无需为所有人​​开绿灯。

我也喜欢这种方法，因为它不需要更改代码。

在 Chrome 中，单击 URL 左侧的锁定图标。然后点击“证书信息”。转到“详细信息”选项卡，然后单击“复制到文件”。将其另存为“base64 编码的 X.509 (.cer)”到“SITENAME.cer”。

将 $JAVA_HOME/lib/security/cacerts 作为“mykeystore.jks”复制到您的应用程序目录。

安装证书：

```
keytool -keystore mykeystore.jks -storepass changeit -importcert -alias SITENAME -trustcacerts -file SITE.cer 
```

现在，当您运行应用程序时，告诉它使用私有证书存储：

```
java -Djavax.net.ssl.trustStore=mykeystore.jks ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T16:17:25.280

只需在下面的代码中实现您自己的信任管理器

```
import java.net.URL;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.io.*;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class JavaHttpsExample
{
  public static void main(String[] args)
  throws Exception
  {
    String httpsURL = "https://a.b.c.d/zz?wsdl";
    URL myurl = new URL(httpsURL);
    SSLContext ssl = SSLContext.getInstance("TLSv1");
    ssl.init(null, new TrustManager[]{new SimpleX509TrustManager()}, null);
    SSLSocketFactory factory = ssl.getSocketFactory();

    HttpsURLConnection con = (HttpsURLConnection)myurl.openConnection();
    con.setSSLSocketFactory(factory);
    InputStream ins = con.getInputStream();
    InputStreamReader isr = new InputStreamReader(ins);
    BufferedReader in = new BufferedReader(isr);

    String inputLine;

    while ((inputLine = in.readLine()) != null)
    {
      System.out.println(inputLine);
    }

    in.close();
  }
}

class SimpleX509TrustManager implements X509TrustManager {
    public void checkClientTrusted(
            X509Certificate[] cert, String s)
            throws CertificateException {
    }

    public void checkServerTrusted(
            X509Certificate[] cert, String s)
            throws CertificateException {
      }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

# c++ - Simplecrypt 让我的 QT 应用程序在 OS X Mountain Lion 上崩溃，但在 Windows 上完美运行

> ID：11991286
> 
> 赞同：0
> 
> 时间：2012-08-16T16:06:36.663
> 
> 标签：c++, qt, encryption, cross-platform, osx-mountain-lion

我正在使用[Simplecrypt](http://qt-project.org/wiki/Simple_encryption)加密和解密我的 QT 应用程序 (c++) 中的一些基本内容。在 Windows 7 上，一切都可以正常编译并按预期工作。在 Mac OS X Mountain Lion 上，应用程序在启动过程中崩溃并出现以下错误：

```
ASSERT: "i >= 0 && i < size()" in file 
./../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qbytearray.h, line 414
The program has unexpectedly finished. 
```

它确实可以编译，但预编译器给了我一些关于 OS X Mountain Lion 的错误。我不知道这是否与它有关：

```
../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qglobal.h:328:6: warning: #warning "This version of Mac OS X is unsupported" 
```

是否可以让 Simplecrypt 在 Mac OS X Mountain Lion 上运行？

感谢您查看这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:41:54.150

关于 ASSERT，它似乎是使用 QByteArray 时未捕获的数组外异常。

导致崩溃的代码行是什么？您是否尝试调试以查看会发生什么？

预编译期间的警告仅表明 Qt 4.8 不支持 MacOS X Mountain Lion，因此可能会发生一些错误和不需要的行为。

# sql - SQL Server 缓存

> ID：11991287
> 
> 赞同：1
> 
> 时间：2012-08-16T16:06:38.063
> 
> 标签：sql, sql-server-2008, optimization

我有一个查询，最初运行时大约需要 9 秒才能返回，随后重新运行大约需要 4 秒。在阅读完这篇文章后，我相信这是计划缓存的一种表现（尽管我可能是错的）。我正在尝试优化此查询，而这种效果使这变得非常困难。
我对这是一个计划缓存问题的分析是正确的还是有其他选择？如果是这样，有没有办法在本地禁用此缓存（即：对于一个查询，而不是对于服务器）。

最后，选项（重新编译）如何适合这个讨论。

顺便说一句，我正在使用 SQL Server 2008，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:28:23.607

您可以使用“FREEPROCCACHE”清除计划缓存

有关如何从缓存中清除特定计划的示例，请参阅[此 MSDN 页面。](http://msdn.microsoft.com/en-us/library/ms174283.aspx)

也就是说，除非它是一个非常长的 SQL 语句，否则编译计划不会花费 4 秒，因此很可能是数据缓存导致您的查询在第一次执行后运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:17:03.423

罪魁祸首可能不是计划缓存，而是数据缓存。有两种方法可以解决这个问题。在开发服务器上，您可以运行 `DROPCLEANBUFFERS` 以清除数据缓存。您还应该使用查询计划和统计信息来进行优化。在这种情况下，您可以 `SET STATISTICS IO On` 专注于逻辑读取而不是物理读取。如果您在清除数据缓存后运行两次查询，您将看到物理读取急剧下降，但逻辑读取将保持不变。

```
`OPTION RECOMPILE` 
```

只会影响计划缓存，并且只会在查询计划本身由于传入不同参数而发生变化的情况下产生影响，例如当结果集的大小发生巨大变化时。

减少逻辑读取？一般来说，会想到索引和覆盖索引。如果您查看执行计划，SQL Server 可能会在认为需要索引时建议它们。它实际上会为您提供适当的创建索引语法（尽管新索引并不总是有帮助）。同样在实际执行计划中，如果返回的行数与预期的行数大不相同，您可能需要查看统计信息。SQL 服务器维护索引列的统计信息，但如果自动统计未打开，那么如果 where 语句包含未索引的列，那么您可能希望为其生成统计信息（或对其进行索引或打开自动统计信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:12:26.110

这里有很多因素在起作用，但是在进行查询优化时，一种解决计划/数据缓存、数据库上的其他负载等影响的方法是专注于[逻辑读取](http://msdn.microsoft.com/en-us/library/ms184361.aspx)。这是需要完成的读取次数 - 对于给定的运行，它们是否来自缓存并不相关。

例子：

```
USE AdventureWorks2012;
GO       

SET STATISTICS IO ON;
GO
SELECT * 
FROM Production.ProductCostHistory
WHERE StandardCost < 500.00;
GO
SET STATISTICS IO OFF;
GO 
```

结果：

```
Table 'ProductCostHistory'. Scan count 1, logical reads 5, physical 
reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, 
lob read-ahead reads 0. 
```

调整查询时，请专注于使逻辑读取尽可能低。

# apache - Apache .htaccess 白名单不会使用 Mod_jk 阻止 Tomcat

> ID：11991292
> 
> 赞同：0
> 
> 时间：2012-08-16T16:06:49.503
> 
> 标签：apache, .htaccess, tomcat, mod-jk

我的问题是，我最近使用 Apache2.2 前端设置了一个 Tomcat7 应用程序容器。由于该项目仍在开发中，我正在通过在 .htaccess 中为域设置的 IP 白名单控制访问。

我通过 AJP13 将 mod_jk 设置为 Tomcat，它工作得非常好，除了 .htaccess 不会阻止 Tomcat 的转发。换句话说，如果您从“黑色”IP 输入 www.mydomain.com，您将被转发到错误页面，但如果您输入 www.mydomain.com/AppContext，您会通过 Apache 进入 Tomcat

我开始用 Tomcat 弄乱 urlrewritefilter，但由于某种原因它不起作用。我想知道是否有任何方法可以设置 .htaccess 或 apache 来阻止转发到 Tomcat 的请求，类似于对 Apache 的请求？

还注意到像这样使用它时速度会急剧下降，我们在使用 Apache 作为前端时很常见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:50:07.443

.htaccess 文件仅在 Apache 使用基于 <Directory> 的配置（在 httpd.conf 中）时才有效。在 mod_jk 的情况下，匹配请求（由 JkMount 指令指定）将简单地转发到 AJP 连接器。

用于`<Location>`控制访问：

```
<Location "/AppContext">
    Order Deny,Allow
    Deny from all
    Allow from .myCompany.local
</Location> 
```

详情请参阅[`<Location> Directive>`](https://httpd.apache.org/docs/2.2/mod/core.html#location)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T10:42:44.743

我遇到了同样的问题，并找到了一个也可以解决您的问题的解决方案。使用[Nginx](http://nginx.org/en/)或[Squid](https://help.ubuntu.com/lts/serverguide/squid.html)等反向代理服务器来重定向流量 Apache Tomcat。他们都可以使用**htpassword**进行身份验证，因此可以满足您的需求。如果你想使用 Apache 作为前端，那么后端可以是 nginx，在经过适当的身份验证后，它又会重定向到 Tomcat。不过，它可能会影响性能。

[https://www.digitalocean.com/community/tutorials/how-to-set-up-http-authentication-with-nginx-on-ubuntu-12-10](https://www.digitalocean.com/community/tutorials/how-to-set-up-http-authentication-with-nginx-on-ubuntu-12-10)

# oracle - 使用 iBatis 将 NULL 值传递给程序时出错

> ID：11991296
> 
> 赞同：0
> 
> 时间：2012-08-16T16:07:11.323
> 
> 标签：oracle, null, ibatis, procedure, apache-commons-dbcp

我们有一个使用 iBatis 完成的 Oracle 过程调用。该过程的 IN 参数之一是过程中的 VARCHAR2 数据类型，并且是服务/DAO 层中的 java.lang.String。

只要此输入参数以 NULL 值传递，该过程就会失败。当一个值被传递时，该过程被调用而没有任何错误。

对于 中的这个过程参数（可以为空）`parametermap`，我们将属性设置为`jdbctype="java.sql.Types.NULL"`并且它开始工作。

**这是正确的解决方案吗？**

数据库连接是使用在 Tomcat6 服务器中创建的连接池 (dbcp) 建立的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:47:55.817

Ibatis 肯定在将 NULL 值作为参数传递时存在问题。在我们的插入查询中，我们使用这样的包装器：

```
insert into table (column1) values (<isNull property="column1">NULL </isNull><isNotNull property="column1">#column1:INT# </isNotNull>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T09:59:27.187

对于那些仍在使用旧版本的 ibatis（在我的情况下为 2.3）的用户，在传递可空参数时出现上述错误可能是由于未在 parameterMap 中指定 jdbcType 造成的。[iBatis 2.3.0 User Guide](https://ibatis.apache.org/docs/java/pdf/iBATIS-SqlMaps-2_en.pdf) (p.27, Parameter Maps and Inline Parameters - jdbcType) 中有一段指出了这一点。

# excel - 如何在 excel 中使用 CDF - 有人也可以用一些外行术语来解释 CDF 吗？

> ID：11991298
> 
> 赞同：0
> 
> 时间：2012-08-16T16:07:14.640
> 
> 标签：excel, find, cdf

```
 Column A         Column B
   74.220.195.50    0
   203.190.242.69   0
   72.21.202.164    2311.3064862163
   80.239.175.42    1239.6495360036
   61.200.220.183   0
   81.92.239.90     195.4399850652
   95.100.159.8     9.49352979660034E-005
   211.125.95.155   10031.6661327213
   165.72.192.114   0
   207.210.105.72   0
   65.55.239.161    9.801753891
   221.231.132.97   0
   209.85.148.95    9644.360436176 
```

如何从上面的数据中找到 CDF。
我想要 X 轴中的 B 列，Y 轴是 A 列（目标 IP 地址）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:40:08.430

如果您还没有安装数据分析工具包，您可以通过转到工具 > 插件来添加它。

确认已安装后，请转到本文档的第 175 页：

[http://www.dssbooks.com/excel/Files/Look%20Inside/Spreadsheet--DSS-Chapter-07.pdf](http://www.dssbooks.com/excel/Files/Look%20Inside/Spreadsheet--DSS-Chapter-07.pdf)

# php - Set one variable to true based on conditions

> ID：11991301
> 
> 赞同：-4
> 
> 时间：2012-08-16T16:07:19.140
> 
> 标签：php

How can I set one variable to true based on other conditions. Here, instead of doing

```
if ($vara && $varb && $varc) 
```

I'm something like below. Problem is, I'm just not getting something right. Can you please help me?

```
<?php

$onward = false;

$vara = 11;
$varb = 21;
$varc = 3;

if ($vara == 1)
{$onward = true;}else{$onward = false;}

if ($varb == 2)
{$onward = true;}else{$onward = false;}

if ($varc == 3)
{$onward = true;}else{$onward = false;}

if ($onward)
{
echo "Ok";
}else {echo "Not ok";}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:09:10.113

Each of your conditions ignores the result of the previous condition. You need to include the previous state of `$onward` in each subsequent test:

```
if ($vara == 1)
{$onward = true;}else{$onward = false;}

if ($varb == 2 && $onward)
{$onward = true;}else{$onward = false;}

if ($varc == 3 && $onward)
{$onward = true;}else{$onward = false;} 
```

This way, `varb` and `varc` are only tested if `$onward` is still true after the previous test.

This is a particularly ugly way of writing code. If you have three large conditions and you don't simply want to join them on one line as in your `$vara && $varb && $varc`, you should be writing it this way:

```
$onward = ($vara == 1)
$onward = $onward && ($varb == 2);
$onward = $onward && ($varb == 3); 
```

Any time you're simply returning/setting something to true/false in the branches if your if statement, you should just be returning/setting the condition itself.

That is, this:

```
if (condition) {
  return true;
} else {
  return false;
} 
```

should always be written:

```
return condition; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:09:46.090

The problem is, you are overwriting the value of `$onward` in every `if`-statement. Just use

```
$onward = $vara == 1 && $varb == 2 && $varc == 3; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T16:09:42.930

I think you are looking for:

```
$onward = $vara == 1 || $varb == 2 || $varc ==3; 
```

or

```
$onward = $vara == 1 && $varb == 2 && $varc == 3; 
```

depending on your goal.

* * *

With this:

```
if ($varc == 3)
{$onward = true;}else{$onward = false;} 
```

`$onward` will always be `false` if `$varc` is not 3.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T16:10:23.967

I'm sure you mean

```
if (($vara == 1) && ($varb == 2) && ($varc == 3))
{$onward = true;}else{$onward = false;} 
```

or even

```
$onward = (($vara == 1) && ($varb == 2) && ($varc == 3)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T16:09:08.350

A better way of doing this:

```
if ($vara == 1) {$onward = true;} else {$onward = false;} 
```

is this:

```
$onward = ($vara == 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T16:11:00.387

You're overwriting the same variable each time, so the first two conditions are actually pointless.

I don't know why you'd want to do this over the first, more succinct approach, which will have the same logical effect:

```
if ($varc ==== 1 || $varc === 2 || $varc === 3)
    $onward = true;
else
    $onward = false; 
```

Or even just:

```
$onward = $varc === 1 || $varc === 2 || $varc === 3; 
```

Beware also of ever doing `== 1`. In comparisons, data are coerced to their truthy/falsy equivalents, so any truthy value will resolve to true in the comparison `== 1`. To test that something is literally 1, use `===`. (This is a good rule generally unless you know you explicitly want to test for value and not type.)

# javascript - 如何在 Firefox 扩展程序的新选项卡中打开 url？

> ID：11991305
> 
> 赞同：1
> 
> 时间：2012-08-16T16:07:44.217
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在创建一个 firefox 插件，当单击工具栏按钮时，它会在新选项卡中打开一个网站。当我单击工具栏按钮时，我没有得到响应。我的代码中有什么遗漏吗？

第1部分：

```
var app = function () {
 var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
  return {
    init : function () {
      gBrowser.addEventListener("load", function () {
        var toRun = prefManager.getBoolPref("extensions.app.autorun");
        if (autoRun) {
          app.run();
        }
      }, false);
    },

    run : function () {
      var head = content.document.getElementsByTagName("head")[0],
      style = content.document.getElementById("app-style"),
      allLinks = content.document.getElementsByTagName("a"),
      foundLinks = 0;

      if (!style) {
        style = content.document.createElement("link");
        style.id = "app-style";
        style.type = "text/css";
        style.rel = "stylesheet";
        style.href = "chrome://app/skin/skin.css";
        head.appendChild(style);
      } 
    },

    click : function () {
      gBrowser.addEventListener("click", function () {
        gBrowser.addTab("https://www.google.com");
      }, false);
    },
  }
}; 
```

第2部分：

```
function installButton(toolbarId, id, afterId) {
  if (!document.getElementById(id)) 
    var toolbar = document.getElementById(toolbarId);
  // If no afterId is given, then append the item to the toolbar
  var before = null;
  if (afterId) {
    var elem = document.getElementById(afterId);
    if (elem && elem.parentNode == toolbar)
      before = elem.nextElementSibling;
  }

  toolbar.insertItem(id, before);
  toolbar.setAttribute("currentset", toolbar.currentSet);
  document.persist(toolbar.id, "currentset");

  if (toolbarId == "addon-bar")
     toolbar.collapsed = false;
   }
};

Application.getExtensions(function (extensions) {
  var extension = extensions.get("app@app.com");
  installButton("nav-bar", "app-toolbar-button");
});

window.addEventListener("load", app.init, false);
window.addEventListener("click", app.click, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:20:21.487

我认为你应该使用正常的方式（这些是我常规插件的摘录）：

1) chrome.manifest 文件

```
# ... here is packages definitions ... 

# Overlays for Mozilla Firefox
overlay chrome://browser/content/browser.xul chrome://xpcomviewer/content/overlay-firefox.xul
# This is needed for toolbar
style chrome://global/content/customizeToolbar.xul chrome://xpcomviewer/skin/overlays.css

# ... 
```

2) 内容/overlay.xul

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="chrome://xpcomviewer/skin/overlays.css" type="text/css"?>

<!DOCTYPE overlay [
    <!ENTITY % brandDTD SYSTEM "../locale/en-US/brand.dtd">
    %brandDTD;
    <!ENTITY % overlayDTD SYSTEM "../locale/en-US/overlays.dtd">
    %overlayDTD;
]>

<overlay id="eXpcomViewerBrowserOverlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script type="application/javascript" 
            src="chrome://xpcomviewer/content/overlays.js"></script>

    <!-- Toolbar palette overlay -->
    <toolbarpalette id="BrowserToolbarPalette">
        <toolbarbutton id="xpcomviewer-toolbarbutton" 
                       class="toolbarbutton-1" 
                       oncommand="xpcomviewer.overlay.open();" 
                       label="&xpcomviewerCmd.label;"
                       accesskey="&xpcomviewerCmd.key;" 
                       tooltiptext="&xpcomviewerCmd.tip;"/>
    </toolbarpalette>

</overlay> 
```

3) 内容/overlay.js

```
/* Copyright (c) 2007-2012 ondrejd.info
   See the file LICENSE.txt for licensing information. */

/*
#include "global.js"
*/

// Namespace
if(typeof(xpcomviewer) == "undefined") var xpcomviewer = {};
if(typeof(xpcomviewer.overlay) == "undefined") xpcomviewer.overlay = {};
// Implementation of xpcomviewer.overlay
(function() {

    /** @type String */
    const kFIREFOX_ID = "{ec8030f7-c20a-464f-9b0e-13a3a9e97384}";
    /** @type String */
    const kSEAMONKEY_ID = "{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}";
    /** @type String */
    const kTHUNDERBIRD_ID = "{3550f703-e582-4d05-9a08-453d09bdfdc6}";

    /** @type String */
    const kWIN_URI = "chrome://xpcomviewer/content/xpcomviewer.xul";

    /** @type Components.interfaces.nsIPrefBranch */
    const kPREF_SRV = Components.classes["@mozilla.org/preferences-service;1"].
            getService(Components.interfaces.nsIPrefService).
            getBranch("extensions.xpcomviewer.");

  /**
   * Opens XPCOMViewer.
   * 
   * @returns {void}
   */
  this.open = function() 
  {
    let useTab = kPREF_SRV.getBoolPref("useTab");

    if(useTab === true) {
      this.openInTab();
    } else {
      this.openInWindow();
    }
  }; // end open()

  /**
   * Opens XPCOMViewer in a standalone window.
   * 
   * @returns {void}
   */
  this.openInWindow = function()
  {
    let win = window.open(
        kWIN_URI,
        "xpcomviewer", 
        "chrome,extrachrome,menubar,toolbar,resizable,all"
        );

        win.focus();
  }; // end openInWindow()

  /**
   * Opens XPCOMViewer in a new tab if is running on Firefox, SeaMonkey or 
   * Thunderbird. Otherwise opens in a new window.
   * 
   * @returns {void}
   */
  this.openInTab = function()
  { 
        let appInfo = Components.classes["@mozilla.org/xre/app-info;1"].
                getService(Components.interfaces.nsIXULAppInfo);  

        if(appInfo.ID == kFIREFOX_ID || appInfo.ID == kSEAMONKEY_ID) {  
            xpcomviewer.global.openUrlInInternalBrowser(kWIN_URI);
        } else if(appInfo.ID == kTHUNDERBIRD_ID) {  
            xpcomviewer.global.openUrlInContentTab(kWIN_URI);
        } else {  
            this.openInWindow();
        }
  }; // end openInTab()

}).apply(xpcomviewer.overlay); 
```

4) 皮肤/overlay.css

```
@import url("chrome://global/skin/");
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

/* Copyright (c) 2005-2012 Ondrej Donek.
 * See the file LICENSE.txt for licensing information. */

.icon16 {
    list-style-image: url("chrome://xpcomviewer/skin/icons16.png");
    -moz-image-region: rect(16px 16px 32px 0px);
}

#xpcomviewer-toolbarbutton {
    list-style-image: url("chrome://xpcomviewer/skin/icon22.png");
}
toolbar[iconsize="small"] #xpcomviewer-toolbarbutton {
    list-style-image: url("chrome://xpcomviewer/skin/icons16.png");
    -moz-image-region: rect(16px 16px 32px 0px);
}
#mini-xpcomviewer {
    list-style-image: url("chrome://xpcomviewer/skin/icons16.png");
    -moz-image-region: rect(16px 16px 32px 0px);
} 
```

# javascript - 在backbone.js的jQuery回调中绑定这个

> ID：11991307
> 
> 赞同：2
> 
> 时间：2012-08-16T16:07:55.743
> 
> 标签：javascript, jquery, backbone.js

我`this`在backbone.js 项目中遇到了麻烦。

这是我的看法：

```
app.SomeView = Backbone.View.extend({
  render: function() {
    var that = this;
    $.getJSON(someURL, function(result) {
      that.property = result.something;
    });

    return this;
  }
}) 
```

莫名其妙地，在`getJSON`回调内部`that.property`设置了，但只要该函数完成 - 即 at `return this`- `that.property`equals `undefined`，与 相同`this.property`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:16:13.423

正如我的评论中提到的，`$.getJSON`是异步的。该函数在获取适当的 URL`render`时继续执行，因此在之前执行`$.getJSON``return this;``that.property = result.something`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:01:00.080

不知道你为什么不使用模型。回答你的问题，有不同的解决方案，第一个：

使用事件：

```
app.SomeView = Backbone.View.extend({
  render: function() {
    var that = this;
    $.getJSON(someURL, function(result) {
      that.property = result.something;
      that.trigger('DataLoaded', that);
    });

    return this;
  }
});
var view = new app.SomeView();
view.on('DataLoaded', function(theView){ 
  console.log( theView );
}); 
```

第二个，你需要添加一个回调并传递它：

```
app.SomeView = Backbone.View.extend({

  render: function(callback) {
    var that = this;
    $.getJSON(someURL, function(result) {
      that.property = result.something;
      callback(that);
    });
    return this;
  }
});
var view = new app.SomeView();
view.render( function(theView){ 
  console.log( theView );
}); 
```

我的答案是为解决您创建的问题而编写的。但是对于长期的改进，你知道 Models 有一个 fetch 方法，它基本上从服务器加载 JSON 并将其关联到 Model 吗？ [http://backbonejs.org/#Model-fetch](http://backbonejs.org/#Model-fetch) 这就是我将如何加载 JSON：

```
app.SomeModel = Backbone.Model.extend({
  urlRoot : someURL
});
app.SomeView = Backbone.View.extend({
  initialize : function(){
     this.model.on('change', this.render);
  },
  render: function() {
    console.log( this.model.toJSON() );
    return this;
  }
});
var view = new app.SomeView(new app.SomeModel());
view.model.fetch(); 
```

# vba - 如何在 Excel VBA 2010 的 IF-THEN 语句中使用复选框？

> ID：11991308
> 
> 赞同：11
> 
> 时间：2012-08-16T16:07:55.100
> 
> 标签：vba, excel, excel-2010

我需要为 IF-THEN 语句使用复选框的值。根据用户检查的内容，我计算事物的方式会发生变化。但是，我不知道如何使用复选框值，或者如何检测它们。这是我到目前为止的代码：

```
Private Sub Workbook_Open()
    Range("E1:F7,A1:A4,B1:B4,C1:C3").Select
    With Selection.Borders(xlEdgeLeft)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With Selection.Borders(xlEdgeTop)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With Selection.Borders(xlEdgeBottom)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With Selection.Borders(xlEdgeRight)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With Selection.Borders(xlInsideVertical)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    With Selection.Borders(xlInsideHorizontal)
        .LineStyle = xlContinuous
        .ColorIndex = 0
        .TintAndShade = 0
        .Weight = xlThin
    End With
    Range("A1").Select
    Range("A1") = "Time"
    Range("B1") = "Specimen Shape"
    Range("C1") = "Data Type"
    Range("A1:C1").Font.Bold = True
    Range("E1") = "Owner"
    Range("E2") = "Experiment Date"
    Range("E3") = "Specimen ID"
    Range("E4") = "Contaminant"
    Range("E5") = "Leachant"
    Range("E6") = "Temperature"
    Range("E7") = "Regression Title"
    Range("E1:E7").Font.Bold = True
    Columns("A:E").EntireColumn.EntireColumn.Autofit
    'Formatting Column A
    Columns("A").EntireColumn.ColumnWidth = 9.71
    ActiveSheet.CheckBoxes.Add(4, 14.5, 72, 17.25).Select
    Selection.Characters.Text = "Days"
    Range("A6").Select
    ActiveSheet.CheckBoxes.Add(4, 30.5, 73.5, 17.25).Select
    Selection.Characters.Text = "Hours"
    ActiveSheet.CheckBoxes.Add(4, 45.75, 52.5, 17.25).Select
    Selection.Characters.Text = "Minutes"
    'Formatting Column B
    ActiveSheet.CheckBoxes.Add(58, 14.5, 72, 17.25).Select
    Selection.Characters.Text = "Cylinder"
    ActiveSheet.CheckBoxes.Add(58, 30.5, 73.5, 17.25).Select
    Selection.Characters.Text = "Wafer"
    ActiveSheet.CheckBoxes.Add(58, 45.75, 52.5, 17.25).Select
    Selection.Characters.Text = "Irregular"
    'Formatting Column C
    Columns("C").EntireColumn.ColumnWidth = 12.71
    ActiveSheet.CheckBoxes.Add(140.5, 14.5, 72, 17.25).Select
    Selection.Characters.Text = "Incremental"
    ActiveSheet.CheckBoxes.Add(140.5, 30.5, 72, 17.25).Select
    Selection.Characters.Text = "Cumulative"
    Columns("F").EntireColumn.ColumnWidth = 60
    Range("A1:C1").HorizontalAlignment = xlCenter
    Range("F1").Select
    Dim btn As Button
    Dim rng As Range
    With Worksheets("Sheet1")
        Set rng = .Range("A9:C9")
            Set btn = .Buttons.Add(rng.Left, rng.Top, rng.Width, rng.Height)
        With btn
            .Caption = "After making your selections above, click this button to continue."
            .AutoSize = True
            .OnAction = "DataInput"
        End With
    End With
End Sub 
```

我想让它做的，就像一个测试一样，如果选中“时间”复选框，然后按下按钮继续，我希望它使用 IF-THEN 语句说出类似“YAY”的内容。如果未选中“时间”复选框并且您按继续，我希望它说“AWW ...”。

这是我试图实现的，但它不起作用。

```
Sub DataInput()
    If ActiveSheet.Shapes.Range(Array("Check Box 1")).Value = True Then
    MsgBox ("Yay")
    Else: MsgBox ("Aww")
    End If
End Sub 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-16T16:14:12.003

```
If Sheets("Sheet1").OLEObjects("CheckBox1").Object.Value = True Then 
```

我相信蒂姆是对的。你有一个表单控件。为此，您必须使用此

```
If ActiveSheet.Shapes("Check Box 1").ControlFormat.Value = 1 Then 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T16:36:09.420

你可以试试这样的......

```
Dim cbTime

Set cbTime = ActiveSheet.CheckBoxes.Add(100, 100, 50, 15)
With cbTime
    .Name = "cbTime"
    .Characters.Text = "Time"
End With

If ActiveSheet.CheckBoxes("cbTime").Value = 1 Then 'or just cbTime.Value
    'checked
Else
    'unchecked
End If 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-27T14:50:21.887

复选框有一个链接单元格，其中包含代表复选框状态的 True/False。引用此单元格的值比引用嵌入对象（即复选框）的值要容易得多。

手动：右键单击复选框，选择格式，单击链接单元格框，然后选择包含复选框值的单元格。

在代码中：

```
Set cbTime = ActiveSheet.CheckBoxes.Add(100, 100, 50, 15)
With cbTime
    .Value = xlOff ' = unchecked  xlOn = checked
    .LinkedCell = "$A$1"
End With 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-16T14:33:57.983

```
Sub Datainput()
'Checkbox values are 0 (false), 1 (true), 2 (changed or grey)
    If activesheet.CheckBoxes("Check Box 1").value = 1 then
        Msgbox ("Yay")
        Else: Msgbox("Aww")
    End if
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-25T09:51:23.010

我发现我可以直接使用`Worksheets("SheetName").CB_Checkboxname.value` 直接访问复选框而不涉及其他对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-18T02:16:29.880

似乎在您使用的 ActiveX 复选框控件的 VBA 宏代码中

If (ActiveSheet.OLEObjects("CheckBox1").Object.Value = True)

对于您使用的表单复选框控件

If (ActiveSheet.Shapes("CheckBox1").OLEFormat.Object.Value = 1)

# objective-c - 使用 | 为 NSUInteger 赋值 (OR) 运算符？

> ID：11991309
> 
> 赞同：1
> 
> 时间：2012-08-16T16:08:08.093
> 
> 标签：objective-c, integer, bit-manipulation

我正在阅读 Apple 关于 NSDate 的文档。在他们的一个代码示例中，我看到了我以前从未见过的东西： [doc link](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW3)。这是示例代码。

```
NSDate *startDate = ...;
NSDate *endDate = ...;

NSCalendar *gregorian = [[NSCalendar alloc]
                 initWithCalendarIdentifier:NSGregorianCalendar];

NSUInteger unitFlags = NSMonthCalendarUnit | NSDayCalendarUnit;

NSDateComponents *components = [gregorian components:unitFlags
                                          fromDate:startDate
                                          toDate:endDate options:0];
NSInteger months = [components month];
NSInteger days = [components day]; 
```

我对 (OR) | 的使用感到非常困惑 将值分配给 unitFlags 时的运算符。有人能告诉我那里发生了什么吗？他们都被分配还是先检查，如果 nil 寻找另一个？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:37:33.647

那不是 OR 运算符 (||)。那是按位或运算符，可能是您理解的问题。

如果您查看您使用的枚举的定义，您会发现它们是为了兼容性而定义的，并且基本枚举是`CFCalendarUnit`. 因此，让我们看一下定义的片段`CFCalendarUnit`

```
kCFCalendarUnitEra = (1UL << 1),
kCFCalendarUnitYear = (1UL << 2),
kCFCalendarUnitMonth = (1UL << 3),
kCFCalendarUnitDay = (1UL << 4), 
```

查看枚举已分配给的值：

```
kCFCalendarUnitEra = 1 leftShifted once = 2            = 00010
kCFCalendarUnitYear = 1 leftShifted twice = 4          = 00100
kCFCalendarUnitMonth = 1 leftShifted three times = 8   = 01000
kCFCalendarUnitDay = 1 leftShifted four times = 16     = 10000 
```

请注意，二进制中的每个结果都只有一 (1) 个。

使用按位或运算符：

```
NSUInteger unitFlags = (NSMonthCalendarUnit | NSDayCalendarUnit)
unitFlags = 01000 (bitwise-OR) 10000 
```

“按位”表示获取每一位并执行操作，在这种情况下为 OR

```
01000 |
10000 
=====
11000 
```

* * *

然后将此值传递给您的日历，它将使用如下命令解码信息：

```
if (unitFlags & kCFCalendarUnitMonth == kCFCalendarUnitMonth) //Where & is the bitwise-AND operator

11000 &    //Unit Flags
01000      //Value of Month
=====
01000      //If unit flags contains month flag, month flag is returned. 
```

* * *

使用这种技术。您可以通过“标记”每个位在单个 32 位 int 中存储 32 条布尔信息，并快速组合和检索信息。这避免了以下方法：

```
NSDateComponents *components = [gregorian 
                                      hasEraUnit:NO
                                      hasYearUnit:NO
                                      hasMonthUnit:YES
                                      hasDayUnit:YES
                                      hasHourUnit:NO
                                      ....
                                      hasYearForWeekOfYearUnit:NO
                                      fromDate:startDate
                                      toDate:endDate options:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:17:34.187

他们使用这个数字作为标志。基本上，接收器将在标志上查找哪些位为 1。例如，假设您使用整数的前 4 位作为标志，您将查看这些数字中哪些是 1，哪些是零，以了解激活了标志的哪些元素。这允许您使用相同的变量来有效地传递多条信息。

# java - 编译以下代码时出现 Java 包错误

> ID：11991312
> 
> 赞同：0
> 
> 时间：2012-08-16T16:08:35.183
> 
> 标签：java

嗨，我创建了以下代码，并编译了第一个名为“Draggable.java”的文件。第二个文件“Circle.java”向我显示了一个错误....请回答

在 Draggable.java 文件中

```
package graphics;

public interface Draggable {

} 
```

在 Circle.java 文件中

```
package graphics;

public class Circle implements Draggable {

} 
```

注意：我已将上述文件放在一个名为“graphics”的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:14:04.063

如果您的错误是：

```
Circle.java:3: cannot find symbol
symbol: class Draggable
public class Circle implements Draggable {
                               ^
1 error 
```

那么您需要将类路径添加到您的`javac`命令中（假设您在`graphics`目录中）：

```
javac -cp .. Circle.java 
```

理想情况下，您将从项目根目录（的父文件夹`graphics`）编译并执行以下操作来编译：

```
javac graphics/*.java 
```

或者

```
javac graphics/Draggable.java
// followed by
javac graphics/Circle.java 
```

# java - 在 Java 中克隆不可变对象的好处

> ID：11991315
> 
> 赞同：2
> 
> 时间：2012-08-16T16:08:43.437
> 
> 标签：java

假设我们有一个 Java 对象，它只有原始字段标记为 final，因此是不可变的。

现在有几个线程需要这个对象中包含的信息来完成它们的工作，所以有两个选择：

1.  将对单个实例的引用交给所有线程。
2.  为每个线程创建对象的克隆/副本。

从本质上讲，问题归结为：在内部，JVM 是否从复制对象中获得任何好处，例如因为读取变得更有效率，还是仅仅浪费内存，因为这无关紧要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:14:33.050

从技术上讲，如果所述线程在不同的 CPU 内核上运行，由于缓存，无论如何都会有单个对象的多个副本。因此，克隆对象并没有真正的好处，如果多个线程最终在同一个处理器上，实际上可能会损害性能。

事实上，克隆一个不可变对象似乎适得其反，因为在这种情况下，不可变性的目的是为所有线程创建一个共享的只读对象以安全使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:12:14.873

当没有克隆发生时，所有的好处都会有，包括你提到的那个：只有当所有线程都读取相同的内存位置时，读取才会更有效率。例如，如果将两个线程分配给同一个内核，则其缓存可以满足两个线程的读取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:13:48.263

不可变对象极大地简化了您的程序，因为它们：

1.易于构建、测试和使用

2.自动线程安全，没有同步问题

3.不需要复制构造函数

4.不需要克隆的实现

5.允许hashCode使用延迟初始化，并缓存其返回值

6.用作字段时不需要防御性复制制作好的Map键和Set元素（这些对象在集合中不得更改状态）

7.它们的类不变量一经建立就建立了，再也不需要检查了

8.总是有“失败原子性”：如果一个不可变对象抛出一个异常，它永远不会处于不受欢迎或不确定的状态

来源：[http ://www.javapractices.com/topic/TopicAction.do?Id=29](http://www.javapractices.com/topic/TopicAction.do?Id=29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T16:14:04.433

使用不可变对象的全部意义在于您可以以线程安全的方式共享它们，因此手动复制/克隆它们毫无意义。

请注意，在您的情况下，例如，如果两个线程在不同的 CPU 上运行，则每个 CPU 的缓存中可能有多个字段副本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T16:12:25.107

可能不变性的主要好处是所谓的“安全发布”，这意味着您可以安全地将对象引用提供给许多线程/进程，而不必担心任何并发症。

只是给每个人相同的参考 - 克隆否定了这个好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T16:15:01.053

这会浪费内存。创建对相同内存地址的新引用比一次又一次地复制所有信息要少得多。在这种情况下，通过克隆您不会获得任何收益，除非在极少数情况下，您将对象用作`synchronized`块的锁或类似的东西。但即便如此，这将是一个奇怪的应用程序。

# watir-webdriver - 切换窗口失败

> ID：11991321
> 
> 赞同：0
> 
> 时间：2012-08-16T16:08:56.423
> 
> 标签：watir-webdriver, selenium-chromedriver

我究竟做错了什么。找不到新打开的窗口时脚本超时。

```
C:/Ruby/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)
        from C:/Ruby/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
        from C:/Ruby/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
        from C:/Ruby/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1293:in `request'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:745:in `start'
        from C:/Ruby/lib/ruby/1.9.1/net/http.rb:1284:in `request'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/http/default.rb:82:in `response_for'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/http/default.rb:38:in `request'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/bridge.rb:598:in `raw_execute'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/bridge.rb:576:in `execute'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/remote/bridge.rb:207:in `getWindowHandles'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/sele
nium/webdriver/common/driver.rb:185:in `window_handles'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-we
bdriver/window.rb:119:in `locate'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-we
bdriver/window.rb:106:in `handle'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-we
bdriver/window.rb:99:in `use'
        from tst.rb:38:in `rescue in <main>'
        from tst.rb:31:in `<main>' 
```

--

```
begin
Timeout::timeout(10) do
   b.frame(:id, "ifContentBody").link(:text, "Filter").click
  puts b.check_for_http_error()
end
  rescue Exception => e
  puts "try get popup"
  b.window(:url, 'https://www.XXXXX.com/XXXX/aspx/InvestmentDetailOptions.aspx?IDAssetType=').use do
 puts b.check_for_http_error()
 b.button(:id, "ctl00_ContentPlaceHolder2_btnSubmit2").click
 end 
```

结尾

请指教。我正在使用带有 chrome 的 watir-webdriver。我已经尝试了所有 watirspec 看起来可行的方法，但我无法弄清楚。

谢谢

米

# matlab - 如何在 MATLAB 中生成具有不同 n 的正态阶统计的期望值？

> ID：11991322
> 
> 赞同：1
> 
> 时间：2012-08-16T16:08:58.383
> 
> 标签：matlab, statistics

MATLAB 中是否有一个嵌入式函数，我可以使用它来生成 n 从 1 到 1000 的正常顺序统计的预期值？

或者有人知道是否有第三方算法吗？

任何建议都会有所帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T21:18:42.983

我不认为这个问题提出得很好。

但是如果你使用 linspace(a,b,step) 制作了一个向量

```
vector = linspace(1,1000,n); 
```

那么你可以使用

```
expectation = sum(vector)/n; 
```

但这只是一个平均值，因为每个点的概率都是未知的

# ruby-on-rails - 用于隐藏erb的rails ruby 视图代码

> ID：11991325
> 
> 赞同：0
> 
> 时间：2012-08-16T16:09:04.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

我的视图代码中有这个：

```
<h2>What Others Are Saying...</h2>

<% @comments.each do |comment| %>
<ul>
    <li><%= comment.email %></li>
    <li><%= comment.body %></li>
</ul>
<% end %>

<hr>
<%= render "comments/comment_form" %> 
```

控制器代码：

```
 before_filter :authenticate_user!, except: [:index, :show]

  def index
    @posts = Post.all
  end

  def show
    @post = Post.find(params[:id])
    @comment = @post.comments.build
    @comments = @post.comments
  end 
```

当没有评论时，我仍然在我的 DOM 中看到 ul > li，有没有办法在 soemone 实际发布消息之前不渲染它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:19:09.253

您的`@comments`变量不为空。当数据库返回零评论时，`@comments`数组中仍然有一个新的评论实例。这就是您的 HTML 代码在您看不到任何评论的情况下被渲染的原因。您可以使用以下代码

```
<% @comments.each do |comment| %>
  <% if comment.id? %>
    <ul>
      <li><%= comment.email %></li>
      <li><%= comment.body %></li>
    </ul>
  <% end %>
<% end %> 
```

**更新**

```
@comment = @post.comments.build
# When you do @post.comments after building in the above line,
# your @comments will have the built comment as well.
@comments = @post.comments 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:13:55.627

我最初误解了您的问题，并认为您想要一个`<ul></ul>`包装所有评论，并避免`<ul></ul>`在没有评论时出现空白。在这种情况下，一个简单的`if`块就足够了：

```
<h2>What Others Are Saying...</h2>

<% if ! @comments.empty? %>
    <ul>
    <% @comments.each do |comment| %>
         <li><%= comment.email %></li>
         <li><%= comment.body %></li>
    <% end %>
    </ul>
<% end %> 
```

但正如其他人所指出的，这个问题实际上是由于您`@post.comments.build`在分配之前使用了`@comments`. 我不确定你为什么这样做`build`，但如果你在分配之后这样做*，*那么`@comments`它可能会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:15:23.703

如果 @comments 是一个空数组，则循环中的任何内容都不应呈现。检查@comments 是否真的为空

```
<%= @comments.size %> 
```

控制器不应调用 build

```
 def show
    @post = Post.find(params[:id])
    @comments = @post.comments
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:16:11.857

奇怪的是，如果`@comments`实例变量为空，则`each`不应渲染块内的任何内容。

如果`@comments`通过另一个模型（`@blog.comments`或其他东西）引用，您确定您没有在控制器（例如`@blog.comments.build`）中为 comment_form 构建“空白”注释吗？

如果您可以向我们展示控制器操作以及视图的其余部分，它可能会变得清晰。

要调试，您还可以将此行放在`each`块之前：

```
<%= @comments.inspect %> 
```

这应该告诉你`@comments`变量是否真的为空。

# .net - 如何屏幕捕获隐藏在另一个winform后面的winform？

> ID：11991326
> 
> 赞同：1
> 
> 时间：2012-08-16T16:09:06.563
> 
> 标签：.net, winforms, screen-capture, delphi-prism

我需要屏幕捕获一个在另一个窗口后面或前面的winform，没有别的。

我可以截屏一个winform，但它基本上可以截取该区域的所有内容。

这是我的屏幕截图。

```
method ControlWin.capturescreen;
begin
        var myGraphics := self.CreateGraphics;
        var memoryGraphics := self.CreateGraphics;
        var s := self.Size;
        ControlScreen := new Bitmap(s.Width, s.Height, myGraphics);
        memoryGraphics := Graphics.FromImage(ControlScreen);
        memoryGraphics.CopyFromScreen(self.Location.X, self.Location.Y, 0, 0, s);
end; 
```

这是它的外观：

![在此处输入图像描述](../Images/2800920dc15c31fea34db77f41dd3f44.png)

C# 或 delphi-prism 中的任何提示或线索将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:37:43.247

这在 C# 中起到了作用。

_onTopForm 是 TopMost 设置为 true 的第二种形式。将它放在 Form1 上。

单击该按钮，Form1 的屏幕截图将写入磁盘。_onTopForm 不会出现在屏幕截图中。

```
public partial class Form1 : Form
{
    readonly OnTopForm _onTopForm = new OnTopForm();

    public Form1()
    {
        InitializeComponent();
        _onTopForm.Show();
        _onTopForm.TopMost = true;
    }

    private void Button1Click(object sender, EventArgs e)
    {
        Bitmap bmp = new Bitmap(Width, Height);
        DrawToBitmap(bmp, new Rectangle(Point.Empty, bmp.Size));

        using (FileStream fs = new FileStream("C:\\temp\\screenshot.jpeg", FileMode.OpenOrCreate))
        {
            bmp.Save(fs, ImageFormat.Jpeg);
        }
    }
}

public partial class OnTopForm : Form
{
    public OnTopForm()
    {
        InitializeComponent();
    }
} 
```

# wpf - 什么会导致 WPF 绑定中断（使用 ADO.net）？

> ID：11991334
> 
> 赞同：1
> 
> 时间：2012-08-16T16:09:28.873
> 
> 标签：wpf, data-binding, user-controls, ado.net

我已经解决这个问题3天了，我没有选择。不知道还能做什么。我有一个内部带有 TextBoxes 的 UserControl，所有定义都类似：

```
<TextBox x:Name="txtFreeFormat" Grid.Row="0" Grid.Column="1" TextWrapping="Wrap"
                     KeyUp="txtFreeFormat_KeyUp" PreviewKeyDown="txtFreeFormat_PreviewKeyDown" TextChanged="txtFreeFormat_TextChanged"
                     Text="{Binding [FREEFORMATADDRESSUI], Mode=OneWay, Converter={StaticResource FreeFormatOnlyConverter}, diag:PresentationTraceSources.TraceLevel=High}"
                     IsEnabled="{Binding Path=IsLocationEnabled, ElementName=LocationUserControl}"
                     IsReadOnly="{Binding Path=IsReadOnly, ElementName=LocationUserControl}"/> 
```

此 TextBox 存在于 WPF 用户控件中，该控件存在于 Win32 应用程序的 ElementHost 中。

我将 WPF UserControl 的 DataContext 设置为 DataView。我基本上希望数据在 DataView 中更新时随时更新，反之亦然，因此我有一个 OneWay 绑定。

允许用户输入它，但是当用户输入时我不执行任何明确的源更新。

我奇怪的问题是应用程序中的某些地方，这个控件工作正常，绑定是完美的。应用程序中的其他地方，当 DataView 更新其数据时，WPF UserControls 的 UI 不会更新。我到处都有痕迹，并且没有绑定错误。因此 WPF UserControls 的 DataContext 是最新的，但 UI 并未反映这些更改。

我还能寻找什么？什么会导致绑定与 DataView 断开连接？

谢谢！！！

## 更新：

我不敢相信在使用大马士革指定的更改后它仍然无法正常工作。我什至在 DataView 更新后调用我自己的函数来重置绑定：

```
Public Sub RefreshBinding()
    If WPFUserControl IsNot Nothing AndAlso WPFUserControl.DataContext IsNot Nothing Then
        Dim dv As DataView = WPFUserControl.DataContext
        WPFUserControl.DataContext = Nothing
        WPFUserControl.DataContext = dv
    End If
End Sub 
```

我注意到此时转换器不再触发。当 DataContext = Nothing 时，字段也不会清除。

你现在可以明白我为什么坚持了 3 天了 :(

## 更新 2：

注意到一些新的东西......我们正在到达某个地方。一旦我在文本框中键入，绑定似乎分离，我在输出窗口中收到此警告：

BindingExpression (hash=31836339)：分离

因此，我已将 TextBox 恢复为具有 UpdateSourceTrigger 显式模式的双向绑定。这已经停止了该警告，但我仍然有我的奇怪行为。

所有解释都在这里： [http ://social.msdn.microsoft.com/forums/en-US/wpf/thread/3d092257-f5a9-4dc5-b9ee-ac1f0538df71/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3d092257-f5a9-4dc5-b9ee-ac1f0538df71/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:01:46.510

所以最后，我还没有找到解决办法。相反，我决定监听`ColumnChanged`DataView 的事件`DataTable`并调用`BindingExpression.UpdateTarget()`目标`TextBox`控件上的相应事件。这对我有用！

# c++ - 继承和显式构造函数？

> ID：11991336
> 
> 赞同：4
> 
> 时间：2012-08-16T16:09:34.637
> 
> 标签：c++, constructor, c++11, explicit-constructor

考虑以下代码：

```
template<typename T> class Base
{
    Base();
    Base(const Base<T>& rhs);
    template<typename T0> explicit Base(const Base<T0>&  rhs);
    template<typename T0, class = typename std::enable_if<std::is_fundamental<T0>::value>::type> Base(const T0& rhs);
    explicit Base(const std::string& rhs);
};

template<typename T> class Derived : Base<T>
{
    Derived();
    Derived(const Derived<T>& rhs);
    template<class T0> Derived(const T0& rhs) : Base(rhs); 
    // Is there a way to "inherit" the explicit property ?
    // Derived(double) will call an implicit constructor of Base
    // Derived(std::string) will call an explicit constructor of Base
}; 
```

有没有办法重新设计这段代码，`Derived`使所有的构造函数都`Base`具有相同的显式/隐式属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:13:41.423

C++11[将其作为一个特性提供](http://en.wikipedia.org/wiki/C++11#Object_construction_improvement)。然而，甚至 GCC 还没有真正实现它。

当它实际实现时，它看起来像这样：

```
template<typename T> class Derived : Base<T>
{
    using Base<T>::Base;
}; 
```

话虽如此，它可能对您的情况没有帮助。继承的构造函数是一个全有或全无的命题。你得到*所有*的基类构造函数，完全使用它们的参数。另外，如果你定义一个与继承的具有相同签名的构造函数，你会得到一个编译错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:51:04.087

To detect implicit/explicit constructibility for SFINAE:

```
template<class T0, typename std::enable_if<
    std::is_convertible<const T0 &, Base<T>>::value, int>::type = 0>
    Derived(const T0& rhs) : Base<T>(rhs) { }
template<class T0, typename std::enable_if<
    std::is_constructible<Base<T>, const T0 &>::value
    && !std::is_convertible<const T0 &, Base<T>>::value, int>::type = 0>
    explicit Derived(const T0& rhs) : Base<T>(rhs) { } 
```

Use the fact that `std::is_convertible` checks *implicit* convertibility and use `std::is_constructible` to check explicit convertibility in addition.

Edit: fixed `enable_if` template parameters using solution from [boost::enable_if not in function signature](https://stackoverflow.com/questions/8743159/boostenable-if-not-in-function-signature).

Checks:

```
Derived<int>{5};                            // allowed
[](Derived<int>){}(5);                      // allowed
Derived<int>{std::string{"hello"}};         // allowed
[](Derived<int>){}(std::string{"hello"});   // not allowed 
```

# android - 仅在一项活动中访问标题栏中的按钮

> ID：11991340
> 
> 赞同：0
> 
> 时间：2012-08-16T16:09:44.573
> 
> 标签：android, android-activity, android-tabhost, titlebar

我有一个自定义标题栏和`TabHost`我正在使用的布局。`TabHost`有 4 个带有不同活动的选项卡。我`ImageButton`在标题栏中添加了一个，但我只希望它在其中一个活动中处于活动状态。有人可以告诉我该怎么做吗？

另外，如果我在标题栏xml中定义按钮可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:34:53.460

```
myTabHost.setOnTabChangedListener(new OnTabChangeListener() {
  @Override
  public void onTabChanged(String tabId) {
    if (tabId =="yourTabId") {
      yourButton.setVisibility(View.VISIBLE);
    }
    else
    {
        yourButton.setVisibility(View.INVISIBLE);
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:14:23.530

想到的一种方法是将侦听器设置为选项卡按钮，以便您始终知道您所在的选项卡。如果它是正确的，则在该按钮上设置可见性（0），否则设置可见性（8）。不过，可能有更简单的方法来做到这一点。

# asp-classic - ado.recordset “丢失”字段

> ID：11991344
> 
> 赞同：2
> 
> 时间：2012-08-16T16:10:04.607
> 
> 标签：asp-classic, ado, recordset

我正在研究一个古老的经典 asp 项目。该数据库的结构非常糟糕，每一行都远远超出了限制（18 个不同的 nvarchar(2000)、众多 nvarchar(256) 等等......）

我做了一个小修复，改变了从记录集中检索字段的顺序。

我现在所看到的让我感到困惑。当我使用其他字段时，最初存在的字段会消失。

例如，我有：

```
if(RS.Fields('field1').value){
   //do something
}
if((RS.Fields('field2').value){
   //do something
} 
```

在我的一些结果中，field2 在选中时没有显示（在 field1 之后），但如果我在 field1 之前立即检查，它确实存在。

这是一种已知的行为吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:48:29.160

问题似乎有两个方面：

一，字段出现在代码中的顺序需要与它们在数据库中的顺序相匹配。是的，不知道，但它有效。

二，字段需要立即加载到变量中。

```
if(RS.Fields('f1')){
   doWork(RS.Fields('f1'));
} 
```

不起作用，但是

```
var f1 = RS.Fields('f1');

if(f1){
   doWork(f1)
} 
```

做。

# javascript - 我可以在页面加载期间将文本加载到 html 中吗

> ID：11991357
> 
> 赞同：2
> 
> 时间：2012-08-16T16:11:03.733
> 
> 标签：javascript, html, ajax, web, template-engine

我想知道在加载网页期间是否有任何方法可以加载其他文件。我正在尝试将 JavaScript 模板引擎集成到我的网站中，并希望将我的模板保存在外部文件中，并且不必异步加载这些模板，而是在页面中的某处指定所需的模板并使用它们的内容（这将已与网页一起加载）在 JavaScript 中。
有没有办法实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:15:03.660

您可能会查看`JSONP`哪些允许您将它们包含为听起来更像您想要的脚本：

```
// HTML
<script>
    var files = [];
    var cache = function(data) {
        files.push(data);
    });
</script>
<script src="external.js"></script>
// External File
cache("<content>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:20:04.313

沿着文档同步加载其他 HTML 文件是很困难的。如果不是不可能的话。您必须加载返回 HTML 字符串或可能使用框架的 javascript 文件。

但是许多模板语言允许您直接在 HTML 代码中定义模板，f.ex Handlebars：

```
<script id="entry-template" type="text/x-handlebars-template">
    template content
</script> 
```

您还可以使用 Node 或其他后端语言从目录中提取模板并创建一个包含所有模板字符串的全局模板对象。

当我使用前端模板进行开发时，我在开发时使用单独的模板文件和 Ajax，然后我们有一个 node.js 脚本，它可以提取所有模板并将它们放在一个全局对象中，而不是放在主 HTML 请求中，以便更快地访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:12:01.023

是的，你可以用 jquery-ajax 在一两行中完成它

* * *

[使用 .load http://api.jquery.com/load/](http://api.jquery.com/load/)加载完整文件

```
$('#result').load('ajax/test.html'); 
```

* * *

或 .html [http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:14:23.743

```
.html() 
```

此方法不适用于 XML 文档。

在 HTML 文档中，.html() 可用于获取任何元素的内容。如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。考虑这段代码：

```
$('div.demo-container').html(); 
```

为了检索以下内容，它必须是文档中第一个带有 class="demo-container" 的内容：

```
<div class="demo-container">
  <div class="demo-box">Demonstration Box</div>
</div> 
```

结果将如下所示：

```
<div class="demo-box">Demonstration Box</div> 
```

此方法使用浏览器的 innerHTML 属性。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字字符，Internet Explorer 有时会省略属性值的引号。

[更多帮助](http://api.jquery.com/html/)

# xml - 如何使用命名空间使用 ... 语法创建 linq 查询

> ID：11991360
> 
> 赞同：1
> 
> 时间：2012-08-16T16:11:17.093
> 
> 标签：xml, vb.net, linq

我对命名空间的工作方式感到困惑。我正在尝试获取`worksheet`where`ss:Name="Datagrid"`并从中获取`data`节点 where`name="emailname"`

```
Imports <xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
Module Module1   
    Sub Main()
        Dim xmlFile As String = System.AppDomain.CurrentDomain.BaseDirectory & "Datagrid.xml"
        Dim root As XElement = XElement.Load(xmlFile)

    ''select worksheet where ss:Name="Datagrid""
    'Dim dg = From item In root .......................

    ''get data from wokrsheet...table..row...data where = name="emailname"  (not ss:name="emailname")

    'Dim data = From item In dg .......................
    End Sub
End Module 
```

XML

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
  <Worksheet ss:Name="Datagrid">
    <Table ss:ExpandedColumnCount="13" ss:ExpandedRowCount="11" x:FullColumns="1"
     x:FullRows="1" ss:DefaultRowHeight="15">
      <Row ss:Index="3" ss:AutoFitHeight="0">
        <Cell Name="emailname">
          <Data ss:Type="String">email address</Data>
        </Cell>
      </Row>
      <Row ss:Index="4" ss:AutoFitHeight="0">
        <Cell Name="username">
          <Data ss:Type="String">user name</Data>
        </Cell>
      </Row>
    </Table>
  </Worksheet>
  <Worksheet ss:Name="Properties">
    <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="3" x:FullColumns="1"
     x:FullRows="1" ss:DefaultRowHeight="15">
      <Row>
        <Cell>
          <Data ss:Type="Number">1</Data>
        </Cell>
      </Row>
      <Row>
        <Cell>
          <Data ss:Type="Number">2</Data>
        </Cell>
      </Row>
      <Row>
        <Cell>
          <Data ss:Type="Number">3</Data>
        </Cell>
      </Row>
    </Table>
  </Worksheet>
</Workbook> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:15:19.120

`Imports`用文件顶部的语句声明命名空间。`<ns:name>`然后你可以用语法来引用它们。

所以

```
Imports <xmlns="urn:schemas-microsoft-com:office:spreadsheet">
Imports <xmlns:o="urn:schemas-microsoft-com:office:office">
Imports <xmlns:x="urn:schemas-microsoft-com:office:excel">
Imports <xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
Imports <xmlns:html="http://www.w3.org/TR/REC-html40"> 
```

将为您提供由您提供的 XML 定义的名称空间。

现在您可以访问`<Workbook>...<Table>.@x:FullRows`包括在 LINQ 查询中。

VB.NET 的这些 XML 特性在 Microsoft 文档中称为[轴属性。](http://msdn.microsoft.com/en-us/library/bb384769.aspx)

我已将您的 XML 粘贴到 VS2008 中，并确定您的问题是 XML 标记（包括 Axis 属性）是区分*大小写*的：

```
''select worksheet where ss:Name="Datagrid""
'Dim dg = From item In root .......................
Dim dg = root.<Worksheet>.FirstOrDefault(Function(w) w.@ss:Name = "Datagrid")

If dg Is Nothing Then _
    Throw New Exception("DataGrid not found")

''get data from wokrsheet...table..row...data where = name="emailname"  (not ss:name="emailname")

'Dim data = From item In dg .......................
' Both of the following lines work, but the second answers the question in the title:
'Dim data = dg.<Table>.<Row>.<Cell>.FirstOrDefault(Function(d) d.@Name = "emailname")
Dim data = dg...<Cell>.FirstOrDefault(Function(d) d.@Name = "emailname")

If data Is Nothing Then _
    Throw New Exception("emailname not found")

Console.WriteLine(data.<Data>.Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:02:54.170

要获得更简洁的语法，建议尝试如下所示的 Linq-to-XML XPath 扩展方法。

更新 #1：如果 XML 文件不包含任何命名空间，则以下代码有效。研究考虑命名空间的解决方案。

```
Dim root = XElement.Load(xmlFile)
Dim data = root.XPathSelectElements("Worksheet[@Name=""Datagrid""]/Table/Row/Cell/Data[@Name=""edata""]") 
```

# c++ - 编译使用 SWI-Prolog 接口的 C++ 程序

> ID：11991363
> 
> 赞同：0
> 
> 时间：2012-08-16T16:11:24.310
> 
> 标签：c++, g++, swi-prolog, ffi

我正在编译[此处](http://electricbacon.wordpress.com/2010/09/08/calc-example-using-swi-prolog-and-c/)找到的程序，在运行时出现错误：

这是我编译它的方法：

```
$ g++ -I/home/jpthomps/Desktop/pl-6.0.2/src main.cpp -L/usr/local/lib/swipl-6.0.2/lib/x86_64-linux -lswipl
main.cpp: In function ‘int main()’:
main.cpp:8:39: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
main.cpp:20:22: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings] 
```

然后当我尝试运行编译后的程序时：

```
$ ./a.out
./a.out: error while loading shared libraries: libswipl.so.6.0.2: cannot open shared object file: No such file or directory 
```

我是否需要在我的 .cpp 文件中添加一些内容来告诉它 libswipl.so.6.0.2 文件的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:21:19.440

您看到的问题与运行`a.out`无法找到您的动态库有关。有几种依赖于系统的方法来处理这个问题。例如，在[Linux 上，您可以设置`LD_LIBRARY_PATH`](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)包含所在的目录`libswipl.so.6.0.2`。

* * *

尽管编译警告与运行时错误无关，但修复它们仍然是个好主意：

```
static const char * av[] = {"calc.pl", NULL};
....
const char * expression = "pi/2"; 
```

# python - 显示 IPython 变量而不使用 whos 输入

> ID：11991368
> 
> 赞同：10
> 
> 时间：2012-08-16T16:11:36.920
> 
> 标签：python, ipython, workspace

有没有一种方法可以查看当前工作区中的 IPython 变量列表，而无需发送命令“whos”。我经常发现自己不记得在键入命令时要使用哪些变量名。

在 IPython 中，我必须删除我正在输入的当前行并发送一个“whos”语句以查看当前可用的变量。通常，在 MATLAB 等基于 GUI 的工具中，我只会在我的工作区变量窗口中向右看。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T10:08:34.717

正如其他人所说，您可以在同一个 Ipython 内核上拥有任意数量的前端，例如，一个内核的 2 个命令窗口。如果你使用 Qt 控制台，快捷方式可以让你接近你想要的。

**使用Ctrl+Shift+T**启动具有相同内核的第二个选项卡。然后，您只需在第一个选项卡上编写代码，当您需要 的输出时`whos`，按**Ctrl+PageDown**进入另一个选项卡，您可以在`whos`不删除第一个选项卡中的代码的情况下运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T23:02:09.363

这不是一个直接的答案，但无论如何可能对您有用。至少在我使用的系统上，

Ctrl-a 将光标定位在行首

Ctrl-k 将“杀死”该行（认为剪切）

输入谁

Ctrl-y 将“拉”线，因为它回来了（想想粘贴）

这些是 emacs 键绑定，顺便说一句，并显示在许多地方，如 Bash 和使用 readline 库的任何地方。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T16:45:47.903

您可以在单个 IPy 内核上拥有任意数量的 IPython 前端，所以是的，如果您想要另一个前端，您可以这样做，但它看起来很笨拙。你不能使用 IPython Notebook 吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T16:15:38.247

您是否在问是否可以从另一个 shell 实例访问 IPython 的变量？

因为现在的方式是，您有一个*命令*窗口，您可以在其中通过发出命令与 shell 交互，所以与 MATLAB 不同的是，没有其他窗口可以查看其他信息，所以除非您有，否则我不知道这怎么可能IPython 的另一个实例以某种方式从您当前的 shell 访问信息。

所以答案似乎是*否定*的。

（如果有可能做到这一点，我会和你一样高兴地发现）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-25T01:23:25.453

在 iPython notebook 中，调用魔术函数“%qtconsole”，会出现一个控制台，使用相同的内核。或者，在终端中，您可以键入“ipython qtconsole --existing”以启动 qtconsole 中的最新内核。如果您知道内核的名称（如启动时的终端输出所示），那么您可以明确告诉它，“ipython qtconsole --existing 87f7d2c0”

# python - python：'L'格式代码的整数超出范围

> ID：11991370
> 
> 赞同：1
> 
> 时间：2012-08-16T16:11:39.443
> 
> 标签：python, struct.pack

在python中，代码如下

```
envimsg = struct.pack("!LHL", 1, 0, int(jsonmsg["flow_id"], 16)) + \
          struct.pack("!HQH", 1, int(flow["src id"],16), 0) + \
          struct.pack("!HQH", 1, int(flow["dst id"],16), int(flow["dst port"],16)) + \
          struct.pack("!H", 0) + \
          struct.pack("!HHHLL", int(jsonmsg["app_src_port"],10), int(jsonmsg["app_dst_port"],10), int(jsonmsg["app_proto"],10), int(jsonmsg["app_src_ip"],10), int(jsonmsg["app_dst_ip"],10)) 
```

在线

```
struct.pack("!H", 0) + \ 
```

我遇到这个错误：

```
 File "./Translate_2503.py", line 205, in lavi2envi
    struct.pack("!H", 0) + \
struct.error: integer out of range for 'L' format code 
```

这很奇怪，因为我尝试打包 H（无符号短）。

有什么线索吗？

我的 python 版本 2.7.3。CPU 架构是 32 位的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-15T16:22:52.323

Even in the error line is pointing to this line, the error is not located there. Executing this instruction in the Python interpreter produces no error:

```
import struct
struct.pack("!H", 0)
>>> '\x00\x00' 
```

This makes sense, as the error is complaining on the 'L' format code, so the error will be located in the ones which use this format.

Given that 'L' is used for unsigned long, and the message complains on being out of range, the error is because one (or more) of the variables used are negative, producing the out of range for unsigned long.

This can be verified in the Python interpreter:

```
import struct

struct.pack("!HHHLL", 1, 2, 3, 4, 5)
>>> '\x00\x01\x00\x02\x00\x03\x00\x00\x00\x04\x00\x00\x00\x05'

struct.pack("!HHHLL", 1, 2, 3, -4, 5)
>>> Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
struct.error: integer out of range for 'L' format code 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-16T16:20:02.533

最有可能的问题在于以下其中一项的价值：

```
jsonmsg["flow_id"]
jsonmsg["app_src_ip"]
jsonmsg["app_dst_ip"] 
```

# c - strstr strtok中使用的指针

> ID：11991373
> 
> 赞同：0
> 
> 时间：2012-08-16T16:11:52.803
> 
> 标签：c, pointers, strtok, strstr

我有一个字符串，我使用 strtok 来解​​析它。

然后我想在 strtok 的指针上使用 strstr ，但我不断收到段错误。

关于为什么的任何想法？

```
char *pch,*pch1,*pch2,*pch3,

pch=strstr(line1,key);

            if(pch!=NULL){
                pch1=strstr(line1,key1);
                pch2=strstr(line1,key2);
                pch3=strstr(line1,key3);

                if(pch1!=NULL && pch2!=NULL && pch3!=NULL){
                    printf("%s",line1);   
                    sym++;

                    pch2=strtok(line1," ");

                    while(pch2!=NULL){
                        pch2=strtok(NULL," ");
                        pch3=strstr(pch2,key1);
                        printf("%s\n",pch3);

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:13:34.813

> ```
> pch2=strtok(NULL," ");
> pch3=strstr(pch2,key1); 
> ```

`pch2 != NULL`你打电话前不检查`strstr`。毕竟这是一定会发生的，因为这是您摆脱该循环的唯一方法。

怎么样：

```
while((pch2 = strtok(NULL," "))) { 
```

# php - 折扣计算

> ID：11991375
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:12:04.933
> 
> 标签：php, discount

我目前正在为我公司的网站设计一个数据库。我想创建一个表来保存有关我们折扣的信息（逻辑），这样我就可以调用一个带有 discountID 的函数，我的 php 代码将计算新价格。我的问题是，每个折扣都有不同的逻辑。前任。10% off，$10 off，一送一，买三送五……

如何将其存储在数据库中，以便我的代码可以自行计算折扣？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:18:57.887

数据库不存储逻辑 - 仅存储数据。将其拆分为三个字段：

*   折扣金额（整数）
*   折扣类型（枚举；可能的值：“百分比”、“金额”）
*   买一送N（整数；每买一件就免费获得的数量）

因此，对于一次折扣，您可以存储以下内容：

```
| 折扣金额 | 折扣类型 | 买一送一|
-------------------------------------------------- --------
| 10 | '百分比' | |

```

对于另一个，BOGOF 适用：

```
| 折扣金额 | 折扣类型 | 买一送N |
-------------------------------------------------- --------
| | | 1 |

```

然后由您的 PHP 来接收这些值并采取相应的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:20:18.950

您必须使用此类字段创建**折扣**表，例如：

1.  discount_id - 折扣的 ID
2.  percent - 折扣百分比（如果为 0 - 则为其他类型的折扣）
3.  amount - $ 折扣金额（如果为 0 - 则为其他类型的折扣）
4.  物品 - 购买时的免费物品数量（一送 - 在您的示例中免费）
5.  buy_items - 条件，在什么情况下你给予折扣（如果 0 - 无条件）

或者，您可以为这些字段指定其他名称。根据价值观，你可能知道什么类型的折扣和什么条件给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:26:31.703

这是我通常从多层方法开始的地方，因为它不仅用于计算，还可以用于在实际网站上显示。我将从两张桌子开始。

```
Promotion Table
| id | discount_type | qty_products | discount_amount | free_products |
-----------------------------------------------------------------------
|  1 | BOGO          |       2      |        0        |       1       |

Sales Promo
| id | promo_id | product_id | activation_date | expiration_date |
------------------------------------------------------------------
|  1 |     1    |     222    |   '2012-04-23'  |   '2012-05-12'  | 
```

然后代码将查看它是否在日期范围内并应用折扣或 B1G1/B1G2。表格并不准确，但只是一个开始。

# .net-4.0 - 尽管指定了“net-4.0”，但使用 .NET 4.5 (Beta) 程序集引用构建 Nant

> ID：11991383
> 
> 赞同：7
> 
> 时间：2012-08-16T16:12:42.980
> 
> 标签：.net-4.0, nant, .net-4.5, ilmerge

安装 .Net 4.5 Beta 后，我的 Nant 构建的输出失败并显示：

[“无法从程序集‘mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089’加载类型‘System.Runtime.CompilerServices.ExtensionAttribute’。”](https://stackoverflow.com/q/10139017/132461)

因为正如在这个[问题中回答的那样](https://stackoverflow.com/q/10139017/132461) [ExtensionAttribute 已从 System.Core.dll 移至 mscorlib.dll](https://stackoverflow.com/a/10147247/132461)。因此，尽管我在 nant 构建脚本中指定了目标框架，但 nant 构建正在合并 .net4.5 程序集，如下所示：

```
<property name="nant.settings.currentframework" value="net-4.0" /> 
```

在 Visual Studio 下，构建工作正常（生成不需要 .Net 4.5 的 .dll）。但我需要构建与 nant 一起使用，因为我们有“老派”以及使用 nant 的构建过程。

我需要在我的 nant 构建脚本中添加什么以使构建实际上坚持 4.0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T15:42:03.133

昨天我将 VS 2012 与 VS 2010 并排安装，在重新编译和部署 Web 项目后，它失败并出现同样的异常。经过一个小时的研究，我找到了解决方案。

## 首先，您需要编辑`nant.exe.config`

打开它并找到：

```
<framework
   name="net-4.0" 
```

这是大约。在第 555 行（在 NAnt 0.92 的默认配置中）

您将看到一个巨大的 xml，描述 net-4.0 编译。找到三个子`<reference-assemblies>`元素。前两个看起来像

```
<reference-assemblies basedir="${path::combine(installRoot, 'v4.0.30319')}">
<reference-assemblies basedir="${path::combine(installRoot, 'v4.0.30319')}/WPF"> 
```

第三是

```
<reference-assemblies basedir="${environment::get-folder-path('ProgramFiles')}/Reference Assemblies/Microsoft/Framework/.NETFramework/v4.0"> 
```

现在 - 只需编辑前两个以匹配第三个（从第三个复制并粘贴替换第一个和第二个）。在此之后，NAnt 将在`Reference Assemblies`文件夹中查找所有 .dll（而不是“损坏的”Windows/Microsoft .NET/...）

不要担心`/WPF`第二个后缀 -`Reference Assemblies`所有文件都位于一个文件夹中，没有 /WPF 子文件夹。

## 第二步 - 更改您的构建脚本

调用`csc`任务时，添加两个属性，`nostdlib`和`noconfig`：

```
<csc target="..." output="..." nostdlib="true" noconfig="true" ...> 
```

这将禁用 csc 文件夹中“bad new”mscorlib 和其他库的自动引用。

在`<references>`元素内部 - 手动添加 mscorlib.dll、system.core.dll 和所有使用的系统库。NAnt 会在`Referenced Assemblies`文件夹中找到它们：

```
<references>
    <include name="mscorlib.dll"/>
    <include name="Microsoft.CSharp.dll"/>
    <include name="System.dll"/>
    <include name="System.Configuration.dll"/>
    <include name="System.Core.dll"/>
    ... 
```

在那之后（当然是重建）我的网站成功地在使用“原始”.NET Framework 4 的主机上启动。:)

*PS看起来微软重新发明了DLL HELL :)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:21:43.237

您可能必须做两件事（我根本没有尝试过，但我记得它在 4 发布时有所帮助）。首先，`nant.exe.config`在配置文件的启动部分修改并添加版本到支持的框架版本（我认为这就是他们去的地方，一旦你打开它应该很明显）。然后，升级到最新最好的 NaNT 版本。然后，在你的构建文件中做这样的事情：

```
<property 
    name="assembly-location" value="${framework::get-assembly-directory('net-4.5')}" />
<property 
    name="dotNetReferenceAssemblyPath" value="${assembly-location}\" /> 
```

同样，已经有一段时间了，我不能 100% 确定这会做到这一点，但它可能会让你走上正确的轨道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T14:32:30.863

基本上，Dmitry 的解决方案是正确的，但是在我的 Windows Server 2012 上编译 .Net 4.0 程序集之前我必须对其进行一些修改。我在我的环境中使用了最新的 nant-0.93-nightly-2013-10-20 .

1.  在 Visual Studio 2013 构建输出中，可以看到 CSC 是使用 .Net 4.0 目标的 /noconfig 和 /nostdlib+ 标志执行的。这证明您的解决方案是有效的。

2.  basedir="${environment::get-folder-path('ProgramFiles')}..." 对我不起作用，因为 NAnt.exe 是 64 位进程。实际上，大多数标准程序集仅在 Program Files (x86) 根目录下可用。我尝试对 NAnt.exe 进行标记，但这会导致其他问题。为了确保核心程序集可以被 32 位和 64 位进程定位，我创建了一个目录 C:\Nant\Microsoft.Net\v4.0 并将它们复制到那里。因为该目录*不在*Program Files 之下，所以它始终可见。

3.  我们的 NAnt 构建脚本很大，我不想手动修改每个 csc 任务的引用。为了减少对脚本的必要修改，我每晚稍微定制了 NAnt 0.93。如果目标框架名称是“net-4.0”并且任务是 CscTask 类型，它会自动添加 mscorlib.dll、System.dll 和所有在 csc 任务源根目录中的 csproj 中找到的系统组件引用。自定义的源代码和二进制文件可以在这里找到：http: [//support.decos.nl/berend/NAnt-0.93-nightly-2013-10-20-modified.zip](http://support.decos.nl/berend/NAnt-0.93-nightly-2013-10-20-modified.zip)

修改后的代码记录了对 NAnt 构建输出的添加引用：

```
Inserted reference System.Data.dll
Inserted reference System.Xml.dll
Inserted reference System.configuration.dll
Inserted reference System.dll
Inserted reference mscorlib.dll
      [csc] Compiling 11 files to '... 
```

# assembly - . 内存中的文本在执行期间被覆盖

> ID：11991384
> 
> 赞同：2
> 
> 时间：2012-08-16T16:12:44.210
> 
> 标签：assembly, process, linux-kernel, gdb, portable-executable

我一直在为 Linux 开发一个简单的 PE 进程加载器。我想我已经掌握了基础知识；我使用的大部分代码来自`binfmt_elf.c`and `binfmt_aout.c`。我的测试可执行文件尽可能简单（FASM 格式）：

```
format PE GUI 4.0
entry main

section '.text' code readable executable
main:
    mov eax, 4
    add eax, 5
    ret 
```

这个程序（`math1`）是32位编译的，我运行的VM（Xubuntu 12.04）也是32位的。我将加载器编译为内核模块并使用`insmod`. 到目前为止，加载程序似乎可以正常工作，并且我已经在每个可能的步骤中检查了错误代码。它所做的只是`mmap`起始地址的代码部分`0x401000`并使用该地址调用`start_thread()`。如果我`./math1.exe`在命令行输入类似的内容，我的加载器确实被调用了。所以，如果一切按计划进行，我应该`9`每次都得到返回值。然而，不是`math1`每次都执行段错误，所以我打开它`gdb`看看发生了什么。

在执行之前，一切看起来都很正常。如果我在起始地址转储，我会看到我应该看到的确切内容（我可以确认这是上述程序的机器代码）：

```
(gdb) x/9xb 0x401000
0x401000:   0xb8    0x04    0x00    0x00    0x00    0x83    0xc0    0x05
0x401008:   0xc3
(gdb) run
Starting program: /media/sf_Sandbox/math1.exe 

Program received signal SIGSEGV, Segmentation fault.
0x00401002 in ?? () 
```

在段错误之后，转储到相同的地址，内存已经完全改变，并且从寄存器转储来看，第一条指令似乎没有被执行：

```
(gdb) x/9xb 0x401000
0x401000:   0x4d    0x5a    0x80    0x00    0x01    0x00    0x00    0x00
0x401008:   0x04
(gdb) info all-registers
eax            0x0  0
ecx            0x81394e8    135501032
edx            0x64656d2f   1684368687
ebx            0x8139548    135501128
esp            0xbfffe5a0   0xbfffe5a0
ebp            0xffffffff   0xffffffff
esi            0x81394e8    135501032
edi            0x2f7ff4 3112948
eip            0x401002 0x401002
eflags         0x210296 [ PF AF SF IF RF ID ]
cs             0x73 115
ss             0x7b 123
ds             0x7b 123
es             0x7b 123
fs             0x0  0
gs             0x0  0
...more registers... 
```

我想知道什么会导致这样的事情发生，以及我可以做些什么来解决它。我怀疑我用来设置堆栈框架的代码可能有点……关闭，但我不确定如何判断这是否是导致这种情况的原因。我知道这是一个非常具体的问题，但我希望有人能给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:59:49.533

该错误是由于我的页面对齐错误引起的，而神秘的十六进制转储内容实际上是相关 PE 文件的 MS-DOS 标头。我通过使用`kernel_read`and`copy_to_user`而不是来修复它，`do_mmap`以避免在非页面对齐的部分上失败。

# objective-c - 在 UITableView 上使用 scrollViewWillEndDragging:withVelocity:targetContentOffset

> ID：11991385
> 
> 赞同：1
> 
> 时间：2012-08-16T16:12:45.777
> 
> 标签：objective-c, uitableview, uiscrollview

我曾尝试使用`scrollViewWillEndDragging:withVelocity:targetContentOffset`我的`UITableView`所以当我到达某个地方时，即表格顶部的隐藏分段控件，它会减速到分段控件的顶部，将其“粘贴”到导航栏的下方。

我有以下代码：

```
- (CGPoint)tableOffsetForProposedOffset:(CGPoint)proposedOffset currentOffset:(CGPoint)currentOffset {
    NSLog(@"Current:  %@", NSStringFromCGPoint(currentOffset));
    NSLog(@"Before:   %@", NSStringFromCGPoint(proposedOffset));

    if (currentOffset.y <= -10) {
        // Show segmented control
        NSLog(@"--- Show ---");
        proposedOffset.y -= 500;
    } else if (currentOffset.y >= 42) {
        // Hide segmented control
    }

    NSLog(@"Proposed: %@", NSStringFromCGPoint(proposedOffset));

    return proposedOffset;
}

- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    *targetContentOffset = [self tableOffsetForProposedOffset:*targetContentOffset currentOffset:scrollView.contentOffset];

    NSLog(@"Returned: %@", NSStringFromCGPoint(*targetContentOffset));
} 
```

***请注意，我仅使用“500”进行测试***

我所有的日志都显示了正确的细节，最重要的是，“返回”`*targetContentOffset`它也是正确的。即`Returned: {0, -458}`。

我可能做错了什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:52:02.067

我不是 100% 确定（因为文档也对此非常保留）但我认为如果`*targetContentOffset`大于最大内容偏移量，则该值将被忽略。

# c++ - ld：找不到-lwiretap。为什么以及如何使其可用

> ID：11991388
> 
> 赞同：0
> 
> 时间：2012-08-16T16:12:53.780
> 
> 标签：c++, perl, makefile

已经在我的linux盒子里安装了wireshark，也可以创建makefile；但是当我尝试成功时。它给出了错误，例如-

```
$make
rm -f blib/arch/auto/Wtap/Wtap.so
cc  -shared -O2 -g -L/usr/local/lib -fstack-protector Wtap.o  -o blib/arch/auto/Wtap/Wtap.so    \
       -L/usr/lib/wireshark -lwiretap   \

/usr/bin/ld: cannot open output file blib/arch/auto/Wtap/Wtap.so: Permission denied
collect2: ld returned 1 exit status
make: *** [blib/arch/auto/Wtap/Wtap.so] Error 1 
```

另外，sudo 不能解决错误

```
$sudo make
chmod 644 Wtap.bs
rm -f blib/arch/auto/Wtap/Wtap.so
cc  -shared -O2 -g -L/usr/local/lib -fstack-protector Wtap.o  -o blib/arch/auto/Wtap/Wtap.so    \
       -L/usr/lib/wireshark -lwiretap   \

/usr/bin/ld: cannot find -lwiretap
collect2: ld returned 1 exit status
make: *** [blib/arch/auto/Wtap/Wtap.so] Error 1 
```

我在我的 linuxbox 中搜索找到 libwiretap.so。它位于 /usr/lib 中。谁能指导我解决这个错误！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:14:02.430

安装`wireshark-devel`. 它包含窃听库的标头。

# android - 如何在具有 1,000 多个资产的 AIR Flash 应用程序中减少内存 (RAM) 使用量？

> ID：11991391
> 
> 赞同：0
> 
> 时间：2012-08-16T16:13:01.180
> 
> 标签：android, ios, actionscript-3, flash, air

我正在为 iOS 和 Android 打包一个 Adob​​e Air 应用程序，我的 (RAM) 内存使用量超过 100MB。我的游戏 (RPG) 中有大量资产。资产的数量/大小似乎直接影响内存使用。在声明或实例化任何项目之前存在内存使用情况。我可以制作一个没有动作脚本的空白项目，并且根据我库中资产的数量/大小，内存使用量仍然超过 100MB。

我正在寻找一种方法来打包我的应用程序，以便在游戏启动时不会将每个资产加载到内存中。我尝试将我的资产打包到 SWC 中并将其导入我的项目中（使用“合并到代码”选项），结果是相同的。

1) 有没有办法捆绑 SWC，使其内容不会立即加载到内存中？

2）我可以尝试其他任何方法，以使我的应用程序不会立即将资产加载到内存中吗？

我无法进一步优化我的音频资产（造成问题的最大因素）。这是一个音乐游戏，我真的不能低于 128kbps MP3。

Flash Pro CS6 - 动作脚本 3 - Adob​​e Air 3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:11:07.297

据我所知，您无法在运行时加载 swc 文件。另一方面，您可以在运行时加载 SWF 文件。

因此，您可以将资产分成多个 SWF 文件，然后在适当的时候加载您需要的文件。如果您想从加载的 SWF 文件的库中创建项目，您将使用 ApplicationDomain 和 getDefinition。

# svn - SVN - 将代码从 TRUNK 添加到旧分支

> ID：11991393
> 
> 赞同：2
> 
> 时间：2012-08-16T16:13:04.163
> 
> 标签：svn, merge, svn-merge

我将文件提交到主干。提交后，我意识到这些文件也应该应用于旧分支。这是我采取的步骤：

## 我的副本（使用中继：应用程序版本 5）

svn commit -m "blah" : 修订版 123

## 旧分支（应用程序版本 3）

svn 合并 -r 122:123 svnpath

问题是现在我得到一个“本地删除，合并时传入的编辑”树冲突。有问题的文件夹在旧分支中根本不存在。但我担心如果我用工作分支解决它会删除主干中该文件夹的所有内容。但是，我也不希望本地副本接收该文件夹中的所有文件。

我显然在这里误解了一些东西。（我什至不知道是否需要提交它，但我不希望下一次提交被这些文件卡住。）如何将提交的更改放入旧分支？大部分修改的文件应该是一样的。

* * *

非常晚的编辑以澄清之前的目标。（这已解决，但我觉得这需要更清楚。）

1) 对主干（版本）32 所做的更改。

2）更改合并到分支（版本）26。

3）想解决26个合并冲突，从26到28合并到30到32。

4) 沿途的其他更改将从 26 一直合并到主干。这意味着冲突无法删除主干中的文件夹文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:21:41.353

假设您的存储库中有标准的trunk/、branchs/ 根目录设置：

```
cd branches/mybranch
svn merge -r 122:123 ../../trunk . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:31:51.043

我在这里的解决方案可能不是最佳的，但这是我所做的：

svn 恢复 -R 。

然后，我读取（svn add）所有本地文件以及冲突文件夹，该文件夹不再冲突（我不知道为什么。）

然后我能够毫无冲突地提交。但是，我确实必须使用新代码更改手动修改旧文件。

# asp.net-mvc-3 - asp.net MVC3 microsoft web Helpers 错误。无法在视图中访问它

> ID：11991397
> 
> 赞同：0
> 
> 时间：2012-08-16T16:13:19.277
> 
> 标签：asp.net-mvc-3, web, helpers

我从 NuGet 安装了 microsoft web Helpers，它做得很好。我无法从我的视图中访问它，只能在我的控件上访问它。没有附加错误。我只是在那里看不到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:14:33.960

只需在根 web.config 中添加辅助方法的命名空间即可。它将解决所有视图的问题。就像是 ：

```
<add namespace="namespace of Your Helper Class" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:15:43.673

添加：

```
@using Microsoft.Web.Helpers 
```

在你看来。或者，如果您不想将此命名空间添加到所有视图，只需将其添加到`~/views/web.config` `<namespaces>`部分：

```
<add namespace="Microsoft.Web.Helpers" /> 
```

# html - IE9 使用条件 IE7 样式表

> ID：11991399
> 
> 赞同：0
> 
> 时间：2012-08-16T16:13:21.283
> 
> 标签：html, css, conditional-comments

我有以下额外的样式表来处理 Internet Explorer 上旧版本中的一些顽皮浏览器行为：

```
 <!--[if IE 8]>
    <link rel="stylesheet" href="/CallCentre/ServiceCloud/Content/IE8.css">
    <![endif]-->
    <!--[if IE 7]>
    <link rel="stylesheet" href="/CallCentre/ServiceCloud/Content/IE7.css">
    <![endif]--> 
```

我遇到的问题是仅存在于 IE7.css 中的规则正在应用于 Internet Explorer 9。

为什么 IE9 使用我的条件 IE7 样式表？

更新

Oded 和hsalama 正朝着正确的方向前进。

如果我使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

它加载“浏览器模式：IE9 兼容视图”。

如果我删除这个标签是在 IE7 模式下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:42:51.593

我没有安装 IE9，但在 IE8 中有这个按钮，您可以在其中切换模式。同样从工具菜单中，您可以指定它是否会在本地站点和本地 Intranet 站点的组合视图中运行，我记得这是默认设置，不确定 MS 是否清除了 IE9 中的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:18:33.017

不确定它为什么会选择它，因为这一切对我来说都是正确的，但是如果你还没有它，你可以尝试强制它使用带有以下元标记的最佳渲染模式：

```
<!-- Force best rendering mode for IE -->
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:19:48.917

尝试以下操作：

```
<!--[if lte IE 7]> 
```

这应该只加载 IE7 或更低版本的样式表（lte = 小于或等于）。愿这会有所帮助。

或者，你应该看看这里：[Why is Stylesheet loading when Contional Comment 声明它应该被忽略？](https://stackoverflow.com/questions/795267/why-is-stylesheet-loaded-when-contional-comment-states-it-should-be-ignored)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:59:40.550

网站是否在 Intranet 上？如果是这样，那是默认设置，但元标记应该更正它。 [http://windows.microsoft.com/en-us/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9](http://windows.microsoft.com/en-us/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:10:07.123

This appears to be a bug in the IE Developer Tools. If I run the page on most machines it works as expected and doesn't load the IE7 styles. With Developer Tools open, it seems to jump to IE7 mode in the Developer Tools for some inexplicable reason. The problem only occurs with developer tools open.

# c# - 使用 COM 端口与硬币兑换器交互

> ID：11991400
> 
> 赞同：7
> 
> 时间：2012-08-16T16:13:23.357
> 
> 标签：c#, delphi, serial-port, delphi-6, multidrop-bus

我有一个硬币兑换器`MEI Cashflow E7900`和一个 MDB 适配器，用于将设备连接到串行端口。卖给我适配器的商店还提供了一个测试应用程序，它是用 Delphi 编写的，用 Borland Delphi v6.0 编译。它工作得很好，但我的代码出于某种原因没有。
当您使用 MDB 时，您必须每 200 毫秒发送`POLL`一次命令。如果一切正常，硬币兑换商会发送`ACK`. 当我使用 Delphi 应用程序发送它时，会话如下所示：

> => 0x0B* 0x0B（星号表示奇偶校验设置为标记。默认奇偶校验为空格）
> <= 0x00

所以一切都很好，这就是我所期待的。当我`POLL`使用 C# 应用程序发送时，它就像：

> => 0x0B* 0x0B
> <= 0x3F 0x00

有时，硬币兑换商发给我`0x3F 0x11`之后`POLL`毫无意义，没有像这样的任何有效回复。当我得到这样的响应时，我运行 Delphi 应用程序，它得到了一个有效的`ACK`响应。我正在使用 COM 端口嗅探器来确保发送的数据没有任何差异，包括端口配置本身，并且我不断收到不同的响应。
下面是测试应用程序（Delphi）的源代码：

```
<...>
//The component used it called BComPort
form1.BComPort1.BaudRate:=br9600;
form1.BComPort1.Parity:=paSpace;
form1.BComPort1.Port:="%port name goes here%";
form1.BComPort1.Open;
<...>

procedure SetModeBit(modebit:boolean);
begin
if modebit then begin
   form1.BComPort1.BeginUpdate;
   form1.BComPort1.Parity:=paMark;
   form1.BComPort1.EndUpdate;
end else begin
   form1.BComPort1.BeginUpdate;
   form1.BComPort1.Parity:=paSpace;
   form1.BComPort1.EndUpdate;
 end;

procedure TForm1.PollTimer(Sender: TObject);
var
    s,buf,buf2:string;
    i,len:integer;
    x,adr,dat1,ack,chk:byte;
    crc:integer;
<...>
adr:=$08 or $0B;
SetModeBit(true);
form1.BComPort1.Write(adr,1);
dat1:=0;
crc:=adr + dat1;
try
  s:=inttohex(crc,10);
  s:=s[length(s)-1]+s[length(s)];
  chk:=strtoint('$'+s);
except
end;
SetModeBit(false);
form1.BComPort1.Write(chk,1); 
```

此处提供完整的代码清单，但[此处](https://dl.dropbox.com/u/19208429/Unit1.pas)提供的代码应该足够了。

我的代码（C#）：

```
 private const byte P_ADDRESS = 0x8;
 static void Main(string[] args)
 {
        <...> 
        port = new SerialPort(ports[index]);
        port.BaudRate = 9600;
        port.StopBits = StopBits.One;
        port.DataBits = 8;
        port.DtrEnable = true;
        port.RtsEnable = true;
        port.Parity = Parity.Space;
        <...>
 }

 private static void onDataReceived(object sender, SerialDataReceivedEventArgs e)
 {
        byte[] dataReceived = new byte[port.BytesToRead];
        SetModeBit(false);
        port.Read(dataReceived, 0, dataReceived.Length);
        Console.WriteLine("Data received:");
        foreach (Byte b in dataReceived)
        {
            Console.Write(b.ToString("X") + " ");
        }
        Console.WriteLine();
 }

 private static void SetModeBit(Boolean mode)
 {
        port.Parity = mode ? Parity.Mark : Parity.Space;
 }

 private static void SendData(Byte cmd, Byte[] data)
 {
        byte adr = (byte)(P_ADDRESS | cmd);
        byte crc = adr;
        foreach (var b in data)
            crc += b;
        SetModeBit(true);
        port.Write(new byte[] { adr }, 0, 1);
        SetModeBit(false);
        if (data.Length > 0)
            port.Write(data, 0, data.Length);
        port.Write(new byte[] { crc }, 0, 1);
 } 
```

* * *

使用 Delphi 应用程序的轮询命令：

```
17.08.2012 18:05:18 COM8 Capture Started
17.08.2012 18:05:38 COM8 Opened By Process ID=2872
17.08.2012 18:05:38 Baud Rate =9600
17.08.2012 18:05:38 RTS Signal = True
17.08.2012 18:05:38 DTR Signal = True
17.08.2012 18:05:38 Line Control Change: SPACE-8-1
17.08.2012 18:05:38 Baud Rate =9600
17.08.2012 18:05:38 RTS Signal = True
17.08.2012 18:05:38 DTR Signal = True
17.08.2012 18:05:38 Line Control Change: MARK-8-1
17.08.2012 18:05:38 Write 1 Bytes:

 0B                                              ; .               

17.08.2012 18:05:38 Baud Rate =9600
17.08.2012 18:05:38 RTS Signal = True
17.08.2012 18:05:38 DTR Signal = True
17.08.2012 18:05:38 Line Control Change: SPACE-8-1
17.08.2012 18:05:38 Write 1 Bytes:

 0B                                              ; .               

17.08.2012 18:05:38 GetCommStatus Result:16
17.08.2012 18:05:38 Parity Error = True
17.08.2012 18:05:38 Baud Rate =9600
17.08.2012 18:05:38 RTS Signal = True
17.08.2012 18:05:38 DTR Signal = True
17.08.2012 18:05:38 Line Control Change: SPACE-8-1
17.08.2012 18:05:38 Read 1 Bytes:

00                                              ; . 
```

使用我的应用程序轮询命令：

```
17.08.2012 18:12:08 COM8 Capture Started
17.08.2012 18:12:11 COM8 Opened By Process ID=3164
17.08.2012 18:12:11 Baud Rate =9600
17.08.2012 18:12:11 RTS Signal = True
17.08.2012 18:12:11 DTR Signal = False
17.08.2012 18:12:11 Line Control Change: SPACE-8-1
17.08.2012 18:12:11 Baud Rate =9600
17.08.2012 18:12:11 RTS Signal = True
17.08.2012 18:12:11 DTR Signal = True
17.08.2012 18:12:11 Line Control Change: SPACE-8-1
17.08.2012 18:12:11 DTR Signal = True
17.08.2012 18:12:11 Baud Rate =9600
17.08.2012 18:12:11 RTS Signal = True
17.08.2012 18:12:11 DTR Signal = True
17.08.2012 18:12:11 Line Control Change: MARK-8-1
17.08.2012 18:12:11 Write 1 Bytes:

 0B                                              ; .               

17.08.2012 18:12:11 Baud Rate =9600
17.08.2012 18:12:11 RTS Signal = True
17.08.2012 18:12:11 DTR Signal = True
17.08.2012 18:12:11 Line Control Change: SPACE-8-1
17.08.2012 18:12:11 Write 1 Bytes:

 0B                                              ; .               

17.08.2012 18:12:11 GetCommStatus Result:16
17.08.2012 18:12:11 Parity Error = True
17.08.2012 18:12:11 Read 1 Bytes:

3F                                              ; ?               

17.08.2012 18:12:11 Read 1 Bytes:

00                                              ; . 
```

收到的数据似乎几乎相同，除了`0x3F`在开始时。但是设备的行为也不同，它似乎没有连接到 PC，当我使用 C# 应用程序时显示“机器禁用”，当我使用 Delphi 应用程序时显示“状态正常”。这可能是因为 .NET Framework 而发生的吗？任何用于 COM 端口交互的库名称都可以使用。

我有想法，为什么我得到不同的反应。也许我希望这里有人能帮助我。提前致谢。也感谢您阅读这个巨大的问题。

# perl - 如何使用 perl 运行 SIGAR API？

> ID：11991411
> 
> 赞同：0
> 
> 时间：2012-08-16T16:13:55.610
> 
> 标签：perl, sigar

我正在寻找有关如何使用 perl 运行 SIGAR API 的任何信息或说明。我查看了放置 Makefile.PL 并创建了 makefile 的绑定目录，然后运行了 make 命令，一切正常，但我无法运行任何示例。我还粘贴了运行“exmaples”目录中列出的示例程序时出现的错误。如果我遗漏任何东西，请告诉我。

```
[oracle@mercury perl]$ perl Makefile.PL
Sigar_generated.xs needs update
generating Sigar_generated.xs
Warning: -L../../sigar-bin/lib changed to -L/u01/test/hyperic-sigar-1.6.4/bindings/perl/../../sigar-bin/lib
Writing Makefile for Sigar
[oracle@mercury perl]$ make
cp Sigar.pm blib/lib/Sigar.pm
/usr/bin/perl /usr/lib/perl5/5.8.8/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5.8.8/ExtUtils/typemap -typemap typemap  Sigar.xs                                                                        > Sigar.xsc && mv Sigar.xsc Sigar.c
gcc -c  -I../../sigar-bin/include -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/l                                                                       ocal/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexcep                                                                       tions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\"0.01\" -DXS_VERSION=\"0.01\" -fPIC "-I/usr                                                                       /lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE"  -Wall -Werror Sigar.c
Running Mkbootstrap for Sigar ()
chmod 644 Sigar.bs
rm -f blib/arch/auto/Sigar/Sigar.so
gcc  -shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=g                                                                       eneric Sigar.o  -o blib/arch/auto/Sigar/Sigar.so        \
           -L/u01/test/hyperic-sigar-1.6.4/bindings/perl/../../sigar-bin/lib -lsigar-amd64-linux        \

chmod 755 blib/arch/auto/Sigar/Sigar.so
cp Sigar.bs blib/arch/auto/Sigar/Sigar.bs
chmod 644 blib/arch/auto/Sigar/Sigar.bs
[oracle@mercury perl]$ cd examples
[oracle@mercury examples]$ ls
cpu_info.pl  df.pl  free.pl  ifconfig.pl

[oracle@mercury examples]$ perl free.pl
Can't locate Sigar.pm in @INC (@INC contains: /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi /usr/lib64/perl5/site                                                                       _perl/5.8.7/x86_64-linux-thread-multi /usr/lib64/perl5/site_perl/5.8.6/x86_64-linux-thread-multi /usr/lib64/perl5/site_perl/5\.                                                                       8.5/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl/5.8.7 /usr/lib/perl5/site_perl/5.8.6 /us                                                                       r/lib/perl5/site_perl/5.8.5 /usr/lib/perl5/site_perl /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi /usr/lib64/p                                                                       erl5/vendor_perl/5.8.7/x86_64-linux-thread-multi /usr/lib64/perl5/vendor_perl/5.8.6/x86_64-linux-thread-multi /usr/lib64/perl5                                                                       /vendor_perl/5.8.5/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl/5.8.7 /usr/lib/perl5/                                                                       vendor_perl/5.8.6 /usr/lib/perl5/vendor_perl/5.8.5 /usr/lib/perl5/vendor_perl /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi                                                                        /usr/lib/perl5/5.8.8 .) at free.pl line 19.
BEGIN failed--compilation aborted at free.pl line 19. 
```

# **Ran Make install 和 make test**

```
[root@mercury perl]# make install
Installing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Sigar/Sigar.so
Installing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Sigar/Sigar.bs
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Installing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Sigar.pm
Writing /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Sigar/.packlist
Appending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod
[root@mercury perl]# make test
No tests defined for Sigar extension.
[root@mercury perl]# cd examples
[root@mercury examples]# ls
cpu_info.pl  df.pl  free.pl  ifconfig.pl

[root@mercury examples]# perl ifconfig.pl
Can't load '/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Sigar/Sigar.so' for module Sigar: libsigar-amd64-linux.so: cannot open shared object file: No such file or directory at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/XSLoader.pm line 70.
 at /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Sigar.pm line 36
Compilation failed in require at ifconfig.pl line 19.
BEGIN failed--compilation aborted at ifconfig.pl line 19. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:33:00.707

尝试将`libsigar-amd64-linux.so`库放到 Linux 库加载器已知的位置，并明确告诉 ExtUtils::MakeMaker 路径：

```
…/sigar/bindings/perl$ perl Makefile.PL LIBS=-L/usr/lib64 INC=-I../../include 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:58:00.320

我已将以下内容包含在库路径中，这有帮助。

导出 LD_LIBRARY_PATH=/u01/test/hyperic-sigar-1.6.4/bindings/perl/../../sigar-bin/lib:/usr/lib64

```
[root@mercury examples]# perl df.pl
Filesystem      Size    Used    Avail   Use%    Mounted on      Type
/dev/mapper/VolGroup00-LogVol00 194G    4.4G    179G    3%      /       ext3/local
proc      0       0       0     -       /proc   proc/none
sysfs     0       0       0     -       /sys    sysfs/none
devpts    0       0       0     -       /dev/pts        devpts/none
/dev/mapper/VolGroup00-LogVol02 695G    4.2G    655G    1%      /u01    ext3/local
/dev/sda1       190M     13M    167M    8%      /boot   ext3/local
tmpfs   5.7G      0     5.7G    -       /dev/shm        tmpfs/none
none      0       0       0     -       /proc/sys/fs/binfmt_misc        binfmt_misc/none
sunrpc    0       0       0     -       /var/lib/nfs/rpc_pipefs rpc_pipefs/none
none    5.7G    104K    5.7G    -       /var/lib/xenstored      tmpfs/none 
```

# java - Java：为什么我不能插入参数而不是 %s？

> ID：11991413
> 
> 赞同：0
> 
> 时间：2012-08-16T16:13:58.730
> 
> 标签：java

我有这样的结构：

```
String xml = "<tag><another_tag>%s</another_tag></tag>" 
```

我将参数传递给方法并尝试替换`%s`：

```
String str = String.format(xml, parameter); 
```

但是我已经将以前的 xml 文件包装为 '%s' 的位置上的标签。如果我设置一个简单的`String`：

```
String str = String.format(xml, "parameter"); 
```

一切正常。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:37:57.657

正如 Pshemo 所说，这很好用：

```
String xml = "<tag><another_tag>%s</another_tag></tag>";        
String parameter = "abc";
String str = String.format(xml, parameter);
System.out.println(str); // <tag><another_tag>abc</another_tag></tag> 
```

# c# - System.Web.WebPages - 找不到指定的文件

> ID：11991418
> 
> 赞同：3
> 
> 时间：2012-08-16T16:14:07.933
> 
> 标签：c#, razor, web-config, asp.net-mvc-4, precompiled

今天我打开了我们剃刀视图的预编译。

我们对几乎所有东西都使用了引用的程序集，包括 mvc dll 和*System.Web.WebPages*。

起初我在本地构建时收到*System.Web.WebPages*版本不匹配的错误，因此我在 Web.Config 中添加了一个条目

```
<add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral,
 PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

这解决了导致我假设编译器忽略参考提示路径和`<SpecificVersion>`内容的问题？

在 web.config 中，我们的本地构建工作正常（我们碰巧在 GAC 中也有所有 dll）。

在构建服务器上运行我们的构建脚本会引发以下错误：

```
{OurPath}\web.config (44): Could not load file or assembly 'System.Web.WebPages,
Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of
its dependencies. The system cannot find the file specified. 
```

这里发生了什么事？我可以看到 System.Web.WebPages dll 在已编译输出的 bin 中，为什么构建服务器找不到它？也许有一个我不知道的依赖关系？

其次，为什么 proj 文件中的提示路径似乎对正在使用的程序集没有影响，即使将 SpecificVersion 设置为 true？

# iphone - iPhone 上的字体大小比 PC 上的小

> ID：11991420
> 
> 赞同：2
> 
> 时间：2012-08-16T16:14:13.597
> 
> 标签：iphone, font-size

我已经看到 iPhone 上的字体大小看起来更大，但我遇到了相反的问题。我正在为客户编辑一个非常（非常非常）旧的网站，以便可以在手机上查看。我已将一个特定页面上的字体大小更改为更大，但在 iPhone 上看起来仍然相同。我已经尝试过内联样式，使用！important，以及我能想到的几乎所有其他东西。它在 PC 上显示得更大，但在移动 Safari 中却没有。

该页面的链接是[http://Smokingstinks-aaco.org/mobile/quiz.htm](http://smokingstinks-aaco.org/mobile/quiz.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:26:10.120

是字体更小还是因为主要内容周围的填充？我建议使用固定宽度的视口元标记到 700 像素，这是您的内容宽度，这可能会有所帮助。

它使用表格来安排内容，这有点老派，所以如果你有时间的话，也许值得重新做页面。

# c# - DataTrigger 在 ListBox.ItemTemplate 中不起作用

> ID：11991424
> 
> 赞同：0
> 
> 时间：2012-08-16T16:14:27.607
> 
> 标签：c#, wpf, xaml, datatrigger

让我简要概述一下我的问题。

我有一个以 ViewModel 作为数据上下文的窗口。此窗口中还有 2 个用户控件。这些用户控件具有绑定到 ViewModel 中的属性的各种 xaml 对象，并且我对任何其他属性都没有问题。

我遇到的问题是我创建的数据触发器不会触发。您可以在下面看到我尝试过的数据触发器的 xaml：

**注意：** IsBold 是我用于 Window 的 ViewModel 中的一个属性。我的印象是窗口中的用户控件将从父级继承数据上下文，所以我不认为这是我的问题。

```
<ScrollViewer >
        <ListBox
            ItemsSource="{Binding Path=Listings}"
            SelectionMode="Single"
            SelectedValue="{Binding Path=SelectedListingItemID}"
            SelectedValuePath="ItemID"
            Grid.IsSharedSizeScope="True">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBlock>
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="NotTriggered" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=IsBold}" Value="True">
                                            <Setter Property="Text" Value="Triggered" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </ScrollViewer> 
```

当我运行它时，我会得到输出语句：

**BindingExpression 路径错误：在“对象”“DataRowView”上找不到“DataContext”属性**

此消息使我相信我需要将数据触发器移动到 xaml 的另一部分，以便它意识到该属性来自 ViewModel 而不是 ListBoxItem，但我应该将它移动到哪里？或者这甚至是正确的做法？

我希望我在所有必要的领域都足够清楚，但如果我不是，我当然可以在需要的地方详细说明。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:27:06.227

最简单的方法是使用[相对源属性](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.relativesource.aspx)，您可以使用 FindAncestor 模式和窗口的 AncestorType 从窗口的 dataContext 中检查 IsBold，如下所示：

```
<DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}, Path=IsBold}" Value="True">
    <Setter Property="Text" Value="Triggered" />
</DataTrigger> 
```

# performance - Firebase - 缓存会提高性能吗？

> ID：11991426
> 
> 赞同：15
> 
> 时间：2012-08-16T16:14:31.030
> 
> 标签：performance, firebase

我正在使用 Firebase 构建一个 Web 应用程序，它采用相同的数据并以两种不同的方式呈现它——在列表中和作为谷歌地图上的标记。

现在，在每个视图（地图或列表）中，我都有从 firebase 查询数据、将其合并并显示的代码。相反，我正在考虑这个计划：在启动时，查询数据，合并它，然后将其全部保存到一个数组中，然后从一个视图传递到另一个视图。

从某种意义上说，我正在将 firebase 数据“缓存”在一个数组中。这在某种意义上并不理想 - 缓存的数据不如直接查询 Firebase 那样最新。另一方面，我只调用 Firebase 一次。

这对性能有意义吗？从 Firebase 读取数据与从数组读取数据所花费的时间是否相同？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T18:01:23.490

通常，不需要缓存数据来限制 Firebase 的使用。Firebase 在客户端维护自己的“活动”数据缓存。“活动”被定义为“开启”呼叫未完成的数据。因此，对于任何活动数据，任何额外的“on”或“once”调用都不需要网络流量，因为数据已经加载。

我不完全确定“查询 firebase”是什么意思。Firebase 没有传统意义上的查询。它只是具有附加回调的方法。您是否使用“once()”函数定期从 Firebase 获取数据？如果是这样，这可能是非常低效的。一次是一种方便的方法，通常只应用于极不经常访问的数据或由于某种原因开发人员不想实时更新的数据。如果在 once() 完成时没有未完成的活动“on”调用，Firebase 将刷新该数据的缓存，并且对 once() 的任何后续调用都需要往返服务器。

如果您想要一种以有效方式同步访问最新版本数据的本地副本的方法，我推荐这种方法：

```
var savedSnapshot = null;
dataRef.on("value", function(snapshot) {
  savedSnapshot = snapshot;
});

//and then when you need to read the data
var theData = savedSnapshot.val() 
```

通过维护一个 on() 调用，Firebase 能够通过仅在事情发生变化时通过线路发送增量来保持数据最新，而不是在每次需要时重新加载所有数据。

# javascript - 延迟网页的初始呈现

> ID：11991429
> 
> 赞同：3
> 
> 时间：2012-08-16T16:14:35.150
> 
> 标签：javascript, jquery, html, css

我有一个由[另一家公司](http://www.parature.com/)提供的 Web 应用程序，可通过 CSS 获得半有限的自定义，并`<head>`在`<body>`.

我需要比 CSS 单独提供更多的自定义，因此（就在之前`</body>`）我注入 jQuery 和一个`<script>`标签来处理它们提供的 HTML 中的废话。（添加、重新设置和删除页面上的各种 HTML 元素和内容。）

不幸的是，这种方法意味着有时用户可以看到原始（CSS 样式）页面内容在页面重组自身时闪烁之前短暂出现。

在进行这些更改之前，我不会等待`load`or事件，而是在添加所有元素的那一刻直接操作 DOM。`document.ready`

**如何避免在页面加载时看到预先设置的内容？**

^(我目前的计划是添加隐藏任何注定要移动的内容的 CSS，使用 JS 在`<body>`加载后立即设置一个类以启用此 CSS 规则，然后在 DOM munging 后删除该类/CSS 规则是完全的。但是，我不确定这是否是黑客行为；有更清洁的解决方案吗？)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:20:01.353

在身体的顶部添加这样的东西？

```
<div style="z-index:10000; background-color:#FFF; position:fixed; top:0; left:0; width:100%; height:100%;"></div> 
```

然后在其他 JS 运行或 DOM 准备好时隐藏/删除此 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:17:26.183

[http://gayadesign.com/scripts/queryLoader2/](http://gayadesign.com/scripts/queryLoader2/)

类似的东西？

只是为了澄清我没有写那个脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T21:21:18.830

我的最终解决方案是：

1.  在开始之后添加此代码`<body>`：

    ```
    <script type="text/javascript">
      document.body.className += ' loading';
    </script> 
    ```

2.  使用 CSS 隐藏任何将要移动或移除的部分：

    ```
    body.loading #navigation,
    body.loading ol.extra-links {
      display:none !important
    } 
    ```

3.  在所有 DOM 操作之后，在最后删除`loading`该类：

    ```
     <!-- include jQuery for transformation work -->
      <script type="text/javascript">
        // all transformations
        $(document.body).removeClass('loading');
      </script>
    </body> 
    ```

这种方法的好处是用户在加载过程中不会看到空白屏幕；没有被删除或移动的内容（一些 CSS 标题）是可见的，并且在某些情况下可能会随着其他内容的出现而略有变化。

# iphone - Xcode中的Json到NSarray

> ID：11991431
> 
> 赞同：0
> 
> 时间：2012-08-16T16:14:40.877
> 
> 标签：iphone, xcode, ios4, sdk

我当前使用的没有 json 的代码是：

```
parts = [NSArray arrayWithObjects:
            [[part alloc] initWithpartName:@"Part1" imageName:@"picture1.jpg"],
             [part alloc] initWithpartName:@"Part2" imageName:@"picture2.jpg"],
             [part alloc] initWithpartName:@"Part3" imageName:@"picture3.jpg"]
            nil]; 
```

我获取的json是：

```
 [{"id":"1","case_name":"NZXT Phantom 
410","case_description":"","case_type":"ATX","case_color":"White","case_price":"99.99","case
_image":""},{"id":"2","case_name":"Thermaltake 
MK+","case_description":"","case_type":"ATX","case_color":"Black","case_price":"84.99","case
_image":""} 
```

我用它来获取它：

```
NSString *urlString = [NSString stringWithFormat:@"http://site.com/get/parts/part.php?part=case"];

        NSURL *url = [NSURL URLWithString:urlString];

        NSString *data = [NSData dataWithContentsOfURL:url]; 
```

问题：我怎么能把这个 json 放到这个数组中？我有 SBJson，我尝试使用它：

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

        parts = [[parser objectWithString:data error:nil] copy]; 
```

有人可以纠正我如何用颜色、描述、类型等额外数据解析它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:53:36.970

当您使用 SBJSON 或任何其他 JSON 解析器来解析此 JSON 字符串时，您将得到一个 NSArray，其中数组的每个项目都是一个 NSDictionary。您要查找的键/值对将在这些字典中。它不会直接为您提供“部分”对象的数组 - 您必须手动编写代码来执行此操作。

如果这是您要尝试做的，那么代码将如下所示：

```
NSMutableArray *result = [[NSMutableArray *alloc] init];
NSArray *jsonObj = [parser objectWithData:data];
[jsonObj enumerateObjectsUsingBlock:^(NSDictionary *dict, NSUInteger idx, BOOL *stop) {
    Part *part = [[part alloc] initWithPartName:[dict objectForKey:@"case_name"]
                                      imageName:[dict objectForKey:@"case_image"]];
    [result addObject:part];
}]; 
```

如果您的 Part 类中有更多字段要使用 JSON 中的数据进行填充，则可以添加代码，根据 的结果`dict objectForKey:`使用适当的键名（例如`id`或）设置这些字段`case_description`。

# javascript - javascript 闭包的 JSHint 错误“对象不支持此属性或方法”

> ID：11991432
> 
> 赞同：1
> 
> 时间：2012-08-16T16:14:55.157
> 
> 标签：javascript, jslint, wsh, jshint

我有这个 javascript：

```
(function ($) {
    // a comment
})(window.jQuery); 
```

我正在使用以下选项运行[JSHint](http://www.jshint.com/)的[wsh 版本：](https://github.com/jshint/jshint/blob/master/env/wsh.js)

命令：

```
%systemroot%\system32\cscript.exe 
```

论据：

```
//Nologo "%userprofile%\Documents\jshint\env\wsh.js" /forin:true,noarg:true,noempty:true,eqeqeq:true,bitwise:true,undef:true,unused:true,browser:true,jquery:true,indent:4,maxerr:500 $(ItemPath) 
```

（`$(ItemPath)`替换为 Visual Studio 中的当前选定项）

...它给了我这个输出：

```
[%pathname%\js\JScript1.js]
Line 3 character 18: Object doesn't support this property or method

Implied globals:
    window: 3 
```

我尝试将括号安排为使用[JSLint](http://www.jslint.com/)样式，但这给了我同样的错误：

```
(function ($) {
    // a comment
}(window.jQuery)); 
```

我的 javascript 做错了什么还是 JSHint 错误？

**更新：**我倾向于 JSHint 错误，这个 javascript：

```
(function ($) {
    // a comment
})(window.jQuery);
// is this a bug?
window.alert("maybe?"); 
```

给我这个错误：

```
Line 5 character 23: Object doesn't support this property or method 
```

**更新#2：**我认为这是将 args 传递给的正确方法`wsh.js`：

```
//U //Nologo "%userprofile%\Documents\jshint\env\wsh.js" /forin:true /noarg:true /noempty:true /eqeqeq:true /bitwise:true /undef:true /unused:true /browser:true /jquery:true /indent:4 /maxerr:500 $(ItemPath) 
```

但是，这段代码：

```
(function (w, $) {})(window, jQuery); 
```

仍然输出：

```
[%pathname%\js\JScript1.js]
Line 1 character 37: Object doesn't support this property or method 
```

**更新#3：**事实证明，我确实是个白痴。

我试图使用最新的： [https ://nodeload.github.com/jshint/jshint/zipball/master](https://nodeload.github.com/jshint/jshint/zipball/master)

...当我应该使用**r09**时： [https ://nodeload.github.com/jshint/jshint/zipball/r09](https://nodeload.github.com/jshint/jshint/zipball/r09)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:05:41.393

所以这是最新主控中的一个错误，它已在 r10 版本中修复：http: [//www.jshint.com/changelog/](http://www.jshint.com/changelog/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T16:21:10.940

您不想`window.jQuery`通过自实例化匿名函数作为参数传递，而是`window, jQuery`. Object`window`没有方法`jQuery`，因此出现错误。

# c# - 如何指定 T 继承自其他接口。通用比较器

> ID：11991438
> 
> 赞同：1
> 
> 时间：2012-08-16T16:15:21.137
> 
> 标签：c#, .net

我有一个函数可以验证一个数字是否介于其他两个数字 a 和 b 之间。对于双打，这个函数看起来像这样：

```
public static bool IsBetween(this double num, double minValue, double maxValue)
{
   return (num >= minValue && num <= maxValue) 
          || (num >= maxValue && num <= minValue);
} 
```

然而，这里的问题是我需要能够检查整数或小数是否在这个范围内。所以我必须用签名指定一个重载：

```
public static bool IsBetween(this int num, double minValue, double maxValue) 
```

问题：有没有办法通过添加从 IComparable 继承 T 的位置来使其通用。这是我正在寻找的：

```
public static bool IsBetween <T : IComparable> (this T num, K minValue, K maxValue)
{
   return (num >= (T)minValue && num <= (T)maxValue) 
       || (num >= (T)maxValue && num <= (T)minValue);
} 
```

我可能会尝试将所有内容都输入，`double`但如果所有值都是整数或小数，那将是矫枉过正。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:18:07.543

你把它写成：

```
public static bool IsBetween <T, K>(this T num, K minValue, K maxValue)
    where T : IComparable
    where K : IComparable
{
    // ... 
```

话虽如此，你可能想用[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)而不是来写这个`IComparible`，因为你正在铸造。这将使您可以更清晰地转换为通用类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:17:40.490

您需要`where`在签名右侧使用一个类，如下所示：

```
public static bool IsBetween<T, K>(this T num, K minValue, K maxValue)
        where T : IComparable<T>
        where K : IComparable<T>
{
    // ...
} 
```

# php - 在 PHP 的 imap_mail_move 函数中指定一个数字范围

> ID：11991445
> 
> 赞同：0
> 
> 时间：2012-08-16T16:15:40.990
> 
> 标签：php, imap

我基本上想完成以下工作

```
imap_mail_move($imapStream, imap_num_msg($imapStream), "INBOX.Parsed");
imap_expunge($imapStream); 
```

但这只会移动第一条消息，该功能显然需要一个范围才能正常工作。问题是php文档页面上唯一的例子如下

```
imap_mail_copy($mbox,'16','[Gmail]/Starred'); // 16 is the message number, which can also be a range.(ex: '1:15') 
```

如果我尝试使用 sytax 1:15 或 1:imap_num_msg($imapStream) 会导致以下错误

```
Parse error: syntax error, unexpected ':' 
```

如何将收件箱中的邮件总数移动到不同的文件夹并正确指定该范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:20:07.370

它需要是 PHP 中的字符串类型。

```
$var = 1:15; 
```

不是有效的 PHP 语法。你需要做：

```
$var = '1:15'; 
```

试试这条线：

```
imap_mail_copy($mbox, '1:'.imap_num_msg($imapStream), '[Gmail]/Starred'); 
```

# c# - 绘制用户表单的子面板的正确或首选方法是什么

> ID：11991448
> 
> 赞同：0
> 
> 时间：2012-08-16T16:15:50.977
> 
> 标签：c#, winforms

一个例子：

使用 VS，我可以创建派生自 UserControl 的 MyControl，可以向其中添加一组数据作为成员或属性。使用可视化设计器，我可以将两个面板添加到 MyControl - 每个面板都旨在使用我打算提供的方法以不同的形式呈现相同的数据（FTSOA 说是饼图和条形图）。

我认为有许多方法可以让 MyControl 使用这些方法来重绘面板。

首先使用 VS 为每个面板添加一个绘制事件。这可以快速实现，并允许方法访问 MyControl 数据，因为它们是在 MyControl 类中创建的。

其次为每个面板覆盖 OnPaint 方法。AFAIK 要做到这一点，需要为每个具有关联类的面板创建一个 UserControl。然后可以覆盖每个类的 OnPaint 方法。缺点是每个类都必须有权访问 MyControl 数据。

第三，也有可能（我没有做过这个）覆盖 MyControl OnPaint 并手动重新绘制每个面板也是可能的 - 但掌握图形等是一个问题。

问题：我可以让 (1 & 2) 工作，但我想知道其他人的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:46:20.937

嗯，以上都是。但是 Panel 控件当然没有优化为非常好的绘画控件。它派生自 ScrollableControl，而这正是它真正擅长的，一个可以滚动其内容的容器。也是移动一组控件的快速方法。或者隐藏它们。或禁用它们。

它并不完全适合绘画。它没有双重缓冲，打开它需要你自己控制它。它还针对容器行为进行了优化，您需要打开 ControlStyles.ResizeRedraw 样式以在调整大小时触发 Paint 事件。如果您确实需要自定义绘画*也*需要可滚动，那么 Panel 是一个很好的派生基类。

在我看来，您应该真正覆盖 UserControl 的 OnPaint() 方法。最小化控件的数量是一个非常强大的优化目标，它们确实很昂贵。

# .net - 将大型平面文件文本存储到字符串

> ID：11991460
> 
> 赞同：-2
> 
> 时间：2012-08-16T16:16:25.780
> 
> 标签：.net, vb.net, string, file

是否可以将大型平面文件（大小约为 10 mb）的文本存储到 vb.net 中的字符串中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:23:02.380

事实上，基类库中有一个函数可以做到这一点：[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)

```
Dim text = File.ReadAllText("path/to/file") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:42:35.170

字符串的最大大小取决于许多变量，并且在每台机器上都会有所不同。

[我在这个网站](http://www.pcreview.co.uk/forums/maximum-string-length-c-and-net-t2539908.html)上找到了一个很好的解释

*“所有引用类型（如字符串）实例的最大大小受 CLR 限制为 2GB，这意味着字符串最多可以容纳 ~1G 字符。虽然在 64 位操作系统上运行时可能会达到该限制，您将永远无法在 32 位操作系统上创建如此大的字符串（或数组）。原因是您将没有那么多“连续”地址空间可用于创建后备存储（字符数组）字符串。”*

[这个 SO question](https://stackoverflow.com/questions/140468/what-is-the-maximum-possible-length-of-a-net-string)的公认答案将与上述解释相呼应

# jquery - 即使第一个被中断也执行悬停回调函数

> ID：11991476
> 
> 赞同：1
> 
> 时间：2012-08-16T16:17:22.927
> 
> 标签：jquery, hover, hoverintent

要查看问题，请尝试将鼠标悬停在菜单上，而动画仍会将指针移出菜单。对于预期的行为，将鼠标留在菜单中，直到动画完成，然后将指针移出它。我想我想在某处添加 ,,stop()" ，但是 atm 我看不出我做错了什么。

这是 jfiddle：http: [//jsfiddle.net/DpXXT/4/](http://jsfiddle.net/DpXXT/4/)

网站上的实际菜单正在进行中：http: [//johnnystakes.co.uk/oko/](http://johnnystakes.co.uk/oko/)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:37:17.227

这是使用超时功能解决我的问题的方法。不完美，但它有效... [jfiddle link](http://jsfiddle.net/DpXXT/24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:56:45.907

我检查了你的代码，让它工作得更好了，它仍然不完美，但我想它会有所帮助，我需要离开，所以这总比没有好：http: [//jsfiddle.net/2eZsk/](http://jsfiddle.net/2eZsk/)

# objective-c - 从字符串创建一个有效的 URL

> ID：11991483
> 
> 赞同：0
> 
> 时间：2012-08-16T16:17:47.167
> 
> 标签：objective-c

是否有任何 API 或良好的函数可以将“www.example.com”或“example.com”等字符串格式化为“http://www.example.com”等有效的 urlstrings？

```
+ (NSString*)complete:(NSString *)urlString
{
    NSArray * urlParts = [urlString componentsSeparatedByString:@"."];
    if(urlParts.count==3)
        return [NSString stringWithFormat:@"http://www.%@.%@",[urlParts objectAtIndex:1],[urlParts objectAtIndex:2]];
    else if(urlParts.count==2)
        return [NSString stringWithFormat:@"http://www.%@.%@",[urlParts objectAtIndex:0],[urlParts objectAtIndex:1]];
    return nil;
} 
```

这就是当前解决方案的样子，但这对我来说看起来不是很好和可靠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:40:59.053

你可以很容易地做到这一点`NSDataDetector`：

```
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink error:NULL];
NSString *URLString = @"www.example.com";
NSTextCheckingResult *result = [detector firstMatchInString:URLString options:0 range:NSMakeRange(0, URLString.length)];
if (result) {
    NSURL *URL = [result URL];
    NSLog(@"%@", URL); // http://www.example.com
} 
```

顺便说一句，您不应该假设这`www`是任何给定域的有效子域。

如果您需要将结果作为字符串，您可以使用 的`absoluteString`方法`NSURL`，但通常最好使用`NSURL`而不是`NSString`用于 URL。

# google-maps - 此网站需要不同的 Google Maps API 密钥

> ID：11991492
> 
> 赞同：0
> 
> 时间：2012-08-16T16:18:23.187
> 
> 标签：google-maps

我在我们集成了谷歌地图 API 的页面上看到了这个弹出窗口。现在奇怪的是办公室里的一些人它工作正常，不管浏览器与其他人有这个弹出窗口，说

> 该网站需要不同的 Google Maps API 密钥....

当我将我们在本地安装的页面保存为 html 文件并打开该页面时，它也可以在我的计算机上运行。

当我检查 chrome 开发人员工具时，我看到一个

> 未捕获的 ReferenceError：未定义 GClientGeocoder

在我的电脑上，而我在同一页面上的一些同事他没有这个错误

# testing - 由于 AppDomain.CurrentDomain 导致 TFS 构建机器中的单元测试失败

> ID：11991496
> 
> 赞同：4
> 
> 时间：2012-08-16T16:18:38.297
> 
> 标签：testing, build, tfs

我遇到了一个问题，我的单元测试没有在我的 TFS 构建机器上运行，尽管它们在我的开发人员机器上运行。

我在以下行中遇到异常，尝试为特定接口加载所有已加载的程序集：

```
 var classesToMap = AppDomain.CurrentDomain.GetAssemblies().ToList()
        .SelectMany(s => s.GetTypes())
        .Where(p => typeof(IInterface).IsAssignableFrom(p) && p.IsClass).ToList(); 
```

例外是：

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:43:22.627

通过添加条件以丢弃 GAC 中的所有 dll 来解决此问题：

```
 var classesToMap = AppDomain.CurrentDomain.GetAssemblies()
        .Where(a => !a.GlobalAssemblyCache)
        .SelectMany(s => s.GetTypes())
        .Where(p => typeof(IInterface).IsAssignableFrom(p) && p.IsClass).ToList(); 
```

这是一种解决方法，但对我有用。

感谢您的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T13:59:25.933

就我而言，唯一无法加载的程序集`Microsoft.VisualStudio.TeamSystem.Licensing`是`Microsoft.VisualStudio.QualityTools.Common`.

根据[Osel Miko Dřevorubec 的回答](https://stackoverflow.com/a/22355881/2498426)，我想出了这个更安全的策略：

```
private static Type[] GetTypesFromAssemblySafe(Assembly assembly)
{
    var ignoredAssemblies = new List<string>()
        {
            "Microsoft.VisualStudio.QualityTools.Common" //Gives trouble in TFS automated builds
        };

    if (!ignoredAssemblies.Contains(assembly.FullName.Split(',')[0]))
        return assembly.GetTypes();
    else
        return new Type[] { };
}

var types = AppDomain.CurrentDomain.GetAssemblies()
    .ToList()
    .SelectMany(GetTypesFromAssemblySafe); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T15:15:59.337

我也遇到了这个问题，但@nirpi 条件没有帮助我我成功地使用了这个解决方案：

```
private static Type[] GetTypesFromAssemblySafe(Assembly assembly) {
    try {
        return assembly.GetTypes();
    } catch {
        return new Type[] {};
    }
}

var types = AppDomain.CurrentDomain.GetAssemblies()
    .ToList()
    .SelectMany(GetTypesFromAssemblySafe); 
```

来源：[http ://www.kspace.pt/posts/dynamic-type-discovery/](http://www.kspace.pt/posts/dynamic-type-discovery/)

# c++ - 是否存在 ac/c++ 代码格式化程序来对齐与代码在同一行出现的注释？

> ID：11991497
> 
> 赞同：4
> 
> 时间：2012-08-16T16:18:41.707
> 
> 标签：c++, c, comments, formatter

是否存在 ac/c++ 代码美化器可以对齐与代码在同一行出现的注释，即

由此：

```
for(i = 0;i < 10; i++)   /* a for loop */
{
     printf("Hello\n");       /* print hello */
} 
```

对此：

```
for(i = 0;i < 10; i++)        /* a for loop */
{
     printf("Hello\n");       /* print hello */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:34:58.997

[GNU Iindent](http://www.gnu.org/software/indent/)可以做到

```
$ cat 11991497.c
for(i=0;i<10;i++)              /* a for loop */
{
    printf("Hello\n");    /* print hello */
}
$ indent -npro -nut < 11991497.c
for (i = 0; i < 10; i++)        /* a for loop */
  {
    printf ("Hello\n");         /* print hello */
  } 
```

命令行`-npro`参数指示 indent 不读取配置文件。该`-nut`参数是使用空格而不是制表符。

默认行为是缩进使用“GNU 样式”。

它可以配置为在您的示例中提供更像（甚至可能完全相同）的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:25:10.690

如果您使用 VS2010，则有一个名为[Code Alignment](http://visualstudiogallery.msdn.microsoft.com/7179e851-a263-44b7-a177-1d31e33c84fd/)的扩展 ，它可以让您轻松地根据您的需要对齐代码。

# ios - 将 Box2D 物理应用于 UIView 与 CALayer

> ID：11991498
> 
> 赞同：5
> 
> 时间：2012-08-16T16:18:44.963
> 
> 标签：ios, uiview, uikit, box2d, calayer

我已经使用这个优秀的教程来启动一个我正在从事的涉及物理学的小项目：

[http://www.cocoanetics.com/2010/05/physics-101-uikit-app-with-box2d-for-gravity/](http://www.cocoanetics.com/2010/05/physics-101-uikit-app-with-box2d-for-gravity/)

基本上，它创建了一个世界并将 B2D 的物理原理应用于您拥有的任何视图。非常简单，而且有效。但是，我尝试使用 CALayers 应用相同的逻辑，即，我以编程方式创建图层，将它们添加到主 view.layer 并尝试为它们设置动画。

创建图层的示例代码：

```
CALayer *layer = [CALayer layer];
layer.backgroundColor = [UIColor blackColor].CGColor;
layer.frame = CGRectMake(50, 100, 30, 30);
layer.name = @"square";
[self.view.layer addSublayer:layer]; 
```

以及股票代码中的应用物理学：

```
CALayer *oneLayer = (CALayer *)b->GetUserData();
// y Position subtracted because of flipped coordinate system
CGPoint newCenter = CGPointMake(b->GetPosition().x * PTM_RATIO, self.view.bounds.size.height - b->GetPosition().y * PTM_RATIO);
oneLayer.position = newCenter;
CGAffineTransform transform = CGAffineTransformMakeRotation(- b->GetAngle());
oneLayer.affineTransform = transform; 
```

请注意，我将仿射变换调用改编为 CALayer 类。

我检查并仔细检查了变量，数字似乎匹配。我得到的是来自 CALayer 动画的奇怪反弹，以及来自 UIView 的完美动画。任何有 Box2D 和 UIKit 经验的人来回答为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:15:42.757

与 不同`UIViews`，`CALayers`具有内置的隐式动画。每次更改可动画属性的值时，都会引入一个简短的动画。您必须将代码包装起来`CATransaction`并禁用操作才能消除这种影响：

```
[CATransaction begin];
[CATransaction setDisableActions:YES]; // implicit animations get disabled

CALayer *oneLayer = (CALayer *)b->GetUserData();
// y Position subtracted because of flipped coordinate system
CGPoint newCenter = CGPointMake(b->GetPosition().x * PTM_RATIO, self.view.bounds.size.height - b->GetPosition().y * PTM_RATIO);
oneLayer.position = newCenter;
CGAffineTransform transform = CGAffineTransformMakeRotation(- b->GetAngle());
oneLayer.affineTransform = transform;

[CATransaction commit]; 
```

# jquery - 谷歌如何淡出内容？

> ID：11991501
> 
> 赞同：1
> 
> 时间：2012-08-16T16:18:47.073
> 
> 标签：jquery, ajax

当您从一页结果转到另一页时，您会看到 google 从当前结果中变暗，因此在加载新结果之前它们只有一半不透明。谁能告诉我如何用 Jquery 做到这一点？我宁愿不使用PNG。我还希望它在 ajax 完成后转到页面顶部。

我对 Jquery 一无所知，但这是我的猜测：

```
ajaxStart(function(){
  $("#contents").fadeTo("fast", 0.5);
 });
ajaxStop(function(){
  $("#contents").fadeTo("fast", 1).animate({ scrollTop: 0 }, 0);;
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:38:22.837

这是你如何做褪色。您将需要对其进行编辑以包含您的 ajax 代码。

[http://jsfiddle.net/HPdvg/1/](http://jsfiddle.net/HPdvg/1/)

希望有帮助。:)

# java - 是否可以自定义 JTree 节点？

> ID：11991502
> 
> 赞同：0
> 
> 时间：2012-08-16T16:18:50.913
> 
> 标签：java, swing, jcombobox, jtree, treecellrenderer

我想尝试实现这样的树：树的每个节点都是一个自定义组件，由一个 JComboBox 和一个 JTextField 组成。每次我在 JComboBox 中选择一个项目时，这个节点都会生成三个新的子节点作为叶子。

有可能这样做吗？我曾尝试使用 TreeCellRender，但它似乎只是绘制组合框和文本字段，但组合框不可选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:22:20.150

您要做的是编辑`JTree`. 为此，渲染器是不够的。渲染器仅用于“渲染” `JTree`，因此仅当您具有只读`JTree`.

如果你也想编辑后面的模型`JTree`，你必须在它上面设置一个编辑器。

您的组合框不可选择的原因在 Swing table 教程中[关于渲染器和编辑器的部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)中进行了解释。这同样适用于树（但该教程不包含这样的部分）。

# javascript - 如何根据类删除所有内部div

> ID：11991503
> 
> 赞同：1
> 
> 时间：2012-08-16T16:18:51.147
> 
> 标签：javascript, jquery

在下面的标记中，我想删除所有类为“选择”的 div

```
<ul class="container">
   <li>10</li>
   <li>10</li>
   <li>10<div class="select"></div></li>
   <li>10</li>
   <li>10<div class="select"></div></li>
   <li>10</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:20:07.460

```
$('ul.container div.select').remove(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:20:17.153

这应该有效：

```
$.('div.select')
  .remove(); 
```

更准确地说（删除此列表中的所有此类 div），您可以使用

```
$.('ul.container div.select')
  .remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:20:55.700

```
$('ul.container > li > div.select').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:22:19.533

查找element`.select`中的所有元素`.container`并删除它们：

```
$('.select', '.container').remove(); 
```

# security - 多因素身份验证和 CloudBees Web 管理控制台

> ID：11991504
> 
> 赞同：1
> 
> 时间：2012-08-16T16:18:52.770
> 
> 标签：security, cloudbees, two-factor-authentication

我们有兴趣在我们的 CloudBees 帐户上启用多因素身份验证 (MFA) 以改进访问[CloudBees 管理控制台](https://grandcentral.cloudbees.com/)的安全检查。

理想情况下，这种机制会像 Amazon AWS 那样支持 Google Authenticator Application。

西里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T08:47:24.270

CloudBees“私有模式”路线图包括一些基于平台 OAuth 集成的可扩展性，可能部分涵盖您的用例。反正这个话题还没有预计到达时间，所以不能说太多。

短期而言，您可能必须将自己的解决方案实现为应用程序模块

# css - CSS渐变，背景图像在悬停时消失

> ID：11991506
> 
> 赞同：0
> 
> 时间：2012-08-16T16:18:53.517
> 
> 标签：css

顶部 nov 的 facebook 徽标在悬停时消失。我应用了 css 渐变，除了 fb 徽标本身之外没有图像。有没有办法让徽标在悬停状态下保持可见？

[css文件在这里](http://www.hauppauge.com/css/nav-sprite-styles.css)

谢谢！

[页面在这里](http://www.hauppauge.com/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:35:14.600

您需要使用多个背景，因为在悬停时，facebook 背景会被渐变覆盖。

```
ul#topnav li.facebook a:hover {
background-image: url("../pics/facebook-icon.png"),
            linear-gradient(center top , #444444 0%, #A1A1A1 6%, #575757 100%);
/* facebook icon is on top of a linear gradient */
background-repeat: no-repeat, repeat;
background-position: 8px 2px, 0 0;
} 
```

当然，您需要为所有供应商前缀添加此规则。( `-moz-`, `-webkit-`, ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:45:50.753

或者，您可以将图标与背景分开。也就是说，使用 CSS 将图标放在“facebook”文本之前，使其完全独立于背景选择器。像这样：

```
li.facebook a::before {

content: "";
position: absolute;
top: 50%;
left: 0;
width: 16px; /* Width of your FB icon */
height: 16px; /* Height of your FB icon */
margin-top: -9px;
background-image: url("path_to_your_FB_icon.png");
background-repeat: no-repeat;

} 
```

希望有帮助！

# jquery - 无法从 JSON 填充 jqGrid

> ID：11991508
> 
> 赞同：-2
> 
> 时间：2012-08-16T16:19:06.123
> 
> 标签：jquery, json, jqgrid

我想得到一个 jqgrid 的例子来工作。我做了一切“按书”，但它不起作用。如果你能发现故障，那就太好了。这是基于 trirand 的演示网站。

PS：所有文件路径都经过三重检查。他们都指向正确的地方。

HTML/JS：

```
<html>
<head>
<title>Example Grid</title>
<!-- Load CSS--><br />
<link rel="stylesheet" href="css/ui.jqgrid.css" type="text/css" media="all" />
<!-- For this theme, download your own from link above, and place it at css folder -->
<link rel="stylesheet" href="jquery-ui-1.8.22.custom/css/smoothness/jquery-ui-1.8.22.custom.css" type="text/css" media="all" />
<!-- Load Javascript -->
<script src="jquery-ui-1.8.22.custom/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="jquery-ui-1.8.22.custom/js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
</head>
<body>
<table id="testgrid"></table>
<div id="exampleGrid"></div>
<script language="javascript">
jQuery("#testgrid").jqGrid({
    url:'test.txt',
    datatype: "json",
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'invdate',index:'invdate', width:90},
        {name:'name',index:'name asc, invdate', width:100},
        {name:'amount',index:'amount', width:80, align:"right"},
        {name:'tax',index:'tax', width:80, align:"right"},      
        {name:'total',index:'total', width:80,align:"right"},       
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#examplegrid',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
});
jQuery("#testgrid").jqGrid('examplegrid','#examplegrid',{edit:false,add:false,del:false});
</script>
</body>
</html> 
```

test.txt 的内容：

```
{"page":"1","total":2,"records":"13","rows":[{"id":"13","cell":["13","2007-10-06","Client 3","1000.00","0.00","1000.00",null]},{"id":"12","cell":["12","2007-10-06","Client 2","700.00","140.00","840.00",null]},{"id":"11","cell":["11","2007-10-06","Client 1","600.00","120.00","720.00",null]},{"id":"10","cell":["10","2007-10-06","Client 2","100.00","20.00","120.00",null]},{"id":"9","cell":["9","2007-10-06","Client 1","200.00","40.00","240.00",null]},{"id":"8","cell":["8","2007-10-06","Client 3","200.00","0.00","200.00",null]},{"id":"7","cell":["7","2007-10-05","Client 2","120.00","12.00","134.00",null]},{"id":"6","cell":["6","2007-10-05","Client 1","50.00","10.00","60.00",""]},{"id":"5","cell":["5","2007-10-05","Client 3","100.00","0.00","100.00","no tax at all"]},{"id":"4","cell":["4","2007-10-04","Client 3","150.00","0.00","150.00","no tax"]}],"userdata":{"amount":3220,"tax":342,"total":3564,"name":"Totals:"}} 
```

这个字符串是完美的 JSON 字符串，也在 JSONlint.com 验证

我希望有人能发现这个问题并告诉我为什么我的网格没有被填充。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:15:30.443

代码中有一些小但重要的错误：

*   您应该在元素`<!DOCTYPE html ...>`之前包含语句。`<html>`在您以后的代码中，您使用 XML 注释，例如`<!-- Load CSS-->`. 所以你想可能使用`XHTML`. 在这种情况下，您应该更换`<html>`为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

*   下一个问题：你应该删除`<br />`哪些不能在里面使用`<head>`
*   您应该包括文档中声明的编码，例如

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

*   您应该使用正确的 id 大小写。因为 use used`<div id="exampleGrid"></div>`你必须 `'#exampleGrid'`在后面的代码中使用而不是`'#examplegrid'`
*   代码`jQuery("#testgrid").jqGrid('examplegrid',...);`是错误的，它会产生异常，因为 jqGrid 中没有方法`'examplegrid'`。你想做的是`jQuery("#testgrid").jqGrid('navGrid',...);`
*   要绝对正确的 XHTML 文档，您应该更改`<table id="testgrid"></table>`为`<table id="testgrid"><tr><td/></tr></table>`

您可以在[validator.w3.org](http://validator.w3.org/)上验证更改后[的演示](http://www.ok-soft-gmbh.com/jqGrid/lorenzokuzma.htm)没有 HTML 错误，并且它也在网格中显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:41:50.860

您缺少 json 阅读器，例如：

```
$(function(){ 

$("#list").jqGrid({
url : "<s:url action='tabla-historial-director' />",
datatype: 'json',
jsonReader: {
    root: 'gridModel',
    id: 'idTT',
    repeatitems: false,
},
resize: false,
hidegrid: false,
data: 'trabajosTerminales',
mtype: 'POST',
height: 'auto',
colNames:['No. de Registro', 'Título', 'Tipo', 'Periodo'],
colModel :[ 
  {name:'numRegistro', index:'titulo', search: 'true', stype:'text', align:'center', searchrules:{required:true},  width:100  },
  {name:'titulo', key:'true', index:'titulo', search: 'true', stype:'text', searchrules:{required:true},  width:800  },
  {name:'tipo', key:'true', index:'tipo', search: 'true', stype:'text',align:'center', searchrules:{required:true},  width:100  },
  {name:'periodo', key:'true', index:'titulo', search: 'true', stype:'text', searchrules:{required:true},  width:100  },
],
pager: '#pager',
rowNum:10,
rowList:[10,20,30],
viewrecords: true,
gridview: true,
caption: 'Trabajos Terminales dirigidos',
}); 

jQuery("#list").navGrid('#pager',{edit:false,add:false,del:false});     
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T13:21:01.193

从配置中删除“gridview”。至少它对我有用。

# python-3.x - 字节对象上的 Python hashlib & decode()

> ID：11991510
> 
> 赞同：1
> 
> 时间：2012-08-16T16:19:07.153
> 
> 标签：python-3.x, decode, sha512, hashlib

我不了解有关 hashlib 的内容。我不确定为什么我可以解码常规字节对象，但无法解码作为字节对象返回的哈希。我不断收到此错误：

**UnicodeDecodeError：“utf-8”编解码器无法解码位置 1 的字节 0xad：无效的起始字节**

这是我产生此错误的测试代码。错误在第 8 行 ( `h2 = h.decode('utf-8')`)

```
import hashlib

pw = 'wh@teV)r'
salt = 'b7u2qw^T&^#U@Lta)hvx7ivRoxr^tDyua'
pwd = pw + salt
h = hashlib.sha512(pwd.encode('utf-8')).digest()
print(h)
h2 = h.decode('utf-8')
print(h2) 
```

如果我不散列它，它工作得很好......

```
>>> pw = 'wh@teV)r'
>>> salt = 'b7u2qw^T&^#U@Lta)hvx7ivRoxr^tDyua'
>>> pwd = pw + salt
>>> h = pwd.encode('utf-8')
>>> print(h)
b'wh@teV)rb7u2qw^T&^#U@Lta)hvx7ivRoxr^tDyua'
>>> h2 = h.decode('utf-8')
>>> print(h2)
wh@teV)rb7u2qw^T&^#U@Lta)hvx7ivRoxr^tDyua 
```

所以我猜我对哈希不了解，但我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:40:03.163

在第二个示例中，您只是编码为 UTF-8，然后直接解码结果。

另一方面，在第一个示例中，您正在编码为 UTF-8，处理字节，然后尝试将其解码，就好像它仍然是 UTF-8。结果字节是否仍然有效，因为 UTF-8 完全取决于机会（即使它仍然是有效的 UTF-8，它表示的 Unicode 字符串与原始字符串无关）。

# php - 有没有类似于 Linq to Entities in PHP 的东西？

> ID：11991518
> 
> 赞同：2
> 
> 时间：2012-08-16T16:19:51.457
> 
> 标签：php, entity-framework, linq-to-entities

我真的很喜欢 LINQ to Entities 以及我上一个项目中的实体框架，我发现它非常易于使用且功能强大，更不用说节省时间了......

现在我必须使用 PHP，有没有类似的东西？

我正在寻找的功能是：

*   从 DB 模型自动创建类
*   以类似 SQL 的方式操作 PHP 对象
*   将 PHP 代码翻译成 SQL 查询

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:22:11.580

[教义](http://www.doctrine-project.org/)非常接近您正在寻找的东西。[它与Symfony](http://symfony.com/get_started)配合得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:24:45.167

PHP的ORM解决方案有不少，最著名的可能是[Doctrine](http://www.doctrine-project.org)

我想您可能会找到有关此问题的更多信息：[Good PHP ORM Library?](https://stackoverflow.com/questions/108699/good-php-orm-library)

此外，大多数 php (MVC) 框架都捆绑了某种形式的 ORM。

# android-layout - GridView 不填满屏幕

> ID：11991526
> 
> 赞同：1
> 
> 时间：2012-08-16T16:20:09.583
> 
> 标签：android-layout

我有一个“grid_test.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayoutGrid"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
>

<GridView
android:id="@+id/gridView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:columnWidth="90dp"
android:gravity="center"
android:horizontalSpacing="5dp"
android:numColumns="auto_fit"
android:stretchMode="columnWidth"
android:verticalSpacing="5dp" >
</GridView>
</LinearLayout> 
```

我将其包含在另一个带有页眉和页脚的布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:id="@+id/commonlayout" >

<LinearLayout android:id="@+id/llheader"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="@android:color/white">

    <RelativeLayout android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:layout_gravity="center">
        <Button
            android:id="@+id/Button_Logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginRight="2dp"
            android:layout_centerVertical="true"
            android:background="@drawable/ic_launcher"/>
            <Button
            android:id="@+id/Button_settings"
            android:layout_marginLeft="2dp"
            android:layout_width="wrap_content"
            android:layout_centerVertical="true"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/ic_launcher"/>
    </RelativeLayout>
</LinearLayout>

<ScrollView android:id="@+id/svdata"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="#FFFFFF"
    android:layout_below="@+id/llheader" 
    android:layout_above="@+id/llfooter" >

    <LinearLayout
        android:id="@+id/lldata"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/backgound_color"
        android:orientation="vertical"
        android:padding="5dp" >

        <include layout="@layout/grid_test" />

    </LinearLayout>

</ScrollView>

<LinearLayout android:id="@+id/llfooter"
    android:layout_width="fill_parent"
    android:orientation="horizontal" 
    android:layout_height="wrap_content"
    android:visibility="visible" 
    android:layout_margin="0dp"
    android:layout_alignParentBottom="true"
    >

    <RadioGroup
        android:id="@+id/radiogroup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black"
        android:orientation="horizontal" >
        <RadioButton
            android:id="@+id/btnOption1"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"
            android:singleLine="true"/>

        <RadioButton
            android:id="@+id/btnOption2"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"
            android:singleLine="true"/>

        <RadioButton
            android:id="@+id/btnOption3"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"/>

    </RadioGroup>
</LinearLayout>
</RelativeLayout> 
```

我的问题是包含的 GridView 布局没有填满页眉和页脚之间的屏幕。

什么可能导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:00:43.770

行。我找到了。删除 ScrollView，使其按预期工作。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:id="@+id/commonlayout" >

<LinearLayout android:id="@+id/llheader"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="@android:color/white">

    <RelativeLayout android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:layout_gravity="center">
        <Button
            android:id="@+id/Button_Logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginRight="2dp"
            android:layout_centerVertical="true"
            android:background="@drawable/ic_launcher"/>
            <Button
            android:id="@+id/Button_settings"
            android:layout_marginLeft="2dp"
            android:layout_width="wrap_content"
            android:layout_centerVertical="true"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/ic_launcher"/>
</RelativeLayout>
</LinearLayout>

    <LinearLayout
        android:id="@+id/lldata"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/backgound_color"
        android:orientation="vertical"
        android:layout_below="@+id/llheader" 
        android:layout_above="@+id/llfooter" 
        android:padding="5dp" >

        <include layout="@layout/grid_test" />

    </LinearLayout>

<LinearLayout android:id="@+id/llfooter"
    android:layout_width="fill_parent"
    android:orientation="horizontal" 
    android:layout_height="wrap_content"
    android:visibility="visible" 
    android:layout_margin="0dp"
    android:layout_alignParentBottom="true"
    >

    <RadioGroup
        android:id="@+id/radiogroup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black"
        android:orientation="horizontal" >
        <RadioButton
            android:id="@+id/btnOption1"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"
            android:singleLine="true"/>

        <RadioButton
            android:id="@+id/btnOption2"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"
            android:singleLine="true"/>

        <RadioButton
            android:id="@+id/btnOption3"
            style="@style/navbar_button"
            android:drawableTop="@drawable/ic_launcher"/>

    </RadioGroup>
</LinearLayout>
</RelativeLayout> 
```

# javascript - 监听 Backbone.js 的变化

> ID：11991530
> 
> 赞同：0
> 
> 时间：2012-08-16T16:20:20.850
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我试图了解何时在视图和模型或集合中使用事件。根据我现在的理解：

1.  用户制作的 UI 中的事件 - 应该在视图的“事件”方法中。

2.  为了监听模型的变化并重新渲染它的视图，我将在视图的初始化方法中放置一个监听事件。

3.  我到底在模型的初始化方法中听什么？

4.  我还应该知道什么？监听集合和路由器的变化怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:57:17.930

基本上，您将听取模型或集合的更改，以便您可以重新渲染部分视图。所以想想 todo 的例子。您有一个文本框和一个待办事项列表。现在，当您提交待办事项时，该待办事项会添加到集合中。如果您没有监听待办事项列表上的更改，则该列表将保持静态。因此，当一个新的 todo 被添加到集合中时，您需要重新渲染 todo-list-view，并通过侦听集合的更改来实现。我希望这是有道理的。

另一个例子是监听路由器上的变化。例如，在路线更改时，您可以更新导航类以显示要突出显示的导航元素。因此，即使用户在地址栏中输入 url，也会突出显示正确的导航属性。

# hibernate - Hibernate Envers：如何从我的审计表中删除条目？

> ID：11991535
> 
> 赞同：2
> 
> 时间：2012-08-16T16:20:38.480
> 
> 标签：hibernate, hibernate-envers

这个问题已经在[这里](https://stackoverflow.com/questions/2791148/hibernate-envers-how-to-delete-entries-from-my-audit-table)讨论过，但是，它并没有解决我的问题。

让我们有一个简单的审计类 Person ，其中包含一些字符串信息，如姓名等，以及字符串电子邮件地址列表。现在我想从数据库中删除特定的人及其所有修订。我知道，这不是 Envers 的常见用例，但它对我的项目至关重要。我明白，我可以使用这样的东西：

> “从 full.package.name.Person_AUD 中删除 u.originalId.id = :personid”

但是，这不会删除电子邮件表中与此人相关的记录，因为这种关系没有限制。还是我做错了什么？

我也在考虑从 REVINFO 表中删除记录（审计表中存在关于与 REVINFO 表的关系的约束），但这并不安全，因为在一个事务中可以修改更多实体，因此更多实体可能具有相同的修订号.

我的问题是：是否有任何简单的方法可以从任何人的所有审计表中删除所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-20T15:10:34.727

这对我来说完全有效，**不需要本机查询**

```
AuditQuery aq = auditReader.createQuery()
                   .forRevisionsOfEntity( ErpEmploye.class, true, false);       
 aq.add( AuditEntity.id().eq( employe.getCodeId() ) );
 aq.add( AuditEntity.relatedId("period").eq( erpPeriod.getCodeId() ) );
 List result =  aq.getResultList();//parameters must be added, this call is required
 if (result.size()>0){
    Query query = (Query) PrivateAccessor.invokePrivateMethod( aq, "buildQuery", new Object[0]);
    String queryString = (String) PrivateAccessor.getPrivateField( query, "queryString", true );
    PrivateAccessor.setPrivateField( query, "queryString", queryString.replace("select e__ from", "delete from"), true );
    getDAO().executeQuery(query);//transaction required             
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:27:52.337

由于这不是 hibernate 提供的功能，因此您自己删除了这些内容；那么您需要使用类似查询从所有表中显式删除数据。

```
 delete from full.package.name.Person_AUD u where u.originalId.id = :personid

 delete from full.package.name.Emails u where u.personId = :personid 
```

# c# - 在 WMI 中的进程创建事件之后阅读附加信息时滞后

> ID：11991537
> 
> 赞同：2
> 
> 时间：2012-08-16T16:20:44.377
> 
> 标签：c#, wmi

我正在尝试创建一个应用程序来监视进程创建/终止并记录它执行的时间量及其最终记录在 mysql db 中的频率。我面临的问题是，我正在使用**Win32_ProcessStartTrace**和**Win32_ProcessStopTrace**进行监控。一旦创建了一个进程，就会使用 Win32_Process 查询它的命令行。***对于那些快速退出的进程，进程创建和查询其命令行之间似乎存在“滞后”，***因此我无法获得命令行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:45:54.923

此代码监视新进程的启动并打印使用的命令行：

```
using System;
using System.Management;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            new Test().Run();
            Console.ReadLine();
        }
    }

    internal class Test
    {
        public void Run()
        {
            ProcessWatcher procWatcher = new ProcessWatcher();
            procWatcher.Start();
        }

        private class ProcessWatcher : ManagementEventWatcher
        {
            private const string wql = 
                   @"SELECT * FROM __InstanceCreationEvent WITHIN 1
                     WHERE TargetInstance ISA 'Win32_Process'";

            public ProcessWatcher()
            {
                this.Query.QueryLanguage = "WQL";
                this.Query.QueryString = wql;
                this.EventArrived += newProcessStarted;
            }

            private void newProcessStarted(object sender, 
                                           EventArrivedEventArgs e)
            {
                var process = e.NewEvent["TargetInstance"] 
                              as ManagementBaseObject;

                if (process != null)
                {
                    var cmdLine = process.Properties["CommandLine"].Value;
                    Console.WriteLine(cmdLine);
                }
            }
        }
    }
} 
```

# visual-studio-2012 - VS2012 中的无鼠标 TFS 签入（带注释）

> ID：11991538
> 
> 赞同：9
> 
> 时间：2012-08-16T16:20:45.233
> 
> 标签：visual-studio-2012, tfs

在 VS2010 中，执行无鼠标注释 TFS 签入所需的每个 UI 元素/命令都有一个键盘加速器。

在 VS2012 中，“评论”UI 元素似乎没有键盘加速器。`Alt+V, E, H`仍然显示“Pending Changes”窗格，并且`Alt+I`仍然执行“Check In”，但我没有看到在提交之前向变更集添加评论的无鼠标方式，因为“Comment”输入似乎已经失去了它的键盘加速器。

从编辑器开始，如何在 VS2012 中执行带注释的无鼠标 TFS 签入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:51:47.020

1.  `ctr+q`
2.  然后输入*check in*`enter`
3.  输入评论
4.  `alt+I`

那应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:50:13.447

我们实际上在 RTM 版本或 2012 中对此进行了改进。一旦你有了：

要进入待定更改页面： ctrl+0,p

要始终返回评论框：alt+1

请注意，其中 n 是数字的 alt+ 会将您的注意力带到整个团队资源管理器中页面的不同部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T10:35:58.410

我的朋友，你可以去工具 --> 选项 --> 快捷方式然后搜索签入，你会发现 fs checkin 只需分配像 Alt + z 这样的快捷方式，然后你可以通过快捷方式 1- Alt + z 2 下面的两个 enyer 来签入- Alt + 我

# grails - PagedResultList Grails 的调用构造函数

> ID：11991541
> 
> 赞同：0
> 
> 时间：2012-08-16T16:21:08.540
> 
> 标签：grails, constructor, pagedlist

我正在尝试调用 PagedResultList 的构造函数：

```
def result = new PagedResultList(list: q, totalCount:q.size()) 
```

其中 q 是我的 ArrayList 但我收到一条错误消息，提示无法解析类。我以为 PagedResultList 类在 grails 库中，为什么会出现此错误。我正在运行 grails 1.3.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:56:08.340

您需要导入 - 除了 Groovy 支持的之外，Grails 中没有额外的自动导入的包或类：

```
import grails.orm.PagedResultList 
```

由于该类具有真正的参数化构造函数，因此您的地图构造函数也不起作用；你需要这样做：

```
def result = new PagedResultList(q, q.size()) 
```

# node.js - NodeJS - MongoDB：使用开放连接

> ID：11991544
> 
> 赞同：3
> 
> 时间：2012-08-16T16:21:22.237
> 
> 标签：node.js, mongodb

最好是打开一个新连接还是重新使用？使用模块时，因为我习惯于将我的代码分成几个文件。

一个.js

```
module.exports = function (req, res) {

  new mongodb.... (err, db) { // open a connection
    b(function (err, result) {
      db.close(); // close the connection
      res.send(result);
    });
  });

}; 
```

b.js

```
// re-open a connection ? or take the connection of "a.js" ? (passing "db") 
```

> 当异步时，必须小心继续使用相同的连接（套接字）。这确保了在写入完成之前不会开始下一个操作。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:11:58.167

当您`require('somemodule')`再次要求它时，它将使用 ALREADY 加载的实例。这使您可以很容易地创建单例。

所以 - 在里面`sharedmongo.js`：

```
var mongo = require('mongodb');

// this variable will be used to hold the singleton connection
var mongoCollection = null;

var getMongoConnection = function(readyCallback) {

  if (mongoCollection) {
    readyCallback(null, mongoCollection);
    return;
  }

  // get the connection
  var server = new mongo.Server('127.0.0.1', 27017, {
    auto_reconnect: true
  });

  // get a handle on the database
  var db = new mongo.Db('squares', server);
  db.open(function(error, databaseConnection) {
    databaseConnection.createCollection('testCollection', function(error, collection) {

      if (!error) {
        mongoCollection = collection;
      }

      // now we have a connection
      if (readyCallback) readyCallback(error, mongoCollection);
    });
  });
};
module.exports = getMongoConnection; 
```

然后在里面`a.js`：

```
var getMongoConnection = require('./sharedmongo.js');
var b = require('./b.js');
module.exports = function (req, res) {
  getMongoConnection(function(error, connection){
    // you can use the Mongo connection inside of a here
    // pass control to b - you don't need to pass the mongo
    b(req, res);
  })
} 
```

在里面`b.js`：

```
var getMongoConnection = require('./sharedmongo.js');
module.exports = function (req, res) {
  getMongoConnection(function(error, connection){
    // do something else here
  })
} 
```

这个想法是当两者都`a.js`调用`b.js`时`getMongoCollection`，第一次它会连接，第二次它会返回已经连接的那个。这样可以确保您使用相同的连接（套接字）。

# oracle - PL/SQL 选择条件有一个可为空的变量

> ID：11991546
> 
> 赞同：1
> 
> 时间：2012-08-16T16:21:35.190
> 
> 标签：oracle, plsql

我想知道 select 语句中的 where 条件是否具有可为空的变量。是否必须使用 IF 条件来两次编写相同的选择语句，如下所示？有没有更好的办法？

```
FUNCTION function1(
    foo   IN  INTEGER,
  ) RETURN INTEGER
    ret      INTEGER;
  BEGIN

IF foo IS NULL THEN
  SELECT COUNT(*) INTO ret FROM t WHERE t.col IS NULL;
ELSE
  SELECT COUNT(*) INTO ret FROM t WHERE t.col = foo;
END IF;
RETURN ret;

END function1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:29:12.997

你总能做到

```
SELECT COUNT(*) 
  INTO ret 
  FROM t 
 WHERE (t.col IS NULL AND foo IS NULL)
    OR t.col = foo; 
```

这可以简化为

```
SELECT COUNT(*) 
  INTO ret 
  FROM t 
 WHERE NVL(t.col, 'Some Impossible Value') = NVL(foo, 'Some Impossible Value'); 
```

尽管您可能需要一个基于函数的索引`NVL(t.col, 'Some Impossible Value')`才能使查询高效。

# android - 查找图像的高度

> ID：11991547
> 
> 赞同：0
> 
> 时间：2012-08-16T16:21:36.400
> 
> 标签：android, image, android-mapview, drawable

我有一个带有标记的地图视图。我需要在这些标记正上方显示一个弹出窗口，但是，`MapView.LayoutParams`它只接受像素作为 x 轴偏移量。由于图像在不同屏幕上的大小不同，我想知道如何获得`Drawable`像素的高度。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:34:08.533

您的意思是您需要找到特定可绘制对象的高度和宽度吗？如果是这种情况，那么您可以使用类似这样的东西

```
 BitmapDrawable image_dimen=(BitmapDrawable) this.getResources().getDrawable(R.drawable.imageb);
       int height=image_dimen.getBitmap().getHeight();
       int width=image_dimen.getBitmap().getWidth(); 
```

# c# - 使用通用公共方法发布 2 个接口端点 - 操作引用一个消息元素...已经导出

> ID：11991551
> 
> 赞同：0
> 
> 时间：2012-08-16T16:21:51.677
> 
> 标签：c#, wcf, app-config, endpoints, wcf-endpoint

一直在尝试向我的自托管服务添加一个非安全端点，所以基本上我有一个使用会话的接口和另一个不使用会话的接口。它们都由同一个类实现。这是我的服务器配置文件的一部分：

```
<service name="PT.DataServices.WCFService.PTDataServices" behaviorConfiguration="dataServiceBehavior">
    <endpoint address="PTDataServices" binding="wsHttpBinding" contract="PT.DataServices.WCFService.IPTDataServices" bindingConfiguration="wsHttpBinding1">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>

    <endpoint address="PTDataServicesNoSessions" binding="wsHttpBinding" contract="PT.DataServices.WCFService.IPTDataServicesNoSessions" bindingConfiguration="wsHttpBinding2">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>

    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

    <host>
      <baseAddresses>
        <add baseAddress="http://*/PT6/DataServices/"/>
      </baseAddresses>
    </host>
  </service> 
```

没有会话的界面：

```
[ServiceContract(
    SessionMode = SessionMode.NotAllowed
)]
public interface IPTDataServicesNoSessions
{
    [OperationContract]
    string GetData(int value);

} 
```

与会话的接口：

```
[ServiceContract(
    SessionMode=SessionMode.Required
)]
public interface IPTDataServices
{
    [OperationContract(IsInitiating = true, IsTerminating = false)]
    DcUser InitSession(string userCode, string passwordEncrypted, string connectionString);

    [OperationContract(IsInitiating = false, IsTerminating = true)]
    int EndSession();

    [OperationContract(IsInitiating = false, IsTerminating = false)]
    string GetData(int value);
} 
```

在浏览器中输入 :http://localhost/PT6/DataServices/ 会返回：

> PT.DataServices.WCFService.IPTDataServicesNoSessions.GetData 操作引用已从 PT.DataServices.WCFService.IPTDataServices.GetData 操作导出的消息元素 [http://tempuri.org/:GetData]。

我不想根据动态使用的端点更改所有客户端以使用不同的方法名称......我如何告诉 WCF 在 2 个接口中的每个接口上使用相同的方法是可以的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:01:41.670

我自己想通了。我需要将命名空间属性添加到我的接口：

```
[ServiceContract(
    SessionMode=SessionMode.Required,
    Namespace = "PTDataServices/WithSession"
)] 
```

和

```
[ServiceContract(
    SessionMode = SessionMode.NotAllowed,
    Namespace = "PTDataServices/NoSessions"
)] 
```

这使 WCF 可以避免 WSDL 中两个接口中具有相同名称的方法的方法名称冲突。

# windows-phone-7 - Windows Phone 7 - 如何播放 MPEG 视频？

> ID：11991552
> 
> 赞同：1
> 
> 时间：2012-08-16T16:21:59.490
> 
> 标签：windows-phone-7, playback, mediaelement, mpeg

有没有办法在 Windows Phone 7 中播放或转换 .mpg 视频？它在 MediaElement 中不起作用。我想播放这个视频： [http](http://sohowww.nascom.nasa.gov/data/LATEST/current_eit_171.mpg) ://sohowww.nascom.nasa.gov/data/LATEST/current_eit_171.mpg 。如果没有，您能否推荐任何在 IIS 服务器上执行此服务器端的方法？

# java - JUnitCore：它是否命中断点

> ID：11991553
> 
> 赞同：0
> 
> 时间：2012-08-16T16:22:09.083
> 
> 标签：java, junit

我目前正在学习如何使用 JUnitCore 对我的应用程序运行一些测试，我认为我一切正常，因为它似乎可以毫无问题地通过调试器，但我还没有让我的测试将任何内容打印到控制台`System.out.println(...)`

```
Result results= JUnitCore.runClasses(test.class);
System.out.println(results.getRunCount()); 
```

当我在第一行添加一个断点时它会命中它，但是我里面有另一个断点`test.class`，当我移动到下一个断点时它永远不会命中，它也不会让我进入`JUnitCore.runClasses(test.class);`调用......但它确实返回 1`results.getRunCount()`

有谁知道这是否对我有用，并且您无法以这种方式在测试中打断点，或者是否有问题`JUnitCore.runClasses(test.class)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:28:48.330

我 JUnitCore.runClasses 不应该打印出任何消息，它只会运行测试。

您将需要添加可以处理任何故障并因此产生一些打印输出的代码。

# javascript - Box-sizing：border-box 在滚动的 JS 固定位置侧边栏上导致错误

> ID：11991556
> 
> 赞同：0
> 
> 时间：2012-08-16T16:22:18.960
> 
> 标签：javascript, jquery, css

我有一些 javascript 将一个固定的类应用到我的侧边栏，所以当你滚动时，菜单会留在你身边。Stackoverflow 有类似的问题侧边栏。

```
 $(function() {      
    var top = $('.side-menu').offset().top - parseFloat($('.side-menu').css('margin-top').replace(/auto/, 0));
    $(window).scroll(function (event) {
      // what the y position of the scroll is
      var y = $(this).scrollTop();

      // whether that's below the form

      if (y >= top) {

        // if so, ad the fixed class
        $('.side-menu').addClass('fixed');
        $('body').addClass('fixed-sidebar');

      } else {
        // otherwise remove it
        $('.side-menu').removeClass('fixed');
        $('body').removeClass('fixed-sidebar');
      }
    });
}); 
```

在我的 CSS 中，我有`* { box-sizing: border-box; }`这导致 else 触发并且页面跳转。当我删除 box-sizing 时，固定菜单会按需要工作。

**我的问题是**

*   还有另一种方法可以实现我想要做的事情吗？
*   有没有办法取消设置`box-sizing`属性？

**编辑**

使用此链接进行演示：在不同高度调整浏览器窗口的大小，您会看到问题。[http://dev.danielcgold.com/fixed-menu.html](http://dev.danielcgold.com/fixed-menu.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:25:42.380

当然，您总是可以这样做`(selector) { box-sizing: content-box }`。（这将“取消”你的`box-sizing`......）

# android - 如何将属性从 BroadcastReceiver1 发送到 BroadcastReceiver2？

> ID：11991558
> 
> 赞同：0
> 
> 时间：2012-08-16T16:22:49.197
> 
> 标签：android, broadcastreceiver, broadcast

我有一项服务和两项`BroadcastReceiver`。我打电话给第一个接收者，例如：

```
private static final String CALLACTION = "android.intent.action.PHONE_STATE";

final IntentFilter theCallFilter = new IntentFilter();
theCallFilter.addAction(CALLACTION);

yourCallReceiver = new CallReceiver();        
registerReceiver(yourCallReceiver, theCallFilter); 
```

第二个类似于第一个。

现在我需要将数据从一个接收器设置到另一个接收器。我想设置`Boolean`属性，它将检查第一个代码`BroadcastReceiver`是否已完成，如果是，则可以执行第二个代码。如何将此属性从“BroadcastReceiver1”发送到“BroadcastReceiver2”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:26:06.650

如果您只是使用 BroadcastRecevier，则无法确定系统将按什么顺序解析它们。这里的答案是使用有序广播。然后，您可以设置结果并在下一个接收器中检查该结果。这是来自 Google 博客[http://android-developers.blogspot.com/2011/01/processing-ordered-broadcasts.html的精彩帖子](http://android-developers.blogspot.com/2011/01/processing-ordered-broadcasts.html)

# wpf - 将 DataGrid 绑定到集合

> ID：11991559
> 
> 赞同：1
> 
> 时间：2012-08-16T16:22:53.860
> 
> 标签：wpf, data-binding, wpfdatagrid, infragistics

a`DataGrid`可以绑定到`Collection<List>`类型吗？

`DataGrid`关于将 a 绑定到 a有几个问题`Collection<Collection>`，它也对我有用。但是，我正在专门寻找`DataGrid`<-- Binding --> `Collection<List>`。

* * *

当我尝试时，`List`它只是显示为`DataGrid`类似的对象：

> **名称**
> - System.Collections.Generic.List'1[System.Int32]
> **值**
> Bob
> 23
> 43000
> + System.Collections.Generic.List'1[System.Int32]

## 在这种情况下a 与 a`List`有何不同？`Collection`

A`List`没有条目标识符，因此 List 中的条目不能自动分组到 a 中的列中`DataGrid`。

### 例子：

在`Collection<List>`：
entry1 包含`List`：“Bob”, 23, 43000，
entry2 包含`List`：“Alice”, 42, 71000。

我可以使用 a`DataTemplate`来`List`获得以下显示吗？
**姓名 | 年龄 | 工资**
鲍勃 ​​| 23 | 43000
爱丽丝 | 42 | 71000

请注意，字符串 Name、Age 和 Salary 不是`Lists`.

* * *

## 我的计划

1.  **将标题**行绑定到 a`List<String>`以获取`DataGrid's`标题中的列名。
2.  **将剩余**的行绑定到`Collection<List>`以获取填充到`DataGrid`.

具体来说，我想知道是否可以将这 3 个字符串（姓名、年龄、薪水）放入 a 中`List<String>`并仅将标题行绑定到它。其余行`DataGrid`可以绑定到 Collection。

**这甚至可能吗？**

* * *

理想情况下，我想使用*Infragistics'* `XamDataGrid`，但任何解决方案`DataGrid`都是一个很好的起点。

* * *

# 编辑

为什么我不用`Collection<Employee>`？我想只**显示**.`DataGrid`

我有大约 5 个屏幕，显示来自 2 种类型的列`Employee`和`EmployeeDetails`. 这两种类型都有大约 100 个不同的属性，我只对在每个屏幕上将大约 20 个属性显示为列感兴趣。因此，我`List`为每个仅包含这 20 个属性的`Employee`/对象创建了一个。`EmployeeDetails`

该子集是在运行时通过读取一些配置文件来定义的。因此，我无法静态定义我需要展示的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:48:10.067

You *could* use a binding converter to extract a member of your list:

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (value is List<string> && parameter is int)
    {
        return ((List<string>)value)[(int)parameter];
    }

    return null;
} 
```

... but honestly I don't understand what you're trying to achieve. Your list of strings represents the properties of an object, why don't just use a `Collection<Employee>` where `Employee` is

```
public class Employee : INotifyPropertyChanged
{
    public string Bob
    {
        ...
    }

    public int Age
    {
        ...
    }

    public double Salary
    {
        ...
    }
} 
```

Strongly typed, much more readable, much more maintainable.

* * *

EDIT:

After reading your edit: definitely don't use a `List<string>`. Simply do not ask your XamDataGrid to automatically generate a column for each field. You've also [some examples](http://www.infragistics.com/community/blogs/alex_fidanov/archive/2009/07/11/xamdatagrid-columnchooser-implementation.aspx) about how to hide columns.

* * *

EDIT:

It's **way much more MVVM friendly** to expose a `Collection<Employee>` property + write some code behind, than to expose `Collection<List<string>>`.

Remember the limitations of the XamDataGrid control are **purely** related to the view part of the MVVM pattern. **Don't change the ViewModel logic because of that**.

Also here's a related question that could help: [XamDataGrid column visibilty is not working using MVVM](https://stackoverflow.com/questions/11105461/xamdatagrid-column-visibilty-is-not-working-using-mvvm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:35:46.007

这听起来不对。您在集合中显示的项目只是具有属性的对象。为什么不只是拥有具有这些属性的对象集合呢？

为了迭代第二个列表，您需要绑定到该列表的绑定行内的另一个 ItemsControl 作为其数据源。否则，您将始终只收到 System.Collections.Generic.List'1[System.Int32] 绑定值，因为这是正在迭代的内容的当前级别。

如果你想让它保持通用，你甚至可以绑定到一个集合，允许对象定义它的属性，并且在 Datagrid 中，只绑定到它认为应该可见的属性（无论对象是否支持）。

# c# - 如何使用 C# 在 excel 中提供自定义角度标签

> ID：11991566
> 
> 赞同：3
> 
> 时间：2012-08-16T16:23:27.743
> 
> 标签：c#, excel

我想在 x 轴上为我的标签提供客户角度，例如 -35 度。即我想在Excel中格式化==>格式轴==>对齐==>自定义角度

```
newWorksheet.Select(Type.Missing);
            Excel.Range chartRange;
            object misValue = System.Reflection.Missing.Value;
            Excel.ChartObjects xlCharts = (Excel.ChartObjects)newWorksheet.ChartObjects(Type.Missing);
            Excel.ChartObject myChart = (Excel.ChartObject)xlCharts.Add(10, 80, 300, 250);
            Excel.Chart chartPage = myChart.Chart;
            chartRange = newWorksheet.get_Range(cell1, cell2);
            chartPage.SetSourceData(chartRange, Excel.XlRowCol.xlColumns);
            chartPage.ChartType = Excel.XlChartType.xlColumnClustered;

            var labels = new List<string>();
            string date = string.Empty;
            foreach (KeyValuePair<string, List<TestDetails>> kvp in writetocsv)
            {
                date = kvp.Key.Substring(0, (kvp.Key.Length - kvp.Key.IndexOf('_')) + 1);
                labels.Add(date);
            }
            var series = (Excel.Series)chartPage.SeriesCollection(1);
            series.XValues = labels.ToArray();
            //series.HasDataLabels = true;
            Excel.Axis valueAxis = (Excel.Axis)chartPage.Axes(Excel.XlAxisType.xlValue, Microsoft.Office.Interop.Excel.XlAxisGroup.xlPrimary);

            chartPage.Location(Microsoft.Office.Interop.Excel.XlChartLocation.xlLocationAsNewSheet, "Chart_" + sheetName); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:00:34.413

**代码**

```
Excel.Range chartRange;

Excel.ChartObjects xlCharts = (Excel.ChartObjects)xlWorkSheet.ChartObjects(Type.Missing);
Excel.ChartObject myChart = (Excel.ChartObject)xlCharts.Add(10, 80, 300, 250);
Excel.Chart chartPage = myChart.Chart;
chartRange = xlWorkSheet.get_Range("A1", "d5");
chartPage.SetSourceData(chartRange, misValue);
chartPage.ChartType = Excel.XlChartType.xlColumnClustered;

//~~> From here this is the part which you want
chartPage.ApplyLayout(6, Type.Missing);
chartPage.Axes(Excel.XlAxisType.xlValue).AxisTitle.Select();
chartPage.Axes(Excel.XlAxisType.xlValue).AxisTitle.Orientation = Excel.XlOrientation.xlHorizontal;

//~~> 35 Deg angle
for (int i = 1; i <= 35; i++)
{
    chartPage.Axes(Excel.XlAxisType.xlValue).AxisTitle.Orientation = -i;
} 
```

**快照**

![在此处输入图像描述](../Images/88de7a07f053b4e0ea29ccb495ad20ab.png)

**跟进**

> 嗨 Siddharth，Actullay 我想为“Term1”、“Term2”提供角度 – User123 10 分钟前

试试这个 X 轴刻度标签

```
Excel.ChartObjects xlCharts = (Excel.ChartObjects)xlWorkSheet.ChartObjects(Type.Missing);
Excel.ChartObject myChart = (Excel.ChartObject)xlCharts.Add(10, 80, 300, 250);
Excel.Chart chartPage = myChart.Chart;
chartRange = xlWorkSheet.get_Range("A1", "d5");
chartPage.SetSourceData(chartRange, misValue);
chartPage.ChartType = Excel.XlChartType.xlColumnClustered;
chartPage.ApplyLayout(6, Type.Missing);

chartPage.Axes(Excel.XlAxisType.xlCategory).Select();
chartPage.Axes(Excel.XlAxisType.xlCategory).TickLabels.Orientation = 35; 
```

**快照**

![在此处输入图像描述](../Images/e8956b63ff0eb886fba815d53c629f76.png)

# python - 从网络爬网输出中解析出特定文本

> ID：11991571
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:23:41.500
> 
> 标签：python, html, web-scraping, beautifulsoup

我需要解析出 HTML 页面的这一部分并输出到 CSV 文件，然后让它等待下一个输出。当谈到正则表达式时，我不知所措。

```
<h1>Member Information</h1>

<h2>Company Name</h2>
<p>Address<br />
More Address<br />
City<br />
State<br />
Postal code<br />
</p>
<p><strong>Contact:</strong> Firstname Lastname, PH.D., P.ENG. - <a href="mailto:email@email.com">email@email.com</a><br /></p>
<a href="http://www.domain.com">www.domain.com</a><br />
<p><strong>Phone:</strong> (555)555-5555<br /></p>

</div><!-- end #content --> 
```

我可以不用地址信息，但公司名称、ID *（来自 url）*、名字/姓氏*（如果可能，还有头衔）*、电子邮件、URL 和电话号码将非常有价值。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:25:36.540

永远不要使用正则表达式来解析 HTML（或 XML、Json、CSV...）。

请改用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，这是一个已经为此类任务编写的优秀库。

例子：

```
from bs4 import BeautifulSoup as BS
soup = BS(htmltext)
soup.h2.text
>>> 'Company Name' 
```

# android - Android 在应用卸载时删除小部件

> ID：11991572
> 
> 赞同：1
> 
> 时间：2012-08-16T16:23:45.217
> 
> 标签：android, widget, uninstallation

我的应用程序小部件有问题。
如果我将小部件放在我的主屏幕上，那么我会卸载我的小部件来自的应用程序，但小部件不会在主屏幕上删除。代替小部件的文字是：“正在加载”。

是否需要编写某种代码，以便在我在手机上卸载应用程序时将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:27:29.893

我很确定用户必须从主屏幕手动删除小部件。这是一个[参考](https://groups.google.com/forum/#!topic/android-developers/5kqWygpdk4g%5B1-25%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:42:28.303

您应该将小部件和应用程序打包在**同一个 APK**中。然后，当您卸载该应用程序时，该小部件将自动被删除。

**编辑不幸的是，我应该在发布之前对此进行测试。这不起作用。卸载应用程序时，您无法以编程方式删除小部件。看到[这个](https://stackoverflow.com/questions/4532121/removing-appwidgets-programmatically)和[这个](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Ooxc3jYd2FM%5B1-25%5D)。1000 为我的错误建议道歉 :-(**

# json - 使用 JSON 和 C# 反序列化对象时缺少 guid

> ID：11991577
> 
> 赞同：4
> 
> 时间：2012-08-16T16:24:14.933
> 
> 标签：json, serialization, json.net, missing-data

我正在使用 newtonsoft 的库来反序列化一个稍微复杂的对象，并遇到了一个障碍，即 MetaData 对象中的 Id 没有被填充，其他所有值似乎都很好。所有主要对象都派生自模型类，该模型类具有 Id 等核心属性。有人对这里出了什么问题有任何建议吗？

这是我用来测试的 JSON，顶层对象是一个页面：

```
{
  "CreatedOn": "2012-07-30T13:42:45+01:00",
  "CreatedBy": "33576D49-B799-4326-812C-D6A3C47B7035",
  "Name": "Icecream",
  "Metadata": [
    {
      "CreatedOn": "2012-07-30T14:06:31+01:00",
      "ModifiedOn": "2012-07-30T14:06:31+01:00",
      "ModifiedBy": "53D947AC-0D7B-42C4-929E-DAFC25932784",
      "Name": "Colour",
      "Value": "Blue",
      "NodeReference": "834a2734-e807-4eb7-a242-c26d785681f3",
      "Scope": "Draft",
      "Id": "032488bd-158c-4064-93ec-44bd11c4e642",
      "CreatedBy": "53D947AC-0D7B-42C4-929E-DAFC25932784"
    },
    {
      "CreatedOn": "2012-07-30T13:48:49+01:00",
      "ModifiedOn": "2012-07-30T14:23:20+01:00",
      "ModifiedBy": "10E0821E-1982-4C24-B9E1-35FAF9A547BB",
      "Name": "Topping",
      "Value": "Chocolate sprinkles",
      "NodeReference": "834a2734-e807-4eb7-a242-c26d785681f3",
      "Scope": "Live",
      "Id": "241afb40-0d83-4599-a05e-aec1a6cdef41",
      "CreatedBy": "CE1F79DE-9ECF-456F-8C17-D9B7E4B6FCA7"
    }
  ],
  "WikiResources": [    
  ],
  "FileResources": [    
  ],
  "Links": [    
  ],
  "Id": "834a2734-e807-4eb7-a242-c26d785681f3"
} 
```

这是我的代码的（简化）版本：

```
public abstract class Model {

    protected Guid? _id;
    public Guid? Id {
        get {  return _id;}
        set { _id = value; IsDirty = true; }
    }

    private string _name; //e.g page Heading
    public string Name {
        get { return _name; }
        set { _name = value; IsDirty = true; }
    }

    private DateTime _createdOn;
    public DateTime CreatedOn {
        get { return _createdOn; }
        set { _createdOn = value; IsDirty = true; }
    }

    private string _createdBy;
    public string CreatedBy {
        get { return _createdBy; }
        set { _createdBy = value; IsDirty = true; }
    }

    [JsonIgnore]
    public bool IsDirty {
        get;
        set;
    }

    [JsonIgnore]
    public bool IsNew {
        get;
        set;
    }

    private List<MetaDatum> _metadata;
    public List<MetaDatum> MetaData {
        get {
            return _metadata;
        }
        set {
            _metadata = value;
        }
    }
}

public class MetaDatum : Model, IModel {

    //other properties and methods omitted

    #region construction

        public MetaDatum() {
            IsNew = false;
            webservice = WebserviceManager.GetWebservice();

        }

        //quick factory method for creating a name value pair
        public static MetaDatum Create(string name, string value, ScopeType scope) {
            MetaDatum md = new MetaDatum();
            md.Name = name;         
            md.CreatedOn = DateTime.Now;
            md.Scope = scope;
            md.Value = value.ToString();
            md.IsNew = true;
            md.IsDirty = true;
            return md;
        }

        #endregion

}

public class Page : Model, IModel {

    //other properties and methods omitted

    public static Page Deserialize(string text) {

            if (text == "" || text == null)
                return null;

            dynamic serializedObj = JsonConvert.DeserializeObject(text);
            Page convertedObject = JsonConvert.DeserializeObject<Page>(text);

            return convertedObject;
        }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:40:30.420

我有一个解决方法，可以在反序列化后手动获取 Id，方法是将其设置为动态对象并钻入其中。但也许有更好的方法可以一次性做到这一点？

```
int i = 0;           
dynamic serializedObj = JsonConvert.DeserializeObject(text);
foreach (dynamic item in serializedObj.Metadata) {
    convertedObject.MetaData[i++].Id = Guid.Parse(item.Id.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T17:13:09.780

验证您在标头中发送的数据类型我的意思是`MediaTypeWithQualityHeaderValue`（“ `text / plain`”）<-因为它可以是应用程序/Json或文本/json，所以可以更改这种类型可以进行序列化

# c# - 通用可序列化 WebAPI MVC4

> ID：11991579
> 
> 赞同：1
> 
> 时间：2012-08-16T16:24:18.740
> 
> 标签：c#, serialization, asp.net-web-api

所以我正在尝试对我们的 MVC4 框架项目的所有 WebAPI 调用进行一般返回。

我遇到的问题是类型`object`不能轻易序列化。

所以我们的返回结构是这样的......，

```
[DataContract]
class UiOutput {
    [DataMember("success")]
    public bool Success {get;set;};
    [DataMember("success")]
    public object Data {get;set;};
} 
```

这样每次调用都会返回成功与否以及数据。数据可以是模型数组或其他任何东西。显然，这是一项简单的任务`php`，但我们不在那里 :)

`Error Three`所以我从网站[http://www.johnsoer.com/blog/?tag=the-type-was-not-expected-use-the-xmlinclude-or-soapinclude-attribute](http://www.johnsoer.com/blog/?tag=the-type-was-not-expected-use-the-xmlinclude-or-soapinclude-attribute-to-specify-types-that-are-not-known-statically)读到我遇到的问题[- 静态指定未知类型](http://www.johnsoer.com/blog/?tag=the-type-was-not-expected-use-the-xmlinclude-or-soapinclude-attribute-to-specify-types-that-are-not-known-statically)。

所以我想创建一个通用的超类来解决这个问题，除了它如何处理 ViewModels 数组？

```
[XmlInclude(typeof(MyAwesomeViewModel))]
class SuperType { } 
```

## 例子：

```
[DataContract]
class UiOutput {
    [DataMember("success")]
    public bool Success {get;set;};
    [DataMember("success")]
    public SuperType Data {get;set;};
} 
```

这将有助于返回说

```
[DataContract]
class MyAwesomeViewModel {
    [DataMember("awesome")]
    public bool Awesome {get;set;};
    [DataMember("viewModel")]
    public string ViewModel {get;set;};
} 
```

但是如果我有一个想要返回`array`MyAwesomeViewModel 的控制器，那么我不知道该怎么做！

我的意思是如果有一个控制器像

```
class MyAwesomeController : ApiController {
    public UiOutput ByYear(int year) {
        MyAwesomeViewModel[] models = Rep.GetByYear(year);
        UiOutput output = new UiOutput();
        output.success = true;
        output.data = //Todo:  Is there a way to overcome?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:22:16.487

如果你想要一个通用的返回值，那么使用 HttpResponseMessage 并创建一个从 HTTPContent 派生的有效负载对象。

```
class MyAwesomeController : ApiController {
    public HttpResponseMessage ByYear(int year) {
        MyAwesomeViewModel[] models = Rep.GetByYear(year);
        return new HttpResponseMessage(statusGoesHere) { Content = GetUIContent(models) };
    }
}

class UIContent : HttpContent {
   ...
} 
```

# php - 将字符串转换为整数？

> ID：11991582
> 
> 赞同：1
> 
> 时间：2012-08-16T16:24:28.067
> 
> 标签：php, variables, integer

我正在从 XML 文件中提取结果，其中一个值（实际的数字 ID）被读取为字符串。该值被修剪并且没有空格。我通过检查 is_numeric 观察到这一点：

```
 if (!is_numeric($id))
        {
            echo "<p>$id is NOT numeric";
        } else {
            echo "<p>$id is numeric";
        } 
```

变量 643394 的响应是：

```
643394 is NOT numeric 
```

PHP 有一个将整数转换为字符串的函数（strtoint），但我没有找到另一个函数（inttostr）。

是否可以将字符串“1234”转换为整数 1234？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T16:26:22.987

将您的字符串显式转换为整数

```
$id = (int) $id; 
```

参考： http: [//php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:27:38.320

字符串到整数的转换可以使用 intval($id) 或强制使用 (int)$id 的整数类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:40:23.933

这将帮助您：

```
$id = $id + 0; 
```

# android - 谷歌地图中的错误？

> ID：11991583
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:24:40.190
> 
> 标签：android, google-maps

我正在按照[本教程](https://developers.google.com/maps/documentation/android/hello-mapview)创建一些不同的东西，本教程展示了覆盖如何与插入其中的预定义项目一起工作，但是如果我想动态地向其中添加项目怎么办？那么我必须从一个空的覆盖开始：

代替 ：

```
MapView mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);
List<Overlay> mapOverlays = mapView.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
ItemOverlay itemizedoverlay = new ItemOverlay(drawable, this);

GeoPoint point = new GeoPoint(19240000,-99120000);
OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
itemizedoverlay.addOverlay(overlayitem);

mapOverlays.add(itemizedoverlay); 
```

就像教程中预期的那样工作，我需要把这个：

```
MapView mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);
List<Overlay> mapOverlays = mapView.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
ItemOverlay itemizedoverlay = new ItemOverlay(drawable, this);
mapOverlays.add(itemizedoverlay); 
```

它用一个项目省略了覆盖的初始化。

这种方法会导致地图卡住，点击几下后，我的应用由于 null 异常而被踢出。

1.这是预期的行为吗？这对我来说似乎是一个错误......

2.为了达到预期的行为，我该怎么做？（我可以从一个空的覆盖开始并动态添加项目）

至于我想要实现的，不是用和项目启动覆盖而是动态使用addOverlay，这样我可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:24:29.700

据我了解，在`ItemOverlay`你的意思下`ItemizedOverlay`。如果是这样，你就在正确的轨道上。`ItemizedOverlay`是地图项的容器，因此每次添加/删除项时，`ItemizedOverlay`都需要将最后一个焦点项设置为`-1`并调用`populate()`方法来通知地图视图内容更改。

请记住，您需要`ItemizedOverlay`在 UI 线程上下文中更改内容；）

这里还有一个未记录的技巧。即使没有项目，您也需要将最后一个焦点索引设置为`-1`并执行（因此您需要在初始化阶段执行此操作）`populate()`

所以你的代码应该是这样的：

```
MapView mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);
List<Overlay> mapOverlays = mapView.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
ItemOverlay itemizedoverlay = new ItemOverlay(drawable, this);
mapOverlays.add(itemizedoverlay);

setLastFocusedIndex(-1); //reset initial position
populate(); //notify about our content

//now try to add new item
GeoPoint point = new GeoPoint(19240000,-99120000);
OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
itemizedoverlay.addOverlay(overlayitem);
setLastFocusedIndex(-1); //reset initial position
populate(); //notify about our content 
```

# php - php MVC 概念，rails

> ID：11991584
> 
> 赞同：0
> 
> 时间：2012-08-16T16:24:43.247
> 
> 标签：php, ruby-on-rails, model-view-controller

在继续我的项目之前，我想澄清一些事情，以防止错误的代码实践。我以前在 ruby​​ on rail 开发过，我想知道它是否可以像在 PHP 中一样，因为我开始学习但我不想使用 Zend、Yii 等框架

对我来说，模型是将数据插入数据库的地方。

控制器是查找所有参数并使用模型中的函数将数据处理到数据库中的地方。此外，它还可以在程序返回成功或失败时进行路由或重定向。

视图是获取在控制器中初始化的即时变量并使用它以正确格式呈现数据的地方。

所以，这是我在 PHP 中的问题。我想在 php 中创建 CRUD。我浏览了许多文章或帖子（在 stackoverflow 和其他中），但我对有些人说不同类型的事情感到困惑。

在我看来，模型是只与数据插入/查询数据库有关的地方。所以，我的创建、显示、更新、删除的每个查询，我都会放入我的模型中。这是我的模型中 create_user 函数的示例。

```
function create_user($firstName, $lastName,$username, $password){
    $query = "INSERT INTO `users` (`user_id`, `first_name`, `last_name`, `email`, `username`, `password`, `created_at`, `handphone_no`, `street_address`, `city`, `state`, `country`, `postal`, `birthday`, `company_id`)
            VALUES (NULL, ?, ?, NULL, ?, ?, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2)";

    if($stmt = $this->conn->prepare($query)) {
        $stmt->bind_param('ssss', $firstName, $lastName,$username, $password);
        $stmt->execute();
    }

} 
```

所以，我的**第一个**问题：在我的模型中，我是否假设一个对象并传递给控制器​​？或者只返回 true 或 false 以指示该过程的成功或失败。

在我的用户控制器中，

```
class Users_controller {

private $user;

function __construct(){
    $this->user = New User();
}

function create($firstName, $lastName,$username, $password){
    $this->user->create_user($firstName, $lastName,$username, $password);
}
} 
```

我的**第二**个问题：对于我的 CRUD，在 rails 中，它会找到对象的 id 并显示/编辑它或创建/销毁一个新模型。所以，我的控制器必须返回一个对象让我在视图中呈现数据？以及我想如何将我的表单连接到控制器。从我的表单将参数传递给控制器​​。

所以，现在我只考虑到目前为止，任何指导和清晰的例子让我了解更多，因为我是 php 新手。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:50:42.383

我不确定你为什么不想使用 PHP 框架，因为 RoR 也是一个框架。

我以前开发过自己的 PHP 框架，并且可以根据经验告诉您，除非您对应用程序有一些非常具体的要求，否则这通常是一个坏主意。

我建议你试试 Yii，它允许的编码非常自由。

无论如何，回答你的问题：

首先，我将创建一个通用模型类来执行 CRUD 的工作，而不必为每个类重新创建。因此，例如，您定义可用的属性（或直接从数据库获取）并具有通用的“保存”功能，该功能将根据主键值的存在进行插入或更新。

然后当你保存时，你应该在成功时返回 true，在无效数据/验证时返回 false，如果 SQL 请求失败则抛出异常。

将数据从表单传递到控制器是通过 POST 完成的，并且值被注入到对象中。从那里您可以检查对象是否存在于数据库中。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:34:23.670

好的，希望这个答案不会*太长*，但是我们开始......

首先，RoR 实际上是一个框架，所以在 PHP 中最接近的就是框架。但是，您不会在 PHP 中找到 rails 克隆（或任何接近的东西）。此外，几乎所有的 PHP 框架都声称实现了 MVC，但几乎没有一个实现。他们中的大多数都提出了某种修改和简化的 MVC 版本，带有猖獗的[SOLID](http://blog.ircmaxell.com/2012/05/dont-be-stupid-grasp-solid-slides.html)违规和各种其他问题。在这个答案中，我将 MVC 的这些变体简称为**“FMVC”**。尽管如此，由于持久模型的必要性，在 PHP 中正确的 MVC 在技术上是不可能的。（注意：你*可以*在 PHP 中做到这一点，但这并不容易，而且可能是一些丑陋/“hacky”的代码）。

如果你想学习的话，我的建议是：如果你有一个项目，请选择一个通常对你有吸引力的框架，然后去做。从里到外学习它，深入研究源代码，审查你的一些代码，并确保（大部分）忽略该特定框架的所有反对者。我说“主要是”是因为如果你真的想学习 MVC 或 OOP-PHP，最好的方法是查看现有的实现并真正***理解***代码的好、坏和丑陋的部分。这将为您提供 SOLID 原则以及 SOLID 违规方面的坚实（请原谅双关语）知识基础。

如果您正在寻找编写自己的 MVC 框架或学习一般的 MVC，首先需要了解以下几点：

1.  在 OP 中，您似乎误解了模型到底是什么；在 MVC 模式中，“M”（模型）是一个**层**。如果您想要对模型进行冗长但极其准确的描述，请参阅[tereško 的这篇文章](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc/5864000#5864000)，因为它是目前关于 SO 的最佳答案。简而言之，模型层由许多部分组成，即数据映射器、域对象和“服务”。[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)类似于 FMVC 中的“模型”类——它们包含数据库查询。[领域对象](http://c2.com/cgi/wiki?DomainObject)基本上只是域数据的容器。“服务”是与模型层交互的点：您调用服务来做某事，它在模型层内完成工作。通常，您不会在服务之外直接调用数据映射器（或域对象）。

2.  CRUD 不是一个东西，它是一个概念 - 包含在类中的方法列表（创建、读取、更新、删除）。数据映射器通常包含 CRUD 方法（通过扩展，服务也是如此，尽管有时更抽象一些）

3.  重申一下（因为它**非常**重要），几乎没有 PHP 框架实现正确的 MVC，因此向他们寻求学习 MVC 的指导是一个坏主意。您可以通过这种方式学习 FMVC，但正确的 MVC 距离他们实现的内容还有很长的路要走。

4.  如果您不*完全*了解 OOP 和 SOLID 原理，那么在 MVC 中编码将是一场噩梦。如果你想学习 MVC，你应该做的第一件事是回到并重新学习或刷新 OOP 的基础知识

现在针对您的具体问题：

1.  这个问题真的没有意义。对模型层的调用是通过服务进行的，服务通常将域对象传递给相关的数据映射器进行处理。数据映射器将域对象（包含所有结果数据）返回给从模型层外部调用的服务。

2.  这个问题也没有任何意义——阅读[我之前链接的帖子](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc/5864000#5864000)应该可以消除一些困惑。

**tl;博士 - 阅读[这篇文章](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc/5864000#5864000)。**

# javascript - 淘汰赛；绑定值未更新或 ko.computed() 未更新

> ID：11991588
> 
> 赞同：0
> 
> 时间：2012-08-16T16:24:57.960
> 
> 标签：javascript, knockout.js

我有以下对象。

```
var q = {
    availableModels: ko.observableArray();
    selectedModel: ko.observable();
    displayModel: function(item) { return item.text; }
    image: ko.computed(function() {
      return q.selectedModel().image;
    });
} 
```

它绑定到以下元素。

```
<select data-bind="options: availableModels, value: selectedModel, optionsText: displayModel, optionsCaption: 'Choose a Model'"></select> 
```

和一个图像。

```
<img data-bind="attr: { src: image }"> 
```

我将一些对象推送到 availableModels 中。

```
q.availableModels.push({ index: 0, text: 'castis0', image: 'castis0.jpg'});
q.availableModels.push({ index: 1, text: 'castis1', image: 'castis1.jpg'}); 
```

然后我设置 selectedModel

```
q.selectedModel({ index: 1, text: 'castis2', image: 'castis2.jpg' }); 
```

html 元素确实包含我已推送到 availableModels 中的对象，但当前选定的元素不会通过设置 selectedModel 来更改。

如果我这样应用更改，它确实有效。

```
q.selectedModel = ko.computed(function() {
    for(var i = 0; i < q.availableModels().length; i++) {
        var data = q.availableModels()[i];
        if (data.index == 1) {
            return data;
        }
    }
}) 
```

但是图像的 src 没有改变。

我不知道我需要改变什么，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:32:37.580

这里发生的是您没有处理对同一对象的引用。这是一个示例：

```
var a = { name: "Bob" };
var b = { name: "Bob" };
var c = b;

alert(a === b); //false
alert(b === c); //true 
```

因此，在您的情况下，您需要将 selectedModel 设置为等于数组中的实际对象，例如：

```
q.selectedModel(q.availableModels()[1]); 
```

定义视图模型的方式也存在一些问题。如果将其定义为对象文字，则需要在每个属性之间放置一个逗号。此外，计算出的 observable 会尝试立即评估自己，并且在关闭之前它无法访问该对象字面量的属性。

这是一个更新的示例，有一些更改：http: [//jsfiddle.net/rniemeyer/sq263/](http://jsfiddle.net/rniemeyer/sq263/)

# java - Java 默认使用什么散列函数，我们可以覆盖默认行为吗？

> ID：11991589
> 
> 赞同：9
> 
> 时间：2012-08-16T16:24:57.997
> 
> 标签：java, hash

我正在浏览[Cormen 等人的算法介绍](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-7-hashing-hash-functions/)视频，它讨论了几个散列函数。我想知道Java默认使用什么散列函数？对于用作键的不同类型的对象，散列函数实际上是否不同？Collections 框架中是否有一个 API 可以让我们编写自己的哈希算法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T16:28:57.333

Each object in java has a `public int hashCode()` method that returns a hash. Each object is free to implement it in its own way by overriding that method. If the method is not overriden, the [default `Object#hashCode` method](https://stackoverflow.com/questions/2237720/what-is-an-objects-hashcode) is used.

You can have look at the source code of various objects to see how it is implemented in the JDK. This is [String's hashCode](http://www.docjar.com/html/api/java/lang/String.java.html) for example (line 1494).

Some collections can add an additional layer of hashing on top of the objects' hashCode methods. For example, HashMap does that to improve performance when an object's hashCode is not well distributed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:30:40.353

You can always override it in any of your classes... Like

```
 @override
 public int hashCode()
 { 
 //new implementation 
 } 
```

[http://mindprod.com/jgloss/hashcode.html](http://mindprod.com/jgloss/hashcode.html)

The default hashCode() method uses the 32-bit internal JVM (Java Virtual Machine) address of the Object as its hashCode.

However, if the Object is moved in memory during garbage collection, the hashCode stays constant. This default hashCode is not very useful, since to look up an Object in a HashMap, you need the exact same key Object by which the key/value pair was originally filed.

Normally, when you go to look up, you don’t have the original key Object itself, just some data for a key. So, unless your key is a String, nearly always you will need to implement a hashCode and equals method on your key class.

Object.hashCode() is a native method.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:28:35.330

It depends on the kind of object that you use. For any object that you implement in your own classes, you can always override the default [hashCode()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29) method.

Note, you should always obey the contract between `hashCode()` and `equals()` as mentioned in the hashCode() javadoc:

> If two objects are equal according to the equals(Object) method, then calling the hashCode method on each of the two objects must produce the same integer result.

For more information read [this entry](https://stackoverflow.com/a/27609/303598).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:30:50.453

Every type in Java has `hashCode()` method defined, as it's in the `Object`. `hashCode()` returns a `int`. And in `HashMap` implementation, it hashes the result again and take only the lower bits to make it in the range of 0 to `size`-1\. Note in Sun JDK, size is always 2^x, x being some integer.

Java library is open source and you probably have a copy on your dev machine.

In Sun JDK 6, the second hash I mentioned above is

```
/**
 * Applies a supplemental hash function to a given hashCode, which
 * defends against poor quality hash functions.  This is critical
 * because HashMap uses power-of-two length hash tables, that
 * otherwise encounter collisions for hashCodes that do not differ
 * in lower bits. Note: Null keys always map to hash 0, thus index 0.
 */
static int hash(int h) {
    // This function ensures that hashCodes that differ only by
    // constant multiples at each bit position have a bounded
    // number of collisions (approximately 8 at default load factor).
    h ^= (h >>> 20) ^ (h >>> 12);
    return h ^ (h >>> 7) ^ (h >>> 4);
} 
```

You can find the first hash by looking at the `hashCode()` function on the class you are interested in.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T16:33:10.547

Java 中的所有类都继承自`java.lang.Object`，并且通过这样做，它们继承了`hashCode()`返回`int`. 默认方法返回一些（或多或少）由 VM 创建的唯一值（将其视为对象的内存地址，即使这并不完全正确）。当您实现自己的类时，您可以覆盖该方法来做任何您想做的事情。但是，您应该注意您的`hashCode`和`equals`方法是一致的，并且您应该知道哈希码通常不是唯一的，因此无论您做什么，都希望不同对象的哈希码之间发生冲突。

Collections 框架通常使用该`hashhCode()`方法对 Hashtables 等进行哈希处理。可以想象，其他库中的其他数据结构使用显式哈希函数，但在 Collections 框架中不会发生这种情况。

# php - Nginx/PHP-CGI - 502 错误网关

> ID：11991593
> 
> 赞同：0
> 
> 时间：2012-08-16T16:25:12.943
> 
> 标签：php, nginx

当我四处浏览时（只需单击此处和此处的链接），我的网站似乎出现问题，并且我的系统将返回随机的 502 Bad Gateway 错误。我可以点击刷新按钮，它看起来工作正常。

错误信息：

```
2012/08/16 11:17:54 [error] 26777#0: *1049 recv() failed 
    (104: Connection reset by peer) while reading response header from upstream, 
    client: 66.162.194.10, server: SITE, 
    request: "GET /wp-admin/admin-ajax.php?action=dashboard-widgets&widget=dashboard_secondary HTTP/1.1", 
    upstream: "fastcgi://unix:/tmp/php.socket:", host: "SITE", referrer: "SITE/wp-admin/index.php"

2012/08/16 11:17:54 [error] 26777#0: *1049 connect() failed 
    (111: Connection refused) while connecting to upstream, 
    client: 66.162.194.10, server: SITE, 
    request: "GET /wp-admin/admin-ajax.php?action=dashboard-widgets&widget=dashboard_secondary HTTP/1.1", 
    upstream: "http://127.0.0.1:9000/wp-admin/admin-ajax.php?action=dashboard-widgets&widget=dashboard_secondary", 
    host: "SITE", referrer: "http://SITE/wp-admin/index.php"

/etc/nginx/nginx.conf:
user www-data;
worker_processes 8; 
```

# python - 使用用户字段设置 django 模型两次

> ID：11991597
> 
> 赞同：2
> 
> 时间：2012-08-16T16:25:39.743
> 
> 标签：python, django

> **可能重复：**
> [如何在 Django 中为同一模型提供两个外键？](https://stackoverflow.com/questions/543377/how-can-i-have-two-foreign-keys-to-the-same-model-in-django)

刚接触 Django，试图围绕如何设置这个模型。基本上我有一个名为“订单”的模型，它列出了买家信息，其中包括一个带有外键（用户）的字段。不是我想添加另一个字段“卖家”，该字段与将销售订单商品的不同用户相关，但 django 不允许我添加与同一外键相关的另一个字段。设置此模型的正确方法是什么？一如既往地提前感谢您的帮助。

```
class Order(models.Model):
    date = models.DateTimeField(auto_now_add=True)
    buyer = models.ForeignKey(User, null=True)
    transaction_id = models.CharField(max_length=20)

    email = models.EmailField(max_length=50)
    phone = models.CharField(max_length=20)

    shipping_name = models.CharField(max_length=50)
    shipping_address_1 = models.CharField(max_length=50)
    shipping_address_2 = models.CharField(max_length=50)
    shipping_city = models.CharField(max_length=50)
    shipping_state = models.CharField(max_length=2)
    shipping_zip = models.CharField(max_length=10)

    billing_name = models.CharField(max_length=50) 
    billing_address_1 = models.CharField(max_length=50) 
    billing_address_2 = models.CharField(max_length=50, blank=True)
    billing_city = models.CharField(max_length=50)
    billing_state = models.CharField(max_length=2)
    billing_country = models.CharField(max_length=50)
    billing_zip = models.CharField(max_length=10)

    def __unicode__(self):
        return 'Order #' + str(self.id) 
```

# frameworks - 数据驱动框架 - Selenium Webdriver

> ID：11991600
> 
> 赞同：2
> 
> 时间：2012-08-16T16:25:49.490
> 
> 标签：frameworks, automated-tests, selenium-webdriver, data-driven

我正在使用 Selenium Webdriver（Java with JUnit）自动化 Web 应用程序测试，并且我非常熟悉数据驱动测试。现在我想构建一个数据驱动框架，但我没有任何资源可以开始。

有谁知道我如何开始构建框架以及我需要做的所有初始设置是什么？

任何建议，将不胜感激。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T11:43:33.453

使用 TestNG 或 JUnit 开始 google，然后[使用 PageFactory](https://code.google.com/p/selenium/wiki/PageFactory) 和 [PageObject](https://code.google.com/p/selenium/wiki/PageObjects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T06:48:34.473

您需要为 Excel 表中的读取和写入数据创建 Excel 实用程序，以后您可以通过 Selenium 对其进行管理。

参考链接：

[https://www.guru99.com/data-driven-testing.html](https://www.guru99.com/data-driven-testing.html)

[https://www.softwaretestinghelp.com/data-driven-framework-selenium-apache-poi/](https://www.softwaretestinghelp.com/data-driven-framework-selenium-apache-poi/)

[http://toolsqa.com/selenium-webdriver/data-driven-testing-excel-poi/](http://toolsqa.com/selenium-webdriver/data-driven-testing-excel-poi/)

# java - 运行最新版本文件的 Bash 脚本？

> ID：11991603
> 
> 赞同：2
> 
> 时间：2012-08-16T16:25:52.330
> 
> 标签：java, regex, bash, maven

我正在使用 Apache Maven 将我们的产品发布到生产环境，截至目前，创建的结果 jar 文件没有附加版本号。我想附加当前的 pom.xml 版本号（我知道该怎么做），但我需要我们的安装程序脚本（基本上是带有额外参数的 java -jar 命令）来默认访问最新版本的安装程序。

假设我的部署文件名为`foo.jar`. 我的脚本基本上是`java -jar foo.jar`

相反，我希望我的部署目录包含`foo-4.0.0.jar`、`foo-4.0.1.jar`、`foo-4.0.2.jar`等。

我想创建一个运行最高版本 foo 的 bash 脚本。

我看过按创建日期排序，但我可以立即想到可能效果不佳的场景。我考虑过按修改日期来做，然后手动`touch`输入我要安装的文件，但这种想法也很糟糕。

显然，我需要拆分名称（可能使用正则表达式）并隔离版本号（可能是名称中最后一个破折号和最后一个句点的子字符串？）并以某种方式对它们进行排序。排序可能是我最关心的问题......以及重新关联文件。

如果这太复杂了，理论上我可以制作一个 Java 文件来执行此操作（很明显我的主要语言是 Java 吗？），但理想情况下它只是一个 bash 脚本。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:34:17.100

您可以使用[sort](http://linux.die.net/man/1/sort)，指定分隔符和要排序的键集，例如

```
$ ls *.jar | sort -t- -k2 -V -r 
```

将使用版本号（**-V** ）对您的 jar 进行反向（**-r ）排序，使用****-t-**将版本号与 jar 名称分开，并使用**-k2**（您的版本号）对第二个字段进行排序

 ******在我的测试目录中，我得到：

```
a-2.2
a-2.1
a-2.0
a-1.50
a-1.10
a-1.3.1
c-1.3.0.1
a-1.3
a-1.2.9
b-1.2.8
a-1.2 
```

看起来不错。

将上述内容通过管道`head -1`为您提供顶部条目。******

# php - 如何使用基于计算的条件执行 PDO 查询

> ID：11991606
> 
> 赞同：0
> 
> 时间：2012-08-16T16:26:01.547
> 
> 标签：php, pdo

我在一个访问者可以创建帐户的网站上工作，为此，他们必须在过程结束时确认他们的电子邮件地址。

在创建帐户之前，输入的值（例如电子邮件、通行证等）会临时保存在一个特殊的表中。这意味着访问者有一个小时的时间打开他们的电子邮件并单击链接，否则该行将被删除，以防止机器人和邪恶或只是过度懒惰的人的“垃圾”。

我的想法是让用户清理混乱，这就是如何：当用户单击发送给他们的链接时，表中具有临时存储值的行被移动到成员的实际表中，另一个函数将清理向上“过时”的行，即超过一小时前插入的行。

这是我当前的代码：

```
$stmt3 = $dbc->prepare('DELETE FROM temp_storage WHERE time() - time > 3600');
$stmt3->execute(); 
```

**（时间是存储插入行的时间的列）**

但是，此代码显然不起作用。我知道我可以用 SELECT FROM temp_storage 做一个解决方法，然后检查该行是否插入太久，但我想，为什么不可能这样做呢？

现在我的问题是，是这样，还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:30:23.747

`TIME()`在 MySQL 中不会给你当前时间，它会从时间戳中删除“时间部分”。您正在寻找不同的时间函数，`UNIX_TIMESTAMP()`如果这就是您在表中存储时间戳的方式。

在此处查看 MySQL 日期和时间函数：http: [//dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:31:28.200

您用于获取当前时间的功能不正确。这不是`time()`它`now()`。

如果您检查`$pdo->errorInfo()`返回的内容，您将看到一条错误消息。

根据您对我的评论，`echo time()`我得到了您想要做的事情，但为了使其发挥作用，您应该编写以下内容：

```
$stmt3 = $dbc->prepare('DELETE FROM temp_storage WHERE '.time().' - time > 3600');
$stmt3->execute(); 
```

通过这样做，您将使用 PHP`time()`函数的返回值来构建一个字符串，然后将其发送到 MySQL 以作为查询执行。

您必须了解 PHP-realm 和 SQL-realm 代码之间的区别：

PHP 只构造文本字符串。它将各种单词和字母拼凑在一起组成一个字符串。PHP 甚至不关心该字符串的用途。

PHP 永远无法查看该字符串并说“嘿，这是一些很好的 SQL 查询”。

它可以做的就是将您编写的文本发送到 SQL 服务器；sql server 将尝试执行文本*，就*好像是一个正确的 SQL 语言语句。

如果它遇到错误，它会将它们报告回 PHP，否则它会将结果返回给 PHP。在任何情况下，SQL 语句都是*字符串*，它们在实际发送到服务器之前就已经组合好了。

“中断”一个字符串并将另一个字符串连接到它，这`"me"."&"."you"`只是在将字符串发送到 SQL 服务器之前构建字符串的过程的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:34:05.520

试试这个：

```
$stmt3 = $dbc->prepare('DELETE FROM temp_storage WHERE UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(time) > 3600'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:33:22.073

我假设 entry_dt 列是一`datetime`列。

```
where CURRENT_TIMESTAMP - interval 1 HOUR > entry_dt 
```

您应该避免将列命名为与 sql 函数和关键字相同

参考 [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# c# - 处理元数据、CreatedOn 等的 REST Api

> ID：11991612
> 
> 赞同：1
> 
> 时间：2012-08-16T16:26:21.470
> 
> 标签：c#, web-services, rest

在开发 REST Api 时，处理我所说的对象级元数据、CreatedBy、CreatedOn、ModifiedBy、ModifiedOn 等的最佳方法是什么？

一个典型的类可能是：

```
public class Person {
    public Guid Id {get; set;}
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public DateTime CreatedOn {get; set}
    public Guid CreatedBy {get; set;}
} 
```

我曾经认为在理想的世界中 REST http 方法将直接映射到控制器方法，例如：

```
public void Post (Person person) {
    ...perform the logic to add a person.
} 
```

因此，您的 API 的使用者理论上可以发布：

```
{
     "Id": "...guid...",
     "FirstName": "Joe",
     "LastName" : "Bloggs",
     "CreatedOn" : "01/01/12",
     "CreatedBy" : "...guid..."
} 
```

但是，它不适合我的消费者设置 Id、CreatedOn 和 CreatedBy。我认为这样做不是消费者的责任。所以这会让我按照我的`Post`方法去做：

```
public void Post (Person person) {
     person.Id = Guid.NewGuid();
     person.CreatedOn = DateTime.Now;
     person.CreatedBy = ...get user credentials from request...
} 
```

因此，消费者可以自由发布：

```
{
     "FirstName": "Joe",
     "LastName" : "Bloggs"
} 
```

如果我们想使用 Put 方法进行更新怎么办？那么这给我们留下了同样的问题，如果我不想（或信任）消费者通过这个元数据，那么它让我不得不在我的`Put`方法中这样做：

```
public void Put (Person person) {
     Person existingPerson = myRepository.GetEmployee(person.Id);

     existingPerson.FirstName = person.FirstName;
     existingPerson.LastName = person.LastName;

     myRepository.Save(existingEmployee);         
} 
```

我开始怀疑将消费者 json/xml 反序列化为模型对象并通过`Post (Person person`or是否有任何真正意义，`Put (Person person)`因为我从中获得了最微不足道的好处。为什么不将所有内容反序列化为字典（尽管仅对 json 真正可行）？

我错过了一些关于 REST 的基本知识吗？可能将 Id 和 1 属性反序列化为模型对象，然后检索完整对象并更新它是否正常？我是否应该强迫我的消费者每次都通过所有内容然后验证它？

我喜欢消费者通过一大块 json 或 xml 并且当它到达我的控制器时我只是在处理一个对象的想法。所有这些忽略属性和预取现有记录以进行更新等似乎有点混乱。除非我从根本上误解了 REST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:18:16.790

在我看来，您正在考虑的设计选项并非特定于 REST，而是通常适用于服务设计。按照我的阅读方式，基本问题似乎是——谁负责填充这些字段的业务逻辑，调用者还是服务？

对于我的两分钱，我认为这是服务器的责任，原因有两个。首先也是最重要的 - 安全。客户端脚本本质上是不安全的，因此不应该被信任。例如，有动机的人可以轻松伪造您的审计跟踪，并使其看起来好像是另一个用户执行了该操作。其次，我将审计/id 字段的数量视为横切被调用方法的实际业务目的的逻辑。为了创建一个人，客户端不必知道如何表示 id 的实现细节。

至于使用字典与模型，我认为这是个人喜好。这两种方法都不会强制客户端传递完整的字段集。两者都将支持客户端传递操作的唯一主要字段集的设计。实现到模型或字典中只会丢失您的审计/ID 字段。同样，这两种方法都不需要在服务器端验证只读字段，因为不能保证它们在客户端没有被更改。

# java - 在 doxygen 中使用 @see 或 @link

> ID：11991616
> 
> 赞同：6
> 
> 时间：2012-08-16T16:26:42.767
> 
> 标签：java, javadoc, doxygen

我之前使用 Javadoc 进行了文档记录，并使用了 tags `@see`，`@link`或者在我的描述中链接到其他类。现在我尝试了 doxygen，似乎这些标签不兼容。如果我运行 doxygen，则完整的标签将被简单地解释为普通文本。`{@see foo}``{link foo}`

我可以使用任何替代标签来获得相同的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:58:41.050

要链接到其他类，您应该使用该[`ref`](http://www.doxygen.nl/manual/commands.html#cmdref)命令。您可以使用该`\link`命令，但您必须使用该命令结束链接文本`\endlink`，我怀疑这是您的问题（尽管没有示例文档，我无法确定）。

[从我建议您阅读的关于自动链接](http://www.doxygen.nl/manual/autolink.html)的 doxygen 手册部分中，有一段关于类的链接：

> 文档中与文档类相对应且包含至少一个非小写字符的所有单词将自动替换为指向包含该类文档的页面的链接。如果您想防止与文档类相对应的单词被链接替换，您应该`%`在单词前面放置一个。要链接到全小写符号，请使用`\ref`.

还有一些需要考虑的点：

*   Doxygen 确实接受`\see`（与 同义`\sa`）和`\link`命令。如果这些没有按预期工作，则 OP 应该包含一些示例文档，我们可以尝试找出它没有按预期工作。

*   `{\command description}`带有封闭符号的符号在 doxygen 文档`{`中`}`并不常见，我不确定程序将如何处理这些符号，因此最好不要使用这种样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:35:23.790

我怀疑你在评论`//`

Doxygen 将以这种方式捕获标签：

```
/**
* @KEYWORD DESCRIPTION
*/ 
```

您也可以只添加三分之一`/`以使每个注释行都以 doxygen 开头，`///`因为 doxygen 也会捕捉到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:32:15.400

我偶然发现了一篇不错的文章，它比较了 javadoc 和 doxygen，显示了一些示例等效代码（@link 等）。你可以[在这里](http://gushieblog.blogspot.com/2006/06/doxygen-versus-javadoc.html)看到它。我希望它有所帮助。

# android - AndEngine：使用 PIXEL_TO_METER_RATIO

> ID：11991622
> 
> 赞同：4
> 
> 时间：2012-08-16T16:27:29.753
> 
> 标签：android, andengine

我是 AndEngine 的新手。我已经在很多地方看到了 PIXEL_TO_METER_RATIO 的使用，但无法理解何时以及如何使用此常量。任何人都可以指导正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:14:08.950

AndEngine 使用的底层物理引擎 Box2d 使用米作为标准单位。PIXEL_TO_METER_RATIO 描述了 AndEngine 中有多少像素相当于物理引擎中的一米。例如，如果您获得 Body 的位置，它将以米为单位。您可以将其乘以比率以获得场景上的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:53:06.633

定义 PTM_RATIO 是因为 Box2D 使用米作为标准单位。例如，如果 PTM_RATIO 定义为 32，则 480*320 像素的屏幕通常等于 15*10 平方米的 box2d 世界。

* * *

*Box2D 与浮点数一起工作，必须使用容差才能使 Box2D 表现良好。这些公差已经过调整，可以很好地与米-千克-秒 (MKS) 单位配合使用。特别是，Box2D 已经过调整，可以很好地处理 0.1 到 10 米之间的移动物体。所以这意味着汤罐和公共汽车之间的物体大小应该可以正常工作。静态物体可能高达 50 米大，没有太多麻烦。*

* * *

参考： http: [//www.box2d.org/manual.html](http://www.box2d.org/manual.html)

# css - 如何在 CSS 中对图像应用渐变叠加层？

> ID：11991624
> 
> 赞同：0
> 
> 时间：2012-08-16T16:27:34.277
> 
> 标签：css, image, gradient, fade

我在`div`. 例如，假设这个 div 有一个`background-color`of `#000`。现在，我希望这张图片从左边淡出到右边。

我的意思是，第一列像素应该看起来有 100% 的不透明度，而最后一列像素应该看起来有 0/1% 的不透明度（最后一列像素将与 div 的背景融为一体）。

我将如何纯粹在 CSS 中做到这一点？图像将始终为 50x50。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:32:03.090

你总是提前知道DIV的背景颜色吗？它总是纯色（不是渐变、没有纹理等）吗？您的图像宽度大致相同吗？如果是这样，我会创建一个与背景颜色相同的 PNG，并让它在右侧褪色到完全透明。它可以是任何高度，因为我们将垂直平铺它。

将PNG设置为与图像相同的高度后，将PNG放在图像上，并且图像会淡出到背景中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:42:31.167

您可以在图像顶部覆盖 div 并为 div [http://tinkerbin.com/xXJQrgnk设置渐变](http://tinkerbin.com/xXJQrgnk)

# jquery - jQuery 中的 MVC 3 Ajax 错误处理

> ID：11991626
> 
> 赞同：0
> 
> 时间：2012-08-16T16:27:41.407
> 
> 标签：jquery, ajax, asp.net-mvc-3

我有以下代码可以打开与视图的对话。

```
$('.bulkEditlink').click(function () {
    var f = $('td:first', $(this).parents('tr')).text();
    var r = tableCols().toString();
    loadBulkEdit(f, r); //loadBulkEdit is defined on RoleCompare View.
}); 
```

--用get加载视图

```
function loadBulkEdit(f,r) {
        var  $urlpath = "@Url.RouteUrl(new { area = "Admin", controller = "Role", action = "RoleEntitlementEdit"})";
        $.ajax({
            url: $urlpath,
            type: 'GET',
            data:  { 
                        funct: f, 
                        roleName: r, 
                        access: 'access' 
                    },
            OnFailure: "alert('error')",
            success: function (data) {
                $("#ajax-content").html(data);
                loadAccess();
            }
        });
} //end loadBulkEdit 
```

——对话框。保存时，调用 SaveRoleEntitlement 操作方法（视图上定义的 Ajax.BeginForm 选项

```
function loadAccess(xhr, status) {
        $('#ajax-content').dialog({
            modal: true,
            width: 370,
            title: $('#ajax-content legend').text(),
            buttons: {
                "Save": function () {
                    $('#ajax-content form').submit();
                   $(this).dialog('destroy').html('');
                },
                "Cancel": function () {
                    $(this).dialog('destroy').html('');
                }
            }
        });
    } //end popup 
```

--控制器动作

```
public JsonResult SaveRoleEntitlement(RoleEntitlementEidtModel model)
        {
            try
            {

                string strPackageName = model.RoleName;
                string strFebSecID = User.Identity.Name;
                string strKeyValue = "";
                string strFunction = model.Function;
                string strAccessLevel = model.AccessLevel;

                PatService.EditEntitlement(strFebSecID, strPackageName, strFunction, strAccessLevel, strKeyValue);
                return Json(new { Error = string.Empty });
            }
            catch (Exception ex)
            {
                return Json(new { Error = ex.Message });
            }
        } 
```

这很好用，只是我正在努力添加 1\. 保存时的错误处理。如果有任何异常，我想向用户显示错误消息 2\. 方法执行时进度条或某种“等待”消息。希望有人能帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:41:28.670

这实际上取决于您要显示错误消息的方式/位置。第一种可能性是在发生错误时返回 JSON（就像您当前所做的那样），然后订阅您的 OnSuccess 处理程序`Ajax.BeginForm`来处理这种情况：

```
@using (Ajax.BeginForm("SaveRoleEntitlement", "Role", new { area = "Admin" }, new AjaxOptions { OnSuccess = "saveRoleEntitlementSuccess" }))
{
    ...
} 
```

然后定义这个成功回调：

```
function saveRoleEntitlementSuccess(result) {
    if (result.Error && result.Error != '') {
        // there was an error => show it somehow
        alert(result.Error);
    } else {
        // the save was successful => do whatever you need to do in this case
    }
} 
```

* * *

如果您想直接在 UI 上处理验证错误，另一种可能性是在出现错误时返回相同的部分：

```
public ActionResult SaveRoleEntitlement(RoleEntitlementEidtModel model)
{
    if (!ModelState.IsValid)
    {
        // there was a validation error => redisplay the partial form
        // so that fields appear in red
        return PartialView("RoleEntitlementEdit", model);
    }
    try
    {
        string strPackageName = model.RoleName;
        string strFebSecID = User.Identity.Name;
        string strKeyValue = "";
        string strFunction = model.Function;
        string strAccessLevel = model.AccessLevel;

        PatService.EditEntitlement(strFebSecID, strPackageName, strFunction, strAccessLevel, strKeyValue);
        return Json(new { success = true });
    }
    catch (Exception ex)
    {
        // we're gonna show this in a ValidationSummary
        ModelState.AddModelError("", ex.Message);
        return PartialView("RoleEntitlementEdit", model);
    }
} 
```

和你的 Ajax 表单：

```
@using (Ajax.BeginForm("SaveRoleEntitlement", "Role", new { area = "Admin" }, new AjaxOptions { OnSuccess = "saveRoleEntitlementSuccess" }))
{
    @Html.ValidationSummary()
    ...
} 
```

`saveRoleEntitlementSuccess`这次你的功能：

```
function saveRoleEntitlementSuccess(result) {
    if (result.success) {
        // the save was successful => do whatever you need to do in this case
    } else {
        // there was an error => in this case the controller action returned
        // a partial that we could use to refresh the form in the DOM:
        $('#ajax-content').html(result);
    }
} 
```

# python - 选择由 DatetimeIndex 索引的 Pandas DataFrame 的子集和时间戳列表

> ID：11991627
> 
> 赞同：12
> 
> 时间：2012-08-16T16:27:44.560
> 
> 标签：python, time-series, pandas

我有一只大熊猫`DataFrame`

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 3425100 entries, 2011-12-01 00:00:00 to 2011-12-31 23:59:59
Data columns:
sig_qual    3425100  non-null values
heave       3425100  non-null values
north       3425099  non-null values
west        3425097  non-null values
dtypes: float64(4) 
```

我选择了其中的一个子集，`DataFrame`并将`.ix[start_datetime:end_datetime]`其传递给一个[peakdetect 函数](https://gist.github.com/1178136)，该函数在两个单独的列表中返回局部最大值和最小值的索引和值。我提取最大值的索引位置并使用`DataFrame.index`我得到一个熊猫时间戳列表。

然后，我尝试通过将 TimeStamps 列表传递给来提取大型 DataFrame 的相关子集，`.ix[]`但它似乎总是返回一个空的`DataFrame`. 我可以遍历 TimeStamps 列表并从中获取相关行，`DataFrame`但这是一个漫长的过程，我认为`ix[]`应该根据[文档](http://pandas.sourceforge.net/indexing.html)接受值列表？ *（尽管我看到 Pandas 0.7 的示例使用 a `numpy.ndarray`of `numpy.datetime64`）*

**更新：** 下面选择了 DataFrame 的一个小 8 秒子集，# 行显示了一些值：

```
y = raw_disp['heave'].ix[datetime(2011,12,30,0,0,0):datetime(2011,12,30,0,0,8)]
#csv representation of y time-series 
2011-12-30 00:00:00,-310.0
2011-12-30 00:00:01,-238.0
2011-12-30 00:00:01.500000,-114.0
2011-12-30 00:00:02.500000,60.0
2011-12-30 00:00:03,185.0
2011-12-30 00:00:04,259.0
2011-12-30 00:00:04.500000,231.0
2011-12-30 00:00:05.500000,139.0
2011-12-30 00:00:06.500000,55.0
2011-12-30 00:00:07,-49.0
2011-12-30 00:00:08,-144.0

index = y.index
<class 'pandas.tseries.index.DatetimeIndex'>
[2011-12-30 00:00:00, ..., 2011-12-30 00:00:08]
Length: 11, Freq: None, Timezone: None

#_max returned from the peakdetect function, one local maxima for this 8 seconds period
_max = [[5, 259.0]]

indexes = [x[0] for x in _max]
#[5]

timestamps = [index[z] for z in indexes]
#[<Timestamp: 2011-12-30 00:00:04>]

print raw_disp.ix[timestamps]
#Empty DataFrame
#Columns: array([sig_qual, heave, north, west, extrema], dtype=object)
#Index: <class 'pandas.tseries.index.DatetimeIndex'>
#Length: 0, Freq: None, Timezone: None

for timestamp in timestamps:
    print raw_disp.ix[timestamp]
#sig_qual      0
#heave       259
#north        27
#west        132
#extrema       0
#Name: 2011-12-30 00:00:04 
```

**更新 2：** 我[创建了一个 gist](https://gist.github.com/3377772)，它实际上是有效的，因为当从 csv 加载数据时，时间戳的索引列存储为对象的 numpy 数组，这些对象看起来是字符串。与我自己的代码中索引是 type`<class 'pandas.tseries.index.DatetimeIndex'>`并且每个元素都是 type 不同`<class 'pandas.lib.Timestamp'>`，我认为传递一个列表`pandas.lib.Timestamp`与传递单个时间戳的工作方式相同，这会被认为是一个错误吗？

如果我将索引创建为字符串列表的原始`DataFrame`文件，则使用字符串列表进行查询可以正常工作。它确实显着增加了 DataFrame 的字节大小。

**更新 3：** 错误似乎只发生在非常大的 DataFrame 上，我重新运行了不同大小的 DataFrame 的代码（下面的评论中有一些细节），它似乎发生在超过 270 万条记录的 DataFrame 上。使用字符串而不是时间戳可以解决问题，但会增加内存使用量。

**已修复** 在最新的 github master (18/09/2012) 中，请参阅页面底部 Wes 的评论。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T20:26:37.273

df.ix[my_list_of_dates] 应该可以正常工作。

```
In [193]: df
Out[193]:
            A  B  C  D
2012-08-16  2  1  1  7
2012-08-17  6  4  8  6
2012-08-18  8  3  1  1
2012-08-19  7  2  8  9
2012-08-20  6  7  5  8
2012-08-21  1  3  3  3
2012-08-22  8  2  3  8
2012-08-23  7  1  7  4
2012-08-24  2  6  0  6
2012-08-25  4  6  8  1

In [194]: row_pos = [2, 6, 9]

In [195]: df.ix[row_pos]
Out[195]:
            A  B  C  D
2012-08-18  8  3  1  1
2012-08-22  8  2  3  8
2012-08-25  4  6  8  1

In [196]: dates = [df.index[i] for i in row_pos]

In [197]: df.ix[dates]
Out[197]:
            A  B  C  D
2012-08-18  8  3  1  1
2012-08-22  8  2  3  8
2012-08-25  4  6  8  1 
```

# javascript - How to infinite loop a dataset string

> ID：11991628
> 
> 赞同：0
> 
> 时间：2012-08-16T16:28:10.923
> 
> 标签：javascript, jquery, loops

I am looking for a way to keep on looping a couple of values. I am using a simple ajax load script, which get the value(s)(files) from a dataset from the target element. The re-loading of a file happens every XXXX second, so it will load the file over and over, but if there are more files present it should loop them all, and re-loop it....infinite

The example below is a basic idea how, I split the string and start with the first one, but how can i loop this(the best way), and keep it looping.

***HTML***

```
<div id="target" data-load="file1.php | file2.php | file3.php"></div> 
```

***jQuery***

```
var fileTo = $('#target').data('widget-load').split("|");

setInterval(function(){
   $('#target').load(fileTo[0])
},1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:42:18.397

@Diode：在无限循环的情况下， shift && push 是更好的选择。忘了他们。在这种情况下，我建议如下：

```
var intervalId = setInterval((function(theArray)
{
    var target = $('#target');
    var current;
    return function ()
    {
        current = theArray.shift();
        target.load(current);
        theArray.push(current);
    };
})($('#target').data('widget-load').split("|")),1000); 
```

* * *

尝试这个：

```
var intervalId = setInterval((function(theArray)
{
    var target = $('#target');//only search for this once, not on every call
    //to make infinite loop, copy the array
    var resetArr = theArray.slice(0);//use slice, if not a reference is assigned and both arrays will be altered 
    //Name is not required, if you want to use a name, pick a better one, next might be reserved (not sure)
    //best go for nextInterval, chose this one for explanation
    return function next()
    {
        //get first element, theArray is now 1 shorter
        target.load(theArray.splice(0,1)[0]);
        if (theArray.length === 0)
        {//no more files left -> this stops the interval
            //clearInterval(intervalId);
            //intervalId = null;
            //restore the array, the loop starts from file1 again --> infinite loop
            theArray = resetArr.slice(0);//copy the original value
        }
    }
})($('#target').data('widget-load').split("|")),1000); 
```

这可能有点密集，但我在 chrome 控制台中尝试了一个简单的单行版本：

```
foo = setInterval((function(arr){ return function(){alert(arr.splice(0,1)[0]); if (arr.length === 0){ clearInterval(foo);}};})([1,2,3]),1000); 
```

它就像一个魅力。
这个怎么运作：

`intervalId`保存间隔的 erm id ......有点参考。只要设置好了，该函数就会被调用 every `1000ms`。我没有传递一个简单的函数作为第一个参数，而是创建了一个函数，并立即调用它。我传递给无名函数 ( `theArray`) 的参数可以被调用的函数访问`next`，它是匿名函数的返回值。它是在函数内部创建的，因此它可以访问*其母*函数的所有变量，即使在*母*函数返回之后也是如此。
这意味着`theArray`除了函数之外的其他任何地方的值都超出了范围`next`，这是我们间隔的实际回调。没有什么可以干扰的价值`theArray`，任何外部代码都不能覆盖任何内容，与使用全局变量相比，这是一种更安全的方法。
这同样适用于变量`target`：它是在匿名的*母亲*函数中声明和初始化的，该函数被调用一次，然后被 GC'ed。该变量仍然存在，并引用了一个 jQuery 对象。DOM 只被搜索过一次，用于该元素，但每次新调用该`next`函数都可以访问该对象。这样做一次，速度差异很小，一直这样做，你的脚本*会*（很多）更有效率！

因此，间隔：每 1000 毫秒，`next`被调用一次。`theArray`它从作为其创建者（该匿名函数）的参数（）的数组中转移第一个值。当该数组为空时，`clearInterval`调用该函数以停止该批次。所有文件都已加载，继续进行没有意义。
一旦发生这种情况，`theArray`, `next`-function 和所有其他变量 ( `target`) 就会超出范围，所以没有全局变量，只是一块漂亮、干净的内存，这总是一件好事。我假设此代码将作为事件处理程序的一部分触发，在这种情况下，您只需将其复制粘贴到处理程序中，同样不会创建全局变量。

如果此代码将成为全局范围的一部分，则只需将其全部包装在自调用函数中即可轻松避免全局变量：

```
(function()
{
    var intervalId = setInterval((function(theArray)
    {
        //...
    })($('#target').data('widget-load').split("|")),1000);
})(); 
```

你都准备好了。恕我直言，这是解决这个问题的最好、最安全和最有*JS 意识的*方法。JavaScript 是关于函数的，你越多*地利用*它们，语言就越喜欢它。事实上，它会通过揭示其隐藏的表现力来感谢你。

即使您决定不使用此答案，也请阅读诸如闭包之类的内容以及如何充分利用函数范围。你很快就会发现自己以一种全新的方式编写代码，保证 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:31:10.290

您可以使用 setTimeout("function",delay) 在自身内部继续调用相同的函数，并延迟几毫秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:12:15.577

```
var fileTo = $('#target').data('widget-load').split("|");

setInterval(function(){
   var file = fileTo.shift();   // `shift` gives the file at 0
   $('#target').load(file);     // load it
   fileTo.push(file);           // `push` adds it at the end of the array
},1000); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T16:31:43.963

```
var $target = $('#target'),
    fileTo = $target.data('widget-load').split("|"),
    i = 0;

setInterval(function(){
   $target.load(fileTo[i]);
   i++;
   if (i === fileTo.length)
      i = 0;
},1000); 
```

# c# - 如何将数据网格的背景更改为每隔一行的相同颜色？

> ID：11991629
> 
> 赞同：0
> 
> 时间：2012-08-16T16:28:11.297
> 
> 标签：c#, silverlight, datagrid

我正在使用`DataGrid`并尝试更改每隔一行的默认背景颜色（奇数行具有黄色，而偶数行具有白色），因为颜色与突出显示颜色太相似。

这是我的代码：

```
MyDataGrid.LoadingRow += delegate(object sender, DataGridRowEventArgs e)
{
    var currentRowContext = e.Row.DataContext;    
    if (currentRowContext.GetType()
                         .GetProperty("OBJECTID")
                         .GetValue(currentRowContext, null)
                         .ToString()]) % 2 == 0)
        {
            e.Row.Background = new SolidColorBrush(Colors.White);
        }
        else
        {
            e.Row.Background = new SolidColorBrush(
                                      new Color() { 
                                                    R = 235, 
                                                    G = 235, 
                                                    B = 0, 
                                                    A = 60 
                                                   });
};
MyDataGrid.UnloadingRow += delegate(object sender, DataGridRowEventArgs e)
{
    e.Row.Background = null;
}; 
```

一开始它显示正确，但是在我单击任何标题对记录进行排序后，颜色就混乱了（即，并非所有其他行都具有相同的颜色）。我发现设置此`DataGrid`行颜色真的很棘手，不知道是否有人已经解决了这个问题。 **排序记录时如何保持交替颜色？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:35:54.367

这是[你](http://blogs.msdn.com/b/scmorris/archive/2008/03/21/using-the-silverlight-datagrid.aspx)想要达到的目标吗？（意味着每第二行都有自己的颜色）。在大多数相关的 wpf 控件中都有一个已实现的替代代码。

# java - Is there a work-around for enunciate regarding multidimensional arrays within an api class (docs maven goal)?

> ID：11991630
> 
> 赞同：0
> 
> 时间：2012-08-16T16:28:19.783
> 
> 标签：java, rest, maven-2, enunciate

I'm hitting the error "No support yet for multidimensional arrays" when running docs goal for maven plugin enunciate. Is there a way I can avoid it bombing out the process (ie. generate the rest of the docs for the API)?

I've tried @org.codehaus.enunciate.doc.ExcludeFromDocumentation on the API method returning the class with double array. I've tried @org.codehaus.enunciate.XmlTransient on the class with the double array.

I have since seen in enunciate documentation where those only affect whether they display on docs, not compilation.

I'm happy to hear any ideas you have!

Thanks.

Edit: The best I could do was dump project to temp directory, rip out all modules that aren't necessary to reach the api, delete the class with double array, and replace that part of the REST api's java method signature with String. This allows me to at least create the api document page via enunciate and give a description via javadoc. But, I'd love to have a more elegant solution, so please share if you know of one :)

Edit 2: Example pom:

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
 <modelVersion>4.0.0</modelVersion>
 <groupId>com.company.services.rest.service</groupId>
 <artifactId>service-rest-api</artifactId>
 <packaging>pom</packaging>
 <version>1.1</version>
 <name>service  REST API</name>
 <dependencies>
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.2.1.GA</version>
      </dependency>
      <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.4</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>jaxrs-api</artifactId>
        <version>2.2.1.GA</version>
      </dependency>
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>2.2.1.GA</version>
      </dependency>
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>2.2.1.GA</version>
        <exclusions>
          <exclusion>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
          </exclusion>
        </exclusions>
      </dependency>
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-multipart-provider</artifactId>
        <version>2.2.1.GA</version>
      </dependency> 
      <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>tjws</artifactId>
        <version>2.2.1.GA</version>
      </dependency>
  </dependencies>
  <build>
    <plugins>
     <plugin>
       <groupId>org.codehaus.enunciate</groupId>
       <artifactId>maven-enunciate-plugin</artifactId>
       <version>1.26</version>
       <configuration>
         <forceWarPackaging>false</forceWarPackaging>
         <configFile>/tmp/enunciate-work/enunciate.xml</configFile>
       </configuration>
       <executions>
         <execution>
           <goals>
             <goal>docs</goal>
           </goals>
         </execution>
       </executions>
     </plugin>
    </plugins>
  </build> 
```

Files located src/main/java/com/company/services/user/rest:

```
package com.company.services.service.rest;

import javax.ws.rs.POST;
import javax.ws.rs.Produces;
import javax.ws.rs.Consumes;
import javax.ws.rs.Path;
import javax.ws.rs.core.MediaType;

@Path("/")
public interface ServiceResource {
    @POST
    @Path("/statuschanges")
    @Produces({MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML})
    @Consumes({MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML})
    public ServiceStatusChanges getServiceStatusChangeLogs(String string);
}

package com.company.services.service.rest;

import java.io.Serializable;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class ServiceStatusChanges implements Serializable {
    private static final long serialVersionUID = 1l;
    private String[][] logs;
    public ServiceStatusChanges() {}

    public ServiceStatusChanges(String[][] logs) {
        this.logs=logs;
    }

    public String[][] getLogs() {
        return logs;
    }

    public void setLogs(String[][] logs) {
        this.logs=logs;
    }
} 
```

enunciate.xml:

```
<enunciate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="
           http://enunciate.codehaus.org/schemas/enunciate-1.26.xsd">

  <modules>
      <disable-rule id="csharp.warnings"/>
      <disable-rule id="c.warnings"/>
      <disable-rule id="obj-c.warnings"/>
          <docs docsDir="api" title="REST API" includeDefaultDownloads="false" disableRestMountpoint="true">

    </docs>
    <!-- Disable all the client generation tools -->
    <basic-app disabled="true" />
    <c disabled="true" />
    <csharp disabled="true" />
    <java-client disabled="true" />
    <jaxws-client disabled="true" />
    <jaxws-ri disabled="false" />
    <jaxws-support disabled="false" />
    <jersey disabled="true" />
    <obj-c disabled="true" />
    <xml forceExampleJson="true"/>
    <jaxws disabled="false"/>
    <amf disabled="true"/>
  </modules>

</enunciate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T12:16:31.197

当我使用`List<String[]>`type 而不是`String[][]`. 据我记得生成的 JSON/XML 示例和 xsd 似乎有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:52:55.427

如果您不需要该方法的 XML 支持，您可以在从 @Consumes 和 @Produces 中删除 MediaType.APPLICATION_XML 之后执行 JSON 并删除 @XmlRootElement 注释。

如果您仍然希望支持 XML，您可以进行一些增强以支持仅序列化更改，例如使`logs`属性 XML 瞬态并将数组包装为序列化时间。这将具有 Enunciate 能够记录它而不是一些带外文档的额外好处。例如：

```
@XmlRootElement
public class ServiceStatusChanges implements Serializable {
    private static final long serialVersionUID = 1l;
    private String[][] logs;
    public ServiceStatusChanges() {}

    public ServiceStatusChanges(String[][] logs) {
        this.logs=logs;
    }

    @XmlTransient
    public String[][] getLogs() {
        return logs;
    }

    public void setLogs(String[][] logs) {
        this.logs=logs;
    }

    @XmlElement( name = "logs" )
    public Log[] getLogsWrapped() {
        Log[] logs = new Log[this.logs.length];
        //iterate through the logs and wrap it...
        return logs;
    }
} 
```

你的`Log`班级可能看起来像：

```
@XmlRootElement
public class Log implements Serializable {
    @XmlValue
    public String value;
} 
```

# python - 如何修复：W602 已弃用引发异常的形式

> ID：11991637
> 
> 赞同：31
> 
> 时间：2012-08-16T16:29:03.333
> 
> 标签：python, pylint, pep8

如果我使用 pylint（通过 sublimerlinter），我会收到以下警告消息：

`W602 deprecated form of raising exception`

这就是我在代码中使用异常的方式：

```
if CONDITION == True:
    raise ValueError, HELPING_EXPLANATION 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T16:29:03.333

像这样提出你的例外：

```
if CONDITION == True:
    raise ValueError(HELPING_EXPLANATION) 
```

来自[PEP 8 - Python 代码样式指南 - 编程建议](http://www.python.org/dev/peps/pep-0008/#id39)：

> 引发异常时，请使用 raise`ValueError('message')`而不是旧形式`raise ValueError, 'message'`。
> 
> 首选使用括号的形式，因为当异常参数很长或包含字符串格式时，由于包含括号，您不需要使用行继续符。旧形式将在 Python 3 中删除。

# python - Importing data from dbf to excel spreadsheet using Wing IDE

> ID：11991644
> 
> 赞同：3
> 
> 时间：2012-08-16T16:29:28.210
> 
> 标签：python, excel, dbf, wing-ide

I am trying to move a column of data (mean values) from a dbf file to an excel spreadsheet. I have been trying this with Wing IDE with no success so far. I am not a progamming student and this is a short term assignment. I am stuck on the part where I have to retrieve the file from the specific network drive and copy the data onto my local excel sheet. Help would be great. Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:52:29.857

你需要[Python Excel](http://www.python-excel.org/)工具，我也会推荐我自己的[dbf 包](http://python.org/pypi/dbf)。

```
import dbf
import xlwt

dbf_files = ('file1.dbf','file2.dbf','file3.dbf')

output_xls = xlwt.Workbook()
sheet = output_xls.add_sheet('sheet_name')

for i, filename in enumerate(dbf_files):
    total = 0
    with dbf.Table(filename) as table:
        for record in table:
            total += record.some_count   # some_count being a field name in the dbf files
    sheet.write(i, 0, filename)
    sheet.write(i, 1, total)

output_xls.save('final.xls') 
```

希望这能让您了解如何处理您的用例。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:34:51.603

据我了解，您可以将 ADODB 与 Python 一起使用。您可以针对连接运行查询以从 DBF 插入 Excel 文件。

这适用于VBA，希望你能翻译。

```
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;" _
  & "Data Source=z:\docs\myexcel.xlsm;Extended Properties=""Excel 8.0;HDR=No"";"

Set cn = CreateObject("ADODB.Connection")
cn.Open strCon

strsql = "SELECT * INTO [mynewsheet] " _
  & "FROM [dBASE III;DATABASE=z:\docs\].[mydbf.dbf] "
  cn.Execute strsql 
```

# image - 将图像转换为 .icns 文件 AppleScript Obj-C

> ID：11991645
> 
> 赞同：0
> 
> 时间：2012-08-16T16:29:29.580
> 
> 标签：image, icons, applescript, converter, applescript-objc

如何使用 applescript 将 .png 图像转换为 .icns？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:11:05.490

你能用啜饮吗？

```
sips -s format icns test.png -o test.icns 
```

它似乎不支持 1024 x 1024 图像或创建更小的版本。

# c++ - Writing to redis using C++ using smallest possible bandwitdth

> ID：11991649
> 
> 赞同：0
> 
> 时间：2012-08-16T16:29:44.730
> 
> 标签：c++, c, redis

I wanted to write a ASCII string file to a remote redis server (this isnt really important, key point is redis writes strings) using the least amount of bandwidth possible. What is the best form of compression to do this? The file has rows like:

"Employee One - blah -blah" and I want to somehow compress each one, before a write since I have a severe bandwidth limitation.

A large file sample:

EMP1,500000,125670205,21.50,20.50

EMP2,215500,125670205,21.50,20.50

EMP3,251200,125670205,21.50,20.50

EMP4,234600,125670205,21.50,20.50

EMP5,735000,125670205,21.50,20.50

EMP6,134600,125670205,21.50,20.50

Its a CSV with string and numbers, I want to write it with the whole file and/or row by row.

# java - 神经网络反向传播不能正确计算权重

> ID：11991651
> 
> 赞同：3
> 
> 时间：2012-08-16T16:29:49.160
> 
> 标签：java, machine-learning, neural-network, backpropagation

目前，我遇到了反向传播算法的问题。我正在尝试实现它并用它来识别人脸的方向（左、右、下、直）。基本上，我有 N 个图像，读取像素并将其值（0 到 255）更改为从 0.0 到 1.0 的值。所有图像均为 32*30。我有一个 960 个神经元的输入层、一个 3 个神经元的隐藏层和一个 4 个神经元的输出层。例如，输出 <0.1,0.9,0.1,0.1> 表示该人向右看。我遵循了伪代码。但是，它不能正常工作——它没有计算正确的权重，因此它无法处理训练和测试示例。以下是部分代码：

```
 // main function - it runs the algorithm
     private void runBackpropagationAlgorithm() {
        for (int i = 0; i < 900; ++i) {
            for (ImageUnit iu : images) {
                double [] error = calcOutputError(iu.getRatioMatrix(), iu.getClassification());
                changeHiddenUnitsOutWeights(error);
                error = calcHiddenError(error);
                changeHiddenUnitsInWeights(error,iu.getRatioMatrix());
            }
        }
    }

  // it creates the neural network
    private void createNeuroneNetwork() {
            Random generator = new Random();
            for (int i = 0; i < inHiddenUnitsWeights.length; ++i) {
                for (int j = 0; j < hiddenUnits; ++j) {
                    inHiddenUnitsWeights[i][j] = generator.nextDouble();
                }
            }
            for (int i = 0; i < hiddenUnits; ++i) {
                for (int j = 0; j < 4; ++j) {
                    outHddenUnitsWeights[i][j] = generator.nextDouble();
                }
            }
        }
   // Calculates the error in the network. It runs through the whole network.
private double [] calcOutputError(double[][] input, double [] expectedOutput) {
        int currentEdge = 0;
        Arrays.fill(hiddenUnitNodeValue, 0.0);
        for (int i = 0; i < input.length; ++i) {
            for (int j = 0; j < input[0].length; ++j) {
                for (int k = 0; k < hiddenUnits; ++k) {
                    hiddenUnitNodeValue[k] += input[i][j] * inHiddenUnitsWeights[currentEdge][k];
                }
                ++currentEdge;
            }
        }
        double[] out = new double[4];
        for (int j = 0; j < 4; ++j) {
            for (int i = 0; i < hiddenUnits; ++i) {
                out[j] += outHddenUnitsWeights[i][j] * hiddenUnitNodeValue[i];
            }
        }
        double [] error = new double [4];
        Arrays.fill(error, 4);
        for (int i = 0; i < 4; ++i) {
            error[i] = ((expectedOutput[i] - out[i])*(1.0-out[i])*out[i]);
            //System.out.println((expectedOutput[i] - out[i]) + " " + expectedOutput[i] + " " +  out[i]);
        }
        return error;
    }

// Changes the weights of the outgoing edges of the hidden neurons
private void changeHiddenUnitsOutWeights(double [] error) {
        for (int i = 0; i < hiddenUnits; ++i) {
            for (int j = 0; j < 4; ++j) {
                outHddenUnitsWeights[i][j] += learningRate*error[j]*hiddenUnitNodeValue[i];
            }
        }
    }

// goes back to the hidden units to calculate their error.
private double [] calcHiddenError(double [] outputError) {
        double [] error = new double[hiddenUnits];
        for (int i = 0; i < hiddenUnits; ++i) {
            double currentHiddenUnitErrorSum = 0.0;
            for (int j = 0; j < 4; ++j) {
                currentHiddenUnitErrorSum += outputError[j]*outHddenUnitsWeights[i][j];
            }
            error[i] = hiddenUnitNodeValue[i] * (1.0 - hiddenUnitNodeValue[i]) * currentHiddenUnitErrorSum;
        }
        return error;
    }

// changes the weights of the incomming edges to the hidden neurons. input is the matrix of ratios
private void changeHiddenUnitsInWeights(double [] error, double[][] input) {
        int currentEdge = 0;
        for (int i = 0; i < input.length; ++i) {
            for (int j = 0; j < input[0].length; ++j) {
                for (int k = 0; k < hiddenUnits; ++k) {
                    inHiddenUnitsWeights[currentEdge][k] += learningRate*error[k]*input[i][j];
                }
                ++currentEdge;
            }
        }
    } 
```

随着算法的工作，它计算越来越大的权重，最终接近无穷大（NaN 值）。我检查了代码。唉，我没有设法解决我的问题。我会非常感谢任何愿意帮助我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:47:48.130

我没有检查你所有的代码。我只是想给你一些一般性的建议。我不知道您的目标是（1）学习人脸的方向还是（2）实现自己的神经网络。

在情况 (1) 中，您应该考虑其中一个[库](https://stackoverflow.com/questions/11477145/open-source-neural-network-library/)。它们只是工作并为您提供更灵活的配置选项。例如，标准反向传播是神经网络最差的优化算法之一。收敛取决于学习率。我看不出您在实现中选择了哪个值，但它可能太高了。还有其他优化算法不需要学习率或在训练期间对其进行调整。此外，隐藏层中的 3 个神经元很可能是不够的。大多数用于图像的神经网络都有数百个甚至数千个隐藏单元。我建议您首先尝试使用完全开发的库来解决您的问题。如果它确实有效，请尝试实施您自己的 ANN 或开心。:)

在情况（2）中，您应该首先尝试解决一个更简单的问题。采用一个非常简单的人工数据集，然后采用[标准基准](https://stackoverflow.com/questions/11230536/best-available-data-sets-and-software-to-compare-accuracy-between-homemade-and-p/)，然后用您的数据进行尝试。验证反向传播实现是否有效的一个好方法是与[数值微分方法](http://en.wikipedia.org/wiki/Numerical_differentiation)进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:01:24.063

您的代码缺少传输函数。听起来您想要具有 softmax 输出的逻辑函数。您需要在 calcOutputError 中包含以下内容

```
// Logistic transfer function for hidden layer. 
for (int k = 0; k < hiddenUnits; ++k) {
    hiddenUnitNodeValue[k] = logistic(hiddenUnitNodeValue[k]);
} 
```

和

```
// Softmax transfer function for output layer.
sum = 0;
for (int j = 0; j < 4; ++j) {
    out[j] = logistic(out[j]);
    sum += out[j];
}
for (int j = 0; j < 4; ++j) {
    out[j] = out[j] / sum;
} 
```

逻辑函数在哪里

```
public double logistic(double x){
    return (1/(1+(Math.exp(-x)));
} 
```

请注意，softmax 传递函数为您提供总和为 1 的输出，因此它们可以解释为概率。

此外，您对输出层的误差梯度的计算不正确。它应该只是

```
for (int i = 0; i < 4; ++i) {
    error[i] = (expectedOutput[i] - out[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:52:25.630

我没有测试过你的代码，但我几乎可以肯定你从大权重开始。大多数关于该主题的介绍都将其保留为“使用随机值初始化权重”，而忽略了算法对于某些起始值实际上是发散的（转到 Inf）。

尝试使用较小的起始值，例如在 -1/5 和 1/5 之间并将其缩小。

并且另外做一个矩阵乘法的方法，你（只）使用了 4 次，更容易看出那里是否有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:31:15.417

我在处理灰度图像的神经网络中遇到了类似的问题。你有 960 个输入值，范围在 0 到 255 之间。即使初始权重很小，你最终也会给神经元输入一个非常大的量级，并且反向传播算法会卡住。

尝试将每个像素值除以 255，然后再将其传递到神经网络。这对我有用。仅仅从极小的初始权重开始是不够的，我相信由于评论中提出的浮点精度问题。

正如另一个答案中所建议的那样，测试您的算法的一个好方法是查看您的网络是否可以学习像 XOR 这样的简单函数。

对于它的价值，隐藏层中的 3 个神经元对于我的目的来说已经足够了（识别面部图像的性别）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T17:11:38.927

我写了一个全新的神经网络库，它可以工作。可以肯定的是，在我之前的尝试中，我错过了使用传递函数及其导数的想法。谢谢你们！

# c++ - 在 C++ 中返回对 istream 的引用

> ID：11991657
> 
> 赞同：2
> 
> 时间：2012-08-16T16:30:00.947
> 
> 标签：c++, reference, istream

我在 Accelerated C++ 上阅读了这篇文章。这是一个简化版本。

```
istream& read_hw(istream& in, Student_info& s)
{    
    in >> s.name >> s.midterm >> s.final;
    return in;
} 
```

然后，我们可以将函数调用为：

```
Student_info s;
read_hw(cin, s); 
```

我的问题是，

1.  返回对 istream 的引用有什么意义？由于这两个参数都是通过引用传递的；
2.  在调用函数时，我们似乎并不关心返回值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T16:33:40.127

你应该阅读下一段：

> 返回流允许我们的调用者写入
> 
> ```
> if (read_hw(cin, homework)){/*...*/} 
> ```
> 
> 作为缩写
> 
> ```
> read_hw(cin, homework);
> if (cin) {/*...*/} 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:34:53.513

返回对的引用`istream`启用级联。例如：

```
int i, j;
std::cin >> i >> j;
// Equivalent to std::cin.operator>>(i).operator>>(j); 
```

`istream::operator>>()`返回`istream&`，以便级联`>>`工作。

# html - 向左浮动：长文本使其分崩离析

> ID：11991658
> 
> 赞同：1
> 
> 时间：2012-08-16T16:30:01.890
> 
> 标签：html, css

我想要这个结果：

```
LEFT THING, not fixed    here comes a text, which is 100% widthed in this "column"
width (content itself    but my problem is, when its too long, this column goes under the
determines that)         left column, so not left floated. I also want this text go and
                         go under and under, but normally, THIS LINE would continue under
                         the left column, which I dont want to. Its like table element
                         but its still considered bad for this situations :/ 
```

DIV结构：

```
<div style="float: left">LEFT THING</div>
<div style="float: left">here comes a text, which...</div> 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:38:27.753

浮动元素`width: auto`的大小使用[收缩匹配算法](https://www.w3.org/TR/CSS21/visudet.html#shrink-to-fit-float)。也就是说，他们试图根据内容的需要增长。

为避免这种情况，您应该限制宽度，例如通过使用 设置显​​式`width`或上限`max-width`。

然后，为了使后面的块增长以填充剩余空间，您应该让它具有默认值`float: none`and `width: auto`，并建立一个块格式化上下文（BFC）以防止它与浮动重叠。

```
.wrapper, .main {
  overflow: hidden; /* Establish Block Formatting Context */
}
.left {
  float: left;
  max-width: 30%; /* Prevent it from growing too wide */
} 
```

```
<div class="wrapper">
  <div class="left">...</div>
  <div class="main">...</div>
</div> 
```

```
.wrapper, .main{
  overflow: hidden; /* Establish Block Formatting Context */
  text-align: justify;
}
.left {
  float: left;
  max-width: 30%; /* Prevent it from growing too wide */
  border: 1px solid blue;
}
.main {
  border: 1px solid red;
}
```

```
<div class="wrapper">
  <div class="left">LEFT THING LEFT THING LEFT THING LEFT THING</div>
  <div class="main">here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which... here comes a text, which...</div>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:32:39.627

为您的元素添加宽度以使其浮动，然后将获得所需的结果。

**演示：http:** [//jsfiddle.net/q8SfB/1](http://jsfiddle.net/q8SfB/1)

# windows-7 - Strange Inno Setup behavior with networked / shared resources

> ID：11991659
> 
> 赞同：0
> 
> 时间：2012-08-16T16:30:08.567
> 
> 标签：windows-7, network-programming, 64-bit, inno-setup

I have a puzzling situation with the Inno Setup FileExists function.

Here's the situation. I have three networked computers with like WORKGROUP names. 1) Windows 7 32-bit 2) Windows 7 64-bit 3) Window XP Service Pack 3

1) and 3) have been setup as servers with read-write shares, ex. ShareExe and ShareData

The problematic Inno Setup creates shortcuts to the executable in the ShareExe folder. It asks the user for the ComputerName of the server and then uses FileExists to verify correct input.

Running this setup on the XP (3) machine and specifying 1)'s computername works just fine, however when running the setup on the Win7 64-bit PC and specifying the same ComputerName as with XP, causes the FileExtsts test to fail.

Strangely, I can go to Network Places and open the ShareExe folder and successfully run the executable. My question is, "why does Inno FileExists fail only on the Win 7 64-bit machine?" I cannot find anything in the reference materials that suggest any version differences with FileExists. (I also tried FileSearch with the same results).

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:49:38.400

在启用了 UAC 的 Windows 7（和 Vista）中，默认情况下网络凭据和驱动器映射不会在管理员和非管理员上下文之间共享，即使对于同一用户也是如此。

默认情况下，Inno 提升为管理员权限（通过`PrivilegesRequired=admin`），因为大多数安装必须（并且应该）由管理员用户在每台机器上执行。但是，这意味着浏览器在浏览桌面时提示或保存的任何凭据都对其不可用。

当文件由 API 直接访问时（与 FileExists 一样），Windows 通常会尝试使用与登录 PC 相同的用户名/密码以静默方式连接到服务器；如果失败，那么它只会报告一个错误，因为此时它无法提示输入备用凭据。因此，如果您可以确保两台 PC 上的登录详细信息相同，那么它应该可以工作。（您通常在连接到域而非工作组的计算机上免费获得此功能。）

如果这不可能，那么您可以尝试的其他方法是通过 shell 对话框强制访问 - 如果 FileExists 失败，则使用`GetOpenFileName`相同的初始路径提示用户在该文件夹中查找特定文件. 我没有对此进行测试，但我认为这应该会导致 Windows 显示凭据提示，然后你应该就可以了。

（如果这是针对内部应用程序，那么另一种选择是完全禁用凭据分离 [通过安全策略设置] 或 UAC，尽管后者并不是一个好主意。当然这对于一个通用发布应用程序，如果您以其他方式之一解决它，它会更干净。）

# vim - 在 Vim 中进入文件夹的命令行补全

> ID：11991665
> 
> 赞同：2
> 
> 时间：2012-08-16T16:31:05.883
> 
> 标签：vim, autocomplete

当我这样做`:edit C:\`并保持制表符时，vim 将循环浏览所有文件和文件夹。当我想进入一个文件夹时，我想我可以按Ctrl-E。但只是偶然，我在要输入的文件夹后输入了另一个反斜杠，例如`:edit C:\Documents\\`. 这似乎也有效。现在，如果我点击选项卡，vim 开始循环浏览 C:\Documents 中的文件/文件夹。

我想知道这背后的原因是什么。任何人都可以指出我在参考手册中充分解释了这种行为吗？是否存在更好的方法来停止当前目录中的完成并在另一个目录中启动命令行完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:01:48.340

但是，当您在完成期间修改文本（例如，插入反斜杠）时，没有记录，vim 只会自动完成字符串的**其余部分。**这是因为它以当前条目为基础开始了一个新的完成周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:45:52.200

我使用这个映射，类似于结束插入模式完成：

```
" c_CTRL-Y      Yes: Stop wildmode completion. Useful when completing
"           directory names and wanting to use the currently
"           completed directory and now complete its contents,
"           instead of continuing to iterate the directory names.
cnoremap <C-Y> <Space><BS> 
```

但是当您位于命令行末尾时，Ctrl-E 也可以正常工作。

# c - hwnd 到 ppm 问题

> ID：11991675
> 
> 赞同：0
> 
> 时间：2012-08-16T16:31:47.613
> 
> 标签：c, winapi, hwnd, ppm, getdibits

我有一个将 hwnd 保存到 ppm 文件中的功能。这个函数的灵感来自一个 msdn 示例。msdn 示例和我的函数都可以工作，但是......我有一个问题......

但首先，这是功能。

```
int CaptureAnImage(HWND hWnd)
{
    HDC hdcWindow;
    HDC hdcMemDC = NULL;
    HBITMAP hbmScreen = NULL;
    RECT rc;
    BITMAPINFOHEADER   bi;

    DWORD dwBmpSize;
    HANDLE hDIB;
    char *lpbitmap;
    int w, h;
    FILE *f;

    // Retrieve the handle to a display device context for the client 
    // area of the window. 
    hdcWindow = GetDC(hWnd);

    // Create a compatible DC which is used in a BitBlt from the window DC
    hdcMemDC = CreateCompatibleDC(hdcWindow); 
    if(!hdcMemDC) {
        MessageBox(hWnd, "CreateCompatibleDC has failed","Failed", MB_OK);
        goto done;
    }

    // Get the client area for size calculation
    GetClientRect(hWnd, &rc);
    w = rc.right - rc.left;
    h=rc.bottom-rc.top;

    // Create a compatible bitmap from the Window DC
    hbmScreen = CreateCompatibleBitmap(hdcWindow, w, h);
    if(!hbmScreen) {
        MessageBox(hWnd, "CreateCompatibleBitmap Failed","Failed", MB_OK);
        goto done;
    }

    // Select the compatible bitmap into the compatible memory DC.
    SelectObject(hdcMemDC,hbmScreen);

    // Bit block transfer into our compatible memory DC.
    if(!BitBlt(hdcMemDC, 
               0,0, 
               w, h, 
               hdcWindow, 
               0,0,
               SRCCOPY)) {
        MessageBox(hWnd, "BitBlt has failed", "Failed", MB_OK);
        goto done;
    }

    bi.biSize = sizeof(BITMAPINFOHEADER);    
    bi.biWidth = w;    
    bi.biHeight = h;  
    bi.biPlanes = 1;    
    bi.biBitCount = 24;    
    bi.biCompression = BI_RGB;    

    bi.biSizeImage = 0;  
    bi.biXPelsPerMeter = 0;    
    bi.biYPelsPerMeter = 0;    
    bi.biClrUsed = 0;    
    bi.biClrImportant = 0;

    dwBmpSize = w*bi.biBitCount*h;

    // Starting with 32-bit Windows, GlobalAlloc and LocalAlloc are implemented as wrapper functions that 
    // call HeapAlloc using a handle to the process's default heap. Therefore, GlobalAlloc and LocalAlloc 

    // have greater overhead than HeapAlloc.
    hDIB = GlobalAlloc(GHND,dwBmpSize); 
    lpbitmap = (char *)GlobalLock(hDIB);    

    // Gets the "bits" from the bitmap and copies them into a buffer 
    // which is pointed to by lpbitmap.
    GetDIBits(hdcWindow, hbmScreen, 0,
        (UINT)h,
        lpbitmap,
        (BITMAPINFO *)&bi, DIB_RGB_COLORS);

    f = fopen("./test.ppm", "wb");
    if (!f) {
        fprintf(stderr, "cannot create ppm file\n");
    goto done;
    }
    fprintf(f, "P6\n%d %d\n255\n", w, h);
    fwrite((LPSTR)lpbitmap, dwBmpSize, 1, f);
    fclose(f);

    //Unlock and Free the DIB from the heap
    GlobalUnlock(hDIB);    
    GlobalFree(hDIB);

    //Clean up
done:
    DeleteObject(hbmScreen);
    DeleteObject(hdcMemDC);
    ReleaseDC(hWnd,hdcWindow);

    return 0;
} 
```

所以这是生成的图像：

[http://imageshack.us/photo/my-images/853/test2ne.jpg/](http://imageshack.us/photo/my-images/853/test2ne.jpg/)

如您所见，宽度大小存在问题。也许是因为窗口的边框？如果在代码中，我更改“w = rc.right - rc.left;” 变成“w = rc.right - rc.left - 10;”，这样更好。但我不明白为什么我必须放“-10”并且......图片右侧缺少一些像素（可能是10像素？）

[http://imageshack.us/photo/my-images/207/test3jq.jpg](http://imageshack.us/photo/my-images/207/test3jq.jpg)

最后一个问题：有什么方法可以要求 GetDIBits 函数将我的字节倒序排列？我不想逐个像素地复制，因为它会花费一些 cpu 时间。（好吧，你可能会说，既然我将这个文件保存到磁盘，那么我不应该担心cpu时间，但我的目标不是将这张图片保存到磁盘。我这样做只是为了调试）

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:46:17.803

您的问题是DIB 中的每一行图像数据必须是DWORD 对齐的（即对齐4 个字节的倍数）。

```
dwBmpSize = w*bi.biBitCount*h; 
```

这实际上应该是：

```
dwBmpSize = ((w*bi.biBitCount+3)&~3) *h; 
```

然后，您必须在编写 PPM 文件时考虑到这一点。

此外，图像是上下颠倒的，因为默认情况下 DIB 是“自下而上”（第 0 行位于底部）。要使其“自上而下”，请将 biHeight 字段设置为负值。

# rest - web2py 可以通过 parse_as_rest 提供多对多表的 REST 数据吗？

> ID：11991678
> 
> 赞同：0
> 
> 时间：2012-08-16T16:32:05.370
> 
> 标签：rest, many-to-many, web2py

我需要提供有关多对多关系的 REST 数据。我一直在玩 web2py 的可爱 parse_as_rest 功能，但不能完全让多对多的东西工作。

例如，让我们以标准用户和组为例。

表：

1.  用户
    *   ID
    *   用户名
2.  团体
    *   ID
    *   团队名字
3.  会员资格
    *   ID
    *   用户身份
    *   group_id

我需要使用什么模式来提供一个 url，它将为我提供用户所属的所有 group_name？

```
patterns = [
"/user[user]",
"/user[user]/id/{user.id}",
"/user[user]/id/{user.id}/membership[membership.user_id]",

# This is the line that I can't make yet:
#"/user[user]/id/{user.id}/membership[membership.user_id]/group<WHAT GOES HERE>",

"/group[group]",
"/group[group]/id/{group.id}",
]
parser = db.parse_as_rest(patterns, args, vars) 
```

使用上面未注释的行，我可以访问这些网址：

1.  .../用户
2.  .../用户/ID/1
3.  .../user/id/1/membership
4.  .../团体
5.  .../group/id/3

URL #3 显示了我所有的成员资格，然后我可以对 URL #5 进行多次单独调用以获取 group_name 值，但必须有一种方法可以通过一次调用来完成此操作。

帮助我 StackOverflow！你是我唯一的希望。

编辑：修复了错误的剪切和粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T22:19:30.587

这个问题在谷歌搜索该主题的顶部。

只需开始从多对多表构建查询。

```
/user[membership]/id/{membership.user_id}/groups[group.id] 
```

对于此请求，您实际上并不需要“用户”表。

然后请求“/user/id/22/groups”将为您提供所有组，而不仅仅是他们的 ID。

# asp.net - 如何从母版页动态设置 SiteMapNode 标题？ASP.NET

> ID：11991685
> 
> 赞同：0
> 
> 时间：2012-08-16T16:32:35.383
> 
> 标签：asp.net, master-pages, sitemap, sitemapnode

在我的 Web.sitemap 中，我有以下内容：

```
<siteMapNode url="~/Groups/ViewGroups.aspx" urlRoute="groups/{PostId}/{PostTitle}" />
</siteMapNode> 
```

在我的 MasterPage 中，我实现了**ItemDataBound**事件来尝试设置动态实现母版页的每个页面的标题，但由于某种原因没有设置标题。

```
protected void SiteMapPath1_ItemDataBound(object sender, SiteMapNodeItemEventArgs e)
{
    string CurrentNodeTitle = GetTitleFromDatabase();

    if (e.Item.ItemType == SiteMapNodeItemType.Current) {
         e.Item.SiteMapNode.Title = CurrentNodeTitle;
    }
} 
```

如果我在**那么它工作得很好但是当我使用**e.Item.SiteMapNode.Title = CurrentNodeTitle;** 标题未定。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T11:16:21.673

在 Web.sitemap 中，您必须在 Title someting like % vble %，如果此值是文字，则不会应用任何更改**

# sql-server - SQL Server Express - 工作和维护支持？

> ID：11991688
> 
> 赞同：2
> 
> 时间：2012-08-16T16:32:58.583
> 
> 标签：sql-server, visual-studio-2010, sql-server-2008, deployment

我的笔记本电脑上安装了 SQL Server 2008 Developer 版本。它有很多工作和东西，所以我只是想知道，如果我在我的客户端上安装 SQL Server 2008 Express 版本，它是否能够执行工作？如果是这样，它是否像开发人员版本一样正常执行，还是我必须使用它执行/执行一些其他操作。

主要的是，在我的数据库中，我有这个维护计划，它做了 3 件事：-

1.  每月进行一次完整备份
2.  需要一个差异。每 15 天备份一次
3.  每 15 天进行一次日志备份。
4.  每 2 个月重建所有索引。

所以，主要是我关心这个，我的开发者版可以做到这一点，但是如果我在客户端安装快速版，它可以做到吗？如果是这样，我是否必须配置一些特殊的东西？

还有一件事，如果我的数据库（具有我在上一段中编写的维护计划的那个）是`myData.mdf`，并且假设在 Visual Studio 中我为我的应用程序创建了一个安装项目，并`SQL Server Express`使用它进行引导（通过单击`Download prerequisites from the same location as my application`先决条件对话框) 并假设我`myData.mdf`在`Data`我的应用程序的文件夹中，并且每次都与项目一起输出。*这些作业/维护计划会像所有表和存储过程一样保留在我的数据库中，还是会被删除？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:47:02.797

看看这篇文章[http://msdn.microsoft.com/en-us/library/ms365248(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms365248(v=sql.100).aspx)

在部分中： **SQL Server Express 中不支持的 SQL Server 功能**

它说：

> 《SQL Server 代理和 SQL Server 代理服务》

您可以使用一些替代方法进行备份。例如：[http](http://sqlbackupandftp.com/) ://sqlbackupandftp.com/ 。他们提供有一些限制的免费版本。

如果您想使用 Windows 计划任务和 SQL 脚本，请查看以下内容：[如何使用 SQL Server Express 计划每日备份？](https://stackoverflow.com/questions/487675/how-can-i-schedule-a-daily-backup-with-sql-server-express)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:51:19.330

Express Edition 不这样做，但编写一些脚本来完成这些任务并让 Windows 任务计划程序为您运行它们是微不足道的。

就第二部分而言，最简单的找出方法可能就是尝试将其加载到 SQL Express 中，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:41:43.670

[在http://ola.hallengren.com](http://ola.hallengren.com)上查看 Ola Hallengren 的解决方案

It can be used with the windows task scheduler as in his FAQ - "You can use cmd files and Windows Scheduled Tasks instead" at [http://ola.hallengren.com/frequently-asked-questions.html](http://ola.hallengren.com/frequently-asked-questions.html)

# ruby-on-rails - Ruby 版本未在 Heroku 上升级

> ID：11991689
> 
> 赞同：3
> 
> 时间：2012-08-16T16:32:59.517
> 
> 标签：ruby-on-rails, heroku

我已在 heroku 上将我的应用程序从 ruby​​ 1.9.2 升级到 ruby​​ 1.9.3。

我关注了关于 heroku 的文章： [https ://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

当我部署我的应用程序时，我没有收到任何错误：

```
> -----> Ruby/Rails app detected
> -----> Using Ruby version: ruby-1.9.3
> -----> Installing dependencies using Bundler version 1.2.0.rc.2 Running: bundle install --without development:test --path
> vendor/bundle --binstubs bin/ --deployment Fetching gem metadata from
> http://rubygems.org/....... Fetching gem metadata from
> http://rubygems.org/.. Using rake (0.9.2.2) Using i18n (0.6.0)
> ..............
> -----> Discovering process types Procfile declares types -> worker Default types for Ruby/Rails -> console, rake, web
> -----> Compiled slug size is 27.0MB
> -----> Launching... done, v157 http://riskyshower.herokuapp.com deployed to Heroku 
```

但是应用程序无法正常启动，如果我跟踪日志，我会看到以下内容：

```
2012-08-16T10:21:26+00:00 heroku[router]: Error H10 (App crashed) -> GET my_domain.me/ dyno= queue= wait= service= status=503 bytes=
2012-08-16T10:21:27+00:00 heroku[router]: Error H10 (App crashed) -> GET my_domain.me/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

我无法获得更多信息来告诉我出了什么问题，但我猜 Ruby 没有正确升级，因为当我这样做时：

```
heroku run "ruby -v"
Running ruby -v attached to terminal... up, run.1
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux] 
```

当它应该是 1.9.3

在我的 Gemfile 顶部，我有：

```
source 'http://rubygems.org'
ruby '1.9.3' 
```

我正在使用最新版本的捆绑器：

```
bundle -v
Bundler version 1.2.0.rc.2 
```

我猜我有正确的红宝石路径（如文章中所示）：

```
heroku config -s | grep PATH
PATH=vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin:bin 
```

关于我应该运行什么来强制升级到 Ruby 1.9.3 的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:10:17.177

我没有仔细阅读文档。

我的heroku PATH 是

```
vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin 
```

文档说：

> 如果不存在或不是第一个条目，请使用 heroku config:add 将 bin: 添加到配置中。$ heroku config:add PATH=bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin

不是第**一个条目**（不像我想的那样简单地*存在*），显然我需要在 PATH 前面添加“bin”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:24:32.473

你确定你在 Cedar 堆栈上吗？我相信这是在 Heroku 上设置 Ruby 版本的唯一方法。如果没有，切换到 Cedar 堆栈可能会解决您的问题。

# r - 在具有预测变量列表的数据帧上使用 R 的 lm

> ID：11991692
> 
> 赞同：18
> 
> 时间：2012-08-16T16:33:13.353
> 
> 标签：r

我有一个数据框，比如说 N+2 列。第一个只是日期（主要用于稍后绘制），第二个是一个变量，它对我想要计算的剩余 N 列的响应。我想一定有类似的东西

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
fit = lm(y~df[,2:3],data=df) 
```

这行不通。我也尝试过但失败了

`fit = lm(y~sapply(colnames(df)[2:3],as.name),data=df)`

有什么想法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-16T16:37:10.570

使用公式表示法`y ~ .`指定您要对数据集中所有其他变量的 y 进行回归。

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
# fits a model using x1 and x2
fit <- lm(y ~ ., data = df) 
# Removes the column containing x1 so regression on x2 only
fit <- lm(y ~ ., data = df[, -2]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-17T10:32:32.657

Dason 的答案有另一种选择，当您想按名称指定要排除的列时。它是使用`subset()`, 并指定`select`参数：

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
fit = lm(y ~ ., data = subset(df, select=-x1)) 
```

尝试使用`data[,-c("x1")]`失败，“一元运算符的参数无效”。

它可以扩展到排除多列：`subset(df, select = -c(x1,x2))`

您仍然可以使用数字列：

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
fit = lm(y ~ ., data = subset(df, select = -2)) 
```

（这相当于`subset(df, select=-x1)`因为`x1`是第二列。）

当然，您也可以使用它来指定要*包含*的列。

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
fit = lm(y ~ ., data = subset(df, select=c(y,x2)) ) 
```

`lm(y ~ x2, df)`（是的，例如，如果您当时打算使用，这相当于但不同`step()`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-10T19:09:01.883

我对 R 相当陌生，但我找到了另一种方法来为数据框中的命名列执行此操作。假设您想使用除 column 之外的所有列运行回归`x2`，那么您将编写：

```
df = data.frame(y = 1:10, x1 = runif(10), x2 = rnorm(10))
# Removes the column containing x2 so regression on x1 only
model <- lm(Y ~ . - x2, data = df)
# to remove more columns (assuming there were more columns in the data frame)
model <- lm(Y ~ . - x2 - x3 - x4, data = df) 
```

其余的答案都很老了，所以也许这是一个新功能，但它很整洁！

# map - 为什么绑定会影响我的地图类型？

> ID：11991694
> 
> 赞同：16
> 
> 时间：2012-08-16T16:33:17.737
> 
> 标签：map, clojure, language-implementation

我在 REPL 中玩耍时遇到了一些奇怪的行为：

```
Clojure 1.4.0
user=> (type {:a 1})
clojure.lang.PersistentArrayMap
user=> (def x {:a 1})
#'user/x
user=> (type x)
clojure.lang.PersistentHashMap 
```

我认为所有小的文字映射都是 的实例`PersistentArrayMap`，但如果它与 . 绑定，显然情况并非如此`def`。为什么 using`def`会导致 Clojure 为我的小地图选择不同的表示形式？我知道这可能只是一些奇怪的实现细节，但我很好奇。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T06:33:36.300

这个问题让我深入研究了 Clojure 源代码。为了弄清楚这一点，我只花了几个小时将打印语句放入源代码中。

### 事实证明，这两个映射表达式是通过不同的代码路径评估的

`(type {:a 1})`导致发出并运行 Java 字节码。发出的代码用于`clojure.lang.RT.map()`构造为小地图返回**PersistentArrayMap**的地图：

```
static public IPersistentMap map(Object... init){
    if(init == null)
        return PersistentArrayMap.EMPTY;
    else if(init.length <= PersistentArrayMap.HASHTABLE_THRESHOLD)
        return PersistentArrayMap.createWithCheck(init);
    return PersistentHashMap.createWithCheck(init);
} 
```

`(def x {:a 1})`至少从 REPL进行评估时，不会发出字节码。常量映射被解析为**PersistentHashMap**，`clojure.lang.Compiler$MapExpr.parse()`其中返回它在 a 中扭曲它`ConstantExpr`：

```
else if(constant)
{
IPersistentMap m = PersistentHashMap.EMPTY;
for(int i=0;i<keyvals.length();i+= 2)
    {
    m = m.assoc(((LiteralExpr)keyvals.nth(i)).val(), ((LiteralExpr)keyvals.nth(i+1)).val());
    }
//System.err.println("Constant: " + m);
return new ConstantExpr(m);
} 
```

`def`评估时的表达式绑定`ConstantExpr`上面创建的值，如前所述，它是**PersistentHashMap**。

### 那么为什么要这样实现呢？

我不知道。这可能是简单的疏忽，或者 PersistentArrayMap 优化可能并不值得。

# jquery - jQuery 范围，.each

> ID：11991695
> 
> 赞同：0
> 
> 时间：2012-08-16T16:33:18.967
> 
> 标签：jquery, each

更多帮助，不同的问题。我想从内部循环返回 allLessonsArray，但由于某种原因它没有到达循环函数之外。我已经注意到它在哪里起作用，在哪里不起作用。我如何将其返回到外部？

```
var allLessonsArray= new Array();
$.each(lessonInTopicSectionArray, function(index, lesson){       
    var lastAttempt = 0;
    url='domain/learn/mod/lesson/report.php?id='+lesson.id+'&action=reportdetail&userid='+userid+'&try='+lastAttempt;
    $.get(url, function(data) {
        var lessonArray= new Array();
        $(data).find('tr.r1.lastrow td.cell.c0')
        .each(function(index, content) {
            var string=jQuery(content).html()
            score=parseInt(string.substr(string.length - 1));
            lessonArray[index]=score;   
        }); 
        allLessonsArray[index]={name:lesson.name, score: lessonArray};
        //This works.
        alert(allLessonsArray[0].name);
        alert(allLessonsArray[0].score[0]);     
    });
    //This doesn't work.
    alert(allLessonsArray[0].name);
    alert(allLessonsArray[0].score[0]);
});
return allLessonsArray; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:34:44.260

***[`$.get()`](http://api.jquery.com/get)***是一个***AJAX***即。一个异步请求，所以你不能随心所欲地这样做。

你可以做：

```
var allLessonsArray= new Array();
$.each(lessonInTopicSectionArray, function(index, lesson){       
    var lastAttempt = 0;
    url='http://www.training-source.org/learn/mod/lesson/report.php?id='+lesson.id+'&action=reportdetail&userid='+userid+'&try='+lastAttempt;
    $.get(url, function(data) {
        var lessonArray= new Array();
        $(data).find('tr.r1.lastrow td.cell.c0')
        .each(function(index, content) {
            var string=jQuery(content).html()
            score=parseInt(string.substr(string.length - 1));
            lessonArray[index]=score;   
        }); 
        allLessonsArray[index]={name:lesson.name, score: lessonArray};

         // check length to ensure that full array will return
        if( allLessonsArray.length === lessonInTopicSectionArray.length )
           reciever(allLessonsArray);

    });
});

function receiver(allLessonsArray){
  console.log(allLessonsArray);
} 
```

# algorithm - 图像插值（双三次或双线性）。如果没有相邻像素怎么办？

> ID：11991701
> 
> 赞同：4
> 
> 时间：2012-08-16T16:33:58.903
> 
> 标签：algorithm, interpolation

由于 JavaScript 中没有本地插值实现（除了最近邻），我正在尝试制作自己的方法。但是考虑到双三次（或双线性）插值需要相邻像素（16 或 4），我应该如何处理不需要相邻数量的边缘像素？我应该忽略它们吗？但是插值公式需要所有像素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T19:21:22.053

重复最近的像素。

不要使用白色或黑色，因为这会分别在边缘引入较浅或较深的阴影。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:51:32.727

如果一侧没有邻居，则为外推。如果你想推断： [http ://en.wikipedia.org/wiki/Extrapolation](http://en.wikipedia.org/wiki/Extrapolation)

它由拉格朗日插值完成： [http ://en.wikipedia.org/wiki/Lagrange_interpolation](http://en.wikipedia.org/wiki/Lagrange_interpolation)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T16:38:30.873

通常，您为虚构的边缘像素构成一个值。

最简单的方法是将所有边缘像素设置为白色或黑色，但很容易将它们设置为最近的真实像素的颜色。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-17T16:08:02.073

想提供我的贡献，即使这个问题是很久以前提出的。

就像 Kendall 所说，您通常根据附近的值来构成点/像素的值。您应该如何执行此操作取决于您选择的插值。更具体地说，它由您的方法的插值多项​​式的阶数决定。对于OP提到的方法，这些方法如下：

*   最近邻插值是0阶多项式。函数本身是不连续的（包含跳跃），即：其[平滑度](https://en.wikipedia.org/wiki/Smoothness#Differentiability_class)为C^0；
*   线性插值是一阶多项式。该函数是连续的（没有跳跃），但它的导数不是。
*   对于（双）三次插值，使用的多项式是 2 阶的；函数及其一阶导数是连续的（这确实是该方法所基于的标准）。这是“真”函数的三阶近似；O(h^3)。

遇到边缘问题时，您将需要使用与您选择的算法相同的近似值来推断鬼点的值。对于 OP 要求的（双）立方情况，如下所示。假设这`[x1 x2 x3 x4 x5]`是您的输入值；您将要计算`x0`为：

`x0 = 3*x1 - 3*x2 + x3`并且，类似地：`x6 = 3*x5 - 3*x4 + x3`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T19:28:09.637

根据 Don Lancaster 的文章“A Review of Some Image Pixel Interpolation Algorithms”（[链接](http://tinaja.com/glib/pixintpl.pdf)），替换最接近的已知值是解决问题的公认方法。这篇文章建议（ab）使用线性插值来推断值作为替代方案 - 不过，我个人在应用最近邻补全后发现结果更符合我的喜好。

# caption - 如何结合 lightbox2 显示 rhinoslider 字幕？

> ID：11991704
> 
> 赞同：0
> 
> 时间：2012-08-16T16:34:07.020
> 
> 标签：caption, lightbox2, captions

我有一个可以正常工作的 rhinoslider 和 lightbox2。图像滑动，但也可点击，当点击漂亮的 lightbox2 时弹出。但由于某种原因，当其他链接位于滑块上方时，滑块中的标题不会显示。

我的代码：

```
<ul id="slider"><a href="images/1big.jpg" rel="lightbox[roadtrip]" title="test"><li><img src="images/1.jpg" alt="" title="test" /></li></a> </ul> 
```

有谁知道为什么字幕不显示？有没有办法解决这个问题？

[http://rhinoslider.com/](http://rhinoslider.com/)
[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:43:40.793

首先，您应该修复您的标记。

```
<ul id="slider">
    <li>
        <a href="images/1big.jpg" rel="lightbox[roadtrip]" title="test">
            <img src="images/1.jpg" alt="" title="test" />
        </a>
    </li>
</ul> 
```

如果之后字幕不起作用，请确保您在 Rhinoslider 的设置中启用了它们。

如果它们仍然不起作用，请尝试手动设置字幕：[http ://rhinoslider.com/tricks/html-captions/](http://rhinoslider.com/tricks/html-captions/)

# c# - 如何在 WPF MVVM 的列表中绑定变量？

> ID：11991706
> 
> 赞同：1
> 
> 时间：2012-08-16T16:34:11.200
> 
> 标签：c#, wpf, mvvm, binding

我有一个未知的变量列表，希望绑定到 WPF 应用程序中的特定控件。有没有办法将列表中的变量绑定到特定名称？

这是我正在尝试做的代码示例。

C＃

```
public class Variable {
    public string Name {get;set;}
}

public class VariableViewModel : INotifyPropertyChanged {
    Variable _variable;
    public Variable Variable {
        get {
            return(_variable);
        }
        set {
            _variable = value;
            if(PropertyChanged != null) {
                PropertyChanged(this, new PropertyChangedEventArgs("Variable"));
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

public class VariableListViewModel {
    public ObservableCollection<VariableViewModel> VariableList { get; set; }

    public VariableListViewModel() {
        VariableList = new ObservableCollection<VariableViewModel>();
        var variableViewModel = new VariableViewModel { 
            Variable = new Variable { Name = "my_variable_name" } 
        };
        VariableList.Add(variableViewModel);
    }
} 
```

WPF：

```
<Window>
    <Window.DataContext>
        <local:VariableListViewModel />
    </Window.DataContext>

    <StackPanel>
        <Label Content="{Binding Path=Name, ElementName=my_variable_name}" />
    </StackPanel>
</Window> 
```

这里的标签显然是错误的。我的问题是我想要实现的目标是否可行？我希望能够显示“my_variable_name”。

-斯图尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:38:44.613

您通常会使用[ListView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx)（或其他`ItemsControl`），并将其绑定`ItemsSource`到您的集合（`VariableList`）。

这将导致显示每个项目 (a `VariableViewModel`)。然后，您将使用 a[`DataTemplate`](http://msdn.microsoft.com/en-us/library/ms742521.aspx)使`VariableViewModel`显示为绑定到 的标签`Variable.Name`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:43:06.273

您可以使用 a`ValueConverter`并使用它的 ConverterParameter 来传递变量的名称：

```
public object ConvertTo(object value, Type targetType, object parameter, CultureInfo culture)
{
    var variableList = (IEnumerable<Variable>)value;
    var variableName = parameter != null ? parameter.ToString() : string.Empty;
    return variableList.FirstOrDefault(v=>v.Name == variableName);
} 
```

然后，您可以在 XAML 中使用该转换器，如下所示：`

```
<Label Content="{Binding Path=ListOfVariables, 
                         Converter={StaticResource VariableConverter}, 
                         ConverterParameter='VariableName'}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:40:21.547

你的问题自相矛盾。

一方面你说你有一个未知的变量列表，另一方面你的视图知道它想要绑定哪些变量。

因此，您要么知道要绑定哪些变量，要么不知道。

## 场景 1：您知道要绑定哪些变量：

在 ViewModel 中为每个变量创建一个属性

## 场景 2：您不知道要绑定到哪些变量：

`VariableList`将您的属性绑定到`ItemsControl`视图中的 an 并提供`DataTemplate`可以呈现`VariableViewModel`.

* * *

顺便说一句：拥有一个`VariableViewModel`似乎是多余的。可以`Variable`直接使用。尤其是当一切`VariableViewModel`都回归`Variable`内部时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T19:19:21.687

基于 Reeds 解决方案和评论，这是我的最终解决方案。我使用了相同的模型和视图模型，所以我只会显示视图。

```
<Window>
    <Window.DataContext>
        <local:VariableListViewModel />
    </Window.DataContext>

    <Window.Resources>
        <DataTemplate x:Key="itemsControlDataTemplate">
            <Label x:Name="label" Content="{Binding Variable.Name}">
                <Label.Style>
                    <Style TargetType="{x:Type Label}">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <Trigger Property="Content" Value="my_variable_name">
                                <Setter Property="Visibility" Value="Visible" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>
            </Label>
        </DataTemplate>
    </Window.Resources>

    <StackPanel>
        <ItemsControl ItemTemplate="{StaticResource itemsControlDataTemplate}" ItemsSource="{Binding Path=VariableList}" />
    </StackPanel>
</Window> 
```

# wxpython - 如何从 objectlistview (wxpython) 中删除重复的项目？

> ID：11991707
> 
> 赞同：0
> 
> 时间：2012-08-16T16:34:13.590
> 
> 标签：wxpython, items, objectlistview

我是 wxpython 的新手（和 python 也是:)），我正在尝试为我做一个自定义程序并学习，但有些事情我不能做。我一直在寻找 Objectlistview 的示例，但没有那么多。[我从这里](http://www.blog.pythonlibrary.org/2012/06/20/wxpython-introduction-to-drag-and-drop/)复制/粘贴/编辑代码（最后一个例子），我想做这样的事情来避免重复的项目：

```
self.olv = ObjectListView(self, style=wx.LC_REPORT|wx.SUNKEN_BORDER)
...
self.olv.SetDropTarget(MyFileDropTarget(self))
self.setFiles()
self.RemoveDuplicated(self.olv)

def RemoveDuplicated(self, X):
    for all in X:
        Counter = 0
        for B in X:
            if X.path(A) == X.path(B):
                Counter += 1
            if (X.path(A) == X.path(B) and Counter >=2):
                 Counter += 1
                 RemoveObject(B) 
```

有什么想法或教程吗？先感谢您。

现在完成了：D，又是迈克。

```
 def __init__(self, window):
    """Constructor"""
    wx.FileDropTarget.__init__(self)
    self.window = window
    self.all_filenames = []

#----------------------------------------------------------------------
def OnDropFiles(self, x, y, filenames):
    """
    When files are dropped, update the display
    """
    self.entriesList = list()   # Actual dropped file entries; duplicates are avoided.
    self.haveEntries = False    # Tracks actual dropped file entries, but not help entries.

    self.RemoveDuplicated(self.all_filenames, filenames)
    self.all_filenames += filenames
    self.window.updateDisplay(filenames)

    print len(all_filenames) , len(filenames)

def RemoveDuplicated(self, X, Y):
    for A in X:
        for B in Y:
            if A == B:
                Y.remove(B) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:19:11.763

由于您添加到 ObjectListView 的内容基本上是对象或字典的列表，因此您可以在将小部件设置为这些值之前在该列表上运行重复数据删除过程。您可以使用 Python 的 set 函数加上[此处](https://stackoverflow.com/questions/3942303/how-does-a-python-set-check-if-two-objects-are-equal-what-methods-does-an-o)的解决方案来对对象进行重复数据删除。

有几个地方可以查找 ObjectListView 信息：

*   [http://wiki.wxpython.org/ObjectListView](http://wiki.wxpython.org/ObjectListView)
*   [http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/](http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/)
*   [http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)

# mysql - 为什么我的 find 子句不起作用？

> ID：11991710
> 
> 赞同：1
> 
> 时间：2012-08-16T16:34:17.553
> 
> 标签：mysql, cakephp, cakephp-2.1

我有三个模型：Company、Office、CompanyPersonTask。Company 模型有许多 Office 和许多 CompanyPersonTask。

那么，为什么是这段代码：

```
public function getCompaniesByRegion($region){
    $options['conditions'] = array("UPPER(Office.region) LIKE UPPER('".$region."%')");
    return $this->find('all', $options);   
} 
```

导致以下错误？

> “‘where 子句’中的未知列‘Office.region’”

该`region`列**存在**于`offices`表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:32:46.743

好像您已经在 with 之间指定了正确的关联`Company`关系`Office and CompanyPersonTask`。即`Company hasMany Office`和`Company hasMany CompanyPersonTask`。然后你可以把它写成： 在你的公司模型中写： public $actAs = array('Containable');

你的方法应该是：

```
class AppController extends Controller
{
     public $uses = array('Company', 'Office', 'CompanyPersonTask');

     protected function _getCompaniesByRegion($region){
         return $this->Company->find('all', array('contain' => 
                    array('Office' => array('conditions' => array("UPPER(Office.region) LIKE " => "UPPER('".$region."%')")))
                                                 )
                                    );
     }        
} 
```

您可以使用此方法将此方法调用到任何控制器中`$this->_getCompaniesByRegion($region_val);`

# asp.net-mvc-3 - 将 MVCMailer 与 ASPNETDB 一起使用

> ID：11991712
> 
> 赞同：1
> 
> 时间：2012-08-16T16:34:28.737
> 
> 标签：asp.net-mvc-3, sendmail, mvcmailer

我正在尝试设置 MVCMailer 以使用他们在网站注册时设置的电子邮件和用户 ID。我使用股票 MVC 框架来设置用户注册框架，因此 ASPNETDB.MDF DB 用于跟踪电子邮件用户 ID 和密码。我目前被困在如何从数据库中提取当前用户 ID 和电子邮件，以便 MVCMailer 知道将带有密码重置说明的电子邮件发送到哪里。下面是我尝试将数据从数据库中取出并放入发送邮件功能。我知道我错了，因为我在会员这个词下面有红色的波浪线。

```
public virtual MailMessage Welcome(string ADID)
        {
            var mailMessage = new MailMessage{Subject = "Welcome"};

            mailMessage.To.Add(membership.Email);
            ViewBag.Name = membership.UserId;
            PopulateBody(mailMessage, viewName: "Welcome");

            return mailMessage;
        } 
```

有谁知道如何做到这一点，我一直在寻找几个小时来了解如何在没有运气的情况下完成这一点。我看过的教程似乎都使用硬编码值来发送电子邮件。如果您需要任何其他代码，请告诉我，感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:50:39.607

您可以通过查询您的会员提供商来获取它：

```
public virtual MailMessage Welcome(string ADID)
{
    var mailMessage = new MailMessage{ Subject = "Welcome" };
    var user = Membership.GetUser();

    mailMessage.To.Add(user.Email);
    ViewBag.Name = user.UserName;
    PopulateBody(mailMessage, viewName: "Welcome");

    return mailMessage;
} 
```

另一种可能性是从控制器操作发送电子邮件，从而将有关当前连接用户的信息作为参数传递：

```
using Mvc.Mailer;

public class HomeController: Controller
{
    private readonly UserMailer _mailer = new UserMailer;

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult SendEmailToNewUser()
    {
        var user = Membership.GetUser();
        _mailer.Welcome(user.Email, user.UserName).Send();
        return View();
    }
} 
```

# html - 在 EC2 上使用 Apache 摆脱 .html

> ID：11991723
> 
> 赞同：1
> 
> 时间：2012-08-16T16:35:21.103
> 
> 标签：html, amazon-ec2

有没有一种简单的方法可以从 URL 命名空间中删除 .html？例如，如果我有`www.mywebsite.com/special.html`我该怎么做`www.mywebsite.com/special`

同样，我在 Amazon EC2 实例上使用 Apache。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:38:47.520

创建一个名为的目录并将`special`其放入其中`index.html`，并使用`special.html`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:42:17.263

把它放在你的`.htaccess`文件中：

```
RewriteEngine On
RewriteRule ^(.+)\.html$ /$1 
```

确保`mod_rewrite`已安装并`AllowOverride`包含`FileInfo`.

**编辑如何开始`mod_rewrite`工作：**

通常`mod_rewrite`已经自带apache，但有时需要通过命令启用

```
a2enmod rewrite 
```

该`AllowOverride`指令设置`.htaccess`文件的权限。对于`mod_rewrite`,`FileInfo`是必需的。要设置它，请更改您的 apache 配置文件（通常`/etc/httpd/conf/httpd.conf`）该行

```
AllowOverride None 
```

到

```
AllowOverride FileInfo 
```

或者

```
AllowOverride All 
```

# python - 覆盖 os.walk 以返回生成器对象作为第三项

> ID：11991731
> 
> 赞同：3
> 
> 时间：2012-08-16T16:35:54.587
> 
> 标签：python, os.walk

在检查效率的同时`os.walk`，我`6,00,000`使用字符串创建了文件`Hello <number>` *（其中 number 只是表示目录中文件编号的数字）*，例如目录中文件的内容如下所示：-

```
File Name | Contents
1.txt     | Hello 1
2.txt     | Hello 2
.
.
600000.txt|Hello 600000 
```

现在，我运行了以下代码：-

```
a= os.walk(os.path.join(os.getcwd(),'too_many_same_type_files')) ## Here, I am just passing the actual path where those 6,00,000 txt files are present
print a.next() 
```

* * *

我觉得的问题是`a.next()`需要太多时间和内存，因为`a.next()`将返回的第三项是目录中的文件列表*（其中有 600000 项）*。所以，我试图找出一种方法来降低空间复杂度*（至少）* ，方法是以某种方式`a.next()`返回一个生成器对象作为元组的第三项，而不是文件名列表。

降低空间复杂度是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:48:05.267

这是个好主意，这就是底层 C API 的工作方式！

如果您可以访问[readdir](http://linux.die.net/man/3/readdir)，则可以这样做：不幸的是，这不是由 Python 直接公开的。

[这个问题](https://stackoverflow.com/q/4403598/212858)显示了两种方法（都有缺点）。

一种更简洁的方法是用 C 编写一个模块来公开您想要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:00:10.143

正如人们已经提到的，一个目录中有 600,000 个文件是个坏主意。最初我认为由于您如何访问文件列表而确实没有办法做到这一点，但事实证明我错了。您可以使用以下步骤来实现您想要的：

1.  使用 subprocess or`os.system`调用`ls`or `dir`（无论你碰巧在什么操作系统上）。将该命令的输出定向到一个临时文件（比如`/tmp/myfiles`什么。在 Python 中有一个模块可以返回一个新`tmp`文件）。

2.  打开该文件以在 Python 中读取。

3.  文件对象是可迭代的，并且会返回每一行，所以只要你*只有*文件名，你就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:00:59.707

`os.walk` [在后台调用`listdir()`](http://svn.python.org/view/python/trunk/Lib/os.py?revision=77879&view=markup#l276)以检索根目录的内容，然后继续将返回的项目列表拆分为目录和非目录。

为了实现你想要的，你需要深入挖掘，不仅要实现你自己的版本，`walk()`还要实现一个[返回 generator](https://stackoverflow.com/questions/4403598/list-files-in-a-folder-as-a-stream-to-begin-process-immediately/4403746#4403746)[的替代方案`listdir()`](https://stackoverflow.com/questions/4403598/list-files-in-a-folder-as-a-stream-to-begin-process-immediately/4403746#4403746)。请注意，即使那样，您也无法为目录和文件提供独立的生成器，除非您对修改后的文件进行两次单独调用`listdir()`并即时过滤结果。

正如 Sven 在上面的评论中所建议的那样，解决实际问题（目录中的文件太多）而不是过度设计解决方案可能会更好。

# java - Ebean finder 返回 ExpressionList

> ID：11991734
> 
> 赞同：1
> 
> 时间：2012-08-16T16:36:15.087
> 
> 标签：java, playframework-2.0, ebean, web-development-server

我遵循了本教程：
[http ://www.playframework.org/documentation/2.0/JavaEbean](http://www.playframework.org/documentation/2.0/JavaEbean)

根据教程`Finder`应该返回一个`List<E>`.
我试过了，但它返回了`ExpressionList<E>`
我试图将它转换为`List<E>`但它失败了。

所以，教程一定是错的，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:43:26.210

我认为`findList()`函数应该最终使用以使其返回`List<E>`

# iphone - 距离日期还剩多少时间（午夜？）

> ID：11991735
> 
> 赞同：0
> 
> 时间：2012-08-16T16:36:16.270
> 
> 标签：iphone, objective-c, ipad, time, nsdate

我有一些代码可以计算出从今天到给定日期的时间，这个日期是用户从日期选择器中选择的日期。

我将在下面发布代码，但首先是我的问题。我有一个标签，它会根据所选日期之前的月份、日期、小时数等进行更新。但是，当它下降到所选日期的前一天时，它会变得很奇怪。

我会假设（可能是错误的）并希望它倒计时到午夜，所以一旦选定的日期，我将我的标签更改为我喜欢的任何内容。相反，它说在所选日期的午夜前大约 4 小时还剩下 24 小时。

我只想让它倒计时到午夜。

```
systemCalendar = [NSCalendar currentCalendar];
    unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    components = [systemCalendar components:unitFlags
                                   fromDate:[NSDate date]
                                     toDate:[[NSUserDefaults standardUserDefaults] objectForKey:@"dateSaved"]
                                    options:0];

if (![[NSUserDefaults standardUserDefaults] objectForKey:@"dateSaved"]) 
    {
        dateLbl.text = @"You haven't chosen a date yet.";
    }
    else
    {
        //Plural string variations
        NSString *seconds = @"Seconds";
        NSString *minutes = @"Minutes";
        NSString *hours = @"Hours";
        NSString *days = @"Days";
        NSString *months = @"Months";
        NSString *years = @"Years";

        //No time left until wedding day
        if ([components year] <= 0 && [components month] <= 0 && [components day] <= 0 && [components hour] <= 0 && [components minute] <= 0 && [components second] <= 0)
        {
            dateLbl.text = @"It's Your Day!";
        }
        //Hours left until day
        else if ([components year] <= 0 && [components month] <= 0 && [components day] <= 0 && ([components hour] > 0 || [components minute] > 0 || [components second] > 0))
        {
            if ([components hour] > 1) hours = @"Hours";
            else hours = @"Hour";

            if ([components minute] > 1) minutes = @"Minutes";
            else minutes = @"Minute";

            if ([components second] > 1) seconds = @"Seconds";
            else seconds = @"Second";

            dateLbl.text = [NSString stringWithFormat:@"%i %@, %i %@, %i %@ Until Your Day", [components hour], hours, [components minute], minutes, [components second], seconds];
            //dateLbl.text = @"Tomorrow is your day!";
        }
        //Days left until day
        else if ([components year] <= 0 && [components month] <= 0 && [components day] > 0)
        {
            if ([components day] > 1) days = @"Days";
            else days = @"Day";

            dateLbl.text = [NSString stringWithFormat:@"%i %@ Until Your Day", [components day], days];
        }
        //Months left until day
        else if ([components year] <= 0 && [components month] > 0)
        {
            if ([components month] > 1) months = @"Months";
            else months = @"Month";

            if ([components day] > 1) days = @"Days";
            else days = @"Day";

            dateLbl.text = [NSString stringWithFormat:@"%i %@, %i %@ Until Your Day", [components month], months, [components day], days];
        }
        //Years left until day
        else if ([components year] > 0)
        {
            if ([components year] > 1) years = @"Years";
            else years = @"Year";

            if ([components month] > 1) months = @"Months";
            else months = @"Month";

            if ([components day] > 1) days = @"Days";
            else days = @"Day";

            dateLbl.text = [NSString stringWithFormat:@"%i %@, %i %@, %i %@ Until Your Day", [components year], years, [components month], months, [components day], days];
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:02:22.047

原来我需要将日期的小时、分钟和秒重置为 0，这样当我保存它时日期就在午夜。

因此，当从我的日期选择器中保存日期时，我会这样做：

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSIntegerMax fromDate:[datePicker date]];
    //Reset date components
    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];
    //Create new date with components reset for midnight of selected day
    NSDate *midnight = [[NSCalendar currentCalendar] dateFromComponents:components]; 
```

所以现在我有我选择的日期，小时、分钟和秒设置为午夜，所以倒计时运行到正确的时间。

在这里找到了解决方案：

[如何从 NSDate 对象中检索午夜过后的小时数？](https://stackoverflow.com/questions/8087900/how-to-retrieve-number-of-hours-past-midnight-from-an-nsdate-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:25:47.240

[Keith Lazuka 提供](https://github.com/klazuka)了几乎相同的解决方案：

[NSDateAdditions.h](https://github.com/klazuka/Kal/blob/master/src/NSDateAdditions.h)和[NSDateAdditions.m](https://github.com/klazuka/Kal/blob/master/src/NSDateAdditions.m)

但它还包含其他有用的方法：

```
- (NSDate *)cc_dateByMovingToBeginningOfDay;
- (NSDate *)cc_dateByMovingToEndOfDay;
- (NSDate *)cc_dateByMovingToFirstDayOfTheMonth;
- (NSDate *)cc_dateByMovingToFirstDayOfThePreviousMonth;
- (NSDate *)cc_dateByMovingToFirstDayOfTheFollowingMonth;
- (NSDateComponents *)cc_componentsForMonthDayAndYear;
- (NSUInteger)cc_weekday;
- (NSUInteger)cc_numberOfDaysInMonth; 
```

# windows - DLL 故障排除工具

> ID：11991736
> 
> 赞同：1
> 
> 时间：2012-08-16T16:36:27.460
> 
> 标签：windows, visual-studio, visual-studio-2010, dll

[官方文档](http://support.microsoft.com/kb/815065)已经过时；它与 6.0 版本有关。我在我的计算机中找不到 Dependency Walker 和 Dll Universal Problem Solver，Visual Studio GUI -> Tools 也没有提到这些小程序。这很令人惊讶，因为它们似乎非常有用。现在是如何管理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:59:15.623

Dependency Walker 现在是一个单独的产品[http://dependencywalker.com/](http://dependencywalker.com/)

Installsite 也有一个工具列表（虽然有些已经过时）： http: [//www.installsite.org/pages/en/tt_app.htm](http://www.installsite.org/pages/en/tt_app.htm)

# java - 是否可以创建一个 ProgressBar 而不必在新线程上运行它？

> ID：11991737
> 
> 赞同：0
> 
> 时间：2012-08-16T16:36:32.023
> 
> 标签：java, android, android-widget

我一直在查看很多进度条示例，它们都涉及创建新线程或异步任务。这些进度条是在任务完成时弹出、更新和消失的进度条。

但是，我有兴趣在我的应用程序中创建一个永久的 ProgressBar，它实际上可以通过硬编码进度来更新。

所以这是一个示例代码：

```
ProgressBar levelProgress;
levelProgress = (ProgressBar)findViewById( R.id.progressBarLevel);
levelProgress.setMax(100);
levelProgress.setProgress(50); //this is what I wanted to do 
```

我想让 ProgressBar 保持原样，因此使用上面的代码，我希望在我的布局中拥有一个永久的 ProgressBar 以完成一半。我实际上拥有的是一个空的 ProgressBar。

最后一个问题是，有没有办法对进度条的更新进行硬编码？还是只能通过 AsyncTask 或可运行线程获得？

编辑：我忘了提到我正在将它作为一个片段来实现。稍微更完整的代码如下

```
public class myLevelDisplayActivity extends Fragment{

LinearLayout ll;
static FragmentActivity fa;
ProgressBar levelProgress;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    fa = super.getActivity();
    ll = (LinearLayout) inflater.inflate(R.layout.levelDisplay, container, false);

       levelProgress = (ProgressBar) ll.findViewById( R.id.progressBarLevel);
       levelProgress.setMax(100);
       levelProgress.setProgress(0);
       levelProgress.setProgress(10);
       levelProgress.setProgress(50);

 return ll;
} 
```

水平显示.xml

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    tools:ignore="HardcodedText,ExtraText,ExtraText,ExtraText,ExtraText,ExtraText" xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp" >

        <ImageView
            android:id="@+id/imageViewCurrentLevel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/circle1" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_weight="0.26"
            android:orientation="vertical">

            <TextView
                android:id="@+id/textViewLevelTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center_horizontal"
                android:text="Level Title"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ProgressBar
                    android:id="@+id/progressBarLevel"
                    style="?android:attr/progressBarStyleHorizontal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="3.16"
                    android:max="100" 
                    />

            </LinearLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="center_horizontal"
                android:layout_weight="3.16" >

                <TextView
                    android:id="@+id/textViewCurrent"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Current"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewSeparator"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="/"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewNextLimit"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Next Level"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

            </LinearLayout>

        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:47:13.853

您可以在布局中放置一个 ProgressBar（表单小部件下有一个）。我不知道你是否可以从 XML 设置进度百分比，如果不能，你可以像这样以编程方式设置它：（这只是我的想法）：

```
ProgressBar pb = (ProgressBar)findViewById(R.id.progressBar); 
pb.setProgress(50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:50:38.547

`Thread`您可以在没有或的情况下从 XML 和代码设置进度`AsyncTask`。您的问题是您的代码没有运行，或者您的布局有问题。布局 XML 应该具有`style="?android:attr/progressBarStyleHorizontal"`或包含在该样式中的一组自定义属性。请参阅[在 Android 中使用水平进度条](http://bytecrafter.blogspot.de/2008/12/using-horizontal-progress-bar-in.html)

```
<ProgressBar
    android:id="@+id/progressBarLevel"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="100"
    android:progress="50" /> 
```

> 最后一个问题是，有没有办法对进度条的更新进行硬编码？

`Thread`是的， /的原因`AsyncTask`是人们希望随着时间的推移改变进度，但您不想这样做，您不必使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:35:58.893

当前的代码似乎很好。如果仍有问题，您应该显示更多代码。

此外，线程只是与问题无关，因为它们仅用于表明它可以前进。

顺便说一句，您可以使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)而不是新线程。

# c - 在Linux上运行时，C程序在空闲时间应该做什么？

> ID：11991740
> 
> 赞同：6
> 
> 时间：2012-08-16T16:37:00.450
> 
> 标签：c, linux, idle-processing

我已经为微控制器编写了许多 C 程序，但从来没有在像 linux 这样的操作系统上运行过。linux 如何决定给我的应用程序多少处理时间？当我有空闲时间告诉操作系统去做其他事情并稍后返回给我以便其他进程也有时间运行时，我需要做些什么吗？还是操作系统会自动执行此操作？

编辑：添加更多细节 我的 c 程序有一个任务调度程序。有些任务每 100 毫秒运行一次，有些任务每 50 毫秒运行一次，依此类推。在我的主程序循环中，我调用 ProcessTasks 来检查是否有任何任务准备好运行，如果没有准备好，它会调用一个空闲函数。空闲功能什么也不做，但它在那里，所以我可以切换一个 GPIO 引脚并使用 O'scope 监控空闲时间......或者如果我愿意的话。所以也许我应该在这个空闲函数中调用 sched_yield() ？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:41:03.583

> linux如何决定给我的应用程序多少处理时间

每个调度程序都有自己的想法。一些奖励你没有用完你的份额，一些掷骰子试图预测你会做什么等等。在我看来，你可以**认为它很神奇**。*在我们进入循环之后，调度器**神奇地**决定我们的时间到了等等*。

> 当我有空闲时间告诉操作系统去做其他事情时，我需要做些什么吗

你可能会打电话给[`sched_yield`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_yield.2.html). 我从来没有打电话给它，我也不知道有什么理由想要这样做。该手册确实说它可以提高性能。

> 还是操作系统会自动执行此操作

它肯定会。这就是为什么他们称其为[“抢先式”](http://en.wikipedia.org/wiki/Preemption_%28computing%29)多任务处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T16:43:36.007

这取决于您为什么以及如何拥有“空闲时间”。任何对阻塞 I/O 函数的调用、等待互斥体或休眠都会自动取消调度您的线程并让操作系统继续执行其他操作。只有像繁忙循环这样的问题才会成为问题，但无论如何都不应该出现在您的设计中。

您的程序实际上应该只有一个中央“无限循环”。如果循环体有可能“无法正常工作”，那么最好让循环执行上述系统功能之一，这将使所有的美好都自动出现。例如，如果您的中央循环是一个`epoll_wait`并且您的所有 I/O、计时器和信号都由 epoll 处理，`-1`则在无事可做的情况下调用超时为 的函数以使其休眠。（相比之下，使用超时调用它`0`会使其忙于循环——糟糕！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:53:43.093

IMO的其他答案太详细了。简单的做法是：

```
while (1){
    if (iHaveWorkToDo()){
        doWork();
    } else {
        sleep(amountOfTimeToWaitBeforeNextCheck);
    }
} 
```

注意：这是一个简单的解决方案，在单线程应用程序中很有用，或者像您在指定时间内无事可做的情况一样；只是为了得到一些体面的工作。另一件事是 sleep 会调用操作系统喜欢的任何 yield 函数，所以从这个意义上说，它比操作系统特定的 yield 调用更好。

如果你想追求高性能，你应该等待事件。

如果您有自己的事件，它将如下所示：

```
Lock *l;
ConditionVariable *cv;

while (1){
    l->acquire();
    if (iHaveWorkToDo()){
        doWork();
    } else {
        cv->wait(lock);
    }
    l->release();
} 
```

在网络类型的情况下，它将更像：

```
while (1){
    int result = select(fd_max+1, &currentSocketSet, NULL, NULL, NULL);
    process_result();
} 
```

# android - 获取联系方式在 android 中花费大量时间？

> ID：11991743
> 
> 赞同：2
> 
> 时间：2012-08-16T16:37:17.267
> 
> 标签：android, database, cursor, android-contentprovider

嗨，目前正在做一个与联系人相关的项目，我正在从联系人* ***（电子邮件、号码和联系人姓名）* ***那里获取详细信息，并且效果很好。但问题是获取联系人详细信息需要很长时间**（1000 多个联系人）包括从社交网站同步的联系人）**。所以我为此目的放了一个`Asynchronous Task`，它做得很好，但问题是由于完成获取过程的时间很长，当我按下后退按钮时它在异步任务期间崩溃.我的问题并没有崩溃，为什么这个获取联系人需要很多时间。有没有办法让`contact`速度更快。我获取联系方式的代码如下

```
public void readContact() {
    contactname = new ArrayList<String>();
    contactnumber = new ArrayList<String>();
    companyname_one = new ArrayList<String>();
    contactemail = new ArrayList<String>();
    people = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null,
            PhoneLookup.DISPLAY_NAME);

    while (people.moveToNext()) {
        int nameFieldColumnIndex = people
                .getColumnIndex(PhoneLookup.DISPLAY_NAME);
        String contact = people.getString(nameFieldColumnIndex);
        if (contact == null) {
            contactname.add("No contact Set");
        } else {

            contactname.add(contact);

        }

        String szId = people.getString(people
                .getColumnIndexOrThrow(ContactsContract.Contacts._ID));

        cursor_one = getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                null,
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "='"
                        + szId + "'", null, null);
        if (cursor_one.moveToNext()) {
            String number = cursor_one.getString(cursor_one
                    .getColumnIndex(Phone.NUMBER));
            contactnumber.add(number);
            cursor_one.close();

        } else {
            contactnumber.add("no number");
            cursor_one.close();

        }

        emails_value = getContentResolver().query(
                Email.CONTENT_URI,
                null,
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "='"
                        + szId + "'", null, null);

        if (emails_value.moveToNext()) {
            email_sorting = emails_value.getString(emails_value
                    .getColumnIndex(Email.DATA));
            checkAll();

        } else {

            contactemail.add("no email");
            emails_value.close();

        }

    }

    people.close();

    System.out.println("noz " + contactnumber);
    System.out.println("name" + contactname);
    System.out.println("email" + contactemail);
    System.out.println("noz size " + contactnumber.size());
    System.out.println("name size " + contactname.size());
    System.out.println("contactemail size " + contactemail.size());

} 
```

该`checkAll()`方法是电子邮件的模式匹配如下

```
 public boolean checkAll() {

    boolean chkAll = true;
    Pattern p1 = Pattern.compile(".+@.+\\.[a-z]+");
    Matcher m1 = p1.matcher(email_sorting.trim());

    if (!m1.matches()) {

        contactemail.add("no email");
        contactemail_sort.add("no email");
        emails_value.close();
        chkAll = false;

    } else {

        contactemail.add(email_sorting);
        contactemail_sort.add(email_sorting);
        emails_value.close();
        chkAll = true;
    }

    return chkAll;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:45:28.350

好的，我想我终于看到了最好的方法。与其在创建适配器之前提取所有联系信息，不如创建一个自定义 CursorAdapter，它接受您的光标并使用在后台线程上执行`people`的查询填充自定义视图。`cursor_one`这应该利用 ListView 的自然延迟加载，并使这项工作如您所愿。

如果您至少使用 Android 3.0，则可以使用 Loaders 而不是使用 AsyncTask。

[我在这里](http://thinkandroid.wordpress.com/2010/01/11/custom-cursoradapters/)找到了一个自定义光标适配器的示例，这是我用来制作示例的。可能有更好的方法可以在代码中实现这一点，但这至少向您展示了要覆盖哪些方法以及要在其中放入什么。

```
public class ContactListCursorAdapter extends SimpleCursorAdapter {

    private Context context;

    private int layout;

    public ContactListCursorAdapter (Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.context = context;
        this.layout = layout;
    }

    // Used to populate new list items
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        Cursor c = getCursor();

        final LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(layout, parent, false);

        int nameCol = c.getColumnIndex(People.NAME);

        String name = c.getString(nameCol);

        /**
         * Next set the name of the entry.
         */     
        TextView name_text = (TextView) v.findViewById(R.id.name_entry);
        if (name_text != null) {
            name_text.setText(name);
        }

        getDeatils(v,c);

        return v;
    }

    // Used to bind a new item from the adapter to an existing view
    @Override
    public void bindView(View v, Context context, Cursor c) {

        int nameCol = c.getColumnIndex(People.NAME);

        String name = c.getString(nameCol);

        /**
         * Next set the name of the entry.
         */     
        TextView name_text = (TextView) v.findViewById(R.id.name_entry);
        if (name_text != null) {
            name_text.setText(name);
        }

        getDetails(v,c);
    }

    private void populateDetails(View v, Cursor c) {
       // Start your AsyncTask or Loader to get the details.
       // Be sure to populate the view with the results in the
       // appropriate completion callback.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:00:56.447

我的建议是重新定义你的结构是如何工作的。例如，获取有关联系人、显示名称和其他元数据的基本信息真的很快。在列表或其他内容中显示它，然后当他们选择或查看联系人时，然后加载其余信息。

这会加快很多。但是，如果您必须一次加载有关联系人的所有内容，那么是的，由于您需要执行多少查询，所以速度会非常慢。

另一个建议是向用户显示它们已完成。这样就有一些进展，他们可以查看。而不是仅仅放置一个显示“加载等待”的对话框。

# php - PHP文件处理，代码从未到达

> ID：11991746
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:37:25.783
> 
> 标签：php

我有一段代码有一些错误，我一直试图找到一整天......这（应该）做的是：浏览文件夹中的所有文件，检查它是否是图像类型，如果是，在某个文件夹中创建缩略图。它完成了工作，但是：之后它不会继续，我放了一个 echo 命令并且它从未执行过。我很感激任何帮助！多谢。

```
$bilddateitypen     = array('gif','jpg','JPG','GIF');

$importdir          = '../sync';
if ($handle = opendir($importdir)) {
    while (($file = readdir($handle)) !== false) {
        if (!is_dir($importdir."/".$file) && is_file($importdir."/".$file)) {
            $ex = explode('.',$file);
            if(in_array($ex[count($ex)-1], $bilddateitypen)) {

                $file = utf8_decode($file);
                $thumbnail = new thumbnail($importdir."/".$file);
                $thumbnail->jpeg_quality(93);
                $thumbnail->save("../shop/images/product_images/original_images/".$file);
                $thumbnail->size_auto(500);
                $thumbnail->save("../shop/images/product_images/popup_images/".$file);
                $thumbnail->size_auto(200);
                $thumbnail->save("../shop/images/product_images/info_images/".$file);
                $thumbnail->size_auto(112);
                $thumbnail->save("../shop/images/product_images/thumbnail_images/".$file);

            } else {
                continue;   
            }
        }
    }
    closedir($handle);
}
echo "Hallo Welt"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:01:37.060

看起来您从不更新循环`$handle`内的值`while`，因此创建了一个无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:17:41.180

尝试仅使用 echo 运行代码而不调整图像大小。尝试 var_dump 变量并检查其中的内容。确保您有错误报告。如果出现一些错误。

以这种方式检查图像扩展：

```
public static function isImage($fileName)
{
    $type = exif_imagetype($fileName);

    if (!(($type == IMAGETYPE_JPEG) || ($type == IMAGETYPE_GIF) || ($type == IMAGETYPE_PNG)))
        return false;

    return true;
} 
```

# javascript - 为什么我的函数在每次页面加载时只运行一次？

> ID：11991749
> 
> 赞同：5
> 
> 时间：2012-08-16T16:37:36.017
> 
> 标签：javascript, forms, function

我正在编写一个脚本，该脚本使用表单中的文本输入进行计算。出于某种原因，我的计算在每次页面加载时只执行一次。当我按下“计算”按钮时，我必须刷新页面才能再次运行该功能。

这是我的按钮的 HTML：

```
<input type="button" value="Calculate" onclick="calculate(high, low, common);" />
<input type="reset" />
<div id="result"></div> 
```

这是计算函数（变量在别处定义）：

```
var calculate = function (high, low, common) {
   if (high.length < 1 || low.length < 1 || common.length <1) {
       document.getElementById('result').innerHTML="Please enter a number for all fields.";
   } else {
       if ((high - common) > (common - low)) {
           document.getElementById('result').innerHTML="Result 1.";
        } else if ((common - low) > (high - common)) {
        document.getElementById('result').innerHTML="Result 2.";
        } else if ((common - low) === (high - common)) {
        document.getElementById('result').innerHTML="Result 3.";
        }
      }
   }; 
```

我是否正在做一些事情来阻止该功能在每个页面加载时运行多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:24:41.840

您的代码的问题在于您只是在第一次加载页面时设置了高、低、常见的值。这些值始终保持不变。

您应该在 onclick 事件中传递您的值。

更新了你的 - [jsfiddle](http://jsfiddle.net/abhishekchand/K4h2L/)

```
<!DOCTYPE html>
<html>
<head>
    <title>Calculator</title>
    <meta charset = "UTF-8" />
</head>
<body>

<h1>Calculator</h1>

<!--Form forvalue inputs-->

<form>
    <label for="highRi">Highest:</label><input type ="text" id="highRi" />
    <label for="lowRi">Lowest:</label><input type="text" id="lowRi" />
    <label for="comm">Common Point:</label><input type ="text" id="comm" />

<!--Clicking the button should run the calculate() function-->

    <input type="button" value="Calculate" onclick="calculate(document.getElementById('highRi').value, document.getElementById('lowRi').value, document.getElementById('comm').value);" />
    <input type="reset" />

<!--Div will populate with result after calculation is performed-->

    <div id="result"></div> 
</form>

<script type="text/javascript">

var calculate = function (high, low, common) {
   if (high.length < 1 || low.length < 1 || common.length <1) {
       document.getElementById('result').innerHTML="Please enter a number for all fields.";
   } else {
       if ((high - common) > (common - low)) {
           document.getElementById('result').innerHTML="Result 1.";
        } else if ((common - low) > (high - common)) {
        document.getElementById('result').innerHTML="Result 2.";
        } else if ((common - low) === (high - common)) {
        document.getElementById('result').innerHTML="Result 3.";
    }
}

}; 

</script>

</body>
</html> 
```

或者您可以简单地在函数调用中获取这些元素值。

```
<!DOCTYPE html>
<html>
<head>
<title>Calculator</title>
<meta charset = "UTF-8" />
</head>
<body>

<h1>Calculator</h1>

<!--Form forvalue inputs-->

<form>
    <label for="highRi">Highest:</label><input type ="text" id="highRi" />
    <label for="lowRi">Lowest:</label><input type="text" id="lowRi" />
    <label for="comm">Common Point:</label><input type ="text" id="comm" />

<!--Clicking the button should run the calculate() function-->

    <input type="button" value="Calculate" onclick="calculate();" />
    <input type="reset" />

<!--Div will populate with result after calculation is performed-->

    <div id="result"></div> 
</form>

<script type="text/javascript">

var calculate = function () {
    var high = document.getElementById('highRi').value;
    var low = document.getElementById('lowRi').value
    var common = document.getElementById('comm').value
   if (high.length < 1 || low.length < 1 || common.length <1) {
       document.getElementById('result').innerHTML="Please enter a number for all fields.";
   } else {
       if ((high - common) > (common - low)) {
           document.getElementById('result').innerHTML="Result 1.";
        } else if ((common - low) > (high - common)) {
        document.getElementById('result').innerHTML="Result 2.";
        } else if ((common - low) === (high - common)) {
        document.getElementById('result').innerHTML="Result 3.";
    }
}

}; 

</script> 
```

​ Jsfiddle[看看它的工作](http://jsfiddle.net/abhishekchand/kwWWA/) ​​可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:52:40.967

对我来说，如果我将值更改为高、低和通用，您的代码也可以工作，试试这个方法，它可能对你有用

```
<input type="button" id="button" value="Calculate" />

var button = document.getElementById("button");
var high = document.getElementById("high").value;
var low = document.getElementById("low").value;
var common = document.getElementById("common").value;
button.addEventListener(onclick, calculate(high, low, common)); 
```

# mysql - 从 MySQL 表中的列中获取最大值，将值增加 1 并传递给变量

> ID：11991752
> 
> 赞同：1
> 
> 时间：2012-08-16T16:37:40.603
> 
> 标签：mysql, pdo, prepared-statement, max

我正在使用下面的查询来提取 MySQL 表中名为 id 的列的最大值，以便将其值增加 1 并将其传递给名为 $fav_id 的变量。由于某种原因，$fav_id 返回 '0'，而不是我想要的值，即如果 id 列中的最大当前值为 465，则 $fav_id 应设置为 466。也许有人可以让我知道我要去哪里错误的。

```
$sth2 = $pdo->prepare("SELECT MAX(id) AS id FROM tracks");

$sth2->setFetchMode(PDO::FETCH_OBJ);

while($row = $sth2->fetch()) {
    $fav_id = $row->id+1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:43:40.387

尝试将 $row->id+1 括在括号中，例如 ($row->id)+1，并注意范围。您可能希望在 while 循环之外将 $fav_id 设置为 0，以使其具有比 while 循环更大的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:22:18.863

根据我对 PDO 的了解，它应该是 $row[id] 而不是 $row->id。此外，您从未执行过准备好的语句，但由于您在查询中没有任何占位符，您应该使用 '->query' 而不是 '->prepare'

# php - 用 PHP 发送电子邮件

> ID：11991753
> 
> 赞同：0
> 
> 时间：2012-08-16T16:37:41.807
> 
> 标签：php, email, pear

我正在尝试使用 PHP 发送电子邮件。我在这里找到了很多帖子，我感到很失落。我尝试使用许多代码，但没有一个有效。

最后，我阅读了 PEAR 并且我有以下代码，我正在使用具有 PHP 5.3.6 的 MAMP 使用 Mac OSX 10.7.3。

我需要做什么才能使代码正常工作，它显示错误加载页面！？有没有配置？

如果有人有一个带有配置说明的工作示例，请分享。

```
<?php
require_once "Mail.php";

$recipients = 'receiver@live.com';

$headers['From']    = 'sender@gmail.com';
$headers['To']      = 'receiver@live.com';
$headers['Subject'] = 'Test message';

$body = 'Test message';

$params['sendmail_path'] = '/usr/lib/sendmail';

// Create the mail object using the Mail::factory method
$mail_object =& Mail::factory('sendmail', $params);

$mail_object->send($recipients, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
 } else {
  echo("<p>Message successfully sent!</p>");
 }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:39:43.583

使用 PHP 发送电子邮件再简单不过了：

```
mail('to@email.com', 'Subject', 'Here comes the message'); 
```

就是这样。请记住，您的服务器需要配置为发送电子邮件。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# r - R中大文件加载期间的消息

> ID：11991754
> 
> 赞同：0
> 
> 时间：2012-08-16T16:37:43.040
> 
> 标签：r

有没有办法在大文件加载或 R 中耗时的处理和计算期间打印消息？如果它带有一些倒数计时器，那也很棒。谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:02:18.727

查看函数`txtProgressBar`、`winProgressBar`（仅限 Windows）和`tkProgressBar`（tcltk 包）。这些可用于显示进度条，以指示您在漫长的过程中走了多远。其中一些有放置标签的空间，您可以使用该标签来提供更具体的信息。

有一些函数将使用这些（包），否则您需要自己编写更新代码，但如果您使用循环或其中一个函数`plyr`，这非常简单。`*apply`

# c# - 我安装的应用程序不起作用

> ID：11991755
> 
> 赞同：2
> 
> 时间：2012-08-16T16:37:43.357
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-2008

当我在 C:\ProgramFiles 中安装我的 C# winform 应用程序时遇到问题，每次尝试运行它时，我都会通过 3 个选项（关闭、调试、检查在线解决方案）收到通常的“应用程序已停止工作”错误。

现在我很确定我在 InstDir 中得到了所有的 Dll 和要求。我确定这个因为如果我将 InstDir 复制/粘贴到另一个位置，例如桌面，该应用程序可以工作！

怎么解决这个？？？

错误看起来像这样

```
Problem signature:
Problem Event Name:   CLR20r3
Problem Signature 01: typingfreak.exe
Problem Signature 02: 1.0.0.0
Problem Signature 03: 5029e51b
Problem Signature 04: mscorlib
Problem Signature 05: 4.0.0.0
Problem Signature 06: 4ba1da6f
Problem Signature 07: 3dab
Problem Signature 08: 13c
Problem Signature 09: System.UnauthorizedAccess
OS Version:   6.1.7600.2.0.0.256.1
Locale ID:    12297
Additional Information 1: 0a9e
Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
Additional Information 3: 0a9e
Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

请，任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:41:31.073

您的申请正在提高`System.UnauthorizedAccess`。鉴于您复制并粘贴到另一个文件夹时发生的情况的描述，我的猜测是它正在尝试将数据写入本地文件夹。

如果您要安装到`Program Files`中，则不允许这样做（除非您以管理员身份运行它），因为您的用户无法写入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T16:44:49.287

尝试以管理员身份运行它 - 如果它有效 - 您的应用程序可能正在访问系统中不允许用户访问的某些区域 - （通常是目录）。检查您的文件访问方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:41:43.483

根据您的错误行：

```
Problem Signature 09: System.UnauthorizedAccess 
```

我推测您正在从一个目录运行，您没有应用程序所需的适当权限，或者您从网络位置（或网络）复制了应用程序并且没有将其标记为安全。

验证目录的 Windows 权限后，我建议您右键单击可执行文件，选择属性，然后在对话框中查找标有“取消阻止”的按钮。点击它。您可能需要也可能不需要重复 DLL。

# python - 选择哪一行报异常

> ID：11991756
> 
> 赞同：18
> 
> 时间：2012-08-16T16:37:52.433
> 
> 标签：python, exception

假设我在 Python 中有一条引发异常的多行代码。

**Python 如何决定针对哪一行引发异常？**

示例：（*注意：我可以`\`在每行之后使用反斜杠）*

```
(1
 +0/0
 +3) 
```

在**第 3 行**抛出异常（`ZeroDivisionError`异常， at `+3)`）。

```
(1
 +
 0/0
 ) 
```

**在第 3 行**引发异常。

```
(0/0
 +
 1) 
```

**在第 2 行**引发异常。

*这个问题受到了[这个例子](https://stackoverflow.com/questions/11991370/python-integer-out-of-range-for-l-format-code)的启发，@Godman[指出](https://stackoverflow.com/a/12005243/1240268)异常不仅仅发生在最后一行（正如我之前所想的那样）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:52:09.430

从根本上说，我不认为我们都在思考正确的路线。这里没有最后一行。解释器在完全接收到表达式时引发异常。根据 Python 语法：[http](http://docs.python.org/reference/grammar.html) ://docs.python.org/reference/grammar.html ，直到你点击右大括号')'，表达式才完全完成。Joran Beasley 在针对问题本身的评论中对此进行了简要解释。

您可以做 3 件事来判断其正确性，而无需深入研究语法：-

1.  在python解释器中写下这段代码：

    > a=(1+2+0/0+4+5)

这也会引发 ZeroDivionError。

1.  在python解释器中写下这段代码：

    > a=(1+2+0/0+4+5 # 然后按回车

这会给您带来无效的语法，因为表达式不完整并且解释器无法解析 PS：这与问题中提到的代码相同

1.  在python解释器中写下这段代码：

> a = (1
> +2
> +0/0
> +4
> +5)

最终，直到您点击右大括号，表达式才会完成。因此，您可以继续在其中添加更多子表达式而不会出现任何异常。因此，从根本上说，解释器并不将这一切都视为行号。它一直等到所有表达式（包括子表达式）都完成。而且，它是一个适合解释器的编程控制流程。

PS：请原谅我对答案的格式。

新编辑：-

@Hayden：我认为通过不深入研究语法很容易解释其中的微妙之处。但是，供您参考，我只是从 URL 复制代码：http: [//nedbatchelder.com/blog/200804/the_structure_of_pyc_files.html](http://nedbatchelder.com/blog/200804/the_structure_of_pyc_files.html)

运行步骤：- 1\. 将问题中询问的代码写入 temp.py 文件并保存，然后将 temp 导入另一个文件或解释器中。这将创建 temp.pyc 2\. 现在，将上述 URL 中的完整代码复制并粘贴到 byteCodeDetails.py 中，并在命令提示符下运行该文件：python byteCodeDetails.py temp.pyc。函数 show_file 将在此处调用，并给出以下输出：-

> 魔术03F30D0A MODDATE 458C2E50（周五8月17日 23:54:05
> 2012）代码
> argcount 0 nlocals 0 stackSize 3 标志
> 0040代码
> 6406406402006402001517640176403001764030017640400175A00175A00 00 0000640500500; LOAD_CONST 3 (4) 14 BINARY_ADD 15 LOAD_CONST 4 (5) 18 BINARY_ADD 19 STORE_NAME 0 (a) 22 LOAD_CONST 5 (无)
> 
> 25 RETURN_VALUE
> consts
> 1
> 2
> 0
> 4
> 5
> 无
> 3 个
> 名称 ('a',)
> varnames ()
> freevars ()
> cellvars ()
> 文件名 'C:\Users\Python\temp1.py'
> 
> name ''
> firstlineno 5
> lnotab

* * *

因此，您可以注意到：-

1.  引用上面提到的链接： *在反汇编的输出中，最左边的数字 (1, 2, 3) 是原始源文件中的行号，接下来的数字 (0, 3, 6, 9, ...)是指令的字节偏移量。*同样，对于您的代码，最左边的数字只有 5，即行号，右边的列代表编译器为您的代码翻译的助记符（由解释器读取），从而指示表达式如何被形成并且它们的形成被编译代码中的行号的值所取代。
2.  **firstlineno 指向 5。**

现在，只需对 temp.py 文件中的初始代码稍作更改：-

> a = (1
> +2
> +0/0
> +4 **+**
> 5)

现在，再次运行上述 2 个步骤。以下是输出：-

> 魔术03F30D0A
> MODDATE 0F8E2E50（SAT 8月18日00:01:43 2012）
> 代码
> ARGCOUNT 0 nlocals
> 0 stackSize 3 标志
> 0040
> 
> 代码
> 640640200640200640200176440300176403001764040400175A00175A00 00 00 0064050050053 4
> 0
> 30（30
> ）LOAD_CONST 3 (4) 14 BINARY_ADD
> 
> 5 15 LOAD_CONST 4 (5)
> 18 BINARY_ADD
> 19 STORE_NAME 0 (a)
> 22 LOAD_CONST 5 (None)
> 25 RETURN_VALUE
> consts
> 1
> 2
> 0
> 4
> 5
> None
> 3 个
> 名称 ('a',)
> varnames ()
> freevars ()
> cellvars ()
> 文件名 'C :\Users\Python\temp1.py'
> name ''
> firstlineno 4
> 
> lnotab 0f01

好吧，现在您可以清楚地看到两件事：-

1.  字节码由下一行所示的 2 行组成，即“代码 640600640200640200151764030017640400175a000064050053”，前缀为“4”和“5”。这表明编译器已经解析了 .py 文件并将 temp.py 中的代码转换为 2 行代码，这些代码将由解释器运行。**请注意，这里第 4 行的内容将由解释器执行，无论表达式是否完整**

2.  **firstlineno**的值从5 变为 4

 **这个冗长讨论的全部要点是，无论字节码向解释器表明这是一行的开始以及应该为该行执行的相应语句，解释器只运行该行并接下来编写相应的语句给它。

您问题中的代码将 firstlineno 显示为 5，这就是您在第 5 行收到错误的原因。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:05:25.317

异常将指向**包含以下任一项的行***：

1.  **最后一个运算符**（如果先前的文字/运算符导致异常）。

2.  **最后一个文字**（否则，即最后一个文字/运算符导致异常）。

.

*但是*，如果这不是您看到的行为，则*可能*是由于您的 py（源）文件之一与其对应的（编译的）pyc 文件或正在运行的代码（在内存中）存在差异。以下是一个说明性示例。

*   假设`E.py`包含：

    ```
    def z():
        0/0 
    ```

*   从 python 命令行，`import E`（这将编译`E.py`为 byte-code: `E.pyc`，并放入内存中）。

*   Call `E.z()`，这将产生一个异常，在第 2 行 in `z`，显示该行`0/0`- 这里不足为奇。

*   返回`E.py`源文件，在顶部插入两行，然后在第二行插入字符串`"oh dear, oh dear"`.

*   返回 python 命令行，并`E.z()`再次调用。

*   异常（在第 2 行，**在 z 中**）现在显示`"oh dear, oh dear"`.

***更新**：我没有这方面的参考，如果你遇到一个，请评论一个。*我之前以为这只是最后一行！***

# oracle - 使用 DB 链接访问我们的 Oracle 数据库的其他数据库的详细信息

> ID：11991759
> 
> 赞同：3
> 
> 时间：2012-08-16T16:37:58.407
> 
> 标签：oracle

有没有办法找到使用 DB 链接访问我们的 Oracle 数据库的数据库的详细信息？**Dba_db_links**保存了我们数据库中用于访问其他数据库的 DB 链接的信息，但是是否有类似的表可以从中找到访问我们数据库的 DB 链接，或者是在哪里记录的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:47:01.743

我同意贾斯汀的观点，没有办法确定所有数据库的明确列表，这些数据库具有指向给定数据库的数据库链接。

但是，*可以*监视*活动*的数据库链接。您可以使用以下查询通过数据库链接查看哪些会话以及来自哪些数据库：

```
-- who is querying via dblink?
-- Courtesy of Tom Kyte, via AskTom
-- this script can be used at both ends of the database link
-- to match up which session on the remote database started
-- the local transaction
-- the GTXID will match for those sessions
-- just run the script on both databases

Select /*+ ORDERED */
substr(s.ksusemnm,1,10)||'-'|| substr(s.ksusepid,1,10)      "ORIGIN",
substr(g.K2GTITID_ORA,1,35) "GTXID",
substr(s.indx,1,4)||'.'|| substr(s.ksuseser,1,5) "LSESSION" ,
s2.username,
substr(
   decode(bitand(ksuseidl,11),
      1,'ACTIVE',
      0, decode( bitand(ksuseflg,4096) , 0,'INACTIVE','CACHED'),
      2,'SNIPED',
      3,'SNIPED',
      'KILLED'
   ),1,1
) "S",
substr(w.event,1,10) "WAITING"
from  x$k2gte g, x$ktcxb t, x$ksuse s, v$session_wait w, v$session s2
where  g.K2GTDXCB =t.ktcxbxba
and   g.K2GTDSES=t.ktcxbses
and  s.addr=g.K2GTDSES
and  w.sid=s.indx
and s2.sid = w.sid; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T11:46:56.677

你可能正在寻找这个。

第 1 步：检查 X 数据库中会话的 hash_value。select sql_hash_value from v$session where sid=&sid;

第 2 步：检查触发 SQL 的 X 数据库中会话的完整 SQL。从 v$sql 中选择 sql_fulltext 其中 hash_value=&hash_value;

第 3 步：记下 SQL 中涉及的所有数据库链接，并确定这些数据库链接的主机。select * from dba_db_links where db_link like upper('&db_link');

第 4 步：在每个主机（比如说只有一个远程主机，指向数据库 Y）和数据库 X 本身中，触发上述查询（Tom Kyte's）以收集来自远程数据库的会话的详细信息。

第 5 步：在数据库 X 中，检查感兴趣的 SID 及其对应的 GTXID。在远程主机 Y 中查找相同的 GTXID。

第 6 步：从数据库 Y 中获取此 GTXID 的会话 ID，并检查会话等待或其他详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:50:45.693

When you create a database link in database A that points at database B, there is no notification sent to database B so there is no data dictionary table in B that will tell you that A has a link to it. As far as B is concerned, database A is simply another client that periodically opens a connection to the database.

Generally, when A wants to create a database link to B, a user will be created in B for this purpose (assuming the database link uses a fixed user rather than the current user) since you don't want the password for this account to expire regularly and you don't want the database link to be broken if a particular human leaves the company and has his or her accounts removed. You can audit connections on B, either for the particular accounts that have been created for database links or across all users, and then look through the audit logs to identify connections that are coming from servers that house other databases.

# sphinx - 如何使用传入的其他参数让厨师重新启动服务？

> ID：11991763
> 
> 赞同：1
> 
> 时间：2012-08-16T16:38:12.723
> 
> 标签：sphinx, chef-infra

我有一个用于 Sphinx 配置的 Rails 站点模板。同一台机器上可以有多个不同的 Sphinx 服务在不同的端口上运行，每个应用一个。因此，II 只希望在每个站点的相应配置模板发生更改时重新启动 Sphinx。我创建了一个 /etc/init.d/sphinx 脚本，它根据类似于以下的参数重新启动一个 sphinx：

```
/etc/init.d/sphinx restart /etc/sphinx/site1.conf 
```

其中 site1.conf 由 Chef 模板定义。如果模板更改，我真的很想使用 Chef Templates 的通知功能来传递正确的 site1.conf 参数。这可能吗？

或者，我想我可以为每个站点注册不同的服务，类似于：

```
/etc/init.d/sphinx_site1 
```

但是，我更愿意将参数传递给脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:15:58.507

定义`service`资源时，您可以自定义将要运行的启动、停止和重新启动命令。您可以使用这些自定义命令为您拥有的每个站点定义一个`service`资源并设置其相应的通知。

例如：

```
服务“sphinx_site1”做
  支持 :restart => true
  restart_command "/etc/init.d/sphinx 重启 /etc/sphinx/site1.conf"
  行动：无
结尾

模板“/etc/sphinx/site1.conf”做
  通知：重新启动，“服务 [sphix_site1]”
结尾

```

# sharepoint - 导航到 SharePoint 2010 中的文档库时默认为索引页

> ID：11991764
> 
> 赞同：1
> 
> 时间：2012-08-16T16:38:15.940
> 
> 标签：sharepoint, sharepoint-2010

我在 SharePoint 2010 中创建了一个公共 Internet 站点。我已将 index.html 网页上传到文档库，我将其称为“abc”。这是我想要发生的事情：

www.website.com/abc >> 应该自动指向该库中的 index.html。

相反，当我转到那个 URL 时，我被要求登录。然而，我用来编辑站点的常用登录信息没有任何作用，我最终只是被带到空白页面。

如果我输入完整的 URL，www.website.com/abc/index.html，它会转到正确的页面，所以我知道它已经发布了。

index.html 页面是文档库中的唯一项。

文档库设置中列出的网址是[http://www.website.com/abc/Forms/AllItems.aspx](http://www.website.com/abc/Forms/AllItems.aspx)。我认为这是我需要更改以使其默认为 index.html 的内容。有人知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:53:32.663

Sharepoint 文档库的默认页面只能具有默认视图。您可以创建一个视图以在那里进行更改，或者编辑默认视图吗？

如果没有，您可以随时在 Sharepoint Designer 中编辑默认视图并重定向到您的页面，但这有点不合时宜。

# sql-server-2008 - 在 sql server 2008 中创建新表的查询

> ID：11991768
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:38:32.067
> 
> 标签：sql-server-2008

实际上，如何在数据库 SQL Server 2008 中使用查询创建新表

尝试执行查询时出错

这是我的代码

```
 if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FilesStore]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
 drop table [dbo].[FilesStore]
 GO

 CREATE TABLE [dbo].[FilesStore] (
     [FileId] [int] IDENTITY (1, 1) NOT NULL ,
     [OriginalPath] [varchar] (200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
     [FileData] [image] NOT NULL 
 ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
 GO 
```

我收到此错误消息

> *不支持 DROP TABLE SQL 构造或语句 不支持
> CREATE TABLE SQL 构造或语句。*

任何人请帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:43:01.597

我试过这个脚本并且工作得很好。

你有 db_owner 角色吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:48:41.887

Permissions! You do not have sufficient permissions to execute CREATE or DROP. Check the Security database role for your user on your database.

As DROP is not a grantable permission, people who can drop a table are:

*   The dbo
*   The owner of the schema
*   The owner of the table (usually the schema owner but it can be changed to someone else)
*   members of the db_ddladmin fixed database role members of the db_owner fixed
*   database role members of the sysadmin fixed server role
*   grantees of the CONTROL permission on the table or permissions that imply control on the table
*   grantees of the ALTER permission on the schema or permissions that imply alter on the schema.

**Update:**
**How to add yourself as db_owner for your database?**

On the SQL Server Management Studio, go to the Security > Logins node for your SERVER in the tree. Locate the creds that you use to connect to SQL Server, right-click Properties.
Click on User Mapping, check your database checkbox in the list on the right and check the db_owner checkbox in the bottom. Click OK.
Try the query again.

# oracle - ORA-24338: 未执行语句句柄

> ID：11991773
> 
> 赞同：4
> 
> 时间：2012-08-16T16:38:53.553
> 
> 标签：oracle, delphi, delphi-7, odac

我正在使用 Delphi 7、Oracle 10 和 ODAC 组件。

从 LoadTrainResult 方法中，我调用了一个 storedProc。

```
 procedure TfrmTrain.LoadTrainResult;  
    begin  
        StoredProc.StoredProcName :=  'PTRAIN.QTRAIN';    
        StoredProc.Prepare;  
    try        
        StoredProc.ParamByName('P_COURSE').AsString  := CurrentSearch.Course;  
        StoredProc.ParamByName('P_TOPIC').AsString   := CurrentSearch.Topic;  
        StoredProc.ParamByName('P_EMP').AsString     := CurrentSearch.Emp;  
        StoredProc.Open;  
    finally  
        StoredProc.Close;  
    end;  
    end; 
```

架构是

```
 Create or replace PACKAGE TRAIN.pTRAIN  IS 
    TYPE CursorType IS REF CURSOR;   
    PROCEDURE QTRAIN   (p_CursorVar OUT CursorType, p_Course in VarChar2, 
                            p_Topic  in out VarChar2, p_emp in Varchar 2 );  
    END TRAIN.pTRAIN;

    create or replace PACKAGE BODY  TRAIN.pTRAIN  IS  
    PROCEDURE QTRAIN   (p_CursorVar OUT CursorType, p_Course in VarChar2, 
                            p_Topic in out  VarChar2, p_emp in Varchar 2 ) 

    IS    
    BEGIN   
            if p_course is not null then  
            OPEN p_cursorvar for    
                    select * from train.course 
                    where course = p_Course;  
            elsif p_topic is not null then  
            OPEN p_cursorvar for  
                    select * 
                    from train.topic
                    where topic = p_topic;
    end if;         
    Exception
            WHEN OTHERS THEN
            p_TOPIC := '';  
    END QTRAIN;  
    END TRAIN.pTRAIN; 
```

当我编译包时，我没有收到任何错误。但是，当我运行应用程序时，我收到错误 ORA-24338：未执行语句句柄。我调试了我的应用程序，发现错误发生在 StoredProc.Prepare；不在 StoredProc.ExecProc；

我已经阅读了很多关于 ORA-24338 的帖子，但我无法找出我的代码有什么问题。

我发现当我将 else 条件添加到存储过程中时，我没有收到错误。

修改后的 Proc 是

```
 create or replace PACKAGE BODY  TRAIN.pTRAIN  IS  
    PROCEDURE QTRAIN   (p_CursorVar OUT CursorType, p_Course in VarChar2,
                             p_Topic in out  VarChar2, p_emp in Varchar 2 )  
    IS    
    BEGIN   
            if p_course is not null then  
            OPEN p_cursorvar for    
            select *    from train.course 
       where course = p_Course; 

            elsif p_topic is not null then
            OPEN p_cursorvar for
            select * from train.topic
       where topic = p_topic  

            else   
            OPEN p_cursorvar for  
            select * from emp whhere empid = p_emp; 

            end if;
            Exception
            WHEN OTHERS THEN
            p_TOPIC := '';  
            END QTRAIN;  
    END TRAIN.pTRAIN; 
```

其实我不想要其他条件。有什么办法可以摆脱错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-19T14:33:17.003

在我看来，问题在于：在您的存储过程的第一个版本中，可能没有要返回的结果集，但在第二个版本中，您在最后一个 else 中提供了一个结果集。

当我们通过查看完整的错误报告了解 ORA-24338 的含义时，我的怀疑更加强烈：

```
Error: ORA-24338
Text: statement handle not executed 
---------------------------------------------------------------------------
Cause: A fetch was attempted before executing a statement handle. 
Action: Execute a statement and then fetch the data. 
```

**尝试获取**，但在某些情况下，没有任何结果集可以获取，直到您提供了最后一个 else。

您的存储过程通过输出参数返回一个游标，因此您**始终**必须打开该游标。在您的代码的第一个版本中，您没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:57:12.700

DevArt 在 2007 年 8 月 2 日修复了一个错误，上面写着“使用已修复的 REF 游标参数执行准备好的存储过程的错误”。除了他们在错误修复列表中的声明中提供的内容之外，我没有任何其他详细信息。您的 ODAC 版本可能包含该错误。ODAC 当前版本为 8.2.8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:13:07.633

我没有看到 DB 包`PTRAIN`本身有任何问题（模式是`TRAIN`），但是，调用应用程序（Delphi 7？）需要知道如何使用`cursor`. 此外，请尝试在打开游标时使用动态 SQL，例如 -

```
OPEN p_cursorvar for    
'select * from train.course 
where course = :p_Course' USING p_course; 
```

和

```
OPEN p_cursorvar for  
'select * 
from train.topic
where topic = :p_topic' USING p_topic; 
```

# facebook - Facebook 调试器 - “错误解析 URL”

> ID：11991774
> 
> 赞同：0
> 
> 时间：2012-08-16T16:38:54.350
> 
> 标签：facebook, debugging, parsing, url

我已经搜索了很多解决这个问题的方法。由于我发现没有一个解决方案对我有用，所以我发布了我在这个问题上的经验，看看我是否能得到一些帮助。

Theres 这个网站是我前段时间工作的，在 Facebook 上分享链接和使用 facebook like 按钮总是很有效。OG 标签的设置是因为我通常将它们添加到我从事的每个项目中，但我以前从未遇到过这个问题。

查看页面加载后如何在浏览器上显示的源代码（网址：[http](http://www.estanaweb.com.br) ://www.estanaweb.com.br ）：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<meta property="fb:app_id" content="289790431108540" />
<meta property="og:locale" content="pt_br" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.estanaweb.com.br" />
<meta property="og:site_name" content="ESTANAWEB" />
<meta property="og:description" content="Eventos Vips de Porto Velho" />
<meta property="og:image" content="http://www.estanaweb.com.br/wp-content/uploads/logo-estanaweb-facebook.png" /> 
```

OG 标签上的所有信息均有效且正确。我尝试过的几件事：

*   检查数据库查询所花费的时间以查看 facebook 连接是否超时
*   检查标签上的数据是否正确
*   检查网站是否在黑名单上
*   仅使用 OG 标签制作 html 页面
*   以许多不同的顺序订购了 OG 标签
*   删除所有OG标签
*   添加标签，一一添加，主要自己添加
*   删除了我的 .htaccess
*   以不同的方式设置我的 .htacess
*   我没有收到任何错误说该网址是垃圾邮件或类似的东西

无论如何，我的意思是我尝试了很多东西，但我仍然得到解析 url 错误。

关于发生什么事的任何提示？

对不起，如果我的英语有点糟糕，那不是我的主要语言。

提前谢谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:16:11.913

看来您有一个 DNS 问题需要先解决：

```
$ host www.estanaweb.com.br
www.estanaweb.com.br has address 189.113.11.82
Host www.estanaweb.com.br not found: 3(NXDOMAIN)
Host www.estanaweb.com.br not found: 3(NXDOMAIN) 
```

FB 可能无法可靠地抓取它。这是我的主人看到的：

```
$ wget http://www.estanaweb.com.br/
--2012-08-16 14:15:21--  http://www.estanaweb.com.br/
Resolving www.estanaweb.com.br (www.estanaweb.com.br)... failed: hostname nor servname provided, or not known.
wget: unable to resolve host address `www.estanaweb.com.br' 
```

# ruby - Ruby 正则表达式键搜索

> ID：11991777
> 
> 赞同：10
> 
> 时间：2012-08-16T16:39:08.840
> 
> 标签：ruby, hashmap

[http://ruby-doc.org/core-1.9.3/Hash.html#method-i-include-3F](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-include-3F)

可以将 hash.has_key?(String) 转换为具有正则表达式搜索功能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T16:43:54.410

我建议`Hash`使用新方法进行扩展，而不是替换`has_key?`.

```
class Hash
  def has_rkey?(search)
    search = Regexp.new(search.to_s) unless search.is_a?(Regexp)
    !!keys.detect{ |key| key =~ search }
  end
end 
```

这将使用字符串、符号或正则表达式作为参数。

```
irb> h = {:test => 1}
 => {:test=>1}  
irb> h.has_rkey?(:te)
 => true 
irb> h.has_rkey?("te")
 => true 
irb> h.has_rkey?(/te/)
 => true 
irb> h.has_rkey?("foo")
 => false 
irb> h.has_rkey?(:foo)
 => false 
irb> h.has_rkey?(/foo/)
 => false 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-22T17:44:46.277

我认为 using`any?`是 qqbenq 所说的一个很好的解决方案，但我更喜欢使用它，`grep`因为它更简洁。

```
hash.keys.grep(/regexp/).any? 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-04T10:58:30.137

如果您只对是/否的答案感兴趣，那么`any?`可能是一个不错的选择：

```
hash.keys.any? { |key| key.to_s.match(regexp)} 
```

where`regexp`是一个正则表达式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T16:44:17.880

我不知道这个问题的绝对答案，但如果我要为此编写一个 hacky 方法，我会这样做

```
!!hash.keys.detect{ |k| k.to_s =~ /Your_Regex_here/ } 
```

`true`当任何键与正则表达式匹配时，这将返回，`false`否则返回。

# knockout.js - 未捕获淘汰订阅功能关闭

> ID：11991779
> 
> 赞同：1
> 
> 时间：2012-08-16T16:39:23.383
> 
> 标签：knockout.js, closures

我有一个带有一系列项目的淘汰视图模型。我想查看所有项目的一个属性（选定）并在它发生更改时采取行动。

为此，我有一个 SectionManager 可以做到这一点。我初始化管理器并为每个项目设置订阅。没有捕获闭包，`myid`它始终`3`是最后一个值。有人能告诉我我在哪里丢的吗？

示例：如果您单击列表中的某个项目，星号将指示它是否被选中。这样可行。subscribed 函数也被调用，并且`myid`被写入控制台，但总是`3`.

约翰

HTML：

```
 <!DOCTYPE html>
  <html>
  <head>
     <title></title>
     <script type="text/javascript" src="Scripts/jquery-1.7.2.js"></script>
     <script type="text/javascript" src="Scripts/knockout-2.1.0.debug.js"></script>
     <script type="text/javascript" src="test.js"></script>
  </head>
  <body>
     <ul data-bind="foreach: roles">
        <li data-bind="click: toggle">
           <span data-bind="text: id"></span>
           <span data-bind="visible: selected">*</span>
        </li>
     </ul>
  </body>
  </html> 
```

这个脚本：

```
 var roles = [
     { id: 1 },
     { id: 2, selected: true },
     { id: 3 }
  ];

  var viewModel = (function (roles) {
     var obj = {};
     var arr = [];
     for (var i = 0; i < roles.length; i++) {
        arr.push({
           id: roles[i].id,
           selected: ko.observable(roles[i].selected || false),
           toggle: function () {
              this.selected(!this.selected());
           }
        });
     }
     obj.roles = ko.observable(arr);

     return obj;
  })(roles);

  var sectionManager=(function(){
     return {
        init: function (roles) {
           for (var i = 0; i < roles.length; i++) {
              var item = roles[i];
              var myid = item.id;

              item.selected.subscribe(function () {
                 console.log(myid);  // ALWAYS 3!!
              });
           }
        }
     };
  })();

  $(function () {
     sectionManager.init(viewModel.roles());
     ko.applyBindings(viewModel);
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:46:41.373

您遇到了由 JavaScript 中的闭包引起的经典问题。在您的循环中，实际上只有一个名为`myid`. 您在订阅每个项目时创建的函数都可以访问相同的`myid`变量。在循环结束时，它的值为 3，因此当处理程序运行时，它们都会报告该变量的值。

JavaScript 中的闭包和作用域有很多参考资料。例如，这是另一个 SO 问题： [JavaScript 闭包内循环 – 简单实用示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

您处理此问题的一种方法是不使用中间变量并确保您的处理程序与当前项目一起运行。

```
item.selected.subscribe(function () {
    console.log(this.id);
}, item); 
```

在此示例中，第二个参数定义`this`函数运行时间的值。因此，它将以正确的项目作为上下文运行，您可以从`this`.

[http://jsfiddle.net/rniemeyer/WV6g5/](http://jsfiddle.net/rniemeyer/WV6g5/)

您甚至可以`item.id`在第二个参数中使用。

正如您在下面指出的那样，您当然可以创建一个接收变量的函数并让它返回一个函数以围绕该特定值创建一个闭包。

```
var subscriber = function(id) 
{ 
    return function() { 
        console.log(id); 
    }; 
}; 

...

item.selected.subscribe(subscriber(myid)); 
```

在 Knockout 的上下文中，我认为处理您的数据项并确保它`this`在您的处理程序运行时更实际。

# node.js - mongodb 和 EventEmitter 之间的问题

> ID：11991781
> 
> 赞同：0
> 
> 时间：2012-08-16T16:39:36.440
> 
> 标签：node.js, mongodb

我在 node-mongodb-native 和 EventEmitter 之间遇到了一个奇怪的问题。

我已将问题简化为以下代码：

```
var mongodb = require( 'mongodb' ),
    Server = mongodb.Server,
    Db = mongodb.Db,
    events = require( 'events' ).EventEmitter.prototype;

// Create a mongo client object
var client = new Db( 'tartempion',
    new Server(
        '127.0.0.1',
        27017
    )
);

// Open the connection
client.open( function( err, db ) {
    if ( err ) throw err;
    database = db;
    console.log( 'Database driver loaded.' );
    events.emit( 'hi' );
});

// If I comment this out, I don't get the error anymore
// and the "Database driver loaded." log is displayed.
events.on( 'hi', function() {
    console.log( 'hey man' );
}); 
```

我收到了这个错误：

```
net.js:140
    // Uncomment the following lines after libuv backend is stable and API
      ^
RangeError: Maximum call stack size exceeded 
```

我认为这可能与回调中的事件有关，但这段代码有效：

```
events.on( 'hi', function() {
    console.log( 'hey man' );
});

f( function() {
    events.emit( 'hi' );
});

function f( callback ) {
    callback();
} 
```

所以...我没有看到问题出在哪里。

仅供参考，我在 node-mongodb-native [issue queue](https://github.com/mongodb/node-mongodb-native/issues/680)上交叉发布了这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:24:57.867

如果你说：

```
events = require( 'events' ).EventEmitter.prototype;
event.on('foo'); 
```

你是在自找麻烦，因为每个事件对象都会得到这个绑定（因为你正在将它写入所有事件的基本原型）......

实例化一个新对象来绑定你的事件要好得多（正如乔纳森所说）......

sharedEventEmitter.js

```
var events = require('events');
var eventEmitter = new events.EventEmitter();
module.exports = eventEmitter; 
```

现在从你的项目的其余部分 - 你可以把它当作一个单例 - 一个对象会向任何正在监听的东西发出事件 - 每次你需要（'sharedEventEmitter'）时，你都会得到相同的实例（它是一个单例）：

一个.js

```
var sharedEvents = require('./sharedEventEmitter');
sharedEvents.on('foo', function(st){
  console.log(st);
}) 
```

b.js

```
var sharedEvents = require('./sharedEventEmitter');
sharedEvents.emit('hello from another file'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:39:04.733

您必须定义`events`为一个实例，`EventEmitter`而不仅仅是对`EventEmitter.prototype`对象的引用：

```
var ...,
    EventEmitter = require('events').EventEmitter,
    events = new EventEmitter; 
```

或作为继承自的对象`EventEmitter.prototype`：

```
var ...,
    events = Object.create(require('events').EventEmitter.prototype); 
```

`EventEmitter.prototype`每次运行只能获得一个`node.exe`（因为结果`require('events')`被缓存），因此将其用作实例可能会修改整个核心 Node API 和 .3rd 方模块（如`mongodb`.

* * *

正如[Brandon 建议](https://stackoverflow.com/questions/11991781/issue-between-mongodb-and-eventemitter/11993430#comment15995002_11993430)的那样，如果您需要在 2 个模块中访问实例，请在第 3 个模块中定义它：

```
// emitter.js
var EventEmitter = require('events').EventEmitter;
module.exports = new EventEmitter; 
```

```
var ...,
    events = require('./emitter'); 
```

# java - ColdFusion 在两个不同的服务器上生成的不同存根

> ID：11991782
> 
> 赞同：0
> 
> 时间：2012-08-16T16:39:42.667
> 
> 标签：java, web-services, coldfusion, stubs

我们有一个开发服务器和一个实时服务器，都运行 ColdFusion 9。ColdFusion 版本相同，Java 版本相同，JVM 版本相同。我正在尝试使用coldfusion连接到外部Web服务，并且在开发上它工作正常。在现场，我收到错误：“无法找到带有参数 {blah blah} 的 Web 服务操作 XXX。” 我检查了两台服务器上的存根，实时服务器生成的存根比开发服务器多，它们都称为 ArrayOf[XYZ]（其中 [XYZ] 是某个对象）。在开发上，我能够将具有嵌套组件和组件数组的组件传递给外部 Web 服务并获得响应。在现场，我得到了错误，我相信这是因为在现场，它期望数组实际上是对象。什么会导致这种情况发生，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:44:09.317

我发现了问题。有一个不同版本的 Apache Axis 在实时服务器上运行——一个非常旧的 1.2.1 版本。我们实时升级到在我们的开发服务器上运行的 1.4 版本，它解决了这个问题。

# php - 来自主键的唯一 url

> ID：11991785
> 
> 赞同：1
> 
> 时间：2012-08-16T16:39:52.430
> 
> 标签：php, mysql, primary-key

我正在尝试创建一个类似于 youtube`/v=xxx`在外观和行为上的 URL。简而言之，用户将上传文件并能够通过该 URL 访问它们。此 URL 代码需要是某种形式的数据库主键，以便页面可以收集所需的数据。我是数据库新手，这更像是一个数据库问题。

在我的数据库中，我有一个自动增量主键，用于访问文件数据。我想使用该号码来创建文件的 URL。我开始研究不同的哈希函数，但我担心冲突。我不希望两个不同文件使用相同的 URL。

我也考虑使用`uniqid()`作为我的主键`CHAR(13)`，直接使用它。但有了这个，我担心效率。另外环顾四周，我似乎找不到太多关于它的信息，所以这可能是一个奇怪的想法。更不用说在生成 id 时我需要测试冲突，这可能是低效的。自动增量要容易得多。

有什么好的解决办法吗？我的任何一个想法都会奏效吗？如何从自动递增的主键生成唯一 URL 并避免冲突？

我倾向于我的第二个想法，它不会非常有效，但是当需要将东西添加到数据库（测试冲突）时会导致最大的性能缺陷，这对于最终用户来说只会发生一次。另一个性能缺点可能是实际查找字符而不是整数。但我主要担心这是不好的做法。

编辑：

一个简单的解决方案就是直接使用自动递增的值。叫我挑剔，但这看起来有点难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:54:21.987

生成不冲突的短哈希确实会让人头疼。因此，相反，Stackoverflow 的 slug 格式非常有前途，并且可以保证生成不重复的 url。

例如，这个非常相同的问题有

> `https://stackoverflow.com/questions/11991785/unique-url-from-primary-key`

在这里，它有唯一的主键和一个标题，使它对 SE 更友好。

* * *

然而，正如评论所言，他们很少有人问过问题，这可能会清楚，为什么？你正在尝试的最好被排除在外。

1.  [如何为 URL 生成唯一哈希？](https://stackoverflow.com/questions/1629391/how-to-generate-a-unique-hash-for-a-url)
2.  [创建 Tinyurl 风格的哈希](https://stackoverflow.com/questions/702916/create-tinyurl-style-hash)

创建短散列会大大增加冲突的机会，因此更好的用户`base64`或`sha512`函数可以创建安全散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:47:42.007

You can simply make a hash of the time, and afterwards check that hash (or part of that hash in your DB. If you set an index on that field in your DB (and make sure the hash is long enough to not make a lot of collisions), it won't be an issue at all time wise.

```
<?php

$hashChecked = false;

while( $hashChecked === false ){
  $hash = substr( sha1(time().mt_rand(9999,99999999)), 0, 8);  //varchar 8 (make sure that is enough with a very big margin)
  $q = mysql_query("SELECT `hash` FROM `tableName` WHERE `hash` = '".$hash."'");
  $hashChecked = mysql_num_rows() > 0 ? false : true;
}

mysql_query("INSERT INTO `tableName` SET `hash` = '".$hash."'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:00:29.197

如果您愿意使用随机数来生成短 URL，这相当简单。例如，您可以这样做：

```
 SELECT BASE64_ENCODE(CAST(RAND()*1000000 AS UNSIGNED INTEGER)) AS tag 
```

这能够为您提供一百万个不同的标签。要获得更多可能的标签，请增加与 RAND() 数相乘的值。这些标签值将难以预测。

为确保不会重复，您需要对标签值进行重复数据删除。这很容易做到，但需要您的程序中的逻辑。将标签值插入到使用它们作为主键的表中。如果插入失败，请重试，重新调用 RAND()。

如果您接近标签的最大数量，您将开始遇到大量插入失败（标签冲突）。

BASE64_ENCODE 来自您需要安装的存储函数。你可以在这里找到它：

[http://wi-fizzle.com/downloads/base64.sql](http://wi-fizzle.com/downloads/base64.sql)

如果您使用的是 MySQL 5.6 或更高版本，则可以使用内置的 TO_BASE64 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:22:50.237

我想做类似的事情（但用文章，而不是上传的文件），并想出了一些不同的东西：

*   取一个大于最大文档数 [n] 的素数 [y]（远）（例如，25000 足以容纳文档总数，而 1000099 是比 25001 大得多的素数）
*   对于当前文档 id [x]：(x*y) 模数 (n+1)
*   这将生成一个介于 1 和 n 之间且永不重复的数字

尽管 url 可能看起来像一个传统的主键，但它确实有一点优势，即每个后续文档都有一个与前一个文档完全无关的 id；有些人还争辩说，不包括主键也有非常轻微的安全优势......

# sql - 如何删除 Access 表中的重复项（不使用查询）？

> ID：11991786
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:39:52.057
> 
> 标签：sql, ms-access, vba, ms-access-2007

为清楚起见，我的表中有 2 列。我觉得必须有一种方法可以做到这一点，但如果不做一个简单的查询，我想不出一种方法来实际做到这一点。我假设使用 VBA 来执行 UPDATE 语句并将其放入宏中，但是在做了一些研究之后，我没有想出任何特别有用的东西。我曾考虑过使用 DISTINCT，但似乎我不能在 UPDATE 语句中使用它。我应该如何解决这个问题？

编辑：抱歉，我似乎没有添加足够的信息，所以我将在此处添加。

如果我从这个开始：

```
Column 1 | Column 2
-------------------
    A    |    1
    C    |    3 
    B    |    2
    A    |    1
    C    |    3 
```

我试图结束这个（行本身的顺序实际上并不重要）：

```
Column 1 | Column 2
-------------------
    A    |    1
    C    |    3
    B    |    2 
```

有人问我为什么不尝试通过查询来做到这一点。答案是因为我使用了一个链接到我的表的表单（通过多个中间查询）。在这个表格上，我必须能够输入数据并将其添加到我的表格中。如果我使用查询删除重复项，则查询和表之间的关系不再是一对一的，因此我将无法在表单中输入信息。

我希望这是有道理的，但如果没有，请告诉我，我会很乐意进一步详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:59:10.413

您将需要使用一个记录集（因为您不能从您使用查询指定的表结构中删除重复项，因为没有唯一的键来区分匹配的行，并且要获得一个您必须创建的键一个新表）：

```
dim rst as new adodb.recordset
dim c1 as string
dim c2 as string
rst.open "SELECT Column1, Column2 FROM TableName ORDER BY Column1, Column2" _
    , currentproject.connection, adOpenKeyset, adLockOptimistic
restart_:
c1 = rst(0)
c2 = rst(1)
rst.movenext
do while not rst.eof
    if rst.fields(0) = c1 and rst.fields(1) = c2 then  //duplicate
        rst.delete
        rst.requery
        goto restart_
    else
        c1 = rst(0)
        c2 = rst(1)
        rst.movenext
    end if
loop 
```

我在删除操作中使用的语法可能很狡猾（对不起，我总是使用查询来进行删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:53:34.167

使用 distinct 获取所需的行并将它们插入到新表中。重命名旧表并将其替换为新表。

# .net - Intranet 应用程序的 WCF 加密选项？

> ID：11991794
> 
> 赞同：0
> 
> 时间：2012-08-16T16:40:26.830
> 
> 标签：.net, wcf, encryption, .net-4.0, wcf-security

对于我对这个话题的理解薄弱，我深表歉意，我希望这个问题不要太宽泛。

我想开发一个带有 WCF 服务的 .NET 4 Intranet 应用程序。客户端将是 Windows 服务（以 SYSTEM 身份运行）。我不需要对流量进行身份验证（但愿意），但我*确实*需要对流量进行加密。

我的问题是：使用 WCF 服务加密流量有哪些选择？如果解决方案依赖于 Active Directory，如果我的客户端以 SYSTEM 身份运行，而不是以 AD 用户身份运行，我可以使其工作吗？

如果解决方案依赖于证书，我该如何分发/生成它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:20:16.533

我能想到的最简单的方法是只使用`netTcpBinding`服务的端点。由于这是一个 Intranet 应用程序，并且我假设您希望所有客户端都是 Windows，因此此绑定将为您提供性能和安全性的最佳组合，而配置开销很小。

此绑定的默认安全模式`Transport`意味着它应用于消息传输的实际连接，而不是单个消息（尽管如果您愿意，可以这样配置）。来自[MSDN 关于传输安全](http://msdn.microsoft.com/en-us/library/ms729700.aspx)：

> NetTcpBinding 类使用 TCP 进行消息传输。传输模式的安全性是通过在 TCP 上实施传输层安全性 (TLS) 来提供的。TLS 实现由操作系统提供。

有关如何配置绑定及其可用选项的详细信息，请参阅[netTcpBinding 的 MSDN 。](http://msdn.microsoft.com/en-us/library/ms731343.aspx)

# php - 意外的语法和解析错误 T_RETURN

> ID：11991798
> 
> 赞同：0
> 
> 时间：2012-08-16T16:40:49.807
> 
> 标签：php, syntax-error, parse-error

我有这个功能，它返回`Parse error: syntax error, unexpected T_RETURN`. 我会很感激你帮助我。谢谢。

```
function getPin(){
    return substr(str_shuffle('ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ123456789123456789123456789'), 0, 6); ;
}
function validPin(){
    $pre = getPin();
    $sql = mysql_query("SELECT * FROM `images` WHERE `pin` = '$pre' ");
    $count = mysql_num_rows($sql);
    if($count > 0){
        return validPin();
    }else{
        return $pre;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:54:03.630

那么在前面的代码行中可能没有右括号。您还应该清理第 11 行的双分号。

# matlab - 如何调整随机结果

> ID：11991799
> 
> 赞同：-1
> 
> 时间：2012-08-16T16:40:54.880
> 
> 标签：matlab

我在调整数字随机结果时遇到问题，

```
jum_k = 14;
jum_b = 12;

result = randint(jum_k, jum_b, [0 2]); 
```

从而对最终结果有约束。值“0”不应连续出现超过 3 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:44:39.893

然后，您的随机条目以未知的权重非均匀分布，即每行零的数量可以 <= 3 ([0, 1, 2, 3])。我会这样解决它：`[m x n]`在 [1,2] 中均匀地填充一个矩阵，选择（随机）每行零个数，然后选择（随机）它们的位置。例子：

```
jum_k = 14;
jum_b = 12;

result = randi([1, 2], jum_k, jum_b);
for i = 1:jum_k
    nZeros = randi([0, 3]); % number of zeros (random)
    result(i, randi(jum_b, 1, nZeros)) = 0; % locations in line (random)
end; 
```

如果您需要每行的确切数量的零，您可以相应地进行修改。

**编辑**（在澄清评论中的问题后）：为了每行按顺序容纳不超过 3 个零，例如，`[1,0,0,0...2]`您可以按元素填充矩阵并检查先前元素中的模式 [0,0,0,0] （保留先前值的缓冲区）。

```
result = nan(jum_k, jum_b); % intitialize
for i = 1:jum_k
    for j = 1:jum_b
        result(i, j) = randi([0, 2]); % assign value       
        if j>3 && ~all(result(i, j-3:j)) % check previous values
            result(i, j-randi([0, 3])) = randi([1, 2]); % randomly change one 
        end
    end
end

%% check/test that all lines have less 4 zeros in sequence
f = @strfind;
for i = 1:jum_k
    t(i) = isempty(f(result(i,:),[0 0 0 0]));
end
T = all(t); 
```

它不是最佳的（MATLAB 方面），但可以完成这项工作。

# java - 无法理解现实世界应用程序中的枚举

> ID：11991801
> 
> 赞同：1
> 
> 时间：2012-08-16T16:41:02.537
> 
> 标签：java, enums

我试图了解何时可以在 Java 中使用枚举。

所以，假设我有三个枚举值：

```
enum Activity {
    STUDENT, MECANICIAN, TEACHER
} 
```

如何在现有类中使用这个枚举`Person`类？它是如何保存在数据库中的？

```
class Person {
    private String name;
    private String age;
    private String activity; // !!!
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:42:26.453

只需将枚举添加到`Person`：

```
class Person {
    private String name;
    private String age;
    private Activity activity; 
} 
```

持久化该字段的一种方法是使用诸如[Hibernate](http://www.hibernate.org/)之类的 ORM ，例如：

```
 @Enumerated(EnumType.STRING)
    private Activity activity; 
```

将该字段映射到数据库中的文本类型字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:45:18.177

它们有助于取代必须使用抽象整数。不是job=1，而是job=STUDENT。当然你可以使用数字，但你的代码将很难理解。另外，您可以将活动用作必要的类型。因此，每当您有一个函数 changeJob(int val) 时，您都可以使其 changeJob(activity val) 强制传递您的一个谜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:55:49.753

Enum 是可迭代的，这很好，如果你想使用这样的值：

```
public static String getStatusStr(Status s) {
    return Messages.get("softDeleteable.status." + s.name());
}

public static List<DropDownData> getStatusDataSource() {
    List<DropDownData> retval = new ArrayList<DropDownData>();

    for(Status s : Status.values()) {
        retval.add(new DropDownData(s.name(), getStatusStr(s) ));
    }

    return retval;
} 
```

其中 DropDownData 是一个简单的值，标签对象，Messages 是用来翻译的（播放框架）

# diff - Google 的 Courgette 可以在 Mac 和 Linux 上运行吗？

> ID：11991806
> 
> 赞同：7
> 
> 时间：2012-08-16T16:41:37.990
> 
> 标签：diff

上次我检查时，谷歌 diff Courgette 仅适用于 Windows 32 位平台，它还可以在 Linux 和 OSX 上使用。还是这样吗？

如果是，是什么让 Courgette 只适用于 Windows 而不是跨平台？它不只是二进制差异吗？Chrome 目前在 Linux 和 Mac 上使用什么来进行差异更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:05:45.780

根据这个设计文档，courgette 知道足够的汇编语言来更新指针固定数量以减少补丁大小：

[http://dev.chromium.org/developers/design-documents/software-updates-courgette](http://dev.chromium.org/developers/design-documents/software-updates-courgette)

在 64 位环境中，指针的大小和指令集的差异足以使小胡瓜高效工作并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:40:09.900

Courgette 适用于 Linux 和 ELF32。它还[不适用于 ELF64](http://code.google.com/p/chromium/issues/detail?id=124521)。

# php - MySQL PHP锁定表，同时扩展连接时是否有更好的解决方案

> ID：11991807
> 
> 赞同：3
> 
> 时间：2012-08-16T16:41:42.377
> 
> 标签：php, mysql

对于该代码，任何人都可以为我提供更好的解决方案：

```
<?php

try {
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $password);

    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbh->beginTransaction();

    $dbh->exec("LOCK TABLES test2 WRITE");

    $row = $dbh->query('SELECT * from test2 WHERE c > 0 LIMIT 1');

    $stmt = $dbh->prepare("UPDATE test2 SET c=c-1 WHERE a=:a and c>0");
    $stmt->bindParam(':a', $row['a']);
    $stmt->execute();

    /**
    ...
    ....
    .....
    **/

    $dbh->exec("UNLOCK TABLES");

    $dbh->commit();
    $dbh = null;
} catch (PDOException $e) {
    error_log("Error!: " . $e->getMessage() . "\n", 3, "./my-errors.log");
    exit();
} 
```

当我同时连接到该脚本时，每个连接都应该在表 test2（字段 A）中有自己的行。

感谢您的想法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:44:52.870

如果您不需要知道`a`参数，可以使用以下查询

```
UPDATE test2 SET c=c-1 WHERE c>0 LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:33:41.163

`LOCK TABLES`并`UNLOCK TABLES`自动关闭您的交易。您需要一个[`SELECT .. FOR UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/innodb-locking-reads.html)忘记锁定和解锁表。

`SELECT FOR UPDATE`行级别的锁。如果他们假装获得相同的记录，则其他执行`SELECT FOR UPDATE`将等待第一次转换的结束。

# ios - Cocos2D - 更好地保留 CGRects 数组或 CCSprites 数组来跟踪命中区域？

> ID：11991811
> 
> 赞同：0
> 
> 时间：2012-08-16T16:41:53.543
> 
> 标签：ios, cocos2d-iphone

我正在 cocos2d 中制作一个简单的棋盘游戏来弄湿我的脚。为了跟踪用户点击，我打算监听游戏方块的点击，而不是游戏块以简化跟踪游戏块。这将是 8x8 板。

是否更有效：

A. 制作一个 CGRect 数组进行测试，并且需要在添加到数组之前将结构放入 NSObject 中。接缝很简单，但看起来每次需要访问 CGRect 时都需要做很多工作。

或者

B. 制作实际的 CCSprite 并针对它们的边界矩形进行测试。代码很简单，但是屏幕上有额外的 64 个不需要的视觉对象，导致内存使用膨胀。

甚至

C. 其他一些方法，我从根本上误解了这个工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:20:51.833

我同意，如果您的棋盘完全是静态的，似乎没有必要为棋盘上的每个游戏方块创建一个精灵。

然而 CGRect 不是一个对象类型，所以它不能被添加到 NSMutableArray 中，而且我还假设在某些时候你会想要对你的游戏方块做其他事情，比如突出显示它们和其他东西。我建议你做的是创建一个名为 GameSquare 的类，它继承自 CCNode 并将它们放入一个数组中：

```
// GameSquare.h

@interface GameSquare : CCNode {
    //Add nice stuff here about gamesquares and implement in GameSquare.m
} 
```

之后，您可以将 gamesquares 创建为节点：

```
// SomeLayer.h
@interface SomeLayer : CCLayer {
    NSMutableArray *myGameSquares;
    GameSquare *magicGameSquare;
}

@property (nonatomic, strong) GameSquare *magicGameSquare;

// SomeLayer.m

/* ... (somewhere in the layer setup after init of myGameSquares) ... */

GameSquare *g = [[GameSquare alloc] init];
g.position = CGPointMake(x,y); //replace x,y with your coordinates
g.size = CGSizeMake(w,h); //replace w,h with your sizes

[myGameSquares addObject:g];

self.magicGameSquare = [[GameSquare alloc] init];
magicGameSquare.position = CGPointMake(mX,mY); //replace with your coordinates
magicGameSquare.size = CGSizeMake(mW,mH); //replace with your sizes 
```

之后，您可以像这样（在您的 CCLayer 子类中）对 gamesquares 进行命中测试：

```
// SomeLayer.m
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    CGPoint location = [self convertTouchToNodeSpace: touch];

    // Example of other objects that user might have pressed
    if (CGRectContainsPoint([magicSquare getBounds], location)) {
        // User pressed magic square!
        [magicSquare doHitStuff];
    } else {
        for (int i=0; i<myGameSquares.count; i++) {
            GameSquare *square = [myGameSquares objectAtIndex:i];    

            if (CGRectContainsPoint(square.boundingBox, location)) {
                // This is the square user has pressed!
                [square doHitStuff];
                break;
            }
        }
    }     

    return YES;
} 
```

是的，您必须浏览列表，但除非玩家可以一次按多个方格，否则您可以在找到正确的方格后立即停止搜索，如示例中所示。

（假设使用 ARC）

PS。如果您在某些时候需要为 GameSquare 添加任何精灵，只需在您的 GameSquare 类中添加一个 CCSprite 成员并引用它。

# c++ - 转换 MatLab 代码 - 困惑

> ID：11991814
> 
> 赞同：0
> 
> 时间：2012-08-16T16:41:57.673
> 
> 标签：c++, matlab

基本上，我有最后一段代码可以从 MatLab 转换为 C++。

该函数接收一个 2D 向量，然后根据 2 个标准检查 2D 向量的元素，如果不匹配，则删除块。但我对 MatLab 中的代码想要返回的内容感到困惑，是 2D 还是 1D 向量？这是代码：

```
function f = strip(blocks, sumthresh, zerocrossthresh)

% This function removes leading and trailing blocks that do 
% not contain sufficient energy or frequency to warrent consideration.
% Total energy is measured by summing the entire vector.
% Frequency is measured by counting the number of times 0 is crossed.
% The parameters sumthresh and zerocrossthrech are the thresholds,
% averaged across each sample, above which consideration is warrented.

% A good sumthresh would be 0.035
% A good zerocrossthresh would be 0.060

len = length(blocks);
n = sum(size(blocks)) - len;
min = n+1;
max = 0;
sumthreshtotal = len * sumthresh;
zerocrossthreshtotal = len * zerocrossthresh;
for i = 1:n
currsum = sum(abs(blocks(i,1:len)));
currzerocross = zerocross(blocks(i,1:len));
if or((currsum > sumthreshtotal),(currzerocross > zerocrossthreshtotal))
if i < min
  min = i;
end
if i > max;
  max = i;
  end
end
end

% Uncomment these lines to see the min and max selected
% max
% min

 if max > min
   f = blocks(min:max,1:len);
 else
 f = zeros(0,0);
end 
```

或者，与其返回另一个向量（无论是 1D 还是 2D），不如实际发送向量的内存位置并从中删除块？所以例如..

```
for(unsigned i=0; (i < theBlocks.size()); i++)
{
  for(unsigned j=0; (j < theBlocks[i].size()); j++)
  {
      // handle theBlocks[i][kj] .... 
  }
} 
```

另外，我不明白这一行：

```
currsum = sum(abs(blocks(i,1:len))); 
```

基本上是：（i，1：len）

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:35:13.817

`blocks(i,1:len)`告诉数组它想要从`blocks[i][1 to the end]`. 因此，如果它是一个 3x3 数组，它会执行以下操作：

```
blocks[i][1]
blocks[i][2]
blocks[i][3]
.
.
.
blocks[i][end] 
```

然后它取矩阵内容的绝对值并将它们加在一起。它返回一个 [x][x] 矩阵，但长度将是 0x0 或 (max)X(len)。

# php - JQuery.ajax() 方法未执行

> ID：11991820
> 
> 赞同：1
> 
> 时间：2012-08-16T16:42:24.490
> 
> 标签：php, javascript, jquery, web-applications

我有一个调用 JavaScript 方法的按钮，如下所示：

```
processSelection = function(filename) {
  //alert('method reached');
   $.ajax({
      url: "sec/selectUsers.php",
      data: "filename="+filename,
      cache: false,
      dataType:'html',

      success: function(data) {
        //$('#uploader').html(data);
        $('#noUsers').sortOptions();
        values = $('#noUsers').children();

        for (i = 0; i < values.length; i++) {
          $(values[i]).bind('dblclick',switchUser); 
        }

        $('#addButton').bind('click',addSelection);
        $('#removeButton').bind('click',removeSelection);
        $('#submitButton').bind('click',addUsersToFile);
      },

      error: function (request, textStatus, errorThrown) {
          alert('script error, please reload and retry'); 
      }

   }); /* ajax */
} 
```

它不会进入`selectUsers.php`脚本，也不会发布错误消息。当我单击“添加用户”按钮时，它什么也不做。其他方法：`switchUser`、`removeSelection`、`addSelection`和`addUserstoFile`已定义。

我对 JavaScript 和 php 相当陌生，并且已被分配在我们的网站上运行维护的这个项目。我的 php_error.log 也没有显示错误。如果有人对此特定问题或一般调试有任何建议，我将非常感激。

这是点击事件：

```
 <input type="button" value="add users" onclick="processSelection('<?=$drFile['name']?>')"/> 
```

好的，

为了简化我的问题，我这样做了：

```
processSelection = function(){
              //alert('method reached');
               $.ajax({
                          url: "sec/testPage.php",
                          cache: false,
                          success: function() {
                                              alert('success');
                          },
                          dataType:'html',
                          error: function (request, textStatus, errorThrown) {
                              alert('script error, please reload and retry'); }
                     }); 
```

}

其中 testPage.php 只是一个包含一些值的表。

现在，当我单击按钮时，它显示“成功”，但从不显示 testPage.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:54:06.737

```
dataType: 'HTML' 
```

据我所知，必须在你的成功方法之前。如果仍然不起作用，请尝试以下操作：

它不会显示测试页面，因为您没有在当前正文中附加任何内容。如果您在屏幕上看到“成功”，您的脚本就会成功执行。您需要做的就是如果您在 testPage 中生成了 html，将所有 html 分配给一个 php 变量，然后只回显它而不是像返回它一样

```
 echo $myhtmlgenerated 
```

和改变

```
 success: function() { .... 
```

至

```
 success: function(result) { 
   $(body).append(result);
 } 
```

或者您可以使用它并指定一个特殊的 div 来保存该页面的内容。

# algorithm - F# 将列表转换为树

> ID：11991824
> 
> 赞同：6
> 
> 时间：2012-08-16T16:42:34.113
> 
> 标签：algorithm, recursion, f#, tree

我有一个元组列表 int*string ，其中 int 是级别，字符串是名称

```
let src = [
        (0, "root");
            (1, "a");
                (2, "a1");
                (2, "a2");
            (1, "b");
                (2, "b1");
                    (3, "b11");
                (2, "b2");
        ] 
```

我需要将其转换为以下

```
let expectingTree = 
    Branch("root", 
    [
        Branch("a",
            [
                Leaf("a1");
                Leaf("a2")
            ]);
        Branch("b",
            [
                Branch("b1", [Leaf("b11")]);
                Leaf("b2")
            ]);
    ]); 
```

以下是我如何做到这一点的方式，但任何人都可以提出更好的方法来实现这一目标。我是 F# 新手，做同样事情的 C# 代码会更短一些，所以我想我错了。

```
type Node = 
    | Branch of (string * Node list)
    | Leaf of string

let src = [
            (0, "root");
                (1, "a");
                    (2, "a1");
                    (2, "a2");
                (1, "b");
                    (2, "b1");
                        (3, "b11");
                    (2, "b2");
            ]

let rec setParents (level:int) (parents:list<int>) (lst:list<int*int*string>) : list<int*int*string> =
    //skip n items and return the rest
    let rec skip n xs = 
        match (n, xs) with
        | n, _ when n <= 0 -> xs
        | _, [] -> []
        | n, _::xs -> skip (n-1) xs

    //get parent id for given level
    let parentId (level) = 
        let n = List.length parents - (level + 1)
        skip n parents |> List.head 

    //create new parent list and append new id to begin
    let newParents level id =
        let n = List.length parents - (level + 1)
        id :: skip n parents

    match lst with
    | (id, l, n) :: tail -> 
                        if l = level then (id, parentId(l), n) :: setParents l (newParents l id) tail
                        elif l <= level + 1 then setParents l parents lst
                        else [] //items should be in order, e.g. there shouldnt be item with level 5 after item with level 3
    | _ -> []

let rec getTree (root:int) (lst: list<int*int*string>) =

    let getChildren parent = 
        List.filter (fun (_, p, _) -> p = parent) lst

    let rec getTreeNode (id:int) (name:string) =
        let children = getChildren id
        match List.length children with
        | 0 -> Leaf(name)
        | _ -> Branch(name, 
                        children
                        |> List.map (fun (_id, _, _name) -> getTreeNode _id _name))

    match getChildren root with
    | (id, _, n) :: _ -> getTreeNode id n
    | _ -> Leaf("")

let rec printTree (ident:string) (tree:Node) = 
    match tree with
    | Leaf(name) -> 
        printfn "%s%s" ident name
    | Branch(name, children) -> 
        printfn "%s%s" ident name
        List.iter (fun (node) -> printTree ("   " + ident) node) children

let tree = 
    src
    |> List.mapi (fun i (l, n) -> (i+1, l, n)) //set unique id to each item
    |> setParents 0 [0] //set parentId to each item
    |> getTree 0

printTree "" tree

Console.ReadKey() |> ignore 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:07:42.463

`Leaf`首先，如果您的分支包含子树列表，您实际上不需要区分大小写，因为叶子只是没有子树的分支。所以，我将使用以下树类型：

```
type Tree = 
  | Branch of string * list<Tree> 
```

将列表转换为树的核心功能可能更容易使用显式递归列表处理来实现。您可以一次性完成 - 只要找到嵌套索引（或在获得较小索引时从适当数量的递归调用返回），只需遍历元素并启动新分支。这是我的尝试：

```
/// Build a tree from elements of 'list' that have larger index than 'offset'. As soon
/// as it finds element below or equal to 'offset', it returns trees found so far
/// together with unprocessed elements.
let rec buildTree offset trees list = 
  match list with
  | [] -> trees, [] // No more elements, return trees collected so far
  | (x, _)::xs when x <= offset -> 
      trees, list // The node is below the offset, so we return unprocessed elements
  | (x, n)::xs ->
      /// Collect all subtrees from 'xs' that have index larger than 'x'
      /// (repeatedly call 'buildTree' to find all of them)
      let rec collectSubTrees xs trees = 
        match buildTree x [] xs with
        | [], rest -> trees, rest
        | newtrees, rest -> collectSubTrees rest (trees @ newtrees)
      let sub, rest = collectSubTrees xs []
      [Branch(n, sub)], rest 
```

该函数采用初始偏移量和到目前为止收集的树。该`trees`参数将始终存在`[]`，并且您需要一些初始值`offset`。结果是给定级别以下的树列表和剩余元素的列表：

```
let res = buildTrees -1 [] src 
```

假设 root 高于 -1，您可以忽略元组的第二部分（它应该是空列表）并获得第一棵树（应该只有一个）：

```
/// A helper that nicely prints a tree
let rec print depth (Branch(n, sub)) =
  printfn "%s%s" depth n
  for s in sub do print (depth + "  ") s

res |> fst |> Seq.head |> print "" 
```

# php - Magento：在产品详细信息页面上高效显示可用的运输和付款方式

> ID：11991825
> 
> 赞同：0
> 
> 时间：2012-08-16T16:42:38.093
> 
> 标签：php, performance, magento

我想在产品详细信息页面上显示可用的运输和付款方式。

例如，付款方式的可用性可能取决于产品价格。产品类型、重量、运输类型的特殊属性的运输方式/价格。

在产品详细信息页面上显示此信息的一种方法是创建临时报价并收集总计。

有没有更快的方法来实现这一点，而无需复制特定运输和支付方式中的逻辑？

逻辑告诉我：不，没有——因为付款和运输方式可能仅取决于报价的任何属性。

但也许有人有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:53:58.143

也许尝试对处理计算的控制器使用 ajax 调用。

这会给你带来两件事：

1.  您正在使用中央 Magento 逻辑（因此在计算时避免了任何潜在的错误）。
2.  该页面不需要重新加载，从而避免了大量的开销和用户的挫败感。

希望这会有所帮助。

# spring-mvc - 如何将值从jsp传递给控制器

> ID：11991826
> 
> 赞同：1
> 
> 时间：2012-08-16T16:42:47.393
> 
> 标签：spring-mvc, controller, jsp-tags, taglib

我在 JSP 中有一些代码如下：

```
<c:iterate name="list" id="payment" index="idx">
<tr class="gRowEven"
  _paid="<c:write name="payment" property="paid"/>"> 
```

现在我的问题是我想根据变量调用控制器中的方法`_paid`。我可以做一个`request.setAttribute("_paid", _paid)`

我假设它会起作用。但我不应该那样做。所以我想知道是否还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:58:17.320

您可以将该值传递给隐藏的输入字段（在表单提交时）

```
<form action='your controller' method='POST'>
    ...
    <input type='hidden' id='newfield' name='newfield' value=''/>
</form> 
```

然后您的控制器可以检索其值（使用 request.getParameter('newfield') 或 MVC 框架提供的方法）

* * *

或者，如果您的控制器接受 GET 请求，则只需附加到 URL

* * *

顺便一提，

```
request.setAttribute("_paid",_paid); 
```

可能对你不起作用。因为此调用仅在页面加载时执行，而不是在您提交页面时执行。此外，当您提交页面时，它将有一个新的新请求

* * *

编辑：（这就是我所说的“将该值传递给隐藏的输入字段（在表单提交时）”的意思）

```
<script type='text/javascript'>
    function updateHiddenField() {
        var trPaid = document.getElementById('trPaid'); //assume tr field's id is trPaid
        //if tr doesn't have an id, you can use other dom selector function to get tr 
        //element, but adding an id make things easier
        var value = trPaid.getAttribute('_paid');
        document.getElementById('newfield').value = value;
        document.getElementById('form1').submit();
        return false;
    }
</script>

<form action='your controller' id='form1' method='POST'  
        onsubmit='javascript:updateHiddenField();'>
    ...
</form> 
```

然后 _paid 的值将通过 newfield 参数中的请求传递

* * *

以下是使用 Spring MVC 时获取参数的方式

```
@Controller
@RequestMapping("/blah")
public class MyController {

    @RequestMapping(value="/morepath" method = RequestMethod.POST)
    public ModelAndView test(@RequestParam("newfield") int paid) {
        logger.debug("here's the value of paid: " + paid);
    }
 ... 
```

# c# - 这种“使声明更接近使用”真的更可取吗？

> ID：11991828
> 
> 赞同：9
> 
> 时间：2012-08-16T16:43:00.107
> 
> 标签：c#, optimization, resharper

> **可能重复：**
> [在循环内部还是外部声明变量更好？](https://stackoverflow.com/questions/8535846/is-it-better-to-declare-a-variable-inside-or-outside-a-loop)

Resharper 希望我改变这一点：

```
int Platypus;
string duckBill1;
string duckBill2;
string duckBill3;
. . .
using (OracleDataReader odr = ocmd.ExecuteReader()) {
    while (odr.Read()) {
        Platypus = odr.GetInt32("Platypus");
        duckBill1 = odr.GetString("duckBill1");
        duckBill2 = odr.GetString("duckBill2");
        duckBill3 = odr.GetString("duckBill3");
        switch (Platypus) {
        . . . 
```

...对此：

```
using (OracleDataReader odr = ocmd.ExecuteReader()) {
    while (odr.Read()) {
        int Platypus = odr.GetInt32("Platypus");
        string duckBill1 = odr.GetString("duckBill1");
        string duckBill2 = odr.GetString("duckBill2");
        string duckBill3 = odr.GetString("duckBill3");
        switch (Platypus) {
        . . . 
```

...但是以这种方式（至少看起来），变量被声明 N 次，每次通过 while 循环一次。Resharperized 方式真的比原来的更好吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T16:45:47.177

是的，这更好，因为您限制了声明变量的范围。在循环内声明它们不会对性能产生影响。Resharper 建议进行此更改的原因是您没有在循环之外使用它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T16:52:22.747

一般来说，在尽可能窄的范围内声明变量是一种很好的编程习惯。原因是：

1.  信息隐藏。
2.  更容易理解。
3.  不太可能把事情搞砸。

尽管看起来变量似乎是在循环中的每次迭代中新声明的，但它们是在编译时声明的，而不是在运行时声明的。在堆栈帧上为变量 [s] 分配空间，并且在循环中的每次迭代中重复使用相同的空间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T16:49:58.397

Yes, but declaring them doesn't take any time at runtime. They don't take up any more memory becaues the compiler will just reuse their memory locations.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T16:48:37.880

The compiler will generally optimize such expressions and "lift" the variable declaration outside of the loop, since the variable itself is not dependent on the loop conditions. This effectively produces the code you demonstrated in the first example.

In this case, Resharper's suggestion is just to remove some redundant lines of code, in addition to reducing their pre-compiled scope.

# c++ - 我可以使用 CMake 编译具有不同警告级别的项目的不同部分吗？

> ID：11991831
> 
> 赞同：3
> 
> 时间：2012-08-16T16:43:04.610
> 
> 标签：c++, compiler-errors, cmake, warnings

我正在开发一个依赖于其他一些库（特别是 SFML 和 Box2D 以及其他一些库）的项目。我喜欢在警告的情况下运行，但我所依赖的项目并不那么严格。

有没有办法可以使用默认警告设置编译库并使用我想要的警告标志编译我的代码？我的 CMakeLists.txt 中有以下标志列表。注释掉的行是我现在无法打开的东西，因为它们破坏了我的依赖关系。

```
set(CUSTOM_CFLAGS ${CUSTON_CFLAGS}
    -std=c++0x 
    #-ansi 
    -pedantic
    -Werror 
    -Wall 
    -Wextra 
    #-Weffc++
    -Wshadow 
    -Winit-self 
    -Wsign-promo 
    -Wcast-align
    #-Wlogical-op 
    -Woverloaded-virtual 
    -Wno-unused-parameter 
    #-Wstrict-null-sentinel 
    -Wmissing-include-dirs 
    -Wframe-larger-than=8192 
    #-Wmissing-format-attribute
    -g 
    #Would like this but Box2D hsa a ridiculous amount of it...
    #-Wfloat-equal -Wno-error=float-equal
   ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:53:41.280

是的，您可以编译一次外部库。然后，您可以将它们包含并链接到您的项目中，而无需重新编译外部内容。唯一剩下的要重新编译的外部代码在库头文件中。写类似

```
#pragma warning(push)
#pragma warning(disable:2892,2893,2894,4096)
#include <external_header.h>
#pragma warning(pop) 
```

为了禁用在外部头文件中弹出的警告。这种编译指示的东西因编译器而异，但大多数编译器都有这些方面的东西。

# php - 如何将未知字符集转换为 utf8？

> ID：11991833
> 
> 赞同：0
> 
> 时间：2012-08-16T16:43:06.750
> 
> 标签：php, utf-8, utf8-decode

我在 utf8 数据库中将字符串 Mühle 保存为 MÃÂ¼hle。我希望它采用 UTF8 格式，因此它会在我的网页上正确显示，该网页也使用 utf8。

我认为该字符串在写入数据库之前未转换为 utf8，现在它无法在我的网页上正确显示。

我尝试从我的 mysql 数据库中选择此字符串并将其转换为 utf8，但它不起作用。我也尝试过多次解码，但也没有用。请参阅下面我使用的代码：

```
$string = MÃÂ¼hle;
$string=utf8_encode($string);
echo $string; 
```

和

```
$string = MÃÂ¼hle;
$string=utf8_decode($string);
$string=utf8_encode($string);
echo $string; 
```

上述代码的输出与两种情况下的输入相同，没有改变字符串的任何内容。

我能做些什么来转换这个字符串，以便我可以在我的 mysql 数据库中更新它，并且在下次选择它时它会正确显示为 Mühle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:40:12.547

您的字符串是*双重编码*的 UTF-8 - 即 UTF-8 被解释为 Latin-1，然后重新编码为 UTF-8。

当您弄乱字符编码时，可能会发生这种情况 - 例如，当您发送 UTF-8 数据而您的 MySQL 期望连接使用 Latin-1 时。要解决此问题，您需要在创建连接后立即调用[mysqli_set_charset](http://php.net/mysqli_set_charset)（或数据库 API 的等效函数），或修改 MySQL 配置以默认使用 UTF-8 连接。

此外，您将需要修复您的数据 - 这是使用 utf8_decode 适当次数完成的。如果“MÃÂ¼hle”是您的数据库*使用 UTF-8 连接*返回的确切字节，您需要读取该字符串，通过 utf8_decode 发送它，然后更新该行（仍然使用 UTF-8 连接）。

请注意，当您在 MySQL 中选择一行时，*它会从表字符集转换为连接字符集*，然后再发送回客户端。因此，如果您在屏幕上看到“MÃÂ¼hle”，说明 MySQL 使用的是 UTF-8 连接，*并且*您将字符串显示为 UTF-8，您需要调用 utf8_decode*两次*才能修复它，因为这意味着该字符串实际上是三重编码的 - 两次在数据库文本中，一次用于显示。**仔细检查所有内容**，最好使用开发良好的 MySQL 客户端，如[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php) - 直到它在那里正确显示，*您的数据仍然编码不正确*。

如果这只是几行的问题，手动修复是可以的；如果这是您的数据库的一般问题，您可能更愿意转储 SQL 脚本，转换*该*文件，并使用它来替换旧数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:09:42.000

试试下面的功能。它将字符串转换回 UTF-8。

```
function convert_smart_quotes($string)
{
$string = htmlentities($string);
$string = mb_convert_encoding($string, 'HTML-ENTITIES', 'utf-8');
$string = htmlspecialchars_decode(utf8_decode(htmlentities($string, ENT_COMPAT, 'utf-8', false)));

$s = array(
    chr(145) => "'",
    chr(146) => "'",
    chr(147) => '"',
    chr(148) => '"',
    chr(151) => '-',
    's&#169;' => '©',
    '&#174;' => '®',
    '&#153;' => '™', //&trade;
    'â€œ' => '"', // left side double smart quote
    'â€' => '"', // right side double smart quote
    'â€˜' => "'", // left side single smart quote
    'â€™' => "'", // right side single smart quote
    'â€¦' => '...', // elipsis
    'â€”' => '-', // em dash
    'â€“' => '-', // en dash
);

return strtr($string, $s);
} 
```

# arrays - Rails 中的数据结构用于对多个值进行排序和查找

> ID：11991834
> 
> 赞同：0
> 
> 时间：2012-08-16T16:43:08.370
> 
> 标签：arrays, ruby-on-rails-3, multidimensional-array, data-structures

我正在使用这个程序，在输入一堆关于你的高尔夫比赛的信息后，它会计算你的差点。然后，在旁边（就像在 Excel 中一样），我有一个表格，其中列出了高尔夫球场名称、最大障碍和距离。

我想通过以下方式将带有高尔夫球场名称、差点和距离信息的表实现到我的程序中：一旦程序计算出你的差点，它就会查看这个表，并且（可能通过排序）找到所有您的障碍低于该课程的最大障碍的课程。然后，从这些课程中按最短距离排序找到前三名。

我希望这是有道理的。让它发挥作用的最佳方法是什么？我应该创建一个存储这些值的表还是某种数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:19:04.907

您可以制作一个名为“courses”的表格，其中存储高尔夫球场名称、距离、最大障碍以及其他任何内容。然后在您的控制器中执行以下操作：

```
@user = current_user //or however you're finding your user
@courses = Course.where("max_handicap >= ?", @user.handicap).order("distance ASC").limit(3) 
```

这假设您的课程表中有名为“max_handicap”和“距离”的列，并且您的用户表中有一个名为“障碍”的列。查询查找所有障碍 >= 用户障碍的课程，按从最短到最长的距离排序，并取前三个。然后要将它们显示在您的视图中，请执行以下操作：

```
<% @courses.each do |course| %>
  <h1><%= course.name %></h1>
  <h2>Handicap: <%= course.max_handicap %></h2>
  <h3>Course Distance: <%= course.distance %></h3>
<% end %> 
```

# ruby - Ruby 中集合 VS 数组的性能

> ID：11991835
> 
> 赞同：3
> 
> 时间：2012-08-16T16:43:10.950
> 
> 标签：ruby

在 Ruby 中，我正在构建一个方法，该方法构造并返回一个（可能很大）数组，该数组不应包含重复元素。通过使用集合然后将其转换为数组，我会获得更好的性能吗？`.uniq`或者在我返回之前调用我正在使用的数组会更好吗？或者如何使用`&`将项目附加到数组而不是`+=`？如果我确实使用了一个集合，那么`<=>`在我放入集合中的对象上没有一个方法会对性能产生影响吗？（如果你不确定，你知道测试这个的方法吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:15:59.387

真正的答案是：编写最具可读性和可维护性的代码，并且只有在证明它是瓶颈之后才对其进行优化。如果你能找到一个[线性时间](http://en.wikipedia.org/wiki/Time_complexity#Linear_time)的算法，你就不必优化它。在这里很容易找到...

不太确定您建议使用哪种方法，但使用我的[`fruity`](https://github.com/marcandre/fruity)gem：

```
require 'fruity'
require 'set'

enum = 1000.times

compare do
  uniq { enum.each_with_object([]){|x, array| array << x}.uniq }
  set  { enum.each_with_object(Set[]){|x, set| set << x}.to_a }
  join { enum.inject([]){|array, x| array | [x]} }
end

# set is faster than uniq by 10.0% ± 1.0%
# uniq is faster than join by 394x ± 10.0 
```

显然，像第三种方法那样构建中间数组是没有意义的。否则，这不会有太大的不同，因为你会在`O(n)`；这是主要的事情。

顺便说一句，在您的对象上都使用and `sets`，`uniq`而不是. 这些需要以理智的方式定义，因为默认情况下对象永远不会，除非它们具有相同的（请参阅[此问题](https://stackoverflow.com/questions/8778354/uniq-of-ruby-array-fails-to-work/8779948#8779948)）`Array#|``eql?``hash``<=>``eql?``object_id`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T16:46:22.280

您是否尝试过使用[Benchmark](http://apidock.com/ruby/Benchmark)库？测试通常很容易构建，并且可以正确反映它在您的特定 Ruby 版本中的工作方式。

# ios - Core-Plot - preferredNumberOfMajorTicks 不限制 Ticks 的数量

> ID：11991838
> 
> 赞同：2
> 
> 时间：2012-08-16T16:43:17.467
> 
> 标签：ios, core-plot

我只想在 Y 轴上绘制 10 个专业刻度。为此，我正在使用 methode `preferredNumberOfMajorTicks = 10`。

但如屏幕截图所示，它并没有真正起作用......

![坏的 Y 轴刻度](../Images/9a565336c056bc8f0e34bcd38faa0b53.png)

这是我对 y 轴的配置：

```
 CPTXYAxis *y = axisSet.yAxis;
y.labelingPolicy = CPTAxisLabelingPolicyFixedInterval;
//y.majorIntervalLength = CPTDecimalFromDouble(2);
y.preferredNumberOfMajorTicks = 10;
y.minorTicksPerInterval = 5;
y.tickDirection = CPTSignNone;
y.majorTickLineStyle = majorLineStyle;
y.minorTickLineStyle = minorLineStyle;
y.axisLineStyle = majorLineStyle;
y.majorTickLength = 7.0;
y.minorTickLength = 5.0;
y.labelTextStyle = whiteTextStyle;
y.minorTickLabelTextStyle = minorTickBlackTextStyle;
y.titleTextStyle = whiteTextStyle;

y.axisConstraints = [CPTConstraints constraintWithLowerOffset:40.0]; 
```

应该有一些东西可以解决方法`preferredNumberOfMajorTicks = 10`，但我看不出是什么......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T22:41:36.043

该`preferredNumberOfMajorTicks`属性不适用于固定间隔标记策略。有关详细信息，请参阅[Core Plot 文档](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_axis.html#afa9a0f51aa4558e19948797f01ffc32b)。您在这里有两个选择：

1.  保持固定间隔标记策略，并将 更改为`majorIntervalLength`能够提供所需刻度数的值。

2.  将标签策略更改为`CPTAxisLabelingPolicyAutomatic`或`CPTAxisLabelingPolicyEqualDivisions`。

# jsf-2 - InputText 在 modal=true 的对话框中不起作用（Primefaces）

> ID：11991853
> 
> 赞同：0
> 
> 时间：2012-08-16T16:44:27.490
> 
> 标签：jsf-2, primefaces, composite-component

我有这个问题，我认为是一个错误，我有一个带有简单输入文本的复合组件，然后我尝试在模态对话框中使用我的复合组件，起初看起来一切都很好，你可以在输入文本中输入，但是当inputtext 失去了焦点并尝试再次输入您无法输入的内容，即使您无法删除之前输入的内容。

在问题跟踪器中，报告了一个类似的问题： [LINK！！！！！！](http://code.google.com/p/primefaces/issues/detail?id=4005)

但这是自动完成而不是输入（可能是相同的），但被标记为固定，我尝试使用 PrimeFaces 3.3.1 和 3.4-SNAPSHOT 但问题仍然存在。

我正在使用 3.4-SNAPSHOT

这是一个“可重现的测试用例”，我在我的复合组件中添加了另一个输入，以便更容易地从第一个输入中失去焦点。

复合组件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <ui:composition xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:cc="http://java.sun.com/jsf/composite"
          xmlns:p="http://primefaces.org/ui">
        <body>
            <cc:implementation>
                <p:commandButton value="Open dialog composite component" onclick="dialog.show()"/>

                <p:dialog widgetVar="dialog">
                    <p:inputText/>
                    <p:inputText value="Click here for lost focus of the first input"/>
                </p:dialog>

            </cc:implementation>
        </body>
    </ui:composition> 
```

测试.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:mycomp="http://java.sun.com/jsf/composite/components"
          xmlns:p="http://primefaces.org/ui"       
          xml:lang="es">

        <f:view contentType="text/html">
            <h:head>
            </h:head>

            <h:body>
                <h:form id="myform">
                    <p:commandButton value="Open first dialog" onclick="firstDialog.show()"/>
                </h:form>

                <h:form id="myform2">
                    <p:dialog widgetVar="firstDialog" modal="true">
                        <mycomp:test />
                    </p:dialog>
                </h:form>
            </h:body>
        </f:view>    
    </html> 
```

我试图用 h:inputText 替换 p:inputText 并且问题仍然存在。

我正在使用：MyFaces 2.1.8、Primefaces 3.4-SNAPSHOT

# ios - 以编程方式将 Sqlite 表数据导出到 csv 文件 - xcode iOS 5（用于 ipad 应用程序）

> ID：11991857
> 
> 赞同：2
> 
> 时间：2012-08-16T16:44:41.540
> 
> 标签：ios, csv, sqlite, export

我正在开发一个简单的应用程序。我正在使用 sqlite 将数据保存到表中（本地，在应用程序文档文件夹中）。我想有问题地将此表数据导出为 csv 文件并将其通过电子邮件发送给某人。[以编程方式将 SQLite 数据导出到 iOS 中的 Excel](https://stackoverflow.com/questions/11132900/export-sqlite-data-to-excel-in-ios-programmatically) - 我试过了，但它不起作用......有人可以提供示例应用程序下载吗？还是代码？

目前，我在命令行中使用这些命令将 db 表转换为 csv - .mode、.output out.csv、select * from table；

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T07:27:27.577

这是我为表格数据生成 csv 所做的工作。在这里，我已经完成了简单的测试。但是您需要做的是以这种方式生成 2d 数组以生成 NSArray ，就像我在此示例中所做的那样。

这里 NSArray 中的第一个组件是 table 的一行，第二个组件是 table 的第二行，同样......

```
NSArray *array = [NSArray arrayWithObjects:@"NAME,NUMBER",@"\nbhargavi1,12345",@"\nHiral,23456",@"\nHarish,34567", nil];    

NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *filename=[NSString stringWithFormat:@"test.csv"];
NSString *filePathLib = [NSString stringWithFormat:@"%@",[docDir stringByAppendingPathComponent:filename]];

[[array componentsJoinedByString:@","] writeToFile:filePathLib atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

请执行此操作。可能这可以帮助你。

我已经在我的项目中实现了这个，它非常适合我

# python - numpy.oldnumeric.float32 溢出小数（1e39 ---> inf）python

> ID：11991863
> 
> 赞同：1
> 
> 时间：2012-08-16T16:45:10.713
> 
> 标签：python, types, floating-point, overflow, numeric

我正在编写一个需要在服务器上运行的代码，该代码使用旧版本的 python（2.4？）和 Numeric 而不是 numpy，我对此无能为力。为了测试代码，我使用 numpy.oldnumeric 运行它

我从一组 float32 开始，然后将值存储到它们。我的值在 1.0e50-1.0e60 范围内，并且数组一直将它们存储为“inf”。即使投射 1.0e39，也会导致“inf”。浮动不应该最大接近 1.0e108 吗？我怎样才能保留这些价值观？

```
....
import numpy.oldnumeric as N
data = N.zeros(10, 'f')
....
for i in range(10): data[i] = (1.0e38)*pow(10.0,i)
print data[i] 
```

给

```
[  9.99999993e+36   9.99999968e+37              inf              inf
          inf              inf              inf              inf
          inf              inf] 
```

* * *

解决方案：单精度浮点数（float32）的限制比我想象的要小（~3e38），感谢@aka.nice，所以我从'f'（float32）切换到'dtype = N.float64'，它有足够的容量.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:55:49.147

您正在使用单精度浮点数......
在 IEEE 754 单精度中，指数的限制为 127，最大浮点值约为 2 * 2^127，即大约

```
2^10 > 10^3
2^120 > 10^36
2^127 > 2^7*10^36
2^127 > 100*10^36
2^127 > 10^38 
```

或 3.40282346×10^38 见[http://en.wikipedia.org/wiki/IEEE_754](http://en.wikipedia.org/wiki/IEEE_754)

准确值为 2^128 - 2^104 = 340282346638528859811704183484516925440

使用 IEEE 754 双精度（64 位），限制为 2^1024-2^971，即大约 1.7976931348623157e308

# c# - Win8 C# 异步/等待问题

> ID：11991867
> 
> 赞同：0
> 
> 时间：2012-08-16T16:45:42.373
> 
> 标签：c#, windows-8, microsoft-metro, c#-5.0

为什么在第二种情况下抛出异常？

```
async void f() {
    await media.InitializeAsync();
    isInit = true;
    capturePreview.Source = media;
    await media.StartPreviewAsync(); // Ok
}

// ------------------------------------------

void f() {
    StaticClass.g(capturePreview.Source);
}

public static class StaticClass {
    public static async void g(MediaSource source) {
        await media.InitializeAsync();
        isInit = true;
        source = media;
        await media.StartPreviewAsync(); // Unknown Exception (It's seems that media isn't init)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:12:59.383

该`f()`函数使用一个函数，其中包括`async`. 所以我认为`f()`也应该签署`async`。像这样：`void async f(){...}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:43:26.083

如果您真的想要初始化媒体，为什么不在 .done 函数中执行其余代码？

```
 void f() {
     StaticClass.g(capturePreview.Source);
    }

  public static class StaticClass {
     public static async void g(MediaSource source) {
       media.InitializeAsync().done(
       isInit = true;
       source = media;
       await media.StartPreviewAsync(););
     }
  } 
```

即使我不确定您是否可以在完成的回调中执行异步操作。

# html - Apache 无法解释我网页中的链接，所以样式不好，我能做什么？

> ID：11991870
> 
> 赞同：0
> 
> 时间：2012-08-16T16:45:46.340
> 
> 标签：html, apache, browser

Apache 无法解释以下链接： `<link href="../../chorus-theme/css/main.css@browserId=firefox&t=1344590189623" rel="stylesheet" type="text/css" />`

因为 @browserId=firefox&t=1344590189623 在 main.css 之后

但是当我直接在浏览器中打开 html 文件时，它可以工作，样式被应用。如果我使用 url 链接：

`http://localhost:8080/TCS/group/guest`

该样式不再应用，它无法读取 main.css@browserId=firefox&t=1344590189623。如果我将 main.css@browserId=firefox&t=1344590189623 重命名为 main.css 并在 html 文件中进行更改，则会应用该样式。

有人可以帮忙吗？谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:18:01.583

我已经解决了问题，需要在mime.type文件中放入text/css css?browserId=firefox&t=1344590189623

另一种解决方案是在 main.css?browserId=firefox&t=1344590189623.css 中重命名 main.css?browserId=firefox&t=1344590189623

# css - 是什么导致我的 h2 下面有这个额外的空间？

> ID：11991879
> 
> 赞同：0
> 
> 时间：2012-08-16T16:46:24.893
> 
> 标签：css

我试图让金色标题框与它下面的框齐平。边距设置为 0，为什么它们不相互对接？

[http://www.craftonhills.edu/Testing/chctest/Tweets.aspx](http://www.craftonhills.edu/Testing/chctest/Tweets.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:49:00.670

**更新**：

有`ul.tweet_list`一个默认边距。将其设置为`margin: 0`，它应该可以工作。

* * *

~~通过[margin-collapsing](http://reference.sitepoint.com/css/collapsingmargins)，`ul`容器内部创建了边距。~~

*（乍一看，我以为是`.widget`在创建边界……）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:50:33.393

边距`.tweet-lists`将其推开。我的建议是将边框放在包含的 div 上，这将消除折叠边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:51:48.250

.tweet_list 的顶部和底部边距为 14

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:52:01.880

div 内的标签（id 为“tweetlist”）的顶部边距为 14 像素（根据 Google Chrome 检查器）。在 css 中将此设置为 0 可以修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T16:52:52.383

您的 UL 元素上具有默认边距。将 UL 设置为`margin-top: 0px;`，您应该一切顺利。

# python - 此 WSGI 应用程序无法访问守护进程：/mod.wsgi

> ID：11991891
> 
> 赞同：4
> 
> 时间：2012-08-16T16:47:26.380
> 
> 标签：python, django, apache, mod-wsgi, httpd.conf

为什么我会收到此错误？

```
Daemon process called 'dom_server' cannot be accessed by this WSGI application: /home/stakkit/webapps/dom_server/dom-fisica.wsgi 
```

**dom-fisica.wsgi**文件：

```
import os
import sys
#sys.path.append('/home/stakkit/webapps/dom_server')
sys.path.append('/home/stakkit/webapps/dom_server/osqa')
os.environ['DJANGO_SETTINGS_MODULE'] = 'osqa.settings_fisica'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是我的**httpd.conf** [http://pastebin.com/dQfq1RTN](http://pastebin.com/dQfq1RTN)

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T21:34:17.477

将 VirtualHost 之外的 WSGIDaemonProcess 移动到全局范围。

如果它是同一站点的 80/443 对，您只能像您一样访问 VirtualHost。

# ruby-on-rails - Rails 3\. 取考勤表：如何创建多条记录？

> ID：11991892
> 
> 赞同：1
> 
> 时间：2012-08-16T16:47:27.630
> 
> 标签：ruby-on-rails, ruby

我知道我很接近，但我被困住了。

这些是我正在使用的三个模型：AttendanceSheet、Attendance 和 Child。

```
AttendanceSheet
has_many :attendances, :dependent => :destroy
accepts_nested_attributes_for :attendances
belongs_to :course

Child
has_many :attendances

Attendance
belongs_to :attendance_sheet
belongs_to :child 
```

所以加入模型是出勤。我正在尝试创建一个包含特定课程所有学生列表的出勤表，然后使用复选框标记他们是否参加。像这样...

```
Attendance Sheet
Course: Biology
Date: _____________

Michael Scott   [] Notes: sick
Jim Halpert     [] Notes: ____
Dwight Schrute  [] Notes: ____ 
```

所以出勤表有以下列：

```
child_id
attended (boolean) to check if the student attended course or not
notes 
```

我遇到问题的部分是想出某种循环来显示属于该班级的所有学生，并为每个学生提供参加的字段和注释。

这就是我所拥有的...

**_form.html.erb**

```
<%= simple_form_for @attendance_sheet, :html => { :class => 'form-horizontal' } do |f| %>

  <h2>Course: <%= @course.name %></h2>

  <div class="form-inputs">
    <%= f.input :attendance_on, :as => :string, :hint => 'YYYY-MM-DD', :input_html => {:class => :datepicker, :value => Date.today} %>
  </div>

      <% @course.children.each do |child| %>
        *** trouble here ***
        <%= check_box_tag %> <%= child.full_name %><br />
      <% end %>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

**出勤表控制器.rb**

```
def new
  @attendance_sheet = AttendanceSheet.new
  @course = Course.find(params[:course_id])

  respond_to do |format|
    format.html
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:58:04.407

使用 rails `accepts_nested_attributes_for :attendances`，您可以在控制器中执行以下操作：

```
def new
  @attendance_sheet = AttendanceSheet.new
  @course = Course.find(params[:course_id])
  @course.children.each do |c|
    @attendance_sheet.attendances << Attendance.new(:child => c)
  end

  respond_to do |format|
    format.html
  end
end 
```

然后在你的`simple_form_for @attendance_sheet`

```
<%= f.fields_for :attendances do |att| %>
  <%= att.check_box :child, :label => att.object.child.full_name %>
<% end %> 
```

# macos - Mod_XSendFile On a Mac

> ID：11991896
> 
> 赞同：2
> 
> 时间：2012-08-16T16:47:57.770
> 
> 标签：macos, apache, x-sendfile

I've installed xsendfile on my mac and it is located in the apache modules. I've attempted to enable it via my htaccess file but I continually get an error. When I try to get a list of modules on my apache server via either terminal or php, it's not listed. Relevant Code/ Server Info listed below:

Server: Apache/2.2.21 (Unix)

Compiled and installed Via: apxs -cia -Wc,"-arch i386 -arch x86_64" -Wl,"-arch i386 -arch x86_64" mod_xsendfile.c

In Httpd.conf: LoadModule xsendfile_module libexec/apache2/mod_xsendfile.so is enabled

htaccess: XSendFile on XSendFilePath /path/to/file/

Error Message: Invalid command 'XSendFile', perhaps misspelled or defined by a module not included in the server configuration

I appreciate any guidance.

David

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T10:00:43.880

我意识到这个问题已经存在一年了，但是对于未来的人们来说，这样做的方法（至少在 Mac OS X Lion 上）是：

```
sudo apxs -cia mod_xsendfile.c 
```

# api - 使用 GetterUtils 和 ParamUtils 的区别

> ID：11991901
> 
> 赞同：8
> 
> 时间：2012-08-16T16:48:12.870
> 
> 标签：api, methods, liferay

例如，何时使用

```
GetterUtil.getBoolean() 
```

什么时候

```
ParamUtil.getBoolean()? 
```

两者是相同的，还是预期根据参数、变量等以不同的方式使用？你能举一些例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T19:34:21.257

两者都是避免[Null-Pointer Exceptions](https://stackoverflow.com/q/218384/468763)的实用方法。

[`GetterUtil`](http://docs.liferay.com/portal/6.1/javadocs/src-html/com/liferay/portal/kernel/util/GetterUtil.html)内部返回默认类型并进行强制转换。因此，如果有人传递了一个`null`值，它将返回该类型的默认值。

示例：
假设您有一个`String`value `"true"`，并且您期望它始终是 type `boolean`。因此，您使用`GetterUtil.getBoolean("true")`which 将在内部进行转换为 boolen 并将值返回为`boolean-true`. 万一有人传递垃圾字符之类`"tr"`的，它将被转换为`boolean-false`.

如前所述[`ParamUtil`](http://docs.liferay.com/portal/6.1/javadocs/src-html/com/liferay/portal/kernel/util/ParamUtil.html)，对参数进行相同的处理`request`。[`ParamUtil`](http://docs.liferay.com/portal/6.1/javadocs/src-html/com/liferay/portal/kernel/util/ParamUtil.html)内部使用[`GetterUtil`](http://docs.liferay.com/portal/6.1/javadocs/src-html/com/liferay/portal/kernel/util/GetterUtil.html)具有上述行为。它首先检索参数（始终是字符串），然后将其传递给`GetterUtil.getType()`方法，然后返回正确的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:57:49.633

GetterUtil 和 ParmUtil 都是不同的类。

GetterUtil 用于获取基本 Java 数据类型的默认值。

ParamUtil 用于从 HttpReqeust 中检索（原始数据类型的）值。

在此处查看这两个类的源代码

对于 GetterUtil [http://docs.liferay.com/portal/6.0/javadocs/src-html/com/liferay/portal/kernel/util/GetterUtil.html](http://docs.liferay.com/portal/6.0/javadocs/src-html/com/liferay/portal/kernel/util/GetterUtil.html)

对于 ParamUtil [http://docs.liferay.com/portal/5.1/javadocs/portal-kernel/com/liferay/portal/kernel/util/ParamUtil.java.html](http://docs.liferay.com/portal/5.1/javadocs/portal-kernel/com/liferay/portal/kernel/util/ParamUtil.java.html)

# ios - Titanium Appcelerator：没有 Mac 的 iPhone 开发（如 PhoneGap）

> ID：11991902
> 
> 赞同：3
> 
> 时间：2012-08-16T16:48:16.520
> 
> 标签：ios, windows, mobile, titanium

我即将开始一些移动开发项目，但我首先要做一些功课。我的主要目标是部署到 Android 和 iOS，但后者会带来一些问题，因为我无法使用（我也没有兴趣购买）Mac。

Phonegap 提供云服务，您可以在其中上传您的移动开发项目，他们将为您完成构建 - 无需 Mac。来自 Phonegap 构建常见问题解答：

> 只需将您的网络资产（HTML、CSS 和 JavaScript 的 ZIP 文件或单个 index.html 文件）上传到 PhoneGap Build，将我们指向您的 Git 或 SVN 存储库，或者让我们设置您可以推送的 git 远程端点到。然后我们将为您进行编译和打包。几分钟后，您将收到所有移动平台的下载 URL。

我倾向于 Appcelerator 的开发和原生 UI 功能，但由于我没有 Mac，我有没有希望使用类似于 PhoneGap 的 Build 服务的东西来使用 Titanium 进行 iOS 开发？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T17:14:36.653

如果您没有 Mac，无论是否使用 Titanium，您都无法开发、测试、部署或放入适用于 iOS 的应用商店应用程序。

无论如何，即使您能够使用 Titanium（不存在）的云构建技术，您也无法将*最终应用程序*部署到 App Store，因为您必须拥有 XCode，PhoneGap 也是如此。 [在这里检查：](https://build.phonegap.com/docs/ios-builds)

> 注意：由于 PhoneGap Build 使用 Apple 的标准开发流程来构建应用程序，>您需要注册他们的开发者计划才能在 PhoneGap >Build 上构建 iOS 应用程序。您还需要一台 Mac 来配置您的证书和配置文件。

底线，除非您使用 Mac，否则您不能合法地部署到 App Store。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T21:04:39.230

不要忘记注册为 Google Play 和 iOS 开发者所带来的注册费。

我担心使用远程服务会花费你大量的时间，因为你会显着增加你的测试周期。

二手 Mac mini 的成本几乎不会影响任何开发预算，甚至慈善工作。正如之前的海报说明，没有mac，你不能合法地部署你完成的构建。如果你做mac，你不会做同样的事情吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T05:44:11.857

出现了像[Mobundler.com](http://mobundler.com)和[Foundry22.com](http://foundry22.com)这样的服务，它们可以让您在没有 Mac 的情况下进行端到端开发。

Foundry22 是一个类似于 PhoneGap 构建的服务，用于 Titanium SDK。与 PhoneGap 构建类似，它需要用于 iOS 签名的 p12 包和用于 Android 的 Java 密钥库。你可以使用像 Mobundler 这样的服务来创建那些只使用你的浏览器的服务。您仍然需要付费才能成为 iOS 开发者计划的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-19T10:53:01.940

这里的答案已经过时了。有一个 Icenium 平台可让您在完全不使用 Mac 的情况下构建应用程序并将其放在 App Store 上。

[http://docs.icenium.com/publishing-your-app/distribute-production/publish-ios](http://docs.icenium.com/publishing-your-app/distribute-production/publish-ios)

# maven - 所有应用程序日志都进入同一个 log4j 日志文件

> ID：11991905
> 
> 赞同：0
> 
> 时间：2012-08-16T16:48:30.273
> 
> 标签：maven, log4j, weblogic, weblogic-10.x

（可能是同时发生的）但是这个问题是在我们从 Ant 构建切换到 Maven 之后发生的。

（服务器为 Weblogic 10.3.5）

我们有几个应用程序，每个应用程序都有自己的 log4j.properties，每个应用程序都登录到自己的 app.log。但是，在 Maven 构建之后，所有应用程序都登录到一个日志文件中。似乎我们部署的第一个应用程序以某种方式优先，而 log4j 仅写入该文件。

在 Maven 设置中，`log4j.properties`位于`src/main/resources`. 这是我们的一个示例`log4j.properties`：

```
log4j.rootLogger=INFO, stdout, logfile
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - <%m>%n
log4j.appender.logfile=org.apache.log4j.RollingFileAppender
log4j.appender.logfile.File=logs/stat-calc.log
log4j.appender.logfile.MaxFileSize=4096KB
log4j.appender.logfile.MaxBackupIndex=7
log4j.appender.logfile.layout=org.apache.log4j.PatternLayout
log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:27:28.530

这可能是 WebLogic 类加载问题。我们过去通过添加 `META-INF/weblogic-application.xml`格式如下的文件解决了这个问题：

```
<?xml version='1.0' encoding='UTF-8'?>
<weblogic-application xmlns="http://www.bea.com/ns/weblogic/100"   
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <prefer-application-packages>
        <package-name>org.apache.log4j.*</package-name>
    </prefer-application-packages>
</weblogic-application> 
```

这适用于耳朵文件。对于战争，你需要一个`WEB-INF/weblogic.xml`：

```
<weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app">
    <container-descriptor>
        <prefer-web-inf-classes>true</prefer-web-inf-classes>
    </container-descriptor>
</weblogic-web-app> 
```

# powershell - 为什么 PowerShell 复制到随机位置？

> ID：11991914
> 
> 赞同：1
> 
> 时间：2012-08-16T16:49:17.717
> 
> 标签：powershell

我有以下简单的脚本：

```
$workingDir = "C:\foo\bar"
$projectsDir = "C:\foo"

Copy-Item -Path "$projectsDir\some subpath\MyFile1.dll" -Destination $workingDir
Copy-Item -Path "$projectsDir\somewhere else\MyFile2.dll" -Destination $workingDir
Copy-Item -Path "$projectsDir\another place\MyFile3.dll" -Destination $workingDir 
```

出于某种未知原因，每次我运行此脚本时，它都会将文件复制到正确的位置 ( `$workingDir`) ***，并将***它们复制到`$projectsDir\some subpath\something\else`. 每次运行此脚本时，我都必须从其他位置删除多余的文件。

到目前为止，我已经尝试过：

1.  改变变量名
2.  指定`-Destination "$workingDir\MyFile1.dll"`
3.  使用`$null = Copy-Item -Path "...."`
4.  我什至尝试`Copy-Item`用`xcopy.exe`

什么都没有改变。我在第一个 Copy-Item 命令上设置了一个断点并查看了变量——它们看起来都正确。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:11:28.290

我能想到的唯一另一件事是`copy-item`像这样运行：

```
Copy-Item -Path $($projectsDir + "\some subpath\MyFile1.dll") -Destination $workingDir 
```

这就是我声明几乎所有 Variable + SomethingElse 场景的方式。由于我还没有看到这种行为，我会回去再测试一下，看看我能找到什么。如果我想出别的东西，我会重做我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:12:13.693

我重新启动了我的电脑。[问题解决了。](http://youtu.be/nn2FB1P_Mn8)

# javascript - 为什么这个 JavaScript 调用不会破坏“同源策略”

> ID：11991915
> 
> 赞同：3
> 
> 时间：2012-08-16T16:49:19.143
> 
> 标签：javascript, jquery, same-origin-policy

我正在使用 jQuery 显示一个外部 JavaScript 文件。“同源策略”没有被破坏的原因是因为它不是 AJAX 请求吗？

[http://jsfiddle.net/m7q3H/52/](http://jsfiddle.net/m7q3H/52/)

小提琴代码：

***HTML***

```
<body>
  <div id="toupdate">
     <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
  </div>      
</body>​ 
```

***jQuery***

```
$(document).ready(function() {
   console.log('HTML is '+$('#toupdate').html());
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:50:28.900

哦，这里绝对没问题。您可以从任何地方引用 javascript 文件。例如，Google CDN 提供了常见的 js 文件，例如您可以使用的 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

顺便说一句，这正是 jQuery 实现[JSONP](http://en.wikipedia.org/wiki/JSONP)的工作方式。它使用 javascript 将`<script>`标签动态地注入到指向某个远程服务器端脚本的 DOM 中：

```
<script src="//remotedomain.com/script?callback=abc"></script> 
```

此远程脚本使用`Content-Type: 'application/x-javascript'`响应标头和以下正文进行响应：

```
abc({"foo":"bar"}) 
```

在您的域上，您只需定义`abc`函数：

```
<script type="text/javascript">
    function abc(data) {
        alert(data.foo);
    }
</script> 
```

就这样：跨域 AJAX 的模拟（我说模拟是因为它不使用本机 XHR 对象，但它达到了相同的效果）。

现在您可以理解为什么 jQuery 的 JSONP 实现仅限于 GET 请求 => 因为当您注入脚本标签时，浏览器只会向其`src`属性发送 GET 请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T16:51:01.317

是的。您可以使用标签从其他域加载脚本，`script`但不能使用`XmlHTTPRequest`对象（AJAX 请求）进行跨域请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T09:54:32.813

只要您的外部*.js*已加载

`<script>`

标记同源策略认为它是您信任的安全 js。

# error-handling - How to handle errors in Zope page templates

> ID：11991922
> 
> 赞同：0
> 
> 时间：2012-08-16T16:50:04.150
> 
> 标签：error-handling, plone, zope, template-tal, zpt

I'm looking for a good way to handle errors in Zope's page templates. What I already know is:

```
<div ... tal:define=...
         tal:on-error="string:Oops!">
  This text will be replaced in case of errors
</div> 
```

or

```
<div ... tal:define=...
         tal:on-error="error/value">
  This text will be replaced in case of errors
</div> 
```

or

```
<div ... tal:define=...
         tal:on-error="string:${error/type}: ${error/value}">
  This text will be replaced in case of errors
</div> 
```

However, it might be desirable to use a more elaborated error handling method, e.g.

*   to display details depending on certain permissions
*   to log and/or report the error to the maintainers
*   to have an easy way to create some pretty HTML without the need of a lot of code in the template

I had a look at the [old Zope documentation page](http://old.zope.org/Documentation/Books/ZopeBook/2_5_edition/AppendixC.stx.1#3-69) and created a script object like described there (amending the missing colon, of course); however, it won't work (I tried both `on-error="here/errHandler"` and `on-error="here/scripts/errHandler"`, and I added `*args` and `**kwargs`, without success).

I tried to build a browser (`on-error="here/@@talerror"`) for such purposes, and it was used alright, but it didn't seem to get the `error` object.

I'm using Zope 2.10.7-final and Plone 3.3 (old, I know).

Is there a way to hand over the `error` object to the browser, or to make the script object work?

P.S., just to get it clear: This is *not* about sqeezing lots of logic in a template - no sermons about templates and logic, please! My goal is to find the error in existing templates, i.e. which part of the logic (which *is* implemented somewhere behind the scenes, in browsers etc.) fails in which way. The documented way of using an error script doesn't work for me (maybe I'm missing an important part?), and an error handling browser apparently doesn't have access to the error object.

# facebook - 使用 Facebook 访问令牌是验证用户的安全方式吗？

> ID：11991926
> 
> 赞同：3
> 
> 时间：2012-08-16T16:50:37.740
> 
> 标签：facebook, facebook-graph-api

在我的应用程序上，用户可以登录 Facebook，然后该应用程序拥有用户的访问令牌（例如“abc”），我想使用此令牌在我自己的服务器上创建用户。

将此访问令牌发送到我的服务器（使用 SSL）是否安全，然后在我的服务器上使用[https://graph.facebook.com/me?access_token=abc](https://graph.facebook.com/me?access_token=abc)获取用户的用户名和 ID ，并检查令牌所属的应用程序to 是我的[https://graph.facebook.com/app?access_token=abc](https://graph.facebook.com/app?access_token=abc)。如果是我的应用程序，我会将用户存储在我用户的数据库中和/或登录。

这个系统可以被愚弄吗？你能想出一种方法可以让某人以其他人的身份登录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:39:10.527

您应该查看所有[身份验证](https://developers.facebook.com/docs/authentication/)文档和 Oauth 规范以查看可用的不同身份验证流程

从广义上讲，您可以根据访问令牌在您的服务器上创建一个用户，并合理地确定当您从 Facebook 获得相同用户 ID 的访问令牌时，它是同一个人。

如果您需要非常高的应用程序安全性，您可以采取措施确保用户的访问令牌不是通过恶意软件或 Facebook 用户被欺骗产生的，[服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)文档中有一个示例显示针对 CSRF 的保护，还有一个您可以使用[的重新身份验证流程](https://developers.facebook.com/docs/authentication/reauthentication/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:35:16.043

我假设您为此使用 facebook sdk，如果是这样，facebook sdk 会为您处理安全问题，您不必担心任何事情。假设您在没有 sdk 的情况下访问 api，那么有两件事必须指出：

1) Auth token 频繁过期（facebook 为确保用户受到保护煞费苦心）

2）仅使用身份验证令牌发出请求是不够的，还需要一些其他无法伪造的参数，特别是如果您正在执行此服务器端，因为添加了 fb 调用服务器流身份验证的额外层

3）最重要的是，用户必须提供很多权限才能让应用程序访问某些数据。下面的链接提供了一篇关于身份验证的好文章，您可以看看

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

长话短说，它是安全的。

# jaxb2 - 在 Moxy 中使用外部映射文件覆盖 @XmlTransient 行为

> ID：11991936
> 
> 赞同：1
> 
> 时间：2012-08-16T16:51:05.863
> 
> 标签：jaxb2, moxy

为什么我不能使用如下所示的外部映射将“类型”属性覆盖为非瞬态？当我序列化时，我没有看到“类型”元素。

```
public class PhoneNumber
{
    private String type;

    @XmlTransient
    public String getType()
    {
        return type;
    }

    //other properties
} 
```

我使用“xml-attribute”指定了“type”，希望这将优先于注释，但它不起作用。

```
<java-type name="PhoneNumber">
         <java-attributes>
            <xml-attribute java-attribute="type" />
            <xml-value java-attribute="number" />
         </java-attributes>
</java-type> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:59:42.713

你似乎遇到了一个错误。您可以使用以下链接跟踪我们在此问题上的进展：

*   [https://bugs.eclipse.org/387436](https://bugs.eclipse.org/387436)

**解决方法**

`PhoneNumber`您可以指定该类应使用字段访问权限。

```
 <java-type name="PhoneNumber" xml-accessor-type="FIELD">
        <java-attributes>
            <xml-attribute java-attribute="type" />
            <xml-value java-attribute="number"/>
        </java-attributes>
    </java-type> 
```

**完整示例**

**电话号码**

```
package forum11991936;

import javax.xml.bind.annotation.XmlTransient;

public class PhoneNumber {
    private String type;
    private String number;

    @XmlTransient
    public String getType() {
        return type;
    }
    public void setType(String type) {
        this.type = type;
    }
    public String getNumber() {
        return number;
    }
    public void setNumber(String number) {
        this.number = number;
    }

} 
```

**oxm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11991936">
    <java-types>
        <java-type name="PhoneNumber" xml-accessor-type="FIELD">
            <xml-root-element name="phone-number"/>
            <java-attributes>
                <xml-attribute java-attribute="type" />
                <xml-value java-attribute="number"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**jaxb.properties**

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11991936;

import java.util.*;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11991936/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {PhoneNumber.class}, properties);

        PhoneNumber pn = new PhoneNumber();
        pn.setType("cell");
        pn.setNumber("555-1111");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(pn, System.out);
    }
} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<phone-number type="cell">555-1111</phone-number> 
```

# emacs - 为 BBDB3 中的所有电子邮件地址自动创建条目

> ID：11991940
> 
> 赞同：2
> 
> 时间：2012-08-16T16:51:22.613
> 
> 标签：emacs, gnus, bbdb, bbdb-3

[`bbdb3`](http://savannah.nongnu.org/projects/bbdb)有类似于`bbdb/mail-auto-create-p`from的东西吗`bbdb2`？

基本上我只想`bbdb`成为老大哥，为我见过的每个电子邮件地址自动创建条目。曾经。

**奖励积分**：按每个帐户执行此操作（例如，我想添加在发送到我的工作地址的电子邮件中看到的所有电子邮件，但不一定是我的个人地址）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:16:34.203

您可以执行以下操作：

```
(bbdb-mua-auto-update-init 'gnus 'message)
(setq bbdb-update-records-p 'create) 
```

对于其他选项，变量 bbdb-update-records-p 有一些很好的文档（Ch v bbdb-update-records-p）。

要限制创建记录的方式，您可以查看 bbdb-accept-message-alist 和 bbdb-ignore-message-alist。例如，为避免将邮件地址记录到您的家庭住址，您可以尝试：

```
(setq bbdb-ignore-message-alist '((("To" "CC") . "email@home"))) 
```

# windows - Is there any way to change the default validity period of a refresh token in windows azure ACS

> ID：11991943
> 
> 赞同：0
> 
> 时间：2012-08-16T16:51:39.727
> 
> 标签：windows, azure, acs

Is there a way to change the validity period of a refresh token within Windows Azure Access Control Service. Based on the [following article](http://msdn.microsoft.com/en-us/library/fp142382%28v=office.15%29.aspx), refresh tokens last a year but I cannot find a way to change that, either on the portal or via the management service. I am aware of the token time out when crating a relying party application but this, as I understand it, refers to the time out of the access token not the refresh token. Any help would be greatly appreciated.

Many Thanks,
User1426145

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:21:59.450

使用 OAuth 2.0，刷新令牌会随之发送到期时间，如您在上述情况下所描述的，该限制约为一年。刷新令牌一旦发出，您就无法更改其有效期，因此您有两种选择来维持它的活动状态。尝试跟踪其有效性或遇到 INVALID_TOKEN 错误时，您可以调用相同的刷新令牌服务以再次接收全新的刷新令牌。

# maven - Ivy 无法解析 maven-cobertura-plugin

> ID：11991950
> 
> 赞同：0
> 
> 时间：2012-08-16T16:51:51.700
> 
> 标签：maven, ivy, findbugs, cobertura, jdom-2

我正在使用 Ivy 进行依赖管理。

我有问题

> *   maven-findbgs-插件：插件：1.3.1
>     *   maven-cobertura-插件：插件：1.3

有几个关于这个的主题：例如[Maven Dependencies can't be resolve](https://stackoverflow.com/questions/8374250/maven-dependencies-cant-be-resolved)

答案是排除 jaxen：

```
 <dependency org="org.jdom" name="jdom" rev="2.0.2">
        <exclude module="jaxen"/>
    </dependency> 
```

我试图排除这些依赖项，但又遇到了另一个问题：

`unresolved dependency: asm#asm;2.0: java.text.ParseException: inconsistent module descriptor file found in 'http://repo1.maven.org/maven2/asm/asm/2.0/asm-2.0.pom': bad revision: expected='2.0' found='@product.version@';`

这是 ivy.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">

    <info
        organisation="organisation"
        module="module"
        status="integration">
    </info>

    <dependencies>
        <dependency org="dom4j" name="dom4j" rev="1.6.1"/>

        <dependency org="org.jdom" name="jdom" rev="2.0.2">
            <exclude module="jaxen"/>
        </dependency>

        <dependency org="org.apache.poi" name="poi" rev="3.8"/> 
        <dependency org="org.apache.poi" name="poi-ooxml" rev="3.8"/>
        <dependency org="org.apache.poi" name="ooxml-schemas" rev="1.1"/>
        <dependency org="junit" name="junit" rev="4.10"/>
        <dependency org="org.mockito" name="mockito-all" rev="1.9.0"/>
        <dependency org="maven-plugins" name="maven-cobertura-plugin" rev="1.1" />
    </dependencies>

</ivy-module> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:48:33.860

首先，我看到您使用的是真正旧版本的[maven-cobertura-plugin](http://mojo.codehaus.org/cobertura-maven-plugin/) (1.3)，当前版本是 2.5.1。
此外，您正在访问的 pom 是 Maven Central 中的那些工件之一，它们的质量很差，这意味着在这种情况下根本无法使用。
您引用的[maven-findbugs-plugin](http://mojo.codehaus.org/findbugs-maven-plugin/)也很旧。当前版本是 2.5.2，与您正在使用的 1.3.1 相矛盾。
我不明白的是，您为什么要尝试解析 Maven 插件，因为您正在运行 Ivy 并因此使用 Ant。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:57:02.240

这是工作 ivy.xml

```
<ivy-module version="2.0">
    <info organisation="it.cup2000" module="sar"/>
    <configurations defaultconfmapping="runtime->*">
        <conf name="runtime" />
        <conf name="compile" extends="runtime"/>
        <conf name="test" extends="compile"/>
    </configurations>       
    <dependencies>
        <dependency org="org.jdom" name="jdom2" rev="2.0.3"/>
        <exclude org="maven-plugins" module="maven-cobertura-plugin"/>
        <exclude org="maven-plugins" module="maven-findbugs-plugin"/>
    </dependencies>
</ivy-module> 
```

jdom2依赖触发问题，两个exclude修复

# robots.txt - 禁止多个动态目录索引是否有效

> ID：11991951
> 
> 赞同：1
> 
> 时间：2012-08-16T16:51:52.900
> 
> 标签：robots.txt

好的，我对此有点困惑，一直在环顾四周，找不到任何答案，所以我在这里。我希望阻止多个子目录（动态 url）

例子：

```
/virtual-news/itemlist/allo/
/online-news/itemlist/hi/
/blahblah-news/itemlist/goodbye/
/something-news/itemlist/allllo/ 
```

所以要阻止蜘蛛索引任何包含 /itemlist/ 目录的 url，我可以使用它吗？

```
Disallow: /*/itemlist/* 
```

这有意义吗？但我不确定，也找不到太多关于此的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T19:11:17.920

如果机器人还没有从您的网站索引内容，那么阻止访问`robots.txt`就可以了。如果他们已经将内容编入索引并且您希望将其删除，则不要阻止访问并返回 404 或 410（来自[https://youtu.be/G29Zt-UH_Ko](https://youtu.be/G29Zt-UH_Ko)）。

# git - 无需提交即可从 git 项目生成补丁文件

> ID：11991955
> 
> 赞同：4
> 
> 时间：2012-08-16T16:52:07.410
> 
> 标签：git

我正在使用 git 开发一个开源项目。

我对源代码进行了一些修改（修改现有文件，添加新文件，删除现有文件），我想生成一个补丁文件而不提交。怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:59:26.757

它并不广为人知，或者它只是没有被广泛用作 SO 上的解决方案，但它的输出`git diff`是一种有效的补丁格式，可以通过管道传输到`git apply`. 因此，假设您有一个未暂存的更改要用于生成补丁：

```
git diff -- <file> > ~/mypatch ;# redirect diff output to ~/mypatch 
```

然后在另一个存储库中：

```
git apply < ~/mypatch 
```

假设您有一个根本不被跟踪的全新文件。您仍然可以`git diff`通过指定`--no-index`标志并将文件与以下内容进行比较来使用`/dev/null`：

```
git diff --no-index /dev/null <file> ~/mypatch 
```

然后以同样的方式应用它。

这个答案主要是关于 git 可以做什么的练习。我想不出任何实际理由不在新分支（通过 Adam Dymitruk 的回答）或您正在使用的主分支（根据 madth3 的评论）上进行本地更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:35:16.910

对于项目中添加的新文件：

```
git add -N <path of the new file> 
```

然后生成补丁：

```
git diff > patch 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T17:13:39.687

做出承诺。

```
git checkout -b myfeature 
```

首先，如果你喜欢

# sencha-touch-2 - 面板可滚动时固定高度？

> ID：11991958
> 
> 赞同：1
> 
> 时间：2012-08-16T16:52:17.537
> 
> 标签：sencha-touch-2

以下代码显示了我在当前应用程序中使用的视图之一的定义，这意味着该视图很容易创建并在应该显示时添加到*Ext.Viewport 。*

它的结构很简单：有一个工具栏，下面有一个面板，它可以包含任何其他组件，如按钮、面板等。

但是：我的问题是，由于我将配置**scrollable: true**添加到面板（如下所示），我还必须为该面板设置一个固定的高度（在这种情况下为 300）。如果我不设置高度，则面板中的所有组件都不会显示。

更糟糕的问题是，我不知道我应该在这里设置**什么**高度，因为我的应用程序当然应该在具有不同屏幕尺寸的不同设备上运行（iPhone/iPad/...）。

所以我想要实现的是工具栏下的面板使用完全可用的高度 - 如果它的内容“高于”它自己的高度 - 它应该是可滚动的。希望你能帮助我:-)

```
Ext.define('PV.view.Menu', {
    extend: 'Ext.Panel',

    xtype: 'menu',

    config: {
        items: [
            {
                xtype: 'toolbar',
                title: 'My Menu'
            },
            {
                xtype: 'panel',
                scrollable: true,
                height: 300,
                items: [
                    {
                        xtype: 'button',
                        text: 'Navigate to view 1 >',
                        action: 'nav-to-view1'
                    },
                    {
                        xtype: 'button',
                        text: 'Navigate to view 2 >',
                        action: 'nav-to-view2'
                    },
                    {
                        html: 'A lot of text<br />A lot of text<br />A lot of text<br />A lot of text<br />A lot of text'
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:49:00.773

您正在寻找`layout:'fit'`，以及（可能）`minHeight`

[http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-minHeight](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-minHeight)

[http://docs.sencha.com/touch/2-0/#!/api/Ext.layout.Fit](http://docs.sencha.com/touch/2-0/#!/api/Ext.layout.Fit)

```
config: {
    layout:'fit',
    items: [
        {
            xtype: 'toolbar',
            title: 'My Menu'
        },
        {
            xtype: 'panel',
            scrollable: true,
//                height: 300,
            items: [
                {
                    xtype: 'button',
                    text: 'Navigate to view 1 >',
                    action: 'nav-to-view1'
                },
                {
                    xtype: 'button',
                    text: 'Navigate to view 2 >',
                    action: 'nav-to-view2'
                },
                {
                    html: 'A lot of text<br />A lot of text<br />A lot of text<br />A lot of text<br />A lot of text'
                }
            ]
        }
    ]
} 
```

# video-streaming - 音频和视频流 - 管理 CPU 和带宽

> ID：11991961
> 
> 赞同：1
> 
> 时间：2012-08-16T16:52:26.387
> 
> 标签：video-streaming, audio-streaming, voip, bandwidth-throttling

我正在研究提供商和消费者之间的音频和视频流（同时），我想知道在 CPU 和带宽方面处理音频和视频之间平衡的最佳/常用解决方案是什么。

这是一个概念证明，只是为了了解背后的想法，所以**我没有**研究实现任何这些的库，而是我对算法和设计概念/模式更感兴趣，以处理两者的带宽和 CPU 管理流（音频和视频）。

一般来说，常见的做法是什么？有什么好的入门书吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-02T17:14:01.127

I don't know if this will answer your question. There is adaptive streaming technologies such as HLS and MPEG-DASH. Those will adapt based on bandwidth and CPU performance as well.

# installation - 查找最大驱动器，NSIS 安装程序

> ID：11991962
> 
> 赞同：1
> 
> 时间：2012-08-16T16:52:29.173
> 
> 标签：installation, nsis

我对 NSIS 安装程序脚本完全陌生，我想将安装目录设置为计算机上最大的磁盘。谁能指导我怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:38:49.533

```
!include LogicLib.nsh
System::Call 'kernel32::GetLogicalDrives()i.r0'
StrCpy $1 $windir 3 ; Fallback if things go wrong
StrCpy $2 0
StrCpy $4 65 ; 'A'
loop:
    IntOp $3 $0 & 1
    ${If} $3 <> 0
        IntFmt $3 "%c:\" $4
        System::Call 'kernel32::GetDiskFreeSpaceEx(tr3,*l.r5,*l,*l)i'
        ${If} $5 L> $2
            StrCpy $2 $5
            StrCpy $1 $3
        ${EndIf}
    ${EndIf}
    IntOp $4 $4 + 1
    IntOp $0 $0 >> 1
    StrCmp $0 0 "" loop
StrCpy $InstDir "$1" ;You should probably append something to the path here, you cannot install to the root of a drive by default 
```

将其放入 .onInit 或目录页面的预回调中...

# c++ - 对 std::regex_match（和 std::regex_search）的参数生命周期的约束

> ID：11991964
> 
> 赞同：3
> 
> 时间：2012-08-16T16:52:30.740
> 
> 标签：c++, c++11

考虑到带有 signaturer 的 C++11 函数，`std::regex_match( std::string const&, std::smatch& match, std::regex const& re )`第一个参数的生命周期有什么限制？我没有找到任何东西，但是当我执行以下程序时（使用 VC++ 2010 编译，迭代器调试处于活动状态）：

```
int
main()
{
    std::string a("aaa");
    std::string c("ccc");
    std::regex re("aaa(.*)ccc");
    std::smatch m;
    if (std::regex_match(a + "xyz" + c, m, re)) {
        std::cout << m[0] << std::endl;
        std::cout << m[1] << std::endl;
    }
    return 0;
} 
```

它崩溃了，无疑是因为`sub_match`in`m`只将迭代器保留在字符串中，而不是副本。我在标准中找不到任何禁止我的代码的内容。

FWIW：它也不起作用`boost::regex`，这就是它的 `std::regex`基础。（当然，Boost 也没有记录任何关于生命周期的限制。）

最后，我想我的问题是：我应该向标准组织发送 DR，还是向 Microsoft 发送错误报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:05:24.603

我不记得在采用`tr1::regex`or期间对这种可能性进行过任何讨论`std::regex`，所以我认为它根本没有被考虑。事后看来，这当然是一个我们应该预见到的陷阱。在我的脑海中，一个需要 a 的重载`std::string&&`将表明涉及临时性，并且需要一个副本。所以我会向标准委员会报告。（完全披露：我编写了 Dinkumware 实现，这是微软发布的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:08:26.177

这种重载的规范`regex_match`指出它（28.11.2[re.alg.match]/6）：

> *回报：* `regex_match(s.begin(), s.end(), m, e, flags)`

对这个重载没有额外的要求，它委托的重载只需要一个迭代器范围——它没有办法让临时字符串保持活动状态，因为它甚至不知道有一个字符串要保留活。

这个问题在[STL`regex`在 C++Now '12 上的演讲](http://www.youtube.com/watch?v=mUZL-PRWMeg)中被讨论过。有人建议可以在规范中添加额外的重载，以捕获右值字符串参数（例如`basic_string<...>&&`），这将给出一个很好的编译错误而不是这个运行时错误。不过，库规范不包括这些重载，而且我没有看到这方面的缺陷报告。

# ruby-on-rails - Rails 日志过于冗长

> ID：11991967
> 
> 赞同：24
> 
> 时间：2012-08-16T16:52:51.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何防止 Rails 记录太多？这是我的 production.log 文件中的典型跟踪，许多部分，缓存命中......它在开发中很有用，但我不希望在我的生产环境中使用它。

```
Started GET "/?redirected=true" for 46.193.131.53 at 2012-08-16 18:39:20 +0200
Processing by HomeController#index as HTML
  Parameters: {"redirected"=>"true"}
  Rendered application/_successfully_connected.html.haml (0.8ms)
  Rendered hotspot_infos/_infos.html.haml (0.4ms)
  Rendered application/_hotspot_infos.html.haml (1.8ms)
  Rendered application/_news.html.haml (0.3ms)
Read fragment views/social-zone-341-directory (0.5ms)
  Rendered application/_directory.html.haml (2.5ms)
  Rendered application/_meteo.html.haml (1.1ms)
  Rendered application/_notifications.html.haml (0.8ms)
  Rendered application/_like_button.html.haml (0.3ms)
  Rendered application/_navbar.html.haml (4.2ms)
  Rendered application/_connection.html.haml (0.5ms)
  Rendered application/_gallery.html.haml (0.2ms)
  Rendered application/_search_bar.html.haml (0.4ms)
  Rendered pictures/_picture_frame.html.haml (0.3ms)
  Rendered application/_profile_preview.html.haml (1.4ms)
  Rendered application/_profile_block.html.haml (1.7ms)
  Rendered application/_menus.html.haml (3.3ms)
  Rendered application/_left_pane.html.haml (5.5ms)
  Rendered application/_langs.html.haml (0.8ms)
  Rendered application/_footer.html.haml (1.9ms)
  Rendered application/_flash_modal.html.haml (0.1ms)
  Rendered application/_connection_required.js.erb (0.2ms)
Completed 200 OK in 159ms (Views: 25.5ms | ActiveRecord: 88.0ms) 
```

谢谢你的帮助

PS：我使用的是 Rails 3.2.6

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-17T10:00:27.760

在 Rails 4 中会有一个清理日志的设置：

```
config.action_view.logger = nil 
```

要在 Rails 3 中实现这一点，您必须修改 ActionView：

```
module ActionView
  class LogSubscriber < ActiveSupport::LogSubscriber
    def logger
      @memoized_logger ||= Logger.new('/dev/null')
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T17:49:58.990

你需要设置你的`config.log_level`不同。了解**[日志级别](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)**。

例如，将以下内容添加到`config/evironments/production.rb`

```
config.log_level = :warn 
```

您的可能设置为`:debug`或`:info`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-26T15:45:44.570

我把它放在我的初始化程序中，以猴子补丁某些日志记录去调试而不是信息：

```
module ActionView
  class LogSubscriber
    def render_template(event)
      message = "Rendered #{from_rails_root(event.payload[:identifier])}"
      message << " within #{from_rails_root(event.payload[:layout])}" if event.payload[:layout]
      message << " (#{event.duration.round(1)}ms)"
      debug(message)
    end
    alias :render_partial :render_template
    alias :render_collection :render_template
  end  
end

module ActionController
  class LogSubscriber
    # Use debug logging for read_fragment
    # %w(write_fragment read_fragment exist_fragment? expire_fragment expire_page write_page).each do |method|
    %w(read_fragment).each do |method|
      class_eval <<-METHOD, __FILE__, __LINE__ + 1
        def #{method}(event)
          return unless logger.info?
          key_or_path = event.payload[:key] || event.payload[:path]
          human_name  = #{method.to_s.humanize.inspect}
          debug("\#{human_name} \#{key_or_path} (\#{event.duration.round(1)}ms)")
        end
      METHOD
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T01:13:30.470

在 2021 年，我建议为此使用[语义](https://github.com/reidmorrison/semantic_logger)记录器（和[rails_semantic_logger](https://github.com/reidmorrison/rails_semantic_logger)）gem。（[文档链接](https://logger.rocketjob.io/)）

[Lograge](https://github.com/roidrage/lograge)也是一种选择，但在这一点上似乎维护得不太好。

# java - 我应该怎么做才能解决这个错误？

> ID：11991971
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:00.407
> 
> 标签：java, android, json, parsing

我正在使用 JSONParser 来获取搜索结果，为此我遵循了本教程：[http ://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

问题是，我使用的 API 给出的结果如下：

```
{"response":[50036,{"aid":88131498,"owner_id":61775052,"artist":"Terror Squad","title":"Lean Back (OST Need For Speed Underground 2)","duration":249,"url":"http:\/\/cs4408.vkontakte.ru\/u59557424\/audio\/7f70f58bb9b8.mp3","lyrics_id":"3620730"},{"aid":106963458,"owner_id":-24764574,"artist":"«Dr. Dre ft Eminem, Skylar Grey (Assault Terror)","title":"I Need A Doctor (ASSAULT TERROR DUBSTEP REMIX)»","duration":240,"url":"http:\/\/cs5101.vkontakte.ru\/u79237547\/audio\/12cd12c7f8c2.mp3","lyrics_id":"10876670"}]} 
```

当我必须解析第一个整数（这里是 50036）时，我的问题就来了，这是找到的结果数。

我不知道如何读取该整数。

这是我的代码：

```
private void instance(String artisttrack){
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    String jsonurl = new String( "https://api.vk.com/method/audio.search?access_token=ACC_TOKEN&api_id=ID&sig=SIG&v=2.0&q=" + artistname + artisttrack + "&count=5");
    JSONObject json = jParser.getJSONFromUrl(jsonurl);

    try {
        // Getting Array of Contacts
        response = json.getJSONArray(TAG_RESPONSE);

        // looping through All Contacts
        for(int i = 0; i < response.length(); i++){
            JSONObject c = response.getJSONObject(i);

            // Storing each json item in variable
            //int results = Integer.parseInt(c.getString(TAG_RESULTS));
            String aid = c.getString(TAG_AID);
            String owner_id = c.getString(TAG_OWNER_ID);
            String artist = c.getString(TAG_ARTIST);
            String title = c.getString(TAG_TITLE);
            String duration = c.getString(TAG_DURATION);

            // Phone number is agin JSON Object
            //JSONObject phone = c.getJSONObject(TAG_PHONE);
            String url = c.getString(TAG_URL);
            String lyrics_id = c.getString(TAG_LYRICS_ID);
            Log.e("áaaaaaaaaaaaaaa", url);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

} 
```

JSONParser.java 就像教程中写的一样。

这里有 2 行 logcat 错误：

```
W/System.err(10350): org.json.JSONException: Value 50036 at 0 of type java.lang.Integer cannot be converted to JSONObject
W/System.err(10350):    at org.json.JSON.typeMismatch(JSON.java:100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:00:29.990

您尝试解析的许多值都不是`String`对象，特别是“aid”、“owner_id”和“duration”。使用正确的方法来检索值。例如：

```
int aid = c.getInt(TAG_AID);
int owner_id = c.getInt(TAG_OWNER_ID);
String artist = c.getString(TAG_ARTIST);
String title = c.getString(TAG_TITLE);
int duration = c.getInt(TAG_DURATION); 
```

编辑：我错过的另一个错误是你用 50036 开始你的数组。这不是 JSONObject 并且不能这样解析。您可以添加一个条件语句来检查它是否是数组索引 0 来解析 int 使用`getInt()`，然后将其余数组值解析为 JSONObjects 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:06:28.313

您的 JSON 示例是组织结果的一种糟糕方式：将数字与结果对象混合。数字应该表示数组中的对象数量还是其他？

如果您可以假设这个数字将始终是第一个元素，并且根据[这个](http://vk.com/developers.php?oid=-1&p=audio.search)那么它应该以这种方式工作，您可以尝试在循环外读取数组的第一个值：

```
response = json.getJSONArray(TAG_RESPONSE);

// from your example, num will be 50036:
num = response.getInt(0);

for (int i = 1; i < response.length(); i++){
    JSONObject c = response.getJSONObject(i); 
```

请注意，链接文档中的示例将此数字作为字符串：

```
{"response":
    ["5",
     {"aid":"60830458","owner_id":"6492","artist":"Noname","title":"Bosco",
"duration":"195","url":"http:\/\/cs40.vkontakte.ru\/u06492\/audio\/2ce49d2b88.mp3"},
     {"aid":"59317035","owner_id":"6492","artist":"Mestre Barrao","title":"Sinhazinha",
"duration":"234","url":"http:\/\/cs510.vkontakte.ru\/u2082836\/audio\/
d100f76cb84e.mp3"}]} 
```

但是`JSONArray.getInt()`会`String`为`int`你解析。

请注意，数组中对象中的一些值也是数字，您可能还想阅读这些值`int`：

```
int aid = c.getInt(TAG_AID);
int owner_id = c.getInt(TAG_OWNER_ID);
int duration = c.getInt(TAG_DURATION); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:57:30.487

尝试改变

```
response = json.getJSONArray(TAG_RESPONSE); 
```

进入

```
response = (JSONObject)json.getJSONArray(TAG_RESPONSE); 
```

我对 JSONObject 没有任何经验，但经常处理类型不匹配的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:01:31.210

尝试将 50036 放在像这样的引号中 "50036" 。

# spring - 春季自动转换为空列表为空

> ID：11991973
> 
> 赞同：2
> 
> 时间：2012-08-16T16:53:14.550
> 
> 标签：spring, collections, aop, nullable

我想让我所有的 DAO 方法返回一个空集合而不是 null。我怎样才能用 AOP spring 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:18:24.800

这应该有效：

```
@Aspect
@Service
public class DaoAspect {

    @Around("execution(java.util.List com.example.*Dao.get*())")
    public Object aroundGetDaoMethods(ProceedingJoinPoint joinPoint) throws Throwable {
        final Object retVal = joinPoint.proceed();
        return retVal != null ? retVal : Collections.emptyList();
    }

} 
```

调整切入点以仅匹配您希望拦截的方法。您还需要添加 AspectJ JAR：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.6</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.6</version>
</dependency> 
```

并启用 CLASSPATH 扫描：

```
<aop:aspectj-autoproxy/> 
```

# php - mysql_query 成功但获取 mysql_fetch_array() 期望参数 1 是资源

> ID：11991974
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:16.850
> 
> 标签：php, mysql, sql

下面的函数将用于将 Facebook 访问令牌输入数据库。用户 id 已经有一个关联的记录，因此只需要更新“acc_tok”字段。

由于某种原因，即使 $_result 值保持“1”并且函数回显“Successful!”，也会出现警告：

“警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值”。有谁知道为什么查询似乎成功但只返回一个布尔值而不是 mysql_fetch_array 可以使用的东西？谢谢阅读

```
function setUserAccessToken($_uid, $_accTok){
        $sql = "UPDATE `user_core` SET `acc_tok`=$_accTok WHERE `id` = $_uid";
        $_result = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());
        echo $_result;
        if ($_result) {
        echo ("Successful!");
            $_resultArray = mysql_fetch_array($_result);
            print_r($_resultArray);
        } else {
            echo ("Failed!");
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:54:38.200

您正在执行`UPDATE`查询，没有可从结果中获取的行，因此是一个布尔值，[`mysql_query()`](http://php.net/mysql_query)而不是资源。

从[手册](http://php.net/mysql_query)：

> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

# c - 在 C 中打印链表

> ID：11991975
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:19.663
> 
> 标签：c, linked-list

我正在尝试使用 C 打印链接列表。但是当我执行我的 ./a.out 时它打印我是空的。有人可以帮我解决我做错的地方。谢谢。

```
#include<stdio.h>
#include<stdlib.h>

struct node
{
        int data;
        struct node *next;
};

int main()
{
        node *start,*temp;
        start = (node *)malloc(sizeof(node));
        temp = start;
        temp -> next = NULL;
        while(1)
        {
                int query;
                printf("1.Insert\n");
                printf("2.Print\n");
                printf("Enter your choice:\n");
                scanf("%d",&query);
                if(query==1)
                {
                        int data;
                        printf("Enter the element to be inserted.\n");
                        scanf("%d",&data);
                        while(start->next!=NULL)
                        {
                                start = start -> next;
                        }
                        start->next = (node *)malloc(sizeof(node));
                        start = start->next;
                        start->data = data;
                        start->next = NULL;
                }
                else if(query ==2)
                {
                        printf("The list is as below:\n");
                        while(start->next!=NULL)
                        {
                                printf("%d \t",start->next->data);
                                start=start->next;

                        }
                }
                else
                break;
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:58:22.310

每当您插入一个元素时，您都会将`start`指针移动到之前的那个`NULL`。因此，无论何时您要打印列表，`start->next`都是`NULL`，并且什么都不能打印。

您应该`temp`同时使用元素插入和列表输出。只需记住在浏览列表之前`temp`重新指向即可。`start`

# magento - magento catalogsearch 搜索所有产品（如查看所有品牌页面）

> ID：11991976
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:25.553
> 
> 标签：magento

对于我需要制作一种查看所有制造商页面的项目，我希望使用目录搜索但没有任何参数。我的意思是运行正常的目录搜索并返回所有制造类别中的所有鞋子。

通常通过的 url 是 testshop.com//catalogsearch/result/index/?manufacturer=2522&q=shoe%20manufactures 这有效但是当我尝试通过 testshop.com//catalogsearch/result/index/? （或沿着这些思路）这不起作用。

我还没有开始编码，因为我不确定从哪里开始，所以需要一个正确的方向。

我正在考虑查找默认类别 ID 并使用它，但不确定这是否是最佳选择。

任何建议或帮助都会一如既往地好。完成后将在此处发布我完成的代码，因为我认为使用 magento 帮助可能会有些限制。

干杯

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:07:52.113

我做的。这有点骇人听闻，但效果很好。

我注意到，如果您进行搜索并删除所有过滤器，您会得到一个类似于 /catalogsearch/result/index/?q=Shoe+Brand 的 GET 请求。但是过滤器没有像普通的目录搜索那样显示在左侧。

所以我找到了默认的类别 id 并将其添加到 GET 请求中。GET 请求现在看起来像这样 /catalogsearch/result/index/?cat=2&q=Shoe+Brand 。

尽管 GET 请求包含 q=Shoe+Brand，但它实际上并未将其用作搜索条件。

这现在返回了一个目录搜索页面，其中默认类别作为过滤器。

这在过滤器和面包屑中显示默认类别，因此我必须更改适当的 phtml 文件以检查并显示“所有品牌”而不是“默认类别”。

希望这对其他人有帮助

杰森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:58:40.447

也许尝试务实地获取搜索模型

下面是获取 Search 模型的代码：

```
$search = Mage::getSingleton('catalogsearch/advanced'); 
```

要实际搜索，请输入以下内容：

```
$search = Mage::getSingleton('catalogsearch/advanced')->addFilters(array('name' => $term)); 
```

然后要在对象中获取结果，请输入以下行：

```
$search->getProductCollection(); 
```

希望这可以帮助

# jquery - 固定 div 的 css 垂直滚动

> ID：11991983
> 
> 赞同：1
> 
> 时间：2012-08-16T16:53:39.500
> 
> 标签：jquery, css, scroll, css-position

我有一个 div 让我们说

```
height:2000px 
```

和

```
width: 30px 
```

我需要固定它的位置

但是当我使用

```
position: fixed 
```

然后虽然 div 始终可见，但我无法垂直滚动以查看“溢出”内容

我找到了这个插件： [https ://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

但它仅适用于水平滚动。

有什么想法我能做什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:51:48.233

您需要使用 javascript 来执行此操作。如果你看一下你提到的插件的源代码，你会发现它存储了目标元素的偏移量，并根据水平滚动位置设置其左侧位置；这意味着它正在实现自己的“固定”功能。

基本上，如果水平滚动为 200，则将目标向左移动 200。您将垂直而不是水平执行此操作。

每次滚动窗口时（绑定到 window.scroll 事件），检查垂直位置，然后将元素沿相反方向（向上）移动垂直滚动位置，使其左侧保持在开始的位置。这将使它看起来好像是固定的。

如果您对插件的执行方式有任何疑问，请查看插件的源代码：

[https://github.com/bigspotteddog/ScrollToFixed/blob/master/jquery-scrolltofixed.js](https://github.com/bigspotteddog/ScrollToFixed/blob/master/jquery-scrolltofixed.js)

**编辑：**我应该说，覆盖固定的功能。使你的目标元素固定，然后根据上面描述的垂直滚动位置调整它的垂直位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-12T10:04:51.840

我会说 try `position: absolute;`Fix 将保持元素的位置相同。使用`absolute`“元素相对于其第一个定位（非静态）祖先元素定位”时，请[在此处查看 w3schools](https://www.w3schools.com/cssref/pr_class_position.asp)

# jquery - 具有不同字体大小的Jquery-ui多个日期选择器

> ID：11991985
> 
> 赞同：1
> 
> 时间：2012-08-16T16:53:40.873
> 
> 标签：jquery, jquery-ui

我希望能够独立控制多个 jquery-ui datepicker 的字体大小。我有 2 个日期选择器链接到文本输入。像这样声明：
`$('#Date1').datepicker({firstDay: 1,showWeek: true});`
`$('#Date2').datepicker({firstDay: 1,showWeek: true});`

在 HTML 中，它们的使用方式如下：
`<input type="text" size=10 maxlength=10 id="Date1">`
`<input type="text" size=10 maxlength=10 id="Date2">`

如何独立更改日期选择器的字体大小？
`<style type="text/css"> .ui-datepicker { font-size: 12px; } </style>`
影响两个日期选择器。
`<style type="text/css"> #Date1 { font-size: 12px; } </style>`什么也没做。
如果我创建一个`<div>`周围，`<input>`它也会影响我不想要的文本输入。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:59:53.857

尝试

```
$('#Date1 > .ui-datepicker').css({ 'font-size': 12px}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:03:38.193

您不能单独更改字体大小，它对两个日期选择器使用**相同**的元素，这是我的 JSfiddle，如果您检查输入字段上的元素，您会明白我的意思。

[http://jsfiddle.net/m7q3H/56/](http://jsfiddle.net/m7q3H/56/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:04:07.237

如果你是一个 div，你可以只定位日期选择器而不是输入，就像这样

```
 div#newDiv .ui-datepicker:first-child  //gets you the first one
  div#newDiv .ui-datepicker:last-child  //gets you the last one 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T17:18:10.867

由于无论您创建多少个实例，日期选择器都使用同一个日期选择器，因此最好的办法是添加和删除依赖于实例的类。

请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/W2agd/)**。

**jQuery**

```
$('#Date1').datepicker({
    firstDay: 1,
    showWeek: true
});
$('#Date2').datepicker({
    firstDay: 1,
    showWeek: true,
    beforeShow: function(input, inst) {
       $('.ui-datepicker').addClass('bigFont');
    },
    onClose:function(input, inst) {
       $('.ui-datepicker').removeClass('bigFont');
    }
});​ 
```

# asp.net - 移动代码后 TFS SDK 汇编错误

> ID：11991986
> 
> 赞同：1
> 
> 时间：2012-08-16T16:53:40.520
> 
> 标签：asp.net

我们最近对我们的 ASP.NET 网站解决方案进行了一些代码重组，我遇到了一个关于 TFS 2010 SDK 程序集的不友好问题，我无法弄清楚。

我们有一个小类（我在下面包含了使用 TFS SDK 的函数），它检索自上次部署网站以来的所有 TFS 变更集注释。该网站项目有以下使用 TFS SDK 的参考：

*   Microsoft.TeamFoundation.Client
*   Microsoft.TeamFoundation.VersionControl.Client

曾经存在于项目的 App_Code 文件夹中的类和以下 TFS 程序集部署在站点的 bin 文件夹中：

*   Microsoft.TeamFoundation.Client.dll
*   Microsoft.TeamFoundation.Common.dll
*   Microsoft.TeamFoundation.Common.Library.dll
*   Microsoft.TeamFoundation.dll
*   Microsoft.TeamFoundation.VersionControl.Client.dll
*   Microsoft.TeamFoundation.VersionControl.Common.dll

部署到站点时，这可以正常工作，没有错误。

我们将这个类（连同其他几个）移到一个单独的类库中，并将其从站点的 App_Code 文件夹中删除，更改了 Visual Studio 中项目的所有适当程序集引用。现在，当它被部署时，我们在网站上点击的任何页面上都会收到以下错误：

> 无法加载文件或程序集“Microsoft.TeamFoundation.WorkItemTracking.Client.Cache, Version=10.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。试图加载格式不正确的程序。

我可以从我的本地主机和开发工作区运行而没有任何问题，因此构建的某些内容似乎有问题。在检查了 TFS 抽出的构建后，TFS SDK 的构建中包含了另外三个以前不存在的程序集：

*   Microsoft.TeamFoundation.WorkItemTracking.Client.Cache.dll
*   Microsoft.TeamFoundation.WorkItemTracking.Client.DataStore.dll
*   Microsoft.TeamFoundation.WorkItemTracking.Client.RuleEngine.dll

我不明白为什么这些现在被拉进构建中。我们不会在任何项目中直接引用这些程序集。从 TFS 中提取注释的代码没有改变，只是它的程序集位置。未执行任何 TFS 升级。底线 - 我们添加了一个类库，代码现在存在于其中，并且它似乎需要一些其他程序集，而以前它存在于 App_Code 文件夹中时并不想要这些程序集。我最好的猜测是 TFS 在构建过程中将这些作为依赖程序集拉入其他程序集，但我不知道为什么。

类似错误的在线点击通常围绕 32/64 位问题。我检查了配置管理器，解决方案中的所有项目都设置为使用任何 CPU，这对我来说似乎是正确的，我们在服务器上的 IIS 中启用了 32 位应用程序。

对于这篇文章的篇幅，我深表歉意，但我想提供我认为相关的细节。任何想法将不胜感激。谢谢。

```
Public Function GetChangesSinceDeployDate(ByVal lastDeployDate As DateTime) As List(Of TFSChange)

    Dim tfs As New TfsTeamProjectCollection(New Uri("http://tfs.proviadoor.com:8080/tfs/entrylink"))
    tfs.EnsureAuthenticated()

    Dim vcs As VersionControlServer = CType(tfs.GetService(GetType(VersionControlServer)), VersionControlServer)

    Dim versionFrom As VersionSpec = GetDateVSpec(lastDeployDate)
    Dim versionTo As VersionSpec = GetDateVSpec(Now)

    _changeList = New List(Of TFSChange)

    Dim changeSetIds As String = ""
    For Each projectPath As String In _projectPaths
        Dim results As IEnumerable = vcs.QueryHistory(projectPath, VersionSpec.Latest, 0, RecursionType.Full, "", versionFrom, versionTo, Integer.MaxValue, False, True)

        For Each chgSet As Changeset In results
            If Not chgSet.ChangesetId.ToString().InList(changeSetIds) Then
                _changeList.Add(New TFSChange(chgSet.ChangesetId, chgSet.Committer, chgSet.CreationDate, chgSet.Comment))
                changeSetIds.Append(chgSet.ChangesetId.ToString(), ",")
            End If
        Next
    Next

    Dim sortedList = From chg As TFSChange In _changeList _
                     Select chg _
                     Order By chg.CommitUser, chg.ChangeDate Descending

    Return sortedList.ToList()

End Function

Private Function GetDateVSpec(ByVal versionDate As DateTime) As VersionSpec

    Dim dateSpec As String = String.Format("D{0:yyy}-{0:MM}-{0:dd}T{0:HH}:{0:mm}", versionDate)
    Return VersionSpec.ParseSingleSpec(dateSpec, "")

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:25:52.790

消息“程序格式不正确”确实表明存在 32/64 位问题。

问题是“任何 CPU”代码将以最高位启动：在您的情况下，是 64 位，因为在启动时引用的所有程序集都是 64 位（或至少是任何 CPU）。

.NET 中延迟程序集加载/JIT 的某种组合意味着在您点击方法调用之前不会实际加载 TFS 程序集。此时，您的应用程序已经承诺以 64 位运行，因此加载 32 位 TFS 程序集失败 - 您不能在一个进程中混合位。 *在 IIS 中允许*32 位应用程序是不够的：您必须通过更改编译设置来确保您的应用程序确实以 32 位方式*运行。*在这种情况下，“任何 CPU”实际上是罪魁祸首，因为它允许您的代码以 64 位启动。

我说“某种组合”是因为我不确定确切的细节，但我在控制台应用程序中看到了完全相同的问题，编译为 Any CPU 并引用 TFS DLL。解决方案是将入口点程序集编译为 32 位。在 Web 服务中使用相同的代码的地方，我们最终选择了一个单独的进程，这样 Web 应用程序也不会减少到 32 位。

# sql - exec 失败，因为名称不是有效的标识符？

> ID：11991987
> 
> 赞同：83
> 
> 时间：2012-08-16T16:53:42.733
> 
> 标签：sql, sql-server, sql-server-2008

我有一个查询，我需要将其作为动态查询运行以输出有意义的列名。例如，如果我直接运行查询，它会正确返回数据。但是，如果我使用下面的代码，它会显示：

```
The name '
            SELECT (CASE WHEN A.Domain IS NOT NULL THEN A.Domain ELSE B.Domain END) AS [Domain], 
                    (CASE WHEN A.Email IS NOT NULL THEN A.Email ELSE B.Email END) AS [Email], 
                    A.[Sender Size] AS [Sender Size 1], A.[Sender Count] AS [Sender Count 1],
                        A.[Receiver Size] AS [Receiver Size 1], A.[Receiver Count] AS [Receiver Count 1],
                    A.[Sender Size 2] AS [Sender Size 2], A.[Sender Count 2] AS [Sender Count 2],
                        A.[Receiver Size 2] AS [Receiver Size 2], A.[Receiver Count 2] AS [Receiver Count 2],
                    B.SenderSize AS [Sender Size Average], B.SenderCount AS [Sender Count Average],
                        B.ReceiverSize AS [Receiv' is not a valid identifier. 
```

下面是代码：

```
DECLARE @query NVARCHAR(4000)
SET @query = N'SELECT *
            FROM
            (
                SELECT (CASE WHEN A.Domain IS NOT NULL THEN A.Domain ELSE B.Domain END) AS [Domain], 
                        (CASE WHEN A.Email IS NOT NULL THEN A.Email ELSE B.Email END) AS [Email], 
                        A.[Sender Size] AS [Sender Size 1], A.[Sender Count] AS [Sender Count 1],
                            A.[Receiver Size] AS [Receiver Size 1], A.[Receiver Count] AS [Receiver Count 1],
                        A.[Sender Size 2] AS [Sender Size 2], A.[Sender Count 2] AS [Sender Count 2],
                            A.[Receiver Size 2] AS [Receiver Size 2], A.[Receiver Count 2] AS [Receiver Count 2],
                        B.SenderSize AS [Sender Size Average], B.SenderCount AS [Sender Count Average],
                            B.ReceiverSize AS [Receiver Size Average], B.ReceiverCount AS [Receiver Count Average]
                FROM
                    (
                    SELECT (CASE WHEN tf.Domain IS NOT NULL THEN tf.Domain ELSE tf2.Domain END) AS Domain, 
                            (CASE WHEN tf.Email IS NOT NULL THEN tf.Email ELSE tf2.Email END) AS Email, 
                         ISNULL(tf.SenderSize,0) AS [Sender Size] , ISNULL(tf.SenderCount,0) AS [Sender Count], ISNULL(tf.ReceiverSize,0) AS [Receiver Size], ISNULL(tf.ReceiverCount,0) AS [Receiver Count], 
                         ISNULL(tf2.SenderSize,0) AS [Sender Size 2], ISNULL(tf2.SenderCount,0) AS [Sender Count 2], ISNULL(tf2.ReceiverSize,0) AS [Receiver Size 2], ISNULL(tf2.ReceiverCount,0) AS [Receiver Count 2] 
                    FROM #TrafficFinal tf FULL JOIN #TrafficFinal2 tf2 ON (tf.Email = tf2.Email AND tf.Domain = tf2.Domain)
                    ) A FULL JOIN #TrafficFinal3 B ON (A.Email = B.Email AND A.Domain = B.Domain)
            ) C
            ORDER BY Domain, Email';    

PRINT @query;

-- run it
exec @query; 
```

是因为完全加入吗？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2012-08-16T17:02:43.950

最后试试这个：

```
exec (@query) 
```

如果没有括号，SQL Server 假定变量的值是存储过程名称。

或者

```
EXECUTE sp_executesql @query 
```

这不应该是因为 FULL JOIN。
但我希望您在此之前已经创建了临时表：#TrafficFinal、#TrafficFinal2、#TrafficFinal3。

* * *

请注意，使用 EXEC 和 sp_executesql 之间存在性能注意事项。因为 sp_executesql 像 sp 一样使用强制语句缓存。
更多细节[在这里](http://www.sqlskills.com/BLOGS/KIMBERLY/post/EXEC-and-sp_executesql-how-are-they-different.aspx)。

* * *

另一方面，考虑到您没有进行任何查询操作并按原样执行它，当您可以按原样使用查询时，是否有理由在这种情况下使用动态 sql？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-25T18:53:34.807

在我的情况下，如果您的 sql 是通过连接或使用转换生成的，那么执行时的 sql 需要以字母 N 为前缀，如下所示

例如

```
Exec N'Select bla..' 
```

N 定义的字符串文字是 unicode。

# javascript - 图像映射在 FF 和 IE 中不起作用（使用 onclick javascript）

> ID：11991989
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:46.060
> 
> 标签：javascript, imagemap

对于我的生活，这是行不通的，我不知道为什么..

```
<div class="b2s-popup" id="hideaway">
<img src="back-in-groove.jpg" usemap="b2schoolpop" />
<map name="b2schoolpop" id="b2schoolpop">
  <area shape="rect" coords="304,289,403,308" href="#" />
  <area shape="rect" coords="365,-6,426,24" href="javascript:;" onClick="document.getElementById('hideaway').style.display='none';" />
</map>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:02:06.710

我是个白痴。Usemap 应该是“#b2schoolpop”而不是“b2schoolpop”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:56:34.173

尝试这个;

```
<div class="b2s-popup" id="hideaway">
<img src="back-in-groove.jpg" usemap="b2schoolpop" />
<map name="b2schoolpop" id="b2schoolpop">
  <area shape="rect" coords="304,289,403,308" href="#" />
  <area shape="rect" coords="365,-6,426,24" href="javascript:document.getElementById('hideaway').style.display='none';" />
</map>
</div> 
```

或者

```
<div class="b2s-popup" id="hideaway">
<img src="back-in-groove.jpg" usemap="b2schoolpop" />
<map name="b2schoolpop" id="b2schoolpop">
  <area shape="rect" coords="304,289,403,308" href="#" />
  <area shape="rect" coords="365,-6,426,24" href="javascript:void(0);" onclick="javascript:document.getElementById('hideaway').style.display='none';" />
</map>
</div> 
```

# sql-server - SQL：如何替换列中的重复字符？

> ID：11991992
> 
> 赞同：0
> 
> 时间：2012-08-16T16:53:59.210
> 
> 标签：sql-server, replace, duplicates

我有一个名为“Mergecodes”的列，其中包含用逗号分隔的字符（或对）。一些条目包含需要删除的倍数。这是一个示例，其中“KD”是重复的，因此需要删除一个：“ **T, M, KD, SB, KD** ”。我想这可以通过计算出现的次数来实现，如果它包含多个，删除额外的。我只是不确定这个的语法。任何帮助将不胜感激。谢谢！

**更新**

正如@Yaroslav 建议的那样，当我使用字符串（'T，M，KD，SB，KD'）时，我能够得到结果，但是当我使用列而不是字符串时，我没有得到任何结果。有任何想法吗？

```
declare @str varchar(100)
select @str = mergecodes from GoldMineTest.dbo.CONTACT1
declare  @separator varchar(1)= ','

;WITH tokens(p, a, b) AS
        (
            SELECT 1, 1, CHARINDEX(@separator, @str)
             UNION ALL
            SELECT p + 1, b + 1, CHARINDEX(@separator, @str, b + 1)
              FROM tokens
             WHERE b > 0
        )
SELECT SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END) AS Separated_values, count(SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END))
  FROM tokens
 GROUP BY SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END)
HAVING count(SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END))=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:03:35.460

已编辑：请参阅此[SQL Fiddle 演示代码](http://www.sqlfiddle.com/#!3/6b5e1/1)。

我最终所做的是创建一个函数，该函数采用每一行，将删除重复的值分开，然后再次连接它们以返回没有重复值的新行。在函数内部，之前发布的代码用于获取删除重复项的分隔值。这`HAVING`不是必需的，仅当您想完全删除该特定行上的重复字符集时。

使用 MS SQL 服务器。此代码应适应您的需要。它将输出由分隔符分隔的不重复字符链列表。你只需要连接结果......没有足够的时间来制定更详细的答案......

```
DECLARE @str varchar(4000)='T,M,KD,SB,KD',
        @separator varchar(1)= ','

;WITH tokens(p, a, b) AS
        (
            SELECT 1, 1, CHARINDEX(@separator, @str)
             UNION ALL
            SELECT p + 1, b + 1, CHARINDEX(@separator, @str, b + 1)
              FROM tokens
             WHERE b > 0
        )
SELECT SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END) AS Separated_values, count(SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END))
  FROM tokens
 GROUP BY SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END)
HAVING count(SUBSTRING(@str, a, CASE WHEN b > 0 THEN b-a ELSE 4000 END))=1 
```

# logging - 避免重叠日志处理

> ID：11991997
> 
> 赞同：0
> 
> 时间：2012-08-16T16:54:10.787
> 
> 标签：logging

在扫描一系列文件时，例如系统日志，如何避免再次重新扫描同一系列日志？我有兴趣做 Splunk 所做的任何将日志保存在数据库中的操作，但是我想不出一种方法来更新数据库，而无需在先前扫描的文件中放置一些指示符。此过程是否有任何技术，或者我是否必须扫描文件，从上一次扫描中找到最后一项，然后开始处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:12:21.903

1) Splunk 不使用数据库，它将信息索引到磁盘上的压缩平面文件

2) 如果您使用 Splunk 来监控您的日志文件和日志文件目录，那么 Splunk 足够智能，可以跟踪它在监控中的位置，因此它不会重新索引重复的日志事件。

# android - “连接的”LinearLayout 中的 WordWrap 不起作用

> ID：11991999
> 
> 赞同：0
> 
> 时间：2012-08-16T16:54:16.507
> 
> 标签：android, android-linearlayout, word-wrap

我不明白为什么我的示例中的自动换行不起作用。

XML 描述了一个垂直的“一行” `LinearLayout`，它将在运行时填充。该行由 a`checkbox`后跟两列组成。第一列是垂直的，里面`LinearLayout`有两个`TextView`s （这里可以换行）。第二列是`LinearLayout`只有一个`TextView`（自动换行不起作用）。

如果第二列的文本增长，第一列缩小到一个小的“一个字母”列，第二列不换行他的长文本。但第二个也被定义为使用自动换行......

有谁知道这个问题的解决方案？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/relativeLayout1">
        <CheckBox
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/checkBox1" />
        <LinearLayout
            android:orientation="vertical"
            android:minWidth="25px"
            android:minHeight="25px"
            android:id="@+id/linearLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/checkBox1"
            android:layout_toLeftOf="@id/linearLayout2">
            <TextView
                android:text="A long long long long text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/textView1"
                android:singleLine="false" />
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/textView2"
                android:singleLine="false" />
        </LinearLayout>
        <LinearLayout
            android:orientation="horizontal"
            android:minWidth="25px"
            android:minHeight="25px"
            android:id="@+id/linearLayout2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true">
            <TextView
                android:text="Another long long text... please wrap!!"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/textView3"
                android:singleLine="false" />
        </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:57:47.320

好吧，您在所有文本视图中都将 android:singleLine 设置为“False”。如果您希望其中一个不换行，请将其设置为“True”

[http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)