# StackOverflow 问答 11929000-11929999

# ubuntu - 在ubuntu中用cuda编译opencv的makefile停止工作

> ID：11929006
> 
> 赞同：0
> 
> 时间：2012-08-13T06:14:57.373
> 
> 标签：ubuntu, opencv, makefile, cuda

我正在尝试在我的笔记本电脑上编译一个项目，其中我需要 CUDA 和 opencv。所以我创建了3个文件

主文件

内核.cu

内核.h

在 main.cpp 我有 opencv 代码，在 kernel.cu 我有我的内核。我正在使用我在另一个项目中找到的这个 makefile：

```
CXX=g++
CUDA_INSTALL_PATH=/usr/local/cuda
CFLAGS= -I. -I$(CUDA_INSTALL_PATH)/include `pkg-config --cflags opencv`
LDFLAGS= -L$(CUDA_INSTALL_PATH)/lib64 -lcudart `pkg-config --libs opencv`

all:
    $(CXX) $(CFLAGS) -c main.cpp -o main.o
    nvcc $(CUDAFLAGS) -arch="sm_21" -c kernel.cu -o kernel.o
    $(CXX) $(LDFLAGS) main.o kernel.o -o main 
```

我曾在另一台使用 opencv 2.4.2 、CUDA 4.0 和 gcc 4.4 的计算机上尝试过相同的项目，它运行良好，但现在我在笔记本电脑上使用 opencv 2.4.2 、CUDA 4.2 和 gcc 4.6 进行尝试，它不断返回错误最后一行，但它确实创建了 main.o 和 kernel.o，如果我注释掉最后一行，它不会给出错误。

我已经构建并运行了 opencv 和 cuda sdk 示例，它们分别运行良好。你能帮助我吗？

这是它返回的内容：

> g++ -L/usr/local/cuda/lib64 -lcudart `pkg-config --libs opencv`main.o kernel_gpu.o -o grayscale
> 
> main.o：在函数“main”中：
> 
> main.cpp:(.text+0x44): undefined reference to `cv::imread(std::basic_string, std::allocator > const&, int)'
> 
> main.cpp:(.text+0x72): undefined reference to `cv::_InputArray::_InputArray(cv::Mat const&)'
> 
> main.cpp:(.text+0xa6): undefined reference to `cv::imshow(std::basic_string, std::allocator > const&, cv::_InputArray const&)'
> 
> main.cpp:(.text+0xc8): undefined reference to `cv::waitKey(int)'
> 
> main.o：在函数 `cv::Mat::~Mat()' 中：
> 
> main.cpp:(.text._ZN2cv3MatD2Ev[_ZN2cv3MatD5Ev]+0x39): 未定义引用`cv::fastFree(void*)'
> 
> main.o：在函数 `cv::Mat::release()' 中：
> 
> main.cpp:(.text._ZN2cv3Mat7releaseEv[cv::Mat::release()]+0x47): 未定义对 `cv::Mat::deallocate()' 的引用
> 
> kernel_gpu.o：在函数`cuda_BGsub': tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x41): undefined reference to`cudaConfigureCall'
> 
> kernel_gpu.o：在函数`cuda_grayscale': tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xb3): undefined reference to`cudaConfigureCall'
> 
> kernel_gpu.o：在函数`cuda_Filter': tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x10d): undefined reference to`cudaConfigureCall'
> 
> kernel_gpu.o：在函数`cuda_Noise_reduc': tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x176): undefined reference to`cudaConfigureCall'
> 
> kernel_gpu.o：在函数`cuda_RGB': tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x1d9): undefined reference to`cudaConfigureCall'
> 
> kernel_gpu.o:tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x234)：更多未定义的“cudaConfigureCall”引用如下
> 
> kernel_gpu.o：在函数“__cudaUnregisterBinaryUtil()”中：
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x409): 对 `__cudaUnregisterFatBinary' 的未定义引用
> 
> kernel_gpu.o：在函数`__device_stub__Z5BGsubPhS_S_iib(unsigned char*, unsigned char*, unsigned char*, int, int, bool)'中：
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x442): 未定义对“cudaSetupArgument”的引用
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x465): 未定义对“cudaSetupArgument”的引用
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x488): 对“cudaSetupArgument”的未定义引用
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x4a7): 对“cudaSetupArgument”的未定义引用
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x4c6): 对“cudaSetupArgument”的未定义引用
> 
> kernel_gpu.o:tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x4e5): 更多未定义的“cudaSetupArgument”引用
> 
> kernel_gpu.o：在函数` **sti__cudaRegisterAll_45_tmpxft_000016bc_00000000_4_kernel_gpu_cpp1_ii_cdcbb70e** ()'中：
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xe7e): 未定义引用`__cudaRegisterFatBinary'
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xedc): 未定义引用`__cudaRegisterFunction'
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xf29): 未定义引用`__cudaRegisterFunction'
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xf76): 未定义对“__cudaRegisterFunction”的引用
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0xfc3): 未定义引用`__cudaRegisterFunction'
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x1010): 未定义引用`__cudaRegisterFunction'
> 
> kernel_gpu.o:tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(.text+0x105d): 更多未定义的对 `__cudaRegisterFunction' 的引用
> 
> kernel_gpu.o：在函数“cudaError cudaLaunch(char*)”中：
> 
> tmpxft_000016bc_00000000-1_kernel_gpu.cudafe1.cpp:(. *text.Z10cudaLaunchIcE9cudaErrorPT* [cudaError cudaLaunch(char*)]+0x14): 未定义对“cudaLaunch”的引用
> 
> collect2: ld 返回 1 个退出状态
> 
> 制作：*** [全部] 错误 1

**编辑：** 此版本有效：

```
CXX=g++
CUDA_INSTALL_PATH=/usr/local/cuda
CFLAGS= -I. -I$(CUDA_INSTALL_PATH)/include `pkg-config --cflags opencv`
LDFLAGS= -L$(CUDA_INSTALL_PATH)/lib64 -lcudart `pkg-config --libs opencv`

all:
    $(CXX) $(CFLAGS) -c main.cpp -o main.o
    nvcc $(CUDAFLAGS) -arch="sm_21" -c kernel.cu -o kernel.o
    $(CXX)  main.o `pkg-config --libs opencv` -L$(CUDA_INSTALL_PATH)/lib64 -lcudart kernel.o -o main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:17:29.717

您可以尝试将所有 -l 选项放在 kernel.o 后面吗？

最好的祝福！

# iphone - 如何在没有服务器的情况下使用 iPhone 自动续订订阅

> ID：11929007
> 
> 赞同：3
> 
> 时间：2012-08-13T06:14:58.633
> 
> 标签：iphone, ios, in-app-purchase, in-app-billing

所以我看到的所有关于自动续订订阅的文档和帖子都是使用[服务器端](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1 "服务器端")模型来交付产品。为什么不能使用内置模型是否有特殊原因。

我正在创建一个音频播放器应用程序，它将每月提供新的原创音乐。通过服务端验证，我知道它会在允许用户从我的服务器下载音频之前检查收据是否有效。

但是，我不能只对我的应用程序进行编程以 ping 应用程序商店以查看他们的订阅是否处于活动状态。如果他们的订阅未激活，让应用程序坐在主屏幕上说“请在重新获得对音频播放器的访问之前更新您的订阅”

据我了解，服务器端模型的存在是为了[防止盗版](https://stackoverflow.com/a/9297913/1594491)者访问我的服务器资源。还有其他理由我应该使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:13:30.873

这取决于您是否希望您的应用程序被黑客入侵。所有验证例程的主要原因是，一旦用户可以使用应用程序，他可以以他喜欢的任何方式对其进行修改，这可以在所有被黑客入侵的 iPhone 应用程序上看到。因此，在您的情况下，他们会从您的代码中删除所有检查并将“活动”设置为 true。

# django - 在 Django SessionWizardView 中包含非表单

> ID：11929011
> 
> 赞同：1
> 
> 时间：2012-08-13T06:15:10.200
> 
> 标签：django, django-forms

django SessionWizardView 中可以包含非表单网页吗？

例如，我希望用户填写 Form1，Form2，然后查看网页（在同一会话中）（单击下一步），然后 Form3？所有这些同时保持相同的会话。

如果是这样，如何最好地完成？有什么例子或片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:37:06.903

有一个相当简单的黑客攻击。创建一个普通的旧表单，其中包含一个对用户隐藏、没有内容且不是必需的字段。

我这样做：

```
class BlankForm(forms.Form):
    nothing     = forms.CharField(required=False, widget=HiddenInput) 
```

就像其他页面一样，将它包含在您的 SessionWizardView 调用中：

```
SessionWizardView.as_view([Form1, Form2, BlankForm, Form3]) 
```

在模板页面中，您可以使用如下逻辑来显示信息：

```
{% if wizard.steps.current == '2' %}
    Whatever you want to show on the BlankForm
{% endif %} 
```

# arrays - 建立一个没有重复顺序的数字数组无关紧要（游戏统计）

> ID：11929013
> 
> 赞同：0
> 
> 时间：2012-08-13T06:15:20.097
> 
> 标签：arrays, multidimensional-array, numbers, permutation, game-development

所以我玩新英雄。我渴望制作一个统计程序，显示 5 名英雄和另外 5 名英雄的哪支队伍获胜最多。鉴于有 85 个英雄，游戏是 85 选 5 对 80 选 5，这是很多组合。

本质上，我将获取游戏服务器允许我获取的统计数据，然后将 1 放入一个数组中，当英雄获胜时，该数组中有英雄 [1,2,3,4,5][6,7,8 ,9,10][W:1][L:0] 所以在我从历史游戏数据中解析构建数组后，我可以放入我想看到的5个英雄，然后我可以取回所有相关的游戏数据告诉我哪 5 个英雄阵容赢/输最多。

我需要帮助开始的是一个简单的算法来写出我的数组。这是我需要的类似输出：（我已将其简化为 1-10，我得到的代码可以将 10 更改为 x 来表示有多少英雄）。

[1,2,3,4,5][6,7,8,9,10]

[1,2,3,4,6][5,7,8,9,10]

[1,2,3,4,7][5,6,8,9,10]

[1,2,3,4,8][5,6,7,9,10]

[1,2,3,4,9][5,6,7,8,10]

[1,2,3,4,10][5,6,7,8,9]

* * *

[1,2,3,5,6][4,7,8,9,10]

[1,2,3,5,7][4,6,8,9,10]

[1,2,3,5,8][4,6,7,9,10]

[1,2,3,5,9][4,6,7,8,10]

[1,2,3,5,10][4,6,7,8,9]

* * *

[1,2,3,6,7][4,5,8,9,10]

[1,2,3,6,8][4,5,7,9,10]

[1,2,3,6,9][4,5,7,8,10]

[1,2,3,6,10][4,5,7,8,9]

* * *

[1,2,3,7,8][4,5,6,9,10]

[1,2,3,7,9][4,5,6,8,10]

[1,2,3,7,10][4,5,6,8,9]

* * *

[1,2,3,8,9][4,5,6,7,10]

[1,2,3,8,10][4,5,6,7,9]

* * *

[1,2,3,9,10][4,5,6,7,8]

* * *

[1,2,4,5,6][3,7,8,9,10]

[1,2,4,5,7][3,6,8,9,10]

[1,2,4,5,8][3,6,7,9,10]

[1,2,4,5,9][3,6,7,8,10]

[1,2,4,5,10][3,6,7,8,9]

[1,2,4,6,7][3,5,8,9,10]

[1,2,4,6,8]...

[1,2,4,6,9]

[1,2,4,6,10]

[1,2,4,7,8]

[1,2,4,7,9]

[1,2,4,7,10]

[1,2,4,8,9]

[1,2,4,8,10]

[1,2,4,9,10]

...

你明白了。没有重复和顺序无关紧要。它基本上减半也与数组的顺序无关。只需要一个可以互相对抗的所有团队组合的列表。

编辑：额外的想法......

经过一番思考。我想出了一些想法。而不是写出 [85*84*83*82*81][80*79*78*77*76*75] 可能的字符组合的整个数组，为了引入新的字符，这些组合必须更大英雄，以保持数组的相关性并不断更新。

相反，当从服务器读取时解析信息并从那里构建数组。当找不到一个元素时，只在数组中创建一个元素会简单得多，因为以前从未播放过这些组合。然后解析数据将是 1 遍，并在符合要求的情况下构建您的数组。是的，这可能需要一段时间，但所创造的价值值得等待。它也可以随着时间的推移而完成。从一个小测试用例开始，比如 1000 场比赛，然后计算出比赛的数量。另一个想法是从我们当前的时间点开始，并从那里建立数据库。没有必要根据英雄在那个时间范围内发生的变化量回到曾经玩过的第一场比赛，但是说回去 2-3 个月给它一些数据的基础和可靠性，

解析和构建数组的示例：

```
get match(x)
if length < 15/25, x++; //determine what length matches we want and discredit shorter than 15 for sure.
if players != 10, x++; //skip the match because it didn't finish with 10 players.
if map != normal_mm_map // rule out non mm games, and mid wars
if != mm, rule out custom games
//and so forth

match_psr = match(x).get(average_psr);
match_winner = match(x).get(winner);

//Hero ids of winners
Wh1 = match.(x).get(winner.player1(hero_id)))
Wh2 = match.(x).get(winner.player2(hero_id)))
Wh3 = match.(x).get(winner.player3(hero_id)))
Wh4 = match.(x).get(winner.player4(hero_id)))
Wh5 = match.(x).get(winner.player5(hero_id)))

//hero ids of losers
Lh1 = match.(x).get(loser.player1(hero_id)))
Lh2 = match.(x).get(loser.player2(hero_id)))
Lh3 = match.(x).get(loser.player3(hero_id)))
Lh4 = match.(x).get(loser.player4(hero_id)))
Lh5 = match.(x).get(loser.player5(hero_id)))

//some sort of sorting algorithim to put the Wh1-5 in order of hero id from smallest to largest

//some sort of sorting algorithim to put the Lh1-5 in order of hero id from smallest to largest

if(array([Wh1, Wh2, Wh3, Wh4, Wh5],[Lh1,Lh2,Lh3,Lh4,Lh5],[],[],[],[],[],[],[],[],[]) != null)
array([Wh1, Wh2, Wh3, Wh4, Wh5],[Lh1,Lh2,Lh3,Lh4,Lh5],[],[],[],[],[],[],[],[],[]) +=     array([],[],[1],[][][][](something with psr)[][][[])

else(array.add_element([Wh1, Wh2, Wh3, Wh4, Wh5],[Lh1,Lh2,Lh3,Lh4,Lh5],[1],[][][][](something with psr)[][][[]) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:02:32.263

使用简单的方案对游戏中的每个演员进行编码 0 ... 84
您可以在游戏中维护一个 85*85 演员的 2D 矩阵。
将此数组中的每个条目初始化为零。

现在只使用矩阵的上三角部分。
因此，对于任何两个玩家 P1,P2，您在数组中都有一个唯一的条目，例如 array[small(p1,p2)][big(p1,p2)]。

array(p1,p2) 表示 p1 对 p2 赢了多少。

你的事件循环可以是这样的：

```
For each stat like H=(H1,H2,H3,H4,H5) won against L=(L1,L2,L3,L4,L5) do
    For each tuple in H*L (h,l)  do
         if h<l
           increment array[h][l] by one
         else
           decrement array[l][h] by one 
```

现在，在此循环结束时，您将获得有关玩家信息的汇总信息。下一步是一个有趣的优化问题。
错误的方法：在这个矩阵中选择 5 个字段，使得没有两个字段的行和列相同，并且它们的绝对值之和最大。我认为你可以得到很好的优化算法来解决这个问题。在这里，我们将计算五个元组 (h1,l1), (h2,l2), (h3,l3) ... 其中 h1 对 l1 的胜利最大化，但您仍然没有看到 l1 对 h2 的优势。
更简单和正确的选择是对 (85*84)C5 元组集使用蛮力。

# asp.net - 尝试打开 ASP.net 网站时出现 System.ServiceModel 错误

> ID：11929016
> 
> 赞同：1
> 
> 时间：2012-08-13T06:15:48.123
> 
> 标签：asp.net, wcf, iis

我尝试打开 ASP.Net 网站，但收到此错误。

无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.HttpModule”

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:15:48.123

以下链接非常有帮助，您可以参考： http : [//blogs.msdn.com/b/webtopics/archive/2010/04/28/system-typeloadexception-for-system-servicemodel-activation-httpmodule-in-](http://blogs.msdn.com/b/webtopics/archive/2010/04/28/system-typeloadexception-for-system-) asp-net-4.aspx

```
 http://social.msdn.microsoft.com/Forums/en/wcf/thread/39571e42-aca7-469d-8c68-aa59c2da4fcc 
```

如果在安装 .NET Framework 4 后安装 IIS，或者在安装 IIS 和 .NET Framework 4 后安装 3.0 版本的 WCF Http Activation 模块，则会出现此错误。

要解决此问题，您必须使用 ASP.NET IIS 注册工具 (Aspnet_regiis.exe) 来注册正确版本的 ASP.NET。这可以通过在运行 aspnet_regiis.exe 时使用 –iru 参数来完成，如下所示：

aspnet_regiis.exe -iru

或者

%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

祝你好运

# android - android - sqlite 日期查询

> ID：11929019
> 
> 赞同：4
> 
> 时间：2012-08-13T06:15:52.930
> 
> 标签：android, sqlite

我是新的sqlite。我有一张有 3 列的表

```
1\. Id
2\. FoodName
3\. Date and time

(ex: '1' 'Chicken' '2012-08-10 13:54') 
```

我在某处读到 Android sqlite 不提供日期数据类型。

所以我使用文本数据类型将日期存储在本地数据库中。它工作正常。

现在我想编写一个查询来检索两个日期之间的记录。我试过了，但我没有得到它。

==>> 代码

```
public class FoodDB {

//Database Related Constants
public static final String KEY_ROWID = "id";
public static final String KEY_NAME = "fooditem";
public static final String KEY_TIMESTAMP = "timestamp";   

private static final String DATABASE_NAME = "AJFoodDB";
private static final String DATABASE_TABLE = "AJ_Food";
private static final int DATABASE_VERSION = 1;

Cursor c;
long id;

private static final String DATABASE_CREATE =
    "create table "+DATABASE_TABLE+" (id integer primary key autoincrement, "               
     + KEY_NAME+" text not null,"
     + KEY_TIMESTAMP+" text not null);";

private  final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase sqlitedatabase;

public FoodDB(Context ctext){
    context = ctext;        
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(DATABASE_CREATE);                     
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        db.execSQL("DROP TABLE IF EXISTS titles");
        onCreate(db);
    }
}

//Insert Row
public void insertSSFiltersDetails(String keyname, String timestamp){
    try 
    {
        DBHelper = new DatabaseHelper(context);
        sqlitedatabase = DBHelper.getWritableDatabase();
        insertRow(keyname, timestamp);    
        sqlitedatabase.close();

    } catch (Exception e) {
        System.out.println("Error from inserting data->"+e.toString());
    }
}

public long insertRow(String keyname, String timestamp){
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, keyname);
    initialValues.put(KEY_TIMESTAMP, timestamp);       
    return sqlitedatabase.insert(DATABASE_TABLE, null, initialValues);
}

//Close Data Base
public void closeDBHelper(){
    if(DBHelper != null){
        DBHelper.close();
    }       
    if (c != null) {
        c.close();
        c = null;
    }
}       } 
```

查询和表 select * from AJ_Food;

```
1|rice   |8/12/2011 16:11
2|Rice   |8/13/2012 11:42
3|chicken|8/13/2012 11:42
4|Prawans|8/13/2012 11:43 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:22:23.533

即使您在 sqlite 中使用文本作为日期。您可以编写以下查询来选择两个日期之间的数据。

```
select column from Table where columnDate between '2012-07-01' and '2012-07-07' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:29:34.457

您可以转换`string`为`date`使用`date( )`功能。

```
SELECT * 
FROM AJ_Food
WHERE date(dateTimeColumn) BETWEEN date('startDateHere') AND date('endDateHere') 
```

**[在此处查看更多格式](http://www.sqlite.org/lang_datefunc.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:29:15.113

```
select col from Table where Date < '2011-08-02' and Date >'2012-08-13' 
```

或其他

```
select col from Table where Date between '2011-08-02' and '2012-08-13' 
```

# c++ - 增加可变输入迭代器是否会使旧的迭代器值无效？

> ID：11929020
> 
> 赞同：9
> 
> 时间：2012-08-13T06:15:53.570
> 
> 标签：c++, iterator

> 进一步满足输出迭代器要求的迭代器称为*可变迭代器*。不可变迭代器被称为*常量迭代器*。[24.2.1:4]

这表明您可以有一个可变的输入迭代器，它同时满足输入和输出迭代器的要求。

在增加输入迭代器后，其旧值的副本不需要可取消引用 [24.2.3]。但是，标准对输出迭代器的规定并不相同。事实上，后缀增量的操作语义被给出为`{ X tmp = r; ++r; return tmp; }`，这表明输出迭代器可能不会使旧迭代器值无效（副本）。

那么，增加一个可变输入迭代器可以使旧的迭代器副本失效吗？

如果是这样，您将如何支持类似`X a(r++); *a = t`或`X::reference p(*r++); p = t`使用（例如）代理对象的代码？

如果不是，那么为什么[`boost::iterator`](http://www.boost.org/doc/libs/1_50_0/boost/iterator/iterator_facade.hpp)声称它需要一个代理对象？（链接是代码；向下滚动以阅读关于`struct`s`writable_postfix_increment_proxy`和的评论`postfix_increment_result`）。也就是说，如果您可以返回旧迭代器值的（可取消引用）副本，为什么需要将此副本包装在代理中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:41:45.240

如果在下一节中找到解释，[24.2.5] 前向迭代器，其中说明了它们与输入和输出迭代器的区别：

> 两个可取消引用的迭代器`a`和`b`类型在以下情况下`X`提供*多遍保证*：
> 
> —`a == b`暗示`++a == ++b`和
> —`X`是指针类型或表达式`(void)++X(a), *a`等价于表达式`*a`。
> 
> [注意：`a == b`隐含的要求`++a == ++b`（对于输入和输出迭代器不正确）以及通过可变迭代器（适用于输出迭代器）取消对赋值数量的限制允许使用多遍单具有前向迭代器的定向算法。——尾注]

不幸的是，必须将标准作为一个整体来阅读，并且解释并不总是您期望的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T08:14:05.850

输入和输出迭代器基本上被设计为允许单次遍历：描述每个元素只能访问一次的序列。

流就是一个很好的例子。如果您从标准输入或套接字读取，或写入文件，则只有流的当前位置。当您递增一个迭代器时，所有其他指向相同底层序列的迭代器都将失效。

前向迭代器允许多遍遍历，这是您需要的额外保证：它们确保您可以复制您的迭代器，增加原始迭代器，并且副本*仍将*指向旧位置，因此您可以从那里进行迭代。

# php - 如何从下面的数组中提取值？

> ID：11929022
> 
> 赞同：-5
> 
> 时间：2012-08-13T06:16:00.857
> 
> 标签：php, arrays

我有一个这样的数组。

```
Array (
    [0] => PHP
    [1] => ROR
    [2] => Python
    [3] => JAVA
)

Array (
    [0] => WP
    [1] => Drupal
    [2] => Joomla
    [3] => SpreeCommerce
)

Array (
    [0] => N2CMS
    [1] => Life Ray
    [2] => Magento
    [3] => Zen Cart
) 
```

这里我需要将上面的数组提取到下面的格式，第一个数组用作列部分，其他数组使用列值。

```
PHP = WP
ROR = Drupal
Python = Joomla
JAVA = SpreeCommerce

PHP = N2CMS
ROR = Life Ray
Python = Magento
JAVA = Zen Cart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:20:40.430

试试**[array_combine()](http://www.php.net/manual/fr/function.array-combine.php)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:21:52.667

粗略的代码，假设所有数组都具有相同的长度。

```
$array1=array("PHP","ROR","Python","Java");
    $array2=array("WP","Drupal","Joomla","SpreeCommerce");
    $array3=array("N2CMS","Life Ray","Magento","Zen Cart");

    for($i=0;$i<count($array1);$i++){
     echo $array1[$i]."=".$array2[$i]."<br>";
    }

    for($i=0;$i<count($array1);$i++){
     echo $array1[$i]."=".$array3[$i]."<br>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:22:56.187

我会用这样一个简单的函数来做到这一点：

```
function mergerArray($array1, $array2)
{
    $retArray = array();
    // assumes that both are arrays and of equal length.
    for($i=0; $$i<count($array1); $i++)
    {
        $retArray[$array1[$i]]=$array2[$i];
    }

    return $retArray;
}

$mergedArray=mergerArray($keyMakingArray, $dataHoldingArray);

print_r($mergedArray); 
```

确保在处理之前对输入进行所有检查 - 即相同数量的元素、正确的数据等。我不会为你做这些，这应该是一个好的开始，让你有尽可能多的灵活性。

# sql - SQL 中的单行表：这是一个好的实现吗？

> ID：11929023
> 
> 赞同：1
> 
> 时间：2012-08-13T06:16:02.900
> 
> 标签：sql

我是 SQL 新手。我读了一些关于如何创建单行表并不是一个好的做法，但我不禁发现它在我的情况下很有用。我正在制作一个网络应用程序来平衡组织中员工的工作量。因此，除了跟踪分配给每个员工的工作量以及每项任务（两种主要任务类型）需要多少工作量之外，我还需要跟踪总体工作量。

所以我计划为总工作量制作一个单行表，包含三列。两种任务类型中的每一种，加在一起。第三个是这两个总数的总和。我计划在添加新任务或更改其要求时使用触发器来更新表，以便它反映在总数中。

如果我朝着正确的方向前进，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:23:53.137

它可以工作，但不可扩展，如果明天您需要添加第三个主要任务，那么您将需要更改表并添加另一列（不是那么首选）。因此，您现在可以只使用包含两列任务类型和负载的表，并且您始终可以使用 sql 查询计算总和。

# java - 将数组返回给 main 方法

> ID：11929031
> 
> 赞同：2
> 
> 时间：2012-08-13T06:17:08.610
> 
> 标签：java, arrays, loops, for-loop

我有一个关于将数组从一种方法返回到 main 的问题。它开始让我很恼火，我无法用大脑来解决这个问题。似乎即使我在方法中更改了数组，当我在 main 中显示它时，它也会显示旧数组。我正在尝试删除数组中的重复数字，我知道它可以工作，因为我已经在调试器中单步执行了它，但是在我返回它并返回主目录后，它再次显示整个数组！我知道我在这里想念的东西一定很容易。有人可以指出我正确的方向吗？这是我的代码...

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    int[] numbers = new int[10];

    System.out.print("Enter 10 numbers: ");

    for (int x = 0; x < numbers.length; ++x)
        numbers[x] = input.nextInt();

    eliminateDuplicates(numbers);

    for (int y = 0; y < numbers.length; ++y)
        System.out.print(numbers[y] + " ");
}

public static int[] eliminateDuplicates(int[] numbers) {
    int[] temp = new int[numbers.length];
    int size = 0;
    boolean found = false;

    for (int x = 0; x < numbers.length; ++x) {

        for (int y = 0; y < temp.length && !found; ++y) {
            if (numbers[x] == temp[y])
                found = true;
        }
        if (!found) {
            temp[size] = numbers[x];
            size++;
        }
    found = false;
    }   

    int[] result = new int[size];
    for (int z = 0; z < result.length; ++z)
        result[z] = temp[z];

    return result;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:19:48.407

看看这个调用：

```
 eliminateDuplicates(numbers); 
```

您忽略了返回值。也许你想要：

```
 numbers = eliminateDuplicates(numbers); 
```

有时我希望 Java 有一种方法可以指示方法的返回值不应该被忽略。它也将节省很多问题`InputStream.read`......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T06:19:21.477

它应该是：`numbers = eliminateDuplicates(numbers);`

您基本上忽略了该方法返回的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T06:19:58.410

这样做：

```
int[] result =eliminateDuplicates(numbers);
for (int y = 0; y < result.length; ++y)
    System.out.print(numbers[y] + " "); 
```

另外，在您的`eliminateDuplicates()`方法中，`result`通过删除数组直接使用`temp`数组。或者重命名`temp`并`result`返回它。以下代码是不必要的：

```
int[] result = new int[size];
    for (int z = 0; z < result.length; ++z)
        result[z] = temp[z]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T06:29:32.273

在 Java 中，[参数是按值传递的](https://stackoverflow.com/questions/1068760/can-i-pass-parameters-by-reference-in-java)，因此不能`numbers`用作输入/输出参数。

例如，如果你是 C#，你可以做到

```
 eliminateDuplicates(ref numbers); 
```

但正如其他人指出的那样，最明显的问题是您忘记分配结果:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T06:20:06.550

在你的主要，试试这个：

```
numbers = eliminateDuplicates(numbers); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T06:20:24.090

方法调用应该是这样的 -

```
numbers = eliminateDuplicates(numbers); 
```

您没有捕捉到通过消除功能返回的结果。

# html - 位置：在 Firefox 中绝对

> ID：11929033
> 
> 赞同：1
> 
> 时间：2012-08-13T06:17:16.377
> 
> 标签：html, css, firefox

我正在尝试将一个简单的 2 列页面放在一起，左侧是文本，右侧是各种徽标和东西。在右栏的最底部，我需要放置一些文本。一个简单的`position: absolute; width: 250px; bottom: 0;`似乎就是我所需要的。这是我想出的代码，也托管[在这里](http://dl.dropbox.com/u/42948076/test.html "这里")：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body{
    margin: 0px;
    background-color: #eee;
}#content{
    background: white;
    width: 900px;
    text-align: left;
    font-family: Arial, Helvetica, sans-serif;
}#text{
    padding-left: 8px;
    padding-right: 8px;
}.left{
    width: 634px;
    border-right: 2px solid black;
}.right{
    width: 250px;
    text-align: center;
    position: relative;
}.bottom{
    position: absolute;
    width: 250px;
    bottom: 0;
}
</style>
</head>
<body>
    <center>
        <div id="content">
            <div id="body">
                <table border=0>
                    <tr valign="top">
                        <td id="text" class="left">
                            Some text
                        </td><td class="right">
                            <center class="bottom">
                                Bottom
                            </center>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </center>
</body>
</html> 
```

该解决方案适用于除 Firefox 之外的所有浏览器。Firefox 几乎将元素视为设置为`position:fixed`，将其锁定在屏幕底部，而不是元素底部（通常不在屏幕底部）。我似乎找不到其他人有这个问题，这意味着我做错了什么。我已经搞砸了几个小时，但结果一直没有改变。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:40:17.570

如果我理解正确 - Firefox 与规范几乎同步。[您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/position)查看有关它的详细信息

现在回答“为什么”的问题（其他人已经回答了如何:)。据我了解，该规范没有说明（重新）计算页面滚动上的位置。这几乎是依赖于 IMO 的实现。如果绝对定位元素不存在相对定位的父元素，则它相对于可显示的视口/窗口进行定位。因此，如果您打开 Firebug，您会发现该元素位于`bottom:0`Firebug 窗口的顶部。如果滚动它的值似乎不会被重新计算。

当您开始相对于窗口进行定位时，事情确实变得有趣并且您应该知道影响（您可能偶然发现其中之一:) 最好将它包装在像@Rohit 建议的父 div 或使用像 @thenewguy 提到的浮动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:32:41.190

你让这变得比它需要的更困难。该答案基于您的描述，但我相信它应该适合您。另外，我将根据内部的百分比来执行此操作，因为我不相信使用像素（与移动设备打交道使我远离了那个）。它是这样的：

```
body {
margin: 0 auto;
background-color: #eee;
}
#content {
background: white;
width: 900px;
text-align: left;
font-family: Arial, Helvetica, sans-serif;
}
#left{
width: 72%;
border-right: 2px solid black;
overflow: hidden;
}
#right{
width: 25%;
text-align: center;
float: right;
overflow: hidden;
}
#bottom{
float: right;
width: 25%;
} 
```

您应该将上面的代码放入样式表文件并调用它，而不是仅仅将代码放在网页上，但这只是语义。这是此样式表的 HTML 代码：

```
<html>
    <head>
    ... (do whatever you need to here, including the stylesheet call)
    </head>
    <body>
        <div id="content">
            <div id="left">
            ...(place your stuff that goes on the left here)
            </div>
            <div id="right">
            ...(place your stuff that goes on the right here)
            </div>
            <div id="bottom">
            ...(place your stuff that goes on the bottom right here)
            </div>
        </div>
    </body>
</html> 
```

那应该给你基本的布局。现在，请记住，如果左侧 div 与右侧 div 的高度不同，那么您在两个部分之间创建的垂直线将不会一直向下。让我知道这是如何工作的，我会看看我能做些什么来进一步帮助你。

**仅供参考，我倾向于远离使用表格进行样式设置。一旦您的网页变得相当复杂，它们往往会变得难以处理。Divs 和其他元素往往效果更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:23:55.970

使用两个`div`s 进行定位。像这样

**[现场演示](http://tinkerbin.com/A4t1wgic)**

**代码是**

```
 <!DOCTYPE html>
<html>
<head>
<style type="text/css">
body{
    margin: 0px;
    background-color: #eee;
}#content{
    background: white;
    width: 900px;
    text-align: left;
    font-family: Arial, Helvetica, sans-serif;
}#text{
    padding-left: 8px;
    padding-right: 8px;
}.left{
    width: 634px;
    border-right: 2px solid black;
}.right{
    width: 250px;
    text-align: center;
  height:150px;
  background:red;
    position: relative;
}.bottom{
    position: absolute;
    width: 250px;
    bottom: 0;
  background:green;
}
</style>
</head>
<body>
    <center>
        <div id="content">
            <div id="body">
                <table border=0>
                    <tr valign="top">
                        <td id="text" class="left">
                            Some text
                        </td><td>
<div class="right">
                      <center class="bottom">
                                Bottom
                            </center>
                      </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </center>
</body>
</html> 
```

# iphone - RestKit 对象映射在一个项目中失败，但在 Twitter 示例中没有

> ID：11929039
> 
> 赞同：0
> 
> 时间：2012-08-13T06:17:55.940
> 
> 标签：iphone, objective-c, rest, restkit

学习 RESTKit。

第 1 步：我已成功运行 Twitter 示例项目。

第 2 步：我已成功修改 Twitter 项目以指向我自己的 REST Web 服务... REST 能够成功解释结果，并将它们映射到我构建的自定义对象。

第 3 步：我创建了自己的项目空间，并将第 2 步中的工作代码复制粘贴到该项目中，并进行了一些小的编辑，但奇怪的是，RESTKit 无法正确映射结果。在这一点上我快疯了。

打开 RESTKit 中包含的方便的调试跟踪，两个项目都到了这里：

```
2012-08-12 21:06:14.145 RKTwitter[9087:13003] D restkit.object_mapping:RKObjectMapper.m:320 Performing object mapping sourceObject 
```

但是 Step2 Project 将其作为下一条消息：

```
2012-08-12 21:06:14.294 RKTwitter[9087:13003] T restkit.object_mapping:RKObjectMapper.m:278 Examining keyPath '' for mappable content...
2012-08-12 21:06:14.301 RKTwitter[9087:13003] D restkit.object_mapping:RKObjectMapper.m:261 Found mappable collection at keyPath ''... 
```

而我的 Step3 项目放弃并死亡：

```
2012-08-12 21:10:40.912 DogPark[9127:13203] D restkit.object_mapping:RKObjectMapper.m:351 The following operations are in the queue: () 
```

卷起袖子，我已经确定了 RESTKit 中代码执行差异的确切点：

在`RKObjectMappingProvider.m`中，第 160 行是以下方法：

```
- (id)valueForContext:(RKObjectMappingProviderContext)context {
    NSNumber *contextNumber = [NSNumber numberWithInteger:context];
    return [mappingContexts objectForKey:contextNumber];  
} 
```

其中 Step2 返回一个包含 1 个元素的字典，而我的 Step3 项目返回一个包含 0 个元素的字典。该字典用于`RKObjectMapper.m`第 332 行，其中 foundMappable 对于 Step2 项目为 true，对于我的 Step3 为 false。

```
if ([mappingsForContext isKindOfClass:[NSDictionary class]]) {
        results = [self performKeyPathMappingUsingMappingDictionary:mappingsForContext];
        foundMappable = (results != nil); 
```

这是看起来正确但似乎不想正常运行的代码：

```
// init the Object Manager
RKURL *baseURL = [RKURL URLWithBaseURLString:SERVER_ADDRESS];
RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager.client.baseURL = baseURL;

// Mapping
RKObjectMapping *ownerMapping = [RKObjectMapping mappingForClass: [DogOwner class]];
[ownerMapping mapKeyPath:@"DogOwnerId" toAttribute:@"dogOwnerID"];
[ownerMapping mapKeyPath:@"DogName" toAttribute:@"dogName"];
[ownerMapping mapKeyPath:@"OwnerFirstName" toAttribute:@"ownerFirstName"];
[[RKObjectManager sharedManager].mappingProvider setObjectMapping:ownerMapping forResourcePathPattern:@"/DogOwner"];

[[RKObjectManager sharedManager] loadObjectsAtResourcePath: @"/dogowner" delegate:self]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:08:45.397

感谢您对您的问题的非常滑稽的叙述。

一个错误是指定映射`/Dogowner`并尝试加载`/dogowner`. 您上面的评论还带来了另外两个巨大的问题

1.  xml 和 json 不可互换
2.  您的源密钥路径错误。

# installation - 在 cent os 6.3 上安装 xen

> ID：11929053
> 
> 赞同：0
> 
> 时间：2012-08-13T06:19:01.017
> 
> 标签：installation, centos, xen

我按照教程[http://www.howtoforge.com/virtualization-with-xen-on-centos-6.2-x86_64-paravirtualization-and-hardware-virtualization](http://www.howtoforge.com/virtualization-with-xen-on-centos-6.2-x86_64-paravirtualization-and-hardware-virtualization)

在 Centos 6.3 上安装 xen 一切都很完美，但是在编辑 /boot/grub/menu.lst 之后

```
Quote:
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE: You have a /boot partition. This means that
# all kernel and initrd paths are relative to /boot/, eg.
# root (hd0,0)
# kernel /vmlinuz-version ro root=/dev/mapper/vg_xen-LogVol01
# initrd /initrd-[generic-]version.img
#boot=/dev/sdb
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title CentOS (2.6.32.57-2.el6xen.x86_64)
root (hd0,0)
kernel /xen.gz dom0_mem=1024M cpufreq=xen dom0_max_vcpus=1 dom0_vcpus_pin
kernel /vmlinuz-2.6.32.57-2.el6xen.x86_64 ro root=/dev/mapper/vg_xen-LogVol01 rd_NO_LUKS LANG=en_US.UTF-8 rd_LVM_LV=vg_xen/LogVol01 rd_LVM_LV=vg_xen/lv_swap rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=128M KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet
initrd /initramfs-2.6.32.57-2.el6xen.x86_64.img

title CentOS (2.6.32-279.el6.x86_64)
root (hd0,0)
kernel /vmlinuz-2.6.32-279.el6.x86_64 ro root=/dev/mapper/vg_xen-LogVol01 rd_NO_LUKS LANG=en_US.UTF-8 rd_LVM_LV=vg_xen/LogVol01 rd_LVM_LV=vg_xen/lv_swap rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=128M KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet
initrd /initramfs-2.6.32-279.el6.x86_64.img 
```

当我重新启动时，它是用 xen 内核启动的，但是当我运行命令时

```
xm info or xm list 
```

显示错误

```
" Error: Unable to connect to xend: No such file or diectory. Is xend running "
when i run command

xend start 
```

显示错误

```
" xc: error: Could not obtain handle on privileged command interface (2 = No such file or directory): Internal error
xend/image.py: Error connecting to hypervisor "

ls /proc/xen

" ls: cannot access /proc/xen: No such file or directory "
added entry in /etc/fstab

Quote:
none /proc/xen xenfs default 0 0 
```

重启后给出错误没有这样的文件或目录，

```
lsmod | grep -i xen output: Nothing...

modprob xen-evtchn

FATAL: Error inserting xen_evtchn (/lib/modules/2.6.32.57-2.el6xen.x86_64/kernel/drivers/xen/xen-evtchn.ko): No such device

modprob xen-gntdev

FATAL: Error inserting xen_gntdev (/lib/modules/2.6.32.57-2.el6xen.x86_64/kernel/drivers/xen/xen-gntdev.ko): No such device 
```

我在bios中启用了硬件虚拟化仍然没有解决问题。

我尝试了另一个教程[https://www.crc.id.au/xen-on-rhel6-scientific-linux-6-centos-6-howto/](https://www.crc.id.au/xen-on-rhel6-scientific-linux-6-centos-6-howto/)

似乎没有什么对我有用...

伙计们...请分享您对这个问题的想法...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:41:05.603

这是诀窍！

检查 grub 中的引导条目。我刚刚用 kernel-xen-3.5.3-1 将我的 Centos 6.3 升级到 3.7.1-3，这个内核的新引导条目出错了，因为在更新之间我安装了一个标准内核来测试其他东西。

修复 xen 的正确引导选项让我的虚拟化恢复了！

```
title CentOS (3.7.1-3.el6xen.x86_64)
        root (hd0,0)
        kernel /xen.gz dom0_mem=1024M cpufreq=xen dom0_max_vcpus=4 dom0_vcpus_pin
        module /vmlinuz-3.7.1-3.el6xen.x86_64 ro root=UUID=<longUUID> KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16 crashkernel=auto rhgb quiet
        module /initramfs-3.7.1-3.el6xen.x86_64.img 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:42:01.760

我在启动 Xen dom0 内核时也遇到了这个问题。

与说明相比，我可能在您的 grub.conf 中发现了一个小遗漏。在这一行的 grub 配置部分：“用模块替换第一个单词 initrd。”

例如，这是我的工作 Xen Dom0 grub.conf。

祝你好运！

```
default=0
timeout=2
title CentOS 6.3 Xen dom0
  root (hd0,0)
  kernel /boot/xen.gz loglvl=all guest_loglvl=all
  module /boot/vmlinuz-dom0-kernel ro root=/dev/sda1 nomodeset console=ttyS0,115200 iommu=off earlyprintk=xen initcall_debug debug loglevel=10
  module /boot/initrd-dom0-kernel.img
title CentOS 6.3 (No Xen)
  root (hd0,0)
  kernel /boot/vmlinuz-dom0-kernel ro root=/dev/sda1
  initrd /boot/initrd-dom0-kernel.img
title Stock CentOS 6.3
  root (hd0,0)
  kernel /boot/vmlinuz-centos6.3 ro root=/dev/sda1
  initrd /boot/initrd-centos6.3.img 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T04:05:22.677

我遇到过同样的问题：

> 无法在特权命令接口上获取句柄（2 = 没有这样的文件或目录）：内部错误

这已通过在 /etc/fstab 中添加以下行来解决

```
none /proc/xen xenfs defaults 0 0 
```

[有关详细信息，请参阅Xen 项目邮件列表](http://old-list-archives.xenproject.org/archives/html/xen-users/2010-03/msg00510.html)中的这篇文章。

# arrays - 将数组保存到数据库 cakephp

> ID：11929070
> 
> 赞同：2
> 
> 时间：2012-08-13T06:20:21.407
> 
> 标签：arrays, database, cakephp

我有一个表单，在同一个表中有多个条目，我遇到的问题是它只将最后一个条目发送到数据库，而不发送其余条目。我已经使用了调试，它只打印出表单中的最后一个字段。

随着它的每次迭代，`field`它意味着输入到`fields_invoices`表中`invoice_id, field_id, entered_value`

这是我的表格

```
<?php echo $this->Form->create('FieldsInvoice'); ?>
    <?php foreach ($fields as $field): ?>
    <?php echo $this->Form->hidden('FieldsInvoice.id'); ?>
    <?php echo $this->Form->hidden('FieldsInvoice.field_id', array('default' =>$field['Field']['id'])); ?>
    <?php echo $this->Form->input('FieldsInvoice.invoice_id', array('default' =>$invoice_id, 'type'=>'hidden')); ?>
    <?php echo $this->Form->Input('FieldsInvoice.entered_value',  array('label'=>$field['Field']['name'], 'default' =>$field['Field']['default_value'])); ?>
    <?php endforeach ;?>
    <?php echo $this->Form->End('Submit');?> 
```

这是相关的控制器

```
 public function create($id)
    {   
    $this->set('title_for_layout', 'Create Invoice');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');   
    $this->layout='home_layout';

     if (!is_numeric($id)) throw new BadMethodCallException('I need an ID');
     $this->Invoice->id = $id;
     if (!$this->Invoice->exists()) throw new NotFoundException('Invalid ID');

    $this->set('invoice_id',$id);

    $names = $this->Invoice->find('list',array(
    'fields'=>array('template_id'),
    'conditions'=>array('id'=>$id)));

    $fields = $this->Field->find('all', array(
      'conditions'=>array(
     'template_id'=>$names)));

    $this->set(compact('fields'));
    $this->set(compact('invoice_id'));

    $this->set('name',$names);
    $this->Invoice->create();
    if(empty($this->data)){
        $this->data= $this->Field->read($id);
    } 
    else{
        if($this->request->is('post'))
        {
            //die(debug($this->data));

            $this->Invoice->create();
            if($this->FieldsInvoice->save($this->request->data, array('deep'=>true)));
            {
            $this->Session->setFlash('The field has been updated');
            $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

            }
            //else{
            $this->Session->setFlash('Could not be saved');
            //}
        }
    }
}

\app\Controller\InvoicesController.php (line 134)
array(
    'FieldsInvoice' => array(
        (int) 0 => array(
            'id' => '',
            'field_id' => '0',
            'invoice_id' => '97',
            'entered_value' => '1'
        ),
        (int) 1 => array(
            'id' => '',
            'field_id' => '99',
            'invoice_id' => '97',
            'entered_value' => '2'
        ),
        (int) 2 => array(
            'id' => '',
            'field_id' => '999',
            'invoice_id' => '97',
            'entered_value' => '3'
        ),
        (int) 3 => array(
            'id' => '',
            'field_id' => '9999',
            'invoice_id' => '97',
            'entered_value' => '4'
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:50:13.490

要发布多个字段，请使用：

```
foreach ($fields as $idx => $field):
    echo $this->Form->hidden('FieldsInvoice.'.$idx.'.id');   
    echo $this->Form->hidden('FieldsInvoice.'.$idx.'.field_id', ...);
    ... 
```

然后使用`$this->FieldsInvoice->saveMany()`（而不是`->save()`）保存多条记录。

# python - OpenERP：将字段值（金额）保存到帐户中

> ID：11929073
> 
> 赞同：1
> 
> 时间：2012-08-13T06:20:34.553
> 
> 标签：python, openerp, accounting

我是 OpenERP 和 python 的新手，我需要一些帮助来将金额存入特定帐户。我在发票表单中创建了一个字段，该字段根据某些代码计算特定金额并在该字段中显示该金额。我想要做的是将一个帐户与此字段相关联，因此当发票被验证和/或支付时，此金额将保存到一个帐户中，稍后我可以在日记帐分录和/或会计科目表中看到它。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:43:41.623

您应该覆盖发票的写入方法。看看其他插件如何做到这一点（你可以找到很多例子使用

```
grep -r "def write" * 
```

在插件的文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:31:52.123

您可以重写“pay_and_reconcile”函数写入帐户字段，该函数在付款时调用。

action_date_assign()

action_move_create()

action_number()

这 3 个函数在验证发票时被调用。您可以覆盖其中的任何一个，也可以添加自己的函数。在“开放”活动的工作流程中。

# android - 在 Android 的一个小布局中调整 imageView 和 textView

> ID：11929078
> 
> 赞同：0
> 
> 时间：2012-08-13T06:20:59.293
> 
> 标签：android, android-layout, android-xml

我有一个很小的线性布局，我必须在其中放置一个 imageView 和一个 textView。我知道这是制作应用程序的一种糟糕的方式。我只是想测试一下这是否可行。下面的代码只显示 imageview 而不是 textView。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="90dp"
        android:layout_height="90dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:src="@drawable/my_icon" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:51:05.783

答案最终是给 textView 的权重为 0，给 imageView 的权重为 1。这样，textView 完美地显示出来，但只占用了所需的空间，而 imageView 占用了其余的空间。完美1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:29:05.597

这取决于您希望它看起来像什么。如果您希望将 LinearLayout 分成两半，那么在您的 ImageView 集中

```
android:layout_weight="1" 
```

LinearLayout 内的视图与它们成比例地获得空间，`layout_weight`因此如果您的 ImageView 拥有`layout_weight="0"`它将获得 0 比例的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:42:07.790

你应该使用这样的重量：

线性布局中的 android:layout_weight="2"

和 imageView 和 textView 中的 layout_weight="1"

这样你的两个视图都会占据一半的空间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:17:28.147

请试试这个

```
<TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="TextView" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:src="@drawable/my_icon" /> 
```

# java - jscrollpane 无法在 Swing 应用程序中处理 jtable

> ID：11929081
> 
> 赞同：0
> 
> 时间：2012-08-13T06:21:22.650
> 
> 标签：java, swing, jtable, jscrollpane

我正在使用swing应用程序，`jTable`现在`jScrollpane`我的问题是我在一个滚动窗格中添加了多个表格，并且滚动在其他表格区域上正常工作，但是当光标在表格区域上时它不起作用。

两个表格之间的空间滚动工作正常，但在表格区域它不起作用。有人对我的问题有任何想法吗？所以请尽快给我答案...提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:51:31.070

*有很多复杂的代码，所以我没有在这里展示*......嗯，一个在滚动窗格中包含多个表格的面板。复杂的部分在哪里。请参阅下面的 SSCCE，它正是这样做的。

```
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.WindowConstants;
import javax.swing.table.DefaultTableModel;
import java.awt.BorderLayout;
import java.awt.EventQueue;

public class TableTest {
  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame( "Test" );

        JPanel contentPane = new JPanel( new BorderLayout(  ) );
        JPanel tablePanel = new JPanel(  );
        tablePanel.setLayout( new BoxLayout( tablePanel, BoxLayout.PAGE_AXIS ) );
        addTableToPanel( tablePanel );
        addTableToPanel( tablePanel );
        JScrollPane scrollPane = new JScrollPane( tablePanel );
        contentPane.add( scrollPane );
        testFrame.setContentPane( contentPane );

        testFrame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
        testFrame.pack();
        testFrame.setVisible( true );
      }
    } );
  }

  private static void addTableToPanel( JPanel aTablePanel ) {
    JTable table = createTable();
    aTablePanel.add( table.getTableHeader() );
    aTablePanel.add( table );
  }

  private static JTable createTable(){
    return new JTable( new DefaultTableModel( new Object[][]{new Object[]{"Data1-1", "Data1-2"}, new Object[]{"Data2-1", "Data2-2"}},
                                                      new Object[]{"Column1", "Column2"}) );
  }
} 
```

请注意，当光标在表格上方时，滚动没有问题。因此，我们需要更多信息，然后在您的问题中提供。

可能，如果您创建一个可以重现您的问题的 SSCCE（或调整这个），您会发现有问题的代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:07:51.763

我在一个面板中添加了多个表格而不使用滚动窗格，然后将面板添加到滚动窗格中。这样我的问题就解决了。

您需要添加的滚动窗格，因为没有添加高级组件（滚动窗格），标题不会添加到表中。

您可以使用 under give 格式添加标题而不使用滚动窗格

```
//initializes the table
 JTable table=new JTable(rowData, columnNames);
//add table header to any component(panel)
component.add(table.getTableHeader());
//add table to any component(panel)
component.add(tableRelatedProducts); 
```

# iphone - 首次加载时 AVAudio Player 延迟

> ID：11929084
> 
> 赞同：1
> 
> 时间：2012-08-13T06:21:31.053
> 
> 标签：iphone, xcode4

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"hit-pipe" ofType:@"wav"];
audioPlayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:path] error:nil];
[self.audioPlayer setDelegate:self];
[self.audioPlayer prepareToPlay];
[self.audioPlayer play]; 
```

第一次加载声音需要时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:26:40.000

加载需要时间，因为它正在加载文件。播放 AVAudioPlayer 时总会有一点通常不明显的延迟，而加载文件时会出现更多延迟。延迟多少取决于文件的大小和文件格式。如果有问题，请尝试更早地分配和加载您的 AVAudioPlayer 或使用较小的声音文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:01:33.220

您可以在应用程序加载时加载代码（例如在 init 或 viewDidLoad 中）。然后在需要播放时调用 audioplayer play。我正在为我的应用程序执行此操作，但没有发现任何延迟。当我调用它时，它会立即播放。

# matrix - CUDA 中是否有任何内置类型的矩阵用于矩阵和矩阵向量运算？

> ID：11929089
> 
> 赞同：3
> 
> 时间：2012-08-13T06:21:57.740
> 
> 标签：matrix, cuda, built-in

我想实现一些矩阵向量数学。有向量类型，如：`float2`, `int2`，但我在 CUDA 中找不到任何内置类型矩阵。

是否有适合此类操作的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:38:35.200

寻找矩阵数据类型的库是对的。我建议看看[ArrayFire](http://accelereyes.com/arrayfire)。

这是包含受支持类型列表 [的快速参考页面。](http://www.accelereyes.com/arrayfire/c/page_quickref.htm)[以下是](http://www.accelereyes.com/arrayfire/c/modules.htm)您可以使用 is 运行的函数，它们分为数据分析、线性代数、图像和信号处理、稀疏矩阵等类别，以及用于数据索引、排序、归约、可视化和更快的一组常用算法for 循环。

其他库包括 CULA 或 MAGMA（专注于线性代数）、Thrust（针对 1D 运算）和许多小众学术库。

免责声明：我自己在 ArrayFire 上工作。

# jquery - jQuery UI 自动完成过滤数据

> ID：11929092
> 
> 赞同：0
> 
> 时间：2012-08-13T06:22:35.447
> 
> 标签：jquery, jquery-ui-autocomplete

我是 jquery 的新手，一旦选择了项目，我就被分配过滤掉列表。有 3 个文本框使用自动完成功能。

来源：苹果、橙子、芒果

文本框 1 = 苹果 文本框 2 = 苹果应该在列表中被过滤掉。它应该只显示橙色和芒果。

我能够过滤源，但列表仍然显示该项目。但是一旦我刷新页面，源就会更新。我发现了这个问题，这是[一个链接](https://stackoverflow.com/questions/4699307/jquery-ui-autocomplete-refresh-data)，但就我而言，我不想添加，而是想将其过滤掉。

任何帮助表示赞赏。

谢谢！泽尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:21:46.510

我会做什么...将第一个文本框的值传递回服务器（反之亦然，每次自动完成）

你可以试试这样的。

**jQuery**

```
$('#auto2_id').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: 'some_url/SomeAction',
                    dataType: "json",
                    data: {
                        term: request.term,
                        filter: $('#auto1_id').val()
                    },
                    success: function (data) {
                        //do something
                    }
                })
            }
        }); 
```

**服务器端** （不确定您使用的是什么语言。但在 c# 中（粗略的代码示例））

```
public ActionResult SomeAction(string term, string filter)
{
  var data = _repo.GetAllCached().Where(o => o.Text != filter && o.Text.Contains(term));
  return Json(data , JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:07:49.180

在每个文本框更改事件上，您必须从列表中删除该项目并调用该函数（从插件中）。您一定是同时调用了所有三个函数。

# python - 处理 IncompleteRead,URLError

> ID：11929095
> 
> 赞同：8
> 
> 时间：2012-08-13T06:22:56.477
> 
> 标签：python, error-handling, urllib2, httplib

这是一段网络挖掘脚本。

```
def printer(q,missing):
    while 1:
        tmpurl=q.get()
        try:
            image=urllib2.urlopen(tmpurl).read()
        except httplib.HTTPException:
            missing.put(tmpurl)
            continue
        wf=open(tmpurl[-35:]+".jpg","wb")
        wf.write(image)
        wf.close() 
```

`q`是一个`Queue()`由 Urls 和 `missing 组成的空队列，用于收集错误引发的 url

它由 10 个线程并行运行。

每次我运行这个，我都会得到这个。

```
 File "C:\Python27\lib\socket.py", line 351, in read
    data = self._sock.recv(rbufsize)
  File "C:\Python27\lib\httplib.py", line 541, in read
    return self._read_chunked(amt)
  File "C:\Python27\lib\httplib.py", line 592, in _read_chunked
    value.append(self._safe_read(amt))
  File "C:\Python27\lib\httplib.py", line 649, in _safe_read
    raise IncompleteRead(''.join(s), amt)
IncompleteRead: IncompleteRead(5274 bytes read, 2918 more expected) 
```

但我确实使用`except`...我尝试了其他类似的东西

```
httplib.IncompleteRead
urllib2.URLError 
```

甚至，

```
image=urllib2.urlopen(tmpurl,timeout=999999).read() 
```

但这些都不起作用..

我怎样才能抓住`IncompleteRead`and `URLError`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T20:34:28.513

我认为这个问题的正确答案取决于您认为什么是“引发错误的 URL”。

# 捕获多个异常的方法

如果您认为任何引发异常的 URL 都应该添加到`missing`队列中，那么您可以执行以下操作：

```
try:
    image=urllib2.urlopen(tmpurl).read()
except (httplib.HTTPException, httplib.IncompleteRead, urllib2.URLError):
    missing.put(tmpurl)
    continue 
```

这将捕获这三个异常中的任何一个并将该 url 添加到`missing`队列中。更简单地说，你可以这样做：

```
try:
    image=urllib2.urlopen(tmpurl).read()
except:
    missing.put(tmpurl)
    continue 
```

捕获*任何*异常，但这不被视为 Pythonic，并且可能隐藏代码中的其他可能错误。

如果“引发错误的 URL”是指任何引发`httplib.HTTPException`错误的 URL，但如果收到其他错误，您仍希望继续处理，那么您可以执行以下操作：

```
try:
    image=urllib2.urlopen(tmpurl).read()
except httplib.HTTPException:
    missing.put(tmpurl)
    continue
except (httplib.IncompleteRead, urllib2.URLError):
    continue 
```

这只会在`missing`引发 an`httplib.HTTPException`时将 URL 添加到队列中，否则会捕获`httplib.IncompleteRead`并`urllib.URLError`防止脚本崩溃。

# 遍历队列

顺便说一句，`while 1`循环总是让我有点担心。您应该能够使用以下模式遍历队列内容，尽管您可以继续按照自己的方式进行操作：

```
for tmpurl in iter(q, "STOP"):
    # rest of your code goes here
    pass 
```

# 安全地处理文件

另外，除非绝对有必要这样做，否则您应该使用[上下文管理器](https://www.python.org/dev/peps/pep-0343/)来打开和修改文件。因此，您的三个文件操作行将变为：

```
with open(tmpurl[-35:]+".jpg","wb") as wf:
    wf.write() 
```

上下文管理器负责关闭文件，即使在写入文件时发生异常也会这样做。

# java - java中为零时的负号

> ID：11929096
> 
> 赞同：26
> 
> 时间：2012-08-13T06:22:57.157
> 
> 标签：java

当结果返回零时，有什么方法可以截断负号；在使用十进制格式时？

```
DecimalFormat df = new DecimalFormat("#,##0.0");
df.setRoundingMode(RoundingMode.HALF_UP);
formattedValue = df.format("-0.023"); 
```

上面的代码返回 -0.0 。有什么方法可以只返回 0.0？但是，当结果为负数时，我想保留负号。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T07:12:07.227

我不认为有一种方法可以做到这一点`DecimalFormat`，但这个单线解决了这个问题：

```
formattedValue = formattedValue.replaceAll( "^-(?=0(\\.0*)?$)", ""); 
```

如果减号后面跟着 0-n 个字符，它会删除（替换为`""`）减号`"0.00000..."`，因此这适用于任何类似的结果，例如`"-0"`,`"-0."`或`"-0.000000000"`

下面是一些测试代码：

```
public static void main(String[] args) {
    System.out.println(format(-0.023));
    System.out.println(format(12.123));
    System.out.println(format(-12.345));
    System.out.println(format(-0.123));
    System.out.println(format(-1.777));
}

public static String format(double number) {
    DecimalFormat df = new DecimalFormat("#,##0.0");
    df.setRoundingMode(RoundingMode.HALF_UP);
    String formattedValue = df.format(number);
    formattedValue = formattedValue.replaceAll("^-(?=0(\\.0*)?$)", "");
    return formattedValue;
} 
```

输出（如预期）：

```
0.0
12.1
-12.3
-0.1
-1.8 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T06:43:50.263

我认为这将是一种避免的解决方法`-0.0`。使用以下代码：

```
DecimalFormat df = new DecimalFormat("#,##0.0");
df.setRoundingMode(RoundingMode.HALF_UP);       
df.setNegativePrefix(""); // set negative prefix BLANK
String formattedValue = df.format(-0.023);
df.setNegativePrefix("-"); // set back to - again
System.out.println(formattedValue); 
```

输出 ：

```
0.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T06:31:46.510

试试这个：`DecimalFormat df = new DecimalFormat("#,##0.0#;(#,##0.0#)");`

根据[DecimalFormat 的Javadoc](http://download.java.net/jdk7/archive/b123/docs/api/java/text/DecimalFormat.html)：

> DecimalFormat 模式包含正负子模式，例如“#,##0.00;(#,##0.00)”。每个子模式都有一个前缀、数字部分和后缀。否定子模式是可选的；如果不存在，则以局部减号（在大多数语言环境中为“-”）为前缀的正子模式用作负子模式。也就是说，单独的“0.00”等同于“0.00;-0.00”。如果有明确的否定子模式，它仅用于指定否定前缀和后缀；位数，最小位数和其他特征都与正模式相同。这意味着 "#,##0.0#;(#)" 产生与 "#,##0.0#;(#,##0.0#)" 完全相同的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T06:36:09.773

通过检查计算值是否=“-0.0”使其等于“0.0”

您可以将代码 sush 封装为

```
public String getFormattedValue(String input) {
        DecimalFormat df = new DecimalFormat("#,##0.0");
        df.setRoundingMode(RoundingMode.HALF_UP);
        String formattedValue = df.format(input);

        if (formattedValue.equalsIgnoreCase("-0.0")) {
            formattedValue = "0.0";
        }

        System.out.println(formattedValue);
        return formattedValue;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-27T12:32:04.190

我发现它`-0`非常有用，因为它告诉您四舍五入的值实际上是负数（这对某些函数可能有很多意义）。对我来说唯一的问题是它`-1 * 0`实际上是 0 并且应该被格式化，`0`尽管它不是 Java 格式化程序。

以下格式化程序负责处理此问题，而无需昂贵的字符串操作成本（尤其是 RegExps）：

```
public static String formatWithoutMinusZeroIssue(double d, DecimalFormat yourFormatter) {
    if (d == 0) {
        return yourFormatter.format(0);
    } else {
        return yourFormatter.format(d);
    }
} 
```

这使用了这样一个事实，即尽管`-1 * 0`和`0`的格式不同，但它们是相等的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-17T13:44:06.760

更快并且可以任意精度工作（还支持忽略例如货币的后缀，将 0 用于无后缀）：

```
public static String normalizeNegativeZero(final String str, final int skipSuffixLength) {
    if (str.length() > 3 && str.charAt(0) == '-' && str.charAt(1) == '0'
            && (str.charAt(2) == '.' || str.charAt(2) == ',')) {
        for (int i = 3; i < str.length() - skipSuffixLength; i++) {
            if (str.charAt(i) != '0') {
                return str;
            }
        }
        return StringUtils.removeStart(str, "-");
    } else {
        return str;
    }
} 
```

这里的测试用例：

```
Assertions.assertThat(normalizeNegativeZero("-0.00000", 0)).isEqualTo("0.00000");
Assertions.assertThat(ScaledDecimalToStringBuilder.normalizeNegativeZero("-0.00001", 0)).isEqualTo("-0.00001");

Assertions.assertThat(normalizeNegativeZero("-0.00000EUR", "EUR".length())).isEqualTo("0.00000EUR");
Assertions.assertThat(normalizeNegativeZero("-0.00001EUR", "EUR".length())).isEqualTo("-0.00001EUR"); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-07-01T14:22:43.883

Bohemian 的Kotlin 版本[的回答](http://the%20https://stackoverflow.com/a/11929642/421467)：

```
fun Double.formatAmount(): String {
    val ds = DecimalFormatSymbols()
    ds.decimalSeparator = '.'
    ds.groupingSeparator = ','
    val df = DecimalFormat("#,##0.##", ds)
    df.roundingMode = RoundingMode.DOWN
    var formattedDouble = df.format(this)
    formattedDouble = formattedDouble.replace("^-(?=0(\\\\.0*)?\$)".toRegex(), "")
    return formattedDouble
} 
```

# python - 具有不同列数的 Python sqlite3 数据库？

> ID：11929098
> 
> 赞同：0
> 
> 时间：2012-08-13T06:23:09.993
> 
> 标签：python, dictionary, sqlite

当使用 pythons sqlite3 模块时，如果我要创建一个表并且第一行有 4 列，那么下一行必须有 4 列还是我可以有更多/更少？

我正在寻找创建词汇单词的数据库。每个词可能有不同数量的定义。

例如，“set”的定义要比“panacea”多得多。

我会用一个刮板来处理这个词汇数据库，它可以很容易地从字典参考网站上查找单词和定义。

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys
import sqlite3

def dictionary(word):
    br = mechanize.Browser()
    response = br.open('http://www.dictionary.reference.com')
    br.select_form(nr=0)
    br.form['q'] = word 
    br.submit()
    definition = BeautifulSoup(br.response().read())
    trans = definition.findAll('td',{'class':'td3n2'})
    fin = [i.text for i in trans]
    query = {}
    for i in fin: 
        query[fin.index(i)] = i

    ## The code above is given a word to look up and creates a 'dict' of its definiton from the site.

    connection = sqlite3.connect('vocab.db')
    with connection:
        spot = connection.cursor()

        ## This is where my uncertainty is.  I'm not sure if I should iterate over the dict values and 'INSERT' for each definition or if there is a way to put them in all at once? 

        spot.execute("CREATE TABLE Words(Name TEXT, Definition TEXT)")
        spot.execute("INSERT INTO Words VALUES(word, Definition (for each number of definitions))")

    return query

print dictionary(sys.argv[1]) 
```

这不是作业，而是学习 sqlite3 的个人练习。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T06:30:08.323

您的设计违背了关系数据库的精神（[维基百科](http://en.wikipedia.org/wiki/Relational_database#Relations_or_Tables)将关系定义为“一组具有**相同属性**的元组”），其中 sqlite 就是其中之一。

这里适当的设计是一个单词表和一个定义表，通过外键链接。如果您的单词除了其内容之外没有其他属性，您可以跳过单词表并仅使用定义表中的键。

但是请注意，每个定义只有一行，而不是每个单词一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T06:26:48.680

> 如果我要创建一个表并且第一行有 4 列，那么下一行必须有 4 列还是我可以有更多/更少？

您不能在 SQLite 中创建行具有不同数量的单元格的表。不过，您*可以*放入`Null`一行的单元格中。

Perpahs 你需要一个`1-to-n`关系：每个单词可以有很多定义。

**编辑：**

用两张表看一下这张图，`Word`然后`Definiton`：

```
 +------------+
+-------+       | Definition |
| Word  |       +------------+
+-------+       | id PK      |
| id PK |-1---*-| word_id FK |
| text  |       | text       |
+-------+       +------------+ 
```

在这两个表中，都是表`PK`的*主键*。`FK`标记*外键*，即引用*不同*表的 PK 的列。在此图中，FK `word_id`in`Definiton`引用 的 PK `id`。`Word`这种关系由`-1---*-`两行之间的连接来表示。

# javascript - HTML5 Canvas drawImage 比例错误 iOS

> ID：11929099
> 
> 赞同：55
> 
> 时间：2012-08-13T06:23:16.983
> 
> 标签：javascript, ios, html, canvas

我想使用 HTML5 Canvas 调整从客户端的 iOS 相机拍摄的图像的大小，但我一直在这个奇怪的错误中运行，如果图像大于 ~1.5mb，则图像的比例错误

它适用于桌面，但不适用于带有媒体上传 API 的最新 iOS 版本。

你可以在这里看到一个例子：http: [//jsbin.com/ekuros/1](http://jsbin.com/ekuros/1)

知道如何解决这个问题吗？这是内存问题吗？

```
$('#file').on('change', function (e) {
    var file = e.currentTarget.files[0];
    var reader = new FileReader();
    reader.onload = function (e) {
        var image = $('<img/>');
        image.on('load', function () {
            var square = 320;
            var canvas = document.createElement('canvas');

            canvas.width = square;
            canvas.height = square;

            var context = canvas.getContext('2d');
            context.clearRect(0, 0, square, square);
            var imageWidth;
            var imageHeight;
            var offsetX = 0;
            var offsetY = 0;

            if (this.width > this.height) {
                imageWidth = Math.round(square * this.width / this.height);
                imageHeight = square;
                offsetX = - Math.round((imageWidth - square) / 2);
            } else {
                imageHeight = Math.round(square * this.height / this.width);
                imageWidth = square;    
                offsetY = - Math.round((imageHeight - square) / 2);            
            }

            context.drawImage(this, offsetX, offsetY, imageWidth, imageHeight);
            var data = canvas.toDataURL('image/jpeg');

            var thumb = $('<img/>');
            thumb.attr('src', data);
            $('body').append(thumb);
        });
        image.attr('src', e.target.result);
    };
    reader.readAsDataURL(file);
}); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-06-13T11:49:18.200

如果您仍然需要使用 drawImage 函数的长版本，您可以更改：

```
context.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh); 
```

对此：

```
drawImageIOSFix(context, img, sx, sy, sw, sh, dx, dy, dw, dh); 
```

您只需要在某处包含这两个函数：

```
/**
 * Detecting vertical squash in loaded image.
 * Fixes a bug which squash image vertically while drawing into canvas for some images.
 * This is a bug in iOS6 devices. This function from https://github.com/stomita/ios-imagefile-megapixel
 * 
 */
function detectVerticalSquash(img) {
    var iw = img.naturalWidth, ih = img.naturalHeight;
    var canvas = document.createElement('canvas');
    canvas.width = 1;
    canvas.height = ih;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);
    var data = ctx.getImageData(0, 0, 1, ih).data;
    // search image edge pixel position in case it is squashed vertically.
    var sy = 0;
    var ey = ih;
    var py = ih;
    while (py > sy) {
        var alpha = data[(py - 1) * 4 + 3];
        if (alpha === 0) {
            ey = py;
        } else {
            sy = py;
        }
        py = (ey + sy) >> 1;
    }
    var ratio = (py / ih);
    return (ratio===0)?1:ratio;
}

/**
 * A replacement for context.drawImage
 * (args are for source and destination).
 */
function drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {
    var vertSquashRatio = detectVerticalSquash(img);
 // Works only if whole image is displayed:
 // ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);
 // The following works correct also when only a part of the image is displayed:
    ctx.drawImage(img, sx * vertSquashRatio, sy * vertSquashRatio, 
                       sw * vertSquashRatio, sh * vertSquashRatio, 
                       dx, dy, dw, dh );
} 
```

无论是在 iOS 还是其他平台上运行，这都可以正常工作。

这是基于[stomita](https://github.com/stomita/ios-imagefile-megapixel)的出色工作，您应该将他的工作归功于他。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-10T09:46:07.213

有一个 JavaScript 画布调整大小库，可以解决在 iOS 设备上的画布上绘制缩放图像时遇到的二次采样和垂直挤压问题：http: [//github.com/stomita/ios-imagefile-megapixel](http://github.com/stomita/ios-imagefile-megapixel)

使用 alpha 通道缩放图像时（因为它使用 alpha 通道进行问题检测）以及尝试调整现有画布元素的大小时存在副作用，但这是我发现的第一个实际解决手头问题的解决方案。

stomita 也是 StackOverflow 用户，并在此处发布了他的解决方案： [https ://stackoverflow.com/a/12615436/644048](https://stackoverflow.com/a/12615436/644048)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T17:45:35.063

看起来这是一个 iOS 6 错误。方面没有理由脱离您的代码。我有同样的问题，它只在 iOS 6 中引入。似乎他们的子采样例程给出了错误的高度。我向 Apple 提交了错误报告，您也应该这样做。他们为此获得的错误报告越多越好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T09:13:55.260

我遇到过同样的问题。似乎这是 iOS 的限制，超过 2 兆像素的 jpg 被二次采样。

请参阅[为 iPhone 上的 Safari 创建兼容的 Web 内容](http://developer.apple.com/library/ios/DOCUMENTATION/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-10-21T03:12:39.107

上述代码的修改版本。

[编辑：在http://jsfiddle.net/gWY2a/24/](http://jsfiddle.net/gWY2a/24/)看到 L0LN1NJ4 的代码.. 猜猜那个好一点...

```
function drawImageIOSFix (ctx, img) {
 var vertSquashRatio = detectVerticalSquash (img)
 var arg_count = arguments.length
 switch (arg_count) {
  case 4  : ctx.drawImage (img, arguments[2], arguments[3] / vertSquashRatio); break
  case 6  : ctx.drawImage (img, arguments[2], arguments[3], arguments[4], arguments[5] / vertSquashRatio); break
  case 8  : ctx.drawImage (img, arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7] / vertSquashRatio); break
  case 10 : ctx.drawImage (img, arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7], arguments[8], arguments[9] / vertSquashRatio); break
 }

 // Detects vertical squash in loaded image.
 // Fixes a bug which squash image vertically while drawing into canvas for some images.
 // This is a bug in iOS6 (and IOS7) devices. This function from https://github.com/stomita/ios-imagefile-megapixel
 function detectVerticalSquash (img) {
  var iw = img.naturalWidth, ih = img.naturalHeight
  var canvas = document.createElement ("canvas")
  canvas.width  = 1
  canvas.height = ih
  var ctx = canvas.getContext('2d')
  ctx.drawImage (img, 0, 0)
  var data = ctx.getImageData(0, 0, 1, ih).data
  // search image edge pixel position in case it is squashed vertically.
  var sy = 0, ey = ih, py = ih
  while (py > sy) {
   var alpha = data[(py - 1) * 4 + 3]
   if (alpha === 0) {ey = py} else {sy = py}
   py = (ey + sy) >> 1
  }
  var ratio = (py / ih)
  return (ratio === 0) ? 1 : ratio
 }
} 
```

# python - 为什么这个导入序列会产生错误？

> ID：11929101
> 
> 赞同：3
> 
> 时间：2012-08-13T06:23:21.007
> 
> 标签：python, importerror

我有三个文件，导入语句按以下方式完成：

主文件

```
from file1 import *
from file2 import *
def someFunc():
    print("hi") 
```

文件1.py

```
from main import someFunc as sayHi
class A:
    def __init__(self):
        pass
sayHi() 
```

文件2.py

```
from file1 import *
a = A() 
```

一旦写入 file1.py 中的导入行，我就会收到此错误：`ImportError: cannot import name someFunc`. 使用另一个编译器，我得到`NameError: Name 'A' is not defined`. 为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:29:17.063

当你运行时`main.py`，它会执行它的第一行，即 import `file1.py`。这导致`file1.py`运行。它尝试从 导入，但请记住，到目前为止`main.py`，只有第一行已经运行 -尚未定义。因此，该导入失败。`main.py``someFunc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:30:07.327

您需要将 file1 和 file2 导入移动到文件的底部才能使其正常工作，但最好避免循环导入。

```
def someFunc():
    print("hi")
from file1 import *
from file2 import * 
```

文件1.py

```
class A:
    def __init__(self):
        pass
from main import someFunc as sayHi
sayHi() 
```

文件2.py

```
from file1 import *
a = A() 
```

# java - 如何使用javascript将键值对传递给dwr

> ID：11929103
> 
> 赞同：1
> 
> 时间：2012-08-13T06:23:25.913
> 
> 标签：java, javascript, json

我有一段代码，例如，

```
var jObj = {"key1" : "value1",
            "key2" : "value2"}; 
```

我想要做的是，我想像这样将它作为 DWR 调用的参数传递，

```
dwrClass.dwrMethod(jObj); 
```

可能吗？

# c# - 让 ServiceStack 示例工作

> ID：11929105
> 
> 赞同：1
> 
> 时间：2012-08-13T06:23:51.093
> 
> 标签：c#, .net, sqlite, servicestack

我是 ServiceStack 的新手。我正在测试 MovieREST 示例。当我运行该项目时，即时窗口向我显示此错误

`"A first chance exception of type 'System.DllNotFoundException' occurred in Mono.Data.Sqlite.DLL"`

并且没有加载电影列表。因此，只有一个带有一些默认输入的空白​​“添加新电影”页面，每次我点击添加新电影时，都会抛出 DllNotFoundException。

我是否需要安装任何依赖项目才能使其工作？我正在使用 VS2010、IIS 和 Vista 32 位运行它（是的..我知道..）。刚刚还盲目安装了Mono和sqlite 32bit，我什至不确定项目是否需要它们运行。从代码中，我可以看到它指的是“App_Data/db.sqlite”，并且引用已经有了 sqlite3.dll，我用我下载的 32 位替换了 dll，但仍然没有运气。

请给我一些关于我缺少什么的提示？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:53:49.577

这`Mono.Data.Sqlite.DLL`只是一个托管包装器，需要找到非托管`sqlite3.dll`的包装器才能运行（这是保存 Sqlite 本身的本机二进制文件的东西）。

它会在`/bin`目录中查找它，以便在您构建时将其部署到那里，您需要复制`sqlite3.dll`到项目根目录`/`并将**构建操作**设置为**内容**并将复制操作更改为`Copy if newer`.

理想情况下，您希望`sqlite3.dll`为您的体系结构使用正确的（[ServiceStack.OrmLite.Sqlite.Mono](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite.Mono) NuGet 包包含 32 位/64 位 dll），尽管 IIS/.NET 可以使用 32 位非托管 dll，但[需要在此处解释一些调整](https://stackoverflow.com/questions/4657087/system-badimageformatexception-on-running-serivcestack-examples)。

## 使用混合模式程序集

虽然`Mono.Data.Sqlite.DLL`允许您在 Mono 上运行相同的 .NET 应用程序，但如果您只想在 Windows 中运行 Sqlite，您还可以使用在 .NET dll 中嵌入了非托管本机 sqlite 库的混合模式程序集。NuGet 上有 2 个不同的版本：

*   [ServiceStack.OrmLite.Sqlite32](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite32)
*   [ServiceStack.OrmLite.Sqlite64](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite64)

删除对现有 OrmLite 或 Sqlite dll 的任何引用，因为这两个 NuGet 包都包含所需的所有 Sqlite + OrmLite dll。

# ffmpeg - 我在 ubuntu 11.04 中只有两个 ffmpeg x264 的预设

> ID：11929109
> 
> 赞同：3
> 
> 时间：2012-08-13T06:24:24.370
> 
> 标签：ffmpeg, natty, preset

我正在尝试按照本指南为 ubuntu 11.04 安装（编译）ffmpeg：

[https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

总的来说它有效。除了由于编号导致的 checkinstall 一些错误，我用这个解决了：

[http://judsonsnotes.com/notes/index.php?option=com_content&view=section&layout=blog&id=3&Itemid=54&limitstart=40](http://judsonsnotes.com/notes/index.php?option=com_content&view=section&layout=blog&id=3&Itemid=54&limitstart=40)

我会说它安装好了。

但是当尝试使用 -vpre lossless_slow 对一些视频进行编码时，我得到了这个错误：

```
File for preset lossless_slow not found. 
```

而事实上它并不存在。我只有这个：

```
/usr/local/share/ffmpeg:
libvpx-1080p50_60.ffpreset
libvpx-1080p.ffpreset
libvpx-360p.ffpreset
libvpx-720p50_60.ffpreset
libvpx-720p.ffpreset
libx264-ipod320.ffpreset
libx264-ipod640.ffpreset 
```

所有其他预设在哪里？在谷歌通常人们比我有更多的预设。我做错了什么 ？

从这篇文章我会说他们会在那里：[http ://git.videolan.org/?p=ffmpeg.git;a=commit;h=4b82e3cedcfc9871671bb613cd979de6995dcb4e](http://git.videolan.org/?p=ffmpeg.git;a=commit;h=4b82e3cedcfc9871671bb613cd979de6995dcb4e)

非常感谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T18:37:15.093

FFmpeg 现在访问 x264 内部预设，而不是使用文本文件来模拟它们。这更易于维护和使用。现在您必须使用该`-preset`选项而不是`-vpre`. 当前预设是：超快、超快、非常快、更快、快、中、慢、慢、非常慢、安慰剂。忽略安慰剂，因为它是一个笑话和浪费时间。

CRF 示例：

```
ffmpeg -i input -c:v libx264 -preset slow -crf 22 -c:a copy output.mkv 
```

两遍示例：

```
ffmpeg -i input -c:v libx264 -preset fast -b:v 555k -pass 1 -an -f mp4 - && \
ffmpeg -i input -c:v libx264 -preset fast -b:v 555k -pass 2 -c:a libfaac -b:a 128k output.mp4 
```

这些示例来自 ffmpeg.org 上的[x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)社区 wiki 页面。

# javascript - 淘汰赛选项对象绑定

> ID：11929111
> 
> 赞同：0
> 
> 时间：2012-08-13T06:24:52.193
> 
> 标签：javascript, knockout.js

我正在努力将 Knockout.js 选项绑定到对象。我正在尝试为用户创建一个允许他们添加项目、编辑其属性然后保存/取消以传播这些更改的工作流。我以前用 jquery 完成过这种类型的任务。但是，我想避免 jquery 需要的复杂堆栈调用。（如果可能的话）。

我创建了一个示例：http: [//jsfiddle.net/nAE2f/](http://jsfiddle.net/nAE2f/)

示例中的工作原理：

添加按钮，创建一个新对象。保存按钮会将其保存到数组中。选择对话框将更新一个新选项。

不幸的是，这就是我的进步停止的地方。创建选择选项时，它不反映基础对象名称。对象之间的切换也不会像我期望的那样改变表单属性。

我尝试将 optionValue 分配给 id，但在这种情况下，不会在保存时创建 Select Options。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:57:05.713

将成员名称绑定到项目的方式存在问题。在您的情况下，保存的项目始终具有空名称，这就是选择也显示空文本的原因。我通过在 ViewModel 中创建 selectedMember 属性来处理选定的成员并将成员名称分配给保存时的项目来解决此问题。例如检查[小提琴](http://jsfiddle.net/SrNSK/)

# c# - 如何在运行时动态更改 LINQ to SQL 连接字符串并存储在项目设置中？

> ID：11929113
> 
> 赞同：0
> 
> 时间：2012-08-13T06:25:09.237
> 
> 标签：c#, vb.net, linq, linq-to-sql, configuration

我想创建一个自定义配置屏幕，以便我可以在运行时修改 LINQ 数据库连接。除了更改需要我重新启动软件的 app.config 之外，我是否可以在运行时更改 LINQ 数据库连接字符串？并将其存储在项目的设置中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:30:12.490

这是我在项目中使用的代码。它是静态的，因此可以在任何地方调用。将 MyEntities 和 MyModel 更改为项目的适当名称。

```
 public static MyEntities NewContext()
    {
        var y = new System.Data.EntityClient.EntityConnectionStringBuilder();
        y.Provider = "System.Data.SqlClient";
        string conn = CodeToGetConnectionStringHere();
        if(!conn.EndsWith(";")) conn += ";";
        conn += "MultipleActiveResultSets=true";
        y.ProviderConnectionString = conn;
        y.Metadata = "res://*/MyModel.csdl|res://*/MyModel.ssdl|res://*/MyModel.msl";
        return new MyEntities(y.ConnectionString);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:55:15.500

您可以安全地将连接字符串存储在项目设置中；[并使用EntityConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/bb336613%28v=vs.90%29)类构建它。

```
class ConnectionStringFactory
{
    internal stati string BuildModelConnectionString(string connectionString)
    {
        var builder = new EntityConnectionStringBuilder
        {
            Provider = "System.Data.SqlClient",
            Metadata = @"your metadata string",
            ProviderConnectionString = connectionString
        };
        return builder.ConnectionString;
    }
} 
```

然后，您可以在代码中使用上面的方法，如下所示：

```
var connectionString = ConnectionStringFactory.BuildModelConnectionString(Settings.ConnectionString);
using(var dataContext = new DataContext(connectionString))
{
    // your logic here...
} 
```

# ruby-on-rails - Rails3 中的嵌套模型

> ID：11929115
> 
> 赞同：0
> 
> 时间：2012-08-13T06:25:44.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, actioncontroller

我有两个模型用户和个人资料。
我想将用户名和密码保存在配置文件中的用户和其他用户配置文件详细信息中。
现在，
用户模型具有：

```
has_one :profile
accepts_nested_attributes_for :profile
attr_accessible :email, :password 
```

轮廓模型有

```
 belongs_to :user
 attr_accessible :bio, :birthday, :color 
```

用户控制器有

```
 def new
    @user = User.new
    @profile = @user.build_profile
  end

  def create
    @user = User.new(params[:user])
    @profile = @user.create_profile(params[:profile])
    if @user.save
      redirect_to root_url, :notice => "user created successfully!"
    else
      render "new"
    end
  end 
```

视图 new.html.erb 包含用户和配置文件的字段。
但是，当我运行此 Web 应用程序时，它显示错误：

*无法批量分配受保护的属性：调试时的配置文件*在创建操作中

卡在**@user = User.new(params[:user])**

那么，出了什么问题？我也尝试将 :profile_attributes 放在 attr_accessible 中，但它没有帮助！
请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:53:18.867

首先，正如@nash 所建议的那样，您应该`@profile = @user.create_profile(params[:profile])`从您的`create`操作中删除。`accepts_nested_attributes_for`将自动为您创建个人资料。

检查您的视图是否为嵌套属性正确设置。不应该看到任何东西`params[:profile]`。配置文件属性需要通过`params[:user][:profile_attributes]`嵌套模型才能正常工作。

总之，您的`create`操作应如下所示：

```
def create
  @user = User.new(params[:user])

  if @user.save
    redirect_to root_url, :notice => "user created successfully!"
  else
    render "new"
  end
end 
```

您的表单视图（通常`_form.html.erb`）应如下所示：

```
<%= form_for @user do |f| %>

  Email: <%= f.text_field :email %>
  Password: <%= f.password_field :password %>

  <%= f.fields_for :profile do |profile_fields| %>

    Bio: <%= profile_fields.text_field :bio %>
    Birthday: <%= profile_fields.date_select :birthday %>
    Color: <%= profile_fields.text_field :color %>

  <% end %>

  <%= f.submit "Save" %>

<% end %> 
```

有关更多信息，[请参阅 Ryan Daigle 的这个古老但很棒的教程](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)。

# php - MySQL对字符串进行编码并添加问号

> ID：11929116
> 
> 赞同：1
> 
> 时间：2012-08-13T06:25:51.810
> 
> 标签：php, mysql, character-encoding

我在这里有一个非常奇怪的行为。

我从 PDF 复制表格，表格粘贴在 Excel 电子表格中。然后将 .xls 文件另存为 .csv。最后，通过 PHP 将 .csv 文件上传到 MySQL。有些文本在开头有一个隐藏的问号。比如这个：`NEE13`。我看不到任何异常，但只是为了测试我用 phpMyAdmin 做了一个插入。MySQL抱怨说：

```
Warning: #1366 Incorrect string value: '\xEF\xBB\xBFNEE...' for column 'rid' at row 1. 
```

数据库中的结果值为：`?NEE13`

任何帮助纠正这个问题表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:40:07.863

您的文件以“EF BB BF”开头。它们被称为 utf8 魔术字节，或 BOM（字节顺序标记）。

MySQL 无法将这些字节解析为正确的 utf8 符号并将它们替换为“？” 标记。

只需在插入之前删除这些字节，或使用 blob/varbinary 字段来存储您的文件。

# android - 从扩展 ListView 的类传递 Intent

> ID：11929118
> 
> 赞同：0
> 
> 时间：2012-08-13T06:26:09.663
> 
> 标签：android, android-intent, android-listview

这是我的类，它是列表视图中的人口项目，一切顺利，单击列表项时执行 onItemClick 方法，但是当我从那里传递意图时，它没有传递意图，请帮助我。

```
public class VideosListView extends ListView implements android.widget.AdapterView.OnItemClickListener {

private List<Video> videos;
private VideoClickListener videoClickListener;
MainActivity ma;
private Context mcontext;

public VideosListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VideosListView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public VideosListView(Context context) {
    super(context);
    mcontext=context;
}

public void setVideos(List<Video> videos){
    this.videos = videos;
    VideosAdapter adapter = new VideosAdapter(getContext(), videos);
    setAdapter(adapter);
    // When the videos are set we also set an item click listener to the list
    // this will callback to our custom list whenever an item it pressed
    // it will tell us what position in the list is pressed
    setOnItemClickListener(this);
}

// Calling this method sets a listener to the list
// Whatever class is passed in will be notified when the list is pressed
// (The class that is passed in just has to 'implement VideoClickListener'
// meaning is has the methods available we want to call)
public void setOnVideoClickListener(VideoClickListener l) {
    videoClickListener = l;

}

@Override
public void setAdapter(ListAdapter adapter) 
{
    super.setAdapter(adapter);
}

// When we receive a notification that a list item was pressed
// we check to see if a video listener has been set
// if it has we can then tell the listener 'hey a video has just been clicked' also passing the video
@Override
public void onItemClick(AdapterView<?> adapter, View v, int position, long id) 
{
    Intent intent = new Intent(mcontext,AnVideoView.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
    mcontext.startActivity(intent); 

    Log.i("VideoListView", "I am Clicked");
    if(videoClickListener != null)
    {
        videoClickListener.onVideoClicked(videos.get(position));
        Log.d("My Position ","position is" + position);
    } 
```

这是我的来自 onItemClick() 的类，我想传递给一个活动类，如何做到这一点thanx 帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:30:15.940

试试这个......它会帮助你。

```
Activity activity;

    public VideosListView(Activity activity) {
        super(context);
        this.activity=activity;
    }

    @Override
    public void onItemClick(AdapterView<?> adapter, View v, int position, long id) 
    {
        Intent intent = new Intent(activity,AnVideoView.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
        activity.startActivity(intent); 

        Log.i("VideoListView", "I am Clicked");
        if(videoClickListener != null)
        {
            videoClickListener.onVideoClicked(videos.get(position));
            Log.d("My Position ","position is" + position);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:03:44.083

在 onItemClick((AdapterView adapter, View v, int position, long id) 我已经为扩展 BaseAdapter 的类创建了一个构造函数，然后从那里我们可以轻松地传递我们的意图......它对我有用，无论如何谢谢帮助我很多人

我们可以在构造函数中传递位置，并对选定的项目做任何我们想做的事情。

# java - 在 Java 中使用 RegSvr32 注册 DLL - 如何隐藏警报出现

> ID：11929126
> 
> 赞同：3
> 
> 时间：2012-08-13T06:27:02.320
> 
> 标签：java, dll, regsvr32

我在 RegSvr32 注册 dll 时遇到问题。在应用程序启动之前，一切都在 Java 下以编程方式完成。我的问题是：

是否有任何解决方案可以禁用显示 DLL 注册结果的警报？这是一个带有“确定”按钮的提示。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:33:44.750

在命令提示符下运行`regsvr32 /?`会显示（与大多数命令一样）可用的选项 - 好吧，在这种情况下，它会显示错误，但也会说明可用的选项。

![在此处输入图像描述](../Images/a46cfddf299494ff394f653bf678a282.png)

看起来`/s`很合算。

# mysql - 对此优化的查询是什么？

> ID：11929131
> 
> 赞同：0
> 
> 时间：2012-08-13T06:27:37.537
> 
> 标签：mysql

我陷入了小查询。有一个名为 Table_Activities 的表。

**Table_Activity** ( `Act_id`, `Dat`e, `Activity_name`, `description`)。

我们需要从中生成一份报告。用户将从下拉列表中选择他想要生成报告的**月份**和**年份。**

我们需要按活动名称显示该月份和年份组的所有活动。

示例 - 用户选择**June**和**2012**。

报告将——

**园艺**

```
01/06/2012 - They have planted 100 trees.
14/06/2012 - something
27/06/2012 - something 
```

**训练**

```
02/06/2012 - Detail description
15/06/2012 - something
28/06/2012 - something 
```

我的问题是以这种格式获取数据的 mysql 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:34:34.933

要按 Activity_name 获取特定月份和年份组的数据，请尝试以下操作：

```
SELECT Activity_name
,GROUP_CONCAT(DATE_FORMAT(Date,"%d/%m/%Y")) as `Date`
,GROUP_CONCAT(Description) as `Description`
FROM Table_Activities 
WHERE MONTH(Date) = MONTH('2012-06-01')
AND YEAR(Date) = YEAR('2012-06-01')
GROUP BY Activity_name 
```

**输出**

```
ACTIVITY_NAME 日期说明
-------------------------------------------------- ---------------------------------
园艺 01/06/2012,27/06/2012 他们种了 100 棵树。,描述3
培训 12/06/2012,28/06/2012 描述2,描述4

```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!2/b0609/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:51:05.203

```
select `Date`,description from tm_activities 
where month(`Date`)='6' and year(`Date`)='2012' 
order by Activity_name,`date` 
```

要返回问题中指示的确切格式，请尝试以下操作：

```
select concat(if(actdate='',activity_name,date_format(actdate,'%d/%m/%y')),if(description<>'',concat(' - ',description),'')) as labelm from
(
(select ActDate,description,activity_name from tm_activities where month(ActDate)='6' and year(ActDate)='2012' 
) 
union all
(Select distinct '','',activity_name from tm_activities where month(ActDate)='6' and year(ActDate)='2012')
)m order by activity_name,actdate
; 
```

[SQL 小提琴在这里。](http://www.sqlfiddle.com/#!2/ee853/1)

输出如下：

```
Gardening
01/06/12 - They have planted 100 trees.
27/06/12 - Gar 2
Training
12/06/12 - Training 1
28/06/12 - Traning 2
30/06/12 - Traning 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:36:28.447

```
Select 
    DATE_FORMAT('date_column',"%D/%M/%Y") as `Date`,
    other_column  
from Table_Activities 
where Month(Date) = Month('2012-06-01')
AND Year(Date) = Year('2012-06-01') 
```

# jquery - jQuery.ready() 如何处理对自身的调用？

> ID：11929134
> 
> 赞同：5
> 
> 时间：2012-08-13T06:28:00.377
> 
> 标签：jquery

举个例子：

```
$( function(){
    //do stuff
    $( function(){
        //do other stuff
    });
}); 
```

当然，用代码写出来这似乎没有意义。但是一个与 HTML 元素一起工作的插件可能会使用 .ready()，而它自己是在主脚本的 .ready() 中的一个元素上执行的。jQuery 如何准确地处理这个问题？它显然有效，但它有什么特别之处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:31:11.363

> 如果在 DOM 初始化后调用 .ready() ，传入的新处理程序将立即执行。

这意味着当执行第一个函数时，将立即执行内部函数

此外，jQuery 允许您将多个函数绑定到单个事件，它会调用它们（假设没有人产生错误）

您可以通过在已加载的页面上执行来测试行为：

```
jQuery(document).ready(function(){
        for(i=0;i<1000000;i++);
        console.log('2');
    });
console.log('1'); 
```

# html - 在 index.html 中输入密码时如何显示星号

> ID：11929138
> 
> 赞同：1
> 
> 时间：2012-08-13T06:28:10.950
> 
> 标签：html, passwords

使用该代码：

```
<!-- THIS IS WHERE IT ALL STARTS  -->

<!DOCTYPE html>
<html>
<head><title>Bank application</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>

<body>
<table class="title">
  <tr><th>Web Bank application</th></tr>
</table>

<br/>
<fieldset>
  <legend>Login Page - please enter your Username and Password</legend>
  <form action="loginPage"> 
    Username: <input type="text" name="username"><br>
    Password : <input type="text" name="password"><br>
    <input type="submit" value="Login">
  </form>
</fieldset>

<br/>
<br/>
<br/>
<br/>
<br/><br/><br/><br/><br/><br/>
</body></html> 
```

用户输入他的用户名和密码 ![在此处输入图像描述](../Images/00f8b280607e0fa67dab20d4103ac204.png)

当我输入密码时，如何在屏幕上显示星号`(*)`，例如`myPassword`，我想显示而不是显示`**********`，并保持字符串的实际字符完整`myPassword`？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T06:29:23.240

`<input type="password" name="password">`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T06:30:10.820

将其更改为

```
<input type="PASSWORD" name="password"> 
```

* * *

**规格**

*   [使用 INPUT 创建的控件类型](http://www.w3.org/TR/html401/interact/forms.html#h-17.4.1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T06:49:43.100

使用密码时，请使用输入 type="password" 而不是文本。格式是相同的，它只会告诉浏览器您希望您的用户在其中输入密码或其他敏感数据，这些数据应该隐藏在疲倦的眼睛之外。所以浏览器不会显示输入的字符（或只是简单地），而是显示星号。

```
Username: <input type="text" name="username"><br>
Password : <input type="password" name="password"><br> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-18T00:49:52.750

对，@eric-yin 有正确答案：An `input`with`type="password"`掩码密码。

尽管如此，就像@beefchimi 一样，我需要：**一个密码字段，它可以：**

1.  在每个浏览器中显示星号
2.  显示不带星号的最后一个字符

[![更好的密码字段 jQuery 插件示例](../Images/5b0f219b53181b7b16511e103c4ad753.png)](https://i.stack.imgur.com/R1eYl.png)

所以我写了这个 jQuery 插件：

```
$.fn.betta_pw_fld = function(pwfld_sel, hiddenfld_sel) {

  // this is the form the plugin is called on
  $(this).each(function() {

    // the plugin accepts the css selector of the pw field (pwfld_sel)
    var pwfld = $(this).find(pwfld_sel);

    // on keyup, do the masking visually while filling a field for actual use
    pwfld.off('keyup.betta_pw_fld');
    pwfld.on('keyup.betta_pw_fld', function() {

      // if they haven't typed anything...just stop working
      var pchars = $(this).val();
      if (pchars == '') return;

      // we'll need the hidden characters too (for backspace and form submission)
      var hiddenfld = $(this).parents('form').find(hiddenfld_sel);
      var hchars = hiddenfld.val();

      // use these placeholders to build our password values
      // this one will have all asterisks except the last char
      var newval = '';

      // this one will have the actual pw in it, but we'll hide it
      var newhpw = '';

      // in this block, we're in a "keydown" event...
      // let's get the characters entered
      // loop over them and build newval and newhpw appropriately
      for (i=0; i<pchars.length - 1; i++) {
        if (pchars[i] == '*') {
          newhpw += hchars[i];
        } else {
          newhpw += pchars[i];
        }
        newval += '*';
      }

      // we want to see the last character...
      var lastchar = pchars[pchars.length - 1];
      if (lastchar == '*') {
        newval += hchars[pchars.length - 1];
        newhpw += hchars[pchars.length - 1];
      } else {
        newval += pchars[pchars.length - 1];
        newhpw += pchars[pchars.length - 1];
      }

      // set the updated (masked), visual pw field
      $(this).val(newval);

      // keep the pw hidden and ready for form submission in a hidden input
      hiddenfld.val(newhpw);
    });
  });
}; 
```

html 可能是：

```
<form id="myForm">
  <label for="pw">Type password:</label><br>
  <input name="pw" class="stylishPassword" type="text"><br>
  <input class="hiddenPassword" type="hidden">
</form> 
```

并且在`document.ready`或适当的时间，插件被实例化如下：

```
$('#myForm').betta_pw_fld('.stylishPassword', '.hiddenPassword') 
```

访问[更好的密码字段 jQuery 插件 Codepen](https://codepen.io/jayjohnston/pen/WNNqJGK)，*如果对您有帮助，请记得投票。*

# ruby - 上传图片到数据库

> ID：11929145
> 
> 赞同：4
> 
> 时间：2012-08-13T06:28:59.213
> 
> 标签：ruby, ruby-on-rails-3, postgresql, ruby-on-rails-3.1

我想将上传的图像保存`bytea`在我的 PostgreSQL 数据库的列中。我正在寻找有关如何将 Rails 中的图像保存到`bytea`列中的建议，最好带有示例。

我使用带有“pg”驱动程序的 Rails 3.1 连接到 PostgreSQL。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T06:48:09.187

## 将图像本身存储在数据库中通常不是一个好主意

[请参阅有关将图像存储在 BLOB 中还是仅 URL 中更好](https://dba.stackexchange.com/questions/736/is-it-better-to-store-images-in-a-blob-or-just-the-url)的讨论？和[文件 - 是否在数据库中？](https://dba.stackexchange.com/questions/2445/files-in-the-database-or-not). 请注意，这些问题及其答案与 PostgreSQL 无关。

这有一些 PostgreSQL 特定的皱纹。PostgreSQL 没有任何增量转储工具^*，因此如果您使用`pg_dump`备份，则必须为每个备份转储所有图像数据。存储空间和传输时间可能是一个问题，特别是因为您应该保留数周的备份，而不仅仅是一个最近的备份。

如果图像很大或很多，您可能需要考虑将图像存储在文件系统中，除非您强烈需要对它们进行事务性、符合 ACID 的访问。将文件名存储在数据库中，或者只是根据有用的密钥建立文件命名约定。这样，您可以轻松地对映像目录进行增量备份，将其单独管理到适当的数据库中。

如果您将图像存储在 FS 中，您将无法轻松^(†</sup> 通过 PostgreSQL 数据库连接访问它们。*OTOH，您可以直接从文件系统通过 HTTP 直接为它们提供服务，这比您必须首先从数据库查询它们时所*希望的要高效得多。特别是，如果您的图像在 FS 上，但不能来自数据库，您[可以使用 rails 中的 sendfile() 。](http://www.devarticles.com/c/a/Ruby-on-Rails/Managing-Database-Files-with-Ruby-on-Rails))

## 如果您真的必须将图像存储在数据库中

...那么它在概念上与 .NET 中的相同，但具体细节取决于您使用的 Pg 驱动程序，您没有指定。

有两种方法可以做到：

*   存储和检索`bytea`，如您所问；和
*   使用内置的大对象支持，这通常比使用`bytea`.

## 对于 bytea 可以的小图像：

*   从客户端读取图像数据到局部变量
*   通过将变量作为 bytea 传递将其插入数据库。假设您使用的是`ruby-pg`驱动程序，驱动程序中的[test_binary_values](https://bitbucket.org/ged/ruby-pg/src/ef533f731814/sample/test_binary_values.rb)示例应该对您有所帮助。

## 对于更大的图像（超过几兆字节） ，请`lo`改用：

对于更大的图像，请不要使用`bytea`. 它的理论最大值可能是 2GB，但[实际上您需要 3 倍 RAM（或更多），因为图像大小会建议](http://postgresql.1045698.n5.nabble.com/query-max-size-Bytea-td1976679.html)您避免使用`bytea`大图像或其他大型二进制数据。

PostgreSQL 有一个[专用的`lo`（大对象）类型](http://www.postgresql.org/docs/current/static/largeobjects.html)。在 9.1 上：

```
CREATE EXTENSION lo;
CREATE TABLE some_images(id serial primary key, lo image_data not null); 
```

...然后用于[`lo_import`](http://www.postgresql.org/docs/current/static/lo-interfaces.html)从磁盘上的临时文件中读取数据，因此您不必一次将整个内容放入 RAM 中。

驱动程序为、等`ruby-pg`提供[包装调用](http://deveiate.org/code/pg/PG/Connection.html)，并为本地文件访问提供了一个。请参阅[这个有用的示例](https://bitbucket.org/ged/ruby-pg/src/default/sample/losample.rb)。`lo_create``lo_open``lo_import`

请使用大物体而不是`bytea`.

* * *

^*增量备份可以通过流复制、PITR / WAL 归档等进行，但再次增加数据库大小会使 WAL 管理等事情变得复杂。无论如何，除非您是专家（或“勇敢”），否则您应该进行`pg_dump`备份，而不是仅依靠复制和 PITR。将图像放入数据库也会——通过增加数据库的大小——大大减慢速度`pg_basebackup`，这在故障转移场景中可能很重要。

^(†</sup> [adminpack](https://stackoverflow.com/questions/879378/how-to-insert-a-text-file-into-a-field-in-postgresql)通过 Pg 连接为超级用户提供本地文件访问。但是，您的 webapp 用户*永远不*应该拥有超级用户权限，甚至不应该拥有它所使用的表的所有权。通过单独的安全通道（例如`WebDAV`.)

# symfony-1.4 - Symfony Prod 环境产生 500 个内部服务器错误

> ID：11929149
> 
> 赞同：1
> 
> 时间：2012-08-13T06:29:17.100
> 
> 标签：symfony-1.4, development-environment, production-environment

我的项目在它的开发环境中运行良好。但是，当我尝试访问没有 *_dev.php url 前缀的 prod 版本时，我会被重定向到登录页面（应该如此），并且在登录时会发出 500 内部服务器错误。

对于产品站点和我的开发机器都是如此。这里出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-01-16T17:54:03.390

清除缓存并将权限 777 设置为 prod 文件夹。

清除缓存`php bin/console cache:clear` 的命令：获得完全权限的命令：`sudo chmod -R 777 /var/cache/prod`

这应该工作！

# html - 点击退出时隐藏div id？

> ID：11929154
> 
> 赞同：0
> 
> 时间：2012-08-13T06:29:37.333
> 
> 标签：html, css

我制作了自动建议框。自动建议显示在 div 中。当单击页面上任何位置的外部 div id 时，我想隐藏 div id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:41:21.030

尝试这个

```
$(document).click(function (event) {     
    $("#divid").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:33:44.610

我认为您需要为此使用javascript。JQuery 可以在这里为您提供帮助。检查这是否对您有用：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:55:57.000

**[用于 jQuery 的 Ajax AutoComplete](http://www.devbridge.com/projects/autocomplete/jquery/)**可能会对您有所帮助。

# json - 不同内容类型的 ASP.NET MVC @Html.RenderAction

> ID：11929156
> 
> 赞同：2
> 
> 时间：2012-08-13T06:29:47.550
> 
> 标签：json, asp.net-mvc-4

就在我的结束之前，`<body>`我正在尝试

```
<script type="text/javascript">
    @{ Html.RenderAction("RenderData4JS", "Helper"); }
</script> 
```

返回 Json(Data4JS) 。基本上它只是输出 Json，所以我可以用 jQuery 访问它。

当我这样做时，整个网页，然后显示 HTML 源代码（必须更改整个网站的内容类型）。

我该如何解决这个问题，或者有其他方法吗？（我不想 AJAX）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:29:23.613

好的，我想出了怎么做，（足够优雅）

//在你的 ActionResult 动作中

```
return Content(GlobalHelper.ObjectToJson("GeneralData", Data4JS.Get())); 
```

//在一些实用程序类中：

```
public static string ObjectToJson(string objectName, object o)
        {
            System.Web.Script.Serialization.JavaScriptSerializer jsonSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
            return "{\"Data4JS\":" + jsonSerializer.Serialize(o) + "}";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:34:51.927

您可以将该操作的结果放入某个对象（“可能是一个字符串”）中，并将其与您用作该视图的模型的对象一起返回。在您的脚本部分中，您可以传入该变量。

```
<script type="text/javascript">
var x =  @Model.test
...Do whatever you need with the test string
</script> 
```

但是我不推荐这个，我认为你最好用 JQuery 进行 ajax 调用

# android - Android 的 SAML 客户端实现？

> ID：11929158
> 
> 赞同：11
> 
> 时间：2012-08-13T06:29:55.590
> 
> 标签：android, saml, opensaml

是否有一个示例应用程序可供我参考 Android 上的 SAML 交互？有人在 Android 上成功移植/使用过 OpenSAML 吗？

我正在尝试编写一个简单的应用程序，它将（而不是浏览器重定向）使用本机 API 来执行 SAML 身份验证。

还有一些指向我可以测试 SAML 客户端的测试环境的指针也会有所帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T15:24:33.087

如果您需要针对 SAML 2.0 IDP 对您的移动应用程序用户进行身份验证，那么您不会将其构建到 Android（或 iOS）中。最佳做法是让您的移动应用程序使用 OAuthv2 并将 IDP 生成的 SAML 响应交换为您的本地 SP/AS OAuth 令牌。本质上，应用程序将在您的应用程序中启动 WebView 浏览器以执行 SAML Web SSO 配置文件，这将导致您的 AS 为您的移动应用程序提供 OAuth 令牌。在这种情况下不需要使用 OAuth，但它会为您的移动应用程序添加安全和标准支持。

Ping Identity [注意：我确实为 Ping 工作] 已经完成了大量工作，以使 SaaS 提供商能够快速轻松地实施 SAML/OAuth（超过 250 家 SaaS 提供商并且还在不断增加）。查看[https://www.pingidentity.com/products/pingfederate/secure-mobile-access.cfm](https://www.pingidentity.com/products/pingfederate/secure-mobile-access.cfm)

HTH =- 伊恩

# ruby-on-rails-3 - RoR：为什么我的一些微博专栏没有显示？

> ID：11929159
> 
> 赞同：0
> 
> 时间：2012-08-13T06:30:00.823
> 
> 标签：ruby-on-rails-3

这是微博视图的相关部分。.

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="product"><%= micropost.product %></span>
  <span class="price"><%= micropost.price %></span>
  <span class="location"><%= micropost.location %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %> 
```

我最近在 micropost 表的列中添加了产品、价格和位置。我检查了数据库，这些方面正在被记录/写入，但由于某种原因，内容是唯一显示在应用程序上的内容。为什么其他人被排除在外？

这是生成的 HTML。我假设这是相关部分。如您所见，产品、价格和位置的 html 永远不会生成。

```
 <li id="1">
  <a href="/users/1"><img alt="alex" class="gravatar" src="http://gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823.png?s=50" /></a>
  <span class="user">
    <a href="/users/1">alex</a>
  </span>
  <span class="content">first</span>
  <span class="timestamp">
    Posted less than a minute ago.
  </span>
    <a href="/microposts/1" data-confirm="You sure?" data-method="delete" rel="nofollow" title="first">delete</a>
</li> 
```

我不认为这是 attr_accessor 和 attr_accessible 之间的区别，因为内容是 attr_accessor 并且它会显示出来。另外，我读到了差异，这里似乎不相关。我相信 attr_accessible 是正确的。另外，我尝试将其更改为 attr_accessor 并没有用。还有其他想法吗？谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:04:48.963

您尝试查看的微博 (ID = 1) 是否在这些字段 (:product, :price, :location) 上填充了数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:05:43.737

由于生成的 HTML 甚至没有`span`这些字段的标签，问题似乎是 Rails 没有加载您的视图文件的最新版本。您是在生产中还是在开发中运行？您是否重新启动了 Rails 服务器？

此外，您是正确的，`attr_accessible`而不是`attr_accessor`那些是数据库列。

您还可以检查是否启用了任何类型的缓存，以显示生成的 HTML 的缓存副本。例如，您可以更改`content`数据库中的值并查看是否反映在生成的 HTML 中。

# php - 在正文部分使用屏幕进行数据传递

> ID：11929168
> 
> 赞同：4
> 
> 时间：2012-08-13T06:30:28.903
> 
> 标签：php, mysql, fedora, asterisk

我对此有疑问。我使用屏幕传递数据并生成电子邮件，字符串格式是这样的。

```
/var/lib/asterisk/agi-bin/scllevel/email.php  '20' '2012-08-08 12:00:43'   'bhavik.patel@gmail.com' 'For Less Attendances'  '"<p>\r\n\tFor late Coming<\/p>\r\n1111111111111111\r\ntesting this is testing's this is \"Testing\"\r\n"' '178' '22' 'info@broadcast.com' 
```

我有一个问题，比如在单引号中，身体部分的设置不正确，它们表现为我的身体部分从不同的命令开始

```
"<p>['\r\n\tFor late Coming<\/p>\r\n1111111111111111\r\ntesting this is testing's this is \"Testing\"\r\n"] 
```

如果任何用户身体是这样的，那么就会产生问题，所以对此有什么想法吗？我已经使用了 htmlentities、addcslashes 和 stripslashes 之类的 PHP 函数，但都是徒劳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:15:06.253

您的问题是您要删除斜杠。您的 php 以斜线字符串形式获取邮件，您需要做的是使用 " `stripslashes`" 将斜线字符串转换为其非斜线形式，例如

您只需将字符串 ASCII 表示中的 " `\r`" -s 转换为`0x10`-s。

`htmlentities`这个简单的任务不需要其他功能。

如果还不够，请将您的 email.php 粘贴到此处，我会检查此内容。

# c# - ThreadLocal 是否清除为已完成线程创建的值？

> ID：11929173
> 
> 赞同：3
> 
> 时间：2012-08-13T06:31:04.387
> 
> 标签：c#, multithreading

ThreadLocal 是否会自动清除为已完成线程创建的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:43:20.437

是的，这些变量可用于垃圾收集，但前提是没有其他对这些值的引用（由其他线程持有）。但是当你说一个线程完成时，它不应该像一个池化线程。池化线程应该在将它们放回池之前清除它们自己的变量。

# .net - 面向开发人员的 SQL Server 2008 和 Visual Studio 2010

> ID：11929176
> 
> 赞同：0
> 
> 时间：2012-08-13T06:31:19.303
> 
> 标签：.net, sql-server, database

我正在寻找 Visual Studio 2010 和 SQL Server 2008 的开发版本，所以我想出了以下内容：

*   [Visual Studio 2010 专业版（449.99 美元）](https://rads.stackoverflow.com/amzn/click/com/B0038KTO8S)

*   [SQL Server 2008 R2 开发者版（49.95 美元）](http://www.microsoftstore.com/store/msstore/en_US/pd/SQL-Server-2008-R2-Developer-Edition/productID.221634300)

我只是想知道上述版本是否具有我需要的所有内容，例如：Visual Studio 是否具有（例如 .Net 框架-本地虚拟服务器等），SQL Server 将具有引擎并能够从Visual Studio 并创建了所有类型的结构（表、视图、存储过程、作业等...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:37:24.077

好吧，首先，SQL Server 现在是 2012 版，开发者版的成本是一样的.. 那么为什么在 2012 年是最新版本的情况下获得 2008 年呢？

其次，SQL Server 和 Visual Studio 的 Express 版本可以满足您的需求。两者都是免费的。但是您需要评估您的需求并将它们与快速版功能进行比较。

第三，Visual Studio 2012 即将在接下来的几天内发布，因此您可能也需要等待。

# apache-flex - 按下 TAB 键时 Flex Air 程序崩溃

> ID：11929177
> 
> 赞同：1
> 
> 时间：2012-08-13T06:31:28.643
> 
> 标签：apache-flex, air

这个问题困扰了我两天。当我启动我的 Flex Air 程序时，如果我按 TAB 键，它会崩溃并显示

ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/getChildIndex() 在 mx.core::Container/getChildIndex()[E:\dev\4.y\frameworks\projects\mx\src\mx\core\Container.as:2835]在 mx.containers::Panel/getChildIndex()[E:\dev\4.y\frameworks\projects\mx\src\mx\containers\Panel.as:1179] 在 fl.managers::FocusManager/getChildIndex()在 fl.managers::FocusManager/sortByDepth() 在 Array$/_sort() 在 Array/http://adobe.com/AS3/2006/builtin::sort() 在 fl.managers::FocusManager/sortFocusableObjects()在 fl.managers::FocusManager/keyDownHandler()

怎么修？谢谢。

# asp.net-ajax - 错误“Telerik 未定义”

> ID：11929178
> 
> 赞同：2
> 
> 时间：2012-08-13T06:31:34.797
> 
> 标签：asp.net-ajax, telerik

我在运行我的项目时收到 JScript 错误，因为“Microsoft JScript 运行时错误：'Telerik' 未定义”。我刚刚尝试从菜单栏“Telerik-> Rad controls for asp.net ajax->configure project”配置项目，它给了我这个错误。

请在我的 webconfig 文件下面找到。我可以在 Telerik 论坛中找到一些关于故障排除的主题，但它们并没有解决我的问题。我正在使用 .net 4.0 版本。

```
<?xml version="1.0"?>
<configuration>
    <connectionStrings>
        <add name="xxx" connectionString="Data Source=xxx;Initial Catalog=xxx;Integrated Security=False; User ID=abc; Password=xxxx;" />     
    </connectionStrings>
    <appSettings>
        <add key="Telerik.Skin" value="Default" />
        <add key="Telerik.ScriptManager.TelerikCdn" value="Enabled" />
        <add key="Telerik.StyleSheetManager.TelerikCdn" value="Enabled" />            
    </appSettings>
    <system.web>
        <compilation debug="true" targetFramework="4.0">
            <assemblies>
                <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
                <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
                <add assembly="System.Speech, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /></assemblies></compilation>
        <pages>
            <controls>
                <add tagPrefix="telerik" namespace="Telerik.Web.UI" assembly="Telerik.Web.UI" />
            </controls>
        </pages>
        <httpHandlers>
            <add path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" validate="false" />
            <add path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" validate="false" />
            <add path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" validate="false" />
            <add path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" validate="false" />
            <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false" />    
        </httpHandlers>
        <httpModules>
            <add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule" />
            <add name="RadCompression" type="Telerik.Web.UI.RadCompression" />
        </httpModules>
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="RadUploadModule" />
            <add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule" preCondition="integratedMode" />
            <remove name="RadCompression" />
            <add name="RadCompression" type="Telerik.Web.UI.RadCompression" preCondition="integratedMode" />
        </modules>
        <handlers>
            <remove name="ChartImage_axd" />
            <add name="ChartImage_axd" path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" preCondition="integratedMode" />
            <remove name="Telerik_Web_UI_SpellCheckHandler_axd" />
            <add name="Telerik_Web_UI_SpellCheckHandler_axd" path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" preCondition="integratedMode" />
            <remove name="Telerik_Web_UI_DialogHandler_aspx" />
            <add name="Telerik_Web_UI_DialogHandler_aspx" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" preCondition="integratedMode" />
            <remove name="Telerik_RadUploadProgressHandler_ashx" />
            <add name="Telerik_RadUploadProgressHandler_ashx" path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" preCondition="integratedMode" />
            <remove name="Telerik_Web_UI_WebResource_axd" />
            <add name="Telerik_Web_UI_WebResource_axd" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" preCondition="integratedMode" />
        </handlers>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-02T08:00:02.407

如果您使用的是`Telerik 2013-3-1015`比替换

```
<add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false"/> 
```

和

```
<add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI, Version=2013.3.1015.45, Culture=neutral, PublicKeyToken=121fae78165ba3d4" verb="*" validate="false"/> 
```

在`web.config`

检查您的`Telerik`. 转到`Solution Explorer`->现在在Windows 检查版本属性中`References`单击`Telerik.Web.UI``Properties`

享受... ！！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T06:37:07.337

请尝试在 Web 配置中使用此代码，

```
<httpHandlers>
  <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI, Version=2009.3.1314.20, Culture=neutral, PublicKeyToken=121fae78165ba3d4" verb="*" validate="false" />
</httpHandlers> 
```

和

```
<handlers> <add name="Telerik_Web_UI_WebResource_axd" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI, Version=2009.3.1314.20, Culture=neutral, PublicKeyToken=121fae78165ba3d4" /></handlers> 
```

我能够在 Web Config 中使用这两个设置运行 Telerik

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:12:05.267

请将这些行添加到网络配置中

```
<location path="Users/Telerik.Web.UI.WebResource.axd">
<system.web>
    <authorization>
        <allow users="*"/>
    </authorization>
</system.web>
</location>

<location path="Telerik.Web.UI.WebResource.axd">
<system.web>
    <authorization>
        <allow users="*"/>
    </authorization>
</system.web>
</location> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T19:55:49.120

查看您的 web.config 中是否有此行并将其注释掉：

```
 <add key="Telerik.ScriptManager.TelerikCdn" value="Enabled" /> 
```

# r - 在 R 中迭代以拼写检查单词向量

> ID：11929180
> 
> 赞同：5
> 
> 时间：2012-08-13T06:31:54.780
> 
> 标签：r, loops, iterator, spell-checking, plyr

我有一个数据集，其中充满了不适当间隔的句子。我试图想出一种方法来删除一些空格。

我从一个转换为单词数据框的句子开始：

```
> word5 <- "hotter the doghou se would be bec ause the co lor was diffe rent"
> abc1 <- data.frame(filler1 = 1,words1=factor(unlist(strsplit(word5, split=" "))))
> abc1
   filler1 words1
1        1 hotter
2        1    the
3        1 doghou
4        1     se
5        1  would
6        1     be
7        1    bec
8        1   ause
9        1    the
10       1     co
11       1    lor
12       1    was
13       1  diffe
14       1   rent 
```

接下来，我使用以下代码尝试拼写检查和组合单词，这些单词是它们之前或之后的单词的组合：

```
abc2 <- abc1
i <- 1
while(i < nrow(abc1)){
  print(abc2)
  if(nrow(aspell(abc1$words1[i])) == 0){
    print(paste(i,"Words OK",sep=" | "));flush.console() 
    i <- i + 1
  }
 else{
  if(nrow(aspell(abc1$words1[i])) > 0 & i != 1){
    preWord1 <- abc1$words1[i-1]
    postWord1 <- abc1$words1[i+1]
    badWord1 <- abc1$words1[i]
    newWord1 <- factor(paste(preWord1,badWord1,sep=""))
    newWord2 <- factor(paste(badWord1,postWord1,sep=""))

    if(nrow(aspell(newWord1)) == 0 & nrow(aspell(newWord2)) != 0){
      abc2[i,"words1"] <-as.character(newWord1)
      abc2 <- abc2[-c(i+1),]
      print(paste(i,"word1",sep=" | "));flush.console()
      i <- i + 1
    }

    if(nrow(aspell(newWord1)) != 0 & nrow(aspell(newWord2)) == 0){
      abc2[i ,"words1"] <-as.character(newWord2)
      abc2 <- abc2[-c(i-1),]
      print(paste(i,"word2",sep=" | "));flush.console()
      i <- i + 1
    }

  }
}
} 
```

在玩了一段时间后，我得出的结论是我需要某种类型的迭代器，但不确定如何在 R 中实现它。有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T19:17:29.973

**注意：**我想出了一个完全不同的更好的解决方案，因为它规避了之前解决方案的所有缺点。但我仍然想保留旧的解决方案。因此，我将其添加为新答案，如果我这样做错了，请纠正我。

在这种方法中，我重新格式化了数据集。基础就是我所说的 wordpair 对象。例如：

```
> word5
[1] "hotter the doghou se would be bec ause the col or was diffe rent" 
```

看起来像：

```
> abc1_pairs
    word1  word2
1  hotter    the
2     the doghou
3  doghou     se
4      se  would
5   would     be
6      be    bec
7     bec   ause
8    ause    the
9     the    col
10    col     or
11     or    was
12    was  diffe
13  diffe   rent 
```

接下来，我们遍历单词对并查看它们本身是否是有效单词，递归执行此操作直到找不到有效的新单词（请注意，本文底部列出了一些附加函数）：

```
# Recursively delete wordpairs which lead to a correct word
merge_wordpairs = function(wordpairs) {
  require(plyr)
  merged_pairs = as.character(mlply(wordpairs, merge_word))
  correct_words_idxs = which(sapply(merged_pairs, word_correct))
  if(length(correct_words_idxs) == 0) {
    return(wordpairs)
  } else {
    message(sprintf("Number of words about to be merged in this pass: %s", length(correct_words_idxs)))
    for(idx in correct_words_idxs) {
      wordpairs = merge_specific_pair(wordpairs, idx, delete_pair = FALSE)
    }
    return(merge_wordpairs(wordpairs[-correct_words_idxs,])) # recursive call
  }
} 
```

应用于示例数据集，这将导致：

```
> word5 <- "hotter the doghou se would be bec ause the col or was diffe rent"
> abc1 = strsplit(word5, split = " ")[[1]]
> abc1_pairs = wordlist2wordpairs(abc1)
> abc1_pairs
    word1  word2
1  hotter    the
2     the doghou
3  doghou     se
4      se  would
5   would     be
6      be    bec
7     bec   ause
8    ause    the
9     the    col
10    col     or
11     or    was
12    was  diffe
13  diffe   rent
> abc1_merged_pairs = merge_wordpairs(abc1_pairs)
Number of words about to be merged in this pass: 4
> merged_sentence = paste(wordpairs2wordlist(abc1_merged_pairs), collapse = " ")
> c(word5, merged_sentence)
[1] "hotter the doghou se would be bec ause the col or was diffe rent"
[2] "hotter the doghouse would be because the color was different" 
```

需要的附加功能：

```
# A bunch of functions
# Data transformation
wordlist2wordpairs = function(word_list) {
  require(plyr)
  wordpairs = ldply(seq_len(length(word_list) - 1), 
                    function(idx) 
                      return(c(word_list[idx], 
                               word_list[idx+1])))
  names(wordpairs) = c("word1", "word2")
  return(wordpairs)
}
wordpairs2wordlist = function(wordpairs) {
  return(c(wordpairs[[1]], wordpairs[[2]][nrow(wordpairs)]))
}

# Some checking functions
# Is the word correct?
word_correct = function(word) return(nrow(aspell(factor(word))) == 0)
# Merge two words
merge_word = function(word1, word2) return(paste(word1, word2, sep = ""))

# Merge a specific pair, option to postpone deletion of pair
merge_specific_pair = function(wordpairs, idx, delete_pair = TRUE) {
  # merge pair into word
  merged_word = do.call("merge_word", wordpairs[idx,])
  # assign the pair to the idx above
  if(!(idx == 1)) wordpairs[idx - 1, "word2"] = merged_word
  if(!(idx == nrow(wordpairs))) wordpairs[idx + 1, "word1"] = merged_word
  # assign the pair to the index below (if not last one)
  if(delete_pair) wordpairs = wordpairs[-idx,]
  return(wordpairs)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T10:17:27.430

你可以做的是使用递归。下面的代码对您的示例进行了稍微修改的版本。它检查所有单词是否正确，如果正确，则返回单词列表。如果不是，它会尝试将该单词与前面的单词以及后面的单词结合起来。如果前面单词的合并是正确的，这将导致一个看起来像 的合并`paste(word_before, word, word_after)`。在尝试合并之后，在新单词列表上调用合并单词的函数。这种递归一直持续到没有留下错误的单词为止。

```
# Wrap the spell checking in a function, makes your code much more readable
word_correct = function(word) return(nrow(aspell(factor(word))) == 0)
# Merge two words
merge_word = function(word1, word2) return(paste(word1, word2, sep = ""))
# Merge two words and replace in list
merge_words_in_list = function(word_list, idx1, idx2) {
  word_list[idx1] = merge_word(word_list[idx1], word_list[idx2])
  return(word_list[-idx2])
}
# Function that recursively combines words 
combine_words = function(word_list) {
  message("Current sentence: ", paste(word_list, collapse = " "))
  words_ok = sapply(word_list, word_correct)
  if(all(words_ok)) {
    return(word_list) 
  } else {
    first_wrong_word = which(!words_ok)[1]
    combination_before = merge_word(word_list[first_wrong_word], 
                                    word_list[first_wrong_word-1])
    if(word_correct(combination_before)) {
      word_list = merge_words_in_list(word_list, first_wrong_word-1, 
                                      first_wrong_word)
    }
    combination_after = merge_word(word_list[first_wrong_word], 
                                   word_list[first_wrong_word+1])
    if(word_correct(combination_after)) {
      word_list = merge_words_in_list(word_list, first_wrong_word, 
                                      first_wrong_word+1)
    }
    return(combine_words(word_list))  # Recursive call
  }
} 
```

将这组函数应用于（稍作修改）版本的句子：

```
word5 <- "hotter the doghou se would be bec ause the col or was diffe rent"
abc1 = strsplit(word5, split = " ")[[1]]
combine_words(abc1)
Current sentence: hotter the doghou se would be bec ause the col or was diffe rent
Current sentence: hotter the doghouse would be bec ause the col or was diffe rent
Current sentence: hotter the doghouse would be because the col or was diffe rent
Current sentence: hotter the doghouse would be because the col or was different 
```

一些问题：

*   仍然存在的问题是，如果两者`combination_before`都`combination_after`无效，程序会陷入无限递归。程序仅在所有单词都有效时停止。
*   如果两者都与前一个词合并，并且下一个词是有效的，我们该怎么办？
*   代码只合并错误的单词，例如'col' 和'or' 被认为是好词，`aspell`而你可能想要合并。这带来了一个新的挑战：在这种情况下，合并是显而易见的，但在大型数据集中，如何组合一组本身正确的单词可能并不明显。

但尽管如此，我认为这个例子很好地说明了一种递归方法。

# android - 从输入资源启动 9-patch 可绘制对象的问题

> ID：11929181
> 
> 赞同：1
> 
> 时间：2012-08-13T06:32:00.890
> 
> 标签：android, drawable, nine-patch

从输入流启动 9patch 可绘制对象时遇到问题。我需要对我的应用程序进行皮肤处理，并且需要从 Web 服务下载皮肤元素和图像。

在 SO 和 android 开发指南中寻找合理数量的资源，但似乎没有一个对我有用。

从资源中设置可绘制对象确实可以正确处理 9patch，因此在逻辑上这样做的聪明之处就在那里，但由于某种原因，**我从 android 源本身派生**的以下代码无法正确处理 9patch

```
 Rect pad = new Rect();
     BitmapFactory.Options opts = new BitmapFactory.Options();
     opts.inScreenDensity = DisplayMetrics.DENSITY_DEFAULT;
     Bitmap  bm = BitmapFactory.decodeResourceStream(resources, typedValue, new FileInputStream(path), pad, opts);
     if (bm != null) {
              byte[] np = bm.getNinePatchChunk();
              if (np == null || !NinePatch.isNinePatchChunk(np)) {
                       np = null;
                       pad = null;
              }
              if (np != null) {
                       drawable = new NinePatchDrawable(resources, bm, np, pad, path);
              } else {
                       drawable = new BitmapDrawable(resources, bm);
              }
     } 
```

我已将输入源更改为我的文件之一（FileInputStream(path)），在 android 源中，它是在资源图像上启动的输入源。

即使输入图像是 9-patch，此代码也始终返回 BitmapDrawable。

有没有人成功地让这个功能真正发挥作用？对于解决方案的任何帮助或提示，我将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:59:14.287

我创建了这个要点来在运行时创建 9 个补丁：[https ://gist.github.com/4391807](https://gist.github.com/4391807)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:18:55.423

好的，解决方案是这里没有解决方案，因为 9 个补丁需要 9 个补丁块作为一个数组，这是在编译时生成的。显然，当从 Web 资源加载图像时，我们没有编译阶段。

对于 Android 工程师 - 也许未来版本的 android SDK 将能够在运行时生成九个补丁块。

# asp.net - 如何在 Web 应用程序中查找从哪个页面调用我的页面

> ID：11929184
> 
> 赞同：0
> 
> 时间：2012-08-13T06:32:14.203
> 
> 标签：asp.net, visual-studio-2010, visual-studio, web-applications, flow

我的`ASP.Net application`包含 8000 多页。它有`frame based architecture`。我需要在几页上进行一些更改。通过全局搜索，我发现我需要 10 个页面来实现我的更改。但我在测试我的更改时面临挑战。我需要找到如何从正在运行的应用程序登陆到我更改的页面。如果我按页面名称进行全局搜索，它会给我几页，但大多数地方都写了条件逻辑，当我测试条件时可能不会命中。还有一些地方正在调用它`javascript`。

有什么简单的方法可以从调用此页面的位置找到吗？

我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:36:26.677

你可以通过

```
 if( !IsPostBack )
 {
     if(  Request.UrlReferrer.ToString() != null )
     {
          ViewState["PreviousPageUrl"] = Request.UrlReferrer.ToString();
     }
 } 
```

# android - 加载 UI 项时如何显示 ProgressDialog？

> ID：11929193
> 
> 赞同：2
> 
> 时间：2012-08-13T06:32:59.447
> 
> 标签：android, android-layout, android-listview

我有一个列表视图，我正在将项目动态加载到其中。问题是当我激活该活动时。这需要很长时间，所以我必须在加载 UI 时显示一些进度对话框。我真的不知道该怎么做，因为 doInBackground （如果使用异步任务）不允许开发人员弄乱 UI。我该怎么办 ？

这是我的 UI 加载代码：

```
LeagueTableRow leagueTableRow_data[] = new LeagueTableRow[]
                    {
                        new LeagueTableRow(1,R.drawable.logo,"aaa",12,9,3,14),
                        new LeagueTableRow(3,R.drawable.logo,"aaa",12,9,3,14),
                        new LeagueTableRow(4,R.drawable.logo,"aaa",12,9,3,14),
                        new LeagueTableRow(5,R.drawable.logo,"aaa",12,9,3,14),
                            new LeagueTableRow(2,R.drawable.logo,"aaa",12,9,3,14)
                    };

                    LeagueTableRowAdapter adapter = new LeagueTableRowAdapter(context, 
                            R.layout.leaguetablecontent, leagueTableRow_data);

                    listViewLeagueTable = (ListView)findViewById(R.id.listViewLeagueTable);

                    View header = (View)getLayoutInflater().inflate(R.layout.leaguetableheader, null);
                    listViewLeagueTable.addHeaderView(header);

                    listViewLeagueTable.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:51:46.940

这可以在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)（一个智能后台线程）和[ProgressDialog的帮助下实现](http://developer.android.com/reference/android/app/ProgressDialog.html)

当 AsyncTask 启动时，将引发具有不确定状态的 ProgressDialog，一旦任务完成，对话框将被关闭。

**示例代码**

适配器在这个例子中做了什么并不重要，更重要的是要了解您需要使用 AsyncTask 来显示进度对话框。

```
private class PrepareAdapter1 extends AsyncTask<Void,Void,ContactsListCursorAdapter > {
    ProgressDialog dialog;
    @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(viewContacts.this);
        dialog.setMessage(getString(R.string.please_wait_while_loading));
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();
    }
    /* (non-Javadoc)
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    @Override
    protected ContactsListCursorAdapter doInBackground(Void... params) {
        cur1 = objItem.getContacts();
        startManagingCursor(cur1);

        adapter1 = new ContactsListCursorAdapter (viewContacts.this,
                R.layout.contact_for_listitem, cur1, new String[] {}, new int[] {});

        return adapter1;
    }

    protected void onPostExecute(ContactsListCursorAdapter result) {
        list.setAdapter(result);
        dialog.dismiss();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T06:44:36.557

如果您使用[listView.setEmptyView](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)设置空视图。该视图将显示在列表的位置，直到您在列表上执行 setadapter。因此，一旦您执行 setAdapter，emptyview 就会消失。您可以将 Progressbar 传递给您的案例中的 setEmptyview 以显示进度条。

编辑：
在[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)的 OnPostExecute中使用 Setadapter。OnPostExecute、OnPreExecute、OnProgressUpdate、OnCancelled 都在 UI 线程上运行。如果您仍然坚持 ProgressDialog，则在 OnPreExecute 中创建对话框并在 Asynctask 的 OnpostExecute 和 OnCancelled 中将其关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:41:18.430

如果加载列表花费了太多时间，请使用[AsyncTask 。在列表视图顶部放置一个进度条，在 AsyncTask 中使用它。希望这会对您有所帮助](http://developer.android.com/reference/android/os/AsyncTask.html)

# php - strpos 与 array_key_search

> ID：11929197
> 
> 赞同：1
> 
> 时间：2012-08-13T06:33:09.627
> 
> 标签：php, arrays, strpos

我有一个代码来搜索数组键，但只有当消息是确切的消息时，我希望它使用 strpos 以便它可以检测到消息但我不知道该怎么做：

我的代码：

```
$message = $_POST['message'];
$responses = array("hi" => "whats up?");
if (array_key_exists($message,$responses)){
$msg = strtolower($message);
$answer = $responses[$msg];
echo $answer;
} 
```

所以这只有在整个发布的数据都是“hi”时才有效。我希望它使用 strpos，这样它就可以在任何地方检测到 hi，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:40:47.537

我不是 100% 确定，但这是你想要的吗？

```
$foundKey = null;
foreach ($responses as $key => $value) {
    if (strpos($message, $key) !== false) {
        $foundKey = $key;
        break;
    }
}
if ($foundKey !== null) {
    echo "Found key: " . $responses[$key];
} 
```

**编辑**：

如果你想要一个不区分大小写的版本，当然你可以使用它：

```
$foundKey = null;
foreach ($responses as $key => $value) {
    if (stripos($message, $key) !== false) {
        $foundKey = strtolower($key);
        break;
    }
}
if ($foundKey !== null) {
    echo "Found key: " . $responses[$key];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:43:34.663

strpos(firststring,secondstring,startposition[Optional]) 函数返回 num。如果 num>=0 表示第一个字符串中的第二个字符串。

```
$message = $_POST['message'];
$responses = array("hi" => "whats up?");
if (strpos($message,$responses)>=0){
$msg = strtolower($message);
$answer = $responses[$msg];
echo $answer;
} 
```

# java - 覆盖函数而不扩展类

> ID：11929198
> 
> 赞同：24
> 
> 时间：2012-08-13T06:33:15.667
> 
> 标签：java

假设我有一个 A 类：

```
public class A {
    public A(){....}
    public void method1() {...}
}; 
```

以及该类的一个实例：

```
A anA = new A(); 
```

有没有办法覆盖`method1()`only for `anA`？当我编写一个小型绘画程序时，就会出现这个问题，在该程序中，我必须`JPanel`多次扩展类，以便对具有略微不同特征的不同面板进行细微更改。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-13T06:35:12.953

您可以执行以下操作：

```
A anA = new A() {
    public void method1() {
        ...
    }
}; 
```

这与以下内容相同：

```
private static class myA extends A {
    public void method1() {
        ...
    }
}

A anA = new myA(); 
```

只有在这种情况下`myA`可以重复使用的例外。这对于匿名类是不可能的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-13T07:03:09.110

只要您使用类的无参数构造函数，就可以动态创建一个新的匿名类`A`：

```
A anA = new A() {

  @Override
  public void method1() {
    ...
  }
}; 
```

请注意，您想要做的与所谓的*lambda*非常接近，它应该在 Java SE 的下一个版本 8 中出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-10T01:30:21.020

我喜欢用委托或“策略模式”来做这种事情。

```
public interface ADelegate {
   public void method1();
}

public class A {
    public A(){....}
    public ADelegate delegate;
    public final void method1() { delegate.method1(); }
};

A anA = new A();
anA.delegate = new ADelegate() {
   public void method1() { ... }
}; 
```

# payment-gateway - 如何为第三方用户在线接受付款并收取佣金？

> ID：11929201
> 
> 赞同：0
> 
> 时间：2012-08-13T06:33:21.237
> 
> 标签：payment-gateway, payment-processing

我想代表第 3 方用户接受客户的付款并收取佣金。这类似于自由职业者网站的工作方式，客户向员工支付费用，网站所有者收取佣金。我很好奇如何开发这样的系统，或者支付处理提供商可以提供哪些帮助？

任何提示表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:09:27.597

如果您位于Nochex，`UK`那么[Nochex](http://www.nochex.com)可能会为您提供帮助。

亲切的问候，彼得

# android - 照片共享云 - Azure

> ID：11929204
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:33:24.110
> 
> 标签：android, web-services, windows-phone-7, azure, cloud-hosting

我需要构建一个基于 Web 的照片共享应用程序，并且还具有适用于 android、Windows Phone 和 iOS 的移动应用程序（我不需要构建所有这些应用程序，它们应该得到无缝支持）。照片共享项目将是我的任务，以了解照片共享过程中涉及的各种方面（高效存储、可靠性和 UI 演示将是我的关键方面）。

我打算使用 Windows Azure、IIS、SQL Server 和一些 silverlight？这是我开始时最具成本效益和推荐的方式吗？

如果有的话 1 可以分享一些流行的照片共享网站使用的当前趋势技术。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:57:08.990

好的，所以如果您希望您的应用程序支持 WP、iOS、Android ......您将不得不研究一些技术，这些技术允许您构建一个可以轻松地被任何这些平台使用的 API。在这种情况下，您可能希望查看新的[ASP.NET Web API](http://www.asp.net/web-api)，它允许您构建支持[内容协商](http://blogs.msdn.com/b/henrikn/archive/2012/04/22/asp-net-web-api-content-negotiation-and-accept-charset.aspx)的 API 。

除此之外，您还想了解如何使用[Blob Storage](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)在 Windows Azure 中存储数据。这允许您为所有文件提供一个 URI，并让 Blob 存储将这些文件提供给您的用户，而不是您的应用程序必须这样做。这将大大减少前端的负载。您甚至可以将其与[CDN](https://www.windowsazure.com/en-us/home/features/caching/)结合使用，以使您的图像在多个边缘服务器上可用，以便从离您的用户最近的位置提供内容。

由于您正在使用图像，我假设您将使用这些图像，例如创建缩略图、应用过滤器......这些任务可能会使用大量资源，您不会希望将所有这些负载都放在您的前端（Web 角色/网站）。这就是为什么使用队列将这项工作卸载到后端（工作者角色）是一种常见做法的原因。以下是来自使用 Worker Role 和队列创建缩略图的培训工具包的完整示例：http: [//msdn.microsoft.com/en-us/vs2010trainingcourse_introtowindowsazurelabvs2010_topic3.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtowindowsazurelabvs2010_topic3.aspx)

至于 Silverlight 部分，就我个人而言，我不会使用 Silverlight，因为您只会将自己限制在台式机上。使用 ASP.NET MVC + jQuery /（任何其他 JS 框架）将允许移动/平板电脑用户也可以使用您的网站，即使没有可用的本机应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:55:58.480

您可以在 Azure 中托管 Web 应用程序。将照片存储在 Azure 私有 blob 中。我不确定 Silverlight 部分，我认为某些移动平台不支持它。

# .net - 在实体框架中将 tinyint 映射到布尔值

> ID：11929205
> 
> 赞同：2
> 
> 时间：2012-08-13T06:33:26.183
> 
> 标签：.net, entity-framework

我敢肯定你以前见过这个问题。但是，至少在我的搜索中，每次被问到这样的答案时：[https](https://stackoverflow.com/a/4017148/219838) ://stackoverflow.com/a/4017148/219838会弹出。答案是完全正确的，但不涵盖一种情况。如果您的 DBA 选择使用 tinyint 列（根据他的说法，位列不可索引）来表示布尔值，而世界上没有任何东西会让他改变这一点怎么办？

我了解布尔值和字节值之间的区别。但我不在乎！我需要知道的是：是否有任何解决方法可以将 tinyint 列映射到布尔值而不是字节？

我在这里发现了一个丑陋的描述：http: [//www.saulovallory.com/how-to-map-byte-columns-to-bool-in-entityframework](http://www.saulovallory.com/how-to-map-byte-columns-to-bool-in-entityframework)但它**不适**用于流畅的映射。现在我需要一个可以做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:02:05.577

EF 没有像`IUserType`在 nHibernate 中那样构建它的自定义类型转换器。可能的解决方法是将列映射到具有类型的匹配属性，并具有具有转换逻辑`byte`的另一个属性。`bool`因为这不是映射属性，所以您将无法在 LINQ 查询中使用它。

```
public class MyClass
{
    public byte DatabaseColumnName { get; set; }

    [NotMapped]
    public bool DomainPropertyName 
    { 
       get
       {
            //conversion logic using DatabaseColumnName 
       }
       set
       {
           //conversion logic using DatabaseColumnName 
       }
} 
```

# python - 为什么一个叫做 `main` 的函数没有任何特殊意义？

> ID：11929211
> 
> 赞同：2
> 
> 时间：2012-08-13T06:33:45.917
> 
> 标签：python, main

在 Python 中，为什么一个被调用的函数`main`没有像在 C 和 Java 中那样具有任何特殊意义？

如果程序员从 C 或 Java 切换到 Python 会怎样。他是否应该`main`像在 C 或 Java 中一样继续在 Python 中使用，因为这是他现在进行编程的风格，还是从广义上讲，这对在 Python 中进行编程是有害的？

**编辑：**我已经阅读了这篇文章，其中一个很好的例子提到了为什么第一次程序员应该在 python 中避免 main 中的[main in python有害](http://gumption.typepad.com/blog/2012/05/def-main-in-python-considered-harmful.html)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T06:37:40.440

这样的程序员应该这样做：

```
if __name__ == "__main__":
    # run stuff 
```

如果未导入模块，则将变量`__name__`设置为。`"__main__"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T06:42:54.227

您还应该问，为什么在 C 和 Java 中确实`main`具有特殊意义。这只是语言设计者的选择。 `main`很可能会被调用`start`，或者`begin`但是有人选择了`main`它并且卡住了。

在 Python 中，没有理由不能调用函数`main`并将其作为程序的起点。但是，Python 有自己的语法来识别某个文件是否等同于`main`：

```
__name__ == "__main__" 
```

这通常被包装为 an 的一部分，并且可以在调用实际启动程序的函数中`if`仅包含一行。`main`

Python 和许多（全部？）脚本语言的部分设计是代码可以简单地内联编写。您不必将所有内容都包装在一个函数中。因此，许多简单的脚本根本不需要任何函数。例如，轮换日志文件的 cron 作业可以只写成 Python 文件中的代码块，而没有定义任何函数。

在这种情况下，`main`不需要该方法。

在许多方面不需要 a`main`使语言更加灵活，尤其是对于更简单的任务。

**附录：**

为您的编辑添加一些上下文。那篇文章提出了一个非常糟糕的论点。实际上，函数名称冲突并不少见，因为有许多模块执行相同或相似的事情（在核心中没有那么多，但一旦您开始使用 pip，您就会遇到奇怪的冲突）。因此，使用描述性函数名称并避免使用`from foo import *`.

就像 C++ 程序员通常认为用 污染命名空间是不好的形式一样`using namespace std`，Python 程序员通常认为用 污染命名空间是不好的形式`import *`，特别是因为如果在任何地方使用它会导致滚雪球效应。

最后，您不太可能在程序中调用 2 个函数`main`。您更有可能在其他地方发生名称冲突。真正的危险是通配符导入，而不是`main`函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-13T06:38:34.387

在 Python 中，有一些*类似于*该`main()`函数的东西：

```
if __name__ == '__main__':
  # Your main function 
```

此`if`块中的代码仅在 Python 文件未作为模块导入时运行。

如果你决定使用那个丑陋`main()`的函数，那么 Python 等价物将是这样的：

```
def main():
  # ...

if __name__ == '__main__':
  main() 
```

我觉得不是很漂亮。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-13T06:38:25.993

在 python 中，一个`.py`文件既可以作为模块使用，也可以直接运行，so`main`用于标识如果文件是直接运行还是文件作为模块导入时要运行的部分。

文件.py：

```
def func(x,y):
    print x+y

if __name__=='__main__':
    func(5,2): 
```

如果直接执行它会打印 7

导入时，主要部分不运行：

```
>>> from so32 import *
>>> func(5,5)
10
>>> func(10,20)
30 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T07:23:56.143

> 在 Python 中，为什么一个名为 main 的函数没有像在 C 和 Java 中那样具有任何特殊意义？

因为python在设计时没有考虑到C、java或类似语言，所以有些语言实际上不使用main，[http://c2.com/cgi/wiki](http://c2.com/cgi/wiki?HelloWorldInManyProgrammingLanguages) ?HelloWorldInManyProgrammingLanguages有相当多的`hello world`程序你可以看到并非所有都使用 main，尽管您可能无法真正比​​较它们...

`if __name__ == '__main__':`正如其他人所说的那样，无论哪种方式，您都可以通过检查oh来检查模块是否直接从解释器运行，[这里](http://www.artima.com/forums/flat.jsp?forum=106&thread=4829)是 Python 的创建者 Guido Van Russon 关于如何编写主要函数的一些提示。

> 如果程序员从 C 或 Java 切换到 Python 会怎样。他是否应该像在 C 或 Java 中一样继续在 Python 中使用 main，因为这是他现在进行编程的风格，还是从广义上讲，这对在 Python 中进行编程是有害的？

当您编写 python 代码时，或者就此而言，当您编写任何程序时，总是试图让代码在该语言中看起来很自然，这意味着遵循语言开发人员或整个社区设定的标准和实践，请不要编写 c或类似python中的java代码，但它可能会皱眉，代码往往容易出错，而且很难理解，有时很慢，这同样适用于任何其他语言。

这很少有很好的参考[Python 编码标准/最佳实践](https://stackoverflow.com/questions/356161/python-coding-standards-best-practices)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T20:23:33.273

有一个很好的解释为什么使用 main() 来调用单个过程（或方法）是一个好主意，由 YouTube 上的 Kent D Lee 撰写 - 基本上是因为没有 main() 你所有的变量都是全局的，而且它们不仅需要更长的时间为了访问，他们还冒着一个程序的变量会干扰另一个程序的变量的风险。此外，使用 main() 调用您的过程使您可以通过导入它们在另一个程序中重用这些过程。此外，您可以在不执行整个程序的情况下测试单个程序。当然，如果你要做的只是输出“hello world”，那么拥有一个 main 方法根本没有任何优势，你这样做的唯一原因是找出它是如何工作的。
每个人都说 Python 对学习者有好处的原因是因为你可以很容易地立即开始做事——问题是，如果你要编写相当大的程序，你很快就会面临这样一个事实，即其他语言所具有的所有这些复杂性，实际上是相当重要的。

# android - 如何找到一个位置的高度？

> ID：11929212
> 
> 赞同：0
> 
> 时间：2012-08-13T06:33:53.250
> 
> 标签：android

我正在使用 Location 类来查找纬度、经度和高度。但我总是得到 0.0 的高度。我已经尝试在模拟器和真正的 android 设备上运行该应用程序，但我仍然得到 0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:44:09.383

似乎很多人都遇到了类似的问题，甚至被报告为可能的[错误](http://code.google.com/p/android/issues/detail?id=24809)。如果模拟器此时根本不支持它，我不会感到惊讶。您可能必须使用真实设备。

在真实设备上检查这个...

```
locationProvider.hasAltitude(); 
```

# cloudbees - cloudbees上的应用实例自动休眠

> ID：11929213
> 
> 赞同：3
> 
> 时间：2012-08-13T06:33:54.420
> 
> 标签：cloudbees

我有一个用于性能和自动化 UI 测试的 cloudbees 企业实例。

空闲实例（内存有限）无法支持我们用于测试的内存或每秒请求数。

我希望实例在我不使用它时自动休眠，但在请求进来时唤醒它。我会配置一个 jenkins 作业来唤醒应用程序（通过发出请求），然后再启动基于 selenium 的酱汁实验室工作。

我的问题是如何配置自动休眠？控制面板至少有一个实例，我猜这意味着一个实例保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:33:54.420

你是对的 - 目前自动休眠仅适用于免费应用程序。当应用程序处于休眠状态（与停止）时，只要有人需要访问它，它就会自动唤醒。

为此，您可以做一项工作，将您的应用程序设置为休眠状态，例如每天一次（或者在您知道不需要它的一天中的特定时间）。当再次需要它时 - 你不需要做任何事情 - 只需访问它就会导致它再次被激活（唤醒） - 所以你的测试脚本可以确保是这种情况（理想情况下，在测试运行之后，设置它再次休眠）。

这实际上取决于需要应用程序的频率 - 如果您可以找出不需要的点并触发休眠（例如在测试运行之后），那么这是理想的（您可以最大限度地降低成本）。

# google-chrome-devtools - 更改谷歌浏览器中的局部变量或函数参数

> ID：11929215
> 
> 赞同：0
> 
> 时间：2012-08-13T06:33:58.633
> 
> 标签：google-chrome-devtools

我正在使用 chrome 的 devtools 调试/修改非本地 javascript 文件（所以我无法编辑它）。

代码相当复杂，在函数内部定义函数，并始终使用这些指针。

关键是我不知道我在这个过程中的确切位置，但我可以为我需要修改的变量设置一个断点。但我不知道如何修改它。我可以在本地面板下添加手表或修改它，但它实际上不会改变（一旦值恢复为原始值后步进）

那么如何改变变量呢？我不知道为什么这么难。在我的传统调试中，您可以简单地编辑 watch 或 locals 中的值，它会修改它。我试过在控制台修改它，但我想我不知道变量的完整路径，而且我总是得到一个未定义的变量。

我要做的就是修改我设置断点的某个函数中的局部变量或参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:12:38.237

尝试在控制台中执行此操作。例如：`window.myVar = "newValue"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T19:41:54.910

首先观察变量，然后在 Scope 选项卡中您可以更改 var 的值！

# c# - 在运行时动态添加按钮

> ID：11929218
> 
> 赞同：0
> 
> 时间：2012-08-13T06:34:19.750
> 
> 标签：c#, winforms, button, dynamic

我想在 c sharp windows 窗体上动态添加按钮。按钮的数量应该等于数据表中可用的记录数量，我想显示单击其按钮的记录。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:39:04.670

在您的情况下，您需要创建将在 UI 上表示您的项目记录的用户控件，创建在此用户控件中支持您的项目和公共事件的构造函数，并像这样添加到您的容器中。

`myPanel.Controls.Add(new ItemRecordUserControl(item));`

可能您需要使用一些***特定的容器***而不是***常规面板***，例如 `System.Windows.Forms.FlowLayoutPanel`.

***用户控件将如下所示：***

```
public partial class ItemRecorUserControl : UserControl
{
    public event EventHandler<EventArgs> ActionButtonClicked;

    public void OnActionButtonClicked(object sender, EventArgs e)
    {
        if (this.ActionButtonClicked != null)
            this.ActionButtonClicked(sender, e);
    }

    public ItemRecorUserControl()
    {
        InitializeComponent();
    }

    public ItemRecorUserControl(ItemRecord item) : this()
    {
        // fill item data here to controls
    }

    private void btnAction_Click(object sender, EventArgs e)
    {
        this.OnActionButtonClicked(sender, e);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:41:25.100

你可以像这样添加按钮：

```
for (int i = 0; i < YourDataTableItemsCount; i++)
   {
       Button b = new Button();
       b.Left = //Calculate Left
       b.Top = //Calculate Top
       b.Parent = this; 
       //Or
       this.Controls.Add(b);
   } 
```

# android - R.java 导入后文件丢失

> ID：11929221
> 
> 赞同：1
> 
> 时间：2012-08-13T06:34:27.993
> 
> 标签：android, r.java-file

导入项目文件后消失 R.java 我尝试了 Project - Clean, nothing ...

![在此处输入图像描述](../Images/822267d7aaf17d5399ad7e1add2dcab1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T06:35:43.840

是的，如果您的`*.xml`文件有任何错误。该`R.java`文件不会生成。尝试先清除这些错误。之后，清理您的项目并尝试运行。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T06:37:57.273

去打。`Project`_ `Clean`除其他外，这应该重新生成您的 R.java 文件。
或者其中一个 XML 文件可能有任何错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T06:38:26.587

//一旦你导入你的项目。你的库 jar 文件似乎不会被导入。

尝试将这些库从**C:/user/musanin/ 和 D:/java/work_Max 放入项目中**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T06:40:10.157

清除“res”文件夹中的所有错误并清理。它将生成您的 R.java 文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-13T06:41:36.523

这意味着布局或 Manifest 文件（即 XML）上的错误。首先修复它们并清理项目

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-13T06:53:42.693

如果不删除 .xml 文件中存在的错误，您的 R 将不会出现..打开您的 .xml 文件并查看错误是什么..如果它们是错误错误，则只需格式化 .xml 文件 [ctrl+shift+f 这将格式化您的文件] 并保存。然后清理您的项目并再次构建它..您将获得您的 R.java .. :-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-13T06:35:50.880

纠正xml文件中的错误，然后再做

1）清理项目`(or)`

2）重启日食

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-20T02:49:45.977

导入项目后，我丢失了 R 文件。原因是 appcompat 库和我的项目（我的项目有 19 个，而 appcompat 有 21 个）之间的目标 SDK 冲突（在 .manifest 文件中）。

*   将项目的 android:targetSdkVersion 更改为 appcompat 库项目的。
*   清理项目。

你应该很高兴。

# c# - 如何为此 SQL 查询编写 Lambda 表达式？

> ID：11929228
> 
> 赞同：1
> 
> 时间：2012-08-13T06:35:22.653
> 
> 标签：c#, lambda

我有以下`SQL query`

```
 Select cLedgerName,dDateFrom,cPeriodType,nPeriodFrom,nPeriodTo
   from sys_Account_Ledger a,sys_Log_Deposits_Interest_Master b
   where a.cGLCode=b.cGLCode and b.dDateFrom='08-11-2012' and b.cPeriodType='Days' 
```

我想`query`用`Lambda expression`.This 来写这个。这就是我卡住的地方。

```
public IList<ListViewData> GetDepositsListViewData(string glCode, string effectDate, string periodType)
        {
            using (var db = new DataClasses1DataContext())
            {
                var data=db.sys_Account_Ledgers.Join(db.sys_Log_Deposits_Interest_Masters,
                    ledger=>ledger.cGLCode,
                    deposits=>deposits.cGLCode,
                    (ledger,deposits)=>new {db.sys_Account_Ledgers =ledger,db.sys_Log_Deposits_Interest_Masters =deposits}) 
            }
        } 
```

我创建了一个`class`将是我的查询的返回类型。

这里是`class`

```
public class ListViewData
        {
            public string LedgerName { get; set; }
            public string DateFrom { get; set; }
            public string PeriodType { get; set; }
            public int PeriodFrom { get; set; }
            public int PeriodTo { get; set; }
        } 
```

任何人都可以帮我解决`lambda expression`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:42:24.213

```
var result = dataContext.SysAccountLedger
                        .Join(dataContext.SysLogDepositsInterestMaster,
                             a => a.cGlCode,
                             b => b.cGlCode,
                             (a, b) => new ListViewData
                             {
                                 LedgerName = a.LedgerName,
                                 DateFrom = b.DateFrom,
                                 PeriodType = b.PeriodType
                                 // other properties
                             })
                         .Where(item => item.DateFrom = Convert.ToDateTime("08-11-2012") && 
                                            item.PeriodType == "Days")
                         .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:54:16.123

```
//Direct translation into Linq:

    var query = from a in db.sys_Account_Ledger
        join b in db.sys_Log_Deposits_Interest_Master on a.cGLCode equals b.cGLCode
        where b.dDateFrom == Convert.ToDateTime("08-11-2012") && b.cPeriodType == "Days"
        select new { a, b };

//Lambda of this:

var query = db.sys_AccountLedger
    .Join(db.sys_Log_Deposits_Interest_Master, 
        a => a.cGLCode, 
        b => b.cGLCode, 
        (a, b) => new {a , b})
    .Where(w => w.dDateFrom == Convert.ToDateTime("08-11-2012") && w.cPeriodType == "Days"); 
```

# scala - scala风格 - 如何避免有很多嵌套地图

> ID：11929235
> 
> 赞同：14
> 
> 时间：2012-08-13T06:36:19.363
> 
> 标签：scala, styles

在验证几个连续条件时，我经常会得到很多嵌套的 .map 和 .getOrElse

例如：

```
def save() = CORSAction { request =>
  request.body.asJson.map { json =>
    json.asOpt[Feature].map { feature =>
      MaxEntitiyValidator.checkMaxEntitiesFeature(feature).map { rs =>
        feature.save.map { feature => 
          Ok(toJson(feature.update).toString)
        }.getOrElse {
          BadRequest(toJson(
            Error(status = BAD_REQUEST, message = "Error creating feature entity")
          ))
        }
      }.getOrElse {
        BadRequest(toJson(
          Error(status = BAD_REQUEST, message = "You have already reached the limit of feature.")
        )) 
      }
    }.getOrElse {
      BadRequest(toJson(
        Error(status = BAD_REQUEST, message = "Invalid feature entity")
      )) 
    }
  }.getOrElse {
    BadRequest(toJson(
      Error(status = BAD_REQUEST, message = "Expecting JSON data")
    )) 
  }
} 
```

你明白了

我只是想知道是否有一些惯用的方式来保持它更清晰

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T07:18:34.760

如果您不必为 None 案例返回不同的消息，这将是**for comprehension**的理想用例。在您的情况下，您可能希望使用 Validation monad，因为您可以在 Scalaz 中找到它。示例（[http://scalaz.github.com/scalaz/scalaz-2.9.0-1-6.0/doc.sxr/scalaz/Validation.scala.html](http://scalaz.github.com/scalaz/scalaz-2.9.0-1-6.0/doc.sxr/scalaz/Validation.scala.html)）。

**在函数式编程中，你不应该抛出异常，而是让可能失败的函数返回一个 Either[A,B]，按照惯例，A 是失败时的结果类型，B 是成功时的结果类型。**然后，您可以匹配 Left(a) 或 Right(b) 来分别处理这两种情况。

您可以将 Validation monad 视为扩展的 Either[A,B] ，其中将后续函数应用于 Validation 将产生结果，或者执行链中的第一个失败。

```
sealed trait Validation[+E, +A] {
  import Scalaz._

  def map[B](f: A => B): Validation[E, B] = this match {
    case Success(a) => Success(f(a))
    case Failure(e) => Failure(e)
  }

  def foreach[U](f: A => U): Unit = this match {
    case Success(a) => f(a)
    case Failure(e) =>
  }

  def flatMap[EE >: E, B](f: A => Validation[EE, B]): Validation[EE, B] = this match {
    case Success(a) => f(a)
    case Failure(e) => Failure(e)
  }

  def either : Either[E, A] = this match {
    case Success(a) => Right(a)
    case Failure(e) => Left(e)
  }

  def isSuccess : Boolean = this match {
    case Success(_) => true
    case Failure(_) => false
  }

  def isFailure : Boolean = !isSuccess

  def toOption : Option[A] = this match {
    case Success(a) => Some(a)
    case Failure(_) => None
  }

}

final case class Success[E, A](a: A) extends Validation[E, A]
final case class Failure[E, A](e: E) extends Validation[E, A] 
```

您的代码现在可以通过使用 Validation monad 重构为三个验证层。您基本上应该用如下验证替换您的地图：

```
def jsonValidation(request:Request):Validation[BadRequest,String] = request.asJson match {
   case None => Failure(BadRequest(toJson(
      Error(status = BAD_REQUEST, message = "Expecting JSON data")
    )
   case Some(data) => Success(data)
}

def featureValidation(validatedJson:Validation[BadRequest,String]): Validation[BadRequest,Feature] = {
validatedJson.flatMap {
  json=> json.asOpt[Feature] match {
    case Some(feature)=> Success(feature)
    case None => Failure( BadRequest(toJson(
      Error(status = BAD_REQUEST, message = "Invalid feature entity")
        )))
  }
} 
```

}

然后你像下面这样链接它们`featureValidation(jsonValidation(request))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:32:46.353

我试过这个，看看模式匹配是否提供了某种方式来调整提交的代码示例（在风格上，如果不是字面意思的话），以适应更连贯的东西。

```
object MyClass {

  case class Result(val datum: String)
  case class Ok(val _datum: String) extends Result(_datum)
  case class BadRequest(_datum: String) extends Result(_datum)

  case class A {}
  case class B(val a: Option[A])
  case class C(val b: Option[B])
  case class D(val c: Option[C])

  def matcher(op: Option[D]) = {
    (op,
     op.getOrElse(D(None)).c,
     op.getOrElse(D(None)).c.getOrElse(C(None)).b,
     op.getOrElse(D(None)).c.getOrElse(C(None)).b.getOrElse(B(None)).a
    ) match {
      case (Some(d), Some(c), Some(b), Some(a)) => Ok("Woo Hoo!")
      case (Some(d), Some(c), Some(b), None)    => BadRequest("Missing A")
      case (Some(d), Some(c), None,    None)    => BadRequest("Missing B")
      case (Some(d), None,    None,    None)    => BadRequest("Missing C")
      case (None,    None,    None,    None)    => BadRequest("Missing D")
      case _                                    => BadRequest("Egads")
    }
  }
} 
```

显然有一些方法可以更优化地编写它；这留给读者作为练习。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T07:11:43.727

这是使用 monad 可以清理代码的经典示例。例如，您可以使用 Lift's `Box`，它不以`Lift`任何方式绑定。然后您的代码将如下所示：

```
requestBox.flatMap(asJSON).flatMap(asFeature).flatMap(doSomethingWithFeature) 
```

其中`asJson`是从请求到 a的函数`Box[JSON]`，`asFeature`是从 a`Feature`到其他的函数`Box`。盒子可以包含一个值，在这种情况下 flatMap 使用该值调用函数，或者它可以是一个实例，`Failure`在这种情况下`flatMap`不调用传递给它的函数。

如果您发布了一些可编译的示例代码，我本可以发布可编译的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T09:00:29.313

我同意 Edmondo 关于使用理解的建议，但不同意关于使用验证库的部分（至少不再考虑到 2012 年以来添加到 scala 标准库的新功能）。根据我使用 scala 的经验，在使用标准库时努力想出好的声明的开发人员最终也会在使用像猫或 scalaz 这样的库时做同样的事情，甚至更糟糕。也许不在同一个地方，但理想情况下我们会解决问题，而不仅仅是移动它。

这是用理解重写的代码，或者是 scala 标准库的一部分：

```
def save() = CORSAction { request =>

  // Helper to generate the error 
  def badRequest(message: String) = Error(status = BAD_REQUEST, message)

  //Actual validation
  val updateEither = for {
    json    <- request.body.asJson.toRight(badRequest("Expecting JSON data"))
    feature <- json.asOpt[Feature].toRight(badRequest("Invalid feature entity"))
    rs <- MaxEntitiyValidator
           .checkMaxEntitiesFeature(feature)
           .toRight(badRequest("You have already reached the limit"))
  } yield toJson(feature.update).toString

  // Turn the either into an OK/BadRequest
  featureEither match {
    case Right(update) => Ok(update)
    case Left(error)   => BadRequest(toJson(error))
  }
} 
```

## 解释

### 错误处理

我不确定您对此了解多少，但它们在行为上与 Edmondo 提供的 Validation 或 scala 库中的 Try 对象非常相似。这些对象之间的主要区别在于它们的能力和错误行为，但除此之外，它们都可以以相同的方式进行映射和平面映射。

您还可以看到，我使用[toRight](https://www.scala-lang.org/api/2.13.6/scala/Option.html#toRight%5BX%5D(left:=%3EX):Either%5BX,A%5D)立即将选项转换为 Either，而不是在最后执行。我看到 java 开发人员有反射性地在物理上尽可能地抛出异常，但他们这样做主要是因为 try catch 机制很笨拙：如果成功，要从 try 块中获取数据，您要么需要返回它们或将它们放入块中初始化为 null 的变量中。但 scala 并非如此：您可以映射 try 或 any，因此通常情况下，如果您在将结果识别为错误表示后立即将其转换为错误表示，您将获得更清晰的代码，因为它们被识别为不正确。

### 为了理解

我也知道，发现 scala 的开发人员常常对理解感到困惑。这在大多数其他语言中是很容易理解的，因为它仅用于集合的迭代，而 scala 似乎可用于许多不相关的类型。在 scala 中，调用 flatMap 函数实际上是更好的方法。编译器可能会决定使用 map 或 foreach 对其进行优化，但它仍然正确假设您在使用 for 时将获得 flatMap 行为。在集合上调用 flatMap 的行为就像在其他语言中的 for each 一样，因此 scala for 可以像处理集合时的标准一样使用。但是您也可以在任何其他类型的对象上使用它，这些对象提供了具有正确签名的 flatMap 实现。如果你的 OK/BadRequest 也实现了 flatMap，

因为人们对在看起来不像集合的任何东西上使用 for 感到不自在，以下是如果明确使用 flatMap 而不是 for 时函数的外观：

```
def save() = CORSAction { request =>
  def badRequest(message: String) = Error(status = BAD_REQUEST, message)

  val updateEither = request.body.asJson.toRight(badRequest("Expecting JSON data"))
    .flatMap { json =>
      json
        .asOpt[Feature]
        .toRight(badRequest("Invalid feature entity"))
    }
    .flatMap { feature =>
       MaxEntitiyValidator
         .checkMaxEntitiesFeature(feature)
         .map(_ => feature)
         .toRight(badRequest("You have already reached the limit"))
     }
     .map { rs =>
       toJson(feature.update).toString
     }

  featureEither match {
    case Right(update) => Ok(update)
    case Left(error)   => BadRequest(toJson(error))
  }
} 
```

请注意，就参数范围而言，如果函数是嵌套的，而不是链接的，则行为会生效。

### 结论

我认为，除了不使用正确的框架或正确的语言功能之外，您提供的代码的主要问题是如何处理错误。一般来说，你不应该写错误路径，因为你认为你在方法结束时会堆积起来。如果您可以在错误发生时立即处理它们，那么您就可以转移到其他地方。相反，你把它们推回去的次数越多，你就会有越多的代码具有不可分割的嵌套。它们实际上是 scala 期望您在某个时候处理的所有未决错误案例的具体化。

# ios - 将 fb 站点连接到 iOs Fb 应用程序

> ID：11929238
> 
> 赞同：0
> 
> 时间：2012-08-13T06:36:30.613
> 
> 标签：ios, facebook

我对所有 Facebook 应用程序和网站的东西都很陌生。我所拥有的： - 我的帐户中的一个 Facebook 侧 bulid 大约有 50 个赞和一些帖子 - 我的 iOS 应用程序的一个 Facebook 应用程序将在下周震撼 AppStore :-)

我现在意识到，我可以拥有一个 App Site。因此，从应用程序完成的所有帖子都将链接到该站点。

所以最大的问题是：如何将我的应用程序与站点连接起来？

我能看到的唯一方法是从应用程序中生成一个新站点并从零开始。所以请帮助我

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:59:38.420

我必须在这里做一点解释：

我猜“Facebook Side”是指 Facebook 页面——如果我错了，请纠正我。您可以为现有的 Facebook iOS 应用[创建应用详情页面](https://developers.facebook.com/docs/guides/appcenter/#creating)。我想这就是您所说的“应用程序网站”的意思。

> 如何将我的应用程序与网站连接？

您的 Facebook iOS 应用程序将自动连接到应用程序详细信息页面，所以我想您的问题是如何将您的 Facebook 页面连接到您的 Facebook 应用程序，对吧？如果是这种情况，那么您可能还想为现有的 Facebook 应用程序创建一个 Facebook 页面选项卡。这是关于如何完成的 Facebook 教程： [https ://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

# extjs - 如何在 secha touch 2 中存储用户会话

> ID：11929239
> 
> 赞同：1
> 
> 时间：2012-08-13T06:36:30.533
> 
> 标签：extjs, sencha-touch-2

我正在使用 Sencha Touch 2，我有一个登录表单，要求输入用户名和密码，现在我想通过 Session/Cookie 存储用户详细信息，以便用户可以注销，

我浏览了一些我得到的链接

[Sencha-touch：保存登录名/密码（保存会话，多任务）](https://stackoverflow.com/questions/6186269/sencha-touch-save-login-password-save-session-multi-tasks)

但我是一个新手接触开发

使用代码示例的任何帮助对我来说都是非常重要的输入

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:06:25.403

您可以使用 HTML5 localStore 对象。例如，当用户登录并发出您的服务器请求时，在成功的服务器请求的回调中，您可以存储任何必要的数据。这是我的一个应用程序的片段：

```
loginCallback: function(options, success, response) {
        this.mainSplash.setMasked(false);
        var responseOjbect = Ext.JSON.decode(response.responseText);
        if (responseOjbect.success) {
            this.clearLoginStorage(); //runs a function to clear some login storage values
            if (rememberme) {               
                localStorage.setItem("rememberme", 1);              
            } else {
                localStorage.setItem("rememberme", 0);
            }   
            localStorage.setItem("userid", responseOjbect.userid);
            localStorage.setItem("first_name", responseOjbect.first_name);
            localStorage.setItem("last_name", responseOjbect.last_name);
            localStorage.setItem("appsettingone", responseOjbect.appsettingone);
            localStorage.setItem("appsettingtwo", responseOjbect.appsettingtwo);
            localStorage.setItem("setdate",  new Date());

            if (!this.dashboard) {
                Ext.create('myApp.view.Dashboard', {
                    //additional config
                });
            }
            Ext.Viewport.setActiveItem(this.dashboard);
        } else {
            Ext.Msg.alert('Attention', responseOjbect.errorMessage, Ext.emptyFn);
        }
    } 
```

一旦设置了 localStorage 项目，就可以像这样检索或删除它们：

```
localStorage.getItem("user_id"); //retrieve
localStorage.removeItem("userid"); //remove 
```

因此，当您调用注销功能时，请不要删除您要保留的任何 localStorage 对象。然后您可以调用 localStorage.getItem("VALUE") 在下次登录时检索它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:56:30.157

这是由服务器而不是客户端管理的东西，所以你想看，而不是 sencha 本身。

猜测您正在使用 php，对于一些非常基本的东西，请查看： [http ://www.html-form-guide.com/php-form/php-login-form.html](http://www.html-form-guide.com/php-form/php-login-form.html)

# jquery - 安装 django-jqgrid；对 Dojango 的奇怪依赖

> ID：11929240
> 
> 赞同：0
> 
> 时间：2012-08-13T06:36:49.270
> 
> 标签：jquery, django, jqgrid

我应该把 Dojango's 放在哪里[`util/__init__.py`](http://code.google.com/p/dojango/source/browse/trunk/dojango/util/__init__.py)，以便我的代码[`django-jqgrid`](https://github.com/gerry/django-jqgrid)能够正常工作？

另外，JavaScript 最终文件应该是什么样子？对于初学者，我想它会在模板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:18:31.807

[`django-jqgrid`自述](https://github.com/gerry/django-jqgrid)文件有标记问题；`dojango`提到该文件的要点*应该*如下所示：

> *   [`json_encode`](http://code.google.com/p/dojango/source/browse/trunk/dojango/util/__init__.py#97)

因此，您需要`json_encode`从 Dojango 的`util/__init__.py`. 查看显示该[代码`django-jqgrid`](https://github.com/gerry/django-jqgrid/blob/master/jqgrid.py)期望在哪里找到您粘贴的函数的来源：

```
from util.json import json_encode 
```

所以要么下载`__init__.py`到`util`你的应用程序中的一个目录（*即*与 相同的级别`models.py`），要么编辑该行`jqgrid.py`以指向你的`json_encode`函数所在的位置。

希望这可以帮助。

# install4j - 如何在自定义代码或 API 中检查 32 位或 64 位

> ID：11929243
> 
> 赞同：2
> 
> 时间：2012-08-13T06:37:18.787
> 
> 标签：install4j

如何在 Install4j API（自定义代码）中检查 32 位或 64 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:33:21.447

要检查安装程序是在 32 位还是 64 位 Windows 上运行，请使用

```
Util.is64BitWindows() 
```

在 install4j API 中。无论是在 32 位还是 64 位安装程序中调用，这都有效。要检查当前 JVM 是 32 位还是 64 位 JVM，请参见[此处](https://stackoverflow.com/questions/2062020/how-can-i-tell-if-im-running-in-64-bit-jvm-or-32-bit-jvm)

# inversion-of-control - Wicket + Guice，二传手注入不起作用

> ID：11929248
> 
> 赞同：0
> 
> 时间：2012-08-13T06:37:44.840
> 
> 标签：inversion-of-control, wicket, guice, setter

我有以下简单页面：

```
public class Login extends BasePage {
    private UserDao userDao;

    @Inject
    public void setUserDao(UserDao userDao) {
        System.out.println("setUserDao");
        this.userDao = userDao;
    } 
```

Guice 在应用程序中使用以下代码初始化：

```
@Override
protected void init() {
    Module myBatisModule = new XMLMyBatisModule() {
        @Override
        protected void initialize() {
        }
    };

    IbdGuiceModule ibdGuiceModule = new IbdGuiceModule();

    getComponentInstantiationListeners().add(new GuiceComponentInjector(this, myBatisModule, ibdGuiceModule));
} 
```

设置器注入不起作用。setUserDao 方法永远不会被调用，并且 userDao 为空。

如果我将 @Inject 注释移动到该字段，则此方法有效（仍然未调用 setUserDao，但已初始化字段值）。

如何使用setter注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:10:11.117

Wicket 仅支持字段注入。在 Google 中搜索“方法注入被认为有害”以了解详细信息。

# jquery - 在 jquery 中显示页面加载值

> ID：11929252
> 
> 赞同：1
> 
> 时间：2012-08-13T06:38:00.330
> 
> 标签：jquery

我想在页面加载时显示一个值。

我的代码是，

```
$.getJSON("http://***.com/Test/testnew.php", function (data) {
    $.each(data, function (i, sample) {
        var dd = data.sample;
        alert(dd);
        var count = dd,
            pad = '00000';
        $('#support_num').click(function (e) {
            e.preventDefault();
            var ctxt = '' + count;
            $('p').text(pad.substr(0, pad.length - ctxt.length) + ctxt);
        });
    });
}); 
```

此处的值在单击按钮时显示。但我希望它在页面加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:42:51.683

这是在页面加载而不是点击时运行的代码的修改版本：

```
$(document).ready(function() {
    $.getJSON("http://www.sample.com/Test/testnew.php",function(data) {
        $.each(data, function(i, sample) {
            var count = data.sample + "";
            var pad = '00000';
            $('p').text(pad.substr(0, pad.length - count.length) + count);
        });
    });
}); 
```

此代码中没有意义的部分是在`$.each()`循环中多次运行相同的代码。这可能不是你想要的，但我就这样离开了，因为你还没有说它应该如何处理响应中的多条数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:44:54.320

您可以通过将您的功能放在 Document.Ready 中来实现这一点

通过这样做，您的函数将在 DOM 加载时被调用，并且您将收到警报。

```
enter code here
  $(document).ready(function(){
      // Your code goes here.
  }); 
```

# android - Facebook 与 Android 应用程序集成错误

> ID：11929253
> 
> 赞同：0
> 
> 时间：2012-08-13T06:38:03.323
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试将**Facebook ** 集成到我的 android 应用程序中。我想在 **facebook 上实现 **like**和**share ** 设施**。但我收到错误。 ![脸书错误](../Images/f4b906f4326a09006f21368e1b5afaaf.png)

请帮我解决这个问题。

我也想知道**在 Facebook 上创建新应用的过程。**

我正在使用来自**GitHub**的代码。我的代码是 -

```
public class MyGreatActivity extends Activity {

    Facebook facebook = new Facebook("333778590046892");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        facebook.authorize(this, new String[] { "offline_access", "publish_stream", "raj21kadam@gmail.com" },
new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
             String token=facebook.getAccessToken();  //get access token
//             Toast.makeText(this, "token", Toast.LENGTH_LONG).
                save(token);
            }

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    private void save(String token){
     Toast.makeText(this, "token"+token, Toast.LENGTH_LONG).show();
     SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
     prefs.edit().putString("Token", token).commit();
     }
} 
```

运行上述代码时出现以下错误 -

```
Dialog Errorcom.facebook.android.DialogError: The connection to the server was unsuccessful. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:01:13.877

试试这个[使用 Android Native Client For Facebook 的单点登录 (SSO)](http://facebooksso.blogspot.in/)。粘贴这个

```
facebook.authorize(this, new DialogListener() {

@Override
        public void onComplete(Bundle values) {
         String token=facebook.getAccessToken();  //get access token
//             Toast.makeText(this, "token", Toast.LENGTH_LONG).
            save(token);
        }

        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
    });
} 
```

而不是这个

```
facebook.authorize(this, new String[] { "offline_access", "publish_stream",   "raj21kadam@gmail.com" },
new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
         String token=facebook.getAccessToken();  //get access token

        }

        @Override
        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
    });
} 
```

# internet-explorer-9 - 使用 WP Minify wordpress 插件时，网站无法在 IE9 中加载

> ID：11929255
> 
> 赞同：1
> 
> 时间：2012-08-13T06:38:11.597
> 
> 标签：internet-explorer-9, wordpress

我上周开始使用 WP Minify，它在除 IE9 之外的所有其他浏览器中都能完美运行。

在 IE9 中，只有后台加载，没有其他内容。我可以查看源代码，看起来一切正常，但它只是一个完全空白的屏幕。

我试过 WP Minify 只单独缩小 JS、CSS 和 HTML，但所有三个设置都有相同的问题。

任何想法为什么会这样？我的网站是[http://www.onedirection.net](http://www.onedirection.net)。

我暂时禁用了插件。

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:59:39.223

对的，我已经解决了。

这与我的代码中 js 文件的顺序有关，尤其是 jQuery，但也是一个 prettyPhoto 参考。

稍微移动一些代码，一切都已排序！

所以 WP Super Cache 现在可以与 WP Minify 一起正常工作。

# android - Android中的WebView加载Mht文件

> ID：11929258
> 
> 赞同：1
> 
> 时间：2012-08-13T06:38:14.793
> 
> 标签：android, webview, mhtml

我在 android 资产文件夹中有 mht 文件，我想在 webview 中加载，但是当我启动应用程序时，它会显示一些废品数据，所以请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:43:30.387

你不能直接这样做......但是这里提到了一种解决方法[。](https://stackoverflow.com/questions/11556059/display-mht-file-on-android)希望它有帮助..

# c++ - 为什么这个呼叫操作员有编译错误？

> ID：11929262
> 
> 赞同：1
> 
> 时间：2012-08-13T06:38:31.390
> 
> 标签：c++, compiler-errors, operator-overloading

使用mingw32-g++编译时，出现错误：没有匹配函数调用'for_each(int [9], int*, main()::Output)'，但是在vs2005中可以做的很好吗？

```
#include <iostream>
#include <algorithm>

int main() {

  struct Output {
      void  operator () (int v) {
           std::cout << v << std::endl; 
       }
  };

  int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
  std::for_each(a, a + sizeof(a)/sizeof(a[0]), Output());

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:44:56.217

在 C++11 之前的版本中，用作模板参数的语言类型必须具有链接。C++ 中的局部类声明没有链接，这就是为什么它们不能用作 C++98/C++03 中的模板参数的原因。在这些版本的语言中，您必须在命名空间范围内声明您的类。

在 C++11 中删除了链接要求。从 C++11 的角度来看，您的代码是有效的。显然，您正在 C++11 之前的模式下编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T06:43:53.650

您必须声明`struct`main 的外部。请参阅[此问题](https://stackoverflow.com/questions/742607/using-local-classes-with-stl-algorithms)以获取解释。

# android - 使用四个选项触发 Intent 发送电子邮件

> ID：11929265
> 
> 赞同：0
> 
> 时间：2012-08-13T06:38:38.503
> 
> 标签：android

我编写了一个代码来触发`Intent`发送电子邮件。

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/png");
intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
intent.putExtra(Intent.EXTRA_STREAM, imageUri);

startActivity(Intent.createChooser(intent, getResources().getString(R.string.share_title_text))); 
```

但是，当它`Intent`被触发时，我会在列表中看到许多项目，例如蓝牙、Gmail 应用程序、Facebook 应用程序等。

如何过滤此列表并仅显示这四个项目： **Gmail、EverNote、Twitter 和 Facebook。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:52:33.250

您无法控制应用列表，实际上每个注册 Intent 的应用`android.content.Intent.ACTION_SEND`都会显示在此列表中

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中用于多个文件上传的 ViewModel

> ID：11929272
> 
> 赞同：2
> 
> 时间：2012-08-13T06:39:11.250
> 
> 标签：asp.net-mvc-3, file-upload, asp.net-mvc-viewmodel

我有多个文件上传`Views`，`ViewModel`绑定如下：

```
@model IVRControlPanel.Models.UploadNewsModel
  @using (Html.BeginForm("index", "NewsUpload", FormMethod.Post, new { name = "form1", @id = "form1" }))
        {
            @Html.ValidationSummary(true)

            <div class="field fullwidth">
                <label for="text-input-normal">
                    @Html.Label("Select Active Date Time")</label>
                <input type="text" id="active" value="@DateTime.Now" />
                 @Html.ValidationMessageFor(model => model.ActiveDateTime)
            </div>

            <div class="field fullwidth">
                <label>
                    @Html.Label("Select Language")
                </label>
                @Html.DropDownList("Language", (SelectList)ViewBag.lang)
            </div>

            <div class="field">
                <label>
                    @Html.Label("General News")
                </label>
               @Html.TextBoxFor(model => model.generalnews, new { name = "files", @class="custom-file-input", type = "file" })
                @Html.ValidationMessageFor(model => model.generalnews)
            </div>
            <div class="field">
                <label>
                    @Html.Label("Sports News")
                </label>
               @Html.TextBoxFor(model => model.sportsnews, new { name = "files", @class = "custom-file-input", type = "file" })
                @Html.ValidationMessageFor(model => model.sportsnews)
            </div>         
            <div class="field">
                <label>
                    @Html.Label("Business News")
                </label>
               @Html.TextBoxFor(model => model.businessnews, new { name = "files", @class = "custom-file-input", type = "file" })
                @Html.ValidationMessageFor(model => model.businessnews)
            </div>            
            <div class="field">
                <label>
                    @Html.Label("International News")
                </label>
               @Html.TextBoxFor(model => model.internationalnews, new { name = "files", @class = "custom-file-input", type = "file" })
                @Html.ValidationMessageFor(model => model.internationalnews)
            </div>    
             <div class="field">
                <label>
                    @Html.Label("Entertaintment News")
                </label>
               @Html.TextBoxFor(model => model.entertaintmentnews, new { name = "files", @class = "custom-file-input", type = "file" })
                @Html.ValidationMessageFor(model => model.entertaintmentnews)
            </div>          

             <footer class="pane">
                <input type="submit" class="bt blue" value="Submit" />
            </footer>                              
        } 
```

带有数据注释的视图模型，用于验证允许扩展的文件上传，如下所示：

```
 public class UploadNewsModel
{
    public DateTime ActiveDateTime { get; set; }

   // public IEnumerable<SelectListItem> Language { get; set; }

    [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf", ".wav" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
    public HttpPostedFileBase files { get; set; }

} 
```

**控制器：**用于保存多个文件并在存在错误时返回视图

```
 [HttpPost]
            public ActionResult Index(UploadNewsModel news, IEnumerable<HttpPostedFileBase> files)
            {
                if (ModelState.IsValid)
                {
                    foreach (var file in files)
                    {
                        if (file != null && file.ContentLength > 0)
                        {
                            var fileName = Path.GetFileName(file.FileName);
                            var serverpath = Server.MapPath("~/App_Data/uploads/News");
                            var path = Path.Combine(serverpath, fileName);
                            if (!Directory.Exists(serverpath))
                            {
                                Directory.CreateDirectory(serverpath);
                            }

                            file.SaveAs(path);
                        }

                    }
                }
                return View(news);
            }

        } 
```

**问题说明** 如何为这五个文件上传输入控件定义视图模型，以便在不允许上传文件的文件扩展名类型时显示相应的错误以显示相应的验证错误。对于所有五个文件上传控件，我只有一个视图模型项。

**为那些显示各自验证错误的多个文件上传控件定义视图模型的最佳方法是什么，而不是用户尝试上传不允许扩展名的文件？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:00:33.197

这里真正的问题是 MVC 没有合适的 http 文件模型绑定器。

因此，除非您使用像 mvc futures 这样的项目，它对文件上传有一些额外的支持，否则您将不得不自己做一些肮脏的工作。

这是一个可能更适合您的示例。

**首先，我将创建一个 ViewModel 来表示一个文件，如下所示：**

```
public class FileViewModel
{  
    public Guid Id { get; set; }
    public string Name { get; set; }
    public bool Delete { get; set; }
    public string ExistingUrl { get; set; }

    public HttpPostedFileBase FileBase { get; set; }
} 
```

显然属性取决于您的要求，重要的是 FileBase 并且它是它自己的模型。

**接下来，您的页面的 ViewModel（在您的情况下为 UploadNewsModel）：**

```
public class IndexViewModel
{ 
    public IList<FileViewModel> Files { get; set; }
} 
```

这里重要的一点是文件的 IList，这就是我们捕获多个文件的方式（在您当前使用 'file' 的实现中，您只捕获一个。

**进入页面级视图：**

```
@model IndexViewModel
<form method="post" action="@Url.Action("Index")" enctype="multipart/form-data">
@Html.ValidationSummary(true)
@Html.EditorFor(x => x.Files)
<input type="submit" value="Submit" />
</form> 
```

注意**EditorFor**，我们接下来要做的是为*FileViewModel创建一个**EditorTemplate* ，此时应该使用它。

 ***像这样：**

```
@model FileViewModel

<h4>@Model.Name</h4>
@Html.HiddenFor(x => x.Id)
@Html.CheckBoxFor(x => x.Delete)

<input @( "name=" + ViewData.TemplateInfo.HtmlFieldPrefix + ".FileBase") type="file" /> 
```

注意*ViewData.TemplateInfo.HtmlFieldPrefix*的使用，它有点糟糕，但就像我说的那样，这是因为文件输入类型的 mvc 支持很差。我们必须自己做。我们将每个文件的名称除外，例如“[0].FileBase”等。

这将在 POST 操作中正确填充*FileViewModel 。*

到目前为止一切顺利，验证呢？

好吧，您可以在服务器上手动执行此操作。自己测试文件扩展名，然后简单地使用以下内容将错误添加到模型中，例如：

```
ModelState.AddModelError("","Invalid extension.") 
```

*另一方面，扩展验证应该在客户端（以及服务器端）完成**

# php - Header() 函数无法正常工作

> ID：11929273
> 
> 赞同：0
> 
> 时间：2012-08-13T06:39:12.593
> 
> 标签：php, mysql

每当 verifyUser 返回 true 时，应该执行 if 语句，但由于某种原因而不是转到标题位置，页面只是刷新，这就是所发生的一切。我已检查以确保输入信息正确无误，并且当信息不正确时，else 语句执行得非常好。如果有人对为什么会发生这种情况有任何想法，请告诉我。谢谢你。

这是生成 header() 语句的段：

```
function validateUser($name, $pass)
{
    $check = verifyUser($name, md5($pass));

    if($check)
    {
        $_SESSION['status'] = 'authorized';

        header('location: index.php');

    } else{

        echo'Please enter a correct username and password <br />';
        echo "<a href='http://localhost/cms/admin/login.php'>Try Again?</a>";
        exit;
    }

 } 
```

这是 verifyUser 函数，以防万一有人需要它。

```
 function verifyUser($name, $pass)
   {
// Escape strings
$username = mysql_real_escape_string($name);
 $password = mysql_real_escape_string($pass);

$result = mysql_query("select * from users where username='$username' and password='$password' limit 1");

if (mysql_num_rows($result)>0)
{
    return true;
} else{
    return false;
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:45:09.263

尝试使用“url”而不是“位置”：

```
header("refresh:1;url=index.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:53:52.757

您可以将此行放在项目的第一行（实际上是在发送任何输出之前），否则`header`在发送任何输出（例如 html 代码或 echo print 等）后功能将永远无法工作；

```
ob_start(); 
```

或者，在发送新标头之前检查是否已发送标头；

```
if(!headers_send()){
   header("header params...");
} else {
   echo "<script>window.location.href="index.php"</script>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:54:43.227

检查以确保`$_SESSION['status'] = 'authorized';`已定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T06:55:19.957

`header()`不起作用的最常见原因是因为首先输出了其他内容。`header()`只能在其他任何东西将输出发送到浏览器之前调用。

`header()`如果是这种情况，PHP 将在调用时抛出错误。如果您没有在页面上显示错误，您可以检查错误日志以查看是否发生这种情况。

您还应该在调用之后立即（`die()`或`exit()`之后尽快）调用或`header()`调用，以防止在重定向标头之后发生任何其他事情。`header()`即使在初始调用成功的情况下，程序中稍后的某些内容也可能导致重定向失败，这是不太可能但可能的。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-08-13T06:42:44.367

在 mysql 查询中，在变量名上使用引号，如下所示：

`mysql_query("select * from users where username="'".$username."'" and password="'".$password."'" limit 1");`

# python - 为什么 IPv6 不像 IPv4 那样显示客户端 IP 名称？

> ID：11929274
> 
> 赞同：-5
> 
> 时间：2012-08-13T06:39:15.150
> 
> 标签：python, ipv6

您好很抱歉打扰各位了。但我在杂志上读到了一些关于将代码移植到 IPV6 的内容，所以我尝试更改此代码（socket.AF_INET6、socket.SOCK_STREAM）

在 python 中它可以工作，但问题是服务器不显示客户端 ip。

我希望它会像这样显示。从（'127.0.0.1'，59815）获得连接。

但是对于它，它搞砸了所有事情并给了我这个（从 ('::1', 59815, 0, 0) 获得连接），所以如果我问这里是客户端 IP 吗？最后两个零（0, 0）到底是什么意思？我应该怎么做才能将我的代码移植到 IPv6。感谢我正在使用 python(geany)

所以如果我这样做（socket.socket（socket.AF_INET6，socket.SOCK_STREAM））我会把我的代码放到IPV6上吗，还有其他我需要做的事情吗谢谢）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T08:45:39.007

`::1`是 localhost 的 IPv6 地址，就像 localhost`127.0.0.1`的 IPv4 地址一样。所以您*看到*的是客户端的 IPv6 地址。

套接字地址中的字段记录在[Python`socket`文档](http://docs.python.org/library/socket.html)中。他们是：

*   主持人
*   港口
*   流量信息
*   范围标识

Flowinfo 和 scope-id 是 IPv6 的新内容。[Flowinfo 包含在RFC 6437](https://www.rfc-editor.org/rfc/rfc6437)中指定的流标签。如果您不知道如何使用它，您可以放心地将其留在`0`. 当一个地址在多个范围内有效时，使用范围 ID。例如， IPv6[链路本地地址](http://en.wikipedia.org/wiki/Link-local_address)在每个 IPv6 接口上都有效，但不可能将它们从一个接口路由到另一个接口。因此，如果您想与本地链接地址进行通信，您必须指定要使用的接口。scope-id 是接口的编号。

将代码移植到 IPv6 时，您必须考虑一些事情。您已经更改的套接字处理。您还应该查看名称解析并使用同时支持 IPv4 和 IPv6 的函数（即不要使用[gethostbyname()](http://docs.python.org/library/socket.html#socket.gethostbyname)而是使用[getaddrinfo()](http://docs.python.org/library/socket.html#socket.getaddrinfo)等）并且不要忘记在存储 IP 地址时分配足够的空间。IPv6 地址比 IPv4 地址占用更多空间。

PS：[IPy](http://pypi.python.org/pypi/IPy/)库提供了非常有用的类来处理 IP 地址。

# iphone - 如何在没有背景的情况下捕获画布绘制的签名？

> ID：11929275
> 
> 赞同：0
> 
> 时间：2012-08-13T06:39:20.613
> 
> 标签：iphone, objective-c, canvas, signature

现在我将画布上绘制的签名保存为图像，但是一旦我在 UIImageView 中显示图像，也会显示白色背景。我不想用白色背景显示它，我只想显示签名。我怎样才能做到这一点？

这是一段用于保存的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"MyFolder"];
NSError *error = nil;
if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; 

CGSize size = self.view.bounds.size;  
CGRect cropRect = CGRectMake(10, 50, 640, 300);

/* Get the entire on screen map as Image */
UIGraphicsBeginImageContext(size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * Image1 = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();   

/* Crop the desired region */
CGImageRef imageRef = CGImageCreateWithImageInRect(Image1.CGImage, cropRect);
UIImage * cropImage = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);   

UIGraphicsEndImageContext(); 

canvasImage.image = cropImage;

//for saving image to documents directory
NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory1 = [paths1 objectAtIndex:0];
NSString *savedImagePath1 = [documentsDirectory1 stringByAppendingPathComponent:@"MyFolder/signatureImage.png"];
UIImage *image = canvasImage.image; // imageView is my image from camera
NSData *imageData = UIImagePNGRepresentation(cropImage);
[imageData writeToFile:savedImagePath1 atomically:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:16:15.257

1.  考虑您有一个 UIImageView 供您绘制。
2.  打开您想要的图像编辑器，并制作一张图像：它必须是全白且 99% 透明的。

为什么：你将把这个图像给你的 UIImageView，如果它是 100% 透明的，那么图形上下文将很难使用它。

所以你制作一个白色的图像，假设 99.9% 透明，所以用户的眼睛会看到一个透明的图像，但 Objective C 会看到一个“正常”的图像。

现在，这就是我绘制签名的方式：

声明 ivars：

```
UIImageView image_signature;
CGPoint lastP; 
```

然后：

```
//___________________________________________________
-(void)drawLineFromX:(float)x fromY:(float)y toX:(float)xx toY:(float)yy{
    UIGraphicsBeginImageContext(image_signature.image.size);
    [image_signature.image drawInRect:CGRectMake(0, 0, image_signature.image.size.width, image_signature.image.size.height)]; 
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), x, y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), xx, yy);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    [image_signature setImage:UIGraphicsGetImageFromCurrentImageContext()];
    UIGraphicsEndImageContext();
}
//___________________________________________________
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    lastP = [touch locationInView:self.view];
    [button_authorize setEnabled:YES];

}
//___________________________________________________
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint nextP = [touch locationInView:image_signature];
    [self drawLineFromX:lastP.x fromY:lastP.y toX:nextP.x toY:nextP.y];
    lastP = nextP;
}
//___________________________________________________
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint nextP = [touch locationInView:image_signature];
    //and this will allow you to draw a point, you know, some people
    //use dots in their signatures        
    [self drawLineFromX:lastP.x fromY:lastP.y toX:nextP.x toY:nextP.y];
    lastP = nextP;
} 
```

并清除签名（所有你画的），只需再次将 99% 白色透明图像加载到“image_signature”imageView

# javascript - 如何控制 fitBounds 是否会改变边界？

> ID：11929280
> 
> 赞同：1
> 
> 时间：2012-08-13T06:39:53.293
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用谷歌地图 api v3。我需要捕捉`idle`地图上的所有事件，但是当我通过代码更改边界或缩放时我不想看到它们。`fitBounds`使用方法时存在我的问题。我正在使用一个标志来决定一个事件是因为我还是因为用户而创建的。当我使用 fitBounds 时，如果边界发生变化，它会被触发，但有时边界不会改变并且事件不会被触发，因此标志工作错误。它会导致脚本忽略用户的下一个事件。这是我的代码：

```
var flag = false;

google.maps.event.addListener(map, 'idle', function() {
    if(flag) {
        // ignore this event
    } else {
        // do some work
    }
    flag = false;
});

function fitBounds() {
    var bounds = new google.maps.LatLngBounds();
    for(var i=0; i<markers.length; i++) {
        var location = markers[i].getPosition();
        bounds.extend(location);
    }

    // I need something like whether bounds will change or not after fitBounds?
    flag = true;
    map.fitBounds(bounds);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:14:23.260

您在错误的位置将标志重置为 false。试试这个：

```
google.maps.event.addListener(map, 'idle', function() {
   if(flag) {
         // ignore this event
          flag = false; // reset to false here
          return;
   } 
   else {
     // do some work
   }
});

function fitBounds() {
        flag = true;
    // rest of the function....
} 
```

除此之外，将侦听器附加到**bounds_changed**而不是**idle**事件可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:51:05.213

我不确定它是否会像 api 一样工作，有时在计算边界时会考虑控制（在地图的两侧），有时不会，但我认为值得一试：

```
if (!map.getBounds().contains(bounds.getNorthEast()) ||
    !map.getBounds().contains(bounds.getSouthWest()))
{
    flag = true;
    map.fitBounds(bounds);
} 
```

# ms-word - 如何创建动态表（Word、Dynamics CRM）来提供给客户？

> ID：11929290
> 
> 赞同：0
> 
> 时间：2012-08-13T06:40:55.993
> 
> 标签：ms-word, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我必须设计从报价到客户的动态创建表。在提供可变数量的产品中，因此我的表必须动态创建包含产品的行。

例如：当报价包含 3 个产品时，表格必须有 3 行包含此产品。当报价包含 2 个产品时，该表必须有 2 行包含此产品。

我只能做一个静态行数的表。当我创建有 2 行的表时，我必须只添加两个产品，因为两个以上的产品将不可见。

我可以在 Word 中做类似的事情并在 CRM Online 中用作模板吗？不用编程也能做到吗？或者我必须使用一些自定义解决方案并添加到 CRM？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:00:23.330

如果我错了，请纠正我，但听起来你有：

1.  两个实体 - 报价和产品
2.  报价可以是许多产品 - 通过关系链接，可能是多对多。

我认为您将无法使用模板，因为据我所知，它们不允许您从关系中获取数据。

我认为在这种情况下，最可行的解决方案将是基于 Fetch-Xml（由于 Crm Online）的 SSRS 报告（因此您可以拥有自定义布局），如下所述：http: [//msdn.microsoft.com/en-us /图书馆/gg328302.aspx](http://msdn.microsoft.com/en-us/library/gg328302.aspx)

然后用户只需要针对特定​​的报价运行报告、保存、打印和发送。

# google-app-engine - 禁用数据存储写入后，如何启动 Mapreduce 作业？

> ID：11929295
> 
> 赞同：2
> 
> 时间：2012-08-13T06:41:24.120
> 
> 标签：google-app-engine, app-engine-ndb

我正在尝试使用 Mapreduce 库在实时 App Engine 应用程序上进行数据存储架构迁移。

我的映射器使用 DatastoreKeyInputReader。每个映射操作都使用我的旧模式获取旧实体，进行一些数据操作，然后在新模式下写入新实体（使用新种类）。我使用 NDB 以事务方式获取和放置实体，事务选项“force_writes”设置为 True。

由于该应用程序处于活动状态，因此我想在迁移期间阻止所有其他数据存储写入，但映射器的事务性写入除外。不幸的是，虽然在禁用写入的应用程序中将 force_writes 设置为 True 时单个映射操作可以正确运行，但我实际上无法启动 Mapreduce 作业 - 它会触发 CapabilityDisabledError，因为 Mapreduce 库本身并未在其自己的簿记中使用 force_writes的职位。

一个明显的技巧可能是在启用写入的情况下启动作业，然后在作业开始后快速禁用它们。但是，这对我来说似乎很冒险，尤其是因为我的应用程序在正常情况下每秒会进行多次写入。另外，一旦作业结束，它可能会中断，除非及时重新启用写入以进行清理。

那么，当我还需要禁用数据存储写入时，如何启动 Mapreduce 作业？似乎最干净的事情是 mapreduce.yaml 支持作业的 force_writes 选项......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:12:51.407

mapreduce 进程将运行多长时间？如果这不是一个非常长的过程（即不是 3 天或其他时间），您可能希望简单地添加一个默认处理程序，将所有流量路由到您的站点到静态 HTML 维护页面，然后运行 ​​mapreduce 作业。完成后，您可以在删除默认处理程序的情况下重新部署。

# windows - 查看 PostgreSQL 卸载过程是否完成

> ID：11929297
> 
> 赞同：0
> 
> 时间：2012-08-13T06:41:35.100
> 
> 标签：windows, uninstallation

我正在工作的软件使用 PostreSQL 9.0 作为数据库（`postgresql-9.0.2-1-windows.exe`）。我们有一个用于安装 PostgreSQL 9.0 和静默卸载 PostgreSQL 的安装程序。因为`installation`我们使用这个命令

```
 C:\Program Files\PostgreSQL\9.0\uninstall-postgresql.exe --mode unattended 
```

有没有办法知道启动的过程`uninstallation`已经完成？

在我的系统上，启动的过程是**uninstall-postgresql.exe**，然后是**_uninstall2660**。

在[谷歌](https://www.google.co.in/search?q=_unistall2660&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=NsU&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&q=postgres%20_uninstall2660&oq=postgres%20_uninstall2660&gs_l=serp.12...10739.12043.4.13189.2.2.0.0.0.0.165.294.0j2.2.0...0.0...1c.uhkfzSUnBSE&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=5831ff9f2faa6ac6&biw=1366&bih=607)上都没有**_uninstall2660**的迹象。

检查是否`uninstall-postgresql.exe`被删除是一种好方法吗？

如何正确知道 PostgreSQL 安装是否确实完成了？

# c# - 如何将设置文件保存到 Visual Studio 中的已发布文件夹？

> ID：11929303
> 
> 赞同：0
> 
> 时间：2012-08-13T06:41:47.977
> 
> 标签：c#, visual-studio-2010

我在 VS 10.0 中构建了一个小型 C# windows 应用程序。我想使用已发布的 exe 文件从其他托管应用程序中调用。在设置中我添加了一个连接字符串，并且我希望设置文件也被释放，以便当我更改连接字符串（例如指向测试数据库）时，发布的应用程序将做出相应的响应。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:06:09.637

如果我理解正确，你需要这个：

```
string conn = Properties.Settings.Default.Connection_String; 
```

只需将 Connection_String 替换为您设置的名称即可。

# c# - 正则表达式查找和替换文本

> ID：11929305
> 
> 赞同：0
> 
> 时间：2012-08-13T06:42:08.877
> 
> 标签：c#, regex, winforms

我有一个字符串变量，以下是它的内容：

> .....
> DataElement deAbtVersionNum
> m_AttrParent commercialcardsys::CommercialCardInt
> m_AttrGUIFieldLabel "WEX_CI 3.02.01P20.1" appsys30::lngDbb
> m_AttrdbType "char"
> .....

正如 ... 所示，可能还有其他文本。

在第三行中，我们有“WEX_CI 3.02.01P20.1”（这是从底部开始唯一存在 WEX.. 的地方。）

我需要用新版本替换 3.02.01P20.1（完全），比如 3.02.01P20.1.NEW

我已经能够使用一种肮脏的方法来做到这一点，该方法查找“Wex 然后找到下一个”的索引，等等。

```
 int start = CItext.LastIndexOf("\"WEX") + 1;
                int end = CItext.IndexOf("\"", start);
                string text = CItext.Substring(start, end - start + 1);

                string[] parts = text.Split(new Char[] { ' ' });
                string editedText = parts[0] + " " + LabelName;
                CItext = CItext.Replace(text, editedText); 
```

CIText 是我必须编辑的字符串。LabelName 是我要放置的字符串，而不是 3.02.01P20.1

谁能建议我任何其他清洁方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:12:23.190

我认为您可以使用带有“前瞻”的正则表达式。试试这个。

```
var result = Regex.Replace(text, "(?<=WEX_CI )[^\"]+", "NEW", RegexOptions.Multiline); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:04:52.753

试试这个正则表达式

```
var result =   Regex.Replace(text,@"(WEX_CI[\s][\da-zA-Z\.]+)","$1.NEW"); 
```

# sql - TeraData 聚合函数

> ID：11929307
> 
> 赞同：2
> 
> 时间：2012-08-13T06:42:33.153
> 
> 标签：sql, aggregate, teradata

当我尝试使用计数选择几列时，出现以下错误：

> 选定的非聚合值必须是关联组的一部分

我的查询是这样的。

```
SELECT COUNT(1), COLUMN1, COLUMN2 
FROM TABLE-NAME 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:19:19.077

如果您要计算 COLUMN1 和 COLUMN2 的每个组合：

```
SELECT COUNT(1), COLUMN1, COLUMN2 FROM TABLE_NAME GROUP BY COLUMN1, COLUMN2 
```

如果您要计算表中的所有记录：

```
SELECT COUNT(1) OVER (), COLUMN1, COLUMN2 FROM TABLE_NAME 
```

# google-app-engine - 应用程序在 IE 9 下无法运行

> ID：11929308
> 
> 赞同：1
> 
> 时间：2012-08-13T06:42:36.570
> 
> 标签：google-app-engine, gwt

我在 GAE (Java) 上成功部署了我的应用程序，并且在 MacOS X 下的 Chrome（和其他）下按预期工作。今天在工作中我想在 IE 9.0.8 / Vista 上测试我的应用程序，但应用程序不会加载。我的应用程序在页面上显示“正在加载”消息，直到 UI 的所有对象都加载完毕。当我加载 UI 时，我还使用 RPC 获取一些数据。工作完成后，加载消息消失，我的应用程序出现。由于我在应用引擎日志中没有看到任何错误或异常/没有什么特别之处，我该如何开始查找错误？我看到的唯一区别是，在工作中，我的电脑通过许多防火墙和代理上网，但我可以打开页面并登录，这应该不是问题。但无论如何，就在我登录（使用谷歌帐户，而不是 openID）后，应用程序“挂起”。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:13:08.940

您应该首先[检查 IE9](http://www.sitepoint.com/debug-faster-with-f12-developer-tools-in-internet-explorer-9/#fbid=3BUv1RR4dAp?one)中的网络连接，看看是否一切都按预期加载。另请参阅[IE9 的 GWT 技巧](https://developers.google.com/web-toolkit/doc/2.4/DevGuideIE9)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:59:29.430

尝试在开发模式下运行您的 GWT 应用程序，这样您应该能够在 GWT 控制台中看到客户端错误。客户端错误消息不会在 Web 模式下显示，除非您实现了处理它们的代码。

# cocoa - 带有渐变填充的 NSView？

> ID：11929310
> 
> 赞同：6
> 
> 时间：2012-08-13T06:42:49.880
> 
> 标签：cocoa

我正在尝试用渐变填充 NSView。当窗口在背景中时，渐变应该具有较浅的颜色以匹配窗口的其余部分。下面的代码有很多人工制品：当第一次绘制窗口时，它是用背景颜色绘制的。调整窗口大小时，将使用前景色。当窗口移到后面时，背景颜色没有按预期使用。我不应该为这个任务使用 isKeyWindow 吗？

```
- (void)drawRect:(NSRect)dirtyRect {

    if ([[self window] isKeyWindow]) {

        NSColor *startingColor = [NSColor colorWithCalibratedWhite:0.8 alpha:1.0];
        NSColor *endingColor = [NSColor colorWithCalibratedWhite:0.6 alpha:1.0];
        NSGradient* aGradient = [[NSGradient alloc]
                             initWithStartingColor:startingColor
                             endingColor:endingColor];
        [aGradient drawInRect:[self bounds] angle:270];

    } else {
        NSColor *startingColor = [NSColor colorWithCalibratedWhite:0.9 alpha:1.0];
        NSColor *endingColor = [NSColor colorWithCalibratedWhite:0.8 alpha:1.0];
        NSGradient* aGradient = [[NSGradient alloc]
                             initWithStartingColor:startingColor
                             endingColor:endingColor];
        [aGradient drawInRect:[self bounds] angle:270];
    }
    [super drawRect:dirtyRect];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:05:14.360

我认为您看到的行为是因为窗口不一定会在获得或失去关键状态时重新绘制。当它成为或退出密钥时，我会尝试在窗口上强制更新。就像是：

```
- (void) viewDidMoveToWindow
{
    if( [self window] == nil ) {
        [[NSNotificationCenter defaultCenter] removeObserver:self];
    }
    else {
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(forceUpdate)
                                                     name:NSWindowDidResignKeyNotification
                                                   object:[self window]];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(forceUpdate)
                                                     name:NSWindowDidBecomeKeyNotification
                                                   object:[self window]];
    }
}

- (void) forceUpdate
{
    [self setNeedsDisplay:YES];
} 
```

# c++ - 如果未实现，则为抽象类类型分配对象，如果声明和定义则缺少 vtable 错误

> ID：11929319
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:43:43.867
> 
> 标签：c++, vtable

我必须继承一个具有 5 个虚函数的抽象基类。如果我不实现这 5 个函数，我会得到“如果未实现，则为抽象类类型分配对象”。

当我在派生类中声明和实现时，我得到“体系结构 i386 的未定义符号：“debugDrawer 的 vtable”，引用自：debugDrawer.o 中的 debugDrawer::debugDrawer() 注意：丢失的 vtable 通常意味着第一个非内联虚拟成员函数没有定义。”

子弹物理库中的 btIDebugDraw 类基类如下

```
class   btIDebugDraw
{
virtual void    drawContactPoint(const btVector3& PointOnB,const btVector3&    normalOnB,btScalar distance,int lifeTime,const btVector3& color)=0;

virtual void    reportErrorWarning(const char* warningString) = 0;

virtual void    draw3dText(const btVector3& location,const char* textString) = 0;

virtual void    setDebugMode(int debugMode) =0;

virtual int     getDebugMode() const = 0;

virtual void drawAabb(const btVector3& from,const btVector3& to,const btVector3& color)
} 
```

派生类 debugDrawer.h

```
class debugDrawer : public btIDebugDraw{
public:
debugDrawer();
void    drawContactPoint(const btVector3& PointOnB,const btVector3& normalOnB,btScalar   distance,int lifeTime,const btVector3& color);    
void    reportErrorWarning(const char* warningString);    
void    draw3dText(const btVector3& location,const char* textString);
void    setDebugMode(int debugMode);    
int     getDebugMode() const;    
void drawAabb(const btVector3& from,const btVector3& to,const btVector3& color);

void  drawLine(const btVector3& from,const btVector3& to,const btVector3& color);
}; 
```

派生类 debugDrawer.mm 文件（我使用的是目标 c，所以它的 .mm 文件）

```
debugDrawer::debugDrawer(){

}

void debugDrawer::drawLine(const btVector3& from,const btVector3& to,const btVector3& color)
{
    float tmp[ 6 ] = { from.getX(), from.getY(), from.getZ(),
        to.getX(), to.getY(), to.getZ() };        
    glPushMatrix();
    {         
        glColor4f(color.getX(), color.getY(), color.getZ(), 1.0f);         
        glVertexPointer( 3,
                        GL_FLOAT,
                        0,
                        &tmp );

        glPointSize( 5.0f );
        glDrawArrays( GL_POINTS, 0, 2 );
        glDrawArrays( GL_LINES, 0, 2 );
    }
    glPopMatrix();      

    }

void drawContactPoint(const btVector3& PointOnB,const btVector3& normalOnB,btScalar distance,int lifeTime,const btVector3& color){

}
void    reportErrorWarning(const char* warningString) {

}
void draw3dText(const btVector3& location,const char* textString) {

}
void setDebugMode(int debugMode){

}
int getDebugMode() {
return 0;
}
void drawAabb(const btVector3& from,const btVector3& to,const btVector3& color)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:37:16.573

不要忘记`drawContactPoint()`定义中的类规范：它是 vtable 的第一个函数（参见 的定义`btIDebugDraw`）并且没有定义，因此缺少 vtable（如注释所述）。

```
void debugDrawer::drawContactPoint(...) {} 
```

代替

```
void drawContactPoint(...) {} 
```

然后，您将得到正常的未实现函数错误，并且您将不得不对所有其他函数重复这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T17:38:31.610

保持`virtual`开头并添加`override`结尾，因此您的函数映射到 Bullet Physics 中声明的函数，例如：

> virtual void drawLine(const btVector3 &from, const btVector3 &to, const btVector3 &color) 覆盖；

# android - 在不单击 tabhost 的情况下启动 Activity

> ID：11929326
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:44:08.033
> 
> 标签：android, android-tabhost

我有一个 tabhost 包含`4 activities`.

```
1===>>show my appointments

2===>>set Appointment 

3===>>Block calender

4===>>other. 
```

> `1.I need to launch the set appointment from the show my appointment by passing some data (but tabhost should be remains)`
> 
> `2\. From the dash board if want to open set appointment in tabhost but internally its executing all activities in tabhost how can I avoid this if I am coming from the dash board to tabhost`.

我用`tabHost.setCurrentTab(SetAppointment );`

但在内部，它也在执行其他活动，但这不应该发生。

```
 public class ShowMyAppointments extends Activity implements OnClickListener
  {

 //     in list selection  the below code

  else if(showItems[selectedPosition].equals("ReSchedule")){

                                String appointmentId = String.valueOf(appointmentsList.get(SELECTED_PATIENT).getId());
                                String statusCode = Constants.STATUS_CANCLEED_DOCTOR;               

                                new SatusAsunc(ShowMyAppointments.this ,appointmentId , statusCode).execute();  

                                HomeGridViewActivity.value=1;                        
                                Constants.CONSUMER_ID=appointmentsList.get(SELECTED_PATIENT).getConsumerID();                        
                                Constants.CONTACT_NO=appointmentsList.get(SELECTED_PATIENT).getConsumerContact();
                                Constants.PATIENT_NAME=appointmentsList.get(SELECTED_PATIENT).getConsumerName();                    
                                Intent intent = new Intent(ShowMyAppointments.this , BaseActivity.class);                    
                                startActivity(intent);
                            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:57:52.420

请从显示我的约会活动调用这两种方法来调用设置约会活动

```
 TabActivity _parentActivity=(TabActivity) getParent();
_parentActivity.getTabHost().setCurrentTab(1); //index of set appointments
        _parentActivity.onTabChanged("set appointment");   //Please provide tabSpaceName here  of set appointment name 
```

如果你想发送一些有意图的数据，那么试试这个

```
Intent intent=new Intent();
        intent.putExtra(name, value);
    _parentActivity.startActivityFromChild(childActivity, intent, requestCode);  //childActivity =show my appointment   requestCode=0  or any thing else 
```

# jquery - Internet explorer 9 不播放 jQuery MP3 插件

> ID：11929330
> 
> 赞同：0
> 
> 时间：2012-08-13T06:44:29.490
> 
> 标签：jquery, mp3

我的 jQuery MP3 插件播放一个放置在远程服务器上的 MP3 文件。它正在 Firefox 中播放。但是当我尝试在 Internet Explorer 9 中播放它时，它说。

```
Jplayer 2.1.0:id='jquery_jplayer_1':Error!
Media URL could not be loaded.
Check media URL is valid.
Context:Address of mp3 file that is placed remotely. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:49:55.597

你把你的 HTML 页面上传到网络服务器了吗？IE 具有禁止您在本地运行脚本的安全措施。先上传到网络服务器。

# ruby-on-rails - 关于升级 Rails 3.1 的资产 Rails 3.2.8 的路由错误

> ID：11929344
> 
> 赞同：0
> 
> 时间：2012-08-13T06:45:22.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, ruby-on-rails-3.1, asset-pipeline

当我从 3.1.1 Rails 升级到 3.2.8 时，看到样式表、图像的路由错误真的很令人沮丧。尝试了“bundle exec rails server”命令，还尝试了一个一个地在文件中添加宝石，也没有用:(

```
ActionController::RoutingError (No route matches [GET] "/stylesheets/application.css"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:55:44.527

链接到 rails 中的资产时，请始终使用`asset_path`、`asset_url`或依次调用它们的辅助函数之一（`image_path`、`image_url`、`javascript_include_tag`、`stylesheet_link_tag`）。

在您的情况下，看起来您`/stylesheets/application.css`在应用程序布局中进行了硬编码。简单地将该代码更改为类似

```
<%= stylesheet_link_tag :application %> 
```

它应该正确地指向`/assets/application.css`开发和`/assets/application-<sha1 hash>.css`生产中（编译资产时）。

此外，如果您有在本地编译的资产（如果您有任何情况就是这种情况。如果您在本地开发，`public/assets`您可能希望这样做），那么您需要以下行：`rm -rf public/assets``config/application.rb`

```
config.serve_static_assets = true 
```

# asp.net-mvc-3 - 如何处理mvc中的asp按钮

> ID：11929345
> 
> 赞同：0
> 
> 时间：2012-08-13T06:45:32.947
> 
> 标签：asp.net-mvc-3

我在 MVC 中使用 HTML 按钮，但有没有办法处理 MVC 中的 ASP 按钮而不是 HTML 按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:48:37.753

不，MVC 中的按钮是纯 html 代码。没有像 asp.net webforms 中的“OnClick”事件。

有可能在 MVC 中使用 asp.net webforms 组件（如果你搜索，你可以找到一些博客文章），但我不鼓励这样做。坚持使用 HTML

# visual-studio-2008 - Howto cut use the find and replace in vs2008 to cut the spesific string's head and tail?

> ID：11929348
> 
> 赞同：0
> 
> 时间：2012-08-13T06:45:42.823
> 
> 标签：visual-studio-2008, replace, find

e.g. In my legacy code, there are lots of template usages. But I refactored the code base to limit the template usage only in base classes. Then here comes the problem, Is there a fast way (using find and replace, maybe) to change:

> "`SomeTemplate<some_var>`" into just "some_var" ?

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:31:18.333

In Find and Replace, expand `Find Options` and tick `Use Regular Expressions` then replace:

```
SomeTemplate\<{:i}\> 
```

with

```
\1 
```

The `{}` tags the group and `:i` matches a C++ identifier. The `\1` references the first tagged group.

EDIT: If you also have namespaces then you'll need a more complex regular expression. If you know that you have at most one level of namespace then probably the quickest thing to do is just do a second pass to replace:

```
SomeTemplate\<{:i}\:\:{:i}\> 
```

with

```
\1::\2 
```

Note that because ':', '<' and '>' have a special meaning in regular expressions they have to be escaped with a backslash.

# java - 如何使用 Jersey Web 服务发布多个文件（图像）。？

> ID：11929353
> 
> 赞同：2
> 
> 时间：2012-08-13T06:46:05.740
> 
> 标签：java, web-services, rest, jersey

嗨，我是 Restful Web 服务的新手。

我的目标是在一个请求中创建多个用户帐户。

我选择 Jersey API 来创建 Web 服务。

此 WS 将创建多个用户的帐户。每个用户帐户都与一个头像（个人资料图片）相关联。我正在使用头像发送用户信息（头像文件使用 Base64 编码器编码为字符串格式）。

我的问题是，如果请求有很多用户，并且每个用户都与更大尺寸的头像相关联，Restful Web 服务可以处理这些请求吗？

RESTful Web 服务中的请求数据大小是否也有限制？

请建议我在 Jersey API 中创建更好的 Web 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:08:44.450

您应该查看[Jersey Multipart 支持](http://aruld.info/handling-multiparts-in-restful-applications-using-jersey/)，而不是在消息正文中传递头像- 它可以让您将大文件流式传输到您的 restful 服务。另一个优点 - 您将不再需要 Base64 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T07:20:05.230

我可以通过提交表单而不是准备 JSON 格式的对象来实现这一点。

```
@Path("/upload")
public class MultipleFiles
{
    private static final String FILE_UPLOAD_PATH = "/Users/arun_kumar/Pictures";
    private static final String CANDIDATE_NAME = "candidateName";
    private static final String SUCCESS_RESPONSE = "Successful";
    private static final String FAILED_RESPONSE = "Failed";

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces("text/plain")
    @Path("/multipleFiles")
    public String registerWebService(@Context HttpServletRequest request)
    {
        String responseStatus = SUCCESS_RESPONSE;        
        String candidateName = null;

        //checks whether there is a file upload request or not
        if (ServletFileUpload.isMultipartContent(request))
        {
            final FileItemFactory factory = new DiskFileItemFactory();
            final ServletFileUpload fileUpload = new ServletFileUpload(factory);
            try
            {
                /*
                 * parseRequest returns a list of FileItem
                 * but in old (pre-java5) style
                 */
                final List items = fileUpload.parseRequest(request);

                if (items != null)
                {
                    final Iterator iter = items.iterator();

                    while (iter.hasNext())
                    {
                        final FileItem item = (FileItem) iter.next();
                        final String itemName = item.getName();
                        final String fieldName = item.getFieldName(); 
                        final String fieldValue = item.getString();

                        if (item.isFormField())
                        {
                            candidateName = fieldValue;
                            System.out.println(" Name: " + fieldName + ", Value: " + fieldValue);
                        }
                        else
                        {
                                final File savedFile = new File(FILE_UPLOAD_PATH + File.separator
                                         + itemName);
                                System.out.println(" Saving the file: " + savedFile.getName());
                                item.write(savedFile);                                
                        }

                    }
                }
            }
            catch (FileUploadException fue)
            {
                responseStatus = FAILED_RESPONSE;
                fue.printStackTrace();                
            }
            catch (Exception e)
            {
                responseStatus = FAILED_RESPONSE;
                e.printStackTrace();
            }
        }        

        System.out.println("Returned Response Status: " + responseStatus);

        return responseStatus;
    }
} 
```

参考：[Jersey REST Web 服务上传多个文件](http://crispcode.wordpress.com/2012/07/27/jersey-rest-web-service-to-upload-multiple-files/)

# python - 在 django 视图中结合 modelformset 和 inlineformset

> ID：11929355
> 
> 赞同：3
> 
> 时间：2012-08-13T06:46:12.383
> 
> 标签：python, django, django-forms, django-views

我有两个型号

```
 class A(models.Model):
        name = models.CharField(50)
        type = models.CharField(50)

   class B(models.Model):
        field1 = ForeignKeyField(A)
        value = IntegerField() 
```

我想通过 ModelFormSet（来自模型 A）显示多个表单，其中每个表单依次显示连接到对象的所有对象的 InlineFormSets（来自模型 B）。

如何在 django 视图中的保存方法上结合模型表单集（模型 A）和内联表单集（mdoel B）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:14:39.517

一周前我一直在努力解决这个问题。我建议您开始使用 inlineformset_factory 方法：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

然后只需将您的基本表单和表单集添加到您的视图并呈现它们。

这是一些帮助我解决这个问题的博客文章：[http ://charlesleifer.com/blog/djangos-inlineformsetfactory-and-you/](http://charlesleifer.com/blog/djangos-inlineformsetfactory-and-you/)

还有一个解决方案可以使用基于类的视图使其工作：http: [//haineault.com/blog/155/](http://haineault.com/blog/155/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:04:12.773

我不确定这是一个好的解决方案，但这是我能想出的唯一可行的解​​决方案。

我会创建一个字典列表。每个字典都有一个 baseForm 键来保存你的 B 类表单和一个 inline_forms 键来保存你的 A 类 inline_formset。

在您的视图中，代码遍历列表并相应地打印表单。为每个表单提交按钮生成不同的值。例如第一个表单的 submit_1 ， etch ..

提交表单时，检查此值（提交按钮的值），如果该值是例如 submit_2，则您确定列表中的第二个项目/表单已提交。您可以从他们开始处理提交的数据。

# android - 从 sdcard 上的 XML 文件读取时出现问题

> ID：11929356
> 
> 赞同：1
> 
> 时间：2012-08-13T06:46:23.883
> 
> 标签：android, xml

朋友们，我在从位于 SD 卡上的 xml 文件中读取信息时遇到问题。代码已成功实现，但 logcat 上没有显示任何内容，也没有弹出异常。请帮助我。

```
public class History extends Activity
{
    private ListView lstv;

    static ArrayList<Records> arr;

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
        setContentView(R.layout.history);

        try {

            String path = Environment.getExternalStorageDirectory()+"/saved_images/history.xml"; 
            File file = new File(path);
            SAXParserFactory factory=SAXParserFactory.newInstance();
            SAXParser parser=factory.newSAXParser();
            XMLReader reader=parser.getXMLReader();

            XMLHandler handler=new XMLHandler();

            //parser.parse(stream,handler);
            reader.parse(new InputSource(new InputStreamReader(new FileInputStream(file))));

            arr=handler.getArray();

            ArrayAdapter<Records> adpt=new ArrayAdapter<Records>(this, android.R.layout.simple_list_item_1,arr);
            //lstv.setAdapter(adpt);                    

            handler.startDocument();

        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    class XMLHandler extends DefaultHandler {

        ArrayList<Records> array;
        Records records ;
        String strCurrentValue = null;

        public ArrayList<Records> getArray() {
            return array;
        }

        @Override
        public void startDocument() throws SAXException {
            super.startDocument();
            array=new ArrayList<Records>();
        }

        @Override
        public void startElement(String uri, String elementName, String qName,Attributes attributes) throws SAXException {
            super.startElement(uri, elementName, qName, attributes);

            if(elementName.equals("Record"))
            {
                records=new Records();
            }
        }

        @Override
        public void characters(char[] ch, int start, int length)
        throws SAXException {
            super.characters(ch, start, length);

            strCurrentValue=new String(ch, start, length);
        }

        @Override
        public void endElement(String uri, String elementName, String qName)
        throws SAXException {
            super.endElement(uri, elementName, qName);
            if(elementName.equals("date"))
            {
                records.date=strCurrentValue;
            }else if(elementName.equals("cc"))
            {
                records.cc=strCurrentValue;
            }

        }

        @Override
        public void endDocument() throws SAXException {
            super.endDocument();

            for(Records c:array)
            {
                Log.d("XmlHandler", c.toString());
            }
        }
    }
} 
```

我在 log-cat 或屏幕上看不到任何东西。请使用片段帮助我获取相同的代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:05:42.963

在我看来，您的处理程序实际上从未将记录添加到数组中 - 看起来您需要为“记录”类型的 endElement 包含一个操作，将其添加到数组中。

另外，正如 Giovanni 所说，这整段代码将占用 UI 线程，因此如果 XML 文件不重要，则应在带有进度对话框的单独线程中处理。

# cookies - Cookie 被覆盖 Google Analytics - Coldfusion

> ID：11929361
> 
> 赞同：2
> 
> 时间：2012-08-13T06:47:04.803
> 
> 标签：cookies, coldfusion, google-analytics, overwrite

我们有一个用户自助门户，我们使用 GA 来跟踪网站。我们的门户有一个外部站点，它也使用 GA 来跟踪其使用情况。（两者都使用相同的 GA 帐户）

他们有一个登录提示，将用户重定向到我们的网站。

他们在登录提示中拥有的是一个简单的表单，它调用我们的门户 - “登录管理器” URL。

我们的登录管理器是一个 Coldfusion 组件，它启动会话并将 Coldfusion 的默认 CFID 和 CFTOKEN 值写入浏览器 cookie。

他们现在声称的是 Coldfusion 登录管理器不会让外部站点设置的 GA cookie 保留在浏览器中。相反，它会覆盖它们。因此，一旦用户成功登录，外部站点设置的 GA cookie 就会消失，只有我们的站点 cookie 可用。它显示为推荐人 (utmccn=(referral)|utmcmd=referral)，并且显示为全新的访问者。所以他们无法跟踪外部网站的使用情况。

我在这里没有得到正确的问题。他们在问为什么它会阻止现有变量被传递。

登录管理器正在覆盖所有现有的 cookie，它需要允许现有的 Google Analytics cookie 继续运行。

我可以从Coldfusion结束吗？

任何建议都会很有帮助。

## 我们网站中的 GA 代码 - 帐户和域名已更改

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXX-1']);
  _gaq.push(['_setDomainName', '.example.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setAllowHash', false]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =     true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www')     + '.google-    analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga,     s);
  })(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:30:44.647

需要在两个站点（他们的站点和 CF 站点）上启用跨域跟踪。

cookie 不会被覆盖，它们会留在浏览器中。为他们的域和 CF 域设置了一个 GA cookie。GA 不能也不会设置第三方 cookie，也不能读取其他域设置的 cookie，即使它们是 GA cookie。

似乎它们被覆盖是因为它们具有相同的名称，但它们不是因为它们具有不同的域。一个域无法读取或覆盖另一个域的 cookie。

请参阅[跟踪多个域](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)以设置跨域跟踪。

# asp.net - 实体框架在 Seed 方法中刷新 PK 值

> ID：11929367
> 
> 赞同：0
> 
> 时间：2012-08-13T06:47:40.140
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我将 EF 与 ASP.NET MVC4 一起使用，我使用“更新数据库”来调用我的种子函数。基本上在一些模型上，我有一个具有属性的类

ID (PK) TypeID 标题

我想摆脱 TypeID，而是使用 ID（PK），但这意味着我需要刷新每个种子的 PK 自动增量值（这样 PK 总是从 1 开始）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:54:14.360

在您开始输入新值之前，在您的种子方法中，每个表都有这一行：

```
db.Database.ExecuteSqlCommand("DELETE FROM MyTable; DBCC CHECKIDENT(MyTable, RESEED, -1)"); 
```

# sql - sql日期差异

> ID：11929375
> 
> 赞同：2
> 
> 时间：2012-08-13T06:48:42.213
> 
> 标签：sql, oracle10g

我正在使用 oracle 10g

我需要以 to_char('HH24:MI') 的格式获取两个日期之间的差异。

我试图申请：

```
Select to_char(FRM_TIME-HOURS_IN,'HH24:MI') FROM Time_Test 
```

但它给了我无效的数字格式。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:59:49.367

这就是我要使用的：

```
select to_char(DATE '2000-01-01' + (FRM_TIME-HOURS_IN),'HH24:MI') FROM Time_Test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:51:21.473

尝试使用

`datediff()`获取日期差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:30:14.953

试试这个：

```
SELECT HOURS_IN
, FRM_TIME
, (24 * extract(day from (FRM_TIME- HOURS_IN) day(9) to second))
+ extract(hour from (FRM_TIME- HOURS_IN) day(9) to second)
+ ((1/100) * extract(minute from (FRM_TIME- HOURS_IN) day(9) to second)) as "HOUR.MINUTE"
* from t 
```

# java - 在 PrimeFaces 多次上传中获取 IE 脚本错误

> ID：11929376
> 
> 赞同：0
> 
> 时间：2012-08-13T06:48:46.077
> 
> 标签：java, javascript, primefaces

我创建了一个 JSF 应用程序，它具有三个选项卡。我在我的应用程序中使用了 primefaces 多个上传组件。

**错误**

我可以上传多个文件，但在以下情况下出现 IE 脚本错误。

*   文件上传时导航到另一个选项卡

**期待**

*   我想避免 IE 脚本错误。
*   不允许任何其他进程完成上传过程。

# acl - CakePHP 2.x，ACL - 一个组的添加/编辑权限到另一个组

> ID：11929378
> 
> 赞同：0
> 
> 时间：2012-08-13T06:49:04.817
> 
> 标签：acl, cakephp-2.1

我正在使用 CakePHP 2.1.3 ACL 组件。我创建了四个组管理员、经理、编辑和注册用户。对于用户管理模块，我想提供如下所列的访问权限：

管理员 -> 所有
管理员 -> 添加、编辑、删除编辑者和注册用户
编辑者 -> 添加、编辑、删除注册用户
注册用户 -> 无。

我可以使用 ACL 和 Auth 组件来完成此操作吗？如果没有，那么建议其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:12:57.003

是的，这可以通过 ACL 实现。ACL 还有更多可能。

[CakePHP 文档](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)

还有[John Wiseman](http://bloggingsquared.com/web-development/cakephp-acl-tutorial/)写的关于 ACL 的很好的教程，也许你应该先读一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:15:24.790

这是可能的，但 Acl 处理此类权限有点过头了，只需使用 Auth 的 ControllerAuthorize 适配器并在您的 UsersController 中放入一个`isAuthorized()`方法如下：

```
public function isAuthorized($user) {
    $userGroup = $user['User']['group'];
    if ($userGroup == 'admin' || in_array($this->action, array('index', 'view'))) {
        return true;
    }
    if ($userGroup == 'registered') {
        return false;
    }
    if ($this->action == 'add') {
        return true;
    }
    if (in_array($this->action, array('edit', 'delete'))) {
        $id = $this->request->params['pass'][0];
        $group = $this->User->field('group', array('User.id' => $id));
        if ($group == 'registered') {
            return true;
        }
        if ($group == 'editor' && $userGroup == 'moderator') {
            return true;
        }
    }
    return false;
} 
```

此处不处理添加操作，并且始终允许添加操作，在添加新用户时，您应该只显示较少的选项来设置组，基于登录用户。您没有提到如何处理索引和视图，我想所有用户都可以这样做。

# xml - 在 xml 文档中通过 XPath 读取属性不起作用

> ID：11929379
> 
> 赞同：1
> 
> 时间：2012-08-13T06:49:09.467
> 
> 标签：xml, vb.net, xpath

我在下面有一个简单的 xml 文档：

```
 <?xml version="1.0" encoding="utf-8"?>
<Research researchID="RT_a" language="eng" xmlns="http://www.rixml.org/2010/1/RIXML" createDateTime="2012-06-30T01:13:38Z">
  <Product productID="RT_a">
              <SecurityID idType="ISIN" idValue="US0605051046" />
  </Product>
</Research> 
```

我正在尝试使用给定的 XPath 字符串读取属性“idValue”。除非我删除这部分，否则这不起作用：

```
xmlns="http://www.rixml.org/2010/1/RIXML" 
```

我的代码如下：

```
 Dim doc As XPathDocument = New XPathDocument("c:\test\test.xml")

    Dim strXPath As String = "/Research[1]/Product[1]/SecurityID[1]"
    Dim nav As XPathNavigator = doc.CreateNavigator()
    Dim mgr As New XmlNamespaceManager(nav.NameTable)

    mgr.AddNamespace("", "http://www.rixml.org/2010/1/RIXML")

    Dim XPathNode As XPathNavigator = nav.SelectSingleNode(strXPath, mgr)
    If XPathNode IsNot Nothing Then
        Console.WriteLine(XPathNode.GetAttribute("idValue", String.Empty))
    Else
        Console.WriteLine("Nothing found")
    End If 
```

关于添加名称空间的行对结果没有影响 - 只是做了一些测试。我需要做什么/我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:20:47.567

尝试以下操作：

```
Dim strXPath As String = "/x:Research[1]/x:Product[1]/x:SecurityID[1]/@idValue"
Dim nav As XPathNavigator = doc.CreateNavigator()
Dim mgr As New XmlNamespaceManager(nav.NameTable)

mgr.AddNamespace("x", "http://www.rixml.org/2010/1/RIXML")
nav.Evaluate("string(" + strXPath + ")", mgr) 
```

它应该返回您的 ID 值，如果未找到该属性，则返回一个空字符串。

我认为问题可能是[此处](https://stackoverflow.com/a/2911160/1025176)列出的问题，您必须明确引用名称空间（即使它是默认名称），因此使用“x：”可以修复它。

# java - TIBCO JMS jar 文件

> ID：11929381
> 
> 赞同：10
> 
> 时间：2012-08-13T06:49:15.763
> 
> 标签：java, jar, jms, tibco

我从哪里获得 TIBCO JMS 的 jar 文件？相信我，我在没有任何运气的情况下做了很多谷歌搜索。请指导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T07:10:03.080

你试过[https://download.tibco.com/tibco/](https://download.tibco.com/tibco/)吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T06:13:51.530

jar 存在于 EMS 安装的 lib 文件夹中

> 例如**C:\tibco\ems\6.0\lib**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-10T16:17:15.237

从今天开始，您必须注册才能使用[https://download.tibco.com/tibco](https://download.tibco.com/tibco)。

[您可以在http://tap.tibco.com/storefront/trialware/tibco-enterprise-message-service/prod15032.html](http://tap.tibco.com/storefront/trialware/tibco-enterprise-message-service/prod15032.html)下载 EMS 试用版。安装试用版后，jar 将位于`ems/8.0/lib`目录中。

# sql - SQL查询在字符串中查找单个字母

> ID：11929382
> 
> 赞同：0
> 
> 时间：2012-08-13T06:49:22.067
> 
> 标签：sql, database

我需要一个 SQL 查询来选择字符串中的所有单个字母，例如：

> 我是一根弦。。
> 
> 我是另一个字符串..
> 
> 我是第三个也是最后一个字符串..

所以这会找到第一行和最后一行，因为它们包含一个被空格包围的字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:52:27.173

您可以使用`_`通配符，这意味着任何一个字符：

```
select  *
from    YourTable
where   col1 like '% _ %' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:07:53.223

尝试这个：

```
SELECT  *
FROM    <TABLE>
WHERE   ' '+<COL>+' ' LIKE '% _ %' 
```

在 where 子句中，我在两端添加了一个空格，这样，字符串的开头和结尾也将采用单个字母

# codeigniter - codeigniter uri/路由器检查

> ID：11929387
> 
> 赞同：0
> 
> 时间：2012-08-13T06:49:55.643
> 
> 标签：codeigniter, session, uri

我正在使用`codeigniter`并有一个控制器，我在其中分配一些搜索条件以存储在会话中，如下所示：

```
$srchCriteria = array(
'stockCode'=>$this->input->post('srchScode'),
'qty'=>$this->input->post('srchQty'),                           
'class' => $this->router->fetch_class(),
'method' => $this->router->fetch_method(),
);
$this->session->set_userdata('srchCriteria',$srchCriteria); 
```

并基于此标准生成输出。现在，如果用户导航到此页面以外的另一个页面，我需要清除此条件。即每次用户访问搜索页面时，搜索条件都应该被清除，除了分页。为此，我检查了核心控制器中的类和方法变量，如下所示：

```
$srchCriteria  = $this->session->userdata('srchCriteria');      
$className = $this->router->fetch_class();
$methodName = $this->router->fetch_method(); 

if(!empty( $srchCriteria['class']  ) && !empty( $srchCriteria['method'] )){
    if( ($srchCriteria['method'] != $methodName){               
      $this->session->set_userdata('srchCriteria',array());
    }
} 
```

但它不起作用，请以正确的方式指导我。我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:23:46.053

尝试`$this->session->unset_userdata('srchCriteria');`代替`$this->session->set_userdata('srchCriteria',array());`

# php - 如何在 OO Php 中将 Mysqli 结果转换为数组

> ID：11929389
> 
> 赞同：0
> 
> 时间：2012-08-13T06:50:07.563
> 
> 标签：php, mysql, arrays, oop, mysqli

我想从数据库中的表中检索数据，并将结果显示在下表中的数组中。

array("1"=>​​"Value 1", "2"=>"value2") 这是我尝试使用的函数，但是当我尝试显示数组时出现错误。请我在这方面需要帮助。我是 OO Php 的新手。

```
<?php
class query {

public function listfields (){
    $result = $this->mysqli->query("SELECT id, name FROM fields", MYSQLI_USE_RESULT);
    while($row=$result->fetch_assoc()){
    $this->fields[$row["id"]] = $row["name"];
    }
    $result->free();

}

public function fields(){
return $this->fields;   
}
        }

$list = new query;
$list->listfields();
$field1 = $list->fields();

echo $field1;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:00:31.093

尝试这个。

```
<?php

class query {

public function listfields (){

 $fields = array();
 $rowcnt =1;
 $result = $this->mysqli->query("SELECT id, name FROM fields", MYSQLI_USE_RESULT);
    while($row=$result->fetch_assoc()){
      $this->fields[$row["id"]] = $row["name"];
     //$this->fields[$rowcnt] = $row["name"];   // if you want different indexing.
      $rowcnt++;
 }
 $result->free();
}

public function fields(){
    return $this->fields;   
}
}
$list = new query();
$list->listfields();
$field1 = $list->fields();
var_dump($field1);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:00:55.513

您将需要一个可以访问的属性字段，而不是您的函数字段。此外，我建议使用 getter 和 setter 而不是公共属性，我相信你会知道如何。

这将以数组（“1”=>“Value 1”，“2”=>“value2”）形式返回数据。

```
class query {

public $fields;

public function fillfields ()
{
    $result = $this->mysqli->query("SELECT id, name FROM fields", MYSQLI_USE_RESULT);
    while($row=$result->fetch_assoc()){
         $this->fields[] = $row["name"];
    }
    $result->free();
}

$list = new query;
$list->fillfields();
$field1 = $list->fields[1];

echo $field1; 
```

# c# - StreamReader 使用数组列表或数组

> ID：11929392
> 
> 赞同：3
> 
> 时间：2012-08-13T06:50:15.750
> 
> 标签：c#, arrays, arraylist, streamreader

这是我的代码：

```
StreamReader reader = new StreamReader("war.txt");
string input = null;

while ((input = reader.ReadLine()) != null)
{
    Console.WriteLine(input);
}

reader.Close(); 
```

上面的程序从文件“war.txt”中逐行读取并打印出来。我需要重新编写程序，以便它以相反的顺序打印出来，即最后一行在前，第一行在后。例如，如果“war.txt”包含以下内容：

```
Hello.

How are you?

Thank you.

Goodbye. 
```

该程序应打印出：

```
Goodbye.

Thank you.

How are you?

Hello. 
```

我是 C# 的新手，请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:53:00.927

为此，*无论如何*您都必须缓冲数据（除非您使用`FileStream`API 进行一些棘手的工作以向后读取文件）。怎么样：

```
var lines = File.ReadAllLines("war.txt");
for(int i = lines.Length - 1; i >= 0; i--)
    Console.WriteLine(lines[i]); 
```

它只是将文件（按行）加载到数组中，然后从末尾开始打印数组。

一个 LINQ 版本将是：

```
foreach(var line in File.ReadLines("war.txt").Reverse())
    Console.WriteLine(line); 
```

但坦率地说，数组版本更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:53:42.160

您可以使用递归来做到这一点，如下所示：

```
void printReverse(int n)
{
   String line = reader.readLine();

   if (n > 0)
     printReverse(n-1);

   System.out.println(line);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:54:40.223

尝试

```
File.ReadAllLines(myFile)
    .Reverse(); 
```

完整代码

```
var list =  File.ReadAllLines(filepath).Reverse().ToList();
           foreach (var l in list)
               Console.WriteLine(l); 
```

实施细节

[Enumerable.Reverse 方法](http://msdn.microsoft.com/en-us/library/bb358497.aspx)- 反转序列中元素的顺序

[File.ReadAllLines Method (String)](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx) - 打开一个文本文件，读取文件的所有行，然后关闭文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T06:54:42.897

看看将行添加到[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，然后在列表上使用[Reverse](http://msdn.microsoft.com/en-us/library/b0axc2h2.aspx)，然后可能是[ForEach](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)来输出项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T06:55:00.660

另一种选择：`Stack`在阅读时将每一行存储到 a 中。读取文件后，弹出堆栈以逆序打印行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T06:56:25.533

使用可枚举的扩展函数，这可以做得更短：

```
foreach(var l in File.ReadAllLines("war.txt").Reverse())
    Console.WriteLine(l); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-05T04:41:30.907

这是一个示例伙伴，记得添加“使用 System.IO”

尝试

```
 {
            const int Size = 7;
            decimal[] numbers = new decimal[Size];
            decimal total = 0m;

            int index = 0;

            StreamReader inputfile;

            inputfile = File.OpenText("Sales.txt");

            while (index < numbers.Length && !inputfile.EndOfStream)
            {
                numbers[index] = decimal.Parse(inputfile.ReadLine());
                index++;
            }

            inputfile.Close();

            foreach (decimal Sales in numbers)
            {
                outputlistBox1.Items.Add(Sales);
                total = total + Sales;
            }

            textBox1.Text = total.ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-05T15:29:03.050

这是我几年前买的一本教科书的另一个例子，它有最高/最低/平均分数..（记得使用'using System IO;）

私人双平均（int [] iArray）

```
 {
        int total = 0;
        double Average;

        for (int index = 0; index < iArray.Length;
            index++)
       {
            total += iArray[index];
       }

        Average = (double) total / iArray.Length;

        return Average;
    }

    private int Highest(int[] iArray)
    {
        int highest = iArray[0];

        for (int index = 1; index < iArray.Length; index++)
        {
            if (iArray[index] > highest)
            {
                highest = iArray[index];
            }
        }

        return highest;
    }

    private int Lowest(int[] iArray)
    {
        int lowest = iArray[0];

        for (int index = 1; index < iArray.Length; index++)
        {
            if (iArray[index] < lowest)
            {
                lowest = iArray[index];
            }
        }

        return lowest;
    }

    private void button1_Click(object sender, System.EventArgs e)
    {
        try
        {
            const int SIZE = 5;
            int[] Scores = new int [SIZE];
            int index = 0;
            int highestScore;
            int lowestScore;
            double averageScore;
            StreamReader inputFile;

            inputFile = File.OpenText("C:\\Users\\Asus\\Desktop\\TestScores.txt");

            while (!inputFile.EndOfStream && index < Scores.Length)
            {
                Scores[index] = int.Parse(inputFile.ReadLine());
                index++;
            }

            inputFile.Close();

            foreach (int value in Scores)
            {
                listBox1.Items.Add(value);
            }

            highestScore = Highest(Scores);
            lowestScore = Lowest(Scores);
            averageScore = Average(Scores);

            textBox1.Text = highestScore.ToString();
            textBox2.Text = lowestScore.ToString();
            textBox3.Text = averageScore.ToString("n1");

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        this.Close();
    }      
} 
```

}

# wpf - 父窗口处理来自 WPF 中子窗口的 Keyup 事件

> ID：11929394
> 
> 赞同：0
> 
> 时间：2012-08-13T06:50:30.077
> 
> 标签：wpf

父窗口设计为附加了 keyup 事件。MainWindow 如下所示：

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_KeyUp(object sender, KeyEventArgs e)
    {
        if (e != null && e.Key == Key.Return)
        {
            MessageWindow msgWindow = new MessageWindow("KEY UP");
            msgWindow.Show();
        }
    }
} 
```

MessageWindow 有一个按钮 OK 来关闭窗口，如下所示：

```
public partial class MessageWindow : Window
{

    public MessageWindow()
    {
       InitializeComponent();
    }

    public MessageWindow(string message) : this()
    {
        txtMess.Text = message;
    }

    private void btnOk_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }
} 
```

在父级接收输入键为 [Return] 时，将初始化并显示一个新的子窗口。按 T​​AB 聚焦 OK 按钮，然后按 Enter。子 MessageWindow 再次弹出。

原因：当子窗口按下 RETURN 键关闭子窗口时，父窗口收到 KeyUp 事件。

请提供一种方法来停止父级处理 KeyUp 事件，而不是使用 FLAG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:45:21.143

尝试使用 PreviewKeyDown 事件而不是 KeyUp 事件

# ide - 将 Aptana Dark 主题导入 PyCharm

> ID：11929395
> 
> 赞同：0
> 
> 时间：2012-08-13T06:50:31.263
> 
> 标签：ide, themes, aptana, pydev, pycharm

我目前正在使用 Aptana studio，但计划迁移到 PyCharm IDE。有没有办法从 Aptana 导出配色方案以在 PyCharm 中使用它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:06:49.847

这是不可能的，但您可以[导入 TextMate 配色方案](https://github.com/JetBrains/colorSchemeTool)。

# java - 在带有 Java REST 后端的 iPhone 应用程序中使用 3rd 方 oauth2 服务

> ID：11929397
> 
> 赞同：0
> 
> 时间：2012-08-13T06:50:48.623
> 
> 标签：java, rest, oauth-2.0

我正在开发一个为 iPhone 应用程序服务的 Java REST 服务器。现在我们必须与 oauth2 协议公开的第三方服务集成。这对我来说是新的，所以我一直在阅读和编写一些“概念证明”代码，但我有一个大问题，或者我根本不明白一些东西......

我制作了一个简单的网页，其中包含用户在网页视图中看到的“使用 XXX 登录”按钮。当他单击它时，第三方服务的登录页面将打开，他可以批准我的应用程序，此时他们会将用户重定向到我使用授权代码作为参数指定的 URL。此 URL 指向我服务器上的 REST 服务。

问题是这个 URL 必须与我在为他们的服务应用我的应用程序时设置的 URL 完全相同。由于我正在运行 REST 服务器，因此当重定向到我的服务器时（没有会话），我无法知道我们在谈论哪个用户。我想用一些查询或路径参数来做这个识别，但他们不允许这样做。

这对您是否有意义，或者我是否以错误的方式实施？我现在能想象的唯一可能的解决方案是在 cookie 的帮助下，但我不太喜欢那个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:45:41.367

是的，这确实有道理。您有几种不同的选择，请尝试其中一种：

*   存储一个带有一些用户 ID 的 cookie，并在重定向后将其读出
*   使用授权请求的[`state`参数来传输一些用户id。](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.1)提供商必须在他的重定向中将其返回给您。

# ssis - SSIS 动态源表和目标表

> ID：11929399
> 
> 赞同：0
> 
> 时间：2012-08-13T06:50:55.513
> 
> 标签：ssis

我有一些要求，如下所述：

1.  我需要一个 SSIS 数据数据流任务，它将接受输入参数为

    ```
    --SourceServer Connection String
    --DestinationServer Connection String
    --Source Table Name
    --Destination Table Name 
    ```

2.  然后它应该在运行时动态地对源表和目标表进行列映射。

3.  源表和目标表模式总是相同的。

4.  我想通过从 C#.net 传递上述参数来调用这个包。

5.  一件主要的事情是在这里我将不得不传递不同的源表和目标表集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:33:17.060

刚刚在上一个问题上回答了这个问题。您不能循环遍历表并动态映射源和目标组件上的列。每个表都需要一组 Source -> Ddestination。

如果这不可行，您可能想看看[Transfer SQL Server Objects Task](http://msdn.microsoft.com/en-us/library/ms142159.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T13:08:05.853

创建 SSIS 包参数。设置 web.config 文件以传递该参数。

首先，在 SQL Server 中部署包。创建一个作业来执行包。使用 SQL Server 创建一个 sp。& 执行作业。使用 sp_start_job。

我认为它解决了你的问题。

# c# - 如何使用 WrapGrid 方向？

> ID：11929409
> 
> 赞同：0
> 
> 时间：2012-08-13T06:51:26.733
> 
> 标签：c#, wpf, xaml, gridview

我对 XAML / WPF 编程相当陌生。我想问如何将特定行的代码从 XAML 转换为 C#？

XAML：

```
<GridView>
  <ItemsPanelTemplate>
    <WrapGrid Orientation="Horizontal"/>
  </ItemsPanelTemplate>
</GridView> 
```

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:52:05.000

如果你给控件起一个名字，像这样：

```
<GridView>
  <ItemsPanelTemplate>
    <WrapGrid Name="MyWrapGrid" Orientation="Horizontal"/>
  </ItemsPanelTemplate>
</GridView> 
```

您可以在 (C#) 后面的代码中执行此操作以更改方向：

```
MyWrapGrid.Orientation = Orientation.Horizontal; 
```

# emacs - 省略帮助。为什么以下代码段失败？

> ID：11929412
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:51:47.920
> 
> 标签：emacs, elisp

我正在尝试编写一个小脚本，当有人在 erc 中与我交谈时通知我。所以我需要编写一个函数来接收我认为是两个字符串，nick 和 msg，这样我就可以挂钩它。但是我的测试功能失败了。我已经测试了咆哮通知和格式 s 表达式，它们工作正常，但我无法让测试工作。我不知道为什么它会失败。任何指针？

```
(defun growl-notify (&key message)
  "Use growl for notifications"
  (start-process "growlnotify" "growlnotifications" "growlnotify" "-m " message))

(defun test (nick msg)
  (growlnotify :message (format "%s: %s" nick msg)))

(test "Ppop" "something") 
```

它提供了以下回溯，希望对您有所帮助。

```
Debugger entered--Lisp error: (void-function growlnotify)
  (growlnotify :message (format "%s: %s" nick msg))
  test("oi" "poi")
  eval((test "oi" "poi") nil)
  eval-last-sexp-1(t)
  eval-last-sexp(t)
  eval-print-last-sexp()
  call-interactively(eval-print-last-sexp nil nil)
  recursive-edit()
  debug(error (wrong-number-of-arguments (lambda (&key message) "Use growl for notifications" (start-process "growlnotify" "growlnotifications" "growlnotify" "-m " message)) 3)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:41:43.007

错误消息是`Debugger entered--Lisp error: (void-function growlnotify)`，它告诉您`growlnotify`未定义为函数。

如果您查看您的代码，您会发现您是这样定义它的：`(defun growl-notify (&key message)`，它定义了一个名为 的函数`growl-notify`。一个简单的错字。

# asp.net - 如何在像 Facebook 一样在 ASP.NET 中滚动页面/分页时加载 GridView/Repeater 数据？

> ID：11929413
> 
> 赞同：1
> 
> 时间：2012-08-13T06:52:06.907
> 
> 标签：asp.net, gridview, lazy-loading, scrollview

我有一个绑定了数千条记录的 GirdView。每当我们遍历分页时，我都为 GirdView 应用了分页，请求再次发送到服务器，整个数据从 SQLServer DB 加载到 GridView 中，我想避免服务器往返。是否可以先加载数据 100 条记录，然后从 101 到 200 等等..从 DataTable 或 DataSet 滚动网格或分页时的记录？

与 Facebook 类似，仅当用户向下滚动页面时才会在页面上加载数据。是否可以使用 C# 在 ASP.NET 中进行操作？

请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T04:49:38.640

**将 DataTable 转换为 json 格式：**

```
 public static string DataTableToJSON(DataTable table)
    {
        List<Dictionary<string, object>> list = new List<Dictionary<string, object>>();

        foreach (DataRow row in table.Rows)
        {
            Dictionary<string, object> dict = new Dictionary<string, object>();

            foreach (DataColumn col in table.Columns)
            {
                dict[col.ColumnName] = row[col];
            }
            list.Add(dict);
        }
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        return serializer.Serialize(list);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:29:20.397

是的，但可能相当复杂。您最好使用其中一种 Javascript 模型绑定框架（Backbone/KnockoutJs）来实现这一点。

但是，如果您确实想这样做，则需要将 GridView 放在 UpdatePanel 中，然后在 Javascript 中侦听窗口滚动事件，并且每次触发事件时重新绑定 GridView 数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T04:02:36.350

为此目的使用自定义分页，并在从数据库中获取数据时使用**跳过**并**接受**您的查询。

# perl - 将数组传递给 Perl 子时“参数太多”？

> ID：11929415
> 
> 赞同：26
> 
> 时间：2012-08-13T06:52:11.070
> 
> 标签：perl

我在 perl 中有一个函数

```
sub create_hash()
{
my @files = @_;

        foreach(@files){
         if(/.text/)
         {

         open($files_list{$_},">>$_") || die("This file will not open!");

         }
      }

} 
```

我通过传递一个数组参数来调用这个函数，如下所示：

```
create_hash( @files2); 
```

该数组中有大约 38 个值。但我收到编译错误：

```
Too many arguments for main::create_hash at .... 
```

我在这里做错了什么？

我的 perl 版本是：

```
This is perl, v5.8.4 built for i86pc-solaris-64int
(with 36 registered patches, see perl -V for more detail) 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-13T06:58:01.397

你的问题就在这里：

```
sub create_hash()
{ 
```

这`()`是一个[原型](http://perldoc.perl.org/perlsub.html#Prototypes)。在这种情况下，它表示不`create_hash`带任何参数。当你试图通过它时，Perl 会抱怨。

它应该看起来像

```
sub create_hash
{ 
```

通常，[您不应该将原型与 Perl 函数一起使用](https://stackoverflow.com/q/297034/8355)。它们不像大多数其他语言中的原型。它们确实有用途，但这是 Perl 中相当高级的主题。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-13T06:58:51.730

可以将数组引用用作：

```
sub create_hash {
    my ($files) = @_;
    foreach(@{$files)){
      ...
    }
}

create_hash(\@files2); 
```

# jsf-2 - 如何返回 getAsObject 值

> ID：11929416
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:52:17.697
> 
> 标签：jsf-2

请问如何在转换器中通过此方法返回性别。

我有一个性别实体：

```
@Entity
public class Gender implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String gender; 
```

还有一个使用 selectItem 来检索所有性别的 managedBean

```
public List<SelectItem> getGenderNoList() {
    List<Gender> genderList;
    Gender gender;
    List<SelectItem> selectedGender = new ArrayList<SelectItem>();
    genderList = appSessionBean.getAllGender();
    for(Gender g : genderList) {
        SelectItem s = new SelectItem(g.getGender());
        selectedGender.add(s);
    }
    return selectedGender;
} 
```

和一个转换器

```
public Object getAsObject(FacesContext context, UIComponent component, String value) {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:12:04.187

一种方法可能是将 Gender object : id 和 gender 放在 SelectItem 的值中

```
 SelectItem s = new SelectItem(g.getGender()+"UniqeSeperator"+g.getId(),g.getGender()); 
```

然后在`getAsObject(`做这样的事情

```
...
String[] tmpArr = value.split("UniqeSeperator");
return new Gender(Long.valueOf(tmpArr[0]),tmpArr[1]); 
```

像这样的东西......

# php - 在 CakePHP 2.0 中创建倒计时

> ID：11929420
> 
> 赞同：0
> 
> 时间：2012-08-13T06:52:34.670
> 
> 标签：php, oop, cakephp, cakephp-2.0

我想在我的应用程序中创建一个倒计时，列“ `end_date`”是 DATETIME 格式。如果我使用：

`echo $thing['table_name']['end_date']`

输出是（今天的日期）：

```
2012-08-16 
```

我希望输出在哪里：

```
3 days left 
```

现在我该怎么做？我将在很多不同的视图中使用它，我找到了本[教程](http://www.brighthub.com/internet/web-development/articles/9471.aspx)，但我不得不一次又一次地放置这段代码。我想用更多的面向对象的方法来解决这个问题。是否可以将其直接放入模型中或类似的东西中？

任何方向都会有很大帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:57:15.243

在这种情况下，您应该使用 virtualFields

```
class Thing {
    var $virtualFields = array( 
    'timeleft' => "IF(Thing.end_date IS NOT NULL AND Thing.end_date <> '0000-00-00',CONCAT(DATEDIFF(Thing.end_date,CURDATE()),' days left'),'-')"
    ); 
} 
```

现在你会得到这个字段`echo $thing['table_name']['timeleft']`

# php - 多个术语的php正则表达式

> ID：11929421
> 
> 赞同：0
> 
> 时间：2012-08-13T06:52:39.943
> 
> 标签：php, regex

我有这个字符串（来自 GoDaddy 列表 xml），我希望将每个值分配给一个变量：

拍卖类型：报价，拍卖结束时间：08/12/2012 05:57 AM (PDT)，价格：4,000 美元，投标数量：0，域名年龄：0，描述：1234 我宣布拇指战争，1234ideclareathumbwar.com，流量：0，估值：0 美元，IsAdult：真

我的问题是，我该如何使用正则表达式？

我已经试过了：

```
$re  = "Auction Type: (.+?), ";
$re .= "Auction End Time: (.+?) \(.+?\), ";
$re .= "Price: .(.+?), ";
$re .= "Number of Bids: (.+?), ";
$re .= "Domain Age: (.+?), ";
$re .= "Description: (.*?), ";
$re .= "Traffic: (\d*)(.*?)";
$re .= "Valuation: (.+?), ";
$re .= "IsAdult: (.+?), ";

if(preg_match("~".$re."~is",$description,$m)){
    $record = Array('auctiontype' => trim($m[1]),
        'endtime'     => strtotime($m[2]),
        'price'       => str2float($m[3]),
        'bids'        => trim($m[4]),
        'age'         => trim($m[5]),
        'description' => addslashes(trim($m[6])),
        'traffic'     => trim($m[7]),
        'valuation'   => trim($m[8]),
        'isadult'     => trim($m[9])
    );
} 
```

但它不起作用。我可以寻求帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:29:56.557

正如 Leon Kramer 所说，您必须将 re 的最后一个元素更改为：

```
$re .= "IsAdult: (.+)$"; 
```

而且，该行`$re .= "Traffic: (\d*)(.*?), ";`还包含 2 个组（即 $m[7] 和 $m[8]），所以改变

```
$record = Array('auctiontype' => trim($m[1]),
    'endtime'     => strtotime($m[2]),
    'price'       => str2float($m[3]),
    'bids'        => trim($m[4]),
    'age'         => trim($m[5]),
    'description' => addslashes(trim($m[6])),
    'traffic'     => trim($m[7]),
    'valuation'   => trim($m[8]),
    'isadult'     => trim($m[9])
); 
```

至

```
$record = Array('auctiontype' => trim($m[1]),
    'endtime'     => strtotime($m[2]),
    'price'       => str2float($m[3]),
    'bids'        => trim($m[4]),
    'age'         => trim($m[5]),
    'description' => addslashes(trim($m[6])),
    'traffic'     => trim($m[7]),
    'valuation'   => trim($m[9]),   // here
    'isadult'     => trim($m[10])   // and here
); 
```

在给定的示例中，我不知道你想做什么`$m[8]`是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:41:15.827

```
$re  = "Auction Type: (.+?), ";
$re .= "Auction End Time: (.+?) \(.+?\), ";
$re .= "Price: .(.+?), ";
$re .= "Number of Bids: (.+?), ";
$re .= "Domain Age: (.+?), ";
$re .= "Description: (.*?), ";
$re .= "Traffic: (\d*)(.*?), ";
$re .= "Valuation: (.+?), ";
$re .= "IsAdult: (.+?)$"; 
```

你忘了一个`,`我也改成`,`了`$`$re 的最后一部分

# c# - python：math.sqrt(x) 函数有多准确？

> ID：11929422
> 
> 赞同：3
> 
> 时间：2012-08-13T06:52:42.913
> 
> 标签：c#, java, python

考虑 Python 中的以下代码片段：

```
m = int(math.sqrt(n)) 
```

对于 n = 25，它应该给出 m = 5（它在我的 shell 中也是如此）。但是根据我的 C 经验，我知道使用这样的表达式是一个坏主意，因为 sqrt 函数可能返回比实际值略低的值，然后在四舍五入后我可能会得到 m = 4 而不是 m = 5。这个限制也是参与python？如果是这种情况，在 python 中编写此类表达式的最佳方法是什么？如果我使用 Java 或 C# 会发生什么？此外，如果有任何不准确之处，是什么因素控制着它的数量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T07:03:45.473

对于适当的四舍五入，使用`round()`; 它四舍五入到最接近的整数，但返回一个浮点数。然后你可以`int`从结果中构造一个。

（很可能您的代码不是性能关键，您永远不会注意到与`round()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:08:46.793

如果您非常关心 的准确性`sqrt`，您可以使用标准库中的[decimal.Decimal 类](http://docs.python.org/library/decimal.html)，它提供了自己的`sqrt`功能。该类`Decimal`可以设置为比常规 Python 更高的精度`float`。也就是说，无论如何你是否四舍五入可能并不重要。该类`Decimal`产生*确切的*数字（来自文档）：

> [十进制] 的精确性延续到算术中。在十进制浮点数中， `0.1 + 0.1 + 0.1 - 0.3`正好等于零。在二进制浮点中，结果是`5.5511151231257827e-017`. 虽然接近于零，但差异会阻止可靠的相等性测试，并且差异会累积。因此，在具有严格等式不变量的会计应用程序中，十进制是首选。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T06:57:20.760

解决方案很简单。如果您期望整数结果，请使用 int(math.sqrt(n)+.1)。如果该值比整数结果多一点或少一点，它将四舍五入到正确的值。

# java - 用单引号替换方法时出现休眠 session.createQuery 错误

> ID：11929426
> 
> 赞同：2
> 
> 时间：2012-08-13T06:53:16.623
> 
> 标签：java, mysql, hibernate, jsf

我遇到了非常典型的问题。我这样动态生成的查询...

```
UPDATE Templates t SET t.TEMPLATE_DATA =  replace(t.TEMPLATE_DATA, 'Test\'s&#32;Test', 'Kent&quot;s Test'), t.TEMPLATE_DATA =  replace(t.TEMPLATE_DATA, 'Test&amp;quot;s&amp;#32;Test', 'Kent&quot;s Test'), UPDATE_DATE = NOW() where PRACTICE_ID = 1 AND CATEGORY_ID IN (1) 
```

当我在 db 中明确触发此查询时，这非常有效。但是通过使用休眠的 session.createQuery(-- my query --) if thwows 一个错误**QueryTranslatorException**。

```
Database : Mysql 5.3 
```

有没有人遇到过这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:57:16.827

尝试在 Hibernate 中将其作为本机 SQL 查询运行：

```
session.createSQLQuery(-- query text --); 
```

因为如果你使用

```
session.createQuery(-- query text --); 
```

Hibernate 将尝试将其作为 HQL 查询执行，这与通常的 SQL 查询不同。

HQL 是面向对象的查询语言。它根据对象而不是表来操作。这里贴出SQL和HQL区别[的简要说明。](http://www.differencebetween.net/technology/software-technology/difference-between-sql-and-hql/)[但是，如果您有时间更好地阅读有关HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)和[Native SQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)使用的 hibernate 文档的适当部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T06:56:26.587

如果要`SQL Query`在休眠中执行，请使用：[session.createSQLQuery(String query);](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#createSQLQuery%28java.lang.String%29)

# iphone - cocos2d中如何摇动CCsprite？

> ID：11929428
> 
> 赞同：4
> 
> 时间：2012-08-13T06:53:19.120
> 
> 标签：iphone, cocos2d-iphone, ccsprite

我的游戏中有一个`CCSprite`，代表一个鸡蛋。我该如何摇晃它？我尝试了以下方法，但没有成功：

```
id Runleft = [CCMoveTo actionWithDuration:0.1 position:ccp(244, 156)];
id RunRight = [CCMoveTo actionWithDuration:0.1 position:ccp(236, 156)];
[eggPlay runAction:[CCRepeatForever actionWithAction:[CCSequence actions:Runleft,RunRight,nil]]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:22:59.390

我在这里找到了一个非常适合 cocos2d-x 的奶昔。这是一个动作，可以与`runAction`

[http://www.frozax.com/blog/2012/02/how-to-create-shake-action-cocos2d-x-source-code/](http://www.frozax.com/blog/2012/02/how-to-create-shake-action-cocos2d-x-source-code/)

另一个摇动动作可以在 cocos2d 论坛上找到：

[http://www.cocos2d-iphone.org/forum/topic/20327](http://www.cocos2d-iphone.org/forum/topic/20327)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:12:46.423

```
id menuItem1ActDown= [CCMoveBy actionWithDuration:1.5 position:ccp(0,-5)];
        id menuItem1ActUp= [CCMoveBy actionWithDuration:1.5 position:ccp(0,+5)];
        id menuItem1easeDown = [CCEaseInOut actionWithAction:menuItem1ActDown rate:2];
        id menuItem1easeUp = [CCEaseInOut actionWithAction:menuItem1ActUp rate:2];
        id seq1 = [CCSequence actionOne:menuItem1easeDown two:menuItem1easeUp];
        [eggPlay runAction:[CCRepeatForever actionWithAction:seq1]]; 
```

这会给你缓和的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T09:02:56.537

嘿，我用下面的代码完成了它：

```
eggPlay.anchorPoint =  ccp(0.5,0.1);
 id rotateleft = [CCRotateBy actionWithDuration:0.5 angle:-10];
          id rotateright = [CCRotateBy actionWithDuration:0.5 angle:10];
        [eggPlay runAction:[CCRepeatForever actionWithAction:[CCSequence actions:rotateleft,rotateright,nil]]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T07:37:48.793

只需将它们左右移动，如下所示：

```
id menuItem1ActRight= [CCMoveBy actionWithDuration:1.5 position:ccp(-7,0)];
id menuItem1ActLeft= [CCMoveBy actionWithDuration:1.5 position:ccp(7,0)]; 
```

# iphone - 我们如何在情节提要中向分段控件添加动作（图中显示了 4 个分段）

> ID：11929429
> 
> 赞同：0
> 
> 时间：2012-08-13T06:53:23.223
> 
> 标签：iphone, ios, uisegmentedcontrol

在我的应用程序中使用故事板，其中使用具有 4 个分段和 4 个不同操作的分段控制。当我们单击分段视图时，它正在移动到下一个屏幕，但从上一个屏幕它不会移动到上一个屏幕，同时将按钮操作指定为推送或模态。

[图片显示了应用程序的流程](http://i.stack.imgur.com/EPw1Q.png)

我们应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:56:44.810

来自[官方文档：](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

```
[segmentedControl addTarget:self
                     action:@selector(segmentedControlValueChanged:)
           forControlEvents:UIControlEventValueChanged]; 
```

# .htaccess - Symfony 2：如何从共享主机的 url 中删除“/web/”文件夹？

> ID：11929435
> 
> 赞同：2
> 
> 时间：2012-08-13T06:53:50.320
> 
> 标签：.htaccess, mod-rewrite, symfony, url-rewriting

我一直在寻找一种在共享环境中从应用程序 URL 中删除“/web/”文件夹的方法，在该环境中我无法更改 DocumentRoot 或创建 VirtualHost。

我找到了一些基于 mod_rewrite 的解决方案，但它们都适用于 Symfony 1.x，或者它们根本不起作用（无论如何我对 mod_rewrite 还是很陌生，所以这可能是我的错）。

有没有办法用 Symfony 2 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:12:57.493

您必须将 Web 服务器的文档根目录设置为指向您的“Web”目录。如果您无法自定义文档根目录，只需将“web”目录的内容直接移动到文档根目录，并将所有其他员工移动到上一层。例如：

```
/home/username/www/html <---- this is the place where you put all things from "web"
/home/username/www/src  <---- and all other things one level above
/home/username/www/app
/home/username/www/vendor
... 
```

# objective-c - UIViewController 停止在 UIWebView 上接收触摸事件

> ID：11929436
> 
> 赞同：0
> 
> 时间：2012-08-13T06:53:52.243
> 
> 标签：objective-c, ios, xcode, uiwebview, touch-event

我正在开发杂志查看器，由于 html5 交互式内容，我必须将 UIWebView 用于页面。首先，我在 UIScrollView 中尝试了 uiwebviews，但滚动视图在滑动页面上太慢了。所以现在我正在尝试编写自己的类似滚动视图的代码。我有一个 MainView.xib、一个视图控制器 (Viewer) 和扩展 UIWindow 类 (TouchCapturingWindow)，我从这里获取：[http ://wyldco.com/blog/2010/11/how-to-capture-touches-over- a-uiwebview/](http://wyldco.com/blog/2010/11/how-to-capture-touches-over-a-uiwebview/)

当我尝试快速滑动页面时，没有问题，但是当我触摸并通过不拉手指慢慢滑动时，“查看器”视图控制器停止接收触摸事件，因此页面停止移动。我正在记录 TouchCapturingWindow，它仍在发送事件。我搜索了许多信息和教程，但我无法使其工作。我怎样才能让它连续接收触摸事件？

我上传了一个简单的 Xcode 项目，其中仅包含我项目的这一部分。你可以在这里下载：http: [//testdergi.mysys.com/touchEvents.zip](http://testdergi.mysys.com/touchEvents.zip) 当你运行项目时，你应该首先通过点击“下载页面”按钮下载页面（180Kb），然后点击“打开查看器”按钮。

您还可以查看以下代码：

**TouchCapturingWindow.h：**

```
@interface TouchCapturingWindow : UIWindow {
    NSMutableArray *views;

@private
    UIView *touchView;
}

- (void)addViewForTouchPriority:(UIView*)view;
- (void)removeViewForTouchPriority:(UIView*)view;

@end 
```

**TouchCapturingWindow.m：**

```
@implementation TouchCapturingWindow

- (void)dealloc {

}

- (void)addViewForTouchPriority:(UIView*)view {
    if ( !views ) views = [[NSMutableArray alloc] init];
    [views addObject:view];
}

- (void)removeViewForTouchPriority:(UIView*)view {
    if ( !views ) return;
    [views removeObject:view];
}

- (void)sendEvent:(UIEvent *)event {

    //get a touch
    UITouch *touch = [[event allTouches] anyObject];

    //check which phase the touch is at, and process it
    if (touch.phase == UITouchPhaseBegan) {
            for ( UIView *view in views ) {
                //if ( CGRectContainsPoint([view frame], [touch locationInView:[view superview]]) ) {
                NSLog(@"TouchCapturingWindow --> TouchPhaseBegan");
                touchView = view;
                [touchView touchesBegan:[event allTouches] withEvent:event];
                break;
            }
    }
    else if (touch.phase == UITouchPhaseMoved) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseMoved");

            if ( touchView ) {

                [touchView touchesMoved:[event allTouches] withEvent:event];
            }
            else
            {
                NSLog(@"touch view is nil");
            }

    }
    else if (touch.phase == UITouchPhaseCancelled) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseCancelled");
            if ( touchView ) {
                [touchView touchesCancelled:[event allTouches] withEvent:event];
                touchView = nil;
            }
    }
    else if (touch.phase == UITouchPhaseEnded) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseEnded");
            if ( touchView ) {
                [touchView touchesEnded:[event allTouches] withEvent:event];
                touchView = nil;
            }
    }

    //we need to send the message to the super for the
    //text overlay to work (holding touch to show copy/paste)
    [super sendEvent:event];
}

@end 
```

**查看器.h：**

```
@interface Viewer : UIViewController{
    int currentPage;
    int totalPages;
    IBOutlet UIView *pagesView;
    int lastTchX;
    int difference;
    BOOL hasMoved;
    int touchBeganSeritX;
}

- (IBAction)backBtnClicked:(id)sender;
- (void)loadImages;
- (void)animationDidStop;
- (void)loadSinglePage:(int)pageNo;

@property (nonatomic, retain) IBOutlet UIView *pagesView;

@end 
```

**查看器.m：**

```
@interface Viewer ()

@end

@implementation Viewer

@synthesize pagesView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (IBAction)backBtnClicked:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
}

- (void)loadImages
{
    for(UIView *subView in pagesView.subviews)
    {
        [subView removeFromSuperview];
    }

    currentPage = 1;
    totalPages = 12;
    for(int count = 1; count <= 12; count++)
    {
        [self loadSinglePage:count];
    }

}

- (void)loadSinglePage:(int)pageNo
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory , NSUserDomainMask, YES);
    NSString *cachesDir = [paths objectAtIndex:0];
    NSString *pagesDir = [NSString stringWithFormat:@"%@/pages", cachesDir];

    int pageX = (pageNo - 1) * 768;

    UIWebView *aPageWebView = [[UIWebView alloc] init];
    [aPageWebView setFrame:CGRectMake(pageX, 0, 768, 1024)];
    aPageWebView.backgroundColor = [UIColor clearColor];
    aPageWebView.opaque = YES;
    [aPageWebView setClearsContextBeforeDrawing:YES];
    aPageWebView.clipsToBounds = NO;
    [aPageWebView setScalesPageToFit:YES];

    NSString *hamData = [NSString stringWithFormat:@"<!DOCTYPE html><html><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"user-scalable=yes, width=1024, height=1365, maximum-scale=1.0\"><style type=\"text/css\">body {margin:0; padding:0;}</style></head><body bgcolor=\"#508CCF\"><div id=\"touchable\" style=\"top:0px; left:0px; width:1024px; height:1365px; background-image:url(%@.jpg)\"></div></body></html>", [[NSNumber numberWithInt:pageNo] stringValue]];

    [aPageWebView loadHTMLString:hamData baseURL:[NSURL fileURLWithPath:pagesDir isDirectory:YES]];
    aPageWebView.scrollView.bounces = NO;
    [aPageWebView.scrollView setMaximumZoomScale:1.3333f];
    [aPageWebView.scrollView setMinimumZoomScale:1.0f];
    aPageWebView.scrollView.zoomScale = 1.0f;
    [aPageWebView setMultipleTouchEnabled:YES];
    [pagesView addSubview:aPageWebView];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesBegan");

    UITouch *myTouch = [[event allTouches] anyObject];
    int curTchX = [myTouch locationInView:self.view].x;

    lastTchX = curTchX;
    hasMoved = NO;

    touchBeganSeritX = pagesView.frame.origin.x;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Viewer : .....moved");

    hasMoved = YES;
    UITouch *myTouch = [[event allTouches] anyObject];
    int curTchX = [myTouch locationInView:self.view].x;
    difference = curTchX - lastTchX;

    int newX = (pagesView.frame.origin.x + difference);
    if(newX <= 0)
    {
        [pagesView setFrame:CGRectMake((pagesView.frame.origin.x + difference), 0, pagesView.frame.size.width, 1024)];
    }
    lastTchX = curTchX;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesEnded");
    if(hasMoved == YES)
    {
        hasMoved = NO;

        int curSeritX = pagesView.frame.origin.x;
        curSeritX = curSeritX / (-1);

        int newX = 0;

        if(difference < 0) //Sağa geçilecek
        {
            if((currentPage + 1) <= totalPages)
            {
                currentPage++;
            }
        }
        else //Sola geçilecek
        {
            if((currentPage - 1) >= 1)
            {
                currentPage--;
            }
        }

        newX = (currentPage - 1)*768*(-1);

        [UIView animateWithDuration:0.2f
                              delay:0.0f
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                             // Do your animations here.
                             [pagesView setFrame:CGRectMake(newX, 0, pagesView.frame.size.width, pagesView.frame.size.height)];
                         }
                         completion:^(BOOL finished){
                             if (finished) {
                                 // Do your method here after your animation.
                             }
                         }];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesCancelled");
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:34:02.977

我正在回答我自己的问题。经过一番努力，我找到了一些东西。我更改了“(void)sendEvent:(UIEvent *)event”方法，如下面的代码。我看到了“[super sendEvent:event];”的使用 UITouchPhaseMoved 阶段之后是有问题的。

```
- (void)sendEvent:(UIEvent *)event {
    //we need to send the message to the super for the
    //text overlay to work (holding touch to show copy/paste)
    //[super sendEvent:event];

    //get a touch
    UITouch *touch = [[event allTouches] anyObject];

    //check which phase the touch is at, and process it
    if (touch.phase == UITouchPhaseBegan) {
            for ( UIView *view in views ) {
                //if ( CGRectContainsPoint([view frame], [touch locationInView:[view superview]]) ) {
                NSLog(@"TouchCapturingWindow --> TouchPhaseBegan");
                touchView = view;
                [touchView touchesBegan:[event allTouches] withEvent:event];

                break;
            }
        [super sendEvent:event];
    }
    else if (touch.phase == UITouchPhaseMoved) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseMoved");

            if ( touchView ) {

                [touchView touchesMoved:[event allTouches] withEvent:event];

                int curTchX = [touch locationInView:self].x;
                NSLog(@"curTchX : %d", curTchX);
            }
            else
            {
                NSLog(@"touch view is nil");
            }

    }
    else if (touch.phase == UITouchPhaseCancelled) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseCancelled");
            if ( touchView ) {
                [touchView touchesCancelled:[event allTouches] withEvent:event];
                touchView = nil;
            }
        [super sendEvent:event];
    }
    else if (touch.phase == UITouchPhaseEnded) {
            NSLog(@"TouchCapturingWindow --> TouchPhaseEnded");
            if ( touchView ) {
                [touchView touchesEnded:[event allTouches] withEvent:event];
                touchView = nil;
            }
        [super sendEvent:event];
    }

    //we need to send the message to the super for the
    //text overlay to work (holding touch to show copy/paste)

} 
```

但新的问题是；如果我在网页中添加视频，并尝试使用滑块转发视频，页面正在移动。我必须找到一种方法来检测用户是否点击了视频。

# jquery - 没有数据库的动态内容 - jquery 加载和 seo

> ID：11929440
> 
> 赞同：0
> 
> 时间：2012-08-13T06:54:06.547
> 
> 标签：jquery, html

我开始制作一个没有任何数据库的“静态”站点。我不知道，女巫对我来说是最好的解决方案：

例如，我有一个带有子菜单的主菜单：

1.  我们的产品
    *   p1
    *   p2
    *   p3

所以你怎么看：

*   我应该为每个子菜单创建一个新的 html 文件吗
*   或者制作一个product.html（作为一个容器）并为P1、P2、P3制作外部html，然后你需要一些js来将它们加载到product.html中？（如 jquery 加载）

我认为第二个解决方案更优雅，并且更少的 html 查询但是这个解决方案的 SEO 方面呢？

*   我可以在我的 sitemap.xml 中插入外部 html，以便 Google 将我的网站索引到许多子页面吗？或者我应该将它们排除在索引之外吗？

感谢您的任何建议和任何其他方式，如 jquery 加载。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:19:38.343

我建议使用 PHP（或类似的）。有了它，您可以轻松地构建您的代码，如下所示：

**索引.php**

```
<?php include 'header.php' ?>
<?php include 'menu.php' ?>
Unique code for the index-page here
<?php include 'footer.php' ?> 
```

**产品.php**

```
<?php include 'header.php' ?>
<?php include 'menu.php' ?>
Unique code for the product-page here
<?php include 'footer.php' ?> 
```

等等。

使用 JS 这样做是不好的，原因有几个，包括 SEO 和可访问性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T16:12:37.737

这可能有点跑题了。但是我在这里寻找一种解决方案，可以在 HTML 页面中嵌入页眉和页脚，这样我就不必使用前端 jQuery 来加载它们，因此我不会遇到 SEO 问题。

这是我找到的解决方案[http://blog.parkji.co.uk/2013/07/06/building-a-static-site-using-grunt-and-assemble.html](http://blog.parkji.co.uk/2013/07/06/building-a-static-site-using-grunt-and-assemble.html)

基本上，引擎需要后端或半后端（至少支持HTML），并且在页面加载之前，页面已经组装好（如PHP等）或在部署之前已经手动组装（如gruntJS） .

谷歌现在可能正在做一些花哨的事情，以便搜索引擎可以理解 javascript，但我觉得这还有很长的路要走。同时，我们可以依靠工具在页面交付给浏览器之前实现它。

# c# - 使用c#移动到excel下一行中的下一个单元格

> ID：11929443
> 
> 赞同：3
> 
> 时间：2012-08-13T06:54:15.703
> 
> 标签：c#, excel, automation, pia

如何使用 C# 移动到 Excel 中的下一行。我正在使用 Office PIA v 14。当我使用 Range.Next 属性时，它会立即将我带到该范围的单元格。我怎样才能移动到下一行？IE。下面的单元格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:17:56.700

**Range.Next 返回代表下一个单元格**的 Range 对象。

我真的不是最伟大的专家，但根据文档，你应该使用 Offset 代替。[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.offset](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.offset)

这是一些伪代码

```
var excelApp = this.Application;
int skipRows = 1;
int skipCells = 0;
var nextRange = excelApp.ActiveCell.Offset[skipRows, skipCells].Select(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:16:41.833

试试下面的代码：

```
Range oRng = ws.get_Range(Column + (row +1), Type.Missing); 
```

`ws`工作表对象在哪里。

# database - Zend 框架：连接到 PostgreSQL 数据库时出现“无效的连接选项”适配器“错误

> ID：11929447
> 
> 赞同：0
> 
> 时间：2012-08-13T06:54:30.460
> 
> 标签：database, zend-framework, postgresql, connection

我收到了这个奇怪的问题，我什至在网上找不到太多答案。

代码是这样的：

```
$config = new Zend_Config_Ini('../application/configs/application.ini',
                              APPLICATION_ENV);
$db = Zend_Db::factory($config->resources->db->adapter,
                       $config->resources->db->params->toArray());
$db->setFetchMode(Zend_db::FETCH_ASSOC);
$db->query('set names utf8;'); 
```

然后我在屏幕上得到错误：

```
An error occurred
Application error
Exception information:

Message: SQLSTATE[08006] [7] invalid connection option "adapter"
Stack trace:

#0 /srv/uhg/ZF/library/Zend/Db/Adapter/Pdo/Pgsql.php(87): Zend_Db_Adapter_Pdo_Abstract->_connect()
#1 /srv/uhg/ZF/library/Zend/Db/Adapter/Abstract.php(459): Zend_Db_Adapter_Pdo_Pgsql->_connect()
#2 /srv/uhg/ZF/library/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('set names utf8;', Array)
#3 /srv/uhg/workspaces/zpe/library/Tls/Acl.php(72): Zend_Db_Adapter_Pdo_Abstract->query('set names utf8;')
#4 /srv/uhg/workspaces/zpe/application/controllers/IndexController.php(12): Tls_Acl->__construct('developer')
#5 /srv/uhg/ZF/library/Zend/Controller/Action.php(133): IndexController->init()
#6 /srv/uhg/ZF/library/Zend/Controller/Dispatcher/Standard.php(268): Zend_Controller_Action->__construct(Object(Zend_Controller_Request_Http ), Object(Zend_Controller_Response_Http), Array)
#7 /srv/uhg/ZF/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#8 /srv/uhg/ZF/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#9 /srv/uhg/ZF/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#10 /srv/uhg/workspaces/zpe/public/index.php(29): Zend_Application->run() 
```

我还试图省略我在 $config 中得到的内容：

PDO_PGSQL：配置的东西

```
Array ( [adapter] => PDO_PGSQL
        [host] => localhost 
        [username] => postgres
        [password] =>
        [dbname] => uhg
        [default] => 1 ) 
```

当我在网上搜索时，有人建议我应该取消设置`$config->resources->db->adapter`（当然是在将它的值存储在某个地方之后），但是当我尝试这样做时，它表明我不能。

似乎这只发生在 postgresql 中，因为它适用于 MySQL 数据库。

我对 Posgresql 很陌生，这可能是 Postgresql 的问题吗？

请有人点亮。

干杯。

PS：

对于 $db，它导出（我将真实的 db 名称替换为 xx-xxx）：

object(Zend_Db_Adapter_Pdo_Pgsql)#91 (12) { ["_pdoType":protected]=> string(5) "pgsql" ["_numericDataTypes":protected]=> array(12) { [0]=> int(0) [ 1]=> int(1) [2]=> int(2) ["INTEGER"]=> int(0) ["SERIAL"]=> int(0) ["SMALLINT"]=> int(0) ["BIGINT"]=> int(1) ["BIGSERIAL"]=> int(1) ["DECIMAL"]=> int(2) ["DOUBLE PRECISION"]=> int(2) ["NUMERIC"] => int(2) ["REAL"]=> int(2) } ["_defaultStmtClass":protected]=> string(21) "Zend_Db_Statement_Pdo" ["_config":protected]=> array(10) { ["适配器"]=> 字符串(9) "Pdo_Pgsql" ["host"]=> 字符串(9) "localhost" ["用户名"]=> 字符串(8) "postgres" ["密码"]=> string(0) "" ["dbname"]=> string(3) "xxx-xxx" ["default"]=> string(1) "1" ["charset"]=> NULL [ "persistent"]=> bool(false) ["options"]=> array(3) { ["caseFolding"]=> int(0) ["autoQuoteIdentifiers"]=> bool(true) ["fetchMode"]= > int(2) } ["driver_options"]=> array(0) { } } ["_fetchMode":protected]=> int(2) ["_profiler":protected]=> object(Zend_Db_Profiler)#92 (4 ) { ["_queryProfiles":protected]=> array(0) { } ["_enabled":protected]=> bool(false) ["_filterElapsedSecs":protected]=> NULL ["_filterTypes":protected]=> NULL } ["_defaultProfilerClass":protected]=> 字符串(16) "Zend_Db_Profiler"["_connection":protected]=> NULL ["_caseFolding":protected]=> int(0) ["_autoQuoteIdentifiers":protected]=> bool(true) ["_allowSerialization":protected]=> bool(true) [ "_autoReconnectOnUnserialize":protected]=> bool(false) }

！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！

**感谢大家的帮助，我找到了解决这个问题的方法：**

```
$db = new Zend_Db_Adapter_Pdo_Pgsql(array(
             'host' => 'localhost',  
            'username' => 'postgres',  
            'password' => '',  
            'dbname' => 'uhg'        
 )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:55:02.903

我想我可以看到正在发生的事情，但是如何或为什么还不清楚。

“适配器”选项似乎被传递给 PostgreSQL 连接本身，显然它不支持这一点。

# delphi - Delphi中的ABS功能失败

> ID：11929457
> 
> 赞同：6
> 
> 时间：2012-08-13T06:55:01.500
> 
> 标签：delphi

在 Delphi6 或 Delphi 2010 中，声明货币类型的两个变量 (vtemp1,vtemp2) 并为它们提供值 0.09。将其中一个变量嵌入到 ABS 函数中，并将其与另一个进行比较。由于编译器监视显示 abs(vtemp1) 和 vtemp2 的值相同，因此您会期望比较产生积极的结果。奇怪的是 if 语句失败了！！！

注意： - 只有在处理数字 0.09 时才会遇到此问题（尝试其他几个接近的值显示正常结果） - 将变量声明为 Double 而不是货币，问题不再存在。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T08:10:06.827

我认为原因是类型转换。`Abs()`函数返回`real`结果，因此`currency`变量转换为`real`. 看一下文档：

> 货币是一种定点数据类型，可最大限度地减少货币计算中的舍入误差。在 Win32 平台上，它存储为一个缩放的 64 位整数，最后四个有效数字隐式表示小数位。在赋值和表达式中与其他实数类型混合时，货币值会自动除以或乘以 10000。

所以货币是固定的，真实是浮点数。您的问题的示例代码是：

```
program Project3;
{$APPTYPE CONSOLE}

const VALUE = 0.09;
var a,b  : currency;
begin
    a := VALUE;
    b := VALUE;

    if a = Abs(b) then writeln('equal')
    else writeln('not equal', a - Abs(b));

    readln;
end. 
```

由于类型转换，产生*不相等*的结果；

> 编译器观察显示 abs(vtemp1) 和 vtemp2 的值相同

尝试添加`x : real`，然后调用`x := abs(b);`，添加`x`到手表列表，选择它并按`Edit watch`，然后选择浮点。`X`变成`0.899...967`.

不仅`0.09`价值会产生这样的结果。你可以试试这个代码来检查：

```
 for i := 0 to 10000 do begin
        a := a + 0.001;
        b := a;
        if a <> abs(b) then writeln('not equal', a);
    end; 
```

所以，如果您需要货币变量的绝对值 - 就去做吧。不要使用浮点数`abs()`：

```
 function Abs(x : Currency):Currency; inline;
    begin
        if x > 0 then result := x
        else result := -x;
    end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T11:01:41.797

一点澄清。如果比较浮点值，则会出现“问题”：

```
var
  A: Currency;

begin
  A:= 0.09;
  Assert(A = Abs(A));
end; 
```

那是因为`Abs(A)`返回一个浮点值，并且`A = Abs(A)`实现为浮点比较。

如果比较货币值，我无法重现它：

```
var
  A, B: Currency;
begin
  A:= 0.09;
  B:= Abs(A);
  Assert(A = B);
end; 
```

但第二个示例也是一个潜在的错误，因为`B:= Abs(A)`内部是浮点除法/乘以 10000 并舍入为货币 (int64)，并且取决于 FPU 舍入模式。

* * *

我创建了一个[qc 报告 #107893](http://qc.embarcadero.com/wc/qcmain.aspx?d=107893)，它已打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-28T16:58:53.517

我刚刚发现 Delphi XE2 **Abs**函数**不会重载货币类型的困难方式。**

请参阅[Delphi XE2 文档维基](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Abs)

这些是 abs 支持的唯一类型

*   函数 Abs(X: )：实数；超载;
*   函数 Abs(X: ): Int64; 超载;
*   函数 Abs(X: )：整数；超载;

# linux - 如何在整个目录上运行 dos2unix？

> ID：11929461
> 
> 赞同：395
> 
> 时间：2012-08-13T06:55:19.620
> 
> 标签：linux, dos2unix

我必须使用`dos2unix`. 我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：720
> 
> 时间：2012-08-13T06:56:51.380

`find . -type f -print0 | xargs -0 dos2unix`

将递归查找当前目录中的所有文件并调用这些文件 dos2unix 命令

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2014-03-20T00:23:38.053

如果它是一个大目录，您可能需要考虑使用多个处理器运行：

```
find . -type f -print0 | xargs -0 -n 1 -P 4 dos2unix 
```

这将一次传递 1 个文件，并使用 4 个处理器。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-09-03T10:32:41.467

由于我碰巧对 dos2unix 不太满意，所以我推出了自己的简单实用程序。除了速度和可预测性方面的一些优势外，语法也更简单一些：

```
endlines unix * 
```

如果你想让它进入子目录（跳过隐藏的目录和非文本文件）：

```
endlines unix -r . 
```

`endlines`可在此处获得[https://github.com/mdolidon/endlines](https://github.com/mdolidon/endlines)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-02-28T00:32:28.783

最好跳过隐藏文件和文件夹，例如`.git.`So 而不是 using `find`，如果您的`bash`版本足够新或正在使用`zsh`，只需执行以下操作：

```
dos2unix ** 
```

请注意，对于 Bash，这将需要：

```
shopt -s globstar 
```

....但这是一个足够有用的功能，你应该诚实地把它放在你的任何地方`.bashrc`。

如果您**不想**跳过隐藏的文件和文件夹，但您仍然不想弄乱`find`（我不会责怪您），您可以提供第二个 recursive-glob 参数以*仅*匹配隐藏的条目：

```
dos2unix ** **/.* 
```

请注意，在这两种情况下，glob 都将扩展为包含目录，因此您将看到以下警告（可能多次出现）：`Skipping <dir>, not a regular file.`

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2019-02-19T05:49:59.513

一个常见的用例似乎是**标准化提交到 Git 存储库的所有文件的行尾**：

```
git ls-files -z | xargs -0 dos2unix 
```

请记住，某些文件（例如`*.sln`, `*.bat`）*仅*在 Windows 操作系统上使用并且应保留**结尾**`CRLF`：

```
git ls-files -z '*.sln' '*.bat' | xargs -0 unix2dos 
```

如有必要，使用`.gitattributes`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-01T22:43:12.717

对于任何 Solaris 用户（我正在使用 5.10，也可能适用于较新的版本，以及其他 unix 系统）：

dos2unix 不会默认覆盖文件，它只会将更新的版本打印到标准输出，因此您必须指定源和目标，即两次相同的名称：

```
find . -type f -exec dos2unix {} {} \; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-03-02T16:04:48.397

我认为最简单的方法是：

```
dos2unix $(find . -type f) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-19T14:36:05.623

我遇到了同样的问题，感谢这里的帖子，我已经解决了。我知道我有大约一百个文件，我只需要为 *.js 文件运行它。 `find . -type f -name '*.js' -print0 | xargs -0 dos2unix`

感谢大家的帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-20T15:37:43.633

```
for FILE in /var/www/html/files/*
do
 /usr/bin/dos2unix FILE
done 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-23T03:03:17.807

我已经用谷歌搜索了一百万次，所以我的解决方案是把这个 bash 函数放在你的环境中。

**`.bashrc`或`.profile`或其他**

```
dos2unixd() {
  find $1 -type f -print0 | xargs -0 dos2unix
} 
```

**用法**

`$ dos2unixd ./somepath`

这样一来，您仍然拥有原始命令`dos2unix`，并且很容易记住这个命令`dos2unixd`。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-08-13T06:59:30.760

如果没有子目录，也可以取

```
ls | xargs -I {} dos2unix "{}" 
```

# java - 二叉树最大总和水平 - 更好的设计？

> ID：11929463
> 
> 赞同：1
> 
> 时间：2012-08-13T06:55:32.063
> 
> 标签：java, algorithm, optimization, tree, binary-tree

我已经编写了一个代码，用于在具有最大元素总和的二叉树中查找级别。我有几个问题。

1.  这是一个好的设计吗？- 我使用了 2 个队列，但两个队列存储的元素总数将小于 n。所以我认为应该没问题。
2.  有没有更好的设计？

    ```
    public class MaxSumLevel {  
    public static int findLevel(BinaryTreeNode root) {      
        Queue mainQ = new Queue();
        Queue tempQ = new Queue();
        int maxlevel = 0;
        int maxVal = 0;
        int tempSum = 0;
        int tempLevel = 0;
        if (root != null) {
            mainQ.enqueue(root);
            maxlevel = 1;
            tempLevel = 1;
            maxVal = root.getData();
        }           
        while ( !mainQ.isEmpty()) {         
            BinaryTreeNode head = (BinaryTreeNode) mainQ.dequeue();
            BinaryTreeNode left = head.getLeft();
            BinaryTreeNode right = head.getRight();
            if (left != null) {
                tempQ.enqueue(left);
                tempSum = tempSum + left.getData();
            }
            if (right != null) {
                tempQ.enqueue(right);
                tempSum = tempSum + right.getData();
            }           
            if (mainQ.isEmpty()) {
                mainQ = tempQ;
                tempQ = new Queue();
                tempLevel ++;
                if (tempSum > maxVal) {
                    maxVal = tempSum;
                    maxlevel = tempLevel;
                    tempSum = 0;
                }               
            }           
        }
        return maxlevel;
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:22:07.617

这取决于你的树有多少节点以及它们有多深。由于您正在执行[广度优先搜索](https://en.wikipedia.org/wiki/Breadth_first_search#Features)，因此您的队列将占用*O(n)*内存空间，这对于大多数应用程序来说是可以的。

以下解决方案具有*O(l)*空间复杂度和*O(n)*时间复杂度（*l*是树的深度和它的*n*个顶点）：

```
public List<Integer> levelsSum(BinaryTreeNode tree) {
    List<Integer> sums = new ArrayList<Integer>()
    levelsSum(tree, sums, 0);
    return sums;
}
protected void levelsSum(BinaryTreeNode tree, List<Integer> levelSums, int level) {
    if (tree == null)
        return;
    // add new element into the list if needed
    if (level.size() <= level)
        levelSums.add(Integer.valueOf(0));
    // add this node's value to the appropriate level
    levelSums.set(level, levelSums.get(level) + tree.getData());
    // process subtrees
    levelSum(tree.getLeft(),  levelSums, level + 1);
    levelSum(tree.getRight(), levelSums, level + 1);
} 
```

现在只需调用`levelsSum`一棵树并扫描返回的列表以找到最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:25:28.210

我喜欢递归（注意，未经测试的代码）：

```
public static int maxLevel(BinaryTreeNode tree) {    
    ArrayList<Integer> levels = new ArrayList<Integer>();
    findLevels(tree, 0, levels);
    // now just return the index in levels with the maximal value.
    // bearing in mind that levels could be empty.
}
private static void findLevels(BinaryTreeNode tree, int level,
                                  ArrayList<Integer> levels) {
    if (tree == null) {
        return;
    }
    if (levels.length <= level) {
        levels.add(0);
    }
    levels.set(level, levels.get(level) + tree.getData());
    findLevels(tree.getLeft(), level+1, levels);
    findLevels(tree.getRight(), level+1, levels);
} 
```

如果我觉得垃圾收集器真的很刻薄，我会让 findLevels 返回一个 (level, value) 对的列表，然后对它们求和。这在协同程序类型的语言中更有意义，但在 java 中会很奇怪。

显然，您可以在递归函数中采用策略，并使用要处理的显式节点堆栈来执行此操作。我的方式和你的方式之间的主要区别在于我的方式与树的高度成正比。你的内存与它的宽度成正比。

查看您的代码，该方法似乎很合理。我将重命名`tempLevel`为`currentLevel`，并且我倾向于将内部循环拉出到一个函数`sumLevel`中，该函数接受一个队列并返回一个 int 和一个队列（实际上队列将是一个参数，因为你只能返回一个值， grrr）。但它看起来还可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:54:31.777

你确定元素都是非负的吗？

我会让它像`new MaxSumLevel(root).getLevel()`. 否则，当您有时必须返回 maxSum 时，您会怎么做？

我会将其构建为 2 个嵌套循环：

```
while(!mainQ.isEmpty()){
     while(!mainQ.isEmpty()){
        BinaryTreeNode head = (BinaryTreeNode) mainQ.dequeue();
        BinaryTreeNode left = head.getLeft();
        BinaryTreeNode right = head.getRight();
        if (left != null) {
            tempQ.enqueue(left);
            tempSum = tempSum + left.getData();
        }
        if (right != null) {
            tempQ.enqueue(right);
            tempSum = tempSum + right.getData();
        }
     }
     mainQ = tempQ;
     tempQ = new Queue();
     tempLevel ++;
     if (tempSum > maxVal) {
         maxVal = tempSum;
         maxlevel = tempLevel;
         tempSum = 0;
     }               

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T00:47:48.503

这种递归方法对我有用：

```
public int findMaxSumRootLeaf(TreeNode node,int currSum) {
    if(node == null)
        return 0;
    return Math.max(findMaxSumRootLeaf(node.leftChild,currSum)+node.data, findMaxSumRootLeaf(node.rightChild,currSum)+node.data);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-14T22:47:37.700

您可以在队列中使用并计算每个级别的最大总和来表示级别的**结束。**`null`

```
public int maxLevelSum(BinaryTreeNode root) {
    if (root == null)                 //if empty tree
        return 0;
    else {
        int current_sum = 0;          
        int max_sum = 0;
        Queue<BinaryTreeNode> queue = new LinkedList<BinaryTreeNode>();       //initialize a queue
        queue.offer(root);  //add root in queue
        queue.offer(null);  // null in queue represent end of a level
        while (!queue.isEmpty()) {
            BinaryTreeNode temp = queue.poll();         
            if (temp != null) {
                if (temp.getLeft() != null)                  //if left is not null
                    queue.offer(temp.getLeft());
                if (temp.getRight() != null)
                    queue.offer(temp.getRight());            //if right is not null
                current_sum = current_sum + temp.getData();  //add to level current level sum
            } else {                                         // we reached end of a level
                if (current_sum > max_sum)                   //check if cuurent level sum is greater than max
                    max_sum = current_sum;
                current_sum = 0;                            //make current_sum=0 for new level
                if (!queue.isEmpty())                                  
                    queue.offer(null);                      //completion of a level
            }
        }
        return max_sum;                                     //return the max sum
    }
} 
```

# java - Android Service 被 android V 2.3 (gingerbread) 杀死

> ID：11929466
> 
> 赞同：2
> 
> 时间：2012-08-13T06:55:51.637
> 
> 标签：java, android, android-service, android-2.3-gingerbread

我有一个 GPS 服务，其工作是将坐标获取到服务器中。该服务假设 24/7 运行。但它以某种方式在两者之间被杀死。这仅在 android v 2.3 中发生。在 android v2.2 上运行良好。

在这个服务中，我使用“LocationManager”，它的方法“requestLocationUpdates”正在创建一个循环。这个循环负责获取坐标。所以我的目标是保持循环运行。

那么该怎么办，让服务运行 24/7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:07:37.260

```
This server suppose to be run 24/7 
```

你**不能那样**做。正如您所发现的，这在任何真正意义上的术语中都是[不可能的。](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)这[也不是一个好的设计选择](http://www.androidguys.com/2010/03/29/code-pollution-background-control/)。

如果您绝对需要它一直运行，则需要获取`PARTIAL_WAKE_LOCK`via `PowerManager`。这将使 CPU 始终保持开启状态，并使您的程序运行。为电池寿命的惊人下降做好准备。

而是使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。您可以通过 AlarmManager安排[PendingIntent ，它会在相关时间点启动服务以完成工作。](http://developer.android.com/reference/android/app/PendingIntent.html)完成后，再次终止服务。

下面是一个示例代码，展示了如何使用 AlarmManager，它将在 5 分钟后启动启动 YourService 的意图：

```
// get a calendar with the current time
Calendar cal = Calendar.getInstance();
// add 5 minutes to the calendar object
cal.add(Calendar.MINUTE, 5);

Intent intent = new Intent(ctx, YourService.class);
PendingIntent pi = PendingIntent.getService(this, 123, intent, 
                                            PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:04:16.707

请使用在给定时间段后启动您的服务的重复警报管理器

```
private void setAlarm() {
        AlarmManager alarmManager = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(getApplicationContext(), LocationUpdateService.class);
        intent.putExtra("locationSendingAlarm", true);
        PendingIntent   pendingIntent = PendingIntent.getService(this, AppConstants.PENDING_INTENET_LOCATION_SENDING_ALARM_ID, intent,0);
        try {
            alarmManager.cancel(pendingIntent);
        } catch (Exception e) {

        }
        int timeForAlarm=5*1000*60; // 5 minutes

        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis()+timeForAlarm, timeForAlarm,pendingIntent);
    } 
```

# php - 如何使用两个提交按钮，并区分使用哪个提交表单？

> ID：11929471
> 
> 赞同：46
> 
> 时间：2012-08-13T06:56:24.503
> 
> 标签：php, forms, submit, action

目前，我有一个 HTML 表单，用户将在其中输入文章的标题和文本。到了提交的时候，他们会看到两个按钮。一种是“保存”他们的文章而不发表，另一种是“发表”文章并将其公开。

我正在使用 PHP，并且试图弄清楚如何判断使用了哪个按钮，以便在数据库中存储适当的相应值。

```
<td>
<input type="submit" class="noborder" id="save" value="" alt="Save" tabindex="4" />
</td>
<td>
<input type="submit" class="noborder" id="publish" value="" alt="Publish" tabindex="5" />
</td> 
```

可能应该在前面提到这一点，但我不能为按钮分配值，因为按钮是一个图像，所以文本会显示在它上面。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-13T07:00:28.823

给每个人`input`一个`name`属性。只有 clicked`input`的`name`属性会被发送到服务器。

```
<input type="submit" name="publish" value="Publish">
<input type="submit" name="save" value="Save"> 
```

进而

```
<?php
    if (isset($_POST['publish'])) {
        # Publish-button was clicked
    }
    elseif (isset($_POST['save'])) {
        # Save-button was clicked
    }
?> 
```

~~编辑：将`value`属性更改为`alt`. 不确定这是图像按钮的最佳方法，您不想使用任何特殊原因`input[type=image]`吗？~~

编辑：由于这不断得到支持，我继续将奇怪的`alt`/`value`代码更改为真正的提交输入。我相信最初的问题要求某种图像按钮，但现在有很多更好的方法来实现这一点，而不是使用`input[type=image]`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T07:00:46.053

为这些提交按钮提供名称和值，例如：

```
 <td>
    <input type="submit" name='mybutton' class="noborder" id="save" value="save" alt="Save" tabindex="4" />
    </td>
    <td>
    <input type="submit" name='mybutton' class="noborder" id="publish" value="publish" alt="Publish" tabindex="5" />
    </td> 
```

然后在你的php脚本中你可以检查

```
if($_POST['mybutton'] == 'save')
{
  ///do save processing
}
elseif($_POST['mybutton'] == 'publish')
{
  ///do publish processing here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T07:03:32.877

您可以按如下方式使用它，

```
<td>

<input type="submit" name="save" class="noborder" id="save" value="Save" alt="Save" 
tabindex="4" />

</td>

<td>

<input type="submit" name="publish" class="noborder" id="publish" value="Publish" 
alt="Publish" tabindex="5" />

</td> 
```

在 PHP 中，

```
<?php
if($_POST['save'])
{
   //Save Code
}
else if($_POST['publish'])
{
   //Publish Code
}
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T07:07:39.700

If you can't put value on buttons. I have just a rough solution. Put a hidden field. And when one of the buttons are clicked before submitting, populate the value of hidden field with like say 1 when first button clicked and 2 if second one is clicked. and in submit page check for the value of this hidden field to determine which one is clicked.

# scala - scala：return语句的问题

> ID：11929485
> 
> 赞同：13
> 
> 时间：2012-08-13T06:57:26.873
> 
> 标签：scala, playframework-2.0

我对此有点困惑

以下代码编译正常：

```
def save: Action[AnyContent] = Action {
  if (1 == 2) {
    BadRequest(toJson("something went wrong"))
  } else {
    Ok(toJson(Feature.find))
  }
} 
```

但如果我只是添加 return 语句，我会得到以下信息：

```
def save: Action[AnyContent] = Action {
  if (1 == 2) {
    return BadRequest(toJson("something went wrong"))
  } else {
    return Ok(toJson(Feature.find))
  }
}

[error]  found   : play.api.mvc.SimpleResult[play.api.libs.json.JsValue] 
[error]  required: play.api.mvc.Action[play.api.mvc.AnyContent]
[error]       return BadRequest(toJson("something went wrong")) 
```

我认为这两个代码将是等效的...

顺便说一句，Action 是一个伴随对象，具有一个接收以下形式的函数的 apply 方法：Request[AnyContent] => Result，并返回一个 Action[AnyContent]

似乎使用 return 语句，该块正在返回直接执行 BadRequest... 和 Ok... 的结果，而不是返回将块传递给 Action 对象伴侣的结果...

我对吗？

注意：我正在尝试找到一种摆脱这么多嵌套地图和 getOrElse 的方法

ps：对不起，如果问题有点混乱，我自己也很困惑......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T15:42:51.880

这两个表达式确实做了非常不同的事情！

```
def save: Action[AnyContent] = Action {
  if (1 == 2) {
    BadRequest(toJson("something went wrong"))
  } else {
    Ok(toJson(Feature.find))
  }
} 
```

在这里，`save`将返回`Action(Ok(toJson(Feature.find)))`. 现在，

```
def save: Action[AnyContent] = Action {
  if (1 == 2) {
    return BadRequest(toJson("something went wrong"))
  } else {
    return Ok(toJson(Feature.find))
  }
} 
```

这里的情况比较复杂。当`return Ok(toJson(Feature.find))`被评估时，*它将从`save`*! 也就是说，*不会*`Ok(toJson(Feature.find))`传递给. 相反，该方法的执行将停止并作为其结果返回——除了这不是应该返回的类型，因此它给出了类型错误。*`Action``save``Ok(toJson(Feature.find))``save`*

 *记住：`return`从封闭返回`def`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T07:09:57.490

您使用的方法确实在`Action`伴随对象中定义，但它不是您在问题中描述的方法，而是：

```
def apply (block: ⇒ Result): Action[AnyContent] 
```

参数 ( `block`) 是类型结果的表达式，稍后将根据需要对其进行评估（按名称评估）。它不是函数或闭包，只是一个表达式。所以你不能`return`从一个表达式。

顺便说一句：`return`在 Scala 中使用是一种代码味道，应该避免。*

# c# - asp.net中未终止的字符串常量错误

> ID：11929490
> 
> 赞同：1
> 
> 时间：2012-08-13T06:58:05.093
> 
> 标签：c#, javascript, asp.net

![在此处输入图像描述](../Images/19870fa13aabb3c30fb9bf1ae97b0e5f.png)

调用函数时出现此错误

```
 static public void DisplayAJAXMessage(Control page, string msg)
{
    string myScript = String.Format("alert('{0}');", msg);

    ScriptManager.RegisterStartupScript(page, page.GetType(), "MyScript", myScript, true);
} 
```

调用这个函数：

```
 string sampledata = "Name                  :zzzzzzzzzzzzzzzz<br>Phone         :00000000000000<br>Country               :India";
        string sample = sampledata.Replace("<br>", "\n");

    MsgBox.DisplayAJAXMessage(this, sample); 
```

我需要在下一行显示姓名、电话和国家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T07:06:08.530

未终止的字符串常量意味着您忘记关闭字符串。您不能有跨越多行的警报。当脚本输出到浏览器时，它实际上包括新行......而不是 javascript 期望的“\n”。这意味着，您的警报呼叫将跨越多行......像这样：

```
alert('Name                  :zzzzzzzzzzzzzzzz
       Phone         :00000000000000
       Country               :India'); 
```

..这不起作用，并且会产生您所看到的错误。尝试使用双反斜杠来转义反斜杠：

```
string sample = sampledata.Replace("<br>", "\\n"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:05:55.237

`"\n"`是 C# 的换行符，即您的 js 包含：

```
something('...blah foo
bar ...'); 
```

你*真正*想要的是js中的换行符：

```
something('...blah foo\nbar ...'); 
```

你可以这样做：

```
string sample = sampledata.Replace("<br>", "\\n"); 
```

或者：

```
string sample = sampledata.Replace("<br>", @"\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:05:04.897

您需要对您的字符串进行转义/编码`JavaScript`：

[C# 中的转义引号用于 javascript 消费](https://stackoverflow.com/questions/806944/escape-quote-in-c-sharp-for-javascript-consumption)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T17:10:12.433

您的未终止不在 C# 中，而是在 Javascript 生成的代码中。

# yii - 带有“权限”扩展的 Yii RBAC 实现

> ID：11929491
> 
> 赞同：1
> 
> 时间：2012-08-13T06:58:17.407
> 
> 标签：yii, rbac, yii-extensions

我正在学习 Yii 框架，我也在创建一个示例应用程序。

在我的应用程序中，我有三个用户角色

*   超级管理员
*   作者
*   和注册用户

我希望作者对文章进行 CRUD 操作。

我用 yii 的 RController 扩展了我所有的控制器，并将以下代码添加到过滤器中。

```
public function filters()
{
    return array(
        //'accessControl', // perform access control for CRUD operations
        'postOnly + delete', // we only allow deletion via POST request
        'rights',
    );
} 
```

根据 Yii 文档，据我了解，Yii 应该为我做自动过滤吗？但即使我使用超级管理员帐户登录，它也会显示“错误 403 您无权执行此操作。”

# windows - Bash 内联命令的 Windows bat 替代方案

> ID：11929493
> 
> 赞同：10
> 
> 时间：2012-08-13T06:58:36.247
> 
> 标签：windows, bash, batch-file, cmd

是否有任何 Windows 等效语法可以在 bat 脚本文件中的另一个命令中运行命令？

在 Linux 中，您可以简单地使用[$(...)](https://stackoverflow.com/questions/8663595/bash-for-inline-command)或 ``。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T07:08:37.887

是的，至少对于简单的事情：

```
@setlocal enableextensions enabledelayedexpansion
@echo off
for /f %%w in ('echo xyzzy') do set var=%%w
echo Output is %var%
endlocal 
```

该脚本的输出是：

```
Output is xyzzy 
```

来自`xyzzy`命令`echo`。

从命令窗口运行`for /?`应该会为您提供更全面的选项列表。

# c# - 目标框架和 C# 版本查询

> ID：11929494
> 
> 赞同：-3
> 
> 时间：2012-08-13T06:58:42.010
> 
> 标签：c#, visual-studio-2010, .net-framework-version

1.  C# 版本是否与目标框架有任何关系？

2.  我如何知道我使用的是哪个 C# 版本？

3.  如何更改我正在使用的 C# 版本？

4.  从 .NET Framework 4 客户端配置文件转到 .NET Framework 2 会失去什么？

5.  所选框架是否限制了编译程序能够运行的操作系统版本范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:14:06.883

1：嗯，广泛地说；后期的框架往往会附带后期的编译器；.NET 包括 C# 2，.NET 3.5 包括 C# 3，.NET 4.0 用于 C# 4 和 .NET 4.5 用于 C# 5

2：您的计算机上可以有多个版本，这*部分*取决于您使用的是哪个 IDE，或者您是否使用命令行。在命令行，`csc`会告诉你它是哪个版本

3：多种选择：使用不同的IDE；使用来自不同框架版本的不同版本的 csc；使用 csc 和`/langversion`切换；在项目属性（Visual Studio）的“高级...”对话框中设置“语言版本”

4：LINQ、WCF、WPF 等 - 大量错误修正和额外的框架方法/工具

5：电脑一定要有所需的框架，果然...

# sitecore - 在 Sitecore 6.5 中发布相关媒体项目而不使用工作流

> ID：11929497
> 
> 赞同：2
> 
> 时间：2012-08-13T06:58:48.627
> 
> 标签：sitecore

我们的客户希望在发布页面时自动发布相关媒体项目。他们没有使用会使事情变得更简单的工作流程，所以我需要找到另一种方法。目前，我创建了一个自定义发布管道处理器（如本[博](http://sitecoreblog.alexshyba.com/2009/12/get-all-published-items-in-sitecore.html)文所示），在其中我为 Web 数据库启用了历史存储，并从那里获取更改项目的列表。循环浏览更改的项目时，我正在检查任何相关的媒体项目并发布它们。

这很好用，但我只是想检查是否有任何需要注意的陷阱，或者是否有更好的方法来做到这一点。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:29:39.460

## 风险领域的输入：

1.  如果编辑会话在发布前 30 天以上，则历史存储中缺少条目
2.  查找相关媒体项目涉及链接字段和富文本字段，可能存在指向媒体的直接链接，这些可以被处理并转换为正确格式的链接。

## 替代解决方案

根据编辑人员的 Sitecore 成熟度，另一种用户模型可能是您从保存管道自动发布媒体项目。对于一些用户来说，这更容易理解，因为发布模型被限制为处理页面可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:59:43.500

不使用工作流的最好方法是更换工作流中的`AddItemReferences`处理器`PublishItem`。您可以在此处添加将与原始项目一起发布的项目类型。

这是一篇关于它的[博](http://sitecoreblog.alexshyba.com/2010/07/hidden-feature-of-sitecore-62.html)文 Alex Shyba。

这是我的本地实现

```
public class AddItemReferences : Sitecore.Publishing.Pipelines.PublishItem.AddItemReferences
{
    private readonly static ILogger _logger = AppLogger.GetNamedLogger(typeof(AddItemReferences));

    protected override List<Item> GetItemReferences(PublishItemContext context)
    {
        Assert.ArgumentNotNull(context, "context");
        var list = new List<Item>();
        // calling base method which processes links from FileDropArea field
        list.AddRange(base.GetItemReferences(context));
        // adding our "own" related items
        list.AddRange(GetRelatedReferences(context));
        return list;
    }
    protected virtual List<Item> GetRelatedReferences(PublishItemContext context)
    {
        Assert.ArgumentNotNull(context, "context");
        var relatedReferenceList = new List<Item>();
        if (context.PublishOptions.Mode == PublishMode.SingleItem )
        {
            try
            {
                var sourceItem = context.PublishHelper.GetSourceItem(context.ItemId);
                if (sourceItem.Paths.IsContentItem)
                {
                    var itemLinks = sourceItem.Links.GetValidLinks();
                    ItemLink[] referers = Globals.LinkDatabase.GetReferers(sourceItem);

                    relatedReferenceList.AddRange(GetMediaItems(itemLinks));
                    relatedReferenceList.AddRange(GetAliases(referers));
                }
            }
            catch (Exception ex)
            {
                var options = context.PublishOptions;
                StringBuilder msg = new StringBuilder();
                msg.AppendLine("Publishing options");
                msg.AppendLine("Deep: " + options.Deep);
                msg.AppendLine("From date: " + options.FromDate);
                msg.AppendLine("Language: " + options.Language);
                msg.AppendLine("Mode: " + options.Mode);
                msg.AppendLine("PublishDate: " + options.PublishDate);
                msg.AppendLine("Targets: " + string.Join(",",options.PublishingTargets.ToArray()));
                msg.AppendLine("Republish all: " + options.RepublishAll);
                msg.AppendLine("Root item: " + options.RootItem);
                msg.AppendLine("Source database: " + options.SourceDatabase.Name);
                _logger.LogError(msg.ToString(), ex);       
            }
        }
        return relatedReferenceList;
    }

    private static IEnumerable<Item> GetMediaItems(ItemLink[] itemLinks)
    {
        foreach (var link in itemLinks)
        {
            var item = link.GetTargetItem();
            if (item == null)
                continue;

            if (item.Paths.IsMediaItem)
            {
                yield return item;
            }
        }
    }

    private static IEnumerable<Item> GetAliases(ItemLink[] referrers)
    {
        foreach (var link in referrers)
        {
            var item = link.GetSourceItem();
            if (item != null && IsAlias(item))
                yield return item;
        }
    }

    private static bool IsAlias(Item item)
    {
        return item.TemplateID.Guid == DataAccessSettings.Templates.AliasTemplateId;
    }
} 
```

# jquery - jQuery：向下滑动并以特殊方式将一个背景图像替换为另一个背景图像

> ID：11929499
> 
> 赞同：2
> 
> 时间：2012-08-13T06:58:51.230
> 
> 标签：jquery, html, css, slider, uislider

这是一个代码[jsFiddle](http://jsfiddle.net/CNt5h/1/)。

有 2 个图像：新（现代）图像和旧图像。在我的示例中，当您按下链接“单击此处向下滑动”时，所有内容都会正确向下滑动（尽管我没有拉伸图像以使它们彼此适合，这只是一个示例）。

但是，我希望新图像（现代）没有滑落，而是被旧图像（由旧谷歌）顺利取代。例如，当滑块位于页面中间时，该滑块上方会出现一半旧 Google，而该滑块上方会出现一半现代 Google 消失。那时，现代图像的下部仍在滑块下方。结果，如果图像包含相同的文本，彼此适合，但颜色不同，您可以在滑动的任何时候从该图像中读取整个文本。我希望我解释得当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:26:17.583

这就是你想要的。

背景图像应保持在原位，因此 div 与底部的页面对齐。

[http://jsfiddle.net/uniisland/9h58G/1/](http://jsfiddle.net/uniisland/9h58G/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:07:40.833

我不确定是否是一个解决方案，但是：

我已经将 body css 包装在一个 div 中：

```
<div id="bg"></div>

#bg{
     height: 100%;
     width: 100%;
     background-color: #d1e3ec;
     background-image: url(http://googlechrometutorial.com/images/google-chrome-home.jpg);
     background-repeat: no-repeat;
     background-position: top center;
     position: absolute;
} 
```

之后我们可以使用动画不透明度（或其他淡入淡出......）：

```
 $('#bg').css('opacity', 0);
 $('#slide-link').click(function(){

 var hid = $('#sliderWrapper').is(':hidden')            
 $(this).animate({ top: (1-hid)*($(window).height()) },1500)
      if(hid) {
           $('#bg').animate({'opacity':0}, 1000);
           $('#sliderWrapper').stop().show("slide", { direction:"down" }, 1500);
      } else {
           $('#bg').animate({'opacity':1}, 1000);                                
           $('#sliderWrapper').stop().hide("slide", { direction:"down" }, 1500); 
      }          
 }) 
```

# android - 滚动视图调整大小

> ID：11929500
> 
> 赞同：0
> 
> 时间：2012-08-13T06:58:53.493
> 
> 标签：android, android-layout, scrollview

我的组件有问题`ScrollView`。如何防止拉伸`ScrollView`？

我有一个`LinearLayout`with`weight_sum = 2`和一个`ImageView`with`layout_weight = 1`和一个`ScrollView`with`layout_weight = 1`

有 2、3 个元素时看起来不错`ScrollView`，这意味着它不需要滚动。当我添加更多元素来`ScrollView`调整大小时，它的高度变得越来越大，并且`ImageView`变得越来越小。

这些项目的高度是`wrap_content`。

如何防止这个问题？

代码：

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:layout_weight="3"
    android:orientation="vertical"
    android:weightSum="2" >

    <ImageView
        android:id="@+id/pregamePlayerNames"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/en_player_names" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_weight="1" >

        <LinearLayout
            android:id="@+id/pregamePlayerNamesScroll"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/home_player_names_ram"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:02:55.363

如果要动态划分空间，请将权重设置为 height=0dp 的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:05:47.750

如果您`weight`要布局，则无需指定`height`

```
 <ImageView
    android:id="@+id/pregamePlayerNames"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:layout_gravity="center"
    android:background="@drawable/en_player_names" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

     .................
     ................ 
```

# c#-4.0 - 结合 C++/CLI、x86、x64 和强命名

> ID：11929509
> 
> 赞同：1
> 
> 时间：2012-08-13T06:59:51.850
> 
> 标签：c#-4.0, c++-cli

让我直奔主题：

**主要应用：**

C# (4.0)，AnyCPU。

**图书馆：**

用 C++/CLI 编写的本机 .dll 包装器。编译成两个版本；x86 和 x64，都使用相同的 .snk 密钥签名（使用[此](http://blogs.msdn.com/b/vcblog/archive/2011/03/11/10140139.aspx)解决方法）

**限制：**

最后，x86 和 x64 平台需要一个单独的分发包。由于对其他强命名库的引用，主应用程序需要强名称。使用托管 C# 和 P/Invoke 重写库绝对是最后的出路。

**问题：**

只要主应用程序在编译时引用运行时所需的库版本（x86 或 x64），这一切都可以正常工作。

移动相同的编译输出 - 并在安装期间用正确的平台版本交换库 - 不起作用，因为库的签名与引用的签名不同。

在没有任何强命名的测试应用程序中，我可以根据需要在它们之间切换。

**问题：**

有没有办法在设置的限制内启用 x86 和 x64 库之间的切换，或者强命名阻止了除了重写库之外的任何可能的解决方案？

让我澄清一下，这不是关于找到正确的 .dll（如在[此处](https://stackoverflow.com/questions/108971/using-side-by-side-assemblies-to-load-the-x64-or-x32-version-of-a-dll/156024#156024)讨论）的问题，而是关于一旦找到就能够加载 .dll 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:10:14.897

@Damien_The_Unbeliever's comment got me thinking and he is right in that the strong names are the same, and it was not the actual issue.

I found another difference between the two versions of the library; the output name was set to `nnn.dll` and `nnnx64.dll`. Changing it so that both have the same output name magically made it all work.

Perhaps someone knows why such a setting matters, I certainly don't.

# git - Git-归档旧的提交

> ID：11929510
> 
> 赞同：7
> 
> 时间：2012-08-13T06:59:57.560
> 
> 标签：git

我想使用 Git 跟踪大型工作目录（许多演出）上的微小更改（一天几次）。数据将混合二进制/纯文本。二进制数据几乎不会像文本信息那样变化。很少需要访问旧的提交，并且可能很慢，而最近的历史需要快速。

我不想永久丢失旧数据，只需将其移动到备份服务器或其他东西。Git 中是否有一些东西允许存档旧历史并仅在本地存储库中保留某个子集？

如果没有，是否有更适合此目的的工具？我喜欢 Git，因为我知道它并且我想要版本控制和差异。我不需要 Git 的任何高级功能（比如分支/合并，不是分布式的），所以任何其他类似的 VCS 都会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:37:41.183

如果您正在使用 进行修补`git format-patch`，则使用创建一个浅克隆`git clone --depth <depth>`并继续。但是，您可能不是，在这种情况下，您可能会发现[这个答案](https://stackoverflow.com/questions/6941889/is-git-clone-depth-1-shallow-clone-more-useful-than-it-makes-out)和[这个答案](https://stackoverflow.com/questions/6900103/why-cant-i-push-from-a-shallow-clone)很有用。第二个结论`git checkout --orphan`是，这可能是获得你想要的东西的最佳方式。当然，您仍然需要在本地克隆一次完整的历史记录以创建一个较小的分支。

如果您喜欢冒险，非常想要这个，并且愿意忍受更复杂的推送过程，那么创建补丁`git format-patch`并将它们应用到另一个存储库`git am`既不难执行也不难编写脚本。它会在你的推送过程中添加一个额外的层——例如，在浅存储库上创建一个补丁，以编程方式应用到一个完整的存储库，它可以是本地的，也可以是其他地方的，从后者推送。时间和麻烦可能不值得，但它肯定是可能的。

# c# - 在存储过程中使用联接时在 C# 中的多个表中显示网格上的数据

> ID：11929512
> 
> 赞同：0
> 
> 时间：2012-08-13T07:00:26.693
> 
> 标签：c#, stored-procedures, datagridview, inner-join

我正在用 C# 编写代码，我想从具有关系的多个表中选择 datagrid 中的数据...这里我有一个`Client`&`Item_Configuration`作为父表和子表，它具有来自and`Item_Order`的外键，我只想从中获取数据所有三个表并显示在数据网格上`Client``Item_Configuration`

我的存储过程是：

```
ALTER PROC [dbo].[Full_SP]
    @clientName varchar(50) = null,
    @itemName varchar(50) = null,
    @clientId_FK varchar(50) = null,
    @operation int
AS
BEGIN
    SET NOCOUNT ON;

    if @operation = 2
    BEGIN
        SELECT 
            Client.clintName, Item_Configuration.itemName,
            Item_Order.orderId, Item_Order.orderDate, Item_Order.quantity,
            Item_Order.status, Item_Order.totalPrice 
        FROM
            Item_Order 
        INNER JOIN 
            Client ON Item_Order.clintId_FK = Client.clientId
        JOIN
            Item_Configuration ON Item_Order.itemId_FK = Item_Configuration.itemId
     END
END 
```

我对数据网格的搜索功能在 C# 中，即

```
private void btnSrchFull_Click(object sender, EventArgs e)
{
        SqlConnection conn1 = new SqlConnection();

        try
        {
            conn1.ConnectionString = "server=.\\ms2k5;database=Info_Connect;Trusted_Connection=true";
            conn1.Open();

            SqlCommand selectFull = new SqlCommand("Full_SP", conn1);
            selectFull.CommandType = CommandType.StoredProcedure;

            selectFull.Parameters.Add("@operation", SqlDbType.VarChar);
            selectFull.Parameters["@operation"].Value = 2;

            SqlDataReader myReader = selectFull.ExecuteReader();

            List<FullFill> list = new List<FullFill>();

            while (myReader.Read())
            {
                if (myReader.HasRows)
                {
                    FullFill fullfill = new FullFill();
                    fullfill = MapFullfill(myReader, fullfill);
                    list.Add(fullfill);
                }
            }

            myReader.NextResult();

            foreach (FullFill ffll in list)
            {
                if (myReader.Read() && myReader.HasRows)
                {
                       MapClient(myReader, ffll);
                }
            }

            myReader.NextResult();

            foreach (FullFill ffll1 in list)
            {
                if (myReader.Read() && myReader.HasRows)
                {
                    MapItem(myReader, ffll1);
                }
            }

            dataGridView1.DataSource = list;
            double totPrice = 0;

            for (int i = 0; i < dataGridView1.RowCount; i++)
            {
                    totPrice = totPrice +
                    Convert.ToDouble(dataGridView1.Rows[i].Cells[5].Value);
                    totCost.Text = totPrice.ToString();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace + MessageBoxIcon.Error);
        }
        finally
        {
            if (conn1.State != ConnectionState.Closed)
            {
                conn1.Close();
            }
        }
    }

    private FullFill MapItem(SqlDataReader myReader, FullFill itemName)
    {
        itemName.ItemName =myReader["itemName"].ToString();
        return itemName;
    }

    private FullFill MapClient(SqlDataReader myReader, FullFill clientName)
    {
        clientName.ClientName = myReader["clientName"].ToString();
        return clientName;
    }

    private FullFill MapFullfill(SqlDataReader myReader, FullFill fullfill)
    {
        fullfill.OrderNo = myReader["orderId"].ToString();

        fullfill.OrderDate = Convert.ToDateTime(myReader["orderDate"]);
        fullfill.Quantity = Convert.ToInt32(myReader["quantity"]);
        fullfill.Status = myReader["status"].ToString();
        fullfill.TotalPrice = Convert.ToDouble(myReader["totalPrice"]);

        return fullfill;
    } 
```

我为属性创建了一个类，即

```
class FullFill
{
    public string orderNo;
    public string clientName;
    public DateTime orderDate;
    public string itemName;
    public int quantity;
    public double totCost;
    public string status;

    public string OrderNo { get { return orderNo; } set { orderNo = value; } }
    public string ClientName { get { return clientName; } set { clientName = value; } }
    public DateTime OrderDate { get { return orderDate; } set { orderDate = value; } }
    public string ItemName { get { return itemName; } set { itemName = value; } }
    public int Quantity { get { return quantity; } set { quantity = value; } }
    public double TotalPrice { get { return totCost; } set { totCost = value; } }
    public string Status { get { return status; } set { status = value; } }
    }
 } 
```

问题是我只能从子表（Item_Order）中找到数据我没有从父表中获取数据。

# code-snippets - Sublime Text 2 - Perl 格式字符串语法（代码片段）

> ID：11929516
> 
> 赞同：0
> 
> 时间：2012-08-13T07:00:46.173
> 
> 标签：code-snippets, sublimetext2

我正在使用以下代码片段：

`Entity${0/(\w+)/\u\1/g}`

这确保了第一个字符为大写，其余为小写。我还将如何确保删除连字符 (-) 和特殊字符？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:15:22.167

通过执行以下操作弄清楚了：

`Entity${0/(\w+)([-\s]*)/\u\1/g}`

目前，这只会删除连字符 (-)。我想删除除字母数字字符以外的所有字符。

如果有更清洁的方法，我非常欢迎您接受您的回答。

# android - 在 Android 框架和应用程序之间共享数据

> ID：11929523
> 
> 赞同：1
> 
> 时间：2012-08-13T07:01:21.043
> 
> 标签：android, frameworks, sharedpreferences

是否可以在 Android 框架和应用程序之间共享数据？

我正在修改 Android 框架登录组件，以便在登录时保存一个变量，然后由另一个应用程序检索。我正在尝试使用 SharedPreferences，我的代码如下所示：

在 com.android.internal.policy.impl.PasswordUnlockScreen.java 中，我将以下代码写入 SharedPreferences。

```
SharedPreferences prefs = getContext().getSharedPreferences("mypref", Context.MODE_WORLD_READABLE);
SharedPreferences.Editor editor = prefs.edit();
editor.putString("mypref", "my data"
editor.commit(); 
```

在我的另一个应用程序中，我可以从中读取以下代码。

```
Context con;
String data;
try {
  con = this.createPackageContext("com.android.internal.policy.impl", 0);
  SharedPreferences pref = con.getSharedPreferences("mypref", Context.MODE_PRIVATE);
  data = pref.getString("mypref", "0")
} catch (NameNotFoundException e) {
  data = "0";
  Log.e("No data shared", e.toString());
} 
```

当我运行代码时，我不断收到 NameNotFoundException，因为它声称找不到应用程序包 com.android.internal.policy.impl，因此我的数据始终为“0”。

如何在这两个组件之间共享数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:22:11.140

请`Content Providers`从[developer.android.com](http://developer.android.com/guide/topics/providers/content-providers.html)看一下，这可能会对您有所帮助。[这是一个例子](http://www.devx.com/wireless/Article/41133/1763/page/2)

# c# - 如何在 Autofac 注册中返回 NULL？

> ID：11929529
> 
> 赞同：10
> 
> 时间：2012-08-13T07:01:48.407
> 
> 标签：c#, exception-handling, autofac

有没有办法用autofac返回null？如果我这样做，我会得到一个例外。

在某些情况下，我无法解析对象，应该返回 null。

```
m_builder.Register < IMyObject > ((c, p) => {
  //do something

  if (...) {
    //cant create/resolve object (error case)
    return null;
  } else {
    return new IMyObject();
  }

}).InstancePerHttpRequest(); 
```

是否有内置方法可以使用 autofac 执行此操作？

编辑：我想返回 null。或者做其他事情来通知用户创建不成功。如果我返回 null 这个异常将被抛出：

依赖解析异常：

> 注册以创建“IMyObject”实例的委托返回 null。

堆栈跟踪：

> 在 Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable 1 参数) 在 Autofac.Core.Resolving.InstanceLookup.b__0() 在 Autofac.Core.Lifetime.LifetimeScope.GetOrCreateAndShare(Guid id, Func 1 参数) 在 Autofac.Core.Resolving.ResolveOperation.Execute（IComponentRegistration 注册，IEnumerable 1 参数） 在 Autofac.ResolutionExtensions.TryResolveService（IComponentContext 上下文，服务服务，IEnumerable 1 参数） 在 Autofac.ResolutionExtensions.Resolve[TService]（IComponentContext 上下文，IEnumerable` 1个参数）`1 parameters)
> at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`
> 
> `1 creator)
> at Autofac.Core.Resolving.InstanceLookup.Execute() at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`
> `1 parameters)
> at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`
> `1 parameters, Object& instance) at Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`
> 
> 在 Autofac.ResolutionExtensions.Resolve[TService](IComponentContext context, Parameter[] parameters)
> 在 RestApi.Controllers.MyApiController.CreateEntityContext() 在 C:...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:59:26.147

AFAIK，在注册中返回 NULL 总是会引发异常。有关如何处理的一些想法，请查看[此答案](https://stackoverflow.com/a/11486759/540663)。

# c# - 使用实体框架流利语法或内联语法编写递归 CTE

> ID：11929535
> 
> 赞同：16
> 
> 时间：2012-08-13T07:02:40.707
> 
> 标签：c#, sql-server, linq, entity-framework

我不熟悉 SQL 和实体框架（ADO.NET 实体映射）中的这种**递归**。我正在做一个评论管理，我有一个`Comments`表格，表格包含列`NewsID, CommentID, ParentCommentID, IndentLevel, CreatedTime`。

我正在尝试获取特定新闻项目的评论列表，其中所有评论都根据父项下的子项和创建时间排列，如下所示：

```
CommentID | time | ParentCommentID
Guid1     |  t1  | null
Guid4     |  t4  | Guid1
Guid2     |  t2  | null
Guid3     |  t3  | Guid2 
```

必须优先考虑子父关系，然后是创建时间。

到目前为止我所了解的是（来自互联网资源和以前的 stackoverflow Q/A）

*   如图所示，这些递归查询很慢。并且使用实体框架执行此操作甚至更慢。但它可以实现。
*   因此，可以通过在 SQL Server 中创建存储过程并使用功能导入调用它来完成。另一件事是在实体框架中使用 Linq。
*   在 SQL Server 中，它以这种格式使用

SQL：

```
WITH cte_name ( column_name [,...n] ) 
AS 
( 
CTE_query_definition –- Anchor member is defined. 
UNION ALL 
CTE_query_definition –- Recursive member is defined referencing cte_name. 
) 
-- Statement using the CTE 
SELECT * 
FROM cte_name 
```

*   但在尝试这个之前，我想尝试一下 Linq。

为此，我参考了这个我有想法的链接： [https ://stackoverflow.com/a/6225373/892788](https://stackoverflow.com/a/6225373/892788)

但我试图理解代码但徒劳无功。有人可以给我一个关于在实体框架中编写递归 CTE 的更好更详细的解释吗？

```
private IEnumerable<NewsComment> ArrangeComments(IEnumerable<NewsComment> commentsList, string parentNewsComntID, int level) 
{
        Guid parentNewsCommentID;
        if (parentNewsComntID != null)
        {
            parentNewsCommentID = new Guid(parentNewsComntID);
        }
        else
            parentNewsCommentID = Guid.Empty;

        return commentsList.Where(x => x.ParentCommentID == parentNewsCommentID).SelectMany(x => new[] { x }.Concat(ArrangeComments(commentsList, x.NewsCommentID.ToString(), level + 1)); 

} 
```

我在一个方法中使用它如下：

```
return ArrangeComments(commentList,null , 0); 
```

我已经尝试过了，似乎我无处可去。尽管有关于 SQL 递归的解释，但 Linq 的示例较少，而且由于不太熟悉，对我来说也很模糊。有人可以帮我理解 Linq 中的这个 CTE 递归很棒吗

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-13T07:33:44.307

AFAIK 在 LINQ 和 EF 中都不支持递归 CTE。解决方案是将 CTE 公开为视图。[有关使用 EF 代码优先和迁移的递归或分层查询](https://github.com/microsoftarchive/msdn-code-gallery-community-m-r/tree/master/Recursive%20or%20hierarchical%20queries%20using%20EF%20Code%20First%20and%20Migrations)的文章展示了如何使用 EF 代码优先迁移部署此类视图。

尝试通过进行递归客户端迭代来模拟 CTE 并不能扩展到大型数据集，并导致与服务器的闲聊交换。请注意您的 EF 代码如何`IEnumerable`不返回`IQueryable`，这意味着它实现了每个级别，然后将每个条目的下一个级别连接为*单独的请求*。基于 LINQ 的解决方案适用于条目数有限的浅层次结构（请注意，许多项目*可以*有这样的数据布局，用户帖子/答案是典型示例），但在具有许多元素的深层次结构下会崩溃。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T07:34:26.027

将 CTE 查询放到 StoredProcedure，然后从 Code 中调用它。EF 提供了执行此操作的所有方法（调用 SP 并检索结果）。我为自己做了同样的事情，效果很好。

[在 linq-to-sql 中](https://stackoverflow.com/questions/584841/common-table-expression-cte-in-linq-to-sql)使用 Linq 写入 CTE 查询是不可能的 公用表表达式 (CTE)？

Sample ArrangeComments 是一个调用自身的递归过程，但我敢质疑它的性能。它从数据库中提取记录，然后在内存中应用操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-14T19:43:39.137

在花了几个小时阅读这个问题后，我决定用 C# 来完成，而不必创建数据库视图。

**注意：**仅将其用于非性能关键操作。[来自http://nosalan.blogspot.se/2012/09/hierarchical-data-and-entity-framework-4.html](http://nosalan.blogspot.se/2012/09/hierarchical-data-and-entity-framework-4.html)的 1000 个节点性能示例。

```
Loading 1000 cat. with navigation properties took 15259 ms 
Loading 1000 cat. with stored procedure took 169 ms 
```

代码：

```
public class Category 
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public string Name { get; set; }

    public int? ParentId { get; set; }

    public virtual Category Parent { get; set; }

    public virtual ICollection<Category> Children { get; set; }

    private IList<Category> allParentsList = new List<Category>();

    public IEnumerable<Category> AllParents()
    {
        var parent = Parent;
        while (!(parent is null))
        {
            allParentsList.Add(parent);
            parent = parent.Parent;
        }
        return allParentsList;
    }

    public IEnumerable<Category> AllChildren()
    {
        yield return this;
        foreach (var child in Children)
        foreach (var granChild in child.AllChildren())
        {
            yield return granChild;
        }
    }   
} 
```

# python - Python：多次拆分字符串；嵌套数据结构

> ID：11929537
> 
> 赞同：0
> 
> 时间：2012-08-13T07:02:51.300
> 
> 标签：python

我是 python 新手，所以对简单的问题表示歉意。我当然错过了一些让我感到困惑的东西。

这与嵌套、拆分有关，我猜是 for 循环，但它不适合我。

所以这是我的原始字符串：

```
name_scr = 'alvinone-90,80,70,50|simonthree-99,80,70,90|theotwo-90,90,90,65' 
```

我正在尝试创建一个数据结构——其中包含名称和分数的 dict。

所以这就是我开始的：

```
 test_scr = { } 
    new_name_scr = [list.split('-') for list in name_scr.split('|')]
# [['alvinone', '90,80,70,50'], ['simonthree', '99,80,70,90'], ['theotwo', '90,90,90,65']]

# this is not  right, and since the output is a list of lists, I cannot split it again 
```

我在逗号处第三次被困住了。那么我尝试以下方法：

```
test_scores = {}
for student_string in name_scr.split('|'):
  for student in student_string.split('-'):
    for scores in student.split(','):
      test_scores[student] = [scores]

#but my result for test_scores (below) is wrong
#{'alvinone': ['alvinone'], '99,80,70,90': ['90'], 'theotwo': ['theotwo'], '90,80,70,50': ['50'], '90,90,90,65': ['65'], 'simonthree': ['simonthree']} 
```

我希望它看起来像这样：

```
 {'alvinone': [99 80 70 50], 'simonthree': [90 80 70 90], 'theotwo': [90 90 90 65]} 
```

所以当我这样做时：

```
print test_scores['simonthree'][2] #it's 70 
```

请在这里帮助我。请记住，我是 python 的新手，所以我还不太了解。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:09:30.627

您的拆分是正确的，您需要做的就是遍历值并将其转换为 dict，并轻松访问 dict 键的元素，您的值应该是一个列表而不是一个字符串......

注意：在拆分时，您将变量名用作“列表”，这不是一个好主意。

检查这个...

```
In [2]: str = 'alvinone-90,80,70,50|simonthree-99,80,70,90|theotwo-90,90,90,65'

In [3]: str_list = [l.split('-') for l in str.split('|')]

In [4]: str_list
Out[4]:
[['alvinone', '90,80,70,50'],
 ['simonthree', '99,80,70,90'],
 ['theotwo', '90,90,90,65']]

In [5]: elem_dict = {}

In [6]: for elem in str_list:
   ...:     elem_dict[elem[0]] = [x for x in elem[1].split(',')]
   ...:

In [7]: print elem_dict
{'simonthree': ['99', '80', '70', '90'], 'theotwo': ['90', '90', '90', '65'], 'alvinone': ['90
', '70', '50']}

In [8]: elem_dict['simonthree'][2]
Out[8]: '70' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:15:24.380

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> for i in s.split('|'):
...   k = i.split('-')
...   d[k[0]] = k[1].split(',')
... 
>>> d['simonthree']
['99', '80', '70', '90'] 
```

如果您想将它们设置为`int`：

```
>>> for i in s.split('|'):
...   k = i.split('-')
...   d[k[0]] = map(int,k[1].split(','))
... 
>>> d['simonthree']
[99, 80, 70, 90] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:16:18.190

可以使用二元组列表初始化 dict：

```
new_name_scr = [x.split('-') for x in name_scr.split('|')]
test_scores = dict((k, v.split(",")) for k, v in new_name_scr) 
```

如果你使用python2.7+，你也可以使用dict理解：

```
test_scores = {k: v.split(",") for k, v in new_name_scr} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T07:13:08.787

```
name_scr = 'alvinone-90,80,70,50|simonthree-99,80,70,90|theotwo-90,90,90,65'
test_scr = {}

for persinfo in name_scr.split('|'):
    name,scores = persinfo.split('-')
    test_scr[name] = map(int,scores.split(','))

print test_scr 
```

`name,scores = [elm0, elm1]`将列表解压缩为两个变量，以便 name 包含列表元素 0，并对列表元素 1 进行评分。

`map(int,['0', '1', '2'])`将字符串列表转换为整数列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T07:17:39.640

```
>>> splitter = lambda ch: lambda s: s.split(ch)
>>> name_scr = 'alvinone-90,80,70,50|simonthree-99,80,70,90|theotwo-90,90,90,65'
>>> dict( (k,v.split(',')) for k,v in map(splitter('-'), name_scr.split('|')))

{'simonthree': ['99', '80', '70', '90'], 'theotwo': ['90', '90', '90', '65'], 'alvinone': ['90', '80', '70', '50']} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T07:21:31.483

```
str = 'alvinone-90,80,70,50|simonthree-99,80,70,90|theotwo-90,90,90,65'
a = dict((i.split("-")[0], [x for x in i.split("-")[1].split(',')])  for i in str.split("|")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T07:25:35.657

[这看起来像是PyYAML](http://pyyaml.org/)的完美用例。

```
import yaml

# first bring the string into shape
name_scr_yaml = (
    name_scr.replace("|","\n").replace("-",":\n  - ").replace(",","\n  - "))
print name_scr_yaml

# parse string:
print yaml.load(name_scr_yaml) 
```

输出是：

```
alvinone:
  - 90
  - 80
  - 70
  - 50
simonthree:
  - 99
  - 80
  - 70
  - 90
theotwo:
  - 90
  - 90
  - 90
  - 65
{'simonthree': [99, 80, 70, 90], 'theotwo': [90, 90, 90, 65], 'alvinone': [90, 80, 70, 50]} 
```

# multithreading - Windows 服务和计时器

> ID：11929538
> 
> 赞同：1
> 
> 时间：2012-08-13T07:02:54.240
> 
> 标签：multithreading, timer, windows-services

我正在学习创建 Windows 服务和线程。我正在使用同事提供的帮助构建线程服务的库，但这并没有给我基本的知识。

可以说我将有一个长时间运行的服务（比网络上可用的基本示例稍有进步），需要每 15 秒唤醒一次，然后执行其操作（基本上将始终运行）。操作涉及在数据库中查找状态，然后执行操作。

在这种情况下应如何处理：
1\. 处置线程
2\. 在动作执行时间比间隔时间长的情况下。

我找到了以下示例，但在上述两点方面存在问题。请记住，该服务将始终运行。

[http://www.java2s.com/Tutorial/CSharp/0280__Development/CreatethedelegatethattheTimerwillcall.htm](http://www.java2s.com/Tutorial/CSharp/0280__Development/CreatethedelegatethattheTimerwillcall.htm)

```
using System;
using System.Threading;

class MainClass
{
  public static void CheckTime(Object state) 
  {
    Console.WriteLine(DateTime.Now);
  }

  public static void Main() 
  {
    TimerCallback tc = new TimerCallback(CheckTime);

    Timer t = new Timer(tc, null, 1000, 500);

    Console.WriteLine("Press Enter to exit"); 
    int i = Console.Read();

    // clean up the resources
    t.Dispose();
    t = null;
  }
} 
```

所以在我的例子中，会发生什么
1\. 停止事件
2\. 开始事件看起来不错吗？
3\. 如果队列中没有任何内容会发生什么？
4\. 如果动作花费的时间比间隔时间长怎么办？

```
public partial class QueueService : ServiceBase
    {

        public QueueService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            try
            {
                TimerCallback tc = new TimerCallback(CheckQueue);

            Timer t = new Timer(tc, null, 10000, 15000); //first time wait for 10seconds and then execte every 15seconds

            }
            catch (Exception ex)
            {
        what should i be checking here and then also make sure that the threading/timer doesn't stop. It should still execute every 15 seconds
            }
        }

        protected override void OnStop()
        {

        what needs to go here...

        }

        private static void CheckQueue(Object state) 
    {
            ... Connect to the DB
        ... Check status
        ... if queue status found then perform actions
        . A
        . C
        . T
        . I
        . O
        . N
        . S
        ... if end

    }

    } 
```

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:15:46.567

1.  处理定时器。
2.  不完全的。您需要在类级别声明计时器，否则它将在几次迭代后被收集。
3.  没有什么。
4.  在检查队列之前停止计时器，并在完成后重新启动它。这样您就不会遇到共享内存或其他冲突的麻烦。

    公共部分类 QueueService : ServiceBase {

    定时器定时器；

    ```
     public QueueService()
     {
         InitializeComponent();
     }

     protected override void OnStart(string[] args)
     {
        try
        {
           TimerCallback tc = new TimerCallback(CheckQueue);

           timer = new Timer(tc, null, 10000, 15000);
        }
        catch (Exception ex)
        {

        }
    }

    protected override void OnStop()
    {
        if (timer != null)
            timer.Dispose();
    }

    private static void CheckQueue(Object state) 
    {
        timer.Change(Timeout.Infinite, 0);

        ... Connect to the DB
        ... Check status
        ... if queue status found then perform actions
        . A
        . C
        . T
        . I
        . O
        . N
        . S
        ... if end

        timer.Change(10000, 15000);

    } 
    ```

    }

# asp.net - 下拉不绑定内部 Ajax 更新面板

> ID：11929541
> 
> 赞同：0
> 
> 时间：2012-08-13T07:03:05.097
> 
> 标签：asp.net, .net, ajax, updatepanel, scriptmanager

我正在使用下面的代码在选择的另一个下拉列表中填充下拉列表。但不知何故，当在 ddlTypes 中选择一个项目时，不会填充 ddlSubTypes

在 ddlTypes 的 selectedindex 更改事件上，我正在绑定 ddlSubTypes。

```
<tr>
    <td class="style3">
        <asp:ScriptManager ID="scma" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UP1" runat="server">
            <ContentTemplate>
                <asp:DropDownList ID="ddlTypes" runat="server" Width="200px" AutoPostBack="true" OnSelectedIndexChanged="ddlTypes_SelectedIndexChanged1">
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel>
    </td>
</tr>
<tr>
    <td class="style3">
        <asp:UpdatePanel ID="UP2" runat="server">
            <ContentTemplate>
                <asp:DropDownList ID="ddlSubTypes" runat="server" Width="200px">
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel>
    </td>
</tr>

Protected Sub ddlTypes_SelectedIndexChanged1(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlTypes.SelectedIndexChanged
        Try
            'Populate schemes
            ddlSubTypes.Items.Clear()
            Dim ID As Integer = ddlTypes.SelectedValue
            Dim dt As DataTable = IterateSubtypesContents(ID)

            ddlSubTypes.DataTextField = dt.Columns("Type").ToString()
            ddlSubTypes.DataValueField = dt.Columns("ID").ToString()
            ddlSubTypes.DataSource = dt
            ddlSubTypes.DataBind()

            UP2.Update()
        Catch ex As Exception

        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:09:40.393

您应该向第二个更新面板添加一个触发器，该触发器在第一个下拉列表的 selectedIndexChanged 事件上触发。

```
<asp:UpdatePanel ID="UP2" runat="server">
  <ContentTemplate>
    <asp:DropDownList ID="ddlSubTypes" runat="server" Width="200px">
    </asp:DropDownList>
   </ContentTemplate>
   <Triggers>
     <asp:AsyncPostBackTrigger ControlID="Control That Triggers this Panel" EventName="Desired Event that triggers" />
   </Triggers>
</asp:UpdatePanel> 
```

# java - 当我们在 Map 中查找 key 时如何忽略大小写敏感？

> ID：11929542
> 
> 赞同：13
> 
> 时间：2012-08-13T07:03:07.563
> 
> 标签：java

> **可能重复：**
> [有没有一种好方法可以让 Map<String, ?> 忽略大小写？](https://stackoverflow.com/questions/212562/is-there-a-good-way-to-have-a-mapstring-get-and-put-ignoring-case)

在 java.util.Map 中搜索键时如何忽略区分大小写？

我想知道我们是否可以通过忽略大小写来查找地图中的键。

```
Example,
   Map<String, Integer> lookup = new HashMap<String, Integer>();   
   lookup.put("one", 1);   
   lookup.put("two", 2);   
   lookup.put("three", 3); 
```

用户输入可能是“ONE”或“one”。在这种情况下，而不是将用户输入转换为小写。有什么方法可以通过任何方法忽略密钥敏感吗？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-13T07:10:39.983

为什么不使用 a[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)而不是`HashMap`，那么您可以使用不区分大小写的顺序指定 Comparator ( [`String.CASE_INSENSITIVE_ORDER`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER))：

```
public static void main(String[] args) throws Exception {

    Map<String, Integer> lookup = 
        new TreeMap<String, Integer>(String.CASE_INSENSITIVE_ORDER);

    lookup.put("One", 1);
    lookup.put("tWo", 2);
    lookup.put("thrEE", 3);

    System.out.println(lookup.get("Two"));
    System.out.println(lookup.get("three"));
} 
```

输出：

```
2
3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T10:30:31.410

`HashMap`使用键的`equals(Object)`方法（与 结合`hashCode()`），并且`String.equals()`区分大小写。所以如果你想要一个不区分大小写的键，你必须用适当的`equals()`and定义你自己的键类`hashCode()`。总的来说，可能更容易`toLowerCase()`在所有键字符串上使用。

# c# - Datetime.now 作为 TimeSpan 值？

> ID：11929554
> 
> 赞同：24
> 
> 时间：2012-08-13T07:04:19.310
> 
> 标签：c#, datetime, timespan, seconds

我需要以秒为单位减去当前日期`myDate1`时间。

```
DateTime myDate1 = new DateTime(1970, 1, 9, 0, 0, 00);
DateTime myDate2 = DateTime.Now;

TimeSpan myDateResult = new TimeSpan();

myDateResult = myDate2 - myDate1; 
```

.
.
我尝试了不同的方法来计算，但没有效果。

```
TimeSpan mySpan = new TimeSpan(myDate2.Day, myDate2.Hour, myDate2.Minute, myDate2.Second); 
```

.
它的计算方式无关紧要，输出应该只是这些值与以秒为单位的值的差异。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-03-25T09:23:33.617

代码：

```
TimeSpan myDateResult = DateTime.Now.TimeOfDay; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-13T07:18:58.577

你的代码是正确的。您将时间差作为一个`TimeSpan`值，因此您只需要使用该`TotalSeconds`属性即可将其获取为秒：

```
DateTime myDate1 = new DateTime(1970, 1, 9, 0, 0, 00);
DateTime myDate2 = DateTime.Now;

TimeSpan myDateResult;

myDateResult = myDate2 - myDate1;

double seconds = myDateResult.TotalSeconds; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-13T07:06:37.807

你有没有尝试过类似的东西

```
DateTime.Now.Subtract(new DateTime(1970, 1, 9, 0, 0, 00)).TotalSeconds 
```

[DateTime.Subtract 方法 (DateTime)](http://msdn.microsoft.com/en-us/library/8ysw4sby.aspx)

[TimeSpan.TotalSeconds 属性](http://msdn.microsoft.com/en-us/library/system.timespan.totalseconds.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T07:06:54.117

怎么样

```
myDateResult.TotalSeconds 
```

[http://msdn.microsoft.com/en-us/library/system.timespan.totalseconds](http://msdn.microsoft.com/en-us/library/system.timespan.totalseconds)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-13T07:12:51.703

你需要得到`.TotalSeconds`你的时间跨度的财产：

```
DateTime myDate1 = new DateTime(2012, 8, 13, 0, 05, 00);
DateTime myDate2 = DateTime.Now;
TimeSpan myDateResult = new TimeSpan();
myDateResult = myDate2 - myDate1;
MessageBox.Show(myDateResult.TotalSeconds.ToString()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-13T07:16:26.020

您可以使用`Subtract`方法：

```
DateTime myDate1 = new DateTime(1970, 1, 9, 0, 0, 00);
DateTime myDate2 = DateTime.Now;
TimeSpan ts = myDate2.Subtract(myDate1);
MessageBox.Show(ts.TotalSeconds.ToString()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-13T03:24:56.743

```
TimeSpan myDateResult;

myDateResult = DateTime.Now.Subtract(new DateTime(1970,1,9,0,0,00));
myDateResult.TotalSeconds.ToString(); 
```

# actionscript-3 - 我试图从 SWFthrogugh AS3 生成 PNG 图像...但无法正常工作...请告诉我出了什么问题

> ID：11929555
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:04:26.043
> 
> 标签：actionscript-3

我试图从 SWFthrogugh AS3 生成 PNG 图像...但无法正常工作...请告诉我出了什么问题...

```
 package {
    import com.adobe.images.PNGEncoder; 
    import flash.display.BitmapData;    
    import flash.display.Bitmap;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.IEventDispatcher;
    import flash.net.URLRequest;
    import flash.utils.ByteArray;
    import flash.net.URLLoader;
    import flash.net.URLVariables;
    import com.dynamicflash.util.Base64;
    import flash.net.URLRequestMethod;
    import flash.net.URLLoaderDataFormat;
    import flash.net.navigateToURL;
    import flash.net.FileReference;
    import flash.system.ApplicationDomain;
    import flash.system.LoaderContext;  

    public class SampleCircle extends Sprite
    {
        public var loader:Loader;
        public var loaderA:Loader;
        public var ba: ByteArray;
        public function SampleCircle()
        {
            drawSWF();           
        }
        public function drawSWF():void
        {

            var request:URLRequest = new URLRequest("E:/Workbook/swftoimage_visual_c_sharp/bin/Debug/dw_mxml_ar_kaplab_treemap_chartAAA.swf"); 
            loader = new Loader(); 
            loader.load(request); 
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
            addChild(loader);
        }
        public function onComplete(e:Event):void
        {

            var b: BitmapData = new BitmapData(stage.stageWidth,stage.stageHeight,false,0xDEDEDE);  
            b.draw(loader);             
            ba = PNGEncoder.encode(b);
            loader.loadBytes(ba);           
            addChild(loader);               
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:43:15.817

我设法使用以下代码获取图像（代码中仍然存在问题）...谢谢

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
    layout="absolute"
    minWidth="955" minHeight="600"
    backgroundColor="white" viewSourceURL="srcview/index.html" initialize="initApp()">

<mx:Script>
    <![CDATA[
        import mx.core.IUIComponent;
        import mx.graphics.ImageSnapshot;
        import mx.graphics.codec.PNGEncoder;
        import flash.net.FileReference;
        import mx.events.CloseEvent;
        import mx.events.FlexEvent;
        import mx.controls.Alert;

        private var image:ImageSnapshot = new ImageSnapshot;
        private var dataXML:String="<chart labelDisplay='Normal' xAxisName='' yAxisName='' pyAxisName='' syAxisName='' rotateYAxisName='' caption='' subCaption='' baseFont='Regular' baseFontSize='10' baseFontColor='' decimalPrecision='' thousandSeparator=',' decimalSeparator='.' numberPrefix='' numberSuffix='' sNumberPrefix='' sNumberSuffix='' bgColor='' showBorder='1' YAxisMinValue='' YAxisMaxValue='' pyAxisMinValue='' pyAxisMaxValue='' syAxisMinValue='' syAxisMaxValue='' showLabels='1' showValues='1' showLegend='Y' legendPosition='Right'><categories><category label='Unmapped'/><category label='FY 2002 - 03'/><category label='FY 2003 - 04'/><category label='FY 2004 - 05'/><category label='FY 2005 - 06'/><category label='FY 2006 - 07'/><category label='FY 2007 - 08'/><category label='FY 2008 - 09'/><category label='FY 2009 - 10'/><category label='FY 2010 - 11'/></categories><dataset seriesName='Base Amount'><set value='-65770'/><set value='71461203'/><set value='66548822'/><set value='87063456'/><set value='261797187'/><set value='282962118'/><set value='3830823027'/><set value='16001588683'/><set value='22514728943'/><set value='23822586701'/></dataset></chart>";
          private function initApp():void
          {
            chart_1.source="MSCombi2D.swf?chartWidth=100&chartHeight=100&registerWithJS=1&dataXML="+dataXML;
          }
        private function takeSnapshot(source:IBitmapDrawable):void {
           // var imageSnap:ImageSnapshot = ImageSnapshot.captureImage(source);
           // var imageByteArray:ByteArray = imageSnap.data as ByteArray;
           // var str:String = imageByteArray.
           // swfLoader.load(imageByteArray);
            var imageBitmapData:BitmapData = ImageSnapshot.captureBitmapData(source);
            swfLoader.source = new Bitmap(imageBitmapData);

            // take a screen capture
          //  image = ImageSnapshot.captureImage(source, 72, new PNGEncoder(), false);
           //   var fileSave:FileReference = new FileReference();
           //       fileSave.save(image.data, "saveImage.png");
        }

    ]]>
</mx:Script>

<mx:ApplicationControlBar dock="true">
    <mx:Button label="Take snapshot of DataGrid"
            click="takeSnapshot(chart_1);" />
</mx:ApplicationControlBar>

<mx:HBox>
   <mx:SWFLoader id="chart_1" /> 

    <mx:SWFLoader id="swfLoader">
        <mx:filters>
            <mx:DropShadowFilter />
        </mx:filters>
    </mx:SWFLoader>
</mx:HBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:13:00.563

您正在使用相同的加载器

```
 b.draw(loader);             
        ba = PNGEncoder.encode(b);
        loader.loadBytes(ba);         // In above function you have used same loader  
        addChild(loader); 
```

我觉得你可以试试新的。

# c - 如何使用ioctl函数获取客户端的MAC地址？

> ID：11929556
> 
> 赞同：2
> 
> 时间：2012-08-13T07:04:34.327
> 
> 标签：c, sockets

我想捕获所有请求我的服务器的客户端 MAC 地址。我使用以下程序获取客户端的 MAC 地址，但它显示 "ioctl: Protocol Family Not Supported" 。如何获取MAC地址？...

```
#include<stdio.h>
#include<sys/socket.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<netdb.h>
#include<errno.h>
#include<string.h>
#include<netinet/if_ether.h>
#include<net/if.h>
#include<linux/sockios.h>
int main()
{
  int socket1, socket2;
  socket1 = 0;
  socket2 = 0;
  struct sockaddr_in server, client;
  int returnstatus = 0;
socket1 = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
if(socket1 == -1)
{
  perror("socket()");
}

server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons(8888);
returnstatus = bind(socket1, (struct sockaddr*)&server, sizeof(server));
if(returnstatus == -1)
{
  perror("bind()");
}
returnstatus = listen(socket1, 5);
if(returnstatus == -1)
{
 perror("listen()");
}
for(;;)
{
  int buffr[4];
  int addrlen, n;
  addrlen = sizeof(client);
  socket2 = accept(socket1, (struct sockaddr *)&client, &addrlen);
    printf("%s\n",inet_ntoa(client.sin_addr));
    printf("%d\n",(int) ntohs(client.sin_port));
struct arpreq arpreq_;
bzero(&arpreq_, sizeof(struct arpreq));

if( ( n = ioctl(socket2, SIOCGARP, &arpreq_) ) < 0 ){
perror("ioctl");
}

unsigned char *ptr = &arpreq_.arp_ha.sa_data[0];
printf("MAC: %x:%x:%x:%x:%x:%x\n", *ptr, *(ptr+1), *(ptr+2), *(ptr+3),
*(ptr+4), *(ptr+5));

if (socket2 == -1)
{
  perror("accept()");
}
returnstatus = read(socket2, buffr, sizeof(buffr));

if(returnstatus == -1)
{
  perror("read()");
}
int c[2]; 
int *w;
c[0] = buffr[0] + buffr[1];
w = c;
returnstatus = write(socket2, w, sizeof(c));
if(returnstatus == -1)
{
 perror("write()");
}
close(socket2);

}
close(socket1);
return 0;
}

int addition(int x, int y)
{
 int z;
 z = x + y;
 return(z);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-02T01:35:41.867

我有一些代码似乎可以做你想做的事。

我一直在尝试获取一些 C++ 代码，这些代码将从我网络上的远程计算机获取 MAC 地址。花了相当长的时间才弄清楚这一点。我设法将几个示例合并并修改为一个工作演示。修改它以使用 Socket 连接应该很容易。

这段代码将网络设备和 IP 地址作为参数。（例如 eth0 192.168.1.1）

程序将检查 IP 的正确性，然后 ping IP 地址以将其添加到 ARP 表中，然后从 ARP 表中提取 MAC 地址，然后显示 MAC 地址。

我不是 C++ 编码员（或者至少我是新手），所以代码可能会被刷新。

此代码仅在 Raspbian 上测试过！

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <net/if_arp.h>
#include <arpa/inet.h>
#include <sstream>

bool isValidIpAddress(char *ipAddress) {
    int result = 0;
    struct sockaddr_in sa;
    result = inet_pton(AF_INET, ipAddress, &(sa.sin_addr));
    return result;
}

/**
 * @brief Convert String to Number
 */
template <typename TP>
TP str2num( std::string const& value ){
    std::stringstream sin;
    sin << value;
    TP output;
    sin >> output;
    return output;
}

/**
 * @brief Convert number to string
 */
template <typename TP>
std::string num2str( TP const& value ){
    std::stringstream sin;
    sin << value;
    return sin.str();
}

/**
 * @brief Execute Generic Shell Command
 *
 * @param[in]   command Command to execute.
 * @param[out]  output  Shell output.
 * @param[in]   mode read/write access
 *
 * @return 0 for success, 1 otherwise.
 *
*/
int Execute_Command( const std::string&  command,
    std::string& output,
    const std::string& mode = "r") {

    // Create the stringstream
    std::stringstream sout;

    // Run Popen
    FILE *in;
    char buff[512];

    // Test output
    if(!(in = popen(command.c_str(), mode.c_str()))){
        return 1;
    }

    // Parse output
    while(fgets(buff, sizeof(buff), in)!=NULL){
        sout << buff;
    }

    // Close
    int exit_code = pclose(in);

    // set output
    output = sout.str();

    // Return exit code
    return exit_code;
}

/**
 * @brief Ping
 *
 * @param[in] address Address to ping.
 * @param[in] max_attempts Number of attempts to try and ping.
 * @param[out] details Details of failure if one occurs.
 *
 * @return True if responsive, false otherwise.
 *
 * @note { I am redirecting stderr to stdout.  I would recommend
 *         capturing this information separately.}
 */
bool Ping( const std::string& address ) {
    // Format a command string
    std::string command = "ping -c " + num2str(2) + " " + address + " 2>&1";
    std::string output;
    std::string details;

    // Execute the ping command
    int code = Execute_Command( command, details );
    return (code == 0);
}

static char *ethernet_mactoa(struct sockaddr *addr) {
    static char buff[256];
    unsigned char *ptr = (unsigned char *) addr->sa_data;

    sprintf(buff, "%02X:%02X:%02X:%02X:%02X:%02X",
        (ptr[0] & 0xff), (ptr[1] & 0xff), (ptr[2] & 0xff),
        (ptr[3] & 0xff), (ptr[4] & 0xff), (ptr[5] & 0xff));

    return (buff);
}

int main(int argc, char *argv[]) {
    int s;
    struct arpreq areq;
    struct sockaddr_in *sin;
    struct in_addr ipaddr;

    if (argc != 3) {
        fprintf(stderr, "-- Usage: %s device ipaddress\n", argv[0]);
        exit(1);
    }

    /* Get an internet domain socket. */
    if ((s = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }

    if (!isValidIpAddress(argv[2])) {
        fprintf(stderr, "-- Error: invalid IP Address '%s'.\n",
             argv[2]);
        exit(1);
    }

    if (inet_aton(argv[2], &ipaddr) == 0) {
        fprintf(stderr, "-- Error: bad dotted-decimal IP '%s'.\n",
            argv[2]);
        exit(1);
    }

    /* Ping the Address for ARP table listing */

    if ( !Ping(argv[2]) ) {
        fprintf(stderr, "-- Error: unable to ping IP '%s'.\n",
            argv[2]);
        exit(1);
    }

    /* Make the ARP request. */
    memset(&areq, 0, sizeof(areq));
    sin = (struct sockaddr_in *) &areq.arp_pa;
    sin->sin_family = AF_INET;

    sin->sin_addr = ipaddr;
    sin = (struct sockaddr_in *) &areq.arp_ha;
    sin->sin_family = ARPHRD_ETHER;

    strncpy(areq.arp_dev, argv[1], 15);

    if (ioctl(s, SIOCGARP, (caddr_t) &areq) == -1) {
        perror("-- Error: unable to make ARP request, error");
        exit(1);
    }

    printf("%s -> %s\n",
    inet_ntoa(((struct sockaddr_in *) &areq.arp_pa)->sin_addr),
    ethernet_mactoa(&areq.arp_ha));

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:38:12.900

您可能只获得`ioctl(SIOCGARP)`本地子网的 MAC 地址，因为 SIOCGARP 将返回本地 ARP 表中的 MAC 地址。

你使用`SIOCGARP`了一点点错误的方式。SIOCGARP 的参数是输入输出类型。`arpreq_`所以你必须在调用之前填写一些字段`ioctl`。请参见[手册页](http://linux.die.net/man/7/arp)。

当对等点不在您的以太网子网中时，流量会通过路由器，并且对等点可能在以太网网络中或不在以太网网络中（例如：手机）。因此，不可能从每个对等方获取以太网 MAC 地址。

当您的主机与对等方通信时，使用第一个路由器的 MAC 地址。

# eclipse - Eclipse 定期关闭

> ID：11929563
> 
> 赞同：2
> 
> 时间：2012-08-13T07:05:05.143
> 
> 标签：eclipse, unhandled-exception, permgen

我有一台 2GB 内存的机器。目前，我的 Eclipse 在投掷后会定期关闭：

```
Unhandled event loop exception
PermGen space 
```

有时它会在没有显示任何错误或其他一些错误的情况下关闭。

这是我的设置`eclipse.ini`：

```
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms256m
-Xmx384m 
```

我需要进行哪些更改才能解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:11:55.170

在 eclipse.ini 文件的末尾添加这一行：

```
 -XX:MaxPermSize=256m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T23:11:48.377

非常感谢。我做了 512 并成功了。

# c# - 带引号标识符的管道正则表达式

> ID：11929568
> 
> 赞同：1
> 
> 时间：2012-08-13T07:05:34.600
> 
> 标签：c#, regex, pipe, delimiter, quoted-identifier

> **可能重复：**
> [在 C# 中解析 CSV 文件](https://stackoverflow.com/questions/2081418/parsing-csv-files-in-c-sharp)

我有一个解析管道分隔文件的 C# 应用程序。它使用 Regex.Split 方法：

```
Regex.Split(line, @"(?<!(?<!\\)*\\)\|") 
```

然而，最近一个数据文件遇到了一个包含在其中一个数据字段中的管道。有问题的数据字段使用带引号的标识符，因此当您在 Excel 中打开时，它会正确打开。

例如，我有一个看起来像这样的文件：

Field1|Field2|"字段 3 在引号内有一个 |"|Field4

当我使用上面的正则表达式时，它会解析为：

Field1
Field2
Field 3 有一个
内引号
Field4

当我想

Field1
Field2
Field 3 有一个 | 在引号内
Field4

我已经进行了大量研究，似乎无法让 Regex.Split 在管道上拆分文件，但尊重引用的标识符。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:33:08.490

这是我拼凑起来的一个快速表达，似乎可以解决问题：

```
"([^"]+)"|([^\|]+) 
```

尽管您的表达式似乎也与 \'s 一起做某事，但您可能需要在此表达式中添加您有的任何其他需求。我在回答中忽略了它们，因为问题中没有解释它们，因此我无法在不知道它们为什么存在的情况下提供解决方案——它们实际上可能根本不需要存在。

另外，我的表达式虽然忽略了空字段（即 1||2|3 将仅作为 1、2 和 3 出现）并且我不知道这是否是您需要的，如果不是让我知道，我可以将表达式更改为也可以满足此要求的内容。

无论如何，希望这会有所帮助。

# ruby-on-rails - rails 截断错误数量的参数（3 代表 2）

> ID：11929571
> 
> 赞同：1
> 
> 时间：2012-08-13T07:05:50.323
> 
> 标签：ruby-on-rails, ruby, erb

美好的一天，我看到了这段代码，它会生成

```
wrong number of arguments (3 for 2)
Extracted source (around line #7):

4:     <h3 class="<%= cycle('color_1', 'color_2')  %> ">
5:       <%= link_to sanitize(article.title),article %>
6:     </h3>
7:     <% output_text = truncate(article.text, 40, "...") %>
8:     <span><%= sanitize(output_text) %>
9:       <%= link_to ' ... full ->',  article %></span>
10:     <span style="display: none"> 
```

那就是我检查截断的地方[http://paulsturgess.co.uk/articles/37-how-to-truncate-text-in-ruby-on-rails](http://paulsturgess.co.uk/articles/37-how-to-truncate-text-in-ruby-on-rails)

如果我写

```
<% output_text = truncate(article.text, 40) %> 
```

我明白了

```
undefined method `reverse_merge!' for 40:Fixnum 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:08:42.827

`<% output_text = truncate(article.text, 40, "...") %>`

应该

```
<% output_text = truncate(article.text, :length => 40, :omission => '...' ) %> 
```

# iphone - 我如何知道 iOS 游戏背后的框架？

> ID：11929582
> 
> 赞同：-4
> 
> 时间：2012-08-13T07:07:37.710
> 
> 标签：iphone, ios, game-engine

我想知道any 的`framework or development tools,IDE`后面是哪个`iOS Game`。我在谷歌上试过，但我没有找到任何线索。请帮助我了解 iOS 游戏背后的框架。

我在这里列出了一些游戏。如果有人知道上市游戏背后的开发工具、框架、IDE，请告诉我。

```
1)Grand Defense.
2)Tower Defense.
3)Castle Defense. 
```

有很多游戏，例如列出的游戏。我想知道特定 iOS 游戏背后的开发工具。我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:38:34.550

如果您想准确了解哪个游戏使用什么，请执行以下操作：

1.  下载游戏。使用一些常见的破解工具对其进行解密（但我不鼓励盗版！）
2.  在其上运行类转储实用程序（google it！），这将生成游戏内部的类列表。
3.  将类名与最常见的游戏引擎进行比较，以准确了解特定游戏中使用的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:13:05.477

你说**`Frameworks`**的意思是开源和游戏引擎？？

如果正确，请参考以下网站：

[http://www.tonylea.com/2011/best-iphone-game-frameworks/](http://www.tonylea.com/2011/best-iphone-game-frameworks/)

[http://maniacdev.com/2009/08/the-open-source-iphone-game-engine-comparison/](http://maniacdev.com/2009/08/the-open-source-iphone-game-engine-comparison/)

一般来说，如果你使用的是objective-C，IDE是xcode。我建议。

参见[GameSalad](http://www.gamesalad.com)无代码开发游戏。

**`Tower Defence using a cocos-2d Tutorial following below:`**

[cocos-2d 塔防教程 part1](http://www.iphonegametutorials.com/2011/04/11/cocos2d-game-tutorial-how-to-build-a-tower-defense-game-for-the-iphone-part-1-creep-waves/)

[cocos-2d 塔防教程 part2](http://www.iphonegametutorials.com/2011/04/15/cocos2d-game-tutorial-how-to-build-a-tower-defense-game-for-the-iphone-part-2-placing-towers/)

# android - 相机 JNI。手动设置的缓冲区太小

> ID：11929585
> 
> 赞同：2
> 
> 时间：2012-08-13T07:07:44.693
> 
> 标签：android, android-camera

从 Android 相机，我获取 YUV 数组并将其解码为 RGB。(JNI NDK) 然后，我对 RGB 矩阵使用黑白滤镜，并在 CameraPrewiev 上以 YCbCr_420_SP 格式显示

```
lParameters.setPreviewFormat(PixelFormat.YCbCr_420_SP); 
```

现在我需要拍照。但是当我拍照时，我有这个错误：

> CAMERA-JNI 手动设置缓冲区太小！预期为 1138126 字节，但得到了 165888！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T05:53:39.970

因为从 Surface 你没有给出图像。您必须从布局中提供位图，然后在某个文件夹中的 SdCsrd 上保存为 Compress JPG。谢谢大家。这个问题已经结束了。

# arrays - 仅使用交换来改变数组顺序

> ID：11929591
> 
> 赞同：3
> 
> 时间：2012-08-13T07:08:09.857
> 
> 标签：arrays, algorithm, sorting

假设您有两个数组，a 和 b。a 的数据对您完全隐藏。您可以对 a 执行的唯一操作是交换两个元素。b 的数据是完全暴露且可变的。

位置 i 处的 b 值指示存储在 a[i] 中的值的目的地。也就是说，如果 b[3] = 7，我们希望将 a[3] 中的值移动到 a[7] 中。我正在尝试编写一个算法，该算法根据数组 b 中的信息仅使用 a 上的交换操作（最好是线性时间和恒定空间）来改变数组 a。举个例子：

```
if   a  = { a b c d e f }
and  b  = { 1 3 2 0 5 4 }
then a' = { d a c b f e }
(ie, a[i] = a'[b[i]]) 
```

我尝试了一种幼稚的方法，即遍历 b 并愉快地执行 a.Swap(i, b[i])，一直在吹口哨，但结果最终会重写自身并移动已经在正确位置的数据（如你可能会猜到）。

编辑：这真的必须是线性时间。它用于并行排序算法，因此速度至关重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:14:02.407

Go中的解决方案：

```
for i := 0; i != len(b); i++ {
    for b[i] != i {
        a.Swap(i, b[i])
        b.Swap(i, b[i])
    }
} 
```

这可能不会立即看起来 O(n)，但请注意

*   每个 a.Swap() 将 a 的至少一个元素放入其最终位置
    *   一旦一个元素处于其最终位置，它就不会再被交换
    *   所以最多有 n 个交换
*   `b[i] != i`每次交换都进行一次测试，每次 i 进行一次额外 的测试
    *   所以最多有 2n 个测试

如您所见，该算法在时间上为 O(n)，在空间上为 O(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:17:49.733

按升序排列 b 的元素，在交换 b 的元素时，也交换 a 中的元素。例如，使用冒泡排序：

```
for(int i=0;i<b.length;i++){
for(int j=0;j<b.length-i-1;j++){
if(b[j+1]<b[j]){
// swap b[j+1] and b[j]
// swap a[j] and a[j+1]
}
}
} 
```

# java - 如何在 Maven 中偏好库

> ID：11929593
> 
> 赞同：1
> 
> 时间：2012-08-13T07:08:24.247
> 
> 标签：java, maven

我在我的项目中导入了两个库

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency> 
```

现在我想使用 javaee-web-api 包中的类 HttpServletRequest。问题是 javax servlet 也包含这个类，而应用程序正在使用它而不是我想要的库。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:12:28.973

你不能。删除任何一个。两个类都在同一个命名空间/包中。`HttpServletRequest`由标准定义，它的行为方式应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:29:52.003

既然您现在有一条评论解释说`javax.servlet`来自父 pom，那么我认为这是不可能的。之前已经讨论过：[无论如何要排除从父 POM 继承的工件？](https://stackoverflow.com/questions/2681759/is-there-anyway-to-exclude-artifacts-inherited-from-a-parent-pom)

如果您对父 pom 有任何类型的控制，那么您应该尝试将其更改为具有可选标签：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
    <optional>true</optional>
</dependency> 
```

然后它不会作为您的子项目的传递依赖项包含在内。

[http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:46:59.537

好的，我找到了。我可以排除这个库：

```
<exclusions>
                <exclusion>
                    <artifactId>servlet-api</artifactId>
                    <groupId>javax.servlet</groupId>
                </exclusion>
            </exclusions> 
```

然后它工作

# c# - URI 更新请求

> ID：11929595
> 
> 赞同：1
> 
> 时间：2012-08-13T07:08:32.437
> 
> 标签：c#

从我的 C# 控制台应用程序中，我想发出一个 Uri 更新请求。如下所示：

```
http://username:password@dynupdate.no-ip.com/nic/update?hostname=mytest.testdomain.com&myip=1.2.3.4 
```

我尝试了以下方法：

```
string url = "http://username:password@dynupdate.no-ip.com/nic/update? hostname=mytest.testdomain.com&myip=1.2.3.4";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Timeout = 5000; 
```

但是，我得到了，`Invalid URI: The format of the URI could not be determined.`错误。

任何想法，我哪里出错了？我在 Web 浏览器中键入如上所示的完整 url，它按预期工作，但通过 C# 应用程序，它会引发异常。

还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:12:42.703

您需要创建一些凭据并将其添加到请求中，然后在不传入用户名/密码的情况下访问 URI。

有关更多信息：[如何：使用 WebRequest 类请求数据](http://msdn.microsoft.com/en-us/library/456dfw4f.aspx)（特别是有关凭据的部分）

例如;

```
var uri = new Uri("http://somesite.com/something");
var request = WebRequest.Create(uri) as HttpWebRequest;
request.Credentials = new NetworkCredential("myUserName","myPassword");
request.PreAuthenticate = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:25:18.507

只要看看这个网页。这是你指的吗？ [http://www.no-ip.com/integrate/request/](http://www.no-ip.com/integrate/request/)

我认为您需要将网址用作 [http://dynupdate.no-ip.com/nic/update](http://dynupdate.no-ip.com/nic/update)

然后发送 ChrisBint 提到的凭据。并且您需要将首选项设置为 base64 ...如果有这样的规定 + 一些标题，如文章中提到的 UserAgent。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:19:03.663

```
Encode the URL argument, check the below example

string url = "http://www.stackoverflow.com?question=" + HttpUtility.UrlEncode("a sentence with spaces");

WebRequest r = WebRequest.Create(url); 
```

# python - Sphinx erlang 域扩展

> ID：11929606
> 
> 赞同：0
> 
> 时间：2012-08-13T07:09:22.040
> 
> 标签：python, erlang, python-sphinx

我尝试使用 Sphinx 生成文档。而且我需要 Erlang 代码语法高亮。我在 sphinx-contrib 中找到了 erlang-domain 扩展。我做了：

```
easy_install -U sphinxcontrib-erlangdomain 
```

如何在 sphinx 中包含和使用 erlangdomain？[我从http://packages.python.org/sphinxcontrib-erlangdomain/](http://packages.python.org/sphinxcontrib-erlangdomain/)中放置了标记示例，但出现了错误（以及其他类似的错误）：

> 错误：未知指令类型“erl:function”。

如何在 Sphinx 中包含 erlangdomain 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:19:23.303

您需要将“sphinxcontrib.erlangdomain”添加到 conf.py 中的[扩展](http://sphinx.pocoo.org/config.html#confval-extensions)配置变量中：

```
extensions = ["sphinxcontrib.erlangdomain"] 
```

# c# - AutodiscoverLocalException：找不到自动发现服务

> ID：11929607
> 
> 赞同：2
> 
> 时间：2012-08-13T07:09:27.377
> 
> 标签：c#, .net, email, exchange-server, exchangewebservices

我想使用 .NET 3.5 访问交换服务器。这是我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
            service.Credentials = new WebCredentials("email_test@xxx.com", "abcd");

            service.AutodiscoverUrl("email_test@xxx.com");

            EmailMessage message = new EmailMessage(service);
            message.Subject = "Interesting";
            message.Body = "The proposition has been considered.";
            message.ToRecipients.Add("abc@xxx.com");
            message.SendAndSaveCopy();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    }
} 
```

我指的是[这篇文章](http://msdn.microsoft.com/en-us/library/exchange/dd633626%28v=exchg.80%29.aspx)来编写代码：

但我收到了这个例外：

> AutodiscoverLocalException：找不到自动发现服务。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:59:59.610

我遇到了这个问题，这是由于用户帐户被锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-20T18:05:48.587

```
service.Credentials = new WebCredentials("<loginID..not email address>", "< the pw>");
service.AutodiscoverUrl("<your emailaddress>",RedirectionUrlValidationCallback); 
```

# android - 刷新 onCreateOptionMenu android

> ID：11929609
> 
> 赞同：1
> 
> 时间：2012-08-13T07:09:33.297
> 
> 标签：android, android-optionsmenu

我想在每次调用时刷新选项菜单，

我有一个功能，当用户单击选项菜单中的选项（添加/删除收藏夹）时，它会检查它是否是收藏夹并执行该功能，

问题：一旦创建菜单，它不会在用户第二次按下选项按钮时刷新 onCreateOptionMenu。我想在每次按下 optionMenu 时刷新它。这是我的代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    if (is_favorite.equals("1")) {
        menu.add(1, 22 ,0,"Remove from Favourites").setIcon(R.drawable.favorites_unselected);

    }
    else{
        menu.add(1, 11 ,0,"Add to Favourites").setIcon(R.drawable.favorites_selected);
    }
    return true;
}
@Override
public boolean onPrepareOptionsMenu (Menu menu)
  {

    return super.onPrepareOptionsMenu(menu);
  }
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {

    case 11:            
            //addtofavouritestask
            is_favorite = "1";

        return true;
    case 22:
        //removeFromFavouritestask
            is_favorite = "0";

        return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:16:37.643

根据文档，`onCreateOptionMenu (Menu menu)`仅调用**一次 time**，因此它不会刷新您的菜单。您必须调用该方法`onPrepareOptionsMenu(Menu)`来刷新它（“**要在每次显示菜单时更新菜单**，请参阅`onPrepareOptionsMenu(Menu)`”）。

所以这应该有效：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    if (is_favorite.equals("1")) {
        menu.add(1, 22 ,0,"Remove from Favourites").setIcon(R.drawable.favorites_unselected);

    }
    else{
        menu.add(1, 11 ,0,"Add to Favourites").setIcon(R.drawable.favorites_selected);
    }
    return true;
}
@Override
public boolean onPrepareOptionsMenu (Menu menu)
  { 
menu.removeGroup(1);
if (is_favorite.equals("1")) {
        menu.add(1, 22 ,0,"Remove from Favourites").setIcon(R.drawable.favorites_unselected);

    }
    else{
        menu.add(1, 11 ,0,"Add to Favourites").setIcon(R.drawable.favorites_selected);
    }
    return super.onPrepareOptionsMenu(menu);
  } 
```

# html - @font-face 第一次访问网站时不会加载，必须刷新/重新加载

> ID：11929610
> 
> 赞同：3
> 
> 时间：2012-08-13T07:09:34.387
> 
> 标签：html, css, fonts, refresh, font-face

我已经使用[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)工具包生成器和 css 代码正确配置了 CSS 文件，将字体文件上传到正确的目录中。

第一次输入刷新后，字体在我的网站上工作得非常好，即使在页面之间切换也是如此，这只是第一次在进入网站时字体不显示，直到你刷新页面，在 Firefox 和 Chrome 中都发生.

我的 CSS 文件顶部的 css 代码：

```
@charset "utf-8";
body { margin:0; padding:0; width:100%; background:url(images/bg.png) repeat; }
html { padding:0; margin:0; }
a { text-decoration:none; border: none; outline:none; }
a:hover { text-decoration:underline; }
a img {border: none; }

@font-face{ font-family: 'handfont-webfont'; src: url('text/handfont-webfont.eot'); src: url('text/handfont-webfont.eot?#iefix') format('embedded-opentype'), url('text/handfont-webfont.woff') format('woff'), url('text/handfont-webfont.ttf') format('truetype'), url('text/handfont-webfont.svg#webfont') format('svg'); } 
```

这是用于我页面中的段落的字体代码：

```
.body p { font-family:handfont-webfont; font-size: 12px; padding:5px 5px; margin:0; } 
```

我试图寻找答案，但找不到答案，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T07:15:04.270

您是否尝试过将 @font-face 放在 CSS 中的任何其他内容之前。

您的 CSS 中存在错误：

```
.body p { font-family:handfont-webfont;}//there are no single quotes 
```

将其更改为：

```
.body p { font-family:'handfont-webfont';}//with single quotes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:17:35.880

尝试改变-

```
 font-family:'handfont-webfont' 
```

至

```
font:'handfont-webfont' 
```

在.body p

# c# - 如何在后面的代码中获取选中的复选框项

> ID：11929611
> 
> 赞同：0
> 
> 时间：2012-08-13T07:09:36.743
> 
> 标签：c#, windows-phone-7, checkbox, observablecollection, multi-select

我正在尝试使用 MultiSelectList 中当前选定的项目填充 ObservableCollection。选择的方法涉及一个复选框控件，我不确定如何让选定的项目填充 ObservableCollection。我已经引用了两种方法，它们执行 MultiSelectList 的单个选择以及 MultiSelectList 的“全选”选项。

需要注意的是，networkSelectList 是自定义 Settings 类中的 ObservableCollection。

主页.xaml

```
<toolkit:MultiselectList x:Name="connectionTypeMultiSelectList" HorizontalAlignment="Left" VerticalAlignment="Top" Tap="connectionTypeMultiSelectList_Tap">
    <toolkit:MultiselectList.ItemTemplate>
        <DataTemplate>

            <StackPanel Orientation="Horizontal"  Margin="12,0,0,0">
                <Image Source="{Binding Icon}" Width="35" Height="35" Margin="0"/>
                <TextBlock Text="{Binding Name}" TextAlignment="Center"  Margin="10"/>
            </StackPanel>

        </DataTemplate>
    </toolkit:MultiselectList.ItemTemplate>                            
</toolkit:MultiselectList> 
```

MainPage.xaml.cs

```
/// <summary>
    /// method to Select All and UnSelect All checkboxes
    /// </summary>
    /// <param name="selected"></param>
    /// <param name="predicate"></param>
    private void SetCheckBoxesSelected(bool selected, Predicate<ConnectionItem> predicate)
    {
        if (networkTypeList == null)
        {
            return;
        }
        if (predicate == null)
        {
            predicate = (networkInfo) => true;
        }

        ItemContainerGenerator itemContainerGenerator = this.connectionTypeMultiSelectList.ItemContainerGenerator;

        foreach (ConnectionItem networkInfo in networkTypeList)
        {
            if (networkInfo != null && predicate(networkInfo))
            {
                DependencyObject visualItem = itemContainerGenerator.ContainerFromItem(networkInfo);
                MultiselectItem multiselectItem = visualItem as MultiselectItem;
                if (multiselectItem != null)
                {
                    multiselectItem.IsSelected = selected;

                    //add selected item to networkSelectionChecked  ??
                    //Settings.networkSelectionChecked.Value.Add(multiselectItem.Name.ToString());
                }
            }
        }
    }

    /// <summary>
    /// triggered on tap of any item in connectionTypeMultiSelectList
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void connectionTypeMultiSelectList_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        DependencyObject tappedElement = e.OriginalSource as UIElement;
        MultiselectItem tappedItem = this.FindParentOfType<MultiselectItem>(tappedElement);
        ConnectionItem selectedItem = null;
        if (tappedItem != null)
        {
            // DataContext contains reference to data item
            selectedItem = tappedItem.DataContext as ConnectionItem;
        }

        if (selectedItem != null)
        {
            MessageBox.Show(selectedItem.Name + "Tapped");

            //add selected item to networkSelectionChecked  ??
            //Settings.networkSelectionChecked.Value.Add(multiselectItem.Name.ToString());

        }
    }

    /// <summary>
    /// method to find out the element in VisualTree
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="element"></param>
    /// <returns></returns>
    private T FindParentOfType<T>(DependencyObject element) where T : DependencyObject
    {
        T result = null;
        DependencyObject currentElement = element;
        while (currentElement != null)
        {
            result = currentElement as T;
            if (result != null)
            {
                break;
            }
            currentElement = VisualTreeHelper.GetParent(currentElement);
        }
        return result;
    }

    void unselectAll_Click(object sender, EventArgs e)
    {
        this.SetCheckBoxesSelected(false, null);
        this.connectionTypeMultiSelectList.IsSelectionEnabled = false;
    }

    void selectAll_Click(object sender, EventArgs e)
    {
        this.SetCheckBoxesSelected(true, null);
    } 
```

所以基本上我试图将每个被选中的项目添加到 ObservableCollection 中。我想完成此操作，以便能够创建辅助图块并通过传递表示所选复选框的查询字符串来更新它们。我如何才能正确地将选定的复选框项添加到 ObservableCollection？同样在类似的意义上，我将如何检测何时取消选择项目并从 ObservableCollection 中删除该项目？此外，是否有正确的方法将所选项目保留在 MultiSelectList 中，以便可以将其保存以供将来启动或激活的应用程序使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:59:01.643

您可以从 SelectedItems 属性中获取所选项目。

```
var selectedItems = new ObservableCollection<ConnectionItem>(connectionTypeMultiSelectList.SelectedItems.Count);
foreach (var item in TextItemsList.SelectedItems)
{
    var connectionItem = item as ConnectionItem;
    if (connectionItem == null) continue;
    selectedItems.Add(connectionItem );
} 
```

SelectionChanged 事件将让您知道何时（取消）选择项目。

```
void MultiSelectListSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    foreach(var item in e.AddedItems)
    {
        // add to collection
    }
    foreach(var item in e.RemovedItems)
    {
        // remove from collection
    }
} 
```

# scala - 玩 2.0 scala 教程 - heroku 由于进化而失败

> ID：11929614
> 
> 赞同：10
> 
> 时间：2012-08-13T07:09:43.420
> 
> 标签：scala, playframework-2.0

我正在关注Scala的 Play 2.0[教程](http://www.playframework.org/documentation/2.0.2/ScalaTodoList)

一切正常，直到我尝试在 Heroku 上推送和运行它。运行“git push heroku master”后，服务器崩溃。检查日志，我看到以下内容：

```
Starting process with command `target/start -Dhttp.port=37849 -Xmx384m -Xss512k -XX:+UseCompressedOops`
2012-08-13T06:52:45+00:00 app[web.1]: Play server process ID is 2
2012-08-13T06:52:46+00:00 app[web.1]: [info] play - database [default] connected at jdbc:h2:mem:play
2012-08-13T06:52:46+00:00 app[web.1]: [warn] play - Your production database [default] needs evolutions! 
2012-08-13T06:52:46+00:00 app[web.1]: 
2012-08-13T06:52:46+00:00 app[web.1]: CREATE SEQUENCE task_id_seq;
2012-08-13T06:52:46+00:00 app[web.1]: label varchar(255)
2012-08-13T06:52:46+00:00 app[web.1]: CREATE TABLE task (
2012-08-13T06:52:46+00:00 app[web.1]: id integer NOT NULL DEFAULT nextval('task_id_seq'),
2012-08-13T06:52:46+00:00 app[web.1]: );
2012-08-13T06:52:46+00:00 app[web.1]: 
2012-08-13T06:52:46+00:00 app[web.1]: # --- Rev:1,Ups - c5e3eee
2012-08-13T06:52:46+00:00 app[web.1]: [warn] play - Run with -DapplyEvolutions.default=true if you want to run them automatically (be careful)
2012-08-13T06:52:46+00:00 app[web.1]: Oops, cannot start the server.
2012-08-13T06:52:46+00:00 app[web.1]: PlayException: Database 'default' needs evolution! [An SQL script need to be run on your database.]
2012-08-13T06:52:46+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:422) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T19:32:08.347

如果您使用 embed DB 或 PostgreSQL，Play 不支持手动应用进化...

但是，如错误消息中所述，您可以在 application.conf 文件中激活配置密钥： `applyEvolutions.default=true`

^(启用将告诉Play)自动应用所有进化！

但是要小心你的更新脚本......如果你删除并重新创建每个增量版本=>你会杀死你所有的数据！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T01:29:21.697

安迪解决方案的替代方案可能是将以下内容添加到heroku [procfile](https://devcenter.heroku.com/articles/procfile)

```
web: target/start -Dhttp.port=${PORT} -DapplyEvolutions.default=true
  -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=$DATABASE_URL 
```

（$PORT 和 $DATABASE_URL 将由 Heroku 端的环境变量填充）

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-13T07:37:48.903

你需要一个数据库。heroku中有免费的插件

# android - android 移动广告横幅的像素大小是多少

> ID：11929617
> 
> 赞同：0
> 
> 时间：2012-08-13T07:10:00.997
> 
> 标签：android, banner

我认为 android 移动广告横幅的尺寸是 320x50 dip（与密度无关的像素）。

那么，如果我想设计 4 个横幅（用于 ldpi、mdpi、hdpi、xhdpi），以像素为单位的尺寸是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:23:46.743

对于 Admob，您只需要创建一个 640x100 横幅（他们称之为高清横幅），他们会根据需要将其缩小。这样看起来最好。

# c# - 下拉列表中重复的名称。（sql 查询）

> ID：11929623
> 
> 赞同：0
> 
> 时间：2012-08-13T07:10:29.177
> 
> 标签：c#, asp.net, sql-server

```
 SELECT ID,Name FROM Master

    id  Name
    1   John
    2   John
    3   Jack
    4   Max
    5   Jack
    6   Max
    7   Max 
```

使用上面的查询，我在下拉列表中重复了所有名称。我必须在下拉列表中绑定数据 foreach 名称有各自的 ID 我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:23:34.080

我不知道数据背后的逻辑，但是只有在您必须过滤掉重复名称并从重复名称中选择其中一个 id 时才能获得一个名称。

```
SELECT MIN(id), Name 
FROM Master
GROUP BY Name 
```

假设 id 列是数字，上面的查询将输出每个名称的 id 最低的出现。

您的 distinct 查询不起作用的原因是结果集中所有列的不同过滤器，因此在这种情况下，name 和 id 都用于唯一性。

如果您出于某种原因需要每个名称的所有 id，则必须在 ASP.NET 端进行过滤，或者在知道选择了哪个人后在数据库中查找 id。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T07:16:29.013

仅放置 Name 列，您将获得唯一的输出。我认为问题在于 distinct 关键字检查每行不同的主键，因此它返回您只需放置 Name 列的所有列。（我对不同的理解）

```
SELECT distinct Name FROM Master

output
Jack
John
Max

-- Below is what i tested
-- Created a table
Create table mytable(
ID bigint identity primary key,
UserName varchar(50)
)
-- Insert the records

INSERT INTO dbo.mytable(UserName) VALUES('John')
INSERT INTO dbo.mytable(UserName) VALUES('John')
INSERT INTO dbo.mytable(UserName) VALUES('Jack')
INSERT INTO dbo.mytable(UserName) VALUES('Max')
INSERT INTO dbo.mytable(UserName) VALUES('Jack')
INSERT INTO dbo.mytable(UserName) VALUES('John')

-- If i use below query
select distinct * from mytable
ID  UserName
1   John
2   John
3   Jack
4   Max
5   Jack
6   John

 -- and if i use this
select distinct UserName from mytable

output
Jack
John
Max

-- I think you should not allow the user to enter multiple users with the same name   

-- what do you think about this
 select  UserName +' '+CAST(ID as varchar) as [Users] from mytable
John 1
John 2
Jack 3
Max 4
Jack 5
John 6
 -- IN your code you can create a list<string,int> and stored in it. you can easily manage it in code 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T07:47:45.167

试试这个查询，它将返回分组为一个

```
SELECT GROUP_CONCAT(ID), Name FROM your_tbl Group BY Name 
```

# c# - 在 DatetimePicker 中仅获取日期

> ID：11929627
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:10:45.997
> 
> 标签：c#, visual-studio-2010, datetime, datetimepicker

我正在使用 Visual Studio 2010，我只想获取日期`yyyy-MMM-dd`格式为`DateTimePicker`. 我试过了 ：

```
DateTime FromDate;
FromDate = 
 Convert.ToDateTime(DateTtimePickerFromDate.Value.Date.ToString("yyyy-MMM-dd")); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:27:49.643

dateTimePicker1 是一个直观地显示日期和时间的控件。此控件有助于直观地选择日期和时间。您可以使用获取当前选择的日期或时间

```
dateTimePicker1.Value.ToShortDateString(); 
```

获取短格式的日期。同样在 DateTime 类中， ToShortDateString() 是可能的。前任。

```
DateTime dateTime = new DateTime();
    MessageBox.Show ( dateTime.ToShortDateString() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T05:49:35.753

您可以使用它将选定的日期时间保存到`database`

```
Convert.ToDateTime(dateTimePicker1.Text) 
```

# xamarin.android - 如何访问 PreparingDeviceSettingEventArgs.GraphicsDeviceInformation.GraphicsProfile？

> ID：11929628
> 
> 赞同：0
> 
> 时间：2012-08-13T07:10:47.337
> 
> 标签：xamarin.android, monogame

我想更改`GraphicsProfile`为`Reach`. [正如在另一个答案](https://stackoverflow.com/questions/11903016/how-to-set-graphicsdevice-graphicsprofile)中告诉我的那样，解决方案是使用：

```
graphics.PreparingDeviceSettings += (s, e) =>
{
    e.GraphicsDeviceInformation.GraphicsProfile = GraphicsProfile.Reach;
}; 
```

但 my`e.GraphicsDeviceInformation`不包含该`GraphicsProfile`属性。

我不明白[MonoGame.Microsoft.Xna.Framework](https://raw.github.com/mono/MonoGame/develop/MonoGame.Framework/GraphicsDeviceInformation.cs)和[MonoGame.Microsoft.Xna.Framework.Graphics](https://raw.github.com/mono/MonoGame/develop/MonoGame.Framework/Graphics/GraphicsDeviceInformation.cs)中如何存在同一类的两个实现。
其中一个`...Framework`是使用的，`PreparingDeviceSettingEventArgs`但另一个包含我需要的属性：`GraphicsProfile`.

（我觉得我在这里错过了一些非常愚蠢的东西......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:28:24.807

目前不支持。只需为 PC 创建一个 XNA 项目。

但是我想知道如果我想支持不适合[*High* profile](http://msdn.microsoft.com/en-us/library/ff604995.aspx)的 Android 构建（MonoGame），我该怎么做。

# objective-c - iOS使用什么函数/syscall来读写文件

> ID：11929631
> 
> 赞同：1
> 
> 时间：2012-08-13T07:11:07.853
> 
> 标签：objective-c, ios, swizzling

我想拦截 iOS 上的文件读/写，以便为我的某些应用程序提供透明的加密/解密功能。

我知道我可以调配各种 SDK 方法来读/写文件来做到这一点，但这需要大量的努力并且容易出错（我可能会错过调配某些方法，导致我的应用程序崩溃/行为不端）。

如果所有这些方法都使用了一些通用的系统调用/函数，那么我宁愿对其进行调整并节省一些艰苦的工作+使其更加万无一失。有没有这样的共同切入点？

PS：应用商店的接受度不是这里的标准，因为所有这些应用程序都是用于内部企业部署的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:25:47.493

为此，您需要一个越狱设备。

有 POSIX 系统调用`read`并且`write`可以被劫持（[这里是如何](http://www.phrack.org/issues.html?issue=66&id=16)- 不是特定于 iOS，但无论如何是达尔文......）

您还可以使用 MobileSubstrate( [http://iphonedevwiki.net/index.php/MobileSubstrate](http://iphonedevwiki.net/index.php/MobileSubstrate) ) 来挂钩 C 标准库中的 read() 和 write() 函数，它几乎专门用于许多基本框架和方法的实现（包括 CocoaTouch - Foundation、CoreFoundation，实际上还有一些 C 和 C++ 标准库等） - 所以很可能您不需要直接更改系统调用。例子：

```
static size_t (*orig_write)(int fd, void *buf, size_t n);

size_t hijacked_write(int fd, void *buf, size_t n)
{
    // do something, then
    return orig_write(fd, buf, n);
}

// in some initialization:
MSHookFunction(write, hijacked_write, (void **)&original_write); 
```

# telerik-mvc - 获取 Telerik Upload 中选定文件的数量

> ID：11929632
> 
> 赞同：2
> 
> 时间：2012-08-13T07:11:12.857
> 
> 标签：telerik-mvc

我需要使用 Telerik MVC Upload Control 计算所有选定文件的数量。谁能告诉我我该怎么做。我试过这样的代码。

```
var count = e.files.length; 
```

但它总是计数为一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:45:36.320

试试这个代码

```
[function onSelect(e) {    
var selectedFiles = e.files.length;
totalFiles += selectedFiles;
   }

function UploadRemove(e) {

totalFiles--;
    if (totalFiles > 0) {
    // Write true block code here.
}
else if (totalFiles == 0) {
// Write your false block code here.

}
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T10:26:20.213

您可以在上传事件处理程序中执行此操作：

```
upload: function (e) {
   // File Count:
   var fileCount = this.wrapper.find(".k-file").length;

   // File Index:
   var uid = e.files[0].uid;
   var file = this.wrapper.find(".k-file[data-uid='" + uid + "']");
   var fileIndex = file.index();
} 
```

# mysql - Hibernate 本机查询在同一个表上具有多个联接返回错误结果

> ID：11929634
> 
> 赞同：8
> 
> 时间：2012-08-13T07:11:30.323
> 
> 标签：mysql, hibernate, join, nativequery

我正在使用本机 sql 查询，其中我有一个球员表，我加入了三次，首先获取击球手姓名，然后获取投球手姓名，然后获取外野手姓名。现在第一个连接有效，但接下来的两个也返回相同的名称，即击球手名称。

这是sql查询

```
 select 
    del.over_no , 
    del.delivery_no , 
    batsman.sname , 
    outType.name , 
    outBy.sname , 
    fielder.sname , 
    bep.runs, 
    bep.deliveries, 
    bep.fours, 
    bep.sixes

    from delivery del 
    INNER JOIN batsman_performance bep ON del.innings_id=bep.innings_id 
    INNER JOIN ref_player batsman ON del.batsman_id = batsman.id
    INNER JOIN ref_player outBy ON del.bowler_id = outBy.id
    LEFT OUTER JOIN ref_player fielder ON del.fielder_id1= fielder.id
    INNER JOIN ref_out_type outType ON del.out_type_id=outType.id
    and del.out_type_id IS NOT NULL 
    and del.innings_id=:innings_id 
    and bep.player_id = del.batsman_id
    order by over_no, delivery_no; 
```

我没有为所选列使用别名，因为当我这样做时，hibernate 为我使用别名的任何列抛出异常

> 请求处理失败；嵌套异常是 javax.persistence.PersistenceException：org.hibernate.exception.SQLGrammarException：无法执行查询]，根本原因是 java.sql.SQLException：找不到列“over_no”。

当我在我的 mysql 客户端上运行它并返回正确的数据集时，这个查询正在工作，但是当我在我的代码中运行它时，结果集以某种方式覆盖了 ref_player 表上的两个后续连接，让我在所有三列中都有击球手的名字，即 batsman.sname、outBy.sname 和 fielder.sname 列中的相同名称。

最近两天我被困在这里，请任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:54:11.157

尝试将您的选择包装在另一个选择语句中，它应该可以工作。我正在使用存储过程，但它不应该有任何区别

```
SELECT * FROM (

SELECT 
    del.over_no , 
    del.delivery_no , 
    batsman.sname , 
    outType.name , 
    outBy.sname , 
    fielder.sname , 
    bep.runs, 
    bep.deliveries, 
    bep.fours, 
    bep.sixes

    from delivery del 
    INNER JOIN batsman_performance bep ON del.innings_id=bep.innings_id 
    INNER JOIN ref_player batsman ON del.batsman_id = batsman.id
    INNER JOIN ref_player outBy ON del.bowler_id = outBy.id
    LEFT OUTER JOIN ref_player fielder ON del.fielder_id1= fielder.id
    INNER JOIN ref_out_type outType ON del.out_type_id=outType.id
    and del.out_type_id IS NOT NULL 
    and del.innings_id=:innings_id 
    and bep.player_id = del.batsman_id
    order by over_no, delivery_no
) AS subselection; 
```

在上面，您实际上应该使用别名，否则您将有两列同名，这将引发错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:56:17.123

它是 Hibernate 错误跟踪的未决问题。

[看这张票](https://hibernate.onjira.com/browse/HHH-879)

也在hibernate论坛中。这清楚地表明这是一个休眠结束的错误。

[参见 Hibernate 论坛讨论](https://forum.hibernate.org/viewtopic.php?f=1&t=978303&sid=93cf1ff487dbffc94601f927f24fd2f4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T09:16:08.607

Discovered the same issue. Another workaround is to use `org.hibernate.Session#doWork` and perform the query on the JDBC connection:

```
entityManager.unwrap(Session.class).doWork(new Work() {
  void execute(Connection c) throws SQLException {
   PreparedStatement stmt = c.prepareStatement("SELECT ... JOIN ... JOIN ...");
   try {
     ...
   } finally {
     stmt.close() 
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:10:38.247

你试过改变吗

```
 order by over_no, delivery_no; 
```

至

```
 order by del.over_no, del.delivery_no; 
```

# joomla2.5 - joomla 2.5.6：如何从 url 中删除日期

> ID：11929640
> 
> 赞同：0
> 
> 时间：2012-08-13T07:12:00.237
> 
> 标签：joomla2.5

我用别名**overview-of-trips**创建了文章，但是当我尝试查看文章 url 时变成**index.php/destinations/2012-08-08-05-05-05/thailand/overview-of-trips**它应该是一些东西像**index.php/destinations/thailand/overview-of-trips**

我在**xma7k_content** db 表中查询以查找此日期/时间，但我不知道它从何处附加此日期/时间。

```
Menu Item Type is : Single Article 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:52:28.037

您应该检查您的类别（目的地）**别名**，它必须是日期，所以它看起来像这样。

# spring-batch - 使项目阅读器返回列表而不是单个对象 - Spring批处理

> ID：11929641
> 
> 赞同：4
> 
> 时间：2012-08-13T07:12:00.563
> 
> 标签：spring-batch

问题是：如何在春季批次中制作项目阅读器以提供列表而不是单个对象。

我已经搜索过了，一些答案是修改项目阅读器以返回对象列表并更改项目处理器以接受列表作为输入。

如何做/编码项目阅读器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T19:57:56.023

[查看itemReader](http://docs.spring.io/spring-batch/trunk/apidocs/index.html?org/springframework/batch/item/ItemReader.html)的官方春季批处理文档

```
public interface ItemReader<T> {

    T read() throws Exception, UnexpectedInputException, ParseException;

}
// so it is as easy as
public class ReturnsListReader implements ItemReader<List<?>> {
   public List<?> read() throws Exception {
      // ... reader logic
   }
} 
```

处理器工作相同

```
public class FooProcessor implements ItemProcessor<List<?>, List<?>> {

    @Override
    public List<?> process(List<?> item) throws Exception {
        // ... logic
    }

} 
```

处理器可以返回任何东西而不是返回列表，例如字符串

```
public class FooProcessor implements ItemProcessor<List<?>, String> {

    @Override
    public String process(List<?> item) throws Exception {
        // ... logic
    }

} 
```

# java - java在3D空间中找到块与表面的交集

> ID：11929643
> 
> 赞同：1
> 
> 时间：2012-08-13T07:12:08.850
> 
> 标签：java, 3d, jmonkeyengine

目前我们有一堆 3d 块（想想立方体），它们被导入到 JMonkey 2 画布中。

我需要找到这些块与用户导入的 3D 表面的交集。问题是我不知道如何在 JME 或任何其他 3D 引擎中执行此操作。

如果有人有任何使用 JMonkey 进行此类任务的经验，或者您可能使用其他一些 3D 引擎做过，您能否提供一些代码提示，或者相关资源的链接？

编辑澄清：我需要将块分成两种形状：表面下方/上方。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:27:08.777

这取决于您要完成的任务，只需找出它是否相交或相交的“位置”。如果您的框是 AABB（轴对齐边界框），即与 xyz 轴对齐且不旋转，则会更容易（在数学上）。是这样吗？

但是，您在 JME 中支持此类任务。您可能想阅读以下文本：http: [//jmonkeyengine.org/wiki/doku.php/jme3 :advanced:collision_and_intersection](http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:collision_and_intersection)

# c++ - SQLite - 如何在终端级别和 C++ 应用程序中使用它？

> ID：11929644
> 
> 赞同：0
> 
> 时间：2012-08-13T07:12:13.327
> 
> 标签：c++, sql, sqlite

我是 sqlite 的新手，我最近才安装它。我熟悉 mysql，但我需要使用 sqlite，因为我将它用于我要创建的 C++ 应用程序。

**问题一：**

我在命令行终端输入这个

```
root@ubuntu:/home/baoky/version1.2/Assignment 2# sqlite abeserver.db 
```

然后我看到了这个输出

```
sqlite> 
```

所以我输入 .h 并看到帮助命令列表

但我想创建一张桌子

sqlite> .databases

```
seq  name             file                                                      
---  ---------------  ----------------------------------------------------------
0    main             /home/baoky/version1.2/Assignment 2/abeserver.db          
1    temp             /var/tmp/sqlite_hjT3FEefcAHRPhn 
```

在我的主数据库中

如何在终端级别执行此 sql 命令

```
CREATE TABLE abe_account (
  username TEXT,
  name TEXT,
  department TEXT,
  password TEXT
); 
```

**问题2：**

如何使用 C++ 将记录插入表 abe_account

**问题 3：**

如何从表 abe_account 中检索记录并使用 C++ 将其分配给字符串

抱歉，我尝试了谷歌并搜索堆栈溢出，我仍然对用法感到困惑，如果它是 mysql，对我来说会很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:14:23.183

> 问题2：
> 
> 问题 3：

朋友，让我为您搜索一下：[SQLite C/C++ 接口简介](http://www.sqlite.org/cintro.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:14:24.337

要创建一个新数据库，只需连接到它：

```
$ sqlite3 your_database_file 
```

这将在文件中创建您的数据库`your_database_file`。如果此文件已存在，该命令将打开它。

然后您可以执行`CREATE TABLE`或任何其他 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:17:58.530

如果你使用的是 sqlite 终端，你可以在那里输入 SQL，它就会被执行。

C++ 代码的典型工作循环*如下*所示：

```
sqlite3 * db;//database
sqlite3_stmt * stmt;//sql statement

sqlite3_open( "database.db", & db );//opening database

sqlite3_prepare( db, "SELECT something FROM something else;", -1, &stmt, NULL );//preparing the statement
sqlite3_step( stmt );//executing the statement

while( sqlite3_column_text( stmt, 0 ) )
{
char * str = (char *) sqlite3_column_text( stmt, 0 );///reading the 1st column of the result
//do your stuff
sqlite3_step( stmt );//moving to the next row of the result
}

sqlite3_finalize(stmt);
sqlite3_close(db); 
```

您可以轻松地搜索函数以了解它们的论点以及它们的详细功能。

# c# - 在 C# 和 Script# 之间共享代码：Script# Date 类与 C# DateTime 的兼容性

> ID：11929648
> 
> 赞同：2
> 
> 时间：2012-08-13T07:12:22.377
> 
> 标签：c#, script#

我在 C# 项目和 Script# 之间有很多共享的业务逻辑代码。

自从 script# 核心库发生重大变化（当 DateTime 类变为 Date 时），事情就向南了。

有没有人想出通用的防弹解决方案如何处理它？我读到有人说他们写了一个包装器，但没有人显示他们的来源。可能会有一些陷阱，比如 JS Date 从 0 开始计算月份，C# DateTime 从 1 开始计算等等，所以它并不是一个简单的包装器......

分叉原始脚本#并将 Date 重命名回 DateTime 并不是一个真正的选择，因为那时你需要处理两个项目 - 你的和 fork。

参考：

*   [问题 119 - 0.7.4 版本中缺少 DateTime 类](https://github.com/nikhilk/scriptsharp/issues/119)
*   [问题 67 - Nullable DateTime / 用户枚举的编译时错误。](https://github.com/nikhilk/scriptsharp/issues/67)
*   脚本# - 发布历史：projects.nikhilk.net/ScriptSharp/ReleaseHistory

PS我知道#ifdef解决方案，请不要建议它;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:48:34.320

One potential approach is to store just the tick count as a long within your data model. Then use a set of helpers that interpret the ticks as a date/datetime and provide the APIs you're looking for. Just a thought... given the semantic differences, some wrapper/abstraction is anyway required for those who want to share code, and this is one approach for building that.

One side-benefit to this approach is serialization to/from json is simplified ... a) since there is no date literal syntax in JSON, and b) because the precision of ticks is different across script and .net ... so at the least if you use the .net tick count and it is not updated on the client, it just roundtrips without loosing precision.

If you do build this, this would be interesting to share back to the community.

# haskell - 如何指定 GHC 应该使用哪些 LLVM 二进制文件？

> ID：11929657
> 
> 赞同：21
> 
> 时间：2012-08-13T07:13:02.637
> 
> 标签：haskell, compilation, llvm, ghc

我已经[`PortFusion`](//hackage.haskell.org/package/PortFusion)使用[全新的 64 位 GHC 7.6.1 Release Candidate 1 for Windows](//www.haskell.org/pipermail/glasgow-haskell-users/2012-August/022671.html)成功构建。

[使用从http://www.drangon.org/mingw](http://www.drangon.org/mingw)新下载*的本机 64 位* `mingw`二进制文​​件，该软件包很容易安装（经过一堆不相关的小修复），就像一个简单的[`network`](//hackage.haskell.org/package/network)

```
CC=mingw64/bin/gcc cabal install 
```

* * *

`LLVM`同一网站上还有一个工具链包。

现在我想知道如何告诉在编译期间`GHC`使用特定的二进制文件。`LLVM`

* * *

会不会像上面那样简单和类似：

```
#v??v
 LLVM=????????? ghc -W -O2 -fllvm -optlo-O3 --make src/Main.hs
 LLVM=????????? cabal install PortFusion -f llvm #¹
#^??^ 
```

*[`llvm`¹ PortFusion.cabal 中定义标志的相关行](//github.com/corsis/PortFusion/blob/1138a4ebb4bc30fdbff4fdd378f3eadc5dce673b/PortFusion.cabal#L100)*

还是完全不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-02T17:02:12.210

为了记录，标题中问题的答案是

```
ghc -pgmlo opt_cmd -pgmlc llc_cmd -fllvm ... 
```

`opt_cmd`并且`llc_cmd`可以是命令名称（将在 中查找`PATH`）或完整路径名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T17:45:04.690

您可以通过更改`PATH`环境变量中定义的位置来让 GHC 使用某些二进制文件。较早优先。据推测， System`PATH`的优先级也高于 User `PATH`。

# magento - 在 magento 中实现自定义控制器的问题

> ID：11929661
> 
> 赞同：2
> 
> 时间：2012-08-13T07:13:16.023
> 
> 标签：magento, magento-1.7

[基本上，我必须使用http://gorrc.blogspot.in/2012/05/magento-print-whishlist-to-pdf.html](http://gorrc.blogspot.in/2012/05/magento-print-whishlist-to-pdf.html)中指定的代码块生成愿望清单项目（产品）的 PDF 。现在的问题是，我无法追踪到在哪里以及如何调用上面链接中指定的所有方法。任何人都可以在这方面帮助我或提供任何替代解决方案，我的意思是生成愿望清单项目 PDF 的其他方法。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:03:26.960

这是控制器，它是 url 请求的终点。当您导航到指定的 URL 时调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:59:51.360

你想怎么做？详细说明您要在哪里执行此操作，我会指出正确的方向。

# c++ - wostringstream、Ascii、Unicode、Win32 和整数连接到字符串

> ID：11929662
> 
> 赞同：0
> 
> 时间：2012-08-13T07:13:19.563
> 
> 标签：c++, winapi, unicode, ascii, stringstream

我正在编写一个使用 Win32 API 的库，我希望能够为 ASCII 和 Unicode 编译它（宽字符是`type`），我正在生成一个内部类名（读取：WinAPI“类”），我我将一个整数附加到一个字符串中，以便为各种 Windows 函数创建唯一的类名。

使用的变量定义：

```
LPCTSTR lpszClassName;    //  This is char* if ASCII, wchar_t* if Unicode.
#ifdef UNICODE
std::wostringstream Convert;
#else
std::ostringstream Convert;
#endif 
```

有问题的功能：

```
void Base::MakeClassName () {
#ifdef _DEBUG_
    cerr << "Base::MakeClassName() called\n";
#endif
static int name_mod = 0;
name_mod++;
lpszClassName = TEXT("Win32WinNo");
Convert << lpszClassName << name_mod;
lpszClassName = Convert.str().c_str();

#ifdef _DEBUG_
    cerr << "Generated class name = " << lpszClassName << "\n";
#endif
} 
```

在 ASCII 中，我得到`Generated class name = Win32WinNo1`

在 Unicode 中，我得到一个十六进制值。这向我表明，广泛的性格`wostringstream`并没有做我想做的事。无论哪种方式， CreateWindow 似乎都不喜欢它（程序挂起，如果我调试它，它就会崩溃。）

我不是 100% 熟悉 stringstream，并且根据有限的文档，它返回一个“字符串”对象，但我需要一个指向 LPCTSTR 的 C 样式字符串的指针，因此，`Convert.str().c_str()`. 我得到的东西不能正常工作，如果我在我的 RegisterClass 和 CreateWindow 调用中尝试 TEXT("Win32WinNo1") ，它可以工作，但是从上面返回的这个字符串是垃圾。

我究竟做错了什么？我也担心它是否没有将整数附加到字符串中。wostringstream 是否将整数转换为 wchar_t？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:30:30.817

您输出到`cerr`，这仍然是一个狭窄的流。它可能会显示指针值`lpszClassName`而不是它指向的宽字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:04:40.537

`ostringstream::str`返回当前与字符串流缓冲区关联的字符串对象的副本。`c_str`指向该临时字符串内部的缓冲区。`lpszClassName`一旦这个临时字符串超出范围，它就是一个悬空指针。

这可能是您的程序崩溃/挂起的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T07:20:23.163

我认为您需要用 _T() 包围您的字符串文字，因此它们将是`char`s 或`wchar_t`s ，具体取决于您的 UNICODE 设置。

例如`_T("Hello World")`.

# sql-server - 如何提高这个sql脚本的性能

> ID：11929666
> 
> 赞同：0
> 
> 时间：2012-08-13T07:13:37.523
> 
> 标签：sql-server, cursor, query-optimization

下面的脚本需要**10 多个小时才能执行**.. 它包含`three nested cursors`并且我认为它们是罪魁祸首。我搜索了很多以替换光标或提高脚本的性能。并找到了很多方法来删除`cursor`. 例如简单的集合连接操作、Marge 操作等。但我仍然无法在我的脚本中实现它们。请看一下剧本并给出一些意见

**- 在不影响输出的情况下，是否可以删除内部光标**

**- 如果可能的话怎么办？如果可能，请提供一些代码**

```
 DECLARE @Start_Date Date = '1990-01-01'
DECLARE @End_Date Date = '2012-12-12'
DECLARE @Company_ID int = 180

declare @BP_ID [int]
DECLARE All_Client_Bp_Id CURSOR STATIC  FOR
SELECT TOP 50 Bp_id FROM  Client        --Take All Client's BPID 
OPEN All_Client_Bp_Id
FETCH NEXT FROM All_Client_Bp_Id
    INTO @BP_ID
WHILE @@FETCH_STATUS = 0
BEGIN
    DECLARE @acrdint MONEY
    DECLARE @acrdSrv MONEY
    DECLARE @MaxMargLimit MONEY
    DECLARE @ForceLimit MONEY
    DECLARE @WarningLimit MONEY
    DECLARE @MarginLimit DECIMAL(5,2)
    select @MaxMargLimit=Highest_Margin_Limit*100000,@ForceLimit=Force_Sell_Limit,@WarningLimit=Margin_Warning_Limit, @MarginLimit = Margin_Limit 
    from Client_Margin_Constraints c
        inner join (select Bp_id, max(Update_Date) as updt 
                    from Client_Margin_Constraints 
                    where Update_Date <= @End_Date and Bp_id = @BP_ID and Company_ID = @Company_ID 
                    group by Bp_id)  b  
                    on c.Bp_id = b.Bp_id and c.Update_Date = b.updt

    DELETE FROM Temp_Portfolio
    INSERT  INTO    Temp_Portfolio (Client_BP_ID, tran_date, Instrument_ID, Is_Buy, Quantity, Amount, Commission, Rate, Category,Tax_Amount)
        SELECT  t.Client_BP_ID, t.tran_date, t.Instrument_ID, t.Is_Buy, t.Quantity, t.Amount, t.Commission,
                t.Rate, t.Category, t.Tax_Amount
        FROM    All_Share_Txn   t
        WHERE t.Client_BP_ID = @BP_ID

    DECLARE @Instrument_Id int,
                @bqty int,
                @bamt MONEY,
                @brate MONEY,
                @srate MONEY,
                @rprofit MONEY,
                @mslbqty int,
                @BCost MONEY,
                @SCost MONEY,
                @BCqty int,
                @SCqty int,
                @B_Or_S CHAR(1),
                @CDBL_Type CHAR(1),
                @Qty INT,
                @MktPrice MONEY,
                @Amount MONEY,
                @Commission MONEY,
                @TDATE SMALLDATETIME,
                @DES CHAR(30),
                @TotalProfit MONEY,
                @Category CHAR(1)
        SET @TotalProfit = 0

        DECLARE CUR_SHARE CURSOR STATIC  FOR
           SELECT DISTINCT Instrument_Id 
           FROM  Temp_Portfolio 
        OPEN CUR_SHARE
        FETCH NEXT FROM CUR_SHARE
            INTO @Instrument_Id
        WHILE @@FETCH_STATUS = 0
        BEGIN   
            SET @bqty = 0
            SET @bamt = 0
            SET @brate = 0
            SET @srate = 0
            SET @rprofit = 0
            SET @mslbqty = 0
            SET @BCost = 0
            SET @SCost = 0
            SET @BCqty = 0
            SET @SCqty = 0
            DECLARE CUR_COST CURSOR STATIC  FOR
                SELECT Is_buy,Quantity,rate,Amount,Commission,Tran_date
                FROM  Temp_Portfolio 
                WHERE Client_Bp_id=@BP_ID and Instrument_Id=@Instrument_Id
                ORDER BY Tran_date,Is_buy desc,Category
            OPEN CUR_COST
            FETCH NEXT FROM CUR_COST
                INTO @B_Or_S,@Qty,@MktPrice,@Amount,@Commission,@TDATE
            WHILE @@FETCH_STATUS = 0
            BEGIN
                IF @B_Or_S='1'
                    BEGIN
                    SET @bqty = @bqty + @Qty
                    SET @bamt = @bamt + @Amount + @Commission
                    IF @bqty > 0
                        SET @brate = @bamt/@bqty
                    END 
                ELSE IF @B_Or_S='0' 
                    BEGIN
                    SET @srate = @MktPrice
                    IF @TDATE > @Start_Date and @TDATE <= @End_Date
                        BEGIN
                        SET @rprofit = @rprofit + ((@srate - @brate) * @Qty) - @Commission
                        SET @BCqty = @BCqty + @Qty
                        SET @SCqty = @SCqty + @Qty
                        SET @BCost = @BCost + (@Brate * @Qty) 
                        SET @SCost = @SCost + (@Srate * @Qty) - @Commission 
                        END         
                    SET @bamt = @bamt - (@brate * @Qty)
                    SET @bqty = @bqty - @Qty
                    END
                FETCH NEXT FROM CUR_COST
                    INTO @B_Or_S,@Qty,@MktPrice,@Amount,@Commission,@TDATE
            END

            SET @TotalProfit=@TotalProfit+@rprofit
            CLOSE CUR_COST
            DEALLOCATE  CUR_COST
            FETCH NEXT FROM CUR_SHARE
            INTO @Instrument_Id
        END
        CLOSE CUR_SHARE
        DEALLOCATE CUR_SHARE

    --Select @TotalProfit as Realised_Gain
-- Equity, Purchase Power Calculation
        DECLARE @Equity_All MONEY
        DECLARE @Equity_Margin MONEY
        DECLARE @Current_Balance MONEY
        DECLARE @temp_Purchase_Power_1 MONEY
        DECLARE @temp_Purchase_Power_2 MONEY
        DECLARE @Purchase_Power MONEY

        --Balance
        select  @Current_Balance = sum((case when a.Is_Share_TXN='1' and a.Is_Debit='1' then -a.amount when a.Is_Share_TXN='1' and a.Is_Debit='0' then a.amount when a.Is_Share_TXN='0' and a.Is_Debit='0' then a.amount when a.Is_Share_TXN='0' and a.Is_Debit='1' then -a.amount end) -a.Commission)  
        from Client_Transaction a where a.Client_Bp_id = @BP_ID and a.Transaction_Date < @End_Date and a.Company_Id=@Company_Id
        group by a.Client_Bp_id--dbo.get_Current_Balance(@BP_ID, @End_Date, @Company_ID)

        --Equity Margin
        SELECT @Equity_Margin = SUM(CASE WHEN t_Margin.Is_Marginable_Securities = 'True' Then t_Margin.Total_Quantity * t_Margin.Market_price END),
                @Equity_All = SUM(t_Margin.Total_Quantity * t_Margin.Market_price)
                                FROM
                                (
                                select t2.Is_Marginable_Securities, --t3.Bp_Code as Client_Code,t3.Bp_Name as Client_Name,t4.Bo_Id_DSE,t1.Instrument_ID,
                                   sum(case when Is_buy='True' then Quantity when Is_buy='False'  then -quantity end) as Total_Quantity,
                                   --sum(case when ISNULL(t1.Mature_Date_Share,t1.tran_date) <= @Transaction_Date then (case Is_buy when '1' then quantity when '0' then -quantity end) else 0 end) as Free_Quantity,
                                   INDX.Closing_Price AS Market_price
                                from dbo.View_All_Share_Transactions_with_PledgeUnpledge t1 left outer join Instrument t2 on t1.Instrument_Id=t2.Instrument_ID
                                                                                        left outer join (
                                                                                                            select Closing_Price from Index_Price ip
                                                                                                            where ip.Txn_Date=(select MAX(Txn_Date) from Index_Price ip2 where ip2.Instrument_Id=ip.Instrument_Id)
                                                                                                        ) INDX
                                                                                                        ON t1.Instrument_ID = INDX.Closing_Price
                                where Client_Bp_id = @BP_ID and t1.Instrument_ID is not null  and tran_date <=@End_Date and t1.Is_Pledge_Unpledge = 'False'
                                group by t1.Instrument_ID,t2.Is_Marginable_Securities, INDX.Closing_Price
                                having sum(case when Is_buy='True' then Quantity when Is_buy='False'  then -quantity end)<> 0

                                ) t_Margin              --dbo.get_Equity_Margin(@BP_ID, @End_Date, @Company_ID)
        SET @Equity_Margin = @Equity_Margin + @Current_Balance                      
        SET @Equity_All = @Equity_All + @Current_Balance

        SET @temp_Purchase_Power_1 = (@Equity_Margin * (@MarginLimit / 100)) + @Current_Balance
        SET @temp_Purchase_Power_2 = ISNULL(@MaxMargLimit,0) + ISNULL(@Current_Balance,0)

        IF (@temp_Purchase_Power_1 < @temp_Purchase_Power_2)
            BEGIN
                SET @Purchase_Power = @temp_Purchase_Power_1
            END
        ELSE
            BEGIN
                SET @Purchase_Power = @temp_Purchase_Power_2
            END
    INSERT Client_Account_Balance (
                                    BP_ID,
                                    Equity_All,
                                    Equity_Margin,
                                    Purchase_Power,
                                    Margin_Ratio,
                                    Total_Deposit,
                                    Withdraw,
                                    Charges,
                                    Current_Balance,
                                    Aaccured_Charges,
                                    Max_Margin_LImit,
                                    Margin_Limit,
                                    Realised_Gain,
                                    Company_ID,
                                    Created_By,
                                    Updated_By
                                    )
    SELECT @BP_ID, @Equity_All,@Equity_Margin ,@Purchase_Power ,

          CASE WHEN (@Current_Balance - ISNULL(@acrdSrv,0)) != 0 THEN  (@Equity_Margin - @Current_Balance) * (-100)/(@Current_Balance - ISNULL(@acrdSrv,0)) ELSE 0 END,
         TDEP,TWDRAW,TCHARGES,BALANCE,ACC_CHARGE,@MaxMargLimit ,@MarginLimit,
         @TotalProfit,
         180,1,1
         FROM 
        (SELECT SUM(DEPOSITE) AS TDEP,SUM(WDRAW) AS TWDRAW,SUM(CHARGES) AS TCHARGES,SUM(DEBCRED-Commission) AS BALANCE,SUM(ISNULL(@acrdint,0)+ISNULL(@acrdSrv,0)) AS ACC_CHARGE
         FROM     
        (SELECT (CASE
                    WHEN  tran_date >= @Start_Date THEN
                        CASE Is_Share_TXN 
                            WHEN '0' THEN
                                CASE Is_Debit 
                                    WHEN '1' THEN 0
                                    ELSE AMOUNT END
                            ELSE 0 END
                    ELSE 0 END) AS Deposite,
               (CASE
                    WHEN  tran_date >= @Start_Date THEN
                        CASE Is_Share_TXN 
                            WHEN '0' THEN
                                CASE Is_Debit 
                                    WHEN '1' THEN
                                        CASE T_TYPE 
                                            WHEN '1' THEN AMOUNT
                                            WHEN '3' THEN AMOUNT
                                            WHEN 'T' THEN AMOUNT
                                    ELSE 0 END
                                ELSE 0 END
                           ELSE 0 END
                    ELSE 0 END) AS WDRAW,
                (CASE
                    WHEN  tran_date >= @Start_Date THEN
                        CASE Is_Share_TXN 
                            WHEN '0' THEN
                                CASE Is_Debit 
                                    WHEN '1' THEN
                                        CASE T_TYPE 
                                            WHEN '1' THEN 0
                                            WHEN '3' THEN 0
                                            WHEN 'T' THEN 0                             
                                    ELSE AMOUNT END                     
                                ELSE 0 END
                           ELSE 0 END
                    ELSE 0 END) AS CHARGES,  
                (CASE Is_Share_TXN 
                    WHEN '1' THEN
                        CASE Is_Debit 
                                WHEN '1' THEN -AMOUNT                           
                        ELSE AMOUNT END
                    When '0' THEN 
                        CASE Is_Debit 
                                WHEN '1' THEN -AMOUNT                           
                        ELSE AMOUNT END
                    END) AS DEBCRED,Commission   
            FROM View_All_Transaction 
            WHERE tran_date <= @End_Date
              AND Client_Bp_id = @BP_ID ) AS A) AS B
FETCH NEXT FROM All_Client_Bp_Id
    INTO @BP_ID

END
CLOSE All_Client_Bp_Id
DEALLOCATE All_Client_Bp_Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:37:09.050

**嘿，我查看了您的脚本并发现..您可以通过排除DISTINCT**子句来提高脚本性能，并针对 ORDER BY CLAUSE 之后的列**创建非集群索引。**这 2 点肯定会帮助您提高性能。

如果您有任何疑问，请告诉我。

# android - 导入后看不到库

> ID：11929684
> 
> 赞同：2
> 
> 时间：2012-08-13T07:15:01.967
> 
> 标签：android, android-layout

导入下一个问题后，没有看到我理解的库。告诉我如何解决问题

![在此处输入图像描述](../Images/da79ee581955e4c50e06bd8ecece21c8.png)

再次，我导入了项目，现在屏幕不是很空，但不是满的

![在此处输入图像描述](../Images/12ec40ee0422e341d88685d0e252b1e2.png)

**aaa 抱歉决定我没有把设置**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:19:00.697

你是怎么导入的？我不太确定我是否了解您的项目结构。您是否有所需库的可用 JAR 文件？如果这样做，请`/libs`在您的 Android 应用程序中创建一个文件夹。构建项目并且导入应该可用。

如果要导入库项目，请右键单击主项目，选择 Properties，然后选择 Android，然后在 Libraries 下，添加所需的库项目。

# macos - 什么是鞋盒应用程序？

> ID：11929686
> 
> 赞同：17
> 
> 时间：2012-08-13T07:15:10.453
> 
> 标签：macos, icloud

这取自 OSX iCloud Storage 参考文档：

> 另一方面，如果您正在编写鞋盒应用程序，则不应使用 NSDocument。因此，如果您正在做一个鞋盒应用程序，您必须实现自己的文件呈现器并通过该 API 处理版本冲突。

什么是鞋盒应用程序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T07:18:13.713

单窗口或库风格的应用程序。请参阅[Mac App Programming Guide](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html)，特别**是 App 风格决定核心架构**部分。

# javascript - 当鼠标悬停在 Javascript 中时，棘手的按钮会移开？

> ID：11929687
> 
> 赞同：37
> 
> 时间：2012-08-13T07:15:15.880
> 
> 标签：javascript, jquery, html, frontend

我记得在网上看到过一些关于这个有趣/棘手按钮的网站或脚本：基本上它是一个无法点击的按钮。当鼠标悬停时，它会随机移动。

有人可以指出我的来源或向我展示几行代码吗？最好使用 jQuery。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-13T07:21:00.107

这可能是您正在寻找的：

```
$(function() {
  $("button").on({
    mouseover: function() {
      $(this).css({
        left: (Math.random() * 200) + "px",
        top: (Math.random() * 200) + "px",
      });
    }
  });
});
```

```
button {
  position: absolute;
  top: 10px;
  left: 10px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<button>button</button>
```

[http://jsfiddle.net/9CDtE/4/](http://jsfiddle.net/9CDtE/4/)

# shell - 如何将孤立的后台进程带回前台？

> ID：11929692
> 
> 赞同：35
> 
> 时间：2012-08-13T07:15:33.523
> 
> 标签：shell, process, ps

事情是这样的，我不得不在我家通过`ssh`连接到我机构的服务器来运行一个程序。我不希望我的程序在会话关闭时终止（我不知道`screen`）。

我所做的是按下`Ctrl+Z`然后键入`bg`，以便它在后台执行。会话终止。现在，当我从我的机构机器登录并键入`ps -u username`时，它显示程序仍在运行，但我无法将其置于前台。

我试过了`fg`，`jobs`但这些命令没有给我任何输出。
请有人帮助我..

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T07:45:54.543

如果您在没有使用“screen”命令的情况下启动了该过程，那么您将无法接管该过程。基本上，您不能接管在不同 shell 中启动的进程。

当您的会话终止时，所有 bg 进程将进入分离状态。虽然您可能能够看到此类过程的详细信息，但您无法在登录后将它们 fg 到 shell

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T07:51:12.890

如果某个进程已成为孤立进程，则不能将其“重新设置”到不同的 shell 并使用 fg、bg、^Z、^C 等来控制它。

您似乎在隐含地询问如何控制孤立的进程。由于您可以使用**ps**命令查看该进程，因此您有它的 pid。您可以将此 pid 用作**kill**命令的参数，这将允许您停止、继续或终止进程。您不能等待进程完成，但您可以使用“kill -0 <pid>”命令轮询它是否仍然存在。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-24T17:05:53.530

[https://serverfault.com/questions/55880/moving-an-already-running-process-to-screen](https://serverfault.com/questions/55880/moving-an-already-running-process-to-screen)

对这个问题给出了另一种看法，最佳答案建议使用 Reptyr。

# ruby-on-rails - 如何在一个模型中使用多个控制器？

> ID：11929693
> 
> 赞同：4
> 
> 时间：2012-08-13T07:15:41.557
> 
> 标签：ruby-on-rails, ruby, model

我有一个名为“Post”的模型，具有以下属性：

```
class Post < ActiveRecord::Base
  attr_accessible :content, :published_at, :status, :title, :type, :user_id
  has_many :entity_categories
  has_many :entity_pages
end 
```

帖子具有`type`指定帖子类型的字段（例如，常规、新闻、...）。
我想在这个模型中使用多个控制器和视图（新闻应该使用与常规帖子不同的模板和逻辑）。
例如，如果`type == regular`它必须使用名为的控制器`CommonPost`及其模板。
我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:21:49.273

```
migration CreatePostTable

class Post < ActiveRecord::Base
  attr_accessible :content, :published_at, :status, :title, :type, :user_id
  has_many :entity_categories
  has_many :entity_pages
end

class RegularPost < Post
end

class SpecialPost < Post
end 
```

在您的数据库中，您只有一个 Post 表，Rails 会自动将类型列设置为正确的类。

就像你可以做的那样

```
puts RegularPost.new.type
# => "RegularPost" 
```

然后创建regular_posts_controller、spcial_posts_controller 等，一切顺利。是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:25:09.073

如果我对您的理解正确，您仍然可以使用一个控制器，您只需要不同的视图。在你的控制器中，你可以让你的 if type == regular 然后渲染 commonpost。

您可以在其中放置尽可能多的逻辑和代码，但您可以根据类型在 Post 控制器中拆分并执行不同的操作。

希望这可以帮助

# c - 简单的指针算法不起作用？

> ID：11929696
> 
> 赞同：0
> 
> 时间：2012-08-13T07:15:57.427
> 
> 标签：c, pointers

```
char * str = "Hello";

*(str+1) = '3';

cout<<str; 
```

我试图做的是把第二个字符变成'3'，把它变成H3llo

为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:18:25.117

这是未定义的行为。你不能改变文字。

要有一个指向文字的指针，它应该是：

```
 const char* str = "Hello";
//^^^^^ 
```

然后，为了能够更改字符串，这应该是，例如

```
char str[] = "Hello"; 
```

另一种选择是动态分配内存（使用`malloc`and `free`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T07:18:21.107

字符串文字被分配在只读内存中。所以基本上它们是类型（`const char *`）。它不能改变。另请参阅[此](https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:18:03.823

因为 str 的类型是“const char *”，并且不允许覆盖它指向的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:27:23.783

```
#include <string.h>
char *str;
if((str = malloc(strlen("hello"))) != NULL)
  return (null);
str = strcpy(str, "hello");
printf("%s\n", str); // should print hello
str[2] = '3';
printf("%s\n", str) // should print he3lo 
```

这里的事情是我在字符串中设置 char 之前分配内存。但是，如果您不擅长分配，您可以随时设置 char str[] = "hello";

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T09:24:07.713

内存`str`将在`.rodata`部分中分配。所以试图修改只读数据会产生问题。

以下问题给出了问题。

```
#include <stdio.h>

int main()
{
char * str = "Hello";

printf("\n%s \n", str);
*(str+1) = '3';
printf("\n%s \n", str);

return 0;
} 
```

相应的拆卸

```
 .file   "dfd.c"
        .section        .rodata
.LC0:
        .string "Hello"
.LC1:
        .string "\n%s \n"
        .text
  .....
  ..... 
```

结果是

```
Hello 
Segmentation fault (core dumped) 
```

我在 X86_64 上使用 gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T03:51:04.067

str 是指向字符串常量的指针，字符串的内存在只读部分中分配。如果您尝试修改字符串内容，则结果未定义。但是，与始终绑定到相同内存位置的数组名称相比，您可以修改指针以指向其他内容。

# visual-studio - Visual Studio for C# 中 XML 注释的自定义架构

> ID：11929697
> 
> 赞同：1
> 
> 时间：2012-08-13T07:16:08.703
> 
> 标签：visual-studio, xml-comments

当我在编辑器中键入“///”时，Visual Studio 会创建一个带有 < summary > 和其他标记的空注释正文。然后我可以输入“<”，VS 会建议一个[推荐标签](http://msdn.microsoft.com/en-us/library/5ast78ax(v=vs.80).aspx)列表。

如何让 IntelliSense 在此处建议我的自定义标签？

理想情况下，我希望在键入“///”时扩展我自己的 XML 文档模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:21:44.417

看看这个。它主要针对 VS2005 en 2008，但它可能对 2010 仍然有效，但存在细微差别。

[使用 XML 注释记录您的代码](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx#id0400027)

# nhibernate - 在 HQL-Query 的 where-condition 中使用类

> ID：11929698
> 
> 赞同：1
> 
> 时间：2012-08-13T07:16:09.703
> 
> 标签：nhibernate, hql, joined-subclass

我有一个实体联系人，它有三个加入的子类（个人、公司、分支机构）。当我对联系人进行选择查询时，我应该只获取人员、公司或分支机构的信息，我可以这样做

> 从 Contact a 中选择 a.class = Person

这在人员和分支的情况下是正确的。但是因为 Branch 自己引用的是 Company（使用 CompanyId），而当我现在这样做时

> 从 Contact a 中选择 a.class = Company

它将用 CompanyId（来自分支实体）替换 Company。

有人有想法吗，我如何防止 HQL 用真实列替换类值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:35:43.977

尝试使用类的完全限定名（包括命名空间）：

```
select from Contact a where a.class = Your.Namespace.Company 
```

这应该有助于 NHibernate 区分类名和属性名。

# python - 为什么在 Python 版本之间播种随机生成器不稳定？

> ID：11929701
> 
> 赞同：24
> 
> 时间：2012-08-13T07:16:17.537
> 
> 标签：python, python-3.x, random, seed

我正在尝试在`random.random()`安装了不同 python3 版本的不同系统上从 python 复制随机序列。

[正如文档所说](http://docs.python.org/py3k/library/random.html?highlight=random#notes-on-reproducibility)，这应该很容易：

> 大多数随机模块的算法和播种功能可能会在 Python 版本之间发生变化，但有两个方面保证不会发生变化：
> 
> *   如果添加了新的播种方法，则将提供向后兼容的播种机。
> *   当兼容的播种机被赋予相同的种子时，生成器的 random() 方法将继续产生相同的序列。

所以我希望以下代码总是打印相同的 10 个数字，无论特定的 python3 版本如何：

```
import sys
print(sys.version)

from random import seed, random

seed(str(1))
for i in range(10):
    print(random()) 
```

但是，在两台不同的机器上测试它：

```
3.2.3 (default, May  3 2012, 15:51:42) 
[GCC 4.6.3]
0.4782479962566343
0.044242767098090496
0.11703586901195051
0.8566892547933538
0.2926790185279551
0.0067328440779825804
0.0013279506360178717
0.22167546902173108
0.9864945747444945
0.5157002525757287 
```

和

```
3.1.2 (release31-maint, Dec  9 2011, 20:59:40)  
[GCC 4.4.5]
0.0698436845523
0.27772471476
0.833036057868
0.35569897036
0.36366158783
0.722487971761
0.963133581734
0.263723867191
0.451002768569
0.0998765577881 
```

给出不同的结果。

为什么是这样？有什么方法可以使它起作用（即两次获得相同的随机序列？）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T07:21:31.790

我正在查看[Python 3.2 中的新增功能](http://docs.python.org/dev/whatsnew/3.2.html)（因为这个问题），我发现：

> random.seed() 函数和方法*现在*使用 sha512 哈希函数对字符串种子进行盐分。要访问以前版本的种子以重现 Python 3.1 序列，请将版本参数设置为 1，random.seed(s, version=1)。

这似乎是一个具有向后兼容性选项的重大更改（从 3.1 到 3.2）。

（正如 borrible 指出的那样，因为提供了兼容的播种机，所以*没有*违反文档合同。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T07:26:30.383

文档`seed`说他们使用哈希函数将字符串转换为有效的输入种子。当我测试各种版本的 Python2.X（目前没有安装 3）时，一些版本给出了不同的值，`hash(str(1))`请注意种子的文档说，无论版本如何，它们都使用`hash`字符串的值。您可能想要传递一个 int （除了@pst 关于使用向后兼容版本的种子的观点）。

来自3.2的[`random`模块文档](http://docs.python.org/py3k/library/random.html#random.seed)的片段：

> 如果 x 是 int，则直接使用它。
> 
> 在版本 2（默认值）中，str、bytes 或 bytearray 对象被转换为 int 并使用其所有位。在版本 1 中，使用 x 的 hash() 代替。

(x 这里是种子的初始化器)

# c++ - 为什么对函数“sample_mean”的调用不明确？

> ID：11929703
> 
> 赞同：0
> 
> 时间：2012-08-13T07:16:18.970
> 
> 标签：c++, xcode, function

我正在用 xcode 编写一个程序来进行一些统计分析。但是，当我构建用于计算样本方差的函数时，xcode 一直告诉我我调用该函数`sample_mean`（这也是我定义的函数）是模棱两可的。

这是代码：

```
#include <iostream>
#include <fstream>
#include <cmath>
#include <vector>

//sample_mean
double sample_mean (std::vector<double> v);

//sample_variance
double sample_variance (std::vector<double> v);

int main()
{
    std::cout<<"hello world";
}

//sample_mean
double sample_mean (const std::vector<double>& v)
{
    double sum= 0;
    int i=0; for (; i<v.size(); ++i)
    {
        sum= sum+ v[i];
    }
    return sum/v.size();
}

//sample_variance
double sample_variance (const std::vector<double>& v)
{
    double average= sample_mean(v);
    double sum=0;
    int i=0; for (; i<v.size(); ++i)
    {
        sum= sum+ std::pow((v[i]-average), 2);
    }
    return sum/v.size();
} 
```

这段代码只包含 and 的定义`sample_mean`，`sample_variance`但是编译器一直告诉我(which is )`sample_mean`的定义中的函数调用是不明确的。我的程序有什么问题？`sample_variance``double average= sample_mean(v);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:18:04.870

您的定义与声明具有不同的签名。

简单的解决方法：移动*上面* `main`的定义，忘记前向声明函数。

前向声明函数是一种 C 主义，在 C++ 中并不是一个特别聪明的想法。它只会增加工作，并产生问题。正如你所发现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:18:26.007

您有 2 个方法被调用`sample_mean`，而不仅仅是一个，并且都可以被调用：

```
double sample_mean (const std::vector<double>& v) 
```

和

```
double sample_mean (std::vector<double> v) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:19:15.630

首先你有一个函数声明`double sample_mean (std::vector<double>)`，然后你有一个函数定义`double sample_mean (const std::vector<double>&)`。这些被视为两个不同功能的标识符。

# linux - .bashrc 语法错误：文件意外结束

> ID：11929705
> 
> 赞同：9
> 
> 时间：2012-08-13T07:16:25.003
> 
> 标签：linux, bash

我收到意外的文件结束错误。我不确定如何解决它。

```
# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# User specific aliases and functions

export PS1='\[\e[0;32m\]\u\[\e[m\] \[\e[1;34m\]\w\[\e[m\] \[\e[1;32m\]\$\[\e[m\] \[\e[1;37m\]'

export LS_COLORS='di=35;1'

alias la='ls -lah'
alias cdu='cd /home/hzhang/primary'

#module load gnu-compilers/4.7.0
#module load mvapich3/gnu/1.7

.ls /opt/intel/Compiler/11.1/072/bin/ifortvars.sh intel64

#PATH=$PATH:/home/hzhang/primary/over2.2e/bin_dp:/home/hzhang/primary/foiltest
PATH=$PATH:/opt/overflow/intel/serial/bin_dp/:/home/hzhang/primary/chimera2.1/bin_dp/:/u/primary/hzhang/pegasus/bin_dp
export PATH

ulimit -s unlimited 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-09-06T19:13:13.703

由于缺少“fi”行，我遇到了同样的错误。确保省略语法错误。原始 .bashrc 位于 /etc/skel/。所以只需运行以下命令：

cp /etc/skel/.bashrc ~

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-27T14:21:17.730

我面临着类似的问题。使用 Windows 10 附带的 bash，不知何故，行尾已更改为 Windows 行尾 (CRLF)。将文件改回使用 unix 行结尾解决了这个问题。

将 eh 行结尾转换为 unix 结尾，看看是否能解决问题。如果在 Vim 中编辑，请输入命令`:set fileformat=unix`并保存文件。其他几个编辑器具有转换行尾的能力，例如[Notepad++](https://notepad-plus-plus.org/)或[Atom](https://atom.io/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T08:03:24.680

这样的语法错误很容易找到。乍一看该文件看起来不错，所以我建议您注释掉每一行（用`#`），看看错误是否仍然存在。

然后只做二分查找，即在文件的前半部分注释。如果第三季度继续有效（否则第一季度）。等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-04T00:18:01.347

我有一个类似的问题，结果是函数末尾缺少“}”。我备份了有故障的那个（以便了解我的设置是什么），然后复制原始的罚款（cp /etc/skel/.bashrc ~）并再次添加这些行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-01T12:33:37.693

这个 .bashrc 应该是从 windows 编辑的。fromdos .bashrcé 更正此文件以获取它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-08T06:02:07.680

I had the same issue because i made some changes in my .bashcr file and messed up the terminal. Follow command fixed my issue:

```
ecp /etc/skel/.bashrc ~ 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-14T09:10:31.860

只需从终端打开文件`gedit .bashrc` 文件将打开，转到底部，看看是否`fi`缺少那里，如果没有，添加它。只需将“fi”放在最后的左边距并用“关闭所有命令菲”。[看这里](https://i.stack.imgur.com/6FAng.png)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2019-03-30T08:37:42.840

. . . 如果 ！shopt -oq posix；那么如果 [ -f /usr/share/bash-completion/bash_completion ]; 然后 。/usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; 然后 。/etc/bash_completion fi **Fi** 在我的终端的第一行我得到**了 /.bashrc 文件末尾有错误**但是当我将**Fi**更改为**fi**时它工作得很好

. . . . 如果 ！shopt -oq posix；那么如果 [ -f /usr/share/bash-completion/bash_completion ]; 然后 。/usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; 然后 。/etc/bash_completion fi **fi**

# android - 如何更改android默认警报对话框的背景颜色

> ID：11929708
> 
> 赞同：5
> 
> 时间：2012-08-13T07:16:24.940
> 
> 标签：android, android-alertdialog

我有一个带有文本和单选按钮列表视图的默认警报对话框。

我需要替换图像而不是文本（替换图像而不是 Facebook 信用卡、贝宝、信用卡，如下所示）并且还需要更改警报对话框的背景颜色。

我也将 style.xml 文件放在 values 文件夹中。

如何在下面的代码中实现该文件以更改背景颜色？

我的代码：

```
 final CharSequence[] items = {"Facebook credit", "Paypal", "Credit Card"};

            //ContextThemeWrapper ctw = new ContextThemeWrapper( this, R.style.AboutDialog );
            AlertDialog.Builder builder = new AlertDialog.Builder(paymentPage.this);
            builder.setTitle("Payment Gateway");
            builder.setIcon(R.drawable.gate);
            builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {
                   // Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
                }
            });

            builder.setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            payPalPayment();
                        }

                    });
            builder.setNegativeButton("No",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Toast.makeText(paymentPage.this, "Fail", Toast.LENGTH_SHORT).show();
                        }
                    });
            AlertDialog alert = builder.create();
            alert.show();
        }
    }); 
```

我的形象：

![在此处输入图像描述](../Images/84502213a3913fb5bd72c95a1fe5a228.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T12:01:50.127

您应该自定义 AlertDialog 主题。看下面的帖子。

[https://sites.google.com/site/androidhowto/how-to-1/customize-alertdialog-theme](https://sites.google.com/site/androidhowto/how-to-1/customize-alertdialog-theme)

这个库可能会帮助你：[https ://github.com/avast/android-styled-dialogs](https://github.com/avast/android-styled-dialogs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:24:41.740

我有点面临同样的问题。解决它的唯一方法是扩展我自己的布局版本。我看到在你的情况下它是一个 AlertDialog。我建议你做的是创建一个独特的类，即你自定义的 AlertDialog 并为此创建一个布局，然后你膨胀它。

[这](http://www.androidpeople.com/android-custom-dialog-example)是一个对我帮助很大的帖子。

我关注了这篇文章并通过自定义对话框解决了我的问题。

请，如果您有更多疑问，请告诉我。

谢谢。

# iphone - 用 XML 中的数据填充 UITableView

> ID：11929710
> 
> 赞同：0
> 
> 时间：2012-08-13T07:16:32.543
> 
> 标签：iphone, ios, xcode, uitableview

在我的 Iphone 应用程序中，我想用从 Web 服务获取的 XML 文件中的数据填充 UITableView。我已经得到了正确的数据，我也可以用 RaptureXML 解析它。我在（登录/授权）之前进行了一些数据库查询，然后获取了 Xml（带有消息的文件）。我的问题是 UITableView 没有得到任何数据。

这是我将数据填充到表中的方法：

```
if([responseString isEqualToString:@"true"])
    {
        NSLog(@"Iphone successfully registered !");

        NSURL *baseURL = [NSURL URLWithString:@"http://pathtomywebservice/"];

        AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
        [httpClient defaultValueForHeader:@"Accept"];
        [httpClient setDefaultHeader:@"Accept" value:@"text/xml"];

        NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                                udid, @"uuid",
                                nil];

        [httpClient postPath:@"getvMess" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
            // reponseObject will hold the data returned by the server.

            NSString *responseString = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
            NSLog(@"response: %@", responseString);

            RXMLElement *rxml = [RXMLElement elementFromXMLString:responseString encoding:NSUTF8StringEncoding];

            subjects = [[NSMutableArray alloc] init];
            senders = [[NSMutableArray alloc] init];
            texts = [[NSMutableArray alloc] init];
            times = [[NSMutableArray alloc] init];
            channels = [[NSMutableArray alloc] init];

            NSArray *apps = [rxml children:@"ifxMessage"];
            [rxml iterateElements:apps usingBlock:^(RXMLElement *appElement) {

                [subjects addObject:[appElement child:@"subject"].text];
                NSLog(@"%@",[appElement child:@"subject"].text);
                [times addObject:[appElement child:@"time"].text];
                [texts addObject:[appElement child:@"text"].text];
                [senders addObject:[appElement child:@"sender"].text];
                [channels addObject:[appElement child:@"receiver"].text];                                        

            }];

        }failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Error retrieving data: %@", error);
        }];

    }

}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

这里是填写表格的具体代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return [subjects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Configure the cell...
    // A cell identifier which matches our identifier in IB
    static NSString *CellIdentifier = @"CellIdentifier";

    // Create or reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Get the cell label using its tag and set it
    UILabel *cellLabelSubject = (UILabel *)[cell viewWithTag:1];
    [cellLabelSubject setText:[subjects objectAtIndex:indexPath.row]];

    //Get the cell's channel and its tag and set it
    UILabel *cellLabelChannel = (UILabel *)[cell viewWithTag:3];
    [cellLabelChannel setText:[channels objectAtIndex:indexPath.row]];

    //Get the cell's text and its tag and set it
    UITextView *cellTextViewText = (UITextView *)[cell viewWithTag:4];
    [cellTextViewText setText:[texts objectAtIndex:indexPath.row]];

    //Get the cell's time and its tag and set it
    UILabel *cellLabelTime = (UILabel *)[cell viewWithTag:5];
    [cellLabelTime setText:[times objectAtIndex:indexPath.row]];

    //Get the cell's sender and its tag and set it
    UILabel *cellLabelSender = (UILabel *)[cell viewWithTag:6];
    [cellLabelSender setText:[senders objectAtIndex:indexPath.row]];

    // get the cell imageview using its tag and set it
    UIImageView *cellImage = (UIImageView *)[cell viewWithTag:2];
    [cellImage setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%new_message.png", indexPath.row]]];

    return cell;
} 
```

但是当我从本地 xml 文件填充表格时，它工作正常：

```
subjects = [[NSMutableArray alloc] init];
            senders = [[NSMutableArray alloc] init];
            texts = [[NSMutableArray alloc] init];
            times = [[NSMutableArray alloc] init];
            channels = [[NSMutableArray alloc] init];

            RXMLElement *rxml = [RXMLElement elementFromXMLFile:@"Messages.xml"];

            NSArray *apps = [rxml children:@"ifxMessage"];
            [rxml iterateElements:apps usingBlock:^(RXMLElement *appElement) {

                [subjects addObject:[appElement child:@"subject"].text];
                [times addObject:[appElement child:@"time"].text];
                [texts addObject:[appElement child:@"text"].text];
                [senders addObject:[appElement child:@"sender"].text];
                [channels addObject:[appElement child:@"receiver"].text];

            }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:23:34.160

因为您没有将标签、文本...等添加到单元格中...

```
[cell addSubview:cellLabelSubject];
[cell addSubview:cellLabelChannel];
[cell addSubview:cellTextViewText];
[cell addSubview:cellLabelTime];
[cell addSubview:cellLabelSender];
[cell addSubview:cellImage]; 
```

# ios - 无法更改项目中的捆绑 ID，显示为灰色

> ID：11929715
> 
> 赞同：43
> 
> 时间：2012-08-13T07:16:53.917
> 
> 标签：ios, xcode, bundle, identifier

我遇到了捆绑标识符的问题。在 Xcode 中我的项目的“摘要”部分和“标识符”下，我似乎无法更改捆绑 ID 的名称，因为它是灰色的。例如，我的项目名称是“我的应用程序”。在摘要的标识符文本框中，它显示“我的应用程序”并显示为灰色。但是，我的配置文件中的捆绑 ID 是“com.mycompany.myapp”。我想将我的项目中的捆绑 ID 更改为该 ID，但我似乎无法做到。任何想法为什么它是灰色的？谢谢！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-16T06:42:11.100

如果其他人遇到这种情况，很可能是因为您有一个产品名称变量，例如 .${PRODUCT_NAME:rfc1034identifier}，附加到目标（您的应用程序）> 信息（info.plist）下的捆绑标识符的末尾。尝试删除它。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-13T07:34:30.463

不确定为什么会发生这种情况，但请尝试更改 info.plist 文件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-27T10:48:49.250

1.  转到`info.plist`文件
2.  转到捆绑标识符键值对
3.  从值中删除`.${PRODUCT_NAME:rfc1034identifier}`并保存文件

您的捆绑包标识符已根据需要进行了修改。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-12T20:18:52.917

您可能需要考虑更改 PRODUCT_NAME 的值，而不是直接更改捆绑标识符。这可以通过 XCODE 接口完成（并且应该具有额外的好处，即以后不会导致证书和代码签名问题......这可能是一个真正需要解决的问题）：

[单击此处查看 stackoverflow 线程以获取有关如何通过 XCode 界面执行此操作的详细说明](https://stackoverflow.com/questions/5043066/change-name-of-iphone-app-in-xcode-4 "通过 XCcode 更改产品名称")

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-31T17:02:09.143

如果您想编辑产品名称，而不是删除它；您可以使用以下步骤在目标中设置它：

*   在 XCode 中打开目标
*   转到构建设置选项卡
*   向下滚动到包装->产品名称

Product Name 中设置的名称被添加到 Bundle Identifier 中（空格变为破折号，例如“Test App”变为“Test-App”）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-06T23:16:45.777

它可能是在 .xcconfig 文件中设置的。例如，一个 Parse 示例项目有一个“debug.xcconfig”，其中包含：

```
BUNDLE_IDENTIFIER = com.parse.Anypic 
```

如果是这样，这是改变它的地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-12T17:11:55.363

我看到当 iOS 部署目标高于您的 Xcode 支持的版本时也会发生这种情况。在 World Wide Developers 圣诞节发布测试版和新版本完成时之间。

假设您有一个针对当前 iOS 测试版的最小部署项目，但您使用的是 Xcode 的发布版本。只需在当前 Xcode beta 版本中打开项目即可。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-04-24T15:03:02.230

这也可能与 [Target] > Build Settings > User-Defined 下的用户定义变量有关

# c# - SQL 数据同步

> ID：11929718
> 
> 赞同：0
> 
> 时间：2012-08-13T07:17:01.133
> 
> 标签：c#, .net, sql, client-server

我们有多个客户端在各自的 PC 上运行具有相同数据库结构的相同软件应用程序。所有客户端都处于离线状态且位于不同位置（未通过 LAN 等连接）

是否有可能，每个客户端 pc 收集自己的数据，然后服务器可以恢复客户端的备份并使用每个客户端数据进行更新。通过更新/恢复服务器上的数据应该与所有客户端的数据合并，以便服务器管理员可以查看每个客户端的活动。

我希望我很清楚。

非常感谢您提前。

问候。

编辑：我们将使用 SQL Server Express 2008 Edition。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:26:13.010

正如@Dennis 提到的，您可以使用[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)。由于冲突处理、更改检测、时间戳同步等许多因素，同步是一项非常重要的任务。Microsoft Sync Framework 为您完成所有这些工作。

还有其他几个进行同步的框架。请参阅[OpenSync](http://www.opensync.org/)或[SymmetricDS](http://www.symmetricds.org/)。

# linux - 修补 csv 文件会产生错误

> ID：11929719
> 
> 赞同：0
> 
> 时间：2012-08-13T07:17:02.827
> 
> 标签：linux, diff

我有两个 CSV 文件`test1.csv`，`test2.csv`分别由自定义分隔符 Pipe Sign( `|`) 分隔。我通过以下`diff`命令获取他们的更改

```
diff test2.csv test1.csv > test.patch 
```

现在我正在做的是创建第三个文件`test.csv`并运行补丁，如下所示

```
patch test.csv < test.patch 
```

但是当我运行这个补丁命令时，我得到了以下错误。

```
patching file test.csv
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file test.csv.rej 
```

你能告诉我这个方法有什么问题吗？

*   编辑：我有两个名为 test1.csv 和 test2.csv 的文件。命令按以下方式执行

> diff test2.csv test1.csv > test.patch
> 
> （创建补丁后，我创建了一个新文件“test.csv”）
> 
> 补丁 test.csv < test.patch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:02:06.413

在你的前任。`test.csv`应该类似`test2.csv`。看看下面的例子。

```
 $ cat f1.csv
a
b
c
z
 $ cat f3.csv
a
b
c
d
 $ diff f1.csv f3.csv  > diffop
 $ cp f1.csv tst
 $ cat tst
a
b
c
z
 $ patch tst diffop
patching file tst
 $ cat tst
a
b
c
d 
```

# jira - 当这个故事列表发生变化时，如何找到针对特定故事打开的 JIRA 问题

> ID：11929720
> 
> 赞同：1
> 
> 时间：2012-08-13T07:17:02.280
> 
> 标签：jira, jql, jira-agile

我们正在与绿色料斗合作并有故事。当一个 Bug 打开时，它通过该`'Story Label'`字段链接到一个故事。

现在我想创建一个查询，它将向我显示与 sprint 相关的所有 bug，这意味着与分配给 sprint 的 Stories 相关的所有 bug。

这是获取所有故事的查询：

```
project = TMP AND issuetype = Story AND fixVersion = 11113 
```

这是获取故事所有错误的查询：

```
project = TMP AND issuetype = Bug AND "Story Label" = jim-887 
```

我如何将两者结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:38:06.353

您可能想查看第三方[JQL Tricks 插件](https://marketplace.atlassian.com/plugins/com.j-tricks%3ajql-plugin)。它有一个可以使用的函数 hasLinks()。例如：

project = TMP and issuetype = story and fixVersion = 11113 and linkedIssuesInVersion(11113,"bug related to story")

更多关于这个[博客文章](http://blogs.atlassian.com/2012/09/get-fancy-with-card-colours-in-greenhopper/)的用法。

谢谢，

[尼古拉斯·马尔登](http://nicholasmuldoon.com/)

[@GreenHopperTeam](http://twitter.com/GreenHopperTeam)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T21:09:27.063

尝试以下操作（为清楚起见添加了多余的间距）：

```
project = 'TMP' and( 
      (issuetype = Story and fixVersion = 11113) or 
      (issuetype = Bug and "Story Label" = jim-887)
    ) 
```

# sql-server-2008 - SQL 从 3 个表中选择总和

> ID：11929721
> 
> 赞同：0
> 
> 时间：2012-08-13T07:17:10.607
> 
> 标签：sql-server-2008, sap

我正在使用 Microsoft SQL Server 2008 R2。我想加入 3 个表格，然后按期间（月）对它们进行分组，并获得每个期间的所有金额的总和和最大汇率。我在下面有这个 SQL 语句。

```
SELECT T2.Name AS Period, T1.LineTotal AS Amount, T0.DocRate AS ExchangeRate
FROM OINV T0 INNER JOIN INV1 T1 ON T0.DocEntry = T1.DocEntry 
INNER JOIN dbo.OFPR AS t2 ON T1.FinncPriod = T2.AbsEntry 
WHERE T0.DocStatus = 'O' 
```

上述查询的示例结果：

```
Period          Amount      ExchangeRate
Year 2012-01    500.000000  83.000000
Year 2012-01    1000.000000 1.000000
Year 2012-02    2000.000000 1.000000
Year 2012-02    3000.000000 1.000000
Year 2012-02    2500.500000 1.000000
Year 2012-03    500.000000  1.000000
Year 2012-03    1500.000000 94.000000
Year 2012-04    4000.000000 1.000000
Year 2012-04    2000.000000 1.000000
Year 2012-04    2000.000000 1.000000 
```

我想得到以下结果：

```
Period          Amount      ExchangeRate
Year 2012-01    1500.000000 83.000000
Year 2012-02    7500.000000 1.000000
Year 2012-03    2000.000000 94.000000
Year 2012-04    8000.000000 1.000000 
```

如何修改我的查询以获得上述结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:19:46.613

试试这个：

只做分组

```
SELECT   T2.NAME AS PERIOD
       , SUM(T1.LINETOTAL) AS AMOUNT
       , MAX(T0.DOCRATE) AS EXCHANGERATE
FROM   OINV T0 INNER JOIN INV1 T1 
       ON T0.DOCENTRY = T1.DOCENTRY 
       INNER JOIN DBO.OFPR AS T2 
       ON T1.FINNCPRIOD = T2.ABSENTRY 
WHERE T0.DOCSTATUS = 'O' 
GROUP BY T2.NAME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:20:31.120

尝试使用 SUM、MAX 和 GROUP BY。

就像是

```
SELECT  T2.Name AS Period, 
        SUM(T1.LineTotal) AS Amount, 
        MAX(T0.DocRate) AS ExchangeRate 
FROM    OINV T0 INNER JOIN 
        INV1 T1 ON T0.DocEntry = T1.DocEntry  INNER JOIN 
        dbo.OFPR AS t2 ON T1.FinncPriod = T2.AbsEntry  
WHERE   T0.DocStatus = 'O'  
GROUP BY    T2.Name 
```

# java - 没有限定名称的 Java 反射

> ID：11929726
> 
> 赞同：3
> 
> 时间：2012-08-13T07:17:36.843
> 
> 标签：java, reflection

我正在尝试使用 Java 反射`Class c = Class.forName(className)`

我想在`className`不指定包名称的情况下传递，因为字符串`className`将包含来自多个子包的类，例如`com.A.*`，`com.B.*`...。`com.Z.*`

可能吗？

如果在这种情况下我有很多子包，那么进行案例切换以预先挂起不同的子包是不可行的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T07:21:25.970

一个简单的选择是列出*候选*包：

```
for (String pkg : packages) {
    String fullyQualified = pkg + "." + className;
    try {
        return Class.forName(fullyQualified);
    } catch (ClassNotFoundException e) {
        // Oops. Try again with the next package
    }
} 
```

诚然，这不会是世界上*最好*的代码......

您*可以*通过寻找在`ClassLoader.getResource`找不到类时不会引发异常的替代调用（例如 ）来加快速度。

我当然知道没有任何事情可以让您在*不*指定名称的情况下找到一个类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T07:44:50.430

[首先，使用Reflections](http://code.google.com/p/reflections/)库获取所有类

```
 Reflections reflections = new Reflections();

 Set<Class<?>> allClasses = reflections.getSubTypesOf(Object.class); 
```

接下来，建立一个查找地图。

```
// Doesn't handle collisions (you might want to use a multimap such as http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html instead)
Map<String, Class<?>> classBySimpleName = new HashMap<>();

for(Class<?> c : allClasses) {
    classBySimpleName.put(c.getSimpleName(), c);         
} 
```

当您需要查找课程时，您将执行以下操作：

```
Class<?> clazz = classBySimpleName.get(className); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:21:08.547

从 java.lang.Class 的 javadoc 它是不可能的

```
public static Class<?> forName(String className)
                    throws ClassNotFoundException

Parameters:
className - the fully qualified name of the desired class.
Returns:
the Class object for the class with the specified name. 
```

# postsharp - PostSharp 和 .net 恶魔一起玩好吗？

> ID：11929738
> 
> 赞同：1
> 
> 时间：2012-08-13T07:18:20.780
> 
> 标签：postsharp, redgate

我从 RedGate 获得了 .Net Demon 试用版，它似乎运行良好，但我刚刚意识到我正在使用的 PostSharp 方面被忽略了，我不确定为什么......想知道它是否与事实有关他们都在构建系统上做事。

有其他人成功地一起使用它们吗？我想购买 .Net Demon，但如果我的 PostSharp 东西不起作用，我当然不会。不确定它是否相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:05:54.740

我们（SharpCrafters）不正式支持 .NET Demon。由于 Demon 是一个增量编译器，而 PostSharp 不支持增量编译（它每次都编译整个程序集），我怀疑它是否可以工作，如果它工作，我怀疑它会对性能产生任何影响。由于构建时间通常由 PostSharp 主导，因此减少 C# 编译器的时间不会显着减少您的完整构建时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:52:45.537

.NET Demon 每次编译时都会编译整个程序集，包括 .csproj 中的任何构建后步骤。我不明白为什么它不应该工作。查看构建输出以查看 PostSharp 通常生成的任何日志记录是否存在。

# random - 安装没有安装文件的程序

> ID：11929741
> 
> 赞同：0
> 
> 时间：2012-08-13T07:18:32.730
> 
> 标签：random

我听说你可以把一个已经安装在 PC 上的程序带回家到你自己的电脑上，用任何编程语言编写一个程序来使它工作，而无需安装程序。我想知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:35:55.683

您所描述的应用程序类别称为独立或[便携式应用程序。](http://en.wikipedia.org/wiki/Portable_application)

在此类应用程序中，运行应用程序所需的所有文件都存储在与应用程序文件本身相同的目录中。这不是大多数应用程序的工作方式，因此，您不能让所有应用程序都以这种方式运行。当您搜索“创建便携式应用程序”时，Google 上有各种指南。

您可能想在[此处查看可移植应用程序的良好目录](http://en.wikipedia.org/wiki/List_of_portable_software)

# jquery - jQuery 选择器中的变量和字符串连接——它被认为是有害的吗？

> ID：11929744
> 
> 赞同：0
> 
> 时间：2012-08-13T07:18:54.180
> 
> 标签：jquery, jquery-selectors, string-concatenation

我经常在 jQuery 选择器中看到字符串连接：

```
var $field = $('.' + field, $form);
var $label = $('label[for="' + $field.attr('id') + '"]');
var $elem = $('#' + elem); 
```

由于[句点和冒号在元素 id 中有效](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)（谁知道其他属性中可能包含什么），这样的代码是否没有潜在危险？

我发现一些选择器以任何其他方式编写都不是微不足道的——那么标准做法是什么？原生 DOM 方法并不总是可用的。

我一直避免在 ids 等中使用奇怪的字符，但是在编写供他人普遍使用的工具时，最好避免这种警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:33:30.677

当您完全控制字符串中的内容时，这不是问题，但对于库工具来说，这将是一个问题。

只是不接受工具的名称或身份，接受完整的选择器或元素/jQuery 引用。这样，使用该工具的人有责任创建工作选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:48:15.520

只要您控制 and 中的内容，您的第一个和第三个示例是常见且无害`field`的`elem`。

我从不使用第二种形式，并且会这样写：

```
var match = $field.attr('id');      // or $field[0].id
var $label = $('label').filter(function() {
    return this.getAttribute('for') === match;
}); 
```

从而完全避免了担心转义`match`.

# objective-c - 如何使用open cv检测图像上的黑色矩形ios

> ID：11929750
> 
> 赞同：1
> 
> 时间：2012-08-13T07:19:08.970
> 
> 标签：objective-c, ios5, image-processing, opencv, pattern-matching

> **可能重复：**
> [使用opencv或其他技术识别出现在图像ios四个角上的黑色图案](https://stackoverflow.com/questions/11913911/recognize-black-patterns-appearing-on-the-four-corners-of-the-image-ios-using-op)

在网上冲浪很长时间并没有找到合适的答案后，我在问问题。

有一个从相机捕获的图像，该图像是书页的图像。

它的背景是纯白色的，在纸的四个边角上有黑色和黑色矩形的文字。

我必须检测图像中是否存在黑色矩形，如果存在，我需要以图像填充 iphone 屏幕的方式处理图像，因为显示的四个角显示适合屏幕，所有其他额外部分图像被切断。

为了更清楚，下面是包含图案（不是矩形）的图像，但实际上它们将是矩形。

![在此处输入图像描述](../Images/02c69bb817c31b0e664e427f7337061d.png)

对于这个问题的更多理解，你可以参考shotnote app。我需要实现与theta app相同的相机功能。 [http://itunes.apple.com/us/app/shot-note/id411332997?mt=8](http://itunes.apple.com/us/app/shot-note/id411332997?mt=8) 参考前两张截图。

某些问题可能重复，但该问题没有任何相关答案。

请帮助我如何使用 open cv 或者是否有任何其他技术可以实现此功能。

我被困在这里。

提前致谢！

# php - 如何在 PHP 中将数组分组到一个大数组中

> ID：11929755
> 
> 赞同：0
> 
> 时间：2012-08-13T07:19:38.173
> 
> 标签：php, arrays, multidimensional-array, array-merge

我这里有数据：

```
Array
(
    [3] => Array
    (
        [SiteID] => 3
        [Balance] => 94000.99
        [MinBalance] => 100000.00
        [MaxBalance] => 500000.00
        [OwnerAID] => 17
        [GroupID] => 1
        [Deposit] => 459000
        [Redemption] => 703576
        [Reload] => 169100
    )

    [2] => Array
    (
        [SiteID] => 2
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 83
        [GroupID] => 1
        [Deposit] => 1500
        [Redemption] => 1000
        [Reload] => 1000
    )

    [139] => Array
    (
        [SiteID] => 139
        [Balance] => 855100.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 23
        [GroupID] => 1
        [Deposit] => 0  
        [Redemption] => 0 
        [Reload] => 0 
    )
) 
```

我需要将此阵列分为两组：第一组 - 所有 OwnerAID 拥有一个 SiteID，第二组所有 OwnerAID 拥有多个 SiteID。有可能做到吗？结果应如下所示：

这是在一个大数组中拥有一个 SiteID 的 OwnerAID 组：

```
Array
(
    [17] => Array
    (
        [Sites] => Array 
        (
            [0] => Array
            (
                [SiteID] => 3 
                [Balance] => 94000.99  
                [MinBalance] => 100000.00   
                [MaxBalance] => 500000.00  
                [OwnerAID] => 17  
                [GroupID] => 1 
                [Deposit] => 459000  
                [Redemption] => 703576 
                [Reload] => 169100 
            )
        )
    )    
} 
```

在这里，OwnerAID 在另一个大数组中拥有多个 SiteID：

```
Array
 (
    [83] => Array
    (
        [Sites] => Array 
        (
        [0] => Array
        (
            [SiteID] => 2
            [Balance] => 19000.00
            [MinBalance] => 100000.00
            [MaxBalance] => 1000000.00
            [OwnerAID] => 83
            [GroupID] => 1
            [Deposit] => 1500
            [Redemption] => 1000
            [Reload] => 1000
        ) 
        [1] => Array
        (
            [SiteID] => 149
            [Balance] => 150000.00
            [MinBalance] => 100000.00
            [MaxBalance] => 250000.00
            [OwnerAID] => 83
            [GroupID] => 1
            [Deposit] => 0
            [Redemption] => 0
            [Reload] => 0
        )
    )
) 
```

有人建议我这个代码，但我已经修改了它，我做了一些研究来修改这个代码。请帮助我完成这种结果。请耐心回答我的问题，我只是 PHP 编程世界的初学者。代码如下：

```
public function groupIndividualAndAggregateSites() 
{
    $owners = array();
    foreach($this->combined as $key => $value) {
        $owner_id = $value['OwnerAID'];
        $site_id = $value['SiteID'];
        if (array_key_exists($owner_id,$owners)) {
            // He has one or more sites already?
            if(is_array($owners[$owner_id])) {
                array_push($owners[$owner_id],$site_id);
            } else {
                // User already has one site.  
                // Make an array instead and add old and new siteID
                $old_site_id = $owners[$site_id];
                $owners[$owner_id] = array_merge((array)$value, array($old_site_id));
            }
        } else {
            $owners[$owner_id] = array($value,'Sites'=> array($site_id));
        }
    }
    print_r($owners); 
} 
```

请帮助我，并提前谢谢你。我希望有人可以帮助我想出这种结果。请以正确的方式指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:36:21.890

对不起，我发现阅读代码有点困难，所以我为你写了一个。

```
$new_array=array();
foreach($old_array as $site)
{
    $siteList=array();
    if(isset($new_array[$site['OwnerAID']]['Sites']))
        $siteList=$new_array[$site['OwnerAID']]['Sites'];
    $new_array=array_merge($new_array,array($site['OwnerAID']=>array_merge($siteList,$site['SiteID']=>array('Sites'=>array(
                                                 'SiteID'=>$site['SiteID'],
                                                 'Balance'=>$site['Balance'],
                                                 'MinBalance'=>$site['MinBalance'],
                                                 'MaxBalance'=>$site['MaxBalance'],
                                                 'OwnerAID'=>$site['OwnerAID'],
                                                 'GroupID'=>$site['GroupID'],
                                                 'Deposit'=>$site['Deposit'],
                                                 'Redemption'=>$site['Redemption'],
                                                 'Reload'=>$site['Reload'],
                                                 )))));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:03:59.733

这将完全返回您想要的。

```
 <?php

//Array declaration
    $arr = Array
    (
        3 => Array
        (
            "SiteID" => 3,
            "Balance" => 94000,
            "MinBalance" => 100000.00,
            "MaxBalance" => 500000.00,
            "OwnerAID" => 17,
            "GroupID" => 1,
            "Deposit" => 459000,
            "Redemption" => 703576,
            "Reload" => 169100,
        ),

        2 => Array
        (
            "SiteID" => 2,
            "Balance" => 19000.00,
            "MinBalance" => 100000.00,
            "MaxBalance" => 1000000.00,
            "OwnerAID" => 83,
            "GroupID" => 1,
            "Deposit" => 1500,
            "Redemption" => 1000,
            "Reload" => 1000,
        ),

        139 => Array
        (
            "SiteID" => 139,
            "Balance" => 855100.00,
            "MinBalance" => 100000.00,
            "MaxBalance" => 1000000.00,
            "OwnerAID" => 83,
            "GroupID" => 1,
            "Deposit" => 0,
            "Redemption" => 0 ,
            "Reload" => 0 
        ),
      );

//End of declaration;
//Too lazy for other comments, sorry xD

    foreach ($arr as $key => $value) {
        $Newarr[$value["OwnerAID"]][] = $value; 
    }
    foreach ($Newarr as $key => $value) {
        foreach ($value as $key2 => $value2) {          
        if (count($value) == 1)
            $arrOneSite[$value2["OwnerAID"]]["Sites"][] = $value2;
            else    
                $arrMoreThenOneSite[$value2["OwnerAID"]]["Sites"][] = $value2;
        }
    }

    echo "<pre>";
    print_r($arrOneSite);
    print_r($arrMoreThenOneSite);
    ?> 
```

# php - ajax 表单打开但不更新

> ID：11929756
> 
> 赞同：0
> 
> 时间：2012-08-13T07:19:39.450
> 
> 标签：php, jquery

我正在将表单加载到页面和 div 中，如下所示：

```
<script type="text/javascript">
$('#comments').load('/pages/includes/comments.php', { user:"<?=$user?>", id:"<?=$id?>"
});
</script> 
```

该页面加载正常，系统中的任何评论都显示，但是当我尝试添加新评论时它根本不起作用，下面的comments.php（如果我'包含'文件而不是ajax它可以正常工作顺便说一句）：

```
require '/home/php_/lib/dbconnect.inc';

$comments_id = mysql_real_escape_string($_POST['comments_id']);
$comments = mysql_real_escape_string($_POST['comments']);
$id = mysql_real_escape_string($_POST['id']);

/*******************************************************/
/****************** add item
/*******************************************************/

if ($_POST[additem] == '1'){ // AA

    $additem = mysql_query("
    insert into comments (
    id,
    user_id,
    comments
     )
    VALUES (
    '$id',
    '$user',
    '$comments'
    )",$db);

    if(!$additem) { echo "input error ".mysql_error(); exit; } // debug

} // close AA

/*******************************************************/
/****************** end add item
/*******************************************************/

$coms = mysql_query("select * from comments where id = '$id';",$db);
if(!$coms) { echo "coms error ".mysql_error(); exit; } // debug

if (mysql_num_rows($coms)>0){ // 55

    while($databack44 = mysql_fetch_array($coms)){ // 55

    echo '<div style="width:100%; float:left;">'.$databack44[comments].'</div>';

        } 

        } // 55

        else {  

        echo 'No Comments';

        }

?>      

<form method="post" action="#">
    <textarea name="comments"></textarea>
    <input type="submit" value="Add" class="button green">
    <input type="hidden" name="id" value="<?=$id?>">
    <input type="hidden" name="additem" value="1">
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:50:40.127

那是因为一旦您提交了新评论，它将充当表单提交，并且不像 AJAX 那样工作。

最简单的方法是使用单独的 php 文件来保存评论和[**jquery 表单**](http://jquery.malsup.com/form/)插件将其添加到**comment.php**`<HEAD>`中的标记

 **```
<HEAD>
<script src="http://malsup.github.com/jquery.form.js"></script> 
<script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                location.reload(); 
            }); 
        }); 
    </script> 
</HEAD>
<?php 
$coms = mysql_query("select * from comments where id = '$id';",$db);
if(!$coms) { echo "coms error ".mysql_error(); exit; } // debug

if (mysql_num_rows($coms)>0){ // 55

    while($databack44 = mysql_fetch_array($coms)){ // 55

    echo '<div style="width:100%; float:left;">'.$databack44[comments].'</div>';

        } 

        } // 55

        else {  

        echo 'No Comments';

        }

?>
<form method="post" action="function.php" id="myForm">
    <textarea name="comments"></textarea>
    <input type="submit" value="Add" class="button green">
    <input type="hidden" name="id" value="<?=$id?>">
    <input type="hidden" name="additem" value="1">
    </form> 
```

**函数.php**

```
if ($_POST[additem] == '1'){ // AA

    $additem = mysql_query("
    insert into comments (
    id,
    user_id,
    comments
     )
    VALUES (
    '$id',
    '$user',
    '$comments'
    )",$db);

    if(!$additem) { echo "input error ".mysql_error(); exit; } // debug

} // close AA 
```

**jquery 表单插件**正在禁用标准表单提交功能，并将表单数据作为 ajax 变量发送到给定的**表单操作 url**。

将数据发送到**function.php**后，**comment.php**将通过 location.reload() 重新加载。

现在你有新的评论希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:16:35.043

嘿，达伦很高兴能帮助你...

好的，这是另一种方法。我们需要 3 页。

1.  评论.php
2.  函数.php
3.  评论.js

**评论.php**

```
 <HEAD>
    <script>
            var id="<?php echo $_GET['id']?>"; 
            // wait for the DOM to be loaded 
            $(document).ready(function() { 
            //loading comments on page loading
              view_comment(id);
                }); 
            }); 
        </script> 
    </HEAD>

<div id="display_div"></div>
<form name="f1">
    <textarea name="comments" id="comments"></textarea>
    <input type="hidden" name="id" value="<?=$id?>">
    <input type="hidden" name="additem" value="1">
    <input type="button" value="Add" class="button green" onClick="javascript:add_comment(f1.id.value,f1.additem.value,f1.comments.value)">    
    </form> 
```

**函数.php**

```
<?php
    //view comments
    if($_GET['action']=="view_comment"){
    $coms = mysql_query("select * from comments where id = '$id';",$db);
    if(!$coms) { echo "coms error ".mysql_error(); exit; } // debug

    if (mysql_num_rows($coms)>0){ // 55

        while($databack44 = mysql_fetch_array($coms)){ // 55

        echo '<div style="width:100%; float:left;">'.$databack44[comments].'</div>';

            } 

            } // 55

            else {  

            echo 'No Comments';

            }

    }

    //add comments
    if($_POST['additem']=="1"){
$id=$_POST['id'];
$comments=$_POST['comment'];
     $additem = mysql_query("
        insert into comments (
        id,
        user_id,
        comments
         )
        VALUES (
        '$id',
        '$user',
        '$comments'
        )",$db);

        if(!$additem) { echo "input error ".mysql_error(); exit; }

    }
?> 
```

**评论.js**

```
function view_comment(id){
$("#display_div").empty().html('<img src="pathtoaloadingimage" />');
   $("#display_div").load("pathtoyourfile/function.php?action=view_comment&id="+id).fadeOut('slow').hide().fadeIn('slow');

}

function add_comment(id,additem,comment){
    if(comment!=""){
 $("#display_div").empty().html('<img src="pathtoaloadingimage" />');
    $.ajax({
  type: "POST",
  url: "http://pathtoyourfile/function.php",
  data: "id="+id+"&additem="+additem+"&comment="+comment});
  $("#comments").val('');
  view_comment(id); 
    }else{
         alert('Comment is empty..! Please write something to comment.');
        return false; 
        }

} 
```

现在我们开始了，您有一个 AJAX 评论页面

注意：-将加载图像添加到您的站点并使用该路径，`pathtoaloadingimage`然后它将使您的站点看起来更漂亮。因此，一旦您提交了新评论，加载图像将显示并在同一点显示您的新评论后。不再重新加载

希望这可以帮助你**

# google-search - 有什么方法可以教谷歌我的网站吗？

> ID：11929760
> 
> 赞同：0
> 
> 时间：2012-08-13T07:20:05.567
> 
> 标签：google-search, google-search-console

我正在为我的网站寻找 Google 站点链接，并惊讶地发现 Google 已经为我的网站 cloudchowk.com 生成了站点链接，但只有在谷歌中搜索为“ [cloud chowk](https://www.google.co.in/#hl=en&output=search&sclient=psy-ab&q=cloud+chowk&oq=cloud+chowk&gs_l=hp.3..0l4.595.2491.0.2831.11.9.0.0.0.0.641.1199.5-2.2.0...0.0...1c.SCgI-MPv3PM&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c5b485026ad230b6&biw=1920&bih=955) ”而不是原始和实际的“ [cloudchowk](https://www.google.co.in/#hl=en&output=search&sclient=psy-ab&q=cloudchowk&oq=cloudchowk&gs_l=hp.3..0i10j0.1269.3074.0.3456.10.10.0.0.0.0.234.1862.0j8j2.10.0...0.0...1c.rabHXeHHcVc&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c5b485026ad230b6&biw=1920&bih=955) ”时。

我猜它是基于谷歌拥有的用户行为信息。或者我可能是错的。当我的网站被搜索为“cloudchowk”时，是否有教谷歌或从我这边工作以获取谷歌附加链接？

仅供参考：cloudchowk.com 是一个 wordpress 网站，上线一年或更短时间。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:47:46.880

管理您的网站如何被索引的行为称为搜索引擎优化 (SEO)。谷歌发布了一个 PDF 来指导人们优化网站的过程：[搜索引擎优化入门指南](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/webmasters/docs/search-engine-optimization-starter-guide.pdf)。

我还想看看这篇 Google 支持文章：[Google 101：Google 如何抓取、索引和服务于网络。](http://support.google.com/webmasters/bin/answer.py?answer=70897)

# git - 如何删除除最后五个以外的所有 Git 提交

> ID：11929766
> 
> 赞同：34
> 
> 时间：2012-08-13T07:21:04.067
> 
> 标签：git

我有一个非常大的 Git 存储库，它只包含经常更改的二进制文件。自然地，Git 存储库比其中的实际文件大得多**。**我并不真正关心旧历史，我只需要一些较新的历史就可以恢复一些错误的更改。所以假设我想删除除最后五个之外的所有提交。

自然，我想这样做以保持存储库很小，因此必须从存储库中完全清除已删除的提交。

我想用一个命令（别名）或脚本以非交互方式完成所有这些。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T15:08:04.767

这是一个`rebase-last-five`帮助您入门的别名。它将重新创建当前分支，因此只有最近的五个提交在历史记录中。最好将此脚本 ( `git-rebase-last-five.sh`) 设置为在您的`PATH`; Git 将查找和使用命名`git-....sh`的脚本，而无需任何特殊配置。该脚本应该比这个简单的别名进行更多的错误检查和处理。

```
$ git config --global alias.rebase-last-five '!b="$(git branch --no-color | cut -c3-)" ; h="$(git rev-parse $b)" ; echo "Current branch: $b $h" ; c="$(git rev-parse $b~4)" ; echo "Recreating $b branch with initial commit $c ..." ; git checkout --orphan new-start $c ; git commit -C $c ; git rebase --onto new-start $c $b ; git branch -d new-start ; git gc' 
```

**CAVEAT EMPTOR**：请注意[有关改变历史的警告](http://git-scm.com/docs/git-rebase#_recovering_from_upstream_rebase)。

检查`man`页面（`git help <command>`或[在线](http://git-scm.com/docs)）以获取更多信息。

一个示例用法：

```
$ git --version
git version 1.7.12.rc2.16.g034161a
$ git log --all --graph --decorate --oneline
* e4b2337 (HEAD, master) 9
* e508980 8
* 01927dd 7
* 75c0fdb 6
* 20edb42 5
* 1260648 4
* b3d6cc8 3
* 187a0ef 2
* e5d09cf 1
* 07bf1e2 initial
$ git rebase-last-five 
Current branch: master e4b2337ef33d446bbb48cbc86b44afc964ba0712
Recreating master branch with initial commit 20edb42a06ae987463016e7f2c08e9df10fd94a0 ...
Switched to a new branch 'new-start'
[new-start (root-commit) 06ed4d5] 5
 1 file changed, 1 insertion(+)
 create mode 100644 A
First, rewinding head to replay your work on top of it...
Applying: 6
Applying: 7
Applying: 8
Applying: 9
Deleted branch new-start (was 06ed4d5).
Counting objects: 35, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (15/15), done.
Writing objects: 100% (35/35), done.
Total 35 (delta 4), reused 0 (delta 0)
$ git log --all --graph --decorate --oneline
* a7fb54b (HEAD, master) 9
* 413e5b0 8
* 638a1ae 7
* 9949c28 6
* 06ed4d5 5 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T09:52:38.150

好的，如果您想要我认为您想要的（请参阅我的评论），我认为这应该可行：

1.  创建分支以保存所有提交（以防万一）：

    `git branch fullhistory`

2.  仍然在 master 上时，将 --hard 重置为您要保留历史记录的提交：

    `git reset --hard HEAD~5`

3.  现在重置`--hard`到历史的开头，这应该使您的工作区保持不变，因此它保持在 HEAD~5 状态。

    `git reset --soft <first_commit>`

4.  因此，现在您在 上拥有空白历史记录`master`，以及您在工作区中需要的所有更改。只需提交它们。

    `git commit -m "all the old changes squashed"`

5.  `fullhistory`现在从你想在这里挑选这 4 个提交：

    `git cherry-pick A..B`

其中 A 比 B 大，记住 A 不包括在内。所以它应该是你想要包含的最旧提交的父级。

# c# - 如何检查用户是否在点击事件中有预订？

> ID：11929770
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:21:17.817
> 
> 标签：c#, sql

我是一名新的 C# 和 ASP.NET 开发人员。我正在为我的公司开发一个简单的 Intranet 预订管理系统。我希望系统检查用户是否在活动之前进行了预订。

我有以下数据库设计：

```
Users Table: UserID, Name
Events Table: ID, Title, Description, Location, NumberOfSeats, StartDateTime, EndDateTime, IsActive
Booking Table: BookingID, EventID, UserID 
```

到目前为止，我所做的是检查用户 ID（当用户单击预订按钮时）是否在用户表中。如果没有，他将被自动添加到数据库中。现在我想通过检查 BookingDetails 表来检查他是否在该活动中进行了预订，但我不知道该怎么做？

**你能帮我设计这个条件吗？**

这是我检查用户名的方法：

```
protected void checkUserID(string userID) {

        int eventID = Convert.ToInt32(HiddenField1.Value);

        string NetworkID = userID;
        string Name = Service.(".......");
        string BadgeNo = Service("ffffff");
        string DepartmentCode = Service("ffffff");

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=RegistrationSysDB;Integrated Security=True;";

        //if the user is not in the system database, add him
        if (Security.isExisted(userID) == false)
        {
            //string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=RegistrationSysDB;Integrated Security=True;";
            string insertCommand = "INSERT INTO Users (NetworkID, Name, BadgeNo, DepartmentCode) values (@NetworkID, @Name, @BadgeNo, @DepartmentCode)";

            using(SqlConnection conn = new SqlConnection(connString))
            {
                //Open DB Connection
                conn.Open();

                using(SqlCommand cmd = new SqlCommand(insertCommand, conn))
                {
                    cmd.Parameters.Clear();
                    cmd.Parameters.AddWithValue("@NetworkID", NetworkID);
                    cmd.Parameters.AddWithValue("@Name", Name);
                    cmd.Parameters.AddWithValue("@BadgeNo", BadgeNo);
                    cmd.Parameters.AddWithValue("@DepartmentCode", DepartmentCode);
                    cmd.ExecuteNonQuery();
                }

                conn.Close();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:23:29.653

您的 Booking 表具有 UserID 的外键

```
Booking Table: BookingID, EventID, UserID 
```

您可以获得针对特定 UserID 的记录计数，如果计数大于`0`这意味着用户有预订。您的查询可能是：

```
Select count(*) as UserBookings from Bookings where UserID = @UserID; 
```

你想比较`@UserID`的在哪里，会给你计数`UserID``UserBookings`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:33:15.770

您还没有设置 SELECT 命令的参数，下面是修改后的代码。

```
 string insertBooking = "INSERT INTO BookingDetails (EventID, NetworkID) values (@EventID, @NetworkID)";
    string selectCommand = "SELECT count(*) as UserBookings FROM BookingDetails WHERE NetworkID = @NetworkID AND EventID = @EventID";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        //Open DB Connection
        conn.Open();
        using (SqlCommand cmd = new SqlCommand(selectCommand, conn))
        {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@EventID", eventID);
            cmd.Parameters.AddWithValue("@NetworkID", NetworkID);

            if ((int)cmd.ExecuteScalar() == 0)
            {
                SqlCommand cmd2 = new SqlCommand(insertBooking, conn);
                cmd2.Parameters.Clear();
                cmd2.Parameters.AddWithValue("@EventID", eventID);
                cmd2.Parameters.AddWithValue("@NetworkID", NetworkID);
                cmd2.ExecuteNonQuery();
            }
        }
        //Close the connection
        conn.Close();
    } 
```

# android - 为 Android 编译最新的 OpenSSL

> ID：11929773
> 
> 赞同：28
> 
> 时间：2012-08-13T07:21:26.697
> 
> 标签：android, android-ndk, openssl

我正在尝试为 Android 的 OpenSSL1.0.1c 的 (.so) 文件生成共享库。我发现他们在 android 脚本中添加了三个用于编译 Android 的选项。

```
./Configure android-armv7  (or)
./Configure android-x86    (or)
./Configure android 
```

一旦我为操作系统配置然后尝试编译，它就会抛出错误。目前我正在使用 x86 windows7 并安装了 Cygwin、Android sdk R20、Android NDK r8

```
sh-4.1$ make
making all in crypto...
make[1]: Entering directory `/cygdrive/d/SourceCodes/OpenSSL/openssl-1.0.1c/crypto'
gcc -I. -I.. -I../include  -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -march=armv7-a -mandroid -I/include -B/lib -O3 -fomit-frame-pointer -Wall -DOPENSSL_BN_ASM_MONT -DOP
ENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DAES_ASM -DGHASH_ASM   -c -o cryptlib.o cryptlib.c
cc1: error: unrecognized command line option "-mandroid"
cryptlib.c:1:0: error: bad value (armv7-a) for -march= switch
<builtin>: recipe for target `cryptlib.o' failed
make[1]: *** [cryptlib.o] Error 1
make[1]: Leaving directory `/cygdrive/d/SourceCodes/OpenSSL/openssl-1.0.1c/crypto'
Makefile:278: recipe for target `build_crypto' failed
make: *** [build_crypto] Error 1
sh-4.1$ 
```

请让我知道是否有人遇到过类似的问题并获得解决相同问题的解决方案。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-09-02T16:55:54.223

我真的不建议在官方 OpenSSL 网站之外获取任何东西。在处理密码学和安全性时，您不能冒险。

我看到的唯一问题是您使用的是主机的 gcc 而不是使用 android 的交叉编译器。

这是我在 Ubuntu 14.04LTS 上编译官方 OpenSSL 的方法（适用于 OpenSSL 1.0.1g）

从您的主文件夹中，运行以下命令：

```
tar xzvf ~/Downloads/openssl-1.0.1g.tar.gz
cd openssl-1.0.1g
export NDK=~/android-ndk-r9d
$NDK/build/tools/make-standalone-toolchain.sh --platform=android-9 --toolchain=arm-linux-androideabi-4.6 --install-dir=`pwd`/android-toolchain-arm
export TOOLCHAIN_PATH=`pwd`/android-toolchain-arm/bin
export TOOL=arm-linux-androideabi
export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
export CC=$NDK_TOOLCHAIN_BASENAME-gcc
export CXX=$NDK_TOOLCHAIN_BASENAME-g++
export LINK=${CXX}
export LD=$NDK_TOOLCHAIN_BASENAME-ld
export AR=$NDK_TOOLCHAIN_BASENAME-ar
export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
export ARCH_FLAGS="-march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16"
export ARCH_LINK="-march=armv7-a -Wl,--fix-cortex-a8"
export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export LDFLAGS=" ${ARCH_LINK} " 
```

然后运行您的配置脚本：

```
./Configure android-armv7 
```

然后构建

```
PATH=$TOOLCHAIN_PATH:$PATH make 
```

您应该看到它正在使用`arm-linux-androideabi-gcc`而不是`gcc`

为旧的 armeabi 构建：

```
tar xzvf ~/Downloads/openssl-1.0.1g.tar.gz
cd openssl-1.0.1g
export NDK=~/android-ndk-r9d
$NDK/build/tools/make-standalone-toolchain.sh --platform=android-9 --toolchain=arm-linux-androideabi-4.6 --install-dir=`pwd`/android-toolchain-arm
export TOOLCHAIN_PATH=`pwd`/android-toolchain-arm/bin
export TOOL=arm-linux-androideabi
export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
export CC=$NDK_TOOLCHAIN_BASENAME-gcc
export CXX=$NDK_TOOLCHAIN_BASENAME-g++
export LINK=${CXX}
export LD=$NDK_TOOLCHAIN_BASENAME-ld
export AR=$NDK_TOOLCHAIN_BASENAME-ar
export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
export ARCH_FLAGS="-mthumb"
export ARCH_LINK=
export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export LDFLAGS=" ${ARCH_LINK} "
./Configure android
make clean
PATH=$TOOLCHAIN_PATH:$PATH make 
```

为 x86 构建：

```
tar xzvf ~/Downloads/openssl-1.0.1g.tar.gz
cd openssl-1.0.1g
export NDK=~/android-ndk-r9d
$NDK/build/tools/make-standalone-toolchain.sh --platform=android-9 --toolchain=x86-4.6 --install-dir=`pwd`/android-toolchain-x86
export TOOLCHAIN_PATH=`pwd`/android-toolchain-x86/bin
export TOOL=i686-linux-android
export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
export CC=$NDK_TOOLCHAIN_BASENAME-gcc
export CXX=$NDK_TOOLCHAIN_BASENAME-g++
export LINK=${CXX}
export LD=$NDK_TOOLCHAIN_BASENAME-ld
export AR=$NDK_TOOLCHAIN_BASENAME-ar
export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
export ARCH_FLAGS="-march=i686 -msse3 -mstackrealign -mfpmath=sse"
export ARCH_LINK=
export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
export LDFLAGS=" ${ARCH_LINK} "
./Configure android-x86
make clean
PATH=$TOOLCHAIN_PATH:$PATH make 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-12T19:26:22.727

在 OpenSSL 1.0.1e 中，我需要做的就是：

```
CC=~/android-ndk-r9/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc ./Configure android-armv7
ANDROID_DEV=~/android-ndk-r9//platforms/android-8/arch-arm/usr make build_libs 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-28T12:51:42.950

感谢此处发布的说明以及其他一些补充内容，我制作了一个自动脚本，它编译了最新的适用于 Android 的 OpenSSL 库，支持：armeabi、armeabi-v7a、x86、x86_64 和 arm64-v8a：

```
#!/bin/bash -e
#@author Aleksandar Gotev (alex.gotev@mobimesh.it)
#Hints and code taken also from http://stackoverflow.com/questions/11929773/compiling-the-latest-openssl-for-android

if [ "$#" -ne 6 ]
then
    echo "Usage:"
    echo "./openssl-build <ANDROID_NDK_PATH> <OPENSSL_SOURCES_PATH> <ANDROID_TARGET_API> \\"
    echo "                <ANDROID_TARGET_ABI> <GCC_VERSION> <OUTPUT_PATH>"
    echo
    echo "Supported target ABIs: armeabi, armeabi-v7a, x86, x86_64, arm64-v8a"
    echo
    echo "Example using GCC 4.8, NDK 10e, OpenSSL 1.0.2d and Android API 21 for armeabi-v7a."
    echo "./openssl-build /home/user/android-ndk-r10e \\"
    echo "                /home/user/openssl-1.0.2d \\"
    echo "                21 \\"
    echo "                armeabi-v7a \\"
    echo "                4.8 \\"
    echo "                /home/user/output/armeabi-v7a"
    exit 1
fi

NDK_DIR=$1
OPENSSL_BASE_FOLDER=$2
OPENSSL_TARGET_API=$3
OPENSSL_TARGET_ABI=$4
OPENSSL_GCC_VERSION=$5
OPENSSL_OUTPUT_PATH=$6

NDK_MAKE_TOOLCHAIN="$NDK_DIR/build/tools/make-standalone-toolchain.sh"
OPENSSL_TMP_FOLDER="/tmp/openssl"
rm -rf "$OPENSSL_TMP_FOLDER"
mkdir -p "$OPENSSL_TMP_FOLDER"
cp -r ${OPENSSL_BASE_FOLDER} ${OPENSSL_TMP_FOLDER}

function build_library {
    mkdir -p ${OPENSSL_OUTPUT_PATH}
    export PATH=$TOOLCHAIN_PATH:$PATH
    make && make install
    rm -rf ${OPENSSL_TMP_FOLDER}
    echo "Build completed! Check output libraries in ${OPENSSL_OUTPUT_PATH}"
}

if [ "$OPENSSL_TARGET_ABI" == "armeabi-v7a" ]
then
    ${NDK_MAKE_TOOLCHAIN} --platform=android-${OPENSSL_TARGET_API} \
                          --toolchain=arm-linux-androideabi-${OPENSSL_GCC_VERSION} \
                          --install-dir="${OPENSSL_TMP_FOLDER}/android-toolchain-arm"
    export TOOLCHAIN_PATH="${OPENSSL_TMP_FOLDER}/android-toolchain-arm/bin"
    export TOOL=arm-linux-androideabi
    export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
    export CC=$NDK_TOOLCHAIN_BASENAME-gcc
    export CXX=$NDK_TOOLCHAIN_BASENAME-g++
    export LINK=${CXX}
    export LD=$NDK_TOOLCHAIN_BASENAME-ld
    export AR=$NDK_TOOLCHAIN_BASENAME-ar
    export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
    export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
    export ARCH_FLAGS="-march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16"
    export ARCH_LINK="-march=armv7-a -Wl,--fix-cortex-a8"
    export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
    export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export LDFLAGS=" ${ARCH_LINK} "
    cd ${OPENSSL_TMP_FOLDER}
    ./Configure android-armv7 --openssldir=${OPENSSL_OUTPUT_PATH}
    build_library

elif [ "$OPENSSL_TARGET_ABI" == "arm64-v8a" ]
then
    ${NDK_MAKE_TOOLCHAIN} --platform=android-${OPENSSL_TARGET_API} \
                          --toolchain=aarch64-linux-android-4.9 \
                          --install-dir="${OPENSSL_TMP_FOLDER}/android-toolchain-arm64"
    export TOOLCHAIN_PATH="${OPENSSL_TMP_FOLDER}/android-toolchain-arm64/bin"
    export TOOL=aarch64-linux-android
    export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
    export CC=$NDK_TOOLCHAIN_BASENAME-gcc
    export CXX=$NDK_TOOLCHAIN_BASENAME-g++
    export LINK=${CXX}
    export LD=$NDK_TOOLCHAIN_BASENAME-ld
    export AR=$NDK_TOOLCHAIN_BASENAME-ar
    export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
    export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
    export ARCH_FLAGS=
    export ARCH_LINK=
    export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
    export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export LDFLAGS=" ${ARCH_LINK} "
    cd ${OPENSSL_TMP_FOLDER}
    ./Configure android --openssldir=${OPENSSL_OUTPUT_PATH}
    build_library

elif [ "$OPENSSL_TARGET_ABI" == "armeabi" ]
then
    ${NDK_MAKE_TOOLCHAIN} --platform=android-${OPENSSL_TARGET_API} \
                          --toolchain=arm-linux-androideabi-${OPENSSL_GCC_VERSION} \
                          --install-dir="${OPENSSL_TMP_FOLDER}/android-toolchain-arm"
    export TOOLCHAIN_PATH="${OPENSSL_TMP_FOLDER}/android-toolchain-arm/bin"
    export TOOL=arm-linux-androideabi
    export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
    export CC=$NDK_TOOLCHAIN_BASENAME-gcc
    export CXX=$NDK_TOOLCHAIN_BASENAME-g++
    export LINK=${CXX}
    export LD=$NDK_TOOLCHAIN_BASENAME-ld
    export AR=$NDK_TOOLCHAIN_BASENAME-ar
    export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
    export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
    export ARCH_FLAGS="-mthumb"
    export ARCH_LINK=
    export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
    export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export LDFLAGS=" ${ARCH_LINK} "
    cd ${OPENSSL_TMP_FOLDER}
    ./Configure android --openssldir=${OPENSSL_OUTPUT_PATH}
    build_library

elif [ "$OPENSSL_TARGET_ABI" == "x86" ]
then
    ${NDK_MAKE_TOOLCHAIN} --platform=android-${OPENSSL_TARGET_API} \
                          --toolchain=x86-${OPENSSL_GCC_VERSION} \
                          --install-dir="${OPENSSL_TMP_FOLDER}/android-toolchain-x86"
    export TOOLCHAIN_PATH="${OPENSSL_TMP_FOLDER}/android-toolchain-x86/bin"
    export TOOL=i686-linux-android
    export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
    export CC=$NDK_TOOLCHAIN_BASENAME-gcc
    export CXX=$NDK_TOOLCHAIN_BASENAME-g++
    export LINK=${CXX}
    export LD=$NDK_TOOLCHAIN_BASENAME-ld
    export AR=$NDK_TOOLCHAIN_BASENAME-ar
    export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
    export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
    export ARCH_FLAGS="-march=i686 -msse3 -mstackrealign -mfpmath=sse"
    export ARCH_LINK=
    export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
    export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export LDFLAGS=" ${ARCH_LINK} "
    cd ${OPENSSL_TMP_FOLDER}
    ./Configure android-x86 --openssldir=${OPENSSL_OUTPUT_PATH}
    build_library

elif [ "$OPENSSL_TARGET_ABI" == "x86_64" ]
then
    ${NDK_MAKE_TOOLCHAIN} --platform=android-${OPENSSL_TARGET_API} \
                          --toolchain=x86_64-4.9 \
                          --install-dir="${OPENSSL_TMP_FOLDER}/android-toolchain-x86_64"
    export TOOLCHAIN_PATH="${OPENSSL_TMP_FOLDER}/android-toolchain-x86_64/bin"
    export TOOL=x86_64-linux-android
    export NDK_TOOLCHAIN_BASENAME=${TOOLCHAIN_PATH}/${TOOL}
    export CC=$NDK_TOOLCHAIN_BASENAME-gcc
    export CXX=$NDK_TOOLCHAIN_BASENAME-g++
    export LINK=${CXX}
    export LD=$NDK_TOOLCHAIN_BASENAME-ld
    export AR=$NDK_TOOLCHAIN_BASENAME-ar
    export RANLIB=$NDK_TOOLCHAIN_BASENAME-ranlib
    export STRIP=$NDK_TOOLCHAIN_BASENAME-strip
    export CPPFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export CXXFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 -frtti -fexceptions "
    export CFLAGS=" ${ARCH_FLAGS} -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-strict-aliasing -finline-limit=64 "
    export LDFLAGS=" ${ARCH_LINK} "
    cd ${OPENSSL_TMP_FOLDER}
    ./Configure linux-x86_64 --openssldir=${OPENSSL_OUTPUT_PATH}
    build_library

else
    echo "Unsupported target ABI: $OPENSSL_TARGET_ABI"
    exit 1
fi 
```

脚本文档：[https ://github.com/alexbbb/pjsip-android-builder#build-only-openssl](https://github.com/alexbbb/pjsip-android-builder#build-only-openssl)

最后一个版本检查：[https ://github.com/alexbbb/pjsip-android-builder/blob/master/openssl-build](https://github.com/alexbbb/pjsip-android-builder/blob/master/openssl-build)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-18T15:46:51.127

我在这里将一些有用的建议整合到了适用于我的 OpenSSL for Android 的构建环境中。

*   支持构建多种架构 - ARM、ARMv7、X86
*   使用 OpenSSL 源代码
*   与 Android.mk 构建集成
*   包含预编译的 OpenSSL 1.0.2h（根据需要使用或自己编译）

[https://github.com/ph4r05/android-openssl](https://github.com/ph4r05/android-openssl)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-26T14:27:29.477

如果有人遇到`< 1.0.2f/1.0.1r`在其中一个本地库中使用易受攻击版本的 OpenSSL ( ) 的问题，我会添加更多详细信息和说明。

前提条件：需要先配置Android NDK。

1.  首先，下载`OpenSSL`兼容版本（`> 1.0.2f/1.0.1r`）。
2.  [从此链接](https://github.com/taskworld/openssl-mobile/tree/master/android)下载两个脚本。万一有人想知道他们在做什么（你应该——它是一个加密库！！！）：他们`OpenSSL`为每个 android ABI 处理器架构（、、、`armeabi`等等`x86`）`mips`构建库

3.  修改 setenv-android-mod.sh ->`18`与 ndk 版本一致

4.  修改 setenv-android-mod.sh ->`40`与 Android API 版本一致

5.  `7`使用库的文件夹名称修改 build-all-arch.sh -> 行`OpenSSL`（在我的情况下是`openssl-1.0.1t`）

6.  成功构建后，文件夹内`dist`将显示库

要将`openSSL`项目添加为预构建的静态库，请创建：

1.  `openssl``jni`包含目录下`lib/`的文件夹（其中包含`.a`支持的体系结构的文件），
2.  `include/`其中有必要的includes（你可以在你下载的openssl版本下找到，注意有些头文件是符号链接）
3.  修改`Android.mk`内部`jni`文件夹添加以下内容：

    ```
    include $(CLEAR_VARS) 
    LOCAL_MODULE := libssl
    LOCAL_SRC_FILES := lib/$(TARGET_ARCH_ABI)/libssl.a
    include $(PREBUILT_STATIC_LIBRARY)
    include $(CLEAR_VARS)
    LOCAL_MODULE := libcrypto
    LOCAL_SRC_FILES := lib/$(TARGET_ARCH_ABI)/libcrypto.a
    include $(PREBUILT_STATIC_LIBRARY) 
    ```

然后，要在另一个`jni`模块中使用该库，请将以下内容添加到它的`Android.mk`文件中：

```
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../openssl/include
LOCAL_STATIC_LIBRARIES := libssl libcrypto 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T01:28:25.787

这并不能解决您的问题，但也许会有所帮助。谷歌小组发布了他们已成功为 Android 编译 OpenSSL 1.0.1 beta2 的帖子。

[https://groups.google.com/forum/?fromgroups#!topic/android-security-discuss/5-_gCAmEo-M](https://groups.google.com/forum/?fromgroups#!topic/android-security-discuss/5-_gCAmEo-M)

这可能也有帮助，一个为 Android 构建 1.0.0a 的开源项目：

[https://github.com/eighthave/openssl-android](https://github.com/eighthave/openssl-android)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-23T10:03:23.450

使用 NDK v22 和 openssl-1.0.2o：

```
export PATH=$(echo -n $ANDROID_NDK/toolchains/llvm/prebuilt/*/bin):$PATH
./Configure android-x86 no-asm
make clean build_libs AR="llvm-ar r" RANLIB="llvm-ranlib" CC=i686-linux-android19-clang CFLAG="-fPIC -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -D__ANDROID_API__=19 -Os -fomit-frame-pointer -Wall -I$ANDROID_NDK_ROOT/sysroot/usr/include -I$ANDROID_NDK_ROOT/sysroot/usr/include/i686-linux-android"
mkdir -p x86/lib x86/include/openssl
cp lib*.a x86/lib
cp include/openssl/* x86/include/openssl 
```

为 x86 构建静态库

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-07T21:09:34.687

您可以使用[此脚本](https://github.com/stdchpie/android-openssl)在 Windows 7 + Cygwin 下编译 openssl。您只需要更改 ndk 的位置并选择 android api 版本。

我的方式一步一步（Win 7 x64 + Cygwin + ndk r10c）

1.  将文件复制`setenv-android-mod.sh`到`build-all-arch.sh`您的 openssl 目录。

2.  修改文件`build-all-arch.sh`

    *   `cd openssl-1.0.1j`到`#cd openssl-1.0.1j`（第 56 行）

    *   `cd ..`到`#cd ..`（第 80 行）

3.  修改文件`setend-android-mod.sh`

    *   `_ANDROID_NDK="android-ndk-r10c-x64"`更改为您的 ndk 版本（第 18 行）
    *   `_ANDROID_API="android-19"`更改为您的 api 版本（第 40 行）
    *   `ANDROID_NDK_ROOT="d:/work/android/android-ndk-r10c-x64"`指定您的目录（第 42 行）
    *   `ANDROID_TOOLCHAIN="d:/work/android/android-ndk-r10c-x64/toolchains"`指定您的目录（第 43 行）
    *   `export CROSS_COMPILE="aarch64-linux-android-"`到`export CROSS_COMPILE="$ANDROID_TOOLCHAIN/aarch64-linux-android-"`（第 219 行），更改相同的第 225、231、237、243 行 - 只需添加`$ANDROID_TOOLCHAIN/`到交叉编译路径即可。

运行`build-all-arch.sh`。

所有库 ( `*.so`) 将位于`/prebuilt/`目录中。

PS 由于错误的符号链接，我还有一些错误，但是在执行以下命令后一切都很好，`export CYGWIN="winsymlinks:native"`请参阅[此处](https://stackoverflow.com/questions/3648819/how-to-make-symbolic-link-with-cygwin-in-windows-7)了解详细信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-23T12:46:05.650

以下是如何使用 Cygwin 和 Android NDK 在 Windows 上构建 OpenSSL

1.  下载并解压 OpenSSL 源代码
2.  [从https://github.com/pstanoev/OpenSSL-For-Android](https://github.com/pstanoev/OpenSSL-For-Android)下载脚本
3.  以管理员用户运行`cmd`并执行

    `SET CYGWIN=winsymlinks:nativestrict`

4.  在同一个 cmd 窗口中，打开 Cygwin：

    `cygwin.bat`

5.  使脚本可执行：

    `chmod +x *.sh`

6.  在 Cygwin 中执行：

    `/cygdrive/c/dev/openssl-source/openssl-build.sh /cygdrive/c/dev/android-ndk-r12b /cygdrive/c/dev/openssl-source/openssl-1.0.2j 15 armeabi-v7a 4.9 /home/user/openssl`

    *   针对您的 Android NDK 和源的位置进行修改
7.  将 libcrypto.so 和 include/* 文件复制到此模块。用于`cp -r`复制以跟随链接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-05T06:17:16.083

这是我为 openssl-1.0.2g 做的：

```
$ rm -rf openssl-1.0.2g/
$ tar xzf openssl-1.0.2g.tar.gz
$ chmod a+x setenv-android.sh
$ . ./setenv-android.sh ---> Note: make sure in the same folder of your openssl-1.0.2g
$ cd openssl-1.0.2g/

$ perl -pi -e 's/install: all install_docs install_sw/install: install_docs install_sw/g' Makefile.org

$ ./config shared no-ssl2 no-ssl3 no-comp no-hw no-engine --openssldir=<Path of your OpenSSL> 

$ make depend
$ make clean
$ make all
before make install, ---Delete the "include" folder (path/of/your/openssl-1.0.2g/include)  or you may move it to another directory for safe keeping. 
$ make install 
```

确保在 setenv-android.sh 中输入正确的 NDK 路径，否则会出错。

此构建的示例我使用了 Android NDK vr10b ( [http://dl.google.com/android/ndk/android-ndk32-r10b-darwin-x86.tar.bz2](http://dl.google.com/android/ndk/android-ndk32-r10b-darwin-x86.tar.bz2) ) 并在我的 setenv-android 中使用了 ff 路径值。 .sh 文件：

```
_ANDROID_NDK="android-ndk-r10b" (Line 12)
_ANDROID_EABI="arm-linux-androideabi-4.8"(Line 16)
_ANDROID_API="android-19"(Line 24) 
```

参考： [https ://wiki.openssl.org/index.php/Android](https://wiki.openssl.org/index.php/Android)

**注意 --->** 我创建了一个 github 提交来回答这个问题，请参阅：[https ://github.com/rjmangubat23/OpenSSL](https://github.com/rjmangubat23/OpenSSL)

我将 setenv-android.sh 的不同脚本上传到我的 github 上，因为您需要针对不同架构使用不同类型的脚本：

对于 x86：[https ://github.com/rjmangubat23/OpenSSL/tree/master/x86](https://github.com/rjmangubat23/OpenSSL/tree/master/x86)

对于 ArmV7：[https ://github.com/rjmangubat23/OpenSSL/tree/master/ArmV7](https://github.com/rjmangubat23/OpenSSL/tree/master/ArmV7)

在此处下载 Openssl：ftp: [//ftp.openssl.org/source](ftp://ftp.openssl.org/source)

在此处下载 Android NDK 文件的完整列表：[https ://github.com/taka-no-me/android-cmake/blob/master/ndk_links.md](https://github.com/taka-no-me/android-cmake/blob/master/ndk_links.md)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-25T08:18:05.283

遵循这些说明可能会有所帮助:)

1：从此网址下载Android NDK（版本ndk-r13b）：

```
https://dl.google.com/android/repository/android-ndk-r13b-linux-x86_64.zip 
```

2：解压NDK到/home/Android。

3：从此 URL 下载交叉编译设置脚本：

```
https://wiki.openssl.org/images/7/70/Setenv-android.sh 
```

4：在 Setenv-android.sh 脚本中进行以下更改：

```
a: Add the following line to the start of the script

        ANDROID_NDK_ROOT=/home/Android/android-ndk-r13b

b: Modify _ANDROID_NDK="android-ndk-r13".

c: Modify _ANDROID_EABI="arm-linux-androideabi-4.9"

d: Modify _ANDROID_API="android-23" 
```

5：从此网址下载 openssl（版本 1.0.2n）：

```
https://www.openssl.org/source/old/1.0.2/openssl-1.0.2n.tar.gz 
```

6：解压下载的压缩包。

7：打开新的终端窗口并导航到提取的目录。

8：将Setenv-android.sh脚本移动到该目录下，执行以下命令：

```
chmod a+x Setenv-android.sh
source ./Setenv-android.sh 
```

9：运行以下命令（配置 OpenSSL 源以构建 Android）：

```
./Configure shared android 
```

10：执行以下命令构建 libcrypto 和 libssl 共享库。

```
make CALC_VERSIONS="SHLIB_COMPAT=; SHLIB_SOVER=" build_libs 
```

11：让构建成功完成。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-30T20:15:25.490

这个问题和许多其他类似的问题让我苦恼了一周左右，但我终于破解了它，所以我想我会分享我的解决方案。如果您愿意破解代码，OpenSSL 可以为 21+ 编译并在 Android 4.03 设备上运行。我们使用 libcurl，所以想要保持最新。步骤有点复杂：

首先确保你有一个可构建的 libcurl 版本。我建议作为一个很好的起点[https://github.com/cocos2d/cocos2d-x-3rd-party-libs-src](https://github.com/cocos2d/cocos2d-x-3rd-party-libs-src)

他们保持最新的构建脚本。

首先将“build”中的 android.ini 破解到版本 21

接下来，我必须将以下存根函数添加到 jni 项目的某处：

```
// SPECIAL API 21+ functions required for android to build on newer platform targets.

float strtof (const char* str, char** endptr)
{
    return (float)strtod(str, endptr);
}

int __isnanf(float x)
{
    return (x != x);
}

double atof (const char* s)
{
    double rez = 0, fact = 1;
    if (*s == '-'){
        s++;
        fact = -1;
    };
    for (int point_seen = 0; *s; s++){
        if (*s == '.'){
            point_seen = 1;
            continue;
        };
        int d = *s - '0';
        if (d >= 0 && d <= 9){
            if (point_seen) fact /= 10.0f;
            rez = rez * 10.0f + (float)d;
        };
    };
    return rez * fact;
}

void srandom(unsigned int seed)
{
    std::srand(seed);
}

static unsigned long _next = 1;

void srand(unsigned int seed)
{
    _next = seed;
}

long random()
{
    return rand();
}

int rand()
{
    _next = _next * 1103515245 + 12345;
    return (unsigned int)(_next/65536) % 32768;
}

/* the default is bsd */
__sighandler_t signal(int s, __sighandler_t f)
{
    return 0;
} 
```

请注意，信号功能可能会更好，但对我们来说并不重要。这可以阻止 4.03 设备上由 5+ 中的标头更改引起的可怕的“找不到符号”错误（[https://groups.google.com/forum/#!topic/android-ndk/RjO9WmG9pfE](https://groups.google.com/forum/#!topic/android-ndk/RjO9WmG9pfE)）。

接下来为您要构建的 openssl 版本下载 tar.gz 并将其解压缩到某个地方。编辑 crypto/ui/ui_openssl.c 和 crypto/des/read_pwd.c 并确保不使用 tcsetattr 的 #defines。我使用了蛮力 #if 0 和 #if 1 - 请注意，这应该可以通过旋转预处理器来实现，但我现在放弃了。如果有人想分享正确的魔法，请做！

现在您需要将文件重新 tar 到 tarballs 文件中（确保将它的根文件夹放在那里：

并运行（在我的情况下）

shasum -a 512 curl-7.50.0.tar.gz > ../src/curl/SHA512SUMS

这将允许 cocos2d ./build.sh 运行。就像是：

./build.sh -p=android --libs=openssl,curl --arch=armv7 --mode=release

最后 - 这让我在制作通用 .a 文件方面感到困惑，但这不是问题的直接部分，请确保您使用不使用 NEON 指令的版本。Tegra 2 设备显然有 FPU 但没有 NEON。我认为这可以使用 -mfpu=vfp 作为编译器标志来完成，但我选择只使用 armv5 构建，因为在这方面性能对我来说并不重要（而且我已经有足够令人讨厌的现实世界的惊喜了已经）。

最后你应该得到一个很好的 .a 文件，它可以在任何地方工作，并且可以用于针对最新最好的 Android 的项目。现在，如果只有来自 OpenSSL 项目的人可以阅读并修复该项目，以便它了解 2 年前发布的 android 内容！

祝你好运！

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-07-02T12:51:39.367

请参阅[PJSIP Build For Android with Integration of G729 Codec](https://medium.com/@shehrazjazib/pjsip-build-for-android-with-integration-of-g729-codec-7d677ea68373)以编译最新的 Openssl for Android。解释得很好。

# gwt - SmartGwt 集成后 GWT ComboBox 不工作

> ID：11929777
> 
> 赞同：0
> 
> 时间：2012-08-13T07:21:51.030
> 
> 标签：gwt, smartgwt

> **可能重复：**
> [智能 Gwt 组件未在 html div 标签中呈现](https://stackoverflow.com/questions/4024423/smart-gwt-components-are-not-rendered-in-html-div-tag)

我的问题是我有一个很好地运行 gwt 小部件的项目。现在针对一些客户需求，我们在其中引入了一些 smartGwt 的变化。

问题是所有这些要求都已成功完成，但结果或其他原因，以前的 ComboBox 下拉菜单不起作用，没有一个。请帮忙。

我是否也必须发布代码（因为它太大）？如果你想要它，我会尝试将它粘贴在这里。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:12:27.403

“不起作用”是什么意思。并排使用 Gwt 和 Smartgwt 时会出现 zindex 问题。如果是此类问题，您可以查看此线程（[此处）。](https://stackoverflow.com/questions/8713770/gwt-suggestbox-with-smartgwt)如果没有给我们更多的细节。

# c# - C#：IF 语句中操作数的执行顺序

> ID：11929779
> 
> 赞同：0
> 
> 时间：2012-08-13T07:22:08.690
> 
> 标签：c#

我在浏览 .net 源代码时遇到了一些声明：

```
If( null != name)
If( false == check()) 
```

上述语句中的 (name != null) 和 (Check() == false) 语句有什么区别？

任何人都可以让我清楚这一点吗？请。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:27:07.110

我确定这是重复的，但我现在找不到。

带有常量的代码通常由具有（旧）C 语言背景的开发人员编写，您可以在其中编写：

```
if (NULL == x) 
```

而不是这个：

```
if (x == NULL) 
```

以防万一你犯了这样的错字：

```
if (x = NULL) // Valid, but doesn't do what you want. 
```

在C# 中的*大多数*情况下，您不需要这样做 - 因为`if`语句中的条件必须可转换为`bool`.

当您与布尔常量进行比较时，它*会有所不同：*

```
if ((Check() = false) // Eek! 
```

...这是写的原因之一：

```
if (!Check()) 
```

基本上，将变量放在首位通常更具可读性 - 在 C# 中，将常量放在首位的原因几乎永远不会适用。（无论如何，现代 C 和 C++ 编译器通常都会给你一个警告，所以在这些语言中它也不再是一个好主意，据我所知......）

就评估顺序而言，*理论上*存在差异，即左侧操作数*将*在右侧操作数之前进行评估......但作为常量`null`并且`false`没有任何副作用，没有*真正的*区别.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:25:56.220

我认为这种风格带有C/C++背景，其中的运算符`=`也可以在if语句中使用，既可以用于比较也可以用于赋值。

该语句 `if( null != name)`与 相同`if(name != null)`，因此与其他语句相同

为了防止错误地将值分配给左侧，这种检查方式在 C/C++ 中使用，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:25:50.533

看看[编码恐怖尤达条件](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)

> 使用 if(constant == variable) 而不是 if(variable == constant)，例如 if(4 == foo)。因为这就像说“如果天空是蓝色的”或“如果男人是高的”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:26:52.007

奇怪的反转看起来像是由 C/C++ 程序员编写的......基本上，在 C/C++ 中，如果你不小心键入：

```
if(name = null) 
```

代替

```
if(name == null) 
```

然后*编译*并在调用时将值更改为 null 。避免这个错误的 AC/C++ 习惯是使用常量，例如`null`/`false` ***总是在左边***。这是因为您无法重新分配常量，因此如果您使用`=`而不是`==`. 在 C# 中，它 ( `if(a = null)`) 通常不会编译，所以这不是问题。

这里的位置没有区别 - 双方都进行了评估。惯用的 C# 就是：

```
if(name != null) ...
if(!check()) ... 
```

# php - 如何在带有链接的列表中获取 json 数据

> ID：11929780
> 
> 赞同：1
> 
> 时间：2012-08-13T07:22:08.110
> 
> 标签：php, mysql, html

嗨，我可以将 json 数据作为 html 页面中的列表获取，但我喜欢作为链接列表获取。因为当我点击链接时，它会显示详细信息。

我做了什么`tenantlistmob.php`

```
<?php 
include('connection.php');
$result = mysql_query("SELECT * FROM tenanttemp");
while ($row = mysql_fetch_assoc($result)) 
{
$array[] = array($row['TenantFirstName']);
}
echo json_encode($array);
?> 
```

然后我的html页面是

```
<!DOCTYPE HTML>
<html>
<link rel="stylesheet" href="../jasmine-device_2/styles/main.css" />
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" language="javascript">
 $(document).ready(function() { 
    jQuery.getJSON("tenantlistmob.php", function (jsonData) {

            jsonData= eval(jsonData);//get json array

            for (i = 0; i < jsonData.length; i++)//iterate over all options
            {
              for ( key in jsonData[i] )//get key => value
              { 
             $("#getname").append($("<li></li>").html(jsonData[i][key]), document.all ? i : null);
              }
            }

});

 });
</script>
</head>
<body>
<form name="index">
<div id="getname"></div>
</form>
</body>
</html> 
```

输出是

```
 Humayun
 Sahjahan
 Bayezid
 Bayezid
 Asaduzzaman
 Mouri 
```

我将`TenantFirstName`其作为列表获取。但我喜欢将其作为链接列表获取。因为当我单击一个名称时，它将显示该名称的详细信息。我怎样才能同时工作（作为链接列表，当单击链接时，它将在 mysql 数据库的 html 页面查询中显示详细信息）？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:24:08.640

使用如下表

```
<!DOCTYPE HTML>
<html>
<link rel="stylesheet" href="../jasmine-device_2/styles/main.css" />
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" language="javascript">
$(document).ready(function() { 
    jQuery.getJSON("tenantlistmob.php", function (jsonData) {

           $("#user_spec").html("");//clear old options

            jsonData= eval(jsonData);//get json array

            for (i = 0; i < jsonData.length; i++)//iterate over all options
            {
              for ( key in jsonData[i] )//get key => value
              { 
                    //$("#user_spec").get(0).add(new Option(jsonData[i][key],[key]), document.all ? i : null);
                    //$("#getname tbody").append($("<li></li>").html(jsonData[i][key]), document.all ? i : null);
                    var tblRow = "<tr>" + "<td>" + "<a href='#'>" + jsonData[i][key] + "</a>" + "</td>" + "</tr>"
                    $(tblRow).appendTo("#getname tbody");
              }
            }

  });

 });
 </script></head>
 <body>
 <form name="index">
 <div>
 <table id="getname" border="1">
    <thead>
        <th>Name</th>
    </thead>
  <tbody>

   </tbody>
</table>
</div>
</form>
</body>
</html> 
```

# spring - 检查控制器或服务层中的先决条件

> ID：11929781
> 
> 赞同：19
> 
> 时间：2012-08-13T07:22:09.583
> 
> 标签：spring, validation, service, controller

我正在使用 Google 的 Preconditions 类来验证用户的输入数据。
但我担心使用 Preconditions 类检查用户输入数据的最佳点在哪里。
首先，我在 Controller 中编写了验证检查代码，如下所示：

```
@Controller
...
public void register(ProductInfo data) {
    Preconditions.checkArgument(StringUtils.hasText(data.getName()),
        "Empty name parameter.");
    productService.register(data);
}

@Service
...
public void register(ProductInfo data) {
    productDao.register(data);
} 
```

但我认为`register`服务层中的方法将使用另一个控制器方法，如下所示：

```
@Controller
...
public void register(ProductInfo data) {
    productService.register(data);
}
public void anotherRegister(ProductInfo data) {
    productService.register(data);
}

@Service 
...
public void register(ProductInfo data) {
    Preconditions.checkArgument(StringUtils.hasText(data.getName()),
        "Empty name parameter.");
    productDao.register(data);
} 
```

另一方面，服务层的方法将只在一个控制器中使用。
我很困惑。在控制器或服务中检查先决条件的更好方法是什么？
提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-20T16:20:35.470

理想情况下，您会在两个地方都这样做。但是你混淆了两件不同的事情：

*   验证（带错误处理）
*   防御性编程（又名断言，又名合同设计）。

您绝对应该在控制器中进行**验证**并在您的服务中进行**防御性编程。**这就是为什么。

您需要**验证**表单和 REST 请求，以便可以将合理的错误发送回客户端。这包括哪些字段不好，然后对错误消息进行本地化等...（如果 ProductInfo.name 属性为空，您当前的示例将向我发送带有堆栈跟踪的可怕 500 错误消息）。

Spring 有一个[用于验证](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)控制器中的对象的解决方案。

**防御性编程**是在服务层完成的，但不是**验证**，因为您无权访问语言环境来生成正确的错误消息。有些人这样做，但 Spring 并没有真正帮助你。

在服务层中没有进行验证的另一个原因是 ORM 通常已经通过 JSR Bean 验证规范（休眠）进行了验证，但它不会生成合理的错误消息。

人们所做的一种策略是创建自己的前置条件 utils 库，该库抛出自定义派生`RuntimeException`的 s 而不是 guava（和 commons lang）`IllegalArgumentException`，`IllegalStateException`然后`try`......`catch`控制器中的异常将它们转换为验证错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T07:32:43.717

没有“更好”的方法。如果您认为该服务将被多个控制器（或其他代码段）使用，那么在那里进行检查可能很有意义。如果您的应用程序在无效请求仍在控制器中时检查它们很重要，那么在那里进行检查可能很有意义。正如您所注意到的，这两者并不相互排斥。您可能需要检查两次才能涵盖这两种情况。

另一种可能的解决方案：使用 Bean Validation (JSR-303) 将检查（前提条件）放在 ProductInfo bean 本身上。这样，您只需指定一次检查，任何需要的东西都可以快速验证 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:33:16.120

我认为在您的特殊情况下，您需要在服务层上检查它并在数据完整性错误的情况下向控制器返回异常。

```
@controller
public class MyController{

@ExceptionHandler(MyDataIntegrityExcpetion.class)
public String handleException(MyDataIntegrityExcpetion ex, HttpServletRequest request) {
  //do someting on exception or return some view. 
}

} 
```

它还取决于您在控制器中所做的事情。无论您是返回 View 还是仅使用`@ResponseBody`Annotation。Spring MVC 为输入/数据验证提供了很好的“开箱即用”解决方案，我建议您检查这个库。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T00:25:57.570

前置条件、验证，无论是简单的还是业务的，都应该在过滤器层或拦截器中处理，甚至在到达控制器或服务层之前。

如果您在控制器层检查它的危险，您违反了控制器的单一责任原则，其唯一目的是委托请求和响应。

在服务层设置前置条件，就是将横切关注点引入核心业务。

过滤器或接收器就是为此目的而构建的。将前置条件放在过滤器层或拦截器中还允许您“挑选和匹配”您可以为每个 servlet 请求放置在堆栈中的规则，因此不会将特定规则仅限于一个 servlet 请求或引入重复。

# c - Openmp：增加循环迭代次数

> ID：11929783
> 
> 赞同：1
> 
> 时间：2012-08-13T07:22:13.567
> 
> 标签：c, for-loop, numbers, iteration, openmp

我有这个`parallel for`循环

```
struct p
{
    int n;
    double *l;
}

#pragma omp parallel for default(none) private(i) shared(p)
for (i = 0; i < p.n; ++i)
{
    DoSomething(p, i);
} 
```

现在，由于向 中添加了新元素`DoSomething()`，可能`p.n`会增加inside `p.l`。我想以并行方式处理这些元素。OpenMP 手册指出`parallel for`不能与列表一起使用，因此`DoSomething()`将这些`p.l`新元素添加到另一个列表中，该列表按顺序处理，然后与`p.l`. 我不喜欢这种解决方法。有人知道更清洁的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:09:19.380

OpenMP 3.0 中添加了一个支持动态执行的构造，它就是`task`构造。任务被添加到队列中，然后尽可能并发地执行。示例代码如下所示：

```
#pragma omp parallel private(i)
{
    #pragma omp single
    for (i = 0; i < p.n; ++i)
    {
       #pragma omp task
       DoSomething(p, i);
    }
} 
```

这将产生一个新的并行区域。其中一个线程将执行`for`循环并为每个`i`. 每个不同的`DoSomething()`调用都将转换为一个任务，稍后将在空闲线程中执行。但是有一个问题：如果其中一个任务向 中添加了新值`p.l`，则可能在创建者线程已经退出`for`循环之后发生。这可以使用任务同步结构和像这样的外部循环来解决：

```
#pragma omp single
{
   i = 0;
   while (i < p.n)
   {
      for (; i < p.n; ++i)
      {
         #pragma omp task
         DoSomething(p, i);
      }
      #pragma omp taskwait
      #pragma omp flush
   }
} 
```

该`taskwait`构造使线程等待，直到所有排队的任务都被执行。如果将新元素添加到列表中，则条件`while`将再次变为真，并且将发生新一轮的任务创建。该`flush`构造应该在线程之间同步内存视图，例如使用共享存储中的值更新优化的寄存器变量。

所有现代 C 编译器都支持 OpenMP 3.0，除了 MSVC，它停留在 OpenMP 2.0 上。

# php - 使用 @ 检索 json 数据对象

> ID：11929785
> 
> 赞同：1
> 
> 时间：2012-08-13T07:22:19.280
> 
> 标签：php, json, oop, class, object

如何使用 PHP 返回键名为“@”的值

```
[directory] => stdClass Object
                (
                    [@id] => 87e0cfeb-e7ea-4814-80ac-a98f770811eb
                    [@title] => _root
                    [@hasClips] => 1
                ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:33:59.210

你可以这样做：

```
$your_variable->{"@id"} 
```

# javascript - 配置 dojo 数据网格以使用远程服务器 URL

> ID：11929786
> 
> 赞同：0
> 
> 时间：2012-08-13T07:22:20.610
> 
> 标签：javascript, html, dojo

我无法将 dojo 数据网格配置到远程服务器。我正在关注的教程示例是：

[http://dojotoolkit.org/documentation/tutorials/1.6/populating_datagrid/demo/datagrid-items.html](http://dojotoolkit.org/documentation/tutorials/1.6/populating_datagrid/demo/datagrid-items.html)

我的代码是用单个 jsp 编写的，如下所示：

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Demo: dojox.grid.DataGrid Simple Structure</title>
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/resources/dojo.css">
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css">
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/Grid.css">
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/claroGrid.css">

        <!-- load dojo and provide config via data attribute -->
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js"
                data-dojo-config="isDebug: true,parseOnLoad: true">
        </script>
        <script>
            dojo.require("dojox.grid.DataGrid");
            dojo.require("dojo.data.ItemFileWriteStore");

            var grid, store;
            dojo.ready(function(){
                store = new dojo.data.ItemFileWriteStore({
                    url: "MilestoneAjaxPopulateMsListEditor.json"
                });
                        grid = new dojox.grid.DataGrid({
                            query: { id: "*" },
                            store: store,
                            structure: [
                                { name: "First Name", field: "first", width: "25%" },
                                { name: "Last Name", field: "last", width: "25%" }
                            ]
                        },dojo.byId("grid"));
                        grid.startup();
            });
        </script>
    </head>
    <body class="claro">
    <%@ include file="ui_init.jsp" %>
        <h1>Demo: dojox.grid.DataGrid Simple Structure</h1>

        <br/>
        <div id="grid"></div>
        <%@ include file="footer.jsp" %>
    </body>
</html> 
```

Ajax 请求完成且没有任何错误（获得 200 OK 响应代码）。我从远程服务器获取以下 JSON 并显示在 firebug 中：

```
{"msdetails":[ 
    {"first":"146", "last":"Concept Commit"}
,   {"first":"147", "last":"Execution Commit"}
,   {"first":"148", "last":"EFT Start"}
,   {"first":"149", "last":"Throttle Pull Review"}
,   {"first":"150", "last":"Throttle Pull"}
,   {"first":"151", "last":"PSIRT Verification"}
,   {"first":"152", "last":"Commit Test"}
,   {"first":"153", "last":"FTS Complete"}
,   {"first":"154", "last":"Image List"}
,   {"first":"155", "last":"Upgrade Planner"}
,   {"first":"156", "last":"Market Matrix"}
,   {"first":"157", "last":"Reg Test Cmp"}
,   {"first":"158", "last":"ISSU CM Creation"}
,   {"first":"144", "last":"Build Start Time"}
,   {"first":"159", "last":"ISSU CM Verification"}
,   {"first":"160", "last":"OPUS"}
,   {"first":"161", "last":"Docs Complete"}
,   {"first":"162", "last":"TAC Readiness"}
,   {"first":"145", "last":"CCO FCS"}
,   {"first":"163", "last":"Field CCO FCS"}
,   {"first":"164", "last":"HPC Date"}
,   {"first":"165", "last":"EoLA"}
,   {"first":"166", "last":"EoS"}
,   {"first":"167", "last":"EoL/EoSM"}
,   {"first":"168", "last":"EoVS Date"}
,   {"first":"169", "last":"End of Support"}
 ]} 
```

我得到的错误是：

![Dojo 数据网格错误](../Images/b6f25b832442205d251d737dd96cf335.png)

请提供有关此错误的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:58:15.553

为了使 ItemWriteStore 正常工作，您的 json 数组部分应指定为“items”的键名，并且您的 json 对象需要具有键“id”，如果没有，您还需要指定哪个键将作为 id json 对象

```
{"identifier:"first","items":[ 
    {"first":"146", "last":"Concept Commit"}
,   {"first":"147", "last":"Execution Commit"}
,   {"first":"148", "last":"EFT Start"}
,   {"first":"149", "last":"Throttle Pull Review"}]} 
```

# javascript - 每次使用 Javascript 加载页面时增加数字（变量）的简单方法？

> ID：11929787
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:22:21.540
> 
> 标签：javascript, local-storage

我需要设置一个等于页面加载数或页数的变量。就像是：

```
var x = numberofpageload; 
```

页面加载次数应保存在本地存储中，以防浏览器关闭或刷新。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:25:38.783

```
<script>
function refresher()
{
if(typeof(Storage)!=="undefined")
  {
  if (localStorage.refresh)
    {
    localStorage.refresh=Number(localStorage.refresh)+1;
    }
  else
    {
    localStorage.refresh=1;
    }
  document.getElementById("result").innerHTML="" + localStorage.refresh + " time(s).";
  }
else
  {
  document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
  }
}
</script> 
```

然后在身体负荷上我调用这个函数并且这个变量发生了变化。

# mysql - 多重包含和排除的 MySQL 复杂连接

> ID：11929788
> 
> 赞同：1
> 
> 时间：2012-08-13T07:22:23.850
> 
> 标签：mysql, inner-join

我有一个客户想让我做一个标签系统。我有三个表：`items`、`tags`和`item_tag_assoc`- 最后一个仅用于关联 item_ids 和 tag_ids。这是我遇到的问题：

如果用户请求包含标签 [1, 2, 3] 和排除标签 [4, 5, 6]，则结果应该是在 [1, 2, 3] 中具有**每个**标签（不仅仅是一个）且**没有**标签的所有项目在 [4, 5, 6] 中。如何编写查询来完成此操作？

我进行了足够的研究以找出标签包含的内部连接：

`SELECT i.item_id, i.item_title FROM items AS i INNER JOIN tag_item_assoc AS tia1 ON (tia1.item_id = i.item_id AND tia1.tag_id = 1)`

...并且只需在相同的内部连接模式上链接您想要包含的尽可能多的标签。它可能有点笨重，但用户在继续之前不会选择超过 4 或 5 个标签，所以它会做。

我真的希望我能以同样的方式排除，并将所有内容包装到一个查询中：

`INNER JOIN tag_item_assoc AS tia2 ON (tia2.item_id = i.item_id AND tia2.tag_id!= 2)`

但很快就变得很明显，这是行不通的。我读了几篇文章说`LEFT OUTER JOIN`s 可以让我在包含时排除，但我无法弄清楚，主要是因为杂散`WHERE`子句。`LEFT OUTER JOIN`我尝试的s 和s 的任何排列`INNER JOIN`要么产生错误，要么产生非常混乱的结果。

说了这么多——这里有人知道我怎么能做到这一点吗？我很抱歉没有提供任何有用的代码示例。如果 s 是一个障碍，我可以从头开始`INNER JOIN`- 我只需要一种方法来同时完成多个关联包含和排除。提前感谢您的帮助和专业知识！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:49:56.090

您需要将记录实例的数量与标签的数量相匹配：

```
SELECT a.item_id -- , add other columns here
FROM   items a
          INNER JOIN item_tag_assoc b
             ON a.item_id = b.item_id
WHERE b.tag_id IN (1, 2, 3) AND
      b.tag_id NOT IN (4, 5, 6)
GROUP BY a.item_id
HAVING COUNT(a.item_id) = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:52:06.307

```
SELECT a.*
FROM items a
     INNER JOIN item_tag_assoc b
         ON a.item_id = b.item_id
     INNER JOIN tags c
         ON a.tag_id = c.tag_id
WHERE c.tag_id IN(1) AND
      c.tag_id IN(2) AND
      c.tag_id IN(3) AND
      c.tag_id NOT IN (4) AND
      c.tag_id NOT IN (5) AND
      c.tag_id NOT IN (6) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:20:41.380

找到了答案。而不是像这样添加`INNER JOIN`s ：

`INNER JOIN tag_item_assoc AS tia2 ON (tia2.item_id = i.item_id AND tia2.tag_id!= 2)`

我添加了一个带有单个内部连接的子查询：

`WHERE i.item_id NOT IN ( SELECT i.item_id FROM items AS s INNER JOIN tag_item_assoc AS tia1 ON (tia1.item_id = i.item_id AND tia1.tag_id IN (4, 5, 6)))`

子查询创建一组`item`具有 [4, 5, 6] 中任何标签的所有 s，并`WHERE i.iten_id NOT IN`消除与该组匹配的任何记录。

感谢大家的努力！希望这会帮助别人。

# objective-c - 拖动MKAnnotationView时如何获得连续回调

> ID：11929789
> 
> 赞同：3
> 
> 时间：2012-08-13T07:22:23.413
> 
> 标签：objective-c, ios, mkannotationview, mapkit

我有`MKAnnotationView`哪个是可拖动的，并且我已经实现`didChangeDragState:`了委托方法，我在拖动开始和结束时获得回调，但不是连续的。我想跟踪注释的当前坐标，因为它被拖动，请帮助我一些解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:23:28.487

坐标可以从 annotationview.coordinates 获得：

```
 -(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view   
  didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:
  (MKAnnotationViewDragState)oldState
  {
  CLLocationCoordinate2D currentCoordinates = view.annotation.coordinate;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T02:19:10.877

据我所知，没有 Apple 提供的方法供您执行此操作，但您可以通过 KVO 实现它（h/t to [this answer](https://stackoverflow.com/questions/20918210/callback-when-dragging-annotation/22270868#22270868)）。

您还需要手动确定注解视图的坐标，因为注解的坐标在进入`MKAnnotationViewDragStateEnding`.

完整的解决方案如下所示：

```
// Somewhere in your code before the annotation view gets dragged, subscribe your observer object to changes in the annotation view's frame center
annotationView.addObserver(DELEGATE_OBJECT, forKeyPath: "center", options: NSKeyValueObservingOptions.New, context: nil)

// Then in the observer's code, fill out the KVO callback method
// Your observer will need to conform to the NSKeyValueObserving protocol -- all `NSObject`s already do
override func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>) {
    // Check that we're observing an annotation view. The `where` clause can be omitted if you're only observing changes in its frame, or don't care about extra calls
    if let annotationView = object as? MKAnnotationView where keyPath == "center" {
        // Defined below, `coordinateForAnnotationView` converts a CGPoint measured within a given MKMapView to the geographical coordinate represented in that location
        let newCoordinate = coordinateForAnnotationView(pin, inMapView: self.mapView)

        // Do stuff with `newCoordinate`
    }
}

func coordinateForAnnotationView(annotationView: MKAnnotationView, inMapView mapView: MKMapView) -> CLLocationCoordinate2D {
    // Most `MKAnnotationView`s will have a center offset, including `MKPinAnnotationView`
    let trueCenter = CGPoint(x: annotationView.center.x - annotationView.centerOffset.x,
        y: annotationView.center.y - annotationView.centerOffset.y)

    return mapView.convertPoint(trueCenter, toCoordinateFromView: mapView)
} 
```

# c# - 使用 LINQ 计算与上一项的差异

> ID：11929791
> 
> 赞同：3
> 
> 时间：2012-08-13T07:22:44.807
> 
> 标签：c#, linq

我有一个名为发票列表的列表，其中包含以下项目。

```
ID:1
Total:5
Description:Test
Date:2012-01-01
Difference:

ID:2
Total:10
Description:Test
Date:2012-02-01
Difference:

ID:3
Total:15
Description:Test
Date:2012-03-01
Difference: 

ID:4
Total:20
Description:Test
Date:2012-04-01
Difference: 
```

我需要使用 LINQ 计算每个发票 ID 之间的差异（最好）。最终输出应如下所示：

```
 ID:1
    Total:5
    Description:Test
    Date:2012-01-01
    Difference:0

    ID:2
    Total:10
    Description:Test
    Date:2012-02-01
    Difference:5

    ID:3
    Total:15
    Description:Test
    Date:2012-03-01
    Difference: 5

    ID:4
    Total:20
    Description:Test
    Date:2012-04-01
    Difference:5 
```

有人可以建议实现上述目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T07:40:46.110

我怀疑[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)是你的朋友在这里：

```
var withNull = new Invoice[] { null }.Concat(invoices);

var withDifference = withNull.Zip(withNull.Skip(1),
                                  (x, y) => x == null ? y :
                                      new Invoice { 
                                          ID = y.ID,
                                          Total = y.Total,
                                          Date = y.Date,
                                          Difference = y.Total - x.Total
                                      }
                                  )
                             .ToList(); 
```

我将把它的工作原理（以及为什么你需要 null）作为练习——如果有必要，我可以给出一些提示......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T07:50:41.927

由于源是一个列表，您可以使用索引来引用前一个项目，这可以使用 select 的替代形式来实现，该形式使用基于项目及其索引的 func。

```
var results=invoices.Select((x,i) => new Invoice { 
        Total = x.Total,
        Date = x.Date,
        Description=x.Description,
        Difference = x.Total - (i==0 ? 0 : invoices[i-1].Total)}
        ); 
```

`.ToList()`如果您希望结果作为列表，您可以在最后使用

# testing - rspec/capybara/selenium testing - 下载/访问外部 url 并检查内容类型

> ID：11929792
> 
> 赞同：0
> 
> 时间：2012-08-13T07:22:47.473
> 
> 标签：testing, selenium, rspec, cross-domain, capybara

我知道为了让水豚访问外部 url，驱动程序必须是支持它的驱动程序（例如 selenium）。但是当使用 selenium 时，我不能再通过 page.response_headers 检查内容类型，因为 selenium 驱动程序不支持。是否有任何替代 response_headers，或者我只是在查看错误的工具集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:37:03.807

我使用`capybara-webkit`驱动程序，我可以确认它`page.response_headers`适用于外部站点。

# svn - 如何在颠覆边缘删除存储库？

> ID：11929794
> 
> 赞同：0
> 
> 时间：2012-08-13T07:23:04.387
> 
> 标签：svn, repository, sharpsvn, subversion-edge

似乎 Subversion Edge Restful API 无法（完全）删除存储库 - 只能创建一个。此外，sharpSvn 似乎只适用于存储库级别和更低级别，这意味着也不会删除存储库......那么有没有办法以**编程**方式删除 Subversion Edge 中的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:21:29.317

不，没有选项可以删除仅使用 uberSVN API 的存储库。这是一项管理任务，最好使用命令行工具“rm”来完成。删除存储库与删除文件系统上的文件夹相同。

存储库的创建对我来说总是很奇怪，无论如何我认为它不应该成为普通 uberSVN API 的一部分，因为它也是一个不经常使用的管理级任务。

# javascript - 在验证和提交之前从输入值中删除文字

> ID：11929795
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:23:06.753
> 
> 标签：javascript, jquery, forms, maskedinput

我有一个带有所需电话号码字段的表单，看起来像这样，带有 maskedinput 插件

(999) 999-9999

我希望 jquery 验证忽略文字以验证这一点。另外，我希望在提交表单之前删除文字。但是如果出现验证错误，我仍然希望激活 maskedinput 插件，这样格式对于用户来说仍然是正确的。

我想我可以编辑正则表达式进行验证，但是当提交表单时，文字仍然会在那里。

让我知道我需要更好地解释这一点。

有任何想法吗？我对 jquery 很陌生，所有如此详细的解决方案都会很棒。

我的javascript代码是这个

```
$(document).ready(function(){

    jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
    phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
    }, "US Phone Number Required");

    $("#valform").validate({
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();

        if (errors) {
            $("#error-message").show().text("Please correct the required field(s)");
        } else {
            $("#error-message").hide();
        }
    },
    messages: {
        phone: {
            required: ""
        }
    },
    rules: {
        phone: {
            required: true,
            phoneUS: true
        },

        },
     });

    $("#phone").mask("(999) 999-9999",{placeholder:"  "});

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:30:22.237

您可以在使用 js 提交表单之前删除其他字符

此代码将在输入后立即从输入中删除禁止字符。

输入字段具有“数字”类。这会将“keyup”事件绑定到该输入字段并调用一个名为“handleInputKeyUp”的函数

```
 $(".numbers").bind("keyup", handleInputKeyUp); 
```

功能：

```
function handleInputKeyUp(e){    

    var temp = e.currentTarget.value;
                temp = temp.replace(/[^\d-]/g, "");
                e.currentTarget.value = temp;
    } 
```

此代码从输入字段中删除除数字和 - 之外的所有内容。

# css - JQuery Mobile + Knockout，CSS 样式失败

> ID：11929800
> 
> 赞同：1
> 
> 时间：2012-08-13T07:23:12.717
> 
> 标签：css, jquery-mobile, knockout.js

我正在使用 html5、JQuery Mobile 和 KnockoutJS，我有一个 foreach 模板，它可以从可观察的数组中呈现类似于 GUI 的网格。

但是，当我将项目添加到绑定数组时，样式不会应用于任何新项目。大多数时候，它们看起来没有样式。有时它们以样式出现，但是一旦样式失败，只要我运行我的应用程序，它就会一直损坏。

有谁知道如何解决这个问题？

片段：

```
<div id="timeEntryList" data-bind="foreach: timeEntries">
    <div data-role="header" data-theme="c">
        <h1>some header</h1> 
```

奇怪的是它*有时会*起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:03:43.083

jQM 可能不支持多个`data-role="header"`部分。我会尝试使用一个页眉、一个内容和一个页脚部分来符合他们的[标准页面布局，看看是否有帮助。](http://jquerymobile.com/test/docs/pages/page-anatomy.html)

我发现如果我更新我的 KO observables`pagebeforeshow`我不必使用`.listview('refresh')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:04:55.637

没有任何代码很难猜到。但我猜你是说动态添加元素后 jqm 无法正确呈现。没错，它没有。我想这就像清单一样。你可能可以做类似的事情，`$('#mylist').listview('refresh');`但我不知道你在说什么类型的组件。

您可以在文档中找到[更多信息](http://jquerymobile.com/demos/1.1.1/docs/lists/docs-lists.html)

# c# - 无法添加 ServiceReference

> ID：11929803
> 
> 赞同：0
> 
> 时间：2012-08-13T07:23:27.940
> 
> 标签：c#, visual-studio-2010, wcf

元数据包含无法解析的引用

据我了解，WSDL 地址位于远程服务器上，但它以“localhost”的形式链接到 XSD 内部，而我的 VisualStudio 无法解析它。如果我下载 wsdl 并将“localhost”更改为远程地址 - 它工作正常，但 xsds 在 localhost 内部有另一个链接。

而且我认为下载整个服务不是正确的方法:)

我能做些什么？

**补充**：SoapUI 无法加载此服务以太：*“加载时出错 [http://localhost:7733/ESchoolService?wsdl=wsdl0]: java.io.IOException: Attempted read from closed stream”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T12:30:20.480

这很容易修复，只需更改服务配置文件中的基地址 url。我了解到您无权访问源代码，但您可以访问配置文件吗？如果这样做，只需找到 baseAddress 元素，然后将 localhost 替换为服务器名称（或已知的 DNS）。这是一个例子：

```
 <host>
      <baseAddresses>
        <add baseAddress="http://MyServerName:7733/ESchoolService" />
      </baseAddresses>
    </host> 
```

我希望它有所帮助。

干杯，

抢。

# c#-4.0 - C#使用提取的注释块获取行号

> ID：11929811
> 
> 赞同：0
> 
> 时间：2012-08-13T07:24:07.030
> 
> 标签：c#-4.0

我想用下面的代码从源代码中提取带有注释行的行号

```
foreach (Match match in re.Matches(FileText))
{
    StackFrame CallStack = new StackFrame(0, true);
    sb.Append(match.ToString() + CallStack.GetFileLineNumber() + System.Environment.NewLine);
}
return sb.ToString(); 
```

如何使用行号捕获每个评论，例如 /* 测试评论 */ 行：50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:59:12.293

程序集中没有“文档”。文档以 XML 文件的形式生成，应与程序集一起分发。从调用堆栈中，您可以获得类和方法的名称。如果您知道 XML 文件的位置，那么您可以例如参考[http://jimblackler.net/blog/?p=49](http://jimblackler.net/blog/?p=49)，他们按照大多数方法阅读文档。

然而，这不是 .Net 做这些事情的方式。为了获得额外的编译时注释，这些注释将在编译过程中继续存在并且将在运行时出现，.Net 允许您引入[可](http://msdn.microsoft.com/en-us/library/sw480ze8%28v=vs.80%29.aspx)应用于方法、类、字段、属性、枚举（....） . 查看该链接，查看“作者”属性的示例，并考虑将魔术注释更改为属性。这是在整个 .Net 中执行此操作的正常方式，而不仅仅是 C#。

从调用堆栈中读取 MethodInfo 后，您可以`GetCustomAttributes`对其进行调用，并读取您在其中写入的数据，请参阅[http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)

# android - 更改android中编辑文本的样式

> ID：11929817
> 
> 赞同：4
> 
> 时间：2012-08-13T07:24:58.760
> 
> 标签：android, android-layout

我创建了使用主题 Theme.holo.light 的应用程序。现在我想将编辑文本的外观更改为 Theme.Dark 中的外观。我怎么能做到这一点。我在styles.xml中添加了这样的东西：

```
<style name="EditText.Style" parent="@android:style/Theme">
    <item name="android:editTextStyle">@android:style/Widget.EditText</item>

</style> 
```

并在带有该edittext的xml中使用，但不起作用。如何更改编辑文本的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:15:58.730

检查以下文章： [http ://www.androidengineer.com/2010/06/using-themes-in-android-applications.html](http://www.androidengineer.com/2010/06/using-themes-in-android-applications.html)

我发现它对我来说非常有用和实用。它将回答您关于主题风格的所有问题

# php - 使输出缓冲区工作

> ID：11929819
> 
> 赞同：-2
> 
> 时间：2012-08-13T07:25:08.950
> 
> 标签：php, output-buffering

我有以下疯狂的片段作为 ob_start 功能的测试场。

```
ob_start();
for ($i = 1; $i <= 100000000; $i++) {       
    echo '<li>',$i, ' ',date("H:i:s");
    ob_flush();
} 
```

我等了几分钟才能在屏幕上看到一些东西。几分钟后，我查看了一个空白页面，其中显示状态消息“等待 www.myserver.com”，浏览器标题上显示“正在加载...”消息。

ob_flush 不是完全防止这种行为吗？

你对上面的代码片段做了什么，这样当你运行它时，你会在浏览器上得到一个即时的文本流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:18:10.283

添加行

```
flush(); 
```

紧接着

```
 ob_flush(); 
```

成功了。浏览器会立即显示输入，并且您会收到流式文本，直到转储到浏览器或脚本上的整个内容超时。

不要尝试这个片段，因为它会浪费很多带宽。

有谁知道为什么在 ob_flush 之后添加 flush() 使它发生？

注意，只有没有 ob_flush() 的 flush() 或没有 flush() 的 ob_flush() 不起作用。

# django - 在 Django Admin 的搜索字段中显示函数的名称

> ID：11929829
> 
> 赞同：1
> 
> 时间：2012-08-13T07:25:57.013
> 
> 标签：django, django-admin

我想在 Django 管理界面的搜索字段中显示函数名称，但是当我这样做时

模型.py：

```
class Adult(models.Model):    
    user = models.OneToOneField(User)
    firstname = models.CharField(max_length=100,
                                blank=True)
    lastname = models.CharField(max_length=100,
                                blank=True)
    def __unicode__(self):
        return self.user.username
    def Parent_Name(self):
      try:
        return '%s %s' % (adult.firstname,adult.lastname)
      except Exception:
        return ''
    getParentName.shot_description = 'adult' 
```

管理员.py：

```
class AdultAdmin(admin.ModelAdmin):
    list_display = ('Parent_Name', 'Student_Name',)
    search_fields = ['Parent_Name',]

admin.site.register(Adult, AdultAdmin) 
```

错误：无法将关键字“Parent_Name”解析为字段。

编写此函数的正确方法应该是什么，以便函数名称可用于 search_fields？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-04T16:53:33.717

万一其他人像我一样偶然发现了这个答案，则接受的答案不再准确。您可以覆盖该`get_search_results`功能以根据需要进行搜索。

[在此处查看有关此功能的 Django 文档。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_search_results)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:53:26.897

[`search_fields`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields)应该是：

> ... 设置为每当有人在该文本框中提交搜索查询时将搜索的字段名称列表。

您不能指定自己的搜索功能，因为它只接受指示要搜索的字段的字符串列表（与`list_display`您提到的接受功能的选项*不同*- 允许您以编程方式返回列表项的值） .

[您可以在github](https://github.com/django/django/blob/master/django/contrib/admin/views/main.py#L349)上查看此处处理的相应代码`search_fields`（及其限制）。你能做的最好的就是遵循关系。

# c# - 将字符串转换为 byte[] 用于套接字

> ID：11929831
> 
> 赞同：-4
> 
> 时间：2012-08-13T07:26:01.773
> 
> 标签：c#, string, sockets, ftp, byte

我正在用 c# 编写一个简单的 ftp 客户端。
我不是 c# 的专业人士。有没有办法将字符串转换为 byte[] 并将其写入套接字？
例如，为了介绍用户名，这是套接字内容：

```
5553455220736f726f7573680d0a 
```

和 ASCII 等效的是：

```
USER soroush 
```

我想要一种转换字符串的方法。像这样的东西：

```
public byte[] getByte(string str)
{
    byte[] ret;
    //some code here
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:28:06.233

尝试

`byte[] array = Encoding.ASCII.GetBytes(input);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T07:27:07.293

```
// C# to convert a string to a byte array.
public static byte[] StrToByteArray(string str)
{
    Encoding encoding = Encoding.UTF8; //or below line
    //System.Text.UTF8Encoding  encoding=new System.Text.UTF8Encoding();
    return encoding.GetBytes(str);
} 
```

和

```
// C# to convert a byte array to a string.
byte [] dBytes = ...
string str;
Encoding enc = Encoding.UTF8; //or below line 
//System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
str = enc.GetString(dBytes); 
```

# python - python中的字符串比较

> ID：11929832
> 
> 赞同：3
> 
> 时间：2012-08-13T07:26:03.720
> 
> 标签：python

我有一个字符串数组，比如

```
urls_parts=['week', 'weeklytop', 'week/day'] 
```

而且我需要监视在我的 url 中包含这个字符串，所以这个例子只需要由 weektop 部分触发：

```
url='www.mysite.com/weeklytop/2'
for part in urls_parts:
    if part in url:
       print part 
```

但它当然也是由“周”触发的。什么是正确的方法？

OOps，让我稍微说明一下我的问题。我需要在 url='www.mysite.com/week/day/2' 和 part='week' 时不触发该代码唯一需要触发的 url 是当 part='week' 和 url='www .mysite.com/week/2' 或 'www.mysite.com/week/2-second' 例如

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:35:17.780

我就是这样做的。

```
import re
urls_parts=['week', 'weeklytop', 'week/day']
urls_parts = sorted(urls_parts, key=lambda x: len(x), reverse=True)
rexes = [re.compile(r'{part}\b'.format(part=part)) for part in urls_parts]

urls = ['www.mysite.com/weeklytop/2', 'www.mysite.com/week/day/2', 'www.mysite.com/week/4']
for url in urls:
    for i, rex in enumerate(rexes):
        if rex.search(url):
            print url
            print urls_parts[i]
            print
            break 
```

**输出**

```
www.mysite.com/weeklytop/2
weeklytop

www.mysite.com/week/day/2
week/day

www.mysite.com/week/4
week 
```

按长度排序的建议来自@Roman

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:34:10.570

`len`在第一次匹配时`break`按循环排序您的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T07:33:22.780

尝试这样的事情：

```
>>> print(re.findall('\\weeklytop\\b', 'www.mysite.com/weeklytop/2'))
['weeklytop']
>>> print(re.findall('\\week\\b', 'www.mysite.com/weeklytop/2'))
[] 
```

程序：

```
>>> urls_parts=['week', 'weeklytop', 'week/day']
>>> url='www.mysite.com/weeklytop/2'
>>> for parts in urls_parts:
    if re.findall('\\'+parts +r'\b', url):
        print (parts) 
```

输出：

```
weeklytop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:19:14.780

为什么不使用这样的 urls_parts 呢？

```
 ['/week/', '/weeklytop/', '/week/day/'] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T07:38:24.410

对您的代码稍作改动即可解决此问题 -

```
>>> for part in urls_parts:
        if part in url.split('/'):              #splitting the url string with '/' as delimiter
            print part

    weeklytop 
```

# jquery - CSS/jQuery: 灰色的 jQuery 循环彩色图像幻灯片

> ID：11929837
> 
> 赞同：0
> 
> 时间：2012-08-13T07:26:20.820
> 
> 标签：jquery, css, html, canvas

我有很多幻灯片，每个都显示一个项目。我想让所有未选择的幻灯片变成灰色（不仅仅是淡化它们的不透明度或在它们上面放一层乳白色的覆盖物，我可以这样做），以使当前选择的幻灯片在视觉上脱颖而出。它应该适用于当前的 webkit 浏览器和 IE8 以上。我尝试使用画布将它们变灰，但它破坏了我网站上的幻灯片和其他内容。是否有另一种方法通过 CSS 和 jQuery 使图像/幻灯片变灰？

要是这`-webkit-filter: grayscale(100%);`能在 Safari、Chrome、Firefox 和 IE>=8 中工作就好了……

```
<script type="text/javascript">
$(window).load(function(){

    $('.item img').each(function(){
        var el = $(this);
        el.css({"position":"absolute"}).wrap("<div class='img_wrapper' style='display: inline-block'>").clone().addClass('img_grayscale').css({"position":"absolute","z-index":"998","opacity":"0"}).insertBefore(el).queue(function(){
            var el = $(this);
            el.parent().css({"width":this.width,"height":this.height});
            el.dequeue();
        });
        this.src = grayscale(this.src);
    });

    $('.item img').mouseover(function(){
        $(this).parent().find('img:first').stop().animate({opacity:1}, 1000);
    })
    $('.img_grayscale').mouseout(function(){
        $(this).stop().animate({opacity:0}, 1000);
    });     
});

function grayscale(src){
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    var imgObj = new Image();
    imgObj.src = src;
    canvas.width = imgObj.width;
    canvas.height = imgObj.height; 
    ctx.drawImage(imgObj, 0, 0); 
    var imgPixels = ctx.getImageData(0, 0, canvas.width, canvas.height);
    for(var y = 0; y < imgPixels.height; y++){
        for(var x = 0; x < imgPixels.width; x++){
            var i = (y * 4) * imgPixels.width + x * 4;
            var avg = (imgPixels.data[i] + imgPixels.data[i + 1] + imgPixels.data[i + 2]) / 3;
            imgPixels.data[i] = avg; 
            imgPixels.data[i + 1] = avg; 
            imgPixels.data[i + 2] = avg;
        }
    }
ctx.putImageData(imgPixels, 0, 0, 0, 0, imgPixels.width, imgPixels.height);
return canvas.toDataURL();
}    
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:11:21.647

据我所知，CSS`filters`只在 webkit 浏览器中实现，所以如果你需要浏览器之间的兼容性，你必须坚持使用`canvas`. 这是一个完成这项工作的小型图书馆：

[http://cdn.ultranoir.com/js/lib/imagetogreyscale/ImageToGreyscale.js](http://cdn.ultranoir.com/js/lib/imagetogreyscale/ImageToGreyscale.js)

和原来的：

[http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html](http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html)

# xml - XSLT - 将家庭组合在一起

> ID：11929840
> 
> 赞同：0
> 
> 时间：2012-08-13T07:26:43.990
> 
> 标签：xml, xslt

我正在使用 XSLT 1.0，并且正在寻找将相关人员的 xml 文档划分为家庭。家庭是一个父母及其子女的定义。

所以这：

```
<person name =”A”&gt;
   <person name =”B”&gt;
      <person name =”D” />
      <person name =”E” />
   </person>
   <person name=”C”&gt;
      <person name =”F” />
      <person name =”G” />
      <person name =”H” />
   </person>
</person> 
```

将导致：

```
<family id =”1”&gt;
   <person name =”A”&gt;
      <person name =”B”/>
      <person name=”C”/>
   </person>
</family>

<family id =”2”&gt;
   <person name =”B”&gt;
      <person name =”D” />
      <person name =”E” />
   </person>
</family>

<family id =”3”&gt;
   <person name=”C”&gt;
      <person name =”F”/>
      <person name =”G”/>
      <person name =”H”/>
   </person>
</family> 
```

我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:03:00.287

一种方法是首先查找所有将其他**人**元素作为子元素的**人元素**

```
<xsl:apply-templates select="//person[person]"/> 
```

然后，对于每个这样的**person**元素，您将复制该元素及其直接子元素

```
 <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates select="person" mode="child"/>
 </xsl:copy> 
```

此外，要获取家庭 id，您可以计算所有前面的**person**元素和祖先

```
<family id="{count(preceding::person[person]) + count(ancestor-or-self::person)}"> 
```

“子”模板只会复制**人**及其属性，但不会复制子项。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
       <families>
          <xsl:apply-templates select="//person[person]"/>
       </families>
   </xsl:template>

   <xsl:template match="person[person]">
      <family id="{count(preceding::person[person]) + count(ancestor-or-self::person)}">
         <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates select="person" mode="child"/>
         </xsl:copy>
      </family>
   </xsl:template>

   <xsl:template match="person" mode="child">
      <xsl:copy>
         <xsl:copy-of select="@*"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<families>
   <family id="1">
      <person name="A">
         <person>B</person>
         <person>C</person>
      </person>
   </family>
   <family id="2">
      <person name="B">
         <person>D</person>
         <person>E</person>
      </person>
   </family>
   <family id="3">
      <person name="C">
         <person>F</person>
         <person>G</person>
         <person>H</person>
      </person>
   </family>
</families> 
```

# jquery - 如何在div的中间垂直对齐多个图像

> ID：11929841
> 
> 赞同：2
> 
> 时间：2012-08-13T07:26:46.730
> 
> 标签：jquery, css, banner, sliders

我正在使用 jQuery.carouFredSel 显示横幅，到目前为止它工作正常，除了一个问题我有可变高度的横幅，如果横幅小于其他横幅，则此滑块中的横幅始终位于顶部，然后我需要将其对齐在中间中间。我怎样才能做到这一点

我在小提琴[http://jsfiddle.net/kzhfe/12/上设置了一个示例](http://jsfiddle.net/kzhfe/12/)

carouFred选择[链接](http://caroufredsel.frebsite.nl/)

我将不胜感激这方面的帮助。我尝试了几件事，但没有一个有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:29:26.147

我在您的示例代码中添加代码

结果如下：http: [//jsfiddle.net/sechou/kzhfe/16/](http://jsfiddle.net/sechou/kzhfe/16/)

```
var h = $("#BannerSlider").height();
        $.map($("#BannerSlider img"), function(e){
            var top =( h- $(e).height())/2;
            $(e).css("margin-top",top);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:40:16.877

这里不需要JS，直接改成`display: block; float: left;`：`display: inline-block; vertical-align: middle`http: [//jsfiddle.net/kzhfe/17/](http://jsfiddle.net/kzhfe/17/)

# android - 从android上的jar加载类

> ID：11929850
> 
> 赞同：0
> 
> 时间：2012-08-13T07:27:14.630
> 
> 标签：android, jar

我真的很努力，但总是得到一个 Class Not Found 异常，从阅读这个答案 [https://stackoverflow.com/a/3024261](https://stackoverflow.com/a/3024261)

我带着我的罐子跑了

dx --dex --output=C:\classes.dex C:\MyAndroidLib.jar

并得到了一个dex文件

然后我运行

apt add C:\MyLib.jar C:\classes.dex

用 dex 文件创建一个 jar。

然后我写了下面的代码。

```
DexClassLoader classLoader = new DexClassLoader(
            destPath, dirPath +"/" , null, getClass().getClassLoader());
    Class<?> classToLoad = classLoader.loadClass("ClassImpl"); 
```

在调试时，我可以看到 dex 在 classLoader 内（在 mDexs 成员下），而 ClassImpl 是我进入的唯一类。

但我不断收到类未找到异常。

有人从外部 jar 中获得了动态类加载的工作示例吗？有人知道我的问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-03T19:50:30.333

我没有使用 aapt... 只有 dex。我加载了我的类，并调用了我的方法。

使用此代码查看 dex 文件内部：

```
DexFile dexfile = DexFile.loadDex(url_jar_path, 
        File.createTempFile("opt", "dex", context.getCacheDir()).getPath(), 0);

// Print all classes in the DexFile

Enumeration<String> classNames = dexfile.entries();

String classname = "";

while (true) {
    if (! classNames.hasMoreElements()) {
        break;
    }
    classname = classNames.nextElement();
} 
```

使用此代码查看类内部：

```
Class class = dexclassloader.loadClass(ruta_clase_en_jar);

String name;

Method[] method_array = clase.getMethods();

for (Method i: method_array) {
    name = i.getName ();
} 
```

# c# - 将内容从 .jrn 文件复制到 .text 并每 1 小时删除一次内容的指南

> ID：11929851
> 
> 赞同：-4
> 
> 时间：2012-08-13T07:27:20.210
> 
> 标签：c#

我需要开发一个应用程序来复制 .jrn 文件的内容，一旦它在 ATM 中生成。生成的文件名（.jrn）将根据日期保存，我想要的是，我的应用程序应该复制.jrn 文件的内容到一个文本文件让我们说“xy.txt”，所有这些内容应该每隔一小时删除一次。我计划在 .NET 平台上开发这个。谁能建议我怎么做或其中涉及的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:39:12.343

在你的情况下，我会做一些研究如下：

1）您说您的应用程序需要每 1 小时将 .jrn 文件的内容复制到 .txt 文件。这意味着您需要将应用程序作为“后台进程”运行。您将需要类似**Timer**的东西，请参阅[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

2) 为了将 .jrn 的内容复制到 .txt，您需要流和序列化之类的东西。您将需要*读取*.jrn 文件的内容，如果您只需要一种类型的信息，请进行一些*解析*，然后将您提取的内容*序列化到新的 .txt 文件中。*

希望能有所帮助。

# amazon - 亚马逊简单支付

> ID：11929857
> 
> 赞同：1
> 
> 时间：2012-08-13T07:27:40.103
> 
> 标签：amazon, payment-processing

我正在尝试在我的网站上实施 Amazon Simple Pay 服务，对此我有一个大问题。是否可以同时销售多种商品？我想要的是当用户被重定向到亚马逊支付页面时，他将能够看到他的整个购买清单。

塔玛拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T05:22:18.890

这是旧的，我相信你有答案，但无论如何我都会回答。

是的。你可以卖几个项目。您可以通过以下几种方式做到这一点：在网站上制作多个按钮，或以编程方式制作按钮。

不过，他们的文档很烂。

# asp.net-mvc - MVC 4 Web Api 路由不起作用

> ID：11929860
> 
> 赞同：0
> 
> 时间：2012-08-13T07:28:01.130
> 
> 标签：asp.net-mvc, razor, url-routing, asp.net-web-api

在我的 mvc4 项目中，我在 Global.asax 中定义了以下路由：

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

             routes.MapHttpRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

我的观点（主页/索引）如下所示：

```
 <script type="text/javascript">

                    function find() {
                    var id = $('#prodId').val();
                       $.getJSON("api/Products/"+id,
                        function (data) {
                            alert(data.Name);
                         })
                    .fail(
                        function (jqXHR, textStatus, err) {
                            alert('error');
                        });
                    }    
    </javascript>

    <body>
             <div> 
                <label for="prodId">ID:</label> 
                <input type="text" id="prodId" size="5"/> 
                <input type="button" value="Search" onclick="findAll();" /> 
                <p id="product" /> 
            </div> 
    </body> 
```

当我使用它时它工作正常：`http://localhost:1868/`
但当我尝试它时不是：`http://localhost:1868/Home/Index`

有什么我做错了吗？还是遗漏了什么？

任何可观的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T07:40:51.213

那是因为您使用`api/Products/`的是 url，而它需要是`/api/Products`. 如果没有前导`/`字符，浏览器会假定路径是相对于当前路径的（例如`/Home/Index/api/Products`），这就是它从 . 开始工作的原因`http://localhost:1868/`。该`/`字符告诉浏览器进行相对于主机的调用，而不是当前路径。

# actionscript-3 - 移动到第二帧时，MovieClip 的子项变为空

> ID：11929862
> 
> 赞同：0
> 
> 时间：2012-08-13T07:28:18.977
> 
> 标签：actionscript-3, flash-cs5, preloader

我在单帧上制作了一个游戏，现在我将它移到了第 2 帧，以便在第 1 帧添加一个预加载器。

但是我遇到了一个奇怪的问题：所有顶级 MovieClips 仍然被初始化，但他们的孩子似乎没有被初始化。

例如，我有这个对象 winDialog，其中有一个名为 nextLevelButtonInst 的子对象。所以我有这行：

```
winDialog.nextLevelButtonInst.addEventListener(MouseEvent.CLICK, GotoNextLevel); 
```

当游戏只有一帧时，这可以正常工作，但是对于第二帧，它就不起作用了。

当我查看调试变量时，winDialog 记录正常，并且它有一个子 nextLevelButonInst，但设置为 null。几乎所有的movieclips都是一样的。

为什么移动到第二帧会导致这种情况？如果 winDialog 为空，这将是有意义的，因为它可能在第一帧上找不到它。但我不知道为什么只有孩子会是空的。

这会导致各种问题，它找不到声音等。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:46:14.403

你在使用主类吗？或者只是在你的第一帧中有代码，无论如何，在你进入第二帧之前，这段代码不会知道你在第二帧中存在的东西。

所以在你进入第二帧之后添加监听器，一切都应该没问题。

# java - Java with JACOB - 如何正确设置 Java 库路径

> ID：11929864
> 
> 赞同：1
> 
> 时间：2012-08-13T07:28:23.563
> 
> 标签：java, jacob

我对图书馆路径和雅各布的问题提出了挑战。好的，让我们开始吧。

我正在编写一个需要使用 jacob 库等的应用程序——这个应用程序必须作为 JAR 文件运行，这就是整个目标。我正在使用 System.load() 方法加载库 - 工作正常。在代码中，我声明了一个将 jacob.dll 文件提取到外部文件夹的方法，之后我需要将此路径添加到 java 库路径中，通过以下方式完成：

```
System.setProperty("java.library.path", path); 
```

但是当我运行我的 JAR 时，我得到了一个不满意的链接错误。所以我的问题是，如何添加提取dll文件的路径？

PS 当我在项目属性中添加路径时 - 本机库一切正常，但问题是无法在本机库中设置 java temp。

有谁知道我该怎么处理这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:38:52.287

看到这个：

*   [是 -Djava.library.path=... 等价于 System.setProperty("java.library.path", ...)](https://stackoverflow.com/questions/5419039/is-djava-library-path-equivalent-to-system-setpropertyjava-library-path)

你可以试试：

*   [http://fahdshariff.blogspot.fr/2011/08/changeing-java-library-path-at-runtime.html?m=1](http://fahdshariff.blogspot.fr/2011/08/changing-java-library-path-at-runtime.html?m=1)

或者：

*   [http://nicklothian.com/blog/2008/11/19/modify-javalibrarypath-at-runtime/](http://nicklothian.com/blog/2008/11/19/modify-javalibrarypath-at-runtime/)

问候

# vsto - 开发兼容多个版本的outlook插件

> ID：11929865
> 
> 赞同：0
> 
> 时间：2012-08-13T07:28:28.387
> 
> 标签：vsto, outlook-addin

我在outlook 2010下创建了一个VSTO的outlook插件，但是部署到outlook 2007下好像不行。解决问题的低效方法是在outlook 2007下重新编译。有没有更好的办法它适用于两个版本？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:54:40.913

您只需按照[本文创建一个 VSTO Outlook 加载项](http://blogs.msdn.com/b/vsto/archive/2010/06/04/creating-an-add-in-for-office-2007-and-office-2010-that-quot-lights-up-quot-on-office-2010-mclean-schofield.aspx)

基本上，Visual Studio 2010 中的新嵌入式互操作类型功能可帮助加载项在运行时解析 PIA。唯一的问题是您需要使用小分母 (2007) 进行编码，或者检查代码中的 Outlook 版本并启用 2010 所需的功能。

替代方案：您可以考虑使用第三方工具 (www.add-in-express.com)，该工具允许创建与版本无关的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:43:16.967

我也有同样的问题。我所做的是在插件（启动功能）开始时测试outlook的版本是否为14（2010）。但我必须安装 Office 2007 并在 Outlook 2007 项目中再次编译才能看到结果。该程序正常运行，但我仍然有一些错误。

# c# - 部署 Windows 8 应用程序

> ID：11929870
> 
> 赞同：5
> 
> 时间：2012-08-13T07:29:09.977
> 
> 标签：c#, windows-8, local-storage

当我在Visual Studio 2012 RC 中编译我的应用程序时，我可以看到`bin\`项目源文件夹中按预期生成了一个文件夹，其中有一个foo.exe，看起来像应用程序的入口。当我开始调试应用程序时，它的图标显示在开始屏幕上，我可以在

> C:\Users\someone\AppData\Local\Packages\xxxxx_xxxxxx

但是我在这个文件夹中找不到 foo.exe，即使我搜索了整个磁盘。似乎 win8 应用程序具有与旧 Windows 程序不同的安装/部署机制。我的问题是：

(1) 如何/在哪里部署/安装 win8 应用程序？

（2）我想`\AppData\Local\Packages\xxxxx_xxxxxx\LocalState`用作本地数据文件夹（相当于`ApplicationData.Current.LocalFolder`代码中的），但是当右键单击开始屏幕图标并按“卸载”时，整个文件夹被删除，没有任何警告。有更好的地方存储本地数据吗？或者我需要 SQLite？例如，我的应用程序将所有崩溃消息写入`error.txt`，显然这种情况下我不能使用 sqlite ，如果我放入`error.txt`LocalState 文件夹，用户可能已经卸载了该应用程序，然后我去找他看看里面有什么`error.txt`。另一种情况是：用户想要卸载应用程序，但保留他的本地数据（文件）。显然 ApplicationData.Current.LocalFolder 不是一个好的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:02:01.993

1) Windows 8 软件包部署到 c:\Program Files\windowsapps\，但默认情况下您没有该文件夹的所有权，因此无法访问它。不过，这在很大程度上无关紧要。根据设计，您永远不应访问此文件夹。

2) 同样，在卸载时删除应用程序的本地数据文件夹是预期行为。否则，如果您通过商店部署了一个应用程序并且它开始出现异常并占用了您所有可用的存储空间，那么用户将没有简单的方法来删除该数据。但是，您关于没有警告的断言是不正确的。卸载弹出窗口清楚地显示“此应用程序及其相关信息将从这台 PC 中删除”

在某些情况下，将数据存储在漫游文件夹中可能是一种选择，但此文件夹不打算存储大量数据 - 它用于保存应用程序设置/配置选项以在设备之间漫游。您可能会在开发期间将您的崩溃日志放在那里（如果它足够小），但不能保证它会在应用程序被卸载之前同步到云端。您最好的选择可能是使用 Live SDK 将数据同步到云端，但同样，您无法保证数据会立即写入云端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:32:49.397

您应该使用隔离存储将数据持久保存到 Windows 8 Metro 应用程序的文件系统中。您可以使用以下方法找到该位置：

Windows.Storage.ApplicationData.Current.LocalFolder.Path；

随着每个平台的架构发生变化，您将永远无法确定您的数据将存储在哪里，但这个常数将确保它适用于所有应用程序。在安装和升级应用程序时，此文件夹也保持“安全”，因此您不应丢失使用它的数据。

可以在此页面底部找到使用 SQLLite-net 的示例：http: [//timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

# android - 在视频视图中播放 youtube 视频

> ID：11929871
> 
> 赞同：2
> 
> 时间：2012-08-13T07:29:13.130
> 
> 标签：android, video, youtube, video-streaming

在我的应用程序中，我有一个视频视图，我想在其中播放 youtube 视频。为此，我尝试了很多方法，例如

```
VideoView mVideoView = new VideoView(this);
setContentView(mVideoView);
mVideoView.setVideoURI(Uri.parse("rtsp://v3.cache7.c.youtube.com/CiILENy73wIaGQlOCTh0GvUeYRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"));
mVideoView.start(); 
```

为此我得到

```
08-13 12:33:07.443: D/MediaPlayer(618): Couldn't open file on client side, trying server side
08-13 12:33:09.003: E/MediaPlayer(618): error (1, -2147483648)
08-13 12:33:09.003: E/MediaPlayer(618): Error (1,-2147483648) 
```

然后我尝试了

```
VideoView mVideoView = new VideoView(this);
setContentView(mVideoView);
mVideoView.setVideoURI(Uri.parse("vnd.youtube:GDD0Brw-udk"));
mVideoView.start(); 
```

在这里，我也遇到了同样的错误。

和

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=GDD0Brw-udk&feature=youtube_gdata_player"))); 
```

这离开了我的应用程序，并启动了我无法控制的移动 youtube。

我使用的另一种方法是

```
Intent lVideoIntent = new Intent(null, Uri.parse("http://www.youtube.com/get_video_info?&video_id=GDD0Brw-udk")
            , this, IntroVideoActivity.class);
startActivity(lVideoIntent); 
```

这也不适合我..

我该怎么办..请任何人帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:43:28.237

你的代码：

```
VideoView mVideoView = new VideoView(this);
setContentView(mVideoView);
mVideoView.setVideoURI(Uri.parse("rtsp://v3.cache7.c.youtube.com/CiILENy73wIaGQlOCTh0GvUeYRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"));
mVideoView.start(); 
```

很好，对我来说只要检查你的网址就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:58:20.240

如果需要，可以将其放入 webview 。这就是我让它工作的方式：

```
 webview = (WebView) v.findViewById(R.id.videoview);  
                    String videoPoP = "http://www.youtube.com/v/A6kCkkLo6Rw?";
        webview.setHorizontalScrollBarEnabled(false);
        webview.setVerticalScrollBarEnabled(false);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setPluginState(PluginState.ON);

            String widthAndHeight = "width=\"" + widthdp + "\"  height=\"" + heightdp + "\"";           

         temp = "<object "
                + widthAndHeight
                + ">"
                + "<body style='margin:0;padding:0;'>"
                + "<param name='allowFullScreen' value='false'>"
                + "</param><param name='allowscriptaccess' value='always'>"
                + "</param><embed src='"
                + videoPoP
                + "'"
                + " type='application/x-shockwave-flash'  allowscriptaccess='always' allowfullscreen='true'"
                + widthAndHeight + "></embed></object>";

        webview.loadData(temp, "text/html", "utf-8"); 
```

将参数传递给 widthdp 和 heightdp 变量内的宽度和高度（静态或动态），并将其放入 WebViewClient 中，它应该可以正常工作

# android - 如何优化、改进我的 Android 应用程序？

> ID：11929874
> 
> 赞同：0
> 
> 时间：2012-08-13T07:29:36.890
> 
> 标签：android, json, optimization, loading

例如，我有一个基于服务器的应用程序，它进行 JSON 解析，获取图像 url，然后从服务器下载图像，然后可以点击到 webview。如何减少加载数据的时间？我对此的解决方案是，我在后台执行异步任务或在应用程序启动后立即触发服务，这样当用户需要数据时，他会立即获得。不需要进度条！

除此之外，还有哪些其他方法可以帮助我优化应用以获得最佳用户体验？请建议，我是android的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:47:58.510

用于图像下载您可以使用缓存概念将图像保留在设备的本地缓存中，如果图像在设备缓存中可用，则不会再次从服务器下载或者您可以使用谷歌本身提供的快速图像下载概念 [点击这里](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

# centos - 规范文件中的 pkgconfig(alsa) 无法识别已安装的 alsa、alsa-devel

> ID：11929882
> 
> 赞同：0
> 
> 时间：2012-08-13T07:30:10.427
> 
> 标签：centos, rpm, rpmbuild, pkg-config

我正在尝试在 CentOS 5.6 上构建 qt，但由于系统没有所需的库而失败。

我正在尝试使用 Fedora qt 源 rpm 文件中的源文件和规范文件进行构建。

$ rpmbuild -ba qt.spec

失败消息如下所示，

```
 pkgconfig(alsa) is needed by qt-4.8.2-4.noarch
    pkgconfig(dbus-1) is needed by qt-4.8.2-4.noarch
    pkgconfig(fontconfig) is needed by qt-4.8.2-4.noarch
    pkgconfig(glib-2.0) is needed by qt-4.8.2-4.noarch
    pkgconfig(icu-i18n) is needed by qt-4.8.2-4.noarch
    pkgconfig(NetworkManager) is needed by qt-4.8.2-4.noarch
    pkgconfig(openssl) is needed by qt-4.8.2-4.noarch
    pkgconfig(libpng) is needed by qt-4.8.2-4.noarch
    pkgconfig(libpulse) is needed by qt-4.8.2-4.noarch
    pkgconfig(xtst) is needed by qt-4.8.2-4.noarch
    pkgconfig(zlib) is needed by qt-4.8.2-4.noarch
    pkgconfig(ice) is needed by qt-4.8.2-4.noarch
    pkgconfig(sm) is needed by qt-4.8.2-4.noarch
    pkgconfig(xcursor) is needed by qt-4.8.2-4.noarch
    pkgconfig(xext) is needed by qt-4.8.2-4.noarch
    pkgconfig(xfixes) is needed by qt-4.8.2-4.noarch
    pkgconfig(xft) is needed by qt-4.8.2-4.noarch
    pkgconfig(xi) is needed by qt-4.8.2-4.noarch
    pkgconfig(xinerama) is needed by qt-4.8.2-4.noarch
    pkgconfig(xrandr) is needed by qt-4.8.2-4.noarch
    pkgconfig(xrender) is needed by qt-4.8.2-4.noarch
    pkgconfig(xt) is needed by qt-4.8.2-4.noarch
    pkgconfig(xv) is needed by qt-4.8.2-4.noarch
    pkgconfig(x11) is needed by qt-4.8.2-4.noarch
    pkgconfig(xproto) is needed by qt-4.8.2-4.noarch
    pkgconfig(gl) is needed by qt-4.8.2-4.noarch
    pkgconfig(glu) is needed by qt-4.8.2-4.noarch
    pkgconfig(gstreamer-0.10) is needed by qt-4.8.2-4.noarch
    pkgconfig(gstreamer-plugins-base-0.10) is needed by qt-4.8.2-4.noarch
    pkgconfig(gtk+-2.0) is needed by qt-4.8.2-4.noarch
    pkgconfig(sqlite3) is needed by qt-4.8.2-4.noarch 
```

但是上面的大部分（alsa-devel，fontconfig ...等）已经安装了。和 .pc 文件位于 '/usr/lib64/pkgconfig/'

我认为 rpmbuild 无法识别 'pkgconfig(...)'。

有人可以知道原因吗？请帮帮我~

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:39:15.930

在规范文件中将 alsa-devel 更改为 alsa-lib-devel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T10:17:31.320

尝试`PKG_CONFIG_PATH`在构建环境中设置：

```
$ export PKG_CONFIG_PATH=/usr/lib64/pkgconfig 
```

查看[这个旧的错误报告](https://bugzilla.redhat.com/show_bug.cgi?id=212522)，了解有关此建议的更多信息。

# cakephp - Cakephp 2.0 ACL 实现问题

> ID：11929889
> 
> 赞同：0
> 
> 时间：2012-08-13T07:30:32.547
> 
> 标签：cakephp, acl

我创建了 acos、aros 和 aros_acos 表。使用 CakePlugin::load('AclExtras') 插入“acos”表中的值。此外，在添加组时会自动在“aros”表中添加值（在我的情况下，这是 UserRole）。

此外，当我在任何组中添加用户时（在我的情况下为 UserRole）。值按预期插入到“aros”表和“user”表中。

另外，我在“aros_acos”表中设置了权限。

但是，当我尝试使用任何添加的用户登录时，我收到以下错误：-

AclNode::node() - 找不到由“Array ([Aro0.model] => User [Aro0.foreign_key] =>)”标识的 Aro 节点

打印以下查询：-

```
"SELECT `Aro`.`id`, `Aro`.`parent_id`, `Aro`.`model`, `Aro`.`foreign_key`, `Aro`.`alias` FROM `lms_new`.`aros` AS `Aro` LEFT JOIN `lms_new`.`aros` AS `Aro0` ON (`Aro`.`lft` <= `Aro0`.`lft` AND `Aro`.`rght` >= `Aro0`.`rght`) WHERE `Aro0`.`model` = 'User' AND `Aro0`.`foreign_key` IS NULL ORDER BY `Aro`.`lft` DESC" 
```

在这里遇到障碍，因为我无法调试此问题。请建议如何进行。

我的应用程序中有 4 种类型的用户角色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:31:21.757

我认为您必须将此代码放在用户模型中：

```
public $actsAs = array('Acl' => array('type' => 'requester', 'enabled' => false)); 
```

# shell - TF 命令行工具：将文件添加到目录

> ID：11929893
> 
> 赞同：2
> 
> 时间：2012-08-13T07:31:03.547
> 
> 标签：shell, tfs

我想将我的解决方案与外部目录同步。

我有 3 个步骤，但新文件和删除的文件是问题：

1.  检出所有文件：“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\TF.exe”检出 c:\projeler\UnipaCode /recursive

2.  使用另一个文件夹“C:\Program Files\SyncToy 2.1\SyncToyCmd.exe”-R 同步文件

3.  签入所有文件

"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\TF.exe" 签入 /comment:"test" /noprompt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:50:25.970

[`tf add <file>`](http://msdn.microsoft.com/en-us/library/f9yw4ea0.aspx)

当前文件夹必须映射为当前用户的 TFS 工作区。然后[`tf checkin`](http://msdn.microsoft.com/en-us/library/c327ca1z.aspx)进行添加。

**问题编辑更新**

您可以通过将 TFS 所知道的 ( `tf dir`) 与本地文件系统中的内容进行比较来检测添加和删除的内容。没有内置的东西可以确定这一点（无`tf magically-workout-changes`命令）并应用`tf add`and `tf delete`。

请记住允许不应添加到 TFS 的文件（例如，构建中间文件）。

但是，将另一个工作空间映射到您正在与之同步的“另一个文件夹”并直接从源中使用 TFS 会更好。

# php - 在 onchange 上调用 2 个 JS 函数并且都返回一些值

> ID：11929895
> 
> 赞同：0
> 
> 时间：2012-08-13T07:31:08.853
> 
> 标签：php, javascript, ajax

我想在 onchange 事件上调用 twoJS 函数，这两个函数都返回一些值。它没有给我第二个函数输出：

我的 PHP 代码：

```
 <select name="lstTypex" id="lstTypex" onchange="javascript:showCondition(this.value);showInputType(this.value);">
     In options some values
  </select>
  <span id="condition" style="padding-left:19px;"></span>
  <span id="inputType" style="padding-left:19px;"></span> 
```

我的阿贾克斯代码：

```
// This function is used to submit for condition fields by ajax
function showCondition(colName) {

if (colName.length == 0) { 
    document.getElementById("condition").innerHTML="";
    return;
}
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("condition").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","ajax/entity_report.php?colName="+colName+"&doAction=showCondition",true);
xmlhttp.send();
}

// This function is used to submit for condition fields by ajax
function showInputType(colName) {

if (colName.length == 0) { 
    document.getElementById("inputType").innerHTML="";
    return;
}
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("inputType").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","ajax/entity_report.php?colName="+colName+"&doAction=showInputType",true);
xmlhttp.send();
} 
```

我的 PHP-Ajax 代码：

```
// include all required files for this screen
include("../include/common.php");
include(MODEL . "entity_report_class.php");

// create class object for class function access
$objCallUsers = new Entity_Report();

// call required class file functions 
$returnStr = "";
$arrTypex = $objCallUsers->fetch_data_type();
$typex = $arrTypex[$_REQUEST['colName']];

switch($_REQUEST['doAction']) {
case 'showCondition': 
    $arrCondition = array();
    if($typex == 'TB' || $typex == 'TA') {
        $arrCondition = array("Equal to","Not equal to","Starts with","Contains any part of word","Contains full word");
    }
    else if($typex == 'DD' || $typex == 'RD') {
        $arrCondition = array("Equal to","Not equal to");
    }

    $returnStr .= '<select name="lstCondition" id="lstCondition">
    <option>--Please Select--</option>';

    foreach ($arrCondition AS $condition) {
        $returnStr .= '<option>' . $condition . '</option>';
    }

    $returnStr .= '</select>';

break;

case 'showInputType': 
$arrCondition = array();
if($typex == 'TB' || $typex == 'TA') {
     $returnStr .= '<input type="text" name="conditionValue" id="conditionValue" value="" />';
}
else if($typex == 'DD' || $typex == 'RD') {
     $returnStr .= ' <select name="conditionValue" id="conditionValue"></select>';
}

break;
}

print($returnStr); 
```

它根据第二个函数调用给我输出。两个函数都返回一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:35:43.150

您正在使用全局变量`xmlhttp`，而第二个函数会覆盖它。您应该通过使用`var`关键字将其引入到这两个函数中。

```
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    var xmlhttp=new XMLHttpRequest();
}
else {// code for IE6, IE5
    var xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
} 
```

# facebook-like - 我可以阻止 Facebook 向喜欢的链接添加参数吗？

> ID：11929897
> 
> 赞同：0
> 
> 时间：2012-08-13T07:31:19.617
> 
> 标签：facebook-like, facebook-likebox

一年多来，我们网站的所有文章页面上都有一个标准的 Facebook 赞按钮（框数），没有出现任何问题（例如[文章右上角附近的与朋友分享框](http://www.goauto.com.au/mellor/mellor.nsf/story2/4A1CE316E57A92DBCA257A59000E8D93)）。

当用户“喜欢”一个页面时，它会将所有正确的内容发送到他们的 Facebook 个人资料（图片、标题、优先级等）

然而，该链接附加了几个参数，当从 Facebook 个人资料中单击这些参数时，**会导致 404（找不到页面）**。这是绝对不能接受的，我不得不关闭“赞”按钮，直到我能够解决问题。

Facebook 将这些参数添加到链接中：（**www.website.com/page?fb_action_ids=ZZZZZZZZZZZZZ&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=ZZZZZZZZZZZZZZZ**）

该网站只需要这个作为链接（www.website.com/page）

前段时间 AddThis 链接发生了类似的问题，但我能够访问他们的网站并检查/取消选中某些内容并解决问题（一旦我弄清楚发生了什么，就花了 2 分钟）。

Facebook没有这样的运气。**有没有办法“关闭”参数？**

我花了很多时间寻找解决方案，并找到了许多添加更多参数等的方法，但没有关于如何删除参数的内容。网站在 Lotus Notes 上运行，因此 PHP、ASP 脚本等在这种情况下将不起作用

请帮助我们的读者可以继续在他们的朋友之间分享我们的文章。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:13:54.687

> 有没有办法“关闭”参数？

不。

Facebook 添加了这些参数，以便网站所有者可以跟踪来自 Facebook 的传入流量的来源。

您必须以可以处理这些查询字符串参数的方式设置您的站点。我猜你有一些重写设置，看到请求`/page`并将其在内部重写为带有参数或其他东西的脚本调用？如果您向我们展示了这在您的页面环境中究竟是如何完成的，也许我们可以建议对此进行修复。

然后，作为第二步，如果您不希望来自 Facebook 的用户看到这些参数，您可以重定向到您的 URL 的无参数版本。

# toad - toad 自定义过滤器查询失败

> ID：11929898
> 
> 赞同：0
> 
> 时间：2012-08-13T07:31:20.960
> 
> 标签：toad, quest

我将此工具名称用作 TOAD [http://www.quest.com/toad-for-mysql/](http://www.quest.com/toad-for-mysql/) 进行 mysql 分析，在数据比较向导中，当我输入 sql 查询时它告诉我查询很好，我在 phpMyAdmin 中测试了查询，它运行良好。

[http://toadformysql.com/thread.jspa?threadID=37479](http://toadformysql.com/thread.jspa?threadID=37479)

查询：

```
 SELECT firstName from user where id=1 LIMIT 1 
```

表名是：用户 id firstName lastName 1 Bill Smith 2 John Smith

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:16:44.123

通过 filter ，它表示 sql 查询的 WHERE 部分

# html - 如何使 HTML5 验证与 IE 一起工作

> ID：11929901
> 
> 赞同：1
> 
> 时间：2012-08-13T07:31:32.117
> 
> 标签：html, internet-explorer, cross-browser, validation

我有 html5 表单验证，它在 chrome 和 firefox 中运行良好，但在 IE 中不行。我更喜欢 HTML5 而不是 jquery，因为它易于使用。是否有任何解决方法可以在 IE 中进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:35:00.040

IE < 10 不兼容 HTML5，IE10+ 或 Edge 是唯一完全支持 HTML5 的。

我想你应该在 jQuery 上呆一会儿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:38:18.947

您是否尝试过 htmlshiv 脚本？它托管在 Google 代码项目中，可以像这样添加到 html 文件的头部：

```
<!--[if lte IE9]>
    <script src="location/of/script" type="text/javascript"></script>
<![endif]--> 
```

来源：[http ://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

# python - 遍历嵌套字典并获取 Python 中的路径？

> ID：11929904
> 
> 赞同：4
> 
> 时间：2012-08-13T07:31:48.920
> 
> 标签：python, dictionary, recursion

我有一本像这样的字典：

```
{
   "checksum": "b884cbfb1a6697fa9b9eea9cb2054183",
   "roots": {
      "bookmark_bar": {
         "children": [ {
            "date_added": "12989159740428363",
            "id": "4",
            "name": "test2",
            "type": "url",
            "url": "chrome://bookmarks/#1"
         } ],
         "date_added": "12989159700896551",
         "date_modified": "12989159740428363",
         "id": "1",
         "name": "bookmark_bar",
         "type": "folder"
      },
      "other": {
         "children": [ {
            "date_added": "12989159740428363",
            "id": "4",
            "name": "test",
            "type": "url",
            "url": "chrome://bookmarks/#1"
         } ],
         "date_added": "12989159700896557",
         "date_modified": "0",
         "id": "2",
         "name": "aaa",
         "type": "folder"
      },
      "synced": {
         "children": [  ],
         "date_added": "12989159700896558",
         "date_modified": "0",
         "id": "3",
         "name": "bbb",
         "type": "folder"
      }
   },
   "version": 1
} 
```

一切都从“根”开始，它们有两种类型的数据：URL 和文件夹，它们是字典。如果是文件夹，则必须有key 'children'，key 的值是一个列表，我们可以在里面放更多的URL 和文件夹。

现在我想遍历这个嵌套字典，获取所有子文件夹中的URL，所以我写了一个函数：

```
def traverse(dic):
    for i in dic:
        if i['type'] == 'folder':
            for j in traverse(i['children']):
                yield j
        elif i['type'] == 'url':
            yield i 
```

我可以这样使用它：

```
traverse(dictionary['roots']['bookmark_bar']['children']) 
```

它完美地工作。但它只是生成一个 URL 的字典，我不知道它在哪里。我也想得到路径。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-13T21:44:00.837

我的用例与您略有不同：我需要将表示客户端设置的可变深度 JSON 结构展平为键值对，以便存储在数据库中。我无法得到 jsbueno 的答案，而且由于我还需要一些可以处理没有明确列出或包含儿童的案例的东西，所以我对其进行了修改以满足我的需要：

```
def traverse(dic, path=None):
    if not path:
        path=[]
    if isinstance(dic,dict):
        for x in dic.keys():
            local_path = path[:]
            local_path.append(x)
            for b in traverse(dic[x], local_path):
                 yield b
    else: 
        yield path,dic 
```

最终结果是我可以将这样的 JSON 字符串传递给我的脚本（具有可变深度），它将其转换为嵌套的字典：

```
{
  "servers": {
    "uat": {
      "pkey": true,
      "user": "testval",
      "pass": true
    },
    "dev": {
      "pkey": true,
      "user": "testval",
      "pass": true
    }
  }
} 
```

对它运行上面的生成器会创建一个漂亮的列表，如下所示：

```
([u'servers', u'uat', u'pkey'], True)
([u'servers', u'uat', u'user'], u'testval')
([u'servers', u'uat', u'pass'], True)
([u'servers', u'dev', u'pkey'], True)
([u'servers', u'dev', u'user'], u'testval')
([u'servers', u'dev', u'pass'], True) 
```

其中，使用类似的东西：

```
for x in traverse(outobj):
    pprint(('.'.join(x[0]),x[1])) 
```

然后可以转换为我想要的键值对格式，如下所示：

```
(u'servers.uat.pkey', True)
(u'servers.uat.user', u'testval')
(u'servers.uat.pass', True)
(u'servers.dev.pkey', True)
(u'servers.dev.user', u'testval')
(u'servers.dev.pass', True) 
```

我知道我在接受接受的答案后以这种方式发布，但由于接受的答案对我不起作用，也许这个稍微与结构无关的版本会帮助其他人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:47:55.030

如果我得到你想要的东西，我不确定，但你可能想要这样做：

```
def traverse(dic, path=None):
    if not path:
        path = []
    for i in dic:
        local_path = path[:].append(i)
        if i['type'] == 'folder':
            for j in traverse(i['children'], local_path):
                yield j, local_path
        elif i['type'] == 'url':
            yield i, local_path 
```

现在，您的函数会生成项目和一系列键，以在特定位置获取项目。

# php - 更新facebook状态时的Mojibake（汉字显示不正确）

> ID：11929905
> 
> 赞同：1
> 
> 时间：2012-08-13T07:31:49.253
> 
> 标签：php, facebook, api, facebook-graph-api, facebook-stream-story

好吧，我们可以做一个自动更新用户状态的网站，对吧？但是我遇到了一个问题。我们的目标用户是中国人，也就是说母语也是中文，我想用中文更新用户的状态。但是，mojibake 出现在状态中，而英文可以正确显示。这是我的代码：

```
<?php
session_start();
//facebook application
$fbconfig['appid' ]     = "APP_ID";
$fbconfig['secret']     = "APP_SECRET";
$fbconfig['baseurl']    = "URL";    
$user            =   null; //facebook user uid
try{
    include_once "facebook.php";
}
catch(Exception $o){
    error_log($o);
}
// Create our Application instance.
$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'cookie' => true,
));

//Facebook Authentication part
$user       = $facebook->getUser();

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'email,offline_access,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown',
            'redirect_uri'  => $fbconfig['baseurl']
        )
);

$logoutUrl  = $facebook->getLogoutUrl();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    //you should use error_log($e); instead of printing the info on browser
    d($e);  // d is a debug function defined at the end of this file
    $user = null;
  }
}

//if user is logged in and session is valid.
if ($user){
    //get user basic description
    $userInfo           = $facebook->api("/$user");

    //update user's status using graph api
    //http://developers.facebook.com/docs/reference/dialogs/feed/
    if (isset($_GET['publish'])){
        try {
            $publishStream = $facebook->api("/$user/feed", 'post', array(
                'message' => "MESSAGE", 
                'link'    => 'LINK',
                'picture' => 'PIC_LINK',
                'name'    => 'WEB NAME',
                'description'=> 'DESCRIPTION'
                )
            );
            //as $_GET['publish'] is set so remove it by redirecting user to the base url 
        } catch (FacebookApiException $e) {
            d($e);
        }
        $redirectUrl     = "URL";
        header("Location: $redirectUrl");
    }

    //update user's status using graph api
    //http://developers.facebook.com/docs/reference/dialogs/feed/
    if (isset($_POST['tt'])){
        try {
            $statusUpdate = $facebook->api("/$user/feed", 'post', array('message'=> $_POST['tt']));
        } catch (FacebookApiException $e) {
            d($e);
        }
    }
}

function d($d){
    echo '<pre>';
    print_r($d);
    echo '</pre>';
}
?> 
```

我想在设置 $_GET['publish']=1 时更新用户的状态。任何帮助将不胜感激。

# android - ActionBarSherlock 和片段

> ID：11929907
> 
> 赞同：1
> 
> 时间：2012-08-13T07:31:56.883
> 
> 标签：android, events, onclick, android-fragments, actionbarsherlock

我有一个具有一个托管活动的应用程序，其中一次托管许多片段。我也有一种在它们之间导航的方法。我想要的是更改操作栏顶部的按钮以适应当前显示的片段，并为这些按钮的 onClick 事件实现侦听器。问题是会有很多不同的按钮类型（对于显示的片段不同。有没有办法在片段中以某种方式捕获这些事件（onClick）？

# delphi - 递归属性 (Delphi)

> ID：11929909
> 
> 赞同：2
> 
> 时间：2012-08-13T07:32:16.727
> 
> 标签：delphi, recursion

我正在编写一个应用程序，该应用程序映射出一个目录结构，该目录结构需要尽可能多地保存有关每个文件的信息，以便最终用户可以应用自定义过滤器来操作其中的文件和文件夹。还进行文件搜索的类将基本信息返回给 UI，让最终用户了解所涉及的数据量。我想要完成的是通过属性递归到类的子对象以获取我需要的信息，这样我只需要访问顶级类来获取所需的信息而不必担心信息在任意数量的子类中。

```
type 
  TSomeClass = class(TObject)
  private    
    FContainerForSubObjects: TObjectList<TSomeClass>;
    FSomethingToBeCounted: Integer;
    FHasTheDataChanged: Boolean;
  private
    function GetSomethingToBeCounted: Integer;
    function GetHasTheDataChanged: Boolean;
  public
    property SomethingToBeCounted: Integer read GetSomethingToBeCounted;
    property HasTheDataChanged: Boolean read GetHasTheDataChanged; 
```

使类声明更有意义。像这样看。包含一个文件夹，`ContainerForSubObjects`因此如果您要查看硬盘驱动器，根类将是 C:\ 如果有一个名为 data 的文件夹，则会有一个代表 C:\Data 文件夹的子对象，并且`SomethingToBeCounted`将是每个文件夹中的文件。

现在我想在`GetSomethingToBeCounted`函数中做什么，如果如下

1.  查看是否有任何子对象（这很容易）
2.  如果有子对象，则查询它们的`SomethingToBeCounted`属性，该属性又应调用`GetSomethingToBeCounted`函数以返回`FSomethingToBeCounted`类字段的值，**但**该函数应根据`HasTheDataChanged`类的状态条件进行操作*这是我希望递归的地方起作用*
    *   如果`HasTheDataChanged`任何包含的子对象的属性设置为 false 是最新的，那么它应该返回它的值并且不应该进行更多处理
    *   如果`HasTheDataChanged`属性设置为 true 数据不是最新的，应该重新计算并返回新的重新计算值。它还应该设置适当的`HasTheDataChanged`状态，以减少进一步的重新处理。

我还假设这种类似类型的传播也必须使用 HasTheDataChanged 属性来完成，这样如果树中间某处的值发生变化，所有父对象都会相应地更新。

希望这些要求有意义

现在到问题的实质。首先。我的想法是否正确，仅通过访问子对象属性，正确的值就会传播到根对象，因此当可能有数千个子对象时，我不必花费无数行代码搜索每个子对象。还是我试图在这里重新发明轮子，而我只是在寻找一个已经存在并且可以使用而不是自己制作的类。最后但并非最不重要。这会是最有效的做事方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:30:01.877

For something like this, I might go in the other direction. Instead of having the parent object trying to figure out what child objects have changed, I would have a child object notify its parent when a change occurs, which then notifies its parent, and its parent, and so on. Let the information bubble upwards, instead of searching for it downwards. That puts the bulk of the work on the activity that is initiating the change, and makes searches faster since all of the information is pre-cached in the tree without having to hunt for it.

```
type  
  TSomeClass = class(TObject) 
  private     
    FParent: TSomeClass; 
    FSubObjects: TObjectList<TSomeClass>; 
    FSomethingToBeCounted: Integer; 
    FHasTheDataChanged: Boolean; 
    procedure Changed; 
  protected
    procedure SubObjectChanged(ASubObject: TSomeClass); 
  public 
    constructor Create(AParent: TSomeClass = nil);
    destructor Destroy; override;
    procedure DoSomethingToMakeAChange;
    property SomethingToBeCounted: Integer read FSomethingToBeCounted; 
    property HasTheDataChanged: Boolean read FHasTheDataChanged; 
  end;

constructor TSomeObject.Create(AParent: TSomeClass = nil);
begin
  inherited Create;
  FParent := AParent;
  FSubObjects := TObjectList<TSomeClass>.Create;
  //...
end;

destructor TSomeClass.Destroy;
begin
  //...
  FSubObjects.Free;
  inherited Destroy;
end;

procedure TSomeObject.DoSomethingToMakeAChange;
begin
  // update FSomethingToBeCounted as needed
  Changed;
end;

procedure TSomeClass.SubObjectChanged(ASubObject: TSomeClass); 
begin
  // update FSomethingToBeCounted as needed, based on which child was changed
  Changed;
end;

procedure TSomeClass.Changed; 
begin
  FHasTheDataChanged := True; 
  if FParent <> nil then
    FParent.SubObjectChanged(Self); 
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T07:41:21.197

我还没有遇到过可以执行您想要的操作的现有组件，因此编写自己的组件似乎是合理的。

你的方法会奏效，是我自己用过很多次的方法。您有一个*递归数据结构*，其中`TSomeClass`包含更多`TSomeClass`对象的列表。以任何其他方式遍历此结构将更加复杂。

# php - in_array() 编码器 PHP

> ID：11929912
> 
> 赞同：1
> 
> 时间：2012-08-13T07:32:36.463
> 
> 标签：php, arrays, codeigniter

大家好，我注意到codeigniter中的异常情况

在我的模型中，我只查询数据库以获取 user_id 列表

```
$recs = $this->db->query('select id from users'); 
```

这很容易，但我想将结果作为数组返回

所以我愿意

```
$reccs->result_array(); 
```

但现在在我的控制器中我想检查 in_array(124,$returned_array); 这不成功，因为 codeigniter 已将 id 数组封装到 av 大外部数组中，如下所示

```
Array ( [0] => Array ( [id] => 0 ) [1] => Array ( [id] => 11 )           [2]  =>   Array ( [id] => 29 )) 
```

如何使用 in_array php 函数仅检查 id ？

或者

我如何构建一个普通数组来存储 id 之类的东西

```
 $demo = array();
 foreach($recs as $r)
 $demo = array($r->id); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:42:41.710

如果您想检查用户是否在那里，您应该进行计数查询。

```
$this->db->where('id',124);
$count = $this->db->count_all_results('users');

if($count) {
// found
} else {
// not found
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:47:37.930

正如其他评论所说，有更好的方法可以做到这一点，但是当你坚持这样做时，只需将 id 转换为数组以匹配结果数组结构：

```
in_array(array('id' => 124),$returned_array) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T09:34:06.897

您可以循环结果集并生成一个新数组并使用它。以下是可能有用的代码

```
$i=0;
foreach($reccs->result_array() as $values)
{
$new_array[]=$values[$i]['id'];
$i++;
} 
```

使用 $new_array 进行 in_array 比较

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:33:55.360

您可以使用从每个子数组中提取该`array_map()`键*。*然后，`in_array()`将正常工作。

```
$found = in_array(124, 
                  array_map(function($val) { return $val['id']; },
                            $returned_array
                  )
         ); 
```

如果您没有 >= PHP 5.3，则将匿名函数替换为命名函数。

# ruby-on-rails - Rails 3 + Devise + Google Omniuth + 无确认信

> ID：11929917
> 
> 赞同：0
> 
> 时间：2012-08-13T07:32:50.643
> 
> 标签：ruby-on-rails, authentication, devise, omniauth, google-oauth

Rails 3.0.9
设计 1.5.3 与可确认

我正在使用 Devise 和 Google OAuth2 身份验证。
当 Google 检查登录并通过时，它会将控制权返回给我的应用程序。

**我的问题是：设计发送一封带有确认说明的信。但我希望 Devise 不会只为通过我的应用程序注册的用户发送 Google 帐户的此类信件。**

**用户模型是：**

```
class User < ActiveRecord::Base
    # Include default devise modules. Others available are:
    # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
    devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable, :omniauthable

    validates_presence_of :user_name, :address, :tel

    # Setup accessible (or protected) attributes for your model
    attr_accessible :user_name, :address, :tel, :attorney_number, :email, :password, :password_confirmation, :remember_me 

    has_many :eclaims
    has_many :createdtemplates

    before_create do |user|
        user.with_agreement = 1
    end

    def self.find_for_google_oauth2(access_token, signed_in_resource=nil)
        data = access_token.info
        user = User.where(:email => data["email"]).first

        unless user
            user = User.create(
                       user_name: 'no defined',
                       address: 'no defined',
                       tel: 'no defined',
                       attorney_number: nil,
                       email: data["email"],
                       encrypted_password: Devise.friendly_token[0,20],
                      )
        end
        user
    end 
end 
```

**用户::OmniauthCallbacksController**

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
    def google_oauth2
        # You need to implement the method below in your model (e.g. app/models/user.rb)
        @user = User.find_for_google_oauth2(request.env["omniauth.auth"], current_user)

        if @user.persisted?
          flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Google"
          sign_in_and_redirect @user, :event => :authentication
        else
          session["devise.google_data"] = request.env["omniauth.auth"]
          redirect_to new_user_registration_url
        end
    end 
end 
```

**路线.rb：**

```
EFiling2::Application.routes.draw do
  root :to => "home#index"

  devise_for :users, 
    :path_names => { :sign_up => "register", :sign_in => "login", :sign_out => "logout" }, 
    :controllers => { 
      :sessions => "sessions", 
      :registrations => "registrations", 
      :confirmations => "confirmations", 
      :passwords => "passwords",
      :omniauth_callbacks => "users/omniauth_callbacks"
    }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:13:25.777

而不是打电话`create`...

```
user = User.create(user_name: 'no defined', ...) 
```

构建用户对象，以便您可以调用`confirm!`...

```
user = User.new
...
user.confirm!
user.save! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T10:28:59.917

只是 noomerikal 答案的一个插件。你也可以用这个，

```
user.skip_confirmation! 
```

它只是做几乎相同的事情的不同方式。

# facebook-graph-api - Graph API：没有名字的用户

> ID：11929923
> 
> 赞同：1
> 
> 时间：2012-08-13T07:33:29.137
> 
> 标签：facebook-graph-api

用户怎么可能没有名字？

例如 id: 100004139740839。这个用户昨天在我的应用程序中注册。

如果您尝试在不使用访问令牌的情况下获取数据，您将收到**错误**的响应。当我使用用户的访问令牌提取数据时，我得到以下数据：

```
{
   "id": "100004139740839",
   "link": "https://www.facebook.com/profile.php?id=100004139740839",
   "timezone": 0,
   "locale": "pt_BR",
   "verified": true,
   "updated_time": "2012-08-10T07:12:01+0000"
} 
```

即没有“名称”字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T21:58:00.023

你得到这个是因为用户是一个页面。如果您设法找出实际用户是谁，您将看到具有此 ID 的页面属于该用户。这很烦人，我还没有找到一种方法来让实际用户使用页面 id

# javascript - 在javascript时钟中的单个字符之前添加填充0

> ID：11929925
> 
> 赞同：1
> 
> 时间：2012-08-13T07:33:34.683
> 
> 标签：javascript, asp.net

```
<script type="text/jscript">
function clock(){ 
  var d = new Date(); 
  var h = d.getHours(); 
  var m = d.getMinutes(); 
  var s = d.getSeconds(); 
  $('#clock').html(", "+h+"<span class='colon'>:</span>"+m+"<span class='colon'>:</span>"+s); 
//  $('.colon').fadeTo(1000, .2); 
  setTimeout(clock, 1000); 
} 
```

上面是 javascript，我用来在我的 Webapplication 上显示一个时钟。它工作正常，但现在我想要它对于任何单个数字值，该值应该在实际值之前填充 0。例如 12:15:05、12:15:15、12:05:10、02:05:09

目前显示如下：- 12:15:5、12:15:15、12:5:10、2:5:9

关于我如何实现这一目标的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:38:11.753

做一个小辅助函数并调用它：

```
function pad(n)
{
  return (pad < 10 ? '0' : '') + n;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:37:57.197

试试这个

```
var d = new Date();
var h = d.getHours();
var m = d.getMinutes();
var s = d.getSeconds();
    if (parseInt(h) < 10)
       h = "0" + h;
    if (parseInt(m) < 10)
       m = "0" + m;
    if (parseInt(s) < 10)
       s = "0" + s;
$('#clock').html(", " + 
       h + "<span class='colon'>:</span>" + 
       m + "<span class='colon'>:</span>" + 
       s);
setTimeout(clock, 1000); 
```

只需对这些添加条件检查`h, m and s`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:38:01.190

一个简单的“如果小于 10”条件应该可以。

```
if(value<10){
    //it must be 1 digit
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:44:09.457

你可以试试这样的

```
var d = new Date(); 
var h = d.getHours(); 
h = h+''; // it will give string
if(h.length == 1) { 
h = "0"+h
} 
```

# oop - OOP 是安全的，但如何？

> ID：11929926
> 
> 赞同：1
> 
> 时间：2012-08-13T07:33:36.890
> 
> 标签：oop

好吧，关于面向对象编程我们有很多话要说，但我经常听一个句子“ `OOP is secure coding`”？我可以理解 OOP 是可管理的、可重用的以及几乎所有其他的东西，但从第一天开始我就无法理解 OOP 是如何安全的，或者作者/演讲者的意思是什么.....
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T07:37:51.097

它绝对不会比函数式或过程式编程更安全，也不会更不安全。由于安全性掌握在程序员手中，我看不到 OO 是如何“更安全”的。

# android - Android：在警报时播放自己的声音

> ID：11929929
> 
> 赞同：1
> 
> 时间：2012-08-13T07:33:48.130
> 
> 标签：android, alarmmanager

我的应用程序具有报警功能。我的要求是在闹钟响起时播放自己的声音，但我无法做到这一点。它仅在警报响起时显示通知。我要播放的声音文件位于 Res 的 raw 文件夹中。下面我发布我的代码：

在我的活动课上：

```
Intent AlarmIntent = new Intent(getApplicationContext(), AlarmReceiver.class);
        AlarmIntent.putExtra("Ringtone", 
                Uri.parse("getResources().getResourceName(R.raw.shankh_final_mid)"));
        PendingIntent Sender = PendingIntent.getBroadcast(this, 0, AlarmIntent, 0);
        AlarmManager AlmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        AlmMgr.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 
                (60 * 1000), (24 * 60 * 60 * 1000), Sender); 
```

在接收器类中：

```
public void onReceive(Context context, Intent intent) { 

    Intent in = new Intent(context, SnoozeEvent.class);
    in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent Sender = PendingIntent.getActivity(context, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);
    manager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    notification = new Notification(R.drawable.icon, "Wake up alarm", System.currentTimeMillis());
    notification.setLatestEventInfo(context, "Hanuman Chalisa", "Wake Up...", Sender);
    notification.flags = Notification.FLAG_INSISTENT;
    notification.sound = (Uri)intent.getParcelableExtra("Ringtone");
    manager.notify(1, notification);  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:42:10.100

您可以在捆绑包或 SD 卡中设置自定义声音。仅将声音文件的路径设置为通知声音。使用下面的代码。

```
notification.sound = Uri.parse("android.resource://my.package.name/raw/notification"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:50:35.640

尝试更改这两行：

```
//In your activity:
AlarmIntent.putExtra("Ringtone",getResources().getResourceName(R.raw.shankh_final_mid));
....   
//In your reciever
notification.sound = (Uri)(Uri.parse(intent.getStringExtra("Ringtone"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:37:07.120

尝试使用此代码制作您自己的通知声音：

```
NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
Intent notificationIntent = new Intent(this, YourActivity.class);
PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT);
Notification note  = new Notification(R.drawable.icon, "Your Text to Show", System.currentTimeMillis());
note.sound = Uri.parse("file:///sdcard/notification/ringer.mp3");
int nid = 123456789;
manager.notify(nid, note); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-15T20:00:50.293

这个答案有点过时了。

[我必须在这里](https://stackoverflow.com/questions/50881732/playing-sound-on-the-alarm-channel-on-android/50881793#50881793)打开自己的问题才能在警报频道上播放。

这是我的工作解决方案。

```
mediaPlayerScan = new MediaPlayer();
try {
  mediaPlayerScan.setDataSource(getContext(),
          Uri.parse(getString(R.string.res_path) + R.raw.scan_beep));

  if (Build.VERSION.SDK_INT >= 21) {
    mediaPlayerScan.setAudioAttributes(new AudioAttributes.Builder()
            .setUsage(AudioAttributes.USAGE_ALARM)
            .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)
            .build());
  } else {
    mediaPlayerScan.setAudioStreamType(AudioManager.STREAM_ALARM);
  }
  mediaPlayerScan.prepare();
} catch (IOException e) {
  e.printStackTrace();
} 
```

# c# - GetDecimal() 在 C# 中不考虑用逗号分隔小数点

> ID：11929934
> 
> 赞同：-1
> 
> 时间：2012-08-13T07:34:03.907
> 
> 标签：c#, ado.net, type-conversion, decimal

我们在冰岛的生产数据库（SQL Server 2008R2）使用逗号（，）作为小数分隔符存储 sqlmoney 列值（示例 54,12 和 85,00）。我们的应用程序（C#，ASP.Net）使用 SqlDatareader 读取值，代码如下。

```
decimal testVal=dr.GetDecimal(idxAmountUSD)//IdxAmountUSD is sqlmoney value 
```

现在它不考虑逗号（，）作为小数分隔符并返回为 5412 和 8500。

实际上它应该返回为 54.12 和 85.12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:38:47.883

您需要在创建 SQLDataReader 实例之前定义您的文化：

```
Application.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture("yourCulture"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-13T07:52:56.020

您需要阅读特定的数据文化，先定义文化，然后再阅读数据

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("is-IS"); //is-IS is an iceland culture (where , is used inplace of .) .
// following line remains same
decimal testVal=dr.GetDecimal(idxAmountUSD)//IdxAmountUSD is sqlmoney value 
```

上面的代码我没有测试，但逻辑上是正确的。

# algorithm - 集合中数字重复的子集求和算法

> ID：11929938
> 
> 赞同：3
> 
> 时间：2012-08-13T07:34:13.313
> 
> 标签：algorithm, language-agnostic

我有一个包含自然数的集合 S 和一个目标 t，它是一个数字。我想知道
我们如何才能找到这些数字的可能组合数量，这些数字总和为目标 t。
一个数字可以取任意次数，并且可以取任意数量的数字来获得
等于目标 t 的总和。

```
Example
target  6
Set s  {3,8,1,2}
Solution   3+3, 3+2+1, 1+1+1+3, 2+2+2, 2+1+1+2, 2+1+1+1+1, 1+1+1+1+1+1
Total No of solutions possible  7 
```

什么是有效的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:27:39.547

如果目标相当小，您可以使用动态规划来获得 O(|S| * t) 解。这是 Python 中的示例代码：

```
def combinations(S, t):
    dp = [1] + [0] * t
    for i in S:
        for j in range(0, t - i + 1):
            dp[j + i] += dp[j]
    return dp[t] 
```

# c# - 部署期间的 SQL 数据库创建

> ID：11929942
> 
> 赞同：0
> 
> 时间：2012-08-13T07:34:27.497
> 
> 标签：c#, sql-server, sql-server-2008, tsql

我通过 Microsoft SQL Management Studio 设计了我的 SQL Server 表，并根据创建的数据库编写了 ac# 应用程序。在安装应用程序时，我必须从部署程序创建数据库。有人可以说一下完成这项工作的简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:43:05.263

恐怕没有真正简单的方法。

有一个名为 Roundhouse 的工具[http://code.google.com/p/roundhouse/](http://code.google.com/p/roundhouse/)允许从脚本部署数据库。您可以将其集成到您的设置中，但您必须自己关心服务器访问权限。

或者您可以尝试一些安装工具 - wix、installshield 等，几乎所有这些工具都有创建数据库的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:20:42.680

我使用了 SQL 管理工作室。有一个选项可以从数据库和表中生成脚本。我生成了脚本并通过编程语言执行它，就像我执行查询一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:02:29.687

这可能会帮助您：

[http://www.codeproject.com/Articles/11493/Create-database-during-installation-of-a-NET-appli](http://www.codeproject.com/Articles/11493/Create-database-during-installation-of-a-NET-appli)

# java - 了解链表中删除了哪个节点的最佳方法？

> ID：11929945
> 
> 赞同：0
> 
> 时间：2012-08-13T07:34:36.543
> 
> 标签：java, linked-list

我遇到了一个问题，例如，如何知道链表中删除了哪个节点。例如：有一个包含多个节点的链表，链表传递给一个函数，该函数将删除一个任意节点并将列表返回..有没有办法知道哪个节点被删除了。

根据我的观点，在传递链表之前，我们需要维护一个数组，该数组将包含列表中每个节点的所有地址，删除后我们需要遍历并找出哪个节点被删除。

什么是最好的方法。

前任：

```
public class GetDeletedNode{
    public static void main(String args[]){
        LinkedList<String> ll = new LinkedList<String>();
        ll.add("a");
        ll.add("b");
        ll.add("c");
        ll.add("d");

        ll = deleteArbitaryNode(ll);

        //write code to get know which node got deleted.
        //
        //code goes here

        for(String str:ll){
            System.out.println(str);
        }
    }

    private static LinkedList<String> deleteArbitaryNode(LinkedList<String> ll) {       
        //delete arbitary node
        Random random = new Random();
        ll.remove((int)((long)3*random.nextDouble()+1));
        return ll;      
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:44:08.527

对“public E remove(int index)”的调用提供了删除的对象。

所以......像这样替换你的代码并将删除的节点返回给调用者：

```
public class GetDeletedNode{
    public static void main(String args[]){
        LinkedList<String> ll = new LinkedList<String>();
        ll.add("a");
        ll.add("b");
        ll.add("c");
        ll.add("d");

       // removes the random node and then returns it

        String removeObject  = deleteArbitaryNode(ll);

        for(String str:ll){
            System.out.println(str);
        }
    }

    private static T deleteArbitaryNode(LinkedList<T> ll) {       
        //delete arbitary node
        Random random = new Random();
        return ll.remove((int)((long)3*random.nextDouble()+1));      
    }
} 
```

您可能还想将随机节点选择器重新设计为使用 List ans 中的 size() 的东西，然后它可以与任何大小的列表一起使用。

# birt - Birt 报告库中的客户端 JavaScript

> ID：11929949
> 
> 赞同：0
> 
> 时间：2012-08-13T07:35:14.457
> 
> 标签：birt

我正在尝试解决`Birt`报告中的以下问题 - 当我显示`Dynamic Text`从查询参数中获取的日期时，我想调用 JavaScript 函数，该函数会将这个日期转换为一些用户友好的形式。所以我做类似的事情

`getTextDate(params["fromDate"].value)`

我有我的脚本在`initialize`. 这工作正常。

但我的问题是，当我创建一个包含可重用元素的库并且我想使用上述 JavaScript 函数时，我该怎么做呢？`initialize`在库模板中不可用，并且无法找到其他方式来包含 JS。[这篇](http://www.lebirtexpert.com/wordpress/2010/08/03/javascript-functions-lib/)文章对我没有帮助，因为我想要客户端功能，而不是服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:52:41.690

好了，问题解决了，创建一个带有常用函数的js文件，放到共享资源中，然后添加到库本身的资源中就可以了。

# sql - Oracle 拆分行

> ID：11929964
> 
> 赞同：1
> 
> 时间：2012-08-13T07:36:18.097
> 
> 标签：sql, database, oracle, plsql

我有一个遗留表，我必须将其数据迁移到新结构。在旧结构中，每一行代表一年，每个月都有字段。在新的每一行将代表一个月。旧结构是：

```
OLD_TABLE (
id1,
id2,
    year,
price01,
price02,
price03,
price04,
...
price11,
price12,
quantity01,
quantity02,
quantity03,
...
quantity11,
quantity12, 
```

) -> PK = id1,id2,年份

新结构是这样的：

```
NEW_TABLE (
id1,
id2,
year,
month,
quantity,
price, 
```

) -> PK = id1,id2, 年份

关于如何将数据从旧结构迁移到新结构的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:59:51.687

如果您使用的是 11g 或更高版本，请查看`unpivot`语法

就像是...

```
SELECT *
FROM yourtable
UNPIVOT (price FOR pmonth IN (price01 AS 1, price02 AS 2...))
UNPIVOT (quantity FOR qmonth IN (quantity01 AS 1, quantity02 AS 2...))
WHERE pmonth=qmonth 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:15:08.923

```
SELECT id1, id2, year, 1 as month, quantity01 as quantity, price01 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 2 as month, quantity02 as quantity, price02 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 3 as month, quantity03 as quantity, price03 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 4 as month, quantity04 as quantity, price04 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 5 as month, quantity05 as quantity, price05 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 6 as month, quantity06 as quantity, price06 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 7 as month, quantity07 as quantity, price07 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 8 as month, quantity08 as quantity, price08 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 9 as month, quantity09 as quantity, price09 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 10 as month, quantity010 as quantity, price010 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 11 as month, quantity011 as quantity, price011 as price FROM old_table
UNION ALL
SELECT id1, id2, year, 12 as month, quantity012 as quantity, price012 as price FROM old_table
; 
```

# android - 菜单栏显示在一种布局上

> ID：11929968
> 
> 赞同：0
> 
> 时间：2012-08-13T07:36:34.713
> 
> 标签：android, menu

我的布局包含两个线性布局。
如下：　

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/l1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="right"
        android:orientation="vertical" >

        <Button
            android:id="@+id/b1"
            android:layout_width="18dp"
            android:layout_height="match_parent"
            android:text=" ﹒﹒﹒"
            android:textSize="20dp" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/l2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:orientation="vertical" >

    </LinearLayout>

</LinearLayout> 
```

有 l1 和 l2。
我想让我的菜单栏只属于 l1 并显示在 l1 上。
但不显示 l1 和 l2 的交叉。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:00:10.517

您无法控制菜单选项的布局。唯一的选择是为您想要实现的目标定义自定义菜单。

# php - PropelORMPlugin 和“object_actions”？

> ID：11929969
> 
> 赞同：0
> 
> 时间：2012-08-13T07:36:37.333
> 
> 标签：php, symfony1, propel

我正在移植具有以下表单代码的旧 Propel 和 Symfony 应用程序：

```
generator:
  class:              sfPropelGenerator
  param:
    model_class:      UserForm
    theme:            default

    config:
      fields:           
        created_at:     { params: date_format='dd.MM.yyyy HH:mm' }
        updated_at:     { params: date_format='dd.MM.yyyy HH:mm' }

      list:
        title:          User Forms
        display:        [=form_name, product_line, created_at, updated_at]
        filters:        [form_name, product_line]
        object_actions: 
          edit:         { label: "Edit", action: "loadForm", icon: "/sf/sf_admin/images/edit.png" }
          _delete:      ~
        actions:
          _new:      ~ 
```

然而，现在我升级到 PropelORMPlugin，我不再看到“编辑”按钮，即“object_actions”似乎不起作用。

这是我设法找到的唯一文档[https://github.com/propelorm/sfPropelORMPlugin/blob/master/doc/admin_generator.md](https://github.com/propelorm/sfPropelORMPlugin/blob/master/doc/admin_generator.md)

在较新版本中使用“object_actions”的正确方法是什么？

编辑：我正在从 Symfony 1.0 移植到 1.3，从 Propel（我从未真正看过）移植到 sfPropelORMPlugin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:42:40.360

从[文档](http://www.symfony-project.org/reference/1_4/en/06-Admin-Generator#chapter_06_sub_object_actions)中：

```
object_actions:
  moveUp:     { label: "move up", action: "moveUp" }
  moveDown:   { label: "move down", action: "moveDown" }
  _edit:      ~
  _delete:    ~ 
```

你应该尝试这样的事情：

```
object_actions: 
  edit:         { label: "Edit", action: "loadForm", icon: "/sf/sf_admin/images/edit.png" }
  _delete:      - 
```

顺便说一句，您应该从您要移植的版本（propel 和 symfony）中精确定位。

**编辑：**

它们是 sf 1.0 和 sf 1.3+ 之间 generator.yml 文件结构的一些差异。现在有一个级别`config`可以放置所有内容。试试这个`generator.yml`：

```
generator:
  class: sfPropelGenerator
  param:
    model_class:           UserForm
    theme:                 admin

    config:
      fields:
        created_at:     { params: date_format='dd.MM.yyyy HH:mm' }
        updated_at:     { params: date_format='dd.MM.yyyy HH:mm' }
      list:
        title:          User Forms
        display:        [=form_name, product_line, created_at, updated_at]
        object_actions:
          edit: { label: "Edit", action: "loadForm", icon: "/sf/sf_admin/images/edit.png" }
          _delete: ~
        actions:
          _new: ~
      filters:
        fields: [form_name, product_line] 
```

需要注意的一些变化：

*   `config:`我添加的级别
*   `_create:`成为_`_new:`
*   `filters`走出去`list`

# http - Nginx 服务器内容 gzip 压缩不起作用

> ID：11929977
> 
> 赞同：5
> 
> 时间：2012-08-13T07:37:18.363
> 
> 标签：http, https, nginx, compression, gzip

这是我的 nginx.conf 中的部分，但我不确定为什么当我使用 gzip 压缩检查器或 http 标头检查时，内容未压缩。

[https://pasify.com](https://pasify.com)

```
user              nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log;
#error_log  /var/log/nginx/error.log  notice;
#error_log  /var/log/nginx/error.log  info;

pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;

    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  0;
    #keepalive_requests 5;
    #keepalive_timeout  65;
    send_timeout 10m;

    # output compression saves bandwidth
    gzip  on;
    gzip_http_version 1.1;
    gzip_vary on;
    gzip_comp_level 6;
    gzip_proxied any;
    gzip_types text/plain text/html text/css application/json application/javascript application/x-javascript text/javascript text/xml application/xml application/rss+xml application/atom+xml application/rdf+xml;

    gzip_buffers 16 8k;

    # Disable gzip for certain browsers.
    gzip_disable MSIE [1-6].(?!.*SV1);

    # Load config files from the /etc/nginx/conf.d directory
    # The default server is in conf.d/default.conf
    include /etc/nginx/conf.d/*.conf;

    ## Detect when HTTPS is used
    map $scheme $fastcgi_https {
      default off;
      https on;
    }

    client_max_body_size 20M;

} 
```

我可以知道是什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:51:54.717

经过

> gzip_disable MSIE [1-6].(?!.*SV1);

您已经为几乎所有在其用户代理中包含数字的浏览器禁用了 gzip，因为有两个单独的正则表达式：“MSIE”和“[1-6].(?!.*SV1)”。添加引号或更好地使用它：

> gzip_disable msie6;

有关详细信息，请参阅[文档](http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_disable)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:54:27.360

我唯一的评论是[http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_types](http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_types)说 gzip_types 指定除了 text/html 之外要压缩的类型。所以你的 gzip_types 中的 text/html 是不必要的。如果无论如何指定它是有问题的，我会认为这是一个错误，但尝试删除它只是为了确定。

如果不是这样，你能告诉我们你的

```
server {...} 
```

块长什么样？

还要检查以确保 /etc/nginx/conf.d/*.conf 中没有任何设置“gzip off”的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T15:30:41.867

Nginx 的默认配置（至少 v1.4.6）已将`gzip_types`行注释掉。必须取消注释它才能压缩列出的资源类型。

# sql-server - SSMS 使用 Intellisense 编辑行或直接编辑查询结果

> ID：11929978
> 
> 赞同：2
> 
> 时间：2012-08-13T07:37:22.787
> 
> 标签：sql-server, tsql, intellisense, ssms

我们知道在编写查询时，结果是只读的，我们不能从结果网格中删除/更新任何记录。

另一方面，如果我们右键单击一个表并选择 Edit top (1000)，然后显示 SQL 窗格，没有 Intellisense 支持，也不能与其他表连接以改善显示的数据。

所以问题是，有什么办法可以改善以上两者中的任何一个吗？因为这会提高生产力。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:57:19.403

我使用 Microsoft Access 和链接到 ODBC 数据源的附加表来实现您所描述的那种交互。

# mysql - 选择集合 (val11,val21,val31),...,(val11,val21,val31) 中 (field1, field2, field3) 的行

> ID：11929979
> 
> 赞同：1
> 
> 时间：2012-08-13T07:37:22.967
> 
> 标签：mysql, sql, optimization

我正在使用mysql。我需要从一组向量中的表（带有字段`id,field1,field2,field3`）中选择行。是否可以通过一个查询来完成？如果是，我需要索引哪些字段以加快查询速度？这个查询比串行简单选择查询更快/更慢吗？`(field1,field2,field3)``(v11,v21,v31),(v12,v22,v32),...,(v1N,v2N,v3N)``N`

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:40:13.880

您可以像这样进行多列`IN`比较：

```
SELECT id,
       field1,
       field2,
       field3
FROM   tbl
WHERE  (field1,field2,field3) IN (
           (v11,v21,v31),
           (v12,v22,v32),
           (v1n,v2n,v3n)
       ) 
```

它本质上是在说：

在哪里

```
(field1 = v11 AND field2 = v21 AND field3 = v31) OR
(field1 = v12 AND field2 = v22 AND field3 = v32) OR
...                                              OR
... 
```

# c# - C＃。编码不带标签的文本

> ID：11929980
> 
> 赞同：0
> 
> 时间：2012-08-13T07:37:30.537
> 
> 标签：c#, regex

我有带有自定义标签的文本。文本还可以包含符号'<'、'<<<<<'、'>'、'"'等。
我需要对所有没有标签的文本进行编码。
文本示例：

```
Stack Exchange 网络是一组问答网站，致力于提供高质量的问题和答案，其目标是让互联网变得更美好。它由 Stack Exchange Inc. 拥有和运营。
>>>>>>>>>我们非常重视您个人信息的私密性，并致力于保护它。
<helplink id="123456"/>
为此，我们制定了程序以确保按照适用的数据保护和隐私法负责任地处理您的信息。我们感谢您的信任，我们将采取这种方式。

```

我认为需要使用正则表达式来查找没有标签的文本。

# drag-and-drop - 右键单击将 TPopupMenu 解释为拖放

> ID：11929981
> 
> 赞同：1
> 
> 时间：2012-08-13T07:37:34.770
> 
> 标签：drag-and-drop, popupmenu, c++builder-6

我有一个按预期工作的弹出菜单。同一对象上的拖放功能按预期工作。把它们放在一起，然后...

右键单击时会出现弹出菜单。当菜单仍然存在时，随后在弹出菜单上但仍在对象上的*左键单击*会调用拖放功能，就好像最初的右键单击是一直保持到现在然后释放的左键单击.

```
void __fastcall myGrid::eDragDrop(System::TObject *Sender, System::TObject *Source, int X, int Y)
{
  while((Sender != this) && (Sender != NULL))
  {
    TControl *control = dynamic_cast < TControl * > (Sender);
    if(control != NULL)
    {
      X += control->Left;
      Y += control->Top;
      Sender = control->Parent;
    }
    else
    {
      Sender = NULL;
    }
  } // while
  // Check for a drop onto the Chart

  if((Column != NULL)&&(Column->Visible)&& (Column->HeaderIndex>=0))
  {
    int Xt = X - FHeaderSB->Left + FHorzScroll->Position;
    int HeaderIndex = Column->HeaderIndex;
    if((Xt > FHeaderSections->Items[HeaderIndex]->Left) && (Xt < FHeaderSections->Items[HeaderIndex]- >Right))
    {
      Xt -= FHeaderSections->Items[HeaderIndex]->Left;
      GotDragDropTime = true;
      DragDropTime = Column->GetTimeFromPosition(Xt);
    } // if
  } // if Visible

  if(fDragDrop != NULL)
  {
    fDragDrop(Sender, Source, X, Y);
  }
} 
```

我做错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:54:55.780

找到了！在未检查单击哪个按钮的情况下设置标志`OnMouseDown`的调用函数中存在疏忽。`PendingDrag`

我没有意识到在我们的代码中控制了多少拖动功能。毕竟这不是 Borland C++ Builder 6 的错。

感谢您富有洞察力的评论。他们帮助我找到了错误。

# sqlite - BlackBerry OS 6 中的 Sqlite 光标中断

> ID：11929991
> 
> 赞同：5
> 
> 时间：2012-08-13T07:38:13.577
> 
> 标签：sqlite, blackberry, java-me

我有一个在 BlackBerry OS 7.0 下运行良好的应用程序，但是当我在 BlackBerry OS 6.0 下运行相同的应用程序时，SqLite 光标立即到达数据的末尾，因此我无法从数据库中获取任何数据。

```
 public static Vector GetProducts(String sysID) {
  Bitmap img = null;
  try {
   Statement st = d
     .createStatement("SELECT * FROM Product where systemSerID=?");
   st.prepare();
   st.bind(1, sysID);
   st.execute();
   Cursor c = st.getCursor();

   Products products;
   Vector pro = new Vector();

   while (c.next()) {

    Row r = c.getRow();
    products = new Products();
    products.setSystemServiceID(r.getString(1));
    products.setSystemServiceName(r.getString(2));
    products.setProductID(r.getString(3));
    products.setProductName(r.getString(4));
    products.setProductDesc(r.getString(5));

    products.setProductType(r.getString(devil));
    // products[i].setProductType("1");
    products.setBatchID(r.getString(7));
    products.setMinValue(r.getString(music));
    products.setMaxValue(r.getString(9));
    products.setImageURL(r.getString(10));

    System.out.println(" retrived from database.");
    pro.addElement(products);
   }

   c.close();
   st.close();
   return pro;

  } catch (DatabaseException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   return null;

  } catch (DataTypeException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   return null;
  }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:56:12.577

数据库的[文档](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/database/Database.html)说：

> 如果 Statement 可能返回结果，请通过调用 Statement.getCursor() 运行 Statement。 `Statement.execute()`- 当您想明确准备和关闭语句时使用。

由于您要访问结果集，因此不应调用 Statement.execute()。getCursor() 导致查询执行，因此您应该能够删除 execute() 调用以获得所需的行为。