# StackOverflow 问答 000219000-000219999

# apache-flex - 您如何学习新的技能/框架/技术？

> ID：219006
> 
> 赞同：1
> 
> 时间：2008-10-20T16:14:48.340
> 
> 标签：apache-flex, actionscript-3, actionscript, air

我需要能够为一个相对较大的 Adob​​e AIR 项目做出贡献，而我是从零开始使用这项技术的。最好的方法是什么？

我通常会得到一本好书/教程并按照自己的方式完成它，但这次似乎要在合理的时间范围内实现这一点需要学习的东西太多了。我需要有关 Actionscript、FLEX 等的书籍...

您是否知道任何可能对这种特殊情况有用的好资源？

如果你在我的鞋子里，你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T16:20:13.460

我只需要做类似的事情。如果您负担得起（或者，让您的公司为此付费），请尝试参加培训课程。几个月前我用 Figleaf 软件做了一个，它真的很有帮助。

至于书，我听说 Essential Actionscript 3 书很好（我有一本用于 AS2 的书，非常好）。Flex 实际上只是 SDK。您将在 AS3 和 MXML 中完成大部分工作。

另一件非常好的事情是下载 SDK 并开始使用它。想几个小应用程序来做，然后用 Flex 编写它们。我在工作中做到了这一点（在 Flex 中编写了几个 util Apps 来学习它）。我发现最好的学习方法就是去做，而且 SDK 是免费的，所以应该没有什么能阻止你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T16:52:17.937

[Hello World for AIR](http://www.senocular.com/air/tutorials/air101/)，然后逐步添加细节。积极使用任何社区。关于你的经历的博客。有一天你会帮助别人。

今天你在学习，明天你在教书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T16:55:12.190

1.  我从 Internet 下载示例，然后运行它们，弄乱它们，尝试更改它们并了解它们是如何工作的。
2.  我订阅有关该主题的博客并做示例，尝试了解人们所写的内容。
3.  我做样本:) 所以我基本上是从上到下学习的。首先，我了解该技术的一般意义，然后通过示例深入了解我认为有趣的部分。效果很好。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T16:20:02.197

我通常发现在线教程是最好的方法。它们比书籍更重要，因此通常可以更快地掌握速度。并且不要将自己限制在单一资源上。通过我们的朋友谷歌找到足够的教程，我从来没有遇到过问题。

不过，我对 Adob​​e AIR 一无所知。我假设您的客户也知道您是菜鸟？;D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T16:49:04.090

我是主动学习的大力倡导者，[这里](http://en.wikipedia.org/wiki/Active_learning)有详细描述。本质上，当您尝试学习一项新技术时：阅读它，与您的同龄人讨论它，将它教给对技术较新的人，最重要的是，*亲自动手*。

学习新事物的一个完美例子是加入一个社区，如 stackoverflow，或基于你想学习的内容的讨论论坛 ( [http://www.adobe.com/devnet/air/](http://www.adobe.com/devnet/air/) )，甚至通过为开源项目做出贡献。

当然，以上都没有尝试新事物那么有效。为了学习新技术（以我的**诚实**观点），最好“先入为主”并尝试一下。

# sharepoint - 合并和查询多个列表

> ID：219007
> 
> 赞同：3
> 
> 时间：2008-10-20T16:14:58.433
> 
> 标签：sharepoint

我仍然是 sharepoint 的新手，想知道是否可以进行跨多个列表的查询。我的清单看起来像这样

客户（id、名称等） 订单（id、订单号、客户和一些附加信息） OrderItems（id、名称、价格、描述等）

我想创建一个视图，该视图将显示按订单分组的订单项，该订单项将再次按客户分组。

在纯 .net 代码中非常简单，但是否可以仅使用共享点列表来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-20T17:13:49.513

如果没有自定义代码或第三方组件，您将只有几个选项。使用 SharePoint Designer 创建数据视图或使用一些复杂的 CAML 创建自定义查询，我什至不确定这是否完全可行。

就我个人而言，我更倾向于结合使用 Web 部件连接和过滤来使用 Master Detail 功能。通过激活企业功能，您可以获得许多过滤器 Web 部件，它们应该能够组合起来以过滤列表到选定的值。

就我个人而言，我使用自定义代码根据查询带回列表数据，然后使用 SPListItemCollection 对象的 GetDataTable() 方法。一旦您在 DataTables 中获得了列表项，您就有多种方法可以对信息进行排序过滤和聚合。

我应该补充一点，有一篇关于使用 SPGridView 和 SPMenuField 从数据集中显示信息的精彩文章。拥有 DataTables 后，您可以在数据集中建立关系以使用以下控件显示信息：

[http://blogs.msdn.com/powlo/archive/2007/02/25/displaying-custom-data-through-sharepoint-lists-using-spgridview-and-spmenufield.aspx](http://blogs.msdn.com/powlo/archive/2007/02/25/displaying-custom-data-through-sharepoint-lists-using-spgridview-and-spmenufield.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:26:36.890

连接的 Web 部件可以执行此操作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T12:13:45.253

我认为 SPD 可以做到这一点。如果您不想弄脏自己，请查看最适合您的[SharePoint 列表集合。](http://www.boostsolutions.com/listcollection.html)

# java - Jasper 报告生成错误的 HTML

> ID：219009
> 
> 赞同：0
> 
> 时间：2008-10-20T16:15:24.483
> 
> 标签：java, html, jasper-reports

如果我在 IE7 中查看我的一份 Jasper 报告生成的 HTML，我会看到以下内容：

```
<BR /><BR />
<A name="JR_PAGE_ANCHOR_0_1">
<TABLE style="WIDTH: 1000px" cellSpacing="0" cellPadding="0" bgColor="#ffffff" border="0">
<-- table body omitted -->
</TABLE> 
```

这两个 BR 标签是通过 JRHtmlExporterParameter.HTML_HEADER 参数添加的。在这些标记之后和报告表的开头之前，有一个由 Jasper 报告生成的未闭合锚标记。这个标签没有正确关闭的事实弄乱了我的报告的格式，因为 IE 正在超链接整个报告表。我没有使用这个锚标签，所以如果我能阻止 Jasper 生成它，那将解决我的问题。

顺便说一句，这个问题只发生在 IE 中，在 Firefox 中一切正常，因为锚标记已正确关闭。

在此先感谢，唐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T18:16:56.610

我接受了 Phil 的建议并深入研究了 Jasper 源代码。我已经解决了问题并将其提交给项目。[此处](http://jasperforge.org/tracker/index.php?func=detail&aid=3180&group_id=102&atid=611&action=edit)提供了原因和解决方法的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T16:47:55.853

那是奇怪的代码，`<br />`标签是 XHTML 风格的，而未闭合的`a`标签是很好的旧 HTML，就像大写的标签名称一样。如果您使用纯 HTML 标题/内容类型提供此类页面，那么 IE 可能会很高兴。

当您写 Firefox 关闭标签时，我想您的意思是它没有正确地将超链接跨度扩展到块标签上。请注意，当您将页面保存到磁盘时，FF 的视图源可以显示不存在的结束标记！

坦率地说，我不知道你是否可以通过一些配置摆脱这些锚。如果没有人提供真正的解决方案，也许您可​​以下载 Jasper 的源代码并在其中搜索 JR_PAGE_ANCHOR，查看生成它的代码是否是条件驱动的。

或者，如果可以，您可以对生成的代码进行后处理。

# lucene - 用于记录/分析查询的 Solr 过滤器

> ID：219024
> 
> 赞同：2
> 
> 时间：2008-10-20T16:19:59.577
> 
> 标签：lucene, solr

我正在使用 Solr，并希望能够将查询/令牌记录到数据库中，以便对营销和建议的搜索功能进行分析。

我猜测 Lucene 过滤器将是一个很好的方法，可能会在查询过滤器链中为给定的字段类型放置一个过滤器，该字段类型记录到指定的数据库。我想知道最好的方法来减少对 Solr 响应时间的影响。

如果有人过去这样做并愿意分享他们的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-28T18:59:20.157

也许最简单的方法是只分析访问日志，并将该数据消耗到报告中。这可以离线完成，并且不会影响响应时间。

# iphone - 如何让 iPhone SpringBoard 为一个应用程序包显示两个或多个图标？

> ID：219037
> 
> 赞同：3
> 
> 时间：2008-10-20T16:22:45.903
> 
> 标签：iphone, bundle, springboard

似乎`Info.plist`文件能够通过`UIRoleInfo`密钥为同一个应用程序包声明不同的角色。SpringBoard 可以在安装应用程序后识别这些角色，并可能为每个应用程序角色显示单独的图标。

例如，iPhone 显示`MobileSlideShow.app`为 2 个不同的程序：`Photos`和`Camera`.

不幸的是，目前没有关于该主题的官方 Apple 文档。有人会建议如何在自定义应用程序中组织相同的行为吗？

此功能将在 Enterprise 产品中用于临时分发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:57:31.667

这不是受支持的功能，因此如果您这样做，您可能很难让您的应用程序通过审批流程。我不建议使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T00:59:16.127

您是否尝试过它是否有效？如果它不起作用，您可以创建第二个应用程序，它只启动第一个应用程序，使用自定义 URL 方案。第一个应用程序可以识别何时使用该 URL 启动它。这并不理想，因为您将看到第二个应用程序启动和退出（尽管它应该非常快）。

# sql - 关于 LEFT JOIN SQL 查询的 WHERE 帮助

> ID：219046
> 
> 赞同：24
> 
> 时间：2008-10-20T16:25:49.003
> 
> 标签：sql, join, left-join

我正在尝试构建一个查询，该查询将包含一个指示用户是否已下载文档的列。我有一个名为 HasDownloaded 的表，其中包含以下列：id、documentID、memberID。找出用户是否下载了*特定*文档很容易；但我需要生成一个查询，结果如下所示：

```
name              id
----------------------
abc               NULL
bbb               2
ccc               53
ddd               NULL
eee               13 
```

ID 并不重要。我感兴趣的是文档是否已下载（是否为 NULL）。

这是我的查询：

```
SELECT Documents.name, HasDownloaded.id FROM Documents
LEFT JOIN HasDownloaded ON HasDownloaded.documentID = Documents.id
WHERE HasDownloaded.memberID = @memberID 
```

问题是，只有在 HasDownloaded 表中存在指定用户的条目时才会返回值。我想保持简单，并且在 HasDownloaded 中*只有*已下载文档的条目。因此，如果用户 1 下载了 abc、bbb 和 ccc，我仍然希望 ddd 和 eee 显示在结果表中，只是 id 为 NULL。但是 WHERE 子句只为我提供了哪些条目存在的值。

我不是 SQL 专家 - 有没有一个操作员可以在这里给我我想要的东西？我应该采取不同的方法吗？或者这是不可能的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-10-20T16:27:46.473

将 WHERE 子句中的条件移动到连接条件。

```
SELECT Documents.name, HasDownloaded.id FROM Documents
LEFT JOIN HasDownloaded ON HasDownloaded.documentID = Documents.id 
  AND HasDownloaded.memberID = @memberID 
```

每当您想在 WHERE 子句中引用左连接表时，这是必要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T16:58:10.107

```
WHERE HasDownloaded.memberId IS NULL OR HasDownloaded.memberId = @memberId 
```

将是这样做的正常方法。有些人会将其缩短为：

```
WHERE COALESCE(HasDownloaded.memberId, @memberId) = @memberId 
```

You can, as Matt B. shows, do it in your JOIN condition - but I think that's much more likely to confuse folks. If you don't understand WHY moving it to the JOIN clause works, then I'd strongly suggest staying away from it.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T17:46:11.743

@Mark: I understand why the JOIN syntax works, but thanks for the warning. I do think your suggestion is more intuitive. I was curious to see which was more efficient. So I ran a quick test (this was rather simplistic, I'm afraid, over only 14 rows and 10 trials):

In the JOIN condition:

```
AND HasDownloaded.memberID = @memberID 
```

*   Client processing time: 4.6
*   Total execution time: 35.5
*   Wait time on server replies: 30.9

In the WHERE clause:

```
WHERE HasDownloaded.memberId IS NULL OR HasDownloaded.memberId = @memberId 
```

*   Client processing time: 7.7
*   Total execution time: 27.7
*   Wait time on server replies: 22.0

It looks like the WHERE clause is ever-so-slightly more efficient. Interesting! Once again, thanks to both of you for your help.

# c# - .NET 2.0 还是 3.5？

> ID：219051
> 
> 赞同：15
> 
> 时间：2008-10-20T16:27:02.760
> 
> 标签：c#, .net, linq, vb6, vb6-migration

我们的客户使用我们软件的 vb6 版本。

我们正在将它们升级为用 C# 编写的 .NET 应用程序...

使用 .net 2.0 的体积是否比 .net 3.5 少？

我对体积更小的定义是：更小的尺寸、更短的安装时间等。

无论如何，他们中的大多数可能已经有了 2.0。

我只是问，因为我想在 3.5 中利用 LINQ。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-10-20T16:31:06.793

For taking advantage of LINQ, you need 3.5 (unless you want to use [LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx) with 2.0).

For a smaller installer, .Net 3.5 **Sp1** has a new feature called "[Client Profile](http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx)".

The .NET Framework Client Profile setup contains just those assemblies and files in the .NET Framework that are typically used for client application scenarios. For example: it includes Windows Forms, WPF, and WCF. It does not include ASP.NET and those libraries and components used primarily for server scenarios. We expect this setup package to be about **26MB** in size, and it can be downloaded and installed much quicker than the full .NET Framework setup package.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-20T16:29:21.227

1.  安装 .NET 3.5 只是为了节省几 Mb 真的比使用 LINQ 和其他 .NET 3.5 功能大幅提高生产力更重要吗？

2.  为什么要在技术上落后？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T16:29:38.247

.Net 3.5 运行时约为 50Mb。2.0 运行时约为 23Mb。

但是，如果您控制部署或安装，那真的不应该成为问题。对于“客户”与“客户”而言尤其如此，客户一词涉及持续的个人关系。如果有的话，给他们寄一张CD。那么任何低于 700Mb 的东西都是一样的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T16:30:50.490

Check out LINQBridge: [http://www.albahari.com/nutshell/linqbridge.aspx](http://www.albahari.com/nutshell/linqbridge.aspx)

Adding LINQ support to .net 2 (.net 3.5 still uses CLR 2.0).

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-20T16:28:32.710

.NET 3.5 是 .NET 2.0 + 更多的库和扩展，所以是的，安装更大。然而，在我看来，额外的体积非常值得，因为它给了你额外的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T16:45:06.360

If it's a VB6 app, you should check which Windows versions the app is currently used on, and select the .Net version accordingly. AFAIK 3.5 does not run on W2K.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-20T16:28:29.107

如果您想利用 LINQ，请选择 3.5！我发现自己使用它时没有更多的“大容量”，但除非你想使用 LINQ，否则两者都可以。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T17:18:55.120

Keep in mind that certain OSes (Windows 2000 Server) won't let you install .NET 3.0 or 3.5, so you may have to stick with 2.0 for that reason.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-20T16:29:10.167

我建议你直接使用 Visual Studio 2008 和 .net 3.5 sp1，2.0 是 3.5 的基础，你可以轻松地开始使用 2.0，然后开始使用 3.5 的功能。

此外，3.5 SP1 还对 2.0 框架进行了一些调整，这很不错。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T16:32:20.113

I suggest you to go directly to 3.5 because you will be less far away (in the future ... in 3-5 years) to change to other version of framework. If in 5 year .Net is at version 5, the jump will be smaller to do. So, VB6 to 3.5 is what I suggest you.

The size of the framework is not very high, less than 60 megs... not a big deal now I think.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T16:43:12.867

Also note, depending were you install the .NET framework it might be irrelevant how much extra bulk there is. The .NET Framework installs are relatively small in modern terms.

As for LINQ, it will save you a lot of time and effort, and offers a quick way to get at data. However it also depends on the clients the application will be distributed out to.

I'd say at that, go with 3.5 unless there is another major roadblock on the clients for whatever reason.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-20T16:46:28.057

As others have pointed out, the .NET 3.5 install is longer and larger than .NET 2.0\. Keep in mind that .NET 3.0 and .NET 3.5 are both extensions on top of the .NET 2.0 CLR.

I would still say upgrade from VB6 directly to .NET 3.5 (actually .NET 3.5 SP1) and VS2008, as long as your client operating systems support that version of the Framework (otherwise you will need to choose the lowest common Framework version, which very well may be .NET 2.0). You will save yourself a lot of time/effort in the long run.

# java - 在 Struts2 中使用 JSON RPC 时从未调用过 Java 方法

> ID：219055
> 
> 赞同：2
> 
> 时间：2008-10-20T16:28:23.070
> 
> 标签：java, javascript, json, struts2, json-rpc

我正在尝试使以前的开发人员编写的一些代码正常工作。是的，他现在离开了公司。:-(

我有一个从 JS 代码进行的 JSON RPC 调用。JS 运行良好，回调方法返回一个对象（不是错误对象）。

但是 Java 类上的方法永远不会受到影响。smd 方法确实受到了打击。

* * *

```
public String smd()
{
   return SUCCESS; // break point reaches here
}

@SMDMethod
public void updateRowValueForField(String key, String value, String fieldname)
{
   // We never get into this method.
} 
```

* * *

```
<package name="EntryBarRPC" namespace="/" extends="star-default">

    <action name="ebToggleSelection" class="eboggleSelectionAction" method="smd">
        <interceptor-ref name="jsonStack">
            <param name="enableSMD">true</param>
        </interceptor-ref>
        <result type="json">
            <param name="enableSMD">true</param>
        </result>
    </action>
</package> 
```

* * *

我不知道为什么，或者我错过了什么。我一遍又一遍地阅读[JSON 插件页面。](http://cwiki.apache.org/S2PLUGINS/json-plugin.html)

我想我只需要另一双眼睛。

注意：Tomcat 控制台中没有错误，没有 JS 错误。

有人有任何线索吗？干杯杰夫波特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T16:42:32.510

You forgot to include the javascript code. From the example:

```
<s:url id="smdUrl" namespace="/nodecorate" action="SMDAction" />
<script type="text/javascript">
    //load dojo RPC
    dojo.require("dojo.rpc.*");

    //create service object(proxy) using SMD (generated by the json result)
    var service = new dojo.rpc.JsonService("${smdUrl}");

    //function called when remote method returns
    var callback = function(bean) {
        alert("Price for " + bean.type + " is " + bean.price);
    };

    //parameter
    var bean = {type: "Mocca"};

    //execute remote method
    var defered = service.doSomething(bean, 5);

    //attach callback to defered object
    defered.addCallback(callback);
</script> 
```

Are you sure you call service.updateRowValueForField(key, value, fieldname) and not something different?

Further, your method returns a void (e.g. doesn't return anything). What did you expect to get?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-22T11:37:14.093

New version fixes my problems.

[Google JSON plugin](http://code.google.com/p/jsonplugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T16:40:26.290

I'm guessing that you need to update the `smd()` method to actually call `updateRowValueForField()` rather than simply return immediately. Looks like the previous developer never actually hooked up the methods.

# list - 您在现实世界中处理的一些常见编程任务是什么？

> ID：219069
> 
> 赞同：13
> 
> 时间：2008-10-20T16:30:53.610
> 
> 标签：list

我正在努力列出所有常规开发人员在现实世界应用程序开发中使用的所有常见编程任务。您在大多数常规 LOB 应用程序中重复使用的代码。即使它不那么常见，并且您认为将其添加到列表中是相当值得的，请这样做。

让我从：

1.  从磁盘读取文本文件，将其加载到字符串中
2.  将字符串保存到文本文件
3.  将业务对象序列化为 XML
4.  将 XML 从字符串和/或磁盘反序列化为业务对象
5.  根据 XSD 架构验证 XML 字符串

现在轮到你了。

**更新**：让我说一下为什么我想要这个列表。一旦我有相当数量的任务，我想为这些任务中的每一个创建一个非常有效的代码的方便参考。因为每次我编写代码来完成其中一项任务时，我都可以简单地参考我的代码参考。我不希望我的代码在多个地方都不同。我的第 2 步是为所有这些任务编写高效而优雅的代码。

我想我应该把它写成一篇博文。这是一个错误的地方吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-20T17:07:09.717

我对这个问题投了赞成票，以使您在否决的代表击中出局；我不是特别喜欢列出问题，但有些问题确实有助于培养更好的程序员，我认为这就是其中之一。

有个名叫 Dave 的人（我看我找不到是姓氏）写了一个很好的想法，叫做[CodeKata](http://codekata.pragprog.com/2007/01/code_kata_backg.html)。它是关于各种练习，可帮助您更好地理解编程背后的原理和理论。

像这样的东西在那里被覆盖。

*   [超市定价](http://codekata.pragprog.com/2007/01/code_kata_one_s.html)
*   [数据整理](http://codekata.pragprog.com/2007/01/kata_four_data_.html)
*   [审查](http://codekata.pragprog.com/2007/01/kata_seven_howd.html)

这也是我自己的项目清单。

*   学习如何使用数组（尤其是如何减轻它们的缺点）
*   尽快学习正则表达式！*如果您甚至可以成为正则表达式助手，那么您将遥遥领先*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T16:37:46.920

*   数据库访问，CRUD
*   SOAP/网络服务
*   排序、搜索和以其他方式操作对象集合

这些是首先想到的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-23T18:52:28.097

提示用户输入。获取输入。验证类型：是数字吗？是约会吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T22:16:20.823

**编写测试**——你应该为任何你不想失败的东西编写测试，所以这应该是最常见的任务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-20T17:40:13.847

从数据库获取数据到客户端，允许用户编辑（添加/更新/删除）数据，将数据返回到数据库。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T17:46:17.920

当用户访问页面/程序的受限部分时验证用户身份

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-21T03:37:55.590

1.  调试
2.  通过开发人员的监视器、IDE 或电子邮件显示调试输出。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-23T02:02:48.213

获取/更新数据到数据库。表单验证

两者都是非常无聊的任务，但我想说它们占用了我工作中大约 50% 或更多的编码时间。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-23T20:49:23.290

获取电子表格（csv 或 xls），对其进行解析、验证、存储在数据库中。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-29T15:50:17.373

Rosettacode 以多种语言编制了一份常见编程任务及其解决方案的列表。您可能想在以下位置查看：

[http://rosettacode.org/wiki/Category:Programming_Tasks](http://rosettacode.org/wiki/Category:Programming_Tasks)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-26T04:40:34.340

我是一名网络开发人员，所以对这些持保留态度。

对于一些常见的任务/主题/概念，我喜欢用我精通的任何编程语言轻松实现，以及到目前为止我必须使用它们的频率，请考虑以下项目：（
*低、中、高）需要的频率*

*   **使用 API 或 Web 服务**(REST/SOAP) **（高）**
*   **创建 Web 服务器** **（低）**
*   **创建/维护 REST API**（与数据库交互的 crud 操作）**（高）**
*   **文件 I/O** - 处理 CSV、电子表格等**（中）**
*   **IPC（进程间通信）/进程/守护进程**- 产生子进程，操纵/控制子进程，重定向子进程的标准输入、标准输出和/或标准错误，处理中断**（低）**
*   **TCP 套接字或 Websockets** - 服务器套接字和客户端套接字**（低）**
*   **线程**- 创建和运行新线程、线程操作、同步、线程间通信、死锁（如果适用于您选择的语言）**（低）**
*   **设计模式**（与您选择的语言相关）**（高）**
*   **自动化测试**- 单元/功能/集成/端到端**（高）**
*   **Cron 作业**- 创建和调度**（高）**

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-20T17:23:38.573

清理数据：获取格式错误的无格式数据并将其转换为经过验证的定义明确的格式。通常输入数据将无法验证；您必须能够拒绝它并准确指出错误的位置。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-20T22:11:35.013

*   以编程方式将网页抓取到字符串中（如屏幕抓取）

PS：我会继续在这里添加，因为我会问更多的人并找出答案

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-21T02:57:11.757

重写一个包含大量硬编码数据的 python 脚本，而不是从设计用于更一般用途的单独文本文件中读取数据。然后尝试获得与旧的硬编码程序完全相同的结果......请祝我好运！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-23T20:41:47.487

**为 NASA JPL 原型自主漫游车中使用的系统制定导航算法。**

哦，我多么希望那是真的。实际上，我通常只是清理数据并将其移动到数据库中，或者开发 SSIS 包来执行各种预定的工作，例如读取 XML、格式化、写入 Excel 文件并通过电子邮件发送。其他时候我只是在一个 CRUD 网站上工作——显示来自数据库的信息，从用户那里接收数据，存储回数据库，并使用 CSS/HTML 来使网页看起来不那么糟糕（我是一个比 web 更好的算法开发人员开发商）。

# windows - 如何在没有 Internet 连接的情况下在 ActivePerl 中安装软件包？

> ID：219079
> 
> 赞同：9
> 
> 时间：2008-10-20T16:34:51.933
> 
> 标签：windows, perl, activeperl

在 ActivePerl 中，“ppm”从 Internet 安装软件包，“ppm install x.ppd”从 ppd 文件安装，但大多数 CPAN 软件包以*.tar.gz形式分发*

如何为没有 Internet 连接的运行 ActivePerl 的机器提供模块？（“make”可能不可用。）

更新：可以使用 Internet 连接下载文件并使用 USB 密钥等将它们传输到机器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T17:16:44.487

我确信有一种更简单的方法，但我只是检查了一个 ppd 文件，它只是一个 xml 文件......

因此，如果您想在没有连接的电脑上手动安装，您应该能够执行以下操作：

打开文件，例如

```
http://trouchelle.com/ppm/Acme-LOLCAT.ppd
```

并下载 CODEBASE 标记中指向的相应文件，在这种情况下：

```
http://trouchelle.com/ppm/MSWin32-x86-multi-thread-5.8/Acme-LOLCAT-0.0.4.zip
```

将两个文件都放在没有连接的电脑上，CODEBASE HREF="xxx" 应该指向 zip 文件（通过将文件放在相同的相对子文件夹中或通过修复 href 使其指向磁盘上的 zip 文件）

使用从 ppd 安装

```
ppm install x.ppd 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T16:43:06.317

请参阅：[http ://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html#zip_files](http://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html#zip_files)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-21T00:07:57.073

我知道这不是您问题的答案，但如果可能，请考虑使用[Strawberry Perl](http://strawberryperl.com/)，这是一种适用于 Windows 的 Perl 的 CPAN 友好发行版。它有一个整洁的安装程序，附带 make、一个编译器和一个正确配置的 CPAN shell，一切就绪。

然后你可以使用像[minicpan](http://search.cpan.org/dist/CPAN-Mini/bin/minicpan)这样的东西来创建一个离线 CPAN 存储库。

不要成为二等 Perl 公民而不得不等待其他人为您编译 ppm，直接从 CPAN 消防软管中喝水！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T09:37:48.833

由于这是一个非常常见的情况，我在这里完成答案：

就 ActivePerl 5.14 而言，您还可以为您的平台下载“.tar.gz”文件，或下载所谓的“.ppmx”文件（相同格式）。保存文件并稍后在离线时调用 ppm 安装程序：

```
ppm.bat install MIME-Lite-3.028.ppmx 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-21T08:50:25.070

您可能[对 Win32 安装模块指南](http://www.perlmonks.org/?node_id=434813)感兴趣。它有点过时（它谈论命令行 ppm），但原理保持不变。

# .net - 任何人都可以建议一个抽象基类来防止 .NET 2.0+ 中的 XSRF

> ID：219089
> 
> 赞同：0
> 
> 时间：2008-10-20T16:37:22.520
> 
> 标签：.net, csrf

我正在寻找一个抽象基类或母版页解决方案，以防止任何人同时使用令牌和 ttl 进行 XSRF。谁能指出我正确的方向？

编辑：理想的解决方案将利用默认会员提供者发送给客户端的 cookie。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T20:49:44.837

您可以在母版页上放置一个隐藏字段，在母版页的 Page_Load 事件期间生成一个密钥，将密钥分配为隐藏字段的值，然后将该值添加到您的 cookie。然后你只需比较这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-23T17:58:51.747

我启动了一个母版页可以继承的基类。我选择使用视图状态而不是隐藏输入，因为使用这种方法我不需要担心页面/等上的多个表单。与简单的“查看源代码”相比，找到这个值也需要更多的工作

以下是我试图纠正的一些问题。

*   当我刷新页面（不是回发）时，视图状态和隐藏输入（当我开始这种方法时）值不会像 cookie 那样更新

*   当我导航到我的应用程序内的新页面时，新页面在没有有效视图状态的情况下开始，因此我的比较在这种情况下失败......

以下是我正在进行的工作；）

```
 public class PreventXSRF : MasterPage
 {

     HttpCookie mCookie = null;
     FormsAuthenticationTicket mPreviousAuthenticationTicket = null;
     FormsAuthenticationTicket mNewAuthenticationTicket = null;

     public bool IsXSRF()
     {
         if ((Request.Cookies(".ASPXAUTH") != null)) {
             mCookie = Request.Cookies(".ASPXAUTH");
             //get the current auth ticket so we can verify the token (userData) matches the value of the hidden input
             mPreviousAuthenticationTicket = FormsAuthentication.Decrypt(mCookie.Value);
         }
         else {
             ///'the membership cookie does not exist so this is not an authenticated user
             return true;
         }

         //** ** **
         // verify the cookie value matches the viewstate value
         // if it does then verify the ttl is valid
         //** ** **

         if ((mPreviousAuthenticationTicket != null)) {
             if (mPreviousAuthenticationTicket.UserData == Token) {
                 if ((TTL != null)) {
                     if (Convert.ToDateTime(TTL).AddMinutes(5) < DateTime.Now()) {
                         ///'the ttl has expired so this is not a valid form submit
                         return true;
                     }
                 }
                 else {
                     //** ** **
                     // ?? what about a hack that could exploit this when a user tries to BF
                     // a value for the token and simply keeps the viewstate for ttl null ??
                     //** ** **
                 }
             }
             else {
                 //** ** **
                 // ?? I hit this when I navigate to another page in the app (GET)
                 // in this event, it was hit because the cookie has a valid token
                 // but the page is new so viewstate is not valid ... ??
                 //** ** **
                 ///'the cookie value does not match the form so this is not a valid form submit
                 return true;
             }
         }
         else {
             ///'the authentication ticket does not exist so this is not a valid form submit
             return true;
         }

         //** ** **
         // if the code gets this far the form submit is 99.9% valid, so now we gen a new token
         // and set this new value on the auth cookie and reset the viewstate value
         // so it matches the cookie
         //** ** **

         //gen a new ttl and set the viewstate value
         TTL = GenerateTTL();
         //gen a new token and set the viewstate value
         Token = GenerateToken();

         if ((mPreviousAuthenticationTicket != null)) {
             //** ** **
             // create a new authticket using the current values + a custom token
             // we are forced to do this because the current cookie is read-only
             // ** ** **
             mNewAuthenticationTicket = new FormsAuthenticationTicket(mPreviousAuthenticationTicket.Version, mPreviousAuthenticationTicket.Name, mPreviousAuthenticationTicket.IssueDate, mPreviousAuthenticationTicket.Expiration, mPreviousAuthenticationTicket.IsPersistent, Token);
         }
         else {
             ///'TODO: if no auth ticket exists we need to return as this won't be valid
         }

         if ((mCookie != null)) {
             //** ** **
             // take the new auth ticket with the userdata set to the new token value
             // encrypt this, update the cookie, and finally apply this to the users machine
             //** ** **
             mCookie.Value = FormsAuthentication.Encrypt(mNewAuthenticationTicket);
             Response.Cookies.Add(mCookie);
         }
         else {
             ///'TODO: if no cookie exists we need to return as this won't be valid
         }

         //if we got this far without a return true, it must not be a xsrf exploit so return false
         return false;
     }

     private string GenerateToken()
     {
         RNGCryptoServiceProvider random = new RNGCryptoServiceProvider();
         byte[] randBytes = new byte[32];
         random.GetNonZeroBytes(randBytes);
         return Convert.ToBase64String(randBytes);
     }

     private string GenerateTTL()
     {
         return DateTime.Now();
     }

     private string TTL {
         get { return ViewState("TTL"); }
         set { ViewState("TTL") = value; }
     }

     private string Token {
         get { return ViewState("Token"); }
         set { ViewState("Token") = value; }
     }

 } 
```

# php - PHP 4 中的新 DOMDocument()

> ID：219093
> 
> 赞同：1
> 
> 时间：2008-10-20T16:38:05.563
> 
> 标签：php, sql, mysql, xml, phpmyadmin

我在 PHP 5 中使用 DOMDocument() 制作了一个应用程序。

问题是我的服务器使用 PHP 4 并且 DOM 对象无法识别。我能做些什么？

我可以下载任何类型的软件并将其放入我的服务器并使用包含吗？哪一个？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T16:43:05.507

您可以在 PHP4 中使用 DOM XML 扩展：http: [//de.php.net/manual/en/book.domxml.php](http://de.php.net/manual/en/book.domxml.php)。

请注意，API 与[PHP5 DOM 扩展](http://de.php.net/manual/en/book.dom.php)不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T16:41:36.740

PHP 5

让您的服务器管理员升级您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T16:43:16.877

我强烈建议您尝试让您的 ISP 使用[GOPHP5](http://www.gophp5.org/)。

# .net - 如何设置任务栏分组图标

> ID：219096
> 
> 赞同：7
> 
> 时间：2008-10-20T16:41:08.083
> 
> 标签：.net, winforms, icons, grouping, taskbar

当我的应用程序打开太多窗口时，任务栏会将它们组合成一个按钮。每个窗口都有自己的图标，但分组图标是默认的“未知”类图标。

如何设置分组图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T16:50:17.813

任务栏组图标可以在每个应用程序的基础上在注册表中设置。

对于资源管理器，这将在这里：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Applications\explorer.exe]
"TaskbarGroupIcon"="C:\Windows\Explorer.exe,13" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T17:50:43.730

[Raymond Chen](http://blogs.msdn.com/oldnewthing/archive/2004/04/08/109775.aspx#124579)的这条评论表明该图标来自 exe 本身，我建议使用类似[eXeScope](http://hp.vector.co.jp/authors/VA003525/Eindex.htm)的东西来确保您的应用程序图标被正确嵌入，并可能将它与其他显示正确行为的 exe 进行比较以进行增量调试.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-16T11:39:52.480

应用任务栏组图标设置有两种方式

1.  通过项目属性：

    单击解决方案资源管理器中的项目→右键单击→选择属性→选择应用程序选项卡→转到资源并更改默认图标并选择新图标并保存并构建。

2.  通过注册表（动态）：

    您必须在“HKEY_CURRENT_USER\SOFTWARE\Classes\Applications\<>”下创建 TaskbarGroupIcon 键和值是“带有路径的图标文件”如果上述键不存在，则必须创建

    ```
    RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(
       "Software\\Classes\\Applications\temp.exe",true); 
    RegKey.SetValue("TaskbarGroupIcon", "c:\temp.ico", RegistryValueKind.String); 
    ```

# asp.net - 网站的 HTML 色轮控制

> ID：219097
> 
> 赞同：1
> 
> 时间：2008-10-20T16:41:27.897
> 
> 标签：asp.net, html, controls, components, color-picker

是否有一个 HTML 色轮可以放入我的网站，当用户点击它时会返回颜色值？

会自己做一个，但不想“重新发明轮子”

搞笑（双关语？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T16:42:09.533

查看[什么是好的 JavaScript 插件颜色选择器？](https://stackoverflow.com/questions/77431/whats-a-good-javascript-plugin-color-picker)

# datetime - 在 Groovy 中检查两个日期是否为同一日历日的最佳方法？

> ID：219109
> 
> 赞同：5
> 
> 时间：2008-10-20T16:43:56.050
> 
> 标签：datetime, groovy

显然我可以创建一个`Calendar`带有日期的对象并`get(DAY)`在其上使用，但是知道 Groovy，我猜有一种更简单、更快捷的方法我只是不知道？

**回答**

```
(date1..date2).size() == 1 // true if two dates are on same calendar day 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-20T16:51:53.507

快速打开 Groovy In Action 书，发现以下示例应该有所帮助：

```
def today = new Date()
def yesterday = today-1
assert (yesterday..today).size() == 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T15:49:40.183

比当前的最佳答案更短且更具可读性：

```
date1 - date2 == 0 //true if two dates are on same calendar day 
```

# python - Python Web 框架、WSGI 和 CGI 如何组合在一起

> ID：219110
> 
> 赞同：152
> 
> 时间：2008-10-20T16:43:57.907
> 
> 标签：python, apache, cgi, wsgi

我有一个[Bluehost](http://en.wikipedia.org/wiki/Bluehost)帐户，我可以在其中将 Python 脚本作为 CGI 运行。我想这是最简单的 CGI，因为要运行，我必须在 中定义以下内容`.htaccess`：

```
Options +ExecCGI
AddType text/html py
AddHandler cgi-script .py 
```

现在，每当我使用 Python 进行 Web 编程时，我都会听到很多关于 WSGI 以及大多数框架如何使用它的信息。但是我只是不明白这一切是如何结合在一起的，尤其是当我的 Web 服务器被提供时（Apache 在主机的机器上运行）而不是我真正可以玩的东西（除了定义`.htaccess`命令）。

[WSGI](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)、CGI 和框架是如何连接的？如果我想在我的基本 CGI 配置上运行 Web 框架（例如[web.py](http://webpy.org/)或[CherryPy ），我需要知道、安装和做什么？](http://en.wikipedia.org/wiki/CherryPy)如何安装 WSGI 支持？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2009-02-06T13:04:12.723

**How WSGI, CGI, and the frameworks are all connected?**

Apache listens on port 80\. It gets an HTTP request. It parses the request to find a way to respond. Apache has a LOT of choices for responding. One way to respond is to use CGI to run a script. Another way to respond is to simply serve a file.

In the case of CGI, Apache prepares an environment and invokes the script through the CGI protocol. This is a standard Unix Fork/Exec situation -- the CGI subprocess inherits an OS environment including the socket and stdout. The CGI subprocess writes a response, which goes back to Apache; Apache sends this response to the browser.

CGI is primitive and annoying. Mostly because it forks a subprocess for every request, and subprocess must exit or close stdout and stderr to signify end of response.

WSGI is an interface that is based on the CGI design pattern. It is not necessarily CGI -- it does not have to fork a subprocess for each request. It can be CGI, but it doesn't have to be.

WSGI adds to the CGI design pattern in several important ways. It parses the HTTP Request Headers for you and adds these to the environment. It supplies any POST-oriented input as a file-like object in the environment. It also provides you a function that will formulate the response, saving you from a lot of formatting details.

**What do I need to know / install / do if I want to run a web framework (say web.py or cherrypy) on my basic CGI configuration?**

Recall that forking a subprocess is expensive. There are two ways to work around this.

1.  **Embedded** `mod_wsgi` or `mod_python` embeds Python inside Apache; no process is forked. Apache runs the Django application directly.

2.  **Daemon** `mod_wsgi` or `mod_fastcgi` allows Apache to interact with a separate daemon (or "long-running process"), using the WSGI protocol. You start your long-running Django process, then you configure Apache's mod_fastcgi to communicate with this process.

Note that `mod_wsgi` can work in either mode: embedded or daemon.

When you read up on mod_fastcgi, you'll see that Django uses [flup](http://pypi.python.org/pypi/flup/) to create a WSGI-compatible interface from the information provided by mod_fastcgi. The pipeline works like this.

```
Apache -> mod_fastcgi -> FLUP (via FastCGI protocol) -> Django (via WSGI protocol) 
```

Django has several "django.core.handlers" for the various interfaces.

For mod_fastcgi, Django provides a `manage.py runfcgi` that integrates FLUP and the handler.

For mod_wsgi, there's a core handler for this.

**How to install WSGI support?**

Follow these instructions.

[https://code.google.com/archive/p/modwsgi/wikis/IntegrationWithDjango.wiki](https://code.google.com/archive/p/modwsgi/wikis/IntegrationWithDjango.wiki)

For background see this

[http://docs.djangoproject.com/en/dev/howto/deployment/#howto-deployment-index](http://docs.djangoproject.com/en/dev/howto/deployment/#howto-deployment-index)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2009-02-03T00:04:46.187

我认为[Florian 的回答](https://stackoverflow.com/questions/219110/how-python-web-frameworks-wsgi-and-cgi-fit-together/219124#219124)回答了您关于“什么是 WSGI”的问题，特别是如果您阅读[了 PEP](http://www.python.org/dev/peps/pep-0333)。

至于你最后提出的问题：

WSGI、CGI、FastCGI 等都是 Web 服务器*运行代码*并传递生成的动态内容的协议。将此与静态 Web 服务进行比较，其中纯 HTML 文件基本上按原样交付给客户端。

**CGI, FastCGI and SCGI are language agnostic.** You can write CGI scripts in Perl, Python, C, bash, whatever. CGI defines *which* executable will be called, based on the URL, and *how* it will be called: the arguments and environment. It also defines how the return value should be passed back to the web server once your executable is finished. The variations are basically optimisations to be able to handle more requests, reduce latency and so on; the basic concept is the same.

**WSGI is Python only.** Rather than a language agnostic protocol, a standard function signature is defined:

```
def simple_app(environ, start_response):
    """Simplest possible application object"""
    status = '200 OK'
    response_headers = [('Content-type','text/plain')]
    start_response(status, response_headers)
    return ['Hello world!\n'] 
```

That is a complete (if limited) WSGI application. A web server with WSGI support (such as Apache with mod_wsgi) can invoke this function whenever a request arrives.

The reason this is so great is that we can avoid the messy step of converting from a HTTP GET/POST to CGI to Python, and back again on the way out. It's a much more direct, clean and efficient linkage.

It also makes it much easier to have long-running frameworks running behind web servers, if all that needs to be done for a request is a function call. With plain CGI, you'd have to [start your whole framework up](http://tools.cherrypy.org/wiki/RunAsCGI) for each individual request.

To have WSGI support, you'll need to have installed a WSGI module (like [mod_wsgi](http://code.google.com/p/modwsgi/)), or use a web server with WSGI baked in (like [CherryPy](http://tools.cherrypy.org/)). If neither of those are possible, you *could* use the CGI-WSGI bridge given in the PEP.

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-10-20T16:49:17.613

您可以[在 CGI 上运行 WSGI，如 Pep333 演示](http://www.python.org/dev/peps/pep-0333/#the-server-gateway-side)的示例。然而，每次有请求时，都会启动一个新的 Python 解释器，并且需要构建整个上下文（数据库连接等），这都需要时间。

如果您想运行 WSGI，最好的办法是您的主机安装[mod_wsgi](http://code.google.com/p/modwsgi/)并进行适当的配置以将控制权交给您的应用程序。

[Flup](http://trac.saddi.com/flup)是另一种使用 WSGI 运行任何可以说[FCGI](http://www.fastcgi.com/drupal/)、[SCGI](http://www.mems-exchange.org/software/scgi/)或 AJP 的网络服务器的方式。根据我的经验，只有 FCGI 真正有效，并且可以通过[mod_fastcgi](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html)或者您可以使用[mod_proxy_fcgi](http://mproxyfcgi.sourceforge.net/)运行单独的 Python 守护程序在 Apache 中使用它。

[WSGI](http://wsgi.org)是一个很像 CGI 的协议，它定义了一组规则如何 webserver 和 Python 代码可以交互，它被定义为[Pep333](http://www.python.org/dev/peps/pep-0333)。这使得许多不同的网络服务器可以使用许多不同的框架和应用程序使用相同的应用程序协议成为可能。这是非常有益的，并且非常有用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-03-29T20:04:51.330

If you are unclear on all the terms in this space, and lets face it, its a confusing acronym-laden one, there's also a good background reader in the form of an official python HOWTO which discusses CGI vs. FastCGI vs. WSGI and so on: [http://docs.python.org/howto/webservers.html](http://docs.python.org/howto/webservers.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-05T21:48:33.680

It's a simple abstraction layer for Python, akin to what the Servlet spec is for Java. Whereas CGI is really low level and just dumps stuff into the process environment and standard in/out, the above two specs model the http request and response as constructs in the language. My impression however is that in Python folks have not quite settled on de-facto implementations so you have a mix of reference implementations, and other utility-type libraries that provide other things along with WSGI support (e.g. Paste). Of course I could be wrong, I'm a newcomer to Python. The "web scripting" community is coming at the problem from a different direction (shared hosting, CGI legacy, privilege separation concerns) than Java folks had the luxury of starting with (running a single enterprise container in a dedicated environment against statically compiled and deployed code).

# keyboard - x86 程序集上的保护模式键盘访问

> ID：219120
> 
> 赞同：15
> 
> 时间：2008-10-20T16:48:22.203
> 
> 标签：keyboard, x86, kernel, osdev, protected-mode

我正在为我正在开发的一个非常基本的内核处理键盘输入，但我完全被卡住了。我似乎无法在网上找到任何可以显示我需要知道的信息的信息。

我的内核现在在保护模式下运行，所以我不能使用实模式键盘例程而不跳转到实模式并返回，这是我试图避免的。我希望能够从保护模式访问我的键盘。有谁知道如何做到这一点？到目前为止，我发现的唯一一件事是它涉及直接使用输入/输出端口与控制器对话，但除此之外，我感到很困惑。当然，这不是经常出现的事情。通常，Assembly 教程假定您在下面运行操作系统。

我对 x86 程序集非常陌生，所以我只是在寻找一些很好的资源来使用受保护模式下的标准硬件。我正在使用 NASM 编译程序集源代码，并将其链接到使用 DJGPP 编译的 C 源代码。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-20T16:59:22.383

[MIT 操作系统类](http://course.mit.edu/6.828)有很多很好的参考资料。特别是，请查看[Adam Chapweske](http://www.computer-engineering.org/index.html)关于键盘和鼠标编程的资源。

简而言之，是的，您将使用原始输入/输出端口，这需要在内核模式下运行，或者在 EFLAGS 寄存器中设置 I/O 权限位 (IOPL)。有关 I/O 权限的更多详细信息，请参阅[此页面](http://pdos.csail.mit.edu/6.828/2008/readings/i386/s08_03.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T17:06:50.667

在真实模式和受保护模式下，您使用标准传统硬件的方式相同。在这种情况下，您想在 I/O 端口 0x60 到 0x6f 上与 8042 通信，而后者又会与线另一端的键盘内的控制器通信。

快速的 Google 搜索发现我在[http://heim.ifi.uio.no/~stanisls/helppc/8042.html](http://heim.ifi.uio.no/~stanisls/helppc/8042.html)（适用于 8042）和[http://heim.ifi.uio.no/~stanisls上找到了一个有趣的资源/helppc/keyboard_commands.html](http://heim.ifi.uio.no/~stanisls/helppc/keyboard_commands.html)（用于键盘）。

如果您不习惯，您可以通过 IN（读取）和 OUT（写入）操作码与 I/O 端口上的组件通信，这些操作码接收 I/O 端口号（16 位值）和值可读取或写入（8、16 或 32 位）。请注意，读取或写入的大小很重要！将 16 位写入需要 8 位的东西（反之亦然）是灾难的根源。习惯这些操作码，因为您会经常使用它们（这是与某些外设通信的唯一方法，包括几个必不可少的外设；其他外设使用内存映射 I/O (MMIO) 或总线主控 DMA）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-20T11:05:00.720

**8042 PS/2 控制器**看起来是最简单的可能性。

The oszur11 OS tutorial contains a working example under [https://sourceforge.net/p/oszur11/code/ci/master/tree/Chapter_06_Shell/04_Makepp/arch/i386/arch/devices/i8042.c](https://sourceforge.net/p/oszur11/code/ci/master/tree/Chapter_06_Shell/04_Makepp/arch/i386/arch/devices/i8042.c)

Just:

```
sudo apt-get install build-essential qemu
sudo ln -s /usr/bin/qemu-system-i386 /usr/bin/qemu
git clone git://git.code.sf.net/p/oszur11/code oszur11
cd oszur11/Chapter_06_Shell/04_Makepp
make qemu 
```

Tested on Ubuntu 14.04 AMD64.

My GitHub mirror (upstream inactive): [https://github.com/cirosantilli/oszur11-operating-system-examples](https://github.com/cirosantilli/oszur11-operating-system-examples)

Not reproducing it here because the code it too long, will update if I manage to isolate the keyboard part in a minimal example.

# mediawiki - 如何在 mediawiki 中创建自己的自定义组？

> ID：219135
> 
> 赞同：40
> 
> 时间：2008-10-20T16:52:15.783
> 
> 标签：mediawiki

我一直在仔细阅读 mediawiki 文档，但无法找到如何创建新组。

当我查看 Special:Userrights 时，我只看到 3 个组：Bots、Sysops、Bureaycrats

我想创建自己的自定义组，因此我可以使用一些扩展，例如[http://www.mediawiki.org/wiki/Extension:Group_Based_Access_Control](http://www.mediawiki.org/wiki/Extension:Group_Based_Access_Control)。

有人可以告诉我它是如何完成的，或者指向我一些文档吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-10-21T21:50:17.973

您可以将新组的权限添加到 LocalSettings.php 文件中，它们将自动出现在 Special:UserRights 页面中。

例如，我想禁止普通用户进行编辑，但创建一个允许编辑的“受信任”组。以下代码创建了一个与“user”组相同的“Trusted”组，除了“Trusted”用户可以编辑但“user”用户不能编辑。

```
$wgGroupPermissions['Trusted'] = $wgGroupPermissions['user'];
$wgGroupPermissions['user'   ]['edit']          = false;
$wgGroupPermissions['Trusted']['edit']          = true;
$wgGroupPermissions['sysop'  ]['edit']          = true; 
```

在 Special:UserRights 页面上，我现在可以选中“受信任”框以使用户受信任。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-02T23:38:12.790

You can alter the appearance of the group name by creating the following messages: (For a group named ninja:)

*   MediaWiki:Group-ninja (content: Ninjas)
*   MediaWiki:Group-ninja-member (content: ninja)
*   MediaWiki:Grouppage-ninja (content: Project:Ninjas)

This will insure that the group will be referred to as "Ninjas" throughout the interface, and a member will be referred to as a "ninja", and overviews will link the groupname to Project:Ninjas.

(source: [http://www.mediawiki.org/wiki/Manual:User_rights#Examples](http://www.mediawiki.org/wiki/Manual:User_rights#Examples))

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-06-28T22:24:54.823

在这里，您将找到权限列表。[http://www.mediawiki.org/wiki/Manual:User_rights](http://www.mediawiki.org/wiki/Manual:User_rights)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T17:18:55.760

我相信我已经找到了答案，我只需要将 UserGroup 和权限添加到 LocalSettings.php 文件中的 wgGroupPermissions 数组中。

```
$wgGroupPermissions['TomatoUsers']['read']  = true;
$wgGroupPermissions['TomatoUsers']['edit']  = false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-09T01:23:27.840

我没有投票赞成第一个答案的声誉（也可以添加到扩展初始化文件中），但是当您将用户添加到您的组时，您可能需要考虑直接编辑数据库（即，如果您需要将 wiki 组与外部信息同步）。如果您打开数据库“wikidb”，则“PREFIX_user_groups”* 表包含用户 ID (ug_user) 和组名 (ug_group) 之间的映射。该表与“PREFIX_user”* 表的名称信息 (user_name) 和 ID 信息 (user_id) 相结合，为您提供了从组中添加和删除大量用户的所有信息。

* 将“PREFIX”替换为您用于 wiki 的数据库前缀。

# c - 在管道中获取命令输出，C for Linux

> ID：219138
> 
> 赞同：3
> 
> 时间：2008-10-20T16:53:01.757
> 
> 标签：c, linux, api, process, pipe

我需要运行一个 Linux CLI 命令并从 C 中获取它的标准输出。

我可以使用 pipe() 创建一个管道，然后 fork/exec，在调用 exec() 之前将子级的标准输出描述符重定向到管道中，并从父级的管道中读取。另外，我需要等孩子。

是否有一个简单的调用来做 fork + redirect + exec + wait，就像 system() 做 fork + exec + wait 一样，只有 system() 不做重定向。

有 popen()，它执行 fork + redirect + exec，但不执行等待，所以我无法获得退出状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T16:59:42.117

是这个吗？

```
姓名
       popen, pclose - 进程 I/O

概要
       #include <stdio.h>  

       文件 *popen(const char *command, const char *type);

       int pclose(FILE *stream);

描述
       popen() 函数通过创建管道、分叉、
并调用外壳。由于管道根据定义是单向的，因此
类型参数可以只指定读或写，不能同时指定；所结果的
流相应地是只读的或只写的。

       命令参数是一个指向以空字符结尾的字符串的指针
包含一个 shell 命令行。此命令传递给 /bin/sh
使用 -c 标志；解释（如果有）由 shell 执行。  
type 参数是一个指向以 null 结尾的字符串的指针，它必须是
'r' 用于阅读或 'w' 用于写作。

       popen() 的返回值是一个普通的标准 I/O 流
除了必须用 pclose() 而不是 fclose() 来关闭它之外，所有方面都除外。  
写入这样的流会写入命令的标准输入；这
命令的标准输出与调用的进程的标准输出相同
popen()，除非它被命令本身改变。反之，读书
从 ''popened'' 流中读取命令的标准输出，然后
命令的标准输入与调用的进程的标准输入相同
弹出（）。

       请注意，默认情况下，输出 popen() 流是完全缓冲的。

       pclose() 函数等待关联进程终止
并返回由 wait4() 返回的命令的退出状态。

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-01T08:56:25.253

GLib 有一个很好的功能—— `g_spawn_sync()`： http: [//library.gnome.org/devel/glib/stable/glib-Spawning-Processes.html#g-spawn-sync](http://library.gnome.org/devel/glib/stable/glib-Spawning-Processes.html#g-spawn-sync)

例如，运行命令并获取其退出状态和输出：

```
const char *argv[] = { "your_command", NULL };
char *output = NULL; // will contain command output
GError *error = NULL;
int exit_status = 0;
if (!g_spawn_sync(NULL, argv, NULL, 0, NULL, NULL, 
                  &output, NULL, &exit_status, &error))
{
  // handle error here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T16:58:15.803

使用`popen()`和`pclose()`。

* * *

`popen()`当然，实际上并不等待，但管道上的读取将阻塞，直到有可用数据。

`pclose()`等待，但过早调用它可能会切断分叉进程的一些输出。您需要从流中确定孩子何时完成......

* * *

可能已经讨论过[如何从 C 运行外部程序并解析其输出？](https://stackoverflow.com/questions/43116/how-can-i-run-an-external-program-from-c-and-parse-its-output)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T20:09:28.770

这是我使用的：

```
 /* simply invoke a app, pipe output*/
    pipe = popen(buf, "r" );
    if (pipe == NULL ) {
        printf("invoking %s failed: %s\n", buf, strerror(errno));
        return 1;
    }

    waitfor(10);

    while(!feof(pipe) ) {
        if( fgets( buf, 128, pipe ) != NULL ) {
            printf("%s\n", buf );
        }
    }

    /* Close pipe */
    rc = pclose(pipe); 
```

# c++ - std::for_each 中的多态函子

> ID：219139
> 
> 赞同：4
> 
> 时间：2008-10-20T16:53:18.620
> 
> 标签：c++, stl, polymorphism

我正在尝试使用 stl 算法 for_each 而不会在我的代码中增加模板。std::for_each 想要按值实例化 MyFunctor 类，但它不能因为它的抽象。我创建了一个仿函数适配器类，它传递一个指针，然后在适当的时候取消引用它。

我的问题：

STL 或 Boost 是否已经有这样的适配器类？我不想重新发明轮子！

```
 struct MyFunctor  {
     virtual ~MyFunctor() {}
     virtual void operator()(int a) = 0; 
 }

 namespace {
     template<typename FunctorType, typename OperandType> struct
 FunctorAdapter
     {
         FunctorAdapter(FunctorType* functor) : mFunctor(functor) {}
         void operator()(OperandType& subject)
         {
             (*mFunctor)(subject);
         }

         FunctorType* mFunctor;
     }; }

 void applyToAll(MyFunctor &f) {
     FunctorHelper<MyFunctor, int> tmp(&f);
     std::for_each(myvector.begin(), myvector.end(), tmp); } 
```

干杯，

戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-20T17:11:39.020

您可以使用来自`functional`.

```
#include <functional>

using namespace std;
for_each( vec.begin(), vec.end(), :mem_fun_ptr( &MyClass::f ) ); 
```

如果您的容器包含指向对象的指针，请使用`mem_fun_ptr`，否则使用`mem_fun`. 在这些旁边，有成员函数的包装器，它们接受 1 个参数：`mem_fun1_ptr`和`mem_fun1`.

@Evan: indeed, you could call the member function with the same argument for each object. The first argument of the `mem_fun1` wrappers is the `this` pointer, the second is the member function argument:

```
for_each( vec.begin(), vec.end(), bind2nd( mem_fun_ptr( &MyClass::f ), 1 ) ); 
```

With more arguments, it becomes more readable to create a loop yourself, or create a custom functor that has const member variables representing the arguments.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T22:52:11.547

tr1::ref may help you here --- it's meant to be a reference wrapper so that you can pass normal objects by reference to bind or function objects (even abstract ones) by reference to standard algorithms.

```
// requires TR1 support from your compiler / standard library implementation
#include <functional>

void applyToAll(MyFunctor &f) {
    std::for_each(
        myvector.begin(), 
        myvector.end(), 
        std::tr1::ref(f) 
    ); 
} 
```

However, NOTE that compilers without decltype support *MAY* reject passing a reference to an abstract type... so this code may not compile until you get C++0x support.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T17:17:11.863

What about forgetting all the wrapping of the functor pointer, and instead use `bind(functor_pointer,mem_fun1(&MyFunctor::operator());` as the functor? that way, you don't have to worry about managing the copy in any way shape or form.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T17:42:39.300

why not use BOOST_FOREACH?

[http://www.boost.org/doc/libs/1_35_0/doc/html/foreach.html](http://www.boost.org/doc/libs/1_35_0/doc/html/foreach.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T17:46:27.030

Sounds like you could benefit from [Boost::Function](http://www.boost.org/doc/libs/1_36_0/doc/html/function.html).

If I remember correctly it's a header only library too, so it's easy to get it going with it.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-20T20:59:22.990

Building on @xtofl's answer, since the array contains int's and not "this" pointers, I think the correct incantation is

```
class MyClass
{
  virtual void process(int number) = 0;
};
MyClass *instance = ...;

for_each( vec.begin(), vec.end(), binder1st(instance, mem_fun_ptr(&MyClass::process) ); 
```

The only difference versus @xtofl's code is binder1st rather than binder2nd. binder2nd allows you to pass teh same number to various "this" pointers. binder1st allows you to pass various numbers to one "this" pointer.

# windows-xp - 让 XP 自动“按下”对话框上的默认按钮

> ID：219146
> 
> 赞同：0
> 
> 时间：2008-10-20T16:56:57.257
> 
> 标签：windows-xp, dialog, registry

前段时间，我看到一篇在线文章，描述了如何将 Windows XP 配置为自动接受对话框中的默认选项。正如我（模糊地）记得的那样，这是一种奇怪的注册表配置，它可以做到这一点，而且效果惊人。是的 - 这很危险，但现在对于我试图在无人看管的情况下运行 Windows XP 的问题非常有帮助。我试图压制任何形式的互动。

因此，如果您能指出我的魔法咒语来重复这一点，我将不胜感激。我确定我保存了链接，只是它至少在 2 次硬盘崩溃之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T16:35:05.437

后来我又发现了这个。有一个名为“EnableDefaultReply”的注册表项可用于控制此功能。可以在该链接上找到一篇包含大量详细信息的 MSDN 文章，巧妙地称为[“启用默认回复” 。](http://msdn.microsoft.com/en-us/library/ms940850.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T16:59:56.877

不确定 XP 是否可以做到这一点，但可以[试试 Basta Computing 的 Buzof](http://www.basta.com/Product.aspx?pid=13)。非常适合您的想法。

也许您还记得将鼠标指针的选项设置为默认按钮？

# wcf - IIS 托管 WCF 服务 + Windows 身份验证在 IIS + TransportCredentialOnly/Windows 身份验证在 basicHttpBinding

> ID：219151
> 
> 赞同：22
> 
> 时间：2008-10-20T16:58:23.150
> 
> 标签：wcf, iis

我想创建一个托管在 IIS6 中的 WCF 服务并在 IIS 中禁用匿名身份验证。并且不要使用 SSL。

所以我唯一的方法就是使用 basicHttpBinging `TransportCredentialOnly`，不是吗？

我创建一个虚拟目录，设置 Windows 集成身份验证并取消选中“启用匿名访问”。

这是我的 web.config：

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="MyBinding">
                    <security mode="TransportCredentialOnly">
                        <transport clientCredentialType="Windows" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <services>
            <service name="Samples.ServiceFacadeService" behaviorConfiguration="ServiceFacadeServiceBehavior">
                <endpoint address="" binding="basicHttpBinding" bindingName="MyBinding"
                          contract="Samples.IServiceFacadeService">
                </endpoint>
            </service>
        </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceFacadeServiceBehavior">
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

您可以看到我什至没有包含用于元数据交换的 MEX-enpoint。只有一个端点和一个具有 TransportCredentialOnly 安全性的绑定。

但是当我尝试启动服务（通过客户端代理调用方法）时，我在 EventLog 中遇到了这样的异常：

> 异常：System.ServiceModel.ServiceActivationException：由于编译期间出现异常，无法激活服务“/wcftest/ServiceFacadeService.svc”。异常消息是：此服务的安全设置需要“匿名”身份验证，但托管此服务的 IIS 应用程序未启用它。---> System.NotSupportedException：此服务的安全设置需要“匿名”身份验证，但它未为承载此服务的 IIS 应用程序启用。

我不知道为什么我的服务需要匿名身份验证？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-20T19:04:56.827

答案找到了jezell。谢谢。我混淆了 bindingName 和 bindingConfiguration ：

```
<endpoint address="" binding="basicHttpBinding" bindingName="MyBinding"
          contract="Samples.IServiceFacadeService">
</endpoint> 
```

这是正确的：

```
<endpoint address="" binding="basicHttpBinding" **bindingConfiguration**="MyBinding"
          contract="Samples.IServiceFacadeService">
</endpoint> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-20T17:40:38.073

MEX 端点可能仍然是问题（参见这篇[文章](http://ahmed0192.spaces.live.com/blog/cns!FD6F44C91F5D2AD9!160.entry)）。尝试像这样禁用 MEX：

```
<services>
    <!-- Note: the service name must match the configuration name for the service implementation. -->
    <service name="MyNamespace.MyServiceType" behaviorConfiguration="MyServiceTypeBehaviors" >
        <!-- Add the following endpoint.  -->
        <!-- Note: your service must have an http base address to add this endpoint. -->
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
    </service>
</services>

<behaviors>
    <serviceBehaviors>
        <behavior name="MyServiceTypeBehaviors" >
            <!-- This disables it. -->
            <serviceMetadata httpGetEnabled="false" />
        </behavior>
    </serviceBehaviors>
</behaviors> 
```

这是一篇关于保护 MEX的好[帖子。](http://www.leastprivilege.com/SecuringWCFMetadata.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-09-07T19:19:38.143

为您的 mex 端点使用 basicHttpBinding 并应用相同的 bindingConfiguration：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-26T16:02:09.007

要让 VS wcf 服务项目（新示例项目）在 IIS 下使用身份验证，您必须：

1) 在 IIS 中允许匿名访问
2) 使用如下属性为您的公共方法添加前缀：

```
[PrincipalPermission(SecurityAction.Demand, Role = "MyADGroup")]
public string SendMyMessage(string Message)
{...} 
```

# continuous-integration - NAnt 与数据库集成测试，最终持续集成

> ID：219156
> 
> 赞同：2
> 
> 时间：2008-10-20T16:59:29.997
> 
> 标签：continuous-integration, nant

我一直在探索在一些 Nant 构建脚本中运行集成测试的不同策略。通常，许多不同的脚本链接在一个具有单独目标的整体构建中：staging（构建一个暂存版本，如 build）、build（只是构建东西）、集成（构建东西并运行集成测试）。这工作得相当好，构建目标需要大约三分之一的时间作为集成目标运行，而且时间不长，所以我发现自己并不不愿意经常运行它。

另一方面，集成目标需要足够长的时间，以至于我不想经常这样做——最好是在我准备好进行部署之前。这看起来是一个合理的策略吗？IOW，我做得对吗？

计划是最终将此项目转移到持续集成。我是整个持续集成的新手，但我想我理解“打破构建”的概念，所以我想知道为了充分利用它，有哪些好的实践可以学习？

任何有关此主题的良好阅读资源也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T17:05:35.490

是的，你在正确的轨道上。您现在需要做的是将您的 nant 目标连接到一个自动化过程。我建议使用 Team City 或 Cruise Control 作为您的 CI 工具。完成自动化服务器设置后，您可以在每次签入时运行构建和单元测试（持续集成）。然后，您的集成测试可以在晚上或周末运行，因为它们通常需要更长的时间才能运行。如果您的集成测试成功，那么您就可以拥有一项将部署到某个 QA 或其他服务器的作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T17:04:32.170

听起来你已经完成了 99% 的工作。我的建议是潜入并开始做。通过实际尝试并去做，而不是思考自己是否做对了，你会学到更多。

我的公司目前正在使用 CruiseControl，我个人认为它很棒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-21T22:21:39.877

请参阅此相关线程[什么是好的 CI 构建过程？](https://stackoverflow.com/questions/102902/what-is-a-good-ci-build-process#103759)

你在正确的轨道上。如果您使用的是体面的 CI 工具，您应该能够将每个设置设置为一个单独的项目，以触发链中的下一步......即成功构建触发测试触发部署触发集成等

这样，您最简单的“休息”就可以停止生产线。

我们使用 CruiseControl 来构建、单元测试、配置和部署、运行集成测试和代码覆盖率、运行验收测试以及打包发布。这是一个由大约 8 个 Web 服务和十几个数据库组成的系统，所有这些都具有相互关联的配置和部署依赖关系，并且跨具有不同配置的多个环境（从单个框到每个组件的冗余框）

# coding-style - 处理一些灰码样式问题

> ID：219163
> 
> 赞同：6
> 
> 时间：2008-10-20T17:02:50.113
> 
> 标签：coding-style

我们有一位中级开发人员，他非常擅长自己的工作，但是这颗钻石有一个粗糙的边缘。他真的坚持每一种方法只有一个入口和一个出口点。

我正在采取的方法是不要对他编写的代码做太多的事情（除非存在严重的清晰度问题）。困扰我的是他开始重构别人的代码，让它只有一个入口和出口点。这是已经测试过的代码（但并不总是通过自动化测试），因此存在风险。

我是团队中的高级开发人员，所以我有权定义代码库的规则。但是在这里遵循的正确路径是什么？我应该让他继续这样重构别人的代码吗？如果没有，处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-20T17:09:13.207

简而言之，不，除非你的编码标准中有明确的规则（你有一个，对吧？）。为它而改变代码只是自找麻烦（以及团队中的紧张局势）。

首先，我将与开发人员讨论这个问题，并提出过去导致重大问题的此类更改的示例。

此外，这是代码审查可能会有所帮助的一种情况。如果该开发人员需要实际发布代码审查并将此更改明确告知团队其他成员，他很可能不会打扰，否则代码将被他的同事拒绝。

如果无法进行代码审查，您可以决定强制执行代码所有权，因为如果您要更改代码库中的内容，您需要咨询模块的主要开发人员。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-20T17:06:14.287

当实际性能不是问题时，允许人们通过其他代码重新格式化是破坏团队关系的好方法。仅在有令人信服的理由或团队动态对其非常开放时才更改其他人的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T17:05:37.427

如果您是定义规则的人，并且您认为这没有意义，请告诉他，他的报酬不是以他的方式重构代码，而是完成一个项目。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T17:57:21.987

I've been in similar situations to this twice before.

In the first case, we had one guy who had a different sense of the One True Brace Style than the rest of the team and he changed it as he was reading code. Most of us either ignored it or put it back. In his case, he was too good to give him flack over something so minor. Not a huge deal, just annoying.

In the second case, we had one engineer who worked remotely in a different time zone and he was literally like the shoemaker's elves. Things that were half implemented with a pile of FIXMEs were magically done and beautiful. In his case, he measurably made things better and also only worked on the things that he was assigned to, so it was fine with us.

In your case, this is not the work that he's assigned so you can

*   ask him not to do it: it's not his assignment
*   tell him not to refactor code that's not his (ie, leave other people's code the same)
*   require him to schedule the tasks including creating baseline unit tests for every routine/method that he wants to change across substantial input ranges and verify the output on the refactored code. You can tell him that you're trying to make it unpalatable because the cost of fixing the bugs that he's introducing will surely be more than the time to refactor, and wouldn't he rather be working on core features?

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T17:58:37.630

Something like this is unacceptable. If there is no set coding standard/style/layout then the programmer should mimic the existing code and style and refrain from refactoring anything.

If this programmer has the time to refactor everything then clearly s/he needs more work assigned.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T17:32:35.733

Tell him that a mandate is to keep code changes to a minimum. You shouldn't be changing code that's not pertinent to the task at hand. The top reasons being:

1.  To reduce risk -- "Hey, it's you who's accountable if anything breaks."
2.  Reviewing the code will be quicker since it allows the reviewers just to focus on the code that is actually being added/changed.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-20T17:43:41.297

Who is driving the boat in your shop? Somebody better be. If it is you, then shoot straight with this fine fellow and explain to him how things work in your shop. Likely there is no real benefit to what is essentially amounting to busy work. One can argue about multiple exits from a method versus a single exit, but the point is that if he's allowed to change what he wants, you've got a serious process issue there.

Definitely a 'people' issue that can get solved quickly by telling him how things work. No need to be nasty, just honest.

Besides, who's got time to mess with other people's code? He obviously isn't being fully tasked. :)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T17:36:54.243

Make him roll through a code review for everything he changes and everything it touches. I do not like the idea of using code review as punishment but he has to understand the depth of what he is doing.

Then I would make him sit with QA and explain to them how he changed far more functionality than he needed to. After they are done beating on him for a while. Then take him to the project manager and have that person explain how he is effecting the schedule.

If that doesn't work, beat him until he cries.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-20T17:44:43.710

You may want to point it out, but be careful how you phrase it. Every time you pull the "I'm right because I'm the senior person," you lose credability and you're going to kill morale. It doesn't matter if your right, it won't be perceived that way.

He probably shouldn't refactor/reformat code that isn't being actively tested, but at the same point in time, if you treat him like he can't do anything right, then most likely he'll just end up quitting. In the end, that will most likely cost the company a lot more than a small amount of extra qa time (especially if he really is cleaning up bad code). I'm not saying that you shouldn't mention it to him just try and see if from his point of view and get him to meet you half way in what you're saying.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T17:17:26.667

Ask if he allows for others to have a difference in approach. If he makes that concession you can simply point out for every line he refactors someone may come along and revert the code back exactly the way it was because their opinion differed. Thus ensuring a great big infinite loop which we all know is bad! :)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T17:38:10.497

I'm a bit confused. Does that mean he puts a `try {} catch (...){}` (or your language's equivalent) around all the code in every method? If not, then exceptions would count as an alternate path out of the method.

And frankly, that's just what they are *designed* to do. Otherwise, a simple exit code would serve the same purpose.

If it is really bugging people, it might be worth routinely backing out any changes he makes that don't have any functional impact. If you aren't into passive-agressive behavior, put it on his performance review. It may sound a bit ticky-tack, but I've had sillier stuff put on mine.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-20T17:38:55.860

> other's code

If you believe in community code ownership, there is no such thing.

> grey code style

In the absence of a community coding rule, I will/must develop my own coding rule. I don't expect others to come to the same decision. I will refactor code I'm working on to comply with my rule, if I notice it and if the refactoring is cheap to perform.

* * *

There's two costs to my personal rule.

"My time"

I could be making progress on some other programming task. If I don't have another programming task, then my time was free and this is just good work.

"Code base oscillation"

If others are refactoring my refactorings, then there is a clear need for a community coding rule. The rule could be as simple as: both ways are accepted - don't refactor this scenario. This statement must be made explicitly, or it will be un-enforceable.

* * *

> This is code that has already been tested (but not always with automated tests).

Aha, a programming task. This should get assigned.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-20T17:39:30.353

I've been in that particular situation before, although I think your intermediate programmer is probably the exception, rather than the norm- the problem is most programmers won't touch other code unless they have to.

Chances are, if your intermediate guy is doing this, it's bitten him before, and he knows that its probably not the best idea to change code on principle. I would suggest a firm but open discussion about why he's making those changes in the first place. Chances are, if you present your arguments clearly but un-forcefully, he'll realize the detriment he may cause.

The one thing that I would be careful of is stifling this guy's enthusiasm for writing good code. He's obviously doing this because he thinks it will improve your code base. Like I said, I think his attitude is the exception rather than the norm, and its refreshing to hear of others who want to pro-actively improve their software. (I do understand the risk associated with it, but it sounds like something that can be greatly reduced with some more automated testing)

Hope that helps!

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-20T17:41:41.893

Since it bothers you (and you're in charge), you should *at least* talk to him about it. Since you have a solid reason to be bothered by it (it could break things), you probably want to tell him not to do that. Bonus points if you can get him to actually understand why other people don't mind multiple entry/exit points, and might actually like them.

# java - 遗留代码中的泛型

> ID：219164
> 
> 赞同：11
> 
> 时间：2008-10-20T17:03:03.873
> 
> 标签：java, generics, migration, legacy-code

我们有相当多的代码刚刚跳转到 Java 5。我们一直在那些旨在在 Java 5 版本中发布的组件中使用泛型，但是剩下的代码当然充满了原始代码类型。我已将编译器设置为为原始类型生成错误并开始手动清除它们，但按照目前的速度，它需要*很*长时间才能完成（大约有*2500 个*错误）。这就是 Eclipse 有用的 Infer Generic Type 快速修复，它总是可以消除错误，但通常会生成需要进一步工作的代码。

有没有更好的方法来处理这个问题？有没有比 Eclipse 更好的自动化工具？有什么方法可以将重构应用于*所有*事件而不是一个一个地进行？还是您只是忽略警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-20T17:09:37.980

我建议忽略警告。否则，您将花费大量时间来更新遗留代码而不对其功能进行任何改进。

**更新：**来自[Luke](https://stackoverflow.com/users/25920/luke)的精彩评论，我认为应该获得更多可见性： *“泛型是在编译时捕获运行时错误的一种方法。除非这个遗留代码中有你认为与强制转换有关的错误，否则我会不理会它（如果它没有坏，不要修理它）”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T17:14:52.150

据我所知，您正在尽可能高效地进行操作。这显然不是完美的，但你最终会完成的。

但是，我建议您分阶段进行；代码的某些部分可能会比​​其他部分受益更多，请关注这些部分。试图一次性完成所有操作会冒着将新错误引入代码的风险。我们有一个这样的地方，我们有一个包含上下文相关数据的集合，而泛型实际上不能为它工作。

基本上，做你正在做的事情，但作为其他工作的一部分分阶段进行，而不是试图一次性解决所有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T17:43:30.267

Faced with a similar challenge, we opted to upgrade to Java 5 style generics only in the code that was edited for another reason. So if you have a bug to fix in DoItFast.java, update DoItFast.java to use Java 5 style generics. The areas of the code that are being edited and changed regularly will get updated quickly. After a few weeks or months of this behavior, you can reevaluate the condition of your code base.

If that doesn't get the job done fast enough for you, sometimes I'll use the slow time after lunch to just mindlessly cleanup a few classes and speed the process along.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T17:13:14.023

我认为没有必要更新所有旧代码。也许如果你能以某种方式确定旧代码的哪些部分经常使用，并且只更新那些使用泛型类型？或者，您可能只担心从公共函数返回原始类型？很多这些情况可能只是私有/局部变量，它们已经在没有泛型类型的情况下编写并且可能工作得很好，所以可能不值得重写它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-20T18:38:04.523

I understand with IDEA you can select all your classes, popup the context menu and select Refactor | Generify. Job done. It's certainly a more enjoyable experience to work with generified code (IMO).

# .net - 文学编程

> ID：219168
> 
> 赞同：11
> 
> 时间：2008-10-20T17:04:35.820
> 
> 标签：.net, ms-word, ide, literate-programming

[文学编程](http://en.wikipedia.org/wiki/Literate_programming)是一种开发软件的方式，首先是文档，然后是编码。一个人编写代码片段的文档，然后编写代码片段的实现。软件源代码的视觉外观将是一个像单词一样的普通文档，其中包含代码段落。

我正在尝试将我工作的开发商店转换为仅使用文学编程，因为它为代码的可读性和维护带来了巨大的优势。然而，由于缺乏工具，LP 在公司中的使用受到限制。例如，编程 literate 的理想方式是使用文字标记编写一个段落，然后插入一个带有实现的子段落。但我似乎找不到任何用于 VS200x 执行 LP 的好工具。

理想情况下，这样的工具看起来就像 Word 2007，但集成到 IDE 中。当编码人员将光标设置在代码段上时，它将具有我们现在在 IDE 中提供的所有功能。

什么是 LP 的好工具，尤其是 .NET 和 VS200x？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-20T17:35:16.820

感谢您尝试改进团队的工作方式。只要您尝试这样做，您就比那些不这样做的人更有优势。

我曾经在一个项目中使用过文学编程。这真的很难，结果真的很好。似乎是一个合理的权衡。

然而，今天我宁愿采取不同的方法：我宁愿写出清晰到人类不介意阅读的代码，而不是人类的散文和机器的代码。当我有写评论的冲动时，我想“我可以让这段代码更清晰”。这意味着我正在编写更少的文档，而不是更多。

好吧，无论你选择什么道路，祝你好运。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-20T17:27:03.123

我只能建议你用[doxygen](http://www.doxygen.nl/articles.html)注释标记你的代码，然后你可以从你的代码生成文档，我知道这几乎是做你想做的事的倒退方式，但至少你最终得到了想要的结果：代码和文档来自相同的源文件。显然，这样做的好处是您可以使用现有的 IDE 进行编码，并附带所有常见的代码友好的好东西。

如果您正在尝试转换您的开发团队，这种方法可能比成熟的识字方法更容易让他们接受，他们仍然对相同的编码感到满意，但他们必须编写更好的文档嵌入到代码。

这是我能建议的最好的，看看你的团队对这个想法的看法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-20T18:23:28.627

+1 尝试改进团队的流程

-1 表示走上死胡同

恕我直言，单元测试比文档更好

*   单元测试不能过时
*   在调试时用散文污染代码是一个巨大的分心
*   如果您的代码确实需要这么多的说明，那么它可能设计不佳且有问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-20T17:30:20.183

我所知道的唯一真正支持 LP 的非深奥语言是 Haskell，老实说，我没有听说现代编程语言对 LP 有太多需求。大多数人似乎对使用内联文档格式（javadoc、rdoc 等）感到满意

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-20T17:32:13.190

我很抱歉。我应该提到我们已经在使用带有自动文档构建脚本的 Doxygen。我们尽可能使用 .NET 文档标签，并且在 .NET XML 文档标签不足的地方，我们混合使用 doxygen 标签。这工作得很好。关键是在编写文档时产量会大大减少：我们（人类）在没有任何所见即所得编辑器的情况下制作文档非常糟糕。更不用说对错误敏感了。

该团队目前正处于将思维方式从直接编码转变为首先编写文档，然后是代码的阶段。这是最重要的一步，因为它让编码人员接受 LP 范式。

我猜这里有一个 VS 插件的市场。

此外，Doxygen 似乎确实是一个很好的工具，可以积极地使用 LP 方法解决这个问题。虽然它的使用非常有限。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-20T17:40:39.943

> 然而，今天我宁愿采取不同的方法：我宁愿写出清晰到人类不介意阅读的代码，而不是人类的散文和机器的代码。当我有写评论的冲动时，我想“我可以让这段代码更清晰”。这意味着我正在编写更少的文档，而不是更多。

这也是我们所做的。尽管对于我们生成的大量代码，编写清晰、人类可读的代码是不够的。如果你想解释一个图像渲染函数怎么办？最好用一张图片来解释它，而不是写半页来描述它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-18T16:20:29.233

我不知道任何用于文学编程的现代工具。我在 15 年前做过一些 WEB 编程。

Doxygen 是一个不错的工具，但对 LP 毫无帮助。问题在于 LP 专注于编写代码供人类阅读。对连续细化/披露没有很好的支持。LP 需要查看与 VS 中的文件类属性/方法具有不同结构的源代码。NSpec 可能会更好一些，但也过于自下而上。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-24T07:34:36.753

你好源小说作者，

正如有人在这里提到的**DOxygen**：虽然这不允许真正的**文学编程** *（作为限制的一个例子，这不允许对源代码进行重新排序）*，但是它似乎被认为是该领域的一种有价值的工具，由它自己的拥护者*（LP 拥护者）*：在此参考页面的顶部提到了关于 LP 工具：[**文学编程工具**](http://www.literateprogramming.com/tools.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-23T12:07:11.410

文学编程的主要思想是将程序编写为数学文本。人们可以尽可能清楚地定义程序中所需的每个概念是什么意思，然后解释它是如何在语言中实现的，以及为什么决定以这种方式而不是其他方式来实现，或者以后会改变什么。

还可以通过注释要更改的代码段并插入解释更改原因的新代码来记录更改。某些更改可能取决于代码的转换以优化其性能。例如创建一个循环，而不是在某些类似 C 的语言中创建 2 个循环，将一个表达式更改为一个更简单的表达式，等等。或者更复杂的东西，例如更改其他数据结构以表示信息。每一次更改都有充分的理由和记录。关于程序的问题域，只要阅读源代码，深入了解即可。避免由于模棱两可而导致的错误。程序的起源有完整的记录，以后可以回忆起一切，因为每个想法都在程序中。

严格来说，如果程序被开发，可以用纯文本编写有文化的程序，但是用 TeX/LaTeX 排版是最美观、最实用、最简单的方法，因为在大多数编程语言中放置 LaTeX 标记并不困难。

用 Haskell 编写识字程序是很自然的，因为 Haskell 脚本包含一组声明而不是指令。您可以按任何顺序放置所有声明。这在其他语言中有所不同，在这些语言中，以特定方式对指令进行排序很重要。

我没有使用过 web 或 cweb 或类似的程序，但这些程序有助于以人类的逻辑顺序排版程序，而可以生成程序模块以进行正确编译。

有一个名为 Listings 的 LaTeX 包，它很容易使用，你可以开始每段代码关闭评论并结束打开新评论的代码，据我所知，是这样的：

```
% /* begin of literate program 
\documentstyle{article}
\usepackage{listings}

\lstdefinitions here I do not remember the syntax. Here one can define 
                a replacement for startcode*/ and /*endcode for spaces.

more definitions here

\begin{document}
Your explanation including formulas like $s=c\times\sum_{i=0}^{i=N} x_i$ etc.
\begin{lstlising}
startcode*/

s=0
for(i=0;i<=N;i++) s=s+x[i];
s=c*s;

etc..

/*endofcode
\end{lstlisting}

More explanation ...
\end{document} 
% end of literate program */ 
```

在正文的序言中，您可以将 startcode*/ 和 /*endofcode 定义为关键字，以替换为 Listings 包的额外定义中的空格。请参阅软件包文档。

在 LaTeX 源代码的末尾只需键入：

```
% end of literate program */ 
```

这是开始时 LaTeX 中的评论，您可以放置​​相反的内容：

```
% /* start of program 
```

编译程序时去掉%LaTeX注释符号，用LaTeX编译时再放上。

如果您以前从未使用过 LaTeX，则可以先从纯文本开始。也许将它与 doxigen 结合起来以索引所有内容。LaTeX 不需要 Doxigen，因为它是一个排版系统，您可以在其中创建多个索引、超链接，将文档组织成一本书。

Haskell 程序通常以文字风格编写。也许浏览一些书或文章来看看是个好主意。

# visual-studio - 在 64 位模式下运行时缺少 Visual Studio 功能

> ID：219187
> 
> 赞同：3
> 
> 时间：2008-10-20T17:07:35.283
> 
> 标签：visual-studio, 64-bit

有人能告诉我为什么我在 64 位平台上开发时没有所有可用的开发工作室窗口吗？我将我的开发桌面盒升级到服务器 2003 x64 以匹配我们的部署平台。从那时起（我使用的是 VS2005）我注意到有几个窗口不可用。我无法查看进程（这是最烦人的），所以我不知道我附加到哪些进程。我可以很好地附加到一个进程，但它不会显示调试器下已经运行的内容。还有其他的，但那是我目前脑海中浮现的一个。

我的问题是在 64 位下开发的这些限制在哪里记录（假设它们是）？（当然，我也一直收到“编辑/继续”警告对话框，告诉我这在 64 位中不起作用）

另外，VS2008 在 64 位下会更好吗？

追问：显然我的问题有点含糊。我正在 64 位开发环境中开发 64 位应用程序。“在 x86 中重新编译”并不能解决我的问题。

跟进#2：我再试一次。我想在 64 位环境中调试 64 位程序，但我没有显示所有的 VISUAL STUDIO 功能。我如何得到它们？

跟进#3：我刚刚安装了 XP 64（之前我使用的是 Server 2003 64 位），这些功能都再次出现（进程窗口等）。显然 Windows 的服务器版本不提供所有的开发功能。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T17:09:17.137

如果您将构建设置更改为 X86，“编辑/继续”可以工作 :)

这是[StackOverflow](https://stackoverflow.com/questions/206894/change-to-64-bits-not-allowed-when-trying-to-edit-in-debug-why)关于它的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T17:11:17.523

调试代码时，我遇到了 NUNIT 的一些问题。[解决方案](https://stackoverflow.com/questions/208985/nunitexe-cannot-work-on-vista-64bits-if-x86-build)是使用 \bin\ 文件夹中的特殊程序 Nunit-x86.exe 用于在 x86 中构建的旧代码，并将 Nunit.exe 用于 x64 构建。

# visual-studio-2008 - 在 Visual Studio 2008 数据库版中进行架构比较时如何更改文本的颜色？

> ID：219200
> 
> 赞同：5
> 
> 时间：2008-10-20T17:11:43.623
> 
> 标签：visual-studio-2008, configuration, colors, color-scheme

我试图找出如何修改在两个数据库之间进行比较后出现的`Colors/Fonts`“模式比较`Object Definitions`”窗口中使用的。

我的配色方案不可读，但我似乎无法在`Tools/Options/Environment/Fonts`and`Colors`对话框中找到正确的设置。

谢谢你的帮助。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-09-27T15:49:44.113

我想这可能会帮助你...

[字体和颜色、环境、选项对话框](http://msdn.microsoft.com/en-us/library/kw7t0545%28v=VS.90%29.aspx)

# python - 如何在 Windows Vista 上将 Tkinter 与 Python 一起使用？

> ID：219215
> 
> 赞同：3
> 
> 时间：2008-10-20T17:19:57.223
> 
> 标签：python, windows, windows-vista, tkinter

我在 Windows Vista 上为一位用户安装了 Python 2.6。Python 可以正常工作，但是当我尝试 : 时`import Tkinter`，它说并排配置有错误。我试过修补 Visual Studio 运行时，但没有好的结果。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T17:45:02.743

也许你应该降级到 2.5 版本？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T18:03:30.570

这似乎是许多奇怪的 Vista 问题之一，一些随机重新安装、安装/升级 Visual Studio 运行时或某些此类似乎有时会有所帮助，或者在系统配置中禁用 sxs 或编写清单文件等。

虽然我认为你应该降级到 Windows XP。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-27T07:34:14.703

python 2.6.2 + tkinter 8.5，没问题

# database - 您将如何处理此数据处理任务？

> ID：219216
> 
> 赞同：4
> 
> 时间：2008-10-20T17:20:48.923
> 
> 标签：database, data-processing

我有一个包含 2.5 亿个网站 URL 的文件，每个 URL 都有一个 IP 地址、页面标题、国家名称、服务器横幅（例如“Apache”）、响应时间（以毫秒为单位）、图像数量等。目前，这些记录在一个 25GB 的平面文件中。

我有兴趣从此文件生成各种统计信息，例如：

*   每个国家/地区代表的 IP 地址数
*   每个国家/地区的平均响应时间
*   图像数量 v 响应时间

等等等等

我的问题是，您将如何实现这种类型和规模的处理，以及您将使用哪些平台和工具（在合理的时间内）？

我对所有建议持开放态度，从 Windows 上的 MS SQL 到 Solaris 上的 Ruby，所有建议 :-) DRY 的奖励积分（不要重复自己），我不希望每次不同的削减都编写新程序是必需的。

任何关于什么有效和应该避免什么的评论将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T17:33:28.477

第 1 步：将数据放入可以处理数据量的 DBMS。适当索引。

第 2 步：使用 SQL 查询来确定感兴趣的值。

您仍然需要为要回答的每个单独问题编写一个新查询。但是，我认为这是不可避免的。它应该可以节省您复制其余工作的时间。

*编辑：*

请注意，尽管您可能可以将简单的上传到单个表中，但如果您在将数据加载到单个表中后对其进行规范化，则可能会从查询中获得更好的性能。这并非完全无关紧要，但可能会减少数据量。确保您有一个用于规范化数据的良好过程（可能*不是*存储过程）会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T17:28:20.313

将数据加载到 SQL Server（或任何其他主流 db）数据库中的表中，然后编写查询以生成所需的统计信息。除了数据库本身以及用于与数据交互的任何 UI（例如用于 SQL Server 的 SQL Server Management Studio、用于 Oracle 的 TOAD 或 SqlDeveloper 等）之外，您不需要任何工具。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T17:56:09.290

如果您碰巧使用 Windows，请查看[Log Parser](http://www.microsoft.com/downloads/details.aspx?FamilyID=890cd06b-abf8-4c25-91b2-f8d975cf8c07&displaylang=en)。它可以作为独立下载找到，也可以作为[IIS Reource Kit](http://www.microsoft.com/downloads/details.aspx?familyid=56FC92EE-A71A-4C73-B628-ADE629C89499&displaylang=en)的一部分。

Log Parser 可以读取您的日志并将它们上传到数据库。

* * *

**数据库注意事项：**

对于您的数据库服务器，您将需要一些快速的东西（Microsoft SQL Server、IBM 的 DB2、PostgreSQL 或 Oracle）。mySQL 可能也很有用，但我没有使用大型数据库的经验。

你会想要你能负担得起的所有内存。如果您将定期使用数据库，我会说至少 4 GB。它可以用更少的东西完成，但你会注意到性能上有很大的不同。

此外，如果您负担得起，请选择多核/多 cpu 服务器，并且再次，如果您将定期使用此数据库。

另一个建议是分析您将要执行的查询之王并相应地规划索引。请记住：您创建的每个索引都需要额外的存储空间。

当然，在大量数据加载操作之前，关闭索引甚至销毁 de 索引。这将使负载更快。数据加载操作后重新索引或重新创建索引。

现在，如果这个数据库将是一个持续的操作（即不仅仅是调查/分析某些东西然后丢弃它），您可能需要设计一个包含目录和详细信息表的数据库模式。这称为数据库规范化，您需要的规范化的确切数量取决于使用模式（数据加载操作与查询操作）。如果要持续使用此数据库并且有性能要求，则必须有经验丰富的 DBA。

* * *

**附言**

我会冒险在这里包含一些明显的东西，但是......

我想您可能对[Log Analyzer](http://en.wikipedia.org/wiki/Web_log_analysis_software)感兴趣。这些是从 Web 服务器日志文件生成统计信息的计算机程序（有些还可以分析 ftp、sftp 和邮件服务器日志文件）。

Web 日志分析器生成带有统计信息的报告。通常，报告生成为 HTML 文件并包含图形。深度分析和选项有很多种。有些是非常可定制的，有些则不是。您将找到商业产品和开源产品。

对于您将要管理的数据量，请仔细检查每个候选产品，并仔细查看处理速度和能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T17:35:28.287

导入数据时要记住的一件事是尝试创建允许您执行您想要执行的各种查询的索引。考虑一下您将查询哪些类型的字段以及这些查询可能是什么样子。这应该可以帮助您决定需要什么索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T17:28:41.170

25GB 的平面文件。我不认为自己编写任何组件来读取此文件是一个好主意。

我建议您应该进行 SQL 导入并将所有数据带到 SQL Server。我同意在 SQL Server 中获取这些数据需要很长时间，但是一旦有了，你就可以用这些数据做任何你想做的事情。

我希望一旦您将这些数据放入数据库中，之后您将获得信息增量而不是 25 GB 的平面文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-21T00:09:43.920

对我来说听起来像是 perl 的工作。只需计算您想要的统计数据即可。使用正则表达式解析行。解析该大小的文件可能需要不到 10 分钟的时间。我的计算机使用 perl 在大约 45 秒内读取了一个 2 gig 文件（1300 万行）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-20T19:17:23.027

您还没有说明平面文件中的数据是如何组织的。RDBMS 建议是明智的，但假设您的平面文件以某种分隔方式格式化，并且 db 导入是一项相对简单的任务。如果不是这种情况，那么您首先要做的是将数据干净地反编译成一组您可以进行分析的字段的艰巨任务。

我假设您的数据*不是*一个好的 CSV 或 TXT 文件，因为您没有说任何一种方式，也没有其他人回答这部分可能的问题。

如果数据具有规则结构，即使没有漂亮的干净字段分隔符，您也可以将 ETL 工具用于工作，例如[Informatica](http://www.informatica.com/products_services/data_quality/Pages/index.aspx)。由于您是技术人员并且这是一次性工作，因此您绝对应该考虑编写一些自己的代码，这些代码会进行一些正则表达式比较以提取您想要的部分并吐出一个文件，然后您可以将其加载到数据库中. 无论哪种方式，您都必须投入大量精力来解析和清理数据，所以不要认为这是一件容易的事。

如果您确实编写了自己的代码，那么我建议您选择一种编译语言并确保一次处理一行数据（或以一种将读取缓冲成可管理块的方式）。

无论哪种方式，您都将完成一项相当大的工作，以确保您应用于数据的任何过程的结果都得到一致执行，您不希望 IP 地址在计算中显示为十进制数字。在这种规模的数据上，很难检测到这样的故障。

一旦你解析了它，我认为 RDBMS 是存储和分析数据的正确选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-20T19:28:56.700

这是一次性的事情还是你会每天、每周处理事情？无论哪种方式，请查看 vmarquez 的回答，我听说过有关 logparser 的好消息。还可以查看[http://awstats.sourceforge.net/](http://awstats.sourceforge.net/)，它是一个成熟的网络统计应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-20T21:10:10.613

[SQL Server Analysis Services](http://msdn.microsoft.com/en-us/library/ms175609(SQL.90).aspx)专为进行这种类型的数据分析而设计。学习曲线有点陡峭，但是一旦设置了模式，您将能够非常快速地执行任何类型的横切查询。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T21:19:30.860

如果您有不止一台计算机可供使用，那么这对于[MapReduce](http://en.wikipedia.org/wiki/MapReduce)来说是一项完美的工作。

# html - 如何使用 CSS 将跨度更改为看起来像 pre？

> ID：219219
> 
> 赞同：126
> 
> 时间：2008-10-20T17:24:33.410
> 
> 标签：html, css

是否可以更改`<span>`标签（或`<div>`）以预格式化其内容，就像`<pre>`标签仅使用 CSS 一样？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2008-10-20T17:28:39.297

查看[W3C CSS2.1 默认样式表](https://www.w3.org/TR/CSS21/sample.html)或[CSS2.2 工作草案](https://www.w3.org/TR/CSS22/sample.html)。复制 PRE 的所有设置并将它们放入您自己的课程中。

```
pre {
    display: block;
    unicode-bidi: embed;
    font-family: monospace;
    white-space: pre;
} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-10-20T17:32:52.597

请参阅[空白 CSS 属性](http://www.w3.org/TR/CSS21/text.html#propdef-white-space)。

```
.like-pre { white-space: pre; } 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2008-10-20T17:35:38.660

这使得 SPAN 看起来像 PRE：

```
span {
  white-space: pre;
  font-family: monospace;
  display: block;
} 
```

请记住根据需要更改 css 选择器。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-20T17:32:55.093

具体来说，您正在查看的属性是：

```
white-space: pre 
```

[http://www.quirksmode.org/css/whitespace.html](http://www.quirksmode.org/css/whitespace.html)
[http://www.w3.org/TR/CSS21/text.html#white-space-prop](http://www.w3.org/TR/CSS21/text.html#white-space-prop)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-11-17T09:10:21.370

虽然接受的答案确实是正确的，但如果您希望文本换行，您应该使用：

```
white-space: pre-wrap; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-21T13:33:07.853

试试这个

```
span {
    white-space: pre;
    font-family: monospace;
    display: block;
    unicode-bidi: embed
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-20T05:43:52.183

试试这种风格

```
.pre {

white-space: pre-wrap;
white-space: -moz-pre-wrap;
white-space: -pre-wrap;
white-space: -o-pre-wrap;
word-wrap: break-word;
line-height: 1.5;   
word-break: break-all;
white-space: pre;
white-space: pre\9; /* IE7+ */
display: block;
} 
```

在这里使用相同的 - [http://www.makemyshop.in/](http://www.makemyshop.in/Snapdeal)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-20T17:33:54.373

为什么不直接使用 <pre> 标签，而不是 span 标签？两者都是内联的，因此两者都应该按照您想要的方式运行。如果您在覆盖 <pre> 的整个定义时遇到问题，只需给它一个 class/id。

# recursion - 如何使用 Master theorem 来描述递归？

> ID：219226
> 
> 赞同：6
> 
> 时间：2008-10-20T17:27:10.143
> 
> 标签：recursion, recurrence, master-theorem

最近一直在研究递归；怎么写，怎么分析等等。我一直认为递归和递归是一回事，但是最近的家庭作业和测验中的一些问题让我觉得有细微的差别，“递归”是一种方法描述递归程序或函数。

直到最近，这对我来说都是非常希腊化的，当我意识到有一种叫做“主定理”的东西用来写问题或程序的“递归”时。我一直在阅读维基百科页面，但是，像往常一样，事情的措辞让我真的不明白它在说什么。我通过例子学得更好。

所以，有几个问题：假设你得到了这个重复：

> r(n) = 2*r(n-2) + r(n-1);
> r(1) = r(2) = 1

这实际上是主定理的形式吗？如果是这样，用语言来说，它在说什么？如果你想写一个小程序或基于这种递归的递归树，那会是什么样子？我是否应该尝试替换数字，查看模式，然后编写可以递归创建该模式的伪代码，或者，因为这可能是主定理的形式，是否有更直接的数学方法？

现在，假设您被要求为从前一次重复创建的程序执行的加法次数查找重复次数 T(n)。我可以看到基本情况可能是 T(1) = T(2) = 0，但我不确定从那里去哪里。

基本上，我问的是如何从给定的重复到代码，反之亦然。由于这看起来像主定理，我想知道是否有一种直接和数学的方法来解决它。

编辑：好的，我已经查看了我过去的一些作业，以找到另一个我被问到的例子，“寻找复发”，这是这个问题的一部分，我在帖子中遇到了麻烦。

> 以最佳方式描述以下程序片段中加法运算次数的递归（当使用 l == 1 和 r == n 调用时）

```
int example(A, int l, int r) {
  if (l == r)
    return 2;
  return (A[l] + example(A, l+1, r);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-20T17:43:43.590

几年前，Mohamad Akra 和 Louay Bazzi 证明了一个推广 Master 方法的结果——它几乎总是更好。你真的不应该再使用主定理了......

例如，参见这篇文章：http: [//courses.csail.mit.edu/6.046/spring04/handouts/akrabazzi.pdf](http://courses.csail.mit.edu/6.046/spring04/handouts/akrabazzi.pdf)

基本上，让你的递归看起来像论文中的等式 1，挑选系数，并整合定理 1 中的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-13T05:44:19.743

扎卡里：

> 假设你得到了这个重复：
> 
> r(n) = 2*r(n-2) + r(n-1); r(1) = r(2) = 1
> 
> 这实际上是主定理的形式吗？如果是这样，用语言来说，它在说什么？

我认为你的递归关系所说的是，对于以“n”为参数的“r”函数（代表你输入的数据集的总数），无论你在数据集的第 n 个位置得到什么是第 n-1 个位置的输出加上第 n-2 个位置的结果的两倍，没有进行非递归工作。当您尝试解决递归关系时，您正在尝试以不涉及递归的方式表达它。

但是，我认为这不是主定理方法的正确形式。您的陈述是“具有恒定系数的二阶线性递推关系”。显然，根据我的旧离散数学教科书，这是解决递归关系所需的形式。

这是他们提供的表格：

```
r(n) = a*r(n-1) + b*r(n-2) + f(n) 
```

因为'a'和'b'是一些常数，f(n)是n的一些函数。在您的陈述中，a = 1、b = 2 和 f(n) = 0。只要 f(n) 等于零，递归关系就称为“同质”。所以，你的表达是同质的。

我不认为你可以使用主方法定理来解决同质递归关系，因为 f(n) = 0。主方法定理的任何情况都不允许这样做，因为任何事物的 n-to-the-power-of-anything 都可以'不等于零。我可能是错的，因为我不是这方面的专家，但我不认为使用主方法解决同质递归关系是可能的。

我认为解决齐次递推关系的方法是通过 5 个步骤：

1) 形成特征方程，其形式为：

```
x^k - c[1]*x^k-1 - c[2]*x^k-2 - ... - c[k-1]*x - c[k] = 0 
```

如果您的齐次递归关系中只有 2 个递归实例，那么您只需将方程更改为二次方程，其中

```
x^2 - a*x - b = 0 
```

这是因为形式的递归关系

```
r(n) = a*r(n-1) + b*r(n-2) 
```

可以重写为

```
r(n) - a*r(n-1) - b*r(n-2) = 0 
```

2）将递推关系改写为特征方程后，接下来找到特征方程的根（x [1]和x [2]）。

3) 有了您的根，您的解决方案现在将是以下两种形式之一：

```
if x[1]!=x[2]
    c[1]*x[1]^n + c[2]*x[2]^n
else
    c[1]*x[1]^n + n*c[2]*x[2]^n 
```

当 n>2 时。4) 使用新形式的递归解决方案，您可以使用*初始条件*（r(1) 和 r(2)）找到 c[1] 和 c[2]

以您的示例为例，这就是我们得到的：

1) r(n) = 1*r(n-1) + 2*r(n-2) => x^2 - x - 2 = 0

2) 求解 x

```
x = (-1 +- sqrt(-1^2 - 4(1)(-2)))/2(1)

    x[1] = ((-1 + 3)/2) = 1
    x[2] = ((-1 - 3)/2) = -2 
```

3) 由于 x[1] != x[2]，您的解决方案具有以下形式：

```
c[1](x[1])^n + c[2](x[2])^n 
```

4) 现在，使用您的初始条件找到两个常数 c[1] 和 c[2]：

```
c[1](1)^1 + c[2](-2)^1 = 1
c[1](1)^2 + c[2](-2)^2 = 1 
```

老实说，我不确定在这种情况下你的常数是什么，我在这一点上停了下来。我猜你必须插入数字，直到你以某种方式得到 c[1] 和 c[2] 的值，这两个值都满足这两个表达式。要么对矩阵 C 执行行缩减，其中 C 等于：

```
[ 1 1   | 1 ]
[ 1 2   | 1 ] 
```

扎卡里：

> 以最佳方式描述以下程序片段中加法运算次数的递归（当使用 l == 1 和 r == n 调用时）

```
int example(A, int l, int r) {
  if (l == r)
    return 2;
  return (A[l] + example(A, l+1, r);
} 
```

这是当 r>l 时给定代码的时间复杂度值：

```
int example(A, int l, int r) {      =>  T(r) = 0
  if (l == r)               =>  T(r) = 1
    return 2;               =>  T(r) = 1
  return (A[l] + example(A, l+1, r);    =>  T(r) = 1 + T(r-(l+1))
}

Total:                      T(r) = 3 + T(r-(l+1)) 
```

否则，当 r==l 时 T(r) = 2，因为 if 语句和 return 都需要每次执行 1 步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T17:31:41.617

您的方法使用递归函数以代码编写，如下所示：

```
function r(int n) 
{
  if (n == 2) return 1;
  if (n == 1) return 1;
  return 2 * r(n-2) + r(n-1);  // I guess we're assuming n > 2
} 
```

我不确定“递归”是什么，但递归函数只是一个调用自身的函数。

递归函数需要一个*转义子句*（一些非递归情况 - 例如，“如果 n==1 返回 1”）以防止*堆栈溢出*错误（即，函数被调用太多以至于解释器内存不足或其他资源）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T17:34:20.690

一个可以实现的简单程序如下所示：

```
public int r(int input) {
    if (input == 1 || input == 2) {
        return 1;
    } else {
        return 2 * r(input - 2) + r(input -1)
    }
} 
```

您还需要确保输入不会导致无限递归，例如，如果开始时的输入小于 1。如果这不是一个有效的情况，则返回一个错误，如果它是有效的，然后返回适当的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-11T23:22:28.460

“我也不完全确定‘复发’是什么”

“递归关系”的定义是一个数字序列，“其域是一些无限的整数集，其范围是一组实数。” 附加条件是描述此序列的函数“根据前一个成员定义序列的一个成员”。

而且，我认为，解决它们背后的目标是从递归定义变为非递归定义。假设你有 T(0) = 2 和 T(n) = 2 + T(n-1) 对于所有 n>0，你必须从表达式“T(n) = 2 + T(n -1)”到像“2n+2”这样的一个。

资料来源： 1) Edgar G. Goodair 和 Michael M. Parmenter 的“图论离散数学 - 第二版” 2) Ellis Horowitz、Sartaj Sahni 和 Sanguthevar Rajasekaran 的“计算机算法 C++”。

# c# - 使用 System.WIndows.Forms.WebBrowser 控件进行打印

> ID：219234
> 
> 赞同：2
> 
> 时间：2008-10-20T17:28:56.583
> 
> 标签：c#, .net, .net-2.0

我在 .net 2.0 框架中使用 th WebBrowser 控件。是否可以更改打印行为，使其始终打印到默认打印机，而不向用户显示任何对话框？这是针对信息亭的，因此总会有一台打印机直接连接到信息亭，并且打印对用户来说应该是无缝的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T17:34:03.343

使用此处显示的方法获取默认 [PrinterName](http://us/library/system.drawing.printing.printersettings.isdefaultprinter.aspx) [http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.isdefaultprinter.aspx](http://msdn.microsoft.com/en-)

然后将该名称传递给 PrintDocument 的 PrinterSettings 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-06T15:53:18.067

只需使用 WebBroser.Print() 方法。
我以前用过它，它直接打印到默认打印机。

# javascript - Visual Studio 2008 不在 JS 文件中显示我的 XML 注释

> ID：219243
> 
> 赞同：1
> 
> 时间：2008-10-20T17:33:11.207
> 
> 标签：javascript, visual-studio-2008, comments, intellisense

```
function Submit_click()
{
  if (!bValidateFields())
    return;
}

function bValidateFields() {
/// <summary>Validation rules</summary>
/// <returns>Boolean</returns>
...
} 
```

因此，当我在 Visual Studio 中键入对我的 bValidateFields() 函数的调用时，智能不会显示我的评论。但是按照[这个](http://weblogs.asp.net/scottgu/archive/2007/06/21/vs-2008-javascript-intellisense.aspx)应该。应该是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T17:50:27.133

我记得一个问题，在 VS 中关闭导航栏会阻止很多 JS 智能感知正常工作。如果您已将其关闭，请尝试再次打开导航栏，看看是否有帮助。

编辑：您可能还必须执行 Ctrl+Shift+J 来强制 IDE 更新智能感知。

Edit2：正如@blub 所说，如果 javascript 有任何问题，智能感知可能会中断。Visual Studio 实际上会评估 javascript 以创建智能感知，因此如果存在语法错误，它可能会失败并且无法完全构建智能感知，或者根本不构建智能感知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-13T00:29:27.650

XML 注释必须在函数内部，而不是在函数之上。在 Visual Studio 2008 中，XML 注释信息仅显示使用 /// <reference... 项引用的文件。

Visual Studio 2010 将为您正在编辑的文件中的函数和您正在引用的文件显示 XML 注释信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T17:43:33.760

您是否尝试`/// <reference>`在外部库顶部添加评论？我过去遇到过这个问题，它解决了我的问题。

# sql - 在 SQL 中将字符串转换为十六进制

> ID：219245
> 
> 赞同：12
> 
> 时间：2008-10-20T17:33:53.687
> 
> 标签：sql, informix, hex

我正在寻找一种将真正的字符串转换为 SQL 中的十六进制值的方法。我正在寻找对 Informix 友好的东西，但我显然更喜欢与数据库无关的东西

这是我现在使用的选择：

```
SELECT SomeStringColumn from SomeTable 
```

这是我想使用的选择： SELECT hex( SomeStringColumn ) from SomeTable

不幸的是，没有那么简单...... Informix 给了我这样的信息： *字符到数字的转换错误*

任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-20T17:55:37.980

你可以使用 Cast 和 fn_varbintohexstr 吗？

```
SELECT master.dbo.fn_varbintohexstr(CAST(SomeStringColumn AS varbinary)) 
FROM SomeTable 
```

我不确定您的数据库系统中是否有该功能，它在 MS-SQL 中。

我刚刚在我的一张表上的 SQL Server MMC 中尝试了它：

```
SELECT     master.dbo.fn_varbintohexstr(CAST(Addr1 AS VARBINARY)) AS Expr1
FROM         Customer 
```

这按预期工作。可能我在 MS-SQL 上称为 master.dbo.fn_varbintohexstr，可能类似于 informix hex() 函数，所以可以尝试：

```
SELECT     hex(CAST(Addr1 AS VARBINARY)) AS Expr1
FROM         Customer 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-10-28T14:53:28.543

以下适用于 Sql 2005。

```
select convert(varbinary, SomeStringColumn) from SomeTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T17:59:49.500

如果您可以在代码中的数据库客户端中执行此操作，则可能会更容易。

否则，该错误可能意味着内置的 hex 函数无法按您的预期使用您的值。我会仔细检查输入值是否被修剪，首先是格式，它可能就这么简单。然后我会查阅描述 hex 函数的数据库文档，看看它的预期输入是什么，并将其与您的一些值进行比较，找出差异是什么以及如何更改您的值以匹配预期输入的值。

一个简单的谷歌搜索“informix hex function”打开了第一个结果页面，其中包含以下句子：“必须是文字整数或其他返回整数的表达式”。如果您的数据类型是字符串，请先将字符串转换为整数。乍一看，您似乎使用 cast 函数做了一些事情（我对此不确定）。

```
select hex(cast SomeStringColumn as int)) from SomeTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-19T16:30:25.713

关于什么：

```
declare @hexstring varchar(max);
set @hexstring = 'E0F0C0';
select cast('' as xml).value('xs:hexBinary( substring(sql:variable("@hexstring"), sql:column("t.pos")) )', 'varbinary(max)')
from (select case substring(@hexstring, 1, 2) when '0x' then 3 else 0 end) as t(pos) 
```

我在这里看到了这个：http: [//blogs.msdn.com/b/sqltips/archive/2008/07/02/converting-from-hex-string-to-varbinary-and-vice-versa.aspx](http://blogs.msdn.com/b/sqltips/archive/2008/07/02/converting-from-hex-string-to-varbinary-and-vice-versa.aspx)

抱歉，仅适用于 >MS SQL 2005

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-04T00:26:44.807

旧帖子，但在我的情况下，我还必须删除十六进制的 0x 部分，所以我使用了下面的代码。（我正在使用 MS SQL）

`convert(varchar, convert(Varbinary(MAX), YOURSTRING),2)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-25T03:00:54.247

尝试这个：

```
select convert(varbinary, '0xa3c0', 1) 
```

十六进制数需要有偶数位数。要解决这个问题，请尝试：

```
select convert(varbinary, '0x' +  RIGHT('00000000' + REPLACE('0xa3c','0x',''), 8), 1) 
```

# visual-studio - 源代码控制和错误修复的最佳实践

> ID：219249
> 
> 赞同：5
> 
> 时间：2008-10-20T17:34:19.020
> 
> 标签：visual-studio, svn, version-control, patch

如果我们需要发布一个不包括已提交的当前开发或当前版本的任何更改的错误补丁，应该如何使该过程更安全并降低开销？

我们目前在一个主要在 Visual Studio 2008 中开发的小型（3 名开发人员）团队中使用 Subversion 进行源代码控制。我们预计该团队可能在明年将 8 名开发人员分组，并且任何先前版本的支持都会变得更加复杂。虽然大多数客户都在使用当前版本，但有些客户落后了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T17:37:18.033

源代码控制可以很容易地处理这个问题，并且是为此而设计的。

当您达到发布的稳定期时，应该完成一个分支。重要的是，在完成之前不要开始下一个版本的任何工作。

该版本的任何错误修复都应在该分支中完成。这可以防止即将发布的新代码污染错误修复。完成错误修复后，您可以将该更改合并到主干以及任何其他必要的版本。

不要忘记将错误编号放在评论中，因为这将使跟踪提交更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T17:36:18.720

怎么样：每个主要版本都有一个分支，根据需要将错误修复应用于分支，并应用（或合并）回主干。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T17:39:44.627

在我工作的地方，我们有几个项目同时进行。为了避免这个问题，我们有几个源代码的变种。例如，第一个版本是 Variant 1.0。我们为此版本创建了一个分支，例如 Variant 2.0，用于所有未来的开发。如果我们需要修复错误，我们会在当前为 1.0 且可以发布的主变体上进行。当 Variant 2.0 准备好投入生产时，我们将它与主分支（在本例中为 1.1）上的任何内容合并，并成为新的主干。在某一时刻，我们有 4 个分支同时运行。

合并代码可能很耗时，并且您必须小心不要在合并期间引入新的错误，但如果您有一个不错的代码比较工具，那么它应该不会太糟糕。不久前，我们使用 Beyond Compare 对 10,000 个文件的源目录进行了合并，只花了一个上午。

# java - 即使在简单的 POJO Java 类中实现 java.io.Serializable 也是最佳实践吗？

> ID：219276
> 
> 赞同：6
> 
> 时间：2008-10-20T17:42:40.800
> 
> 标签：java, serialization

一般来说，让简单的 POJO Java 类实现 java.io.Serializable 是最佳实践吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-20T18:12:21.020

一般不会。Joshua Bloch 说要[明智地实现 Serializable](http://my.safaribooksonline.com/0201310058/ch10lev1sec1 "明智地实现 Serializable")。他描述的缺点总结：

*   降低以后更改类实现的灵活性 - 序列化形式是类 API 的一部分
*   使一些错误和安全漏洞更有可能 - 攻击者可以访问序列化字节流中的类内部
*   增加了测试负担——现在你必须测试序列化！
*   给子类的作者带来负担——他们也必须使他们的子类可序列化

当然，有时你需要一个 POJO 来实现 Serializable，比如 RMI，但如果不需要，你的代码没有它会更简单、更安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T17:46:15.300

仅当您需要能够序列化它们时。否则不值得[努力](http://en.wikipedia.org/wiki/YAGNI)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T18:36:53.217

这更多地取决于需求。在 Web 应用程序的上下文中，一些 Web 服务器（例如 Tomcat 6）甚至强制序列化我们在会话中存储其对象的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T19:59:48.103

为了解决序列化表单不向后兼容这一事实（例如在正在运行的系统上动态重新加载类时），我所做的一件事是将要保存的字段加载到哈希图中，然后对其进行序列化。这样，即使缺少字段，我也可以始终反序列化数据。您可能必须为缺少的键提供默认值，但这比弄乱字段顺序要好。

# javascript - 你如何管理你的 Javascript 文件？

> ID：219285
> 
> 赞同：24
> 
> 时间：2008-10-20T17:46:06.050
> 
> 标签：javascript

如今，除了我们自己编写的 Javascript 文件之外，我们每页还有大量的 Javascript 库。你如何管理它们？你如何有组织地缩小它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T18:12:05.497

**组织**

我的所有脚本都保存在一个目录结构中，每当我在网站上工作时都会遵循该目录结构。目录结构通常是这样的：

```
+--root
   |--javascript
      |--lib
         |--prototype.js
         |--scriptaculous
            |--scriptaculous.js
            |--effects.js
            |--..
      |--myOwnScript.js
      |--myOwnScript2.js 
```

如果在偶然的情况下，我在一个团队中工作使用了大量的脚本，那么我通常会创建一个*自定义*目录，我们将在其中按关系组织脚本。不过，这种情况并不经常发生。

**压缩**

虽然有很多不同的压缩器和混淆器，但我总是回到[YUI Compressor。](http://developer.yahoo.com/yui/compressor/)

**包容性**

除非站点使用某种形式的母版页、CMS 或其他规定可以包含在我无法控制的页面上的内容，否则我只*为给定页面*包含必要的脚本，只是为了提高性能。如果页面不需要任何脚本，则该页面上不会包含脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T17:55:21.863

首先，[**YUI 压缩机**](http://developer.yahoo.com/yui/compressor/)。

让它们井井有条取决于你，但我见过的大多数小组都刚刚**提出了一个**对他们的应用有意义的约定。

**以这样一种方式打包文件**通常是最佳的，即您有少量的包可以包含在任何给定的页面上以实现最佳缓存。

您还可以考虑将您的 javascript 划分为**易于**在团队中共享的部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-20T20:06:24.347

Cal Henderson（Flickr 成名）不久前写了[Serving JavaScript Fast](http://www.thinkvitamin.com/features/webapps/serving-javascript-fast)。它涵盖资产交付，而不是组织，但它可能会回答您的一些问题。

以下是要点：

*   是的，您应该在生产环境中连接 JavaScript 文件以最小化 HTTP 请求的数量。
*   但是您可能不想连接成一个巨大的文件；您可能希望将其分解为逻辑部分并将传输成本分散到多个页面上。
*   gzip 压缩很好，但是您不应该将 gzipped 资源提供给 IE <= 6，因此您可能还想缩小/压缩您的 JavaScript。

我将添加一些我自己的要点：

*   您应该想出一个适用于开发和生产的解决方案。在开发模式下，它应该按需拉入额外的 JavaScript 文件；在生产中，它应该提前捆绑所有东西。从一种行为切换到另一种行为应该像设置标志一样简单。
*   Rails 2.0 通过[资产缓存](http://maintainable.com/articles/rails_asset_cache)处理所有这些；其他 Web 应用程序框架可能会提供类似的解决方案。
*   正如另一个答案所暗示的，将第三方库放在`lib`目录中是一个好的开始。如果有意义的话，你也可以将自己的 JS 文件分成子目录。理想情况下，您将能够以这样一种方式排列它们，即给定子目录中的文件可以连接到一个文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T18:06:24.230

我将有一个用于所有 javascript 的文件夹，以及一个用于 3rd 方/共享库的子文件夹，以及用于网站每个组件的子文件夹，以保持一切井井有条。

例如：

```
/
+--/javascript/
    +-- lib/
    +-- admin/
    +-- compnent1/
    +-- compnent2/ 
```

然后在构建过程中通过压缩器/混淆器运行所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T18:07:56.660

我最近一直在使用这个： [http ://code.google.com/apis/ajaxlibs/](http://code.google.com/apis/ajaxlibs/)

然后有一个“jscripts”文件夹，用于保存我的自定义代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-20T18:51:02.440

在我的上一个项目中，我们有三种 JS 文件，它们都在一个 JS 文件夹中。

1.  **库代码**。大多数页面都使用了一堆函数，所以它们被放在一个或几个文件中。
2.  **类**。这些有自己的文件，根据需要组织在文件夹中，但不一定如此。
3.  **特设 JS**。特定于该页面的代码。这些文件保存在与它们应该运行的 JSP 页面同名的文件中。

最大的努力是将大部分代码放在前两种上，让自定义代码只知道要调用什么以及何时调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-20T19:14:58.927

这可能与您正在寻找的方法不同，但我一直在尝试在我们的博客引擎中使用 JavaScript 模板的想法。简而言之，您使用数据库将 Javascript 模板分配给页面 id，它将动态包含和缩小与该模板关联的所有 JavaScript 文件，并在服务器端缓存中创建一个以模板 id 作为文件名的文件。加载页面时，它会调用模板文件，该文件首先检查文件是否存在于缓存中，如果存在则加载它。如果它不存在，它会即时创建并包含它。我还使用模板文件对综合 JavaScript 文件进行 gzip 压缩。

模板思想适用于站点范围的 JavaScript（如 JavaScript 库），但它不涵盖特定于页面的 JavaScript。但是，您仍然可以通过包含与上述相同的第二个文件来对特定于页面的 JavaScript 使用相同的方法。

# version-control - 使用小型开发团队实施 Team Foundation Server

> ID：219296
> 
> 赞同：15
> 
> 时间：2008-10-20T17:50:41.563
> 
> 标签：version-control, tfs

我们有一个 3 人的小型开发团队，目前正在使用 Subversion 进行源代码控制。我们预计该团队将在未来 6 到 12 个月内将其分组为 8 名成员。我们正在考虑将源代码控制更改为 TFS 或 Mercurial 以改进分支。我知道 TFS 仅用于分支是多余的，但这是当前的需要，TFS 的其他功能可以帮助我们的团队。我们对 TFS 的主要担忧之一是我们听说部署它有很多开销，尤其是在一个小团队中。我希望让社区了解可能涉及多少开销、使流程更容易的建议以及社区可能认为对做出实施决定有用的任何其他内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-20T18:07:26.693

以我的经验，TFS 运行良好，即使对于小型团队也是如此。如果您的开发人员总数为 5 人或更少，您可以使用相对实惠的 Workgroup 版本：在此之上，您将不得不为真实的东西付费，其定价绝对在“企业”领域......

开始使用 TFS 的最大障碍是安装该死的东西：这个过程似乎是为最大程度地恶化而设计的。（2005 年到 2008 年升级“过程”的“设计者”鄙视用户的程度甚至超出了这一点：幸运的是，您可以从 TFS2008 开始，不必担心升级一阵子）。

但是，如果您*完全按照*[说明](http://www.microsoft.com/downloads/details.aspx?FamilyID=FF12844F-398C-4FE9-8B0D-9E84181D9923&displaylang=en) 进行操作，则应该尝试 2-3 次，并且硬件要求并不像看起来那么糟糕。我的 3 开发人员 TFS 设置在具有 4GB RAM 的上一代戴尔笔记本电脑上运行非常舒适。

 *TFS 的一大优势是 VS 集成：这真的非常非常好，并且搁置和分支的实现方式比我见过的任何其他系统都更直接。

TFS 中的流程指导和支持没有那么精致，但仍然非常有用。对几种开发方法的可插拔支持非常好，并且已经有一些第三方插件（例如[Scrum](http://www.scrumforteamsystem.com/en/default.aspx)）可用。

总而言之，尝试 TFS 肯定不会有什么坏处：如果您订阅了 MSDN，您可能已经拥有 Workgroup 版以及完整版的试用版：否则，您也可以[从 Microsoft 下载后者](http://www.microsoft.com/downloads/details.aspx?FamilyId=B0155166-B0A3-436E-AC95-37D7E39A440C&displaylang=en)。

**更新，2010 年 4 月 12 日：**随着[Team Foundation Server 2010](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/premium)的发布，安装和升级过程有了很大*改进*。新的 TFS2010 安装不会超过几分钟（假设您已经有一个 SQL Server 2008 实例启动并运行），甚至我的 TFS2008 设置的就地升级也被证明是完全轻松的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-22T14:18:09.853

*当您完全*按照给定的指南逐步进行时，TFS 的设置并不太复杂。我们在一个小团队中使用它大约一年了，我不想再错过它了。

尤其是当您使用 tfs 的多个部分时，例如版本控制和工作项跟踪，甚至可能是团队构建，您的团队将受益于各个部分的紧密集成。

例如，您可以在签入代码更改时链接到工作项。然后，您使用 teambuild 运行自动构建，它会使用构建号自动更新您的工作项。因此，之后您可以例如在错误工作项中看到包含错误修复的内部版本号。

我们还使用 sharepoint wiki 进行文档和规划，尽管我不是最大的 sharepoint 粉丝......

要点是与 IDE 的完美集成以及跟踪 Teamsystem Web Access 的工作项，它允许您通过 Web 界面至少控制您的工作项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T18:02:37.560

已经有一段时间了，但我想大约需要半天的时间来完成设置，再加上一些时间事先阅读手册以确保您知道自己在做什么。配置不会花费太长时间——您需要将所有开发人员添加为许可用户。设置项目并不难。我通常设置 AD 组以映射项目角色并将这些组添加到适当的角色。我在大约 1/2 小时内建立了一个新项目。

注意：除了源代码控制，我不使用 TFS 的任何功能。如果您计划进行项目跟踪，使用项目共享点站点等，您的里程会相差很大。我发现在我们的项目（2-3 名开发人员）中，wiki 对项目管理同样有效。

# dll - 链接到比 Visual Studio 2005 中已安装版本更旧的 .dll 版本

> ID：219305
> 
> 赞同：1
> 
> 时间：2008-10-20T17:53:49.480
> 
> 标签：dll, visual-studio-2005

请原谅大量的背景信息，但这是一个相当具体的问题。

我有一个创建 .dll 文件的 Visual Studio 2005 项目。该项目依赖于另一家公司“BigCorp”的 .dll，它与 BigCorp 的软件一起安装。

理想情况下，我创建的 dll 应该可以与 BigCorp 的任何（向后兼容）版本的 dll 一起使用。也就是说，如果我链接到版本 4.3.2.100，如果用户升级 BigCorp 的应用程序以使 .dll 版本为 4.3.3.20，我的程序应该仍然可以工作。

这在 VS2005 中非常简单，通过查看项目的引用，选择 .dll 并确保“特定版本”属性为 false。

现在我的实际问题是：是否可以指定一个比安装在构建项目的机器上的版本**更旧的 .dll 的基本版本？**继续我之前的示例，我的构建机器安装了 4.3.3.20 版本，但我希望它生成的 .dll 与尚未升级的安装兼容，并且只安装了 4.3.2.100 版本。

似乎VS解析了.dll的路径并根据它找到的文件检测运行时版本。试图通过直接在 .vbproj 或 .csproj 中指定版本号来覆盖它，即

```
<Reference Include="BigCorp.Program.Component, Version=4.3.2.100, Culture=neutral, PublicKeyToken=abc123def456654fed321cba, processorArchitecture=MSIL">
```

没有效果。尝试在具有较旧版本的计算机上注册我的程序集失败，并出现旧的“无法加载文件或程序集”错误，因为它试图找到 BigCorp 的 .dll 的较新版本。

我想做的甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T18:10:45.767

您可以通过直接从项目中引用旧 DLL 来执行此操作，因此将 .dll 文件复制到您的项目中，然后从那里引用它。

我一直在用我的各种开发项目来做这件事。通常我会在我的项目中放置一个“References”文件夹来保存引用的 DLL

# javascript - 如何使用 javascript 计时来控制鼠标停止和鼠标移动事件

> ID：219322
> 
> 赞同：6
> 
> 时间：2008-10-20T18:01:36.593
> 
> 标签：javascript, timeout, onmousemove

所以我在 aspx 页面上有一个控件（地图）。我想编写一些 javascript 来设置以下内容：

1.  当鼠标在控件上停止时 = 一些代码

2.  当鼠标移动 = 一些代码时（但仅当移动时间超过 250 mil 秒时）

这可以在停止时触发代码，然后在移动时触发......

```
function setupmousemovement() {
var map1 = document.getElementById('Map_Panel');
var map = document.getElementById('Map1');
map1.onmousemove = (function() {
    var onmousestop = function() {
            //code to do on stop
    }, thread;

    return function() {
        //code to do on mouse move
        clearTimeout(thread);
        thread = setTimeout(onmousestop, 25);
    };
    })();
}; 
```

但我不知道如何在移动代码中引入延迟。我以为我有这个...

```
function setupmousemovement() {
var map1 = document.getElementById('Map_Panel');
var map = document.getElementById('Map1');
map1.onmousemove = (function() {
    var onmousestop = function() {
            //code to do on stop
            clearTimeout(thread2);
    }, thread;

    return function() {
        thread2 = setTimeout("code to do on mouse move", 250);
        clearTimeout(thread);
        thread = setTimeout(onmousestop, 25);
    };
    })();
}; 
```

但它的行为并不像我想象的那样。移动中的“thread2”永远不会被停止清除。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T18:54:56.893

这是一个棘手的问题。一点点修修补补导致了这个：

```
function setupmousemovement() {

  var map1 = document.getElementById('Map_Panel');
  map1.onmousemove = (function() {
    var timer,
        timer250,
        onmousestop = function() {

          // code to do on stop

          clearTimeout( timer250 ); // I'm assuming we don't want this to happen if mouse stopped
          timer = null;  // this needs to be falsy next mousemove start
        };
    return function() {
      if (!timer) {

        // code to do on start

        timer250 = setTimeout(function () { // you can replace this with whatever

          // code to do when 250 millis have passed

        }, 250 );
      }
      // we are still moving, or this is our first time here...
      clearTimeout( timer );  // remove active end timer
      timer = setTimeout( onmousestop, 25 );  // delay the stopping action another 25 millis
    };

  })();

}; 
```

您的代码不起作用的原因是 mousemove 在鼠标移动时反复触发，并且您每次都开始新的超时。

# php - PHP/MySQL 登录在一台服务器上工作 (PHP 5.0.2) 但在另一台服务器上不起作用 (PHP 5.1.6)

> ID：219323
> 
> 赞同：0
> 
> 时间：2008-10-20T18:02:36.140
> 
> 标签：php, mysql

这是我用来验证用户身份的精简版，它在我的 PHP v5.0.2/MySQL 4.0.21 服务器上运行良好，但在我的 PHP v5.1.6/MySQL v5.0.45 服务器上运行失败。

在下面的代码中，我是否应该知道新版本的 PHP 和 MySQL 可能不支持的任何内容？全局变量已启用。

```
<?php
  if(!isset($HTTP_POST_VARS['username'])&&!isset($HTTP_POST_VARS['password']))
  {
    //Visitor needs to enter a name and password
?>
    <h1>Please Log In</h1>
    This page is secret.
    <form method="post" action="<?php echo $PHP_SELF;?>">
    <table border="1">
    <tr>
      <th> Username </th>
      <td> <input type="text" name="username"> </td>
    </tr>
    <tr>
      <th> Password </th>
      <td> <input type="password" name="password"> </td>
    </tr>
    <tr>
      <td colspan="2" align="center">
        <input type="submit" value="Log In">
      </td>
    </tr>
    </table>
    </form>
<?php
  }
  else
  {
    // connect to mysql
    include('../cgi-bin/db.php');

    $username = $HTTP_POST_VARS['username'];
    $password = md5($HTTP_POST_VARS['password']);

    if(!$db)
    {
      echo 'Cannot connect to database.';
      exit;
    }
    // select the appropriate database
    $mysql = mysql_select_db('quickwebcms');
    if(!$mysql)
    {
      echo 'Cannot select database.';
      exit;
    }

    // query the database to see if there is a record which matches
    $query = "select count(*) from auth where
              username = '$username' and
              password = '$password'";

    $result = mysql_query( $query );
    if(!$result)
    {
      echo 'Cannot run query.';
      exit;
    }

    $count = mysql_result( $result, 0, 0 );

    if ( $count > 0 )
    {
      // visitor's name and password combination are correct
      echo '<h1>Here it is!</h1>';
      echo 'I bet you are glad you can see this secret page.';
    }
    else
    {
      // visitor's name and password combination are not correct
      echo '<h1>Go Away!</h1>';
      echo 'You are not authorized to view this resource.';
    }
  }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T18:08:57.330

我猜可能是因为`$HTTP_POST_VARS`. 尝试将其替换为`$_POST`. 如果它仍然不起作用，请尝试将以下代码段放在后面`<?php`：

```
// Enable displaying errors
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T18:14:43.090

尝试在 php.ini 中设置[register_long_arrays](http://www.php.net/manual/en/ini.core.php#ini.register-long-arrays) = On ，看看是否能解决您的问题。

另一方面，您不应该像那样构建查询。研究使用[PHP MySQL 转义](http://www.php.net/mysql_real_escape_string)。

# .net - VS 2005 设置项目：使用一个 MSI 部署多个项目

> ID：219327
> 
> 赞同：3
> 
> 时间：2008-10-20T18:04:25.823
> 
> 标签：.net, deployment, windows-installer, installation

我的解决方案中有 3 个要部署的项目。是否有一种使用 Visual Studio 的安装项目使用一个 MSI 部署所有三个应用程序并让用户决定他要在安装过程中安装哪些应用程序的快捷方式？

我为 3 个单独的应用程序设置了项目，我还有一个包含其他三个项目输出的总体设置项目。我是在正确的轨道上还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:55:03.947

好的，这就是我最终要做的。我构建了我的三个 MSI，然后构建了一个小型启动屏幕应用程序，它为每个应用程序提供了一个复选框。当用户在该初始屏幕上单击安装时，它会使用 /qb- 选项调用 msiexec，以按顺序在所有选定的应用程序上显示最小化安装。

然后我使用 SFX Compiler 将我的启动屏幕应用程序和三个安装程序打包在一起，然后启动屏幕将在提取后显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T11:26:48.093

您可以尝试使用 Wix 来创建您的安装程序。WixUI_FeatureTree 和 WixUI_Mondo 是 GUI 选项，旨在允许用户自定义包运行时安装的功能。

[http://www.codeproject.com/KB/install/WixTutorial2.aspx](http://www.codeproject.com/KB/install/WixTutorial2.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-09T01:19:18.647

我认为您想使用 Windows Installer 条件。它们[在 MSDN 上的演练中进行了解释。](http://msdn.microsoft.com/en-us/library/k3bb4tfd%28vs.80%29.aspx)转到标记为：将示例添加到安装程序的部分

# python - django,fastcgi：如何管理长时间运行的进程？

> ID：219329
> 
> 赞同：8
> 
> 时间：2008-10-20T18:05:22.327
> 
> 标签：python, django, fastcgi

我继承了一个 django+fastcgi 应用程序，需要对其进行修改以执行冗长的计算（最多半小时或更长时间）。我想要做的是在后台运行计算并返回“你的工作已经开始”类型的响应。在进程运行时，对 url 的进一步点击应返回“您的作业仍在运行”，直到作业完成，此时应返回作业的结果。对 url 的任何后续命中都应返回缓存的结果。

我是 django 的新手，十年来没有做过任何重要的网络工作，所以我不知道是否有内置的方法来做我想做的事。我已经尝试通过 subprocess.Popen() 启动进程，除了它在进程表中留下一个失效条目之外，它工作正常。我需要一个干净的解决方案，可以在完成后删除临时文件和进程的任何痕迹。

我还尝试过 fork() 和线程，但尚未提出可行的解决方案。对于我看来是一个非常常见的用例，是否有规范的解决方案？FWIW 这只会在流量非常低的内部服务器上使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-29T15:51:23.920

我现在必须解决类似的问题。它不会是一个公共站点，而是类似地，一个低流量的内部服务器。

技术限制：

*   长期运行过程的所有输入数据都可以在其开始时提供
*   长时间运行的进程不需要用户交互（启动进程的初始输入除外）
*   计算时间足够长，以至于结果无法通过即时 HTTP 响应提供给客户端
*   需要来自长时间运行过程的某种反馈（某种进度条）。

因此，我们至少需要两个网络“视图”：一个用于启动长期运行的进程，另一个用于监控其状态/收集结果。

我们还需要某种进程间通信：将用户数据从*发起*方（基于 http 请求的 Web 服务器）发送到*长时间运行的进程*，然后将其结果发送到*接收*方（同样是 Web 服务器，由 http 请求驱动）。前者容易，后者不那么明显。与普通的 Unix 编程不同，接收者最初是未知的。接收者可能是与发起者不同的进程，它可能会在长时间运行的作业仍在进行中或已经完成时开始。所以管道不起作用，我们需要一些长期运行过程的结果。

我看到两种可能的解决方案：

*   将长时间运行的进程的启动分派给长时间运行的作业管理器（这可能是上述 django-queue-service 的内容）；
*   将结果永久保存在文件或数据库中。

我更喜欢使用临时文件并记住它们在会话数据中的位置。我不认为它可以变得更简单。

作业脚本（这是长期运行的过程）`myjob.py`，：

```
import sys
from time import sleep

i = 0
while i < 1000:
    print 'myjob:', i  
    i=i+1
    sleep(0.1)
    sys.stdout.flush() 
```

django`urls.py`映射：

```
urlpatterns = patterns('',
(r'^startjob/$', 'mysite.myapp.views.startjob'),
(r'^showjob/$',  'mysite.myapp.views.showjob'),
(r'^rmjob/$',    'mysite.myapp.views.rmjob'),
) 
```

django 意见：

```
from tempfile import mkstemp
from os import fdopen,unlink,kill
from subprocess import Popen
import signal

def startjob(request):
     """Start a new long running process unless already started."""
     if not request.session.has_key('job'):
          # create a temporary file to save the resuls
          outfd,outname=mkstemp()
          request.session['jobfile']=outname
          outfile=fdopen(outfd,'a+')
          proc=Popen("python myjob.py",shell=True,stdout=outfile)
          # remember pid to terminate the job later
          request.session['job']=proc.pid
     return HttpResponse('A <a href="/showjob/">new job</a> has started.')

def showjob(request):
     """Show the last result of the running job."""
     if not request.session.has_key('job'):
          return HttpResponse('Not running a job.'+\
               '<a href="/startjob/">Start a new one?</a>')
     else:
          filename=request.session['jobfile']
          results=open(filename)
          lines=results.readlines()
          try:
               return HttpResponse(lines[-1]+\
                         '<p><a href="/rmjob/">Terminate?</a>')
          except:
               return HttpResponse('No results yet.'+\
                         '<p><a href="/rmjob/">Terminate?</a>')
     return response

def rmjob(request):
     """Terminate the runining job."""
     if request.session.has_key('job'):
          job=request.session['job']
          filename=request.session['jobfile']
          try:
               kill(job,signal.SIGKILL) # unix only
               unlink(filename)
          except OSError, e:
               pass # probably the job has finished already
          del request.session['job']
          del request.session['jobfile']
     return HttpResponseRedirect('/startjob/') # start a new one 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T18:13:38.067

也许你可以反过来看问题。

也许你可以试试[DjangoQueueService](http://code.google.com/p/django-queue-service/)，让一个“守护进程”监听队列，看看是否有新的东西并处理它。

# jquery - Internet Explorer (IE) 中的 JQuery 圆角搞砸了

> ID：219338
> 
> 赞同：7
> 
> 时间：2008-10-20T18:07:47.270
> 
> 标签：jquery, css, internet-explorer, rounded-corners

我正在使用 JQuery 的 jquery.corner.js 在一些 td 标签上创建圆角，它们在 IE 中看起来很好，除了

1.  如果您打开一个新标签，然后返回该页面
2.  如果您转到另一个选项卡，请单击一个链接，然后返回该页面
3.  如果您将鼠标悬停在执行 javascript 的 div / 菜单上（我认为）。

圆角被水平线替换，并且 td 标签内的文本被下推。然而，一旦页面被刷新，渲染就会恢复正常。在所有情况下，它都可以在 Firefox 中完美运行。

有任何想法吗？

作为参考，我使用的 Javascript 代码如下（这是 MOSS 2007 页面）：

```
$(document).ready(function(){
   $("table.ms-navheader td").corner("top"); 
}); 
```

这是一个完美显示问题的示例 HTML 页面：

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.2.6.js"></script>
        <script type="text/javascript" src="jquery.corner.js"></script>
        <script type="text/javascript">
          <!--

            $(document).ready(function()
            {
                $("div").corner("top");
                $("td").corner(); 
            });

          //-->
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td style="background-color: blue">
                    TD that will be messed up.
                </td>
            </tr>
        </table>
        <div style="background-color: green">
            divs don't get messed up.
        </div>
    </body>
</html> 
```

在上面的代码中，一旦你打开一个新标签，TD 就会被搞砸，但 div 不会。我对 MOSS 发出的 HTML 没有太多控制权，否则我可能会咬紧牙关，在这里使用 DIV 而不是表格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-18T10:28:26.800

*[在 IE 中，我使用DD_Roundies](http://www.filamentgroup.com/lab/achieving_rounded_corners_in_internet_explorer_for_jquery_ui_with_dd_roundi/)*库获得了更好的结果。不过只能在 IE 中使用。对于 Firefox，您需要添加 -moz-border-radius 样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T18:23:18.360

我同意 RichH 的观点，我认为所有流行的 JavaScript 库在尝试创建圆角时都有一些不足之处。

我总是发现自己在使用cornershop：[http](http://wigflip.com/cornershop/) ://wigflip.com/cornershop/ ，它是一个图像/css 生成器，可以消除手动制作圆角边缘的痛苦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-21T10:05:12.033

你可能想试试这个插件而不是 jquery.curvycorners.js。

我们在我们的项目中使用它完全没有问题 - 您可能需要附加/前置跨度，但它非常简单。

最好的事情-> 默认情况下抗锯齿。

[http://blue-anvil.com/jquerycurvycorners/test.html](http://blue-anvil.com/jquerycurvycorners/test.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-20T18:15:29.500

我在圆角 Javascript 库（尤其是 IE6 和 7）方面遇到了麻烦

最后，我回到了涉及图像的更传统的方法。设置起来有点麻烦，但效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-24T13:24:05.843

curvycorners.js 和 jquery.curvycorners.js 仅在您不想使用任何转换时才有效。

如果您有手风琴或淡入/淡出标签效果，则带有圆角的元素在更改后无法正确呈现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-15T22:04:17.797

要使 IE 中的 jquery curvy 角工作，只需给元素一个背景颜色。不知道为什么会这样......就像魔术一样！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-04T12:58:03.507

我也遇到过类似的问题，即使在 Firefox 中，我发现如果将“角”应用于具有设置背景颜色的类的元素，则角永远不会被应用。在我的例子中，我添加了一个名为“selected”的类，它为 UL 中选定的“选项卡”提供了不同的背景颜色。为了防止这种情况，我在添加角后使用 js 而不是 css 应用背景颜色：

```
$('.selected').css('background-color', '#3296C0'); 
```

此外，您还添加了一个 :hover 来更改背景颜色，这些角在悬停时会变回方形。到目前为止，我的解决方案是使用重新应用角的 onhover 事件（您也可以在此处设置颜色）。

```
 $('#top-nav li a').hover(function(){
        $(this).corners('top');
    }); 
```

至于 IE6 - 一场噩梦 - 如果我能检测到 IE6 而只是不添加让它们成正方形的角，那就不会那么糟糕了。甚至还没有尝试过 IE 7 ......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-20T18:17:07.517

想象你遇到的问题有点困难，一个链接真的很有帮助。确保为表格的每个单元格定义了高度和宽度属性。这可能是一个 hasLayout 问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-12T23:48:14.723

我已经搜索并没有找到 jquery UI 选项卡中圆角的解决方案。jquery themeroller 支持圆角，但文档说它们在 IE 中不起作用。

这是一个很好的页面，有 25 种不同的圆角方法 [http://www.cssjuice.com/25-rounded-corners-techniques-with-css/](http://www.cssjuice.com/25-rounded-corners-techniques-with-css/)

# java - 使用带有 IMAP 的 javax.mail 从 GMail 获取消息的 UID

> ID：219343
> 
> 赞同：3
> 
> 时间：2008-10-20T18:09:13.210
> 
> 标签：java, email, gmail, imap

我正在使用 javax.mail 使用 IMAP 从 GMail 检索邮件。我还想获取应用于每封邮件的标签，因此我正在遍历商店中的所有文件夹（实际上是标签）并相互下载邮件。

我使用[ImapFolder](http://java.sun.com/products/javamail/javadocs/javax/mail/UIDFolder.html#getUID(javax.mail.Message))的 getUID 方法来获取每封邮件的 UID，然后比较它们以识别不同文件夹中的相同邮件。

例如，如果我将邮件“Hello”标记为“A”和“B”，我将遍历文件夹“Inbox”、“A”和“B”，并从每个文件夹中获取相同的邮件；所以我可以保留一份标有“收件箱”、“A”和“B”的副本。

但是getUID方法返回的是一个相对于文件夹的ID，所以同一封邮件在不同的文件夹中可能有不同的ID，或者不同的邮件在不同的文件夹中可能有相同的ID。在示例中。“HellO”可能在“A”中显示为邮件 1，在“B”中显示为邮件 2。

有没有一种方法可以为每封邮件获取与商店相关的 ID，而与文件夹无关？或者更好的方法来获取附加到单个邮件的标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-21T12:55:50.143

[从gmail 论坛](http://groups.google.com/group/Gmail-Help-POP-and-IMAP-en/browse_thread/thread/17d4d02403b8f77c/ecc0065603bb08bf#ecc0065603bb08bf)得到答案：有一个“message-id”标题，其中包含我正在寻找的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T20:27:27.127

我认为唯一的方法是使用您根据消息头自己计算的哈希值。

# .net - WinForms：存储在 .resx 文件中的值会发生什么变化？

> ID：219344
> 
> 赞同：4
> 
> 时间：2008-10-20T18:10:17.997
> 
> 标签：.net, winforms

存储在表单的 resx 文件中的名称/值对会发生什么情况？当我编译我的项目时，它们是否被编译成二进制文件？

对于我的特定项目，我希望能够手动编辑其中一个值而无需重新编译（app.config-style），有没有一种简单的方法可以做到这一点？

**编辑：**有些人似乎没有得到我的问题。在执行 WinForms 时，如果 InitializeComponents() 内部的设置依赖于表单的资源文件，只需将构建操作设置为始终复制并将内容类型设置为 content 会破坏表单。我确信有一个简单的解决方案，但之前没有使用过资源文件，我对它会是什么感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T18:20:35.497

如果将值放在 .resx 文件中，默认情况下它们会编译到您的程序集（或附属资源程序集）中。

如果您希望能够在运行时编辑值，您应该真正使用 app.config 或注册表。我个人更喜欢 app.config 文件。

将值放入 app.config 文件中的最简单方法是使用项目属性中的设置选项卡。

如果您坚持将值保存在 .resx 文件中，我想您可以将该特定的 .resx 文件视为 XML 内容文件，然后将其复制到输出目录。不过，我不确定有哪些框架类可以帮助您解析此文件并使用其内容。您可能不得不求助于 XmlDocument 和您自己的 XL 解析来提取/修改这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T18:16:17.500

当然可以在任何文本编辑器中打开它，它只是 xml。您可以告诉 VS 不要将它们嵌入到属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T18:43:08.913

在 Visual Studio 中转到 .resx 文件的属性并将生成操作设置为内容。这应该将其设置为不编译，您将能够使用站点复制 .resx 文件并随时修改它。

您可能想从项目中清除任何已编译的资源，我不确定 ASP.NET 是否会首先查找这些资源，因为它们已经编译过一次。

编辑：刚刚看到您正在引用 WinForms，对此不确定。

# visual-studio-2008 - 是否有人在 Visual Studio 2008 中设置了 Emacs 样式的键绑定？

> ID：219345
> 
> 赞同：5
> 
> 时间：2008-10-20T18:10:42.303
> 
> 标签：visual-studio-2008, emacs, keyboard-shortcuts

我正在寻找一个包含 emacs 键绑定的 .vssettings 文件，以便我们开发团队的成员可以使用它们。

有人已经有了可以共享的设置吗？

# ruby-on-rails - 耙分贝：迁移中止

> ID：219360
> 
> 赞同：2
> 
> 时间：2008-10-20T18:16:18.640
> 
> 标签：ruby-on-rails, ruby

我有一个未完成的项目，开发人员只是没有完成并且没有留下任何有关安装过程的文档。我已将生产目录下载到我的 Windows 机器（运行 InstantRails 2），我根据需要创建了数据库`database.yml`并尝试运行`rake:db:migrate --trace`但我收到以下错误消息：

```
(in D:/projects/broke2)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
rake aborted!
uninitialized constant Admin
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/dependencies.rb:279:in `load_missing_constant'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/dependencies.rb:468:in `const_missing'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/dependencies.rb:480:in `const_missing'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/inflector.rb:285:in `constantize'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/inflector.rb:284:in `each'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/inflector.rb:284:in `constantize'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.1.1/lib/active_support/core_ext/string/inflections.rb:143:in `constantize'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:481:in `migrations'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/connection_adapters/mysql_adapter.rb:15:in `inject'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:465:in `each'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:465:in `inject'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:465:in `migrations'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:431:in `migrate'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:373:in `up'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activerecord-2.1.1/lib/active_record/migration.rb:356:in `migrate'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rails-2.1.1/lib/tasks/databases.rake:99
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:617:in `call'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:617:in `execute'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `each'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:612:in `execute'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:578:in `invoke_with_call_chain'
D:/InstantRails-2.0-win/ruby/lib/ruby/1.8/monitor.rb:242:in `synchronize'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:571:in `invoke_with_call_chain'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:564:in `invoke'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:2019:in `invoke_task'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `each'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:2036:in `standard_exception_handling'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1991:in `top_level'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1970:in `run'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:2036:in `standard_exception_handling'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/lib/rake.rb:1967:in `run'
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rake-0.8.3/bin/rake:31
D:/InstantRails-2.0-win/ruby/bin/rake:19:in `load'
D:/InstantRails-2.0-win/ruby/bin/rake:19 
```

我是一名普通的 Rails 开发人员（这不是我的第一个应用程序），但我从未见过这个错误，也不知道从哪里开始调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T18:30:05.553

如果在定义 Admin 的地方存在语法错误，有时 Rails 会抛出这个错误。

尝试查找 admin.rb 并确保它可以解析。

此外，您可能想尝试一次运行一个迁移（`rake db:migrate VERSION=1`等），看看这是否有助于您找出导致错误的迁移，或者它是否只是启动应用程序的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-21T17:01:38.243

我怀疑您的迁移创建了一个表并使用模型添加了一些数据。在项目的后期，模型被重命名或删除（表格可能也是如此？）。由于模型不再存在，迁移无法运行，但没有人注意到他们一次只运行几个迁移，而不是来自干净的数据库。

这里的教训......如果您重命名模型或表（或更新它们的验证和字段）然后检查您的迁移从头开始运行以及当前生产版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T18:25:21.570

我会说你的问题出在`uninitialized constant Admin`你的迁移问题上。您是否尝试过查找 Admin 的初始化位置并包括您使用它的路径？（另外，你正在运行的 rake 任务的内容是什么？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T18:42:16.530

它没有指出我在哪里有一个 Admin 常量。有一种方法可以检查至少我应该在哪里看？我的模型，我的控制器等？

rake db:migrate VERSION=1，已经给了我一个错误。正如我告诉你的那样，我只是想完成另一个人未完成的项目。

我怎样才能为每个文件做一个迁移文件？

问候，

胜利者

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-21T18:22:39.093

您可以尝试一次加载所有架构，而不是执行每个迁移：

耙分贝：架构：加载

正如 RichH 所说，迁移中可能没有反映架构的变化

# asp.net-mvc - 在 MVC 项目中将一个简单的类放在哪里？

> ID：219364
> 
> 赞同：12
> 
> 时间：2008-10-20T18:17:23.600
> 
> 标签：asp.net-mvc

好的，这可能是主观的，但我想知道在哪里放置一个在 ASP.net MVC 项目中执行某些操作的简单类？我的意思是像[Base36 De/Encoder](http://www.stum.de/2008/10/20/base36-encoderdecoder-in-c/)这样的类，它既不是模型也不是控制器。这应该总是进入一个单独的类库程序集中，还是这样的类在 MVC Web 应用程序项目中占有一席之地？

是的，我知道这可能并不重要，我可能只是有点过于谨慎地从一开始就以“正确”的方式学习新技术。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-20T18:20:15.713

我个人将这些类放在一些常见的“utils”程序集中。它不仅避免了你的 MVC 项目的垃圾，而且这样的帮助类经常会在我工作的其他项目中找到它们的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T18:30:09.703

您仍然应该拥有包含自己的库、帮助程序和框架的单独项目。您仍应将 ASP.NET MVC 项目视为 Web 项目。您不必将所有业务逻辑或 Web 帮助程序放在 Model 文件夹中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T20:55:22.047

您应该阅读Jeremy Miller 最近撰写的关于单独程序集的[文章。](http://codebetter.com/blogs/jeremy.miller/archive/2008/09/30/separate-assemblies-loose-coupling.aspx)使用 IoC 模式可以让您以创建大量程序集无法实现的方式松散耦合。

# c# - 如何将透明客户端代理添加到远程对象

> ID：219368
> 
> 赞同：1
> 
> 时间：2008-10-20T18:18:20.897
> 
> 标签：c#, proxy, remoting

我有一个小问题，我无法弄清楚。我有一个服务器端 MarshalByRefObject，我试图在客户端包装一个透明代理。这是设置：

```
public class ClientProgram {
    public static void Main( string[] args ) {
        ITest test = (ITest)Activator.GetObject( typeof( ITest ), "http://127.0.0.1:8765/Test.rem" );
        test = (ITest)new MyProxy( test ).GetTransparentProxy();
        test.Foo();
    }
}

public class MyProxy : RealProxy {

    private MarshalByRefObject _object;

    public MyProxy( ITest pInstance )
        : base( pInstance.GetType() ) {
        _object = (MarshalByRefObject)pInstance;
    }

    public override IMessage Invoke( IMessage msg ) {
        return RemotingServices.ExecuteMessage( _object, (IMethodCallMessage)msg );
    }
} 
```

问题是对 RemotingServices.ExecuteMethod 的调用，会引发异常，并显示消息“只能从对象的本机上下文调用 ExecuteMessage。”。谁能指出如何让它正常工作？我需要在远程对象的方法调用之前和之后注入一些代码。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T19:13:30.147

知道了。你的评论让我走上了正轨。关键是解开代理并在其上调用调用。谢谢你！！！！！

```
public class ClientProgram {
        public static void Main( string[] args ) {
            ITest test = (ITest)Activator.GetObject( typeof( ITest ), "http://127.0.0.1:8765/Test.rem" );
            ITest test2 = (ITest)new MyProxy( test ).GetTransparentProxy();
            test2.Foo();
        }
    }

public class MyProxy : RealProxy {

    private object _obj;

    public MyProxy( object pObj )
        : base( typeof( ITest ) ) {
        _obj = pObj;
    }

    public override IMessage Invoke( IMessage msg ) {
        RealProxy rp = RemotingServices.GetRealProxy( _obj );
        return rp.Invoke( msg );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T18:45:13.013

我前一阵子这样做了，忘记了确切的过程，但是尝试使用 RemotingServices.GetRealProxy 从*测试*对象获取代理并将其传递给您的 MyProxy 并在其上调用调用。

像这样的东西：

```
ITest test = (ITest)Activator.GetObject( typeof( ITest ), "http://127.0.0.1:8765/Test.rem" );
RealProxy p2 = RemotingServices.GetRealProxy(test)
test = (ITest)new MyProxy( p2 ).GetTransparentProxy();
test.Foo(); 
```

您必须更新 MyProxy 类才能使用直接类的 RealProxy

# wpf - 如何在 WPF ListView 中获取所选项目容器的坐标

> ID：219369
> 
> 赞同：2
> 
> 时间：2008-10-20T18:19:26.857
> 
> 标签：wpf, listview, coordinates, selecteditem

我想在 ListView 的选定项附近显示一些 WPF 元素。如何获取所选 ListViewItem 的坐标（屏幕或相对坐标）？

```
<ListView 
    x:Name="TechSchoolListView"
    ClipToBounds="False"
    Width="Auto" Height="Auto" 
    HorizontalContentAlignment="Stretch" 
    VerticalContentAlignment="Top" 
    ItemTemplate="{DynamicResource TechSchoolDataTemplate}" 
    ItemsSource="{Binding Path=TechSchoolResearchList, Mode=Default}" 
    SelectedIndex="1"
    SelectedValue="{Binding Path=SelectedTechSchool, Mode=Default}" 
    SelectionChanged="TechSchoolList_SelectionChanged" 
    ItemContainerStyle="{DynamicResource TechSchoolItemContainerStyle}" 
    ScrollViewer.CanContentScroll="False" 
    ScrollViewer.VerticalScrollBarVisibility="Disabled" >
    <ListView.Background>
        <SolidColorBrush Color="{DynamicResource PanelBackgroundColor}"/>
    </ListView.Background>
</ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T18:47:08.437

现在我自己找到了解决方案。我搜索了一个简单的属性，但没有任何意义，因为 WPF 中的所有 UI 元素都是相对的。

这段代码似乎有效：

```
 UIElement selectedContainer = (UIElement) TechSchoolListView.ItemContainerGenerator.ContainerFromIndex(TechSchoolListView.SelectedIndex);
        Point cursorPos = selectedContainer.TranslatePoint(new Point(selectedContainer.DesiredSize.Width, 0.0), Page);
        PanelCursor.Height = selectedContainer.DesiredSize.Height;
        PanelCursor.Margin = new Thickness(400, cursorPos.Y, 0.0, 0.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T18:46:47.173

您应该使用[ContainerFromElement](http://msdn.microsoft.com/en-us/library/aa346420.aspx)来获取项目的容器，这是一个视觉对象，您可以从那里获取坐标。但是，您不能在 XAML 中表达这一点。您需要在更改所选项目时引发的 ListView 事件之一的代码中执行此操作。顺便说一句，请记住，该项目可以是它自己的容器。

您不能在 XAML 中执行此操作，因为项目上没有显示该项目已被选中的附加属性。（虽然我有一段时间没有玩过 WPF，所以可能已经改变了）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T14:22:57.660

尽管弗朗西佩诺夫的回答是正确的，但我想提供一个代码示例来展示他所说的对我有用。

```
UIElement selectedContainer = (UIElement)(sender as 
ListView).ItemContainerGenerator.ContainerFromIndex((sender as 
ListView).SelectedIndex);
Point startPoint = selectedContainer.PointToScreen(new Point(0,0)); 
```

# c# - 如何将使用 #include 文件的网站升级为 Web 应用程序

> ID：219370
> 
> 赞同：0
> 
> 时间：2008-10-20T18:19:41.923
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2008

我最近继承了一个相当大的网站。该项目在 Visual Studio 中设置为网站，而不是 Web 应用程序。出于多种原因，我想将其转换为 Web 应用程序。

我开始使用 Scott Gu 的以下指导转换应用程序：[将 VS 2005 网站项目迁移到 VS 2005 Web 应用程序项目](http://webproject.scottgu.com/CSharp/Migration2/Migration2.aspx)。

在进行转换时，我发现这个网站使用了大量的#include 指令来包含其他 .aspx 文件。这样做的主要问题是，当前每个代码隐藏文件都直接从它包含的页面调用控件（使用 this.）。

编译器在编译时在内存中动态创建 .designer 文件的方式似乎允许这种行为。

问题是，由于我正在将应用程序转换为 Web 应用程序，因此我正在创建 .designer 文件的物理版本。现在对包含页面上的控件的相同调用（使用此。）不再起作用。

我尝试了一些方法来尝试解决这个问题：

首先，我注意到 .aspx 包含文件没有 @Page 指令，所以我尝试添加一个。这阻止了应用程序的编译，因为主页面现在有多个 @page 指令。

其次，我尝试将包含的 .aspx 文件重命名为 .inc，但我仍然遇到同样的问题，即主页不再能够像以前那样访问控件。

任何人以前都这样做过，并且对如何在不改变整个网站结构的情况下继续进行有任何想法？

*编辑：我决定此时不进行转换，只是因为获得的任何好处都不值得麻烦。谢谢您的帮助。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T18:36:23.123

*   您应该将包含的 aspx 文件转换为类，如果它们在旧情况下用作代码库
*   您应该将包含 html、服务器和/或 HTML 控件的 aspx 文件转换为用户控件（ascx 文件）

现在这应该是一个很好的开始。稍后您可以根据自己的喜好进行重构。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T18:25:46.733

您需要将#included 内容重构为可在主页中使用的类和控件。

ASP.Net*不会*执行#include。

# c# - SQL Server DTS Connection2 对象有一个未记录的属性 UseDSL。它有什么作用？

> ID：219375
> 
> 赞同：2
> 
> 时间：2008-10-20T18:23:01.433
> 
> 标签：c#, dts

我正在围绕 Microsoft.SqlServer.DTSPkg80（从 DTSPKG80.DLL 生成的 RCW）为 DTS 构建一个包装器。在 RCW 内部，在 Connection2 接口上，定义了属性“UseDSL”。此属性不在 SQL Server 联机丛书文档中，谷歌搜索它只是发现了一堆“修复我的代码”列表，人们将其设置为 false。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-08T17:02:26.563

I found [this article](http://www.informit.com/articles/article.aspx?p=25872&seqNum=4). The author of the article asked Microsoft what it is for. And they said it has to do with a "Data Source Link file to hold the name of a data source file if you use one." The property is a boolean value so I would assume it means whether or not to use a data source link file.

# visual-studio - 如何从 Visual Studio 编译中排除文件？

> ID：219381
> 
> 赞同：74
> 
> 时间：2008-10-20T18:24:33.663
> 
> 标签：visual-studio

我正在重构一个项目。我有一个已知已损坏的整个子文件夹。到目前为止，在我测试重构时，是否有任何声明性方法可以暂时从编译中排除该文件夹？

我意识到我可以删除该文件夹，但如果可能的话，我想通过配置来做到这一点。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2008-10-20T18:28:40.457

对于要排除的文件，您可以将构建操作（在属性窗口中）设置为**无。**您也可以右键单击该文件夹并选择**从项目中排除**。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-10-26T23:12:44.530

在 VS 2010 中，右键单击 CPP 模块，选择属性。

然后单击配置属性-> 常规，从构建中排除=是。

“从项目中排除”不好，它也会从其他配置中消失。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-20T18:26:43.020

右键单击所有文件，然后选择属性。现在将操作设置为无。修复代码后恢复为编译:)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-10T12:14:04.250

`<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">`在标签内使用 ExcludeFoldersFromDeployment ，例如：

```
<ExcludeFoldersFromDeployment>FolderToExclude</ExcludeFoldersFromDeployment> 
```

对于文件，使用：

```
<ExcludeFilesFromDeployment>File1.aspx;File2.aspx</ExcludeFilesFromDeployment> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-20T18:28:13.857

1.  选择您不想在解决方案资源管理器上编译的文件。

2.  右键单击并选择选项...

3.  将文件上的“构建操作”设置为“无”。

那应该为您解决问题！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-08-02T01:09:02.867

在 Visual Studio 2010 或更高版本上，您可以通过两种方式实现该功能。

1.  右键单击该文件，选择“**从项目中排除**”

2.  右键单击该文件，选择“**属性**”-> 选择“**配置属性**”-> 选择“**常规**”->从选项“**从构建中排除**”的下拉菜单中选择“**是**”

 *** * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-20T18:26:47.887

您应该能够在解决方案资源管理器中右键单击文件夹名称，然后单击“从项目中排除”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-12-03T14:43:14.233

在网站项目类型中，您可以在资源管理器中将文件/文件夹属性设置为“隐藏”以达到相同的效果。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-17T04:51:21.870

如果您在一个文件夹中有很多图像文件，那么编译如此之多是一项非常漫长的任务；您可以在 IIS 中重命名该文件夹，为该文件夹提供 .exclude 扩展名。

例如 C:\intetpub\wwwroot\yoursite\images 更改为 C:\intetpub\wwwroot\yoursite\images.exclude

然后，当您编译您的应用程序时，.exclude 文件夹将从编译中排除。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-24T14:39:18.827

这是我为 IIS 网站项目找到的一种方法。

为要从项目中排除的文件/文件夹设置“隐藏”属性，然后在解决方案资源管理器中刷新项目。例如：

```
1\. Open Windows Explorer.
2\. Go to the physical folder of your website.
3\. Right click the file/folder which you want to exclude, and then select "Properties".
4\. Check the "Hidden" attribute.
5\. Click the "Refresh" button in the Visual Studio Solution Explorer 
```

于本森

Microsoft 在线社区支持

引用自：[https ://forums.asp.net/post/1997766.aspx](https://forums.asp.net/post/1997766.aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T18:27:50.770

我很确定文件夹上应该有一个“从构建中排除”属性，但我现在没有我的 Visual Studio。至少文件上有这样的属性。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-07T15:33:53.323

在 Rider 中，右键单击导航栏中的文件，单击属性，将构建操作更改为无。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2010-04-23T10:17:28.700

在 Visual Studio 2010 中，您需要在解决方案资源管理器中右键单击项目并选择**卸载项目**

# sharepoint - WebPart 中的配置文件用户数据库错误

> ID：219382
> 
> 赞同：2
> 
> 时间：2008-10-20T18:25:04.020
> 
> 标签：sharepoint, moss, wss, sharepoint-2007

**编辑：**修改标题并添加更新。

**更新**： *我们不再认为这是 64 位与 32 位的问题。我们发现，唯一看到这一点的人，是那些在农场政策中设定为“完全控制”的人。（不作为系统帐户）一旦我们测试了普通用户，我们发现没有一个有问题。从场策略中删除“问题”用户并将其添加回来，修复了除一个用户之外的所有用户（一位开发人员:)）。*

我们用 2 个 32 位 WFE 和一个 32 位应用程序服务器开始了我们的农场。我们决定在我们的农场中添加 64 位前端，并且在大多数情况下，几乎一切都运行良好。访问用户配置文件数据库的自定义 Web 部件例外。在 32 位前端工作正常，但在 64 位前端我们得到以下错误：

> 找不到用户：无法从数据库加载配置文件数据。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：Microsoft.Office.Server.UserProfiles.UserNotFoundException：找不到用户：无法从数据库加载配置文件数据。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [UserNotFoundException：找不到用户：无法从数据库加载配置文件数据。]
> Microsoft.Office.Server.UserProfiles.UserProfile.Load(SqlDataReader myReader, Boolean bFirstRead, Boolean bWssId) +930
> Microsoft.Office.Server.UserProfiles.UserProfile。负载（SqlDataReader myReader）+64
> Microsoft.Office.Server.UserProfiles.UserProfile.RetrieveUser（字符串 strAcct，Guid gAcct，Byte[] bSid，Nullable`1 recordId，布尔值 doNotResolveToMasterAccount）+1507
> Microsoft.Office.Server.UserProfiles.UserProfile。 .ctor(UserProfileManager objManager, String strAcct, Boolean doNotResolveToMasterAccount, Boolean forceUserIsSelf) +584
> Microsoft.Office.Server.UserProfiles.UserProfile..ctor(UserProfileManager objManager, String strAcct) +80
> Microsoft.Office.Server.UserProfiles.UserProfileManager.GetUserProfile(String strAccountName) +205

由于 WFE 位于同一个场中，因此它应该查看同一个数据库。

让我知道是否需要更多信息。

任何想法，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T18:48:31.540

*“街头传言”*是您不能在同一个场中混合使用 32 位和 64 位服务器（数据库服务器除外）。

[http://technet.microsoft.com/en-us/library/cc261700.aspx](http://technet.microsoft.com/en-us/library/cc261700.aspx)说：

> 您可以在混合使用 32 位和 64 位服务器上部署 Office SharePoint Server 2007 场，前提是您在每个拓扑层保持体系结构同质性。例如，您不应混合使用 32 位和 64 位 Web 前端 (WFE) 服务器，但可以在具有 32 位 WFE 服务器和应用程序服务器的场中使用 64 位数据库服务器。

因此，您可以混合使用 64 位和 32 位，但显然不能混合使用 32 位和 64 位 WFE。我不是说这是真的，我是说 Technet 说这是真的。Technet 通常比较保守，所以，去问问你的 MVP 人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:42:16.203

彼得，非常感谢您提供的其他信息。我会问MVP这个问题。

这个 webpart 是唯一在 64 位 WFE 上给我们带来问题的东西。其他一切工作正常。我们还有其他在 64 位模式下运行没有问题的自定义代码（webpart、事件接收器、内容类型……等等）。

谢谢回复; 我会发布 MVP 对此所说的任何内容。

编辑：MVP的回应

> 他们假设您在同一个 NLB 中对 32 和 64 进行负载平衡，这不会很好地平衡。然而，它在架构上是绝对支持的。它应该工作。

# asp.net - .Net 对象验证框架

> ID：219385
> 
> 赞同：3
> 
> 时间：2008-10-20T18:26:15.563
> 
> 标签：asp.net, validation

我正在使用 MVP 架构开发一个 ASP.NET 项目。我们想在域中使用对象验证框架，但对 Castle.Components.Validator 命名空间以外的可用框架不太熟悉。

有没有人有任何其他轻量级对象验证框架的经验。如果不是，您使用什么方法在域中进行验证（请没有 ASP.NET 验证器控件答案）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T19:02:07.173

企业库中的[验证应用程序块](http://msdn.microsoft.com/en-us/library/cc309509.aspx)CodePlex 上的
[.NET 验证框架](http://www.codeplex.com/ValidationFramework)
[EViL - CodePlex 上的实体验证库](http://www.codeplex.com/evil)CodePlex 上的
[验证无处不](http://www.codeplex.com/valever)在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-03T09:54:53.570

我喜欢 Fluent Validation 框架的简单方法。您可以在 codeplex 上找到它：

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

您可以获得通过注释无法获得的实体和验证器之间的分离（例如：企业库）。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T18:56:46.407

我对MVP模式不是很熟悉，但是这家伙似乎知道他在做什么。[以下是他使用 MVP 处理验证的方式。](http://jeffhandley.com/archive/2008/01/15/extended-mvp-pattern---domain-validation.aspx)

# performance - 重构存储过程

> ID：219395
> 
> 赞同：3
> 
> 时间：2008-10-20T18:29:18.257
> 
> 标签：performance, stored-procedures, refactoring

我有一个存储过程当前正在执行一个复杂的提取，该提取在使用时经常超时。我部门提出的解决方案是简单地增加超时时间；我真的不想这样做。我想重构这个存储过程，但是因为它非常复杂且没有文档记录（是的遗留系统），我担心我的重构不会导致相同的功能更有效地执行。在重构存储过程以确保在更短的时间内执行相同的功能时，是否可以使用任何策略？

这是一个 Microsoft SQL Server 2005 存储过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T18:36:03.810

通常，超时发生在单个 SQL 语句上。可能通过有效利用临时表将 proc 分解为单独的语句，因此您不会尝试在一个块中做太多事情。通过这样做，您还可以磨练您的性能瓶颈，并可能在需要时识别一些有用的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T18:39:31.900

我遇到的存储过程效率低下的最常见原因是标量类型操作的普遍存在，而不是基于集合的操作。大多数 RDBMS 系统（Oracle、SQL Server、MySQL 等）在处理大量数据时效率更高，而不是单个操作重复多次。对一百万行数据执行一次操作比对每一行执行一百万次操作更有效。

在尝试确定这些类型的瓶颈（通常首先查看函数调用）之后，我建议查看您正在引用的表上的索引策略。根据您选择的 RDBMS，您可能拥有一些向导类型的功能，可以帮助您根据示例工作负载发现合适的索引结构。

你用的是什么数据库？这可能有助于微调我的一些建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T19:30:59.800

我过去一直面临这种情况。最好的办法是创建一个简单的 C# 或 VB .Net 应用程序。当你重构 sp 时，给它一个新的名字。使用该应用程序来调用旧的和新的 sp。然后比较两个 sp 的输出，以确保它们以相同的顺序返回完全相同的值。

您可能希望测试尽可能多的输入参数，以确保您的重构没有修改业务逻辑。

此外，使用 NUnit 可以帮助简化此任务。

当我开始我现在的职位时，我得到了一个必须为新模式修改的数据库。它需要更改超过 100 个 sp。使用我描述的应用程序，我能够合理地确定我的修改之一没有违反业务规则。

你是对的，只是增加超时是错误的第一个答案。尽可能提高 sp，然后在必要时增加超时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T19:46:06.570

使用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms187929.aspx)研究当前 SP 是如何运行的；它将突出显示效率低下的地方，并允许您从一开始就针对那些特定领域，同时不理会更高性能的部分。然后，您可以在修改后的 SP 上再次使用分析器来比较性能。

我会赞同 Gunny 的建议，即仔细研究函数调用——在基于集合的操作中，这些会对性能产生真正的影响。过去，我仅通过剥离单个 UDF 并复制内联逻辑就获得了巨大的性能提升。

# php - 如何将 HTML 块中的所有图像调整为特定宽度并缓存结果

> ID：219396
> 
> 赞同：0
> 
> 时间：2008-10-20T18:29:23.560
> 
> 标签：php, image, caching, resize

我正在为 PHP 中的定制 CMS 编写移动内容适配插件。CMS 包含`<img/>`指向具有绝对 URL 的图像的链接，这些绝对 URL 都是 400 像素宽且高度不同。

我想解析 HTML（存储在 MySQL 中）并将每个图像重新缩放到新的宽度 - 这将根据设备而有所不同。我还想缓存图像，以防止每次加载页面时都不必要地调整它们的大小

我使用 ImageMagick 或 GD 在 PHP 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T18:35:28.773

做一些不同的事情怎么样。基本上将缓存/调整大小卸载到按需模型。假设您的应用程序正在设备 A 上运行，这需要 200x200 图像。您将图像链接更改为：

```
<img src="/images/image.php?height=200&width=200&source=filename.jpg" /> 
```

image.php 可以是执行以下操作的脚本：

*   确保现有文件存在，如果它以这个大小存在，则从缓存中获取它
*   如果没有，请调整图像大小并缓存它

下次您的应用程序查找该图像时，它将以 200 像素的大小返回。或者，如果应用程序现在正在寻找 300x300 图像，则将在新请求上构建/缓存该图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T18:49:54.237

请参阅 [使用 PHP 和 MySQL 缓存调整大小图像的最佳方法，以](https://stackoverflow.com/questions/140734/best-way-to-cache-resized-images-using-php-and-mysql)
获得关于缓存机制的真正好主意（尤其是 apache 网络服务器干预概念）

和

[http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)使用 ImageMagick 或 GD 封装。

# migration - 有没有一种简单的方法可以完成从 CVS 到 StarTeam 的完整迁移？

> ID：219401
> 
> 赞同：2
> 
> 时间：2008-10-20T18:33:00.900
> 
> 标签：migration, cvs, starteam

我目前正在维护一个用于源代码控制的 CVS 存储库。转移到 StarTeam 的努力正在推进。它已经被购买并且是大多数项目的企业标准。StarTeam 服务器的公司所有者告诉我，没有已知的方法可以将我们当前的 CVS 存储库完全迁移到 StarTeam。我们被建议检查最新版本并将其导入 StarTeam。

我真的更愿意保留我所有的版本历史，而不必在简单地丢失所有数据或无限期地维护我的 CVS 存储库之间做出选择。

有没有人有运气这样做？有什么推荐的工具或流程吗？还是我只是在浪费时间，我应该迁移并减少损失？

更新：Borland 的官方回应是，这绝对是可行的，但不适用于盒装软件。我可以从 Borland 购买服务来帮助我完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T19:24:36.210

我想知道为什么“专业”工具不提供从众所周知的遗留系统导入的任何方法......

虽然一开始听起来很奇怪，但我建议将 cvs 存储库转换为 subversion（使用[tigris.org](http://cvs2svn.tigris.org/)提供的例如 cvs2svn），然后创建自己的脚本以从 subversion 存储库进行更新并提交到 starteam 存储库，前提是它确实提供了 api 或命令行客户端。

优点是 subversion 很好地支持诸如省略分支或目录之类的东西，并通过 api 提供访问，而 cvs 不提供。

此外，关于颠覆的文档非常广泛。（使用 python 中的 subversion api 的 [示例](http://svnbook.red-bean.com/en/1.1/ch08s02.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-27T22:23:50.253

这是一个关于将 PVCS 或 SourceSafe 存储库导入 StarTeam 的文档。尽管没有专门针对 CVS，但它可能会为您提供一些关于如何完成此类事情的想法。文章底部还有一些看起来也很有帮助的评论。

[http://dn.codegear.com/article/33011](http://dn.codegear.com/article/33011)

我还找到了 Borland 购买 StarTeam 之前的一篇老派文章，其中谈到了使用命令行界面将 CVS 存储库移动到 StarTeam 中。可以尝试一下：

[http://www.foxdata.com/starteam/faq/how_to_migrate_cvs_archives_to_starteam.htm](http://www.foxdata.com/starteam/faq/how_to_migrate_cvs_archives_to_starteam.htm)

Borland 提供了 API，用于编写脚本或以编程方式与 StarTeam 服务器和存储库进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-06T17:46:03.940

我认为这里真正的答案是，虽然可以做到，但没有简单的方法可以做到这一点。如果您与他们的服务团队合作，Borland 将很乐意帮助您完成这项工作，但需要付费。

# linux - 什么 linux shell 命令返回字符串的一部分？

> ID：219402
> 
> 赞同：106
> 
> 时间：2008-10-20T18:33:34.190
> 
> 标签：linux, string, bash, substr

我想找到一个可以返回部分字符串的linux命令。在大多数编程语言中，它是`substr()`函数。bash 是否有任何可用于此目的的命令。我希望能够做这样的事情...... `substr "abcdefg" 2 3`- 打印`cde`。

* * *

随后类似的问题：

*   [在 Bash 中提取子字符串](https://stackoverflow.com/questions/428109/extract-substring-in-bash)

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2008-10-20T18:39:35.893

如果您正在寻找一个 shell 实用程序来执行类似的操作，您可以使用该`cut`命令。

举个例子，试试：

```
echo "abcdefg" | cut -c3-5 
```

产生

```
cde 
```

Where`-cN-M`告诉 cut 命令将列返回`N`到`M`（包括）。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2008-10-20T18:35:53.063

从 bash 手册页：

```
${parameter:offset}
${parameter:offset:length}
        Substring  Expansion.   Expands  to  up  to length characters of
        parameter starting at the character  specified  by  offset.
[...] 
```

* * *

或者，如果您不确定是否拥有`bash`，请考虑使用`cut`.

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-11-12T21:16:11.920

在“纯”bash 中，您有许多用于（子）字符串操作的工具，主要但不限于[参数扩展](http://linux.die.net/man/1/bash)：

```
${parameter//substring/replacement}
${parameter##remove_matching_prefix}
${parameter%%remove_matching_suffix} 
```

索引子字符串扩展（具有负偏移的特殊行为，并且在较新的 Bash 中，负长度）：

```
${parameter:offset}
${parameter:offset:length}
${parameter:offset:length} 
```

当然，对参数是否为空进行操作的非常有用的扩展：

```
${parameter:+use this if param is NOT null}
${parameter:-use this if param is null}
${parameter:=use this and assign to param if param is null}
${parameter:?show this error if param is null} 
```

它们比列出的那些具有更多可调整的行为，正如我所说，还有其他操作字符串的方法（一种常见的方法`$(command substitution)`与 sed 或任何其他外部过滤器结合使用）。但是，它们很容易通过打字找到`man bash`，我觉得没有必要进一步扩展这篇文章。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-10-20T18:36:58.880

在 bash 你可以试试这个：

```
stringZ=abcABC123ABCabc
#       0123456789.....
#       0-based indexing.

echo ${stringZ:0:2} # prints ab 
```

[Linux 文档项目](http://tldp.org/LDP/abs/html/string-manipulation.html "here")中的更多示例

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2008-10-20T18:37:54.370

```
${string:position:length} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2008-10-21T01:05:27.940

`expr(1)`有一个 substr 子命令：

```
expr substr <string> <start-index> <length> 
```

如果您没有 bash（可能是嵌入式 Linux）并且您不希望使用 cut(1) 所需的额外“回声”过程，这可能很有用。

# testing - 如何安排考试时间

> ID：219408
> 
> 赞同：5
> 
> 时间：2008-10-20T18:35:36.307
> 
> 标签：testing, project-management, project-planning

假设 10 位开发人员花了 6 个月的时间开发某个应用程序。作为项目经理，我应该在我的测试计划中留出多少时间？

6 个月的努力包括单元测试。我特别关注功能测试和用户验收测试。

开发时间和测试时间之间有什么比例或关系吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T18:57:34.110

这是Alan [Page的](http://blogs.msdn.com/alanpa/pages/about-me.aspx)[一篇短文](http://blogs.msdn.com/alanpa/archive/2007/03/13/test-guesstimation.aspx)，他是 Microsoft 卓越工程团队的测试架构师：

> 在测试估计中要考虑的一些例子是：
> 
> *   **历史数据**- 至少，您可以根据以前的项目估计测试设计
> *   **复杂性**——复杂性与可测试性直接相关。可以比复杂程序更快地测试简单的应用程序
> *   **业务目标**- 应用程序是原型应用程序还是演示应用程序？或者，它是宇宙飞船的飞行控制软件？业务目标影响测试工作的广度和深度
> *   **一致性/合规性**- 如果应用程序必须符合标准，则在评估测试任务时必须考虑这些要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T18:40:48.607

> > 开发时间和测试时间之间有什么比例或关系吗？

不，真的没有。您必须查看应用程序的功能需求以确定需要测试的内容以及需要多长时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T19:05:13.813

我希望您作为项目经理，计划使用像[Scrum](http://en.wikipedia.org/wiki/Scrum_(development))或其他[敏捷方法](http://en.wikipedia.org/wiki/Agile_software_development)这样的迭代开发过程。我不认为测试是应该在开发阶段完成后进行的开发阶段，而是开发过程的重要组成部分。

Unit tests are great and should be obligatory everywhere, but don't make the mistake of starting too late with the functional testing. If the project is as short as 6 months it's essential to have something up and running in half that time, even if it lacks most of the functionality, and start with that part of the testing while the rest of the features are being added.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T18:42:24.673

一般的经验法则是，测试将花费开发时间的 1/3 才能正确完成，但它可能会有很大差异，具体取决于您正在做什么以及您期望的测试范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-20T18:52:25.167

我不认为这是我们可以为您回答的问题。为了给你一个合理的估计，我们需要知道几件事：

你的测试目标是什么？（代码覆盖率、发现/修复的缺陷、测试的需求等）
您在类似项目上花费了多少时间进行测试？
您在这些项目中遇到了哪些质量问题？（发现的缺陷太多，缺陷的严重程度可以接受/不可接受）
您是否进行过任何测试计划？
单元测试发现了多少缺陷？是否存在更大/更少关注的领域？你是如何解决这些问题的？
你会做什么样的测试分析？

您可以使用一些指标来帮助您对此类工作进行粗略估计，但问题是它们确实需要根据您的环境进行调整才能给出有意义的估计。一项衡量标准可能建议 2 个月进行测试，但您可能没有意识到您的环境需要两倍的时间，直到您承诺 2 个月并发现您确实需要 4 个月。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-25T07:13:03.440

I agree with the accepted answer from Pascal Paradis.

In addition, make sure you include test planning in your schedule. Planning can take just as long as actual testing, if not longer. This can be difficult because it requires finalized documentation from development team.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-20T19:03:13.163

很难回答这样的问题。这很可能取决于您在类似项目中的经验。我只是可以为您提供一些我参与过的项目的统计数据。您可以看到，从开发时间来看，很难得到测试时间的公式：

项目 | 复杂性 | 开发时间 | 考试时间 | # 开发者 | # 测试人员

* * *

一个 | 4 | 90 天 | 60 天 | 4 | 1

乙| 1 | 60 天 | 30 天 | 2 | 1

C | 5 | 90 天 | 120 天 | 4 | 1

D | 2 | 15 天 | 7 天 | 2 | 2

E | 3 | 120天| 90 天 | 2 | 2

# c# - 将应用程序移植到 Citrix 时需要了解哪些基础知识？

> ID：219411
> 
> 赞同：3
> 
> 时间：2008-10-20T18:36:05.557
> 
> 标签：c#, citrix

我开发了一个应用程序 (C#)，它目前位于多个工作站上。每个工作站都访问同一个数据库 (MS-SQL)。我被要求将其移植到 Citrix。任何人都可以提供有关文档的见解或建议某人将从哪里开始吗？应用程序是否安装在 Citrix 服务器上，然后简单地提供给用户使用，还是我需要进行进一步开发以使其为此类部署做好准备？

任何人都可以提供有关 Citrix 应用程序开发的见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T18:52:43.323

对于相当直接的应用程序，只需运行即可。

您的应用程序需要使用本地化配置吗？即时间/日期或货币格式？Citrix 设置可以在这方面做很多事情。用户的计算机设置可以“投射”到 Citrix 中，也可以在 Citrix 中被覆盖。

您还使用机器名称来做任何事情吗？那将是服务器名称，而不是用户本地机器名称。

您可以通过运行应用程序的几个远程桌面会话在 Windows Server 环境中进行一些模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T18:58:55.933

我曾经为一个客户端编写了一个 C# 应用程序，他们在 Citrix 服务器上运行它而没有通知我这一点，所以如果你幸运的话，你根本不需要担心 Citrix。我遇到的唯一问题是由于我使用了 ActiveReports，它发布了一个在 64 位处理器上中断的修补程序（就像我的客户用来运行 Citrix 的那个）。如果您确实遇到任何问题，如果您确实可以访问 Citrix 服务器，那么您将可以更轻松地调试它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-06-14T19:45:52.507

要知道的一件事是可能的测试自动化问题。
如果您不在 Citrix 机器上安装测试自动化软件，测试人员将只能选择使用基于图像识别和屏幕坐标的软件。用这种软件编写的测试会不断中断。否则您将不得不投资昂贵的 Citrix 专用测试工具，这些工具并不便宜，但更重要的是，它们远远落后于其他 Web 测试工具。

# asp.net - 如何从编译中排除 ASP.NET 网站代码隐藏文件？

> ID：219417
> 
> 赞同：6
> 
> 时间：2008-10-20T18:37:44.417
> 
> 标签：asp.net, visual-studio, code-behind

我正在重构一堆 ASP.NET 页面。我想编译和测试我已经完成的那些。但是，Visual Studio 不允许我在未重构页面上运行带有编译错误的网站。如何在不将它们从项目本身中删除的情况下暂时排除它们？你可以通过某种配置来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T01:10:30.500

在 Visual Studio 2010 或更高版本上，您可以通过两种方式实现该功能。

1）右键单击文件，选择“**从项目中排除**”

2）右键单击文件，选择“**属性**”->选择“**配置属性**”->选择“**常规**”->从选项“**从构建中排除**”的下拉菜单中选择“**是**”

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T18:54:55.503

右键单击文件并选择“从项目中排除”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T18:55:31.447

我将创建两个项目并将完成的项目复制到新项目中，因为它们被重构，然后构建新项目。

# c++ - 你会如何改进这个算法？（c字符串反转）

> ID：219420
> 
> 赞同：6
> 
> 时间：2008-10-20T18:38:37.720
> 
> 标签：c++, algorithm, cstring

通过我在网上找到的一些编程面试挑战，我不得不编写一个算法来反转一个 const char * 并返回一个指向新 char * 的指针。我想我有它，但为了让它正常工作，我不得不做一些奇怪的事情——基本上必须自己考虑空终止字符。不知何故，我觉得这是错误的，但我很难过，我想知道是否有人可以帮助我：

```
char * reverse(const char * str)
{
  int length = strlen(str);
  char * reversed_string = new char[length+1];

  for(int i = 0; i < length; ++i)
  {
    reversed_string[i] = str[(length-1) - i];
  }
  //need to null terminate the string
  reversed_string[length] = '\0';

  return reversed_string;

}

int main(int argc, char * argv[])
{

  char * rev_str = reverse("Testing");

  cout << "Your string reversed is this: " << rev_str << endl;

  delete rev_str;
  rev_str = 0;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-20T18:48:28.810

[`std::reverse`](http://cppreference.com/wiki/stl/algorithm/reverse)来自`<algorithm>`字符串和`char`数组的作品：

```
string str = "Hello";
char chx[] = "Hello";

reverse(str.begin(), str.end());
reverse(chx, chx + strlen(chx));

cout << str << endl;
cout << chx << endl; 
```

/EDIT：这当然会修改原始字符串。但是 STL 来救援。下面创建一个新的反转字符串。`char`不幸的是（？），如果不创建额外的（隐式）副本，这不能直接在 C 数组上工作：

```
string reverse_string(string const& old) {
    return string(old.rbegin(), old.rend());
}

cout << reverse_string("Hello") << endl; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-20T18:41:10.633

我曾经有过这个问题。这是我想到的第一个答案，但接下来是，“现在不分配任何内存就这样做”。

```
int length = strlen(string);
for(int i = 0; i < length/2; i++) {
  char c = string[i];
  string[i] = string[length - i];
  string[length - i] = c;
} 
```

编辑：有些人对不使用指针表示不屑。这有点可读性，尽管不是完全最佳的。其他人已经进入了指针解决方案，这里不再赘述。

一位评论者质疑说，如果没有（基于堆栈的）用于交换的保持单元，它应该是可行的。这样做的机制是按位异或。将循环内部替换为

```
string[i] = string[i] ^ string[length - i];
string[length - i] = string[i] ^ string[length - i];
string[i] = string[i] ^ string[length - i]; 
```

但一般来说，现代编译器可以优化掉一个简单交换的局部变量。有关详细信息，[请参阅维基百科](http://en.wikipedia.org/wiki/XOR_swap_algorithm)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-20T18:47:08.110

```
if( string[0] )
{
    char *end = string + strlen(string)-1;
    while( start < end )
    {
        char temp = *string;
        *string++ = *end;
        *end-- = temp;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T21:39:58.683

我知道这是非常不可移植的，但是 x86 汇编指令*bswap*让您可以通过一条指令交换四个字节，这可能是提升代码的好方法。

这是一个如何让它与 GCC 一起工作的例子。

```
/* 
 * reverse.c
 *
 * $20081020 23:33 fernando DOT miguelez AT gmail DOT com$
 */

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define MAX_CHARS 10 * 1024 * 1024

/*
 * Borrowed from http://coding.derkeiler.com/Archive/Assembler/comp.lang.asm.x86/2007-03/msg00004.html
 * GNU Compiler syntax
 */
inline uint32_t bswap(uint32_t val)
{
    __asm__("bswap %0" : "=r" (val) : "0" (val));
    return val;
}

char * reverseAsm(const char * str)
{
    int i;
    int length = strlen(str);
    int dwordLength = length/4;

    if(length % 4 != 0)
    {
        printf("Error: Input string length must be multiple of 4: %d\n", length);       
        return NULL;
    }

    char * reversed_string = (char *) malloc(length+1);
    for(i = 0; i < dwordLength; i++)
    {
        *(((uint32_t *) reversed_string) + dwordLength - i - 1) = bswap(*(((uint32_t *) str) + i));
    }

    reversed_string[length] = '\0';

    return reversed_string;
}

char * reverse(const char * str)
{
    int i;
    int length = strlen(str);
    char * reversed_string = (char *) malloc(length+1);

    for(i = 0; i < length; ++i)
    {
        reversed_string[i] = str[(length-1) - i];
    }

        //need to null terminate the string

    reversed_string[length] = '\0';

    return reversed_string;
}

int main(void)
{
    int i;
    char *reversed_str, *reversed_str2;
    clock_t start, total;
    char *str = (char *) malloc(MAX_CHARS+1);

    str[MAX_CHARS] = '\0';

    srand(time(0));

    for(i = 0; i < MAX_CHARS; i++)
    {
        str[i] = 'A' + rand() % 26;     
    }

    start = clock();
    reversed_str = reverse(str);
    total = clock() - start;
    if(reversed_str != NULL)
    {
        printf("Total clock ticks to reverse %d chars with pure C method: %d\n", MAX_CHARS, total); 
        free(reversed_str);
    }
    start = clock();
    reversed_str2 = reverseAsm(str);
    total = clock() - start;
    if(reversed_str2 != NULL)
    {
        printf("Total clock ticks to reverse %d chars with ASM+C method: %d\n", MAX_CHARS, total); 
        free(reversed_str2);
    }

    free(str);

    return 0;
} 
```

在我的旧电脑上 Cygwin 下的结果：

```
fer@fernando /cygdrive/c/tmp$ ./reverse.exe
Total clock ticks to reverse 10485760 chars with pure C method: 221
Total clock ticks to reverse 10485760 chars with ASM+C method: 140 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T19:47:38.813

呃？没有人用指针做过吗？

```
char *reverse(const char *s) {
    size_t n = strlen(s);
    char *dest = new char[n + 1];
    char *d = (dest + n - 1);

    dest[n] = 0;
    while (*s) {
        *d-- = *s++
    }

    return dest;
} 
```

希望多年的 Java 没有毁了我的 C ;-)

***编辑***：用额外的 var 替换所有那些 strlen 调用。这些天 strlen 返回了什么？（感谢[底座](https://stackoverflow.com/users/20481/plinth)）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-20T19:56:12.027

您的代码直截了当且不足为奇。一些东西：

1.  使用 size_t 而不是 int 作为循环索引
2.  虽然您的编译器很可能足够聪明地确定 (length-1) 是不变的，但它可能不够聪明地确定 (length-1)-i 最好用在每次传递中递减的不同循环变量替换
3.  我会使用指针而不是数组语法——拥有 *dst-- = *src++; 对我来说会更干净。在循环。

换句话说：

```
char *dst = reversed_string + length;
*dst-- = '\0';
while (*src) {
   *dst-- = *src++;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-10-08T21:59:22.343

你不能（不应该）这样做：

> ```
> string[i] ^= string[length - i] ^= string[i] ^= string[length - i]; 
> ```

来自：[http ://en.wikipedia.org/wiki/XOR_swap_algorithm#Code_example](http://en.wikipedia.org/wiki/XOR_swap_algorithm#Code_example)

*   *“此代码具有未定义的行为，因为它修改了左值*x 两次而没有中间的序列点。*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-20T20:55:58.490

@Konrad Rudolph：（对不起，我没有发表评论的“经验”）

我想指出 STL 提供了一种[reverse_copy()](http://cppreference.com/wiki/stl/algorithm/reverse_copy)算法，类似于[reverse()](http://cppreference.com/wiki/stl/algorithm/reverse)。您不需要像以前那样引入临时的，只需分配一个大小合适的新 char * 即可。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-20T18:57:40.833

实际上，考虑到原始字符串保持不变的约束，我认为问题中给出的原始方法是最好的。人们发布的所有这些就地反转的奇特方法都很棒，但是一旦考虑到复制给定的字符串，它们都比简单地向后复制字符串效率低。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-20T19:01:27.380

我们之前使用过这个问题——令人惊讶的结果是发现很多人做不到（即使有丰富的 C/C++ 经验！）。我更喜欢就地变体，因为它节省了一些开销，并且只需要迭代 strlen(s)/2 个字符。

您在面试中的解决方案会很好。使用指针而不是数组语法的（正确的！）解决方案的评分会更高一些，因为它显示了对 C/C++ 编程中至关重要的指针的更高舒适度。

次要的批评是指出 strlen 返回 size_t 而不是 int，您应该在 rev_str 上使用 delete []。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-20T21:09:29.757

WRT：“现在在没有临时持有变量的情况下这样做”......可能是这样的（并且暂时保持数组索引）：

```
int length = strlen(string);
for(int i = 0; i < length/2; i++) {
  string[i] ^= string[length - i];
  string[length - i] ^= string[i];
  string[i] ^= string[length - i];
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-22T05:08:37.980

.

```
char * reverse(const char * str)
{
  if (!str)
    return NULL;

  int length = strlen(str);
  char * reversed_string = new char[length+1];

  for(int i = 0; i < length/2; ++i)
  {
    reversed_string[i] = str[(length-1) - i];
    reversed_string[(length-1) - i] = str[i];
  }
  //need to null terminate the string
  reversed_string[length] = '\0';

  return reversed_string;

} 
```

一半的时间，但复杂性相同（注意可能会因一个错误而关闭）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-29T18:03:14.653

上面的 for 循环有错字。检查循环变量 i 应该是 <= 而不是 <，否则对于奇数个元素将失败。for(int i = 0; i <= 长度/2; ++i)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-20T18:46:39.140

这很好用：

```
#include <algorithm>
#include <iostream>
#include <cstring>

void reverse_string(char *str) {    
    char *end = str + strlen(str) - 1;
    while (str < end) {
        std::iter_swap(str++, end--);
    }
}

int main() {
    char s[] = "this is a test";
    reverse_string(s);
    std::cout << "[" << s << "]" << std::endl;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-20T18:55:30.213

我会像这样解决它（虽然我的 c 有点生锈，请原谅我）

```
char *reverse( const char *source ) {
  int len = strlen( source );
  char *dest = new char[ len + 1 ];
  int i = 0;
  int j = len;
  while( j > 0 ) {
    dest[j--] = src[i++];
  }
  dest[i] = \0;
  return dest;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-20T21:55:59.570

字符串反转到位，没有临时变量。

```
static inline void
byteswap (char *a, char *b)
{
  *a = *a^*b;
  *b = *a^*b;
  *a = *a^*b;
}

void
reverse (char *string)
{
  char *end = string + strlen(string) - 1;

  while (string < end) {
    byteswap(string++, end--);
  }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-20T22:10:59.930

不需要临时变量的方法

```
int length = strlen(string);
for(int i = 0; i < length/2; i++) {
  string[i] ^= string[length - i] ^= string[i] ^= string[length - i];
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-10-20T19:25:54.023

它不会更有效率，但是您可以通过将每个字母推入堆栈，然后将它们弹出到新分配的缓冲区中来展示数据结构的知识。

这将需要两次通过和一个临时堆栈，但我可能会更相信自己第一次就能做到这一点，然后不会像上面那样犯一个错误。

```
char* stringReverse(const char* sInput)
{
    std::size_t nLen = strlen(sInput);
    std::stack<char> charStack;
    for(std::size_t i = 0; i < nLen; ++i)
    {
        charStack.push(sInput[i]);
    }
    char * result = new char[nLen + 1];
    std::size_t counter = 0;
    while (!charStack.empty())
    {
        result[counter++] = charStack.top();
        charStack.pop();
    }
    result[counter] = '\0';
    return result;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-10-20T20:50:39.937

当作为面试官问这个问题时，我正在寻找一个干净、易于理解的解决方案，并且可能会问如何使最初的解决方案更有效率。我对“智能”解决方案不感兴趣。

我在想这样的事情；候选人是否在他们的循环中因一个错误而使旧的，他们是否预先分配了足够的内存，他们是否检查了错误的输入，他们是否使用了*足够*有效的类型。

不幸的是，正如已经指出的那样，太多的人甚至无法做到这一点。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-10-21T02:56:44.503

如果我在做面试，我会对解决方案的质量更加挑剔，因为它的健壮性，而不仅仅是它的性能。

**如果传递了一个空指针，到目前为止提交的所有**答案都将失败——它们中的大多数会立即调用`strlen()`一个可能的空指针——这可能会导致你的进程出现段错误。

许多答案都对性能着迷，以至于他们错过了问题的关键问题之一： reverse a `const char *`，即您需要制作反向*副本*，而不是就地反向。如果需要副本，您会发现很难将迭代次数减半！

这是一个面试问题，所以我们想看看算法的细节，但在现实世界中，这只是强调尽可能使用标准库的价值。

# asp.net - 我可以使文件夹在中等信任下可写吗？

> ID：219422
> 
> 赞同：5
> 
> 时间：2008-10-20T18:38:43.087
> 
> 标签：asp.net, file-permissions, medium-trust

我的网络应用程序写入多个文件夹（日志、上传等），我总是通过我的托管服务提供商手动设置这些权限。

我想创建一个在新安装上执行此操作的安装脚本。在中等信任下这可能吗？

我什至不能调用File.GetAccessControl，更不用说File.SetAccessControl，但反正我不需要这样的“大锤”。我只想做 ISP（在本例中为 GoDaddy）让我通过管理控制台做的事情。

我相信 PHP 能够做到这一点，如果可能的话，我愿意为此目的考虑一个 PHP 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-05-17T14:37:14.367

好的，假设您以通常的方式使用 IIS 和 asp.net，您必须拥有一个 asp.net 帐户，框架在该帐户下代表您执行您的应用程序。

Web 应用程序在单个帐户下运行，并通过身份验证以编程方式授予用户访问权限，以执行您的“主帐户”代表他们执行的操作。

认为它看起来像这样......

Asp.net 加载您的应用程序（asp 帐户）用户连接（iuser 帐户）用户登录（？取决于使用的帐户可能是 windows auth 或 forms auth 等）

用户请求在他们的帐户下使用您呈现的网页做某事......

asp.net 检查用户是否有权执行操作（asp.net 帐户），如果用户可以执行此操作，asp.net 会根据请求的操作（asp.net 帐户）进行操作

因此......您应该已经拥有该 asp.net 帐户中的相关权限来执行您需要执行的操作。

上面也有一个层次……IIS服务器本身在系统/网络服务帐户下正常运行。

所以问题是真的......你想如何授予可能的用户写入服务器的权限。

查看框架中的成员资格提供程序和角色提供程序类，您应该能够继承它们并创建一个 ActiveDirectoryRoleProvider 和 ActiveDirectoryMembershipProvider 类，该类将根据 AD 中用户的角色成员身份进行身份验证，或者如果您更喜欢使用基本的 asp.net 提供程序类。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-08T23:45:25.130

您需要在 %windir%\Microsoft.NET\Framework{Version}\ 中编辑配置文件

请参阅[http://msdn.microsoft.com/en-us/library/ms998341.aspx](http://msdn.microsoft.com/en-us/library/ms998341.aspx)

# class - 接口契约，类对象？

> ID：219425
> 
> 赞同：22
> 
> 时间：2008-10-20T18:39:26.113
> 
> 标签：class, interface, object, contract

接口的契约是对象与类的契约吗？

从代码到执行代码，有什么需要区分这样的相同事物？我有点理解将类命名为类并将实例化的执行类命名为对象的想法，但总的来说，这是这些半冗余术语的唯一原因吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-10-20T19:08:22.670

并不真地。这里有四个术语，所以我将分别介绍它们：

## 界面

接口是一个抽象类（在没有多重继承的 Java 等语言中，有时还有其他限制，例如单独的数据类型），旨在用作访问许多行为相似的对象的公共基础. 从概念上讲，对抽象没有要求，但通常一个接口至少有一个抽象方法。接口是您的程序与许多类似的类进行通信的一种方法，每个类具有不同的语义但具有相同的通用目的。

## 合同

契约是您在用户和类或接口的实现者之间达成的隐含协议。例如，前置条件和后置条件（不变量通常是类实现中的约定——通常，不需要公开内部成员之间的关系等内容）。返回值或参数的规范也可以是合同的一部分。它基本上代表了如何使用函数/类/接口，并且通常不能用任何语言完全表示（某些语言，如 Eiffel，允许您将明确的合同放入其中，但即使这些也不能总是完全充实要求）。当你实现一个接口或从一个类派生时，你总是必须满足接口要求，或者，当覆盖一个非抽象类时，

## 班级

一个类不需要太多的复习，因为你显然以前用过它们。类是数据类型，在某些语言中是接口的超集（没有正式定义，如在 C++ 中），而在其他语言中是独立的（如在 Java 中）。

## 目的

对象是类类型（或任何非类类型，通常）的实例。对象的确切定义对于一种语言来说是非常特定的，但一般定义是由多个引用/指向同一事物的指针所引用的实际事物——例如，在 Java 等某些语言中，== 比较两个变量是否是相同的对象，不一定它们在语义上是否相同。对象独立于类或接口——它们代表单个实例。另一种思考方式是类或接口是模具，而对象是从模具中出来的物理对象（一个相当糟糕的类比，但这是我现在能想到的最好的类比）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-20T18:58:01.503

不，不是。类是您定义的模板。实例化该类的每个对象都遵循模板。它们并不是真正多余的术语，因为这两件事并不相同。您可以将类视为用户定义的数据类型。类和对象彼此不同，就像原始数据类型`int`与字面值 3 不同一样。

接口定义了所有实现类必须支持的一组方法。接口本身就是您为实现类定义的契约。它只是说任何实现该接口的类都必须具有该接口的一组公共方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T18:57:05.593

好吧，我猜......如果一个接口指定了一个契约，而不是一个类指定了一个（或多个）特定对象的实例。

不过，术语不如应用重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T18:57:47.933

实际上，接口是一种契约，当一个对象是一个类的一个实例时——它们是不同的东西，没有太多的共同点。

接口只是为对象提供了一个外观，或者为调用者保证对象可以执行某些操作，即使不知道它的实现。

例如，您可以让两个类实现相同的接口/契约，但做完全不同的事情（即使做这些事情的意义可能相同）。

以 IDisposable 接口为例：每个对象都可以释放它使用的资源，但它可以通过多种不同的方式来释放它，它可以选择不释放任何东西。这是对象的选择。

至少这将是 .NET 中的 POV

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-20T19:29:46.307

为了完成前面的答案，关于接口的一句话：

如果类不仅仅是一个对象的模板（因为它的全局特性独立于任何实例），接口也可以被描述为一个***观点***

一个实现多个接口的类：

*   完成它需要遵守的合同
*   允许用户从实现的接口所代表的*角度查看*该类的任何实例。

“观点”意味着您可以通过仅关注该接口定义的合同来使用对象。

正是在这方面，接口是“抽象类”，就像在“抽象”中一样（继承了类的某些特征，但忽略了其他一些特征）。在 Java 世界中，接口实际上留下了很多东西，因为它只能用于定义合同，例如，不能用于静态方法或函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-20T18:57:19.510

“类”和“对象”代表两个不同的东西；它们是相关的，但它们所代表的东西是不同的，非常强烈。

描述这一点的最好方法是查看静态。一个类可以有静态成员，它们完全独立于该类的任何实例。该类的对象可能使用也可能不使用这些静态成员；但是该类的对象的实例与该类的任何静态使用完全分开（或者至少应该是）。

或者想想单例模式。将类对象的实例存储在静态类访问器中是一种常见的做法，并显示了不同之处。您引用**类静态访问器**来获取单例类的**对象实例**；如果**类静态成员**没有要引用的**对象实例，则****该类**创建该对象**的****实例**。

 **换一种方式; 对象**是**类的实例；但是一个类可以**不仅仅是**一个从中实例化对象的模板。类的静态成员在内存中具有完全独立于这些类的对象实例的表示。

# asp.net - 使用 SqlDataSource 或 ObjectDataSource 时如何关闭连接/数据读取器

> ID：219431
> 
> 赞同：6
> 
> 时间：2008-10-20T18:40:51.943
> 
> 标签：asp.net, ado.net, connection-pooling

在 beta 测试期间，我们发现了连接池错误消息。因此，我一直在浏览代码并关闭未关闭的 SqlDataReader 对象。我需要知道的是如何关闭在 SqlDataSource 或 ObjectDataSource 标记的 SelectStatement 属性中指定的数据读取器（或者是否需要关闭）。如果不处理，会不会有连接泄漏？

提前致谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-20T18:48:17.530

我倾向于使用“using”关键字，尤其是在处理打开和关闭与数据库的连接时。“使用”是 Dispose 模式的快捷方式——[这里](http://msdn.microsoft.com/en-us/library/yh598w02(VS.80).aspx)是 MSDN 文章的链接，[这里](http://davidhayden.com/blog/dave/archive/2005/11/04/2555.aspx)是一个有用的博客条目的链接，其中包含概述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-17T08:05:27.183

To improve performance of Close()/Dispose() consider calling Cancel() on the associated command object before disposing or closing the reader, especially when you didn't reach the end of the record set.

For example:

```
 using (var cmd = ... ))
            {
                using (var reader = (DbDataReader) cmd.ExecuteReader())
                {
                    try
                    {
                        ConsumeData(reader); // may throw
                    }
                    catch(Exception)
                    {
                        cmd.Cancel();
                        throw;
                    }
                }
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T18:57:49.540

我的理解是，使用`SqlDataSource`，为您执行连接管理，您无所畏惧。

`ObjectDataSource`首先不直接与数据库对话，因此它是安全的——只要底层对象正确执行其连接和读取器管理。

正如其他人所提到的，`Close()`并且`using`是您与`ObjectDataSource`.

我的预感是，如果你有效地清理了代码库，你可能已经根除了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-18T16:37:12.367

We had the same problems here in a production environment.

Solved the issue. The problem first was, there were no using statements at all in my code. (It was build a few years ago, with some less knowledge).

I then tried putting the SqlDataSource in a using clause. But this didn't help either.

The trick here is, just like tvanfosson and Mischa are suggesting, putting the reader in a using clause. This is the object that actually closes the connection.

The number of connections shrunk to the minimum pool size of 10 at medium load.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T18:51:56.337

调用 .Dispose() 应该处理清理并释放任何持有的资源，但是[当对象完成从 reader 读取时，也应该调用 .Close() 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-20T21:39:30.820

我相信 SqlDataSource 会处理它自己的连接/阅读器问题，所以不用担心。至于您的手动连接，我发现这种模式在过去很有用：

```
 using (SqlConnection connection = new SqlConnection(connectionString))
   {
      try
      {
         SqlCommand command = connection.CreateCommand();
         command.CommandText = ...

         connection.Open();
         using (SqlDataReader reader = command.ExecuteReader())
         {
            do
            {
               while (reader.Read())
               {
                  ... handle each row ...
               }
            } while (reader.NextResult());
         }
      }
      catch (Exception ex)
      {
          ... error handling ...
      }
      finally
      {
         if (connection != null && connection.State == ConnectionState.Open)
         {
            connection.Close();
         }
      }
  } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-21T00:21:10.150

我同意，对于 ObjectDataSource，关闭应由其 Select 方法处理。我的 ObjectDataSource Select 方法返回一个 SqlDataReader。我担心的是......将 SqlDataReader 返回到 UI 后关闭时是否会变得无用。例如，请参阅以下示例代码。我没有尝试过，也不想在这个开发阶段这样做。

```
SqlDataReader MySelectMethod(){
   SqlDataReader dr = null;
   try{
      dr = DBObject.GetDataReader();
      return dr;
   }
   finally{
      dr.Close();
   }
} 
```

感谢您迄今为止收到的所有意见！

............

> My understanding is that with SqlDataSource, connection management is performed for you, and you have nothing to fear.
> 
> ObjectDataSource doesn't talk to the database directly in the first place, so it will be safe -- as long as the underlying object performs its connection and reader management correctly.
> 
> As others have mentioned, Close() and using are your friends for the classes you use with ObjectDataSource

.

# sql-server - 查询以列出所有存储过程

> ID：219434
> 
> 赞同：376
> 
> 时间：2008-10-20T18:41:36.670
> 
> 标签：sql-server, tsql

什么查询可以返回 SQL Server 数据库中所有存储过程的名称

如果查询可以排除系统存储过程，那将更有帮助。

* * *

## 回答 #1

> 赞同：554
> 
> 时间：2008-10-20T19:02:30.247

正如迈克所说，最好的方法是使用`information_schema`. 只要你不在master数据库中，系统存储过程就不会返回。

```
SELECT * 
  FROM DatabaseName.INFORMATION_SCHEMA.ROUTINES
 WHERE ROUTINE_TYPE = 'PROCEDURE' 
```

如果由于某种原因您在主数据库中有非系统存储过程，您可以使用查询（这将过滤掉 MOST 系统存储过程）：

```
SELECT * 
  FROM [master].INFORMATION_SCHEMA.ROUTINES
 WHERE ROUTINE_TYPE = 'PROCEDURE' 
   AND LEFT(ROUTINE_NAME, 3) NOT IN ('sp_', 'xp_', 'ms_') 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2008-10-20T18:44:54.590

```
SELECT name, 
       type
  FROM dbo.sysobjects
 WHERE (type = 'P') 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2008-10-20T18:50:27.683

据我了解，“首选”方法是使用 information_schema 表：

```
select * 
  from information_schema.routines 
 where routine_type = 'PROCEDURE' 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-02-19T09:36:21.417

The following will Return All Procedures in selected database

```
SELECT * FROM sys.procedures 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-01-13T09:42:11.637

You can try this query to get stored procedures and functions:

```
SELECT name, type
FROM dbo.sysobjects
WHERE type IN (
    'P', -- stored procedures
    'FN', -- scalar functions 
    'IF', -- inline table-valued functions
    'TF' -- table-valued functions
)
ORDER BY type, name 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-02-22T16:20:31.633

You can use one of the below queries to find the list of Stored Procedures in one database :

Query1 :

```
 SELECT 
        *
    FROM sys.procedures; 
```

Query2 :

```
 SELECT 
        * 
    FROM information_schema.routines 
    WHERE ROUTINE_TYPE = 'PROCEDURE' 
```

If you want to find the list of **all SPs in all Databases** you can use the below query :

```
 CREATE TABLE #ListOfSPs 
    (
        DBName varchar(100), 
        [OBJECT_ID] INT,
        SPName varchar(100)
    )

    EXEC sp_msforeachdb 'USE [?]; INSERT INTO #ListOfSPs Select ''?'', Object_Id, Name FROM sys.procedures'

    SELECT 
        * 
    FROM #ListOfSPs 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2008-10-20T19:27:49.010

如果您使用的是 SQL Server 2005，则以下内容将起作用：

```
select *
  from sys.procedures
 where is_ms_shipped = 0 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-07-10T20:44:39.707

Select All Stored Procedures and Views

```
select name,type,type_desc
from sys.objects
where type in ('V','P')
order by name,type 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-01-31T18:44:48.097

Just the names:

```
SELECT SPECIFIC_NAME  
FROM YOUR_DB_NAME.information_schema.routines  
WHERE routine_type = 'PROCEDURE' 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-10-12T11:28:43.500

This can also help to list procedure except the system procedures:

```
select * from sys.all_objects where type='p' and is_ms_shipped=0 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-10-20T19:26:10.073

不幸的是`INFORMATION_SCHEMA`，它不包含有关系统过程的信息。

```
SELECT *
  FROM sys.objects
 WHERE objectproperty(object_id, N'IsMSShipped') = 0
   AND objectproperty(object_id, N'IsProcedure') = 1 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-02-27T15:13:06.213

I've tweaked LostCajun's excellent post above to exclude system stored procedures. I also removed "Extract." from the code because I couldn't figure out what it's for and it gave me errors. The "fetch next" statement inside the loop also needed an "into" clause.

```
use <<databasename>>
go

declare @aQuery nvarchar(1024);
declare @spName nvarchar(64);
declare allSP cursor for
    select p.name  
    from sys.procedures p 
    where p.type_desc = 'SQL_STORED_PROCEDURE' 
    and LEFT(p.name,3) NOT IN ('sp_','xp_','ms_')
    order by p.name;
open allSP;
fetch next from allSP into @spName;
while (@@FETCH_STATUS = 0)
begin
    set @aQuery = 'sp_helptext [' + @spName + ']';
    exec sp_executesql @aQuery;
    fetch next from allSP into @spName;
end;
close allSP;
deallocate allSP; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-06-25T08:11:33.297

the best way to get objects is use sys.sql_modules. you can find every thing that you want from this table and join this table with other table to get more information by object_id

```
SELECT o. object_id,o.name AS name,o.type_desc,m.definition,schemas.name scheamaName
FROM sys.sql_modules        m 
    INNER JOIN sys.objects  o ON m.object_id=o.OBJECT_ID
    INNER JOIN sys.schemas ON schemas.schema_id = o.schema_id
    WHERE [TYPE]='p' 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-20T18:44:10.923

```
select *  
  from dbo.sysobjects
 where xtype = 'P'
   and status > 0 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-12-23T15:19:36.893

I wrote this simple tsql to list the text of all stored procedures. Be sure to substitute your database name in field.

```
use << database name >>
go

declare @aQuery nvarchar(1024);
declare @spName nvarchar(64);
declare allSP cursor for
select p.name  from sys.procedures p where p.type_desc = 'SQL_STORED_PROCEDURE' order by p.name;
open allSP;
fetch next from allSP into @spName;
while (@@FETCH_STATUS = 0)
begin
    set @aQuery = 'sp_helptext [Extract.' + @spName + ']';
    exec sp_executesql @aQuery;
    fetch next from allSP;
end;
close allSP;
deallocate allSP; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-01-08T14:29:11.927

This will returned all sp name

```
Select * 
FROM sys.procedures where [type] = 'P' 
     AND is_ms_shipped = 0 
     AND [name] not like 'sp[_]%diagram%' 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-16T19:55:14.407

This will give just the names of the stored procedures.

```
select specific_name
from information_schema.routines
where routine_type = 'PROCEDURE'; 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-03-07T16:18:46.090

This is gonna show all the stored procedures and the code:

```
select sch.name As [Schema], obj.name AS [Stored Procedure], code.definition AS [Code] from sys.objects as obj
    join sys.sql_modules as code on code.object_id = obj.object_id
    join sys.schemas as sch on sch.schema_id = obj.schema_id
    where obj.type = 'P' 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-12-04T08:09:28.180

This, list all things that you want

In Sql Server 2005, 2008, 2012 :

```
Use [YourDataBase]

EXEC sp_tables @table_type = "'PROCEDURE'" 
EXEC sp_tables @table_type = "'TABLE'"
EXEC sp_tables @table_type = "'VIEW'" 
```

OR

```
SELECT * FROM information_schema.tables
SELECT * FROM information_schema.VIEWS 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-03-21T04:55:28.507

Try this codeplex link, this utility help to localize all stored procedure from sql database.

[https://exportmssqlproc.codeplex.com/](https://exportmssqlproc.codeplex.com/)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-03-14T08:14:08.317

```
select * from DatabaseName.INFORMATION_SCHEMA.ROUTINES where routine_type = 'PROCEDURE'

select * from DatabaseName.INFORMATION_SCHEMA.ROUTINES where routine_type ='procedure' and left(ROUTINE_NAME,3) not in('sp_', 'xp_', 'ms_')

   SELECT name, type   FROM dbo.sysobjects
 WHERE (type = 'P') 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-17T10:44:08.847

```
USE DBNAME

select ROUTINE_NAME from information_schema.routines 
where routine_type = 'PROCEDURE'

GO 
```

This will work on mssql.

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-04-01T17:41:56.333

Select list of stored procedure in SQL server. Refer here for more: [https://coderrooms.blogspot.com/2017/06/select-list-of-stored-procedure-in-sql.html](https://coderrooms.blogspot.com/2017/06/select-list-of-stored-procedure-in-sql.html)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-02-03T02:57:09.210

exec sp_stored_procedures; [Docs.Microsoft.com](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-stored-procedures-transact-sql?view=sql-server-ver15)

Easy to remember.

# wcf - 可以在 WCF 中组合调用吗？

> ID：219463
> 
> 赞同：5
> 
> 时间：2008-10-20T18:51:26.260
> 
> 标签：wcf

我有两种方法需要从客户端调用我的 WCF 应用程序。

验证（用户名，密码） GetUser（用户名）

是否可以结合这些呼叫以避免来回发送这么多呼叫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T18:59:00.630

有几种方法可以处理这种类型的事情。首先，您可以使用 WCF 会话来启动一组命令，这些命令需要在调用之间维护一些上下文：

[http://msdn.microsoft.com/en-us/library/ms733136.aspx](http://msdn.microsoft.com/en-us/library/ms733136.aspx)

其次，您可以利用 WCF 对 WS-Security 标准的支持来避免将凭据作为第二次调用传递：

[http://msdn.microsoft.com/en-us/library/aa702565.aspx](http://msdn.microsoft.com/en-us/library/aa702565.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-19T13:43:03.370

这是一个非常古老的线程，但这听起来像是一个很好的服务总线应用程序。不久前我读到了有关 Rhino Service Bus 的信息，它符合您所说的要求。

[http://msdn.microsoft.com/en-us/magazine/ff796225.aspx](http://msdn.microsoft.com/en-us/magazine/ff796225.aspx)

您可以在一个网络请求中向服务发送多个请求（就像您说的那样），而不是一次一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-19T14:49:53.153

我建议您看看[Agatha](http://code.google.com/p/agatha-rrsl/)，它是由[Davy Brion](http://davybrion.com)创建的框架。它建立在 WCF 之上，并实现了消息的请求/响应样式。特别是，它允许您将请求批处理在一起，从而最大限度地减少往返行程。

# asp.net - ASP.NET Repeater ItemDataBound 在 PreRender 事件之后发生？

> ID：219467
> 
> 赞同：10
> 
> 时间：2008-10-20T18:53:23.697
> 
> 标签：asp.net, data-binding, events, repeater, page-lifecycle

我在 ASP.NET 2.0 Web 表单上有一个转发器控件。

据我了解，页面的所有数据绑定控件都会在事件之间的某处触发它们的绑定`Page_Load`事件`Page_PreRender`。

但是，我的中继器`ItemDataBound`事件似乎发生在`PreRender`事件之后。

这是怎么回事，有什么方法可以在所有`ItemDataBound`事件触发后访问页面控件？

**更新：**

*   中继器在中继器控件中使用`ObjectDataSource`带有`DataSourceID`声明集的 an。

*   DataSource ID 或对象在页面生命周期内根本不会被修改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T20:32:45.400

声明性数据绑定（通过 DataSourceID 属性指定的数据源）发生在 PreRender 事件之后。您正在观察的行为是设计使然。如果这不是您需要的，您应该显式地对控件进行数据绑定 - 只需调用其 DataBind 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:55:29.673

您是否在代码隐藏文件中（例如在 Page_Load() 事件中）专门绑定了转发器（myRepeater.DataBind();）？

您检查过 ASP.NET 事件生命周期吗？抱歉，如果您已经知道这一点，但以防万一：http: [//msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

希望能帮助到你。

里卡多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-13T03:57:46.863

以下博客文章中还有一篇关于转发器事件的好文章：

[LinkBut​​ton，Repeater 内的标签 - ASP.NET](http://tanvirdotnet.blogspot.com/2009/06/linkbutton-label-inside-repeater-aspnet.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T19:16:08.863

我想我有类似的情况，我的选择是通过调用 EnsureChildControls 或一些类似的方法来强制控件绑定自己。

# svn - 是否可以在 SVN 中查看某行的历史记录？

> ID：219470
> 
> 赞同：11
> 
> 时间：2008-10-20T18:54:10.530
> 
> 标签：svn, version-control, tortoisesvn

> **可能重复：**
> [Subversion 中特定代码行的更改历史？](https://stackoverflow.com/questions/53629/history-of-changes-to-a-particular-line-of-code-in-subversion)

使用 SVN 和/或 Tortoise SVN（或任何其他 SVN 工具，真的），是否可以查看文件特定行的历史记录？

最近，我多次遇到文件中的一行并希望找到与其创建相关联的日志条目（要么确定代码行的历史，要么获得更大的上下文以了解添加它的原因） .

现在我正在手动执行此操作。我可以显示该文件的日志，返回一个方法，看看有问题的行是否存在。如果是，我会更进一步。如果不是，我去看看更新的版本。重复直到找到进行更改的修订。

不用说，这个过程充其量是尴尬的，尤其是对于特别旧的文件。有谁知道实现这一目标的自动化方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T19:55:41.980

我不确定单独责备是否能满足提问者的需求。

我发现 TortoiseSVN 命令“责备更改”很方便。它归咎于两个修订版，并在 diff 工具中将它们一起比较。

结果为您提供当前行的内容、目标修订版的内容以及修改者。这在您选择两个连续的修订版时效果最佳。

您可以通过使用“显示日志”来访问它，右键单击下部窗格中的文件并选择“责备更改”。

此外，对于任何不喜欢“责备”一词的人，您可以运行“svn赞美”，得到相同的结果。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T19:03:43.583

更具体地说，您可以使用带有一些参数的“svn blame”来查看特定的修订。每个文件可能很大...`svn blame -r REV#`

迭代多个修订版（如果您从命令行工作）是一个快速脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T18:58:27.633

使用 TortoiseSVN Blame 上下文菜单选项 - 它有一个非常好的界面来探索各个行的历史。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T19:39:40.907

我更喜欢使用`svn annotate`over `svn blame`。我希望其他人也这样做。:-(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T18:54:53.447

`svn blame`

# php - 在 PHP/MySQL 中生成唯一代码？

> ID：219475
> 
> 赞同：14
> 
> 时间：2008-10-20T18:55:07.033
> 
> 标签：php, mysql, random, generator, serial-number

我正在与需要生成数百万用于杂志刮刮卡、瓶盖奖品等的字母数字代码的客户合作。它们必须足够短才能打印在帽子上，它们要确保不包括像 1 和 I、0 和 O 等模棱两可的字符，并且必须明确存储它们以供将来使用——我们可以当有人试图赎回一个时，它只有一个确定“有效性”的算法。最后，他们希望确保代码随机分布在一个大的“代码空间”内，这样人们就不能通过遍历字母表来猜测其他代码。

是否有任何指向生成此类代码集的合理有效算法的指针？我在一个信封的背面刮了一些，但这个问题闻起来像一个粗心的陷阱。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-20T19:24:11.343

如果您需要大约 1000 万个唯一键（例如），最好的方法是选择一个指数级更大的键空间，然后开始随机生成。阅读有关[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)的信息——这是您应该担心的主要问题。如果您想要 2^n 个唯一且安全的密钥，请确保至少有 2^(2 * n) 个可能的值。这是一个粗略的 O(n log n) 算法：

*   使用至少 2^50 的键空间（换句话说，允许 2^50 个可能的唯一值），您的整个数据集中几乎不会发生任何冲突——任何强行使用您的键的人都会有大约如果他们尝试其中的 2^25 个，则获得钥匙的几率。
*   根据需要生成尽可能多的随机数
*   在你的键上索引数据库（这是 O(n lg n) 步骤：排序）
*   翻阅数据库并遍历整个数据集以修剪重复项（下面的伪代码）
*   删除重复的行，你就完成了。

伪代码：

```
$last = null;
while ($current = getnext()) {
    if ($last == $current) {
        push($toDelete, $current);
    }
    $last = $current;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-20T19:08:51.297

假设您可以使用一个字符集，例如 40 个明确的大写、小写和数字字符。

对于 n 个字符的序列，您有 40 ^(n 个)组合

*   40 ⁴ = 2,560,000
*   40 ⁵ = 102,400,000
*   40 ⁶ = 4,096,000,000
*   40 ⁷ = 163,840,000,000
*   40 ⁸ = 6,553,600,000,000

因此 8 个字符提供了一个很好的工作空间——如果你生成了 1000 万个代码，你将不得不尝试数十万个组合来暴力破解代码。

或者你从另一个方向来 - 给出*可能的代码数量，你**应该*生成多少代码以避免他们称之为[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)的陷阱？

取 8 个字符代码， 6,553,600,000,000 约为 2 ^(42)，因此您可以合理地从中生成 2 ^(21 个)代码，或 2,097,152

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:51:01.867

使用一次性密码算法？

RFC4225 详细介绍了一种基于 HMAC 算法的方法。

[http://www.ietf.org/rfc/rfc4226.txt](http://www.ietf.org/rfc/rfc4226.txt)

但不要使用 0-9 位 base10 编码，而是使用 base32。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-30T23:04:17.440

无论您使用哪种方法，我都建议您添加一个或两个校验位，作为防止人们误输入或试图发明数字的“第一线”防御。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-08-28T21:00:46.400

奇怪的是，使用以下种子我只能生成 32 个唯一字符串。

ABCDEFGHJKLMNPQRSTUVWXYZ23456789

使用更长的种子，我能够生成更多——成功生成 40,000 个唯一字符串。

ABCDEFGHJKLMNPQRSTUVWXYZ234567892345678923456789ABCDEFGHJKLMNPQRSTUVWXYZ234567892345678923456789ABCDEFGHJKLMNPQRSTUVWXYZ234567892345678923456789

# php - 使用 PHP 访问用户的网络摄像头

> ID：219476
> 
> 赞同：4
> 
> 时间：2008-10-20T18:55:09.060
> 
> 标签：php, drupal, video, webcam

我想允许用户直接从他们的网络摄像头录制视频。我没有用 PHP 做太多的工作，但我在这个项目中坚持使用它。我们目前有一个用于视频上传和编码的系统，但没有任何东西可以实际访问用户的网络摄像头。你会建议我如何进行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-20T18:59:00.613

在我所知道的任何浏览器中，HTML 或 JavaScript/DOM 都无法使用网络摄像头，因此您最终将依赖某种插件。我建议您使用 Adob​​e Flash/Flex 开始您的搜索，尽管 Microsoft Silverlight 也有可能做同样的事情。Flex 是一种更可靠的技术，并且存在的时间更长，但微软正在向 Silverlight 投入大量资金，我预计它会在未来几年内大幅改进。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T19:01:23.447

您需要客户端技术——PHP 是服务器端。查看 Adob​​e Flash/Flex。我对 Microsoft Silverlight 一无所知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-21T18:13:01.423

查看 Drupal.org 上的[面部照片](http://drupal.org/project/mugshot)模块。它使用 Flash 小部件进行图像捕获，然后将图像保存为节点。如果您需要做类似的事情，几乎可以肯定地挖掘它的代码以获得有用的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T19:01:26.973

浏览器本身无法访问用户的网络摄像头。有人提议使用一种新型输入字段来支持这一点，但目前不可用。您必须通过插件来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T08:54:09.843

您无法从服务器端脚本语言访问底层硬件对象。如果您对访问硬件设备感兴趣，那么您必须使用“浏览器组件”，如 adobe flash、active X object、java applet 等。

# sql-server - SQL Server 2000/2005 中棕地数据库开发的最佳方法

> ID：219477
> 
> 赞同：1
> 
> 时间：2008-10-20T18:55:29.810
> 
> 标签：sql-server, database, sql-server-2005, sql-server-2000, brownfield

我最近接手了一个需要帮助的 SQL Server 2000 数据库的开发。我们计划很快将其升级到 SQL Server 2005。这个数据库在表上没有审计字段（CreatedBy、CreatedDate 等），没有外键，整体设计很糟糕。有六个程序使用内联 SQL 和其他旧/坏做法直接访问数据库。

我想清理架构和数据访问。你对一个好的起点有什么建议吗？这是一个生产数据库，它必须在改进的同时继续工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T19:14:31.237

您可能必须从访问数据库的应用程序开始。您很可能会发现对数据库模式的任何更改都会破坏其他应用程序。我发现最常见的罪魁祸首是 select * sql 然后根据列位置访问数据。如果您在最后一列之前插入一列，则该代码将中断。此外，除非您对新列使用默认值，否则任何插入命令都会失败。

最好的办法是了解这些外部程序是如何使用数据库的，然后设计一个新的数据库，然后一次将这些程序中的每一个迁移到新的数据库中。

几乎可以保证在生产过程中对该数据库进行更改会破坏其他应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:22:50.533

您可以更正、分析、规范化等模式，同时维护视图后面的当前模式/界面。

在视图上使用 before trigger 可以确保应用程序按预期写入和读取。

通过这种方式，您可以开始将客户端应用程序迁移到新架构，同时允许当前应用程序工作。而且您的数据在其新架构中更安全（DRI、FK、DF、CK 等）。

这也使界面合同对于每月运行一次的意外电子表格保持一致，并且没有人知道它对于月末报告至关重要......

# oracle - Oracle Text：如何清理用户输入

> ID：219482
> 
> 赞同：3
> 
> 时间：2008-10-20T18:56:55.220
> 
> 标签：oracle, full-text-search, oracle-text

如果有人有使用 Oracle 文本 ( `CTXSYS.CONTEXT`) 的经验，我想知道当用户想要搜索可能包含撇号的名称时如何处理用户输入。

在某些情况下，转义 ' 似乎有效，但对于单词末尾的 's 无效 - s 在停用词列表中，因此似乎被删除了。

我们目前将简单的查询文本（即任何只是字母的内容）更改`%text%`为 ，例如：

```
contains(field, :text) > 0 
```

搜索**O'Neil**有效，但**Joe**无效。

有没有人使用 Oracle Text 处理过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-01-26T22:51:00.397

使用反斜杠转义所有特殊字符。花括号不适用于子字符串搜索，因为它们定义了完整的标记。例如 %{ello}% 不会匹配标记 'Hello'

转义的空格字符将包含在搜索标记中，因此搜索字符串 '%stay\ near\ me%' 将被视为文字字符串“留在我附近”，并且不会调用 'near' 运算符。

如果要索引短字符串（如名称等）并且希望 Oracle Text 的行为与 like 运算符完全相同，则必须编写自己的词法分析器，该词法分析器不会为单个单词创建标记。（不幸的是 CATSEARCH 不支持子字符串搜索...）

将搜索更改为使用 oracle 文本的语义以及标记匹配可能是一个好主意，但对于某些应用程序，多个（短）标记和数字标记的通配符扩展将为搜索字符串创建太多用户合理会的命中期待工作。

例如，如果索引数据中有很多数字标记，则搜索“%I\ AM\ NUMBER\ 9%”很可能会失败，因为必须搜索所有以 'I' 结尾和以 '9' 开头的标记并在返回结果之前合并。

'I' 和 'AM' 可能也在默认停止列表中并且将被完全忽略，因此对于这个假设的应用程序，如果这些标记很重要，则可以使用空停止列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-22T04:17:34.907

使用`PARAMETERS('STOPLIST ctxsys.empty_stoplist')`when 索引将包括索引中的所有字母标记。重音字符也被索引。BASIC_LEXER 通常将非字母字符视为空格。

此外，CONTEXT 语法使用了很多包含符号和保留字的运算符，例如 WITHIN、NEAR、ABOUT。这些都必须在输入中以某种方式转义。如果您需要搜索子字符串，正确的转义方法*是*使用`\`. 这是对此处相关问题的回答：[Oracle text escaping with curly brackets and wildcards](https://stackoverflow.com/questions/30194480/oracle-text-escaping-with-curly-braces-and-wildcards)。如果您的要求是搜索整个术语（名称等），您可以使用更简单`{input}`的转义。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-10-21T00:37:51.710

忘记消毒。为什么？请参阅[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)。

这取决于您使用的数据库接口 API 类型。Perl DBI、ODBC、JDBC 支持参数化查询或预准备语句。如果您使用的是本机 DBI，但它不支持它，那么上帝保佑您。

# c# - 将数组转换为简单字符串的 C# 方法/语法是什么？

> ID：219519
> 
> 赞同：4
> 
> 时间：2008-10-20T19:06:37.323
> 
> 标签：c#, .net, arrays, string, join

我正在寻找的是 JavaScript 的基本等价物`Array::join()`，您可以传入分隔符并将其用于所有下标的返回字符串。我当然可以使用 a 或诸如此类的东西编写自己的函数`StringBuilder`，但 .NET BCL 中*必须*有一些内置的东西。

*编辑：任何东西*的数组，不一定是`string`or `char`。我更喜欢简单地调用`ToString()`每个 subscript的方法`object`。 `String.Join()`很好，只是你传递了一个字符串数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T19:07:36.353

如果数组包含字符串，您可以只使用[`String.Join()`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx). 如果数组不包含字符串，您将需要一些更复杂的东西，以便您可以处理它包含的每个项目的转换或转换过程。

**更新：**使用@JaredPar 的代码作为更通用示例的基础：

```
char sep = GetSeparatorChar();
object[] toJoin = GetToJoin();
string joined = toJoin.Aggregate((x,y) => x.ToString()+sep.ToString()+y.ToString()); 
```

显然，您可以在该示例中对 x 和 y 做任何您想做的事情，以使字符串看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:28:24.127

如果 String.Join 不适合您 - 例如，您有 an`IEnumerable<string>`而不是 a`string[]`或者您有其他类型的集合，请参阅[这个较早的问题](https://stackoverflow.com/questions/145856/how-to-join-int-to-a-charcter-separated-string-in-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:09:15.600

我不清楚您是否要加入字符数组或字符串数​​组。

对于字符串

```
 char sep = GetSeparatorChar();
string[] toJoin = GetToJoin();
string joined = toJoin.Aggregate((x,y) => x+sep.ToString()+y); 
```

# java - 使用 jstl out 标签真的是最佳实践吗？

> ID：219525
> 
> 赞同：4
> 
> 时间：2008-10-20T19:09:13.650
> 
> 标签：java, html, jsp, jstl

我记得我和一群开发人员一起做一个项目，他们总是希望静态 html 文本位于 out 标记 ( `<c:out value="words" />`) 内。我不记得为什么会这样。

这真的是构建 jsp 页面时的最佳实践吗？这种方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-20T19:53:56.087

对于静态文本来说，这是一个糟糕的主意。然后，您就没有障碍了解什么是静态的，什么是动态生成的。

除此之外，在 Servlet Spec 2.3+ 上，您可以将动态文本与静态文本混合为：

这是静态的，而不是`${dynamic}`文本。

根据我的经验，使用`c:out`标签的唯一原因：

1.  您正在使用较旧的 servlet 规范，并且需要它们以某种方式输出 DYNAMIC 文本

2.  您想转义`HTML`输出以避免使用`<>`等，用它们的控制代码等替换＆符号。

否则，让他们使用静态文本会使程序员或维护者感到困惑……现在我把那个**EL**放在哪里了？它在一个`c:out`标签中……但其他五十行静态文本也是如此！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T19:19:25.690

如果您只是打印纯文本，最好使用 HTML。标签的优点`c:out`是您可以评估标签内的表达式。

```
<c:out value="Hello ${user.firstName} ${user.lastName}"/> 
```

# ios - 创建 Safari Webarchives 的跨平台方式

> ID：219530
> 
> 赞同：10
> 
> 时间：2008-10-20T19:12:40.540
> 
> 标签：ios, iphone, uiwebview, safari, webarchive

我一直在四处寻找，但没有找到任何可以创建 Safari 网络存档格式的工具的参考资料。

有没有人有关于创建这种格式的代码的指针，或者至少有一个格式参考文档？

理想情况下，我想构建一个工具，它可以获取一个目录并拆分一个 webarchive，以便加载到 iPhone 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-26T21:40:05.053

扩展 Ben 所说的内容：[CFLite](http://developer.apple.com/opensource/cflite.html)（Core Foundation 的跨平台开源子集）附带一个 plist 解析器。如果您可以链接到它，那么使用文件应该非常简单`.webarchive`，这些文件只是将所有文件（HTML、CSS 等）连接成一个的属性列表。

还有其他库，例如[`Mac-PropertyList`](http://search.cpan.org/dist/Mac-PropertyList/)Perl 的 CPAN。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T19:56:26.130

我相信 .webarchives 的格式没有正式记录，但它只是一个 plist。您可以在 Property List Editor 中打开它并检查其内容。不应该很难复制其中的大部分（如果不是全部）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-03-26T16:42:45.540

Tried textutil, but that only uses the Cocoa text system and as such fails at css, js and such.

There's a nice GitHub project: [https://github.com/takebayashi/STWebArchiver](https://github.com/takebayashi/STWebArchiver)

It uses Webkit to write .webarchive files. Needs some customization for your needs…</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T10:00:09.187

幸运的是，Webarchive 创建是 Webkit 的一部分，因此您可以使用以下内容在 Mac 上使用它们：

[http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/WebKit/Classes/WebArchive_Class/Reference/Reference.html](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/WebKit/Classes/WebArchive_Class/Reference/Reference.html)

或者，使用此源代码来了解使用中的格式：

[http://trac.webkit.org/browser/trunk/WebKit/mac/WebView/WebArchive.mm](http://trac.webkit.org/browser/trunk/WebKit/mac/WebView/WebArchive.mm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-26T11:13:26.733

它不是跨平台的，而是在 Mac 上

```
textutil -convert webarchive whatever.html 
```

does the job. Not sure whether you can easily include images etc. though.

# asp.net - 如何为我的 ASP.NET 网站创建 Google 站点地图？

> ID：219532
> 
> 赞同：0
> 
> 时间：2008-10-20T19:13:53.843
> 
> 标签：asp.net, dotnetnuke, sitemap

我正在使用**DotNetNuke**，所以整个网站基本上是动态驱动的，我对如何为其创建 Google 站点地图一无所知。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T19:22:30.240

如果您使用的是 DNN 4.5.x 及更高版本（我相信这是版本），开箱即用的 DotNetNuke 将为您创建它。

只需将谷歌指向

[http://www.yoursite.com/sitemap.aspx](http://www.yoursite.com/sitemap.aspx)

例如这里[是我的站点地图](http://iowacomputergurus.com/sitemap.aspx)。

它并不完美，但效果很好，您也可以使用其他一些工具来创建它，但是您需要一些可以爬取站点的东西来获得它。

*更新*

我想我会扩展一下为什么它不完美。

1.  所有页面都具有相同的优先级
2.  它只抓取实际页面，不会捕获和包含生成“页面”的第三方模块（博客、Ventrian 新闻文章、论坛等）。

根据您的需要， [BiteTheBullet.co.uk](http://www.bitethebullet.co.uk)有一个不错的免费提供者， [Ifinity](http://www.ifinity.com.au)也有一个不错的提供者，其中包括一些“错过”的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:21:27.073

Jeff Atwood 在[这里](http://www.codinghorror.com/blog/archives/001174.html)有一些关于站点地图的好信息。[您还可以在此处](http://sitemaps.org/protocol.php)查看有关 SiteMap 格式的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T19:22:44.637

你可以试试这个[DotNetNuke Google Sitemap Generator](http://www.bitethebullet.co.uk/tabid/59/Default.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-22T05:30:47.483

感谢您的回答。我在 codeplex 找到了一个很棒的站点地图生成器。如果有人感兴趣，可以在这里查看：http: [//www.codeplex.com/sitemapgenerator](http://www.codeplex.com/sitemapgenerator)

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T09:52:49.950

另请参阅我分发的这个。

它比所有其他的更好，因为它可以通过为单个模块插入新的提供程序来扩展。这允许您索引特定模块的所有 Url。

免费插件包括博客模块和文特里安新闻文章模块的提供程序。

[免费 DotNetNuke 站点地图提供商下载](http://www.ifinity.com.au/Products/Google_Sitemap_For_DNN/ "DotNetNuke Google 站点地图提供商")

# garbage-collection - 您是否应该在完整的垃圾收集中首先收集年轻代？

> ID：219540
> 
> 赞同：6
> 
> 时间：2008-10-20T19:15:00.020
> 
> 标签：garbage-collection

我正在编写一个包含分代垃圾收集器的程序。只有两代人。我想知道的是：在进行完整收集时，我是否会通过首先收集较年轻的对象，将幸存者提升到老年代，然后收集老年代来获得任何收益（性能方面），还是应该只是垃圾收集所有一扫？我不确定人们通常会采用哪种方式。

我现在使用的是两步法，因为它实现起来有点简单，但也许一步法会更有效？

垃圾收集器是非复制的，如果这很重要的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-20T19:19:58.903

这取决于您提升幸存者的频率。如果你经常提升它们，那么看起来你会通过一次扫描做 GC 做得更好。如果你不这样做，那么看起来它们会非常相似。

无论哪种方式，您似乎都分两个阶段进行了一些多余的工作。例如，任何升职的人天生都会受到两次检查（一次是年轻，一次是年老）。同样，如果这种情况不经常发生，我会坚持使用更简单的两步法（因为您已经可以使用它并且几乎没有什么收获）。

# python - 我惊呆了：python 和套接字 + 线程的奇怪问题

> ID：219547
> 
> 赞同：2
> 
> 时间：2008-10-20T19:19:45.627
> 
> 标签：python, multithreading, apache, sockets

我有一个作为 http-server 的 python 脚本：http: [//paste2.org/p/89701](http://paste2.org/p/89701)，当它针对 ApacheBench (ab) 进行基准测试时，并发级别（-c 开关）低于或等于该值我在源代码中的 socket.listen()-call 中指定了一切正常，但是一旦将 apache bench 中的并发级别置于 socket.listen()-call 中的值之上，性能就会下降，例如：

*   socket.listen( **10** ) 和 ab -n 50 -c **10** [http://localhost/](http://localhost/) = **1200req/s**
*   socket.listen( **10** ) 和 ab -n 50 -c **11** [http://localhost/](http://localhost/) = **40req/s**
*   socket.listen( **100** ) 和 ab -n 5000 -c **100** [http://localhost/](http://localhost/) = **1000req/s**
*   socket.listen( **100** ) 和 ab -n 5000 -c **101** [http://localhost/](http://localhost/) = **32req/s**

两次调用之间的代码没有任何变化，我不知道出了什么问题——这个问题已经有一天了。另请注意：无论 socket.listen() 设置为什么或 apache 中的并发（-c 开关）设置为什么，相同代码的多路复用版本（我编写以与线程版本进行比较）都可以正常工作。

*我在 IRC/python 文档上花了一天时间，在 comp.lang.python 和我的博客上发布 - 我找不到任何人甚至知道可能出了什么问题。帮我！*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T19:56:00.093

我无法确认您的结果，并且您的服务器编码有问题。我掀起了我自己的服务器，也没有这个问题。让我们把讨论移到一个更简单的层次：

```
import thread, socket, Queue

connections = Queue.Queue()
num_threads = 10
backlog = 10

def request():
    while 1:
        conn = connections.get()
        data = ''
        while '\r\n\r\n' not in data:
            data += conn.recv(4048)
        conn.sendall('HTTP/1.1 200 OK\r\n\r\nHello World')
        conn.close()

if __name__ == '__main__':
    for _ in range(num_threads):
        thread.start_new_thread(request, ())

    acceptor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    acceptor.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    acceptor.bind(('', 1234))
    acceptor.listen(backlog)
    while 1:
        conn, addr = acceptor.accept()
        connections.put(conn) 
```

在我的机器上是这样的：

```
ab -n 10000 -c 10 http://127.0.0.1:1234/ --> 8695.03 [#/sec]
ab -n 10000 -c 11 http://127.0.0.1:1234/ --> 8529.41 [#/sec] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T20:37:12.647

我还实现了一个异步版本：

```
import socket, Queue, select

class Request(object):
    def __init__(self, conn):
        self.conn = conn
        self.fileno = conn.fileno
        self.perform = self._perform().next

    def _perform(self):
        data = self.conn.recv(4048)
        while '\r\n\r\n' not in data:
            msg = self.conn.recv(4048)
            if msg:
                data += msg
                yield
            else:
                break
        reading.remove(self)
        writing.append(self)

        data = 'HTTP/1.1 200 OK\r\n\r\nHello World'
        while data:
            sent = self.conn.send(data)
            data = data[sent:]
            yield
        writing.remove(self)
        self.conn.close()

class Acceptor:
    def __init__(self):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        sock.bind(('', 1234))
        sock.listen(10)
        self.sock = sock
        self.fileno = sock.fileno

    def perform(self):
        conn, addr = self.sock.accept()
        reading.append(Request(conn))

if __name__ == '__main__':
    reading = [Acceptor()]
    writing = list()

    while 1:
        readable, writable, error = select.select(reading, writing, [])
        for action in readable + writable:
            try: action.perform()
            except StopIteration: pass 
```

执行：

```
ab -n 10000 -c 10 http://127.0.0.1:1234/ --> 16822.13 [#/sec]
ab -n 10000 -c 11 http://127.0.0.1:1234/ --> 15704.41 [#/sec] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:48:00.390

我在 tomcat / java 上的 backlog 上找到[了这篇文章](http://www.mail-archive.com/dev@tomcat.apache.org/msg22589.html)，它对 backlog 提供了有趣的见解：

> 例如，如果所有线程都忙于 java 处理请求，内核将处理 SYN 和 TCP 握手，直到它的 backlog 已满。当积压已满时，它将简单地丢弃未来的 SYN 请求。它不会发送 RST，即在客户端上导致“连接被拒绝”，相反，客户端将假定包丢失并重新传输 SYN。希望届时积压的队列将被清除。

正如我所解释的那样，通过要求 ab 创建比您的套接字配置为处理丢弃的数据包更多的同时连接，而不是拒绝，我不知道 ab 是如何处理的。可能是它重新传输 SYN，但可能在等待一段时间后。这甚至可以在某处指定（TCP 协议？）。

如前所述，我不知道，但我希望这暗示了原因。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T19:57:04.367

看起来您并没有真正获得并发性。显然，当您执行 socket.accept() 时，主线程不会立即返回等待下一个连接。也许你的连接处理线程只是 python 代码，所以你被 SIL（单解释器锁）顺序化了。

如果线程之间没有繁重的通信，最好使用多进程方案（当然，使用预先生成的进程池）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-21T17:21:36.723

好的，所以我在完全不同的服务器上运行代码 - （我在 slicehost 获得的 vps），没有一个问题（一切都按预期工作）所以老实说，我认为我的笔记本电脑现在有问题；p

感谢大家的帮助！

# flash - 现有 Flash 组件的自动化测试（非 UI）

> ID：219549
> 
> 赞同：3
> 
> 时间：2008-10-20T19:20:38.057
> 
> 标签：flash, unit-testing, actionscript, automation, automated-tests

我构建并维护了一组 Flash 组件，这些组件分发给发布者并允许他们与我们的系统集成。目前该组件没有 UI，仅包含用于查询我们的系统服务器、解析响应和修改查询中发送的参数的编译代码。Flex 和 CS3 都有一个 As2 版本和一个 AS3 版本。我们典型的工作流程是这样的：

1.) 加载组件 2.) 在组件上设置参数 3.) 告诉组件查询我们的系统 4.) 等待表示响应已被接收和解析的事件 5.) 调用组件上的方法以获取和解析使用解析的数据

我们最近一直在谈论自动化这些组件的测试，并且似乎有很多关于 AsUnit 和 FlexUnit 等框架的讨论。但是，我一直无法掌握如何有效地使用其中之一。示例和教程总是忽略现实世界的示例，而是提供多个类和过多的代码来测试示例函数是否返回 num1+num2。

我唯一能猜到的是，这些测试框架旨在从一开始就实施，并在开发之初就为测试套件、测试运行程序和测试用例进行规划。

我们的组件的自动化测试必须确保属性设置正确，这些属性在请求中发送到我们的系统，收到的响应考虑到发送的参数是正确的，解析的数据包含正确的信息，并且没有错误，错误的响应, 或导致无限的解析循环。

我的问题是，是否有任何方法可以自动测试现有的、广泛分布的、已建立的 Flash 组件，而无需完全重新设计以适应测试框架？还是我误解了测试框架而这已经成为可能？

**更新**：感谢您的回复。我已经开始将我的组件与 AsUnit 集成，并认为我对它如何帮助我有了很好的理解。但是，AS2 AsUnit 不支持异步测试用例，我很难找到支持的 AS2 单元测试框架。异步测试对这个项目非常重要。有人对不同的框架有任何建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T20:14:06.890

我们在我们的项目中使用了 FlexUnit，我对此非常满意。假设您的项目设计为具有相当松散的耦合度，那么您根本不需要进行太多更改（如果有的话）来测试您的代码。如果您已经在使用像[Cairngorm](http://opensource.adobe.com/wiki/display/cairngorm/Cairngorm)或[PureMVC](http://puremvc.org/)这样的 MVC 框架，那么 FlexUnit 应该非常轻松地集成。

然而，我要说的是，我在 Flash/Flex 单元测试方面的经验并不像在其他语言（如 Ruby 或 .NET）方面那样积极，原因有以下三个。首先，如此高度的动作脚本代码与 UI 相关，而且这种代码即使不是不可能测试也很难。另一个原因是测试运行器不适合插入到持续集成环境中，例如[CruiseControl.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)或[CruiseControl.rb](http://cruisecontrolrb.thoughtworks.com/)，因为它需要人工运行并单击按钮。最后，单元测试的一个巨大好处通常是您可以将它与覆盖分析工具（如[NCover](http://www.ncover.com/)或[rcov）一起运行](http://rubyforge.org/projects/rcov/). [如果没有经过修改的编译器（例如Flexcover](http://code.google.com/p/flexcover/)），Flash/Flex 不适合进行此类分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-11T21:13:11.003

很高兴听到你选择了 AsUnit！

AsUnit 是唯一可以在 ActionScript 2 和 ActionScript 3 中为您提供一致体验的单元测试框架。它不依赖于任何外部框架 - 尤其是 Flex，并且在事后为您的项目创建测试应该没有真正的问题。

AsUnit 的最新版本确实支持 ActionScript 2 中的异步测试。 as25 分支可以在这里找到：

[http://github.com/lukebayes/asunit](http://github.com/lukebayes/asunit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-21T13:06:41.183

虽然我从来没有机会在 actionscript 中与单元测试员一起工作，但在工作中我们创建了一个框架，它：

1.  在测试应用程序中编译脚本，在我们的例子中使用 flex
2.  设置定时器（看门狗）应用程序，以防循环失败
3.  运行应用程序，然后：
    *   连接到 PHP 后端以获取测试用例
    *   将测试馈送到组件
    *   阅读结果并将其发回
4.  看门狗会启动并杀死首先发生的应用程序：
    *   计时器用完了（合理的超时）
    *   应用程序发回结果
5.  如果还有其他测试要运行，请转到 2。

绝对不优雅，但完成了工作（这是使用 AS1 脚本）

# sql - 哪些 SQL 查询或视图将显示“动态列”

> ID：219559
> 
> 赞同：4
> 
> 时间：2008-10-20T19:25:09.140
> 
> 标签：sql, database, metadata, dataview

我有一个数据表，我允许人们将元数据添加到该表中。

我为他们提供了一个界面，允许他们将其视为向存储数据的表添加额外的列，但实际上我将数据存储在另一个表中。

```
Data Table
   DataID
   Data

Meta Table
   DataID
   MetaName
   MetaData 
```

因此，如果他们想要一个存储数据、日期和名称的表，那么我将在数据表中保存数据，在元名称中保存单词“日期”，在元数据中保存日期，然后在元名称中带有“名称”的元表和元数据中的名称。

我现在需要一个查询，该查询从这些表中获取信息并将其呈现为好像来自具有两个附加列“数据”和“名称”的单个表，因此对于客户来说，它看起来像是一个带有自定义列的表：

```
MyTable
   Data
   Date
   Name 
```

或者，换句话说，我该如何从这里开始：

```
Data Table
   DataID        Data
   1             Testing!
   2             Hello, World!

Meta Table
   DataID        MetaName         MetaData
   1             Date             20081020
   1             Name             adavis
   2             Date             20081019
   2             Name             mdavis 
```

到这里：

```
MyTable
   Data          Date             Name
   Testing!      20081020         adavis
   Hello, World! 20081019         mdavis 
```

几年前，当我使用 PHP 在 MySQL 中执行此操作时，我做了两个查询，第一个是获取额外的元数据，第二个是将它们连接在一起。我希望现代数据库有替代方法来处理这个问题。

[与此问题](https://stackoverflow.com/questions/218848/design-decision-dynamically-adding-data-question#218872)的选项 3 相关。

-亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:37:29.227

您想在 MyTable 中旋转每个名称-值对行...试试这个 sql：

```
DECLARE @Data   TABLE (
    DataID      INT IDENTITY(1,1)   PRIMARY KEY,
    Data        VARCHAR(MAX)
)

DECLARE @Meta   TABLE (
    DataID      INT ,
    MetaName    VARCHAR(MAX),
    MetaData    VARCHAR(MAX)
)

INSERT INTO @Data
SELECT 'Data'

INSERT INTO @Meta
SELECT 1, 'Date', CAST(GetDate() as VARCHAR(20))
UNION
SELECT 1, 'Name', 'Joe Test'

SELECT * FROM @Data

SELECT * FROM @Meta

SELECT 
    D.DataID,
    D.Data,
    MAX(CASE MetaName WHEN 'Date' THEN MetaData ELSE NULL END) as Date,
    MAX(CASE MetaName WHEN 'Name' THEN MetaData ELSE NULL END) as Name
FROM
    @Meta M
JOIN    @Data D     ON M.DataID = D.DataID  
GROUP BY
    D.DataID,
    D.Data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:31:15.493

```
SELECT DataTable.Data AS Data, MetaTable.MetaData AS Date, MetaTable.MetaName AS Name
FROM DataTable, MetaTable
WHERE DataTable.DataID = MetaTable.DataID 
```

您可能需要添加一个附加子句（AND Data = 'some value'）来返回用户感兴趣的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:31:38.363

AFAIK，您只能使用动态`SQL`存储过程在服务器端执行此操作。

实际上，您要动态生成的代码是：

```
SELECT [Data Table].*
    ,[MyTable Date].MetaData
    ,[MyTable Name].MetaData
FROM [Data Table]
LEFT JOIN [MyTable] AS [MyTable Date]
    ON [MyTable Date].DataID = [Data Table].DataID
    AND [MyTable Date].MetaName = 'Date'
LEFT JOIN [MyTable] AS [MyTable Name]
    ON [MyTable Name].DataID = [Data Table].DataID
    AND [MyTable Name].MetaName = 'Name' 
```

这是执行此操作的代码：

```
DECLARE @sql AS varchar(max)
DECLARE @select_list AS varchar(max)
DECLARE @join_list AS varchar(max)
DECLARE @CRLF AS varchar(2)
DECLARE @Tab AS varchar(1)

SET @CRLF = CHAR(13) + CHAR(10)
SET @Tab = CHAR(9)

SELECT @select_list = COALESCE(@select_list, '')
                        + @Tab + ',[MyTable_' + PIVOT_CODE + '].[MetaData]' + @CRLF
        ,@join_list = COALESCE(@join_list, '')
                        + 'LEFT JOIN [MyTable] AS [MyTable_' + PIVOT_CODE + ']' + @CRLF
                            + @Tab + 'ON [MyTable_' + PIVOT_CODE + '].DataID = [DataTable].DataID'  + @CRLF
                            + @Tab + 'AND [MyTable_' + PIVOT_CODE + '].MetaName = ''' + PIVOT_CODE + '''' + @CRLF
FROM (
    SELECT DISTINCT MetaName AS PIVOT_CODE
    FROM [MyTable]
) AS PIVOT_CODES

SET @sql = 'SELECT [DataTable].*' + @CRLF
            + @select_list
            + 'FROM [DataTable]' + @CRLF
            + @join_list
PRINT @sql
--EXEC (@sql) 
```

您可以使用`CASE`语句示例使用类似的动态技术来执行数据透视。

# oop - ColdFusion 对象是按引用传递还是按值传递？

> ID：219564
> 
> 赞同：26
> 
> 时间：2008-10-20T19:27:22.537
> 
> 标签：oop, coldfusion, cfc, cfml

ColdFusion 对象（即通过cfobject 调用的CFC）通常是通过引用传递还是通过值传递（复制到内存中）？是否可以强制 ColdFusion 以任何一种方式传递对象？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-20T19:44:18.307

ColdFusion 对象通过引用传递。没有真正的按值传递对象的方法，但您可以使用 duplicate() 函数创建副本。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-10-20T20:10:59.767

好吧，请记住，[在 MX 7 中使用 duplicate() 无法](http://livedocs.adobe.com/coldfusion/7/htmldocs/00000456.htm)复制某些内容，例如 CFC 和 COM、CORBA 和 Java 对象。不过，您[可以在 CF 8 中复制 CFC](http://livedocs.adobe.com/coldfusion/8/htmldocs/functions_c-d_47.html)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-10T20:55:02.930

结构和 CFC 等复杂对象通过引用传递，但如果将数组传递给 UDF，则它是通过值传递的。这使得编写一个像内置数组函数那样改变数组的用户定义函数是不可能的。如果你真的需要通过引用传递一个数组，你可以将它包装在一个struct中，然后它会通过引用传递。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-26T15:41:30.170

FWIW，数组也在 Railo CFML 引擎中通过引用传递，正如许多开发人员认为的那样。Railo 3.1 还有望提供管理设置以允许您选择默认行为，以实现与 Adob​​e CF 的可选兼容性。

# web-applications - CMS 或重新上传页面

> ID：219566
> 
> 赞同：0
> 
> 时间：2008-10-20T19:28:06.593
> 
> 标签：web-applications, content-management-system

我有一个我正在开发的网站，它有一个活动页面。所有者希望能够每周编辑活动页面。教网站所有者如何编辑这一页并上传它或只为这一页使用 CMS 会更容易吗？

除了发布到电子邮件地址的联系表格外，该网站的其余部分都是静态的。因此，我需要添加一个数据库来存储 CMS 登录的用户名和密码。

如果 CMS 那么哪一个最适合这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T20:10:52.840

这取决于页面的复杂性。如果它是一个固定结构，客户不想添加照片链接，您可能希望让他们能够编辑简单的数据文件（而不是页面本身）。然后读入数据文件。我喜欢对这类事情使用简单的 JSON 格式。

至少使用数据文件，您可以恢复到旧版本或优雅地处理错误，而不是让客户端破坏整个页面。

如果您想走 CMS 路线，[Drupal](http://drupal.org/)有一个非常完善的社区，其中包含大量附加组件。

如果您更喜欢自己动手编程，还可以查看[Google Calendar API](http://code.google.com/apis/calendar/)，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-22T13:41:44.683

就个人而言，我不想处理软件安装和数据库设置来编辑单个页面。

您可能会考虑使用基于 FTP 的 CMS。这将使您可以访问一个不错的基于 Web 的所见即所得编辑器，并且您所做的任何更改都将通过 FTP 传输到您的网络主机。

以下是一些执行此操作的服务：

CushyCMS - [http://www.cushycms.com/](http://www.cushycms.com/)

nextEdit - [http://www.nextedit.net/](http://www.nextedit.net/)

在这种情况下，不需要软件安装或数据库。

**更新：**另外一项服务是 TypeRoom - [http://www.typeroom.com/](http://www.typeroom.com/) 我忘记了这个。几个月前我对它进行了测试，印象深刻。

# sql - URL 的最佳数据库字段类型

> ID：219569
> 
> 赞同：395
> 
> 时间：2008-10-20T19:29:04.563
> 
> 标签：sql, mysql, database

我需要在 MySQL 表中存储一个 url。定义一个包含不确定长度的 URL 的字段的最佳实践是什么？

* * *

## 回答 #1

> 赞同：364
> 
> 时间：2008-10-20T19:55:27.363

> 1.  [流行网络浏览器中的最小公分母最大 URL 长度：**2,083** (Internet Explorer)](https://web.archive.org/web/20060217120846/http://www.boutell.com/newfaq/misc/urllength.html)

> 2.  [http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)
>     *VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。MySQL 5.0.3 及更高版本中 VARCHAR 的有效最大长度取决于最大行大小（65,535 字节，在所有列之间共享）和使用的字符集。*

> 3.  所以...
>     < MySQL 5.0.3 使用**TEXT**
>     或
>     >= MySQL 5.0.3 使用**VARCHAR(2083)**

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-10-20T19:31:31.623

`VARCHAR(512)`（或类似的）应该足够了。但是，由于您并不真正知道相关 URL 的最大长度，我可能会直接转到`TEXT`. 这样做的危险当然是效率损失，因为`CLOB`s 比简单的字符串数据类型（如`VARCHAR`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-10-20T19:31:43.917

`varchar(max)`对于 SQLServer2005

`varchar(65535)`适用于 MySQL 5.0.3 及更高版本

这将根据需要分配存储，并且不应影响性能。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-09-08T19:33:20.620

这实际上取决于您的用例（见下文），但存储为`TEXT`存在性能问题，并且`VARCHAR`在大多数情况下听起来像是矫枉过正。

**我的做法：**使用大方但不是不合理的大`VARCHAR`长度，例如`VARCHAR(500)`左右，并鼓励需要较大 URL 的用户使用 URL 缩短器，例如`safe.mn`.

**Twitter 方法：**对于一个非常好的用户体验，为过长的 URL 提供一个自动 URL 缩短器，并将链接的“显示版本”存储为 URL 的片段，末尾带有省略号。（示例：`http://stackoverflow.com/q/219569/1235702`将显示为`stackoverflow.com/q/21956...`并链接到缩短的 URL `http://ex.ampl/e1234`）

**注意事项和注意事项**

*   显然，Twitter 方法更好，但对于我的应用程序的需要，推荐一个 URL 缩短器就足够了。
*   URL 缩短器有其缺点，例如安全问题。就我而言，这不是一个巨大的风险，因为 URL 不是公开的，也没有被大量使用；但是，这显然不适用于所有人。safe.mn 似乎阻止了很多垃圾邮件和网络钓鱼 URL，但我仍然建议谨慎行事。
*   请务必注意，您不应强迫用户使用 URL 缩短器。对于大多数情况（至少对于我的应用程序的需要），500 个字符对于大多数用户将使用它来说已经足够了。*仅对过长的链接使用/推荐 URL 缩短器。*

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-22T22:45:12.440

您需要根据*URL 的使用频率*以及是否*确实*需要解除绑定长度，在 TEXT 或 VARCHAR 列之间进行选择。

在以下情况下，按照[micahwittman 的](https://stackoverflow.com/users/11181/micahwittman)建议，使用maxlength >= **2,083的****VARCHAR**：

 **1.  您将在每个查询中使用大量 URL（与 TEXT 列不同，VARCHAR 与行内联存储）
2.  您很确定 URL 永远不会超过 65,535 字节的行限制。

在以下情况下使用**TEXT**：

1.  该 URL 确实可能会突破 65,535 字节的行限制
2.  您的查询不会一次（或经常）选择或更新一堆 URL。这是因为 TEXT 列仅包含一个内联指针，并且在检索引用数据时涉及的随机访问可能会很痛苦。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-12-18T10:00:03.920

您应该使用带有 ASCII 字符编码的 VARCHAR。URL 采用百分比编码，国际域名使用 punycode，因此 ASCII 足以存储它们。这将比 UTF8 使用更少的空间。

```
VARCHAR(512) CHARACTER SET 'ascii' COLLATE 'ascii_general_ci' NOT NULL 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-10-20T19:33:44.770

大多数浏览器允许您[在 URL 中放置大量数据，](http://www.boutell.com/newfaq/misc/urllength.html)因此很多事情最终都会创建非常大的 URL，因此如果您谈论的不仅仅是 URL 的域部分，您将需要使用 TEXT 列，因为[VARCHAR/CHAR 是有限的](http://dev.mysql.com/doc/refman/5.0/en/char.html)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-20T19:33:54.380

我不知道其他浏览器，但是[IE7 对 HTTP GET 操作有 2083 个字符的限制](http://support.microsoft.com/kb/208427)。除非任何其他浏览器有较低的限制，否则我不明白为什么你需要超过 2083 个字符。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-19T10:32:59.833

您最好使用[varchar(max)](https://msdn.microsoft.com/en-us/library/ms176089.aspx?f=255&MSPPError=-2147217396)（就大小而言）意味着`varchar (65535)`. 这甚至可以存储您更大的网址，也可以节省您的空间。

> max 说明符扩展了 varchar、nvarchar 和 varbinary 数据类型的存储能力。varchar(max)、nvarchar(max) 和 varbinary(max) 统称为大值数据类型。您可以使用大值数据类型来存储最多 2^31-1 字节的数据。

请参阅TechNet 上有关使用大值数据类型的[这篇文章](https://technet.microsoft.com/en-us/library/ms178158(v=sql.105).aspx)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-20T19:50:11.353

大多数 Web 服务器都有 URL 长度限制（这就是为什么会出现“URI 太长”的错误代码的原因），这意味着存在一个实际的上限。查找最流行的 Web 服务器的默认长度限制，并使用其中最大的作为字段的最大大小；应该绰绰有余。

# sql-server-2005 - 如何计算 SQL Server 2005 中存储过程的 SIZE？

> ID：219570
> 
> 赞同：7
> 
> 时间：2008-10-20T19:29:04.640
> 
> 标签：sql-server-2005, tsql, stored-procedures

我被要求对特定数据库中使用的空间进行全面细分。我知道我可以在 SQL Server 2005 中使用*sys.dm_db_partition_stats来确定数据库中每个**表*正在使用多少空间，但是有没有办法确定数据库中*存储过程*的单个大小和总大小？（当然，没有打开每一个并计算字符。）

存储过程使用的总空间不太可能很大（与实际*数据*相比），但有数百个，它可能会加起来。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-20T20:15:59.850

```
;WITH ROUTINES AS (
    -- CANNOT use INFORMATION_SCHEMA.ROUTINES because of 4000 character limit
    SELECT o.type_desc AS ROUTINE_TYPE
            ,o.[name] AS ROUTINE_NAME
            ,m.definition AS ROUTINE_DEFINITION
    FROM sys.sql_modules AS m
    INNER JOIN sys.objects AS o
        ON m.object_id = o.object_id
)
SELECT SUM(LEN(ROUTINE_DEFINITION))
FROM ROUTINES 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T19:38:03.920

比计算字符更好的方法是使用信息 schema.routines。您可以将每个例程定义的长度求和为（请注意，每个例程定义的最大长度为 4,000 个字符，请参见下文以了解没有此限制的方法）：

```
从 information_schema.routines 中选择 Sum(Len(Routine_Definition))
其中routine_type = 'PROCEDURE'

```

或者你可以返回每个 sp 的长度

```
选择 Len(Routine_Definition), * from information_schema.routines
其中routine_type = 'PROCEDURE'

```

存储过程的长度不太可能是问题所在。通常数据库空间不足的原因是没有备份日志文件（然后使用 dbcc shrinkfile 或 dbcc shrinkdatabase 将其缩小）。

在 Sql 2000 中，这里有一个例程可以提供没有上述 4000 个字符限制的长度：

```
声明@Name VarChar(250)
DECLARE RoutineCursor CURSOR FOR
   从 information_schema.routines 中选择 Routine_Name 其中routine_type = 'PROCEDURE'

声明@结果表
   ( SpName VarChar(250),
       SpLength 整数
   )

创建表##SpText
   (SpText VarChar(8000))

打开例程光标
FETCH NEXT FROM RoutineCursor INTO @Name

而@@FETCH_STATUS = 0
   开始
      INSERT INTO ##SpText (SpText) EXEC sp_helptext @Name

      插入@Results (SpName, SpLength) (SELECT @Name, Sum(Len(SpText)) FROM ##SpText)
      截断表##SpText

      FETCH NEXT FROM RoutineCursor INTO @Name
   结尾

CLOSE 例程光标
DEALLOCATE 例程光标
删除表##SpText

从@Results 中选择SpName、SpLength 按SpLength DESC 排序
从@Results 中选择总和（SpLength）

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T19:56:56.613

Dave_H 的解决方案在 information_schema.routines 表中达到了 4,000 个字符的限制

试试这个，首先你用存储过程的全文生成一个表，然后对字符长度求和。

```
--create a temp table to hold the data
create table ##sptext (sptext varchar(1000))
go

--generate the code to insert the full text of your sprocs
select 'insert into ##sptext (sptext) exec sp_helptext '''+specific_name+''';'
from information_schema.routines 
where routine_type = 'PROCEDURE'
go

/*Copy the output back to your query analyzer and run it*/

--now sum the results    
select sum(len(sptext))
from ##sptext 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-26T16:29:21.757

需要使用 DATALENGTH 而不是 LEN 来获取字节数而不是字符数，因为 sys.sql_modules 目录视图的定义列是 NVARCHAR(MAX) 即 Unicode

```
SELECT Type,
   SUM(Chars)  SizeChars,
   SUM(Bytes)  SizeBytes,
   SUM(Bytes) / 1024\. SizeKB,
   CAST(SUM(Bytes) / 1024 AS VARCHAR) + '.' + CAST(SUM(Bytes) % 1024 AS VARCHAR) SizeKBRemBytes
FROM
(
SELECT o.type_desc Type, 
       LEN(sm.definition) Chars,
       DATALENGTH(sm.definition) Bytes
    FROM sys.sql_modules sm
    JOIN sys.objects o ON sm.object_id = o.object_id
) x
GROUP BY Type
ORDER BY Type 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-26T15:48:45.633

改进Cade Roux 答案：

```
/*
<documentation>
  <summary>Count size in bytes veiws, triggers, procedures and function in database.</summary>
  <returns>1 data set: RoutinType, SUM LENGTH of objects, SUM DATALENGTH.</returns>
  <issues>No</issues>
  <author>Cade Roux</author>
  <created>2008-10-20</created>
  <modified>2019-06-26 by Konstantin Taranov</modified>
  <version>1.0</version>
  <sourceLink>https://github.com/ktaranov/sqlserver-kit/blob/master/Scripts/Objects_Size_In_Database.sql</sourceLink>
  <originalLink>https://stackoverflow.com/a/219740/2298061</originalLink>
</documentation>
*/

SET NOCOUNT ON;
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

WITH CTE_Routine AS (
    /* Can not use INFORMATION_SCHEMA.ROUTINES because of 4000 character limit */
    SELECT o.type_desc     AS RoutineType
         , o.[name]        AS RoutineName
         , m.[definition]  AS RoutineDefinition
    FROM   sys.sql_modules AS m 
    INNER JOIN sys.objects AS o ON m.object_id = o.object_id
)
SELECT RoutineType
     , SUM(LEN(RoutineDefinition))            AS RoutineLen
     /* DATALENGTH for counting trailing space in the end of objects definitions */
     , SUM(DATALENGTH(RoutineDefinition)) / 2 AS RoutineDatalength
FROM   CTE_Routine
GROUP BY RoutineType; 
```

# xml - 我注定要使用 XML 进行开发吗？

> ID：219572
> 
> 赞同：2
> 
> 时间：2008-10-20T19:29:43.453
> 
> 标签：xml, oslo

根据我在 Oslo 看到的情况，声明性 XML 将发挥关键作用。我可以指望围绕大量设计人员生成的 XML 来创建真实世界的应用程序吗？只知道我没有研究过这个。如果您检查了该主题，我会欣赏您的观点。

*一些背景...*

每当我深入研究任何支持 XML 的声明性技术（例如 Silverlight 和 WPF、ASP.NET 或 MSBuild）时，我似乎最终都会编辑大量原始 XML 文本。设计师很少有足够的表达能力来满足我的需求。

一方面，我真的无法在人类和机器可读性之间找到更好的折衷方案，而且公平地说，XML 编辑体验会随着每个化身而变得更好。

另一方面，我还没有发现 XML 对它的某些用途来说是理想的。尤其是在表达逻辑、重构和可测试性方面。可能是设计者太软弱，或者 XML 表现力太强，或者我脾气暴躁，被对象和方法宠坏了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T23:27:55.407

我倾向于成为一个有点可疑的 XML 拥护者。尽管我每天都在使用它，并且基于 XML 的 Web 服务已成为我职业生涯的重要组成部分（也是我写这本书的基础），但我认为它被广泛过度使用。我倾向于相信你的工具箱里应该有很多工具，你应该使用最好的工具来完成工作。对于很多事情来说，XML 是一个很好的解决方案。但是有很多事情不是这样，有些事情可能是一个糟糕的选择。

就像有些人热衷于批评和回避 XML 一样，有些人同样热衷于（或更多地）赞美和使用它。在您上面随便提到的情况下，您所谈论的大部分是基于 Web 的技术。在这些情况下，您通常已经有一个 XML 解析器和/或 DOM 操作器可供您使用，因此使用它并没有什么坏处。你没有增加复杂性，因为它已经存在了。Flash 和 AIR 大量使用 XML 来实现功能，但它们的目标是解析 XML-ish 标记（如果不是 XML 本身，那么 HTML 或 XHTML）是每个应用程序的核心部分的环境。对于这些技术，引入不同类型的数据表达语言会增加复杂性。使用 XML 非常有意义。

这是一个例子......这里有问题的语言是 Perl，因为这是我主要使用的语言，但它的 Perl 方面与这一点无关：我一直在研究转储深度数据的现有模块的扩展结构。对很多事情都很有用——序列化、跨平台的可移植性等。也是一种流行的调试工具。我想要扩展它的原因是真正庞大而复杂的结构（例如那些由 ORM 或 MOP 框架生成的结构）可能会变得非常复杂。所以我的第一个想法是做一个扩展，让我以一种我可以控制的方式将数据转换为 HTML。然后我想，如果我能创建图表来显示各种元素以及哪些元素与哪些元素相关联等等，那就太好了。*然后*我突然想到，如果我选择一种合理的中性格式，我应该能够相当容易地推导出这两种格式。

那个格式？XML。为什么在这种情况下它一定比原生 Perl 序列化结构更好，或者比使用不同的临时表示（例如 YAML 或 JSON）更好？因为如果我有有效的、格式良好的 XML，我可以轻松地使用 XSLT 将其转换为 (X)HTML 或 SVG。如果需要，我也可以将其转换为纯文本（我已经有 XSLT 样式表，可以根据用户的选择选择发出 HTML 片段或干净的文字包装的纯文本）。

有很多方法可以解决这个特殊问题，但*在这种情况下*XML 给我的优势使其成为首选（至少，对于我的偏好和需求而言）。XSLT 是一个定义明确、文档齐全（好吧，您可能对 W3C 文档的看法有所不同，但不乏有关该主题的书籍）的工具，用于将 XML 转换为几乎任何东西。对于这个特殊的问题，XML 的表现力加上我的最终目标格式（XHTML 和 SVG）本身就是 XML 的事实，使它成为明确的选择。另一方面，有很多次我（作为顾问）向客户或（作为公司员工/团队成员）向老板/团队推荐 XML 不**应该**用于某些任务。有时原因很清楚——使用 XML 不会提高数据的（重）可用性，他们还没有在项目中使用 XML，这不是你应该引入依赖的那种事情，等等. 有时原因更微妙；如果您正在尝试决定如何存储/检索应用程序的配置，它真的需要在 XML 中吗？任何其他应用程序都不太可能需要读取/解析它，因此数据的可移植性/重用性不是问题。如果数据本质上相当平坦，您可能可以使用键/值对文件进行管理。如果数据更复杂和/或更复杂，您可能会使用 YAML。

通常，XML 是数据表达的最差选择，除非它是最佳选择。JSON 和 YAML 也是如此，充分利用这些方法的最佳方法是熟悉并熟悉所有这些方法，并知道哪一种是最适合您面前工作的工具你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-21T01:00:52.473

我认为问题中的神奇词是“声明性的”。

具有任何灵活性的声明性技术都需要声明格式。它必须有一种方法来验证声明在语法上是否正确。它需要能够序列化和反序列化底层数据结构进出这种格式。如果格式足够开放，可以直接构建生成、修改或处理声明的工具，这将非常有益。

你可以看到这是怎么回事。

我认为您看到的问题是真实的，但我认为它们并不是真正的 XML 问题。好吧，不是直接的。我认为真正的问题在于你所说的另一件事：这些声明性技术的设计工具不够强大。

这就是为什么它是一个 XML 问题的原因：使用 JSON 作为其产品的序列化格式的开发人员不会允许自己认为“嘿，我不需要实现这个功能，用户只需编辑 JSON。 "

我认为*这就是*问题所在。并不是说 XML 是一种不好的表示声明的格式。就是XML的开放性很诱人。它为工具开发人员提供了一种通过将功能排除在工具之外的方式来滑行。

我认为这是一个社会问题，而不是技术问题。这是一个棘手的问题。如果微软提出了一种封闭格式而不是 XAML，我们可能会拥有更好的 WPF 工具。但是我们从开放格式中得到了太多，无法放弃它们。

# java - 大型内部类和私有变量

> ID：219574
> 
> 赞同：9
> 
> 时间：2008-10-20T19:30:13.950
> 
> 标签：java, jboss, class-design

我遇到过几次的一件事是服务类（如 JBoss 服务）由于辅助内部类而变得过大。我还没有找到打破课堂的好方法。这些助手通常是线程。这是一个例子：

```
/** Asset service keeps track of the metadata about assets that live on other
 * systems. Complications include the fact the assets have a lifecycle and their
 * physical representation lives on other systems that have to be polled to find
 * out if the Asset is still there. */
public class AssetService
{
  //...various private variables
  //...various methods

  public AssetService()
  {
    Job pollerJob = jobService.schedule( new AssetPoller() );
    Job lifeCycleJob = jobService.schedule( AssetLifecycleMonitor() );
  }

  class AssetPoller
  {
    public void run()
    { 
      // contact remote systems and update this service's private variables that
      // track the assets.
    }
  }

  class AssetLifecycleMonitor
  {
    public void run()
    {
      // look for assets that have meet criteria for a lifecycle shift
      // and update this service's private variables as relevant.
    }
  }
} 
```

所以，如果我有几个助手并且它们很复杂，会发生什么，整个类文件会变得非常大。我喜欢内部类，因为它清楚地表明这些类完全归服务所有，并且只为帮助该服务而存在。我试过打破类并将父服务作为参考传递，这主要是有效的，但我不喜欢的事情是：

*   我最终公开了包级别的访问器，以便分解的类可以访问变量，而在此之前我根本没有公开设置器，因为内部类可以直接访问。*   另外，由于我不断调用访问器而不是底层变量，因此事情变得更加冗长。一个小问题，授予。*   方便的方法（例如 checkAssetIsValid() 或类似的方法）现在需要包级别的公开，以便帮助类可以调用它们，而以前作为内部类它们可以是私有的。*   更糟糕的是，我需要将服务实现类传递给辅助类构造函数，因为我不想在服务实现的接口中公开这些辅助方法，因为这会迫使它们公开。这可能会产生一些单元测试/模拟问题。*   Worse yet, any synchronization I wanted to do gets leaked out through some external convenience method (e.g. lockDownAssets() during a poller update). Before, the internal classes had access to private Locks.

    So, in short, breaking the classes out loses some of the encapsulation I like. But leaving them in can lead to some large java files. I've yet to find a good way to deal with this. C++ had the concept of "friends" which I've rarely missed, but would actually help in this case.

    Thoughts?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T23:36:10.290

On bytecode level inner classes are just plain Java classes. Since the Java bytecode verifier does not allow access to private members, it generates synthetic accessor methods for each private field which you use. Also, in order to link the inner class with its enclosing instance, the compiler adds synthetic pointer to the outer 'this'.

Considering this, the inner classes are just a layer of syntax sugar. They are convenient and you have listed some good points, so I'd list some negative aspects which you might want to consider:

*   Your inner class has a hidden dependency to the *whole* parent class, which obfuscates its inbound interface. If you extract it as package-private class you have a chance to improve your design and make it more maintainable. Initially it's more verbose, but often you'd find that:
    *   Instead of exposing 10 accessors you actually want to share a single value object. Often you would find that you don't really need a reference to the whole outer class. This also works well with IoC.
    *   Instead of providing methods for explicit locking, it's more maintainable to encapsulate the operation with its context in a separate class (or move it to one of the two classes - outer or formerly-inner).
    *   Convenience methods belong in package private utility classes. You can use the Java5 static import to make them appear as local.
*   Your outer class can bypass any protection levels and access private members of your inner class directly. This is not bad thing per se, but it takes away one of the language means of expressing your design.
*   Since your inner class is embedded in exactly one outer class, the only way to reuse it is to subclass the outer class. An alternative would be to pass explicit reference to a package-private interface that the outer class implements. This would allow you to mock the outer and better test the inner class.
*   Though recent debuggers are quite good, I have experienced problems with debugging inner classes before (conditional breakpoint scope confusion, not stopping at breakpoints, etc.)
*   Private classes bloat your bytecode. See my first paragraph - often there is an API that you could use and reduce the number of synthetic cruft.

P.S. I'm talking about non-trivial inner classes (especially ones that do not implement any interfaces). Three line listener implementations are good.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T19:54:17.303

The line between encapsulation and separation can be difficult to walk. However, I think the main issue here is that you need some kind of solid interaction model to use as a basis of separating your classes.

I think it's reasonable to have external helper utility classes which are used in many places, as long as they don't side effect I don't see an issue. It's also reasonable to have static helper classes, as long as they are well organized, which contain often used methods such as checkAssetIsValid(). This is assuming that checkAssetIsValid does not need to access any external state other than the object you are passing it.

The most important thing for separation is not to have objects which share permanent references in many of these classes. I like to look to functional programming for guidance. Each class should not be reaching into the guts of other classes and changing state. Instead each class which does work should produce and consume container objects.

Visualization can be very helpful too. I noticed a thread on the topic of Java Visualization tools [here](http://www.velocityreviews.com/forums/t138598-uml-class-diagram-generator.html). Ideally, your class interaction diagram should look more like a tree than a graph.

Also, I just want to note that refactoring a large class into smaller classes can be extremely difficult. It's best to build a suite of unit tests for the public interface at the very least so that it will become immediately obvious if you break something. I know tests have saved me countless hours in the past.

Hopefully some of this will be helpful. I'm kind of just rambling on here.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T20:00:55.340

Don't forget to consider why you're trying to break up your large class. Is it for software engineering purposes? E.g. it's a programming hotspot and you have such a large file it causes complicated merges on your developer team?

Is it just a general desire to avoid large classes? In which case it may be that your time would be better spent improving the code you do have.

Is the code becoming difficult to manage, e.g. debugging and ensuring avoidance of unintended side effects is becoming more difficult.

Rick's comment about using unit tests to ensure continued consistent behavior is very valuable and a good idea. It may be that the current design simply precludes refactoring and you're better off re-implementing the same behavior starting from the interface of the original. Be ready for plenty of regresssion testing!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T20:58:40.433

I'm not a fan of excessive use of inner classes. I think that they don't really offer any advantage (when used in the extreme) that putting the code in a normal class wouldn't, and they just serve to make the class file unnecessarily large and hard to follow.

What's the harm if you have to increase the visibility of a few methods? Is it going to completely break your abstraction or interface? I think too often programmers tend to make everything private by default, where there isn't really much of a harm in letting some other classes call your methods - if your design is truly OO-based, that is.

If all of your "inner helper classes" need access to some of the same methods, consider putting them in a base class so they can be shared via inheritance.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T19:48:04.697

Yeap. Probably you need to re-refactor those helpers and not move them all as they are. Some things belong to the service some other to the helper. Probable new classes should be used to encapsulate the data.

One posibility you can use is to AOP to provide fine-grained access, and include in the point cut that the method should be only invoked from the "friend" class. Still your method would be exposed :(

I guess there is no easy solution for this.

# vb.net - 如何将工具提示添加到 vb.net winforms 数据网格行？

> ID：219581
> 
> 赞同：1
> 
> 时间：2008-10-20T19:31:40.203
> 
> 标签：vb.net, winforms, data-binding, .net-2.0, tooltip

我希望在 vb.net winforms 的绑定数据网格中的每一行中添加一个工具提示。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T20:23:35.777

我自己没有尝试过，但我会试一试：

```
System.Windows.Forms.ToolTip formToolTip = new System.Windows.Forms.ToolTip();
formToolTip .SetToolTip(item, "Row Tooltip"); 
```

对应`item`于您为其设置工具提示的单元格的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-10T17:06:07.013

```
row.cells[indexof].ToolTipText= "tootip here". 
```

在winforms中，看起来你不能做整行。

如果您需要整行，您可以遍历单元格。

```
 foreach (DataGridViewCell cell in row.Cells)
                {
                    cell.ToolTipText = "tooltip here";
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-29T08:14:25.363

```
If TypeOf control Is TabControl Then
    For Each control1 In control.Controls
        If TypeOf control1 Is TabPage Then
            strControlText = fnGetLanguage(control1.Text)
        End If
        For Each control2 In control1.Controls
            If TypeOf control2 Is label Then
                strControlText = control2.Text
                ' strToolTipText = ToolTip.GetToolTip(control2)
                If strControlText.Contains("*") Then
                    strDizi = Split(strControlText, " ")
                    strControlText = fnGetLanguage(strDizi(0))
                Else
                    strControlText = fnGetLanguage(control2.Text)
                End If
            ElseIf TypeOf control2 Is DataGridView Then
                For i = 0 To control2.ColumnCount - 1
                    strControlText = control2.Columns(i).HeaderText
                    strControlText = fnGetLanguage(strControlText)
                Next
            ElseIf TypeOf control2 Is ComboBox Then
                strControlText = control2.Text
                'strToolTipText = ToolTip.GetToolTip(control2)
                If control2.DataSource Is Nothing Then
                    For i = 0 To control2.Items.Count - 1
                        strControlText = control2.Items(i)
                        strControlText = fnGetLanguage(strControlText)
                    Next
                Else
                    For i = 0 To control2.Items.Count - 1
                        strControlText = control2.Items(i).ToString
                        strControlText = fnGetLanguage(strControlText)
                    Next
                End If
            End If
        Next
    Next
End If 
```

# java - 在 Java 类路径中的一个目录中包含所有 jar

> ID：219585
> 
> 赞同：1118
> 
> 时间：2008-10-20T19:32:45.740
> 
> 标签：java, command-line, classpath

有没有办法在类路径的目录中包含所有 jar 文件？

我正在尝试`java -classpath lib/*.jar:. my.package.Program`，但它无法找到肯定在这些 jar 中的类文件。我是否需要将每个 jar 文件分别添加到类路径中？

* * *

## 回答 #1

> 赞同：1252
> 
> 时间：2008-10-20T20:32:14.967

使用 Java 6 或更高版本，类路径选项支持通配符。请注意以下事项：

*   使用直引号 ( `"`)
*   使用`*`，而不是`*.jar`

**视窗**

> `java -cp "Test.jar;lib/*" my.package.MainClass`

**Unix**

> `java -cp "Test.jar:lib/*" my.package.MainClass`

这类似于 Windows，但使用`:`而不是`;`. 如果不能使用通配符，`bash`则允许使用以下语法（`lib`包含所有 Java 归档文件的目录在哪里）：

> `java -cp "$(printf %s: lib/*.jar)"`

（请注意，使用类路径与该`-jar`选项不兼容。另请参阅：[Execute jar file with multiple classpath library from command prompt](https://stackoverflow.com/questions/13018100/execute-jar-file-with-multiple-classpath-libraries-from-command-prompt)）

**了解通配符**

从[类路径](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html)文档中：

> 类路径条目可以包含基本名称通配符`*`，这被认为等同于指定目录中所有文件的列表，扩展名为`.jar`或`.JAR`。例如，类路径条目`foo/*`指定名为 foo 的目录中的所有 JAR 文件。一个简单的类路径条目`*`扩展为当前目录中所有 jar 文件的列表。
> 
> 包含的类路径条目`*`将不匹配类文件。要匹配单个目录 foo 中的类和 JAR 文件，请使用 `foo;foo/*`或`foo/*;foo`。选择的顺序决定了 中的类和资源是否在`foo`中的 JAR 文件之前加载`foo`，反之亦然。
> 
> 不递归搜索子目录。例如，`foo/*`仅在 中查找 JAR 文件`foo`，而不在`foo/bar`,`foo/baz`等中查找 JAR 文件。
> 
> 目录中 JAR 文件在扩展类路径中枚举的顺序未指定，并且可能因平台而异，甚至在同一台机器上时时刻刻都不同。一个结构良好的应用程序不应该依赖于任何特定的顺序。如果需要特定顺序，则可以在类路径中显式枚举 JAR 文件。
> 
> 通配符的扩展是在调用程序的主要方法之前尽早完成的，而不是在类加载过程本身的后期完成。包含通配符的输入类路径的每个元素都替换为通过枚举指定目录中的 JAR 文件生成的元素序列（可能为空）。例如，如果目录`foo`包含`a.jar`、`b.jar`和`c.jar`，则类路径`foo/*`扩展为`foo/a.jar;foo/b.jar;foo/c.jar`，并且该字符串将是系统属性的值 `java.class.path`。
> 
> 环境变量的处理方式与（或）命令行选项`CLASSPATH`没有任何不同。也就是说，在所有这些情况下都使用通配符。但是，标头中不支持类路径通配符。`-classpath``-cp``Class-Path jar-manifest`

注意：由于 java 8 中的一个已知错误，windows 示例必须在条目前使用反斜杠并带有尾随星号：[https ://bugs.openjdk.java.net/browse/JDK-8131329](https://bugs.openjdk.java.net/browse/JDK-8131329)

* * *

## 回答 #2

> 赞同：254
> 
> 时间：2009-08-14T00:42:06.813

在 Windows 下这有效：

```
java -cp "Test.jar;lib/*" my.package.MainClass 
```

这不起作用：

```
java -cp "Test.jar;lib/*.jar" my.package.MainClass 
```

注意`*.jar`,**所以 * 通配符应该单独使用**。

* * *

在 Linux 上，以下工作：

```
java -cp "Test.jar:lib/*" my.package.MainClass 
```

分隔符是***冒号***而不是*分号*。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2008-10-20T20:08:16.450

我们通过部署一个**主**jar 文件来解决这个问题，该文件`myapp.jar`包含一个**manifest** ( `Manifest.mf`) 文件，该文件指定一个类路径以及其他所需的 jar，然后将这些 jar 与它一起部署。这种情况下，只需要`java -jar myapp.jar`在运行代码时声明即可。

因此，如果您将 main 部署`jar`到某个目录中，然后将依赖 jar 放入该`lib`目录下的文件夹中，则清单如下所示：

```
Manifest-Version: 1.0
Implementation-Title: myapp
Implementation-Version: 1.0.1
Class-Path: lib/dep1.jar lib/dep2.jar 
```

注意：这是独立于平台的——我们可以使用相同的 jar 在 UNIX 服务器或 Windows PC 上启动。

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2011-03-17T10:55:28.437

我在 Ubuntu 10.04 上使用 java-sun 1.6.0_24 的解决方案，所有 jar 都在“lib”目录中：

```
java -cp .:lib/* my.main.Class
```

如果失败，以下命令应该可以工作（将 lib 目录中的所有 *.jar 打印到类路径参数中）

```
java -cp $(for i in lib/*.jar ; do echo -n $i: ; done)。我的主类
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2011-12-21T19:32:09.143

简短的回答：`java -classpath lib/*:. my.package.Program`

Oracle 提供了有关在类路径中使用通配符的文档，[此处为 Java 6](http://java.sun.com/javase/6/docs/technotes/tools/windows/classpath.html)，[此处为 Java 7](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)，标题为“**了解类路径通配符**”部分。（在我写这篇文章时，这两页包含相同的信息。）以下是重点摘要：

*   通常，要包含给定目录中的所有 JAR，您可以使用通配符`*`( **not** `*.jar` )。

*   通配符只匹配 JAR，不匹配类文件；要获取目录中的所有类，只需在目录名称处结束类路径条目。

*   上述两个选项可以结合使用，以将所有 JAR 和类文件包含在一个目录中，并且应用通常的类路径优先规则。例如`-cp /classes;/jars/*`

*   通配符**不会**在子目录中搜索 JAR。

*   `CLASSPATH`如果您使用系统属性或`-cp`或`-classpath`命令行标志，上述要点是正确的。但是，如果您使用`Class-Path`JAR 清单标头（就像您可能对 ant 构建文件所做的那样），则**不会**使用通配符。

*是的，我的第一个链接与得分最高的答案中提供的链接相同（我没有希望超越），但该答案并没有提供超出链接的太多解释。由于[这些天](https://meta.stackexchange.com/q/116301/131713)在 Stack Overflow 上[不鼓励](https://meta.stackexchange.com/questions/8231/are-answers-that-just-contain-links-elsewhere-really-good-answers)这种行为，我想我会扩展它。*

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2016-07-18T19:03:16.677

**窗户**：

```
 java -cp file.jar;dir/* my.app.ClassName 
```

**Linux**：

```
 java -cp file.jar:dir/* my.app.ClassName 
```

提醒：
- **Windows**路径分隔符`;`
- **Linux**路径分隔符`:`
- 在 Windows 中，如果 cp 参数不包含空格，“引号”是可选的

* * *

## 回答 #7

> 赞同：39
> 
> 时间：2012-10-15T07:43:44.750

对我来说，这适用于 windows 。

```
java -cp "/lib/*;" sample 
```

对于 Linux

```
java -cp "/lib/*:" sample 
```

我正在使用[Java 6](http://java.sun.com/javase/6/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2010-03-06T21:00:17.283

你可以试试java `-Djava.ext.dirs=jarDirectory` [http://docs.oracle.com/javase/6/docs/technotes/guides/extensions/spec.html](http://docs.oracle.com/javase/6/docs/technotes/guides/extensions/spec.html)

运行 java 时外部 jar 的目录

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2012-02-13T17:57:06.227

**正确**：

```
java -classpath "lib/*:." my.package.Program 
```

不正确：

```
java -classpath "lib/a*.jar:." my.package.Program
java -classpath "lib/a*:."     my.package.Program
java -classpath "lib/*.jar:."  my.package.Program
java -classpath  lib/*:.       my.package.Program 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2010-11-01T22:31:31.217

如果您使用的是 Java 6，那么您可以在类路径中使用通配符。

现在可以在类路径定义中使用通配符：

```
javac -cp libs/* -verbose -encoding UTF-8 src/mypackage/*.java  -d build/classes 
```

参考：[http ://www.rekk.de/bloggy/2008/add-all-jars-in-a-directory-to-classpath-with-java-se-6-using-wildcards/](http://www.rekk.de/bloggy/2008/add-all-jars-in-a-directory-to-classpath-with-java-se-6-using-wildcards/)

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2008-10-20T19:55:27.053

如果您确实需要动态指定所有 .jar 文件，您可以使用 shell 脚本或[Apache Ant](http://ant.apache.org/)。有一个名为[Commons Launcher](http://commons.apache.org/launcher/)的公共项目，它基本上可以让您将启动脚本指定为 ant 构建文件（如果您明白我的意思）。

然后，您可以指定如下内容：

```
<path id="base.class.path">
    <pathelement path="${resources.dir}"/>
    <fileset dir="${extensions.dir}" includes="*.jar" />
    <fileset dir="${lib.dir}" includes="*.jar"/>
</path> 
```

在您的启动构建文件中，它将使用正确的类路径启动您的应用程序。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2014-12-12T01:33:30.523

敬启者，

我在 MSYS/MinGW shell 下的 Windows 上发现了这种奇怪的行为。

**作品：**

```
$ javac -cp '.;c:\Programs\COMSOL44\plugins\*' Reclaim.java 
```

**不起作用：**

```
$ javac -cp 'c:\Programs\COMSOL44\plugins\*' Reclaim.java
javac: invalid flag: c:\Programs\COMSOL44\plugins\com.comsol.aco_1.0.0.jar
Usage: javac <options> <source files>
use -help for a list of possible options 
```

我很确定通配符不会被shell扩展，因为例如

```
$ echo './*'
./* 
```

（也尝试了另一个程序，而不是内置的`echo`，结果相同。）

我相信它`javac`正在尝试扩展它，并且无论参数中是否有分号，它的行为都会有所不同。首先，它可能试图扩展所有看起来像路径的参数。只有这样它才会解析它们，`-cp`只使用以下标记。（请注意，这`com.comsol.aco_1.0.0.jar`是该目录中的第二个 JAR。）这都是猜测。

这是

```
$ javac -version
javac 1.7.0 
```

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2013-09-13T19:38:05.197

请注意，Windows 上 Java 7 的通配符扩展被破坏。

查看[这个 StackOverflow 问题](https://stackoverflow.com/questions/9195073/broken-wildcard-expansion-for-java7-commandline-on-windows7)以获取更多信息。

解决方法是在通配符之后放置一个分号。`java -cp "somewhere/*;"`

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2011-11-21T03:54:39.340

如果您在 Eclipse 或 Netbeans 等任何 IDE 之外开发和运行 Java 应用程序，上述所有解决方案都非常有效。

如果您在 Windows 7 上并使用 Eclipse IDE 进行 Java 开发，那么在使用命令提示符运行 Eclipse 中构建的类文件时可能会遇到问题。

例如，您在 Eclipse 中的源代码具有以下包层次结构：edu.sjsu.myapp.Main.java

您将 json.jar 作为 Main.java 的外部依赖项

当您尝试从 Eclipse 中运行 Main.java 时，它将毫无问题地运行。

但是，当您在 Eclipse 中编译 Main.java 后尝试使用命令提示符运行它时，它会发出一些奇怪的错误，说“ClassNotDef Error blah blah”。

**我假设您在源代码的工作目录中！**

使用以下语法从命令提示符运行它：

1.  > javac -cp **".;json.jar"** Main.java

2.  > java -cp **".;json.jar"** edu.sjsu.myapp.Main

    [不要错过。以上]

这是因为您已将 Main.java 放在包 edu.sjsu.myapp 中，而 java.exe 将查找确切的模式。

希望能帮助到你 ！！

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2009-12-25T02:08:59.927

对于 windows 报价是必需的，并且 ; 应该用作分隔符。例如：

```
java -cp "target\\*;target\\dependency\\*" my.package.Main 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-06-29T07:48:55.957

短格式：如果你的 main 在一个 jar 中，你可能需要一个额外的 '-jar pathTo/yourJar/YourJarsName.jar '明确声明让它工作（即使 'YourJarsName.jar' 在类路径上）（或，表示回答 5 年前提出的原始问题：您不需要明确地重新声明每个 jar，但似乎，即使使用 java6，您也需要重新声明自己的 jar ...)

* * *

长格式：（我已经明确表示我希望即使是 Java 的闯入者也可以使用它）

像这里的许多人一样，我使用 eclipse 来导出 jar：（文件->导出->'可运行的 JAR 文件'）。'库处理' eclipse (Juno) 提供了三个选项：

```
opt1: "Extract required libraries into generated JAR"
opt2: "Package required libraries into generated JAR"
opt3: "Copy required libraries into a sub-folder next to the generated JAR" 
```

通常我会使用 opt2（并且 opt1 肯定会破坏），但是我正在使用的其中一个 jar 中的本机代码发现在您选择该选项时 eclipse 会利用方便的“jarinjar”技巧破坏。即使在意识到我需要 opt3，然后找到这个 StackOverflow 条目之后，我仍然花了一些时间来弄清楚如何在 eclipse 之外启动我的 main，所以这对我有用，因为它对其他人有用......

* * *

如果您将 jar 命名为：“fooBarTheJarFile.jar”并且所有设置为导出到目录：“/theFully/qualifiedPath/toYourChosenDir”。

（意味着“导出目的地”字段将显示为：“/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile.jar”）

完成后，您会发现 eclipse 然后将所有库放入该导出目录中名为“fooBarTheJarFile_lib”的文件夹中，为您提供如下内容：

```
/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile.jar
/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/SomeOtherJar01.jar
/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/SomeOtherJar02.jar
/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/SomeOtherJar03.jar
/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/SomeOtherJar04.jar 
```

* * *

然后，您可以从系统上的任何位置启动：

```
java -classpath "/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/*" -jar  /theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile.jar   package.path_to.the_class_with.your_main.TheClassWithYourMain 
```

（对于 Java 新手：'package.path_to.the_class_with.your_main' 是声明的包路径，您可以在包含 'main(String[] args){.. .}' 你希望从外部 java 运行）

* * *

需要注意的缺陷是：在声明的类路径中的 jar 列表中包含“fooBarTheJarFile.jar”是不够的。您需要显式声明“-jar”，并重新声明该 jar 的位置。

例如，这打破了：

```
 java -classpath "/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile.jar;/theFully/qualifiedPath/toYourChosenDir/fooBarTheJarFile_lib/*"  somepackages.inside.yourJar.leadingToTheMain.TheClassWithYourMain 
```

用相对路径重述：

```
cd /theFully/qualifiedPath/toYourChosenDir/;
BREAKS:  java -cp "fooBarTheJarFile_lib/*"                                package.path_to.the_class_with.your_main.TheClassWithYourMain    
BREAKS:  java -cp ".;fooBarTheJarFile_lib/*"                              package.path_to.the_class_with.your_main.TheClassWithYourMain   
BREAKS:  java -cp ".;fooBarTheJarFile_lib/*"   -jar                       package.path_to.the_class_with.your_main.TheClassWithYourMain   
WORKS:   java -cp ".;fooBarTheJarFile_lib/*"   -jar  fooBarTheJarFile.jar package.path_to.the_class_with.your_main.TheClassWithYourMain 
```

（使用 java 版本“1.6.0_27”；通过 ubuntu 12.04 上的 OpenJDK 64 位服务器 VM）

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2019-11-09T22:36:03.370

# macOS，当前文件夹

对于[macOS Mojave](https://en.wikipedia.org/wiki/MacOS_Mojave)上的 Java 13 ...</p>

如果您的所有`.jar`文件都在同一个文件夹中，请使用该文件夹[`cd`](https://en.wikipedia.org/wiki/Cd_(command))作为您[当前的工作目录](https://en.wikipedia.org/wiki/Working_directory)。用 验证[`pwd`](https://en.wikipedia.org/wiki/Pwd)。

为此，`-classpath`您必须首先列出您的应用程序的[JAR 文件](https://en.wikipedia.org/wiki/JAR_(file_format))。使用冒号`:`作为分隔符，附加一个星号`*`以获取同一文件夹中的所有其他 JAR 文件。[`main`最后，用你的方法](https://en.wikipedia.org/wiki/Entry_point#Java)传递类的完整包名。

例如，对于 JAR 文件中的应用程序，该应用程序在名为的包中命名为类中`my_app.jar`的方法，以及同一文件夹中的一些所需 jar：`main``App``com.example`

```
java -classpath my_app.jar:* com.example.App 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-04-29T06:55:56.983

来自 wepapp 的类：

```
 > mvn clean install

  > java -cp "webapp/target/webapp-1.17.0-SNAPSHOT/WEB-INF/lib/tool-jar-1.17.0-SNAPSHOT.jar;webapp/target/webapp-1.17.0-SNAPSHOT/WEB-INF/lib/*" com.xx.xx.util.EncryptorUtils param1 param2 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-12-05T19:07:28.797

我知道如何做的唯一方法是单独做，例如：

```
setenv CLASSPATH /User/username/newfolder/jarfile.jar:jarfile2.jar:jarfile3.jar:. 
```

希望有帮助！

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2008-10-20T19:36:03.050

您需要单独添加它们。或者，如果您*真的*只需要指定一个目录，您可以将所有内容解压缩到一个目录中并将其添加到您的类路径中。但是，我不推荐这种方法，因为您可能会在类路径版本控制和不可管理性方面出现奇怪的问题。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-10-20T19:37:49.927

将 jar 文件视为目录结构的根。是的，您需要单独添加它们。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-06-27T12:05:44.183

不是能够将 /* 设置为 -cp 的直接解决方案，但我希望您可以使用以下脚本来缓解动态类路径和 lib 目录的情况。

```
 libDir2Scan4jars="../test";cp=""; for j in `ls ${libDir2Scan4jars}/*.jar`; do if [ "$j" != "" ]; then cp=$cp:$j; fi; done; echo $cp| cut -c2-${#cp} > .tmpCP.tmp; export tmpCLASSPATH=`cat .tmpCP.tmp`; if [ "$tmpCLASSPATH" != "" ]; then echo .; echo "classpath set, you can now use  ~>         java -cp \$tmpCLASSPATH"; echo .; else echo .; echo "Error please check libDir2Scan4jars path"; echo .; fi; 
```

为 Linux 编写脚本，也可以为 Windows 编写类似的脚本。如果提供了正确的目录作为“libDir2Scan4jars”的输入；该脚本将扫描所有 jar 并创建一个类路径字符串并将其导出到环境变量“tmpCLASSPATH”。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-03-14T02:46:58.893

我在一个文件夹中有多个罐子。下面的命令对我`JDK1.8`有用，包括文件夹中存在的所有 jar。请注意，如果您在类路径中有空格，请包含在引号中

**视窗**

编译：`javac -classpath "C:\My Jars\sdk\lib\*" c:\programs\MyProgram.java`

跑步：`java -classpath "C:\My Jars\sdk\lib\*;c:\programs" MyProgram`

**Linux**

编译：`javac -classpath "/home/guestuser/My Jars/sdk/lib/*" MyProgram.java`

跑步：`java -classpath "/home/guestuser/My Jars/sdk/lib/*:/home/guestuser/programs" MyProgram`

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-06-30T17:46:41.127

以适合多个 jar 和当前目录的类文件的方式设置类路径。

```
CLASSPATH=${ORACLE_HOME}/jdbc/lib/ojdbc6.jar:${ORACLE_HOME}/jdbc/lib/ojdbc14.jar:${ORACLE_HOME}/jdbc/lib/nls_charset12.jar; 
CLASSPATH=$CLASSPATH:/export/home/gs806e/tops/jconn2.jar:.;
export CLASSPATH 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-01-27T20:00:07.117

命令的参数顺序`java`也很重要：

```
c:\projects\CloudMirror>java Javaside -cp "jna-5.6.0.jar;.\"
Error: Unable to initialize main class Javaside
Caused by: java.lang.NoClassDefFoundError: com/sun/jna/Callback 
```

相对

```
c:\projects\CloudMirror>java -cp "jna-5.6.0.jar;.\" Javaside
Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable 
```

# .net-3.5 - 本地化 IEnumerable 的最佳方法是什么？

> ID：219590
> 
> 赞同：3
> 
> 时间：2008-10-20T19:34:34.973
> 
> 标签：.net-3.5, collections, c#-3.0, ienumerable, localization

本地化集合（IEnumerable）的最佳方法是什么？从 BL 我检索仍然需要本地化的实体集合，我想我编写了一个扩展 IEnumerable 并返回本地化列表的方法。

我怎样才能让下面的代码工作？有任何想法吗？也许更好的选择？

```
public static IEnumerable Localize(this IEnumerable items, CultureInfo cultureInfo)
{
    foreach(string item in items)
    {
        /*Error underneath, cannot assign to item*/
        item = ResourceHelper.GetString(item, cultureInfo);
    }
    return (items);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:39:39.207

你有没有尝试过你[产生](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)物品的地方？

```
public static IEnumerable<string> Localize(this IEnumerable<string> items, CultureInfo culture)
{
    foreach (string item in items)
    {
        yield return ResourceHelper.GetString(item,culture);
    }
} 
```

这不会更改您正在枚举的集合中的任何其他项目，但它会返回您想要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T20:13:48.840

简单的改变让它返回一个新的可枚举的本地化值集合：

```
public static IEnumerable<string> Localize(this IEnumerable<string> items, CultureInfo cultureInfo)
{
    List<string> newItems = new List<string>();
    foreach(string item in items)
    {
       newItems.Add( ResourceHelper.GetString(item, cultureInfo) );
    }
    return newItems;
} 
```

# c# - .NET - 实现“捕获所有异常处理程序”的最佳方法是什么

> ID：219594
> 
> 赞同：76
> 
> 时间：2008-10-20T19:35:54.673
> 
> 标签：c#, .net, exception, exception-handling

我想知道最好的方法是“如果所有其他方法都失败了”。

我的意思是，你在你的应用程序中处理尽可能多的异常，但仍然会有错误，所以我需要有一些东西来捕获所有未处理的异常，这样我就可以收集信息并将它们存储在数据库中或提交它们到网络服务。

AppDomain.CurrentDomain.UnhandledException 事件是否捕获所有内容？即使应用程序是多线程的？

旁注：Windows Vista 公开了本机 API 函数，允许任何应用程序在崩溃后自行恢复......现在想不出这个名字......但我宁愿不使用它，因为我们的许多用户仍在使用视窗XP。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-06-28T22:43:29.163

我刚刚玩过 AppDomain 的 UnhandledException 行为，（这是注册未处理异常的最后阶段）

是的，在处理完事件处理程序后，您的应用程序将被终止，并显示令人讨厌的“...程序停止工作对话框”。

:) 你*仍然*可以避免这种情况。

查看：

```
class Program
{
    void Run()
    {
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

        Console.WriteLine("Press enter to exit.");

        do
        {
            (new Thread(delegate()
            {
                throw new ArgumentException("ha-ha");
            })).Start();

        } while (Console.ReadLine().Trim().ToLowerInvariant() == "x");

        Console.WriteLine("last good-bye");
    }

    int r = 0;

    void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Interlocked.Increment(ref r);
        Console.WriteLine("handled. {0}", r);
        Console.WriteLine("Terminating " + e.IsTerminating.ToString());

        Thread.CurrentThread.IsBackground = true;
        Thread.CurrentThread.Name = "Dead thread";            

        while (true)
            Thread.Sleep(TimeSpan.FromHours(1));
        //Process.GetCurrentProcess().Kill();
    }

    static void Main(string[] args)
    {
        Console.WriteLine("...");
        (new Program()).Run();
    }
} 
```

**PS**在更高级别处理未处理的 Application.ThreadException (WinForms) 或 DispatcherUnhandledException (WPF)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-10-20T19:39:07.303

在 ASP.NET 中，您使用文件`Application_Error`中的函数`Global.asax`。

在 WinForms 中，您使用文件`MyApplication_UnhandledException`中的`ApplicationEvents`

如果代码中发生未处理的异常，则调用这两个函数。您可以记录异常并通过这些功能向用户显示一条好消息。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-10-20T19:48:48.813

对于 Winform 应用程序，除了 AppDomain.CurrentDomain.UnhandledException，我还使用[Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)和[Application.SetUnhandledExceptionMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.setunhandledexceptionmode.aspx)（w/UnhandledExceptionMode.CatchException）。这种组合似乎抓住了一切。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-20T20:06:59.167

在主线程上，您有以下选项：

*   控制台或服务应用程序：[`AppDomain.CurrentDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)
*   WinForms 应用程序：[`Application.ThreadException`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)
*   网络应用程序：Global.asax 的`Application_Error`

对于其他线程：

*   辅助线程没有未处理的异常；使用[安全线程](http://www.codeproject.com/KB/threads/SafeThread.aspx)
*   工作线程：（定时器，线程池）根本没有安全网！

请记住，这些事件不*处理*异常，它们只是将它们*报告*给应用程序——通常是在对它们做任何有用/理智的事情时为时已晚

记录异常很好，但监控应用程序更好;-)

警告：我是[SafeThread](http://www.codeproject.com/KB/threads/SafeThread.aspx)文章的作者。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-20T19:47:47.987

对于 WinForms，也不要忘记附加到当前线程的未处理异常事件（尤其是在使用多线程时）。

关于最佳实践的一些链接[here](http://msdn.microsoft.com/en-us/library/seyhszts.aspx)和[here](http://dturini.blogspot.com/2005/02/exception-handling-best-practices-in.html)以及[here（可能是.net的最佳异常处理文章）](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T21:08:04.503

还有一个很酷的东西叫做[ELMAH](http://code.google.com/p/elmah/)，它可以记录 Web 应用程序中发生的任何 ASP.NET 错误。我知道您在询问 Winform App 解决方案，但我觉得这可能对任何需要在 Web 应用程序上使用此类东西的人有益。我们在我工作的地方使用它，它对调试非常有帮助（尤其是在生产服务器上！）

这是它具有的一些功能（直接从页面上拉下来）：

> *   记录几乎所有未处理的异常。
> *   用于远程查看重新编码异常的整个日志的网页。
> *   用于远程查看任何记录的异常的完整详细信息的网页。
> *   在许多情况下，即使关闭了 customErrors 模式，您也可以查看 ASP.NET 为给定异常生成的原始黄屏死机。
> *   每个错误发生时的电子邮件通知。
> *   来自日志的最后 15 个错误的 RSS 提要。
> *   日志的许多后备存储实现，包括内存中、Microsoft SQL Server 和社区贡献的几个。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-20T21:51:41.107

即使在多线程应用程序中，您也可以在该处理程序中监视大多数异常，但 .NET（从 2.0 开始）不允许您取消未处理的异常，除非您启用 1.1 兼容模式。发生这种情况时，无论如何都会关闭 AppDomain。您可以做的最好的事情是在不同的 AppDomain 中启动应用程序，以便您可以处理此异常并创建一个新的 AppDomain 来重新启动应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T08:47:00.300

我正在使用以下方法，该方法有效并大大减少了代码量（但我不确定是否有更好的方法或它的陷阱可能是什么。每当你打电话时：我怀疑给出减号的人会很有礼貌足以澄清他们的行为；）

```
try 
{
    CallTheCodeThatMightThrowException()
 }
catch (Exception ex)
{
    System.Diagnostics.StackTrace st = new System.Diagnostics.StackTrace ();
    Utils.ErrorHandler.Trap ( ref objUser, st, ex );
} //eof catch 
```

这里是 ErrorHandler 代码：为了清楚起见 - objUser - 是建模 appusers 的对象（您可能会获得诸如域名、部门、​​区域等信息以用于日志记录目的 ILog logger - 是日志记录对象 - 例如执行日志记录活动 StackTrace st - StackTrace 对象为您提供应用程序的调试信息

```
using System;
using log4net; //or another logging platform

namespace GenApp.Utils
{
  public class ErrorHandler
  {
    public static void Trap ( Bo.User objUser, ILog logger, System.Diagnostics.StackTrace st, Exception ex )
    {
      if (ex is NullReferenceException)
      { 
      //do stuff for this ex type
      } //eof if

      if (ex is System.InvalidOperationException) 
      {
        //do stuff for this ex type
      } //eof if

      if (ex is System.IndexOutOfRangeException) 
      {
        //do stuff for this ex type
      } //eof if

      if (ex is System.Data.SqlClient.SqlException)
      {
        //do stuff for this ex type
      } //eof if

      if (ex is System.FormatException)
      {
        //do stuff for this ex type
      } //eof if

      if (ex is Exception)
      {
        //do stuff for this ex type
      } //eof catch

    } //eof method 

  }//eof class 
} //eof namesp 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-26T23:01:12.383

在托管的 GUI 应用程序中，默认情况下，源自 GUI 线程的异常由分配给 Application.ThreadException 的任何内容处理。

源自其他线程的异常由 AppDomain.CurrentDomain.UnhandledException 处理。

如果您希望您的 GUI 线程异常像您的非 GUI 线程一样工作，以便它们由 AppDomain.CurrentDomain.UnhandledException 处理，您可以这样做：

```
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException); 
```

使用 ThreadException 捕获 GUI 线程异常的一个优点是您可以为使用提供让应用程序继续运行的选项。要确保没有配置文件覆盖默认行为，您可以调用：

```
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException); 
```

您仍然容易受到行为不良的本机 dll 异常的影响。如果本机 dll 使用 Win32 SetUnhandledExceptionFilter 安装自己的处理程序，它应该保存指向前一个过滤器的指针并也调用它。如果它不这样做，您的处理程序将不会被调用。

# multithreading - 如何编写一个 MSTest 单元测试来侦听从另一个线程引发的事件？

> ID：219598
> 
> 赞同：0
> 
> 时间：2008-10-20T19:37:09.523
> 
> 标签：multithreading, unit-testing, mstest

我正在编写一个期望从它正在调用的对象接收事件的测试。具体来说，我正在调用一个通过 SSH（使用开源 Granados 项目）连接到 AIX 机器的对象，然后断开连接，并且我想确保收到在断开连接期间引发的 OnConnectionClosed 事件。这听起来很简单，过去我写过很多这样的测试，但是这次发生了一些我认为与线程有关的奇怪行为。

基本上，我调用的对象是在与我调用它的线程不同的线程上引发“OnConnectionClosed”事件。我看到的是，当我通过从 UI 中选择“调试测试”来运行测试时，它通过了，但是如果我选择“运行测试”，它就会失败（即使在调试运行期间没有设置断点）。我做了一些谷歌搜索，发现[这篇文章](http://plainoldstan.blogspot.com/2008/09/run-unit-test-on-mta-thread-vsts-test.html)似乎表明默认情况下 MSTest 主机以单线程模式运行，但配置更改可以使其以多线程模式运行。这听起来像是从逻辑上解决了我的问题，但当然，它没有。

我遇到的其他一些帖子也让我认为 MSTest 根本没有监视后台线程（因此它们引发的事件没有被“听到”）。这也是有道理的，因为它似乎在调试模式下工作，而且上面的修复似乎应该在逻辑上解决这个问题，那么我对它为什么不起作用感到困惑。我可能只是没有正确处理线程，尽管如果是这种情况，我希望在调试模式下这仍然是一个问题。

有没有其他人试图以类似的方式测试一些东西？如果是这样，您是否遇到过类似的问题？如果是这样，你是如何解决它们的？

我在下面粘贴了相关的单元测试代码（出于安全原因，我删除了连接信息）。

```
[TestClass]
public class SSHReaderTests
{
    private bool received = false;
    private delegate bool SimpleFunc();

    [TestInitialize]
    public void MyTestInitialize()
    {
        received = false;
    }

    [TestMethod]
    public void Should_raise_OnReaderConnectionClosed_event_after_successful_connection_is_disconnected()
    {
        IReader reader = new SSHReader();

        reader.OnReaderConnectionClosed += delegate
                                     {
                                         received = true;
                                     };

        reader.Connect("*****", "*****", "*****");

        //Assert.IsTrue(reader.IsConnected);

        reader.Disconnect();

        //Assert.IsFalse(reader.IsConnected);

        Assert.IsTrue(WaitUntilTrue(delegate {
            return received; }, 30000, 1000));
    }

    private static bool WaitUntilTrue(SimpleFunc func, int timeoutInMillis, int timeBetweenChecksInMillis)
    {
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();

        while(stopwatch.ElapsedMilliseconds < timeoutInMillis)
        {
            if (func())
                return true;

            Thread.Sleep(timeBetweenChecksInMillis);
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T21:09:18.603

使用 System.Threading 命名空间中的 WaitHandle 类。AutoResetEvent 或 ManualResetEvent。两者的区别在于 AutoResetEvent 每次设置时让一个线程继续执行，而 ManualResetEvent 则在设置时释放所有等待线程。

您的示例不起作用的原因与编译器优化有关。代码实际上并没有按照您乍一看的想法进行编译。最有可能的是，编译器会做一些事情，比如将局部变量放在寄存器中，并且在检查循环期间从不实际获取它。您可以使用 volatile 关键字来避免这种类型的事情，但我强烈建议您阅读有关线程和并发的更多详细信息。Joe Duffy 的博客[http://www.bluebytesoftware.com](http://www.bluebytesoftware.com)是一个很好的入门资源，我强烈推荐他即将出版的《Windows 上的并发编程》一书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T21:46:18.653

[不完全是您所问的，但您可以通过查看名为CHESS](http://research.microsoft.com/projects/CHESS)的 MS 研究项目找到一些可行的解决方案或至少想法。它用于 .net 中的多线程并发测试。

# c# - 将段落转换为十六进制符号，然后返回字符串

> ID：219604
> 
> 赞同：0
> 
> 时间：2008-10-20T19:38:01.907
> 
> 标签：c#, hex

您如何将段落转换为十六进制表示法，然后再转换回其原始字符串形式？

（C＃）

附注：将字符串放入十六进制格式是否会在不使用硬核收缩算法的情况下最大程度地收缩它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T19:41:51.573

“十六进制表示法”到底是什么意思？这通常是指编码二进制数据，而不是文本。您需要以某种方式对文本进行编码（例如使用 UTF-8），然后通过将每个字节转换为一对字符将二进制数据编码为文本。

```
using System;
using System.Text;

public class Hex
{
    static void Main()
    {
        string original = "The quick brown fox jumps over the lazy dog.";

        byte[] binary = Encoding.UTF8.GetBytes(original);
        string hex = BytesToHex(binary);
        Console.WriteLine("Hex: {0}", hex);
        byte[] backToBinary = HexToBytes(hex);

        string restored = Encoding.UTF8.GetString(backToBinary);
        Console.WriteLine("Restored: {0}", restored);
    }

    private static readonly char[] HexChars = "0123456789ABCDEF".ToCharArray();

    public static string BytesToHex(byte[] data)
    {
        StringBuilder builder = new StringBuilder(data.Length*2);
        foreach(byte b in data)
        {
            builder.Append(HexChars[b >> 4]);
            builder.Append(HexChars[b & 0xf]);
        }
        return builder.ToString();
    }

    public static byte[] HexToBytes(string text)
    {
        if ((text.Length & 1) != 0)
        {
            throw new ArgumentException("Invalid hex: odd length");
        }
        byte[] ret = new byte[text.Length/2];
        for (int i=0; i < text.Length; i += 2)
        {
            ret[i/2] = (byte)(ParseNybble(text[i]) << 4 | ParseNybble(text[i+1]));
        }
        return ret;
    }

    private static int ParseNybble(char c)
    {
        if (c >= '0' && c <= '9')
        {
            return c-'0';
        }
        if (c >= 'A' && c <= 'F')
        {
            return c-'A'+10;
        }
        if (c >= 'a' && c <= 'f')
        {
            return c-'A'+10;
        }
        throw new ArgumentOutOfRangeException("Invalid hex digit: " + c);
    }
} 
```

不，这样做根本不会缩小它。恰恰相反——你最终会得到更多的文字！但是，您可以压缩二进制形式。在将任意二进制数据表示为文本方面，Base64 比普通十六进制更有效。使用[Convert.ToBase64String](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)和[Convert.FromBase64String](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T19:41:37.517

```
public string ConvertToHex(string asciiString)
{
    string hex = "";
    foreach (char c in asciiString)
    {
        int tmp = c;
        hex += String.Format("{0:x2}", (uint)System.Convert.ToUInt32(tmp.ToString()));
    }
    return hex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:47:17.287

虽然我对 C# 实现帮不上忙，但我强烈推荐[LZW](http://en.wikipedia.org/wiki/Lzw)作为一种易于实现的数据压缩算法供您使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-21T20:45:17.280

如果我们问：你真正想做什么？也许可以更快地得到答案。将普通字符串转换为十六进制表示的字符串似乎是错误的方法，除非您正在为网络制作十六进制/编码教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-30T18:17:52.210

```
static byte[] HexToBinary(string s) {
  byte[] b = new byte[s.Length / 2];
  for (int i = 0; i < b.Length; i++)
    b[i] = Convert.ToByte(s.Substring(i * 2, 2), 16);
  return b;
}
static string BinaryToHex(byte[] b) {
  StringBuilder sb = new StringBuilder(b.Length * 2);
  for (int i = 0; i < b.Length; i++)
    sb.Append(Convert.ToString(256 + b[i], 16).Substring(1, 2));
  return sb.ToString();
} 
```

# c# - 扩展无构造函数类

> ID：219618
> 
> 赞同：4
> 
> 时间：2008-10-20T19:41:33.960
> 
> 标签：c#, .net, silverlight, oop

在 C# 中，是否可以扩展没有构造函数的类？

也许我想错了，只需要踢胯部。我有一个扩展 System.Windows.Media.Transform 的 Silverlight 类，随着 Silverlight 2 的正式发布，Transform 现在没有构造函数。因此，当我编译我的类时，我收到一条错误消息，指出“类型 '...Transform' 没有定义构造函数。”

是否仍然可以以有用的方式扩展此类？如果没有，我会画很多悲伤的脸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-20T19:51:39.057

Transform 的唯一构造函数是内部的，因此您不能自己从中派生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T19:56:05.630

隐藏所有公共构造函数是一种用于防止子类化并强制开发人员按预期使用类的技术。可能是实现者希望您在扩展时使用适配器或外观甚至代理。

构造函数中可能存在重要的生命周期细节，需要按照原始实现者的意图使用，或者可能是开发人员的疏忽。

我见过尝试转换为工厂模式的尝试，这是以防止子类化的方式完成的。即没有可用于子类的受保护构造函数。有时，高级对象模式会削弱语言的内置功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T19:57:31.790

某些类不可能没有构造函数。每个班级至少有一个 AFAIK。如果您不编写它，C# 编译器将为您插入一个默认（无参数）构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T20:12:27.157

只要它没有密封，你应该可以扩展它。

# cocoa - 来自 NSEvent/CGEvent 的设备信息

> ID：219623
> 
> 赞同：1
> 
> 时间：2008-10-20T19:42:23.537
> 
> 标签：cocoa, nsevent

我的应用程序使用事件点击来捕获键盘事件，我想知道每个事件来自哪个设备（即哪个键盘）。是否有一种设备识别信息以及点击获得的 CGEvent ？我查看了 NSEvent 的方法和各种 CGEventField 键，但它们似乎都不是设备唯一的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-21T22:25:08.840

您可能想看看 DDHidLib，这是 Dave Dribin 的优秀框架，可独立使用 USB HID 设备。

[http://www.dribin.org/dave/blog/archives/2007/03/19/ddhidlib_10](http://www.dribin.org/dave/blog/archives/2007/03/19/ddhidlib_10/)

（不仅仅是关于操纵杆，所以请阅读该博客文章的第一段以外的内容）

DDHidLib 的某些功能在 Leopard 下不再适用，因为 Apple 对捕获 HID 设备存在一些安全问题，但如果幸运的话，它可能会为您提供所需的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-23T01:12:06.770

DDHidLib 很简洁，事实上我为 Delicious Library 2 为 Leopard 的较新的 HID API 重写了部分内容，并将更改提交给原作者——如果你写他，你可以获得 Leopard 专用的示例代码。

不幸的是，新的 Leopard HID API 能够在键盘事件经过时达到峰值，但不能拦截它们，因此您无法构建自己的应用程序级设备处理程序，除非按键事件也可以发生AppKit 也是如此。（这就是为什么当你在 Delicious Library 2 中使用 USB 条码扫描仪时会出现 BONKING 噪音的原因 - 我在扫描仪上达到峰值并读取条码，但随后打字仍然发送到最上面的窗口，它不需要它，并且哔哔声很多。叹息。）

-会

# java - 封装 Java 首选项 API

> ID：219628
> 
> 赞同：6
> 
> 时间：2008-10-20T19:43:47.763
> 
> 标签：java, encapsulation, preferences

我曾经为我的应用程序有一个自定义首选项类。对于我的下一个爱好项目，我想切换到 Preferences API。但是 put 和 get 函数需要一个默认值，我不想在源文件中传播默认值。即使我的项目很小，我也无法想象在整个源代码中更改默认值。各位大佬是怎么用api的？我正在考虑将首选项 api 包装在另一个类中，但是使用 API 有什么意义，因为它只减轻了将文件保存到磁盘的负担，而使用序列化并不难？我错过了重点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:50:25.563

您在这里混合了一些概念。代码中给出的默认值应该针对当地情况作为“合理的默认值”。如果您想拥有应用程序范围的默认值，那么您需要一个首选项提供程序，它允许您挂钩默认首选项和覆盖的用户首选项。本身可能是一个有价值的项目。

哦，“合理的默认值”是在不需要时避免配置的好方法，但允许用户或打包者在需要时提供更好的值。

@comment，我想我明白了。

我所说的“本地情况”是指在代码的上下文中。对于您的 GUI，您需要一个表示线程正在使用的内容的 display 值。因此，我会使用 Worker.DEFAULT_TIMEOUT 之类的东西。您的工作人员将在内部使用与默认值相同的值。这样，当您设置工作人员的行为时，您就可以检索配置的值或工作人员的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-12-08T10:35:31.033

那么您可能希望通过实施`AbstractPreferences`. 你可以在这里看到一个基于 linux 的实现：

[http://www.docjar.com/html/api/java/util/prefs/FilePreferencesImpl.java.html](http://www.docjar.com/html/api/java/util/prefs/FilePreferencesImpl.java.html)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T19:49:53.757

将所有默认值都放在一个类中以防止它们乱扔代码会很难吗？

我在最近的项目中使用了[公共配置。](http://commons.apache.org/configuration/)我研究过 Java Preferences API，但我喜欢 Commons 项目的灵活性。而且您不必指定默认值！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-17T23:22:06.187

您可以将默认值放在您捆绑在 .jar 文件中的 .preferences 文件中（或放在带有常量的专用类或接口中）。

我将它用于诸如窗口位置/大小、记住用于选择文件的默认文件夹、上次打开的文件和诸如此类的琐事之类的事情。我可以想到一些您使用首选项 API “免费”获得的有趣的东西：

*   以操作系统推荐的方式做事；操作系统可能不允许您在应用程序文件夹中写入“设置文件”，并且用户不喜欢被询问他们要将设置保存在磁盘上的哪个位置，并且您不希望为每个平台实现自定义逻辑
*   您的数据分别为每个操作系统用户保存
*   即使您的应用程序被卸载（或在升级期间），也能保留用户数据的一种方法
*   不需要数据库或访问文件系统

另外，我不喜欢序列化，也不推荐这样做。序列化意味着在新版本的应用程序中更改类时必须小心。

# windows - Windows .bat 文件中的意外变量替换行为

> ID：219637
> 
> 赞同：0
> 
> 时间：2008-10-20T19:47:37.660
> 
> 标签：windows, batch-file, cmd

代码是，

```
set VAR=before

if "%VAR%" == "before" (

  set VAR=after;

  echo %VAR%

) 
```

前面的 Windows .bat 文件代码段会显示什么？为什么？（即为什么它的行为不像你最初想象的那样）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T19:53:59.037

显然，你会认为输出会是“之后”，因为我们在循环中重置了 env 变量。

但输出实际上是“之前”。原因是解释器在读取命令时而不是在执行命令时在 .bat 文件中完成变量替换。因此，对于复合语句，在第一次遇到 if 语句时计算主体中的变量。

您可以通过使用延迟的环境变量扩展来完成这项工作（需要启用它）。如果已启用，您可以执行以下操作：

```
set VAR=before

if "%VAR%" == "before" (

  set VAR=after;

  echo !VAR!

) 
```

您可以在启动 cmd.exe 时使用 /v 选项启用延迟的环境变量扩展。

[背景故事——我们中的许多人仍然使用遗留的 .bat 文件来驱动诸如 make 程序等。显然有更好的脚本工具，但并不总是可以选择使用它们。不久前我遇到了这个问题，最近发现另外两个人在同一件事上拔了头发。因此了解解释器如何进行变量替换很有用]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T19:55:38.470

替换`%VAR%`发生在命令执行之前。尽管有几个命令分布在多行中，但将它们分组在括号中`(...)`会导致 cmd.exe 解析器将整个内容作为单个命令读取。因此，在解释器看来，执行的内容如下所示。

```
set VAR=before

if "before" == "before" (

set VAR=after;

echo before

) 
```

这是使批处理文件处理变得相当痛苦的许多事情之一，试图做的不仅仅是简单的事情。

# iphone - 你能用 Ruby 开发原生 iPhone 应用程序吗？

> ID：219653
> 
> 赞同：49
> 
> 时间：2008-10-20T19:51:14.440
> 
> 标签：iphone, ruby, cocoa-touch, ios

嗨，我正在研究 iPhone 开发，而 Objective-C 不是我的首选语言。据我目前所见，Ruby 不能用于在 iPhone 上与 Cocoa Touch 对话。

所以我的问题是，我错了吗？我可以在 iPhone 上使用 Ruby 开发 Cocoa Touch 应用程序吗？Ruby 在 iPhone 上的未来会是什么样子？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-04T07:25:07.180

现在您可以使用[RubyMotion](http://www.rubymotion.com/)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2008-11-09T00:04:55.220

在 iPhone OS 中，如果您尝试使用 mprotect() 将内存的可写部分标记为可执行，则 mprotect() 将失败。这打破了像 RubyCocoa（可能还有 MacRuby）这样使用 libffi 在运行时创建 Objective-C 方法处理程序的桥梁。我相信这是设计使然，因为并非总是如此。

归根结底，这更多的是平台政治问题，而不是技术问题，但存在解决此问题的技术方法。不是在运行时生成自定义方法处理程序，而是预编译一个根据需要分配的可重新配置的处理程序池，基本上使桥接过程完全由数据驱动。据我所知，这还没有在 RubyCocoa 或 MacRuby 中完成。

另一个需要考虑的重要事情是编译的 Ruby 和 RubyCocoa 运行时可能比编译的 Objective-C 应用程序大得多。如果这些库可以在 iPhone 上使用，这将不是问题，但就目前而言，即使您有 RubyCocoa 工作，您也可能不想将它用于您分发的应用程序。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-10-20T19:54:08.507

不，你是对的。目前，很可能在可预见的未来，Ruby 不会成为一种选择，至少对于 AppStore 应用程序来说是这样。您没有理由不能在越狱手机上执行此操作，但 Apple 非常适合用于官方开发的 Objective C。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-10-21T09:06:29.077

作为一名了解多种不同语言的程序员，你会做得更好——将 Objective-C 视为一个很好的学习机会。

我发现你用其他语言学习的东西通常会让你成为一个更好的程序员，并让你对你已经知道的其他语言有新的见解。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-01-24T00:24:15.870

[rhomobile](http://rhomobile.com/)是在 iPhone 上运行 ruby​​ 代码的一个选项，但它本质上是 Web 应用程序开发。Web 服务器在 iPhone 上本地运行，您的 ruby​​ 代码呈现为标准客户端 Web 技术 (html/css/javascript)。

[http://rhomobile.com/](http://rhomobile.com/)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-10-20T20:11:25.397

其实，红宝石可可桥一点也不尴尬；事情工作得非常顺利，一直到连接 IB 中的插座等。生成的代码非常漂亮。

至于 iPhone 开发，如果你想要一个官方的 AppStore 应用程序，那么你很不幸。Apple 规定 iPhone 是 Obj-C/Cocoa Touch，并且 SDK 许可证中有一个条款说他们*将*拒绝应用程序的其中一个原因是拥有语言解释器/JIT 编译器，所以你不能添加 ruby​​ 解释器在您自己的应用程序中。

离题，但有趣的是，这就是为什么用于 iPhone 的 Flash 是 Adob​​e 冒烟的原因。根据 Apple 的许可，即使他们愿意，他们也无法将 swf 播放器加入 AppStore。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-09-15T19:14:13.590

呃，Rhodes (Rhomobile) 确实允许你在 iPhone 和所有其他智能手机上做本地应用程序。是的，我们确实利用通过 WebUIView 控件进行渲染。但我们允许所有设备功能和同步本地数据。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-11-01T03:35:05.733

您可能想看看[shinycocos](http://www.cocos2d-iphone.org/wiki/doku.php/shinycocos:faq)。[它是cocos2d-iphone](http://www.cocos2d-iphone.org/)的子项目，一个用于 iPhone 的 Objective-C 游戏编程框架。

我还没有玩过它，但从[git README](http://github.com/funkaster/shinycocos/blob/master/README.rdoc)我推断它会将 Ruby 1.9.1 捆绑到您的应用程序中。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-07-28T19:10:24.097

我在 3.1.3 越狱的 iPod Touch 1G 上安装了 Cydia 的 ruby​​ 包：

![图片](https://i825.photobucket.com/albums/zz177/dc443/00ac9110.jpg)

似乎工作。

现在至于可可味，我会假设这是一个完全不同的故事。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-01-07T12:58:29.947

看看[http://www.appcelerator.com/products/titanium-mobile/](http://www.appcelerator.com/products/titanium-mobile/) “使用 Web 技术构建的原生 iPhone 和 Android 应用程序”。

听起来不错不是吗？;-)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-07-16T14:11:57.537

不，您不能在 Ruby 中创建 iOS 本机应用程序。Mac 和 iOS 的原生应用程序只有两个选项：-

**Objective C**和**Swift 编程语言**

**教程：-**

[苹果官方Objective C教程](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/ProgrammingWithObjectiveC.pdf)

[苹果官方Swift编程语言教程](https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0)

如果您熟悉 Ruby，并且只想通过 Ruby 创建 iOS 应用程序。[Ruby Motion](http://www.rubymotion.com/)可以成为您的跨平台选项，但它不是免费的。

**跨平台**

*   [RubyMotion](http://www.rubymotion.com/)
*   [Xamarin](http://xamarin.com/)所需的 .net 技能
*   [appcelerator 需要](http://www.appcelerator.com/)HTML、XML、CSS、JS 技能
*   [phonegap 需要](http://phonegap.com/developer/)HTML、XML、CSS、JS 技能

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-20T21:19:52.887

我想它现在不会工作，但我想你最终将能够使用 MacRuby 来构建 iphone 应用程序。苹果为此付出了很多努力

[这是 ADC 文章的链接，该文章描述了如何构建普通的可可应用程序](http://developer.apple.com/mac/articles/scriptingautomation/cocoaappswithmacruby.html)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-24T04:21:13.393

您不必使用 Objective-C 来编写 iPhone 应用程序。如果您使用 QuickConnectiPhone，[http://sourceforge.net/projects/quickconnect/](http://sourceforge.net/projects/quickconnect/)，您可以完全用 JavaScript、CSS 和 HTML 编写它，并且仍然有一个可安装的应用程序而不是 Web 应用程序。

如果您了解 ruby​​，您可能已经在使用 JavaScript。

要了解如何安装、运行它以及其他想法，请访问 tetontech.wordpress.com

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-20T20:06:23.863

您可以尝试使用开源[Ruby-Cocoa 桥接器。](http://rubycocoa.sourceforge.net/HomePage)但我认为 Ruby 和 ObjC 之间存在一些阻抗不匹配，这使得它使用起来有点尴尬。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-28T10:19:37.563

Ruby Cocoa 桥可能不起作用。大多数动态语言的桥都需要生成可执行的 thunk（手动或使用 libffi）。更有限的桥（对于更多静态语言）可能没有这样的问题。

在任何一种情况下，建立一座桥梁可能都需要更加熟悉 Objective C 运行时，而不是仅仅学习如何编写 Cocoa Touch 应用程序，这可能一开始就失去了这样做的意义。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-11-09T20:49:28.830

目前不是真的，Apple 改变他们的政策，看看 ShinyCocos，是 Cocos2D-iphone 游戏框架的 ruby​​ 绑定。

[https://github.com/funkaster/shinycocos](https://github.com/funkaster/shinycocos)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2009-11-13T17:25:53.550

一种可能的解决方案是创建一个应用程序包装，例如包含 ruby​​-vm 的 rice 库（google it）。我认为您将能够创建可以暴露给 ruby​​ 的 c++ 包装器，从而为使用 ruby​​ 进行 iphone 开发创建环境。不过，这可能需要很多工作^^

# sharepoint - SharePoint 和 Log4Net

> ID：219668
> 
> 赞同：10
> 
> 时间：2008-10-20T19:55:38.580
> 
> 标签：sharepoint, logging, moss, log4net

我正在寻找将 log4net 集成到 SharePoint 以进行 Web 请求、功能激活和所有计时器的最佳实践。

我的农场中有几个子项目，我希望只有一个 Log4Net.config 文件。

**[编辑]**
我不仅需要为 Web 应用程序配置 log4net，这很容易做到（我使用 global.asax 和 log4net.config 文件，因此我可以修改日志设置而无需重新加载 webapp），而且我还需要记录异步事件：

*   事件处理程序（如 ItemAdded）
*   计时器作业
*   ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-11-19T23:08:35.087

我最近实现了这一点，并提出了一个对我有用的解决方案。

使用全局范围的解决方案将 log4net 配置文件部署到 12 hive 并将 log4net dll 部署到 GAC。然后在您的应用程序代码中从全局文件的位置显式初始化 log4net。这允许您记录功能接收器、计时器作业和 Web 应用程序代码。

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = 
    @"C:\Program Files\Common Files\Microsoft Shared\" + 
    @"Web Server Extensions\12\CONFIG\log4net.config", Watch = true)] 
```

见这里[http://www.codeproject.com/KB/sharepoint/SharepointLog4Net.aspx](http://www.codeproject.com/KB/sharepoint/SharepointLog4Net.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-21T16:59:57.310

首先，您需要修改 SharePoint 虚拟目录所在的 web.config。这是因为您需要添加 SafeControl 条目以信任 log4net 程序集。您可以使用功能接收器中的 SPWebConfigModification 类以编程方式更新 web.config。由于无论如何您都必须修改 web.config，您可能需要考虑在其中包含您的 log4net 配置，而不是设置外部 log4net 配置。

但是，如果您仍想这样做，则将以下内容添加到 web.config 文件中可能会起作用：

```
<configuration ...>
  ...
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <log4net configSource="log4Net.config">
  ...
</configuration> 
```

log4net.config 文件应该能够与您的 web.config 一起使用。正如 Nat 所说，您可以将此文件部署为解决方案包。

假设您尝试运行最小信任，您将需要更新您的代码访问安全文件以包含 log4net 程序集。然后，您的所有自定义 SharePoint 代码应自动使用您的 log4net 配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T20:06:46.513

您可以将配置文件作为解决方案包的一部分发布到 12 个配置单元（使用[STSDev](http://www.codeplex.com/stsdev)）来创建任何包）。这将为您提供配置的设置位置，并且可以以受控方式发布对它的任何更改（即无需手动编辑，只需回滚并重新安装解决方案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-08T18:03:54.397

我开发了一个 log4net 功能并将其打包在一个 wsp 文件中。当在 http 模块中引发应用程序启动事件时，功能接收器将 httpmodule 添加到 web.config 并且 httpmodule 从布局目录加载 log4net.config。

# c# - 使用 .NET C# 连接到 Interbase 7.1 的最佳方式

> ID：219684
> 
> 赞同：5
> 
> 时间：2008-10-20T19:59:56.420
> 
> 标签：c#, .net, interbase

有人可以解释使用 .NET/C# 连接到 Interbase 7.1 数据库的最佳方法吗？

该应用程序将安装在许多最终用户计算机上，因此我必须与我的应用程序一起打包的“附加组件”越少越好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T20:40:56.103

CodeGear 在此处为 InterBase 的注册用户提供免费的 ADO.NET 2.0 驱动程序：

[http://cc.embarcadero.com/item/25497](http://cc.embarcadero.com/item/25497)

请注意，“InterBase 的注册用户”包括免费的 InterBase 2007 Developers Edition。下载内容说它是 2007 年的，但它与 InterBase 7 配合得很好，CodeGear 的 InterBase 团队告诉我，他们对人们为此目的使用它没有问题。

我不建议使用为 Firebird 设计的驱动程序，因为 InterBase 和 Firebird 的 SQL 语法有些不同，并且在其他功能上也不同。特别是，我认为将任何依赖于 fbclient.dll 的驱动程序与 InterBase 一起使用是完全危险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T20:07:19.070

检查此提供程序：

*   [用于 Visual Studio .Net 的 Interbase 和 Firebird 开发人员](http://www.ibprovider.com/eng/documentation/firebird_adonet/firebird_adonet.html)
*   [Firebird .NET 数据提供者](http://www.firebirdsql.org/index.php?op=files&id=netprovider)
*   [FireBird - InterBase .NET (Mono) 提供商](http://www.mono-project.com/Firebird_Interbase)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T20:36:10.357

我认为 Firebird .net 提供程序与单声道提供程序相同。顺便说一句，两者都很棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T12:26:28.327

帮助文件中的代码适用于许多情况，但不是全部，尤其是在 Windows 8.1、Windows Server 2012 机器上。

确保从 embarcadero 获得最新的 InterBase_ADO.NET。我更新到的版本是 Borland.Data.AdoDbxClient.dll 的 16.0.4327.44959 版本。（右键单击文件、属性、详细信息以查看版本号）。即使我没有使用它，安装也会为 64 位创建一个 x64 版本文件夹。我以 x86 为目标，没有任何问题。

此 ADO.NET 安装不是必须在每台机器上进行 - 您只需在项目中包含以下文件并在您运行的机器上安装 Interbase。我只在我的开发计算机上安装了驱动程序。

安装将提取您需要放入应用程序以连接到数据库的所有必要文件。它还将创建自述文件 ADO_NET 2_0 Driver for InterBase XE Installation and Usage Instructions.htm 文件。**重要提示：**此帮助 htm 文件中的数据库连接示例并非 100% 有效。有关解决方案，请参阅下面的代码示例。

无需 ODBC 连接。要包含在 .NET 项目中并要复制到本地的文件列表是：

*   Borland.Data.AdoDbxClient.dll
*   Borland.Data.DbxCommonDriver.dll
*   Borland.Data.DBXInterBaseDriver.dll
*   Borland.Delphi.dll
*   Borland.VclDbRtl.dll
*   Borland.VclRtl.dll
*   dbxadapter.dll（x86 或 x64 版本）
*   dbxint.dll（x86 或 x64 版本）
*   gds32.dll（来自 interbase DB 安装）
*   interbase.msg（来自 interbase DB 安装）

我发现了两个有效的连接字符串。要连接使用两个连接字符串之一：

```
connectionstring1 = "DriverName=Interbase;Database=" + database + ";User_Name=" + userid + ";Password=" + password;
connectionstring1 = connectionstring1 + ";SQLDialect=3;MetaDataAssemblyLoader=Borland.Data.TDBXInterbaseMetaDataCommandFactory,Borland.Data.DbxReadOnlyMetaData,Version=11.0.5000.0,Culture=neutral,";
connectionstring1 = connectionstring1 + "PublicKeyToken=91d62ebb5b0d1b1b;GetDriverFunc=getSQLDriverINTERBASE;LibraryName=dbxint30.dll;VendorLib=GDS32.DLL";

connectionstring2 = “User_Name="+userid+";Password="+password+";Database="+database+";ServerType=0;Charset=NONE;LibraryName=.\\dbxint.dll;VendorLib=GDS32.DLL;GetDriverFunc=getSQLDriverINTERBASE;SQLDialect=3";

GlobalObjects.dbconn = (TAdoDbxConnection)TAdoDbxInterBaseProviderFactory.Instance.CreateConnection();

GlobalObjects.database = databasepath;
GlobalObjects.dbconn.ConnectionString = connectionstring1;  //or connectionstring2
GlobalObjects.dbconn.Open(); 
```

# vba - Outlook 2007 中的上下文菜单，用于在我选择的浏览器中打开链接

> ID：219691
> 
> 赞同：3
> 
> 时间：2008-10-20T20:03:07.457
> 
> 标签：vba, outlook

我想让链接的上下文菜单为我提供在不同浏览器中打开的选项，而不是在我的默认浏览器中打开。例如，

打开-->

*   IE
*   火狐
*   歌剧
*   铬合金
*   苹果浏览器
*   等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T20:08:37.477

没关系。据微软的优秀人员说，看起来我做不到。

> 在 Office Outlook 2007 中，只有以下上下文菜单具有与之关联的事件：
> 
> *   附件上下文菜单
> *   文件夹上下文菜单
> *   项目和选择上下文菜单
> *   快捷上下文菜单
> *   存储上下文菜单
> *   查看上下文菜单

[http://msdn.microsoft.com/en-us/library/bb206752.aspx](http://msdn.microsoft.com/en-us/library/bb206752.aspx)

# sql - 交叉连接的用途是什么？

> ID：219716
> 
> 赞同：112
> 
> 时间：2008-10-20T20:11:15.133
> 
> 标签：sql, database, join, relational-database

交叉连接对两组元组执行笛卡尔积。

```
SELECT *
FROM Table1
CROSS JOIN Table2 
```

哪些情况下使这样的 SQL 操作特别有用？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2008-10-20T20:20:17.500

如果您有一个想要完全填充的“网格”，例如特定服装的尺寸和颜色信息：

```
select 
    size,
    color
from
    sizes CROSS JOIN colors 
```

也许您想要一个包含一天中每一分钟的行的表，并且您想使用它来验证每分钟都执行了一个过程，因此您可能会跨越三个表：

```
select
    hour,
    minute
from
    hours CROSS JOIN minutes 
```

或者您有一组标准报告规范，您想在一年中的每个月应用：

```
select
    specId,
    month
from
    reports CROSS JOIN months 
```

将这些作为视图进行维护的问题在于，在大多数情况下，您不需要完整的产品，尤其是关于衣服的产品。您可以向查询添加`MINUS`逻辑以删除您不携带的某些组合，但您可能会发现以其他方式填充表而不使用笛卡尔积更容易。

此外，您最终可能会在可能比您想象的多几行的表上尝试交叉连接，或者您的`WHERE`子句可能部分或完全丢失。在这种情况下，您的 DBA 将及时通知您遗漏。通常他或她不会高兴。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-10-20T20:19:18.347

生成测试数据。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-20T20:15:36.323

对于大多数数据库查询，您通常不需要完整的笛卡尔积。关系数据库的全部力量在于您可以应用您可能感兴趣的任何限制，以避免从数据库中提取不必要的行。

我想你可能想要的一个人为的例子是，如果你有一张员工表和一张需要做的工作表，并且想要查看一名员工对一项工作的所有可能分配。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-10-20T20:23:52.267

好吧，这可能无法回答这个问题，但是，如果它是真的（我什至不确定）这是一段有趣的历史。

在 Oracle 的早期，一位开发人员意识到他需要复制表中的每一行（例如，它可能是一个事件表，他需要将其更改为单独的“开始事件”和“结束事件”条目）。他意识到，如果他有一个只有两行的表，他可以进行交叉连接，只选择第一个表中的列，并得到他需要的。所以他创建了一个简单的表，他很自然地称之为“DUAL”。

后来，他需要做一些只能通过从表中选择来完成的事情，即使该操作本身与表无关，（也许他忘记了手表，想通过 SELECT SYSDATE FROM.. 读取时间。 .) 他意识到他的 DUAL 桌子还在周围，并使用了它。过了一会儿，他厌倦了看到时间打印两次，所以他最终删除了其中一行。

Oracle 的其他人开始使用他的表，最终决定将其包含在标准的 Oracle 安装中。

这就解释了为什么一个唯一意义在于它只有一行的表的名称意味着“两个”。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-10-20T21:38:14.787

关键是“向我展示所有可能的组合”。我已经将这些与其他计算字段结合使用，然后对它们进行排序/过滤。

例如，假设您正在构建一个套利（交易）应用程序。你有卖家以一定的价格提供产品，而买家则以一定的成本要求产品。您对产品密钥进行交叉连接（以匹配潜在的买家和卖家），计算成本和价格之间的差价，然后按降序排序。以此为您（中间人）提供最有利可图的交易来执行。当然，几乎总是你会有其他的边界过滤条件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-20T20:43:27.003

采用类似于数字表的东西，其中有十行数字 0-9。您可以在该表上多次使用交叉连接来获取包含所需行数的结果，并对结果进行适当编号。这有很多用途。例如，您可以将它与 datadd() 函数结合使用，以获取给定年份中每一天的集合。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-21T17:18:58.507

这是使用交叉连接[创建交叉表报告](http://books.google.com/books?id=qNXaiM_gNbYC&pg=PA378&lpg=PA378&dq=crosstab+by+cross+join&source=web&ots=TM2CFUH4rA&sig=T7D9_bjsPV4c2CkOgcgX2mmFMMc&hl=en&sa=X&oi=book_result&resnum=2&ct=result#PPA378,M1)的一种有趣方式。我在[Joe Celko 的 SQL For Smarties](http://books.google.com/books?id=qNXaiM_gNbYC)中找到了它，并且已经使用了好几次。它确实需要一些设置，但值得投入时间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T20:22:05.843

想象一下，您有一系列要针对特定​​项目和日期组合（价格、可用性等）发出的查询。您可以将项目和日期加载到单独的临时表中，并让您的查询交叉连接这些表。这可能比枚举 IN 子句中的项目和日期更方便，特别是因为某些数据库限制了 IN 子句中的元素数量。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-01T02:23:26.713

您可以使用它**CROSS JOIN**来：

*   为测试目的生成数据
*   结合所有属性-您需要所有可能的组合，例如血型（A，B，..）与Rh-/+等 ***...-根据您的目的进行调整；）-我不是这方面的专家； )***

```
CREATE TABLE BL_GRP_01 (GR_1 text);
CREATE TABLE RH_VAL_01 (RH_VAL text);
INSERT INTO BL_GRP_01 VALUES ('A'), ('B'), ('AB'), ('O');
INSERT INTO RH_VAL_01 VALUES ('+'), ('-');

SELECT CONCAT(x.GR_1, y.RH_val)
       FROM BL_GRP_01 x
 CROSS JOIN RH_VAL_01 y
ORDER BY CONCAT(x.GR_1, y.RH_VAL); 
```

*   为没有共同 id 的 2 个表创建连接，然后使用 max() 等对其进行分组。以找到可能的最高组合

# sql - 您如何在数据库通信中有效地处理 BLOB 和数值数据？

> ID：219719
> 
> 赞同：1
> 
> 时间：2008-10-20T20:11:44.197
> 
> 标签：sql, database, language-agnostic, optimization, rdbms

SQL 数据库似乎是大多数软件的基石。但是，它似乎针对文本数据进行了优化。事实上，在执行任何涉及数字数据（特别是整数）的查询时，将数字转换为文本然后在应用程序和数据库之间以两种方式返回本机格式似乎效率低下。同样的低效率似乎也适用于 BLOB 数据。我的理解是，即使使用 Linq to SQL 之类的东西，这种双向转换也在后台发生。

有没有一般的方法可以用 SQL 绕过这种开销？是否有某些数据库管理系统比其他系统更有效地处理这个问题（即，使用非标准扩展/API）？

澄清。在下面的 select 语句中，IN 之后的数字列表可以更容易地作为 int 的原始数组传递，但似乎无法实现该优化级别。

```
SELECT foo FROM bar WHERE baz IN (23, 34, 45, 9854004, ...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T20:24:56.727

不要假设。措施。

格式转换不太可能是数据库工作的可衡量成本，除非您将数据库误用作算术引擎。

LOB 的 IO 成本，尤其是具有字符转换的 CLOBS，可能会变得很重要；此处的补救措施是，一旦您知道可能有效的最简单的事情实际上会产生明显的性能影响，那就是尽量减少复制 LOB 数据的次数。使用任何 SQL 参数绑定样式允许您直接在其创建点或使用点与数据库之间传输数据——这通常是将 LOB 绑定到流或 I/O 通道。

但是，在您有办法衡量影响并有测量结果表明这是您的瓶颈之前，请不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T20:18:28.363

数据库中的数值数据不存储为文本。我想这取决于数据库，但它当然不必是也不是。

BLOB 的存储方式与您设置它们的方式完全相同——根据定义，数据库无法解释信息——我想如果它发现有用的话，它可能会压缩。BLOB 不会翻译成文本。

以下是 Oracle 存储数字的方式：

[http://download.oracle.com/docs/cd/B28359_01/server.111/b28318/datatype.htm#i16209](http://download.oracle.com/docs/cd/B28359_01/server.111/b28318/datatype.htm#i16209)

> 内部数字格式
> 
> Oracle 数据库以可变长度格式存储数字数据。每个值都以科学计数形式存储，其中 1 个字节用于存储指数，最多 20 个字节用于存储尾数。结果值限制为 38 位精度。Oracle 数据库不存储前导零和尾随零。例如，数字 412 以类似于 4.12 x 102 的格式存储，其中 1 个字节用于存储指数 (2)，2 个字节用于存储尾数 (4,1,2) 的三个有效数字。负数在其长度中包含符号。

MySQL信息在这里：

[http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)

查看表格 - TINYINT 以 1 个字节（范围 -128 - 127）表示，如果存储为文本则不可能。

编辑：澄清一下——我会说在你的语言中使用看起来像这样的 API（伪代码）

```
stmt = conn.Prepare("SELECT * FROM TABLE where x in (?, ?, ?)");
stmt.SetInt(0, x);
stmt.SetInt(1, y);
stmt.SetInt(2, z); 
```

我不相信底层协议使用文本来传输参数。

# c++ - VCL 替代 IStorage

> ID：219726
> 
> 赞同：0
> 
> 时间：2008-10-20T20:13:28.683
> 
> 标签：c++, vcl, istorage, structured-storage

作为序言，我使用的是 Borland C++ 和 VCL。

我需要某种结构化存储对象，它可以作为单个文件保存到磁盘，并且可以包含多个命名的二进制数据 blob，我可以通过编程方式枚举、访问和操作这些 blob。

[IStorage](http://msdn.microsoft.com/en-us/library/aa380015(VS.85).aspx)接口似乎与我想要的很接近，但我更喜欢 VCL 风格的解决方案，因为将 TStream (VCL) 转换为 IStream 会变得很尴尬，而且它们必须是一个更简单的解决方案，使用已经可用的 VCL 东西，比如 TIniFile 但对于二进制数据。

我不想使用 XML，因为二进制数据 blob 非常大，并且当正确编码以在 XML 中使用时，它是完全无效的。

提前感谢所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-21T08:55:08.663

一个 zip 文件实际上是一个标准容器，您似乎可以获得一个 TStream 接口：[http ://www.tek-tips.com/faqs.cfm?fid=6734](http://www.tek-tips.com/faqs.cfm?fid=6734)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T20:21:54.830

来自 Eldos 的 SolFS（固态文件系统）。

[http://www.eldos.com/solfs/](http://www.eldos.com/solfs/)

非常可靠，但可能不是最便宜的解决方案（一位开发人员 372 美元）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-21T14:54:46.457

我通过 ComponentAce选择了[ZipForge 。](http://www.componentace.com/zip_component_zip_delphi_zipforge.htm)它速度很快，正在积极开发/支持，并且有完美的界面来支持我想要的。

感谢大家的其他建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-22T09:31:44.763

如果您不想存储大文件（它有 2GB 的限制），[GPStructuredStorage](http://17slon.com/gp/gp/gpstructuredstorage.htm)可能会很方便。

它是一个用纯 delphi 编写的开源结构化存储库，仍在维护，似乎可以与 D2010 一起使用。

# excel - 如何保护Excel工作表上的图像

> ID：219756
> 
> 赞同：4
> 
> 时间：2008-10-20T20:19:52.993
> 
> 标签：excel, vba

我有一个带有图像（徽标）的 Excel 工作表。如果我`right-click`在图片上并选择`Format Picture / Protection`，则选中该`Locked`复选框。然后我用密码保护工作表。

尽管如此，最终用户仍然可以选择和删除图像。有什么办法可以防止这种情况发生吗？

**更新**

确实`Edit Objects`是未经检查的。

`Worksheet.Protect`我使用的方法有许多可选参数，这些参数控制用户可以在受保护的工作表上修改的内容。其中大部分是名为***`AllowXXX`***（例如`AllowFormattingColumns`）的参数，默认为`False`.

该参数***`DrawingObjects`***是一个例外。此参数默认为`False`保护必须明确设置为的绘图对象`True`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T23:31:13.340

保护床单对我有用。

检查“编辑对象”选项（在您可以允许用户执行的操作列表的底部，在保护对话框中）未选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T20:21:24.283

也尝试保护 WorkBOOK。

编辑：呃——这似乎不起作用。

我用谷歌搜索了这个非常丑陋的解决方案：[防止图像被删除或替换](http://www.tech-archive.net/Archive/Excel/microsoft.public.excel.misc/2007-04/msg00755.html)

# c++ - 处理 C++“已初始化但未引用”警告以销毁作用域助手？

> ID：219770
> 
> 赞同：14
> 
> 时间：2008-10-20T20:23:31.427
> 
> 标签：c++, visual-studio-2005, warnings

在 Visual Studio 中，我经常将对象仅用于 RAII 目的。例如：

```
ScopeGuard close_guard = MakeGuard( &close_file, file ); 
```

*close_guard*的全部目的是确保文件将在函数退出时关闭，它不会在其他任何地方使用。但是，Visual Studio 给我一个警告，说“*局部变量已初始化但未引用*”。我想针对这种特定情况关闭此警告。

你如何处理这种情况？Visual Studio 认为这个对象是无用的，但这是错误的，因为它有一个非平凡的析构函数。

我不想为此使用*#pragma 警告*指令，因为即使出于正当理由它也会关闭此警告。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-20T20:34:11.827

如果你的对象有一个重要的析构函数，Visual Studio*不*应该给你那个警告。以下代码不会在 VS2005 中生成任何警告，并且警告一直向上 (/W4)：

```
 class Test
{
public:
    ~Test(void) { printf("destructor\n"); }
};

Test foo(void) { return Test(); }

int main(void)
{
    Test t = foo();
    printf("moo\n");

    return 0;
} 
```

注释掉析构函数会给出警告；代码原样没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-20T20:29:22.850

**方法一：**使用`#pragma warning`指令。

`#pragma warning`允许选择性地修改编译器警告消息的行为。

```
#pragma warning( push )
#pragma warning( disable : 4705 ) // replace 4705 with warning number

ScopeGuard close_guard = MakeGuard( &close_file, file );

#pragma warning( pop ) 
```

此代码保存当前警告状态，然后禁用特定警告代码的警告，然后恢复上次保存的警告状态。

**方法 2：**使用类似以下的解决方法。Visual Studio 会很高兴，你也会。此解决方法用于许多 Microsoft 示例以及其他项目中。

```
ScopeGuard close_guard = MakeGuard( &close_file, file );
close_guard; 
```

或者您可以创建一个`#define`解决警告的方法。

```
#define UNUSED_VAR(VAR) VAR
...
ScopeGuard close_guard = MakeGuard( &close_file, file );
UNUSED_VAR(close_guard); 
```

* * *

一些用户表示，由于 ScopeGuard 是 typedef，因此提供的代码将不起作用。这个假设是错误的。

[http://www.ddj.com/cpp/184403758](http://www.ddj.com/cpp/184403758)

> 根据 C++ 标准，使用临时值初始化的引用使该临时值在引用本身的生命周期内有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-20T20:30:44.173

我们用：

```
static_cast<void>(close_guard); 
```

对于编译器抱怨的变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T20:31:30.893

在一些 VC++ 头文件中，MS 定义了一个宏：

```
#define UNUSED(x) x 
```

像这样使用：

```
ScopeGuard close_guard = MakeGuard( &close_file, file );
UNUSED(close_guard); 
```

这使警告静音并记录下来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T23:19:11.663

在这种情况下，我会一直使用宏：

```
#define SCOPE_GUARD(guard, fn, param) \
    ScopeGuard guard = MakeGuard(fn, param); \
    static_cast<void>(guard) 
```

现在您的代码又好又短：

```
SCOPE_GUARD(g1, &file_close, file1);
SCOPE_GUARD(g2, &file_close, file2); 
```

这种方法的一个优点是，稍后您可以在需要时添加`__LINE__`, `__func__`etc 来记录警卫操作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T20:37:09.590

*好吧，在这种情况下，ScopeGuard 实际上是引用类型的 typedef。不幸的是，这行不通。*

那不是意味着整个 ScopeGuard 不起作用，因为在那种情况下不会调用析构函数？？？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-20T20:31:24.560

您只能通过使用

```
#pragma warning(push)
#pragma warning(disable:XXXX)
your code here;
#pragma warning(pop) 
```

或者

```
#pragma warning(disable:XXXX)
your code here;
#pragma warning(default:XXXX) 
```

您也可以`UNREFERENCED_PARAMETER(close_guard);`在上面的代码行之后使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T20:40:24.323

我想在实践中，我会不情愿地使用#pragma disable... 或“UNUSED”。然而，作为一个主要规则，即使以一些额外的体积为代价，代码也应该保持干净的警告。它应该在不同平台和操作系统上的多个不同编译器中编译而不会发出警告。如果没有，则必须修复代码以使其正常。维护在 gcc -Wall 级别生成警告的代码不是一个好主意。

编译器警告是你的朋友，应该作为一个问题或原则加以注意。即使这意味着必须以更笨重和更冗长的方式实现事物。从长远来看，随着代码的移植、维护和永久存在，它会为自己买单……

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-20T20:27:59.747

尝试将 'volatile' 添加到 ScopeGuard 声明中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T20:35:02.400

我在上面使用 smink 的帖子，只需要补充一点，我在 #define 旁边添加了一条评论，说 // 用于抑制 Visual Studio 中的警告 [警告编号]

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T22:47:55.283

您可以显式创建 ScopeGuardImpl1 对象，前提是在您使用的情况下没有太多参数导致结果不可读。这样，您就可以避免 VS 警告显然无法理解的临时引用初始化。代价是不得不把事情拼写出来，而不是获得 MakeGuard 模板的魔力。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2008-10-20T20:35:21.060

这里的核心问题似乎真的是编译器不太明白你在做什么......这似乎是在 C++ 中使用范围语义来在释放变量时调用一些代码，即使它没有被使用. 对？这种机制本身给我的印象是边缘......编译器应该有权删除未使用的变量，但 C++ 构造语义确实把这些事情搞砸了。没有其他方法可以做到这一点不那么花招吗？

# c# - 将 Request.QueryString 转换为Datetime，然后在 c# asp.net 的 linq 中使用 datacontext 获取

> ID：219776
> 
> 赞同：1
> 
> 时间：2008-10-20T20:25:30.110
> 
> 标签：c#, asp.net, linq

我想使用 request.querystring 从另一个页面获取 Timedate 值，然后使用它进行查询来比较和提取匹配的数据。linq 中查询的函数是：

```
 protected void User_Querytime()
    {
    DataClasses2DataContext dc1 = new DataClasses2DataContext();
    String  Data = Request.QueryString["TimeOfMessage"];

                var query7 = from u in dc1.syncback_logs
                             where u.TimeOfMessage = Data
                             orderby u.TimeOfMessage descending
                             select u;
                GridView1.DataSource = query7;
                GridView1.DataBind();
    } 
```

这里我得到的“Request.QueryString [“TimeOfMessage”]”是DateTime（例如：8/25/2008 9:07:19 AM）。我想将它与数据库中的“u.TimeOfMessage”进行比较并提取匹配的记录。

当我使用 todatetime 函数从字符串转换为 datetime 时，返回的值为 bool，因此无法将其与数据库中的 datetime 格式的“Timeofmessage”进行比较。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T20:33:16.587

你的意思是 Convert.ToDateTime 吗？这将返回 DateTime（不是布尔值）。你是说 DateTime.TryParse 吗？只需使用以下任何一种：

```
DateTime when = DateTime.Parse(data);
DateTime when = DateTime.ParseExact(data);
DateTime when = Convert.ToDateTime(data); 
```

然后在查询中使用“when”。如果您知道它们都是平等的，我不确定按它订购的目的，但是……我错过了什么吗？

如果问题是您*只*想要时间部分（而不是日期部分），您能澄清一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T23:33:08.640

TryParse 确实会产生一个布尔值（作为解析的成功）：

```
Dim DateText = Request.QueryString("date")
Dim MyDate As DateTime = Nothing
If DateTime.TryParse(DateText, MyDate) Then
  '--Date was passed correctly
End If 
```

问候克里斯托夫

# asp.net - RequiredFieldValidator - 如何摆脱默认的红色字体颜色

> ID：219783
> 
> 赞同：21
> 
> 时间：2008-10-20T20:27:10.920
> 
> 标签：asp.net, asp.net-2.0, validation

我似乎无法更改必填字段验证器的默认颜色。在源代码中是：

```
<span class="required">*</span>
<asp:RequiredFieldValidator ID="valReq_txtTracks" runat="server"
    ControlToValidate="txtTracks"
    Display="Dynamic" /> 
```

这是我的 .skin 文件中的内容：

```
<asp:RequiredFieldValidator runat="server" 
    CssClass="error-text"
    ErrorMessage="required" /> 
```

在渲染的源代码中，我看到：

```
<span class="required">*</span>
<span id="ctl00_ctl00_cphContent_cphContent_valReq_txtTracks" class="error-text" style="color:Red;display:none;">required</span> 
```

注意“样式=颜色：红色；”。那需要去。我不能用 css-class 覆盖它，因为它是内联 CSS。我该怎么办？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-10-20T20:35:22.213

您可以设置一个[RequiredFieldValidator.ForeColor属性来控制颜色。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.forecolor.aspx)注意，如果你想在 CSS 中设置颜色，那么你需要设置 ForeColor="" 在控件上清除它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-07-27T01:24:32.043

我知道这是一个旧线程，但我又遇到了这个问题。设置样式表不会覆盖验证器的文本颜色有点奇怪。就我而言，我有一大堆不同的验证器和扩展验证器，我想为其覆盖文本颜色，因此我创建了处理 BaseValidator 控件呈现的自定义控件适配器，而不是主题和皮肤文件。在渲染方法里面，我只是设置了`ForeColor = Color.Empty`. 希望这可以帮助遇到这种情况并希望为所有类型的验证器（必填字段、正则表达式、比较......）覆盖文本颜色的其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T20:31:16.433

您是否尝试在皮肤文件中添加带有空字符串的样式属性：

```
<asp:RequiredFieldValidator runat="server" 
    CssClass="error-text"
    style=""
    ErrorMessage="required" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T20:31:00.117

我在某处读到使用 !important 标记在您的 css 类中覆盖内联 css ...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-02-01T19:01:23.817

在 Firefox 和 IE 中使用`!important`似乎可以正常工作，但由于某种原因在 Google Chrome 中无法正常使用……虽然没什么大不了的，Chrome 的份额仍然很低。

```
.form_error
{
    font: bold 15px arial black,arial,verdana,helvetica !important; 
    color: #ff0000 !important;
} 
```

# apache-flex - 加载相对于服务器根目录而不是 .swf 位置的 Flex 资源

> ID：219788
> 
> 赞同：4
> 
> 时间：2008-10-20T20:28:49.153
> 
> 标签：apache-flex, actionscript, relative-path

我有一个代表网站主文件的大型 (700kb) Flex .swf 文件。

对于性能测试，我想尝试将其移至 Amazon S3 托管（我已经对某些视频和大文件进行了此操作）。

我继续这样做，并更新了 html 页面以引用远程 .swf。

事实证明，Flash 将加载与访问资源的 .swf 文件相关的任何资源——无论 html 页面的根目录是什么。所以我的资源现在正在从远程站点（它们不存在）加载。

有两件显而易见的事情我可以做： * 远程复制我的所有资源（因为我现在只是在测试，所以还没有准备好） * 在 .swf 访问的每个 URL 中添加一些抽象层以派生新路径。

我真的很想按一下开关并说“加载与[原始服务器]相关的所有内容”。

这样的事情是否存在，或者除非我完全限定每条路径，否则我是否会从远程机器加载所有内容？

我想避免任何“hacky”之类的东西：子类 Image 并破解那里的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-21T07:11:08.793

在您的网址前附加一个斜杠，这应该相对于域而不是当前文件夹加载：

```
foo.load('/like/this/image.jpg') 
```

这有点快速和肮脏，通过查询字符串（[或基本参数](https://stackoverflow.com/questions/219788/loading-flex-resources-relative-to-server-root-as-opposed-to-swf-location#220518)）提供“相对”网址会更加灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T01:52:19.750

您可以尝试指定`base`SWF 的嵌入/对象标签的参数。从理论上讲，它定义了将用于解析加载的相对路径的基本路径，但我不知道如果该`base`值指向与 SWF 所在的不同服务器，它是否会起作用。

[在此处](http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_12701&sliceId=1)查看有关嵌入/对象参数的文档。向下滚动到`base`中间的“”。

如果这不起作用，我看到人们做的另一件事是通过`flashvars`. 然后在您的 SWF 中，检查该基本路径是否已定义，如果已定义，则在加载之前将其添加到相对 URL。

# .net - 数据库本地化 - 查找列表 - 更智能的方式

> ID：219798
> 
> 赞同：3
> 
> 时间：2008-10-20T20:32:03.420
> 
> 标签：.net, database, tsql, ado.net

## 我希望在数据库中添加一些查找列表，但我希望它们易于本地化（SQL 2005，ADO.NET）

这将包括：

*   同时轻松管理多种语言
*   从数据库中轻松检索值
*   备用语言（如果缺少所选语言）

我正在考虑有一个表来存储多语言查找列表（对不同的语言使用相同的 ID）并使用一个函数来返回查找列表的值 - 通过接收 ID 和语言。

陷阱之一是我必须手动向使用查找列表的每个查询添加语言参数。

我正在寻找一种解决方案，可以让我将参数作为“会话/全局变量”发送，或者使用 sql 查询自动发送参数，以及自行检索它的函数（自动附加参数，要么能够读取参数）。

解决方案可能看起来像这样，但我不介意它是否不同，只要它没有将参数显式地提供给查询（伪代码）：

> ```
> 1\. Send the language using "the method"
> 2\. Execute Query
> 3\. Get the localized results 
> ```

澄清：

1.  通常查询看起来像这样（记住使用查找功能）：

    `SELECT .., GetLookupList1(lookup_ID, language), .. FROM TABLE`

GetLookupList1 是一个用户定义的函数，用于检索查找表的查找值。通过使用此功能，SQL 代码更易于阅读和维护。

函数的主体类似于：

```
SELECT @result = LookupValue FROM LookupTable1 WHERE ID=@Lookup_ID and Language=@lang
RETURN @result 
```

2.  我想要的是能够将语言参数从函数中删除为某种静态变量，仅适用于当前连接/语句/命令，因此查询看起来像

    `SELECT .., GetLookupList1(lookup_ID), .. FROM TABLE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T20:52:37.733

如果您像这样构建数据：

```
MessageToken    DisplayText       LangCode
firewood        Fire wood         en
firewood        Bois de chauffage fr 
```

进行查询时，只需提供默认语言 ID（如果为空）或提供的语言 ID。对消息使用标准的令牌列表。

```
Select DisplayText from (some table) where MessageToken = 'firewood' and LangId = 'en' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-21T20:29:15.360

由于 SQL Server 中没有用户定义的全局变量，因此您必须使用以下两种方法之一：

1.  表 - 临时或永久。永久表的示例：[http](http://weblogs.sqlteam.com/mladenp/archive/2007/04/23/60185.aspx) ://weblogs.sqlteam.com/mladenp/archive/2007/04/23/60185.aspx 。
2.  设置上下文信息：http: [//msdn.microsoft.com/en-us/library/ms187768.aspx](http://msdn.microsoft.com/en-us/library/ms187768.aspx)。Context_info 允许您将 128 个二进制字节与会话/连接相关联。它有效，但要小心。如果您养成使用它的习惯，您可能会在另一个上下文中意外覆盖它。每个会话/连接只有一个。

示例 context_info t-sql：

```
declare @languagein varchar(30), @contextin varbinary(128),
    @languageout varchar(30), @contextout varbinary(128)

select @languagein = 'ro-RO'
select @contextin = cast(@languagein as varbinary(128))
set context_info @contextin

--do whatever you like here: queries, stored procs. 
--context_info stays 'ro-RO' for the duration of the session/connection

select @contextout = context_info()
set @languageout = replace(cast(@contextout as varchar(30)),0x00, '')
print @languageout 
```

我在本地化中使用的另一种技术是三部分合并以确保结果。首先检查语言区域，然后是语言，然后是默认值。根据您的查询：

```
SELECT COALESCE(langregion.LookupValue, lang.LookupValue, fallback.LookupValue) LookupVal
FROM LookupTable1 fallback
LEFT OUTER JOIN LookupTable1 lang 
    ON lang.ID = fallback.ID AND lang.Lang = @language
LEFT OUTER JOIN LookupTable1 langregion 
    ON langregion.ID = fallback.ID AND langregion.Lang = @languagewithregion
WHERE fallback.ID = @Lookup_ID
AND fallback.Lang = @defaultlanguage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-24T06:33:21.037

在详细研究了这个问题后，我发现了以下内容：

1.  我可以使用`SET CONTEXT_INFO`，但我必须注入一些 SQL 来解决问题。

2.  最好的选择是不在查找表中存储本地化数据。相反，存储一些标识字符串，并在应用程序中使用自定义本地化逻辑将字符串与本地化数据匹配。对于 .NET 框架，如果我想从数据库中检索本地化信息，它将通过使用资源和自定义资源提供程序来实现。

谢谢您的回答。

# linux - 将正在运行的 Linux 进程中的内存地址范围转换为目标文件中的符号？

> ID：219800
> 
> 赞同：4
> 
> 时间：2008-10-20T20:32:12.860
> 
> 标签：linux, memory, debugging, symbols, elf

这是文件*/proc/self/smaps*的片段：

```
00af8000-00b14000 r-xp 00000000 fd:00 16417      /lib/ld-2.8.so
Size:                112 kB
Rss:                  88 kB
Pss:                   1 kB
Shared_Clean:         88 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:         0 kB
Referenced:           88 kB
Swap:                  0 kB
00b14000-00b15000 r--p 0001c000 fd:00 16417      /lib/ld-2.8.so
Size:                  4 kB
Rss:                   4 kB
Pss:                   4 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:         4 kB
Referenced:            4 kB
Swap:                  0 kB 
```

它表明该进程*（自身）*链接到*/lib/ld-2.8.so*和两个（许多）字节范围映射到内存中。

第一个 88kb 范围（22 个 4kb 页面）是*shared*和*clean*，也就是说它没有被写入。这可能是代码。

第二个 4kb 范围（单页）没有被共享并且它是*脏*的——进程已经写入它，因为它是从磁盘上的文件映射的内存。这大概就是数据了。

*但那段记忆里到底是什么？*

如何将内存范围*00b14000-00b15000*转换为有用的信息，例如声明大型静态结构的文件的行号？

该技术需要考虑[预](http://en.wikipedia.org/wiki/ExecShield)链接和[地址空间随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)，例如来自[execshield](http://en.wikipedia.org/wiki/Prelinking)，以及[单独的调试符号](http://fedoraproject.org/wiki/StackTraces)。

*（其动机是识别那些也会产生脏内存并修复它们的流行库，例如通过声明结构 const）。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-21T03:13:00.583

smaps 的格式为：

[底部]-[顶部] [烫发] [文件偏移]

b80e9000-b80ea000 rw-p 0001b000 08:05 605294 /lib/ld-2.8.90.so

所以文件'/lib/ld-2.8.90.so'在文件偏移0x0001b000处的实际内容映射到该程序内存中的0xb80e9000。

要提取映射地址的行号或 C 代码，您需要将其与可执行文件或库文件的 ELF 部分匹配，然后提取 GDB 符号（如果所述可执行文件或库仍然具有它们）。

GDB 文件格式（表面上）记录在[http://sourceware.org/gdb/current/onlinedocs/gdbint_7.html#SEC60](http://sourceware.org/gdb/current/onlinedocs/gdbint_7.html#SEC60)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-21T06:05:55.790

查看[ParaDyn](http://www.paradyn.org/html/symtab2.1-features.html)项目（U. Wisc/U. Maryland）中的 SymtabAPI。它在许多平台上运行，并且支持的不仅仅是 ELF 文件（我相信它还支持 COFF 和其他一些文件）。这里有[文档](http://ftp.cs.wisc.edu/par-distr-sys/releases/release5.1/doc/symtabProgGuide.pdf)。

具体来说，你可以看看 AddressLookup 类；我认为它完全符合您的要求。还有一些工具 (getLoadAddresses()) 可以找出在任何给定时间加载了什么 .so，我相信您还可以提取已加载模块的代码段的范围，这样您就可以知道内存的某些部分有什么.

警告：我认为它会正确处理地址空间随机化，但我不完全确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T20:40:03.950

您需要从 Linux 的内存处理程序中提取信息，以确定应用程序的虚拟内存映射与给定页面的关系。如果您还想跟踪已换出内存的页面中的信息，这将变得更加棘手。

您会[在此处找到一些信息，](http://tldp.org/LDP/khg/HyperNews/get/memory/linuxmm.html)这些信息可以帮助您入门。进程表包含一些分页信息，但您可能必须四处寻找几个不同的区域才能获得您正在寻找的所有深层信息。

-亚当

# facebook - 新的 Facebook 应用程序 - FBML 或 iFrame？

> ID：219804
> 
> 赞同：53
> 
> 时间：2008-10-20T20:32:48.787
> 
> 标签：facebook, api

我们正在启动一个新的 facebook 应用程序（顺便在 Rails 中），并且面临使用 FBML 或使用 IFrames 的决定。过去似乎普遍认为 FBML 是更好的选择，因为它使事情看起来更像 Facebook我们 [应该使用 iframe](http://www.ccheever.com/blog/?p=10)

所以我想知道人们发现什么最有效。您看到了 iFrame 方法或 FBML 方法的优点和缺点。

或者，人们是否同时使用两者。我看到有一种方法可以覆盖特定位置的设置。

* * *

> **更新：**
> 对于新读者，Facebook 已[停止允许新的 FBML 应用程序](http://developers.facebook.com/roadmap/)。**所有**新应用都应使用**IFrame**。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-10-23T10:43:34.263

I have been developing a facebook app for the past several months, and recently switched our canvas page from FBML to an IFrame. The main reason for doing so has to do with these posts and features:

[Lead Facebook Engineer Recommends Developers Use IFrames for Speed, Convenience](http://www.insidefacebook.com/2008/09/30/lead-facebook-engineer-recommends-developers-use-iframes-for-speed-convenience/)

[XFBML - Facebook Developer Wiki](https://developers.facebook.com/docs/guides/web/)

Basically, you can now embed FBML into an IFrame canvas using the XFBML features that were implemented to support Facebook Connect. IFrames may have performance improvements (although those are probably trashed by the client-side requests required by XFBML, which are a little tedious to set up at first), but the main advantages for me are:

1) The ability to use jQuery or any other stuff I want.

2) Useful, relevant ads from adsense, since I no longer have to embed the adsense javascript in its own IFrame.

Once I made this switch, I realized that I was able to get all the facebook data I needed through the API, and take advantage of memcached to improve performance. So, now my canvas is just plain old HTML, without any XFBML.

Hope this helps.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-23T10:33:29.587

I find FBML easier if you want to make your app look just like Facebook with less effort in duplicating their styling.

Iframes of course give you more control.

So which do you prefer - quicker development or more precise control over the results?

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2010-09-20T15:49:31.560

答案肯定是 iFrame。Facebook 已在 2010 年年底前逐步停止使用 FBML

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-09-21T02:26:24.273

说真的，在您决定进一步使用 FMBL 之前，您需要参考此链接。Facebook 将在 2010 年底停止允许新的 FBML 应用程序。所有的 Tabs Page 和 Canvas 应用程序都将过渡到 iFrame 应用程序，不再使用 FMBL，并与 FBML 说再见！ [http://developers.facebook.com/roadmap](http://developers.facebook.com/roadmap)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-23T10:38:17.893

Well, I'll have to agree with the poster above me and say that FBML makes it much easier to create a facebook-ish style to your application without having to rip off CSS pages ;}

Its also quite great working with the fb tags instead of creating makeshift solutions at times.

Both ways are good, but FBML tends to contribute to more effective and efficient development for Facebook. So, in the general case, I would probably go ahead and use FBML, unless you have some specific need for IFrame fine tuning.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-12-13T05:40:15.903

总结一下：FBML 使应用程序变得更好、更集成。IFrame 更易于使用，并为您提供更多开发自由（如果您的应用程序已经完成，并且您只想为其添加“facebook 腿” - 这非常容易。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-01-26T16:03:27.403

IFrames seem to work better if you have a client side using Flash or Silverlight. I couldn't get FBML working with a Silverlight client but when I switched to IFrames it worked fine.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-03-01T00:09:55.160

在过去的几年里，我开发了大约 30 个 Facebook 应用程序，几乎都是基于 FBML 的。我还完成了一些 Facebook Connect 实现，这正是您使用 iframe 应用程序所做的事情。

通过创建一个基于 iframe 的应用程序，为主网站实施 Facebook Connect 并没有太多额外的工作，如果有的话。您的内容也没有经过净化，因此您可以毫无顾虑地使用标准的 html、css 和 javascript。

另一方面，您仍然只能将 FMBL/FBJS 用于任何应用程序的选项卡内容。FBML 应用程序还具有能够在初始页面加载时进行服务器端处理的额外优势。使用 iframe，您需要在客户端收集信息，然后将其传递给服务器。例如，使用 iframe 应用程序的 Preload FQL 比使用 FBML 应用程序要复杂一些。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-01-11T23:25:52.480

Facebook 宣布他们将很快停止对 FBML 的支持。因此，如果您正在考虑开发一个长期项目，我肯定会从 iFrame 开始。您不想在以后经历从 FBML 到 iFrames 的更改，这只是一种痛苦。

但是，我个人认为 iFrame 目前比 FBML 漏洞更多，所以我认为 facbeook 停止支持 FBML 还需要一段时间。

从理论上讲，iFrame 更好，因为从技术上讲，您不会丢失任何东西。此外，您可以在 iFrame 中做更多在 FBML 中无法做到的事情。但实际上，就像我说的那样，iFrames 仍然包含很多错误。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-29T20:22:01.283

使用 FBML 可以让您与整个 Facebook 进行更深入的集成。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-02-28T14:58:54.470

我找到了一个无需 facebook 开发人员就可以创建 iframe 应用程序的解决方案。它非常强大： http: [//www.facebook.com/iframe.apps](http://www.facebook.com/iframe.apps)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-11-16T17:59:06.673

妈妈。话虽如此，为什么没有人对 FBML 将在不到 2 个月内过时这一事实进行处理/反应，将无法使用它构建更多应用程序，这意味着 Iframe 的所有问题都没有连接性因为 FBML 已经或将要处理。似乎转向 Iframe 是唯一合乎逻辑的选择，因为最终 FBML 将完全不受支持。

# c# - 我可以使用 LINQ 转换列表吗 进入数据集？

> ID：219808
> 
> 赞同：1
> 
> 时间：2008-10-20T20:33:54.963
> 
> 标签：c#, linq

我对 C#/.NET 中的 LINQ 完全陌生。我知道我可以使用它将 DataSet 转换为 Array/List，我可以朝相反的方向前进吗？

我正在使用 NPlot 生成捕获的价格图表，这些图表存储在一个列表中，其中 PriceInformation 是一个包含两个公共双精度和一个 DateTime 的类。

非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-20T20:54:19.053

有一个名为[CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb396189.aspx)的方法。只有当您已经拥有 IEnumerable(DataRow) 时，该方法才会有所帮助

以下是我的做法：

```
//extension method to convert my type to an object array.
public static object[] ToObjectArray(this MyClass theSource)
{
  object[] result = new object[3];
  result[0] = theSource.FirstDouble;
  result[1] = theSource.SecondDouble;
  result[2] = theSource.TheDateTime;

  return result;
}

//some time later, new up a dataTable, set it's columns, and then...

DataTable myTable = new DataTable()

DataColumn column1 = new DataColumn();
column1.DataType = GetType("System.Double");
column1.ColumnName = "FirstDouble";
myTable.Add(column1);

DataColumn column2 = new DataColumn();
column2.DataType = GetType("System.Double");
column2.ColumnName = "SecondDouble";
myTable.Add(column2);

DataColumn column3 = new DataColumn();
column3.DataType = GetType("System.DateTime");
column3.ColumnName = "TheDateTime";
myTable.Add(column3);

// ... Each Element becomes an array, and then a row
MyClassList.ForEach(x => myTable.Rows.Add(x.ToObjectArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T22:23:32.930

if`MyObjectType`是 linq 生成的实体，并且这些对象尚未关联到您可以调用的数据上下文

```
foreach( MyObjectType value in myList )
{
    dataContext.MyObkectTypes.InsertOnSubmit(value);
}
dataContext.SubmitChanges(); 
```

但是，此时 linq-to-sql 在批量更新方面效率并不高。如果 myList 是 1000 个项目，您将有 1000 个插入语句。

对于非常大的列表，您可以将其转换`List<MyObjectType>`为 xml 并使用 sql 服务器的能力使用 xml 批量插入。您可以将 sql server 存储过程附加到数据上下文。

```
string xml = CreateInsertXml( myList );
dataContext.usp_MyObjectsBulkInsertXml(xml); 
```

* * *

通过 xml 进行批量插入的 sql server 存储过程示例

```
-- XML is expected in the following format:
--
--  <List>
--      <Item>
--          <PlotID>1234</PlotID>
--          <XValue>2.4</SmsNumber>     
--          <YValue>3.2</ContactID>
--          <ResultDate>12 Mar 2008</ResultDate>
--      </Item>
--      <Item>
--          <PlotID>3241</PlotID>
--          <XValue>1.4</SmsNumber>     
--          <YValue>5.2</ContactID>
--          <ResultDate>3 Mar 2008</ResultDate>
--      </Item>
--  </List>

CREATE PROCEDURE [dbo].usp_MyObjectsBulkInsertXml
(
    @MyXML XML
)
AS

DECLARE @DocHandle INT
EXEC sp_xml_preparedocument @DocHandle OUTPUT, @MyXML

INSERT INTO MyTable (
    PlotID,
    XValue,
    YValue,
    ResultDate
) 
SELECT
    X.PlotID,
    X.XValue,
    X.YValue,
    X.ResultDate
FROM OPENXML(@DocHandle, N'/List/Item', 2)
WITH (
    PlotID INT,
    XValue FLOAT,
    YValue FLOAT,
    ResultDate DATETIME
) X

EXEC sp_xml_removedocument @DocHandle

GO 
```

# c# - 如果在 .NET 中将事件实现为委托，那么 .event IL 部分的意义何在？

> ID：219815
> 
> 赞同：7
> 
> 时间：2008-10-20T20:35:30.200
> 
> 标签：c#, .net, events, delegates, cil

我在 Stack Overflow 上看到了一些关于委托、事件和这两个功能的 .NET 实现的非常好的问题。特别是一个问题，“ [C# 事件如何在幕后工作？](https://stackoverflow.com/questions/213638/how-do-c-events-work-behind-the-scenes#213651) ”，产生了一个很好的答案，很好地解释了一些微妙的观点。

上述问题的答案说明了这一点：

> 当您声明类似字段的事件时......编译器会生成方法和私有字段（与委托的类型相同）。在类中，当您引用 ElementAddedEvent 时，您指的是该字段。在课堂之外，您指的是该领域

从同一问题（“ [Field-like events](http://msdn.microsoft.com/en-us/library/aa664455.aspx) ”）链接的 MSDN 文章补充说：

> 引发事件的概念完全等同于调用由事件表示的委托——因此，引发事件没有特殊的语言结构。

为了进一步检查，我构建了一个测试项目，以查看事件和委托编译到的 IL：

```
public class TestClass
{
    public EventHandler handler;
    public event EventHandler FooEvent;

    public TestClass()
    { }
} 
```

我希望委托字段`handler`和事件`FooEvent`编译成大致相同的 IL 代码，并使用一些额外的方法来包装对编译器生成的`FooEvent`字段的访问。但生成的 IL 并不完全符合我的预期：

```
.class public auto ansi beforefieldinit TestClass
    extends [mscorlib]System.Object
{
    .event [mscorlib]System.EventHandler FooEvent
    {
        .addon instance void TestClass::add_FooEvent(class [mscorlib]System.EventHandler)
        .removeon instance void TestClass::remove_FooEvent(class [mscorlib]System.EventHandler)
    }

    .method public hidebysig specialname rtspecialname instance void .ctor() cil managed
    {
        // Constructor IL hidden
    }

    .field private class [mscorlib]System.EventHandler FooEvent
    .field public class [mscorlib]System.EventHandler handler
} 
```

由于事件只不过是编译器生成的委托`add`和`remove`方法，我没想到会在 IL 中看到事件被视为更多。但是 add 和 remove 方法是在开头的部分中定义的`.event`，而不是`.method`像普通方法那样。

我的终极问题是：如果事件被简单地实现为具有访问器方法的委托，那么拥有`.event`IL 部分的意义何在？如果没有这个，它们不能通过使用`.method`部分在 IL 中实现吗？`.event`相当于`.method`？ _

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-20T20:41:25.320

我不确定这是否令人惊讶......比较属性与字段的相同（因为在与事件相同的函数之前的属性：通过访问器封装）：

```
.field public string Foo // public field
.property instance string Bar // public property
{
    .get instance string MyType::get_Bar()
    .set instance void MyType::set_Bar(string)
} 
```

另外 - 事件*没有*提及任何关于字段的内容；他们*只*定义访问器（添加/删除）。委托支持者是一个实现细节；恰好类似字段的事件将字段声明为支持成员 - 就​​像自动实现的属性将字段声明为支持成员一样。其他实现是可能的（并且非常常见，尤其是在表单等方面）。

其他常见的实现：

稀疏事件（控件等） - EventHandlerList（或类似的）：

```
// only one instance field no matter how many events;
// very useful if we expect most events to be unsubscribed
private EventHandlerList events = new EventHandlerList();
protected EventHandlerList Events {
    get { return events; } // usually lazy
}

// this code repeated per event
private static readonly object FooEvent = new object();
public event EventHandler Foo
{
    add { Events.AddHandler(FooEvent, value); }
    remove { Events.RemoveHandler(FooEvent, value); }
}
protected virtual void OnFoo()
{
    EventHandler handler = Events[FooEvent] as EventHandler;
    if (handler != null) handler(this, EventArgs.Empty);
} 
```

（以上几乎是获胜形式事件的支柱）

外观（虽然这让“发送者”有点困惑；一些中间代码通常很有帮助）：

```
private Bar wrappedObject; // via ctor
public event EventHandler SomeEvent
{
    add { wrappedObject.SomeOtherEvent += value; }
    remove { wrappedObject.SomeOtherEvent -= value; }
} 
```

（上面也可以用来有效地重命名一个事件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T20:41:34.870

事件与代表不同。事件封装了为事件添加/删除处理程序。处理程序由委托表示。

您*可以*为每个事件编写 AddClickHandler/RemoveClickHandler 等 - 但这会相对痛苦，并且不会让 VS 之类的工具轻松地将事件与其他任何事件分开。

这就像属性真的一样——你可以编写 GetSize/SetSize 等（就像你在 Java 中所做的那样），但是通过分离属性，可以使用语法快捷方式和更好的工具支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T20:55:07.680

拥有一对添加、删除、方法的事件的重点是**封装**。

大多数时候事件按原样使用，但其他时候您不想将附加到事件的委托存储在字段中，或者您想对添加或删除事件方法进行额外处理。

例如，实现[内存高效事件](http://vaultofthoughts.net/EventPropertiesMemoryEfficientEvents.aspx)的一种方法是将委托存储在字典而不是私有字段中，因为字段总是被分配，而字典仅在添加项目时才会增长。该模型与 Winforms 和 WPF 使用的模型相似，可以有效利用内存（winforms 和 WPF 使用键控字典来存储委托而不是列表）

# c# - 使用 WebBrowser 类时奇怪的弹出行为

> ID：219817
> 
> 赞同：1
> 
> 时间：2008-10-20T20:35:53.757
> 
> 标签：c#, browser

我的 C# 应用程序包括一个嵌入式 Web 浏览器，这可以通过[System.Windows.Forms.WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)类实现。用户可以使用该应用程序导航到网站，但是，当他们遇到包含弹出窗口的页面时，Internet Explorer 会打开弹出窗口。

有谁知道如何抑制这种行为？

注意：我是 C# 新手，所以请在回复时考虑到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-21T12:39:56.963

您是否希望在您的应用程序中主动阻止弹出窗口或处理它们？如果您想自定义阻塞，则必须实现[DWebBrowserEvents2 接口](http://msdn.microsoft.com/en-us/library/aa768283(VS.85).aspx)，特别是[NewWindow3 方法](http://msdn.microsoft.com/en-us/library/aa768288(VS.85).aspx)。NewWindow3 方法具有阻止窗口弹出的特定功能（即，将 Cancel 参数设置为 true）。如果您愿意，这些方法还可以让您显示自己的窗口，但您必须提供自己的表单来托管另一个 WebBrowser。

如果你想看到一些真正的 C# 源代码提供 WebBrowser 控件的高级功能，我不得不说[这篇关于 CodeProject](http://www.codeproject.com/KB/cpp/ExtendedWebBrowser.aspx)的文章提供了我所知道的关于 WebBrowser 控件的几乎所有内容。一定要下载源码！

@Kramii 是正确的，您还可以使用 NewWindow2 事件来防止弹出窗口。如果您要检查 URL 或其他有关导航的数据，NewWindow3 提供了其他参数，以实际有时会阻止并有时自己处理弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-21T12:25:29.673

IIRC，您可以在 WebBrowser 控件上捕获 NewWindow2 事件并设置 Cancel = true 以防止弹出窗口。

这篇文章可能会有所帮助：

[http://www.codeproject.com/KB/cpp/ExtendedWebBrowser.aspx#GoalBlock](http://www.codeproject.com/KB/cpp/ExtendedWebBrowser.aspx#GoalBlock)

# javascript - 如何在 ASP.NET AJAX 中做页面初始化功能？

> ID：219819
> 
> 赞同：2
> 
> 时间：2008-10-20T20:36:00.153
> 
> 标签：javascript, dom-events, asp.net-ajax

如果愿意，似乎可以做很多奇怪的事情，用于连接页面加载类型的事件。以下是一些具体问题：

1.  我知道自动挂钩`pageLoad`功能。还有其他喜欢的吗？
2.  我在哪里连接来自例如`Sys.Application.add_init`或的事件`Sys.WebForms.PageRequestManager.getInstance().addPageLoading`？
3.  前两个和 有什么区别`pageLoad`，如果有的话？
4.  更重要的是，在开始连接事件处理程序、处理页面等之前，确保 ASP.NET AJAX 文件全部加载的“正确”方法是什么？我目前的方法是使用自动连接`pageLoad`来连接其余部分，但这似乎有点 hacky。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T20:47:42.297

1.  内置的 pageLoad 函数只是 Sys.Application.load 事件的快捷方式。还有一个——pageUnload。[在此处](http://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx)查找更多信息。
2.  您几乎可以随时连接这些事件 - 使用 pageLoad 函数、调用脚本块内的 add_init/add_load 方法或从服务器端调用 ScriptManager.RegisterStartupScript。只需确保在表单标记中调用该 JavaScript（参见 #4）。默认情况下，所有这些事件都在页面加载后发生，因此您的代码应该已经执行过了。
3.  从技术上讲，使用 pageLoad 和 load 事件应该没有区别——第一个更容易连接。
4.  默认情况下，ASP.NET Ajax 脚本文件在表单标记的开头之后呈现。这意味着这些文件将在 form 标记中定义的任何其他 JavaScript 语句被执行之前被加载。

# excel - 在 VBScript 中使用 AcroEXch 创建新的 pdf 文档

> ID：219822
> 
> 赞同：2
> 
> 时间：2008-10-20T20:36:47.857
> 
> 标签：excel, acrobat

我希望将 excel 工作表自动转换为 pdf 文档（我不想每天早上手动将 excel 中生成的报告打印为 pdf 文档）。现在，我想在 excel 中创建一个按钮，它将运行宏以自动生成 pdf 文档，但最终不会使用此按钮。

我也是 VB 新手，但已经阅读了 AcroEXch SDK。似乎我应该使用 AcroEXch.PDDoc.Create，但这不太正确（因为我无法指定要打印/创建为新 pdf 文档的输入文件）。

关于如何创建全新的 pdf 文件的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-21T17:18:37.057

我想我找到了答案。这是工作中有人建议的一种解决方案（如果有人觉得它有用，那就太好了）。

AcroEXch 类（或我知道的一组方法）中没有可用的方法*将*非 pdf 文件转换为 pdf 文件。相反，您必须使用 pdf Distiller 首先将文件转换为 postscript，然后您可以使用 PDFDistiller 类写入 pdf。这是代码片段：

'1。打开正在转换为 pdf 的 excel：
xlReport.activate xlReport.range("a1").select

暗淡 PdfFilePath PdfFilePath = ""

暗淡 PsFilePath PsFilePath = ""

'2。将 Excel 文件打印到 postscript 文件 xlBook.activesheet.PrintOut , , 1, , "Adobe PDF on Ne01:" ,TRUE, , PsFilePath

Dim oDistiller Set oDistiller = CreateObject("PDFDistiller.PDFDistiller.1")

oDistiller.FileToPDF sPsFilePath, sPdfFilePath, ""

' 关闭 Excel - 不保存。'在 3 行下方注释了调试 xlApp.displayalerts=false xlApp.quit set xlApp=nothing

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T23:39:30.843

我不确切知道您的情况以及您可以使用哪些工具，但是阅读您的描述，听起来您只是想通过单击为您转换 Excel 文件。

如果您发布了是否拥有 Adob​​o Acrobat Professional、最新版本的 Excel 或市场上可用的其他转换器，将会很有帮助。

如果您安装了 Acrobat Pro，您的办公应用程序（word、excel、outlook 等）应该已经在工具栏中有一个“转换为 PDF”按钮，结合[Excel 命令行参数](http://office.microsoft.com/en-us/excel/HA101580301033.aspx#4)，它应该不会太难烹饪定期为您转换 excel 文件的 Windows 计划任务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-10-21T09:50:10.767

您是否考虑过CuteFTP 或PDFCreator，两者都是免费的。我已经成功地将 PDFCreator 与 VBA 一起使用，并且听说 CuteFTP 很好。

# c# - 来自 C# 客户端的多部分表单

> ID：219827
> 
> 赞同：53
> 
> 时间：2008-10-20T20:38:24.720
> 
> 标签：c#, http, multipartform-data

我正在尝试从 C# 客户端（Outlook 插件）在 php 应用程序中填写表单。我使用 Fiddler 从 php 应用程序中查看原始请求，并且表单作为 multipart/form 传输。不幸的是，.Net 并没有对这种类型的表单提供原生支持（WebClient 只有一种上传文件的方法）。有人知道图书馆或有一些代码来实现这一点吗？我想发布不同的值和另外（但只是有时）一个文件。

谢谢你的帮助，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2009-04-20T16:40:33.090

谢谢大家的回答！我最近不得不让这个工作，并大量使用你的建议。但是，有几个棘手的部分没有按预期工作，主要与实际包含文件有关（这是问题的重要部分）。这里已经有很多答案，但我认为这可能对将来的某人有用（我在网上找不到很多明确的例子）。我[写了一篇博文](http://www.briangrinstead.com/blog/multipart-form-post-in-c)，对其进行了更多解释。

基本上，我首先尝试将文件数据作为 UTF8 编码字符串传递，但我在编码文件时遇到了问题（它对于纯文本文件工作正常，但是在上传 Word 文档时，例如，如果我尝试保存使用 Request.Files[0].SaveAs() 传递到已发布表单的文件，在 Word 中打开文件无法正常工作。我发现如果您直接使用 Stream（而不是 StringBuilder）写入文件数据)，它按预期工作。此外，我做了一些修改，使我更容易理解。

顺便说一句，[Multipart Forms Request for Comments](http://www.ietf.org/rfc/rfc2388.txt)和[W3C Recommendation for mulitpart/form-data](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)是一些有用的资源，以防有人需要参考规范。

我将 WebHelpers 类更改为更小一点，接口也更简单，现在称为`FormUpload`. 如果您传递 a`FormUpload.FileParameter`您可以传递 byte[] 内容以及文件名和内容类型，如果您传递一个字符串，它将把它视为标准名称/值组合。

**这是 FormUpload 类：**

```
// Implements multipart/form-data POST in C# http://www.ietf.org/rfc/rfc2388.txt
// http://www.briangrinstead.com/blog/multipart-form-post-in-c
public static class FormUpload
{
    private static readonly Encoding encoding = Encoding.UTF8;
    public static HttpWebResponse MultipartFormDataPost(string postUrl, string userAgent, Dictionary<string, object> postParameters)
    {
        string formDataBoundary = String.Format("----------{0:N}", Guid.NewGuid());
        string contentType = "multipart/form-data; boundary=" + formDataBoundary;

        byte[] formData = GetMultipartFormData(postParameters, formDataBoundary);

        return PostForm(postUrl, userAgent, contentType, formData);
    }
    private static HttpWebResponse PostForm(string postUrl, string userAgent, string contentType, byte[] formData)
    {
        HttpWebRequest request = WebRequest.Create(postUrl) as HttpWebRequest;

        if (request == null)
        {
            throw new NullReferenceException("request is not a http request");
        }

        // Set up the request properties.
        request.Method = "POST";
        request.ContentType = contentType;
        request.UserAgent = userAgent;
        request.CookieContainer = new CookieContainer();
        request.ContentLength = formData.Length;

        // You could add authentication here as well if needed:
        // request.PreAuthenticate = true;
        // request.AuthenticationLevel = System.Net.Security.AuthenticationLevel.MutualAuthRequested;
        // request.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(System.Text.Encoding.Default.GetBytes("username" + ":" + "password")));

        // Send the form data to the request.
        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(formData, 0, formData.Length);
            requestStream.Close();
        }

        return request.GetResponse() as HttpWebResponse;
    }

    private static byte[] GetMultipartFormData(Dictionary<string, object> postParameters, string boundary)
    {
        Stream formDataStream = new System.IO.MemoryStream();
        bool needsCLRF = false;

        foreach (var param in postParameters)
        {
            // Thanks to feedback from commenters, add a CRLF to allow multiple parameters to be added.
            // Skip it on the first parameter, add it to subsequent parameters.
            if (needsCLRF)
                formDataStream.Write(encoding.GetBytes("\r\n"), 0, encoding.GetByteCount("\r\n"));

            needsCLRF = true;

            if (param.Value is FileParameter)
            {
                FileParameter fileToUpload = (FileParameter)param.Value;

                // Add just the first part of this param, since we will write the file data directly to the Stream
                string header = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"; filename=\"{2}\";\r\nContent-Type: {3}\r\n\r\n",
                    boundary,
                    param.Key,
                    fileToUpload.FileName ?? param.Key,
                    fileToUpload.ContentType ?? "application/octet-stream");

                formDataStream.Write(encoding.GetBytes(header), 0, encoding.GetByteCount(header));

                // Write the file data directly to the Stream, rather than serializing it to a string.
                formDataStream.Write(fileToUpload.File, 0, fileToUpload.File.Length);
            }
            else
            {
                string postData = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"\r\n\r\n{2}",
                    boundary,
                    param.Key,
                    param.Value);
                formDataStream.Write(encoding.GetBytes(postData), 0, encoding.GetByteCount(postData));
            }
        }

        // Add the end of the request.  Start with a newline
        string footer = "\r\n--" + boundary + "--\r\n";
        formDataStream.Write(encoding.GetBytes(footer), 0, encoding.GetByteCount(footer));

        // Dump the Stream into a byte[]
        formDataStream.Position = 0;
        byte[] formData = new byte[formDataStream.Length];
        formDataStream.Read(formData, 0, formData.Length);
        formDataStream.Close();

        return formData;
    }

    public class FileParameter
    {
        public byte[] File { get; set; }
        public string FileName { get; set; }
        public string ContentType { get; set; }
        public FileParameter(byte[] file) : this(file, null) { }
        public FileParameter(byte[] file, string filename) : this(file, filename, null) { }
        public FileParameter(byte[] file, string filename, string contenttype)
        {
            File = file;
            FileName = filename;
            ContentType = contenttype;
        }
    }
} 
```

**这是调用代码，它上传一个文件和一些正常的post参数：**

```
// Read file data
FileStream fs = new FileStream("c:\\people.doc", FileMode.Open, FileAccess.Read);
byte[] data = new byte[fs.Length];
fs.Read(data, 0, data.Length);
fs.Close();

// Generate post objects
Dictionary<string, object> postParameters = new Dictionary<string, object>();
postParameters.Add("filename", "People.doc");
postParameters.Add("fileformat", "doc");
postParameters.Add("file", new FormUpload.FileParameter(data, "People.doc", "application/msword"));

// Create request and receive response
string postURL = "http://localhost";
string userAgent = "Someone";
HttpWebResponse webResponse = FormUpload.MultipartFormDataPost(postURL, userAgent, postParameters);

// Process response
StreamReader responseReader = new StreamReader(webResponse.GetResponseStream());
string fullResponse = responseReader.ReadToEnd();
webResponse.Close();
Response.Write(fullResponse); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-10-20T21:29:14.367

这是从我编写的一些示例代码中剪切和粘贴的，希望它应该提供基础知识。目前只支持文件数据和表单数据。

```
public class PostData
{

    private List<PostDataParam> m_Params;

    public List<PostDataParam> Params
    {
        get { return m_Params; }
        set { m_Params = value; }
    }

    public PostData()
    {
        m_Params = new List<PostDataParam>();

        // Add sample param
        m_Params.Add(new PostDataParam("email", "MyEmail", PostDataParamType.Field));
    }

    /// <summary>
    /// Returns the parameters array formatted for multi-part/form data
    /// </summary>
    /// <returns></returns>
    public string GetPostData()
    {
        // Get boundary, default is --AaB03x
        string boundary = ConfigurationManager.AppSettings["ContentBoundary"].ToString();

        StringBuilder sb = new StringBuilder();
        foreach (PostDataParam p in m_Params)
        {
            sb.AppendLine(boundary);

            if (p.Type == PostDataParamType.File)
            {
                sb.AppendLine(string.Format("Content-Disposition: file; name=\"{0}\"; filename=\"{1}\"", p.Name, p.FileName));
                sb.AppendLine("Content-Type: text/plain");
                sb.AppendLine();
                sb.AppendLine(p.Value);                 
            }
            else
            {
                sb.AppendLine(string.Format("Content-Disposition: form-data; name=\"{0}\"", p.Name));
                sb.AppendLine();
                sb.AppendLine(p.Value);
            }
        }

        sb.AppendLine(boundary);

        return sb.ToString();           
    }
}

public enum PostDataParamType
{
    Field,
    File
}

public class PostDataParam
{

    public PostDataParam(string name, string value, PostDataParamType type)
    {
        Name = name;
        Value = value;
        Type = type;
    }

    public string Name;
    public string FileName;
    public string Value;
    public PostDataParamType Type;
} 
```

要发送数据，您需要：

```
HttpWebRequest oRequest = null;
oRequest = (HttpWebRequest)HttpWebRequest.Create(oURL.URL);
oRequest.ContentType = "multipart/form-data";                       
oRequest.Method = "POST";
PostData pData = new PostData();

byte[] buffer = encoding.GetBytes(pData.GetPostData());

// Set content length of our data
oRequest.ContentLength = buffer.Length;

// Dump our buffered postdata to the stream, booyah
oStream = oRequest.GetRequestStream();
oStream.Write(buffer, 0, buffer.Length);
oStream.Close();

// get the response
oResponse = (HttpWebResponse)oRequest.GetResponse(); 
```

希望那很清楚，我已经从几个来源中剪切和粘贴以使其更整洁。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-08-14T13:45:16.650

使用 .NET 4.5，您目前可以使用 System.Net.Http 命名空间。下面是使用多部分表单数据上传单个文件的示例。

```
using System;
using System.IO;
using System.Net.Http;

namespace HttpClientTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var client = new HttpClient();
            var content = new MultipartFormDataContent();
            content.Add(new StreamContent(File.Open("../../Image1.png", FileMode.Open)), "Image", "Image.png");
            content.Add(new StringContent("Place string content here"), "Content-Id in the HTTP"); 
            var result = client.PostAsync("https://hostname/api/Account/UploadAvatar", content);
            Console.WriteLine(result.Result.ToString());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-12-11T12:47:45.050

以 dnolans 示例为基础，这是我实际可以使用的版本（边界有一些错误，未设置编码）:-)

要发送数据：

```
HttpWebRequest oRequest = null;
oRequest = (HttpWebRequest)HttpWebRequest.Create("http://you.url.here");
oRequest.ContentType = "multipart/form-data; boundary=" + PostData.boundary;
oRequest.Method = "POST";
PostData pData = new PostData();
Encoding encoding = Encoding.UTF8;
Stream oStream = null;

/* ... set the parameters, read files, etc. IE:
   pData.Params.Add(new PostDataParam("email", "example@example.com", PostDataParamType.Field));
   pData.Params.Add(new PostDataParam("fileupload", "filename.txt", "filecontents" PostDataParamType.File));
*/

byte[] buffer = encoding.GetBytes(pData.GetPostData());

oRequest.ContentLength = buffer.Length;

oStream = oRequest.GetRequestStream();
oStream.Write(buffer, 0, buffer.Length);
oStream.Close();

HttpWebResponse oResponse = (HttpWebResponse)oRequest.GetResponse(); 
```

PostData 类应如下所示：

```
public class PostData
{
    // Change this if you need to, not necessary
    public static string boundary = "AaB03x";

    private List<PostDataParam> m_Params;

    public List<PostDataParam> Params
    {
        get { return m_Params; }
        set { m_Params = value; }
    }

    public PostData()
    {
        m_Params = new List<PostDataParam>();
    }

    /// <summary>
    /// Returns the parameters array formatted for multi-part/form data
    /// </summary>
    /// <returns></returns>
    public string GetPostData()
    {
        StringBuilder sb = new StringBuilder();
        foreach (PostDataParam p in m_Params)
        {
            sb.AppendLine("--" + boundary);

            if (p.Type == PostDataParamType.File)
            {
                sb.AppendLine(string.Format("Content-Disposition: file; name=\"{0}\"; filename=\"{1}\"", p.Name, p.FileName));
                sb.AppendLine("Content-Type: application/octet-stream");
                sb.AppendLine();
                sb.AppendLine(p.Value);
            }
            else
            {
                sb.AppendLine(string.Format("Content-Disposition: form-data; name=\"{0}\"", p.Name));
                sb.AppendLine();
                sb.AppendLine(p.Value);
            }
        }

        sb.AppendLine("--" + boundary + "--");

        return sb.ToString();
    }
}

public enum PostDataParamType
{
    Field,
    File
}

public class PostDataParam
{
    public PostDataParam(string name, string value, PostDataParamType type)
    {
        Name = name;
        Value = value;
        Type = type;
    }

    public PostDataParam(string name, string filename, string value, PostDataParamType type)
    {
        Name = name;
        Value = value;
        FileName = filename;
        Type = type;
    }

    public string Name;
    public string FileName;
    public string Value;
    public PostDataParamType Type;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-06-24T19:31:45.613

在我使用的 .NET 版本中，您还必须这样做：

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

如果您不这样做，`HttpWebRequest`该类将自动添加`Expect:100-continue`请求标头，这会破坏一切。

我也学到了你必须有正确数量的破折号的艰难方法。无论您说的是标题中的“边界”，`Content-Type`都必须以两个破折号开头

```
--THEBOUNDARY 
```

最后

```
--THEBOUNDARY-- 
```

与示例代码中的完全一样。如果您的边界是很多破折号后跟一个数字，那么通过查看代理服务器中的 http 请求，这个错误不会很明显

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-07-09T10:16:15.673

感谢您的代码，它为我节省了很多时间（包括 except100 错误！）。

无论如何，我在代码中发现了一个错误，这里：

```
formDataStream.Write(encoding.GetBytes(postData), 0, postData.Length); 
```

如果您的 POST 数据是 utf-16，postData.Length 将返回字符数而不是字节数。这将截断正在发布的数据（例如，如果您有 2 个编码为 utf-16 的字符，它们占用 4 个字节，但 postData.Length 会说它占用 2 个字节，并且您丢失了已发布的 2 个最终字节数据）。

解决方案 - 将该行替换为：

```
byte[] aPostData=encoding.GetBytes(postData);
formDataStream.Write(aPostData, 0, aPostData.Length); 
```

使用它，长度由 byte[] 的大小而不是字符串大小计算。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-12-04T01:10:56.173

对之前的类进行了一点优化。在这个版本中，文件并没有完全加载到内存中。

安全建议：缺少边界检查，如果文件包含边界，它将崩溃。

```
namespace WindowsFormsApplication1
{
    public static class FormUpload
    {
        private static string NewDataBoundary()
        {
            Random rnd = new Random();
            string formDataBoundary = "";
            while (formDataBoundary.Length < 15)
            {
                formDataBoundary = formDataBoundary + rnd.Next();
            }
            formDataBoundary = formDataBoundary.Substring(0, 15);
            formDataBoundary = "-----------------------------" + formDataBoundary;
            return formDataBoundary;
        }

        public static HttpWebResponse MultipartFormDataPost(string postUrl, IEnumerable<Cookie> cookies, Dictionary<string, string> postParameters)
        {
            string boundary = NewDataBoundary();

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(postUrl);

            // Set up the request properties
            request.Method = "POST";
            request.ContentType = "multipart/form-data; boundary=" + boundary;
            request.UserAgent = "PhasDocAgent 1.0";
            request.CookieContainer = new CookieContainer();

            foreach (var cookie in cookies)
            {
                request.CookieContainer.Add(cookie);
            }

            #region WRITING STREAM
            using (Stream formDataStream = request.GetRequestStream())
            {
                foreach (var param in postParameters)
                {
                    if (param.Value.StartsWith("file://"))
                    {
                        string filepath = param.Value.Substring(7);

                        // Add just the first part of this param, since we will write the file data directly to the Stream
                        string header = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"; filename=\"{2}\";\r\nContent-Type: {3}\r\n\r\n",
                            boundary,
                            param.Key,
                            Path.GetFileName(filepath) ?? param.Key,
                            MimeTypes.GetMime(filepath));

                        formDataStream.Write(Encoding.UTF8.GetBytes(header), 0, header.Length);

                        // Write the file data directly to the Stream, rather than serializing it to a string.

                        byte[] buffer = new byte[2048];

                        FileStream fs = new FileStream(filepath, FileMode.Open);

                        for (int i = 0; i < fs.Length; )
                        {
                            int k = fs.Read(buffer, 0, buffer.Length);
                            if (k > 0)
                            {
                                formDataStream.Write(buffer, 0, k);
                            }
                            i = i + k;
                        }
                        fs.Close();
                    }
                    else
                    {
                        string postData = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"\r\n\r\n{2}\r\n",
                            boundary,
                            param.Key,
                            param.Value);
                        formDataStream.Write(Encoding.UTF8.GetBytes(postData), 0, postData.Length);
                    }
                }
                // Add the end of the request
                byte[] footer = Encoding.UTF8.GetBytes("\r\n--" + boundary + "--\r\n");
                formDataStream.Write(footer, 0, footer.Length);
                request.ContentLength = formDataStream.Length;
                formDataStream.Close();
            }
            #endregion

            return request.GetResponse() as HttpWebResponse;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-08T19:58:56.487

我需要模拟浏览器登录到网站来获取登录cookie，登录表单是multipart/form-data。

我从这里的其他答案中获取了一些线索，然后尝试让我自己的场景发挥作用。在它正常工作之前需要一些令人沮丧的试验和错误，但这里是代码：

```
 public static class WebHelpers
    {
        /// <summary>
        /// Post the data as a multipart form
        /// </summary>
       public static HttpWebResponse MultipartFormDataPost(string postUrl, string userAgent, Dictionary<string, string> values)
       {
           string formDataBoundary = "---------------------------" + WebHelpers.RandomHexDigits(12);
           string contentType = "multipart/form-data; boundary=" + formDataBoundary;

           string formData = WebHelpers.MakeMultipartForm(values, formDataBoundary);
           return WebHelpers.PostForm(postUrl, userAgent, contentType, formData);
       }

        /// <summary>
        /// Post a form
        /// </summary>
        public static HttpWebResponse PostForm(string postUrl, string userAgent, string contentType, string formData)
        {
            HttpWebRequest request = WebRequest.Create(postUrl) as HttpWebRequest;

            if (request == null)
            {
                throw new NullReferenceException("request is not a http request");
            }

            // Add these, as we're doing a POST
            request.Method = "POST";
            request.ContentType = contentType;
            request.UserAgent = userAgent;
            request.CookieContainer = new CookieContainer();

            // We need to count how many bytes we're sending. 
            byte[] postBytes = Encoding.UTF8.GetBytes(formData);
            request.ContentLength = postBytes.Length;

            using (Stream requestStream = request.GetRequestStream())
            {
                // Push it out there
                requestStream.Write(postBytes, 0, postBytes.Length);
                requestStream.Close();
            }

            return request.GetResponse() as HttpWebResponse;
        }

        /// <summary>
        /// Generate random hex digits 
        /// </summary>
        public static string RandomHexDigits(int count)
        {
            Random random = new Random();
            StringBuilder result = new StringBuilder();
            for (int i = 0; i < count; i++)
            {
                int digit = random.Next(16);
                result.AppendFormat("{0:x}", digit);
            }

            return result.ToString();
        }

        /// <summary>
        /// Turn the key and value pairs into a multipart form
        /// </summary>
        private static string MakeMultipartForm(Dictionary<string, string> values, string boundary)
        {
            StringBuilder sb = new StringBuilder();

            foreach (var pair in values)
            {
                sb.AppendFormat("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"\r\n\r\n{2}\r\n", boundary, pair.Key, pair.Value);
            }

            sb.AppendFormat("--{0}--\r\n", boundary);

            return sb.ToString();    
        }
    }
} 
```

它不处理文件数据，只处理表格，因为这就是我所需要的。我是这样打电话的：

```
 try
    {
        using (HttpWebResponse response = WebHelpers.MultipartFormDataPost(postUrl, UserAgentString, this.loginForm)) 
        {
            if (response != null)
            {
                Cookie loginCookie = response.Cookies["logincookie"];
                ..... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-04T13:31:43.360

下面是我正在使用的代码

```
 //This URL not exist, it's only an example.
    string url = "http://myBox.s3.amazonaws.com/";
    //Instantiate new CustomWebRequest class
    CustomWebRequest wr = new CustomWebRequest(url);
    //Set values for parameters
    wr.ParamsCollection.Add(new ParamsStruct("key", "${filename}"));
    wr.ParamsCollection.Add(new ParamsStruct("acl", "public-read"));
    wr.ParamsCollection.Add(new ParamsStruct("success_action_redirect", "http://www.yahoo.com"));
    wr.ParamsCollection.Add(new ParamsStruct("x-amz-meta-uuid", "14365123651274"));
    wr.ParamsCollection.Add(new ParamsStruct("x-amz-meta-tag", ""));
    wr.ParamsCollection.Add(new ParamsStruct("AWSAccessKeyId", "zzzz"));            
    wr.ParamsCollection.Add(new ParamsStruct("Policy", "adsfadsf"));
    wr.ParamsCollection.Add(new ParamsStruct("Signature", "hH6lK6cA="));
    //For file type, send the inputstream of selected file
    StreamReader sr = new StreamReader(@"file.txt");
    wr.ParamsCollection.Add(new ParamsStruct("file", sr, ParamsStruct.ParamType.File, "file.txt"));

    wr.PostData(); 
```

从以下链接我下载了相同的代码 [http://www.codeproject.com/KB/cs/multipart_request_C_.aspx](http://www.codeproject.com/KB/cs/multipart_request_C_.aspx)

任何帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-17T12:14:17.370

我的实现

```
/// <summary>
/// Sending file via multipart\form-data
/// </summary>
/// <param name="url">URL for send</param>
/// <param name="file">Local file path</param>
/// <param name="paramName">Request file param</param>
/// <param name="contentType">Content-Type file headr</param>
/// <param name="nvc">Additional post params</param>
private static string httpUploadFile(string url, string file, string paramName, string contentType, NameValueCollection nvc)
{
    //delimeter
    var boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");

    //creating request
    var wr = (HttpWebRequest)WebRequest.Create(url);
    wr.ContentType = "multipart/form-data; boundary=" + boundary;
    wr.Method = "POST";
    wr.KeepAlive = true;

    //sending request
    using(var requestStream = wr.GetRequestStream())
    {
        using (var requestWriter = new StreamWriter(requestStream, Encoding.UTF8))
        {
            //params
            const string formdataTemplate = "Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";
            foreach (string key in nvc.Keys)
            {
                requestWriter.Write(boundary);
                requestWriter.Write(String.Format(formdataTemplate, key, nvc[key]));
            }
            requestWriter.Write(boundary);

            //file header
            const string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";
            requestWriter.Write(String.Format(headerTemplate, paramName, file, contentType));

            //file content
            using (var fileStream = new FileStream(file, FileMode.Open, FileAccess.Read))
            {
                fileStream.CopyTo(requestStream);
            }

            requestWriter.Write("\r\n--" + boundary + "--\r\n");
        }
    }

    //reading response
    try
    {
        using (var wresp = (HttpWebResponse)wr.GetResponse())
        {
            if (wresp.StatusCode == HttpStatusCode.OK)
            {
                using (var responseStream = wresp.GetResponseStream())
                {
                    if (responseStream == null)
                        return null;
                    using (var responseReader = new StreamReader(responseStream))
                    {
                        return responseReader.ReadToEnd();
                    }
                }
            }

            throw new ApplicationException("Error while upload files. Server status code: " + wresp.StatusCode.ToString());
        }
    }
    catch (Exception ex)
    {
        throw new ApplicationException("Error while uploading file", ex);
    }
} 
```

# sql-server-2005 - IDENTITY 列的种子值和增量值在哪里？

> ID：219833
> 
> 赞同：0
> 
> 时间：2008-10-20T20:40:26.337
> 
> 标签：sql-server-2005, metadata, system-views

我正在使用 sys.* 视图收集元数据，根据文档， sys.identity_columns 视图将像这样返回种子和增量值。

```
CREATE TABLE ident_test (
  test_id int IDENTITY(1000,10),
  other int
)

SELECT name, seed_value, increment_value
  FROM sys.identity_columns
 WHERE object_id = OBJECT_ID( 'ident_test' ) 
```

但是，上面的查询只返回一列。只有我吗？

（注意：我不得不从早期版本中改变这个问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T20:48:50.300

您不应该像这样反转 from 并加入吗：

```
SELECT c.name, i.seed_value, i.increment_value
from sys.identity_columns i
join sys.columns c
    ON i.object_id = c.object_id
   AND i.column_id = c.column_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T20:46:44.903

你确定你是在一个带有`IDENTITY`列的表的数据库中运行它吗？

```
SELECT c.name, i.seed_value, i.increment_value
FROM sys.columns c
INNER JOIN sys.identity_columns i
    ON i.object_id = c.object_id
    AND i.column_id = c.column_id 
```

在具有几个身份的常规生产数据库中为我返回行。

使用 a`LEFT JOIN`返回这些行以及许多不是`IDENTITY`

我在另一个数据库上运行它，我注意到一些`NULL`s 被返回（即使在这种`INNER JOIN`情况下）。这是因为有些列在`VIEW`s 中。

尝试添加：

```
INNER JOIN sys.tables t
ON t.object_id = c.object_id 
```

仅过滤到表中的实际`IDENTITY`列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T20:50:56.863

您缺少 Where 子句。您的查询实际上是在说“给我所有 sys.columns 以及您拥有的 sys.identity_columns 中的任何匹配行（但如果没有匹配的行，则给我 null）”。

通过在下面添加 Where 子句，您可以将其更改为仅返回返回完全匹配的位置，这实际上与此实例中的内部连接相同。

SELECT c.name, i.seed_value, i.increment_value FROM sys.columns c LEFT OUTER JOIN sys.identity_columns i ON i.object_id = c.object_id AND i.column_id = c.column_id 其中 I.seed_value 不为空

所以我认为你的数据是正确的，但没有结果可以查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T21:40:58.290

您的查询返回我所期望的[见下文]；它返回关于表 (ident_test) 中单个标识列 (test_ID) 的单个元数据行，其他列 (other) 在 sys.identity_column 中没有元数据，因为它不是标识。

```
选择名称、种子值、增量值
  FROM sys.identity_columns
 WHERE object_id = OBJECT_ID('ident_test')

选择名称、is_identity、is_nullable
来自 sys.columns
WHERE object_id = OBJECT_ID('ident_test')

```

这使

```
名称种子值增量值
-----------------------------------------
test_id 1000 10
（1 行受影响）

名称 is_identity is_nullable
-------------------------------------
test_id 1 0
其他 0 1

（2 行受影响）

```

# sql-server-2005 - “DBMS 返回了一个未指定的错误。命令代码是 193。”是什么意思？意思是？

> ID：219844
> 
> 赞同：0
> 
> 时间：2008-10-20T20:44:08.013
> 
> 标签：sql-server-2005, coldfusion

任何人都知道这对 MS SQL Server 意味着什么？我也从 ColdFusion 调用它，尽管我猜这没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T21:41:49.410

谷歌暗示错误 193 是服务的问题。每个查询都会发生这种情况，还是只有一个？您可以从 SQL Management Studio 连接吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-10T23:08:26.977

您是否使用自定义 JDBC 驱动程序？试试 CF 自带的那个。

# wpf - 如何在部分信任中概述 UIElement？

> ID：219846
> 
> 赞同：0
> 
> 时间：2008-10-20T20:46:10.053
> 
> 标签：wpf, uielement

我之前问过一个[类似的问题](https://stackoverflow.com/questions/188844/how-can-i-highlightoutline-a-visual-object-in-wpf)，但我没有指定这需要在部分信任模式下工作。不幸的是，Partial-Trust 中不允许两个正确答案（使用`UIElement.BitmapEffect`or ），因为它需要.`UIElement.Effect``UIPermissionWindow.AllWindows`

有谁知道在 Partial-Trust 应用程序中做类似于[OuterGlowBitmapEffect的方法？](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.outerglowbitmapeffect.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T21:13:38.003

如果您需要一个矩形轮廓，您可以附加一个带有简单矩形的[装饰器。](http://msdn.microsoft.com/en-us/library/ms743737(VS.85).aspx)不过，它不会有您正在寻找的发光效果。

如果您需要非矩形轮廓，您仍然可以使用 Adorner，但您还需要根据对象上的 visualBrush 指定不透明蒙版。您还必须使装饰器比源视觉对象大一点，以使其看起来像围绕对象而不是重叠。

如果你想花哨，你可以将装饰器封装在一个附加的依赖属性中，然后将它附加到你需要勾勒的任何视觉对象上。

如果您不想打扰装饰器，您可以为您提供两个单独的视觉模板 - 一个带有预先创建的轮廓，一个没有并根据需要切换它们。但是，这需要您预先知道需要勾勒出哪些 cvisuals 以及它们的风格。当然，您可以通过数据绑定使其非常灵活，但它仍然不是您问题的通用解决方案。

# datamapper - 在 DataMapper 中使用的类模型

> ID：219847
> 
> 赞同：0
> 
> 时间：2008-10-20T20:46:33.377
> 
> 标签：datamapper

在实现 DataMapper 模式时，我在 DataMapper 包中实现的类模型应该更接近域模型还是数据模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-08T18:12:26.960

数据映射器的全部意义在于使映射透明。所以你的类应该是根据对象模型来构建的。从存储（无论是数据库还是其他）来回映射它的血腥细节都驻留在映射器中。

# c# - 类成员访问修饰符

> ID：219851
> 
> 赞同：0
> 
> 时间：2008-10-20T20:47:35.807
> 
> 标签：c#, .net-3.5

我想要一个类的方法：“ `One`”（“ `AccessibleWithinSameNamespace`”）可以被该类访问：“ `Two`”，而不需要“ `Two`”扩展“ `One`”。

两个类都在同一个命名空间中，所以我想也许有一个访问修饰符可以模拟“*受保护*”修改器，但是对于命名空间。

一些代码：

```
namespace Test
{
    class One
    {
        public void AccessibleToAll()
        {
        }

        protected void AccessibleWithinSameNamespace()
        {
            // I am not public

            // I can be accessed from other classes
            // within the same namespace of my class
        }
    }
}

namespace Test
{
    class Two
    {
        public Two()
        {
            One one = new One();

            // I am able to access this method because my class
            // is in the same namespace as the class: "One"
            one.AccessibleWithinSameNamespace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T20:49:25.367

如果两个类都在同一个程序集中，则可以使用[internal修饰符。](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)

用你的例子：

```
namespace Test
{
    class One
    {
        public void AccessibleToAll()
        {
        }

        internal void AccessibleWithinSameNamespace()
        {
            // I am not public

            // I can be accessed from other classes
            // within the same namespace of my class
        }
    }
}

namespace Test
{
    class Two
    {
        public Two()
        {
            One one = new One();

            // I am able to access this method because my class
            // is in the same namespace as the class: "One"
            one.AccessibleWithinSameNamespace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T20:57:35.570

C# 和 .NET 没有“在同一个命名空间内”的概念。内部是最接近的等价物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-20T21:01:59.523

问题不在于命名空间的访问修饰符，而是函数的访问修饰符。“受保护”意味着它可以被子类访问，而不是其他类，即使它们在同一个命名空间中。

您有多种解决方案可供选择... 1\. 您可以将函数的访问修饰符设置为“内部”，然后将所有类/函数设置在同一个程序集中（或标有一些很酷的程序集标志，以便它们假装在同一个程序集中）程序集）可以访问它 2\. 使“TWO”成为“One”的子类，然后两个可以调用它（但不能通过“One”的实例，如同一代码所示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T21:08:06.343

由于命名空间是任意的——它们不能真正成为安全边界。任何人都可以创建重用命名空间 Test 的程序集。

您可以做的最好的事情是使用已经提到的内部组件（如果需要，还可以使用 InternalsVisibleTo）[来限制。](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

编辑：InternalsVisibleTo 允许*其他*程序集访问[内部](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)方法和类，就好像它们在同一个程序集中一样。您可以对其他程序集进行强命名，从而提供安全性。这通常用于测试程序集以测试主程序集的内部成员，而不会通过包含测试代码来使主程序集膨胀。

请注意，VB.NET 编译器不尊重 InternalsVisibleTo - 因此 VB 程序集无法调用 InternalsVisibleTo 属性程序集。但是，C# 可以调用具有相应 InternalsVisibleTo 属性的 VB.NET 程序集。

# sharepoint - SharePoint 中 Excel Services 的权限问题

> ID：219856
> 
> 赞同：0
> 
> 时间：2008-10-20T20:48:56.803
> 
> 标签：sharepoint, excel

我正在尝试在 SharePoint (MOSS) 中实现 Excel Services 报告解决方案。由于源数据是 SharePoint 列表，因此这个问题令人倍感沮丧。尽管我已经启用了几乎所有可见的东西，但我一直遇到权限问题。

第一个错误是关于刷新外部数据——它不是（真正的）外部数据，但这是一个语义点。

第二个错误是一个神秘的“Excel Web Access”问题。

有人让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T21:25:55.717

可能是几个不同的问题。第一种可能性是 Excel Services 不支持使用 SharePoint 列表数据（我知道这很疯狂）......尽管这仅适用于您尝试使用从列表中选择导出到 Excel 时获得的嵌入式数据源类型（再次，我知道疯了）。

然而，解决此问题的一种简单方法是使用 SP Web 服务来获取列表数据。不久前，我有一个由 MS 的某个人编写的宏，它可以自动进行这种转换，如果我能找到一个链接，我会发布它。如果您使用的是 Kerberos，那么您的任务可能已经完成。如果使用 NTLM，那么您可能还需要配置 SSO 应用程序，以便可以将正确的凭据传递给 Web 服务（或任何其他数据源）。[这里](http://technet.microsoft.com/en-us/library/cc263517.aspx)有一个非常好的步骤。

[可以在此处](http://blogs.msdn.com/luisbeonservices/archive/2006/09/28/consuming-sharepoint-lists-in-excel-services.aspx)找到一种通过 UDF（如果受信任，自定义代码可以通过 Excel Services 部署和提供）使其工作的“hack” 。

# javascript - 客户端通知，我应该使用 AJAX 推送还是轮询？

> ID：219868
> 
> 赞同：33
> 
> 时间：2008-10-20T20:52:02.930
> 
> 标签：javascript, ajax, web-services, server-push

我正在开发一个简单的通知服务，该服务将用于向浏览网站的用户传递消息。通知不必实时发送，但如果它们发生的频率高于每 5 分钟一次，则可能会带来更好的用户体验。发送到客户端和从客户端发送的数据不是很大，它是一个直接的数据库查询来检索数据。

在阅读有关该主题的其他对话时，似乎 AJAX 推送会导致更高的服务器负载。由于我可以容忍更长的服务器延迟，因此值得让服务器推送通知或简单地轮询。

实现推送场景并不难，所以我想我会在这里看到意见。

谢谢你的帮助。

编辑：我研究了一个简单的 AJAX 推送，并根据Mike Purvis的这篇[文章实现了一个简单的演示。](http://uwmike.com/articles/2008/01/22/browser-data-push/#more-384)初始版本的客户端负载相当低，约为 5k，预计会在相当长的一段时间内保持这种状态。

* * *

谢谢大家的回复。我决定使用轮询解决方案，但将其全部包装在一个实用程序库中，这样如果他们以后想更改它就更容易了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T05:25:15.093

我很惊讶这里没有人提到长轮询。长轮询意味着保持打开的连接更长的时间（比如 30-60 秒），一旦它关闭，再次重新打开它，并简单地让套接字/连接监听响应。这导致更少的连接（但更长的连接），并且意味着响应几乎是即时的（有些可能必须等待新的轮询连接）。我想补充一点，结合 NodeJS 之类的技术，这会产生一个非常高效且资源轻的解决方案，即 100% 兼容所有主要浏览器和版本的浏览器，并且不需要任何额外的技术，如 Comet 或闪光。

我意识到这是一个老问题，但认为提供这些信息可能仍然有用:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-31T00:52:47.637

绝对使用推它更酷。如果您只想要简单的通知，我会使用[StreamHub Push Server](http://streamhub.blogspot.com/)之类的东西来为您完成繁重的工作。开发您自己的 Ajax Push 功能是一条非常棘手和崎岖的道路——您必须让它在所有浏览器中工作，然后处理防火墙和代理，杀死保持连接等......为什么要重新发明轮子。此外，它的占用空间也非常低，不到 10K，因此如果这是您的优先事项，它应该适合您。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-21T02:07:38.487

两者都有不同的要求并针对不同的场景。

如果您需要**实时更新**，例如在线聊天，推送是必须的。

但是，如果**刷新周期很大**，就像您的情况（5 分钟）一样，那么 pool 是合适的解决方案。在这种情况下，推送将需要来自客户端和服务器的大量资源。

**提示！**尽量使检查池的页面快速而干净，这样它就不会在每个请求中消耗服务器中的大量资源。我通常做的是在内存中保留一个标志（如在会话变量中），说明池是否为空......所以，只有当池不为空时，我才会在池中查看。当池为空时（大多数情况下），页面请求运行得非常快。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-20T21:00:08.607

因为使用推送需要在您的服务器和每个客户端之间维护一个开放的 HTTP 连接，所以我也会选择 poll ——这不仅会消耗大量服务器资源，而且要更加棘手按照提到的matt b实施。

我的轮询经验是，如果您在一个足够繁忙的站点上有足够频繁的轮询间隔，您的 Web 服务器日志可能很快就会被轮询请求淹没。

**编辑（2017）**：我想说你现在的选择是在 websockets 和长轮询之间（在另一个答案中提到）。听起来长轮询可能是正确的选择，具体取决于问题提到不需要实时接收通知的方式，不频繁的轮询周期很容易实现，并且不应该对您的服务器造成很大负担. Websockets 很酷，并且是当今许多应用程序的绝佳选择，但在这种情况下听起来可能有点矫枉过正。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T20:53:24.953

我会实施民意调查只是因为它听起来更容易编写，并且保持简单非常有价值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-20T20:57:21.747

不确定您是否看过一些 COMET 实现（这就是您所说的 AJAX 推送）。

如果用户正在浏览该站点，那实际上是不是从服务器请求信息，该通知可以搭载该通知？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-20T21:14:21.883

我自己没有尝试过，但有人说[COMET 有效，而且比你想象的要容易](http://blog.simonwillison.net/post/57956839764/comet)。[还有一个名为Juggernaut](http://juggernaut.rubyforge.org/)的 Ruby on Rails 插件，我听说它得到了高度评​​价。同样，我没有使用它，所以 YMMV，但我的理解是，与轮询相比，它需要的资源要少得多。我相信（有人可以证实吗？）COMET 是[MacRumorsLive.com](http://www.macrumorslive.com/)提供 WWDC Stevenotes 实时博客的方式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T21:45:13.680

在不知道您将拥有多少客户的情况下，不可能说轮询是否会比推送更昂贵。我建议投票，因为：

*   听起来您想每分钟更新一次数据。除非通知能够以比这快得多的速度到达，否则推送将意味着您保持 HTTP 连接打开，但看到的活动很少。
*   轮询建立在现有 HTTP 约定之上，因此任何与 Web 浏览器对话的服务器都已准备好响应普通的 Ajax 请求。基于 Comet 或 Flash 套接字的解决方案有不同的要求；您将需要`cometd`在服务器端和客户端库之类的东西来处理服务器端推送。

因此，如果您需要一些繁重的任务来管理大量数据和大量客户端，我建议您使用 Comet。但情况似乎并非如此。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-08-04T20:52:14.270

现在有一个服务[http://pusherapp.com](http://pusherapp.com)试图一劳永逸地解决这个问题。可能值得一试。（免责声明：我与他们没有任何关系）。

# php - WordPress：我去掉了第二个“主页”，但还不够好

> ID：219870
> 
> 赞同：0
> 
> 时间：2008-10-20T20:52:09.870
> 
> 标签：php, wordpress

我有一个 WordPress 站点 (2.6.2)，其中我将主页设置为静态页面，而不是普通的帖子页面。此页面的 ID 为 2，因此在 WordPress 模板中我将其更改`wp_list_pages`为如下所示：

```
<?php wp_list_pages('exclude=2&title_li=&depth=1' ); ?> 
```

这很好用，但是现在主页在被选中时不会“亮起”（因为实际上它是 page_id 2 被选中，并且它没有显示在菜单中）。有什么简单的方法可以解决这个问题吗？

如果不是，概括地说，解决这个问题的难点是什么？制作我自己的`wp_list_pages`函数版本？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-20T22:23:58.423

将静态页面设置为首页不会突出显示菜单链接，这是问题的核心。

因此，您可以在服务器端自定义（破解） wp_list_pages 函数，但如果您愿意，这里有一个客户端选项：

使用 jQuery 库（很方便它与 WP 2.2+ 一起提供），调用：

```
wp_enqueue_script('jquery'); 
```

或加载您自己的版本：

```
wp_enqueue_script( 'jquery', '/path/to/your/jquery.js', false, '1.2.1'); 
```

* * *

现在在您的模板中添加一些 javascript，例如：

```
if(window.location.href == 'http://www.example.com/'){ //checks for root path - "home" ('http://www.example.com/?p=7' or 'http://www.example.com/2008-10/7' will not match)
    jQuery('#nav > ul > li > a:first').addClass('current_page_item');
} 
```

*a:first*部分假定菜单中的第一个链接是主页/首页链接。如果不是，请通过 href 值或位置选择。这是按位置：

~~~~~~~~~~~~~~~

```
jQuery(jQuery('#nav > ul > li > a')[3]).addClass('current_page_item'); //add 'current_page_item' css class so menu item highlighting occurs 
```

例子：

> <div id="导航" >
> 
> <ul >
> <li > <a >链接 0 </a > </li >
> <li > <a >链接 1 </a > </li >
> <li > <a >链接 2 </a > </li >
> **<li > <a >链接 3 </a > </li >**
> <li > <a >链接 4 </a > </li >
> <li > <a >链接 5 </a > </li >
> < /ul >
> 
> </div>

* * *

注意事项：

1.  检查您的菜单 div id 的实际名称（*#nav*显示在这里）
2.  嵌套的 ul/li 菜单结构（因此不止一层）将需要额外的代码来正确选择正确*的*元素。
3.  如果菜单链接要改变，不要使用位置选择技术，使用另一个钩子，比如指向主页/首页的链接的 href 值。
4.  如果涉及更多变体（https、多个子域等） ，*if(window.location.href == ' [http://www.example.com/](http://www.example.com/) ')*部分可能需要是正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T21:06:42.557

以管理员身份登录后，您可以在“管理”>“设置”>“阅读”面板中将静态页面设置为首页。

可以在[此处](http://codex.wordpress.org/Creating_a_Static_Front_Page)找到有关此主题的 Wordpress 手册条目。

# .net - 使用 3D 加速的图形渲染

> ID：219872
> 
> 赞同：8
> 
> 时间：2008-10-20T20:52:38.497
> 
> 标签：.net, 3d, gpu, linegraph

我们为庞大的数据集生成图表。我们说的是每秒 4096 个样本，每张图 10 分钟。一个简单的计算得出每个线图有 4096 * 60 * 10 = 2457600 个样本。每个样本都是一个双精度（8 字节）精度的 FP。此外，我们在一个屏幕上渲染多个线图，最多大约一百个。这使得我们在一个屏幕上渲染了大约 25M 的样本。使用常识和简单的技巧，我们可以使用 CPU 在 2D 画布上绘制此代码来获得高性能。高性能，即渲染时间低于一分钟。***由于这是科学数据，我们不能遗漏任何样本。说真的，这不是一个选择。甚至不要开始考虑它。***

自然，我们希望使用所有可用的技术来改进渲染时间。多核、预渲染、缓存都很有趣，但不要削减它。我们希望这些数据集的渲染速度至少为 30FPS，首选 60FPS。我们现在这是一个雄心勃勃的目标。

卸载图形渲染的一种自然方法是使用系统的 GPU。GPU 可用于处理庞大的数据集并并行处理它们。一些简单的 HelloWorld 测试向我们展示了使用 GPU 在渲染速度上的昼夜差异。

现在的问题是：OpenGL、DirectX 和 XNA 等 GPU API 是为 3D 场景而设计的。因此，使用它们来渲染 2D 线图是可能的，但并不理想。在我们开发的概念证明中，我们遇到了需要将 2D 世界转换为 3D 世界的情况。突然间，我们必须使用 XYZ 坐标系和多边形、顶点等等。从发展的角度来看，这远非理想。代码变得不可读，维护是一场噩梦，还有更多的问题。

您对此 3D 有什么建议或想法？执行此操作以实际转换两个系统（2D 坐标与 3D 坐标和实体）的唯一方法是什么？还是有更时尚的方法来实现这一目标？

*- 为什么在一个像素上渲染多个样本很有用？* 因为它更好地代表了数据集。假设在一个像素上，您有值 2、5 和 8。由于某些样本省略算法，只绘制了 5。这条线只会到 5，而不是 8，因此数据会失真。你也可以反对相反的观点，但事实是第一个参数对我们使用的数据集很重要。这正是我们不能省略样本的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-21T22:36:24.137

在 tgamblin 的回答后面，我想对您不能省略样本的断言发表评论。

您应该将绘制到屏幕上的数据视为抽样问题。您正在谈论 240 万个数据点，并且您正试图将其绘制到一个只有几千个点的屏幕上（至少我假设是这样，因为您担心 30fps 的刷新率）

因此，这意味着对于 x 轴上的每个像素，您都不需要渲染大约 1000 个点。即使您确实走上了利用 gpu 的道路（例如，通过使用 opengl），对于不可见的行，gpu 仍然需要做大量工作。

我用来呈现样本数据的一种技术是生成一组数据，它是整个数据集的子集，仅用于渲染。对于 x 轴上的给定像素（即给定的 x 轴屏幕坐标），您需要渲染**绝对**最大值 4 点 - 即最小 y、最大 y、最左侧 y 和最右侧 y。这将呈现所有可以有用呈现的信息。您仍然可以看到最小值和最大值，并保留与相邻像素的关系。

考虑到这一点，您可以计算出将落入 x 轴上同一像素的样本数（将它们视为数据“箱”）。在给定的 bin 内，您可以确定最大值、最小值等的特定样本。

重申一下，这只是用于显示的子集 - 并且仅适用于显示参数更改之前。例如。如果用户滚动图形或缩放，则需要重新计算渲染子集。

如果您使用的是 opengl，则可以这样做，但由于 opengl 使用标准化坐标系（并且您对现实世界的屏幕坐标感兴趣），您将不得不更加努力地准确确定您的数据箱。如果不使用 opengl，这会更容易，但是您无法充分利用图形硬件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T20:58:53.413

如果您不想，您真的不必担心 Z 轴。在 OpenGL 中（例如），您可以指定 XY 顶点（隐式 Z=0），转动 zbuffer，使用非投影投影矩阵，嘿，你就在 2D 中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-20T21:09:25.453

一个非常流行的科学可视化工具包是[VTK](http://www.vtk.org/)，我认为它适合您的需求：

1.  它是一个高级 API，因此您不必使用 OpenGL（VTK 构建在 OpenGL 之上）。有 C++、Python、Java 和 Tcl 的接口。我认为这将使您的代码库保持干净。

2.  您可以将各种数据集导入 VTK（从医学影像到财务数据有大量示例）。

3.  VTK 非常快，如果你想做非常大的可视化，你可以在多台机器上分布 VTK 图形管道。

4.  关于：

    > 这使得我们在一个屏幕上渲染了大约 25M 的样本。
    > 
    > [...]
    > 
    > 由于这是科学数据，我们不能遗漏任何样本。说真的，这不是一个选择。甚至不要开始考虑它。

您可以通过采样和使用 LOD 模型在 VTK 中渲染大型数据集。也就是说，您有一个模型，您可以从远处看到较低分辨率的版本，但如果您放大，您会看到更高分辨率的版本。这就是许多大型数据集渲染的完成方式。

您不需要从实际数据集中消除点，但您肯定可以在用户放大时逐步细化它。当用户无法处理所有这些时，将 2500 万个点渲染到单个屏幕上对您没有好处数据。我建议您同时查看 VTK 库和 VTK 用户指南，因为那里有一些关于可视化大型数据集的方法的宝贵信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T21:04:07.380

Mark Bessey 提到它，您可能缺少显示图形的像素。但是根据您的解释，我假设您知道自己在做什么。

**OpenGL 有一个正交模式**，它在 (0;1) 内有一个 z 坐标。没有透视投影，您绘制的多边形将与屏幕剪辑区域平面。

DirectX 也会有类似的。在 OpenGL 上，它被称为 gluOrtho2d()。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-20T21:02:28.383

如果您将投影设置为正交（无 z），OpenGL 很乐意渲染 2D。你也应该抽取你的数据。将同一个像素渲染 1000 次是对 GPU 的浪费。使用 performat 多线程抽取器提前花时间。确保使用顶点数组或顶点缓冲区对象在 GPU 上爆炸大型数组（显然我是一个 OpenGL 的人）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-20T20:57:30.750

> 这使得我们在一个屏幕上渲染了大约 25M 的样本。

不，你没有，除非你有一个**非常大**的屏幕。鉴于屏幕分辨率可能更像是 1,000 - 2,000 像素，您真的应该考虑在绘制数据之前对数据进行抽取。在性能方面，以每条线 1,000 个点绘制一百条线可能不是什么大问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-20T21:15:09.713

如果您的代码因为直接处理 3D 内容而变得不可读，您需要编写一个薄的适配器层来封装所有 3D OpenGL 内容，并以对您的应用程序方便的形式获取 2D 数据。

如果我遗漏了什么，请原谅我，并向合唱团宣讲基本的面向对象设计。只是在说'...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-20T21:17:12.160

> 您不需要从实际数据集中消除点，但您肯定可以在用户放大时逐步细化它。当用户无法处理所有这些时，将 2500 万个点渲染到单个屏幕上对您没有好处数据。我建议您同时查看 VTK 库和 VTK 用户指南，因为那里有一些关于可视化大型数据集的方法的宝贵信息。

非常感谢你。这正是我一直在寻找的。VTK 似乎也使用硬件来卸载这些渲染。顺便说一句，我猜你的意思是**有价值的**；）。其次，用户确实获得了我给出的示例的信息。无论多么简洁，数据的概述对于科学家来说确实是纯金。它不是为用户处理所有数据，而是从渲染中获取有价值的信息。用户似乎会这样做，即使在数据集的非常“缩小”的表示中也是如此。

还有什么建议吗？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-09T03:17:55.483

我想指出的是，除了直接使用 VTK 之外，还有其他两个基于 VTK 构建的产品可能会引起您的兴趣。

1) ParaView (paraview.org) 是一个建立在 VTK 之上的用户界面，它使科学可视化产品变得更加容易。你可以渲染所有你想要的数据，只要你有硬件来处理它，它支持多处理器/内核/集群的 MPI。它可以通过用户创建的插件进行扩展，并使用自动化工具进行项目构建和编译。

2）ParaViewGeo（paraviewgeo.mirarco.org）是我所在公司出品的ParaView地质矿产勘探衍生产品。它内置支持读取 ParaView 不支持的文件格式，例如 Gocad、Datamine、Geosoft、SGems 等。更重要的是，我们经常与其他对科学感兴趣的团体合作，也就是与挖掘松散联系的可交付成果，例如我们最近与一个做有限/离散元建模的团体合作。这可能值得一试。

在这两种情况下（PV 和 PVG），您的数据都被认为与您对该数据的视图是分开的，因此，您永远不会“渲染”所有数据（因为您可能没有足够大的监视器来执行此操作）但请放心，它将按照您的预期从您的数据集中“在那里”处理。如果您对数据运行其他过滤器，则只会“渲染”可以看到的内容，但过滤器将对您的所有数据进行计算，尽管这些数据可能不会一次全部可见，但都将存在于内存中。

如果您正在寻找数字，今天我在 PVG 中计算了三个由 800 万个单元组成的规则网格。一个包含一个 7 元组向量属性（7x 800 万个双精度值），另外两个每个包含一个标量属性（每个 1x 800 万个双精度值），内存中总共有 7200 万个双精度值。我相信内存占用接近 500MB，但我也有一个 400,000 个点集，其中每个点都有一个 7 元组向量属性和一些其他可用的杂项数据。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T20:57:09.377

不确定这是否有帮助，但您可以使用时间作为维度吗？即一帧是一z？这可能会让事情更清楚，也许？那么也许您可以有效地应用增量来构建（即在z轴上）图像？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T21:03:44.170

> 不，你没有，除非你有一个非常大的屏幕。鉴于屏幕分辨率可能更像是 1,000 - 2,000 像素，您真的应该考虑在绘制数据之前对数据进行抽取。在性能方面，以每条线 1,000 个点绘制一百条线可能不是什么大问题。

首先，我们在渲染时不能省略任何样本。这是不可能的。这意味着渲染对图表所基于的数据不准确。这真的是一个禁区。时期。

其次，我们**正在**渲染所有样本。可能是多个样本最终在同一个像素上。但是，我们仍在渲染它。样本数据在屏幕上转换。因此，它被渲染。人们可能会怀疑这种可视化数据的有用性，因为科学家（我们的客户）实际上要求我们这样做。他们有一个很好的观点，恕我直言。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-20T21:04:53.260

将库包装在一个更温和、更友好的 2D 库中，并将 Z 和旋转都设置为 0。

-亚当

# c# - Internet Explorer 工具栏 Tab 键

> ID：219873
> 
> 赞同：3
> 
> 时间：2008-10-20T20:52:52.053
> 
> 标签：c#, .net, internet-explorer, interop, toolbar

我用 C# 编写了一个 IE 工具栏，一切正常，除了当我从工具栏打开一个子 Windows 窗体时，tab 键在子窗体上不起作用，无法让我从一个字段移动到另一个字段。

有趣的是，当我使用 form.showDialog() 而不是 form.show() 打开我的子表单时，选项卡的工作方式正常。

我创建的工具栏是基于这篇[文章](http://lamp.codeproject.com/KB/shell/dotnetbandobjects.aspx?fid=3788&df=90&mpp=25&noise=3&sort=Position&view=Quick&select=2766883&fr=301#xx0xx)和这篇[文章](https://secure.codeproject.com/KB/cs/Issuewithbandobjects.aspx)

我已经实现了几篇文章中提到的 TranslateAcceleratorIO，但仍然没有运气。

这是我对 TranslateAcceleratorIO() 和 HasFocusIO() 的实现（在我的工具带类中实现）

```
 [DllImport("user32.dll")]
        public static extern int TranslateMessage(ref MSG lpMsg);

        [DllImport("user32", EntryPoint = "DispatchMessage")]
        static extern bool DispatchMessage(ref MSG msg);

        public int HasFocusIO()
        {                            
            return this.ContainsFocus ? 0 : 1; //S_OK : S_FALSE;
        }

        public int TranslateAcceleratorIO(ref MSG msg)
        {                
            if (msg.message == 0x100)//WM_KEYDOWN
                if (msg.wParam == (uint)Keys.Tab || msg.wParam ==(uint)Keys.F6)
                {
                    if (SelectNextControl(
                            ActiveControl,
                            ModifierKeys == Keys.Shift ? false : true,
                            true,
                            true,
                            false)
                        )
                    {
                        return 0;//S_OK
                    }
                }
                else
                {                        
                    TranslateMessage(ref msg);
                    DispatchMessage(ref msg);
                    return 0;//S_OK
                }
            return 1;//S_FALSE
        } 
```

我也尝试过这样的 TranslateAccelerator 没有运气：

```
 public int TranslateAcceleratorIO(ref MSG msg)
    {

        TranslateMessage(ref msg);
        DispatchMessage(ref msg);
        return 0;//S_OK
    } 
```

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T21:29:23.243

您是否也在实施 HasFocusIO？我相信您的主工具栏类也必须实现 HasFocusIO 并返回 true。

IE工具栏的这些类型的问题是我存在一段时间的祸根。我认为我最终做的是创建单独的 UI 线程并在这些线程中使我的对话框成为模态，这消除了一堆奇怪的问题。但我认为实现 HasFocusIO 和 TranslateAcceleratorIO 应该适用于这个特定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T15:31:26.757

你在哪里实施这些？很难从你那里有什么来判断，你是在你的表单中实现它们还是在你的桌带类中实现它们？

您需要在 DeskBand 实现中实现它们，并且 HasFocusIO 需要在您的一个窗口具有焦点时返回 true（而不仅仅是在工具栏具有焦点时）。然后，Tab、Delete、箭头键等的消息应该发送到 TranslateAcceleratorIO，也在您的桌带中，然后您必须从那里将它们传递给您的表单。

IE 插件框架以这种方式令人难以置信。

# winapi - 检查 Windows 帐户的用户名和密码

> ID：219875
> 
> 赞同：7
> 
> 时间：2008-10-20T20:52:56.657
> 
> 标签：winapi

我有一个安装包，用于安装我创建的服务进程。我想提示用户输入服务进程应在其下运行的帐户的用户名/密码。我想在继续安装之前验证用户名/密码组合是否有效。我有一个用于特殊安装行为的 C DLL，但我不知道如何使用 Windows API 来验证帐户的凭据。我希望能够支持服务控制管理器使用的相同帐户名称语法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-20T20:58:06.987

您要使用的功能是[LogonUser](http://msdn.microsoft.com/en-us/library/aa378184.aspx)。您甚至可以非常酷并指定 LOGON32_LOGON_SERVICE 标志，该标志会检查以确保用户具有运行服务的适当权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T21:05:50.593

[LogonUser](http://msdn.microsoft.com/en-us/library/aa378189(VS.85).aspx)是执行此操作的规范方法，尽管 Microsoft[不鼓励这样做](http://support.microsoft.com/kb/180548)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-21T17:31:03.880

正如你们提到的，我已经使用 LogonUser 函数实现了这个（顺便说一下，这个服务需要 WinXP SP2 或更高版本，所以我不担心权限问题）。但是，这并不像我希望的那样工作。如果我调用 QueryServiceConfig，lpServiceStartName 的格式为“.\accountname”。如果我将此字符串按原样传递给 LogonUser，它将失败。我假设'\'之前的部分代表用户所属的机器？

此外，如果我调用 ChangeServiceConfig，分别为 lpServiceStartName 和 lpPassword 参数指定“LocalSystem”和“”，这工作正常。但是，使用这些参数调用 LogonUser 不起作用。

我真的很想使用 SCM 用于帐户名称的相同语法。

# java - Java 数组反射：isArray 与 instanceof

> ID：219881
> 
> 赞同：186
> 
> 时间：2008-10-20T20:56:36.757
> 
> 标签：java, arrays, reflection

使用之间是否存在偏好或行为差异：

```
if(obj.getClass().isArray()) {} 
```

和

```
if(obj instanceof Object[]) {} 
```

?

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2008-10-20T21:24:01.553

在大多数情况下，您应该使用`instanceof`运算符来测试对象是否为数组。

通常，您在向下转换为编译时已知的特定类型之前测试对象的类型。例如，也许您编写了一些可以与 a`Integer[]`或`int[]`. 你想保护你的演员`instanceof`：

```
if (obj instanceof Integer[]) {
    Integer[] array = (Integer[]) obj;
    /* Use the boxed array */
} else if (obj instanceof int[]) {
    int[] array = (int[]) obj;
    /* Use the primitive array */
} else ... 
```

在 JVM 级别，`instanceof`运算符转换为特定的[“instanceof”](http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html#instanceof)字节码，该字节码在大多数 JVM 实现中进行了优化。

在极少数情况下，您可能会使用反射来遍历未知类型的对象图。在这种情况下，该`isArray()`方法会很有帮助，因为您在编译时不知道组件类型；例如，您可能正在实现某种序列化机制，并且能够将数组的每个组件传递给相同的序列化方法，而不管类型如何。

有两种特殊情况：空引用和对原始数组的引用。

空引用将导致`instanceof`result `false`，而`isArray`throws a `NullPointerException`。

应用于原始数组，除非右侧操作数上的组件类型与组件类型完全匹配，否则会`instanceof`产生。`false`相反，`isArray()`将返回`true`任何组件类型。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-10-20T20:59:45.660

在后一种情况下，如果 obj 为 null，您将不会得到 NullPointerException 而是 false。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-21T12:16:05.887

如果`obj`是`int[]`say 类型，那么它将有一个数组`Class`但不是`Object[]`. 所以你想做什么`obj`。如果您要投射它，请使用`instanceof`. 如果要使用反射，请使用`.getClass().isArray()`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-11-05T15:07:31.723

`getClass().isArray()`在 Sun Java 5 或 6 JRE 上比在 IBM 上慢得多。

如此之多以至于`clazz.getName().charAt(0) == '['`在 Sun JVM 上使用速度更快。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-13T13:39:37.190

我最近遇到了将 Groovy 应用程序从 JDK 5 升级到 JDK 6 的问题。`isArray()`在 JDK6 中使用失败：

```
MissingMethodException:
No signature of sun.reflect.generics.reflectiveObjects.GenericArrayTypeImpl.isArray() ... 
```

更改为`instanceof Object[]`修复此问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T21:06:06.253

如果您曾经在反射解决方案和非反射解决方案之间进行选择，请永远不要选择反射解决方案（涉及 Class 对象）。并不是说它是“错误”或任何东西，而是任何涉及反射的东西通常都不太明显，不太清楚。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-01-01T01:46:26.170

Java 数组反射适用于没有可用于“instanceof”的类实例的情况。例如，如果您正在编写某种注入框架，将值注入到类的新实例中，例如 JPA，那么您需要使用 isArray() 功能。

我在 12 月初写了一篇博客。 [http://blog.adamsbros.org/2010/12/08/java-array-reflection/](http://blog.adamsbros.org/2010/12/08/java-array-reflection/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-20T21:02:27.463

我可以找到两者之间的行为没有区别（除了明显的空情况）。至于更喜欢哪个版本，我会选择第二个。这是在 Java 中执行此操作的标准方法。

如果它让您的代码的读者感到困惑（因为这`String[] instanceof Object[]`是真的），如果代码审阅者不断询问它，您可能希望使用第一个更明确。

# c# - 实现对公众只读但对继承者可写的属性的最佳方法是什么？

> ID：219904
> 
> 赞同：10
> 
> 时间：2008-10-20T21:04:59.627
> 
> 标签：c#, .net, properties, readonly

如果我有一个我想让继承者写入的属性，但在外部保持只读，那么实现它的首选方法是什么？我通常会这样：

```
private object m_myProp;
public object MyProp
{
    get { return m_myProp; }
}
protected void SetMyProp(object value)
{
    m_myProp = value;
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-10-20T21:07:13.087

```
private object m_myProp;
public object MyProp
{
    get { return m_myProp; }
    protected set { m_myProp = value; }
} 
```

或在 C# 3.0 中

```
public object MyProp {get; protected set;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T21:10:15.170

这绝对是要走的路。

```
public object MyProp {get; protected set;} 
```

如果您使用的是旧版本的 C#，那么这是要走的路。

```
private object _myProp;
public object MyProp
{
    get { return _myProp; }
    protected set { _myProp = value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T21:10:08.633

拥有一个 setter 和 getter 并不比拥有一个可见性级别的变量更好。

因此，您可以只使变量本身受保护并将阅读器公开。

也就是说，setter 和 getter 是糟糕的 OO 的一个指标——你确定你需要它们吗？您应该要求对象对其成员做某事，而不是要求它为其成员然后在对象之外操作它们。

这是一个非常普遍的规则，也有很多例外。

# c# - 是否存在 Poco 到 DataSet 项目？

> ID：219910
> 
> 赞同：2
> 
> 时间：2008-10-20T21:06:16.457
> 
> 标签：c#, dataset, poco

我有一个`POCO`包含 4 层深度包含对象的对象（例如`Invoice`具有具有 gl 条目的税收的行项目），我想将整个事物变成`DataSet`. 所以会有 4 个表，每个表都有应用于父表的约束。

有谁知道可以自动化的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T02:02:46.387

你如何填充这个对象？如果它来自数据库，则有两种方法可以构建查询，以便使用单独的、自动相关的 DataTable-s 填充数据集。旧的并且可能不再支持的是[SHAPE 命令](http://support.microsoft.com/kb/189657)。一种更好且更新的方法是使用[FOR XML](http://dotnetslackers.com/articles/ado_net/MappingDataSetToXMLAndBackwards.aspx)。

后一种方法还允许您从“POCO”的 XML 序列化表示加载数据集（不是 FOR XML，而是将 XML 加载到数据集中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-28T13:49:30.227

更好的 JSON 序列化您的 POCO 对象，然后将其反序列化为 Dataset。希望这会做。

# c++ - const 指针（与指向 const 对象的指针相反）有什么用？

> ID：219914
> 
> 赞同：30
> 
> 时间：2008-10-20T21:07:21.213
> 
> 标签：c++, c, constants

我经常使用指向 const 对象的指针，就像这样......

```
const int *p; 
```

这仅仅意味着您不能更改`p`指向 through的整数`p`。但我也看到了对 const 指针的引用，声明如下......

```
int* const p; 
```

据我了解，这意味着指针变量*本身*是恒定的——你可以整天改变它指向的整数，但你不能让它指向别的东西。

那有什么可能的用途？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-20T21:16:05.440

当您为嵌入式系统设计 C 程序或需要引用同一内存的特殊用途程序（共享内存的多处理器应用程序）时，您需要常量指针。

例如，我有一个[32 位 MIP 处理器](http://flickr.com/photos/adavis/2945502665/)，上面附有一个[小 LCD 。](http://flickr.com/photos/adavis/2946164671/)我必须将 LCD 数据写入内存中的特定端口，然后将其发送到 LCD 控制器。

我可以#define 该数字，但我还必须将其转换为指针，而当我这样做时，C 编译器没有那么多选项。

此外，我可能需要它是易失的，也可以强制转换，但使用提供的语法更容易和更清晰 - 一个指向易失性内存位置的 const 指针。

对于 PC 程序，一个例子是：如果你设计 DOS VGA 游戏（网上有教程很有趣，可以学习基本的低级图形），那么你需要写入 VGA 内存，这可能被称为偏移量从 const 指针。

-亚当

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-10-20T21:19:32.937

它允许您保护指针不被更改。这意味着您可以保护您基于指针永远不会更改或无意修改的假设，例如：

```
int* const p = &i;

...

p++;     /* Compiler error, oops you meant */
(*p)++;  /* Increment the number */ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-20T21:16:07.047

另一个例子：如果你知道它是在哪里初始化的，你就可以避免未来的 NULL 检查。编译器保证指针永远不会改变（为 NULL）...</p>

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-20T21:16:57.760

在任何非 const C++ 成员函数中，`this`指针都是 type `C * const`，其中`C`是类类型——您可以更改它指向的内容（即它的成员），但不能将其更改为指向 a 的不同实例`C`. 对于`const`成员函数，`this`类型为`const C * const`. 还有（很少遇到）`volatile`和`const volatile`成员函数，它们`this`也有`volatile`限定符。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-20T21:43:35.367

一种用途是在低级（设备驱动程序或嵌入式）代码中，您需要引用映射到输入/输出设备（如硬件引脚）的特定地址。某些语言允许您链接特定地址的变量（例如 Ada has `use at`）。在 C 中，最惯用的方法是声明一个常量指针。请注意，此类用法也应具有`volatile`限定符。

其他时候它只是防御性编码。如果你有一个*不应该*改变的指针，明智的做法是声明它*不能*改变。这将允许编译器（和 lint 工具）检测修改它的错误尝试。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-20T21:17:21.520

当我想避免对指针的意外修改（例如指针算术或函数内部）时，我总是使用它们。您也可以将它们用于单例模式。

'this' 是一个硬编码的常量指针。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-20T21:10:25.293

与“const int”相同......如果编译器知道它不会改变，它可以是基于此的优化假设。

```
struct MyClass
{
    char* const ptr;
    MyClass(char* str) :ptr(str) {}

    void SomeFunc(MyOtherClass moc)
    {
         for(int i=0; i < 100; ++i)
         { 
                 printf("%c", ptr[i]);
                 moc.SomeOtherFunc(this);
         }
    }
} 
```

现在，编译器可以做很多事情来优化那个循环——只要它知道 SomeOtherFunc() 不会改变 ptr 的值。使用 const，编译器知道这一点，并且可以做出假设。没有它，编译器必须假设 SomeOtherFunc 会改变 ptr。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-20T21:16:47.807

我见过一些 OLE 代码，其中你有一个从代码外部传入的对象，要使用它，你必须访问它传入的特定内存。所以我们使用 const 指针来确保函数总是操纵这些值比通过 OLE 界面进来的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-20T21:38:16.050

已经给出了几个很好的理由作为这个问题的答案（内存映射设备和只是简单的旧防御性编码），但我敢打赌，大多数情况下你看到这实际上是一个错误，并且意图是有to item 是一个指向常量的指针。

我当然没有数据来支持这种预感，但我仍然会打赌。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-20T22:19:39.973

将**type***和**const type***视为类型本身。然后，您可以了解为什么您可能希望拥有这些类型的 const。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2008-10-20T21:30:49.637

始终将指针视为 int。这意味着

```
object* var; 
```

实际上可以认为是

```
int var; 
```

所以，一个 const 指针仅仅意味着：

```
const object* var; 
```

变成

```
const int var; 
```

因此你也不能改变指针指向的地址，仅此而已。为防止数据更改，您必须将其设为指向 const 对象的指针。

# estimation - 什么功能应该始终是第三方的？

> ID：219915
> 
> 赞同：6
> 
> 时间：2008-10-20T21:07:23.693
> 
> 标签：estimation

提示我的问题是[Jeff Atwood](http://www.codinghorror.com/blog/archives/001172.html)的[这篇文章](http://www.25hoursaday.com/weblog/2008/08/31/DevelopersUsingLibrariesIsNotASignOfWeakness.aspx)和 Dare Obasanjo 的这篇文章。在我看来，至少在某些领域，第三方功能比自定义代码更好。

例如，日志记录应该始终是第三方的吗？加密呢？还是搜索？

我期待大家对此的反馈。

编辑：这个问题假设日志记录、加密和/或搜索不是您的核心业务。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-20T21:11:31.517

大多数情况下，加密应该是第三方，...除非您从事销售加密系统的业务。

据我了解，这几乎是阿特伍德先生的观点，您的核心业务不应该是第三方，所以可能没有什么应该*永远*是第三方......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-20T21:10:56.557

我的经验法则是使用（或至少考虑）第三方来处理您业务核心目的之外的任何事情。

加密一直是这方面的典型例子。但它也延伸到其他领域。

在开发过程中编写用于故障排除的日志代码与编写用于监控生产系统的日志代码完全不同。

这一切都是关于选择哪些开发领域真正为您的项目增加价值。使用第三方的东西消除了该组件不完整/错误/等的风险。但随之而来的风险是它可能不像您需要的那样灵活。

另一个例子是为网站开发一个完整的网络论坛，此时您可以以更便宜的价格购买解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-20T21:26:40.737

“什么功能应该始终是第三方的？”

没有任何。在讨论本质上的工程决策时，总会有例外或特殊情况来否决“总是”的过分使用。

此外，几乎不应该根据给定的“功能”做出选择第三方的决定。没有像这样完美的库这样的东西，你永远不需要去其他任何地方来获得这种类型的功能。

去第三方是一个应该基于做出的决定

*   去第三方的成本与在内部做的成本
*   需要在截止日期前安排开发时间（即，内部可能更便宜，但无论如何您的开发时间表可能不允许这样做）
*   易于集成、调试、维护、升级路径——您可能可以开发一些可以在内部“完成工作，但几乎没有”的东西，而不是花更多的钱来购买可以在未来几年照顾您的东西
*   测试和证明的容易性/成本 - 众所周知，安全包很难*很好地测试*

然而。有些事情真的很难相信在家里会更好。例如，您*可以*编写 OpenGL 和 DirectX 的竞争对手，并且在某些应用程序（科学计算等）中，有充分的理由考虑这样的路径。但总的来说，你不会梦想它。尽管它是“免费的”，但它仍然是第三方依赖项，并且您可能会因为一个只会影响您如何使用这些图形语言的错误而陷入困境。

换句话说，存在一些非常复杂或难以证明/测试的东西，它们几乎总是应该交给第三方。安全是另一回事。不要编写自己的哈希算法，除非您 1) 可以证明是疯狂的并且 2) 至少有 3 个出色的商业理由这样做。

但是“什么功能应该始终是第三方的？” 没有任何。总是有例外。

-亚当

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-20T21:09:25.327

我完全同意加密只能由专家在可能的情况下进行。它也应该是开源的，并且经过了大量的同行评审。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T21:14:43.070

这取决于。是否有适合您需求的第三方库，最重要的是，您使用的语言和/或 API。然后去吧。

如果您有理由制作自己的版本，请确保它不仅仅是“不是在这里发明的”。此外，如果您还没有深入了解市场前五名的领先产品以满足您的需求，那么您的工作做得不够彻底。很有可能你会找到你要找的东西，即使你不能使用它，你仍然可以从图书馆的描述中学到一些东西。至少，您将了解哪些功能需要，哪些不需要。如果您还获得了其中一个库的源代码，那么与没有源代码但可能具有更多功能的竞争库相比，这应该是您的首选。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T21:10:51.987

我一直使用第三方控件的领域是图表。必须绘制一批数据并且第三方控件成熟且值得信赖，这是一个相当普遍的问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-20T21:12:11.623

我想答案取决于使用情况。如果您是为了盈利而开发，如果使用组件的成本与开发成本相比，您可能会购买组件以获得更多利润。当您没有内部专业知识来生产大型组件时，尤其如此。

我使用的几个很好的例子是 Infragistics 控件和 Dundas 图表。尽管我们可以在内部创建这些，但与购买几个许可证相比，时间和机会损失方面的成本将是巨大的。

当然，有时我们做这种事情甚至没有考虑将其视为组件购买。稍微扩展一下想象力，您可以包括 .NET 框架、SQL Server、Windows API 等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-20T21:41:34.483

如果您能以比构建它更便宜的价格购买它，并且购买的功能满足您的业务需求，那么就购买它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-20T21:18:29.553

这个问题没有明确的答案，因为就像软件开发中的其他任何事情一样，它取决于情况。我会说，如果以下 3 项是真的，那么你不应该考虑自己做......

1.  如果它不是您的业务或专业知识的核心。
2.  如果其他人为您编写了它并且它正在广泛的社区中使用。
3.  如果它满足您的需要和要求，或者可以很容易地扩展以满足您的要求。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-21T01:31:44.690

这个问题是问题的反面：你应该创建什么软件？

这显然是愚蠢的。

两者都没有一个答案，这取决于您的业务需求。您是否需要为整个互联网构建更好的搜索引擎？几乎可以肯定不是。但如果你是 90 年代后期的谷歌，你就知道了。第 3 方与第 1 方只是您在哪个办公室工作的问题，每个第 3 方都是他们自己的第 1 方。

*   **如果您需要的一切都足够好：使用现成的东西。**

要么你会创造出质量较低的东西，要么你会在无关紧要的东西上浪费金钱和精力，或者两者兼而有之。

*   **如果它是您业务的基础：自己构建它。**

如果您可以建立更好的东西，并且可以从更好的东西中建立业务，那就去做吧！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-20T21:15:10.057

不要忘记，手工编写所有东西的时间是一个大问题，并不是你不能这样做，而是问题来自你的客户或公司，他们总是想找到最快的方式来构建他们的系统。但是，如果您有一个非营利项目，您可以尝试自己构建东西。例如，如果您正在编写 Web 应用程序并且想要设置一些 ajax 功能，您可以使用 JQuery 或 Dojo 作为您的 ajax 工具包，手动构建这些东西需要时间 :)

但是你在使用第三方库时也必须小心，你必须信任它们，因为它们可能包含恶意代码，或者它们写得非常糟糕，会让你头疼。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-20T21:17:55.233

你自己的加密功能？甚至不考虑它，但我认为您可能是指现有功能的某种包装器。

第 3 方组件优势： 大量功能
完全测试（希望如此！）
不需要时间开发，因此可以更便宜（但是..）

缺点
它是否真的足够灵活，可以满足下一个不公平的客户需求
分发可能很昂贵 将
您与第 3 方公司联系在一起，当他们发布新版本来修复错误时，这可能会很痛苦
您没有学会自己完成任务

您是否使用第三方组件将取决于您的应用程序和要求。像图形这样的东西需要很长时间才能正确，所以它是一个很好的第三方组件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-20T21:28:52.027

您的核心业务之外的任何东西都是第三方解决方案的良好候选者。您希望将开发时间花费在创建独特（ish）并且无法以具有成本效益的庄园购买和使用的核心功能上。

例如，让我们看一下 web gridview 控件。您可以自己开发和扩展网格视图吗？当然可以，但是开发、编码和测试网格视图将花费 X 量的时间和资源，您可以将其转化为美元。现在，您已经考虑了支持、维护和错误修复的重复成本。

现在让我们使用我记得在一些杂志上读到的关于美国开发人员平均每小时赚 40 美元的任意金额，包括他们的收益。每个开发人员许可证大约需要另外 800 美元才能获得完整的 Web 控制套件。如果您的开发人员在这个控件上总共花费了超过 25 个小时，那么您可能已经购买了一整套套件并花费 5 个小时进行集成和测试。

现在希望我在那里没有太困惑，但一般的要点是，如果你可以从自己身上购买它，它可能会节省时间和金钱，而是专注于你无法摆脱自我的事情，这些事情通常是你的钱制造商。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-20T21:44:30.810

我想说编写样板代码或几乎每次都复制和粘贴的冗余代码应该通过库来完成。对我来说，验证代码几乎总是让我犯愚蠢的错误，因为它很无聊。Spring.NET 在这方面非常棒。我很高兴我的老板鼓励我尝试一下。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-09-03T03:14:35.690

似乎你有你需要的所有答案，但我只想和其他人一起在这里发表我的意见。客户付钱让您制作专门为他们工作的应用程序，这通常是他们找您的原因；他们需要的东西在市场上的任何其他产品中都找不到。因此，您的重点应该是开发他们需要的特定部分。

毫无疑问，您的应用程序还需要做其他事情。也许它需要连接到数据库，或加密某些行。这就是第三方库发挥作用的地方。您不想浪费时间为数据库编写新的驱动程序，或者为可能有漏洞的新加密方案编写您没有时间测试的漏洞。您想使用已经存在并且已经过广泛测试和优化的那些。

请记住，您完成得越快，他们支付的费用就越少。这让他们很高兴并想回到你身边。这也意味着你赚得更多，因为即使他们付的钱更少，你也可以从事更多的项目，这意味着更多的钱。

总之，您应该依赖杂项模块中的第三方库。

# gpu - GPU 编程简介

> ID：219928
> 
> 赞同：182
> 
> 时间：2008-10-20T21:09:40.757
> 
> 标签：gpu

每个人的桌面上都有这台巨大的大规模并行化超级计算机，以显卡 GPU 的形式存在。

*   什么是 GPU 社区的“hello world”等价物？
*   我该做什么，我该去哪里，开始为主要的 GPU 供应商编写 GPU？

-亚当

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2008-10-20T21:15:20.057

查看 NVidia 的 CUDA，IMO 它是最简单的 GPU 编程平台。有大量很酷的材料可供阅读。 [http://www.nvidia.com/object/cuda_home.html](http://www.nvidia.com/object/cuda_home.html)

Hello world 将使用 GPU 进行任何类型的计算。

希望有帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-10-20T21:23:03.287

1.  您将获得可编程的顶点和像素着色器，允许直接在 GPU 上执行代码来操作要绘制的缓冲区。这些语言（即 OpenGL 的 GL Shader Lang 和 High Level Shader Lang 以及 DirectX 的等价物）是 C 风格的语法，并且非常易于使用。可以在[此处](http://www.riemers.net/)为 XNA 游戏工作室和 Direct X 找到一些 HLSL 示例。我没有任何像样的 GLSL 参考资料，但我敢肯定有很多。这些着色器语言提供了强大的功能，可以直接在图形卡上以每个顶点或每个像素级别操作绘制的内容，从而使阴影、照明和绽放之类的东西非常容易实现。
2.  想到的第二件事是使用 [openCL](http://en.wikipedia.org/wiki/OpenCL)为通用 GPU 的新系列编写代码。我不确定如何使用它，但我的理解是 openCL 让您开始能够访问显卡和普通 cpu 上的处理器。这还不是主流技术，似乎是由苹果推动的。
3.  [CUDA](http://www.nvidia.com/object/cuda_home.html)似乎是一个热门话题。CUDA 是 nVidia 访问 GPU 功能的方式。[这里](http://www.gpgpu.org/asplos2008/)有一些介绍

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-23T08:51:21.150

我想其他人已经回答了你的第二个问题。至于第一个，CUDA 的“Hello World”，我认为没有固定的标准，但我个人建议使用并行加法器（即对 N 个整数求和的程序）。

如果您查看 NVIDIA SDK 中的“缩减”示例，可以扩展表面上简单的任务以演示许多 CUDA 考虑因素，例如合并读取、内存库冲突和循环展开。

有关更多信息，请参阅此演示文稿：

[http://www.gpgpu.org/sc2007/SC07_CUDA_5_Optimization_Harris.pdf](http://www.gpgpu.org/sc2007/SC07_CUDA_5_Optimization_Harris.pdf)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2011-06-25T16:31:48.997

[OpenCL](http://www.khronos.org/opencl/)致力于打造一个能够编写适用于 GPU 等代码的跨平台库。它允许人们在不知道将在哪个 GPU 上运行的情况下编写代码，从而可以更轻松地使用 GPU 的某些功能，而无需专门针对几种类型的 GPU。我怀疑它的性能不如原生 GPU 代码（或 GPU 制造商允许的原生代码），但对于某些应用程序来说，这种权衡是值得的。

它仍处于相对早期的阶段（截至本答案为 1.1），但已在行业中获得了一些吸引力 - 例如，它在 OS X 10.5 及更高版本上得到原生支持。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-20T21:30:43.490

看看[ATI 流计算 SDK](http://ati.amd.com/technology/streamcomputing/sdkdwnld.html)。它基于斯坦福大学开发的[BrookGPU](http://graphics.stanford.edu/projects/brookgpu/)。

将来，所有 GPU 工作都将使用[OpenCL](http://en.wikipedia.org/wiki/OpenCL)进行标准化。这是一项由 Apple 赞助的计划，将与显卡供应商保持中立。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-10-20T21:35:31.063

CUDA 是一个很好的入门框架。它允许您用 C 编写 GPGPU 内核。编译器将从您的代码生成 GPU 微代码，并将在 CPU 上运行的所有内容发送到您的常规编译器。它只是 NVIDIA 的，并且仅适用于 8 系列或更好的显卡。您可以查看[CUDA 区域](http://www.nvidia.com/object/cuda_home.html)，看看可以用它做什么。[CUDA SDK](http://www.nvidia.com/object/cuda_get.html)中有一些很棒的演示。SDK 附带的文档是实际编写代码的一个很好的起点。它将引导您编写矩阵乘法内核，这是一个很好的起点。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-19T19:16:37.580

无需进入 CUDA 或 OpenCL 即可进入 GPU 编程的另一种简单方法是通过[OpenACC](http://www.openacc-standard.org)进行。

OpenACC 像 OpenMP 一样工作，使用编译器指令（如`#pragma acc kernels`）将工作发送到 GPU。例如，如果您有一个大循环（只有较大的循环真正受益）：

```
int i;
float a = 2.0;
float b[10000];
#pragma acc kernels
for (i = 0; i < 10000; ++i) b[i] = 1.0f;
#pragma acc kernels
for (i = 0; i < 10000; ++i) {
  b[i] = b[i] * a;
} 
```

编辑：不幸的是，对于 NVIDIA GPU 卡，目前只有 PGI 编译器真正支持 OpenACC。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-10-20T21:23:43.503

试试[GPU++](http://blog.beef.de/thesis/)和[libSh](http://libsh.org/wiki/index.php/How_Sh_Works)

LibSh 链接很好地描述了它们如何将编程语言绑定到图形基元（显然，基元本身），GPU++ 描述了它的全部内容，两者都带有代码示例。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-07T16:40:08.433

如果您使用 MATLAB，则使用 GPU 进行技术计算（矩阵计算和繁重的数学/数字运算）变得非常简单。我发现它对于在游戏之外使用 GPU 卡很有用。查看以下链接：

[http://www.mathworks.com/discovery/matlab-gpu.html](http://www.mathworks.com/discovery/matlab-gpu.html)

# php - PHP - 会话 - 安全

> ID：219944
> 
> 赞同：3
> 
> 时间：2008-10-20T21:13:55.817
> 
> 标签：php, session

php 会话的安全性如何？我打算使用本机 PHP 会话来验证用户。用户可以像 $_POST 和 $_GET 数据那样修改会话数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T21:20:06.290

只有当您作为开发人员让用户通过您编写的代码将数据放入会话时，数据才会进入会话。因此，会话与您允许进入其中的数据以及您如何信任和使用该数据一样安全。此外，会话基于客户端用来识别会话用户的 sessionID。如果有人劫持了 sessionID，那么他们就可以模仿他们窃取了 session ID 的用户。这可能发生在非 SSH 通信中。所以不要相信会话 ID 来识别用户（重要的东西），除非他们已经登录并且会话 ID 只在安全模式下传输。

下一个安全问题是您发送给用户的 sessionID 的“可猜测性”。如果您处理我上面提到的东西，当您通过它和文档时，您将了解 PHP sessionID 是多么“可猜测”。

最后要注意 XSS 攻击。互联网上有几篇文章解释了如何最大限度地减少 XSS 的发生率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T21:20:05.413

PHP 会话与提供给用户的会话 cookie 一样安全。会话中的所有数据都存储在服务器端，因此用户不能随意修改它们，除非通过您的站点提供的任何功能。但是，PHP 会话 cookie 是跨站点脚本 (XSS) 和跨站点请求伪造 (CSRF) 攻击的常见目标。同样，只要您意识到潜在的风险，会话是进行用户身份验证的好方法。

一些维基百科链接：

[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

[跨站脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

# smalltalk - 使用 Seaside 延续

> ID：219958
> 
> 赞同：2
> 
> 时间：2008-10-20T21:16:28.013
> 
> 标签：smalltalk, squeak, continuations, seaside, callcc

如何在 Squeak 中获得 BlockClosure（我想使用 BlockClosure>>callCC）？

当我写 [#foo] 是一个 BlockContext 时，有什么关系？

更新：我发现 BlockClosure 主要是新编译器的东西。

相反，我如何使用 seaside Continuations？我遇到了问题，任何例子都将不胜感激。

进一步更新：这样做的目的不是使用 seaside（至少不是直接使用），而是以一种比滚动我自己的状态跟踪迭代器更容易的方式编写遍历和其他类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-21T15:34:07.920

通常，使用 Seaside，您根本不需要自己处理 Continuations。

您只需在组件中使用`#call:`和`#answer:`。

`Continuation`如果除了编写 Seaside 应用程序之外，您还试图做其他事情，请查看`WAComponent>>call:`使用示例。

或者试试这个。打开一个成绩单窗口。现在，在工作区中，一次选择所有这些代码并执行它：

```
continuation := nil.
result := Continuation currentDo: [:cc |
   "store the continuation, cc, somewhere for later use"
   continuation := cc.
   1 ].

Transcript show: result. 
```

您应该看到`1`显示在 Transcript 窗口中。现在，在工作区中，执行：

```
continuation value: 2 
```

进而：

```
continuation value: 3 
```

您应该看到您传递给的每个值都`continuation`显示在 Transcript 中，因为您传递给 #value: 的每个值都会导致继续的上下文被恢复并且新的值被分配给`result`.

希望这会有所帮助...

# sql - Oracle：如何在 SQL 查询中实现“自然”排序？

> ID：219982
> 
> 赞同：7
> 
> 时间：2008-10-20T21:20:56.880
> 
> 标签：sql, oracle

例如，

```
foo1
foo2
foo10
foo100 
```

而不是

```
foo1
foo10
foo100
foo2 
```

更新：对自己编码排序不感兴趣（尽管这本身很有趣），但让数据库为我做排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-20T21:21:26.910

您可以在 order-by 子句中使用函数。在这种情况下，您可以拆分字段的非数字部分和数字部分，并将它们用作两个排序条件。

```
select * from t
 order by to_number(regexp_substr(a,'^[0-9]+')),
          to_number(regexp_substr(a,'[0-9]+$')),
          a; 
```

您还可以创建一个基于函数的索引来支持这一点：

```
create index t_ix1
    on t (to_number(regexp_substr(a, '^[0-9]+')),
          to_number(regexp_substr(a, '[0-9]+$')), 
          a); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-11-22T15:21:38.320

我使用以下函数对可以在值中找到的所有小于 10 的数字序列进行 0 填充，以便每个数字的总长度变为 10 位。它甚至与包含一个、多个或没有数字序列的混合值集兼容。

```
CREATE OR replace function NATURAL_ORDER(
    P_STR   varchar2
) return varchar2
IS
/** --------------------------------------------------------------------
    Replaces all sequences of numbers shorter than 10 digits by 0-padded
    numbers that exactly 10 digits in length. Usefull for ordering-by
    using NATURAL ORDER algorithm.
 */
    l_result  varchar2( 32700 );
    l_len     integer;
    l_ix      integer;
    l_end     integer;
begin
    l_result := P_STR;
    l_len := LENGTH( l_result );
    l_ix := 1;
    while l_len > 0 loop
        l_ix := REGEXP_INSTR( l_result, '[0-9]{1,9}', l_ix, 1, 0 );
        EXIT when l_ix = 0;
        l_end := REGEXP_INSTR( l_result, '[^0-9]|$', l_ix, 1, 0 );
        if ( l_end - l_ix >= 10 ) then
            l_ix := l_end;
        else
            l_result := substr( l_result, 1, l_ix - 1 )
                     || LPAD( SUBSTR( l_result, l_ix, l_end-l_ix ), 10, '0' )
                     || substr( l_result, l_end )
                     ;
            l_ix := l_ix + 10;
        end if;
    end loop;
    return l_result;
end;
/ 
```

例如：

```
select 'ABC' || LVL || 'DEF' as STR
  from (
          select LEVEL as LVL
            from DUAL
           start with 1=1
           connect by LEVEL <= 35
       )
 order by NATURAL_ORDER( STR ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-25T22:47:14.903

# 对于短字符串，少量数字

如果“数字”的数量和最大长度受到限制，则有一个基于正则表达式的解决方案。

这个想法是：

*   用 20 个零填充所有数字
*   使用另一个正则表达式删除过多的零。由于正则[表达式回溯](http://www.regular-expressions.info/catastrophic.html)，这可能会很慢。

假设：

*   预先知道数字的最大长度（例如 20）
*   所有数字都可以填充（换句话说，`lpad('1 ', 3000, '1 ')`由于无法将填充的数字放入 ，将失败`varchar2(4000)`）

以下查询针对“短数字”情况进行了优化（请参阅 参考资料`*?`），它需要 0.4 秒。但是，当使用这种方法时，您需要预先定义填充长度。

```
select * from (
  select dbms_random.string('X', 30) val from xmltable('1 to 1000')
)
order by regexp_replace(regexp_replace(val, '(\d+)', lpad('0', 20, '0')||'\1')
                      , '0*?(\d{21}(\D|$))', '\1'); 
```

# “聪明”的方法

尽管单独`natural_sort`的函数可以很方便，但在纯 SQL 中有一个鲜为人知的技巧来做到这一点。

关键思想：

*   从所有数字中去除前导零，因此在和:`02`之间排序。注意：这可能会导致>的“意外”排序（因为已转换为），但是没有单一的答案应该如何排序`1``3``regexp_replace(val, '(^|\D)0+(\d+)', '\1\2')``10.02``10.1``02``2``10.02.03`
*   转换`"`为`""`带引号的文本可以正常工作
*   将输入字符串转换为逗号分隔格式：`'"'||regexp_replace(..., '([^0-9]+)', '","\1","')||'"'`
*   通过将 csv 转换为项目列表`xmltable`
*   增加类似数字的项目，以便字符串排序正常工作
*   使用`length(length(num))||length(num)||num`代替，`lpad(num, 10, '0')`因为后者不太紧凑并且不支持 11+ 位数字。笔记：

对于 1000 个长度为 30 的随机字符串的排序列表，响应时间大约为 3-4 秒（随机字符串的生成本身需要 0.2 秒）。主要的时间消费者是`xmltable`将文本拆分成行。如果使用 PL/SQL 而不是`xmltable`将字符串拆分为行，那么对于相同的 1000 行，响应时间将减少到 0.4 秒。

以下查询对 100 个随机字母数字字符串执行自然排序（注意：它在 Oracle 11.2.0.4 中产生错误结果，在 12.1.0.2 中有效）：

```
select *
  from (
    select (select listagg(case when regexp_like(w, '^[0-9]')
                                then length(length(w))||length(w)||w else w
                           end
                   ) within group (order by ord)
              from xmltable(t.csv columns w varchar2(4000) path '.'
                                        , ord for ordinality) q
           ) order_by
         , t.*
    from (
           select '"'||regexp_replace(replace(
                                          regexp_replace(val, '(^|\D)0+(\d+)', '\1\2')
                                        , '"', '""')
                                    , '([^0-9]+)', '","\1","')||'"' csv
                , t.*
           from (
                  select dbms_random.string('X', 30) val from xmltable('1 to 100')
                ) t
         ) t
  ) t
order by order_by; 
```

有趣的部分是它`order by`可以在没有子查询的情况下表达，所以它是一个让你的审阅者疯狂的方便工具（它适用于 11.2.0.4 和 12.1.0.2）：

```
select *
  from (select dbms_random.string('X', 30) val from xmltable('1 to 100')) t
 order by (
   select listagg(case when regexp_like(w, '^[0-9]')
                       then length(length(w))||length(w)||w else w
                  end
          ) within group (order by ord)
     from xmltable('$X'
            passing xmlquery(('"'||regexp_replace(replace(
                                                     regexp_replace(t.val, '(^|\D)0+(\d+)', '\1\2')
                                                   , '"', '""')
                                                , '([^0-9]+)', '","\1","')||'"')
                             returning sequence
                    ) as X
            columns w varchar2(4000) path '.', ord for ordinality) q
); 
```

# c# - SQL 数据库表中的 C# 类

> ID：219986
> 
> 赞同：4
> 
> 时间：2008-10-20T21:21:34.007
> 
> 标签：c#, .net, orm, .net-2.0

遇到了这个：

[http://www.eggheadcafe.com/articles/adonet_source_code_generator.asp](http://www.eggheadcafe.com/articles/adonet_source_code_generator.asp)

并且想知道这是否是正确的解决方案，因为我不太喜欢为每个存储过程创建一个类，或者我是否使用 Enterprise Library for ASP.net 2.0 项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-20T21:39:30.743

您绝对不应该为每个存储过程创建一个类。您可以采用多种方法来处理数据库交互。你应该好好看看那里的主要框架，然后决定哪一个最适合你。Castle Project 解决方案很棒，它依赖于 nHibernate ( [nHibernate](http://www.hibernate.org/343.html) )。LINQ 是 Mircrosoft ( [LINQ Project](http://msdn.microsoft.com/en-us/netframework/aa904594.aspx) ) 提供的类似产品。这两种解决方案都是完整的 ORM 框架（对象关系映射），并将生成动态 SQL 以将您的对象持久保存在数据库中。每个人都有自己的怪癖，并喜欢您以特定方式构建对象。如果您不想管理系统使用的 SQL，我肯定会推荐其中一种方法。

我来自数据库背景，并且更喜欢对我的 SQL 进行更多控制。特别是我喜欢让我的交互由存储过程处理。我发现这使我能够更好地控制 SQL 以进行优化，但可以帮助我以更友好的方式管理数据库安全性。为了适应这种方法，我推荐使用 iBatis ( [iBatis](http://ibatis.apache.org/) ) 之类的方法。iBatis 不是一个完整的 ORM，而是一个简单的 SQL 映射器。我的方法的缺点是您需要编写更多代码 (SQL)，但我不介意这种权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T21:28:10.110

在 C# 类中包装数据库表的方法有很多种。在您链接到的选项和实体框架之间进行选择之前，您可能需要调查一些选项。

有一种称为“活动记录模式”的软件模式准确地描述了这种方法 - 每个表都有一个 C# 类，具有诸如 Customer.GetById()、Customer.Save() 等加载/保存方法。

对于 ASP.NET 2.0，请查看[Castle Project 的 ActiveRecord 实现和名为](http://www.castleproject.org/activerecord/index.html)[ActiveWriter](http://altinoren.com/activewriter/)的第三方 Visual Studio 插件工具，它允许您使用拖放界面为表生成类包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T21:49:54.247

您需要确定在什么时候需要由表组成的数据集，以及是否希望 SQL 使用存储过程生成这些数据集，或者您的业务逻辑层是否会处理这些数据集。正如 Dr8k 所说，nHibernate 会为您创建 SQL，但是 nHibernate 有一个学习曲线。ORM 将控制您获取数据的方式，并且根据您的环境和 DBA 的舒适度，您可能会遇到其他需要克服的问题。

如果您更熟悉 SQL，那么还有另一个名为[SubSonic](http://www.subsonicproject.com/)的工具会为您创建包装器（如 Active Record），同时还为您提供使用存储过程的能力。如果您无法使用 LINQ，也可以使用具有流畅界面的不错的查询工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T21:25:59.473

是否有升级到框架 3.5 的可能性？如果是这样，请查看 LINQ to SQL 和实体框架，因为这将为您完成很多工作。

如果不是，那么只要它生成不将您绑定到第三方库的标准代码，那么您当然可以使用它。在我的工作场所，我们有自己的与此类似的生成器，它运行良好，尽管我们将很快迁移到 LINQ to SQL。

# iis - 专用服务器应该能够提供多少持续数据？

> ID：219988
> 
> 赞同：0
> 
> 时间：2008-10-20T21:21:36.427
> 
> 标签：iis, bandwidth

我们有一个专门的 Godaddy 服务器，当我们让用户每 2 秒只下载 3MB 的数据时（这大约是 20 个 http 请求），它似乎停止了。

我想研究数据库锁定等，看看这是否是一个问题——但首先我很好奇专用服务器应该能够提供什么服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T21:48:57.057

为了帮助诊断问题，托管一个大文件并下载它。这将为您提供服务器和您的 Web 服务器可以处理的传输。如果传输速率很差，那么您知道它的网络、服务器或网络服务器。如果它可以接受或良好，那么您就知道生成这些 3MB 文件的方法。

检查，测量和计算！

PS。通过快速链接下载文件，您不希望瓶颈成为您的 64kbps 调制解调器 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T23:56:51.697

从专用服务器检查 netspeed.stanford.edu，看看您的入站和出站流量是什么样的。

还要确保您的 ISP 没有将您的速度限制在 10MBps（godaddy 默认限制为 10Mbps，并会根据要求将其设置为 100Mbps）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T21:23:10.417

很大程度上取决于 3MB 是什么。即使在最弱的服务器的范围内，提供 1.5MBps 的静态数据也是一种方式，方式，方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-20T21:47:26.013

也许godaddy会限制带宽？每 2 秒下载 60MB 可能会触发某种带宽保护（保护他们的服务或防止您被多收费，或两者兼而有之）。

# php - 如何使用 PHP 加密数据库中的密码数据？

> ID：219999
> 
> 赞同：11
> 
> 时间：2008-10-20T21:24:58.027
> 
> 标签：php, database

我正在使用 PHP 和 CodeIgniter 框架连接到 MySQL 数据库。我想将我的密码加密存储在数据库中，并想知道执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-20T21:27:47.223

从高层次概述 - 不要加密，散列。如果可以，请使用 BCrypt。 [这是一篇很长的文章，解释了为什么要使用 BCrypt](http://www.securityfocus.com/blogs/262)以及为什么要散列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-20T21:51:35.273

加密密码是个坏主意。如果有人得到你的数据库，他们可能也会得到你用来加密密码的密钥。

真正的解决方案是散列、加盐，然后存储密码。杰夫阿特伍德对此有一篇很棒的帖子：http: [//www.codinghorror.com/blog/archives/000953.html](http://www.codinghorror.com/blog/archives/000953.html)

这里有一个讨论“彩虹表”，即带有 MD5 和的大量单词表：http: [//www.codinghorror.com/blog/archives/000949.html](http://www.codinghorror.com/blog/archives/000949.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-20T22:13:32.843

[最好的方法是使用phpass](http://www.openwall.com/phpass/)，因为它既简单又安全。如果您的 PHP 安装使用 Blowfish，它使用 bcrypt；如果没有，它会使用 md5 的多次传递。无论哪种方式，它都比直接 md5 或 sha1 更安全。

```
$hasher = new PasswordHash(8, false);

// Before storing a password
$hash = $hasher->HashPassword($password);

// To check a password against a hash
if ($hasher->CheckPassword($password, $hash))
    // $password and $hash match 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T21:31:28.513

我总是在将密码放入数据库之前使用 md5sum 密码，然后 md5sum 密码登录尝试将它们与数据库进行检查。为了安全起见，我使用带有 userID（用户名）和 md5summed 密码的 where 子句进行选择查询，这样我就不会得到任何行，除非两者都匹配。

此外，如果您需要对这种密码混淆方法有一定程度的信任，mysql 会在其密码上使用 md5summing。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-20T21:40:39.383

使用散列函数；MD5 就可以了。不要存储密码，存储哈希。然后，为了让用户登录，对他们输入的密码进行哈希处理，并将其与数据库中的哈希值进行比较；如果哈希匹配，它们是合法的。

此外，在散列密码之前，请在密码中添加盐。这很容易，只需将字符串附加到密码，例如您的域名或您的应用程序独有的一些其他数据。这可以防止黑客对您的哈希使用彩虹表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-20T21:42:09.130

永远不要存储密码。使用单向哈希并存储它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-20T23:43:55.797

我同意散列和加盐。我不同意选择站点范围的哈希。为每个用户使用不同的盐，以防止一次针对所有密码的字典攻击。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-20T22:50:34.717

嗯，我不止一次地根据在编写密码的存储和验证时想到的任何数学计算

从这里开始，我可能会尽可能多地使用 OpenID，只要我有实际选择，所以我根本不需要做任何密码存储。这样我就可以将密码留给专家和用户已经信任的一方。*********