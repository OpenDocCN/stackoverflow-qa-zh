# StackOverflow 问答 10005000-10005999

# objective-c - 从我的 iOS 5 应用打开 Twitter 应用

> ID：10005000
> 
> 赞同：1
> 
> 时间：2012-04-04T04:36:59.487
> 
> 标签：objective-c, ios, twitter

我正在尝试在 iOS 5 中从我的应用程序中打开 Twitter 应用程序，但它无法打开。任何帮助将不胜感激，我在下面包含了我正在使用的代码。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=TWITTER"]]; 
```

请帮助我，并提前感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:52:59.470

如果您只是想打开实际的 Twitter 应用程序，那么代码是

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:15:53.497

你想启动 Twitter 应用程序，还是只是从你的应用程序内发送推文？我相信您上面显示的代码是在您的设置应用程序中启动 Twitters 首选项...我也相信这在 5.1 中已被禁止

如果您希望将 Twitter 集成添加到您的应用程序中，Apple 提供了很好的示例代码来向您展示如何将 Twitter 与 iOS 5 中的内置 Twitter 框架一起使用。

现在我建议你下载这个示例代码，看看发送推文还需要什么（比如检查 CanTweetStatus），但我在这篇文章中附上了如何发送推文的基本概念。

[https://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011191](https://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011191)

```
- (IBAction)sendCustomTweet:(id)sender {
    // Create an account store object.
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    // Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                // Create a request, which in this example, posts a tweet to the user's timeline.
                // This example uses version 1 of the Twitter API.
                // This may need to be changed to whichever version is currently appropriate.
                TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.twitter.com/1/statuses/update.json"] parameters:[NSDictionary dictionaryWithObject:@"Hello. This is a tweet." forKey:@"status"] requestMethod:TWRequestMethodPOST];

                // Set the account used to post the tweet.
                [postRequest setAccount:twitterAccount];

                // Perform the request created above and create a handler block to handle the response.
                [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                    [self performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];
                }];
            }
        }
    }];
} 
```

祝你好运！

# javascript - 一个简单的 jquery 片段来验证用户的电子邮件地址

> ID：10005006
> 
> 赞同：1
> 
> 时间：2012-04-04T04:37:44.607
> 
> 标签：javascript, jquery, css, html

我正在使用以下 javascript 代码来验证用户输入的电子邮件地址。我的问题是，我将 html5 用于“电子邮件”类型的文本框，目前在最新的 IE 版本上无法正常工作。我发现自己更喜欢 html5，因为它提供了更好的外观效果。因此，我想使用它，因此同时需要添加一个小片段来检查 IE 浏览器，如下面的代码所示，

```
 function IsValidEmail(email)
{
    var em= new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
    return em.test(email);
}
$("#aspformblahblah").submit(function()
{
    var em=$('#email').val();
    if(!IsValidEmail(em))
    {
        if($.browser.msie)
        {
            $("#e-valid").css({'color':'red','padding-left':'5px', 'font-style':'italic'});
            $("#e-valid").html("Please enter a valid email address");
            return false;
        }
    }
    return true;
}); 
```

它在所有其他浏览器上都可以正常工作，但是我似乎满脑子想着我在某个地方犯了一个逻辑错误，即在提交表单时，上面的代码在 IE 上不起作用。不过，它可以很好地验证输入的电子邮件地址。有什么想法请赐教....非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:41:33.850

包裹在 document.ready 中

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
function IsValidEmail(email) {
    // the regex works in IE but should be a string (see nnnnn's answer) 
    // var em= new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
    var em=/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i; // simpler
    return em.test(email);
}
$(document).ready(function() {
  $("#form1").submit(function() {
    var em=$('#email').val();
    if(!IsValidEmail(em))
    {
        if($.browser.msie)
        {
        alert("Wrong email");
            $("#e-valid").css({'color':'red','padding-left':'5px', 'font-style':'italic'});
            $("#e-valid").html("Please enter a valid email address");
            return false;
        }
    }
    return true;
  });
});

</script>

</head>
<body>
<form id="form1">
<input id="email" type="email" value="" /><span id="e-valid"></span><br/>
<input type="submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:35:38.190

您将正则表达式文字传递给 RegExp() 构造函数，但它需要一个字符串。尝试这个：

```
 function IsValidEmail(email)
   {
      var em= /^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;
      return em.test(email);
   } 
```

请注意，您不需要变量 em，如果您将“i”标志用于不区分大小写的正则表达式，那么您可以简化您的模式：

```
 return /^[+a-z0-9._-]+@[a-z0-9.-]+\.[a-z]{2,4}$/i.test(email); 
```

# vb.net - 如果您知道偏移量，如何从大文件中获取一行

> ID：10005007
> 
> 赞同：0
> 
> 时间：2012-04-04T04:37:44.490
> 
> 标签：vb.net, file, file-io, utf-8

该文件是一个UTF8 文本文件。

每个字符有不同数量的字节，每行有不同数量的字符。

vb.net 是否有行号表到字节位置功能或类似的东西？

还有在那之后怎么读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:15:59.830

该类`StreamReader`是逐行读取文件的典型选择。它不保留它在文件中读取的任何历史记录，因此不知道最后一行在哪里结束或下一行将在哪里结束。当被请求（通过`ReadLine`）时，它只处理字符，直到它到达新的行字符串或文件的末尾。

我不知道 StreamReader 的实际实现，但我会假设它使用`Encoding`该类来处理多字节编码，并且只维护一个可能预读数据的小缓冲区以提高读取性能（读取块比仅仅你现在需要 10 个字节）。任何其他缓冲区，例如当前行中的字符，都将是`ReadLine`需要它们的函数的本地变量。

如果您需要随机查找，您将需要使用该`BaseStream`属性为自己生成一个行开始表，然后将该流查找到所需行的开头。从那里，您应该可以`ReadLine`照常使用。

# php - 从 android 访问 $_SESSION

> ID：10005010
> 
> 赞同：0
> 
> 时间：2012-04-04T04:38:21.933
> 
> 标签：php, android

我用 PHP 建立了一个网站，现在正在开发一个与之配套的应用程序，（但是我对 php 和 Android 都不是新手，只是对它们一起使用）并且我能够登录并获得状态代码：200 响应（成功登录），但是当我打印出来时在标题列表中

```
Header[] heads = response.getAllHeaders(); 
```

没有显示（在 php 中）我调用的事实

`header("Location: success.php")`或`"Location: failure.php"`失败，所以我不确定为什么它会返回 200，它就是这样。

但我真正需要知道的是如何访问我`$_SESSION`在 php 代码中设置的变量，这样我就可以像在我的网站上一样登录我的导航。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:53:09.323

会话变量是在服务器上设置的，不能从客户端访问。如果您看到的是 200，那么您已经错过了带有`Location`标头的 3XX 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:30:00.450

The default behavior of an website that should work with an app is that it provides an API that will be used for communication.

That means that your server has some url you call while sending some data (via json for example). The server process it and sends back some feedback.

In your case you should just send the login data (use SSL!) and the server shouldn't redirect but send you data back where to go from there so that your app knows if everything is right or not.

对您的 PHP 问题：如果您的 php 没有将 $_SESSION 数据发送到您的 android 应用程序，那么 android 就无法获取信息。其他一切都将是每台运行 PHP 的服务器上的漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T05:52:44.240

您应该有以下代码来检索存储在会话中的所有值

```
<?php 
 session_start(); 
 Print_r ($_SESSION);
 ?> 
```

如果您只想检索特定的变量值，则按如下方式传递它

```
<?php 
 // this starts the session 
 session_start(); 
 $ses=$_SESSION['XXX']; 
 echo $ses;
?> 
```

“XXX”是会话变量名

# c# - 如何在 C# 中的字符串中包含变量，例如对数组的引用

> ID：10005015
> 
> 赞同：0
> 
> 时间：2012-04-04T04:38:53.150
> 
> 标签：c#, arrays, string

我在 main 中调用并包含在同一个类中的方法遇到问题。该方法正在输出一个字符串值，我的问题是试图在字符串消息中包含对数组的引用。我收到消息

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句"

以及关于逗号和一大堆 ; 的无效表达。预期所有关于以下行：

```
searchResult = "Account #" + accountsarr[i] + " has a balance of {0:c}" + " for customer " + namesarr[i], balancesarr[i]"; 
```

全部在以下方法中：

```
public static string searchAccounts(ref int AccountNumber, int[] accountsarr, double[] balancesarr, string[] namesarr)
{
    bool isValidAccount = false;
    int i = 0;

    while (i < accountsarr.Length && AccountNumber != accountsarr[i])
    {
        ++i;
    }

    if (i != accountsarr.Length)
    {
        isValidAccount = true;
    }

    string searchResult;

    if (isValidAccount)
    {
        searchResult = "Account #" + accountsarr[i] + " has a balance of {0:c}" + " for customer " + namesarr[i], balancesarr[i]";
    }
    else
        searchResult = "You entered an invalid account";

    return searchResult;
} 
```

那么如何从一个方法返回一个字符串，该方法引用了文本中应该是字符串的数组位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T04:49:35.460

您应该像这样使用[string.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)：

```
 searchResult = string
        .Format("Account # {0} has a balance of {1:c} for customer {2}",
         accountsarr[i], balancesarr[i], namesarr[i]); 
```

* * *

你得到的错误是语法错误，你有一个逗号而不是 a`+`和一个额外的`"`

只是你知道**为什么你的代码没有编译**：

```
searchResult = "Account #" + accountsarr[i] + " has a balance of {0:c}" 
     + " for customer " + namesarr[i], balancesarr[i]"; << this is an extra "
                                   //^ you cannot put a comma here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:48:54.050

您可以简单地执行以下操作：

```
searchResult = "Account #" + accountsarr[i] + " has a balance of "+String.Format("{0:c}",balancesarr[i]) + " for customer " + namesarr[i]; 
```

# android - 如何解决一个应用程序在真正的Android设备/模拟器上安装后出现多个图标？

> ID：10005018
> 
> 赞同：0
> 
> 时间：2012-04-04T04:39:13.633
> 
> 标签：android, android-emulator

当我在真正的 android 设备上安装我的应用程序或在模拟器上运行我的应用程序时，我发现了一个小问题，然后它将显示我的应用程序的图标与我的应用程序中的活动一样多，例如在我的应用程序中，我有三个活动一个用于网络为网站提供第二个服务或为主要活动提供服务，然后在安装后显示三个图标，应用名称为完整应用程序的一个图标，第二个活动的第二个图标和另一个活动的第三个图标。请告诉我如何解决这个问题。

提前感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:54:01.143

您可能将以下内容复制到清单文件中的所有三个活动中？

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

第一个告诉系统与此操作关联的活动是应用程序中的“主要”入口点。换句话说：您告诉 Android 活动可以从外部启动/启动，而无需提供额外数据。

启动器类别表示入口点应列在（顶级）应用程序启动器中。

通常您只想将上述操作和类别添加到单个活动（应用程序的主要入口点）。或者至少，我想不出在很多情况下你（应该）希望每项活动都有两者。

# android - 如何从android中的edittext获取可编辑的更改值

> ID：10005019
> 
> 赞同：0
> 
> 时间：2012-04-04T04:39:19.973
> 
> 标签：android, android-layout

我正在从自定义的 mysql 服务器数据库中获取文本`ListView`。在自定义列表视图中，我将所有文本附加到 edittext。如何在edittext的内容发生更改时获取edittext值并将其存储在textview上。我想更改edittext值请帮助我

```
 Main.java(here i can pass json array as constructor to EditMainMenulistview.java)
        JSONArray json = jArray.getJSONArray("mainmenu");
        list=(ListView)findViewById(R.id.mainmenulist);
         adapter=new MainMenulist(this, json);
         list.setAdapter(adapter); 
```

在这里我可以在 Main.java 中放置按钮更新//按钮

EditMainMenulistview.java

```
 public class EditMainMenulistview extends BaseAdapter {
protected static Context Context = null;
int i;
public String editnewmainmenu, menuname,edittext;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, itemcode;
public String[] itemnames, itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes = new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode = image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i] = itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View vi = convertView;

    vi = inflater.inflate(R.layout.editmainmenulist, null);

    EditText text = (EditText) vi.findViewById(R.id.editmaimenu);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);

    image.setImageBitmap(bmps[position]);

    text.append(itemnames[position]);
     edittext = text.getText().toString();
    System.out.println(edittext);
    //Toast.makeText(Context, edittext, Toast.LENGTH_LONG).show();

    return vi;

}

} 
```

我在 EditMaiMenulisview 中更改的文本我单击按钮（更新） Main.java 我想打印我在 Edittext 中更改的内容。请重播

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:08:00.600

将 getView 更改为：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if(vi == null) {

         vi = inflater.inflate(R.layout.editmainmenulist, null);
    }

    EditText text = (EditText) vi.findViewById(R.id.editmaimenu);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);
    TextView tv = (TextView) vi.findViewById(R.id.<textViewId>); //replace with  
                                                                  //textView ID

    image.setImageBitmap(bmps[position]);

    text.append(itemnames[position]);
     edittext = text.getText().toString();
    System.out.println(edittext);
    //Toast.makeText(Context, edittext, Toast.LENGTH_LONG).show();

    tv.setText(edittext);

    return vi;

} 
```

如果列表视图中的某些项目发生更改，则应调用 adapter.notifyDataSetChanged();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:53:26.303

请使用以下代码

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if(vi == null) {

         vi = inflater.inflate(R.layout.editmainmenulist, null);
    }

    EditText text = (EditText) vi.findViewById(R.id.editmaimenu);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);
    TextView tv = (TextView) vi.findViewById(R.id.<textViewId>); //replace with  
                                                                  //textView ID

    image.setImageBitmap(bmps[position]);

    text.append(itemnames[position]);
     edittext = text.getText().toString();
text.addTextChangedListener(new TextWatcher() {

    public void afterTextChanged(Editable s) {
         Log.v("LOG","After text change value "+s.toString());
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

});
     System.out.println(edittext);
        //Toast.makeText(Context, edittext, Toast.LENGTH_LONG).show();
     tv.setText(edittext);
   return vi;
} 
```

您可以在 afterTextChange 方法中获取值

# junit - HBase 单元测试使用 HBaseTestingUtility 抛出 InstanceAlreadyExistsException

> ID：10005020
> 
> 赞同：0
> 
> 时间：2012-04-04T04:39:25.257
> 
> 标签：junit, hadoop, hbase, hdfs

我有一个使用 HBase`HBaseTestingUtility`来创建和运行迷你 HBase 集群的包。一切似乎都运行良好，但在输出中我得到了一些我想处理的异常。这是第一个这样的例外：

```
12/04/03 21:17:58 INFO ipc.Server: IPC Server handler 2 on 36681: starting
12/04/03 21:17:58 INFO ipc.Server: IPC Server handler 1 on 36681: starting
12/04/03 21:17:58 WARN impl.MetricsSystemImpl: Metrics system not started: Cannot locate configuration: tried hadoop-metrics2-datanode.properties, hadoop-metrics2.properties
12/04/03 21:17:58 WARN util.MBeans: Hadoop:service=DataNode,name=MetricsSystem,sub=Control
javax.management.InstanceAlreadyExistsException: Hadoop:service=DataNode,name=MetricsSystem,sub=Control
    at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:467)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1520)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:986)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:938)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:330)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:516)
    at org.apache.hadoop.metrics2.util.MBeans.register(MBeans.java:56)
    at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.initSystemMBean(MetricsSystemImpl.java:500)
    at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.init(MetricsSystemImpl.java:140)
    at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.init(DefaultMetricsSystem.java:40)
    at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.initialize(DefaultMetricsSystem.java:50)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1483)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1459)
    at org.apache.hadoop.hdfs.MiniDFSCluster.startDataNodes(MiniDFSCluster.java:417)
    at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:280)
    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniDFSCluster(HBaseTestingUtility.java:226)
    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:348)
    at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:311)
    at edu.ucsc.srl.persia.PersiaAdminTest.setUpBeforeClass(PersiaAdminTest.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

这就是基本单元测试的样子

```
public class MyTest {
    private final static HBaseTestingUtility TEST_UTIL = new HBaseTestingUtility();

    @BeforeClass
    public static void setUpBeforeClass() throws Exception {
      TEST_UTIL.startMiniCluster(3);
    }

    @AfterClass
    public static void tearDownAfterClass() throws Exception {
      TEST_UTIL.shutdownMiniCluster();
    }
...
} 
```

为了以防万一，在我的 pom.xml 中包含所有内容的相关版本：

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
  http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>edu.ucsc.srl</groupId>
  <artifactId>persia</artifactId>
  <packaging>jar</packaging>
  <version>0.1</version>
  <name>Persia</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.hbase</groupId>
      <artifactId>hbase</artifactId>
      <version>0.90.5</version>
    </dependency>
    <dependency>
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-core</artifactId>
      <version>0.20.205.0</version>
    </dependency>

    <dependency>
      <groupId>org.apache.hbase</groupId>
      <artifactId>hbase</artifactId>
      <version>0.90.5</version>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-test</artifactId>
      <version>0.20.205.0</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:27:06.553

这些异常似乎随处可见 HBaseTestingUtility 和相关的 MR 类型测试。此处有一个示例 [0] 从我浏览 HBase Jira 问题看来，它们已被记录但目前尚未解决/解决...

[0] [https://issues.apache.org/jira/browse/HBASE-5711](https://issues.apache.org/jira/browse/HBASE-5711)

# php - 使用 preg_match_all 提取链接

> ID：10005024
> 
> 赞同：0
> 
> 时间：2012-04-04T04:40:12.057
> 
> 标签：php, curl, preg-match-all

我想使用 PHP-preg_match_all() 从 html 页面中提取图像的路径，模式如下

```
 <img width="148" height="110" src="https://link1">
 <img width="104" height="129" src="https://link2">
 <img width="150" height="129" src="https://linkn"> 
```

我想要一个数组中的所有图像路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:43:03.300

尝试：

```
preg_match_all("/<img .*?(?=src)src=\"([^\"]+)\"/si", $html, $m); 
print_r($m); 
```

或者

```
preg_match_all("/<img .* src=\"([^']*?)\">/", $html, $m);
echo "<pre>";
print_r($m[1]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T05:19:23.340

您可以使用简单的正则表达式来做到这一点，

利用：

```
preg_match_all('/<img .*?(?=src)src=\"([^\"]+)\"/si', $imglink, $result, PREG_PATTERN_ORDER); 
```

$imglink 是您的每个图片链接

和

$result 是数组中的结果。

带循环：

```
<?php 
$subject  = array (
     '<img width="148" height="110" src="https://link1">'
    , '<img width="104" height="129" src="https://link2">'
    , '<img width="150" height="129" src="https://linkn">'
);

foreach ($subject as $imglink) {
preg_match_all('/<img .*?(?=src)src=\"([^\"]+)\"/si', $imglink, $result, PREG_PATTERN_ORDER);
$link[] = $result[1];
}

echo "<pre>";
print_r ($link);

 ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T09:54:41.067

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="tr" lang="tr" dir="ltr">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-9" />
<style type="text/css">
<!-- 
html,body,div,span,h1,h2,h3,p,hr,br,img,form,input,ul,li,a {
 margin:0;
 padding:0;
 border:0;
}
ul li {list-style:none;}
body {
 font-family:Helvetica, Arial, Tahoma, sans-serif;
 font-size:13px;
 color:#444;
 line-height:1.5em;
} 
#kapsayici {
background:#fff;
margin:10px auto;
width:960px;
border:0px solid #dfdfdf;
min-height: 700px;
}
-->
</style>
</head>
<body>
<div id="kapsayici">
<?php
$url = "http://www.mynet.com";
$icerik = file_get_contents($url);

$resimler = array();
preg_match_all('/(img|src)=("|\')[^"\'>]+/i', $icerik, $veriler);
$dizi=preg_replace('/(img|src)("|\'|="|=\')(.*)/i',"$3",$veriler[0]);

foreach($dizi as $row) {
    $bilgi = pathinfo($row);
    if (isset($bilgi['extension'])) {
        $bilgi['extension'] = strtolower($bilgi['extension']);
        if (($bilgi['extension'] == 'jpg') || ($bilgi['extension'] == 'jpeg') || ($bilgi['extension'] == 'gif') || ($bilgi['extension'] == 'png')) array_push($resimler, $row);
    }
}
$resimler=array_unique($resimler);
echo "<ul>\n";
if (count($resimler)) {
    $i_count=0;
    foreach($resimler as $resim) {
        $i_count++;
        echo "<li><img src=\"{$resim}\" /></li>\n";
    }

}
echo "</ul>\n";
?>
</div>
</body>
</html> 
```

# c# - 将已发布的 ASP.NET 查询字符串中的请求传送到本地 Windows 进程并返回结果

> ID：10005026
> 
> 赞同：0
> 
> 时间：2012-04-04T04:40:26.927
> 
> 标签：c#, asp.net, ipc

我目前正在开发的模型涉及三个要素：

1.  具有（相当）丰富的 GUI 的客户端应用程序
2.  一个 ASP.NET/IIS Web 服务器
3.  和一个本地（关于 #2）Windows 进程（控制台应用程序）

在我看来，客户端应用程序 (#1) 向 ASP.NET/IIS Web 服务器 (#2) 发布了一个查询字符串，它通知本地 Windows 进程 (#3) 查询参数，执行所需的功能，并将数据返回到#2，然后返回到#1。

这种（看似）复杂的进程的必要性源于 Windows 进程的性质。此控制台应用程序使用 RPC 连接第二台服务器并对其进行身份验证。可以想象，这个过程很昂贵。

如果我合并 Windows 进程和 ASP.NET/IIS 页面，那么每个请求都会打开一个新连接。如果连续快速进行数十个 POST，这几乎是不合理的，因为每个身份验证案例大约需要 4 秒。

幸运的是，Windows 控制台应用程序可以登录一次并保持会话。因此，鉴于任何交互的来源都将源自 ASP.NET/IIS 页面，我必须找到与此控制台应用程序交互的解决方案。

我几乎阅读了 Stackoverflow/MSDN 上关于包含此问题的主题的所有帖子。我知道我可以使用远程处理、管道、套接字、WCF 等。

所以我问大家：如果你也遇到过类似的问题，你是怎么解决的？我只是在寻求正确方向的明确点。如果您可以包含代码，我将更加感谢您的回复。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:16:01.500

检查这个：[Calling a Windows Service from ASP.NET via Remoting & IpcChannel](http://www.codedblog.com/2007/09/01/calling-a-windows-service-from-aspnet-via-remoting-ipcchannel/)

# css - 公共服务公告：当 FORMs 标签布局不正确时，IE9 呈现异常

> ID：10005027
> 
> 赞同：2
> 
> 时间：2012-04-04T04:40:28.633
> 
> 标签：css, internet-explorer-9, frameset

问候和问候！

我已经为一些漂亮的表单组合了一个漂亮的浮动表单 CSS 文件，这些表单具有最少的 HTML 代码，可以在 FF 和 Chrome 下流畅地工作（注意该列表中没有 IE [完成完成 DONNNNE！]）。

因此，在 IE 下的测试中，我在 FIELDSET （带有边框的样式）中遇到了奇怪的中断。在 IE9 下，它看起来好像有 2 个 FIELDSET，而实际上这只是一个......

[JSFiddle 示例](http://jsfiddle.net/XbrWx/11/)

# Chrome（Win7下）：

![铬合金](../Images/d1a90bbf22b9b142733fedf04daec62e.png)

# 火狐（Win7下）：

![火狐](../Images/7c6b77e25ba9766f8520ecdc3dfa0f57.png)

# IE9（Win7下）：

![互联网爆炸机](../Images/266175016c80b61a348d23a5ba7cb7d1.png)

# 更新（包括下面的答案）

最后，造成这种情况的原因是最终 FORM 在 FIELDSET 中间丢失（正如 JSFiddle 甚至抱怨的那样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:51:36.733

这是由于 FORM 结束标签放错了位置（甚至 JSFiddle 也发现了它）！

# c# - C# 字符串 - 为什么 null 给我的结果与“”不同？

> ID：10005028
> 
> 赞同：2
> 
> 时间：2012-04-04T04:40:35.980
> 
> 标签：c#, string, null

我设置了 2 个表格。在第一种形式中，我有以下代码。

```
frm_BL addBranch = new frm_BL();

do
{
    addBranch.ShowDialog();
    if (addBranch.txtAmount.Text == "")
    {
        break;
    }

} while (true); 
```

在主窗体中。就在第二种形式中。

```
private void btnAccept_Click(object sender, EventArgs e)
{
    this.Close();
} 
```

但是我发现如果我将主窗体的代码更改为：

```
 if (addBranch.txtAmount.Text == null) //changed to null 
```

第二种形式不断弹出。但如果它停留在

```
if (addBranch.txtAmount.Text == "") 
```

它关闭表单。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T04:43:02.197

null 和空字符串是两个不同的东西，如果你想处理这两种情况，你可以使用 String.IsNullOrEmpty

null 表示对您所拥有的字符串的引用不存在（您没有指向任何内容）

空字符串意味着您对不包含任何内容的字符串的引用（例如，指向空字符数组的指针）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T04:47:57.297

最好的方法是：

```
if (String.IsNullOrEmpty(addBranch.txtAmount.Text)) 
```

该`txtAmount.Text`属性是`string`包含文本框内容的。如果文本框为空，则它是一个零长度字符串。

检查是否相等`null`是说“如果文本框没有字符串......”，这将永远是错误的。检查的正确条件是“如果文本框的字符串为空......”。

使用该`IsNullOrEmpty`方法检查这两种情况。在这种情况下，字符串永远不应该为空，但检查一下也无妨。

请注意，这`""`是一个空字符串（相当于`String.Empty`），而`null`表示该字符串不存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T04:42:49.733

A`null` `String`与空的不同`String`。改为使用`String.Empty()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T06:47:21.030

除了已经正确的答案之外，我还会将 Trim() 添加到检查中，因为在大多数情况下，仅包含空格的字符串是不被接受的，尤其是对于 TextBox 输入。

```
if (string.IsNullOrEmpty(addBranch.txtAmount.Text.Trim())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T06:18:21.783

txtAmount.Text 永远不会返回 null 无论您编写代码（在 c# 中和每个有效的（非 null）TextBox 中）。

TextBox.Text 返回一个空字符串或非空字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T04:49:54.457

我会查看定义以获取更多信息：

> null 关键字是表示空引用的文字，它不引用任何对象。null 是引用类型变量的默认值。普通值类型不能为空。但是，C# 2.0 引入了可为空的值类型。

[http://msdn.microsoft.com/en-us/library/edakx9da.aspx](http://msdn.microsoft.com/en-us/library/edakx9da.aspx)

> 此字段 (String.Empty) 的值是零长度字符串“”。在应用程序代码中，此字段最常用于将字符串变量初始化为空字符串的赋值。

[http://msdn.microsoft.com/en-us/library/system.string.empty.aspx](http://msdn.microsoft.com/en-us/library/system.string.empty.aspx)

我们看到的另一件事是“要测试字符串的值是 Nothing 还是 String.Empty，请使用 IsNullOrEmpty 方法。”

因此，当某事物是时，`null`它表示对空的引用（最常见的是它引用 0），而当字符串包含空值时，这意味着该字符串为空，但它包含对有效内存的引用。

# android - 如何在android中将数据库文件复制到sdcard

> ID：10005030
> 
> 赞同：1
> 
> 时间：2012-04-04T04:40:38.180
> 
> 标签：android, cordova

> **可能重复：**
> [如何在 android 上将数据库文件备份到 sdcard？](https://stackoverflow.com/questions/1995320/how-to-backup-database-file-to-sdcard-on-android)

我正在开发phonegap 1.3.0。我在 phonegap 中创建了名为 test.db 的数据库，该数据库存储在 data/data/(pakage name)/test.db 中。我正在使用本机 android 代码将数据库复制到 sdcard (mnt/sdcard)。但它给出了 test.db 不存在的错误。设备未植根。我错过了什么？

提前致谢。

代码如下->

```
public void copyfile(String srFile, String dtFile) throws FileNotFoundException{
    String DBPATH = "/data/data/package_name/databases/";
     String DBNAME = "test.db";
     String myPath = DBPATH + DBNAME;

    //Open your local db as the input stream
    File externalStorage = Environment.getExternalStorageDirectory();

    InputStream myInput = new FileInputStream(myPath);

    // Path to the just created empty db
    String outFileName = "/mnt/sdcard/folder/test.db";

    //Open the empty db as the output stream
    OutputStream myOutput;
    try {
    myOutput = new FileOutputStream(outFileName);
    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
    myOutput.write(buffer, 0, length);
    }
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
} 
```

phonegap 代码如下：

```
<!DOCTYPE html> 
```

```
<script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>

 <script type="text/javascript" charset="utf-8">
 db = window.openDatabase("test", "1.0", "PhoneGap Demo", 200000);
function createDB() {
    db.transaction(populateDB);
}
function populateDB(tx) {
    Field17=document.form.Field17.value;
    Field18=document.form.Field18.value;
    Field19=document.form.Field19.value;
    //tx.executeSql('DROP TABLE IF EXISTS INFO');
    tx.executeSql('CREATE TABLE IF NOT EXISTS INFO (pid integer primary key, field17,field18,field19');
    sql = "INSERT INTO INFO (field17,field18,field19) VALUES ( '" + Field17 + "','" + Field18 + "','" + Field19 + "')";
    tx.executeSql(sql);
    db.transaction(queryDB);
}

function queryDB(tx,results) {
    console.log("inside querydb");
    tx.executeSql('SELECT * FROM INFO', [], querySuccess);
}

function querySuccess(tx, results) {     
var len = results.rows.length;
    alert('rows inserted: ' + len);
    if (len > 0) {
        for (var i=0;i<len;i++) {

            console.log('pid: ' + results.rows.item(i).pid + 'field: ' + results.rows.item(i).field17 + ' field: ' + results.rows.item(i).field18+ ' field ' + results.rows.item(i).field19);

        }
    }
}       

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:41:57.447

你不需要root你的手机。检查权限 `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`。

你可以检查文件

```
File dbFile = new File(DB_PATH + DB_NAME);
        if(dbFile.exists()){
                  //Continue 
```

编辑：测试此代码。在 sdcard 中更改您的包名称和 yourFoler

```
public boolean checkDataBase() {
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
}

public void copyfile(String srFile, String dtFile) throws FileNotFoundException{
    private static String DB_NAME = "dictionary.db";
    private static String DB_PATH = "/data/data/com.app.android.dictionary/databases/";
if(checkDataBase()){
InputStream myInput = new FileInputStream(DB_PATH + DB_NAME);

    // Path to the just created empty db
    String outFileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/foler/" + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput;
    try {
    myOutput = new FileOutputStream(outFileName);
    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
    myOutput.write(buffer, 0, length);
    }
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:02:27.110

应用程序不创建数据库，实际上它是由Android系统创建的，数据库的文件权限是**-rw-rw----**。这意味着只有 User 和 group 可以访问它，在这种情况下都是**system**。因此您的程序无权访问，因此您收到“权限被拒绝”错误。

# java - 如何为 JTable 的 Header 设置光标？

> ID：10005031
> 
> 赞同：2
> 
> 时间：2012-04-04T04:40:39.537
> 
> 标签：java, swing, cursor, jtable, jtableheader

我使用**setCursor()**方法为 JTable 设置光标。
但该游标仅适用于表的行（数据部分）。
如何为同一个表的标题设置光标，以便我可以通过双击其（列）右边缘来调整列的大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T04:47:25.823

尝试这个：

```
table.getTableHeader().setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR)); 
```

# java - xml 签名中的引用验证

> ID：10005034
> 
> 赞同：2
> 
> 时间：2012-04-04T04:41:08.430
> 
> 标签：java, xml, xml-signature

我在我的程序中使用 ml 签名来检查消息是否已被篡改并检查它是否已由有效人员签名。第二部分我明白了。问题在于第一部分——即检查参考有效性。这是我正在使用的代码。`xmldoc`是一个包含 xml 封装签名的文档对象。

```
 NodeList nl = xmldoc.getElementsByTagNameNS
      (XMLSignature.XMLNS, "Signature");

    DOMValidateContext valContext = new DOMValidateContext
      (pbk1, nl.item(0)); 
```

如您所见，valContext 仅包含签名元素和公钥（验证签名时需要此密钥）。但在下面的代码中，您可以看到只有通过使用`valContext`对象，才能验证引用。这怎么可能？要验证引用，它需要访问实际的 xmldoc，从中提取引用的元素`<reference>`，然后找到其值的哈希/摘要并将它们与`<digest value>`.
但不知何故，下面的代码有效。我不知道怎么办？有人请解释一下。

```
Iterator i =
      signature1.getSignedInfo().getReferences().iterator();
    for (int j=0; i.hasNext(); j++) {
      boolean refValid = ((Reference) 
        i.next()).validate(valContext);
      System.out.println("ref["+j+"] validity status: " + 
        refValid);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:44:39.513

元素的 DOM`Node`对象不仅仅是元素，它是包含在整个 XML 文档中的元素。如果您查看[Node 接口文档](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)，您会注意到一个名为`getOwnerDocument()`. 因此，从`Node`您传递给`DOMValidateContext`对象的内容中，可以访问整个 XML 文档，从而访问该文档中在您的`Signature`元素中引用的任何内容。

# android - 如何在从横向更改为纵向或反之时解决Android中的Window泄漏异常？

> ID：10005036
> 
> 赞同：0
> 
> 时间：2012-04-04T04:41:13.023
> 
> 标签：android

我得到了窗口泄漏的例外情况，从横向更改为纵向，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:44:48.027

它通常发生在像 A 这样的东西`progressDialog or Dialog`打开并且它`Parent Activity`得到......所以在 Activity 完成之前`Finished`确保它`dismiss`

# qt - qwidget 名称未在代码窗口中以自动完成模式显示

> ID：10005039
> 
> 赞同：0
> 
> 时间：2012-04-04T04:41:28.920
> 
> 标签：qt, ide, qt4, qt-creator

我观察到一些放置在 QDialog 中的 GUI 组件名称没有出现在代码窗口的自动完成下拉菜单中。但是，如果我手动键入它们，代码将编译并执行而不会出现任何错误。

例如，假设我创建了 3 个按钮：qbutton1、qbutton2 和 qbutton3。如果我开始在代码窗口中编写“ui->qbu..”，我会看到两个选项：qbutton1 和 qbutton2。qbutton3 未显示。如果我手动输入 qbutton3，代码会编译并运行。

可能是什么原因？

# php - 一段时间后数据返回 null , Jquery , PHP

> ID：10005040
> 
> 赞同：0
> 
> 时间：2012-04-04T04:41:31.870
> 
> 标签：php, jquery, json, post, file-get-contents

我正在尝试将数据从 PHP 发布到使用 jquery 在 java 中构建的服务器。它以 json 响应。继 PHP , Jquery 后代码

```
 <script  type="text/javascript" charset="utf-8">

    $(function() {
        // wire up the buttons to dismiss the modal when shown
    $("#dialog-form").bind("show", function() {
        $("#dialog-form #add-ques").click(function(e) {
            // do something based on which button was clicked
            // we just log the contents of the link element for demo purposes
            $.post('question_data.php', $("form#gform").serialize(), function(data) {

                             if(data.result=="true"){
                                     //window.location=+data.lastId;
                                    console.log(data);

                                 }else{

                                     $("#dialog-form").modal('hide');

                                 }

                         },"json");

            // hide the dialog box
            $("#dialog-form").modal('hide');

        });

    }); 

</script> 
```

这种将数据发送到服务器的模式形式

```
<div id="dialog-form" class="modal hide fade">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>Add Question</h3>
        </div>
        <div class="modal-body">
            <form  id=gform  >

                <div class="control-group" class="form-horizontal">
                        <label class="control-label" for="question">Write Your Question</label>
                        <div class="controls">
                            <input type="text" class="span3" id="question"
                                name="question" placeholder="Enter Survey Question">
                                <input type="hidden" value=save id="type" name="type" />
                                <input type="hidden" value=12 id="survey_id" name="survey_id" />

                        </div>
                    </div>

                <hr/>
                <label for="name">Write Options</label> 
                            <div class="controls">
                 <input type="text" name="option1"  id="option1"  placeholder="Option 1" />
                <input type="text" name="option2"   id="option2"  placeholder="Option 2" />
                        </div>

                            <div class="controls">
                <input type="text" name="option3"   id="option3" placeholder="Option 3" />
                <input type="text" name="option4"   id="option4" placeholder="Option 4"  />
                        </div>

            </form>

        </div>
        <div class="modal-footer">
            <a href="#" class="btn"  data-dismiss="modal" >Close</a> <a href="#" id="add-ques" class="btn btn-primary">Save
                changes</a>
        </div>

    </div> 
```

这是 PHP 代码，它获取发布的数据并发送到服务器并返回 JSON //question_data.php

```
 if($type=="save"){
    $type= htmlspecialchars(trim($_REQUEST["type"]));
$question= htmlspecialchars(trim($_POST["question"]));
$survey_id= htmlspecialchars(trim($_POST["survey_id"]));
$opt1= htmlspecialchars(trim($_POST["option1"]));
$opt2= htmlspecialchars(trim($_POST["option2"]));
$opt3= htmlspecialchars(trim($_POST["option3"]));
$opt4= htmlspecialchars(trim($_POST["option4"]));

$result = json_decode(file_get_contents("http://mobsurvey.jelastic.servint.net/question/new/?question=$question&survey_id=$survey_id&option1=$opt1&option2=$opt2&option3=$opt3&option4=$opt4"));
$arr = array('result' => $result->result, 'lastId' => $result->lastId);

    header('Content-type: text/json');
    header('Content-type: application/json');

    echo json_encode($arr);

} 
```

JSON O/P

```
 {"result": "true","lastId": 86} 
```

有时上面的代码运行**良好**但有时返回**null**。无法跟踪此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:03:16.023

```
//Track it on the server side

if($type=="save"){
        $surveyname= htmlspecialchars(trim($_POST["name"]));
        $company_id= htmlspecialchars(trim($_POST["company_id"]));
        $flag = 1;
        if($surveyname == null || $surveyname == ""){
          $flag = 0;
        }
        if($company_id == null || $company_id == ""){
          $flag = 0;
        }

    if($flag){
        $result = json_decode(file_get_contents("http://localhost:8080/mobsurvey/survey/new/?name=$surveyname&company_id=$company_id"));
        $arr = array('result' => $result->result, 'lastId' => $result->lastId);

        header('Content-type: text/json');
        header('Content-type: application/json');

      }else{
    $arr = array('Your post has some problems..not posting some of the values');
    }
      echo json_encode($arr);
    } 
```

# synchronization - 服务器文件和本地文件的自动同步

> ID：10005045
> 
> 赞同：0
> 
> 时间：2012-04-04T04:42:24.340
> 
> 标签：synchronization, winscp

是否有任何应用程序可以自动更新服务器文件和本地文件？WinSCP 执行本地到服务器更新和单向。有双向应用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T04:59:28.737

Winscp 是双向的。我目前使用该程序将文档目录自动化到 100 多台计算机。包含此页面上的命令的简单批处理文件：

[http://winscp.net/eng/docs/scriptcommand_synchronize](http://winscp.net/eng/docs/scriptcommand_synchronize)

下面是我用来完成从 ftp 服务器同步到本地目录的批处理文件，删除本地的任何更改。批处理文件还保存所有传输的 XML 日志。

```
@echo off
cd %programfiles(x86)%\winscp\
start /b winscp.exe /log="C:\Sync\logs\!M-!D-!Y@!T.xml" /xmlgroups /command "open   ftp://username:password@ftp.foo.com" "synchronize local -delete -criteria=size     ""C:\Users\jdoe\Documents\Synced Docs"" / 
```

您将要使用的参数是“ **synchronize local -delete -criteria=size** ”

我已经安装了大约一年，效果很好。如果您有任何问题，请告诉我。

# css - 子 div 的不透明度是否可以高于具有 css 的父级？

> ID：10005047
> 
> 赞同：27
> 
> 时间：2012-04-04T04:42:43.857
> 
> 标签：css, opacity

我在页面正文上有一个背景，这是一个我想通过第一级 div 显示但不是第二级的图像

```
<body>
      <div style='opacity:0.9;'><p>This is a wrapper that shows some of the background</p>
          <div style='background-color:#fff;'><p>This is a child div that I want to be all white</p>
          </div>
      </div>
</body> 
```

显然，第二级 div 也获得了 0.9 的不透明度，有没有办法覆盖它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-04T05:23:42.370

嗨，你可以这样做

您可以定义父 opicity

和你一样的孩子

前任。

**css**

```
.parent{
    padding:20px;
    background:rgba(112,81,246,0.3);
}
.child{
    padding:20px;
    background:rgba(112,81,246,0.6);
}
​ 
```

**HTML**

```
<div class="parent">
<div class="child">Hello i m child</div>
</div>​ 
```

现场演示[http://jsfiddle.net/rohitazad/PC4sL/](http://jsfiddle.net/rohitazad/PC4sL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:02:23.137

任何这些都应该让你开始：

[答案 1](http://acidmartin.wordpress.com/2010/11/21/using-rgba-to-prevent-the-css-opacity-inheritance-from-parent-to-child-elements/)

[答案 2](http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/)

# css - 在另一个相同大小和位置的范围内：绝对；

> ID：10005050
> 
> 赞同：0
> 
> 时间：2012-04-04T04:42:53.257
> 
> 标签：css, html, css-position

我对位置属性有疑问，看起来`<div class='bloqued'></div>`，我需要在任何情况下（包括调整页面大小）获得与父 div 相同的大小，这可能吗？谢谢。

[http://jsfiddle.net/vwuUj/](http://jsfiddle.net/vwuUj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:53:36.550

使您的父容器的位置`relative`，如下所示：

```
.text {
  position: relative;
} 
```

这设置了绝对定位的`bloqued`div 内部的宽度和高度限制

[我更新了你的原始脚本](http://jsfiddle.net/vwuUj/1/)来说明。

# java - 哈希表中最大值的键

> ID：10005053
> 
> 赞同：4
> 
> 时间：2012-04-04T04:43:05.907
> 
> 标签：java, hashtable, max

嗨，我有以下对象：

```
Hashtable<Object, Double> 
```

我想在表中找到最大 Double 值的键。最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T04:56:13.283

没有内置函数可以从中获取最大值，`Hashtable`您将不得不遍历所有键并手动确定最大值。

```
Object maxKey=null;
Double maxValue = Double.MIN_VALUE; 
for(Map.Entry<Object,Double> entry : table.entrySet()) {
     if(entry.getValue() > maxValue) {
         maxValue = entry.getValue();
         maxKey = entry.getKey();
     }
} 
```

编辑：查找超过 1 个键的最大值

```
ArrayList<Object> maxKeys= new ArrayList<Object>();
Double maxValue = Double.MIN_VALUE; 
for(Map.Entry<Object,Double> entry : table.entrySet()) {
     if(entry.getValue() > maxValue) {
         maxKeys.clear(); /* New max remove all current keys */
         maxKeys.add(entry.getKey());
         maxValue = entry.getValue();
     }
     else if(entry.getValue() == maxValue)
     {
       maxKeys.add(entry.getKey());
     }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T05:06:37.450

如果在不迭代所有键的情况下这样做真的很重要，只需扩展`HashTable`

```
class MyHashtable extends Hashtable<Object, Double> {

    private Double maxValue = Double.MIN_VALUE;

    @Override
    public synchronized Double put(Object k, Double v) {
        maxValue = Math.max(maxValue, v);
        return super.put(k, v);
    }

    @Override
    public synchronized void clear() {
        super.clear();
        maxValue = Double.MIN_VALUE;
    }

    public Double getMaxValue() {
        return maxValue;
    }

    @Override
    public synchronized Double remove(Object key) {
        // TODO: Left as an Excercise for the user, refer the other answers
        return super.remove(key);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:57:51.860

您可以循环并找到最大值：

```
public static void main(String[] args) {
    Map<Object, Double> maps = new HashMap<Object, Double>();
    maps.put("5", new Double(50.0));
    maps.put("4", new Double(40.0));
    maps.put("2", new Double(20.0));
    maps.put("1", new Double(100.0));
    maps.put("3", new Double(30.0));
    maps.put("5", new Double(50.0));

    Double max = Double.MIN_VALUE;
    for(Object key: maps.keySet()) {
        Double tmp = maps.get(key);
        if(tmp.compareTo(max) > 0) {
            max = tmp;
        }
    }

    System.out.println(max);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T05:01:48.170

它没有特定的库方法，但您可以执行以下操作

```
Hashtable<Object, Double> hashTable = new Hashtable<Object, Double>();
          hashTable.put("a", 10.0);
          hashTable.put("b", 15.0);
          hashTable.put("c", 18.0);

          Collection<Double> values = hashTable.values();
          Double maxValue = Collections.max(values);
          Enumeration<Object> keys = hashTable.keys();
          while(keys.hasMoreElements()){
              Object key = keys.nextElement();
              if((hashTable.get(key)).equals(maxValue))
                  System.out.println(key);
          } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T06:39:25.853

这里有一个重要的 Catch-ya：可能有多个条目具有相同的 MAX double 值。

```
import java.util.ArrayList;
import java.util.Hashtable;
import java.util.List;
import java.util.Map;

public class HashtableTest {

    public static void main(String[] args){
        Hashtable<Object, Double> table = new Hashtable<Object, Double>();
    table.put("a", 10.0);
    table.put("b", 15.0);
    table.put("c", 18.0);
    table.put("d", 18.0);

        List<Object> maxKeyList=new ArrayList<Object>();
        Double maxValue = Double.MIN_VALUE; 
        for(Map.Entry<Object,Double> entry : table.entrySet()) {
             if(entry.getValue() > maxValue) {
                 maxValue = entry.getValue();
                 maxKeyList.add(entry.getKey());
             }
        }
        System.out.println("All max Keys : "+maxKeyList);
    }
} 
```

结果：所有最大键：[b，d]

# ios - 不使用默认模板的拆分视图控制器的好教程？

> ID：10005064
> 
> 赞同：2
> 
> 时间：2012-04-04T04:44:18.867
> 
> 标签：ios, cocoa-touch, ipad, storyboard, uisplitviewcontroller

我是 iOS 开发的新手，正在尝试学习如何使用拆分视图控制器。似乎我能找到的所有教程都使用默认的主从模板。我想学习如何设置一个现有项目。我也在使用 Xcode 4.3、ARC 和情节提要......

几天来我一直试图弄清楚这一点，并阅读了 Ray Wenderlich 的教程，观看了 iTunesU 上 CS193P 课程的相关讲座，阅读了 Apple 文档，并查看了模板中包含的代码Master-Detail 应用程序并阅读简单的 Google 搜索启动的所有教程，但仍然无法弄清楚这一点！

这开始有点令人沮丧了！

有人可以推荐一个好的教程或给我一些代码片段，说明如何使用故事板制作一个非常简单的拆分视图应用程序吗？

谢谢！

-碎纸机2794

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:28:22.943

您确实知道 SplitViewController 应该是根（顶级）控制器，不是吗？因此，您通常会使用主从应用程序模板（带有或不带有情节提要）并根据需要对其进行修改/扩展。

假设您确实知道这一点，那么如果您想采用纯粹的编程方法，您将在代码中创建一个 splitViewController ，就像 Tilo Mitra 所说的任何其他视图控制器一样。

或者，您是否有想要升级到 iPad 的现有 iPhone 应用程序，并在此过程中使用拆分视图控制器？如果是这样，请为 iPad 创建一个新的故事板文件。然后拖入一个拆分视图控制器对象，然后根据您的需要修改/配置（您找到的所有这些教程应该可以帮助您从那里实现您想要的）。

# iphone - 不要在纵向模式下隐藏 SplitViewController

> ID：10005065
> 
> 赞同：1
> 
> 时间：2012-04-04T04:44:22.697
> 
> 标签：iphone, ipad, uisplitviewcontroller

我正在为 iPad 和 iOS >= 4 开发应用程序，并且我正在使用拆分视图控制器。

但我不想在纵向模式下隐藏主面板。

对于 iOS 5，我可以使用

```
-(BOOL)splitViewController:shouldHideViewController:inOrientation; 
```

但是对于 < 5 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:23:01.053

你可以试试 Matt Gemmell 的[MGSplitViewController](http://mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/)

# c# - 任何简单的数据管理应用程序示例？WPF+ C#

> ID：10005067
> 
> 赞同：0
> 
> 时间：2012-04-04T04:44:31.017
> 
> 标签：c#, wpf, sql-server-2008, mvvm, line-of-business-app

从 Assembly 到 BASIC 到 C 和 WPF，我已经学习了 3 年的编程，但我想知道在参考书中，对我创建一个简单/复杂的完整系统没有太大帮助。我以前从未接触过 C#，它在 C# 和 WPF 之间完全不同，许多源代码提供了一个单独的程序，没有链接到数据库，当我尝试连接到数据库时，我的应用程序出现故障。我试图找到一个完整的示例 LOB 应用程序，但是当我弄清楚为什么我从 Codeproject 下载非常复杂时......而且它的 MVVM ......比我想象的更复杂。我需要专业人士给我一个建议......我是一名毕业文凭学生和 WPF 自学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:14:39.537

我认为你应该阅读关于 CLR/C# 的好书（例如[这个](https://rads.stackoverflow.com/amzn/click/com/0735627045)），更具体地说是关于 WPF（我推荐[WPF 4 Unleashed](https://rads.stackoverflow.com/amzn/click/com/0672331195)或[C# 2010 中的 Pro WPF](https://rads.stackoverflow.com/amzn/click/com/1430272058)）

[此外，您可以在WPF 示例](http://code.msdn.microsoft.com/site/search?f%5B0%5D.Type=Technology&f%5B0%5D.Value=WPF)中找到不错的代码示例

最后，你必须编写自己的程序：更多代码 - 更多经验

# php - 为什么两个不同的用户可以使用一个会话登录？

> ID：10005071
> 
> 赞同：0
> 
> 时间：2012-04-04T04:44:56.733
> 
> 标签：php, html, css, codeigniter

我正在使用 codeigniter，并且我有一个 is_logged_in 会话设置。用户 X 和用户 Y 登录，外人无法登录系统。但是，用户 X 登录并可以在同一会话中访问用户 Y 的仪表板。如何确保用户 X 仅使用会话访问他的内容。

```
private function is_logged_in()
{
    $is_logged_in = $this->session->userdata('is_logged_in');
    if(!isset($is_logged_in) || $is_logged_in != TRUE){
        return FALSE;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:49:38.253

用户 X 有自己的 ID。因此，当您从数据库或某处获取内容时，请确保仅获取属于该 ID 的内容

# php - mysql执行中的php错误

> ID：10005072
> 
> 赞同：-1
> 
> 时间：2012-04-04T04:45:06.573
> 
> 标签：php, html

好的，我有这个代码：

```
//this is the hi.php//
<?php
//highlight items//
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("juliver", $con);

$result = mysql_query("SELECT * FROM hi WHERE pp='2'");

$hi = "";

while($row = mysql_fetch_array($result)) //<--- this is the line 13//
  {
  $hi .= "<div id='hicontainer'><a id='download_now' class='imgx' href='#?w=700' rel='popup'><img src='".$row['name']."' />";
  $hi .= "<p>".$row['title']."</p>";
  $hi .= "<a href='#?w=700' id='".$row['id']."' rel='popup' class='imgx'>View full</a>    </div>";
  }

//Lots of lots of code here I just specified those code which in error.//

mysql_close($con); 
```

?>

这是我要实际显示输出的地方。

```
<td>
<!--highlight items-->
<div id="tbtitle">
<img src="Images/galleryicon.png"/><p>Highlight items</p>
</div>
<div id="tblgal">
<? echo $hi; ?>
</div>
</td> 
```

但我收到一条错误消息：“警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 13 行的 C:\xampp\htdocs\madeinusa\hi.php 中给出。”

拜托，我坚持这个。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:34:44.597

`$result`有一个布尔值 - 可能是因为您的查询失败。

在尝试使用它之前，您应该验证结果。

查询后，您可以执行以下操作来查看查询失败的原因：

```
if(!$result)
  exit(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:52:55.113

或者，更简单地说，您可以使用

`$result = mysql_query("SELECT * FROM hi WHERE pp='2'") or die(mysql_error());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:22:21.233

检查这一点：

```
mysql_connect("localhost","username","password"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T06:23:35.230

首先，您应该在代码中使用适当的异常处理。线后

```
$result = mysql_query("SELECT * FROM hi WHERE pp='2'"); 
```

您应该检查它是否返回资源ID或任何错误

```
if(!$result){
    // if you use try-catch, then use
   throw new Exception(mysql_error());
   // Or you can use
   die(mysql_error());
}else{
     while($row = mysql_fetch_array($result)) //<--- this is the line 13//
     {
        $hi .= "<div id='hicontainer'><a id='download_now' class='imgx' href='#?w=700'     rel='popup'><img src='".$row['name']."' />";
        $hi .= "<p>".$row['title']."</p>";
        $hi .= "<a href='#?w=700' id='".$row['id']."' rel='popup' class='imgx'>View    full</a>    </div>";
     }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T04:50:00.213

您的查询可能有错误`"SELECT * FROM hi WHERE pp='2'"`
尝试直接在 mysql 中执行该查询，看看会发生什么。确保表名和列的拼写正确。

此外，尝试在反引号 ` 字符中引用表名和列，以避免意外使用 MySQL 保留字。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-04T05:40:49.097

"SELECT * FROM hi WHERE pp='2'" 查询可能返回 false 表示没有完整填写查询的记录。尝试 echo mysql_num_rows($result); 为了知道没有返回查询的行。

# tomcat - 无法在 Tomcat 上取消部署应用程序

> ID：10005082
> 
> 赞同：1
> 
> 时间：2012-04-04T04:46:53.980
> 
> 标签：tomcat, undeploy

我正在尝试在 Tomcat 管理器 Web UI 中取消部署应用程序，但没有成功。

我已经删除了 webapps 和 work/catalina 中的所有 .war 文件和文件夹，但是当我列出应用程序时，我仍然可以在列表中看到它。Tomcat 说“OK”，但无法删除应用程序。有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:46:06.970

您有某种形式的内存泄漏。应用程序（或者可能是它正在使用的库）打开了一个文件但未能关闭它。无法删除打开的文件和包含它/它们的任何目录。因此，Tomcat 在下一次自动部署检查时将它们自动部署为新的 Web 应用程序。

变通方法/解决方案取决于确切的 Tomcat 版本（您未能在问题中说明）。

# android - 使用 ACTION_VIEW 意图操作启动文件

> ID：10005083
> 
> 赞同：2
> 
> 时间：2012-04-04T04:47:01.523
> 
> 标签：android, android-intent, actionview

我有以下代码来启动文件：

```
 try {
                    path = fileJsonObject.getString("filePath");
                     if (path.indexOf("/") == 0) {
                      path = path.substring(1, path.length()); 
                  }
                   path = root + path;
                   final File fileToOpen = new File(path);
                   if (fileToOpen.exists()) {
                      if (fileToOpen.isFile()) {
                             Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW);
                            myIntent.setData(Uri.parse(path));
                            final String pathToCheck = new String(path);
                            pathToCheck.toLowerCase();
                            if (pathToCheck.endsWith(".wav") || pathToCheck.endsWith(".ogg") || pathToCheck.endsWith(".mp3")
                                || pathToCheck.endsWith(".mid") || pathToCheck.endsWith(".midi") || pathToCheck.endsWith(".amr")) {
                            myIntent.setType("audio/*");
                        } else if (pathToCheck.endsWith(".mpg") || pathToCheck.endsWith(".mpeg") || pathToCheck.endsWith(".3gp")
                                || pathToCheck.endsWith(".mp4")) {
                            myIntent.setType("video/*");
                        } else if (pathToCheck.endsWith(".jpg") || pathToCheck.endsWith(".jpeg") || pathToCheck.endsWith(".gif")
                                || pathToCheck.endsWith(".png") || pathToCheck.endsWith(".bmp")) {
                            myIntent.setType("image/*");
                        } else if (pathToCheck.endsWith(".txt") || pathToCheck.endsWith(".csv") || pathToCheck.endsWith(".xml")) {
                            Log.i("txt","Text fileeeeeeeeeeeeeeeeeeeeeeeeee");
                            myIntent.setType("text/*");
                        } else if (pathToCheck.endsWith(".gz") || pathToCheck.endsWith(".rar") || pathToCheck.endsWith(".zip")) {
                            myIntent.setType("package/*");
                        } else if (pathToCheck.endsWith(".apk")) {
                            myIntent.setType("application/vnd.android.package-archive");
                        }
                             ((Activity) context).startActivityForResult(myIntent, RequestCodes.LAUNCH_FILE_CODE);
                    } else {
                        errUrl = resMsgHandler.errMsgResponse(fileJsonObject,
                        "Incorrect path provided. please give correct path of file");

                        return errUrl;
                    }
                } else {
                    errUrl = resMsgHandler.errMsgResponse(fileJsonObject,"Incorrect path provided. please give correct path of file");

                    return errUrl;
                }
            } catch (Exception e) {
                e.printStackTrace();
                Log.i("err","Unable to launch file" + " " + e.getMessage());
                errUrl = resMsgHandler.errMsgResponse(fileJsonObject,
                "Unable to launch file" + " " + e.getMessage());
                return errUrl;
                }  

 @Override
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
       super.onActivityResult(requestCode, resultCode, data);
         try {

   if (requestCode == RequestCodes.LAUNCH_FILE_CODE) {
            if (resultCode == RESULT_CANCELED) {
                     Log.i("err","errrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
                       String errUrl = responseMsgHandler.errMsgResponse(FileHandler.fileJsonObject, "Unable to launch file");
                mWebView.loadUrl(errUrl);
                } else if (resultCode == RESULT_OK) {
                String successUrl =         responseMsgHandler.launchfileResponse(FileHandler.fileJsonObject);
                mWebView.loadUrl(successUrl);
            } 
```

Amd 结果 ctrl 位于“if (resultCode == RESULT_CANCELED)”。那么如何成功启动呢？

简而言之，我正在这样做：

```
final File fileToOpen = new File(path);  
 if (fileToOpen.exists()) {  
 if (fileToOpen.isFile()) {  
Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW);  
myIntent.setData(Uri.parse(path));  

    if (pathToCheck.endsWith(".txt") || pathToCheck.endsWith(".csv") || pathToCheck.endsWith(".xml"))    {     
                                Log.i("txt","Text fileeeeeeeeeeeeeeeeeeeeeeeeee");  
                                    myIntent.setType("text/*");
  startActivityForResult(myIntent, RequestCodes.LAUNCH_FILE_CODE); 
```

和

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
         super.onActivityResult(requestCode, resultCode, data);
 if (requestCode == RequestCodes.LAUNCH_FILE_CODE) {  
                if (resultCode == RESULT_CANCELED) {  
                Log.i  ("err","errrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
                   String errUrl = responseMsgHandler.errMsgResponse(FileHandler.fileJsonObject, "Unable to launch file");  
                    mWebView.loadUrl(errUrl);   
            }    else if (resultCode == RESULT_OK) {
                    String successUrl = responseMsgHandler.launchfileResponse(FileHandler.fileJsonObject);
                     mWebView.loadUrl(successUrl);  
                } 
```

我的错误日志：

```
 04-04 12:33:08.635: ERROR/AndroidRuntime(3757): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cooliris.media/com.cooliris.media.Gallery}: java.lang.NullPointerException  

    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)  
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)  
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)  
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.access$2300(ActivityThread.java:125) 
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)   
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.os.Handler.dispatchMessage(Handler.java:99)  
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.os.Looper.loop(Looper.java:123)  
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.main(ActivityThread.java:4627)  
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at java.lang.reflect.Method.invokeNative(Native Method)  
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at java.lang.reflect.Method.invoke(Method.java:521)  
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)  
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629) 
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at dalvik.system.NativeStart.main(Native Method)
   04-04 12:33:08.635: ERROR/AndroidRuntime(3757): Caused by: java.lang.NullPointerException
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at com.cooliris.media.Gallery.onCreate(Gallery.java:305) 
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)  
    04-04 12:33:08.635: ERROR/AndroidRuntime(3757):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:03:45.223

试试这个

```
if (item_ext.equalsIgnoreCase(".mp3") || 
                 item_ext.equalsIgnoreCase(".m4a")||
                 item_ext.equalsIgnoreCase(".mp4")) {

            if(mReturnIntent) {
                returnIntentResults(file);
            } else {
                Intent i = new Intent();
                i.setAction(android.content.Intent.ACTION_VIEW);
                i.setDataAndType(Uri.fromFile(file), "audio/*");
                startActivity(i);
            }
        }

        /*photo file selected*/
        else if(item_ext.equalsIgnoreCase(".jpeg") || 
                item_ext.equalsIgnoreCase(".jpg")  ||
                item_ext.equalsIgnoreCase(".png")  ||
                item_ext.equalsIgnoreCase(".gif")  || 
                item_ext.equalsIgnoreCase(".tiff")) {

            if (file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent picIntent = new Intent();
                    picIntent.setAction(android.content.Intent.ACTION_VIEW);
                    picIntent.setDataAndType(Uri.fromFile(file), "image/*");
                    startActivity(picIntent);
                }
            }
        }

        /*video file selected--add more video formats*/
        else if(item_ext.equalsIgnoreCase(".m4v") || 
                item_ext.equalsIgnoreCase(".3gp") ||
                item_ext.equalsIgnoreCase(".wmv") || 
                item_ext.equalsIgnoreCase(".mp4") || 
                item_ext.equalsIgnoreCase(".ogg") ||
                item_ext.equalsIgnoreCase(".wav")) {

            if (file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent movieIntent = new Intent();
                    movieIntent.setAction(android.content.Intent.ACTION_VIEW);
                    movieIntent.setDataAndType(Uri.fromFile(file), "video/*");
                    startActivity(movieIntent);
                }
            }
        }

        /*zip file */
        else if(item_ext.equalsIgnoreCase(".zip")) {

            if(mReturnIntent) {
                returnIntentResults(file);

            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                AlertDialog alert;
                mZippedTarget = mFileMag.getCurrentDir() + "/" + item;
                CharSequence[] option = {"Extract here", "Extract to..."};

                builder.setTitle("Extract");
                builder.setItems(option, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        switch(which) {
                            case 0:
                                String dir = mFileMag.getCurrentDir();
                                mHandler.unZipFile(item, dir + "/");
                                break;

                            case 1:
                                mDetailLabel.setText("Holding " + item + 
                                                     " to extract");
                                mHoldingZip = true;
                                break;
                        }
                    }
                });

                alert = builder.create();
                alert.show();
            }
        }

        /* gzip files, this will be implemented later */
        else if(item_ext.equalsIgnoreCase(".gzip") ||
                item_ext.equalsIgnoreCase(".gz")) {

            if(mReturnIntent) {
                returnIntentResults(file);

            } else {
                //TODO:
            }
        }

        /*pdf file selected*/
        else if(item_ext.equalsIgnoreCase(".pdf")) {

            if(file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent pdfIntent = new Intent();
                    pdfIntent.setAction(android.content.Intent.ACTION_VIEW);
                    pdfIntent.setDataAndType(Uri.fromFile(file), 
                                             "application/pdf");

                    try {
                        startActivity(pdfIntent);
                    } catch (ActivityNotFoundException e) {
                        Toast.makeText(this, "Sorry, couldn't find a pdf viewer", 
                                Toast.LENGTH_SHORT).show();
                    }
                }
            }
        }

        /*Android application file*/
        else if(item_ext.equalsIgnoreCase(".apk")){

            if(file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent apkIntent = new Intent();
                    apkIntent.setAction(android.content.Intent.ACTION_VIEW);
                    apkIntent.setDataAndType(Uri.fromFile(file), "application/vnd.android.package-archive");
                    startActivity(apkIntent);
                }
            }
        }

        /* HTML file */
        else if(item_ext.equalsIgnoreCase(".html")) {

            if(file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent htmlIntent = new Intent();
                    htmlIntent.setAction(android.content.Intent.ACTION_VIEW);
                    htmlIntent.setDataAndType(Uri.fromFile(file), "text/html");

                    try {
                        startActivity(htmlIntent);
                    } catch(ActivityNotFoundException e) {
                        Toast.makeText(this, "Sorry, couldn't find a HTML viewer", 
                                            Toast.LENGTH_SHORT).show();
                    }
                }
            }
        }

        /* text file*/
        else if(item_ext.equalsIgnoreCase(".txt")) {

            if(file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent txtIntent = new Intent();
                    txtIntent.setAction(android.content.Intent.ACTION_VIEW);
                    txtIntent.setDataAndType(Uri.fromFile(file), "text/plain");

                    try {
                        startActivity(txtIntent);
                    } catch(ActivityNotFoundException e) {
                        txtIntent.setType("text/*");
                        startActivity(txtIntent);
                    }
                }
            }
        }

        /* generic intent */
        else {
            if(file.exists()) {
                if(mReturnIntent) {
                    returnIntentResults(file);

                } else {
                    Intent generic = new Intent();
                    generic.setAction(android.content.Intent.ACTION_VIEW);
                    generic.setDataAndType(Uri.fromFile(file), "text/plain");

                    try {
                        startActivity(generic);
                    } catch(ActivityNotFoundException e) {
                        Toast.makeText(this, "Sorry, couldn't find anything " +
                                       "to open " + file.getName(), 
                                       Toast.LENGTH_SHORT).show();
                    }
                }
            }
        } 
```

resultCode 必须等于 RESULT_CANCELED 因为退出该活动的唯一方法是按下手机上的后退按钮，这会发布取消的结果代码而不是 ok 结果代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:04:23.210

我认为出于这个目的，您不会像这样设置结果

```
youractivity.setResult(Activity.RESULT_OK) 
```

在你的情况下可能是`youractivity.setResult(RESULT_OK)`之前`startactivityforresult(intent)`

# sencha-touch - Sencha Touch 2 xtype 未按预期工作

> ID：10005084
> 
> 赞同：1
> 
> 时间：2012-04-04T04:47:05.530
> 
> 标签：sencha-touch, extjs, sencha-touch-2

所以我正在构建我的第一个 Sencha Touch 应用程序，但在渲染我定义的面板时遇到了问题。

登录.js

```
Ext.define("Blog.view.Login", {
  extend:'Ext.form.Panel',
  requires : ['Ext.form.FieldSet', 'Ext.field.Email', 'Ext.field.Password'],
  xtype: 'loginpanel',

  config:{
    scrollable:true,
    title: "Log In",

    items:[
      {
        html:"<center><h1>OkShit</h1></center>",
        styleHtmlContent:true
      },
      {
        xtype:'fieldset',
        items:[
          {
            xtype:'emailfield',
            name:'email',
            placeHolder:'E-Mail'
          },

          {
            xtype:'passwordfield',
            name:'password',
            placeHolder:'Password'
          }
        ]
      },
      {
        xtype:'button',
        text:'Log In',
        style:{
          marginBottom:'20px'
        }
      },
      {
        xtype:'button',
        text:'Sign Up'
      }
    ]
  }

}); 
```

主.js

```
Ext.define("Blog.view.Main", {
  extend:'Ext.Container',

  config:{
    items:[
      {
        xtype :'loginpanel'
      }
    ]
  }
}); 
```

应用程序.js

```
views: ['Main', 'Login'], 
```

我已经做了一些研究，有人建议使用

```
alias: 'widget.loginpanel' 
```

我试过了，但还是不行。有没有人对此有任何解决方案？

**编辑** 这就是我现在拥有的，它仍然没有做任何事情=（

```
Ext.define("Blog.view.Login", {
  extend:'Ext.form.Panel',
  alias: 'widget.loginpanel',
  requires : ['Ext.form.FieldSet', 'Ext.field.Email', 'Ext.field.Password'], ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:14:24.593

基本上，没有必要使用**别名**，因为您已经定义了该类并在 Sencha Touch 2 中使用**xtype注册了它。**

您使用的是哪个浏览器？请查看浏览器调试器中是否记录了任何错误并粘贴到此处。我会尽力帮助你。

# android - 如何比较 sqlite 数据库中的文本数据值？

> ID：10005091
> 
> 赞同：1
> 
> 时间：2012-04-04T04:48:21.700
> 
> 标签：android, sqlite

在这里，我将 sqlite 数据库中的文本值与字符串（部分、分支等）进行比较。这是正确的比较方法吗？我在 query() 语句中没有收到这样的列错误。

```
public Cursor getAllRows(String year, String section, String branch,
                         String subject, String date) {    

  return db.query(
      DATABASE_TABLE,
      null, 
      KEY_YEAR + "=" + year + 
        " AND "+ KEY_SECTION + "=" + section +
        " AND "+ KEY_BRANCH + "=" + branch + 
        " AND "+ KEY_SUBJECT + "=" + subject + 
        " AND "+ KEY_DATE + "=" + date,
      null, 
      null, 
      null, 
      null
  );
} 
```

日志猫

```
04-04 10:31:51.568: ERROR/AndroidRuntime(21928):
   Caused by:
     android.database.sqlite.SQLiteException:
       no such column: CSE: ,
       while compiling:
         SELECT * 
         FROM student 
         WHERE year=2 AND branch like CSE 
         AND subject=SE AND date=04-Apr-2012

04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at sharath.android.trail.DBAdapter.getAllRows(DBAdapter.java:100)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at sharath.android.trail.MytableActivity.onCreate(MytableActivity.java:52)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-04 10:31:51.568: ERROR/AndroidRuntime(21928): ... 20 more 
```

实际上 CSE 是属于分支列的一个值，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:10:43.230

查询中的字符串常量需要用单引号 (') 字符括起来。您正在插入不带引号的字符串，因此它们被解释为列引用。

通常，直接插入字符串值是个坏主意。您应该创建一个带有绑定参数的语句。

**这将自动转义并引用字符串：**

```
public Cursor getAllRows(String year, String section, String branch,
    String subject, String date)
{
    return db.rawQuery("SELECT * FROM " +
         DATABASE_TABLE + " WHERE " +
         KEY_YEAR + "=? AND " +
         KEY_SECTION + "=? AND " +
         KEY_BRANCH + "=? AND " +
         KEY_SUBJECT + "=? AND "+
         KEY_DATE + "=?",
         new String[] { year, section, branch, subject, date }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:41:24.407

你能告诉我 KEY_YEAR,KEY_SECTION,KEY_BRANCH,KEY_SUBJECT,KEY_DATE 是代表列名的字符串还是直接列名，如果这是代表列名的字符串，那么

请试试这个

```
 return db.query(DATABASE_TABLE,null, 
    KEY_YEAR + "='" + year +"' "
    "AND "+ KEY_SECTION + "='" + section +"' "
    "AND "+ KEY_BRANCH + "='" + branch + "' "
    "AND "+ KEY_SUBJECT + "='" + subject +"' "
    "AND "+ KEY_DATE + "='" + date+"'",
    null, 
    null, 
    null, 
    null); 
```

或者如果这是直接列名，请试试这个

```
return db.query(DATABASE_TABLE,null, 
         "KEY_YEAR='"+ year +"' AND"
         "KEY_SECTION='"+section +"' AND"
         "KEY_BRANCH='"+branch + "' AND"
         "KEY_SUBJECT='"+subject +"' AND"
         "KEY_DATE='"+date+"'",
         null, 
         null, 
         null, 
         null); 
```

# file-io - 在 vb.net 中有一种方法可以将字符串散列成 long

> ID：10005094
> 
> 赞同：-1
> 
> 时间：2012-04-04T04:48:43.440
> 
> 标签：file-io, hash

基本上我们想保留记忆。它适用于制作独特的大文件等任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:57:01.740

object.GetHashCode

就是这样。整数就足够了。

# objective-c - C/Java/等。Objective-C 中的样式数组

> ID：10005097
> 
> 赞同：2
> 
> 时间：2012-04-04T04:48:55.047
> 
> 标签：objective-c, arrays, data-structures, nsarray, primitive

我知道 Apple 在让您使用`NS`对象而不是真正的原始类型方面很重要，但我需要数组的功能（即直接访问索引处的项目）。但是，他们似乎非常热衷于使用`NS`对象，以至于我无法在网上或教科书中找到有关如何使用基本原始数组的教程。**我想要在 Java 中做这样的事情**：

```
String inventory[] = new String[45];

inventory[5] = "Pickaxe";
inventory[12] = "Dirt";
inventory[8] = "Cobblestone";

inventory[12] = null;

System.out.println("There are " + inventory.length + " slots in inventory: " + java.util.Arrays.toString(inventory)); 
```

以下是我在 Objective-C 中得到的最接近的，但它不能正常运行：

```
NSString *inventory[45];

inventory[5] = @"Pickaxe";
inventory[12] = @"Dirt";
inventory[8] = @"Cobblestone";

inventory[12] = nil;

NSArray *temp = [NSArray arrayWithObjects:inventory count:45];
NSLog(@"There are %i slots in inventory: %@", [temp count], [temp description]); 
```

另外，如果可能的话，OC中是否有一些东西可以让我计算数组中非空/非零对象的数量？（这样，我可以知道物品栏中还剩下多少空间，这样玩家就无法打包任何东西，如果它已满）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:54:31.253

使用 c 风格的数组。任何 c 代码都可以在目标 c 中工作。除非您非常小心，否则尽量不要将客观的 c 样式对象与 c 样式代码混合。内存管理的东西变得很奇怪，而且很容易混淆对象类型和原语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:57:21.807

通常，您会使用`NSArray`/ `NSMutableArray`，尽管您也可以使用 C 数组。

`NSArray`（和大多数 Foundation 集合）不能包含`nil`条目 -`NSPointerArray`如果需要`nil`值，您可以使用 (OS X)，或者简单地使用`[NSNull null]`in an`NSArray`来指定`nil`。

这是您使用的程序`NSArray`：

```
NSMutableArray * inventory = [NSMutableArray array];
for (NSUInteger idx = 0; idx < 45; ++idx) {
  [inventory addObject:[NSNull null]];
}

[inventory replaceObjectAtIndex:5 withObject:@"Pickaxe"];
[inventory replaceObjectAtIndex:12 withObject:@"Dirt"];
[inventory replaceObjectAtIndex:8 withObject:@"Cobblestone"];

[inventory replaceObjectAtIndex:12 withObject:[NSNull null]];

NSArray *temp = [NSArray arrayWithObject:inventory];
NSLog(@"There are %i slots in inventory: %@", [temp count], [temp description]); 
```

* * *

> 另外，如果可能的话，OC中是否有一些东西可以让我计算数组中非空/非零对象的数量？

An NSArray is a CFArray - they are "toll free bridged". Use `CFArrayGetCountOfValue` with `[NSNull null]` as the value to seek. Most of the CF-APIs are available in the NS-APIs, but not this one. You could easily wrap it in a category, if needed often.

# graph - 如何覆盖引用类型的 println 行为

> ID：10005102
> 
> 赞同：6
> 
> 时间：2012-04-04T04:49:40.960
> 
> 标签：graph, clojure, charsequence, pprint, cyclic-graph

我有一个使用`dosync`and创建的循环图`ref-set`。当我将它传递给我时，`println`我得到了`java.lang.StackOverflowError`我所期望的 a，因为它实际上是在尝试打印一个无限嵌套的结构。

我发现，如果我这样做`(str my-ref)`，它会创建一些看起来像`vertex@23f7d873`但实际上并没有尝试遍历结构并将所有内容打印出来的东西，所以这从直接意义上解决了问题，但只有当我非常小心我的内容时才有帮助m 打印到屏幕上。我希望能够调用`(println my-graph)`让它打印`ref`为某种类型的自定义文本（可能涉及`str`），以及其他非参考的东西。

目前我有一个自定义打印功能，它自己打印结构的每个元素并完全跳过打印`ref`. （事实证明，看`vertex@23f7d873`实际上并不是很有用）。这使用起来很尴尬，并且极大地阻碍了在 REPL 中对内容进行随意检查，并且还阻止了 Emacs 检查员在我处于`swank.core/break`调试状态时查看内容。

一个细节是`ref`实际上是 a 中的一个值`defstruct`，它还包含我试图正常打印的一些其他内容。

所以我想知道我应该走哪条路。我看到这些选项：

1.  找出协议`extend-type`并将其应用于`CharSequence`my `defstruct`ed 结构，以便在遇到 a 时`ref`它可以正常工作。这仍然需要对结构进行逐个字段的检查，并在涉及到 时需要特殊情况`ref`，但至少它将问题定位到结构而不是包含该结构的任何东西。
2.  找出`CharSequence`在遇到`ref`. 这允许更本地化的行为，并允许我在 REPL 上查看循环引用，即使它不在结构内。这是我的首选。
3.  弄清楚如何做一些`toString`我认为在我做的时候在某种程度上被调用的事情`println`。我对这个选项最无知。对其他的也很无知，但我一直在阅读`Joy of Clojure`，现在我都受到了启发。

同样，此解决方案应适用于`print`和`pprint`其他任何在尝试打印循环引用时通常会出错的东西。我应该采用什么策略？

非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:29:56.827

您要做的是创建一个新的命名空间并定义您自己的打印函数，这些函数模拟 clojure 打印对象的方式，并且默认为 clojure 的方法。

详细地：

作为奖励，如果您使用的是 clojure 1.4.0，则可以使用标记文字，以便也可以读取输出。您需要`*data-readers*`为自定义标记和返回 ref 对象的函数覆盖映射。您还需要覆盖读取字符串行为以确保调用绑定`*data-readers*`。

我为 java.io.File 提供了一个示例

```
 (ns my.print
   (:refer-clojure :exclude [pr-str read-string print-method]))

 (defmulti print-method (fn [x writer]
         (class x)))

 (defmethod print-method :default [o ^java.io.Writer w]
       (clojure.core/print-method o w))

 (defmethod print-method java.io.File [o ^java.io.Writer w]
       (.write w "#myprint/file \"")
       (.write w (str o))
       (.write w "\""))

 (defn pr-str [obj]
   (let [s (java.io.StringWriter.)]
     (print-method obj s)
     (str s)))

 (defonce reader-map
   (ref {'myprint/file (fn [arg]
               (java.io.File. arg))}))

 (defmacro defdata-reader [sym args & body]
   `(dosync
     (alter reader-map assoc '~sym (fn ~args ~@body))))

 (defn read-string [s]
   (binding [*data-readers* @reader-map]
     (clojure.core/read-string s))) 
```

现在你可以这样打电话了`(println (my.print/pr-str circular-data-structure))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T10:42:58.640

我找到了我的解决方案——只需创建一个为每种特定类型重载的多`clojure.core/print-method`方法，然后从多方法中调用泛型函数。在这种情况下，每个多方法调用`print-graph-element`知道如何处理引用的泛型（它只是打印出被引用对象的哈希值，而不是试图打印出被引用对象的值）。在这种情况下，我假设 print-method 的调度函数就是`(type <thing>)`这样调度类型的，这就是我编写多方法的方式。我实际上找不到任何文档说明 print-method dispatch 是如何工作的，但它确实看起来是这样的。

此解决方案允许我只键入对象的名称，例如`v0`（由 repl 中的 (make-vertex) 生成，并且 repl 调用 print-method，从而防止我的 StackOverflow 错误。

```
(defmethod clojure.core/print-method vertex [v writer]
  (print-graph-element v))
(defmethod clojure.core/print-method edge [e writer]
  (print-graph-element e)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T15:31:55.447

如果您只想能够打印带有循环的数据结构，请尝试设置`*print-level*`以限制打印机下降的深度。

```
user=> (def a (atom nil))
#'user/a
user=> (set! *print-level* 3)
3
user=> (reset! a a)
#<Atom@f9104a: #<Atom@f9104a: #<Atom@f9104a: #>>> 
```

`*print-length*`当您处理无限长度的数据时，还有一个var 很有用。

# c++ - 动态改变数组c ++的大小

> ID：10005110
> 
> 赞同：1
> 
> 时间：2012-04-04T04:50:36.087
> 
> 标签：c++, arrays, visual-c++

我有一个数组定义为；

> 静态双 Temp_data[TABLE_SIZE];

我想根据用户输入更改数组的大小。这可能吗？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T04:52:28.267

不，您可能想使用`std::vector<double> Temp_data;`

然后你可以使用它的`resize()`成员函数来设置你认为合适的大小。

编辑：为了清楚起见，`new`如果可以的话，您通常希望避免直接使用（在这种情况下，您可以很容易地）。直接使用`new`是许多类型错误的恒定来源。`std::vector`处理相当多的难以正确纠正的极端情况`new`，确保数据超出范围时得到清理等

我之前说过，在这里我要重复一遍：有一次，你别无选择，只能编写使用`new`. 现在，你确实有一个选择——你应该锻炼它。给定一个现代编译器和标准库，几乎没有任何理由使用`new`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:51:59.347

使用动态内存分配。

```
int size;
cin>>size
int *ptr = new int[size]; 
```

[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T04:53:22.497

T *p 数据

pData = new T[NUM_ELEMENTS];

基本上使用 new 运算符。从任何 C++ 参考中阅读有关 new 的更多信息

# asp.net - 如何将 GridView 行传递给 TemplateField 函数？

> ID：10005111
> 
> 赞同：4
> 
> 时间：2012-04-04T04:50:38.817
> 
> 标签：asp.net, gridview, templatefield

我有一个 GridView，它有 3 列：FirstName、LastName 和一个 TemplateField FullName，我将 FirstName 和 LastName 串在一起。

假设调用 DisplayFullName 是我想用来连接 FirstName 和 LastName 的函数**，我如何将行参数传递给函数以及如何声明函数的参数？**谢谢。

这是我的 FullName 列的代码：

> ```
>  <asp:TemplateField HeaderText="FullName">
>             <ItemTemplate>
>                 <%# DisplayFullName(???) %>
>             </ItemTemplate>
>         </asp:TemplateField> 
> ```

这是我对该函数的声明：

> ```
> protected string DisplayFullName(???)
>   { ... } 
> ```

这 ？？？是我需要帮助的地方。或者我是否需要通过该行？如果每次调用 DisplayFullName，则“当前”行是已知的。如果是这样，我如何访问 DisplayFullName 中的当前行？

**为了问题的清晰起见，我简化了操作。实际上，我需要的行中最多可以有 20 个值，我想在调用的函数中进行一些计算。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:06:06.030

我不知道你为什么在这里调用一个函数来显示全名。您可以在代码中使用这样的方式来实现全名：

```
 <asp:TemplateField HeaderText="Name">
                <ItemTemplate>
                    <%#Eval("FirstName") %>&nbsp;<%#Eval("LastName") %>   
                </ItemTemplate>
            </asp:TemplateField>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:37:02.340

@RJIGO：您可以使用这样的功能：

```
<asp:TemplateField HeaderText="Name">
     <ItemTemplate>
        <%# DisplayFullName(Eval("FirstName"), Eval("LastName"))%>         
        </ItemTemplate>
     </asp:TemplateField> 
```

你的代码后面的方法会像这样

```
 protected string DisplayFullName(object FirstName, object LastName)
  {
      return Convert.ToString(FirstName)+Convert.ToString(LastName);
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-04T22:35:53.567

不得不发布，因为似乎没有人给你一个完全符合你要求的答案 - 将行传递给后端函数。

只需将“Container.DataItem”传递给您的函数 - 这是 DataRow

```
<asp:TemplateField>
    <ItemTemplate> 
        <%# DisplayFullName(Container.DataItem) %>
    </ItemTemplate> 
</asp:TemplateField> 
```

然后在 CodeBehind 中，您可以将其作为 DataRowView 进行操作：

```
public string DisplayFullName(object containerDataItem)
{
    string firstName = ((DataRowView)containerDataItem)["FirstName"].ToString();
    string lastName = ((DataRowView)containerDataItem)["LastName"].ToString();
    ... 
```

希望这可以帮助！

# javascript - 如果是今年，我怎样才能让我的 javascript 隐藏过去的几个月和几天？

> ID：10005112
> 
> 赞同：0
> 
> 时间：2012-04-04T04:50:43.743
> 
> 标签：javascript, javascript-events

如果是当前年份，我需要在下拉菜单中隐藏以前的日期和月份。因此，显然不能将日期设置为今天之前的日期。因此，如果选择了 2012 年，则选择器中将不存在 1 月、2 月和 3 月的月份，4 月 1 日也不会存在（已通过）。设置为 2013 将提供所有月/日。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:15:38.950

可能是这种伪代码可以帮助你。

1.  从服务器获取当前日期。不要从客户端获取它，因为它很容易修改。

2.  创建一个包含所有 12 个月（如 Jan、Feb 等）的数组。

3.  从日期获取当前月份。

4.  现在过滤并获取包括当前月份在内的所有月份

5.  现在将当前日期显示为列表中的第一个元素

6.  另外，列出剩余的月份。

# iphone - 如何隐藏标签栏项目？

> ID：10005114
> 
> 赞同：0
> 
> 时间：2012-04-04T04:50:51.327
> 
> 标签：iphone, ios5, xcode4.3

我是这个 iphone 开发的新手。我创建了一个标签栏应用程序，它由 6 个标签组成，这是在 appdelegaate 文件中创建标签栏控制器的代码 didfinishlaunching

```
UIViewController *viewController1 = [[[cardsAvailable1 alloc] 
                                      initWithNibName:@"cardsAvailable1" bundle:nil] autorelease];
UIViewController *viewController2 = [[[fetchcard1 alloc] 
                                      initWithNibName:@"fetchcard1" bundle:nil] autorelease];
UIViewController *viewController3 = [[[registration alloc] 
                                      initWithNibName:@"registration" bundle:nil] autorelease];
UIViewController *viewController4 = [[[logintab alloc] 
                                      initWithNibName:@"logintab" bundle:nil] autorelease];

UIViewController *viewController5 = [[[registration alloc] 
                                      initWithNibName:@"logout" bundle:nil] autorelease];
UIViewController *viewController6 = [[[logintab alloc] 
                                      initWithNibName:@"myprofile" bundle:nil] autorelease];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];

self.tabBarController.viewControllers = [NSArray arrayWithObjects:
                                         [[[UINavigationController alloc] initWithRootViewController:viewController1] autorelease], 
                                         [[[UINavigationController alloc] initWithRootViewController:viewController2] autorelease],
                                         [[[UINavigationController alloc] initWithRootViewController:viewController3] autorelease],
                                         [[[UINavigationController alloc] initWithRootViewController:viewController4] autorelease], 
                                         [[[UINavigationController alloc] initWithRootViewController:viewController5] autorelease],
                                         [[[UINavigationController alloc] initWithRootViewController:viewController6] autorelease],
                                         nil];
 self.tabBarController.selectedIndex = 3;

self.window.rootViewController = self.tabBarController;
[self.window addSubview:self.tabBarController.view];

[self.window makeKeyAndVisible]; 
```

现在我的问题是在一个人登录后，即单击登录页面中存在的登录按钮我想隐藏两个标签栏项目，即注册页面和登录页面，并且需要带标签栏的注销页面和 myprofile 页面包括获取卡和可用卡，有人可以建议我一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:58:52.960

您可以通过编辑选项卡栏的视图控制器数组来添加和删除选项卡栏上的项目。

```
NSMutableArray newArrayOfItems = [[NSMutableArray alloc] initWithArray:self.tabBarController items]];
[newArrayOfItems removeObjectAtIndex:indexOfUnneededItem];
[self.tabBarController setItems:newArrayOfItems animated:true];
[newArrayOfItems release]; 
```

在您的示例中并响应您的评论，只要您导入应用程序委托标头，以下代码就会起作用。

```
NSMutableArray newArrayOfItems = [[NSMutableArray alloc] initWithArray: [[[UIApplication sharedApplication] delegate].tabBarController items]];
[newArrayOfItems removeObjectAtIndex:indexOfUnneededItem];
[[[UIApplication sharedApplication] delegate].tabBarController setItems:newArrayOfItems animated:true];
[newArrayOfItems release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:22:38.917

您可以`hidesBottomBarWhenPushed`在推送视图控制器之前设置属性。有下面的示例代码：

```
LoginController *lc = [[LoginController alloc] initWithNibName:nil bundle:nil];
lc.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:lc animated:YES];
[lc release]; 
```

# opengl - 以度为单位的向量的 OpenGL 方向（X、Y、Z）

> ID：10005117
> 
> 赞同：0
> 
> 时间：2012-04-04T04:51:14.197
> 
> 标签：opengl, vector, trigonometry, angle

我有一个对象沿 X、Y、Z 方向的 3D 向量行进……我需要根据每个轴（x 轴、y 轴和 z 轴）旋转对象。

我如何以度数获得这些测量值？

（我正在使用 OpenGL 并且只知道`glRotatef(...)`） [glRotatef(...)[此处的文档]](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml) 看着[这个](https://stackoverflow.com/questions/993332/obtaining-the-camera-rotation-in-radians-on-the-x-y-and-z-axis-in-opengl)问题，答案给出了

> 视图向量 =`<x, y, z>`
> 
> r = sqrt(x² + y² + z²)
> 
> phi = arctan2(y, x)
> 
> theta = arccos(z / r)

但从[这个wiki](http://en.wikipedia.org/wiki/Spherical_coordinate_system)页面我了解到：

[伊格纳西奥·巴斯克斯-艾布拉姆斯编辑]

> phi => 围绕 Z 轴的角度
> 
> theta => x/y 平面之间的角度

但是我如何找到 Y？还是我需要？

真正的问题是，我如何用 来表示这一点`glRotatef(...)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:56:03.350

Theta 是 XY 平面上方的角度。Phi 是围绕 Z 轴的角度。一般来说，n维极坐标有n-1个角度分量和1个半径分量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T20:30:30.833

我已经花了 3 天多的时间来解决这个问题，我得出了这个结论：如果你有 vector3 feparticle_velocity 而不是你可以找到角度 phi 和 theta，为什么你需要这个角度 - 因为你可以沿着速度向量旋转顶点：

```
 float gaPhi(vec3 v1) {
       float r = length(v1);
       float phi = atan(v1.y / v1.x);
       return phi;
    }
    float gaTheta(vec3 v1) {
       float r = length(v1);
       float theta = acos(v1.z / r);
       return theta;
    }

    float rot_x = 0.0;
    float rot_y = gaTheta(vel) - pi/2;
    if (vel.x >= 0 && vel.y >= 0 && vel.z >= 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x < 0 && vel.y >= 0 && vel.z >= 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x >= 0 && vel.y < 0 && vel.z >= 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x >= 0 && vel.y >= 0 && vel.z < 0) {
       //ok
       rot_y = -rot_y; 
    }
    if (vel.x < 0 && vel.y < 0 && vel.z >= 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x >= 0 && vel.y < 0 && vel.z < 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x < 0 && vel.y >= 0 && vel.z < 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x < 0 && vel.y < 0 && vel.z < 0) {
       //ok
       rot_y = rot_y + pi;
    }

    float rot_z = -gaPhi(vel)  ; 
```

glsl顶点着色器：

```
layout(location = 0) in vec3 vertex;
layout(location = 1) in vec3 normal;
layout(location = 2) in vec2 texCoord;

uniform mat4 view; // camera view matrix
uniform mat4 proj; // camera projection matrix
uniform float time; // camera projection matrix

in float particle_radius; // particle radius
in float particle_mass; // particle mass
in vec3 particle_position; // particle position
in vec3 particle_velocity; // particle velocity

out vec2 frag_uv; // pass UV to fragment shader
out float frag_mass; // pass mass to fragment shader
out vec3 frag_velocity; // pass velocity to fragment shader
out vec4 texCoords; 

float gaPhi(vec3 v1) {
    float r = length(v1);
    float phi = atan(v1.y / v1.x);
    return phi;
}
float gaTheta(vec3 v1) {
    float r = length(v1);
    float theta = acos(v1.z / r);
    return theta;
}

void main() {
    frag_uv = texCoord; //sprite_uv;
    texCoords = vec4(texCoord, 0.0, 0.0);
    frag_mass = particle_mass;
    frag_velocity = particle_velocity;

    vec3 vert = vertex * max(10,min(100,particle_radius));
    vec3 vertn = normalize(vertex);
    float vertl = length(vert);
    vec3 vel =  particle_velocity;
    vec3 vel_dir =  normalize(particle_velocity);
    float pi = 3.14159265359;
    vec4 posnew = vec4(vert, 1.0);    

    float rot_x = 0.0;
    float rot_y = gaTheta(vel) - pi/2;
    if (vel.x >= 0 && vel.y >= 0 && vel.z >= 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x < 0 && vel.y >= 0 && vel.z >= 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x >= 0 && vel.y < 0 && vel.z >= 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x >= 0 && vel.y >= 0 && vel.z < 0) {
       //ok
       rot_y = -rot_y; 
    }
    if (vel.x < 0 && vel.y < 0 && vel.z >= 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x >= 0 && vel.y < 0 && vel.z < 0) {
       //ok
       rot_y = -rot_y;
    }
    if (vel.x < 0 && vel.y >= 0 && vel.z < 0) {
       //ok
       rot_y = rot_y + pi;
    }
    if (vel.x < 0 && vel.y < 0 && vel.z < 0) {
       //ok
       rot_y = rot_y + pi;
    }

    float rot_z = -gaPhi(vel)  ;

    mat4 rx = mat4( 1.0, 0.0, 0.0, 0.0,
                    0.0,cos(rot_x),sin(rot_x), 0.0,
                    0.0,-sin(rot_x),cos(rot_x), 0.0,
                    0.0, 0.0, 0.0, 1.0);

    mat4 ry = mat4( cos(rot_y),0.0, -sin(rot_y), 0.0,
                    0.0, 1.0, 0.0, 0.0,
                    sin(rot_y), 0.0, cos(rot_y), 0.0,
                    0.0,0.0,0.0,1.0);

    mat4 rz = mat4( cos(rot_z), sin(rot_z), 0.0, 0.0,
                   -sin(rot_z), cos(rot_z), 0.0, 0.0,
                   0.0        , 0.0       ,1.0 ,0.0,
                   0.0        , 0.0       ,0.0 ,1.0);  

    posnew = posnew * rx * ry * rz;     
    vec4 pos = proj * view * vec4(posnew.xyz + particle_position, 1.0);

    gl_Position = pos;
} 
```

# actionscript-3 - 如何使用 actionscript 访问对象的声明？

> ID：10005120
> 
> 赞同：0
> 
> 时间：2012-04-04T04:51:38.440
> 
> 标签：actionscript-3, apache-flex

我想遍历一个对象的验证器。验证器必须在声明标签中声明。一个人如何滚动声明？如果不能，除了滚动浏览对象的所有属性之外，是否有更好的定位所有验证器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:31:50.310

只需将验证器放在一个集合中（例如一个数组）。之后，您可以简单地遍历集合的项目。

```
<fx:Declarations>
    <fx:Array id="validators">
        <mx:StringValidator source="{firstnameInput}" property="text" required="true" />
        <mx:StringValidator source="{lastnameInput}" property="text" required="true" />
        <mx:EmailValidator source="{emailInput}" property="text" required="true" />
        <mx:DateValidator source="{dateInput}" property="text" required="false" />
    </fx:Array>
</fx:Declarations> 
```

然后你可以简单地使用'validateAll()'：

```
Validator.validateAll(validators); 
```

或循环验证器：

```
for each (var validator:Validator in validators) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:34:32.200

我不确定我是否正确理解了您的问题，但如果您想遍历一个类的所有属性（包括元标记），您可以使用[describeType](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType%28%29)。

要包含元标记，请确保您已`keep-as3-metadata`正确设置适当的编译器选项。

# c++ - 公钥私钥加密教程

> ID：10005124
> 
> 赞同：7
> 
> 时间：2012-04-04T04:52:21.840
> 
> 标签：c++, c, cryptography, public-key-encryption

**你知道在 C++ 或 C 中演示公钥加密 (PPKE) 的教程吗？**

我正在尝试了解它是如何工作的，并最终使用 Crypto++ 使用公共私钥创建我自己的加密。也许有一个 Crypto++ PPKE 教程？

也许有人可以解释公钥和私钥之间的关系（如果有的话）？谁能建议一些我可以使用的非常简单的公钥和私钥值（例如'char * 32'，'char / 32'）来创建我的简单PPKE程序来理解这个概念？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T05:25:06.297

[www.muppetlabs.com/~breadbox/txt/rsa.html](http://www.muppetlabs.com/~breadbox/txt/rsa.html)

This article is very well written for programmers who want to understand RSA but do not have solid math background. It is the only article that actually makes me understand RSA. It doesn't contain C or C++ code but once you understand how it works, you should be able to write your own. (Even though I agree with others that it is not recommended, it should be still helpful to cleraly understand RSA) Hope it helps!

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T05:18:14.103

这是我一段时间前写的 RSA 的玩具版本。使它成为玩具的原因是它只使用 32 位数字。为了提供任何有意义的安全级别，您需要支持*更大*的数学数字（典型的密钥范围是 1024-4096 位左右，尽管后者可能没有多大作用）。

尽管如此，这确实实现了真正的 RSA 算法。插入 bignum 包所需的时间相对较少，因此此代码可以使用实际大小的 RSA 密钥（尽管大多数其他实现可能更快）。

```
#include <iostream>
#include <iterator>
#include <algorithm>
#include <vector>
#include <functional>

const int e_key = 47;
const int d_key = 15;
const int n = 391;

struct crypt : std::binary_function<int, int, int> {
    int operator()(int input, int key) const { 
        int result = 1;
        for (int i=0; i<key; i++) {
            result *= input;
            result %= n;
        }
        return result;
    }
};

int main() {
    std::string msg = "Drink more Ovaltine.";
    std::vector<int> encrypted;

    std::transform(msg.begin(), msg.end(),  
        std::back_inserter(encrypted),
        std::bind2nd(crypt(), e_key));

    std::transform(encrypted.begin(), encrypted.end(), 
        std::ostream_iterator<char>(std::cout, ""), 
        std::bind2nd(crypt(), d_key));
    std::cout << "\n";

    return 0;
} 
```

当然，这仅涵盖加密和解密本身——距离成为一个完整的安全系统还有*很长的路要走。*

Much like the comments have noted, this is intended purely to support understanding of the algorithm. I've never put it to serious use, and probably never will. Although supporting real key sizes would be fairly trivial, it's open to question whether I'll ever even do that -- if I did, somebody might mistake it for something that should be used on real data, which I don't really intend.

# java - 在Blackberry4.6 os版本的浏览器视图中加载html

> ID：10005128
> 
> 赞同：0
> 
> 时间：2012-04-04T04:52:45.313
> 
> 标签：java, blackberry

> **可能重复：**
> [在 Blackberry4.6 os 版本上加载 html](https://stackoverflow.com/questions/9991482/load-html-on-blackberry4-6-os-version)

嗨，我是 Blackberry 应用程序开发的新手，我想在浏览器字段中加载 HTML。我能够加载版本 5 和 6 及更高版本的 HTML，但它无法在 OS 版本 4 中加载

请告诉我如何在 Blackberry OS version4.6 上加载此 HTML，我使用 Eclipsed 在 5 和 6 上开发应用程序可以正常工作，但在 4.6 中不请告诉我如何编写。此代码或代码中的任何特定更改，或者我们无法在 OS 版本 4.6 中加载 HTML？

```
BrowserField mybroBrowserField=new BrowserField();

add(mybroBrowserField);
mybroBrowserField.displayContent(
"<html><body><h1>hello world! This blackbery apps</h1>   </body></html>",  
"http://localhost"); 
```

此代码适用于 5 和 5 以上版本，但不适用于 OS 版本 4

# c# - 使用 BlockInput 阻止键盘和鼠标输入

> ID：10005131
> 
> 赞同：0
> 
> 时间：2012-04-04T04:52:56.983
> 
> 标签：c#, .net, wpf

这是一个触摸板虚拟键盘按钮。当我按屏幕上的“TOUCH”时，将显示“ab”。我正在尝试使用 BlockInput 在按下 TOUCH 按钮后 2 秒内阻止鼠标和键盘的任何输入。但它不起作用，我认为需要为 BlockInput 设置一个计时器，any1 知道该怎么做吗？这是我的代码：

```
public partial class TRY
    {
        [System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint = "BlockInput")]
        [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
        public static extern bool BlockInput([System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)] bool fBlockIt);
    }

public void TOUCH(string key)
    {  
        if (key == "Press")
        {
            PressAndRelease("a");
            PressAndRelease("b");
            ReleaseKeys();

            TRY.BlockInput(true);
            Thread.Sleep(2000);
            TRY.BlockInput(false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-08T14:58:11.987

BlockInput() 不能在触摸设备上可靠地工作，因为鼠标消息通常作为触摸消息路由，反之亦然。有两种方法可以阻止触摸输入：

1) 安装一个 HID 类过滤器驱动程序，它将阻止来自 HID 设备的所有触摸消息。需要开发过滤器驱动程序，并且需要具有内核代码签名功能的代码签名证书，才能将驱动程序安装在非测试机器上

2）挂钩所有进程，32位和64位，并在此期间阻止所有消息，包括触摸消息，如下所示：

```
 hkKey  = SetWindowsHookEx(WH_CALLWNDPROC, procTouchMsg, hInstHookDll, 0);
    hkKey2 = SetWindowsHookEx(WH_CALLWNDPROCRET, procTouchMsg, hInstHookDll, 0);
    hkKey3 = SetWindowsHookEx(WH_GETMESSAGE, procTouchMsg, hInstHookDll, 0);

    hkKey4 = SetWindowsHookEx(WH_SYSMSGFILTER, procTouchMsg, hInstHookDll, 0);
    hkKey5 = SetWindowsHookEx(WH_MSGFILTER, procTouchMsg, hInstHookDll, 0);
    hkKey6 = SetWindowsHookEx(WH_MOUSE, procTouchMsg, hInstHookDll, 0);
    hkKey7 = SetWindowsHookEx(WH_MOUSE_LL, procTouchMsg, hInstHookDll, 0);
    hkKey8 = SetWindowsHookEx(WH_KEYBOARD, procTouchMsg, hInstHookDll, 0);
    hkKey9 = SetWindowsHookEx(WH_KEYBOARD_LL, procTouchMsg, hInstHookDll, 0); 
```

然后从 procTouchMsg 函数返回 NULL。请注意 - 这可能会禁用您设备的所有输入，因此在几秒钟后停止挂钩或排除某些重要进程的挂钩。

# ruby-on-rails-3 - 使用 Rails 3 创建调查的最简单方法是什么？

> ID：10005135
> 
> 赞同：1
> 
> 时间：2012-04-04T04:53:22.277
> 
> 标签：ruby-on-rails-3, rubygems

我看了一下surveyor和smerf，但看起来smerf是一个仅用于Rails2的插件，而surveyor不适用于我的Rails3安装，所以我想知道你们是否有任何其他建议可以让工作更轻松?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:15:26.260

做一些完全不同的事情怎么样？wufoo 有一个很棒的应用程序可以进行调查、生成报告等，您可以将调查表嵌入到您的应用程序中。我估计你现在可以在 30 分钟内完成。因此，除非您明确需要自己数据库中的数据...

（免责声明：我与 wufoo 没有任何关系——我只是认为这是一项很棒的服务，而且基本帐户是免费的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:03:32.053

您可能会发现这非常有用。它采用嵌套形式，但几乎可以满足您的需求：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# android - EditText 中的动态自动大写、自动更正或密码字段

> ID：10005146
> 
> 赞同：2
> 
> 时间：2012-04-04T04:54:06.590
> 
> 标签：android, android-edittext, input-filtering

我想以编程方式启用或禁用 EditText 中的自动大写、自动更正或密码字段（显示项目符号）。**这意味着不是来自 XML**。

我也想避免[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)解决方案，而更多地关注[InputFilter](http://developer.android.com/reference/android/text/InputFilter.html)或其他一些解决方案。

将 EditText 操作为 Editable 允许附加 InputFilters，但是我无法让这些以编程方式工作。此外，诸如[setAllCaps 之](http://developer.android.com/reference/android/widget/TextView.html#setAllCaps%28boolean%29)类的 EditText 方法在实践中对我没有任何作用。自动校正也是如此。这是我尝试的自动更正（向您展示我在哪里，以及我的一些思考过程）：

```
/** SpellCheck filter for auto-correcting words. */
class SpellCheckFilter implements InputFilter {

    public String word;

    public SpellCheckFilter()
    {
        word = " ";
    }

    //FIXME not returning corrected word. Try adjusting start/end values,
    //what range does this return?
    @Override
    public CharSequence filter(CharSequence source, int start, int end,
            Spanned dest, int dstart, int dend) {
        word += source;
        Log.i("SpellCheckFilter", "source=\"" + source + "\";  word=\"" + word + "\"");
        if (source.toString().endsWith(" "))
        {
            word = word.replace(" ", "");
            String correction = AutoText.get(word, 0, word.length()-1, view);
            Log.i("TextEditor", "Corrected word=" + (correction == null ? word : correction));
            word = " ";
            return correction;
        }
        return null;
    }

} 
```

使用[InputFilter.AllCaps](http://developer.android.com/reference/android/text/InputFilter.AllCaps.html)，我能够获得一个几乎可以正常工作的自动大写方法，但是第一个字母没有自动大写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-01T11:03:38.170

```
 //Calling Method
    setListener1(editText);
    //Method
    public void setListener1(final AppCompatEditText edittext) {
            final TextWatcher textWatcher = new TextWatcher() {
                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {}
                @Override
                public void afterTextChanged(Editable s) {
                    String input = StringStaticMethods.firstCapital(s.toString());
                    edittext.removeTextChangedListener(this);
                    edittext.setText("");
                    edittext.append(input);
                    edittext.addTextChangedListener(this);
                }
            };
            edittext.addTextChangedListener(textWatcher);
        }
public static String firstCapital(String str) {
        if (str != null && !str.equals("")) {
            return (str.substring(0, 1).toUpperCase() + str.substring(1, str.length()));
        }
        return "";
    }
    //Use in XML
    android:inputType="textFilter|textMultiLine|textNoSuggestions" 
```

# linux - 为端口 0x60 安装中断处理程序的最佳方法

> ID：10005149
> 
> 赞同：1
> 
> 时间：2012-04-04T04:54:18.993
> 
> 标签：linux, module, linux-kernel, driver, device-driver

我正在编写一个简单的按键记录器，作为了解 linux 驱动程序的中断和 IO 端口的一种方式。现在从我读过的内容来看，我需要通过...注册中断处理程序

```
int request_irq(unsigned int irq, irqreturn_t (*handler)(int, void *, struct pt_regs *), unsigned long flags, const char *dev_name, void *dev_id); 
```

但是，从我也读到的内容来看，如果我在 module_init() 期间调用 request_irq，我将占用中断。我的问题是我想与其他资源共享中断，但我不确定如何调用此中断。我希望我可以使用 module_init() 调用该函数并将我的标志设置为 SA_SHIRQ。我被告知最好的做法是在打开文件期间调用它允许我设置中断，但我不想依赖编写一个调用 open“my_dev”的用户空间程序，以便我可以运行中断处理程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:01:13.800

不用担心。 `request_irq`不会“占用”中断。它将处理程序放在回调列表中，并在发出中断信号时调用所有处理程序（针对该 IRQ）。

如果您在中断期间所做的工作繁重，您可能希望仅在驱动程序打开时启用处理 IRQ，以最大限度地减少不使用驱动程序时的系统中断。为此，实现驱动程序打开和关闭调用，并保持引用计数：只有当引用计数 > 0 时才应注册 ISR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:04:40.063

先让它工作，然后再考虑最佳实践。请求 IRQ`module_init`没什么大不了的——只要中断处理程序需要的所有资源都可以用于立即调用它...

# c# - 如何使用单个 linq 查询从点列表中获取 X 和 Y 列表？

> ID：10005151
> 
> 赞同：1
> 
> 时间：2012-04-04T04:54:38.310
> 
> 标签：c#, linq, linq-to-objects

我正在生成`List<int> x`并`List<int> y`使用`List<Point> p`此代码：

```
List<int> x = (from a in p select a.X).ToList();
List<int> y = (from a in p select a.Y).ToList(); 
```

那么是否有任何单一的 LINQ 查询来获取`x`和`y`来自`p`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:49:19.963

不，但你可以这样做：

```
var tuples = p.Select(x => new Tuple<int, int>(x.X, x.Y)).ToList(); 
```

但我认为最好的解决方案仍然是这个，使用两个查询：

```
List<int> x = (from a in p select a.X).ToList();
List<int> y = (from a in p select a.Y).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:19:26.413

你基本上不能，但你可以欺骗自己：

```
public static class LinqEx
{
    public static void ToLists<T, T1, T2>(this IEnumerable<T> source, SelectorDst<T, T1> selectorDst1, SelectorDst<T, T2> selectorDst2)
    {
        selectorDst1.List.AddRange(source.Select(selectorDst1.Selector));
        selectorDst2.List.AddRange(source.Select(selectorDst2.Selector));
    }
}

public class SelectorDst<T, TList>
{
    public readonly List<TList> List;
    public readonly Func<T, TList> Selector;

    public SelectorDst(List<TList> list, Func<T, TList> selector)
    {
        this.List = list;
        this.Selector = selector;
    }
}

... Some place in the code

var points = new List<Point>();
var xs = new List<int>();
var ys = new List<int>();

points.ToLists(new SelectorDst<Point, int>(xs, p => p.X),
               new SelectorDst<Point, int>(ys, p => p.Y)); 
```

# facebook - 尝试获取已签入某个地点的用户的 Facebook ID 列表

> ID：10005153
> 
> 赞同：1
> 
> 时间：2012-04-04T04:54:56.713
> 
> 标签：facebook, json, facebook-graph-api

我正在尝试确定是否可以获得已签入地点/页面的 Facebook 用户和 ID 列表（我假设是通过 JSON）。

这甚至可能吗？您是否需要每个用户帐户的访问令牌才能访问此信息？我发现 Facebook 的文档帮助不大......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:04:59.677

您可以查询[FQL`checkin`表](https://developers.facebook.com/docs/reference/fql/checkin/)，但最多（基于授予的权限）您将获得用户和她朋友的签到。

# javascript - 为什么 contentwraphere div 没有完全显示？

> ID：10005154
> 
> 赞同：0
> 
> 时间：2012-04-04T04:54:57.563
> 
> 标签：javascript, cross-browser

我不知道为什么，但是当您在 Firefox、chrome 和 safari 中单击“返回质量服务”时，contentherewrap div 没有完全显示，但在 IE 和 opera 中确实显示

[http://www.nswnationals.org.au/index.php/achievements/](http://www.nswnationals.org.au/index.php/achievements/)

谢谢，

垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:34:09.257

似乎是 div 与 class 的高度问题`contentherewrap`。此 div 的高度为 1297px，但其父级的高度为 580px。

适当固定高度，问题应该得到解决。

**注意：**理想情况下，您不应该固定 div 的高度并让它根据其内容的体积取任何高度，除非您有特定的理由将高度设置为特定像素或特定百分比。

希望有帮助。

# javascript - 需要有关构建逻辑、向对象添加属性的帮助

> ID：10005156
> 
> 赞同：0
> 
> 时间：2012-04-04T04:55:22.457
> 
> 标签：javascript, jquery

我有一个图像数组，其中有许多图像。不固定，可能是一个或两个或 8 个。当我有固定数量的图像时，我正在使用类似这样的代码

```
var details = {

    image1: {
        position: 0,
        title: $slideDiv.children().eq(0).attr("alt")
    },
    image2: {
        position: -400,
        title: $slideDiv.children().eq(1).attr("alt")
    },
    image3: {
        position: -800,
        title: $slideDiv.children().eq(2).attr("alt")
    },
    image4: {
        position: -1200,
        title: $slideDiv.children().eq(3).attr("alt")
    },
    image5: {
        position: -1600,
        title: $slideDiv.children().eq(4).attr("alt")
    }

}; //end of var details 
```

但现在我有数组中的图像。我希望 details 对象在其中添加的图像等于数组中的图像数量。我尝试过这样的事情

```
var details = {};
var position = 0;
images.each(function(index){
    details.("image" + index) : {
        position: position,
        title: $slideDiv.children().eq(index).attr("alt")
    }

    position += -400;

}) ; //end of .each() 
```

我试图做的逻辑是，如果我在图像数组中有两个图像，它应该变成这样

```
var details = {
    image1: {
        position: 0,
        title: $slideDiv.children().eq(1).attr("alt")
    },
    image2: {
        position: -400,
        title: $slideDiv.children().eq(2).attr("alt")
    }

} 
```

但这不起作用。当然我的语法是错误的

```
details.("image" + index) : {..} 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:59:41.743

在 Javascript 中，您可以通过以下两种方式之一访问属性：

```
obj.property 
```

相当于

```
obj["property"] 
```

所以在你的情况下，你会想这样写：

```
details["image"+index] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:04:03.830

正确的语法是：`details['image' + index]`稍后可以通过`details.image0`等访问`details.image1`。

所以应该是：`details['image' + index] = {prop: val}`

# r - R中的相关性

> ID：10005157
> 
> 赞同：0
> 
> 时间：2012-04-04T04:55:29.043
> 
> 标签：r, correlation

我正在尝试生成与[示例](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=SciViews:correlation)相同的图表，但使用不同的数据。这是我的代码：

```
library(SciViews)

args <- commandArgs(TRUE)
pdfname <- args[1]
datafile <- args[2]

pdf(pdfname)
eqdata = read.csv(datafile , header = T,sep=",")
(longley.cor <- correlation(eqdata$feqs))
# Synthetic view of the correlation matrix
summary(longley.cor) 
p <- plot(longley.cor)
print(p)
dev.off() 
```

和数据

```
ques,feqs
"abc",20
"def",10
"ghi",40
"jkl",10
"mno",20
"pqr",10 
```

我使用这个命令

```
Rscript ./rscript/correlation.R "/home/co.pdf" "/home/data_correlation.csv" 
```

![在此处输入图像描述](../Images/737a1a9cdd8ea0219faac65b82cf5c4d.png)

**代码输出**

![在此处输入图像描述](../Images/02ce8d8cf0d96b4615b416171172cbe5.png)

我想像这样生成

![在此处输入图像描述](../Images/af1ac29002f79f332c6db45244518ed7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:12:42.860

你可以试试包里面的`plotcorr`功能`ellipse`。帮助页面提供了以下示例：

![在此处输入图像描述](../Images/e5455dbf50f7a1d1f68255048a4e5a4f.png)

这似乎是您正在寻找的东西？

# 编辑：

之后您可以添加文本，圆圈放置在 1 - 数量的 vars 网格上。例如：

```
data(mtcars)
Corrmat  <- cor(mtcars)
cols <- ifelse(Corrmat>0, rgb(0,0,abs(Corrmat)), rgb(abs(Corrmat),0,0))

library(ellipse)
plotcorr(Corrmat,col=cols)

n <- nrow(Corrmat)
for (i in 1:n)
{
    for (j in 1:n)
    {
        text(j,i,round(Corrmat[n-i+1,j],2),col="white",cex=0.6)     
    }
} 
```

# indexing - db2中多个表空间的索引创建

> ID：10005162
> 
> 赞同：0
> 
> 时间：2012-04-04T04:56:51.090
> 
> 标签：indexing, db2

我有一个基本问题。在 db2 中，是否可以创建驻留在多个表空间中的索引？就像我们可以在多个表空间中创建一个分区表一样？

我尝试了几个来自 IBM 的链接。 [http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.perf.doc%2Fdoc%2Fc0021581.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.perf.doc%2Fdoc%2Fc0021581.html)

有没有办法让索引驻留在多个表空间中？

任何帮助表示赞赏。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:43:17.440

简而言之，是的。仅供参考，您链接到的[页面](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.admin.perf.doc/doc/c0021581.html)提供了您问题的答案。

在范围分区表上创建分区索引时，每个表分区的索引分区可以驻留在不同的表空间中。有关外观的图片，请参[见图 3](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.perf.doc/doc/c0021581.html#c0021581__partindex)。

# apache - 页面前的 Apache mod_rewrite 查询字符串并删除扩展

> ID：10005170
> 
> 赞同：0
> 
> 时间：2012-04-04T04:58:04.450
> 
> 标签：apache, mod-rewrite

我在网上搜索了我的 mod_rewrite 问题的答案，但我觉得我已经无计可施了。我会有一个这样的网址：`http://www.website.com/dashboard.php?username=stackoverflow`. 这个网址不是最漂亮的。所以我的目标是在这里做一些事情......

1.  消除 php 文件的扩展名（到目前为止，我已经能够使用我将在下面显示的代码做到这一点，但我不知道它是否会根据我需要做的其他事情保留）
2.  消除“www”前缀
3.  将用户名查询字符串（仅当它是“用户名”，我不想匹配“id”等）直接移动到“.com/”之后
4.  在查询字符串之后移动 php 文件名（不带扩展名）。

最终 URL 应如下所示：`http://website.com/stackoverflow/dashboard`或者`http://website.com/stackoverflow/profile`.

我现在拥有的消除文件扩展名的代码是这样的：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase / 

# remove .php ONLY if requested directly
RewriteCond %{THE_REQUEST} (\.php\sHTTP/1)
RewriteRule ^(.+)\.php$ /$1 [R=301,L,QSA]

# remove trailing slash ONLY if it is not an existing folder
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# rewrite to FILENAME.php if such file does exist and is not a folder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ /$1.php [L,QSA] 
```

可悲的是，这只解决了我的一个问题，在看了之后，我觉得会有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:36:06.687

(1, 3, 4) 据我了解，您希望使用漂亮的 URL，但由 PHP 页面支持。所以它应该是这样的：

```
 RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(\w+)/profile$ /dashboard.php?username=$1 [L] 
```

它将使`http://website.com/stackoverflow/profile`工作成为`http://www.website.com/dashboard.php?username=stackoverflow`

(2) # 使用 301 将 www.site.com 重定向到 site.com

```
 RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

# ios - 人脸检测中的人脸边界点检测

> ID：10005171
> 
> 赞同：1
> 
> 时间：2012-04-04T04:58:09.070
> 
> 标签：ios, drawrect, face-detection

我正在使用 Core Image 进行人脸检测。在面部边界上给出点时我面临一个问题。实际上，我必须在面边界上给出点并使这些点处于可移动状态。

请与我分享您的想法.. 提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T10:33:31.310

我会建议你四种方法。我没有在IOS中做过。我在java中实现了它们。对于人脸边界检测，您可以使用以下方法：

*   肤色阈值，然后是下巴曲线估计和收缩和增长算法。
*   [Canny 边缘检测，然后是四个区域划分并获得最长的人脸边缘图。](http://computergodzilla.blogspot.com/2013/07/face-boundary-detection.html)
*   [自适应主动轮廓模型（Snake 算法）。](http://www.blog.computergodzilla.com/2013/10/face-boundary-detection-using-snake.html)
*   头发区域检测，然后是下巴曲线估计并去除除头发和下巴以外的所有区域。（不适用于秃头。）

如果脸部有阴影，请使用 Snake 算法。如果图像中的人脸清晰，则进行肤色阈值处理。Canny Edge Detection 会给你带来非常缓慢的性能。

如需进一步说明，请阅读以下内容：[**人脸区域检测**](http://computergodzilla.blogspot.com/2013/07/face-boundary-detection.html)

# iphone - 如何从ios中删除老化的APP？

> ID：10005179
> 
> 赞同：0
> 
> 时间：2012-04-04T04:59:20.033
> 
> 标签：iphone, ios, ios-simulator

**我想在我的iphone Simulator**中删除我的一些旧应用程序（不是每个应用程序）。

我怎样才能删除它们？如果**重置**是唯一的选项，那么它将删除所有应用程序，而不仅仅是我指定的应用程序。或者是否有任何选项可以选择要删除的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:03:25.403

您可以像在设备上一样删除模拟器中的应用程序，按住应用程序图标几秒钟，然后点击“x”。

您还可以从 ~/Application Support/iPhone Simulator/5.0/Applications 下的 Finder 中删除应用程序数据（或您正在运行的任何版本的模拟器。）

# android - 在 Android Play/Market 中更改现有应用的过滤器和要求的副作用

> ID：10005182
> 
> 赞同：11
> 
> 时间：2012-04-04T04:59:49.137
> 
> 标签：android, filter, google-play, side-effects

以前没有关于它的问题，所以我在这里问。

***背景：***

我在 Play 市场中有一个旧应用程序，有免费版和付费版。我创建了一个新版本，彻底改变并使用不同的支付系统（仅限免费应用 + 应用内购买，不再是付费版本：降低维护成本）。`minSdkVersion`也从 1.5 更改为 2.1。

由于所有这些差异，我决定上传一个新应用程序，而不仅仅是更新当前应用程序（即，不选择性地为 API 7+ 提供新的 apk --- 多个 APKs）。由于新的支付系统，这一点尤其重要，因为我不想强迫付费的老客户再次购买所有东西。我想让他们一个人呆着，像他们一样快乐（4.4/4.7 评分）。**简而言之，我不想“强迫”人们做任何事情。**在这种情况下，除了新应用提供的其他东西外，**通过应用内购买再次购买相同的东西。**

***问题：***

在向您解释了我的背景之后，它提出了一些明显的问题：

**1\. 我如何对 API 7+ 用户隐藏旧应用程序，同时仍然让所有当前 API 7+ 客户（即那些已经购买它的客户）可以看到它们？**

我最关心的是付费应用程序。我正在考虑推出一个`maxSdkVersion`设置为 6 (SDK 2.0.1) 的新版本，有效地阻止新的 API 7+ 客户使用旧应用程序。但我担心当前 API 7+ 的客户会突然失去对应用程序的访问权限。这就提出了两个问题：

**2\. 他们能否持续更新应用程序？猜测“是”是否合理？**

**3\. 即使上一个问题的答案是“是”，我仍然不清楚如果用户卸载应用程序，然后在市场中再次找到它会发生什么（不仅仅是更新）。考虑到同时应用过滤器要求发生变化，它会消失还是仍会出现在他的“已购买”应用列表下？**

***备注：***我会上传一个测试应用程序来查看，但是AFAIK作者不允许购买他自己的应用程序（即使许可证的行为不同），所以我无法测试卸载过滤安装方案。

* * *

* * *

* * *

***#######回复答案：#######***

*@活泼的：*

我想你弄错了。我了解多个 APK，当然还有文档。这里的问题远不止于此。

> 另请注意，这`maxSdkVersion`已被弃用，因此当您发布新 APK 时，这会给您限制旧 APK 的提议带来一点麻烦。

谢谢你。我错过了。

> 多个 APK 提供了更简单的用户故事。

如果您这么说（除了我没有引用的其他内容），我认为您可能没有围绕这个问题。请跟我来：

1.  我有*n 个*付费客户购买了我当前的 Pro 应用程序版本。
2.  他们正在使用Pro 版本中的功能集*X。*
3.  我现在决定实施应用内购买以提供功能集*X*，*Y*等等......
4.  不幸的是，应用 API 7+ 进行了这些更改。
5.  因此，正如您所建议的，我决定提供多个 APK。
6.  现在，API 7+ 人群突然更新到我的应用程序的这个新版本。
7.  因为他们更新到新的 APK，所以他们***失去***了他们的功能集*X*。他们现在需要再次购买*X*（从应用内购买菜单中）。**我从他们那里拿走了他们已经拥有的东西**，尽管是以一种“不那么闪亮”的方式。就像我说的：

> 你要么再次付钱给我，要么失去你已经拥有的东西。

你现在看到问题了吗？你明白为什么我*被迫*提供一个新的应用程序吗？还是我仍然没有得到你所说的（我认为没有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:18:02.090

这是一个未经尝试的想法供您考虑：

*   升级您当前的应用内预付款应用程序以包含一个提供加密哈希的 ContentProvider，只有它知道如何生成该哈希以响应随机种子（以防止重放攻击）。

*   发布使用应用内支付作为单独 APK 的新应用，并让它通过尝试访问刚刚描述的 ContentProvider 来检查用户系统上是否存在早期应用，将随机值传递给它并确认响应是正确的。如果收到这样的响应，则用户拥有旧应用程序，您可以在新应用程序中启用旧应用程序的相应功能，而无需任何应用内支付。

现在，如果您的一些用户跳过升级到为他们提供新 ContentProvider 的旧应用程序，而直接使用您的新应用程序，他们将被要求付款。但如果他们愿意，他们可以升级并再次运行新应用程序以获得验证。

这确实解决了您的问题。然而，它也有自己的问题。所以，把它放在你的工具箱里，看看它是否派上用场，或者与你以后可能设计的其他东西结合使用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:17:20.347

至少在不考虑多个 APK 的情况下，发布新应用而不是更新会对自己造成伤害，因为这会使升级现有付费用户变得复杂。

假设您只是将您的付费应用更新到 API 级别 7，将其价格降至 0 并添加应用内支付。API 级别 >=7 的设备将获得升级，而 API 级别 <=6 的设备将不会收到通知，不会在 Play（市场）中看到它，并且如果卸载将无法重新安装。这对你的问题 2 和 3 来说是“不”。

但现在可以实现多个 APK： http: [//developer.android.com/guide/market/publishing/multiple-apks.html](http://developer.android.com/guide/market/publishing/multiple-apks.html) http://developer.android.com/training/multiple-apks/

针对您的问题，您可以根据 API 级别提供多个 APK：http: [//developer.android.com/training/multiple-apks/api.html](http://developer.android.com/training/multiple-apks/api.html)

这使您可以维护同一个应用程序的两个版本，按 API 级别分隔。因此，您的问题 1 的答案是，根据引用的文章实现多个 APK。

通过发布一个全新的应用程序，您对问题 2 的回答是“是”。通过实施多个 APK，问题 2 的答案也是“是”，从用户的角度来看，您的应用程序沿袭/升级故事要简单得多（技术上对您来说有点困难，在客户服务部门更容易）。另请注意，这`maxSdkVersion`已被弃用，因此当您发布新 APK 时，这会给您限制旧 APK 的提议带来一点麻烦。

问题 3 也是如此。通过发布新应用或实施多个 APK，您可以继续为用户可以找到和安装的旧 API 级别提供 APK。

多个 APK 提供了更简单的用户故事。发布一个新应用程序可以让您更轻松地区分应用程序，例如，如果您想说“看！现在格外闪亮！”

# php - 替换用逗号分隔的字符串

> ID：10005184
> 
> 赞同：-4
> 
> 时间：2012-04-04T05:00:15.920
> 
> 标签：php, string, replace

有什么方法可以更改或转换用逗号分隔的字符串/整数？

例子 ：

$str = "121,232,343,454";

应该导致：

str1，str1，str1，str1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:44:20.643

不推荐使用 split() ！！！请改用explode($seperator, $string)。

```
$str = "a,b,c";
$items = explode(',', $str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:02:24.330

根据您使用的语言，这通常是`split($str, ',')`or `split(',', $str)`or`$str.split(',')`函数

# c# - 如何在 DataTemplate 的 DataType 属性中引用泛型类型？

> ID：10005187
> 
> 赞同：27
> 
> 时间：2012-04-04T05:00:57.467
> 
> 标签：c#, wpf, xaml, mvvm, mvvm-light

我有一个这样定义的 ViewModel：

```
public class LocationTreeViewModel<TTree> : 
    ObservableCollection<TTree>, INotifyPropertyChanged
        TTree : TreeBase<TTree> 
```

我想在 XAML`DataType`中的 a 属性中引用它。`DataTemplate`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T05:38:41.617

不，您不能在 XAML 中表达泛型类型。您将必须创建一个扩展您的通用类型的具体类型......

```
public class FooLocationTreeViewModel : LocationTreeViewModel<Foo>
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T05:46:05.573

在 XAML 2006 中，这不受支持。但是，如果您想拥有此功能，您可以自行开发。

[这个链接](http://10rem.net/blog/2011/03/09/creating-a-custom-markup-extension-in-wpf-and-soon-silverlight)有一个很好的关于创建标记扩展的教程。

用法是这样的：

```
<Grid xmlns:ext="clr-namespace:CustomMarkupExtensions">
  <TextBlock Text="{ext:GenericType FooLocationTreeViewModel(Of Foo)}" />
</Grid> 
```

不过，您必须选择并实现语法。我建议使用 VB 表示法，因为它不会像 C# 表示法对 < 和 > 那样干扰。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-05T15:46:10.483

我知道，我参加聚会有点晚了，但我想为所有将来可能会看到这个问题的人发布答案：

有可能的。

您可以在这个问题的答案中看到整个代码：[DataTemplates and Generics](https://stackoverflow.com/questions/54092789/datatemplates-and-generics)。但由于它很长，我将复制重要的部分。如果您想了解更多详细信息，请查看引用的问题。

1.  您需要编写一个`MarkupExtension`可以提供封闭的泛型类型。

    ```
    public class GenericType : MarkupExtension
    {
        public GenericType() { }

        public GenericType(Type baseType, params Type[] innerTypes)
        {
            BaseType = baseType;
            InnerTypes = innerTypes;
        }

        public Type BaseType { get; set; }

        public Type[] InnerTypes { get; set; }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            Type result = BaseType.MakeGenericType(InnerTypes);
            return result;
        }
    } 
    ```

2.  现在您可以在 xaml 中定义关闭泛型类型的类型，然后使用已关闭的泛型类型`DataType`作为`DataTemplate`.

    ```
    <Window.Resources>
        <x:Array Type="{x:Type System:Type}" 
                 x:Key="ListWithTwoStringTypes">
            <x:Type TypeName="System:String" />
            <x:Type TypeName="System:String" />
        </x:Array>

        <WpfApp1:GenericType BaseType="{x:Type TypeName=Generic:Dictionary`2}" 
                           InnerTypes="{StaticResource ListWithTwoStringTypes}"
                           x:Key="DictionaryStringString" />

        <DataTemplate DataType="{StaticResource DictionaryStringString}">
            <TextBlock Text="Hi Dictionary"
                   FontSize="40"
                   Foreground="Cyan"/>
        </DataTemplate>
    </Window.Resources> 
    ```

3.  很高兴`DataTemplate`WPF 自动选择定义的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-14T08:24:11.630

迟到并且不完全是问题的答案（CollinE 和 Bas 已经说过这实际上是不可能的）......但是，也许替代解决方案可能对其他人有帮助：

可以使用这样的 TemplateSelector 来解析泛型类型：

**模板选择器**

```
public class MyTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var genericType = typeof(MyGenericType<>);
        var isMyGeneric = item?.GetType().GetGenericTypeDefinition() == genericType;

        return isMyGeneric ? MyTemplate : OtherTemplate;
    }

    public DataTemplate MyTemplate { get; set; }
    public DataTemplate OtherTemplate { get; set; }
} 
```

**XAML**

```
<UserControl.Resources>
        <DataTemplate x:Key="MyTemplate">            
                <!-- Set Up MyTemplate -->
        </DataTemplate>
        <DataTemplate x:Key="OtherTemplate">
            <!-- Set Up OtherTemplate -->
        </DataTemplate>
        <local:MyTemplateSelector x:Key="MyTemplateSelector"
                                MyTemplate="{StaticResource MyTemplate}"
                                OtherTemplate="{StaticResource MyTemplate}" />
</UserControl.Resources>

...

<ContentControl ContentTemplateSelector="{StaticResource MyTemplateSelector}" 
                Content="{Binding ViewModel}" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-05T13:31:33.050

我刚刚实现了一个肯定不够完美的解决方法，并且确实需要在您的 ViewModel 中添加一些代码（因为 VM 不应该知道视图，因此会破坏严格的 MVVM）。

定义您的泛型类型，然后使用最低公共祖先定义该类型的类作为类型参数：

```
class GenericClass<T> { }

class Class1 : GenericClass<Apples> { }

class Class2 : GenericClass<Oranges> { }

class WorkaroundClass : GenericClass<Fruit> { } 
```

在您的视图模型中，您需要将您的绑定成员声明为祖先类型，并将其转换。

```
// instead of:
// Apple DisplayFruit => GetGrannySmith();

Fruit DisplayFruit => (Fruit)GetGrannySmith(); 
```

在您的 xaml 中，您可以将数据模板绑定到祖先类：

```
<DataTemplate DataType="{x:Type WorkaroundClass}"/> 
```

我很确定，因为 Generic 父级是通用的，所以您不应该遇到类型参数之间的差异导致任何问题的任何实际情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T13:47:50.547

以下解决方案对我有用：

```
<DataTemplate>
    <DataTemplate.DataType>
        <x:Type Type="ns:MyGenericClass`1"/>
    </DataTemplate.DataType>
</DataTemplate> 
```

将 `1 替换为您拥有的通用参数的数量，例如：

```
public class MyGenericClass<TParent, TChild> 
```

将被宣布：

```
<x:Type Type="ns:MyGenericClass`2"/> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-06-06T02:17:29.007

{x:Type} 标记扩展支持允许将泛型类型参数指定为括号中的逗号分隔列表。

这是一个例子：

```
<UserControl x:Class="Test"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:generic="clr-namespace:System.Collections.Generic;assembly=mscorlib"
        xmlns:sys="clr-namespace:System;assembly=mscorlib">
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type generic:List(sys:Int64)}">
            <TextBlock Text="{Binding Count}"/>
        </DataTemplate>
    </UserControl.Resources>
</UserControl> 
```

我在 VS 2015 上使用 .Net 4.5，因此您的里程可能会有所不同。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-12-12T12:42:04.540

我能做到这一点的唯一方法是使用`MarkupExtensions`.

```
public class GenericType : MarkupExtension
{
     private readonly Type _of;
     public GenericType(Type of)
     {
         _of = of;
     }
     public override object ProvideValue(IServiceProvider serviceProvider)
     {
         return typeof(LocationTreeViewModel<>).MakeGenericType(_of);
     }
} 
```

要使用它，我只需要这样做：

```
<DataTemplate DataType="{app:GenericType app:TreeBaseClass}"> 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-01-22T10:27:46.920

略微改进的 MarkupExtension 版本，适用于最多 3 个通用参数的类。

```
 public class GenericTypeExtension : MarkupExtension
  {
    public GenericTypeExtension()
    {

    }
    public GenericTypeExtension(string baseTypeName_, Type genericType1_, Type genericType2_, Type genericType3_)
    {
      BaseTypeName = baseTypeName_;
      GenericType1 = genericType1_;
      GenericType2 = genericType2_;
      GenericType3 = genericType3_;
    }
    public string BaseTypeName { get; set; }
    public string BaseTypeAssemblyName { get; set; }
    public Type GenericType1 { get; set; }
    public Type GenericType2 { get; set; }
    public Type GenericType3 { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider_)
    {
      var list = new List<Type>();
      if (GenericType1 != null)
      {
        list.Add(GenericType1);
      }
      if (GenericType2 != null)
      {
        list.Add(GenericType2);
      }
      if (GenericType3 != null)
      {
        list.Add(GenericType3);
      }

      var type = Type.GetType(string.Format("{0}`{1}, {2}", BaseTypeName, list.Count, BaseTypeAssemblyName));
      if (type != null)
      {
        return type.MakeGenericType(list.ToArray());
      }
      return null;
    }

  } 
```

# parsing - PHP 文件中的解析/语法错误导致我的网站关闭

> ID：10005188
> 
> 赞同：0
> 
> 时间：2012-04-04T05:01:06.363
> 
> 标签：parsing, syntax

我正在处理我的 PHP 文件，现在我收到了这条消息。

> “解析错误：语法错误，意外'<'，在第 8 行的 /home/content/18/9029618/html/wp-content/themes/NewBusiness/includes/aboutus.php 中需要 T_FUNCTION”

不知道出了什么问题，现在我的网站已关闭。这是下面的代码。

```
<?php

new Themater_AboutUs();

class Themater_AboutUs
{
    var $theme;

    var $defaults = array(
        'enabled' => 'true',
        'hook' => 'main_before',
        'title' => 'Welcome to our website. Neque porro quisquam est qui dolorem ipsum dolor.',
        'image' => 'about-image.jpg',
        'content' => 'Lorem ipsum eu usu assum liberavisse, ut munere praesent complectitur mea. Sit an option maiorum principes. Ne per probo magna idque, est veniam exerci appareat no. Sit at amet propriae intellegebat, natum iusto forensibus duo ut. Pro hinc aperiri fabulas ut, probo tractatos euripidis an vis, ignota oblique. <br /> <br />Ad ius munere soluta deterruisset, quot veri id vim, te vel bonorum ornatus persequeris. Maecenas ornare tortor. Donec sed tellus eget sapien fringilla nonummy. Mauris a ante. Suspendisse quam sem, consequat at, commodo vitae, feugiat in, nunc. Morbi imperdiet augue quis tellus.'
    );

    function Themater_AboutUs()
    {
        global $theme;
        $this->theme = $theme;

        if(is_array($this->theme->options['plugins_options']['aboutus']) ) {
            $this->defaults = array_merge($this->defaults, $this->theme->options['plugins_options']['aboutus']);
        }

        if($this->theme->display('aboutus_enabled') ) { 
            $this->theme->add_hook($this->defaults['hook'], array(&$this, 'display_aboutus'));
        }

        if($this->theme->is_admin_user()) {
            $this->aboutus_options();
        }
    }

    function display_aboutus()
    {
        if(is_home()) {
            ?><div class="span-24 aboutusbox">

            <?php 

            if($this->theme->display('aboutus_image')) {
                echo '<img class="aboutusbox-image" src="' . $this->theme->get_option('aboutus_image') . '" />';
            }

            if($this->theme->display('aboutus_title')) {
                echo '<h2 class="aboutusbox-title">' . $this->theme->get_option('aboutus_title') . '</h2>';
            }

            if($this->theme->display('aboutus_content')) {
                echo '<div class="aboutusbox-content">' . $this->theme->get_option('aboutus_content') . '</div>';
            }
            ?></div><?php
        }
    }

    function aboutus_options()
    {
        $this->theme->admin_option(array('About Us', 14), 
            '"About Us" section enabled?', 'aboutus_enabled', 
            'checkbox', $this->defaults['enabled'], 
            array('display'=>'inline')
        );

        $this->theme->admin_option('About Us', 
            'Title', 'aboutus_title', 
            'text', $this->defaults['title']
        );

        $this->theme->admin_option('About Us', 
            'Image', 'aboutus_image', 
            'imageupload', get_bloginfo('template_directory') . "/images/" . $this->defaults['image'], 
            array('help' => "Enter the full url. Leave it blank if you don't want to use an image.")
        );

        $this->theme->admin_option('About Us', 
            'Content', 'aboutus_content', 
            'textarea', $this->defaults['content'],
            array('style'=>'height: 250px;')
        );
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:03:09.950

那是完整的文件吗？`<?php`开头有a吗？

您粘贴的示例`}`末尾缺少右大括号。

# actionscript-3 - AS#3 目标忽略父movieClip

> ID：10005191
> 
> 赞同：0
> 
> 时间：2012-04-04T05:01:31.693
> 
> 标签：actionscript-3, flash, actionscript

我改变了这个问题，因为它似乎是目标没有注册儿童 mc/ 或嵌套的 MovieClips 的问题。

```
 var box:Box = new Box();
    ground.push(box);
    levelPlane.addEventListener(MouseEvent.MOUSE_DOWN, onOver);
    box.x = box.width /2* (x + y);
    box.y = box.height/2 * (x - y);
    levelPlane.addChild(box);

    function onOver(e:MouseEvent):void{
    var tree1:Tree1 = new Tree1();
    addChild(tree1)
    trace(e.target.x);
    tree.x = e.target.x;
    } 
```

我如何定位主 MovieClip（levelPlane）内的movieclip（BOX）？想象一下，我在一个名为“levelPlane”的影片剪辑中嵌套了 10 个框，我想单击任何框以在我单击 x、y 位置的框上添加另一个 Mc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:04:29.220

Event.currentTarget 属性是指处理事件的当前对象，即监听对象。如果要引用调度事件的对象，请使用 e.target

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:25:19.067

如果我理解正确，您正试图将新创建的影片剪辑放在另一个之上，但它们不在同一个坐标空间内。目标的坐标必须转换为 tree1 的坐标空间，以使它们具有相同的位置：

```
var tree1:Tree1 = new Tree1();
addChild(tree1);

var global:Point = e.target.parent.localToGlobal(new Point (e.target.x, e.target.y));
var local:Point = globalToLocal(global);
tree1.x = local.x;
tree1.y = local.y; 
```

# iphone - 如何使用 NSPredicate 获取具有 NSDate 类型的属性？

> ID：10005193
> 
> 赞同：0
> 
> 时间：2012-04-04T05:01:44.300
> 
> 标签：iphone, ios, nsdate, nspredicate

我有一列`core data`存储日期`(eg:2006-01-26)`。我使用数组来存储所有年份，方法是使用`NSDateComponents`这些存储日期。（例如：如果我使用上述日期`NSDateComponents`，我将 2006 年作为一年）。这些年是`NSNumbers`，并且在我的谓词中使用它们我想获取`NSDate`包含所有 Date 组件的列。并且获取的记录应该只是特定年份的。我现在对如何将年份组件与数组中的一个组件匹配并创建谓词感到困惑。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSFetchRequest *request = [[NSFetchRequest alloc]init];
    NSError *error;

    //AppDelegate *app = [[UIApplication sharedApplication]delegate];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Movies" inManagedObjectContext:self.managedObjectContxt];
    [request setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] 
                                        initWithKey:@"releaseDate" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor,nil];
    [request setSortDescriptors:sortDescriptors];
    //[request setReturnsDistinctResults:YES ];
   // [request setEntity:entity];
    [sortDescriptors release];
    [sortDescriptor release];

    [request setPropertiesToFetch:[NSArray arrayWithObject:@"releaseDate"]];
    NSMutableArray *arrOfdMovies = [[self.managedObjectContxt executeFetchRequest:request error:&error]mutableCopy];
    [self setArrOfFetchdMovies:arrOfdMovies];

    arrOfDistinctYr = [[NSMutableArray alloc]init];
    NSMutableArray *temp = [[NSMutableArray alloc]init];

    for (int i = 0; i<[arrOfdMovies count]; i++) {
             // NSLog(@"%@",[[arrOfdMovies objectAtIndex:i] valueForKey:@"releaseDate"]);
        //date to its components
        NSDate *now = [[arrOfdMovies objectAtIndex:i]valueForKey:@"releaseDate"];
        // Specify which units we would like to use
        unsigned units = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
        NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
        NSDateComponents *component_s = [calendar components:units fromDate:now];

        NSInteger year = [component_s year];
        NSLog(@"%i", year);
//        NSInteger month = [components month];
//        NSInteger day = [components day];
        NSNumber *num= [NSNumber numberWithInteger:year];
        [temp addObject:num];
    }
    [self setArrOfDistinctYr:temp];

    //distinct value logic.
    NSSet *uniqueYrs = [NSSet setWithArray:arrOfDistinctYr];
    arr = [[NSArray alloc]initWithArray:[uniqueYrs allObjects]];

    //sorting
    NSArray *ar = [arr sortedArrayUsingSelector:@selector(compare:)];
    self.arr = ar;
    [self.managedObjectContxt retain];          
    [request release];

} 
```

数组“ar”仅包含不同且有序的年份。但是这个数组元素的数据类型是“NSNumbr”现在我如何形成一个谓词，它将利用这个数组来显示特定年份的记录（如何从核心数据的日期字段中检查年份[日期为 2006 -01-26]）。我尝试了以下方式 -

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//    return 2;

    NSFetchRequest *requst=[[NSFetchRequest alloc]init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Movies" inManagedObjectContext:self.managedObjectContxt];
    [requst setEntity:entity];
    requst.predicate = [NSPredicate predicateWithFormat:@"releaseDate CONTAINS%@", [arr objectAtIndex:section]];
    NSError *error = nil;
    NSMutableArray *array = [[self.managedObjectContxt executeFetchRequest:requst error:&error]mutableCopy];
    [requst release];
    return [array count];

} 
```

一旦我得到这个，我可以在我的 viewController 中显示记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:27:54.400

一种方法是 - 知道年份，您可以获得 2006-01-01 年的开始和 2006-12-31 的年末。然后过滤它们之间的日期。

用于创建谓词 - 看看[Predicate Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref/doc/uid/TP40001794-CJBDBHCB)

它很少有很好的例子，包括一些处理`NSDate`谓词的例子。

# solr - 如何在solr中按域对结果进行分组？

> ID：10005198
> 
> 赞同：0
> 
> 时间：2012-04-04T05:02:13.387
> 
> 标签：solr

我用 nutch 爬了很多网站。我正在使用 Solr 3.4 浏览结果，但我想按其域对结果进行分组。例如，如果我搜索“tabnak”，第一个结果只包含“ [http://tabnak.ir](http://tabnak.ir) ”并且不显示来自该域的其他结果（就像 google 一样）。

我想忽略以下结果：

```
http://tabnak.ir/en/news/1020/title
http://tabnak.ir/fa/allnews
... 
```

如何使用 group、group.field 和 ...为 solr 创建查询？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T14:41:10.077

您应该创建一个单独的索引字段（例如，在这种情况下名为“域”），并且应该确保在 SOLR 索引您的数据时将域与 url 分开。

然后，您必须将字段折叠分组应用于您的搜索结果。见：[http ://wiki.apache.org/solr/FieldCollapsing](http://wiki.apache.org/solr/FieldCollapsing)

# asp.net-mvc-3 - 使用 SSRS 的 MVC3 身份验证

> ID：10005199
> 
> 赞同：2
> 
> 时间：2012-04-04T05:02:16.373
> 
> 标签：asp.net-mvc-3, authentication, reporting-services, login, forms-authentication

我创建了一个使用基于表单的身份验证的 mvc3 Web 应用程序。该网站的一部分有指向 microsoft ssr 报告服务报告的链接，这些报告是从其中一个视图的 iframe 中启动的。

我遇到的问题是，当用户登录主站点然后单击其中一个报告链接时，他们会收到一个 Windows 模式登录框。

我想阻止他们接收此身份验证步骤，并依赖他们已经通过的基于表单的身份验证。同时，我想防止未经身份验证的用户在浏览器中输入其中一个 ssr 报告链接并在未登录的情况下查看它们。

这可以单独使用基于表单的身份验证来实现吗？

感谢授予。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:41:17.967

您是否设置了带有表单身份验证的 SSRS？如果没有，那么如果您在 SSRS 上配置表单身份验证，那么您可以跨多个应用程序共享表单身份验证。

我无法一步一步地描述你将如何做到这一点，但希望以下链接会有所帮助：

[Reporting Services 中的身份验证](http://technet.microsoft.com/en-us/library/ms152899%28v=sql.105%29.aspx)

[跨应用程序的表单身份验证](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)

# android - twitter4j => AndroidRuntime(446): java.lang.NoClassDefFoundError: twitter4j.http.AccessToken

> ID：10005206
> 
> 赞同：6
> 
> 时间：2012-04-04T05:03:13.087
> 
> 标签：android, twitter, twitter4j

我正在尝试将 twitter4j 用于我的应用程序以连接并发布到 twitter。我正在关注[本教程](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/)。我已经从[这里](https://github.com/ddewaele/AndroidTwitterSample)下载了示例项目并尝试在`android 2.3.3`. 我确信我已经`Constants.java`根据我的 twitter 开发者网站正确修改了文件。在`TwitterUtils.java`我已经进入`OAUTH_TOKEN`并且`OAUTH_TOKEN_SECRET`也。但运行它后，我收到以下错误消息：

```
> E/dalvikvm(374): Could not find class 'twitter4j.http.AccessToken', referenced from method com.ecs.android.sample.twitter.TwitterUtils.isAuthenticated

>W/dalvikvm(374): VFY: unable to resolve new-instance 67 (Ltwitter4j/http/AccessToken;) in Lcom/ecs/android/sample/twitter/TwitterUtils;

>D/dalvikvm(374): VFY: replacing opcode 0x22 at 0x0010

>D/dalvikvm(374): VFY: dead code 0x0012-002f in Lcom/ecs/android/sample/twitter/TwitterUtils;.isAuthenticated (Landroid/content/SharedPreferences;)Z

>E/dalvikvm(374): Could not find class 'twitter4j.http.AccessToken', referenced from method com.ecs.android.sample.twitter.TwitterUtils.sendTweet

>W/dalvikvm(374): VFY: unable to resolve new-instance 67 (Ltwitter4j/http/AccessToken;) in Lcom/ecs/android/sample/twitter/TwitterUtils;

>D/dalvikvm(374): VFY: replacing opcode 0x22 at 0x0010

>D/dalvikvm(374): VFY: dead code 0x0012-002b in Lcom/ecs/android/sample/twitter/TwitterUtils;.sendTweet (Landroid/content/SharedPreferences;Ljava/lang/String;)V

>D/AndroidRuntime(374): Shutting down VM

>W/dalvikvm(374): threadid=1: thread exiting with uncaught exception (group=0x40015560)

>E/AndroidRuntime(374): FATAL EXCEPTION: main

>E/AndroidRuntime(374): java.lang.NoClassDefFoundError: twitter4j.http.AccessToken

>E/AndroidRuntime(374):     at com.ecs.android.sample.twitter.TwitterUtils.isAuthenticated(TwitterUtils.java:18)

>E/AndroidRuntime(374):     at com.ecs.android.sample.twitter.AndroidTwitterSample.updateLoginStatus(AndroidTwitterSample.java:72)

>E/AndroidRuntime(374):     at com.ecs.android.sample.twitter.AndroidTwitterSample.onResume(AndroidTwitterSample.java:68)

>E/AndroidRuntime(374):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)

>E/AndroidRuntime(374):     at android.app.Activity.performResume(Activity.java:3832)

>E/AndroidRuntime(374):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)

>E/AndroidRuntime(374):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)

>E/AndroidRuntime(374):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)

>E/AndroidRuntime(374):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)

>E/AndroidRuntime(374):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

>E/AndroidRuntime(374):     at android.os.Handler.dispatchMessage(Handler.java:99)

>E/AndroidRuntime(374):     at android.os.Looper.loop(Looper.java:130)

>E/AndroidRuntime(374):     at android.app.ActivityThread.main(ActivityThread.java:3683)

>E/AndroidRuntime(374):     at java.lang.reflect.Method.invokeNative(Native Method)

>E/AndroidRuntime(374):     at java.lang.reflect.Method.invoke(Method.java:507)

>E/AndroidRuntime(374):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

>E/AndroidRuntime(374):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

>E/AndroidRuntime(374):     at dalvik.system.NativeStart.main(Native Method) 
```

不确定我是否错了，在 Constant.java 中，我没有更改任何内容

```
public static final String REQUEST_URL = "https://api.twitter.com/oauth/request_token";

public static final String ACCESS_URL = "https://api.twitter.com/oauth/access_token";

public static final String AUTHORIZE_URL = "https://api.twitter.com/oauth/authorize";

public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-twitter";

public static final String OAUTH_CALLBACK_HOST = "callback";

public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST; 
```

我尝试过更改`"callback"`请`"http://www.MyWebsite.com"` 咨询我该如何纠正这些问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T08:59:08.570

您需要将文件夹名称从`lib`更改`libs`为更新 ADT 17。

查看本文**[以](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)**获取有关此主题的详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T22:22:35.233

如果有人使用 ADT 18，我根本没有 lib 文件夹，我只使用 Project、Properties、Java Build Path、Libraries 选项卡。为了解决这个问题，我在我的项目中创建了一个 libs 文件夹，将我的外部 jar 复制到这个文件夹，然后删除了 Libraries 选项卡中的引用。该项目重建并工作！

# windows - Informatica：无法连接到集成服务

> ID：10005210
> 
> 赞同：0
> 
> 时间：2012-04-04T05:03:37.480
> 
> 标签：windows

我是 informatica 的新手，正在寻求可用专家的帮助。

我可以登录到管理控制台（http://localhost:6008/administrator/#admin），在那里我可以看到我的节点可用，我的存储库服务可用，我的集成服务可用。

通过 Power center desiner 工具，我可以查看我的映射。另外，我可以连接到 Powercenter Workflow manager。但是，在尝试执行我的工作流程时，它说无法连接到集成服务。

我在日志中收到以下错误：

CCM_10322

登录日志服务时出现以下错误：[[DOM_10022] 域的主网关节点不可用。选择另一个主网关。等待主网关节点的选举完成。如果问题仍然存在，请验证主网关节点是否正在运行。]。

谢谢，马尼什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T19:06:04.153

先决条件： 1）一旦存储库文件已恢复，请确保所有服务（代表和 IS 服务）都已启动。2) 确保 INFA_DOMAIN_FILE 环境变量已创建并具有正确的值。并确保在服务器和客户端机器的 PATH 中添加路径的文件。

解决方案：不得已，升级服务器和客户端机器中的域信息，如下所示，然后重新启动 infaservices 和服务器。现在可以了！！！

升级域：

`Cd $INFA_HOME/isp/bin`

`Sh infacmd.sh updateGatewayInfo –dn Domain_name –dg Servername.net:6005`

在服务器中：

`Cd $INFA_HOME/isp/bin`

`Sh infacmd.sh updateGatewayInfo –dn Domain_name –dg Servername.net:6005`

在客户端：

`cd e:\Informatica\9.0.1\clients\PowercenterClient\CommandLineUtilities\Pc\server\bin\`

`infacmd updateGatewayInfo –dn Domain_name –dg servername.net:6005'

重启服务器： `Cd $INFA_HOME/tomcat/bin`

`Sh infaservices.sh shutdown`

`Sh startserver.sh shutdown`

`Sh startserver.sh startup`

`Sh infaservices.sh startup`

完毕。现在检查！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:40:28.917

您必须使用定义一个节点作为主网关`infacmd`，`infasetup`然后您可以从管理控制台运行所有服务。

# ruby-on-rails-3 - 我们可以在渲染（部分）视图中使用 kaminari gem 实现分页功能吗

> ID：10005211
> 
> 赞同：0
> 
> 时间：2012-04-04T05:03:44.347
> 
> 标签：ruby-on-rails-3, pagination, render, renderpartial, kaminari

是否可以在渲染（部分）视图中使用 Kaminari 分页。如果有可能请告诉我该怎么做。

# css - 消除图像无缝网格中的垂直/水平间隙

> ID：10005216
> 
> 赞同：0
> 
> 时间：2012-04-04T05:04:04.020
> 
> 标签：css, grid, whitespace, vertical-alignment, alignment

我在创建无缝照片网格时遇到了一些问题。我在互联网上搜索了很长时间，但找不到任何解决方案。

我有一个图像网格，它们都是正方形且大小相同。我通过添加消除了每一行出现的空白`img { vertical-align: middle; }`

现在我需要消除每列中出现的垂直空白。

[这是我正在开发的网站](http://test.davewhitley.com/not-wp/debug/index.php)

[这是我正在开发的网站的屏幕截图](http://cl.ly/2p1b302M203W3r1X052S)

您可以看到图像的左右两侧大约有 2-3px 的空白区域。我已经尝试过`margin:0`几乎`padding:0`所有我能想到的东西。

我使用`display:inline-block`. 我需要保留这个。我不想使用花车。

我的 HTML 非常简单：

```
<ul><li><a href="#"><img src="0.jpg" /></a></li></ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:12:51.797

这样做可以消除每列中出现的垂直空白：

```
#photos li img { width: 102% } 
```

例如：

![在此处输入图像描述](../Images/f8cd082c0fbad71d5ee6334cd835171b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:09:16.550

删除宽度 columns.css 第 101 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T05:10:33.743

你为什么不想使用浮点数？这是我的建议：

```
ul { overflow: auto; width: XXXpx; }

li {
  float: left;
  width: XXXpx;
  margin: 0px;
  padding: 0px;
  outline: 0px;
}

<ul>
  <li><a href="#"><img src="img1.jpg" alt=""></a></li>
  <li><a href="#"><img src="img2.jpg" alt=""></a></li>
  <li><a href="#"><img src="img3.jpg" alt=""></a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:47:08.223

非常感谢我在 stackoverflow 上看到的最快的响应。

不过我犯了一个愚蠢的错误。因为我在使用`inline-block`我忘记了它在 HTML 中占了空白。我删除了所有的空白，现在它似乎工作了。

@MartinCortez 的答案似乎也有效，如果我不想用空格来愚弄的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T09:20:20.893

我知道现在有点晚了，但是我想我会分享我会做的事情，因为其他人可能会觉得它有用。

正如@davecave 所说，这是一个空格问题，但删除 HTML 中的空格并不总是理想的。

在包含元素上，我通常会这样做：

```
#container {
    letter-spacing: -4px;
    word-spacing: -4px; 
} 
```

并在 inline-block 的项目上重置值：

```
.item {
    letter-spacing:0;
    word-spacing:0;
} 
```

# svn - 安装程序如何设置复杂的开发人员环境？

> ID：10005217
> 
> 赞同：0
> 
> 时间：2012-04-04T05:04:16.750
> 
> 标签：svn, installation, environment

我们的开发人员环境设置往往有很多移动部件和很多步骤。每天当我们需要进行 svn 更新时，我们需要做很多事情，有时当它无法工作时，我们需要回滚所有内容，包括 svn 更新，以便我们可以继续在本地工作。

提供开发人员环境更新程序的好方法是什么？我正在寻找一些安装软件等，但想要一些易于定制的东西。我在 windows 上开发不熟悉 C# 等，我也许可以使用 powershell 或 perl 或类似的东西。

是否已经有为此的插件类型库？不知道要寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:21:58.127

普通安装程序可能是您想要的。像[nullsoft 安装程序](http://nsis.sourceforge.net/Main_Page)这样简单的东西。

正确执行卸载/还原是一件很痛苦的事情。如果可能的话，在部署更新之前虚拟化开发盒并制作快照。

# ruby-on-rails - 如何使用 Rails 控制特定文件的 max-age？

> ID：10005218
> 
> 赞同：2
> 
> 时间：2012-04-04T05:04:17.217
> 
> 标签：ruby-on-rails, ruby, caching, http-caching, actiondispatch

我让 Rails 为我的静态资产提供服务。他们中的大多数人的名字中都有哈希值，并且有很远的到期日期。但是对于一个文件，我不能在其名称中使用哈希来提供它，因此我需要控制到期日期。

我的 application.rb 中有这个，它适用于所有静态资产：

```
config.static_cache_control = "public, max-age=2592000" 
```

有没有办法让我只为一个文件设置不同的最大年龄？我知道我可以创建一个新的中间件，`ActionDispatch::Static`然后更改某些文件的值（参见[这篇文章](http://www.hokstad.com/rack-middleware-adding-cache-headers.html)）......但是这将针对每个请求运行，即使是那些不是静态资产的请求。有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:14:18.123

一个不好的技术可能是在你的 route.rb 中修复你的文件的 URL。您可以为此路由定义一个控制器，以修复您想要的 cache_control 并使用`send_data`方法来为文件提供服务。

# .net - 无法让 ServiceStack 在 IIS6 中使用 HTTPS

> ID：10005222
> 
> 赞同：7
> 
> 时间：2012-04-04T05:04:29.003
> 
> 标签：.net, rest, https, iis-6, servicestack

我在让 ServiceStack 在 IIS6 中使用 HTTPS 时遇到问题，我似乎找不到任何有关设置它的文档。目前我有一个这样的端点设置 - [http://example.com/api.ashx](http://example.com/api.ashx)。当我浏览到这个时，我得到了有用的 ServiceStack 生成页面，它解释了[http://example.com/api.ashx/metadata](http://example.com/api.ashx/metadata)上可用的 API 。当我浏览到[https://example.com/api.ashx](https://example.com/api.ashx)（注意 https）时，我收到了这个错误消息 -

> “/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。请求的 URL：/api.ashx

我的 web.config 中有以下设置（根据此处的示例 - [http://www.servicestack.net/ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)） -

```
<!-- ServiceStack: Required to host at: /api.ashx -->
    <location path="api.ashx">
        <system.web>
            <httpHandlers>
                <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
            </httpHandlers>
        </system.web> 
```

在我的本地 Windows 7 机器上，我正在运行 IIS7，它工作得很好，但测试和实时环境仍在使用 IIS6，我无法让它在那里工作。

使用 https 时，其他常规 aspx 页面工作正常。

我会很感激任何能给我推动正确方向的人！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T06:06:05.080

IIS 6 的问题在于 IIS 6.0 请求管道无法识别没有 ASP.NET 扩展名的路径，例如 .aspx 不会传递给 ASP.NET isapi 处理程序。因此，通常有 2 个选项可以实现这一点，这样您就可以让 ServiceStack 在 IIS 6 上运行：

1.  将 Web.Config 中的 servicestack 路径从“*”更改为“servicestack.ashx”

    <system.web>

    <httpHandlers> <add path="servicestack.ashx" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/> </httpHandlers>

    </system.web>

2.  为您的虚拟目录添加通配符映射以将所有未处理的请求传递到 ASP.NET：按照以下步骤使用 IIS 6.0 创建通配符脚本映射：

    1.  右键单击网站并选择属性
    2.  选择主目录选项卡
    3.  单击配置按钮
    4.  选择映射选项卡
    5.  单击插入按钮（参见图 4）
    6.  将 aspnet_isapi.dll 的路径粘贴到 Executable 字段中（您可以从 .aspx 文件的脚本映射中复制此路径）
    7.  取消选中标记为验证文件存在的复选框
    8.  单击确定按钮

![IIS 6.0 通配符映射](../Images/ca8b79229dde8e5edad34faf5de61e9d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T07:26:53.883

神话的答案对我不起作用。

我通过使用 servicestack 配置向 web.config 添加位置标记来使其工作。我发现 servicestack 与 path="*" 一起工作 - 但接受了许多请求（Episerver）但像这样解决了它：

```
<location path="UniqueTag">
    <system.web>
        <httpHandlers>
            <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
        </httpHandlers>
    </system.web>
</location> 
```

然后在所有路由前加上 UniqueTag：

```
[Route("/UniqueTag/DeletePost/{Id}", Verbs = "POST")] 
```

但请注意，mythz 答案中的选项 2 可能也是必需的，因为它是我们解决方案中的默认设置。

# shell - 在 lynx 中映射键以运行 shell-command

> ID：10005225
> 
> 赞同：3
> 
> 时间：2012-04-04T05:04:38.047
> 
> 标签：shell, command-line, keyboard-shortcuts, lynx

是否可以向 lynx 添加自定义键映射（在配置文件 ~/.lynxrc 中），它将信息（例如当前 URL、html、标题等）发送到 shell 命令？

一个示例用例：我在 OSX 上，shell 有一个 command `open`，它试图以默认方式打开给它的任何东西。所以，如果我在 lynx 中并且想将当前网页移动到默认浏览器，我想`open current-url`从 shell 调用。

另一个：通过将 URL 和标题发送到 shell 脚本（或其他东西）来整理有组织的书签文件。

使用默认键盘映射会`!`打开默认 shell，但它没有给我 URL，也没有运行单个命令并像我想要的那样退出到 lynx。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T01:23:34.267

我实际上最终找到了几种方法来处理这个问题。有些人比其他人更理想。需要对默认的 lynx.cfg 文件进行一些挖掘才能弄清楚其中的一些内容。

以下是我完成从 lynx 向 shell 命令发送信息的两种最成功的方法：

1.  在您的 lynx.cfg 文件中放置一个变体。它只能发送 URL，因此它受限于在不解析 lynx 转储本身的情况下无法处理来自网页的标题或任何其他信息。（这必须配置`--enable-extern`为 MacPorts 版本的 lynx 不可用，因此您必须从源代码安装）。

    ```
    # in lynx.cfg
    # EXTERNAL:<url>:<command> %s:<norestriction>:<allow_for_activate>[:environment]
    # Ex 1: send the url to `open <url>` to open default browser
    EXTERNAL:http:open %s:TRUE
    # Ex 2: download with wget if ftp page
    EXTERNAL:ftp:wget %s &:TRUE

    # By default ',' and '.' map to running EXTERNAL on the page and link respectively
    # KEYMAP:,:EXTERN_PAGE   # Run external program with current page
    # KEYMAP:.:EXTERN_LINK   # Run external program with current link 
    ```

2.  创建一个脚本并使用打印机运行它以收集打印环境变量。

    ```
    # in lynx.cfg
    # PRINTER:<name>:<command>:<option>:<lines/page>[:<environment>]
    PRINTER:openurl:/Users/username/bin/openurl %s:TRUE 
    ```

    然后在默认浏览器 (OSX) 中打开 url 的脚本 openurl 包含：

    ```
    #!/bin/sh
    # /Users/username/bin/openurl
    url=$LYNX_PRINT_URL
    title=$LYNX_PRINT_TITLE 
    # other variables exist like the date etc... look them up :)
    # http://osr600doc.sco.com/en/INT_lynxDoc/keystrokes/environments.html

    # perform magic ...
    /usr/bin/open $url 
    ```

可能还有其他方法，例如使用 lynxified 代理 lynxexec、lynxprog 和 lynxcgi，但在我自己的测试中，我无法使用这些方法成功传递变量。如果您知道从这些方法中获取标题和 url 信息的方法，我将有兴趣听到它。上面的示例 #1 可以通过调用 lynx 或其他浏览器来获取标题和其他信息，因此基本上可以使用该方法完成所有操作。此外，它允许映射单个键来执行该功能，打印屏幕将几个击键添加到组合中，这是不希望的。**我推荐上面的＃1。**

# ruby-on-rails - 为两个数据库生成 schema.rb 文件

> ID：10005227
> 
> 赞同：2
> 
> 时间：2012-04-04T05:05:29.050
> 
> 标签：ruby-on-rails, database, testing, activerecord, schema

在我的 Rails 应用程序中，我有两个数据库，我能够通过以下设置启动并运行它

```
database.yml

development: &defaults
  adapter: mysql
  encoding: utf8
  database: <Database1>
  username: <user_name>
  password: <password>
  host: localhost

second_development: &defaults
  adapter: mysql
  encoding: utf8
  database: <Database2>
  username: <user_name>
  password: <password>
  host: localhost

test: &defaults
  adapter: mysql
  encoding: utf8
  database: <Database1_test>
  username: <user_name>
  password: <password>
  host: localhost

second_test: &defaults
  adapter: mysql
  encoding: utf8
  database: <Database2_test>
  username: <user_name>
  password: <password>
  host: localhost 
```

但问题是在运行测试用例时，我使用的是“mocha”、“guard”和“notahat-machinist”，当我尝试运行测试用例时，它首先运行 schema.rb 文件。但问题是它只从第一个测试数据库创建模式

```
test: &defaults
      adapter: mysql
      encoding: utf8
      database: <Database1_test>
      username: <user_name>
      password: <password>
      host: localhost 
```

这将使与第二个测试数据库“Database2_test”相关的测试失败。解决方法是什么。

生成一个包含数据库模式的 schema.rb 文件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:05:41.433

schema.rb 生成由连接定义。因此，您需要在测试中使用良好的连接来获得良好的架构。

# spring - 与 bean 和应用程序上下文相关的查询。

> ID：10005228
> 
> 赞同：0
> 
> 时间：2012-04-04T05:05:42.643
> 
> 标签：spring, spring-mvc, javabeans, applicationcontext

我正在使用 Spring MVC 开发一个 Web 应用程序。我想问一些与 beans 文件和 Application Context 相关的事情。

1.  我有有对象的类。假设我有一个员工，产品，项目类，该员工中有一些对象（ID，名称），产品和项目也是如此。现在我必须为以下对象编写 bean，如下所示：

    ```
    <bean id="..." class="..."/> 
    ```

    我应该为每个类（如employee.xml、product.xml）制作一个单独的bean 文件，还是应该在一个文件中列出一个bean 标记中的所有bean，比如说xyz.xml。? 而且我们必须提到请求、会话等范围。我们必须在此处仅在写下每个 bean 或其他地方时提及？

2.  我们确实有一些方法，比如在数据库中添加员工或删除一些条目。我们需要在 bean 标记中的任何地方引用它们还是简单地将它们写在 java 类中？

3.  我有一个使用 JDBC 的数据库连接。现在我有一个类，我只需创建一个连接对象并使用它。如何做一个豆子。这样它就可以一次又一次地使用。目前我的数据库连接类是这样的：

    包裹我的包裹；

    导入java.sql.Connection；导入 java.sql.DriverManager；导入java.sql.ResultSet；导入java.sql.SQLException；导入 java.sql.Statement；

    公共类 HandleConnections {

    ```
    public Connection getConnection()
    {
        Connection con = null;
        try{
            String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
        Class.forName(driver);

        String db = "jdbc:odbc:Practice_Database";
        con = DriverManager.getConnection(db,"","");

        }catch(Exception e){System.out.println(e);}
        return con;

    }

    public void closeConnectionVariables(Connection obj, ResultSet rs, Statement st){

        //try {rs.close();} catch (SQLException e) {e.printStackTrace();}
        try {obj.close();} catch (SQLException e) {e.printStackTrace();}
        try {st.close();} catch (SQLException e) {e.printStackTrace();}
        }

    } 
    ```

4.  一旦我完成了将所有 bean 写入单独的文件或单个文件中。如何在 Spring MVC 中使用它。如何使用应用程序上下文将其带入项目。假设我有employee.xml、product.xml 或者我有一个文件xyz.xml。我需要在我的 applicationContext.xml 中编写什么代码，以便一切正常。是否有我必须编写的任何 bean Factory 方法。

请帮我解决我的问题..谢谢... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:55:05.640

1) POJO 不应该被定义为 bean。只有服务、存储库、控制器应该被定义为 bean。

2）您不需要在bean标签中提及。

3）使用 JDBCTemplate 并将数据源设置为它。

4）您已经像这样为调度程序 servlet 设置了 contextConfigLocation

```
 <servlet>
        <servlet-name>appServlet</servlet-name>
       <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T12:04:25.060

对于您的第三个问题：要创建任何类的 bean，例如服务，请在您的控制器中编写代码，如下所示

```
@Controller
@RequestMapping("eventManagement")
public class ExamEventController implements ApplicationContextAware {
  private ExamEventServiceImpl eventServiceImpl;

  @RequestMapping(value = { "/eventList" }, method = RequestMethod.GET)
  public String listGet(Model model, HttpServletRequest request,
        Locale locale) {
     ExamEvent event=eventServiceImpl.getEventDetails(eventId);
  }
  ...
  ...
  ...
  public void setApplicationContext(ApplicationContext applicationContext)
        throws BeansException {
    eventServiceImpl = (ExamEventServiceImpl)applicationContext.getBean("ExamEventService");
 }

} 
```

正如提到的那样，不要为 POJO 类创建 bean。

# php - 如果它们是同步的，如何查看本地数据库对服务器数据库的更改？以及如何不时同步它们？没有第三方工具

> ID：10005235
> 
> 赞同：1
> 
> 时间：2012-04-04T05:06:15.763
> 
> 标签：php, mysql, sync, local-database

[同步大型本地数据库与服务器数据库（MySQL）](https://stackoverflow.com/questions/3931575/sync-large-local-db-with-server-db-mysql)的延续，在我们同步它们之前，我们如何才能看到本地数据库和服务器数据库之间的差异？

我不想使用任何第三方工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:45:16.033

[查看dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中的模式和数据比较/同步工具。还有用于[数据](http://www.devart.com/dbforge/mysql/schemacompare/)和[模式](http://www.devart.com/dbforge/mysql/datacompare/)比较的单独工具。

# git - 如何用我在 Git 中的本地 repo 替换服务器 repo 文件..？

> ID：10005243
> 
> 赞同：0
> 
> 时间：2012-04-04T05:07:01.123
> 
> 标签：git, github

我的问题是在我的 git repo 中有一些文件..但是当我提交时，如果那时由于..

```
git config core.autocrlf
this is true by default.. 
```

所以在它替换的每个文件的十六进制中，`0A as 0D 0A`我确实提交了。但是在知道这个问题后我改变了..

```
git config core.autocrlf , as false 
```

但现在的问题是，如果我推动然后它的显示

```
every thing is up to date. 
```

我知道没关系，但是我现在必须推送我的新代码，因为每个文件中都有这个十六进制代码问题。
所以我会做这个......

谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:45:29.887

你可以尝试，（如果推送是相当新的并且没有人还没有拉那个特定的提交）到：

*   修改您的最新提交（例如通过更改其评论）
*   `git push -force master origin`为了通过您的新提交*擦除*GitHub 上的最新提交，这一次避免了转换。

# shell - sqlite3 的转义引号

> ID：10005245
> 
> 赞同：1
> 
> 时间：2012-04-04T05:07:21.833
> 
> 标签：shell, sqlite, applescript

我想查询名称中包含空格的列。外壳脚本是：

```
select "Column 1" from aTable; 
```

也许为时已晚，但我很难摆脱 Applescript：

```
set xxx to do shell script "sqlite3 ~/Documents/Databases/test.db \"select \"Address 1\" from aTable limit 10; \"" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:24:31.230

在 SQL 周围使用单引号：

```
set xxx to do shell script "sqlite3 ~/Documents/Databases/test.db 'select \"Address 1\" from aTable limit 10; '" 
```

或者，如果您想打败自己，请继续在各处使用双引号并添加更多转义：

```
set xxx to do shell script "sqlite3 ~/Documents/Databases/test.db \"select \\\"Address 1\\\" from aTable limit 10; \"" 
```

您需要三个，因为您必须转义转义才能将转义的双引号传递到 shell。伊克。

或者更好的是，使用原生 AppleScript SQLite 界面，几分钟的谷歌搜索应该会找到比上面嵌套引用疯狂更好的东西。

# android - 视频缩略图阵列采用器滚动速度很慢

> ID：10005248
> 
> 赞同：5
> 
> 时间：2012-04-04T05:07:35.883
> 
> 标签：android, video, thumbnails, android-arrayadapter

我创建了一个采用者来显示特定文件夹中的视频图像缩略图，但是当我滚动它时它会有点滞后，但这是为什么呢？

下面是代码：

主要活动课

```
public class TestvideolistingActivity extends ListActivity {

    String filename = null;
    String filePath = null;
    String dirNameSlash = "/videotest/";
    String dirName = "videotest";
    String path = Environment.getExternalStorageDirectory() + dirNameSlash ;
    String[] values;
    String deleteFile ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // getting the own adapter
        getInit();
    }

    @Override
    protected void onResume() {
        getInit();
        super.onResume();
    }
    public void getInit() {

        deleteFile = null;
        values = getFilesArrayFromSdCard();
        setListAdapter(new MyAdapter(this, values));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        Intent intentToPlayVideo = new Intent(Intent.ACTION_VIEW);
        intentToPlayVideo.setDataAndType(Uri.parse(path + item), "video/*");
        startActivity(intentToPlayVideo);
    }

    public String[] getFilesArrayFromSdCard() {
        String[] fileList = null;
        File videoFiles = new File(path);
        if (videoFiles.isDirectory()) {
            fileList = videoFiles.list();
        }
        return fileList;
    }
}

this the adopter class which show;s the text and the thumbnail 

public class MyAdapter extends ArrayAdapter<String> {

    private final Activity context;
    private final String[] names;
    private String filePath = null;
    private Bitmap bmThumbnail;

    private String dateFormat = "dd/MM/yyyy HH:mm:ss";
    private SimpleDateFormat formatter;
    private String filename;
    String dirNameSlash = "/videotest/";

    static class ViewHolder {
        // value for the name of the file
        public TextView text;
        // video file thumbnail
        public ImageView image;
    }

    public MyAdapter(Activity context, String[] names) {
        super(context, R.layout.rowlayout, names);
        this.context = context;
        this.names = names;
        filePath = Environment.getExternalStorageDirectory() + dirNameSlash;
        formatter = new SimpleDateFormat(dateFormat);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.rowlayout, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) rowView.findViewById(R.id.label);
            viewHolder.image = (ImageView) rowView.findViewById(R.id.icon);
            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();
        // Video file name
        String s = names[position];

        holder.text.setText(s);

        bmThumbnail = ThumbnailUtils.createVideoThumbnail(filename, Thumbnails.MICRO_KIND);
        holder.image.setImageBitmap(bmThumbnail);

        return rowView;
    }
} 
```

这是使用 Akhil 代码的错误

```
 04-04 18:09:59.078: E/AndroidRuntime(10625): FATAL EXCEPTION: main
04-04 18:09:59.078: E/AndroidRuntime(10625): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-04 18:09:59.078: E/AndroidRuntime(10625):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at java.util.ArrayList.get(ArrayList.java:311)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at com.koders.testvideolisting.MyPerformanceArrayAdapter.getView(MyPerformanceArrayAdapter.java:111)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.ListView.makeAndAddView(ListView.java:1727)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.ListView.fillDown(ListView.java:652)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.ListView.fillFromTop(ListView.java:709)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.ListView.layoutChildren(ListView.java:1580)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.AbsListView.onLayout(AbsListView.java:1147)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.View.layout(View.java:7034)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.View.layout(View.java:7034)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.View.layout(View.java:7034)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.View.layout(View.java:7034)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1049)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1744)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.os.Looper.loop(Looper.java:144)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at android.app.ActivityThread.main(ActivityThread.java:4937)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at java.lang.reflect.Method.invoke(Method.java:521)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-04 18:09:59.078: E/AndroidRuntime(10625):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T05:49:09.963

列表视图滞后，因为您*每次都*在 getView()中创建*新*的缩略图。只是没有缓存或重用。当使用向上/向下滚动时，会调用 getView() 并且会发生创建缩略图的耗时过程，因此会出现滞后。您也将很快运行。 *`Out of Memory`*

*创建并保留一个位图数组，其长度与数据源中元素的数量相同，并将缩略图存储在数组中。从数组中取出该特定位置的位图`getView()`。这应该会大大提高性能。*

*编辑我添加了一个 Hasmap 位图来演示重用。*

 *```
 public MyAdapter(Activity context, String[] names) {
    super(context, R.layout.rowlayout, names);
    this.context = context;
    this.names = names;
    filePath = Environment.getExternalStorageDirectory() + dirNameSlash;
    formatter = new SimpleDateFormat(dateFormat);
cacheBitmap = new HashMap<String, Bitmap>(names.length);
initCacheBitmap();
}

private void initCacheBitmap() {
    for(String string:names)
        cacheBitmap.put(string, ThumbnailUtils.createVideoThumbnail(filePath+string, Thumbnails.MICRO_KIND));

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View rowView = convertView;
    if (rowView == null) {
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.rowlayout, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) rowView.findViewById(R.id.label);
        viewHolder.image = (ImageView) rowView.findViewById(R.id.icon);
        rowView.setTag(viewHolder);
    }

    ViewHolder holder = (ViewHolder) rowView.getTag();
    // Video file name
    String s = names[position];

    holder.text.setText(s);

    holder.image.setImageBitmap(cacheBitmap.get(s));

    return rowView;
}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:07:57.653

由于您在 getView() 中为视频创建缩略图，因此会减慢滚动速度。

因此，您必须将位图保存在 Arrarys 中并在滚动时列出它。试试这个示例，因为这将真正帮助您快速滚动。此示例包含图像，您必须在 Media Content Providers 中更改视频。[快速滚动示例](http://vikaskanani.wordpress.com/android-custom-gallery-and-instant-upload-project/)*

# magento - Magento - 访问客户的愿望清单

> ID：10005251
> 
> 赞同：9
> 
> 时间：2012-04-04T05:07:51.180
> 
> 标签：magento

我希望能够加载客户的愿望清单并返回列表中产品的产品 ID

我在用：

```
$wishList = Mage::getSingleton('wishlist/wishlist')->loadByCustomer($customer);
$wishListItemCollection = $wishList->getItemCollection(); 
```

问题是项目集合中的数组受到保护，我找不到任何方法来提取数据。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-04T06:54:06.680

你非常接近你的目标。

```
$wishList = Mage::getSingleton('wishlist/wishlist')->loadByCustomer($customer);
$wishListItemCollection = $wishList->getItemCollection();

if (count($wishListItemCollection)) {
    $arrProductIds = array();

    foreach ($wishListItemCollection as $item) {
        /* @var $product Mage_Catalog_Model_Product */
        $product = $item->getProduct();
        $arrProductIds[] = $product->getId();
    }
} 
```

数组变量`$arrProductIds`现在将包含该特定客户已加入愿望清单的所有产品 ID 的列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-09T05:47:10.400

你的代码是正确的。可能有客户未加载。这是代码。

```
$customer = Mage::getSingleton('customer/session')->getCustomer();
$wishlist = Mage::getModel('wishlist/wishlist')->loadByCustomer($customer, true);
$wishListItemCollection = $wishlist->getItemCollection();

foreach ($wishListItemCollection as $item)
{
   // do things
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-15T01:23:41.267

在任何模板中，使用 magento 1.8，这都有效

```
Total: <?php echo $this->helper('wishlist')->getItemCount() ?>

// Items
$this->helper('wishlist')->getWishlist()->getItemCollection(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T06:54:18.957

```
$wishList = Mage::getSingleton('wishlist/wishlist')->loadByCustomer($customer);
$wishListItemCollection = $wishList->getItemCollection();

foreach ($wishListItemCollection as $item)
{
    //do your thing e.g. echo $item->getName();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-22T06:54:13.853

试试这个产品的所有细节，如名称、图像等......

```
<?php
 $customer = Mage::getSingleton('customer/session')->getCustomer();
 if($customer->getId())
{
     $wishlist = Mage::getModel('wishlist/wishlist')->loadByCustomer($customer, true);
     $wishListItemCollection = $wishlist->getItemCollection();
     foreach ($wishListItemCollection as $item)
     {
           echo $item->getName()."</br>";
           echo $item->getId()."</br>";
           echo $item->getPrice()."</br>";
           echo $item->getQty()."</br>";  
           $item = Mage::getModel('catalog/product')->setStoreId($item->getStoreId())->load($item->getProductId());
          if ($item->getId()) :
?>
<img src="<?php echo Mage::helper('catalog/image')->init($item, 'small_image')->resize(113, 113); ?>" width="113" height="113" />
<?php endif; } } ?> 
```

# android - Android 应用程序中的默认键事件处理程序

> ID：10005256
> 
> 赞同：0
> 
> 时间：2012-04-04T05:08:54.920
> 
> 标签：android

在 Android 中，有没有一种方法可以让 Android 应用程序在活动时捕获并处理所有关键事件（可能还有触摸事件），然后再将它们传递到应该处理它的实际视图？

我知道我们可以在 Activity 中使用 onKeyDown 或类似方法来处理 keyevent，但只有当它的子视图都没有在内部处理它时才会触发它。这些视图通常是 ListView、GridView、ScrollView 等。

我想找到一种方法，在将 keyEvent 传递给这些视图之前调用我的 keyHandler 方法。

我的 keyHandler 中的实现将非常简单。它只会在每个事件上播放一个音调，就像按键音一样，然后将其转发以按照这些视图或 Android 框架应有的方式进行处理。

想知道它是否可能是因为我不想为每个活动中的每个视图编写 onKeyListener，因为我有很多活动和很多视图，而且在任何地方都很难编写相同的代码。如果有办法，我可以在 BaseActivity 中实现它并由此派生我的所有活动，然后继续使用默认密钥处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:52:31.483

我自己没有尝试过，但我认为这个会帮助你：（只需向下滚动一点到文中提到的方法）

[输入事件：事件处理程序 - Activity.dispatchTouchEvent(MotionEvent)](http://developer.android.com/guide/topics/ui/ui-events.html)

看起来这是在事件到达窗口之前捕获事件的机会。在此处阅读详细[说明](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)。

# c++ - VBO 和 glTranslatef GLSL 着色器中的 gl_vertex 是否需要乘以一些东西？

> ID：10005257
> 
> 赞同：2
> 
> 时间：2012-04-04T05:09:06.073
> 
> 标签：c++, opengl, glsl, shader, vbo

我有 VBO 来划分我的世界，有点像游戏暗黑破坏神。我曾经将顶点数据本身设置为世界中的确切位置，但随着位置的增长，浮点数学错误也随之增加。

我现在已经更改了它，以便顶点数据相对于 0,0,0，并且我正在使用 glTranslatef 将每个 VBO 设置到播放器周围的正确位置。

```
glPushMatrix();
glTranslatef(m_X, m_Y, m_Z);
draw VBO
glPopMatrix(); 
```

这使得玩家的 X 和 Z 位置始终在 0-512 范围内（1 VBO 的物理大小），当他们离开时，世界会以相反的方式移动。这很好用并修复了浮点错误，但是它引入了一个新错误。

在我的着色器中，我通过将顶点的 X 和 Z 位置的 cos/sin 乘以时间变量并用它们修改 Y 位置来创建类似水波的效果。

```
uniform float timeVar;
...
vec4 v = vec4(gl_Vertex);
v.y += (sin(v.x+timeVar*2)+cos(v.z+timeVar))*2-5;
...
gl_Position = gl_ModelViewProjectionMatrix * v; 
```

当顶点位置准确时，这是有效的，但现在我怀疑它们在 0-512 范围内，因为在我将它们 glTranslatef 到它们的实际位置之前，它们都是设置的。这使得波浪仍然出现，但现在在 VBO 的边缘，由于 cos(0) != cos(512)，水是分开的。

我需要在着色器中做些什么来获得顶点在世界中的实际位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:20:17.820

作为制服传递世界位置。

# scala - Scala + Akka 的奇怪尝试/捕获行为

> ID：10005259
> 
> 赞同：2
> 
> 时间：2012-04-04T05:09:26.880
> 
> 标签：scala, exception, akka

我正在尝试使用 Akka 为自定义应用程序协议实现 TCP 服务器。我正在尝试按照此处给出的示例：[http](http://doc.akka.io/docs/akka/2.0/scala/io.html) ://doc.akka.io/docs/akka/2.0/scala/io.html在 for...yield 循环中执行非阻塞 IO。

我发现当我从 yield 块内部抛出异常时，我无法从块外部捕获它。我想我对 Akka 或 Scala 在这里的工作方式有一个根本的误解，我会很感激任何提示。

我将代码归结为：

```
import akka.actor._
import java.net.InetSocketAddress

class EchoServer(port: Int) extends Actor {

  val state = IO.IterateeRef.Map.async[IO.Handle]()(context.dispatcher)

  override def preStart {
    IOManager(context.system) listen new InetSocketAddress(port)
  }

  def receive = {
    case IO.NewClient(server) =>
      val socket = server.accept()
      state(socket) flatMap (_ => EchoServer.processRequest(socket))
    case IO.Read(socket, bytes) =>
      state(socket)(IO.Chunk(bytes))
    case IO.Closed(socket, cause) =>
      state(socket)(IO.EOF(None))
      state -= socket
  }
}

object EchoServer extends App
{
  def processRequest(socket: IO.SocketHandle): IO.Iteratee[Unit] =
  {
    println( "In process request")
    try {
      for {
        bs <- IO take 1
      } yield {
        println("I'll get here")
        throw new Exception("Hey-o!")
        println("But not here ... as expected")
      }
    } catch {
      case e: Exception => println("And not here ... wtf?"); IO.Done()  // NEVER GETS HERE
    }
  }

  ActorSystem().actorOf(Props(new EchoServer(8080)))
} 
```

在这里遵循要点可能更方便：[https ://gist.github.com/2296554](https://gist.github.com/2296554)

谁能解释为什么在这种情况下控制无法到达我的 catch 块？

我注意到，如果我在 Akka 中打开调试日志记录，我会在输出中看到这条消息：

```
[DEBUG] [04/03/2012 22:42:25.106] [EchoServerActorSystem-akka.actor.default-dispatcher-1] [Future] Hey-o! 
```

所以我猜异常是由 Akka 调度程序处理的？谁能解释这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T07:10:10.030

# asp.net-membership - 自定义 ASP.Net 成员资格提供程序和某些属性

> ID：10005260
> 
> 赞同：0
> 
> 时间：2012-04-04T05:09:41.083
> 
> 标签：asp.net-membership

实现自定义成员资格提供程序时，某些属性（例如[MinRequiredPasswordLength）](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.minrequiredpasswordlength%28v=vs.90%29.aspx)仅提供 getter。

我在网上找到的文档说明这些属性是在 web.config 中配置的。

但是，我不清楚`System.Web.Security.MembershipProvider`（我的自定义提供程序是从中派生的）是否会读取 web.config 设置并设置适当的值，或者我的具体子类是否负责该任务。

基类是否读取并设置值，或者我是否负责在我的子类中这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:29:02.737

我原以为基类肯定会处理这个问题，因为它是从 web.config 中读取的。但是，在这里检查 - [http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.minrequiredpasswordlength.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.minrequiredpasswordlength.aspx) - 这是 MembershipProvider 声明属性的方式：

```
public abstract int MinRequiredPasswordLength { get; } 
```

所以......我猜你应该对此负责，嗯？

# linux - 更改 ec2 实例上打开文件的数量

> ID：10005261
> 
> 赞同：0
> 
> 时间：2012-04-04T05:09:47.270
> 
> 标签：linux, amazon-ec2, amazon-web-services

我正在使用 32 位 Amazon Linux（Centos？）。根据博客[http://gnufreakz.wordpress.com/2009/08/12/increase-ulimit-in-centos/](http://gnufreakz.wordpress.com/2009/08/12/increase-ulimit-in-centos/)我尝试更改一些参数。

我将以下行添加到 /etc/sysctl.conf

```
fs.file-max = 65536 
```

并运行 sysctl -p

我将以下行添加到 /etc/security/limits.conf

```
*   hard    nofile  65536 
```

没运气！重新启动后， ulimit -a 仍然给我：

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 26597
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:33:15.977

尝试添加

```
ulimit -n 65536 
```

到您的 /etc/profile 或 /home/[username]/.bash_profile

# python - 在 Python 3.2 中，“lambda”被视为“关键字”、“运算符”还是两者兼而有之？

> ID：10005268
> 
> 赞同：6
> 
> 时间：2012-04-04T05:10:37.690
> 
> 标签：python, lambda, language-lawyer

在 Python 3.2 中，根据这个：[http ://docs.python.org/py3k/reference/expressions.html#summary](http://docs.python.org/py3k/reference/expressions.html#summary)

`lambda`是 Python 中优先级最低的运算符。

并据此：[http ://docs.python.org/py3k/reference/lexical_analysis.html#keywords](http://docs.python.org/py3k/reference/lexical_analysis.html#keywords)

`lambda`是 Python 语言关键字。

但是，据此：[http ://docs.python.org/py3k/reference/lexical_analysis.html#other-tokens](http://docs.python.org/py3k/reference/lexical_analysis.html#other-tokens)

运算符和关键字是不同的实体。

我正在尝试系统地向某人解释 Python 3.2，我不想让他们感到困惑。不过，我自己对运算符和关键字的确切定义感到困惑。

*我最好的猜测是，术语“运算符”在 Python 解析器和 Python 词法分析器的上下文中使用时的含义略有不同。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:16:44.587

> 运算符和关键字是不同的实体。

不，他们不是。`is`, `in`, `and`, `or`, `not`, 我敢肯定还有一些两者兼而有之。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:16:15.627

这并不是说它们是相互排斥的，只是：

> “存在以下类别的标记：标识符、关键字、文字、运算符和分隔符”

我属于人和美国人。当然，这可能意味着它们是相互排斥的，在这种情况下，文档是不一致的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:08:16.253

`lambda`显然是一个关键字；它是解析器识别的特殊词，否则将属于`identifier`.

`lambda`不是*语义上*的运算符。运算符只是一个函数，但使用不同的语法调用。我们可以想象用函数替换`+`操作符`add`；我们所有的加法程序都会变得更冗长，更难阅读，但我们仍然可以编写它们。`lambda`另一方面，语言结构不能用函数代替；`lambda x: x+1`不只是从值`x`和计算结果`x+1`，因为在这种情况下它们根本不是值（`x`是正在定义的函数的参数名称，并且`x+1`是 lambda 主体的代码）。

在您链接到的同一页面中，我们有：[http ://docs.python.org/py3k/reference/lexical_analysis.html#operators](http://docs.python.org/py3k/reference/lexical_analysis.html#operators)

> 以下标记是运算符：
> 
> ```
> +       -       *       **      /       //      %
> <<      >>      &       |       ^       ~
> <       >       <=      >=      ==      != 
> ```

这就是运算符小节的全部内容。由此我认为，在定义语言标记的上下文中，“运算符”是符号运算符，而关于*关键字*的部分明确说明“这些本来是标识符的东西是关键字”。这就是为什么我认为没有列出诸如`not`, `is`,等关键字运算符的原因。`in`但肯定有一些语义运算符是关键字，无论解析器是否将它们视为单独的类。

我不确定为什么[http://docs.python.org/py3k/reference/expressions.html#summary](http://docs.python.org/py3k/reference/expressions.html#summary)将其描述`lambda`为运算符；我当然不会。严格来说，它并没有明确说“`lambda`是优先级最低的运算符”，它只是`lambda`在列标题为“运算符”的表中列出。也许这只是一种方便；描述`lambda`为具有低优先级的事物是阐明 Python 将如何解析的好方法`lambda x: x + 1`（理论上它可以是`(lambda x: x) + 1`or `lambda x: (x + 1)`）。

# node.js - 从 node.js 中的 HTTP 请求中提取特定字符串

> ID：10005274
> 
> 赞同：0
> 
> 时间：2012-04-04T05:11:33.290
> 
> 标签：node.js

NOOb在这里。我有一个 HTTP 请求，它从特定网页中提取所有内容。但是，我只需要一个特定的字符串：`"Most recent instantaneous value: "`. 事实上，我实际上需要存储后面的值`value:`。这是我的代码：

```
var http = require("http");

var options = {
 host: 'waterdata.usgs.gov',
 port: 80,
 path: '/ga/nwis/uv?cb_72036=on&cb_00062=on&format=gif_default&period=1&site_no=02334400',
 method: 'POST'
};

var req = http.request(options, function(res) {
 console.log('STATUS: ' + res.statusCode);
 console.log('HEADERS: ' + JSON.stringify(res.headers));
 res.setEncoding('utf8');
 res.on('data', function (chunk) {
 console.log('BODY: ' + chunk);
 });
});

req.on('error', function(e) {
 console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

我意识到我不需要所有的`console.log`陈述，但我需要保留`console.log('BODY: ' + chunk);`所有的数据下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:31:24.150

永远不要像我在这个 quick'n'dirty 示例中那样做。有[很多用于 DOM 遍历、HTML/XML 解析等](http://toolbox.no.de/) [的](http://search.npmjs.org/) [模块](http://eirikb.github.com/nipster/#)......它们比简单的正则表达式更安全**。**但就这样你得到了一般的想法：

```
var http = require("http");

var options = {
    host: 'waterdata.usgs.gov',
    port: 80,
    path: '/ga/nwis/uv?cb_72036=on&cb_00062=on&format=gif_default&period=1&site_no=02334400',
};

function extract (body, cb) {
    if(!body) 
        return;

    var matches=body.match(/Most recent instantaneous value: ([^ ]+) /);
    if(matches)
        cb(matches[1]);
}

http.get(options, function(res) {
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        extract(chunk, function(v){ console.log(v); });
    });
}).on('error', function(e) {
    console.log('problem with request: ' + e.message);
}); 
```

不知何故，在发送 POST 而不是 GET 请求时，我也得到了一个不同的页面。所以我改变了一点......

关于你的第二个问题：不，你不需要保留任何`console.log()`陈述。只需使用回调，一切都很好！:-)

# asp.net - 在 ajax webservice 中使用 Umbraco 节点工厂

> ID：10005278
> 
> 赞同：3
> 
> 时间：2012-04-04T05:12:30.863
> 
> 标签：asp.net, xpath, asmx, umbraco

我创建了一个通过 Ajax 调用的 .asmx Web 服务。我使用了以下代码

```
Node iLike = Node.GetCurrent().Parent as Node;
       Property Subject = iLike.GetProperty("emailToAdminSubject") as Property;
       Property BodyText = iLike.GetProperty("fbEmailToAdmin") as Property; 
```

但 Node.GetCurrent() 返回一个空值。有没有办法在 asmx Web 服务中获取当前节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:30:35.713

Node.GetCurrent() 在 Web 服务的上下文中不起作用。（请参阅此[论坛主题](http://our.umbraco.org/forum/developers/api-questions/12685-Working-with-Node-factory-in-ajax-webservice-%28find-node-by-name%29)。）您可以使用 ajax 调用将当前节点的 Id 传递给 Web 服务，然后使用...

```
Node iLike = new Node(id).Parent; 
```

...从那里。

# java - 我的代码中的错误在哪里？

> ID：10005279
> 
> 赞同：-3
> 
> 时间：2012-04-04T05:12:33.867
> 
> 标签：java

```
/** Yields: a String that contains each capital Letter (in 'A'..'Z') whose representation is prime */

public static String primeChars() {
    String s = "";

    // inv: s contains each capital in "A'..c-1 whose representation is prime

    for (char c = 'A'; c <= 'Z'; c=(char)(c+1)) {
        if (Loops.isPrime((int)c) == true) {
            s= s+1;
        }
    }

    // s contains each capital in 'A' ..'Z' whose rep is a prime

    return s; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:14:40.183

它应该是：

```
s = s + c; 
```

如果它是素数，你想连接字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:25:04.523

也许你想写

```
s = s + c 
```

那么你想在 char ASCII 码或 char 位置上评估 isPrime 吗？也就是说，您希望 'A' 的值是 65（ASCII 码）还是 1（因为 A 是 1 个字母）？在第一种情况下修复

```
s = s + c 
```

已经足够了，但第二次你也需要改变

```
if (Loops.isPrime((int)c)==true) { 
```

并且不要通过“c”但是

```
if (Loops.isPrime( (int)c - (int)'A' + 1 )==true) { 
```

# css - 验证失败时如何将 css 添加到单个 mvc Helper 方法 - 从模型中

> ID：10005282
> 
> 赞同：2
> 
> 时间：2012-04-04T05:12:57.877
> 
> 标签：css, asp.net-mvc, validation, razor, html-helper

当验证失败时，有没有人有一种简单的方法可以将 css 类添加到 html 标签，最好是**在模型**中，在*公共 IEnumerable Validate(ValidationContext context)*覆盖中，而不是使用 jQuery 或在控制器中。

我的验证摘要给了我错误消息，我只想将 * 放在失败的输入旁边，并使其标签文本变为粗体和红色。

```
 @Html.LabelFor(model => model.Name)
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)<br/><br />
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:16:12.940

如果您还没有找到解决方案，请查看[http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx](http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx)

它为支持 html 属性的 LabelFor 编写了 HTML Helper 扩展。您可以将此代码用作模板来根据您的需要进行修改。一种选择是检测是否发生了验证错误。前几天我写了类似的东西：

```
 public static string IsInvalidFor<TModel, TValue>(
        this HtmlHelper<TModel> htmlHelper,            
        Expression<Func<TModel, TValue>> expression, 
        string cssErrorClass)
    {
        if (ValidationExtensions.ValidationMessageFor(htmlHelper, expression) != null) 
             return cssErrorClass;
        else return "";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:47:50.603

如果您想在这种情况下在 .cs 文件模型中执行此操作，只需附加此

```
 string name = //ur name property//;
            oppdesc = "";               
            oppdesc += "<span class ="error"+ "\">" +      name+ "</span>"; 
```

并且您在您的 CSS 中将类错误定义为粗体和红色。

# javascript - 如何使用phonegap显示网页

> ID：10005283
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:13:51.080
> 
> 标签：javascript, iphone, cordova, phonegap

我正在使用电话间隙为 iphone 开发一个应用程序。我需要在单击一个按钮时显示网页。我使用 html 设计了那个按钮。如何显示网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:25:18.460

将单击处理程序附加到该按钮并使用此[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T06:08:42.913

您将需要在名为 childBrowser 中使用 phonegap 插件，这将帮助您在不离开您的应用程序的情况下显示外部网页 在[ChildBrowser for android](http://s.zah.me/Hq6vzF)检查它，这是[ChildBrowser for ios](http://s.zah.me/Hq6Kuu)

# java - 无法访问管理控制面板或部署 App Engine 应用

> ID：10005285
> 
> 赞同：1
> 
> 时间：2012-04-04T05:14:09.860
> 
> 标签：java, google-app-engine, deployment, web-applications

因此，大约两三个小时前，我成功地开发并能够将我的应用引擎应用从 Eclipse 部署到 App Engine。然而，直到大约一个小时前，我一直无法这样做。在 Eclipse 中，当我第一次尝试部署应用程序但失败时，进度冻结在 20%（“预编译...”）大约 10 分钟，返回一个错误，告诉我禁用预编译`appengine-web.xml`，我做到了。然后，经过另一次尝试，它在即将发生预编译之前的步骤中冻结了大约 10 分钟（“克隆应用程序文件”），从应用引擎返回 500 服务器错误。我尝试了另一个我今天成功部署的应用程序引擎项目，但它以同样的方式失败了。

为了查看出了什么问题，我尝试登录 appengine.google.com 上的管理面板，但是当我在“我的应用程序”中单击我的一个应用程序时，加载需要大约 1 分钟并给我一个 403 错误。当我回去重试时，加载需要 2 分钟并给了我一个服务器错误（我认为这将是一个 500 服务器错误，但它没有说，只是黑色文本和一个报告链接）。第三次尝试时，我得到一个标题为“再试一次 (503) -*我的应用程序*”的错误页面。

**信息：**

*   我正在使用 Google Apps 帐户。
*   这些项目是新的（今天创建的）
*   这些项目可以更早地部署
*   对项目进行的唯一导致第一个错误的更改是添加了 HTML/CSS 文件
*   在第一个失败后我尝试部署之前，没有对第二个项目进行任何新的更改
*   我唯一能想到的可能是我将一个域（通过 Google Apps 注册和配置）添加到它工作和不工作之间的一个项目中

**编辑：** 首先想到的是某种中断，但似乎没有定期维护，也没有报告中断。

**Edit2：** 看来我现在可以访问我的应用程序的仪表板，但部署现在以同样的方式失败（500 服务器错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:32:51.583

所以这就是我修复它的方法：

我所做的只是为了测试创建一个全新的示例项目并将其作为第一个应用程序部署到应用程序引擎，但我收到另一个错误，告诉我另一个管理员正在更新此应用程序，为了修复此事务，我必须运行应用程序上的“appcfg 回滚”。因此，我在 Eclipse 插件文件夹中搜索了 appcfg，在那里打开了一个命令窗口并运行：

```
appcfg rollback "path_to_project_in_eclipse_workspace\war" 
```

然后我成功部署了新的测试应用程序，然后部署了原始应用程序，一切顺利。

不完全确定发生了什么。事务可能刚刚失败并搞砸了应用程序引擎服务器上的应用程序，但回滚命令有效（感谢上帝！）现在我没有任何问题。

希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:21:29.263

这是一个暂时的问题。我也看到了，还有其他一些人在邮件列表上抱怨它。问题最终消失了。

# objective-c - 正弦到弧度 Objective-C

> ID：10005290
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:15:32.833
> 
> 标签：objective-c, trigonometry, radians

我正在开发的应用程序的这一部分，我在目标 C 中有以下等式。所有变量都是浮点数。r 是角度的正弦值，当显示在文本字段中时，我想将 r 转换为弧度。

```
r = ns/ni
r = sinf(r);
rr = asinf(r);

textfieldRi.text = [NSString stringwithFormat:@"%.02f", rr]; 
```

我没有得到正确的结果。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:38:15.063

我不完全确定您认为通过执行正弦后跟反正弦可以获得什么，除非可能确保范围`r`减小到最小范围，在这种情况下`asin(sin(r))`应该可以正常工作，假设`r`已经在弧度中。

如果您想转换`r`为弧度，我必须假设它当前是度数，在这种情况下您只需要执行以下操作：

```
radians = degrees * 3.141592653589 / 180.0; // or M_PI in math.h. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:40:36.277

Objective-c 自动使用弧度而不是度数，但是将度数转换为弧度除以 180 然后乘以 PI。

# openerp - OpenERP 中的看板视图

> ID：10005291
> 
> 赞同：8
> 
> 时间：2012-04-04T05:15:32.857
> 
> 标签：openerp, kanban

如何在 OpenERP 中创建看板视图？

开发者的[书](http://doc.openerp.com/v6.1/developer/index.html#book-develop-link)似乎没有关于新看板视图的任何信息，而且我在[OpenERP 论坛](https://www.google.com/search?q=site%3aopenerp.com%20inurl%3aforum%20kanban)中也没有看到任何有用的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:33:00.077

这是显示如何在 OpenERP 中开发看板视图的示例代码。

对于看板视图，您必须准备 2 个文件：（1）xml 文件和（2）css 文件。CSS 文件用于格式化看板视图。

```
<record model="ir.ui.view" id="resource_kanban_view">
    <field name="name">any name of ur  model</field>
    <field name="model">object.name</field>
    <field name="type">kanban</field>
    <field name="arch" type="xml">
        <kanban>
            <templates>
                <t t-name="kanban-box">
                    <div class="oe_resource_vignette">
                        <div class="oe_resource_image">
                            <a type="edit"><img t-att-src="kanban_image('object.name', 'photo', record.id.value)" class="oe_resource_picture"/></a>
                        </div>
                        <div class="oe_resource_details">
                            <ul>
<!--Here you have to write the object's field name which you want to display in kanban view -->
                               <li><field name="name"/></li>
                               <li><field name="author"/></li>
                               <li><field name="description"/></li>
                               <li><field name="available_copy"/> </li>                                   
                             </ul>
                        </div>
                    </div>                       
                </t>
            </templates>
        </kanban>
    </field>
</record> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T09:22:40.933

Their is Doc on this, KANBAN view is created based on QWEB technology, developed by OF itself, you can see the the whole lib [QWEB lib](https://github.com/antonylesuisse/qweb) and under Doc Section you can see how you can define the qWeb [QWEB Template](https://github.com/antonylesuisse/qweb/blob/master/doc/template.html), Now if you understand it then all you just need to do is out your web template under tag in view declaration, where other systex is same as generic view declaration :

```
 <record model="ir.ui.view" id="view_external_id">
        <field name="name">View Name</field>
        <field name="model">openerp.modelfield>
        <field name="type">kanban</field>
        <field name="arch" type="xml"> 
             <kanban>
                <field name="color"/>
                <!--list of field to be loaded -->
                <field name="list_price"/>
                <templates>
                     <!--Your Qweb based template goes here, each record will be wrapped in template so you can arrange field veyr easily in box -->
                </templates>
            </kanban>
        </field>
    </record> 
```

Hope this will help you.

Regards

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T23:07:45.857

我还看不到它的任何文档，所以你能做的最好的就是在插件项目中寻找示例。在所有 XML 文件中搜索`<kanban>`. [这是来自stock 模块](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/6714/stock/product_view.xml#L129)的示例：

```
 <record model="ir.ui.view" id="product.product_kanban_view">
        <field name="name">Product Kanban</field>
        <field name="model">product.product</field>
        <field name="type">kanban</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="color"/>
                <field name="type"/>
                <field name="product_image"/>
                <field name="list_price"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_product_vignette">
                            <div class="oe_product_img">
                            <a type="edit"><img t-att-src="kanban_image('product.product', 'product_image', record.id.value)" class="oe_product_photo"/></a>
                            </div>
                            <div class="oe_product_desc">
                                <h4><a type="edit"><field name="name"></field></a></h4>
                                <ul>
                                    <li t-if="record.type.raw_value != 'service'">Stock on hand: <field name="qty_available"/> <field name="uom_id"/></li>
                                    <li t-if="record.type.raw_value != 'service'">Stock available: <field name="virtual_available"/> <field name="uom_id"/></li>
                                    <li>Price: <field name="lst_price"></field></li>
                                    <li>Cost: <field name="standard_price"></field></li>
                                </ul>
                            </div>
                        </div>
                        <script>
                            $('.oe_product_photo').load(function() { if($(this).width() > $(this).height()) { $(this).addClass('oe_product_photo_wide') } });
                        </script>
                        <div></div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-28T12:20:09.720

只需在 xml 文件中使用 view_mode 更新此模型 =“ir.actions.act_window”，例如：

```
 <record id="action_id" model="ir.actions.act_window">
        <field name="name">Name1</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">model_name</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form,calendar,graph,gantt</field>
.....
</record> 
```

这是调用所有视图的方式，链接[http://www.slideshare.net/openobject/openerp-61-framework-changes](http://www.slideshare.net/openobject/openerp-61-framework-changes)将帮助您如何创建看板视图。我希望它会帮助你...

# asp.net - Orchard 中的 PersistentBag 异常

> ID：10005292
> 
> 赞同：1
> 
> 时间：2012-04-04T05:15:35.493
> 
> 标签：asp.net, asp.net-mvc, nhibernate, orchardcms

我正在尝试调整指南[http://docs.orchardproject.net/Documentation/Creating-1-n-and-nn-relations](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations)以在我的 Orchard 模块中创建 N 对 N 关系，但我得到了一个例外“无法将 NHibernate.Collection.Generic.PersistentGenericBag`1[ArealAds.Models.StreetAreaRecord] 转换为 System.Collections.Generic.List`1[ArealAds.Models.StreetAreaRecord]”。我不完全了解幕后发生的事情，所以我很难调试。此错误的可能原因是什么？我从哪里开始寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:45:30.590

您应该将相关项目集合的类型从更改`List<T>`为`IList<T>`（或更通用`IEnumerable<T>`），因为 NHibernate 无法将属性映射到它的内部项目集合（实现`IList<T>`）。

见[类似问题](https://stackoverflow.com/questions/1638593/unable-to-cast-object-of-type-nhibernate-collection-generic-persistentgenericbag)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:55:09.380

您没有正确遵循指南。文档中有一个 nn 关系的示例，它可以工作。没有看到你的任何代码，很难说哪里出了问题，但它必须与教程有所不同。您可以查看的另一个示例是此模块中的捆绑部分：[https](https://bitbucket.org/bleroy/nwazet.commerce) ://bitbucket.org/bleroy/nwazet.commerce 。它在内容项之间建立了一个 nn 关系。

# html - 预选一个 struts 2中的按钮

> ID：10005295
> 
> 赞同：0
> 
> 时间：2012-04-04T05:15:59.690
> 
> 标签：html, jsp, struts2

这是我的单选按钮代码。

```
<s:radio name="filter" requiredposition="right"
list="#{'STATUS_FILTER_START':'START','STATUS_FILTER_END':'STOP'}" 
 value = "STATUS_FILTER_START"></s:radio> 
```

或者

```
<s:radio name="filter" requiredposition="right"
list="#{'STATUS_FILTER_START':'START','STATUS_FILTER_END':'STOP'}" 
 listValue = "STATUS_FILTER_START" listKey =  "STATUS_FILTER_START"s></s:radio> 
```

但没有任何效果。
有人可以帮我吗？我不想要 html:radio 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T13:37:45.633

也适用于使用静态值的开发人员。这是解决方案：

```
<s:radio label="correctOption" name="correctAnswer" list=" 
#{'1':'1','2':'2','3':'3','4':'4'}" value="1"/> 
```

另一种情况是静态列表中的字符串：

```
<s:radio label="Gender" name="gender" list=" 
    #{'male':'Male','female':'Female'}" value="'male'"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:12:41.583

在你的动作类中设置默认值，并在 OGNL 中使用它来告诉选择哪个值作为默认值

```
List<String> filter= new ArrayList<String>();
        filter.add("START");
        filter.add("STOP");

    public List<String> getFilter() {
        return filter;
    }
    public String getDefaultFilterValue(){
        return "STOP";
    } 
```

在你的jsp中使用喜欢

```
<s:radio label="filter" name="filter" list="filter" value="defaultGenderValue" /> 
```

我使用了简单的 ArrayList，但您可以自由使用 Map。

# asp.net - 如何在asp.net（Vb.net）的临时表中映射一行

> ID：10005297
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:16:00.093
> 
> 标签：asp.net, vb.net, datatable, mapping

我有一个临时表，我想像在 sql 中那样从它映射数据，例如 "Select name from tablName where name=@name" 。我想在后面的 asp.net(vb.net) 代码中做同样的事情。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:37:36.513

我问如何在后面的代码中使用 select 语句。所以我得到的答案是：-

```
 string sqlFilter = "Id = '" + userid + "'";
  DataRow[] data = dt.Select(sqlFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:29:38.757

@Ram Singh：假设您的临时表如下所示

```
Create Table #temp( Name varchar(250) ) 
```

您的选择查询将是这样的

```
Select Name from #temp WHERE Name = @name 
```

# php - 如何告诉 Eclipse 停止向后移动我的花括号

> ID：10005300
> 
> 赞同：1
> 
> 时间：2012-04-04T05:16:43.130
> 
> 标签：php, eclipse, eclipse-pdt, curly-braces, curly-brackets

我最近安装了 Eclipse（Helios Release）PDT，并试图将首选项设置为我项目的代码格式样式。

我已经进入...

Eclipse PDT > 窗口 > 首选项 > PHP > 编辑器 > 打字

...并取消选中所有选项。

我也去过：

Eclipse PDT > 窗口 > 首选项 > PHP > 编辑器 > 模板

...并编辑了“功能声明”模板，如下所示：

```
function ${function_name}() 
    {
    ${cursor};
    } 
```

..并编辑“类声明”模板看起来像这样

```
class ${class_name}
    {
    function ${function_name}() 
            {
            ${cursor};
            }
    } 
```

* * *

现在，回到 PHP 编辑器，我正在尝试以如下格式编写一个方法：

```
protected function testMethod()
    {
    return 'Hello'; 
    } 
```

为此。首先我写：

```
protected function testMethod() 
```

然后，我按回车键，光标落在“p”下或受保护。我认为这没关系：

```
protected function testMethod()
| 
```

然后，我点击 TAB 并且光标向前移动到我希望我的左大括号所在的位置（如预期的那样）：

```
protected function testMethod()
    | 
```

- 问题： -

然后，只要我输入花括号，Eclipse 就会将其向后移动，最终位于“p”下方：

```
protected function testMethod()
{ 
```

所以，每次我输入一个左花括号时，我都必须返回并再次将它向前移动到我想要的位置：

```
protected function testMethod()
    { 
```

然后我继续。

Eclipse 的哪个部分导致了这种行为，我怎样才能阻止 Eclipse 向后移动花括号？

任何帮助，将不胜感激。

* * *

**针对建议的更新：**

我已经进入...

Eclipse PDT > 窗口 > 首选项 > PHP > 编辑器

并取消选中：

*   在线起点和终点的智能插入符号定位

    和

*   PHP 名称中的智能插入符号定位

感谢[Victor Nitu](https://stackoverflow.com/a/10005577/205814)的建议，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:48:04.520

我不记得 Helios 中的 UI 和偏好设置，但正如我在 Indigo 中看到的那样，我有以下设置：

`PHP -> Editor: Smart caret positioning at line end (chackbox)`

让我知道它是否有效。

*LE：已确认在 Indigo 中也没有工作。如果我找到什么我会回来的。*

# steganography - 如何计算可以将多少数据嵌入到图像中

> ID：10005304
> 
> 赞同：0
> 
> 时间：2012-04-04T05:16:52.263
> 
> 标签：steganography

我想知道有多少数据可以嵌入到不同大小的图像中。例如，在 30kb 的图像文件中，可以存储多少数据而不会使图像失真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:26:25.553

这取决于两点：

1.  图像中每个像素的位数。
2.  您将在一个像素中嵌入多少位。

好的，假设您的颜色模型是 RGB 和每个`pixel = 8*3 bits`（每种颜色一个字节），并且您希望在一个像素中嵌入 3 位。

`data that can be embedded into an image = (number of pixels * 3) bits`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:07:06.697

这取决于图像类型，算法，如果我以 24 位图图像为例来存储 ASCII 字符

```
To store a one ASCII Character = Number of Pixels / 8 (one ASCII = 8bits ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T12:54:25.643

如果您使用 LSB 来隐藏您的信息，这将提供 30000Bits 的可用空间。3750 字节。

由于 LSB 将 1 或 0 表示为一个字节，该字节的值从 0-256 获取，因此在最坏的情况下，您将修改 1/256 的所有 LSB 失真，即等于 0.4%。

在统计平均情况下，您会得到 0.2% 的失真。

所以取决于您要更改的字节的哪位。

# .net - 如何在 CodeDOM 中构建复合条件以执行规则

> ID：10005305
> 
> 赞同：0
> 
> 时间：2012-04-04T05:16:57.537
> 
> 标签：.net, validation, codedom

我正在尝试使用我的自定义 UI 构建规则并使用 CodeDom 为我的工作流模块执行。我不想使用 WF 提供的规则界面。为了构建/执行规则，我正在创建一个条件和 ThenAction/ElseActions。目前我能够成功执行一个条件。意味着假设有一个**订单**实体，其中包含**OrderID、Amount、NoOfItems、Discount 和 TotalAmount 等属性。**

**能够建立以下条件：**

```
if (this.Amount > 1000)
    thisDiscount = 100; 
```

**建筑左/右条件：**

```
CodePropertyReferenceExpression technologyRef = new CodePropertyReferenceExpression(thisRef, " Amount");

CodePrimitiveExpression wfConstant = new CodePrimitiveExpression(1000);

// if ( this. Amount > 1000)

CodeBinaryOperatorExpression cond = new CodeBinaryOperatorExpression();

cond.Left = technologyRef;

cond.Operator = CodeBinaryOperatorType.GreaterThanOrEqual;

cond.Right = wfConstant;

Rule rule = new Rule("rule1");

rule.Condition = new RuleExpressionCondition(cond); 
```

**无法建立以下条件：**

```
if (this.Amount > 1000 && NoOfItems > 5)
    thisDiscount = 150; 
```

谁能帮我为规则建立多个条件？表示在单个 IF 语句中对多个属性进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:38:46.057

第一个条件的树看起来像这样：

```
 <
     / \
Amount  1000 
```

这正是您在代码中表示它的方式：一个`CodeBinaryOperatorExpression`代表 the `<`，然后一个表达式代表每个孩子。对第二个表达式做同样的事情几乎是一样的，但是树会更大：

```
 -----&&-----
       /            \
      <              >
     / \            / \
Amount 1000 NoOfItems  5 
```

也就是说，您将有一个`CodeBinaryOperatorExpression`代表`&&`( `CodeBinaryOperatorType.BooleanAnd`)，其左孩子将是`<`节点，其右孩子将是`>`节点。

# windows-phone-7 - 如何使用 Windows Phone7 中的 microsoft.live.controls 登录按钮从 windows live 注销？

> ID：10005306
> 
> 赞同：0
> 
> 时间：2012-04-04T05:17:04.413
> 
> 标签：windows-phone-7

我是 Window Phone 开发的新手。现在我使用 Windows.live.controls.dll 登录按钮控件登录到 windows live id。

现在我的问题是如何通过点击 windows phone 中的按钮从帐户中注销。

请把示例代码发给我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:35:53.427

当我单击 SignIn 按钮时，它会更改为 SignOut。只听 SessionChanged 事件

```
<my:SignInButton SessionChanged="OnSessionChanged" 
Content="Button" 
BorderThickness="0"
ClientId="YOUR_ID"
Scopes="wl.skydrive_update"
RedirectUri="https://oauth.live.com/desktop"
Branding="Skydrive"
TextType="Custom"
SignInText="Sign in to skydrive"/>

public void OnSessionChanged(Object sender, LiveConnectSessionChangedEventArgs args)
{
  if (args != null && args.Session != null && args.Status == LiveConnectSessionStatus.Connected)
  {
  ...
  } else {
    SignedOutUser() //any logic you want to implement - hide textbox, change labels, etc.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:58:30.670

当您想退出时，您可以定义一个 WebBrowser signOutBrowser，然后将 signOutBrowser 的源设置如下，

```
string signouturl = "https://login.live.com/oauth20_logout.srf?client_id=client ID&scope=wl.signin%20wl.skydrive%20&redirect_uri=http...";

this.signOutBrowser.Source = new Uri(signouturl, UriKind.Absolute); 
```

# php - IE 在导出 CSV 后终止会话 [CakePHP]

> ID：10005310
> 
> 赞同：1
> 
> 时间：2012-04-04T05:18:00.487
> 
> 标签：php, cakephp, web-applications, csv, internet-explorer-8

我有一个导出 CSV 的 Web 应用程序，我以管理员身份登录，但是在导出过程中发生了什么，IE 打开一个新选项卡并导出 CSV，但是当您单击 Web 应用程序上的任何链接时，接下来会发生什么，您将自动注销！

这只发生在 IE 上。

这是我使用的标题：

```
header("Content-type:application/vnd.ms-excel");
header("Content-disposition:attachment;filename=".$this->filename); 
```

我正在使用 cakephp 1.3.xx

蒂亚：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:36:38.160

我认为问题在于“打开一个新标签”。您可能拥有的是这个新标签打开一个新会话，有效地杀死了旧的。

一种解决方案是打开新选项卡，将 SESSID 作为参数传递到新选项卡的 url 中。所以 PHP 正确检测会话并且不创建新会话。

# c# - 当我们以编程方式更改其文本时，为什么 TextBox 的 Text_Changed 事件不会触发？

> ID：10005313
> 
> 赞同：1
> 
> 时间：2012-04-04T05:18:20.050
> 
> 标签：c#, events, textbox, textchanged

我设计了一个软键盘并以编程方式更改文本框文本，例如

```
myKeypad.getControl.Text += "Char"; 
```

但文本框 textchanged 事件不会触发。我怎么解决这个问题？我们是否可以创建自定义 textChanged 和 KeyPressed 事件，这些事件可以通过以编程方式更改文本或软键盘按键来触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:22:41.927

它应该被触发。

来自 MSDN [Control.TextChanged 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)：

> 如果通过编程修改或用户交互更改了 Text 属性，则会引发此事件。

你在哪里添加事件处理程序？

# iphone - 如何从字符串而不是 URL 解析 json 数据

> ID：10005315
> 
> 赞同：1
> 
> 时间：2012-04-04T05:18:34.777
> 
> 标签：iphone, objective-c

我想解析 NSString 中的 json 数据我该怎么做

```
 NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);
    NSArray *tempArray =[[DataController staticVersion] startParsing:data];
   for (int i = 0; i<[tempArray count]; i++) {
        id *item = [tempArray objectAtIndex:i];

        NSDictionary *dict = (NSDictionary *) item;
        SearchCode *theObject =[[SearchCode alloc] init];
        [theObject setCodeValue:[dict objectForKey:@"CodeValue"]];
        [theObject setCodeDescription:[dict objectForKey:@"CodeAddedDate"]];    
        [theObject setCodeAddedDate:[dict objectForKey:@"CodeAddedDate"]];
        [theObject setCodeID:[dict objectForKey:@"CodeID"]];
        [theObject setUpdateDateTime:[dict objectForKey:@"UpdateDateTime"]];

        [cptArray addObject:theObject];
        [theObject release];
        theObject=nil;

       } 
```

数据控制器类

```
@interface DataController : NSObject {

}
+ (id)staticVersion;
- (NSMutableArray *) startParsing:(NSString *)theURLString;
@end

#import "DataController.h"
#import "JSON.h"

@implementation DataController
DataController *theInstance;

+(id)staticVersion
{
    if(!theInstance){
    theInstance = [[DataController alloc] init];
}
return theInstance;
}

- (NSMutableArray *) startParsing:(NSString *)theURLString {

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",theURLString]];
NSString *fileContent= [NSString stringWithContentsOfURL:url];
SBJSON *parser = [[SBJSON alloc] init];  
NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  
NSArray *items = (NSArray *) data ;  
return items; 
 }

 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:52:11.947

在新的 sdk 中，您不必使用外部类来解析您的 JSon，您可以使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)女巫在 iOS 5.0 及更高版本中可用。

要使用此类解析 json 字符串，您需要将 NSString 转换为 NSData，您可以这样做：

```
NSData *data = [stringData dataUsingEncoding:NSUTF8StringEncoding]; 
```

之后，您可以使用该方法将数据转换为json：

```
id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; 
```

您返回的类型将取决于您的返回类型，因为它就像您的 json，如果您的 json 是一个数组，它将是一个数组，如果是一个字典，它将是一个字典，依此类推。来自苹果文档：

> 可以转换为 JSON 的对象必须具有以下属性：
> 
> 顶级对象是 NSArray 或 NSDictionary。所有对象都是 NSString、NSNumber、NSArray、NSDictionary 或 NSNull 的实例。所有字典键都是 NSString 的实例。数字不是 NaN 或无穷大。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:24:43.673

[这篇文章](http://cocoawithlove.com/2011/05/classes-for-fetching-and-parsing-xml-or.html)包含解析 JSON、XML 等的类。我一直在使用这些。

# flash - 使用 Flash flex 策略和问题

> ID：10005321
> 
> 赞同：0
> 
> 时间：2012-04-04T05:19:18.263
> 
> 标签：flash, apache-flex, components, movieclip

在 Flash 中管理大型游戏项目的最佳实践是什么。

一段时间后，我发现将 Flex 与 Flash Professional 相结合为您提供了用于快速开发、在大型团队中工作和使用 SVN 的最佳工具。

我的项目分为 Flex 库项目和主 Flex 项目。

*   **设计师**在**Photoshop**和**Illustrator**中工作，然后直接导出到 flex 或 Flash Professional。
*   **从事**Flash专业的****动画师**，每个人都有自己的flx文件夹（解压后的fla格式，从CS5支持，他的数据不是二进制的，所以最好用SVN），并且可以创建图形逻辑类，最后他将他的解决方案导出到用 swc 文件弯曲。**
***   **在**Flex工作的****开发人员**正在管理主要项目，他们从每个人那里获取资源并将所有内容放在一起，flex 是处理游戏逻辑以及服务器通信的唯一地方。****

 ****最近，我在处理复杂的 flex 组件时发现了两个问题，其中一部分是在 flash pro 中创建的。我想在我的 Flex 组件中放置一个影片剪辑，在该影片剪辑中我想放置另一个 flex 组件。

这就是我所做的：我从 flash pro 创建了一个影片剪辑，使用命令将其转换为 flex 容器，并将 flex 内容保持器正方形放置在它们的影片剪辑中，将其导出到 swc，然后从 flex 我将它直接添加到 mxml 甚至在 flex 设计模式下获得他的预览。这是我不能做的：

*   我无法使用时间轴动画移动 flex 内容，只能使用代码
*   我无法在位于其他影片剪辑内的影片剪辑中插入弹性内容，即使它们都是弹性容器。

请告诉我您对我的策略有何看法，以及您是否知道解决这些问题的方法

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T23:40:49.867

我根本不会将 .swcs 用于图形资产。正如您所提到的，您将无法访问从 Flash 生成的内容。另外更大的问题是，.fla 文件也包含逻辑，因此修改某些内容也需要 Flash 专业版（设计师往往会在他们的 fla-s 中创建一个巨大的混乱，这很痛苦）。因此，要进行简单的修改，您可能需要在 Flash builder 和 Flash Professional 之间来回切换。另外，将代码放在图形资产文件中是一种非常糟糕的做法。

我建议使用以下工作流程来保持代码和图形完全分离：

1.  设计人员应将每个静态（非动画）矢量资源导出到 .fxg 文件中。（例如，对于一个按钮，您将有 3 个 .fxg 文件：button_up.fxg、button_over.fxg、button_down.fxg） Flex 中的 Fxg 支持非常棒，您可以直接编辑文件，而且它们真的很容易嵌入。例如，您可以在 MXML: 中执行此操作`<gfx:button_up x="100"/>`，或将其嵌入为`SpriteAsset`. 请注意，这些在运行时很难加载，但这很少会成为问题，因为 .fxg 文件往往非常小。对于真正复杂的矢量资产，将其放入 .swf 文件（第 4 点）会更好地提高性能（或将其转换为位图，复杂的矢量可以轻松杀死 FP）。但请注意，.FXG 有一些限制，例如您不能导出静态文本，或嵌套 9 切片缩放。

2.  将每个静态位图资源导出为 .png。您可以在 Flex 中轻松嵌入/加载这些内容。对视频做同样的事情（我没有对视频做很多工作，但 .flv 对我来说还可以）。

3.  对于动画矢量资源（在 Flash 中制作的影片剪辑），请执行以下操作：将影片剪辑放在 Flash 中舞台的根部，选中符号属性中的“导出到 Actionscript”和“在第一帧中导出”。例如，这样的包可以包含一个角色的所有动画。然后简单地发布这个项目，然后你可以加载它，或者像这样嵌入它：`[Embed(source='char1.swf', symbol='run')] private var runcl:Class;`这些文件不会有任何动作脚本代码，但有时我发现，我需要向它们添加一些简单的逻辑（主要是 stop() 和 play()命令）为此，请使用`addFrameScript()`命令。

4.  将 .mp3 用于声音，并将您的字体直接嵌入到 Flex。如果图形资产有一些静态文本，请将其拆分为矢量。****

# function - 为什么我的 Scala 函数返回类型 Unit 而不是最后一行？

> ID：10005326
> 
> 赞同：6
> 
> 时间：2012-04-04T05:19:28.987
> 
> 标签：function, scala

我试图找出问题所在，并尝试了我在 Scala 上阅读过的不同风格，但它们都不起作用。我的代码是：

```
....

val str = "(and x y)";

def stringParse ( exp: String, pos: Int, expreshHolder: ArrayBuffer[String], follow: Int )  

    var b = pos; //position of where in the expression String I am currently in
    val temp = expreshHolder; //holder of expressions without parens
    var arrayCounter = follow; //just counts to make sure an empty spot in the array is there to put in the strings

    if(exp(b) == '(') {
        b = b + 1;

        while(exp(b) == ' '){b = b + 1} //point of this is to just skip any spaces between paren and start of expression type

        if(exp(b) == 'a') {
               temp(arrayCounter) = exp(b).toString; 
               b = b+1; 
               temp(arrayCounter)+exp(b).toString; b = b+1; 
               temp(arrayCounter) + exp(b).toString; arrayCounter+=1}
               temp;

         }

}

val hold: ArrayBuffer[String] = stringParse(str, 0, new ArrayBuffer[String], 0);
for(test <- hold) println(test); 
```

我的错误是：

```
Driver.scala:35: error: type mismatch;
found   : Unit
 required: scala.collection.mutable.ArrayBuffer[String]
ho = stringParse(str, 0, ho, 0);
                ^one error found 
```

当我在方法声明中的参数后添加等号时，如下所示：

```
def stringParse ( exp: String, pos: Int, expreshHolder: ArrayBuffer[String], follow: Int )  ={....} 
```

它将其更改为“任何”。我对这是如何工作的感到困惑。有任何想法吗？非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T05:51:16.533

以下是关于如何解决此类问题的更一般的答案：

有时会发生您编写一个函数并*在脑海中*假设它返回 type `X`，但编译器不同意的某个地方。这几乎总是在刚刚编写函数时发生，因此虽然编译器没有给你实际的源代码（它指向你的函数被调用的行），但你通常知道你的函数的返回类型是问题所在。

如果您没有立即看到类型问题，那么有一个简单的技巧可以显式键入您的函数。例如，如果你认为你的函数应该已经返回`Int`，但编译器不知何故说它找到了 a `Unit`，它有助于添加`: Int`到你的函数中。这样，您可以帮助编译器帮助您，因为它会发现函数中的路径返回非`Int`值的确切位置，这是您首先要寻找的实际问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T05:24:17.643

如果要返回值，则必须添加等号。现在，你的函数的返回值是 Any 的原因是你有 2 个控制路径，每个返回一个不同类型的值 - 1 是当 if 的条件满足时（返回值将是 temp），另一个是当if 的条件不是（并且返回值将是 b=b+1，或 b 增加后）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:34:16.783

```
class Test(condition: Boolean) {

  def mixed = condition match {
    case true  => "Hi"
    case false => 100
  }

  def same = condition match {
    case true  => List(1,2,3)
    case false => List(4,5,6)
  }

  case class Foo(x: Int)
  case class Bar(x: Int)

  def parent = condition match {
    case true  => Foo(1)
    case false => Bar(1)
  }
}
val test = new Test(true)

test.mixed   // type: Any
test.same    // type List[Int]
test.parent  // type is Product, the case class super type 
```

编译器将根据条件返回的可能结果类型集（匹配、if/else、折叠等），尽其所能应用最具体的类型。

# gwt - 类字段的 GWT gen 名称

> ID：10005332
> 
> 赞同：0
> 
> 时间：2012-04-04T05:20:39.113
> 
> 标签：gwt, java, lang

我知道在 GWT 中没有模拟 Java 反射工具，但是有没有办法获取类字段的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:10:46.960

不。同样由于过于混淆，字段名称与源代码中的名称不同，或者甚至由于过于优化，字段可能被优化掉并且不会出现在生成的 JavaScript 中。

# c# - XNA 3.0 到 4.0 的转换导致视口“合并”出错

> ID：10005333
> 
> 赞同：0
> 
> 时间：2012-04-04T05:20:43.990
> 
> 标签：c#, xna, xna-4.0, xna-3.0

我有一个带有 2D 相机的旧 XNA 3.1 游戏，我最近将其转换为 XNA 4.0。
我通过创建一个新的视口，将边界设置为相机的宽度/高度，然后有点像这样“合并”它们来让相机变焦：

```
Viewport viewport = new Viewport();
viewport.X = 0;
viewport.Y = 0;
viewport.Width = camera.DisplayWidth;
viewport.Height = camera.DisplayHeight;

Viewport priorViewport = this.GraphicsDevice.Viewport;
this.GraphicsDevice.Viewport = viewport;
GraphicsDevice.Clear(Color.Black);
DrawGameLayer(gameTime, "PreContent");
this.GraphicsDevice.Viewport = priorViewport; 
```

但是，当新视口的分辨率变得大于图形设备的视口分辨率（缩小时）时，它会在第 7 行爆炸，其中：

> 视口无效。视口不能大于或超出当前渲染目标边界。MinDepth 和 MaxDepth 必须介于 0 和 1 之间。 参数名称：value

这以前很有效，但显然现在不是正确的做事方式。有没有快速解决这个问题的好方法？还是我不得不完全改变放大和缩小的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T01:41:58.003

xna中有很多二维相机的例子……我是第一次看到那种代码……

视口不打算进行缩放......它定义了要绘制的屏幕的一部分。

spritebatch.Begin(...,...,...,..., transform) 是你需要做的相机变换

您的变换矩阵可以与此类似....

```
Matrix CameraTransform = Matrix.CreateTranslation(-CameraPosition) 
                       * Matrix.CreateRotationZ(rotation) 
                       * Matrix.CreateScale(Zoom) 
                       * Matrix.CreateTranslation(Viewport.Center); 
```

# javascript - 查询字符串中参数的位置如何影响页面？

> ID：10005335
> 
> 赞同：11
> 
> 时间：2012-04-04T05:21:40.543
> 
> 标签：javascript

我有一个应用程序，其中大部分代码都是用 javascript 编写的。我遇到了一个奇怪的问题。我有一个查询字符串，我的应用程序读取它以执行各种操作。昨天我更改了查询字符串参数的顺序，应用程序停止工作。如果我把原来的订单放回去，它就会开始工作。可能是什么原因？我认为参数排序的效果应该无关紧要。但是，显然出于某种原因它确实很重要。我仍在尝试找出可能是什么问题，但想知道这里是否有人遇到过类似的问题？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T05:53:35.673

正确编写的应用程序将以任何顺序查找给定的查询参数，并且不会对顺序敏感。但是，可能有编写不佳的解析代码只能在开头、结尾或仅在某个其他参数之后找到给定参数。没有看到解析查询参数的代码，我们不能真正说出它有什么问题，但是可能有写得不好的位置敏感的代码。

如果您发布解析查询参数的代码以及有效的查询字符串和无效的查询字符串，我们可以提供更具体的建议。您还应该检查以确保您的查询参数中没有任何应该被编码的字符，这些字符可能会造成问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:23:42.287

这应该不是问题。其他原因导致错误。`location`或者您对包含 URL的变量有一些依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:03:34.197

当开发人员按原样使用查询字符串作为缓存对象的键时，我已经看到了这种问题。当查询字符串更改时，键不一样，缓存机制失败（由于另一个错误）。

# php - javascript 无法使用 ID 标签定位表单

> ID：10005338
> 
> 赞同：1
> 
> 时间：2012-04-04T05:22:05.957
> 
> 标签：php, javascript, html, captcha, contact-form

这是我的问题：我正在尝试设置一个内置验证码的简单移动联系表单。我正在处理的页面可以在这里找到：http: [//m.lancasterpainting.com/contact.php](http://m.lancasterpainting.com/contact.php)

我正在使用以下 php 联系表：[http ://www.html-form-guide.com/contact-form/php-email-contact-form.html](http://www.html-form-guide.com/contact-form/php-email-contact-form.html)

我想首先说，我不是唯一遇到这个问题的人。在谷歌搜索这个问题后，我发现很多人都在为此苦苦挣扎，但似乎没有人有答案。

现在的问题...

如您所见，如果您访问该页面，则每次访问该页面时，都会出现一个错误，显示“错误：无法获取表单对象contact_form”。

我不能——为了我的一生——弄清楚为什么 javascript 找不到我通过它的表单。

我在页面顶部调用生成此错误的函数：

```
var frmvalidator  = new Validator("contact_form"); 
```

我引用的表单在 HTML 代码中如下所示：

```
<div data-role="page" data-theme="e" id="contact_form" name="contact_form" data-position="inline">
... 
```

生成错误的调用函数可以在此处的外部 .js 文件中找到：http: [//m.lancasterpainting.com/scripts/gen_validatorv31.js](http://m.lancasterpainting.com/scripts/gen_validatorv31.js)

有什么我根本看不到的吗？为什么javascript找不到表单？

非常感谢任何对此提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:27:48.323

1.  没有名为 named 的表单`contact_form`，但有一个带有 id=的表单`sendEmail`。您可能想知道，但 div 不是一种形式：`<div id="contact_form"`
2.  Javascript 代码运行得太早，文档还没有准备好，并且`document.forms`在调用表单验证器代码时集合甚至不可用。

# java - Java - BufferedWriter 不写入（在 flush() 之后）

> ID：10005339
> 
> 赞同：2
> 
> 时间：2012-04-04T05:22:15.737
> 
> 标签：java, file, io, epoch, bufferedwriter

**解答：** *您不能将 int 直接写入文件。首先将其转换为字符串。*

* * *

**原始问题：**

我知道这可能听起来像一个菜鸟问题，但我无处可去。

我正在尝试让 Java 将 Epoch（时间戳）写入 .session 文件（不要问）。它似乎没有做任何事情。这是我所拥有的：

```
 gamesession = new File(SESSION_LOCATION);   // Sets the .session file

    if(gamesession.exists()){
        gamesession.delete();
        gamesession.createNewFile();

        FileWriter stream = new FileWriter(SESSION_LOCATION);
        BufferedWriter out = new BufferedWriter(stream);

        out.write(GetTimestamp());
        out.flush();
    }                       // These blocks write the Epoch to the .session file for later time
    else{
        gamesession.createNewFile();

        FileWriter stream = new FileWriter(SESSION_LOCATION);
        BufferedWriter out = new BufferedWriter(stream);

        out.write(GetTimestamp());
        out.flush();
    } 
```

是的，该方法被声明为抛出 IOException（**@runtime没有发生）。**问题是，我正在写入的 .session 文件总是显示为空。我是不是刷错了？请帮助我对此有所了解。谢谢你的时间。

**仅供参考：** Epoch 的计算是正确的，就像我一样`System.out.println(GetTimestamp())`。

**GetTimestamp() 是我的方法。它是静态的。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:30:10.660

您还需要确保调用该`out.close()`方法。我注意到有时在处理文件时，如果你不关闭它们，内容就不会显示出来。

还`GetTimestamp()`返回什么类型？根据[BufferedWriter API](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)，write 方法采用一个应该是字符的 int。我怀疑您的时间戳是单个字符。

# python - 类的计数器变量

> ID：10005343
> 
> 赞同：24
> 
> 时间：2012-04-04T05:22:46.687
> 
> 标签：python, class-variables

我在运行这段代码时遇到问题。该类是具有 IdCounter 的 Student，这似乎是问题所在。（第 8 行）

```
class Student:
    idCounter = 0
    def __init__(self):
        self.gpa = 0
        self.record = {}
        # Each time I create a new student, the idCounter increment
        idCounter += 1
        self.name = 'Student {0}'.format(Student.idCounter)

classRoster = [] # List of students
for number in range(25):
    newStudent = Student()
    classRoster.append(newStudent)
    print(newStudent.name) 
```

我试图在我的`Student`班级中使用这个 idCounter，所以我可以将它作为学生姓名的一部分（例如，这实际上是一个 ID# `Student 12345`。但我一直出错。

```
Traceback (most recent call last):
  File "/Users/yanwchan/Documents/test.py", line 13, in <module>
    newStudent = Student()
  File "/Users/yanwchan/Documents/test.py", line 8, in __init__
    idCounter += 1
UnboundLocalError: local variable 'idCounter' referenced before assignment 
```

我试图将 idCounter += 1 放在之前，之后，所有组合中，但我仍然收到`referenced before assignment`错误，你能向我解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-04T05:31:52.487

类变量必须通过**类名**访问，在本例中`Studend.idCounter`：

```
class Student:
    # A student ID counter
    idCounter = 0
    def __init__(self):
        self.gpa = 0
        self.record = {}
        # Each time I create a new student, the idCounter increment
        Student.idCounter += 1
        self.name = 'Student {0}'.format(Student.idCounter)

classRoster = [] # List of students
for number in range(25):
    newStudent = Student()
    classRoster.append(newStudent)
    print(newStudent.name) 
```

感谢 Ignacio 的指出，Vazquez-Abrams 明白了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-12T22:59:54.587

前段时间得到这个答案帮助我找到了整理类与实例变量及其作用域所需的内容。所以，一个扩展，它做同样的事情，只使用一个生成器。生成器像 idCounter 一样为学生分配一个唯一编号——只有它使用这些值。我知道生成器类上没有**prev方法。**idGenerator 和 idCounter 都没有被记忆，所以如果你想外部化列表然后回来添加一个或多个学生，你必须相应地更新 range(start,,)，或者迭代每个值而不分配它，直到你依次到达唯一的一个，使用 idCounter 的路径稍微短一些，您可以使用单个虚拟实例构造简单地设置它并继续。

```
class Student:
    """ Implement a shared generator among all sub-classes
    in addition to idCounter. """

    # A student ID counter
    idCounter = 0
    # A student ID from generator
    idGenerator = (x for x in range(0xAAAAAA, 0xEEEEEE, 0xBA))

    def __init__(self):
        self.gpa = 0
        self.record = {}
        # Each time I create a new student, the idCounter increment
        Student.idCounter += 1
        self.id = Student.idGenerator.__next__()
        self.name = f"{self.id} Student {Student.idCounter}"

classRoster = [] # List of students
for number in range(25):
    newStudent = Student()
    classRoster.append(newStudent)
    print(newStudent.name) 
```

# asp.net - 如何在 PDF 中显示页数？

> ID：10005350
> 
> 赞同：0
> 
> 时间：2012-04-04T05:23:51.340
> 
> 标签：asp.net, pdf, itextsharp

我正在使用 ItextSharp 在我的应用程序中创建 Pdf。当用户单击提交时，pdf 会即时生成并显示给用户。我面临的问题是我无法显示该 pdf 中存在的总页数。我使用图像作为页眉，在页脚中再次使用图像，我不想根据要求在页脚中显示页码。所以我想要类似的东西

“总页数：2（该 pdf 中存在的页面）”在我的 pdf 的第一页上。有可能这样做吗？请提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:40:28.650

```
//Create instance for the PDF reader
                PdfReader pdf_fie = new PdfReader(filepath);
                //read it's pagecount
                page_count = pdf_fie.NumberOfPages;
                //close the file
                pdf_fie.Close(); 
```

# c# - 在 C# 中引用另一个字符串

> ID：10005351
> 
> 赞同：4
> 
> 时间：2012-04-04T05:23:53.473
> 
> 标签：c#, string, value-type, reference-type

据我所知，C# 中的字符串是引用类型。

所以在下面的代码中'a'应该等于“Hi”，但它仍然保持它的值“Hello”。为什么？

```
string a = "Hello";
string b = a;
b = "Hi"; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-04T05:49:27.523

许多答案指出字符串是不可变的。虽然这是真的，但这与你的问题完全无关。

更相关的是，您误解了引用如何与变量相关。引用不是对*变量*的引用。将引用视为一段字符串。你从这个开始：

```
a----------------------Hello 
```

然后你说“b = a”，这意味着将另一段字符串*附加到附加**到的同一事物`a`*上：

```
a----------------------Hello
                      /
b--------------------- 
```

然后你说“现在将 b 附加到 Hi”

```
a----------------------Hello

b----------------------Hi 
```

您认为引用的工作方式如下：

```
a----------------------Hello 
```

然后我说这`b`是另一个名称`a`：

```
a/b ----------------------Hello 
```

然后我改变`b`了，它改变`a`了，因为它们是同一事物的两个名称：

```
a/b ----------------------Hi 
```

或者你可能认为引用是这样工作的：

```
a----------------------Hello 
```

然后我说是`b`指`a`：

```
b -------------- a ----------------------Hello 
```

然后我改变`b`，间接改变`a`：

```
b -------------- a ----------------------Hi 
```

也就是说，您期望引用一个*变量*，而不是一个*值*。您*可以*在 C# 中执行此操作，如下所示：

```
void M(ref int x)
{
    x = 1;
}
...
int y = 0;
M(ref y); 
```

这意味着“在调用 M 期间，x 是 y 的另一个名称”。对 x 的更改会更改 y，因为它们是相同的变量。请注意，变量的*类型*不必是引用类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T05:27:19.163

该行`b = "Hi";`更改了哪些字符串`b`引用。 `a`仍然参考`"Hello"`。

```
string a = "Hello";  // Set a to reference the string "Hello"
string b = a;        // Set b to reference the same string as a
b = "Hi";            // Set b to reference the string "Hi" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T05:28:41.643

您正在更改参考 b。不是一个。引用本身被复制，而对象保持不变。所以 b = "Hi" 将对 "Hi" 对象的引用复制到 b 中。这不影响a。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:09:03.037

引用类型的概念是 OOP 程序员中最令人困惑的事情。

运行下面的代码，你会惊讶地看到答案：

创建一个`Book`具有调用属性的简单类，并在应用程序的方法中`Name`编写以下代码。`Main`

```
Book a = new Book() {Name = "book a"};
Book b = new Book() {Name = "book b"};

Book c = a; //line 3

Book a = b; //Line 4

Console.WriteLine(c.Name); 
```

毫无疑问，由于第 4 行，您会期望答案是“book b”。您认为 as **c**是**a**，然后**a**变成**b** ，这也将使**c**等于**b**。

**事实并非如此**！

在 Ballon 类比中阅读 Ballon anology 以[获取 Reference type](http://www.yoda.arachsys.com/java/passing.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T05:31:10.147

不！

您所做的是创建两个对字符串“Hello”的引用（'a'，'b'）。随着`b = "Hi"`您更改“b”以引用字符串“Hi”。

'a' 永远不会改变这种方式。

# android - AsyncTask 中的 OnPostExcecute 方法可以返回值吗？

> ID：10005353
> 
> 赞同：7
> 
> 时间：2012-04-04T05:24:01.593
> 
> 标签：android, android-asynctask

我正在开发一个需要使用**AsyncTask**进行网络连接的 Android 应用程序。我从主线程调用它。所以**doInBackground**方法运行，然后返回到**onPostExecute**方法。执行 onPostExecute 方法后，我想将一个值返回给调用它的活动，因为我必须在该特定活动中进行一些操作，这需要从 onPostExecute 方法返回的值。我该如何解决这个问题？如何从 onPostExecute 返回值？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T06:04:45.310

AsyncTask，顾名思义，与 UI 线程异步运行，onPostExecute 方法将在未来某个时间点，当 doInBackground 完成时被调用。我们不关心什么时候会调用 onPostExecute 方法（实际上在项目构建时无法判断），我们唯一关心的是 onPostExecute 方法保证在将来某个时候被底层框架正确调用。所以 onPostExecute 方法的目的是处理工作线程返回的结果，这也是为什么 onPostExecute 方法的唯一参数是 doInBackground 方法返回的结果。

> 我必须在需要从 onPostExecute 方法返回的值的特定活动中进行一些操作。我该如何解决这个问题？

当然，您可以在 Activity 类中创建一些实例变量（或使用侦听器模式），在 onPostExecute 方法中存储返回并准备好的结果。问题是你永远不知道这个结果何时在项目构建时在 onPostExecute 方法之外准备好，因为它实际上是在应用程序运行时确定的。除非你写一些等待机制不断地轮询结果，从而牺牲了 AsyncTask 的好处，例如，内置的 API [AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)使得 AsyncTask 与 UI 线程同步运行并将结果返回给 Activity。

最佳实践是更改您的设计并将需要从 AsyncTask 返回的结果的操作代码移动到 onPostExecute 方法中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T05:35:18.927

您可以使用 getter 和 setter 从`AsyncTask`

```
public class MainActivity extends Activity {
    public String retunnumfromAsyncTask;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layouttest);
        new Asyntask(this).execute();
    }

    public class Asyntask extends AsyncTask<Void, Void, String> {
        private final Context Asyntaskcontext;

        public Asyntask(Context context){
            Asyntaskcontext = context;
        }

        @Override
        protected void onPostExecute(String result) {
            MainActivity mainactivity = (MainActivity) Asyntaskcontext;
            mainactivity.retunnumfromAsyncTask = result;       
            super.onPostExecute(result);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:28:15.237

只需将 AsyncTask 类作为内部类写入您的活动，然后将您想要返回的任何值声明为全局。是不是对您有帮助？

# visual-studio-2008 - 当我运行应用程序时，请安装适当的 CrRedisrtibutable(CRRedist*.msi).........错误

> ID：10005355
> 
> 赞同：0
> 
> 时间：2012-04-04T05:24:05.620
> 
> 标签：visual-studio-2008, crystal-reports-2008

我在 VS2008(C#) 中开发了一个项目，其中包含两个水晶报表，该项目运行良好，水晶报表在我的系统上正常运行。但是当我的朋友尝试在他的系统上运行该项目时，项目运行良好，但是当我打开水晶报告时，我收到类似“请安装包含正确版本的水晶的适当的 CrRedisrtibutable(CRRedist*.msi)”的错误报告运行时间........”

我们没有运行打包设置，我们在框架中运行的整个项目都出现了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:19:25.933

那就是问题所在。当您在计算机上安装 Crystal Reports 时，它会安装一些在 GAC 中创建报告所需的文件。

因此，当您尝试从其他机器运行应用程序时，请确保安装正确的运行时。您可以通过检查运行时文件的属性来验证 dll 的版本，该属性将列出 dll 的版本号并与开发机器中相应 dll 的版本进行交叉检查

# php - 如何在扩展类公共变量中使用变量

> ID：10005358
> 
> 赞同：2
> 
> 时间：2012-04-04T05:24:28.737
> 
> 标签：php, oop, class, extends

有一个我正在使用的类，我正在覆盖类中的变量以将它们更改为我需要的值，但我也不确定是否或如何处理问题。我需要在类调用它们之前向每个 URL 添加一个生成的密钥。我无法修改类文件本身。

```
use Theme/Ride

class ETicket extends Ride {

  public $key='US20120303'; // Not in original class
  public $accessURL1 = 'http://domain.com/keycheck.php?key='.$key;
  public $accessURL2 = 'http://domain.com/keycheck.php?key='.$key;

} 
```

我了解您不能在公共类变量的设置中使用变量。只是不确定以正确的格式实际执行此类操作的方法是什么。

我的 OOP 技能很弱。我承认。因此，如果有人对我可以在哪里阅读并获得线索提出建议，我也将不胜感激。我想我需要 OOP for Dummies。=/

- - 更新 - -

初始 RIDE 类设置了 2 个 URL。

```
public $accessURL1 = "http://domain.com/index.php";
public $accessURL2 = "http://domain.com/index2.php"; 
```

我要覆盖它们，以便 RIDE 类将使用我的新域。

我可以添加以下内容，它可以工作......

```
class ETicket extends RIDE {
    public $accessURL1 = 'http://mydomain.com/myindex.php';
    public $accessURL2 = 'http://mydomain.com/myindex2.php';
} 
```

但是，当我覆盖它们时，我还想将来自其他地方的变量（$key）作为参数传递给 URL，因此当我调用 RIDE 时，它最后有一个值为 KEY 的 URL。(?key=keyvalue)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:38:34.603

您的关闭，如果您不想允许调用代码更改 $key，您可以执行以下操作：

```
class ETicket extends Ride {

    public function getKey()
    {
        return 'US20120303';
    }       

    public function generateUrl()
    {
        return 'http://domain.com/keycheck.php?key=' . $this->getKey();
    }
}

// Calling code example
$eTicket= new ETicket();

// $key is a member of ETicket class, so just call on generateUrl which will 
// build and return the url
var_dump($eTicket->generateUrl()); 
```

如果需要，您还可以通过添加公共 setter/getter 来允许调用代码更改密钥：

```
class ETicket extends Ride {

    protected $key;

    public function setKey($key)
    {
        $this->key = $key;
    }

    public function getKey()
    {
        return $this->key;
    }

    public function generateUrl()
    {
        return 'http://domain.com/keycheck.php?key=' . $this->getKey();
    }
}

// Calling code example
$eTicket= new ETicket();

$eTicket->setKey('US20120303');
var_dump($eTicket->generateUrl()); 
```

--**更新**--

有几个选项，您可以将密钥作为调用代码的一部分附加到您的 url，如下所示：

```
$eTicket= new ETicket();

$url = $ride->accessURL1 . '?key=US20120303'; 
```

或者，使用我之前描述的方法（稍微更改为直接接受密钥）：

```
class ETicket extends Ride
{
    public function generateUrl($key)
    {
        return $this->accessURL1 . '?key=' . $key;
    } 
}

$eTicket= new ETicket();

$url = $eTicket->generateUrl('US20120303'); 
```

我想重点是，如果没有将变量连接到成员变量初始化，您将无法执行您最初要求的操作。

# python - gevent urllib 很慢

> ID：10005361
> 
> 赞同：6
> 
> 时间：2012-04-04T05:24:56.540
> 
> 标签：python, gevent

我已经创建了一组 TCP 服务器的演示，但是我的 gevent 示例明显变慢了。我真的没有测试性能，但目前有些东西使 gevent 版本慢了 5 倍。

我确定一定是我编译 gevent 但无法解决问题的方式。我正在使用 fink 编译的 python 2.6 和 2.7 使用 OSX leopard。我已经尝试过稳定的 gevent 和 gevent 1.0b1 并且它的作用相同。回显需要 5 秒才能响应，而其他示例需要 <1 秒。如果我删除 urllib 调用，那么问题就会消失。

我把所有的代码放在[https://github.com/djay/geventechodemo](https://github.com/djay/geventechodemo)

要运行示例，我使用 zc.buildout 来构建

```
$ python2.7 bootstrap.py
$ bin/buildout 
```

要运行 gevent 示例：

```
$ bin/py geventecho3.py &
[1] 80790
waiting for connection...
$ telnet localhost 8080
Trying 127.0.0.1...
...connected from: ('127.0.0.1', 56588)
Connected to localhost.
Escape character is '^]'.
hello
echo: avast 
```

这需要 3-4 秒才能在我的系统上响应。

但是线程示例

```
$ bin/py threadecho2.py 
```

或扭曲的例子

```
$ bin/py twistedecho2.py 
```

小于1s。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:35:59.270

答案是更改本次对话中所使用的默认 DNS 解析器。

[https://groups.google.com/forum/#!topic/gevent/5uNfkdgzWVc](https://groups.google.com/forum/#!topic/gevent/5uNfkdgzWVc)

设置 GEVENT_RESOLVER=thread 使其按预期速度工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:02:29.797

刚刚在 Windows XP 上尝试过。没有立即响应，但比 3 秒快得多。将模拟客户以测量确切的时间。

PS 在 Windows 上构建 libevent 并非完美无缺！必须使用包含并修复实际代码中的一个错误。将来我会坚持使用 Linux for libevent/Gevent ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:10:04.187

urllib 不支持 http 1.1 连接重用。每次您获得该页面时，它都会创建一个新的 TCP 连接并发生新的 TCP 握手。无论有没有 gevent，urllib 都会很慢。

# clearcase - 如何在 UCM 中将基线从一个项目传递到另一个项目？

> ID：10005364
> 
> 赞同：2
> 
> 时间：2012-04-04T05:25:09.803
> 
> 标签：clearcase, clearcase-ucm

我在clearcase UCM中有2个项目如下

```
Project-200
Project-200.1 
```

在 Project-200.1 中，我们完成了一项工作并应用了基线

> “项目-200.1-1.1.0.0”

现在我们想从 Project-200.1 交付到 Project-200。

如何交付基线内容？我们不想交付任何在基线之后添加的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:36:35.680

您只需在项目间交付您的基线。
只要两个项目具有相同的组件，并且如果**目标项目的交付策略**授权相互交付，您就可以在一个流`Project-200.1`和一个流之间启动它`Project-200`。

![交付政策](../Images/510f2ce681b97f2a6dd854b81a9f41f2.png)

要指定与默认流不同的目标流（即与其直接父流不同），您需要[启动“交付到备用目标”](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/t_start_deliver_nondef_target.htm)。

# python - 在使用 Python 的设置差异时保留顺序

> ID：10005367
> 
> 赞同：17
> 
> 时间：2012-04-04T05:25:20.683
> 
> 标签：python, set

我在 Python 中做一个集差操作：

```
x = [1, 5, 3, 4]
y = [3]

result = list(set(x) - set(y))
print(result) 
```

我越来越：

```
[1, 4, 5] 
```

如您所见，列表元素的顺序发生了变化。如何保留`x`原始格式的列表？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-04T07:27:33.123

看起来您需要一个有序集合而不是常规集合。

```
>>> x = [1, 5, 3, 4]
>>> y = [3]
>>> print(list(OrderedSet(x) - OrderedSet(y)))
[1, 5, 4] 
```

Python 不附带有序集，但很容易制作：

```
import collections

class OrderedSet(collections.Set):
    def __init__(self, iterable=()):
        self.d = collections.OrderedDict.fromkeys(iterable)

    def __len__(self):
        return len(self.d)

    def __contains__(self, element):
        return element in self.d

    def __iter__(self):
        return iter(self.d) 
```

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-04T05:36:06.290

集合是无序的，因此您需要在完成集合差异后将结果以正确的顺序放回。幸运的是，您已经按照想要的顺序拥有了元素，所以这很容易。

```
diff = set(x) - set(y)
result = [o for o in x if o in diff] 
```

但这可以简化；您可以将差异作为列表理解的一部分（尽管可以说这就是您正在做的事情不太清楚）。

```
sety = set(y)
result = [o for o in x if o not in sety] 
```

您甚至可以在不创建`set`from的情况下执行此操作`y`，但是`set`它将提供快速的成员资格测试，如果任一列表很大，这将为您节省大量时间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-04T05:35:31.413

你可以这样做

```
diff = set(x) - set(y)
[item for item in x if item in diff] 
```

或者

```
filter(diff.__contains__, x) 
```

# objective-c - 更改方法中的某些值

> ID：10005370
> 
> 赞同：0
> 
> 时间：2012-04-04T05:25:42.050
> 
> 标签：objective-c

我有以下代码，里面有一个 bool if 语句，在另一种方法中，我更改了 bool 的值，我知道我需要调用该方法`[self someMethod];`，但我只想反映 if 语句中的更改，而不是再次调用其他所有内容，我该怎么做呢？谢谢

```
-(void)someMethod 
{  
  //start my code here

   if (boolvalueisTrue)    
      {
      //change this part only    
      }
}

-(void)changeBool {    
    boolvalueisTrue = TRUE;    
    [self someMethod];    
    //instead of calling the whole method i just want to reflect
    //the changes inside my if statement        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:28:53.570

将 if 语句中的代码分解为两个其他方法都调用的单独方法。

# java - 仅对特定请求执行代码 Java

> ID：10005371
> 
> 赞同：0
> 
> 时间：2012-04-04T05:25:47.017
> 
> 标签：java, api, request

我正在为课堂构建一个小 API，老师为我们提供了一个教程链接，该教程提供了一个实现 Runnable 的简单网络服务器。

我已经编写了一些代码来解析参数（或者至少让我得到请求字符串）和一些将返回一些简单 xml 的代码。

但是我认为发送了某些请求，例如针对 favicon 的请求，我认为它弄乱了我的代码。我将它包装在 if else 中，但它似乎不起作用。

=====已编辑因为基本字符串比较错误=====

```
package server;

import java.io.IOException;

import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.util.*;
import java.io.*; 
import java.net.*;
import parkinglots.*;

/**
import our API 
*/
public class WorkerRunnable implements Runnable{

protected Socket clientSocket = null;
protected String serverText   = null;

public WorkerRunnable(Socket clientSocket, String serverText) {
    this.clientSocket = clientSocket;
    this.serverText   = serverText;
}

public Boolean authenticateAPI(String key){
    //Authenticate Key against Stored Keys

    //TODO: Create Stored Keys and Compare
    return true;
}

public void run() {
    try {
        InputStream input = clientSocket.getInputStream();
        OutputStream output = clientSocket.getOutputStream();
        long time = System.currentTimeMillis();

        //TODO: Parse args and output different formats and Authentication
        //Parse URL Arguments
        BufferedReader in = new BufferedReader( 
                new InputStreamReader(clientSocket.getInputStream(), "8859_1"));

        String request = in.readLine();

        //Server gets Favicon Request so skip that and goto args
        System.out.println(request);
        if ( !"GET /favicon.ico HTTP/1.1".equals(request) && !"GET / HTTP/1.1".equals(request) && !"".equals(request) ){

            String format = "", apikey ="";

            System.out.println("I am Here");

            String request_location = request.split(" ")[1];
            String request_args = request_location.replace("/","");
            request_args = request_args.replace("?","");
            String[] queries = request_args.split("&");

            System.out.println(queries[0]);

            for ( int i = 0; i < queries.length; i++ ){
                if( queries[i].equals("format") ){
                    format = queries[i].split("=")[1];
                }
                else if( queries[i].equals("apikey") ){
                    apikey = queries[i].split("=")[1];
                }
            }

            if( apikey.equals("") ){
                apikey = "None";
            }

            if( format.equals("") ){
                format = "xml";
            }

            System.out.println("format: "+format);

            Boolean auth = authenticateAPI(apikey);

            if ( auth ){
                if ( format.equals("xml")){
                    // Retrieve XML Document
                    String xml = LotFromDB.getParkingLotXML();
                    output.write((xml).getBytes());
                }else{
                    //Retrieve JSON
                    String json = LotFromDB.getParkingLotJSON();
                    output.write((json).getBytes());
                }
            }else{
                output.write(("Access Denied - User is Not Authenticated").getBytes());
            }
        }else{
            output.write(("Access Denied Must Pass API Key").getBytes());
        }

        output.close();
        input.close();
        System.out.println("Request processed: " + time);
    } catch (IOException e) {
        //report exceptions
        e.printStackTrace();
    }
}
} 
```

我得到的控制台输出

```
GET /?format=json HTTP/1.1
I am Here
format=json
json
format: xml 
```

它也总是返回 XML。

这是我第一次接触到用 Java 编写 Web 服务器和处理网络，这让我很沮丧，所以这里的任何建议都非常感谢。

在得到其他人的一点帮助后，原来是这里的这一部分。我在比较字符串的错误部分，所以它永远不会匹配

```
 if( queries[i].split("=")[0].equals("format") ){
                    format = queries[i].split("=")[1];
                }
                else if( queries[i].split("=")[0].equals("apikey") ){
                    apikey = queries[i].split("=")[1];
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T05:35:46.077

对于您需要使用的所有字符串比较，`equals`而不是 `==`

示例：`if( format.equals("xml"))`在条件块中还检查是否`request`为空

```
if (request != null && !"GET /favicon.ico HTTP/1.1".equals(request) 
  && !"GET / HTTP/1.1".equals(request) &&  !"".equals(request) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T05:40:32.643

但是您使用的是Java？在java中你不能以这种方式比较String

```
request != "GET /favicon.ico HTTP/1.1" 
```

你需要写

```
!"GET /favicon.ico HTTP/1.1".equals(request) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T05:43:13.083

您应该循环等待，直到服务器发送消息。从套接字读取时试试这个：

```
 String request;
     while((request=in.readLine())==null);
     System.out.println(request); 
```

# javascript - ISO 8601 测试用例的 ECMAScript 5 Date.parse 结果

> ID：10005374
> 
> 赞同：3
> 
> 时间：2012-04-04T05:26:04.730
> 
> 标签：javascript, datetime, iso, ecmascript-5, iso8601

以下测试用例的正确结果是什么？

```
 //Chrome 19     Opera 12       Firefox 11    IE 9          Safari 5.1.1
console.log(Date.parse("2012-11-31T23:59:59.000Z"));//1354406399000 NaN            NaN           1354406399000 NaN
console.log(Date.parse("2012-12-31T23:59:59.000Z"));//1356998399000 1356998399000  1356998399000 1356998399000 1356998399000
console.log(Date.parse("2012-12-31T23:59:60.000Z"));//NaN           NaN            NaN           NaN           1356998400000
console.log(Date.parse("2012-04-04T05:02:02.170Z"));//1333515722170 1333515722170  1333515722170 1333515722170 1333515722170
console.log(Date.parse("2012-04-04T24:00:00.000Z"));//NaN           1333584000000  1333584000000 1333584000000 1333584000000
console.log(Date.parse("2012-04-04T24:00:00.500Z"));//NaN           NaN            1333584000500 1333584000500 NaN
console.log(Date.parse("2012-12-31T10:08:60.000Z"));//NaN           NaN            NaN           NaN           1356948540000
console.log(Date.parse("2012-13-01T12:00:00.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-12-32T12:00:00.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-12-31T25:00:00.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-12-31T24:01:00.000Z"));//NaN           NaN            NaN           1356998460000 NaN
console.log(Date.parse("2012-12-31T12:60:00.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-12-31T12:00:60.000Z"));//NaN           NaN            NaN           NaN           1356955260000
console.log(Date.parse("2012-00-31T23:59:59.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-12-00T23:59:59.000Z"));//NaN           NaN            NaN           NaN           NaN
console.log(Date.parse("2012-02-29T12:00:00.000Z"));//1330516800000 1330516800000  1330516800000 1330516800000 1330516800000
console.log(Date.parse("2011-02-29T12:00:00.000Z"));//1298980800000 NaN            NaN           1298980800000 NaN
console.log(Date.parse("2011-03-01T12:00:00.000Z"));//1298980800000 1298980800000  1298980800000 1298980800000 1298980800000

// extended years:
console.log(Date.parse("0000-01-01T00:00:00.000Z"));//-621672192e5  -621672192e5   -621672192e5  -621672192e5  -621672192e5
console.log(Date.parse("+275760-09-13T00:00:00.000Z"));//8.64e15    NaN            8.64e15       8.64e15       8.64e15
console.log(Date.parse("-271821-04-20T00:00:00.000Z"));//-8.64e15   NaN            -8.64e15      -8.64e15      -8.6400000864e15
console.log(Date.parse("+275760-09-13T00:00:00.001Z"));//NaN        NaN            NaN           8.64e15 + 1   8.64e15 + 1
console.log(Date.parse("-271821-04-19T23:59:59.999Z"));//NaN        NaN            NaN           -8.64e15 - 1  -8.6400000864e15 - 1

// https://github.com/kriskowal/es5-shim/issues/80 Safari bug with leap day
console.log(Date.parse("2034-03-01T00:00:00.000Z") -
            Date.parse("2034-02-27T23:59:59.999Z"));//86400001      86400001       86400001       86400001      1

// Time Zone Offset
console.log(Date.parse("2012-01-29T12:00:00.000+01:00"));//132783480e4 132783480e4  132783480e4  132783480e4    132783480e4
console.log(Date.parse("2012-01-29T12:00:00.000-00:00"));//132783840e4 132783840e4  132783840e4  132783840e4    132783840e4
console.log(Date.parse("2012-01-29T12:00:00.000+00:00"));//132783840e4 132783840e4  132783840e4  132783840e4    132783840e4
console.log(Date.parse("2012-01-29T12:00:00.000+23:59"));//132775206e4 132775206e4  132775206e4  132775206e4    132775206e4
console.log(Date.parse("2012-01-29T12:00:00.000-23:59"));//132792474e4 132792474e4  132792474e4  132792474e4    132792474e4
console.log(Date.parse("2012-01-29T12:00:00.000+24:00"));//NaN         1327752e6    NaN          1327752000000  1327752000000
console.log(Date.parse("2012-01-29T12:00:00.000+24:01"));//NaN         NaN          NaN          1327751940000  1327751940000
console.log(Date.parse("2012-01-29T12:00:00.000+24:59"));//NaN         NaN          NaN          1327748460000  1327748460000
console.log(Date.parse("2012-01-29T12:00:00.000+25:00"));//NaN         NaN          NaN          NaN            NaN
console.log(Date.parse("2012-01-29T12:00:00.000+00:60"));//NaN         NaN          NaN          NaN            NaN
console.log(Date.parse("-271821-04-20T00:00:00.000+00:01"));//NaN      NaN          NaN          -864000000006e4 -864000008646e4
console.log(Date.parse("-271821-04-20T00:01:00.000+00:01"));//-8.64e15 NaN          -8.64e15     -8.64e15        -864000008640e4 
```

似乎 ECMAScript 应该更具体地处理边缘情况；目前是说无效的日期格式取决于实现，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:44:49.867

根据 ES5 规范，[Date.parse](http://es5.github.com/#x15.9.4.2)仅适用于有效的[ISO 8601](http://dotat.at/tmp/ISO_8601-2004_E.pdf)日期。其他任何内容都取决于实现（实际上，IE < 9 不适用于标准 ISO 日期，它需要一个“/”分隔符）。所以如果你给它一个无效的日期（比如 2012-11-31）你可以得到任何东西，从 2012-12-01 到错误。

在您的测试中：

```
2012-12-31T23:59:60.000Z 
```

应该可以工作，尽管可能不像您期望的那样。使用*60*秒表示闰秒，它不等于 24:00:00，只有 Safari 似乎正确。

还：

```
2012-04-04T24:00:00.000Z 
```

应该可以工作，它表示 2012 年 4 月 4 日的午夜，所以 Firefox 在那里出错。

ES5 实现应该支持的格式在[规范](http://es5.github.com/#x15.9.1.15)中。

哦，您可能还应该测试省略“T”（因为它在某些情况下是可选的，我认为包括浏览器）和不同的时区，例如：

```
2012-04-03 23:50:00+10:00
2012-04-03 23:50:00-04:15
2012-04-03 23:50:00+10
20120403T235000+1000 
```

以此类推，使用 YYYYDDD 和 YYYYWwwD 格式，尽管不需要实现来支持它们。

# ruby - 为 nil:NilClass 获取错误未定义方法“exitstatus”

> ID：10005375
> 
> 赞同：1
> 
> 时间：2012-04-04T05:26:05.427
> 
> 标签：ruby, ruby-on-rails-3, paperclip

在 ruby​​ 中使用回形针时出现此错误“nil:NilClass 的未定义方法 `exitstatus'”。请告诉我适当的答案 4 这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:32:23.207

检查您的 /config/enviroments/production.rb（或开发）文件并为 ImageMagick 设置转换命令路径。

```
Paperclip.options[:command_path] = "/usr/bin" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:05:21.720

I got the same error message when I tried to assign attachment this way:

```
file = new Tempfile("image.png")    
user.image = file 
```

It worked after I changed it to this:

```
user.image = File.open("image.png") 
```

If this wasn't your case, you should give a little more information about your problem.

# javascript - 动态创建 div

> ID：10005381
> 
> 赞同：1
> 
> 时间：2012-04-04T05:27:06.853
> 
> 标签：javascript, dom, html

我想创建与 var foo.length 一样多的 div，但我的代码只创建一个 div。

```
var foo = new Array();
for ( i = 0; i < 5; i++ ) { 
  foo[i] = document.createElement('div'); 
} 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T05:35:51.893

调用“document.createElement”实际上并没有将新元素添加到 DOM，它只是创建它。然后您需要调用“appendChild”。所以是这样的：

```
var container = document.getElementById('container');
var foo = [];
for (var i = 0;i < 5;i++) {
    foo[i] = document.createElement('div');
    container.appendChild(foo[i]);
} 
```

# iphone - 在 iOS 5 上使用 ARC 过早发布对象？

> ID：10005386
> 
> 赞同：0
> 
> 时间：2012-04-04T05:27:47.153
> 
> 标签：iphone, ios, automatic-ref-counting

我创建了一个包含布尔值的类 AppSettings：

```
#import <Foundation/Foundation.h>

@interface AppSettings : NSObject{

bool bip10secCountdown;
bool jv10secCountdown;
bool jv30secAlert;
bool jv1minAlert;
bool jvp5minAlert;

}

@property bool bip10secCountdown;
@property bool jv10secCountdown;
@property bool jv30secAlert;
@property bool jv1minAlert;
@property bool jv5minAlert;

@end 
```

和实施：

```
#import "AppSettings.h"

@implementation AppSettings

@synthesize bip10secCountdown, jv10secCountdown, jv30secAlert, jv1minAlert, jv5minAlert;

- (id)init
{
    self = [super init];
    if (self){
    }
    return self;

}

@end 
```

然后我试图在我的主类中使用这个类，但是在 viewDidLoad 中初始化对象之后，当我想再次使用它时，它显示为 null.. 所以我猜它发布得太早了。我正在使用 ARC，所以我不手动管理内存。难道我做错了什么 ？

主类中的声明：

```
AppSettings *appSettings;

}

@property(nonatomic)bool activated;
@property (nonatomic, strong) AppSettings *appSettings; 
```

和实施：

```
@synthetize appSettings
...
- (void)viewDidLoad
{
    // Initialize the model
    self.appSettings = [[AppSettings alloc]init];

NSLog(@"appSettings = %@",self.appSettings); 
```

第一个输出正常。但是当我尝试从 Main 类中的另一个方法访问 appSettings 时，appSettings 为 (null)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:32:33.177

视图很可能已卸载，或者您的视图控制器已被释放。尝试将初始化代码移动到启动视图控制器的方法中（- (id)initWithNibName: bundle:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:54:36.687

当您说您在 AppDelegate 中初始化视图控制器时，我认为您的意思是 MyViewController *theView = [[MyViewController alloc] init]; 或类似的东西。这将是您的第一个视图，您应该在 MyViewController 的 viewDidLoad 中初始化 AppSettings，而不是 AppDelegate。

demo9733 关于使 AppSettings 成为单例的建议是一个很好的建议，因为您将能够从应用程序的任何位置轻松访问您的设置。

还要验证 ARC 是否用于 MyViewController （或任何可能的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T05:58:28.050

代替：

```
@property (nonatomic, strong) AppSettings *appSettings; 
```

尝试：

```
@property (nonatomic, retain) AppSettings *appSettings; 
```

而且我建议您将`AppSettings`其设置为单身人士。

# objective-c - 如何在 UIView 上绘图

> ID：10005388
> 
> 赞同：-2
> 
> 时间：2012-04-04T05:27:52.847
> 
> 标签：objective-c, ios, ios5

> **可能重复：**
> [子类化 UIView 以在 Quartz 中绘制](https://stackoverflow.com/questions/7398911/subclassing-uiview-to-draw-in-quartz)

您好，我正在寻找如何使用 QuartzCore 在 UIView、UIScrollView 上绘制东西的好例子。

第一次尝试我想在某个视图上画一个三角形甚至一条线。是否有可能在 UIVIewController 中实现？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:34:38.460

这可能是 Quartz 内核的优秀启动教程

[Apple 提供的石英芯样品](https://developer.apple.com/library/ios/samplecode/QuartzDemo/QuartzDemo.zip)

这包括所有基本图纸。毫无疑问，您将需要对其进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:43:18.467

最简单的方法是继承一个 UIView，让你的 UIViewController 添加一个子类的实例作为可见的子视图，然后在它上面调用 setNeedsDisplay。然后，当 UIView 子类的 drawRect 方法被调用时，在给定的上下文上进行石英绘图。

# android - 相对布局的问题

> ID：10005390
> 
> 赞同：0
> 
> 时间：2012-04-04T05:28:19.553
> 
> 标签：android, android-layout, scrollview, android-relativelayout

我将应用程序的界面分为三个区域：页眉、内容和页脚。页眉具有固定大小（它只有一个图像），而页脚和内容的大小可以变化。

在分辨率更高的设备中，我想在屏幕上插入页眉和页脚，并为内容区域保留任何可用空间。在具有低分辨率的设备中，考虑将内容长度尽可能短（例如 wrap_content）并在下面插入页脚（要求用户执行滚动以查看页脚）。

我得到的最好的是使用RelativeView：

```
<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentTop="true" >

        (...)

    </LinearLayout>

    <LinearLayout
        android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentBottom="true" >

        (...)

   </LinearLayout>

   <FrameLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/footer"
        android:layout_below="@+id/header"
        android:lay >

        (...)

    </FrameLayout>

</RelativeLayout> 
```

对于较大的分辨率可以按预期工作，问题在于对于较小的分辨率：内容少于应有的内容，因为它占用了页眉和页脚之间的空间。

我该如何解决这个问题？假设屏幕的所有可用空间（大分辨率），我找不到另一种获取内容的方法，因为我不能简单地使用 fill_parent，因为内容位于页眉和页脚之间。我也尝试使用最小高度，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:42:57.667

顶级`RelativeLayout` `layout_height`制作`fill_parent`。然后`FrameLayout`删除该`layout_above`属性，只需说它在标题下方就足够了。

最后，`FrameLayout`可能会导致问题，因为它通常在屏幕上只有 1 个元素并填满屏幕时使用。尝试将其替换为`LinearLayout`. 我已经在我的一个应用程序中完成了与您想要的完全一样的操作，布局是（请记住，在我的情况下，我将替换`FrameLayouts`为`Fragments`which are`LinearLayout`或`RelativeLayout`based。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainBack"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/transparent" >

    <FrameLayout
        android:id="@+id/headerFrag"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@+id/homeAdMsgFrag"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

    <ListView
        android:id="@+id/contactList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/homeAdMsgFrag"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/headerFrag"
        android:background="@color/transparent"
        android:cacheColorHint="@color/transparent" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:38:58.557

在我也遇到这个问题的前几天，为了解决我所做的事情，我创建了**Header.xml**和**footer.xml**并将这两个 xml 包含在我的所有其他**活动**xml 中，因为这两个在所有其他活动中都很常见。

为了解决全局分辨率问题，我使用[了 weightsum](https://stackoverflow.com/questions/7452741/what-is-androidweightsum-in-android-and-how-does-it-work)和[weight](https://stackoverflow.com/questions/4986861/android-layout-weight)，应用 weight 也会修复您的页眉和页脚区域以及内容区域。

这样，我在我的一个项目中完成了解决此问题的方法，只需尝试一下，希望它对您有用。

**例子**

```
<LinearLayout 
    android:weightSum="10"
    android:orientation="vertical"
    android:id="@+id/relativeLayout1" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" > 

    <LinearLayout 
        android:id="@+id/header" 
        android:layout_width="fill_parent" 
        android:layout_weight="2"
        android:layout_height="0dp" 
        android:orientation="vertical" > 

        (...) 

    </LinearLayout> 

   <FrameLayout 
        android:id="@+id/content" 
        android:layout_width="fill_parent" 
        android:layout_weight="6"
        android:layout_height="0dp"> 

        (...) 

    </FrameLayout> 

    <LinearLayout 
        android:id="@+id/footer" 
        android:layout_width="fill_parent" 
        android:layout_weight="2"
        android:layout_height="0dp" 
        android:orientation="vertical" > 

        (...) 

   </LinearLayout> 

</LinearLayout> 
```

谢谢。

# php - 为什么 Code Igniter 无法检测到我的表单是通过 POST 提交的？

> ID：10005393
> 
> 赞同：4
> 
> 时间：2012-04-04T05:28:46.720
> 
> 标签：php, codeigniter

我的 jQuery Mobile 应用程序的 Code Igniter 视图中有一个表单。

```
<form action="<?= BASE_PAGE_URL ?>settings" method="post" id="settingsForm">
    <div data-role="fieldcontain">
        <label for="firstName">First Name</label>
        <input type="text" name="firstName" id="firstName" value="" placeholder="First Name" />
    </div>
    <div data-role="fieldcontain">
        <label for="lastName">Last Name</label>
        <input type="text" name="lastName" id="lastName" value="" placeholder="Last Name" />
    </div>
    <input type="hidden" name="purpose" value="register" />
    <input type="submit" name="submit" value="Register" />
</form> 
```

但是，当我将此代码写入控制器方法时，操作指定的 URL 会导致：

```
echo ($_SERVER['REQUEST_METHOD'] == 'POST') ? "yay" : "nay"; 
```

当我点击提交按钮时，“nay”被写入页面。为什么 Code Igniter 无法判断我正在提交发布请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:37:58.237

如果要确定是否有 POST 数据或请求是否为 POST，请使用[输入类](http://codeigniter.com/user_guide/libraries/input.html)`post()`中的方法

```
$this->input->post(index);

//returns FALSE if no POST data
//returns the POST array if there is data (hence, a POST)
//returns a specific data from the array if you provide "index" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:42:01.583

这可能是`register_globals`. 采用

```
if($_POST) 
```

OR CI 输入类

```
$this->input->post('var'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:04:08.923

我想知道您的表单是否按照您的预期返回了一个发布请求，但是之后会立即重定向某些内容，您将其视为 GET？`exit()`尝试立即在表单处理操作中放置一个临时的；我怀疑这会以 POST 的形式出现。

# javascript - 服务器端事件（对于傻瓜:)）

> ID：10005396
> 
> 赞同：5
> 
> 时间：2012-04-04T05:28:56.370
> 
> 标签：javascript, javascript-events

我阅读了有关服务器端事件的规范和一些示例/教程，但我现在完全理解了整个过程。

如果在使用ajax的时候request->response循环很容易理解，这里就显得有点复杂了。如此处所述：http: [//dsheiko.com/weblog/html5-and-server-sent-events](http://dsheiko.com/weblog/html5-and-server-sent-events)，我不明白谁/什么在服务器上生成事件。就像有人不断调用服务器脚本，这正在生成随机数。

不仅如此，作者说：“此外，您不需要在事件源脚本中应用循环循环。这看起来就像自动向客户端推送消息一样重复。”。
这是怎么回事？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:57:30.687

据我所知，服务器端 PHP 脚本会定期发送消息。在示例中，脚本的链接位于名为的标签`event-source`中，脚本似乎是`events.php`. 发送的消息由函数处理`onMessageHandler`。处理程序分配给`<event-source>`-tag 本身，对于 Opera`server-time`处理事件，对于 Webkit 处理`message`事件。它是负责轮询的（支持 HTML5 的）浏览器，因此实际上它看起来最像[长轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)的浏览器实现。

关于您的问题*，我不明白谁/什么在服务器上生成事件*：服务器端没有生成事件，它只是一个定期调用的 PHP 脚本。在该脚本返回时间戳的示例中。

# cocoa - 方法声明中的编译错误，该方法接受输入作为具有可变数量参数的块

> ID：10005408
> 
> 赞同：1
> 
> 时间：2012-04-04T05:29:42.860
> 
> 标签：cocoa, objective-c-blocks, variadic-functions

当我声明这样的方法时：

```
- (void)doAnythingWithThisBlock:(void(^)(NSString *, ... NS_REQUIRES_NIL_TERMINATION))AnythingBlock; 
```

它给出了编译错误：

```
Expected ')' 
```

但是当我这样声明时：

```
- (void)doAnythingWithThisBlock:(void(^)(NSString *, ...))AnythingBlock; 
```

它编译良好并按预期工作

我们不能在声明一个接受输入作为具有可变数量参数的块的方法时使用 - NS_REQUIRES_NIL_TERMINATION 吗？

我正在 XCode 4.2 中尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:02:16.983

我猜 NS_REQUIRES_NIL_TERMINATION 仅用于方法声明[1](http://cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)

但是，您可以尝试将您的块类型定义为某种类型并将其作为参数传递：可能铿锵会吃掉它吗？

# verilog - 在 Verilog 中为 reg 分配一个可综合的初始值

> ID：10005411
> 
> 赞同：22
> 
> 时间：2012-04-04T05:30:22.393
> 
> 标签：verilog

我是一个尝试学习 Verilog 的 FPGA 菜鸟。如何将值“分配”给始终块中的 reg，作为初始值或作为常量。我试图在下面的代码中做这样的事情。我收到一个错误，因为 8 位常量不算作输入。我也不想触发总是关闭时钟。我只想将一个寄存器分配给一个特定的值。因为我希望它是可合成的，所以我不能使用初始块。非常感谢。

```
module top
(
    input wire clk,
    output wire [7:0] led   
 );

reg [7:0] data_reg ; 
always @*
begin
    data_reg = 8'b10101011;
end

assign led = data_reg;

endmodule 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-04T17:48:56.417

您可以将寄存器声明与初始化结合起来。

```
reg [7:0] data_reg = 8'b10101011; 
```

或者你可以使用一个`initial`块

```
reg [7:0] data_reg;
initial data_reg = 8'b10101011; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-18T17:32:53.633

The other answers are all good. For Xilinx FPGA designs, it is best *not* to use global reset lines, and use `initial` blocks for reset conditions for most logic. Here is the white paper from Ken Chapman (Xilinx FPGA guru)

[http://japan.xilinx.com/support/documentation/white_papers/wp272.pdf](http://japan.xilinx.com/support/documentation/white_papers/wp272.pdf)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T07:05:51.747

由于没有右手参数改变，总是@* 永远不会触发。为什么不使用带分配的电线？

```
module top (
    input wire clk,
    output wire [7:0] led   
);

wire [7:0] data_reg ; 
assign data_reg   = 8'b10101011;
assign led        = data_reg;

endmodule 
```

如果您确实想要一个可以更改值的翻牌，则默认设置在 reset 子句中。

```
module top
(
    input        clk,
    input        rst_n,
    input  [7:0] data,
    output [7:0] led   
 );

reg [7:0] data_reg ; 
always @(posedge clk or negedge rst_n) begin
  if (!rst_n)
    data_reg <= 8'b10101011;
  else
    data_reg <= data ; 
end

assign led = data_reg;

endmodule 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-04T20:47:56.633

您应该使用 FPGA 文档推荐的内容。除了使用复位网络之外，没有可移植的方法来初始化寄存器值。这在大多数综合目标上都有与之相关的硬件成本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-04T07:08:18.367

当芯片通电时，它的所有寄存器都包含随机值。不可能有一个初始值。它总是随机的。

这就是为什么我们有复位信号，将寄存器复位到一个已知值。复位是由芯片外的东西控制的，我们编写代码来使用它。

```
always @(posedge clk) begin
    if (reset == 1) begin // For an active high reset
        data_reg = 8'b10101011;
    end else begin
        data_reg = next_data_reg;
    end
end 
```

# php - 在 jquery 对话框表单弹出窗口中禁用 facebook 连接按钮

> ID：10005413
> 
> 赞同：0
> 
> 时间：2012-04-04T05:30:52.257
> 
> 标签：php, jquery, facebook, drupal

在我的网站中，我使用的是 facebbok api。

每当用户单击登录时，将显示一个弹出窗口，并且可以通过电子邮件或 Facebook 连接登录。在第一次单击后，弹出窗口仍然存在，直到页面加载。

在第一次单击后，我只想禁用弹出窗口中的 facebook 连接按钮。

**对于我正在使用的弹出窗口：**

`$(".msg").fancybox({ showCloseButton: false, padding: 0, margin: 0

```
 }).trigger('click'); `

  **and for checking facebook login:**

   if (fb) {        
    FB.getLoginStatus(function (response) {
        if ('connected' == response.status) {       
          reload(url, param);  --------->to reload to the mentioned page                         

        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:49:27.240

[在这种情况下， http://jsfiddle.net/](http://jsfiddle.net/)上的一个例子会很好，因为我真的不能帮助你。您想在弹出窗口中禁用某种元素吗？

示例：您要禁用的按钮是类 'xy'

```
$('input.xy').hide(); 
```

# hibernate - 如何记录 JDBC/Hibernate 事务持续时间？

> ID：10005415
> 
> 赞同：0
> 
> 时间：2012-04-04T05:31:08.040
> 
> 标签：hibernate, jdbc, jboss

我正在使用带有 Hibernate 的 jboss 4.2。我需要记录事务的持续时间，所以我统计了事务完成或回滚所需的平均时间。我遇到的另一个问题是 jboss JTA (arjuna) 中止长时间运行的事务，所以我需要知道在那里配置什么超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:37:18.797

我认为您应该创建一个计时器来计算事务开始和结束之间的时间。实现这一目标的可能性是：

```
 EntityManager em = HibernateUtil.createEntityManager(); //I used JPA's EntityManager instead of hibernate's sessions. createEntityManager iss a function created by you.
EntityTransaction tx = em.getTransaction();
tx.begin();
Date startDate = new Date();

//... your DB stuff goes here ...

tx.commit();
Date endDate = new Date();

MyLogger.logTransactionDuration(startDate, endDate); 
```

在上面的代码片段中，我让您了解如何实现这一点。

如果您愿意，您可以使用`log4j`或`slf4j`api，并且您只需在`log4j.properties`文件中进行一些设置。

希望有所帮助。

# c# - 查找周，使用当前日期？在 C# 中？

> ID：10005418
> 
> 赞同：0
> 
> 时间：2012-04-04T05:31:20.247
> 
> 标签：c#

在 C# 中如何找到当前日期的星期，我正在尝试获取当前日期的星期数，您能帮帮我吗，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:34:46.313

请参阅[Calendar.GetWeekOfYear](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)

```
using System;
using System.Globalization;

public class Example
{
   public static void Main()
   {
      DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
      DateTime date1 = new DateTime(2011, 1, 1);
      Calendar cal = dfi.Calendar;

      Console.WriteLine("{0:d}: Week {1} ({2})", date1, 
                        cal.GetWeekOfYear(date1, dfi.CalendarWeekRule, 
                                          dfi.FirstDayOfWeek),
                        cal.ToString().Substring(cal.ToString().LastIndexOf(".") + 1));       
   }
}
// The example displays the following output:
//       1/1/2011: Week 1 (GregorianCalendar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:07:37.160

如果您需要本周的“全球”号码，您可以使用这个：

```
using System;
using System.Globalization;    

DateTime date = DateTime.Now;
int res = 0;

// First day of year
res = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstDay, DateTimeFormatInfo.CurrentInfo.FirstDayOfWeek);

// (Default) First four day week from Sunday
res = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Sunday);

// First four day week from StartOfWeek
res = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstFourDayWeek, DateTimeFormatInfo.CurrentInfo.FirstDayOfWeek);

// First full week from Sunday
res = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstFullWeek, DayOfWeek.Sunday);

// First full week from StartOfWeek
res = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstFullWeek, DateTimeFormatInfo.CurrentInfo.FirstDayOfWeek); 
```

如果您需要一个月中的周数，请像这样的代码使用 smth：

```
 DateTime beginningOfMonth = DateTime.Now;

 while (date.Date.AddDays(1).DayOfWeek != CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek)
     date = date.AddDays(1);

 int result = (int)Math.Truncate((double)date.Subtract(beginningOfMonth).TotalDays / 7f) + 1; 
```

# python - 为什么我收到 IndexError: string index out of range？

> ID：10005419
> 
> 赞同：3
> 
> 时间：2012-04-04T05:31:35.980
> 
> 标签：python, string

我在 ubuntu 11.10、python 2.7.2+ 上运行以下代码。

```
import urllib
import Image
import StringIO
source = '/home/cah/Downloads/evil2.gfx'
dataFile = open(source, 'rb').read()
slicedFile1 = StringIO.StringIO(dataFile[::5])
slicedFile2 = StringIO.StringIO(dataFile[1::5])
slicedFile3 = StringIO.StringIO(dataFile[2::5])
slicedFile4 = StringIO.StringIO(dataFile[3::5])
jpgimage1 = Image.open(slicedFile1)
jpgimage1.save('/home/cah/Documents/pychallenge12.1.jpg')
pngimage1 = Image.open(slicedFile2)
pngimage1.save('/home/cah/Documents/pychallenge12.2.png')
gifimage1 = Image.open(slicedFile3)
gifimage1.save('/home/cah/Documents/pychallenge12.3.gif')
pngimage2 = Image.open(slicedFile4)
pngimage2.save('/home/cah/Documents/pychallenge12.4.png') 
```

本质上，我正在获取一个 .bin 文件，该文件具有多个图像文件的十六进制代码，这些图像文件
像 123451234512345 一样混乱......然后聚集在一起然后保存。问题是我收到以下错误：

```
File "/usr/lib/python2.7/dist-packages/PIL/PngImagePlugin.py", line 96, in read
len = i32(s)
File "/usr/lib/python2.7/dist-packages/PIL/PngImagePlugin.py", line 44, in i32
return ord(c[3]) + (ord(c[2])<<8) + (ord(c[1])<<16) + (ord(c[0])<<24)
IndexError: string index out of range 
```

我找到了 PngImagePlugin.py 并查看了它的内容：

```
def i32(c):

    return ord(c[3]) + (ord(c[2])<<8) + (ord(c[1])<<16) + (ord(c[0])<<24) (line 44)

"Fetch a new chunk. Returns header information."

    if self.queue:
        cid, pos, len = self.queue[-1]
        del self.queue[-1]
        self.fp.seek(pos)
    else:
        s = self.fp.read(8)
        cid = s[4:]
        pos = self.fp.tell()
        len = i32(s) (lines 88-96) 
```

我会尝试修修补补，但我担心我会搞砸 png 和 PIL，它们一直很难工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:39:40.657

看来`len(s) < 4`在这个阶段

```
len = i32(s) 
```

意思就是

```
s = self.fp.read(8) 
```

没有读取整个 4 个字节

您传递的 fp 中的数据可能对图像解码器没有意义。

仔细检查您是否正确切片

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T05:41:58.700

确保您传入的字符串长度至少为 4。

# clojure - 对类名的解析感到困惑

> ID：10005423
> 
> 赞同：5
> 
> 时间：2012-04-04T05:32:07.430
> 
> 标签：clojure

两个文件

类型.clj：

```
(ns test.types)

(defrecord Price [date price])
(defrecord ProductPrice [name prices]) 
```

core.clj（没关系）

```
(ns test.core
  (:use [test.types])
  (:use [clojure.string :only (split)]))

(defn read-data [file]
  (let [name (subs (.getName file) 0 4)]
    (with-open [rdr (clojure.java.io/reader file)]
      (doall (map #(apply ->Price (split % #"\t")) (drop 2 (line-seq rdr))))))) 
```

core.clj（java.lang.IllegalArgumentException：无法解析类名：ProductPrice）

```
(ns test.core
  (:use [test.types])
  (:use [clojure.string :only (split)]))

(defn read-data [file]
  (let [name (subs (.getName file) 0 4)]
    (with-open [rdr (clojure.java.io/reader file)]
      (ProductPrice. name (doall (map #(apply ->Price (split % #"\t")) (drop 2 (line-seq rdr)))))))) 
```

core.clj（没关系）

```
(ns test.core
  (:use [test.types])
  (:use [clojure.string :only (split)]))

(defrecord tProductPrice [name prices])
(defn read-data [file]
  (let [name (subs (.getName file) 0 4)]
    (with-open [rdr (clojure.java.io/reader file)]
      (tProductPrice. name (doall (map #(apply ->Price (split % #"\t")) (drop 2 (line-seq rdr))))))) 
```

core.clj（java.lang.IllegalStateException：->ProductPrice 已经引用：#'test.types/->ProductPrice 在命名空间：test.core）

```
(ns test.core
  (:use [test.types])
  (:use [clojure.string :only (split)]))

(defrecord ProductPrice [name prices])
(defn read-data [file]
  (let [name (subs (.getName file) 0 4)]
    (with-open [rdr (clojure.java.io/reader file)]
      (ProductPrice. name (doall (map #(apply ->Price (split % #"\t")) (drop 2 (line-seq rdr))))))) 
```

我对这些例外完全感到困惑。除了来自 clojure.org 和书籍的一些最简单的例子外，我找不到更多关于“记录”的用法。

任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T10:12:52.327

defrecord 在以当前命名空间命名的包中创建一个 java 类。(ProductPrice. ...) 是对该类型的构造函数的调用；这是 java interop - 不是普通的函数调用。

您不能引用在 java.lang 或当前命名空间之外定义的类，除非您显式**导入**它或指定完整的包名称。这包括调用它的构造函数。

因此，要解决问题，您需要导入 Price 和 ProductPrice。

```
 (ns test.core (:import [test.types Price]))
 (Price. ...) 
```

或调用完整的类+包名称：

```
 (test.types.Price. ...) 
```

# android - 如何在以下代码中使用渐变

> ID：10005424
> 
> 赞同：0
> 
> 时间：2012-04-04T05:32:18.430
> 
> 标签：android

我已经为渐变定义了 XML。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
<gradient 
    android:startColor="#9acd32"
    android:endColor="#ffffff"
    android:angle="180"
    /> 
```

我想在下面的代码中使用渐变。

```
XYRegionFormatter regionFormatter3 = new XYRegionFormatter(Color.BLUE); 
```

而不是 Color.BLUE

如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:37:43.813

试试这个：

```
XYRegionFormatter regionFormatter3 = new XYRegionFormatter(getResources().getColor(R.color.<xml_file_name>)); 
```

**编辑：**
我意识到它需要一个 Color 属性，而这条线试图将它交叉引用到一个可绘制对象，这是错误的。渐变实际上形成了一个drawable，而`XYRegionFormatter`需要一个*Color*属性。因此，在这种情况下不能使用渐变绘制。代码中没有其他可能性可以使用渐变作为颜色属性，afaik。
此外，由于`XYRegionFormatter`没有定义任何使用*Drawable()*甚至*Paint()*的方法，因此目前似乎无法在您正在查看的场景中使用渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:43:04.010

试试这个...

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient android:type="radial" android:gradientRadius="250"
        android:startColor="#E9E9E9" android:endColor="#D4D4D4" />
</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T05:49:14.107

你应该做这样的事情。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient 
android:startColor="#9acd32"
android:endColor="#ffffff"
android:angle="180"
/>
</shape> 
```

此 xml 将在您的 res/drawable 中，名称类似于 shape.xml

现在在您的代码中，您可以像下面的代码一样传递它。

```
 XYRegionFormatter regionFormatter3 = new XYRegionFormatter(getResources().getDrawable(R.drawable.shape)); 
```

# maven - 使用 Maven 2 在 JBoss 7.1.1 中启动独立服务器

> ID：10005426
> 
> 赞同：0
> 
> 时间：2012-04-04T05:32:29.590
> 
> 标签：maven, jboss

使用 Maven 2 启动 JBoss 7.1.1 独立服务器或域服务器需要进行哪些配置？

*   开始
*   停止
*   部署

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:32:25.547

请参阅[JBoss Maven 插件](http://mojo.codehaus.org/jboss-maven-plugin/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:58:48.807

最近，当我尝试将新的 maven2 java 项目从 eclipse 部署到 jboss 的新副本为 7.1.1 时，我遇到了一些问题。

在我花了 4 个小时阅读各种在线文档后，我终于意识到有 2 个 jboss maven 插件；命名，jboss maven 插件和 jboss 作为 maven 插件。

第一个位于[此处](http://mojo.codehaus.org/jboss-maven-plugin/)，第二个位于[此处](https://docs.jboss.org/jbossas/7/plugins/maven/latest/)。

因此，如果您需要使用“jboss-as”目标说明符或“jboss”目标说明符，请注意。

有趣的。我刚刚开始阅读以了解这两个库之间的真正区别是什么；除了明显的目标说明符和任务名称。

# c++ - C++ list.unique() 会调整列表的大小吗？

> ID：10005429
> 
> 赞同：0
> 
> 时间：2012-04-04T05:32:56.260
> 
> 标签：c++, list, resize, unique

如果发现重复，列表上的 unique() 调用是否也会调整列表的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:35:54.423

是的，它确实。它删除重复的元素。所以列表的大小也会改变。

看看**[这里](http://www.cplusplus.com/reference/stl/list/unique/)**的文档。它说：

> 被移除的元素的析构函数被调用，它们的迭代器和引用变得无效。

请注意，在**[std::list](http://www.cplusplus.com/reference/stl/list/)**的情况下，在擦除元素时，只有迭代器和对被擦除元素的引用无效 [23.2.2.3/3]。

# android - 在我的应用程序中提供 facebook sdk 的参考

> ID：10005432
> 
> 赞同：0
> 
> 时间：2012-04-04T05:33:35.423
> 
> 标签：android, facebook

我正在开发一个应用程序，我必须在其中集成 facebook。但是，每当我在我的应用程序中引用 facebook SDK 时，它都不会接受它。该过程在 73% 时中止。我从 github 下载了 SDK，还安装了 EGit eclipse 插件。但是，我仍然无法提供参考。我没有得到什么是实际问题。eclipse中是否有任何问题或其他问题？

# javafx-2 - 确保组件占用 SplitPane 中的所有可用空间

> ID：10005434
> 
> 赞同：0
> 
> 时间：2012-04-04T05:33:40.213
> 
> 标签：javafx-2

我有一个（水平）拆分窗格，左侧有一个选项卡式窗格。我想确保在调整拆分窗格的分隔线大小时每个选项卡的内容都占用了所有可用空间，但是对于应该绑定什么内容我有点困惑。有小费吗？

谢谢，

约瑟夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:56:05.117

你试过什么吗？

因为您描述了大多数情况下的默认行为。将任何布局管理器放在其他内部`Pane`和`Group`内部`SplitPane`，它们将尝试为它们占用所有可用空间。

# c# - 如何从 Gmail 中检索电子邮件

> ID：10005435
> 
> 赞同：1
> 
> 时间：2012-04-04T05:33:42.580
> 
> 标签：c#, wpf, email, gmail

我开发了一个 WPF C# 应用程序。从 Gmail 帐户发送电子邮件是可以的。但我需要接收来自 Gmail 帐户的所有邮件。有没有办法做到这一点？怎么做？使用第三方库不是问题。感谢您阅读...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:43:48.883

Gmail 支持 IMAP。您必须获得一个 IMAP .NET 库才能阅读您的 Gmail 收件箱。

这里有几个链接，希望对你有帮助

[链接1 链接2](https://stackoverflow.com/questions/545724/using-c-sharp-net-librarires-to-check-for-imap-messages-from-gmail-servers) [链接](https://stackoverflow.com/questions/3101522/how-to-read-email-from-gmail-using-c-sharp) [3](https://stackoverflow.com/questions/670183/accessing-imap-in-c-sharp)

# c - Malloc 分配方案

> ID：10005436
> 
> 赞同：5
> 
> 时间：2012-04-04T05:33:46.450
> 
> 标签：c, memory, malloc

是的，我正在学习计算机系统课程。我对实现 malloc 的各种分配方案有一些疑问。对于显式列表，如果我使用类似 LIFO 的堆栈实现 malloc，那么拥有指向先前已释放内存的指针的目的究竟是什么？比如为什么需要双向链表？单链表不是也能正常工作吗？

[马洛克讲座。](http://www.eecs.harvard.edu/%7Emdw/course/cs61/mediawiki/images/b/b9/Lectures-malloc2.pdf) 我在网上找到了这个链接，你可以看一下幻灯片 7，看看我在说什么。

在查看隔离列表分配方案时，这些列表是单向的，对吗？而且，究竟什么是合并机制？例如，如果释放了 4 个单词，您会先尝试在周围有空闲空间时加入它，然后再将其插入到各自的隔离链表中吗？或者您会简单地将 4 字块插入相应隔离链表的“4 字”部分吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:54:01.733

既然一个被释放的块总是有两个指针的空间，为什么不双重链接列表呢？它简化了合并代码，因此在遍历列表时不必维护尾随指针。它还允许在任一方向遍历列表，以防提示列表的哪一端可能更接近开始搜索。我曾经看过的一个不起眼的系统在最后一个活动发生的“中间”中保留了一个指针。

释放块时。只有四种可能的情况：

*   *空闲块在空闲块之后*是相邻的。
*   *空闲块在空闲块之前*是相邻的。
*   空闲块位于它之前和之后的两个空闲块之间并与之相邻。
*   空闲块不与任何空闲块相邻。

合并相邻空闲块的目的是：

*   减少链表的长度
*   准确反映空闲块的大小，而不会给分配器带来负担来查看两个块是否相邻

将空闲块排序到特定长度的空闲列表通常有好处，但在大多数实际实现中，合并是一个优先级，因此`alloc()`当有许多不同大小的空闲块时，对不同大小块的请求不会被不恰当地拒绝。

# drupal-7 - 更改 drupal 7 cck 正文标题

> ID：10005441
> 
> 赞同：0
> 
> 时间：2012-04-04T05:34:17.370
> 
> 标签：drupal-7, cck

如何更改表单中的 drupal 7 cck 正文标题，例如：

```
function mymodule_form_alter(&$form, $form_state, $form_id) {
if($form_id == "mymodule_node_form"){
   $form['title']['#title'] = t('Event Name');
 }
} 
```

我以这种方式更改了标题的标题，但我无法更改正文标题对我有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:31:18.937

您不必编写代码来修改 Drupal 7 中的正文标题。

如果您编辑`Body`内容类型中的字段（在 path `admin/structure/types/manage/[content-type]/fields`），您应该能够将标签从“Body”更改为您想要的另一个标签/标题。

# delphi - 如何执行带有两个参数的批处理文件？

> ID：10005442
> 
> 赞同：2
> 
> 时间：2012-04-04T05:34:25.407
> 
> 标签：delphi, delphi-7

我有一个批处理文件和一个在 Delphi 7 中开发的应用程序。我想在单击按钮时运行设置了两个参数的批处理文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:44:37.583

您当然可以[`CreateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx)按照@Remy 的描述执行此操作。然而，`CreateProcess()`并不是最容易操作的功能。为方便起见，您可能会发现[`ShellExecute()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153.aspx)这是一个更合适的选择：

```
uses
  ShellAPI;
....
ShellExecute(0, 'open', PChar(BatchFileName), 'param1 param2', 
  nil, SW_SHOWDEFAULT); 
```

最终这将导致`COMSPEC`变量被读取，然后被调用`CreateProcess()`。优点是您可以让外壳为您完成繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:39:36.607

用于`CreateProcess()`运行`"cmd.exe /C batchfilename parameters"`，其中 cmd.exe 的路径是从`%COMSPEC%`环境变量中获取的。

# django - 迁移到 Django 1.4

> ID：10005449
> 
> 赞同：8
> 
> 时间：2012-04-04T05:34:49.693
> 
> 标签：django, migration, django-1.4

我目前正在用 Django v1.2.7 开发一个网站。那是根据要求的版本，但我认为我可以毫无问题地更改它。我在考虑使用 v1.3（因为基于类的视图等），但 1.4 版是几周前发布的。我的问题是：

*   **是否值得迁移到 Django 1.4？**
*   **更新版本时可能会遇到哪些不兼容问题？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T05:44:49.583

您的两个问题都在1.4的[发布页面上得到了解答](https://docs.djangoproject.com/en/dev/releases/1.4/)

# javascript - 将带有 ASCII 控制字符的条形码扫描到输入字段中

> ID：10005451
> 
> 赞同：2
> 
> 时间：2012-04-04T05:35:08.353
> 
> 标签：javascript, html, ascii, barcode

我需要将带有[ASCII](http://en.wikipedia.org/wiki/ASCII) 29（组分隔符）的条形码扫描到 HTML 输入字段中，并将所有组分隔符替换为 |。当我首先将条形码扫描到[Notepad++](http://en.wikipedia.org/wiki/Notepad_%28software%29)中然后将其复制到输入字段时，以下 JavaScript 函数起作用，但当条形码直接扫描到输入字段时不起作用。有什么问题？

```
var barcode = document.getElementById('barcode').value;
barcode = barcode.replace(new RegExp(String.fromCharCode(29), 'g'), '|');
alert(barcode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T01:12:13.600

在我的 Symbol Tech 条码扫描仪上，字符作为击键发送。例如，组分隔符将模拟按住 left_control 键，然后发送右括号。您的浏览器将处理模拟的击键，就像您尝试使用`CTRL`+`]`作为快捷键一样。

**您可以使用onkeydown**和 event.which 捕获此事件，如下所述： [Firefox onkeydown detect pressed key](https://stackoverflow.com/questions/642040/firefox-onkeydown-detect-pressed-key)

# iphone - 在 Facebook 或 Twitter 上分享高分

> ID：10005458
> 
> 赞同：0
> 
> 时间：2012-04-04T05:35:36.413
> 
> 标签：iphone, ios, facebook, cocos2d-iphone, social

我已经在谷歌搜索了大约一个小时，并没有找到解决这个问题的明确解决方案。我看到很多人推荐 sharekit，但是我不希望菜单屏幕只是从屏幕底部弹出共享选项。

在死亡屏幕上，我希望有一个 Facebook 图标和一个 Twitter 图标，就像你在许多游戏中看到的那样，根据你点击的图标，你可以将你的高分帖子分享到你的墙上。任何人都可以为我指出一个很好的教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:43:47.750

如果您使用的是 iOS 5，则可以使用新的[twitter API](https://dev.twitter.com/docs/ios)：

在 iOS5 之前，您可以使用[MGTwitterEngine](http://mattgemmell.com/2008/02/22/mgtwitterengine-twitter-from-cocoa/)：

或者，您可以使用 NSUrlRequest 和 twitter [REST APIs](https://dev.twitter.com/docs/api)发布推文。

具体：检查[这里](https://dev.twitter.com/docs/api/1/post/statuses/update)

对于[facebook](http://developers.facebook.com/docs/mobile/ios/build/)，您可以使用图形 API。这是一个iOS教程：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:57:33.703

对于 twitter 集成，你可以试试[这个](http://icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)

# c# - 您可以在 .NET 中执行代码间接寻址吗？

> ID：10005461
> 
> 赞同：0
> 
> 时间：2012-04-04T05:35:48.183
> 
> 标签：c#, .net, vb.net, intersystems-cache, indirection

我记得使用 InterSystems Cache 代码，您可以使用间接获取字符串并将其转换为真正的可执行代码，方法是在字符串变量前面加上“@”。这可以在 C#.NET 或 VB.NET 代码中完成吗？所以我想要一个方法，它可以接受一个字符串参数数组（带有一行或多行代码），并运行该代码，假设它当然不会引发异常。我要去哪里？我正在尝试在 .NET 代码中编写编译器。

```
SET x="set a=3" XECUTE x   ; sets the public variable a to 3

OR

SET x="tag1" d @x  ; do/call the public subroutine tag1

OR 

Set Y = "B",@Y = 6  ; sets public variable B = 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:52:35.977

我假设您想在运行时进行编译。
System.CodeDom 和 System.CodeDom.Complier 命名空间包含与运行时编译相关的接口。
对于您自己的语言，您需要从 CodeDomProvider 的派生类实现派生类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:21:46.627

对于 .NET，您可以使用 System.CodeDom 以编程方式构建代码，它基本上是中间语言的包装器，或者您可以使用 System.CodeDom.Compiler 获取将字符串（或文件）编译为可执行文件或 DLL 的对象使用 C# 或 VB.NET 编译器。

编译字符串更像是 Intersystems Cache 的做法，但它仍然需要更多的工作，因为您必须提供编译器需要的所有信息。如果您查看[CompilerParameters 类](https://docs.microsoft.com/en-us/dotnet/api/system.codedom.compiler.compilerparameters?view=dotnet-plat-ext-5.0) ，您将看到增加的复杂性。编译后的代码将在它自己的程序集中。除非程序集位于其自己的应用程序域中，否则无法卸载程序集，并且在动态编译时，如果可以避免它，大多数人都不会费心。

[在这个站点上](https://stackoverflow.com/questions/508213/is-there-a-way-to-dynamically-execute-a-string-in-net-similar-to-eval-in-jav)提出了解决您的问题的各种方法。

如果链接仍然有效，可以在[此处找到您所描述的一种解决方案的一些源代码。](https://www.codeproject.com/Articles/39130/Compiling-Source-Code-from-a-String)

# jquery - 如何使 iframe 的灯箱“突破”？

> ID：10005464
> 
> 赞同：4
> 
> 时间：2012-04-04T05:35:56.760
> 
> 标签：jquery, iframe, overlay, lightbox, jquery-tools

我在网站的首页上有一个 iframe。iframe 加载一个 .php 页面，该页面具有一个使用 jQuery 工具选项卡构建的旋转器。在第一个选项卡上，我使用 jQuery Tools Overlay 在灯箱中弹出 YouTube 视频。

这在独立页面上一切正常，但是在网站的首页上查看时，灯箱仅限于 iframe。

我需要灯箱来弹出/突破 iframe 并接管整个网站的首页。

有没有办法获取 iframe 的父窗口或顶部窗口，然后让灯箱在那里打开？

还是有另一种方法可以用来完成这个？

该站点已锁定以进行开发，但您可以在此处查看独立的 php 页面：Stand-Alone Page

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:44:00.620

任何“灯箱”偏好？

如果您很灵活，您可以使用[Fancybox (v2.x)](http://fancyapps.com)并在此演示中实现该效果：http: [//picssel.com/playground/jquery/fancyboxFromIframe_16Jan12.html](http://picssel.com/playground/jquery/fancyboxFromIframe_16Jan12.html)

在该页面中有两个 iframe：左侧的一个显示您当前的场景，而右侧的一个显示您正在寻找的解决方案。

**更新**：使用`jQuery.noConflict()`

```
<script type="text/javascript" src="other_lib.js"></script> (mootools)
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

# android - 在 Android NDK 中将字节转换回 int？

> ID：10005468
> 
> 赞同：0
> 
> 时间：2012-04-04T05:36:33.387
> 
> 标签：android, android-ndk

我正在将一个 jbyte 变量传递给 android NDK C 文件中的 c 函数。我想将此字节变量转换为 int。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:53:33.260

尝试这个

```
 char buf[512];
jint dest_size = env->GetArrayLength(ba);
if (dest_size < sizeof(buf)) {
jbyte* dest_data = env->GetByteArrayElements(ba, NULL);
if (NULL != dest_data) {
memset(buf, 0x00, sizeof(buf));
memcpy(buf, dest_data, (int)dest_size);
// use buffer here
env->ReleaseByteArrayElements(ba, dest_data, 0);
} 
```

# android - 从联系人列表中选择名字和姓氏

> ID：10005471
> 
> 赞同：1
> 
> 时间：2012-04-04T05:36:59.960
> 
> 标签：android

如何从联系人列表中获取名字和姓氏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:44:42.210

查看[Contact Manager](http://developer.android.com/resources/samples/ContactManager/index.html)示例项目以获取执行此操作的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:46:53.413

尝试这个：

```
String whereName = ContactsContract.Data.MIMETYPE + " = ?";
String[] whereNameParams = new String[] { ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE };
Cursor nameCur = contentResolver.query(ContactsContract.Data.CONTENT_URI, null, whereName, whereNameParams, ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME);
while (nameCur.moveToNext()) {
    String given = nameCur.getString(nameCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME));
   String[] str = given.split(' ');
       String fname=str[0];  // FIRST NAME
       String lname=str[str.length-1]; // LAST NAME
}
nameCur.close(); 
```

有关更多详细信息，请参阅这篇文章[如何从 android 联系人中获取名字和姓氏？](https://stackoverflow.com/questions/4301064/how-to-get-the-firstname-and-lastname-from-android-contacts)

# vbscript - 如何使用 vbscript 从 xml 文件中提取变量名及其值

> ID：10005473
> 
> 赞同：0
> 
> 时间：2012-04-04T05:37:04.247
> 
> 标签：vbscript

我有以下 xml 文件，我想提取变量名及其值。你能帮我完成这件事吗？我的xml格式是

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="MyApps.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <connectionStrings>
        <add name="MyApps.Properties.Settings.dbConnString" connectionString="Data Source=MSTEST01\TQA;Initial Catalog=TQA;Persist Security Info=True;User ID=UserID;Password=Pwd"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
    <applicationSettings>
        <MyApps.Properties.Settings>
            <setting name="BasePath" serializeAs="String">
                <value>\\Results</value>
            </setting>
            <setting name="cPath" serializeAs="String">
                <value>C:\Controller</value>
            </setting>
            <setting name="ePath" serializeAs="String">
                <value>C:\Debug\E.exe</value>
            </setting>
            <setting name="fPath" serializeAs="String">
                <value>C:\Framework</value>
            </setting>
            <setting name="engineId" serializeAs="String">
                <value>1</value>
            </setting>
            <setting name="wPath" serializeAs="String">
                <value>C:\S5</value>
            </setting>
        </MyApps.Properties.Settings>
    </applicationSettings>
</configuration> 
```

我期待输出，例如 executablePath="D:\MyExe.exe"

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:58:48.280

您也可以尝试以下方法。利用 getAttribute - Cscript vbs。

```
Set objXML2 = CreateObject("Microsoft.XMLDOM")
objXML2.async = "false"
strdir="c:\config.xml"
If (Not objXML2.load(strdir)) Then
    wscript.echo "Unable to load file '" & strdir & "'. "
    WScript.Quit(1)
End If

Set colNodes = objXML2.selectNodes ("/configuration/applicationSettings/Eunner.Properties.Settings")
For Each objNode in colNodes
    wscript.echo objnode.getAttribute("name")& " : " & objNode.text
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T06:07:26.090

Finally I found my answer, can someone suggest better option if any? below is script that wrok for me

```
Set xmlDoc = CreateObject("Microsoft.XMLDOM")

xmlDoc.async = "False"
xmlDoc.Load ("C:\STEPRunRequest\STEPRunner.exe.config")
strQuery = "/configuration/applicationSettings/Eunner.Properties.Settings/*"

Set colItem = xmlDoc.SelectNodes(strQuery)
Set xmlElement = xmlDoc.DocumentElement.SelectSingleNode("/configuration/configSections[@connectionStrings]") '='" <SomeValue> & "'
Set queryNode = xmlDoc.SelectSingleNode(".//node()[@connectionString]")
MsgBox queryNode.Attributes(1).Text

For Each objItem In colItem
 If objItem.Attributes.Length > 0 Then
   MsgBox objItem.Attributes(0).Text & ": " & objItem.Text

 End If
Next 
```

# c# - 运行一个方法并计算 WebApp 的生命周期

> ID：10005474
> 
> 赞同：0
> 
> 时间：2012-04-04T05:37:09.307
> 
> 标签：c#, asp.net, lifetime

有一个应用程序可以从新闻机构的 rss 收集新闻，例如 Google Reader！。我想在一段时间内调用一种方法来更新我在数据库中的链接，并且它会持续到应用程序生命周期。时钟之类的东西！！！没有任何停顿

我知道一些关于线程的信息，但问题是：

**我在哪里可以调用我的更新方法？**

我有一些类，其中一些派生自其他类，我用来在我的项目中分层

我调用 Global.asax 中的方法：

```
protected void Application_Start(object sender, EventArgs e)
{
    Thread thread = new Thread(new ThreadStart(UpdateRss));
    thread.Start();
    Thread.Sleep(1000);
}

public void UpdateRss()
{
    while (true)
    {

        using (LinkService linkSrv = new LinkService())
        {
            linkSrv.UpdateLinksFromRSS();
        }
    }
} 
```

LinkService 中 UpdateLinksFromRSS 的定义为：

```
 public void UpdateLinksFromRSS()
{
    List<RssInfo> q;
    using (RssService RssSrv = new RssService())
    {
        q = RssSrv.GetRssInfoes();
    }
    foreach (var item in q)
    {
        AddLink(item);
    }
} 
```

老实说，问题是我在 BaseService 中有一个属性，定义如下：

```
 public static System.Web.Caching.Cache Cache
        {
            get { return HttpContext.Current.Cache; }
        } 
```

当我运行项目时！我从这一行得到一个错误：`return HttpContext.Current.Cache;`

# haskell - 在 Haskell 中使用命令行参数调度以纠正函数

> ID：10005478
> 
> 赞同：1
> 
> 时间：2012-04-04T05:37:50.147
> 
> 标签：haskell, io, monads

我正在用 Haskell 编写一个小命令行程序。我需要它根据命令行参数分派到正确的加密函数。我已经做到了这一点，但是我需要将剩余的参数作为参数传递给函数。我读了：

[http://learnyouahaskell.com/input-and-output](http://learnyouahaskell.com/input-and-output)

这让我走到了这一步：

```
import qualified CaesarCiphers
import qualified ExptCiphers

dispatch::[(String, String->IO ())]
dispatch = [("EEncipher", ExptCiphers.exptEncipherString)
            ("EDecipher", ExptCiphers.exptDecipherString)
            ("CEncipher", CaesarCiphers.caesarEncipherString)
            ("CDecipher", CaesarCiphers.caesarDecipherString)
            ("CBruteForce", CaesarCiphers.bruteForceCaesar)]

main = do
    (command:args) <- getArgs 
```

每个函数都接受一些我直到运行时才知道的参数。我如何将它们传递给一个函数，因为它们将被绑定在一个列表中？我只是手动抓取它们吗？像：

```
exampleFunction (args !! 1) (args !! 2) 
```

这似乎有点丑陋。是否有某种惯用的方法来做到这一点？那么错误检查呢？我的函数无法优雅地处理错误，例如以愚蠢的顺序传递参数。

此外，重要的是，调度中的每个函数都接受不同数量的参数，所以无论如何我都不能静态地执行此操作（如上所述）。这太糟糕了`unCurry command args`不是有效的 Haskell。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:13:13.523

一种方法是将您的函数包装在执行进一步命令行处理的函数中。例如

```
dispatch::[(String, [String]->IO ())]
dispatch = [("EEncipher", takesSingleArg ExptCiphers.exptEncipherString)
            ("EDecipher", takesSingleArg ExptCiphers.exptDecipherString)
            ("CEncipher", takesTwoArgs CaesarCiphers.caesarEncipherString)
            ("CDecipher", takesTwoArgs CaesarCiphers.caesarDecipherString)
            ("CBruteForce", takesSingleArg CaesarCiphers.bruteForceCaesar)]

-- a couple of wrapper functions:

takesSingleArg :: (String -> IO ()) -> [String] -> IO ()
takesSingleArg act [arg] = act arg
takesSingleArg _   _     = showUsageMessage

takesTwoArgs :: (String -> String -> IO ()) -> [String] -> IO ()
takesTwoArgs act [arg1, arg2] = act arg1 arg2
takesTwoArgs _   _            = showUsageMessage

-- put it all together

main = do
    (command:args) <- getArgs
    case lookup command dispatch of
         Just act -> act args
         Nothing  -> showUsageMessage 
```

您可以通过让包装函数的变体执行错误检查，根据需要将它们的（部分）参数转换为`Int`s / 自定义数据类型 / 等来扩展它。

正如 dbaupp 所指出的，我们在`getArgs`上面进行模式匹配的方式并不安全。更好的方法是

```
run :: [String] -> IO ()
run [] = showUsageMessage
run (command : args)
   = case lookup command dispatch of
          Just act -> act args
          Nothing  -> showUsageMessage

main = run =<< getArgs 
```

# .net - TextBox 的默认值是数据库中的列

> ID：10005481
> 
> 赞同：0
> 
> 时间：2012-04-04T05:37:59.283
> 
> 标签：.net, textbox, viewstate, formview

我不确定以前是否已经回答过，我找了大约半小时没有运气，所以如果已经回答过，对不起。

我试图让页面上的所有文本框都使用数据库中的默认值加载，因此用户可以编辑每个值并使用一个按钮进行保存，而无需清空每个文本框。

我添加了一个表单视图并将文本框放在 >ItemTemplate> 标记内，以便我可以添加 text='<%#Eval("DataBaseColumn")%>' 作为默认值，但问题是，它没有有页面加载的值。

有没有办法让我用视图状态来做这件事？

任何帮助都会很棒。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:49:31.370

如果我理解正确，您正在尝试从数据库中设置 asp.net 表单数据。您已经完成了一半——您已经初始化并设置了视图。接下来要做的是填充视图将要使用的数据。这是在网页表单代码隐藏中的某些方法中完成的，例如 Page_Load 使用以下内容：

```
ViewState["SomeKey"] = SomeValue; 
```

然后，您可以使用“SomeKey”键获取此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:52:16.937

请让你的gridview处于编辑模式

```
protected void Gridview1_ItemCreated(object sender, EventArgs e)
    {
        FormView fv = sender as FormView ;
        if (fv.CurrentMode == FormViewMode.Edit)
        {

        }
    } 
```

你会得到你的默认值加载他们......干杯！

# iphone - 使用 NSScanner 扫描并包含分隔符？

> ID：10005485
> 
> 赞同：1
> 
> 时间：2012-04-04T05:38:25.430
> 
> 标签：iphone

我有一个字符串，它基本上是一个字符串，在某些区域有额外的空格，以便在显示字符串时进行格式化。所以字符串看起来像

```
6:00 PM 
6:00 PM  4:00 AM
6:00 PM  4:00 AM 12:00 PM
6:00 pm  4:00 AM 12:00 PM  1:00 AM 
```

我想我可以使用 NSScanner 通过 @"M" 解析字符串，因为有时时间之间有两个空格，有时是一个空格，等等。所以我所做的是：

```
 NSScanner *theScanner = [NSScanner scannerWithString:theString];
    NSString *separatorString = @"M";
    NSString *container;
    NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:_lastIndexPath.row];

    while ([theScanner isAtEnd] == NO) {
        [theScanner scanUpToString:separatorString intoString:&container];
        [array addObject:container];

        [theScanner setScanLocation:[theScanner scanLocation] + 1];
    } 
```

问题是我没有在我的容器对象中获得 M 因为它扫描到但它不包含分隔符字符串。我应该在添加之前手动创建一个新的 NSString 吗

```
[array addObject:[NSString stringWithFormat:%@M", container]]; 
```

或者有没有更好的方法在这种情况下使用 NSScanner？我以前真的没有使用过 NSScanner。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:12:08.510

那会奏效。但是当`M`遇到最后一个并且您将扫描仪位置设置为 +1 时，它会超出范围！？小心那个。

您是否考虑过使用`NSString`实例方法？

`- (NSArray *)componentsSeparatedByString:(NSString *)separator`和

`- (NSArray *)componentsSeparatedByCharactersInSet:(NSCharacterSet *)separator`

另一种选择是 - 您可以将字符串分成组件，用单个空格分隔，将这些组件放入数组中。在不止一个空格的情况下，某些组件的开头或结尾会有空格。你可以修剪那些。

例子：

```
NSString *list = @"Norman, Stanley, Fletcher";
NSArray *listItems = [list componentsSeparatedByString:@", "];
produces an array { @"Norman", @"Stanley", @"Fletcher" }. 
```

有关这些方法的详细说明，请参阅[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# objective-c - NSTextView：滚动时内容消失，鼠标悬停时显示

> ID：10005494
> 
> 赞同：0
> 
> 时间：2012-04-04T05:39:08.673
> 
> 标签：objective-c, cocoa, scroll, nstextview, nsscrollview

所以这是我的问题：

我有一个`NSTextView`包含很多内容的 an （如果重要的话，黑色背景上的白色前景），驻留在工作表中（由 触发`beginSheet:modalForWindow:`）。

问题是，当我滚动时，内容似乎被隐藏了。

但是，当我将鼠标悬停在滚动视图/文本视图上时，内容再次出现。

那么，那是什么？为什么会这样？我怎样才能避免这种奇怪的行为？

* * *

**截屏：** [http ://www.screencast.com/t/Sqrk2mdB](http://www.screencast.com/t/Sqrk2mdB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:32:55.950

我看了你关于你的问题的截屏视频，它看起来与我不久前遇到的一个问题非常相似。我有一个方法可以启动一个工作表，就像这样（假设存在某些值）：

```
- (IBAction)beginSheet:(id)sender
{
    [[NSApplication sharedApplication] beginSheet:sheet 
                                   modalForWindow:[self mainWindow] 
                                    modalDelegate:self 
                                   didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:) 
                                      contextInfo:self];
} 
```

该工作表不包含像您这样的文本视图，而是一个表格视图。有时 table view 会完美地执行，但其他时候，它的封闭滚动视图会不完整地绘制它的滚动条，并且在尝试滚动时会有很大的空白区域。

我设法确定只有在`-beginSheet:`辅助线程上调用时才会发生这种不稳定的行为。

为了解决这个问题，我采用了这种方法：

```
- (void)beginSheetOnMainThread:(id)sender
{
    [[NSApplication sharedApplication] beginSheet:sheet 
                                   modalForWindow:[self mainWindow] 
                                    modalDelegate:self 
                                   didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:) 
                                      contextInfo:self];
}

- (IBAction)beginSheet:(id)sender
{
    [self performSelectorOnMainThread:@selector(beginSheetOnMainThread:) withObject:sender waitUntilDone:YES];
} 
```

并且表格视图的行为一致且正确。

（我随后了解到，将 dispatch_async() 方法与主队列和块一起使用也非常有效。）

我为轶事证据道歉，知道这仍然可能无法解决您的特定问题。但同样，看过你的截屏后，我发现这些症状很熟悉。

# android - adb logcat 挂起并显示“等待设备”消息

> ID：10005509
> 
> 赞同：33
> 
> 时间：2012-04-04T05:41:23.243
> 
> 标签：android, adb, android-logcat, cts

当我`adb devices`在终端上输入命令时，它显示设备已连接

> 附加设备列表
> 
> 0123456789ABCDEF装置

但是当我输入`adb logcat`命令时，它会挂起以下消息

> 等待设备

谁能告诉我这背后的问题是什么？我在 cts 上测试设备。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-04T06:43:30.927

我不太确定这是否适合您，但请您尝试以下步骤：

```
# Kill and restart      
$ adb kill-server      
$ adb start-server     
 daemon not running. starting it now *      
 daemon started successfully *         

# Device appears, but is listed as offline

$ adb devices      
$ adb logcat 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T16:48:06.613

我也遇到过类似的问题，我想我通过在设置的开发人员选项中打开 USB 调试选项来解决它。

重复上面的以下步骤，它应该工作！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-01T05:10:21.413

这是解决此问题的另一种潜在方法-过去，上述解决方案将起作用，但就我而言，这一次是解决此问题的方法：

1.  将设备插入 USB
2.  设置 -> 开发人员选项
3.  撤销 USB 调试授权
4.  拔下设备
5.  重复步骤 1
6.  授权设备
7.  重复步骤 4&5

`adb devices` 现在应该显示设备

`adb logcat` 现在应该从设备输出日志

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T18:24:32.040

我在 Ubuntu 12.04 上遇到了同样的问题。谢天谢地，MickeyMicro 有适合我的解决方案：

1.  运行命令：gksudo gedit /etc/udev/rules.d/51-android.rules

2.  将以下行添加到空白文件

SUBSYSTEM=="usb", ATTR{idVendor}="2080", MODE="0666" （我在 12.04 用过这个）

SUBSYSTEM=="usb", SYSFS{idVendor}="2080", MODE="0666"（另一个推荐用于 10.04）

1.  保存并关闭 gedit。

2.  运行命令：sudo chmod a+rx /etc/udev/rules.d/51-android.rules

3.  重新启动系统。

4.  运行命令： sudo sh -c "mkdir -p ~/.android; echo 0x2080 > ~/.android/adb_usb.ini; adb kill-server; adb devices"

5.  验证您是否有权访问该设备。adb devices 应该返回正常响应，而不是“????????????没有权限”消息。

[http://forum.cyanogenmod.com/topic/23163-need-help-for-adb-connection-on-ubuntu/](http://forum.cyanogenmod.com/topic/23163-need-help-for-adb-connection-on-ubuntu/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-15T20:28:37.397

我今天得到了 Nexus 标签，我必须在 Build Number 上转到**Settings** -> **About Tablet** -> ***（点击 7 或 8 次）***。

然后“**开发人员选项**”出现在“关于平板电脑”上方。

接下来在开发人员选项中，启用**USB 调试**后，我能够获取日志

对于 Mac 用户：

cd /Applications/Android/sdk/platform-tools

./ **adb logcat**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-14T15:24:29.110

当我在 Windows 上体验到这种无限的“等待设备”时，我只是忘记在设备的开发人员选项中启用 USB 调试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-04T06:03:11.697

您使用的是什么操作系统？这可能是各种不同的原因。你确定你只运行了模拟器或连接了一个设备吗？如果是这样，您可以使用 -d 或 -e 标志来指导您的 adb 命令。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T11:47:04.127

我在 Galaxy S3 上遇到了类似的问题，adb 在 Ubuntu 11.10 操作系统上运行。在我的情况下，如果我重新连接设备（拔下 USB 连接并重新连接），日志猫开始工作。这只发生在我第一次打开设备后连接设备时。一旦 logcat 开始工作，它就会继续顺利工作，无需重新连接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-23T12:28:41.193

这发生在我的 OS X 山狮身上。要修复它，我必须
打开活动监视器，过滤所有名为“adb”的进程并强制退出它们（我有 3 个正在运行）。然后重新连接设备，一切正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-12T09:25:48.757

在我的三星 Galaxy S4 上，我遇到了同样的问题，但 10-20 秒后，手机上会弹出一个对话框，我必须接受调试请求

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-04T23:13:05.537

我有一个类似的问题，但出于不同的原因。我的问题来自在 android 上编程 usb 附件，它在附件模式下会更改 vid/pid。对我来说有效的解决方案如下：

1.  连接手机
2.  运行usb主机端附件模式命令（示例网站：[http](http://android.serverbox.ch/?p=262) ://android.serverbox.ch/?p=262 ）
3.  手机应该在附件模式下重新连接（确保 PID 有 adb：0x2D01）
4.  adb 杀死服务器
5.  sudo adb start-server （这导致手机重新请求授权）
6.  adb logcat（就我而言，我想查看日志，现在可以在附件模式下使用）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-15T20:03:56.083

就我而言，我使用的是旧版本`adb`，请确保您拥有最新版本的`adb`. 你可以[在这里](https://developer.android.com/studio/releases/platform-tools.html)下载，解压并直接在文件夹中运行`./adb`。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-01T14:31:14.090

请在手机上进入开发者选项，点击“撤销USB调试授权”

再次启用它并尝试获取日志。这基本上是在等待设备连接。确保也从设备授权 USB 访问。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-10T09:04:42.950

在我的情况下，只需将 USB 设置的选项从传输文件更改为 MIDI

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-04T10:13:27.410

1.  在开发者选项中启用 USB 调试
2.  在 USB 首选项中设置文件传输器

为我做了伎俩！也将 adb 作为 sudo 运行可能会有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-22T11:08:52.493

在我的例子中，我使用的是一个**连接到以太网**的运行 Android 的设备，我做了这些步骤来解决这个问题。在此之前，请确保 OTG 已打开。

1.  `$ adb kill-server`
2.  `$ adb connect [your device IP]`
3.  我在设备上出现的弹出窗口中接受了连接请求
4.  `$ adb devices`：检查设备是否已连接
5.  `$ adb logcat`

# opencv - 将 cv::Mat 转换为 CvArr*

> ID：10005529
> 
> 赞同：2
> 
> 时间：2012-04-04T05:43:04.037
> 
> 标签：opencv

我正在使用转置函数 cvTranspose 来转置矩阵。代码如下：

```
CvMat matrix1, matrixTr;
double a[] = { 1,  2,  3,  4,
               5,  6,  7,  8,
               9, 10, 11, 12 };

CvMat matrix1=cvMat(3, 4, CV_64FC1, a);
cvTranspose(matrix1,matrixTr); 
```

这就是错误出现的地方：无法转换为`'CvMat {aka CvMat}'`for`'constCvArr* {aka const void*}'`参数`'1'``'void cvTranspose(const CvArr*, CvArr)'`

我对编程很陌生...请让我知道您的想法和建议...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:37:58.750

cvTranspose 需要 2 个指向 CvArr 的指针，CvMat 是从 CvArr 派生的，因此您应该执行以下操作：

```
cvTranspose(&matrix1, &matrixTr); 
```

# python - 使用 Numpy for Python 创建 cx_Freeze exe

> ID：10005533
> 
> 赞同：7
> 
> 时间：2012-04-04T05:43:14.510
> 
> 标签：python, numpy, cx-freeze

我正在尝试使用 cx_Freeze 创建一个基本的 exe。它适用于没有 numpy 但我无法使用 numpy 正确制作的 .py 程序。

*有想法该怎么解决这个吗？我需要在 setup.py 中包含什么内容吗？

当我去运行exe它说：

```
 c:\Python32\Scripts\dist>Assignment4_5.exe
           Traceback (most recent call last):
     File "C:\Python32\lib\site-packages\cx_Freeze\initscripts\Console3.py", line 2
     7, in <module>
     exec(code, m.__dict__)
     File "c:\Python32\Assignment4_5.py", line 6, in <module>
     import numpy as np
     File "C:\Python32\lib\site-packages\numpy\__init__.py", line 137, in <module>
     from . import add_newdocs
     File "C:\Python32\lib\site-packages\numpy\add_newdocs.py", line 9, in <module>

     from numpy.lib import add_newdoc
     File "C:\Python32\lib\site-packages\numpy\lib\__init__.py", line 17, in <modul
     e>
    from .npyio import *
    File "C:\Python32\lib\site-packages\numpy\lib\npyio.py", line 6, in <module>
    from . import format
    ImportError: cannot import name format

   c:\Python32\Scripts\dist> 
```

安装程序.py：

```
 from cx_Freeze import setup, Executable

   includeDependencies = []

   setup(
        name = "Assignment4_5PythonExe",
        version = "0.1",
        description = "Sort Methods",
        executables = [Executable("Assignment4_5.py")]
        ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:10:29.347

这是 cx_Freeze 中的一个错误 - 它不会自动检测到它应该复制模块`numpy.lib.format`。它已经在[开发版本](https://bitbucket.org/anthony_tuininga/cx_freeze)中修复，所以如果你有能力尝试它，它应该可以工作。

否则，您需要指定`numpy.lib.format`需要包含在您的`setup.py`. 该行将如下所示：

```
options = {"build_exe": {"packages": ["numpy.lib.format"]}}, 
```

另请参阅[文档](http://cx_freeze.readthedocs.org/en/latest/distutils.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-07T14:32:54.903

Numpy 似乎对 cx_Freeze 有点困惑，因此您需要明确声明它。[如文档](http://cx-freeze.readthedocs.io/en/latest/distutils.html)中所引用

这是您的解决方案：

```
 from cx_Freeze import setup, Executable

   build_exe_options = {"packages": ["numpy"]}

   setup(
        name = "Assignment4_5PythonExe",
        version = "0.1",
        description = "Sort Methods",
        options = {"build_exe": build_exe_options},
        executables = [Executable("Assignment4_5.py")]
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T14:01:08.407

我最近使用 cx_freeze 6.1 和 Python 3.5.4 遇到了这个问题。为了解决我的运行时问题，我不得不在运行时将 numpy lib 路径添加到系统路径中。如果它可以帮助任何人，这是相关的代码片段：

```
if __name__ == '__main__':
# The frozen app needs the numpy path added to it's file.
try:
    this_file = __file__
except NameError:
    this_file = sys.argv[0]
    sys.path.insert(0, str(Path(this_file).absolute().parent / "lib" / "numpy")) 
```

# data-structures - 面试题：在O(1)中设置所有值的数据结构

> ID：10005544
> 
> 赞同：61
> 
> 时间：2012-04-04T05:44:43.483
> 
> 标签：data-structures

我在网上遇到了以下面试问题。

**描述 getValue(int index)、setValue(int index, int value) 和 setAllValues(int value) 都是 O(1) 的数据结构。**

尽管数组足以在 O(1) 中执行第一个和第二个操作，但是对于第三个（setAllValues）可以提出什么建议？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-04T06:03:16.263

`array`一个元组怎么样`{timestamp, value}`，还有一个`{timestamp, value}`叫做`all`. 由于您只关心插入的相对时间，因此您可以`id`对时间戳的值使用单调递增：

```
type Entry {
  int timestamp, 
  int value
}

type structure {
    int     id
    Entry   all
    Entry[] array
} 
```

将所有字段初始化为 0。那么以下内容应该适合您：

*   设置值（索引 i，值 v）：

    ```
    array[i] = {id++, value} 
    ```

*   值获取值（索引 i）

    ```
    if(all.timestamp > array[i].timestamp) return all.value
    else return array[i].value 
    ```

*   全部设置（值 v）

    ```
    all = {id++, value} 
    ```

这种方法的一个问题是最终您将用完时间戳的 id，并且可能会回绕。如果您选择 64 位值来存储时间戳，那么这会在此发生之前为您提供 18,446,744,073,709,551,616 次插入或 setAlls。根据数据结构的预期用途，O(n) 清理阶段可能是合适的，或者您可以只抛出异常。

另一个可能需要考虑的问题是多线程。三个明显的问题：

*   如果`id++`不是原子的并且两个线程同时获得了一个新线程`id`，那么您可以获得两个具有相同 id 的条目。
*   如果 id 的增量和创建的元组的分配不是原子的（它们可能不是）并且有两个同时插入，那么您可能会得到一个较旧的 id 获胜的竞争条件。
*   如果元组的分配不是原子的，并且与`insert()`a 同时存在，`get()`那么您可能最终会处于您在数组中拥有发言权的位置`{new_id, old_value}`，从而导致返回错误的值。

如果其中任何一个是问题，最简单的解决方案是在文档中放入“非线程安全”（作弊）。或者，如果您不能以您选择的语言原子地实现这些方法，则需要在它们周围放置某种同步锁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-17T07:17:37.597

我在一次技术面试中得到了同样的问题。
这是我完整的即用型 Java 实现，包括测试用例。

关键思想是将 的值保留`setAll()`在特殊变量（例如`joker`）中，然后以适当的方式跟踪该值的变化。

为了保持代码干净，一些访问修饰符已被废除。

***节点***类：

```
import java.time.LocalDate;

class Node {

    int value;
    LocalDate jokerSetTime;

    Node(int val, LocalDate jokSetTime) {
        value = val;
        jokerSetTime = jokSetTime;
    }
} 
```

***DS***类：

```
class DS {

    Node[] arr;

    DS(int len) {
        arr = new Node[len];
    }
} 
```

***数据结构***类：

```
import java.time.LocalDate;

class DataStructure {

    private boolean isJokerChanged;
    private Integer joker;
    private LocalDate jokerSetTime;
    private DS myDS;

    DataStructure(int len) {
        myDS = new DS(len);
    }

    Integer get(int i) {

        Integer result;

        if (myDS.arr.length < i) {
            return null;
        }

        // setAll() has been just called
        if (isJokerChanged) {
            return joker;
        }

        if (myDS.arr[i] == null) {

            // setAll() has been previously called
            if (joker != null) {
                result = joker;
            } else {
                result = null;

            }

        } else if (myDS.arr[i].jokerSetTime == jokerSetTime) {
            // cell value has been overridden after setAll() call
            result = myDS.arr[i].value;
        } else {
            result = joker;
        }

        return result;
    }

    void setAll(int val) {
        isJokerChanged = true;
        joker = val;
        jokerSetTime = LocalDate.now();
    }

    void set(int i, int val) {
        isJokerChanged = false;
        myDS.arr[i] = new Node(val, jokerSetTime);
    }
} 
```

***主***类：

```
class Main {

    public static void main(String[] args) {

        DataStructure ds = new DataStructure(100);

        Integer res;

        res = ds.get(3);

        ds.set(3, 10);

        res = ds.get(3);

        ds.setAll(6);

        res = ds.get(3);

        res = ds.get(15);

        ds.set(4, 7);

        res = ds.get(4);

        res = ds.get(3);

        ds.setAll(6);

        ds.set(8, 2);

        res = ds.get(3);
    }
} 
```

**更新：**
代码已更新。之前的实现没有考虑`setAll()`连续两次调用相同值，后面跟着`set(x)`,的情况`get(y)`，例如：`setAll(100)`, `set(3, 1)`, `setAll(100)`, `set(5, 3)`, `get(3)`。

添加了时间戳方法的使用，以允许区分`setAll()`具有相同值的不同调用。

PS 这个实现不是线程安全的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T06:06:02.583

指向单个公共值的指针数组怎么样？设置值，所有引用都将指向 O(1) 中的单个更改值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-23T07:24:33.310

我最近在一次采访中被问到这个问题。我想出了一个哈希表实现。它将解决时间戳值用完的问题，但需要实现线程安全功能（可能使用延迟初始化技术）

假设在我们的类中，我们有一个私有变量**_defaultValue**来保存默认值，我们还有一个私有哈希表或字典**_hashtable**。 **SetAllValues**可以将**_defaultValue**设置为等于传递的值，并将**_hashtable**初始化/设置为新的哈希表，并丢弃对旧哈希表的任何引用。如果键（或索引）已存在于**_hashtable中，则****SetValue**应该只向**_hashtable**添加一个新值或更新该值。**GetValue**应该检查键（或索引）是否存在于**_hashtable**中，然后返回它，否则返回存储在********_defaultValue**。******

 ****这是我在 StackOverflow 上的第一个答案。我在编写代码时有点懒惰。可能会很快编辑答案。

面试官对这个解决方案点头同意，但坚持不使用哈希表来实现它。我想，他是在要求我给出与蒂莫西回答类似的方法。那时我无法得到它:(。无论如何，干杯！

编辑：发布代码（在 C# 中）

```
class MyDataStruct
{
    private int _defaultValue;
    private Dictionary<int,int> _hashtable;

    public MyDataStruct()
    {
        _defaultValue = 0; // initialize default with some value
        _hashtable = new Dictionary<int, int>();
    }

    public void SetAllValues(int val)
    {
        _defaultValue = val;
        _hashtable = new Dictionary<int, int>();
    }

    public void SetValue(int index, int val)
    {
        if (_hashtable.ContainsKey(index))
        {
            _hashtable.Add(index, val);
        }
        else
        {
            _hashtable[index] = val;
        }
    }

    public int GetValue(int index)
    {
        if (_hashtable.ContainsKey(index))
        {
            return _hashtable[index];
        }
        else
        {
            return _defaultValue;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-23T08:11:54.630

我们可以有一个变量 V，它存储一个 int 和一个包含元组的数组作为 {Value, id}..

以及一个全局 int 变量 G（其作用类似于 SQL 中的标识，并且每当执行任何 set 或 setAll 操作时，其值都会增加 1）

初始所有 Ids 和 V 值将默认为 null ..

```
so V = null All Tuple = {null, null}
set(index i, val v) -> G = G+1, arr[i].Val = v, arr[i].Id = G

get(index i) -> if V.Id > arr[i].Id return V.Val else return arr[i]

set-all(val v) -> G= G+1, V.Id= G, V.Val = v 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-06T01:43:04.420

所有现有答案都使用在每次`setVal`操作时递增的时间戳。这不是必需的。事实上，只需要在 上增加时间戳`setAll`。有人提出的另一个问题是算术溢出。这可以通过更新每个单元格上的单个单元格`setAll`并仔细执行时间比较来处理，而不会打破恒定的时间界限。

### 这个怎么运作

基本概念与其他答案基本相似，但有所不同。

他们的工作：分别存储用于最后一次`setAll`操作的值，并跟踪执行该操作的时间。每次他们执行 a`setVal`时，他们将当前时间与给定值一起存储在数组中。每次他们执行 a`getVal`时，他们都会将给定位置的时间与上次`setAll`发生的时间进行比较，然后选择该位置的`setAll`值或取决于哪个值更大的值。

为什么这可能是一个问题：假设当前时间溢出并且`setAll`不久之后发生了操作。看起来好像大多数存储的数组值都比值新`setAll`，但实际上它们更旧。

解决方案：停止想象我们正在跟踪自数据结构初始化以来经过的总时间。想象一个带有“秒针”的巨型时钟，它不是绕圈 60 圈，而是绕圈圈 2^n 圈。秒针的位置代表最近一次`setAll`操作的时间。每个`setVal`操作都将这个时间与一个值一起存储。因此，如果我们`setAll`在“时钟”为 45 时执行 a，然后`setVal`对不同的元素执行六次操作，则`setAll`所有六个位置的时间和时间都将相同。我们希望保持以下不变量：

> `setAll`当且仅当该元素的设置`setVal`比上一次操作更新时，给定元素位置的时间才等于时间`setAll`。

显然，上述过程自动确保如果元素是最近设置的，则其时间将等于`setAll`时间。挑战在于使相反的含义也成立。

待续 ....

### 编码

我用 Haskell 写了这个，因为这是我最了解的语言，但它并不是最适合这项工作的语言。

```
{-# LANGUAGE BangPatterns #-}
module RepArr where

import Control.Monad.Primitive
import Data.Primitive.MutVar
import qualified Data.Vector.Mutable as V
import Data.Vector.Mutable (MVector)
import Control.Applicative
import Prelude hiding (replicate)
import Control.Monad.ST
import Data.Word

-- The Int in the MutVar is the refresh pointer
data RepArr s a = RepArr (MutVar s (Word, a, Int)) (MVector s (Word,a))

-- Create a fancy array of a given length, initially filled with a given value
replicate :: (PrimMonad m, Applicative m) => Int -> a -> m (RepArr (PrimState m) a)
replicate n a = RepArr <$> newMutVar (0,a,0) <*> V.replicate n (0,a)

getVal :: PrimMonad m => RepArr (PrimState m) a -> Int -> m a
getVal (RepArr allv vec) n = do
  (vectime, vecval) <- V.read vec n
  (alltime, allval, _) <- readMutVar allv
  if (fromIntegral (alltime - vectime) :: Int) > 0
    then return allval
    else return vecval

setVal :: PrimMonad m => RepArr (PrimState m) a -> Int -> a -> m ()
setVal (RepArr allv vec) i v = do
  (!alltime, _, _) <- readMutVar allv
  V.write vec i (alltime, v)

setAll :: PrimMonad m => RepArr (PrimState m) a -> a -> m ()
setAll r@(RepArr allv vec) v = do
  (oldt, _, oldc) <- readMutVar allv
  getVal r oldc >>= setVal r oldc
  let !newc = case oldc+1 of
        op1 | op1 == V.length vec -> 0
            | otherwise -> op1
  let !newt = oldt+1
  writeMutVar allv (newt, v, newc) 
```

为了避免潜在的（罕见的）垃圾收集暂停，实际上有必要拆箱`Int`和`Word`值，以及使用拆箱的向量而不是多态的向量，但我并没有真正的心情，这是一项相当机械的任务。

这是 C 中的一个版本（完全未经测试）：

```
#include <malloc.h>

struct Pair {
  unsigned long time;
  void* val;
};

struct RepArr {
  unsigned long allT;
  void* allV;
  long count;
  long length;
  struct Pair vec[];
};

struct RepArr *replicate (long n, void* val) {
  struct RepArr *q = malloc (sizeof (struct RepArr)+n*sizeof (struct Pair));
  q->allT = 1;
  q->allV = val;
  q->count = 0;
  q->length = n;

  int i;
  for (i=0; i<n; i++) {
    struct Pair foo = {0,val};
    q->vec[i] = foo;
  }
  return q;
}

void* getVal (struct RepArr *q, long i) {
  if ((long)(q->vec[i].time - q->allT) < 0)
    return q->allV;
  else
    return q->vec[i].val;
}

void setVal (struct RepArr *q, long i, void* val) {
  q->vec[i].time = q->allT;
  q->vec[i].val = val;
}

void setAll (struct RepArr *q, void* val) {
  setVal (q, q->count, getVal (q, q->count));
  q->allV = val;
  q->allT++;
  q->count++;
  if (q->count == q->length)
    q->count = 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-17T21:25:05.327

```
/* 
```

在我写这篇文章的时候，这个页面上的所有解决方案都会使存储数组所需的空间量增加一倍（或更多）。以下解决方案将浪费的空间量从 Ω(n) 减少到 θ(n/w)，其中 w 是计算机“字”中的位数。在我的机器上，这是 64。

此答案中的此散文位于 C 注释中，因此您可以逐字复制并粘贴此答案并使用 C 编译器对其进行编译。

```
*/

#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>
#include <stdlib.h>

/* 
```

问题是支持在 O(1) 时间内读取和写入数组中的值，以及在 O(1) 时间内一次写入数组中的所有值的批量写入。据我所知，这可以通过 Aho、Hopcroft 和 Ullman 发明的技术实现。由于[Gonzalo Navarro，我将介绍一个版本，“小空间中的恒定时间数组初始化”](https://www.dcc.uchile.cl/~gnavarro/ps/sccc12.pdf)。

这个想法是将三个元数据数组与数据数组一起保留。我们还保留了两个整数：`unset`，这是在批量写入操作中使用的最后一个值，以及`size`，自上次批量写入以来已设置的值的数量的近似值。在任何时候，自上次批量写入以来写入的不同值的数量都在`size`w *之间`size`。

三个元数据数组描述了有关数据数组中 w 值块的信息。他们是：

*   `nth`: nth[i] 是自上次批量写入以来要写入的第 i 个唯一块

*   `inverse_nth`: inverse_nth[i] 是数组的第 i 个块的写入顺序，在最后一次批量写入时从 0 开始计数。

*   `bitset``bitset[i]`:当编号为 64*i + j 的数组单元自上次批量写入后已写入时，第 j 位为 1。

`bitset[i]`如果不是集合 { , , ... , }的成员，`inverse_nth[i]`则允许无效。换句话说， 和是有效的当且仅当 和。`i``nth[0]``nth[1]``nth[size-1]``inverse_nth[i]``bitset[i]``inverse_nth[i] < size``nth[inverse_nth[i]] == i`

我没有存储三个长度相同的单独数组，而是选择存储一个`is_set`包含三个字段的数组。

```
*/

typedef struct {
  int nth_;
  int inverse_nth_;
  uint64_t bitset_;
} IsSetCell;

typedef struct {
  int unset_;
  int size_;
  IsSetCell is_set_[];
} IsSetArray;

typedef struct {
  IsSetArray * metadata_;
  int payload_[];
} ResettableArray;

/* 
```

要构造一个数组，我们需要一个默认值，以便在读取一个从未写入过的值时返回。

```
*/

ResettableArray * ConstructResettableArray(int n, int unset) {
  ResettableArray* result =
      malloc(offsetof(ResettableArray, payload_) + n * sizeof(int));
  if (!result) return NULL;
  n = (n + 63) / 64;
  result->metadata_ =
      malloc(offsetof(IsSetArray, is_set_) + n * sizeof(IsSetCell));
  if (!result->metadata_) {
    free(result);
    return NULL;
  }
  result->metadata_->size_ = 0;
  result->metadata_->unset_ = unset;
  return result;
}

void DestructResettableArray(ResettableArray * a) {
  if (a) free(a->metadata_);
  free(a);
}

/* 
```

该算法的大部分内容是写入和读取元数据。在 定义`IsSet()`和`Set()`定义之后（如下），读取和写入数组很简单。

```
*/

bool IsSet(const IsSetArray * a, int i);
void Set(IsSetArray * a, int i);

int GetValue(const ResettableArray * a, int i) {
  if (!IsSet(a->metadata_, i)) return a->metadata_->unset_;
  return a->payload_[i];
}

void SetValue(ResettableArray * a, int i, int v) {
  a->payload_[i] = v;
  Set(a->metadata_, i);
}

void SetAllValues(ResettableArray * a, int v) {
  a->metadata_->unset_ = v;
}

/* 
```

读写的复杂部分是 和 之间的双向`inverse_nth`关系`nth`。如果它们在位置 i ( ) 处相互指向，`is_set[is_set[i].inverse_nth].nth == i`则位置 i 包含在最后一次批量写入之后写入的有效数据，只要`is_set[i].inverse_nth < size`.

```
*/

uint64_t OneBit(int i) {
  return UINT64_C(1) << i;
}

bool IsSet(const IsSetArray * a, int i) {
  const int cell = i/64, offset = i & 63;
  const int inverse_nth = a->is_set_[cell].inverse_nth_;
  return inverse_nth < a->size_ && a->is_set_[inverse_nth].nth_ == cell &&
         a->is_set_[cell].bitset_ & OneBit(offset);
}

void Set(IsSetArray * a, int i) {
  const int cell = i/64, offset = i & 63;
  const int inverse_nth = a->is_set_[cell].inverse_nth_;
  if (inverse_nth >= a->size_ || a->is_set_[inverse_nth].nth_ != cell) {
    a->is_set_[cell].inverse_nth_ = a->size_;
    a->is_set_[cell].bitset_ = 0;
    a->is_set_[a->size_].nth_ = cell;
    ++a->size_;
  }
  a->is_set_[cell].bitset_ |= OneBit(offset);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-15T09:08:23.237

C#中的正确解决方案：

```
public sealed class SpecialDictionary<T, V>
{
    private Dictionary<T, Tuple<DateTime, V>> innerData;
    private Tuple<DateTime, V> setAllValue;
    private DateTime prevTime;

    public SpecialDictionary()
    {
        innerData = new Dictionary<T, Tuple<DateTime, V>>();
    }
    public void Set(T key, V value) => innerData[key] = new Tuple<DateTime, V>(GetTime(), value);
    public void SetAll(V value) => setAllValue = new Tuple<DateTime, V>(GetTime(), value);
    public V Get(T key)
    {
        Tuple<DateTime, V> tmpValue = innerData[key];
        if (setAllValue?.Item1 > tmpValue.Item1)
        {
            return setAllValue.Item2;
        }
        else
        {
            return tmpValue.Item2;
        }
    }
    private DateTime GetTime()
    {
        if (prevTime == null)
        {
            prevTime = DateTime.Now;

        }
        else
        {
            if (prevTime == DateTime.Now)
            {
                Thread.Sleep(1);
            }
            prevTime = DateTime.Now;
        }
        return prevTime;
    }
} 
```

和测试：

```
static void Main(string[] args)
{
    SpecialDictionary<string, int> dict = new SpecialDictionary<string, int>();
    dict.Set("testA", 1);
    dict.Set("testB", 2);
    dict.Set("testC", 3);
    Console.WriteLine(dict.Get("testC"));
    dict.SetAll(4);
    dict.Set("testE", 5);
    Console.WriteLine(dict.Get("testC"));
    Console.WriteLine(dict.Get("testE"));
    Console.ReadKey();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-11T09:57:34.993

Python 示例

```
class d:
    def __init__(self, l):
        self.len = l
        self.g_p = [i for i in range(self.len)]
        self.g_v = [0 for i in range(self.len)]
        self.g_s = self.len - 1
        self.g_c = 0  

    def getVal(self, i):
        if (i < 0 or i >= self.len):
            return

        if (self.g_p[i] <= self.g_s):
            return self.g_v[self.g_p[i]]

        return self.g_c

    def setVal(self, i, v):
        if (i < 0 or i >= self.len):
            return

        if (self.g_p[i] > self.g_s):
            self.g_s += 1

            self.g_p[self.g_s], self.g_p[i] = self.g_p[i], self.g_p[self.g_s]

        self.g_v[self.g_p[i]] = v

    def setAll(self, v):
        self.g_c = v
        self.g_s = -1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-05T13:01:16.337

关于蒂莫西·琼斯的回答：

> 这种方法的一个问题是最终您将用完时间戳的 id，并且可能会回绕。如果您选择 64 位值来存储时间戳，那么这会在此发生之前为您提供 18,446,744,073,709,551,616 次插入或 setAlls。根据数据结构的预期用途，O(n) 清理阶段可能是合适的，或者您可以只抛出异常。

这正是使该解决方案也成为 O(n) 而不是 O(1) 的最坏情况。这种结构虽然节省了很多潜在的 O(n) 插入操作，但仍然处于 O(n) 效率。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-10T14:05:09.803

这是我在 Java 中的答案（我不完全确定语法）。为了避免 changeT 和 defChangeT 相等的情况，我做了 set-functions 同步。

```
Struct ValueSt{ 
  int value;
  Timestamp changeT;
}

Class MyDS{
  int default;
  Timestamp defChangeT;
  HashMap map;

  public MyDS(){
    map = new HashMap<int, ValueSt>();
  }

  public synchronized void mySet(Int key, int value){
    ValueSt vs = new ValueSt(value, Timestamp(System.current));
    map.put(key, vs);
  }

  public synchronized void setAll(int value){
    default = value;
    defChangeT = Timestamp(System.current));
  }

  public int myGet(int key){
    ValueSt vs = map.get(key);
    if(vs != null){
      if(vs.changeT > defChangeT)
        return vs.value;
      else
        return default;
    }
    return null;
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-21T04:58:04.600

我最近遇到了类似的问题。我使用的数据结构是hashmap和hashset的组合。

1) setValue(String key, String value) 在这个方法中，我直接**在 hashmap 中插入了对**。我们还将**键插入哈希集中**

2) setAllValue(String Value) 在这个方法中，我**重新初始化了 hashmap**。这会**删除所有对**，然后**添加一个键，比如 <"god"> 和 value**。**hashset 具有跨所有版本的 hashmap 维护的键**集。

3) getValue(String key) 在这个方法中，我维护了多个 if/else 条件来返回值。

1.  如果键存在于哈希图中，我检查条件**，然后返回该键的值**。如果尚不存在“上帝”键并且每个键都保留其原始值，或者存在“上帝”键但该键的值已被覆盖，则可能会发生这种情况。
2.  一个 else/if 条件来检查**该键是否不存在于哈希集中，然后返回 null**，因为该键从未存在于哈希映射或映射的任何先前实例中。
3.  最后是一个**else 条件，其中我返回键 <"god"> 的值，**因为这意味着该键存在于某个版本的 hashmap 中并且尚未被覆盖。

类优化地图 {

```
Map<String, String> mymap = new HashMap<String>();
Set<String> myset = new HashSet<>();
public void setValue (String key, String value) {
    mymap.put(key, value);
    myset.add(key);
}

public void setAllValue (String value) {
    mymap = new HashMap<>();
    mymap.put("god", value);
}

public String getValue (String key) {
    if (mymap.containsKey(key)) {
        return mymap.get(key);
    } else if (!myset.contains(key)) {
        return null;
    } else {
        return mymap.get(key);
    }
}

public static void main (String args[]) {

    OptimisedMap opmap = new OptimisedMap();
    String value = opmap.getValue("hey");
    if (value == null) {
        System.out.println("Key not present");
    }
    opmap.setValue("hey", "there");
    opmap.setValue("ho", "there");
    System.out.println(opmap.getValue("hey")); // will print there
    opmap.setAllValue("whatsup");
    System.out.println(opmap.getValue("hey")); // will print whatsup
    System.out.println(opmap.getValue("ho")); // will print whatsup
    opmap.setValue("hey", "there");
    System.out.println(opmap.getValue("hey")); // will print there
    System.out.println(opmap.getValue("ho")); // will print whatsup
} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-03T05:55:36.197

另一个 Python 示例：

```
 class SetAll:
    def __init__(self):
        self.mapping = {}
        self.is_all_same = True
        self.all_value = None
        self.set_all_ran = False

    def set(self, index, value):
        if self.is_all_same:
            if value == self.all_value:
                return
            else:
                self.is_all_same = False
                self.mapping[index] = value
        else:
            self.mapping[index] = value

    def get(self, index):
        if self.mapping.get(index, None):
            return self.mapping[index]
        else:
            if self.is_all_same:
                return self.all_value
            else:
                if self.set_all_ran:
                    return self.all_value
        return

    def set_all(self, value):
        self.mapping = {}
        self.is_all_same = True
        self.set_all_ran = True
        self.all_value = value 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-21T12:17:01.973

我在 C# 中针对这个问题的实现：

```
 public class MyStruct
    {
    public MyStruct(int val)
    {
        this.value = val;
        this.currentTime = 0;
    }
    public int value { get; set; }
    public int currentTime { get; set; }
}

public class Struct
{
    public List<MyStruct> array = new List<MyStruct>();
    public MyStruct all = new MyStruct(0);

    public int GetValue(int index)
    {
        if(all.currentTime >= array[index].currentTime)
        {
            return all.value;
        }
        else
        {
            return array[index].value;
        }
    }

    public void Set(int index, int value)
    {
        if(array.Count <= index)
        {
            array.Add(new MyStruct(value));
        }
        else
        {
            array[index].value = value;
        }
        array[index].currentTime = all.currentTime +1;
    }

    public void SetAll(int value)
    {
        all.value = value;
        all.currentTime++;
    }

    public void Delete(int index)
    {
        array[index].currentTime = 0;
        array[index].value = -1;
    }
} 
```

陈卢加斯

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-12T13:38:33.873

好吧，我是根据事件来做的。看看这个。

```
internal class Program
{
    public static void Main(string[] args)
    {
        SomeUsefullDataStructure ds = new SomeUsefullDataStructure();

        ds.SetValue(1, "11");
        ds.SetValue(2, "22");
        var result = ds.GetValue(2);
        ds.SetAllValues("haha");

        Console.ReadKey();
    }
}

public class SomeUsefullDataStructure
{
    private delegate void SetValueDelegate(string newValue);
    private event SetValueDelegate SetValueEventFired;
    private Dictionary<int, StringDataEntry> dict = new Dictionary<int, StringDataEntry>();

    public string GetValue(int key)
    {
        if (dict.ContainsKey(key))
        {
            return dict[key].StringValue;
        }

        throw new ArgumentException("no such key");
    }

    public void SetValue(int key, string value)
    {
        if (dict.ContainsKey(key))
        {
            dict[key].UpdateValue(value);
        }
        else
        {
            StringDataEntry stringDataEntry = new StringDataEntry(value);
            SetValueEventFired += stringDataEntry.UpdateValue;
            dict.Add(key, stringDataEntry);
        }
    }

    public void SetAllValues(string value)
    {
        SetValueEventFired(value);
    }
}

public class StringDataEntry
{
    public string StringValue { get; private set; }

    public StringDataEntry(string value)
    {
        StringValue = value;
    }

    public void UpdateValue(string newValue)
    {
        StringValue = newValue;
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-08T14:51:10.803

许多解决方案都很棒，但**没有一个提到最[先进](https://medium.com/p/2ab4c0335e8b)的**解决方案。

它的操作具有**O(1) 的最差时间**复杂度 （调用*fill(v)*将数组中的所有值设置为 v，并且*读*/*写*是不言自明的）， 同时除了数组之外只占用**1 位额外空间。**是的。`fill(v), read(i), write(i, v)`

 *****因此，大小为 1,000,000 的 int32_t 数组将需要 O(1) 最坏时间来初始化（和填充），
并且只需要 32,000,001 位内存。

它在[In-Place Initializable Arrays](https://arxiv.org/abs/1709.08900)论文中提到，并在我写的一篇关于该主题的[文章](https://medium.com/p/2ab4c0335e8b)
中进行了解释。

[我编写了一个名为Farray](https://github.com/tomhea/farray)的纯C++ 标头库，其中包含**Fillable** **Array**，
它是上述论文的模板化实现。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-01T20:34:40.557

我的 Python 解决方案。经测试。不是线程安全的。如果您发现任何问题，请告诉我:)

```
class TimestampedNode:
    def __init__(self, timestamp, val):
        self.timestamp = timestamp
        self.val = val

class SetAllDS:
    def __init__(self):
        self.items = []
        self.timestamp = 0
        self.all_joker= TimestampedNode(self.timestamp, 0)

    def getValue(self, index):
        try:
            item=self.items[index]
        except IndexError:
            return None
        if item.timestamp<self.all_joker.timestamp:
            return self.all_joker.val
        return item.val

    def setValue(self, index, val):
        # if index<0 or index>=len(self.items): #
        #     raise IndexError("Invalid index\n")
        self.timestamp += 1
        self.items[index]=TimestampedNode(self.timestamp, val)

    def setAllValues(self, val):
        self.timestamp+=1
        self.all_joker=TimestampedNode(self.timestamp, val) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-08T21:14:00.813

这是另一个 python 解决方案：这是[一个链接](https://github.com/ahmadhori/setall-O1)！

```
from datetime import datetime
from typing import Any, Dict

class ValueNode:
    def __init__(self, value):
        self.value = value
        self.date_updated = datetime.now()

    def set_value(self, value):
        self.value = value
        self.date_updated = datetime.now()

    def get_value(self, value):
        return self.value

class Structure:
    def __init__(self):
        self._structure: Dict[Any, ValueNode] = {}
        self._set_all_node: ValueNode = None

    def get_val(self, index):
        if self._set_all_node and self._structure.get(index) and self._structure.get(index).date_updated < self._set_all_node.date_updated:
            return self._set_all_node.value
        else:
            if index in self._structure:
                return self._structure[index].value
            else:
                return None

    def set_val(self, index, value):
        self._structure[index] = ValueNode(value)

    def set_all(self, value):
        self._set_all_node = ValueNode(value)

s1 = Structure()
s1.set_val(1, 'green')
s1.set_val(5, 'blue')
s1.set_val(9, 'yellow')
print(s1.get_val(1))
print(s1.get_val(5))
print(s1.get_val('NotExistedValue'))
s1.set_all('black')
print(s1.get_val(1))
print(s1.get_val(5))
print(s1.get_val('NotExistedValue')) 
```*********

# database - Magento 如何创建和保存产品？需要相同的文件和函数名称..？

> ID：10005555
> 
> 赞同：1
> 
> 时间：2012-04-04T05:46:05.090
> 
> 标签：database, function, magento, save, product

我很想知道 Magento 中使用哪个文件在 Magento 中创建产品？在 Magento 中，我们从 Catalog->Manage Product->Add Product 创建新产品。

然后在选择产品类型和属性集后，我们插入必要的产品详细信息，最后我们按下**保存**选项卡。现在我想`file/function/code location`通过哪个`Magento saves product in database`？

如何从该文件中获取产品 ID？另外如何获取分配给任何特定产品的类别 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:13:56.670

我不确定这是否会对您有很大帮助，但请尝试从以下位置开始搜索：

```
Mage_Adminhtml_Catalog_ProductController   saveAction 
```

此外 debug_backtrace() 函数可能对您有很大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:19:27.603

以下是产品保存中使用的控制器文件的路径

```
app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php 
```

用于此的方法是 public function saveAction() {}

干杯..

谢谢，杰

# iphone - 将图像存储在 iCloud 中

> ID：10005557
> 
> 赞同：0
> 
> 时间：2012-04-04T05:46:14.350
> 
> 标签：iphone

大家好，首先感谢这样一个帮助全球所有开发人员的媒体。现在来回答我的问题，我想将图像存储在 icloud 中并在我的应用程序中检索它们。我能够在 icloud 中存储文本但无法在此处存储图像是我遵循的链接：

[http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fwww.raywenderlich.com%2F6015%2Fbeginning-icloud-in- ios-5-tutorial-part-1&ei=_N17T7-tF4yyiQf61bSmCQ&usg=AFQjCNERLzDywf_B2LdeIrssjc4hDB7ZMQ&sig2=hVY9x0c7ezSfZOIjx-HFJQ](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fwww.raywenderlich.com%2F6015%2Fbeginning-icloud-in-ios-5-tutorial-part-1&ei=_N17T7-tF4yyiQf61bSmCQ&usg=AFQjCNERLzDywf_B2LdeIrssjc4hDB7ZMQ&sig2=hVY9x0c7ezSfZOIjx-HFJQ)

它工作正常，但我只能存储文本而不是图像，所以请帮助我提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:53:07.627

当我将图像从服务器来回移动到 iOS 应用程序时，我使用了 base64 编码/解码（那里有很多库）。我会尝试将图像编码为设备上的 base64 字符串，然后将其（作为文本）发送到 iCloud。

有几个 NSData 类别处理将 NSData 转换为 base64 编码的字符串。

有关编码的解决方案，请参阅[此链接](https://stackoverflow.com/questions/2197362/converting-nsdata-to-base64)。

但是，根据[此链接](https://stackoverflow.com/questions/11288238/storing-pictures-in-icloud)，您应该将其存储为文档，除非它非常小。

# java - 使用支持包中的片段创建标签栏

> ID：10005561
> 
> 赞同：0
> 
> 时间：2012-04-04T05:46:43.020
> 
> 标签：java, android, android-layout

您好，我正在寻找一个使用片段创建自定义标签栏（在底部）的好例子。

早些时候我使用活动组编写了这个，但从 android 3.* 开始，它已被弃用，我需要使用片段来执行此操作。

这是我编写的创建自定义标签栏的代码：

```
private void setTabs()
{

    //Implementing strings
    String publication = String.format("First");
    String shop = String.format("Second");

    //Adding tabs to TabActivity
    //addTab(publication, R.drawable.ic_launcher, DisplayTestActivity.class);
   //addTab(shop, R.drawable.ic_launcher, DisplayPushedTestActivity.class);

}

@Override
public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub

}

/**
 * 
 * @param labelId, tab name
 * @param drawableId, tab icon image
 * @param c, responsible class
 */
/*
private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();  // The activity TabHost

    Intent intent = new Intent(this, c);

    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);

    System.out.println(tabIndicator);

    TextView title = (TextView) tabIndicator.findViewById(R.id.tab_bar_title);

    System.out.println(labelId);
    System.out.println(title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.tab_bar_icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
} 
```

也许有人可以分享一些关于这个的信息。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:03:38.207

开发者网站上有很多关于如何做到这一点的示例。请参阅[`FragmentTabs.java`](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)以及[**API 4+ 支持演示**](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/index.html)页面。

如果您需要一步一步，这也是一个很好的[**教程。**](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:14:39.207

我会尝试将[Actionbarsherlock](http://actionbarsherlock.com/)集成到您的项目中。它使您能够在低至 Android 2.x 的所有版本中使用 Honeycomb 和 Ice Cream Sandwich 的新 TabApi。它使添加标签变得非常容易，并且您的应用程序将遵循 Android 设计指南，并且看起来真的像一个 Android 应用程序。

# mysql - 难以将数组数据输入数据库表

> ID：10005562
> 
> 赞同：0
> 
> 时间：2012-04-04T05:46:47.907
> 
> 标签：mysql, arrays, database, insert

难以将数组数据输入数据库表

我想知道是否有人可以指出以下脚本有什么问题。我在将数组数据输入数据库表时遇到了困难。完整代码如下所述，最终数组的结果应输入到数据库表中，并以`print_r()`格式打印出来。

就收集 6 个数据数组的内容和创建 MySQL 数据库表而言，一切似乎都正常运行。困难在于将数据输入数据库表的代码的最后一部分。

脚本的底部包含 5 个不同版本的 MySQL 命令，这些命令是由其他贡献者和站点用户提供的，这些命令应该已经将数据输入到数据库表中。我分别尝试了每个版本，所有 5 个版本都无法正常工作。版本标签旁边的注释说明了失败的模式。

任何帮助将不胜感激。

```
<?php

// Data Arrays (6)
     $current_topic_array =       array();
     $post_date_array =           array();
     $phone_array =               array();
     $item_title_original_array = array();
     $item_title_array =          array();
     $item_link_original_array =  array();

// Enter Data into the Data Arrays.
// This can be done either by local loop as shown here, or gathered from an earlier part of the routine

   for($c = 0; $c < 3; $c++) {              // eventually the maximum value shown here, 3, will be a $variable
     $current_topic_array[] =       'a'.$c; // text string - Topic Section
     $post_date_array[] =           'b'.$c; // text string - Article Post Date as text string i.e. 03-30-2012
     $phone_array[] =               'c'.$c; // text string - Author's Contact Phone number as text string i.e. 888-555-1212
     $item_title_original_array[] = 'd'.$c; // text string - Original Article Title
     $item_title_array[] =          'e'.$c; // text string - Modified Article Title (shortened)
     $item_link_original_array[] =  'f'.$c; // text string - Author's website URL i.e. http://www...
   }

// MySQL Database Connection -  Authentication: user, password
     $TableName = 'User_Data';
     $dbh = mysql_connect ("localhost", "user", "password")
     or die ('Cannot connect to the database because: ' . mysql_error());
     mysql_select_db ("database");

// Creates a Database Table only if the Table does not already exist
     if(mysql_num_rows(mysql_query("SHOW TABLES LIKE '".$TableName."'")) != 1) {
        mysql_query("CREATE TABLE $TableName(
          id INT NOT NULL AUTO_INCREMENT,
          PRIMARY KEY (id),
          Topic                varchar(300)  NOT NULL default '',
          Post_Date            varchar(100)  NOT NULL default '',
          Phone_Number         varchar(100)  NOT NULL default '',
          Original_Item_Title  varchar(2000) NOT NULL default '',
          Modified_Item_Title  varchar(2000) NOT NULL default '',
          Original_Item_Link   varchar(2000) NOT NULL default '') ") or die(mysql_error()
        );
     }

// Combine all 6 Data Array into one array
     $queries = array(); 
     for($i = 0; $i < count($current_topic_array); $i++) {
        $queries[] = '(
           '.$current_topic_array[$i].',
           '.$post_date_array[$i].',
           '.$phone_array[$i].',
           '.$item_title_original_array[$i].',
           '.$item_title_array[$i].',
           '.$item_link_original_array[$i].'
        )'; 

        // Check - $queries array item &i
           echo '<span style="color: #008000;">'.$queries[$i].'</span>';
     }

// Check - Final $queries array content
     echo '<hr>Final $queries array content =';
     echo '<pre>';
     print_r($queries);
     echo '</pre>';
     echo '<hr>';

// Enter the $queries Data into the MySQL Database Table 

// Version 1 - Failed: Column count doesn't match value count at row 1
    // mysql_query("insert into $TableName (Topic, Post_Date, Phone_Number, Original_Item_Title, Modified_Item_Title, Original_Item_Link)
    // values (". implode(',', $queries) . ")") or die(mysql_error());

// Version 2 - Failed: Column count doesn't match value count at row 1
    // mysql_query("insert into $TableName (Topic, Post_Date, Phone_Number, Original_Item_Title, Modified_Item_Title, Original_Item_Link)
    // values ('". implode("','", $queries) . "')") or die(mysql_error());

// Version 3 - Failed - No Error message and No Data imported into Table
    // $query = mysql_query("insert into $TableName (Topic, Post_Date, Phone_Number, Original_Item_Title, Modified_Item_Title, Original_Item_Link) 
    // values ('. implode(',', $queries)') or die(mysql_error()");

// Version 4 - Failed - No Error message and No Data imported into Table
    // $query = "insert into User_Data(Topic, Post_Date, Phone_Number, Original_Item_Title, Modified_Item_Title, Original_Item_Link)
    // values " . implode(", ", $queries);

// Version 5 - Failed - No Error message and No Data imported into Table
     $query = "insert into (Topic, Post_Date, Phone_Number, Original_Item_Title, Modified_Item_Title, Original_Item_Link)
     values " . implode(", ", $queries);

?> 
```

`$queries[$i]`项目：

```
( a0, b0, c0, d0, e0, f0 )( a1, b1, c1, d1, e1, f1 )( a2, b2, c2, d2, e2, f2 ) 
```

最终`$queries`数组内容：

```
Array
(
    [0] => (
           a0,
           b0,
           c0,
           d0,
           e0,
           f0
        )
    [1] => (
           a1,
           b1,
           c1,
           d1,
           e1,
           f1
        )
    [2] => (
           a2,
           b2,
           c2,
           d2,
           e2,
           f2
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:55:47.887

根据 MySql[参考](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

这就是一次插入多行的方法。请注意值之间的“，”。尽管使用 for 循环逐行插入数据并从查询数组中获取第 i 行会更容易和更安全。

另外，我想指出的是，目前代码很容易受到 SQL 注入攻击，因为它操纵字符串并且没有 sql 检查。

# android - Android：获取tablerow中edittext的值

> ID：10005564
> 
> 赞同：1
> 
> 时间：2012-04-04T05:46:52.613
> 
> 标签：android, tablerow

我有一个名为 tab 的表格布局，我正在向其中添加动态表格行。每个 tablerow 都有一个从数据库设置值的 edittext 和一个 textview。在页面加载时，焦点设置为第一个编辑文本。我如何检索聚焦的edittext的值？我试过这个： `tab.getChildAt(0).requestFocus();` 然后我尝试使用我的 logcat 中的结果来检索值`tab.getFocusedChild().toString();` 是这样的： Focused Location ===== android.widget.TableRow@44ecada8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:07:27.587

你可以试试这个

```
TableRow row1= (TableRow)tableLayout.getChildAt(rowPosition);
EditText et=(EditText ) row1.getChildAt(0);
String text=et.getText().toString(); 
```

希望这可以帮助你

# ios4 - 将录制的文件保存为 mp4 音频

> ID：10005568
> 
> 赞同：0
> 
> 时间：2012-04-04T05:47:02.547
> 
> 标签：ios4

> **我们如何将录制的文件保存为目标 c 中的 mp4 音频格式。** 我可以更改录制设置以保存为 mp4 文件吗？我已将录制设置编码如下。请您帮我自定义录制设置以将录制的音频文件保存为 mp4 格式。

```
recordSettings= [[NSDictionary alloc] initWithObjectsAndKeys:
                       [NSNumber numberWithFloat: 32000], AVSampleRateKey,
                       [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                       [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                       nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:51:27.290

尝试这个，

```
-(NSURL *) tempFileURL
{

    NSString *outputPath = [[NSString alloc] initWithFormat:@"%@%@", NSTemporaryDirectory(), @"output.mp4"];
    NSLog(@"Saved %@",outputPath);
    NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputPath];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:outputPath]) {
        [fileManager removeItemAtPath:outputPath error:NULL];
    }
    [outputPath release];
    return [outputURL autorelease];
} 
```

# sqlite - SQLite 在命令后添加空格

> ID：10005569
> 
> 赞同：0
> 
> 时间：2012-04-04T05:47:09.493
> 
> 标签：sqlite, command, newline, space

有没有办法在我在提示符下运行的每个 SQLite 命令之后自动添加一两行新行？我不喜欢杂乱无章的命令墙，而且我在区分实际命令和每个输出的末尾时遇到了问题。它们可以单独着色吗？我使用的是 Windows 批处理文件，所以我对此表示怀疑。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:11:57.883

我不确定您是如何执行命令的，但您应该能够通过`SELECT '';`在 SQL 命令之间添加一些“换行符”。但是，如果您要输出列标题，这实际上不起作用！

在批处理中，如果您在每个命令后返回命令行，则使用`echo.`打印一个空行。

# javascript - 如何使用 Javascript 编写 JSON

> ID：10005571
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:47:43.770
> 
> 标签：javascript, html, json

我有两个文本框 T1 和 T2。我需要使用 java 脚本将这两个值作为 json 保存在单独的文件中。我的目标是在单独的文件中写入值并且必须稍后检索。请指导我如何在单独的文件中编写 json ..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:55:01.413

我认为这就是你要找的东西： [https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

在此处查看其自述文件： [https ://github.com/douglascrockford/JSON-js/blob/master/README](https://github.com/douglascrockford/JSON-js/blob/master/README)

# php - if 语句如果字符串的变量不存在...？

> ID：10005575
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:47:59.147
> 
> 标签：php

我将如何编写一个`IF`语句，说如果`$req`不为空并且等于不存在的字符串然后加载，`load_template(tpl_path.'err404.tpl');`所以如果`$req`不匹配或等于有效的东西然后显示错误页面。

```
if ($req == '')              load_template(tpl_path.'index.tpl');
if ($req == 'dologin')      include 'includes/dologin.php'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:51:35.570

使用[switch](http://php.net/switch)语句：

```
switch($req) {
  case '':
    load_template(tpl_path.'index.tpl');
    break;
  case 'dologin':
    include 'includes/dologin.php';
    break;
  default:
    load_template(tpl_path.'err404.tpl');
} 
```

# java - Dalvik 内存分配

> ID：10005578
> 
> 赞同：0
> 
> 时间：2012-04-04T05:48:23.060
> 
> 标签：java, android, memory-management, dalvik

有什么办法，如何以**编程**方式（如分配和填充一些数组）检查，Dalvik 在出现之前可以分配多少内存`OutOfMemoryError`？用Java可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:10:53.817

每个 Java 应用程序在运行时都会分配内存。这就是我们所做的使用

```
java -Xms<initial heap size> -Xmx<maximum heap size>. 
```

此外，在 Throwable 块中，您可以执行以下方式：

1.  总内存（堆） - Runtime.getRuntime().totalMemory();
2.  System.out.println("已用内存："
    + (runtime.totalMemory() - Runtime.runtime.freeMemory()) / mb);
3.  System.out.println("空闲内存："
    + Runtime.runtime.freeMemory() / mb);
4.  System.out.println("总内存：" + runtime.totalMemory() / mb);

也许这会解决问题。

# xamarin.ios - 带有 MonoTouch 的 AOP

> ID：10005582
> 
> 赞同：5
> 
> 时间：2012-04-04T05:49:06.610
> 
> 标签：xamarin.ios, aop, monodevelop, postsharp

我想知道是否支持 AOP（面向方面​​编程）和 MonoTouch（以及 MonoDevelop）。

到目前为止，我还没有找到任何支持 MonoDevelop 的工具。据我所知，不支持 PostSharp 之类的工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:14:40.633

我能够让 PostSharp 在 Mono for Android（使用 Visual Studio）上工作。我没有用过 MonoTouch，但你还是可以试试看：http: [//mgroves.com/monodroid-with-postsharp/](http://mgroves.com/monodroid-with-postsharp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:24:48.400

不依赖于动态代码生成的工具*应该*适用于 MonoTouch。IIRC [PostSharp](http://www.sharpcrafters.com/)就是这样一个工具 - 即它修改 IL 以获得结果。

MonoTouch（比其他 .NET 平台，包括 Android 的 Mono）更受限制的原因是 iOS 不允许代码生成，因此我们无法在设备上进行 JIT。这意味着所有 MonoTouch 应用程序都必须经过 AOT 编译（提前）。

请注意，一个工具*可以*工作并不意味着它可以工作。例如，这些工具必须能够在 OSX 上执行，并且您需要将其集成到构建中（在 C# 编译之后但在 AOT 编译之前）。后者可能需要您使用脚本/Makefile 来构建您的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-04T16:14:21.800

我最近创建了一个名为[StaticProxy.Fody的](https://github.com/BrunoJuchli/StaticProxy.Fody/)[Fody](https://github.com/Fody/Fody)插件，它在编译时将拦截代码编织到一个类中，并且还可以自动实现接口。这或多或少是例如城堡动态代理“没有目标的接口代理”和“有目标的接口代理”和“类代理”提供的。但是请注意，它的局限性在于您需要标记应该由属性编织的接口/类。因此，您只能拦截可以添加它的类型（==> 源代码在您的控制之下）。`[StaticProxy]`

此外，因为它添加了一个构造函数参数，所以依赖注入容器的使用基本上是强制性的（它会中断“new Foo(..)”调用）。我已经为 ninject 和 unity 创建了扩展：

*   [Ninject.Extensions.StaticProxy](https://github.com/BrunoJuchli/ninject.extensions.staticproxy)
*   [unity.StaticProxy](https://github.com/BrunoJuchli/Unity.StaticProxyExtension)

nuget 包可用，如果有人可以测试 MonoTouch / MonoDroid 集成，我将非常欢迎它。我担心我目前没有正确创建 nuget 包。

我还计划添加自动工厂实现（如 ninject 的“.ToFactory()”绑定）。

# java - java - 支持索引/查询缓存的缓存解决方案

> ID：10005583
> 
> 赞同：0
> 
> 时间：2012-04-04T05:49:07.890
> 
> 标签：java, caching, nosql, ehcache

*   我正在寻找可以支持查询缓存/索引的 java 缓存解决方案。
*   我看过Ehcache。虽然它有一个很好的查询搜索支持但是那总是 O(n) 即。它总是会进行完整的缓存搜索。（此信息适用于 EHcache 的免费版本）。
*   我想要一个解决方案，我可以定义这些是我将在/索引上查询的字段，并且对于所有这些字段，它维护属于这些查询的对象并在缓存中有任何插入/更新时保持索引更新。基本上我想要最好的读取性能。我要进行的读取次数远远超过缓存中的更新次数。
*   任何免费/开源解决方案都将是可取的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:55:03.837

尝试使用[Infinispan](https://docs.jboss.org/author/display/ISPN/Querying+Infinispan)

# iphone - iPhone目标c中的子类化以共享公共类文件

> ID：10005587
> 
> 赞同：0
> 
> 时间：2012-04-04T05:49:22.053
> 
> 标签：iphone, objective-c, xcode, shared-libraries, subclassing

我对 iPhone 很陌生。我在 iphone 中开发了两个版本的应用程序。在这里，我使用了取决于版本功能的单个类实现。

例如' `ListViewController`'类有`.h,.m, xib`文件。**在两个版本中**具有相同的名称，但在某些部分（略有不同）代码实现不同。

在第一个`'ListViewController'`版本中只显示一个表格视图。在第 2 版中，“ListViewController”显示了表格视图和一个按钮，用于设置提醒（警报）。

所以只是**InterfaceBuilder** `*button* (AlarmButton)`和**Code的区别** *`button action -(IBAction)SetReminder.`*

现在我需要将所有相同的类放在两个项目 v1&v2 的库（Common 文件夹）中，

现在我需要***使用 subClassing***实现两个版本的通用“ListViewController” 。

我如何实现这一点，任何帮助或示例或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:57:02.493

要创建子类，您只需要创建头文件和实现文件，它们应该如下所示

```
// header file
@interface MySubclassName : ListViewController

@end

// implementation file
#import "MySubclassName.h"
@implementation MySubclassName

// methods you want to subclass

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:58:01.107

为了在类之间共享相同的代码，我们通常使用继承，但是在objective-c中添加了一个非常酷的功能，即类别，找到下面的教程链接：http: [//iphone-obsessed.blogspot.in/2010/05/tutorial -creating-class-categories-in.html](http://iphone-obsessed.blogspot.in/2010/05/tutorial-creating-class-categories-in.html)

可能有帮助...！！

# macos - 将 Django 项目从 Mac 转移到 Ubuntu EC2 实例

> ID：10005588
> 
> 赞同：1
> 
> 时间：2012-04-04T05:49:22.830
> 
> 标签：macos, ubuntu, amazon-ec2, amazon-web-services

我是新的网络服务器...和...

我正在开发一个准备启动的 django 项目，我想知道如何将文件从本地机器传输到 EC2 服务器？如果这有什么不同，我目前正在运行一个 Ubuntu 实例。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:57:53.603

您可以尝试使用[rsync](http://en.wikipedia.org/wiki/Rsync)或[cyberduck 之](http://cyberduck.ch/)类的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:59:18.517

您可以使用`scp`（ssh cp）简单地上传文件，如下所示

```
scp your_file ubuntu@[your_server_address]:~/target_path 
```

更重要的是，你可以试试`rsync`。

# php - 如何将数组编码为 URL 参数，在 PHP 中提取并作为函数参数传递给 Postgres

> ID：10005591
> 
> 赞同：3
> 
> 时间：2012-04-04T05:49:28.113
> 
> 标签：php, web-services, postgresql, url

如果我有一个正常工作的 postgres 函数（类似于下面）；

```
package."func_SetValues"(id integer, values integer[])
    DECLARE
        i integer;
    BEGIN
    FOR i IN 1..array_upper(values, 1) 
      LOOP
       EXECUTE package."func_DoStuff"(id, values[i]);
      END LOOP;
    END
    LANGUAGE 'plpgsql' VOLATILE 
```

并且，一个 PHP 脚本 doStuff.php 调用此函数，该函数接受并使用这些值作为 url 编码参数。

```
$dbconn = pg_connect("host=192.168.1.222 port=5432 dbname=betya user=betya_user password=bettyboo")
    or die('Could not connect: ' . pg_last_error());
$query = 'SELECT * FROM package."func_SetValues"($1, $2)';
$result=pg_prepare($dbconn, "qy", $query);
$paramater1=$_REQUEST['id'];    
$paramater2=$_REQUEST['arr']; 
$result=pg_execute($dbconn, "qy", array($paramater1, $paramater2));

while($e=pg_fetch_assoc($result))
$output[]=$e;

print(json_encode($output));
pg_free_result($result);
pg_close($dbconn); 
```

为了测试 PHP 脚本，以下 URL 是否以 PHP 可以“请求”值并可以传递给 postgres 的方式正确编码数组 'arr'？或者脚本中是否需要进一步的功能才能正确传递给 pg_execute 命令？

```
http://192.168.1.50/server/doStuff.php?id=1790&arr[]=1788&arr[]=1790&arr[]=1805 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:53:52.100

是的，需要更多代码。该数组必须经过非平凡的转换才能作为参数传递，因为 PG 期望它以文档中所述的文本形式出现： [http ://www.postgresql.org/docs/current/static/arrays.html#ARRAYS -IO](http://www.postgresql.org/docs/current/static/arrays.html#ARRAYS-IO)

In another question: [PHP array to postgres array](https://stackoverflow.com/questions/5631387/php-array-to-postgres-array) , a PHP function to that effect has been already submitted to S.O., it might just be what you need (and ever better since it supports recursive arrays).

# html - 使用 __utm.gif 进行谷歌分析跟踪打开率

> ID：10005593
> 
> 赞同：1
> 
> 时间：2012-04-04T05:49:32.007
> 
> 标签：html, email, google-analytics

我发现谷歌分析实际上有我在电子邮件中添加的 gif，但我不确定参数设置是否合适

我遵循互联网上的一些建议，唯一需要的参数是

```
Parameter    Description
utmac        Google Analytics account ID
utmn         Random ID to prevent the browser from caching the returned image
utmp         Relative path of the page to be tracked
utmr         Complete referral URL 
```

和谷歌上建议的参数

```
Campaign Source (utm_source)

Campaign Medium (utm_medium)    

Campaign Name (utm_campaign) 
```

创建一个 gif

```
http://www.google-analytics.com/__utm.gif?utmac=UA-29940706-1&utmn=1214284135&utmp=receipent-email@hotmail.com&utmr=0?utm_source=newsletter&utm_medium=email&utm_campaign=newsletter1 
```

问题是：

1.  gif参数是否正确？

2.  在谷歌分析网站上生成实际跟踪是否需要一天？

3.  这样做的方法是更改​​其他活动的活动名称（utm_campaign），如果用户想要跟踪结果，只需将 gif 添加到电子邮件中，仅此而已？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:18:29.763

最重要的参数是`utmcc`包含 Analytics cookie 值，尤其是`__utma`包含访问者/会话信息的 cookie 值：

```
__utma=<domain_hash>.<session_id>.<first_time>.<last_time>.<current_time>.<session_count> 
```

注意：请避免将电子邮件等个人数据推送到分析中。

**编辑：**

不要忘记大多数电子邮件客户端默认不加载图像。因此，您将无法获得准确的统计数据。

# regex - 正则表达式 - 以开头的句子

> ID：10005595
> 
> 赞同：-1
> 
> 时间：2012-04-04T05:49:43.570
> 
> 标签：regex

我有一些文本文件，其中包含大量信息。它们中的大多数句子都以某个信息列表开头。现在我可以使用其他正则表达式代码（日期、网址、电子邮件等）提取一些项目，所以我正在使用它们。但对于其他信息，我不知道从哪里开始......

例如 ：

```
ITEM_LIST_1 = xxxx .
ITEM_LIST_2 = xxxx .
ITEM_LIST_3 = xxxx .
.... 
```

我正在寻找一个正则表达式，它将提取特定项目的 xxxx（句子）。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:53:06.490

```
(?<=ITEM_LIST_\d+ = ).*(?= \.) 
```

应该与`xxxx`上面示例中的相匹配。不过，它需要一个允许任意长度环视的正则表达式引擎。大多数人不会（.NET 会）。

另一种选择是

```
ITEM_LIST_\d+\s*=\s*(.*)\s*\. 
```

并使用匹配号 1。这不需要环顾四周，但匹配比您需要的更多，并使用捕获组来选择总匹配的子字符串。

如果我们知道您的情况，两者都可以通过更好的性能和更少的匹配错误的机会来针对您的问题进行微调`xxxx`。

**编辑：**如果这些项目都在一行中，那么上面的正则表达式会失败（因为它很贪婪）：

```
PS> [regex]::matches('Item_List_01 = Chapter1 overview, Who''s who, Chapter2 How to. Item_List_02 = Continue of Chapter2, Problems.', 'Item_List_\d+\s*=\s*(.*)\.') | select groups

Groups
------
{Item_List_01 = Chapter1 overview, Who's who, Chapter2 How to. Item_List_02 = Continue of Chapter2, Problems., Chapt... 
```

您可以通过使其变得懒惰来修复它：

```
Item_List_\d+\s*=\s*(.*?)\. 
```

这确实有效，然后：

```
PS> [regex]::matches('Item_List_01 = Chapter1 overview, Who''s who, Chapter2 How to. Item_List_02 = Continue of Chapter2, Problems.', 'Item_List_\d+\s*=\s*(.*?)\.') | select groups

Groups
------
{Item_List_01 = Chapter1 overview, Who's who, Chapter2 How to., Chapter1 overview, Who's who, Chapter2 How to}
{Item_List_02 = Continue of Chapter2, Problems., Continue of Chapter2, Problems} 
```

但是，如果项目中有句号，它将再次失败：

```
PS> [regex]::matches('Item_List_01 = Foo. Bar. Item_List_02 = Baz, gak.', 'Item_List_\d+\s*=\s*(.*?)\.') | select groups

Groups
------
{Item_List_01 = Foo., Foo}
{Item_List_02 = Baz, gak., Baz, gak} 
```

这可以通过添加一个前瞻（再次）来解决，它确保行/字符串的结尾或另一个项目如下：

```
Item_List_\d+ = (.*?)\.(?=$| Item_List_\d) 
```

（关于空间，`\s*`等：我在整个解决方案中多次更改空间处理时有点草率。您应该知道您期望什么数据并相应地调整正则表达式。您还改变了`ITEM_LIST`/ `Item_List`in你的问题和评论。你也应该保持一致。）

# php - 每个请求都应该包含 csrf 令牌吗？

> ID：10005598
> 
> 赞同：1
> 
> 时间：2012-04-04T05:50:03.450
> 
> 标签：php, csrf

假设用户在他们的帐户上有私人内容。像任何社交网站一样，当他们浏览他们的帐户时，用户可以看到很多关于他们的事情。所有这些请求都被标记了吗？制作一个模式并标记所有请求并在处理它们之前检查它们是一个好主意吗？有什么建议吗？
所有基于私人账户系统的应用程序是否都标记了所有请求？

PS：这是一种可能的攻击：用户登录社交网站（“x”），保持登录状态，转到另一个网站（“y”）。网站 y 有一个按钮，用于获取 x 网站的首页内容，其中包括用户的最新帖子。由于用户已登录，数据将显示...

您将如何为每个请求设置一个 csrf 令牌机制？设置一个中间进程，如果请求有效，则将请求重定向到最终处理页面？或...任何其他想法？我错了吗？我看错了吗？

在这里，我问了同样的问题并得到了正确的最终答案：[https](https://stackoverflow.com/a/10006276/1284817) ://stackoverflow.com/a/10006276/1284817 。此处经过验证的答案也很适合阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:43:39.090

CSRF 令牌通常仅附加到代表用户更改事物的事物（例如 POST 请求）。保护攻击者免于*查看*私有数据要简单得多，而且确实适用于所有流行的浏览器：

为了保护攻击者*查看*私有数据（而不是修改它），您通常会依赖浏览器的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，并确保您的请求不支持[跨域资源共享](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

在您建议的攻击的具体示例中，攻击者请求 example.org/private 并且浏览器将在我的浏览器上引发如下所示的异常：

```
XMLHttpRequest cannot load http://example.org/private. Origin http://attacker.com is not allowed by Access-Control-Allow-Origin. 
```

# python - 复杂阵列的智能打印

> ID：10005600
> 
> 赞同：1
> 
> 时间：2012-04-04T05:50:16.360
> 
> 标签：python, arrays, numpy, pretty-print

当复数浮点矩阵实际上充满实数或虚数时，这是很常见的情况。有时它们是偶数（但中间数不是。反正没有复杂的整数类型）。可能有一个聪明的解决方案，无需“手动”格式化所有内容？

示例：与（尽可能接近所需的）组合

```
numpy.around(numpy.real_if_close(numpy.array([[1.0j,1.0],[0.0,1.0j]],complex))) 
```

我明白了

```
array([[ 0.+1.j, -1.+0.j],
       [ 0.+0.j,  0.+1.j]]) 
```

所需的输出是

```
array([[ 1j, -1 ],
       [ 0 ,  1j]]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:54:12.927

```
>>> import numpy
>>> a = numpy.around(numpy.real_if_close(numpy.array([[1.0j,0.0],[0.0,1.0j]],complex)))
>>> a
array([[ 0.+1.j,  0.+0.j],
       [ 0.+0.j,  0.+1.j]])
>>> [[c if c.imag else c.real for c in b] for b in a]
[[1j, 0.0], [0.0, 1j]] 
```

我不确定是否有内置的方法来做到这一点。

编辑：对 numpy 的数组进行子类化的建议是一个很好的建议，这可能是最简单的方法。否则，您可以从数组中获取所有内容并将其放入列表中，但这不会像您想要的那样打印 0（它会打印 0j）

```
>>> [[c for c in b] for b in a]
[[1j, 0j], [0j, 1j]] 
```

# android - 如何在物理设备上运行 android 应用程序

> ID：10005603
> 
> 赞同：1
> 
> 时间：2012-04-04T05:50:22.750
> 
> 标签：android, device-emulation

我通过USB在模拟器和物理设备之间建立了连接。我已经按照链接[链接](http://javatech.org/2011/01/discovering-android-running-on-a-physical-device/)，但它也无法正常工作，它仅在虚拟设备上运行。

当我重置 adb 时，它显示以下错误

```
[2012-04-04 10:06:40 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host
[2012-04-04 10:06:41 - DeviceMonitor] Connection attempts: 1
[2012-04-04 11:00:41 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host
[2012-04-04 11:00:42 - DeviceMonitor] Connection attempts: 1
[2012-04-04 11:32:53 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:03:14.443

有两种方法。

1.  首先在您的设备中启用 USB 调试并连接到开发 PC。使用**ADB**工具在您连接的设备中安装您的 .apk 文件。

2.  将您的设备连接到 PC。选择通过拖动通知区域打开 USB 存储后。之后，您可以将您的设备视为 PC 中的一种可移动媒体。将您的 .apk 文件复制到此驱动器。断开设备连接后，从设备的**设置**中选中**允许从未知资源安装**的选项。现在打开文件管理器并打开您最近复制的 .apk 文件。它会要求您安装此 apk。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T05:53:31.430

在手机上启用 USB 调试（设置 -> 应用程序 -> 开发 -> USB 调试）。您现在应该能够部署应用程序，前提是您已正确设置开发环境（必须下载并相应配置 ADT 和 SDK）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T05:56:40.297

你在使用 Eclipse 吗？您必须使用 eclipse 连接您的移动设备（打开 USB 调试模式）。如何做到这一点，你可以在这里阅读：[在设备上运行 APK](http://javatech.org/2011/01/discovering-android-running-on-a-physical-device/)

编辑：哦，它和你的链接一样，所以有什么问题..？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T05:59:22.527

从命令行，转到 adb 所在的 android 平台工具。对于您创建的应用程序，将生成一个 .apk 文件

使用以下命令将 apk 推送到设备。

adb push .apk /system/app/.apk

推送apk后，就可以在设备上运行了

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T06:39:00.853

如果您使用的是eclipse，那么这可能是解决方案

右键单击项目->运行方式->运行配置->选择自动->取消选中列表中的所有设备名称->单击应用->单击运行

如果模拟器和物理设备都在运行，它会提示选择一个。**

# css - 输入文件类型的 CSS 样式

> ID：10005606
> 
> 赞同：4
> 
> 时间：2012-04-04T05:51:16.023
> 
> 标签：css

我只使用 CSS 设置输入文件类型的样式，它适用于除 Firefox 11.0 之外的所有浏览器。CSS：

```
label{ 
 background:url(http://www.itilexamapp.com/images/upload.png) no-repeat 0 0;
 padding:5px;
 display:inline-block;
}

input[type="file"]
{-moz-opacity:0; 
 -webkit-opacity:0; 
 filter:alpha(opacity=0); 
 padding:6px;
 width:200px; 
} 
```

HTML：

```
<label>
<input type="file" name="file_upload" />
</label> 
```

您可以在此处查看代码：

~~[http://jsfiddle.net/kheema/PeXq9/7/](http://jsfiddle.net/kheema/PeXq9/7/)~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:02:33.687

这是解决方案，将其添加到您的样式中。：

```
input[type="file"] {opacity: 0;} 
```

我认为 Firefox 11 现在已经停止接受一些供应商前缀（此处为 -moz-opacity）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:17:43.620

或者，您可以通过以下方式简化它：

```
<div id='label'><input type='file' size='1' class='upload'></div> 
```

CSS是：

```
#label{
  width: 100px;
  height: 50px;
  background: #fff url('YOURUPLOADIMAGE.png') no-repeat;
  }
 .upload{
   opacity: 0;
   font-size: 45px;
  } 
```

当然，您需要适应浏览器支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-06T04:29:50.797

HTML

```
<section id="uploadImage"><input type="file" name="fileToUpload"id="fileToUpload">
<label for="fileToUpload" id="uploadLable">Choose Image To Upload</label>               
</section>
<button class="btnR"type="submit" name="submit">Uplaod</button> 
```

CSS

```
input[type="file"]{
opacity: 0;
display: none;
}
#uploadLable{
width: 100%;
background-color: rgb(245,245,245);
color: rgb(80,80,80);
padding: 20px;
font-size: 16px;
}
.btnR{ 
color: white;
background-color: cornflowerblue;
min-width: 100px;
padding: 15px;
transition: 0.5s; 
}
.btnR:hover{
transform: rotate(10deg);
} 
```

香草 javascript

```
document.getElementById('fileToUpload').onchange=function() {fileName()};             
function fileName(){
var x=document.getElementById('fileToUpload').value; 
document.getElementById('uploadLable').innerHTML=x;
} 
```

# javascript - 在 Javascript 中递归调用 Window.open。

> ID：10005609
> 
> 赞同：1
> 
> 时间：2012-04-04T05:51:27.467
> 
> 标签：javascript, html, internet-explorer

这是我的 Html。我需要在新窗口中打开（同一页面）Page1.html，当我点击 Page1.html 时。（第一个窗口）所以我用来`window.open()`实现这个。它的工作原理并产生第二个窗口但我也需要从第一个窗口创建的第二个窗口打开相同的页面（Page1.html）。所以我用`window.open()`它在同一个窗口中加载 Page1.html。它不会创建任何其他新窗口。在实际场景中，我需要从 A.html 使用 B.html 创建一个新窗口。同样从第二个窗口（B.html）我需要用 C.html 创建另一个窗口。目前 B 将打开，但 C 不会创建任何新窗口，它只是在第二个窗口中加载 C.html 替换 B.html

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
    </head>
    <body>
        <script type="text/javascript">
            function ShowPage(pageName) {
                window.open(pageName, null, 'height=400,width=800,status=yes,toolbar=yes,menubar=no,location=no,scrollbars=yes,resizable=yes');
            }
        </script>
        <a id="page1.htm" onclick="ShowPage(this.id);">Click Me</a>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:56:58.540

为您打开的每个窗口设置一个新名称，因为一旦“命名”窗口已经打开，任何`window.open`使用相同名称的窗口都会打开同一窗口中的内容。

或者

将名称设置为`"_blank"`每次打开新窗口。

可以通过第二个参数（而不是 null）设置窗口的名称。

* * *

根据这篇[MDN 文章](https://developer.mozilla.org/en/DOM/window.open)

> 如果名称为 strWindowName 的窗口已存在，则将 strUrl 加载到现有窗口中。在这种情况下，该方法的返回值是现有窗口并且 strWindowFeatures 被忽略。为 strUrl 提供一个空字符串是一种通过名称获取对打开窗口的引用而不更改窗口位置的方法。要在每次调用 window.open() 时打开一个新窗口，请为 strWindowName 使用特殊值 _blank。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:59:10.710

尝试在 window.open() 的第二个参数中使用 '_blank' 而不是 null

# asp.net - 如何在 Windows 服务器上使用 asp.net 设置 Paas

> ID：10005613
> 
> 赞同：1
> 
> 时间：2012-04-04T05:51:59.683
> 
> 标签：asp.net, paas

我有一台具有静态 IP 的 windows server 2008 机器，我想让它在云上提供给其他用户/开发人员，

如何在 Windows 服务器上使用 asp.net设置[Paas ？](http://en.wikipedia.org/wiki/Platform_as_a_service)

例如 [http://www.appfog.com/](http://www.appfog.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:42:30.457

[在http://www.gigaspaces.com/cloudify](http://www.gigaspaces.com/cloudify)查看 Cloudify

您可以使用我们的 windows 集成（参见 ec2-win 云示例）来启动运行 IIS 的云机器。您所需要的只是一个“配方”，其中包括您的 .Net 二进制文件（或指向它们的链接）和几行代码来安装 Asp.Net 应用程序。

巴拉克

[http://www.cloudifysource.org/](http://www.cloudifysource.org/)

# iphone - 将 OpenGL 1.1 代码转换为 OpenGL 2.0

> ID：10005618
> 
> 赞同：3
> 
> 时间：2012-04-04T05:52:27.013
> 
> 标签：iphone, opengl-es, cocos2d-iphone, opengl-es-2.0

想要将 OpenGL 1.1 代码转换为 OpenGL 2.0。

我用的是Cocos2d v2.0（一个构建2D游戏的框架）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:42:26.733

首先你必须让你的着色器进入你的程序。您可以将着色器代码直接复制到下面显示的 const char * 中，也可以在运行时从文件加载着色器，这取决于您正在开发的平台，所以我不会展示如何做到这一点。

```
const char *vertexShader = "... Vertex Shader source ...";
const char *fragmentShader = "... Fragment Shader source ..."; 
```

为顶点着色器和片段着色器创建着色器并存储它们的 ID：

```
GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER); 
```

在这里，您可以使用复制粘贴到 const char * 或从文件加载的数据填充刚刚创建的着色器：

```
glShaderSource(vertexShader, 1, &vertexShader, NULL);
glShaderSource(fragmentShader, 1, &fragmentShader, NULL); 
```

然后你告诉程序编译你的着色器：

```
glCompileShader(vertexShader);
glCompileShader(fragmentShader); 
```

创建一个着色器程序，它是 OpenGL 着色器的接口：

```
shaderProgram = glCreateProgram(); 
```

将着色器附加到着色器程序：

```
glAttachShader(shaderProgram, vertexShader);
glAttachShader(shaderProgram, fragmentShader); 
```

将着色器程序链接到您的程序：

```
glLinkProgram(shaderProgram); 
```

告诉 OpenGL 你想使用你创建的着色器程序：

```
glUseProgram(shaderProgram); 
```

**顶点着色器：**

```
attribute vec4 a_Position; // Attribute is data send with each vertex. Position 
attribute vec2 a_TexCoord; // and texture coordinates is the example here

uniform mat4 u_ModelViewProjMatrix; // This is sent from within your program

varying mediump vec2 v_TexCoord; // varying means it is passed to next shader

void main()
{
    // Multiply the model view projection matrix with the vertex position
    gl_Position = u_ModelViewProjMatrix* a_Position;
    v_TexCoord = a_TexCoord; // Send texture coordinate data to fragment shader.
} 
```

**片段着色器：**

```
precision mediump float; // Mandatory OpenGL ES float precision

varying vec2 v_TexCoord; // Sent in from Vertex Shader

uniform sampler2D u_Texture; // The texture to use sent from within your program.

void main()
{
    // The pixel colors are set to the texture according to texture coordinates.
    gl_FragColor =  texture2D(u_Texture, v_TexCoord);
} 
```

# jquery - 如何从网页打印中删除 url 和日期文本？

> ID：10005619
> 
> 赞同：0
> 
> 时间：2012-04-04T05:52:29.190
> 
> 标签：jquery, printing, webpage

我正在使用 Jquery 打印网页（其中的 div 部分）。它工作正常，但它还在页眉和页脚打印网页名称、URL、页码和日期。如何从可打印区域中删除这些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:06:45.890

试试下面的css代码片段

```
<style type="text\css" media="print">
  #myFooter, #myHeader
  {
    display: none;
  } 
```

这也可以帮助您解决问题：[Printing without header and footer](http://javascript.bigresource.com/Printing-without-header-and-footer--y9mCNznMr.html)

# php - 在 php 中使用相等运算符的区别

> ID：10005620
> 
> 赞同：0
> 
> 时间：2012-04-04T05:52:31.197
> 
> 标签：php

谁能告诉我使用 '===' 的区别

```
if (null === $this->getName()) 
```

和

```
if ($this->getName() === null ) 
```

如果 $this->getName 已经定义。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:03:31.273

只要您使用`===`or就没有区别`==`。

现在你可能想知道为什么有人把他们所有的价值观都写在左边。这是因为我们的开发人员往往会忘记或写错字`==`，然后我们输入`=`. 这是意外分配。

```
if($id=13){
  echo "foo";
} 
```

在上面的代码中很难找到问题。应该写成`$id==13`. 那些写 as 的`13==$id`人不必处理这个问题，因为他们忘记了`=`它变成`13=$id`了语法错误。这样就避免了这种*几乎不可能检测到的错误*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:55:16.457

PHP 中的`===`运算符是对称的，所以它们是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T05:57:53.783

两个条件之间没有区别，但是，通常的做法是先放置要检查的值，因此您不会意外地将条件检查变成赋值操作：

```
// Conditional
if ($this->getName() === null )

// Assignment
if ($myName = null )

// Avoids the confusion of either the above
if (null === $this->getName()) 
```

您还可以使用[is_null](http://us2.php.net/is_null) PHP 函数来测试变量是否为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T05:58:19.157

从我读到的内容来看，唯一显着的区别是严格按照编写顺序，在某些情况下可以更轻松地跟踪给定的测试。

我也考虑 PHP 首先评估第一个学期，但这不会产生任何差异，因为无论如何它们都会被评估。

# asp.net - 在 ASP.NET 中，我可以安排 .ashx 页面在一天中的某个时间运行吗？

> ID：10005621
> 
> 赞同：0
> 
> 时间：2012-04-04T05:52:31.633
> 
> 标签：asp.net, cron, scheduled-tasks

我很好奇是否可以安排我的页面，让我们称之为 Test.ashx 运行，例如每天凌晨 2 点在 IIS 上使用 ASP.NET？（几乎就是 Cron Job 为 PHP/Linux 系统所做的事情。）

PS1。我需要这个页面来对 SQL 数据库表执行自定义操作。（请注意，我没有直接访问 IIS 或 SQL Server 本身的权限。我正在编写一个需要为客户端合并此功能的 Web 应用程序。）

PS2。如果这很重要，我会使用 C# 进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:43:30.680

实现一件事的方法总是不止一种。要定期对 SQL 数据库表执行自定义操作，您可以安排 SQL 作业。查看此 SO 答案以获取更多详细信息

[https://stackoverflow.com/a/5471440/30594](https://stackoverflow.com/a/5471440/30594)

**更新：**

检查此链接以了解如何在 ASP.NET 中完成后台调度程序[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

另一种实现方式是使用 Windows 任务计划程序定期调用 .ashx

# jquery - jQuery 的 ajaxStart

> ID：10005624
> 
> 赞同：0
> 
> 时间：2012-04-04T05:52:44.527
> 
> 标签：jquery, ajax

我正在使用这样的结构：

```
$('#wait').ajaxStart(function() {
    if ($(this).not(':visible'))
        $(this).showWarning();
}).ajaxComplete(function() {
    if ($(this).is(':visible'))
        $(this).hideWarning();
}).ajaxError(function() {
    alert('Unexpected error...');
}); 
```

我想在用户每次点击它时禁用提交按钮。为了使其通用-我想在 ajaxStart 方法中执行此操作，那么有什么方法可以获取初始化请求的按钮 id？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:16:49.660

给所有提交按钮一个类，例如：`submitBtn`，然后

```
$('.submitBtn').ajaxStart(function() {
  $(this).prop('disabled', true);
}).ajaxComplete(function() {
  $(this).prop('disabled', false);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:02:57.983

假设您可以将按钮单击事件传递给此处的函数，您可以这样做：

```
$('#wait').ajaxSend(function(event) {        //pass event object
  $(event.target).css('disabled','disabled');   //get event target
  if ($(this).not(':visible'))
        $(this).showWarning();
}).ajaxComplete(function() {
    if ($(this).is(':visible'))
        $(this).hideWarning();
}).ajaxError(function() {
    alert('Unexpected error...');
}); 
```

# java - 我如何获得 xjc？

> ID：10005632
> 
> 赞同：15
> 
> 时间：2012-04-04T05:53:07.247
> 
> 标签：java, xml, xjc

因此，我一直在为我一直在从事的项目寻找与 xml 文件的接口，而我想做的一件事是从 .dtd 文件生成 java 类。经过一番搜索，我发现 xjc 应该能够做我想做的事，但我终生无法找到从哪里获得程序本身。

我觉得答案就在我面前，但我的 google-fu 现在真的让我失望了……

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2018-12-10T16:49:44.447

请注意，自 Java 11 起，JAXB 已从 JDK 中删除。它必须单独安装。`bin`ZIP 文件中有一个目录，我们可以在其中找到`xjc`和`schemagen`工具。

下载链接： [https ://javaee.github.io/jaxb-v2/](https://javaee.github.io/jaxb-v2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T05:58:12.260

我在安装java时得到它。它现在可能在您的系统上。查看java、javac等所在的目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T05:58:59.010

它是 JDK 的一部分。检查您的 Java bin 文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:05:54.637

xjc 是 JAXB 中的一个工具，它在 Java SE、Java EE 和 Java Web 服务中，我相信还有更多。在此处阅读[JAXB](http://www.java2s.com/Tutorial/Java/0440__XML/0100__JAXB.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-19T17:03:23.237

我在安装手动下载时遇到了一些问题`xjc`，正如其中一个答案`sudo apt-get install jaxb`所建议的那样，我按照我的 Linux 终端的建议成功了:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-04-27T03:55:42.747

如果您使用的是 ubuntu 并且 java 版本低于 9，那么这可能会有所帮助

```
$ sudo update-alternatives --install /usr/bin/xjc xjc /your_java_home_path/bin/xjc 100 
```

# jquery - 具有不同链接的 Jquery 日期选择器

> ID：10005641
> 
> 赞同：0
> 
> 时间：2012-04-04T05:54:00.540
> 
> 标签：jquery

我是 Jquery 的新手。我正在使用 JQuery DatePicker 作为日历条目，其中一些日期以不同的颜色显示，但我的问题是，当我想分配指向该日期的链接时，它现在运行良好......这是代码

**我也将粉红色和绿色定义为风格，并且效果很好。**

```
var events = {};
    events[new Date("02/14/2011")] = new Event("Valentines Day", "pink");
    events[new Date("02/18/2011")] = new Event("Payday", "green");

    $('#calender').datepicker({
        changeMonth : true,
        changeYear : true,
        beforeShowDay : function(date) {
            var event = events[date];
            if (event) {
                return [ true, event.className, event.text ];
            } else {
                return [ true, '', '' ];
            }
        },
        onSelect : function(date) {
            var event = events[date];
            alert(event.text ,"Event on " + date);
        }
    }); 
```

由于 beforeShowDay，日期 02/14/2011 和 02/18/2011 的标题完美运行，但是当我在 onSelect 中做同样的事情时，它显示未定义。提前谢谢......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:14:30.377

`onSelect`处理程序 (String) 中生成的日期类型与`beforeShowDay`处理程序 (Date) 中的类型不同。*仅*将`onSelect`处理程序的第一行替换为：

```
var event = events[new Date(date)]; 
```

PS：只会显示第一个`alert`参数

# asp.net - .NET 中的垃圾收集器

> ID：10005651
> 
> 赞同：4
> 
> 时间：2012-04-04T05:55:02.723
> 
> 标签：asp.net, .net, c#-4.0, garbage-collection

垃圾收集器如何知道对象和变量超出范围，以便它们可以被垃圾收集器收集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T06:07:14.627

简而言之：每个应用程序都有一组根。根标识存储位置，这些位置引用托管堆上的对象或设置为空的对象。

当垃圾收集器开始运行时，它会假设堆中的所有对象都是垃圾。

垃圾收集器开始遍历根并构建从根可到达的所有对象的图。

移除所有不可访问的对象（释放内存）

这取自[http://msdn.microsoft.com/en-us/magazine/bb985010.aspx](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx) - 关于垃圾收集的好文章。对你来说“有趣”的部分是“垃圾收集算法”。这不是一个很长的部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T19:33:49.020

如果不参考 Raymond Chen 的一系列优秀博客文章，关于 .NET 中垃圾收集的讨论是不完整的：

*   [每个人都以错误的方式思考垃圾收集](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx)
*   [对象何时可用于垃圾回收？](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/10/10048149.aspx)
*   [每个人都以错误的方式思考 CLR 对象（不是每个人）](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/10/10048150.aspx)
*   [我什么时候需要使用 GC.KeepAlive？](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/13/10049634.aspx)

以下是该系列第一篇文章的引述：

> 当你问别人什么是垃圾收集时，你得到的答案可能类似于“垃圾收集是指操作环境自动回收程序不再使用的内存。它通过跟踪内存来做到这一点从根开始识别哪些对象是可访问的。”
> 
> 这种描述混淆了机制和目标。就像说消防员的工作是“开红色卡车，喷水”一样。这是对消防员所做工作的描述，但它忽略了工作的重点（即扑灭火灾，更一般地说，消防安全）。

以下是他展示的一些有趣的观点：

> 一个正确编写的程序不能假设终结器将永远运行。

> *代码块中的对象可以在执行它调用的函数期间有*资格被收集。

> *当方法仍在执行时，方法*的参数可以被收集。

> 一个奇怪的现实类比：垃圾收集器可以在潜水员最后一次触摸你的跳水板时收集它——即使潜水员还在空中！

最简洁的：

> 不要将 GC 视为追根溯源。将 GC 视为删除您不再使用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-02T17:29:52.607

垃圾收集**器 (GC)**是 .NET 框架的一部分，它由**公共语言运行时 (CLR)**初始化，以管理应用程序中的内存分配和释放。

**垃圾收集器的类型**

垃圾收集器可以在多种场景中工作。CLR 提供以下类型的垃圾回收：

*   工作站垃圾收集 (GC) 在普通优先级线程上运行，可以并发或非并发，专为客户端应用程序设计
*   服务器垃圾收集是为服务器应用程序设计的，它为每个逻辑 CPU 创建一个单独的托管堆和一个相应的垃圾收集线程。线程以最高优先级运行，使其更快但更占用资源。在 .NET Core 中，.NET Framework 4.5 及更高版本的服务器垃圾回收可以是非并发的或后台的。在 .NET Framework 4 和以前的版本中，服务器垃圾回收是非并发的。

**并发垃圾回收** 并发垃圾回收允许用户线程在第 2 代垃圾回收的大部分时间运行。只要托管堆中仍有用于新分配的空闲空间，就允许用户线程运行并创建新对象。

[![在此处输入图像描述](../Images/082554fa9f247d63521ee725a5fddd70.png)](https://i.stack.imgur.com/l0fYq.png)

**非并发垃圾回收** 非并发垃圾回收会在整个垃圾回收期间暂停所有非垃圾回收线程，从而在这段时间内有效地暂停应用程序。

**后台垃圾收集** 后台垃圾收集是并发垃圾收集的替代品。它类似于并发垃圾收集，但允许第 0 代和第 1 代垃圾收集中断正在进行的第 2 代垃圾收集并暂时阻止程序执行。在第 0 代和第 1 代垃圾收集完成后，程序执行和第 2 代垃圾收集都将继续进行。这甚至进一步缩短了由于垃圾收集而暂停程序执行的时间。

**内存和托管堆** 一旦垃圾收集器由**公共语言运行时 (CLR)**初始化，它就会分配一段称为托管堆的内存段，与操作系统中的本机堆相反，用于存储和管理对象。

**对于每个托管进程，垃圾收集器使用 Windows VirtualAlloc**函数在托管堆中保留一段内存。（它使用 Windows **VirtualFree**功能将段释放回操作系统）。进程中的所有线程都为同一堆上的对象分配内存。

需要考虑的一件重要事情是，每个分配段的大小是特定于实现的，并且随时可能发生变化。

**世代**

存储到托管堆中的对象根据它们的年龄被组织成几代。垃圾回收主要发生在对通常只占用一小部分堆的短期对象的回收中。

*   **第 0**代：具有短期对象的最年轻一代（例如，临时变量或新分配的对象，除非它们是大对象，在这种情况下，它们会在第 2 代集合中的大对象堆上进行）
*   **第 1 代**：如果某些第 0 代对象占用的空间在垃圾收集运行时未释放，则这些对象将移至第 1 代并包含短期对象。
*   **第 2 代**。如果某些第 1 代对象占用的空间在下一次垃圾收集运行中未释放，则这些对象将移至第 2 代。这一代包含长期存在的对象（即服务器应用程序中的对象，其中包含为过程的持续时间）。

当垃圾收集器检测到某一代的存活率很高时，它会增加该代的分配阈值。

**垃圾收集器阶段**

收集由以下条件之一触发：

*   系统物理内存不足。这可以通过来自操作系统的内存不足通知或主机指示的内存不足来检测。

*   托管堆上分配的对象使用的内存超过了可接受的阈值。随着流程的运行，此阈值会不断调整。

*   GC.Collect 方法被调用。在几乎所有情况下，您都不必调用此方法，因为垃圾收集器会持续运行。

此时垃圾收集器通过抛出以下阶段：

1.  **标记阶段**
    ：GC 通过 使用以下信息来确定对象是否处于活动状态，从而创建所有活动对象的列表（所有不在列表中的对象都可能被删除） ：

    *   **堆根。**即时 (JIT) 编译器和堆栈遍历器提供的堆栈变量。JIT 优化可以延长或缩短向垃圾收集器报告堆栈变量的代码区域。
    *   **垃圾收集手柄。**指向托管对象并且可以由用户代码或公共语言运行时分配的句柄。
    *   **静态数据**。应用程序域中可能引用其他对象的静态对象。每个应用程序域都跟踪其静态对象。
2.  **重定位阶段**：所有活动对象列表中的所有对象的引用在重定位阶段更新，以便它们指向在压缩阶段对象将被重定位的新位置。压缩阶段：回收死对象占用的空间并压缩幸存对象。压缩阶段将在垃圾收集中幸存下来的对象移向段的较旧端。堆在压缩阶段被压缩，因为死对象占用的空间被释放并且剩余的活动对象被移动。垃圾回收后剩余的所有活动对象按其原始顺序移向堆内存的旧端

**资源**

**官方文档**：[https ://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/fundamentals](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/fundamentals)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-04T05:59:56.300

请浏览[http://msdn.microsoft.com/en-us/magazine/bb985010.aspx](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)。正如它所说

*垃圾收集器检查堆中是否有应用程序不再使用的对象。如果存在此类对象，则可以回收这些对象使用的内存。*

# c# - SqlCommand CommandTimeout 属性

> ID：10005663
> 
> 赞同：0
> 
> 时间：2012-04-04T05:57:26.293
> 
> 标签：c#, asp.net, database-connection

我开发了一个 web 应用程序 asp.net C#。

在按钮上单击我正在连接到需要很长时间才能执行的数据库。最初它用于超时。现在我增加了 commondtimeout 属性，

```
cmd.CommandTimeout = 500; 
```

基本上它处理支付组。所需时间取决于该薪酬组中的雇员人数。

所以我的问题是，如果支付组 1 需要更少的时间来执行比如说 2 或 3 分钟，那么连接是否会在 commandtimeout 属性中的指定时间内打开？

如果是 。我们可以估计处理时间并相应地设置时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:01:32.573

你为什么不试试这样的东西

```
using (SqlConnection cn = new SqlConnection(connectionString)) 
{
  //your codee to perform database operation
} 
```

一旦您的工作完成，这将关闭您的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:31:26.647

1.  为了让查询完全执行，设置`CommandTimeOut = 0`.
2.  为什么要花这么多时间？您的事务应该足够快以让其他查询及时执行。
3.  `SQL Profiler`可以帮助您优化数据库查询。我假设您使用的是 SQL Server

# php - Yii 框架实时表单验证与不同场景

> ID：10005664
> 
> 赞同：0
> 
> 时间：2012-04-04T05:57:28.767
> 
> 标签：php, validation, yii

我有两个 ajax 按钮检查两个不同场景的表单。问题是，当我使用场景来检查部分表单时，所有实时验证（输入颜色和 div 错误）都不起作用。事实上，当用户关注其中一个字段时，它会将其标记为绿色（验证通过）。但是当用户点击提交按钮时，如果他没有正确填写输入，它会告诉用户他没有通过表单。

当用户填写不正确的字段时，如何在输入颜色和错误 div 上实时显示此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:18:28.943

你应该在 Yii 中激活 ajax 验证！我认为有一个选项可以在填充框和其他元素时进行验证！我确定。我遇到了这个问题并成功解决了！使用 Yii 表单助手生成表单，设置表单类选项以进行主动验证，请原谅我的简短回答。

# asp.net - 保护 Web 服务：Asmx 或 WCF

> ID：10005675
> 
> 赞同：1
> 
> 时间：2012-04-04T05:58:27.970
> 
> 标签：asp.net, wcf, security, asmx

我有一个 Web 服务 (asmx)，方法很少。目前只有几个客户使用它，而且它们很灵活。我遇到的问题是服务没有安全基础设施，几乎任何人都可以调用它。这种行为是不希望的。我想要的是为我的服务设置一些安全机制，以便用户可以传递登录凭据，并且我还希望在一段时间内记住客户端的登录，即我不必为每个请求都去 db。我已经浏览了[这篇文章](http://www.codeguru.com/csharp/csharp/cs_webservices/security/article.php/c5479/Build-Secure-Web-Services-With-SOAP-Headers-and-Extensions.htm)这对我来说似乎已经足够好了。唯一让我烦恼的是我必须在每个请求上检查数据库以进行用户身份验证。有没有办法，我可以覆盖（改变）这种行为。我还阅读了几篇关于 WSE 3.0 的文章，但在 VS 2010 中启用它似乎是一种 hack，我宁愿寻找更清洁的替代方案。由于我的客户很灵活，我也可以转到 wcf。如果 wcf 或 asmx 中有任何这样的东西，请指导我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:05:01.820

WSE 已过时，除非没有其他选择，否则不应使用。

ASMX 是一项遗留技术，不应用于新开发。

WCF 应该用于所有新的开发。

# java - 学习 Apache POI

> ID：10005678
> 
> 赞同：1
> 
> 时间：2012-04-04T05:58:32.777
> 
> 标签：java, apache-poi

我正在开发一个需要使用 Java 操作 MS Word 文档的项目。我发现这`Apache POI`是最好的 API。但我无法从[这个链接](http://poi.apache.org/hwpf/index.html)正确理解 POI 的使用。另外，我无法从[这里](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/src/org/apache/poi/)SVN 签出源代码。谁能帮我使用 POI 或一些示例代码。谢谢。

编辑：我可以编辑现有的 Word 模板文档并将占位符替换为我想要使用 POI 的文本吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T06:07:19.540

1) 您可以[在此处将 POI](http://poi.apache.org/download.html)[下载](http://poi.apache.org/download.html)为 .zip 或 .tar.gz 文件（WinZip 应该理解这两种格式）。

2) 快速指南在[这里](http://poi.apache.org/hwpf/quick-guide.html)。

3)[本快速指南](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/testcases/org/apache/poi/hwpf/)指向单元测试，这些测试提供了出色的示例代码。

4) 这是另一个很好的[方法](http://www.javatips.net/blog/2011/12/read-and-write-excel-with-java-poi)（它适用于 Excel，但适用于 Word）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T06:02:13.717

您需要繁忙[的开发人员指南](http://poi.apache.org/spreadsheet/quick-guide.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:07:22.957

Apache POI 实际上包含许多 API，每个 API 都提供操作特定文件的能力。每个 API 的手册可以在[Apache POI](http://poi.apache.org/)中找到，您可以在左侧看到 API 列表，其中链接到各个页面。您可以在其中找到快速指南。

最后，您可以在下载页面下载源代码分发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:05:24.923

试试这个网站：[http ://www.roseindia.net/java/poi/](http://www.roseindia.net/java/poi/)

它包含代码示例。

# github - github，公众或谷歌帐户用户是否可以报告问题？

> ID：10005679
> 
> 赞同：3
> 
> 时间：2012-04-04T05:58:34.383
> 
> 标签：github, public, bug-reporting

公众（通过验证码？）或谷歌登录是否可以在 Github 中报告问题？还是必须将他们添加为协作者并在 github 上注册？

抱歉，这似乎是一个简单的问题，但正如您可以想象的那样，在谷歌上搜索“github 公开报告问题”之类的东西并不高效......

这是一个相关的问题，但也许信息已过时？听起来答案是“如果你想要公开问题报告，请使用谷歌代码” [谷歌代码 + SVN 或 GitHub + Git](https://stackoverflow.com/questions/807782/google-code-svn-or-github-git)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:13:35.217

不，您必须是注册并登录的 GitHub 用户才能报告新问题。

# c - ARM 项目中的板支持库链接错误

> ID：10005687
> 
> 赞同：0
> 
> 时间：2012-04-04T05:59:54.477
> 
> 标签：c, eclipse, arm, building, code-composer

我在 Code Composer Studio ver5 中有一个 ARM 项目（用于通用 ARM9 设备）（实际上它是修改后的 eclipse）。项目性质：

```
Device:         Generic ARM9 Device
Compiler        version: TI v4.9.1 
Output format:  eabi (ELF) 
ARM Linker File Search Path: "C:/workspace/bsl/lib/evmomapl138_bsl.lib" 
```

我得到了链接错误

```
"C:/ti/ccsv5/tools/compiler/tms470/bin/cl470" -mv5e --code_state=32 --abi=eabi 
-me -g --diag_warning=225 --display_error_number -z -m"prog.map" 
-i"C:/ti/ccsv5/tools/compiler/tms470/lib" -i"C:/ti/ccsv5/tools/compiler/tms470/include"
--reread_libs --warn_sections --rom_model -o "prog.out"  "./main.obj" 
-l"C:/workspace/bsl/lib/evmomapl138_bsl.lib" -l"libc.a" "../lnk.cmd" 

<Linking>
undefined        first referenced
symbol              in file     
---------        ----------------
I2C_init         ./main.obj      
LED_turnOn       ./main.obj      
LIDD_init        ./main.obj      
LIDD_writeString ./main.obj      
USTIMER_delay    ./main.obj      
USTIMER_init     ./main.obj      

error #10234-D: unresolved symbols remain
error #10010: errors encountered during linking; "prog.out" not built 
```

这些函数的所有定义都在 evmomapl138_bsl.lib 中。100%

PS我也尝试将“evmomapl138_bsl.lib”放在“包含库文件或命令文件作为输入”中，并将此文件的路径“C：/workspace/bsl/lib”放在“添加到库搜索路径”中

我也尝试在“/”中使用“\”

这里有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:41:47.103

evmomapl138_bsl.lib 是一个 C6000 库。所以它不能不适用于ARM。有 OMAPL138_StarterWare 库（可以在[http://www.ti.com/tool/starterware-dsparm](http://www.ti.com/tool/starterware-dsparm)上找到）。所以这个库有 DSP 和 ARM 芯片组的库

# mongodb - Mongo DB 有内存模式吗？

> ID：10005697
> 
> 赞同：28
> 
> 时间：2012-04-04T06:01:34.363
> 
> 标签：mongodb, ravendb, in-memory-database

> **可能重复：**
> [运行集成测试时的嵌入式 MongoDB](https://stackoverflow.com/questions/6437226/embedded-mongodb-when-running-integration-tests)

我想使用 In-Memory 模式进行单元测试，是否有像 RavenDB 这样的 In-Memory 模式？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-04T06:14:21.873

MongoDB 没有内存模式。根据[此](https://jira.mongodb.org/browse/SERVER-1153)链接，至少要到 MongoDB 2.8 才会包含此功能。

虽然由于它使用的是内存映射 IO，但在实际处理过程中它应该和内存一样快。虽然不是启动。

此外，还有一个 hack 可以使用 RAM 磁盘驱动器并将您的 mongo db 放在那里。这样一来，它将完全在内存中。

# ruby-on-rails-3 - Helper 方法仅在 Heroku 上的 do 循环中抛出“无法将 nil 转换为字符串”

> ID：10005698
> 
> 赞同：0
> 
> 时间：2012-04-04T06:01:43.770
> 
> 标签：ruby-on-rails-3, heroku

这是我的索引视图模板中的代码：

```
<% @locations.each do |location| %>
  <tr>
    <td><%= link_to formatted_uwi(location.uwi), location_path(location) %></td>
    <td><%= location.name %></td>
    <td><%= location.created_at %></td>
    <td>
      <%= link_to 'Edit', edit_location_path(location), :class => 'btn btn-mini' %>
      <%= link_to 'Destroy', location_path(location), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>
    </td>
  </tr>
<% end %> 
```

它在我的本地开发系统上运行良好，但在专业和开发环境中的 Heroku 上失败。我得到：

`"TypeError... can't convert nil into String"`

`formatted_uwi`是一个格式化 location.uwi 输入的简单助手。如果我只调用 'location.uwi' 或在其中使用实际字符串，它可以正常工作并显示原始 location.uwi 值，所以我知道它不是 nil 值。我什至尝试了 location.uwi.to_s。

很奇怪。我可以在节目、编辑和其他视图上调用这个助手，它工作正常。它只在 Heroku 上的 do 循环 AND 中失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:11:34.767

不知道我做了什么，但我通过我的助手回去接住零，现在它似乎工作了。

# asp.net-mvc-3 - MVC 忽略对控制器的请求

> ID：10005705
> 
> 赞同：2
> 
> 时间：2012-04-04T06:02:28.500
> 
> 标签：asp.net-mvc-3

我有一个基本控制器，如果需要，我想被忽略，通过使用这样的 IgnoreRoute 方法，`routes.IgnoreRoute("IgnoreThis");`我已经能够匹配控制器，随后它被忽略（返回 404）。

但是，如果我输入以下 URL [http://mysite/IgnoreThis/SomeAction](http://mysite/IgnoreThis/SomeAction)，则忽略的路由不再匹配。

为了使用与任何以“IgnoreThis”开头的路由匹配的正则表达式，我需要使用什么语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:13:43.480

在下面试试这个。

```
routes.IgnoreRoute("IgnoreThis/{*pathInfo}"); 
```

# javascript - 检查按钮的onclick事件条件

> ID：10005706
> 
> 赞同：0
> 
> 时间：2012-04-04T06:02:31.483
> 
> 标签：javascript

是否可以检查按钮事件是否（条件）onclick？因为我需要检查两个单独的 .js 文件中的函数。此外，这两个函数都应返回 true 以继续前进。

```
Example:

<input type="button" name="saveButton" onclick="" value="Save" />

Two functions are validateSelect() in one .js file and validateSave() in 
another .js file. 
```

只有当 validateSelect() 返回 true 时才会调用 validateSave()。那么我们可以检查按钮的onclick事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:08:13.260

根据我对你问题的理解，

```
<input type="button" name="saveButton" onclick="Save();" value="Save" />

function Save(){
if(validateSelect())
{
    validateSave();
}
return false;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:06:37.380

```
<input type="button" name="saveButton" onclick="if(validateSelect()&&validateSave()){doSomething();}" value="Save" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:11:24.913

函数是否在不同的 JS 文件中并不重要（只要两个文件都包含）。

你可以说

```
if (validateSelect() &&validateSave()) {
    /* do something */
} 
```

使用 && 运算符，如果左侧操作数为 false，则不会计算右侧操作数，因此仅当 validateSelect() 返回 true 时才会调用 validateSave()。

如果您想将其直接放在您的内联 onclick 中，您可以将以上所有内容放在一行中。

# objective-c - 我可以从其他班级获得 NSString 吗？

> ID：10005708
> 
> 赞同：0
> 
> 时间：2012-04-04T06:02:45.333
> 
> 标签：objective-c, class, nsstring, init

好吧，我有 2 个班级，想将 NSString 从 class2 获取到 class1。

我哪里错了？

类1.h

```
#import <Cocoa/Cocoa.h>
#import "class2.h"
@class class2;
@interface class1 : NSObject
-(IBAction)getstringfromclass2(id)sender;
@end 
```

类1.m

```
#import "class1.h"
@implementation class1
-(IBAction)getstringfromclass2(id)sender {
    class2 *controller = [[class2 alloc] init];
    NSLog(@"%@", [controller getstring]);
}
@end 
```

类2.h

```
#import <Cocoa/Cocoa.h>
@interface class2 : NSObject {
    NSString *astring;
}
-(NSString)getstring;
@property (readwrite,retain) NSString *astring;
@end 
```

类2.m

```
#import "class2.h"
@synthesize astring;
@implementation class2
-(NSString)getstring {
    return [self astring];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:06:15.090

检查你的一些表达。NSString -> NSString *

```
#import <Cocoa/Cocoa.h>
@interface class2 : NSObject {
    NSString *astring;
}
-(NSString *)getstring;
@property (readwrite,retain) NSString *astring;
@end
class2.m

#import "class2.h"
@synthesize astring;
@implementation class2
-(NSString *)getstring {
    return [self astring];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:05:28.927

您需要返回一个指向`NSString`：

```
-(NSString*)getstring {
    return [self astring];
} 
```

和：

```
-(NSString*)getstring; 
```

# c++ - 为什么我的程序在 return 语句处崩溃？

> ID：10005709
> 
> 赞同：8
> 
> 时间：2012-04-04T06:02:45.300
> 
> 标签：c++, exception-handling

执行以下代码时出现异常

```
bool FieldValueMessage::Get(const std::string &field, double & value)
{
    string text;
    if(Get(field,text))
    {
        std::stringstream sstr(text);
        sstr >> value;
        if(sstr.fail())
            return false;
        else
            return true;
    } 
    else 
    {
        return false;
    }        
} 
```

获取函数如下

```
bool HashMapMessage::Get(const std::string &field, std::string & value)
{
    Field2Value::iterator i = f2v.find(field);
    if(i==f2v.end()){
        return false;
    } else {
        value = i->second;
        return true;
    }
} 
```

Get 函数的调用者。我在这里没有看到任何问题。

```
for(i=quote_fields.begin(),j=0;i!=quote_fields.end();i++,j++){
    if (msg->Get((*i).c_str(),tmp)){
        if(tmp>0 && x->staging_data[j+1]!=tmp){
            x->staging_data[j+1] = tmp;
            has_update = true;
        }
    }
} 
```

调用堆栈是

```
ntdll.dll!_RtlpCoalesceFreeBlocks@16()  + 0x35 bytes    
ntdll.dll!_RtlFreeHeap@12()  + 0x91f bytes  
msvcr90.dll!_free()  + 0xcd bytes   
msvcp90.dll!std::locale::`scalar deleting destructor'()  + 0x19 bytes   
msvcp90.dll!std::ios_base::_Ios_base_dtor()  + 0x39 bytes   
msvcp90.dll!std::basic_stringstream<char,std::char_traits<char>,std::allocator<char> >::`vbase destructor'()  + 0x19 bytes  
asapGeneric.dll!asap::FieldValueMessage::Get(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & field="ASK", double & value=0.055000000000000000)  Line 33 + 0x17 bytes   C++
_hdf.pyd!asap::TradeAndQuoteNormalizer::ParseQuote(asap::FieldValueMessage * msg=0x027194c0, asap::TAQ * taq=0x02716908)  Line 84 + 0x36 bytes  C++ 
```

字段的值为“ASK”。

这段代码运行良好，没有任何问题，但现在我在“return true”语句中遇到异常。

当我调试程序时...`sstr.fail()`返回`false`。指针来`return true;`声明。此时，当我执行单个步骤时，突然出现未处理的异常：从位置 xxxxx 读取访问冲突。我从未在 return 语句中看到异常。在这种情况下有什么不正确的？这个 c++ 程序是从 python 脚本调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:12:02.840

对上述帖子的回答实际上是对该问题的评论集合。不止一个回复帮助我找到了解决方案。上述情况的问题是我没有正确初始化暂存数据。它应该是一个大小与 quote_fields 相同的数组，但它被初始化为长度 1。所以第一个元素已正确更新，但在 quote_fields 数组中的第二个元素被读取期间，我遇到了异常。显然，只要我尝试访问不正确的元素，就不会引发异常。异常来自 stringstream 析构函数。根据 Retired Ninja，异常不会立即引发，而是直到堆尝试在稍后的时间点合并 2 个空闲块，如调用堆栈中所示。

# asp.net-mvc - 是否有与 HTML.DropDownList 等效的在 MVC3 中创建无序列表？

> ID：10005716
> 
> 赞同：0
> 
> 时间：2012-04-04T06:03:18.940
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的控制器中，我使用以下内容：

```
ViewBag.ReferenceId = new SelectList(_reference.Get("00")
   .AsEnumerable()
   .OrderBy(o => o.Order), "RowKey", "Value", "00"); 
```

然后在我看来，我使用以下扩展来创建一个下拉列表：

```
@Html.DropDownList("ReferenceID", 
   null, 
   new { 
     id = "ReferenceID", 
     @class = "combobox2", 
     style="width: 150px;"
   }
) 
```

现在我想改变它来创建一个无序列表。类似于以下内容：

```
<ul id="categories" class="pane list">
   <li><a href="#">Websites</a></li>
   <li><a href="#">Web Design</a></li>
   <li><a href="#">Print</a></li>
</ul> 
```

是否有任何 MVC 扩展可以为我执行此操作，或者是否有一种简单的方法可以编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:20:53.587

没有等价物，尽管您可以像这样自己编写它：

```
tagsList = "<ul>{0}</ul>";
tagsListItem = "<li>{0}</li>";
StringBuilder result = new StringBuilder();
list.ForEach(listItem => result.AppendFormat(tagsListItem, item.ToString()));
return string.Format(tagsList, result.ToString()); 
```

你可以根据你的需要来调整代码（比如添加额外的标签、属性等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:36:52.443

编写您的 HtmlHelper [http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)但最好的方法是浏览 MVC 源代码并学习[http://aspnet。 codeplex.com/SourceControl/changeset/view/72551#288014](http://aspnet.codeplex.com/SourceControl/changeset/view/72551#288014)或使用 foreach。

```
<ul id="categories" class="pane list">
@foreach(var category in categories)
{
  <li><a href="#">@category</a></li>
}

</ul> 
```

问候

# android - 使用 FragmentPagerAdapter 替换 ViewPager 中的片段

> ID：10005728
> 
> 赞同：0
> 
> 时间：2012-04-04T06:04:59.977
> 
> 标签：android, android-fragments, android-viewpager

我正在使用一个有 4 个页面的 ViewPager，并且我正在寻找一种有效的方法来替换/切换每个页面中的片段。

这是我正在尝试创建的交互模式：

1.  用户在当前包含片段 A 的页面上按下按钮
2.  片段 A 被替换为一些新的片段 B
3.  用户在片段 B 中做一些工作，然后在他/她完成后按下按钮
4.  片段 B 被移除，并被片段 A（原始片段）替换

我找到了一种方法来做到这一点，但它似乎有很大的缺陷。该解决方案涉及删除原始片段，然后覆盖`getItemPosition`（基本上是此[相关问题](https://stackoverflow.com/a/9127423/812868)中描述的方法）：

```
//An array to keep track of the currently visible fragment in each page
private final Fragment[] activeFragments= new Fragment[4];

public void openFragmentB(ViewPager pager, int position) {

    startUpdate(pager);

    //Remove the original fragment
    FragmentTransaction transaction = fragmentManager.beginTransaction();
    transaction.remove(activeFragments[position]);
    transaction.commit();

    //Create a new tile search fragment to replace the original fragment
    activeFragments[position] = FragmentB.newInstance();
    pageStates[position] = PageState.STATE_B;

    finishUpdate(pager);
    notifyDataSetChanged();
}

@Override
public int getItemPosition(Object object) {

    //If the main fragment is not active, return POSITION_NONE
    if(object instanceof FragmentA) {
        FragmentA a = (FragmentA) object;
        if(pageStates[a.getPosition()] != PageState.STATE_A) {
            return POSITION_NONE;
        }
    }

    //If the secondary fragment is not active, return POSITION_NONE
    if(object instanceof FragmentB) {
        FragmentB b = (FragmentB) object;
        if(pageStates[b.getPosition()] != PageState.STATE_B) {
            return POSITION_NONE;
        }
    }

    return POSITION_UNCHANGED;
} 
```

这种方法有效，但有不良副作用。移除片段并将其位置设置为 POSITION_NONE 会导致片段被销毁。因此，当用户完成使用 FragmentB 时，我需要创建一个新的 FragmentA 实例，而不是重用原始片段。寻呼机中的主要片段（本例中为 FragmentA）将包含相对较大的数据库支持列表，因此我希望尽可能避免重新创建它们。

本质上，我只想保留对我的 4 个主要片段的引用，并将它们换入和换出页面，而不必每次都重新创建它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:00:54.487

避免重新创建 Fragments 的一种简单方法是将它们作为成员变量保留在 Activity 中。无论如何，我都会结合 onRetainCustomNonConfigurationInstance() 执行此操作，以便在配置更改（主要是屏幕旋转）期间保留我的片段。我将片段保存在“保留器”对象中，因为 onRetainCustomNonConfigurationInstance 只返回一个对象。

在您的情况下，不是一直调用 Fragment.newInstance() ，而是在创建新的之前检查保留器对象中包含的片段是否为空。如果它不为空，只需重新使用前一个实例。这种检查应该发生在您的 ViewPager 适配器的 getItem(int) 方法中。

实际上，这样做基本上意味着您正在处理调用 getItem 时是否回收 Fragments，并覆盖 getItemPosition(Object) 方法以在相关 Segment 时始终返回 POSITION_NONE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T22:35:54.813

FragmentPagerAdapter 提供了一个可覆盖的方法`getItemId`，该方法将在此处为您提供帮助。

如果您为集合中的每个 Fragment 分配一个唯一的 long 值，并在此方法中返回该值，它将强制 ViewPager 在发现 id 已更改时重新加载页面。

迟到总比没有好，我希望这可以帮助那里的人！

# c# - 如何根据另一个 DataTable 列值更新数据表列值？

> ID：10005730
> 
> 赞同：-1
> 
> 时间：2012-04-04T06:05:09.817
> 
> 标签：c#, datatable, dataset

我有两个数据表

```
DataTable dt1=new DataTable();
DataTable dt2=new DataTable(); 
```

我想根据其他数据表列值更新列的值之一。

例如：

`dt1`包含列`[setFamilyno] ["HouseNo"] ["Surname"]`

`dt2`包含相同的列

我想`[setFamilyno]`更新`dt1 DataTable`.

*   如果`dt1["HouseNo"] ["Surname"]`等于，`dt2["HouseNo"] ["Surname"]`则为 dt1 表中的所有此类匹配设置 dt1 DataTable 的值 1。对于下一行 from`dt2["HouseNo"] ["Surname"]`等于然后为所有此类匹配`dt1["HouseNo"] ["Surname"]`设置值..`[setfamilyno]=2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:54:55.913

```
DataView view = new DataView(Datatble);
int viewcount = view.Count;

DataTable distinctValues = view.ToTable(true, "SurNameEnglish", "HouseNumber");
int distinctcount = distinctValues.Rows.Count;

int cnt = 1;
 for (int j = 0; j < distinctcount; j++)
                {

                    string surname = distinctValues.Rows[j]["SurNameEnglish"].ToString();
                    string Housenumber = distinctValues.Rows[j]["HouseNumber"].ToString();
                    for (int i = 0; i < viewcount; i++)
                    {
                        if (Datatble.Rows[i]["SurNameEnglish"].Equals(surname) && Datatble.Rows[i]["HouseNumber"].Equals(Housenumber))
                        {

                            Datatble.Rows[i]["Family"] = cnt;
                            Datatble.AcceptChanges();

                        }
                    }
                    cnt++;

                }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:38:41.377

尝试使用[ForeignKeyConstraint创建](http://msdn.microsoft.com/en-us/library/system.data.foreignkeyconstraint.aspx)[DataRelation](http://msdn.microsoft.com/en-us/library/dz0az7c7.aspx)。帮助将足以知道如何去做。

# python - 让 python 进程运行类似于 redis 进程的运行方式（在后台）

> ID：10005735
> 
> 赞同：1
> 
> 时间：2012-04-04T06:05:53.447
> 
> 标签：python, process, redis, bottle

我在 上问过这个问题`superuser`，但没有得到答复。也许这里会更合适。

当我使用 启动我的 redis 服务器时`redis-server`，即使在我关闭终端或注销后，当我重新登录时该进程仍然存在，但`python server.py`如果我关闭终端或注销，我的 python 瓶服务器将关闭。如何在 python 中获得与 redis 类似的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:08:48.590

简单的方法是通过 screen 或 tmux 运行该过程。

您也可以尝试使用例如Unix 上[的 python-daemon](http://pypi.python.org/pypi/python-daemon)或各种其他方法来运行守护程序。

# sql - 如何从同一张表中加入两次。按同一列分组

> ID：10005739
> 
> 赞同：-1
> 
> 时间：2012-04-04T06:06:03.130
> 
> 标签：sql, sql-server-2008

我这里有个小问题。我想从同一个表中加入两次，并按一个共同的值分组。
这是数据集（来自表 Voucher）：

```
Date (dd/mm/yyyy)   Amount
--------------------------
01.01.2010          1.000
15.01.2010          2.000
01.03.2010          3.000
01.03.2010          4.000
01.05.2010          5.000
01.01.2011          1.000
01.02.2011          2.000
01.04.2011          3.000
15.04.2011          4.000
01.05.2011          5.000 
```

结果应该是这样的：

```
Month   Amount 2010   Amount 2011
---------------------------------
1       3.000         1.000
2                     2.000
3       7.000
4                     7.000
5       5.000         5.000 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:25:21.757

这些方面的东西将适用于这种情况：

```
SELECT
    DATEPART(month,[Date]) as Month,
    SUM(CASE WHEN DATEPART(year,[Date]) = 2010 THEN Amount END) as [Amount 2010],
    SUM(CASE WHEN DATEPART(year,[Date]) = 2011 THEN Amount END) as [Amount 2011]
FROM
    Voucher
GROUP BY
    DATEPART(month,[Date]) as Month 
```

对于其他情况，您可能需要查看[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410.aspx).

`Date`是一个非常糟糕的列名称。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-04T06:17:10.677

您必须为表提供不同的名称，如本例所示：

```
SELECT Fruit1, F1FruitName = F1.FruitName, F1FruitCost = F1.FruitCost,
Fruit2, F2FruitName = F2.FruitName, F2FruitCost = F2.FruitCost FROM T1
JOIN T2 F1 ON Fruit1 = F1.Fruit_ID
JOIN T2 F2 ON Fruit2 = F2.Fruit_ID 
```

具体语法取决于您的数据库系统。

# javascript - JSON 到 DOM 还是 innerHTML？

> ID：10005743
> 
> 赞同：3
> 
> 时间：2012-04-04T06:06:35.453
> 
> 标签：javascript, json, dom, innerhtml

我有这个代码：

```
try {
    var _o, _l, i, _d = new Array(), _c;
    _o = JSON.Parse( Request.Response );
    for ( i = 0, _l = _o.length; i < _l; i++ ) {
        _d[ i ] = document.createElement('div');
        _c = document.getElementById('comentsContainer');
        _c.removeChild( _c.firstChild );
        _d[ i ].className = 'comment-user';
        _c.appendChild( _d [i] );
    }
}
catch ( w ) {
    console.log( w );
} 
```

问题是，这种方式更好还是我应该使用 innerHTML ？

添加：要解析的对象：

```
"comments" : [
  { "user" : "foo", "comment" : "foo", "date" : "foo/foo/bar", "id_comment" : "bar" },
  { /* the same as above x10 */ }
] 
```

请注意，我想将每个数组中的每个对象解析为 DOM 元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:21:29.873

由于您在这里已经有了数据的结构表示（而不是要解析的原始 HTML），我想说您的方法（使用 DOM 操作方法）比使用围绕`.innerHTML`. 在某些情况下，`.innerHTML`已经证明是性能上的胜利，但我不确定在具有良好 JavaScript 引擎的现代浏览器上是否会出现这种情况。此外，将一个 HTML 块放入属性中可能会获得的很多好处`innerHTML`是，无论如何您都必须从您的`JSON`表示中构建该 HTML，这也需要时间。由于您必须处理`JSON`对象，因此使用 DOM 操作方法是一种明智的设计方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:35:08.437

我会说`DOM`操作是一种更简洁的方法：`innerHTML`有点`spaghetti code`，您将标记语言与行为（JavaScript）混合在一起，并且最后没有清晰的结构。此外，在大多数现代浏览器中，在性能`DOM API`方面都更快或相当`innerHTML`——不幸的是 IE 和 Opera 并非如此：

[http://jsperf.com/innerhtml-or-dom/4](http://jsperf.com/innerhtml-or-dom/4)

所以，去吧`DOM APIs`，也许你可以清理和优化你的代码（例如，你不需要执行`getElementById`每个循环来获取 commentsContainer 引用，你可以把它放在外面；也不知道为什么你每次都删除第一个孩子您添加评论，在我看来，您可能会删除之前添加的评论，在这种情况下也可以进行优化）。

# php - 如何在目标 c 中使用 post 字段进行简单的 curl 调用？

> ID：10005747
> 
> 赞同：-2
> 
> 时间：2012-04-04T06:07:11.093
> 
> 标签：php, iphone, objective-c, curl

更具体地说，这是我在目标 c 中需要做的，这相当于什么？

```
$ch=curl_init();
curl_setopt($ch, CURLOPT_URL,"api.example.com");
curl_setopt($ch, CURLOPT_POSTFIELDS, "a message to the site");
curl_setopt($ch, CURLOPT_CUSTOMREQUEST,"GET" );
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: Application/json'));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$server_output = curl_exec ($ch);
curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:12:27.260

`NSURLRequest`使用and怎么样`NSURLConnection`。

`NSURLRequest`**：您可以使用URL**初始化它，将**POST**变量设置为**HTTP** Body，确保正确设置头部（例如：google 示例）。

然后加载`NSURLRequest`一个`NSURLConnection`，甚至是异步的，你想要的同步的。

请参阅[将数据附加到 POST NSURLRequest](https://stackoverflow.com/questions/6148900/append-data-to-a-post-nsurlrequest)和[iPhone 使用 NSURLConnection 发送 POST](https://stackoverflow.com/questions/2071788/iphone-sending-post-with-nsurlconnection)

# heroku - 在 Heroku 上部署 Play 2.0 应用

> ID：10005755
> 
> 赞同：1
> 
> 时间：2012-04-04T06:07:50.283
> 
> 标签：heroku, bind, playframework-2.0

所以我对设置服务器有点陌生。而且我整晚都在为各种 sql 问题苦苦挣扎。我认为我和成功运行的游戏应用程序之间的唯一障碍是：错误

```
Starting process with command `target/start -Dhttp.port=80 `
2012-04-04T05:58:52+00:00 app[web.1]: Play server process ID is 1
2012-04-04T05:58:53+00:00 app[web.1]: [info] play - database [default] connected at jdbc:mysql://us-cdbr-east.cleardb.com/heroku_cd914b667dae168
2012-04-04T05:58:56+00:00 app[web.1]: [info] play - Application started (Prod)
2012-04-04T05:58:56+00:00 app[web.1]: Oops, cannot start the server.
2012-04-04T05:58:56+00:00 app[web.1]: org.jboss.netty.channel.ChannelException: Failed to bind to: /0.0.0.0:80
... more errors 
```

有没有人发现任何问题？我需要任何 java 选项参数吗？

我尝试在 中指定用户端口，但`Procfile`收到了不同的错误消息：

```
2012-04-04T07:01:36+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=2000`
2012-04-04T07:01:37+00:00 app[web.1]: Play server process ID is 1
2012-04-04T07:01:40+00:00 app[web.1]: [info] play - database [default] connected at jdbc:mysql://us-cdbr-east.cleardb.com/heroku_cd914b667dae168
2012-04-04T07:01:45+00:00 app[web.1]: [info] play - Application started (Prod)
2012-04-04T07:01:45+00:00 app[web.1]: [info] play - Listening for HTTP on port 2000...
2012-04-04T07:01:46+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 2000, should be 47248 (see environment variable PORT)
2012-04-04T07:01:46+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-04-04T07:01:47+00:00 heroku[web.1]: Process exited with status 137
2012-04-04T07:01:47+00:00 heroku[web.1]: State changed from starting to crashed 
```

我不知道发生了什么。如何更改此环境变量？这个heroku流程模型让我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:40:18.847

我认为问题在于您不允许 Heroku 指定端口。谷歌搜索你的错误我发现：[https ://devcenter.heroku.com/articles/error-codes#r11__bad_bind](https://devcenter.heroku.com/articles/error-codes#r11__bad_bind)

所以不要这样做：

> 网络：目标/开始 -Dhttp.port=80

做这个

> 网络：目标/开始 -Dhttp.port=$PORT

James 有一篇关于在[此处](http://www.jamesward.com/2012/02/21/play-framework-2-with-scala-anorm-json-coffeescript-jquery-heroku)部署更高级的 Play 2.0 应用程序的文章。

# ios5 - 控制 LocalNotification 音量？

> ID：10005756
> 
> 赞同：2
> 
> 时间：2012-04-04T06:07:51.490
> 
> 标签：ios5

有没有办法在ios中设置LocalNotification的音量。我已经写了这段代码，它工作得很好，但是我没有办法设置本地通知的音量。代码如下：

UILocalNotification *localNotification =[[UILocalNotification alloc]init];

```
if (localNotification==nil) {
    return;
}

localNotification.fireDate=date;
localNotification.timeZone=[NSTimeZone defaultTimeZone];
localNotification.repeatCalendar=[NSCalendar currentCalendar];
localNotification.alertBody=[NSString stringWithFormat:@"%@",[tmpdict objectForKey:@"Reminder"]];

NSDictionary *snoozeDic=[tmpdict objectForKey:@"Snooze"];
if ([[snoozeDic valueForKey:@"Switch"]intValue]==1) {
    localNotification.alertAction=@"Snooze";
}else
{
    localNotification.hasAction=NO;
}

localNotification.repeatInterval=CalUnit;
localNotification.soundName=[NSString stringWithFormat:@"%@.caf",[tmpdict objectForKey:@"Tone"]];
localNotification.userInfo=[NSDictionary dictionaryWithObject:tmpdict forKey:@"AlarmInfo"];
localNotification.applicationIconBadgeNumber=1;

[[UIApplication sharedApplication]scheduleLocalNotification:localNotification]; 
```

# php - 下拉验证

> ID：10005768
> 
> 赞同：0
> 
> 时间：2012-04-04T06:09:35.127
> 
> 标签：php, zend-framework, zend-form

我有一个名为*town*的下拉选项。已获取的值将在数据库表 townId 的下拉列表中可用。现在我想检查用户是否没有从下拉列表中选择任何选项并直接转到保存按钮，然后它应该像这样显示“请在下拉列表中选择您的选择”。表格命名为*大学*

我在这里尝试了这段代码：

```
 if(Zend_Form_Element_Submit)
        {
            if($$townid=='')
                {   alert("U Must Choose Town Name Here");

                }
            else
                {
                    $submit = new Zend_Form_Element_Submit('Save');
                    $submit->setDecorators($this->submitDecorators)
                    ->setAttrib('class','button slategray');
                }

        } 
```

在 models->university.php 里面有一些我没有得到的下拉动作：

```
public function setOptions(array $options)
{
    $methods = get_class_methods($this);
    foreach ($options as $key => $value) {
        $method = 'set' . ucfirst($key);
        if (in_array($method, $methods)) {
            $this->$method($value);
        }
    }
    return $this;
} 
```

在我编辑表单->大学之前（保存代码已经退出）

```
$submit = new Zend_Form_Element_Submit('Save');
    $submit->setDecorators($this->submitDecorators)
        ->setAttrib('class','button slategray');
                } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:02:28.157

为了正确使用 Zend Framework 的表单，我建议尝试这种方法：

`Zend_Form`通过扩展类创建表单

```
class Form_User extends Zend_Form 
```

它会自动让您访问容器以管理此表单中的所有元素，并让您访问一种`isValid()`允许您一次验证所有表单元素的`populate()`方法以及一种允许您将数据提供给表单以进行编辑的方法

在您的新类 ( `Form_User`) 中，您可以在方法中定义所有表单属性和元素`init()`。

```
public function init()
{
    $this->setName('user')
    ->setAttrib('id', 'user');

    $username = new Zend_Form_Element_Text('username');

    $town = new Zend_Form_Element_Select('town');
    $town->addMultioptions(array(...));

    $submit = new Zend_Form_Element_Select('submit');

    $this->addElements(array($username, $town, $submit));
} 
```

这些元素中的每一个都可以使用标签、描述、一些验证器、一些过滤器等进行自定义。

如果要强制元素，可以将`Required`属性设置为`true`

```
$town->setRequired(true); 
```

要在提交后验证您的表单，您可以简单地执行此操作（假设您在控制器中执行此操作）：

```
$form = new Form_User();
$postData = $this->getRequest()->getPost();
$form->isValid($postData); 
```

这将检查必填字段并执行您在这些不同元素上设置的任何验证器。

如果一切正常，它将返回 true，如果有错误，它将返回 false。如果您再次显示表单时遇到错误，则错误消息将自动显示在每个错误字段旁边。

如果你想设置表单元素的选项值，当你初始化表单时，你可以像这样传递一个配置数组：

```
$form = new Form_User(array('townListOptions' => array(...)); 
```

关联的方法`setTownListOptions`将被自动调用，并将接收您分配给它的数组（或任何其他对象）。

我可以解释更多关于表格的事情，但正如@Rohan 在他的评论中所说，[RTM](http://framework.zend.com/manual/fr/zend.form.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-04T06:14:13.407

在 asp.net 中

```
<asp:DropDownList ID="ddlusertype" runat="server" CssClass="dropdown"  ></asp:DropDownList>
<asp:CompareValidator ID="CompareValidator2" runat="server" ControlToValidate="ddlusertype" ErrorMessage="select" Font-Size="XX-Small" Operator="NotEqual" Type="Integer" ValueToCompare="0"></asp:CompareValidator> 
```

# javascript - Javascript 获取数据类型标签值

> ID：10005770
> 
> 赞同：3
> 
> 时间：2012-04-04T06:09:45.447
> 
> 标签：javascript, html, types, prototype, custom-data-attribute

我希望能够`data-type`使用纯 javascript 检索 ，这是一个新的 HTML5 标记名称（或任何自定义标记名称）。我需要访问此数据的上下文来自元素 childNodes 的循环。

```
var children = document.getElementById('foo').childNodes;
for(var i=0; i<children.length; i++) {
    var dataType = children[i].dataType //This does not work.
} 
```

是否有某种方法可以制作原型`childNodes`，以便使用该标签检索到的任何元素都将`dataType`附加一个函数，以便上述代码实际上可以工作？

我想我将不得不使用`children[i].outerHTML`来获取元素的原始 HTML，然后使用正则表达式来实际放置元素中的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T06:13:07.810

如果您的意思是从`data-*`属性中获取数据

```
var children = document.getElementById('foo').childNodes;
var childrenLength = children.length;

for(var i=0; i<childrenLength; i++) {
    var dataType = children[i].getAttribute('data-type');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-05T18:19:45.907

如果您查看[Mozilla](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_data_attributes)关于该主题的文档，您会发现该标准定义了一种比 DOMStringMap 更简单的方法`.getAttribute`，[它](https://developer.mozilla.org/en-US/docs/Web/API/DOMStringMap)可以使用[数据集属性](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset)读取。

简而言之，这意味着你可以做到这一点

```
var dataType = children[i].dataset.dataType; 
```

或者您可以将 设置`dataset`为如下所示的变量，这在您从元素中获取多个数据属性时非常方便

```
var dataSet = children[i].dataset,
    dataType = dataSet.dataType; 
```

# wcf - Wcf 客户端：使用 WebInvoke 在 WCF REST 服务中传递 XML 字符串

> ID：10005771
> 
> 赞同：2
> 
> 时间：2012-04-04T06:09:52.723
> 
> 标签：wcf, wcf-data-services, wcf-ria-services, wcf-client, wcf-rest-starter-kit

没有 Display 方法的参数，它在浏览器中工作，即[http://localhost:2617/UserService.svc/test](http://localhost:2617/UserService.svc/test)

当我添加一个参数时，我也无法浏览它。

我有以下合同。

```
[ServiceContract]
public interface IUserService
{
    [OperationContract]
    [WebInvoke(Method="PUT",UriTemplate = "/tes/{name}",   
    BodyStyle=WebMessageBodyStyle.WrappedRequest)]
    string Display(string name);
}

public string Display(string name)
{
        return "Hello, your test data is ready"+name;
} 
```

我正在尝试使用以下代码调用

```
 string url = "http://localhost:2617/UserService.svc/test"; //newuser
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        string xmlDoc1 = "<Display xmlns=\"\"><name>shiva</name></Display>";
        req.Method = "POST";
        req.ContentType = "application/xml";
        byte[] bytes = Encoding.UTF8.GetBytes(xmlDoc1);
        req.GetRequestStream().Write(bytes, 0, bytes.Length); 

        HttpWebResponse response = (HttpWebResponse)req.GetResponse();
        Stream responseStream = response.GetResponseStream();
        var streamReader = new StreamReader(responseStream);

        var soapResonseXmlDocument = new XmlDocument();
        soapResonseXmlDocument.LoadXml(streamReader.ReadToEnd()); 
```

我无法为此获得输出。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:03:24.637

您仍然需要创建一个类

```
public class Test
{

    public string name { get; set; }

} 
```

您还可以使用 fiddler 检查是否可以将 {name:999} 作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:07:45.120

您的代码中有几处不太正确。

**客户**

在客户端上，您需要将命名空间指定为 tempuri，因为您没有明确声明一个，所以您的客户端代码需要是这样的：

```
string url = "http://localhost:2617/UserService.svc/test"; //newuser
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
string xmlDoc1 = "<Display xmlns=\"http://tempuri.org/\"><name>shiva</name></Display>";
req.Method = "POST";
req.ContentType = "application/xml";
byte[] bytes = Encoding.UTF8.GetBytes(xmlDoc1);
req.GetRequestStream().Write(bytes, 0, bytes.Length);

HttpWebResponse response = (HttpWebResponse)req.GetResponse();
Stream responseStream = response.GetResponseStream();
var streamReader = new StreamReader(responseStream);

var soapResonseXmlDocument = new XmlDocument();
soapResonseXmlDocument.LoadXml(streamReader.ReadToEnd()); 
```

**服务**

在服务上`UriTemplate`不太正确 - 您正在指定`/tes/{name}`这样的 URL，`http://localhost:2617/UserService.svc/tes/shiva`但您希望将 XML 数据发布到正文中，因此您应该将其更改为`UriTemplate = "/test"`（我假设您的意思是测试而不是 tes在你的问题中）。

此外，如果您想向其发布数据，则该方法应该是 POST（客户端需要匹配服务，我假设您在客户端拥有的就是您想要的）。

因此，总而言之，您的 IUserService 应该如下所示：

```
[ServiceContract]
public interface IUserService
{        
    [OperationContract]
    [WebInvoke(Method = "POST",
               UriTemplate = "/test",
               BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    string Display(string name);
} 
```

# php - 这是从 PHP 中的选择元素访问选项的可靠方法吗？

> ID：10005777
> 
> 赞同：1
> 
> 时间：2012-04-04T06:11:04.657
> 
> 标签：php

我的表单中有这个选择输入，我想通过 PHP 访问。

```
<div data-role='fieldcontain'>
    <label for='fruits' class='select'>Favorite Fruits</label>
    <select name='fruits[]' id='fruits' multiple='multiple' data-native-menu='false'>
        <option value=''>Favorite Fruits</option>
        <option value='1' selected='selected'>Apple</option>
        <option value='2' selected='selected'>Banana</option>
        <option value='3' selected='selected'>Cherry</option>
    </select>
</div> 
```

通过将选择元素的名称设置为“fruits[]”，这样可以：

```
// |$fruits| is an array
$fruits = $_POST['fruits'] 
```

但是，我担心从表单中清除数据。将帖子数据输入数组听起来不安全。例如，如果有人通过 Firebug 将 select 元素更改为文本输入元素并将恶意代码输入到我的程序中怎么办？我从不打电话`htmlspecialchars`。

我的安全顾虑有效吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:16:13.547

它们确实有效，如果数据来自用户输入，您需要先对其进行清理。

在这种情况下，用户可以轻松破坏您的 HTML，或者更糟糕的是，注入一些恶意 XSS 攻击。

您需要清理这些值，`htmlspecialchars`在这种情况下就足够了。

* * *

没关系，我知道您正在使用来自用户输入的选项填充 HTML 选择标记，但事实并非如此。PHP 将只接受 POST 数据中的字符串或数组，因此您需要确保传入的数据与您想要对其执行的操作兼容。一种可能的解决方案是将提交的值列入白名单，类似的函数[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)可能在这里有用，例如：

```
$allowed_fruits = array('Apple', 'Banana', 'Cherry');
$fruits = array_intersect($allowed_fruits, $_POST['fruits']); 
```

这样，如果用户提交“草莓”，它将在`$fruits`数组中被忽略。

您可能还想确保数组不是多维的，如下所示：

```
if (count($_POST['fruits']) != count($_POST['fruits'], COUNT_RECURSIVE))
{
    // array is multidimensional, do not process
} 
```

当然，这取决于您对数据的使用，但白名单方法始终是最安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:17:30.800

您的代码应该验证用户输入是否为预期格式（`isset`, `is_array`, ...）**，并**在将其发送到数据库、html 输出、日志等其他任何地方之前正确转义它。从根本上说，用户输入的字符串和用户输入的字符串数组之间几乎没有区别。

使用`mysql_real_escape_string`（甚至更好`PDO`）处理数据库，`htmlspecialchars`处理 HTML 输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:17:33.133

这是获取值的正确方法，但是，您担心是对的。您按照建议的方式接收值，然后使用适当的清洁方法：用于显示的 htmlspecialchars、用于插入数据库的 mysql_escape 等。您需要对数组中的每个元素执行此操作，但仅在当时你要使用它。

# tsql - 在 t-sql 或 ssrs 中将行号添加到外部组

> ID：10005782
> 
> 赞同：1
> 
> 时间：2012-04-04T06:11:19.127
> 
> 标签：tsql, group-by, ssrs-2008, ssrs-grouping, row-number

我有一个查询，它返回具有组类别的数据和一些细节，如下所示：

```
Category | Title
==================
cat1  ---  titlex
cat1  ---  titley
cat2  ---  titley
cat3  ---  titlez
cat3  ---  titlex
cat4  ---  titlex 
```

我想显示一个在外部组（类别）上有行号的表，如下所示：

```
RN | Category | Title
======================
1    cat1  
                titlex
                titley
2    cat2
                titley
3    cat3
                titlez
                titlex
4    cat4 
                titlex 
```

问题是，当我在 sql 查询或 ROWNUMBER SSRS 函数中添加 RN 列作为 ROW_NUMBER 时（尝试 NOTHING、Group 和 Details 作为范围，以防万一），我总是得到 RN 列的 2 1 2 或 1 3 4 6 之类的数字.

**编辑** Sql 查询（为简单起见更改了表名和属性）

```
SELECT    
        -- this rownumber does not work, counts every occurrence of category    
    --ROW_NUMBER() OVER (
        --PARTITION BY c.Name -- tried this too, this resets on each cat
        --ORDER BY c.Name) AS RN,
    c.Name, 
    p.Name
FROM
    Products p INNER JOIN
    Categories c ON p.CategoryId = c.Id
GROUP BY c.Name, p.Name
ORDER BY c.Name, p.Name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:29:45.080

您不想要行号（正如您所观察到的，行号分配给每个...嗯...行）。

也许你想要[`DENSE_RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)？

```
SELECT    
    DENSE_RANK() OVER (ORDER BY c.Name) AS RN,
    c.Name, 
    p.Name
FROM
    Products p INNER JOIN
    Categories c ON p.CategoryId = c.Id
GROUP BY c.Name, p.Name
ORDER BY c.Name, p.Name 
```

至于您想要的输出，我不会尝试在 SQL 中实现 - 使用报告/格式化工具来获得最终布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:20:16.500

您也可以在 SSRS 的表示层完成此操作：

```
=RunningValue(Fields!CategoryFieldName.Value, CountDistinct, Nothing) 
```

# actionscript-3 - 从 flash 到 javascript 获得价值？

> ID：10005787
> 
> 赞同：0
> 
> 时间：2012-04-04T06:11:23.473
> 
> 标签：actionscript-3, flash, apache-flex

```
public  function getTextId():String
{
    return val;
}

ExternalInterface.addCallback("getId", getTextId); 
```

我收到以下错误：

访问未定义的属性 getTextId。ExternalInterface.addCallback("getId", getTextId);

但是我已经定义了 getTextId 并且所有教程都表明这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:22:16.690

您是在方法内部调用 ExternalInterface.addCallback()，还是将其称为“类级别”（因为没有更好的术语），如您的代码片段所示？

我只是尝试在方法之外添加回调，它起作用了......并不感到惊讶，但我很少这样编码。但是，我添加了第二种方法作为回调，并在编译时遇到了与您相同的错误。

奇怪的是它适用于一种方法，但不适用于另一种方法（无论我似乎尝试了什么）。

您是否尝试过将 addCallback 行移动到函数或构造函数中？这为我解决了错误。

# visual-studio-2010 - 找不到 System.data.linq 命名空间

> ID：10005792
> 
> 赞同：2
> 
> 时间：2012-04-04T06:12:21.800
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7.1, smartphone

我的系统上安装了适用于 Windows Phone 的 Visual Studio 2010 Express，但我无法在引用中找到 System.data.linq 命名空间，因此我尝试下载 dll 并复制到 C:\Program Files(x86)\ReferenceAssemblies \Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone 位置，但它是说它不是为 Windows Phone 构建的 dll 任何人都可以帮助添加正确的 dll 作为参考..？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T04:22:26.227

您可能必须手动导入参考。

我的位置在这里：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\system.data.linq.dll 
```

那应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:45:21.440

我有同样的问题。您的项目应该是最低 windows phone 7.1 版本。查看您的 csproj 文件中写入的内容。应该有：`<TargetFrameworkProfile>WindowsPhone71</TargetFrameworkProfile>` 但没有 `<TargetFrameworkProfile>WindowsPhone</TargetFrameworkProfile>`

在我的 sutuation 中，只写了 WindowsPhone，我将其更正为 WindowsPhone71，我得到了 System.Data.Linq 和 mscorlib.extenstion 库。

# php - json_decode + ajax + 私有属性 = 灾难 [错误：JSON_ERROR_CTRL_CHAR]

> ID：10005796
> 
> 赞同：2
> 
> 时间：2012-04-04T06:12:36.943
> 
> 标签：php, jquery, ajax, json

# 目标：

1.  `json_encode`具有私有属性的 PHP 对象
2.  使用 jQuery通过[低级 AJAX](http://api.jquery.com/jQuery.ajax/)将编码对象作为数据字符串发送
3.  `json_decode`请求发送到的 AJAX URL 中的 PHP 对象
4.  赢

# 问题：

在第 3 步，[json_last_error](http://php.net/manual/en/function.json-last-error.php)返回 3 ( `JSON_ERROR_CTRL_CHAR Control character error, possibly incorrectly encoded`)

### 班上：

```
class Stream {
    private $limit;
    private $type;
    private $sort;
    private $offset=0;
    private $userID;
    private $catID;
    private $content = array();
    private $num_posts;

    function __construct(){
        $a = func_get_args();
        $i = func_num_args();
        if (method_exists($this,$f='__construct'.$i)) {
            call_user_func_array(array($this,$f),$a);
        }
    }

    function __construct5($limit, $type, $sort, $userID, $catID){
        $this->limit = $limit;
        $this->type = $type;
        $this->sort = $sort;
        $this->userID = $userID;
        $this->catID = $catID;
        //$this->num_posts = $this->retrieveTotal();

        //$this->setContent(); 
    }

    function __get($name) {
        if(isset($this->$name)){
            return $this->$name;
        }
    }

        public function encodeJSON(){
        foreach ($this as $key => $value){
            if($key != 'content'){
                $json->$key = $value;
            }
        }
        return json_encode($json);
    }

    public function decodeJSON($json_str){
        $json = json_decode($json_str, true);
        echo '<br>error: '.json_last_error();

        foreach ($json as $key => $value){
            $this->$key = $value;
        }
    }
}

//create the object to be encoded
$strm = new Stream(5, 'toc', ' ', 1, ' ');

/*this test works

$d=$strm->encodeJSON();

$st = new Stream();
$st->decodeJSON($d);
*/ 
```

### AJAX 函数：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    //load more posts
    $("#active").live("click", function() {
    var stream= '<?= $strm->encodeJSON();?>'; 
        var dataString = 'stream='+stream;
        var request = $.ajax({  
            type: "POST",  
            url: "ajax/loadmore.php",  
            data: dataString,
            beforeSend:function(data){
                $('.load-more').html('<img src="ajax/loader.gif" alt="Loading..." />');
            },
            success: function(html) {
                $('#active').remove();
                $('#stream').append(html);
            }
        });

        //ajax error reporting
        request.fail(function(jqXHR, textStatus) {
            $('#active').html(textStatus);
        });
    });
</script>

<a class='load-more' id='active'>load more posts</a> 
```

### AJAX 请求（loadmore.php）：

```
require_once'../../classes/stream.class.php';
$strm = new Stream();
$strm->decodeJSON($_POST['stream']); 
```

### 我试过的：

这段代码

```
$d=$strm->encodeJSON();

$st = new Stream();
$st->decodeJSON($d); 
```

工作正常。这会让我相信 AJAX 会干扰解码。

我也尝试过更改`$json = json_decode($json_str, true);`，`$json = json_decode(utf8_encode($json_str), true);`但没有任何变化。

**注意：**建议我公开类属性不是解决方案

**编辑：**当我回显字符串时，`{ "limit": "5", "type": "toc", "sort": " ", "offset": "0", "userID": "3", "catID": " ", "num_posts": "2" }`被发送到 decodeJSON 它测试为[有效](http://jsonlint.com/)

此屏幕截图显示了发送到 decodeJSON($json_str) 的 arg $json_str 和错误代码。 ![json_str 参数和错误](../Images/c8bba81e82498f853f6ddde40d83ea11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:33:40.737

## 原因`JSON_ERROR_CTRL_CHAR`

它返回的原因`JSON_ERROR_CTRL_CHAR`不是字符编码（即utf8 或iso）。当数据编码不正确并且结果字符串不是有效的 JSON 时，它会遇到此错误。如果您混合使用单引号`'`和双引号`"`，它也可能会干扰编码过程，保持一致很重要。

话虽如此，
它很可能会返回错误，因为您首先没有发送任何实际数据。您正在通过请求发送一个空字符串。好吧，不是真的，你实际上是在发送字符串

```
<?= $strm->encodeJSON();?> 
```

然后变成

```
json_encode("<?= $strm->encodeJSON();?>"); 
```

在您的 loadmore.php 中。但是，如果您使用正确的 php 标签，它无论如何都是空的，`<?php ?>`因为您没有回显任何内容。

改变

```
var stream= '<?= $strm->encodeJSON();?>'; 
```

到一个正确的 php 标签，并确保你实际输出了一些东西，否则`stream`将只是一个空字符串。

```
var stream= '<?php echo $strm->encodeJSON(); ?>'; 
```

它应该可以正常工作。

## 各种各样的

[**编码URI组件**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)

通常，当通过 AJAX 发送数据时，您应该[`encodeURIComponent()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)转义任何特殊字符。

```
data: "stream="+encodeURIComponent(stream), 
```

```
$json = json_decode(urldecode($json_str), true); 
```

**`.live`已弃用**

自 1.7 起，该[`.live`](http://api.jquery.com/live/)函数已弃用，您现在应该使用该函数[`.on`](http://api.jquery.com/on/)附加事件处理程序。在你的情况下，你最好只使用速记函数[`.click()`](http://api.jquery.com/click/)。

**链接必须有href**

`<a>`标签必须有一个 href 属性，否则它不会是一个链接，`<div>`如果你不打算使用它，你还不如使用它。至少你应该有`href="#"`然后添加一个`event.preventDefault()`.

**文件名**

当你命名你的文件时，尽量不要使用句点`stream.class.php`，它们是等待发生的意外。某些系统（尤其是较旧的系统）无法正确解释它们，并且您将很难重命名所有系统。标准约定建议对稳定的文件系统使用下划线或连字符。

* * *

**这对我有用（所有文件都在同一个文件夹中）**

HTML 默认 (index.php)

```
<?php
    include_once("stream.php");
?>

<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    //load more posts
    $(document).ready(function(){
        $("#active").click(function(e) {
            e.preventDefault();

            var stream = '<?php echo $strm->encodeJSON();?>'; 
            var dataString = stream;
            var request = $.ajax({  
                type: "POST",  
                url: "loadmore.php",  
                data: "stream="+encodeURIComponent(stream),
                dataType: "html",
                beforeSend:function(data){
                    $('.load-more').html('<img src="ajax-loader(1).gif" alt="Loading..." />');
                },
                success: function(html) {
                    $('#active').remove();
                    $('#stream').append(html);
                }
            });

            //ajax error reporting
            request.fail(function(jqXHR, textStatus) {
                $('#active').html(textStatus);
            });
        });
    });
</script>
</head>

<body>
    <a href="#" class='load-more' id='active'>load more posts</a>
    <div id="stream"></div>
</body>
</html> 
```

流.php

```
<?php

class Stream {
    private $limit;
    private $type;
    private $sort;
    private $offset=0;
    private $userID;
    private $catID;
    private $content = array();
    private $num_posts;

    function __construct(){
        $a = func_get_args();
        $i = func_num_args();
        if (method_exists($this,$f='__construct'.$i)) {
            call_user_func_array(array($this,$f),$a);
        }
    }

    function __construct5($limit, $type, $sort, $userID, $catID){
        $this->limit = $limit;
        $this->type = $type;
        $this->sort = $sort;
        $this->userID = $userID;
        $this->catID = $catID;
        //$this->num_posts = $this->retrieveTotal();

        //$this->setContent(); 
    }

    function __get($name) {
        if(isset($this->$name)){
            return $this->$name;
        }
    }

        public function encodeJSON(){
        foreach ($this as $key => $value){
            if($key != 'content'){
                $json->$key = $value;
            }
        }
        return json_encode($json);
    }

    public function decodeJSON($json_str){
        $json = json_decode(urldecode($json_str), true);

        foreach ($json as $key => $value){
            $this->$key = $value;
        }
    }
}

//create the object to be encoded
$strm = new Stream(5, 'toc', ' ', 1, ' ');

?> 
```

加载更多.php

```
<?php

include_once('stream.php');

$strm = new Stream();

$strm->decodeJSON($_POST['stream']);

//Output a private property
echo $strm->__get("type");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:12:26.273

经过多次反复试验，我发现了问题所在。当我实例化`Stream object`要编码的那个时，而不是使用`1`我正在使用 的`$userID`那个被转换为字符串并弄乱了 URI 编码

`stream=%7B%22limit%22%3A%225%22%2C%22type%22%3A%22toc%22%2C%22sort%22%3A%22%20%22%2C%22offset%22%3A%220%22%2C%22userID%22%3A%223%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%22%2C%22catID%22%3A%22%20%22%2C%22num_posts%22%3A%222%22%7D`

我不太确定为什么它会这样，但解决方案是将 $userID 转换为整数。所以：

```
$strm = new Stream(5, 'toc', ' ', (int)$userID, ' '); 
```

URI 编码更改为：

`stream=%7B%22limit%22%3A%225%22%2C%22type%22%3A%22toc%22%2C%22sort%22%3A%22%20%22%2C%22offset %22%3A%220%22%2C%22userID%22%3A%223%22%2C%22catID%22%3A%22%20%22%2C%22num_posts%22%3A%222%22%7D`

并且 json_decode 返回一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:21:22.053

JSON 仅支持字符串的 UTF-8。因此，在执行 json_encode 之前，您必须以 UTF-8 对所有字符串进行编码。这里似乎发生的事情（我不明白你所有的代码）是你有一个没有 UTF8 的字符串，看起来像“控制字符”一样 json_encode。

# css - 固定顶栏与命名锚点

> ID：10005805
> 
> 赞同：7
> 
> 时间：2012-04-04T06:13:11.350
> 
> 标签：css, positioning

我有一个顶部栏，`position:fixed`其中还包含锚链接 ( `<a href="#someid">jdjd</a>`)。

问题是目标被放置在视口的顶部（在固定的顶栏后面）。

如何修复浏览器滚动以使目标显示在顶栏下方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:33:22.433

据我所知，没有干净的解决方案。如果使用内联滚动条可以实现，但它需要一个固定的高度。

使用 CSS 找到 2 个解决方案：http: [//css-tricks.com/hash-tag-links-padding/](http://css-tricks.com/hash-tag-links-padding/)

否则，您可以很容易地使用 JQUERY 来测量用户的身高，将其放入容器 div 中，然后在其上滚动。

见：http: [//jsfiddle.net/jpGdu/](http://jsfiddle.net/jpGdu/)

另一个解决方案可能是将元素 ur 链接到填充顶部（如果它是 h1 或其他）:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:17:33.920

不知道你为什么被否决，这似乎是一个诚实的好问题。

我会`margin-top`在视口上放一个，等于固定顶栏的高度。

[http://jsfiddle.net/justiceerolin/KfMLJ/](http://jsfiddle.net/justiceerolin/KfMLJ/)为例

# sql - 如何根据两个不同的值返回不同的记录

> ID：10005806
> 
> 赞同：1
> 
> 时间：2012-04-04T06:13:14.720
> 
> 标签：sql, oracle, oracle10g

我在名为 MY_ATTRIBUTES 的 Oracle 表中有以下数据示例：

```
Date        Emp_No  Attribute
-----------------------------------------------------
01/04/2012  1234567 APPLE
01/04/2012  1234567 ORANGE
01/04/2012  1234567 PINEAPPLE
01/04/2012  1234567 BANANA
01/04/2012  8888888 APPLE
01/04/2012  8888888 ORANGE
01/04/2012  2222222 APPLE
01/04/2012  2222222 ORANGE
01/04/2012  2222222 PINEAPPLE 
```

根据上面的示例数据，我只需要返回仅使用 Date 和 Emp_No 的不同记录，其中这些记录包含同时具有“APPLE”和“PINEAPPLE”属性的数据</p>

所以基于这个标准，我只期望以下两个结果记录，即：

```
01/04/2012  1234567
01/04/2012  2222222 
```

我希望编写一个 Oracle SQL 查询，它将根据所描述的条件返回此结果集。

我还应该指出，我需要将此 SQL 查询用作主 SELECT 的子查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:30:34.017

主题的变体：

```
with cte as 
 ( select date, empno, attribute
   from my_attributes
   where attribute in ('PINEAPPLE', 'APPLE') )
select  *
from (  select date, emp_no
        from cte
        where attribute = 'PINEAPPLE'
        intersect
        select date, emp_no
        from cte
        where attribute = 'APPLE' ) 
```

任何这些解决方案的性能将取决于 ATTRIBUTE 的选择性。如果您的碗里只有六种水果，那么您将看到整张桌子，并且只有有限的选项可以调整它们。另一方面，如果该列是一个充满果味的蔬菜水果商（比如 150 多个不同的值），那么您应该从索引中获得回报。但这仍然取决于分布和倾斜：如果 ATTRIBUTE 是 90% 的苹果和菠萝，您可能看不到索引的任何好处：在这种情况下，全表扫描仍然是更好的选择。

**tl;博士**

调音很难

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:18:03.513

尝试

```
SELECT DISTINCT A.Date, A.Emp_no 
FROM (SELECT * FROM MY_ATTRIBUTES WHERE ATTRIBUTE = 'APPLE') A 
INNER JOIN (SELECT * FROM MY_ATTRIBUTES WHERE ATTRIBUTE = 'PINEAPPLE' ) B ON B.Date = A.Date AND B.Emp_No = A.Emp_No 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:18:35.340

可能有更有效的方法，但这应该有效：

```
SELECT DISTINCT DATE, EMP_NO
FROM   (
    SELECT DATE, EMP_NO
    FROM   MY_ATTRIBUTES
    WHERE  ATTRIBUTE = 'APPLE'
    INTERSECT
    SELECT DATE, EMP_NO
    FROM   MY_ATTRIBUTES
    WHERE  ATTRIBUTE = 'PINEAPPLE'
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T06:24:34.677

如果没有重复项（例如，同一日期的 2 个 APPLES 和 emp），这可能会更有效，因为没有连接：

```
SELECT DATE, EMP_NO 
FROM MY_ATTRIBUTES
WHERE ATTRIBUTE = 'APPLE' OR  ATTRIBUTE = 'PINEAPPLE'
GROUP BY DATE, EMP_NO
HAVING COUNT(*) = 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T10:17:33.393

您可以尝试以下方法：

`SELECT DATE, EMP_NO FROM YOUR_TABLE WHERE ATTRIBUTE = 'APPLE' OR ATTRIBUTE = 'PINEAPPLE' GROUP BY DATE, EMP_NO HAVING COUNT(*) = 2;`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-04T07:01:24.920

```
SELECT DISTINCT DATE, EMP_NO
WHERE  ATTRIBUTE IN('APPLE','PINEAPPLE') 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-04T07:02:43.120

```
SELECT DISTINCT Emp_No, Date
FROM (
  SELECT *
  FROM MY_ATTRIBUTES m
  WHERE m.Attribute IN ('Apple','Pineapple')
  )
LIMIT 2
ORDER BY Emp_No 
```

# extjs4 - 如何在 ExtJS 4 中读取查询字符串？

> ID：10005809
> 
> 赞同：15
> 
> 时间：2012-04-04T06:13:20.797
> 
> 标签：extjs4, query-string

我有一个用一些查询字符串参数调用的 ExtJS 应用程序。我想知道如何使用 ExtJS 4 读取这些参数及其值。

我的 ExtJS 应用程序 URL 如下所示：

```
http://localhost:8080/myapp?candidate_id=101&candidate_id=102&candidate_id=103 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T06:34:53.097

你可以`Ext.Object.fromQueryString`这样使用

```
Ext.Object.fromQueryString('candidate_id=101&candidate_id=102&candidate_id=103') 
```

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Object-method-fromQueryString](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Object-method-fromQueryString)

# javascript - PhoneGap iOS + DOM 异常 18

> ID：10005811
> 
> 赞同：5
> 
> 时间：2012-04-04T06:13:24.437
> 
> 标签：javascript, ios, cordova, webview

我要去一个 window.onerror “SECURITY_ERR: DOM Exception 18: 试图突破用户代理的安全策略。” 每次我加载我的 iOS PhoneGap 应用程序时。该应用程序使用本地存储和 webSQL。当我使用以下方法打开我的数据库时，我已经隔离了这个错误：db = window.openDatabase("db", "1.0", "Test DB", 1000000);

我以前没有遇到过这个问题，我的代码也没有改变——这只是现在出现的地方。我一直在查看 iOS 5.1 Web 视图存储错误，并担心它可能与此有关。

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T15:23:47.847

这是 iOS 5.1 中已确认的 Apple 错误。此 PhoneGap/Cordova 问题跟踪器中的详细信息：[https ://issues.apache.org/jira/browse/CB-347](https://issues.apache.org/jira/browse/CB-347)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:26:55.740

我用过这个，它工作得很好。试试这个

```
try { 
if (!window.openDatabase) { 
        alert('not supported'); 
} else { 
        var shortName = 'WineDatabase'; 
        var version = '1.0'; 
        var displayName = 'PhoneGap Test Database'; 
        var maxSize = 655367; // in bytes 
        mydb = openDatabase(shortName, version, displayName, maxSize); 
    }
} catch(e) { 
// Error handling code goes here. 
if (e == INVALID_STATE_ERR) { 
        // Version number mismatch. 
        alert("Invalid database version."); 
} else { 
        alert("Unknown error "+e+"."); 
} 
return; 
} 
```

**编辑**：

当时我在ios上使用Phonegap。所以我没有得到它，现在在黑莓phonegap上我遇到了同样的问题，发现原因是：插入数据电缆时，应用程序无法在SDCard上写任何东西。所以我拔下它并运行正常。抱歉，哥们不是 ios 的解决方案但是正在为黑莓搜索此问题的人可以使用此解决方案。

# windows-phone-7.1 - 如何在 wp7 中打开文件？

> ID：10005812
> 
> 赞同：0
> 
> 时间：2012-04-04T06:13:26.093
> 
> 标签：windows-phone-7.1

我的应用程序中的 IsolatedStorage 中有一些文件。文件类型不同，比如 doc、xls、ppt、pdf、mp3、mov、jpg、png 等。我需要打开这些文件。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:49:06.440

尝试使用名称及其扩展名打开它

字节[] 数据；

```
 using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {

            using (IsolatedStorageFileStream isfs = isf.OpenFile(image.jpg, FileMode.Open, FileAccess.Read))
            {
                data = new byte[isfs.Length];
                isfs.Read(data, 0, data.Length);
                isfs.Close();
            }

        }

        MemoryStream ms = new MemoryStream(data);

        BitmapImage bi = new BitmapImage(); 
        bi.SetSource(ms); 
        Image img = new image(); 
        img.source = bi 
```

如果是图像，请尝试将位图图像的源设置为内存流 ms。

# c# - 带有花括号的 Linq 查询，用于匿名操作/函数体

> ID：10005816
> 
> 赞同：2
> 
> 时间：2012-04-04T06:13:43.457
> 
> 标签：c#, linq, linq-to-objects

我有这个实体：

```
public class Parent: AllDependant
{
    /*Properties goes here*/
}

public class Children: AllDependant
{
    /*Properties goes here*/
} 
```

然后我有`allDependants`typeof 的变量`List<AllDependant>`，它将保持一些父母和孩子的实体混合。

稍后，我想从中选择并执行以下操作：

```
var selectedDependantInfos = allDependants
        .Select(dependant =>
        {
            if (dependant is Parent)
            {
                var parent = dependant as Parent;
                return new { Name = parent.Name, SomeSpecialInfo = parent.ParentInfo };
            }
            else
            {
                var child = dependant as Children;
                return new { Name = child.Name, SomeSpecialInfo = child.ChildInfo }
            }
        }); 
```

请注意子级和父级的特定属性要求我将属性转换为用于 UI 显示的新模型，这与实体无关。我不能将特殊属性放在 AllDependant 基类中，因为我需要在包括 *.ascx 在内的许多文件上重构属性名称，这很麻烦。但是它是通过使用`Select`上面的 Linq 扩展方法完成的，但我只是想到了这一点：

问题：我怎样才能在 Linq Query 中做同样的事情？

这将在`select`关键字和花括号上给出错误：

```
var selectedDependantInfos = from dependant in allDependants
                            select
                            {
                                /* the same if statement goes here */
                            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:25:30.140

您将使用条件运算符并得到类似

```
 from dependant in allDependants             
  select dependant is Parent 
         ? new { Name = (dependant as Parent).Name,  /* Parent fields */ }
         : new { Name = (dependant as Children).Name, /* Child fields */ } 
```

但正如你所见，这并不是一个很大的改进。没有方便的地方进行类型转换。

更好的选择似乎是将 Name 和 SpecialInfo 属性移至基类（AllDependant 或特殊的中间类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:56:07.547

另一种选择是：

```
var parents = allDependants.OfType<Parent>.Select(p => new { Name =  p.Name, .... };
var children = allDependants.OfType<Children>.Select(c => new { Name =  c.Name, .... };

var combined = parents.Concat(children); 
```

这种方法的缺点是 addDependants 将被迭代两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:19:47.993

使用反射的另一种方式

```
var selectedDependantInfos = from p in allDependants
                         let key = p is Parent ? "ParentInfo" : "ChildInfo"
                         select new { 
                             Name = p.GetType().GetProperty("Name").GetValue(p, null).ToString(), 
                             SomeSpecialInfo = p.GetType().GetProperty(key).GetValue(p, null).ToString() 
                         }; 
```

# objective-c - Objective-C 指针作为布尔值

> ID：10005818
> 
> 赞同：1
> 
> 时间：2012-04-04T06:13:53.647
> 
> 标签：objective-c, pointers, boolean, evaluation

通过一些关于修改 CGImageRef 数据的文档，我遇到了一个奇怪的例子——它与这个伪代码类似：

```
void *data = Allocate space for data;
if (data != NULL) Manipulate data;
if (data) Free data; 
```

这让我很纳闷！`if (data != NULL)`布尔运算和布尔运算有什么区别`if (data)`。

更具体地说，当指针被视为布尔值时，指针在 Objective C 中的行为如何？试图用谷歌搜索这个，我只发现无数与指向布尔值的指针有关的问题*，*而不是被评估*为*布尔值的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:17:05.073

它们完全一样。任何类型的非零值在 C 中被解释为“真”，并在 Objective-C 中被扩展。C 甚至*没有*布尔类型。

# workflow - 工作副本（迭代）权限和工作流程

> ID：10005819
> 
> 赞同：3
> 
> 时间：2012-04-04T06:13:55.420
> 
> 标签：workflow, plone

我们正在尝试为 Plone 文档管理系统实施自定义结帐策略。在此，我们希望能够在一段时间后获得已发布文件的工作副本。

迭代似乎很适合这个。

但是，我们只希望结帐可用于已发布的文档。所以这是推理.... 由于工作流控制多个权限，我们将“迭代：签入内容”和“迭代：签出内容”都添加到了 portal_workflow 工具的权限选项卡中。然后，我们在各个工作流程状态的权限选项卡中为具有结帐权限的人员标记了复选框。但是，在前端，无论文档处于何种状态，每个人都可以选择签出文档。

我们缺少什么？

PS：我们已经查看了有关 [“工作副本工作流程自定义”](http://plone.org/products/iterate/documentation/how-to/working-copy-workflow-customization)的文档，我们认为这与更改已签出文档的工作流程有关，这不是这里的意图......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:37:13.040

我认为这里的问题是 plone.app.iterate/browser/control:Control 中的 checkout_allowed 方法。

在允许用户签出之前它不会检查任何权限（它假设他们的用户可以查看它，他们应该被允许将其签出到主文件夹等 - 我想这是一个合理的用例）。

然后，在 portal_actions/object_buttons/iterate_checkout 中，它只是使用“查看”权限来允许将按钮放置在那里。

因此，要完全正确，您必须自定义 checkout_allowed 方法和操作中使用的权限。

要快速简单地做到这一点，以便用户看不到按钮，请将按钮权限更改为“迭代：结帐内容”。

# django - "SELECT...AS..." 与 Django 中的相关模型数据

> ID：10005823
> 
> 赞同：0
> 
> 时间：2012-04-04T06:14:13.340
> 
> 标签：django, django-models, django-views, django-queryset

我有一个应用程序，用户可以在其中选择自己的显示列。每个显示列都有一个指定的公式。要计算该公式，我需要连接几个相关列（一对一关系）并计算值。

模型是这样的（这只是一个示例模型，实际有 100 多个字段）：

```
class CompanyCode(models.Model):
    """Various Company Codes"""

    nse_code = models.CharField(max_length=20)
    bse_code = models.CharField(max_length=20)
    isin_code = models.CharField(max_length=20)    

class Quarter(models.Model):
    """Company Quarterly Result Figures"""

    company_code = models.OneToOneField(CompanyCode)
    sales_now = models.IntegerField()
    sales_previous = models.IntegerField() 
```

我试着做：

```
ratios = {'growth':'quarter__sales_now / quarter__sales_previous'}
CompanyCode.objects.extra(select=ratios)
# raises "Unknown column 'quarter__sales_now' in 'field list'" 
```

我也尝试使用原始查询：

```
query = ','.join(['round((%s),2) AS %s' % (formula, ratio_name)
    for ratio_name, formula in ratios.iteritems()])
companies = CompanyCode.objects.raw("""
    SELECT `backend_companycode`.`id`, %s
    FROM  `backend_companycode` 
    INNER JOIN  `backend_quarter` ON (  `backend_companycode`.`id` =  `backend_companyquarter`.`company_code_id` ) 
    """, [query])
#This just gives empty result 
```

所以请给我一点线索，让我知道如何最好使用“额外”命令来使用相关列。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-08T10:44:48.963

到目前为止，Django 文档说应该[使用 extra 作为最后的手段](http://django.readthedocs.io/en/1.9.x/ref/models/querysets.html#django.db.models.query.QuerySet.extra)。

所以这是一个没有额外（）的查询：

```
from django.db.models import F

CompanyCode.objects.annotate(
    growth=F('quarter__sales_now') / F('quarter__sales_previous'),
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:36:23.447

由于计算是在单个`Quarter`实例上完成的，所以需要在哪里进行`SELECT`？您可以`ratio`在模型上定义一个方法/属性`Quarter`：

```
@property
def quarter(self):
    return self.sales_now / self.sales_previous 
```

并在必要时调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:39:51.613

好的，我发现了。在上面使用：

```
CompanyCode.objects.select_related('quarter').extra(select=ratios) 
```

解决了这个问题。

基本上，要通过“额外”访问任何相关的模型数据，我们只需要确保该模型已加入到我们的查询中。使用 select_related，查询会自动加入提到的模型。

谢谢 ：）。

# android - 在 broatcastReceiver 中显示警报对话框

> ID：10005832
> 
> 赞同：0
> 
> 时间：2012-04-04T06:14:35.680
> 
> 标签：android

我想开发一个接收短信并显示警报对话框的应用程序，该对话框需要用户许可并在手机中搜索特定联系人并发送回复消息。但是如果不使用 Toast 正在工作的对话框，我将无法显示警报对话框。请帮助我。

```
public void onReceive( Context context, Intent intent ) {
    // Get SMS map from Intent
    Bundle extras = intent.getExtras();        
    String messages = "";

    if ( extras != null ) {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( "pdus" );

        // Get ContentResolver object for pushing encrypted SMS to incoming folder
        ContentResolver contentResolver = context.getContentResolver();            
        for ( int i = 0; i < smsExtra.length; ++i ) {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);
            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();

            messages += "SMS from " + address + " :\n";                    
            messages += body + "\n";

            // Here you can add any your code to work with incoming SMS
            // I added encrypting of all received SMS              
        }            
        // Display SMS message
        Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
        AlertDialog.Builder dialog=new AlertDialog.Builder(context);
        dialog.setTitle("You've Requsted msg");
        dialog.setPositiveButton("OK",new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            }
        } );
        dialog.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            }
        });
        dialog.show();
    }
    }        
    // WARNING!!! 
    // If you uncomment next line then received SMS will not be put to incoming.
    // Be careful!
    // this.abortBroadcast(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:19:47.383

一个更好的主意是创建一个活动并将其主题设置为对话框。然后使用上下文来启动这个活动`context.startACtivity(intent);`

# jquery - 如何使用 jQuery 将 HTML 包裹在文本节点周围？

> ID：10005834
> 
> 赞同：4
> 
> 时间：2012-04-04T06:14:37.947
> 
> 标签：jquery

```
<div class="pagination">
  <a href="#">1</a>
  <a href="#">2</a>
  3
  <a href="#">4</a>
</div> 
```

我需要使用 jQuery 在数字“3”周围包裹一个 HTML 元素。我无法修改 HTML，因为它是动态生成的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T06:30:34.120

我有一个[类似的问题](https://stackoverflow.com/q/9886020/575527)，它包含所有杂散文本

```
$(function() {

    var test = $('.pagination')
        .contents()
        .filter(function() {
            return this.nodeType === 3 && $.trim(this.nodeValue) !== '';
        })
        .wrap('<span/>');

});​ 
```

`wrap()`只是对and有一点困惑`wrapAll()`。[这是一个演示](http://jsfiddle.net/8y4GX/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T07:02:58.050

这将用一个跨度包装你所有的号码，所以结构将是：

```
<a><span>1</span></a> 
```

并且所选的仅跨度没有：

```
<span>2</span>

var html = $('.pagination').html();
    html = html.replace(/[0-9]/g,"<span>$&</span>");
    $('.pagination').html(html); 
```

因此您可以轻松地使用以下方式对其进行样式设置：

```
.pagination a span {normal style} 
.pagination span{selected style} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-13T15:45:49.593

这是旧的，但在我看来，一个更短、更简单的方法是：

```
$("div:not(a)").wrapInner("<a href='#'></a>"); 
```

# java - JavaMail - 发件人地址被拒绝：访问被拒绝

> ID：10005837
> 
> 赞同：4
> 
> 时间：2012-04-04T06:15:25.997
> 
> 标签：java, jakarta-mail, yahoo-mail

好吧，我不知道还能做什么。一周前，当我编写和测试这段代码时，它运行得非常好。然后我将它嵌入到我的程序中，并意识到我不断收到异常。一切似乎都很正常。发件人地址是合法的。我用来测试它的收件人地址是合法的。怎么了？我很沮丧：

```
private String outgoingMailServer = "smtp.mail.yahoo.com";

boolean debug = true;

            //set the host outgoing mail smtp server.
            Properties properties = new Properties();
            properties.put("mail.smtp.host", outgoingMailServer);
            properties.put("mail.smtp.auth", "true");

            Authenticator authenticator = new SMTPAuthentication();
            Session session = Session.getDefaultInstance(properties, authenticator);

            session.setDebug(debug);

            //create a message session
            Message msg = new MimeMessage(session);

            //set the addresses, to and from
            InternetAddress fromAddress;
            fromAddress = new InternetAddress(emailFromAddress);
            msg.setFrom(fromAddress);

            //since mail can be sent to more than one recipient, create loop
            //to add all addresses into InternetAddress, addressTo.
            //InternetAddress[] toAddress = new InternetAddress[recipients.length];
            InternetAddress[] toAddress = new InternetAddress[recipients.size()];
            for (int i = 0; i < recipients.size(); i++) {
                toAddress[i] = new InternetAddress(recipients.get(i));
            }
            msg.setRecipients(Message.RecipientType.TO, toAddress);

            //set the subject and content type
            msg.setSubject(emailSubject);
            msg.setContent(actualMessage, "text/html; charset=utf-8");

            //send the email
            Transport.send(msg); 
```

因此例外是：

```
javax.mail.SendFailedException: Invalid Addresses;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 554 5.7.1 <blank@yahoo.com>: Sender address rejected: Access denied

    at com.sun.mail.smtp.SMTPTransport.rcptTo(SMTPTransport.java:1835)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1098)
    at javax.mail.Transport.send0(Transport.java:195)
    at javax.mail.Transport.send(Transport.java:124)
    at internalLogicEngine.LogicEngine.sendReminder(LogicEngine.java:4282)
    at testPackage.Test.main(Test.java:169)
Caused by: com.sun.mail.smtp.SMTPAddressFailedException: 554 5.7.1 <blank@yahoo.com>: Sender address rejected: Access denied

    at com.sun.mail.smtp.SMTPTransport.rcptTo(SMTPTransport.java:1733)
    ... 5 more 
```

非常感激任何的帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:28:41.113

终于找到了一种解决方法（尽管我仍然不明白为什么首先会出现问题，因为代码曾经可以工作。无论如何......）

```
private String outgoingMailServer = "smtp.mail.yahoo.com";    
boolean debug = false;

//set the host outgoing mail smtp server.
Properties properties = new Properties();
properties.put("mail.smtp.host", outgoingMailServer);
properties.put("mail.smtps.auth", "true");

Authenticator authenticator = new SMTPAuthentication();
Session session = Session.getDefaultInstance(properties, authenticator);
session.setDebug(debug);

//create a message session
Message msg = new MimeMessage(session);

//set the addresses, to and from
InternetAddress fromAddress;
fromAddress = new InternetAddress(emailFromAddress);
msg.setFrom(fromAddress);

//since mail can be sent to more than one recipient, create loop
//to add all addresses into InternetAddress, addressTo.
//InternetAddress[] toAddress = new InternetAddress[recipients.length];
InternetAddress[] toAddress = new InternetAddress[recipients.size()];
for (int i = 0; i < recipients.size(); i++) {
    toAddress[i] = new InternetAddress(recipients.get(i));
}
msg.setRecipients(Message.RecipientType.TO, toAddress);

//set the subject and content type
msg.setSubject(emailSubject);
msg.setContent(actualMessage, "text/html; charset=utf-8");

//send the email
Transport transport = session.getTransport("smtps");
transport.connect(outgoingMailServer, 465, emailUserName, emailPassword);
transport.sendMessage(msg, msg.getAllRecipients());
transport.close();

//email sent
//note, this does not necessarily mean the email was delivered. The
//sysetm has no control over that
emailSent = true; 
```

您会发现问题中的代码与这些代码之间的主要区别是：

```
Transport.send(msg); 
```

和

```
Transport transport = session.getTransport("smtps");
transport.connect(outgoingMailServer, 465, emailUserName, emailPassword);
transport.sendMessage(msg, msg.getAllRecipients());
transport.close(); 
```

事实证明，`Transport`必须使用正确的凭据（端口号、用户名、密码和邮件服务器）创建和连接对象。

另外，我做了一个排除过程，发现只要你有这个：

```
Transport transport = session.getTransport("smtps");
transport.connect(outgoingMailServer, 465, emailUserName, emailPassword);
transport.sendMessage(msg, msg.getAllRecipients());
transport.close(); 
```

你不需要这个：

```
Authenticator authenticator = new SMTPAuthentication();
Session session = Session.getDefaultInstance(properties, authenticator); 
```

以上也可以是：

```
Session session = Session.getDefaultInstance(properties, null); 
```

无论如何，这就是答案。您还可以为 gmail 更改此答案。只需确保将发送邮件服务器更改为 gmail，以及发件人电子邮件地址、用户名和密码，就可以了 :)

# html - 制作 1 个下拉菜单，更改 2 个其他下拉菜单值

> ID：10005839
> 
> 赞同：2
> 
> 时间：2012-04-04T06:15:28.477
> 
> 标签：html

如何使下拉菜单链接到 2 下拉菜单。即，如果我选择一个下拉列表的值，则根据该值 2 应该更改更多下拉列表值。我使用以下示例：[http](http://www.javascriptkit.com/script/script2/triplecombo.shtml) ://www.javascriptkit.com/script/script2/triplecombo.shtml 。我需要根据下拉 1 上选择的值填充下拉 2 和下拉 4 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:27:41.023

如果您需要在不刷新页面的情况下进行制作，您可以使用 Ajax。这是您的问题的答案。希望它合适。如果您了解 ajax，那么您可以随时使用它。

[下拉菜单更改 OnChange](https://stackoverflow.com/questions/9990240/dropdown-menu-changing-onchange/11630750#11630750)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:32:50.110

你还尝试了什么？你被困在哪里了？

* * *

使用 javascript，就像在您的链接中一样...

其他示例：

[http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)

[http://r-ednalan.blogspot.com/2011/03/dynamic-select-box-using-jquery-ajax.html](http://r-ednalan.blogspot.com/2011/03/dynamic-select-box-using-jquery-ajax.html)

[http://blog.chapagain.com.np/using-jquery-ajax-populate-selection-list/](http://blog.chapagain.com.np/using-jquery-ajax-populate-selection-list/)

[http://codeassembly.com/Simple-chained-combobox-plugin-for-jQuery/](http://codeassembly.com/Simple-chained-combobox-plugin-for-jQuery/)

...

# c# - Metro风格WinRT XAML应用程序中SemanticZoom中ZoomedOutView的奇怪定位

> ID：10005842
> 
> 赞同：2
> 
> 时间：2012-04-04T06:16:12.543
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我一直在 ZommedInView 和 ZoomedOutView 中使用包含 GridView 的 SemanticZoom。ZoomedOutView 中的那个似乎并没有捕捉到容器。该容器是一个 StackPanel，位于 ScrollViewer 中。这意味着当我缩小时，如果水平对齐设置为左，我的项目会在屏幕外。此外，当我在设计器中选择放大的网格视图时，它会清楚地显示在预期的位置，填充滚动查看器。缩小的网格视图显示为超出了页面的边界。

交换放大和缩小视图的内容将问题交换到另一个网格视图，因此我们可以推断问题不在于网格视图的差异。

有没有办法修复它或者它是控件中的错误？

```
<ScrollViewer
        x:Name="itemGridScrollViewer"
        AutomationProperties.AutomationId="ItemGridScrollViewer"
        Grid.Row="1"
        Margin="0,-3,0,0"
        Style="{StaticResource HorizontalScrollViewerStyle}">

        <!--
        ItemTemplateSelector="{StaticResource hubItemTemplateSelector}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        -->
        <StackPanel
                    Margin="116,0,40,46">
        <SemanticZoom ManipulationMode="RotateInertia">
            <SemanticZoom.ZoomedInView>
                    <GridView
                    AutomationProperties.AutomationId="ItemGridView"
                    AutomationProperties.Name="Grouped Items"
                    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
                    ItemTemplateSelector="{StaticResource hubItemTemplateSelector}"
                    SelectionMode="None"
                    IsItemClickEnabled="True"
                    ItemClick="ItemView_ItemClick"
                    IsSwipeEnabled="True">

                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                        <GridView.GroupStyle>
                            <GroupStyle>
                                <GroupStyle.HeaderTemplate>
                                    <DataTemplate>
                                        <Grid Margin="1,0,0,6">
                                            <Button
                                            AutomationProperties.Name="Group Title"
                                            Content="{Binding Path=Title}"
                                            Click="Header_Click"
                                            Style="{StaticResource TextButtonStyle}"/>
                                        </Grid>
                                    </DataTemplate>
                                </GroupStyle.HeaderTemplate>
                                <GroupStyle.Panel>
                                    <ItemsPanelTemplate>
                                        <VariableSizedWrapGrid MaximumRowsOrColumns="2" ItemHeight="250" ItemWidth="250" Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </GroupStyle.Panel>
                            </GroupStyle>
                        </GridView.GroupStyle>
                    </GridView>
                </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                    <GridView
                        AutomationProperties.AutomationId="CategoryGridView"
                        AutomationProperties.Name="Grouped Items Zoomed Out"
                        ItemsSource="{Binding Path=ItemGroups}"
                    >

                        <GridView.ItemTemplate>
                            <DataTemplate>
                                <Button
                                    AutomationProperties.Name="Group Title"
                                    Content="{Binding Title}"
                                    Click="Header_Click"
                                    Style="{StaticResource TextButtonStyle}"/>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapGrid ItemWidth="250" ItemHeight="250" MaximumRowsOrColumns="2" VerticalChildrenAlignment="Center" />
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                        <GridView.ItemContainerStyle>
                            <Style TargetType="GridViewItem">
                                <Setter Property="Margin" Value="4" />
                                <Setter Property="Padding" Value="10" />
                                <Setter Property="Background" Value="#FF25A1DB" />
                                <Setter Property="BorderThickness" Value="1" />
                            </Style>
                        </GridView.ItemContainerStyle>
                    </GridView>
                </SemanticZoom.ZoomedOutView>
        </SemanticZoom>
        </StackPanel>
    </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:27:53.610

解决方案似乎是在包含 SemanticZoom 的 StackPanel 上设置 Horizo​​ntalAlignment 属性。如果我将其设置为左，则内容会适当对齐。

# python - 服务器客户端通信 Python

> ID：10005851
> 
> 赞同：4
> 
> 时间：2012-04-04T06:17:13.840
> 
> 标签：python, sockets, client

**服务器**

```
import socket
import sys
s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)

host= 'VAC01.VACLab.com'
port=int(2000)
s.bind((host,port))
s.listen(1)

conn,addr =s.accept()

data=s.recv(100000)

s.close 
```

**客户**

```
import socket
import sys

s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)

host="VAC01.VACLab.com"
port=int(2000)
s.connect((host,port))
s.send(str.encode(sys.argv[1]))

s.close() 
```

我希望服务器接收客户端发送的数据。

尝试此操作时出现以下错误

**客户端**

Traceback（最近一次调用最后一次）：文件“Client.py”，第 21 行，在 s.send(sys.argv[1]) 中类型错误：'str' 不支持缓冲区接口

**服务器端**

文件“Listener.py”，第 23 行，在 data=s.recv(100000) socket.error: [Errno 10057] A request to send or receive data was not allowed because the socket is not connected and (when sent on a datagram使用 sendto 调用的套接字）没有提供地址

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T06:22:32.187

在服务器中，您使用*侦听*套接字接收数据。它仅用于接受新连接。

改为：

```
conn,addr =s.accept()

data=conn.recv(100000)  # Read from newly accepted socket

conn.close()
s.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:21:43.407

您的线路`s.send`期望接收流对象。你给它一个字符串。用 BytesIO 包装你的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:25:21.133

您使用的是哪个版本的 Python？从错误消息中，我猜您无意中使用了 Python3。你可以用 Python2 试试你的程序，应该没问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-21T17:09:02.157

尝试将客户端套接字更改为：

```
s=socket.socket(socket.AF_INET,socket.SOCK_DGRAM) 
```

# ruby-on-rails - 防止在 Ruby on Rails 中缓存异常

> ID：10005857
> 
> 赞同：0
> 
> 时间：2012-04-04T06:18:13.943
> 
> 标签：ruby-on-rails, caching

如何防止缓存异常？我有这个动作：

```
caches_page :index
...
def index
  if params[:city]
    city = City.find(params[:city])
    @shows = city.shows
  else
    @shows = Show.all
  end
... 
```

如果 find 因 ActionRecord::RecordNotFound 崩溃而没有缓存 - 没关系。但我也不希望在我的日志文件中出现这个异常。但如果我：

```
 begin
    city = City.find(params[:city])
  rescue ActiveRecord::RecordNotFound
    render :nothing => true
    return
  end 
```

空页缓存！

在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:34:45.040

尝试 ：

```
caches_page :index, :if => :city_exists?

private

def city_exists
  city = City.find(params[:city])
  !city.nil? ? true : false
end 
```

而且我认为您可以使用**动作缓存**或**片段缓存**。

查看[扩展缓存](http://broadcastingadam.com/2011/05/advanced_caching_in_rails)的详细信息。

# php - 管理 CATI 软件的配额 - 解决方法

> ID：10005860
> 
> 赞同：0
> 
> 时间：2012-04-04T06:18:26.190
> 
> 标签：php, sql, xml, statistics

我正在尝试找出一种通过 CATI 系统管理配额的方法（用 PHP+SQL 和 XML 编写）

假设我们有这样的人口：

```
CITY | #MALE | #FEMALE | AGE CLUSTER (YOUNG) | AGE CLUSTER (OLD) 
NY      200      250         350                   100         
LA      300      350         250                   400 
```

然后我们有一个包含所有要采访的 ppl 的数据库：

```
(name, city, sex, age cluster, telphone) 
```

这个数据库不一定代表第一个表，我们还必须考虑错误的电话号码和任何其他可能迫使我们删除记录并向前传递的情况。

那么，我们如何才能在活动结束时实现良好的配额管理呢？最好的方法是什么？在一段时间内保持配额也很棒：假设我的活动将持续 1 年，我想在前 2 个月末执行检查点并发现配额还可以......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:20:10.010

queXS软件（我是作者）实现了电话面试的配额（它称之为行配额）[。](http://quexs.sourceforge.net/)代码可[在此处](http://quexs.svn.sourceforge.net/viewvc/quexs/trunk/)获得。

看看`admin/rowquota.php`文件和`functions/functions.operator.php`文件。

基本上发生的是：

设置：

*   正如您所描述的那样，您有一份要采访的人的名单（样本）
*   应该有 2 个列表，按区域（洛杉矶、纽约）划分
*   每个样本都会有一个男性、女性和年龄组 Young/Old 的配额

跑步：

*   系统将联系结果记录到每个号码
*   如果结果“完成”，系统会查找该记录完成的所有配额并添加到配额中
*   达到配额的地方 - 与查询匹配的所有记录（例如，洛杉矶的男性）将被排除在外

在这里描述代码会有点乏味，因为很多代码是特定于系统的数据库设置的，但是如果您需要进一步的解释，请告诉我。

# java - GAE，升级datanucleus jar包后出现一些异常

> ID：10005863
> 
> 赞同：1
> 
> 时间：2012-04-04T06:18:35.427
> 
> 标签：java, google-app-engine, datanucleus

当我将 sdk orm jar 更改为 v2（默认包括 sdk）时，我得到了一些异常信息。这是关于 datanucleus-core-3.0.6.jar 已注册的 bla bla .... 搜索后，我知道它是3.0.6 中的一个错误。所以，我用 datanucleus-core-3.0.10.jar 来代替它。但是编译pojo Enhancer时不成功

```
java.lang.RuntimeException: Unexpected exception
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:76)
    at com.google.appengine.tools.enhancer.Enhance.<init>(Enhance.java:71)
    at com.google.appengine.tools.enhancer.Enhance.main(Enhance.java:51)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:74)
    ... 2 more
Caused by: java.lang.NoSuchMethodError: org.datanucleus.plugin.PluginManager.<init>(Lorg/datanucleus/PersistenceConfiguration;Lorg/datanucleus/ClassLoaderResolver;)V
    at org.datanucleus.OMFContext.<init>(OMFContext.java:159)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:172)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:150)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1157)
    ... 7 more 
```

这是我在 \lib\user\orm 中的 jar 文件

```
asm-3.3.1.jar
datanucleus-api-jdo-3.0.5.jar
datanucleus-api-jpa-3.0.6.jar
datanucleus-appengine-2.0.0-final.jar
datanucleus-core-3.0.10.jar
geronimo-jpa_2.0_spec-1.0.jar
jdo-api-3.0.jar
transaction-api-1.1.jar 
```

我整天都在找。有谁知道它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:06:26.753

您在某处的 CLASSPATH 中有旧版本的 datanucleus-core 和 datanucleus-enhancer。该堆栈跟踪中的“OMFContext”在 DataNucleus 中已经存在很长时间了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:49:07.603

我想我知道，为什么用新的数据核升级 appengine 不起作用。它不是类路径条目！我发现在`ant-macro.xml`触发增强步骤的 中，有一个指向 appengine-tools-api.jar 的链接，并且有 class `EnhancerTask`。这可能是旧版本的链接，因为新的 datanucleus-enhancer-3.0.1.jar 有它自己的`EnhancerTask`类。因此，将新版本的 datanucleus 与旧的 appengine sdk 一起使用（与[http://code.google.com/p/datanucleus-appengine/wiki/HowToUpdateTheSDKWithANewPluginVersion](http://code.google.com/p/datanucleus-appengine/wiki/HowToUpdateTheSDKWithANewPluginVersion)相反）的唯一方法是通过以下任一方式进行增强`ant`（ https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine）或者可能是`eclipse-datanucleus-plugin`. 不幸的是，这个插件在我的 Eclipse 中不能正常工作。安装/配置插件后，仍然没有项目上下文菜单“datanucleus”，我应该在其中添加支持。所以我会试试这个`ant`版本。

# android - 如何在文本转语音中使用印地语（印度母语）语言？

> ID：10005867
> 
> 赞同：4
> 
> 时间：2012-04-04T06:19:14.373
> 
> 标签：android, set, locale, text-to-speech, regional

我正在为学生创建一个应用程序。我需要用印地语或马拉地语输入数据。
当用户点击特定主题时，用户应该能够以印地语或马拉地语收听该主题。
我知道如何在 TextToSpeech 中设置语言，例如

```
Tts.setLanguage(Locale.US); 
```

我需要设置印地语或马拉地语。我的问题是如何
在 TextToSpeech 中使用马拉地语或印地语。请给我任何参考或提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:15:27.333

您需要一个支持印地语的文本转语音 (TTS) 引擎。每个 TTS 引擎都有它支持的特定语言。这是一个[支持印地语的 TTS 引擎](http://www.blissit.org/)，但它在 Windows 上运行。我从标签中看到您希望在 Android 上支持此功能。这是一篇[关于在 Android 上支持印地语 TTS](http://groups.google.com/group/tts-for-android/browse_thread/thread/ff5f891b5e3daaec)的帖子。Android 上的原生 TTS 不支持印地语。您可能需要做的是创建一个使用印地语文本并将其翻译成音频文件的服务。然后，您将音频文件流式传输到您的 Android 应用程序。

在我看来，尽管您不想将 TTS 用于教育应用程序。我想你会发现 TTS 的输出非常机械化，学生很难理解。我会记录课程/信息，然后将其流式传输到您的应用程序中。在您购买任何 TTS 引擎之前，我会先尝试一下，以确保生成的语音是可以接受的。当今大多数顶级教育应用程序（例如：[可汗学院](http://www.khanacademy.org/)）都使用预先录制的音频和/或视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T11:36:23.227

你应该使用 msg.lang = 'hi-IN';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T11:26:14.790

你应该使用：-

```
tts.setLanguage(Locale.forLanguageTag("hin-IND")); 
```

或者

```
tts.setLanguage(new Locale("hin","IND",null)); 
```

# playn - 我应该在每一帧上重新绘制 SurfaceLayer 吗？

> ID：10005875
> 
> 赞同：0
> 
> 时间：2012-04-04T06:20:01.227
> 
> 标签：playn

我创建了一个简单的示例：背景表面层和上面的 10 个小“点”（10 个表面层 10x10 像素，每个表面层通过 fillRect() 填充颜色）。Paint 方法只是周期性地移动点：

```
private SurfaceLayer background;
private List<Layer> dots = new ArrayList<Layer>();

@Override
public void init()
{
    background = graphics().createSurfaceLayer(graphics().width(), graphics().height());
    background.surface().setFillColor(Color.rgb(100, 100, 100));
    background.surface().fillRect(0, 0, graphics().width(), graphics().height());
    graphics().rootLayer().add(background);

    for (int i = 0; i < 10; i++)
    {
        SurfaceLayer dot = graphics().createSurfaceLayer(10, 10);
        dot.surface().clear();
        dot.surface().setFillColor(Color.rgb(250, 250, 250));
        dot.surface().fillRect(0, 0, 10, 10);
        dot.setDepth(1);
        dot.setTranslation(random()*graphics().width(), random()*graphics().height());
        dots.add(dot);

        graphics().rootLayer().add(dot);
    }
}

@Override
public void paint(float alpha)
{
    for (Layer dot : dots)
    {
        if (random() > 0.999)
        {
            dot.setTranslation(random()*graphics().width(), random()*graphics().height());
        }
    }
} 
```

不知何故，java 版本绘制所有点，而 html 和 android 版本仅绘制 1。

手册没有明确说明我是否应该在每次 paint() 调用中重新绘制所有这些点。据我了解，SurfaceLayer 适用于您不在每一帧上修改图层的情况（因此可以重复使用相同的缓冲区？），但这不起作用。

那么你们能帮我正确使用 SurfaceLayer 吗？如果我只是在 SurfaceLayer 上填充了一个矩形 - 它会永远在这一层上运行，还是应该在每次绘制调用中填充它？如果是 - 这与 ImmeadiateLayer 有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:00:30.270

您不需要在每次调用绘画时重新绘制表面层。正如您所展示的，您仅在准备时才绘制它，并且您绘制的纹理将在每一帧都被渲染，而无需您采取进一步的行动。

如果 Android 和 HTML 后端没有绘制所有的表面层，那么一定有一个错误。我会尝试重现您的测试，看看它是否适合我。

注意：创建一个屏幕大小的巨大表面并在其中绘制纯色是对纹理内存的**巨大**浪费。只需创建一个在每一帧上调用 fillRect() 的 ImmediateLayer，这比创建一个巨大的屏幕覆盖纹理要高效得多。

# php - 如何在作业管理器插件中执行自定义搜索功能？

> ID：10005876
> 
> 赞同：0
> 
> 时间：2012-04-04T06:20:12.360
> 
> 标签：php, wordpress

我在 wordpress 中使用了作业管理器插件。我的客户希望管理部分中的搜索功能来搜索工作。无论添加什么工作，我们都保存在 wp_posts 表中。

下面是代码

```
 $jobs = get_posts('post_type=jobman_job&numberposts=-1&post_status=publish,draft,future' ); 
```

在上面的代码中我想添加`$post_title = $_POST['searchtext']`。

那么如何添加现有代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:14:16.487

看看这个： [http ://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)

# php - Yii 框架异步请求

> ID：10005877
> 
> 赞同：2
> 
> 时间：2012-04-04T06:20:16.010
> 
> 标签：php, ajax, asynchronous, yii

我有执行 3 个任务的 ajax 请求：

*   保存模型 (DB)
*   发送电子邮件
*   给出成功或失败的消息。

因为这个任务太费时间了。用户最多可以等待 20 秒的响应（成功或失败消息）。如果用户关闭浏览器，它会停止用户当前进程的操作之一。

这是糟糕的用户体验。

我希望用户将他的数据提交给我的控制器，之后他将收到“成功或失败消息”。并且该过程将完全在服务器端，并且应该支持多会话。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:43:12.357

@hakre 您提供的内容并没有减少用户等待响应的时间。

我找到了最好的解决方案： [runactions extension for yii](http://www.yiiframework.com/extension/runactions/)

这是一个扩展，可让您从控制器后台操作运行。有几种使用方法。最适合我的情况是这个

```
public function actionTimeConsumingProcess()
{
    if (ERunActions::runBackground())
    {
       //do all the stuff that should work in background
       mail->send()
    }
    else
    {
        //this code will be executed immediately
        //echo 'Time-consuming process has been started'
        //user->setFlash ...render ... redirect,
    }
  //User information
  echo "Submit Success!"
} 
```

它的工作，但没有 ajax 请求，当我提出 ajax 请求时，它由于某种原因无法工作。所以我用：

```
 ERunActions::httpPOST($this->createAbsoluteUrl('Form/Submit'), array('to'=>'mail@domain.com', 'subject'=>'This is the subject')); 
```

它的工作很棒，但它不是解决这个问题的理想解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T17:48:01.360

关于 runactions 扩展的问题是它只适用于未经身份验证的用户，您可以使用[yii backjob 扩展](http://www.yiiframework.com/extension/backjob)，但这将需要使用某种非阻塞会话存储，例如 CHttpDbSession。我仍在寻找正确的方法来做到这一点......我发现最好的选择之一是运行服务器后台作业：

```
/usr/bin/php -q longProcess.php > /dev/null 2>&1 & 
```

但是，我仍然需要知道如何在 cmd 行中传递控制器和操作并允许 yii 实际使用它，例如

```
/usr/bin/php -q yii-index.php controller action > /dev/null 2>&1 & 
```

**更新：**我发现**最好的方法**是使用 yii 控制台应用程序并将其作为后台作业运行。下面的链接帮助很大：

[Yii cron职位](http://learnyii.blogspot.com/2011/01/how-to-run-cron-job-with-yii.html)

我现在使用这段代码，它运行良好：

```
exec("nohup /protected/yiic mycommand /dev/null 2>&1 &") 
```

# java - CSV 编码规范

> ID：10005883
> 
> 赞同：0
> 
> 时间：2012-04-04T06:20:55.447
> 
> 标签：java, encoding, csv

我正在创建一个 CSV 并以 UTF-8 编写内容，通过指定如下编码来支持德语和英语

```
BufferedWriter outFile = new BufferedWriter( new OutputStreamWriter( outputStream, "UTF-8" ) ); 
```

以上工作正常，直到我在 CSV 的标题中添加以下分隔符指示 (;)

```
outFile.write( "sep=;" );
outFile.newLine(); 
```

没有这个分隔符；我的 CSV 将是错误的，但是当我包含这个时，编码失败并且 UTf-8 没有到位。

是否有任何其他关键字（如“sep =”在 CSV 的标头中指定以指定编码？

我试过 encoding="UTF-8" 但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-07T23:20:03.377

您无法使用 Excel 2007 打开 UTF8 csv 文件。Microsft 不理解[“标准”](https://www.ietf.org/rfc/rfc4180.txt)一词。正因为如此，生成一个 csv 文件非常困难，该文件在读取 .csv 文件并保持正确编码的每个可能的应用程序中打开。

如果您必须使用 Excel 2007，我建议使用 Microsoft 自己的“windows 1252”编码，因为它支持德语字符。不要使用标题，还要考虑使用制表符作为分隔符。是的，我知道 c 代表逗号，但如果您再次保存文件，选项卡似乎与 Excel 2007 更一致。

# sql-server-2005 - 在 select 语句中调用存储过程

> ID：10005890
> 
> 赞同：0
> 
> 时间：2012-04-04T06:21:45.583
> 
> 标签：sql-server-2005

`SELECT`是否可以在 SQL Server 2005 的语句中调用存储过程？

这是我的查询

```
Select 
        rd.Receipt_Details_ID, rd.Narration,
        dbo.FEE_SELECT_STUDENT_AMOUNTDETAILS(sg.Acadamic_ID, sg.Grade_ID, 
                                             rd.Feepay_ID, sg.Student_ID, p.Type, 
                                             sg.Student_Grade_ID),
        rd.Amount, p.Feepay_Mode, p.Type, p.Feepay_ID
from 
        FEE_RECEIPT_DETAIL rd
inner join 
        FEE_RECEIPT r on r.Receipt_ID = rd.Receipt_ID
inner join 
        FEE_STUDENT_GRADE sg on sg.Student_ID = r.Student_ID and sg.Acadamic_ID = r.Acadamic_ID
inner join 
        FEE_PAYMODE p on p.Feepay_ID = rd.Feepay_ID and rd.Receipt_ID = 2 
```

当我执行这个查询时，我得到一个错误

> 找不到列“dbo”或用户定义的函数或聚合“dbo.FEE_SELECT_STUDENT_AMOUNTDETAILS”，或者名称不明确。

`FEE_SELECT_STUDENT_AMOUNTDETAILS`是这里的存储过程

# google-calendar-api - Google Calendar API - 如何添加日历小工具和事件？

> ID：10005891
> 
> 赞同：3
> 
> 时间：2012-04-04T06:22:12.577
> 
> 标签：google-calendar-api, google-gadget

我正在尝试添加一个谷歌日历小工具以及一个事件。但是，每当我尝试将小工具与事件一起添加时，谷歌日历 API 都会给我一个“无效值”错误。

我正在使用[event.insert 协议](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)。如果我在没有小工具块的​​情况下发送请求，它可以正常工作并添加一个事件。但是，添加小工具块会引发错误。

```
{
 "location": "San Jose, CA",
 "description": "blah blah blah blah",
 "kind": "calendar#event",
 "start": {
  "dateTime": "2012-04-04T10:00:00.000-07:00"
 },
 "end": {
  "dateTime": "2012-04-04T10:00:00.000-07:00"
 },
 "gadget": {
  "iconLink": "http://www.thefreedictionary.com/favicon.ico",
  "link": "http://www.thefreedictionary.com/_/WoD/wod-module.xml",
  "title": "Word of the Day",
  "type": "application/x-google-gadgets+xml",
  "height": 136,
  "width": 300,
  "display": "icon"
 }
} 
```

有谁知道为什么会这样？我真的需要找到一种方法将图像插入到我添加到谷歌日历的事件中。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T22:16:33.833

我也遇到过这个问题。在我看来，iconLink 和链接必须是 https 才能正常工作。

# iphone - 没有要编译的架构 (ARCHS=arm6 arm7, VALID_ARCHS=armv7)

> ID：10005896
> 
> 赞同：23
> 
> 时间：2012-04-04T06:22:28.787
> 
> 标签：iphone, objective-c, ios, xcode

在构建应用程序时，我经常遇到错误：

```
No architectures to compile for (ARCHS=arm6 arm7, VALID_ARCHS=armv7). 
```

我尝试添加`arm6 arm7`到架构中，但没有奏效。我也尝试了`arm6`and `arm7`，但仍然没有。

另外，我将部署目标设置为`4.3 iPhone`. 我有 Xcode 版本`4.3.1`。

请帮忙！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T09:45:43.383

您必须采取两个步骤：

*   转到`Project Target > Build Settings > Architectures` 删除您在那里看到的任何内容，然后一一添加这些行：

    armv6 armv7

那里没有“保存”按钮，所以我要做的是添加另一个空白行，按回车键，删除它，然后单击其他地方，这样我就可以确保将它们都添加了：

![在此处输入图像描述](../Images/87dc9702b025bebb57a8365b1fd44354.png)

*   现在转到 AppName-Info.plist 文件，查找键“要求设备功能”并将其全部删除。

现在它完成了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-26T13:44:41.207

将旧项目升级到 xcode5 后，设置“仅构建活动架构”=否这对我有用

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-06-27T15:26:28.733

这对我来说很好：

将**架构**设置为“**标准 (armv7,armv7s)** ”，然后手动设置**有效架构**​​为**armv7 armv7s**

![在此处输入图像描述](../Images/523d05e883bec78ba17fdfd4c1cad2a1.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T06:25:19.987

不是 arm6 和 arm7，尝试添加 armv6 和 armv7 作为架构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T06:36:57.827

仅添加架构 armv7。删除 armv6 然后尝试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:38:49.897

我正在使用最新的 Xcode 和 iPhone5。我将其设置为 armv7s 和 armv7。它解决了我的问题，这是`No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=armv7s, VALID_ARCHS=armv6 armv7)`错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-31T11:58:16.500

包括 64 位：将架构设置为`"$(ARCHS_STANDARD_32_64_BIT)"`和手动设置之后 有效架构设置为`armv7 arm64`. 我的 Xcode 版本是 5.1。基础 SDK 是 iOS 7.1 部署目标是 6.0。

在另一个设置配置中：将架构设置为`"$(ARCHS_STANDARD)"`并在手动将有效架构设置为之后`armv7 arm64`。我的 Xcode 版本是 6.2。基础 SDK 是 iOS 8.2 部署目标是 6.0。

# android - 使用 Tesseract 的 Android OCR 应用程序

> ID：10005898
> 
> 赞同：1
> 
> 时间：2012-04-04T06:22:35.223
> 
> 标签：android, windows, eclipse, ocr, tesseract

我目前正在开发一个基于 OCR（光学字符识别）的 android 应用程序。我已经下载了“tesseract-android”项目，其中包含用于编译用于 Android 的 Tesseract、Leptonica 和 JPEG 库的工具。我正在通过 Eclipse 在 Windows Vista 操作系统上进行开发。

我还下载了必要的工具（android-ndk;apache ant..），并仔细完成了构建这个项目并将其作为库添加到我的基本应用程序的所有步骤。

我的应用程序包括打开相机拍照，然后通过 tesseract API 处理这张照片，以便将其转换为文本。

我的问题是： 1\. 这个程序在 Windows 操作系统下是真的不行吗？2\. 编译时出现如下错误：“java.lang.IllegalArgumentException: Data path must contain subfolder tessdata!”

潜在的错误可能是什么？java代码的相关部分是：

```
File myDir = getExternalFilesDir(Environment.MEDIA_MOUNTED); 
TessBaseAPI baseApi = new TessBaseAPI(); 
baseApi.init(myDir, "eng"); 
```

我也尝试使用“/tess-two/external/tesseract-3.01/tessdata/tessconfigs”而不是“myDir”，但错误仍然相同。

我将非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T16:18:16.630

我面临着同样的问题。当我从路径中删除“tessdata”时为我工作。

```
Before (fail): path = "/mnt/sdcard/tesseract/tessdata"; 
After (success): path = "/mnt/sdcard/tesseract/"; 
```

然后， baseApi.init(path, "eng") 毫无例外地工作。

当然，tessdata 文件夹应该在所需的.traineddata 文件的路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:43:35.683

Q1。它应该可以在任何操作系统上运行，我已经能够`ndk-build`在 Win7、Mac OS Lion 和 Ubuntu 上运行而没有任何问题。

Q2。确保您有权写入外部存储，并且有足够的空间来执行此操作。

如果仍然失败，请查看 DDMS 并查看文件资源管理器并仔细检查您的应用程序是否正在设置目录结构并复制训练数据。

我在创建 eng.traineddata 文件时遇到了一个奇怪的问题，但它是 0 字节，导致了各种奇怪的问题。

您还可以手动创建目录结构以帮助您取得进展，并稍后修复此初始化问题（但不要忘记它！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:02:18.667

编译本机内容时的路径错误通常与您的 java 代码无关。您的 java 代码将负责运行时问题。检查您的构建脚本并发布更多日志消息。

# rss - RSS 提要链接不会打开阅读器或只是转储出原始 XML

> ID：10005900
> 
> 赞同：1
> 
> 时间：2012-04-04T06:22:49.907
> 
> 标签：rss

我按照教程开发了一个 RSS 提要，我认为 .xml 文件本身是有序的。但是，我有两个问题：

1.  当人们点击 RSS 链接时，它不会自动加载到他们的 RSS 阅读器中
2.  对于那些没有 RSS 阅读器的人，单击链接会导致页面充满代码，这不是很容易理解

我希望可能有一些关于如何轻松实现这一点的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:34:39.883

尝试删除标签中的`<![CDATA[`and 。`]]>``description`

我下载了您的 xml，更改了这些行，在我的服务器上对其进行了测试，并且它在 google 的 rss 阅读器中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:33:32.680

这是一个与浏览器和用户配置文件相关的问题，即 RSS 链接在单击时将如何反应。

如果用户将操作设置为自动将其加载到他们选择的提要阅读器中，它将执行此操作。

如果他们不这样做，那么就不会。

对于那些只看到原始转储的人，可能是因为他们使用的浏览器不支持 RSS 提要，并且会将 XML 转储为原始文本。[不使用扩展程序或附加组件的谷歌浏览器](http://code.google.com/p/chromium/issues/detail?id=84 "Chromium：第 84 期：需要 RSS 或 Atom 支持")（至少仍在版本 18 中）通常是这里的自卸卡车罪魁祸首。

# android - 将 JSON 从 Android 发布到 php 页面

> ID：10005904
> 
> 赞同：0
> 
> 时间：2012-04-04T06:23:19.613
> 
> 标签：android

需要将 JSON 数据发布到服务器，我有有效的 json 对象。我的问题是，{"code":"400","message":"加载 JSON 失败。请求中不能包含特殊字符。请检查请求的 JSON。"}

这是我的网址：- [http://www.invoicera.com/app/api/check_json_api.php?token=7B92C122473A3D6F54E60D20AC5526D0](http://www.invoicera.com/app/api/check_json_api.php?token=7B92C122473A3D6F54E60D20AC5526D0)

这是我要发布的 JSON 数据：- { "listInvoice" : { "client_id":"", "date_from":"", "date_to":"", "invoice_number":"", "invoice_record_status" :"草稿", "invoice_status":"活动", "page":"1", "per_page_record":"10" } }

# c++ - 当用户取消时隐藏 CDialogImpl 对话框

> ID：10005905
> 
> 赞同：0
> 
> 时间：2012-04-04T06:23:26.933
> 
> 标签：c++, windows, dialog, atl, wtl

使用[`CDialogImpl`](http://msdn.microsoft.com/en-us/library/79bke8xf.aspx)派生类作为基于对话框的 WTL/ATL 应用程序，我想在用户单击右上角的“X”按钮（或按下`Esc`或`Alt`+ `F4`）时隐藏主窗口。

当前，“X”关闭对话框并结束应用程序。

![在此处输入图像描述](../Images/8f7fc94d09dafaca094822a7de6a26ca.png)

我想改变这种行为，只**隐藏对话框而不是关闭它**。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:37:23.947

我不确定 ATL/WTL 是否为此提供了一些包装器，但在 WinAPI 中，您正在寻找的函数是[ShowWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)，您可以这样调用它：

```
ShowWindow(hwnd, SW_HIDE); 
```

如果您希望在应用程序关闭时发生这种情况，您需要处理的消息是[WM_CLOSE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617%28v=vs.85%29.aspx)。

快速搜索后，MSDN 显示[CWindow::ShowWindow](http://msdn.microsoft.com/en-us/library/40zhehxa%28v=vs.110%29.aspx)，这是我前面提到的包装器。

# android - Eclipse Android 插件 -- libncurses.so.5

> ID：10005907
> 
> 赞同：101
> 
> 时间：2012-04-04T06:23:37.687
> 
> 标签：android, linux, eclipse

我在 Fedora 16 OS，64 位的 Eclipse 上安装 ADT（Android 开发工具）时遇到了很大的困难。

Eclipse 本身运行良好。

按照指示，我首先安装了常规的 Android SDK，即操作系统级别的工具包。进展顺利，我能够在工具目录中使用 Android 应用程序。

在 Eclipse 中，这有点困难，因为我首先必须安装 GWT 或 google 相关工具，这需要 WST 的核心 Eclipse Indigo 更新。最后，ADT 安装报告成功。

但是，每次打开 Eclipse 时，都会弹出大量关于 libncurses.so.5 和以下日志的弹出窗口：

```
[2012-04-04 02:06:35 - adb] /opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory
[2012-04-04 02:06:35 - adb] 'adb version' failed!
/opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory
[2012-04-04 02:06:35 - adb] Failed to parse the output of 'adb version':
Standard Output was:

Error Output was:
/opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory

[2012-04-04 02:06:35 - adb] /opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory
[2012-04-04 02:06:35 - adb] 'adb version' failed!
/opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory
[2012-04-04 02:06:35 - adb] Failed to parse the output of 'adb version':
Standard Output was:

Error Output was:
/opt/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory 
```

当我尝试打开 Android SDK 管理器（在窗口下）时，插件确实打开了，但窗口在任何地方都没有关闭按钮（与操作系统级别的同一个按钮不同，它看起来也一样）所以唯一的方法是退出其中一个是找到 Eclipse PID 并杀死它。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-04-06T21:00:48.117

这完全解决了问题：

```
yum install ncurses-libs.i686 libstdc++.i686 libgcc.i686 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-04-28T17:34:43.253

发生这种情况是因为 Android SDK 是一个 32 位应用程序并且需要一些 32 位共享库，

我在 Ubuntu 64 位上遇到了同样的问题，并修复了：

```
$ sudo apt-get install ia32-libs 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-06T13:32:56.283

只安装 libncurses5：

```
$ sudo apt-get install libncurses5:i386 
```

ia32-libs 将安装许多不必要的库。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-27T10:02:24.663

```
yaourt -S multilib/lib32-ncurses 
```

用于**ArchLinux**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T06:42:51.880

你可能没有`libncurses5`安装。尝试

```
rpm --install ncurses-libs 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T10:43:59.853

在centos上有类似的问题：

> ./adb：加载共享库时出错：libncurses.so.5：无法打开共享对象文件：没有这样的文件或目录

做了以下事情：

```
yum install ncurses ncurses-devel ncurses-libs ncurses-libs.i686   ncurses-devel.i686 
```

问题解决了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-19T14:15:19.667

[Tim Mattison 的博客](http://blog.timmattison.com/archives/2011/11/02/how-to-install-googles-android-eclipse-plugin-and-or-adb-on-64-bit-debian-ubuntu/)中的这个技巧是在*Debian Wheezy*下为我做的：

```
sudo apt-get install lib32ncurses5 lib32stdc++6 
```

# c++ - 如何以编程方式创建/构建 CTabCtrl？

> ID：10005908
> 
> 赞同：0
> 
> 时间：2012-04-04T06:23:45.977
> 
> 标签：c++, visual-c++, mfc

在不使用“图形资源”的情况下，如何创建和构建 CTabCtrl？

到目前为止，我已经创建了它，但我不知道它的 MESSAGE_MAP。另外，如何根据选择的选项卡为每个“选项卡”创建不同的视图，以显示/隐藏控件？

谢谢

```
 CTabCtrl *tabMain = new CTabCtrl();
    tabMain->Create(WS_CHILD|WS_VISIBLE|TCS_TABS|TCS_SINGLELINE,CRect(700,100,1000,600),this,5);

    TC_ITEM ti;
    ti.mask = TCIF_TEXT;
    ti.pszText = _T("Tab0");
    tabMain->InsertItem(0,&ti);
    ti.pszText = _T("Tab1");
    tabMain->InsertItem(1,&ti);
    ti.pszText = _T("Tab2");
    tabMain->InsertItem(2,&ti); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:29:07.283

您传递给 Create 函数的最后一个参数是您应该在 MESSAGE_MAP 中使用的 Id。

例如：

```
ON_NOTIFY(TCN_SELCHANGE, 5 , OnSelchangeTab) 
```

# python - django-model-utils，继承和模板

> ID：10005910
> 
> 赞同：0
> 
> 时间：2012-04-04T06:24:18.447
> 
> 标签：python, django, django-models, django-templates

所以 django-model-utils 很棒。
我正在使用 django 1.3 并尝试使用继承管理器。

我想要完成的是：
- 一个用于捕获所有子类的查询集
- 将此查询集传递给模板
- 遍历此查询集，但根据特定的子类对每个 obj 进行不同的处理

如果我这样做，请从文档中获取示例：

```
nearby_places = Place.objects.filter(location='here').select_subclasses() 
```

一旦我进入模板，有没有办法让我知道每个 near_places 是什么，以便我可以用它做一些不同的事情？例如

```
{% for np in nearby_places %}
{% if np is a restrautant %}
# do this
{% elif np is a bar %}
# do this
{% endif %}
{% endfor %} 
```

我现在唯一能想到的是，如果在我的每个子类中我定义了一个类似的方法

```
def is_restaurant()
    return True

def is_bar()
    return True

etc 
```

还有其他更优雅的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:04:42.623

您可以添加一个模型方法，例如：

```
def classname(self):
    # can't access attributes that start with _  in a template
    return self.__class__.__name__ 
```

然后：

```
{% if np.classname == 'Restaurent' %}
{% endif %}

{% if np.classname == 'Bar' %}
{% endif %}

etc, etc... 
```

# php - PHP 中的近似计数

> ID：10005912
> 
> 赞同：3
> 
> 时间：2012-04-04T06:24:40.843
> 
> 标签：php, mysql

我有一个包含文章列表的网站。我想包含一行，说明数据库中有多少篇文章，但是我不希望它显示确切的计数。

我希望它向下舍入到最接近的 10，例如，对于 105 篇文章，我希望它说“100+”等。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:27:01.250

非常简单：

```
floor($num / 10) * 10 
```

[文档](http://php.net/manual/en/function.floor.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:32:52.197

要执行类似的操作，您必须使用底数 = 10 的对数并将其四舍五入

```
$exp= floor(log($num)/log(10));
$num = pow(10,$exp)."+"; 
```

这适用于 10、100、1000 ecc，我认为按照您的要求做更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:27:03.230

```
$count = 105;
$nearest10 = floor($count / 10) * 10; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:31:11.827

```
printf("%d0+", $count * 0.1); 
```

或者

```
echo substr($count, 0, -1), '0+'; 
```

[`round`^(*Docs*)](http://php.net/round)功能也支持开箱即用：

```
round($count, -1, PHP_ROUND_HALF_DOWN); 
```

但加号不见了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T06:33:46.503

首先，您需要使用`COUNT()`MySQL 的 Aggregate 函数来获取结果总数，或者类似的东西。

然后，您需要使用`%`以 10 为基数的模运算符 ( )，然后从主要结果中减去该值，如下所示：-

```
$sql = "SELECT COUNT(id) AS `total_num_records` FROM `table`";
$resource = mysql_query($sql);
$result = mysql_fetch_array($resource);
$totalRecords = $result['total_num_records'];

if ($totalRecords > 0) {
    $remainder = $totalRecords % 10;
    $showHumanFriendlyRecords = ($totalRecords - $remainder);
    $strHumanFriendlyRecords = $showHumanFriendlyRecords . "+";
} 
```

希望能帮助到你。

# php - URL的密码保护

> ID：10005913
> 
> 赞同：0
> 
> 时间：2012-04-04T06:24:46.693
> 
> 标签：php, javascript, mysql, html

我有一个网站，应该限制它的访问。
因此，在进入页面时，在页面加载之前，我们应该使用三个字段来限制访问，即客户端和`username`该页面，这三个字段由我创建并存储在数据库中。`password``specific password`

我有 Javascript 和 PHP 的基本知识。

我的想法是在页面加载之前，Javascript 应该获取用户输入的三个字段值，通过 PHP，我们必须使用数据库进行验证，如果发生匹配，则页面应该加载，如果没有，则应该拒绝访问该页面。

简而言之，在点击 URL 和在页面加载之前必须建立与数据库的连接并输入用户/客户端 3 个字段，并通过 PHP 与 MYSQL 数据库进行验证，并显示成功的身份验证页面。

请提出代码建议。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:57:03.540

我创建了一个你可以使用的函数：

```
<?php
function login($username,$password,$salt,$db,$table,$usercolumn,$passwordcolumn,$con)
{
    $user=mysql_real_escape_string($username);
    $password=mysql_real_escape_string($password);
    $db=mysql_select_db($db,$con);
    if(!$db)
    {
        return "connection error";  
    }
    else
    {
        $sql="SELECT * FROM `$table` WHERE `$usercolumn`='$user';";
        $enc=$password;

    foreach($salt as $value)
    {
        if($value=="md5")
        {
            $enc=md5($enc);
        }else
        {
            $enc=crypt($enc,$value);
        }
    }
        $resource=mysql_query($sql);
        $row=mysql_fetch_array($resource);
        $passdb=$row[$passwordcolumn];
        if($passdb==$enc)
        {
            $sucess=true;
        }else
        {
            $sucess=false;
        }

    }
    return $sucess;
}
?> 
```

你可以使用它，如果它返回true，这意味着用户名和密码是正确的，现在你必须验证你的第三个选项......
要使用这个函数，你只需要在将该函数复制到文件后像这样调用，如果它被命名为“logger.php”，

```
<?php
require("logger.php");
$enc=array("salt","md5","differentsalt")//your encryption such as if you have encrypted using 'salt' at first then using md5 hash and again 'differentsalt',then you need to give like i have given

if(login($username,$password,$enc,$db,$table_name,$usercolumn,$passwordcolumn,$con))//$username is the username which user supplied,$password is password user supplied,$enc is the encryption and it must be an array... which is also given above,$db is database name,$table_name is the table where username and encrypted password are stored,$usercolumn is the column name where username are stored, $passwordcolumn is the column where encrypted password are stored, and last $con is the connection identifier, you may have given, $con=mysqli_connect("username","password");
//if all the parameters are supplied correctly, it will check for the username and password matching and you will have to check the third option
{
//now validate your third option here...
//if you are here, that means password and username has matched

}
else
{
//this means username and password didnt matched... so output the error
}
?> 
```

要接受用户名和密码，您可以创建一个表单并在那里询问密码，然后提交...

# blackberry - 我的 blackerry 应用程序中的 facebook 集成

> ID：10005914
> 
> 赞同：1
> 
> 时间：2012-04-04T06:24:54.983
> 
> 标签：blackberry

我已经实现了一个连接到 Facebook 并在 Facebook 墙上发布状态的黑莓应用程序。问题是应用程序每次在发布状态时都要求输入登录名/密码。

有没有办法克服这个问题并使应用程序保持登录状态？

# javascript - IE 和 css 通过使用 jquery

> ID：10005921
> 
> 赞同：-1
> 
> 时间：2012-04-04T06:25:27.387
> 
> 标签：javascript, jquery, css, html

我想设置一个这样的css属性

```
$(#something).css({'color':'red'}); 
```

例如，但我写的是

```
$(#something).css({'color':'#cafe'}); 
```

并且在 IE 上什么也没做。那有什么问题？前者有效，后者失败..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:23:00.430

我认为您想使用关键字而不是颜色，以便可以在多个地方使用它。为此，您应该将其存储在一个变量中，然后当您通过 jQuery 应用 CSS 时，使用变量而不是颜色。

例子：

```
var cafe = '#482610';
$('#something').css('color', cafe); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:30:03.993

您仍然必须使用有效的颜色值（`#cafe`不是一个 -`red`虽然它是预定义的颜色，但可以），就像您在样式表中所做的那样。

请参阅您可以使用的预定义颜色**[列表](http://www.w3schools.com/cssref/css_colornames.asp)**。如果您不想要预定义的颜色，请使用 3 位或 6 位数字的十六进制格式，例如`#ff0000`or`#f00`或 RGB 表示法`rgb(255,0,0)`（示例在所有情况下都是红色）。看**[那个规格](http://www.w3.org/TR/css3-color/#rgb-color)**

顺便提一句。通常您必须将 jQuery-selector 包装在`'`s 中，例如：

```
$('#something').css({'color':'red'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:31:21.007

[http://www.w3.org/TR/css3-color/#rgb-color](http://www.w3.org/TR/css3-color/#rgb-color)

规范说：

> 十六进制表示法的 RGB 值的格式是一个“#”，后跟三个或六个十六进制字符。三位 RGB 符号 (#rgb) 通过复制数字而不是添加零转换为六位形式 (#rrggbb)。例如，
> 
> # fb0 扩展为#ffbb00。这确保可以使用短符号 (#fff) 指定白色 (#ffffff) 并删除任何依赖项
> 
> 关于显示器的颜色深度。

因此，您不能依赖无效值，例如`#cafe`，某些浏览器可能会尝试通过填充额外的 0 来宽容，但您真的不能依赖它。所以坚持规范:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T06:28:20.560

# 咖啡馆不是有效的十六进制颜色..

例如尝试#FFFFFF 或#CCCCCC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T06:28:28.597

没有像`#cafe`. 就这样。也许`cafe`没有井号，我从未尝试过。:-)

如果你的意思是它是一个十六进制值，Ramon 是对的，但你也可以使用短版本（3 个字符）：

`#caf`会工作。

# c# - XmlSerializer 将 float 序列化为 1E+07

> ID：10005924
> 
> 赞同：2
> 
> 时间：2012-04-04T06:25:30.327
> 
> 标签：c#, .net, serialization

我有一个在响应中接收对象的 ASMX 客户端。该对象包含属性，其中一个是**float**类型。

然后我序列化响应对象并使用 XSLT 对其进行转换以将其显示给用户。

但是，当该属性的值为 10000000 时，它会显示为 1E+07，这是错误的。

当我将代理类中的属性类型更改为双倍时，它又是 10000000。但我不确定这是否是一个可靠的解决方案。

我也尝试过 XSLT 格式编号，但 XSLT 1.0 不支持科学记数法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:11:18.330

Change the property to `decimal` type. That is the approach with which you are guaranteed to see no silent loss of precision, and no scientific notation.

# c# - 如何使用 .NET 构建类似 Opera 的功能？

> ID：10005925
> 
> 赞同：0
> 
> 时间：2012-04-04T06:25:34.207
> 
> 标签：c#, .net, opera

如何使用 .NET 构建类似 Opera 的功能？

当我们运行 Opera 浏览器并启用 Opera Unite 时，它​​会在 Web 上共享我们的桌面，我们可以通过 Internet 访问它而无需静态 IP，这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:44:09.550

您应该运行自己的 DNS 服务器。并且每当用户打开浏览器并登录时，您应该将用户的当前 IP 地址发送到您的服务器并在您的本地 DNS 中更新。由于您将只有一个子域 (desktop.operaunitecom)，因此每当有人点击您的 url 时，它首先会转到 operaunite DNS 服务器，从中获取您的 IP 地址。当用户的会话关闭时，您应该删除 DNS 条目。这可能是一个可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:25:28.460

您需要将您的动态 IP 映射到某个静态 DNS 名称。一种*易于使用*的解决方案是 DynDNS 服务。对于这些，您可以获得一个小型客户端程序（或者好的路由器已经实现了一个 dyn dns 客户端），它只是将您当前的 IP 地址映射到一个特定的 dns 名称。

完成此操作后，这取决于您喜欢它的可变性： - 您是否有一位大师应该能够查看各种客户端 PC 以寻求帮助？- 你想连接两个都有动态ips的客户端吗？

在第一种情况下，您的主人总是确保将他当前的 IP 地址映射到 dns 名称。在路由器上，可能需要一些端口转发，并且您的客户端会获得一个启用反向模式的 vnc 客户端。这使每个人都可以建立与您的主服务器的连接并共享桌面，而无需在客户端站点上进行任何更改。只有在主站点上才需要做一些事情（dynDns 和端口转发）。

在第二种情况下，它有点复杂。现在您有两个喜欢相互连接的动态 IP。这通常是通过某种中介来完成的。意味着两台机器都连接到某个主服务器（可通过某个 DNS 名称访问）。现在两台机器都与主服务器建立了双向连接，主服务器将简单地从第一个客户端获取数据并将其转发给第二个客户端，反之亦然。为了减轻主控的所有负担，主控可能会在第一步将客户端 A 的 IP 地址发送给 B，反之亦然。然后在第一步中，双方都试图直接相互连接。这种方法称为 UDP 打孔，并不总是有效，这会导致回退以使用主服务器。

使用第二种方法的两个示例是[Skype](http://www.skype.com/)和[join.me](https://join.me/)。

所有这些技术都不必与.Net 做任何事情。它是关于以太网、TCP/IP、互联网等的纯知识。由于你必须在这个低级领域做很多工作，我认为 C# 不是完成这项任务的理想框架。也许将 GUI 作为最后一步，但对于幕后的实际工作，您需要一些体面的网络知识，这些知识大部分独立于您使用的编程语言。

# algorithm - 匹配数组中三个或更多最近的数字

> ID：10005929
> 
> 赞同：0
> 
> 时间：2012-04-04T06:26:17.930
> 
> 标签：algorithm, matching, minimum

我有四个大小为 2^N 的数组，其中 N = 25。数组的元素是由我的算法生成的。这些已排序但包含数字。现在我必须取 array1 的每个元素并选择 array2、array3、array4 的元素，这样它们的总和应该是最小的（当我说 sum 我可以取 a1[k] +-a2[j]+-a3[m] +-a4[t]。我认为它类似于 K 维度合并问题。有人可以指出文献/实现/启发式做同样的事情。问候，Allahbaksh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:28:14.793

我认为这个问题可以在 O(n) 中解决，合并联合集中的所有数组，所以第二个值将是数组编号。遍历它并在每次迭代中从 4 个值中得到答案，在每一步计算所选数字之间的最大距离 -> 最小化该值。
初始化每个数组中数字最小的结果数组。

```
public Integer[] findClosest(int[][] unionSet, Integer[] result) {

    for (int i = 0; i < unionSet.length; i++) {
        int value = unionSet[i][0];
        int position = unionSet[i][1];
        int currentDistance = getDistance(result);
        Integer[] temp = Arrays.copyOf(result, result.length);
        temp[position] = value;
        int newDistance = getDistance(temp);
        if (newDistance <= currentDistance) {
            result = temp;
        }
    }
    return result;
}

private int getDistance(Integer[] result) {
    int max = 0;
    int min = 0;
    for (int i = 1; i < result.length; i++) {
        if (result[i] != null) {
            if (result[i] > result[max]) {
                max = i;
            }
            if (result[min] != null && result[i] < result[min]) {
                min = i;
            }
        }
    }

    return Math.abs(result[max] - result[min]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:43:57.980

**步骤 1** 对于array1[k]，在array2 或array3 或array4 中找到一个数，使其模数更接近于array1[k]。

```
eg . 
array1 = {1, 3, 67}
array2 = {-31, 7, 47}
array3 = {-1, 2, 10}
array4 = {14, 15, 66}

For array1[0] (ie. 1), the number closest to it is in array3 and its -1 as mod(-1) = 1 
```

**步骤 2** 然后在剩下的 2 个数组中，找到一对彼此更接近的数字。（再次考虑模数）

```
eg . 
array2 = {-31, 7, 47}
array4 = {14, 15, 66}

Closest elements are 7 and 14 with -7 + 14 = 7. 
```

最终你从所有 4 个数组中得到 min(a1[k] +-a2[j]+-a3[m]+-a4[t]) 。

# wpf - WPF TextBlock StringFormat 绑定到父级

> ID：10005930
> 
> 赞同：1
> 
> 时间：2012-04-04T06:26:25.330
> 
> 标签：wpf

我一直在尝试将 TextBlock 的 Text 属性的 StringFormat 绑定到模板化父级。

这是我尝试设置 StringFormat 的地方：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:DataFlowControls">

    <Style TargetType="{x:Type local:DfcEditTextBox}">
        <Setter Property="Margin" Value="-6, 0, -6, 0" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:DfcEditTextBox}">
                    <TextBlock x:Name="PART_TextBlock"
                               Padding="2, 0, 0, 0"
                               Text="{Binding Path=Value, StringFormat=ThisStringFormat, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                    </TextBlock>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary> 
```

这是父母：

```
<Window x:Class="DataFlowControls.Show.DfcListView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dfc="clr-namespace:DataFlowControls;assembly=DataFlowControls"
        xmlns:local="clr-namespace:DataFlowControls.Show"
        Title="DfcListView" Height="400" Width="500">
    <Grid>
        <StackPanel>
            <dfc:DfcListView Name="lvTradesCollection" ItemsSource="{Binding Path=TradesCollection}" KeyboardNavigation.DirectionalNavigation="Continue" >
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.Resources>
                    <DataTemplate x:Key="Date_DataTemplate">
                        <dfc:DfcEditTextBox Value="{Binding Path=Date, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" ThisStringFormat='{}{0:dd/MM/yyyy}' HorizontalContentAlignment="Left" IsEditable="true" />
                    </DataTemplate>
                    <DataTemplate x:Key="Asset_DataTemplate">
                        <dfc:DfcEditTextBox Value="{Binding Path=Asset, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Left" IsEditable="true" />
                    </DataTemplate>
                    <DataTemplate x:Key="Lots_DataTemplate">
                        <dfc:DfcEditTextBox Value="{Binding Path=Lots, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" ThisStringFormat='N2' HorizontalContentAlignment="Center" IsEditable="true" />
                    </DataTemplate>
                    <DataTemplate x:Key="Price_DataTemplate">
                        <dfc:DfcEditTextBox Value="{Binding Path=Price, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Center" IsEditable="true" />
                    </DataTemplate>
                    <DataTemplate x:Key="IsCheap_DataTemplate">
                        <dfc:DfcEditCheckBox Value="{Binding Path=IsCheap, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center" IsEditable="true" />
                    </DataTemplate>
                    <DataTemplate x:Key="NextTrade_DataTemplate">
                        <dfc:DfcEditComboBox Value="{Binding Path=NextTrade, Mode=Twoway, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{x:Static local:DfcListView.NextTradeTypes}" IsEditable="true" />
                    </DataTemplate>
                </ListView.Resources>
                <ListView.View>
                    <dfc:DfcGridView>
                        <dfc:DfcGridViewColumn Header="Date" Width="140" CellTemplate="{StaticResource Date_DataTemplate}" />
                        <dfc:DfcGridViewColumn Header="Asset" Width="40" CellTemplate="{StaticResource Asset_DataTemplate}" />
                        <dfc:DfcGridViewColumn Header="Lots" Width="40" CellTemplate="{StaticResource Lots_DataTemplate}" />
                        <dfc:DfcGridViewColumn Header="Price" Width="50" CellTemplate="{StaticResource Price_DataTemplate}" />
                        <dfc:DfcGridViewColumn Header="IsCheap" Width="60" CellTemplate="{StaticResource IsCheap_DataTemplate}" />
                        <dfc:DfcGridViewColumn Header="NextTrade" Width="80" CellTemplate="{StaticResource NextTrade_DataTemplate}" />                                                                         
                    </dfc:DfcGridView>
                </ListView.View>
            </dfc:DfcListView>
            <Button Content="Add Row" HorizontalAlignment="Left" Margin="5,5,5,5" Click="AddRow_Click"/>
            <Button Content="Update Row" HorizontalAlignment="Left" Margin="5,5,5,5" Click="UpdateRow_Click"/>
        </StackPanel>
    </Grid>
</Window> 
```

一切正常，直到我包含 StringFormat=ThisStringFormat，它搞砸了。但我不知何故需要将 StringFormat 连接到父级中表示的 ThisStringFormat 属性。我已经尝试更改 StringFormat=ThisStringFormat 以尝试访问模板化父级，但无济于事。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:17:35.250

该`StringFormat`属性只是一个常规属性`BindingBase`，常规属性不能成为绑定目标，只有依赖属性可以。所以答案是：你不能那样做。

一些可能的方法：

1.  子类`TextBox`化并添加一个字符串格式的依赖属性，您可以绑定到该属性以提供所需的功能
2.  使用 FormattedValue 属性（可能有点难看）增强您的视图模型（如果有的话）
3.  使用 a[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)作为`Text`属性。一个绑定到模板化父级`Value`，一个绑定到`ThisStringFormat`模板化父级。然后编写一个转换器实现[`IMultiValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)以返回格式化的值。

# c# - 使用 C# 显示/隐藏 .asp 控制器

> ID：10005931
> 
> 赞同：1
> 
> 时间：2012-04-04T06:26:43.470
> 
> 标签：c#, .net

在我正在关注的在线教程中，我接到了一项我无法理解的任务。任务是在 LINQ 中进行设置（完成），制作 .asp 控制器（完成）并以编程方式进行设置显示/隐藏 .asp 控制器的内容。所以我的问题是，如何使用 C# 使控制器显示/隐藏？我在设置 LINQ 和 C# 的启动方面得到了一些帮助，如图所示，但我不确定如何完成它。任何帮助表示赞赏。

我是自我思考的，大约 2 周前开始编程，所以你必须原谅我有任何明显的答案。

谢谢

源代码：

```
private bool isShowNyhetsMail()
    {
        bool value;
        return (!bool.TryParse(App.Setup.GetSettingValue(CategoryName.Edm, SettingName.ShowNyhetsMail), out value)) ? true : value;

        CheckBox_Nyheter.Visible = isShowNyhetsMail();
    } 
```

.asp 控制器

```
<mc:McCheckBox ID="CheckBox_Nyheter" runat="server" TabIndex="25" Text="<%$ Resources:CUSTOMER_REGISTRATION, Check_NewsOffers %>" ResourceObject="CUSTOMER_REGISTRATION" ResourceName="Check_NewsOffers" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:19:21.557

线

```
CheckBox_Nyheter.Visible = isShowNyhetsMail(); 
```

不会被执行，因为在那之前有一个 return 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:38:08.280

语句后面的`return`语句不会被执行。在之前使用该特定语句`return`。

# iphone - 在目标 C 编程中将带引号的字符串设置为标签？

> ID：10005933
> 
> 赞同：0
> 
> 时间：2012-04-04T06:26:53.970
> 
> 标签：iphone

trackLbl2.text = @""不间断的宝莱坞音乐"";

我试试这个但不工作。如何用双引号发短信。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:27:57.710

尝试这个：

```
 trackLbl2.text = @"\"Nonstop Bollywood Music\""; 
```

您必须 `\`在任何特殊字符之前放置才能打印出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:35:09.787

我之前的用户提供了一个很好的答案，但我想详细说明你的问题。知道这是件好事。

在大多数（全部？）编程语言中，某些字符通常具有特殊功能——单引号、双引号、反斜杠等。如果您想在字符串中包含这些内容，通常的做法是“转义”它们，或使用转义字符。转义字符是特殊的字符组合，可以替换为您希望在字符串中看到的实际字符；它们通常以正斜杠 (\)* 开头。

以下是 Objective C 中使用的常见转义字符列表（来源：[维基百科](http://www.techotopia.com/index.php/Objective-C_2.0_Data_Types#Special_Characters.2FEscape_Sequences)）
\a - 声音警报
\b - 退格
\f - 换页
\n - 换行
\r - 回车
\t - 水平制表符
\v - 垂直tab
\ - 反斜杠
\" - 双引号（将双引号放入字符串声明时使用）
\' - 单引号（将双引号放入字符串声明时使用）

**有趣的事实**：我实际上必须通过键入“\\”来逃避那里的正斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T14:38:51.610

尝试这个

```
trackLbl2.text = @"\"Nonstop Bollywood Music\""; 
```

您必须将 \ 放在任何特殊字符之前才能打印出来。

# browser - 浏览器中的 url 自动填充

> ID：10005938
> 
> 赞同：1
> 
> 时间：2012-04-04T06:27:19.627
> 
> 标签：browser, autofill

在chrome和mozilla等浏览器中，当我们输入“F”时，它会自动将url填充为“facebook.com”，它是如何工作的，这个概念是什么，我想学习这个，谁能帮助我在这里提出一些链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:30:28.317

更有效的解决方案是使用[前缀树（a trie）](http://en.wikipedia.org/wiki/Trie)来存储单词的前缀。这也是拼写检查系统（例如 MS Word 中的系统等）通常的工作方式。

# json - 如何在 Express 应用程序中使用 JSON POST 数据

> ID：10005939
> 
> 赞同：361
> 
> 时间：2012-04-04T06:27:34.603
> 
> 标签：json, node.js, express

我将以下 JSON 字符串发送到我的服务器。

```
(
        {
        id = 1;
        name = foo;
    },
        {
        id = 2;
        name = bar;
    }
) 
```

在服务器上我有这个。

```
app.post('/', function(request, response) {

    console.log("Got response: " + response.statusCode);

    response.on('data', function(chunk) {
        queryResponse+=chunk;
        console.log('data');
    });

    response.on('end', function(){
        console.log('end');
    });
}); 
```

当我发送字符串时，它显示我收到了 200 响应，但其他两种方法从未运行。这是为什么？

* * *

## 回答 #1

> 赞同：624
> 
> 时间：2012-04-04T08:33:16.283

我认为您将`response`对象的使用与`request`.

该`response`对象用于将 HTTP 响应发送回调用客户端，而您想要访问`request`. 请参阅此[答案](https://stackoverflow.com/a/4696338/112196)，它提供了一些指导。

如果您使用的是有效的 JSON 并使用 POST `Content-Type: application/json`，那么您可以使用[`bodyParser`](https://github.com/expressjs/body-parser)中间件来解析请求正文并将结果放入`request.body`您的路由中。

**Express 4.16+ 的更新**

从 4.16.0 版开始，可以使用新的[`express.json()`](http://expressjs.com/en/4x/api.html#express.json)中间件。

```
var express = require('express');

var app = express();

app.use(express.json());

app.post('/', function(request, response){
  console.log(request.body);      // your JSON
   response.send(request.body);    // echo the result back
});

app.listen(3000); 
```

**为 Express 4.0 - 4.15 更新**

正文解析器在 v4 之后被拆分成自己的 npm 包，需要单独安装`npm install body-parser`

```
var express = require('express')
  , bodyParser = require('body-parser');

var app = express();

app.use(bodyParser.json());

app.post('/', function(request, response){
  console.log(request.body);      // your JSON
   response.send(request.body);    // echo the result back
});

app.listen(3000); 
```

**对于 Express 的早期版本 (< 4)**

```
var express = require('express')
  , app = express.createServer();

app.use(express.bodyParser());

app.post('/', function(request, response){
  console.log(request.body);      // your JSON
  response.send(request.body);    // echo the result back
});

app.listen(3000); 
```

沿着以下路线进行测试：

```
$ curl -d '{"MyKey":"My Value"}' -H "Content-Type: application/json" http://127.0.0.1:3000/
{"MyKey":"My Value"} 
```

* * *

## 回答 #2

> 赞同：220
> 
> 时间：2014-07-08T15:05:25.977

对于 Express v4+

从 npm 安装 body-parser。

```
$ npm install body-parser 
```

[https://www.npmjs.org/package/body-parser#installation](https://www.npmjs.org/package/body-parser#installation)

```
var express    = require('express')
var bodyParser = require('body-parser')

var app = express()

// parse application/json
app.use(bodyParser.json())

app.use(function (req, res, next) {
  console.log(req.body) // populated!
  next()
}) 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2019-01-10T03:10:50.720

对于那些得到一个空对象的人`req.body`

我忘了 `headers: {"Content-Type": "application/json"}` 在请求中设置。改变它解决了这个问题。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-04-17T10:18:01.200

@Daniel Thompson 提到他忘记在 request 中添加 {"Content-Type": "application/json" **}**。他能够更改请求，但是，更改请求并不总是可能的（我们正在这里的服务器上工作）。

就我而言，我需要强制将 content-type: text/plain 解析为 json。

如果您无法更改请求的内容类型，请尝试使用以下代码：

```
app.use(express.json({type: '*/*'})); 
```

而不是全局使用 express.json() ，我更喜欢只在需要的地方应用它，例如在 POST 请求中：

```
app.post('/mypost', express.json({type: '*/*'}), (req, res) => {
  // echo json
  res.json(req.body);
}); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-07-21T03:29:17.870

有时您不需要第三方库来解析文本中的 JSON。有时你只需要下面的 JS 命令，先试试吧：

```
 const res_data = JSON.parse(body); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-03-26T19:18:38.583

```
const express = require('express');
let app = express();
app.use(express.json());
```

这个 app.use(express.json) 现在可以让你读取传入的 JSON 对象

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-25T16:19:51.737

初学者的错误...我`app.use(express.json());`在**本地模块**而不是**主文件**（入口点）中使用。

# c# - 使用搜索文本功能在 Web 上显示 pdf 文件

> ID：10005940
> 
> 赞同：0
> 
> 时间：2012-04-04T06:27:35.743
> 
> 标签：c#, asp.net, .net

谁能告诉，如何使用搜索文本功能在网络上显示 pdf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:06:27.813

如果你的意思是在 pdf 文件中搜索，你可以这样做：

*   下载此 dll Interop.Cisso.DLL，然后将其添加为参考
*   创建您的目录（您应该在索引服务中定义一个目录以在其中搜索）它是通过这种方式完成的：http: [//support.microsoft.com/kb/308202](http://support.microsoft.com/kb/308202)
*   最后，这是您进行搜索的代码：

    ```
     DataSet ds = new DataSet("IndexServerResults");
        CissoQueryClass q = new CissoQueryClass();
        CissoUtilClass util = new CissoUtilClass();

        OleDbDataAdapter da = new OleDbDataAdapter();

    string query = "";
    if (lstSearchIntegration.SelectedValue == "-1") {
        query = "@all Contains " + txtKeywordOne.Text + " and not #filename *.log";
    } else {
        string operation = "";
        if (lstSearchIntegration.SelectedValue.ToLower == "and") {
            operation = "and";
        } else {
            operation = "or";
        }
        query = "@all Contains " + txtKeywordOne.Text + " " + operation + " " + txtKeywordTwo.Text;

     }

    switch (lstDocType.SelectedValue) {
        case "doc":
            query += " and #filename *.doc";
            break;
        case "pdf":
            query += " and #filename *.pdf";
            break;
        case "ppt":
            query += " and #filename *.ppt";
            break;
        case "pps":
            query += " and #filename *.pps";
            break;
    }

    q.Query = query;
    q.Catalog = "YourCatalogName";
    q.SortBy = "rank[d]";
    q.Columns = "DocAppName,rank, path, size, FileName,VPath, Create";

    q.MaxRecords = 1000;
        util.AddScopeToQuery(q, "YourFolder", "deep");
    object obj = q.CreateRecordset("nonsequential");
    da.Fill(ds, obj, "IndexServerResults");
    DataTable mydt = new DataTable();
    mydt = ds.Tables[0]; 
    ```

请注意：

1.  我正在使用和/或操作进行更智能的搜索
2.  我在 doc、pdf、ppt 和 pps 中搜索
3.  我正在从搜索中排除日志文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:00:05.993

我可以推荐[Aspose.PDF](http://www.aspose.com/categories/.net-components/aspose.pdf-for-.net/default.aspx)但它要花钱

# jquery - 无法在 ie9 中通过 jquery 检查复选框输入

> ID：10005946
> 
> 赞同：4
> 
> 时间：2012-04-04T06:27:55.867
> 
> 标签：jquery, internet-explorer-9

我不知道为什么这不起作用，但我尝试了以下方法：

```
$('#elemid').prop('checked', true);
$('#elemid').attr('checked', true);
$('#elemid').attr('checked', 'checked'); 
```

IE9 绝对拒绝在代码运行时实际选中该框。由于console.log，我知道代码正在运行。

但是没有选中的元素。

此代码在 FF 和 Chrome 中完美运行。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:53:52.577

好吧，我的问题非常愚蠢......

我有一个浮动标签内的每个复选框。为什么我为此使用标签超出了我的范围，但标签也注册了一个点击，在我的代码“选中”该框后立即取消选中该框。

我能够通过将输入的标签字段移到外面来解决这个问题（它们是显示：无论如何都没有）

重点是一个带有徽标而不是复选框的精美复选框系统。当单击以显示活动选择等时，标签的背景会发生变化。

谢谢你们的帮助。

# c# - 什么是表达式树，如何使用它们，为什么要使用它们？

> ID：10005948
> 
> 赞同：69
> 
> 时间：2012-04-04T06:28:03.450
> 
> 标签：c#, .net, linq, expression-trees

我刚刚遇到了我多次听到的表达式树的概念。我只想了解表达式树的含义及其用途。

如果有人也可以指导我进行简单的解释和使用示例，我会很高兴。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-04T06:31:45.857

表达式树是包含表达式的数据结构，表达式基本上是代码。所以它是一个树形结构，代表您可以在代码中进行的计算。然后可以通过在一组数据上“运行”表达式树来执行这些代码。

表达式树的一大优点是您可以在代码中构建它们；*也就是说，您在 code*中构建可执行代码（或一系列步骤）。您还可以在执行代码之前通过将表达式替换为其他表达式来修改代码。

表达式是一个函数委托，例如`(int x => return x * x)`.

另请参阅[http://blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx](http://blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx)

# android - 带有 Listview 的 Android Activity 不断抛出 NullPointerException

> ID：10005949
> 
> 赞同：0
> 
> 时间：2012-04-04T06:28:11.257
> 
> 标签：android, android-listview, nullpointerexception

我正在尝试创建一个 ListView，每行显示 2 个 TextView。

但是，我在打开 Activity 时不断收到 NullPointerException，但我不知道为什么（logCat 日志没有告诉我到底是哪一行造成了问题）。

以下是相关代码：

**主类EventViewActivity**

```
public class EventViewActivity extends ListActivity {
public String[] eventTitles;

@Override
public void onCreate(Bundle savedInstanceState) {
    //Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    //Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.eventview_layout);

    eventTitles = new String[]{                 
            getResources().getString(R.string.eventtitle1),
            getResources().getString(R.string.eventtitle2),
            getResources().getString(R.string.eventtitle3),
            getResources().getString(R.string.eventtitle4),
            getResources().getString(R.string.eventtitle5)
    };

    setListAdapter(new ArrayAdapter<String>(this, R.layout.eventview_layout, R.id.row_title, eventTitles));
    setListAdapter(new ArrayAdapter<String>(this, R.layout.eventview_layout, R.id.row_descr, eventTitles));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Toast.makeText(getApplicationContext(), "You have clicked an item", Toast.LENGTH_SHORT).show();
}
} 
```

layout.xml 是：

```
 <LinearLayout xmlns:android="schemas.android.com/apk/res/android"
       android:layout_width="fill_parent" android:layout_height="wrap_content"
       android:orientation="vertical" >
       <ListView android:id="@+id/android:eventlist" android:layout_width="fill_parent"
        android:layout_height="fill_parent"
       android:background="@drawable/eventview_background"/>
</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:22:48.690

你应该调用：

```
super.onCreate(); 
```

第一的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:54:02.727

我认为您接近 ListView 的方式不正确。

请查看此示例[链接](http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom)以完整了解如何使用自定义适配器创建 ListView。

上面的链接有使用 listview 创建的示例应用程序，每个 listitem 都有两个文本字段作为您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:32:23.160

你`eventview_layout`有一个 ID 为`android:id="@android:id/list"`.. 的 ListView 吗？如果不添加它..我认为它没有完成

一个小修正。。

```
 <LinearLayout xmlns:android="schemas.android.com/apk/res/android"; android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:orientation="vertical" > 
    <ListView android:id="@android:id/list"
 android:layout_width="fill_parent" 
android:layout_height="fill_parent"
 android:background="@drawable/eventview_background"/>
 </LinearLayout> 
```

ListACtivity 的 contentView 有一个具有完全相同 ID 的 listView 是必要的。

# java - 日志方法之间的区别

> ID：10005950
> 
> 赞同：6
> 
> 时间：2012-04-04T06:28:11.560
> 
> 标签：java, android

我是 android 新手，我使用以下方法打印 log-cat：

```
Log.w("Tag", "String text"); 
```

并记录文本打印，但在搜索了一段时间后，我找到了更多打印 logcat 的方法，例如：

```
Log.v() 
Log.d() 
```

现在我对这些方法感到困惑。

哪个是打印 log-cat 的最佳方法，打印 lagcat 的方法如何，它们之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T06:36:42.497

常用的`Log`方法有五种：

`Log.v ()` **详细**

`Log.d ()` **调试**

`Log.i ()` **信息**

`Log.w ()` **警告**

`Log.e ()` **错误**

**1：** `Log.v` -调试***颜色为黑色***，任何消息都会输出，其中v代表verbose详细的意思，通常是Log.v("", "")；

**2：** `Log.d` - 输出***颜色为蓝色***，仅输出debug调试意义，但他会输出上层过滤通过DDMS Logcat标签选择。

**3：** `Log.i` -输出***颜色为绿色***，一般提示，新闻信息，不输出Log.v Log.d信息，但会显示i,w,e的信息

**4：** `Log.w` -表示***橙色***，可以看成是一个warning的warning，一般我们需要优化Android代码，在Log.e之后会输出。

**5:** `Log.e` - 是***红色***的，你可以想到error error这里只是为了显示红色的错误信息，这些错误我们需要仔细分析。

了解更多信息：

[http://developer.android.com/guide/developing/debugging/debugging-log.html](http://developer.android.com/guide/developing/debugging/debugging-log.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T06:30:51.320

各种单字母方法指示日志消息的*严重性*。随后，您可以根据标签和严重性过滤日志消息，并防止在您发布的应用程序中显示较低严重性的消息（例如）。

了解更多信息：

[http://developer.android.com/guide/developing/debugging/debugging-log.html](http://developer.android.com/guide/developing/debugging/debugging-log.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:36:00.043

严重程度不同；

```
Log.e() will simply log an error to the log with priority ERROR. 
```

一般来说，使用`Log.v() Log.d() Log.i() Log.w() and Log.e()`方法。

就详细程度而言，从最少到最多的顺序是`ERROR, WARN, INFO, DEBUG, VERBOSE. Verbose should never be compiled into an application except during development. Debug logs are compiled in but stripped at runtime. Error, warning and info logs are always kept.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T09:29:38.440

```
int ASSERT Priority constant for the println method.
int DEBUG Priority constant for the println method; use Log.d.
int ERROR Priority constant for the println method; use Log.e.
int INFO Priority constant for the println method; use Log.i.
int VERBOSE Priority constant for the println method; use Log.v.
int WARN Priority constant for the println method; use Log.w. 
```

# visual-studio-2010 - VS 2010 报告服务分组

> ID：10005951
> 
> 赞同：1
> 
> 时间：2012-04-04T06:28:20.070
> 
> 标签：visual-studio-2010, sql-server-2008, reporting-services, grouping

我想将组列表以及数据加载到两个单独的数据表中（或一个，但我认为这不可能）。然后我想像这样应用分组：

团体

```
A
B
Bar
C
Car 
```

数据

```
Ale
Beer
Bartender
Barry
Coal
Calm
Carbon 
```

分组后的最终结果应该是这样的。

```
*A
  Ale
*B
  *Bar
    Bartender
    Barry
  Beer
*C
  Calm
  *Car
    Carbon
  Coal 
```

我只有一个分组列表，没有级别或其他任何内容。属于特定组的项目是以与组名称相同的字母开头的项目。缩进不是必须的。希望我的示例阐明了我的需要，但无法命名，因此我无法在谷歌上找到类似的东西。

这里的关键是：

```
1\. Grouping by a provided list of groups
2\. There can be unlimited layers of grouping 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:28:27.843

Since every record has it's children, the query should also take a father for each record. Then there is a nice trick in advanced grouping tab. Choosing a father's column yields as many higher level groups as needed recursively. I learnt about that in [http://blogs.microsoft.co.il/blogs/barbaro/archive/2008/12/01/creating-sum-for-a-group-with-recursion-in-ssrs.aspx](http://blogs.microsoft.co.il/blogs/barbaro/archive/2008/12/01/creating-sum-for-a-group-with-recursion-in-ssrs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:23:54.710

我建议从这样的查询中报告：

```
select gtop.category top_category,
       gsub.category sub_category,
       dtab.category data_category
from groupTable gtop
join groupTable gsub on gsub.category like gtop.category + '%'
left join dataTable dtab on dtab.category like gsub.category + '%'
where len(gtop.category) = 1 and
      not exists
      (select null 
       from groupTable gchk
       where gsub.category = gtop.category and
             gchk.category like gsub.category + '%' and
             gchk.category <> gsub.category and
             dtab.category like gchk.category + '%') 
```

- 在 top_category 和 sub_category 上有报告组，以及两个组的标题。当 sub_category = top_category 时，您可能希望隐藏 sub_category 标题行。

# java - java尝试在通知中变异

> ID：10005954
> 
> 赞同：3
> 
> 时间：2012-04-04T06:28:31.410
> 
> 标签：java, swing

我有两个摆动 ui 表单和一个他们都在看的模块。
每个 ui 都在为属性的更改添加一个侦听器，并在发生更改时更新自己的文本字段。

basiccaly - 他们都应该更新模块并从中更新。有没有一种简单的方法可以在没有绑定框架的情况下做到这一点

这是我的做法（但我不断尝试在通知中变异） -

关于我的 textField 的更新

```
 myTextField.getDocument().addDocumentListener(new TFDocumentListener() {
            protected void userChangedTF() {
                Float value = myTextField.getValue();
                if (value != null) {
                    myObj.setMyAttribute(value);
                }
            }
        }); 
```

仍在用户界面中 - 注册更改

```
 myObj.addMyAttributeChangedListener(new ValueChangeListener<Float>() {
            @Override public void valueChanged(Float value) {
                if (!myTextField.isFocusOwner()) {
                    myTextField.setValueIn(value);
                }
            }
        }); 
```

在模块中 - 当 setMyAttribute 发生时 - 它调用此函数

```
private void notifyIntervalChanged(float newValue) {
    for (ValueChangeListener valueChangeListener : intervalChangedListenersList) {
        valueChangeListener.valueChanged(newValue);
    }
} 
```

我宣布

```
public interface ValueChangeListener<T> {
     void valueChanged(T Value)
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T06:49:35.250

如果您需要`JTextComponent`在侦听器中更改相同的内容，请将更改（例如 setText()）包装在`SwingUtilities.invokeLater()`

# android - 有条件的停止计时器

> ID：10005959
> 
> 赞同：2
> 
> 时间：2012-04-04T06:29:16.453
> 
> 标签：android

现在我正在开发一个 Android 应用程序。在我的应用程序中，我必须使用 Chronometer 来显示计时器。我使用以下代码启动计时器。

```
chrono.setBase(SystemClock.elapsedRealtime());
        chrono.start(); 
```

现在我想在特定时间超过时调用停止方法。请朋友帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T05:02:56.660

试试这个。它对我有用。设置 chrono.setOnChronometerTickListener 并在其中设置一个条件，您可以从计时器中获取时间作为文本，然后做任何您想做的事情。

```
chrono.setOnChronometerTickListener(new OnChronometerTickListener() {

    @Override
    public void onChronometerTick(Chronometer chronometer) {
        // TODO Auto-generated method stub
        String currentTime= chrono.getText().toString();
    if(currentTime.equals("03:00")) //put time according to you
    {
      chrono.stop();
     }
    }
}); 
```

每次计时器增加时都会调用 OnChronometerTickListener 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:40:55.440

像这样检查：

```
if(currentTime.equals("3:00")){
    chrono.stop();
} 
```

在这种情况下，您有自己的时间线限制，例如 i 与 String "3:00" 相比，您可以根据自己的要求设置条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:56:45.867

`if (condition)`是你的朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:43:39.197

试试这样。。

在启动计时器之前保存初始时间..

```
starttime = SystemClock.elapsedRealtime();
chrono.setBase(SystemClock.elapsedRealtime());
    chrono.start();

 timeelapsed = SystemClock.elapsedRealtime();
if(timeelapsed-starttime<5000){timeelapsed = SystemClock.elapsedRealtime();}
  chrono.stop(); 
```

# php - 会话到期后使用帖子重定向

> ID：10005960
> 
> 赞同：3
> 
> 时间：2012-04-04T06:29:16.637
> 
> 标签：php, forms, http, post, redirect

我有这样一种处理过期会话的机制：

```
User logged in
Session expires
User goes to link
User redirected to login page
User logs in
User redirected to requested link 
```

我想要实现的是与表单具有相同的功能，例如：

```
User logged in
User starts to fill out a form
Session expires
User submits a form
User redirected to login page
User logs in
Form posted on behalf of user (aka redirect with post) 
```

但截至目前，它的工作原理是这样的：

```
User logged in
User starts to fill out a form
Session expires
User submits a form
User redirected to login page
User logs in
User redirected to form page with all fields empty
User sad 
```

我尝试使用 http_redirect 来实现它，但事实证明它只是将参数添加到 URL。问题是，服务器端不接受 GET，只接受 POST。我一直在尝试其他方法来做到这一点，比如自动保存功能、javascript 发布和重定向等。

一定有人以前遇到过这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:45:03.987

我认为有几种方法

1）将`session.gc_maxlifetime`值增加到更高（1天或更多）。如果使用自己的会话，则相同的逻辑。

2）使会话永不过期，除非用户注销

3）当用户提交POST并且会话到期时，将表单数据存储到会话本身，并在重定向后从会话中获取数据。或者重定向后使用get方法

4) 使用 ajax (ping) 持续检查会话。例如每 60 秒。除非浏览器没有关闭，否则会话永远不会过期（对我来说是最好的解决方案）

5）从提交使用ajax，如果会话过期弹出一个对话框重新登录

当然可能还有其他选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:51:20.380

你可以去以下：

```
User logged in
User starts to fill out a form
Session expires

User submits a form
Server sees session has expired
Server creates new session
Server stores post in session variable $_SESSION['post'] = $_POST
User redirected to login page

User logs in
Server verifies user etc
Server checks for data in $_SESSION['post']
Server sets $_POST = $_SESSION['post']
Form posted on behalf of user 
```

# html - ActionScript 2、htmlText、img-tag 和 center-tag

> ID：10005964
> 
> 赞同：0
> 
> 时间：2012-04-04T06:29:30.653
> 
> 标签：html, flash, actionscript, actionscript-2

我正在尝试将图像输出到 Flash ActionScript 2 动态文本框中。这可以通过放入`<img ... />`htmlText-code 来实现。但是我不能将图像居中在带有`<center>`...`</center>`标签的线上。

任何人都可以帮助我完成以下任务：

文字 文字 文字 文字 文字 文字

```
 IMG 
```

文字 文字 文字 文字 文字 文字

在 ActionScript 2 的 htmlText 字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:28:28.210

使用 div 的 id 包装器尝试此代码

```
<?xml version="1.0" encoding="utf-8"?>
<about title="Blog">
<title>
    <![CDATA[]]>
</title>
<thumb></thumb>
<text>
<div id="wrapper" style="width: 500px;">
<p>04/19-2012 - Test with images...</p>
<p>This image is not centered, as it should be...</p>
<p>
    <center>
        <img src="/uploads/dmbtest.gif" alt="" width="210" height="100" />
    </center>
</p>
<p>This is text after the image, which should be placed just below the image and not next to it :(</p>
<p>##################################################</p>
</div>
</text><optionalText><![CDATA[]]></optionalText></about> 
```

它工作正常

# sql-server-2005 - sql2005 中的“帐户已禁用”

> ID：10005969
> 
> 赞同：0
> 
> 时间：2012-04-04T06:29:55.017
> 
> 标签：sql-server-2005, visual-studio-2008

![在此处输入图像描述](../Images/94a31dff39de4da63fab56dbedae5f13.png)当我通过 vs 2008 创建数据库时，它会显示“帐户已禁用”。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:32:46.077

您尝试连接的帐户当前已禁用登录。

[使用链接http://sudeeptaganguly.wordpress.com/2010/04/20/how-to-enable-sa-account-in-sql-server/](http://sudeeptaganguly.wordpress.com/2010/04/20/how-to-enable-sa-account-in-sql-server/)中提到的步骤

# android - 在windows中为eclipse复制一个Android项目

> ID：10005973
> 
> 赞同：1
> 
> 时间：2012-04-04T06:30:20.600
> 
> 标签：android, eclipse, copy, project

我想在 Windows 中制作一个小程序来复制一个 android 项目以在 eclipse 中使用它。我知道 Eclipse 中有一个选项（新项目-> Android 项目-> 从现有源创建项目），但我想自动化这一步（在 Java 中以编程方式进行）。是否有任何命令、脚本等可以这样做？我尝试复制项目文件夹，重命名新项目文件中的每个引用并使用 ZIP 将新项目导入 Eclipse，但它似乎不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:11:25.463

尝试使用[Android Library Project](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)也可能满足您的要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:58:00.967

究竟是什么问题？此外，如果您在多台机器上工作，请帮自己一个忙，并使用某种版本控制（SVN、Git 等），这将使跨机器提交/签出文件变得容易。

# magento - 如何显示Best Sellers动态特定类别？

> ID：10005975
> 
> 赞同：0
> 
> 时间：2012-04-04T06:30:29.467
> 
> 标签：magento, magento-1.4, magento-1.5

如何在 magento 1.6.2.0 中显示畅销书动态和特定类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:32:13.167

要显示畅销书，您可以从资源模型报告中加载产品集合，如下所示

```
$products = Mage::getResourceModel('reports/product_collection')
            ->addOrderedQty()
            ->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description', 'description')) //edit to suit tastes
            ->setStoreId($storeId)
            ->addStoreFilter($storeId)
            ->setOrder('ordered_qty', 'desc'); //best sellers on top 
```

并加载它们的类别明智，你可以得到当前的类别或通过硬编码。只需要过滤该类别中的产品。

# c++ - 如何使用 cmake 设置 GDB 调试标志？

> ID：10005982
> 
> 赞同：44
> 
> 时间：2012-04-04T06:30:51.223
> 
> 标签：c++, cmake

我尝试使用设置调试标志

```
set 
```

命令，`cmake`但我不确定要添加什么。有人告诉我，`DEBUG=true`但到目前为止，我找不到要设置的正确标志。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-04T06:37:27.530

如果要在编译时构建用于调试（包括源信息，即-g），请使用

```
cmake -DCMAKE_BUILD_TYPE=Debug <path> 
```

如果要构建发布版本，可以使用

```
cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo <path> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-27T07:18:01.110

或者，您可以使用 CMAKE GUI 进行此更改。对`ccmake`项目进行操作将产生与此类似的屏幕：

[![在此处输入图像描述](../Images/055f81173c79aae2a121a03a2c0e35e6.png)](https://i.stack.imgur.com/prO8d.png)

在该字段中输入*Debug*`CMAKE_BUILD_TYPE`将允许您使用调试标志进行构建。

# java - 在 Web 应用程序中从 mysql 数据库中删除一行

> ID：10005984
> 
> 赞同：0
> 
> 时间：2012-04-04T06:31:01.193
> 
> 标签：java, mysql, servlets

请建议我从包含三列问题ID、问题和解决方案的mysql数据库中删除一行的代码。我想从浏览器中删除它，即它是一个 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:39:34.457

您可以考虑使用[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html)（Java 数据库连接）API 来解决您的问题。我建议您仔细查看以下有关使用 MySQL 数据库开发 Java Web 应用程序的简单教程。

[https://blogs.oracle.com/JavaFundamentals/entry/creating_a_simple_web_application](https://blogs.oracle.com/JavaFundamentals/entry/creating_a_simple_web_application)

[http://www.javaguicodexample.com/javawebmysqljspjstljsf5.html](http://www.javaguicodexample.com/javawebmysqljspjstljsf5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:37:14.243

这是一个示例 Servlet。

但请记住，这只是为了向您展示如何做，您**不应该**在生产系统中使用它！这更多是为了演示，看看它是如何做的并学习如何做。这个 servlet 应该可以正常运行，但是您必须做一些事情！

无论如何，如果您还没有阅读这些文件，您应该阅读这些文件

[http://docs.oracle.com/javaee/5/tutorial/doc/bnadp.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnadp.html)

[http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)

**我写这篇文章时没有考虑到的事情：**

**请求参数**

如果找不到请求参数之一，则会抛出异常。您需要一种更好的方法来处理这种情况。

**连接池**

此示例将在每个请求上打开与数据库的连接。打开连接需要时间。因此每个人都使用连接池。此库/服务器打开指定数量的数据库连接。每次您需要访问数据库时，您都会从该池中获取它，如果您完成了，请将其返回到池中。

**安全**

知道这个 servlet 地址的人可以轻松地使用它来删除表中的任何行。这是你的工作来保护它。

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;

    /**
     * DON'T USE IN PRODUCTION, JUST FOR LEARNING PURPOSES
    **/
public class MySqlServlet extends HttpServlet {

  public void doGet(HttpServletRequest request, HttpServletResponse response)
                               throws ServletException, IOException {

    long problemId;
    long problem;
    long solution;

    Object problemIdAsObject = request.getParameter("problemId");
    Object problemAsObject = request.getParameter("problem");
    Object solutionAsObject = request.getParameter("solution");

    if ( problemIdAsObject == null ){
        throw new ServletException("problemId has not been specified!");
    }

    if ( problemAsObject == null ){
        throw new ServletException("problem has not been specified!");
    }

    if ( solutionAsObject == null ){
        throw new ServletException("solution has not been specified!");
    }

    problemId = Long.valueOf( (String)problemIdAsObject );
    problem = Long.valueOf( (String)problemAsObject );
    solution = Long.valueOf( (String)solutionAsObject );    

    PreparedStatement statement = null;
    Connection connectionToDatabase = null;
    try{
        connectionToDatabase = getConnection();
        String sql = "DELETE FROM table WHERE problemid = ? and "+
                        "problem = ? and solution = ?";
        statement = connectionToDatabase.prepareStatement(sql);
        statement.setLong(1,problemId);
        statement.setLong(2,problem);
        statement.setLong(3,solution);
        statement.execute();
    }catch( SQLException sqle ){
        throw new ServletException(sqle);
    }catch( ClassNotFoundException cnfe ){
        throw new ServletException(cnfe);   
    }finally{
        try{
            statement.close();
            connectionToDatabase.close();
        }catch( SQLException sqle ){
            throw new ServletException(sqle);
        }
    }

    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    out.println("<HTML>");
    out.println("<BODY>");
    out.println("OK");
    out.println("</BODY></HTML>");
  }

  private Connection getConnection() 
          throws ClassNotFoundException,SQLException{

            String userName = "user";
    String password = "password";
    String databaseName = "database";
    String serverAddress = "localhost";

    String connectionString = "jdbc:mysql://"+serverAddress+"/"+databaseName+
                "?user="+userName+"&password="+password;
            //If this line is not working, use this instead:
            //Class.forName("com.mysql.jdbc.Driver").newInstance();
    Class.forName("com.mysql.jdbc.Driver");     
    Connection connection = DriverManager.getConnection(connectionString);  
    return connection;
  }

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T06:49:15.260

伙计，这很简单，首先你必须从 jsp 链接到任何 servlet。通过该链接，您必须将已删除的记录 ID 作为参数传递并在 servlet 中编写代码以从数据库中删除给定的行。然后返回您单击上一个链接的同一页面。

# php - 在 sprintf 中更改颜色

> ID：10005988
> 
> 赞同：0
> 
> 时间：2012-04-04T06:31:18.020
> 
> 标签：php, wordpress, wordpress-theming

我有这样的代码

```
 $output.='<li class="'.$rcclass.'">' . 
/* translators: comments widget: 1: comment author, 2: post link */ 
sprintf(_x('%1$s on %2$s', 'widgets'), get_comment_author_link(), '<a href="' . esc_url( get_comment_link($comment->comment_ID) ) . '">' . get_the_title($comment->comment_post_ID) . '</a>') .
 '</li>'; 
```

我希望 %1$s 的颜色与 %2$s 不同。我怎么会在这里。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:34:15.410

`<span>`用特定的类将它们包装在s 中，例如

```
<span class='comment-author'>%1$s</span> on <span class='post-link'>%2$s</span> 
```

然后调整你的 CSS 来为这些类显示不同的颜色。

# linux - 启动一个新的存储库。我只想让 Git 跟踪应用于公共工作区的更改

> ID：10005991
> 
> 赞同：0
> 
> 时间：2012-04-04T06:31:32.217
> 
> 标签：linux, git

在我们的团队中，我们正在开始开发新软件，并且我们在存储在服务器中的 tar.gz 中包含一个公共开发工作区。

我想在这个开发工作区解压的目录上启动一个新的 git 存储库。但我希望 Git 开始跟踪对新文件的更改或对这个公共开发工作区的修改。

目前我唯一能做的就是让 git 跟踪所有内容，这是我不喜欢的，因为这个工作区中有很多文件，这会使 git 变慢。：

```
workspace/$ git init
workspace/$ git add .
workspace/$ git commit -m 'First Commit'
workspace/$ git br NewSoftware
workspace/$ git co NewSoftware
workspace/$ git br -d master
workspace/$ git remote add origin user@server:/srv/git
workspace/$ git push origin master 
```

现在每个人都可以使用标准 Workspace 下载分支 NewSoftware。但我希望他们下载 tar.gz 然后下载更改。

到目前为止，我们一直在使用类似的东西，但是系统管理员不可用，所以我们对如何做有点迷茫。

# tcl - SWIG TCL：将类构造函数名称从 new_* 重命名为 create_*

> ID：10005992
> 
> 赞同：1
> 
> 时间：2012-04-04T06:31:34.773
> 
> 标签：tcl, swig

我们可以像使用 %rename 指令重命名函数一样重命名构造函数吗？

```
%rename(create_cell) Cell(string); 
```

基本上，我想最终得到类似`create_cell`而不是`new_Cell`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:04:30.380

我怀疑你不能在这一点上（你试过看看它是否有效？）但你可以做一些事情。（当然，只做其中之一。）

1.  编辑生成的代码（SWIG 编写 C++–Tcl 绑定代码，然后编译），使字符串`"new_Cell"`为`"create_cell"`. 我认为您应该能够找到更改参数的位置，例如 Tcl_CreateCommand 或 函数调用`Tcl_CreateObjCommand`，但也可能在宏中，具体取决于代码生成的完成方式。（我从来没有真正看过。）
2.  用于`load`将代码输入 Tcl，然后`rename`输入命令。名字不是一成不变的。`load` *可能*在调用的实现内部`package require`；只需执行您通常会首先使用错误名称的代码，然后执行以下操作：

    ```
    rename new_Cell create_cell 
    ```

3.  添加包装命令或过程；这些中的任何一个都可以：

    ```
    proc create_cell args {
        eval new_Cell $args
    } 
    ```

    ```
    # With 8.5 or later
    proc create_cell args {
        new_Cell {*}$args
    } 
    ```

    ```
    # With 8.6
    proc create_cell args {
        tailcall new_Cell {*}$args
    } 
    ```

    ```
    # Or do this; not a procedure, an alias
    interp alias  {} create_cell  {} new_Cell 
    ```

# c# - c# 中的 Parallel.for 不起作用

> ID：10005995
> 
> 赞同：0
> 
> 时间：2012-04-04T06:31:52.503
> 
> 标签：c#, parallel-processing

我编写了 Wpf 代码来使用随机变量生成正态分布。

```
using System.Threading.Tasks;
using System.Threading;

private void Button_Click(object sender, RoutedEventArgs e)
        {            .....

for (int t = 0; t < normalx.Count; t++)
            {
                normaly.Insert(t, (2 / ((Math.Pow(2 * Math.PI, 0.5)) * rmsnormalvalue)) * Math.Exp(-0.5 * Math.Pow(standardnormalx.ElementAt(t), 2)));
            }

...

} 
```

这是连续代码。

要作为并行线程运行，我将其更改为

```
Parallel.For(0, normalx.Count, t =>
            {
                normaly.Insert(t, (2 / ((Math.Pow(2 * Math.PI, 0.5)) * rmsnormalvalue)) * Math.Exp(-0.5 * Math.Pow(standardnormalx.ElementAt(t), 2)));
            }); 
```

但是构建没问题，但是在运行时只有一个线程区域（`normalx.Count/8`<-我的电脑是i7）

工作和计算。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:34:46.923

TPL 不保证它将使用给定数量的线程进行并行循环。可以，但是考虑到要在循环内完成的工作量并且只在单个线程上运行，它可能会确定启动额外线程的开销太大。

[http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx)

> 执行一个 for 循环，其中迭代*可以*并行运行。

（强调我的）

您*可以*通过提供自定义分区器来强制多个线程（不是强制是一个好主意），但我还没有尝试过

[http://msdn.microsoft.com/en-us/library/dd560853.aspx](http://msdn.microsoft.com/en-us/library/dd560853.aspx)

TPL 仍然可以说“很高兴您提供了自定义分区程序，但我仍将在一个线程上按顺序执行每个分区”。我不知道当前的实现在这方面的表现如何。

**更新**

重新阅读并检查 Henk 的评论，我不确定我第一次是否正确阅读了您的问题。

你是说只计算了一些法线？如果是这种情况，可能是因为支持`normaly`的任何集合都不是线程安全的。

如果是这种情况，您可以进行计算，将其分配给临时变量，然后`lock`在实际插入周围使用 a。这会造成插入集合的瓶颈，但您仍然可以获得计算的并行性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:54:15.013

几乎可以肯定，这种情况`normaly.Insert(t, ...)`不是线程安全的，也不太可能是您想要执行的操作。您要做的是提前创建一个空白数据结构，其中包含您需要的所有插槽，然后用您的并行循环填充它们。您可以这样做：

```
var temp = new double[normalx.Count];
Parallel.For(0, normalx.Count, t =>
    temp[t] = 2 / ((Math.Pow(2 * Math.PI, 0.5)) * rmsnormalvalue)) *
              Math.Exp(-0.5 * Math.Pow(standardnormalx.ElementAt(t), 2));
normaly = temp.ToList(); 
```

# java - 如何将文件从 sdcard 上传到 Android 中的 SFTP 服务器？

> ID：10005996
> 
> 赞同：2
> 
> 时间：2012-04-04T06:32:01.247
> 
> 标签：java, android, android-intent, jsch

我正在使用 JSch 库将文件从 sdcard 上传到 SFTP 服务器，但它会产生这样的错误

```
04-04 14:29:02.609: W/System.err(10706): 3: Permission denied
04-04 14:29:02.609: W/System.err(10706):    at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2289)
04-04 14:29:02.609: W/System.err(10706):    at com.jcraft.jsch.ChannelSftp._put(ChannelSftp.java:485)
04-04 14:29:02.609: W/System.err(10706):    at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:389) 
```

我的代码是

```
public class FileUploadActivity extends Activity {
/** Called when the activity is first created. */
Channel channel = null;
ChannelSftp c = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.downloadmain);

    final String host="192.***.*.**";
    final String username="*****123";
    final String password="****123";
    try {
        Session session=connectSFTP(host, username, password);
        channel = session.openChannel("sftp");
        channel.connect();
        c = (ChannelSftp) channel;
        c.cd("/home/*****11/doc");
        String inputFileName =Environment.getExternalStorageDirectory().getAbsolutePath()+"/demo/enck.pdf";
        File f = new File(inputFileName);  
        c.put(inputFileName, "/home/*****11/doc/enck.pdf");
    } catch (Exception e) {
        // TODO: handle exception
        System.err.println("Unable to connect to FTP server."
                + e.toString());
        e.printStackTrace();
    }
}
public Session connectSFTP(String host,String username,String password){
    Session session= null;
    try{
        JSch js = new JSch();
        session = js.getSession(username, host, 22);
        session.setPassword(password);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();          
    }catch (Exception e) {
        // TODO: handle exception
        Toast.makeText(getBaseContext(), "Unable to connect Your SFTP Serve"+e, Toast.LENGTH_SHORT);
    }
    return session;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:53:20.007

需要检查的明显事项：

*   您的应用程序是否有权读取 SD 卡？
*   您登录的用户是否有权写入该目的地？

从异常的位置，我推断您确实有权访问互联网，但这也值得仔细检查。

# ruby-on-rails - 如何在resque中存储Tmail对象

> ID：10005998
> 
> 赞同：0
> 
> 时间：2012-04-04T06:32:08.313
> 
> 标签：ruby-on-rails, resque

我知道我们不能将对象直接保存在 redis 队列中。我使用 Marsal.dump(tmail_object) 将其转换为字符串，同时获取我正在使用 Marshal.load(tmail_object)

但我猜这个对象正在改变。当我使用该对象发送电子邮件时，我收到空电子邮件。

将 tmail 对象存储在 redis 队列中的最佳方法是什么。我实际上是使用预定作业使用 resque 调度程序发送电子邮件。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:03:52.403

更好的方法是传递在 resque 中生成 Tmail 对象并在您的工作中生成此 Tmail 对象所需的参数。

您可以限制保存在 redis 上的数据大小，并节省时间来生成此 tmail 对象，然后再将其推送到您的 resque 作业中。