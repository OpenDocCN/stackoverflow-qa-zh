# StackOverflow 问答 11767000-11767999

# python - 使用 Python 解析带有一些 gb2312 正文文本的 utf-8 编码网页

> ID：11767001
> 
> 赞同：0
> 
> 时间：2012-08-01T20:23:01.413
> 
> 标签：python, encoding, character-encoding, web-scraping, beautifulsoup

我正在尝试使用 Python 的漂亮汤 Python 解析器解析网页，但遇到了问题。

我们从它们那里得到的 HTML 的标头声明了一个 utf-8 字符集，所以 Beautiful Soup 将整个文档编码为 utf-8，实际上 HTML 标签是用 UTF-8 编码的，所以我们得到了一个结构良好的 HTML 页面。

麻烦的是，这个愚蠢的网站将 gb2312 编码的正文文本注入到被美丽汤解析为 utf-8 的页面中。有没有办法将文本从这种“gb2312 伪装成 utf-8”状态转换为“utf-8 中字符集的正确表达”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:50:45.820

最简单的方法可能是解析页面两次，一次为 UTF-8，一次为 GB2312。然后从 GB2312 解析中提取相关部分。

我对 GB2312 了解不多，但查找它似乎至少与基本字母、数字等上的 ASCII 一致。所以你应该仍然能够使用 GB2312 解析 HTML 结构，希望能给你足够的信息以提取您需要的部分。

实际上，这可能是唯一的方法。一般来说，GB2312 编码的文本不是有效的 UTF-8，因此尝试将其解码为 UTF-8 会导致错误。BeautifulSoup 文档说：

> 在极少数情况下（通常当 UTF-8 文档包含以完全不同的编码编写的文本时），获得 Unicode 的唯一方法可能是将某些字符替换为特殊的 Unicode 字符“REPLACEMENT CHARACTER”（U+FFFD，�）。如果 Unicode，Dammit 需要这样做，它会将 UnicodeDammit 或 BeautifulSoup 对象上的 .contains_replacement_characters 属性设置为 True。

这听起来像是 BeautifulSoup 只是忽略了解码错误并用 U+FFFD 替换了错误的字符。如果是这种情况（即，如果您的文档有`contains_replacement_characters == True`），那么一旦将原始数据解码为 UTF-8，就无法从文档中取回原始数据。您将不得不执行我上面建议的操作，使用不同的编解码器对整个文档进行两次解码。

# azure - 是否可以在 Azure VM 上托管 200 多个网站

> ID：11767002
> 
> 赞同：2
> 
> 时间：2012-08-01T20:23:04.017
> 
> 标签：azure

我正在对 Windows Azure 做一些初步研究。这个想法是将 200 多个 ASP 经典网站迁移到 Windows Azure。我想知道这是否可能和可行？我可以在单个 VM 上托管那么多网站吗？另请注意，每个网站都需要有自己的一组电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:28:37.757

绝对没有理由不能在 Azure VM 上托管所有这些站点（假设您正在谈论预览虚拟机功能）。您拥有自己的独立机器，拥有自己的 IIS 和 IP。你放什么取决于你，但这与从任何其他公司（机架空间等）获得 VPS 没有什么不同。

显然，这是假设您的站点资源不是很重，并且您使用不同 VM 大小获得的内存等可以支持使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:54:40.567

Marek 的回答没有错，但请不要为此使用“虚拟机”，而应使用云服务（特别是网络角色）。Web 角色允许您仅部署代码（在本例中为网站），而无需管理完整的 VM。

简而言之，PaaS 比 IaaS 更好，只要您的应用程序符合模型（基于 IIS 的网站在 Windows Azure 中所做的）。

我不知道“每个网站都需要拥有自己的一组电子邮件地址”是什么意思或它是如何关联的。

# firefox - 我的简单用户帐户不允许在 Firefox 上恢复以前的会话或关闭的选项卡

> ID：11767003
> 
> 赞同：0
> 
> 时间：2012-08-01T20:23:17.803
> 
> 标签：firefox, browser, browser-history, limited-user

我想使用有限的帐户功能来恢复我已关闭的内容，但我认为它有问题：我只能找到我能记住的普通年表来解决问题。我在 Windows Xp 上使用 Firefox 12。拜托，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:07:23.927

我发现由于我不用作管理员的扩展而发生了问题：所以我最终安排禁用它，它实际上似乎运行良好。

# magento - Magento：从一组产品 ID 构建评论集合

> ID：11767004
> 
> 赞同：1
> 
> 时间：2012-08-01T20:23:22.153
> 
> 标签：magento, magento-1.7

我正在尝试构建一个产品评论集合，该集合结合了来自多个不同产品的评论。我正在使用以下代码，但该集合仅返回数组中列出的第一个产品 ID 的评论，而不是两个产品 ID。

```
$entity_ids = "153435, 153438";

$reviewcollection = Mage::getModel('review/review')->getCollection()->addEntityFilter('product', array('in' => $entity_ids));
$reviewcollection->addStoreFilter(Mage::app()->getStore()->getId())->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)->setDateOrder()->addRateVotes();

$_items = $reviewcollection->getItems();` 
```

任何想法如何让集合结合来自多个产品 ID 的评论？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T21:52:07.790

```
$entity_ids = array(153435, 153438);

$reviewcollection = Mage::getModel('review/review')->getCollection()
    ->addStoreFilter(Mage::app()->getStore()->getId())
    ->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)
    ->addFieldToFilter('entity_id', Mage_Review_Model_Review::ENTITY_PRODUCT)
    ->addFieldToFilter('entity_pk_value', array('in' => $entity_ids))
    ->setDateOrder()
    ->addRateVotes()
;

$_items = $reviewcollection->getItems(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:38:39.837

addEntityFilter() 不接受数组。您可以尝试 addFieldToFilter($field, $condition) 或覆盖集合并编写自己的方法。或者，您可以遍历您的 id 并合并结果。

# adobe - 为什么在 AGAL 中我们在 createVertexBuffer 方法中有一个最大值为 64 的 data32PerVertex？

> ID：11767010
> 
> 赞同：0
> 
> 时间：2012-08-01T20:23:39.903
> 
> 标签：adobe, molehill, agal

我不明白这个 64 值......据我所知，我们有 8 个最大寄存器，每个寄存器的大小为 128 位（4 data32），

所以我们不能访问超过 32 个数据 32？我错了吗 ？对于我们可以存储在顶点中的其他 32 个数据 32 是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:11:14.817

这与 MaxStreamStride 的 d3d caps 值有关，通常为 256。但是说真的，你需要这么多流数据做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:42:01.193

他们有两点需要考虑。

*   第一个是每个有 4 个 data32 的 8 个寄存器并不意味着您可以使用 32 * data32，因为您将浪费空间进行填充。

*   第二个是大多数时候，在视频游戏中，您看到的图像是在使用来自顶点的不同数据的多个通道中渲染的。因此需要在单个着色器可以处理的每个顶点中放置更多数据。

想象一个愚蠢的场景，你想渲染一个每个顶点最多有 10 个骨骼的模型。（这纯粹是理论上的，flash 有一个硬编码的 ~200 agal 指令限制，顺便说一句，除非你在为章鱼建模，否则完全没用）

在每个顶点中，您将拥有大量这样的数据。这总计为每个顶点3*3 + 12*2 = **33 个数据 32。**

```
3 data32 for position
3 data32 for normal
3 data32 for tangent
2 data32 for boneData1
2 data32 for boneData2
2 data32 for boneData3
2 data32 for boneData4
2 data32 for boneData5
2 data32 for boneData6
2 data32 for boneData7
2 data32 for boneData8
2 data32 for boneData9
2 data32 for boneData10
2 data32 for texture_uv
2 data32 for lightmap_uv 
```

在典型的延迟着色渲染场景中，您将执行以下操作：

1 - 在纹理中渲染“视图空间法线贴图”。然后，您将编写一个需要使用的着色器：位置、法线、切线和所有骨骼数据。

所以着色器将使用 29 个数据 32。但是所有寄存器都会被填满，因为你需要填充位置、法线和切线（va0 位置、va1 法线、va2 切线、va3-7 骨骼数据）。

您将在 va0.w、va1.w 和 va2.w 上浪费空间。

2 - 在纹理中渲染“视图空间深度图”。然后，您将编写一个需要使用的着色器：位置和所有骨骼数据。

所以着色器将使用 23 个 data32。

3 - 在纹理中渲染视图空间漫反射贴图然后您将编写一个需要使用的着色器：位置、texture_uv 和所有骨骼数据。

所以着色器将使用 25 个 data32。

4 - 渲染视图空间光照贴图然后您将编写一个需要使用的着色器：位置、lightmap_uv 和所有骨骼数据。

所以着色器将使用 25 个 data32。

5 - 最后合成并进行延迟照明以构建最终图像。

所有 33 个数据 32 都已使用。没有着色器同时使用超过 8 个寄存器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:28:17.913

您可以使用 setVertexBufferAt 和 offset 访问此数据。但你是对的 - 因为只有 8 个寄存器可用，所以不可能使用所有数据。

# php - 在 iOS、PHP 和 JSON 中使用来自 SQL Server 的空值

> ID：11767012
> 
> 赞同：0
> 
> 时间：2012-08-01T20:23:43.870
> 
> 标签：php, objective-c, ios, json, sql-server-2008

我正在设计的应用程序使用从 SQL Server 2008 数据库中选择的 PHP 脚本返回的 JSON 对象。我遇到的问题是，当数据库缺少某个字段的值时，它在 JSON 中返回为 null。然后当应用程序解析 JSON（我正在使用 NSJSONSerialization）时，字典包含一个值。使用此字典填充我的视图时，应用程序在遇到空值时崩溃。

绕过这个问题的最简单方法是什么？我想我可以在 PHP 将数据返回为 JSON 之前用空字符串替换所有空值；但是，这可能不是最好的解决方案。有没有简单的方法来检查 iOS？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:28:27.040

要检查空值，您需要查看对象是否为[`[NSNull null]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html).

```
id object = [dict objectForKey:@"key"];
if(object == [NSNull null])
{
    //Handle null value
} 
```

# autocad - AutoCAD 插件 - 开发人员符号注册

> ID：11767013
> 
> 赞同：1
> 
> 时间：2012-08-01T20:23:47.483
> 
> 标签：autocad, autodesk, objectarx

我使用 ObjectARX SDK、C# 和 VS2010 的 Autodesk 插件模板开发了一个插件。插件在启动时通过 SDK 文件中记录的注册表项加载到 AutoCAD 中。

插件本身将私下分发，不会提交给 Autodesk 为 AutoCAD 产品提供的“市场”。

我注意到 AutoDesk 网站上有一个关于通过[RDS 方案](http://usa.autodesk.com/adsk/servlet/index?siteID=%E2%80%8B123112&id=1075006)注册自定义前缀的部分。

在以下区域中可以找到与默认模板不同的代码：

*   命名空间，例如“MyNamespace.Utility”
*   自定义类 MyClass.cs
*   自定义函数，例如 LogData()
*   自定义命令，例如“DEBUGDATA”

根据当前的实现和预期的使用/分发方法，是否需要符号注册？我问，因为我不确定如果用户使用的另一个插件具有例如“DEBUGDATA”命令会发生什么。

如果需要符号注册，我在哪里可以找到它在代码中实现的清晰示例？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:22:37.267

我试图避免命令名称重复的方法是使用一个非常长的命令名称，包括我的顶级命名空间（在我的例子中是“CadBloke”），然后在 acad.pgp 文件中添加一个命令别名，这样键盘命令就更明智了。工具栏等上的按钮不关心命令名称有多长。

在您的代码中，命名空间冲突肯定是一个问题。我倾向于使我的顶级命名空间非常冗长，例如“CadBloke.CadTools.ToolName”。你必须很不走运，或者惹恼了某人，才能与这类事情发生冲突。

我[在 Autodesk 论坛上看到了您的问题](http://forums.autodesk.com/t5/NET/RDS-Usage-and-Guidelines/m-p/3561244)- 答案与我的基本相同：尝试使您的命名空间独一无二。

模糊的记忆：我认为 Autodesk 的一些项目向导会将您的符号添加到命名空间。

这是一篇博客文章，其中包含一个或 2 个关于符号注册的链接：http: [//adndevblog.typepad.com/autocad/2012/05/registered-developer-symbols.html](http://adndevblog.typepad.com/autocad/2012/05/registered-developer-symbols.html)（您的链接已失效，在 Autodesk 移动链接时非常典型很多）。跟进并尝试查找有关符号的一些信息。祝你好运，我从来没有发现任何具体的东西。我，我目前不使用它。

# matlab - MatLab - 渐变命令

> ID：11767015
> 
> 赞同：3
> 
> 时间：2012-08-01T20:23:57.213
> 
> 标签：matlab, gradient

我正在尝试学习 MatLab 中的各种功能和命令。我有一个关于`gradient`命令的问题。

假设我定义以下内容：

```
x = 0:1:10;

f = @(x) x.^2 + 2*x -1;

h = gradient(f(x)) 
```

这给了我以下向量：

```
h =  3     4     6     8    10    12    14    16    18    20    21 
```

我看到当 x 介于 1 和 9 之间时值是正确的，但是对于 x = 0 和 x = 10 这是不正确的。当 x = 0 时，梯度应该是 2，当 x = 10 时，梯度应该是 22 . 那么为什么MatLab对这两个输入值给出了错误的答案呢？

如果有人可以向我解释这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:58:45.320

其实结果是对的。什么时候

```
>> x0 = 0
>> f(x0) 
    -1 
```

这样梯度确实是 3。类似地，对于`x=10`, as`f(10) = 119`和`f(9)=98`，所以梯度确实 = 21。

这些结果与分析结果之间的差异是因为梯度是具有相关*边界问题*的导数的数值近似。

进一步考虑如果您提供较少的数据点会发生什么，比如只有两个点 - 该算法将为您提供梯度，即点之间的差异除以间隔。这就是边界上正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:02:33.830

我认为您正在研究[边界问题](http://en.wikipedia.org/wiki/Boundary_problem_%28spatial_analysis%29)。展开`x`，你会得到正确的答案。请记住，您正在执行数值计算

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T01:54:55.943

该`help gradient`命令没有提供足够的实施细节。

但如果你输入**`edit gradient`**，它会显示`m`-file source code `gradient.m`，你可以在其中看到它是如何计算的：

*   阵列末端的单边差异。

*   所有其他点的中心差。

（您可以通过使用更高精度的模板做得更好。特别是您可能希望对末端的项目使用二阶准确模板，以与二阶准确的居中差异保持一致。）

# android - android nullpointerexception in function

> ID：11767018
> 
> 赞同：1
> 
> 时间：2012-08-01T20:24:13.157
> 
> 标签：android

我是 Java/android 的新手，所以很多这些术语都是外来的，但我愿意学习。我不会详细介绍该应用程序，因为我认为它不相关。我的问题就目前而言，我使用了博客中的教程和代码片段，并让我的代码正常工作。尝试清理和组织我的代码时，当我移动一行（创建我的自动完成文本视图）时，我得到了一个空指针异常。下面是我使用的代码。我的 1 行代码给我一个问题是

**AutoCompleteTextView companyAutoComplete = (AutoCompleteTextView) addAddressDialog.findViewById(R.id.add_record_dialog_autocomplete);**

当我将它移到函数开始的右侧时，它会出错，但是当它留在原处时，它就像一个魅力。我想了解这是为什么。

```
public void addAddress() {
    final Dialog addAddressDialog = new Dialog(this);
    final int[] to = new int[] { android.R.id.text1 };
    final String[] from = new String[] { "CompanyName" };

    // Create a SimpleCursorAdapter for the CompanyName field.
    SimpleCursorAdapter adapter =  new SimpleCursorAdapter(this, android.R.layout. select_dialog_item, null, from, to);

    addAddressDialog.setContentView(R.layout.add_record_dialog);
    addAddressDialog.setTitle(getString(R.string.add_record_dialog_address_title));
    addAddressDialog.setCancelable(true);

    final EditText text1 = (EditText) addAddressDialog.findViewById(R.id.add_record_dialog_edittext);
    text1.setHint(getString(R.string.add_record_dialog_company_hint));

    Button buttonOK1 = (Button) addAddressDialog.findViewById(R.id.add_record_dialog_ok);
    buttonOK1.setText(getString(R.string.add_record_dialog_ok_button));

    Button buttonCancel1 = (Button) addAddressDialog.findViewById(R.id.add_record_dialog_cancel);
    buttonCancel1.setText(getString(R.string.add_record_dialog_cancel_button));

    buttonOK1.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Bundle addressBundle = new Bundle();
            addressBundle.putString("CompanyName", text1.getText().toString());

            Intent intent = new Intent(MenuActivity.this, AddAddressActivity.class);
            intent.putExtras(addressBundle);
            startActivity(intent);

            addAddressDialog.dismiss();
        }   
    });

    buttonCancel1.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Toast.makeText(getBaseContext(), "Cancel button clicked", Toast.LENGTH_SHORT).show();
            addAddressDialog.dismiss();
        }   
    });
    AutoCompleteTextView companyAutoComplete = (AutoCompleteTextView) addAddressDialog.findViewById(R.id.add_record_dialog_autocomplete);

    companyAutoComplete.setAdapter(adapter);

    // Set an OnItemClickListener, to update dependent fields when
    // a choice is made in the AutoCompleteTextView.
    companyAutoComplete.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> listView, View view,
                    int position, long id) {
            // Get the cursor, positioned to the corresponding row in the
            // result set
            Cursor cursor = (Cursor) listView.getItemAtPosition(position);

            // Get the CompanyID from this row in the database.
            String companyID = cursor.getString(cursor.getColumnIndexOrThrow("_id"));

            // test to make sure CompanyID returned
            Toast.makeText(getBaseContext(), companyID, Toast.LENGTH_SHORT).show();
        }
    });

    // Set the CursorToStringConverter, to provide the labels for the
    // choices to be displayed in the AutoCompleteTextView.
    adapter.setCursorToStringConverter(new CursorToStringConverter() {
        public String convertToString(android.database.Cursor cursor) {
            // Get the label for this row out of the "CompanyName" column
            final int columnIndex = cursor.getColumnIndexOrThrow("CompanyName");
            final String str = cursor.getString(columnIndex);
            return str;
        }
    });

    // Set the FilterQueryProvider, to run queries for choices
    // that match the specified input.
    adapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            Cursor cursorReturn = dbAdapter.getCompanies(constraint != null ? constraint.toString() : null);

            startManagingCursor(cursorReturn);
            return cursorReturn;
        }
        });

    addAddressDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:28:21.470

发生这种情况是因为您`setContentView`稍后调用。

`setContentView`设置`addAddressDialog`对话框的布局。如果您不调用`setContentView`，则它没有布局项，因此`addAddressDialog.findViewById(...);`将是`null`，并且显然您不能将其转换为任何东西，也不能调用`setHint`它。

这行代码在您的方法中的位置无关紧要，只要在它**之前**`setContentView`调用您的行。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:31:20.560

唯一重要的是`findViewById()`在调用 to 之后调用您的调用`setContentView()`，即这一行：

```
addAddressDialog.setContentView(R.layout.add_record_dialog); 
```

XML 文件`add_record_dialog.xml`是您要遍历以查找 ID 为 的视图的视图层次结构`add_record_dialog_autocomplete`。直到您给出视图层次结构的对话框，它才能遍历它，因此`NullPointerException`当您尝试使用时您会得到一个，`AutoCompleteTextView`因为它找不到您的视图。

编辑：另外，如果你的意思是你把它放在方法的最开始，那也将失败，因为在`addAddressDialog`你调用之前它将为空

```
final Dialog addAddressDialog = new Dialog(this); 
```**

# c# - 如何在我的锯齿状数组中插入一个新数组

> ID：11767023
> 
> 赞同：1
> 
> 时间：2012-08-01T20:24:38.550
> 
> 标签：c#, jagged-arrays

你好，我会非常感谢任何帮助。

好的，让我们看看，首先我声明了一个像这样的锯齿状数组和下一个代码

```
int n=1, m=3,p=0;

int[][] jag_array =new[n]; 
```

现在我的锯齿状数组内部将有 1 个数组，接下来你必须像这样填充数组：

```
car=2;
do
     {
     jag_array[p]= new double[car];
     for (int t = 0; t < carac; t++)
          {
           jag_array[p][t] = variableX;
          }
     p=p+1
     }
 while(p==0) 
```

现在我的锯齿状数组看起来像这样（也为此示例插入一些数据）：

```
jag_array[0][0]=4
jag_array[0][1]=2 
```

现在我的问题是，如果我声明，我如何插入一个新数组而不会丢失我的 previos 数据

```
jag_array[p+1]= new double[car]; 
```

我会丢失之前的数据，我希望看起来像这样：

```
jag_array[0][0]=4
jag_array[0][1]=2
jag_array[1][0]=5
jag_array[1][1]=6 
```

我没有从一开始就声明 2 数组的原因是因为我不知道我要使用多少它可能只是 1 或 20 并且每次我必须创建一个新数组而不会丢失之前已经存在的数据填写，谢谢大家的关注，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:26:29.500

数组的大小，一旦创建，根据定义是不变的。如果您需要可变数量的元素，请使用[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)- 在您的情况下，可能是`List<int[]>`.

唯一的替代解决方案是创建一个具有新大小的新数组（并将其分配给您的`jag_array`变量）并将旧数组中的所有先前元素复制到新数组中。当您可以使用时，这是不必要的复杂代码，但如果您因任何原因`List<T>`无法使用，这里有一个示例：`List<T>`

```
// increase the length of jag_array by one
var old_jag_array = jag_array; // store a reference to the smaller array
jag_array = new int[old_jag_array.Length + 1][]; // create the new, larger array
for (int i = 0; i < old_jag_array.Length; i++) {
    jag_array[i] = old_jag_array[i]; // copy the existing elements into the new array
}
jag_array[jag_array.Length - 1] = ... // insert new value here 
```

# .net - 删除现有 pdf 上的图章

> ID：11767027
> 
> 赞同：2
> 
> 时间：2012-08-01T20:24:47.317
> 
> 标签：.net, pdf, itext

我正在使用 iTextSharp 创建 PDF，它所做的只是读取源 pdf 文件（S_PDF.pdf），在该文档的顶部和底部标记一些文本并将结果保存为文件（R_PDF.PDF）。

现在，我有一个要求，从 R_PDF.pdf 文件中删除邮票并将其与 S_PDF.pdf 进行比较。

我有点怀疑这个要求（为什么我们真的需要比较同一个文件）。但我被要求找出是否可能。所以我在谷歌上几乎没有搜索，并且能够使用 ASPOSE 删除图章（无法从 iText 中找到删除现有 pdf 文档上的图章的内容），无论如何现在的问题是：

*   如何比较这些文件？只是布尔类型的结果就足够了
*   我们可以使用 iText 删除所有或特定的图章吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:18:03.987

您可以使用[i-net PDF 内容比较器](http://www.inetsoftware.de/other-products/pdf-content-comparer)似乎也有一个很好的[api](http://www.inetsoftware.de/documentation/other-products/pdf-content-comparer/apispec/index.html)。

我更经常使用的另一个选项是[diff-pdf](http://vslavik.github.com/diff-pdf/)，最好的部分是它可以直观地比较文件 - 这有助于减少大量编码噪音。

查看[Docotic.Pdf 库](http://bitmiracle.com/pdf-library/)，它应该允许您[使用 VB.NET 进行比较](http://bitmiracle.com/pdf-library/help/check-that-two-pdf-documents-are-equal.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:16:46.637

行。我们有：

1.  S_PDF
2.  R_PDF

怎么样：

**第一步：** S_PDF => iTextSharp =>“新 R_PDF”。

**第二步：**逐字节比较R_PDF和“New S_PDF”？在这种情况下，您可以使用任何文件比较工具。

# database - Magento 如何快速填充搜索词

> ID：11767034
> 
> 赞同：1
> 
> 时间：2012-08-01T20:25:26.433
> 
> 标签：database, magento, phpmyadmin, synonym

我正在尝试在我的 Magento 网站中填充搜索词。如何在无需手动添加所有术语的情况下使用我的术语和同义词快速填充数据库。我有 100 多个术语，因此手动操作将需要很长时间。我正在使用 CSV，并且有兴趣获得 myphpadmin 解决方案或 php / mysql 解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:11:36.283

对此的查询如下。该`synonym_for`字段是可选的。此外，您必须提供要插入条款的商店。转到`System > Manage stores`并悬停您要为其添加条款的商店的链接（右栏）。storeid 可以在 url 中找到。

```
insert into catalogsearch_query(query_text, synonym_for, store_id) values('<your_search_term>', '<your_synonym>', <your_store_id>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T12:56:21.350

我也遇到了这个问题。给定的答案涉及添加新的搜索词。就我而言，我有很多搜索词，需要用相同的同义词更新其中的许多词。这是我所做的：使用类似于此的查询：

`SELECT query_text,synonym_for FROM`catalogsearch_query `WHERE query_text LIKE '%search_term%'` 以确定您希望作为一个组更新的搜索词集。

然后使用以下查询来更新这些搜索词：

```
`UPDATE catalogsearch_query
SET synonym_for = 'new synonym'
WHERE query_text LIKE '%search_term%'` 
```

您不会拥有**该查询**的所有搜索词- 已更新为新的同义词。备份表格可能是个好主意，以防万一你犯了错误。

# php - 在时区之间转换

> ID：11767046
> 
> 赞同：0
> 
> 时间：2012-08-01T20:26:24.133
> 
> 标签：php, datetime, timezone

我知道有几种方法可以做到这一点，其中很多都使用 DateTime 类对象。我正在使用以下方法将时间戳存储在数据库中：

```
date_default_timezone_set("America/Phoenix");
$time=time();
$timezone='America/Chicago';
//$time and $timezone are then stored accordingly. 
```

然后我可以在我的时区检索时间：

```
date_default_timezone_set("America/Phoenix");
echo date("m/d/Y g:i:s a",$time);
//or if I want to display it to the user:
date_default_timezone_set($timezone);
echo date("m/d/Y g:i:s a",$time); 
```

我的问题是，在显示日期和时间时，像这样操纵 PHP 的时区以实现局部性是否合适，或者我应该使用其中一个打包对象来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:44:27.267

我建议使用 php 内置的[DateTime](http://php.net/manual/en/class.datetime.php)对象系列来处理这个问题。您可以很容易地进行时区转换：

```
 // assuming the data coming from the database and it's in the America/Phoenix timezone
 $localtime = DateTime::createFromFormat('Y-m-d H:i:s', $db_date_string, new DateTimeZone('America/Phoenix'));
 $chicago_time = $localtime;
 $chicago_time->setTimeZone(new DateTimeZone('America/Chicago'));
 print $chicago_time->format('m/d/Y g:i:s a'); 
```

这使时区操作保持在最紧凑的范围内（仅限一个日期时间）。

此外，我建议仅将数据库数据存储在一个时区中，并在显示/使用之前将其转换到应用程序中。这可以在调试时为您节省大量的混乱。（它至少可以救我:-P）

# iphone - 游戏中心成就多次解锁

> ID：11767052
> 
> 赞同：6
> 
> 时间：2012-08-01T20:26:38.260
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我设置了通过游戏第一关的成就，它可以工作，但是当我重玩关卡并通过它时，它再次显示通知横幅，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T22:01:33.957

使用此方法提交成就：

```
-(void) reportAchievementWithID:(NSString*) achievementID {

    [GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error) {

        if(error) NSLog(@"error reporting ach");

        for (GKAchievement *ach in achievements) {
            if([ach.identifier isEqualToString:achievementID]) { //already submitted
                return ;
            }
        }

        GKAchievement *achievementToSend = [[GKAchievement alloc] initWithIdentifier:achievementID];
        achievementToSend.percentComplete = 100;
        achievementToSend.showsCompletionBanner = YES;
        [achievementToSend reportAchievementWithCompletionHandler:NULL];

    }];

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T20:28:49.470

保存用户已经通过关卡`NSUserDefaults`，然后当用户通过关卡检查`NSUserDefaults`你的钥匙，如果它在那里，那么不要为游戏中心做成就代码。

# c# - 在设计 azure 表存储数据存储时，如何动摇关系数据库思维？

> ID：11767055
> 
> 赞同：9
> 
> 时间：2012-08-01T20:27:01.377
> 
> 标签：c#, azure, azure-storage, azure-table-storage

一段时间以来，我一直试图很好地掌握 Azure 表存储，虽然我大致了解它的工作原理，但我真的很难动摇我的关系数据库思维。我通常通过例子学得最好，所以我想知道是否有人可以帮助我。我将概述如何使用关系数据库解决问题的简单设置，有人可以帮助指导我将其转换为使用 Azure 表存储吗？

假设我有一个简单的笔记应用程序，它有用户，每个用户可以拥有任意数量的笔记，每个笔记可以拥有任意数量的用户（所有者或查看者）。如果我要使用关系数据库部署它，我可能会按如下方式部署它：

对于数据库，我将从以下内容开始：

```
CREATE TABLE [dbo].[Users](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Username] [nvarchar](20) NOT NULL)

CREATE TABLE [dbo].[UsersNotes](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [UserID] [int] NOT NULL,
    [NoteID] [int] NOT NULL)

CREATE TABLE [dbo].[Notes](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [NoteData] [nvarchar](max) NULL) 
```

`Users.ID and UsersNotes.UserID`然后，我将在约束之间以及约束之间建立关系`Notes.ID and UsersNotes.NoteID`以强制执行参照完整性。

对于应用程序，我会让 ORM 为每个实体生成一些具有匹配名称属性的实体，我可能会称之为一天：

```
public class Users
{
    public int ID { get; set; }
    public String Username { get; set; }
}
// and so on and so forth 
```

我意识到这种设计完全依赖于关系数据库，我正在寻找一些关于如何改变这种思路以使用 Azure 表存储或任何其他非关系数据存储技术的建议。

让我们也假设我已经安装了 Azure SDK，并且已经使用它，但是我使用 SDK 的工作知识是有限的，我宁愿不专注于那个，而是一个好的解决方案到上面的样子。一个好的起点将有助于使 SDK 对我有意义，因为我将有一个参考点。

为了完整起见，让我们说

*   笔记数据在首次创建时会频繁更改，并随着时间的推移逐渐减少
*   用户会有很多笔记，笔记可能有多个用户（不是并发的，只是查看者）
*   我预计用户数量很少（低数百），但我希望有相当数量的笔记（每用户低数百）
*   我希望查询`Username`最多，然后显示用户可以访问的注释
*   我还希望在查看便笺时，向其他有权访问该便笺的用户显示反向查找

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:10:08.687

您可以将 Azure 表视为对象的集合。

在 Azure Table 中，对象是一个实体。

要使用您的示例，用户将从 TableStorageEntity 派生。

Azure 表存储不是关系型的。没有连接。但是有 LINQ，一种支持多种语言的查询语言。因此系统不提供连接操作和参照完整性。开发人员必须这样做。

一些显着的优势：

(1) Azure 表自动跨多个存储节点扩展以保持性能，即使您正在处理数十亿个实体。(2) 它们被复制 3 次 (3) 它们带有 SLA (4) 表服务 API 与 REST API 兼容，因此可以从非 Microsoft 技术访问它们。

若要允许将对象存储在 Azure 表中，只需从 TableStorageEntity 派生。

如果您搜索“Microsoft Azure 表虚拟实验室”，可以找到更多信息。

下面的代码片段忽略了 (1) 分区键 (2) 行键。但这是你需要担心的事情。将这两个键视为关系表上的主键。

您需要非常仔细地考虑这两个关键。它们决定性能。因为您只获得一组密钥，您可能需要保留数据的非规范化副本以获得最佳性能。

```
    公共类用户：TableStorageEntity
    {
        公共 int ID { 获取；放; }
        公共字符串用户名 { 获取；放; }
    }

```

看看手上的。Azure 表便宜且易于使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T06:10:21.887

一些想法...

1.  从整体上考虑不同的实体，并避免使用任何规范化技术进一步分解它们。
2.  为每个实体提供一个标识符，如果对其进行索引，将允许精确键搜索和范围键搜索匹配。
3.  将标识符拆分为 2 个段以满足 Azure 表存储可扩展性需求。如何很好地分割，它本身是一个单独的主题，但通常在定义明确的自然段中分割效果很好。

在您的示例中，这两个实体是 User 和 Note。

UserId 足以唯一标识用户。对用户的范围搜索可能并没有真正有用。用户 id 在这里可以是任何固定长度的值。

UserId + NoteId 足以唯一标识一条笔记。note id 可能类似于日期/时间戳 + 用于唯一性的 GUID。这样的键与 UserId 结合将唯一地标识笔记，并允许在给定时间段内对所有用户的笔记或用户的笔记进行范围搜索。

所以如果 UserId = “ABCD”，NoteId 可能是 “20120801-00f64829-6044-4fbb-8b4e-ae82ae15096e”。

您可以将两个实体存储在相同或不同的表中。这里有一些不同的方法……</p>

如果每个实体都有自己的表，

*   对于用户，分区键可以是“ABCD”，而行键实际上可以是任何东西，您只搜索分区键。

*   或者分区键可以是“AB”，行键可以是“CD”。

    以上两种方法都可以很好地适应大量用户。

*   或者分区键可以是“*”，行键可以是“ABCD”。这对于较小的用户集非常有效，您可以将用户和注释放在同一个表中。

备注

*   分区键可以是“ABCD”，行键可以是“20120801-00f64829-6044-4fbb-8b4e-ae82ae15096e”</p>

*   这里的范围搜索可能是

    *   在 PartitionKey = “ABCD” 上获取用户的所有笔记。
    *   在 PartitionKey = “ABCD” 和 RowKey >=“20120801” 和 RowKey <= “20120901” 上获取日期范围内的笔记。

**更新**

我误读了您的问题，并假设用户和笔记之间只有一对多的关系。由于存在多对多关系，因此需要 4 个实体来建模，除非您不介意重复。（如果注释很短且不可变，则它们可以复制，您不必对连接进行建模）。

如果键在不同的键范围内并且可以轻松区分，则可以将多个实体放在单个表中。尽管在实践中这并不常见，除非有特殊需要，通常是事务性写入到同一分区（不适用）。

所以单个表模式可能看起来像这样。对于多个表，可以删除分区键前缀。

*   您还可以在 3 个表中对此进行建模，一张用于 User，一张用于 Notes，一张用于双向关系。
*   您也可以部分在 SQL 中建模，部分在 Azure 存储中建模。Blob 或表中的注释和用户数据以及 SQL 中的关系。

.

```
Entity        Partition Key              Row Key            
User          “U” + UserId      
Note          “N” + NoteId(Date)         NodeId(GUID)
User Note     “X“  + UserId              NoteId(Date+GUID)
Note User     “Y“  + NoteId(Date+GUID)   UserId 
```

这些是一些替代方案，您需要确定哪些最适合您的数据和您的需求。

**另一个更新**
实际上 3 个实体对于 UserNote 实体中的 Note 就足够了。

如果 UserId = GUID
并且 NoteId = Date+GUID

```
Entity      Partition Key  Row Key             Note  User           
User        UserId      
User Note   UserId         NoteId(Date+GUID)   Note          (Contains Note and can query for all notes for a user).
Note User   NoteId(Date)   NodeId(GUID)              UserId  (Can query for all Users of a note. Join on ‘User Note’ to get note.) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:27:33.023

为什么UsersNotes 有一个ID？为什么不只把 UserID、NoteID 作为复合主键呢？

所以三个表，每个表有 2 个属性。第一个是 PartitionKey，第二个是 RowKey。

如果您希望在 NoteID 上查询大量用户 ID，那么在 PartitionKey 上搜索第四个表比在 RowKey 上搜索要快。而且它通常会更便宜，因为它会导致更少的交易。但是你有事务来加载表。

```
public class NotesUsers : TableStorageEntity
    {
        public int NoteID { get; set; }
        public int UserID { get; set; }
    } 
```

对于用户表，如果这是常见的查询条件，则使用 UserName 作为 PartitionKey。

ATS 中没有声明性引用完整性。您将需要在应用程序中强制执行所有数据关系。两部分复合键。对 RowKey 的搜索就像扫描（而不是搜索）。对 PartitionKey 的搜索就像搜索一样。

但我会使用 SQL。如果笔记是某人打字，那么这是一个相对较少的数据量。它是关系数据。

# asp.net-mvc-3 - 带参数的 ASP.NET MVC 基本路由

> ID：11767058
> 
> 赞同：2
> 
> 时间：2012-08-01T20:27:13.543
> 
> 标签：asp.net-mvc-3

我一直在尝试学习 ASP.NET MVC 3，除了路由方面，一切都进展顺利，无论我尝试什么，我似乎都无法完全正确。

我在主页上有一个 ActionLink：

```
@Html.ActionLink("Contracts", "List", "Contract", 
                 new { User.Identity.Name, page=1 }) 
```

这意味着在 ContractController 中访问此方法：

```
public ViewResult List(string user, int page = 1)
{
    //snip
} 
```

我的路线是：

```
 routes.MapRoute(
     null, 
     "Page{page}",
     new { Controller = "Contract", action = "List" }
 );

 routes.MapRoute(
     null,
     "Page{page}",
     new { Controller = "Contract", action = "List", user = "", page = 1 }
 );

 routes.MapRoute(
     "Default", // Route name
     "{controller}/{action}/{id}", // URL with parameters
     new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
 ); 
```

该链接现在将返回一个 404 错误，因为它在控制器“Home”中找不到操作“List”，这显然意味着它没有使用第一条路由中的任何一条。

在我尝试向 ActionLink 添加参数之前，一切正常，所以基本上，我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:33:43.810

亚历克斯，

您正在完全正确地执行所有其他位，但是 actionlink 缺少参数，请为您的 actionlink 尝试此操作：

```
@Html.ActionLink("Contracts", "List", "Contract", 
             new { User.Identity.Name, page = 1 }, null) 
```

在这种情况下，添加`null`作为最终参数 ( `htmlAttributes`) 是您所缺少的（有 9 个重载`Html.ActionLink`，因此很容易错过正确的实现）。

# debugging - Chrome 调试教程似乎不起作用。我做错了什么？

> ID：11767060
> 
> 赞同：2
> 
> 时间：2012-08-01T20:27:33.810
> 
> 标签：debugging, google-chrome, google-chrome-extension, google-chrome-devtools

我正在尝试这个 Google 教程来调试我的 Chrome 扩展程序：

[http://code.google.com/chrome/extensions/tut_debugging.html](http://code.google.com/chrome/extensions/tut_debugging.html)

*   我已在扩展页面上切换到*开发者模式*
*   按照教程的建议安装了*Hello World*扩展

现在我右键单击*Hello World*扩展的图标来获取菜单。

在这个菜单（和开发者模式）中应该有一个名为 **Inspect popup**的项目，但它只是不存在。它也不在任何其他扩展上。

我在 Windows 7 x64 上使用 Chrome V21。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:34:08.457

*“[检查弹出窗口”](https://developer.chrome.com/extensions/tut_debugging.html#inspect-popup)选项又回来了，下面的答案对于最近的 Chrome 版本（~27？）**不再有效。***

> 该教程有点过时了。事实上，在过去，每个浏览器操作按钮都有一个名为“检查弹出窗口”的菜单选项。当浏览器操作没有关联的弹出窗口时，该选项仍然可见，但已禁用。
> 
> 现在，您必须通过单击打开弹出窗口，然后在显示的弹出窗口内右键单击并选择“检查元素”选项，以便为弹出窗口启动开发工具实例。

# javascript - 绑定完成后 KnockoutJS 触发回调

> ID：11767061
> 
> 赞同：2
> 
> 时间：2012-08-01T20:27:34.570
> 
> 标签：javascript, internet-explorer, knockout.js, internet-explorer-9

我在这里概述了一个非常烦人的错误：[<select> 仅显示所选选项的第一个字符，](https://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)我需要一种方法来删除我的框中的 display:none 以避免此错误。有什么建议么？

继承人绑定：

```
<select data-bind="options: Values, optionsText: 'DisplayNameWithCost', optionsCaption: ControlCaption, selectedOptions: SelectedValues, event: { change: $root.resolveAllAttributeUi }, disable: IsDisabled"></select> 
```

编辑：我已经设法弄清楚它`selectedOptions: SelectedValues`是空白的，它没有在 IE9 中选择任何东西。至于修复我不确定。这是在 IE9 中尝试的示例[http://jsfiddle.net/9CaTa/](http://jsfiddle.net/9CaTa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:18:17.707

`selectedOptions`仅用于多选列表。请参阅[http://knockoutjs.com/documentation/selectedOptions-binding.html](http://knockoutjs.com/documentation/selectedOptions-binding.html)。

您可能想改用`value`绑定：http: [//jsfiddle.net/mbest/9CaTa/2/](http://jsfiddle.net/mbest/9CaTa/2/)

编辑：

`selectedOptions`不适用于`optionsCaption`，但您可以通过创建包装的自定义绑定使其至少默认选择第一项`selectedOptions`：

```
ko.bindingHandlers.mySelectedOptions = ko.utils.extend({}, ko.bindingHandlers.selectedOptions);
ko.bindingHandlers.mySelectedOptions.update = function(element) {
    ko.bindingHandlers.selectedOptions.update.apply(this, arguments);
    if (element.selectedIndex === -1)
        element.selectedIndex = 0;
} 
```

这是您使用此绑定的示例：http: [//jsfiddle.net/mbest/9CaTa/3/](http://jsfiddle.net/mbest/9CaTa/3/)

我注意到如果我选择标题，`selected`数组将不会被清除。相反，它将只有一个`undefined`项目。如果你不想这样，你也可以在你的自定义更新函数中检查它，然后清除数组：http: [//jsfiddle.net/mbest/9CaTa/4/](http://jsfiddle.net/mbest/9CaTa/4/)

# php - 如何在 php 文件中添加 CURL 以将表单详细信息发送到电子邮件和外部数据

> ID：11767070
> 
> 赞同：0
> 
> 时间：2012-08-01T20:28:20.913
> 
> 标签：php

我想知道如何将表单详细信息发送到外部 url 以及电子邮件 ID。我有将表单详细信息发送到电子邮件 ID 的编程经验，但是我的一个客户要求将表单详细信息的副本重定向到 url，就像这样[http://someipaddress.com/XDKRT/SalLeadEntWeb.ASP](http://someipaddress.com/XDKRT/SalLeadEntWeb.ASP)，我的网站是由wordpress开发的，谁能指导我如何实现这个？，我知道使用**CURL**我们可以实现这个，但是在哪里添加CURL？我的 php 动作表单是这样的：

```
<?php ob_start(); ?>
<?php
$contact_name = $_POST['name'];
$contact_email = $_POST['email'];
$contact_phone = $_POST['phone'];
$contact_message = $_POST['message'];

if( $contact_name == true )
{
    $sender = $contact_email;

    $receiver  = 'info@compositedge.com' . ',referral@compositeinvestments.com'; // note the comma

    $client_ip = $_SERVER['REMOTE_ADDR'];

    $email_body = "Name: $contact_name \nEmail: $contact_email \nPhone No: $contact_phone \nMessage: $contact_message \n";  

    $extra = "From: info@compositedge.com\r\n" . "Reply-To: $sender \r\n" . "X-Mailer: PHP/" . phpversion();

    if( mail( $receiver, "Open an Account - Download and Print", $email_body, $extra ) ) 
    {
    //IF SUCCESSFUL, REDIRECT
header("Location: http://www.mydomain.com/?page_id=1112");
    }
    else
    {
        echo "success=no";
    }
}
?>
<?php ob_flush(); ?> 
```

请求帮助我，在哪里添加 CURL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:21:45.830

这是您的代码，在调用之前添加了 cURL 请求`mail()`。

```
<?php ob_start();

$contact_name = $_POST['name'];
$contact_email = $_POST['email'];
$contact_phone = $_POST['phone'];
$contact_message = $_POST['message'];

if( !empty($contact_name)) {
    $sender = $contact_email;
    $receiver  = 'info@compositedge.com' . ',referral@compositeinvestments.com'; // note the comma
    $client_ip = $_SERVER['REMOTE_ADDR'];
    $email_body = "Name: $contact_name \nEmail: $contact_email \nPhone No: $contact_phone \nMessage: $contact_message \n";  
    $extra = "From: info@compositedge.com\r\n" . "Reply-To: $sender \r\n" . "X-Mailer: PHP/" . phpversion();

    // URL for cURL to post to
    $url        = 'http://someipaddress.com/XDKRT/SalLeadEntWeb.ASP';

    // Postfields for cURL to send
    // NOTE: You probably need to change the array keys to what the remote server expects to receive
    $postFields = array('name' => $contact_name,
                        'email' => $contact_email,
                        'phone' => $contact_phone,
                        'message' => $contact_message);

    // initialize curl and options
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($postFields));
    curl_setopt($ch, CURLOPT_TIMEOUT, 15);

    // send curl request
    $res = curl_exec($ch);
    curl_close($ch);
    // you can examine $res here to see if the request was successful

    if( mail( $receiver, "Open an Account - Download and Print", $email_body, $extra ) ) {
        // IF SUCCESSFUL, REDIRECT
        header("Location: http://www.mydomain.com/?page_id=1112");
    } else {
        echo "success=no";
    }
}

ob_flush(); 
```

`$url`除了for cURL之外，您可能唯一需要更改的是`$postFields`. 您应该根据远程 URL 期望发送的内容来更改此设置。

希望有帮助。

# c++ - 如何使用命名管道从 C++ 调用 WCF 方法？

> ID：11767072
> 
> 赞同：10
> 
> 时间：2012-08-01T20:28:23.590
> 
> 标签：c++, wcf, winapi, named-pipes

更新：查看[此处](http://msdn.microsoft.com/en-us/library/cc219293%28v=PROT.10%29.aspx)的协议，我无法弄清楚 Unsized Envelope Record 中的内容。我在网上找不到任何例子。

原来的：

我有以下 WCF 服务

```
 static void Main(string[] args)
    {
        var inst = new PlusFiver();
        using (ServiceHost host = new ServiceHost(inst,
            new Uri[] { new Uri("net.pipe://localhost") }))
        {
            host.AddServiceEndpoint(typeof(IPlusFive), new NetNamedPipeBinding(NetNamedPipeSecurityMode.None), "PipePlusFive");
            host.Open();
            Console.WriteLine("Service is Available. Press enter to exit.");
            Console.ReadLine();
            host.Close();
        }
    }

   [ServiceContract]
   public interface IPlusFive
   {
       [OperationContract]
       int PlusFive(int value);
   }

   [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
   public class PlusFiver : IPlusFive
   {
      public int PlusFive(int value)
      {
          Console.WriteLine("Adding 5 to " + value);
          return value + 5;
      }      
   } 
```

我输出了添加 5 行，所以我知道服务器是否处理了请求。

我有一个用于测试它的 .NET 客户端，并且一切都按预期工作。

现在我想为此制作一个非托管 C++ 客户端。

我想出了如何获取管道的名称并写入它。
我已经从[这里下载了协议](http://msdn.microsoft.com/en-us/library/cc219293%28v=PROT.10%29.aspx)

我可以写到管道，但我不能读到它。每当我尝试从中读取时，都会出现`ERROR_BROKEN_PIPE 109 (0x6D) The pipe has been ended.`错误。如果我将读取替换为写入，则写入成功，因此我认为管道不会关闭，至少在我尝试读取之前不会。

这是我连接到管道的方式。

```
HANDLE OpenPipe(OLECHAR* bstrGuid)
{
    wstring pipeName = L"\\\\.\\pipe\\";
    wstring strGuid = bstrGuid;
    pipeName.append(strGuid.substr(1,36));
    wcout << "Pipe Name " << endl;
    wcout << pipeName.c_str() << endl;

    HANDLE hPipe = CreateFile(pipeName.c_str(), GENERIC_WRITE | GENERIC_READ, FILE_SHARE_WRITE | FILE_SHARE_READ, NULL, OPEN_EXISTING, NULL, NULL);
    if(hPipe == INVALID_HANDLE_VALUE)
    {
        wcout << "failed to create pipe" << endl;
        system("pause");
        return NULL;
    }
    return hPipe;
} 
```

这就是我创建发送的第一条消息的方式

```
std::list<wchar_t> GetFirstMessage()
{
    std::list<wchar_t> message;
    message.push_back(0x00);// version record
    message.push_back(0x01);// major version
    message.push_back(0x00);// minor version
    message.push_back(0x01);// mode record
    message.push_back(0x01);// singleton-unsized mode
    message.push_back(0x02);// via record

    wstring url = L"net.pipe://localhost/PipePlusFive";
    message.push_back(url.length());// via length
    for(int x= 0;x<url.length();x++)
    {
        message.push_back(url[x]); // via
    }
    message.push_back(0x03);
    message.push_back(0x08);
    return message;
} 
```

这就是我将其写入文件的方式。

```
int WriteMessage(HANDLE hPipe, LPVOID message, int size)
{
    DWORD bytesWritten;

    BOOL bWrite = WriteFile(hPipe, &message, size, &bytesWritten, NULL);
    wcout << "Bytes Written: " << bytesWritten << endl;
    if(bWrite == false)
    {
        wcout << "fail"<<endl;
        CloseHandle(hPipe);
        system("pause");
        return 1;
    }
    return 0;
}

    list<wchar_t> full_message = GetFirstMessage();
int result = WriteMessage(hPipe, &full_message, full_message.size());   
if (result == 1)
{ return 1;} 
```

这是我写结束信息的方式

```
 wchar_t message = 12;
result = WriteMessage(hPipe, &message, 1);
if (result == 1)
{ return 1;} 
```

这是我试图阅读回复的方式

```
 char buffer[10];
DWORD bytesRead;
BOOL bRead = ReadFile(hPipe, buffer, 1, &bytesRead, NULL);
if(bRead == false)
{
    wcout << "fail read"<<endl;
    wcout << "error: " << GetLastError() << endl;
    CloseHandle(hPipe);
    system("pause");
    return 1;
} 
```

我是 C++ 新手，所以我不知道我是否没有正确遵循协议或在尝试这样做时犯了一个愚蠢的错误？

更新：问题是我正在将指针地址写入命名管道而不是列表的内容。我已经解决了这个问题，我现在可以阅读序言确认记录。现在我必须弄清楚协议的下一部分需要发送什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-09T02:10:50.147

检查这是否适合您

1.  尝试打开命名管道。（创建文件）
2.  设置指定命名管道的读取模式和阻塞模式。(SetNamedPipeHandleState)
3.  向管道服务器发送消息并接收其响应。（写文件，读文件）
4.  关闭管道。（关闭手柄）

# apache - 如何在 web.xml 中为 javascript 文件设置目录 js、为接口设置 ui 和为样式设置 css 目录

> ID：11767073
> 
> 赞同：0
> 
> 时间：2012-08-01T20:28:25.510
> 
> 标签：apache, jakarta-ee, tomcat

我想为我的第一个项目设置 web.xml。为了轻松管理项目，我想根据 Web Content 文件夹中的扩展名排列文件夹中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:40:09.820

只是把它们放在那些文件夹里有什么问题吗？

```
someapp/js/myscript.js
someapp/css/mystyles.css 
```

# html - 黑盒而不是 iframe youtube 视频

> ID：11767077
> 
> 赞同：0
> 
> 时间：2012-08-01T20:28:37.507
> 
> 标签：html

下面提供的代码存在于 html 文件中。在 Firefox 中打开文件时，会显示一个黑框而不是视频。这是否意味着插件、扩展或应用程序需要更新或 Firefox 中的设置需要更改？

```
<!DOCTYPE html>
<html>
<body>

<iframe width="420" height="345"
src="http://www.youtube.com/embed/XGSy3_Czz8k">
</iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:12:45.960

我犯了一个错误。这段代码确实有效，但我认为它没有工作几次，即使它确实有效。我实际上尝试使用不同的 Youtube 视频，但它不起作用，因为我手动编码了 src 不正确的内容，而不是右键单击 Youtube 视频并选择“复制嵌入 html”。所以这个问题与浏览器、插件、插件、扩展或更新无关。我的 src 代码不正确。

注意：使用“复制嵌入 html”功能，而不是手动尝试输入代码。

# mysql - subqery 的内部查询返回多行

> ID：11767079
> 
> 赞同：1
> 
> 时间：2012-08-01T20:28:45.333
> 
> 标签：mysql, subquery

我不是 sql 方面的经验，所以如果这不是一个好问题，请原谅，但我研究了差不多 3-4 天但无法解决。我的问题是我有一个表，其中有多个图像名称，所以我要做的是无论谁是特定用户的追随者，我都必须从这个表中获取图像，所以一个用户可以有多个追随者，所以我必须获取所有关注者发布的图像。这是我正在使用的子查询代码片段。

```
SELECT id,
       outfit_image,
       img_title,
       description
FROM outfitpic_list r2 
WHERE Email=ANY(SELECT being_followed 
                FROM follower_table 
                WHERE follower='test@gmail.com') 
```

所以这里的内部查询返回多个值，对于每个值（being_followed）我必须获取所有图像并显示它，但是每次我只得到一个图像时使用这个查询。我也尝试过但没有成功。

表结构：- Outfitpic_list 表

```
 id|outfit_image|datetime|Email|image_title|description 
```

追随者表

```
 bring_followed|follower 
```

请帮忙，我被卡住了..!! 谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:33:01.217

我认为您的问题可能是“电子邮件”和“任何”之间的 = 符号。试试这个说法：

```
SELECT 
  id,
  outfit_image,
  img_title,
  description 
FROM outfitpic_list r2 
WHERE Email IN
(
  SELECT being_followed 
  FROM follower_table 
  WHERE follower='test@gmail.com'
) 
```

这是相同的语句，没有 = 符号，并且 ANY 关键字替换为 IN。（我把它清理了一点，使其更具可读性）

# git - github：丢弃我自己的叉子，从原始叉子重新开始，保留我的本地更改

> ID：11767082
> 
> 赞同：3
> 
> 时间：2012-08-01T20:29:05.067
> 
> 标签：git, github

这是这种情况：

其他人在 github 上有“主要”项目，我很久以前就分叉了（在 github 上），然后进行了更改，最终以我自己的烂摊子告终，我不想再保留了。

现在，我将 main 的最新版本拉到我的本地存储库并进行了一些更改。我现在喜欢在我的 github fork 上分享这个新版本。

这意味着现在有 3 个版本： 1\. github 上的主要原件（我无法推送）。2.我想丢弃的github上的fork。3\. 我喜欢进入我的 github 存储库的本地版本。

我需要做什么才能将我的本地版本推送到 github，只需替换那里的所有内容？我必须为此删除 gitgub 上的 repo 吗？或者有没有办法说：推这个，替换你已经拥有的一切？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:30:09.753

假设您已将 github fork 添加为名为 repo`origin`并且您关心 master 分支：

```
git push -f origin master:master 
```

对要替换的每个分支重复此操作。

如果您的旧分叉上有任何要删除的分支，

```
git push origin :branch_name 
```

# spring-mvc - spring 控制器作为会话范围的 bean

> ID：11767085
> 
> 赞同：1
> 
> 时间：2012-08-01T20:29:28.147
> 
> 标签：spring-mvc

```
@Controller
@Scope("session")
public class SomeController {

        private CoreDataService coreDataService;
        private final Logger logger = LoggerFactory.getLogger(SomeController.class);
        private SomeBusinessObject bo;
        private long activityId;
... 
} 
```

有人认为将 Spring Controler 作为会话范围的 bean 有什么问题吗？所以我不相信这种方法，但我无法证明为什么我们不应该这样做。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:08:11.480

请参阅此先前的[答案](https://stackoverflow.com/a/5667760/302387)。

如果要保存实例变量，可以为控制器使用会话范围。如果您确实有代码中显示的变量，则需要确保不要使控制器成为单例。这是因为单例由多个线程共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:13:19.387

会话范围意味着您的 bean SomeController 将为**每个会话创建实例。**默认范围是**单例**，它只在 spring 容器中创建一个实例。

# ms-access-2003 - 循环遍历记录集以使用 SQL 查询的结果填充列表框？

> ID：11767087
> 
> 赞同：0
> 
> 时间：2012-08-01T20:29:31.280
> 
> 标签：ms-access-2003

我有一个多选列表框，我希望它成为 sql 查询的来源，结果显示在列表框中。目前，我将结果转到一个记录集，当只选择一个 1 字段时，该记录集显示得很漂亮。例如，如果用户选择 Gender，则不会打开任何记录集数据表，并且 List20 会显示字段名称，下划线，其下方带有不同的值——完美！！当我尝试选择多个项目时，事情就会出错。例如，选择 2 个项目（性别、界面）将导致性别（下划线），但其下方有 2 个 F 和 2 个 M，并且没有任何界面字段值。如何遍历每个选择并让它们显示在列表框中？这是我的代码。另外，奇怪的是，当我运行查询时，List13 没有显示任何结果，但是当我删除该行时：Set Me.List13。Recordset = rs 将打开一个记录集数据表，并且所需的结果不再出现在 List20 中。请帮忙！

```
Private Sub Command19_Click()
Dim strSQL As String
Dim strCriteria As String
Dim varItem As Variant
Dim dbs As Database
Set dbs = CurrentDb()
Dim qdf As QueryDef
Dim rs As Recordset

On Error GoTo Err_Command19_Click

For Each varItem In Me!List101.ItemsSelected
strCriteria = strCriteria & ",'" & Me!List101.ItemData(varItem) & "'"
Next varItem

strCriteria = Right(strCriteria, Len(strCriteria) - 1)

strSQL = "SELECT DISTINCT " & strCriteria & " FROM Scrubbed"
strSQL = Replace(strSQL, "'", "")

Set rs = dbs.OpenRecordset(strSQL)
Do Until rs.EOF
Set Me.List20.Recordset = rs
Set Me.List13.Recordset = rs
Loop

With dbs
Set qdf = .CreateQueryDef("TmpDistinctValues", strSQL)
DoCmd.OpenQuery "TmpDistinctValues"
.QueryDefs.Delete "TmpDistinctValues"
End With
dbs.Close
qdf.Close

Exit_Command19_Click:
   Exit Sub
Err_Command19_Click:
    MsgBox "Please select a field"

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:40:18.363

你的意思肯定是：

```
For Each varItem In Me!List101.ItemsSelected
   strCriteria = strCriteria & "," & Me!List101.ItemData(varItem) 
   colcount = colcount + 1
   colwidths = colwidths & ";" & "1134"
Next varItem

strCriteria = Right(strCriteria, Len(strCriteria) - 1)

strSQL = "SELECT DISTINCT " & strCriteria & " FROM Scrubbed"
''strSQL = Replace(strSQL, "'", "")

''Set rs = dbs.OpenRecordset(strSQL)
''Do Until rs.EOF
Me.List20.RowSource = strSQL
Me.List20.ColumnCount = colcount
Me.List20.ColumnWidths = Mid(colwidths, 2)

''Set Me.List13.Recordset = rs
''Loop 
```

# c - PETSc 安装在 Windows 上

> ID：11767088
> 
> 赞同：2
> 
> 时间：2012-08-01T20:29:35.637
> 
> 标签：c, windows, cygwin, configure

我正在尝试在 Windows 7 上安装 PETSc 库以与 Visual Studio Express 2008 一起使用，但到目前为止我还没有成功。我用 python、make、diff 安装了 cygwin（默认安装）。然后我点击

```
VS2008Exp->Tools->VSCommand Prompt 
```

我去了 Petsc 目录

```
cygdrive/d/Workspace/PETSc/petsc-2.3.3-p13 
```

从那里我尝试 [了一个官方建议](http://blogs.msdn.com/b/hpctrekker/archive/2008/09/07/running-petsc-on-windows.aspx)

首先安装“Microsoft HPC Pack 2008 R2”和“Microsoft HPC Pack 2008 R2 SDK”，但我有一个错误“无法使用给定选项进行配置”，指的是 --with-mpi-include="/cygdrive/c/Program\ Files/Microsoft\ HPC\ Pack\ 2008\ SDK/Include" --with-mpi-lib="/cygdrive/c/Program\ Files/Microsoft\ HPC\ Pack\ 2008\ SDK/Lib/amd64/msmpi.lib"

后记我试过

```
config/config.py -with-cc="win32fe cl" --with-fc=0 --download-c-blas-lapack=1 --download-mpich=1 
```

现在错误抱怨 MPI 的路径（我要求安装..）。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T21:14:49.190

您在此处描述的错误与 MSMPI 安装路径有关。由于它有空格字符配置实用程序失败。因此，您有两个选项可以将 MSMPI 安装在 C:\MSMPI 等简单路径上，或者使用以下语法

```
--with-mpi-include='[my msmpi path]' 
```

我将它用于MSMPI；

```
--with-mpi-include=/cygdrive/c/MSMPI/Inc/ --with-mpi-lib='[/cygdrive/c/MSMPI/Lib/amd64/msmpi.lib,/cygdrive/c/MSMPI/Lib/amd64/msmpifec.lib]' 
```

有关更多信息，您可以查看此[链接](https://docs.google.com/document/d/19oFOjK1B_p2D2ZEvWHVTngno_-g3SPi4PBwcF4mm4Yc/edit)

# c# - 使用 C# 和 ffmpeg 将 wma 流转换为 mp3 流

> ID：11767089
> 
> 赞同：2
> 
> 时间：2012-08-01T20:29:37.147
> 
> 标签：c#, process, ffmpeg, mp3, wma

是否可以实时将 wma 流转换为 mp3 流？

我试过做这样的事情，但没有任何运气：

```
 WebRequest request = WebRequest.Create(wmaUrl);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    int block = 32768;
    byte[] buffer = new byte[block];

    Process p = new Process();
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.ErrorDialog = false;
    p.StartInfo.RedirectStandardInput = true;
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardError = true;
    p.StartInfo.FileName = "c:\\ffmpeg.exe";
    p.StartInfo.Arguments = "-i - -y -vn -acodec libspeex -ac 1 -ar 16000 -f mp3 ";

    StringBuilder output = new StringBuilder();

    p.OutputDataReceived += (sender, e) =>
    {
      if (e.Data != null)
      {
        output.AppendLine(e.Data);
        //eventually replace this with response.write code for a web request
      }
    };

    p.Start();
    StreamWriter ffmpegInput = p.StandardInput;

    p.BeginOutputReadLine();

    using (Stream dataStream = response.GetResponseStream())
    {
       int read = dataStream.Read(buffer, 0, block);

       while (read > 0)
       {
          ffmpegInput.Write(buffer);
          ffmpegInput.Flush();
          read = dataStream.Read(buffer, 0, block);
       }
    }

    ffmpegInput.Close();

    var getErrors = p.StandardError.ReadToEnd(); 
```

只是想知道我想要做的事情是否可能（将 wma 的字节块转换为 mp3 的字节块）。对任何其他可能的 C# 解决方案（如果存在）开放。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:12:15.157

看起来您想将 WMA 文件作为输入并创建一个 MP3 文件作为输出。此外，您似乎想通过 stdin/stdout 执行此操作。我刚刚从命令行对此进行了测试，它似乎可以工作：

```
ffmpeg -i - -f mp3 - < in.wma > out.mp3 
```

如果这是您的目标，那么您的命令行会出现一些问题：

```
p.StartInfo.FileName = "c:\\ffmpeg.exe";
p.StartInfo.Arguments = "-i - -y -vn -acodec libspeex -ac 1 -ar 16000 -f mp3 "; 
```

“-f mp3”指定 MP3 比特流容器，但“-acodec libspeex”指定 Speex 音频。我很确定你不想要这个。忽略该选项，FFmpeg 将仅将 MP3 音频用于 MP3 容器。另外，您确定要重新采样到 16000 Hz，单声道吗？因为这就是“-ac 1 -ar 16000”选项的作用。

最后一个问题：您没有提供目标。如果您想将标准输出指定为目标，您可能需要“-f mp3 -”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:49:52.660

刚遇到同样的问题。

作为输入，您可以直接包含您的 URL。作为输出，您使用`-`, 代表标准输出。此解决方案用于 mp3 之间的转换，因此我希望它与视频相同。

不要忘记包括`process.EnableRaisingEvents = true;`标志。

```
private void ConvertVideo(string srcURL)
{
    string ffmpegURL = @"C:\ffmpeg.exe";
    DirectoryInfo directoryInfo = new DirectoryInfo(@"C:\");

    ProcessStartInfo startInfo = new ProcessStartInfo();
    startInfo.FileName = ffmpegURL;
    startInfo.Arguments = string.Format("-i \"{0}\" -ar 44100 -f mp3 -", srcURL);
    startInfo.WorkingDirectory = directoryInfo.FullName;
    startInfo.UseShellExecute = false;
    startInfo.RedirectStandardOutput = true;
    startInfo.RedirectStandardInput = true;
    startInfo.RedirectStandardError = true;
    startInfo.CreateNoWindow = false;
    startInfo.WindowStyle = ProcessWindowStyle.Normal;

    using (Process process = new Process())
    {
        process.StartInfo = startInfo;
        process.EnableRaisingEvents = true;
        process.ErrorDataReceived += new DataReceivedEventHandler(process_ErrorDataReceived);
        process.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
        process.Exited += new EventHandler(process_Exited);

        try
        {
            process.Start();
            process.BeginErrorReadLine();
            process.BeginOutputReadLine();
            process.WaitForExit();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            process.ErrorDataReceived -= new DataReceivedEventHandler(process_ErrorDataReceived);
            process.OutputDataReceived -= new DataReceivedEventHandler(process_OutputDataReceived);
            process.Exited -= new EventHandler(process_Exited);

        }
    }
}

void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    if (e.Data != null)
    {
        byte[] b = System.Text.Encoding.Unicode.GetBytes(e.Data);
        // If you are in ASP.Net, you do a 
        // Response.OutputStream.Write(b)
        // to send the converted stream as a response
    }
}

void process_Exited(object sender, EventArgs e)
{
    // Conversion is finished.
    // In ASP.Net, do a Response.End() here.
} 
```

PS：我可以使用这个标准输出片段从 url 转换 'live'，但是 'ASP' 的东西是伪代码，还没有尝试过。

# grails - grails searchable - 避免嵌入实体的索引

> ID：11767091
> 
> 赞同：2
> 
> 时间：2012-08-01T20:29:44.247
> 
> 标签：grails, lucene, indexing, searchable

我正在玩可搜索的游戏，但遇到了我自己无法解决的问题。

有两个实体：

```
class Activity {
    static searchable = {
        only = ["title", "place"]
    }

    String title
    String place
    ActivityImage image
}

class ActivityImage {
    static searchable = false

    String name
    byte[] content
} 
```

现在我希望 Activity 是可搜索的，但不是 ActivityImage。尽管如此，searchable 会尝试创建一个索引，同时将 ActivityImage 考虑在内，这会导致 Tomcat 因 OutOfMemoryException 而崩溃。我已经尝试了很多东西，但不知道如何保持可搜索性:(

有人有想法吗？

干杯，

莫里茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T22:46:33.827

在创建索引时，这看起来像是可搜索插件中的一个错误，它会查询所有属性。我在这里记录了一个问题：http: [//jira.grails.org/browse/GPSEARCHABLE-233](http://jira.grails.org/browse/GPSEARCHABLE-233)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:19:42.277

Putting`static serchable`让您的搜索变得`ActivityImage`可搜索。如果它不应该是可搜索的，那么不要在该类中放置任何东西（即 remove `static searchable = false`）。

# c# - 如何从 app.config 中读取 - LibraryConfigUtilities

> ID：11767092
> 
> 赞同：2
> 
> 时间：2012-08-01T20:29:57.367
> 
> 标签：c#, .net, app-config

如何从下面的 app.config 文件中读取文化等值。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="LibrarySetting" type="LibraryConfigUtilities.ConfigurationSectionHandler, LibraryConfigUtilities" />
  </configSections>

  <LibrarySetting>
    <Country Culture="tr-TR" Currency="TRY" DailyPenaltyFee="5,25" PenaltyAppliesAfter="3">
      <WeekendSetting>
        <Weekend Day="6"/>
        <Weekend Day="0"/>
      </WeekendSetting>
      <HolidaySetting>
        <Holiday Date="25.11.2009"/>
        <Holiday Date="26.11.2009"/>
        <Holiday Date="27.11.2009"/>
      </HolidaySetting>
    </Country>
    <Country Culture="ar-AE" Currency="AED" DailyPenaltyFee="8.00" PenaltyAppliesAfter="4">
      <WeekendSetting>
        <Weekend Day="5"/>
        <Weekend Day="6"/>
      </WeekendSetting>
      <HolidaySetting>
        <Holiday Date="25.11.2009"/>
        <Holiday Date="26.11.2009"/>
        <Holiday Date="27.11.2009"/>
      </HolidaySetting>
    </Country>
  </LibrarySetting>
</configuration> 
```

我的程序中有以下代码。我想从上面的 app.config 中读取值。

```
private List<Country> settingList = new LibrarySetting().LibrarySettingList; 
```

我加了

```
using LibraryConfigUtilities; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:00:18.157

怎么用`ConfigurationManager.GetSection("LibrarySetting");`

看看这是否能帮助你到任何地方。

使用此链接作为参考，有一些很好的帮助。[应用配置组帮助](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration#sectiongroups)

# c# - 用LINQ将select中两列的结果合并到一个数组中？

> ID：11767093
> 
> 赞同：7
> 
> 时间：2012-08-01T20:30:01.373
> 
> 标签：c#, linq

基本上我希望选择两个字符串列并将它们全部放入一个字符串数组中。现在我必须做两次选择并结合结果。这不是什么大不了的事，我只是觉得它看起来很尴尬。关于如何使用一个 linq 语句实现相同目标的任何建议？这是我用来搞砸的一个测试用例：

```
[TestFixture]
  public class test {

    public class Values {
      public string Present { get; set; }
      public string Previous { get; set; }
      public bool Flag { get; set; }
    }

    [Test]
    public void test1() {

      var list = new List<Values> {
        new Values { Present = "present1", Previous = "previous1", Flag = false },
        new Values { Present = "present2", Previous = "previous2", Flag = false },
        new Values { Present = "present3", Previous = "previous3", Flag = true },
        new Values { Present = "present4", Previous = "previous4", Flag = true }
      };

      var r1 = list.Where(c => c.Flag).Select(c => c.Present);
      var r2 = list.Where(c => c.Flag).Select(c => c.Previous);
      var combined = r1.Concat(r2);

      Assert.AreEqual(4, combined.Count());
    }
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T20:38:41.147

使用的替代解决方案`SelectMany`（它保留重复项）：

```
var combined = list.Where(c => c.Flag)
                   .SelectMany(c => new[] { c.Present, c.Previous });
Assert.AreEqual(4, combined.Count()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:36:38.097

列表中字符串的最终排序是否重要？如果没有，这似乎是完成此任务的最清晰方法：

```
var strings = new List<String>();
foreach (var value in list.Where(c => c.Flag))
{
    strings.Add(value.Present);
    strings.Add(value.Previous);
} 
```

# delphi - datasnap TSocket 连接挂起

> ID：11767097
> 
> 赞同：2
> 
> 时间：2012-08-01T20:30:12.260
> 
> 标签：delphi, datasnap

我有一个 Datasnap 应用程序（Delphi 7），它使用 TSocketConnectiom 连接到应用程序服务器。如果我的应用程序在打开客户端数据集后长时间处于空闲状态，大多数情况下当我想刷新客户端数据集时，应用程序会冻结而不会引发任何异常。似乎连接已断开并且 Socketconnection 不知道这一点。我我经常遇到这个问题，我不确定在哪里可以找到解决方案。这可能是 TSocketconnection 中的错误吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:04:35.973

防火墙有时会在一段时间后丢弃不活动的 TCP 连接，以保持低缓存使用率。在这种情况下，它有助于调用一些服务器方法（可能每五分钟一次）。

如果服务器端 DataSnap 会话的“设置和拆卸”代码不消耗资源，您还可以在所有操作之间断开和重新连接 DataSnap 客户端。这将启动一个新的 TCP 连接，执行并关闭它。

# python - Python：提取特定范围内的数字数据

> ID：11767099
> 
> 赞同：2
> 
> 时间：2012-08-01T20:30:35.557
> 
> 标签：python, count, range

我是一名 Python 初学者，试图计算大数据集中某些大小的数量。原始数据位于由制表符分隔的文本文件中。我有不同动物的“名称”（字符串，但每一行看起来像一个列表）和不同行中的“大小”（整数）。我想计算在一定大小范围内的所有动物的数量，在 10-30 之间。

到目前为止，我已经成功计算了我拥有的每个“名称”中有多少个，但没有指定“大小”。我的代码在下面，我得到了任何错误，但它只是被忽略了。有人可以帮我为什么忽略这些代码吗？提前谢谢你的帮助！

```
import csv, collections

reader=csv.reader(open('C:\Users\Owl\Desktop\Data.txt','rb'), delimiter='\t')
counts=collections.Counter()

for line in reader:
   Name=line[1]
   Size=line[10]
   counts[Name]+=1

for (Name, count) in counts.iteritems():
   if 10<=Size<=30:
      print '%s: %s' % (Name, count) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:36:46.537

如所写，`Size`将永久设置为文件中的最后一个大小值，它不会与`Name`.

通过 for 循环的每一轮`Size`都设置为`line[10]`，但它不存储在循环范围之外的任何内容中。`Name`间接存储在计数器中。所以下一次循环运行时，值会`Size`更改为下一个动物的大小。

每只动物是否在数据中多次出现？

您将需要稍微复杂一点的数据结构，或者在循环文件时查看大小。

如果您不介意忽略尺寸范围之外的动物：

```
for line in reader:
    size = float(line[10])
    if 10 <= size <= 30:
        name = line[1]
        counts[name] += 1

for name, count in counts.iteritems():
    print '%s: %s' % name, count 
```

（注意：我已更改原始代码的大小写和空格以匹配 Python 推荐的样式指南 pep8。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:34:44.040

```
Size=line[10] 
```

做`Size`一个字符串。

```
10<=Size<=30 
```

`ints`与字符串 ( `Size`)进行比较。

```
In [3]: 10 <= '20' <= 30
Out[3]: False 
```

要解决此使用：

```
try:
    Size = float(line[10])
except (ValueError, IndexError):
    continue 
```

以上将`try...except`导致您的程序跳过 csv 文件中没有第 11 列或其中包含无法转换为浮点数的字符串的行。

* * *

在 Python2 中，`int`s 比较小于`string`s。

```
In [4]: 10 <= '1'
Out[4]: True 
```

（[信不信](https://stackoverflow.com/a/3270689/190597)由你，因为`i`in在字母表中的字符串之前... `int`）`s`

在 Python3 中，引发了 TypeError。

```
Python 3.2.2 (default, Sep  5 2011, 22:09:30) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 10 <= '1'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: int() <= str() 
```

哈利路亚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:48:48.943

python 的一个很酷的功能是字典中的键可以是非常高级的东西，例如...... tadaaa！......*元组*（或日期，或很多东西......只要它是可*散列*的，正如 JF Sebastian 指出的那样- 没有什么是非法的哈希，在这里-)。将它与正则表达式结合起来，你就有了一个非常漂亮的“大小分类器” **:-)**：

```
sizesFromFile = [
    "Name: Cat, Size: 3.2",
    "Name: Dog, Size: 4.2",
    "Name: BigFoot, Size: 12",
    "Name: Elephant, Size: 31.4",
    "Name: Whale, Size: 85.99",
]

import re
import sys
regex = re.compile(r"^Name:\s*(?P<name>\w+),\s+Size:\s+(?P<size>[\d\.]+)")

myRanges = {
    (0, 10): list(),
    (11, 20): list(),
    (21, 30): list(),
    (31, sys.maxint): list()
}

for line in sizesFromFile:
    match = regex.match(line)
    if match is not None:
        print "Success parsing %s, %s" % (match.groupdict()["name"], match.groupdict()["size"])
        name = match.groupdict()["name"]
        size = float(match.groupdict()["size"])
        for myRange in myRanges:
            if size >= myRange[0] and size <= myRange[1]:
                myRanges[myRange].append(name)

print "This is what I got: %s" % (myRanges) 
```

输出：

```
This is what I got: {(21, 30): [], (11, 20): ['BigFoot'], (0, 10): ['Cat', 'Dog'], (31, 2147483647): ['Elephant', 'Whale']} 
```

虽然我很确定这是非常不理想的，但速度很快......但它仍然很酷，对吧？

# performance - 剖析速度函数

> ID：11767100
> 
> 赞同：0
> 
> 时间：2012-08-01T20:30:39.550
> 
> 标签：performance, sql-server-2005, function

我想知道是否有办法测量函数的性能。在部分。

我知道您能够测量完成该功能所需的总时间，但是有没有办法测量一个功能中的各个查询？

只是想知道，因为我找不到我的功能性能的瓶颈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:21:55.743

大多数情况下，当您看到估计的执行计划和实际执行计划之间存在重大差异时，这是因为您的统计数据没有（曾经）更新过。因此，SQL Server 不知道哪些表的数据少，哪些表的数据量大，等等，并且更有可能生成虚假计划（估计的和实际的），或者错误计算估计的计划成本。实际计划基于计划的真实、准确成本，但是当计划与最优计划相差甚远时，这种准确性对于确定瓶颈的价值就很小了。

要更正此问题，请发出该`UPDATE STATISTICS`语句或执行该`sp_updatestats`过程。

无论您是否有最新的统计数据，看到您的函数的 100% 实际值很可能是空数据库或几乎空数据库的影响。

在优化性能时，请确保您的数据库几乎真实地填充了大量数据（每个表中的记录数量是您对生产的预期的两倍；但请保持预期的粗略比例）。使用空的或完全不成比例的过度膨胀的数据库来寻找性能瓶颈并没有多大意义。查询计划会有所不同，即使计划碰巧是相同的，瓶颈也可能在生产环境之外的其他地方。

# sql - 在查询中动态指定数据库名称

> ID：11767104
> 
> 赞同：1
> 
> 时间：2012-08-01T20:30:51.703
> 
> 标签：sql

我有这个 Monster SQl 查询，它希望从暂存数据库中获取数据，在目标数据库上进行连接，并在目标表上插入/更新数据。

一个简化的格式会是这样的

```
MERGE INTO SOURCEDB.SCHEMA.DESTIANTIONTABLE AS TARGET
USING (SELECT COLA, COLB, COLC FROM STAGEDB.SCHEMA.SOURCE A INNER JOIN SOURCEDB.Schema,TABLEA) AS SOURCE
ON TARGET.ID = SOURCE.ID
WHEN MATCHED THEN UPDATE--

WHEN NOT MATCHED INSERT 
```

我可以动态设置暂存数据库名称吗，查询很大，所以我不想使用 exec SQl 语法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:00:37.963

您应该能够使用同义词。

```
DROP SYNONYM syn_a;
CREATE SYNONYM a FOR STAGEDB.SCHEMA.SOURCE;
DROP SYNONYM syn_b;
CREATE SYNONYM b FOR STAGEDB.SCHEMA.TABLEA;
DROP SYNONYM syn_target;
CREATE SYNONYM target FOR SOURCEDB.SCHEMA.DESTINATIONTABLE;

MERGE INTO syn_target as TARGET
USING (SELECT COLA, COLB, COLC FROM syn_a as A INNER JOIN syn_b as B
) AS SOURCE
ON TARGET.ID = SOURCE.ID
WHEN MATCHED THEN UPDATE--

WHEN NOT MATCHED INSERT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:19:21.783

Sql Server 不喜欢用@variables 替换数据库名称、模式或表，这可能是您所追求的，因此您需要使用 EXEC 以一种或另一种方式使用动态 sql 路由。

当您使用 nvarchar(max) 数据类型时，在 Sql Server 2005 及更高版本中执行非常大的 sql 语句没有问题。限制是 2Gb 或服务器内存中的较小者。

```
Declare @Sql nvarchar(max)
set @Sql = '
MERGE INTO SOURCEDB.SCHEMA.DESTIANTIONTABLE AS TARGET
USING (SELECT COLA, COLB, COLC FROM '+@StageDB+'.SCHEMA.SOURCE A INNER JOIN SOURCEDB.Schema,TABLEA) AS SOURCE
ON TARGET.ID = SOURCE.ID
WHEN MATCHED THEN UPDATE--

WHEN NOT MATCHED INSERT ...
'
exec (@Sql) 
```

# unix - 调整图像大小（jpeg 或解压缩图像）

> ID：11767106
> 
> 赞同：7
> 
> 时间：2012-08-01T20:31:00.387
> 
> 标签：unix, opengl, opencl, image-resizing

在我的最后一个问题中，我问是否有比我想象的更好的[旋转图像的方法。](https://stackoverflow.com/questions/11396856/rotating-hundreds-of-jpegs-in-seconds-rather-than-hours)我最终发现了 jpegtran 并从那以后找到了[libjpeg-turbo](http://www.libjpeg-turbo.org/)。

现在我正在寻找一种比 imagemagick 和 graphicsmagick 更好的方法来调整图像（jpegs）的大小。

是否有专门的命令行工具可以比 imagemagick 或 graphicsmagick 更有效地调整图像大小？也许调整大小可以使用 opencl 或 opengl 在 GPU 上完成？

提供的硬件与另一篇文章中的相同：

*   英特尔凌动 D525 (1,8 Ghz)
*   移动 Radeon HD 5430 系列
*   4 GB 内存
*   SSD 垂直 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T03:48:29.853

检查此链接： http: [//leocharre.com/articles/faster-image-resizing-in-linux/](http://leocharre.com/articles/faster-image-resizing-in-linux/)

特别是作者提到 imgresize 比 imagemagick 快，而 epeg 非常快。

epeg ( [http://www.systhread.net/texts/200507epeg1.php](http://www.systhread.net/texts/200507epeg1.php) ) 似乎很好地记录了生成缩略图。如果质量足够好，这可能是解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:56:32.990

*   [OpenCL](http://www.khronos.org/opencl/)是个人计算机、服务器和手持/嵌入式设备中现代处理器的跨平台并行编程标准。它由 ATI 直接支持。您需要获得[AMD APP SDK（以前称为 AMD Stream SDK）](http://developer.amd.com/sdks/AMDAPPSDK/Pages/default.aspx)才能获得 GPU 支持（另请查看此[入门指南](http://www.thebigblob.com/getting-started-with-opencl-and-gpu-computing/)）。

*   看看[英特尔的 IPP - 集成性能原语](http://en.wikipedia.org/wiki/Integrated_Performance_Primitives)。它是用于多媒体和数据处理应用程序的多线程软件库。除其他功能外，它还具有调整图像大小的功能（双线性、最近邻等）。不幸的是，它不是免费的（最便宜的版本需要 199 美元）。

*   [VIPS](http://www.vips.ecs.soton.ac.uk/index.php?title=VIPS)是一个免费的图像处理系统。它声称，与大多数图像处理库相比，VIPS 需要的内存少且运行速度快，尤其是在具有多个 CPU 的机器上。有关其他类似系统的简单基准，请参阅[速度和内存使用页面。](http://www.vips.ecs.soton.ac.uk/index.php?title=Speed_and_Memory_Use)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:37:44.917

实际上，您可以使用 GIMP 的 CLI 选项进行大量这样的批量处理。

[http://www.gimp.org/tutorials/Basic_Batch/](http://www.gimp.org/tutorials/Basic_Batch/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:27:06.990

还有来自 Independent JPEG Group 的 djpeg 和 cjpeg，它们可以重新缩放和图像到 M/N 分数。不完美但非常快。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T16:00:03.060

只需使用 FFMpeg.exe。它可以调整大小、转换、改变质量等。它还适用于几乎所有已知类型的视频/音频/图片。它也适用于 linux/unix，并且有用 C++ 编写的开源代码。你可以在[这里](http://ffmpeg.zeranoe.com/builds/)（对于 Windows/编译的 exe）或[在这里](http://ffmpeg.org)（源代码等）获取它。
如果您正在开发程序，我建议您使用标准 GDIPlus 库。它用图片做所有事情。

# javascript - IE 8 的条件注释不起作用

> ID：11767108
> 
> 赞同：0
> 
> 时间：2012-08-01T20:31:06.693
> 
> 标签：javascript, jquery, html

我正在尝试为`SRC`IE 8 或更低版本的用户更改 iFrame 的属性。

这是我的代码：

```
 <script>
var i_am_old_ie = false;
<!--[if lte IE 8]>
i_am_old_ie = true;
<![endif]-->
</script>
    <script type="text/javascript">
    $(document).ready(function() {
if(i_am_old_ie) {
   $("#shop").attr("src","shopping_cart/browser_support.html"); 
} else {
    $("#shop").attr("src","shopping_cart/index.html"); 
}      
});
</script> 
```

它检测到它是 IE……但仍将所有 IE 用户发送到`shopping_cart/browser_support.html`. 即使我使用 IE 9，它也会将我发送到那里。7 或 8 也是一样。

但它会将所有其他不使用 IE 的用户发送到`shopping_cart/index.html`（这是正确的）。

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T20:33:12.577

您不能在脚本标签内插入。它需要在外面。

```
<script>
var i_am_old_ie = false;
</script>

<!--[if lte IE 8]>

<script>
i_am_old_ie = true;
</script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:35:17.203

正如其他人提到的，您不能在`<script>`标签之间使用 HTML 条件语句。

但是，这应该有效：

```
if (document.all && !document.getElementsByClassName) {
    i_am_old_ie = true;
} 
```

以上只能在IE8或以下运行

编辑：

一些很好的例子[链接](http://tanalin.com/en/articles/ie-version-js/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:36:02.903

JavaScript 中的条件注释有不同的语法。 [@cc_on 在 JavaScript 中是什么意思？](https://stackoverflow.com/questions/1341460/what-does-cc-on-mean-in-javascript)有细节。

[Wikipedia 的 Conditional comment](http://en.wikipedia.org/wiki/Conditional_comment#Conditional%5FComment%5Fin%5FJScript) page 有一个使用它的版本切换示例。

> ```
> <script>
> /*@cc_on
> 
>   @if (@_jscript_version == 10)
>     document.write("You are using IE10");
> 
>   @elif (@_jscript_version == 9)
>     document.write("You are using IE9");
> 
>   @elif (@_jscript_version == 5.8)
>     document.write("You are using IE8");
> 
>   @elif (@_jscript_version == 5.7 && window.XMLHttpRequest)
>     document.write("You are using IE7");
> 
>   @elif (@_jscript_version == 5.6 || (@_jscript_version == 5.7 && !window.XMLHttpRequest))
>     document.write("You are using IE6");
> 
>   @elif (@_jscript_version == 5.5)
>     document.write("You are using IE5.5");
> 
>   @else
>     document.write("You are using IE5 or older");
> 
>   @end
> 
> @*/
> </script> 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T20:32:49.953

条件 HTML 注释仅适用于 HTML。

JavaScript 不是 HTML。

这通常不是一个好主意，建议使用特征检测，但如果使用 jQuery，你可以这样做：

```
var i_am_old_ie = $.browser.msie && ($.browser.version <= 8); 
```

# javascript - 如何使用 jQuery 为 redactor.js 中的脚注插件增加数字

> ID：11767115
> 
> 赞同：1
> 
> 时间：2012-08-01T20:31:39.153
> 
> 标签：javascript, jquery, increment

我正在为 redactor.js 开发一个插件，它允许用户添加脚注。最终脚注将被写入数据库上的一个单独的表中，但目前这只是一个模型 - 它是一个更大的大学项目的一部分，它只需要看起来像它在这个阶段工作。顺便说一句，我是一个 JS 初学者。

我在编辑器中添加了一个自定义按钮，该按钮使用回调运行该函数。如您所见，每次按下按钮时，fnCount 变量都会重置为 0。我不知道如何获取最后一个值并增加它。我在这里看到了一些类似的问题，但没有一个是完全相同的，因为我正在使用 redactor API 进行此操作。

这是我的代码：

```
// Insert footnote plugin

insertFootnote = function(){
    var fnCount = 0
    var fnAnchor = '<a href="#fn-' + ++fnCount + '"><sup>' + fnCount + '</sup></a>&nbsp'
    $('.edit').execCommand('inserthtml', fnAnchor);
}

// Initialise editor

$(document).ready(
    function()
    {       
        $('.edit').redactor({
            focus: true, 
            buttonsAdd: ['|', 'footnote', 'reference'], 
            buttonsCustom: {
                footnote: {
                    title: 'Insert footnote', 
                    callback: insertFootnote 
                },

            }
        });
    }
); 
```

我在这里举了一个例子：http: [//fclty.org/redactor/](http://fclty.org/redactor/)黑色按钮是添加无用脚注的按钮。白色按钮是一个不相关但同样无用的功能，因此可以忽略。

我意识到我现在所做的只是插入一个无处可去的锚，但一步一步，是吗？;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:27:25.943

如果我正确理解了这个问题，您只需将变量移动到外部范围：

```
var fnCount = 0

insertFootnote = function(){    
    var fnAnchor = '<a href="#fn-' + ++fnCount + '"><sup>' + fnCount + '</sup></a>&nbsp'
    $('.edit').execCommand('inserthtml', fnAnchor);
} 
```

现在该变量在每次调用时都不会设置为 0，而是最初设置为 0，然后在每次调用时递增。

如果该值应该与调用它的元素相关联，则可以使用它来存储它`data`。

# django - django-registration 登录并在一个页面上注册

> ID：11767116
> 
> 赞同：1
> 
> 时间：2012-08-01T20:31:42.543
> 
> 标签：django, django-registration

有没有一种好方法可以在一个页面上同时拥有 django-registration 的登录和注册表单？既然后端系统被强制执行，我就很难找到一种方法来做到这一点。是否有可以覆盖的视图允许您向其中添加两种表单？任何人以前做过这个或可以指向一篇关于这个的文章？

编辑：为了澄清我已经设置了整个 django-registration 和登录系统并正常工作，我只想在同一页面上获取两个表单。我无权了解他们的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:39:46.467

您始终可以覆盖默认登录和注册视图/模板。您可以查看此[链接](http://devdoodles.wordpress.com/2009/02/16/user-authentication-with-django-registration/)，看看这是否是您想要做的。然后，您可以阅读[Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/)以获取有关制作自定义登录和注册视图以及模板的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:23:12.183

只需在registration-html-template 中硬编码您的登录表单。它应该像一个魅力。

# regex - 如何提取与 XPATH 中的模式匹配的文本？

> ID：11767117
> 
> 赞同：6
> 
> 时间：2012-08-01T20:31:42.170
> 
> 标签：regex, xpath, pattern-matching

我的数据如下所示：

```
<value>v13772   @FBst0451145:w&lt;up&gt;1118&lt;/up&gt;; P{GD3649}v13772@
v13773  @FBst0451146:w&lt;up&gt;1118&lt;/up&gt;; P{GD3649}v13773@</value> 
```

如何在 XPATH 中处理此字符串以提取任何和所有 @FBst####### 数字？

我知道 xpath 匹配（）函数......但它只返回真或假。如果我想要匹配的字符串，那就不好了。我四处寻找，但找不到这个问题的令人满意的答案，这可能很常见。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T05:40:55.227

**除了 Michael Kay 的好答案之外，如果您只想使用该`replace()`功能，请使用**：

```
replace(.,'.*?(@FBst\d+).*','$1') 
```

**结果是**：

```
@FBst0451145
@FBst0451146 
```

**如果您只想要上述结果中的数字，请使用**：

```
replace(replace(.,'.*?(@FBst\d+).*','$1'),
          '[^0-9]+', ' ') 
```

**这产生**：

```
 0451145 0451146 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:44:59.113

我假设您也可以使用 XQuery。[FunctX](http://www.xqueryfunctions.com/)模块中的[get_matches()](http://www.xqueryfunctions.com/xq/functx_get-matches.html)函数应该适合您。[下载](http://www.xqueryfunctions.com/xq/download.html)支持您的 XQuery 版本的文件。然后在您需要其功能时导入该模块。

```
import module namespace functx = "http://www.functx.com" at "functx-1.0-doc-2007-01.xq";

functx:get-matches(string-join(//text()),'xyz') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:31:13.980

尝试

```
tokenize(value, '[^0-9]+') 
```

它应该返回由非数字序列分隔的标记序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:28:28.787

在 Dimitre 的帮助下，一个有效的正则表达式是：

```
replace(.,'.*?(@FBst\d+).*','$1 ','m') 
```

尽管除非换行符分隔每个目标字符串，否则它不起作用，但现在它会起作用。

谢谢大家！

# java - JPA Criteria Api 选择列为空的对象

> ID：11767118
> 
> 赞同：5
> 
> 时间：2012-08-01T20:31:44.590
> 
> 标签：java, jpa, criteria-api

我在 PostgreSQL 数据库中有一个表“单词”：

```
CREATE TABLE word
(
   word_id bigserial NOT NULL,
   word character varying(15) NOT NULL,
   counter integer NOT NULL,
   base_letters character varying(15),
   CONSTRAINT word_pk PRIMARY KEY (word_id )
) 
```

我有一个 DAO 方法，它必须在“base_letters”列的表中找到所有单词。我一般使用Spring。我的方法：

```
 public List<Word> getAllWordsWithoutBaseLetters() {
        CriteriaQuery<Word> c = cb.createQuery(Word.class);
        Root<Word> words = c.from(Word.class); 
        c.select(words).where(cb.isNull(words.get("base_letters")));
        TypedQuery<Word> q = entityManager.createQuery(c);
        List<Word> allWordsWithoutBaseLetters = q.getResultList();
        return allWordsWithoutBaseLetters;
    } 
```

不幸的是，我遇到了一个让我感到困惑的错误：

```
ERROR [org.springframework.scheduling.support.MethodInvokingRunnable] - Invocation of method 'setBaseLettersToAllWordsWithoutThem' on target class [class $Proxy48] failed
java.lang.IllegalArgumentException: Unable to resolve attribute [base_letters] against path
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.unknownAttribute(AbstractPathImpl.java:118)
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.locateAttribute(AbstractPathImpl.java:223)
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.get(AbstractPathImpl.java:194)
    at pl.net.grodek.snd.dao.WordDaoImpl.getAllWordsWithoutBaseLetters(WordDaoImpl.java:95)
    at pl.net.grodek.snd.service.WordServiceImpl.setBaseLettersToAllWordsWithoutThem(WordServiceImpl.java:175)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy48.setBaseLettersToAllWordsWithoutThem(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
    at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)
    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

请解释一下有什么问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T20:35:20.837

您需要使用**java 属性**的名称而不是**表列**的名称。

这适用于*JPQL 查询*，而不是*本机查询*（基于 SQL）。

假设该属性被调用`baseLetters`，您可以替换为：

```
c.select(words).where(cb.isNull(words.get("baseLetters"))); 
```

# jquery - jQuery似乎撤消了css webkit悬停效果

> ID：11767123
> 
> 赞同：0
> 
> 时间：2012-08-01T20:32:05.290
> 
> 标签：jquery, css

我有几个带有 .note 类的 div 和以下 css 代码：

```
 .note{
            background: #eff9ff;
            -webkit-transition: background .5s;
        }

            .note:hover{
                background: #d6e4f2;
            }

            .note:active{
                background: #bfcdda;
            } 
```

由于 webkit 动画，它会在悬停在 div 上后平滑地改变颜色。

但是，我也使用 jQuery 来完全根据属性“selectednote”在单击后更改 div 的背景，并且只有在再次单击后才撤消该属性，如下所示：

```
$('.note').click(function(){
if($(this).attr('selectednote')=='no'){
    $(this).attr('selectednote','yes');
    $(this).css('background','#bfcdda');
}else if($(this).attr('selectednote')=='yes'){
    $(this).attr('selectednote','no');
    $(this).css('background','#eff9ff');
}
}); 
```

一切正常，但只要我单击 div 并更改其背景，css 悬停和活动效果就不再起作用了。

也许我应该完全摆脱css？我试图想出以下 jQuery 的悬停效果，但无济于事：

```
$('.note').mouseover(function(){
$(this).animate({
    background: '#d6e4f2'
},500);
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:39:06.747

我已经添加`!important`到`:hover`规则中，这似乎可以解决它。

```
.note:hover{
    background: #d6e4f2 !important;
} 
```

[**演示**](http://jsfiddle.net/heSup/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:43:36.320

您可以为此坚持使用 CSS，而无需使用类似的无效自定义属性。

```
.note.selected {
  background: #bfcdda;
}​ 
```

类的简单切换`selected`。您也可以使用它来调整它`.data()`。

```
$('.note').click(function(){
  $(this).toggleClass("selected");
});​ 
```

[看到它工作](http://jsfiddle.net/hDMNC/)。

# android - Android Path：合并多个路径并在合并路径上绘制文本

> ID：11767124
> 
> 赞同：1
> 
> 时间：2012-08-01T20:32:08.863
> 
> 标签：android, text, path, merge

在我的应用程序中，我必须合并几条短路径来创建一个更大的路径。例子：

```
Path p1 = new Path();
Path p2 = new Path();
p1.moveTo(0,0); p1.lineTo(200,200);
p2.moveTo(200,200); p2.lineTo(400,0);

p1.addPath(p2); //merge

Paint paint = new Paint();
paint.setStyle(Paint.Style.STROKE);
paint.setColor(Color.BLACK);

canvas.drawColor(Color.WHITE);
canvas.drawPath(p1, paint); 
```

这工作得很好，并在画布上绘制了一个整洁的 V 形。

但是，如果我想使用合并路径进行文本渲染（使用`Canvas.drawTextOnPath()`），它只会沿着路径的第一部分（即原始路径）绘制文本`p1`。不过，我想使用整个路径进行文本渲染。那么有没有办法实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:55:11.627

我自己想通了......所描述的行为似乎是一个[已知问题](http://code.google.com/p/android/issues/detail?id=1342)。我想这是因为每条路径在内部都被视为一个单独的“轮廓”，不能与另一个路径合并。

但是，我能够通过简单的“hack”获得所需的行为。不过，这只适用于基于行的路径。这是代码（最小示例），如果有人感兴趣的话......

```
public class MyPath extends Path {

    private ArrayList<Float> points = new ArrayList<Float>();

    public void addPath(MyPath src) {
        this.points.addAll(src.getPoints());
        super.rewind();
        super.moveTo(this.points.get(0), this.points.get(1));
        for (int i = 2; i < this.points.size(); i += 2) {
            super.lineTo(this.points.get(i), this.points.get(i+1));
        }
    }

    @Override
    public void moveTo(float x, float y) {
        this.points.add(x);
        this.points.add(y);
        super.moveTo(x, y);
    }

    @Override
    public void lineTo(float x, float y) {
        this.points.add(x);
        this.points.add(y);
        super.lineTo(x, y);
    }

    public ArrayList<Float> getPoints() {
        return this.points;
    }

} 
```

这个用法很简单：

```
MyPath p1 = new MyPath();
MyPath p2 = new MyPath();
p1.moveTo(0,0); p1.lineTo(200,200);
p2.moveTo(200,200); p2.lineTo(400,0);

p1.addPath(p2); //merge

Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setColor(Color.BLACK);
paint.setTextSize(40);

canvas.drawColor(Color.WHITE);
canvas.drawTextOnPath("Lorem ipsum dolor sit amet", p1, 0, 0, paint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:36:47.927

`Path.addPath()`似乎仍在进行中。`Path`您可以通过将多个段直接附加到`Path`您将绘制的内容来避免使用它而不进行扩展。

```
public void insertPart1( Path path ) {
    p1.moveTo(0,0); p1.lineTo(200,200);
}
public void insertPart2( Path path ) {
    p2.lineTo(200,200); p2.lineTo(400,0);
}

{
    Path p = new Path();
    insertPart1( p );
    insertPart2( p );

    Paint paint = new Paint();
    paint.setStyle(Paint.Style.STROKE);
    paint.setColor(Color.BLACK);

    canvas.drawColor(Color.WHITE);
    canvas.drawPath(p1, paint);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:39:35.943

你必须使用两条路径吗？您可以尝试使用类似：

```
Path p1 = new Path();
p1.moveTo(0,0); p1.lineTo(200,200);
p1.lineTo(400,0); 
```

然后使用`Canvas.drawTextOnPath()`on`p1`

希望有帮助。

# java - 杰克逊没有按我的意愿命名字段

> ID：11767125
> 
> 赞同：0
> 
> 时间：2012-08-01T20:32:09.283
> 
> 标签：java, json, jackson

> **可能重复：**
> [序列化和反序列化期间 JSON 属性的不同名称](https://stackoverflow.com/questions/8560348/different-names-of-json-property-during-serialization-and-deserialization)

我在我的网站上使用 Jackson 来创建一个选项字符串，以与需要 JSON 的图表工具一起使用。例如，我有一个

```
public class Chart {
  Integer zIndex = 3;

  public Integer getZIndex() {
    return zIndex;
  }
} 
```

所以然后我在我的图表上使用杰克逊的 objectMapper 并且输出是 {"zindex":3} 我的问题是图表工具不会接受 "zindex" 但坚持使用驼峰式 "zIndex"。我该怎么做才能在输出中正确命名它？我已经尝试过@JsonProperty("zIndex") 但这会在输出中生成两个副本，zindex 和 zIndex，这令人困惑且丑陋。另外，我正在使用 lombok 来生成我的吸气剂，如果这有所作为的话。

我试过了：

```
public class FieldNamingStrategy extends PropertyNamingStrategy {

@Override
public String nameForField(MapperConfig<?> config, AnnotatedField field, String defaultName) {
    return field.getName();
}

} 
```

然后 objectMapper.setPropertyNamingStrategy()

但这没有用。

我的配置看起来像

 `````
String json = null;
StringWriter stringWriter = new StringWriter();
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
//TODO: figure this out
objectMapper.setPropertyNamingStrategy(new FieldNamingStrategy());
try {
final JsonGenerator jsonGenerator = objectMapper.getJsonFactory().createJsonGenerator(stringWriter);
jsonGenerator.useDefaultPrettyPrinter();
objectMapper.writeValue(jsonGenerator, object);
json = stringWriter.toString(); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:47:18.197

确保您使用的是现代版本的 Jackson：1.9 改进了属性处理，因此即使添加到其中一个部分，注释也可以工作。

或者，如果您不能这样做，只需在`@JsonProperty`getter 和字段中添加注释。

您的主要问题实际上是名称本身是“不合规的”，这意味着这些部分可能不匹配。``

# html - 以编程方式将 Excel 电子表格转换为 HTML

> ID：11767129
> 
> 赞同：1
> 
> 时间：2012-08-01T20:32:25.210
> 
> 标签：html, winforms, excel, xslt, xls

我有一个问题希望有人能回答。我正在使用 .Net 3.5 Winforms 和 SpreadSheetGear 2010 组件，需要知道是否有免费或低成本的方法可以将 Excel 工作簿转换为 HTML？有没有好的 XSLT 转换或一些低成本或开源组件？我可以以编程方式将 Excel 文件保存到 OpenXMLWorkbook，但该组件不允许保存到 html。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:41:18.363

使用 ASP.Net 并按照[Excel to DataGrid Samples](http://www.spreadsheetgear.com/support/samples/datagrid.aspx)演示的代码进行操作。您始终可以`System.Web`在项目中包含对的引用。

但是，即使没有 ASP.Net，并且坚持使用 .Net 客户端配置文件，从 a 生成 HTML 表`DataTable`也很简单。使用[AntiXss 库](http://msdn.microsoft.com/en-us/security/aa973814.aspx)([下载](http://www.microsoft.com/en-us/download/details.aspx?id=28589)) 将数据编码为 html。然后用`StringBuilder`. 这是可用于将 any 转换`DataTable`为 html的扩展方法`<table>`：

```
using AntiXss = Microsoft.Security.Application;

...

public static String ToHTML(this DataTable dt)
{
    StringBuilder html = new StringBuilder("<table><thead><tr>");
    foreach (DataColumn col in dt.Columns)
    {
        html.AppendFormat("<td>{0}</td>",
            AntiXss.Encoder.HtmlEncode(col.ColumnName));
    }
    html.Append("</tr></thead><tbody>");
    foreach (DataRow row in dt.Rows)
    {
        html.Append("<tr>");
        foreach (var data in row.ItemArray)
        {
            html.AppendFormat("<td>{0}</td>",
                AntiXss.Encoder.HtmlEncode(data.ToString()));
        }
        html.Append("</tr>");
    }
    html.Append("</tbody></table>");
    return html.ToString();
} 
```

要获取整个工作簿的 html，另一种扩展方法是：

```
public static List<String> ToHTML(this IWorkBook wb)
{
    List<String> tables = new List<String>();
    DataSet ds = wb.GetDataSet(GetDataFlags.FormattedText);
    foreach (DataTable dt in ds.Tables)
    {
        tables.Add(dt.ToHTML());
    }
    return tables;
} 
```

# java - JTextPane 撤消和重做整个单词

> ID：11767130
> 
> 赞同：2
> 
> 时间：2012-08-01T20:32:26.600
> 
> 标签：java, swing, jtextpane

我使用[UndoManager](https://stackoverflow.com/q/2547404/1369488)将撤消和重做功能添加到我的 JTextPane。但是，每次输入文本时它都会保存文本，因此它会撤消到最后一个字母。我怎样才能使它撤消到最后一个字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:43:44.770

[http://java-sl.com/tip_merge_undo_edits.html](http://java-sl.com/tip_merge_undo_edits.html)这是这种合并编辑的一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:48:36.173

使用[`UndoableEdit#addEdit()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/undo/UndoableEdit.html#addEdit%28javax.swing.undo.UndoableEdit%29). 如果您使非空白编辑在撤消堆栈上粘在一起（通过此方法相互吸收）和空白编辑，那么下一个撤消将作用于最后一个工作或最后一个空白间隙，这就是您想要的。

# xcode - 有没有办法解码在 Xcode 中出现崩溃的十六进制代码？

> ID：11767133
> 
> 赞同：0
> 
> 时间：2012-08-01T20:32:43.243
> 
> 标签：xcode, string, crash, hex

有没有办法解码在 Xcode 中出现崩溃的十六进制代码？我在网上查找了十六进制转换器，但它只是胡言乱语。就像，我收到一个十六进制代码错误，内容如下：

> (0x3901f56b 0x32f1997f 0x3901f261 0x355a906d 0x35dfe1f9 0x35582e9b 0x38f76c63 0x35ea7fe1 0x35e29607 0x35d07821 0x35e298a1 0x35e2d56f 0x35d241f3 0x35d23691 0x283e17b 0x5e8a7 0x35cf7a1d 0x35d68de9 0x356218bf 0x38ff009f 0x38fefd51 0x38fee939 0x38f6cc1d 0x38f6caa9 0x3918633b 0x35c7b535 0x4bbb1 0x4b860)

我去了一个十六进制字符串转换器，它给了我这个：

> ??V°?/—ð?&?U©Ð?]þ?U‚é°?vÆ0?^§þ?^)`p?]‚?^)Š?^-Vð?]$0?]# i?ƒá{?^Šp?\÷¡¡?]hÞ?V!‹ð?ð ð?ïÕ?î“?lÁÐ?lª?'†3°?{SP?»±?K†?

我还将我的代码视为十六进制，并且这些字符没有出现在任何地方的代码中。有没有办法对此进行解码，或者它只是对人类没有任何意义的计算机废话？

# android - 我可以将外部应用程序中的活动启动到我自己的片段中吗？

> ID：11767137
> 
> 赞同：0
> 
> 时间：2012-08-01T20:32:57.267
> 
> 标签：android, android-fragments

假设我正在构建一个名为`myApp`. 而且我知道在设备上是另一个名为的应用程序`bobsApp`，它有一个名为的活动`bobsApp.someActivity` 让我们说在 myApp 我有一个带有两个片段的活动，`fragA`我是否`fragB` 能够点击`myApp`，`fragA`将 bobsApp.someActivity 启动到`myApp` `fragB`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:37:00.227

不可以。您只能启动 bobsApp，但不能在您的应用中启动相同的 Activity。这将导致许多安全问题。

# python - 在多个值处拆分numpy数组？

> ID：11767139
> 
> 赞同：6
> 
> 时间：2012-08-01T20:33:05.520
> 
> 标签：python, arrays, numpy, split

根据我的问题 [，在大型 numpy 数组中近似比较值的最快方法是什么？](https://stackoverflow.com/questions/11765452/fastest-way-to-approximately-compare-values-in-large-numpy-arrays) 我正在寻找根据需要拆分数组的方法。我有一个排序数组（二维，按一列中的值排序），并希望将其拆分为多个数组。基于索引的长度不相等，但值的范围相等。我发现的最接近的问题是 [在 numpy 中的值处拆分数组，](https://stackoverflow.com/questions/5274243/split-array-at-value-in-numpy) 但我想做一些不同的事情。假设我有（一维示例）：

```
[0.1, 3.5, 6.5, 7.9, 11.4, 12.0, 22.3, 24.5, 26.7, 29.9] 
```

我想把它分成范围 [0,10) [10,20) [20,30] 所以它变成

```
[0.1, 3.5, 6.5, 7.9] [11.4, 12.0] [22.3, 24.5, 26.7, 29.9] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T20:37:58.690

第一种情况可以这样完成

```
>>> A = np.array([0.1, 3.5, 6.5, 7.9, 11.4, 12.0, 22.3, 24.5, 26.7, 29.9])
>>> split_at = A.searchsorted([10, 20])
>>> B = numpy.split(A, split_at) 
```

如果我正确理解了您的问题，这也适用于 2d，例如：

```
>>> A = array([[  0.1,   0\. ],
               [  3.5,   1\. ],
               [  6.5,   2\. ],
               [  7.9,   3\. ],
               [ 11.4,   4\. ],
               [ 12\. ,   5\. ],
               [ 22.3,   6\. ],
               [ 24.5,   7\. ],
               [ 26.7,   8\. ],
               [ 29.9,   9\. ]])
>>> split_at = A[:, 0].searchsorted([10, 20])
>>> B = numpy.split(A, split_at)
>>> B
[array([[ 0.1,  0\. ],
       [ 3.5,  1\. ],
       [ 6.5,  2\. ],
       [ 7.9,  3\. ]]),
 array([[ 11.4,   4\. ],
       [ 12\. ,   5\. ]]),
 array([[ 22.3,   6\. ],
       [ 24.5,   7\. ],
       [ 26.7,   8\. ],
       [ 29.9,   9\. ]])] 
```

# javascript - 使用表单和POST方法通过Javascript获取URL参数

> ID：11767140
> 
> 赞同：0
> 
> 时间：2012-08-01T20:33:07.163
> 
> 标签：javascript, forms, post, methods, parameters

因此，假设有一个 URL [http://example.com/index.html/hello/hi](http://example.com/index.html/hello/hi)，其中“hello”和“hi”是参数。

您将如何使用 javascript 和表单方法 POST 来提取参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:38:28.763

这可以工作...

```
var secondvar = window.location.href.split('/')[window.location.href.split('/').length];
var firstvar = window.location.href.split('/')[window.location.href.split('/').length-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:11:19.327

你的主题有点模糊。然而，我想我已经做了一个可能性的例子。 [http://jsfiddle.net/tive/LjbPq/](http://jsfiddle.net/tive/LjbPq/)

这个想法是拆分每个字符 / 的 URL，无论您以何种方式收到它。

```
var parts = document.URL.split("/"); 
```

由于 split() 返回一个数组（从零开始），因此您需要从总长度中分散 1 以获取最后一个索引。

```
var lastPart = parts[parts.length - 1]; 
```

在 for 循环中运行它，您应该会明白示例中出现的想法。

*   [document.URL 上的文档](http://www.w3schools.com/jsref/prop_doc_url.asp)以检索完整的 URL
*   [window.location 上的文档](http://www.w3schools.com/jsref/obj_location.asp)以使用 url 的属性（协议、href、路径名...）

# php - 在 Web 应用程序中保持资源处于活动状态

> ID：11767146
> 
> 赞同：1
> 
> 时间：2012-08-01T20:33:57.227
> 
> 标签：php, web-applications, imap

我正在创建一个 IMAP/POP3 网络客户端。最初我计划使用 imap 库在 PHP 中执行此操作，但我担心效率。

加载收件箱页面后，PHP 脚本会连接 imap 服务器并对其进行身份验证，然后获取最新电子邮件的概览。页面加载完成后，php 脚本结束，与 imap 服务器的连接丢失。

这是一个问题，因为用户请求的任何新操作（例如阅读或删除电子邮件）都必须重新通过连接/身份验证过程。这大大减慢了速度。

是否有跨页面加载保留与 imap 服务器的连接？理想情况下，我想在 PHP 中执行此操作，但我愿意使用其他技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:45:44.730

如果我在 PHP 中实现这一点，我将建立一个基于凭据的连接，该连接在服务器上保留一段时间（例如 30 分钟），每当客户端向服务器发送请求时，服务器都会通过以下方式查找连接用户名或其他凭据并使用该连接。如果时间用完而用户没有发出请求，您可以为请求创建一个新连接。

# html - 如何通过rails中的数据字段设置id？

> ID：11767151
> 
> 赞同：0
> 
> 时间：2012-08-01T20:34:24.183
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, haml

这是我的代码的一部分：

```
- @search_trees.each do |search_tree|
        %ul
          = link_to search_tree.getname(search_tree.designation_id), {:controller => "search_trees", :action => "catalog", :cat => search_tree.STR_ID}, :class => 'catalog-click', :id => search_tree.STR_ID 
```

如您所见，我正在为链接设置类和 id，但是如何为 %ul 标签设置 id？像这样 %ul#=search_tree.STR_ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:54:25.587

我自己找到了答案（如果有人有更好的解决方案，请给出）：

```
%ul{:id => search_tree.STR_ID} 
```

# django - 在内网上通过 nfs 实现 Django 静态内容

> ID：11767154
> 
> 赞同：1
> 
> 时间：2012-08-01T20:34:43.697
> 
> 标签：django

我正在部署一个基于大量静态内容的 Django 应用程序。使用该应用程序的所有计算机都位于 Intranet 上，静态内容可通过 nfs 获得。

django 是否可以配置为让用户通过他们的 nfs 挂载获取静态数据，而不是通过 Web 服务器强制获取？

如果我在模板中有这个：

```
<img src="/path/to/img.png"/> 
```

浏览器正在从

```
http://localhost:8000/path/to/img.png 
```

我想要做的是让客户端将其视为本地路径，而不是向服务器询问它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:16:48.797

要引用文件系统中的文件（NFS 挂载或其他方式），要使用的 URI 是`file:///path/to/file`. 但是，这**不适**用于您的情况 -`<a href="file:///path">`仅适用于从本地文件系统加载的静态 HTML 文件。

出于安全原因，不允许网页访问本地文件系统。请参阅[为什么我不能执行 <img src="C:/localfile.jpg">？](https://stackoverflow.com/questions/4090712/why-cant-i-do-img-src-c-localfile-jpg)

如果您想加快对静态文件的访问速度，一种选择是设置一个单独的轻量级网络服务器，专门为您的静态文件提供服务（可能是[nginx](http://nginx.org/)？或[lighttpd](http://www.lighttpd.net/)？或[mongoose](http://code.google.com/p/mongoose/)？）并使用该服务器的 URL 作为你的`MEDIA_URL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:43:23.470

嗯，你应该试试看。如果 django 将静态内容路径视为另一个常量，那么您的网络共享路径应该可以正常工作。但是，如果不是，那么您可以尝试定义自己的常量，例如：static_on_network_share 或其他东西，并在模板/html 中加载内容时使用该常量。

# tomcat - tomcat 支持安全的 websocket 吗？

> ID：11767157
> 
> 赞同：2
> 
> 时间：2012-08-01T20:34:47.223
> 
> 标签：tomcat, ssl, websocket, tomcat7

谷歌搜索 tomcat 和 websockets 揭示了许多关于如何在 Tomcat 中实现 WebSockets 以及如何设置 SSL/TLS 的页面，但不清楚如何使用这两者。在 SSL howto ( [http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html#Configuration](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html#Configuration) ) 中，创建了一个用于 HTTPS 的连接器。WSS 是否存在类似的连接器，如果存在，我应该为属性提供哪些确切的字符串值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:14:07.637

任何 Tomcat `<Connector>`（包括那些支持 HTTPS 的）都可以接受 websocket 请求。本质上，支持连接器（BIO、NIO、AJP，安全和非安全）和协议（HTTP、Comet、websocket）的任何组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T06:55:58.467

基本上，WebSocket 不像普通的 Socket 实现那样有自己的端口。相反，它使用与它部署的服务器相同的端口（例如，用于 tomcat 的 8080）。因此，如果您对连接器进行必要的更改以允许 https，您的 websocket 将自动使用 https 端口。

我推荐使用 Tomcat 版本 7.0.42 或更高版本，它与 WebSocket 稳定。

另请注意 - 您需要在客户端（浏览器/移动设备等）对 WebSocket 使用“wss”而不是“ws”。

# javascript - 茉莉花：在 url 中添加和读取查询字符串？

> ID：11767158
> 
> 赞同：2
> 
> 时间：2012-08-01T20:34:48.863
> 
> 标签：javascript, jasmine

简单地说，最后，我想从 url 中获取查询字符串并将其添加到我的 cookie 中。

我知道如何获取 cookie 集并且正在使用 Vanilla JS。

但是我想用 Jasmine 来测试所有错误的案例，而不仅仅是快乐的道路。

无论如何，如何在 Jasmine 中设置 url，以便我可以传递任何查询字符串（就像`http://www.blah.com?ref=yayayadaydayday`这样我可以在我的测试中使用`document.location.search`它并从那里获取它？

我猜你在 Jasmine 中模拟时会调用什么，但如果这是 rails，我会添加一个查询字符串，如：

```
 test "can get some results" do
    get :show, :q => shops(:one).name #how do i add this 'q' string in jasmine?!
    refute_nil assigns(:search)
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:24:21.940

问题是你不能模拟`window.location`。在[这个](https://stackoverflow.com/questions/4792281/mocking-window-location-href-in-javascript)和[这个](https://stackoverflow.com/questions/8919370/jasmine-mock-window-object)SO 中，他们想出了在你的函数中传递全局上下文，以便你可以模拟它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T12:51:18.180

我最近不得不做一些类似的事情，测试一组选项卡的一些代码，如果设置了 URL 哈希，则选择一个选项卡。我使用历史 API 来操作 URL：

```
loadFixtures('tabs-fixtures.html');
window.history.replaceState(null, null, '#three'); 
```

并且代码确实从 URL 中读取了哈希值。

我的测试设置使用 PhantomJS。我想其他浏览器也可以工作，除非你有一个旧的 IE 启动器。

# javascript - for循环中的多个随机结果？

> ID：11767159
> 
> 赞同：1
> 
> 时间：2012-08-01T20:34:51.820
> 
> 标签：javascript, jquery

我正在尝试创建 64 个正方形并为每个正方形赋予独特的背景颜色。我很接近，但我似乎只能得到一种随机颜色。

```
function randomCol() {
    return Math.floor(Math.random()*16777215).toString(16); 
}

$(function(){
  for(i=0; i<64; i++) {
        $('<div class="square"></div>').insertAfter(".starter");
        $(".square").css({'background':'#' + randomCol()});
  }
 }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T20:38:00.860

`$(".square")`选择所有具有 class**的现有**`square`元素，因此您为每个元素分配相同的颜色。

您只想将颜色分配给刚刚创建的颜色：

```
$('<div class="square"></div>')
   .css('background', '#' + randomCol())
   .insertAfter(".starter"); 
```

* * *

两个建议：

*   只创建一次 DOM 节点并克隆它（实际上可能不是改进，您必须尝试）。
*   一次插入所有元素以避免多个页面重排。

```
$(function(){
    var $node = $('<div class="square"></div>'),
        $elements = $();
    for(i=0; i<64; i++) {
        $elements = $elements.add($node.clone().css('background','#' + randomCol()));
    }
    $('.starter').after($elements);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:41:58.977

您对每个 Div 应用相同的颜色，您可以使用`each`JQuery 中的方法

```
$(function(){
  for(i=0; i<64; i++) {
    $('<div class="square"></div>').insertAfter(".starter");
  }
  $(".square").each(
     function(s){
       $(s).css({'background':'#' + randomCol()})
     }
  );
}); 
```

或者

```
$(function(){
  for(i=0; i<64; i++) {
    $('<div class="square"></div>').
       insertAfter(".starter").
       css({'background':'#' + randomCol()});
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:38:28.670

您正在将背景样式应用于方形类。因为你所有的 div 都使用同一个类，所以你所有的 div 都将使用你最后生成的颜色。

尝试这个：

```
$(function(){
  for(i=0; i<64; i++) {
        $('<div id="square' + i + '"></div>').insertAfter(".starter");
        $("#square" + i).css({'background':'#' + randomCol()});
  }
 }); 
```

# ember.js - emberjs 路由器 @pangratz 示例类活动

> ID：11767161
> 
> 赞同：0
> 
> 时间：2012-08-01T20:35:12.217
> 
> 标签：ember.js, router

@pangratz 在 emberjs 中给出答案[- 如何使用路由器基础设施标记活动菜单项](https://stackoverflow.com/questions/11628489/emberjs-how-to-mark-active-menu-item-using-router-infrastructure)

问题是为什么当我更改`{{outlet "navigation"}}`为`{{view App.NavigationView}}`,时`NavigationView.selected`未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:57:45.920

我认为使用 {{view App.NavigationView controllerBinding="App.router.navigationController"}} 应该使您的代码正常工作。感谢这个问题：[在初始化之前调用来自根状态的connectOutlets？](https://stackoverflow.com/questions/11768294/connectoutlets-from-root-state-called-before-initialization)

# c# - XML Serializer Generator Tool (Sgen.exe) 生成 64 位 Windows DLL？

> ID：11767162
> 
> 赞同：0
> 
> 时间：2012-08-01T20:35:13.590
> 
> 标签：c#, windows-7, 64-bit, sgen

我正在 Visual Studio 2010 中构建一个 64 位 C# .NET DLL。我的项目的构建后步骤包括运行 sgen.exe 以为我的程序集生成相应的 XmlSerializer DLL。（我正在尝试将 CLR 函数加载到 SQL Server 2012 中。该函数执行一些 XML 序列化。）

有没有办法用任何版本的 sgen.exe 生成 64 位代码？或者是否有我应该安装的特定 Windows SDK？好像找不到下载地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:44:03.980

您可以在 /c 参数中传递 C# 编译器选项：

```
sgen.exe /c:/platform:x64 
```

但不确定这对 MSIL 是否有意义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:45:03.227

sgen 构建的 XML 序列化程序集应该构建为 AnyCPU，因此将在 x86 上以 32 位运行，在 x64 上以 64 位运行。是否有理由需要将其强制为 x64？

# r - 试图将公式应用于 R 中的每一列，如何将数据提供给公式？

> ID：11767167
> 
> 赞同：3
> 
> 时间：2012-08-01T20:35:28.187
> 
> 标签：r, loops, dataframe, apply

因此，我尝试将指数平滑模型应用于名为“城市”的数据框中的每一列。我用 apply 来识别数据框，按列进行，我想运行模型。但是，当我尝试这样做时，它告诉我需要为指数平滑模型指定数据......我认为我已经通过将它放在应用循环中。

```
apply(x=cities,2,FUN=HoltWinters(x=x,gamma=FALSE)) 
```

此外，最终我想使用使用 forecast.predict 开发的 HW 模型来预测接下来的 4 个时期。我需要使用不同的循环还是可以将它们全部组合到这个循环中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:44:01.467

`FUN`需要 a `function`，但你试图给它一个函数的输出。试试这个：

```
apply(cities, 2, FUN=function(x) HoltWinters(x=x,gamma=FALSE)) 
```

# ios - 在 Core Foundation 中检查功能可用性

> ID：11767168
> 
> 赞同：3
> 
> 时间：2012-08-01T20:35:29.030
> 
> 标签：ios, core-foundation

我想使用仅在最新 iOS SDK 上可用的核心基础方法，并回退到以前的 SDK 的不同方法。有没有类似于 Cocoa 为 NSObject 做的事情？：

```
 - (BOOL)respondsToSelector:(SEL)aSelector 
```

更多的上下文，假设 ABAddressBookCreate() 仅在 iOS5 中可用，而我的应用程序针对 iOS 4.3+。我想检查 ABAddressBookCreate() 在运行时是否可用，并根据它执行不同的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:02:30.943

试试这个（不需要弱链接）：

```
#include <dlfcn.h>

void *handle = dlopen("/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation", RTLD_NOW);
void *createFunc = dlsym(handle, "ABAddressBookCreate");

if (createFunc != NULL)
{
    // available
    ABAddressBookRef (*_ABAddressBookCreate)(void) = createFunc;
    // then use this function pointer as normally
} 
```

如果您可以提供弱链接：

```
if (ABAddressBookCreate != NULL)
{
   // available
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:01:49.040

我从未尝试过，但也许这会有所帮助：

[https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html)

检查清单 3-2。

# c++ - 在 c++ 应用程序中使用 libgrib2c，链接器错误“未定义的引用...”

> ID：11767169
> 
> 赞同：1
> 
> 时间：2012-08-01T20:35:38.480
> 
> 标签：c++, qt, gcc, linker

编辑：如果您要处理 GRIB 文件，我会推荐由[Open Source Geospatial Foundation](http://www.osgeo.org/)支持的[GDAL 库](http://www.gdal.org/)。你会省去很多麻烦:)

我在 Ubuntu 中使用 Qt creator 创建一个 c++ 应用程序。我正在尝试使用具有标头 grib2.h 的外部库 libgrib2c.a。一切都可以编译，但是当它尝试链接时出现错误：

> 未定义对'seekgb(_IO_FILE*, long, long, long*, long*) 的引用

我尝试用以下方法包装头文件：

```
extern "C"{
#include "grib2.h"
} 
```

但它没有解决任何问题，所以我认为这不是我的问题。在 .pro 文件中，我有一行：

```
include($${ROOT}/Shared/common/commonLibs.pri) 
```

在 commonLibs.pri 我有：

```
INCLUDEPATH+=$${ROOT}/external_libs/g2clib/include
LIBS+=-L$${ROOT}/external_libs/g2clib/lib
LIBS+=-lgrib2c 
```

我没有遇到查找库的错误。如果我在 libgrib2c.a 上执行 nm 命令，我会得到：

```
nm libgrib2c.a | grep seekgb
seekgb.o:
00000000 T seekgb 
```

当我使用 LIBS+=-Wl,--verbose 的附加参数运行 qmake 时，我可以在输出中找到 lib 文件：

```
attempt to open /usr/lib/libgrib2c.so failed
attempt to open /usr/lib/libgrib2c.a failed
attempt to open /mnt/sdb1/ESMF/App/ESMF_App/../external_libs/linux/qwt_6.0.2/lib/libgrib2c.so failed
attempt to open /mnt/sdb1/ESMF/App/ESMF_App/../external_libs/linux/qwt_6.0.2/lib/libgrib2c.a failed
attempt to open ..//Shared/Config/lib/libgrib2c.so failed
attempt to open ..//Shared/Config/lib/libgrib2c.a failed
attempt to open ..//external_libs/libssh2/lib/libgrib2c.so failed
attempt to open ..//external_libs/libssh2/lib/libgrib2c.a failed
attempt to open ..//external_libs/openssl/lib/libgrib2c.so failed
attempt to open ..//external_libs/openssl/lib/libgrib2c.a failed
attempt to open ..//external_libs/g2clib/lib/libgrib2c.so failed
attempt to open ..//external_libs/g2clib/lib/libgrib2c.a succeeded 
```

虽然它没有显示库中的任何 .o 文件，但这是因为它是我的 c++ 应用程序中的 ac 库吗？

在我试图使用我拥有的库的 .cpp 文件中：

```
#include "gribreader.h"
#include <stdio.h>
#include <stdlib.h>
#include <external_libs/g2clib/include/grib2.h>
#include <Shared/logging/Logger.hpp>

//------------------------------------------------------------------------------
/// Opens a GRIB file from disk.
///
/// This function opens the grib file and searches through it for how many GRIB
/// messages are contained as well as their starting locations.
///
/// \param a_filePath. The path to the file to be opened.
/// \return True if successful, false if not.
//------------------------------------------------------------------------------
bool GRIBReader::OpenGRIB(std::string a_filePath)
{
  LOG(notification)<<"Attempting to open grib file: "<< a_filePath;
  if(isOpen())
  {
    CloseGRIB();
  }
  m_filePath = a_filePath;
  m_filePtr = fopen(a_filePath.c_str(), "r");

  if(m_filePtr == NULL)
  {
    LOG(error)<<"Unable to open file: " << a_filePath;
    return false;
  }
  LOG(notification)<<"Successfully opened GRIB file";

  g2int currentMessageSize(1);
  g2int seekPosition(0);
  g2int lengthToBeginningOfGrib(0);
  g2int seekLength(32000);
  int i(0);
  int iterationLimit(300);
  m_GRIBMessageLocations.clear();
  m_GRIBMessageSizes.clear();
  while(i < iterationLimit)
  {
    seekgb(m_filePtr, seekPosition, seekLength,
           &lengthToBeginningOfGrib, &currentMessageSize);
    if(currentMessageSize != 0)
    {
      LOG(verbose) << "Adding GRIB message location " << lengthToBeginningOfGrib
                   << " with length " << currentMessageSize;
      m_GRIBMessageLocations.push_back(lengthToBeginningOfGrib);
      m_GRIBMessageSizes.push_back(currentMessageSize);

      seekPosition = lengthToBeginningOfGrib + currentMessageSize;
      LOG(verbose) << "GRIB seek position moved to " << seekPosition;
    }
    else
    {
      LOG(notification)<<"End of GRIB file found, after "<< i
                      << " GRIB messages.";
      break;
    }
  }
  if(i >= iterationLimit)
  {
    LOG(warning) << "The iteration limit of " << iterationLimit
                 << "was reached while searching for GRIB messages";
  }
  return true;
} 
```

头文件 grib2.h 如下：

```
#ifndef _grib2_H
#define _grib2_H
#include<stdio.h>

#define G2_VERSION "g2clib-1.4.0"
#ifdef __64BIT__
typedef int g2int;
typedef unsigned int g2intu;
#else
typedef long g2int;
typedef unsigned long g2intu;
#endif
typedef float g2float;

struct gtemplate {
   g2int type;           /* 3=Grid Defintion Template.                       */
                         /* 4=Product Defintion Template.                    */
                         /* 5=Data Representation Template.                  */
   g2int num;            /* template number.                                 */
   g2int maplen;         /* number of entries in the static part             */
                         /*                    of the template.              */
   g2int *map;           /* num of octets of each entry in the               */
                         /*         static part of the template.             */
   g2int needext;        /* indicates whether or not the template needs      */
                         /*     to be extended.                              */
   g2int extlen;         /* number of entries in the template extension.     */
   g2int *ext;           /* num of octets of each entry in the extension     */
                         /*                      part of the template.       */
};

typedef struct gtemplate gtemplate;

struct gribfield {
   g2int   version,discipline;
   g2int   *idsect;
   g2int   idsectlen;
   unsigned char *local;
   g2int   locallen;
   g2int   ifldnum;
   g2int   griddef,ngrdpts;
   g2int   numoct_opt,interp_opt,num_opt;
   g2int   *list_opt;
   g2int   igdtnum,igdtlen;
   g2int   *igdtmpl;
   g2int   ipdtnum,ipdtlen;
   g2int   *ipdtmpl;
   g2int   num_coord;
   g2float *coord_list;
   g2int   ndpts,idrtnum,idrtlen;
   g2int   *idrtmpl;
   g2int   unpacked;
   g2int   expanded;
   g2int   ibmap;
   g2int   *bmap;
   g2float *fld;
};

typedef struct gribfield gribfield;

/*  Prototypes for unpacking API  */
void seekgb(FILE *,g2int ,g2int ,g2int *,g2int *);
g2int g2_info(unsigned char *,g2int *,g2int *,g2int *,g2int *);
g2int g2_getfld(unsigned char *,g2int ,g2int ,g2int ,gribfield **);
void g2_free(gribfield *);

/*  Prototypes for packing API  */
g2int g2_create(unsigned char *,g2int *,g2int *);
g2int g2_addlocal(unsigned char *,unsigned char *,g2int );
g2int g2_addgrid(unsigned char *,g2int *,g2int *,g2int *,g2int ); 
g2int g2_addfield(unsigned char *,g2int ,g2int *,
                       g2float *,g2int ,g2int ,g2int *,
                       g2float *,g2int ,g2int ,g2int *);
g2int g2_gribend(unsigned char *);

/*  Prototypes for supporting routines  */
extern double int_power(double, g2int );
extern void mkieee(g2float *,g2int *,g2int);
void rdieee(g2int *,g2float *,g2int );
extern gtemplate *getpdstemplate(g2int);
extern gtemplate *extpdstemplate(g2int,g2int *);
extern gtemplate *getdrstemplate(g2int);
extern gtemplate *extdrstemplate(g2int,g2int *);
extern gtemplate *getgridtemplate(g2int);
extern gtemplate *extgridtemplate(g2int,g2int *);
extern void simpack(g2float *,g2int,g2int *,unsigned char *,g2int *);
extern void compack(g2float *,g2int,g2int,g2int *,unsigned char *,g2int *);
void misspack(g2float *,g2int ,g2int ,g2int *, unsigned char *, g2int *);
void gbit(unsigned char *,g2int *,g2int ,g2int );
void sbit(unsigned char *,g2int *,g2int ,g2int );
void gbits(unsigned char *,g2int *,g2int ,g2int ,g2int ,g2int );
void sbits(unsigned char *,g2int *,g2int ,g2int ,g2int ,g2int );

int pack_gp(g2int *, g2int *, g2int *,
            g2int *, g2int *, g2int *, g2int *, g2int *,
            g2int *, g2int *, g2int *, g2int *,
            g2int *, g2int *, g2int *, g2int *, g2int *,
            g2int *, g2int *, g2int *);

#endif  /*  _grib2_H  */ 
```

这两天我一直在挠头。如果有人知道该怎么做或可以指出我的方向，我会很难过。此外，如果您对我如何改进这篇文章有任何意见，我很想听听他们的意见，这对这个帖子有点新。通常我能够在网络上已经包含的大量知识库中找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:25:03.043

尝试通过将以下内容放在头文件顶部附近来显式指定外部 C 链接：

```
#ifdef __cplusplus
extern "C" {
#endif 
```

这在底部附近：

```
#ifdef __cplusplus
}
#endif 
```

# android - 加载 YouTube 视频时出现 ActivityNotFoundException

> ID：11767172
> 
> 赞同：1
> 
> 时间：2012-08-01T20:36:36.477
> 
> 标签：android, exception

我使用此代码在支持它的活动（通常是浏览器）中加载 YouTube 视频：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=" + videoId));
context.startActivity(i); 
```

我收到了这个匿名跟踪，我不知道这是怎么发生的。这是否意味着设备不知道它需要使用什么活动来处理“http”协议？（即没有浏览器？）

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://www.youtube.com/watch?v=xxxxxx }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
at android.app.Activity.startActivityForResult(Activity.java:3190)
at android.app.Activity.startActivity(Activity.java:3297)
at com.sprogcoder.basetube.d.c.a(Unknown Source)
at com.sprogcoder.basetube.f.b.onItemClick(Unknown Source)
at android.widget.AdapterView.performItemClick(AdapterView.java:292)
at android.widget.Gallery.onSingleTapUp(Gallery.java:960)
at android.view.GestureDetector.onTouchEvent(GestureDetector.java:568)
at android.widget.Gallery.onTouchEvent(Gallery.java:937)
at android.view.View.dispatchTouchEvent(View.java:5546) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:42:23.277

如果添加有效的视频 ID 会怎样？像“AOsgv_X_cV8”

```
String videoId = "AOsgv_X_cV8";
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=" + videoId));
context.startActivity(i); 
```

但我认为您正在尝试在模拟器上执行此操作，这就是您收到此错误消息的原因。使用 youtube 应用程序。

```
try {   
url="vnd.youtube:"+videoId;
 context.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
} catch(ActivityNotFoundExcepiton e) {
   Toast.makeText(context, "Plase install Youtube app to see this video", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:43:20.900

将您的 URI 修改为[http://www.youtube.com/v/](http://www.youtube.com/v/) {VIDEOID}

# c# - 如何每次都显示标签的最后一个值？

> ID：11767174
> 
> 赞同：-1
> 
> 时间：2012-08-01T20:36:36.520
> 
> 标签：c#, winforms

问题是，例如 temperature_label 在 47 上，而 label8 也在 47 上。

在下一次迭代中，可以说 temperature_label 下降到 42，所以下一次迭代 label8 也将是 42。但我希望 label8 保持在 47，因为这是最后一个最高值。只有当 temperature_label 超过 47 时才会再次更新 label8。

因此，如果 temperature_label 是相同的值，则没有变化或高于最后一个值更新 label8 。

如果温度标签低于最后一个最高值，不要更新标签8。最后一个最高值我的意思是如果温度标签在70上，现在它在60上很长时间不要更新标签8，但如果它会得到71，更新标签8 a 71并保持71并更新label8 仅当 temperature_label 高于它时。

但是现在代码现在 label8 将得到更新，即使 temperature_label 会从最后一个值下降。

我不想像现在这样用最后一个值更新 label8，而是最后一个最大值。并且仅当最后一个最大值在其上方更改时才更新 label8。

不是当前值，它可能是 temperature_label 和 label8 将具有相同的值，但如果 temperature_label 下拉 label8 没有。如果 temperature_lable 从最后一个最高值上升，则再次更新 label8。这是我需要的条件。

编码：

我在线上遇到异常错误：if (UpdatingLabel(sensor.Value.ToString(), temperature_label.Text.Substring(0, temperature_label.Text.Length - 1)))

例外是：ArgumentOutOfRangeException：

长度不能小于零。参数名称：长度

```
System.ArgumentOutOfRangeException was unhandled
  Message=Length cannot be less than zero.
Parameter name: length
  Source=mscorlib
  ParamName=length
  StackTrace:
       at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy)
       at System.String.Substring(Int32 startIndex, Int32 length)
       at Bursa.Form1.timer2_Tick(Object sender, EventArgs e) in D:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 369
       at System.Windows.Forms.Timer.OnTick(EventArgs e)
       at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Bursa.Program.Main() in D:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Program.cs:line 17
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我根据您的代码所做的更改后的代码：

```
private void timer2_Tick(object sender, EventArgs e)
        {
            Computer computer = new Computer();
            computer.Open();
            computer.GPUEnabled = true;

            foreach (var hardwareItem in computer.Hardware)
            {

                if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
                {
                    foreach (var sensor in hardwareItem.Sensors)
                    {
                        if (sensor.SensorType == SensorType.Temperature)
                        {
                            sensor.Hardware.Update();

                            if (UpdatingLabel(sensor.Value.ToString(), temperature_label.Text.Substring(0, temperature_label.Text.Length - 1)))
                                label8.Text = temperature_label.Text;
                            temperature_label.Text = sensor.Value.ToString() + "c";

                            label8.Visible = true;
                            int t = temperature_label.Text.Length;
                            if (t > 3)
                            {
                                temperature_label.Location = new Point(238, 200);
                            }
                            timer2.Interval = 1000;
                            if (sensor.Value > 90)
                            {
                                Logger.Write("The current temperature is ===> " + sensor.Value);
                                button1.Enabled = true;
                            }
                            this.Select();
                        }
                    }
                }

            }     
        }

        private bool UpdatingLabel(string newVal, string oldVal)
        {
            int intVal1 = int.Parse(newVal);
            int intVal2 = int.Parse(oldVal);
            if (intVal1 > intVal2)
                return true;
            else
                return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:39:08.120

只需在更新之前获取 temperature_label 的当前值并将其设置为 Label8

```
if (sensor.SensorType == SensorType.Temperature)
{    
   sensor.Hardware.Update();
   label8.Text =  temperature_label.Text 
   temperature_label.Text = sensor.Value.ToString()+ "c";
   label8.Visible = true;
   int t = temperature_label.Text.Length;
   //remaining code 

} 
```

# biztalk - BizTalk MLLP 接收位置，指定 localhost 而不是服务器 IP 地址

> ID：11767176
> 
> 赞同：0
> 
> 时间：2012-08-01T20:36:45.570
> 
> 标签：biztalk, biztalk-2010, btahl7

我使用带有 MLLP 的 HL72x 管道创建了一个接收位置。如果我将接收位置的 BizTalk MLLP 配置主机属性设置为服务器的 IP 地址，我可以将 hl7 流量发送到服务器，但如果我将值设置为 localhost 或 127.0.0.1，biztalk 将不会出现在监听各自的端口。使用端口扫描器，如果接收位置的 mllp 主机属性设置为服务器的 IP 地址，我只能看到一个打开的端口。我不想引用服务器的实际 IP 地址，我宁愿使用本地主机，因为如果 IP 发生变化，则无需重新配置任何内容。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:57:39.613

您应该能够将 Host 参数设置为 IP 地址`0.0.0.0`。这将导致接收位置侦听指定端口上的所有入站流量，而不管源的 IP 地址如何。

# string - 提取由 HTML 标签包围的子字符串 Coldfusion

> ID：11767178
> 
> 赞同：0
> 
> 时间：2012-08-01T20:36:51.930
> 
> 标签：string, coldfusion, substring, extraction

我可能有一个愚蠢的问题。假设我们有一个字符串：

```
"my name <em>is</em> Tom <em>Papas</em> and I am 30 <em>years</em> of age<em>!</em>" 
```

问题是：我们如何提取包含在`<em>`标签中的子字符串并使用coldfusion将它们输出为列表、数组或逗号分隔的字符串？请注意，我们不知道标签中包含哪些子字符串。我们需要盲目地提取子串。

先感谢您，

汤姆

希腊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:46:35.033

下载[jsoup](http://jsoup.org/download)并将 jar 放入 CF 的 lib 文件夹中

```
html = "my name <em>is</em> Tom <em>Papas</em> and I am 30 <em>years</em> of age<em>!</em>";

dom = createObject("java", "org.jsoup.Jsoup").parse(html);
emElements = dom.getElementsByTag("em");

results = [];
for (em in emElements)
    arrayAppend(results, em.text()); 
```

欲了解更多信息：[http ://www.bennadel.com/blog/2358-Parsing-Traversing-And-Mutating-HTML-With-ColdFusion-And-jSoup.htm](http://www.bennadel.com/blog/2358-Parsing-Traversing-And-Mutating-HTML-With-ColdFusion-And-jSoup.htm)

或使用基本的正则表达式

```
matches = rematch("<em>[^<]*</em>", html);
results = [];
for (match in matches)
    arrayAppend(results, rereplace(match, "<em>(.*)</em>", "\1") ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:14:22.053

在 CF 10 或 Railo 4 中，您可以将 xmlParse() 与[Underscore.cfc](http://russplaysguitar.github.com/UnderscoreCF/)的 map() 函数结合起来，如下所示：

```
str = "my name <em>is</em> Tom <em>Papas</em> and I am 30 <em>years</em> of age<em>!</em>";
str = "<myWrapper>" & str & "</myWrapper>";
xmlObj = XmlParse(str);
resultAsArray = _.map(xmlObj.myWrapper.xmlChildren, function (val) {
    return val.xmlText;
}); 
```

（免责声明：我写了 Underscore.cfc）

# bing-maps - 通过 Bing Maps API 获取加拿大邮政编码

> ID：11767184
> 
> 赞同：0
> 
> 时间：2012-08-01T20:37:26.303
> 
> 标签：bing-maps, bing-api

虽然我对 Bing Maps 有一些经验，但这里有点新手。

我正在尝试使用 Locations API 来搜索（主要）在加拿大的位置。我的数据请求成功，我得到了预期的数据……除了一件事。加拿大邮政编码传统上是六个字符长。但是，API 仅响应前三个字符。我意识到地理位置只需要前 3 个字符，但想知道 Bing 是否可以返回整个 6 个字符的值。

我的数据请求如下所示：
http ://dev.virtualearth.net/REST/v1/Locations?key=[MYKEY]&q=1440+Law&ul=43.45297157764435%2C-79.70163702964783

我已经修剪了一些相关性的字段。

Bing 的 Locations API 可以返回完整的加拿大邮政编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:07:43.610

Bing 地图位置 API 设计用于地理编码和反向地理编码，而不是用于地址验证。

正如您所指出的，通常不需要考虑地理编码的完整邮政编码 - 可以使用街道地址和邮政编码的前 3 个字符明确识别结果。所以，虽然我不能肯定地说，但我会说答案是“不”。

# ember.js - 将父路由参数与 ember-data 一起使用的正确方法？

> ID：11767191
> 
> 赞同：2
> 
> 时间：2012-08-01T20:37:57.520
> 
> 标签：ember.js, ember-data, ember-old-router

在我的应用程序中，我试图使路由结构尽可能接近 API 结构，这在基本情况下很容易，但我仍然对以下情况感到困惑：

（参考[http://emberjs.com/guides/outlets/#toc_nesting](http://emberjs.com/guides/outlets/#toc_nesting)的例子）

检索`/posts/:post_id/comments`数据的最佳方法是什么（假设它不是由 给我的`/posts/:post_id`）？

我是否应该`App.Comment.find(...)`在方法中以某种方式将帖子 ID 传递给`comments.deserialize(...)`？有没有比获取帖子 ID 更好的方法`router.getPath('postController.content._id')`？我正在使用修改后的 DS.RESTAdapter。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:05:14.487

父路由参数不再作为子路由中的参数访问，但应该用于检索和填充中间数据结构。

鉴于您的模型定义如下：

```
App.Post = DS.Model.extend({
  text: DS.attr('string'),
  // ...
  comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
  // You may also have: "post: DS.belongsTo('App.Post')", but we do not care for this exemple
  text: DS.attr('string'),
  // ...
}); 
```

这应该是可行的：

```
posts: Ember.Route.extend({
  route: 'posts',

  member: Ember.Route.extend({
    route: '/:post_id', // [A]

    connectOutlets: function (router, post) {
      var applicationController = router.get('applicationController');
      applicationController.connectOutlet('post', post); // [B]
    },

    show: Ember.Route.extend({
      route: '/'
    }),

    comments: Ember.Route.extend({
      route: 'comments',

      connectOutlets: function (router) {
        var postController = router.get('postController'),
            comments = postController.get('comments'); // [C]
        postController.connectOutlet('comments', comments);
      },
    }),
  })
}) 
```

*   [A]：根据约定，后模型实例将由路由器自动检索：`post_id`指`Post`代具有给定的模型实例`id`（请参阅[此评论](https://stackoverflow.com/questions/11684615/emberjs-route-with-args-fail-in-some-case/11686360#comment15502304_11686360)）。
*   [B]：此处，`PostController`将由路由器使用传递的上下文填充：`post`，这是`Post`上层检索到的实例（参见 [A]）。
*   [C]:`PostController`是 post 模型实例上的`ObjectController`(ie `Proxy`)，因此它直接保存评论。

# c# - 在 HTML.grid 中使用 Lamba 表达式的 If 语句

> ID：11767193
> 
> 赞同：0
> 
> 时间：2012-08-01T20:37:58.927
> 
> 标签：c#, asp.net-mvc, razor, lambda

请看下面的代码，我需要评估列中的一个元素，我想像这样评估它但它不起作用： `if(c=>c.EditableFlag == "Y")`但这不会评估，我怎样才能找出列中的值？

```
<li>

    @{
        if (Model.ProductDetails.WhyBuyDescriptions.Count > 0)
        {
             Html.Grid(Model.ProductDetails.WhyBuyDescriptions).Columns(column =>
             {
                 column.Custom(@<div>
                     <a href="javascript:EditRomanceCopyClick()">
                     Edit</a> &nbsp; <a href="javascript:DeleteProductClick()">
                     Delete</a> &nbsp;
                 </div>).Named("Actions");
                 column.For(c => c.Description.Shorten())
                       .Named("Why Buy Description").Format("{0}");
             })
            .Attributes(id => "WhyBuyGrid", width => "100%")
            .Render();
        }
    }
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:05:16.540

您是否尝试将 @ 放在 IF 语句之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:18:40.787

怎么样：

```
column.For(c => c.EditableFlag == "Y" ? "Editable" : "Not Editable") 
```

不是 100% 确定你想要完成什么

# javascript - 我需要三个.js 的来源

> ID：11767194
> 
> 赞同：1
> 
> 时间：2012-08-01T20:37:59.517
> 
> 标签：javascript, three.js, 3d-model

有人可以给我一些信息或教程，以使用three.js 导入.obj 格式的3d 模型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:56:12.773

您可以从这里获取示例： [https ://github.com/mrdoob/three.js/tree/master/examples](https://github.com/mrdoob/three.js/tree/master/examples)

要导入 .obj 格式的模型，您可以从以下网址获取示例： [https ://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html)

# php - 有谁知道跟踪电子邮件阅读时间的方法？

> ID：11767196
> 
> 赞同：3
> 
> 时间：2012-08-01T20:38:04.027
> 
> 标签：php, html, email

我知道有几家公司能够进行这种跟踪，并且讨论的大多数技术都是高级网络错误。但幕后究竟是什么？我见过有人声称他们使用长加载图像或重定向技术来跟踪，即使它不是很准确，但仍然足够好。只是想知道是否有人有一些这样做的示例 php 代码或一些清晰的逻辑？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T20:43:47.373

除了已读回执（[gmail](http://support.google.com/mail/bin/answer.py?hl=en&answer=1385059)、[outlook/live](http://email.about.com/od/outlookexpresscomposing/qt/Request_Read_Receipt_for_a_Message_in_Windows_Live_Mail_OE.htm)）之外，没有可靠的方法来跟踪电子邮件是否已被阅读。可以使用“[网络错误](http://w2.eff.org/Privacy/Marketing/web_bug.html)”，但是禁用自动加载图像的电子邮件客户端（就像大多数现代的那样）会破坏这种方法，缓存、一些防火墙设置等也会失败（例如，请参阅“[不敏感的猪](http://www.spypig.com/requirements.php)”部分）。

长时间加载图像是**可能的**，但准确性再次取决于您无法控制的因素——如果电子邮件客户端在用户卸载邮件时取消其对图像的请求。客户端可能不会这样做，它可能允许图像在后台“完成”。

使用 PHP，可以通过发送图像头来完成长时间加载图像，然后休眠一小段时间，记录请求仍然打开的事实，然后再次休眠。

非常粗略地，这就是这样的代码的样子：

```
session_start();
function recordViewTime () {
    /* 
        the difference between $_SESSION['_image_start_time'] and 
        $_SESSION['_image_active'] is, theoretically, your email view time
    */
}

register_shutdown_function('recordViewTime');
header('Content-Type: image/jpeg');
$_SESSION['_image_start_time'] = microtime();
while (true) {
    $_SESSION['_image_active'] = microtime();
    sleep(1);
} 
```

**强制性免责声明**

用户通常不喜欢这种做法。特别是考虑到 Facebook 和 Google 等网站根据其政策创建的当前在线隐私环境，[用户比以往任何时候都更加敏感和](http://googleblog.blogspot.com/2009/01/raising-data-privacy-awareness.html)了解谁收集了哪些信息以及如何使用这些信息。如果您的用户提示该活动，使用任何类型的隐藏或秘密方法来跟踪客户端上的用户活动可能会产生负面影响。

了解您的电子邮件营销的有效性的价值很高，因此诱惑很大，但只要了解与隐私相关的隐私和安全趋势正在反对使用这种类型的做法。

**文档**

*   `header`- [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)
*   `register_shutdown_function`- [http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)
*   `sleep`- [http://php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)
*   `microtime`- [http://php.net/manual/en/function.microtime.php](http://php.net/manual/en/function.microtime.php)
*   $_SESSION - [http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T20:46:50.557

我知道只有一种方法可以做到这一点，而且设置起来相当先进。基本上，您放置了一个永远不会完成加载的 webbug，然后跟踪用户尝试下载它的时间。您必须每隔几秒钟发送*一些*新数据，否则远程端可能会超时。

出于多种原因，不建议这样做。除了道德问题（我不会在这里讨论）之外，还有几个技术原因不推荐：

*   在他们和网络错误服务器之间有缓存代理的用户不会给你准确的结果。代理服务器将是执行请求的代理，它可能会坐在那里吞食数据，比用户实际打开电子邮件的时间要长得多。
*   如果移动用户将电子邮件放在最前面并关闭屏幕，他们可能会消耗大量电池和/或带宽（如果要显示图像，大多数移动设备会尝试预加载图像）。
*   打开电子邮件和阅读电子邮件不是一回事，有人可能会整天在他们的预览窗格中打开您的电子邮件，甚至当电子邮件进来时他们甚至都不在场。
*   大多数现代邮件客户端默认阻止图像，因此与其他网络错误一样，这可能只覆盖一小部分用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:44:30.237

仅供参考：SuperUser 的一个答案和 StackOverflow 的另一个答案也解决了同样的问题（在一定程度上）。它还谈到了幕后发生的事情。

（显示代码） [跟踪大量电子邮件活动](https://stackoverflow.com/questions/2958926/track-mass-email-campaigns)

[https://superuser.com/questions/290568/how-to-track-if-email-was-read](https://superuser.com/questions/290568/how-to-track-if-email-was-read)

一个能够跟踪您提到的事物类型的网站是：

[http://www.didtheyreadit.com/](http://www.didtheyreadit.com/)（从我收集到的非常挑剔）

我看了一遍，这似乎是一个足够体面的应用程序。以下网站是来自 about.com 的评论，该主题大约有 3 颗星（满分 5 星）。

[http://email.about.com/od/windowsreturnreceipts/gr/didtheyreadit.htm](http://email.about.com/od/windowsreturnreceipts/gr/didtheyreadit.htm)

另外，请记住，仅仅因为一个页面打开了几秒钟或一个小时并不意味着他们没有或确实阅读了所有内容。这更多地衡量了电子邮件何时打开以及打开了多长时间。

这只是现有内容的 1 个示例，但它确实希望能帮助您确定要查找的内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T09:08:59.620

您可以在电子邮件中使用 iframe，指向您网站中的邮件内容。您可以在那里放置一个脚本来计算阅读时间。

[http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)

如果电子邮件客户端不支持 iframe，您可以放置​​如下链接：

`if you can't read the message, click here`

. 并重定向到 iframe 内容。

# vb.net - 如何处理 ArgumentOutOfRangeException？

> ID：11767202
> 
> 赞同：0
> 
> 时间：2012-08-01T20:38:36.390
> 
> 标签：vb.net, winforms

我有一个 PictureBox 控件。当我单击控件上的图像时，事件处理程序被触发。

这是事件处理程序：

```
Private Sub pbImageHolder_Click(ByVal sender As Object, _
                                ByVal e As EventArgs) Handles pbImageHolder.Click

  Dim clickPoint As Point = MousePosition
  Dim img As Bitmap = New Bitmap(pbImageHolder.Image)
  pixelColor = img.GetPixel(clickPoint.X, clickPoint.Y)

  For i As Integer = 0 To img.Width
    For j As Integer = 0 To img.Height

    Next
  Next
End Sub 
```

问题是我进入了这一行：

```
 pixelColor = img.GetPixel(clickPoint.X, clickPoint.Y) 
```

这是一个例外：

> System.ArgumentOutOfRangeException 未处理
> 消息=参数必须为正且 < 宽度。
> 
> 参数名称：x
> ParamName=x
> Source=System.Drawing

知道如何修复代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:45:34.560

假设 SizeMode 是默认的 Normal （参见下面 Hans 的评论），MouseClick 事件将是一个更适合处理而不是单击的事件，因为它会为您传递鼠标位置。

此外，您需要检查该点是否在图像的范围内。

```
Private Sub pbImageHolder_MouseClick(ByVal sender As Object, _
                                     ByVal e As MouseEventArgs) _
                                     Handles pbImageHolder.MouseClick

  Using img As Bitmap = New Bitmap(pbImageHolder.Image)
    If New Rectangle(Point.Empty, img.Size).Contains(e.Location) Then
      pixelColor = img.GetPixel(e.Location.X, e.Location.Y)
      For i As Integer = 0 To img.Width - 1
        For j As Integer = 0 To img.Height - 1

        Next
      Next
    End If
  End Using
End Sub 
```

对于循环，确保比宽度和高度小一。

除非您不知道范围，否则您不需要 Try - Catch 来处理此错误，但在这种情况下，您知道范围与图像的大小相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:46:36.340

防御性编程（测试空值和超出范围的变量值）和使用适当的 try/catch 块的组合（如果你的防御策略“失败”，你想尝试“修复”它，你甚至可以异常本身）`catch`。`ArgumentOutOfRangeException`

# hibernate - Spring JPA 休眠 OneToOne

> ID：11767204
> 
> 赞同：0
> 
> 时间：2012-08-01T20:38:40.563
> 
> 标签：hibernate, spring-data-jpa

我一直试图解决这个问题很长一段时间没有成功。我在用：

*   春天 3.1.1
*   休眠 4.0.1.Final
*   spring-data-jpa 1.0.2.RELEASE
*   MySQL 5 (org.hibernate.dialect.MySQL5InnoDBDialect)

我有两个实体，具有 OneToOne 非定向关联。表之间没有外键关系

```
@Entity
@Table(name = "User", uniqueConstraints = @UniqueConstraint(columnNames = "UserName"))
public class User {

    // Fields
    private Long userId;
    private Integer status = 0;
    private String password;
    private Long userRoleId;
    private String userName;
    private UserRole userRole;
...
    @OneToOne
    @JoinColumn(name = "userRoleId")
    public UserRole getUserRole() {
        return userRole;
    }
} 
```

和另一个我不想被级联删除/任何东西作为参考的类

```
@Entity
@Table(name = "UserRole")
public class UserRole {

// Fields
private Long userRoleId;
private String userRoleDescriptionShort;
private String userRoleDescription;

    @Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
public Long getUserRoleId() {
    return this.userRoleId;
}
} 
```

每个表都有 userRoleId 声明为 bigint

我有两个存储库：

```
@Repository
public interface IUserRepository extends CrudRepository<User, Long> {
public User findByUserName(String userName);
 }

@Repository
@Transactional(readOnly = true)
public class UserRepository extends QueryDslRepositorySupport implements IUserRepository {

@PersistenceContext
private EntityManager em;

@Override
public User findByUserName(String userName) {
    QUser user = QUser.user;
    User auser = (User) from(user).where(user.userName.eq(userName));
    return auser;
} 
```

**和**

```
@Transactional(readOnly = true)
public interface IUserRoleRepository extends CrudRepository<UserRole, Long> {

public UserRole findByRoleDescriptionShort(String roleDescriptionShort);

}

@Repository
Transactional(readOnly = true)
public class UserRoleRepository extends QueryDslRepositorySupport implements IUserRoleRepository     {

@PersistenceContext
private EntityManager em;

@Override
public UserRole findByRoleDescriptionShort(String roleDescriptionShort) {
    QUserRole userRole = QUserRole.userRole;
    UserRole arole = (UserRole) from(userRole).where(userRole.userRoleDescriptionShort.equalsIgnoreCase("Owner"));
    return arole;
} 
```

但是，当我构建它时，出现以下错误：

```
Caused by: java.lang.IllegalArgumentException: No property role found for type class     com.edelweissco.model.people.UserRole
    at org.springframework.data.repository.query.parser.Property.<init>(Property.java:76)
    at org.springframework.data.repository.query.parser.Property.<init>(Property.java:97)
    at org.springframework.data.repository.query.parser.Property.create(Property.java:312)
    at org.springframework.data.repository.query.parser.Property.create(Property.java:326)
    at org.springframework.data.repository.query.parser.Property.create(Property.java:326)
    at org.springframework.data.repository.query.parser.Property.create(Property.java:292)
    at org.springframework.data.repository.query.parser.Property.from(Property.java:251)
    at org.springframework.data.repository.query.parser.Property.from(Property.java:232)
at org.springframework.data.repository.query.parser.Part.<init>(Part.java:48)
at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:242)
at org.springframework.data.repository.query.parser.PartTree.buildTree(PartTree.java:101)
at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:77)
at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>  

(PartTreeJpaQuery.java:56)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:92)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:159)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:71)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:303)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:157)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:120)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:39)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142) 
```

这似乎是一种非常简单的映射方式，但我看到的所有示例都是双向的。不过，我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:31:24.763

这是一个迟到的答案，但我不同意你的映射。您已经声明了一个带有 JoinColumn 的 OneToOne，指定 User 上有一个名为 userRoleId 的列，它是 UserRole 的外键。因此必须有一个外键。

另外，我不相信这是一对一的关系。您已声明在删除用户时不应级联删除 UserRole。听起来 UserRole 可以与任意数量的用户相关联。因此，用户上的映射应该是多对一。

OneToOne 通常适用于两个表共享相同键的情况，即使用 PrimaryKeyJoinColumn 表示它们共享一个主键。在这种情况下，两个实体具有不同的键。

# java - 如何将 wsdl 中定义的 Soap Header 添加到 CXF 中的 Web 服务客户端？

> ID：11767209
> 
> 赞同：3
> 
> 时间：2012-08-01T20:39:02.443
> 
> 标签：java, soap, cxf

我有一个 wsdl，它定义了调用 Web 服务时需要传递的soap 标头。

示例 SOAP 标头是：

```
<soapenv:Header>
   <AuthenticationInfo>
      <userName>User</userName>
      <password/>
   </AuthenticationInfo>
</soapenv:Header> 
```

CXF 的 wsdl2java 生成了一个“AuthenticationInfo”java 类，我可以创建并使用用户名和密码进行填充，但我不知道在调用 Web 服务时将其传递给 CXF 客户端的正确方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-11-16T02:59:26.980

使用 Apache CXF 生成代理类时，使用 true 添加扩展的SoapHeaders 将生成带有 Request 和 Header 参数的 PortType 类。

```
<wsdlOption>              
<wsdl>${project.basedir}/src/main/resources/wsdl/sample.wsdl</wsdl>
 <!-- enables processing of implicit SOAP headers, default is false -->
<extendedSoapHeaders>true</extendedSoapHeaders>
</wsdlOption> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T21:09:29.657

好吧，最简单的方法是创建一个`ArrayList`对象`Header`并添加所有参数或 a`Map<String,Object>`并将所有标题添加为`map.put("param1",param1).`

最后获取您的请求上下文并将此地图数组列表添加为

```
requestContext.put(MessageContext.HTTP_REQUEST_HEADERS,
soapHeaders); 
```

如果您尝试传递自定义肥皂标题，请参阅[此链接](http://java.dzone.com/articles/apache-cxf-how-add-custom-soap)。

[THIS DISCUSSION](http://cxf.547215.n5.nabble.com/Add-SOAP-HEADER-value-td549830.html)中提到了一般的陷阱。它可能对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-23T15:19:01.260

如果 SOAP 标头在 WSDL 中定义，则可以指定为[隐式或显式](https://www.ibm.com/developerworks/library/ws-tip-headers/index.html)。

CXF 提供了[wsdl2java 工具](http://cxf.apache.org/docs/wsdl-to-java.html)，用于从 WSDL 生成 Java 服务接口。在显式标头的情况下，会自动检测 SOAP 标头并将其作为生成的服务接口的一部分提供。

如果已隐式定义 SOAP 标头，则需要启用 `-exsh`触发隐式 SOAP 标头处理的选项。同样，SOAP 标头将作为生成的服务 Java 接口的一部分提供。[如果你想要一个具体的例子，你可以查看我写的一篇关于如何添加 cxf 肥皂标题](https://www.codenotfound.com/apache-cxf-soap-header-example.html)的博客文章。

请注意，CXF 还支持[添加 SOAP 标头的其他方式](http://cxf.apache.org/faq.html#FAQ-HowcanIaddsoapheaderstotherequest/response?)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-18T04:56:02.883

发现自己处于相同的情况：`wsdl2java`生成了标头类，我需要将其作为 SOAP 标头添加到传出的 SOAP 请求中。

我在代码中的解决方案如下（重用原始问题`AuthenticationInfo`作为标题类名称）：

```
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.headers.Header;

AuthenticationInfo ai = new AuthenticationInfo();
ai.setUserName("User");
ai.setPassword("");

List<Header> soapHeaders = new ArrayList<Header>();

Header h1 = new Header(new QName("http://namespace/of/AuthenticationInfo", "AuthenticationInfo"), 
                       ai, new JAXBDataBinding(AuthenticationInfo.class));

soapHeaders.add(h1);

ClientProxy.getClient(port).getRequestContext().put(Header.HEADER_LIST, soapHeaders); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-04T20:23:51.923

使用 CXF 3.4.4

您可以像这样添加配置安全性的标头

```
<soapenv:Header>
    <wsse:Security xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">
    <wsse:UsernameToken xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility">
    <wsse:Username>MY-USER</wsse:Username>
    <wsse:Password Type="wsse:PasswordText">MY-PWD</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>
</soapenv:Header> 
```

使用拦截器，如下所述：http: [//cxf.apache.org/docs/ws-security.html](http://cxf.apache.org/docs/ws-security.html)

```
Client serviceClient = ClientProxy.getClient ( port );

Endpoint cxfEndpoint = serviceClient.getEndpoint ();

Map<String, Object> outProps = new HashMap<> ();
outProps.put ( WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN );
outProps.put ( WSHandlerConstants.USER, "MY-USER" );
outProps.put ( WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT );
outProps.put ( WSHandlerConstants.PW_CALLBACK_CLASS, ClientPasswordCallback.class.getName () ); 

WSS4JOutInterceptor requestInterceptor = new WSS4JOutInterceptor ( outProps );
cxfEndpoint.getOutInterceptors ().add ( requestInterceptor );

MyRequest request = new MyRequest ();

Object [] res = serviceClient.invoke ( "operation-name", request );
MyResponse out = ( MyResponse ) res [0]; 
```

其中“操作名称”是要调用的 WebService 操作的名称

WSPasswordCallback 是：

```
import org.apache.wss4j.common.ext.WSPasswordCallback;

import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.UnsupportedCallbackException;
import java.io.IOException;

public class ClientPasswordCallback implements CallbackHandler {

    public void handle ( Callback [] callbacks ) throws IOException, UnsupportedCallbackException {

        WSPasswordCallback passwordCallback = ( WSPasswordCallback ) callbacks [0];

        // Set the password for our message.
        passwordCallback.setPassword ( "MY-PWD" );
    }
} 
```

# twitter-bootstrap - 让 Twitter Bootstrap 导航栏像标签一样工作

> ID：11767214
> 
> 赞同：18
> 
> 时间：2012-08-01T20:39:17.560
> 
> 标签：twitter-bootstrap

有没有办法使导航栏（似乎旨在链接到其他页面）表现得像一组导航选项卡（它们保持在同一页面上，隐藏除所需部分之外的所有部分）？

实际上，我的导航栏可以按我的意愿工作，但前提是我不打电话`$(".nav-tabs").button()`，我需要其他事情。现在没有发生任何折叠/展开。

这是代码（非常样板）：

```
<div class="navbar navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container">
   <div class="nav-collapse collapse">
    <ul id="tab" class="nav">
     <li class="active"><a href="#Tab1" data-toggle="tab">Tab1</a></li>
     <li><a href="#Tab2" data-toggle="tab">Tab2</a></li>
     <li><a href="#Tab3" data-toggle="tab">Tab3</a></li>
    </ul>
    <a class="brand" href="#">NavTab Demo</a>
   </div>
  </div>
 </div>
</div>
<div class="container-fluid">
 <div class="row-fluid">
  <div class="span12">
   <div class="tab-content">
    <div class="tab-pane active" id="Tab1">
... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T20:44:12.843

在将导航链接连接为选项卡时，我没有看到任何明显的问题。

您只需要省略选项卡类就不会覆盖您的导航栏样式，并且不要忘记`data-`属性（如果需要）。

然后您必须使用[文档](http://twitter.github.com/bootstrap/javascript.html#tabs)中指定的 JavaScript 激活（或使用`data-toggle="tab"`属性）。

一切都应该正常工作。

**编辑**：对于后代，您确实需要包含一个`bootstrap-tab.js`or `bootstrap.js`（或缩小版本）以及相关的 css 文件。

# android - ListFragment：CursorAdapter 中的 findViewById 返回 null

> ID：11767216
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:21.420
> 
> 标签：android, android-fragments, listactivity, android-cursoradapter, findviewbyid

我编写了以下类来创建带有自定义列表行的列表视图。我为该项目使用*Android Support Library v4 ，并使用*[ActionBarSherlock](http://www.actionbarsherlock.com)库为旧设备集成操作栏。

```
public class CustomListActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Sherlock___Theme_DarkActionBar);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_list);
    }
} 
```

...

```
public class ListFragment extends SherlockListFragment implements LoaderCallbacks<Cursor> {
    private Activity mActivity;
    private CursorAdapter mAdapter;
    // Query parameter as members ...
    private String mFromColumns;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setEmptyText("No data to display");
        mActivity = getActivity();
        // Query parameters are stored in members here ...
        mFromColumns = { "_id", "name" };
        mAdapter = new CustomCursorAdapter(mActivity, null, 0);
        setListAdapter(mAdapter);
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle extras) {
        return new CursorLoader(mActivity, mUri, mFromColumns, mSelection, mSelectionArgs, sortOrder);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        mAdapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mAdapter.swapCursor(null);
    }
} 
```

...

```
public class CustomCursorAdapter extends CursorAdapter {
    private LayoutInflater mInflater;

    public CustomCursorAdapter(Context context, Cursor cursor, int flags) {
        super(context, cursor, flags);
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView listItem = (TextView)view.findViewById(R.id.name);
//      TextView listItem = (TextView)view.findViewById(android.R.id.text1);
        String text = cursor.getString(cursor.getColumnIndex("name"));
        listItem.setText(text);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        return mInflater.inflate(R.layout.list_item, parent, false);
//      return mInflater.inflate(android.R.layout.simple_list_item_1, parent, false);
    }
} 
```

当我使用框架提供的列表项和布局（中未注释的行`CustomCursorAdapter`）时，列表视图成功加载并显示数据行。但是，当我交换行以使用我的自定义布局和列表项时，`findViewById`返回`null`. 这是xml文件。

片段列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.example.app.fragment.ListFragment"
    android:id="@+id/list_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</fragment> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >
    <TextView 
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </TextView>
</LinearLayout> 
```

我很确定，问题是我如何链接 xml 文件或它们是如何构建的。我希望你能看到错误。实际上，我不明白如何`list_item.xml`用作列表视图的行布局。我设置的唯一参考`fragment_list.xml`是 via `setContentView(R.layout.fragment_list);`。而且这个 xml 文件不包含任何容器元素，例如`<ListView android:id="@android:id/list" />`（我在其他设置中看到的）。

**此外：**

我想知道是否仍然建议在 a 中使用*ViewHolder*模式，`CursorAdapter`或者这种行为是否已经内置。我在其他示例中多次看到它，但那些继承自`BaseAdapter`or `SimpleCursorAdapter`。

* * *

**得到教训：**

当我试图解决这个问题时，我在某个时候对 XML 文件进行了正确的设置。但另一件事阻碍了我让事情顺利进行。这是您需要注意的。
如果你想在你的行布局中显示**多个信息**`fromColumn`，在你的`CursorLoader`. 否则，您将遇到异常：

```
java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

fromColumns 中的每个列名...

```
String[] fromColumns = { "_id", "name", "comments" } 
```

...与您要求光标的内容有关。该`_id`列是强制使用游标作为迭代器的。

```
String name = cursor.getString(cursor.getColumnIndex("name"));
String comment = cursor.getString(cursor.getColumnIndex("comment")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:50:18.620

您的代码在这两种情况下都适用于我（就像我更改行注释时一样）。唯一的事情：我已将公共空构造函数添加到`ListFragment`.

并且仍然建议将`ViewHolder`模式与`CursorAdapter`.

```
public void bindView(View view, Context context, Cursor cursor) {
    ViewHolder holder = (ViewHolder) view.getTag();
    if (holder == null) {
        holder = new ViewHolder();
        holder.name = (TextView) view.findViewById(R.id.name);

        view.setTag(holder);
    }

    String text = cursor.getString(cursor.getColumnIndex("name"));
    holder.name.setText(text);
}

private static class ViewHolder {
    TextView name;
} 
```

# ruby-on-rails - 创建新的锻炼日志/跟踪器应用程序需要帮助建立数据库/模型才能开始？

> ID：11767222
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:32.980
> 
> 标签：ruby-on-rails, ruby

我对 Ruby 和 Rails 还很陌生，写过一些博客等。我学习 ruby​​ 语言和 Rails 框架的速度很慢。我想创建一个锻炼日志/跟踪器应用程序，需要帮助建立模型，或者让我开始走上正确的道路。我基本上希望能够创建锻炼/不同类型的锻炼（背部、手臂、腿部等），能够使用用于该锻炼的组数和次数，一周多少天/哪几天，添加，编辑，删除锻炼，跟踪减肥/体重，跟踪锻炼，代表，你之前做的组，在日记中设定目标，跟踪进度，最终能够分享锻炼等。我知道我想要做什么只是需要帮助开始并建立要使用的模型以及要使用的关联。我知道这似乎有很多信息。任何获得帮助的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:52:43.570

这可能有点棘手，因为有很多类型的练习——N 组 M 代表、金字塔、最大提升等。您可能希望在最终版本中使用[多态关联。](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Polymorphic+Associations)

但是我认为，一旦您构建了一些表和类，您就会更清楚地了解该项目的位置；我想我会从一个`Workout`类开始`has_many` `WOSets`（不要使用`Set`; 类名与内置类名冲突，这比你想象的更烦人），并且每个`WOSet` `has_many` `Reps`. 然后您`Reps`将跟踪计数和重量。将代表的*顺序*存储在`WOSet`.

你还需要一个`Station`关于所有机器和练习的课程；大概是你的`WOSet`遗嘱和遗嘱。（因此您可以检索曾经在特定电台上执行过的所有组。）`belongs_to``Station``Station``has_many` `WOSet`

我希望这个速写能让您开始尝试创建新的锻炼、新的站点以及使用`script/console`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:09:23.313

模型 = 表格

你应该看看数据库设计和规范化。最重要的是，您必须正确掌握基础知识。否则，您最终可能会遇到具有常见错误的数据库，例如性能问题和冗余（这是一件坏事）。

如果您了解需要存储什么，将其映射到 Rails 很容易。

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

# asp.net-mvc-3 - Knockout JS、MVC 3 和以 JSON 格式查看模型服务器端数据

> ID：11767224
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:35.507
> 
> 标签：asp.net-mvc-3, razor, knockout.js

所以我有一个问题......我在我的网络应用程序中分离关注点：剃须刀页面中的 HTML 和 js 文件中的 JS。我的问题在于我想使用来自服务器的视图模型中传递的控制器中的数据作为选择列表的选项。问题在于我已将我的 js 与我的 HTML 分开，并且我无法访问 js 文件中的 Razor。

我的视图模型中有一个项目列表...

`public List Stuffs { get; set; }`

我在服务器端对其进行 json 编码，并确保处理循环引用，所以它看起来像这样 `[{"id":1,"name":"blah"},{"id":2,"name":"blah2"},{"id":3,"name":"blah3"},{"id":4,"name":"blah4"}]`

问题是，我想保持关注点分离，那么如何将该数组放入我的 js 文件中，以便可以使用敲除将其绑定到选择列表？我绝对不想再次往返服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:48:26.100

因此，假设您有一些看起来像这样的视图：

```
<div> (Some stuff) </div>

<script type="text/javascript">
    var initialData = //Your JSON
<script> 
```

然后在您的 javascript（您已在视图下方链接，以便它在其后加载）中，您有如下内容：

```
var data = initialData || {} //Or some other default value, in case initialData wasn't set 
```

如果设置了，这将加载`initialData`，或者如果没有设置，则不使用任何内容（或您定义的默认值）。松耦合。

当然，更复杂的数据将需要您对结构进行标准化，但这本质上是一种方法，允许您从剃刀生成的视图中提取数据，而无需将其紧密耦合到您的 javascript 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:36:12.250

您的 Javascript 文件是否包含可实例化函数形式的视图模型，例如：

```
function MasterVM(data) 
```

或对象文字，例如

```
var masterVM = { ... 
```

? 我倾向于使用可实例化的视图模型（部分原因是它们使用映射插件通过视图模型的层次结构向下链接——顶层构建它的子视图），在这种情况下，我认为 Razor 视图实例化视图很好具有从 MVC 视图模型呈现的 JSON 的模型，例如：

```
var masterVM = new MasterVM(@(Html.Raw(JsonConvert.SerializeObject(Model.ProductViewModel)))); 
```

或者甚至让 Knockout 视图模型由一个显示模块“拥有”并像这样初始化它：

```
productModule.init(@(Html.Raw(JsonConvert.SerializeObject(Model.ProductViewModel)))); 
```

然后 productModule 还负责其他事情，例如在您的视图模型和服务器之间进行调解，监视脏状态等。

此外，如果您正在采购大量希望浏览器缓存的可重用选项，那么再次往返服务器并不一定是坏事。如果你是，你可能想要一个 MVC 控制器，它发出一个包含所有常用选项的大对象文字，然后你可以将其用作跨多个选择的“选项”属性。但是，如果您的选项特定于特定的视图模型，那么我想它们必须是您的视图模型的一部分。

# android - Android TabHost/后退按钮

> ID：11767225
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:36.680
> 
> 标签：android, android-activity

我有一个带有 4 个选项卡的 TabHost 应用程序。

选项卡 1 列表 A > 列表 B > 查看

Tab 2 Camera Activity 启动相机并闪烁 onCreate

选项卡 3 列表 C > 查看

选项卡 4 视图 D > 视图 E

所以，当我第一次启动应用程序时，我可以毫无问题地在堆栈中来回切换不同的选项卡。但是，一旦我启动 Tab 2（相机选项卡）并从那里转到其他选项卡并向下堆栈，当我按下后退按钮时，即使我不在选项卡 2（即：在列表 B，按下后退按钮，即使我只是返回列表 A，相机也会启动...当我再次转到选项卡 2 时，应用程序将崩溃（抱歉，Android 相机遇到问题...等等）

谁能告诉我问题是什么？以下是我的 TabHost 活动

```
package com.myapp.appname;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;
import android.widget.TabHost;
import android.widget.TextView;
import android.view.Window;

public class MainActivity extends TabActivity {
    /** Called when the activity is first created. */

    private TabHost tabHost;
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(null);

    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.top_titlebar);
    setTabs();

}

private void setTabs() {
    tabHost = getTabHost();

    listTab(R.string.tab_1, R.drawable.ic_tab_1);
    cameraTab(R.string.tab_2, R.drawable.ic_tab_2);
    list2Tab(R.string.tab_3, R.drawable.ic_tab_3);
    viewTab(R.string.tab_4, R.drawable.ic_tab_4);
}

private void listTab(int labelId, int drawableId) {
    Intent intent = new Intent(this,ListActivity.class);    
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);     

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);

    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
private void cameraTab(int labelId, int drawableId) {

    Intent intent = new Intent(this,CameraActivity.class);  
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);     

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);

    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
private void list2Tab(int labelId, int drawableId) {
    Intent intent = new Intent(this,List2Activity.class);   
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);     

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);

    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
private void viewTab(int labelId, int drawableId) {
    Intent intent = new Intent(this,ViewActivity.class);    
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);     

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);

    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:53:20.580

我认为问题不在于 tabhost，而在于相机。尝试将您拥有的代码移动`onCreate`到`onResume`. 此外，当您转到另一个选项卡时，您应该担心释放相机。

# java - 在 Java 应用程序中嵌入带有会话数据的浏览器？

> ID：11767226
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:36.513
> 
> 标签：java

是否可以在可以处理会话数据和可能的 cookie 的桌面 Java 应用程序中嵌入浏览器？它应该能够处理对 eBay 和贝宝网站的登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:50:43.377

Java FX 2.xx 具有[WebView](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)，它是一个嵌入式浏览器。如果您在 Swing 环境中工作，您仍然可以[将该 Java FX 2.x 组件嵌入到 Swing 面板](https://stackoverflow.com/questions/8374365/integrating-javafx-2-0-webview-into-a-swing-java-se-6-application)中。

ps：我不确定它是否可以处理登录到 eBay 和 Paypal，但我会认为它可以，因为它是基于[WebKit 引擎](http://www.webkit.org/)构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:41:51.410

我建议使用[SWT Browser](http://www.eclipse.org/swt/)类。它使用可用的本机浏览器，并且支持您需要的一切。

# iphone - 如何从浮动 iPhone sdk 中提取特定整数？

> ID：11767228
> 
> 赞同：0
> 
> 时间：2012-08-01T20:39:50.157
> 
> 标签：iphone, ios, xcode

我有一个输出浮点数的公式。我想要做的是从前六位数字创建一个 int 。比如数字是123456789.563324，我想提取一个int值456789，怎么做呢？我正在使用最新的 iPhone SDK (XCode 4.4)。感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:45:30.213

我不确定 iPhone 的确切功能，但这是相当标准的数学运算。首先，你想让它成为一个整数。地板功能是您正在寻找的。然后，您要计算整数和 1000000 的模数。这将得到函数除以 10^6 时的余数，即最后 6 位。

```
float a = 123456789.563324
int lastdi = floor(a) % 1000000 
```

# html - 造型 使用 CSS3

> ID：11767232
> 
> 赞同：0
> 
> 时间：2012-08-01T20:40:02.993
> 
> 标签：html, css

我可以根据需要对齐和居中图纸和页脚，但我无法让颜色选择器 div 存在于这些旁边。无论我尝试什么，它最终都会低于其余的。有没有办法让两个 div 垂直居中，然后将颜色选择器 div 放在这两个旁边？

```
<div id="abstract">
   <div class="graphpaper" id="graphpaper" onclick="getPosition(event)" style="width:984px; height:1100px;">
      <img src="images/poster/poster-top.png" align="left"/>
      <img src="images/poster/poster-left.jpg" align="left" style="margin-left:12px;"/>
      <canvas id ="canvas" width = "898" height = "900"/>
      <img src="images/poster/poster-right.jpg" align="right" style="margin-right:10px;"/>        
</div>
<div class="footer" id="footer">
      <img src="images/poster/poster-bottom.png"/>
</div>
<div class="colorpicker" id="colorpicker" style="width: 70px; clear:both;">
    <img src="images/color-tab/no-color.png" id="unselected" class="unselected"/><br>
    <img src="images/color-tab/color-dark.png" id="dark_image" class="darkimage" 
   onclick="getColor('#00ccff','images/color-tab/color-dark.png')"/><br>
    <img src="images/color-tab/color-medium.png" id="med_image" class="medimage" 
   onclick="getColor('#000000','images/color-tab/color-medium.png')"/><br>
    <img src="images/color-tab/color_light.png" id="light_image" class="lightimage"     
   onclick="getColor('#ff0066','images/color-tab/color_light.png')"/><br><br><br><br>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:43:16.817

为了做到这一点，您需要将所有 div 浮动到左侧，并为它们提供加起来为 100% 的宽度（即 40%、40%、20%）。

这是我最好的猜测，没有将您的问题视为 jsfiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:11:19.523

1.) 删除页脚 div 并将 img 添加到 graphpaper div
2.) 将 colorpicker 设置为 position:fixed; 并设置 margin-top:300; 所以它会在正确的地方开始。

# ruby-on-rails - ruby on rails，fork，长时间运行的后台进程

> ID：11767234
> 
> 赞同：2
> 
> 时间：2012-08-01T20:40:08.657
> 
> 标签：ruby-on-rails, fork

我正在从浏览器启动长时间运行的进程，并在完成后显示结果。我在我的控制器中定义了：

```
def runthejob
   pid = Process.fork
   if pid.nil? then   
    #Child
    output = execute_one_hour_job()
    update_output_in_database(output)
    # Exit here as this child process shouldn't continue anymore
    exit  
   else
    #Parent
    Process.detach(pid)
    #send response - job started...
end 
```

1.  parent 中的请求正确完成。但是，在孩子中，总是有一个“500 内部服务器错误”。rails 报告“在 227192 毫秒内完成 500 内部服务器错误”。我猜这是因为子进程的请求响应周期没有完成，因为子进程中有一个“退出”。我该如何解决？

2.  这是执行长时间运行的进程的正确方法吗？有没有更好的方法呢？

3.  当孩子正在运行时，如果我执行 " `ps -e | grep rails`" ，我会看到有两个 "rails server" 实例。（我使用命令“ `rails server`”来启动我的 Rails 服务器。）

    `ps -e | grep rails
    75678 ttys002 /Users/xx/ruby-1.9.3-p194/bin/ruby script/rails server
    75696 ttys002 /Users/xx/ruby-1.9.3-p194/bin/ruby script/rails server`

这是否意味着有两台服务器正在运行？现在如何处理请求？请求不会转到第二台服务器吗？

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:45:08.670

在 Rails 中有很多框架可以做到这一点：DelayedJob、Resque、Sidekiq 等。

你可以在 railscasts 上找到很多例子：[http: //railscasts.com/](http://railscasts.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:00:33.983

在生产中尝试您的代码，看看是否出现相同的错误。如果没有，您的错误可能来自于第一个请求完成时清除了开发环境，而您的分叉仍然需要该环境存在。我还没有用叉子验证这一点，但这就是线程发生的情况。

config/development.rb 中的这一行将保留环境，但任何代码更改都需要重新启动服务器。

```
config.cache_classes = true 
```

# python - Pygame，如何在屏幕上绘制一个形状并删除以前的表面？

> ID：11767236
> 
> 赞同：4
> 
> 时间：2012-08-01T20:40:17.310
> 
> 标签：python, python-3.x, pygame

所以我有这段代码，它做了它应该做的事。我想要它做的是将正方形随机缩放不同的数量，它确实如此。我的问题在于 blit 函数，我的正方形似乎只是按比例放大，因为 blit 不会删除旧形状，它只是将新形状复制到表面。

如何使形状扩大和缩小，而不仅仅是扩大？

我的代码：

```
import sys, random, pygame
from pygame.locals import *

pygame.init()

w = 640
h = 480

screen = pygame.display.set_mode((w,h))
morphingShape = pygame.Surface((20,20))
morphingShape.fill((255, 137, 0)) #random colour for testing
morphingRect = morphingShape.get_rect()

def ShapeSizeChange(shape, screen):
    x = random.randint(-21, 20)
    w = shape.get_width()
    h = shape.get_height()
    if w + x > 0 and h + x > 0:
        shape = pygame.transform.smoothscale(shape, (w + x, h + x))
    else:
        shape = pygame.transform.smoothscale(shape, (w - x, h - x))
    shape.fill((255, 137, 0))
    rect = shape.get_rect()
    screen.blit(shape, rect)
    return shape

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
    morphingShape = ShapeSizeChange(morphingShape, screen)
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T23:12:02.873

在每一帧（While 循环的每次迭代）上，您都应该擦除屏幕。默认情况下，屏幕（窗口）颜色为黑色，因此您应该通过调用清除屏幕`screen.fill( (0,0,0) )`。下面是完整的代码，现在可以按预期工作：

```
import sys, random, pygame
from pygame.locals import *

pygame.init()

w = 640
h = 480

screen = pygame.display.set_mode((w,h))
morphingShape = pygame.Surface((20,20))
morphingShape.fill((255, 137, 0)) #random colour for testing
morphingRect = morphingShape.get_rect()

# clock object that will be used to make the animation
# have the same speed on all machines regardless
# of the actual machine speed.
clock = pygame.time.Clock()

def ShapeSizeChange(shape, screen):
    x = random.randint(-21, 20)
    w = shape.get_width()
    h = shape.get_height()
    if w + x > 0 and h + x > 0:
        shape = pygame.transform.smoothscale(shape, (w + x, h + x))
    else:
        shape = pygame.transform.smoothscale(shape, (w - x, h - x))
    shape.fill((255, 137, 0))
    rect = shape.get_rect()
    screen.blit(shape, rect)
    return shape

while True:
    # limit the demo to 50 frames per second
    clock.tick( 50 );

    # clear screen with black color
    # THIS IS WHAT WAS REALLY MISSING...
    screen.fill( (0,0,0) )

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
    morphingShape = ShapeSizeChange(morphingShape, screen)
    pygame.display.update() 
```

请注意，只需添加即可`screen.fill( (0,0,0) )`解决您的问题。

# java - 在 Eclipse 中安装 Glassfish 服务器工具时出错

> ID：11767237
> 
> 赞同：2
> 
> 时间：2012-08-01T20:40:33.810
> 
> 标签：java, eclipse, glassfish, eclipse-indigo, eclipse-juno

从昨天下午开始，我在 Eclipse Indigo 和 Juno 中安装 Glassfish 服务器工具时遇到了麻烦，我在几台计算机上甚至在不同的地方尝试过，尽管如此，错误总是一样的。

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Problems downloading artifact: osgi.bundle,oracle.eclipse.tools.glassfish,4.2.1.201201241947.
MD5 hash is not as expected. Expected: 5366f96e7efd38d97445848eafaa0ed4 and found ed73a6517d24fd8099c3a4768e61744c.
Problems downloading artifact: org.eclipse.update.feature,oracle.eclipse.tools.indigo.glassfish,2.0.1.201201241947.
MD5 hash is not as expected. Expected: 1dbc10b2ac7027cae9c370de3adc984c and found f2db568f92aeb241eca747deceb23814. 
```

什么可能导致此错误？怎么修？甲骨文有错误吗？

任何人都可以确认是否会发生同样的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:17:48.827

当我尝试通过 Eclipse Juno IDE 中的“新服务器向导”安装 GlassFish 服务器适配器时遇到了同样的问题。

最终，我成功安装了*Oracle GlassFish 服务器工具*，方法是转到 Help -> Install New Software... 并输入此站点位置： http: [//download.java.net/glassfish/eclipse/juno](http://download.java.net/glassfish/eclipse/juno)（如果您使用其他 Eclipse 版本结束它带有适当的后缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:29:42.763

我只是有同样的问题。事实证明，关闭防病毒软件解决了它。不要问我为什么... Eclipse Juno 和 AVG 防病毒软件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:30:38.030

> 您是否尝试过手动下载和安装玻璃鱼？然后将您的安装添加到eclipse中的服务器窗口？或者您还尝试了哪些其他方法？

**更新：**

只是为了防止人们对我投反对票，请**参考“dangling_pointer”给出的**答案，他的答案以更具建设性的方式给出，并提供了如何做到这一点的链接和步骤。因此，即使两个答案最终都告诉你同样的事情，一个显示了到达那里的步骤。

# php - 将 CSV 文件导入 MySQL 数据库

> ID：11767238
> 
> 赞同：6
> 
> 时间：2012-08-01T20:40:33.567
> 
> 标签：php, mysql, mysqldump, mysql-error-1064

我有记录到`.CSV`文件中，我想将它们导入`MySQL`数据库。

每当我导入时，`.CSV`我都会收到消息`Import has been successfully finished...`，但 114 条记录中只有 79 条被插入到数据库中。

当我尝试导入`.CSV`包含 411 条记录的文件时，只插入了 282 条记录。获得 411 条记录的 CSV 文件包括两类记录`Active and Sold`，其中 114 条记录处于活动状态。

有人遇到过这种问题吗？如果是这样应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:19:19.130

我也有这个问题。尽管它有点旧并且这些建议朝着一个方向发展，但我找到了解决方案。我正在创建一个大型数据库并导入并且发生了同样的事情，经过反复试验，我意识到创建了一个密钥以某种方式分配（我不认识它，因为我正在使用新皮肤并且总是使用旧皮肤）。取出不知何故不是由我分配的钥匙，只留下主钥匙，然后砰地一声，吸收数据上传。此外，现在视图有问题，并且关于您的问题的请求超时。我将查看器显示推到数千，现在卡住了，无法使用我的 CP 在任何地方访问配置文件。因此，挂起和托管客户支持会懒惰地阅读我的担忧并最终覆盖它 - 我将不得不删除整个表格而不是任何 DROP 可以' 甚至无法将 SQL 运行为因过载而冻结。因此，值得深思的是将您的表格视图保持在低位，这就像在我的情况 b/c 中那样糟糕在控制中正确，这对我来说更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:27:04.723

我用 php 编写了自己的 csv 导入器。我使用 php 命令 fgetcsv 读取 csv 文件，然后在循环中使用 mysql insert 命令。

```
$handle = fopen($this->file, "r");
$i=0;
$delimiter = ($this->fieldDelimiter == 'TAB') ？chr(9) : $this->fieldDelimiter;
而 (($data = fgetcsv($handle, 10000, $delimiter)) !== FALSE)
{
     $我的数据[] = $数据；
}
fclose（$句柄）；
重置（$mydata）；
if ($this->CSVhasTitle)
{
      $mydata = array_slice($mydata,1); //删除第一行
}

```

然后我遍历我的数组并使用mysql插入：

```
foreach ($mydata 作为 $value)
{
     插入 $table (...) 值 (....)
}

```

但是我在循环之前将确切的列名添加到数组中。我有一个包含所有列名的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:32:52.273

查看您的 CSV 文件。它很可能包含类似

```
1,2,"一些数据",1
2,5,"data,with,comma",2

```

如果不指定 COLUMNS OPTIONALLY ENCLOSED BY '"' (SINGLE_QUOTE DOUBLE_QUOTE SINGLE_QUOTE) 那么第二行第三列的字符串数据中嵌入的逗号将无法正确导入。

检查 CSV 以查看正在使用的附件字符并在 phpmyadmin 界面中指定。

# ios - 如何阻止 viewForAnnotation 方法覆盖 iOS 中的默认用户位置蓝色信标

> ID：11767240
> 
> 赞同：17
> 
> 时间：2012-08-01T20:40:58.983
> 
> 标签：ios, xcode, location, mkannotation, mkannotationview

现在我正在使用注释填充地图视图，并显示用户的当前位置。使用 viewForAnnotation 方法，它使用默认的红色引脚覆盖所有注释，但我想返回其他注释的视图，但将用户位置保留为默认的蓝色信标。有没有办法简单地做到这一点，或者我必须创建一个新的注释视图并根据注释返回正确的视图？

现在我有类似的东西：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if (annotation.coordinate == locationManager.location.coordinate) {

return nil;

    }else {

    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Beacon"];

    // Button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    button.frame = CGRectMake(0, 0, 23, 23);
    annotationView.rightCalloutAccessoryView = button;

    annotationView.canShowCallout = YES;

    return annotationView;
}
} 
```

但是我不能将两者等同起来，因为我无法从注释参数中获取坐标属性。

有人知道对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-01T20:49:58.753

在此处查看文档：

[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)

正如它所说：

> 如果注解参数中的对象是 `MKUserLocation`类的实例，您可以提供自定义视图来表示用户的位置。要使用默认系统视图显示用户的位置，请返回 nil。

所以你可以添加一个条件来检查这个：

```
if([annotation isKindOfClass: [MKUserLocation class]]) {
  return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T05:35:01.230

**斯威夫特 5.0**

在函数顶部打勾以忽略 userLocation：

```
 func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {
        guard annotation as? MKUserLocation != mapView.userLocation else { return } 
```

# glsl - GLSL 中的函数调用是否昂贵（对于 PowerVR 芯片）？

> ID：11767243
> 
> 赞同：0
> 
> 时间：2012-08-01T20:41:14.360
> 
> 标签：glsl

我的假设是 GLSL 编译器只是内联所有函数调用，使它们变得便宜。但是，如果 GLSL 中的函数调用实现了堆栈帧等，那么它们可能会非常昂贵。有谁知道 GLSL 函数调用是否很昂贵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:35:21.460

通常，即使没有内联，函数调用*也应该是廉价的，因为不存在堆栈帧之类的东西（GLSL 中没有递归！）。*因此，因此，函数调用不应该是任何架构（可能是 1-2 个周期）的高昂开销。

但是，函数调用通常发生在条件分支的上下文中，例如，当工作组中的分支是发散的（也就是说，并非所有线程都采用*完全相同*的路径）`if(foo) bar(); else baz();`时，这在 GPU 上本身就非常昂贵。 如果只有一个线程占用，或者*可以* **如果在工作组中采用不同的路径，GPU 必须要么执行两条路径，然后进行条件移动（上一代硬件的常见情况），要么（隐式）在最新一代硬件上插入同步点。在这种情况下，每个线程只评估所采用的路径（可以说可以节省一些功率），但实际上所有线程都运行锁步，并且短路径与长路径一样长。换句话说，工作组中的所有像素（或顶点，或工作项）的处理速度与组中*最慢*的一样快。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:04:26.560

函数调用可能很昂贵，具体取决于您的设备。我建议你看看 Aras 的 GLSL 优化器（来自 Unity）：

[https://github.com/aras-p/glsl-optimizer](https://github.com/aras-p/glsl-optimizer)**

# c++ - 括号和解包可变参数模板参数

> ID：11767246
> 
> 赞同：5
> 
> 时间：2012-08-01T20:41:18.817
> 
> 标签：c++, c++11, variadic-templates

> **可能重复：**
> [括号可以将任意标识符作为参数吗？C++](https://stackoverflow.com/questions/3246895/can-parentheses-take-arbitrary-identifiers-as-arguments-c)

我的问题是关于使用参数包“解包”运算符，`...`. 以下代码片段在 g++ 4.7.1 中给出了编译器错误（最后一行*'...' 之前的预期参数包*），我想知道为什么。

```
template<class T> struct type_wrapper 
{ typedef T type; };

template<class...Ts> struct variadic_wrapper { };

// This compiles:
template<class...Ts> struct variadic_type_wrapper 
{ typedef variadic_wrapper<typename type_wrapper<Ts>::type...> type; };

// Parentheses screw it up:
// Error: expected parameter pack before '...'
template<class...Ts> struct variadic_type_wrapper
{ typedef variadic_wrapper<(typename type_wrapper<Ts>::type)...> type; }; 
```

表达式是否`(...)`隐藏了底层类型的数量？感谢您清除此问题！

# webgl - 在 Chrome 中获取“性能警告”消息

> ID：11767248
> 
> 赞同：2
> 
> 时间：2012-08-01T20:41:27.137
> 
> 标签：webgl, three.js

我最近才开始收到这些消息，想知道是否有人看过它们，或者知道是什么原因造成的。我在 MacOS 上使用 Chrome 版本“21.0.1180.57”的 Three.js。我没有通过 Safari 或 FireFox 收到这些消息。

> 性能警告：属性 0 已禁用。这有显着的性能损失
> 
> WebGL：错误太多，不会再向控制台报告此上下文的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:41:02.870

Firefox 上的相同消息是：“错误：WebGL：未启用顶点属性 0 数组的绘图会强制浏览器在桌面 OpenGL 平台上（例如在 Mac 上）运行时进行昂贵的仿真工作。最好始终在启用顶点属性 0 数组的情况下进行绘制，通过使用 bindAttribLocation 将一些始终使用的属性绑定到位置 0。"

这不仅是性能上的缺陷，而且还会导致糟糕的输出。

**问题**：如果 JS 尝试在不提供颜色数组的网格上运行期望 gl_Color 中的颜色信息的 WebGL 着色器，则会出现此消息。

**解决方案**：使用具有恒定颜色的 WebGL 着色器而不访问 gl_Color 或在要着色的网格中提供颜色数组。

如果使用来自 Evan Wallace 的 lightgl.js，请尝试`colors:true`在`new GL.Mesh`语句中添加选项并提供与您的数组`mesh.colors`大小相同的适当`vertices`数组。或者试试这个着色器：

```
blackShader = new GL.Shader(
  'void main() { gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex; }',
  'void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0); }'
); 
```

*抱歉，我从未使用过 Three.js，但问题应该类似，在着色之前为您的网格提供颜色。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:52:24.433

看起来像一个 Chrome 错误：

[http://code.google.com/p/chromium-os/issues/detail?id=32528](http://code.google.com/p/chromium-os/issues/detail?id=32528)

# rest - BaseX RESTXQ “hello world”示例

> ID：11767250
> 
> 赞同：3
> 
> 时间：2012-08-01T20:41:39.953
> 
> 标签：rest, basex

我正在努力开始使用 BaseX RESTXQ API。

我已经下载并安装了最新版本的 BaseX for Windows。我通过单击 BaseX 安装添加到 Windows 开始菜单的“BaseX 服务器（开始）”图标启动了 BaseX 服务器。

看来我需要创建一个带有`.xqm`扩展名的文件（例如。`hello.xqm`）并将其放在某处。

1.  你有一个最小的“hello world”类型的示例文件，例如。`hello.xqm`让我开始？

2.  我应该把`hello.xqm`文件放在哪里，以便它在我默认安装的 BaseX 上运行？

3.  我需要将浏览器指向哪里，如果它有效，我应该看到什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:25:55.640

我们注意到，Windows 版本 BaseX 的 7.3 版本中的 web 文件被意外移动到了 bin 目录。您将在 BaseX 的最新（稳定）快照中找到一个预打包的 RESTXQ 模块：

[http://files.basex.org/releases/latest/](http://files.basex.org/releases/latest/)

您还可以查看 BaseX RESTXQ 文档：

[http://docs.basex.org/wiki/RESTXQ](http://docs.basex.org/wiki/RESTXQ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T21:17:17.373

我发现在 BaseX 中使用 restxq 创建 Web 应用程序的幻灯片非常好。请参阅本文：

[http://files.basex.org/publications/xmlprague2013/slides/Andy-Bunce-BaseX-User-Group-Talk.pdf](http://files.basex.org/publications/xmlprague2013/slides/Andy-Bunce-BaseX-User-Group-Talk.pdf)

这里也是很好的例子

[https://github.com/siserle/blog-example](https://github.com/siserle/blog-example)（感谢siserle）

# android - 更多 Eclipse 疯狂 - 无法设置 Android SDK。不保存

> ID：11767260
> 
> 赞同：0
> 
> 时间：2012-08-01T20:42:29.413
> 
> 标签：android, eclipse

这是我第n次打开一个新项目，并尝试设置Android SDK。我选择属性 --> Android ---> [] Android 4.03 点击应用 点击确定

返回和未选中。+ 一堆找不到活动错误。这是怎么回事。尝试过项目-修复属性，清理等。

# c# - Visual Studio 中的“添加现有项目”：是否可以将“添加为链接”设为默认值？

> ID：11767269
> 
> 赞同：14
> 
> 时间：2012-08-01T20:43:22.547
> 
> 标签：c#, visual-studio, projects-and-solutions

[正如在这个](https://stackoverflow.com/a/1212082/650012)SO 答案中指出的那样，Visual Studio 中的*Add > Existing item*对话框默认显示*Add*按钮（这意味着所选项目将被物理复制到新位置），而理想的操作通常是（总是？）*添加为链接*。

是否可以配置 Visual Studio，以便在打开“*添加”>“现有项目*”对话框时默认选择“*添加为链接”？*

 *我已经彻底搜索了Visual Studio 中的“*选项”对话框，并检查了**MSDN 文档*以找到答案，但到目前为止无济于事。

**当两个新**项目要共享相同的代码库时， [Project Linker](http://msdn.microsoft.com/en-us/library/ff921108.aspx)将是一个很好的自动链接选择。但是，当将大量文件从现有项目链接到新项目时，似乎仅限于*Add > Existing item*方法，如果*将 Add as link*设为默认动作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T12:13:05.823

不幸的是，没有选择。但也有一线希望。您可以将文件拖到项目中并将它们放到所需的文件夹中。文件被复制到您的项目中。如果您按下`Alt`键进行拖放操作，则不会复制文件而是链接文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T13:26:53.890

您还可以使用[VSCommands](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)扩展，它在解决方案资源管理器中的文件夹和文件上添加“复制为链接”。之后，您可以在所需位置执行“粘贴链接”。它还允许您通过 cotnext 菜单中的“定位源文件”从链接项目导航到源项目。适用于 vs2010 和 vs2012。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:12:53.180

看来，当您“添加现有”到解决方案文件夹（而不是实际文件夹）时，您总是将这些项目添加为链接。如果您将现有项目添加到实际文件夹，那么您会看到提供“添加为链接”选项的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T03:05:42.863

只需编辑项目文件并更改文件的路径。您可以使用 ../ 相对移动文件夹，它从项目文件夹开始。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-11-22T13:00:28.800

[我在这里](http://weblogs.asp.net/avnerk/archive/2007/10/28/another-minor-c-c-difference-adding-existing-files.aspx)找到了一个不错的提示：如果您想在 VS C# Express 2010 的“添加现有项目”对话框中添加现有项目作为链接，则必须从“添加”按钮的下拉列表中明确选择“添加为链接”。*

# android - AChartEngine Barchart 条形对齐

> ID：11767272
> 
> 赞同：3
> 
> 时间：2012-08-01T20:43:32.837
> 
> 标签：android, bar-chart, achartengine, alignment

我在使用 Achartengine 时遇到了一些问题。这非常有用，我知道。我正面临一个条形对齐问题。我的标签在中间，而我的条似乎有点移位。我放了一个图片链接：

[条形图对齐](http://imageshack.us/photo/my-images/69/chartnj.png/)

标签对齐用橙色圈起来，而条形对齐用绿色圈起来。就像您会注意到这种行为发生在整个条形图上一样。这是我的代码：

```
public void execute(){
    for(int i = 0; i < xyRenderer.getSeriesRendererCount(); i++){
        SimpleSeriesRenderer seriesRenderer = xyRenderer.getSeriesRendererAt(i);
        seriesRenderer.setDisplayChartValues(true);
    }
    chartView = ChartFactory.getBarChartView(this.context, xyDataset, xyRenderer, BarChart.Type.STACKED);
}

private void setupRenderer(XYMultipleSeriesRenderer renderer){
    renderer.setXLabels(0);
    renderer.setMargins(new int[]{20, 20, 20, 20});
    renderer.setYLabels(5);
    renderer.setOrientation(Orientation.HORIZONTAL);
    renderer.setAxisTitleTextSize(12);
    renderer.setChartTitleTextSize(12);
    renderer.setLabelsTextSize(10);
    renderer.setLegendTextSize(10);
    renderer.setShowGrid(true);
    renderer.setFitLegend(true);    
    renderer.setXAxisMin(0);
    renderer.setYAxisMin(0);
    renderer.setXAxisMax(7);
    renderer.setYAxisMax(100);
    renderer.setXLabelsAlign(android.graphics.Paint.Align.CENTER);
    renderer.setXLabelsColor(Color.BLACK);
    renderer.setYLabelsColor(0, Color.BLACK);
    renderer.setAxesColor(Color.BLUE);
    renderer.setLabelsColor(Color.RED);
    renderer.setPanEnabled(false, false);
    renderer.setZoomEnabled(false, false);
    renderer.setApplyBackgroundColor(true);
    renderer.setGridColor(Color.argb(0x00, 0x01, 0x01, 0x01));
    renderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01));
    renderer.setBackgroundColor(Color.argb(0x00, 0x01, 0x01, 0x01));
    renderer.setBarSpacing(0.75);
    renderer.clearXTextLabels();
    renderer.setInScroll(true);
}

public void setChartData(HashMap<String, Double> teamData){
    createSeriesRenderer(1);

    double space = 0.75f;
    CategorySeries categorySeries = new CategorySeries("% aproveitamento");
    for(Map.Entry<String, Double> currentEntry : teamData.entrySet()){
        String label = currentEntry.getKey();
        DecimalFormat decimalFormat = new DecimalFormat("#0.0");
        String formattedNum = decimalFormat.format(currentEntry.getValue());
        xyRenderer.addXTextLabel(space, label);
        categorySeries.add(Double.parseDouble(formattedNum));
        space += 0.75;
    }

    xyDataset.addSeries(categorySeries.toXYSeries());
}

private void createSeriesRenderer(int howMany){
    for(int i = 0; i < howMany; i++){
        SimpleSeriesRenderer seriesRenderer = new SimpleSeriesRenderer();
        seriesRenderer.setColor(Color.RED);
        xyRenderer.addSeriesRenderer(seriesRenderer);
    }
} 
```

最奇怪的是在 AChartEngine 条形样本上，这种行为不会发生并且条形正确对齐。这是 AChartEngine 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:25:00.870

让你的间距`renderer.setBarSpacing(-0.5)`，看看它会完美地为你工作，你会得到你的酒吧的正确对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:33:24.763

尝试注释掉 renderer.setBarSpacing(0.75) 调用，您应该可以很好地对齐条形。

# excel - Excel VBA - 如果单元格是整数，则删除整行

> ID：11767277
> 
> 赞同：3
> 
> 时间：2012-08-01T20:43:56.860
> 
> 标签：excel, vba, delete-row

我一直在尝试使用一些关于如何删除 Excel VBA 上的整行的片段，但我无法修改它们以包含“IsNumber”验证。

我需要能够选择一个活动区域，例如：

```
Set r = ActiveSheet.Range("A1:C10") 
```

并且当它逐行遍历时（并检查该区域的每个单元格），如果单元格上有一个数字，则删除整行。

例如：

```
NA NA NA 21
NA 22 NA 44
00 NA NA NA
NA NA NA NA
55 NA NA NA 
```

然后宏将删除所有行，除了第 4 行

```
NA NA NA NA 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:04:32.827

随便挑吧：）

**方式 1（尝试和测试）**

这用于`SpecialCells`识别具有数字的行。

```
Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range

    On Error GoTo Whoa

    Set ws = Sheets("Sheet1")

    With ws
        Set rng = .Cells.SpecialCells(xlCellTypeConstants, xlNumbers).EntireRow

        rng.ClearContents '<~~ or rng.Clear if cells have formatting

        .Cells.Sort Key1:=.Range("A1")
    End With

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

**方式 2（尝试和测试）**

这使用循环和`Count()`检查数字

```
Sub Sample()
    Dim ws As Worksheet
    Dim delrange As Range
    Dim lRow As Long, i As Long

    On Error GoTo Whoa

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        For i = 1 To lRow
            If Application.WorksheetFunction.Count(.Rows(i)) > 0 Then
                If delrange Is Nothing Then
                    Set delrange = .Rows(i)
                Else
                    Set delrange = Union(delrange, .Rows(i))
                End If
            End If
        Next i

        If Not delrange Is Nothing Then delrange.Delete
    End With

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

**方式 3（尝试和测试）**

这使用自动过滤器。我假设第 1 行有标题，并且您的范围内没有空白单元格。

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, lCol As Long, i As Long
    Dim ColN As String

    On Error GoTo Whoa

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row
        lCol = .Cells(1, .Columns.Count).End(xlToLeft).Column

        For i = 1 To lCol
            '~~> Remove any filters
            .AutoFilterMode = False
            ColN = Split(.Cells(, i).Address, "$")(1)

            '~~> Filter, offset(to exclude headers) and delete visible rows
            With .Range(ColN & "1:" & ColN & lRow)

                .AutoFilter Field:=1, Criteria1:=">=" & _
                Application.WorksheetFunction.Min(ws.Columns(i)), _
                Operator:=xlOr, Criteria2:="<=" & _
                Application.WorksheetFunction.Max(ws.Columns(i))

                .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
            End With

            '~~> Remove any filters
            .AutoFilterMode = False
        Next
    End With

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:21:53.190

```
Sub DeleteNumeric()

    Dim i As Long
    Dim rCell As Range
    Dim rRow As Range
    Dim rRng As Range

    'identify the range to search
    Set rRng = Sheet1.Range("A1:D5")

    'loop backwards when deleting rows
    For i = rRng.Rows.Count To 1 Step -1
        'loop through all the cells in the row
        For Each rCell In rRng.Rows(i).Cells
            If IsNumeric(rCell.Value) Then
                'delete the row and go to the next one
                rCell.EntireRow.Delete
                Exit For
            End If
        Next rCell
    Next i

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:07:19.953

```
Dim currentPos As Integer

currentPos = 1

Do While (currentPos < yourNumberofRow)
If (Range("A" & currentPos).Value.IsNumeric = True) Then
    Rows(currentPos & ":" & currentPos).Select
    Selection.Delete
End If

currentPos = currentPos +1
Loop 
```

不是尝试，而是简单的代码来理解删除和 IsNumeric 测试。

# ios5 - AVPlayer observeValueForKeyPath

> ID：11767283
> 
> 赞同：1
> 
> 时间：2012-08-01T20:44:21.423
> 
> 标签：ios5, audio-streaming, avplayer, avaudiosession, addobserver

我有一个播放流内容的音频应用程序。问题是有时，当信号很弱时，它会停止播放。网络仍然可以访问，但缓冲区似乎已经空了。

我尝试实现一个观察者来监视玩家的状态变化，但它不起作用，该方法永远不会被调用。

作为一个特殊性，AVPlayer 实例位于 AppDelegate 中，因为我有多个视图，并且播放器必须继续播放显示的任何视图。所以这是一段示例代码：

```
- (void)viewDidLoad
    {
        [super viewDidLoad];
        isPlaying = false;
        playButton.enabled = NO;

        //Add en observer for reachability change
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(reachabilityChanged:) 
                                                     name:kReachabilityChangedNotification
                                                   object:nil];

        //Adding the observer for player's status change
        AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [delegate.player addObserver:self forKeyPath:@"status" options:0 context:playerStatusContext];

        [self initPlayer];
    }

    //Event raised whenever the current status of the player change
    - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

        UIAlertView *alert = [UIAlertView alloc];
        NSString *chaineConcat = @"Entering observer method..."];
        [alert initWithTitle:@"Test" message:chaineConcat delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];   
        [alert show];

        if (context == playerStatusContext) {
            AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
            NSString *statusPlayer = nil; 
            if (object == delegate.player && [keyPath isEqualToString:@"status"]) {
                if (delegate.player.status == AVPlayerStatusReadyToPlay) {
                    statusPlayer = @"Everything's OK";
                } else if (delegate.player.status == AVPlayerStatusFailed) {
                    statusPlayer = @"Houston, we have a problem";
                }
            }
            [self syncUI];

            UIAlertView *alert = [UIAlertView alloc];
            NSString *chaineConcat = [NSString stringWithFormat:@"%@/%@/", @"Player status' is ", statusPlayer];
            [alert initWithTitle:@"Test" message:chaineConcat delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];   
            [alert show];

        }else {
            [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        }

        return;
    }

- (void) initPlayer {

    // Load the array with the sample file
    NSString *urlAddress = @"http://MYSTREAMURL";

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    //Create a URL object.
    delegate.urlStream = [NSURL URLWithString:urlAddress];

    //Reinit AVPlayer
    delegate.player = [AVPlayer playerWithURL:delegate.urlStream];

} 
```

有谁知道为什么没有提出该事件？我在该方法中有 2 个警报，但没有人被触发，这意味着它没有进入该方法。所有这一切的目标是尝试实现一种让玩家在发生这种情况时重新启动的方法。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:06:33.993

您正在尝试在创建要观察的对象之前添加观察者。您只是向`nil`对象发送消息。
打电话`-initPlayer`前打电话`-addObserver:forKeyPath:options:context:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T01:21:45.837

这是有效的代码。

声明一个可观察的 AVPlayer 对象：

```
@interface APLViewController ()
{
    AVPlayer *_player;
} 
```

分配和初始化 AVPlayer：

```
- (void)viewDidLoad
{
[super viewDidLoad];

 _player = [[AVPlayer alloc] init];
} 
```

添加观察者：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self addObserver:self forKeyPath:@"player.currentItem.status" options:NSKeyValueObservingOptionNew context:AVPlayerItemStatusContext];
    [self addTimeObserverToPlayer];

    [super viewWillAppear:animated];
} 
```

处理观察者：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context == AVPlayerItemStatusContext) {
        AVPlayerStatus status = [change[NSKeyValueChangeNewKey] integerValue];
        switch (status) {
            case AVPlayerItemStatusUnknown:
                break;
            case AVPlayerItemStatusReadyToPlay:
                self.playerView.presentationRect = [[_player currentItem] presentationSize];
                break;
            case AVPlayerItemStatusFailed:
                [self stopLoadingAnimationAndHandleError:[[_player currentItem] error]];
                break;
        }
    }
    else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

要删除观察者：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [self removeObserver:self forKeyPath:@"player.currentItem.status" context:AVPlayerItemStatusContext];
    [self removeTimeObserverFromPlayer];

    [super viewWillDisappear:animated];
} 
```

一定要把所有东西都放在我做过的地方，否则它可能不起作用。

# php - Google Drive SDK (PHP) Children: list : 列表为空

> ID：11767286
> 
> 赞同：0
> 
> 时间：2012-08-01T20:44:29.430
> 
> 标签：php, google-drive-api

[https://developers.google.com/drive/v2/reference/children/list](https://developers.google.com/drive/v2/reference/children/list)

我使用从文档中获取的这个 php 函数

```
 /**
 * Print files belonging to a folder.
 *
 * @param apiDriveService $service Drive API service instance.
 * @param String $folderId ID of the folder to print files from.
 */
function printFilesInFolder($service, $folderId) {
  $pageToken = NULL;

  do {
    try {
      $parameters = array();
      if ($pageToken) {
        $parameters['pageToken'] = $pageToken;
      }
      $children = $service->children->listChildren($folderId, $parameters);

      foreach ($children->getItems() as $child) {
        print 'File Id: ' . $child->getId();
      }
      $pageToken = $children->getNextPageToken();
    } catch (Exception $e) {
      print "An error occurred: " . $e->getMessage();
      $pageToken = NULL;
    }
  } while ($pageToken);
} 
```

我在这个文件夹中有 2 个文件，一个是图片，另一个是文件夹，但 $children var 不包含任何项目：

```
ChildList Object
(
    [nextPageToken] => 
    [kind] => drive#childList
    [__itemsType:protected] => ChildReference
    [__itemsDataType:protected] => array
    [items] => Array
        (
        )

    [nextLink] => 
    [etag] => "WtRjAPZWbDA7_fkFjc5ojsEvE7I/lmSsH-kN3I4LpwShGKUKAM7cxbI"
    [selfLink] => https://www.googleapis.com/drive/v2/files/0B--Zn-zouTFrRURaNWp5VDN5LTA/children
) 
```

我还检查了 folderId 并且是好的，所以那里没有问题。

我的文件夹： ![文件夹](../Images/9e7655a9460fc90c3c7ecff5dca2abc1.png)

而且我没有任何错误信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:09:25.773

如果您希望能够列出文件，唯一的选择是使用更广泛的范围：[https](https://www.googleapis.com/auth/drive) ://www.googleapis.com/auth/drive 。请注意，如果不需要列出文件，我们不建议使用此范围。通过 阿兰

# android - Android AdMob：无法解析导入 com.google.ads

> ID：11767290
> 
> 赞同：1
> 
> 时间：2012-08-01T20:44:40.473
> 
> 标签：android, api, admob, adview

我已经完成了这些步骤： [https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/) https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals - 但它没有不行。在我的应用程序类中，我输入了：“import com.google.ads.*”，而 Eclipse 给了我一个错误：“无法解析导入 com.google.ads。”

在清单文件中我放了：...

在：属性 > Java 构建路径 > 库中，我添加了“GoogleAdMobAdsSdk-6.1.0.jar”。我签入：属性 > Android > Google API

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:43:59.667

确保没有任何其他编译错误，删除并重新添加 Jar 文件并清理并重建。

# javascript - HTML按钮onclick调用javascript文件不起作用

> ID：11767295
> 
> 赞同：0
> 
> 时间：2012-08-01T20:45:01.850
> 
> 标签：javascript, html, function, button, onclick

我像这样在头部导入了javascript文件：

```
<script type="text/javascript" src="js/ISO_TR_230-9.js"></script> 
```

该文件包含一个函数*calc1*，其设置如下：

```
function calc1() {} 
```

我从这样设置的按钮调用*calc1 ：*

```
<button type="button" onclick="calc1()">Calculate</button> 
```

单击按钮后，我收到错误*calc1 is not defined*。发生这种情况的地方有什么可能发生的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:12:32.590

```
<button type="button" onclick="calc1()">Calculate</button> 
```

设置事件的这种风格已经过时了。我认为当你调用它时已经创建了。

所以尝试将处理程序放在 JS 文件中。以及来自 Jq 的 window.onload() 或 Smthn。

# javascript - 美化文本区域内的代码

> ID：11767305
> 
> 赞同：17
> 
> 时间：2012-08-01T20:45:27.517
> 
> 标签：javascript

我找到了这个项目

[http://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)

我已经测试过了，它工作正常

但它只适用于 ( `<pre>`)

我想和 ( `<textarea>`)一起使用

但如果我替换`<pre>`为`<textarea>`

它不工作！

那么如何在 textarea 中使用这个脚本呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-01T20:53:27.173

你试过[codemirror](http://codemirror.net/)吗？

它做你想做的事：*美化*textarea 中的代码。

# bash - 提高服务器上预缓存文件的效率

> ID：11767306
> 
> 赞同：1
> 
> 时间：2012-08-01T20:45:28.650
> 
> 标签：bash, curl, performance-testing

我是一名实习生，正在测试我们在实验室的服务器上安装的透明缓存解决方案。为此，我预先缓存了一些文件以进行涉及新内容和已缓存内容的测试。

但是，我们在那台机器上有 48 GB 的 RAM，并且我们正在使用小 (16 KB) 文件进行测试，所以为了让我们真正回到我们的 TC 解决方案，我缓存了大约 600 万个这些文件。哎呀。

我一直在运行以下 bash 脚本，希望能够分离出一堆并行进程，以便这种预缓存花费可管理的时间，（忽略虚拟 IP）：

`for ((i=0;i<1000;i++)); do for ((j=$((6000*i));j<$((6000*$((i+1))));j++)); do curl x.x.x.x/originDir/test16k_${j}.txt > /dev/null 2>&1 & done; wait; done;`

但是，我仍然只能在我们的 10 Gbps 光纤上每隔几秒钟缓存大约 1000 个文件，这与我在做序列时得到的差不多`curls`。对于 600 万个文件，这将是很多秒。

有谁知道更好的方法来解决这个问题？

非常感谢，RS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:28:50.047

一项更改是使用 curl 的计步器，以便 curl 执行迭代而不是 bash。这应该会加快速度，因为您将避免 bash 解释器和进程启动时间。

```
curl x.x.x.x/originDir/test16k_[0-5999].txt 
```

# java - 看不懂java中split的使用

> ID：11767309
> 
> 赞同：0
> 
> 时间：2012-08-01T20:45:31.703
> 
> 标签：java

我的代码是：-

```
class SplitString {
    public static void main(String[] args) {
        Pattern p;
        String test = "a1b2c3";
        String[] token1 = test.split("\\d");
        System.out.println("first case : " + token1.length);

        for (String s : token1)
            System.out.print(s + " ");

        String[] token2 = test.split("\\b");
        System.out.println("\n\nsecond case : " + token2.length);

        for (String s : token2)
            System.out.print(s + " ");

        String[] token3 = test.split("\\a");
        System.out.println("\n\nthird case : " + token3.length);

        for (String s : token3)
            System.out.print(s + " ");
    }
} 
```

输出：-

```
first case : 3
a b c

second case : 2
 a1b2c3

third case : 1
a1b2c3 
```

我是 java 新手，试图执行 split 但无法掌握它的概念，因为所有案例都有不同的答案，但它们之间到底有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:49:33.197

您需要的一切都在 Javadoc 中。`split`将您提供的字符串解释为**正则表达式**，而不是文字字符串。[请在此处](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)找到有关正则表达式语法的完整详细信息。

或者，如果您使用的是 Eclipse，您可以使用 Eclipse 的 Find 对话框（选中“Regular expression”复选框）使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:50:34.830

Split 将使用公共分隔符将字符串分解为字符串数组。一个更常见的示例是，如果您的数据以逗号分隔，如下所示：

1,2,3,4,5

然后，如果你用逗号字符分割你的数据，你最终会得到一个由 5 个字符串组成的数组： ["1","2","3","4","5"]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:50:45.973

在第一种情况下，分隔符`\d`代表任何数字。字符串在每组数字处分开。

在第二种情况下，`\b`表示一个单词边界。字符串的开头很重要，因此字符串在那里被拆分。

在第三种情况下，`\a`表示字符 BEL (ASCII 7)。字符串中没有这样的字符，所以字符串没有被拆分。

[可以在此处](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)找到表达式语法的完整指南。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T20:51:41.953

见[模式类](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

```
\d  A digit: [0-9]
\a  The alert (bell) character ('\u0007')
\b  A word boundary 
```

所以第一种情况 - 拆分数字，第二个“一个单词”，第三个所有字符串 - 找不到响铃字符

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T20:51:45.350

`split`如您所知，该方法使用正则表达式模式来拆分字符串：

*   第一种情况`\d`使用数字作为分隔符将其拆分
*   第二种情况`\b`使用单词边界分割它，所以你实际上有一个空字符串和整个剩余部分
*   第三种情况`\a`是一个特殊字符，它不存在于您要拆分的字符串中，因此您只有一个标记

在[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)查看所有正则表达式选项。

# twitter - 是否可以阻止某些关注者看到推文？（推特 API）

> ID：11767311
> 
> 赞同：0
> 
> 时间：2012-08-01T20:45:39.007
> 
> 标签：twitter

我希望能够选择哪些关注者看到给定的推文，而不是删除关注者，这可能吗？Twitter API 是否允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:48:20.660

我不这么认为。Twitter API 反映了 Twitter 在日常使用中可以做的事情。您无法像在 Facebook 或 Google+ 中那样更改推文的共享设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:41:31.147

推文可以通过告诉人们他或她发送*合理*的推文来警告人们。但是没有任何 Twitter API 方法可以做到这一点。用户必须在 Twitter 网站的用户设置中执行此操作。

# c++ - 在写入文件后从文件中获取保存的数据而不关闭程序

> ID：11767312
> 
> 赞同：0
> 
> 时间：2012-08-01T20:45:43.257
> 
> 标签：c++, file-io, fstream

我有以下形式的代码：

```
func1()
{
    fstream stud("student", fstream::in | fstream::out | fstream::app);
    stud << "sameer";
    stud.close();
}

func2()
{
    string name;
    fstream stud("student", fstream::in | fstream::out | fstream::app);
    stud >> name;
    stud.close();
} 
```

这里两个函数都在同一个程序中，但即使`func1`已经`stud`关闭，在打开文件时所做`func2`的更改也不会反映出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:55:54.240

摆脱`fstream::app`你的读者。使用`fstream::app`，文件指针从文件末尾开始，因此您只需读取一个空字符串。

# c# - Server.Transfer 到一个页面

> ID：11767318
> 
> 赞同：0
> 
> 时间：2012-08-01T20:46:20.187
> 
> 标签：c#, sitecore, sitecore6, server.transfer

我正在使用 Sitecore，我必须显示页面集合中的第一页。到目前为止，这是我的代码：

```
private Item currItem = Sitecore.Context.Item;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (currItem.HasChildren || currItem.TemplateID == new Sitecore.Data.ID("45D58815-A301-4393-9BA0-30A00C9BB993"))
            {
                var getFirstChild = (from Item item in currItem.GetChildren()
                                     select item).First();
                if (getFirstChild.TemplateID == new Sitecore.Data.ID("45D58815-A301-4393-9BA0-30A00C9BB993") && getFirstChild != null)
                {
                    //Server.Transfer(getFirstChild.Paths.Path);
                }

                else
                {
                    //Load Generic Page!
                }
            }
            else
            {
                //Load Generic Page!!!
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:48:00.130

您可以使用[`Response.Redirect`](http://msdn.microsoft.com/en-us/library/ms524309%28v=vs.90%29.aspx)或 Server.Transfer。如果可以的话，我会推荐 Response.Redirect：

[Server.Transfer 对比 响应.重定向](https://stackoverflow.com/questions/224569/server-transfer-vs-response-redirect)

编辑：

好的，你可以这样做：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (currItem.HasChildren || currItem.TemplateID == new Sitecore.Data.ID("45D58815-A301-4393-9BA0-30A00C9BB993"))
            {
                var getFirstChild = (from Item item in currItem.GetChildren()
                                     select item).First();
                if (getFirstChild.TemplateID == new Sitecore.Data.ID("45D58815-A301-4393-9BA0-30A00C9BB993") && getFirstChild != null)
                {
                    Response.Redirect(getFirstChild.Paths.Path);
                }

                else
                {
                    //Load Generic Page!
                }
            }
            else
            {
                //Load Generic Page!!!
            }
        }
    } 
```

`Response`是 的属性，`Page`因此您可以使用它来重定向。

# tcl - tclsh "$0" "$@" 中 "$@" 的用途和作用

> ID：11767319
> 
> 赞同：2
> 
> 时间：2012-08-01T20:46:27.300
> 
> 标签：tcl, sh

我已经搜索了很长时间，但只能找到一个`$@`扩展某些内容的简短解释。

有人可以解释一下或向我提供一个链接，详细解释`"$@"`第二个论点的目的吗？

```
tclsh "$0" "$@" 
```

另外，我正在查看某人的脚本，他们有以下内容：

```
exec tclsh `basename $0` $* 
```

在这种情况下做什么`$*`？

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:32:53.377

这实际上不是 Tcl，而是 bash。`#!/bin/bash \`在第一行使用它曾经（或现在）并不少见。Tcl 也会忽略下一行（因为`\`在行尾），bash 会执行它。

关于 $* 和 $@，我建议阅读[bash](http://linux.die.net/man/1/bash)的手册页（在特殊参数下）。```用于命令替换，类似于 Tcl`[`和`]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T10:24:27.237

这些是 Tcl 脚本中经常使用的引导节的一部分。让我们得到整个节：

```
#!/bin/sh
# A Tcl comment, whose contents don't matter \
exec tclsh "$0" "$@" 
```

第一行将脚本作为 Bourne shell 程序运行（bash 和许多其他 shell 的工作方式相同；它是 POSIX 规范）。第二行被 shell 忽略。第三行 用传递给 shell 的参数用 tclsh*替换*shell。`"$0"`是脚本的名称，并且对于`"$@"`所有带有适当引用的参数来说都是神奇的。（您可能还会看到`${1+"$@"}`在某些较旧的 shell 中哪个是恶意错误的解决方法。）理论上您可以省略`exec`这里，但这意味着脚本的其余部分将在 Tcl 程序终止时由系统 shell 解释；这可能不是你想要的。最后，当 tclsh 看到上面的那些行时，它认为它们*都是*评论; Tcl 注释从`#`行首的 a 开始（或前面有空格），并*在允许行继续标记后*继续到行尾。（是的，这很不寻常。不过很有用。）

with 的形式`basename`很不寻常，因为它正在删除正在执行的文件的任何路径。这可能不是一个好主意，因为它可能意味着 tclsh 并不确切知道要执行哪个文件。同样，`$*`也几乎但不正确（它扩展到所有参数，但*没有*引用；如果用户传入带有空格的文件名，您很快就会看到区别！）

最后，这些天来，使用这样的起始节被认为是最佳实践：

```
#!/usr/bin/env tclsh 
```

它更短，更不容易出错，并且与 shell 一样标准化。

# css - Play Framework 2.0 在视图中查找当前动作

> ID：11767320
> 
> 赞同：5
> 
> 时间：2012-08-01T20:46:29.990
> 
> 标签：css, playframework, playframework-2.0

在 Play Framework 2.0 应用程序中，我希望能够为活动页面指定一个 CSS 类。我该怎么做？

```
<li @if( ) { class="active" }> 
  <a href="@routes.Application.index()"> Home </a> 
</li> 
```

具体来说，我在 if 语句中放了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T21:05:44.510

@request.uri 至少与播放框架 2 一起工作，以查看更多内容[http://www.playframework.org/documentation/api/2.0/java/play/mvc/Http.Request.html](http://www.playframework.org/documentation/api/2.0/java/play/mvc/Http.Request.html)

编辑：你可以试试这个例如..

```
@if(request.uri.contains("home")){ 
  ..home word in url..
} else {
  ..home word not in url..
} 
```

# objective-c - 为什么我的 NSTableView 数据源非法？

> ID：11767324
> 
> 赞同：1
> 
> 时间：2012-08-01T20:46:50.600
> 
> 标签：objective-c, nstableview

出于某种原因，我收到以下错误：

***非法的 NSTableView 数据源()。必须实现 numberOfRowsInTableView: 和 tableView:objectValueForTableColumn:row:

这是我的 AppDelegate.h

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate, NSUserNotificationCenterDelegate, NSTableViewDataSource, NSTableViewDelegate> {

    NSMutableArray *userNotifications;
}

@property NSMutableArray *userNotifications;

@end 
```

我的 AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate
@synthesize userNotifications;

- (void)applicationDidFinishLaunching:(NSNotification *)notification
{

    NSUserNotification *userNotification = notification.userInfo[NSApplicationLaunchUserNotificationKey];

    userNotifications = [NSMutableArray new];

    if(userNotification) {
        [self userActivatedNotification:userNotification];
    } else {
        for(int i=1; i <= 10; i++) {

            NSString *title = [NSString stringWithFormat: @"Title %d", i];
            NSString *message = [NSString stringWithFormat: @"Message %d", i];

            NSArray *notificationObj = [[NSArray alloc] initWithObjects:title, message, nil];
//          NSLog(@"Array: %@", notificationObj);
            [userNotifications addObject:notificationObj];
//          NSLog(@"Notifications: %@", userNotifications);
            [self deliverNotificationWithTitle:title message:message];
        }
    }

}

- (void)deliverNotificationWithTitle:(NSString *)title
                            message:(NSString *)message
{

    NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];
    NSUserNotification *userNotification = nil;

    userNotification = [NSUserNotification new];
    userNotification.title = title;
    userNotification.informativeText = message;

    center.delegate = self;
    [center scheduleNotification:userNotification];

}

- (void)userActivatedNotification:(NSUserNotification *)userNotification
{
//  [[NSUserNotificationCenter defaultUserNotificationCenter] removeDeliveredNotification:userNotification];

    printf("* User activated notification:");
//  NSLog(@"Title: %@", userNotification.title);just do it in
//  NSLog(@"Message: %@", userNotification.informativeText);
    [[NSWorkspace sharedWorkspace] openURL: [NSURL URLWithString:@"https://www.google.com/"]];
}

- (BOOL)userNotificationCenter:(NSUserNotificationCenter *)center
     shouldPresentNotification:(NSUserNotification *)userNotitification
{
    printf("* Notification presented.");
    return YES;
}

- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView
{
    return [userNotifications count];
}
- (id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    return [userNotifications objectAtIndex:row];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:59:47.020

我必须将我的 App Delegate 设置为表格视图的数据源。一旦我这样做了，错误就消失了。

# html - 仅当按下与该 bean 对应的按钮时，如何将特定 bean 从一个 JSP 文件传递 到另一个？

> ID：11767325
> 
> 赞同：0
> 
> 时间：2012-08-01T20:46:49.760
> 
> 标签：html, jsp, post, jstl, javabeans

我试图将一个 bean 从一个 JSP 页面传递到另一个页面。源页面是搜索的结果。JSP 页面使用 JSTL 从我的 servlet 接收的 ArrayList (returnedPubs) 中打印出每个 bean 的特定内容。在循环中，我创建了一个按钮。当按下该按钮时，将指向详细信息 JSP 页面，该页面将打印出该特定 bean 的所有内容。我该如何做到这一点？我不想再次查询该 bean 的 servlet，因为它已经在该 ArrayList 中。

这是源页面：（search_results.jsp）

```
<table cellpadding="10">
    <tr>
        <td><input type="button" value="Back" onCLick="history.back()"></td>
    </tr>
    <tr>
        <th></th>
        <th>Publication Number : </th>
        <th>ATA Number : </th>
        <th>Part Number(s) : </th>
        <th>Revision Date : </th>
    </tr>
    <c:forEach var="techPubBean" items="${returnedPubs}">
        <tr>
            <form method="post" action="details.jsp">
                <td>
                    <input type="submit" value="View Details" />
                </td>
                <td>${techPubBean.getPubNum()}</td>
                <td>${techPubBean.getAtaNum()}</td>
                <td>${techPubBean.getPartNumsTrunc()}</td>
                <td>${techPubBean.getRevDate()}</td>
            </form>
        </tr>
    </c:forEach>
</table><br/><br/> 
```

这是目标页面（details.jsp）

```
<table cellpadding="10">
    <tr>
        <td><input type="button" value="Back" onCLick="history.back()"></td>
    </tr>
    <tr>
        <th>ATA Number : </th>
        <td>${techPubBean.getAtaNum()}</td>
    </tr>
    <tr>
        <th>Publication Number : </th>
        <td>${techPubBean.getPubNum()}</td>
    </tr>
    ...
</table><br/><br/> 
```

如何将“techPubBean”从 search_results.jsp 传递到 details.jsp？其他一切正常并已到位。谢谢！我确信答案很简单。

肯尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:56:14.943

按照 Dave Newton 的评论，最简单的处理方法是在页面上输出内容并使用 css/js 隐藏它们。当然，假设您不介意在页面源中包含该内容，并且客户端“诡计”是可以接受的。

# css - 960grid 和 960px 宽度的列在一起？

> ID：11767336
> 
> 赞同：0
> 
> 时间：2012-08-01T20:47:13.903
> 
> 标签：css

好的，所以这件事整天困扰着我。我想在我的最新项目中使用 960gs，但我想有两列，一列`.grid_15 alpha omega`和另一列`.grid_8 alpha omega prefix_1`。当我这样做时，列有 590px 和 350px。如何让他们满足960px？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:51:21.620

每个网格在每边都有 10 像素的边距（所以每个网格之间会有 20 像素）。

590 + 350 = 940 + 20 = 960。

因此，无论您使用多少网格，它都按照预期的方式工作，全部 960 像素都被占用。

# extjs - Ext JS 4：为什么我的 Ext.data.Store“findRecord”函数没有返回值？

> ID：11767340
> 
> 赞同：1
> 
> 时间：2012-08-01T20:47:22.903
> 
> 标签：extjs, grid, find, categories, datastore

下面我试图根据为该字段（列）值存储的值在我的数据存储中为我的网格中的类别字段检索特定类别记录。“categoryId”的值返回“2”。为什么 findRecord 不返回记录？它为“类别”显示“-1”。当我将它用作表单中下拉列表的组合框存储时，key=2 的记录存在。我最终想找到 key=2 的记录，然后返回 value 属性，因此它在我的网格视图中显示该记录的 value 属性。

仅供参考：“key”属性是类别记录的 id，“value”属性是我要显示（或在网格单元格中呈现）的类别记录的名称。

**分类店铺：**

```
Ext.define('DropdownOption', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'key' },
        { name: 'value' }
    ]
});

var statusDropdownStore = new Ext.data.Store({
    proxy: new Ext.ux.AspWebAjaxProxy({
        url: '/track/Controls/Shared/GeneralService.asmx/GetDropdownOptions',
        actionMethods: {                
            read: 'POST'
        },
        extraParams: {
            user_login: authUser,
            table_name: '[status]'
        },
        reader: {
            type: 'json',
            model: 'DropdownOption',
            root: 'd'
        },
        headers: {
            'Content-Type': 'application/json; charset=utf-8'
        }
    })
}); 
```

**查看（Ext.grid.Panel）列：**

```
 columns: [

                ... snip ...

                { text: 'Status', dataIndex: 'status', sortable: true, 
                    renderer: function(value, metaData, record, row, col, store, gridView) { 

                        var categoryId = record.get('status');
                        alert("categoryId: " + categoryId);  // displays "categoryId: 2"
                        if (categoryId > 0)
                        {
                            var category = statusDropdownStore.findRecord('key', categoryId);
                            alert("category: " + category);  // displays "category: -1" which usually means not found
                            //alert(category.get('value'));
                            return '';  // return value property of category record
                        }
                        else
                        {
                            return '';
                        }
                    } 
                },

                { text: 'Date Modified', dataIndex: 'date_modified', sortable: true, renderer: Ext.util.Format.dateRenderer('m/d/Y') },

                ... snip ...

            ], 
```

=====================

# 2012 年 8 月 1 日下午 5:21 更新：

好的，网格初始加载时的值是空白的（意味着它命中了“return '';”代码行。但是当我进入记录并单击“保存”时，网格中的所有行都显示类别名称-- 使用下面的新代码。作为旁注，我曾经将 id 列命名为“key”，但我将其重命名为“id”。

```
 { text: 'Status', dataIndex: 'status', sortable: true, 
                    renderer: function(value) { //, metaData, record, row, col, store, gridView) { 

                        if (value > 0) {
                            var r = statusDropdownStore.findRecord('id', value);
                            if (r != null)
                            {
                                var catName = r.get('value');
                                return catName;
                            }
                        }
                        return '';
                    } 
                }, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:27:24.650

你的代码看起来很好，我也为渲染器做同样的事情：

```
renderer: function(value) {
    if (value) {
        var record = refStore.findRecord('id', value),
            name = record.get('name');
        return name;
    }
}, 
```

奇怪的是如果没有找到`findRecord`应该返回`null`，而不是-1。

我唯一能想到的是[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-findRecord)中的这个：

> 筛选存储时，仅在筛选器内查找记录。

这是我使用的模型`refStore`（上图）：

```
Ext.define('MyApp.model.Reference', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',    type: 'int'},
        {name: 'name',  type: 'string'},
        {name: 'active',type: 'bool'}
    ],
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T11:38:10.037

查看 findByREcord 的原型

```
findRecord: function(fieldName, value, startIndex, anyMatch, caseSensitive,    exactMatch) {        
var index = -1;

  if(fieldName && (value || value === 0)) {
    var options = Ext.applyIf({
        property: fieldName,
        value: value,
        anyMatch: anyMatch,
        caseSensitive: caseSensitive,
        exactMatch: exactMatch,
        root: 'data'
    }, {
        anyMatch: false,
        caseSensitive: false,
        exactMatch: true
    });
    var filter = Ext.create('Ext.util.Filter', options);
    index = this.data.findIndexBy(filter.getFilterFn(), null, startIndex);
  }

  return index > -1 ? this.getAt(index) : null;
} 
```

使用 true 作为最后一个参数，它将解决您的问题。

# php - mdY 到 dmY PHP 5.2

> ID：11767342
> 
> 赞同：1
> 
> 时间：2012-08-01T20:47:34.827
> 
> 标签：php, datetime

> **可能重复：**
> [在 PHP 中将一种日期格式转换为另一种日期格式](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)

我有一个日期格式的字符串`m-d-Y`，我需要它`d-m-Y`。我怎样才能在**PHP 5.2 中做到这一点？**

stackoverflow 上最常见的答案`DateTime::createFromFormat()`在 PHP 5.2 中不起作用，并且`new DateTime()`+`$date->format('d-m-Y')`不会改变格式。

谢谢
，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:50:11.170

```
$parts = explode('-', $dateString);
var_dump($parts[1] . '-' . $parts[0] . '-' . $parts[2]); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T20:50:00.423

```
date('d-m-Y',strtotime($yourdatestring)); 
```

# javascript - 几次点击不同的幻灯片后，自动幻灯片会变得混乱

> ID：11767343
> 
> 赞同：0
> 
> 时间：2012-08-01T20:47:39.027
> 
> 标签：javascript, jquery, jquery-ui, slideshow

好的，所以让我道歉，以防我无法在这里正确描述我的问题......我只是不知道如何解释这个问题！

在我们的页面上，我们有一个带有自动幻灯片的部分，其中我们有 LHS 上的 4 个选项卡（顶部的标题和一个小的描述）及其在 RHS 上的内容。 ![在此处输入图像描述](../Images/e32bf7876507c6fb69fa8178c4229544.png)

幻灯片在最初的几分钟内完美运行....但过了一段时间（或者如果我点击 LHS 选项卡几次）选项卡的位置会变得混乱（在每个浏览器中）。就像下图一样，所选/活动选项卡的描述要么被截断，要么完全消失，并且选项卡之间的空间也被弄乱了。 ![在此处输入图像描述](../Images/79c205c80d5dc2dc79246b83544cd186.png)

谁能帮我理解这里发生了什么，我该如何解决这个问题？

这是小提琴：http: [//jsfiddle.net/walahh/LrFWC/3/](http://jsfiddle.net/walahh/LrFWC/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:16:08.727

您似乎使用的是非常旧版本的 jQuery。通常，此类问题可以通过使用最新版本 (1.7.2) 来解决。

# java - Java TimeZone.setDefault("GMT-7")

> ID：11767344
> 
> 赞同：1
> 
> 时间：2012-08-01T20:47:41.580
> 
> 标签：java, timezone

我正在寻找一种更好的方法来设置 Java 的默认时区。我们目前正在访问我们的 DB2 数据库以获取它的当前时区，但它不是时区名称，只是当前小时/分钟偏移值。所以我们取那个值并构造一个像“GMT-07:00”这样的ID。

这似乎会导致两个问题：

1.  我们必须确保为 DST 开始/结束重置。例如，我们设置了一个计划任务来查询数据库并设置时区。恼人的。
2.  由于我们（目前）未知的原因，我们的计划任务有时会设置错误的时区。

假设 DB2 总是返回正确的值，那么我只能想象“GMT-07:00”是模糊的，在 Java/它的时区数据库/操作系统之间，它从表中提取了一个不同的值。

在计算像“GMT-07:00”这样的字符串之后，我们的代码会这样做：

```
 String timezoneGMTOffsetString = "GMT-07:00";
 TimeZone localTimeZone = TimeZone.getTimeZone(timezoneGMTOffsetString);
 TimeZone.setDefault(localTimeZone);
 System.setProperty("user.timezone", timezoneGMTOffsetString); 
```

我们认为我们只需要在外部设置值并`-Duser.timezone="America/Los_Angeles"`在启动 Tomcat 时使用。然后我们可以取消预定的工作！

有什么建议吗？Java 6.0_26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:56:28.127

首选的解决方案总是隐蔽到 UTC 和 UTC。使用[joda-time](http://joda-time.sourceforge.net/)库进行转换。

# java - Java 的星期和月份选择器

> ID：11767348
> 
> 赞同：1
> 
> 时间：2012-08-01T20:47:56.510
> 
> 标签：java, swing, user-interface, date

我需要两种情况下的日期选择器，到目前为止我一直使用 JXDatePicker，但这不是我现在需要的：

我想要一个日期选择器，特别是一年中的几个星期和一年中的几个月。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:11:17.280

[`JCalendar`](https://stackoverflow.com/tags/jcalendar/info)优惠`com.toedter.calendar.JMonthChooser`，如图所示[，](http://www.toedter.com/en/jcalendar/)尊重所选择的`Locale`。

我没有看到相应的`JWeekChooser`，但`JCalendar`可能是一个很好的工作框架。

# git - 如何将我当前的 git 分支标记为 ok 然后继续

> ID：11767350
> 
> 赞同：4
> 
> 时间：2012-08-01T20:48:00.647
> 
> 标签：git, branch, label, version

我正在一个分支上工作。

我已经达到了“到目前为止工作”的程度。

我想用标签清楚地标记我当前的状态，例如“ok_so_far”。

因此，当我继续并且如果（...好的时候）我搞砸了，我可以很容易地回到这一点。

我知道我可以参考 SHA，但我想知道如何在当前点放置标签（我猜有点像发布标签），以便非常清楚要回到哪一点，并希望引用人类可读的标签与 SHA 相对。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T20:49:05.923

您正在寻找一个[*标签*](http://git-scm.com/docs/git-tag)：

```
git tag ok_so_far 
```

然后，您可以使用该名称`ok_so_far`代替 SHA1 提交标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:48:20.993

另一种可能的解决方案是[*note*](http://www.kernel.org/pub/software/scm/git/docs/git-notes.html)。

# php - 需要正则表达式从一个字符串中提取两个子字符串

> ID：11767351
> 
> 赞同：2
> 
> 时间：2012-08-01T20:48:03.750
> 
> 标签：php, regex

我有一个类似于`tvm11551.iso`我要解析的字符串。在此字符串中，这些粗体数字各不相同：tvm **11** 5 **51** .iso（请忽略此处的空格）。我用 PHP 编写了以下程序，该程序将从该字符串中提取这两个数字：

```
$a = "tvm11551.iso";

if(preg_match('/^tvm\d{5}\.iso/',$a)){
    $b = preg_match('/tvm(\d\d)\d\d\d\.iso/' , $a);
    $c = preg_match('/tvm\d\d\d(\d\d)\.iso/' , $a);
    echo "B: " . $b . "<br>";
    echo "C: " . $c;
} 
```

但是，我得到的输出为：

```
B: 1
C: 1 
```

如何修复 RegEx 以获得预期的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:52:10.703

`1`您看到的输出是匹配成功后返回的匹配数量，而不是它们的内容`preg_match()`。由于您的每个测试只有一个`()`捕获组，因此返回了一个匹配项。您需要将匹配项作为第三个参数捕获到数组中`preg_match()`：

```
$a = "tvm11551.iso";
$matches = array();
preg_match('/^tvm(\d{2})5(\d{2})\.iso$/', $a, $matches);

var_dump($matches);
array(3) {
  [0] =>
  string(12) "tvm11551.iso"
  [1] =>
  string(2) "11"
  [2] =>
  string(2) "51"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T20:51:49.367

根据您拥有的模式，在初始匹配之后，我完全没有理由使用 RegEx。

你只想要这个：

```
if(preg_match('/^tvm\d{5}\.iso/',$a)){
    $b = substr($a, 3, 5);
    $c = substr($a, 6, 8); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:54:11.940

preg_match 返回模式匹配的次数（但由于 preg_match 总是在找到的第一个匹配项处停止，所以它总是返回 0 或 1）。如果你想得到匹配的数字，你必须传递一个数组作为 preg_match 的第三个参数。请参阅[preg_match 文档](http://php.net/manual/en/function.preg-match.php)

# java - Bouncy Castle NoSuchAlgorithm 异常，但已安装提供程序

> ID：11767352
> 
> 赞同：2
> 
> 时间：2012-08-01T20:48:09.330
> 
> 标签：java, bouncycastle, encryption

我正在尝试使用 Bouncy Castle 进行一些 RSA 加密/解密。虽然一切正常，但我的解密功能中的输出已损坏。我认为这是由于调用算法时缺少适当的填充。

我已经安装了 Bouncy Castle，方法是将它 (bcprov-jdk15on-147.jar) 添加到我的类路径中，并将其安装在我的构造函数中，如下所示：

```
Security.addProvider( new BouncyCastleProvider() ); 
```

为了验证提供程序是否已安装，我调用了：

```
if (Security.getProvider( "BC" ) != null)
{
      System.out.println( "Bouncy Castle provider is available" );
} 
```

哪个按预期工作。

当我得到我的密码时，当我尝试使用算法“RSA”时，我得到了密文和损坏的明文。我知道我需要使用带有填充的算法，例如 PKCS 或其他算法，但以下获取密码的尝试因 NoSuchAlgorithm 异常而失败：

```
Cipher rsaCipher = Cipher.getInstance("RSA/NONE/PKCS1Padding", "BC"); 
```

不管我尝试什么其他方法，我能得到密码的唯一方法是如果我打电话：

```
Cipher rsaCipher = Cipher.getInstance("RSA", "BC"); 
```

为什么 PKCS 密码不可用？我已经安装了无限制的管辖权政策，正如我所说，普通的“RSA”有效，但填充调用没有。此外，我试图列出提供程序中的 Bouncy Castle 键，它看起来像是一个非常详尽的列表。

谁能帮我弄清楚为什么会丢失？

谢谢！埃文

# php - MySQL & PHP 查询方法

> ID：11767353
> 
> 赞同：0
> 
> 时间：2012-08-01T20:48:09.980
> 
> 标签：php, mysql

我有一个items表：itemID，itemName每一个item都可以预定一段​​时间；每个项目可以有多个预订；预订从不重叠。

预订保存在预订表中：itemID、startDate、endDate

我想指定天数、开始日期和结束日期，然后在提供的开始日期和结束日期之间查找任何未预订期间为该天数或更短的项目。换句话说，我正在寻找给定日期范围内的“短期可用性”项目。然后，我想返回每个 itemID 的短期可用性开始和结束日期的列表。

我将不胜感激有关如何解决此问题的任何建议，理想情况下是在单个 MySQL 查询中，但使用 PHP 循环进行长期操作是可以的。

到目前为止，我的方法是获取 bookings 表中的所有唯一 itemID，其中包含在提供的开始日期和结束日期之内或之间的预订，然后使用 PHP 和 MySQL 查询的组合解析整个范围，并添加 itemID 和将“短期期间”的开始和结束日期添加到数组中，但这不是一种优雅的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:03:05.553

那么这一切都取决于你的日期是如何安排的。如果它们的格式为 DD/MM/YYYY，其中值只是一个 int 03221990，您可以尝试使用简单的大于或小于运算符来隔离可用日期，这一切都可以在查询中完成。这样您就可以找到一系列符合您粗略日期描述的项目，但不一定必须完全符合您的开始日期和结束日期。你的日期是如何安排的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:14:21.913

您的预订表可能如下所示：

```
ItemID | booked
23 | 2012-08-01
23 | 2012-08-02
23 | 2012-08-03 
```

其中第 23 项预订了 3 天。因此，在预订项目时添加行。

给定每个日期的日期范围 2012-08-03 到 2012-08-05，请选择不在预订表中的项目。我不太确定，但我认为这可以通过“完全外部连接”来实现。

# apache - Apache + Thin + SSE 会起作用吗？

> ID：11767355
> 
> 赞同：-1
> 
> 时间：2012-08-01T20:48:17.030
> 
> 标签：apache, sinatra, thin, server-sent-events

我们在所有应用程序前使用 Apache 作为代理。在 Thin 之前使用 Apache 作为代理服务器会起作用吗？我希望做一个聊天类型的应用程序，就像 Sinatra 提供的应用程序一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:57:46.147

我已经使用以下 Apache 配置设置成功地做到了这一点。

```
ProxyPass /stream_event http://127.0.0.1:9292
ProxyPassReverse /stream_event http://127.0.0.1:9292 
```

有关更多详细信息，请参阅此帖子。[服务器发送事件连接未与 Apache/Thin/Sinatra 保持打开状态](https://stackoverflow.com/questions/14664362/server-sent-event-connection-not-staying-open-with-apache-thin-sinatra/14674819#14674819)

# embedded-linux - 需要实用程序/指导来在 DNS 服务器上使用 Microsoft 动态 dns 在 Intranet 上注册 linux 设备（主机名、IP 地址）。可能吗？

> ID：11767356
> 
> 赞同：0
> 
> 时间：2012-08-01T20:48:16.990
> 
> 标签：embedded-linux, dyndns

我有一个通过 dhcp 获取 IP 地址的 linux 设备，然后它需要使用 microsoft DDNS 在 DNS 服务器上注册自己，以便可以使用它的主机名在 Intranet 上访问它。是否有任何客户端实用程序可以使用或在不更改 dns 上的任何内容的情况下这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:10:00.077

这可以由 DHCP 客户端完成。许多嵌入式 linux 使用 dhclient whis 不会将主机名发送到 DHCP 服务器，但其他一些（如[pump](http://anonscm.debian.org/gitweb/?p=collab-maint/pump.git)）会。

如果我们想准确一点，dhclient 对 DNS 更新的支持很小。在 dhclient.conf 的手册页中，您可以阅读

> 客户端现在对在获得租约时进行 DNS 更新的支持非常有限。这是典型的，可能不会做你想做的事。它也仅在您碰巧可以控制您的 DNS 服务器时才有效，这不太可能。
> 
> 请注意，无论您使用的是 DHCPv4 还是 DHCPv6，本节中的所有内容都是正确的。两者使用完全相同的语法。
> 
> 要使其工作，您必须像在 DHCP 服务器中一样声明密钥和区域（有关详细信息，请参阅 dhcpd.conf(5)）。还需要在客户端配置fqdn选项，如下：
> 
> ```
>  send fqdn.fqdn "grosse.fugue.com.";
>  send fqdn.encoded on;
>  send fqdn.server-update off;
>  also request fqdn, dhcp6.fqdn; 
> ```
> 
> fqdn.fqdn 选项必须是完全限定的域名。
> 您必须为要更新的区域定义一个区域声明。fqdn.encoded 选项可能需要设置为 on 或 off，具体取决于您使用的 DHCP 服务器。

所以我认为评估其他 DHCP 客户端是最好的解决方案

# ssas - 从域外连接到 SSAS

> ID：11767361
> 
> 赞同：2
> 
> 时间：2012-08-01T20:48:33.983
> 
> 标签：ssas, excel-2010, pivot-table, cube

我正在尝试从 Excel 2010 中的域外连接到 SSAS。当我通过时，它列出了多维数据集等，但是当您最终在工作表上添加数据透视表时，您会收到错误消息：

```
An error was encountered in the transport layer. 
```

现在，如果您在单击“导入数据”上的“确定”之前点击属性，然后单击“定义”并编辑连接字符串以包含您的密码，则连接成功。（我告诉我们的用户这样做不是一个可行的选择）

现在，如果我尝试使用 excel 2013 正常登录，它可以完美运行。我在 excel 2010 和 excel 2013 之间的连接字符串中看到的主要区别是 2010 年的提供者是 MSOLAP.4，而 2013 年是：MSOLAP.5。我已经尝试在 2010 年将提供程序更改为该提供程序，但没有任何区别。

我希望有一些针对 excel 2010 的修补程序，或者如果有一些简单的东西我可以在服务器上进行修改以使其工作。我已经尝试过使用 http 泵 msmdpump.dll，但是它显示一个错误，它无法加载连接对话框。

谢谢您的帮助！伊森

其他信息：SSAS 是 2008 版。

# tkinter - 如何存储复选框的信息？我如何使用另一个变量中的信息？

> ID：11767364
> 
> 赞同：0
> 
> 时间：2012-08-01T20:48:42.983
> 
> 标签：tkinter, python-2.7

我希望你能用下面的代码帮助我，并告诉我我哪里出错了。我在 python 方面没有那么有经验，所以帮助会很棒！这是我的代码：

```
from Tkinter import *

import math
from math import *

import tkFont
import tkMessageBox

numberOfIngredients = {}
diameter = {}

class Application(Frame):
    """ GUI application that creates a story based on user input. """
    def __init__(self, master):
        """ Initialize Frame. """
        #Make size later master.geometry("485x280+5+10")
        Frame.__init__(self, master)
        self.grid()
        self.create_widgets()
        self.config(bg = "#a6b6cb")

    def create_widgets(self):
        """ Define the widgets and positioning within the frame. """
        #Display the Title
        Label(self, text = "Hamburger Calculator", font = ("Calibri", "25"), bg = "#a6b6cb", fg = "#17375e").grid(row = 0, column = 1, sticky = W)

        #Instructions For Selecting Box
        Label(self, text ="Select your extra ingredients:",
              bg = "#a6b6cb").grid(row = 1, column =1, sticky = W)

        #Button To Calculate
        Button(self, text = "Calculate Cost",  bg = "#92d050",
               command = self.calculate,
               font = ("Calibri", "12")).grid(row = 6, column = 1, sticky = SE)

        #Button To Quit
        Button(self, text = "Quit", bg = "#913c3a",
               command = self.quit,
               font = ("Calibri", "12")).grid(row = 7, column = 1,
                                              sticky = SE)

        #Radio Box For Patty Size
        Label(self, text ="Hamburger Size:",
              bg = "#a6b6cb").grid(row = 1, column = 0, sticky = W)

        diameter = IntVar()

        Radiobutton(self,
                    text = "10 cm",
                    bg = "#a6b6cb",
                    variable = diameter,
                    value = 10,
                    ).grid(row = 3, column = 0, sticky =W)

        Radiobutton(self,
                    text = "20 cm",
                    bg = "#a6b6cb",
                    variable = diameter,
                    value = 20,
                    ).grid(row = 4, column = 0, sticky =W)

        Radiobutton(self,
                    text = "35 cm",
                    bg = "#a6b6cb",
                    variable = diameter,
                    value = 35,
                    ).grid(row = 5, column = 0, sticky =W) 

        #Check Box for Cheese
        self.cheese = BooleanVar()
        Checkbutton(self,
                    text="Cheese",
                    bg = "#a6b6cb",
                    variable = self.cheese,
                    onvalue="yes", offvalue="no"
                    ).grid(row =3,
                    column = 1, sticky =W)
        #Check Box for Mushrooms
        self.mushroom = BooleanVar()
        Checkbutton(self,
                    text="Mushrooms",
                    bg = "#a6b6cb",
                    variable = self.mushroom,
                    onvalue="yes", offvalue="no"
                    ).grid(row =4,
                    column = 1, sticky =W)
        #Check Box for Onions
        self.onion = BooleanVar()
        Checkbutton(self,
                    text="Onions",
                    bg = "#a6b6cb",
                    variable = self.onion,
                    onvalue="yes", offvalue="no"
                    ).grid(row =5,
                    column = 1, sticky =W)
        #Check Box for Extra Beefburger
        self.beefburger = BooleanVar()
        Checkbutton(self,
                    text="Extra Burger Patty",
                    bg = "#a6b6cb",
                    variable = self.beefburger,
                    onvalue="yes", offvalue="no"
                    ).grid(row =6,
                    column = 1, sticky =W)

        numberOfIngredients = 0

        if self.cheese.get() == "yes":
            numberOfIngredients + 1
        if self.mushroom.get() == "yes":
            numberOfIngredients + 1
        if self.onion.get() == "yes":
            numberOfIngredients + 1
        if self.beefburger.get() == "yes":
            numberOfIngredients + 1

    def calculate(self):
        #Constants and Variables
        fixedCost = 3.75
        baseCost = 1.55
        extraCost = 1.25

        global numberOfIngredients
        global diameter

        #Formulas
        area = (pi * sqrt(int(diameter) / 100) ) / 4
        cost = fixedCost + (baseCost * area) + (numberOfIngredients * extraCost)
        totalCost = 1.5 * cost

        #Message Box
        tkMessageBox.showinfo(
            title="Total Cost",
            message="The total cost of the hamburger is $" + str(diameter))

#Main
root = Tk()
root.title("Hamburger Calculator")
app = Application(root)
root.mainloop()
root.destroy() 
```

这是我目前得到的错误：

Tkinter 回调 Traceback 中的异常（最近一次调用最后一次）：文件“C:\Python27\lib\lib-tk\Tkinter.py”，第 1410 行，**调用** 返回 self.func(*args) 文件“C:\Users\ Matt Sharp\Desktop\Assessment For Hamburgers v2tester.py"，第 131 行，计算面积 = (pi * sqrt(int(diameter) / 100) ) / 4 TypeError: int() argument must be a string or a number, not '听写'

除了这个错误，我知道我的直径和 numberOfIngredients 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:59:41.923

这是一个很好的例子，说明了为什么你应该避免使用全局变量来存储你的状态......

在您的模块顶部，您创建`diameter`一个字典：

```
diameter = {} 
```

然后在您的`create_widgets()`方法中，您创建一个`diameter`要在小部件中使用的局部变量（尽管您从不保留对它的引用）：

```
diameter = IntVar() 
```

但是然后在您的`calculate()`方法中，您引用全局`diameter`（这是一个字典）并在数学表达式中使用它，就好像它是一个 int 一样：

```
area = (pi * sqrt(int(diameter) / 100) ) / 4 
```

你也对`numberOfIngredients`. 它被创建为全局 dict，但用作本地 int 且未保存，然后在数学表达式中再次称为全局。

```
# global numberOfIngredients is {}
cost = fixedCost + (baseCost * area) + (numberOfIngredients * extraCost) 
```

全局变量很容易使您的应用程序混乱，因为您不能总是根据当前范围识别变量的来源。

我不确定您希望如何使用全局 dict 与本地 int，但最终应该将变量作为实例属性保留在类上：

```
class Application(Frame):
    def __init__(self, master): 
        ...
        self.diameter = IntVar()
        self.numberOfIngredients = 0

    def create_widgets(self):
        ...
        Radiobutton(self,
                    text = "10 cm",
                    bg = "#a6b6cb",
                    variable = self.diameter,
                    value = 10,
                    ).grid(row = 3, column = 0, sticky =W)
        ...
        if self.cheese.get() == "yes":
            self.numberOfIngredients += 1

    def calculate(self):
        ...
        area = (pi * sqrt(int(self.diameter) / 100) ) / 4
        cost = fixedCost + (baseCost * area) + \
                    (self.numberOfIngredients * extraCost) 
```

# git - GitLab 需要 git@localhost 密码才能推送到仓库

> ID：11767366
> 
> 赞同：16
> 
> 时间：2012-08-01T20:48:52.380
> 
> 标签：git, ssh, gitolite, gitlab

我正在尝试让 GitLab 在我的服务器上启动并运行。我按照 gitlab github 页面上的安装说明进行操作，一切顺利。

问题是，当我创建一个回购并尝试

```
sudo git push -u origin master 
```

系统提示我输入“git@localhost 的密码：”

git用户没有密码，所以这是个问题。

其他遇到此问题的人建议在我的 sshd conf 中将 git 添加到 AllowedUsers 但我没有 AllowedUsers 字段，因此这似乎不是问题。

我对 ssh 的东西还是很陌生，所以我相信它是某种 ssh 密钥问题，尽管我尝试将所有相关的 ssh 密钥添加到 /home/git/.ssh/authorized_keys 并验证文件中没有换行符.

仅供参考，我的安装完全通过了 gitlab wiki 中提供的测试：

```
sudo -u gitlab bundle exec rake gitlab:app:status RAILS_ENV=production 
```

任何建议都非常感谢！

编辑

所以，我终于通过从另一台机器提交一个 repo 来解决这个问题。事实上，我被 SSH 连接到运行 gitlab 的同一台机器上。当我尝试从主机以外的机器提交时，它工作得很好。因此，对于某些人来说，这可能是一个解决方案（对于我们来说，因为我们在单独的机器上开发而不是在我们的服务器上开发）。

对于任何试图在同一台机器上进行托管和开发的人来说，这仍然是一个开放式的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:43:36.340

* * *

TL;博士

密钥存储在 gitlab DB 和 gitolite 端。您应该使用工厂构建的 gitolite-admin.git 文件夹，不要使用您的备份！稍后使用 update keys 命令重建 gitolite 的密钥。（将已保存在 gitlab db 中的那些密钥更新​​为 gitolite）

```
sudo -u gitlab -H bundle exec rake gitlab:gitolite:update_keys RAILS_ENV=production 
```

* * *

很可能是因为 gitolite 密钥无法正确保存存在问题。这些密钥（用于登录）实际上由 gitlab 和 gitolite 单独保存。对于拉/推实际上是使用保存在 gitolite 中的键。(git/repositories/gitolite-admin.git/index, git/.gitolite/keydir, git/.ssh/authorized_keys)

gitlab 通常应该帮助将那些在网络上导入的密钥保存到 gitolite 文件中。然而，由于某些原因，它失败了。由于密钥没有正确保存在 gitolite 中，客户端/服务器无法使用密钥并回退到密码。

您必须检查并修复保存在 gitolite 中的那些密钥以纠正问题。

查看更多 [https://groups.google.com/forum/?fromgroups=#!topic/gitlabhq/X0z_9l7L7A8](https://groups.google.com/forum/?fromgroups=#!topic/gitlabhq/X0z_9l7L7A8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:09:01.023

如果安装顺利，这意味着您的 gitlab 能够毫无问题地克隆 gitolite-admin 存储库。
但是您说它通过了状态检查，这意味着您正在使用一个名为“gitlab”的帐户进行 ssh 连接。

这也意味着任何客户端都必须使用同一个帐户 ' `gitlab`' 而不是 ' `git`' 进行 ssh。
因此，如果您的 ssh 密钥是通过 gitlab 界面添加的，那么您可以 git clone/git push 到一个远程名称来源，其地址为 ' `gitlab@server`'

要进行更多调试，请查看“[设置 Git 远程 SSH (git-upload-pack / git-receive-pack)](https://stackoverflow.com/a/11758664/6309) ”中提到的其他一些技巧：

如果您无法在本地推送（在服务器本身上，即在“localhost”上），请至少尝试：

```
ssh -vvvT gitlab@localhost 
```

它不应该需要任何密码，因为`/home/gitlab/.ssh/id_rsa`两者`/home/gitlab/.ssh/id_rsa.pub`都存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T21:16:45.963

我收到了相同的密码提示。我的问题是我将 ssh 的使用限制为只有几个用户。我将 git 用户添加到 AllowUsers 列表 sshd_config，一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T20:26:42.180

确保您的 gitlab 个人资料有您的公共 ssh 密钥。登录 gitlab，转到您的个人资料并选择“添加公钥”按钮。将“keyfile”.pub 内容复制并粘贴到“密钥”框中。某些版本的 gitlab 存在一个错误，即当您添加公钥时，它没有更新 authorized_keys 文件。在您将公钥添加到您的配置文件后，验证（但不要手动添加）您的公钥是否在 authorized_keys 文件中。如果这不是问题，那么早期的答案之一可能会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-22T08:02:33.680

我最近遇到了同样的问题，发现对我来说问题是 SELinux 阻止**sshd**访问gitlab 数据目录中的**authorized_keys**`/var/opt/gitlab/`文件。

要解决此问题，请编辑`/etc/selinux/targeted/contexts/files/file_contexts.homedirs`并添加以下行：

```
/var/opt/gitlab/\.ssh/.*    system_u:object_r:ssh_home_t:s0 
```

然后运行：

```
$ restorecon -Rv /var/opt/gitlab 
```

来源：[https ://serverfault.com/questions/50573/selinux-preventing-passwordless-ssh-login](https://serverfault.com/questions/50573/selinux-preventing-passwordless-ssh-login)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-03T09:10:35.127

在 git 服务器上编辑`/etc/ssh/sshd_config`

取消注释身份验证部分下的以下行或添加它们：

`PubkeyAuthentication yes`

`AuthorizedKeysFile %h/.ssh/authorized_keys`

给你的服务器一个电源循环，然后启动 gitlab

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T23:44:11.193

最近这种情况开始发生在我身上——对于工作项目，git 会询问我的电子邮件和密码。输入后它继续正常，但很烦人。

我可以为我有权访问的任何给定应用程序修复此问题：

```
git config remote.origin.url git@github.com:user_org_or_co/repo_name_itself 
```

例如

```
git config remote.origin.url git@github.com:smithw/bookmarkapp 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-09T15:39:06.510

你的 git 和 gitlab 用户没有密码？

怎么样`sshd_config`？

检查此行是否在文件中：`PermitEMptyPassword Yes`

无论如何我猜它不安全，在我的安装中，我把这个'是'，克隆然后保留旧配置......克隆时ssh_key由用户git保存，它不会再询问密码了..

但是现在，我遇到了另一个错误，当我要推送时，对于每个新用户，我们必须重新配置 ssh 以允许空推送，然后保留配置。

（我还没有测试过这个方法，因为我发现我的 gitlab 没有在 git user 中创建 repos ：/）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-11T22:31:07.123

这可能太简单了，但我遇到了同样的问题。我猜这是因为它选择了 localhost 作为域名。

当我从另一台计算机登录回我的本地主机机器时，它成功了，然后尝试提交。这很愚蠢，但值得一试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-13T12:26:55.527

我遇到了一个表现出类似症状的问题。我的问题是我在路由器后面有两台计算机。路由器设置为将 SSH 流量（端口 22）端口转发到计算机 1。Gitlab 安装在计算机 2 上。我正在使用域和面向公众的 IP 进行连接。当我推送时，SSH 流量被定向到计算机 1。计算机 1 上有一个 git 用户，只是因为安装了 git。计算机 1 提示我输入 git 用户的密码。

我的安装也通过了所有准备好的检查。

我不确定您是否遇到同样的问题，但症状完全相同，所以我认为这可能会有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-10T13:43:42.500

[这里](https://github.com/gitlabhq/gitlabhq/issues/1182)有一个勾号。

要确定问题的原因，请通过 . 检查服务器上的日志`sudo grep sshd /var/log/auth.log`。

在 2013 年 12 月 13 日提交*之前*，`b24d5d`由于. 你*必须*有：*`.ssh/`*

 **```
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys 
```

或 ssh 拒绝建立 rsa 连接并`sudo grep sshd /var/log/auth.log`说：

```
Authentication refused: bad ownership or modes for file /home/git/.ssh/authorized_keys 
```

该问题已通过将 sshd 设置为非严格模式进行开发来解决，即使权限太自由也可以正常运行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-12T07:12:09.773

有一次我把这个搞混了。当您使用`sudo git`时，这意味着 git 正在以 root 身份启动。问题是——你是否为 root 创建了 SSH 密钥并将其放入 Gitlab 中？

我猜你创建了你的 SSH 密钥`sudo`（这是你的普通帐户），将 SSH 公钥放入 Gitlab，然后运行`sudo git`​​.

您可以尝试在没有`sudo`. 如果您有文件夹权限问题，这使您首先使用 sudo，请尝试授予您的用户帐户访问该文件夹的权限。或者也许在您具有写入权限的文件夹中正常尝试 git。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-18T12:13:23.603

这意味着 gitlab ssh 服务器没有正确配置。

编辑`/etc/ssh/sshd_config`并确保：

```
PasswordAuthentication no
ChallengeResponseAuthentication no 
```

这应该只强制 ssh 密钥登录，这也是一个很好的安全措施。许多较新的发行版已经默认启用了此功能。

不要问我是否被锁在外面，显然 SO 不是询问如何配置和使用私钥/公钥对的地方。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-30T21:57:59.160

对于 Bitnami 或任何其他想要快速解决此问题的配置的任何人，只需使用完整路径即可。

```
git clone git@server_adress:/full/path/to/project.git 
```

编辑：我忘了提，检查您是否已通过网页将 SSH 密钥添加到 git-lab 非常重要。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-14T10:04:47.400

我遇到了类似的问题：Gitlab 服务器位于 docker 容器内，每次尝试推送更改时，我都有： `git@localhost's password:`

根本原因是使用“localhost”作为名称。正确的方法是通过以下方式检查 GitLab 容器的 IP： `$ docker inspect <container_id>`

找到行： `"IPAddress": "172.17.0.2",`

测试它： `ssh -T git@172.17.0.2` 答案应该是这样的。“欢迎来到 GitLab，@user_name！”

现在有必要修复存储库的 URL： `$ git remote set-url origin git@172.17.0.2:user_name/repo-name.git`

之后 push 命令应该可以正常工作。**

# c++ - 带有 std::string、cout、ofstream 和套接字的字符集

> ID：11767368
> 
> 赞同：0
> 
> 时间：2012-08-01T20:49:04.667
> 
> 标签：c++, string, character-encoding, stream

我正在尝试通过 Windows 套接字连接发送字符串，其中包含 ASCII 表之外的“á”等字符。当我尝试这样的事情时，我听到垃圾从另一端出来：

```
std::string message("á");
retval = send(conn_socket, message.c_str(), message.length(), 0); 
```

所以我开始调查，发现需要使用 UTF8 之类的东西进行编码。虽然我仍在寻找一种在 C++ 中执行此操作的简单方法，但我对我注意到的流行为有疑问：

怎么`std::ofstream << message`会正确输出`á`，而`cout << message`会输出垃圾？2有什么区别？通过套接字发送这些字符时，我可以利用这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:04:54.610

当您使用`std::ofstream`表示字符的字节写入文件时，直接将其写入文件，打开文件的应用程序负责将这些字节转换回字符。当您写入`cout`控制台时，会将字节解释为字符。控制台和应用程序不必就字节编码达成一致；尤其是 Windows 控制台将坚持使用代码页解释，即使您更希望使用 UTF-8。

# cordova - PhoneGap 应用程序构建时设置

> ID：11767369
> 
> 赞同：1
> 
> 时间：2012-08-01T20:49:04.763
> 
> 标签：cordova

我想知道在哪里是存储构建时生成的变量（例如服务器地址）的好地方，我可以在类似 msbuild 的过程中对其进行变异。以后必须能够从我的 PhoneGap 应用程序中读取这些变量。我正在寻找接近 XML app.config 文件的东西，可以使用 XML 转换工具进行变异。

# c# - 如何改进此代码并使其安全使用？

> ID：11767372
> 
> 赞同：0
> 
> 时间：2012-08-01T20:49:28.610
> 
> 标签：c#, windows-phone-7, unsafe-pointers

我已经拿起了这段代码，但据我所知，这是不安全的代码，在 WP7 中可能无法使用。有没有人知道如何让这段代码安全使用，也许是 try/catch？

```
GCHandle gch = GCHandle.Alloc(waveInBytes,GCHandleType.Pinned);
int pPtr;

unsafe
{
    pPtr = (int)gch.AddrOfPinnedObject().ToPointer();
    pPtr += 4;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:56:46.080

一般来说，指针是不安全的。IntPtr.ToPointer() 返回一个 void* 类型，这是导致错误的原因。尝试/捕捉没有帮助。

根据您要执行的操作的更大上下文，只需将 ToPointer() 调用更改为 ToInt32() 即可。实际上，在尝试将这种代码转换为 WP7 时，您可能会遇到更多的问题，而不仅仅是这个编译器错误。

无论如何，希望有所帮助。

# javascript - 选中/单击复选框时，使用来自 SQL 的过滤数据重新加载 div

> ID：11767376
> 
> 赞同：0
> 
> 时间：2012-08-01T20:49:46.417
> 
> 标签：javascript, php, checkbox, filter

我很难让它发挥作用。

我有一些不同颜色的复选框。当用户单击一个复选框时，我希望我的 indexMain DIV（这是显示所有项目的 DIV）仅显示具有所选颜色的项目。

另外我想避免有一个提交按钮，我希望 DIV 在用户单击其中一个复选框时加载所选项目。

到目前为止，我有这个：

Javascript：

```
<script>
$(".regularCheckbox").change(function() {
var all_boxes = $('.regularCheckbox');
var checked_boxes = $('.regularCheckbox:checked');
var all_boxes_values = [];

checked_boxes.each(function(){
 var cb_value = $(this).val();
 all_boxes_values.push(cb_value);
});

var all_boxes_values_clean = all_boxes_values.join(", ");
console.log(all_boxes_values_clean);
$.get("index.php", {q: all_boxes_values_clean},
      function(result) {
       $("#indexMain").html(result);
      })
}); 
</script> 
```

形式：

```
<form method="post" action="index.php">

<?php
$colors = mysql_query("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1");
while ($colorBoxes = mysql_fetch_array($colors))
{
echo "<input type='checkbox' id='checkbox-1-1' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
}
?>
<input type="submit" />
</form> 
```

PHP 在我的 indexMain DIV 中获取结果：

```
$color = $_GET['color']; 
```

目前我需要按 SUBMIT 来发送数据并重新加载整个 index.php 页面......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:08:52.133

我有一个类似的问题，这个 jquery 片段应该有帮助。在此示例中，使用 jquery`val`函数获取 url 的值。当您单击表单/按钮/等时，它会触发一个函数，将 url 加载到您命名的 div 中。

```
$('#yourclickableobjectID').click( function(){
        $('#yourdivID').load("yoururl.php?yourquerystring=somestuff");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:01:02.507

您可以使用 jQuery 来做到这一点 - 使用类并隐藏任何不属于该类的项目。

```
<div id="items">
    <div name="item" class="blue">Something</div>
    <div name="item" class="red">Something else</div>
    <div name="item" class="green">Third thing</div>
</div>

<input type="checkbox" value="green" /> green
<input type="checkbox" value="red" /> red
<input type="checkbox" value="blue" /> blue

<script language="javascript" type="text/javascript">
    $("input").on("click", function() { 
        if ($(this).attr("checked")) {
            $("#items div[name=item]:not(." + $(this).val()  + ")").hide();
            $("#items div[name=item]." + $(this).val()).show();
        }
    });
</script> 
```

# python-2.7 - Python pop() 不删除该项目

> ID：11767388
> 
> 赞同：1
> 
> 时间：2012-08-01T20:50:44.353
> 
> 标签：python-2.7

我正在研究将多级词典转换为单级词典列表的功能。

逻辑似乎是对的。但是当我运行它时，while 循环会无限运行。我发现它第一次进入 while 循环时`next_level.pop()`正在工作。从 while 循环的第二次开始，该`pop()`函数永远不会删除`next_level`. 我还尝试通过 检索最后一项`next_level[-1]`，并通过 删除最后一项`del next_level[-1]`。但结果是一样的。我认为这可能与参考事物有关。任何的想法？

```
def flat_dict(self, params):
    """convert a multi-level dictionary to a list of one-level dictionaries"""
    plist = next_level = []
    next_level.append(params)
    while next_level:
        current_level = temp_level = next_level.pop()
        for k, v in current_level.iteritems():
            if isinstance(v, dict):
                next_level.append(temp_level.pop(k))
                pk = [x for x in next_level[-1].keys() if x.endswith('_id')]
                temp_level[pk[0]] = next_level[-1][pk[0]]
        plist.append(temp_level)
    return plist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:06:20.887

没有字典的例子，它有点难以形象化......但通常对于这样的情况，我还是建议递归：

```
def flatten( data ):
    output = []
    if ( isinstance(data, dict) ):
        output.append(data)
        for value in data.values():
            output += flatten(value)
    return output 
```

在直接回答您的问题时，我不能 100% 确定出了什么问题 - 我可以说 pop() 本身就可以正常工作。我猜这与您初始化 plist 的方式有关，您是否遇到了无限循环？

```
plist = next_level = [] 
```

这一行实际上将 plist 和 next_level 设置为*相同的确切*列表 - 不是为每个变量初始化一个空白列表。

```
>>> plist = next_level = []
>>> plist.append(1)
>>> next_level
[1] 
```

当您修改 plist 时，稍后在您的循环中，您实际上正在修改 next_level ，这也不是我的预期目的......尝试以这种方式定义您的 plist/next_level ：

```
plist = []
next_level = [] 
```

看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:21:07.737

我不完全理解你想要做什么，所以我认为这个答案不会正是你所需要的。但也许您可以将其用作解决方案的开始。

这个答案不会改变`dict`要展平的；它只是遍历它并构建一个新`dict`实例列表。它递归调用自身来展平任意嵌套的`dict`.

```
def flat_dict(self, d_to_flatten, lst_flat=None):
    """convert a multi-level dictionary to a list of one-level dictionaries"""
    if lst_flat is None:
        lst_flat = []

    d = {}
    lst = []
    for k, v in d_to_flatten.iteritems():
        if isinstance(v, dict):
            lst.append(v)
        else:
            d[k] = v
    lst_flat.append(d)
    for d in lst:
        flat_dict(self, d, lst_flat)

    return lst_flat 
```

# workflow - 什么是电子邮件“培养”工作流应用程序的好平台？

> ID：11767391
> 
> 赞同：0
> 
> 时间：2012-08-01T20:50:55.837
> 
> 标签：workflow, mule

我们需要构建一个应用程序，在用户注册试用帐户时向他们发送电子邮件。流程中的步骤之间会有数天的延迟。不同的事件也会改变属性，从而导致所遵循的工作流路径发生改变。

我认为像 Mule ESB 这样的平台可以解决这个问题，但我不确定。Mule ESB 是否适用于步骤之间应该有数天的流程？

你可能知道一个更好的平台吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:55:48.550

Mule 不是工作流引擎，我相信它是您处理长期运行的流程所需要的。

这就是说，您可以在 Mule 中插入工作流引擎，例如 JBoss jBPM 或 Activi，以从 Mule 的集成能力和其中一个引擎处理长时间运行的流程中受益。

# file - 如何在 Erlang 中跨目录复制文件？

> ID：11767392
> 
> 赞同：3
> 
> 时间：2012-08-01T20:51:04.273
> 
> 标签：file, erlang, copy

这有效：

```
1> file:copy(test.html, test1.html).
{ok,2384} 
```

但这不会：

```
2> file:copy(test.html, sites/test.html). 
   ** exception error: bad argument in an arithmetic expression
   in operator  '/'/2
   called as sites / 'test.html' 
```

如何在 Erlang 中跨目录复制文件？

非常感谢，

LRP

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T21:26:55.900

问题是`sites/test.html`具有特殊字符并且必须在单引号内。尝试：

```
file:copy(test.html, 'sites/test.html'). 
```

或者你可以使用字符串：

```
file:copy("test.html", "sites/test.html"). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:51:26.153

当您在 erlang 中复制/移动它们时，一些大文件会导致问题。有时使用起来更安全`os:cmd/1`。像这样：

```
移动（来源，目的地）->
    %% 对于 Windows
    命令 = "MOVE \"" ++ 源 ++ "\" \"" ++ 目的地 ++ "\""，
    %% 对于 Unix/Linux
    %%Command = "mv \"" ++ 源 ++ "\" \"" ++ 目标 ++ "\""，
    产生（操作系统，cmd，[命令]）。

复制（来源，目的地）->
    %% 对于 Windows
    命令 = "XCOPY \"" ++ 源 ++ "\" \"" ++ 目标 ++ "\""，
    %% 对于 Unix/Linux
    %%Command = "cp \"" ++ 源 ++ "\" \"" ++ 目标 ++ "\""，
    产生（操作系统，cmd，[命令]）。

```

# google-maps - 放置标记时显示 KML 的信息窗口

> ID：11767394
> 
> 赞同：0
> 
> 时间：2012-08-01T20:51:14.393
> 
> 标签：google-maps, google-maps-api-3

在对地址进行地理编码后放置标记时，我正在尝试显示信息窗口（显示多边形的 KML 描述）。除了信息窗口，我一切正常。我目前有它来显示“Hello World”，但我想知道是否有办法从标记所在的多边形中调用“描述”信息。

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAd0xb3vfvpGxZphXuVQ8UVWsACtitEd64&sensor=true">
    </script>
    <script type="text/javascript">
    function detectBrowser() {
        var useragent = navigator.userAgent;
        var mapdiv = document.getElementById("map_canvas");

        if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
            mapdiv.style.width = '100%';
            mapdiv.style.height = '100%';
        } else {
            mapdiv.style.width = '600px';
            mapdiv.style.height = '800px';
        }}

      function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(34.59704151614417, -85.77713012695312); 
        var mapOptions = {
            panControl: false,
            zoomControl: true,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            overviewMapControl: false,
            center: latlng,
          zoom: 10,
          mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
        };

    var styleArray  = [
      {
        featureType: "landscape",
        stylers: [
          { hue: "#ffbb00" },
          { saturation: -23 },
          { lightness: 2 }
        ]
      },{
        featureType: "poi",
        stylers: [
          { hue: "#ff0055" },
          { saturation: -31 }
        ]
      },{
        featureType: "road",
        stylers: [
          { hue: "#0033ff" },
          { saturation: -42 },
          { lightness: 11 },
          { weight: 0.9 }
        ]
      },{
        featureType: "water",
        stylers: [
          { hue: "#003bff" },
          { lightness: 12 },
          { saturation: 25 }
        ]
      },{
      }
    ];

    var styledMap = new google.maps.StyledMapType(styleArray,
    {name: "Styled Map"});

        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

        var nyLayer = new google.maps.KmlLayer('http://www.farmerstel.com/map/FTCFIBER.kml',{
                      map: map,
                      preserveViewport: true
                  });
        nyLayer.setMap(map);

        map.mapTypes.set('map_style', styledMap);
        map.setMapTypeId('map_style');

      }

    var geocoder;
    var map;

    // Check for geolocation support
    if (navigator.geolocation) {
    // Use method getCurrentPosition to get coordinates
    navigator.geolocation.getCurrentPosition(function (position) {
        // Access them accordingly
        map.setCenter(34.496937, -85.839958);
    });
    }

    function codeAddress() {
    var address = document.getElementById("address").value;
    var bounds = map.getBounds();
    geocoder.geocode( { 'address': address, 'bounds': bounds}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location),
        map.setZoom(15);
        marker = new google.maps.Marker({
            map:map,
            draggable:false,
            animation: google.maps.Animation.DROP,
            position: results[0].geometry.location
        });
        // Creating an InfoWindow object
        var infowindow = new google.maps.InfoWindow({
            content: 'Hello World'
        });
        infowindow.open(map,marker);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
    }

    </script>
    </head>
  <body onload="initialize()">
    <div>
        <input id="address" type="textbox" size="80" value="144 McCurdy Ave North">
        <input type="button" value="Submit" onclick="codeAddress()">
    </div>
    <div id="map_canvas" style="width:100%; height:95%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:29:38.487

目前没有任何方法可以使用 KmlLayer 来做到这一点（如果你点击地图，你只会得到 infowindows）。

有两种选择：

1.  [使用geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)等第三方解析器在客户端解析和显示 kml，然后您可以保留对单个对象的引用并在外部触发对它们的点击。如果您有很多地标或复杂的 kml，这不是一个好的选择。

[使用 geoxml3 的示例](http://www.geocodezip.com/geoxml3_test/v3_collection-map2e.html)

1.  将你的kml导入FusionTables并使用FusionTablesLayer显示，然后查询表格信息放入信息窗口

[使用 FusionTablesLayer 的示例](http://www.geocodezip.com/v3_collection-map2e_FT.html)

# php - PHP PDO没有选择数据库

> ID：11767395
> 
> 赞同：0
> 
> 时间：2012-08-01T20:51:15.860
> 
> 标签：php, pdo, connection-string

我正在尝试使用 PHP PDO 连接到数据库，但我不断收到此消息：“错误：未选择数据库”。我在 PDO 之前的代码工作得很好。谁能看到我做错了什么？我是 PDO 的新手。

旧代码：

```
$dbHost = 'localhost:3306';
$dbUser = 'username';
$dbPass = 'password';
$dbName = 'database_name';
$dbconn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to the database!');
mysql_select_db($dbname); 
```

PDO 代码：

```
$dbHost = 'localhost';
$dbUser = 'username';
$dbPass = 'password';
$dbName = 'database_name';
$dbconn = new PDO('mysql:host=$dbHost;port=3306;dbname=$dbName', $dbUser, $dbPass); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:53:17.507

使用**双引号**

单引号中不允许有变量。

例如：

```
$dbconn = new PDO("mysql:host=$dbHost;port=3306;dbname=$dbName", $dbUser, $dbPass); 
```

或者更好地确保所有内容都正确转义：

```
$dbconn = new PDO("mysql:host={$dbHost};port=3306;dbname={$dbName}", $dbUser, $dbPass); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:56:54.040

替代 Neal 的答案，`sprintf`用于将变量从字符串中取出：

```
$dbconn = new PDO(
    sprintf('mysql:host=%s;dbname=%s', $dbHost, $dbName),
    $dbUser,
    $dbPass
) 
```

此外，为了确保生成的字符串是正确的，您应该打印它：

```
print sprintf('mysql:host=%s;dbname=%s', $dbHost, $dbName); 
```

端口*3306*是 MySQL 的默认端口，不需要指定。

# xml - 除了通过替代曲目之外，Spotify 如何链接曲目？

> ID：11767396
> 
> 赞同：0
> 
> 时间：2012-08-01T20:51:39.363
> 
> 标签：xml, spotify

我正在为 Spotify 开发一个定制的广播应用程序，但我不明白它的链接方法。我希望 Spotify 开发人员可以在这里帮助我。例如：

我有一个美国帐户，所以当我尝试访问 Spotify URI 时：spotify:track:5rDsAMjmB4Qa5WNciJPsfK

这个 URI 是被禁止的，你可以在 XML 中看到：

```
<track>
  <id>b2ee21fccf6845e5a0d72a39bf7752b8</id>

  <title>Tubthumping</title>

  <artist-id>1d4211ecf9d04ffea26202e010042951</artist-id>
  <artist>Chumbawamba</artist>
  <album>Playlist: 90s Pop</album>
  <album-id>da4ae29b497741bab15a97881ed1b70d</album-id>
  <album-artist>Various Artists</album-artist>
  <album-artist-id>19334eaffa3f4f2282e251e36611e26f</album-artist-id>
  <year>2008</year>
  <track-number>19</track-number>
  <length>202706</length>
  <files>
    <file id="87cca4e0822573c3ee8a8a6a04c809b2db9935b6" format="Ogg Vorbis,320000,1,32,4" />
    <file id="ac8d8ed1142988bc18df15ac1357990faf3f5afd" format="Ogg Vorbis,160000,1,32,4" />
    <file id="c91d6743f49e49f703ce87cfcd5698eb81800a86" format="Ogg Vorbis,96000,1,32,4" />
    <file id="94558701f427aff8d68f8149ac3e98e18365cc5f" format="MPEG 1 layer 3,320000,1,32,4" />
  </files>
  <cover>86bdd0faee722e65034207dd28ed5513f914ef44</cover>
  <cover-small>145aaacf5ffb81e38e9e0be24ac9d993a6f31366</cover-small>
  <cover-large>1cd206fb15d81dd3f6cde8dd59d89f94e1094104</cover-large>
  <popularity>0.63630</popularity>
  <restrictions>
    <restriction forbidden="AF,AS,BM,CA,GL,GU,KG,MK,MM,MP,PM,PR,PS,UM,US,VA,VI" catalogues="free,daypass,premium"/>
  </restrictions>

  <external-ids>
    <external-id type="isrc" id="DEA349700542" />
  </external-ids>
</track> 
```

美国禁止这样做，没有其他选择。但是，在 Spotify 应用程序上，此文件链接到：spotify:track:2JLRcAkPB8JZIIohZarVTr，我可以播放该文件，因为美国帐户不禁止该曲目，因为它是 XML：

```
<track>
  <id>59f872aa124941ba8facbd3e13cd4ab9</id>

  <title>Tubthumping - Radio Edit</title>

  <artist-id>1d4211ecf9d04ffea26202e010042951</artist-id>
  <artist>Chumbawamba</artist>
  <album>All-Star Sports Jams</album>
  <album-id>eb030df86f954de1b92630611f497c19</album-id>
  <album-artist>Various Artists</album-artist>
  <album-artist-id>19334eaffa3f4f2282e251e36611e26f</album-artist-id>
  <year>2008</year>
  <track-number>8</track-number>
  <length>212013</length>
  <files>
    <file id="099ec6f8bf800e4800d550a99fac75a4ceea2a0a" format="Ogg Vorbis,320000,1,32,4" />
    <file id="25965023befa68849e724df3687634060e4679c6" format="Ogg Vorbis,160000,1,32,4" />
    <file id="a61e885fe2d2e15e2fe56c0a5111ecac975792b7" format="Ogg Vorbis,96000,1,32,4" />
    <file id="0914380378738d8ae4aeba6379ac45dbcd98bc51" format="MPEG 1 layer 3,320000,1,32,4" />
  </files>
  <cover>2344306830097471b90afe32584677c436c6dc33</cover>
  <cover-small>7697a938417a0c585d15dfc5ddd672871e222e5b</cover-small>
  <cover-large>517849070de1b127323c7b920a9b4bd321507135</cover-large>
  <popularity>0.45674</popularity>
  <restrictions>
    <restriction allowed="CA,US" catalogues="free,daypass,premium"/>
  </restrictions>

  <external-ids>
    <external-id type="isrc" id="USUR19700191" />
  </external-ids>
</track> 
```

这两个轨道是如何相互联系的？它们是同一首歌，但所有属性都不同，甚至标题都不匹配（注意第一个未列为“Radio Edit”）。起初我认为它们可能通过它的 ISRC 连接，但甚至不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:01:45.770

对于某些轨道（共享 ISRC 代码），您会在上面的 XML 中看到一个称为替代的 XML 元素（您不应该能够查看它，因为它不是来自公共 API）。替代元素将包括有关文件 ID 和限制的信息，以便客户端可以决定在可能的情况下播放这些文件。

但是，正如您所注意到的，仍有一些轨道是“相同轨道”但具有不同的 ISRC 代码。Spotify 客户（不是全部）目前试图通过特殊的搜索查询（也不是公开的）来尝试找到替代品。这些查询有点昂贵，并且不是每次客户端找到无法播放的曲目时都进行。因此，行为不是很确定。同一个国家的不同用户有时可以玩，有时不能。因此，我们计划移除这个客户端链接并移动所有替代逻辑服务器端，但我们还没有这样做。

# jquery - MVC3 文本字段没有复制/粘贴或 ctrl+C/ctrl+V

> ID：11767397
> 
> 赞同：3
> 
> 时间：2012-08-01T20:51:40.607
> 
> 标签：jquery, asp.net-mvc-3, textbox

我想实现这样的目标，但对于 mvc3，用户不能在文本字段上复制/粘贴或使用`CTRL`+ `C`/ `CTRL`+ 。`V`

[如何禁用文本框中的复制和剪切？](https://stackoverflow.com/questions/5150867/how-to-disable-copy-and-cut-in-textbox)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T20:59:57.457

尽管我很喜欢 jQuery，但它完全没有必要，因为您可以在 Html.Textbox 调用中这样做，如下所示：

```
 Html.TextBox("Test", null, new { oncopy= "return false", onpaste="return false"}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T20:54:39.377

总之，您不能完全因为用户可以轻松禁用 javascript。但是，假设您的许多用户可能对此并不了解，那么您可以使用 jquery 来实现这一点：

```
$("#textA").bind('copy', function() {
    alert('copy behaviour detected!')
}); 
$("#textA").bind('paste', function() {
    alert('paste behaviour detected!')
}); 
```

或多合一：

```
$('#textA').live('copy paste cut',function(e)
{
    e.preventDefault();
}); 
```

然后，您当然可以在此基础上进行构建并阻止用户执行这些操作，请参见：

[http://www.cjhubbard.com/code/disabling-copypaste-for-your-form-using-jquery/](http://www.cjhubbard.com/code/disabling-copypaste-for-your-form-using-jquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T11:01:08.403

```
$(function () {
$('elementId').bind('cut copy paste', function (e) {
    e.preventDefault();
    alert("YOU SHALL NOT PASte!!!");
  });
}); 
```

您可以将此函数用于任何元素，通过 Id 调用它

# python - Python以动态文本格式提取文本数据

> ID：11767401
> 
> 赞同：2
> 
> 时间：2012-08-01T20:51:45.667
> 
> 标签：python, string, split

我有非常大的文本文件，格式如下：

```
items=item1|item2|item3|item4&ids=18|117|34|315&locations=5|26|9|12#Characteristic_1#Describe Characteristic_1#http://example.com
items=item1|item2|item3|item4&ids=18|117|34|315&locations=5|26|9|12#Characteristic_2#Describe Characteristic_2#http://example.com
items=item1|item2|item3|item4&ids=18|117|34|315&locations=5|26|9|12#Characteristic_3#Describe Characteristic_3#http://example.com 
```

item、ids 和 locations 的数量不固定，上面有 4 个值，但也有 1、2、3 或 5、6 个值，如下例所示：

```
items=item1&ids=18&locations=5#Characteristic_1#Describe Characteristic_1#http://example.com
items=item1|item2&ids=18|117&locations=5|26#Characteristic_1#Describe Characteristic_1#http://example.com
items=item1|item2|item3&ids=18|117|34&locations=5|26|9#Characteristic_3#Describe Characteristic_1#http://example.com 
```

我想从这些数据中得到的是项目名称和它的 ID，还有它的位置。像下面的格式：

```
item1,18,5
item2,117,26
item3,34,9
item4,315,12 
```

我尝试使用 split("|") 函数从字符串中获取值，但我不知道：

1.  如何处理字符串中存在的动态项数和
2.  如何相应地匹配值。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:58:50.640

```
>>> s = "items=item1|item2|item3&ids=18|117|34&locations=5|26|9#Characteristic_3#Describe Characteristic_1#http://example.com" 
```

**要获取一个参数的值：**

用'&'分割，得到第一个参数。

```
>>> s.split('&')[0]
'items=item1|item2|item3' 
```

将其拆分为'='并获取值并删除键（即“项目”）

```
>>> s.split('&')[0].split('=')[1]
'item1|item2|item3' 
```

用“|”分割值

```
>>> s.split('&')[0].split('=')[1].split('|')
['item1', 'item2', 'item3'] 
```

**同样，您可以获取其他参数的值：**

```
>>> s.split('&')[1].split('=')[1].split('|') # Notice the [1] in the first split
['18', '117', '34'] 
```

**然后你只需要以你喜欢的任何方式组合这些多个列表。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T23:43:06.350

这应该工作，

```
item=item.split('#')[0]
item = item.split('&')
item[1]=item[1].lstrip('ids=')
item[2]=item[2].lstrip('locations=')
itemTemp = zip(item[0].split('|'),item[1].split('|'),item[2].split('|'))
print itemTemp 
```

# asp.net-mvc-3 - 复选框和单选按钮的验证行为

> ID：11767402
> 
> 赞同：1
> 
> 时间：2012-08-01T20:51:48.393
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我启用了不显眼的验证。我的页面源看起来像这样。

```
<p>
    <label>
        Project Title
        <br />
        <input class="project-title" data-val="true" data-val-required="The Project Title field is required."
            id="RequestDetail_ProjectTitle" name="RequestDetail.ProjectTitle" type="text"
            value="" />
    </label>
    <span class="field-validation-valid" data-valmsg-for="RequestDetail.ProjectTitle"
        data-valmsg-replace="true"></span> </p> <p>
    <span>Submitted By</span><br />
    <span class="inline-container">
        <input type="hidden" id="RequestDetail_SubmittedBy" name="RequestDetail.SubmittedBy"
            value="0" data-type="RequestDetail.SubmittedBy" /><label><input type="radio" data-type="RequestDetail.SubmittedBy"
                name="_RequestDetail.SubmittedBy" value="1" data-val="true" data-val-required="The Submitted By field is required." />ND</label>
        |
        <label>
            <input type="radio" data-type="RequestDetail.SubmittedBy" name="_RequestDetail.SubmittedBy"
                value="2" data-val="true" data-val-required="The Submitted By field is required." />NE</label>
        |
        <label>
            <input type="radio" data-type="RequestDetail.SubmittedBy" name="_RequestDetail.SubmittedBy"
                value="4" data-val="true" data-val-required="The Submitted By field is required." />WY</label>
        |
        <label>
            <input type="radio" data-type="RequestDetail.SubmittedBy" name="_RequestDetail.SubmittedBy"
                value="8" data-val="true" data-val-required="The Submitted By field is required." />CL</label>
    </span><span class="field-validation-valid" data-valmsg-for="_RequestDetail.SubmittedBy"
        data-valmsg-replace="true"></span> </p> <p>
    <span>Affected Plans</span><br />
    <span class="inline-container">
        <input type="hidden" id="RequestDetail_AffectedPlans" name="RequestDetail.AffectedPlans"
            value="0" data-type="RequestDetail.AffectedPlans" /><label><input type="checkbox"
                data-type="RequestDetail.AffectedPlans" name="_RequestDetail.AffectedPlans" value="1"
                data-val="true" data-val-required="The Affected Plans field is required." />ND</label>
        |
        <label>
            <input type="checkbox" data-type="RequestDetail.AffectedPlans" name="_RequestDetail.AffectedPlans"
                value="2" data-val="true" data-val-required="The Affected Plans field is required." />NE</label>
        |
        <label>
            <input type="checkbox" data-type="RequestDetail.AffectedPlans" name="_RequestDetail.AffectedPlans"
                value="4" data-val="true" data-val-required="The Affected Plans field is required." />WY</label>
    </span><span class="field-validation-valid" data-valmsg-for="_RequestDetail.AffectedPlans"
        data-valmsg-replace="true"></span> </p> 
```

这是验证后的输出。

![在此处输入图像描述](../Images/17d9676e26387ea9e6903c539cbf323c.png)

我使用单选按钮和此处显示的复选框以相同的方式应用了所有内容。但是为什么我在复选框中没有收到验证错误，而在单选按钮中却得到了我所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:46:12.090

如果您考虑一下，复选框将通过验证，无论它们是否被勾选。它们将（可能）由`bool`模型中的属性支持，因此必须为真或假。勾选它们是真的，不勾选它们是假的——这是一个完全有效的布尔值。在这种情况下，唯一无效的值`null`是复选框无法使用的值。

如果您的目标是验证用户是否勾选了该框，您将需要一个`MustBeTrue`验证器 - 请参阅[此处](https://stackoverflow.com/questions/10836656/mvc3-unobtrusive-validation-extension-terms-and-conditions-checkbox)的示例。

如果 true 和 false 都是有效值，并且您希望强制用户选择其中一个，请使用带有“是”、“否”和“请指定”作为选项的下拉菜单。

# c++ - 需要帮助理解 c++ .h 文件

> ID：11767405
> 
> 赞同：1
> 
> 时间：2012-08-01T20:52:06.473
> 
> 标签：c++, dll, unmanaged

我正在尝试用 C# 为我需要使用的非托管 C/C++ dll 编写一个包装器。在这个过程中，我试图摆脱我非常古老的 C++ 技能的锈迹。在 .h 文件中，我看到下面的代码。

```
png_demand_record_create(const char *name, const char* loc, int date, int quantity); 
```

前两个参数是 srings，后两个是整数....对吗？我似乎记得在 c 中确实不是字符串，而是字符数组等。*name 不是指向字符数组的指针吗？为什么在第二个参数中是 * 在 char 中的“r”之后而不是在 loc 中的“l”之前？？？这两个参数之间的区别是什么？难道只是作者的打字，它真的没有事情？

此外，我正在使用一个工具 (Pinvoker) 来帮助我编写 C# 包装器来调用非托管 dll（我所拥有的只是 .h 文件和编译后的 dll）。该工具为我提供了以下信息：

```
[DllImport(@"C:\Some.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
    public extern static png_demand_record_t png_demand_record_create([MarshalAs UnmanagedType.LPStr)] string name,
[MarshalAs(UnmanagedType.LPStr)] string loc, 
int date,
int quantity); 
```

在我看来，该工具对“名称”和“位置”的定义是相同的，即使它们在 .h 文件中是不同的。我需要担心这个吗？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:56:29.730

两者之间没有区别：

```
const char* loc 
```

和

```
const char *loc 
```

一些程序员更喜欢前者，将其`*`视为类型的一部分。一些程序员更喜欢后者，因为`*`在这个声明中实际上只应用了一个变量：

```
char *foo,bar; 
```

在这种情况下，只有`foo`一个指针；`bar`很简单`char`，仅此而已。（这就是我喜欢的原因`char *foo`。）

因为在这种情况下它们是相同的，所以它们应该在您的`Pinvoker`工具中进行相同的处理——除非它们中的一个是*输入*参数而另一个是*输出*参数，这可能会发生。请务必了解您要包装的 API，以确保您知道哪些是输入的，哪些是输出的——如果有的话是*双向*的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T20:56:32.863

回答您的第一个问题：它们完全相同。`char* str`与 相同与`char *str`相同等`char*str``char * str`

至于C#，恐怕我帮不上什么忙。

如果您有兴趣，或者如果它是相关的，[这里](http://en.wikipedia.org/wiki/C_string_handling)是 c-strings 上的维基百科页面（这是您在这里处理的内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:57:21.880

1）周围的空白`*`并不重要，两种参数类型都是相同的。
2) Pinvoker 将参数编组如下：

```
...
[MarshalAs(UnmanagedType.LPStr)] string name,
[MarshalAs(UnmanagedType.LPStr)] string loc, 
... 
```

所以，也没有区别。

# jquery - Jquery CSS .animate li div

> ID：11767406
> 
> 赞同：0
> 
> 时间：2012-08-01T20:52:07.077
> 
> 标签：jquery, css, html

请帮助我使用以下代码。我可以使用图像来创建圆形菜单并使其变得简单，但我想使用 CSS 和 Jquery 使页面变得超级快，并从这个项目中学到一些东西。*我想要做的是更改（动画）悬停*菜单项周围的圆形颜色。我认为代码非常自我解释，但如果有任何不清楚的地方，请告诉我。

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script src="jquery.color.min.js"></script>
<script type="text/javascript">
        $(document).ready(function () {
        var itemnumber = '';
        $('#menu li').hover(function () {
            itemnumber = '#item' + $(this).text();
            $(itemnumber).animate({color: "#abcdef"}, 1000);

        }).mouseleave(function () {
            $(itemnumber).animate({color: "#B1AC8F"}, 1000);
        });
        }); 
</script>
<style type="text/css">
    body {
        width: 810px;
        height: 800px;
        background-image: linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -o-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -moz-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -webkit-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -ms-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(255,255,255)),color-stop(0.34, rgb(206,203,183)),color-stop(0.82, rgb(177,172,143)));
    }

    #menu ul { list-style:none; }
    #logo { width:250px; margin:0 285px; }
    .circle { width: 150px; height: 150px; background: transparent; -moz-border-radius: 100px; -webkit-border-radius: 100px; border-radius: 100px; border:10px; border-style:solid; color:#B8A36E; }
    .oval { margin: 0.5px 10px; width: 130px; height: 50px; background: #B8A36E; -moz-border-radius: 100px / 50px; -webkit-border-radius: 100px / 50px; border-radius: 100px / 50px; }
    #itempic {position:relative; margin: -1px -12px; z-index:-1;}
    #item1 {position:absolute; left: 160px; top:170px; }
    #item2 {position:absolute; left: 335px; top:170px; }
    #item3 {position:absolute; left: 510px; top:170px; }
    #item4 {position:absolute; left: 245px; top:325px; }
    #item5 {position:absolute; left: 420px; top:325px; }
    #item6 {position:absolute; left: 160px; top:480px; }
    #item7 {position:absolute; left: 335px; top:480px; }
    #item8 {position:absolute; left: 510px; top:480px; }
    #item9 {position:absolute; left: 245px; top:635px; }
    #item10 {position:absolute; left: 420px; top:635px; }
</style>
</head>

<body>
<img id="logo" src="logo.png">
<div id="menu">
<ul>
    <li><div class="circle" id="item1"><div class="oval"><img id="itempic" src="Item1.png"></div></div></li>
    <li><div class="circle" id="item2"><div class="oval"><img id="itempic" src="Item2.png"></div></div></li>
    <li><div class="circle" id="item3"><div class="oval"><img id="itempic" src="Item3.png"></div></div></li>
    <li><div class="circle" id="item4"><div class="oval"><img id="itempic" src="Item4.png"></div></div></li>
    <li><div class="circle" id="item5"><div class="oval"><img id="itempic" src="Item5.png"></div></div></li>
    <li><div class="circle" id="item6"><div class="oval"><img id="itempic" src="Item1.png"></div></div></li>
    <li><div class="circle" id="item7"><div class="oval"><img id="itempic" src="Item2.png"></div></div></li>
    <li><div class="circle" id="item8"><div class="oval"><img id="itempic" src="Item3.png"></div></div></li>
    <li><div class="circle" id="item9"><div class="oval"><img id="itempic" src="Item4.png"></div></div></li>
    <li><div class="circle" id="item10"><div class="oval"><img id="itempic" src="Item5.png"></div></div></li>
</ul>
</div>
</body>
</html> 
```

我发现了这个问题..谢谢大家的帮助！

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.color.min.js"></script>
<script type="text/javascript">
        $(document).ready(function () {
        var itemnumber = '';
        var itemoval = '';
        $('#menu li').hover(function () {
            itemnumber = '#item' + ($('#menu li').index(this) + 1);
            itemoval = itemnumber + '-oval';
            $(itemnumber).animate({color: "#F97780"}, 500);
            $(itemoval).animate({backgroundColor: "#F97780"}, 500);
        }).mouseleave(function () {
            $(itemnumber).animate({color: "#B8A36E"}, 500);
            $(itemoval).animate({backgroundColor: "#B8A36E"}, 500);
        });
        }); 
</script>
<style type="text/css">
    body {
        width: 810px;
        height: 800px;
        background-image: linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -o-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -moz-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -webkit-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -ms-linear-gradient(bottom, rgb(255,255,255) 0%, rgb(206,203,183) 34%, rgb(177,172,143) 82%);
        background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(255,255,255)),color-stop(0.34, rgb(206,203,183)),color-stop(0.82, rgb(177,172,143)));
    }

    #menu ul { list-style:none; }
    #logo { width:250px; margin:0 285px; }
    .circle { width: 150px; height: 150px; background: transparent; -moz-border-radius: 100px; -webkit-border-radius: 100px; border-radius: 100px; border:10px; border-style:solid; color:#B8A36E; }
    .oval { z-index:-1; margin: 0.5px 10px; width: 130px; height: 50px; background: #B8A36E; -moz-border-radius: 100px / 50px; -webkit-border-radius: 100px / 50px; border-radius: 100px / 50px; }
    #itempic {position:relative; margin: -1px -12px; z-index:-1;}
    #item1 {position:absolute; left: 160px; top:170px; }
    #item2 {position:absolute; left: 335px; top:170px; }
    #item3 {position:absolute; left: 510px; top:170px; }
    #item4 {position:absolute; left: 245px; top:325px; }
    #item5 {position:absolute; left: 420px; top:325px; }
    #item6 {position:absolute; left: 160px; top:480px; }
    #item7 {position:absolute; left: 335px; top:480px; }
    #item8 {position:absolute; left: 510px; top:480px; }
    #item9 {position:absolute; left: 245px; top:635px; }
    #item10 {position:absolute; left: 420px; top:635px; }
</style>
</head>

<body>
<img id="logo" src="logo.png">
<div id="menu">
<ul>
    <li><div class="circle" id="item1"><div class="oval" id="item1-oval"><img id="itempic" src="Item1.png"></div></div></li>
    <li><div class="circle" id="item2"><div class="oval" id="item2-oval"><img id="itempic" src="Item2.png"></div></div></li>
    <li><div class="circle" id="item3"><div class="oval" id="item3-oval"><img id="itempic" src="Item3.png"></div></div></li>
    <li><div class="circle" id="item4"><div class="oval" id="item4-oval"><img id="itempic" src="Item4.png"></div></div></li>
    <li><div class="circle" id="item5"><div class="oval" id="item5-oval"><img id="itempic" src="Item5.png"></div></div></li>
    <li><div class="circle" id="item6"><div class="oval" id="item6-oval"><img id="itempic" src="Item1.png"></div></div></li>
    <li><div class="circle" id="item7"><div class="oval" id="item7-oval"><img id="itempic" src="Item2.png"></div></div></li>
    <li><div class="circle" id="item8"><div class="oval" id="item8-oval"><img id="itempic" src="Item3.png"></div></div></li>
    <li><div class="circle" id="item9"><div class="oval" id="item9-oval"><img id="itempic" src="Item4.png"></div></div></li>
    <li><div class="circle" id="item10"><div class="oval" id="item10-oval"><img id="itempic" src="Item5.png"></div></div></li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:12:09.907

您需要在[此处](http://jqueryui.com/demos/animate/)查看 jQuery UI 颜色动画。

您可以通过包含此脚本标记来包含使用 google CDN 的 jQuery UI。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery-ui/1.8.21/jquery-ui.min.js"></script> 
```

基本上它归结为链接 jQuery UI，然后将悬停函数更改为`mouseenter`函数。

查看这个[工作示例](http://jsfiddle.net/qSwe6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:12:49.157

看看这个：http: [//jsfiddle.net/ufomammut66/ZsX8e/](http://jsfiddle.net/ufomammut66/ZsX8e/)

我将您的悬停事件更改为 mouseenter 事件。如果您将其更改回悬停在 jsfiddle 中，您会注意到“in”日志记录语句将在退出时触发两次（查找我留下的 console.log 语句），这是我们不希望的。

我还将 jquery 选择器更改为您的 circle 类。我这样做是因为看起来你看不到 li 元素（可能只是缺少图像），你希望它在进入 circle 元素时触发。

我不清楚您要使用 itemnumber 做什么，但似乎您正在尝试重建圆形元素 ID 来选择它。我们不需要这样做，因为`this`元素将引用我们正在进入或离开的当前元素。

注意：我假设您使用的是：http: [//www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)作为您的`jquery.color.min.js`导入。jsFiddle 已将此导入工作。

希望这可以帮助。

# apache - 如何超越 DocumentRoot 以进行脚本编写？

> ID：11767409
> 
> 赞同：0
> 
> 时间：2012-08-01T20:52:11.467
> 
> 标签：apache, httpd.conf

如何获取 javascript ajax 调用以查看与 DocumentRoot 相同级别的目录？

我不断被推入 DocumentRoot。

在 httpd.conf 中，我的 DocumentRoot 设置如下：

```
DocumentRoot = "/var/www/html/wordpress" 
```

因此，当用户访问 www.mysite.com 时，它会将他们定向到 www.mysite.com/wordpress 文件夹，但他们看不到“wordpress”。

但是，我的旧版软件已经在 html（与 wordpress 相同级别）下设置了一个名为“scripts”的文件夹，如下所示：

```
html/
    /wordpress  <--- DocumentRoot
    /scripts    <--- i need to get in here via ajax 
```

因此，当我尝试从 ajax 调用访问它时：

```
$.ajax({
    url: "../scripts/myScript.js"
}); 
```

apache（正确）将其发送到 wordpress，因此我的实际调用如下所示：

```
"192.168.2.2/wordpress/scripts/myScript.js" 
```

但我需要它看起来像这样：

```
"192.168.2.2/scripts/myScript.js" 
```

这是路径：

```
"/var/www/html/scripts/myScript.js" 
```

我假设有一个虚拟主机或重定向指令应该可以解决问题，但我已经尝试了几个版本并且无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:56:56.660

尝试使用绝对路径：

```
$.ajax({url: "/scripts/myScript.js"}); 
```

# c# - 从存储过程中获取默认返回值？

> ID：11767410
> 
> 赞同：0
> 
> 时间：2012-08-01T20:52:12.380
> 
> 标签：c#, sql, stored-procedures, ado.net

```
public int Test()
        {
            int result = 1;

            SqlCommand cmd = new SqlCommand("spTest", conn);
            cmd.CommandType = CommandType.StoredProcedure;

            var returnParameter = cmd.Parameters.Add("@RETURN_VALUE", SqlDbType.Int);
            returnParameter.Direction = ParameterDirection.ReturnValue;

            try
            {
                conn.Open();
                cmd.ExecuteNonQuery();
                result = Convert.ToInt32(returnParameter.Value);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message.ToString());
            }
            finally
            {
                conn.Close();
            }

            return result;
        } 
```

该方法以 result = 1 开始，因此如果查询成功，我可以看到它变为 0。我对此进行了测试，它确实从 1 变为 0。我的问题是，这是从存储过程中获取默认 RETURN_VALUE 的正确方法吗？

这也将结果的值从 1 更改为 0。为什么？查询尚未运行。

```
public int Test()
        {
            int result = 1;

            SqlCommand cmd = new SqlCommand("spTest", conn);
            cmd.CommandType = CommandType.StoredProcedure;

            var returnParameter = cmd.Parameters.Add("@RETURN_VALUE", SqlDbType.Int);
            returnParameter.Direction = ParameterDirection.ReturnValue;

            result = Convert.ToInt32(returnParameter.Value);

            try
            {
                conn.Open();
                cmd.ExecuteNonQuery();
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message.ToString());
            }
            finally
            {
                conn.Close();
            }

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:53:40.997

是的。虽然如果您的连接无法打开，您会在您的`finally`

如果这是 SQL Server，请不要以 sp 开头存储过程名称

# python - 如何可视化定制Django的文件上传表单

> ID：11767411
> 
> 赞同：4
> 
> 时间：2012-08-01T20:52:16.007
> 
> 标签：python, django, user-interface, file-upload, customization

我的 Django 网站上有一个使用他们的表单的小文件上传系统。不幸的是，由于它直接从 django 表单中获取，我无法对其进行格式化，或者根本无法更改“选择文件”按钮。由于一段代码是 1000 字，这是让我无法编辑的代码片段 -

蟒蛇——

```
class UploadFileForm(forms.Form):
  file  = forms.FileField() 
```

~

```
 form = UploadFileForm()
  template = loader.get_template('file_upload.html')
  context = Context({ 'user': request.user, 'no_header': 'True', 'form' : form, 'applicant' : Applicant.objects.get(act_code = code)}) 
```

和 html -

```
<form name="upload" enctype="multipart/form-data" action="/file_upload/{{ object.act_code }}/{{ object.email }}/" method="post" style="padding:20px; margin:5px;" >
          {{ form }}
          <br/><br/><input type="submit" value="Upload" />
 </form> 
```

无论如何要这样做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:36:33.907

该`<input type="file">`元素是一个操作系统控件。您根本无法对其进行太多更改，在基于 WebKit 的浏览器中几乎没有任何更改。这不是 Django 的事情。有一些 JS 插件可以将文件字段替换为*可以*设置样式的常规文本字段和按钮组合，但除此之外，您不走运。

# javascript - 布尔变量表现得很奇怪

> ID：11767413
> 
> 赞同：1
> 
> 时间：2012-08-01T20:52:38.037
> 
> 标签：javascript, jquery

首先是代码：

```
function searchItems(){
var noParameters = new Boolean(0);
var formFields = $('form')[0].elements;
for(i=0;1<formFields.length;i++){
    if(formFields[i].type == 'text'){
        if(!(formFields[i].value)){
            noParameters = 0;
        }
    }
}
alert(noParameters.valueOf());
} 
```

此函数在表单提交时调用。它的目的是查看是否所有“文本”类型的表单字段都没有值（空输入框）。

当我认为我应该收到警报时，我没有收到警报。布尔变量在声明的时候就被初始化了，所以里面有一个值。if 语句都可以正常工作，我已经反复检查过。我在浏览器中遇到的唯一错误是“类型为空或不是对象”，它位于将表单字段类型与“文本”进行比较的行上。

我尝试了不同的警报语法但没有成功：noParameters.toString()，将 noParameters.valueOf() 分配给一个变量，然后发出警报，'true' 和 'false' 而不是 0 和 1。为什么我的警报没有节目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:57:49.210

您有一个无限循环，因为条件`1 < formFields.length`始终为真。然而，`i`每次都会增加，直到`formFields[i]`评估为`null`并且您得到异常，因为您无法访问`type`非对象的属性。

* * *

对于您的问题：`new Boolean(0);`为 value 创建一个绝对不必要的 Object 包装器`false`。不要使用它。在循环内部，您最终分配`0`给变量。JavaScript 是弱类型的，所以这在语法上是有效的，但仍然很奇怪。

然后，在警报中使用该`.valueOf()`方法。对于数字，`0`这将起作用，因为它被隐式转换为`Number`实例，但也不常见。如果您只使用布尔值，则不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:56:33.430

你在循环中犯了一个错误：你说 'while' 1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T20:58:55.467

你可能是说

```
for(i=0;i<formFields.length;i++){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T21:25:14.883

其他人已经指出，你在应该有变量`1`的地方有一个错字，如. 但如果你的目的是：`1<formFields.length``i``i<formFields.length`

> *“查看是否所有类型为‘文本’的表单字段都没有值（空输入框）。”*

然后我会像这样整理你的功能：

```
function searchItems(){
   var noParameters = true,
       formFields = $('form')[0].elements;
   for(i=0;i<formFields.length;i++){
      if(formFields[i].type == 'text' && formFields[i].value != ""){
         noParameters = false;
         break;
      }
   }
   alert(noParameters);
} 
```

也就是说，只要发现任何非空白文本字段设置`noParameters`为 false 并跳出循环。正如我在上面的评论中提到的，只使用原始值`true`和`false`，不要使用`new Boolean()`. 请注意，您不需要嵌套`if`语句：`&&`运算符使用短路评估，因此如果左侧条件为真，它将仅测试右侧条件。

或者，由于您的问题被标记为“jquery”，因此以下内容更短（但在运行时效率较低）：

```
function searchItems() {
   var noParameters = $('form input[type="text"]').filter(function(){
                         return this.value != "";
                      }).length === 0;

   alert(noParameters);
} 
```

也就是说，如果具有非空白值的文本类型输入集的长度为 0，那么您没有设置任何参数...

无论哪种方式，在您测试时，`.value`您可能希望修剪任何空格，以便用户无法通过输入空格来欺骗您的代码：

```
if(formFields[i].type == 'text' && formFields[i].value.replace(/\s/g,"") != "") 
```

# scala - 如何在 Scala 反应中使用关键事件

> ID：11767417
> 
> 赞同：2
> 
> 时间：2012-08-01T20:53:02.520
> 
> 标签：scala, awt

假设有一个“反应”块，例如

```
this.reactions += {
  case KeyReleased(src, key, mod, _) => {
  // do some stuff
  // but how to consume this KeyEvent??
  }
} 
```

在点“一些东西”之后，我想使用 KeyEvent，但我不知道如何。查看 Component.scala 上的源代码，我发现了 KeyReleased 事件是如何构造的：

```
object keys extends Publisher {
  peer.addKeyListener(new KeyListener {
    def keyPressed(e: java.awt.event.KeyEvent) { publish(new KeyPressed(e)) }
    def keyReleased(e: java.awt.event.KeyEvent) { publish(new KeyReleased(e)) }
    def keyTyped(e: java.awt.event.KeyEvent) { publish(new KeyTyped(e)) }
  })
} 
```

java.awt.event.KeyEvent 用作构造函数参数，但 KeyReleased**案例类**具有此签名

```
case class KeyReleased(val source: Component, key: Key.Value, val modifiers: Key.Modifiers, 
                location: Key.Location.Value)
               (val peer: java.awt.event.KeyEvent) extends KeyEvent {
def this(e: java.awt.event.KeyEvent) = 
this(UIElement.cachedWrapper[Component](e.getSource.asInstanceOf[JComponent]), 
    Key(e.getKeyCode), e.getModifiersEx, Key.Location(e.getKeyLocation))(e) 
} 
```

因此我无法访问 KeyEvent 参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:23:05.173

您不必在 case 语句反应中解压缩 KeyReleased 事件。只需匹配 Event 本身，您就可以调用它的消费。

```
reactions += {
    case e: KeyReleased => {
        println(e.source, e.key, e.modifiers)
        e.consume
    }
} 
```

# java - 编写自定义 HSB 颜色函数 - Android

> ID：11767418
> 
> 赞同：0
> 
> 时间：2012-08-01T20:53:04.470
> 
> 标签：java, android, colors

在我的 Android 应用程序中，HSB 颜色空间非常适合我正在做的事情（因为色调值在 0-360 之间计算，而 S & B 保持在恒定的 100）。

java.awt.Color 中的 Color 类具有此功能，但 Android.Color 没有，因此我正在寻找可能的自定义实现或解决此问题的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:33:54.977

好的，所以我想办法解决这个问题。

纯粹从价值的角度来看，色彩空间 HSV 的工作原理类似于 HSB。

一旦您满意，您可以将饱和度和亮度定义为常数，例如每个 255 = 1f，然后简单地增加色调值将慢慢在颜色范围内起作用。

# scala - Typesafe Stack 2.0.2 - Lifty 依赖

> ID：11767420
> 
> 赞同：1
> 
> 时间：2012-08-01T20:53:09.273
> 
> 标签：scala

下载 Typesafe Stack 2.0.2 并安装，但输入 sbt 给出...

```
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.lifty#lifty;1.7.4: not found
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

有什么线索吗？

# javascript - Firefox 和 Webkit 的俄罗斯木偶显示问题：适用于 IE

> ID：11767424
> 
> 赞同：0
> 
> 时间：2012-08-01T20:53:29.097
> 
> 标签：javascript, firefox, button, webkit

我有一个教学网页，在特定部分 (DIV) 中，一系列问题必须一个接一个地出现。一旦用户回答了 Q1，Q2 就会显示在下方，依此类推。

这是结构：

Mother_DIV 包含：带有问题的文本和一个 Button1

DIV2 as display=none 其中包含：对上述问题的回答 + 文本和一个 Button2

```
DIV3  as display=none which contains: 
Answer to question above + text and a Button3 
```

如果需要，依此类推。

有一个js的show(element)函数，可以将任意元素的显示样式改为“内联”，每个按钮都必须将fillowing DIV的显示改为内联。

按钮 1 有： onclick=show('DIV2') 现在当 DIV2 可见时，Button2 也可见

按钮 2 有： onclick=show('DIV3') 现在当 DIV3 可见时，Button3 也可见...

该脚本在 IE9 上就像一个魅力。

在 Firefox 或 Webkit 浏览器上，事情变得很忙！

Button1 工作并显示 DIV2，但随后 Button2 未被识别为按钮！单击无效，鼠标悬停不会将指针更改为手形。

为了修复它，我改变了结构：

Mother_DIV 包含：Button1 和 Button2 和 Button3 等。加上一些文本

DIV2 as display=none 其中包含：文本

```
DIV3  as display=none which contains: 
text 
```

猜猜看：所有按钮现在都在工作，每个连续的 DIV 都与其文本块一起显示！

唯一的问题是这个 UI 是不可接受的，因为当文本太长并且用户向下滚动时，按钮不再出现在页面的可见部分。

有人知道如何处理和保存我的一天吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:08:31.727

在您的 Javascript 显示函数中，尝试将显示样式设置为`'block'`或`''`。（`'block'`是`DIV`标签的默认值，并将`''`其设置为默认值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:26:49.177

创立它！你知道吗？这是一种奇怪的行为，也许答案对您有用：

我有一个 DIV 高度=500px。该 DIV 包含 2 个子 DIV：第一个是 490px 高度 top=0。第二个是 height=240px AND top=250px（大约是主 DIV 的下半部分）。

除非需要，否则第二个子 DIV 具有 display=none。因此它是不可见的。

用IE没问题。对于其他浏览器，不可见意味着仅对您的眼睛不可见，但对鼠标指针不可见。

然后，当一个按钮位于主 DIV 的下半部分后面时，它就会变为非活动状态。

请不要投票<0！

# python - Pascal DLL 没有函数

> ID：11767428
> 
> 赞同：1
> 
> 时间：2012-08-01T20:53:49.297
> 
> 标签：python, dll, export, ctypes, pascal

我一直在使用 FreePascal 并制作了一个简单的测试 DLL。

```
library dll;

function addstuff(onenumber, twonumber : Integer) : integer; stdcall;

begin
     addstuff := onenumber + twonumber;
end;

begin
end.

exports addstuff; 
```

但是，当我尝试使用 Ctypes 将其导入 Python 时，它声称`addstuff`dll 中没有函数。[DLL 导出查看器](http://www.nirsoft.net/utils/dll_export_viewer.html)说其中也没有任何功能。

我似乎无法在互联网上找到任何用于构建 DLL 的简单教程，所以我很可能在做一些愚蠢的错误。有小费吗？我对帕斯卡很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:02:05.397

你在程序之外有导出部分，把它放在里面

```
library dll;

function addstuff(onenumber, twonumber : Integer) : integer; stdcall;

begin
     addstuff := onenumber + twonumber;
end;

exports addstuff;    

begin
end. 
```

# android - 需要一个最小的 Django 数据存储示例

> ID：11767432
> 
> 赞同：1
> 
> 时间：2012-08-01T20:54:10.370
> 
> 标签：android, python, django

我是 Django 的新手。我很难制作一个程序来存储数据。

我找不到任何最新的例子。那么，您能否在此处发布或向我推荐一个最小但完整的示例代码。

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:14:15.237

带有 Android 客户端的 Django-TastyPie

[http://thecodachi.blogspot.com/2012/03/django-tastypie-with-android-client.html](http://thecodachi.blogspot.com/2012/03/django-tastypie-with-android-client.html)

[http://thecodachi.blogspot.com/2012/04/django-tastypie-with-android-client.html](http://thecodachi.blogspot.com/2012/04/django-tastypie-with-android-client.html)

# python - Python 从 html 中抓取所有链接并仅显示链接

> ID：11767437
> 
> 赞同：2
> 
> 时间：2012-08-01T20:54:42.587
> 
> 标签：python, regex

我正在尝试使用以下语句从网页中获取标题：

```
titl1 = re.findall(r'<title>(.*?)</title>',the_webpage) 
```

使用它，我得到`['random webpage example1']`. 如何删除引号和括号？

* * *

我还尝试使用以下方法获取一组每小时更改一次的链接（这就是我需要通配符的原因）`links = re.findall(r'(file=(.*?).mp3)',the_webpage)`：

我明白了

```
[('file=http://media.kickstatic.com/kickapps/images/3380/audios/944521.mp3', 
  'http://media.kickstatic.com/kickapps/images/3380/audios/944521'), 
 ('file=http://media.kickstatic.com/kickapps/images/3380/audios/944521.mp3', 
  'http://media.kickstatic.com/kickapps/images/3380/audios/944521'), 
 ('file=http://media.kickstatic.com/kickapps/images/3380/audios/944521.mp3', 
  'http://media.kickstatic.com/kickapps/images/3380/audios/944521')] 
```

如何在没有 的情况下获得 mp3 链接`file=`？

* * *

我还想下载 mp3 文件并在它们后面附加网站的标题，这样它就会显示

`random webpage example1.mp3`

我该怎么做？我还在学习 Python 和正则表达式，这有点难倒我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:09:52.620

至少在第 1 部分，你可以做

```
>>> mytitle = title1[0]
>>> print mytitle
random webpage example1 
```

正则表达式返回匹配的字符串列表，因此您只需要获取列表中的第一项。

同样，对于第二部分，正则表达式返回一个包含元组的列表。你可以这样做：

```
>>> download_links = [href for (discard, href) in links]
>>> print download_links
['http://media.kickstatic.com/kickapps/images/3380/audios/944521', 'http://media.kickstatic.com/kickapps/images/3380/audios/944521', 'http://media.kickstatic.com/kickapps/images/3380/audios/944521'] 
```

至于下载文件，请使用`urlib2`（至少对于python 2.x，不确定python 3.x）。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:21:44.757

第一部分 `titl1 = re.findall(r'<title>(.*?)</title>',the_webpage)`将返回一个列表，当您打印一个列表时，它会带有括号和引号。因此`print title[0]`，如果您确定永远只有一场比赛，请尝试一下。（您也可以尝试 re.search 代替）

* * *

对于第二部分，如果您将 re 模式从 更改为`"(file=(.*?)\.mp3)"`，`"file=(.*?)\.mp3"`您将只获得`'http://linkInThisPart/path/etc/etc'`添加 .mp3 扩展名所需的部分。

IE

```
audio_links = [x +'.mp3' for x in re.findall(r'file=(.*?)\.mp3',web_page)] 
```

* * *

要下载您可能需要查看 urllib、urllib2 的文件

```
import urllib2
url='http://media.kickstatic.com/kickapps/images/3380/audios/944521.mp3'
req=urllib2.Request(url)
temp_file=open('random webpage example1.mp3','wb')
buffer=urllib2.urlopen(req).read()
temp_file.write(buff)
temp_file.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:40:08.103

代码：

```
#!/usr/bin/env python

import re,urllib,urllib2

Url = "http://www.ihiphopmusic.com/music/rick-ross-sixteen-feat-andre-3000"
print Url
print 'test .............'
req = urllib2.Request(Url)
print "1"
response = urllib2.urlopen(req)
print "2"
the_webpage = response.read()
print "3"
titl1 = re.findall(r'<title>(.*?)</title>',the_webpage)
print "4"
a2 = [x +'.mp3' for x in re.findall(r'file=(.*?)\.mp3',the_webpage)]
print "5"
a2 = [x[0][5:] for x in a2]
print "6"
ti = titl1[0]
print ti
print "7"
print a2
print "8"

print "9"
#print the_page
print "10"

req=urllib2.Request(a2)
print "11"
temp_file=open(ti)
print "12"
buffer=urllib2.urlopen(req).read()
print "13"
temp_file.write(buff)
print "14"
temp_file.close()
print "15"
print "16" 
```

结果

```
http://www.ihiphopmusic.com/music/rick-ross-sixteen-feat-andre-3000
test .............
1
2
3
4
5
6
Rick Ross - Sixteen (feat. Andre 3000)
7
['', '', '']
8
9
10
Traceback (most recent call last):
  File "grub.py", line 29, in <module>
    req=urllib2.Request(a2)
  File "/usr/lib/python2.7/urllib2.py", line 198, in __init__
    self.__original = unwrap(url)
  File "/usr/lib/python2.7/urllib.py", line 1056, in unwrap
    url = url.strip()
AttributeError: 'list' object has no attribute 'strip' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-01T05:14:12.543

蟒蛇 3：

```
import requests
import re
from urllib.request import urlretrieve 
```

-**首先获取 HTML 文本**

```
html_text=requests.get('url') 
```

-**正则表达式查找网址**

> 正则表达式模式，匹配（'模式'，'文本'，标志）
> 
> 在该模式中，'()' 用于对您想要的内容进行分组。在这种情况下，我们将 'http://*****.mp3' 分组，您可以使用 .group(1) 或 groups() 来引用它。

```
url_find=re.findall('file=(http://media.mp3*',html_text)
for url_match in url_matches:
    index += 1
    print(url_match)
    urlretrieve(url_match, './graber/mp3/user' + str(index) + '.mp3') 
```

我就是这样完成的，希望对你有帮助。（下载东西有多种方式，在这种情况下，我使用urlretrieve）

# python - Python 转义序列和字符串操作

> ID：11767438
> 
> 赞同：2
> 
> 时间：2012-08-01T20:54:43.820
> 
> 标签：python, string, escaping, sequence, backslash

我有以下两个变量：

```
a = chr(92) + 'x11'
b = '\x11'
print 'a is: ' + a
print 'b is: ' + b 
```

这些打印语句的结果：

```
a is: \x11
b is: <|        # Here I am just showing a representation of the symbol that is printed for b 
```

如何使变量 a 使用 chr(92) 调用打印与 var b 相同的内容？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:05:44.510

其他答案正在向您展示如何让`b`您获得您所获得的东西`a`。如果你想`a`给你你得到的`b`东西（如果我没看错的话，这就是你要问的），你需要解码转义序列：

```
>>> a
u'\\x11'
>>> a.decode('string-escape')
'\x11' 
```

如果您想要一个 unicode 字符串作为结果，您也可以使用`unicode-escape`而不是。`string-escape`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T20:57:13.510

查看[字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)的文档。

反斜杠是 Python 字符串中的转义字符，因此要在字符串中包含文字反斜杠，您需要使用两个连续的反斜杠对其进行转义。或者，您可以通过使用原始字符串文字来抑制反斜杠的转义行为，这是通过在字符串前面加上`r`. 例如：

*   转义反斜杠：

    ```
    b = '\\x11' 
    ```

*   使用原始字符串文字：

    ```
    b = r'\x11' 
    ```

如果我误解了您的问题并且`b`应该是`'\x11'`或等效地`chr(17)`，但您只是希望它以转义格式显示，您可以使用`repr()`：

```
>>> b = '\x11'
>>> print 'b is: ' + repr(b)
b is: '\x11' 
```

如果您不想要引号，请使用[string_escape 编码](http://docs.python.org/library/codecs.html#standard-encodings)：

```
>>> print 'b is: ' + b.encode('string_escape')
b is: \x11 
```

或者要得到`a`一样的`b`，可以使用`a.decode('string_escape')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:58:11.873

`\x11`似乎是`^Q`ASCII 控制字符的十六进制值：

```
\021  17  DC1  \x11  ^Q    (Device control 1) (XON) (Default UNIX    START char.) 
```

您需要转义`\`以获得文字`\x11`

# svn - 是否有可以跨多个版本控制系统（Git、Mercurial、TFS、SVN）运行持续集成的工具

> ID：11767439
> 
> 赞同：2
> 
> 时间：2012-08-01T20:54:43.760
> 
> 标签：svn, mercurial, github, bitbucket, codeplex

我想知道是否有一种工具可以跨多个源代码存储库系统运行 CI，例如 Git、Mercurial、TFS、SVN。

这个想法是该工具从远程源代码存储库中提取并跨代码运行 CI（编译代码并运行测试）。

我有多个跨多个域（GitHub.com、BitBucket.org、tfspreview.com 和 codeplex.com）的代码库存储库，包括个人项目和商业客户项目。

我正在考虑为自己构建这个平台，但它是否已经作为单个应用程序（SaaS 或其他）存在。我知道我可以将批处理、msbuild 和 Cruisecontrol 配置文件混合在一起，但这非常耗时且非常难以管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:58:30.537

**Jenkins CI**似乎有你想要的

[http://jenkins-ci.org/](http://jenkins-ci.org/)

您可以从此处构建的受支持 SCM 列表：[https ://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Sourcecodemanagement](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Sourcecodemanagement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T06:00:31.383

JetBrain 的 TeamCity 可免费用于小规模使用。它比詹金斯要狡猾得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T09:29:38.530

*   正如[Philluminati](https://stackoverflow.com/users/25466/philluminati)上面回答的那样，您可以使用[Jenkins CI](http://jenkins-ci.org/)。
*   由于您有多个 VCS，Jenkins 可以为您提供帮助。
*   如果某些存储库是基于特定平台的，您也可以在 Jenkins 中使用**主从**解决方案（[如果需要，如何在特定平台上使用 Jenkins。](https://blog.codecentric.de/en/2012/01/continuous-integration-for-ios-projects-with-jenkins-ci/)）

# javascript - Ember.js 订单 hasMany Children

> ID：11767446
> 
> 赞同：1
> 
> 时间：2012-08-01T20:55:26.637
> 
> 标签：javascript, ember.js, ember-data

我有一个项目模型，每个项目可以有很多项目。这可能有很多层次。

我有这个 jsfiddle [http://jsfiddle.net/rmossuk/xmcBf/3/](http://jsfiddle.net/rmossuk/xmcBf/3/)

如何更改它以能够拥有多个级别的项目，以及如何循环每个级别以显示它们？

我还需要能够订购每个孩子的物品并将该订单存储到服务器上。

请谁能告诉我你怎么能做到这一点？

**更新：**

我现在已经设法实现了 Items can be many levels deep bit of this question see here [http://jsfiddle.net/rmossuk/fBmmS/3/](http://jsfiddle.net/rmossuk/fBmmS/3/)

但是我需要一种方法来说明每个子项的顺序并按该顺序显示它们。目前它只显示 itemIds 数组中的子项，但这仅用于关联目的，我无法将其更改为重新排序，可以吗？

有人知道怎么做吗 ？

非常感谢瑞克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T11:50:03.183

在视图中，使用`sortedItems`计算属性，定义如下：

**JS**

```
App.Item = DS.Model.extend({
  name: DS.attr('string'),
  index: DS.attr('number'),
  items: DS.hasMany('App.Item', {key: 'itemIds'} ),
  item: DS.belongsTo('App.Item'),
  product: DS.belongsTo('App.Product'),

  sortedItems: function () {
    var items = this.get('items').toArray();
    return items.sort(function (lhs, rhs) {
      return lhs.get('index') - rhs.get('index');
    });
  }.property('items.@each.isLoaded')
}); 
```

在此处查看完整的工作解决方案：http: [//jsfiddle.net/MikeAski/K286Q/3/](http://jsfiddle.net/MikeAski/K286Q/3/)

* * *

***编辑***

根据您的要求，这是另一种解决方案，将排序的 id 保留在父级中（以最大程度地减少更新和索引管理）：http: [//jsfiddle.net/MikeAski/K286Q/12/](http://jsfiddle.net/MikeAski/K286Q/12/)

**JS**

```
App.Item = DS.Model.extend({
  name: DS.attr('string'),
  items: DS.hasMany('App.Item', {key: 'itemIds'} ),
  sortedIds: DS.attr('string', { key: 'sortedIds' }),
  item: DS.belongsTo('App.Item'),
  product: DS.belongsTo('App.Product'),

  sortedChildren: function () {
    if (!this.get('isLoaded')) {
      return [];
    }
    var sortedIds = this.get('sortedIds').split(','),
        items = this.get('items').toArray();
    return sortedIds.map(function (id) {
      if (id === '') {
        return null;
      }
      return items.find(function (item) {
          return item.get('id') == id;
      });
    }).filter(function(item) {
      return !!item;
    });
  }.property('isLoaded', 'sortedIds', 'items.@each.isLoaded')
}); 
```

稍微复杂一点，不过...

# javascript - 运行 Javascript 以更改 RadioButtonList 上的值单击

> ID：11767447
> 
> 赞同：0
> 
> 时间：2012-08-01T20:55:30.130
> 
> 标签：javascript, asp.net, onclick, radiobuttonlist

好的，所以我正在编写一个代码，它根据三个文本框的值和单选按钮列表中的选择来计算成本。该页面使用 ASP.net 控件。以下脚本在每个文本框的 onBlur 中运行，以便更新总数并将其显示在另一个 texbox 中：

```
function calcTotal(form) {
var total = 0;

var sellingthings = $(form).find('.payable');

var adultLunch = $(form).find('.adultLunch');
var lunch1 = $(adultLunch).val();
var childLunch = $(form).find('.childLunch');
var lunch2 = $(childLunch).val();
var semTix = $(form).find('.seminarTix');
var tix = $(semTix).val();
var reg= $(form).find('.registration input:checked');
var regCost = $(reg).val();
//alert(regCost);

total = (10*lunch1 + 5*lunch2 + 40*tix + regCost*1);
var output = $(form).find('.total');
$(output).val(total);
} 
```

此代码适用于文本框以更新 .total 字段中的值。但是，相同的代码不能在单选按钮列表上正常工作。它的代码在这里：

```
<asp:RadioButtonList ID = "RegType" runat = "server" name="regType" onclick="calcTotal(this.form)">
    <asp:ListItem Value="50">Family ($50)</asp:ListItem>
    <asp:ListItem Value="35">Individual ($35)</asp:ListItem>
    <asp:ListItem Value="10">Student ($10)</asp:ListItem>
</asp:RadioButtonList> 
```

有谁知道为什么会这样或我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:02:03.770

我不确定控件是否有`onClick`属性`RadioButtonList`。

看看[这个教程](http://www.siphilp.co.uk/archive/2007/11/08/adding-a-javascript-onclick-event-to-a-radio-button-list.aspx)，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:42:59.870

我找到了解决方案。在 Javascript 中，我使用了以下代码：

```
$(document).ready(function () {
    $(".registration input").change(function () { calcTotal(document.forms[0]); });
}); 
```

当单选按钮输入在任何时候更改时，它将运行计算代码。您无法将代码添加到 a `radiobuttonlist`，因此您必须以另一种方式进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:20:39.880

默认情况下，RadioButtonList 呈现为表格，因此它将 onclick 处理程序添加到表格而不是单选输入元素。将RepeatLayout 属性更改为RepeatLayout.Flow 并查看是否可行。

# python - BS 没有“看到”所有表格？

> ID：11767455
> 
> 赞同：0
> 
> 时间：2012-08-01T20:56:10.810
> 
> 标签：python, parsing, html-parsing, beautifulsoup

我正在使用 BeautifulSoup 来解析balloon-reference.com 上的数据，它适用于每一页，除了一些像[这样](http://www.baseball-reference.com/boxes/ANA/ANA201205030.shtml)的页面 相同的页面（不同的数据）完美地工作，即[这个](http://www.baseball-reference.com/boxes/MIN/MIN201204120.shtml)。我正在尝试过滤掉以“stats_table”作为类之一的表。我使用这段代码：

```
bs = BeautifulSoup(stream, 'lxml', parse_only=SoupStrainer('table')) 
```

然后我做某事：

```
for table in bs.find_all('table'):
     print table.attrs
       ... bla bla... 
```

很明显，在 table.attrs 中，这段代码没有看到击球台和投球台，而且它们在那里......我重复一遍：相同的代码几乎适用于所有其他类似页面。查看 str(bs) 清楚地表明

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:37:35.307

正如您在评论中发布的那样，页面上有错误。你应该使用 HTML Tidy 来清理它：http: [//pypi.python.org/pypi/pytidylib/0.2.1](http://pypi.python.org/pypi/pytidylib/0.2.1)

您可以在工作中检查 HTML Tidy：http: [//validator.w3.org/](http://validator.w3.org/)

# winapi - 如何在 Windows 8 上注册自定义 Win+V 热键？

> ID：11767458
> 
> 赞同：3
> 
> 时间：2012-08-01T20:56:28.373
> 
> 标签：winapi, windows-8, hotkeys, registerhotkey

可以在 Windows 8 之前的 Windows 版本上注册 Win+V 热键。使用此组合的示例应用程序是[PureText](http://www.stevemiller.net/puretext/)。

在 Windows 8 Release Preview 中，我注意到 Windows 8 已经控制了很多涉及 Windows 键的热键，但似乎没有使用 Win+V。下面的代码将允许我为 Win+CTRL+V 注册一个热键：

```
#include <Windows.h>

int _tmain(int argc, _TCHAR* argv[])
{
    if (RegisterHotKey(
        NULL,
        1,
        MOD_WIN | MOD_NOREPEAT | MOD_CONTROL,
        0x56))  // 0x56 is 'v'
    {
        _tprintf(_T("Hotkey 'CTRL+WIN+V' registered, using MOD_NOREPEAT flag\n"));
    }

    MSG msg = {0};
    while (GetMessage(&msg, NULL, 0, 0) != 0)
    {
        if (msg.message == WM_HOTKEY)
        {
            _tprintf(_T("WM_HOTKEY received\n"));            
        }
    } 

    return 0;
} 
```

如果我将其修改为仅注册 Win+V 那么它将无法注册：

```
if (RegisterHotKey(
    NULL,
    1,
    MOD_WIN | MOD_NOREPEAT,
    0x56))  // 0x56 is 'v'
{
    _tprintf(_T("Hotkey 'WIN+V' registered, using MOD_NOREPEAT flag\n"));
} 
```

有没有办法强制注册 Windows+V 热键？我认为可能有一种方法可以通过 Win32 API 挂钩来做到这一点，但我已经有一段时间没有看到它了。实现这一点的更容易支持的选项将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:20:04.440

该`RegisterHotKey`函数始终为系统保留 Windows 键。[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309.aspx)甚至指出：

> **`MOD_WIN`** `0x0008`
> 任一 WINDOWS 键被按住。这些键标有 Windows 徽标。涉及 WINDOWS 键的键盘快捷键保留供操作系统使用。

在注册自己的非系统热键时，您应该选择不同的 [set of] 修饰键。

此外，正如其他人所提到的，`![Windows key](../Images/55f6e6d7a52e6c963ee0197cf8ec4619.png)`+`V`键盘快捷键已经在使用中。`RegisterHotKey`当您尝试注册已注册的热键时失败。

许多 Win32 函数设置了一个错误代码，当它们不工作时，它会指出究竟出了什么问题。如果文档说明了很多，您可以调用该[`GetLastError`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360.aspx)来确定该错误代码是什么。这将为您提供更多信息以帮助调试问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:38:34.647

使用 PlainTexter... 它使用全局键盘钩子。{在我的机器上工作}

[http://www.elijahg.com/plaintexter](http://www.elijahg.com/plaintexter)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T05:12:14.687

这是[pdf](http://sdrv.ms/xjdwY7)或[xps](http://sdrv.ms/ApP6vs)格式的 Windows 8 键盘快捷键的完整列表。Win+V 已经在使用中；它循环通过通知。坚持使用 Win+CTRL+V 可能是您最好的选择。

# c# - 是否可能 gridView 有一个 FocusedRowHandle 但在视图上我们看不到该行被突出显示？

> ID：11767460
> 
> 赞同：0
> 
> 时间：2012-08-01T20:56:30.973
> 
> 标签：c#, winforms, gridview, devexpress, highlight

我的 gridView 与 GroupRow - rowHandle 是 -1, -2, ... 当 gridView 启动时，FocusedRowHandle = -1 - 我希望这个 gridView 可以聚焦并突出显示网格中的第一组行。但很奇怪，虽然我看到 view.FocusedRowHandle = -1，但第一组行没有得到焦点或突出显示。gridView 上是否有任何属性可能会阻止突出显示的焦点组行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:08:15.350

请检查其他行是否在单击或聚焦后出现选择颜色，如果没有，则需要设置属性“EnableAppearanceFocusedRow”=true......

# mysql - MySQL 自连接与排除 where

> ID：11767463
> 
> 赞同：1
> 
> 时间：2012-08-01T20:56:38.033
> 
> 标签：mysql, outer-join

我正在寻找与[这个问题](https://stackoverflow.com/questions/1219909/mysql-join-with-where-clause/ "这个问题")相反的解决方案。我想将 tableA 自连接为 tableB，因此 where 子句不会影响 tableB 结果。我想获得所有客户的总和以及 cancel_date='0000-00-00' 的客户总和我不想切换表 tableA 和 tableB 的位置。我确实有其他 基于tableA 的`where`and语句。`select`

```
SELECT 
count(tableA.client_id) as c_total, 
count(tableB.client_id) as all_c_total 
FROM (tableA) LEFT JOIN tableA tableB ON tableA.client_id = tableB.client_id
WHERE tableA.`cancel_date` = '0000-00-00' 
GROUP BY month(tableA.purch_date) 
ORDER BY month(tableA.purch_date) 
```

结果应如下所示：

```
---------------------
c_total | all_c_total
---------------------
  251   | 273
  45    | 65
  12    | 15
  23    | 29 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:01:41.090

您可以使用`RIGHT JOIN`, 并将条件从`WHERE`子句移出到连接条件中......

```
SELECT 
    count(t1.client_id) as c_total, 
    count(t2.client_id) as all_c_total 
FROM tableA t1 
    RIGHT JOIN tableA t2 
        ON t1.client_id = t2.client_id
        AND t1.`cancel_date` = '0000-00-00' 
GROUP BY month(t1.purch_date) 
ORDER BY month(t1.purch_date) 
```

但是...我建议您重新考虑，切换表格的顺序，然后改用 a `LEFT JOIN`。 `LEFT JOIN`被认为比 . 更好的风格和更易读`RIGHT JOIN`。

# ruby-on-rails-3 - 索引中的嵌套资源链接不起作用

> ID：11767466
> 
> 赞同：1
> 
> 时间：2012-08-01T20:56:50.203
> 
> 标签：ruby-on-rails-3, routes, nested-routes

好的，所以我有一个帖子索引，并希望将其链接到我的幻灯片索引，但由于某种原因，我不断收到此错误

```
No route matches {:controller=>"slides"} 
```

当我与此链接时

```
<%= link_to 'Show Slides', post_slides_path(@post) %> 
```

如果我在我的帖子编辑查看器中使用上面相同的链接，它似乎工作正常....有什么建议吗？

我基本上想从我的帖子中的表格链接到这个....../posts/:id/slides

路线.RB

```
resources :posts do
    resources :slides
end 
```

后模型

```
class Post < ActiveRecord::Base
  attr_accessible :text, :title

  has_many :slides, :dependent => :destroy

  def self.search(search)
    if search
      where('Title Like ?' , "%#{search}%")
    else
      scoped
    end
  end 
```

幻灯片模型

```
class Slide < ActiveRecord::Base
  belongs_to :post 
```

发布索引视图

```
<table id="posts" class="table table-striped table-bordered">
  <thead>
   <tr>
     <th>Title</th>
     <th>Description</th>
   </tr>
 </thead>
 <tbody>
   <% @posts.each do |post| %>
     <tr>
       <td><%= link_to 'Show Slides', post_slides_path(@post) %>
       <td><%= link_to 'Edit', :action => :edit, :id => post.id %></td>
       <td><%= link_to 'Destroy', { :action => :destroy, :id => post.id }, :method => :delete, :confirm => 'Are you sure?' %></td>
     </tr> 
   <% end %>
 <tbody>
<% end %>
</table> 
```

后控制器

```
class PostsController < ApplicationController

  def new
    @post = Post.new
  end

  def show
    @post = Post.find(params[:id])
  end

  def index
    @posts = Post.search(params[:search]).paginate(:per_page => 10, :page =>    params[:page])
  end

  def edit
    @post = Post.find(params[:id])
  end 
```

滑轨控制器

```
class SlidesController < ApplicationController

  def index
    @post = Post.find(params[:post_id])
    @slides = @post.slides.all
  end

  def show
    @post = Post.find(params[:post_id])
    @slide = @post.slides.find(params[:id])
  end

  def new
    @post = Post.find(params[:post_id])
    @slide = Slide.new
  end

  def edit
    @post = Post.find(params[:post_id])
    @slide = Slide.find(params[:id])
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:13:38.187

post_slides_path 正在寻找一个 id 作为参数来匹配 /posts/:id/slides 路由。它在您的编辑页面中起作用的原因是因为您的 @post 变量正在查找 Post 对象的 id ( @post = Post.find(params[:id]) )。在 Post 控制器的索引操作中，您有指向搜索参数和分页的 @posts 实例变量，并且您没有定义 @post 实例变量。

在你的街区尝试

```
 post_slides_path(post.id) 
```

# css - ExtJS4 中网格面板的颜色图例

> ID：11767469
> 
> 赞同：1
> 
> 时间：2012-08-01T20:56:57.093
> 
> 标签：css, extjs, grid, extjs4

我要求网格中的每个单元格都可以根据某些标准从可用的 8 种颜色中提取任何颜色。之后，我需要在网格面板下方显示这 8 种颜色的颜色图例及其标签名称。有人可以建议我 ExtJS4 是否有任何网格功能或任何关于如何解决这个问题的想法。

/** CSS 示例 */

```
.r1 .x-grid-cell-inner {
background-color: #f0f6ff;
color: #09d6ff;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r2 .x-grid-cell-inner {
background-color: rgba(255, 183, 189, 0.22);
color: #900;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r3 .x-grid-cell-inner {
background-color: #e2ffe2;
color: #090;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r4 .x-grid-cell-inner {
background-color: rgba(255, 233, 228, 0.12);
color: #99890e;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r5 .x-grid-cell-inner {
background-color: rgba(186, 242, 250, 0.10);
color: #1a4f99;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r6 .x-grid-cell-inner {
background-color: rgba(255, 242, 239, 0.23);
color: #ff7f00;
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r7 .x-grid-cell-inner {
background-color: rgba(228, 224, 255, 0.7);
color: rgba(29, 7, 255, 0.60);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.r8 .x-grid-cell-inner {
background-color: rgba(255, 233, 228, 0.32);
color: rgba(255, 22, 12, 0.65);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
}

.n1 .x-grid-cell-inner {
background-color: rgb(255, 255, 255);
color: rgb(255, 127, 0);
border-left: 1px dotted rgba(2, 3, 3, 0.27);
border-right: 1px dotted rgba(2, 3, 3, 0.27);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:18:31.390

我不得不做类似的事情。

我使用列的`renderer`配置根据值将“颜色”类应用于单元格。

在我的情况下，该值决定了单元格的颜色。

这是渲染器：

```
// ... other column configs
renderer: function(value, meta, record) {
    switch(value) {

        case 1 : 
            meta.tdCls = 'orange-cell';
            break;

        case 2 : 
            meta.tdCls = 'light-orange-cell';
            break;

        case 3 : 
            meta.tdCls = 'green-cell';
            break;   
    }

    // I only had a color in my cell without any kind of value
    // so didn't include the following return statement. I added it here
    // just so you would know that you can have it also.
    return value;
} 
```

CSS 类看起来像这样：

```
.orange-cell {
    background-color: #ffbb22 !important;
}
.light-orange-cell {
    background-color: #33cc55 !important;
}
.green-cell {
    background-color: #ffeecc !important;
} 
```

这适用于 ExtJS 4.1.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:53:50.657

将类似的内容添加到您的网格定义中：

```
viewConfig: {
  getRowClass: function(record, rowIndex, rowParams, store){
    return record.get("valid") ? "row-valid" : "row-error";
  }
} 
```

有关详细信息，请参阅[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-getRowClass 。](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-getRowClass)

**注意**：这将适用于个别行。你真的需要逐个细胞着色吗？

# javascript - “样式”是javascript中的保留字吗？

> ID：11767475
> 
> 赞同：2
> 
> 时间：2012-08-01T20:57:24.047
> 
> 标签：javascript, reserved-words

我的 IDE（Sublime Text 2）只是以与突出显示`Style`相同的方式`Object`或`Math`在 javascript 模式下突出显示。`Style`用于javascript中的某些东西？这只发生在大写字母`Style`上，而不是`style`.

![在此处输入图像描述](../Images/351727cef36246ae77be0c00ea4fff7d.png)

gist 中的快速测试并没有导致相同的突出显示：[https ://gist.github.com/3230637](https://gist.github.com/3230637)

编辑：添加`Foo`以显示它不仅仅是构造函数语法突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:01:09.790

我不确定为什么您的 IDE 会`Style`这样突出显示，但要回答您的问题，不，样式不是保留字。

[JavaScript 中的保留字列表](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:00:54.493

它不是保留字，而是 DOM 中的一个对象。

[http://www.w3schools.com/jsref/dom_obj_style.asp](http://www.w3schools.com/jsref/dom_obj_style.asp)

许多 IDE 会突出显示这一点，因为它是一个常见的对象，例如`Object`和`Math`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:00:34.210

不：[JavaScript 中的保留字](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)

# linux - TCL、Linux 和 FLOCK

> ID：11767476
> 
> 赞同：1
> 
> 时间：2012-08-01T20:57:28.730
> 
> 标签：linux, tcl, flock

所以我正在使用一个用 TCL 编写的程序，它使用 FLOCK 函数来锁定文件。我在比它当前运行的版本更新的 Linux 上测试它，我发现当更新的机器运行脚本时，它使用 /usr/bin/flock 中的 FLOCK，这与 FLOCK 的 TCL 版本不同。TCL 版本使用 -read -write 等，而 Linux 版本使用完全不同的选项。

简而言之，程序在执行任何 FLOCK 调用时都会停止工作并出错。如果我更改选项以适应 Linux 版本，它会破坏其他机器上的程序。

有没有办法让它使用 TCL 版本而不是 Linux 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:07:00.933

Tcl 本身不附带`flock`命令，但如果您进行交互测试，您可能会看到它自动尝试使用系统命令。这种系统命令的自动使用*不是在脚本*中完成的（由于路径不同，这将极易出现不稳定），因此在编写脚本时，您应该明确说明您的意思。

如果你想使用系统命令（它本身是不可移植的，尤其是对于非 Linux 系统），那么只需执行以下操作：

```
exec flock $options... 
```

请注意，Tcl 对 shell 使用不同形式的参数引用。这有时会在写`exec`电话时抓住人们。

**或者，**使用[TclX 包](http://tclx.sourceforge.net/)[`flock`](http://wiki.tcl.tk/2001)中的 Tcl 命令。语法与 Linux 系统实用程序的语法略有不同，很大程度上是因为它的级别较低。对它有利的是，它更便携。

# c# - 将 DataGridView 绑定到可能包含零个元素的 IBindingList

> ID：11767477
> 
> 赞同：3
> 
> 时间：2012-08-01T20:57:40.343
> 
> 标签：c#, list, datagridview, datagridviewcolumn

在 VS 2008 (.Net 3.5) 中使用 C# WinForms

我正在尝试将一个可能为空的列表绑定到数据网格。

如果列表有元素，并且启用了 AutoGenerateColumns，则数据将绑定到列表并且一切正常。

但是，如果列表为空，或者列表为空（通过删除最后一个元素），则什么都不会显示，只有灰色背景。

如果我手动创建列，例如：

```
 if (m_DataGrid.AutoGenerateColumns == false)
                {
                    foreach (var pair in objData.PropertyDataTable
                        .Where(pair => pair.Value.IsNative == true
                                    && pair.Value.IsList == false))
                    {
                        string propertyName = pair.Key;
                        PropertyData propertyData = pair.Value;

                        if (propertyData.Type == typeof(bool))
                        {
                            var column = new DataGridViewCheckBoxColumn()
                            {
                                Name = propertyName,
                                HeaderText = propertyName,
                                DataPropertyName = propertyName,
                                ValueType = propertyData.Type,
                            };
                            m_DataGrid.Columns.Add(column);
                        }
                        else
                        {
                            var column = new DataGridViewTextBoxColumn()
                            {
                                Name = propertyName,
                                HeaderText = propertyName,
                                DataPropertyName = propertyName,
                                ValueType = propertyData.Type,
                            };
                            m_DataGrid.Columns.Add(column);
                        }
                    }
                } 
```

列出现，我可以添加一个新行，但数据实际上并没有绑定，并且没有像通常在自动生成列时那样填充行的默认值。

当我离开视图并返回时，添加的行仍然存在，但数据不会保留。

将自动生成的列与调试器中手动创建的列进行比较，两者之间***唯一***不同的属性是 DataGridViewColumn 基类上的**IsDataBound属性。**

当 AutoGenerateColumns 启用时，IsDataBound 设置为 true，列表中有一个或多个元素，但如果列表的初始元素为零，则为 false，尽管列的 DataPropertyName 属性已正确设置。

**有没有办法将空列表绑定到数据网格，并允许用户在空白列表中添加行，并且所有内容都正确绑定？**

我什至尝试在绑定之前将一个元素添加到一个空列表中，让它自动生成并绑定列......但是一旦删除了行，列就会消失并且绑定丢失。

其他实施细节：

我正在尝试绑定一个自定义列表/集合类型的数据源，该类型继承自：

```
 - ICustomTypeDescriptor
 - IBindingList
 - ICancelAddNew
 - IList<T>
 - ICollection<T>
 - IEnumerable<T>
 - IList
 - ICollection
 - IEnumerable 
```

列表中的对象是从**ICustomTypeDescriptor**继承的动态对象，并将属性映射到字典中的值。这些类型在 ObjectDefinition 类中定义，该类知道动态类型的可用属性信息（属性名称、类型、属性等...）每个列表都有一个分配给它的定义，因此列表中的每个对象都有相同的定义。

我不认为这很重要，因为只要列表中至少有一个元素，一切都会正确绑定，并且可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:39:51.210

对于列表，规则的不是 ICustomTypeDescriptor，而是 ITypedList。在列表级别实现这一点，您可以在运行时提供您认为合适的属性。因为这不依赖于任何行，所以它甚至应该适用于零行。

# objective-c - 自定义排序目标-c OSX

> ID：11767479
> 
> 赞同：0
> 
> 时间：2012-08-01T20:57:44.930
> 
> 标签：objective-c, macos

我正在尝试对可能看起来像这样正确排序的版本号数组进行排序：

```
1.0.1
1.1.2
1.2.0
1.10.3
2.1.1
2.2.2
2.10.2 
```

我有一个数组，我执行以下操作：

```
NSArray *allUpdatekeys = [allUpdatekeystmp sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

这会产生一个类似的列表：

```
1.0.1
1.1.2
1.10.3
1.2.0
... 
```

所以我尝试编写一个自定义选择器，并通过查看我发现的示例得到了这么多：

```
 - (NSComparisonResult)versionCompare:(NSString*) secondVersion  {
     NSArray *secondVer = [secondVersion componentsSeparatedByString:@"."];
     NSString *firstVersion = [];
     NSArray *firstVer = [firstVersion componentsSeparatedByString:@"."];
     NSUInteger firstPri = [firstVer[0] integerValue];
     NSUInteger firstSec = [firstVer[1] integerValue];
     NSUInteger firstTer = [firstVer[2] integerValue];
     NSUInteger secondPri = [secondVer[0] integerValue];
     NSUInteger secondSec = [secondVer[1] integerValue];
     NSUInteger secondTer = [secondVer[2] integerValue];
     NSLog(@"In the version compare method");
     NSLog(@"first %@ second %@ ", self, secondVersion);
     if (firstPri < secondPri) {
         return NSOrderedAscending;
     }
     else if (firstPri  secondPri) {
         return NSOrderedDescending;
     } else {
         if (firstSec < secondSec) {
             return NSOrderedAscending;
         }
         else if (firstSec  secondSec) {
             return NSOrderedDescending;
         }
         else {
             if (firstTer < secondTer) {
                 return NSOrderedAscending;
             }
             else if (firstTer  secondTer) {
                 return NSOrderedDescending;
             }
             else {
                 return NSOrderedSame;
             }
         }
     } } 
```

我的问题：引用第一个版本的方法是什么？我需要本质上是数组中的第一个字符串。我一直在绞尽脑汁来理解这一点，但是我发现的所有示例也都不起作用。如果有帮助或重要，我在 10.8 上使用 Xcode 4.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:17:48.557

我认为`localizedStandardCompare`这是您正在寻找的：

```
NSArray *theArray = [NSArray arrayWithObjects:    
                     @"1.0.1",
                     @"1.1.2",
                     @"1.2.0",
                     @"1.10.3",
                     @"2.1.1",
                     @"2.2.2",
                     @"2.10.2",
                     nil];

NSArray *sortedArray  = [[NSArray alloc] initWithArray:[theArray sortedArrayUsingSelector:@selector(localizedStandardCompare:)]];

NSLog(@"%@", sortedArray); 
```

输出：

```
(
    "1.0.1",
    "1.1.2",
    "1.2.0",
    "1.10.3",
    "2.1.1",
    "2.2.2",
    "2.10.2"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:49:28.523

另一种获得排序数组的解决方案，其中 1.2.0 小于 1.10.3，这意味着数组是按数字排序的，是：

```
allUpdatekeys = [allUpdatekeystmp sortedArrayUsingFunction:cmp context:NULL]; 
```

具有以下功能：

```
NSComparisonResult cmp( id val1, id val2, void *context ){
   return [val1 compare:num2 options:NSNumericSearch | NSCaseInsensitiveSearch];
} 
```

# iphone - 使用 CGPointMake 绘制箭头

> ID：11767481
> 
> 赞同：0
> 
> 时间：2012-08-01T20:57:58.600
> 
> 标签：iphone, objective-c, ios, ipad

我想画一个像这样的箭头：

![在此处输入图像描述](../Images/393cb2eed12e9fa5bdbebdd7cf41fb31.png)

我怎样才能使用 CGPoint 做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:14:37.330

在 UIView 子视图的 -drawRect 方法中：

```
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextMoveToPoint(ctx, point1.x, point1.y);
CGContextAddLineToPoint(ctx, point2.x, point2.y);
CGContextAddLineToPoint(ctx, point3.x, point3.y);
CGContextAddLineToPoint(ctx, point1.x, point1.y);
CGContextClosePath(context);
CGContextStrokePath(ctx); 
```

# c++ - Boost::regex_match 没有触发

> ID：11767483
> 
> 赞同：0
> 
> 时间：2012-08-01T20:58:03.447
> 
> 标签：c++, regex, boost

我有一些我认为应该触发的增强正则表达式代码。我是新手，但我知道一点正则表达式。这是我正在使用的代码。

```
re = boost::basic_regex<TCHAR>(_T("-+\\s+Original\\s+Message\\s+-+"), boost::regex_constants::icase);
boost::match_results<TSTRING::const_iterator> result;
if(boost::regex_match(RawBody, result, re)) 
```

这是我正在使用的测试字符串。

```
this is a test

-------- Original Message --------

everything under here should disappear 
```

我的代码编译并运行，它只是不会触发 if 语句。我尝试调试到 boost 代码，然后......是的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:06:06.413

正则表达式匹配

> 算法 regex_match**确定给定的正则表达式是否匹配由一对双向迭代器表示的给定字符序列的所有**，该算法定义如下，该函数的主要用途是数据输入验证。

正则表达式搜索

> 算法 regex_search**将搜索由一对双向迭代器表示的范围以查找给定的正则表达式。**该算法使用各种启发式方法来减少搜索时间，方法是仅在可以想象匹配从该位置开始时才检查匹配。算法定义如下：

所以，使用`boost::regex_search`. 例子。

[http://liveworkspace.org/code/fa35778995c4bd1e191c785671ab94b6](http://liveworkspace.org/code/fa35778995c4bd1e191c785671ab94b6)

# r - 如何以与参考线本身相同的角度注释参考线？

> ID：11767484
> 
> 赞同：15
> 
> 时间：2012-08-01T20:58:03.337
> 
> 标签：r

我需要找到一种方法以与参考线本身相同的角度注释参考线。

以下语句将生成参考线及其上方的标签。但是，线的斜率可能会发生变化，我需要找到一种方法来确保注释始终处于相同的角度。

```
plot(1:10,1:10) 
abline(a=8, b=-1)
text(x=4, y=5, "reference line label", srt=-28) 
```

![在此处输入图像描述](../Images/51d037d32ecf6bfab7d40fab331b158f.png)

有没有一种简单的方法可以在 R 中做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T21:20:31.603

一种方法是使用`asp`参数设置绘图纵横比，然后使用指定的 计算角度`asp`：

```
asp <- 2

plot(1:10,1:10, asp=asp) 
abline(a=8, b=-1)
text(x=4, y=5, "reference line label", srt=180/pi*atan(-1*asp))

abline(a=4, b=-2)
text(x=1, y=3, "reference line label", srt=180/pi*atan(-2*asp)) 
```

![在此处输入图像描述](../Images/3b7a00128554174fd94b91ea64ac54e0.png)

设置不同的`asp`：

```
asp <- 0.8

plot(1:10,1:10, asp=asp) 
abline(a=8, b=-1)
text(x=4, y=5, "reference line label", srt=180/pi*atan(-1*asp))

abline(a=4, b=-2)
text(x=1, y=3, "reference line label", srt=180/pi*atan(-2*asp)) 
```

![在此处输入图像描述](../Images/4eda3f4f89ac7dfb3a1198afa3edff2f.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-01T21:27:05.947

@Andrie 答案的附录：不是第一次在图中硬编码纵横比以获得相对坐标比例，而是可以使用以下函数恢复当前工作纵横比：

```
getCurrentAspect <- function() {
   uy <- diff(grconvertY(1:2,"user","inches"))
   ux <- diff(grconvertX(1:2,"user","inches"))
   uy/ux
} 
```

所以你可以创建你的情节： set `asp <- getCurrentAspect()`; 并继续@Andrie 的其余解决方案。

据我所知，这个功能存在于 R 生态系统的某个地方，但我还没有看到它......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T21:22:25.947

类似的解决方案`ggplot2`

```
data <- data.frame(x = 1:10, y = 1:10)
intercept <- 10
slope <- -1
ggplot(data, aes(x,y)) + geom_point(shape=1) +  
  geom_abline(intercept = intercept, slope = slope) + 
  geom_text(x=4, y=5, label="my label", angle=atan(slope)*180/pi) 
```

![带坡度 1](../Images/92dfd653eb98496ae49005929b7dc7a4.png)

```
intercept <- 10
slope <- -2
ggplot(data, aes(x,y)) + geom_point(shape=1) +  
  geom_abline(intercept = intercept, slope = slope) + 
  geom_text(x=4, y=5, label="my label", angle=atan(slope)*180/pi) 
```

![带坡度 2](../Images/c407dd10b30e207782e0822c290f657d.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-27T06:12:22.940

ggplot2 的工作示例：

```
slope<-1.3
asp<-1
p <- ggplot()
p<-p+scale_x_continuous(limits = c(1, 15), expand = c(0, 0)) 
p<-p+scale_y_continuous(limits = c(-8, 20), expand = c(0, 0)) 
p<-p+geom_abline(intercept = 0, slope = slope)
p<-p+coord_fixed(asp)
p<-p+annotate("text", label = "reference line label", x = 3.5, y = 5,  colour = "red",angle=atan(slope*asp)*180/pi)
p 
```

带角度的文字：![](../Images/d32b1f489239b5fd9850624c3d73b81b.png)

# ruby-on-rails - 使用 rails 应用程序启动 em-websocket 是一种好习惯吗

> ID：11767486
> 
> 赞同：1
> 
> 时间：2012-08-01T20:58:14.697
> 
> 标签：ruby-on-rails, ruby, websocket

对于我的 Rails-App，如果上传了新数据，我需要调用所有连接的客户端。所以我想使用websockets。目前我在初始化程序中创建了一个新文件，它在一个新线程中启动套接字服务器：

```
require 'em-websocket'

$websocket_clients = []

Thread.new do
  EventMachine.run {
    EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
      ws.onopen {
        $websocket_clients << ws
      }

      ws.onclose {
        $websocket_clients.delete(ws)
      }

    end
  }
end 
```

所以我可以使用

```
$websocket_clients.each do |ws|
  ws.send "text"
end 
```

在我的控制器中。
我现在的问题是：这是好的做法还是我会遇到任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:04:39.390

当您解聚您的应用程序时，这可能会导致问题。当您部署应用程序时，您通常会分叉多个工作进程，每个工作进程都处理请求 - 至少在两个最流行的服务器（Phusion Passenger 和 unicorn）中。

每个服务器都会尝试启动一个 websocket 线程。第一个启动顺利，下一个可能会崩溃，因为端口被第一个阻塞。如果您解决了这个问题，并且您只是使用代码将消息分发给客户端，如上所述，它可能会正常工作而不会出现重大问题。

但是，如果您开始查询数据库，就会出现问题，只要您不在 ActiveRecord 中启用线程安全。当您的应用程序的 websocket 部分变得更大时，您可以将其放入一个额外的守护进程中，该守护进程与服务器进程分开处理请求。

# php - 禁用 max_user_connections 限制

> ID：11767487
> 
> 赞同：0
> 
> 时间：2012-08-01T20:58:18.493
> 
> 标签：php, mysql

我有一个返回以下错误的项目

```
User already has more than 'max_user_connections' active connections 
```

我知道这是一个 MySQL 错误，我可以增加`max_user_connections`，但是，我想禁用同时访问的验证。可能吗？如何？

谢谢！

**更新**

当前`max_user_connections`是 30 和`max_connections`300，我不坚持连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:10:26.737

更改 mysql 配置文件。

设置 max_user_connections=0。

# regex - 正则表达式匹配带有嵌入空格的字符串

> ID：11767501
> 
> 赞同：0
> 
> 时间：2012-08-01T20:59:33.673
> 
> 标签：regex, perl

我正在尝试编写正则表达式，但无法传递单词空间

我有一个这样的数据文件（由另一个实用程序生成）

```
* field      : 100
blahbla      : <Set>
scree        : <what>
.Cont.asasd  :
Othreaol     : Value, Other value
Point->IP    : 0.0.0.0 Port 5060 
```

模式必须像这样匹配和捕获数据

```
"field" "100"
"blahbla" "<Set>"
"scree" "<what>"
".Cont.asasd" ""
"Othreaol" "Value, Other value" 
```

我的早期解决方案是

```
/^([\s\*]+)([\w]+[\s\.\-\>]{0,2}[\w]+)(\s*\:\s)(.*)/ 
```

但我对一些字符串有问题，比如

```
Z.15 example : No 
```

空格阻止模式匹配

```
H.25 miss here : No 
```

同样的事情

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:58:02.867

这里有一些复杂的答案。我想我会使用一个简单的[split](http://perldoc.perl.org/split.html)：

```
while( <DATA> ) {
    chomp;
    my( $field, $value ) = split /\s*:\s*/, $_, 2;
    print "Field [$field] value [$value]\n";
    }

__DATA__
* field      : 100
blahbla      : <Set>
scree        : <what>
.Cont.asasd  :
Othreaol     : Value, Other value
Point->IP    : 0.0.0.0 Port 5060 
```

这给出了：

```
Field [* field] value [100]
Field [blahbla] value [<Set>]
Field [scree] value [<what>]
Field [.Cont.asasd] value []
Field [Othreaol] value [Value, Other value]
Field [Point->IP] value [0.0.0.0 Port 5060] 
```

从那里，我会根据需要过滤名称和值，而不是尝试在单个正则表达式中完成所有操作：

```
my @pairs = 
    grep { $_->[0] !~ /->/ }                   # filter keys
    map  { $_->[0] =~ s/\A\*\s+//; $_ }        # transform keys
    map  { chomp; [ split /\s*:\s*/, $_, 2 ] } # parse line 
    <DATA>;

use Data::Printer;
p @pairs;

__DATA__
* field      : 100
blahbla      : <Set>
scree        : <what>
.Cont.asasd  :
Othreaol     : Value, Other value
Point->IP    : 0.0.0.0 Port 5060 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:42:31.697

由于您想用冒号分隔值，因此在拆分之前对所有这些字符使用正则表达式中*该字符的补码。*

```
my $regex 
    = qr{
         ( # v- no worry, this matches the first non-space, non-colon
           [^\s:]      
           (?> [^:\n]* # this matches all non-colon chars on the line
               [^\s:]  # match the last non-space, non-colon, if there
           )?          # but possibly not there
         )             # end group

         \s*           # match any number of whitespace
         :             # match the colon
         \s*           # followed by any number of whitespace

         ( \S          # Start second capture with any non space
           (?> .*      # anything on the same line
               \S      # ending in a non-space
           )?          # But, possibly not there at all
         |             # OR 
         )             # nothing - this gives the second capture as an 
                       # empty string instead of an undef
    }x;

while ( <$in> ) { 
    $hash{ $1 } = $2 if m/$regex/;
} 
```

`%hash`然后看起来像这样：

```
{ '* field'        => '100'
, '.Cont.asasd'    => ''
, 'H.25 miss here' => 'No'
, Othreaol         => 'Value, Other value'
, 'Point->IP'      => '0.0.0.0 Port 5060'
, 'Z.15 example'   => 'No'
, blahbla          => '<Set>'
, scree            => '<what>'
} 
```

当然，当我开始考虑它时，如果您可以确定一个`/\s+:\s+/`模式或至少一个`/\s{2,}:\s{2,}/`模式，那么像这样的行可能会更简单`split`：

```
while ( <$in> ) { 
    if ( my ( $k, @v ) 
         = grep {; length } split /\A\s+|\s+\z|(\s+:\s+)/
       ) { 
        shift @v; # the first one will be the separator
        $hash{ $k } = join( '', @v );
    }
} 
```

它做同样的事情，不需要做几乎同样多的回溯来修剪结果。它忽略了转义的冒号，没有更多的语法，因为它必须是一个被空格包围的*裸冒号。*您只需将以下内容添加到 if 块：

```
$k =~ s/(?<!\\)(\\\\)*\\:/$1:/g; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:37:48.943

我不明白为什么`Point->IP`您的示例输出中省略了该行，但类似下面的代码应该适合您。

```
use strict;
use warnings;

while (<DATA>) {
  next unless /([^\s*].+?)\s*:\s*(.*?)\s*$/;
  printf qq("%s" "%s"\n), $1, $2;
}

__DATA__

  * field      : 100
  blahbla      : <Set>
  scree        : <what>
  .Cont.asasd  :
  Othreaol     : Value, Other value
  Point->IP    : 0.0.0.0 Port 5060
  Z.15 example : No
  H.25 miss here : No 
```

**输出**

```
"field" "100"
"blahbla" "<Set>"
"scree" "<what>"
".Cont.asasd" ""
"Othreaol" "Value, Other value"
"Point->IP" "0.0.0.0 Port 5060"
"Z.15 example" "No"
"H.25 miss here" "No" 
```

# php - PHP Digest/Basic Auth 默认窗口外观

> ID：11767504
> 
> 赞同：0
> 
> 时间：2012-08-01T20:59:52.660
> 
> 标签：php, rest, digest, digest-authentication, http-digest

我有一个使用 REST API 的应用程序，并且正在为安全方案实施摘要式身份验证。问题是，当我登录应用程序时，我不希望每次消耗资源时都会弹出默认用户/密码窗口，而是希望它使用登录时写入的用户名和密码应用程序登录表单，那么当收到第一个 401 状态响应时，我该如何使用该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:02:53.287

当对资源发出请求时，您应该在请求标头中传递身份验证信息。

# query-string - 如果页面有查询字符串，图标不显示

> ID：11767507
> 
> 赞同：-2
> 
> 时间：2012-08-01T21:00:00.740
> 
> 标签：query-string, show, favicon

如果 URL 没有查询字符串，Favicon 可以正常显示，但如果 URL 包含查询字符串，它不会显示！

这是没有查询字符串的页面：www.NoonOffer.com

这是带有查询字符串的页面 [http://www.noonoffer.com/Offers.aspx/7/Pay-LE-50-and-get-50-discount-on-PMP-course](http://www.noonoffer.com/Offers.aspx/7/Pay-LE-50-and-get-50-discount-on-PMP-course)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:06:44.113

您的网址似乎不正确。您的代码中的某些内容未将正确的 URL 放入 HREF。

它是： [http ://www.noonoffer.com/Offers.aspx/7/favicon.png](http://www.noonoffer.com/Offers.aspx/7/favicon.png)

应该是： [http ://www.noonoffer.com/favicon.png](http://www.noonoffer.com/favicon.png)

编辑：不确定.NET，但是在使用相对路径时，使用带有 Java Spring MVC 的 Core Tag Library 在 URL 前面的“/”会有所不同。

这会将它附加到我相信的 URI 的末尾：

```
<c:url value="/favicon.png"> 
```

我相信这会像你想要的那样将它附加到上下文根中。

```
<c:url value="favicon.png"> 
```

这可能不是确切的问题，但我希望它会有所帮助。

# c++ - 什么是 iota_n 的良好实现（STL 中缺少算法）

> ID：11767512
> 
> 赞同：11
> 
> 时间：2012-08-01T21:00:30.597
> 
> 标签：c++, algorithm, stl, c++11, iota

在 C++11 中，STL 现在有了一个`std::iota`函数（参见[参考资料](http://en.cppreference.com/w/cpp/algorithm/iota)）。然而，与 , 相比`std::fill_n`，`std::generate_n`没有`std::iota_n`。什么是一个好的实现呢？`std::generate_n`直接循环（备选方案 1）或使用简单 lambda 表达式（备选方案 2）的委托？

**备选方案 1)**

```
template<class OutputIterator, class Size, class T>
OutputIterator iota_n(OutputIterator first, Size n, T value)
{
        while (n--)
                *first++ = value++;
        return first;
} 
```

**备选方案 2)**

```
template<class OutputIterator, class Size, class T>
OutputIterator iota_n(OutputIterator first, Size n, T value)
{
        return std::generate_n(first, n, [&](){ return value++; });
} 
```

两种替代方案都会通过优化编译器生成等效代码吗？

**更新**：结合了@Marc Mutz 的优点，还可以在其目标点返回迭代器。与 C++98 相比，这也是[`std::generate_n`](http://en.cppreference.com/w/cpp/algorithm/generate_n)C++11 中的更新方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T21:26:35.133

`g++ -S -O2 -masm=intel`作为一个随机示例，我使用(GCC 4.7.1, x86_32)编译了以下代码：

```
void fill_it_up(int n, int * p, int val)
{
    asm volatile("DEBUG1");
    iota_n(p, n, val);
    asm volatile("DEBUG2");
    iota_m(p, n, val);
    asm volatile("DEBUG3");
    for (int i = 0; i != n; ++i) { *p++ = val++; }
    asm volatile("DEBUG4");
} 
```

这`iota_n`是第一个版本和`iota_m`第二个版本。装配在所有三种情况下都是这样的：

```
 test    edi, edi
    jle .L4
    mov edx, eax
    neg edx
    lea ebx, [esi+edx*4]
    mov edx, eax
    lea ebp, [edi+eax]
    .p2align 4,,7
    .p2align 3
.L9:
    lea ecx, [edx+1]
    cmp ecx, ebp
    mov DWORD PTR [ebx-4+ecx*4], edx
    mov edx, ecx
    jne .L9 
```

与`-O3`，三个版本也非常相似，但*要*长得多（使用条件移动`punpcklqdq`等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-09T09:47:02.593

您太专注于代码生成，以至于忘记了正确的接口。

您正确 require `OutputIterator`，但是如果您想再次调用它会发生什么？

```
list<double> list(2 * N);
iota_n(list.begin(), N, 0);
// umm...
iota_n(list.begin() + N, N, 0); // doesn't compile!
iota_n(list.rbegin(), N, 0); // works, but create 0..N,N-1..0, not 0..N,0..N
auto it = list.begin();
std::advance(it, N);
iota_n(it, N, 0); // works, but ... yuck and ... slow (O(N)) 
```

在里面`iota_n`，你仍然知道你在哪里，但是你已经把这些信息扔掉了，所以调用者无法在恒定时间内得到它。

一般原则：不要丢弃有用的信息。

```
template <typename OutputIterator, typename SizeType, typename ValueType>
auto iota_n(OutputIterator dest, SizeType N, ValueType value) {
    while (N) {
        *dest = value;
        ++dest;
        ++value;
        --N;
    }
    // now, what do we know that the caller might not know?
    // N? No, it's zero.
    // value? Maybe, but it's just his value + his N
    // dest? Definitely. Caller cannot easily compute his dest + his N (O(N))
    //       So, return it:
    return dest;
} 
```

有了这个定义，上面的例子就变得简单了：

```
list<double> list(2 * N);
auto it = iota_n(list.begin(), N, 0);
auto end = iota_n(it, N, 0);
assert(end == list.end()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-18T05:24:01.600

一个假设的`iota_n`

`std::iota_n(first, count, value)`

可以用一个衬里代替。

`std::generate_n(first, count, [v=value]()mutable{return v++;})`

我更喜欢它有一个不在标准中的挥之不去的功能。话虽如此，我认为 a`std::iota_n`应该在标准中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T11:04:28.773

可能将 back_insertor 与 std::generate_n 一起使用，这样可以避免预先分配集合。

```
vector<int> v3;
generate_n(back_inserter(v3),10,[i=1]() mutable{
    return i++;
}); 
```

我们可以把它换成 iota_n 直到我们得到 iota_n :)

# css - 是否有基于元素是否具有特定属性的 css 选择器？

> ID：11767516
> 
> 赞同：0
> 
> 时间：2012-08-01T21:00:43.967
> 
> 标签：css, magento, css-selectors

我正在使用 Magento，它不允许在可视化编辑器中对图像进行分类；**因此，如果**图像具有属性，我想对其进行编程以自动将右边距应用于图像`float:left`......反之亦然。这可能不使用javascript吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:03:05.397

如果它是`style`属性的一部分，那么确定：`[style*='float:left']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:04:43.060

[不，除了在样式属性](https://stackoverflow.com/a/11767550/1139697)上扫描选择之外，没有基于 CSS 属性的选择器- 毕竟您使用 CSS 设置它们。

最简单的方法是将`margin-right`属性设置在您设置属性的相同位置`float`。

也可以看看：

*   [http://www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors)
*   [http://dev.w3.org/csswg/selectors4/#overview](http://dev.w3.org/csswg/selectors4/#overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:03:03.887

假设你所有的样式都放在一个外部样式表中，答案是“不是没有 javascript”。

但是，如果您将该特定样式放在 html 上（即内联样式），那么 Kolink 建议的内容确实有效。

无论如何，使用 javascript(jQuery) 这里是一个可能的解决方案：http: [//jsfiddle.net/joplomacedo/TECWM/](http://jsfiddle.net/joplomacedo/TECWM/)
如果你看不到小提琴，它是这样的：

```
 if (el.css('float') === 'left') {
        el.css({
            'margin-left': '50px'
        });
    } 
```

# sql-server - 如何计算每组的数字？

> ID：11767523
> 
> 赞同：1
> 
> 时间：2012-08-01T21:01:12.143
> 
> 标签：sql-server

假设有一个结果集......我需要像这样打印出来：

```
ID  Count
1    5
1    5 
1    5
1    5
1    5
2    2
2    2
3    1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:09:07.873

您可以使用`count()`with**[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461.aspx)**：

```
select a, count(*) over (partition by a) as [count]
from tableName ; 
```

它被称为窗口函数。我建议你研究这些。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T21:09:24.923

你的意思是你的查询：

```
SELECT ID, COUNT(*) AS "Count"
FROM tableX
GROUP BY ID ; 
```

产生这个：

```
ID  Count
1    5
2    2
3    1 
```

但你想要这个？：

```
ID  Count
1    5
1    5 
1    5
1    5
1    5
2    2
2    2
3    1 
```

然后，此查询将执行以下操作：

```
SELECT grp.ID, grp."Count"
FROM 
        tableX AS t
    JOIN
        ( SELECT ID, COUNT(*) AS "Count"
          FROM tableX
          GROUP BY ID 
        ) AS grp
      ON grp.ID = t.ID ; 
```

它适用于几乎所有 DBMS 和所有版本的 SQL-Server。对于 SQL-Server 2005 和更新版本（以及在 Oracle 和 Postgres 中），带有`OVER`子句的答案看起来更优雅，可能更受欢迎。在您的版本中测试哪个更有效。我认为在 2012 版本中，带有`OVER`子句的查询非常有效。

# sql-server - SSIS 列出不更新的行

> ID：11767524
> 
> 赞同：0
> 
> 时间：2012-08-01T21:01:22.777
> 
> 标签：sql-server, ssis

我正在使用 OLE DB 命令来更新表中的记录。我想将成功更新的行与未更新的行（不同于错误）分开。有些行不会更新，因为我要更新的键不存在。这与错误不同，因为命令运行所以我不能使用红色错误行。我唯一的想法等同于当我在 SQL Server 中执行更新并显示“（0 行受影响）”时，我将能够进行比较。

由于这不算作 SSIS 中的错误，因此我不能使用红色错误行。有谁知道如何捕获不更新的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:11:49.517

把它放在桌子上

```
Select *
INTO Some_table
FROM Table_you_are_updating_From as a
WHEre NOT EXISTS(Select *
FROM Table_you_are_updating as b WHERE a.key=b.key ) 
```

# security - 如何在 tomcat 6 中将会话 cookie 标记为安全（仅限 https）

> ID：11767526
> 
> 赞同：5
> 
> 时间：2012-08-01T21:01:26.140
> 
> 标签：security, jakarta-ee, spring-security, tomcat6

我做了很多谷歌搜索，但找不到答案。我尝试在战争中的 web.xml 文件中设置以下内容，但没有影响：

```
<session-config>
        <session-timeout>60</session-timeout>
        <cookie-config>
            <http-only>true</http-only>
            <secure>true</secure>
        </cookie-config>
    </session-config> 
```

在 tomcat context.xml 文件中添加 useHttpOnly 可以将 cookie 限制为仅 http，但我仍然需要使它们安全。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:50:47.103

你不必做任何事情。只要启动会话的请求是`https`Tomcat 就会将会话 cookie 标记为`secure`.

我还查看了是否有任何正式记录该事实的内容，但我找不到。但这至少是 Tomcat 6.0.32 及更高版本的行为。

以下是在`org/apache/catalina/connector/Request.java`方法结束时检查请求是否安全的代码，如果安全，则`secure`在 cookie 上设置标志：

```
/**
 * Configures the given JSESSIONID cookie.
 *
 * @param cookie The JSESSIONID cookie to be configured
 */
protected void configureSessionCookie(Cookie cookie) {
    cookie.setMaxAge(-1);

    Context ctxt = getContext();

    String contextPath = null;
    if (ctxt != null && !getConnector().getEmptySessionPath()) {
        if (ctxt.getSessionCookiePath() != null) {
            contextPath = ctxt.getSessionCookiePath();
        } else {
            contextPath = ctxt.getEncodedPath();
        }
    }
    if ((contextPath != null) && (contextPath.length() > 0)) {
        cookie.setPath(contextPath);
    } else {
        cookie.setPath("/");
    }

    if (ctxt != null && ctxt.getSessionCookieDomain() != null) {
        cookie.setDomain(ctxt.getSessionCookieDomain());
    }

    if (isSecure()) {
        cookie.setSecure(true);
    }
} 
```

更新：您可以手动尝试通过使用过滤器等自行设置。您可以查看从 [set 'secure' flag 到 JSESSION id cookie的示例](https://stackoverflow.com/questions/7566264/set-secure-flag-to-jsession-id-cookie/11933595#11933595)

# java - firebird 嵌入模式中的碎片行

> ID：11767533
> 
> 赞同：1
> 
> 时间：2012-08-01T21:01:52.993
> 
> 标签：java, sql, firebird, sqlbulkcopy

我正在执行此代码，并且发生了一些奇怪的事情。我从外部文件进行批量插入。但结果它只是支离破碎，或者可能已损坏。

```
 cnx=factoryInstace.getConnection();
                pstmt = cnx.prepareStatement("DELETE FROM TEMPCELULAR");
                pstmt.executeUpdate();
                pstmt = cnx.prepareStatement("EXECUTE BLOCK AS BEGIN if (exists(select 1 from rdb$relations where rdb$relation_name = 'EXT_TAB')) then execute statement 'DROP TABLE EXT_TAB;'; END");
                pstmt.executeUpdate();
                pstmt = cnx.prepareStatement("CREATE TABLE EXT_TAB EXTERNAL '"+txtarchivoProcesar.getText()+"'(CELULAR varchar(11))");
                pstmt.executeUpdate();
                pstmt = cnx.prepareStatement("INSERT INTO TEMPCELULAR (CELULAR)SELECT CELULAR FROM EXT_TAB");
                pstmt.executeUpdate();
            pstmt = cnx.prepareStatement("SELECT CELULAR FROM TEMPCELULAR");
                ResultSet rs=pstmt.executeQuery();
                while(rs.next()){
                    System.out.println("::"+rs.getString(1));
                } 
```

现在，突然间，我桌子上的行看起来像这样：

```
::c@gmail.com

::abc2@gmail.

::m
abc3@gma

::.com
abc4@

::ail.com
ab

::@gmail.com

::bc6@gmail.c

::abc7@gmai

::com
abc8@g

::il.com
abc

::gmail.com

::c10@gmail.c

:: 
```

结果之间的空格不是我做的。这就是结果。

外部表的源文件：

```
abc@gmail.com
abc2@gmail.com
abc3@gmail.com
abc4@gmail.com
abc5@gmail.com
abc6@gmail.com
abc7@gmail.com
abc8@gmail.com
abc9@gmail.com
abc10@gmail.com
sneciosup@hotmail.com 
```

¿ 我的代码有什么问题？

我已经好几年没有看到这种古怪的结果了。数据库是在第一次运行时由用户 pc 创建的。因此，在每次我运行程序时都在生产中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:50:06.557

Firebird 中的外部表格文件不仅仅是一个纯文本文件，它是一种对内容和布局有特殊要求的固定宽度格式。请参阅*Interbase 6.0 Data Definition Guide*，第 107-111 页（可从[http://www.firebirdsql.org/en/reference-manuals/](http://www.firebirdsql.org/en/reference-manuals/)下载）或Helen Borrie*的 The Firebird Book第 281-287 页。*

我现在看到的问题是：

1.  您将外部表中的列声明为 VARCHAR(11)，而文件中最短的电子邮件地址为 13 个字符，最长为 21 个字符，因此 Firebird 将永远无法从文件中读取完整的电子邮件地址
2.  您没有为换行符指定单独的列，因此您的换行符将只是读取的数据的一部分
3.  您已将该列声明为 VARCHAR，这要求记录具有非常特定的格式，其中前两个字节声明实际数据长度，后跟该长度的字符串（即使这样，它也只能读取到声明的列长度）。要么确保遵循 VARCHAR 列的要求，要么只使用 CHAR 数据类型并确保用空格填充列，直到声明的长度。

我不是 100% 确定，但是您的默认数据库字符集也可能与读取数据的方式有关。

# android - 从带有 Intent 的 Activity 启动 FragmentActivity

> ID：11767537
> 
> 赞同：6
> 
> 时间：2012-08-01T21:02:19.220
> 
> 标签：android, android-fragmentactivity

每次尝试使用 Intent 从 Activity 启动 FragmentActivity 时，我都会感到力不从心。这是来自活动的代码：

```
Intent intent = new Intent(getApplicationContext(), OrgHome.class);
intent.putExtra("Username", organization_name.getText().toString());
startActivity(intent); 
```

这是logcat：

```
08-01 16:52:45.823: E/AndroidRuntime(600): FATAL EXCEPTION: main
08-01 16:52:45.823: E/AndroidRuntime(600): java.lang.NoClassDefFoundError: com.project3.organizations.OrgHome
08-01 16:52:45.823: E/AndroidRuntime(600):  at com.project3.organizations.MainActivity$1$1.mobDBResponse(MainActivity.java:76)
08-01 16:52:45.823: E/AndroidRuntime(600):  at com.mobdb.android.MobDBRequest.onPostExecute(MobDBRequest.java:78)
08-01 16:52:45.823: E/AndroidRuntime(600):  at com.mobdb.android.MobDBRequest.onPostExecute(MobDBRequest.java:1)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.os.AsyncTask.finish(AsyncTask.java:417)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.os.Looper.loop(Looper.java:123)
08-01 16:52:45.823: E/AndroidRuntime(600):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 16:52:45.823: E/AndroidRuntime(600):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 16:52:45.823: E/AndroidRuntime(600):  at java.lang.reflect.Method.invoke(Method.java:507)
08-01 16:52:45.823: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 16:52:45.823: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 16:52:45.823: E/AndroidRuntime(600):  at dalvik.system.NativeStart.main(Native Method)
08-01 16:52:48.053: I/Process(600): Sending signal. PID: 600 SIG: 9 
```

OrgHome.class 在清单中正确定义。这里发生了什么？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.project3.organizations"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="OrgHome"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:12:24.017

更改清单：

如果 OrgHome 与 MainActivity 位于同一位置，请使用此选项

```
<activity android:name=".OrgHome" /> 
```

如果它在子文件夹中，请使用它

```
<activity android:name=".sub.path.to.OrgHome" /> 
```

或者指定整个路径

```
<activity android:name="entire.path.to.OrgHome" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T12:25:02.950

为了解决您应该编写的片段活动（getactivity()、*nameofOtherActivity* .class）；你应该没事。

# mysql - Active Record 和迁移格式错误的日期

> ID：11767538
> 
> 赞同：0
> 
> 时间：2012-08-01T21:02:27.317
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一个在 CakePHP 和 MySQL 上运行的遗留数据库，它正在迁移到 Postgres 数据库上的新 Rails 应用程序，其结构完全不同。我有一小段迁移让我很适应，我希望这里有人能指出我正确的方向。

本质上，有些日期列（MySQL 类型的 Date）包含格式错误的日期。大多数格式错误的日期都是格式`'2012-08-00'`，并且 MySQL2 适配器会阻塞这些日期（显然 00 不是一个月中的有效日期）。如果我可以将它们放入模型中，我可以进行必要的转换，将它们变成更完整的新格式。即使将它们作为字符串从数据库中取出就足够了，我可以通过这种方式进行必要的操作。

我收到以下错误：

`Mysql2::Error: Invalid date: 2011-12-00`

每当我尝试从系统中选择一个无效日期时。表中有 3800 行，我估计大约有一半的人试图手动完成并修改它们会花费大量时间（但并非过度，如果需要这样做的话）。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:32:24.637

像这样的东西应该可以工作（未经测试）：

```
update [table] set [field] = DATE_ADD([field],INTERVAL 1 day) where day([field]) = '0' 
```

# jquery - jquery clear/reset $(this).html() 所以它可以再次使用

> ID：11767542
> 
> 赞同：0
> 
> 时间：2012-08-01T21:02:35.013
> 
> 标签：jquery

我有这个代码：

```
 $('#foo').click(function () {

       var xyz = $('#foo2').val().length;

    if(xyz < 1) {

        $('#msg').html('<div id="error">error</div>').delay(3000).fadeOut(1000);

    } else ...... 
```

我对这条线有疑问：

```
$('#msg').html('<div id="error">error</div>').delay(3000).fadeOut(1000); 
```

如果 xyz 为 0，它会显示一条错误消息，但问题是它只能工作一次，我需要它多次工作，所以如果点击第二次、第三次、第四次等它会弹出，有没有办法清除/重置。 html() 所以它可以再次使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:06:12.163

您无需清除/重置它。您需要做的就是展示它。

```
$('#msg').html('<div id="error">error</div>').show().delay(3000).fadeOut(1000); 
```

`.html()`在使用`.empty()`之前在内部使用`innerHTML`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:04:57.157

> 有没有办法清除/重置 .html()

就在这里。使用[**.empty()**](http://api.jquery.com/empty/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:07:11.763

```
$('#msg').html('<div id="error">error</div>').delay(3000).fadeOut(1000, function(){
    $(this).empty()
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:07:17.150

问题不在于`.html()`您`.fadeOut()`将 div 淡出，现在它被隐藏了。( `display:none;`)。您需要再次显示它以使其淡出。

您可以通过调用清除它的内容[`.empty()`](http://api.jquery.com/empty/)，然后在隐藏消息后再次显示它。或者您可以在呼叫您的线路延迟/淡入淡出之前显示它。

```
$('#foo').html('<div id="error">error</div>').show().delay(1000).fadeOut(1000); 
```

这是一个[演示](http://jsbin.com/oxaqar/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T21:08:35.283

```
$('#msg').empty().html('<div id="error">error</div>').show().fadeOut(1000); 
```

# cakephp - CakePHP 在保存 HABTM 连接模型时忽略 beforeSave 方法

> ID：11767555
> 
> 赞同：1
> 
> 时间：2012-08-01T21:03:32.147
> 
> 标签：cakephp, has-and-belongs-to-many, scaffolding, before-save

所以我有三个模型：

教练：var $hasAndBelongsToMany = array("Tour")

游览： var $hasAndBelongsToMany = array("Coach")

CoachesTour: var $belongsTo = array("Tour", "Coach")

Coach 和 Tour 之间存在 HABTM 关联，​​它应该使用 CoachesTour 作为连接模型。

我正在使用脚手架。修改 Tour 时，如果我向其中添加新的 CoachesTour，则不会调用 CoachesTour 的 beforeSave 方法。似乎连接模型的记录是作为 SQL 语句插入的，而不是使用连接模型。

我在这里错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:15:13.770

如果您使用 saveAll 保存数据，则不会调用 beforeSave 回调。您必须覆盖 saveAll 函数。

例如在您的模型中：

```
public function saveAll($data, $options = array()) {
            /*
            your code you want execute before saving...
            */
    parent::saveAll($data, $options);
} 
```

您必须知道，对于其他保存方法（saveMany、saveAssociated、save），beforeSave 回调是在保存之前触发的。但是对于 saveAll 它不是触发的，如果你想在保存之前执行一些代码，你可以在你的模型中覆盖它。

# objective-c - 滚动 NSTableView 以使行居中

> ID：11767557
> 
> 赞同：5
> 
> 时间：2012-08-01T21:04:12.003
> 
> 标签：objective-c, cocoa

我想以编程方式滚动 NSTableView 以使特定行居中。滚动 NSTableView 以使特定行可见很简单：

```
[theTableView scrollRowToVisible:pos]; 
```

但是，通常有问题的行位于可见区域的底部，而我希望它大致位于中心。

另一种愚蠢的方法是滚动几行超出我想要可见的行，例如：

```
 // pos = index of desired row
    // numRows = number of rows in the table
    NSRect visibleRect = [resultsTableView visibleRect];
    NSRange visibleRange = [resultsTableView rowsInRect:visibleRect];
    NSUInteger offset = visibleRange.length/2;
    NSUInteger i;
    if (pos + offset >= numRows)
        i = numRows - 1;
    else if (pos < visibleRange.length)
        i = pos;
    else
        i = pos + offset;
    [resultsTableView scrollRowToVisible:i]; 
```

如果所有行的高度完全相同，则此方法有效，但我有兴趣制作具有不同高度的行。

有没有更好，也许更直接的方法来做到这一点？例如，我注意到 NSTableView 被包装在一个 NSScrollView 中......（该表是使用 Interface Builder 制作的。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-05T05:31:27.613

这适用于我的 NSTableView 的子类

```
func scrollRowToVisible(row: Int, animated: Bool) {

    if animated {
        guard let clipView = superview as? NSClipView,
              let scrollView = clipView.superview as? NSScrollView else {

                assertionFailure("Unexpected NSTableView view hiearchy")
                return
        }

        let rowRect = rect(ofRow: row)
        var scrollOrigin = rowRect.origin

        let tableHalfHeight = clipView.frame.height * 0.5
        let rowRectHalfHeight = rowRect.height * 0.5

        scrollOrigin.y = (scrollOrigin.y - tableHalfHeight) + rowRectHalfHeight

        if scrollView.responds(to: #selector(NSScrollView.flashScrollers)) {
            scrollView.flashScrollers()
        }

        clipView.animator().setBoundsOrigin(scrollOrigin)

    } else {

        scrollRowToVisible(row)
    }
} 
```

然后你可以打电话：

```
self.tableView.scrollRowToVisible(self.tableView.selectedRow, animated:true) 
```

选择行后

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-09T11:14:10.557

我在寻找 Swift 4 中的解决方案时偶然发现了这个问题（感谢@AntoniodePerio 我移植的他的回答）：

```
extension NSTableView {
    func centreRow(row: Int, animated: Bool) {
        self.selectRowIndexes(IndexSet.init(integer: row), byExtendingSelection: false)
        let rowRect = self.frameOfCell(atColumn: 0, row: row)
        if let scrollView = self.enclosingScrollView {
            let centredPoint = NSMakePoint(0.0, rowRect.origin.y + (rowRect.size.height / 2) - ((scrollView.frame.size.height) / 2))
            if animated {
                scrollView.contentView.animator().setBoundsOrigin(centredPoint)
            } else {
                self.scroll(centredPoint)
            }
        }
    }
} 
```

致电：

`@IBOutlet weak var myTable: NSTableView! myTable.centreRow(row: 10, animated: true)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:09:12.953

我会看看`NSView`'s `-scrollPoint:`and `-scrollRectToVisible:`methods。尝试做类似的事情：

```
if (tableView.mainScrollView) {
    CGFloat yLocation = row.frame.origin.y + tableView.mainScrollView.contentView.frame.size.height / 2;
    if (yLocation > tableView.frame.size.height) yLocation = tableView.frame.size.height;
    NSPoint rowPoint = NSMakePoint(0, row.frame.origin.y + );
    [tableView scrollPoint:rowPoint];
} 
```

我不确定这是否有效，因为我无法测试它，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-06T06:10:39.387

我在 OBJC 上的工作解决方案。

```
 NSRect row = [self.tableView rectOfRow:index];
        if ((row.origin.y + row.size.height) < self.scrollView.frame.size.height / 2)
            return;
        row.size.height = self.scrollView.frame.size.height;
        row.origin.y -= self.scrollView.frame.size.height / 2;
        row.origin.y += row.size.height;
        [self.tableView scrollPoint:row.origin]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T19:36:50.610

这对我有用.. [https://stackoverflow.com/a/8480325/804616](https://stackoverflow.com/a/8480325/804616)
但是您可能希望根据视图是否已经可见有条件地调用代码。

# ruby-on-rails - 带有 ruby on rails 的 Javascript 对话框

> ID：11767558
> 
> 赞同：1
> 
> 时间：2012-08-01T21:04:11.500
> 
> 标签：ruby-on-rails, coffeescript

我正在尝试在我的注册页面上重新创建相同的对话框，但它似乎不想弹出。

这是我的咖啡脚本：

```
$('#dummy_addresses_dialog').dialog
    autoOpen: false
    width: 940
    modal: true
    # close: (event, ui) ->
    #   $("#pm_assignment_form")[0].reset()
    buttons: 
      'Cancel': -> $(@).dialog('close')

$("#dummy_address_dialog_link").live 'click', ->
    $('#dummy_addresses_dialog').dialog('open')
    false 
```

这是我的链接：

```
= link_to "*", "#", :id => "dummy_address_dialog_link" 
```

这是我的 index.html.haml，我在其中提供部分内容：

```
#dummy_addresses_dialog{:title => "Dummy Addresses", :style => "display:none;"}
  = render "dummy_addresses_table" 
```

但是当我尝试复制链接并将其添加到我的注册页面时，弹出窗口没有出现，但它在我的其他页面上工作正常。

有什么我没有复制来完成这项工作的吗？

# c# - C#：当用作类的参数时，“所有者”是什么意思？

> ID：11767560
> 
> 赞同：3
> 
> 时间：2012-08-01T21:04:15.777
> 
> 标签：c#, class, arguments, owner

在下面的类中，“所有者”参数对 myClass 和基类有什么作用？

```
public class Base
{
    public myClass(owner) : base (owner) { }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:08:12.360

如果您有两个类，一个是基类，另一个是派生类，当您为派生类创建构造函数时，可以将参数传递给基类。

```
public class Base
{
    private string Test = "";

    public Base(string test)
    {
        Test = test;
    }
}

public class Derived : Base
{
    public Derived(string test) : base(test) // - This will call public Base(string test)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:13:41.567

以下将编译并且似乎适合您的场景减去您没有使用[逐字标识符](http://msdn.microsoft.com/en-us/library/aa664670%28v=vs.71%29.aspx) `@`的事实：

```
public class Base
{
    public Base(myMethod owner)
    {
    }
}

public class @new : Base
{
    public @new(myMethod owner) : base(owner)
    {
    }
} 
```

前面的示例演示了如何将构造函数参数传递给`base`类的实现。

# c# - 获取数据库中两个不同日期的最后一个条目并计算差异

> ID：11767561
> 
> 赞同：0
> 
> 时间：2012-08-01T21:04:16.257
> 
> 标签：c#, linq

我有一张表格，大约每 15 分钟记录一次来自逆变器的信息。逆变器发送的数据之一是`kwhtotal`表示通过该逆变器产生了多少总功率的数字。我正在尝试正确查询以获取特定日期的发电量。为此，我需要检索前一天的最后读数并将其与当天的最后读数进行比较。

这是我到目前为止所拥有的：

```
DateTime prevStartD = new DateTime((utcStartingDate.AddDays(i - 1)).Year, (utcStartingDate.AddDays(i - 1)).Month, (utcStartingDate.AddDays(i - 1)).Day, 0, 0, 0);
DateTime prevEndD = new DateTime((utcStartingDate.AddDays(i - 1)).Year, (utcStartingDate.AddDays(i - 1)).Month, (utcStartingDate.AddDays(i - 1)).Day, 23, 59, 59);

var previousDay = (from s in db.PowerInverterHistorys
                   join u in db.PowerInverters on s.inverter_id equals u.id
                   where u.name == record && (s.recordTime >= prevStartD && s.recordTime <= prevEndD)
                   orderby s.recordTime descending
                   select new
                   {
                       s.recordTime,
                       s.kwhtotal
                   }).Take(1);

DateTime currStartD = new DateTime((utcStartingDate.AddDays(i)).Year, (utcStartingDate.AddDays(i)).Month, (utcStartingDate.AddDays(i)).Day, 0, 0, 0);
DateTime currEndD = new DateTime((utcStartingDate.AddDays(i)).Year, (utcStartingDate.AddDays(i)).Month, (utcStartingDate.AddDays(i)).Day, 23, 59, 59);

var currentDay = (from s in db.PowerInverterHistorys
                  join u in db.PowerInverters on s.inverter_id equals u.id
                  where u.name == record && (s.recordTime >= currStartD && s.recordTime <= currEndD)
                  orderby s.recordTime descending
                  select new
                  {
                      s.recordTime,
                      s.kwhtotal
                  }).Take(1);

double? pDay = 0, cDay = 0;
foreach (var p in previousDay) { pDay = p.kwhtotal; }
foreach (var c in currentDay) { cDay = c.kwhtotal; }

var generatedPower = cDay - pDay; 
```

它可以工作并运行，但是效率低下。页面在运行时打开需要很长时间。 **我能做些什么来加快这个查询吗？我需要做的就是从`kwhtotal`当天的最后一个条目中减去前一天`kwhtotal`的最后一个条目。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:33:15.347

您能否将这两个查询合二为一，限制 s.recordTime >= prevStartD && s.recordTime <= currEndD 并且没有 Take(1)。这意味着只有一次访问数据库而不是两次。恢复数据集后，您可以使用 s.recordTime <= prevEndD 条件在本地查询这些结果以找到您的 pDay 值，然后使用 s.recordTime >= currStartD 条件再次查询并查看最后一条记录以获取 cDay价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:24:07.203

```
var previousDay = (from s in db.PowerInverterHistorys
                   join u in db.PowerInverters on s.inverter_id equals u.id
                   where u.name == record && (s.recordTime >= prevStartD && s.recordTime <= prevEndD)
                   orderby s.recordTime descending
                   select new
                   {
                       s.recordTime,
                       s.kwhtotal
                   }).Take(1); 
```

如果您有大型数据集，OrderBy 对数据库来说是昂贵的操作。使用 Max() 或 Min() 代替，这将始终为您提供相应的第一行。这也应该适用于您的“CurrentDay”查询。

# javascript - 将文本更改为下拉菜单

> ID：11767562
> 
> 赞同：0
> 
> 时间：2012-08-01T21:04:17.593
> 
> 标签：javascript, jquery, drop-down-menu

我有一个很大的价值观。起初，每个值都是一个下拉列表。但加载速度非常慢（+15 秒）。所以我想在我的网格（一个常规表格）中使用文本，并在双击文本时使用下拉列表。这可能吗 ？另外，是否可以使用 Telerik 下拉菜单？

这是一个示例：包含颜色的网格（例如：蓝色、蓝色、红色、黄色......）。双击单词时，下拉菜单将替换所选文本。下拉列表将包含所有可用的颜色：蓝色、红色、黄色。After that, when the value is selected, the drop down would disapear and the text will display the new value.

到目前为止，我得到了这个：

```
$(function () {
    $('.colorGrid').dblclick(function () {
         debugger;
        $(this).html("<select class=\"resultMenu\" id=\"resultMenuID\" size=\"1\"></select>");
        $(this).children("select").append('<option value=1>Black</option>');
        $(this).children("select").append('<option value=2>Red</option>');
        $(this).children("select").append('<option value=3>Blue</option>');
        $(this).children("select").append('<option value=4>Yellow</option>');
    });
    $('#resultMenuID').change(function (event) {
        debugger;
        $(this).html("<td>test</td>");
    });
}); 
```

我接近我的目标了。现在我需要将选择的结果放回 td 标记中，选择必须消失！从不调用更改选择功能。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:36:07.247

如果需要 +15 秒，那么您肯定必须选择`AJAX`或`hardcoding the dropdownvalues in javascript strings.`

正如 MrOBrian 所说，我不能仅根据您的一两行问题为您提供代码。您必须上传现有的问题代码才能从此处获得解决方案。不过我可以给你一个想法。

说这是你的色块

```
<div id="colour-block-list">
    <div id="red-block" class="colour-block">
    Red
    </div>
</div> 
```

您必须添加一个 onclick 处理程序。

```
$(".colour-block").click(function(){

  //call your ajax or get values from hard coded javascript string
   $(this).html("<select></select>");
   $(this).children("select").append(list_of_options);

}); 
```

# mysql - Mysql：从一个表中选择不在另一个表中的行

> ID：11767565
> 
> 赞同：154
> 
> 时间：2012-08-01T21:04:33.903
> 
> 标签：mysql, sorting, unique, database-table

如何选择一个表中未出现在另一个表中的所有行？

表格1：

```
+-----------+----------+------------+
| FirstName | LastName | BirthDate  |
+-----------+----------+------------+
| Tia       | Carrera  | 1975-09-18 |
| Nikki     | Taylor   | 1972-03-04 |
| Yamila    | Diaz     | 1972-03-04 |
+-----------+----------+------------+ 
```

表2：

```
+-----------+----------+------------+
| FirstName | LastName | BirthDate  |
+-----------+----------+------------+
| Tia       | Carrera  | 1975-09-18 |
| Nikki     | Taylor   | 1972-03-04 |
+-----------+----------+------------+ 
```

表 1 中不在表 2 中的行的示例输出：

```
+-----------+----------+------------+
| FirstName | LastName | BirthDate  |
+-----------+----------+------------+
| Yamila    | Diaz     | 1972-03-04 |
+-----------+----------+------------+ 
```

也许这样的事情应该工作：

```
SELECT * FROM Table1 WHERE * NOT IN (SELECT * FROM Table2) 
```

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-08-01T21:12:02.887

您需要根据列名进行子选择，而不是`*`.

例如，如果您有`id`两个表共有的字段，您可以这样做：

```
SELECT * FROM Table1 WHERE id NOT IN (SELECT id FROM Table2) 
```

有关更多示例，请参阅[MySQL 子查询语法](http://dev.mysql.com/doc/refman/5.5/en/subqueries.html)。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-08-01T22:12:50.210

如果您在另一条评论中提到了 300 列，并且您想要比较所有列（假设列都是相同的名称），您可以使用 a`NATURAL LEFT JOIN`隐式连接两个表之间的所有匹配列名，以便您不必繁琐地手动输入所有连接条件：

```
SELECT            a.*
FROM              tbl_1 a
NATURAL LEFT JOIN tbl_2 b
WHERE             b.FirstName IS NULL 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2012-08-01T21:07:23.650

```
SELECT *
FROM Table1 AS a
WHERE NOT EXISTS (
  SELECT *
  FROM Table2 AS b 
  WHERE a.FirstName=b.FirstName AND a.LastName=b.Last_Name
) 
```

`EXISTS`会帮助你...

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-08-01T21:21:11.957

一个标准的 LEFT JOIN 可以解决这个问题，**如果加入的字段被索引，**
也应该更快

```
SELECT *
FROM Table1 as t1 LEFT JOIN Table2 as t2 
ON t1.FirstName = t2.FirstName AND t1.LastName=t2.LastName
WHERE t2.BirthDate Is Null 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-10-30T16:58:56.320

试试这个简单的查询。它完美地工作。

```
select * from Table1 where (FirstName,LastName,BirthDate) not in (select * from Table2); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-12-08T11:58:43.270

尝试：

```
SELECT * FROM table1
    LEFT OUTER JOIN table2
    ON table1.FirstName = table2.FirstName and table1.LastName=table2.LastName
    WHERE table2.BirthDate IS NULL 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-24T13:46:33.123

一个选项是

```
SELECT A.*
    FROM TableA as A
    LEFT JOIN TableB as B
    ON A.id = B.id
    Where B.id Is NULL 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-02-07T12:16:19.907

这在 Oracle 中对我有用：

```
SELECT a.* 
    FROM tbl1 a 
MINUS 
SELECT b.* 
    FROM tbl2 b; 
```

* * *

## 回答 #9

> 赞同：-7
> 
> 时间：2015-06-16T18:52:04.873

```
SELECT a.* FROM 
FROM tbl_1 a
MINUS
SELECT b.* FROM 
FROM tbl_2 b 
```

# java - 如何从文本框中自动更新字符串（在 JLabel 中）？

> ID：11767576
> 
> 赞同：0
> 
> 时间：2012-08-01T21:05:36.313
> 
> 标签：java, swing

我是一名计算机科学专业的学生，​​正在做我的第一个项目。我送披萨，所以我想我会做一个帮助送货司机的程序。我今天才刚刚开始。

这是一张照片：![送货助手](../Images/1109861bc54c2fb5edf069a34ed97047.png)

现在，您必须在任何框中输入值后按回车键。当小费和工作时间框中有数字时，我想在每小时收入下的值自动更新。无需按回车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:07:36.117

为您的文本字段使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)并在您的 Listener 实现中更新适当的 JLabel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:34:57.483

根据您希望更新发生的时间，您可以（如建议的那样）一个 DocumentListener，它将允许实时更新（当您键入时），或者如果您只是希望在移动到下一个字段时更改值（即选项卡或单击），您可以使用[FocusListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/FocusListener.html)

# ruby-on-rails - 在 Rails 中建立链接和传递参数

> ID：11767579
> 
> 赞同：0
> 
> 时间：2012-08-01T21:05:51.827
> 
> 标签：ruby-on-rails

我正在尝试在页面中创建指向另一个显示页面的链接

这是链接的代码：

```
 <%= link_to c.name, companies_path(:id => c.id) %> # c is the name of my model object 
```

这是我为显示页面设置的路线：

```
 match '/companies/:id', to: 'companies#show' 
```

当我输入网址时`'/companies/:id'`，它会将我带到我想要的显示页面，但是当我单击它创建的链接时`'/companies.":id"'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:09:55.600

我假设这`c`是您尝试链接到的公司对象 - 您应该能够链接到您正在寻找的页面使用`companies_path(c)`，甚至只是`c`，像这样：

```
<%= link_to c.name, companies_path(c) %>
<%= link_to c.name, c %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:10:32.277

在 routes.rb 中：

```
resources :companies 
```

然后做 ：

```
<%= link_to c.name, company_path(c.id) %> 
```

# java - 为什么这段代码会在结果中加 1？

> ID：11767581
> 
> 赞同：1
> 
> 时间：2012-08-01T20:56:09.760
> 
> 标签：java, recursion

如果`if (n > 0)`它返回正常结果，但`if (n >= 0)`它返回正常结果 + 1，我不明白，因为 0 * 0 = 0。如果有人知道为什么这样做，我很想弄清楚这一点。

```
import java.util.*;

// Recursive method returns sum of first n squares
public class RecursiveSum
{
    public static void main(String[] args)
    {
        while (true)
        {
            Scanner keyboard = new Scanner(System.in);

            System.out.println("Enter a number:\tIf you want to exit, enter a negative number.");

            int n = keyboard.nextInt();

            if (n < 0)
                System.exit(0);

            System.out.println("sum(" + n + ") = " + sum(n));
        }
    }

    public static int sum(int n)
    {
        int sum2 = n * n;

        if (n >= 0)
            sum2 += sum(n - 1);

        return sum2;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:04:32.623

`if(n>=0)`使方法以 -1 作为参数递归调用自身。和`sum(-1) == -1 * -1 == 1`。

# python - 矩阵的转置

> ID：11767586
> 
> 赞同：2
> 
> 时间：2012-08-01T21:06:33.443
> 
> 标签：python, matrix, list-comprehension

我试图在 python 中找到矩阵的转置而不实际使用矩阵的大小。

我需要使用列表推导来执行类似 [[row[i] for row in test] for i in range(n)] 之类的操作，其中 test 是一个 nxn 矩阵而不实际使用 n。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:10:45.210

如果`test`是由列表列表表示的矩阵，则

```
zip(*test) 
```

是转置。例如，

```
In [16]: t = [[1,2,3],[4,5,6]]

In [17]: t
Out[17]: [[1, 2, 3], 
          [4, 5, 6]]

In [18]: zip(*t)
Out[18]: [(1, 4), 
          (2, 5), 
          (3, 6)] 
```

（输出已被格式化以更清楚地显示结果）。

要了解`zip(*t)`首先研究[工作原理](http://docs.python.org/library/functions.html#zip)[，`zip`](http://docs.python.org/library/functions.html#zip)然后研究[论证拆包](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)。它有点令人费解，但是一旦您了解它的工作原理，您就会成为这两个概念的专家，并且效果非常令人愉悦。

* * *

这里没有理由使用列表推导，但无论如何你都可以这样做：

```
In [21]: [[row[i] for row in t] for i in range(len(t[1]))]
Out[21]: [[1, 4], [2, 5], [3, 6]] 
```

（`len(t[1])`给出列数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:14:44.507

您可以使用`zip`和的组合`*`：

```
>>> list(zip(*[[1,2,3],[4,5,6]]))
[(1, 4), (2, 5), (3, 6)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T20:08:57.300

列表理解可以帮助如下：

```
def transpose(matrix):
    return [[row[col] for row in matrix] for col in range(len(matrix[0]))] 
```

# java - 有人可以告诉我我在 java 中的摇摆错误吗？

> ID：11767591
> 
> 赞同：0
> 
> 时间：2012-08-01T21:06:53.297
> 
> 标签：java, swing, user-interface

我的 swing GUI 文件有一些问题，因为我不断收到错误，我使用了 oracle 的教程作为参考，但是无论我不断收到相同的错误。

这是错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Calculator.CalcGUI.CalGUI(CalcGUI.java:29)
at Calculator.CalcGUI.access$0(CalcGUI.java:27)
at Calculator.CalcGUI$1.run(CalcGUI.java:74)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

这是我的 GUI 代码，请记住，它有点乱，因为我正在尽我所能修复它。

```
package Calculator;

import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class CalcGUI implements ActionListener {

    public static boolean geometry = false;
    public static boolean is2D = false;
    public static boolean is3D = false;
    static boolean working = false;
    static JFrame cfrm;
    static JButton cb1;
    static JButton cb2;
    static JButton cb3;
    static JLabel cl1;
    static JLabel cl2;
    static JTextField ctf1;
    static JTextField ctf2;
    static JTextField ctf3;
    static ActionListener a, b, c, d, e, f;

    private static void CalGUI() {

    cfrm.setLayout(new FlowLayout());
    cfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    cfrm.setSize(300, 600);

    cb1 = new JButton();
    cb2 = new JButton();
    cb3 = new JButton();

    do {
        if(geometry && is2D != true) {

            cfrm.removeAll();   
            cfrm.add(cb1);
            cb1.setText("geometry");
            cb1.addActionListener(a);

        }

        else if(geometry = true && is2D != true) {

            cfrm.removeAll();
            cfrm.add(cb1);
            cfrm.add(cb2);
            cb1.setText("2D Shape");
            cb2.setText("3D Shape");
            cb1.addActionListener(b);
            cb2.addActionListener(c);

        }
    }
    while(working = false);

}

@Override
public void actionPerformed(ActionEvent arg0) {

}

    public static void main(String args[]) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
               CalGUI();
            }
        });
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:10:04.127

`cfrm`为空，所以你得到`NullPointerException`. 在执行任何 set... 方法调用之前，如下所示进行实例化。

```
cfrm = new JFrame();
cfrm.setLayout(new FlowLayout());
cfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
cfrm.setSize(300, 600); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:09:52.747

`cfrm`您必须在开始访问其数据成员或函数之前进行实例化：

```
cfrm = new JFrame();
cfrm.setLayout(new FlowLayout());
//... 
```

另外，为什么你的构造函数`private`和`static`？

# r - R中的反向消除

> ID：11767602
> 
> 赞同：10
> 
> 时间：2012-08-01T21:07:26.180
> 
> 标签：r

我正在尝试使用 R 的反向消除来获得最终模型，但是在运行代码时收到以下错误消息。有人可以帮我吗？

```
base<-lm(Eeff~NDF,data=phuong)
fullmodel<-lm(Eeff~NDF+ADF+CP+NEL+DMI+FCM,data=phuong)
 step(full, direction = "backward", trace=FALSE )

> Error in step(full, direction = "backward", trace = FALSE) : 
number of rows in use has changed: remove missing values? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T21:12:59.027

在比较不同的子模型时，有必要将它们拟合到同一组数据中——否则结果就没有意义了。（考虑极端情况，您有两个**预测**变量`A`和.) 因此，不允许您比较使用原始数据集的不同子集的子模型（因为自动删除包含值的案例）。`B``y~A+B``y~A``y~B`**`step``NA`**

 **`na.omit`在原始数据集上使用应该可以解决问题。

```
fullmodel <- lm(Eeff ~ NDF + ADF + CP + NEL + DMI + FCM, data = na.omit(phuong))
step(fullmodel, direction = "backward", trace=FALSE ) 
```

但是，如果您`NA`在不同的预测变量中有很多值，您最终可能会丢失大量数据集——在极端情况下，您可能会丢失*整个*数据集。如果发生这种情况，您必须重新考虑您的建模策略...**

# ios - CTRun 在 CoreText iOS 上从右到左

> ID：11767606
> 
> 赞同：1
> 
> 时间：2012-08-01T21:07:37.500
> 
> 标签：ios, core-text

我想用 绘制字形`CGContextShowGlyphsAtPositions`，但是当我使用`CTRunGetPositions`字形的位置时，它是从左侧开始的。`CTRunGetStatus`返回但结果`kCTRunStatusRightToLeft`是从左到右。如何从右到左绘制文本？

对于英语字符，从左到右是可以的，因为这种语言是从左到右的，但我使用阿拉伯字符，而阿拉伯语是从右到左的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:16:56.130

这些位置是从左到右的，因为字形通常是从左到右绘制的，因为这是“x”增加的方向。当你绘制 a`CGGlyph`时，语言不再重要。绘制 كتب 时，系统首先绘制 ب，因此它的位置在数组中排在第一位。

的结果`CTRunGetGlyphs`与 的顺序相同`CTRunGetPositions`。`kCTRunStatusRightToLeft`所做的只是告诉您字形顺序与字符串索引顺序完全相反。

我从右到左画阿拉伯语没有任何问题`CGContextShowGlyphsAtPositions`。你看到什么问题？

```
CFIndex glyphCount = CTRunGetGlyphCount(run);
CGPoint *positions = calloc(glyphCount, sizeof(CGPoint));
CTRunGetPositions(run, CFRangeMake(0, 0), positions);
CGGlyph *glyphs = calloc(glyphCount, sizeof(CGGlyph));
CTRunGetGlyphs(run, CFRangeMake(0, 0), glyphs);
CGContextShowGlyphsAtPositions(context, glyphs, positions, glyphCount);
free(positions);
free(glyphs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:36:38.730

tanx Rob 这是关于最后一行的，当我创建多行时，第 1 行或第 2 行还可以，但最后一行淹没在左侧，但在阿拉伯语中，最后一行必须淹没在右侧。

我的代码是：

```
while (isLine) {

    CFIndex count = CTTypesetterSuggestLineBreak(typesetter, start, self.frame.size.width);
    if (count <= 0) {
        isLine = NO;
        break;
    }
    currentline ++;
    CTLineRef justifyline = CTTypesetterCreateLine(typesetter, CFRangeMake(start, count));
    if (start + count >= lettercount) {

        justifyline = CTTypesetterCreateLine(typesetter, CFRangeMake(start, count)); 
    }
    else {
        CTLineRef line = CTTypesetterCreateLine(typesetter, CFRangeMake(start, count));        
        justifyline = CTLineCreateJustifiedLine(line, 0, self.frame.size.width);
        CFRelease(line);

    }

    CTLineGetTypographicBounds(justifyline, &ascent, &descent, &leading);
    float lineheight = ascent + descent + leading;
    CFArrayRef runArray = CTLineGetGlyphRuns(justifyline);
    for (CFIndex runIndex = 0; runIndex < CFArrayGetCount(runArray); runIndex++)
    {
        // Get FONT for this run
        CTRunRef run = (CTRunRef)CFArrayGetValueAtIndex(runArray, runIndex);
        CTFontRef runFont = CFDictionaryGetValue(CTRunGetAttributes(run), kCTFontAttributeName);
        //NSLog(@"GlyphCount= %d",(int)CTRunGetGlyphCount(run));
        // for each GLYPH in run
        for (CFIndex runGlyphIndex = 0 ; runGlyphIndex < CTRunGetGlyphCount(run) ; runGlyphIndex++) 
        {
            // get Glyph & Glyph-data

            CFRange thisGlyphRange = CFRangeMake(runGlyphIndex, 1);
            CGGlyph glyph;
            CGPoint position;
            CTRunGetGlyphs(run, thisGlyphRange, &glyph);
            CTRunStatus state = CTRunGetStatus(run);
            if (state == kCTRunStatusRightToLeft) {
                NSLog(@"rtl");
            }
            CTRunGetPositions(run, thisGlyphRange, &position);

            position = CGPointMake(position.x, self.frame.size.height + position.y - (100 * currentline));
            NSLog(@"x %f y %f",position.x,position.y);
            // Render it
            {
                CGFontRef cgFont = CTFontCopyGraphicsFont(runFont, NULL);

                CGAffineTransform textMatrix = CTRunGetTextMatrix(run);
                CGContextSetTextMatrix(context, textMatrix);
                CGContextSetFont(context, cgFont);
                CGContextSetFontSize(context, CTFontGetSize(runFont));
                switch (runGlyphIndex) {
                    case 4:
                        CGContextSetRGBFillColor(context, 1, 0.0, 0.0, 1);
                        break;

                    default:
                        CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1);
                        break;
                }               

                CGContextShowGlyphsAtPositions(context, &glyph, &position, 1);

                CFRelease(cgFont);
            }
        }
        CFRelease(runFont);
    }

    start+=count;

} 
```

我想按字形处理字形，当字形显示在最后一行时，它显示在页面的左侧。

# c# - .Contains() 在 EF Code First 中的 2 个属性上

> ID：11767607
> 
> 赞同：0
> 
> 时间：2012-08-01T21:07:38.420
> 
> 标签：c#, linq, entity-framework-4, ef-code-first

是否可以在 Where() 中查询两个不同的属性？例如，我想获取在 FirstName 和 LastName 属性中包含“Robert G”的所有用户。如果我做 ：

```
var contacts = _session.All<Contact>()
    .Where(x => x.IsActive
                && (x.FirstName.ToLower().Contains(q.ToLower())
                    || x.LastName.ToLower().Contains(q.ToLower()))); 
```

我不会得到“Robert G”的结果，因为 FirstName 包含“Robert”和 LastName “Gambonni”。

我还考虑过创建一个新属性 FullName ，它只是一个 Getter，但是我必须先加载它们，因为我的属性不在数据库中。

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T21:13:05.927

怎么样：

```
var contacts = _session.All<Contact>()
    .Where(x => x.IsActive
                && ((x.FirstName.ToLower() + " " + x.LastName.ToLower()).Contains(q.ToLower()))); 
```

# html - 清除浮动问题，但特定于 webkit 浏览器

> ID：11767611
> 
> 赞同：1
> 
> 时间：2012-08-01T21:08:05.883
> 
> 标签：html, css

我熟悉清除浮动的基础知识，但在这种情况下我有点难过，我希望有人能帮助我。

对于这个页面，我有一个名为 containerTimeline 的容器，它应该包含所有内容。内容当然不包含在容器中。奇怪的是，在 Firefox 上它可以正常工作，但在 Safari 和 Chrome 上却没有。有谁知道为什么？哪个浏览器正确呈现它？

我有一个指向 jsfiddle [http://jsfiddle.net/T8n4v/的链接](http://jsfiddle.net/T8n4v/)

这是下面的一些代码：

```
 <div class="containerTimeline">
    <div class="year">
        <header>2012</header>
    <div class="month alt">
    <header>Sep</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    <div class="month">
    <header>Oct</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    <div class="month alt">
    <header>Nov</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    <div class="month">
    <header>Dec</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    <div class="month alt">
    <header>Jan</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    <div class="month">
    <header>Feb</header>
    <ul class="events">
    <li class="event priority1"></li>
    <li class="event priority3"></li>
    </ul>
</div>
    </div><!-- end year -->
</div> 
```

及其CSS：

```
 body {
      width: 4800px;
    }
    .containerTimeline {
      outline:1px solid red;
      margin: 20px;
      min-height: 100%;
      position: relative;
      width: auto;
    }
    .containerTimeline .year {
      float: left;
      height: 41px;
      background: #e8e8e8;
    }
    .containerTimeline .year header{
      text-align: center;
      color: #666;
      font-size: 15px;
      text-transform: uppercase;
      padding: 10px 0;
    }
    .containerTimeline .month {
      width: 43px;
      float: left;
      background: #fff;
    }
    .containerTimeline .month.alt {
      width: 43px;
      float: left;
      background: #e8e8e8;
    }
    .containerTimeline .month header {
       height: 20px;
       width: 43px;
    }
    .containerTimeline .events {
      margin-top: 10px;
      position: relative;
    }
    .containerTimeline .event {
      position: relative;
      display: block;
      width: 36px;
      height: 36px;
      margin: 20px auto;
      margin-bottom: 25px;
      border-radius: 3px;
      border:1px solid black;
    }
    .group:before,
    .group:after {
    content:"";
    display:table;
   }
   .group:after {
    clear:both;
    }​ 
```

提前感谢您的帮助。

# jquery - 在 ajax 加载的内容中预加载图像

> ID：11767622
> 
> 赞同：2
> 
> 时间：2012-08-01T21:09:13.987
> 
> 标签：jquery, ajax, image, html

我正在使用这个脚本...

它将内容从 URL 中的特定 #id 加载到当前页面，并为其设置动画...从页面一侧滑动...当用户单击链接时

一切正常，除了图像需要时间加载......我尝试并努力将图像预加载器合并到这个？所以所有的内容一起加载

```
function goTo(href) {

    var left = $(window).width();
    $('#id').css("left", left);

    $.ajax({
        url: href,
        success: function (data) {

            var content = $(data).find('#id').html();

            // Windows Load Function
            $(window).load(function () {

                $("#id").html(content).animate({
                    left: '0',
                }, 'fast');

                var title = $('#id').find('h1').text();
                $('head').find('title').text(title);

            });
        }
    });
}

// check for support before we move ahead

if (typeof history.pushState !== "undefined") {
    var historyCount = 0;

    // On click of link Load content and animate
    $('.access a').live('click', function () {

        var href = $(this).attr('href');

        goTo(href);

        history.pushState(null, null, href);
        return false;
    });

    window.onpopstate = function () {
        if (historyCount) {
            goTo(document.location);
        }
        historyCount = historyCount + 1;
    };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:18:45.573

窗口加载事件只发生一次。您要做的是将内容解析为 html 片段，循环并预加载图像，然后附加内容。

```
// this contains the content we want to append
var $content = $(data).find('#id').children();
// these are the images that are in content that we need to preload
var $images = $content.find("img").add($content.filter("img"));
// keep track of successfully preloaded images
var counter = 0;
// deferred object that will resolve when all images are preloaded
var $def = $.Deferred();
$images.each(function(){
    // if image is already loaded, increment counter and move on.
    if (this.complete || this.readystate === 4) {
        counter++;
        // if all images are preloaded, resolve deferred object
        if (counter === $images.length) $def.resolve();
    }
    else {
        // since the image isn't already preloaded, bind the load event.
        $(this).load(function(){
            counter++;
            // if all images are preloaded, resolve deferred object
            if (counter === $images.length) $def.resolve();
        });
    }
});
// when done preloading, this function will happen.
$def.done(function(){
    // empty target element and append content to it, then animate it.
    $("#id").empty().append($content)
        .animate({
            left: '0'
        }, 'fast');

    var title = $('#id').find('h1').text();
    $('head').find('title').text(title);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T21:25:03.177

您必须提前知道可能会显示哪些图像。然后，您必须在 HTML 正文中添加如下内容：

```
<div id="img-preloader">
  <p>If you're seeing a crapton of images here, that's a bug. Just ignore them.</p>
  <!-- No "display:none" because some browsers completely ignore this then -->
  <img alt='' src="some/image.jpg" />
  <img alt='' src="another_image.png" />
  <img alt='' src="img78236.bmp" />
  <img alt='' src="img046502.jpg" />
  <img alt='' src="DCIM732065230.jpg" />
  <img alt='' src="DCIM478346935.jpg" />
  <!-- all the images here are those that you have to preload -->
</div>
<style type="text/css">
  #img-preloader *{height:0; width:0; opacity:0;}
  #img-preloader {margin-left:-6543467624px;position:absolute;
                  visibility:hidden;height:0;width:0;opacity:0}
</style> 
```

您只能使用您知道会出现在那里的图像来执行此操作，因为无法预测您应该预加载哪些图像。此外，如果有很多图像，我根本不建议预加载，因为它会减慢初始页面加载速度。

# ruby-on-rails - 在 Rails 中强制使用小写 URL 参数

> ID：11767628
> 
> 赞同：0
> 
> 时间：2012-08-01T21:09:33.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在 Rails 3.2 中开发一个应用程序，它使用 将`to_params`URL/路由更改为自定义的。

模型中的`to_params`内容是这样的：

```
def to_params
  keyword
end 
```

然后，在控制器中，我使用以下方法查找对象：

```
def show
  @object = Object.find_by_keyword(params[:id])
end 
```

我在模型中还有一个`before_save`确保所有`keyword`条目都是小写的，所以 URL 像[http://mydomain.com/object/keyword](http://mydomain.com/object/keyword)一样出现。

我的问题是......有些用户可能会在自己将关键字或其他内容放入 URL 时尝试将其大写。在尝试在控制器中查找对象之前，如何将该 URL 转换为小写？我试过`@object = Object.find_by_keyword(params[:id].lowercase)`了，但它似乎没有用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:12:54.243

`@object = Object.find_by_keyword(params[:id].downcase)`

应该管用

# excel - MS Access VBA：参考在单独模块中创建的 Excel 应用程序对象

> ID：11767630
> 
> 赞同：1
> 
> 时间：2012-08-01T21:09:40.527
> 
> 标签：excel, ms-access, vba

这似乎应该是一个简单的，但我被卡住了。

我在 Access 中运行一个 VBA 脚本，它在 Excel 中创建了一个 40 多页的报告。

我正在使用早期绑定创建一个 Excel 应用程序对象：

`Public obj_xl As New Excel.Application`

这是我如何引用对象的示例：

```
With obj_xl
  .Workbooks.Add
  .Visible = True
  .Sheets.Add
  .blahblahblah
End With 
```

问题是程序变得太大，我需要将代码分解成单独的模块。

如果我尝试从与创建它的模块不同的模块引用 Excel 应用程序对象，则会引发错误（“不明确的名称”）。

我确信我可以用 Win API 做点什么，但这似乎有点过头了。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:16:46.753

这是可能导致错误“名称不明确”的情况类型

```
Function Split(s As String) 
    MsgBox s 
End Function 
Function Split(s As String) 
    MsgBox s 
End Function 
```

我知道这个例子很简单，但您正在寻找的是一个具有相同名称的函数、一个对象和/或一个表单控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:27:07.100

如果将声明转换为**Global**，则可以在所有模块中引用它。例如，在一个模块中，将其放在顶部：

```
Global obj_xl As Excel.Application 
```

然后在另一个模块中，

```
Sub xx()
     Set obj_xl = New Excel.Application
     Debug.Print obj_xl.Name
End Sub 
```

# c++ - 当我尝试编译 XPCOM 代码时，为什么会出现错误 C2440？

> ID：11767638
> 
> 赞同：1
> 
> 时间：2012-08-01T21:10:16.623
> 
> 标签：c++, firefox, firefox-addon, xpcom, gecko

我需要创建一个调用 C++ 代码的 Firefox 插件。我做了一些研究，发现这个教程让我开始：[http ://briankrausz.com/building-ac-xpcom-component-in-windows/](http://briankrausz.com/building-a-c-xpcom-component-in-windows/)

我遵循了所有步骤，但陷入了需要使用 VS 编译代码的部分。我正在使用 VS 2005。

更具体地说，我有一个包含 2 个头文件 ( `IMyComponent.h`& `MyComponent.h`) 和 2 个 cpp 文件 ( `MyComponent.cpp`& `MyComponentModule.cpp`) 的项目。

每个 cpp 文件都配置为在不支持 CLR 且不带预编译头的情况下进行编译。

但是，当我尝试编译时，我收到 3 条 C2​​440 错误消息，它们对应于以下代码行：

```
//MyComponentModule.cpp

#include "nsIGenericFactory.h"
#include "MyComponent.h"

NS_GENERIC_FACTORY_CONSTRUCTOR(MyComponent)

static nsModuleComponentInfo components[] =
{
    {
      MY_COMPONENT_CLASSNAME,
      MY_COMPONENT_CID,          //'initializing': cannot convert from const char[37]    to PRUint32
      MY_COMPONENT_CONTRACTID, //'initializing': cannot convert from const char[39] to    PRUint16
      MyComponentConstructor, //'initializing': cannot convert from nsresult (__stdcall *)(nsISupports *, const nsIID &, void **) to PRUint16
   }
};

NS_IMPL_NSGETMODULE("MyComponentsModule", components) 
```

在相应的头文件中，我有以下代码：

```
//MyComponent.h

#ifndef _MY_COMPONENT_H_
#define _MY_COMPONENT_H_

#include "IMyComponent.h"

#define MY_COMPONENT_CONTRACTID "@example.com/XPCOMSample/MyComponent;1"
#define MY_COMPONENT_CLASSNAME "A Simple XPCOM Sample"
#define MY_COMPONENT_CID "4c6f45e0-6366-4c69-Ab68-bb3c75cdada3"

class MyComponent : public IMyComponent
{
public:
 NS_DECL_ISUPPORTS
 NS_DECL_IMYCOMPONENT

 MyComponent();

private:
  ~MyComponent();

protected:
  /* additional members */
};

#endif //_MY_COMPONENT_H_ 
```

所有其他代码都是使用 Gecko SDK 中包含的 xpidl.exe 工具生成的。

有人可以给一些提示吗？

PS：这里是 nsModuleComponentInfo：

```
 struct nsModuleComponentInfo {
 const char*                                 mDescription;
 nsCID                                       mCID;
 const char*                                 mContractID;
 NSConstructorProcPtr                        mConstructor;
 NSRegisterSelfProcPtr                       mRegisterSelfProc;
 NSUnregisterSelfProcPtr                     mUnregisterSelfProc;
 NSFactoryDestructorProcPtr                  mFactoryDestructor;
 NSGetInterfacesProcPtr                      mGetInterfacesProc;
 NSGetLanguageHelperProcPtr                  mGetLanguageHelperProc;
 nsIClassInfo **                             mClassInfoGlobal;
 PRUint32                                    mFlags;
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:49:07.453

第一个错误是因为您试图传入 a`char *`而不是所需的类型。本页： [https ://developer.mozilla.org/en/Adding_XPCOM_components_to_Mozilla_build_system](https://developer.mozilla.org/en/Adding_XPCOM_components_to_Mozilla_build_system)

至少提到如何处理 CID 参数：

```
{ "Friendly class description for people to read",
 YOUR_CLASS_CID,
 YOUR_CLASS_CONTRACTID,
 nsYourConcreteClassNameConstructor } 
```

和

```
/* 2d96b3d0-c051-11d1-a827-0040959a28c9 */
#define NS_WINDOW_CID \
{ 0x2d96b3d0, 0xc051, 0x11d1, \
{0xa8, 0x27, 0x00, 0x40, 0x95, 0x9a, 0x28, 0xc9}} 
```

# soap - Go 上的 WSDL/SOAP 支持？

> ID：11767642
> 
> 赞同：23
> 
> 时间：2012-08-01T21:10:40.913
> 
> 标签：soap, go, soap-client

是否有任何包在 Go 上支持*SOAP/WSDL ？*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-13T17:56:39.890

Go 中不支持 WSDL。其他语言的支持要么是静态的，要么是动态的：要么是从 WSDL 预先生成的结构，要么是使用哈希表动态完成的。

但是，您可以手动对 SOAP 请求进行编码和解码。我发现标准`encoding/xml`包对于 SOAP 来说是不够的。不同的服务器有很多怪癖，并且限制`encoding/xml`使得很难生成这些服务器满意的请求。

例如，有些服务器需要`xsi:type="xsd:string"`对每个字符串进行标记。为了正确执行此操作，您的结构需要如下所示`encoding/xml`：

```
type MethodCall struct {
    One XSI
    Two XSI
}

type XSI struct {
    Type string `xml:"xsi:type,attr"`
    Vaue string `xml:",chardata"`
} 
```

你像这样构造它：

```
MethodCall{
    XSI{"xsd:string", "One"},
    XSI{"xsd:string", "Two"},
} 
```

这给了你：

```
<MethodCall>
    <One xsi:type="xsd:string">One</One>
    <Two xsi:type="xsd:string">Two</Two>
</MethodCall> 
```

现在这可能没问题。它当然可以完成工作。但是，如果您需要的不仅仅是一个`string`? `encoding/xml`目前不支持`interface{}`。

如您所见，这变得很复杂。如果您有一个要集成的 SOAP API，这可能不会太糟糕。如果你有几个，每个都有自己的怪癖怎么办？

如果你能做到这一点不是很好吗？

```
type MethodCall struct {
    One string
    Two string
} 
```

然后说`encoding/xml`：“此服务器需要 xsi 类型”。

为了解决这个问题，我创建了[github.com/webconnex/xmlutil](https://github.com/webconnex/xmlutil)。这是一项正在进行的工作。它没有`encoding/xml`编码器/解码器的所有功能，但它具有 SOAP 所需的功能。

这是一个工作示例：

```
package main

import (
    "bytes"
    "encoding/xml"
    "fmt"
    "github.com/webconnex/xmlutil"
    "log"
    //"net/http"
)

type Envelope struct {
    Body `xml:"soap:"`
}

type Body struct {
    Msg interface{}
}

type MethodCall struct {
    One string
    Two string
}

type MethodCallResponse struct {
    Three string
}

func main() {
    x := xmlutil.NewXmlUtil()
    x.RegisterNamespace("http://www.w3.org/2001/XMLSchema-instance", "xsi")
    x.RegisterNamespace("http://www.w3.org/2001/XMLSchema", "xsd")
    x.RegisterNamespace("http://www.w3.org/2003/05/soap-envelope", "soap")
    x.RegisterTypeMore(Envelope{}, xml.Name{"http://www.w3.org/2003/05/soap-envelope", ""},
        []xml.Attr{
            xml.Attr{xml.Name{"xmlns", "xsi"}, "http://www.w3.org/2001/XMLSchema-instance"},
            xml.Attr{xml.Name{"xmlns", "xsd"}, "http://www.w3.org/2001/XMLSchema"},
            xml.Attr{xml.Name{"xmlns", "soap"}, "http://www.w3.org/2003/05/soap-envelope"},
        })
    x.RegisterTypeMore("", xml.Name{}, []xml.Attr{
        xml.Attr{xml.Name{"http://www.w3.org/2001/XMLSchema-instance", "type"}, "xsd:string"},
    })

    buf := new(bytes.Buffer)
    buf.WriteString(`<?xml version="1.0" encoding="utf-8"?>`)
    buf.WriteByte('\n')
    enc := x.NewEncoder(buf)
    env := &Envelope{Body{MethodCall{
        One: "one",
        Two: "two",
    }}}
    if err := enc.Encode(env); err != nil {
        log.Fatal(err)
    }
    // Print request
    bs := buf.Bytes()
    bs = bytes.Replace(bs, []byte{'>', '<'}, []byte{'>', '\n', '<'}, -1)
    fmt.Printf("%s\n\n", bs)

    /*
        // Send response, SOAP 1.2, fill in url, namespace, and action
        var r *http.Response
        if r, err = http.Post(url, "application/soap+xml; charset=utf-8; action="+namespace+"/"+action, buf); err != nil {
            return
        }
        dec := x.NewDecoder(r.Body)
    */
    // Decode response
    dec := x.NewDecoder(bytes.NewBufferString(`<?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope>
        <soap:Body>
            <MethodCallResponse>
                <Three>three</Three>
            </MethodCallResponse>
        </soap:Body>
    </soap:Envelope>`))
    find := []xml.Name{
        xml.Name{"", "MethodCallResponse"},
        xml.Name{"http://www.w3.org/2003/05/soap-envelope", "Fault"},
    }
    var start *xml.StartElement
    var err error
    if start, err = dec.Find(find); err != nil {
        log.Fatal(err)
    }
    if start.Name.Local == "Fault" {
        log.Fatal("Fault!") // Here you can decode a Soap Fault
    }
    var resp MethodCallResponse
    if err := dec.DecodeElement(&resp, start); err != nil {
        log.Fatal(err)
    }
    fmt.Printf("%#v\n\n", resp)
} 
```

在上面的示例中，我使用该`Find`方法来获取响应对象或故障。这不是绝对必要的。你也可以这样做：

```
x.RegisterType(MethodCallResponse{})
...
// Decode response
dec := x.NewDecoder(bytes.NewBufferString(`<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope>
    <soap:Body>
        <MethodCallResponse>
            <Three>three</Three>
        </MethodCallResponse>
    </soap:Body>
</soap:Envelope>`))
var start *xml.StartElement
var resp Envelope
if err := dec.DecodeElement(&resp, start); err != nil {
    log.Fatal(err)
}
fmt.Printf("%#v\n\n", resp) 
```

当您的数据如下所示时，您会发现该`Find`方法很有用：

```
<soap:Envelope>
  <soap:Body>
    <MethodResponse>
      <MethodResult>
        <diffgr:diffgram>
          <NewDataSet>
            <Table1 diffgr:id="Table1" msdata:rowOrder="0" diffgr:hasChanges="inserted">
              <Three>three</Three>
            </Table1>
          </NewDataSet>
        </diffgr:diffgram>
      </MethodResult>
    </MethodResponse>
  </soap:Body>
</soap:Envelope> 
```

这是一个 DiffGram，是 Microsoft .NET 的一部分。您可以使用该`Find`方法到达`Table1`. `Decode`and`DecodeElement`方法也适用于切片。所以你可以传入一个`[]MethodCallResponse`if`NewDataSet`碰巧包含多个结果。

我同意 Zippower 的观点，即 SOAP 确实很烂。但不幸的是，很多企业都在使用 SOAP，有时你不得不使用这些 API。使用 xmlutil 包，我希望使用它可以减轻一些痛苦。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-01T21:33:25.183

没有。

SOAP 很烂，但我必须实现一个使用 SOAP 的已定义协议的服务器，所以我`net/http`用`encoding/xml`. 几分钟后，我已经用 Go 送达了我的第一个信封。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-02T13:25:37.533

虽然 Go 本身仍然没有任何内容，但有[gowsdl](https://github.com/hooklift/gowsdl "gowsdl")。到目前为止，它似乎对我来说可以很好地与几个 SOAP 服务交互。

我不使用它提供的 SOAP 代理，我相信它不支持身份验证，但是[gowsdl](https://github.com/hooklift/gowsdl "gowsdl")从 WSDL 生成我需要的结构和代码来编组请求和解组响应——这是一个巨大的胜利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T09:12:38.943

一种选择是使用生成 C WSDL 客户端的[gsoap](https://www.genivia.com/dev.html)，然后通过 GO 和[cgo使用该客户端](http://golang.org/cmd/cgo/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T19:11:57.253

还有[wsdl-go](https://godoc.org/code.google.com/p/wsdl-go/wsdl)。
但是我没有用过，所以我真的不能说。

# ios - 打开图形操作 IOS

> ID：11767645
> 
> 赞同：1
> 
> 时间：2012-08-01T21:10:46.677
> 
> 标签：ios, facebook, facebook-opengraph

试图在我的 iPhone 应用中发布 OPEN GRAPH Facebook Action。它返回对象类型的错误。虽然对象类型是正确的。不确定是什么问题...

```
NSMutableDictionary  *params = [NSMutableDictionary dictionaryWithObjectsAndKeys: 

                                facebookToken, @"facebook_access_token",
                                @"photo", @"type",
                                @"IMG_URL_HERE", @"url",
                                @"Test Title", @"title",
                                @"IMG_URL_HERE", @"image",
                                @"Test Description", @"description",
                                nil];

[delegate.facebook requestWithGraphPath: @"me/APP_SHARED_NAME:shared" andParams:params andHttpMethod: @"POST" andDelegate: self]; 
```

它返回此错误

```
Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x7fa78f0 {error=<CFBasicHash 0x7fa6b10 [0x1a0bb48]>{type = mutable dict, count = 3, 
```

entries => 2 : {contents = "type"} = {contents = "Exception"} 3 : {contents = "message"} = {contents = "您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：照片。"} 6 : {contents = "code"} = 1611072 } }

有人对此有想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:41:15.423

*对象*应引用带有开放图形标签的公开 URL 。如果您认为这不是问题，请提供您的*实际*代码，以便我们确定。

# android - 是否有从我的雅虎页面获取提要的 API？

> ID：11767646
> 
> 赞同：0
> 
> 时间：2012-08-01T21:10:47.077
> 
> 标签：android, api, rss, yahoo

我想为 Android 编写一个 RSS 聚合器，所以我想从用户的 My Yahoo 页面获取提要。是否有 API 可以做到这一点？我花了一整天的时间找到它，但没有成功。也许有人知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:38:14.530

好吧，几天后我找到了解决方案。

*   第一步是从 Yahoo 登录页面解析隐藏的值。
*   第二步是使用此值发出 POST 请求
*   最后从 MyYahoo 用户的页面提要 url 解析

# sql-server - 这足以保护 SQL 注入吗？

> ID：11767648
> 
> 赞同：1
> 
> 时间：2012-08-01T21:10:55.257
> 
> 标签：sql-server, asp-classic, sql-injection, query-parameters

我正在尝试使用 MS SQL 2008 R2（Express Edition）保护一个较旧的经典 asp 网站（大约有 1,000 个（.asp）页面）。

我找到了一个关于如何参数化查询的代码（见下文），该代码看起来对我来说是最容易理解和在所有需要更改的页面上使用的。

我的问题是：如果我要转换所有的 ms sql 查询（看起来像下面的代码）是否足以防止 ms sql 注入攻击？还是我需要添加/更改更多内容？

谢谢你的帮助...

**这是代码：**

```
 set objCommand = Server.CreateObject("ADODB.Command")  
    strSql = "SELECT * FROM users WHERE username=? AND password=?"
    ...  
    cmd1.Parameters(0) = Request.Form("login")
    cmd1.Parameters(1) = Request.Form("password")
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:54:25.937

自从我看到旧的 Adodb 命令语法以来已经有一段时间了，但我想你会想要这样的东西：

```
set objCommand = Server.CreateObject("ADODB.Command")
strSql = "Select * From users where username=@username and password=@password"
objCommand.Parameters.Append.CreateParameter
         ("@username", adVarChar, adParamInput, 50, Request.Form("login"))
objCommand.Parameters.Append.CreateParameter
         ("@password", adVarChar, adParamInput, 50, Request.Form("password")) 
```

与往常一样，不要在没有类型安全参数编码的情况下创建动态 sql 语句，我认为即使是老派 ADO 也通过 CreateParameter 提供了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:54:08.803

是的，您在问题中提供的代码受到 Sql Injections 的保护。

但是，[正如这篇关于缓解 Sql Injection](http://blogs.technet.com/b/neilcar/archive/2008/05/23/sql-injection-mitigation-using-parameterized-queries-part-2-types-and-recordsets.aspx)的文章中所指出的，您的代码将出现“一个较小的性能问题，因为 ADODB 必须在执行查询之前对 SQL 进行一次往返以确定参数类型。”

您可以通过在代码中显式指定参数类型来解决此问题[`CreateParameter`](http://www.w3schools.com/ado/met_comm_createparameter.asp)

# c++ - 构建失败：重新定义；不同的基本类型和类型名称第一次看到使用“类”现在看到使用“结构”

> ID：11767649
> 
> 赞同：0
> 
> 时间：2012-08-01T21:10:57.017
> 
> 标签：c++, visual-studio-2010, visual-studio

我正在使用 VS 2010 Ultimate。工具集 v90。

我有一个 DLL 和一个静态链接到 DLL 的测试项目。DLL 内部是一个名为 IFilter 的导出类。这个接口类被包装在一个命名空间中，该类的用法使用命名空间明确说明，例如 void DoSomethingWithDLLTypes( const Observer::IFilter &);

几个月来一切都运行良好，然而，随着最近在 DLL 项目之外的更改，我开始引入新文件。当我将这些文件添加到解决方案中时，使用每个添加到测试进行重建，一切都运行良好，然后突然我收到了这个错误。

C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\Filter.h(53): 警告 C4099: 'Observer::IFilter' : type name first seen using 'class' now see using 'struct' d: \proj\pub\h\IFilter.h(12) : 参见 'Observer::IFilter' C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\Filter.h(183) 的声明：错误 C2371： 'IFilter'：重新定义；不同的基本类型 C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\Filter.h(53) ：参见“IFilter”声明

最初 IFilter 没有包装在命名空间中，所以我必须检查所有文件（认为这会解决它）并将所有内容包装在命名空间中。现在，DLL 编译得很好，但是，我在测试项目中仍然遇到同样的错误。我什至不知道如何/为什么包含来自 MS SDK 的 IFilter/Filter.h。

测试项目使用预编译的头文件，但是，它没有使用 Windows.h，无论哪种方式，我都继续并在那里“只是为了确定”做了 #define lean_and_mean 宏，没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:49:54.723

Visual Studio 编译器不符合标准的地方之一。根据标准，`struct`and`class`关键字可以互换使用来声明相同的类型，但是 VS 对定义为的类型有不同的修饰，`struct`因此`class`它要求您始终为您的类型使用一个或另一个关键字。

现在，错误指向两个看似无关的头文件，所以它可能只是名称冲突：

```
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\Filter.h
d:\proj\pub\h\IFilter.h 
```

在第一个标题中有一个`class Observer::IFilter`，在第二个标题中有`struct Observer::IFilter`。如果它们相同，那么您应该修复项目，使其不包含多个带有定义的标题，如果它们是不同的东西，那么您应该使名称唯一（添加命名空间）

# postgresql - 远程触发 postgres 数据库备份

> ID：11767650
> 
> 赞同：0
> 
> 时间：2012-08-01T21:11:08.233
> 
> 标签：postgresql, database-backups, remote-backup

我想在从我的部署服务器（不是数据库服务器）运行数据库迁移之前和之后备份我的生产数据库，我在 CentOS 5 机器上安装了一个 Postgresql 8.4 服务器。访问数据库的网站位于运行 MVC.Net 应用程序的 Windows 2008 服务器上，它检查源代码中的更改、编译项目、运行任何 DB 更改，然后部署到 IIS。

我已将数据库服务器设置为为日常备份执行 crontab 作业备份，但我还想要一种在部署过程中从部署服务器调用备份的方法。据我所知，没有办法告诉数据库从客户端连接来备份自己。如果我从 Web 服务器调用 pg_dump 作为部署脚本的一部分，它将在 Web 服务器上创建备份（不可取）。我查看了 COPY 命令，它可能不会给我想要的东西。MS SQLServer 允许您从数据库连接中调用 BACKUP 命令，这会将备份放在数据库机器上。

我发现这篇关于 MySQL 的帖子，它不是 MySQL 中支持的功能。Postgres是一样的吗？ [MySQL数据库的远程备份](https://stackoverflow.com/questions/3631508/remote-backup-of-mysql-database)

实现这一目标的最佳方法是什么？我想过创建一个与 DB 服务器建立 SSH 连接的小型应用程序，然后调用 pg_dump？这意味着我将 SSH 连接信息存储在服务器上，如果可能的话，我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:28:58.440

创建一个数据库用户`pgbackup`并[为他分配对所有数据库表的只读权限](http://www.depesz.com/2007/10/19/grantall/)。

使用shell`pgbackup`在 CentOS 服务器上设置新的操作系统用户。`/bin/bash`

登录`pgbackup`并创建一对不带密码的 ssh 身份验证密钥，并允许该用户使用生成的私钥登录：

```
su - pgbackup
ssh-keygen -q -t rsa -f ~/.ssh/id_rsa -N ""
cp -a ~/.ssh/.id_rsa.pub ~/.ssh/authorized_keys 
```

创建一个文件`~pgbackup/.bash_profile`：

```
exec pg_dump databasename --file=`date +databasename-%F-%H-%M-%S-%N.sql` 
```

在 Windows 上设置脚本以使用主键进行连接`ssh`和授权。除了创建数据库备份之外，它不能做任何事情，所以它是相当安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:50:51.653

嗨，迈克，你是对的，

使用 pg_dump 我们只能将备份保存在本地系统上。在我们的例子中，我们在数据库服务器上创建了一个脚本来进行基本备份。我们在另一台服务器上创建了一个期望脚本，该脚本在数据库服务器上运行该脚本。

我们所有的服务器都是 linux 服务器，我们使用 shell 脚本完成了这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:13:42.400

我不确定您的意思，但我认为您可以`pg_dump`在 Windows 计算机上使用：

```
pg_dump --host=centos-server-name > backup.sql 
```

您需要在那里安装 Windows 版本的 PostgreSQL，所以`pg_dump.exe`会安装，但您不需要启动 PostgreSQL 服务，甚至不需要在那里创建表空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:21:39.007

[我认为如果您创建一个触发器，该触发器使用 PostgreSQL 模块dblink](http://www.postgresql.org/docs/9.1/static/dblink.html)从 PL/pgSQL 中建立远程数据库连接，我认为这是可能的。

# c# - 在 C# 中向 cmd 提示符发送命令

> ID：11767654
> 
> 赞同：10
> 
> 时间：2012-08-01T21:11:26.097
> 
> 标签：c#, winforms, cmd

对于我的一个实现，我正在开发一个应该向/从 cmd 窗口发送/检索命令/结果的工具。一切正常，但下面的用例没有做任何事情。好像我的应用程序正在等待某些东西（而不是显示结果）

从我的工具中，我导航到 python 文件夹。从 python 文件夹中，我尝试启动 python.exe，但此时，我的编辑器不执行任何操作。它只是继续等待。

出于您的考虑，我也在此处链接视频。你们会更容易理解我想说的话。

[在此处观看视频（在 youtube 上）](http://www.youtube.com/watch?v=MkGZOQSMXuM)

我还附上了我目前拥有的代码。

```
 ProcessStartInfo info = new ProcessStartInfo("cmd.exe");

            string argument = null;
            if (!string.IsNullOrEmpty(startingDirectory) && System.IO.Directory.Exists(startingDirectory))
            {
               argument += @"cd\";
            }
            else
            {
                argument += "\"";
            }
            info.Arguments = argument;
            info.CreateNoWindow = true;
            info.RedirectStandardError = true;
            info.RedirectStandardInput = true;
            info.RedirectStandardOutput = true;
            info.UseShellExecute = false;
             this.shellProcess = System.Diagnostics.Process.Start(info);
            this.shellProcess.EnableRaisingEvents = true;
            //this.InputStream.AutoFlush = true;
            this.shellProcess.Exited += new EventHandler(ProcessExited);
            this.ErrorBeginRead();
            this.OutputBeginRead();

 private void OutputBeginRead()
    {
        this.shellProcess.StandardOutput.BaseStream.BeginRead(outputBuffer, 0, outputBuffer.Length, new AsyncCallback(this.OnOutputInput), this.shellProcess);
    }

        private void ErrorBeginRead()
    {
        this.shellProcess.StandardError.BaseStream.BeginRead(errorBuffer, 0, errorBuffer.Length, new AsyncCallback(this.OnErrorInput), this.shellProcess);
    } 
```

谢谢 ！

编辑：启动 python 只是一个例子。我也需要对其他正常的 cmd 行命令使用相同的方法。如果有人可以指出我在我拥有的代码中做错了什么或我必须做什么，以实现预期的功能，那就太好了。

编辑 2：正常的 cmd 命令运行良好。python、perl 等命令行工具无法正常工作。

编辑3：所以我设法按照杰米的建议向前推进了一点。用户界面不再“挂起”。但是当我访问 python 解释器时，解释器的输出在我的工具中仍然不可见。任何建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-01T22:04:05.657

您不能以这种方式向 shell 发送命令。info.Arguments 中的字符串是在命令行上提供给程序的参数。如果您希望 cmd.exe shell 执行一系列命令然后退出，您必须提供 /c 参数。如果您希望它执行多个命令，则必须将命令放在批处理文件中并执行该命令，或者将它们括在引号中并用 && 分隔它们，即`info.Arguments = @"/c ""cd \ && dir""";`. 您永远不会返回的另一个问题是 cmd.exe 在没有任何或适当的参数的情况下默认以交互模式打开。/c 选项告诉 cmd.exe 执行相关命令然后退出。

此外，当直接从 ProcessStartInfo 启动时，像 python 和 perl 这样的解释器有时会出现奇怪的行为。如果`info.Arguments = @"""MyPerlProgram.pl""";`使用 perl.exe 不起作用，您可能会发现有必要在 cmd.exe 中启动它们以使其正常运行，即`info.Arguments = @"/c ""perl.exe ""MyPerlProgram.pl""""";`.

请参阅[Cmd](http://technet.microsoft.com/en-us/library/bb490880.aspx)和[ProcessStartInfo.Arguments 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments.aspx)。

要回答您的**Edit 3**问题，您可能没有正确连接到输出。与其尝试挂钩 StreamReader 的 BaseStream，不如`this.shellProcess.OutputDataReceived += ProcessOutputHandler;`在调用 Start 之前挂钩 OutputDataReceived 事件，其中 ProcessOutputHandler 具有类似`public static void ProcessOutputHandler(object sendingProcess, DataReceivedEventArgs outLine)`. 调用 Start 后立即调用`this.shellProcess.BeginOutputReadLine();`. 错误输出的过程也类似。有关详细信息，请参阅[Process.BeginOutputReadLine 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline)和[Process.BeginErrorReadLine 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginerrorreadline)。

如果你仍然有问题，如果你只是尝试，你会得到什么`process.StartInfo.Arguments = @"/c ""python.exe -c ""import sys; print 'Test.';""""";`？

此外，下面的代码演示了 shell 通信的大部分必要概念：

```
public static void Main()
{
    using (Process process = new Process())
    {
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardOutput = true;
        process.StartInfo.RedirectStandardError = true;
        process.StartInfo.WorkingDirectory = @"C:\";
        process.StartInfo.FileName = Path.Combine(Environment.SystemDirectory, "cmd.exe");

        // Redirects the standard input so that commands can be sent to the shell.
        process.StartInfo.RedirectStandardInput = true;
        // Runs the specified command and exits the shell immediately.
        //process.StartInfo.Arguments = @"/c ""dir""";

        process.OutputDataReceived += ProcessOutputDataHandler;
        process.ErrorDataReceived += ProcessErrorDataHandler;

        process.Start();
        process.BeginOutputReadLine();
        process.BeginErrorReadLine();

        // Send a directory command and an exit command to the shell
        process.StandardInput.WriteLine("dir");
        process.StandardInput.WriteLine("exit");

        process.WaitForExit();
    }
}

public static void ProcessOutputDataHandler(object sendingProcess, DataReceivedEventArgs outLine)
{
    Console.WriteLine(outLine.Data);
}

public static void ProcessErrorDataHandler(object sendingProcess, DataReceivedEventArgs outLine)
{
    Console.WriteLine(outLine.Data);
} 
```

您可能有线程问题导致您的问题。我已经对此做了一些进一步的工作，并且能够在表单上获取一个文本框以使用以下代码进行更新：

```
using System;
using System.Diagnostics;
using System.IO;
using System.Timers;

namespace DummyFormsApplication
{
    class ProcessLauncher : IDisposable
    {
        private Form1 form;
        private Process process;
        private bool running;

        public bool InteractiveMode
        {
            get;
            private set;
        }

        public ProcessLauncher(Form1 form)
        {
            this.form = form;

            process = new Process();
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.RedirectStandardError = true;
            process.StartInfo.WorkingDirectory = @"C:\";
            process.StartInfo.FileName = Path.Combine(Environment.SystemDirectory, "cmd.exe");

            // Redirects the standard input so that commands can be sent to the shell.
            process.StartInfo.RedirectStandardInput = true;

            process.OutputDataReceived +=new DataReceivedEventHandler(process_OutputDataReceived);
            process.ErrorDataReceived += new DataReceivedEventHandler(process_ErrorDataReceived);
            process.Exited += new EventHandler(process_Exited);
        }

        public void Start()
        {
            if (running == false)
            {
                running = true;
                InteractiveMode = true;

                // Runs the specified command and exits the shell immediately upon completion.
                process.StartInfo.Arguments = @"/c ""C:\python27\python.exe -i""";

                process.Start();

                process.BeginOutputReadLine();
                process.BeginErrorReadLine();
            }
        }

        public void Start(string scriptFileName)
        {
            if (running == false)
            {
                running = true;
                InteractiveMode = false;

                // Runs the specified command and exits the shell immediately upon completion.
                process.StartInfo.Arguments = string.Format(@"/c ""C:\python27\python.exe ""{0}""""", scriptFileName);
            }
        }

        public void Abort()
        {
            process.Kill();
        }

        public void SendInput(string input)
        {
            process.StandardInput.Write(input);
            process.StandardInput.Flush();
        }

        private void process_OutputDataReceived(object sendingProcess, DataReceivedEventArgs outLine)
        {
            if (outLine.Data != null)
            {
                form.Invoke(form.appendConsoleTextDelegate, new object[] { outLine.Data });
            }
        }

        private void process_ErrorDataReceived(object sendingProcess, DataReceivedEventArgs outLine)
        {
            if (outLine.Data != null)
            {
                form.Invoke(form.appendConsoleTextDelegate, new object[] { outLine.Data });
            }
        }

        private void process_Exited(object sender, EventArgs e)
        {
            running = false;
        }

        public void Dispose()
        {
            if (process != null)
            {
                process.Dispose();
            }
        }
    }
} 
```

我创建了一个表单并在表单中添加了一个文本框和以下代码：

```
 public delegate void AppendConsoleText(string text);
    public AppendConsoleText appendConsoleTextDelegate;

    private void Form1_Load(object sender, EventArgs e)
    {
        appendConsoleTextDelegate = new AppendConsoleText(textBox1_AppendConsoleText);
        using (ProcessLauncher launcher = new ProcessLauncher(this))
        {
            launcher.Start();

            launcher.SendInput("import sys;\n");
            launcher.SendInput("print \"Test.\";\n");
            launcher.SendInput("exit()\n");
        }
    }

    private void textBox1_AppendConsoleText(string text)
    {
        textBox1.AppendText(string.Format("{0}\r\n", text));
    } 
```

需要注意的一点是，如果 Form1_Load 事件没有完成，Invoke 将一直挂起，直到它完成。如果事件中有长时间运行的代码，则需要使用 BeginInvoke 异步调用，或者在长时间运行的代码中定期调用 DoEvents。

**编辑**

根据您的评论，我已修改代码以处理交互式提交。但是，有一个问题。Python 提示符 ( `>>>`) 在 StandardError 输出中提供，它不回显 StandardInput。它也不会终止线路。这使得检测提示变得困难，并导致提示字符的一些乱序输出，因为 process_ErrorDataReceived 在进程结束或看到行结束之前不会触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T22:49:26.217

您的问题中没有足够的代码来确切地确定您的应用程序正在挂起什么。您的代码中有一些看起来很奇怪的东西。例如，您为什么要开始自己的错误和输出读取循环，而不是使用 Process 类中内置的那些？像这样：

```
var shellProcess = System.Diagnostics.Process.Start(info);
shellProcess.EnableRaisingEvents = true;
shellProcess.Exited += ProcessExited;

shellProcess.OutputDataReceived += ShellProcess_OutputDataReceived;
shellProcess.ErrorDataReceived  += ShellProcess_ErrorDataReceived;
shellProcess.BeginOutputReadLine();
shellProcess.BeginErrorReadLine();

void ShellProcess_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    // Do Something
}

void ShellProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    // Do Something
} 
```

由于您的错误和输出异步事件没有触发，因此我相信 shellProcess 可能存在终身问题。如果您发布更多代码，我们可以提供更好的指导。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:53:17.260

我看不到您的所有代码，但您可以*轻松地使用 Steam 对象向**您创建*的 CMD 窗口写入/发送命令。例如：

```
StreamWriter inputStream = shellProcess.StandardInput;
//send command to cmd prompt and wait for command to execute with thread sleep
inputStream.WriteLine("echo "CMD just received input");
inputStream.Flush(); 
```

例如，在上面的示例中，命令提示符将***`echo`***像在窗口中输入一样接收命令。要显示输出，您必须创建`StreamReader`对象并将其分配给进程的`StandardOutput`.

# c++ - 设计建议：从包含的对象调用容器对象的方法

> ID：11767660
> 
> 赞同：1
> 
> 时间：2012-08-01T21:11:45.660
> 
> 标签：c++, oop, composition

我有一个简单的设置

```
class Container {
    Handler h;
} 
```

所有的 Container 对象都有一个“warning()”方法。我还想有一种方法从 Handler 对象中输出警告，但使用包含对象的工具发送这些警告。

我确实意识到在包含的对象中保存对容器的引用是奇怪的（通常包含的对象不应该知道任何关于它的容器的信息）。现在，在带有闭包的语言中，我会这样做（想象的语法）：

```
h.set_warning_handler { | char* message |
    this->warning(message)
} 
```

但我在 C++ 中工作，它不是使用 Apple 方言之类的地方。解决这个问题的首选方法是什么？或者只是设置该参考并忘记它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:13:55.673

C++11 有[闭包](http://en.cppreference.com/w/cpp/language/lambda)：

```
h.set_warning_handler([&](char const* message) { this->warning(message); }); 
```

`[&]`指定通过引用捕获上下文（需要捕获`this`）。`(…)`声明参数列表和`{…}`lambda 的主体。

或者，您*可以*使`Handler`依赖项依赖于其容器。这引入了相当强的耦合，因此最好避免，但有时它是有道理的（例如，如果你还不能使用 C++11 特性），并且可以通过使用接口来削弱强耦合（以下使用后期绑定；有时，模板可能更合适）：

```
struct CanWarn {
    virtual void warning(char const*) const = 0;
    virtual ~CanWarn() { }
};

class Handler {
    CanWarn const* warning_dispatcher;

public:

    void set_warning_dispatcher(CanWarn const* dispatcher) {
        warning_dispatcher = dispatcher;
    }

    …
};

class Container : public CanWarn { … }; 
```

# maven - 从 Maven 版本中分叉出来的进程：执行插件忽略用户的 settings.xml？

> ID：11767664
> 
> 赞同：7
> 
> 时间：2012-08-01T21:12:06.987
> 
> 标签：maven, maven-release-plugin

根据[文档](http://maven.apache.org/plugins/maven-release-plugin/examples/perform-release.html)，Maven release:perform 目标检查项目，然后派生一个新的 Maven 实例来构建它。由于某种原因，分叉实例似乎忽略了用户的`settings.xml`，这在我的情况下会导致错误，因为该文件具有用于在父 pom.xml 中构成存储库 URL 的属性的定义。

*   用户的**settings.xml**
    定义“nexus”配置文件中的属性，该配置文件始终处于活动状态。

    ```
    <profiles>
      <profile>
        <id>nexus</id>
        <properties>
          <dist.url>http://host.com/nexus/content/repositories</dist.url>
        </properties>
      </profile>
    </profiles>

    <activeProfiles>
      <activeProfile>nexus</activeProfile>
    </activeProfiles> 
    ```

*   Parent's **pom.xml**
    使用定义的属性来组成存储库的 URL。

    ```
    <distributionManagement>
      <repository>
        <id>nexus</id>
        <url>${dist.url}/releases</url>
      </repository>
    </distributionManagement> 
    ```

*   执行的命令：

    ```
    mvn release:perform 
    ```

*   输出（在它表明已成功签出、构建、测试和打包项目之后）：

    ```
    [INFO] Uploading: ${dist.url}/releases/com/acme/access/my-project/1.0/my-project-1.0.jar
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] [INFO] BUILD FAILURE
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] [INFO] Total time: 3.659s
    [INFO] [INFO] Finished at: Wed Aug 01 14:40:23 EDT 2012
    [INFO] [INFO] Final Memory: 21M/307M
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] [WARNING] The requested profile "nexus" could not be activated because it does not exist.
    [INFO] [ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project my-project: Failed to deploy artifacts: Could not transfer artifact com.acme.access:my-project:jar:1.0 from/to nexus (${dist.url}/releases): Error transferring file: no protocol: ${dist.url}/releases/com/acme/access/my-project/1.0/my-project-1.0.jar -> [Help 1] 
    ```

请注意分叉的 Maven 实例如何尝试上传到 ${dist.url}，这表明 settings.xml 中定义的属性未被读取。此外，警告消息通知未找到配置文件“nexus”。我假设主 Maven 实例将配置文件信息传递给分叉实例，因此它知道要查找它，但由于它忽略（或未找到）用户的 settings.xml，它找不到该配置文件。

我发现规避这种情况的唯一方法是通过使用插件参数“包装”`settings.xml`的 Maven 命令行参数手动指定文件的位置，如`-s``arguments`

```
mvn release:perform -Darguments="-s C:\Users\theuser\.m2\settings.xml" 
```

插件是否以预期/正确的方式运行？有没有办法将属性定义保留在用户的内部，`settings.xml`而不必像我上面所做的那样指定文件的位置？

更多信息：

*   问题似乎特别在于插件找不到用户的`settings.xml`，因为将配置文件信息复制到全局`settings.xml`确实会导致它工作。

*   用户`settings.xml`已正确命名/创建，因为运行`help:active-profiles`表明配置文件处于活动状态。手动构建和部署`mvn clean deploy`也可以正常工作（即，正确计算存储库 URL 并上传工件）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T21:32:27.457

这不一定是 maven-release-plugin 中的错误。您似乎遇到了这个 Maven 错误：[MNG-5224](https://issues.apache.org/jira/browse/MNG-5224) 该错误应该在 Maven 3.0.4 中修复。

# c# - 执行一个动态的asp按钮点击事件

> ID：11767666
> 
> 赞同：0
> 
> 时间：2012-08-01T21:12:15.660
> 
> 标签：c#, asp.net

我创建了一个包含多个动态按钮的仪表板。当我单击“删除”按钮时，我希望执行服务器端代码。我已将代码添加到按钮的 Click 事件处理程序中。

使用以下代码创建动态按钮：

```
Button PopupDeleteButton = new Button();
PopupDeleteButton.ID = "PBD" + controlValue.ID.ToString();
PopupDeleteButton.Text = "Delete";
PopupDeleteButton.Style["Height"] = "15px";
PopupDeleteButton.Style["Width"] = "50px";
PopupDeleteButton.Style["top"] = "0";
PopupDeleteButton.Style["right"] = "0";
PopupDeleteButton.Style["float"] = "left";
PopupDeleteButton.Style["font-size"] = "9px";
PopupDeleteButton.Style.Add(HtmlTextWriterStyle.VerticalAlign, "top");
PopupDeleteButton.Attributes.Add("runat","server");             
PopupDeleteButton.Click += new EventHandler(this.RemoveWidgetFromXML_Click); 
```

但是，当我单击表单上的动态按钮时，会发生回发，并且永远不会调用函数 RemoveWidgetFromXML。有任何想法吗？我已经查看了整个谷歌，但找不到如何在事件调用之前阻止回发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:14:46.187

您必须在每个页面回发上重新创建动态控件。在这种情况下，将调用事件处理程序。

# javascript - 为什么 twitter 从客户端渲染转向服务器端渲染？

> ID：11767669
> 
> 赞同：2
> 
> 时间：2012-08-01T21:12:35.677
> 
> 标签：javascript, templates, client-side

在[一篇博文](http://engineering.twitter.com/2012/05/improving-performance-on-twittercom.html)中， Twitter 表示他们已经从客户端渲染回到了服务器端渲染。

我试图找到更彻底的原因解释。

他们在帖子中说：

> [客户端渲染] 缺乏对仅在服务器上可用的各种优化的支持。

缺少客户端的优化是什么？

他们还说：

> [服务器端渲染] 减少跨浏览器的性能差异

我读到这篇文章是因为一些浏览器在客户端渲染方面表现不佳。哪些浏览器以及渲染速度慢了多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:39:23.350

我会推测优化，例如缓存各种内容块，以及在字节/操作代码级别运行，而不是被浏览器重新解释。就客户端而言，它可能是 IE（尤其是 9 之前的版本）和其他一些较旧的浏览器。也可能适用于 cpu 处于 preimum 并且一些额外的 HTML 来自网络的各种移动设备，而不是等待 cpu 可以运行所有的 javascript。

当然，这也意味着渲染的 html 更难抓取，所以它可以帮助他们为想要编写脚本的人添加一点路障来玩转 twitter 网站的外观。

# javascript - 为什么当我使用 jQuery 为框设置动画时 CSS3 框阴影分离？

> ID：11767673
> 
> 赞同：0
> 
> 时间：2012-08-01T21:12:57.800
> 
> 标签：javascript, jquery, css

我有一个带有盒子阴影的图像，但是当我为它设置动画时，盒子阴影似乎有了自己的生命，如下所示：

[例子](http://tempesthostingservices.com/t/index.html)

它在 chrome、firefox 和 IE 中以相同的方式发生。我很困惑，更重要的是不知道如何修复它，让它看起来很漂亮。

感谢您提供有关解决此问题或发生此问题的任何想法或答案。

html/js:

```
 <div id="sliderPane">
                <div id="slider0" class="slider"><img src="1.jpg"/></div>
                <div id="slider1" class="slider"><img src="2.jpg"/></div>
                <div id="slider2" class="slider"><img src="3.jpg"/></div>
                <div id="numSliders">3</div>
            </div>
            <script type="text/javascript">

                var numsliders;
                var currentSlider = 0;
                var interval;
                var slideWidth;

                $('#slider0').css('opacity',1);
                $(document).ready(function(){
                    numsliders = parseInt( $('#numSliders').html() );
                    $('#slider0').css('left', '62px');
                    $('#slider0').css('height', '200px');
                    $('#slider0').css('width', '200px');
                    $('#slider0').css('top', '20px');
                    $('#slider0').css('opacity', '1');
                    slideWidth = $('#slider0').width();
                });

                interval = window.setInterval(nextSlider, 5000);

                function nextSlider() {
                    specificSlider((currentSlider + 1)%numsliders);
                }

                function specificSlider(sliderNumber){
                    //alert('oldslide: ' + currentSlider + " new sloide: " + sliderNumber);
                    window.clearInterval(interval);
                    // move the next slider on deck
                    $('#slider' + sliderNumber).css('left', $('#sliderPane').css('width'));
                    $('#slider' + sliderNumber).css('top', '70px');
                    $('#slider' + sliderNumber).css('hieght', '100px');
                    $('#slider' + sliderNumber).css('width', '100px');
                    //alert('lol');
                    // move old slide off, 
                    $('#slider' + currentSlider).animate({
                     left: '-80px',
                     top: '50px',
                     hieght: '100px',
                     width: '100px',
                     opacity: 0
                    },900,null);
                    // new slide on
                    $('#slider' + sliderNumber).animate({
                     left: ($('#sliderPane').width() / 2 - slideWidth / 2) + 'px',
                     height: '200px',
                     width: '200px',
                     top: '20px',
                     opacity: 1
                    },900,null);

                    currentSlider = sliderNumber;

                    interval = window.setInterval(nextSlider, 5000);
                }

            </script> 
```

CSS：

```
#sliderPane{
    height: 200px;
    position: relative;
    overflow: hidden;
    background-image: url('sliderBG.png');
    background-size: 100% 100%;
    padding: 20px 0;
}

.slider{
    position: absolute;
    opacity: 0;
    top: -300px;
    box-shadow: 2px 2px 10px 5px rgba(0,0,0,.4);
}

#numSliders{
    visibility: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:25:31.730

为了让您接受答案：

```
 <div id="sliderPane">
            <div id="slider0" class="slider"><img src="1.jpg"/></div>
            <div id="slider1" class="slider"><img src="2.jpg"/></div>
            <div id="slider2" class="slider"><img src="3.jpg"/></div>
            <div id="numSliders">3</div>
        </div>
        <script type="text/javascript">

            var numsliders;
            var currentSlider = 0;
            var interval;
            var slideWidth;

            $('#slider0').css('opacity',1);
            $(document).ready(function(){
                numsliders = parseInt( $('#numSliders').html() );
                $('#slider0').css('left', '62px');
                $('#slider0').css('height', '200px');
                $('#slider0').css('width', '200px');
                $('#slider0').css('top', '20px');
                $('#slider0').css('opacity', '1');
                slideWidth = $('#slider0').width();
            });

            interval = window.setInterval(nextSlider, 5000);

            function nextSlider() {
                specificSlider((currentSlider + 1)%numsliders);
            }

            function specificSlider(sliderNumber){
                //alert('oldslide: ' + currentSlider + " new sloide: " + sliderNumber);
                window.clearInterval(interval);
                // move the next slider on deck
                $('#slider' + sliderNumber).css('left', $('#sliderPane').css('width'));
                $('#slider' + sliderNumber).css('top', '70px');
                $('#slider' + sliderNumber).css('height', '100px');
                $('#slider' + sliderNumber).css('width', '100px');
                //alert('lol');
                // move old slide off, 
                $('#slider' + currentSlider).animate({
                 left: '-80px',
                 top: '50px',
                 height: '100px',
                 width: '100px',
                 opacity: 0
                },900,null);
                // new slide on
                $('#slider' + sliderNumber).animate({
                 left: ($('#sliderPane').width() / 2 - slideWidth / 2) + 'px',
                 height: '200px',
                 width: '200px',
                 top: '20px',
                 opacity: 1
                },900,null);

                currentSlider = sliderNumber;

                interval = window.setInterval(nextSlider, 5000);
            }

        </script> 
```

# c# - 动态禁用对 asp.net 控件的验证

> ID：11767680
> 
> 赞同：1
> 
> 时间：2012-08-01T21:13:47.843
> 
> 标签：c#, jquery, asp.net, validation

根据用户填写表单时的响应，可能需要也可能不需要控件。所有这些控件都附加了验证。例如，如果用户没有在他们的地址居住至少 2 年，我需要验证以前的地址信息；如果没有，我需要跳过该验证。

我尝试使用 jQuery 禁用验证器控件，尽管当验证文本“变灰”时，它仍然会导致验证。

```
<script src="../../Scripts/jquery-1.6.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#ddlSpouseData').change(
            function () {
                var selection = $('#<%= ddlAddressData.ClientID%>').get(0).selectedIndex;
                if (selection == 1) {
                    alert(selection);
                    $('#rfvAddressType').attr('disabled', 'disabled');
                    $('#rfvBAddress').attr('disabled', 'disabled');
                }

            });
    });
</script>

       <table id="MyTable" class="tableModule">
           <tr>
                <td class="tableDataBorder">
                    Data is not available and<br /> will be provided later.
                </td>
                <td class="tableDataBorder">
                    <asp:DropDownList ID="ddlAddressData" runat="server">
                        <asp:ListItem>Please Select</asp:ListItem>
                        <asp:ListItem>Yes</asp:ListItem>
                        <asp:ListItem>No</asp:ListItem>
                    </asp:DropDownList>
                </td>
            </tr>
            <tr class="hideRow">
                <td class="tableDataBorder">
                    Identifying Document
                </td>
                <td class="tableDataBorder">
                    <asp:DropDownList ID="ddlAddressType" runat="server">
                        <asp:ListItem>Please Select</asp:ListItem>
                        <asp:ListItem>Home</asp:ListItem>
                        <asp:ListItem>Office</asp:ListItem>
                        <asp:ListItem>Other</asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="rfvAddressType" CssClass="regexError" ControlToValidate="ddlAddressType"
                        runat="server" ErrorMessage="Please select address type" Display="Dynamic"
                        InitialValue="Please Select"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr class="hideRow">
                <td class="tableDataBorder">
                   Address
                </td>
                <td>
                    <asp:TextBox ID="txtAddress" MaxLength="50" runat="server" CssClass="StdTxtBox"></asp:TextBox><br />
                    <asp:RequiredFieldValidator ID="rfvBAddress" CssClass="regexError" ControlToValidate="txtAddress"
                        runat="server" ErrorMessage="Please enter your address" Display="Dynamic"></asp:RequiredFieldValidator>
                </td>
            </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:38:30.360

而不是您的**RequiredFieldValidator**，而是使用**CustomValidator**。

因此，例如，您可以按如下方式更改***“rfvAddressType” requiredfieldvalidator：***

```
<asp:CustomValidator runat="server" 
     id="valAddressType" 
     controltovalidate="ddlAddressType" 
     onservervalidate="cusCustom_ServerValidate" 
     errormessage="Please select address type" /> 
```

然后在服务器代码上：

```
protected void cusCustom_ServerValidate(object sender, ServerValidateEventArgs e)
{
        if (ddlAddressType.SelectedItem.Value == "1")             
            e.IsValid = false; // or do any additional validation checks here!    
        else            
            e.IsValid = true;   
} 
```

更多细节在这里：

*   [http://asp.net-tutorials.com/validation/custom-validator/](http://asp.net-tutorials.com/validation/custom-validator/)
*   [http://www.4guysfromrolla.com/articles/073102-1.aspx](http://www.4guysfromrolla.com/articles/073102-1.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T21:25:45.820

尝试在运行时禁用或启用验证器以实现您想要的功能。你可以试试这段代码。我没有测试过。

```
//Syntax:
ValidatorEnable(ValidatorContronName,Boolean);
//Explanation:ValidatorContronName - This is ClientID of the Validation control.
Boolean - true(Enable) / false(Disable)
//Example:
ValidatorEnable(document.getElementById('<%=rfvAddressType.ClientID%>'), false); 
```

# unix - 在 UNIX Shell 脚本中传递自定义参数

> ID：11767683
> 
> 赞同：0
> 
> 时间：2012-08-01T21:13:58.330
> 
> 标签：unix

我有名为“国家”和“城市”的参数

运行脚本的常用方法是 **Script.ksh "India" "Mumbai".. ..它会运行正常。**

但是，我的要求是......我想将此脚本作为 **Script.ksh -Country "India" -City "Delhi"运行**

任何人请让我摆脱这个

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:42:29.133

使用示例：

```
#!/bin/sh

setopt() {
  if [ -n "$1" -a -n "$2" ]; then
    optname=opt_${1#--}
    optval="\"$2\""
    eval $optname="$optval"
    shift
    shift
    setopt "$@"
  fi
}

eval setopt $(getopt -a -l city:,country: -o "" -- "$@")

echo "City is ${opt_city}"
echo "Country is ${opt_country}" 
```

您可以在不使用 getopt 的情况下使用相同的技术，但 getopt 具有标准化名称和识别缩写的额外好处（至少 GNU getopt 可以）。

```
$ ./opttest -city "New Delhi" -country India
City is New Delhi
Country is India

$ ./opttest -ci "New Delhi" -co India
City is New Delhi
Country is India 
```

# javascript - 将 URL 转换为具有相同的输出

> ID：11767684
> 
> 赞同：0
> 
> 时间：2012-08-01T21:14:13.523
> 
> 标签：javascript, forms, jsp, url, post

我们有一个 URL：[http](http://example.com/index.jsp?hello=1&bye=0) ://example.com/index.jsp?hello=1&bye =0 其中“1”和“0”是参数的值

如何使用表单 POST 方法和 javascript将 URL 转换为[http://example.com/index.jsp/1/0 ？](http://example.com/index.jsp/1/0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:26:46.130

网址重写是您正在寻找的。

[这](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)， [这](https://stackoverflow.com/questions/1563799/how-to-rewrite-url-in-tomcat-6)或[这](https://stackoverflow.com/questions/3528303/clean-urls-using-jsp-servlets)可能会帮助你。

# .htaccess - .htaccess 仅在找不到文件且只有一个 /directory 时才重写规则

> ID：11767687
> 
> 赞同：1
> 
> 时间：2012-08-01T21:14:34.333
> 
> 标签：.htaccess

这是我的 .htaccess 文件的摘录：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /a/?s=$1 [L,QSA] 
```

我希望它仅适用于站点根目录 /something /whatever /example 等，而不适用于 /something/a 或 /whatever/b

如何添加此额外规则以使其更精确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:17:12.087

尝试将表达式从 更改`^(.*)$`为`^([^/]+)/?$`，这意味着：整个事物不得包含 a `/`，除非它位于末尾。请注意，当您在 htaccess 文件中匹配 URI 时，它的前导斜杠会被去除。

# jquery - JQuery AJAX POST 消息问题

> ID：11767692
> 
> 赞同：0
> 
> 时间：2012-08-01T21:15:00.527
> 
> 标签：jquery

我正在做一个 AJAX POST 调用，它工作正常，除了一件事。提交后，我收到成功/失败消息，但是当我再次单击提交时，它会显示另一条成功/失败消息，而不会清除第一个消息。它不断添加一个新的。我怎样才能让它为每个提交只显示一个？

```
var pageUrl = '<%=ResolveUrl("~/Default.aspx")%>'

        $(".ap-webmethod").click(function () {

            if ($('#aspnetForm').valid()) {
                $.ajax({
                    type: "POST",
                    url: pageUrl + '/ProcessADRequest',
                    data: '{USER: "' + $("[id$='_userName']").text() + '", SSNID: "' + $("[id$='_empLast4Txt']").val() + '", DOB: "' + $("[id$='_empDobTxt']").val() + '"}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) { $('.post-msg').append("<label>" + response.d + "</label>"); },
                    failure: function (response) { $('.post-msg').append("<label>" + response.d + "</label>"); }

                });

                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:17:37.557

您在需要使用`append(...)`的地方使用`val(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:33:42.790

您必须先使用删除旧消息`$('.post-msg').remove()`。我会做这样的事情：

```
 $.ajax({
                type: "POST",
                url: pageUrl + '/ProcessADRequest',
                data: '{USER: "' + $("[id$='_userName']").text() + '", SSNID: "' + $("[id$='_empLast4Txt']").val() + '", DOB: "' + $("[id$='_empDobTxt']").val() + '"}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) 
                { 
                    $('.post-msg').remove('.msg'); 
                    $('.post-msg').append("<label class='msg'>" + response.d + "</label>");         
                },
                failure: function (response) 
                { 
                    $('.post-msg').remove('.msg'); 
                    $('.post-msg').append("<label class='msg'>" + response.d + "</label>"); 
                }

            }); 
```

# ios - MPMoviePlayerController 中断 AirPlay iPod 音频，但在设备上工作正常

> ID：11767693
> 
> 赞同：3
> 
> 时间：2012-08-01T21:15:03.057
> 
> 标签：ios, audio, video, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 播放循环播放的视频剪辑。在应用程序委托中，我将 AVAudioSession 的类别设置为*AVAudioSessionCategoryAmbient*，这样我的视频剪辑就不会中断 iPod 音频。

这在设备上播放 iPod 音频时效果很好，但是在使用 AirPlay 时，每次我的循环视频重新开始时，音频都会短暂中断，这非常频繁（而且很烦人）。

在 AppDelegate.m 中：

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:@"AVAudioSessionCategoryAmbient" error:nil]; 
```

在我的视频视图控制器中：

```
self.videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
self.videoPlayer.useApplicationAudioSession = YES;
self.videoPlayer.controlStyle = MPMovieControlStyleNone;
self.videoPlayer.repeatMode = MPMovieRepeatModeOne; 
```

我搜遍了网络，似乎无法找到答案。任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:02:18.520

问题解决了！我只需要使用 AVPlayer 而不是 MPMoviePlayerController。

```
self.avPlayer = [AVPlayer playerWithURL:url];
self.avPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;

self.avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:self.avPlayer];
self.avPlayerLayer.frame = self.view.bounds;

[self.view.layer addSublayer:self.avPlayerLayer];
[self.avPlayer play]; 
```

并使其循环：

```
[[NSNotificationCenter defaultCenter] addObserver:self
   selector:@selector(movieDidFinish:)
   name:AVPlayerItemDidPlayToEndTimeNotification
   object:[self.avPlayer currentItem]]; 
```

...

```
- (void)movieDidFinish:(NSNotification *)notification {
   [self.avPlayer seekToTime:kCMTimeZero];
} 
```

# ios - Apple 会接受需要密码或 PIN 码才能使用的应用程序吗？

> ID：11767701
> 
> 赞同：1
> 
> 时间：2012-08-01T21:16:13.523
> 
> 标签：ios, appstore-approval

我正在开发一个 iOS 应用程序，并希望让选定的非技术用户组能够轻松快速下载并试用它。我不会提前获得他们的 UDID，TestFlight 也不是一个可行的选择，因为设置时间太长。我的公司也不够大，无法获得企业选项的资格。

我想知道的是：我可以向Apple提交一个要求用户在启动时输入代码的应用程序吗？然后我可以简单地将该代码提供给我的演示用户（并提供给 Apple 进行审查）并将其提交给商店。或者苹果会拒绝这样的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:25:54.563

输入 PIN 码不是问题（许多应用程序使用 PIN 码来保护用户自己的数据，例如密码库），但似乎如果目的是限制应用程序的受众，那可能违反[应用商店指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)第 2.22 节。

如果目的是为有限数量的用户进行测试，您可以只进行[临时](https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html#//apple_ref/doc/uid/TP40011159-CH31-SW3)分发吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:50:35.460

为了向客户展示我们的应用程序，我的公司使用我们的[iOS 企业帐户](https://developer.apple.com/programs/ios/enterprise/)。使用该帐户（每年花费 299 美元而不是每年 99 美元），我们可以制作可以通过我们自己的受限渠道而不是 App Store 分发的构建。这些构建使用**Enterprise Distribution 配置文件**进行签名，不需要指定将使用哪些设备。

之后，我们只是限制谁有权下载我们的应用程序。我们为此使用[Testflight](http://testflightapp.com/dashboard/)。它使我们能够上传我们配置的应用程序，并允许我们邀请特定用户下载该应用程序。即使对于我们的非技术客户来说，下载应用程序的过程也很简单。

但是由于您说您不想使用 Testflight，您可以分发您的企业应用程序，但您认为最简单。

# actionscript-3 - 如何在 Flash CS 5/6 中更改测试电影窗口大小？

> ID：11767706
> 
> 赞同：0
> 
> 时间：2012-08-01T21:16:35.380
> 
> 标签：actionscript-3, flash-cs5

我一直在使用大小为 1152x1536 的舞台，当我测试电影时，它以全分辨率显示。有什么方法可以更改 Flash CS 5/6 中的测试影片窗口大小？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:05:26.197

如果您转到 FLA 文件的根/阶段并单击影片剪辑，则通过更改影片剪辑的属性来设置它的大小。

如果您想更改舞台的大小，请转到根目录，然后单击任何内容，这样您就可以在属性窗口中获得另一个选项，您可以在其中设置舞台大小（也可以从发布设置中获得）。

如果您只想调整 SWF 的大小，则必须启动它，然后调整窗口大小。通过 html 启动时也可以这样做，并根据需要允许缩放和设置大小。

# python - 将脚本添加到 build.gradle

> ID：11767713
> 
> 赞同：19
> 
> 时间：2012-08-01T21:16:59.200
> 
> 标签：python, groovy, build, gradle

我有一个`build.gradle`文件。我需要添加一个代码来执行我编写的 python 脚本。谁能告诉我该怎么做？`build.gradle`是用 groovy 编写的。所以，如果你觉得我的问题还不够，请多问。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-01T21:39:13.157

看一下[Exec](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Exec.html)任务。它可用于运行命令行进程。

您可以创建如下任务：

```
task runPython(type:Exec) {
   workingDir 'path_to_script'

   commandLine 'python', 'my_script.py'
} 
```

# asp.net-mvc-3 - 如何使用 Razor 显示条件纯文本

> ID：11767723
> 
> 赞同：9
> 
> 时间：2012-08-01T21:17:48.873
> 
> 标签：asp.net-mvc-3, razor

我在 else 块中显示（而不是显示）纯文本时遇到问题。

```
if (Model.CareerFields != null && ViewBag.CFCount > 0)
{
<h3>Careerfields Listing</h3>

<table>
   <tr>
      <th></th>
      <th>Careerfield Name</th>
   </tr>

   @foreach (var item in Model.CareerFields)
   {
       <tr>
       <td>
          @Html.ActionLink("Select", "Index", new { careerFieldID = item.CareerFieldId })
       </td>
       <td>
          @item.CareerFieldName
       </td>
       </tr>
   }
   </table>
}
else
{
  No Careerfields associated with @ViewBag.SelectedDivisionTitle
} 
```

if 块工作正常。文本仅在 true 时呈现。但是，else 块文本会在页面加载时呈现，而不是仅在其评估为 false 时呈现。

我试过使用

```
Hmtl.Raw("No Careerfields associated with ")
<text>No Careerfields associated with @ViewBag.SelectedDivisionTitle</text>
@:No Careerfields associated with @ViewBag.SelectedDivisionTitle 
```

但它仍然在评估之前呈现明文。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:21:19.147

将您的“纯文本”放在裸`<span>`标签中：

```
else
{
  <span>No Careerfields associated with @ViewBag.SelectedDivisionTitle</span>
} 
```

浏览器不应该将它呈现为特殊的（除非你有 css 选择每个跨度），它会帮助剃刀感知 C# 的结尾并打印你的 HTML。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-16T10:08:56.077

以下代码对我来说非常有效：

```
@if (false) {
    <h3>
        Careerfields Listing
    </h3>
    <table>
        <tr>
            <th>
            </th>
            <th>
                Careerfield Name
            </th>
        </tr>
    </table>
}
else 
{ 
    @:No Careerfields associated with @ViewBag.SelectedDivisionTitle
} 
```

您可以看到，当您将条件更改为**true时，会呈现****if**的内容。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T10:31:32.103

看起来你忘记了陈述`@`前的标志。`if`尝试这个：

```
@if (Model.CareerFields != null && ViewBag.CFCount > 0)
{
    <h3>Careerfields Listing</h3>

    <table>
        <tr>
            <th></th>
            <th>Careerfield Name</th>
        </tr>

        @foreach (var item in Model.CareerFields)
        {
            <tr>
                <td>
                    @Html.ActionLink("Select", "Index", new { careerFieldID = item.CareerFieldId })
                </td>
                <td>@item.CareerFieldName</td>
            </tr>
        }
    </table>
}
else
{
    <text>No Careerfields associated with @ViewBag.SelectedDivisionTitle</text>
} 
```**

# objective-c - 用于 Objective-C 的 CoffeScript'esque 语言？

> ID：11767724
> 
> 赞同：13
> 
> 时间：2012-08-01T21:17:55.973
> 
> 标签：objective-c, cocoa, compiler-construction, coffeescript, uos

[看到使用Xtend](http://www.eclipse.org/xtend/)和[Mirah](http://www.mirah.org)为 Java 所做的一切，我不禁想到有人一定在玩类似 Objective-C 甚至 C 和 C++ 的东西。

经过一番搜索，我想出了零。有人知道像 Objective-C 实现这样的 CoffeeScript 吗？

更新：到目前为止，从提交答案的两个人那里得到了很好的输入，但是根据 CoffeScript 的工作原理，拥有一种直接编译为 Obj-C 的中间语言不是更好（意识到这有点主观）吗？现在，我不是要求 CoffeeScript 提醒您，而是一些不直接编译的语言，而是为您提供语法上更具可读性的顶层 Xtend。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T00:32:48.287

是的：[Eero](http://eerolanguage.org/)为 Objective-C 提供了一种类似于 Python 的语法，使用[clang](http://clang.llvm.org)的修改版本实现。（不过，我还没有尝试过使用它，所以我无法评论它的用处！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:23:56.750

[MacRuby](http://macruby.org/)和[RubyMotion](http://www.rubymotion.com/)让您可以（分别）用纯 Ruby 编写 Mac 和 iOS 应用程序。CoffeeScript 非常受 Ruby 启发，所以如果你喜欢这种语言，我想你会对 Ruby 感到宾至如归:)

此外，据我了解，MacRuby 和 RubyMotion 都很好地与原生环境集成；它们不在 Mac/iOS 之上的单独 Ruby VM 上运行，因此不会有很大的性能损失，而且原生的东西也不是那么遥远。因此，从这个意义上说，我认为它们与 JVM 的 Mirah 相比更类似于 JRuby 或 Jython。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T20:31:02.290

[这个项目](http://under-os.com)实际上最终编译了 Ruby -> 本机代码，从而使通过 Ruby 编写 iOS 应用程序成为可能。它被称为 UnderOS（uOS - 因为根据作者的说法，它都是关于“u”的；））如果你想用 Ruby 进行 iOS 开发，它是我找到的最好的解决方案： [https ://github.com/under-操作系统/下操作系统](https://github.com/under-os/under-os)

构建计算应用程序的示例：http: [//vimeo.com/81919125](http://vimeo.com/81919125)

![在此处输入图像描述](../Images/309236084f2f42c67611447571875d5f.png)

# sql - 触发器定义中的 DELETE 语句问题

> ID：11767725
> 
> 赞同：2
> 
> 时间：2012-08-01T21:18:00.030
> 
> 标签：sql, sql-server, triggers, sql-delete

我创建了一个插入/更新触发器，旨在根据插入的数据更新不同表中的信息。触发器做（或应该做）的最后一件事是从目标表中删除所有数据，这些数据在触发器的插入部分期间可能已更改的条件。

`DELETE`除了最后的语句之外，一切似乎都在使用触发器。它正在执行`DELETE`语句，但不遵循 where 子句中的任何条件。它只是删除表中的所有内容。

我什至尝试将`NOT IN`where 子句中的 更改为`IN`，它仍然是一样的。我已经隔离了该`DELETE`语句并在触发器之外进行了测试，它工作正常（使用相同的变量和子查询）。

我错过了触发器的行为吗？

代码如下：

```
ALTER TRIGGER [dbo].[cust_trgr_profile_attribute] 
ON [dbo].[port_module_instance_setting]      
AFTER INSERT, UPDATE
AS

DECLARE @ModuleId INT=449,
        @MatchGroupModSetting VARCHAR(50) = 'AttributeGroup',
        @FilterGroupModSetting VARCHAR(50) = 'FilterAttributeGroup',
        @MatchAttributes TABLE (attribute_id INT),
        @FilterAttributes TABLE (attribute_id INT)

INSERT INTO @MatchAttributes
  SELECT DISTINCT camatch.attribute_id 
  FROM inserted I
  JOIN core_attribute camatch ON I.value = CONVERT(VARCHAR(10), camatch.attribute_group_id)
  JOIN port_module_instance pmi ON I.module_instance_id = pmi.module_instance_id
       AND pmi.module_id=@ModuleId
  WHERE I.name like @MatchGroupModSetting+'_'

INSERT INTO @FilterAttributes
  SELECT DISTINCT cafilter.attribute_id 
  FROM inserted I
  JOIN core_attribute cafilter ON I.value = CONVERT(VARCHAR(10), cafilter.attribute_group_id)
  JOIN port_module_instance pmi ON I.module_instance_id = pmi.module_instance_id
       AND pmi.module_id=@ModuleId
  WHERE I.name=@FilterGroupModSetting

IF ((SELECT COUNT(*) FROM @MatchAttributes) > 0 OR (SELECT COUNT(*) FROM @FilterAttributes) > 0)
BEGIN
    IF (SELECT COUNT(*) FROM @MatchAttributes) > 0
    BEGIN
        UPDATE cpa 
           SET cpa.[required]=0
          FROM cust_profile_attribute cpa
          JOIN @MatchAttributes ma ON cpa.attribute_id = ma.attribute_id
    END

    IF (SELECT COUNT(*) FROM @FilterAttributes) > 0
    BEGIN
        UPDATE cpa 
           SET cpa.[required]=0
          FROM cust_profile_attribute cpa
          JOIN @FilterAttributes fa ON cpa.attribute_id=fa.attribute_id
    END

    DELETE FROM cust_profile_attribute
    WHERE attribute_id NOT IN (SELECT distinct ca.attribute_id 
                               FROM core_attribute ca
                               JOIN port_module_instance_setting inst ON CONVERT(VARCHAR(10),ca.attribute_group_id) = inst.value
                               JOIN port_module_instance modinst ON inst.module_instance_id = modinst.module_instance_id
                                    AND modinst.module_id = @ModuleId
                               WHERE inst.name like @MatchGroupModSetting + '_'
                               OR inst.name like @FilterGroupModSetting)
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:48:37.037

我发现触发器工作原理的基本逻辑存在缺陷。我现在已经完善了对正在发生的事情的理解，并且能够阐明更多信息以供他人帮助。与其尝试完全改变原始帖子，我认为最好在此处发布新信息。

基本思想是`port_module_instance_setting`表在 中存储一个字符串，表示一个设置（在这种特定情况下，设置条件以使该`value`字段始终为数字）。我想要完成的是，当在`value`这些特定“设置”之一中更新该字段 时`cust_profile_attribute`，旧表中引用的所有内容`value`都会被删除。在这种情况下，`value`字段 of`port_module_instance_setting`是直接引用`attribute_group_id`of的数字 varchar 值`core_attribute`。请不要评论有关使用不同数据类型引用表的最佳实践，因为我无法控制实际的表结构:) 触发器中的所有内容都正常运行，除了`DELETE`最后声明。它什么也没做。关于它为什么不删除我想要的属性的任何想法？

我已将`DELETE`语句更改如下以引用预先更新的`value`字段。

```
DELETE FROM cust_profile_attribute
WHERE attribute_id IN(SELECT ISNULL(attribute_id,-1) FROM deleted d
                      JOIN core_attribute ca ON ca.attribute_group_id= CONVERT(INT,d.value)) 
```

# ruby-on-rails - google-charts-on-rails

> ID：11767726
> 
> 赞同：0
> 
> 时间：2012-08-01T21:18:00.183
> 
> 标签：ruby-on-rails, google-visualization, nameerror

您好，我一直在阅读有关如何使用 google-charts-on-rails 制作图表的信息，我已经安装了插件，但我不知道为什么会显示此错误：

```
NameError in TankingLogsController#index

uninitialized constant TankingLogsController::GoogleChart 
```

这是我的 indes.html.erb

```
<div class="container">
 <%= image_tag @bar %>

  <h1>Listing Tankings</h1>
  <% if @tankinglog.count<1 %>
    <p>
    There are no tankings for this car. Do you want to <%= link_to 'create a new tanking', new_user_car_tanking_log_path(@user, @car)%>
    </p>
  <% else %>
    <table class="table table-condensed">
      <tr>
        <th>Cost</th>
        <th>Gallon</th>
        <th>Km</th>
        <th>Date</th>
        <th>Gas Station's id</th>
        <th></th>
      </tr>
      <% @tankinglog.each do |tankinglog| %>
        <tr>
          <td><%= tankinglog.cost %></td>
          <td><%= tankinglog.gallon %></td>
          <td><%= tankinglog.km %></td>
          <td><%= tankinglog.date %></td>
          <td><%= tankinglog.gas_station_id %></td>
        </tr>
      <% end %>
    </table>
    <br />
    <%= link_to 'New tanking', new_user_car_tanking_log_path(@user, @car), :class => "btn btn-primary" %>
  <% end %>
  <br />
  <br />
  <%= link_to 'back', user_cars_path(current_user), :class => "btn btn-primary" %>
  </div> 
```

这是我的控制器

```
class TankingLogsController < ApplicationController

....

  def index
    @user = User.find(params[:user_id]) 
    @car = @user.cars.find(params[:car_id])    
    @tankinglog = @car.tanking_logs.all
    @bar = GoogleChart.pie(['1997',10],['1998',20],['1999',40],['2000',30]).to_url
  end
end 
```

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'pg', '0.13.2'
gem 'devise', '2.0.4'
gem 'haml-rails'
gem 'twitter-bootstrap-rails', '2.0.6'
gem 'sass-rails',   '~> 3.2.3'
gem "rspec", "~> 2.10.0"
gem 'simplecov', :require => false, :group => :test
gem 'gchart' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:21:34.787

我通过重启服务器解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:28:59.813

您应该确保 gem 在您的 Gemfile 中：

```
gem 'google-charts-on-rails' 
```

否则，即使您在系统上安装了 gem，应用程序也不会使用 gem。

# php - 如何替换文本中的 youtube url？

> ID：11767727
> 
> 赞同：3
> 
> 时间：2012-08-01T21:18:04.733
> 
> 标签：php

我有以下文字

```
"I made this video on my birthday. All of my friends are here in party. Click play to video the video
 http://www.youtube.com/watch?v=G3j6avmJU48&feature=g-all-xit " 
```

我想要的是将上面的网址替换为

```
"I made this video on my birthday. All of my friends are here in party. Click play to video the video

      <iframe width="853" height="480" src="http://www.youtube.com/embed/G3j6avmJU48" frameborder="0" allowfullscreen></iframe> " 
```

我知道我们可以在以下脚本中从上面的 url 获取 youtube 视频 ID

```
 preg_match("#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+(?=\?)|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#", $word, $matches);

        $youtube_id = $matches[0]; 
```

但我不知道如何替换网址

```
http://www.youtube.com/watch?v=G3j6avmJU48&feature=g-all-xit 
```

到

```
 <iframe width="853" height="480" src="http://www.youtube.com/embed/G3j6avmJU48" frameborder="0" allowfullscreen></iframe> 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:22:53.697

使用 preg_replace 函数（[参见 PHP preg_replace() 文档](http://php.net/manual/en/function.preg-replace.php)）

**编辑 ：**

使用 preg_replace 如下：您使用括号 () 将要捕获的内容包装在正则表达式（第一个参数）中，然后在第二个参数中使用 $n（正则表达式中的括号顺序）来获取您捕获的内容.

在你的情况下，你应该有这样的东西：

```
$text = "I made this video on my birthday. All of my friends are here in party. Click play to video the video http://www.youtube.com/watch?v=G3j6avmJU48&feature=g-all-xit";

$replaced = preg_replace('#http://www\.youtube\.com/watch\?v=(\w+)[^\s]+#i','<iframe width="853" height="480" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>',$text); 
```

有关更高级的用法和示例，请参阅我之前为您提供的文档链接。

希望这对您有更多帮助。

**编辑2：** 正则表达式错误，我修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:43:23.060

您可以使用此示例代码来实现它，基于@Matt 评论：

```
<?php
$text = "I made this video on my birthday. All of my friends are here in party. Click play to video the video
 http://www.youtube.com/watch?v=G3j6avmJU48&feature=g-all-xit ";

$rexProtocol = '(https?://)?';
$rexDomain   = '(www\.youtube\.com)';
$rexPort     = '(:[0-9]{1,5})?';
$rexPath     = '(/[!$-/0-9:;=@_\':;!a-zA-Z\x7f-\xff]*?)?';
$rexQuery    = '(\?[!$-/0-9:;=@_\':;!a-zA-Z\x7f-\xff]+?)?';
$rexFragment = '(#[!$-/0-9:;=@_\':;!a-zA-Z\x7f-\xff]+?)?';

function callback($match)
{
    $completeUrl = $match[1] ? $match[0] : "http://{$match[0]}";
    $videoId = array ();
    preg_match ("|\?v=([a-zA-Z0-9]*)|", $match[5], $videoId);

    return '<iframe src="http://www.youtube.com/embed/' . $videoId[1] . '" width="853" height="480"></iframe>';
}
print preg_replace_callback("&\\b$rexProtocol$rexDomain$rexPort$rexPath$rexQuery$rexFragment(?=[?.!,;:\"]?(\s|$))&", 'callback', htmlspecialchars($text));

?> 
```

# php - 如果 call_user_func 应该返回 false 怎么办？

> ID：11767728
> 
> 赞同：6
> 
> 时间：2012-08-01T21:18:07.917
> 
> 标签：php

我调用的函数`call_user_func`应该返回 FALSE。那么如果可调用对象无效，我该如何检测错误呢？

（旁注：为什么他们没有抛出异常而不是返回错误代码？或者有没有办法“捕捉”错误？我有一个错误句柄。我应该让它为我抛出异常吗？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:36:46.750

如果要检查要调用的函数或方法是否真的存在，可以[`is_callable`](http://www.php.net/manual/en/function.is-callable.php)在调用前使用[`call_user_func`](http://se.php.net/call_user_func)。您可以将整个内容包装在一个函数中以便于重用：

```
function call_uf($fn) {
    if(is_callable($fn)) {
        return call_user_func($fn);
    } else {
        throw new Exception("$fn is not callable");
    }
} 
```

您在评论中询问了为什么 PHP 会引发错误而不是使用异常。我认为这是因为异常只在 PHP5 中引入，所以大多数 PHP 函数都依赖于错误报告。[正如手册](http://www.php.net/manual/en/language.exceptions.php)所示，似乎有办法解决这个问题：

> 内部 PHP 函数主要使用[错误报告](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)，只有现代[面向对象的](http://www.php.net/manual/en/language.oop5.php)扩展使用异常。但是，可以使用[ErrorException](http://www.php.net/manual/en/class.errorexception.php)将错误简单地转换为异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:50:17.223

他们没有抛出异常，因为他们需要保持这个函数向后兼容。在旧的 PHP 版本中没有例外，PHP < 5。

布尔返回类型为函数失败报告“保留”。你需要做的是找出函数失败的原因。我想它失败的唯一原因是无效的论点。

也许将它包装在一个安全的电话中会做你想做的事：

```
function safe_call_user_func()
{
  $nargs = func_num_args();
  $args = func_get_args();
  if ( $nargs == 0 )
    throw new RuntimeException( 'Require at least the callback param' );
  if ( !is_callable( $args[0] )
    throw new InvalidArgumentException( 'Callback param is invalid' );
  return call_user_func_array( array_shift( $args ), $args );
} 
```

# asp.net-mvc-3 - 如何仅在摘要或 div 中显示 MVC 3 不显眼的验证错误

> ID：11767729
> 
> 赞同：1
> 
> 时间：2012-08-01T21:18:20.807
> 
> 标签：asp.net-mvc-3, razor, unobtrusive-validation

该项目是 MVC 3，带有 Razor 视图和 JQuery 不显眼的验证。我们的网页在文本框上方设置标签，验证消息位于文本框下方。通常文本框的宽度约为 150 像素，因此验证消息往往相当窄且高。它看起来不太好。

我更喜欢使用 Html.ValidationMessageFor 帮助器将所有消息放在页面顶部，最好放在项目符号列表中。我还没有找到一种方法来“关闭”文本框旁边的消息显示，尽管我可以使用验证摘要来捕获提交时的属性错误。

许多验证发生在弹出窗口中，我们使用 Telerik 作为弹出窗口。

如果可能的话，我宁愿避免编辑开源 js 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:21:47.323

删除`Html.ValidationMessageFor()` 视图中的项目 => 这将禁用文本框旁边显示的消息。

接下来，`Html.ValidationSummary(false, "Your Message")`在您希望项目符号列表出现的位置添加（必须在`using(html.BeginForm()`调用中）。此 Html Helper 中的 false 是指示摘要不排除属性错误的重载。对于样式，您需要做一些 CSS 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:21:02.690

您可能想研究使用`<%: Html.ValidationSummary(true) %>`标记。这将创建您正在寻找的内容。

# php - 如何检查会话是否开启

> ID：11767730
> 
> 赞同：5
> 
> 时间：2012-08-01T21:18:33.367
> 
> 标签：php, session

PHP 中确定是否在服务器的 php.ini 文件中启用会话的最简单方法是什么。我正在为我的 PHP 应用程序进行安装前检查，只需要检查一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T21:26:25.367

```
if (!extension_loaded('session')) {
    die('You must enable PHP session support for the system to work.');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:23:21.713

您可以编写一个快速脚本：

```
<?php

// page1.php
session_start();
$_SESSION['my_index'] = "IT WORKED!"; 
```

然后，在另一个页面上：

```
<?php
// page2.php
session_start();
echo $_SESSION['my_index'];

//output: IT WORKED 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:28:24.937

```
if ( ! function_exists('session_start')) die; 
```

# php - 用 call_user_func 传递参数？

> ID：11767733
> 
> 赞同：26
> 
> 时间：2012-08-01T21:18:59.030
> 
> 标签：php

有没有办法使用 call_user_func 调用函数并传递参数？例如我有

```
function test($args)
{
    echo "I DID IT!";
} 
```

但是我不能调用这个函数，因为它有一个没有被传递的参数

```
call_user_func("test"); 
```

有没有办法调用函数并为其提供参数？（例如，传递列表参数的能力）？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-01T21:22:26.690

如果您要[阅读文档](http://php.net/manual/en/function.call-user-func.php)，您会看到它`call_user_func()`接受可变数量的参数：

```
call_user_func('test', 'argument1', 'argument2'); 
```

您也可以使用[`call_user_func_array('callback', array('array','of','arguments'))`](http://php.net/manual/en/function.call-user-func-array.php).

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-01T21:20:51.253

使用[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)，您可以提供参数列表作为数组。

# dll - Dow相同的exe适用于具有不同字节序的机器吗？

> ID：11767736
> 
> 赞同：0
> 
> 时间：2012-08-01T21:19:31.773
> 
> 标签：dll, endianness

假设我在小端机器中构建了一个可执行文件。在应用程序中，我从用户那里获取输入并将其与常数进行比较。我相信在编译过程中常量会被保存为小端。这个 exe 现在在大端机器上运行。应用程序接受用户的输入。此输入应以大端格式保存。那么比较是如何进行的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:20:56.280

程序在小端机器上编译后将无法在大端机器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:31:06.723

交叉编译器负责为目标机器生成可执行文件所必需的。如果主机恰好是小端，而目标是大端（反之亦然），那么很有可能它必须考虑到这一点。

Endianess 只是这里涉及的众多因素之一——几乎关于目标的任何事情（例如，文件格式、指令集、操作系统接口（如果有）、寄存器的数量和/或大小）都可能不同。

# android - 只要 EditText 字段不为空，如何启用微调器

> ID：11767738
> 
> 赞同：1
> 
> 时间：2012-08-01T21:19:51.527
> 
> 标签：android, android-edittext, android-spinner

我有一个 EditText 和一个 Spinner。最初 Spinner 被禁用，我希望它在 EditText 中有一些文本时启用，例如，如果我在 EditText 字段中输入一些内容，它应该被启用，并且当我擦除文本直到没有其他任何东西时 Spinner 应该去回到禁用，任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:25:08.480

`TextWatcher`在字段上使用 a`EditText`并检查`CharSequence`反对的内容`""`。如果它们相等，则禁用`Spinner`，否则启用它。

```
private Spinner mySpinner; // Of course, this has to be defined somewhere

// ...

final EditText editBox = (EditText) findViewById(<your EditText field>);
editBox.addTextChangedListener(new TextWatcher() {
    public void afterTextChanged(Editable s) {
        // Nothing
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // Nothing
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (s.toString().equals("")) {
            mySpinner.setEnabled(false);
        } else {
            mySpinner.setEnabled(true);
        }
    }
}); 
```

您可能还想`mySpinner.isEnabled()`在调用`setEnabled(...)`它之前进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:24:44.567

对 EditText 小部件使用 addTextChangedListener(TextWatcher watcher) 并检查小部件 getText() 是否不是空字符串，然后启用微调器。

# r - DDPLY 分组错误

> ID：11767739
> 
> 赞同：1
> 
> 时间：2012-08-01T21:19:52.830
> 
> 标签：r, plyr

我正在运行一个`ddply`函数并不断收到错误。

**data.frame 的结构：**

```
str(visits.by.user)
'data.frame':   80317 obs. of  5 variables:
 $ ClientID    : Factor w/ 147792 levels "50912733","50098716",..: 1 3 4 5 6 7 8 10 11 12 ...
 $ TotalVisits      : int  64 231 18 21 416 290 3 13 1 7 ...
 $ TotalDayVisits: int  8 141 0 4 240 155 0 0 0 0 ...
 $ TotalNightVisits: int  56 90 18 17 176 135 3 13 1 7 ...
 $ quintile         : Factor w/ 5 levels "0-20","20-40",..: 5 5 4 4 5 5 2 4 1 3 ... 
```

*旁注：* 我知道如何为随机数字数据创建样本数据 - 您如何应用具有 5 个级别的因子来构建具有代表性的样本？

**ddply 代码：**

```
summary.users <- ddply(data = subset(visits.by.user, TotalVisits > 0), 
                          .(quintile, TotalDayVisits, TotalNightVisits), 
                          summarize,
                          NumClients = length(ClientID)) 
```

**错误信息：**

```
Error in if (empty(.data)) return(.data) : 
 missing value where TRUE/FALSE needed 
```

我认为这可能`ddply`需要我尝试分组的变量作为一个因素，所以我尝试了`as.factor`整数变量，但没有奏效。

谁能看到我哪里出错了？

编辑：添加顶部`dput`

```
structure(list(ClientID = structure(c(1L, 2L, 3L, 4L, 5L, 6L), .Label = c("50912733", "60098716", "50087112", "94752212", "78217771", "12884545"), class = "factor"),TotalVisits = c(80L, 92L, 103L, 18L, 182L, 136L), TotalDayVisits = c(56L, 90L, 18L, 17L, 176L, 135L), TotalNightVisits = c(24L, 2L, 85L, 1L, 6L, 1L), quintile = structure(c(5L, 5L, 4L, 4L, 5L, 5L), .Label = c("0-20", "20-40", "40-60", "60-80", "80-100"), class = "factor")), .Names = c("ClientID", "TotalVisits", "TotalDayVisits", "TotalNightVisits", "quintile"), row.names = c(NA,6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:46:46.687

您的第一个参数被命名`data=`，而`ddply`第一个参数名为`.data`. 如果我改变它，你的代码运行良好。

关于我的评论，这是我认为我过去遇到过的一个问题，但似乎在机制中隐含了类似的`droplevels`调用`ddply`。我很想听听更深入的解释它是如何工作的！

```
dat <- data.frame(x=1:20, z=factor(rep(letters[1:4], each=5)))

ddply(dat, .(z), summarise, length(x))
  z ..1
1 a   5
2 b   5
3 c   5
4 d   5
ddply(subset(dat, z!='a'), .(z), summarise, length(x))
  z ..1
1 b   5
2 c   5
3 d   5 
```

这表现得很好。然而，看着因子水平让我感到惊讶：

```
ddply(subset(dat, z!='a'), .(z), summarise, paste(levels(z), collapse=' '))
  z     ..1
1 b a b c d
2 c a b c d
3 d a b c d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:34:20.977

这很好用：

```
summary.users <- ddply(subset(visits.by.user, TotalVisits > 0), 
                          .(quintile, TotalDayVisits, TotalNightVisits), 
                          summarize, NumClients = length(ClientID))

> summary.users
  quintile TotalDayVisits TotalNightVisits NumClients
1    60-80             17                1          1
2    60-80             18               85          1
3   80-100             56               24          1
4   80-100             90                2          1
5   80-100            135                1          1
6   80-100            176                6          1 
```

# php - 如果用户未登录，则重定向 PHP

> ID：11767746
> 
> 赞同：0
> 
> 时间：2012-08-01T21:20:36.563
> 
> 标签：php

我正在一个我没有建立的网站上工作。我正在尝试将 HTML 重定向放在 if 语句中，这是源代码：

```
<?php 
    if(!$usersClass->checkLoggedIn()) { 
?>
// Stuff here
<?php } else { ?>
    // More stuff here
<?php } ?> 
```

我想在这里放置一个重定向：如果用户没有登录，他们会被重定向到主页，我尝试了以下没有运气。任何人都可以看到我要去哪里错了吗？

```
<?php 

if(!$usersClass->checkLoggedIn()) { 
header("Location: /index.php");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:26:46.757

你忘了合上括号`}`

应该：

```
<?php 

if(!$usersClass->checkLoggedIn()) { 
  header("Location: /index.php");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:27:17.793

尝试给出完整的 URL，并关闭`}`括号：

```
<?php 

if(!$usersClass->checkLoggedIn()) { 
header("location: http://localhost/yoursite/index.php");
}
?> 
```

# javascript - 如何在没有 onClick 的情况下关注 Javascript 链接

> ID：11767748
> 
> 赞同：0
> 
> 时间：2012-08-01T21:20:36.313
> 
> 标签：javascript, visual-studio-2008, webbrowser-control, visual-c#-express-2010

这是我第一次发帖。我一直在开发“网络爬虫”来浏览网站并自动下载 Excel 文件或 .CSV 文件。

我想下载文件时遇到问题。这是HTML：

`<"a class="PSQRYRESULTSTITLE" href="javascript: bSubmitted=false;submitAction_win2(document.win2,'#ICQryDownloadRaw');">CSV Text File<"/a>`

单击它会打开下载提示以保存。

1.  如何触发此提示？
2.  我可以绕过提示让它自动下载吗？

我在 Visual Studio C# 2008 中对此进行编码。我正在使用 WebBrowser 控件浏览网站。

我已经尝试了一切，从 `webbrowser1.document.invokescript` 将所有元素存储在 HtmlElementCollection 中遍历它们并执行 invokemember("click")...

没有任何工作！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:03:47.047

1.  尝试使用字符串参数 value 的 invokescript eval`"javascript: bSubmitted=false;submitAction_win2(document.win2,'#ICQryDownloadRaw');"`
2.  您可以对 url 进行有根据的猜测并将`UrlDownloadToFile`其下载到您的位置，或者在`UrlDownloadToFile`失败时发出另一个 Web 请求来下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:23:29.797

```
foreach (HtmlElement i in webBrowser1.Document.All)
    {
        if (i.OuterText == "CSV Text File" && i.GetAttribute("href") != "")
        {
            webBrowser1.Navigate(i.GetAttribute("href"));
        }
    } 
```

虽然这并没有回答我的第二个问题，即如何自动下载文件或禁用提示，但它最终让我继续前进。但是，如果有人对此有答案，将不胜感激。

# html - 建议的 HTML 5 元标记应该被认为是必须的

> ID：11767755
> 
> 赞同：36
> 
> 时间：2012-08-01T21:21:11.303
> 
> 标签：html

我正在考虑将用 XHTML 1.0 编写的页面迁移到 HTML 5，并且正在考虑在元素中包含`meta`标签时的最低要求。`<head>`例如，我当前符合 XHTML 1.0 的页面具有以下`meta`标签

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta http-equiv="content-language" content="en-us" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="" />
<meta name="copyright" content="&copy; 2012" />
<meta name="robot" content="noindex, nofollow" /> 
```

以下内容对于 HTML 5 是否足够，我还可以包含它们吗？

我的理解也是，该`meta`元素`<meta http-equiv="content-language" content="en-us" />`现在可以全局应用于该 `<html>`元素。

```
<html lang="en-us">
<head>
<meta charset="UTF-8" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="" />
<meta name="copyright" content="&copy;" />
<meta name="robot" content="noindex, nofollow" />
<title>sample code</title>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-01T21:27:18.050

没有最低元标记之类的东西（当然，除非我把你的问题弄错了）。据我所知，不需要元标记，您添加的标记是满足您特定需求的标记。

考虑以下文档：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Some Title</title>
    </head>
    <body>

    </body>
</html> 
```

您可以验证它并且不会收到任何警告。验证器只是提醒您缺少默认编码。这甚至不是警告，只是一个信息。

[工作草案](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-meta-element)对元标记有这样的说法：

> 元元素表示无法使用标题、基础、链接、样式和脚本元素表示的各种元数据。

它继续：

> ### 4.2.5.1 标准元数据名称
> 
> 应用程序名称、作者、描述、生成器、关键字

此外，它还提到了一些关于页面状态、上下文表示和字符编码的附加标签。

尽管标准没有明确要求这些，但实际上存在最佳实践，尤其是在搜索引擎优化 (SEO) 方面。这与 HTML 标准无关，而是与网络（搜索）爬虫有关。

[您可以在网站管理员工具元标记支持页面上](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812)获得一些好的建议（对于 Google 而言）哪些元标记很重要

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T22:33:49.097

任何`meta`HTML5 草稿都不需要标签。（HTML5 正在进行中，可能随时更改，恕不另行通知。）

根据 HTML5 草案，您列出的许多标签，包括带有 的标签，`content-language`甚至都不允许（符合）。在实践中，它们中的大多数是无用的，但其中一些是有害的（例如排除机器人的那个，并且在大多数情况下试图阻止所有缓存的那些）。

您后面的代码片段无效：该`html`元素必须包含所有其他元素，并且该`head`元素必须包含一个`title`元素（在所有 HTML 版本中）。

查阅最新的[W3C HTML5](http://www.w3.org/TR/html5/)草案并使用实验性检查器[http://validator.nu](http://validator.nu)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-13T17:12:57.393

根据[http://validator.w3.org/](http://validator.w3.org/)，以下是有效 HTML5 文档的绝对最小示例，实际上其他所有内容都是可选的。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Valid HTML5 Document!</title>
</head>
</html> 
```

因此，您绝对必须定义 charset 元标记，而其他一切都是实现您的目标的问题（搜索引擎相关的东西、缓存控制等）。

# eclipse - Aptana 和 Eclipse 下的 PyDev 在特定的 .py 文件上非常慢

> ID：11767757
> 
> 赞同：1
> 
> 时间：2012-08-01T21:21:13.087
> 
> 标签：eclipse, sqlalchemy, pydev

这个问题刚刚开始，上周我对特定的源文件没有任何问题。我正在使用 SQLAlchemy 和 Geoalchemy 以及在简单地编辑文件时触发 Eclipse 和 Aptana 开始挂钩 cpu 的特定代码块是：

```
obsRecs = db.session.query(multi_obs)\
.join(sensor,sensor.row_id == multi_obs.sensor_id)\
.join(platform,platform.row_id == sensor.platform_id)\
.join(m_type,m_type.row_id == multi_obs.m_type_id)\
.join(m_scalar_type,m_scalar_type.row_id == m_type.m_scalar_type_id)\
.join(obs_type,obs_type.row_id == m_scalar_type.obs_type_id)\
.join(uom_type,uom_type.row_id == m_scalar_type.uom_type_id)\
.filter(multi_obs.m_date > dateOffset)\
.filter(multi_obs.m_type_id.in_(mTypes))\
.filter(multi_obs.d_top_of_hour == 1)\
.filter(platform.active < 3)\
.filter(platform.the_geom.within(WKTSpatialElement(bboxPoly, -1)))\
.order_by(platform.row_id)\
.all() 
```

一旦我开始编辑该块中的任何内容，就会出现问题。我已经删除了那段代码并编辑了文件中的其他区域，我没有任何问题。我也编辑了其他没有问题的python文件。起初我认为代码完成存在一些问题，所以我将其关闭，但仍然遇到问题。

我使用的是 Eclipse Indigo，如果我没有强制退出应用程序，则会抛出内存不足 Java 错误。在 Aptana 中，cpu 会出现峰值，然后会回到空闲使用状态，如果我再次开始编辑，则会再次出现峰值。

我的设置：OS X Lion Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3646) Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) i7 Quad core, 8Gb 内存

我认为这个问题可能是由 Apple 的最新 Java 更新触发的，所以我通过 Time Machine 将整个机器回滚到更新前状态，但问题仍然存在。

我会很感激任何指示，我正试图找到一个非基于 PyDev 的解决方案。

**编辑** 允许 Eclipse 运行直到出错，Console.App 确实显示以下内容：

```
8/1/12 9:14:01.114 PM [0x0-0x182182].org.eclipse.eclipse: Exception in thread "[Timer] - Main Queue Handler" Exception in thread "Poller SunPKCS11-Darwin" 
8/1/12 9:14:01.114 PM [0x0-0x182182].org.eclipse.eclipse: java.lang.OutOfMemoryError: Java heap space
8/1/12 9:14:01.114 PM [0x0-0x182182].org.eclipse.eclipse:   at sun.security.pkcs11.wrapper.PKCS11.C_GetSlotInfo(Native Method)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at sun.security.pkcs11.SunPKCS11.initToken(SunPKCS11.java:767)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at sun.security.pkcs11.SunPKCS11.access$100(SunPKCS11.java:42)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at sun.security.pkcs11.SunPKCS11$TokenPoller.run(SunPKCS11.java:700)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at java.lang.Thread.run(Thread.java:680)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse: java.lang.OutOfMemoryError: Java heap space
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at java.lang.AbstractStringBuilder.<init>(AbstractStringBuilder.java:45)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at java.lang.StringBuffer.<init>(StringBuffer.java:103)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at org.eclipse.equinox.internal.util.impl.tpt.threadpool.ThreadPoolFactoryImpl.execute0(ThreadPoolFactoryImpl.java:94)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at org.eclipse.equinox.internal.util.impl.tpt.timer.TimerImpl.run(TimerImpl.java:110)
8/1/12 9:14:01.115 PM [0x0-0x182182].org.eclipse.eclipse:   at java.lang.Thread.run(Thread.java:680) 
```

**编辑 2**

抓起Oracle JDK，设置系统使用它。同样的问题。

**编辑 3**

从备份还原后仍会出现类似问题。这个问题一定是潜伏的，代码块恰到好处地触发了它。代码完成引擎仍然是主要嫌疑人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:55:42.030

我遇到了同样的问题，但查询不同，很长。我尝试禁用自动完成，尝试了这个`-clean`东西，没有运气。

为了修复，我等待内存泄漏爆炸并用于`jmap.exe`转储堆。然后我运行 Eclipse Memory Analyzer 来查看我的内存去向，截图附在下面。工作中有些事情`com.python.pydev.refactoring.markoccurrences.MarkOccurrencesJob`，所以我在 Preferences->Pydev->Editor 中禁用了该选项。

自从我这样做以来，Eclipse 就是一个速度恶魔，不再崩溃。有一些街头信誉的人应该将此作为 pydev 的错误发布。

![在此处输入图像描述](../Images/1937e30197e968223411d6f388644c04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:40:30.057

对我来说，这看起来像是 PyDev 类型推理引擎中的一个错误......（可能会循环直到发生内存不足错误）。仅使用您的代码子集，我无法在此处重现它（即：安装 sqlalchemy 和 geoalchemy，使用该文件作为源文件创建项目并使用该文件都可以正常工作）。

因此，理想情况下，请创建一个可以复制的项目，并创建一个附加该项目的错误报告（有关在何处创建错误报告的详细信息，请参见：[http](http://pydev.org/about.html) ://pydev.org/about.html ）。另外，请在此处提供堆栈溢出链接作为参考。

现在，话虽如此，它可能只是一些稍后会起作用的内存峰值（如果是这种情况，您可以尝试将 Eclipse.ini 中的 -Xmx 标志提高到更大的值 - 尽管如果您在32 位 java/Eclipse，该值可能不应该高于 600m - 700m）。尽管如此，即使是这种情况，请考虑将其报告为与该用例中使用的内存过多有关的错误（但请提供一个项目作为如何重现该问题的场景）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:29:40.933

过去，我从一个干净的工作区开始，成功地解决了 Eclipse 的疯狂问题。

这有点像在黑暗中拍摄，但请一一尝试以下方法：

1.  `-clean`使用该选项和现有工作区启动 eclipse 。
2.  如果上述方法不起作用，请尝试在新工作区中编辑相同的文件。

如果您查看 Console.app，在编辑文件时，您是否看到任何相关的日志消息？

当您尝试在 Aptana 中编辑文件时，eclipse 中的错误日志视图是否会抛出任何错误消息？

**更新**

我刚刚尝试在 Window 7 64 Bit 上的 Eclipse Juno 中复制它，但没有任何问题：

![在此处输入图像描述](../Images/7d5b453973217263fd223992d6f49926.png)

我认为这可能是锻炼的时间，但是您可以升级到 Eclipse Juno 吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-25T12:09:14.407

我也再次遇到了这个问题。我遵循了所有关于内存设置、禁用代码完成等的常见建议。

我在 Mountain Lion 上运行 Eclipse 4.2。我尝试升级到 4.3，甚至尝试了 4.3 32 位版本。没有任何工作。

我不经意间注意到一个 Python 模块特别是我的麻烦的原因，这最终导致了我的解决方案。

我还没有说明原因，但问题出在 SQLAlchemy 上。我应该对此进行限定并说问题是一个非常大的 Python 模块，其中包含许多长 SQLAlchemy 查询。

我将 SQLAlchemy 查询拆分为单独的 Python 模块，我不喜欢这样做并且解决了问题。在这种情况下，我宁愿让 Eclipse 工作，也不愿将我的所有代码放在一个模块中。

# android - 来自自定义图像视图的 Toast 消息

> ID：11767760
> 
> 赞同：0
> 
> 时间：2012-08-01T21:21:32.460
> 
> 标签：android, imageview, toast

如何在扩展 ImageView 的类中显示 toast 消息。我想把它放在 onDoubleTap 方法中，这样它就会向用户显示一条消息，说明什么像素被双击了。我有以下两个课程：

```
public class TouchImageView extends ImageView 
{
  ....
   final GestureDetector mGestureDetector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() 
    {
        @Override
        public boolean onDoubleTap(MotionEvent e) 
        {           
            Toast.makeText(getApplicationContext(), "Pixel",  Toast.LENGTH_SHORT).show();

            return true;
        }
        ...
   }

public class DisplayMap extends Activity 
{
  int width;
  int height;
  double imageSize;

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);

    TouchImageView img = new TouchImageView(getApplicationContext());

    Bitmap mapImage = BitmapFactory.decodeResource(getResources(), R.drawable.testimage);
    img.setImageBitmap(mapImage);
    img.setMaxZoom(4f);
    setContentView(img);
    ...
} 
```

上面的代码不起作用，因为 getApplicationContext() 没有为 ImageView 定义。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:26:21.203

让你的`TouchImageView`类有一个接受`Context`对象的构造函数。

```
Context context;

public TouchImageView(Context context) {
    super(context); //Thanks for this tip
    this.context = context;      
}

final GestureDetector mGestureDetector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() 
{
    @Override
    public boolean onDoubleTap(MotionEvent e) 
    {           
        Toast.makeText(context, "Pixel",  Toast.LENGTH_SHORT).show();

        return true;
    }
    ...
} 
```

并在 TouchImageView 对象中发送您的 Activity.this 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:32:08.060

如果你是 ImageView 的子类，getContext() 方法将被继承。用它来展示你的 Toast。

```
Toast.makeText(getContext(), "Pixel", Toast.LENGTH_SHORT).show(); 
```

为了澄清另一个答案，如果您是 ImageView 的子类，只需调用 super(context); 不要担心维护自己的上下文实例。

这：

```
 Context context;

public TouchImageView(Context context) {
    this.context = context;      
} 
```

应该：

```
Context context; // <-- remove this

public TouchImageView(Context context) {
     super(context);
} 
```

希望这可以帮助。

# python - 如何修复此 Python TypeError：非序列迭代？

> ID：11767761
> 
> 赞同：1
> 
> 时间：2012-08-01T21:21:36.093
> 
> 标签：python, dictionary, iteration

当我运行下面的整个代码时，这一行：

```
for f in features: 
```

从此函数（其中`getfeatures`返回字典）：

```
def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
    self.con.commit() 
```

产生此错误：

```
TypeError: iteration over non-sequence 
```

我尝试替换此行：`for f in features:`为此：`for f in features.keys():`但没有用（`"AttributeError: classifier instance has no attribute 'keys'"`）。当我尝试这个时：

```
print getfeatures('Nobody owns the water.') 
```

它给了我预期的东西：

```
{'water': 1, 'the': 1, 'nobody': 1, 'owns': 1} 
```

如何修复此错误并在`f`字典中正确迭代？

这段代码来自（优秀的）书“[编程集体智能](https://rads.stackoverflow.com/amzn/click/com/0596529325)”。我只是从[这里](https://raw.github.com/cataska/programming-collective-intelligence-code/master/chapter6/docclass.py)复制了它（我还买了这本书）并剪切了部分代码（fisherclassifier，因为我只使用了 naivebayes 分类器）。我很难相信这个错误还没有实现。我可能做错了什么。

```
Here the entire code:

import sqlite3

#from pysqlite2 import dbapi2 as sqlite

import re
import math

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  # Return the unique set of words only
#  return dict([(w,1) for w in words]).iteritems()
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures,filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

  def setdb(self,dbfile):
    self.con=sqlite.connect(dbfile)
    self.con.execute('create table if not exists fc(feature,category,count)')
    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      self.con.execute("insert into fc values ('%s','%s',1)"
                       % (f,cat))
    else:
      self.con.execute(
        "update fc set count=%d where feature='%s' and category='%s'"
        % (count+1,f,cat))

  def fcount(self,f,cat):
    res=self.con.execute(
      'select count from fc where feature="%s" and category="%s"'
      %(f,cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      self.con.execute("insert into cc values ('%s',1)" % (cat))
    else:
      self.con.execute("update cc set count=%d where category='%s'"
                       % (count+1,cat))

  def catcount(self,cat):
    res=self.con.execute('select count from cc where category="%s"'
                         %(cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def categories(self):
    cur=self.con.execute('select category from cc');
    return [d[0] for d in cur]

  def totalcount(self):
    res=self.con.execute('select sum(count) from cc').fetchone();
    if res==None: return 0
    return res[0]

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0

    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)

    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):

  def __init__(self,getfeatures):
    classifier.__init__(self,getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)

    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat

    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')

nb = naivebayes(classifier)

sampletrain(nb)

#print ('\nbuy is classified as %s'%nb.classify('buy'))
#print ('\nquick is classified as %s'%nb.classify('quick'))

##print getfeatures('Nobody owns the water.') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:31:08.060

看起来您正在初始化`naivebayes`using的实例`classifier`：

```
nb = naivebayes(classifier) 
```

您可能打算这样做：

```
nb = naivebayes(getfeatures) 
```

在方法的`for`循环中`train`，您不是从 dict 获取 dict，而是`getfeatures`反复实例化`classifier`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:31:17.720

您的初始化从未像您期望的那样实际传递 getfeatures 函数。

赠品是这样的：

> 尝试替换此行：for f in features: for this: for f in features.keys(): 但没有用（“AttributeError：分类器实例没有属性'keys'”）。

请注意，这是说特征是分类器实例，而不是字典。

因此，查看您的代码，您可以创建：

```
nb = naivebayes(classifier) 
```

naivebayes 的初始化是：

```
def __init__(self, getfeatures):
  classifier.__init__(self,getfeatures)
  self.thresholds={} 
```

因此，在这种情况下，您将传入分类器，它将作为变量传递`getfeatures`给分类器的 init。. .

# mysql - mysql左连接有多个where列

> ID：11767769
> 
> 赞同：0
> 
> 时间：2012-08-01T21:22:03.053
> 
> 标签：mysql

我有一个客户表和一个地址表。每个客户在地址表中可以有多个条目，但这些条目中只有一个可以标记为“主要”。我将查询放在一起以提取客户及其主要地址，如下所示：

```
SELECT * FROM customers LEFT JOIN addresses  
         ON customers.cust_id = addresses.cust_id 
WHERE customers.status = 1 AND addresses.primary = 1 
```

我发现了一个缺陷，如果客户还没有在他们的帐户中添加地址，他们将不会出现，因为没有“主要”地址。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:23:53.837

```
SELECT * 
FROM      customers 
LEFT JOIN addresses 
ON        customers.cust_id = addresses.cust_id
AND       1                 = addresses.primary 
WHERE     customers.status = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:24:29.953

尝试将查询修改为`AND (addresses.primary = 1 OR addresses.primary IS NULL)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:25:20.753

没有地址时只需包含左侧数据。
在下面的示例中，我使用了主字段，但是
当没有匹配的键时，左连接子句中 addesses 表的任何字段都为空。

```
SELECT * FROM customers LEFT JOIN addresses   
         ON customers.cust_id = addresses.cust_id  
WHERE    customers.status = 1 AND 
         (addresses.primary = 1 OR addresses.primary IS Null) 
```

# java - XML Schema V 1.1 断言在 Xerces-J 中不起作用

> ID：11767772
> 
> 赞同：0
> 
> 时间：2012-08-01T21:22:19.343
> 
> 标签：java, xml, jar, schema, assertions

我能够在 Oxygen XML Developer Editor 中根据它的 XML V 1.1 模式验证我的 XML 配置文件。

如果我的架构违反了断言约束，例如元素的 number 属性大于特定值，它将不会验证 xml 配置文件。

```
<assert test="6 >= @Number" /> 
```

然而，当我针对模式解析 java 中的配置文件时，我的断言被忽略了。

我正在使用 Xerces-J 2.11.0-xml-schema-1.1-beta。

我在我的项目中包括以下罐子

```
cupv10K-runtime.jar
icu4j.jar
xerceslmpl.jar
sml-apis.jar
org.eclipse.wst.xml.xpath2.processor_2.1.1v201204060055.jar 
```

我需要包括另一个罐子吗？

任何关于它为什么忽略断言的建议都会非常有帮助。

提前谢谢了。

干杯，

德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-02T22:11:22.303

我使用以下命令行，并且在对当前元素的属性 应用**测试时没有遇到问题：** `$ export XERCESJ=$HOME/xerces-j/xerces-2_11_0-xml-schema-1.1-beta $ java -classpath $XERCESJ/cupv10k-runtime.jar:/usr/share/java/org.eclipse.wst.xml.xpath2.processor-2.1.100.jar:/usr/share/java/xercesImpl-xsd11-2.12-beta-r1667115.jar:$XERCESJ/xml-apis.jar:$XERCESJ/xercesSamples.jar jaxp.SourceValidator -xsd11 -i my_instance.xml`

XSD 1.1 语法很好，并且强制执行了**测试**条件。

# .net - 在 x86 机器上为 x64 开发 .net

> ID：11767773
> 
> 赞同：1
> 
> 时间：2012-08-01T21:22:19.607
> 
> 标签：.net, x86-64, cpu-architecture

我试图了解在 x86 和 x64 架构上开发 .Net 应用程序有什么区别。假设我在 x64 和 x86 上使用相同的源开发了一个应用程序，并且我的配置是 anycpu（或者它可以是 x64 与 x64 机器）。这些应用程序会在 x64 架构上以相同的性能运行吗？总结一下我的问题，虽然针对 x64 架构的好处，比如内存超过 4gb，但在 x64 机器上开发的应用程序比在 x86 上开发的应用程序有任何优势，配置 anycpu？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:24:58.427

> 这些应用程序会在 x64 架构上以相同的性能运行吗？总结一下我的问题，虽然针对 x64 架构的好处，比如内存超过 4gb，但在 x64 机器上开发的应用程序比在 x86 上开发的应用程序有任何优势，配置 anycpu？

不会。以 AnyCPU 为目标的应用程序在 x64 上的运行与以 x64 为目标的应用程序完全相同。AnyCPU 将导致应用程序在 64 位操作系统上运行时使用 64 位 CLR（与针对 x64 构建的方式完全相同。）

它们在 64 位系统上的运行与在 32 位操作系统上的运行方式不同，但是，因为 64 位 CLR 确实具有不同的优化和性能特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:47:17.223

正如 Reed Copsey 所说，它们将以相同的性能运行。

不过，除了性能考虑之外，我只想补充一点，如果可能的话，您仍然应该尝试在 x64 机器上测试应用程序。我已经看到了 AnyCPU 应用程序可能发生的一些问题：

*   本机 DLL 仅适用于一种架构。例如，如果您的应用程序是为 AnyCPU 编译但使用 32 位本机 DLL，那么它将在 x86 上运行良好但在 x64 上崩溃，因为 64 位进程将无法使用该 DLL。

*   依赖于[IntPtr](http://msdn.microsoft.com/en-us/library/system.intptr.aspx)是一个特定的大小。例如，如果您假设它的大小是 4 字节，那么当它作为 64 位进程运行时会导致错误，其中`sizeof(IntPtr)`是 8。

# jquery - 什么会导致 HTTP 发回“400 OK”

> ID：11767774
> 
> 赞同：3
> 
> 时间：2012-08-01T21:22:21.030
> 
> 标签：jquery, http, air, http-headers

当我将一些参数放入 URL 时，有时我会收到一个错误，因为应该是“400 OK”的有效请求。

相同的 URL 和参数将在 99% 的情况下有效，但我看到我们的日志中出现错误。

这是由于某些因素而可能发生的晦涩难懂的事情，还是我的应用程序特有的事情导致了奇怪的标题混搭？如果前者没有答案，我猜是后者:)

**更新**

对于评论，“它”是一个相对简单的 RESTful API 编写的。现在它几乎总是返回正确的标题，如 400 和错误正文或 200 和 ok 正文。当错误的标头到达 Web 客户端时，Web 客户端会使用它收到的消息 ping 报告 URL，以便我们可以区分我们的 Web 应用程序和移动应用程序之间的 API 错误。据我们所知，没有任何代码组合可以使这个“400 OK”成为地狱。但鉴于在我们的代码混乱之外似乎不可能发生这种情况，我将进行更深入的研究。

**更新 2**

好的，我对我们的框架进行了比以往更深入的研究，并与一些开发人员进行了交谈。

它通过对 API 的 AJAX 调用将信息返回给浏览器。

浏览器检测到“400 OK”并将其发送回我们的服务器，在那里我们得到了这个奇怪的报告。没有人亲眼看到这种情况发生，但日志说它正在发生。

在我们的代码库中实际上有零代码会返回 400 OK，因为我们的 HTTP 标头处理程序中只有 400 是“400 bad request”

我现在想知道是否有一些我偶然发现的浏览器/jquery/ajax 错误。

**UPDATE 3（因为你不能有太多的信息）**

我检查了浏览器如何看到问题所在。jQuery $.ajax 报告的失败会触发回调。然后我们有这样的代码：

```
xhr.always(function() {
  var request = [ this.type, this.url, this.data ].join(' '),
      response = [ xhr.status, xhr.statusText, xhr.responseText ].join(' ');

  $.ajax({ 
    url   : REPORTING_URL,
    type  : 'POST', 
    data : { request : request, response : response }
  });
}); 
```

我们知道这“大部分”时间都有效，因为我们还收到了来自这些 ajax 调用的“400 错误”响应

**更新 4**

我只是注意到实际上所有的错误都来自用户代理：

`Mozilla webkit etc...... AdobeAIR/1.5.3`这是一个非常旧的版本

我们的 AIR 应用程序只有一个 iframe 我们的网络应用程序。我只能想象那里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:37:07.213

好吧，我在上面的评论中错了，根据 RFC 2616，[状态行](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6.1)的格式为：

```
Status-Line = HTTP-Version SP Status-Code SP Reason-Phrase CRLF 
```

RFC 继续说：

> Status-Code 元素是尝试理解和满足请求的 3 位整数结果代码。这些代码在第 10 节中完全定义。原因短语旨在给出状态代码的简短文本描述。**状态代码供自动机使用，**原因**短语供人类用户使用。**客户不需要检查或显示原因短语。

所以服务器*可以*返回“1.1 400 OK”。但这几乎不是一个精心挑选的原因短语。最好坚持使用状态代码列出的原因以避免这种混淆。（也许可以避免[过度]挑剔的客户/代理的问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:05:42.017

在我标记为官方答案的@pst 的好答案之后，我发现了一个更令人沮丧的答案，这对我的案例来说是 100% 正确的。

该标头是通过在 iframe 中为 Adob​​e AIR 1.5.3 的用户使用网站来实现的。

在强制升级我们所有的 AIR 用户后，它就消失了，因此可以安全地假设这是他们的标题报告的错误。

# bash - 单击 bash 中的 webform 按钮

> ID：11767775
> 
> 赞同：1
> 
> 时间：2012-08-01T21:22:22.007
> 
> 标签：bash, curl

我正在尝试从 bash 脚本“单击”网页上的按钮。有人告诉我尝试使用 curl，但我无法弄清楚。我不需要填写任何输入信息，只需模拟导航到页面并单击按钮（也需要登录）。

这是formfind的输出：

```
server:$ ~/formfind < ./site.html 
--- FORM report. Uses GET to URL "/view/job/26/search/"
Input: NAME="q" VALUE="search" (TEXT)
--- end of FORM
--- FORM report. Uses POST to URL "Job/pass"
Button: "Execute" (SUBMIT)
--- end of FORM
--- FORM report. Uses POST to URL "Job/fail"
Button: "Execute" (SUBMIT)
--- end of FORM 
```

我正在尝试单击通过或失败下的“执行”按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:25:57.880

你需要这个：[https ://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)

使用网络检查器或代理来检查发送的确切内容。

# javascript - 在函数和 $(document).ready() 中管理选择器

> ID：11767783
> 
> 赞同：0
> 
> 时间：2012-08-01T21:23:31.107
> 
> 标签：javascript, jquery

如果我有修改页面上 DOM 元素的函数，但`$(document).ready()`也访问相同的 DOM 元素，我是否包装了所有内容，包括其中的函数，`$(document).ready()`所以我不会多次声明 dom 元素。例如：

```
function addContent(){
   var $someElement = $("someElement");
   //Do something with $someElement
}
$(document).ready(function(){
   var $someElement = $("someElement");
   $someElement.click(function(){ //some code });
}) 
```

我会在两者之间移动`addContent()`函数`$(document).ready()`以便我只需要声明`$someElement` 一次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:25:19.550

`addContent()`只需要`$(document).ready(function(){})`在全局范围内的 if 之外。选择器也是如此。

如果可能的话，我个人不会将它们中的任何一个放在全局范围内，这意味着没有`onclick=`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:27:35.540

基本上，如果你这样做，调用函数的所有内容都必须在 范围内`$(document).ready()`，因此有好处也有坏处。由你决定哪个更好。正如 Kevin B 所说，我个人可能更希望它们被隐藏在那个范围之外，所以我会把它们放在里面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:27:54.140

如果您不需要将 jquery 与函数一起使用，请在函数之外使用它

```
$(document).ready(function(){}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:31:29.860

我的印象是 jquery 开始缓存对同一个选择器的访问（至少它不再抱怨我们必须自己缓存它们）所以多次调用 $(".some") 是可以的。另一方面，如果您在类的上下文中并且知道 $(".some") 将始终返回相同的对象集 - 将其存储在类变量中是安全的。而且由于全局变量是邪恶的 - 将它存储在其中一个中并不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T21:41:47.587

```
// declared in global scope
var $someElement = null;

function addContent(){
   //Do something with $someElement
   $someElement.html('works!');
}

$(document).ready(function(){
   //initialized on ready
   $someElement = $("someElement");
   $someElement.click(function(){ //some code });
}); 
```

您可以将变量设置为全局范围，并在`.ready`. 假设`addContent`总是在触发后`.ready`触发，这不会导致任何问题，但这是一个非常安全的假设，因为您打算使用 jQuery 操作 dom，并且总是在`.ready`

# hudson - Jenkins 促销参数值未在 Shell Exec 命令中通过

> ID：11767785
> 
> 赞同：3
> 
> 时间：2012-08-01T21:23:48.030
> 
> 标签：hudson, jenkins

我已经创建了名为“RUNSCRIPT”的构建提升“选择”参数，其值为“否”（默认）和“是”，并尝试将 EXEC SHELL 命令中的参数值设为 $RUNSCRIPT，但既不是值“是”也不是“否” “通过。如果我查看输出，它会以 $RUNSCRIPT 的形式出现（原样）。为什么不被价值取代。有什么建议么？此外，尝试创建其他类型的参数，例如字符串值，但它不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T23:06:29.283

我设法获得一个批准参数作为下游构建的构建参数传递（由促销本身触发）；你只需要传递它们。

我了解到，可以说批准“构建”中允许使用批准参数，因此您在该批准中的任何操作都应该能够引用任何批准参数。

这意味着您可以有一个批准参数 FOO，然后在批准操作中，如果您有“触发参数化构建”操作，则可以使用带有文本的“预定义参数”：

```
 BAR=${FOO} 
```

然后，触发的构建将设置 BAR 构建属性，该属性设置为提升构建所用的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:53:01.717

如果要将值从 jenkins 传递到脚本，则需要将参数定义为 jenkins 环境变量。为此，我使用了 Ant。例如 ：

属性环境="env" 属性名="用户" 值="${env.user}"

如果我只是使用

属性名称="用户" 值="${用户}"

这些值将从引用用户的其他文件传递。

# java - 如何在不使用监听器作为直接触发器的情况下让主要方法等待 GUI 上的输入？

> ID：11767788
> 
> 赞同：0
> 
> 时间：2012-08-01T21:24:00.617
> 
> 标签：java, multithreading, user-interface, input

我正在开发一个网络抓取工具，该工具应该对抓取的数据执行各种操作。

正因为如此，我需要各种不同的 GUI 以有序的方式工作，因此，我需要 main 方法在每个完成它的目的之前等待。

经过一段时间的搜索，我发现了以下 StackOverflow 问题，这些问题提供了一些关于如何解决问题的线索，但我无法实现，因为它们与我的情况有些不同：

[如何等待文本字段中的输入](https://stackoverflow.com/questions/7229788/how-to-wait-for-input-in-a-text-field) [如何让主线程等待不同的线程完成](https://stackoverflow.com/questions/2790196/java-how-to-make-this-main-thread-wait-for-the-new-thread-to-terminate)

* * *

我知道我可以使用监听器触发代码到一个/GUI的组件（例如一个按钮），但是我很难让主线程等待那个监听器唤醒它，而代码GUI的线程（当有一个时）由主线程初始化......

* * *

这是一个简化的代码，用于演示程序应该如何工作：

```
public class Main {
    /*
     * Waiter is a simple GUI with just an "Start" button in it. Here in place of my actual GUIs.
     */
    private static Waiter auth; //Represents my NTLM-authentication form.
    private static Waiter status; //Represents a status-feedback GUI that will be displayed during processing.
    private static Waiter operation; //Represents a GUI in with the user choses what to do with the gathered data.

    public static void main(String[] args) throws InterruptedException {
        auth = new Waiter();
        auth.setVisible(true);
        System.out.println("NTLM Authentication form. Should wait here until user has filled up the GUI and clicked \"Start\".");
        System.out.println("Authenticates WebClient's NTLM using data inputed to the GUI...");
        auth.dispose();
        Thread srt = new Thread(status = new Waiter());
        srt.start();
        status.setVisible(true);
        //Performs webscraping operations...
        System.out.println("Prepares the webscraped data here...Things like downloading files and/or parsing text...");
        System.out.println("Keeps the user aware of the progress using the \"status\" GUI.");
        status.setVisible(false);
        //Clears the status GUI.
        operation = new Waiter();
        operation.setVisible(true);
        System.out.println("Operation selection form. Should wait here until user selects an option.");
        System.out.println("Starts performing the operation(s)...");
        operation.dispose();
        status.setVisible(true);
        System.out.println("Performs the operation(s), while giving status-feedback to the user.");
        status.setVisible(false);
        System.out.println("Displays a file-save dialog to save the results.");
        System.out.println("And finally, displays a \"End of operations\" dialog before ending.");
    }
} 
```

* * *

更新1：我遇到的主要困难是实现这样的事情（这是我想做的）：

```
//Main method...code...
Thread srt = new Thread(status = new Waiter());
//Before "srt.start();"...
status.startButton.addActionListener(new ActionListener() {
  @Override
  public void actionPerformed(ActionEvent e) {
    main.continueExecution();
  }
});
//Thread's run() being something like "status.setVisible(true); main.waitGUI();"
srt.start();
//continues here after the Listener is triggered...more code... 
```

而不是这个（如果我理解正确的话，大多数其他人的解决方案是什么......）（*如果可能的话，这是我***不想**做的）：

 *```
//GUI before this one...
//code...
Thread srt = new Thread(status = new Waiter());
status.startButton.addActionListener(new ActionListener() {
  @Override
  public void actionPerformed(ActionEvent e) {
    /*
     * Code that should come after this GUI.
     */
  }
});
//Thread's run() being something like "status.setVisible(true);"
srt.start();
//"ends" here...(Initial code or GUI before this "status") 
```

换句话说，我无法以触发主线程的“睡眠”和“唤醒”动作的方式实现 GUI 和侦听器，而不是触发实际的处理代码。

* * *

更新 2：

按照@JB_Nizet 关于 的提示`SwingUtilities.invokeLater()`，我仔细查看了[SwingUtilities 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)，在了解了该`SwingUtilities.invokeAndWait()`方法的工作原理之后，我想我已经找到了如何使用`Semaphore`和的组合`invokeAndWait()`。

我需要一个对多线程和/或 GUI 有更好理解的人来确认它是否是一个安全、有效的解决方案。（然后我将编辑问题并清理它，如果得到确认，请以正确的“答案格式”发布）

无论如何，这里是修改后的代码，这似乎对我有用：

```
public class Main_Test {

    //Semaphore:
    public static Semaphore semaphore;
    //GUIs:
    private static Waiter auth; //Represents my NTLM-authentication form.

    public static void main(String[] args) {
        try {
            semaphore = new Semaphore(1);
//          semaphore.acquire();
            auth = new Waiter() {

                @Override
                public void run() {
                    try {
                        System.out.println(Main_Test.getThread() + this.getName() + " has been created and is now running.");
                        semaphore.acquire(); //Makes main pause.
                        this.setVisible(true);
                    } catch (InterruptedException ex) {
                        Logger.getLogger(Main_Test.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            };
            auth.jButton1.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println(getThread() + "NTLM has been hypothetically authenticated.");
                    semaphore.release(); //Makes main continue after GUI is done.
                    auth.dispose();
                }
            });
//          semaphore.release();
            SwingUtilities.invokeAndWait(auth);
            semaphore.acquire(); //<- Where the main effectively gets paused until the permit is released.
            /*
             * GUI's run() will accquire the semaphore's permit.
             * The invokeAndWait() garantees (?) it will happen before main's acquire().
             * This causes the main to pause when trying to acquire the permit.
             * It stays paused until the actionListener release() that permit.
             */
            System.out.println(getThread() + "This message represents the processing, and should come only after the hypothetical NTLM authentication.");
        } catch (InterruptedException ex) {
            Logger.getLogger(Main_Test.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvocationTargetException ex) {
            Logger.getLogger(Main_Test.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static String getThread() {
        return String.format("%-32s --- ", Thread.currentThread().toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:19:34.857

我不确定我是否完全理解你想要做什么，但在我看来你有一个消费者线程（主线程，等待来自事件调度线程的事件）和一个生产者线程（事件调度线程）。

实现这一点的典型方法是使用阻塞队列作为通信机制：

*   创建阻塞队列
*   创建您的 GUI 并将其传递给阻塞队列
*   启动一个从队列中获取数据的循环。由于队列是阻塞的，所以主线程将被阻塞，直到队列中有东西
*   让您的事件侦听器在 EDT 中运行，将数据发布到阻塞队列*

# algorithm - 找到可以具有巨大 n 和 k 值的 nCk

> ID：11767790
> 
> 赞同：2
> 
> 时间：2012-08-01T21:24:08.413
> 
> 标签：algorithm, modulus

首先，这不是我的作业..我在练习过程中遇到了一个问题。

我想计算这个表达式的值：ans=(2^huge)%p..

在哪里：

huge=n1Ck1+ n2Ck2 +n3Ck3 ..... [n1,n2.. 可以大到 10^4 并且 k1,k2.. 小于 10]

p=小于 2^32 的素数

[我知道如何使用快速从右到左的二进制方法](http://en.wikipedia.org/wiki/Modular_exponentiation#Right-to-left_binary_method)找出 (a^b)%p ，但我的问题是如何找到像 10000C9 这样的数字的组合 [nCk] 会导致如此巨大的数字，然后再使用在模幂方法中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:53:06.607

因为`2^(p-1)==1 mod p`，您可以对指数进行模数的所有计算`p-1`。

# ruby-on-rails - Mongoid 3 批量更新

> ID：11767791
> 
> 赞同：1
> 
> 时间：2012-08-01T21:24:19.697
> 
> 标签：ruby-on-rails, mongoid

升级到 Mongoid 3 后，批量更新不再有效。在 Mongoid 2 中，我有以下内容：

```
Shift.where(
  :account_id => current_account.id,
  :location => self.department.location.name,
  :department => self.department.name,
  :position => self.name_was,
  :color => self.color_was,
  :date.gte => Date.current
).update_all(position: self.name, color: self.color) 
```

我知道标准正在返回结果，但它不再更新文档。这是 Mongoid 3 中的声明：

```
Shift.where(
  :account_id => current_account.id,
  :location => self.department.location.name,
  :department => self.department.name,
  :position => self.name_was,
  :color => self.color_was,
  :date.gte => Date.current
).update(position: self.name, color: self.color) 
```

我正在运行 Rails 3.2.7 和 Mongoid 3.0.3。有什么我不知道的变化吗？这也是日志中的条目：

```
MOPED: 127.0.0.1:27017 UPDATE       database=development collection=shifts selector={"$query"=>{"account_id"=>"5017e8774f4e481fe3000001", "location"=>"Downtown", "department"=>"Cashes", "position"=>"Cash 1", "date"=>{"$gte"=>2012-08-01 00:00:00 UTC}}, "$orderby"=>{"start_at"=>1}} update={"$set"=>{:position=>"Cash A", :color=>"#42ed23"}} flags=[:multi] (0.2141ms) 
```

但是，数据库中没有任何内容得到更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:15:38.940

我认为这是因为您的查询使用了类似 account_id 的字符串，而不是 Moped::BSON::ObjectId。

如果您在没有更新的情况下执行 where 。你没有我想的结果。

# ruby - Heroku 友好的 Ruby Scraper（使用 AJAX）？

> ID：11767797
> 
> 赞同：1
> 
> 时间：2012-08-01T21:24:51.063
> 
> 标签：ruby, heroku, screen-scraping

所以我正在尝试用 Ruby 编写一个小的非官方 API 来从站点中提取数据。我喜欢 Mechanize，但是我需要从页面获取的所有数据都是由 AJAX 生成的，所以 Mechanize 根本看不到它。我可以使用什么来使用 JavaScript 呈现页面，以便我可以抓取数据？我认为像[spynner 之](https://github.com/makinacorpus/spynner)类的东西，但对于 Ruby 来说会成功。

我也想和 Heroku 一起玩，所以我正在寻找可以在那里部署的东西，这让我远离了[Watir](http://watir.com/)之类的东西。

这样的事情存在吗？

**更新**

为清楚起见，我试图从[Fitocracy 个人资料页面](http://www.fitocracy.com/profile/DorkRawk/)中提取锻炼数据。

您可能需要一个帐户才能查看该页面，但基本上所有锻炼数据都通过页面外壳内的 JavaScript 显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:51:37.743

ajax 请求与非 ajax 请求相同，只是如何制作它并不总是很明显。Mechanize 可以发出浏览器可以发出的任何请求。当然 Watir 更容易，但如果这是一个 API，你应该以正确的方式做它并使用 mechanize。

# android - Android SDK 中的 SQLite 源代码

> ID：11767799
> 
> 赞同：1
> 
> 时间：2012-08-01T21:24:53.153
> 
> 标签：android, sqlite

我希望覆盖我正在运行的处理 SQLiteDatabase 的测试，并且我特别希望在运行此测试时覆盖 SQLite 的底层 C 代码。但是，我不知道这段 C 代码在 Android SDK 中的位置。谁能告诉我？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:28:06.477

您应该可以在文件夹中找到它[`external/sqlite`](https://android.googlesource.com/platform/external/sqlite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:33:36.997

该代码不在 Android SDK 中。Sqlite 是[AOSP](http://source.android.com/source/index.html)的一部分。这里有一个可浏览的镜像：[https ://github.com/android/platform_external_sqlite](https://github.com/android/platform_external_sqlite)

**编辑：** 您可以构建自己的模拟器映像，而不仅仅是尝试构建 SQLite。您可以修改 platform/external/sqlite/dist/Android.mk 以添加 gcov 标志。

# c# - 通过 HTTP 的 C# Metro 流视频 (TS)

> ID：11767806
> 
> 赞同：2
> 
> 时间：2012-08-01T21:25:17.923
> 
> 标签：c#, video-streaming, microsoft-metro

我有兴趣通过 HTTP 将视频源流式传输到用 C# 编码的 Metro 应用程序。有没有人有任何关于如何使用播放器框架实现这一目标的示例？

谢谢

# mysql - 子计数作为 mysql 查询中的字段

> ID：11767810
> 
> 赞同：0
> 
> 时间：2012-08-01T21:25:25.850
> 
> 标签：mysql

对于统计应用程序，具有如下表结构：

```
unique_id | browser_family | os | date_time | js_enabled | flash_enabled | non_binary_field

1           firefox          w7    ...         1            0              yes
2           chrome           w7    ...         1            1              no
3           ie9              wx    ...         0            0              yes 
```

所以，我想在任何字段上使用 where 子句执行查询，并让它为我提供这些条件的 js_enabled=1、flash_enabled =0、non_binary_field = 'yes' 计数（比如 `os` = 'w7' 和日期（`date_time`）='01-08-2012'）。

结果将是：

```
count(js_enabled=1) | count(flash_enabled=1) | count(non_binary_field='yes')
2                     1                        1 
```

这可能在单个查询中吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:28:08.987

```
select sum(js_enabled=1),
       sum(flash_enabled=1),
       sum(non_binary_field='yes')
from your_table
where `os` = 'w7'
and date(`date_time`) = '2012-08-01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:39:14.310

每个字段都可以由单独的子查询填充：

```
select
(select count(js_enabled) from yourtable where js_enabled=1),
(select count(flash_enabled) from yourtable where flash_enabled=1),
(select count(non_binary_field) from yourtable where non_binary_field='yes') 
```

# jquery - jQuery翻转颜色仍然是灰色的？

> ID：11767811
> 
> 赞同：0
> 
> 时间：2012-08-01T21:25:38.800
> 
> 标签：jquery, jquery-ui, flip

[我使用来自http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)的这个翻转插件 ，效果很好，我可以在翻转动画中改变颜色，但不能完全改变。我只能在翻转功能中更改 50% 的颜色。正如您在他们的网站上看到的那样，当您翻转时，您会看到一些“灰色”。我真的很想把它改成另一种颜色。可能吗？有没有其他人这样做过？

请注意：我知道这会改变颜色，但不会完全改变它，灰色仍然存在于 50% 的翻转中

```
$("#flipbox").flip({
direction:'tb',
color:red,
content:'this is my new content'
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T16:31:50.260

使用 jQueryUI 似乎确实有所作为。我遇到了同样的问题，所以我分叉了 jquery.flip 并使它使用以前的背景颜色和新的背景颜色作为过渡颜色：

> [https://github.com/Data-ptr/Flip-jQuery](https://github.com/Data-ptr/Flip-jQuery)

我现在对 roncioso 有一个拉取请求。

# php - WINGINX下安装PEAR + PHPUnit

> ID：11767817
> 
> 赞同：0
> 
> 时间：2012-08-01T21:25:56.503
> 
> 标签：php, phpunit, pear, winginx

我需要 PHPUnit，根据他们的 GitHub 页面，我需要使用 PEAR 来安装它。

问题是，WINGINX 上默认没有安装 PEAR，我的 PHP 文件夹也没有`go-pear.bat`这里提到的文件：http: [//pear.php.net/manual/en/installation.getting.php](http://pear.php.net/manual/en/installation.getting.php)。

那么，如何在 WINGINX 上安装 PEAR / PHPUnit？

使用 Apache 不是一个选项，因为我需要学习使用 NGINX。

由于 WINGINX 仅在几个月前发布，因此几乎没有关于此的文档。

[本教程](http://www.geeksengine.com/article/install-pear-on-windows.html)也不起作用，因为 WINGINX 不支持`.htaccess`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:08:52.280

我找到了解决办法！！由于尚无有关此问题的文档，并且其他人也可能遇到此问题，因此我将在此处解释如何解决此问题：

1.  下载[go-pear.phar](http://pear.php.net/go-pear.phar)文件，放到`C:\Winginx\php5\`目录下
2.  打开终端并导航到`C:\Winginx\php5\`
3.  输入：`php go-pear.phar`然后按回车
4.  按照屏幕上的说明进行操作
5.  重启 NGINX
6.  以管理员身份打开终端
7.  运行这两个命令：

> ```
> pear config-set auto_discover 1
> pear install pear.phpunit.de/PHPUnit 
> ```

完毕！你成功安装了 PHPUnit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:34:59.247

winginx 很新。我不确定到目前为止是否内置了梨支持。您可能想咨询 winginx 的作者 Alexei Shabalin。

与此同时，这个论坛似乎发现 Alexei 说梨支持目前不存在。

[http://translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http%3A%2F%2Fforum.winginx.ru%2Fdiscussion%2F35%2Fpear- i-xml-rpc%2Fp1&act=url](http://translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http%3A%2F%2Fforum.winginx.ru%2Fdiscussion%2F35%2Fpear-i-xml-rpc%2Fp1&act=url)

# objective-c - 实例化实现它们的类时不调用委托方法

> ID：11767821
> 
> 赞同：-1
> 
> 时间：2012-08-01T21:26:14.857
> 
> 标签：objective-c, ios, ios5, ios4

我的解析器使用 MWFeedParserDelegate delagate 调用 doneParsingObjects 非常好

```
@interface Parser ()<MWFeedParserDelegate> 
...
-(void) doneParsingObjects{
      NSLog(@"test");
} 
```

现在，如果在不同的类中，我分配解析器，我的委托方法 doneParsingObjects 永远不会被调用。

```
Parser * newsParser = [[Parser alloc]init]; 
```

我知道我可以将委托添加到不同的类，但想知道为什么当我启动解析器对象并实现委托时，委托方法不会被触发。

* * *

```
/* my View Controller */
@implementation getSourceAndTopicViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    Parser * newsParser = [[Parser alloc]init];
    newsParser.dataSource = self;
    NSURL * feedURL = [NSURL URLWithString:@"http://news.yahoo.com/rss/"];
    [newsParser parseURL:feedURL];
}
/* this method never gets called. Don't know why */
-(void) Parser:(parserViewController *)parser doneParsingObjects:(NSMutableArray *)parsedItems{
    NSLog(@"Method was called");
}
_______________________________________
/* Parser.h Class */
@class Parser;
@protocol ParserDataSource
   -(void) Parser:(Parser *)parser doneParsingObjects:(NSMutableArray *)parsedItems;
@end
@interface Parser : NSObject
@property (nonatomic, weak)id <ParserDataSource > dataSource;
/* Parser.m 
I'd like to call my own datasource method in the viewController once MWFeedParser calls back feedParserDidFinish */
@interface Parser ()<MWFeedParserDelegate>{
    MWFeedParser *feedParser;
}
...
@end
@implementation Parser
...
/* This method is supposed to be called by the MWFeedParserDelegate but never gets triggered from my view controller when I instantiate newParser */
- (void)feedParserDidFinish:(MWFeedParser *)parser {
        NSLog(@"%@", self.MWFeedItems);
    [self.dataSource Parser:self doneParsingObjects:self.parsedItems; 
} 
```

我知道如果我在我的视图控制器中使用 MWFeedParserDelegate，这个问题就会得到解决，但我想让解析器成为处理 MWFeedParserDelegate 的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:29:41.483

仅仅创建一个对象不会调用委托方法。该对象旨在提供给另一个使用委托方法的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:34:13.180

事实证明，我的解析器超出了范围，因为它是在本地定义的。定义一个依赖于其他委托的委托非常有效。您只需要确保实现我们定义为属性的委托的对象。非常棘手。

感谢大家的回复。

# mysql - 无法在 MySQL 中创建函数

> ID：11767826
> 
> 赞同：0
> 
> 时间：2012-08-01T21:26:36.837
> 
> 标签：mysql, function, call, routines

我无法将自定义函数添加到我的 MySql 数据库，即使使用这样的简单函数我也有问题

```
DELIMITER $$
DROP FUNCTION IF EXISTS `foo`$$
CREATE FUNCTION `foo`(IN doWork boolean) RETURNS boolean
    NO SQL
    DETERMINISTIC
BEGIN
  return doWork;

END%%
DELIMITER ; 
```

当我执行上面的查询时，phpmyadmin 显示一切正常，但是当我想调用这个函数 phpmyadmin 说找不到这个函数时，information_schema 中的表 ROUTINES 也不包含它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:29:40.203

您的结束分隔符与定义的不同

代替

```
END%% 
```

和

```
END $$ 
```

# android - 如何使桌子成为真正的桌子

> ID：11767827
> 
> 赞同：0
> 
> 时间：2012-08-01T21:26:42.940
> 
> 标签：android, android-layout

我想创建这样的表[http://cdn5.staztic.com/cdn/screenshot/booleancalc-13-2.jpg](http://cdn5.staztic.com/cdn/screenshot/booleancalc-13-2.jpg)（不能发布图片，因为我是新人）。我应该使用哪种布局？我考虑过 TableLayout，但我没有找到同时使用垂直和水平分隔符的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:49:20.303

您可以为表格指定白色背景，为单元格指定黑色背景。每个单元格应该有 n 像素边距（取决于您希望边框的宽度）。

# php - php 打开tga并保存tga

> ID：11767828
> 
> 赞同：1
> 
> 时间：2012-08-01T21:26:44.430
> 
> 标签：php, imagick, tga

我正在尝试编辑 TGA（32 位）。目标是我打开文件，添加一些文本并将其再次保存为 TGA（32 位）。

我设法使用一些脚本打开了一个 TGA 文件，但似乎我需要 imagick 将它也保存为一个 TGA。（但使用imagick我无法打开TGA）。

有人有保存 32 位 tga 文件的示例吗？为了打开，我也可以使用 .jpg 文件

谢谢

沃特

# java - 如何使用 OSGI 远程查看 html 文件

> ID：11767830
> 
> 赞同：0
> 
> 时间：2012-08-01T21:26:45.023
> 
> 标签：java, html, http, browser, osgi

我对企业技术和 Web 开发非常陌生，我目前的项目让我陷入了困境。我正在使用 OSGI 并尝试使用 HelpGUI[我之前的 OSGI 问题](https://stackoverflow.com/questions/11761383/my-html-hyperlinks-do-not-work-in-my-osgi-bundle)，但我无法获得第 3 方库来显示来自 Java 的 html 文件。相反，我可以使用 OSGI 或其他库在本地托管这些 html 文件吗？然后我可以使用 Java 弹出一个浏览器，该浏览器指向本地主机上的 index.html 对吗？

让我知道我的思路是否合理。我用谷歌搜索了教程，但它们让我走上了我认为过于复杂的路径，或者没有让我的 html 文件可供浏览器使用。有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:24:55.837

有一种简单的方法可以做到这一点。

您需要在 OSGi 中托管 html 文件并通过 HTTP 发布它们。

1.  托管 一种选择（可能是最简单的一种）是将它们打包到捆绑包的 jar 中。

2.  通过 HTTP 发布

OSGi 规范包括一个小型嵌入式 Web 服务器和一个用于在其中发布内容的 API。您需要使用的相关服务称为 HttpService。检查 OSGi 规范或 HTTPService 的 javadoc 以了解如何使用它。您可以发布 servlet 或普通资源 - 对于您的情况，后者就足够了。您必须提供一个简短的 HttpContext 类，它知道如何找到您的 html 文件 - 例如通过使用

公共 URL getResource(String name) { return (getClass().getResource(name)); }

您可以查看[ProSyst 的 mBedded Server](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/index.html)中提供的 HTTP 演示- 它完全符合您的需要。

请注意，在某些 OSGi 框架中，默认情况下可能不会安装 HTTP 服务 - 检查安装中可用的附加包以及是否必须安装 smth 附加以使其在 OSGi 注册表中可用。

# arrays - 使用 array[array.length - 1] 或滚动您自己的方法是最佳实践吗？

> ID：11767833
> 
> 赞同：0
> 
> 时间：2012-08-01T21:26:51.317
> 
> 标签：arrays, language-agnostic

例如（在 JavaScript 中）：

```
//Not that I would ever add a method to a base JavaScript prototype... 
//(*wink nudge*)...
Array.prototype.lastIndex = function() {          
  return this.length - 1;
}

console.log(array[array.lastIndex()]); 
```

对比

```
console.log(array[array.length - 1]); 
```

从技术上讲，后一种方法少用了一个字符，但也使用了一个幻数。当然，在这种情况下，可读性可能不会真正受到影响，但幻数很糟糕。使用哪个更好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T21:28:56.037

我认为在许多情况下`1`并`0`不能真正算作“神奇数字”。当您指的是最后一项的索引（即`length - 1`）时，那肯定是我不会考虑`1`幻数的时候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:34:08.787

不同的语言有自己惯用的方式来访问数组的最后一个元素，应该使用这种方式。例如，在 Groovy 中，这将是：

```
myArray.last() 
```

在 C 语言中，很可能会这样做：

```
my_array[len - 1] 
```

在 Common Lisp 中，类似：

```
(first (last my_list)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:47:03.633

我同意@DragonWraith 的观点，即 1 不是幻数。然而，这不是关于幻数，而是关于可读性。如果你需要最后一个索引使用`myArray.lastIndex()`，如果你需要最后一个元素使用`myArray.last()`或`myArray.lastElement()`。它比阅读和理解更容易`myArray[myArray.length - 1]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:37:32.810

My take is that we should be looking for the style which the most programmers will be familiar with. Given that anyone who's been programming for more than a couple weeks in a language with this sort of array syntax (i.e., C-influenced imperative languages) will be comfortable with the idea that arrays use 0-based indexing, I suspect that anyone reading your code will understand what `array[array.length-1]` means.

The method calls are a bit less standard, and are language-specific, so you'll spend a bit more time understanding that if you're not totally familiar with the language. This alone makes me prefer the `length-1` style.

# javascript - 滚动时在页面顶部粘贴几行表格的 Jquery 插件？

> ID：11767844
> 
> 赞同：-1
> 
> 时间：2012-08-01T21:27:39.447
> 
> 标签：javascript, jquery

任何人都可以推荐一个 jquery 插件，它可以让你在页面顶部粘贴几行

即页面加载，内容在正确的位置，然后一旦内容到达页面顶部，当用户滚动时它会固定在适当的位置......然后如果他们向上滚动内容将回到原来的位置？

有问题的内容将是一些 TR 元素。

我尝试了一些，但我尝试的所有方法都有重大问题，所以我想知道您是否可以为我推荐更多选择？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:43:35.903

好的，这就是我的处理方法。

首先，我们有一个像这样的“目标”div：

```
<div id="fixedHeader">
    <table>
        <thead></thead>
    </table>
</div> 
```

具有以下CSS：

```
#fixedHeader
{
  位置：固定；
  顶部：0；
  浮动、左、右、边距等：如您所愿；
}

#fixedHeader:not(.active)
{
  显示：无；
}
```

当页面第一次加载时，我们将表格复制`thead`到这个 div 中。然后，当用户滚动以使表格的顶部不再可见时，显示此内容。当他们向上滚动时，再次隐藏它。隐藏和显示我将通过添加/删除`active`类来完成。

```
$(document).ready(function() {
    // copy over the thead
    $('#fixedHeader > table > thead').html($('#theTable > thead').html());

    // show or hide the div as necessary.
    $(window).scroll(function() {
        if ( $('#theTable > thead').offset.top < $(window).scrollTop() )
        {
            $('#fixedHeader').addClass('active');
        }
        else
        {
            $('#fixedHeader').removeClass('active');
        }
    });
}); 
```

如果用户可以滚动到表格的末尾，将会遇到问题；如有必要，您可以扩展该情况的 if 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:48:14.490

只需使用这个：

```
$("body").on("scroll",function(){
  $("tr.stickToTop").each(function(){
    if($(this).offset().y<=0){
      $(this).css({
        position: "fixed",
        top:0
      });
    } else {
      $(this).css({
        position: "static",
        top:''
      });
    }
  });
}); 
```

替换`$("tr.stickToTop")`为一些适用于您的`<tr />`元素的 jQuery 选择器。

# mysql - mysql解释需要时间

> ID：11767847
> 
> 赞同：1
> 
> 时间：2012-08-01T21:28:03.143
> 
> 标签：mysql

我正在执行以下选择查询的解释计划，并且解释计划永远不会返回。解释计划在 2-3 分钟前返回，但现在它永远不会返回。以下是我正在运行的解释查询

```
explain SELECT * FROM
((
SELECT DISTINCT hi.target_profile_id, hi.handset_id
FROM handset_inclusions hi,
campaigns c,
campaigns_target_profiles ctp
WHERE hi.target_profile_id = ctp.target_profile_id
AND c.id=ctp.campaign_id
AND c.active=1
AND c.house_ad = true
ORDER BY target_profile_id, handset_id)
UNION DISTINCT
(
SELECT DISTINCT hi.target_profile_id, hi.handset_id
FROM handset_inclusions hi,
campaigns c,
campaign_flights f,
campaigns_target_profiles ctp
WHERE hi.target_profile_id = ctp.target_profile_id
AND c.id=ctp.campaign_id
AND c.active=1
AND c.house_ad = false
AND c.id = f.campaign_id
AND (f.active_flight = true or c.id in (199,857,947)
       OR (NOW() >= DATE_SUB(f.start_time, INTERVAL 6 HOUR)
           AND NOW() <= DATE_ADD(f.end_time, INTERVAL 6 HOUR)))
ORDER BY target_profile_id, handset_id)
UNION DISTINCT
(SELECT prof.target_profile_id, h.id as handset_id
FROM  (SELECT distinct (pc.target_profile_id) as target_profile_id
       FROM placements p, sites s, publishers pubs, placement_3PNchannel pc
       LEFT OUTER JOIN 3PNchannel c
       ON c.id = pc.3PNchannel_id
       WHERE p.id = pc.placement_id
         AND p.siteid = s.id
         AND pubs.id = s.publisherid
         AND pc.active = TRUE
         AND pubs.allows_3pn)prof, handsets h, handset_inclusions i
WHERE prof.target_profile_id = i.target_profile_id
  AND i.handset_id = h.id)) t
  order by t.target_profile_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-30T08:22:49.973

这是一个[错误](https://bugs.mysql.com/bug.php?id=44802)。MySQL 似乎在运行 EXPLAIN 时执行了子查询。

似乎它应该在 MySQL >= 5.6 中修复

# r - 关于R中的矩阵比较

> ID：11767851
> 
> 赞同：9
> 
> 时间：2012-08-01T21:28:17.027
> 
> 标签：r

目前，我有两个矩阵，想比较一下，看看它们是否完全等价。在 R 中，是否有任何功能可以做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T21:59:46.500

如上所述，以`?all.equal`or开头`?identical`。如果您随后发现您的矩阵不相等，您可能需要逐列比较它们。这可能会奏效：

`mapply(as.data.frame(m1),as.data.frame(m2),FUN=function(v1,v2) all(v1==v2) )`

# javascript - 在three.js中编程一个洞/空的空间

> ID：11767852
> 
> 赞同：4
> 
> 时间：2012-08-01T21:28:21.873
> 
> 标签：javascript, three.js

我想在three.js中编写一个类似洞的东西。它应该像一个 3x3x3 的立方体，里面有一个 1x1x1 的孔。有没有可能，我首先使用诸如立方体几何之类的东西，然后使用另一个“几何”来删除我想要删除的东西？删除几何？:D

谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T23:55:14.943

如果您希望将事物“切割”成某些形状，您可能会对[这篇](http://chandler.prallfamily.com/2011/12/constructive-solid-geometry-with-three-js/)关于 Constructive Solid Geometry 库的帖子感兴趣。它带有一个用于三个.js 对象的包装器。

它可以让你做这样的事情：

```
var cube = new CSG.cube();
var sphere = CSG.sphere({radius: 1.3, stacks: 16});
var geometry = cube.subtract(sphere); 
```

=>

![在此处输入图像描述](../Images/0cf0fdc981e1b818c73358f81ce5164a.png)

[这](http://learningthreejs.com/blog/2011/12/10/constructive-solid-geometry-with-csg-js/)是关于该主题的另一个简短教程。

# oracle - SQL Developer 奇怪的错误

> ID：11767854
> 
> 赞同：0
> 
> 时间：2012-08-01T21:28:34.993
> 
> 标签：oracle, oracle-sqldeveloper

在 SQL Developer 中，我运行此查询，它给了我错误：“表或视图不存在”。我试图先停止并重新登录，仍然是同样的错误。

但我使用 TOAD 运行相同的查询，它可以工作。

SQL Developer 有什么设置会导致这种情况吗？

我的 SQL Developer 版本是 3.0.04。我对这个工具失去了信心。

```
select * from myschema.codes0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:14:29.830

因为我每天都在 SQL Developer 中执行此操作，所以该工具没有问题。我会说你几乎肯定是以没有权限的用户身份登录的`myschema`。您以什么用户身份登录？

假设 code0 是一个表，这应该告诉你是否有选择权限：

```
SELECT * FROM all_tab_privs WHERE table_owner = 'MYSCHEMA' AND table_name = 'CODES0' 
```

# c# - C#：为迭代正确锁定队列

> ID：11767858
> 
> 赞同：2
> 
> 时间：2012-08-01T21:29:15.887
> 
> 标签：c#, multithreading, locking, queue, synchronized

我正在使用队列（C#）来存储必须发送到任何连接的客户端的数据。

我的锁定语句是私有只读的：

```
private readonly object completedATEQueueSynched = new object(); 
```

只有两种方法入队：

1) 由鼠标移动启动，由主窗体线程执行：

```
public void handleEddingToolMouseMove(MouseEventArgs e)
{
    AbstractTrafficElement de = new...
    sendElementToAllPlayers(de)
    lock (completedATEQueueSynched)
    {
       completedATEQueue.Enqueue(de);
    }
} 
```

2）从一个按钮事件开始，也由 mainform-thread 执行（在这里没关系，但比抱歉更安全）：

```
public void handleBLC(EventArgs e)
{
    AbstractTrafficElement de = new...
    sendElementToAllPlayers(de);
    lock (completedATEQueueSynched)
    {
         completedATEQueue.Enqueue(de);
    }
} 
```

此方法由负责连接的特定客户端的线程调用。这里是：

```
private void sendSetData(TcpClient c)
{
    NetworkStream clientStream = c.GetStream();
    lock (completedATEQueueSynched)
    {
        foreach (AbstractTrafficElement ate in MainForm.completedATEQueue)
        {
            binaryF.Serialize(clientStream, ate);
        }
    }
} 
```

如果客户端连接并且我同时移动鼠标，则会发生死锁。如果我只锁定迭代，则会抛出 InvalidOperation 执行，因为队列已更改。

我也尝试过同步队列包装器，但它不适用于迭代。（甚至与锁结合）有什么想法吗？我只是不明白我的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:56:14.293

您可以减少争用，可能足以使其可以接受：

```
private void sendSetData(TcpClient c)
{
    IEnumerable<AbstractTrafficElement> list;

    lock (completedATEQueueSynched)
    {
        list = MainForm.completedATEQueue.ToList();  // take a snapshot
    }

    NetworkStream clientStream = c.GetStream();
    foreach (AbstractTrafficElement ate in list)
    {
       binaryF.Serialize(clientStream, ate);
    }    
} 
```

但当然，快照引入了它自己的一点时序逻辑。在任何特定时刻，“所有元素”到底是什么意思？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:36:14.470

看起来像您想要的[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

**更新**

是的，工作正常，TryDequeue 在 Interlocked.CompareExchange 和 SpinWait 中使用。Lock 不是一个好选择，因为太贵了 看看[SpinLock](http://msdn.microsoft.com/en-us/library/system.threading.spinlock%28VS.100%29.aspx) 并且不要忘记[并行编程的数据结构](http://msdn.microsoft.com/en-us/library/dd460718%28VS.100%29.aspx)

她是来自 ConcurrentQueue 的队列，如您所见`SpinWait`，并且`Interlocked.Increment`已被使用。看起来不错

```
public void Enqueue(T item)
{
  SpinWait spinWait = new SpinWait();
  while (!this.m_tail.TryAppend(item, ref this.m_tail))
    spinWait.SpinOnce();
}

  internal void Grow(ref ConcurrentQueue<T>.Segment tail)
  {
    this.m_next = new ConcurrentQueue<T>.Segment(this.m_index + 1L);
    tail = this.m_next;
  }

  internal bool TryAppend(T value, ref ConcurrentQueue<T>.Segment tail)
  {
    if (this.m_high >= 31)
      return false;
    int index = 32;
    try
    {
    }
    finally
    {
      index = Interlocked.Increment(ref this.m_high);
      if (index <= 31)
      {
        this.m_array[index] = value;
        this.m_state[index] = 1;
      }
      if (index == 31)
        this.Grow(ref tail);
    }
    return index <= 31;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:54:12.553

如果您的入队率和出队率**不是很高**，那么 Henk Holterman 的方法很好。在这里，我认为您正在**捕捉鼠标移动**。如果您希望在队列中生成大量数据，则**上述方法并不好**。锁定成为网络代码和排队代码之间的争用。**此锁的粒度是整个队列级别**。

在这种情况下，我会推荐 GSerjo 提到的 - **ConcurrentQueue**。我研究了这个队列的实现。它非常颗粒状。它在队列中的单个元素级别运行。当一个线程出队时，其他线程可以并行入队而不会停止。

# java - 将本机 sql 转换为未映射的对象

> ID：11767859
> 
> 赞同：0
> 
> 时间：2012-08-01T21:29:15.747
> 
> 标签：java, hibernate, hibernate-mapping

我正在修改现有的应用程序，我决定使用这两件事。

我的未映射对象是一个简单的对象，由 2 个整数属性组成：

```
public class EmployeeScore {

  private int id;
  private int score;
} 
```

我有一个 DAO，它执行以下操作：

```
public List<EmployeeScore> findEmployeeTotals(int regionId, int periodId) {
        DataVerify.greaterThan(regionId, 0, "Invalid Region id: Region Id cannot be zero");
        DataVerify.lessThan(regionId, 4, "Invalid Region id: Region id cannot be greater than 3");
        List<EmployeeScore> results = (List<EmployeeScore>) currentSession().createSQLQuery(
                "select n.EMP_ID, SUM(DISTINCT(nom.TOTAL_POINT)) from" +
                        " NOMINEE n join NOMINATION nom on nom.NOM_ID = n.NOM_ID" +
                        " join EMPLOYEE e on n.EMP_ID = e.EMP_ID" +
                        " join COMPANY c on c.COMPANY_CODE = e.COMPANY_CODE" +
                        " join REGION r on r.REGION_ID = c.REGION_ID" +
                        " where nom.PERIOD_ID = :periodId" +
                        " AND nom.STATUS_ID = 2" +
                        " AND e.ISACTIVE = 1" +
                        " AND nom.CATEGORY_CODE != 'H'" +
                        " AND r.REGION_ID = :regionId" +
                        " group by n.EMP_ID")
                .setParameter("regionId", regionId)
                .setParameter("periodId", periodId)
                .list();

        return results;
    } 
```

我知道这是一个巨大的查询。我的测试有问题，我假设是因为我不了解如何正确应用这两个。

我的测试如下：

```
@Test
    @Transactional(isolation = Isolation.SERIALIZABLE)
    public void testEmpScore() {
        NomPeriod period = nomPeriodHibernateDAO.findById(6);
        Region region = regionHibernateDAO.findById(1);
        List<EmployeeScore> results = winnerHibernateDAO.findEmployeeTotals(region.getId(), period.getId());
        results.toString();
        Assert.assertEquals(13, results.size());
    } 
```

它应该返回 13 个对象类型`EmployeeScore`，但它返回 0，因此测试失败。

你能指出我做错了什么的正确方向吗？我知道它必须是我的对象看到的东西，因为它没有被映射，但我无法映射 score 值或 id 值，因为它们引用了不同的表或聚合。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:07:05.550

问题是您正在查询两个整数并试图将它们解释为 EmployeeScores。Hibernate 可以做到这一点，但它需要更多的工作。

假设 EmployeeScore 有一个接受两个整数的构造函数，你可以试试

```
 select new my.package.EmployeeScore(n.EMP_ID, SUM(DISTINCT(nom.TOTAL_POINT))) ... 
```

您需要为其提供对象的完整包路径。

或者，默认情况下，我认为查询将返回 List<Object[]>。因此，您可以遍历这些并手动形成您的员工分数。

```
 List<Object[]> results = query.list();
  List<EmployeeScore> scores = new LinkedList<EmployeeScore>();

  for (Object[] arr : results)
  {
     int id = (int) arr[0];
     int total = (int) arr[1];
     scores.add(new EmployeeScore(id, total));
  } 
```

# unit-testing - 调用 EditUrl 或 NavigateUrl 的可测试 DotNetNuke 模块

> ID：11767861
> 
> 赞同：1
> 
> 时间：2012-08-01T21:29:35.460
> 
> 标签：unit-testing, tdd, dotnetnuke, dotnetnuke-module

我在开发 DNN 模块 (DNN 6.1) 时使用 WebFormsMvp 框架进行 TDD。

我正在关注我能找到的最新教程，但遇到了 DNN 的 ModuleInstanceContext 类的问题。例如，如果我尝试在演示者中调用 ModuleContext.EditUrl，单元测试会失败（真正运行模块不会失败），因为 ModuleInstanceContext 具有解析为 HttpContext 的具体实例和/或想要进行实际 Db 调用的依赖项（获取 PortalAlias 等）。

当需要调用 ModuleInstanceContext 上的方法时，DNN 社区中是否存在用于单元测试的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:02:00.050

在这些情况下，我创建了一个`NavigationService`类，我在演示者的构造函数中使用上下文对其进行初始化。例如：

```
public MyPresenter(IMyView view) : this(view, null) {}
internal MyPresenter(IMyView view, INavService navService) {
    this.navService = navService ?? new DnnNavService(this.ModuleContext);
} 
```

如果我需要从导航服务访问查询字符串，它还没有在构造函数中初始化，所以我传入一个`Lazy<NameValueCollection>`指向它的指针。

# python - 大于小于，python

> ID：11767867
> 
> 赞同：12
> 
> 时间：2012-08-01T21:29:54.417
> 
> 标签：python, if-statement

我正在做一个排名类型的事情，发生的情况是我将分数与当前分数进行比较，如果分数低于当前分数，那么玩家获得了高分，但是在这里使用此代码时

```
 print "Score = " + str(score) + ", Compared to = " + str(array[x])
        if score < array[x]:
                #Do stuff here 
```

但是即使 score 是 4 并且 array[x] 是 2 if 语句仍然完成？

难道我做错了什么？

我的理解是，如果得分 4 和数组 [x] 为 2，那么 4 大于 2，这意味着它返回 False？

* * *

这是完整的代码

```
def getRank(array, score):
    rank = 0
    rankSet = False
    for x in range(0, len(array)):
        print "Score = " + str(score) + ", Compared to = " + str(array[x])
        if score < array[x]:
            if not rankSet:
                rank = x
                print "Set rank to: " + str(rank)
                rankSet = True
        elif score == array[x] or score > array[x]:
            rank += 1
            print "Rank higher than " + str(x)
    print "Rank = " + str(rank)
    return rank 
```

如果 score = 4 并且数组由 [1, 2] 组成，它会打印这个

```
Score = 4, Compared to = 1
Set rank to: 0
Score = 4, Compared to = 2
Rank = 0 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T21:32:14.590

检查以确保 score 和 array[x] 都是数字类型。您可能正在将整数与字符串进行比较……这在 Python 2.x 中令人心碎。

```
>>> 2 < "2"
True
>>> 2 > "2"
False
>>> 2 == "2"
False 
```

编辑

进一步解释：[Python如何比较string和int？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

# apache - 使用 WP Super Cache 的 Wordpress Multisite 的 Nginx 反向代理配置

> ID：11767869
> 
> 赞同：0
> 
> 时间：2012-08-01T21:30:03.593
> 
> 标签：apache, caching, nginx, wordpress

我正在尝试将 nginx 设置为反向代理，用于在 apache 前面提供静态文件。我在使用 WP Super Cache 为 Wordpress 多站点配置 nginx 时遇到问题。我有以下配置，但不起作用：

```
server {
listen 80;

# Main site domain
server_name main.com *.main.com;

# Mapped domains
server_name mapped.com www.mapped.com;

root /home/me/www/wordpress/htdocs;
access_log /home/me/www/wordpress/logs/access.log;
error_log /home/me/www/wordpress/logs/error.log;
index index.php index.html index.htm;

error_page 404 = @wordpress;
log_not_found off;

location / {
    try_files $uri $uri/ /index.php?$args;
}

rewrite /wp-admin$ $scheme://$host$uri/ permanent;

location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires 24h;
    log_not_found off;
}

############## WP MULTISITE ############## 

rewrite ^/files/(.+) /wp-includes/ms-files.php?file=$1 last;

location ^~ /files/ {
    rewrite ^.*/files/(.+)$ /wp-includes/ms-files.php?file=$1 last;
}

# Rewrite multisite '.../wp-.*' and '.../*.php'.
if (!-e $request_filename) {
    rewrite ^/[_0-9a-zA-Z-]+(/wp-.*) $1 last;
    rewrite ^/[_0-9a-zA-Z-]+(/.*\.php)$ $1 last;
}

############## WP MULTISITE ##############

############## WP SUPER CACHE ############

if (-f $request_filename) {
     #expires max;
     break;
  }
  if (-d $request_filename) {
     break;
  }
  set $supercache_file '';
  set $supercache_uri $request_uri;

  if ($request_method = POST) {
     set $supercache_uri '';
  }
  if ($query_string) {
     set $supercache_uri '';
  }

  if ($http_cookie ~* "comment_author_|wordpress|wp-postpass_" ) {
     set $supercache_uri '';
  }

  if ($supercache_uri ~ ^(.+)$) {
     set $supercache_file /wp-content/cache/supercache/$http_host/$1index.html;
  }

  if (-f $document_root$supercache_file) {
     rewrite ^(.*)$ $supercache_file break;
  }

############## WP SUPER CACHE ############

location @wordpress {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass   http://127.0.0.1:8080;
}

location ~ \.php$ {
    try_files $uri @wordpress;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass   http://127.0.0.1:8080;
}
} 
```

加载页面时出现以下错误：

```
main.com : 310 - ERR_TOO_MANY_REDIRECTS
main.com/wp-admin/ : Loads WP admin page
www.main.com : Welcome to nginx!
mapped.com / www.mapped.com: 403 - Forbidden - "You don't have permission to access /index.php on this server." 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:05:45.713

在您的主题目录中编辑functions.php。

添加这些代码：

```
remove_filter('template_redirect', 'redirect_canonical'); 
```

或者

安装这个插件： [http ://wordpress.org/extend/plugins/permalink-fix-disable-canonical-redirects-pack/](http://wordpress.org/extend/plugins/permalink-fix-disable-canonical-redirects-pack/)

# javascript - 回调的持久性 | 对象属性与函数参数

> ID：11767870
> 
> 赞同：1
> 
> 时间：2012-08-01T21:30:12.560
> 
> 标签：javascript

我注意到我一直在我的代码中使用这两种方法 - 可以互换和随机使用。特别是，当我有一个回调并且当函数被“回调”时我需要一个值来保持。使用传递参数或静态参数是否重要？我所说的静态是指函数对象属性。我松散地使用这个词。这是我正在处理的示例。

```
 message_object.display( type );
    document.getElementById( 'po_but_cov' ).style.display='inline';
    pos = 30;
    MC.MATweet.movePane.dir = 'down';
    MC.MATweet.movePane( pane_element, pos );

    return o_p;
},
movePane: function( pane_element, pos ) {
    if( ( MC.MATweet.movePane.dir === 'down' ) && ( pos < 70 ) ) {
        pos += 1;
        pane_element.style.top = ( pos ) + 'px';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos ); }, 1 );
    }
    else if( ( MC.MATweet.movePane.dir === 'down' ) && pos === 70 ) { 
        MC.MATweet.movePane.dir = 'up';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos ); }, 2000 );
    }
    else if( ( MC.MATweet.movePane.dir === 'up' ) && ( pos > 30 ) ) {
        pos -= 1;
        pane_element.style.top = ( pos ) + 'px';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos ); }, 1 );
    }
    else if( ( MC.MATweet.movePane.dir === 'up' ) && ( pos === 30 ) ) {
        document.getElementById( 'po_but_cov' ).style.display='none';
    }
}, 
```

如您所见，我将`pos`其用作传递参数，并将`MC.MATweet.movePane.dir`其用作静态参数。在设定的时间后回调函数时，我需要两者都可用。

我想让我的代码风格更加一致。出于某种原因，更改更多的值`pos`，我作为参数传递，而仅在`MC.MATweet.movePane.dir`我用作静态变量时才更改的值。不要认为这是相关的，只是反映。

我怎样才能更一致？你选择哪一个有关系吗？

仅供参考，此代码只是为一个框设置动画，将其向下移动、暂停并向上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:56:39.410

现在继续使用直接参数，这样我就可以将初始化移到初始函数调用中。

**结果代码：**

```
 message_object.display( type );
    document.getElementById( 'po_but_cov' ).style.display='inline';
    MC.MATweet.movePane( pane_element, 30, 'down' );

    return o_p;
},
movePane: function( pane_element, pos, dir ) {
    if( ( dir === 'down' ) && ( pos < 70 ) ) {
        pos += 1;
        pane_element.style.top = ( pos ) + 'px';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 1 );
    }
    else if( ( dir === 'down' ) && pos === 70 ) { 
        dir = 'up';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 2000 );
    }
    else if( ( dir === 'up' ) && ( pos > 30 ) ) {
        pos -= 1;
        pane_element.style.top = ( pos ) + 'px';
        setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 1 );
    }
    else if( ( dir === 'up' ) && ( pos === 30 ) ) {
        document.getElementById( 'po_but_cov' ).style.display='none';
    }
}, 
```

# javascript - jQuery 选择器在从 ajax 解析的 HTML 中的行为不符合预期

> ID：11767871
> 
> 赞同：7
> 
> 时间：2012-08-01T21:30:17.003
> 
> 标签：javascript, jquery, html, jquery-plugins, jquery-selectors

我今天遇到了一个奇怪的问题，我希望其他人能帮助我解决这个问题。

我正在做的项目或多或少是一个 jQuery 幻灯片。我有一个超级简单的文件，我正在加载它来测试所有内容，它看起来像这样：

```
<!doctype html public "(╯°□°）╯︵ ┻━┻">
    <html>
        <head>
            <meta charset="utf-8">
            <title>test</title>
        </head>
        <body>
            <div id="slides" data-slidesShow="holder">
                <div class="slide" id="test1">test div 1</div>
                <div class="slide" id="test2">test div 2</div>
                <div class="slide" id="test3">test div 3</div>
            </div>

            <button id="previous">previous</button>
            <button id="next">next</button>

            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
            <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>

            <script type="text/javascript" src="js/slides.js"></script>

            <?php include 'footer.php'; ?>
        </body>
    </html> 
```

再一次，这里甚至没有什么特别的。

现在，在 jQuery 中，我正在获取并解析页面，例如：

```
$.ajax({
    url:      target.path,
    dataType: "html",
    complete: function(data){
        var $slides     =   $('[data-slidesShow="holder"]', $(data.responseText));

        console.log($slides); // returns []
    }
}); 
```

但！$slides 返回一个空数组，除非我将它包装在一个无意义的 div 中，例如：

```
<div class="stupid-wraper-div-that-i-dont-want-or-need">
    <div id="slides" data-slidesShow="holder">
        <div class="slide" id="test1">test div 1</div>
        <div class="slide" id="test2">test div 2</div>
        <div class="slide" id="test3">test div 3</div>
    </div>
</div> 
```

现在：

```
console.log($slides); // returns [<div id="slides" data-slideShow="holder">...</div>] 
```

我已经阅读了关于这个（http://api.jquery.com/jQuery/）和其他 StackOverflow 对话的 jQuery 文档，但没有一个解释为什么我需要一个包装器 div 来返回结果。

有任何想法吗？我知道这不是一个大问题，但是当我找到问题的根源时，我不想破解修复程序。

...

TL；DR：jQuery 在范围内的选择仅适用于奇怪的包装 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:38:13.230

当您将上下文传递给 时`$()`，您要求选择器在其后代中查找给定元素（这类似于`.find()`）。如果没有您的 wrapper `div`，您要查找的元素就是上下文元素，因此您的选择器将无法找到它，因为它正在查看它的内部。

您应该使用`.filter()`它来过滤一组元素而不是搜索它们的后代：

```
var $slides = $(data.responseText).filter('[data-slidesShow="holder"]'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:34:09.467

您需要使用过滤器。

```
$(data.responseText).filter('[data-slidesShow="holder"]') 
```

html 和 body 标签被浏览器剥离，留下它们的内容。

# android - 后台安卓浏览器

> ID：11767873
> 
> 赞同：0
> 
> 时间：2012-08-01T21:30:19.700
> 
> 标签：android, asp.net

我正在为安卓浏览器开发一个网页。该页面将对用户进行身份验证。我放置了一个 iframe，它每 10 分钟刷新一次，以在页面打开时保持用户登录。但是，如果用户切换到另一个将 Web 浏览器置于后台的应用程序，则保持登录状态的刷新将停止。因此，当用户切换回浏览器时，会话丢失并且错误从我在该页面中的 ajax 调用中弹出.....当浏览器被发送到后台并保持会话活动时，我该如何处理这种情况？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:33:34.243

当你的应用失去焦点时，它会调用你的 Activity`onPause()`的`onStop()`方法。

如果你想让事情在后台工作，你必须在`Service`. 没有更好的方法来执行后台任务。

# java - 在 Android 上向/从文件加载捆绑包

> ID：11767874
> 
> 赞同：4
> 
> 时间：2012-08-01T21:30:19.460
> 
> 标签：java, android

我正在做一些 Android 编码，我经常做的事情是创建包含我的静态列表项的 plist。当我必须执行多层列表视图时，这非常有帮助，用户可以向下钻取以查找信息。（例如 Continent --> Country --> City ）然后我要做的是编写一个列表视图，将其自身的副本推入更深的数据树中。

但是，在 Android 上，我似乎找不到任何与 plist 等效的方法，可以让我执行上述操作（无需创建 SQL 数据库）。

所以我最终做的是对所有内容进行硬编码......这不是我想做的事情。Android 有大量可用的 xml 资源，这就是我觉得我应该遵循的模式。

```
ArrayList<Bundle> data = new ArrayList<Bundle>();

Bundle infoHeader = new Bundle();
infoHeader.putInt(keyText,R.string.stay_informed);
infoHeader.putInt(keyLayout,R.layout.main_header);
data.add(infoHeader);

Bundle readAction = new Bundle();
readAction.putInt(keyText,R.string.read);
readAction.putInt(keySubtext, R.string.read_substr);
readAction.putInt(keyLayout, R.layout.main_row_blue);
// link to new ArrayList of items for the next level down
data.add(readAction); 
```

我想做的是以下（或与之非常相似的）：

```
<resources>
<array name="main_list">
    <extra>
        <string name="keyText" value="@string/stay_informed" />
        <layout name="keyLayout" value="@layout/main_header" />
    </extra>
    <extra>
        <string name="keyText" value="@string/read" />
        <string name="keySubtext" value="@string/read_substr" />
        <layout name="keyLayout" value="@layout/main_row_blue" />
        <!-- <string name="keyLink" value="@array/detail_list" /> Where detail_list has more Bundles -->
    </extra>
</array>
</resource> 
```

并且只需在运行时加载该 Bundle 数组，而不是将其硬编码到应用程序中。

所以。如何有效地存储/检索Android 上的 a `NSArray`of等价物？`NSDictionaries`

（我发现了[android plist parser](https://github.com/tenaciousRas/android-plist-parser/wiki/Android-PList-Parser)，但我想知道它是如何在 Android 上完成的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:20:15.527

好吧，我会试一试。我目前正在从 Android 到 iOS（与您完全相反），所以我了解您正在尝试做什么（我认为）。Java 没有“字典”，但它确实有 HashMaps（键/值配对——同样的事情）。如果你真的想要，你可以使用序列化将你的对象保存到一个文件中，你可以将它打包到 Android 的 assets 文件夹中。然后，您可以随时阅读（但不能写入）此信息。

这是帮助您序列化 Java 对象的链接。在 Java 中搜索 HashMaps，你会看到很多东西。如果要在这个 HashMap 中放置许多不同类型的对象，请不要使用泛型。（它们看起来像这样`<String, String>`）。把这些留在外面来制作一个原始的 HashMap。

序列化：（当你坚持它） [http://www.javadb.com/writing-objects-to-file-with-objectoutputstream](http://www.javadb.com/writing-objects-to-file-with-objectoutputstream)

反序列化：（当你读回来时） [http://www.exampledepot.com/egs/java.io/DeserializeObj.html](http://www.exampledepot.com/egs/java.io/DeserializeObj.html)

另一种可能更简单的方法是创建一个 XML 文件（就像您在上面所做的那样）并将其存储在 assets.xml 中。然后，您可以在应用程序启动时使用 XMLPullParser 对其进行解析，并在应用程序运行期间将其存储在内存中，但您将无法使用“@layout、@string”等。

# android - Android ADT 20.0.2 未在 Eclipse 中注册

> ID：11767882
> 
> 赞同：0
> 
> 时间：2012-08-01T21:31:18.680
> 
> 标签：android, eclipse, adt

我正在尝试将 Android ADT 插件添加到 Eclipse 中。它下载并安装正常，没有错误，但是当我重新启动 Eclipse 时更改不会显示。我正在使用 Juno，但我也在 Indigo 上尝试过这个并且遇到了同样的问题。我正在使用 Windows 7、64 位。Eclipse 版本是 32 位。我尝试以管理员身份运行，将文件夹移动到 c:/eclipse...，使用 eclipse -clean 从命令行运行。我已经多次尝试新安装。在帮助 - 关于 eclipse - 安装详细信息 - 已安装的软件中，出现了 Android 开发工具。当我转到 windows - 首选项时，android 不会出现在左侧。我可以在插件文件夹中看到 com.android.ide.eclipse.adt_20.0.2.v201207191942-407447 文件以及其他文件。要安装 Eclipse，我所做的只是下载 zip，用windows资源管理器打开，把eclipse文件夹移到桌面。文件结构不变。

我还尝试删除 c:/users 中的 .eclipse 和 .android 文件夹。我尝试将 zip 文件下载到我的桌​​面并使用存档按钮安装软件。没运气。

只是想知道，您是否需要在ADT之前安装Android sdk？

希望它的东西简单。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:42:47.683

我也使用 Win7 64 位、Eclipse (indigo 和 Juno) 32 位和 ADT，并且工作正常。我正在为 Java 开发人员使用 Eclipse

在已安装的软件上，您应该看到 ADT：（确保在安装新软件时安装了所有项目）除了 NDK 之外，您需要显示的所有项目，除非计划用 C++ 编写代码；我在已安装的软件上显示了这一点：Android DDMS Android Development Tools Android hierarchy Viewer Android Traceview

还请记住，您需要用于开发的 android SDK，它是一个单独的安装程序。 [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:33:03.387

我不确定问题出在哪里，但我安装了 64 位 Juno 和 64 位 Java JDK。我删除了旧的 jdk，这可能是问题的一部分。无论出于何种原因，它现在正在工作。谢谢。

# google-fusion-tables - 融合表输入到日历中

> ID：11767894
> 
> 赞同：1
> 
> 时间：2012-08-01T21:32:33.473
> 
> 标签：google-fusion-tables

我有一个包含我的客户数据库的融合表。一栏是安装日期。我希望能够在谷歌日历中查看该信息。有没有人有一个简单的方法来实现它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T10:19:03.227

因为它看起来是一个很酷的挑战，所以我在这里完成了它：

[https://github.com/fontanon/google-fusiontables2calendar](https://github.com/fontanon/google-fusiontables2calendar)

它提供了一个配置文件，使每个人都可以更轻松地进行设置：

```
<?php 

// ::auth config::
// Google Public API Access Key. Don't forget to activate Google API for fusion tables
// Get one and configure access and perms at https://console.developers.google.com
$API_KEY="add yours";

// ::fusion tables config::
// The Fusion Tables ID (find it at fusion tables URL: the docid param)
$TABLE_ID="add yours";

// Name of columns to retrieve from the fusion table, separated by ','.
// Below ones are mandatory for building the calendar, and its position sensitive.
$COL_NAMES="summary,description,start,end,location,url";

// Date format in the fusion table. Examples: d/M/Y, Y-M-d H:i:s, YMdTHisZ ...
$DATE_FORMAT="add yours";

// ::calendar config::
// Name of your calendar
$CAL_NAME="add yours";

// Description of your calendar
$CAL_DESC="add yours";

// Timezone of your calendar. Examples: US/Pacific, Europe/Madrid
$CAL_TZ="add yours";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:54:05.560

我不认为这个功能已经存在，但自己做这个并不难。

您可以使用Fusion Tables[的客户端库](https://developers.google.com/fusiontables/docs/v1/libraries)之一（例如[Google APIs Client Library for PHP](http://code.google.com/p/google-api-php-client/)），然后连接到您的 Fusion Table，获取您的数据并[生成 iCal 文件](https://stackoverflow.com/questions/1463480/how-can-i-use-php-to-dynamically-publish-an-ical-file-to-be-read-by-google-calen)。然后，您可以将生成的文件导入 Google 日历，或者只在网络服务器上提供您的脚本，然后在 Google 日历中订阅您生成的日历。

我很快用 PHP[编写了这样一个脚本（网址：http:](https://github.com/odi86/GFTPrototype/blob/master/examples/php/GFTCalendar.php) [//gft.rdmr.ch/examples/php/GFTCalendar.php](http://gft.rdmr.ch/examples/php/GFTCalendar.php)），也许你可以从它开始，或者只是使用你最喜欢的编程语言自己做.

# ajax - primefaces ajax 更新元素

> ID：11767895
> 
> 赞同：1
> 
> 时间：2012-08-01T21:32:45.770
> 
> 标签：ajax, datatable, primefaces

我在这里有一个我不明白的行为。我正在使用 Spring 3.1、Primefaces 3.3.1 和 JSF 2。

我正在使用数据表并希望通过表单中的对话框添加一行。这是我的表格，包括调用对话框的按钮：

```
<h:form id="form">

            <!-- open the dialog on click -->
    <p:commandButton value="New" onclick="dlgAddTask.show()"
        update="taskList" />

    <p:dataTable var="task" value="#{taskBean.tasks}" id="taskList"
        widgetVar="taskList" editable="true" rowkey="task.id"
        paginator="true" rows="50"
        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="25,50,100">

        <p:ajax event="rowEdit" update="@this" listener="#{taskBean.save}" />

        <p:column headerText="Name" style="width:125px">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{task.name}" style="width:100%" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{task.name}" style="width:100%" />
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column style="width:20px">
            <p:rowEditor />
        </p:column>

    </p:dataTable>

</h:form> 
```

这是我与相关 javascript 的对话（与表格的形式相同）：

```
 <p:dialog id="dlgAddTask" header="Add New Task" widgetVar="dlgAddTask">
        <h:form>

            <h:panelGrid columns="2" cellpadding="5" width="500">
                <h:outputLabel for="name" value="Name" />
                <p:inputText value="#{addTaskBean.name}" id="name" required="true"
                    label="name" />

                <h:outputLabel for="description" value="Description:" />
                <p:inputTextarea value="#{addTaskBean.description}"
                    id="description" label="description" />

                <h:outputLabel for="dueTo" value="Due To:" />
                <p:calendar value="#{addTaskBean.dueTo}" id="dueTo" label="dueTo" />

                <h:outputLabel for="done" value="Done:" />
                <p:selectBooleanCheckbox value="#{addTaskBean.done}" id="done"
                    label="done" />

                <f:facet name="footer">
                    <p:commandButton id="addButton" value="Add"
                        actionListener="#{addTaskBean.addTask}"
                        oncomplete="handleLoginRequest(xhr, status, args)" />                       

                    <p:commandButton value="Cancel" onclick="dlgAddButton.hide()" />
                </f:facet>
            </h:panelGrid>

        </h:form>
    </p:dialog>

    <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.taskAdded) {
                    jQuery('#dialog').effect("shake", {
                        times : 3
                    }, 100);
                } else {
                    dlgAddTask.hide();
                }
            }
        </script>

</h:form> 
```

这是我的 Bean（省略了 getter 和 setter）：

```
public class AddTaskBean {

@Inject
TaskDao taskDao;

private boolean done;

private String name;

private String description;

private Date dueTo;

@Transactional
public void addTask() {

    RequestContext context = RequestContext.getCurrentInstance();
    FacesMessage msg = null;
    Task task = new Task();
    boolean taskAdded = false;

    task.setDescription(getDescription());
    task.setDone(isDone());
    task.setDueTo(getDueTo());
    task.setName(getName());

    if (taskDao.persist(task) != null) {
        taskAdded = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Task",
                getName() + " added.");
    } else {
        taskAdded = false;
        msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Task Error",
                "Something went wrong on adding task.");
    }

    FacesContext.getCurrentInstance().addMessage(null, msg);
    context.addCallbackParam("taskAdded", taskAdded);

} 
```

现在，如果我打开对话框，添加一个任务，它会一直运行到更新点。所以我在数据库中有一个新任务，对话框关闭，但表没有更新。按 F5 会显示表格中的新任务。

但是（请仔细阅读，因为这对我来说有点棘手），如果我在添加任务后不关闭对话框（通过不通过 oncomplete="handleLoginRequest(xhr, status, args)" 调用 javascript），任务也将被添加，但对话框当然保持打开状态。如果我按下取消，对话框关闭并且表格得到更新，我可以看到新任务。

我无法解释这一点，也许你们中的一个可以？

提前致谢

# asp.net-mvc - MVC [HttpPost/HttpGet] 用于操作

> ID：11767911
> 
> 赞同：54
> 
> 时间：2012-08-01T21:34:19.760
> 
> 标签：asp.net-mvc, model-view-controller

我正在使用 MVC C#。

有人可以举例说明为什么要使用

```
[HttpPost/HttpGet] 
```

为一个动作。一个主动者怎么能两者兼得——有什么实际用途？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-01T21:37:58.820

假设您有一个`Login`操作，它为用户提供登录屏幕，然后在用户提交表单后接收用户名和密码：

```
public ActionResult Login() {
    return View();
}

public ActionResult Login(string userName, string password) {
    // do login stuff
    return View();
} 
```

MVC 没有得到明确的指示，说明哪个动作是哪个，即使我们可以通过查看它来判断。如果将 [HttpGet] 添加到第一个动作，将 [HttpPost] 添加到部分动作，MVC 清楚地知道哪个动作是哪个。

为什么？请参阅[请求方法](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)。长与短：当用户查看页面时，这是一个 GET 请求，而当用户提交表单时，这通常是一个 POST 请求。HttpGet 和 HttpPost 只是将操作限制为适用的请求类型。

```
[HttpGet]
public ActionResult Login() {
    return View();
}

[HttpPost]
public ActionResult Login(string userName, string password) {
    // do login stuff
    return View();
} 
```

如果您的操作服务于来自多个动词的请求，您还可以组合请求方法属性：

`[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]`.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-08-14T18:57:42.493

您不需要同时指定两者，除非您特别限制*其他*动词（即您不想要 PUT 或 DELETE 等）。

与一些评论相反，我也无法同时使用这两个属性`[HttpGet, HttpPost]`，但能够指定两个动词。

## 行动

```
 private ActionResult testResult(int id)
    {
        return Json(new {
                            // user input
                            input = id,
                            // just so there's different content in the response
                            when = DateTime.Now,
                            // type of request
                            req = this.Request.HttpMethod,
                            // differentiate calls in response, for matching up
                            call = new StackTrace().GetFrame(1).GetMethod().Name
                        },
                        JsonRequestBehavior.AllowGet);
    }
    public ActionResult Test(int id)
    {
        return testResult(id);
    }
    [HttpGet]
    public ActionResult TestGetOnly(int id)
    {
        return testResult(id);
    }
    [HttpPost]
    public ActionResult TestPostOnly(int id)
    {
        return testResult(id);
    }
    [HttpPost, HttpGet]
    public ActionResult TestBoth(int id)
    {
        return testResult(id);
    }
    [AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
    public ActionResult TestVerbs(int id)
    {
        return testResult(id);
    } 
```

## 结果

*通过 POSTMAN，通过[markdowntables格式化](http://www.tablesgenerator.com/markdown_tables)*

```
| Method    | URL                   | Response                                                                                  |
|--------   |---------------------- |----------------------------------------------------------------------------------------   |
| GET       | /ctrl/test/5          | { "input": 5, "when": "/Date(1408041216116)/", "req": "GET", "call": "Test" }             |
| POST      | /ctrl/test/5          | { "input": 5, "when": "/Date(1408041227561)/", "req": "POST", "call": "Test" }            |
| PUT       | /ctrl/test/5          | { "input": 5, "when": "/Date(1408041252646)/", "req": "PUT", "call": "Test" }             |
| GET       | /ctrl/testgetonly/5   | { "input": 5, "when": "/Date(1408041335907)/", "req": "GET", "call": "TestGetOnly" }      |
| POST      | /ctrl/testgetonly/5   | 404                                                                                       |
| PUT       | /ctrl/testgetonly/5   | 404                                                                                       |
| GET       | /ctrl/TestPostOnly/5  | 404                                                                                       |
| POST      | /ctrl/TestPostOnly/5  | { "input": 5, "when": "/Date(1408041464096)/", "req": "POST", "call": "TestPostOnly" }    |
| PUT       | /ctrl/TestPostOnly/5  | 404                                                                                       |
| GET       | /ctrl/TestBoth/5      | 404                                                                                       |
| POST      | /ctrl/TestBoth/5      | 404                                                                                       |
| PUT       | /ctrl/TestBoth/5      | 404                                                                                       |
| GET       | /ctrl/TestVerbs/5     | { "input": 5, "when": "/Date(1408041709606)/", "req": "GET", "call": "TestVerbs" }        |
| POST      | /ctrl/TestVerbs/5     | { "input": 5, "when": "/Date(1408041831549)/", "req": "POST", "call": "TestVerbs" }       |
| PUT       | /ctrl/TestVerbs/5     | 404                                                                                       | 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-08T17:12:28.120

在 Mvc 4 中你可以使用 AcceptVerbsAttribute，我认为这是一个非常干净的解决方案

```
[AcceptVerbs(WebRequestMethods.Http.Get, WebRequestMethods.Http.Post)]
public IHttpActionResult Login()
{
   // Login logic
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-01T21:37:36.783

您不能将其与属性结合起来。

但是您可以将两者都放在一个操作方法上，但您可以将您的逻辑封装到另一个方法中并从两个操作中调用此方法。

该`ActionName`属性允许有 2 个同名的 ActionMethod。

```
[HttpGet]
public ActionResult MyMethod()
{
    return MyMethodHandler();
}

[HttpPost]
[ActionName("MyMethod")]
public ActionResult MyMethodPost()
{
    return MyMethodHandler();
}

private ActionResult MyMethodHandler()
{
    // handle the get or post request
    return View("MyMethod");
} 
```

# javascript - 使用 jsRender，如何使用序数位置以外的东西从数组中提取特定项目？

> ID：11767914
> 
> 赞同：1
> 
> 时间：2012-08-01T21:34:40.107
> 
> 标签：javascript, json, templates, jsrender

我正在尝试使用 jsRender 呈现一些 JSON 数据。下面是我的示例 JSON 数据

```
"PageContentList": [
    {
        "ContentId": 51, 
        "Title": "60 seconds with Rick", 
        "ContentMediaTypeList": [
            {
                "MimeType": "image/png", 
                "MediaTypeName": "Image", 
                "Path": "http://local.admin.solutiaconsulting.com/uploads/4a906d8e-983a-4b54-a627-0e8d48145620.png"
            }, 
            {
                "MimeType": "video/webm", 
                "MediaTypeName": "Video", 
                "Path": "http://local.admin.solutiaconsulting.com/uploads/3a6c56c3-0ef9-4f57-9c84-9caa48a09044.webm"
            }
        ]
    }
] 
```

我想根据 MediaTypeName 而不是序号位置提取不同的图像。我知道我可以这样做：

{{:ContentMediaTypeList[1].Path}}

我知道我可以做到这一点：

{{for ContentMediaTypeList}} {{if MediaTypeName == 'Video'}} {{:Path}} {{/if}} {{/for}}

但第二种方法似乎繁琐且浪费。我想做的甚至可能吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:27:11.087

谢谢查理的回复。我最终将 JSON 的结构更改为：

```
"PageContentList": [
    {
        "ContentId": 44, 
        "Title": "Company Name", 
        "Gallery": {
            "Images": [
                {
                    "Path": "http://local.admin.solutiaconsulting.com/uploads/9b577ef7-ea8a-42a1-b967-89debbc634c0.jpg", 
                    "MimeType": "image/jpeg", 
                    "ImageWidth": 0, 
                    "ImageHeight": 0, 
                    "AltText": null
                }
            ], 
            "Videos": [ ]
        }
    },
   .... 
] 
```

然后对于我的模板：

```
{{for PageContentList}}
<video id="whatIsSolutiaVideo" class="video-js vjs-default-skin" controls width="{{:Gallery.Images[0].ImageWidth}}" height="{{:Gallery.Images[0].ImageHeight}}" poster={{:Gallery.Images[0].Path}}" preload="auto">
{{for Gallery.Videos}}
<source type="{{:MimeType}}" src="{{:Path}}">
 {{/for}}
 </video>
 {{/for}} 
```

我知道每个 JSON 数据都会有一个图像、视频等部分。现在它变成了一个数据输入问题。如果数据输入人员的工作做得对，那么就会有数据。我采用的方法确保了正确的数据结构。谢谢你强迫我思考这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:39:33.997

没有简单的方法可以做到这一点，因为您不应该在视图中执行那种逻辑。在渲染之前将过滤器放置在模型或控制器中。

在这种情况下，我能想到的一个例外是，如果您想限制要显示的项目数量。根据情况，这可能是也可能不是适合视图的任务。

**例子：**

**将限制的逻辑排除在视图之外：**
- 堆栈溢出问题列表与分页（限制、偏移、排序）

**在视图中实施限制：**
- 每个问题的附加图像列表。您的移动视图只有空间可以显示每个问题。适合桌面的视图有三个空间。

但是，如何构建您的应用程序以及在何处放置您的逻辑是一个有很多意见的争论。这种分离方式是我从经验和同龄人那里学到的，但我相信有很多人有不同的想法。

这是使用 underscore.js 过滤数据的简单方法。

```
 var videoContent = _.filter(contentMediaTypeList, function(mediaType) {
      return mediaType.mediaTypeName == "video"; 
 }); 
```

工作`JSFiddle`：http: [//jsfiddle.net/n98yW/](http://jsfiddle.net/n98yW/)

或从中创建一个`closure`以实现可重用性

```
var mediaTypeFilter = function(mediaTypeName) {
     return function(contentMediaTypeList) {
           return _.filter(contentMediaTypeList, function(currMediaType) {
                return currMediaType.MediaTypeName == mediaTypeName;
           });
     }
}; 
```

并像这样使用它

```
var videoFilter = mediaTypeFilter("video");    
var videoContent = videoFilter(contentMediaTypeList); 
```

这是使用闭包的另一个`JSFiddle`解决方案：http: [//jsfiddle.net/GA55g/2/](http://jsfiddle.net/GA55g/2/)

# java - Singleton and Builder（约书亚的方式）

> ID：11767915
> 
> 赞同：4
> 
> 时间：2012-08-01T21:34:44.870
> 
> 标签：java, builder

我正在构建一个基于 Joshua 的构建器模式的构建器。我的问题是如何使它成为单例？详细说明我的观点，如果我有以下构建器

```
public class Widget {
    public static class Builder {
        private String name;

        public Builder( String name) {
            this.name = name;
        }

        public Widget build() {
            Widget result = new Widget(this);
            return result;
        }
        public Builder model( String value ) {
            this.model = value;
            return this;
        }
    }

    private final String name;

    private Widget( Builder b ) {
        this.name = b.name;
    }

    // ... etc. ...
} 
```

我会从另一个类中调用这个构建器，比如 new Widget.Builder().name("abc").build().......

但是如果我只想要这个小部件的一个实例，或者我需要从多个地方访问这个小部件，而不是每次都创建一个新的，该怎么办。理想情况下，我想将实例化限制在 Widget 类中。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T21:41:04.670

恕我直言，Singleton 和 Builder 模式似乎并没有结合在一起：如果只有一个实例要构建，为什么还需要 builder？

如果您需要重用一个 Builder 对象，因为您想多次构建一个类似的对象，您可以简单地保留对该 Builder 的引用并根据需要多次使用它（因为您将其设为静态）：

```
Widget.Builder builder = new Widget.Builder("abc").model("def"); 
```

然后你可以创建几个小部件：

```
Widget w1 = builder.build();
Widget w2 = builder.build();
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:04:16.580

如果你真的需要一个单例，Joshua 也有关于[在现代 Java 中制作单例的最佳方法的](http://www.informit.com/articles/article.aspx?p=1216151&seqNum=3)建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:06:13.443

如果您需要这样做，并且希望避免污染您的构建器模式，那么添加一个单例来保存构建器的集中实例。

```
public enum CentralWidgitBuilder{
  INSTANCE; //Effective Java singleton technique

  private final Widget.Builder mBuilder = new Widget.Builder();

  public Widget.Builder getBuilder(){
    return mBuilder;
  }
} 
```

然后从任何地方引用：

```
CentralWidgitBuilder.INSTANCE.getBuilder(). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:56:53.640

如果只有一个构建器对象，那么您可以像这样使用单例模式：

```
public class Widget {
public static class Builder {
    private static Builder builder;
    private String name;

    public Builder getInstance(String name){
       if (instance==null){
         instance=new Builder(name);
       }
       return instance;
    }

    private Builder( String name) {
        this.name = name;
    }

    public Widget build() {
        Widget result = new Widget(this);
        return result;
    }
    public Builder model( String value ) {
        this.model = value;
        return this;
    }
}

private final String name;

private Widget( Builder b ) {
    this.name = b.name;
}

// ... etc. ...
} 
```

如果您有多个构建器，则可能需要此类中的静态 Map

# html - 仅在 HTML/CSS 中以最小宽度/高度缩放 HTML 中的图像

> ID：11767916
> 
> 赞同：3
> 
> 时间：2012-08-01T21:34:48.543
> 
> 标签：html, css, image, scaling

我必须在页面中显示一堆图像。图片大小不一，有的很宽，有的很薄。我想把它们都放在一个固定宽度和固定高度的容器中。

放置图片的逻辑应该是这样的：假设图片小于容器，将其放大到最大尺寸以保持纵横比，并将其放在容器的中心。如果图像较大，请在保持纵横比的同时缩小图像。

一些例子：假设我们的容器是 150x150，我们有一个 100x50 大小的图像。在这种情况下，图像应放大到 150x75。如果我们有一个大小为 100x300 的图像，则图像应缩小到 50x150。

虽然这可以用 javascript 轻松完成，但如果可能的话，我想避免这种情况。我想知道是否有任何方法可以单独使用 CSS 来实现这一点。我可以使用仅 CSS3 的解决方案，甚至可以使用 webkit/firefox 特定指令，只要它适用于最新版本的 Chrome、Firefox 和 Safari（如果别无选择，我将使用 IE 的后备）。

**编辑：**我当然知道最大高度和最大宽度。问题是如果我将 max-height 和 max-width 都设置为 150，如果需要，图像将不会按比例放大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:01:25.180

不要使用`<img>`. 相反，使用一种`background-image`风格：

```
background: transparent url('path/to/image.png') no-repeat scroll center center;
background-size: contain; 
```

神奇的`background-size`是，放大或缩小图像，使其紧贴容器内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:54:16.293

看看这个小提琴[http://jsfiddle.net/demchak_alex/FazvX/3/](http://jsfiddle.net/demchak_alex/FazvX/3/)

尽管这仅在您可以将类应用于单个图像时才有效

**编辑：**

如果您可以使用背景图片，请查看此小提琴[http://jsfiddle.net/demchak_alex/FazvX/4/](http://jsfiddle.net/demchak_alex/FazvX/4/)

“仅添加类的图像”适用于顶部，使用背景图像适用于底部。

# c# - 如何将非命名空间类型导入 IronPython？

> ID：11767922
> 
> 赞同：5
> 
> 时间：2012-08-01T21:35:12.287
> 
> 标签：c#, .net, python, namespaces, ironpython

我有一个存在于命名空间之外的 C# .NET 类，需要在 IronPython 内部进行访问。通常我会这样做：

```
import SomeNamespace
from SomeNamespace import * 
```

但是，我没有命名空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:41:28.590

像往常一样导入你的程序集，然后只导入类名：

```
import clr
clr.AddReference("MyAssembly") 
import MyGlobalClass 
```

# google-chrome - chrome 扩展清单 v2 和 div 元素中的 onclick 事件

> ID：11767924
> 
> 赞同：0
> 
> 时间：2012-08-01T21:35:24.043
> 
> 标签：google-chrome, google-chrome-extension

我正在将 chrome 扩展从 manifest v1 转换为 manifest v2。

我已经从 html 文件中提取了大部分 javascript 代码并将其放在单独的 .js 文件中。

我对弹出窗口中的 div 元素有疑问。

popup.html 中的当前代码是：

```
 <div onclick="PopupClick('SHOW')" id="blue">Show</div> 
```

显然从 v2 开始在 html 中不允许 onclick="" ，但是如何替换它，以便用户可以单击 div 并执行一个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T10:40:49.857

*popup.html：*

```
 <script src="popup.js" type="text/javascript"></script>

 <div id="blue">Show</div> 
```

*popup.js：*

```
 document.addEventListener('DOMContentLoaded', function () {  
 document.getElementById("blue").addEventListener('click',
 clickHandler); }); 

function clickHandler(e) {   PopupClick('SHOW'); }

 function PopupClick(str) {
   //Do your thing here 
} 
```

就像 Rob W 说的那样，在[http://developer.chrome.com/extensions/contentSecurityPolicy.html#H3-1中很清楚](http://developer.chrome.com/extensions/contentSecurityPolicy.html#H3-1)

我实际上遇到了这个问题，这段代码帮助我从清单 v1 迁移到 v2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:14:40.170

也许事件？`<script src="js/my_script.js">`在您的头部包含类似的内容`popup.html`，然后将代码粘贴到该 js 文件中。

```
var blueDiv = document.getElementById("blue");
    blueDiv.addEventListener("click", function(){
        PopupClick("SHOW");
    }, false); 
```

或者您的应用程序的某些细节不允许您这样做？或者我不明白这个问题。

# php - 如何高效地使用 SQL 检索半小时间隔的数据？

> ID：11767925
> 
> 赞同：6
> 
> 时间：2012-08-01T21:35:38.590
> 
> 标签：php, mysql, sql, performance

**问题 - 以半小时为间隔有效地检索小计总和**

我正在使用 MySQL，并且我有一个包含不同时间小计的表。我想从早上 7 点到 12 点每隔半小时检索这些销售额的总和。我当前的解决方案（如下）有效，但查询大约 150,000 条记录需要 13 秒。我打算将来有几百万条记录，而我目前的方法太慢了。

我怎样才能使它更有效，或者如果可能的话，用纯 SQL 替换 PHP 组件？另外，如果我使用 Unix 时间戳而不是日期和时间列，它会帮助您的解决方案更加高效吗？

**表名称 - 收据**

```
subtotal    date        time      sale_id
--------------------------------------------
   6        09/10/2011  07:20:33     1
   5        09/10/2011  07:28:22     2
   3        09/10/2011  07:40:00     3
   5        09/10/2011  08:05:00     4
   8        09/10/2011  08:44:00     5
...............
  10        09/10/2011  18:40:00     6
   5        09/10/2011  23:05:00     7 
```

**期望的结果**

像这样的数组：

*   半小时 1 ::: (7:00 to 7:30) => 小计之和为 11
*   半小时 2 ::: (7:30 to 8:00) => 小计之和为 3
*   半小时 3 ::: (8:00 to 8:30) => 小计之和为 5
*   半小时 4 ::: (8:30 to 9:00) => 小计之和为 8

**当前方法**

当前的方式使用从早上 7 点开始并递增 1800 秒的 for 循环，相当于半小时。结果，这对数据库进行了大约 34 次查询。

```
for($n = strtotime("07:00:00"), $e = strtotime("23:59:59"); $n <= $e; $n += 1800) {  

    $timeA = date("H:i:s", $n);
    $timeB = date("H:i:s", $n+1799);

    $query = $mySQL-> query ("SELECT SUM(subtotal)
                              FROM Receipts WHERE time > '$timeA' 
                              AND time < '$timeB'");

    while ($row = $query-> fetch_object()) {
        $sum[] = $row;
    }
} 
```

**电流输出**

输出只是一个数组，其中：

*   [0] 表示早上 7 点到早上 7:30
*   [1] 代表上午 7:30 至上午 8:00
*   [33] 代表晚上 11:30 到晚上 11:59:59。

    数组（“0” => 10000，“1” => 20000，.......“33” => 5000）；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:54:15.173

您也可以尝试这个单一查询，它应该返回一个包含 30 分钟分组总数的结果集：

```
SELECT date, MIN(time) as time, SUM(subtotal) as total
FROM `Receipts`
WHERE `date` = '2012-07-30'
GROUP BY hour(time), floor(minute(time)/30) 
```

要有效地运行此操作，请在日期和时间列上添加复合索引。

你应该得到一个结果集，如：

```
+---------------------+--------------------+
| time                | total              |
+---------------------+--------------------+
| 2012-07-30 00:00:00 |        0.000000000 |
| 2012-07-30 00:30:00 |        0.000000000 |
| 2012-07-30 01:00:00 |        0.000000000 |
| 2012-07-30 01:30:00 |        0.000000000 |
| 2012-07-30 02:00:00 |        0.000000000 |
| 2012-07-30 02:30:00 |        0.000000000 |
| 2012-07-30 03:00:00 |        0.000000000 |
| 2012-07-30 03:30:00 |        0.000000000 |
| 2012-07-30 04:00:00 |        0.000000000 |
| 2012-07-30 04:30:00 |        0.000000000 |
| 2012-07-30 05:00:00 |        0.000000000 |
| ...
+---------------------+--------------------+ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T21:49:46.547

首先，我将使用单个 DATETIME 列，但使用 DATE 和 TIME 列将起作用。

您可以使用单个查询一次完成所有工作：

```
select date,
       hour(`time`) hour_num, 
       IF(MINUTE(`time`) < 30, 0, 1) interval_num, 
       min(`time`) interval_begin,
       max(`time`) interval_end,
       sum(subtotal) sum_subtotal
 from receipts
where date='2012-07-31'
group by date, hour_num, interval_num; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T23:16:29.097

**更新：**

由于您不关心任何“丢失”的行，因此我还将假设（可能是错误的）您不担心查询可能会返回不是从上午 7 点到上午 12 点的行。此查询将返回您指定的结果集：

```
SELECT (HOUR(r.time)-7)*2+(MINUTE(r.time) DIV 30) AS i 
     , SUM(r.subtotal) AS sum_subtotal
  FROM Receipts r
 GROUP BY i
 ORDER BY i 
```

`time`这将返回从引用该列的表达式派生的周期索引 (i) 。为了获得此查询的最佳性能，您可能希望有一个可用的“覆盖”索引，例如：

```
ON Receipts(`time`,`subtotal`) 
```

如果您要在`date`列上包含一个相等谓词（它没有出现在您的解决方案中，但确实出现在“选定”答案的解决方案中，那么最好将该列作为前导索引“覆盖”指数。

```
ON Receipts(`date`,`time`,`subtotal`) 
```

如果您想确保在上午 7 点之前的时段内不返回任何行，那么您可以简单地`HAVING i >= 0`在查询中添加一个子句。（早上 7 点之前的行将为 i 生成负数。）

```
SELECT (HOUR(r.time)-7)*2+(MINUTE(r.time) DIV 30) AS i 
     , SUM(r.subtotal) AS sum_subtotal
  FROM Receipts r
 GROUP BY i
HAVING i >= 0
 ORDER BY i 
```

* * *

**之前：**

我假设您想要一个与您当前返回的结果集相似的结果集，但一举一动。此查询将返回您当前正在检索的相同的 33 行，但有一个额外的列标识期间 (0 - 33)。这与我可以获得的当前解决方案最接近：

```
SELECT t.i
     , IFNULL(SUM(r.subtotal),0) AS sum_subtotal
  FROM (SELECT (d1.i + d2.i + d4.i + d8.i + d16.i + d32.i) AS i
             , ADDTIME('07:00:00',SEC_TO_TIME((d1.i+d2.i+d4.i+d8.i+d16.i+d32.i)*1800)) AS b_time
             , ADDTIME('07:30:00',SEC_TO_TIME((d1.i+d2.i+d4.i+d8.i+d16.i+d32.i)*1800)) AS e_time
          FROM (SELECT 0 i UNION ALL SELECT 1) d1 CROSS
          JOIN (SELECT 0 i UNION ALL SELECT 2) d2 CROSS
          JOIN (SELECT 0 i UNION ALL SELECT 4) d4 CROSS
          JOIN (SELECT 0 i UNION ALL SELECT 8) d8 CROSS
          JOIN (SELECT 0 i UNION ALL SELECT 16) d16 CROSS
          JOIN (SELECT 0 i UNION ALL SELECT 32) d32
        HAVING i <= 33
       ) t
  LEFT
  JOIN Receipts r ON r.time >= t.b_time AND r.time < t.e_time
 GROUP BY t.i
 ORDER BY t.i 
```

一些重要的注意事项：

只要秒数恰好等于“59”或“00”，您当前的解决方案似乎就可能从“收据”中“丢失”行。

看起来您也不关心日期组件，您只是获得所有日期的单个值。（我可能读错了。）如果是这样，DATE 和 TIME 列的分离有助于解决这个问题，因为您可以在查询中引用裸露的 TIME 列。

`date`在列上添加 WHERE 子句很容易。例如，要获得仅一天的小计汇总，例如在`GROUP BY`.

```
WHERE r.date = '2011-09-10' 
```

覆盖索引`ON Receipts(time,subtotal)`（如果您还没有覆盖索引）可能有助于提高性能。（如果在日期列上包含相等谓词（如上面的 WHERE 子句中，最合适的覆盖索引可能是`ON Receipts(date,time,subtotal)`.

我假设该`time`列的数据类型为 TIME。（如果不是，则可能需要对查询（在别名为 的内联视图中`t`）进行小幅调整，以使（派生的）b_time 和 e_time 列的数据类型与`time`Receipts 中列的数据类型匹配。

当给定时间段内收据中没有行时，其他答案中的一些建议解决方案不能保证返回 33 行。“缺少行”对您来说可能不是问题，但它是时间序列和时间段数据的常见问题。

我假设您希望保证返回 33 行。当没有找到与时间段匹配的行时，上面的查询返回零的小计。（我注意到，在这种情况下，您当前的解决方案将返回 NULL。我已经将该 SUM 聚合包装在 IFNULL 函数中，以便在 SUM 为 NULL 时返回 0。）

因此，别名为 as 的内联查询`t`是一个丑陋的混乱，但它工作得很快。它所做的是生成 33 行，具有不同的整数值 0 到 33。同时，它派生一个“开始时间”和一个“结束时间”，用于将每个周期“匹配”到表`time`上的`Receipts`列.

我们注意不要将`time`Receipts 表中的列包装在任何函数中，而只引用裸列。而且我们要确保没有任何隐式转换正在进行（这就是为什么我们希望 b_time 和 e__time 的数据类型匹配。and函数都返回数据类型。（我们无法绕过匹配和`ADDTIME`GROUP通过操作。）`SEC_TO_TIME``TIME`

最后一个时段的“结束时间”值返回为“24:00:00”，我们通过运行以下测试验证这是匹配的有效时间：

```
SELECT MAKETIME(23,59,59) < MAKETIME(24,0,0) 
```

这是成功的（返回 1）所以我们很好。

派生列 (`t.b_time`和`t.e_time`) 也可以包含在结果集中，但创建数组时不需要它们，如果不包含它们，它（可能）效率更高。

* * *

最后一点：为了获得最佳性能，将别名为实际表的内联视图加载`t`到实际表中可能是有益的（临时表就可以了。），然后您可以引用该表来代替内联视图。这样做的好处是您可以在该表上创建索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:06:17.600

在我的查询中，我假设一个名为 date 的日期时间字段。这将为您提供从您指定的任何日期时间开始的所有组：

```
SELECT 
  ABS(FLOOR(TIMESTAMPDIFF(MINUTE, date, '2011-08-01 00:00:00') / 30)) AS GROUPING
  , SUM(subtotal) AS subtotals 
FROM 
  Receipts 
GROUP BY 
  ABS(FLOOR(TIMESTAMPDIFF(MINUTE, date, '2011-08-01 00:00:00') / 30))
ORDER BY
  GROUPING 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T22:32:53.193

始终为您的数据使用正确的数据类型。对于您的日期/时间列，最好将它们存储为（最好是 UTC 分区）时间戳。尤其如此，因为某些日期不存在某些时间（对于某些时区，因此是 UTC）。您将需要此列的索引。

此外，您的日期/时间范围不会给您想要的 - 即，您会在小时内准确地错过任何东西（因为您使用严格的大于比较）。始终将范围定义为“包含下限，上限不包含”（so, `time >= '07:00:00' AND time < '07:30:00'`）。这对于时间戳尤其重要，因为它需要处理更多的字段。

因为 mySQL 没有递归查询，所以您需要几个额外的表来实现这一点。我将它们称为“永久”表，但如果有必要，当然可以在线定义它们。

您将需要一个日历表。出于多种原因，这些很有用，但在这里我们希望它们用于列出日期。如有必要，这将允许我们显示小计为 0 的日期。出于同样的原因，您还需要一个以半小时为增量的时间值。

这应该允许您像这样查询您的数据：

```
SELECT division, COALESCE(SUM(subtotal), 0)
FROM (SELECT TIMESTAMP(calendar_date, clock_time) as division
      FROM Calendar
      CROSS JOIN Clock
      WHERE calendar_date >= DATE('2011-09-10') 
      AND calendar_date < DATE('2011-09-11')) as divisions
LEFT JOIN Sales_Data
ON occurredAt >= division 
AND occurredAt < division + INTERVAL 30 MINUTE
GROUP BY division 
```

（[SQLFiddle 上的工作示例](http://www.sqlfiddle.com/#!2/2718d6/12/0)，为了简洁起见，它使用常规`JOIN`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T21:56:09.523

使其成为纯 SQL 的一种方法是使用查找表。我不太了解MySql，所以代码可能会有很多改进。我所有的代码都将是 Ms Sql.. 我会这样做：

```
 /* Mock salesTable */
   Declare @SalesTable TABLE (SubTotal int, SaleDate datetime)
Insert into @SalesTable (SubTotal, SaleDate) VALUES (1, '2012-08-01 12:00')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (2, '2012-08-01 12:10')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (3, '2012-08-01 12:15')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (4, '2012-08-01 12:30')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (5, '2012-08-01 12:35')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (6, '2012-08-01 13:00')
Insert into @SalesTable (SubTotal, SaleDate) VALUES (7, '2012-08-01 14:00')

/* input data */
declare @From datetime, @To DateTime, @intervall int 
set @from = '2012-08-01' 
set @to = '2012-08-02'
set @intervall = 30

/* Create lookup table */
DECLARE @lookup TABLE (StartTime datetime, EndTime datetime) 
DECLARE @tmpTime datetime
SET @tmpTime = @from
WHILE (@tmpTime <= @To) 
BEGIN
 INSERT INTO @lookup (StartTime, EndTime) VALUES (@tmpTime, dateAdd(mi, @intervall, @tmpTime))
 set @tmpTime = dateAdd(mi, @intervall, @tmpTime)
END

/* Get data */
select l.StartTime, l.EndTime, sum(subTotal) from @SalesTable as SalesTable 
    join @lookUp as l on SalesTable.SaleDate >= l.StartTime and SalesTable.SaleDate < l.EndTime
    group by l.StartTime, l.EndTime 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T16:39:24.427

我也找到了一个不同的解决方案，并在此处发布以供任何人偶然发现。以半小时为间隔分组。

```
SELECT SUM(total), time, date
FROM tableName
GROUP BY (2*HOUR(time) + FLOOR(MINUTE(time)/30)) 
```

链接了解更多信息 [http://www.artfulsoftware.com/infotree/queries.php#106](http://www.artfulsoftware.com/infotree/queries.php#106)

# clojure - -> / ->> 管道中的条件元素

> ID：11767931
> 
> 赞同：13
> 
> 时间：2012-08-01T21:36:11.727
> 
> 标签：clojure

给定`->>`这样的管道：

```
(defn my-fn []
  (->> (get-data)
       (do-foo)
       (do-bar)
       (do-baz))) 
```

我希望使各个阶段成为有条件的。

想到的第一种写法是这样的：

```
(defn my-fn [{:keys [foo bar baz]}]
  (->> (get-data)
       (if foo (do-foo) identity)
       (if bar (do-bar) identity)
       (if baz (do-baz) identity)) 
```

然而，当`->>`宏试图插入`if`表单时，这不仅在性能方面看起来很糟糕（有 noop`identity`调用），而且实际上无法编译。

写这篇文章的适当、合理干燥的方式是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-13T12:42:08.600

现代 Clojure（即从 1.5 开始）支持多种条件线程选项，但您可能需要`cond->>`.

## 条件线程`cond->`和`cond->>`

Clojure 提供[`cond->`](https://clojuredocs.org/clojure.core/cond-%3E)and [`cond->>`](https://clojuredocs.org/clojure.core/cond-%3E%3E)，每个都要求一组对：一个测试和一个表达式，如果该测试的计算结果为真。这些与第一次真正的测试非常相似，`cond`但不会停止。

```
(cond->> 5
  true inc
  false inc
  nil inc)
=> 6 
```

您的具体示例可能最好这样写：

```
(defn my-fn [{:keys [foo bar baz]}]
  (cond->> (get-data)
    foo (do-foo)
    bar (do-bar)
    baz (do-baz))) 
```

## 作为->

值得一提[`as->`](https://clojuredocs.org/clojure.core/as-%3E)，因为它可能是最通用的线程宏。它为您提供了一个名称来指代通过表单传递的“事物”。例如：

```
(as-> 0 n
  (inc n)
  (if false
    (inc n)
    n))
=> 1

(as-> 0 n
  (inc n)
  (if true
    (inc n)
    n))
=> 2 
```

这在处理需要在参数列表中的不同点对表达式进行线程化的混合函数时提供了很大的灵活性（即从 -> 切换到 ->> 语法）。为了代码的可读性，应该避免使用无关的命名变量，但通常这是表达过程的最清晰和最简单的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T22:46:12.380

这也有效：

```
(defn my-fn [{:keys [foo bar baz]}]
  (->> (get-data)
       (#(if foo (do-foo %) %))
       (#(if bar (do-bar %) %))
       (#(if baz (do-baz %) %)) )) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-02T02:08:16.540

您可能对这些宏感兴趣[https://github.com/pallet/thread-expr](https://github.com/pallet/thread-expr)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-01T22:39:35.730

您可以修复编译部分（尽管不是苦行部分，方法是让if 语句通过放置另一组as**来决定运行哪个函数：**`( )`

```
(defn my-fn [{:keys [foo bar baz]}]
  (->> (get-data)
   ((if foo do-foo identity))
   ((if bar do-bar identity))
   ((if baz do-baz identity))) 
```

会扩展成一系列这样的调用：

```
 ;  choose function         and call it    
   ( (if foo do-foo identity) args       )
   ( (if bar do-bar identity) args       )
   ( (if baz do-baz identity) args       ) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-02T00:30:57.113

如果您经常需要这种东西，一种更通用的方法：

```
(defn comp-opt [& flag-fns]
  (->> 标志-fns
    （分区 2）
    （先过滤）
    （地图二）
    （申请补偿）））

(defn my-fn [{:keys [foo bar baz]}]
  (map (comp-opt foo do-foo
                 酒吧做酒吧
                 巴兹多巴兹）
       （获取数据）））

```

# objective-c - 如何将 NSHashTable 保存到文件中？

> ID：11767934
> 
> 赞同：0
> 
> 时间：2012-08-01T21:36:30.907
> 
> 标签：objective-c, hashtable, save

我想将我的 NSHashTable 保存到 plist 文件中。我知道有一种方法可以使用 NSMutableArrays 来执行此操作，但是该方法或类似方法是否适用于 NSHashTables？

```
array writeToFile:path atomically:YES 
```

这就是我会尝试为数组做的事情，这也适用于 NSHashTables 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:00:15.577

NSHashTable 类符合 NSCoding 协议，因此您可以使用 encodeWithCoder 方法轻松地将其存储到磁盘。（详见 NSCoding 协议）

你会使用这样的东西： [NSKeyedArchiver archiveRootObject:dict toFile:filePath];

其中 dict 是一个 NSDictionary ，具有您选择的键和对象作为该键的值。

希望有帮助，

最好的，

弗洛

# iphone - 仅当单词以子字符串开头时才在句子中查找子字符串的出现

> ID：11767936
> 
> 赞同：1
> 
> 时间：2012-08-01T21:36:35.987
> 
> 标签：iphone, ios, nspredicate

如果我有 2 个字符串：“我的名字是埃里克”“美国很棒”

我的子字符串是'eri'。

我如何编写一个只对第一句返回 true 的函数，因为它有一个以 eri (Eric) 开头的 WORD，并且不只包含 eri (AmERIca)。

笔记; 我一直在使用 NSPredicates，但使用 CONTAINS 会返回两者，使用 BEGINSWITH 只会检查第一个单词。

这个字符串也包含在一个对象中，比如说属性被称为 ，所以我当前的代码是：

```
NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF.name contains[cd] %@",
                                    searchText];

searchResults = [[myArray filteredArrayUsingPredicate:resultPredicate] mutableCopy]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:39:53.110

为什么不搜索带有前导空格的字符串，例如“eri”？这将自动只找到实际的单词，而不是中间的东西。

# java - 使用 java 获取 HTML 内容的最快方法是什么？

> ID：11767937
> 
> 赞同：0
> 
> 时间：2012-08-01T21:36:42.790
> 
> 标签：java, inputstream, bufferedinputstream

我有这个，但我想知道是否有更快的方法：

```
 URL url=new URL(page);
        InputStream is = new BufferedInputStream(url.openConnection().getInputStream());
        BufferedReader in=new BufferedReader(new InputStreamReader(is));
        String tmp="";
        StringBuilder sb=new StringBuilder();
        while((tmp=in.readLine())!=null){
            sb.append(tmp);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:40:37.057

可能网络是最大的开销，在 Java 代码方面您无能为力。但是使用[`IOUtils`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream%29)至少实现起来要快得多：

```
String page = IOUtils.toString(url.openConnection().getInputStream()); 
```

记得关闭底层流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T21:51:02.580

如果您需要使用 html 进行操作，请查找一些库。例如[jsoup](http://jsoup.org/)。

> jsoup 是一个用于处理真实世界 HTML 的 Java 库。它提供了一个非常方便的 API 用于提取和操作数据，使用最好的 DOM、CSS 和类似 jquery 的方法。

例子：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T17:24:02.900

如果您按照 Tomasz 的建议使用 Apache Commons IO 的 IOUtils，那么还有一个更简单的方法：[toString(URL)](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.net.URL%29 "toString(URL)")，或者它的首选表亲，它们采用字符集（当然，这需要提前知道资源的字符集）。

```
String string = IOUtils.toString( new URL( "http://some.url" )); 
```

或者

```
String string = IOUtils.toString( new URL( "http://some.url" ), "US-ASCII" ); 
```

# python - 如何使用鼻子的assert_raises？

> ID：11767938
> 
> 赞同：61
> 
> 时间：2012-08-01T21:36:44.397
> 
> 标签：python, nosetests

我搜索了文档，但找不到任何文档。有一对没有过多解释。

谁能给我解释一下鼻子的

```
assert_raises(what should I put here?) 
```

功能以及如何使用它？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-10-11T04:45:10.010

虽然公认的答案是正确的，但我认为方法有更好的用途`assert_raises`。

如果您只是想断言发生了异常，那么使用`@raises`语法可能更简单、更清晰。

```
@raises(HTTPError)
def test_exception_is_raised:
    call_your_method(p1, p2) 
```

但是，假设您想对引发的异常做更多的事情，例如：我们需要断言引发的 HTTPError 的类型为**401: Unauthorized**，而不是**500: Server Error**。

在这种情况下，上面的语法没有那么有用，我们应该`assert_raises`以不同的方式使用 but。如果我们不将它`callable`作为第二个参数传递，`assert_raises`将返回一个上下文，我们可以使用它来进一步测试异常详细信息。

```
def test_exception_is_raised:
    with assert_raises(HTTPError) as cm:
         call_your_method(p1, p2)
    ex = cm.exception # raised exception is available through exception property of context
    ok_(ex.code == 401, 'HTTPError should be Unauthorized!') 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-08-01T21:57:59.177

该`assert_raises()`函数进行测试以确保函数调用在出现某些参数时引发指定的异常。

例如，如果您有一个`add`将两个数字相加的函数，它可能会`TypeError`在您传递它时引发 a，例如，一个整数和一个字符串。所以：

```
from nose.tools import assert_raises

def add(x, y):
    return x + y

assert_raises(TypeError, add, 2, "0") 
```

第一个参数是您期望的异常类型。第二个是要调用的函数。其余参数将传递给函数（在这种情况下，它们将成为`x`函数`y`内部）。

如果函数引发了预期的异常，则断言通过。

# vb.net - Process.Start 不传递参数

> ID：11767941
> 
> 赞同：0
> 
> 时间：2012-08-01T21:36:47.897
> 
> 标签：vb.net, command-line-arguments, process.start

我有一个运行以下完美的bat文件：

```
Bec.exe --f=Config.cfg 
```

现在在 vb.net 中，我有一个按钮，可以使用相同的参数启动相同的 exe，并输出到 rtb。但是由于某种原因它没有传递论点，我不知道为什么。任何人都可以帮忙吗？

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Dim cmdProcess As Process
    cmdProcess = New Process()
    cmdProcess.StartInfo.FileName = """" & TextBox2.Text & """" 'normally this is C:\ServerTools\Bec.exe
    cmdProcess.StartInfo.Arguments = """" & TextBox1.Text & """" 'normally is --f=Config.cfg
    cmdProcess.StartInfo.RedirectStandardOutput = True
    cmdProcess.StartInfo.UseShellExecute = False

    If cmdProcess.Start() Then
        RichTextBox2.Text = cmdProcess.StandardOutput.ReadToEnd
    Else
        ' Failed to execute
    End If
End Sub 
```

此外，我将为我正在启动的 .exe 提供已接受选项的参考

```
Options:
-h, --help            show this help message and exit
-f FILENAME, --file=FILENAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:32:35.613

尝试使用 ProcessStartInfo.WorkingDirectory 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:56:47.310

我遇到了一个解决方案，显然我必须在与我正在执行的 exe 相同的目录中运行我的程序。-f Config.cfg 参数通常基于 Bec.exe 所在的位置，当我通过我的程序调用它时，它基于我的程序位置，所以现在我的程序在同一个目录中它现在正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:51:10.553

我总是通过创建一个单独的[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/b5zzxthe.aspx)对象并将其传递给`Process.Start()`方法来做到这一点。

```
ProcessStartInfo psi = new ProcessStartInfo("filename.txt", "-arg1 -arg2");
Process.Start(psi); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:51:17.107

您不应该引用参数，也不应该引用 exe 路径

```
cmdProcess.StartInfo.FileName = TextBox2.Text
cmdProcess.StartInfo.Arguments = TextBox1.Text 
```

# atk4 - 文本区域字段 getElement()

> ID：11767942
> 
> 赞同：0
> 
> 时间：2012-08-01T21:36:54.120
> 
> 标签：atk4

我ḿ 试图向文本区域添加更多“列”。

我有一个表格

$f->addField('text','field'); $f->getElement('field')->setAttr('rows','8');

如果我设置 'rows' 属性，我可以向我的 textarea 添加更多行，但如果我设置 'cols' 属性它不会显示正确。

如果我检查生成的 html，则 textarea 已正确设置属性“cols”，但不会扩展它

有人帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:22:13.720

简短的回答是，正如@scrappedcola 所指出的那样，CSS 正在影响文本区域，但我会就此事提供更多信息。

## 为什么是100%？

所有表单域都占宽度的 100%。如果您需要表格更紧凑，可以将其放入网格列中，这将限制其宽度。您还可以使用水平形式来节省空间或使其在多列中流动。这是一个演示：[http ://agiletoolkit.org/codepad/gui/formstyle](http://agiletoolkit.org/codepad/gui/formstyle)

## 它在哪里设置？

如果您打开 textarea 的检查器，您可以找到分配给 textarea 的 CSS 属性：

![检查员](../Images/61f47271ae0d47e5c05c67098c5c5f07.png)

通过点击 StyleRules 下的箭头（这是 safari，但 firefox 的 firebug 插件类似），可以在`atk-main.css`文件中看到以下规则：

```
.atk-form fieldset .atk-form-row > .atk-form-field
    input[type=text]:not([class*="span"]),
.atk-form fieldset .atk-form-row > .atk-form-field
    input[type=password]:not([class*="span"]),
.atk-form fieldset .atk-form-row > .atk-form-field
    textarea:not([class*="span"]),
.atk-form fieldset .atk-form-row > .atk-form-field select {
  width: 100%;
} 
```

从文件`atk-main.css`生成：`atk-main.less`

```
fieldset .atk-form-row {
    .clearafter();
    margin-top:@margin/2;
    &:first-child {margin-top:0;}
    &.has-error>label {color:@error;}
    &.has-error input {border-color:@error;}
    >label {font-weight:bold;width:@label;margin-top:0.4em;float:left;}
    >.atk-form-field {
        margin-left:@label+@labelMargin;
        input[type=text]:not([class*="span"]),
        input[type=password]:not([class*="span"]),
        textarea:not([class*="span"]),
        select {width:100%;}
        select {width:100%;margin-top:0.5em;}
        textarea {display:block;margin-bottom:@margin/5;}
        input+input {margin-left:0.4em;}
        .atk-form-error {margin:@margin/5 0 0;color:@error;}
    }
} 
```

## 如何覆盖？

您可以创建一个本地 CSS 文件以不同方式设置您的 textarea 字段的宽度。

```
$this->api->jui->addStaticStylesheet('yourfile'); 
```

您也可以手动设置：

```
$f->addField('text','field');
$f->getElement('field')->setAttr('style','width: 50%'); 
```

# ios - Xcode 无法在选定的目标上运行

> ID：11767945
> 
> 赞同：53
> 
> 时间：2012-08-01T21:37:05.883
> 
> 标签：ios, xcode

今天早上我正在运行我的应用程序，现在当我尝试在 iPhone 5.1 模拟器上运行时突然出现以下错误。

无法在所选目标上运行

目标不支持构建所选软件的体系结构。切换到支持该架构的目的地以运行所选软件。

我删除了这些方案，但仍然没有解决方案。

我正在使用山狮。我正在使用 xCode 4.4（最近升级到 Mountain Lion 和 xCode 4.4）

更新 1：这是我的构建设置的视图：

![在此处输入图像描述](../Images/e1208b132f521730dd8cf1406844c8c3.png)

**更新：**这是阻止它运行的实际错误。

![在此处输入图像描述](../Images/dfa87c712c45fb8dd3f5b5caff268a2a.png)

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-03T12:14:11.847

您可以按照以下步骤操作：

*   退出 Xcode 和 iPhone 模拟器
*   拔下您的设备
*   去`/Users/your_usr_name/Library/Developer/Xcode/DerivedData/`
*   删除该文件夹下的所有数据
*   再次启动 Xcode 并运行您的项目

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-09T13:56:31.553

从 Facebook SDK 3.1 更新到 Facebook SDK 3.1.1 后，我遇到了这个问题。我的错，我猜。

在“resources”文件夹中，现在有一个完全无用但危险的 info.plist，如果导入，可能会破坏您的项目文件。不知道他们为什么把它包括在内，但我相信我们最近很少有人犯同样的错误。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-13T09:44:00.870

我在 Xcode 4.4 版本中发现了这个问题。最后我以这种方式解决了它：

在您的项目中找到“Info.plist”，然后在窗口的右侧视图中取消选择目标成员资格，它适用于我。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-12T19:22:10.143

您可能还想检查项目是否在项目设置中使用受支持的编译器![蓝色显示的选项](../Images/6053b5c27a3115225feb02f858887f4c.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-10T00:25:21.003

它只是复制了 Info.plist 文件，只需在文件中使用 1 个 Info.plist 文件，然后重新启动 xcode，它对我来说是固定的

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-17T20:01:07.320

我刚刚在 Xcode 4.5.1 中遇到了这个错误，在我从构建设置中取出所有非字母字符后，错误就消失了**。**`Product Name`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-06T23:04:49.007

我相信这可能是 Xcode 4.4+ 当前未列出的错误。我的项目有/遇到了同样的问题。我删除了所有版本的 Xcode 并以 4.4 重新启动，打开我的项目并再次出现错误。

然后，我使用不同名称的模板开始了一个新项目。没有问题。

然后我重命名了我的旧项目，启动了一个具有相同名称的新空项目并构建/运行并再次出现错误。这个新项目只不过是一个什么都不做的视图控制器。我应该得到一个空白屏幕，但得到了与您相同的错误。

沮丧的我关闭了一天并重新运行了旧项目并且它起作用了。我没有改变任何东西。目前我再次遇到错误，重新启动或重新启动 Xcode 都没有修复它。

所以总而言之，一个项目可以完全不做任何更改，有时它可以构建和运行良好，有时你会得到这个错误。作为记录，我在运行 Xcode 4.3 时没有收到此错误。

直到我升级到恰好在同一天的 Mountain Lion 和 Xcode 4.4 后，我的问题才出现。现在我无法回到 100% 可行的配置。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-08-14T16:24:16.067

将我的文件提交到 SVN 并在新目录中签出项目为我解决了这个问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-01T23:01:49.517

查看该架构中的项目和目标构建设置，看看是否有任何变化。当第一次从 Xcode 3 到 4 时，它曾经以隐藏的方式破坏，给出同样的错误，最后你不得不将 i386 添加到“Valid Architectures”行。我刚刚查看了我从 Xcode 4.1 开始的大项目，它没有显示任何关于 i386 等的信息，但是我有其他较新的项目，我在 $(ARCHS_STANDARD_32_BIT) 行中看到了这个灰色的东西。

编辑：我和一位大师朋友重新审视了这一点。我们俩都无法在我们的项目中找到与 i386 的链接——Xcode 使用了一些魔法。也就是说，我确实在项目中的二进制 plist 中对 i386 产生了影响，这导致我提出另一个建议。

在您的构建设置中，确保所有“架构”都是 $(ARCHS_STANDARD_32_BIT)。

如果这不起作用，我们建议您在方案菜单中选择 iPhone 5.1 Simulator 时查看构建的 compile 和 ld 行 - 看看它是否真的是 i386，

另一个想法 - 将所有方案和用户设置移动到某处的保存文件夹（项目关闭），然后重新打开并重新创建方案。现在再试一次。在我的任何 project.pbxproj 文件中都没有对 i386 的引用，所以我们怀疑这与目标设备的方案设置有某种关系。

祝你好运！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-11-08T08:13:39.213

我已经解决了在项目和目标构建设置中将关键“构建变体”从“armv7”更改为“正常”的问题

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-01-17T13:39:38.187

除了删除这个目录下的所有文件Users/your_usr_name/Library/Developer/Xcode/DerivedData/

我重新启动了我的mac，它工作正常（重新启动xcode并且模拟器没有为我剪掉它）

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-10-03T16:36:43.117

我的项目面临同样的问题。这是对情况和我的解决方案的简要说明。这可能适用于您的情况，也可能不适用。

我在一个有多个 iOS 项目的地方工作。我最近将系统升级到 Mac OSX 10.8 和 Xcode 4.4.1。我正在研究一个最初基于 Xcode 4.1 for iOS 4 构建的项目。由于 Xcode 在 4.3 之前都有 iOS 4 模拟器，因此该项目在所有模拟器上都构建并运行良好。然而，在 Xcode 4.4.1 中，我没有找到 iOS 4 模拟器，也没有简单的方法来安装它们，这就是为什么我收到“无法在选定目标上运行”错误的原因。以下是我如何让我的项目运行。

*   检查并为所有配置文件`Build Settings > Architectures`设置架构。`Standard (armv7)``${ARCHS_STANDARD_32_BIT}`

*   在我的情况下设置`Base SDK`为`Latest iOS(<ios version #>)`5.1。

*   为所有配置文件设置`Build Active Architecture Only`为。`NO`

*   为所有配置文件设置`Valid Architectures`为。`armv6 armv7`您可能需要添加任何一个，具体取决于已经可用的内容。

*   设置`iOS Deployment Target`为`iOS 5.1`（在我的情况下）。

*   确保在项目选项卡下具有相同的`Deployment Target`目标`Summary`。

清洁并运行并交叉手指！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-12-02T00:44:11.723

就我而言，在删除整个 Resources 文件夹、将 Resources 文件夹从其他或旧项目复制到当前项目然后添加回该文件夹之后，就会出现问题。

我在分析工具的帮助下解决了这个问题：分析后，它让我对“复制捆绑资源”中的 Info.plist 感到温暖。

只需转到 Copy Bundle Resource（在 Build Phrase 选项卡上）删除 Info.plist，然后重新启动 Xcode，清理并构建。我的项目恢复正常。

希望能帮助别人:)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-08-26T22:10:52.507

我遇到了同样的问题。就我而言，似乎是我更改了多目标项目的捆绑名称，而不是产品名称。一旦我通过正确编辑项目名称并将捆绑名称设置回 ${PRODUCT_NAME} 来纠正它，它将再次在模拟器中运行。

这可能不是每个人的答案，但似乎产品命名错误（特殊字符、空格等）是许多人的原因，这就是促使我回顾我的重命名的原因。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-12-31T20:03:23.190

我认为很多这些解决方案都会强制进行完全重建，这就是为我解决这个问题的原因。

我做了 Product => Clean，问题就消失了。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-01-07T12:37:08.460

对我来说，这很有效： - 检查所有产品参考在设置和列表中是否一致。还要检查产品名称是否包含任何空格或其他“非法”字符。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-12-31T22:12:08.517

从回复来看，这种类型的错误有很多潜在的来源，所以这里是我自己的（诚然粗心）版本的错误（和简单的解决方案）：

*   XCode 项目构建设置可以设置在两个级别：项目级别和目标级别。对于那些不太熟悉的人，目标级别是您拥有可执行应用程序的地方，通常还有其他项目，例如动态库构建。
*   在 Build Settings 的 Linking 部分有一个 Mach-O Type 选项，您可以在其中设置 Executable、Dynamic Library、Static Library 等。
*   我在准备动态库时遇到了麻烦，正在扫描项目的构建设置，发现 Mach-O 是空白的。所以我设置为动态库。然后我继续查看了更多的东西，忘记了我做了这个改变。但我没有意识到我处于整体项目级别，而不是实际动态库的目标级别。这将所有目标 Mach-O 设置更改为动态库。
*   当然，可执行目标不喜欢被视为动态库，我收到了 OP 的错误消息。
*   在其目标级别构建设置中将可执行文件设置回可执行 Mach-O 修复了所有问题。令人讨厌的是，项目级设置仍然表示动态库，但正确的目标级设置一切正常。

我知道很傻，但是由于上面列出的一些更激烈的解决方案可以间接解决这个错误，我想我会分享一下，以防其他人犯了同样的错误！

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-01-03T01:10:24.163

我从时间机器中恢复数据。请注意，这与 1 小时前存储的数据完全相同。问题从昨天开始。所以它应该是完全相同的数据。\

然而它确实有效。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2013-03-03T23:59:22.777

我尝试了这里提到的一切。没有任何效果。似乎我以某种方式导入了 Info.plist 两次。为了修复它，我选择了项目并按下“验证设置”按钮。之后它对我有用。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-12-19T19:57:09.430

你会很高兴知道这个问题有一个非常简单的解决方案。在项目导航树中选择 Info.plist 并确保它没有分配给目标。我已经确认这是正确的解决方案。如果为 iOS 6 或更早版本构建，您可能还需要将 armv6 添加到支持的架构中

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-01-02T03:50:29.367

我解决这个错误的方法是在我的项目中添加一个虚拟函数。我的问题是**我的应用程序没有自己的代码，只有链接代码**。

我有两个项目的不寻常情况：一个“App”父级和一个“Engine”子级。所有可编译的代码都在子级中，父级简单地与子级链接，将大量特定于应用程序的资源复制到项目中。

显然这让 Xcode 感到难过，导致上述错误。

我的解决方案是将此 C 函数/文件添加到 App 项目中：

`int workaround_for_xcode_reporting_cannot_run_on_selected_destination(){return 0;}`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2012-12-19T23:39:11.400

尝试重命名您的项目。我通过这种方式解决了。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-07-16T18:55:30.280

经过半天的试验，我认为这意味着调试器找不到要启动的可执行文件。我认为这是与先前答案的一个重要区别，因为它是一个潜在的原因，可能有很多症状。在我的情况下，它无法为自定义构建协调应用程序 Info.plist，我们正在复制构建的 plist。我将构建设置更改为 AltDebug 的 Alt-Info.plist 并修复了它。也意味着不再复制。

你的根本原因可能不同，所以关键是想想为什么 Xcode 可能无法找到你构建的应用程序。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-12-07T10:35:29.293

另一个变体解决方案：在尝试了上面列表中的几乎所有内容之后，我通过解决无法找到 TestFlightSDK1 路径的警告来解决此问题。为此，我从 Header Search Paths (Build Settings>Search Paths) 中删除了相关路径并删除了 TestFlightSDK，现在一切正常。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-07-25T11:11:49.870

上面的一切都不起作用，但这确实：

1.  确保您在 git 下拥有所有（不可忽略的）文件

2.  我的 .gitignore 看起来像这样

    ```
    *.xcworkspace
    xcuserdata
    .DS_Store
    Pods 
    ```

3.  在某处备份 MyProject.xcworkspace

4.  删除 MyProject.xcworkspace 和 MyProject

5.  `git reset --hard HEAD`

6.  将 MyProject.xcworkspace 复制回您的工作目录

7.  `pod install`

8.  重建！

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-06-26T07:59:54.047

从 Copy Bundle Resource 构建阶段删除 Info.plist。这对我有用！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-06-19T15:27:15.580

我从一开始就有这个，看起来模拟器无法处理虚拟智能卡是一个问题。不幸的是，我最终只使用通过 USB 连接的 Android 手机。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-10-15T08:16:14.230

发生两件事后，我遇到了同样的问题：

*   我升级到 Facebook SDK 3.1
*   我更新了我的 OSX（带有次要版本更新）

我唯一有效的解决方法是添加 armv7s（注意最后的“s”！！！）就像这里建议的那样： [https ://stackoverflow.com/a/12540654/531527](https://stackoverflow.com/a/12540654/531527)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2012-09-01T16:17:06.940

在为 OSX 项目升级到 Mountain Lion 和 XCode 4.4.1 后，我遇到了这个问题。为了解决这个问题，我不得不将我的部署目标升级到 10.5 或更高版本；它设置为 10.4 及更高版本。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-07-25T13:32:54.400

在这里尝试其他答案和做[这个答案所说](https://stackoverflow.com/questions/16027934/xcode-4-6-2-error-cannot-run-on-the-selected-destination)的我似乎已经解决了这个问题

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2013-11-20T05:51:15.993

我有这个问题并应用不同的解决方案但它没有用，所以我找到了这个问题的解决方案，执行这些步骤

1- 在构建设置 armv6 中添加架构 2- 只需进行验证设置 3- 清理代码 4- 构建并运行

干杯

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2012-09-27T19:50:39.580

您必须在“活动监视器”中找到 Xcode 进程并将其杀死！我只是为了解决类似的问题！

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2012-10-02T19:06:19.817

意外删除 Resources 文件夹后，我遇到了这个问题，当我再次将其添加到项目中时，Bam ！

我也在运行 Mountain Lion 和 XCode 4.4 ！

试图找出导致这种情况的原因，但是当您删除然后添加 info.plist 文件时，它似乎被复制了！有人可以确认吗？

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2013-07-06T19:53:43.173

对我来说，它的 info.plist 重复条目导致了同样的问题。

从信息 plist 中删除了图标文件三角形并正常工作。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2019-06-04T01:48:55.197

**为我工作。**

1.  将您的存储库拖到垃圾箱，然后重新克隆它。
2.  删除您设备上的应用。
3.  重新连接并运行。它应该工作。
4.  找一个出气筒来减轻你的挫败感，抵制犯下严重罪行的冲动。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2016-06-18T05:09:08.937

如果您使用的是 Xcode 8 Beta，那么您必须更改以下内容：

- 选择项目并进入目标构建设置 - 输入键“构建变体”到搜索框 - 刚刚从“armv7”更改为“正常”或反转它。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-12-09T10:32:20.787

更改`supported platform`->`debug`为：`IOS` [![在此处输入图像描述](../Images/efa15ce4f7e61b1315148973417e1a26.png)](https://i.stack.imgur.com/FubnF.png)

# matlab - 数据流kmeans的matlab代码

> ID：11767949
> 
> 赞同：3
> 
> 时间：2012-08-01T21:37:31.173
> 
> 标签：matlab, k-means

我希望能够[流式传输 kmeans](http://en.wikipedia.org/wiki/Data_stream_clustering)，这意味着在对一组数据进行聚类后，我想将其他数据添加到集群或创建新集群，而无需遍历旧数据。

我做了很多搜索，但找不到这段代码的 matlab 实现，但是有很多 C 源代码。有谁知道这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:08:47.110

您可以使用[kmeans](http://www.mathworks.com/help/toolbox/stats/kmeans.html)的“开始”参数。

> 矩阵：质心起始位置的 k×p 矩阵。在这种情况下，您可以为 k 传入 []，并且 kmeans 从矩阵的第一维推断 k。您还可以提供一个 3-D 数组，从数组的第三个维度暗示 'replicates' 参数的值。

# vim - 如何将光标移动到特定的行和列？

> ID：11767956
> 
> 赞同：86
> 
> 时间：2012-08-01T21:38:02.843
> 
> 标签：vim

`:30`会将我的光标移动到第 30 行的开头。

如何告诉 Vim 将光标放在第 y 行第 x 列？这是否可能不使用箭头键或`h`, `j`, `k`,`l`键？

我正在运行 Vim 版本 7.3.429。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-08-01T21:42:12.343

尝试一个数字后跟一个管道以到达该行中的指定列。

`80|`应该让你在那条线上的第 80 位。

编辑：如果你想去一个特定的 x,y 位置，我不确定那个。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-08-01T21:47:57.007

不确定它是否更方便，但您可以`cursor`直接调用该函数：

```
:cal cursor(30, 5) 
```

将跳转到第 30 行第 5 列。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-09-30T11:05:02.187

在命令模式下：

键入一个数字，后跟 G（大写）以转到该行号。
示例：30G 转到第 30 行。
示例：G 转到缓冲区的最后一行。

键入一个数字，后跟 | （管道）转到当前行中的该列。
示例：80| 转到第 80 列。

所以：30G80| 转到第 30 行第 80 列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-22T20:01:09.267

另一种选择使用`execute <line_num>`. 例如，

```
function GotoLine(line)
     execute a:line
endfunction 
```

# hadoop - 什么时候需要“无映射器”？

> ID：11767961
> 
> 赞同：2
> 
> 时间：2012-08-01T21:38:30.790
> 
> 标签：hadoop, mapreduce

在某些用例中，我已经有一段时间没有使用减速器工作了，但我还没有遇到过“没有映射器”工作。“没有映射器”意味着 mapreduce 框架仍然会读取输入文件并以某种方式对它们进行混洗/排序（基于 InputFormat？），这些将是我的减速器的输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:21:04.957

“No mapper”是“identity mapper”的委婉说法。如果您不指定一个，则默认映射器就是这样。至少，恒等映射器进程将未更改的输入引导到正确的 reducer 分区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-21T15:08:28.517

如果您使用 Hadoop Streaming：

```
-mapper "/bin/sh -c \"cat\"" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:21:47.457

对于一些基于输入键的聚合函数，身份映射器是有意义的。mapper 将发出与它的输入相同的 i/o 键，reducer 将聚合特定键的值。

# c++ - 在嵌套类中初始化静态常量成员变量

> ID：11767962
> 
> 赞同：2
> 
> 时间：2012-08-01T21:38:44.160
> 
> 标签：c++

给定 C++ 语言的代码

```
/* file xxx.hpp */

class A
{
};

class B
{
private:
    class C
    {
        static const A a;
    };
}; 
```

如何初始化`A a`嵌套类 C 中的静态常量成员变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:44:13.463

将以下内容添加到恰好一个`.cpp`：

```
const A B::C::a; 
```

请注意，发布的代码只是一个*声明*：这是实际的定义和初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T21:44:29.403

在包含要编译的代码的 cpp 文件中，您应该添加`const A B::C::a = {};`. 初始值设定项（对于 POD 类或聚合类型的 {...} 中的初始值设定项列表或内置类型的单个常量值）是可选的 - 如果未指定，将为`a`. 在原始类型的情况下，它应该设置为 0。

**更新：**

正如 David 在下面所说的那样，当没有为静态成员定义指定初始化程序时，一些编译器会发出警告。如果有一些数据成员`class A`并且在定义的过程中没有指定初始化`a`器，我的 g++ 4.6.3 编译器会发出以下警告（默认情况下被视为错误）：

> test.cpp:26:9：错误：未初始化的 const 'B::C::a' [-fpermissive]
> 
> test.cpp:6:7: 注意：'const class A' 没有用户提供的默认值
> 
> 构造函数 test.cpp:11:8: 注意：并且隐式定义的构造函数不会初始化 'int A::test'</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T21:42:52.517

就像您会成为普通`static`会员一样。

在您的实现文件中：

```
const A B::C::a; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T21:43:50.577

静态成员变量的初始化总是在变量的定义中执行，它必须在程序中的单个翻译单元中：

```
const A B::C::a = {}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-01T21:44:04.260

在源文件 (xxx.cpp) 中，定义变量：

```
const A B::C::a; 
```

# javascript - 如何在 Javascript 或 jQuery 中复制一个对象数组中的值？

> ID：11767965
> 
> 赞同：0
> 
> 时间：2012-08-01T21:39:08.773
> 
> 标签：javascript, jquery, arrays

我的网站上有一个用于自定义颜色的对象数组。当用户选择颜色时，它会像这样生成：

```
colours = {
  "a":["red", "green", "blue"],
  "b":["pink", "yellow", "red"],
  "c":["violet", "black"],
  //and lots more
} 
```

我想要实现的是连接（这会有所不同）`a`with`d`和`c`with的值`x`。的值所做的任何更改都`a`应该是 的值`d`。我有多个这样的页面，我必须连接不同的值。我该怎么做这可能吗？`a`如果我可以像这样=`d`或`colours[a]`=将它设置在每个页面的标题上，那就太好了`colours[d]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:53:23.980

好的，我找到了一种方法，我不确定这是否是正确的方法。在我的主要 html 页面标题上，我制作了另一个像这样的对象：

```
 connections = {'a':'d', 'c':'x'};
 // the key to be connected : the key to connect to 
```

然后在我的编码页面中：

```
 for (ax in connections) {
 // this will create a loop through connections object
    var ay = connections[ax];
    colours[ay] = colours[ax];
 // this will make a and d, c and x equal in colours. 
```

这解决了问题。谢谢大家的帮助，我希望这对某些人有所帮助。

# c# - 线程终止超时

> ID：11767974
> 
> 赞同：2
> 
> 时间：2012-08-01T21:39:49.730
> 
> 标签：c#, multithreading, task-parallel-library, task

我有一个动态加载和运行用户编写的 DLL 的应用程序。它有一个在计时器上运行的调度引擎，并检查要运行的“规则”（dll）。每个规则都在其自己的线程上使用：

```
private void OnTimer(...)
{
   timer.stop();
   ...
   foreach(RuleData ruleData in RulesToRun)
      ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(ExecuteRule), ruleData);
   _asyncOpsAreDone.WaitOne();
   timer.start();
} 
```

当异步操作完成后，程序等待调度计时器计时并运行另一个循环。

问题是有时用户编写的 dll 需要很长时间才能运行。

*   如果我要等待：这将推迟下一个计时器滴答（因为它在执行时停止并在之后再次启动）
*   如果我不等待：我正在寻找并行运行的未知数量的规则，以完成我的应用程序用户池。

如果您考虑到一个规则执行可能会挂起，我的选择是：同步 - 挂起所有规则，或异步 - 干燥资源池。

我认真考虑过让规则执行超时，但 .Abort() 并不那么受欢迎： [超时模式 - Thread.Abort 到底有多糟糕？](https://stackoverflow.com/questions/710070/timeout-pattern-how-bad-is-thread-abort-really)

以及用于取消任务的并行编程解决方案，涉及编写“ThrowIfCancellationRequested();” 在 dll 执行中（我没有源代码） [http://msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:52:55.860

“sgorozco”的第三条评论对我帮助最大，我选择继续异步运行规则，但以这种方式跳过已经在处理的规则我：

*   为正确编写的其他规则按时完成工作。

*   跳过卡住的作业。

*   避免杀死线程并留下损坏的内存垃圾。

# ruby - 使用 ruby -git 查看本地是否领先于远程

> ID：11767980
> 
> 赞同：0
> 
> 时间：2012-08-01T21:40:10.410
> 
> 标签：ruby, git, fetch, status

我试图找出是否可以使用 ruby​​-git 查看我的本地存储库是否在我的远程之前。我正在查看[https://github.com/schacon/ruby-git/blob/master/lib/git/status.rb](https://github.com/schacon/ruby-git/blob/master/lib/git/status.rb)从它的外观来看这是不可能的，但我可能是错的 - 任何有经验的人对这个库有什么意见吗？

我正在考虑使用库调用 fetch ，然后转至`git status | grep 'ahead'`（或其他东西，取决于状态的输出）以查看存储库是否在前面，但如果可能的话，尝试做所有纯红宝石。

# asp.net - 无法让 ASP.NET URL 重写以排除特定文件

> ID：11767984
> 
> 赞同：1
> 
> 时间：2012-08-01T21:40:54.657
> 
> 标签：asp.net, url-rewriting, rewrite

我想将所有到我网站的 HTTP 请求重定向到 HTTPS，但文件“/blah.txt”除外。这是我一直在尝试的基本重写规则。我尝试使用 {REQUEST_FILENAME} 和 {URL}。我尝试了几种我认为应该匹配的不同模式。

下面的规则将**每个**请求重定向到 HTTPS，**包括**对 blah.txt 的请求

```
 <rewrite>
        <rules>
            <clear />
            <rule name="Redirect to HTTPS" stopProcessing="true">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{HTTPS}" pattern="^OFF$" />
                    <add input="{REQUEST_FILENAME}" matchType="Pattern" pattern="blah\.txt$" ignoreCase="true" negate="true" />
                </conditions>
                <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:34:41.353

感谢 Bryan 改变了我的思路。有时我会认为我的解决方案将基于无错误代码工作。事实上，重写器中似乎存在一个错误，使我第一次尝试编写规则失败。但是，此规则确实有效：

```
 <rewrite>
        <rules>
            <clear />
            <rule name="Temp" stopProcessing="true">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{REQUEST_FILENAME}" pattern="blah\.txt$" />
                </conditions>
                <action type="None" />
            </rule>
            <rule name="Redirect to HTTPS" stopProcessing="true">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{HTTPS}" pattern="^OFF$" />
                </conditions>
                <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

将匹配规则放在其他规则之前并使其停止处理规则似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:14:34.480

我只看到一个规则......似乎与所有内容都匹配。这里至少需要两条规则。

我对 IIS 重写的功能不太熟悉。所以两个问题：

有没有“什么都不做”的动作？

任何包罗万象的规则都不会匹配所有请求吗？您可能需要将 blah.txt 规则放在首位。

# ios - ios - 努力从 NSArray 填充 UITableView

> ID：11767985
> 
> 赞同：2
> 
> 时间：2012-08-01T21:41:00.990
> 
> 标签：ios, ios5

我有这个代码：

```
@interface MyBusinessesController : UIViewController
{
    NSDictionary *businesses;
    NSArray *items_array;
}
@property (weak, nonatomic) IBOutlet UILabel *messageLabel;
- (IBAction)plan:(id)sender;

@property (weak, nonatomic) IBOutlet UITableView *itemList;

@end 
```

我在 .m 文件的标题区域中设置了 UITableView 和 NSArray。然后我有一个远程服务器调用并取回 JSON。我将 JSON 数据放入这样的数组中：

```
items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil]; 
```

然后我遍历这样的项目：

```
for (int i = 0; i<= items_array.count - 1; i++) 
{
  NSDictionary *dict = [items_array objectAtIndex:i];

  NSString *item_title = [dict objectForKey:@"item_title"];
  NSString *item_id = [dict objectForKey:@"item_id"];
  ... 
```

然后我想将它作为一行添加到我的 UITableView 中，但我现在正在努力解决这个问题。

我想要的是向用户显示 item_title，当用户按下标题时，我将能够知道如何获取 item_title 的 item_id。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:49:26.613

您需要在`UITableViewDataSource`协议中实现所需的方法，并将`dataSource`tableView 的属性设置为`self`.

因此，实现适当的`UITableViewDelegate`方法，并将`delegate`tableView 的属性设置为`self`.

有关需要哪些方法以及您可能想要实现哪些可选方法的详细信息，请参阅文档。

不要忘记在您的`.h`文件中宣传您的 Class 符合这两种协议：

```
@interface MyBusinessesController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

您可以通过调用使 tableView 刷新其内容`[itemList reloadData]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:53:21.427

表视图的工作方式与您使用的不同。您不会遍历数据并填写表格。相反，您将自己设置为表格的代表，然后表格会询问您：“您有多少数据，第 5 行需要什么数据”等等。

我真的建议你在这里阅读这个很棒的教程：http: [//kurrytran.blogspot.com/2011/10/ios-5-storyboard-uitableview-tutorial.html](http://kurrytran.blogspot.com/2011/10/ios-5-storyboard-uitableview-tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T21:52:46.407

您可以让 UITableView 的数据源方法处理此问题，而不是遍历数组并提取字符串值。因此，在 cellForRowAtIndexPath 方法中，您将使用索引路径对 items_array 进行索引，如下所示：

```
NSDictionary *dict = [items_array objectAtIndex:[indexPath row]]; 
```

然后，您将像在循环中那样将字符串从字典中拉出，并将单元格的标题设置为字符串。要选择单元格，您可以在 didSelectRowAtIndexPath 方法中编写代码。

这是我正在从事的一个项目的示例：

```
 #pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [items_array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault)
                                                   reuseIdentifier:@"cell"];

    NSDictionary *dict = [items_array objectAtIndex:[indexPath row]];
    cell.textLabel.text = [dict objectForKey:@"item_name"];

    return cell;
} 
```

第一种方法指定表中所需的部分数。如果你想要一个非常简单的表，这将是 1。第二种方法是行数。这将是 items_array 中的项目数，因此：`[items_array count]`。第三种方法基于索引创建单元格。它将从第 0 节到您指定的节数，从第 0 行到您指定的每个节的行数。所以现在你可以索引你的数组，而不是循环。`[indexPath section]`给出节号并`[indexPath row]`给出行号.

*我知道我可能应该在制作新的单元格之前出列单元格，但我的数组非常小。

# jquery - Jquery 表单提交和 ajax 调用重叠。Ajax 调用已取消

> ID：11767989
> 
> 赞同：0
> 
> 时间：2012-08-01T21:41:24.893
> 
> 标签：jquery, ajax, forms, submit

我有一个网络应用程序，用户可以在其中创建发票。该应用程序基于 jquery 和 ajax 调用。引入问题的流程：

1.  用户填写发票表格。勾选复选框以创建 PDF。
2.  用户点击“创建发票”按钮
3.  应用程序通过 AJAX 调用将发票数据插入数据库
4.  如果调用成功返回，将使用发票数据创建一个 FORM，并将其自动提交并从 DOM 中删除。在此步骤中，发票将即时创建，浏览器将开始下载 PDF。
5.  与此同时，最后一次 AJAX 调用 (getDeliveries()...) 删除发票表单并重新加载起始屏幕。

问题是**最后一个 ajax 调用被取消**（它可以在 Chrome 错误控制台中看到）并且屏幕将是空白的。没有加载结果，这太令人沮丧了。我认为问题在于表单提交和ajax调用重叠。

你知道如何解决这个问题吗？任何其他强制下载文件的解决方案（我可以等待开始调用 getDeliveries 函数）？

这是我创建的js代码：

```
 var str = $("#invoiceForm").serialize();

    $('#invoiceForm input[disabled], #invoiceForm select[disabled]').each( function() {
        str = str + '&' + this.id + '=' + $(this).val();
    });
    //Save or update the invoice first
    $.ajax({
        type: "POST",
        url: BASEURL+"productFuncs/setInvoice.php",
        data: "f="+f+"&print=1&"+str,
        success: function(data, textStatus){
            $("#addAjax").hide();
            $("#addButton").show();

            if ( !isNaN( parseInt(data) ) ) {

                //Print out                 
                if ( $("#pdf").is(":checked") ) {
                    //Print out to PDF      
                    var url = BASEURL+"productFuncs/getPrintOut.php";       

                    var inputs = '<input type="hidden" name="f" value="'+ f +'" />' +
                                '<input type="hidden" name="pdf" value="1" />' +
                                '<input type="hidden" name="copy" value="2" />' +
                                '<input type="hidden" name="orig_id" value="'+ data +'" />';

                    $('#invoiceForm input[disabled], #invoiceForm select[disabled]').each( function() {
                        inputs+='<input type="hidden" name="'+ this.id +'" value="'+ $(this).val() +'" />';
                    });                 

                    var pairs = $("#invoiceForm").serializeArray();
                    $.each( pairs, function(i, field) { 
                        inputs+='<input type="hidden" name="'+ field.name +'" value="'+ field.value +'" />'; 
                    });

                    //send request
                    $('<form action="'+ url +'" method="post">'+inputs+'</form>').appendTo('body').submit().remove();

                }
                else {              

                    //Print out to HTML and directly to printer
                    $.ajax({
                        type: "POST",
                        url: BASEURL+"productFuncs/getPrintOut.php",
                        data: "f="+f+"&copy=2&orig_id="+data+"&"+str,
                        dataType: "html",
                        success: function(data, textStatus){
                            $("#printOut").html(data);
                            //Delay because of the IE
                            var t=setTimeout(' $("#printedArea").print() ', 3000);                          
                        }
                    });
                }

                $('#newDeliveryNote, #leftSide, #rightSide').toggle();
                getDeliveries(f, '');                   
            }
            else {
                //Not enough quantity - we have to set the ID nothing to save the delivery again
                $('#invoiceForm input[name=id]').val("");
                alert( data );
            }

        }
    }); 
```

getDeliveries 函数中的 AJAX 调用：

```
 $.ajax({
        type: "GET",
        url: BASEURL+"productFuncs/getDeliveries.php",
        data: "d="+d+"&f="+f,
        success: function(data, textStatus){
            $("#rightSide").html(data);

            $("#cover").hide();     
            $("#ajaxMessage").fadeOut(200);
            jsLink();       
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:59:54.967

我认为您的表单提交是问题所在。您可以使用 url 创建一个链接以访问创建 pdf 的资源，触发点击并将其删除。

就像是：

```
// of course, you will change href to the url that will be used to generate the pdf
$( "body" ).append( "<a id='downloadLink' href='www.stackoverflow.com' target='_blank'></a>" );
$( "#downloadLink" )[0].click();
$( "#downloadLink" ).remove(); 
```

jsFiddle：http: [//jsfiddle.net/davidbuzatto/QGs5n/](http://jsfiddle.net/davidbuzatto/QGs5n/)

**编辑：**要使用 POST，我认为[**这**](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)会对您有所帮助。我在这里找到它：[使用 Javascript/jQuery 下载文件](https://stackoverflow.com/questions/3749231/download-file-using-javascript-jquery)

# javascript - Twitter bootstrap：是否可以使用 span5 或 span4 将具有两行的容器流体居中？

> ID：11767991
> 
> 赞同：6
> 
> 时间：2012-08-01T21:41:34.557
> 
> 标签：javascript, html, css, web-applications, twitter-bootstrap

我有这样的东西![在此处输入图像描述](../Images/42fd0d13a8e17354f0c6032642ffbd40.png)

我将这些与 span6 排成一行。但是，当我对它们都执行 span5 时，它们会从左侧浮动，在右侧留下很多空白空间。我可以将它们放在页面中心吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T22:20:51.167

因为`.offset`类在 Bootstrap v2.0.4 中不起作用，您可以使用`.span1`类在这两个元素的左侧和右侧创建空白空间。像这样：

```
<div class="row-fluid">
  <div class="span1">
    <!-- empty -->
  </div>
  <div class="span5">
    <!-- content of left element (tree map) -->
  </div>
  <div class="span5">
    <!-- content of right element (datatables) -->
  </div>
  <div class="span1">
    <!-- empty -->
  </div>
</div> 
```

# postgresql - postgres.ECPG：'COPY datas FROM :file_name' 可能吗？

> ID：11767992
> 
> 赞同：1
> 
> 时间：2012-08-01T21:41:36.100
> 
> 标签：postgresql

我正在编写一个需要与 postgres 数据库交互的 C++ 应用程序。我想使用 COPY 语句初始化表**数据。**

这是代码：

```
EXEC SQL BEGIN DECLARE SECTION ;
  const char * fileData_name = file_data_name ;
EXEC SQL END DECLARE SECTION ;

EXEC SQL COPY datas
         FROM :fileData_name
         WITH (FORMAT text, DELIMITER '|') ; 
```

这是来自 ecpg 的错误消息：

```
ERROR: syntax error at or near ":fileData_name" 
```

根据 postgres[文档](http://www.postgresql.org/docs/9.1/static/ecpg-variables.html)： *这种在 SQL 语句中插入 C 变量的方式适用于 SQL 语句中需要**值表达式**的任何地方。*

如果 COPY *stuff* FROM *field*，那么我的猜测是该*字段*不是值表达式。

有什么帮助吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:48:31.073

好吧，这是不可能的……根据[这篇文章](https://dba.stackexchange.com/questions/5454/postgres-plpgsql-using-a-variable-inside-of-a-dynamic-create-statement)。但是可以使用准备好的语句：

```
char * sql_template = 
    "COPY datas FROM '%s' WITH (FORMAT text, DELIMITER '|');" ;
const char * file_name = "myfile.data";
unsigned int sql_command_len = 
    strlen (sql_template) - 2 + strlen (file_name) + 1;

EXEC SQL BEGIN DECLARE SECTION ; 
    char * sql_command = (char*) malloc (sizeof(char)*sql_command_len) ; 
EXEC SQL END DECLARE SECTION ; 

sprintf (sql_command, sql_template, file_name) ;

EXEC SQL PREPARE cpy FROM :sql_command;
EXEC SQL EXECUTE cpy ;
EXEC SQL DEALLOCATE PREPARE cpy ;
free (sql_command) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T08:54:08.627

[只需根据PostgreSQL 文档](https://www.postgresql.org/docs/12/sql-copy.html)单引号 :fileData_name 变量：

```
EXEC SQL COPY datas
         FROM ':fileData_name'
         WITH (FORMAT text, DELIMITER '|') ; 
```

# java - 当模拟器启动并尝试连接数据库时，应用程序意外停止

> ID：11767995
> 
> 赞同：0
> 
> 时间：2012-08-01T21:41:56.177
> 
> 标签：java, android, database, emulation

您好，我是 android 开发新手，这是我的第一个应用程序。我尝试连接到数据库，但是当模拟器启动时，应用程序意外停止。eclipse中的一切都很好，但是当我运行模拟器时它会停止。这是代码：

```
public class Antallaktika extends Activity {
JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb = null; 
ArrayList<String> al = new ArrayList<String>();
ArrayList<String> al1 = new ArrayList<String>();
ArrayList<String> al2 = new ArrayList<String>();
String targetname;
String targetsku;
String targetprice;
int responseCode;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.antallaktika);
    setTitle("Ανταλλακτικά");

    try {
        URL url = new URL("http://machina.gr/antallaktika.php");
        URLConnection connection = url.openConnection();
        connection.setConnectTimeout(2000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        responseCode = httpConnection.getResponseCode();
    }
    catch (Exception e) {} 
    try{
        if(isNetworkAvailable()==true  && responseCode == HttpURLConnection.HTTP_OK){
            new LoadData().execute();
        }
        else{
            AlertDialog.Builder ad=new AlertDialog.Builder(this);
            ad.setMessage("No Internet Connection available!!!");
            ad.show();
        }
    }
    catch(Exception e){

    }
}

public class LoadData extends AsyncTask<Void, Void, Void> { 
    private ProgressDialog progressDialog;  
    @Override
    // can use UI thread here
    protected void onPreExecute() {
    this.progressDialog = ProgressDialog.show(Antallaktika.this, ""," Loading...");  
    }
    @Override
    protected void onPostExecute(final Void unused) {  
         this.progressDialog.dismiss(); 
        try{
                 ListView listview = (ListView) findViewById(R.id.listView1);  
                this.progressDialog.dismiss();  
                 listview.setAdapter(new DataAdapter(Antallaktika.this,al.toArray(new String[al.size()]),al1.toArray(new String[al1.size()]),al2.toArray(new String[al2.size()])));

            }
            catch(Exception e){

                Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
            } 

    }

    @Override
    protected Void doInBackground(Void... params) {
    // TODO Auto-generated method stub  
        // HTTP post

                try {

                    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    HttpClient httpclient = new DefaultHttpClient(); 
                    try{
                    HttpPost httppost = new HttpPost("http://machina.gr/antallaktika.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                    }
                    catch(Exception e){
                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                    }
                    //buffered reader
                    try{
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"), 80);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");
                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                    }
                    catch(Exception e){
                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                    }
                    try{
                    jArray = new JSONArray(result);
                    JSONObject json_data = null;
                    for (int i = 0; i < jArray.length(); i++) {
                        json_data = jArray.getJSONObject(i); 
                        targetname=json_data.getString("targetname");
                        targetsku=json_data.getString("targetsku");
                        targetprice = json_data.getString("targetprice"); 
                        al.add(targetname); 
                        al1.add(targetsku);
                        al2.add(targetprice);  
                    }
                }
                    catch(JSONException e){
                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                    }   
                    } catch (ParseException e) {
                    //  Log.e("log_tag", "Error in http connection" + e.toString());
                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                    }  
                     catch (Exception e) {
                            //  Log.e("log_tag", "Error in http connection" + e.toString());
                                Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                            }       

            return null;

        }
    }

    public boolean isNetworkAvailable() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = cm.getActiveNetworkInfo();
        // if no network is available networkInfo will be null, otherwise check
        // if we are connected
        if (networkInfo != null && networkInfo.isConnected()) {

            // Log.i("net status:", "Online...!!!");
            return true;
        }
        // Log.i("net status:", "offline...!!!");
        return false;

}

} 
```

logcat 是：

```
08-01 20:51:36.042: E/AndroidRuntime(375): FATAL EXCEPTION: AsyncTask #1
08-01 20:51:36.042: E/AndroidRuntime(375): java.lang.RuntimeException: An error occured while executing doInBackground()
08-01 20:51:36.042: E/AndroidRuntime(375):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.lang.Thread.run(Thread.java:1019)
08-01 20:51:36.042: E/AndroidRuntime(375): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
08-01 20:51:36.042: E/AndroidRuntime(375):  at android.os.Handler.<init>(Handler.java:121)
08-01 20:51:36.042: E/AndroidRuntime(375):  at android.widget.Toast.<init>(Toast.java:68)
08-01 20:51:36.042: E/AndroidRuntime(375):  at android.widget.Toast.makeText(Toast.java:231)
08-01 20:51:36.042: E/AndroidRuntime(375):  at com.pythagoras.machina.gr.Antallaktika$LoadData.doInBackground(Antallaktika.java:161)
08-01 20:51:36.042: E/AndroidRuntime(375):  at com.pythagoras.machina.gr.Antallaktika$LoadData.doInBackground(Antallaktika.java:1)
08-01 20:51:36.042: E/AndroidRuntime(375):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-01 20:51:36.042: E/AndroidRuntime(375):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-01 20:51:36.042: E/AndroidRuntime(375):  ... 4 more
08-01 20:51:37.142: E/WindowManager(375): Activity com.pythagoras.machina.gr.Antallaktika has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405312b8 that was originally added here
08-01 20:51:37.142: E/WindowManager(375): android.view.WindowLeaked: Activity com.pythagoras.machina.gr.Antallaktika has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405312b8 that was originally added here
08-01 20:51:37.142: E/WindowManager(375):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
08-01 20:51:37.142: E/WindowManager(375):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-01 20:51:37.142: E/WindowManager(375):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-01 20:51:37.142: E/WindowManager(375):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.Dialog.show(Dialog.java:241)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ProgressDialog.show(ProgressDialog.java:107)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ProgressDialog.show(ProgressDialog.java:90)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ProgressDialog.show(ProgressDialog.java:85)
08-01 20:51:37.142: E/WindowManager(375):   at com.pythagoras.machina.gr.Antallaktika$LoadData.onPreExecute(Antallaktika.java:85)
08-01 20:51:37.142: E/WindowManager(375):   at android.os.AsyncTask.execute(AsyncTask.java:391)
08-01 20:51:37.142: E/WindowManager(375):   at com.pythagoras.machina.gr.Antallaktika.onCreate(Antallaktika.java:67)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 20:51:37.142: E/WindowManager(375):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 20:51:37.142: E/WindowManager(375):   at android.os.Looper.loop(Looper.java:130)
08-01 20:51:37.142: E/WindowManager(375):   at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 20:51:37.142: E/WindowManager(375):   at java.lang.reflect.Method.invokeNative(Native Method)
08-01 20:51:37.142: E/WindowManager(375):   at java.lang.reflect.Method.invoke(Method.java:507)
08-01 20:51:37.142: E/WindowManager(375):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 20:51:37.142: E/WindowManager(375):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 20:51:37.142: E/WindowManager(375):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:58:48.113

您正在尝试从 UI 线程以外的线程访问 UI 功能（我猜它是 Toast）。这是不可能的。有关如何在 UI 线程上运行代码的信息，请参见[此处。](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

# javascript - Perl 使用 WWW::Mechanize 设置一个没有值的单选按钮

> ID：11767998
> 
> 赞同：3
> 
> 时间：2012-08-01T21:42:18.813
> 
> 标签：javascript, perl, mechanize, www-mechanize

我不得不说我是 Perl 的新手，到目前为止可能编写了大约 3 或 4 个脚本，而且我发现 Perl 很容易理解和使用。

无论如何，我当前的脚本有问题。我已经被这个问题困扰了一段时间，似乎无法找到解决方法。

遍历某个网站后，我来到一个页面，让我在两个单选按钮之间单击并点击下载按钮。

我需要让我的脚本选择任一按钮并点击下载，但页面的来源没有给我一个值来设置单选按钮时使用[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize).

这是网页源代码的一点点。

```
<input type='radio' onclick="url('URL GOES HERE')"> 
```

这几乎就是两个按钮。我注意到当我确实选择了一个并查看源代码时，代码变为

```
<input type='radio' checked onclick="url('URL GOES HERE')"> 
```

但是我不能`WWW::Mechanize`自动设置一个，因为我不知道该输入什么值。我试过`on`, `checked`, `onclick`, `true`, `checked onclick`, `select`, `selected`, 但无济于事。

这是与此相关的代码行

```
$mech->set_visible([radio => 'checked onclick']); 
```

任何帮助将不胜感激，也是第一次来这里。

我忘了提到我正在使用一台目前有很多限制的计算机工作。所以我无法在计算机上安装 Firefox 或 Selenium Server。

**编辑**

我相信我可能遇到的问题是这些东西可能在 JavaScript 中。我对 HTML 知之甚少，但在我在标题的某处看到 JavaScript 之前，源代码看起来就像是这样？无论如何，我记得它`WWW::Mechanize`并不真正支持 JavaScript，所以也许这就是问题所在。

谢谢大家的回复，我真的很感激。但是经过大量的挖掘和仔细检查后，我的老板和我有点意识到所有的下载链接都非常相似，我真正需要做的就是让脚本自定义创建下载链接，而不是通过浏览多个网页的麻烦。希望我早点看到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:31:53.977

[HTML::Form](http://p3rl.org/HTML%3a%3aForm)不提供激活未命名单选按钮的 API。您可以通过挖掘内脏来读取区别属性。这应该有效（大部分未经测试）：

```
use WWW::Mechanize qw();
my $w = WWW::Mechanize->new;
$w->get('file:///tmp/so11767998.html');
for my $input (($w->forms)[0]->inputs) {
    $input->check if q{url('URL GOES HERE')} eq $input->{onclick}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:31:07.773

您需要了解在浏览器 GUI 中选择单选按钮后会发生什么。有两种方法：

1.  你可以检查 url() Javascript 子程序

2.  或者您可以在提交目标表单后记录您的浏览器请求。

我建议为此使用 Firefox 的 HTTPFox 扩展。因此，您只需选择您的输入，在 HTTPFox 中启动会话并提交表单。接下来，您检查已发布（或获取）哪些数据，并在您的 Mechanize 脚本中复制相同的字段。就像是：

```
$mech->submit_form(
    form_name => "form_name",
    fields => {
        input1_name => "value1",
        input2_name => "value2",
.....
    },
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-28T02:34:36.613

我也有这个问题，并通过调用 Javascript 来单击单选按钮来解决它。

```
$mech->eval_in_page('document.getElementById("id_radiobutton").checked = true;'); 
```

这对我有用。