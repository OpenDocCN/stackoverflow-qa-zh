# StackOverflow 问答 11189000-11189999

# tfs - 构建过程模板中的 TFS“将输出复制到放置文件夹”参数

> ID：11189000
> 
> 赞同：1
> 
> 时间：2012-06-25T12:03:11.350
> 
> 标签：tfs, build-process

仅当参数“将输出复制到放置文件夹”设置为 true 时，我才想在构建过程模板中做一些工作。是否有任何与此参数相关的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:30:16.523

我设法通过检查来做到这一点`Not String.IsNullOrEmpty(BuildDetail.DropLocation)`。

# css - 对齐图像/精灵以显示上半部分和下半部分

> ID：11189002
> 
> 赞同：2
> 
> 时间：2012-06-25T12:03:13.137
> 
> 标签：css, image, sprite

我正在尝试定位图像，因此下半部分与一张图像的上半部分相反，但不知道该怎么做。

[提琴手](http://jsfiddle.net/tobeeornot/JvnHn/)

图像本身看起来像[这样](http://i1200.photobucket.com/albums/bb328/tobeeornot/sec.png)。

编辑：最终图像应如下[所示。](http://i1200.photobucket.com/albums/bb328/tobeeornot/section.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:18:38.503

你的 CSS`section.sep h3.top`应该是`section.sep h4.top`因为你`h4`在 HTML 中使用过而不是`h3`

你的 HTML ：

```
<section class="sep">
    <h4 class="top company-tag">Pics</h4>
    <hr/>
    <h4 class="bottom company-tag">Map</h4>
</section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:23:35.990

**您只需在section.sep h4**中定义高度和行高， 现在可以根据您的要求正常工作..

**CSS**

```
section.sep h4{
  background: url('http://i1200.photobucket.com/albums/bb328/tobeeornot/sec.png') no-repeat transparent;
  color:#fff;
  font-family:arial;
    font-size: 11px;
    font-weight: 400;
    height: 69px;
    letter-spacing: 1px;
    line-height: 50px;
    margin: 0 auto;
    text-align: center;
    text-transform: uppercase;
    width: 77px; 
```

看演示：- [http://jsfiddle.net/JvnHn/7/](http://jsfiddle.net/JvnHn/7/)

# c# - 将 sbyte 转换为字节

> ID：11189004
> 
> 赞同：12
> 
> 时间：2012-06-25T12:03:16.610
> 
> 标签：c#, byte, bits

我有一个类型的变量，`sbyte`想将内容复制到`byte`. 转换不会是值转换，而是逐位复制。

例如，

如果 mySbyte in bits 为：'10101100'，则转换后，相应的字节变量也将包含位'10101100'。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T13:33:39.827

让我澄清一下`unchecked`业务。[MSDN 页面](http://msdn.microsoft.com/en-us/library/a569z7k8%28v=vs.110%29.aspx)声明`unchecked`用于防止溢出检查，否则，当**在检查的上下文中时**，会给出编译错误或抛出异常。

... **IF**在检查的上下文中。

明确检查上下文：

```
checked { ... } 
```

或隐式*，在处理**编译时常量时**：

```
byte b = (byte)-6; //compile error
byte b2 = (byte)(200 + 200); //compile error

int i = int.MaxValue + 10; //compiler error 
```

但是在处理**运行时**变量时，**`unchecked`**默认情况下上下文是**：

```
sbyte sb = -6;
byte b = (byte)sb; //no problem, sb is a variable

int i = int.MaxValue;
int j = i + 10;    //no problem, i is a variable 
```

总结和回答原来的问题：

需要`byte<->sbyte`转换**常量**吗？使用`unchecked`和铸造：

```
byte b = unchecked( (byte) -6 ); 
```

需要对**变量**`byte<->sbyte`进行转换吗？刚投：

 **```
sbyte sb = -6;
byte b = (byte) sb; 
```

* * *

* 默认情况下，还有第三种获取检查上下文的方法：通过调整编译器设置。例如 Visual Studio -> 项目属性 -> 构建 -> 高级... -> [X] 检查算术上溢/下溢

*****在 C# 中***默认情况下未选中运行时上下文。例如，在 VB.NET 中，默认的运行时上下文是 CHECKED。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T12:10:21.143

```
unchecked
{
    sbyte s = (sbyte)250; //-6 (11111010) 
    byte b = (byte)s; //again 250 (11111010) 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T12:26:38.273

```
unchecked
{
    sbyte s;
    s= (sbyte)"your value";
    byte b=(byte)s;
} 
```

更多[关于](http://msdn.microsoft.com/en-us/library/a569z7k8%28v=vs.71%29.aspx)`unchecked`这里

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-25T12:09:53.843

像这样：

```
sbyte sb = 0xFF;
byte b = unchecked((byte)sb); 
```**

| aaa | bbb |
| ccc | ddd |

| aaa | bbb |
| ccc | ddd |

于 2012-06-25T12:35:45.357 回答 This answer is useful 1 当使用带有border属性的无样式表时，边框在不同的浏览器中看起来不同。一些浏览器绘制实心边框，一些为表格绘制外边框，为单元格绘制内嵌边框等。在 CSS 中无法实现这种变化。而且几乎不需要它。在考虑了 CSS 必须提供的各种工具之后，只需选择首选呈现方式，这些工具大大超出了 HTML 属性的表现能力（除了创建一些浏览器依赖项）。 于 2012-06-25T13:29:14.617 回答 Related 2 javascript - 如何防止 IE10 在尝试使用 DomObject.filters 属性时崩溃？ 4 ruby - 无法在 Windows 8 上安装 nokogiri ruby gem。 2 eclipse - java.lang.NoClassDefFoundError：一次添加大量类路径变量的快速方法 1 javascript - 如果在响应 Confirm() 时按下“取消”，则撤消操作 1 jquery - Jquery 不在 html 中显示 UL 或 LI 标记 1 asp.net-mvc-4 - MVC 站点地图提供程序 ConfigurationErrorException：站点地图文件无效 1 node.js - 在开始使用流星之前我应该 学习 node.js 吗？ 2 java - 从 ejml 到具有稀疏矩阵的库的转换 2 java - 在 jFreeChart 中一次显示所有 XYSeries 以提高速度 2 asp.net-mvc - 在 Ajax 调用中未触发成功和错误函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# html - 如何在 CSS 中模仿 我有一个简单的 html 表格元素。 < 问问题 问问题 2012-06-25T12:03:25.610 16653 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个简单的 html 表格元素。

| aaa | bbb |
| ccc |

| aaa | bbb |
| ccc | ddd |

现在在 CSS 中做我的第一步，我尝试将后一种表格样式定义为 CSS。 我无法实现它 - 无论我做什么，边框看起来都不一样。请帮忙。 我的带有 CSS 样式的 HTML： 

| aaa | bbb |
| ccc | ddd |

HTML

| aaa | bbb |
| ccc | ddd |

| aaa | bbb |
| ccc | ddd |

这是没有reset.css CSS的解决方案 table.mytable { width: 40%; border: 2px solid #444; border-spacing: 0; } table.mytable tr {border-bottom: 1px solid #444} table.mytable td{ border-right: 1px solid #444; border-bottom: 1px solid #444; padding: 5px; } table.mytable tr td:last-child{ border-right: 0 } table.mytable tr:last-child td{ border-bottom: 0 } 这是 reset.css CSS 的解决方案 table.mytable { width: 40%; border: 2px solid #000; } table.mytable td{ border: 1px solid #000; } htmlcsshtml-tableborder 4 3 回答 3 This answer is useful 4 HTML

| aaa | bbb |
| ccc | ddd |

| aaa | bbb |
| ccc | ddd |

这是没有reset.css CSS的解决方案 table.mytable { width: 40%; border: 2px solid #444; border-spacing: 0; } table.mytable tr {border-bottom: 1px solid #444} table.mytable td{ border-right: 1px solid #444; border-bottom: 1px solid #444; padding: 5px; } table.mytable tr td:last-child{ border-right: 0 } table.mytable tr:last-child td{ border-bottom: 0 } 这是 reset.css CSS 的解决方案 table.mytable { width: 40%; border: 2px solid #000; } table.mytable td{ border: 1px solid #000; } 于 2012-06-25T12:24:24.857 回答 This answer is useful 1 我不认为你可以完全按照你喜欢的方式翻译属性......因为当时标准并没有应用到那个程度，而且通常情况在不同的浏览器中看起来不同。你最好的办法是试着把它调得更近一些。   

| aaa | bbb |
| ccc | ddd |

| aaa | bbb |
| ccc | ddd |

于 2012-06-25T12:35:45.357 回答 This answer is useful 1 当使用带有border属性的无样式表时，边框在不同的浏览器中看起来不同。一些浏览器绘制实心边框，一些为表格绘制外边框，为单元格绘制内嵌边框等。在 CSS 中无法实现这种变化。而且几乎不需要它。在考虑了 CSS 必须提供的各种工具之后，只需选择首选呈现方式，这些工具大大超出了 HTML 属性的表现能力（除了创建一些浏览器依赖项）。 于 2012-06-25T13:29:14.617 回答 Related 2 javascript - 如何防止 IE10 在尝试使用 DomObject.filters 属性时崩溃？ 4 ruby - 无法在 Windows 8 上安装 nokogiri ruby gem。 2 eclipse - java.lang.NoClassDefFoundError：一次添加大量类路径变量的快速方法 1 javascript - 如果在响应 Confirm() 时按下“取消”，则撤消操作 1 jquery - Jquery 不在 html 中显示 UL 或 LI 标记 1 asp.net-mvc-4 - MVC 站点地图提供程序 ConfigurationErrorException：站点地图文件无效 1 node.js - 在开始使用流星之前我应该 学习 node.js 吗？ 2 java - 从 ejml 到具有稀疏矩阵的库的转换 2 java - 在 jFreeChart 中一次显示所有 XYSeries 以提高速度 2 asp.net-mvc - 在 Ajax 调用中未触发成功和错误函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11189005
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, html-table, border

我有一个简单的 html 表格元素。

```
<table border="2" cellpadding="5" cellspacing="0" width="40%">
    <tr><td> aaa </td><td> bbb </td></tr>
    <tr><td> ccc </td><td> ddd </td></tr>
</table> 
```

现在在 CSS 中做我的第一步，我尝试**将后一种表格样式定义为 CSS**。

**我无法实现它 - 无论我做什么，边框看起来都不一样。请帮忙。**

我的带有 CSS 样式的 HTML：

```
<style type="text/css">
table.my_class
{
    width:40%;
}
table.my_class,table.my_class tr, table.my_class td
{
    border-color: black;
    border-width: 2px;
    border-style:groove;
    padding:15px;
    border-collapse:collapse;
}
</style>

<table class="my_class">
    <tr><td> aaa </td><td> bbb </td></tr>
    <tr><td> ccc </td><td> ddd </td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:24:24.857

HTML

```
<table border="2" cellpadding="5" cellspacing="0" width="40%">
    <tr><td> aaa </td><td> bbb </td></tr>
    <tr><td> ccc </td><td> ddd </td></tr>
</table>
<br/>
<table class="mytable">
    <tr><td> aaa </td><td> bbb </td></tr>
    <tr><td> ccc </td><td> ddd </td></tr>
</table>​ 
```

* * *

[这](http://jsfiddle.net/G8JvV/2/)是没有reset.css CSS的解决方案

```
table.mytable {
 width: 40%;
 border: 2px solid #444;  
 border-spacing: 0;    
}

table.mytable tr {border-bottom: 1px solid #444}

table.mytable td{
  border-right: 1px solid #444;
  border-bottom: 1px solid #444;
  padding: 5px;
}

table.mytable tr td:last-child{ border-right: 0 }
table.mytable tr:last-child td{ border-bottom: 0 } 
```

* * *

[这](http://jsfiddle.net/G8JvV)是 reset.css CSS 的解决方案

```
table.mytable {
 width: 40%;
 border: 2px solid #000;    
}

table.mytable td{
  border: 1px solid #000;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:35:45.357

我不认为你可以完全按照你喜欢的方式翻译属性......因为当时标准并没有应用到那个程度，而且通常情况在不同的浏览器中看起来不同。你最好的办法是试着把它调得更近一些。

```
 <!doctype HTML>
    <html>
      <head>
        <title></title>
        <meta content="">
        <style>
        .tbl
        {
            width:40%;
            border: solid 2px black;
            border-collapse: collapse;
        }

        .tbl td
        {
            padding: 5px;
            border: solid 2px black;
        }

        </style>
      </head>
      <body>

        <table border="2" cellpadding="5" cellspacing="0" width="40%">
        <tr><td> aaa </td><td> bbb </td></tr>
        <tr><td> ccc </td><td> ddd </td></tr>
        </table>
        <br/><br/>
        <table class="tbl">
        <tr><td> aaa </td><td> bbb </td></tr>
        <tr><td> ccc </td><td> ddd </td></tr>
        </table>
      </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:29:14.617

当使用带有`border`属性的无样式表时，边框在不同的浏览器中看起来不同。一些浏览器绘制实心边框，一些为表格绘制外边框，为单元格绘制内嵌边框等。在 CSS 中无法实现这种变化。而且几乎不需要它。在考虑了 CSS 必须提供的各种工具之后，只需选择首选呈现方式，这些工具大大超出了 HTML 属性的表现能力（除了创建一些浏览器依赖项）。

# c++ - boost 可以拥有带有整数键的地图吗？

> ID：11189008
> 
> 赞同：0
> 
> 时间：2012-06-25T12:03:30.183
> 
> 标签：c++, boost, boost-interprocess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:22:04.970

The error message is familiar to those with experience in C++ template programming. Ignore the `sizeof` part; the clue is in `boost::STATIC_ASSERTION_FAILURE<false>`. That type shouldn't be instantiated, you want `boost::STATIC_ASSERTION_FAILURE<true>`. But what exact expression is used as the template argument?

Your template instantiation error should have an instantiation stack, which leads from your code to the failure. Presumably it's checking

# c++ - 在对象向量中查找最大值

> ID：11189009
> 
> 赞同：0
> 
> 时间：2012-06-25T12:03:36.240
> 
> 标签：c++, vector, iterator, max

我在 B 类中有一个对象 A 的向量 v，其中每个对象都有一个成员：int 级别。我想找到向量v中所有对象的级别的最大值。为此我使用了函数：

```
int B::findMaxLevel()
{
vector<int> levels;
vector<A*>::iterator it;

for(it=v.begin();it!=v.end();++it)
{
    if(find(levels.begin(), levels.end(), (*it)->getLevel())!=levels.end())
        levels.push_back((*it)->getLevel());
}

return *max_element(levels.begin(), levels.end());

} 
```

但是我得到了错误：断言失败，向量迭代器不可延迟。我应该另外定义一个 int 迭代器吗？有没有更好的方法来实现我想要的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:16:45.157

我猜你的问题出在最后一行。空向量将导致该行出现此错误。

实际上你根本没有填满`levels`。它应该`==levels.end()`代替`!=levels.end()`

另外，看看[这里](http://www.cplusplus.com/reference/algorithm/max_element/)的示例代码，并尝试使用用户指定的比较函数对象而不是多个副本。

```
 template <class ForwardIterator, class Compare>
    ForwardIterator max_element ( ForwardIterator first, ForwardIterator last, Compare comp ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:10:42.797

这似乎是您在解决方案[http://www.cplusplus.com/forum/general/18226/中遇到的确切问题](http://www.cplusplus.com/forum/general/18226/)

# windows-phone-7 - 如何清除 WP7 中“卡住”的页面转换？

> ID：11189010
> 
> 赞同：1
> 
> 时间：2012-06-25T12:03:36.197
> 
> 标签：windows-phone-7, silverlight-toolkit, transitions

我目前有一个应用程序由于页面转换错误而未能通过认证。

该问题对时间非常敏感，但可以通过以下方式重现：

1.  启动应用程序 - 等待主页显示
2.  导航到子页面
3.  一旦导航开始，然后点击开始按钮
4.  然后点击后退按钮 - 子页面在那里
5.  然后点击返回按钮 - 主页不存在 - 这是一个空白屏幕

如果我然后点击屏幕锁定按钮，然后解锁手机，则页面正常显示。

没有数据原因我可以看到为什么没有显示主页，所以感觉这与页面转换有关。

有设置使用：

```
 var navInTransition = new NavigationInTransition
        {
            Backward = new TurnstileTransition { Mode = TurnstileTransitionMode.BackwardIn },
            Forward = new TurnstileTransition { Mode = TurnstileTransitionMode.ForwardIn }
        };

        var navOutTransition = new NavigationOutTransition
        {
            Backward = new TurnstileTransition { Mode = TurnstileTransitionMode.BackwardOut },
            Forward = new TurnstileTransition { Mode = TurnstileTransitionMode.ForwardOut }
        };

        TransitionService.SetNavigationInTransition(this, navInTransition);
        TransitionService.SetNavigationOutTransition(this, navOutTransition); 
```

如果我删除此转换代码，那么我的应用程序永远不会“卡住”。

有没有人见过这样的事情？如果页面转换卡住了，有没有人知道我如何在代码中工作 - 如果它们是我可以重新启动它们的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:05:12.083

如果这仅在 256MB 设备上，则可能是与内存相关的问题。尝试在这种情况下禁用转换。
根据[http://www.developer.nokia.com/Community/Wiki/Best_practice_tips_for_delivering_apps_to_Windows_Phone_with_256_MB的推荐](http://www.developer.nokia.com/Community/Wiki/Best_practice_tips_for_delivering_apps_to_Windows_Phone_with_256_MB)

或者，您可以尝试仅删除动画的一侧。我过去曾遇到过转换问题（抱歉，不记得确切的细节），这些问题已通过删除`NavigationOutTransition`.

# c++ - 带有 boost shared_ptr 的树

> ID：11189012
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:03:43.563
> 
> 标签：c++, boost, shared-ptr

我创建了这个简单的程序来学习 shared_ptr

```
using namespace std;
 #define Yes 1
 #define No 0

class Node
{
public:
boost::shared_ptr<Node> left;
boost::shared_ptr<Node> rigth;
int nVal;
Node();
Node(int);
~Node();
int getVal(void);
void setVal(int);

 }; 
```

方法

```
Node::Node()
{
cout << "creating node empty" << endl;
nVal = 0;
left.reset();
rigth.reset();

}

Node::~Node() 
{
cout << "entering destructor"  << nVal << endl;
}

Node::Node(int n)
{
cout << "creating node with value" << n << endl;
nVal = n;
left.reset();
rigth.reset();
}

int Node::getVal(void)
{
cout << "returning value" << endl;
return this->nVal;
}

void Node::setVal(int n)
{
cout << "setting value" << endl;
nVal = n;
} 
```

树

```
 class Tree 
   {
  public:
 boost::shared_ptr<Node> root;
  Tree();
  ~Tree();
  void findParent(int n, int &found, boost::shared_ptr<Node> &parent);
  void add(int n);
  void post(boost::weak_ptr<Node> q);
  void del(int n);

  };

Tree::Tree()
{
root.reset();
}

 Tree::~Tree()
{
cout << "deleting tree" << endl;
} 
```

树找到父级

```
void Tree::findParent(int n, int& found, boost::shared_ptr<Node> &parent)
{
   boost::shared_ptr<Node> q;
  found = No;

 cout << "looking parent of" << n << endl;
 if(parent.use_count() == 0)
 {
  cout << "not found" << endl;
  return;
  }

q=parent;

 while (!q.use_count())
{
  if( q->nVal == n)
  {
      cout << "found" << endl;
      found = Yes;
      return;

  }

  if (q->rigth->nVal)
  {
      cout << "looking to the rigth" << endl;
      parent = q;
      q = q->left;
  }
  else
  {
      cout << "looking to the left" << endl;
      parent = q;
      q = q->rigth;
  }
 }
} 
```

树添加

```
void Tree::add(int n)
 {
 int found;

boost::shared_ptr<Node> parent;
findParent(n, found,parent);
if(found == Yes)
{
    cout << "no such node exist" << endl;
}

else
{

    boost::shared_ptr<Node> t(new Node(n));  
    t->rigth.reset();
    t->left.reset();

    if (parent.get()== 0)
    {
        parent = t;
    }
    else
    {
        parent->nVal > n ? parent->left = t : parent->rigth = t;
    }
}
} 
```

主要的：

```
int THREADS_HOW_MANY = 0;

int main()
{
Tree bt;
bt.add(10);
bt.add(4);
bt.add(12);
bt.add(2);
bt.add(8);
bt.add(15);
bt.add(15);

return 0;
} 
```

现在 q 是，为什么不工作，为什么给出这个输出：

```
 empty constructor only the root is reset
  looking parent of10
  not found
  creating node with value10
  entering destructor10
  looking parent of4
  not found
  creating node with value4
  entering destructor4
  looking parent of12
  not found
  creating node with value12
  entering destructor12
 looking parent of2
 not found
  creating node with value2
 entering destructor2 
```

修复它现在是 diff 似乎节点只是被创建和删除而不是添加到树为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:08:06.400

这是你的代码：

```
// 从树::添加
boost::shared_ptr t(新节点(n));
boost::shared_ptr parent(新节点(n));
找到父母（n，找到，父母）；

// 从树::findParent
boost::shared_ptr q(新节点(n));

```

因此，程序根据要求为每个值创建节点 3 次。shared_ptr 确保每个节点都被正确破坏，因此节点析构函数也被调用了 3 次。

# java - 由于错误的用户名或密码，Eclipse 在启动错误后关闭

> ID：11189013
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:03:43.690
> 
> 标签：java, windows, eclipse, jakarta-ee

尝试启动 Eclipse 时出现**错误的用户名或密码错误。**我检查了日志，发现了这个异常。我无法理解。

```
!SESSION 2012-06-25 16:57:53.716 -----------------------------------------------
eclipse.buildId=M20110909-1335
java.version=1.7.0_03
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

!ENTRY oracle.eclipse.tools.glassfish 4 1 2012-06-25 16:58:16.428
!MESSAGE GlassFish: error 
!STACK 0
java.io.IOException: Server returned HTTP response code: 502 for URL: http://localhost:9249/__asadmin/__locations
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.handleReceive(CommandRunner.java:755)
    at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.call(CommandRunner.java:639)
    at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.call(CommandRunner.java:1)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Server returned HTTP response code: 502 for URL: http://localhost:9249/__asadmin/__locations
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.call(CommandRunner.java:611)
    ... 6 more

!ENTRY oracle.eclipse.tools.glassfish 4 150 2012-06-25 16:58:16.428
!MESSAGE Wrong user name or password. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:13:50.143

您有一个适用于 Eclipse 的 Glassfish 插件。它正在尝试连接到服务器的管理端口，但配置错误。消息“错误的用户名或密码”是插件代码从服务器返回 HTTP 错误 502 中推断出来的，但该错误与错误的用户名/密码无关，至少不明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:02:33.627

让我建议你一个非常简单的解决方案。`Glassfish`从你的 Eclipse 中卸载并重新安装。现在安装时，当 glassfish 安装程序要求你输入密码`username:admin`然后输入密码或只是输入“admin”作为密码。我希望你不要为空密码字段。
现在，当您运行服务器时，它会询问您用户名和密码，您应该在那里提供用户名和密码
当我遇到这个问题时它对我有用:)

# html - 如何使用 HTML5、WinJS 在 MetroApps 的垂直列中排列列表视图？

> ID：11189015
> 
> 赞同：1
> 
> 时间：2012-06-25T12:03:48.900
> 
> 标签：html, css, windows-8, microsoft-metro, winjs

我有一个 Metro 应用程序，其中包含 2 个列表视图和一些列表项。这两个列表视图默认情况下一个在另一个之下，每次当我向我的页面添加一个列表视图时，都会在另一个之下显示一个。问题是我不想水平显示这些列表视图。我希望它们并排显示。那么，任何人都可以帮助我如何并排排列具有 Metro 应用程序外观的列表视图。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:43:02.227

CSS

```
.ms-grid
{
    display: -ms-grid;
    -ms-grid-rows: 1fr;
    -ms-grid-columns: 1fr 1fr;
} 
```

HTML

```
<div class="ms-grid">
    <div data-win-control="WinJS.UI.ListView"></div>
    <div data-win-control="WinJS.UI.ListView" style="-ms-grid-column: 2;"></div>
</div> 
```

# installation - 使用 PSExec 以管理员身份远程运行 Msiexec

> ID：11189018
> 
> 赞同：2
> 
> 时间：2012-06-25T12:03:53.703
> 
> 标签：installation, admin, psexec, windows-installer

我们将产品转移到在 Windows Server 2008 上运行。
我们使用管理员特权用户运行安装，但是由于在 Windows Server 2008 中，尽管我们是管理员，但我们需要提升程序。
我们通过右键单击它并选择“以管理员身份运行”来打开命令提示符。然后键入通常的 msiexec comman( `Msiexec /i "c:\package.msi" /l*v "c:\sc.log"`)。
但是，当我尝试使用 PSexec 远程运行它时，它在开始告诉我没有正确的权限时失败。问题是如何模仿我使用 PSexec 进行远程操作的手动步骤？
我尝试在组策略（域和本地）中启用“始终运行提升安装...”。我尝试使用 RunAs，但它手动要求输入密码，这对我没有好处...我尝试运行作为实际的管理员用户，但安装 expext 以获得我们创建的自定义用户...任何形式的任何建议都会有所帮助谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:55:27.167

我使用此命令在具有完全管理员权限的系统帐户下启动 cmd.exe：
`psexec -i -s cmd`

# java - 在 tomcat 中与多个应用程序一起运行时，Struts2 应用程序中的 NullpointerException

> ID：11189020
> 
> 赞同：0
> 
> 时间：2012-06-25T12:04:00.350
> 
> 标签：java, jsp, tomcat, struts2

在我的 Struts2 应用程序中，使用抛出 NullPointerException 的对象访问 jsp 值。

我在jsp中有以下代码

```
<s:textfield name="controlObj.newname"  onclick="removeError();"/> 
```

我`controlObj`在 Struts2 Action 类中有一个 bean

```
private ControlForm controlObj;

public ControlForm getControlObj() {
    return controlObj;
}
public void setControlObj(ControlForm controlObj) {
    this.controlObj= controlObj;
} 
```

但是当我`newname`在动作java文件中访问这个属性时，它会抛出NullpointerException，但是在ControlForm类中我已经初始化了新名称

```
public ControlForm () {
       newname ="Update name here...";
    } 
```

我正在使用的编码语法有什么问题吗？？？因为如果属性是直接在 Action 类中定义的，我可以获得值

```
private String variable_name; 
```

我只得到类型变量的 nullPointerException `Object.property`！！！

**更新：**

1.  在 Firebug 工具中，我可以看到`controlObj.newname`通过表单提交传递的值。
2.  当我在 tomcat 中独立运行此应用程序时，我没有收到任何错误，“controlObj.newname”返回值。if 仅当在 Tomcat 中与此应用程序一起运行的任何其他 struts2 应用程序时才抛出 null

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:09:30.460

您得到的 NullPointerException 不是由于未初始化新名称，而是由于未初始化 controlObj。当 Struts 使用 getControlObj() 来获取 controlObj 时，将返回 null，因为 controlObj 尚未初始化，然后此 null 对象上的 getNewname() 将引发 NullPointerException。如果您在操作中正确初始化 controlObj，这应该可以解决。

# php - Codeigniter 中的报告

> ID：11189021
> 
> 赞同：14
> 
> 时间：2012-06-25T12:04:04.613
> 
> 标签：php, codeigniter, csv, report, codeigniter-2

在 Codeigniter 框架中生成报告的最简单方法是什么？是否有任何图书馆可用于执行此任务？除了绘制图表之外，还有哪些其他资源可以做到这一点。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-25T12:26:19.127

自己找到了一个不错的解决方案。如果您想生成 csv 格式的报告，使用 codeigniter 非常容易。你的模型函数

```
function index(){
return $query = $this->db->get('my_table');
    /*
    Here you should note i am returning 
    the query object instead of 
    $query->result() or $query->result_array()
    */
} 
```

现在在控制器中

```
function get_report(){
    $this->load->model('my_model');
    $this->load->dbutil();
    $this->load->helper('file');
    /* get the object   */
    $report = $this->my_model->index();
    /*  pass it to db utility function  */
    $new_report = $this->dbutil->csv_from_result($report);
    /*  Now use it to write file. write_file helper function will do it */
    write_file('csv_file.csv',$new_report);
    /*  Done    */
} 
```

不需要外部的一切都可以在 codeigntier 中使用。干杯! 如果你想写 xml 文件也很容易。
只需使用`xml_from_result()`dbutil 的方法并使用`write_file('xml_file.xml,$new_report)` 访问这些链接，它们会有所帮助。

[数据库实用程序类](http://codeigniter.com/user_guide/database/utilities.html)

和

[文件助手](http://codeigniter.com/user_guide/helpers/file_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T19:05:54.933

完整解释：

模型：

```
class Csv_m extends MY_Model {
function getCSV() {
    $sql = "SELECT * FROM tablename";
    return $this->db->query($sql);
}
} 
```

控制器：

```
class Generate extends CI_Controller {
var $file_path;
public function __construct() {
    parent::__construct();
    $this->file_path = realpath(APPPATH . '../assets/csv');
}
function index() {
    $this->load->model('csv_m');
    $this->load->dbutil();
    $this->load->helper('file');
    //get the object
    $report = $this->csv_m->getCSV();

    $delimiter = ",";
    $newline = "\r\n";
    $new_report = $this->dbutil->csv_from_result($report, $delimiter, $newline);
    // write file
    write_file($this->file_path . '/csv_file.csv', $new_report);
    //force download from server
    $this->load->helper('download');
    $data = file_get_contents($this->file_path . '/csv_file.csv');
    $name = 'name-'.date('d-m-Y').'.csv';
    force_download($name, $data);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T09:14:22.010

我将它用于我的 .csv 报告。它能够更改 csv 文件中的数据库字段名称。这是代码。

```
 public function export_csv() {
    $file_name = 'File_name_'.date("Y-m-d h-i-s").'.csv';
    $query = $this->db->query('SELECT 
        id as "Id", // id is table id and Id is the csv header field. 
        franchiseopt as "Nearest Location", 
        hear_about_us as "How did you hear about us?", 
        specify as "Specify",  
        email as "Email", 
        noguests as "Number of Guests", 
        eventdate as "Date of Event",
        name as "Your Name",
        phone as "Phone Number",
        locationevent as "Location of Event",
        message as "More Details"
        FROM TABLE_NAME ORDER BY id DESC');

    $this->load->dbutil();
    $data = $this->dbutil->csv_from_result($query);
    $this->load->helper('download');
    force_download($file_name, $data);  
    exit();
} 
```

显然您需要根据您的表替换数据库表字段。

# c - 将双变量与C中的整数值进行比较

> ID：11189026
> 
> 赞同：0
> 
> 时间：2012-06-25T12:04:24.127
> 
> 标签：c

我只是想比较保存在 C 中的双精度变量中的双精度数，然后将其与值 1 进行比较。例如：

```
double x;
x = 1;
if(x == 1)
  call .... 
```

但即使 x 的值为 1，此条件也会被评估为 false，因为 x 保持值 0.99999 而不是 1。

我该如何解决这个问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:06:53.293

这是一个浮点数，因此您需要考虑精度： if(x<1.000001 && x > 0.99999)

# java - Dao 层和 Web 服务集成

> ID：11189034
> 
> 赞同：0
> 
> 时间：2012-06-25T12:05:04.680
> 
> 标签：java, database, web-services

我正在开发一个安静的网络服务，它将数据保存在数据库中并从数据库中检索数据。所以我打算将 web 服务逻辑和数据访问逻辑作为两个不同的项目来实现。如果您可以讨论这种方法的利弊，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:08:59.360

我只推荐一个项目。Web 服务将拥有 DAO 和数据库。不需要两个。

至于专业人士，请阅读 Werner Vogel 关于亚马逊网络服务的 ACM 采访。请特别注意他关于“服务拥有其数据”的说法。

缺点？你的方式增加了复杂性而没有好处。这将鼓励在其他地方重用该 DAO。

# visual-studio-2010 - 在 Visual Studio 负载测试中复制部署项

> ID：11189036
> 
> 赞同：2
> 
> 时间：2012-06-25T12:05:19.743
> 
> 标签：visual-studio-2010, load-testing

我相信我需要将数据（设置文件）复制到部署文件夹。我写“相信”是因为我可能走错了路。我也相信我想决定在负载测试（不是单元测试、项目或解决方案）中应该将哪些内容复制到部署文件夹中。

情况如下：
我在一个地方开发用于负载测试的单元测试。然后我将整个解决方案复制到该国另一端的目标站点。现在必须应用一些本地设置，目前它们位于（源代码）文件中。这显然是一个糟糕的解决方案，因为解决方案的纯复制也会覆盖本地更新的文件。

现在我在开发单元测试时所做的负载测试与目标站点上使用的负载测试不同。我对测试、调试和短周转时间感兴趣，而目标站点对长时间运行的测试和测量结果感兴趣。

唉，我认为负载测试文件（.loadtest）是放置本地设置的正确位置。但是我发现没有地方可以输入要复制到部署文件夹的文件夹或文件。
我已成功通过 [测试视图] 或 [测试列表编辑器] 和属性将数据复制到部署文件夹，但这是针对每个单元测试类的。嗯......我可能会标记所有并更新每个单元测试类的部署项，但这需要任何编写新测试类的人也更新此属性，我更希望在负载测试中而不是在单元测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:16:17.197

您感兴趣的行为由[testrunco​​nfig](http://msdn.microsoft.com/en-us/library/ms182480%28v=vs.90%29.aspx)文件（一个解决方案项）控制。您可能已经有一个名为“LocalTestRun.testrunco​​nfig”的文件。创建一个专门用于负载测试的程序，称为“Remote.testrunco​​nfig”。右键单击它以将其设置为活动的 testrunco​​nfig，然后打开它并在“部署”选项卡中添加您需要复制的文件或文件夹。

# c - 从内核模块直接写入 16550A 串口

> ID：11189042
> 
> 赞同：2
> 
> 时间：2012-06-25T12:05:34.877
> 
> 标签：c, linux-device-driver, uart

我需要直接写入串行端口（我正在尝试在 irq 处理程序中调试挂起，因此想要写入串行端口而不通过我假设使用中断的普通驱动程序）。

无论如何，我已经编写了这段小代码来尝试测试写入串行端口。我已经执行了

```
setserial /dev/ttyS0 uart none 
```

从普通驱动程序释放端口。

编码：

```
#define PORT 0x3f8

static int test_module_init(void) {
        if(request_region(0x3f8, 5, "test_module") == NULL) {
                printk("<1> Failed to request_region\n");
        } else {
                printk("<1> Request region success!\n");
                outb(0x00, PORT + 1);    // Disable all interrupts
                outb(0x80, PORT + 3);    // Enable DLAB (set baud rate divisor)
                outb(0x01, PORT + 0);    // Set divisor to 1 (lo byte) 115200 baud
                outb(0x00, PORT + 1);    //                  (hi byte)
                outb(0x03, PORT + 3);    // 8 bits, no parity, one stop bit

                outb(0x00, PORT + 2);    // Disable fifo
                outb('a', PORT);
                outb('\n', PORT);
                printk("<1> Sent a\n");
        }
        return 0;
} 
```

它成功地请求了该区域，但我没有通过串行端口获得任何数据。有谁知道我做错了什么？我尝试了各种设置（fifo 启用/禁用等），但没有运气。

# iphone - 核心图 - 在轴的相对侧放置标签和刻度

> ID：11189044
> 
> 赞同：0
> 
> 时间：2012-06-25T12:05:39.383
> 
> 标签：iphone, ios, graph, core-plot

`tickDirection`可用于在 Core Plot 图中将刻度和标签定位在轴的任一侧。有没有办法在轴的相对侧定位刻度和标签？

我想在图表的“内部”使用刻度线作为网格线，但在“外部”有数字标签（与 iPhone Stocks 应用程序不同）。

（我已经做了一些实验，`labelAlignment`但没有注意到任何效果。不太确定它的作用......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:55:55.507

您可以设置`tickDirection`使刻度位于内部，然后使用负片`labelOffset`将标签移回另一侧。如果这不起作用（例如，如果标签长度不同），您可以在与第一个轴相同的位置添加第二个轴。将第二个轴上的所有线条样式设置`nil`为不可见，将标签附加到其上，并将它们定位在与第一个轴上的刻度相反的位置。

# .net - Crystal 报表中按条件分页

> ID：11189049
> 
> 赞同：1
> 
> 时间：2012-06-25T12:05:59.777
> 
> 标签：.net, crystal-reports

我有一份打印在“信”页大小一半的纸上的报告。所以在我的详细信息部分在报告中我有发票详细信息，其中包括产品和价格。

如果发票中的产品大于 5，我想用页脚在下一页打印其余的产品详细信息。

我怎样才能做到这一点。请帮助我，我是水晶报告的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:59:29.447

在部分专家上，单击左侧的“详细信息”部分。在右侧，有一个“之后新页面”复选框。在其右侧，有一个用于输入公式的按钮。（上面有“x-2”和一支铅笔）。单击它，然后您可以实施适合您需求的公式。

编辑：实际上，它更容易。看一下截图： ![在此处输入图像描述](../Images/d19fdf1f0dd886661028b637452b291b.png)

# jquery - JqueryMobile - 刷新 ajax 加载页面

> ID：11189052
> 
> 赞同：0
> 
> 时间：2012-06-25T12:06:14.400
> 
> 标签：jquery, ajax, jquery-mobile

我使用 jquerymobile 制作了两个页面。第一个包含指向第二个的链接。

```
<a href="index.php/main/uploadView/" data-transition="none" data-icon="plus">Some page</a> 
```

当我单击链接时，我会加载我的新页面。但是，如果我按 F5 按钮，我将获得没有任何 js 脚本和 css 文件的新页面。第一页的结构是：

```
<html>
    <head>
    ... js/css files ...
    </head>
    <body>
        <div data-role="page" id="..">
        ...
        </div>
    </body>
</html> 
```

第二：

```
<div data-role="page" id="...">
...
</div> 
```

那么如何才能实现 F5 按钮正常工作呢？就像我将所有内容都放在一页内（然后它可以正常工作）

是否可以只更改页面的内容部分，这样我就不会一直复制粘贴页眉和页脚？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:15:36.490

这是旧的但有很多综合浏览量，我没有在其他地方看到答案......

我认为根据所需的行为有两种解决方案。

首先是在第二页和每一页上都有相同的模板——标题、包含等。这确保了“深层链接”和刷新将起作用，而不管浏览器是否支持 url 散列（chrome 需要这个，IE 没有它也可以正常工作。）

当需要有状态时，这会下降。如果用户在第一页登录或搜索某些内容，并且您在第二页向他们显示结果，那么到第二页的深层链接没有任何意义，也不应该真正导航到。F5 同上；你会在刷新时失去状态。

这导致解决方案二，如果用户通过链接或刷新进入，则重定向到第一个或“主页”页面。而不是复制非索引页面的模板，只需更改标题中的位置：

```
<script>
    location.href = "index.html";
</script> 
```

在 jQM 中正常的 ajax 页面导航期间，标题中的脚本不运行；这仅在直接导航到页面时运行。

当您直接导航到像 mysite/index.html#/pageTwo.html 这样的散列 URL 时，就会出现*这种情况。*jQM 加载 index.html，然后加载 pageTwo.html 而不处理标题脚本，但如果那是一个有状态的页面，它将无法正确显示。

您可以完全关闭 hasing：

```
$.mobile.changePage.defaults.changeHash = false; 
```

或者，如果页面需要状态，则在 pageinit 处理程序中检查状态，并将用户弹回您的索引页面。

# spring - Spring 3 / JSF 2 / javax.faces.resource 未正确加载

> ID：11189065
> 
> 赞同：0
> 
> 时间：2012-06-25T12:06:55.683
> 
> 标签：spring, jsf, richfaces

我正在尝试建立一个新项目，包括

*   春天 3.1.1.RELEASE
*   网络流 2.3.1.RELEASE
*   Richfaces 4.2.2.Final
*   jsf com.sun.faces:jsf-api:2.1.7
*   jstl javax.servlet:jstl:1.2

一切正常，除了 javax.faces.resource/* 似乎无法访问。

> 获取[http://feelgood-inc.net:8080/jrisk-web-ui/](http://feelgood-inc.net:8080/jrisk-web-ui/) */javax.faces.resource/richfaces.js 404（未找到）

我怀疑问题来自*“javax.faces”前面的“/ /”。当我删除 /*时，它工作正常。

> 获取[http://feelgood-inc.net:8080/jrisk-web-ui/javax.faces.resource/richfaces.js](http://feelgood-inc.net:8080/jrisk-web-ui/javax.faces.resource/richfaces.js)作品！

有没有人遇到过这个问题？我无法摆脱每个 javax.faces.resource 调用前面的额外“/ *”......

我的面孔-config.xml

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"              
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
       http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
version="2.1">

</faces-config> 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<!-- The Bootstrap listener to start up and shut down Spring's root WebApplicationContext. It is registered to Servlet Container -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
</servlet>

<servlet>
    <servlet-name>Spring MVC Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>

<context-param> 
    <param-name>javax.faces.FACELETS_VIEW_MAPPINGS</param-name>
    <param-value>*.xhtml</param-value>
</context-param> 
```

我的spring mvc配置

```
 <beans:bean name="richfacesResourceHandler"      
 class="org.springframework.faces.webflow.JsfResourceRequestHandler" />

<beans:bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <beans:property name="order" value="0" />
    <beans:property name="mappings">
        <beans:value>
            /javax.faces.resource/*=richfacesResourceHandler
            /rfRes/**=richfacesResourceHandler
        </beans:value>
    </beans:property>
</beans:bean>

<faces:resources /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:17:51.320

将 2.1 更改为 2.0 怎么样？

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"              
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
       http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd" version="2.0">
</faces-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:06:45.263

看看这张 JIRA 票：

[https://jira.springsource.org/browse/SWF-1552](https://jira.springsource.org/browse/SWF-1552)

# iphone - 在 iOS 中创建一个连续的后台线程

> ID：11189066
> 
> 赞同：4
> 
> 时间：2012-06-25T12:07:01.227
> 
> 标签：iphone, objective-c, ios, multithreading, thread-sleep

我需要创建一个仅在应用程序处于活动模式时才工作的后台处理器。我试图对我想要实现的目标做出一个骨架，但无法让它发挥作用。

我希望这个后台处理器在应用程序进入非活动阶段时进入睡眠状态，并在应用程序进入活动模式时恢复。我提供了我在下面所做的工作的骨架。有人可以帮我解决这个问题。

AppDelegate.h

```
#import <Foundation/Foundation.h>

@class BackgroundProcessor;

@interface AppDelegate_iPhone : UIResponder<UIApplicationDelegate>{
    BackgroundProcessor* processor;
}

@property(nonatomic) BackgroundProcessor *processor;

@end 
```

AppDelegate.m

```
#import "AppDelegate_iPhone.h"
#import "BackgroundProcessor.h"

@implementation AppDelegate_iPhone

@synthesize processor;

-(BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    processor = [[BackgroundProcessor alloc]init];
    [processor Start];         
    return YES;
}

-(void) applicationDidEnterBackground:(UIApplication *)application
{
    [processor Sleep];
    NSLog(@"Entered Background"); 
}

-(void) applicationDidBecomeActive:(UIApplication *)application
{
    [processor Resume];
    NSLog(@"Became Active"); 
}
@end 
```

背景处理器.h

```
#import <Foundation/Foundation.h>

@interface BackgroundProcessor : NSObject
{
    NSThread* processor;
}

@property (nonatomic) NSThread *processor;

-(void) Start;
-(void) Sleep;
-(void) workloop;
-(void) Resume;
@end 
```

背景处理器.m

```
#import "BackgroundProcessor.h"

@implementation BackgroundProcessor
@synthesize processor;
-(id) init
{
    self = [super init];
    if(self)
    {
        processor = [[NSThread alloc] initWithTarget:self selector:@selector(workloop) object:nil];
    }
    return self;
}

-(void) Start
{
    if(processor)
        [processor start];
}

-(void) Sleep
{
    //    [processor 
    [NSThread sleepForTimeInterval: 0.1];
}

-(void) workloop
{
    NSLog(@"Background Processor Processing ....");  
    [NSThread sleepForTimeInterval:0.1];
}

- (void) Resume
{
    NSLog(@"Background Resuming ....");  
    [NSThread sleepForTimeInterval: 0.1];
} 
```

我无法让工作循环让它持续运行。感谢是否有人可以帮助我解决为什么背景

**在约书亚史密斯的建议之后尝试了这个**

```
#import "BackgroundProcessor.h"

@implementation BackgroundProcessor

-(id) init
{
    self = [super init];
    if(self)
    {
        queue = [[NSOperationQueue alloc] init];
        NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(workloop) object:nil];
        [queue addOperation:operation];
    }
    return self;
}

-(void) workloop
{

    NSLog(@"Sleeping for 10 seconds");  
    sleep(10);
    NSLog(@"Background Processor Processing ....");  
    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(workloop) object:nil];
    [queue addOperation:operation];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:13:14.203

除非有某些特定原因，这必须是一个离散线程，否则我建议您使用 GCD 或 NSOperation Queue 并生产和消费工人。这种长时间运行的线程将成为 iOS 应用程序中的一个真正问题。

GCD教程：

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:03:58.843

我已经实现了与您描述的类似的场景。它的实现方式是在后台线程上运行一个连续的计时器。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        notification = [[NotificationCentre alloc] init];

        notificationTimer = [NSTimer scheduledTimerWithTimeInterval:30.0 target:self selector:@selector(notificationTimerFired:) userInfo:nil repeats:YES];

        [[NSRunLoop currentRunLoop] run]; 

    });
    [self.window makeKeyAndVisible];

    return YES;
}

-(void)notificationTimerFired:(NSTimer *)theTimer {
    BOOL hasNotifications;

    if (notificationTimerActive == YES) {

        do {
            hasNotifications = [notification GetNotifications];
        } while (hasNotifications == YES);

    }

    return;

} 
```

所以基本上当应用程序启动时，我会启动一个重复计时器异步，然后在我的 noticiationCenter 类上调用我的 GetNotifications 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T04:04:40.137

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [[NSRunLoop currentRunLoop] run];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:17:46.257

默认情况下，当您进入后台时，所有进程都将停止。只有少数几个不同的进程可以在后台完成。即使您创建了一个新线程，当您进入后台时它仍然会停止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T12:23:33.867

从你的评论

> 我基本上想产生一个线程来定期检查数据库以将数据从我的应用程序发送到服务器。你会推荐一个理想的选择来做这样的事情。有没有我可以参考的文章或代码，有一个解决方法而不是产生我自己的线程？只有当应用程序处于前台或处于活动模式时，才需要执行此操作。

我会说你在这里使用了错误的方法。当应用程序在前台更新服务器时，只需定期启动异步操作即可。对于这个用例来说，使用长寿命的后台线程是完全错误的。

# r - 在 data.frame 上执行 adf 测试

> ID：11189067
> 
> 赞同：1
> 
> 时间：2012-06-25T12:07:02.740
> 
> 标签：r

我可以对向量执行 adf 测试：

```
library(tseries)
ht <- adf.test(vector, alternative="stationary", k=0) 
```

但我无法在 data.frame 中的值列上执行它：

```
ht <- adf.test(dataframe, alternative="stationary", k=0) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:06:02.030

要获取一张表中所有变量的 pvalues，您可以使用 plyr 包中的 ldply。

```
pvalues=ldply(ht, function(x){ x$p.value }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T18:45:17.713

```
ht <- lapply(dataframe, adf.test, alternative="stationary", k=0) 
```

[正如@Andrie](https://stackoverflow.com/users/602276/andrie)指出的那样，应该做到这一点。它将为您返回一个列表，其中包含数据框中每一列的元素

# android - 如何在 Wordpress 数据库和 Android 应用程序之间进行通信

> ID：11189069
> 
> 赞同：1
> 
> 时间：2012-06-25T12:07:15.460
> 
> 标签：android

请告诉我如何通过 android 应用程序访问 WordPress 的数据库（创建新表并从表中获取数据）如果任何机构有，请分享任何代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:14:21.030

Wordpress 使用 mysql 数据库。所以你可以用几种不同的方式来做。我建议您在 php 中编写一个桥接器，从数据库中获取数据并将其发送到您的应用程序 JSON 编码。

例如，您的 php 文件在检索数据时可能如下所示：

```
<?php
mysql_connect("localhost","db_user","db_password");
mysql_select_db("database_name");

if(isset($_REQUEST['getrecords']))
   getRecords($_REQUEST['id']);

function getRecords($id){
    $q=mysql_query("select * from test_ranking where id=$id");
    while($e=mysql_fetch_assoc($q))
        $output[]=$e;
    print(json_encode($output));
    mysql_close();
}
?> 
```

当然这是非常不安全的，你应该编写一些额外的代码来使这个脚本满足你的需要。完成此操作后，您可以简单地从您的 android 应用程序发出一个 httprequest 并获取 json 数据。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:17:33.430

我会推荐我从未在 php 中做过的肥皂，但这里有一些关于 php 肥皂 [http://php.net/manual/en/book.soap.php](http://php.net/manual/en/book.soap.php)

对于 android 部分 [http://ksoap2.sourceforge.net/](http://ksoap2.sourceforge.net/) 库和
[http://sourceforge.net/projects/ksoap2genstub/](http://sourceforge.net/projects/ksoap2genstub/) 代理生成器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:09:31.887

wordpress 在 xml 中提供了一个 rss。你必须解析它从 wordpress 网站获取数据。您必须实施/指定 rss 提要。

# javascript - JavaScript 淡入淡出时间

> ID：11189072
> 
> 赞同：0
> 
> 时间：2012-06-25T12:07:16.810
> 
> 标签：javascript, jquery, html, list, fade

我有一个 HTML 提示列表，该列表中的每个元素都在页面加载时隐藏，然后我尝试在指定时间后淡入 3 个随机提示，但是提示在不同时间淡入，尽管所有的时间设置相同，任何想法为什么会这样？

这是我的来源：

```
<script type="text/javascript">
    this.randomtip = function () {
        var pause = 4000;
        var length = $("#tips li").length;
        var temp = -1;

        this.getRan = function () {
            // get the random number
            var ran = Math.floor((Math.random() * length) + 1);

            return ran;
        };
        this.show = function () {
            $("#tips li").fadeOut(800);
            $("#tips li:nth-child(" + getRan() + ")").delay(1000).fadeIn(800);
            $("#tips li:nth-child(" + getRan() + ")").delay(1000).fadeIn(800);
            $("#tips li:nth-child(" + getRan() + ")").delay(1000).fadeIn(800);
        };

        show(); setInterval(show, pause);

    };

    $(document).ready(function () {
        $("#tips li").hide();
        randomtip();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:51:08.943

这是您的脚本的固定版本：

[http://jsfiddle.net/thinkingsites/WPsN7/17/](http://jsfiddle.net/thinkingsites/WPsN7/17/)

您的问题如下：

1.  淡入淡出是异步工作的，所以你的淡入淡出基本上都是同时发生的。由于时机不完美，它们很快就会不同步。
2.  您的随机方法不能保证它会加载独特的项目。这可能会多次向同一个元素发出相同的命令。

为了解决这个问题，我使用了 jQuery deferreds，这是 jQuery 动画的内置功能。这就是*.promis().done()*是什么。它比使用*.fade(interval,callback)*更实用。它保证回调不会触发，直到之前的命令完成。这消除了对*setInterval*的需要，如果控制不好，可能会导致问题。由于 jQuery 内置了它，所以它不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:20:41.570

使用“Thinking Sites”发布的代码后，一切似乎都很好，但旧版本的 Internet Explorer 不支持“indexof”，所以下面是我修改后的代码版本，它也适用于旧版本的 Internet Explorer作为 Chrome 和 Firefox：

```
<script type="text/javascript">
    var randomtip = function() {
    var pause = 4000;
    var length = $("#tips li").length;
    var temp = -1;

    this.getRan = function() {
        // get the random number
        var result = [];
        while (result.length < 3) {
            var r = Math.round((Math.random() * (length - 1)));
            if (!contains(result, r)) {
                result.push(r);
            }
        }
        return result;
    };

    var fadeout = function() {
        $("#tips li").delay(1500).fadeOut(800).promise().done(fadein);
    };

    var fadein = function() {
        var ran = getRan();
        $("li:eq(" + ran[0] + "),li:eq(" + ran[1] + "),li:eq(" + ran[2] + ")", "#tips").delay(1000).fadeIn(800).promise().done(fadeout);
        };

        fadein();
    };

    $(document).ready(function() {
        $("#tips li").hide();
        randomtip();
    });

    function contains(a, obj) {
        var i = a.length;
        while (i--) {
            if (a[i] === obj) {
                return true;
            }
        }
        return false;
    }
</script> 
```

# javascript - 使用 jqvideobox 插件关闭 YouTube 相关视频

> ID：11189076
> 
> 赞同：0
> 
> 时间：2012-06-25T12:07:32.157
> 
> 标签：javascript, video, youtube, jquery-plugins

我正在使用 jqvideobox 插件在我的网站上显示一些 YouTube 视频。我的代码：

```
$(".vidbox").jqvideobox({
    width: 625,     
    height: 400
});

<a href="http://www.youtube.com/watch?v=TGg9cKDljnk" target="_blank" class="vidbox"> 
```

我想在我的视频结尾禁用相关的 YouTube 视频。我尝试在 URL 的末尾添加 rel=0，所以让它像

```
<a href="http://www.youtube.com/watch?v=TGg9cKDljnk&rel=0" target="_blank" class="vidbox"> 
```

但随后视频根本不起作用。有谁知道如何进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:16:42.227

好吧，问题是您使用`&rel=0`而不是`?rel=0`在您的链接`href="http://www.youtube.com/watch?v=TGg9cKDljnk&rel=0"`中。那应该解决它。

# javascript - jQuery - 在发布请求中传递数组

> ID：11189079
> 
> 赞同：0
> 
> 时间：2012-06-25T12:07:38.823
> 
> 标签：javascript, jquery, python, django

我想在 jquery $.post() 请求中传递数组。

HTML：

```
<input type="checkbox" id="add-check-1e30">
<input type="checkbox" id="add-check-1230"> 
```

从上面的 HTML 示例中，数组应该是这样的 = ['1e30', '1230']

用于发送 $.post() 的 jQuery：

```
$("#addbox-add").click(function(){

var ukeys = new Array();
$("input[type=checkbox]:checked").each( function() {
a = $(this).attr("id");
b = a.split('-').pop();
ukeys.push(b);
});

$(".addbox").remove();

$.post("/information/portfolio/add/", {'ukeys': ukeys }, function(data) {
for(i=0; i<data.length; i++)
{
    ukey = data[i].ukey;
    image = data[i].image;
    service = data[i].service;
    if(data[i].smallimage != "")
    {
        image = data[i].smallimage;
    }
    if (image == null)
    {
        $(".portfolio-preview").append('<li class="portfolio-item" id="portfolio-item-'+service+'-'+ukey+'"></li>');
    }
    else
    {
        $(".portfolio-preview").append('<li class="portfolio-item" id="portfolio-item-'+service+'-'+ukey+'"><img class="portfolio-image" src="'+image+'" width="150px" height="150px"></li>');
    }
}
});

}); 
```

jQuery中的数组变量没有问题，不知道怎么在post请求中发送。

我应该在服务器中获得这两个值**1e30 和 1230**。但是我在服务器中得到的值是空的。

这是在 Python/Django 中获取值的服务器代码：

```
def portfolio_add(request):
    ukeys = request.POST.get('ukeys', '')   
    .....etc.....etc...... 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:10:38.943

你必须使用：

```
request.POST.getlist('ukeys', '') 
```

# html - 结构化 CSS 背景：名称？

> ID：11189082
> 
> 赞同：0
> 
> 时间：2012-06-25T12:08:05.590
> 
> 标签：html, css, background

我经常发现一些这样的背景：http: [//knplabs.de/bundles/knpcorporate/images/bg-intro.png](http://knplabs.de/bundles/knpcorporate/images/bg-intro.png)

整个页面是： http: [//knplabs.de](http://knplabs.de)

您如何将这种具有一种颜色的背景类型称为良好的结构（如地毯）？

它们也有其他颜色（白色）吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:22:38.967

使用无缝瓷砖是一种标准且非常基本的网页设计概念。您将拍摄一张在偏移时不会产生粗糙边缘的图像。这是一组不错的瓷砖：

[http://subtlepatterns.com/](http://subtlepatterns.com/)

使用它们也相当简单。

```
.someElement {background: url(path/to/image/bg.png); 
```

我没有再传递任何声明，但是如果您想使用不重复且存在于背​​景颜色前面的偏移背景图像，您可以执行以下操作：

```
.someElement {background: red url(bg.png) no-repeat 20px 40px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:08:58.210

大多数情况下它被称为模式。

[https://www.google.nl/search?aq=0&oq=pattern+bac&sugexp=chrome,mod=14&sourceid=chrome&ie=UTF-8&q=pattern+background](https://www.google.nl/search?aq=0&oq=pattern+bac&sugexp=chrome,mod=14&sourceid=chrome&ie=UTF-8&q=pattern+background)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:16:11.353

你是说图案吗？

有许多具有不同图案的网站，无论是颜色还是质地。例如：[图案](http://webdesignledger.com/freebies/200-beautiful-seamless-patterns-perfect-for-web-design) 或[单色图案](http://webtreats.mysitemyway.com/category/photoshop-resources/patterns/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T12:13:50.520

它完全取决于你的要求，比如你需要一个背景。

***就像你需要标题的背景图片一样，所以我认为它应该是 header-bg 的名称***

**如果您需要整个网站的背景图片，则名称应为 body-bg**

***如果你需要页脚的背景图片，那么名称应该是 footer-bg***

**Left-Nav bg、Right-Nav bg、container-bg 等**

所以你可以给这样的名字，但总的来说它完全取决于我们想要如何使用这些图像以及我们需要这些图像的目的。

# android - 如何将文件权限设置为 MODE_WORLD_READABLE

> ID：11189083
> 
> 赞同：7
> 
> 时间：2012-06-25T12:08:05.857
> 
> 标签：android, media-player

我正在将音频文件下载到我的 Android 应用程序的缓存中，然后必须使用 MediaPlayer 访问该文件。该文件是使用 -rw-------- 权限创建的（如 Eclipse 的文件资源管理器中所示）。

有了这些权限，MediaPlayer 就无法访问音频文件。失败在 logcat 中显示为：

```
java.io.IOException: Prepare failed.: status=0x1 
```

我的应用面向 API 级别 8。

如何设置下载的音频文件的权限以使其可以被 MediaPlayer 读取？

顺便说一句，我正在创建文件：

```
FileOutputStream out = new FileOutputStream(fRecording); 
```

当我尝试将文件创建为 MODE_WORLD_READABLE 时，没有创建文件：

```
FileOutputStream out = activity.openFileOutput(fRecording.getAbsolutePath(), Activity.MODE_WORLD_READABLE); 
```

使用 openFileOutput 的 logcat 错误是：

```
java.lang.IllegalArgumentException: File /data/data/com.calltrunk.android/cache/727adda7-0ef1-490f-9853-fe13ad1e9416 contains a path separator 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-10T11:47:42.673

从 API 9 开始，`File`对象具有[`setReadable`](http://developer.android.com/reference/java/io/File.html#setReadable(boolean,%20boolean))方法（也`setWritable`和`setExecutable`）。它的两个 args 版本也可用于设置所有用户的读取权限（即`-rw-r--r--`在您的情况下）：

```
File file = new File("path_to_your_file");
file.setReadable(true, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T12:13:23.823

*   调用`openFileOutput()`文件名和操作模式。这将返回 a `FileOutputStream`with permission `MODE_WORLD_READABLE`。

*   用 . 写入文件`write()`。

*   用 关闭流`close()`。

**例如：**（txt文件的代码，在您的情况下，它是一个音频文件，根据它进行更改）

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_WORLD_READABLE);
fos.write(string.getBytes());
fos.close(); 
```

# python - Cygwin 使用 python 给出错误

> ID：11189085
> 
> 赞同：-3
> 
> 时间：2012-06-25T12:08:10.703
> 
> 标签：python, cygwin

我想执行下面的命令，但 cygwin 给出了错误。请帮我。

```
Python makeReadingsFile.py eichstaett.net.xml   test.readings.xml

Traceback (most recent call last):
  File "makeReadingsFile.py", line 75, in <module>
    import argparse 
ImportError: No module named argparse 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:36:26.387

如前所述，错误消息

```
$ Python makeReadingsFile.py eichstaett.net.xml   test.readings.xml
Python: can't open file 'makeReadingsFile.py': [Errno 2] No such file or directory 
```

发生是因为没有这样的文件，你告诉它去寻找一个。您的第二个命令在我看来就像第一个命令一样：

```
Python makeReadingsFile.py eichstaett.net.xml   test.readings.xml
Traceback (most recent call last):
  File "makeReadingsFile.py", line 75, in <module>
    import argparse
ImportError: No module named argparse 
```

你说这是使用完整的地址路径，但由于给定的路径是相同的，我认为你的意思一定是“当你改变到正确的目录时”。无论如何，这里的错误消息可能是由于您使用的是 Python 2.6 或更早版本： argparse 模块仅在[Python 2.7](http://docs.python.org/library/argparse.html#module-argparse)中引入。

# javascript - 无法使用 Javascript 设置输入值

> ID：11189086
> 
> 赞同：0
> 
> 时间：2012-06-25T12:08:20.007
> 
> 标签：javascript, jquery, html, input

我正在尝试使用 Javascript 更改输入字段的值。
我尝试了一切，但似乎没有任何效果。我尝试将 5 放在引号之间并使用 jquery。我还仔细检查了数组和所有内容。

这是输入代码：

```
<input type="number" id="id_[SOME_ID_HERE]" value="0"> 
```

以及用于更新值的循环。

```
for (var i = 0; i < shoppingCart.length; i++) {
    var val = shoppingCart[i];
    document.getElementById("id_" + val.substring(3)).value = 5;
} 
```

jsfiddle：http: [//jsfiddle.net/zkTud/](http://jsfiddle.net/zkTud/)

编辑：似乎它也不适用于 type="text" ......

EDIT2：谢谢所有回答的人。我的问题实际上是别的。
输入是从另一个页面加载的，这需要时间，并且在文件加载完成之前执行了我遇到问题的 for 循环（见上文）。
我所做的只是将 for 循环按原样移动到回调函数，它现在可以工作了。

无论如何谢谢！
**我真的很感谢我在这个网站上得到的帮助！:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:11:35.687

问题是您的调用[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)返回了太多的字符串，因此`getElementById`. 将其更改为：

```
for(var i = 0; i < shoppingCart.length; i++) {
    var val = shoppingCart[i];
    document.getElementById("id_" + val.substring(5)).value = 5;
} 
```

这是一个[更新的小提琴](http://jsfiddle.net/zkTud/1/)。

该`substring`方法（当使用一个参数调用时）返回从指定索引到字符串末尾的字符。由于您指定了索引 3，因此实际上您只需要该数字就会得到“d_1”、“d_2”等。

或者，您当然可以更改附加子字符串的字符串，但我认为这会更令人困惑（不是立即明显将返回哪个元素）：

```
document.getElementById("i" + val.substring(3)).value = 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:12:51.500

**演示** [http://jsfiddle.net/bY4EV/6/](http://jsfiddle.net/bY4EV/6/)

`sustring(3)`给出`d_1` ：[如何在 jquery 中进行子字符串化](https://stackoverflow.com/questions/4126762/how-to-substring-in-jquery)

希望这可以帮助

**代码**

```
var shoppingCart = new Array();
shoppingCart[0] = "prod_1";
shoppingCart[1] = "prod_3";
shoppingCart[2] = "prod_2";

for(var i = 0; i < shoppingCart.length; i++) {
    var val = shoppingCart[i];

    $("#id_" + val.substring(5)).val("5");
}

​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:13:25.787

检查这个，[JSFiddle](http://jsfiddle.net/zkTud/7/)，更新并纠正了你的问题。

代码：

```
var shoppingCart = new Array();
shoppingCart[0] = "prod_1";
shoppingCart[1] = "prod_3";
shoppingCart[2] = "prod_2";

for(var i = 0; i < shoppingCart.length; i++) {
    var val = shoppingCart[i];

    $("#id" + val.substring(4)).val( "5");
} 
```

# sencha-touch - 如何在 navigation.View (Sencha Touch 2) 的单个页面上的标题栏中添加自定义按钮？

> ID：11189088
> 
> 赞同：2
> 
> 时间：2012-06-25T12:08:32.910
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用navigation.View 来保存一个列表，因此我可以轻松实现当有人单击某个项目时出现的详细视图。我还有一个停靠在此列表视图顶部的搜索栏，但我想做的是默认隐藏它，并在标题栏中有一个按钮，允许用户显示/隐藏搜索栏。

我尝试使用以下代码来实现这一点：

```
navigationBar: {
    items: [{
        xtype: 'button',
        align: 'right',
        text: 'Search'
    }]
} 
```

但这会导致按钮显示在我推入导航视图的每个页面上，而我希望按钮仅出现在根列表页面上。这甚至可能吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:28:56.893

在这种情况下，您最好不要使用`Ext.NavigationView`. 只需使用工具栏的普通视图。

但是如果你仍然想使用导航视图，这里可能有一个提示：

1.  将该按钮添加到导航栏并`hidden: true`默认设置配置。

2.  侦听可以观察活动视图何时更改的事件。这可能因您的应用程序结构而异。

3.  当您的“特殊”视图被激活时，将该按钮显示到导航栏，当它被停用时，隐藏该按钮。

# java - 自定义 TableCellEditor 仅适用于 1 列 Dispite 应用于所有

> ID：11189090
> 
> 赞同：2
> 
> 时间：2012-06-25T12:08:44.750
> 
> 标签：java, swing, jtable, tablecelleditor

我正在处理一个相当复杂的 JTable。行数和列数是根据列表构建的。然后取决于单元格编辑器需要更改哪一行的哪一列。在寻找解决方案时，我发现了这个： [http ://www.java2s.com/Code/Java/Swing-Components/EachRowwithdifferentEditorExample.htm](http://www.java2s.com/Code/Java/Swing-Components/EachRowwithdifferentEditorExample.htm)

我按原样获取该代码并运行它只是为了确保它在当前的 Java 版本中运行并且确实如此。所以我将它应用到我已经构建的 JTable 中，但似乎正在发生的事情是，当我将它应用到多个列时，它最终只适用于第一列。

我整理了一段完全可执行的代码，我已经评论并设置了它来模拟我的数据库数据。该代码的注释相当不错，因此应该很容易理解。这个样本至少对我来说仍然会产生问题。

如果你们中的任何人都可以看到有什么问题，我将非常感谢您的帮助。

```
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class EachRowEditorExample extends JFrame {

    public EachRowEditorExample() {
        super("EachRow Editor Example");
        List<Membership> _Memberships = new ArrayList<Membership>();
        DefaultTableModel DataModel;

        //Lets Start by simluating the data.
        for (int z = -2; z < 10; z++)
        {
            Membership m = new Membership();
            m.setId(z);
            if (z == -2) 
            {
                m.setMembership("Employee");
                m.setEft(false);
            }
            else if (z == -1) 
            {
                m.setMembership("NONE");
                m.setEft(false);
            }
            else
            {
                m.setMembership("Membership " + z);
                if (z < 3 )
                    m.setEft(true);
                else
                    m.setEft(false);
            }
            _Memberships.add(m);
        }

        //*******************************************************
        // Starts Copy and paste from Program
        //*******************************************************
        //lets build our Data Model
        int size = _Memberships.size(); 
        Object[][] rows = new Object[size][];
        String[] cols = new String[size];
        int x = 0;
        for(Iterator<Membership> i = _Memberships.iterator(); i.hasNext(); )
        {
            Membership side = i.next();
            cols[x] = side.getMembership();
            Object[] row = new Object[size];
            int b = 0;
            for(Iterator<Membership> j = _Memberships.iterator(); j.hasNext(); )
            {
                Membership top = j.next();
                if (side.getId() == top.getId() && (side.isEft() && top.isEft()))
                {
                    row[b] = null;
                }
                else
                    row[b] = NUHPADX(side.getId(), top.getId());
                b++;
            }
            rows[x] = row;
            x++;
        }
        DataModel = new DefaultTableModel(rows,cols);

        //Now Lets create our JTable and configure it.
        JTable table = new JTable(DataModel) {
            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                Object t = getValueAt(rowIndex, rowIndex);
                if (t == null)
                    return false;
                else
                    return true;
            }

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column)
            {
                Component c = super.prepareRenderer(renderer, row, column);

                Object t = getValueAt(row, column);
                if (t == null)
                {
                    c.setBackground(Color.black);
                }
                else
                {
                    Color PRIMARY_ROW_COLOR = Color.white; 
                    Color ALTERNATE_ROW_COLOR = new Color(0xA9F1ED);

                    //even index, selected or not selected
                    if (row % 2 == 0) 
                    {
                        if (column % 2 == 0) 
                            c.setBackground(PRIMARY_ROW_COLOR.darker());
                        else
                            c.setBackground(PRIMARY_ROW_COLOR);
                    }
                    else 
                    {
                        if (column % 2 == 0) 
                            c.setBackground(ALTERNATE_ROW_COLOR.darker());
                        else
                            c.setBackground(ALTERNATE_ROW_COLOR);
                    }
                }
                return c;
            }

        };
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.getTableHeader().setReorderingAllowed(false);
        JList rowHeader = new JList(cols);
        rowHeader.setCellRenderer(new RowHeaderRenderer(table));

        //Lets Place the new table in a Scroll Pane Since there could be alot of data.
        JScrollPane scrollPane = new JScrollPane(table);
        scrollPane.setRowHeaderView(rowHeader);
        getContentPane().add(scrollPane, BorderLayout.CENTER);

        //Now lets Build the Cell Editors
        int c = 0;
        int r = 0;
        for(Iterator<Membership> a = _Memberships.iterator(); a.hasNext();)
        {
            Membership top = a.next();
            EachRowEditor rowEditor = new EachRowEditor(table);
            for(Iterator<Membership> b = _Memberships.iterator(); b.hasNext();)
            {
                Membership side = b.next();

                if (side.getId() == top.getId() && (side.isEft() && top.isEft()))
                {
                    //rowEditor.setEditorAt(r, null);
                }
                else if (side.getId() != top.getId() && (side.isEft() && top.isEft()))
                {
                    NuhpadxCell t = new NuhpadxCell(side, top, new DefaultComboBoxModel(new String[] {"N", "U", "D", "A"}));
                    t.setSelectedItem(NUHPADX(side.getId(), top.getId()));
                    rowEditor.setEditorAt(r, new DefaultCellEditor(t));
                }
                else 
                {
                    NuhpadxCell t = new NuhpadxCell(side, top, new DefaultComboBoxModel(new String[] {"N", "A", "H", "X", "P"}));
                    t.setSelectedItem(NUHPADX(side.getId(), top.getId()));
                    rowEditor.setEditorAt(r, new DefaultCellEditor(t));
                }
                r++;
            }
            table.getColumn(top.getMembership()).setCellEditor(rowEditor);
            table.revalidate();
            c++;
        }

        table.removeColumn(table.getColumn("NONE"));

        //*******************************************************
        // Ends Copy and paste from Program
        //*******************************************************
        setSize(1060, 600);
        setVisible(true);
    }

    //This function jsut simluates a entire class
    public String NUHPADX(int side, int top)
    {
        Random generator = new Random();
        int roll = generator.nextInt(7);
        switch (roll)
        {
            case 0:
                return "N";
            case 1:
                return "U";
            case 2:
                return "H";
            case 3:
                return "P";
            case 4:
                return "A";
            case 5:
                return "P";
            case 6:
                return "A";
            default:
                return "N";
        }

    }

    public static void main(String[] args) {
        EachRowEditorExample frame = new EachRowEditorExample();
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
    }
}

//Example from http://www.crionics.com/products/opensource/faq/swing_ex/SwingExamples.html
/* (swing1.1.1) */
class EachRowEditor implements TableCellEditor {
    protected Hashtable editors;

    protected TableCellEditor editor, defaultEditor;

    JTable table;

    /**
     * Constructs a EachRowEditor. create default editor
     * 
     * @see TableCellEditor
     * @see DefaultCellEditor
     */
    public EachRowEditor(JTable table) {
        this.table = table;
        editors = new Hashtable();
        defaultEditor = new DefaultCellEditor(new JTextField());
    }

    /**
     * @param row
     *            table row
     * @param editor
     *            table cell editor
     */
    public void setEditorAt(int row, TableCellEditor editor) {
        editors.put(new Integer(row), editor);
    }

    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        editor = (TableCellEditor) editors.get(new Integer(row));
        if (editor == null) {
            editor = defaultEditor;
        }
        return editor.getTableCellEditorComponent(table, value, isSelected, row, column);
    }

    public Object getCellEditorValue() {
        return editor.getCellEditorValue();
    }

    public boolean stopCellEditing() {
        return editor.stopCellEditing();
    }

    public void cancelCellEditing() {
        editor.cancelCellEditing();
    }

    public boolean isCellEditable(EventObject anEvent) {
        selectEditor((MouseEvent) anEvent);
        return editor.isCellEditable(anEvent);
    }

    public void addCellEditorListener(CellEditorListener l) {
        editor.addCellEditorListener(l);
    }

    public void removeCellEditorListener(CellEditorListener l) {
        editor.removeCellEditorListener(l);
    }

    public boolean shouldSelectCell(EventObject anEvent) {
        selectEditor((MouseEvent) anEvent);
        return editor.shouldSelectCell(anEvent);
    }

    protected void selectEditor(MouseEvent e) {
        int row;
        if (e == null) {
            row = table.getSelectionModel().getAnchorSelectionIndex();
        } else {
            row = table.rowAtPoint(e.getPoint());
        }
        editor = (TableCellEditor)editors.get(new Integer(row));
        if (editor == null) {
            editor = defaultEditor;
        }
    }
}

//*******************************************************
// Starts Copy and paste from Program
//*******************************************************
class RowHeaderRenderer extends JLabel implements ListCellRenderer {
    private static final long serialVersionUID = 4619707414623897299L;

    public RowHeaderRenderer(JTable table) {
        JTableHeader header = table.getTableHeader();
        setOpaque(true);
        setBorder(UIManager.getBorder("TableHeader.cellBorder"));
        setHorizontalAlignment(CENTER);
        setForeground(header.getForeground());
        setBackground(header.getBackground());
        setFont(header.getFont());
    }

    @Override
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
        setText((value == null) ? "" : value.toString());
        return this;
    }
}

class NuhpadxCell extends JComboBox {
    private static final long serialVersionUID = -4464709511574911230L;

    private Membership _side;
    private Membership _top;

    public NuhpadxCell(Membership s, Membership t, DefaultComboBoxModel aModel)
    {
        _side = s;
        _top = t;
        addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                DoUpdate();
            }

        });

        setModel(aModel);
    }

    private void DoUpdate() {
        // I would then update my database useing the ID of the side and top memberships as keys.
    }
}

//*******************************************************
// Ends Copy and paste from Program
//*******************************************************

//A bare Skeleton of the membership class needed to run this code.
class Membership {

    protected int id;
    protected String membership;
    protected boolean eft;

    public int getId() {
        return id;
    }
    public void setId(int value) {
        this.id = value;
    }

    public String getMembership() {
        return membership;
    }
    public void setMembership(String value) {
        this.membership = value;
    }

    public boolean isEft() {
        return eft;
    }
    public void setEft(boolean value) {
        this.eft = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:49:07.753

1.问题来自代码行，

```
table.removeColumn(table.getColumn("NONE")); 
```

2.然后`JTables view`返回不同`column index`的存储到，你也`TableModel`必须调用`table.convertColumnIndexToModel()``prepareRenderer``Editor`

3.remove `isCellXxx`from `JTable`to `Model`ei

```
DataModel = new DefaultTableModel(rows, cols) {

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        Object t = getValueAt(rowIndex, rowIndex);
        if (t == null) {
            return false;
        } else {
            return true;
        }
    }
}; 
```

4.call`table.setPreferredScrollableViewportSize(table.getPreferredSize());`然后您可以更改`setSize(1060, 600);`为`pack();`

5.也加在`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`那里

6.不要扩展`JFrame`，创建一个局部变量

7.那么你的主要课程应该包括`InitialThread`

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            EachRowEditorExample frame = new EachRowEditorExample();
        }
    });
} 
```

编辑

> 1，我只是想隐藏该列而不是从模型中完全删除它，这是该代码应该做的（根据 Java Docs）。

[`table.removeColumn(table.getColumn("NONE"));``Column`仅从and`JTables View`中的 more 中去除混凝土`API``JTables tutorial`](https://stackoverflow.com/a/10089138/714968)，这`Column`仍然存在于 the 中`XxxTableModel`，最好在您这边测试一下

> 至于2，不知道为什么真的适用。

这已经得到解答，更多内容在[JTable 教程中进行了描述（也请阅读下一节）](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#celltooltip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:53:52.793

对于看起来很简单的事情，您的解决方案似乎非常复杂。您实际上只有两个不同的 CellEditor，它们都基于 JComboBox。

因此，更简单的解决方案是扩展`DefaultCellEditor`并`JComboBox`覆盖 getTableCellEditorComponent()，具体取决于您所在的行，`JComboBox`使用适当的模型更新 ，然后将调用返回到`super`.

最终，您在表格的所有列上设置了此单元格编辑器。

*还要考虑遵循 Java 编码约定（变量和方法以小写字母开头，类以大写字母开头，等等...）*

编辑：

```
 class MyTableCellEditor extends DefaultCellEditor {
        private DefaultCellEditor defaultEditor;
        private DefaultComboBoxModel nudaModel = new DefaultComboBoxModel(new String[] { "N", "U", "D", "A" });
        private DefaultComboBoxModel nahxpModel = new DefaultComboBoxModel(new String[] { "N", "A", "H", "X", "P" });

        public MyTableCellEditor() {
            super(new JComboBox());
            defaultEditor = new DefaultCellEditor(new JTextField());
        }

        private JComboBox getComboBox() {
            return (JComboBox) editorComponent;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            Membership top = _Memberships.get(column);
            Membership side = _Memberships.get(row);

            if (side.getId() == top.getId() && side.isEft() && top.isEft()) {
                return defaultEditor.getTableCellEditorComponent(table, value, isSelected, row, column);
            } else if (side.getId() != top.getId() && side.isEft() && top.isEft()) {
                getComboBox().setModel(nudaModel);
            } else {
                getComboBox().setModel(nahxpModel);
            }
            return super.getTableCellEditorComponent(table, NUHPADX(side.getId(), top.getId()), isSelected, row, column);
        }
    } 
```

这是您的 TableModel 的实现：

```
 class MyDataModel extends AbstractTableModel{

        @Override
        public int getRowCount() {
            return _Memberships.size();
        }

        @Override
        public int getColumnCount() {
            return _Memberships.size();
        }

        @Override
        public String getColumnName(int column) {
            // Here feel free to return the appropriate column names.
            return super.getColumnName(column);
        }

        @Override
        public Object getValueAt(int row, int column) {
            return NUHPADX(_Memberships.get(row).getId(), _Memberships.get(column).getId());
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            // Here you can do whatever you want to say that is editable or not
            // If it is editable, you need to override setValueAt
            return true;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            // Here you need to implement the update of your model
        }

    } 
```

# wordpress - 授予管理员查看插件页面的权限

> ID：11189101
> 
> 赞同：0
> 
> 时间：2012-06-25T12:09:29.100
> 
> 标签：wordpress

我正在开发自己的插件。

在我的插件目录下，我有一个名为 migrate.php 的文件。我希望能够导航到此页面，而无需将其放在左侧菜单中。

当我去

```
admin.php?page=myplugin/migrate.php
// ERROR: You do not have sufficient permissions to access this page. 
```

如何授予管理员查看此页面的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:17:06.810

我的猜测是页面视图失败是因为您使用的 slug 未定义为 slug（即通过添加为菜单或子菜单）。

您可以通过直接调用 PHP 文件来解决此问题，但是您需要包含 WordPress 加载程序来加载 WordPress 环境。

希望这能让你更接近一点......

# awk - awk - 如何打印数字？

> ID：11189103
> 
> 赞同：0
> 
> 时间：2012-06-25T12:09:31.443
> 
> 标签：awk

我有一个测试文件：

```
0000 850 1300    Pump  4112 893 2400    Installing sleeve  5910 890 2202    Installing tool 
Testing crankcase and  Protecting oil seal  Installing crankshaft 
carburetor for leaks  (starter side)  5910 890 2208    Installing tool, 8 
0000 855 8106    Sealing plate  4112 893 2401    Press sleeve  Installing hookless 
Sealing exhaust port  Installing oil seal  snap rings in piston 
0000 855 9200    Nipple  (clutch side)  5910 890 2301    Screwdriver, T20 
Testing carburetor for         4118 890 6400    Setting gauge  Separating handle 
leaks  Setting air gap  moldings 
0000 890 1701    Testing tool kit  between ignition  5910 890 2400    Screwdriver, T27x150 
0000 893 2600    Clamping strap  module and flywheel  For all IS screw 
```

我只想打印：

```
0000 850 1300
4112 893 2400
5910 890 2202
5910 890 2208
0000 855 8106
.
.
. 
```

感谢您的帮助。

**编辑：**

文件中的数字位于不同的位置。这些数字随机放置在输入文件中。每个数字的格式为：

```
xxxx xxx xxxx 
```

**编辑-1：**

我尝试了两种方法，但它不适用于 mawk：

```
pic@pic:~/Pulpit$ mawk --traditional -f script.awk infile
mawk: not an option: --traditional
pic@pic:~/Pulpit$ mawk -f script.awk infile
pic@pic:~/Pulpit$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:46:56.207

一种方法`grep`（如果您的版本支持该`-P`标志）：

```
grep -oP "[0-9]{4} [0-9]{3} [0-9]{4}" file.txt 
```

输出：

```
0000 850 1300
4112 893 2400
5910 890 2202
5910 890 2208
0000 855 8106
4112 893 2401
0000 855 9200
5910 890 2301
4118 890 6400
0000 890 1701
5910 890 2400
0000 893 2600 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:47:50.980

一种使用方式`awk`：

假设`infile`您的问题中提供了内容：

内容`script.awk`：

```
{
    ## Traverse all words of the line but last two. I assume to print three 
    ## consecutive number fields.
    i = 1 
    while ( i <= NF - 3 ) { 

        ## Set current word position in line.
        j = i 

        ## Get next word while current one is a digit, and save it to print later.
        while ( $j ~ /^[[:digit:]]+$/ ) { 
            value[j] = $j
            ++j 
        }   

        ## If found three consecutive number fields, print them and update counter of
        ## words in the line.
        if ( i + 3 == j ) { 
            for ( key in value ) { 
                printf "%s ", value[key]
            }   
            printf ORS 
            i += 3
        }   
        else {
            ## Failed the search, go to next field and try again.
            ++i 
        }   

        ## Delete array where I save numbers.
        # delete value           <--- Commented for compatibility with older versions.
        for ( key in value ) { 
            delete value[key]
        }
    }   
} 
```

像这样运行它：

```
awk -f script.awk infile 
```

具有以下输出：

```
0000 850 1300 
4112 893 2400 
5910 890 2202 
5910 890 2208 
0000 855 8106 
4112 893 2401 
0000 855 9200 
5910 890 2301 
4118 890 6400 
0000 890 1701 
5910 890 2400 
0000 893 2600 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:27:50.727

这更短，并寻找特定的模式：

```
mawk '
    BEGIN {
        d = "[0-9]"
    }; 
    {
        offset = 1; 
        while (RSTART + RLENGTH < length($0)) {
            if (! match(substr($0, offset), d d d d " " d d d " " d d d d)) {
                next
            }; 
            print substr($0, RSTART+offset - 1, RLENGTH); 
            offset = RSTART + RLENGTH + offset
        }
    }' inputfile 
```

# blackberry - 黑莓表格模型在滚动时变得混乱

> ID：11189109
> 
> 赞同：1
> 
> 时间：2012-06-25T12:09:48.283
> 
> 标签：blackberry, tableview, tablemodel

我想实现一个按字母顺序排序的可滚动列表。作为参考，我使用的是 Eclipse IDE 附带的 Tree Screen 示例。

我更改了数据模板以满足我的需要，它就像一个魅力，直到你想滚动。整个用户界面都搞砸了，我不知道该怎么办。我正在使用 JRE 7.1 和 Blackberry Simulator 9860 7.0（我还在真实设备上对其进行了测试）。

有人知道这是一个已知问题还是我错过了什么？

```
package lifeApp;

import net.rim.device.api.command.Command;
import net.rim.device.api.command.CommandHandler;
import net.rim.device.api.command.ReadOnlyCommandMetadata;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.XYRect;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.component.table.DataTemplate;
import net.rim.device.api.ui.component.table.RegionStyles;
import net.rim.device.api.ui.component.table.SortedTableModel;
import net.rim.device.api.ui.component.table.TableController;
import net.rim.device.api.ui.component.table.TableModel;
import net.rim.device.api.ui.component.table.TableView;
import net.rim.device.api.ui.component.table.TemplateColumnProperties;
import net.rim.device.api.ui.component.table.TemplateRowProperties;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.decor.Border;
import net.rim.device.api.ui.decor.BorderFactory;
import net.rim.device.api.util.StringComparator;

public class ProductsScreen extends MainScreen
{
private SortedTableModel _tableModel;

private static final int ROW_HEIGHT = 40;

public ProductsScreen()
{
    super(Manager.NO_VERTICAL_SCROLL | Manager.HORIZONTAL_SCROLL);

    setTitle("Alle Produkte A-Z");

    add(new LabelField("BlackBerry Devices", LabelField.FIELD_HCENTER));
    add(new SeparatorField());

    _tableModel = new SortedTableModel(StringComparator.getInstance(true), 0);

    _tableModel.addRow(new Object[] {"A", "Produkt1"});
    _tableModel.addRow(new Object[] {"b", "Produkt2"});
    _tableModel.addRow(new Object[] {"c", "Produkt3"});
    _tableModel.addRow(new Object[] {"c", "Produkt4"});
    _tableModel.addRow(new Object[] {"b", "Produkt5"});
    _tableModel.addRow(new Object[] {"c", "Produkt6"});
    _tableModel.addRow(new Object[] {"c", "Produkt7"});
    _tableModel.addRow(new Object[] {"r", "Produkt8"});
    _tableModel.addRow(new Object[] {"t", "Produkt9"});
    _tableModel.addRow(new Object[] {"c", "Produkt10"});
    _tableModel.addRow(new Object[] {"b", "Produkt11"});
    _tableModel.addRow(new Object[] {"u", "Produkt12"});
    _tableModel.addRow(new Object[] {"v", "Produkt13"});
    _tableModel.addRow(new Object[] {"t", "Produkt14"});
    _tableModel.addRow(new Object[] {"c", "Produkt15"});
    _tableModel.addRow(new Object[] {"b", "Produkt16"});
    _tableModel.addRow(new Object[] {"u", "Produkt17"});
    _tableModel.addRow(new Object[] {"v", "Produkt18"});

    RegionStyles style = new RegionStyles(BorderFactory.createSimpleBorder(new XYEdges(1, 1, 1, 1), Border.STYLE_SOLID), null, null,
        null, RegionStyles.ALIGN_LEFT, RegionStyles.ALIGN_TOP);

    TableView tableView = new TableView(_tableModel);
    TableController tableController = new TableController(_tableModel, tableView);

    tableController.setFocusPolicy(TableController.ROW_FOCUS);

    tableController.setCommand(new Command(new CommandHandler()
    {
        public void execute(ReadOnlyCommandMetadata metadata, Object context)
        {
            Dialog.alert("Command Executed");
        }           
    }));

    tableView.setController(tableController);

    DataTemplate dataTemplate = new DataTemplate(tableView, 1, 1)
    {
        /**
         * @see DataTemplate#getDataFields(int)
         */
        public Field[] getDataFields(int modelRowIndex)
        {
            final Object[] data = (Object[]) ((TableModel) getView().getModel()).getRow(modelRowIndex);

            Field[] fields = new Field[1];
            fields[0] = new LabelField((String)data[1], Field.USE_ALL_WIDTH | Field.FOCUSABLE | DrawStyle.HCENTER);

            return fields;
        }
    };

    dataTemplate.createRegion(new XYRect(0, 0, 1, 1), style);  
    dataTemplate.setColumnProperties(0, new TemplateColumnProperties(100, TemplateColumnProperties.PERCENTAGE_WIDTH));
    dataTemplate.setRowProperties(0, new TemplateRowProperties(ROW_HEIGHT));

    tableView.setDataTemplate(dataTemplate);
    dataTemplate.useFixedHeight(true);

    add(tableView);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:02:02.583

好吧，我加载了 JDE 7.1 **UI/TableAndListDemo**示例应用程序，并在 JDE 9900 上运行它。

该示例（未经我修改）表现出与您发布的代码完全相同的古怪行为。

所以，不幸的是，我会说要么存在错误，要么没有产生如何使用相对较新的有效示例`SortedTableModel`（我找不到更好的示例）。

**注意**：如果您删除排序并简单地替换`SortedTableModel`为`TableModel`，那么视觉损坏对我来说就消失了。当然，您失去了排序和分组的重要功能（表模型中的第 0 列）。

另一种选择是自己实现排序行为。对外部的数据进行排序`TableModel`是不可取的，但也不是太难。然后，您可以在重复模式中添加一个额外的行，作为当前显示单个字符（排序标准）的分隔符行的占位符。您还将数据模板更改为**不**固定高度。

此外，在数据模板中，您将定义一个*可以*容纳分隔符行的区域。该区域是否显示任何内容取决于随后的数据行是否与最后一行具有相同的单个字符。所以，这就是代码的样子

```
 DataTemplate dataTemplate = new DataTemplate(tableView, 2, 1)    // 2 "rows", not 1
  {
     public Field[] getDataFields(int modelRowIndex)
     {
        final Object[] data = (Object[]) _tableModel.getRow(modelRowIndex);

        Field[] fields = new Field[2];
        String rowGroup = (String)data[0];
        // we're in a new group if this is the very first row, or if this row's
        //  data[0] value is different from the last row's data[0] value
        boolean isNewGroup = (modelRowIndex == 0) || 
              (rowGroup.compareTo((String) ((Object[])_tableModel.getRow(modelRowIndex - 1))[0]) != 0);
        if (isNewGroup) {
           // make a separator row
           fields[0] = new LabelField((String)data[0], 
                          Field.USE_ALL_WIDTH | Field.NON_FOCUSABLE);
        } else {
           // this is in the same group as the last product, so don't add anything here
           fields[0] = new NullField();
        }
        // now, add the actual product information
        fields[1] = new LabelField((String)data[1], 
                          Field.USE_ALL_WIDTH | Field.FOCUSABLE | DrawStyle.HCENTER);

        return fields;
     }
  };

  dataTemplate.createRegion(new XYRect(0, 0, 1, 1), style);    // group separator (maybe a null field)
  dataTemplate.createRegion(new XYRect(0, 1, 1, 1), style);    // actual rows with product information
  dataTemplate.setColumnProperties(0, new TemplateColumnProperties(100, TemplateColumnProperties.PERCENTAGE_WIDTH));
  dataTemplate.setRowProperties(0, new TemplateRowProperties(ROW_HEIGHT));   // separator
  dataTemplate.setRowProperties(1, new TemplateRowProperties(ROW_HEIGHT));   // product data
  dataTemplate.useFixedHeight(false); 
```

在上面的代码中，我选择使分隔行与产品数据行具有相同的高度和样式。当然，如果你愿意，你可以改变它。

这仍然无法解决的一个问题是焦点绘制问题。当您突出显示分隔符行下方的第一行时，它会将焦点吸引到产品行及其上方的分隔符行上。

您可能需要实现一些自定义焦点绘图。我将把它留给下一个问题......不确定你是否想走这条路。希望我错了，但对我来说这有点像 RIM 库中的错误:(

# .htaccess - 使用 .htaccess 处理路由

> ID：11189117
> 
> 赞同：0
> 
> 时间：2012-06-25T12:10:15.210
> 
> 标签：.htaccess, codeigniter, routing

我刚刚学习了一点[CodeIgniter 框架](http://codeigniter.com)，并且看到了一些我很久以前就想知道的东西。

CodeIgniter 处理路由是这样的：

```
http://mydomain.com/index.php/classname/function/parameter 
```

现在我想让这个工作：

```
http://mydomain.com/classname/function/parameter 
```

是否有可能让网络服务器不检查目录而是将这些参数转发到 mydomain.com/index.php？这是否可以通过 .htaccess 或其他方式以某种方式实现？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:13:56.980

这是有关此[http://codeigniter.com/user_guide/general/urls.html的帮助](http://codeigniter.com/user_guide/general/urls.html)

或地点

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

在你的 .htaccess

# iphone - 使用 NSMutabaleDictionary 和 RKClient 包含图像并在 Php 服务器上接收

> ID：11189120
> 
> 赞同：0
> 
> 时间：2012-06-25T12:10:29.720
> 
> 标签：iphone, objective-c, ios, rest, restkit

1 - 如何使用带有 RestKit 客户端的 NSMutableDictionary 包含图片？

我的服务器在下面的代码中从 NSMutableDictionary 接收数据。

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
[dictionary setObject:usernameTextfield.text forKey:@"username"];

[client put:@"/main/insert" params:params delegate:self]; 
```

但是如何同时附加图像？

另一方面，RKParams 在我的服务器端对我不起作用。

```
RKParams *params=[[RKParams alloc]init];
imageData = UIImagePNGRepresentation(imageField.image);
[params setData:imageData MIMEType:@"image/png" forParam:@"image"]; 
```

休息服务器代码：

```
public function insert_put()
{
    $username = $this->put('username');

    $this->model->insertPost($username);

    //Question number 2\.        

    $data['success'] = 'added successfully';
    $this->response($data, 200);
} 
```

2 - 我如何从我的服务器（php）接收它？我正在使用 put 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:23:49.800

我只是做以下

```
- (void) upload: (UIImage *) pic onLoad:(RKObjectLoaderDidLoadObjectBlock) loadBlock onError:(RKRequestDidFailLoadWithErrorBlock)failBlock{

    RKParams* imageParams = [RKParams params];
    NSData* imageData = UIImageJPEGRepresentation(pic, 0.7f);
    [imageParams setData:imageData MIMEType:@"image/jpg" forParam:@"FileUpload"];
    NSString *resourcePath = @"/api/upload/";

    RKObjectMapping *mapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[KFMedia class]];

    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
        loader.method = RKRequestMethodPOST;
        loader.params = imageParams;
        [self settingsForLoader:loader withMapping:mapping onLoad:loadBlock onError:failBlock];

    }];

}

- (void) settingsForLoader: (RKObjectLoader *) loader withMapping: (RKObjectMapping *) mapping onLoad:(RKObjectLoaderDidLoadObjectBlock) loadBlock onError:(RKRequestDidFailLoadWithErrorBlock)failBlock{

    loader.objectMapping = mapping;
    loader.delegate = self;
    loader.onDidLoadObject = loadBlock;

    loader.onDidFailWithError = ^(NSError * error){
       //NSLog(@"%@",error);
    };
    loader.onDidFailLoadWithError = failBlock;
    loader.onDidLoadResponse = ^(RKResponse *response) {
        [self fireErrorBlock:failBlock onErrorInResponse:response];
    };

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:41:52.293

更好的问题。谢谢！我删除了我的反对票。

您的 RestKit 代码看起来不错，我认为是您的 php 代码失败了。RestKit 会将图像作为 multipart/form-data 的一部分上传。此信息不会像您的用户名那样出现在您的正常 _PUT 数组中。我不确定您使用的是什么框架（那是 REST 控制器库吗？），但您可以使用 _FILES['image'] 或您的服务器框架使用的任何东西访问该文件。$this->files('image') 也许？

编辑：

要创建混合参数文件，请尝试以下操作：

```
NSDictionary* strings = [NSDictionary dictionaryWithObjectsAndKeys: usernameTextfield.text, @"username", nil];
NSData* image = UIImagePNGRepresentation(imageView.image);
RKParams* params = [[RKParams alloc] initWithDictionary: strings];
[params setData: image MIMEType: @"image/png" withParameter: @"image"];

//And send it
[client put:@"/main/insert" params:params delegate:self]; 
```

但是现在你不能使用$this->put，而是使用$this->upload。例如：

```
$data = $this->upload->data();
$username = $data['username'];
$imagefile = $data['image']; 
```

# python - 相同大小的“表格”框架并删除单个框架

> ID：11189121
> 
> 赞同：1
> 
> 时间：2012-06-25T12:10:33.813
> 
> 标签：python, tkinter

我在 Tkinter 中创建了一个“表”，但作为链接到 OptionMenu 的单独函数，我创建了另一个需要根据选择添加/删除的框架。我的代码如下：

```
def ChoiceBox(choice):

    choice_frame = Frame(win1, bg='black')
    choice_frame.grid(row=2, column=1, sticky="ew", padx=1, pady=1)
    column = 0
    if choice == "Fixed":
        choice_frame.grid_forget()      
        tkMessageBox.showinfo("Message", "Fixed.")
    elif choice == "List":
        i = [0, 1, 2, 3]
        for i in i:
            choice_title = Label(choice_frame, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=0)
            choice_title.grid(row=0, column=column+i, sticky="nsew", padx=1, pady=1)

            box = Entry(choice_frame, bg='white', borderwidth=0, width=0)
            box.grid(row=1, column=column+i, sticky="ew", padx=1, pady=1)
    elif choice == "Between" or "Bigger":
        i = [0, 1]
    choice_title1 = Label(choice_frame, text='Min Value', bg='white', borderwidth=0, width=0)
        choice_title1.grid(row=0, column=column, sticky="nsew", padx=1, pady=1)
        choice_title2 = Label(choice_frame, text='Max Value', bg='white', borderwidth=0, width=0)
        choice_title2.grid(row=0, column=column+1, sticky="nsew", padx=1, pady=1)
        for i in i:
            box = Entry(choice_frame, bg='white', borderwidth=0, width=0)
            box.grid(row=1, column=column+i, sticky="nsew", padx=1, pady=1) 
```

我目前正在获取两个单独的表，但choice_frame 'table' 的大小与另一个不同。因此，我希望将此表作为第一个表的框架的一部分（然后以某种方式仅删除此部分），我已经完成了。另一个框架是 frame_table（我在其中制作原始表格的那个），并且想加入这个框架。

否则，我希望将其保留为单独的表格，但我无法在选择“固定”时使其消失。这段代码纯粹是我之前创建的 OptionMenu 的命令。任何帮助，我将不胜感激！谢谢你。

更新：现在需要根据选择为每一行获取一个单独的帧（见下图）。我在这方面非常挣扎！

![在此处输入图像描述](../Images/2c6dd83550e30d531e23b553a2adc064.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:24:31.337

这是一个稍微好一点的例子（与我之前的例子相比）：

```
import Tkinter as tk

class TableWithFrame(tk.Frame):
    def __init__(self,master=None,*args,**kwargs):
        tk.Frame.__init__(self,master,*args,**kwargs)
        self.table=tk.Frame(self)
        self.table.grid(row=0,column=0)

        self.optionmenu=None
        self.option=tk.StringVar()

        self.frames={}
        self.options=[]
        self.current_choice=None

        self.add_optionmenu()
        self.option.trace("w",self.option_changed)

    def add_option(self,option_string,frame):
        self.options.append(option_string)
        if(self.optionmenu is not None):
            self.optionmenu.destroy()
        self.add_optionmenu()
        self.frames[option_string]=frame

    def add_optionmenu(self):
        if(self.optionmenu is not None):
            self.optionmenu.destroy()

        if(self.options):
            self.optionmenu=tk.OptionMenu(self,self.option,*self.options)
            self.optionmenu.grid(row=1,column=0)

    def option_changed(self,*args):
        choice=self.option.get()
        if(self.current_choice is not None):
            self.current_choice.grid_forget()
        self.current_choice=self.frames[choice]
        self.current_choice.grid(row=0,column=1)

if __name__ == "__main__":
    def populate_table(table):
        """ junk data """
        for j in range(3):
            for i in range(10):
                l=tk.Label(table,text='%d'%(i*j))
                l.grid(row=j,column=i)

    def create_opt_frames(TWF):
        #Fixed Frame
        F=tk.Frame(TWF)
        F.boxes={}
        TWF.add_option('Fixed',F)

        #List Frame
        F=tk.Frame(TWF)
        F.boxes={}
        for i in (1,2,3,4):
            choice_title = tk.Label(F, text='Value %g'% float(i+1))
            choice_title.grid(row=0, column=i, sticky="news")
            box = tk.Entry(F, bg='white')
            box.grid(row=1, column=i, sticky="ew")
            F.boxes[i]=box

        TWF.add_option('List',F)

        #Bigger and Between Frame
        F=tk.Frame(TWF)
        F.boxes={}
        choice_title1 = tk.Label(F, text='Min Value')
        choice_title1.grid(row=0, column=0, sticky="news")
        choice_title2 = tk.Label(F, text='Max Value')
        choice_title2.grid(row=0, column=1, sticky="news")
        for i in (1,2):
            box = tk.Entry(F)
            box.grid(row=1, column=i-1, sticky="nsew", padx=1, pady=1)
            F.boxes[i]=box

        TWF.add_option('Between',F)
        TWF.add_option('Bigger',F)

    def print_boxes(TWF):
        """ Example of how to get info in Entry fields """
        if(TWF.current_choice is not None):
            for k,v in TWF.current_choice.boxes.items():
                print ("boxnum (%d) : value (%s)"%(k,v.get()))
        TWF.after(1000,lambda : print_boxes(TWF))

    root=tk.Tk()
    App=TableWithFrame(root)
    populate_table(App.table)
    create_opt_frames(App)
    print_boxes(App)
    App.grid(row=0,column=0)
    root.mainloop() 
```

这通过为选项菜单中的每个选项创建一个框架来工作。实际上，这一切都可以在这个类之外完成。您所做的只是为您想要的每个选项添加一个框架。

# javascript - sencha touch2 中的加载掩码

> ID：11189135
> 
> 赞同：1
> 
> 时间：2012-06-25T12:11:16.380
> 
> 标签：javascript, html, extjs, sencha-touch-2

我想在视图页面中应用加载掩码。在启动应用程序时，一些视图页面需要一些时间来加载稍后将显示的数据，所以如果它需要时间加载，我想向用户显示加载掩码，并显示一些消息，如“正在加载......”。从一些示例中，我应用了加载掩码，但每次我点击该页面时都会显示该消息。这是不好的方式，因为这里设置时间。**如果没有数据，我需要像这样应用加载掩码，它应该向用户显示加载掩码，直到页面获取数据。请任何人帮助我。如何实现这一目标**

**我的代码在这里：** *在控制器级别，我正在获取 load-mask 的 id 并设置属性，如下所示的代码*

```
onCompanyPageLoad: function () {
    var loader = Ext.getCmp('mask');        
    loader.setMessage("Loading...");
    loader.setIndicator(true);
    loader.setTransparent(false);      
    loader.show();        
    setTimeout(function () {            
        loader.hide();
    }, 1000);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T03:00:37.600

**user978790**的答案是在 Sencha Touch 2 中显示和隐藏加载蒙版的正式方式。

如果你不能让它工作，很可能你正在做类似的事情：

```
Ext.Viewport.setMasked({xtype:'loadmask',message:'your custom loadmask'});
... then do something here
Ext.Viewport.setMasked(false); 
```

请注意，Javascript 是异步的，因此它不能确保代码行按上述顺序运行。然后有一种可能，Sencha Touch 会初始化您的加载蒙版并立即销毁它。为了正确使用加载掩码：

1.  如上所述初始化加载掩码。
2.  将加载掩码初始化后确保启动`Ext.Viewport.setMasked(false);`的***特殊功能放入其中，例如。***事件处理程序，或 JSONP/AJAX 请求的成功函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T12:16:59.800

我这样做是通过以下方式：

```
Ext.Viewport.setMasked({xtype:'loadmask',message:'your custom loadmask'}); 
```

然后你可以使用

```
Ext.Viewport.setMasked(false); 
```

停止显示加载掩码 如果您只想在视图的一部分上显示掩码，这也适用于组件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:20:17.787

只需删除所有这些。我很清楚如何使用加载器。首先在主页 html 上添加加载器

```
<div id="loader"></div>//add id#loader with background loading image 
```

页面加载后只需添加控制器`Ext.get('loader').destroy();`//当页面完全加载时，它将加载您的加载 div

# javascript - 使用 jQuery 触发 oninput 事件

> ID：11189136
> 
> 赞同：50
> 
> 时间：2012-06-25T12:11:16.730
> 
> 标签：javascript, jquery, html, events

我在 textarea 上有一个 oninput 事件来检查高度并调整它的大小。现在我有时需要编辑值。我只是通过在 jQuery 中编辑 val() 来做到这一点，但这不会触发 oninput 事件。有什么方法可以使用 jQuery 以编程方式触发 oninput 事件？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2018-10-06T13:37:11.107

使用`.on('input')`. 例如：

```
$('textarea').on('input', function() {
  text = $('textarea').val();
  $('div').html(text);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<textarea placeholder="Type something here"></textarea>
<div></div>
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-10-16T18:40:43.337

有点晚了，但为了将来参考，有 .trigger 方法。

```
$("#testArea").on("input", function(e) {
  $("#outputArea").text( $(e.target).val() )
});

$("#testArea").val("This is a test");
$("#testArea").trigger("input");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<input id="testArea" type="text" />
<div id="outputArea"></div>
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-25T12:13:40.457

您可以简单地调用它，例如：

```
$("input")[0].oninput = function () {
   alert("hello"); 
};

$("input")[0].oninput(); 
```

...但正如@Sammaye 指出的那样，jQuery 没有明确的“oninput”处理程序，因此您必须使用 POJS。

[JS Fiddle 上的演示](http://jsfiddle.net/karim79/t24Eg/)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-25T12:14:53.963

oninput 实际上还没有在 JQuery 中。

你可以在这里看到关于它的帖子：

[http://forum.jquery.com/topic/html5-oninput-event](http://forum.jquery.com/topic/html5-oninput-event)

[http://bugs.jquery.com/ticket/9121](http://bugs.jquery.com/ticket/9121)

基本上普遍的共识是他们还不想要它。

但是不，直接更改 val() 不会触发 html5 oninput，因为它的规范声明它是当用户在 UI 中更改输入的值时。

编辑：

然而，有人为希望仅使用 HTML5 事件的人制作了一个插件：[https ://github.com/dodo/jquery-inputevent](https://github.com/dodo/jquery-inputevent)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-19T19:22:46.937

您可以绑定到输入和更改：

**输入**将在用户输入时触发

**change**将在 change()**和 to val(" ") 分配时触发，但经过一些更改**

```
$("#textarea").bind("input change", function() {
    alert("change happend");
});
... 
```

绑定**更改**后，您可以在每个 val(" ") 分配上手动调用它：

```
$("#textarea").val("text").change(); 
```

或者您可以覆盖 jQuery val(" ") 方法以触发每个用户 val(" ") 调用的**更改：**

```
(function ($) { var fnVal = $.fn.val;
    $.fn.val = function(value) {
        if (typeof value == 'undefined') {
            return fnVal.call(this);
        }
        var result = fnVal.call(this, value);
        $.fn.change.call(this); // calls change()
        return result;
    };
})(jQuery); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-08T19:19:02.153

尝试使用“keypress”或“keydown”。

示例 1：

```
$("#textarea").keypress(function(){
    alert($("#textarea").val());
}); 
```

示例 2：

```
$("#textarea").keydown(function(){
    alert($("#textarea").val());
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-19T15:45:34.303

推送 RUN CODE SNIPPET 以查看结果

**我一直在寻找一个更好的例子来将输入范围连接到输入值，所以** *我在 JQuery 插件中修改了费尔南多的例子*，所以：对于每个 **`<input type="range" min="1" max="100" value="50" id="range1">`** 你都会有他的价值： **`<input type="text" disabled id="value" class="range1" value="0">`** 所以就像任何父范围**id=" range1"**有一个孩子 id="value" **class="range1"**

```
<!-- <script src="../js/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

1<input type="range" min="1" max="100" value="50" id="range1"><input type="text" disabled id="value" class="range1" value="0"><br>
2<input type="range" min="1" max="100" value="50" id="range2"><input type="text" disabled id="value" class="range2" value="0"><br>
3<input type="range" min="1" max="100" value="50" id="range3"><input type="text" disabled id="value" class="range3" value="0"><br>
4<input type="range" min="1" max="100" value="50" id="range4"><input type="text" disabled id="value" class="range4" value="0"><br>
...<br>
n<input type="range" min="1" max="100" value="50" id="rangen"><input type="text" disabled id="value" class="rangen" value="0"><br>

<script type="text/javascript">
<!--
$(document).ready(function() {
  $('input').on("input",function(){
    $('input').each(function(index) {
      //console.log('1 '+index + ': ' + $(this).text()+',id='+$(this).attr('id'));
      if($(this).attr('id')=='value'){
        //console.log('2 class='+$(this).attr('class'));
        var obj=$('input#'+$(this).attr('class') );
        var hisvalue=$(this);
        //console.log('3 parent`s value='+obj.val() );
        obj.on("input",function(){
          hisvalue.val(obj.val());
        });
      }
    });
  });
  $('input').trigger("input");
});
//-->
</script>
```

# ruby-on-rails - 如何将瞬态变量保留为 ActiveRecord 的一部分

> ID：11189139
> 
> 赞同：2
> 
> 时间：2012-06-25T12:11:25.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我想在 Rails3.2 中显示一个变量（实际上是一个列表）作为 f.select(..) 函数的一部分，以便将所选值存储在 ActiveRecord 对象的不同属性中。如何在 ActiveRecord 中将上述 List 变量声明为瞬态变量，以便 ActiveRecord 不会尝试存储它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:28:16.020

您可以像这样在模型中编写自己的 getter 和 setter 方法（不要忘记将其添加到 attr_accessible）：

```
def virtual_attr=(value)
  self.real_attr = value
end

def virtual_attr
  self.real_attr
end 
```

或者只是为真实属性创建一个别名，如下所示：

```
alias_attribute :virtual_attr, :real_attr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-04T22:28:39.327

在 rails 4+ 中，您可以通过以下方式在模型中定义瞬态字段：

```
attr_accessor :the_field 
```

# php - PHPExcel中的公式错误

> ID：11189145
> 
> 赞同：4
> 
> 时间：2012-06-25T12:11:49.290
> 
> 标签：php, phpexcel

我在一对公式上遇到了一个奇怪的 phpexcel 问题，无法弄清楚问题的根源。（其他简单的数学公式有效，只有这个失败）。

由于php报告很长，我会直截了当。

像这样设置这个公式

```
$objPHPExcel->getActiveSheet()->setCellValue("D$cuenta_empleados", "=$'asientos_title'.K$cuadro_row" ); 
```

扔给我这个

```
Fatal error: Uncaught exception 'Exception' with message 'INPUT NOMINA Agosto!D8 -> Formula Error: An unexpected error occured' in /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/inc/PHPExcel/Cell.php:293 Stack trace:
 #0 /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/inc/PHPExcel/Writer/Excel5/Worksheet.php(455): PHPExcel_Cell->getCalculatedValue() 
 #1 /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/inc/PHPExcel/Writer/Excel5.php(194): PHPExcel_Writer_Excel5_Worksheet->close() 
 #2 /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/classes/Everything.class.php(2361): PHPExcel_Writer_Excel5->save('../../reports/1...') 
 #3 /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/classes/Everything.class.php(3813): Everything->create_act_entry(Array, Array, Array, Array, Array) 
 #4 /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/controllers/common/generar.php(68): Everything->gen_docs(Array, Array, Array) 
 #5 {main} thrown in /Users/PolCPP/Documents/Proyectos/Activos/beneficiat/php/inc/PHPExcel/Cell.php on line 293 
```

所以为了调试它，我删除了 = 以避免它的计算。我在openoffice上查看。我明白了

```
'ASIENTOS Agosto'.K4 
```

并在它前面添加 = 有效。

第二个公式我有问题，它是一个条件（同样的问题，它可以生成它但它适用于 php）

```
=IF(D22>O22;D22-O22;0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T12:28:02.430

开发人员文档指出，您需要在公式中使用 US/UK 分隔符。

报价：

> 4.6.4\. 将公式写入单元格
> 
> 在 Excel 文件中，公式始终按照它们在 Microsoft Office Excel 英文版中的显示方式存储，PHPExcel 在内部以这种格式处理所有公式。这意味着以下规则成立：
> 
> • 小数分隔符是'.' （时期）
> 
> • 函数参数分隔符是','（逗号）
> 
> • 矩阵行分隔符是';' （分号）
> 
> • 必须使用英文函数名
> 
> 这与用于创建 Excel 文件的 Microsoft Office Excel 的语言版本无关。

所以

```
=IF(D22>O22,D22-O22,0) 
```

而不是

```
=IF(D22>O22;D22-O22;0) 
```

唯一适用的例外情况是，如果您已按照该文档第 4.6.5 节中的说明设置公式的区域设置

单元格引用中工作表的分隔符是感叹号：

```
'ASIENTOS Agosto'!K4 
```

不是

```
'ASIENTOS Agosto'.K4 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-23T14:19:17.567

公式预计算 默认情况下，此编写器会预计算电子表格中的所有公式。这在大型电子表格上可能会很慢，甚至可能不需要。但是，您可以禁用公式预计算：

`$objWriter = new PHPExcel_Writer_CSV($objPHPExcel);` **`$objWriter->setPreCalculateFormulas(false);`isso 解析器** `$objWriter->save("05featuredemo.csv");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:19:27.813

我将这个 PHPExcel 类用于数据库导入，我得到了同样的错误。一些调试表明，表格单元格的这个内容导致了错误：

```
=- die Beschaffungsplattform für Geschäftskunden 
```

我发现，异常是故意抛出的：

第 288 行的 PHPExcel/Classes/PHPExcel/Cell.php（当前 PHPExcel 版本 v1.7.6）

```
throw(new Exception($this->getParent()->getTitle().'!'.$this->getCoordinate().' -> '.$ex->getMessage())); 
```

所以我只是删除了这个异常并返回一个空字符串：

```
$result = ""; 
```

这是一个糟糕的解决方法，但就像一个魅力:)

# c - c中具有不同原型的函数指针

> ID：11189149
> 
> 赞同：0
> 
> 时间：2012-06-25T12:12:18.807
> 
> 标签：c

这是我正在尝试的代码。我无法理解我得到的输出。为什么在这里输出一些垃圾值而不是 10？

```
#include<stdio.h>
#include<string.h>
void f(int);
void (*foo)(float)=f;
int main()
{

  foo(10);
   return 0;

}

void f(int i)
{
   printf("%d\n",i);
} 
```

**输出是一些垃圾值。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:15:18.550

> 为什么输出一些垃圾

因为你对编译器撒谎。

你告诉它`foo`是一个指向接受 a 的函数的指针，`float`然后将它指向一个接受 a 的函数`int`。

**不要对编译器撒谎**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T12:18:30.103

这是未定义的行为。

您正在调用`f`，这是一个接受 a 的函数`int`，就好像它是一个接受 a 的函数一样`float`。实际行为将取决于平台的调用约定如何工作 - 例如，如果`int`和`float`参数在同一个寄存器或同一个堆栈槽中传递，结果将是别名表示`10.0f`为`int`. 另一方面`int`，如果`float`以不同的方式传递，则结果将是适当的寄存器或堆栈槽中的任何垃圾。

此外，因为这是未定义的行为，编译器可以自由地做它喜欢的任何事情，如果启用了优化器，它可能会做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T12:33:29.173

在这种情况下，编译器通常会发出警告或错误，例如 GCC 说：

```
program.c:4: warning: initialization from incompatible pointer type 
```

英特尔 C 编译器更详细：

```
program.c(4): warning #144: a value of type "void (*)(int)" cannot be used to initialize an   entity of type "void (*)(float)"
  void (*foo)(float)=f;
                     ^ 
```

除了可能将参数值转换`10`为浮点之外，如果您在 64 位机器上运行，还有另一个选项 - 调用约定。整数参数通过常规整数 CPU 寄存器（`RDI`、`RSI`等）传递，而浮点参数通过 SSE 寄存器（`XMM0`、`XMM1`等）传递。即使浮点值以某种方式与整数 1 兼容，被调用的函数也会在不同的寄存器 ( `XMM0`) 中接收其参数，而不是它会查询值 ( `RDI`) 的寄存器。

在 32 位机器上，整数和浮点参数都在堆栈上传递。你最终得到的是`1092616192`IEEE `10.0`754 单精度浮点表示：

```
1092616192 = 0|10000010|01000000000000000000000
             | |        |
             | |        +---> significand = 1 + 2^(-2) = 1.25
             | |
             | +------------> exponent = 130 - 127 = +3
             |
             +--------------> sign = 0 (positive)

1.25 * 2^3 = 1.25 * 8 = 10.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T12:13:58.750

因为未定义的行为。

调用 through`foo()`将整数转换`10`为`float`，然后将其解释为`int`by `f()`。

我很确定这不是很好定义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T12:14:58.533

因为原型不同。编译器将“10”视为浮点数，并使用其浮点表示来调用`f()`，而后者又将其视为整数，其二进制表示不具有值“10”。

# c# - 在创建新行时创建新对象时的 Datagridview 数据绑定

> ID：11189150
> 
> 赞同：0
> 
> 时间：2012-06-25T12:12:21.267
> 
> 标签：c#, data-binding, datagridview

我在`DataGridView`和 之间的数据绑定有一点问题`PropertyGrid`。

这是我绑定到的对象的代码和`DataGridView`：

```
 public class Effort
 {
     public BindingList<EffortCalculationRelation> CalculationRelations { get; set; }
     public int ID { get; set; }
     // more properties

     public Effort()
     {
         CalculationRelations = new BindingList<EffortCalculationRelation>();
         CalculationRelations.Clear();

         for (int i=0;i<10;i++)
         {
             CalculationRelations.Add( new EffortCalculationRelation() { ID = i, Name = "Round:" + i.ToString(), calculation = "Some calc" });
         }
     }

     public Effort(int id) : this()
     {
         this.ID = id;
         // Load all other properties
     }

     public class EffortCalculationRelation
     {
         public int ID { get; set; }
         public string Name { get; set; }
         public string calculation { get; set; }

         public int Save()
         {
             // save or insert and return id or 0 on fail
             if (this.ID > 0)
             {
                 return this.Update();
             }
             else
             {
                 return this.Insert();
             }
         }
         public string Delete()
         {
             // delete and return "" or errormsg on fail
             return "";
         }
         private int Insert()
         {
             // insert and return id or 0 on fail
             return ID;
         }
         private int Update()
         {
             // return affected rows or 0 on fail
             return 1;
         }

         public string Representation
         {
             get { return String.Format("{0}: {1}", ID, Name); }
         }
     }
 } 
```

datagridview 连接非常简单，只有一点点样式：

```
 public test()
  {
     effort = new Effort(1209);
     dgv.DataSource = effort.CalculationRelations;
     dgv.SelectionMode = System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect;
     dgv.AllowUserToAddRows = true;
     //this.dgv.AllowUserToDeleteRows = false;
     dgv.AllowUserToResizeRows = false;
     dgv.ReadOnly = true;
     dgv.SelectionChanged += (sender, args) =>
     {
         var selectedObjects =
              (from System.Windows.Forms.DataGridViewRow r in dgv.SelectedRows
              where r.DataBoundItem != null && r.DataBoundItem.GetType() == typeof(EffortCalculationRelation)
              select r.DataBoundItem).ToArray();

         // pg is a propertygrid
         this.pg.SelectedObjects = selectedObjects;
     };
  } 
```

所以我的问题是，当我在 datagridview 中选择新行时，propertygrid 中没有显示任何属性。

当我在加载时选择列表中包含对象的行时，我可以编辑属性。

那你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:58:56.573

新行未显示在属性网格中的原因是它`DataBoundItem`为空，因此被您的 LINQ 语句删除`where r.DataBoundItem != null`。¹

我同意你的观点，这是非常烦人的行为，特别是因为在某种意义上已经创建了对象。

我曾认为在某些情况下有一种可行的解决方法，可以将属性网格绑定到父`Effort`对象中的新对象，或者`BindingSource`使用如下代码：

```
var selectedObjects =
        (from System.Windows.Forms.DataGridViewRow r in dataGridView1.SelectedRows
        where r.DataBoundItem != null && r.DataBoundItem.GetType() == typeof(Effort.EffortCalculationRelation)
        select r.DataBoundItem).ToArray();

if (dataGridView1.CurrentRow.IsNewRow && dataGridView1.SelectedRows.Count == 1)
{
    // I tried accessing the parent object like this:
    //Effort.EffortCalculationRelation ecr = effort.CalculationRelations[effort.CalculationRelations.Count - 1];
    //propertyGrid1.SelectedObject = ecr;

    // Or accessing a binding source like:
    propertyGrid1.SelectedObject = calculationRelations.Current;
}
else
{
    propertyGrid1.SelectedObjects = selectedObjects;
} 
```

我对这些变体进行了一些试验，并将这些项目添加到 SelectedObjects 数组中，认为某些东西会满足您的要求，但我最终意识到**在 DataGridView 提交新行之前将焦点从新行转移到属性网格意味着新行丢失并且无法再编辑**。

那么该怎么办？

如果我在你的位置，我会考虑以下两件事之一：

*   允许在某种形式的网格中直接编辑 - 可能只是到新行。

    在选择更改事件中这样的事情会起作用：

    ```
    if (dataGridView1.CurrentRow.IsNewRow)
    {
        dataGridView1.CurrentRow.ReadOnly = false;
    }
    else
    {
        dataGridView1.CurrentRow.ReadOnly = true;
    } 
    ```

*   保持网格不变，但不允许新行 - 而是在单独的行创建面板之间处理新对象。

* * *

¹这显然是通过设计以这种方式工作的 - 在您离开网格之前不会提交 DataBoundItem。这里有一些讨论，包括有问题[的](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/7cf387d0-96e8-437e-86c3-14a411be0001)`DataGridView`代码。

# java - Jedis无法建立连接

> ID：11189154
> 
> 赞同：0
> 
> 时间：2012-06-25T12:12:36.183
> 
> 标签：java, redis

我使用 Jedis，我想与 Redis 服务器建立连接，该服务器与我的应用程序运行的服务器不同......即 Redis 在服务器 X 上，而我的应用程序在服务器 Y 上。我该如何建立连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T07:30:19.580

## 试试这个：

Jedis jedis = new Jedis("23.27.123.100",6379);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:15:43.317

有没有试过在实例化 Jedis 时指定 IP 地址如下：

示例（替换为实际 IP 地址）

```
Jedis jedis = new Jedis(IP address); 
```

像这样

```
Jedis jedis = new Jedis(23.27.123.100); 
```

另外，redis 是在监听 6379 还是其他端口？防火墙/IP 表设置是否到位以避免阻止该端口上的连接尝试？您能否分享有关尝试连接到远程主机时发生的情况的更多详细信息。

# java - Java 的 String Intern 是轻量级的吗？

> ID：11189155
> 
> 赞同：13
> 
> 时间：2012-06-25T12:12:37.740
> 
> 标签：java, design-patterns, flyweight-pattern

Java的String内存池的实现是否遵循flyweight模式？

为什么我有这个疑问是，我看到实习生中没有外在状态。在 GoF 中，我读到应该在内在和外在状态之间取得适当的平衡。但在实习生中，一切都是内在的。

或者我们应该说对于属性没有严格的规则，只是共享对象以减少内存就足以称其为享元。

请帮我理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:19:06.410

不管实习如何，Java String 通过在字符串和通过类似方法调用`char[]`从它派生的字符串之间共享字符串来利用享元模式。`substring`不过，这也有不利的一面：如果你从一个巨大的字符串中提取一个小的子字符串，那么这个巨大的字符串`char[]`将没有资格进行垃圾收集。

**注意：**从 OpenJDK 版本 1.7.0_06 开始，上述内容已过时：代码已更改，`char[]`不再在实例之间共享。`substring()`创建一个新数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T12:48:31.700

是的，`String.intern()`实现遵循享元模式。

正如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)所说

> 返回字符串对象的规范表示。一个字符串池，最初是空的，由 String 类私下维护。
> 
> 当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。
> 
> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java 语言规范的 §3.10.5 中定义

内部化的字符串驻留在“Perm Gen”空间中，并且`.intern()`您可以在返回的字符串对象上使用运算符`==`，因为`.intern()`对于相等的值总是返回相同的对象。

然后记住该`.intern()`方法不会产生泄漏，因为今天的 JVM 能够对池进行垃圾处理。

尝试阅读这篇[文章](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-07T14:37:29.380

您已经正确地确定了 Interning 和 Flyweight 都基于相同的想法：缓存和共享公共状态。

使用享元，在没有外部状态可存储的极端情况下，只保留指向内部状态的指针。那么外部状态甚至不需要是一个对象，指针本身可以是外部状态。那时 Flyweight 已成为实习生。

实习是否“真的”是或不是一种蝇量级只是关于定义的争论。最重要的是理解如何将一个人视为另一个人的特殊实例，所以你很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-26T17:54:50.550

就像其他人所说的那样， String.intern() 都是关于缓存的。它返回对池中已存储的字符串文字的引用。通过这种方式，它在某种程度上类似于享元模式，因为它使用现有对象，从而降低内存消耗并提高性能（尽管实习生在字符串池中查找也有自己的性能开销）。因此，这两个可能看起来很相似，但实际上并非如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-19T22:19:45.373

不，共享对象以减少内存不足以称其为享元。换句话说，缓存不会自动成为享元模式。

我认为可以说享元是一种特殊的缓存形式，即部分缓存；但请注意，GoF 书在享元章节中的任何地方都没有使用“缓存”或“缓存”一词（尽管这些术语分别在前面和后面的章节中使用，门面和代理）。

该线程中的一些评论值得重复，因为它们简洁地回答了整个问题。

*   > 如果您的对象没有外部上下文，那么您只是在缓存。享元模式甚至有用定义的全部原因是人们经常忘记他们至少可以缓存与上下文无关的对象的一部分并共享它。
    > 
    > - CS

*   > 享元是关于共享对象内部的。实习只是缓存整个对象。
    > 
    > ——马尔科·托波尔尼克

但是，让我们将 String interning 与 GoF 定义的标准（第 197 页）进行比较。

> *当满足以下所有*条件时应用享元模式：
> 
> *   应用程序使用大量对象。
> *   由于对象数量庞大，存储成本很高。
> *   大多数对象状态都可以是外部的。
> *   一旦外部状态被移除，许多对象组可能会被相对较少的共享对象所取代。
> *   应用程序不依赖于对象身份。由于享元对象可能是共享的，身份测试将为概念上不同的对象返回 true。

1.  显然，许多应用程序使用大量字符串，因此该标准通过了。
2.  存储字符串是昂贵的，至少与原始类型相比，所以让我们通过这个标准。
3.  这就是我们被绊倒的地方：*没有*一个字符串的状态是外在的。这个标准失败了。
4.  如果我们大方并忽略有关外部状态的部分，我们也可以通过此标准，因为字符串确实倾向于被重用。
5.  任何曾经`==`在 Java 中比较字符串的人都知道不依赖对象标识，所以这个标准通过了。

那么 4/5 的通过标准是相当不错的吧？这还不足以说明实习/缓存和轻量级是相同的吗？否：相似！= 相同。GoF 引用中对*all*一词的强调是他们的，而不是我的。自然而然地强烈希望用 GoF 模式名称标记尽可能多的实现，因为这样做会给这些实现带来合法性。（最令人震惊的情况是工厂模式，你可以很容易地找到可以想象的各种创建代码的标签；但我离题了。）如果模式不符合其发布的定义，它们就会重叠并失去意义，从而打败了大部分他们的目的（常用词汇）。

最后，我们来分析flyweight一章的第一句话：GoF定义为flyweight模式的*Intent是什么。*

> 使用共享有效地支持大量细粒度对象。

我认为没有外在状态的对象不是细粒度的，而是相反的；所以这里有一个建议的缓存*意图*：使用缓存来有效地支持大量粗粒度对象。

显然，String interning/caching 和 Flyweight Pattern 有相似之处；但它们不一样。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-19T23:47:16.417

Flyweight 是关于共享对象不可变的内部结构。实习只是缓存整个对象。

# jquery - 阅读跨度文本

> ID：11189157
> 
> 赞同：2
> 
> 时间：2012-06-25T12:12:46.543
> 
> 标签：jquery

我有一个 div，其中有跨度，我想阅读内部跨度的所有文本。我无法阅读跨度“名称”文本。以下代码有什么问题？

```
<div id= "myList">
<span class="FirstSpan">
<span class = "name">

</span>

</span>

</div>

 var values= [];
        $('#myList').find('span.name').each(function () {
            $alert($(this).html());
            values.push($(this).html());
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:13:59.343

`$alert()`应该`alert()`

你可以试试

```
$(this).text() 
```

***完整代码***

```
var values = [];
$('#myList span.name').each(function () {
     alert($(this).text());
     values.push($(this).text());
}); 
```

**[演示](http://jsfiddle.net/zkTud/12/)**

另一种方式：

```
var values = [];
$('#myList span.name').text(function(i, text) {
    alert(text);
    values.push(text);
}); 
```

**[演示](http://jsfiddle.net/zkTud/11/)**

**相关参考：**

*   **[。每个（）](http://api.jquery.com/each)**

*   **[。文本（）](http://api.jquery.com/text)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:16:56.807

没有功能`$alert()`，这就是问题所在。改为使用[`alert()`](https://developer.mozilla.org/en/DOM/window.alert)。

但是，在您的情况下，我最好使用[`map`](http://api.jquery.com/map/)方法：

```
var values = $("#myList span.name").map(function() {
    return $.trim(this.innerHTML);
}).get(); 
```

**演示：http:** [//jsfiddle.net/m5QsA/](http://jsfiddle.net/m5QsA/)

# javascript - Javascript，值类型作为参考

> ID：11189159
> 
> 赞同：0
> 
> 时间：2012-06-25T12:12:54.023
> 
> 标签：javascript

在某些情况下，我需要在不更改处理功能的情况下将值类型作为参考传递。

1.  示例数字类型（var 限制）

    ```
    var limit = 0; // Need to be the reference type
    var multiCallback = new MultiCallback(limit, function(){});
    for (element in myObject)
    {
        limit++;
        element.DoSomething(multiCallback.callback);
    }

    function MultiCallback(limit, func)
    {
        var calls = 0;

        function callback()
        {
            if (++calls == limit)
            {
               func();
            }
        }

        return {
           callback : callback
        }
    } 
    ```

2.  示例函数类型

    ```
    var resizeCallback = function(){};
    $(window).resize(resizeCallback);

    function showPage()
    {
       resizeCallback = resizePage();
    }

    function showLoader()
    {
       resizeCallback = resizeLoader();
    } 
    ```

有没有解决办法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:16:06.007

更改变量的值永远不会更新变量的先前值。

对于函数，您可以执行以下操作：

```
var current = function() { ... };
function resizeCallback() {
    return current.apply(this, arguments);
}
// Updating current will work:
current = function() { ... something ... }; 
```

对于其他值（基元和对象），最接近的是传递一个对象：

```
var limit = {value: 0};
function MultiCallback(limit, func) {
    ....
    if (limit.value == ++calls) ...
}
// Changing limit:
limit.value = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:18:06.973

javascript 中没有引用传递（调用者看不到分配参数）。您在函数示例中所做的是修改全局变量。

您可以用一个对象包装它，并且调用者可以看到该对象的突变：

```
var limit = {
    value: 0 
}; 
```

# c# - 如何从 Catch 块返回错误消息。现在空返回

> ID：11189161
> 
> 赞同：4
> 
> 时间：2012-06-25T12:12:55.390
> 
> 标签：c#, asp.net-web-api

我的 ApiKey 验证示例代码如下（我使用的是 MVC4 web api RC）：

```
public class ApiKeyFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext context)
    {
        //read api key from query string
        string querystring = context.Request.RequestUri.Query;
        string apikey = HttpUtility.ParseQueryString(querystring).Get("apikey");

        //if no api key supplied, send out validation message
        if (string.IsNullOrWhiteSpace(apikey))
        {                
            var response = context.Request.CreateResponse(HttpStatusCode.Unauthorized, new Error { Message = "You can't use the API without the key." });
            throw new HttpResponseException(response);
        }
        else
        {          
             try
            {
                GetUser(decodedString); //error occurred here
            }
            catch (Exception)
            {
                var response = context.Request.CreateResponse(HttpStatusCode.Unauthorized, new Error { Message = "User with api key is not valid" });
                throw new HttpResponseException(response);
            }
        }
    }
} 
```

这里的问题是 Catch 块语句。我只是想向用户发送自定义错误消息。但是什么都没有发送。它显示一个空白屏幕

但是，以下语句运行良好并正确发送验证错误消息：

```
if (string.IsNullOrWhiteSpace(apikey))
{                
    var response = context.Request.CreateResponse(HttpStatusCode.Unauthorized, new Error { Message = "You can't use the API without the key." });
    throw new HttpResponseException(response);
} 
```

有什么我做错了吗。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T14:20:49.563

我在完全相同的情况下遇到了同样的问题。但是，在这种情况下，您需要在响应中返回一些内容才能显示，而不是真正抛出异常。因此，基于此，我会将您的代码更改为以下内容：

```
 catch (Exception)
 {
    var response = context.Request.CreateResponse(httpStatusCode.Unauthorized);
    response.Content = new StringContent("User with api key is not valid");
    context.Response = response;
 } 
```

因此，通过此更改，您现在返回您的响应，内容将显示在空白屏幕的位置。

# parsing - 在 ColdFusion 中加密和解密查询字符串 - 解析参数和值的结果字符串

> ID：11189169
> 
> 赞同：2
> 
> 时间：2012-06-25T12:13:27.120
> 
> 标签：parsing, coldfusion, query-string, encryption

我确定这很简单，但我似乎无法正确

在 ColdFusion 中，我加密了一个查询字符串，然后`CGI.Query_String`很容易地解密了这个值。然后我有一个看起来像查询字符串的字符串。但我需要像通常使用`URL.`符号（例如）一样引用查询字符串值。我该怎么做呢？

我已经尝试了下面的代码，但似乎无法解析结构中的值：

```
<cfscript>
    myStruct = structNew();
    for(i=1; i LTE listLen(decrypted,'&');i=i+1) {
        structInsert(myStruct, i, listGetAt(decrypted,i,'&'));
    }
</cfscript> 
```

任何帮助表示赞赏。

**更新：（如果我不清楚，请提供更多信息）**

我正在`CFLOCATION`使用加密的查询字符串发送数据。只是为了向用户隐藏一些不相关的信息。我想要做的是在解密后使用查询字符串信息。但是我不能再使用 ColdFusion`URL`结构了。所以我问我如何解析解密字符串中的信息，以便我可以使用它（例如，在 SQL 查询的 where 子句中或只是显示在页面上）。

说我的解密字符串是`update=0&balance=1145.00`

我该如何使用类似的东西`<cfoutput>#update#</cfoutput>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:41:35.380

如果`str`是您的查询字符串：

```
<CFSET str = "asdf=1&asd&as=3" />

<CFSET mystruct = structnew() />
<CFLOOP list="#str#" delimiters="&" index="i">
    <CFSET key = listfirst(i,"=") />
    <CFIF listlen(i,"=") GT 1>
        <CFSET value = listlast(i,"=") />
    <CFELSE>
        <CFSET value = "" />
    </CFIF>
    <CFSET mystruct[key] = value />
</CFLOOP> 
```

# c++ - g++ 不会编译我的复杂模板实例化

> ID：11189174
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:13:32.077
> 
> 标签：c++, templates, mingw, gnu

我使用 MinGW 最新版本编译以下代码。我收到以下消息

```
 y:/bbom/source/om0/basic/test.cpp: In static member function 'static void somecl
ass::init(class_object*)':
y:/bbom/source/om0/basic/test.cpp:68:50: error: no matching function for call to
 'class_object::add_method(void (&)(object*, arch&))'
y:/bbom/source/om0/basic/test.cpp:68:50: note: candidate is:
y:/bbom/source/om0/basic/test.cpp:27:54: note: template<class p_function> void c
lass_object::add_method(typename p_function::funcion_type)
make.exe: *** [y:/bbom/bin/om0/basic/test.a] Error 1 
```

这是我的代码从这个问题不需要的所有东西上脱下衣服

```
#include <exception>

class exception : public std::exception
{
    public:
    exception() {}
    exception(const exception &);
    ~exception() throw() {}
    virtual const char *what() const throw();
};

typedef unsigned id, version;
class class_object;

class object
{
    public:
    virtual ~object() {}
    void *get_method(id);
    class_object *get_class_object();
};

class class_object : public object
{
    public:
    template <class p_function>
        void add_method(typename p_function::funcion_type p) 
            {add_method2((void *)p, p_function::function_id);}
    void add_method2(void *, id);
};

template <typename p_func, id p_id>
class function
{
    public:
    typedef p_func function_type;
    enum {function_id = p_id, };
    function(object *p) {m_func = (p_func)p->get_method(p_id);}
    p_func m_func;
};

class iface : public object
{
    public:
    iface(object *p) : m_object(p) {}
    static void init(class_object *) {}
    object *m_object;
};

class arch;
class archivable : public iface
{
    public:
    typedef void (*archive_func_type)(object *, arch &);
    typedef function<archive_func_type, 0x5afeb287> archive_type;
    archivable(object *);
    archive_type archive;
};

class someclass : public object
{
    public:
    static void archive(object *, arch &)
    {
    }
    static void init(class_object *p)
    {
        p->add_method<archivable::archive_type>(archive);
        // the compiler says this call cannot be matched to 
        // add_method declared in class 'class_object'
    }
}; 
```

我在 class_object::add_method<...>() 中调用模板方法有什么问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:18:22.390

看来您`function_type`在`funcion_type`第 27 行输入错误`test.cpp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:21:41.053

错字。 `funcion_type`应该是`function_type`。

# wcf - WCF：传输文件时 tcp 服务超时

> ID：11189187
> 
> 赞同：1
> 
> 时间：2012-06-25T12:14:04.043
> 
> 标签：wcf, tcp

我有一个 WCF 服务，它使用 tcp 进行通信。当我尝试将文件从客户端传输到服务时，如果我在客户端和服务中的配置文件使用 localhost 作为 url 的同一台计算机中执行此操作，我没有任何问题。

但是，如果我在客户端位于局域网中的其他计算机时尝试执行相同操作，则会出现以下异常：

System.TimeoutException：发送到 net.tcp://192.168.1.5:7997/CMMSHost 的此请求操作未在配置的超时 (00:01:00) 内收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

但是，如果我尝试使用其他操作，例如搜索信息或添加寄存器以及任何其他类型的操作，则应用程序可以正常工作。

所以问题出在文件的传输上。

在服务中我使用这个配置：

```
<endpoint address=""
                  binding="netTcpBinding"
                  bindingConfiguration="tcpBinding"
                  name="NetTcpBindingEndpoint"
                  contract="GTS.CMMS.Service.IService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint contract="IMetadataExchange" binding="mexTcpBinding" address="net.tcp://localhost:5000/mex" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="behaviorConfig">
          <!--
          <serviceMetadata httpGetEnabled="true" />-->
          <!--Necesario para poder enviar excepciones desde el servicio al cliente.-->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100" />
          <serviceMetadata/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <netTcpBinding>
        <binding name="tcpBinding" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Buffered" closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100">
          <security mode="None"/>
          <readerQuotas maxArrayLength="67108864" maxBytesPerRead="67108864" maxStringContentLength="67108864"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel> 
```

在客户端：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_IService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
          hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288"
          maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:20:00"
            enabled="true" />
          <security mode="None">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <messa 
```

ge clientCredentialType="Windows" />

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:26:58.860

您的应用程序是否适用于 kbs 中的小文件？如果是，则对于较大大小的文件，请使用 transferMode="Streamed" 而不是 transferMode="Buffered"。您必须相应地更改配置。

如果您的应用程序无法处理更小的文件，则说明您的应用程序存在问题。构建您的应用程序并重新生成代理并尝试调试您的应用程序。

您也可以参考这些链接 [http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP) http://www.codeproject.com/Articles/33825/WCF-TCP基于文件服务器

# android - 如何在android中保存矢量对象？

> ID：11189192
> 
> 赞同：0
> 
> 时间：2012-06-25T12:14:21.963
> 
> 标签：android, file, vector, save

我一直在寻找很多，但无法做到这一点。我创建了一个类“VectorEx”，扩展了“Vector”，用于存储两种方法，一种用于保存向量，另一种用于加载它。我知道我必须使用 FileOutputStream 和 openFileInput() 但我无法创建文件。我对 android 编程还是很陌生，所以很感谢一个简单的解释。

```
public class VectorEx extends Vector<Subject> {
public void save(String name, Context ctx) {
    try {
        File file = new File(name);
        if(!file.exists()) {
            file.createNewFile();
        }
        FileOutputStream fos = ctx.openFileOutput(name, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(this);
        oos.close();
    }
    catch(IOException e) {
        e.printStackTrace();
    }
}

public void load(String name, Context ctx) {
    try {
        FileInputStream fis = ctx.openFileInput(name);
        ObjectInputStream ois = new ObjectInputStream(fis);
        ois.readObject();
    }
    catch(IOException e) {
        e.printStackTrace();
    }
    catch(ClassNotFoundException e) {
        e.printStackTrace();
    }
}
} 
```

这是我上次尝试使用的代码。从我对 LogCat 的理解来看，这似乎是一个“只读文件系统”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:16:50.110

您的 AndroidManifest 中可能缺少这些权限之一：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:27:02.463

```
here are the vector constucts:
Vector( ) 
Vector(int size) 
Vector(int size, int incr) 
Vector(Collection c)

//Demonstrate various Vector operations. 
import java.util.*; 
class VectorDemo { 
    public static void main(String args[]) { 
        // initial size is 3, increment is 2 
        Vector v = new Vector(3, 2); 
        System.out.println("Initial size: " + v.size()); 
        System.out.println("Initial capacity: " + 
        v.capacity()); 

        v.addElement(new Integer(1)); 
        v.addElement(new Integer(2)); 
        v.addElement(new Integer(3)); 
        v.addElement(new Integer(4)); 
        System.out.println("Capacity after four additions: " + 

        v.capacity()); 
        v.addElement(new Double(5.45)); 
        System.out.println("Current capacity: " + 
        v.capacity()); 

        v.addElement(new Double(6.08)); 
        v.addElement(new Integer(7)); 
        System.out.println("Current capacity: " + 
        v.capacity()); 

        v.addElement(new Float(9.4)); 
        v.addElement(new Integer(10)); 
        System.out.println("Current capacity: " + 
        v.capacity()); 

        v.addElement(new Integer(11)); 
        v.addElement(new Integer(12)); 
        System.out.println("First element: " + 
        (Integer)v.firstElement()); 
        System.out.println("Last element: " + 
        (Integer)v.lastElement()); 

        if(v.contains(new Integer(3))) 
            System.out.println("Vector contains 3."); 
            // enumerate the elements in the vector. 
            Enumeration vEnum = v.elements(); 
            System.out.println("\\nElements in vector:"); 
            while(vEnum.hasMoreElements()) 
                System.out.print(vEnum.nextElement() + " "); 
                System.out.println(); 
            } 
        }
}

The output from this program is shown here:

Initial size: 0 
Initial capacity: 3 
Capacity after four additions: 5 
Current capacity: 5 
Current capacity: 7 
Current capacity: 9 
First element: 1 
Last element: 12 
Vector contains 3\. 
Elements in vector: 
1 2 3 4 5.45 6.08 7 9.4 10 11 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:38:21.787

我很确定您正在尝试写入根目录。您可能希望写入应用程序的目录或外部存储（如果有），而不是根目录。

# c++ - 动态数组与 STL 向量的确切区别？

> ID：11189198
> 
> 赞同：12
> 
> 时间：2012-06-25T12:15:03.493
> 
> 标签：c++

动态数组和向量之间的确切区别是什么。对我来说这是一个面试问题。

1.  我说两者都有顺序记忆。

2.  向量可以在代码中的任何位置增大。然后他说，即使是动态数组也可以在创建后扩大规模。

3.  我说向量是没有错误的，因为它在标准库中。他说他将提供动态数组的 .so 文件，该文件没有错误并且具有与 STL 相当的所有品质。

我很困惑，没有回答确切的区别。当我在互联网上搜索时，我只看到了上述声明。

有人可以解释一下确切的区别吗？面试官对我的期望是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T12:23:08.580

> 他说他将提供动态数组的 .so 文件，该文件没有错误并且具有与 STL 相当的所有品质。

如果他的动态数组类和他的动态数组类一样`std::vector`（即：它实现了 RAII 以自行清理，可以增长和缩小以及其他任何`std::vector`功能），那么`std::vector`与他的动态数组类相比，只有一个主要优势：

`std::vector`是***标准化***的，***每个人都知道***。如果我`std::vector`在某段代码中看到 a，我确切地知道它的作用以及应该如何使用它。但是，如果我看到 a `my::dynamic_array`，我根本不知道。我需要查看它的文档，甚至——喘不过气来！—*执行*以查明是否`my_dynamic_array::resize()`与`std::vector::resize()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T13:57:26.413

这里很大程度上取决于他所说的“动态数组”是什么意思。大多数人的意思是内存使用array-new分配并使用array-delete释放。`std::vector`如果这就是这里的意图，那么根本不可能拥有与此相提并论的品质。

原因很简单：`std::vector`例行分配的内存块大于容纳当前存储的元素数量所需的内存块。然后它根据需要在该内存中构造对象以进行扩展。然而，使用array-new，您别无选择——您正在分配一个对象数组，因此如果您为（例如）100 个对象分配*空间*，最终会在该空间中（立即）创建 100 个对象。它根本没有提供缓冲区，其中一部分包含真实对象，另一部分只是普通内存，不包含任何内容。

我想如果你想延长一点，可以模仿`std::vector`并仍然使用array-new分配空间。为此，您只需分配一个 数组`char`，然后使用放置`new`在该原始内存空间中创建对象。这允许几乎相同的东西`std::vector`，因为它*几乎*是相同的东西`std::vector`。我们仍然缺少一个（潜在的）间接级别——`std::vector`实际上是通过一个 Allocator 对象分配内存，因此您可以准确更改它分配原始内存的方式（默认情况下它使用`std::allocator<T>`, 哪个使用`operator new`，但如果您愿意，您可以实际上写了一个会使用的分配器`new char[size]`，虽然我无法想象你为什么会这样）。

当然，您也可以编写动态数组来使用分配器对象。那时，出于所有实际目的，您刚刚`std::vector`以（可能）新名称进行了重新发明。在这种情况下，@sbi 仍然是正确的：仅仅因为它没有标准化就意味着它仍然缺少主要品质之一`std:::vector`——标准化的品质，并且每个了解 C++ 的人都知道。但是，即使没有这个，我们也必须将“动态数组”这个短语延伸到（我认为，超越）临界点，以获得与 相同的质量`std::vector`，即使我们忽略标准化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-05T01:52:57.377

我希望他们希望您谈论忘记使用 operator delete[] 删除动态数组的陷阱，然后当他们试图帮助您时自己弄糊涂了；将动态数组实现为普通类没有多大意义，因为它包含元素类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:17:27.753

当向量超出范围时，为向量分配的数组内存被释放，以防向量在堆栈上声明（后备数组将在堆上）。

```
void foo() {
  vector<int> v;

  // ... method body

  // backing array will be freed here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-21T18:15:11.627

它在这里说：“在内部，向量使用动态分配的数组来存储它们的元素。” 向量的基本概念是动态分配的数组。

> > [http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-22T20:14:44.600

也许当您想要调整大小时，您会通过复制过程将动态数组复制到一个新的动态数组，但是您可以根据您对进入数组的数据的了解来控制它何时执行此操作。

向量使用相同的过程，但向量不知道它是否会在以后增长，因此它可能会为可能的大小增长分配额外的存储空间，因此与动态相比，它可能会消耗更多的内存空间来管理自身数组。

所以，我想说不同之处在于在管理它的大小时使用向量不是什么大问题，当你宁愿自己调整大小时，你会使用动态数组。

# javascript - 了解 Javascript 中的功能范围、`this` 和 OO 设计模式

> ID：11189199
> 
> 赞同：0
> 
> 时间：2012-06-25T12:15:07.443
> 
> 标签：javascript, oop, design-patterns

一段时间以来，我一直在使用 objectOne 的设计模式，如下所示。我不记得我在哪里捡到它了。我试图找到它，但找不到。也许它是我读到的一些东西的混合体。今天我发现它有很大的缺陷，因为它`this`是解析到窗口对象，使所有公共方法都是全局的。我的印象是，当`this`在函数中使用时，它会引用函数本身，而不是全局窗口对象。我想不是这样吧？有人可以解释我遗漏的东西或指向我解释它的资源吗？我也有兴趣修复这种模式或找到一个没有全局方法名称问题的类似模式。我想如果我会使用除 , 以外的`this`变量`fn`，然后我返回它，然后它会解决问题。提前感谢您对这个问题的任何帮助，抱歉它有点含糊。

JS 小提琴：http: [//jsfiddle.net/nLL8y/3/](http://jsfiddle.net/nLL8y/3/)

```
myapp = {};

myapp.objectOne = function() {
    var that = this,
        p = {};

    this.public = function() {
        console.log(this);
    };

    p.private = function() {};

    return this;
}();

myapp.objectTwo = {
    public: function() {
        console.log(this);
    },

    notPrivate: function() {}
};

myapp.objectThree = function() {
    var fn = {},
        p = {};

    fn.public = function() {
        console.log(this);
    };

    p.private = function() {};

    return fn;
}();

//creates global functions
myapp.objectOne.public();
//doesn't allow private
myapp.objectTwo.public();​
//seems to work
myapp.objectThree.public();​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:24:00.713

`myapp`在您的示例中用作命名空间。`objectOne`并且`objectTwo`是构造函数，所以它们应该以大写字母开头。但是您最大的问题是直接使用方法而不是创建对象：

```
var myapp = {};

myapp.ObjectOne = function() {
    this.public = function() {
        console.log(this);
    };
    var private = function() {};
};

myapp.ObjectTwo = function() {
    this.public = function() {
        console.log(this);
    },

    this.notPrivate = function() {}
};

var o1 = new myapp.ObjectOne();
o1.public();

var o2 = new myapp.ObjectTwo();
o2.public(); 
```

# winforms - 我们可以将 ElementHost 的大小与其子控件绑定，以便我们可以在运行时平滑地调整它的大小

> ID：11189200
> 
> 赞同：0
> 
> 时间：2012-06-25T12:15:09.857
> 
> 标签：winforms, c#-4.0

我有一个用户控件，我正在添加到 ElementHost 中的 WinForms 面板。我正在运行时调整用户控件的大小，并希望将其大小与父 ElementHost 绑定。这可能吗？如果有请提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:13:25.303

`DockStyle.Fill`为`ElementHost`' 的属性设置`Dock`属性。

# php - php soapserver返回更好的可读关联数组

> ID：11189201
> 
> 赞同：0
> 
> 时间：2012-06-25T12:15:12.143
> 
> 标签：php, soap, soapserver

我正在使用 PHP SOAPSERVER 类。

作为响应，我发送关联 php 数组：

```
function getItems()    
{    
   ...
   $items[] = Array("itemID" =>$itemID,"itemName"=>$itemName);
   return $items;
 } 
```

SOAP 返回是这样的：

```
...
<Items>
<item type="Map">
    <item>
        <key type="string">
            itemID
        </key>
        <value type="string">
            17558
        </value>
    </item>
    <item>
        <key type="string">
            itemName
        </key>
        <value type="string">
            I-17558
        </value>
    </item>
</item>
</Items>
... 
```

这样的回报很难为人类分析（给定更大的数组）。首选形式是这样的：

```
 ...
<Items>
    <item>
        <itemID>17558</itemID>
        <itemName>I-17558</itemName>
    </item>
    <item>
        <itemID>17559</itemID>
        <itemName>I-17559</itemName>
    </item>
</Items>
    ... 
```

这样的 SOAP 返回是否可能（不更改返回类型 - 数组）？如何？

我刚刚开始使用 SOAP，大多数教程都展示了如何返回简单类型，如字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:52:49.443

发送一个 stdclass 对象，而不是发送一个关联数组。

例子 ：

```
$return = new stdclass;
$return->ItemID = 1;
$return->ItemName = 'foo';

return $return; 
```

那么 SOAP 结果将如您所愿！

# iphone - 检测图像中的空白区域

> ID：11189203
> 
> 赞同：0
> 
> 时间：2012-06-25T12:15:15.970
> 
> 标签：iphone

![这是我在我的应用程序中使用的示例图像](../Images/661d20bafd65cb96c7c8a8d12c2dfc64.png)

我有一个图像，其中有一些空白区域。我想要的是，当用户触摸这些空白区域时，应该会弹出一个窗口，要求用户选择可以添加到该区域的图像。我只是这样做了在空白区域的背景中添加一个按钮。这适用于一些图像。由于每个图像的空白区域的位置都不同，这不是一个好主意。所以 ios 中是否有任何规定来检测空白区域和从而使它们像一个按钮。在图像中，您可以看到文本“将您的图像放在这里”。我希望该区域像按钮一样工作。任何帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T12:47:34.917

您将需要一些与每个图像相关联的元数据。数据将告诉您每个按钮的放置位置。我怀疑您是否可以找到一些代码来自动检测按钮的放置位置。

# javascript - Facebook JavaScript 不适用于 IE，但适用于 Firefox 和 Chrome

> ID：11189208
> 
> 赞同：0
> 
> 时间：2012-06-25T12:15:29.203
> 
> 标签：javascript, facebook, internet-explorer, facebook-graph-api

我下面的脚本在 Chrome 和 Firefox 上完美运行，但不知何故不适用于 IE。该代码是检查用户是否是我的页面的粉丝。该脚本既不重定向到另一个页面（是粉丝）也不显示likebox（不是粉丝）。

任何想法？我对 facebook 应用程序和 javascript 非常陌生。对不起我的菜鸟。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<meta http-equiv="Cache-Control" content="no-cache" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Redirecting...please wait</title>

<script type="text/javascript" src="../../src/js/jquery-1.7.1.min.js"></script>  
<script type="text/javascript" src="../../src/js/all.js"></script>  
<style type="text/css">
  div#container_notlike, div#container_like {
    display: none;
  }
</style>

</head>

<body>

<div id="fb-root"></div>
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'APP_ID', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    //if like botton click, reflesh page
    FB.Event.subscribe('edge.create', 
        function(href, widget) {
        //alert("Like button clicked");
        window.location.reload();
    });

    FB.getLoginStatus(function(response) {
      var page_id = "PAGE_ID";
      if (response && response.authResponse) {
        var user_id = response.authResponse.userID;
        //var accessToken = response.authResponse.accessToken;
        var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
        FB.Data.query(fql_query).wait(function(rows) {
          if (rows.length == 1 && rows[0].uid == user_id) {
            console.log("LIKE");
            //alert ("Like");
            location.href="https://www.example.com/apps";

          } else {
            console.log("NO LIKEY");
            $('#container_notlike').show();

          }
        });
      } else {
        FB.login(function(response) {
          if (response && response.authResponse) {
            var user_id = response.authResponse.userID;
            var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
            FB.Data.query(fql_query).wait(function(rows) {
              if (rows.length == 1 && rows[0].uid == user_id) {
                console.log("LIKE");
                //alert ("Like");
                location.href="https://www.example.com/apps";
              } else {
                console.log("NO LIKEY");
                $('#container_notlike').show();

              }
            });
          } else {
            console.log("NO LIKEY");
            $('#container_notlike').show();

          }
        }, {scope: 'user_likes'});
      }
    });
  };

  // Load the SDK Asynchronously
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<center>
<div id="container_notlike">
          <fb:like-box href="http://www.facebook.com/example" width="292" height="62" show_faces="false" stream="false" header="false" >
          </fb:like-box>

    </div>
</div>
</center>

<div id="container_like">
  YOU LIKE ME :)
</div>

</body>
</html> 
```

仅供参考：我正在使用 IE9，并且已经将 javascript 更新到最新版本。我已经打开 javascript 在 IE9 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:37:20.123

这是什么？

```
<script type="text/javascript" src="../../src/js/all.js"></script> 
```

如果是 FB SDK，请尝试删除该行。

# json - jquery JSON节点删除

> ID：11189211
> 
> 赞同：1
> 
> 时间：2012-06-25T12:15:38.470
> 
> 标签：json, jqgrid

我正在用 jax-rs 开发一个 web 应用程序，我用 jquery 做了一个休息客户端。我将结果作为 json 或 xml，然后将它们显示到 html 表。为了方便表格，我使用 JqGrid 库。我的问题是，例如 Jqgrid 想要像下面这样的 json 对象；

```
[
        {yaziNo:"1",yazar:"abc",yazi:"test",tarih:"2007-10-01"}, 
        {yaziNo:"2",yazar:"cdfe",yazi:"test2",tarih:"2007-10-01"},
        {yaziNo:"3",yazar:"cdfe",yazi:"test3",tarih:"2007-10-01"}, 
        {yaziNo:"4",yazar:"abc",yazi:"test",tarih:"2007-10-01"}, 
        {yaziNo:"5",yazar:"cdfe",yazi:"test2",tarih:"2007-10-01"}, 
        {yaziNo:"6",yazar:"abc",yazi:"test3",tarih:"2007-10-01"},
        {yaziNo:"7",yazar:"cdfe",yazi:"test",tarih:"2007-10-01"},
        {yaziNo:"8",yazar:"abc",yazi:"test2",tarih:"2007-10-01"}, 
        {yaziNo:"9",yazar:"abc",yazi:"test3",tarih:"2007-10-01"}     ] 
```

但是，从我的休息服务器返回的 JSON 如下所示；

```
{"yazi":
[{"tarih":"26.01.2012","yazar":"sdasdadsadasda","yazi":"gdfgdfgd","yaziNo":"1756"},
{"tarih":"26.01.2012","yazar":"sdasdadsadasda","yazi":"gdfgdfgd","yaziNo":"1755"},
{"tarih":"26.01.2012","yazar":"sdasdadsadasda","yazi":"gdfgdfgd","yaziNo":"1754"},
{"tarih":"26.01.2012","yazar":"sdasdadsadasda","yazi":"gdfgdfgd","yaziNo":"1753"},
{"tarih":"26.01.2012","yazar":"sdasdadsadasda","yazi":"gdfgdfgd","yaziNo":"1752"}]
} 
```

我怎样才能删除“yazi”节点但保留在里面。

编辑：

```
jQuery("#list27").jqGrid({
    url:'http://localhost:43842/KodcuComRESTful/kodcuRS/yazilar',
    datatype: "json",
    height: 255,
    width: 700,
    jsonReader: {root: "yazi", repeatitems: false},
    colNames:['Yazi No','Yazar', 'Yazi', 'Tarih'],
    colModel:[
        {name:'yaziNo',index:'yaziNo', width:80, sorttype:"int"},
        {name:'yazar',index:'yazar', width:180}, 
        {name:'yazi',index:'yazi', width:370}, 
        {name:'tarih',index:'tarih', width:100, align:"right",sortype:"date"}
    ],
    rowNum:10,
    rowTotal: 2000,
    rowList : [20,30,50],
    loadonce:true,
    mtype: "GET", 
    rownumbers: true,
    rownumWidth: 40, 
    gridview: true, 
    pager: '#pager27',
    sortname: 'yaziNo',
    viewrecords: true,
    sortorder: "asc",
    caption: "Loading data from server at once"
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:27:38.097

我认为从服务器返回的数据没有问题。您应该只使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)的 jsonReader 选项，它会通知 jqGrid 如何从服务器响应中读取数据。例如

```
jsonReader: {root: "yazi", repeatitems: false} 
```

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/RahmanUsta.htm)使用您发布的确切 JSON 数据，并在网格中显示结果。我使用您发布和替换的 JavaScript 代码只是`height: 255`为了`height: "auto"`获得更紧凑的结果。

![在此处输入图像描述](../Images/168ebf51488ee987ecb6d43a6f878352.png)

我在您的代码中看到的唯一问题是完整 URL: 的使用`url:'http://localhost:43842/KodcuComRESTful/kodcuRS/yazilar'`。由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，无法从同一站点和端口的另一个源获取每个 Ajax 的 JSON 数据。因此，在使用的情况下，`datatype: "json"`您应该始终使用*相对*URL 路径`url:'/KodcuComRESTful/kodcuRS/yazilar'`，例如。

# mysql - 获取每个月插入的记录数

> ID：11189213
> 
> 赞同：-3
> 
> 时间：2012-06-25T12:15:58.410
> 
> 标签：mysql

获取给定月份范围内的每个月的预订计数和相应的月​​份名称。假设 1 月我添加了 5 条记录，2 月 6 日，3 月 8 日

我应该得到每个月记录计数和相应月份名称的数组结果

```
array("jan"=>5,"feb"=>6,"mar"=>8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:24:42.610

假设我创建表并将值插入为

```
create table mytable (bookingID INT, myDate timestamp);

insert into mytable values
(1,'2012-02-21 12:12:12'),
(2,'2012-02-25 12:12:12'),
(3,'2012-02-24 12:12:12'),
(4,'2012-02-23 12:12:12'),
(5,'2012-02-22 12:12:12'),
(6,'2012-04-21 12:12:12'),
(7,'2012-03-21 12:12:12'); 
```

然后得到你想要的，使用下面的查询

```
SELECT MONTH(myDate), COUNT(MONTH(myDate)) 
FROM mytable
GROUP BY MONTH(myDate); 
```

如果您希望***月份名称***为**January**，请使用

```
SELECT MONTHNAME(myDate), COUNT(MONTH(myDate)) 
FROM mytable
GROUP BY MONTH(myDate); 
```

## [演示](http://sqlfiddle.com/#!2/cb50f/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:24:41.023

```
SELECT monthName, records FROM tableName WHERE month >= 1 AND month <= 12 
```

这将选择所有月份 (1-12)。monthName 是月份的名称（假设每行是一个月，所以 12 行），records 是每行（每个月）中的记录数，tableName 是你的表的名称，month 是整数表示月 (1-12)

# html - 第508章，龙可读表

> ID：11189214
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:16:00.253
> 
> 标签：html, html-table, section508

有谁知道如何使下表龙可读？这是在 rowspan = 2 中具有行数的表。

也许我把标题放在了错误的地方。数字是一行的关键。

现有的表结构是否符合 508 标准，还是我需要其他东西？

```
 <table class="fullpage_brdr1"; id="complextable"?; summary="Currently Open"; style="text-align: center";>
    <thead>
                    <tr bgcolor="Gray"; class="sortLinks">
                        <th id ="h1" ?>
                            A
                        </th>
                         <th id = "h2" ?>
                            B
                        </th>
                         <th id = "h3" ?>
                            Region
                        </th>
                          <th id = "h4" ?>
                            C
                        </th>
                          <th id = "h5" ?>
                            D
                        </th>
                         <th id = "h6" ?>
                            E
                        </th>
                         <th id = "h7" ?>
                            F
                        </th>
                         <th id = "h8" ?>
                            G
                        </th>
                         <th id = "h9" ?>
                            H
                        </th>
                         <th id = "h10" ?>
                            I
                        </th>
                    </tr>
          </thead>          
                    <tbody title = "row">
                    <tr>
                        <td rowspan="2"; id="number">
                            999999999
                        </td>
                        <td rowspan="2">
                            Storage A
                        </td>
                        <td rowspan="2">
                            Boston
                        </td>

            <th id="expected"> Expected </th>

                            <th headers="number expected h5"> 50 </th>
                            <th headers="number expected h6"> 6,000 </th>
                            <th headers="number expected h7"> 5,000 </th>
                            <th headers="number expected h8"> $25,000 </th>

                            <td rowspan="2">
                            Partially Complete
                        </td>
                        <td rowspan="2">
                            This is test section for Remarks
                        </td>

                            <tr>           
                             <th id="processed"> Processed </th>
                            <th headers="EIN processed h5"> 50 </th>
                            <th headers="EIN processed h6"> 3,000 </th>
                            <th headers="EIN processed h7"> 4,000 </th>
                            <th headers="EIN processed h8"> $20,000 </th>

                            </tr>
                        <tr>
                        <td rowspan="2"; id="number">
                            111111111
                        </td>
                        <td rowspan="2">
                            Storage B
                        </td>
                        <td rowspan="2">
                            Boston
                        </td>

            <th id="expected"> <a href="http://www.google.com">Expected</a> </th>

                            <th headers="number expected h5"> 70 </th>
                            <th headers="number expected h6"> 5,000 </th>
                            <th headers="number expected h7"> 5,000 </th>
                            <th headers="number expected h8"> $35,000 </th>

                        <td rowspan="2">
                            Partially Complete
                        </td>
                        <td rowspan="2">
                            This is test section for Remarks
                        </td>

                            <tr>           
                             <th id="processed"> <a href="http://www.google.com">Processed</a> </th>
                            <th headers="number processed h5"> 50 </th>
                            <th headers="number processed h6"> 2,000 </th>
                            <th headers="number processed h7"> 5,000 </th>
                            <th headers="number processed h8"> $40,000 </th>
                            </tr>
                </tbody>
     </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:08:15.527

你有太多`<th>`的在那里，这是问题的一半。一些辅助技术不喜欢合并单元格（rowspan 和 colspan）。

尝试：

```
<table class="fullpage_brdr1" id="complextable" summary="Currently Open" style="text-align: center">
<thead>
  <tr bgcolor="Gray" class="sortLinks">
    <th id ="h1"> A </th>
    <th id = "h2"> B </th>
    <th id = "h3"> Region </th>
    <th id = "h4"> C </th>
    <th id = "h5"> D </th>
    <th id = "h6"> E </th>
    <th id = "h7"> F </th>
    <th id = "h8"> G </th>
    <th id = "h9"> H </th>
    <th id = "h10"> I </th>
  </tr>
</thead>
<tbody>
  <tr>
    <td rowspan="2" id="number"> 999999999 </td>
    <td rowspan="2"> Storage A </td>
    <td rowspan="2"> Boston </td>
    <th id="expected"> Expected </th>
    <td headers="number expected h5"> 50 </td>
    <td headers="number expected h6"> 6,000 </td>
    <td headers="number expected h7"> 5,000 </td>
    <td headers="number expected h8"> $25,000 </td>
    <td rowspan="2"> Partially Complete </td>
    <td rowspan="2"> This is test section for Remarks </td>
  </tr>
  <tr>
    <th id="processed"> Processed </th>
    <td headers="EIN processed h5"> 50 </td>
    <td headers="EIN processed h6"> 3,000 </td>
    <td headers="EIN processed h7"> 4,000 </td>
    <td headers="EIN processed h8"> $20,000 </td>
  </tr>
  <tr>
    <td rowspan="2"; id="number"> 111111111 </td>
    <td rowspan="2"> Storage B </td>
    <td rowspan="2"> Boston </td>
    <th id="expected"> <a href="http://www.google.com">Expected</a> </th>
    <td headers="number expected h5"> 70 </td>
    <td headers="number expected h6"> 5,000 </td>
    <td headers="number expected h7"> 5,000 </td>
    <td headers="number expected h8"> $35,000 </td>
    <td rowspan="2"> Partially Complete </td>
    <td rowspan="2"> This is test section for Remarks </td>
  </tr>
  <tr>
    <th id="processed"> <a href="http://www.google.com">Processed</a> </th>
    <td headers="number processed h5"> 50 </td>
    <td headers="number processed h6"> 2,000 </td>
    <td headers="number processed h7"> 5,000 </td>
    <td headers="number processed h8"> $40,000 </td>
  </tr>
</tbody>
</table> 
```

# mailcore - 如何在 iOS 的 MailCore 中使用 messageListWithFetchAttributes？

> ID：11189215
> 
> 赞同：0
> 
> 时间：2012-06-25T12:16:04.383
> 
> 标签：mailcore

如标题所述，此功能没有文档或示例。谁能告诉我如何使用它？仅供参考，我想获取带有属性的消息，例如 uid 大于 xxxx.Thx 的高级消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:15:35.083

我终于使用`messageListWithFetchAttributes`获取所有消息，然后使用uid对列表进行排序，然后我可以获取uid大于xxxxx的消息。即使它不是一种有效的方式，但它确实有效。

# visual-studio-2010 - 在 Windows 7 中安装 sharepoint Foundation 2010 时出现问题。错误：“您的系统不支持此安装包的语言”

> ID：11189218
> 
> 赞同：3
> 
> 时间：2012-06-25T12:16:10.073
> 
> 标签：visual-studio-2010, windows-7, sharepoint-2010

按照[http://msdn.microsoft.com/en-us/library/ee554869(office.14).aspx](http://msdn.microsoft.com/en-us/library/ee554869(office.14).aspx)上的文章，我尝试在 Windows 7（64 位）机器上设置 SharePoint 2010 的开发环境。安装所有提到的先决条件并启用 Windows 功能后，我开始安装 SharePoint 2010。我有 SharePoint Foundation 2010，当我运行 setup.exe 时出现错误：

> “您的系统不支持此安装包的语言”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:28:41.907

我建议你通过这个[SharePoint 2010 “你的系统不支持这个安装包的语言”](http://techblurt.com/2009/11/30/sharepoint-2010-the-language-of-this-installation-package-is-not-supported-by-your-system/)

[按照说明](http://msdn.microsoft.com/en-us/library/ee554869%28office.14%29.aspx)工作。无需重复……但是这个所谓的“不支持的语言”问题突然出现了……好吧，我应该真的有 RTFM，在运行配置向导之前尝试[安装修补程序。](https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=23806&wa=wsignin1.0)

更多参考：
[在非服务器操作系统中安装 Sharepoint 2010](http://www.codeproject.com/Articles/155805/Install-Sharepoint-2010-in-a-non-Server-OS)

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T06:29:42.447

使用 WinRAR 而不是 windows 默认解压器解压缩 zip 文件。它对我有用。

# objective-c - 由另一个类引用主视图控制器属性

> ID：11189236
> 
> 赞同：0
> 
> 时间：2012-06-25T12:17:20.010
> 
> 标签：objective-c, ios5

我使用 Xcode 4 为 iPad 开发一个项目。

我有一个带有许多 UITextField 的主视图控制器。

TextFieldDelegate 是单独文件中的单独类。

如何从 TextFieldDelegate 引用主视图控制器的属性（到 UITextField）（例如将值分配给双精度值）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:38:30.333

在大多数情况下，如果您想使用单独的委托，您不需要比传递给委托的信息（方法的参数）更多的信息。但是，如果您不想将 MainViewController 用作 UITextField 的委托，则可以在 MainViewController 实例中初始化 TextFieldDelegate 并将其传递给 MainViewController 实例。

例如，您可以：

```
#import "MainViewController.h"
@interface TextFieldDelegate<UITextFieldDelegate> {
  MainViewController* mainViewController;
}
@property(nonatomic,retain) MainViewController* mainViewController;
-(id)initWithController:(MainViewController*)controller;
@end  

@implementation TextFieldDelegate
@synthesize mainViewController;
-(id)initWithController:(MainViewController*)controller {
  if(self = [super init]) {
    //some stuff
    self.mainViewController = controller;
  }
  return self;
}
@end 
```

然后在您的 MainViewController 中：

```
TextFieldDelegate tfd = [[TextFieldDelegate alloc] initWithController:self]; 
```

您只需要将 TextFields 的委托设置为 tfd，并且您应该能够从 TextFieldDelegate 实例中引用 MainViewController 属性。只要将 MainViewController 实例发送到 TextFieldDelegate 实例，也可以在其他地方启动它。

编辑：woups忘记了一些'*'

# php - iOS 到 PDO PHP & MySQL

> ID：11189237
> 
> 赞同：0
> 
> 时间：2012-06-25T12:17:23.633
> 
> 标签：php, mysql, objective-c, ios, pdo

我正在使用 POST 将 JSOn 发送到 PHP Web 服务

JSON：

```
{"mDel":"NULL","mType":"text","mUserId":4,"lLong":"(null)","mPrivacy":1,"lLat":"(null)","mDate":"2012-13-25 13:13:25","mHeight":"NULL","mDescription":"Test","mPhoneUniqueKey":"425062012131325","mMedia":"4_2_20121325011325.png","lName":"Apple Store, San Francisco"} 
```

PHP：

```
$request = Slim::getInstance()->request();
$moment = json_decode($request->getBody());
$sql = "INSERT INTO mymo_moment (profile_id, description, media, locationName, lat, long, mDate, privacy, type, iPhoneUniqueID, deleted, height) 
        VALUES (:mUserId, :mDescription, :mMedia, :lName, :lLat, :lLong, :mDate, :mPrivacy, :mType, :mPhoneUniqueKey, :mDel, :mHeight)";
try {
    $db = getConnection();
    $stmt = $db->prepare($sql);
    $stmt->bindParam(":mUserId", $moment->mUserId);
    $stmt->bindParam(":mDescription", $moment->mDescription);
    $stmt->bindParam(":mMedia", $moment->mMedia);
    $stmt->bindParam(":lName", $moment->lName);
    $stmt->bindParam(":lLat", $moment->lLat);
    $stmt->bindParam(":lLong", $moment->lLong);
    $stmt->bindParam(":mDate", $moment->mDate);
    $stmt->bindParam(":mType", $moment->mType);
    $stmt->bindParam(":mPrivacy", $moment->mPrivacy);
    $stmt->bindParam(":mPhoneUniqueKey", $moment->mPhoneUniqueKey);
    $stmt->bindParam(":mDel", $moment->mDel);
    $stmt->bindParam(":mHeight", $moment->mHeight);
    $stmt->execute();

    echo($stmt);

    $moment->id = $db->lastInsertId();
    $db = null;
    echo json_encode($moment);
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}';
} 
```

而且我收到以下错误，我已经看过这个，但我无法弄清楚我做错了什么，任何帮助都会很棒！

错误：

```
{"error":{"text":SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'long, mDate, privacy, type, iPhoneUniqueID, deleted, height) 
            VALUES ('4',' at line 1}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:36:22.667

`long`, `type`- 根据您使用的 RDBMS，这些名称可能被视为关键字。更改列名或转义它们的名称，即在 MSSQL 类型中`"long"`而不是`long`在 MySQL 类型中`{grave-accent}long{grave-accent}`*

您也可以使用以下语法来准备语句和绑定参数：

```
$stmt = $db->prepare($sql);
$stmt->execute(array(
    ':mType'   => $moment->mType,
    ...
    ':mHeight' => $moment->mHeight
)); 
```

*   [重音](http://en.wikipedia.org/wiki/Grave_accent)是一个“`”字符。

# mongodb - $unwind 聚合框架中的对象

> ID：11189243
> 
> 赞同：35
> 
> 时间：2012-06-25T12:17:42.283
> 
> 标签：mongodb, aggregation-framework

在 MongoDB 聚合框架中，我希望在对象（即 JSON 集合）上使用 $unwind 运算符。看起来这[不可能](http://docs.mongodb.org/manual/reference/aggregation/#_S_unwind)，有解决方法吗？有计划实施吗？

例如，从聚合[文档](http://docs.mongodb.org/manual/reference/aggregation/#_S_unwind)中获取文章集合。假设有一个附加字段“ratings”，它是来自 user -> rating 的映射。你能计算出每个用户的平均评分吗？

除此之外，我对聚合框架非常满意。

更新：这是我每个请求的 JSON 集合的简化版本。我正在存储基因组数据。我不能真正使基因型成为一个数组，因为最常见的查找是获取随机人的基因型。

```
variants: [

    {
        name: 'variant1', 
        genotypes: {

            person1: 2,
            person2: 5,
            person3: 7,

        }
    }, 

    {
        name: 'variant2', 
        genotypes: {

            person1: 3,
            person2: 3,
            person3: 2,

        }
    }

] 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-08T17:12:46.057

使用聚合框架无法进行您描述的计算类型 - 这**不是**因为没有`$unwind`非数组的方法。即使 person:value 对象是数组中的文档，`$unwind`也无济于事。

“分组依据”功能（无论是在 MongoDB 中还是在任何关系数据库中）都是在字段或列的值上完成的。我们根据另一个字段的值按字段值和总和/平均值/等进行分组。

简单示例是您建议的变体，将评级字段添加到示例文章集合中，但不是作为从用户到评级的映射，而是作为这样的数组：

```
{ title : title of article", ...
  ratings: [
         { voter: "user1", score: 5 },
         { voter: "user2", score: 8 },
         { voter: "user3", score: 7 }
  ]
} 
```

现在您可以将其汇总为：

```
[ {$unwind: "$ratings"},
  {$group : {_id : "$ratings.voter", averageScore: {$avg:"$ratings.score"} } } 
] 
```

但是这个例子的结构如你所描述的那样看起来像这样：

```
{ title : title of article", ...
  ratings: {
         user1: 5,
         user2: 8,
         user3: 7
  }
} 
```

甚至这个：

```
{ title : title of article", ...
  ratings: [
         { user1: 5 },
         { user2: 8 },
         { user3: 7 }
  ]
} 
```

即使你能做到`$unwind`这一点，这里也没有什么可以汇总的。除非您知道所有可能的密钥（用户）的完整列表，否则您无法对此做太多事情。[*]

与您所拥有的类似的关系数据库模式是：

```
CREATE TABLE T (
   user1: integer,
   user2: integer,
   user3: integer
   ...
); 
```

这不是要做的事情，而是我们会这样做：

```
CREATE TABLE T (
   username: varchar(32),
   score: integer
); 
```

现在我们使用 SQL 进行聚合：

`select username, avg(score) from T group by username;`

有一个对 MongoDB 的增强请求，可能允许您将来在聚合框架中执行此操作 - 将值投影到键的能力，反之亦然。同时，总是有map/reduce。

[[*] 如果您知道所有唯一键（您可以使用与此类](https://stackoverflow.com/questions/2298870/mongodb-get-names-of-all-keys-in-collection)似的方法找到所有唯一键），则有一种复杂的方法可以做到这一点，但是如果您知道所有键，您也可以只运行一系列查询每个 userX 的表单`db.articles.find({"ratings.user1":{$exists:true}},{_id:0,"ratings.user1":1})`将返回他们的所有评分，您可以简单地对它们进行求和和平均，而不是进行聚合框架所需的非常复杂的投影。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-09-28T21:20:03.323

从 3.4.4 开始，您可以使用 $objectToArray 将对象转换为数组

请参阅： [https ://docs.mongodb.com/manual/reference/operator/aggregation/objectToArray/](https://docs.mongodb.com/manual/reference/operator/aggregation/objectToArray/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:03:51.120

这是一个老问题，但我通过反复试验发现了一些人们可能会觉得有用的信息。

实际上可以通过以这种方式欺骗解析器来解除虚拟值：

```
db.Opportunity.aggregate(
  { $project: {
        Field1: 1, Field2: 1, Field3: 1,
        DummyUnwindField: { $ifNull: [null, [1.0]] }
    }
  },
  { $unwind: "$DummyUnwindField" }
); 
```

无论值是否存在，这将为每个文档生成 1 行。您可以对此进行修改以生成您想要的结果。我曾希望将它与多个 $unwinds 结合起来（有点像 map/reduce 中的 emit() ），但是唉，最后一个 $unwind 获胜，或者它们组合成一个交集而不是联合，这使得我无法实现我的结果正在寻找。我对聚合框架功能感到非常失望，因为它不适合我希望使用它的一个用例（奇怪的是，这方面 StackOverflow 上的很多问题都在问） - 根据匹配排序结果速度。改善糟糕的地图缩减性能将使整个功能变得不必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-22T09:43:12.813

[这就是我发现和扩展的。](https://stackoverflow.com/a/44650224/1390678)

> **让我们在 mongo 中创建实验数据库**

```
db.copyDatabase('livedb' , 'experimentdb') 
```

> **现在使用experimentdb & 将数组转换为你的experimentcollection 中的对象**

```
db.getCollection('experimentcollection').find({}).forEach(function(e){
    if(e.store){
        e.ratings = [e.ratings]; //Objects name to be converted to array eg:ratings
        db.experimentcollection.save(e);
    }
}) 
```

> **一些将 json 转换为平面对象的 nerdy js 代码**

```
var flatArray = [];

var data = db.experimentcollection.find().toArray();

for (var index = 0; index < data.length; index++) {

  var flatObject = {};

  for (var prop in data[index]) {

    var value = data[index][prop];

    if (Array.isArray(value) && prop === 'ratings') {
      for (var i = 0; i < value.length; i++) {
        for (var inProp in value[i]) {
          flatObject[inProp] = value[i][inProp];
        }
      }
    }else{
        flatObject[prop] = value;
    }
  }
  flatArray.push(flatObject);
}

printjson(flatArray); 
```

# codeigniter - 如何将模型映射到 CodeIgniter-Simpletest 单元测试框架中的特定控制器？

> ID：11189247
> 
> 赞同：1
> 
> 时间：2012-06-25T12:17:51.657
> 
> 标签：codeigniter, phpunit, simpletest

我正在使用 codeigniter 框架，并且正在使用 simpletest 框架对我的模型进行单元测试。

每个模型都有自己的控制器。

我为每个模型使用的大多数 url（用于 web 服务响应）都在它们自己的控制器构造函数中提到。

当我为每个模型运行 simpletest 时，它会从 routes.php 中设置的默认控制器获取所有 url。

例如 ：

让我们考虑有两个控制器：控制器 1 和控制器 2 并且有两个模型：模型 1 和模型 2

controller1 映射到 model1 & controller2 映射到 model2

在 routes.php 中，我有

```
$route['default_controller'] = "controller1"; 
```

如果我对模型 2 进行单元测试，我需要将模型 2 映射到控制器 2，但它会映射到控制器 1 本身。

有没有办法动态更改每个模型的默认控制器？或者simpletest框架中有没有办法指定它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:57:49.360

哇，你把我弄丢了。您从控制器中加载模型。你是什​​么意思你将模型映射到控制器？在控制器 1 中你需要有 $this->load->model('model1'); 在控制器 2 中与模型 2 相同。然后每个控制器只能使用那个模型。

# html - 在 rst2pdf 列表中嵌入 HTML

> ID：11189250
> 
> 赞同：0
> 
> 时间：2012-06-25T12:18:08.113
> 
> 标签：html, pdf, html-table, rst2pdf

我[`rst2pdf`](https://code.google.com/p/rst2pdf/)在 linux 上使用 0.92，我正在尝试将 html 嵌入`list-table`指令中，如[Dimitri Christodoulou 的博客](http://dimitri-christodoulou.blogspot.com/2012/01/how-to-embed-html-in-restructuredtext.html)中所示。Robert Alsina 提到他已经将此功能集成到[`rst2pdf`](https://code.google.com/p/rst2pdf/)0.90 中。

我正在尝试构建每个单元格包含多个文本行的发票，控制换行符位置的最简单方法似乎是使用`<br>`标签。这是我的`test.rst`文件：

```
Invoice for Services Rendered
=============================

.. list-table::
   :widths: 50 50
   :header-rows: 0

   * - .. raw:: html

         <p>My Name Here<br>My address here<br>City, State, Zip<br>Ph: 214-555-1212<br></p>

     - **INVOICE**
   * - This is a test
     - .. raw:: html

         <p>Invoice #20120622001<br>Date: 25 June 2012<br></p> 
```

这可以编译成 pdf，使用`rst2pdf -o test.pdf test.rst`;没有问题。但是，我看不到嵌入 HTML 应位于的文本：

![带有嵌入 html 的 rst2pdf：损坏](../Images/47ec49e197e4f4644baf4423da42f2cb.png)

我在用：

*   虚拟环境中的 Python 2.6.6
*   文档工具 0.9.1
*   rst2pdf 0.92
*   xhtml2pdf 0.0.4
*   Debian 挤压 (Debian Linux 6.0)

如何让 rst2pdf 将上面显示的 HTML 嵌入`list-table`指令中？

**编辑**

这已被归档为[rst2pdf 问题 455](https://code.google.com/p/rst2pdf/issues/detail?id=455)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:19:29.380

修复！抱歉花了这么长时间。最新的 pisa/xhtml2pdf 有完全不同的导入：-P

# sql-server - Transact-SQL 作业权限

> ID：11189251
> 
> 赞同：3
> 
> 时间：2012-06-25T12:18:08.883
> 
> 标签：sql-server, security, login, jobs

我有 2 个 SQL 服务器：A 和 B。在 A 上，我有一个存储过程，它处理来自 B 的一些数据，然后将结果转储到 A 上的表中。我需要安排一个作业来运行这个过程。

根据[http://msdn.microsoft.com/en-us/library/ms189064(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms189064(SQL.105).aspx)，运行作业时使用的是作业所有者。（不能在 TSQL 步骤/作业的作业步骤上设置“运行方式”。）

网络人员设置这些机器/安全性的方式是使用第三台服务器 C，其上存储有集中登录。所以我的登录名是：SERVERC\SEAN。此登录名可以访问数据库服务器 A 和 B。如果我在登录并连接到服务器 A 时执行，则 proc 运行良好。

所以我将作业所有者设置为 SERVERC\SEAN，但是当作业运行时，错误消息是：“以用户身份执行：NT AUTHORITY\NETWORK SERVICE。用户 SERVERC\SERVERA$ 登录失败”

为什么它作为网络服务和一些奇怪的登录组合运行，而不是按照指示作为工作所有者运行？我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:39:35.027

看看这篇[文章](http://www.techbubbles.com/sql-server/running-sql-server-jobs-with-different-user-accounts-in-sql-2008/)，它应该做你想做的事。

**编辑以显示最有用的链接** [http://social.msdn.microsoft.com/Forums/en/sqltools/thread/54dff132-b9c9-4753-b0c5-2134bf7f4327](http://social.msdn.microsoft.com/Forums/en/sqltools/thread/54dff132-b9c9-4753-b0c5-2134bf7f4327)

# google-maps-api-3 - 文本层 google-maps-api-3

> ID：11189252
> 
> 赞同：0
> 
> 时间：2012-06-25T12:18:08.940
> 
> 标签：google-maps-api-3

我在一个项目上使用 Google Maps API V3 已经有一段时间了。我正在使用多边形形状来表示校园地图上的建筑物，现在我正在寻找一种解决方案来解决地图文本下方的形状问题。这包括专门为我的校园构建游戏。我想知道是否有办法移动它们的显示顺序，以便多边形位于谷歌地图的内置文本层之下，如果是这样，我将如何实现这一点。

提前致谢，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:56:53.247

我不认为这是可能的。除非地图名称通过地图选项关闭，否则它们似乎是平铺图像的一部分。

编辑：您可能会做一些事情，例如关闭标签并使用信息框之类的库来制作自己的标签。

# svn - 带有 Neon 的 CentOS 6 和 SVN

> ID：11189254
> 
> 赞同：1
> 
> 时间：2012-06-25T12:18:09.720
> 
> 标签：svn, unix, centos, visualsvn, centos6

在使用 CentOS 6 和 SVN 1.6 (yum install subversion) 或 1.7.5 时，当我尝试对 VisualSVN 服务器进行 SVN 检出时，我收到以下错误：

```
SSL handshake failed: SSL error: Key usage violation in certificate has been detected. 
```

我环顾了网络，它建议执行以下操作：

```
sudo mv /usr/lib/libneon-gnutls.so.27 /usr/lib/libneon-gnutls.so.27.old
sudo ln -s /usr/lib/libneon.so.27 /usr/lib/libneon-gnutls.so.27 
```

然而，libneon-gnutls.so.27 在这个 libneon 包中不存在，导致解决方案无用（我已经尝试过）：

```
neon-0.29.3-1.2.el6.i686 
```

是否有不涉及降级霓虹灯的解决方法？我不确定如何获得我需要的正确版本的霓虹灯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:23:53.780

I upgraded VisualSVN to latest the version and added the registry key defined here: [http://www.visualsvn.com/support/topic/00056/](http://www.visualsvn.com/support/topic/00056/)

Then regenerated a certificate. Turned off SSL and turned it back on.

After this I tried connecting from my server again and it worked. I'm not sure exactly which action resolved the issue, but it appears that even though the VisualSVN topic says it applies to 2.5 and not any specific subversion the latest version is able to properly generate a certificate.

# php - 按键值对数组进行排序

> ID：11189255
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:18:13.307
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何按某个键对多维数组进行排序？](https://stackoverflow.com/questions/2804690/how-to-sort-a-multidimensional-array-by-a-certain-key)

我想按键值对数组进行排序，如下所示：

```
 $arr = ([0]=>Int(5)
         [1]=> Array ( [0]=>Int(4) , [1]=>String(10) , [2]=>String(22) , ['prop']=>Int(2))
         [2]=> Array ( [0]=>Int(4) , [1]=>String(10) , [2]=>String(22) , ['prop']=>Int(2))
         [3]=> Array ( [0]=>Int(4) , [1]=>String(10) , [2]=>String(22) , ['prop']=>Int(2))
        ) 
```

因此，我希望 $arr 按 ['prop'] 的值排序。

我试过冒泡排序但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:21:06.327

```
usort($array, function($a, $b) {
    if($a['prop'] == $b['prop']) return 0;
    return ($a['prop'] < $b['prop']) ? -1 : 1;
}); 
```

注意：这仅适用于 PHP >5.3（因为它使用[匿名函数](http://php.net/manual/en/functions.anonymous.php)）

# scala - Scala 的参数字段和构造函数参数

> ID：11189257
> 
> 赞同：8
> 
> 时间：2012-06-25T12:18:25.100
> 
> 标签：scala

我了解*参数字段*（如下`x`例所示）的行为类似于普通字段；所以你可以在方法中引用它们：

```
class Test(val x: Int) { // x is a parametric field
  override def toString = "Test: " + x;
} 
```

但是，如果您删除关键字`val`，代码仍然可以编译（并且查看和`.class`输出，`x`仍然是该类的成员）。所以我想知道，参数字段（即`val x: Int`上面的）和构造函数参数（`x: Int`）之间有什么区别？

（在我脑后有 Java 的情况下，我本来希望构造函数的范围*不*包括像这样的方法`x`。）*`toString`*

 ** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T12:27:37.673

如果没有`val`关键字，您的代码类似于：`class Test (private[this] val x: Int) { ... }`. 因此，`x`在整个班级都可以使用，但不能从外部使用。

您的问题中没有提到它，但它也可能有用：在`case class`默认修饰符中是`val`. 因此`case class Test(x: Int) {...}`等价于`case class (val x: Int) {...}`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T20:13:25.623

构造函数参数有效地成为一个`private[this]`字段，但前提是至少在一种方法中被引用。否则类中不会生成字段。

例如：

```
class Foo(i: Int) {
  println(i)
} 
```

变成

```
$ javap -private Foo
Compiled from "Foo.scala"
public class Foo extends java.lang.Object implements scala.ScalaObject{
    public Foo(int);
} 
```

但

```
class Bar(i: Int) {
  def baz = println(i)
} 
```

变成

```
$ javap -private Bar
Compiled from "Bar.scala"
public class Bar extends java.lang.Object implements scala.ScalaObject{
    private final int i;
    public void baz();
    public Bar(int);
} 
```*

# signals - PyGTK - GtkEntry 光标处插入信号不起作用

> ID：11189263
> 
> 赞同：2
> 
> 时间：2012-06-25T12:18:57.047
> 
> 标签：signals, pygtk, glade, gtkentry

我试图在我的代码中使用 GtkEntry.insert-at-cursor 信号，但它似乎不起作用。

```
 def on_servername_activate(self, widget):
       output = StringIO.StringIO()         
       servername = widget.get_text()
       self.output.write("USHARE_NAME="+servername+'\n') 
```

这是我想要使用的代码的一部分`insert-at-cursor`。我几乎可以肯定这是我犯的一个错误。我替换`on_servername_activate`为`on_servername_insertatcursor`（因为`on_servername_insert-at-cursor`在第一个连字符处给了我一个语法错误）并且当文本插入框中时没有任何反应。没有任何东西被插入，但是一切都与信号`output`完美配合。`activate`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T21:25:49.153

信号和方法之间似乎存在概念错误。

一方面，当事件发生时触发信号，这些信号可以命名为字符串，如**'insert-at-cursor'**或**'insert_at_cursor'**。另一方面，您需要将这些信号（在小部件中）与您的*functions/methods*连接起来。*函数/方法*可以具有任意名称，为了使它们更易于阅读，我们尝试将它们命名为与信号一样接近，但这不是强制性的。

在您的情况下，您可能希望拥有类似的东西：

```
class Foo:
  ...
  def create_widgets(self):
      entry.gtkEntry()
      entry.connect('insert-at-cursor', self.entry_insert_at_cursor)

  def entry_insert_at_cursor(self, *args):
      # some code 
```

如您所见，在*entry.connect(...)*中发生了*signal*和*method*之间的匹配。这解释了代码中的语法错误。

另一个误解似乎是使用信号*insert-at-cursor*。对于该信号，您必须将条目绑定到一个键，这似乎不是您正在寻找的行为。根据您所针对的 GTK 版本，您可能希望使用：

```
 entry.connect('changed', self.entry_changed) 
```

或者

```
 entry.connect('insert-text', self.entry_insert_text) 
```

在后者中，您的方法将接收更改的文本以及位置。同样，您可以直接处理与条目关联的缓冲区：

```
 entry.connect('inserted-text', self.buffer_entry_inserted_text) 
```

该方法将额外接收插入的字节数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:34:08.193

我宁愿使用*gtk.EntryBuffer对象的**插入文本*信号回调，如下所示：

 *```
def on_insert_cb (buf, pos, chars, nch):
    print buf.get_text()

# --- skip ---

entry = gtk.Entry()
entry.get_buffer().connect("inserted-text", on_insert_cb)

# --- skip --- 
```*

# php - 使用php获取数组输出

> ID：11189264
> 
> 赞同：0
> 
> 时间：2012-06-25T12:19:06.053
> 
> 标签：php

> **可能重复：**
> [php 循环遍历关联数组](https://stackoverflow.com/questions/11189879/php-loop-through-associative-arrays)

我有这段代码，它让我在这里输出一个这样的数组：

[http://penelope-ns.net/fb/fig.jpg](http://penelope-ns.net/fb/fig.jpg)

如何将 [name] 保存为变量 $name？

我用来生成的代码是这样的：

```
 $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); ///// Add this line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:23:53.237

据我所知：

```
$fbid = 500591729;
$name = $array[$fbid] ['data'] [0] ['name']; 
```

或者对于所有名称：

```
foreach ($array as $fbid=>$value) {
    echo $value['data'][0]['name'];
} 
```

# javascript - 获取最后一个 Javascript 错误

> ID：11189271
> 
> 赞同：10
> 
> 时间：2012-06-25T12:19:40.620
> 
> 标签：javascript

我正在为我的应用程序编写错误报告器。当出现问题时，用户填写表格并描述问题并将其发送到服务器。作为以这种形式收集的数据的一部分，我想包括最后一个 javascript 错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:22:02.050

您可以使用`window.onerror`( [MDN docu](https://developer.mozilla.org/en/DOM/window.onerror) ) 实现一个函数来捕获错误。这样，最后一个错误可以存储在`window.localStorage`您想要的任何位置，并且您可以在填充错误报告时再次检索它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T12:23:41.277

您可以使用`window.onerror`

```
window.onerror = function(error, url, line) {
    //save errors here
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T12:21:58.437

您可以将函数分配给[`window.onerror`](https://developer.mozilla.org/en/DOM/window.onerror)并存储参数中的错误信息。

# objective-c - "for in" 目标 c 空数组

> ID：11189274
> 
> 赞同：2
> 
> 时间：2012-06-25T12:19:51.817
> 
> 标签：objective-c, nsmutablearray, for-in-loop

我注意到在目标 c 中对初始化的空 NSMutableArray 执行 for/in 操作没有按预期工作。

简化代码是：

```
+(void) convertArray: (NSMutableArray*)arrayIN {

    NSMutableArray *arrayOUT = [NSMutableArray array];

    NSLog(@"is nil %d - count %d", !arrayIN, [arrayIN count]);

    for(NSObject *o in arrayIN)
        [arrayOUT addObject:[o convertToAnotherClass]];

} 
```

实际代码是：

```
+(BOOL) writeTasks: (NSArray*)tasksArray {

    NSMutableArray *arr = [NSMutableArray array];
    NSLog(@"is nil %d - count %d", !arr, [arr count]);
    for(Task *t in tasksArray)
        [arr addObject:[t getDictionary]];

    NSError *error; 
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:arr options:NSJSONWritingPrettyPrinted error:&error];

    if (! jsonData) {
        NSLog(@"Got an error: %@", error);
        return NO;
    } else {
        //NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        [jsonData writeToFile:path options:NSDataWritingAtomic error:nil];
        return YES;
    }
} 
```

令人惊讶的是，执行`[dummyClass convertArray:[NSMutableArray array]]`显示了这一点：

```
2012-06-25 13:51:34.236 Planorama[740:707] is nil 0 - count 0
2012-06-25 13:51:34.239 Planorama[740:707] -[__NSArrayM convertToAnotherClass]: unrecognized selector sent to instance 0xde9b580
(lldb) 
```

为什么 ？arrayIN 为空，为什么`convertToAnotherClass`还要调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:24:46.083

如果您使用基于块的枚举，它将按照您想要的方式工作。此外，输出表明 o 设置为某个实例，因此您可能遇到另一个问题。

[在 Objective-C 数组中获取特定类型的所有对象的优雅方法](https://stackoverflow.com/questions/2699135/elegant-way-to-get-all-objects-of-a-specific-type-in-an-objective-c-array)

最后，看起来这是一个静态方法，但您的示例将其称为实例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:44:02.093

正如 Joshua Smith 指出的那样：我没有检查迭代数组的计数。迭代数组不是空的并且包含自身，因为如果输入错误的行：

`[tasks addObject:tasks]`

代替

`[tasks addObject:task]`

在以前的方法中..

谢谢大家 ！

PS：Joshua Smith 的链接非常有用！未来的读者：看看吧！

# actionscript-3 - AIR iOS 舞台视频 - 防止缩放效果

> ID：11189278
> 
> 赞同：2
> 
> 时间：2012-06-25T12:20:06.530
> 
> 标签：actionscript-3, flash, air

我成功地将 stageVideo 与 AIR for iOS 一起使用，但注意到当视频启动时，它会集中从 0% 扩展到 100%（类似于 iOS 应用程序的启动方式）。

有谁知道是否可以防止这种放大（缩放效果）并以正确的 100% 大小显示视频。

谢谢，

标记

这是我用来添加视频的代码：

```
nc = new NetConnection();
nc.connect(null);
ns = new NetStream(nc);
ns.client = this;

sv = stage.stageVideos[0];
sv.addEventListener(StageVideoEvent.RENDER_STATE, onRender);
sv.attachNetStream(ns);

private function onRender(e:StageVideoEvent):void {
sv.removeEventListener(StageVideoEvent.RENDER_STATE, onRender);
sv.viewPort = new Rectangle(110,133,800,450);
ns.play("urlToVideo.mp4");
} 
```

# count - 数据库中的记录数

> ID：11189282
> 
> 赞同：0
> 
> 时间：2012-06-25T12:20:25.920
> 
> 标签：count, sqldatareader

我有 8 个选项卡，每个选项卡都包含记录数，还有一个函数应该计算每个选项卡中的记录数并将其放在选项卡的标题名称中，如下所示：

```
public void count_records(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["Test"].ConnectionString);
        string[] commands = {
                                "SELECT * FROM myTable",
                                "SELECT * FROM myTable WHERE Status=2",
                                "SELECT * FROM myTable WHERE Status=3",
                                "SELECT * FROM myTable WHERE Status=8",
                                "SELECT * FROM myTable WHERE Status=4",
                                "SELECT * FROM myTable WHERE Status=7",
                                "SELECT * FROM myTable WHERE Status=1",
                                "SELECT * FROM myTable WHERE Status=5"
                            };
        int[] LLCount = new int[commands.Length];
        try
        {
            for (int i = 0; i < commands.Length; i++)
            {
                SqlCommand cmd = new SqlCommand(commands[i], con);
                SqlDataReader reader;
                int count = 0;
                con.Open();
                reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    count++;
                }
                LLCount[i] = count;
                myTab1.HeaderText += " (" + LLCount[0] + ")";
                myTab2.HeaderText += " (" + LLCount[1] + ")";
                myTab3.HeaderText += " (" + LLCount[2] + ")";
                myTab4.HeaderText += " (" + LLCount[3] + ")";
                myTab5.HeaderText += " (" + LLCount[4] + ")";
                myTab6.HeaderText += " (" + LLCount[5] + ")";
                myTab7.HeaderText += " (" + LLCount[6] + ")";
                myTab8.HeaderText += " (" + LLCount[7] + ")";
            }
        }
        catch (Exception ex) { string ee = ex.Message; }
        finally { con.Close(); }
    } 
```

现在，我面临的问题是读者正确地获取了第一个命令字符串的记录数***“LLCount [0]”***，但其余的都是零。

**编辑：**

> 我添加了 reader.Close(); 并将分配移到循环之外，但它甚至没有像以前那样显示零或任何东西。所以，我认为你是否放 reader.Close(); 并不重要。或不。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:05:52.153

在代码中查找// ***以查找差异。主要的变化是我`con.Open();`把`for loop`. 当连接未关闭时，再次打开相同的连接会引发错误。这个错误被`catch`阻止了，

```
public void count_records(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["Test"].ConnectionString);
    //*** See Count(*) in the sql
    string[] commands = {
                       "SELECT count(*) FROM myTable",
                        "SELECT count(*) FROM myTable WHERE Status=2",
                        "SELECT count(*) FROM myTable WHERE Status=3",
                        "SELECT count(*) FROM myTable WHERE Status=8",
                        "SELECT count(*) FROM myTable WHERE Status=4",
                        "SELECT count(*) FROM myTable WHERE Status=7",
                        "SELECT count(*) FROM myTable WHERE Status=1",
                        "SELECT count(*) FROM myTable WHERE Status=5"

                    };
    int[] LLCount = new int[commands.Length];
    try
    {
        //*****This is the change I made
        con.Open();

        for (int i = 0; i < commands.Length; i++)
        {
            SqlCommand cmd = new SqlCommand(commands[i], con);

            int count = 0;
            //*** Se the use of ExecuteScalar
            count =Convert.ToInt32(  cmd.ExecuteScalar());
            LLCount[i] = count;
        }

        //***Now Assign the Tab Headers

    }
    catch (Exception ex) { string ee = ex.Message; }
    finally { con.Close(); }
} 
```

}

# javascript - d3轴标注

> ID：11189284
> 
> 赞同：100
> 
> 时间：2012-06-25T12:20:29.363
> 
> 标签：javascript, d3.js, axis-labels

如何将文本标签添加到 d3 中的轴？

例如，我有一个带有 x 和 y 轴的简单折线图。

在我的 x 轴上，我有从 1 到 10 的刻度。我希望“天”这个词出现在它的下方，这样人们就知道 x 轴正在计算天数。

同样，在 y 轴上，我将数字 1-10 作为刻度，并且我希望“吃的三明治”一词出现在侧面。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-06-25T18:18:35.470

轴标签不是内置到 D3 的[轴组件](https://github.com/mbostock/d3/wiki/SVG-Axes)中，但您可以通过添加 SVG`text`元素自己添加标签。一个很好的例子是我对 Gapminder 的动画气泡图[The Wealth & Health of Nations](http://bost.ocks.org/mike/nations/)的再创作。x 轴标签如下所示：

```
svg.append("text")
    .attr("class", "x label")
    .attr("text-anchor", "end")
    .attr("x", width)
    .attr("y", height - 6)
    .text("income per capita, inflation-adjusted (dollars)"); 
```

y轴标签是这样的：

```
svg.append("text")
    .attr("class", "y label")
    .attr("text-anchor", "end")
    .attr("y", 6)
    .attr("dy", ".75em")
    .attr("transform", "rotate(-90)")
    .text("life expectancy (years)"); 
```

您还可以根据需要使用样式表来设置这些标签的样式，可以一起使用 ( `.label`) 或单独使用 ( `.x.label`, `.y.label`)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-12-02T10:33:46.540

在新的 D3js 版本（版本 3 及更高版本）中，当您通过`d3.svg.axis()`函数创建图表轴时，您可以访问两个被调用的方法`tickValues`，`tickFormat`它们是函数内置的，以便您可以指定需要刻度的值以及在什么情况下您希望文本显示的格式：

```
var formatAxis = d3.format("  0");
var axis = d3.svg.axis()
        .scale(xScale)
        .tickFormat(formatAxis)
        .ticks(3)
        .tickValues([100, 200, 300]) //specify an array here for values
        .orient("bottom"); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-23T21:56:10.657

如果您希望 y 轴标签像我一样位于 y 轴的中间：

1.  使用文本锚中间旋转文本 90 度
2.  按中点翻译文本
    *   x 位置：防止 y 轴刻度标签重叠 ( `-50`)
    *   y 位置：匹配 y 轴的中点 ( `chartHeight / 2`)

代码示例：

```
var axisLabelX = -50;
var axisLabelY = chartHeight / 2;

chartArea
    .append('g')
    .attr('transform', 'translate(' + axisLabelX + ', ' + axisLabelY + ')')
    .append('text')
    .attr('text-anchor', 'middle')
    .attr('transform', 'rotate(-90)')
    .text('Y Axis Label')
    ; 
```

这可以防止旋转整个坐标系，如上面 lubar 所述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-28T14:16:11.967

如果您按照建议在 d3.v4 中工作，则可以使用此实例来提供所需的一切。

您可能只想用“天”替换 X 轴数据，但请记住正确解析字符串值而不是应用连接。

parseTime 也可以用日期格式来解决天数的问题吗？

```
d3.json("data.json", function(error, data) {
if (error) throw error;

data.forEach(function(d) {
  d.year = parseTime(d.year);
  d.value = +d.value;
});

x.domain(d3.extent(data, function(d) { return d.year; }));
y.domain([d3.min(data, function(d) { return d.value; }) / 1.005, d3.max(data, function(d) { return d.value; }) * 1.005]);

g.append("g")
    .attr("class", "axis axis--x")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

g.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(y).ticks(6).tickFormat(function(d) { return parseInt(d / 1000) + "k"; }))
  .append("text")
    .attr("class", "axis-title")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .attr("fill", "#5D6971")
    .text("Population)"); 
```

[摆弄全局 css / js](https://jsfiddle.net/ytwogoLf/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-11T17:26:27.713

D3 提供了一组非常低级的组件，可用于组装图表。您将获得构建块、轴组件、数据连接、选择和 SVG。将它们放在一起形成图表是您的工作！

如果您想要一个常规图表，即一对轴、轴标签、图表标题和绘图区域，为什么不看看[d3fc](http://d3fc.io)呢？它是一组更高级的 D3 组件的开源集合。它包括一个可能是您需要的笛卡尔图表组件：

```
var chart = fc.chartSvgCartesian(
    d3.scaleLinear(),
    d3.scaleLinear()
  )
  .xLabel('Value')
  .yLabel('Sine / Cosine')
  .chartLabel('Sine and Cosine')
  .yDomain(yExtent(data))
  .xDomain(xExtent(data))
  .plotArea(multi);

// render
d3.select('#sine')
  .datum(data)
  .call(chart); 
```

您可以在此处查看更完整的示例：[https ://d3fc.io/examples/simple/index.html](https://d3fc.io/examples/simple/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-14T11:20:10.743

```
chart.xAxis.axisLabel('Label here'); 
```

或者

```
xAxis: {
   axisLabel: 'Label here'
}, 
```

# c# - 睡觉时唤醒任务

> ID：11189287
> 
> 赞同：0
> 
> 时间：2012-06-25T12:20:33.463
> 
> 标签：c#, multithreading

我有一个定期运行 10 秒的任务。我通过读取数据库做了一些图片框刷新过程。我想要的是在我立即单击按钮时调用或唤醒线程并执行刷新操作。简而言之，我希望刷新任务不仅由时间驱动，而且由事件驱动。这可能吗？如果是，如何？该任务的代码块如下所示。

```
while (true)
{
    // do some refresh operation
    Thread.Sleep(10000);
}

void button1_Click(object sender, EventArgs e)
{
    // invoke or awaken thread
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:24:29.023

首先，我建议您放弃++`Thread`组合以进行定时操作。这是非常丑陋的。WinForms 和 WPF 都有计时器类来自动完成这三件事（从调度程序线程定期更新 GUI）。查看[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)和[System.Windows.Threading.DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)。`Sleep``Invoke`

现在对于您的特定问题，您可以简单地定义一个通用方法来使用您需要的内容更新 GUI，并从计时器代码和按钮处理程序中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:25:01.707

创建一个`AutoResetEvent`：

```
protected AutoResetEvent _threadCycle;
_threadCycle = new AutoResetEvent(false); 
```

当你想等待时：

```
_threadCycle.WaitOne(delay, false); 
```

当你想设置事件时，有效地让线程继续：

```
_threadCycle.Set(); 
```

奖金：

当你这样做时，`_threadCycle.WaitOne(delay, false);`你会得到一个返回值，`true`或者`false`，你可以检查超时是否过期，或者你是否因为手动设置的事件而继续。

顺便提一句：

仅当您在备用线程中执行任务时才有效。如果您使用主线程，无论如何您都会陷入等待超时完成的困境。也许最好使用@Tudors 答案，并且仅以“穿过荆棘”的方式获得此选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:27:26.830

您应该为此使用 AutoResetEvent。

您所做的类似于（假设您的 AutoResetEvent 称为“信号”）：

```
while (true)
{
    signal.WaitOne(10000);
    ...
} 
```

在您的按钮处理程序中，只需执行以下操作：

```
signal.Set(); 
```

# domain-driven-design - 如何处理 DDD 中的故障？

> ID：11189289
> 
> 赞同：1
> 
> 时间：2012-06-25T12:20:37.640
> 
> 标签：domain-driven-design

当我的域中的“某些东西”发生变化时，我需要在我的本地驱动器上创建一个文件夹。因此，在 DDD 方式中，我需要引发一个事件，而不是让我的域创建文件夹。

我的问题是如果我的事件失败（即文件夹创建失败）怎么办？

我是否必须重新提出另一个命令来撤消我认为称为补偿命令的第一个更改？

另外，如果补偿命令失败怎么办？现在我进行了域更改，但该文件夹不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:07:29.597

您描述您提出的解决方案的方式并不是真正的 DDD。我认为更多的是 CQRS（即事件和补偿命令），这可能会使情况复杂化。

对于这种用于**异步**操作的*场景*，您真的需要采用 CQRS 方法吗？例如，在单独的事务中创建的文件夹对于调用和持久化的业务逻辑有什么优势？在引发查询服务处理的事件时，这种方法有充分的理由，因为查询服务可能位于单独的物理机器上，因此需要 RPC。此外，该事件可能需要更新许多非规范化表。所以为了性能，这个过程使用异步事件模型是有意义的。但是对于创建本地文件夹，我不确定是否可以？

 **一种可能的方法

```
public class ApplicationService : IApplicationService
{
    private readonly IMyAggregateRepository _myAggregateRepository;
    private readonly IFolderCreationService _folderCreationService;

    public ApplicationService(IMyAggregateRepository myAggregateRepository, IFolderCreationService folderCreationService)
    {
        _myAggregateRepository = myAggregateRepository;
        _folderCreationService = folderCreationService;
    }

    public void SomeApplicationServiceMethod(Guid id)
    {
        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
            MyAggregate aggregate = _myAggregateRepository.GetById(id);

            aggregate.SomeMethod();

            _myAggregateRepository.Save(aggregate);

            _folderCreationService.CreateFolder();
        }
    }
} 
```

在这里，只有在工作单元的 using 语句中的所有代码都完成且没有错误时，才会将更改提交到数据库。

请注意，它不是调用文件夹服务的*域服务*或*域实体......它是**应用程序服务*。我更喜欢让域服务专注于纯域逻辑。协调客户端对域、数据库和任何其他*基础设施*服务（例如此文件夹服务）的调用是应用程序服务的工作。

如果您认为有充分的理由使用事件模型，那么您所说的就是正确的。如果在事件处理程序中创建文件夹失败，您将不得不发出补偿命令。您需要确保此处理程序不会*因设计*而失败（我的意思是有问题的实体始终处于可以执行此补偿命令的状态；并且状态已恢复）。拥有涵盖所有场景的良好单元测试将有所帮助。如果设计中存在允许此补偿命令失败的缺陷，我想您将不得不通过发送电子邮件/失败通知来进行人工干预。

PS虽然不是问题的重点，但我真的建议不要创建物理文件夹，除非真的有充分的理由。以我的经验，它只会让部署/机器升级和其他事情感到头疼。显然我不知道您这样做的原因，但我真的建议您使用文档存储/数据库来代替您需要存储的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:28:06.260

如果文件系统文件夹对您的域至关重要，我会将文件夹的创建实现为域服务。这样，您将让实体处理所有业务规则和逻辑，如果文件夹创建失败，您的域不会处于无效状态。

将服务作为参数传递给处理逻辑的方法（双重调度模式）。

文件夹服务示例。

```
IFolderService
{
    CreateFolder(string path);
} 
```

实体示例。

```
class MyEntity
{
    public void DoWork(IFolderService folderService, ...)
    {
        folderService.CreateFolder(...);

        // do work.
    }
} 
```

工作完成后，您可以引发域事件来通知子系统。**

# node.js - 使用 EJS 模板，深层 url 无法正确解析公共资源

> ID：11189299
> 
> 赞同：1
> 
> 时间：2012-06-25T12:21:17.627
> 
> 标签：node.js, express, ejs

我使用 ejs 作为模板引擎，默认布局关闭，但我通过 {layout:True} 按需激活它，我有两个 url '/' 和 '/session/new'，css 和 js 在前者中显示正常，但在第二个他们将寻址到“http: **//localhost/sessions/public/stylesheets/my.css** ”

我尝试使用*stylesheet_link_tag*，如此处所示（http://railwayjs.com/），但我想它只适用于railwayjs，我有什么遗漏吗？

我正在考虑一种解决方法，即在链接之前添加一个深度变量，并根据路线填充“/..”

这是我的配置

```
app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.set('view options', {layout: false});
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
  }); 
```

# javascript - 如何添加自定义 css3 动画以及悬停时的过渡？

> ID：11189300
> 
> 赞同：0
> 
> 时间：2012-06-25T12:21:27.870
> 
> 标签：javascript, jquery, css

我已经设置了一个基本的 CSS3 动画测试，它增加和减少元素的背景大小，当您单击其中一个元素时，将切换活动类并发生过渡。我的问题是，当删除 .active 类时，动画不再发生，因为我已将动画重置为无。谁能告诉我如何解决这个问题？

CSS

```
html{height:100%;}
body {background:#000;height:100%;min-height:100%;padding:20px}
ul{height:100%;display:block}
li{float:left;margin-right:30px;position:relative;}

@-webkit-keyframes throb_outer {
      0% { background-size:1px 100%; }
      100% { background-size:1px 130%; }
}

@-webkit-keyframes throb_inner {
      0% { background-size:1px 100%; }
      100% { background-size:1px 115%; }
}

.outer{display:block;width:50px;padding:0 1px;cursor: pointer;
-webkit-animation: throb_outer 2s infinite alternate;
}

.b{background: -webkit-linear-gradient(black 30%, rgba(41,184,229,1) 50%, black 70%) repeat-x; }
.g{background: -webkit-linear-gradient(black 20%, rgba(33, 130, 61, 1) 50%, black 80%) repeat-x;}
.r{background: -webkit-linear-gradient(black 40%, rgba(255,0,0,1) 50%, black 60%) repeat-x;}

.li{height:100%;-webkit-transition: background-size .3s linear;
    background-position:0 50%;
    background-size:1px 100%;}

.inner{
    width:100%;
    display:block;
        -webkit-animation: throb_inner 2s infinite alternate;
}

.outer.active{-webkit-animation:none;background-size:1px 200%;}
.outer.active .inner{-webkit-animation:none;background-size:1px 150%;}
​ 
```

JS

```
$(document).ready(function() {

    $('#test').children().on('click', function(e) {

        $(this).toggleClass('active');

    });

}); 
```

在这里小提琴：http: [//jsfiddle.net/VQaGh/22/](http://jsfiddle.net/VQaGh/22/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:31:01.997

据我了解，你想要这样的效果

试试这个[http://jsfiddle.net/Sk2sX/](http://jsfiddle.net/Sk2sX/)

我已经修改了css和js希望它对你有帮助

对于任何关于代码的查询发表评论

# node.js - Node.js 的异步实用程序回调函数未执行

> ID：11189301
> 
> 赞同：0
> 
> 时间：2012-06-25T12:21:27.507
> 
> 标签：node.js, asynccallback

我正在尝试对 node.js 使用异步实用程序。下面是我的代码。控制台打印“In my func1”和“In my func2”。我也希望它打印“回调函数”，但它不会

```
var myfunc1 = function(callback) {
var a = 1;
console.log ("In my func1");
};
var myfunc2 = function(callback) {
var b = 2;
console.log ("In my func2");
};

models.Picture.prototype.relativeSort = function(viewer_location) {
console.log("Rel Sort");

var sortedPics = [];
var relsortedPics = [];

 // Finds all the pictures
 async.series([myfunc1(), myfunc2()],
 function(err, results){
    if(err) {
        throw err;
    }
 console.log("call back func");
    return a+b;
    });
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:33:57.547

您需要使用`callback`参数，例如：

```
var myfunc1 = function(callback) {
    var a = 1;
    console.log ("In my func1");
    callback(null, 'test');
}; 
```

的第一个参数`callback`是错误，第二个参数是您要传递给最终处理程序的结果。

**编辑**

我错过了另一个错误。这一行：

```
async.series([myfunc1(), myfunc2()], 
```

应该

```
async.series([myfunc1, myfunc2], 
```

你不应该**调用**函数。你在说`async`：“嘿，使用这些函数并用它们做一些事情（异步）！”。

# java - 可以在没有VM的情况下创建JIT编译器

> ID：11189305
> 
> 赞同：0
> 
> 时间：2012-06-25T12:21:40.593
> 
> 标签：java, jit, aot, vm-implementation

我可以创建一个在运行时将代码编译为机器代码的 JIT 编译器，因此如果我正在创建一种语言，我不需要虚拟机吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:24:05.723

您可以创建一个从字节码到本机代码的编译器，但这与 JVM 的 JIT 完全不同，它使用运行时统计信息来决定如何编译某些字节码，甚至在条件发生变化时重新编译相同的代码。

有现有的字节码到本机编译器。谷歌为它。例如，[GCJ](http://gcc.gnu.org/java/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:12:43.393

您可以将 Java 字节码编译为 JVM 之外的本机代码。GCJ 是一个示例，另一个是用于在 JNode 中准备启动映像的编译器。但是，以这种方式工作（或使用）的编译器是 Ahead Of Time 编译器，而不是 Just In Time 编译器。

# mysql - 双人组

> ID：11189313
> 
> 赞同：3
> 
> 时间：2012-06-25T12:22:21.263
> 
> 标签：mysql, sql

我有两列的表：名称和等级。它看起来像这样：

```
姓名 | 年级
亚当 | 1
亚当 | 2
亚当 | 2
亚当 | 3
弗兰克 | 2
弗兰克 | 1

```

现在我想创建如下所示的视图：

```
姓名 | 1 级 | 2 级 | 3 级
亚当 | 1 | 2 | 1
弗兰克 | 1 | 1 | 0

```

我写过这个：

```
选择名称，
    （选择计数（等级）
    来自 dbo.Rodzaj
    WHERE Grade = '1') 作为 Grade_1，  
    （选择计数（等级）
    来自 dbo.Rodzaj
    WHERE Grade = '2) as Grade_2,  
    （选择计数（等级）
    来自 dbo.Rodzaj
    WHERE Grade = '3') as Grade_3
来自 dbo.Rodzaj
按名称分组

```

但它不起作用......我会很感激任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:24:47.293

您要查找的内容称为“数据透视表”，它是通过一系列`CASE`语句完成的，这些语句对每个条件应用 1 或 0，然后`SUM()`将 1 和 0 向上以检索计数。

```
SELECT
  NAME,
  SUM(CASE WHEN GRADE = 1 THEN 1 ELSE 0 END) AS GRADE1,
  SUM(CASE WHEN GRADE = 2 THEN 1 ELSE 0 END) AS GRADE2,
  SUM(CASE WHEN GRADE = 3 THEN 1 ELSE 0 END) AS GRADE3
FROM Rodzaj
GROUP BY NAME 
```

请注意，如果您需要动态列数，则必须使用脚本语言和循环来构造查询。（或存储过程中的循环）

# java - 如何解决 java 中的 com.sun.mail.smtp.SMTPSendFailedException？

> ID：11189320
> 
> 赞同：2
> 
> 时间：2012-06-25T12:23:08.890
> 
> 标签：java, email

我正在创建一个向用户发送邮件的应用程序。

但问题是当我使用 Transport.send(msg) 方法时，它显示以下错误：

```
com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. 
```

我正在使用以下属性发送邮件。

```
 props.put("mail.transport.protocol", "smtp");
        props.put("mail.host", smtpHostName);
        props.put("mail.user", smtpUser);
        props.put("mail.password", smtpPass);
        props.put("mail.smtp.auth", smtpAuth == 1 ? true : false);
        props.put("mail.port", smtpPort);
        props.put("mail.smtp.starttls.enable", smtpTLS == 1 ? true : false); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:30:03.540

试试这个

```
props.put("mail.smtp.host", host);
props.put("mail.smtp.auth", "true");
props.put("mail.debug", "false");
props.put("mail.smtp.port", port); 
```

在创建会话时使用此身份验证代码

```
l_session = Session.getInstance(props,
                new javax.mail.Authenticator() {

                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(username, password);
                    }
                });

        l_session.setDebug(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T10:57:30.413

我们的环境在 WebSphere 7 下运行。为了支持安全 smtps，打开 SMTPS AUTHorization 的正确变体是：

“mail.smtp **s** .auth=true”

实际上，根据反编译的来源，在授权邮件会话之前，WebSphere 会检查是否有一个属性组成为：“mail.”+ transportProtocol +“.auth”设置为“true”。这有助于我通过 gmail 发送电子邮件。

# jsp - 如何设置（点）。使用jsp在范围内分隔变量

> ID：11189321
> 
> 赞同：3
> 
> 时间：2012-06-25T12:23:11.270
> 
> 标签：jsp, jstl

我想在jsp中设置一个值。我知道可以很容易地设置

```
 <c:set var="myVar" value="100" scope="session"/> 
```

但问题是我的变量名由点（。）分隔，如 我尝试通过这种方式设置的**sports.football.kick**

```
 <c:set var="sports.football.kick" value="100" scope="session"/> 
```

但它没有设置。如何使用 jsp 在范围内设置这种类型的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:01:57.293

那应该工作得很好。显然你以错误的方式访问它。应该使用会话映射上的大括号符号来访问它。

```
${sessionScope['sports.football.kick']} 
```

# actionscript-3 - 为什么我应该使用 XMLLIst 而不是简单的 XML？

> ID：11189322
> 
> 赞同：0
> 
> 时间：2012-06-25T12:23:10.883
> 
> 标签：actionscript-3, flash, apache-flex

为什么我应该使用 XMLList 而不是 XML。换句话说，一个 XMLList 可以做什么，而一个简单的普通 XML 类却不能做什么？毕竟，每个 XMLList 都只是一个 XML。（我对 XML 很特别，因为 Arraylist 等其他列表结构在情况下有所不同）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:37:28.933

我的理解是[XMLList](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XMLList.html)是[XML](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html)文档的集合。IT 可以是一个子集，也可以是不同 XML 元素的集合。引用 XMLList 文档：

> XMLList 对象可以表示一个或多个 XML 对象或元素（包括多个节点或属性），因此您可以将元素作为一个组或集合中的单个元素调用方法。

您还可以将 XMLList 包装在[XMLLIstCollection 中](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/XMLListCollection.html)，并将其用作 Flex 中基于列表的对象的 dataProvider。

[Adobe Docs 关于使用 XML](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ff5.html)的这一部分应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:21:05.607

假设您想使用递归从 XML 中提取特定数据：

```
public static function getNodesByName(myXML_:XMLList, nodeName_:String) : XMLList {
    var result:XMLList = new XMLList();
    for (var i1:Number = 0; i1 < myXML_.children().length(); i1++ ) {
        if (myXML_.children()[i1].name() == nodeName_) {
            result += myXML_.children()[i1].valueOf();
        } else if (myXML_.children()[i1].children()) { 
            result += getNodesByName(XMLList(myXML_.children()[i1].valueOf()), nodeName_);
        }
    }
    return result;
} 
```

该算法返回满足特定要求的节点列表，在这种情况下是具有相同名称的节点。如您所见，在将 XML 结构转换为新的 XML 文档之前，该列表使操作 XML 结构变得更加容易。

# android - 我可以在一个 ListView 项目中有不同的可点击视图吗？

> ID：11189323
> 
> 赞同：1
> 
> 时间：2012-06-25T12:23:16.423
> 
> 标签：android, listview, clickable

我有一个自定义 ListView，它有一个 ImageView 和一个 TextView。我实现了 ListView.setOnItemSelectedListener();

但这是一种使 ImageView 和 TextView 都可点击（单独）的方法，我的意思是点击 ImageView 必须调用 ActivityA，点击 TextView 必须调用 ActivityB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:25:10.613

是的，您可以在 Adapter 类本身中执行此操作。只需在 Adapter 类中设置 ImageView 和 Textview 的点击侦听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:32:04.940

是的当然！

在您的自定义 ListAdapter 中，您可以设置 onClickListener，如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if( row == null ){
        LayoutInflater vi = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = vi.inflate(this.textViewResourceId, null);
    }

    row.findViewById(R.id.image_item).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        }
    });

    row.findViewById(R.id.text_item).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        }
    });     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:30:48.180

是的，你当然可以做到这一点。您可以在适配器类中分别对它们设置 onClickListener，然后使用 onItemClickListener 将这些按钮或文本视图设置为不可聚焦，如果您希望在单击整个列表项时执行不同的操作。

```
 yourButton.setFocusable(false);
        yourButton.setFocusableInTouchMode(false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T12:27:18.593

有很多相同的例子

像[这样](https://stackoverflow.com/questions/1821871/android-how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)

点应该保持

*   您需要在 getView 中为每个视图设置侦听器（不要在每次获取视图中创建，只需传递已经创建的一个，或者可以传递它并在同一个适配器类中实现侦听器）

*   使视图（如 TextView ）可点击 true

*   您还需要行位置，以便可以使用不同的逻辑，如获取和设置标签或在此[链接中查看参数](https://stackoverflow.com/a/11188879/804447)

# drupal - 带有 drupal(7) 视图的自定义图像字段 3

> ID：11189325
> 
> 赞同：0
> 
> 时间：2012-06-25T12:23:20.240
> 
> 标签：drupal, drupal-7, drupal-views, cck

我为视图中的一个字段创建了自定义主题外观，并添加了字段 field_field_services_text_link[0]['rendered']['#markup'];?>。我试图对我的另一个图像字段做同样的事情，但它不起作用。我用 field_field_services_image[0]['rendered']]['uri']; ?>，但这段代码有问题。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:55:54.520

要解决此问题，也许以下内容会有所帮助。将其粘贴到您的主题文件中，而不是上面的内容

```
<?php print_r($field_field_services_image); ?> 
```

print_r 函数将向您显示您正在尝试使用的**数组**($field_field_services_image) 的结构，并可以显示该结构是否完全符合您的预期。也许 [0]['rendered']... 部分的某处有问题，您可以检查一下。它可能在某个地方是空的，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:36:57.217

您总是可以看到使用 var dump 或更好的 devel 模块输出的内容。

# c# - 如何计算字符串中的行数？

> ID：11189331
> 
> 赞同：49
> 
> 时间：2012-06-25T12:23:50.070
> 
> 标签：c#

**我正在从字符串中删除文本以及用空行替换每一行的内容。**

***一些背景：*** 我正在编写一个比较两个字符串的比较函数。它一切正常，并显示在两个单独的网络浏览器中。当我尝试在浏览器上向下滚动时，字符串的长度不同，我想用空行替换要删除的文本，以便我的字符串长度相同。

**在下面的代码中，我希望计算 aDiff.Text 有多少行**

**这是我的代码：**

```
public string diff_prettyHtmlShowInserts(List<Diff> diffs)
    {
        StringBuilder html = new StringBuilder();

        foreach (Diff aDiff in diffs)
        {
            string text = aDiff.text.Replace("&", "&amp;").Replace("<", "&lt;")
              .Replace(">", "&gt;").Replace("\n", "<br>"); //&para;
            switch (aDiff.operation)
            {

                case Operation.DELETE:                              
                   //foreach('\n' in aDiff.text)
                   // {
                   //     html.Append("\n"); // Would like to replace each line with a blankline
                   // }
                    break;
                case Operation.EQUAL:
                    html.Append("<span>").Append(text).Append("</span>");
                    break;
                case Operation.INSERT:
                    html.Append("<ins style=\"background:#e6ffe6;\">").Append(text)
                        .Append("</ins>");
                    break;
            }
        }
        return html.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-25T12:31:44.593

**方法一：**

```
int numLines = aDiff.text.Length - aDiff.text.Replace _
                   (Environment.NewLine, string.Empty).Length; 
```

**方法二：**

```
int numLines = aDiff.text.Split('\n').Length; 
```

两者都会为您提供文本中的行数。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-12-02T09:07:20.023

不分配新字符串或字符串数​​组的变体

```
private static int CountLines(string str)
{
    if (str == null)
        throw new ArgumentNullException("str");
    if (str == string.Empty)
        return 0;
    int index = -1;
    int count = 0;
    while (-1 != (index = str.IndexOf(Environment.NewLine, index + 1)))
        count++;

   return count + 1;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-01-19T08:55:30.267

您还可以使用 Linq 来计算行的出现次数，如下所示：

```
int numLines = aDiff.Count(c => c.Equals('\n')) + 1; 
```

迟到了，但提供了其他答案的替代方案。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-25T12:32:10.700

效率低下，但仍然：

```
var newLineCount = aDiff.Text.Split('\n').Length -1; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-26T04:45:33.117

我对不同的方法（Split、Replace、for loop over chars、Linq.Count）进行了一系列性能测试，获胜者是 Replace 方法（当字符串小于 2KB 时，Split 方法稍快，但不多）。

但是接受的答案中有2个错误。一个错误是当最后一行不以换行符结尾时，它不会计算最后一行。另一个错误是，如果您在 Windows 上读取具有 UNIX 行结尾的文件，则它不会计算任何行，因为 Environment.Newline`\r\n`存在且不存在（您始终可以使用`\n`，因为它是行结尾的最后一个字符UNIX 和 Windows）。

所以这里有一个简单的扩展方法......

```
public static int CountLines(this string text)
{
    int count = 0;
    if (!string.IsNullOrEmpty(text))
    {
        count = text.Length - text.Replace("\n", string.Empty).Length;

        // if the last char of the string is not a newline, make sure to count that line too
        if (text[text.Length - 1] != '\n')
        {
            ++count;
        }
    }

    return count;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-27T09:39:09.100

高效且成本最低的内存。

```
Regex.Matches( "Your String" , System.Environment.NewLine).Count ; 
```

当然，我们可以扩展我们的字符串类

```
using System.Text.RegularExpressions ;

public static class StringExtensions
{
    /// <summary>
    /// Get the nummer of lines in the string.
    /// </summary>
    /// <returns>Nummer of lines</returns>
    public static int LineCount(this string str)
    {
        return Regex.Matches( str , System.Environment.NewLine).Count ;
    }
} 
```

参考 : [µBio](https://stackoverflow.com/a/3016577/2103503) , [Dieter Meemken](https://stackoverflow.com/a/36573962/2103503)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-20T15:04:20.410

```
int newLineLen = Environment.NewLine.Length;
int numLines = aDiff.text.Length - aDiff.text.Replace(Environment.NewLine, string.Empty).Length;
if (newLineLen != 0)
{
    numLines /= newLineLen;
    numLines++;
} 
```

稍微更健壮，占第一行，其中不会有换行符。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-05T16:10:20.807

在这里聚会迟到了，但我认为这可以处理所有行，甚至最后一行（至少在 Windows 上）：

```
Regex.Matches(text, "$", RegexOptions.Multiline).Count; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-04-12T12:55:19.463

为了方便起见，我将来自[poncha](https://stackoverflow.com/users/620813/poncha)的解决方案放在了一个很好的扩展方法中，所以你可以像这样简单地使用它：

```
int numLines = aDiff.text.LineCount(); 
```

编码：

```
/// <summary>
/// Extension class for strings.
/// </summary>
public static class StringExtensions
{
    /// <summary>
    /// Get the nummer of lines in the string.
    /// </summary>
    /// <returns>Nummer of lines</returns>
    public static int LineCount(this string str)
    {
        return str.Split('\n').Length;
    }
} 
```

玩得开心...

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-08-08T15:05:48.517

```
using System.Text.RegularExpressions;

Regex.Matches(text, "\n").Count 
```

考虑到速度和内存使用情况，我认为计算出现次数`'\n'`是最有效的方法。

使用`split('\n')`是一个坏主意，因为它会生成新的字符串数组，因此性能和效率都很差！特别是当您的字符串变大并包含更多行时。

用空字符替换`'\n'`字符并计算差异也不是很有效，因为它应该做一些操作，比如搜索、创建新字符串和内存分配等。

您可以只执行一项操作，即**search**。因此，正如@lokimidgard 建议的那样，您可以只计算`'\n'`字符串中字符的出现次数。

值得一提的是，搜索`'\n'`字符比搜索`"\r\n"`（或`Environment.NewLine`在 Windows 中）要好，因为前者 (ie `'\n'`) 适用于 Unix 和 Windows 行尾。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-30T17:04:15.630

```
public static int CalcStringLines(string text)
{
    int count = 1;
    for (int i = 0; i < text.Length; i++)
    {
        if (text[i] == '\n') count++;
    }

    return count;
} 
```

这是最快/最简单/无内存分配的方法......

# c# - 如何使这个 Ajax ModalPopUp 与这个 GridView 一起工作？

> ID：11189335
> 
> 赞同：0
> 
> 时间：2012-06-25T12:24:01.413
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有一个 GridView 显示用户提交并存储在数据库中的建议。在最后一列中，将显示状态。我想让此列成为可点击的，当管理员单击它时，将使用显示状态的 RadioButtonList 查看 ModalPopUp 窗口（Ajax ModalPopUpExtender）。我刚开始编写代码，遇到了很多问题。我修复了所有这些，除了以下一个：

> ***未知的服务器标签“AjaxToolKit：ModalPopUpExtender”***

我不知道如何修复错误。**你能帮我吗？**

我的 ASP.NET 代码：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
    <asp:TabContainer CssClass="tabCont" ID="TabContainer1" runat="server" ActiveTabIndex="0" Height="500px" ScrollBars="Auto" Width="100%">
        <asp:TabPanel ID="All_SafetySuggestions_Tab" HeaderText="All" runat="server">
        <ContentTemplate>
            <div>
    <strong> Division </strong>
    <asp:DropDownList ID="ddlDivision" runat="server" AppendDataBoundItems="True" 
        AutoPostBack="True" DataSourceID="sqlDataSourceDivision" DataTextField="DivisionShortcut" 
        DataValueField="DivisionShortcut"  
        Width="175px" EnableViewState="False">
        <asp:ListItem Value="%">All</asp:ListItem>
    </asp:DropDownList>

    <br />  <br />  

        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="DivisionShortcut" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionTitle_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:Panel runat="server" ID="pnlPopUp">
            <table id="suggestionStatus">
                <tr>
                    <asp:RadioButtonList ID="StatusList" runat="server">
                        <asp:ListItem>Received</asp:ListItem>
                        <asp:ListItem>Pending</asp:ListItem>
                        <asp:ListItem>Actioned</asp:ListItem>
                        <asp:ListItem>Transferred</asp:ListItem>
                    </asp:RadioButtonList>
                </tr>
                <tr>
                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />
                </tr>
            </table>
            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
            SelectCommand="SELECT     dbo.SafetySuggestionsLog.ID, dbo.SafetySuggestionsLog.Title, dbo.SafetySuggestionsLog.Description, dbo.employee.Name, dbo.SafetySuggestionsLog.Username, 
                      dbo.Divisions.DivisionShortcut, dbo.SafetySuggestionsType.Type, dbo.SafetySuggestionsStatus.Status
FROM         dbo.employee INNER JOIN
                      dbo.SafetySuggestionsLog ON dbo.employee.Username = dbo.SafetySuggestionsLog.Username INNER JOIN
                      dbo.Divisions ON dbo.employee.DivisionCode = dbo.Divisions.SapCode INNER JOIN
                      dbo.SafetySuggestionsType ON dbo.SafetySuggestionsLog.TypeID = dbo.SafetySuggestionsType.ID INNER JOIN
                      dbo.SafetySuggestionsStatus ON dbo.SafetySuggestionsLog.StatusID = dbo.SafetySuggestionsStatus.ID"
                      FilterExpression="[DivisionShortcut] like '{0}%'">

                      <FilterParameters>
                        <asp:ControlParameter ControlID="ddlDivision" Name="DivisionShortcut" 
                                                 PropertyName="SelectedValue" Type="String" />
                    </FilterParameters>
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="sqlDataSourceDivision" runat="server" 
        ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
        SelectCommand="SELECT [DivisionShortcut] FROM [Divisions]"></asp:SqlDataSource>

       </div>
       </ContentTemplate>
   </asp:TabPanel> 
```

我的 C# 代码隐藏：

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {

        modalPopUpExtender1.Show();
    } 
```

此外，关于将在 ModalPopUp 窗口中显示的 RadioButtonList 值，**如何将其绑定到数据库？**

供您参考，数据库设计如下：

```
Employee Table: Username, Name
SafetySuggestionsLog Table: ID, Title, Description, Username, StatusID
SafetySuggestionsStatus Table: ID, Status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:35:02.687

好的，你做错了什么：

您正在通过其程序集名称调用 AJAXControl。你应该使用：

```
 <asp:ModalPopUpExtender />
instead of
    <AjaxToolkit:ModalPopUpExtender /> 
```

这可能会使模态弹出窗口工作！

# xpages - 我需要在 xagents 中编写代码以将数据从 .csv 文件提取到 lotus notes

> ID：11189338
> 
> 赞同：0
> 
> 时间：2012-06-25T12:24:11.103
> 
> 标签：xpages, xpages-ssjs

我有一个要求，我需要在 SSJS 中编写代码以将数据从 .csv 文件提取到 Lotus Notes。

我在网上搜索了很多并找到了用于导出的代码，但没有找到导入代码的运气。

我是 xPages 和 SSJS 的新手，所以任何参考资料都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:47:21.740

以下链接来自 TLCC，他们有一些很好的学习资源。本教程介绍了如何从示例 CSV 文件中导入数据。希望能帮助到你。

[http://www.tlcc.com/admin/Tips.nsf/0/513dfd72d03a9fe38525718b006fa5a8?OpenDocument&TableRow=8.1](http://www.tlcc.com/admin/Tips.nsf/0/513dfd72d03a9fe38525718b006fa5a8?OpenDocument&TableRow=8.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:04:24.450

我会用`java.util.Scanner`. 它可以为您扫描文件并将其撕成碎片：

```
Scanner scanner = new Scanner(cFile);
while (scanner.hasNextLine()) {
String curLine = scanner.nextLine().trim();
    this.processRow(curLine);
}

private void processRow(String workString) {
     Scanner lineScanner = new Scanner(workString);
 lineScanner.useDelimiter(",");
     // .next goes through the elements
     lineScanner.next();

} 
```

让我们知道怎么回事。您可能会面临一些有趣的挑战，具体取决于 CSV 文件的结构（这就是您可能需要在此处编写一些复杂代码的原因）

它可能是：number,string,string,"String with , inside",String,number 所以如果你只用 , 在里面“转义”字符串，你就有麻烦了。如果所有字符串都在 "" 中，那么您需要剥离这些，并且您有多个分隔符要处理： Number,"String Number,Number "String","String" String",Number 所以它变得有点复杂，你可能想要使用字节数组和状态来遍历各个行。

或者，您可以[试一试 OpenCVS](http://opencsv.sourceforge.net/)

# string - 忽略 \n（换行符）

> ID：11189339
> 
> 赞同：4
> 
> 时间：2012-06-25T12:24:16.737
> 
> 标签：string, matlab, newline

我得到一个包含两行句子的字符串：

```
'hello this is my first.
program matlab' 
```

我想将句子更改为在线表示：

```
'hello this is my first.program matlab' 
```

我怎么能用 matlab 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:27:40.810

替换所有出现的`\n`to`''`

```
 myNewSt = strrep(mySt,sprintf('\n'),''); 
```

例如，键入：

```
 strrep( sprintf('this is my \n string'),sprintf('\n'),'') 
```

# logging - NTEventLogAppender 的源代码示例？

> ID：11189343
> 
> 赞同：3
> 
> 时间：2012-06-25T12:24:27.203
> 
> 标签：logging, log4j, event-log, event-viewer

我正在尝试学习如何从 java eclipse 登录到事件查看器，并且我已经阅读了有关堆栈溢出的 api、各种站点和类似问题。

但是，当我按照这些步骤进行操作时，我总是会得到：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Ljava/lang/String;Ljava/lang/String;)I
at org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Native Method)
at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:79)
at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:65) 
```

来源应该是什么？

如果有人能展示这样一个程序的完整示例，那就太好了。请尽可能详细，谢谢。

我现在的代码是：

```
package Output;

import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.ConsoleAppender;
import org.apache.log4j.Level;
import org.apache.log4j.Logger;
import org.apache.log4j.PatternLayout;
import org.apache.log4j.PropertyConfigurator;
import org.apache.log4j.nt.NTEventLogAppender;

public class EventLog {
    public static void main(String[] args) 
    {   

        Logger myLogger = Logger.getLogger(EventLog.class);

        String mySource = "the source";
        PatternLayout myLayout = new PatternLayout("[%c][%l][%p][%thread]: %m%n");

        NTEventLogAppender eventLogAppender= new NTEventLogAppender(mySource,myLayout);

        ConsoleAppender consoleAppender= new ConsoleAppender(myLayout);

        myLogger.addAppender(consoleAppender);
        myLogger.addAppender(eventLogAppender);

        myLogger.setLevel(Level.WARN);

        myLogger.fatal("Come on print");
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T01:27:38.867

我也只是在研究如何做到这一点。我没有足够的时间来测试这个答案，但是从我所读到的错误是由于在正确的位置没有正确的 .dll 文件引起的。

“不要忘记将 NTEventLogAppender.dll、NTEventLogAppender.amd64.dll、NTEventLogAppender.ia64.dll 或 NTEventLogAppender.x86.dll 适当地放在 Windows 系统的 PATH 上的目录中。否则，您将获得一个 java.util.dll 文件。 lang.UnsatisfiedLinkError"

*   [http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/nt/NTEventLogAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/nt/NTEventLogAppender.html)
*   [http://logging.apache.org/log4j/1.2/faq.html](http://logging.apache.org/log4j/1.2/faq.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-02T05:57:03.627

而不是使用这个，使用 eventcreate.exe 命令......它做同样的工作并且更容易`

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Locale;
import java.util.concurrent.TimeUnit;
import java.util.stream.Collectors;

public class WriteToWindowsEventLog {
   static int id=0;
    public void log(String source,String level,String message)  throws IOException, InterruptedException{
        String osName = System.getProperty("os.name").toUpperCase(Locale.ENGLISH);
        if (!osName.startsWith("WINDOWS")) {
            System.err.println("Not windows");
            return;
        } 
        id++;

        String command = "eventcreate "
                + " /l APPLICATION"
                + " /so \"" + source + "\""
                + " /t " +level
                + " /id " + id
                + " /d \"" + message + "\"";

        Process process = Runtime.getRuntime().exec(command);
        process.waitFor(10, TimeUnit.SECONDS);
        int exitValue = process.exitValue();
        if (exitValue != 0) {
            InputStream errorStream = process.getErrorStream();
            String result = new BufferedReader(new InputStreamReader(errorStream))
                .lines()
                .collect(Collectors.joining("\n"));
            System.err.println(result);
        }
    }

} 
```

`

# iphone - 为 UITableViewCell 设置动态高度，其中只有图像（可变高度）

> ID：11189351
> 
> 赞同：2
> 
> 时间：2012-06-25T12:24:53.073
> 
> 标签：iphone, ios, uitableview, uiimageview, uiimage

我有一个 UITableView 其单元格将只包含可变高度的图像，我根据图像动态设置行高，它不能完美地工作，滚动时的图像有时会重叠。这是代码......

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [artistfeeds count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[self.newsTableView dequeueReusableCellWithIdentifier:@"artistFeedCell"];

    UIImageView *imgView=[[UIImageView alloc]initWithImage:((ESArtistFeedObject*)[artistfeeds objectAtIndex:indexPath.section]).image];
    [cell.contentView addSubview:imgView];
    [cell.contentView sizeToFit];
    return  cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat height=((ESArtistFeedObject*)[artistfeeds objectAtIndex:indexPath.section]).image.size.height;
    NSLog(@"section: %i, image height: %f",indexPath.section,height);
    return height;
}

-(void)artistFeedFound:(NSNotification*)notification
{
    //NSLog(@"%@",[notification userInfo]);
    artistfeeds=[[NSMutableArray alloc]init];
    if([[[[notification userInfo]objectForKey:@"artistfeed"]objectForKey:@"artist"] isKindOfClass:[NSArray class]])
    {
        for(NSDictionary *tempDict in [[[notification userInfo]objectForKey:@"artistfeed"]objectForKey:@"artist"])
        {
            ESArtistFeedObject *artistFeed=[[ESArtistFeedObject alloc]init];
            artistFeed.name=[tempDict objectForKey:@"name"];
            artistFeed.type=[tempDict objectForKey:@"postType"];
            artistFeed.desc=[tempDict objectForKey:@"postDesc"];
            if(![artistFeed.type isEqualToString:@"photo"])
                artistFeed.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://c0364947.cdn2.cloudfiles.rackspacecloud.com/%@",[tempDict objectForKey:@"artist_image"]]]]];
            else
                artistFeed.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[tempDict objectForKey:@"photo"]]]];
            [artistfeeds addObject:artistFeed];
        }
    }
    [self.newsTableView reloadData];

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:49:16.960

您缺少 cellForRowAtIndexPath 中的代码，该代码在没有可重用的单元格时实际创建单元格。

```
//assuming there is a class property `int cellImageTag = 100;`
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[self.newsTableView dequeueReusableCellWithIdentifier:@"artistFeedCell"];
    UIImageView *imgView;
    if(cell == nil)
    {
      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"artistFeedCell"];
      imgView = [[UIImageView alloc] init];
      imgView.tag = cellImageTag;
      [cell.contentView addSubview:imgView];
    }
    else
    {
      imgView = [cell.contentView viewWithTag:cellImageTag];
    }
    imgView.image = ((ESArtistFeedObject*)[artistfeeds objectAtIndex:indexPath.section]).image;
    [cell.contentView sizeToFit];
    return  cell;
} 
```

**编辑：**错过了关于故事板的评论

**edit2：**我认为这是由于您每次加载单元格时创建并添加新的 UIImageView 子视图所致。我不确定 Storyboards 如何处理单元格的重用，但一般来说，你的类会有一个标签 ivar 或常量来跟踪你想在单元格中重用的视图的标签。以更新我的代码为例。

**edit3：**下面的代码应该适用于情节提要

```
//assuming there is a class property `int cellImageTag = 100;`
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[self.newsTableView dequeueReusableCellWithIdentifier:@"artistFeedCell"];
    UIImageView *imgView = [cell.contentView viewWithTag:cellImageTag];
    if(!imgView)
    {
      imgView = [[UIImageView alloc] init];
      imgView.tag = cellImageTag;
      [cell.contentView addSubview:imgView];
    }
    imgView.image = ((ESArtistFeedObject*)[artistfeeds objectAtIndex:indexPath.section]).image;
    [cell.contentView sizeToFit];
    return  cell;
} 
```

# c# - 使用 xaml 设计项目模板

> ID：11189356
> 
> 赞同：0
> 
> 时间：2012-06-25T12:25:22.137
> 
> 标签：c#

我必须设计一个类似计算器的界面。我对如何做到这一点完全感到困惑。任何人都可以为我提供见解吗？如何在运行时将数据与这些按钮绑定。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:26:47.673

好的，这个工作正常 - 基本上我创建了以下 XAML 布局并使用以下绑定：

```
<Grid x:Name="grdItems">
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <Button Content="{Binding Items[0].ItemName}"></Button>
        <Button Content="{Binding Items[1].ItemName}" Grid.Column="1"></Button>
        <Button Content="{Binding Items[2].ItemName}" Grid.Column="2"></Button>
        <Button Content="{Binding Items[3].ItemName}" Grid.Row="1"></Button>
        <Button Content="{Binding Items[4].ItemName}" Grid.Row="1" Grid.Column="1"></Button>
        <Button Content="{Binding Items[5].ItemName}" Grid.Row="1" Grid.Column="2"></Button>
        <Button Content="{Binding Items[6].ItemName}" Grid.Row="2"></Button>
        <Button Content="{Binding Items[7].ItemName}" Grid.Row="2" Grid.Column="1"></Button>
        <Button Content="{Binding Items[8].ItemName}" Grid.Row="2" Grid.Column="2"></Button>
        <Button Content="Prev" Command="{Binding MovePrevCommand}" Grid.Row="3"></Button>
        <Button Content="{Binding Items[9].ItemName}" Grid.Row="3" Grid.Column="1"></Button>
        <Button Content="Next" Command="{Binding MoveNextCommand}" Grid.Row="3" Grid.Column="2"></Button>
    </Grid> 
```

这为您提供了网格布局

然后我创建了一个可以执行“窗口视图”的集合管理器类

```
class TestCollection
{
    public ObservableCollection<TestItem> Items { get; set; }

    List<TestItem> _items = new List<TestItem>();
    int pos = 0;

    public TestCollection(int size)
    {
        MoveNextCommand = new Command(new Action(MoveNext));
        MovePrevCommand = new Command(new Action(MovePrev));

        Items = new ObservableCollection<TestItem>();
        for (int i = 0; i < size; i++)
        {
            _items.Add(new TestItem("Item " + i.ToString()));
        }

        UpdateItems();
    }

    public void MoveNext()
    {
        pos += 10;

        if (pos > _items.Count - 10)
            pos = _items.Count - 10;

        UpdateItems();
    }

    public ICommand MoveNextCommand { get; set; }
    public ICommand MovePrevCommand { get; set; }

    public void MovePrev()
    {
        pos -= 10;

        if (pos < 0)
            pos = 0;

        UpdateItems();
    }

    private void UpdateItems()
    {
        Items.Clear();

        foreach (var i in _items.Skip(pos).Take(10))
        {
            Items.Add(i);
        }

   }

} 
```

我创建了一个简单的 ICommand 实现来调用委托：

```
class Command : ICommand
{
    Action CallBack = null;

    public Command(Action cb)
    {
        CallBack = cb;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        CallBack();
    }
} 
```

TestItem 只是一个带有 ItemName 属性的简单类

```
class TestItem
{
    public string ItemName { get; set; }

    public TestItem(string itemName)
    {
        ItemName = itemName;
    }
} 
```

然后在我添加的主应用程序代码中

```
 var i = new TestCollection(2000);

 grdItems.DataContext = i; 
```

将集合连接到网格。效果很好 - 如果您按下按钮，您可以将命令绑定添加到您的项目以获得所需的效果（假设您当然需要每个项目的按钮！）

让我知道这是否可以帮助您入门，或者是否有任何您不明白的地方（或者这甚至可以在 Metro 上使用！！）

**编辑：**刚刚阅读，似乎 IObservableVector 现在取代了 WinRT 中的 ObservableCollection

这是 2012 年 1 月，所以可能是从那以后更新添加了 ObservableVector 的实现 - 但从本文看来，您需要实现它

[http://blogs.u2u.be/diederik/post/2012/01/03/Hello-ObservableVector-goodbye-ObservableCollection.aspx](http://blogs.u2u.be/diederik/post/2012/01/03/Hello-ObservableVector-goodbye-ObservableCollection.aspx)

反正代码就在那里，所以不需要脑力！

# jquery - Juice UI：Slider 滑动属性

> ID：11189360
> 
> 赞同：0
> 
> 时间：2012-06-25T12:25:29.547
> 
> 标签：jquery, juice-ui

在 jQuery 层上，“slider”控件有一个名为“slide”的属性。所以你可以定义一个回调函数，当滑块改变它的值时调用。例如，您可以修改输入控件中的值。我的问题：果汁层上有滑动属性吗？或者谁能​​告诉我，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:11:52.783

jQuery 有许多滑块插件 - Juice UI 使用 jQuery UI 中的滑块小部件。那里有很大的区别。

您提到的“幻灯片”实际上是一个事件，而不是一个属性。[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

您是在问服务器端事件的名称是什么？如果是这样，它被命名为“幻灯片”

或者您是否在问如何使用 javascript 为幻灯片添加相同的事件处理程序，就像不使用 Juice UI 一样？如果是这样，您将以相同的方式定位控件。

```
<juice:slider ID="_Default" runat="server" ControlIDMode="Static"/>

$("_Default").slider({ slide: .... }); 
```

如果您尝试同时使用服务器端和客户端事件（如上面的示例），那么您必须使用放大组件以不同方式连接 js 部分，否则服务器端事件将无法正确触发。

```
amplify.subscribe("_Default.slider.slide", function( ... ){ /* callback */ }); 
```

# liferay - 设置默认 portlet 首选项

> ID：11189366
> 
> 赞同：3
> 
> 时间：2012-06-25T12:26:07.843
> 
> 标签：liferay, portlet

我正在尝试设置 portlet 首选项，而不涉及 portlet.xml。

这是我的小门户：

```
-myportletclass
-myportletjsp
-myconclass
-myconfjsp 
```

当我单击首选项时，我可以看到 confjsp，它显示了我的首选项的表单。而且，当我提交它时，将首选项设置为表单中的值。

但是我没有任何默认值，没有修改portlet.xml。

我应该添加什么以及在哪里添加？

我看到有些人在配置类的渲染中这样做，但它并没有按照他们的方式工作。

问候。谢谢你。

编辑：我设置偏好的方式：

首先，我有一个简单的表单，我的 conf jsp，基本的，不需要添加它；然后，我有 ConfController ：

```
@Controller
@RequestMapping("EDIT")
public class ConfigurationController {

    @ModelAttribute("validatePref")
    public ValidatePrefForm getValidatePrefForm() {
        ValidatePrefForm form = new ValidatePrefForm();
        return form;
    }

    @ActionMapping(params = "action=validatePref")
    public void processAction(@ModelAttribute("validatePref") ValidatePrefForm form,
            PortletPreferences portletPreferences, ActionResponse response)
            throws Exception {

        String mylink = form.getMylink();

        if (null != mylink && !mylink .equals("")) {

            portletPreferences.setValue("mylink ", mylink );

        }

        portletPreferences.store();

    }

    @RenderMapping
    public String render() throws Exception {
        return "myportletjsp.jsp";

    }

} 
```

然后，在我的 portlet 中，我有这个来获取值：

```
mylink= preferences.getValue("mylink", mylink);

        if(null==mylink){
            mylink= mydefaultUrl;

        } 
```

然后我可以使用 mylink

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T13:41:54.487

首先：portlet.xml 是一个拥有默认portlet 首选项的好地方。

如果您出于某种原因绝对不想要这个，当然您可以检查首选项是否为`null`，然后假设您的默认值。只要您在操作阶段、呈现阶段、事件阶段或资源阶段检索 portlet 首选项，只需执行此操作即可。

# proxy - HTTPClient ntlm 智能卡

> ID：11189367
> 
> 赞同：1
> 
> 时间：2012-06-25T12:26:12.683
> 
> 标签：proxy, httpclient, ntlm, smartcard

使用 HTTPClient 4 并希望通过 NTLM 代理进行身份验证....

但是应该从我的智能卡和硬证书中提取身份验证数据。还没有找到使用 HTTPClient 的示例（仅使用基本的用户/密码）。

Eclipse 在它的代理设置中必须在幕后与 subversion Eclipse 扩展一起做类似的事情。两者都只要求代理主机和端口，仅此而已。某物？必须将我的身份从智能卡中提取到通话中。假设它是 NTLM？

有任何想法吗？

# javascript - 从页面上的链接触发fancybox - 包含多个相册的图片库

> ID：11189373
> 
> 赞同：1
> 
> 时间：2012-06-25T12:26:40.343
> 
> 标签：javascript, jquery, json, fancybox, image-gallery

我制作了一个包含多个相册的图片库，每个相册包含不同数量的照片。我正在尝试获得两种花式行为

要求 1 - 单击专辑的主图像会打开一个精美的框并浏览所有专辑的主图像。我让这部分工作

Req 2 - 在每个相册下面我都有一个锚标签，它显示相册中的照片数量。当我点击这个锚标签时，花哨的盒子应该只浏览那个特定相册的照片。我不确定如何将此锚标记绑定到触发器幻想框并浏览相册中的图像。我有一个静态 json 文件，我有两个属性`primaryPhoto`和`imagesContained(array)`.

有人可以帮我解决这个问题吗？

```
$.each(data.gallery,function(i,item) {
 $.each(item.albums, function(i,photos) {
        imageFolder = sec.mediumUrl;
        imgInsert += '<a href="' + photos + '" class="grouped_elements" rel="Gallery' + count + '" class="big_img"'  +'">';
    });
    '<a href="' + imgThumb + '" class="description2" title="Hello world">' + count + '</a></div>'; 
    count++;
}); 
```

我正在尝试像这样访问它

```
$("a.description2").click(function() {
 $("a.grouped_elements").fancybox({
                'transitionIn': 'none',
                'transitionOut': 'none',
                'titlePosition': 'over',
                'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                    return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                }
            });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:03:11.140

**为您的要求 2**

我整天都在为自己的项目解决这个问题，我刚刚想出了一个解决方案。

假设这是您页面上的画廊：

```
<a id="Gallery_1" rel="gallery1" href="image_big_1.jpg"><img src="image_small_1.jpg" alt=""/></a>
<a rel="gallery1" href="image_big_2.jpg"><img src="image_small_2.jpg" alt=""/></a> 
```

*请注意，我在画廊 1 的第一个链接中添加了一个名为“Gallery_1”的 ID*

然后，对于图库下方的文本，使用以下 javascript：

```
<a style="cursor: pointer;" onclick='$("a#Gallery_1").trigger ("click");'>Your Link Text</a> 
```

这对我来说非常有效。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:58:06.803

基本上你的 html 渲染代码应该是这样的：

专辑一：

```
<a class="grouped_elements" rel="gallery1" href="image01.jpg" title="title01"><img src="thumb01.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery1" href="image02.jpg" title="title02"><img src="thumb02.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery1" href="image03.jpg" title="title03"><img src="thumb03.jpg" alt="" /></a> 
```

等等

专辑 2：

```
<a class="grouped_elements" rel="gallery2" href="image10.jpg" title="title10"><img src="thumb10.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery2" href="image11.jpg" title="title11"><img src="thumb11.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery2" href="image12.jpg" title="title12"><img src="thumb12.jpg" alt="" /></a> 
```

等等

专辑 3：

```
<a class="grouped_elements" rel="gallery3" href="image20.jpg" title="title20"><img src="thumb20.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery3" href="image21.jpg" title="title21"><img src="thumb21.jpg" alt="" /></a>
<a class="grouped_elements" rel="gallery3" href="image22.jpg" title="title22"><img src="thumb21.jpg" alt="" /></a> 
```

等等

**请注意**，每个专辑都设置了不同的`rel`属性，无论它们都共享相同的属性，`class`因此我们可以使用`$("a.grouped_elements").fancybox({// options here})`为任何专辑触发 fancybox。

现在，为了从不同的链接启动每个相册（如您的示例中显示相册中照片数量的锚标记），我们将为每个共享相同`class`但不同的相册设置一个锚`ID`（@RevCocnept 建议不是一个坏主意。）

```
<a id="gallery1" class="description2" href="javascript:;">open album 1</a>
<a id="gallery2" class="description2" href="javascript:;">open album 2</a>
<a id="gallery3" class="description2" href="javascript:;">open album 3</a> 
```

**请注意**，每个都`ID`具有与相应专辑的值完全相同的值`rel`。

现在我们可以为这三个锚点使用一个脚本，以它们的共享为目标`class`：

```
$(".description2").click(function(){
 $('.grouped_elements[rel="'+this.id+'"]').eq(0).trigger("click");
}); 
```

请注意，我们通常`.eq(0)`从第一个元素开始画廊，否则它将从添加到 DOM 中的最后一个元素开始

# ios - 在 iOS 上更改日期格式

> ID：11189374
> 
> 赞同：1
> 
> 时间：2012-06-25T12:26:40.847
> 
> 标签：ios, date, format

我有一些这种格式的日期：

```
2012-06-26 12:00:00 +0000 
```

我想要做的是以这种格式转换它们：

```
Jun 26, 2012 12:00:00 AM 
```

是否有一种简单的方法可以在 obj-c 上执行此操作，或者我必须解析所有核心内容，并为此创建自己的函数？如果是的话，任何想法都会是什么样子，因为我是 iOS 新手。非常感谢您阅读我的帖子 :D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:31:19.307

要将 1 个字符串转换为另一个字符串，请使用以下命令

```
NSString *inputString = @"2012-06-26 12:00:00 +0000";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss z"];//input

NSDate *date = [formatter dateFromString:inputString];

[formatter setDateFormat:@"MMM dd, yyyy hh:mm:ss a"];
NSString *outputString = [formatter stringFromDate:date];
NSLog(@"output : %@",outputString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:29:53.777

首先，您应该在 NSDate 中转换您的字符串（使用 NSDateFormatter ），然后使用目标格式将其转换回 NSString （仍然使用相同的 NSDateFormatter）。

这是 NSDateFormatter 的示例：

```
NSString *dateString = @"2013-04-01T22:00:00Z";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
[dateFormatter setTimeZone:[NSTimeZone defaultTimeZone];
NSDate *theDate = [dateFormatter dateFromString:dateString]; 
```

# c# - 表格行上的 JQuery 对话框

> ID：11189377
> 
> 赞同：0
> 
> 时间：2012-06-25T12:26:50.253
> 
> 标签：c#, jquery, razor

我正在使用 c# 和 razor 生成发票列表。每张发票都是一个表格行，并有大量的注释清单。为了避免行之间的大量空间，我想隐藏注释并允许弹出来查看它。目前是：

```
 <td>
@foreach (var invoiceLine in invoice.InvoiceLines)
                {
                    <p>
                        <strong>@invoiceLine.Date.ToShortDateString() @invoiceLine.Username</strong> <br />
                        @Html.Raw(invoiceLine.Notes.Replace(Environment.NewLine, "<br />")) 
                        @Html.Raw((invoiceLine.DueDate.HasValue ? "<br /><strong>Follow up:</strong> " + invoiceLine.DueDate.Value.ToShortDateString() : "")) 
                        @Html.Raw(invoiceLine.Completed ? "<br /><strong>Completed</strong>" : "")
                    </p>
                } 
```

所以我想做的是使用 jquery 添加弹出窗口：

```
$(function () {

$('#clickMe').click(function (event) {
    var mytext = $('#myText').val();

    $('<div id="dialog">' + mytext + '</div>').appendTo('body');
    event.preventDefault();

    $("#dialog").dialog({
        width: 600,
        modal: true,
        close: function (event, ui) {
            $("#dialog").hide();
        }
    });
}); //close click 
```

});

然后修改我的代码：

```
<td>
            <h3 id="clickMe">Open Notes</h3>
               <textarea cols="1" rows="75" id="myText" style="display:none">
                @foreach (var invoiceLine in invoice.InvoiceLines)
                {
                    <p>
                        <strong>@invoiceLine.Date.ToShortDateString() @invoiceLine.Username</strong> <br />
                        @Html.Raw(invoiceLine.Notes.Replace(Environment.NewLine, "<br />")) 
                        @Html.Raw((invoiceLine.DueDate.HasValue ? "<br /><strong>Follow up:</strong> " + invoiceLine.DueDate.Value.ToShortDateString() : "")) 
                        @Html.Raw(invoiceLine.Completed ? "<br /><strong>Completed</strong>" : "")
                    </p>
                }
                </textarea>
            </td> 
```

第一个问题是，只有第一行出现。我想是因为我的 id 一直都是一样的吗？

如何为每一行打开对话框？

我是 c# 和 js 的新手 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:41:53.990

首先： textarea 完全没有意义。

然后像这样改变零件。看到它在[jsfiddle](http://jsfiddle.net/marcgrabow/2BbmY/1/)中工作。

**HTML**

```
<td>
@foreach (var invoiceLine in invoice.InvoiceLines)
{

    <p>
        <strong>@invoiceLine.Date.ToShortDateString() @invoiceLine.Username</strong> <br />
        @Html.Raw((invoiceLine.DueDate.HasValue ? "<br /><strong>Follow up:</strong> " + invoiceLine.DueDate.Value.ToShortDateString() : "")) 
        @Html.Raw(invoiceLine.Completed ? "<br /><strong>Completed</strong>" : "")

        <h3 class="notesClick">Open Notes</h3>
        <div class="notesHtml" style="display:none">
          @Html.Raw(invoiceLine.Notes.Replace(Environment.NewLine, "<br />")) 
        </div>

    </p>
}
</td> 
```

**JS**

```
$(function() {

    $('.notesClick').click(function(event) {
        var notes = $(event.currentTarget).next('.notesHtml');
        $("<div>").html(notes.html()).dialog();
    });

});​ 
```

# javascript - 通过 Javascript document.write 投放广告

> ID：11189381
> 
> 赞同：0
> 
> 时间：2012-06-25T12:27:17.220
> 
> 标签：javascript, jquery

我正在构建一种广告投放方法，并尝试通过外部 Javascript/jQuery 页面来实现。

到目前为止我有这个，但我有一些问题

```
$.get('http://url.com/ad.php', {
    f_id: _f_id,
    f_height: _f_height,
    veloxads_width: _f_width
}, function (result) {
    var parts = result.split(",");
    var path = parts[0],
        url = parts[1];
    document.write('<a href="' + url + '" target="blank"><img src="' + path + '"></a>'); 
```

我可以看到页面加载，但是在加载上面的代码之后，它会创建一个只有广告的新页面。无论如何我可以将它写到放置代码的页面上吗？

这是网站管理员在其网站上放置广告的脚本：

```
<script type="text/javascript">

var _f_id = "VA-SQ2TDEXO78N0";

var _f_width = 728;

var _f_height = 90;

</script>
<script type="text/javascript" src="http://website.com/cdn/addelivery.js"></script> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:37:03.780

ad.php 与您的脚本在同一个域中吗？如果不是看看[这篇文章](http://jquery-howto.blogspot.fr/2009/04/cross-domain-ajax-querying-with-jquery.html)

这是您可以在 html 页面中使用的代码，您希望在其中插入广告：

```
$.get('http://url.com/ad.php', 
    { f_id : _f_id, f_height : _f_height, veloxads_width : _f_width }
).success(function(result) {
    var parts = result.split(",");
    var path = parts[0], url = parts[1];
    $('body').prepend('<div id="ad_id"><a href="'+url+'" target="blank"><img src="'+path+'"></a></div>');
}); 
```

选择器（此处为正文）可以是 id、类、...（参见[文档](http://api.jquery.com/category/selectors/)）。您还可以使用 prepend() 或 html() 而不是 append，将代码插入您想要的位置；)

# regex - 带有特殊字符的密码的正则表达式

> ID：11189391
> 
> 赞同：1
> 
> 时间：2012-06-25T12:27:49.853
> 
> 标签：regex

这是我从微软网站找到的正则表达式

```
(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{8,10})$ 
```

它`Validates a strong password. It must be between 8 and 10 characters, contain at least one digit and one alphabetic character, and must not contain special characters.`

但是现在我们决定允许用户在他们的密码中使用特殊字符，那么我该如何修改这个正则表达式呢？我不太明白为什么放在`?!`前面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:42:36.197

`(?!^[0-9]*$)`是负前瞻。如果从开始到结束只有数字，则此断言失败。所以，你有不同的可能性：

我会重写这些条件以要求至少一个而不是只禁止那些字符。

`(?=.*\d)`至少需要一位数字

`(?=.*[a-zA-Z])`至少需要一封信

您的正则表达式将如下所示：

```
^(?=.*[0-9])(?=.*[a-zA-Z]).{8,10}$ 
```

表示至少需要一个数字、一个字母并由 8 到 10 个字符组成。`.`可以是任何字符，但不能是换行符。

[在 Regexr 上](http://regexr.com?31bmr)查看

# java - 在 JSF 中，在 ah:dataTable 中有一个 ui:repeater 是否有效

> ID：11189396
> 
> 赞同：0
> 
> 时间：2012-06-25T12:28:09.617
> 
> 标签：java, jsf-2

在 ah:dataTable 中有一个 JSF ui:repeater 用于动态定义列是否有效？方法 getFieldNames(...) 永远不会被调用，即使它是从 html 中引用的。方法 getEntities 被调用。有任何想法吗？

```
@Named(value = "data")
@RequestScoped
public class MyBean {

    List<Map<String, String>> data = new ArrayList<Map<String, String>>();

    public CustomBean() {
        final AtomicInteger i = new AtomicInteger(0);
        for (final String fieldName : new String[]
            {"ColumnOne", "ColumnTwo", "ColumnThree"}) {
            data.add(new HashMap<String, String>() {

                {
                    put(fieldName, fieldName + "_" + i.getAndDecrement());
                }
            });
        }
    }

    public List<String> getFieldNames() {
        // THIS METHOD DOES NOT GET CALLED
        return new ArrayList<String>(data.get(0).keySet());
    }

    public List<Map<String, String>> getEntities() {
        return data;
    }
}

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Title</title>
    </h:head>
    <h:body>
        <h:dataTable value="#{data.entities}" var="entity">
            <ui:repeat var="fieldName" value="#{data.fieldNames}">
                <h:column>
                    <f:facet name="header">#{fieldName}</f:facet>
                    #{entity.get(fieldName)}
                </h:column>
            </ui:repeat>
        </h:dataTable>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:25:34.617

不，不可能使用 ui:repeat 在数据表中包含动态列。您可以尝试使用 Primefaces 或 Richfaces 等组件库，它可以让您轻松拥有动态列。在[此](http://www.primefaces.org/showcase/ui/datatableDynamicColumns.jsf)链接中，您可以看到 Primefaces 的动态列功能正在发挥作用。此外，您可以尝试在支持 bean 中动态创建表模型。此 BalusC 的[教程](http://balusc.blogspot.com.ar/2006/06/using-datatables.html#PopulateDatatable)解释了如何做到这一点。

# java - @size(max = value) 与 @min(value) 和 @max(value) 之间的区别

> ID：11189398
> 
> 赞同：77
> 
> 时间：2012-06-25T12:28:12.893
> 
> 标签：java, spring, validation, annotations

我想做一些域验证。在我的对象中，我有一个整数。

现在我的问题是：如果我写

```
@Min(SEQ_MIN_VALUE)
@Max(SEQ_MAX_VALUE)
private Integer sequence; 
```

和

```
 @Size(min = 1, max = NAME_MAX_LENGTH)
 private Integer sequence; 
```

如果它是一个整数，哪一个适合域验证？
谁能解释一下它们之间有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-25T13:12:30.203

`@Min`并`@Max`用于验证可以是`String`（表示数字）、`int`、`short`等的数字字段`byte`及其各自的原始包装器。

`@Size`用于检查字段的长度限制。

根据文档`@Size`支持`String`,`Collection`和while`Map`并支持原语及其包装器。请参阅[文档](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/)。`arrays``@Min``@Max`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-25T12:33:39.950

```
package com.mycompany;

import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

public class Car {

    @NotNull
    private String manufacturer;

    @NotNull
    @Size(min = 2, max = 14)
    private String licensePlate;

    @Min(2)
    private int seatCount;

    public Car(String manufacturer, String licencePlate, int seatCount) {
        this.manufacturer = manufacturer;
        this.licensePlate = licencePlate;
        this.seatCount = seatCount;
    }

    //getters and setters ...
} 
```

`@NotNull`，`@Size`并且`@Min`是所谓的约束注释，我们使用它来声明约束，这些约束将应用于 Car 实例的字段：

`manufacturer`永远不会为空

`licensePlate`不得为空，长度必须在 2 到 14 个字符之间

`seatCount`应至少为 2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-01T12:06:51.787

从[文档](https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints)中我得到的印象是，在您的示例中，它打算使用：

```
@Range(min= SEQ_MIN_VALUE, max= SEQ_MAX_VALUE) 
```

> 检查带注释的值是否介于（包括）指定的最小值和最大值之间。支持的数据类型：
> 
> BigDecimal、BigInteger、CharSequence、byte、short、int、long 以及原始类型的相应包装器

# jsp - 在 IE 8 中关闭 fancybox 的问题

> ID：11189400
> 
> 赞同：0
> 
> 时间：2012-06-25T12:28:15.863
> 
> 标签：jsp, fancybox

在我登录成功时，我调用该函数来关闭 fancybox `setTimeout("window.parent.$.fancybox.close()",4000)enter code here`
...该函数在 IE 9 上运行良好，但在 IE8 中成功时不会自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:02:07.030

这些对我有用

```
setTimeout( function() { window.parent.$.fancybox.close(); },4000);
setTimeout( window.parent.$.fancybox.close, 4000);
setTimeout( "window.parent.$.fancybox.close()", 4000); 
```

# android - 用于透明 PopupWindow 布局的样式化背景不起作用

> ID：11189401
> 
> 赞同：1
> 
> 时间：2012-06-25T12:28:32.913
> 
> 标签：android, android-layout

所以我有这个扩展的类`PopupWindow`。我将班级的背景设置为`@android:color/transparent`并对其内容使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tips_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="8dip"
    android:orientation="horizontal"
    style="?Tips_Background" >

    <TextView
        android:id="@+id/textInfo"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/register_termsandconditions" 
        style="?TextAppearance_Footer" />

    <ImageButton
        android:id="@+id/btnClose"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="0dip"
        android:layout_gravity="top|right"
        android:src="@drawable/btn_dialog_normal" 
        style="@style/App_ImageButtonStyle" />

</LinearLayout> 
```

这个想法是得到一个像这样的弹出窗口：

![我的自定义提示窗口](../Images/79d2f44d1e9162fa150b69efb98b637f.png)

我用来实现这个效果的样式如下：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:visible="false">

    <gradient 
        android:startColor="@color/trademark_dark"
        android:endColor="@color/trademark_darkest"
        android:angle="90" />

    <stroke android:width="2dp" android:color="#AAAAAA" />
    <corners android:radius="10dp" />

    <padding 
        android:left="8dp" 
        android:top="8dp"
        android:right="8dp" 
        android:bottom="8dp" />

</shape> 
```

一切都按预期工作，除了在我的启动活动中，窗口看起来完全透明，就好像背景根本没有效果一样。

![我的透明提示窗口](../Images/ea6c1296feaa45f3d8e5b388e7d14e38.png)

我使用以下方法将包含此样式的主题应用于整个应用程序：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:theme="@style/NI_AppTheme.Trademark"
    android:name="NApplication">
    <activity android:name="LoginActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  .... 
```

`LoginActivity`是我面临这个问题的唯一活动。我会错过什么？

**更新：**

@imran khan 概述的解决方案有效。但是，我需要通过主题属性而不是直接硬编码引用来引用此值，因为背景会随主题而变化。我试过了：

```
<style name="NI_AppTheme.Trademark">
    <item name="Tips_Background">@drawable/application_tips_trademark</item>
</style> 
```

然后设置 layouts' `android:background="?Tips_Background"`，但它使用以下堆栈跟踪使应用程序崩溃：

```
 06-25 21:09:36.518: E/AndroidRuntime(874): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x7f01002e a=-1}
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.content.res.Resources.loadDrawable(Resources.java:1897)
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.view.View.<init>(View.java:2785)
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.view.ViewGroup.<init>(ViewGroup.java:385)
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.widget.LinearLayout.<init>(LinearLayout.java:174)
 06-25 21:09:36.518: E/AndroidRuntime(874):     at android.widget.LinearLayout.<init>(LinearLayout.java:170) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T02:13:43.760

活动是清单中定义的主题实际附加的唯一上下文。任何其他实例都将使用系统默认主题来扩展您的视图，从而导致您可能没想到的显示输出。

[语境，什么语境？](http://www.doubleencore.com/2013/06/context/)

这就是为什么`getApplicationContext()`不会正确设置您的主题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:59:27.183

我最终将问题缩小到我将返回的上下文传递`getApplicationContext()`给`PopupWindow`构造函数。如果我`LoginActivity.this`作为上下文传递，事情会按预期工作，我可以根据父活动中选择的主题更改背景。

仍然击败我为什么`getApplicationContext()`没有我设定的主题。深思熟虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:38:57.977

将tips_root 背景shap xml 放在**res/drawable**中。使用`android:background`而不是`style="?Tips_Background"`：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tips_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="8dip"
    android:orientation="horizontal"
    android:background="@drawable/Tips_Background" > 
```

# jquery - 200 未找到使用 cakePHP 对话框的流

> ID：11189402
> 
> 赞同：0
> 
> 时间：2012-06-25T12:28:34.453
> 
> 标签：jquery, cakephp, dialog, flowplayer

尝试使用 jQuery 对话框在 cakephp 中播放文件时出现错误。播放器完美启动，但我无法让它播放任何文件，我收到 200 stram not found stream.play.streamnotfound 错误。

我已经尝试了很多变体，但如果我正确粘贴路径它可以工作，则无法获得正确的路径，或者至少正确地播放或下载音频文件。

我的文件位于 /trunk/app/webroot/files/uploads/type/filename.wav

这是我正在使用的代码：

```
 <script type="text/javascript">
 $(document).ready(function() {
       flowplayer("player", "<?php echo $this->webroot; ?>/app/webroot/js/flowplayer/flowplayer-3.2.11.swf"); 
});
</script>
 <?php
 echo $this->Html->link("","/trunk/files/uploads/questions/4fe044ad-aec4-408f-9c20-13acfe6ba31b.wav",array("id" => "player")); 
 ?> 
```

即使我在上面放置了正确的链接，它仍然无法播放（通过直接链接，我的意思是包括本地主机等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:22:44.940

移至 video.js，无法解决问题

# mysql - ManyToMany JPA上的INNER JOIN不起作用

> ID：11189405
> 
> 赞同：0
> 
> 时间：2012-06-25T12:28:48.733
> 
> 标签：mysql, jpa, inner-join

我在 Jboss 5.1 中使用 Hibernate EntityManager 3.4.0.GA。但是，尽管在我的 mysql 控制台中，查询似乎工作正常。我收到以下错误

sqlstate s0022 原因：javax.persistence.PersistenceException：org.hibernate.exception.SQLGrammarException：无法执行查询 原因：java.sql.SQLException：找不到列“代码”。

我有两张表，一张是带有字段 id、code、type 的 Station，另一张是描述可能组合的 manyToMany 表

```
+------------+--------+--------+
| ID |       |  type  | code   |
+------------+--------+--------+
|      1     |   AP   |  LAX   |
|      2     |   AP   |  JFK   |
|      3     |   AP   |  LHR   |
|      4     |   AP   |  MAN   |
+------------+--------+--------+

+------------+--------+--------+
| depStationId | destStationId | 
+------------+--------+--------+
|      1     |       2         |
|      1     |       3         |
|      2     |       1         |
|      3     |       1         |
+------------+--------+--------+ 
```

我的本机查询称为

```
select d.code as origin, a.code as destination from DepDest dd 
inner join STATIONS d on dd.depStationId=d.id  and d.type=?1 
inner join STATIONS a on dd.destStationId=a.id and a.type=?2 
```

它似乎与查询中的双左连接和相同的列名有关。我找到了这个亲戚，但仍然没有解决方法。

[https://hibernate.onjira.com/browse/HHH-3988](https://hibernate.onjira.com/browse/HHH-3988)

任何人都可以提出一个解决方法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:39:10.353

您是否尝试过进行子查询？

```
select d.code as origin, a.code as destination
from (
  select dd.destStationId, d.code DepDest dd
  inner join STATIONS d on dd.depStationId=d.id and d.type=?1) d
inner join STATIONS a on d.destStationId=a.id and a.type=?2 
```

# xml - 使用get-Property方法读取http post参数

> ID：11189409
> 
> 赞同：1
> 
> 时间：2012-06-25T12:29:25.487
> 
> 标签：xml, http-post, wso2, wso2esb, synapse

首先让我解释一下我正在尝试什么，然后我将解决我面临的问题......我正在使用 wso2 esb 创建一个代理 Web 服务，以便我可以将 http post 请求发送到现有的 Web 服务。考虑托管在示例axis2 服务器中的SimpleStockQuote Web 服务。现在我想代理它并通过 http post 请求发送符号。有人可以解释它是如何完成的吗？

目前 simplestockquote 服务只接受和回复soap消息格式。我正在考虑使用一些 xslt 转换。任何指向工作示例的链接都会有很大帮助。

提前致谢。！！

这可以作为我真正想要的一个例子......

现在我可以直接将发布请求发送到我的代理或表单的服务：

curl "http://localhost:8280/services/StockQuoteProxy" -X POST -d 'IBM' -v -H "Content-Type: text/xml" -H "SOAPACtion: urn:getQuote"

现在可以了，我希望我的请求采用以下形式：

curl "http://localhost:8280/services/StockQuoteProxy" -X POST -d 'function=getQuote&synbol=IBM' -v

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:42:19.127

我认为您会发现以下示例很有用。

*   [示例 152](http://wso2.org/project/esb/java/4.0.3/docs/samples/proxy_samples.html#Sample152)：将传输和消息格式从 SOAP 切换到 REST/POX
*   [示例 440](http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample440)：通过 JSON 公开 SOAP 服务

# android - 如何解决 Android 日历中的“事件值必须包含 eventTimezone”？

> ID：11189410
> 
> 赞同：2
> 
> 时间：2012-06-25T12:29:28.000
> 
> 标签：android, android-contentprovider, android-calendar

您好开发了一个具有一些功能的 android 应用程序，可以在日历应用程序中添加我们的事件详细信息。我的应用程序运行良好。但有时它会强制关闭并在调试时在 logcat 中显示错误。我为新旧版本的 android OS 使用了 2 个内容 uri。

那些是

```
 if(){
    Uri calendars = Uri.parse("content://calendar/calendars");
    }
    else{
    calendars = Uri.parse("content://com.android.calendar/calendars");
    } 
```

我正在尝试解决我的问题，但没有成功。请为我提供此问题的最佳解决方案。我在下面添加了我的 logcat。

提前致谢。

```
 java.lang.IllegalArgumentException: Event values must include an eventTimezone
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:165)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.content.ContentProviderProxy.insert(ContentProviderNative.java:415)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.content.ContentResolver.insert(ContentResolver.java:730)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at in.plackal.lovecyclesfree.CycleManager.setAlertOnDevice(CycleManager.java:1083)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at in.plackal.lovecyclesfree.ActivityManager.onPause(ActivityManager.java:83)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.app.Activity.performPause(Activity.java:4563)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1195)
    03-02 18:28:35.836: E/AndroidRuntime(1362):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2693) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-21T19:12:19.340

尝试添加它也可能会起作用。

```
 eventValues.put("eventTimezone", TimeZone.getDefault().getID()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-22T09:13:34.803

尝试这个：

```
Calendar cal = Calendar.getInstance();  

    long l = cal.getTimeInMillis();

    long cal_Id = 1;

    ContentResolver CR = getContentResolver();

     ContentValues calEvent  = new ContentValues();

     calEvent.put(CalendarContract.Events.CALENDAR_ID,  cal_Id); // XXX pick)

     calEvent.put(CalendarContract.Events.TITLE, " Demo Data");

     calEvent.put(CalendarContract.Events.DTSTART,l);

     calEvent.put(CalendarContract.Events.DTEND, l+60 * 1000);

     calEvent.put(CalendarContract.Events.EVENT_TIMEZONE, "Indian/Christmas");  // Here choose your location time zone                  
     ContentResolver C2 = getContentResolver();
     Uri uri = C2.insert(URL, calEvent);                        

     int id = Integer.parseInt(uri.getLastPathSegment()); 
```

# javascript - 节点 JS 和鼠标

> ID：11189413
> 
> 赞同：3
> 
> 时间：2012-06-25T12:29:43.353
> 
> 标签：javascript, node.js

我正在尝试使用 node js 作为鼠标记录器来评估以下设置的可行性。我知道有带有计时器和数组的简单 JS 鼠标记录器，但是在计时方面它们不够高效（由于 js 计时器类中的 ms 偏差）。

假设我希望能够执行以下操作：

1）我不想在每次更改时都推送当前鼠标位置，而是想在本地缓冲它并以设定的间隔（例如5秒）推送数据。这甚至可能吗？

2) 如果是，则将鼠标移动的流保存为二进制文件。然后可以将二进制文件流式传输到另一个客户端。

一般来说，我一般很难理解流。据我了解，流只是发送给客户端的数据块。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:57:33.053

1) 是的，有可能，我建议您使用 Event Emitter <-> Event Listener 逻辑。

2）当然，你可以做到。但请告诉我们更清楚您要做什么。同时，您可以查看用于流数据的[socket.io解决方案，或](http://socket.io)[npm install ws](https://github.com/einaros/ws)。同样，这很大程度上取决于您要开发的内容。

还有基于 RTMP 协议的更复杂和强大的解决方案，但我不知道为什么你需要在这里将几个字节从一侧发送到另一侧。如果您必须将这些数据块发送给多个订阅者，您也可以看看广播公司的想法。

# c# - 不可见的数组元素

> ID：11189427
> 
> 赞同：-5
> 
> 时间：2012-06-25T12:30:16.253
> 
> 标签：c#

显示每个数组元素 1 到 9 但不显示第 10 和第 11 个元素的消息框？为什么我无法达到第 10 个和第 11 个元素，我也尝试用富文本框做，但我再也看不到

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    int i;
    int[] array1 = new array1[11];
    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        try
        {
            array1[i] = int.Parse(textBox1.Text) % 10;
            MessageBox.Show(dizi[i].ToString());
        }
        catch
        {
            if (i > 11)
            {
                //MessageBox.Show("it can't be big than 11");
            }
        }
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:36:06.237

时`i == 10`，您将看到数组的第 11 个元素。那是因为数组索引以 开头`0`，所以`i`从`0`到`10`。`11`或更高的数字会给你一个例外。我建议您在尝试访问数组之前检查它。像这样：

```
if (i < 11) {       // or if (i < dizi.Length)
    try
    {
        dizi[i] = int.Parse(textBox1.Text);
        MessageBox.Show(dizi[i].ToString());
        i++;
    }
    catch (Exception ex) 
    {
        // You can still get errors if the text cannot be parsed to an int 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:42:59.650

是的，您已经得到了答案，但是确实要小心变量限制。

```
Type        Size (in bits)       Range
 -----           --------            ----------
sbyte           8               -128 to 127
byte            8                0 to 255
short           16              -32768 to 32767
ushort          16               0 to 65535
int                 32              -2147483648 to 2147483647
uint            3                    0 to 4294967295
long            64                  -9223372036854775808 to 9223372036854775807
ulong           64               0 to 18446744073709551615
char            16               0 to 65535 
float           32               7 digits 1.5 x 10-45 to 3.4 x 1038
Double              64               15-16 digits 5.0 x 10-324 to 1.7 x 10308
Decimal         128              28-29 decimal places 1.0 x 10-28 to 7.9 x 1028 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:37:02.213

an 的最大值`int`是 2147483647，因此如果您输入任何大于该值的数字，`int.Parse()`都会静默失败。正如其他人所提到的，没有第 11 个元素。

# grails - 弹性搜索、java、grails

> ID：11189430
> 
> 赞同：0
> 
> 时间：2012-06-25T12:30:33.267
> 
> 标签：grails, grails-orm, elasticsearch

我在我们的 grails 项目中实现了弹性搜索。在弹性搜索中，如何编写 DSL 查询来搜索内部类中的详细信息？例如，如果我有如下课程：

```
class A {
 hasMany [b: B]
}

class B {
 hasMany [c: C]
}

class C {
 hasMany [d: D]
}

class D {
 String name
} 
```

而且我需要根据类 D 的属性“名称”来实现类 A 的搜索。我已经在所有类中实现了可搜索，并将内部类指定为组件。

在编写查询时，我尝试将其作为 bcdname 访问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:20:46.790

我才刚刚开始使用弹性搜索，但我使用以下格式添加了一些成功：

```
must{
    term("a.b.c.name" : "${params.name}")
} 
```

# iphone - 如何保存tableview单元格的数据

> ID：11189431
> 
> 赞同：2
> 
> 时间：2012-06-25T12:30:33.850
> 
> 标签：iphone, objective-c

我在我的表格视图中使用自定义复选框按钮，并希望将所选单元格的数据保存到可变数组中......谁能帮助我......谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:32:07.460

创建一个可变数组来存储您选择的数据，我们称之为 'yourSeparatedData' ，在 cellForRowAtIndexPath 中设置复选框的标签并将 onCheck: 方法设置为目标。代码将如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *CellIdentifier = @"setMe";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyle………
    }
    checkBox = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    checkBox.frame = CGRectMake(customizeMe);
    if(yourSeparatedData && [yourSeparatedData indexOfObject:[yourTableViewDataSource objectAtIndex:indexPath.row]] != NSNotFound)
    {
        [checkBox setBackgroundImage:[UIImage imageNamed:@"check.png"] forState:UIControlStateNormal];
    }
       else {
        [checkBox setBackgroundImage:[UIImage imageNamed:@"unCheck.png"] forState:UIControlStateNormal];
        }
        [checkBox addTarget:self action:@selector(onCheck:) forControlEvents:UIControlEventTouchUpInside];
        [checkBox setTag:indexPath.row];

        [cell addSubview:checkBox];
        return cell; 
```

}

```
-(void)onCheck:(id)sender {
     if(yourSeparatedData && [yourSeparatedData indexOfObject:[yourTableViewDataSource objectAtIndex:[sender tag]]] != NSNotFound)
       {
        [sender setBackgroundImage:[UIImage imageNamed:@"unCheck.png"] forState:UIControlStateNormal];
        [yourSeparatedData removeObject:[yourTableViewDataSource objectAtIndex:[sender tag]]];
       }
      else {
        [sender setBackgroundImage:[UIImage imageNamed:@"check.png"] forState:UIControlStateNormal];
        [yourSeparatedData addObject:[yourTableViewDataSource objectAtIndex:[sender tag]]];
      }
      [yourTableView reloadData];
 } 
```

此代码未经测试，您正在使用复选框，因此我假设您不仅要分隔一个数据，在选择结束时，您将拥有“yourSeparatedData”以及从 tableView 中挑选的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:10:07.387

> 您可以在 UITableView 单元格中尝试自定义操作以获取按钮 prees，您也​​可以使用放置复选框图像，单击时您可以更改图像，因为这里选中的是代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath{
UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"identifire"];
 cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"identifire"] autorelease];
    cell.detailTextLabel.text=[id_Array objectAtIndex:indexPath.row];
    cell.detailTextLabel.hidden=YES;
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    NSString *path1 = [[NSBundle mainBundle] pathForResource:@"n_cross" ofType:@"png"];
    UIImage *buttonImage1 = [[UIImage alloc] initWithContentsOfFile:path1];
    [button setImage:buttonImage1 forState:UIControlStateNormal];
    [button addTarget:self 
               action:@selector(customActionPressed:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Custom Action" forState:UIControlStateNormal];
    button.frame = CGRectMake(245.0f, 20.0f, 40.0f, 40.0f);
    [cell addSubview:button];
    [buttonImage1 release];
        CGRect imageFrame=CGRectMake(10,8,50,50);
        self.cellimage=[[[UIImageView alloc] initWithFrame:imageFrame] autorelease];
        self.cellimage.image=[imageIdArray objectAtIndex:indexPath.row];
        [cell.contentView addSubview:self.cellimage];
        return cell;
}
-(void)customActionPressed :(id)sender
{
//Get the superview from this button which will be our cell
UITableViewCell *owningCell = (UITableViewCell*)[sender superview];
NSIndexPath *cell = [_tableView indexPathForCell:owningCell];
NSString *uid=[id_Array objectAtIndex:cell.row];
[id_Array removeObjectAtIndex:cell.row];
[_tableView reloadData];
[self performSelectorInBackground:@selector(ignoreRequest:) withObject:uid];
} 
```

> 在这里我有一个 id_Array 并且在选择一个单元格时我只需删除该索引处的对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:32:53.133

您必须手动执行此操作，UITableView 或 UITableViewController 中没有工具可以自动执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:35:12.167

当用户选择任何单元格时，您可以在 didSelectRowAtIndexPath 中动态添加所选对象。

```
[someMutableArr addObject:[tableArr objectAtIndex:indexPath.row]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T12:36:10.020

试试这个

```
- (void)onButtonClick {

    int numberOfSections = [tableView numberOfSections];

    for (int section = 0; section < numberOfSections; section++) {

        int numberOfRows = [tableView numberOfRowsInSection:section];

        for (int row = 0; row < numberOfRows; row++) {

            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

            if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {

                // Cell is selected
               //here you can add that values into an array
            } else {

                // Cell is not selected
            }
        }
    }
} 
```

# android - Android DialogPreference 布局 TextSize

> ID：11189435
> 
> 赞同：2
> 
> 时间：2012-06-25T12:30:41.967
> 
> 标签：android, layout, preferences, dialog-preference

我正在使用具有一些不同偏好的 PreferenceScreen。我还在使用扩展 DialogPreference 的自定义首选项。现在自定义 DialogPreference 的字体大小与其他首选项的字体大小不同。我尝试将样式应用于首选项活动，但我刚刚发现所有字体都具有相同的大小（标题和摘要）。

有没有另一种方法可以让所有偏好看起来都一样？谢谢！

（我查看了 DialogPreferences 的其他问题，但我找不到解决方案，所以我希望这不是太多余）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:53:33.060

尝试在您的自定义首选项中使用预定义的 Android 样式。例如，使用

`@android:style/TextAppearance.Medium`

对于普通的 TextViews，和

`@android:style/TextAppearance.Large`

四个你的标题TextViews。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T14:59:47.517

它不应该这么难，但它是：

```
 <com.yourpackage.CustomPreference
        android:dialogMessage="@string/summary"
        android:summary="@string/summary"
        android:title="@string/title"
        android:key="preference"
        android:layout="@layout/custom_preference_title"
        /> 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:minHeight="?android:attr/listPreferredItemHeight">

<TextView
    android:id="@+android:id/title"
    style="@android:style/TextAppearance.Medium"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft"
    android:text="test" />

</RelativeLayout> 
```

# asp.net - 3 层的 Linq 问题

> ID：11189436
> 
> 赞同：0
> 
> 时间：2012-06-25T12:30:42.417
> 
> 标签：asp.net, linq-to-sql, 3-tier

我创建了一个 .dbml 文件。我想在 3 层架构中进行编码。现在我在 dbml 文件中有一个像 UserMaster 这样的表。我可以在我的 aspx.cs 页面中使用该 UserMaster 吗？或者我必须在业务逻辑中创建属性并分配值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:42:29.217

分离到不同层的全部目的是带来一些松散的耦合和抽象，以便 UI 层不会知道您在数据访问级别使用的数据库访问技术。所以我认为你不应该直接将 UserMaster 表共享到 UI 层。您最好从数据源读取数据，然后填充您的 POCO 类并将其返回到您的 UI 层。

因此，我将创建一个返回用户列表（您的用户实体类的对象）的方法来执行此操作。因此，如果发生更改（您希望将 DisplayName 字段从 FirstName 映射到其他字段），您在一个地方（您的数据层）进行更改，您将在调用此方法的所有地方进行此更改。

# emacs - 如何从 eLisp 调用 env 并正确转义目标程序的路径？

> ID：11189439
> 
> 赞同：0
> 
> 时间：2012-06-25T12:30:49.420
> 
> 标签：emacs, path, escaping, elisp, env

我正在尝试做的事情如下：

```
(let ((pj-path (concat src haxe-project-generator)))
        (when (file-exists-p pj-path)
          (shell-command
           (concat "env " (haxe-build-env-vars <more arguments>)
                   (format "'%s'" pj-path))))) 
```

即我想`pj-path`在填充了一些变量的环境中调用一个程序。

在`(format "'%s'" pj-path)`我尝试单引号和双引号的行中 - 但`env`不进行路径扩展，如果它被引用，它将把它当作一个字符串，而不是找到文件。但是，如果它没有被引用，那么它将把直到第一个空格之前的字符串部分解释为程序的路径。

如果我转义空格（如在它们前面加上反斜杠），它似乎可以工作，但可以肯定的是，空格不是唯一会混淆执行命令的 shell 的字符。

那么，在 eLisp 中转义应该传递给 env 的可执行文件名称的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:05:32.840

试试`shell-quote-argument`。

```
(shell-command (concat "ls " 
                       (shell-quote-argument "/path with spaces/(and parens)/"))) 
```

# javascript - IE8 中的参数无效

> ID：11189444
> 
> 赞同：2
> 
> 时间：2012-06-25T12:31:17.187
> 
> 标签：javascript, jquery, html, invalid-argument

这让我困惑了几个小时。为什么在 IE8 中测试时出现“无效参数”错误？

```
function resizeContainer() {
    wHeight = window.innerHeight;
    $('.container').each(function () {
        $(this).animate({
            height: wHeight
        }, 400);
    });
    $('.content').each(function () {
        wHeight = window.innerHeight;
        fullPad = wHeight - $(this).height();
        if (wHeight < 750) {
            cropFactor = 1.7;
        }
        else {
            cropFactor = 2;
        }
        $(this).animate({
            paddingTop: fullPad / cropFactor
        });
    });
} 
```

我得到的确切错误是：

> 无效的论点。jquery.js，第 8826 行字符 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:39:14.333

[`window.innerHeight`](https://developer.mozilla.org/en/DOM/window.innerHeight)在 IE 之前没有定义，所以`wHeight`是`undefined`，然后`fullPad`变成`NaN`。试试[`$(window).height()`](http://api.jquery.com/height/) 吧。

在 IE 中设置无效的样式值是“无效参数”错误的原因之一。

# php - 如何在 PHP 中比较日期（日/月）

> ID：11189445
> 
> 赞同：-3
> 
> 时间：2012-06-25T12:31:18.830
> 
> 标签：php, compare

> **可能重复：**
> [如何比较两个 Zend_Date 对象的日期部分？](https://stackoverflow.com/questions/8120688/how-to-compare-the-date-parts-of-two-zend-date-objects)

我一直在尝试比较日期，但由于某种原因，事情似乎并没有像我希望的那样工作。每当有人在某一天登录我的网站时，我都会尝试登录数据库。我已经使用了 if`(date("j F") == "25 July")`后跟我的代码，但它似乎没有触发。我打算让它检查很多事情，例如 3 月 13 日星期五、3 月 17 日等（显然我知道我需要更改 13 日星期五的 date() 格式）。7 月 25 日的当前检查是 date() 回声的副本，所以我知道这绝对不是错字。谁能告诉我为什么这不起作用，以及如何做到这一点？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:34:25.267

最好的方法是使用 strtotime 函数。但我认为在您指定日期之前它不会起作用。

不过不确定。但是 strtotime 是一个不错的选择。

# c# - CreateProcessAsUser，调用dll函数

> ID：11189447
> 
> 赞同：0
> 
> 时间：2012-06-25T12:31:33.367
> 
> 标签：c#, winapi, createprocessasuser

使用 CreateProcessAsUser 我可以在硬盘上的某处调用 .exe 文件：

```
CreateProcessAsUser(IntPtr hToken, string lpApplicationName, string lpCommandLine,
                      ref SECURITY_ATTRIBUTES lpProcessAttributes, ref SECURITY_ATTRIBUTES lpThreadAttributes,
                      bool bInheritHandle, Int32 dwCreationFlags, IntPtr lpEnvrionment,
                      string lpCurrentDirectory, ref STARTUPINFO lpStartupInfo,
                      ref PROCESS_INFORMATION lpProcessInformation); 
```

我在网上找到的每个示例都使用 lpCommandLine 参数来调用程序。我想在 dll 中调用一个函数。有谁知道这是否可能？有一个例子会很好......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:20:05.857

您不能直接以不同用户的身份调用 DLL，因为用户/执行级别是每个进程，而不是 DLL 或线程。您必须启动一个新进程，然后调用该 DLL。这是 COM 提升等使用的技术。如果 DLL 具有正确的签名，您可以尝试使用`rundll32.exe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:44:15.293

我认为使用该功能是不可能的。在 dll 中调用方法的标准方法是使用[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx)and[`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212.aspx)方法，如下例所示：

（取自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944.aspx)）

```
// A simple program that uses LoadLibrary and 
// GetProcAddress to access myPuts from Myputs.dll. 

#include <windows.h> 
#include <stdio.h> 

typedef int (__cdecl *MYPROC)(LPWSTR); 

int main( void ) 
{ 
    HINSTANCE hinstLib; 
    MYPROC ProcAdd; 
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE; 

    // Get a handle to the DLL module.

    hinstLib = LoadLibrary(TEXT("MyPuts.dll")); 

    // If the handle is valid, try to get the function address.

    if (hinstLib != NULL) 
    { 
        ProcAdd = (MYPROC) GetProcAddress(hinstLib, "myPuts"); 

        // If the function address is valid, call the function.

        if (NULL != ProcAdd) 
        {
            fRunTimeLinkSuccess = TRUE;
            (ProcAdd) (L"Message sent to the DLL function\n"); 
        }
        // Free the DLL module.

        fFreeResult = FreeLibrary(hinstLib); 
    } 

    // If unable to call the DLL function, use an alternative.
    if (! fRunTimeLinkSuccess) 
        printf("Message printed from executable\n"); 

    return 0;

} 
```

# asp.net - 如何调用 Web 服务并使用 URL 传递参数

> ID：11189451
> 
> 赞同：12
> 
> 时间：2012-06-25T12:31:43.000
> 
> 标签：asp.net, web-services, url

如何调用 ASP .NET Web 服务并使用 URL 传递参数？

例如，服务的 URL 是这样的，

`http://[localhost]:31856/MySystem/MyAPI.asmx?op=getHeight`

我需要传递两个参数a和b，我试过了

`http://[localhost]:31856/MySystem/MyAPI.asmx?op=getHeight?a=254&b=1`

但是失败了。

请指教。

非常感谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T12:43:19.180

如果你需要传递多个参数，使用这种格式`param1=value1&param2=value2`等等。所以你的链接应该是：

```
http://[localhost]:31856/MySystem/MyAPI.asmx/AnyMethodName?op=getHeight&a=254&b=1 
```

你需要一个这样的方法。这个方法返回一个字符串列表，它只是为了演示。

```
 [WebMethod]
    public List<string> AnyMethodName(string op, string a, string b)
    {
       //Do whatever you want, get answer
        return (ans.ToList());
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-27T14:11:28.630

我遇到了同样的问题，我需要在我的 webconfig 中的 system.web -tag 中添加以下内容：

```
<webServices>
<protocols>
<add name="HttpGet" />
</protocols>
</webServices> 
```

其余的几乎就像已经提到的（使用 Ashwin 回答中的示例，只是删除了操作参数）

```
 [WebMethod]
    public List<string> AnyMethodName(string a, string b)
    {
       //Do whatever you want, get answer
        return (ans.ToList());
    } 
```

之后，我可以使用以下命令调用 web 服务（再次删除了 op 参数）：

```
http://localhost/MySystem/MyAPI.asmx/AnyMethodName?a=254&b=1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T12:38:21.873

将第二个更改`?`为`&`. 如果您查看由 呈现的页面`http://[localhost]:31856/MySystem/MyAPI.asmx`，它将向您展示如何将其称为`HTTP GET`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T12:38:12.553

不像那样。
您必须在函数中声明参数。例如，这里有一个小例子：

```
[WebMethod]
public string[] getVariables(string sop, string sgsm)
{ // do what you want ... } 
```

然后当你调用它时

```
WebReference.Service1 service = new WebReference.Service1();
service.getVariables("foo", "blabla"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-04T19:37:57.807

**按照以下步骤**

**第 1 步：** 点击 Add Service Reference 并添加 service 的引用。它在部分类中创建对服务的引用以及在项目命名空间下调用服务所需的所有方法。

**第 2 步：**在 using 中添加相同的类 ..

**步骤 3：**浏览服务引用下生成的类文件并获取它的名称。

**第 4 步：**创建一个类似的客户端`new Service1SoapClient("Service1Soap");`，然后将服务用作 Method 。您可以传递参数（如果需要），就像从另一个调用一个方法时传递的方式一样。

# php - 创建一个公式来确定受欢迎程度

> ID：11189452
> 
> 赞同：0
> 
> 时间：2012-06-25T12:31:43.687
> 
> 标签：php, math, formula

对于我的浏览页面，我需要创建一个论坛，以便首先显示流行的图像。现在，我唯一能真正以此为基础的是一张图片在我的网站上收到了多少赞。

你还有什么建议添加到我的网站来改进这个公式的吗？我可以创建一个对用户隐藏的视图功能，因为我不希望它被滥用。

另外，即使它只是基于喜欢，我将如何在 PHP 中创建它？

会不会像

```
$totaluploads = 44;
$currentimagelikes = 12;
$score = $totaluploads / $currentimagelikes x 100; 
```

最后我会做一个在页面加载时生成这个的函数吗？或者将其保存在数据库中并运行 cron 作业以每 x 分钟更新一次？

重新打开。谁能给我一个例子，说明我如何为此制作一个论坛？这是我尝试过的。

```
$daysold = 0;
$likes = 1;
$ageminus = $daysold *0.5;
$age = $likes - $daysold;

$score = $age / $likes * 100;
echo round($score)."%"; 
```

但是，如果一张图片刚刚上传，那么它会给它 100% 的人气吗？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:45:51.830

您也可以考虑图像浏览次数/展示次数。如果您在页面生成时拥有所有计数，例如总上传数、当前图像喜欢数等，那么您可以动态计算分数，否则您将始终可以选择将分数保存在数据库中并每 x 分钟更新一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:25:29.350

您如何阻止图像在“最受欢迎”页面上显示，直到它具有一定数量的浏览量？

# java - Mahout - 简单的分类问题

> ID：11189456
> 
> 赞同：4
> 
> 时间：2012-06-25T12:32:01.083
> 
> 标签：java, classification, mahout

我正在尝试构建一个简单的模型，可以将点分类为2D 空间的 **2 个分区：**

1.  我通过指定几个**点和它们所属的分区来****训练模型**。
***   我使用模型来**预测****测试点可能落入**的组（分类） 。**

 **不幸的是，我没有得到预期的答案。我在我的代码中遗漏了什么还是我做错了什么？

```
public class SimpleClassifier {

    public static class Point{
        public int x;
        public int y;

        public Point(int x,int y){
            this.x = x;
            this.y = y;
        }

        @Override
        public boolean equals(Object arg0) {
            Point p = (Point)  arg0;
            return( (this.x == p.x) &&(this.y== p.y));
        }

        @Override
        public String toString() {
            // TODO Auto-generated method stub
            return  this.x + " , " + this.y ; 
        }
    }

    public static void main(String[] args) {

        Map<Point,Integer> points = new HashMap<SimpleClassifier.Point, Integer>();

        points.put(new Point(0,0), 0);
        points.put(new Point(1,1), 0);
        points.put(new Point(1,0), 0);
        points.put(new Point(0,1), 0);
        points.put(new Point(2,2), 0);

        points.put(new Point(8,8), 1);
        points.put(new Point(8,9), 1);
        points.put(new Point(9,8), 1);
        points.put(new Point(9,9), 1);

        OnlineLogisticRegression learningAlgo = new OnlineLogisticRegression();
        learningAlgo =  new OnlineLogisticRegression(2, 2, new L1());
        learningAlgo.learningRate(50);

        //learningAlgo.alpha(1).stepOffset(1000);

        System.out.println("training model  \n" );
        for(Point point : points.keySet()){
            Vector v = getVector(point);
            System.out.println(point  + " belongs to " + points.get(point));
            learningAlgo.train(points.get(point), v);
        }

        learningAlgo.close();

        //now classify real data
        Vector v = new RandomAccessSparseVector(2);
        v.set(0, 0.5);
        v.set(1, 0.5);

        Vector r = learningAlgo.classifyFull(v);
        System.out.println(r);

        System.out.println("ans = " );
        System.out.println("no of categories = " + learningAlgo.numCategories());
        System.out.println("no of features = " + learningAlgo.numFeatures());
        System.out.println("Probability of cluster 0 = " + r.get(0));
        System.out.println("Probability of cluster 1 = " + r.get(1));

    }

    public static Vector getVector(Point point){
        Vector v = new DenseVector(2);
        v.set(0, point.x);
        v.set(1, point.y);

        return v;
    }
} 
```

输出：

```
ans = 
no of categories = 2
no of features = 2
Probability of cluster 0 = 3.9580985042775296E-4
Probability of cluster 1 = 0.9996041901495722 
```

99% 的时间输出显示`cluster 1`. **为什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-16T15:24:10.890

问题是您没有包含偏差（截距）项，它始终为 1。您需要将偏差项（1）添加到您的点类中。

这是许多机器学习经验丰富的人犯的一个非常基本的错误。花一些时间学习理论可能是个好主意。[Andrew Ng 的讲座](http://cs229.stanford.edu/notes/cs229-notes4.pdf)是学习的好地方。

为了让您的代码给出预期的输出，需要更改以下内容。

1.  添加了偏置项。
2.  学习参数太高。改成 10

现在你会得到 0 类的 P(0)=0.9999。

这是一个给出正确结果的完整工作示例：

```
import java.util.HashMap;
import java.util.Map;

import org.apache.mahout.classifier.sgd.L1;
import org.apache.mahout.classifier.sgd.OnlineLogisticRegression;
import org.apache.mahout.math.DenseVector;
import org.apache.mahout.math.RandomAccessSparseVector;
import org.apache.mahout.math.Vector;

class Point{
    public int x;
    public int y;

    public Point(int x,int y){
        this.x = x;
        this.y = y;
    }

    @Override
    public boolean equals(Object arg0) {
        Point p = (Point)  arg0;
        return( (this.x == p.x) &&(this.y== p.y));
    }

    @Override
    public String toString() {
        return  this.x + " , " + this.y ; 
    }
}

public class SimpleClassifier {

    public static void main(String[] args) {

            Map<Point,Integer> points = new HashMap<Point, Integer>();

            points.put(new Point(0,0), 0);
            points.put(new Point(1,1), 0);
            points.put(new Point(1,0), 0);
            points.put(new Point(0,1), 0);
            points.put(new Point(2,2), 0);

            points.put(new Point(8,8), 1);
            points.put(new Point(8,9), 1);
            points.put(new Point(9,8), 1);
            points.put(new Point(9,9), 1);

            OnlineLogisticRegression learningAlgo = new OnlineLogisticRegression();
            learningAlgo =  new OnlineLogisticRegression(2, 3, new L1());
            learningAlgo.lambda(0.1);
            learningAlgo.learningRate(10);

            System.out.println("training model  \n" );

            for(Point point : points.keySet()){

                Vector v = getVector(point);
                System.out.println(point  + " belongs to " + points.get(point));
                learningAlgo.train(points.get(point), v);
            }

            learningAlgo.close();

            Vector v = new RandomAccessSparseVector(3);
            v.set(0, 0.5);
            v.set(1, 0.5);
            v.set(2, 1);

            Vector r = learningAlgo.classifyFull(v);
            System.out.println(r);

            System.out.println("ans = " );
            System.out.println("no of categories = " + learningAlgo.numCategories());
            System.out.println("no of features = " + learningAlgo.numFeatures());
            System.out.println("Probability of cluster 0 = " + r.get(0));
            System.out.println("Probability of cluster 1 = " + r.get(1));

    }

    public static Vector getVector(Point point){
        Vector v = new DenseVector(3);
        v.set(0, point.x);
        v.set(1, point.y);
        v.set(2, 1);
        return v;
    }
} 
```

输出：

```
2 , 2 belongs to 0
1 , 0 belongs to 0
9 , 8 belongs to 1
8 , 8 belongs to 1
0 , 1 belongs to 0
0 , 0 belongs to 0
1 , 1 belongs to 0
9 , 9 belongs to 1
8 , 9 belongs to 1
{0:2.470723149516907E-6,1:0.9999975292768505}
ans = 
no of categories = 2
no of features = 3
Probability of cluster 0 = 2.470723149516907E-6
Probability of cluster 1 = 0.9999975292768505 
```

*请注意，我在 SimpleClassifier 类之外定义了 Point 类，但这只是为了使代码更具可读性，并不是必需的。*

看看当你改变学习率时会发生什么。阅读有关交叉验证的说明，以了解如何选择学习率。

```
Learning Rate => Probability of cluster 0
0.001 => 0.4991116089
0.01 => 0.492481585
0.1 => 0.469961472
1 => 0.5327745322
10 => 0.9745740393
100 => 0
1000 => 0 
```

**选择学习率：**

1.  运行随机梯度下降是很常见的，就像我们从一个固定的学习率 α 开始一样，通过在算法运行时让学习率 α 慢慢降低到零，也可以确保参数收敛到全局最小值，而不是仅仅围绕最小值振荡。
2.  在这种情况下，当我们使用常数 α 时，您可以进行初始选择，运行梯度下降并观察成本函数，并相应地调整学习率。[这里](http://openclassroom.stanford.edu/MainFolder/DocumentPage.php?course=MachineLearning&doc=exercises/ex3/ex3.html)解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T17:48:41.073

我想我认为这是您的分类示例的潜在**问题：**

*   使用`OnlineLogisticRegression`训练的默认值（`learningRate`等...）
*   引入恒定偏差（它只是另一个具有恒定值的预测变量`1`）
*   将训练数据打乱（不要先提供第一个集群对应的训练数据，然后再提供给第二个集群的数据）
*   显着增加训练数据量

有关此潜在问题的更多详细信息，请参阅[Mahout in Action](http://www.manning.com/owen/)一书。

**“修复”潜在问题后的**结果**
： 测试点`<0.5, 0.5>`被分类为`cluster 0`概率为 ca。`0.89`在多次运行中始终如一。
这听起来像是一个合理的输出，因为原点附近的其他点（用于训练模型）也属于`cluster 0`.**

 ****代码**

```
public class SimpleClassifier {

    public static class Point {
        public int x;
        public int y;

        public Point(int x, int y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public boolean equals(Object arg0) {
            Point p = (Point) arg0;
            return ((this.x == p.x) && (this.y == p.y));
        }

        @Override
        public String toString() {
            // TODO Auto-generated method stub
            return this.x + " , " + this.y;
        }
    }

    public static void main(String[] args) {

        Map<Point, Integer> points = new HashMap<Point, Integer>();

        points.put(new Point(0, 0), 0);
        points.put(new Point(1, 1), 0);
        points.put(new Point(1, 0), 0);
        points.put(new Point(0, 1), 0);
        points.put(new Point(2, 2), 0);

        points.put(new Point(8, 8), 1);
        points.put(new Point(8, 9), 1);
        points.put(new Point(9, 8), 1);
        points.put(new Point(9, 9), 1);

        OnlineLogisticRegression learningAlgo = new OnlineLogisticRegression(2, 3, new L1());

        System.out.println("training model  \n");
        for (int i=0; i<100; i++) {
            List<Point> randomPoints = new ArrayList<>(points.keySet());
            Collections.shuffle(randomPoints);
            for (Point point : randomPoints) {
                Vector v = getVector(point);
                System.out.println(point + " belongs to " + points.get(point));
                learningAlgo.train(points.get(point), v);
            }
        }
        learningAlgo.close();

        //now classify real data
        Vector v = new RandomAccessSparseVector(3);
        v.set(0, 0.5);
        v.set(1, 0.5);
        v.set(2, 1);

        Vector r = learningAlgo.classify(v);
        System.out.println(r);

        System.out.println("ans = ");
        System.out.println("no of categories = " + learningAlgo.numCategories());
        System.out.println("no of features = " + learningAlgo.numFeatures());
        System.out.println("Probability of cluster 0 = " + (1.0d - r.get(0)));
        System.out.println("Probability of cluster 1 = " + r.get(0));

    }

    public static Vector getVector(Point point) {
        Vector v = new DenseVector(3);
        v.set(0, point.x);
        v.set(1, point.y);
        v.set(2, 1);

        return v;
    }
} 
```****

# iphone - 从字符串中获取 doubleValue 时如何防止舍入？

> ID：11189464
> 
> 赞同：0
> 
> 时间：2012-06-25T12:32:19.823
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我从服务器以 JSON 格式获取纬度和经度，它是字符串格式，然后我通过使用默认的 doubleValue 函数将纬度和经度的值转换为双精度值来使用这个纬度和经度，但使用这个值是四舍五入的。那么，从字符串中获取 doubleValue 时如何防止舍入？这是我的代码

```
 CLLocationCoordinate2D defaultLoc;

            defaultLoc.latitude = [[self.obj valueForKey:@"latitude"] doubleValue];
            defaultLoc.longitude = [[self.obj valueForKey:@"longitude"] doubleValue]; 

            NSLog(@"latitude : %f longitude : %f",defaultLoc.latitude,defaultLoc.longitude); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:29:11.433

默认情况下，格式说明符`%f`将双精度值四舍五入为六位小数。尝试将格式指定为`%.10f`您需要的任何小数位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T12:20:21.163

我有同样的问题。我通过将来自 JSON 的经纬度数据作为 NSString 解决了这个问题。创建一个对象类来保存你的 lat 和 long 的 NSString 等价物

```
 NSString * lattodeletetest;
 NSString * longtodeletetest;
 lattodeletetest=[dict objectForKey:@"Lat"];
 longtodeletetest=[dict objectForKey:@"Lon"];
 NSArray *array2=[[NSArray alloc] initWithObjects:lattodeletetest,longtodeletetest, nil];
 NSString * coordinateString2=[array2 componentsJoinedByString:@","];
 safe.strLatLong=coordinateString2;

NSLog(@"%@",safe.strLatLong); //prints 12.758493847753464,71.488293492438438 
```

通过这种方式，可以保留从 JSON 获得的 lat 和 long 而不进行编辑。

要将其用作 CLLOcationCoordinate2d ，请使用

```
 NSString *str=strLatLong;
 NSArray *array=[str componentsSeparatedByString:@","];
 lattodeletetest=[array objectAtIndex:0];
 longtodeletetest=[array objectAtIndex:1];
 CLLocationCoordinate2D location=CLLocationCoordinate2DMake([lattodeletetest doubleValue],[longtodeletetest doubleValue]); 
```

# linux - 从 tmp dir 以 root 身份在 linux 上运行进程时，进程会记住 dir 并在删除 dir 时导致错误

> ID：11189470
> 
> 赞同：0
> 
> 时间：2012-06-25T12:32:40.883
> 
> 标签：linux, root

我从 tmp 目录（提取后）以 root 身份在 linux 上运行一个进程。由于某种原因，该过程会记住该目录，并且当该目录被删除时，我会收到错误

```
shell init: error retrieving current directory: getcwd: cannot access parent directories: no such file or directory.

** ERROR **: Resource problem creating '/tmp/app-selfextract.6bxSKU/orbit-root' 
```

在激活该过程之前，我已经尝试 cd 到另一个目录，但它没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:28:44.373

您的进程的当前工作目录是您要删除的目录。删除此目录后，进程无法再找到有关它的信息（它甚至无法说出该目录的父目录是什么）。

您说您在开始该过程之前尝试更改当前目录。这很好，但是由于某种原因，进程本身可能会更改为目录。很难说，如果真的对这个过程一无所知，也不知道你是如何开始的。

您可以尝试使用以下命令检查进程是否确实将此目录作为当前目录`/proc`：

```
$ ls -l /proc/24889/cwd
lrwxrwxrwx 1 igor igor 0 Jun 25 20:26 /proc/24889/cwd -> /tmp/so 
```

（在您的情况下，您必须编写进程的 pid 而不是 24889）。

# user-interface - 如何在 wxpython 中的 wx.StaticBitmap 图像上绘制矩形

> ID：11189471
> 
> 赞同：0
> 
> 时间：2012-06-25T12:32:43.897
> 
> 标签：user-interface, wxpython

如何使用 dc.Rectangle 在名为“bitmap_1”的 wx.StaticBitmap 图像上绘制一个矩形？我在必须绘制矩形的位置上有坐标（（754, 483））。

dc.DrawRectangle(10, 10, 200, 200)` 这给出了一个错误

```
Traceback (most recent call last):
  File "C:\Users\Foster\Documents\Roland\ims project\newtagging2.py", line 129, in OnImageMouseOver
NameError: global name 'dc' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:52:26.057

该错误是因为您尚未定义 dc 是什么。

你想看看[`wxMemoryDC`](http://wxpython.org/docs/api/wx.MemoryDC-class.html)。

MemoryDC 创建一个 DC，可用于绘制内存中的位图（与显示相反）

`bitmap_1`在将它传递给`StaticBitmap`这样的之前，您需要绘制：

```
dc= wx.MemoryDC(bitmap_1)
dc.DrawRectangle(10,10,200,200)
dc.SelectObject(wx.NullBitmap) #This de-selects the bitmap 
```

[本文](http://zetcode.com/wxpython/gdi/)也应该可以帮助您使用 DC。

# iphone - iPhone：什么协议服务最好将图像和视频上传到服务器并从服务器接收数据

> ID：11189472
> 
> 赞同：0
> 
> 时间：2012-06-25T12:32:44.960
> 
> 标签：iphone

我正在尝试将一种场景中的图像和另一种场景中的视频上传到服务器。我应该使用 Restful（json 格式）服务（或）Soap（xml）到服务器。哪一个应该是有效的？

另外，我需要从服务器获取详细信息，我是否应该要求我的服务器工程师在服务器中安装 Restful（json 格式）（或）Soap（xml）协议以将响应发送到应用程序？

请知道的人给我指教。

谢谢你。

# c# - 如何查看我的天蓝色驱动器的内容？

> ID：11189475
> 
> 赞同：1
> 
> 时间：2012-06-25T12:32:55.403
> 
> 标签：c#, .net, azure, azure-storage

我正在使用 Azure 环境进行培训，但对象[CloudDriver](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.clouddrive)遇到了一些问题。

我已经在 blob 上安装了一个驱动器（在存储模拟器上），但我无法通过 CloudBerry 或 Azure 存储资源管理器等 GUI 看到它。

如果我正确理解了这个主题[client-side-accessing-windows-azure-drive](https://stackoverflow.com/questions/10474056/client-side-accessing-windows-azure-drive)，那么存储驱动程序数据的 blob 看起来像另一个 blob 吗？
所以如果驱动器真的是创造的，我可以看到他和 CloudBerry 吗？

其他链接的问题：
您知道可以上传页面 blob（而不是阻止 blob）的 GUI 吗？

为了创建我的 CloudDrive，我使用了这个网站： http: [//archive.loicrebours.fr/index.php/2012/01/29/azure-storage-drive-55/](http://archive.loicrebours.fr/index.php/2012/01/29/azure-storage-drive-55/) （但它是一个法语网页）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:40:37.287

使用存储模拟器时，使用磁盘上的本地存储模拟云驱动器。要查看其内容，您可以打开存储模拟器并选择查看云驱动器内容（这会打开一个资源管理器窗口，指向正确的临时目录）。有关更多详细信息，请参阅[本文](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_exploringwindowsazurestoragevs2010_topic5.aspx)。

注意：Windows Azure 驱动器实验室也在[Windows Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:48:38.597

云驱动器只是一个 VHD，以 Page Blob 的形式存储在您的存储帐户中。正如 David 解释的那样，如果您在模拟器中工作，则会模拟云驱动器。但是，如果您在 Windows Azure 中运行该应用程序，则 VHD 文件将出现在您的存储帐户中（我假设您将能够在 CloudBerry 中看到它，但我不知道它是否支持页面 blob）。

我不知道是否有允许您上传页面 blob 的 GUI，但有一个[**控制台应用程序**](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/11/using-windows-azure-page-blobs-and-how-to-efficiently-upload-and-download-page-blobs.aspx)允许您将 VHD 文件作为页面 blob 上传，如下所示：

**vhdupload.exe 输入文件[http://accountname.blob.core.windows.net/container/blobname](http://accountname.blob.core.windows.net/container/blobname) key.txt**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:37:26.980

ClumsyLeaf CloudXplorer 可以很好地上传页面 blob，因此这是将 VHD 放入 blob 存储以用作驱动器的好方法。

# javascript - 响应式布局中的jquery sortables

> ID：11189478
> 
> 赞同：2
> 
> 时间：2012-06-25T12:33:18.347
> 
> 标签：javascript, jquery, css, jquery-ui, responsive-design

我有一个 3 列布局，可以折叠成一列。我希望能够在列之间移动 div。我遇到的问题是，一旦一列为空，就无法将 div 移回其中。

看这里（将所有 div 移到一列）：http: [//jsfiddle.net/65ENw/17/](http://jsfiddle.net/65ENw/17/)

在列上设置固定宽度可以解决此问题，但随后我的布局不再响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:50:15.830

您可以在列上设置最小高度和最小宽度，当它们没有小部件时它们仍然会占用空间。

```
.widgetCol{ margin:0 1% 0 1%; width:98.0%; min-width:20px; min-height: 20px} 
```

我已经更新了你的小提琴来演示：http: [//jsfiddle.net/65ENw/18/](http://jsfiddle.net/65ENw/18/)

# java - Solr范围未过滤

> ID：11189479
> 
> 赞同：0
> 
> 时间：2012-06-25T12:33:20.160
> 
> 标签：java, solr, lucene

我正在尝试使用[price.facet.range](http://wiki.apache.org/solr/SimpleFacetParameters#facet.range)，但它不起作用，它总是返回未过滤的结果

索引：

```
<field name="price" type="sdouble" indexed="true" stored="false" multiValued="true" /> 

solrDoc.addField("price", 22.99); 
```

创建查询：

```
query.addNumericRangeFacet("price", 0.0 ,100.0, 0.01); 
```

创建的查询：

```
q=mobile+phone&
fl=productId+score&
payload=true&
payload.fl=full_text&
facet.range=price&
f.price.facet.range.start=0.0&
f.price.facet.range.end=100.0&
f.price.facet.range.gap=0.01&
facet=true&
/... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:44:52.020

我找到了解决方案

`query.addFilterQuery("price:[0 100]");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:34:14.447

分面总是对过滤后的结果（'fq' & 'q' 参数）进行操作，除非您明确排除了您没有明确排除的过滤器查询。您能否使用 Solr 中的 exampledocs 数据或其他人易于验证的设置重现问题？

# jquery - jQuery多个输入和检查长度

> ID：11189480
> 
> 赞同：0
> 
> 时间：2012-06-25T12:33:22.230
> 
> 标签：jquery, input

我正在尝试将 4 个输入字段组合到一个 jQuery 函数中，以便它检查每个输入作为它的键，当所有框的长度都达到 4 时，列表项会更改以确认所有字段都已满

***HTML***

```
<div class="cardNumber">
    <input type="text" value="" maxlength="4" name="ccn1" id="ccn1">
    <input type="text" value="" maxlength="4" name="ccn2" id="ccn2">
    <input type="text" value="" maxlength="4" name="ccn3" id="ccn3">
    <input type="text" value="" maxlength="4" name="ccn4" id="ccn4">
</div>

<ul>
    <li class="checkNumber">Card Number</li>
</ul> 
```

***jQuery***

```
$(".cardNumber input[name=ccn1], .cardNumber input[name=ccn2], .cardNumber input[name=ccn3], .cardNumber input[name=ccn4]").keyup(function() {
    $(".cardNumber input[name=ccn1], .cardNumber input[name=ccn2], .cardNumber input[name=ccn3], .cardNumber input[name=ccn4]").each(function() {
        if ($(".cardNumber input[name=ccn1], .cardNumber input[name=ccn2], .cardNumber input[name=ccn3], .cardNumber input[name=ccn4]").length >= '4') {
            $("li.checkNumber").addClass("checked");
        }
    });
}); 
```

**演示：http:** [//jsfiddle.net/fz4wF/](http://jsfiddle.net/fz4wF/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:45:11.220

```
$(':input[name^=ccn]').keyup(function() {
    var check = $(':input[name^=ccn]').filter(function() {
        return $.trim(this.value).length < 4;
    }).length === 0;

    $("li.checkNumber").toggleClass("checked",check);
}); 
```

**[演示](http://jsfiddle.net/d7BqH/1/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T12:42:50.987

像这样的东西：

[http://jsfiddle.net/fz4wF/19/](http://jsfiddle.net/fz4wF/19/)

```
$(".cardNumber input").keyup(function(){    
    var allfilled = true;
    $(".cardNumber input").each(function() {
        if($(this).val().length < 4) {
            allfilled =false;
            return false;
        }
    });  

    $("li.checkNumber").toggleClass("checked",allfilled);    
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:46:35.487

我相信[这](http://jsfiddle.net/fz4wF/14/)就是你所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:56:34.253

我认为最简单的方法是：http: [//jsfiddle.net/fz4wF/28/](http://jsfiddle.net/fz4wF/28/) 不是最好的。

# javascript - jQuery检查ID值是否有数字

> ID：11189486
> 
> 赞同：4
> 
> 时间：2012-06-25T12:33:32.040
> 
> 标签：javascript, jquery

**jQuery**中有没有办法检查 ID 值（例如`id="number1"`）是否包含数字？

这个想法是：

如果（ID 有一个来自变量的数字）然后做点什么。

这是我到目前为止想出的，但它只适用于第一个 div：

```
 $("#tabsstyle li a").bind("click", function () {
        var numSlide = $(this).attr("rel");
        if ($('#slidesContainer div').attr('id').match(numSlide) ) {
        $('#slidesContainer div').fadeIn();
} 
```

numSlide 将存储来自单击的“a”之一的数字，并检查该数字是否包含在“#slidesContainer div”的 id 值中，一旦检查，右侧的 div 将淡入。

HTML结构如下：

```
<div id="slidesContainer">
  <div id="n1" class="slide">
    <h2>Web Development Tutorial</h2>
    <p><button class="test">N1</button></p>

  </div>
  <div id="n2" class="slide">
    <h2>Grunge Brushes, Anyone?</h2>
    <p><button class="test">N2</button></p>

  </div>
  <div id="n3" class="slide">
    <h2>How About Some Awesome Grunge Textures?</h2>
   <p><button class="test">N3</button></p>
  </div>
  <div id="n4" class="slide">
    <h2>'Tis the End, My Friend.</h2>
    <p><button class="test">N4</button></p>
  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:35:10.320

```
var id = $('#element').attr('id'); // #element will replace 
                                   // with your desired selector

id.match(/[0-9]/g) 
```

***检查***

```
if( id.match(/[0-9]/g) ) {
  // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:40:22.517

你可以看看下面的 jquery 插件 [https://github.com/jquery/globalize](https://github.com/jquery/globalize)

处理“数字”的数字可以是整数或小数，十进制数根据文化具有不同的表示形式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:42:11.830

您可以使用[test](http://www.w3schools.com/jsref/jsref_regexp_test.asp)和[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)`javascript`构建函数来检查字符串是否包含数字。

```
 function hasNumber(t){
     //regular expression: /\d/g
     return /\d/g.test(t);
 } 
```

然后`jQuery`用来检查属性的值`id`

```
 alert (hasNumber($('#checkMe').attr('id'))) 
```

# c - 如何将 system() 的输出重定向到文件？

> ID：11189490
> 
> 赞同：7
> 
> 时间：2012-06-25T12:33:59.513
> 
> 标签：c, linux, system, stdout, dup

在这个`C`节目 中

```
#include <stdio.h>
#include <fcntl.h>
int main()
{
    int file = open("Result", O_CREAT|O_WRONLY, S_IRWXU);

    dup2(stdout, file);
    system("ls -l");

    return 0;
} 
```

我正在尝试将[system()](http://linux.die.net/man/3/system)的输出重定向到一个文件，因为我使用了[dup2](http://linux.die.net/man/2/dup2)但它不起作用。

**这段代码有什么问题**？
并且，请告诉我是否有**更好的方法来做到这一点**？（不在`>`终端使用）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T12:38:21.367

`stdout`是`FILE *`标准输出流的指针。`dup2`需要文件描述符，您也弄乱了参数顺序。采用

```
dup2(file, 1); 
```

反而。

在更好的方式做这部分。这种方式很糟糕，因为您可能希望在此`system`调用完成后恢复标准输出。您可以通过多种方式执行此操作。你可以`dup`在某个地方然后`dup2`它回来（并关闭`dup`ped）。我个人不喜欢`cat`按照其他答案中的建议编写自己的实现。如果您唯一想要的是将单个 shell 命令重定向`system`到文件系统中的文件，那么可能最直接和最简单的方法是构造 shell 命令来执行此操作

```
system("ls -l > Result"); 
```

但是如果文件名（结果）来自用户输入，您必须小心，因为用户可以提供类似`'Result; rm -rf /*'`文件名的内容。

此外，关于安全性主题，您应该考虑`ls`按照评论中的建议指定完整路径：

```
system("/bin/ls -l > Result"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T12:40:26.097

简单的事情是`>`确实使用：

```
#include <stdio.h>
int main()
{
    system("ls -l > /some/file");

    return 0;
} 
```

另一种方法是使用`popen()`类似的东西

```
 #include <stdio.h>
   #include <stdlib.h>
   main()
   {
           char *cmd = "ls -l";
           char buf[BUFSIZ];
           FILE *ptr, *file;

           file = fopen("/some/file", "w");
           if (!file) abort();
           if ((ptr = popen(cmd, "r")) != NULL) {
                   while (fgets(buf, BUFSIZ, ptr) != NULL)
                           fprintf(file, "%s", buf);
                   pclose(ptr);
           }
           fclose(file);
           return 0;
   } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T12:39:45.187

您应该使用`popen()`库函数并从返回的数据中读取大块数据`FILE *`并将它们写入您喜欢的任何输出文件。

[参考](http://man7.org/linux/man-pages/man3/popen.3.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:00:39.730

使用`dup`而不是`dup2`. `dup`创建一个别名文件描述符，该值应始终是最小的可用文件描述符。

`new_fd = dup(file);`- 在这个语句中`file`可能有值`3`（因为`stdin`is `0`, `stdout`is`1`和`stderr`is `2`）。`new_fd`也会如此`4`

如果要重定向`stdout`到文件中。然后按如下操作。

```
close(stdout);
new_fd = dup(file); 
```

现在 dup 将返回 1 作为`file`描述符的别名，因为我们关闭`stdout`了所以打开的文件描述符是`0,2,3`并且`1`是最小的可用文件描述符。

如果您使用的`dup2`是手段，`dup2(file,1);`- 这样做

# windows - Cygwin 中的 Python 3.x？

> ID：11189491
> 
> 赞同：4
> 
> 时间：2012-06-25T12:34:05.553
> 
> 标签：windows, python-3.x, cygwin

我`python`在 Windows 7 上的 Cygwin 中有包。但是，键入

```
python -V 
```

返回

```
Python 2.6.8 
```

这是 Python 的一个相当低的版本……我可以使用 Python 3.x（最好是最新版本）。我见过有人说你必须下载一个`.zip`或`.tar`手动才能得到它（类似于[这个](https://stackoverflow.com/questions/440547/installing-python-3-0-on-cygwin?rq=1)问题）。我的问题如下（请注意这不是链接问题的重复）：

*   我可以使用 Cygwin 包管理器以某种方式获得 Python 3.x 吗？
*   如果我设法让 Python 3.x 运行，我可以/应该摆脱 Python 2.6 吗？我的代码都没有在 Python 2.6 特有的任何东西上运行。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:38:17.580

正如其他人所指出的，与 Cygwin 一起安装的 Python 2.6 版本是最新版本。Python 版本号与时间不是线性的。[Python 发布页面](https://www.python.org/downloads/)详细说明了在哪个日期发布了哪些版本。

如果需要，您可以使用 Cygwin Ports 安装 Python3。这是 Cygwin 软件包的集合，这些软件包尚未准备好在主要 Cygwin 镜像上发布，但已编译好可在 Cygwin 上使用。我已经[在 SuperUser 上写了一些说明](https://superuser.com/questions/438413/python3-on-cygwin/438687#438687)，更详细地描述了如何执行此操作。

（我会避免从源代码安装，正如[Lennart](https://stackoverflow.com/users/126214/lennart-regebro) [建议](https://stackoverflow.com/a/11190915/220155)的那样，因为我预计这将需要不平凡的修复才能使其在 Cygwin 上运行。）

如上面链接的超级用户问题中所述，无需卸载 Python 2.6 即可安装 Python 3；两人并肩快乐地奔跑。

也就是说，请注意您声称“我的代码都不能在 Python 2.6 特定的任何东西上运行”的说法：Python 3.x与 Python 2.x*不*兼容，为 Python 2.x 编写的代码通常不适用于 Python 3 .x 没有工作来适应它。[Python 3.0.1 What's New Guide](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)很好地概述了 Python 3.x 的变化。

**更新**：截至 2012 年 7 月 25 日星期三，[Python 3.2.3 包含在标准 Cygwin 安装程序](http://cygwin.com/ml/cygwin/2012-07/msg00553.html)中。只需再次运行 Cygwin `setup.exe`（如果需要，请再次从[cygwin.com](http://www.cygwin.com)下载），您应该能够像任何其他软件包一样选择和安装它。

# sql - SQL server datetimeoffset 数据聚合

> ID：11189499
> 
> 赞同：1
> 
> 时间：2012-06-25T12:34:38.810
> 
> 标签：sql, sql-server-2008

我目前正在开发一个使用 SQL 数据库的应用程序。在这个数据库中，我维护了一个名为 session 的表，它具有三个字段：一个 session id (int)、一个 date_created (datetimeoffset) 和一个 date_expired (datetimeoffset) 字段。

我想将我的会话分组到会话集群中，会话的最短 date_created 和最长 date_expired 不超过 6 小时。另外，我不希望我的组重叠，即如果会话 s1 属于第 1 组，我不希望它也属于第 2 组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:57:49.047

我建议您创建 4 个数据组，例如 0-6、6-12、12-18 和 18-24，因此您可以这样做：

仅供参考：为简单起见，我`case`只在日期列上进行了操作，您需要在 date_created 和 date_expired 之间使用 datediff

FYI2：更改中间值，因为它更适合您，最后查询将返回值 1、2、3 和 4，您应该将其更改为“0 到 6”、“6 到 12”等等..

```
with MyCTE as (
    select case 
            when datepart(hh,date ) between 0 and 6 then 1
            when datepart(hh,date ) between 6 and 12 then 2
            when datepart(hh,date ) between 13 and 18 then 3
            else 4
            end
          as myDatebucket 
    , *
    from session
) 
select myDatebucket, count(*)
from MyCTE
group by myDatebucket
order by myDatebucket 
```

# iphone - 在 TableView 协议之外更改 UITableViewCell.detailTextLabel

> ID：11189503
> 
> 赞同：0
> 
> 时间：2012-06-25T12:34:58.863
> 
> 标签：iphone, uitableview, tableview

我有一个带有 3 个单元格的 tableView。

我想在加载 tableView 后更改该单元格的 .detailTextLabel 。

我怎么能这样做？

我三合会这个：

> UITableViewCell *firstCell = [tableView cellForRowAtIndexPath:0];
> 
> firstCell.detailTextLabel.text = @"ABC";
> 
> [tableView 重载数据];

但这不是什么都不做。什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:38:02.690

代替

```
UITableViewCell *firstCell = [tableView cellForRowAtIndexPath:0]; 
```

采用

```
UITableViewCell *firstCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:37:42.133

试试这个：

```
UITableViewCell *firstCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];

firstCell.detailTextLabel.text = @"ABC"; 
```

无需调用 reloadData。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:57:34.003

当你说

[tableView 重载数据];

那个时候你的： -

(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

方法将被调用三次，因为您的行中有 3 个单元格，这将再次使用您必须通过数组提供的原始文本覆盖您的 firstCell.detailTextLabel.text...

因此，如果您使用的是数组.. 那么您需要更改该数组中的对象以获得所需的索引。

只需执行此操作：

[array replaceObjectAtIndex:0 withObject:@"Change"];

[tableViewCategory 重载数据];

希望这对你有用......

# objective-c - 编译器未检测到 iHasApp.a 框架

> ID：11189508
> 
> 赞同：0
> 
> 时间：2012-06-25T12:35:17.180
> 
> 标签：objective-c

如何将框架 iHasApp.a 框架添加到我的应用程序捆绑框架或框架中。我尝试通过捆绑阶段添加并添加文件，但仍然出现以下错误。

1.  体系结构 i386: 的未定义符号 `_OBJC_CLASS_$_iHasApp`，引用自：RootViewController.o 中的 objc-class-ref
2.  ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

而且我无法添加此框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:54:08.157

iHasApp 的作者在这里。根据您的描述，您正在使用来自[http://amitay.us/ihasapp/index.php的静态库](http://amitay.us/ihasapp/index.php)

正如 Armaan 所问，您是否尝试在模拟器上运行它？根据网站上的警告，iHasApp 未编译为在模拟器上运行。您收到的警告表明未找到 i386 架构的符号，即 iOS 模拟器。

**您将只能在实际设备上编译该项目。**

*以下内容并非广告*：iHasApp 现在作为一种新的、更全面的软件即服务在[https://www.iHasApp.com](https://www.iHasApp.com)进行维护。它目前处于测试的后期阶段。如果您想参加，请注册一个帐户并发送电子邮件至 daniel@ihasapp.com 给我发电子邮件。这个较新的框架将在模拟器上运行（尽管它有点毫无意义）。

# vb.net - 使用 vb.net 编码填写在线表格

> ID：11189518
> 
> 赞同：1
> 
> 时间：2012-06-25T12:36:22.627
> 
> 标签：vb.net

我想通过 vb.net 2008 编码以编程方式填写表格。表格位于网站的第三页。我正在使用以下代码

```
Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

    Dim allelements As HtmlElementCollection = WebBrowser1.Document.All
    Dim txti As HtmlElement = WebBrowser1.Document.GetElementById("txtId")
    Dim txtp As HtmlElement = WebBrowser1.Document.GetElementById("txtPsw")
    Dim txti1 As HtmlElement = WebBrowser1.Document.GetElementById("txtId1")
    Dim txtd As HtmlElement = WebBrowser1.Document.GetElementById("txtDate")
    Dim txtr As HtmlElement = WebBrowser1.Document.GetElementById("txtRegion")
    Dim txte As HtmlElement = WebBrowser1.Document.GetElementById("txtEmail")
    Dim txtt As HtmlElement = WebBrowser1.Document.GetElementById("txtTitle")
    Dim txtu As HtmlElement = WebBrowser1.Document.GetElementById("txtUrl")
    Dim txtp1 As HtmlElement = WebBrowser1.Document.GetElementById("txtPin1")
    Dim txtp2 As HtmlElement = WebBrowser1.Document.GetElementById("txtPin2")
    Dim txtp3 As HtmlElement = WebBrowser1.Document.GetElementById("txtPin3")
    Dim txtp4 As HtmlElement = WebBrowser1.Document.GetElementById("txtPin4")
    Dim txtp5 As HtmlElement = WebBrowser1.Document.GetElementById("txtPin5")
    Dim txtpd As HtmlElement = WebBrowser1.Document.GetElementById("txtData")

    txti.SetAttribute("value", "E712050-15")
    txtp.SetAttribute("value", "HH29")

    txti1.SetAttribute("value", "E712050-15")
    txtd.SetAttribute("value", "")
    txtr.SetAttribute("value", "PAKISTAN")
    txte.SetAttribute("value", "excitedreams@yahoo.com")
    txtt.SetAttribute("value", "Best Classified Business.")
    txtu.SetAttribute("value", "// www.craigslist.org /")
    txtp1.SetAttribute("value", "W")
    txtp2.SetAttribute("value", "X")
    txtp3.SetAttribute("value", "M")
    txtp4.SetAttribute("value", "A")
    txtp5.SetAttribute("value", "F") 
```

结束子

但我的代码无法填写。似乎代码在网站的第一页上有效，但在第三页上无效。如何使它能够填写表格？多谢

# java - 用 JSP 生成的 Json 的 Java 字符串中的 HTML 实体替换多个反斜杠

> ID：11189523
> 
> 赞同：0
> 
> 时间：2012-06-25T12:36:33.863
> 
> 标签：java, json, spring, jsp, spring-mvc

经过数小时的谷歌搜索和搜索，我终于来到了我需要问你的地方！:)

情况如下： Web 服务在 CDATA 中提供数据。这些数据被解析并放入我们的模型中。使用 Spring MVC，我们访问 JSP 文件中的模型以创建....重点来了... JSON！别问，历史！;-)

现在，不知何故有人想到了将多个（反）斜杠放入标题属性的绝妙想法。getTitle() 方法返回字符串“/// Glasvegas \\”。如果我们对 JSON（在 JSP 中创建）执行 JavaSCript eval() 以获取 JavaScript Json 对象，这当然是行不通的。它只是将反斜杠解释为注释，使 Json 无效。我尝试使用 apache.common 和 springframework 中的 escapeHtml() 方法，但它们都只是在正确编码所有其他特殊字符时忽略了反斜杠。

然后我尝试编写自己的方法：

```
public static String escapeHTML(String string) {         
    String foreslash="&#92;";
    String regex="\\\\";
    System.out.println(string.replaceAll(regex,foreslash));
    string.replaceAll(regex,foreslash);
    return string;
} 
```

在控制台输出中，字符串被正确替换，但如果在返回时中断并在调试器中检查变量“字符串”，它仍然是“/// Glasvegas \\”。在生成的 JSP 中也是如此。

所以，我有点迷失在这里。

问候， ASP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:46:15.410

字符串是不可变的。方法“replaceAll”的名称听起来好像您实际上是在修改字符串对象本身，但实际上并非如此。该方法只返回操作的结果。这就是您从 System.out.println 获得正确输出的原因。但是后来你犯了一个错误的想法，认为仅仅因为调用是独立的，而不是在 System.out.println 内部，java 代码应该自己理解这次你希望更改在字符串对象中是永久的;)

尝试像这样重写方法的结尾：

```
System.out.println(string.replaceAll(regex,foreslash));
return string.replaceAll(regex,foreslash); 
```

此外，流行的名称“前斜杠”听起来好像 92 是正斜杠的代码。也许是，我不知道。然后，您的正则表达式会查找反斜杠。这有点令人困惑！

# javascript - Javascript比较时间戳

> ID：11189526
> 
> 赞同：1
> 
> 时间：2012-06-25T12:36:41.443
> 
> 标签：javascript, sorting, timestamp

我正在尝试按时间戳列降序对二维数组进行排序。此列（索引 11）的格式为：'yyyy-MM-dd HH:mm:ss'。我已经尝试了很多东西。根据我读过的主题，这段代码应该可以工作：

```
 List.sort(function(x, y){
     return Date.parse(y[11]) - Date.parse(x[11]);
}); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:39:23.743

这将适用于支持最新定义的输入格式的最新浏览器`Date.parse`（在 ES5 之前，它只是“解析任何`Date#toString`吐出的内容”）。

尽管从未指定过，但较旧的浏览器将支持它`/`而不是`-`日期，因此：

```
List.sort(function(x, y){
     return Date.parse(y[11].replace(/-/g, '/')) - Date.parse(x[11].replace(/-/g, '/'));
}); 
```

当然，始终在您的目标浏览器上进行测试，因为这也从未指定过。

例如，在 IE8 及更早版本上：

```
display(Date.parse("2012-06-01 14:22:17")); 
```

...是`NaN`，但是：

```
display(Date.parse("2012/06/01 14:22:17")); 
```

...是`1338556937000`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:44:57.353

由于您已经获得了完美格式的字符串来比较它们，因此我将完全跳过日期解析：

```
List.sort(function(x, y){
     return y[11] > x[11] ? 1 : -1;
}); 
```

尽管为完整性起见，如果字符串相等，则应返回 0

# android - AChartEngine 饼图视图不显示

> ID：11189529
> 
> 赞同：2
> 
> 时间：2012-06-25T12:36:51.887
> 
> 标签：android, achartengine

> 更新：全部完成！LinearLayout 需要一个实际的高度和宽度。我确定我不需要添加它们，但至少它给了我一些可以使用的东西。塔。我会自己回答这个问题，但我显然没有足够的声誉，需要等待 8 小时。我花了几天时间试图解决这个问题，发布问题并在 2 小时内解决。索兹。

我想我做错了什么。我看过一些例子，并认为我在做几乎相同的事情——但显然不是。

更新：应该指出，我正在使用 aChartEngine 图形库将 PieChartView 添加到 LinearLayout

我有一个方法

```
protected DefaultRenderer buildCategoryRenderer(int[] colors) {
     if(renderer==null)
         renderer = new DefaultRenderer();

     renderer.setClickEnabled(true);
     renderer.setZoomEnabled(true);
     renderer.setSelectableBuffer(10);
     renderer.setApplyBackgroundColor(true);
     renderer.setBackgroundColor(Color.argb(100, 50, 50, 50));
     renderer.setChartTitleTextSize(20);
     renderer.setLabelsTextSize(15);
     renderer.setLegendTextSize(15);
     renderer.setMargins(new int[] { 20, 30, 15, 0 });
     renderer.setZoomButtonsVisible(true);
     renderer.setStartAngle(90);
     for (int color : colors) {

         SimpleSeriesRenderer r = new SimpleSeriesRenderer();
         r.setColor(color);
         renderer.addSeriesRenderer(r);
     }
     return renderer;
     } 
```

像这样在 onCreate() 中调用

```
MyDataSource dataSource = new MyDataSource(this);
    dataSource.open();
    dataSet = new CategorySeries("Analysis");
    int i = 0;
    for(String category:categoriesArray){
        dataSet.add(category, dataSource.getTotalForCategory(category).getNumbers().doubleValue());
        colors[i]=listOfColours[i];
        i++;
    }
    dataSource.close();
    buildCategoryRenderer(colors); 
```

然后在 onResume()

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        if(graph==null){
            graph = ChartFactory.getPieChartView(this, dataSet, renderer);
            LinearLayout graphLayout = (LinearLayout)findViewById(R.id.all_graph);
            graphLayout.addView(graph, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        }else{
            graph.repaint();
        }

    } 
```

这是我的 xml 布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"  android:scrollbars="vertical">
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/summary_table" >
    <LinearLayout android:id="@+id/all_graph" 
    android:layout_width="match_parent" android:layout_height="match_parent" android:layout_weight="1">

    </LinearLayout>     
    <LinearLayout android:background="@android:drawable/list_selector_background" android:id="@+id/current_foo_row">
        <TextView
            android:id="@+id/foos_current_foo"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginTop="25dp"
            android:layout_marginLeft="10dp"
            android:text="@string/current"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium"
            android:textStyle="bold"
            />
        <TextView
            android:id="@+id/current_foo_value"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginTop="25dp"
            android:layout_weight="0.4"
            style="@android:style/TextAppearance.Holo.Medium"
            android:textStyle="bold"/>

        <ImageView 
            android:layout_width="0px" 
            android:layout_height="fill_parent"
            android:src="@android:drawable/ic_menu_more"  
            android:contentDescription="@string/more"
            android:layout_weight="0.1"/>
    </LinearLayout>

    <!-- Hidden bar in/Spend -->
    <LinearLayout android:layout_width="match_parent" android:layout_height="0dp" android:visibility="gone" android:background="@drawable/back" android:id="@+id/bar_spend_row" style="@android:style/TextAppearance.DeviceDefault.Medium">
        <TextView
            android:id="@+id/bar_spend"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginLeft="10dp"
            android:text="@string/bar_spend"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"
            />
        <TextView
            android:id="@+id/bar_spend_value"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>

    </LinearLayout> 
    <LinearLayout android:layout_width="match_parent" android:layout_height="0dp" android:visibility="gone" android:background="@drawable/back" android:id="@+id/bar_in_row" style="@android:style/TextAppearance.DeviceDefault.Medium">

        <TextView
            android:id="@+id/bar_in"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginLeft="10dp"
            android:text="@string/bar_in"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>
        <TextView
            android:id="@+id/bar_in_value"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>

    </LinearLayout> 
    <!--  FINISH -->
    <LinearLayout android:background="@android:drawable/list_selector_background" android:id="@+id/maybe_foo_row" style="@android:style/TextAppearance.DeviceDefault.Medium">
        <TextView
            android:id="@+id/foos_month_expected_foo"
            android:layout_width="0px" 
            android:layout_height="fill_parent"
            android:layout_marginTop="25dp"
            android:layout_marginLeft="10dp"
            android:text="@string/expected" 
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium"
            android:textStyle="bold"
            />
         <TextView
            android:id="@+id/maybe_foo_value"
            android:layout_width="0px" 
            android:layout_height="fill_parent"
            android:layout_marginTop="25dp"
            android:layout_weight="0.4"
            style="@android:style/TextAppearance.Holo.Medium"
            android:textStyle="bold"/>
         <ImageView 
             android:layout_width="0px" 
            android:layout_height="fill_parent"
             android:src="@android:drawable/ic_menu_more" 
             android:contentDescription="@string/more"
             android:layout_weight="0.1"/>
    </LinearLayout>
    <!-- Hidden bar in/Spend -->
    <LinearLayout android:layout_width="match_parent" android:layout_height="0dp" android:visibility="gone" android:background="@drawable/back" android:id="@+id/remaining_spend_row" style="@android:style/TextAppearance.DeviceDefault.Medium">
        <TextView
            android:id="@+id/remaining_spend"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginLeft="10dp"
            android:text="@string/remaining_spend"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>
        <TextView
            android:id="@+id/remaining_spend_value"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>

    </LinearLayout> 
    <LinearLayout android:layout_width="match_parent" android:layout_height="0px" android:visibility="gone" android:background="@drawable/back" android:id="@+id/remaining_in_row" style="@android:style/TextAppearance.DeviceDefault.Medium">

        <TextView
            android:id="@+id/remaining_in"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_marginLeft="10dp"
            android:text="@string/remaining_in"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>
        <TextView
            android:id="@+id/remaining_in_value"
            android:layout_width="0px"
            android:layout_height="fill_parent"
            android:layout_weight="0.50"
            style="@android:style/TextAppearance.Holo.Medium.Inverse"/>

    </LinearLayout> 
    <!--  FINISH -->

    <LinearLayout >
        <Button
            android:id="@+id/foos_add_transaction_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:text="@string/add_transaction" 
            android:layout_gravity="center_horizontal"
            />
    </LinearLayout>

</TableLayout> 
```

结果是图表未显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:24:03.647

LinearLayout 需要一个实际的高度和宽度。我确定我不需要添加它们，但至少它给了我一些可以使用的东西。

# android - android：如何独立于项目状态更改列表视图项目中某些视图的状态？

> ID：11189530
> 
> 赞同：0
> 
> 时间：2012-06-25T12:36:54.690
> 
> 标签：android, listview, selector

我想在列表视图的项目中更改 ImageView 的状态，而不受父项目状态的影响。但我没有得到它？非常感谢您的友好回复！我的代码如下所示！

listview 中项目布局的第一部分：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rl_new_folder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <ImageView android:id="@+id/iv_edit_icon" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/iv_delete_folder"
        android:visibility="invisible"
        android:focusableInTouchMode="false"
        /> 

second the drawable of the imageview 

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/iv_delete_p"/>
    <item android:drawable="@drawable/iv_delete_n"/>
</selector> 
```

当我单击该项目而不是图像本身时，我发现正在按下可绘制对象！任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:31:23.413

您可以使用该属性：`android:duplicateParentState="true/false"`

当此属性设置为 true 时，视图从其直接父级而不是从自身获取其可绘制状态（聚焦、按下等）

# javascript - Fancybox iframe 重新加载

> ID：11189531
> 
> 赞同：0
> 
> 时间：2012-06-25T12:36:57.103
> 
> 标签：javascript, redirect, fancybox

我需要帮助！我使用 fancybox 并使用 iframe 来显示其他页面，但我在 iframe.php 中有这段代码

```
<script type="text/javascript">
function goSelect(selectobj){
 window.location.href='iframe.php?x='+selectobj
}
</script> 
```

在我选择其他值后，此重定向但问题是我需要在 fancybox 中重定向而不是关闭并转到此页面。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:39:13.927

我有同样的问题，但使用struts2。

我设法做这样的事情，在一个fancybox中打开另一个页面：

HTML：

```
<a class="inline" href="page">
Go
</a> 
```

JS：

```
$("#inline, .inline").fancybox({
    'type':           'inline',
    'hideOnContentClick' : false,
    'autoScale':      false,
    'width':          '100%',
    'height':         '100%',
    'transitionIn':   'none',
    'transitionOut':  'none',
    'titleShow':      true,
    'titlePosition':  'outside'
}); 
```

希望对你有帮助！

# iphone - 通过在 iOS 5.1.1 中不起作用的代码打开 iPhone 设置

> ID：11189532
> 
> 赞同：1
> 
> 时间：2012-06-25T12:37:00.433
> 
> 标签：iphone, objective-c, location, ios5.1

我尝试了这些命令-

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]];    
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=Wallpaper"]];    
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=Safari"]]; 
```

这些代码分别在 iOS 5.0 中打开 Location、General、Wallpaper 和 Safari，但在 iOS 5.1.1 中没有任何作用有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:39:44.360

在 iOS 5.1 中，`prefs:`URL 方案已被删除。你不能再使用它了。

如果可以选择使用私有 API，您可以尝试以下操作：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.Preferences"), false); 
```

然后，您必须链接 SpringBoardServices 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T12:15:23.957

只是对@H2CO3 答案的快速补充（不适合评论）。我在我的 Cydia 应用程序中使用该解决方案来打开设置，并结合包含以下条目的权利文件：

```
<key>com.apple.springboard.launchapplications</key>
<string>true</string> 
```

这是我相信 Xcode 格式化权利文件的方式。这在我的两个测试设备上运行良好。但是，一些 beta 测试人员提到设置应用程序没有打开。我注意到权利文件的几个示例使用不同的格式来指示键的值：

```
<true/> 
```

我在无法使用第一个权利条目的设备上进行了尝试，并且实际打开了设置应用程序。

所以我发布这个以防其他人有类似的问题。（以 root 身份运行应用程序也可能是一种解决方案，但我没有尝试过。）

# php - PHP+HTML - 处理名称的正则表达式

> ID：11189536
> 
> 赞同：0
> 
> 时间：2012-06-25T12:37:11.847
> 
> 标签：php, html, regex

我想创建一个正则表达式来验证客户姓名。

这将是一个像 Peter、André、Mary-Anne 或 Van Rensberg 这样的名字。不应允许使用亚洲字符以及与此方式名称无关的其他字符。

这将通过 HTML5 模式属性进行验证，然后再次通过 PHP 作为最后的手段。

我最初是从这个开始的：`[^\p{L}\s0-9]{1,120}`这几乎适用于我的想法，但与我想要完成的事情并不完全相关。

它基本上允许像 c 或 é 或 - 这样的字符，但不允许空格，并且作为副作用允许输入其他特殊字符，如 / 和 %。

鉴于我对这个主题的了解非常有限，我想我会问这个问题，以便从一些比我了解更多的人那里获得一些知识。

感谢您在这方面的任何反馈建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:07:13.303

*你应该从：*

`/^([\p{Letter}\p{Latin}]+(\-[\p{Letter}\p{Latin}]+|[\x20\xA0\x{0020}\x{00A0}])?)+$/`

*如果需要，您可以添加其他脚本，例如：*

`\p{Hebrew}`*,* `\p{Cyrillic}`*,* `\p{Georgian}`*,* `\p{Greek}`*等*

*有关更多信息，请查看“ [Unicode 正则表达式](http://www.regular-expressions.info/unicode.html)”。*

*我建议您在正则表达式验证之前修剪前导/尾随空白字符*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:24:09.480

如果要验证名称是否为名称，则应尝试验证该名称是否不是仅包含空格的无效字符串或长度非常短的字符串。如果您期望正则表达式来验证名称，也许这应该有效

```
/(^|\s)[A-Za-z\-áéíóúÁÉÍÓÚ]+($|\s)/i 
```

但我坚持认为，您可以做的更好的事情是确保名称不是无效字符串，因为有很多名字和姓氏，有很多形状

# android - 用蓝牙车载收音机连接安卓设备

> ID：11189541
> 
> 赞同：2
> 
> 时间：2012-06-25T12:37:57.673
> 
> 标签：android, bluetooth, radio

我需要通过蓝牙将我的安卓手机与车载收音机连接，这样我就可以发送一些将显示在车载收音机显示屏上的数据（任何东西）。我想这需要打开设备的蓝牙插座。到目前为止，我已经设法打开一个小耳塞蓝牙免提设备的插座，并收到初始消息 06-25 14:22:12.995: V/Bluetooth AT recv(2293): AT+BRSF=28 并且每次都有效。

我从这里做什么？

# javascript - 使用 Google 闭包继承

> ID：11189542
> 
> 赞同：1
> 
> 时间：2012-06-25T12:38:01.303
> 
> 标签：javascript, inheritance, google-closure

我有一个名为“baseScreen”的基类，如下所示：

```
digient.casino.ui.baseScreen = function() {
    goog.debug.Logger.getLogger('demo').info('baseScreen');
    this.background                             =   goog.dom.createDom('div', {'class': 'backgroundHolder'}, '');
    console.log(this);
}

digient.casino.ui.baseScreen.background         =   null;

digient.casino.ui.baseScreen.prototype.load     =   function() {
    var self                                    =   this;
    goog.debug.Logger.getLogger('demo').info('baseScreen : load');
    goog.dom.appendChild(document.body, this.background);
    <!-- screen setup code goes here -->
};

digient.casino.ui.baseScreen.prototype.resize  =   function(newSize) {
    goog.debug.Logger.getLogger('demo').info('baseScreen : resize');
}; 
```

中`onLoad`，如果我将 baseScreen 加载为

```
var sc = new digient.casino.ui.baseScreen();
sc.load(); 
```

它工作正常。

然后我导出一个屏幕，命名`registerScreen`如下：

```
digient.casino.ui.registerScreen = function() {                                                     
    goog.debug.Logger.getLogger('demo').info('registerScreen');                                     
    digient.casino.ui.baseScreen.call();
};                                                                                                  
goog.inherits(digient.casino.ui.registerScreen, digient.casino.ui.baseScreen); 
```

当我尝试加载 的对象时`registerScreen`，它会在我尝试附加`this.background`到的行上抛出一个错误，`document.body`并且奇怪`console.log(this)`的是在第 4 行打印`window`对象而不是`baseScreen`或`registerScreen`对象。

我的代码有什么问题？我是否需要在派生类中覆盖加载、调整大小？（试过这个，但失败）或任何其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T05:27:58.807

或者，您也可以将@felix-kling 提到的调用替换为：

```
goog.base(this); 
```

它做同样的事情。

来自文档的关于 goog.base 的一条注释：

> 如果 this 从构造函数中调用，则 this 使用参数 1-N 调用超类构造函数。如果这是从原型方法调用的，那么您必须将方法的名称作为第二个参数传递给该函数。如果不这样做，您将收到运行时错误。

**也可以看看：**

*   [http://docs.closure-library.googlecode.com/git/closure_goog_base.js.html](http://docs.closure-library.googlecode.com/git/closure_goog_base.js.html)
*   [http://bolinfest.com/essays/googbase.html](http://bolinfest.com/essays/googbase.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:45:34.100

您必须调用`baseScreen`will 当前`registerScreen`实例：

```
digient.casino.ui.baseScreen.call(this); 
```

否则，您的函数调用等效于`digient.casino.ui.baseScreen()`，因此`this`指的是全局对象`window`。

# validation - Ext.Net：在验证错误时更改 TextField 突出显示

> ID：11189544
> 
> 赞同：1
> 
> 时间：2012-06-25T12:38:07.370
> 
> 标签：validation, extjs, textfield

我有来自 Ext.Net 库的 TextFiled 并带有以下标记：

```
<ext:TextField runat="server" ID="TxtFieldGroupName" AllowBlank="false" /> 
```

该字段应为非空，并且我已设置 AllowBlank="false" 以防止字段中出现空值。默认情况下，如果字段为空，则会出现红色角，但我想将我的字段突出显示为黄色。那么，当字段为空时，如何突出显示字段而不是默认的红色角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:08:08.103

我找到了解决方案。

我们应该定义用黄色突出显示控件的 CSS：

```
.textfield-invalid
        {
            border-color: #FFCC00 !important;
            background-image: none !important;
            background-color: #FFF2D8 !important;
        } 
```

`InvalidClass`并在属性中设置定义的类名：

```
<ext:TextField runat="server" ID="TxtFieldGroupName" AllowBlank="false" InvalidClass="textfield-invalid" /> 
```

# android - Android：android.content.res.Resources$NotFoundException：字符串资源 ID #0x5

> ID：11189545
> 
> 赞同：172
> 
> 时间：2012-06-25T12:38:10.393
> 
> 标签：android, string, file

当我运行我的应用程序时，我从标题中得到了异常。它的作用是它有一个带有 Hangman 游戏单词的 .txt 文件，我认为访问该文件时会引发异常。我的文件 cuvinte.txt 位于 /assets/。这是我的代码（我跳过了 layout/xml 部分，它工作正常）：

```
public void onCreate() {
    // all the onCreate() stuff, then this:
    try {
        AssetManager am = this.getAssets();
        InputStream is = am.open("cuvinte.txt");
        InputStreamReader inputStreamReader = new InputStreamReader(is);
        BufferedReader b = new BufferedReader(inputStreamReader);
        String rand;
        while((rand=b.readLine())!=null){
            cuvinte.add(rand);
        }
    } catch (IOException e) {
        Toast.makeText(this, "No words file", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }

    newGame(newG);
}

public void newGame(View view){
    Random rand = new Random();
    String stringCuvant = cuvinte.get(rand.nextInt(cuvinte.size()));
    cuvant.setText("");
    System.out.println(stringCuvant);
    for(int i = 0; i< stringCuvant.length(); i++){
        cuvant.append("_ ");
    }
    incercari.setText(valIncercari);
} 
```

当新游戏按钮被按下时和活动开始时，函数 newGame() 都会在 onCreate() 函数中被调用。

* * *

## 回答 #1

> 赞同：594
> 
> 时间：2012-06-25T12:40:40.680

（只是假设，Exception stacktrace 的信息较少）

我认为，这条线`incercari.setText(valIncercari);`会抛出异常，因为`valIncercari`是`int`

所以应该是

```
incercari.setText(valIncercari+""); 
```

或者

```
incercari.setText(Integer.toString(valIncercari)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-17T15:54:01.847

可能导致此异常的另一种情况是使用 DataBinding，即当您在布局中使用类似这样的东西时

```
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android">

    <data>

        <variable
            name="model"
            type="point.to.your.model"/>
    </data>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@{model.someIntegerVariable}"/>

</layout> 
```

请注意，我使用的变量是一个整数，我将它分配给 TextView 的文本字段。由于 TextView 已经有一个带有签名的方法，`setText(int)`它将使用此方法而不是使用`setText(String)`and 转换值。因此，TextView 将您的输入数字视为显然无效的资源值。

解决方案是将您的 int 值转换为这样的字符串

```
android:text="@{String.valueOf(model.someIntegerVariable)}" 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-06-11T19:20:38.993

只是想指出可能引发此错误的另一个原因是，如果您为应用程序的一个翻译定义了字符串资源，但没有提供默认字符串资源。

## **问题示例：**

正如您在下面看到的，我有一个西班牙字符串“get_started”的字符串资源。它仍然可以在代码中引用，但如果手机不是西班牙语，它将没有资源加载和调用时崩溃`getString()`。

**值-es/strings.xml**

```
<string name="get_started">SIGUIENTE</string> 
```

**参考资源**

```
textView.setText(getString(R.string.get_started) 
```

**日志猫：**

```
06-11 11:46:37.835    7007-7007/? E/AndroidRuntime﹕ FATAL EXCEPTION: main
Process: com.app.test PID: 7007
android.content.res.Resources$NotFoundException: String resource ID #0x7f0700fd
        at android.content.res.Resources.getText(Resources.java:299)
        at android.content.res.Resources.getString(Resources.java:385)
        at com.juvomobileinc.tigousa.ui.signin.SignInFragment$4.onClick(SignInFragment.java:188)
        at android.view.View.performClick(View.java:4780)
        at android.view.View$PerformClick.run(View.java:19866)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:135)
        at android.app.ActivityThread.main(ActivityThread.java:5254)
        at java.lang.reflect.Method.invoke(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:372)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698) 
```

## 问题的解决方案

防止这种情况很简单，只要确保你总是有一个默认的字符串资源，`values/strings.xml`这样如果手机是另一种语言，它总是有一个可以回退的资源。

**值/字符串.xml**

```
<string name="get_started">Get Started</string> 
```

**值-en/strings.xml**

```
<string name="get_started">Get Started</string> 
```

**值-es/strings.xml**

```
<string name="get_started">Siguiente</string> 
```

**值-de/strings.xml**

```
<string name="get_started">Ioslegen</string> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-20T15:52:18.190

这个问题主要是由于`setText()`方法错误引起的

解决方案很简单`Integer`，通过将`string`类型转换为

```
textview.setText(Integer.toString(integer_value)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-30T10:47:43.513

有时发生这种情况是因为不喜欢任何来源，例如如果我想从适配器将文本设置到文本视图中，那么我应该使用

```
 textView.setText(""+name); 
```

如果你写类似

```
 textView.setText(name); 
```

这将不起作用，有时我们无法从 string.xml 文件中找到资源，然后会发生这种类型的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-27T17:01:46.597

使用 DataBinding 并将背景设置为`EditText`可绘制文件夹中的资源会导致异常。

```
<EditText
    android:background="@drawable/rectangle"
    android:imeOptions="flagNoExtractUi"
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:hint="Enter Your Name"
    android:gravity="center"
    android:textColorHint="@color/hintColor"
    android:singleLine="true"
    android:id="@+id/etName"
    android:inputType="textCapWords"
    android:text="@={viewModel.model.name}"
    android:fontFamily="@font/avenir_roman" /> 
```

**解决方案**

我只是将背景 `android:background="@drawable/rectangle"`从 `android:background="@null"`

清理并重建项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-27T07:13:12.000

有时我们在 dimen 或任何其他资源文件夹中添加资源，我们忘记添加 dp。

```
<dimen name="exercise_value">4</dimen> 
```

例如，我遇到了这个问题，因为我忘记在我的值中添加 dp。
然后我把它改成

```
<dimen name="exercise_value">4dp</dimen> <br> 
```

繁荣。错误消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-05T02:57:43.550

为了解决它，我不得不更换：

```
Toast.makeText(this, my_int_var, Toast.LENGTH_SHORT).show(); 
```

有了这个：

```
Toast.makeText(this, String.valueOf(my_int_var), Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-01-31T12:51:02.047

您正在为文本字段分配一个数值。您必须将数值转换为字符串：

```
String.valueOf(variable) 
```

# ruby - 编译 Ruby (RVM) 时出错

> ID：11189556
> 
> 赞同：0
> 
> 时间：2012-06-25T12:38:44.483
> 
> 标签：ruby, rvm

操作系统：Ubuntu 12.04

红宝石：1.9.3

我想用 RVM 安装 Ruby，但是当我输入：

```
$> rvm install ruby 
```

编译时出现错误：

```
/usr/bin/ld: /usr/lib/libX11.a(CrGlCur.o): relocation R_X86_64_32 against `.data' can not be used when making a shared object; recompile with -fPIC
/usr/lib/libX11.a: could not read symbols: Bad value
collect2: ld a retourné 1 code d'état d'exécution
make[2]: *** [../../.ext/x86_64-linux/tcltklib.so] Erreur 1
make[2]: quittant le répertoire « /home/lingla_j/.rvm/src/ruby-1.9.3-p194/ext/tk »
make[1]: *** [ext/tk/all] Erreur 2
make[1]: quittant le répertoire « /home/lingla_j/.rvm/src/ruby-1.9.3-p194 »
make: *** [build-ext] Erreur 2 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:34:28.193

看起来您正在针对库的静态版本编译 ruby​​，这可能在极少数情况下发生。

确保您阅读`rvm requirements`并安装了所有必需的库。

检查您的 RVM 配置文件中的编译开关：

```
cat /etc/rvmrc ~/.rvmrc 
```

最后重新安装 ruby​​ 以确保完成干净的安装：

```
rvm reinstall 1.9.3 
```

作为一个注释，现在它相当于`rvm install ruby`1.9.3 是 ruby​​ 的最新版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T14:59:06.207

你可以通过 bash 安装 rvm `bash < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)`

# ruby-on-rails - 从表+列名中检索模型属性

> ID：11189558
> 
> 赞同：0
> 
> 时间：2012-06-25T12:38:50.500
> 
> 标签：ruby-on-rails, ruby, activerecord

假设您有以下模型：

```
class User < ActiveRecord::Base
  has_many :comments, :as => :author
end

class Comment < ActiveRecord::Base
  belongs_to :user
end 
```

假设 User 有一个属性名称，Ruby/Rails 中是否有任何方法可以使用表名和列访问它，类似于您在 select 或 where 查询中输入的内容？就像是：

```
Comment.includes(:author).first.send("users.name")
# or
Comment.first.send("comments.id") 
```

**编辑：**我想要实现的是使用**string**访问模型对象的属性。对于简单的情况，我可以只使用**object.send attribute_name但这在访问“嵌套”属性（例如****Comment.author.name**）时不起作用。

基本上，我想使用 ActiveRecord 在 where() 和 select() 方法中使用的类似 sql 的语法来检索模型属性，例如：

```
c = Comment.first
c.select("users.name") # should return the same as c.author.name 
```

**编辑2：**更准确地说，我想解决以下问题：

```
obj = ANY_MODEL_OBJECT_HERE

# Extract the given columns from the object
columns = ["comments.id", "users.name"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:01:18.143

因为`user`and`id`只是方法，你可以这样称呼它们：

```
comments.send('user').send('id') 
```

或者，您可以随心所欲地构建查询：

```
Comment.includes(:users).where("#{User::columns[1]} = ?", @some_name) 
```

但似乎你并没有真正思考 Rails 方式。我想你有你的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:13:09.033

我认为您正在寻找一种从评论中访问用户的方法。

让我们`@comment`成为第一条评论：

`@comment = Comment.first`

要访问作者，您只需输入`@comment.user`和 If you need the name you would do `@comment.user.name`。这只是[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)。

如果您需要该评论的 id，您会这样做`@comment.id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:01:28.217

我真的不明白你想要达到什么目的。我看到您正在使用多态关联，您需要在`comment.user.name`模型中访问吗？`has_many :comments, :as => :author``User`

对于你的多态关联，你应该有

```
class Comment < ActiveRecord::Base
  belongs_to :author, :polymorphic => true
end 
```

如果你想访问`comment.user.name`，你也可以拥有

```
class Comment < ActiveRecord::Base
  belongs_to :author, :polymorphic => true
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :comments, :as => :author
  has_many :comments
end 
```

请更具体地说明您的目标。

# xml - 通过带有路径的属性重写xml

> ID：11189564
> 
> 赞同：0
> 
> 时间：2012-06-25T12:39:08.750
> 
> 标签：xml, path, flat

尽管我已经看过并阅读了许多关于如何将属性转换为元素的帖子，但没有任何示例可以满足我的需求。我有一个平面 xml，并将其转换为一个完整的面向树的 xml：

输入：

```
<Subsystem Name="Device Monitor">
<Group Name="ITCHealth">
    <Field Name="System\AttachedDevice\OneWire\Count" Type="Integer">0</Field>
    <Field Name="System\AttachedDevice\OneWire\Asset" Type="String">Str</Field>
    <Field Name="System\AttachedDevice\USB\Count" Type="Integer">0</Field>
    <Field Name="System\AttachedDevice\USB\Name" Type="Integer">0</Field>
    <Field Name="System\Camera\Enabled" Type="Boolean">true</Field>
    <Field Name="System\Camera\Present" Type="Boolean">true</Field>
    <Field Name="Network\BlueTooth\RadioStatus" Type="String">Str</Field>
</Group>
</Subsystem> 
```

所需的输出：

```
<Subsystem Name="Device Monitor">
<Group Name="ITCHealth">
    <Group Name="System">
        <Group Name="AttachedDevice">
            <Group Name="OneWire">
                <Field Name="Count" Type="Integer">0</Field>
                <Field Name="Asset" Type="String">Str</Field>
            </Group>
            <Group Name="USB ">
                <Field Name="Count" Type="Integer">0</Field>
                <Field Name="Name" Type="Integer">0</Field>
            </Group>
        </Group>
        <Group Name="Camera">
            <Field Name="Enabled" Type="Boolean">true</Field>
            <Field Name="Present" Type="Boolean">true</Field>
        </Group>
    </Group>
    <Group Name="Network">
        <Group Name="Bluetooth">
            <Field Name="Radiostatus" Type="String">Str</Field>
        </Group>
    </Group>
</Group>
</Subsystem> 
```

我更喜欢 CSharp 解决方案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:11:45.320

这是一个 XSLT 2.0 解决方案（有几个 XSLT 2.0 处理器，您可以从 C# 轻松调用它们）。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs" version="2.0">

    <xsl:template match="*">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Group">
        <xsl:copy>
            <xsl:call-template name="group-fields">
                <xsl:with-param name="fields" select="Field"/>
                <xsl:with-param name="depth" select="1"/>
            </xsl:call-template>
        </xsl:copy>
    </xsl:template>

    <xsl:template name="group-fields">
        <xsl:param name="fields" as="element(Field)*"/>
        <xsl:param name="depth"/>
        <xsl:for-each-group select="$fields" group-by="tokenize(@Name, '\\')[$depth]">
            <xsl:choose>
                <xsl:when test="count(current-group()) = 1 and count(tokenize(@Name, '\\')) = $depth">
                    <Field Name="{current-grouping-key()}" Type="{@Type}">
                        <xsl:value-of select="."/>
                    </Field>
                </xsl:when>
                <xsl:otherwise>
                    <Group Name="{current-grouping-key()}">
                        <xsl:call-template name="group-fields">
                            <xsl:with-param name="fields" select="current-group()"/>
                            <xsl:with-param name="depth" select="$depth + 1"/>
                        </xsl:call-template>
                    </Group>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each-group>
    </xsl:template>

</xsl:stylesheet> 
```

与我的大多数答案不同，这是完整的并且经过测试可以提供您需要的输出，至少在您提供的示例文档上。

# php - 如何处理 Codeigniter 中的 4xx 和 5xx 错误？

> ID：11189572
> 
> 赞同：1
> 
> 时间：2012-06-25T12:39:38.403
> 
> 标签：php, codeigniter, error-handling, httpd.conf

谁能告诉我如何处理 CodeIgniter 中的 4xx 和 5xx 错误？对于每种情况，我必须向用户显示不同的模板。目前我只能使用 show_404() 函数处理 404 错误。请让我知道如何查找和处理其他错误，例如：

400 错误请求
401 需要授权
402 需要付款（尚未使用）
403 禁止
405 方法不允许
406 不可接受（编码）
407 需要代理身份验证
408 请求超时
409 请求冲突
410 已消失
411 需要内容长度
412 前提条件失败
413 请求实体太长
414 请求 URI 太长
415 不支持的媒体类型

服务器错误

500 内部服务器错误
501 未实施
502 网关错误
503 服务不可用
504 网关超时
505 不支持 HTTP 版本

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:35:20.047

您将需要添加 .htaccess 规则来告诉 Web 服务器将错误发送到您的系统。

一个例子是：

```
ErrorDocument 400 /error/e400
ErrorDocument 403 /error/e403 
```

然后让 CodeIgnitor 处理剩下的事情。

# php - Mysql，PDO“排名”

> ID：11189575
> 
> 赞同：0
> 
> 时间：2012-06-25T12:39:59.533
> 
> 标签：php, mysql, select, pdo, distinct

我在试图弄清楚如何完成以下工作时遇到了一些麻烦。

我的桌子：

```
id:  schema:  updated_date

1    sometext  2012-01-01
1    sometext  2012-02-02
1    sometext  2011-03-03
1    sometext  2010-04-04
2    sometext  2012-04-05
2    sometext  2012-06-07
2    sometext  2011-04-01
2    sometext  2010-09-09 
```

现在，我想要完成的是从表中选择所有内容，并根据 id 获取所有不同的记录，这应该给我两行，棘手的部分是根据 updated_date 获取结果，我想要最新的。所以基于上表，我希望能够提取以下2条记录：

```
1    sometext  2012-02-02
2    sometext  2012-06-07 
```

任何人都可以帮助我如何制作这个我 MySQL，我正在使用 PHP PDO。

表结构：

```
CREATE TABLE IF NOT EXISTS `mail_schema` (
  `id` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `message` text NOT NULL,
  `updated_by` int(11) NOT NULL,
  `last_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

表数据：

```
INSERT INTO `mail_schema` (`id`, `name`, `message`, `updated_by`, `last_updated`) VALUES
(1, 'nummer et', '<p>\n med tekst</p>\n', 3, '2012-06-25 18:56:21'),
(1, 'nummer 2', '<p>\n  med tekst</p>\n', 3, '2012-06-25 18:56:46'),
(1, 'test', '<p>\n  test</p>\n', 3, '2012-06-25 18:57:38'),
(1, 'test igen', '<p>\n asd</p>\n', 3, '2012-06-25 18:58:28'),
(2, 'test 5', '<p>\n    asd</p>\n', 3, '2012-06-25 18:59:11'),
(3, 'test 6', '<p>\n    med id 3</p>\n', 3, '2012-06-25 18:59:37'),
(2, 'test 5', '<p>\n    asd version 2</p>\n', 3, '2012-06-25 19:00:46'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:43:00.520

```
SELECT * FROM `table` GROUP BY `id` ORDER BY updated_date DESC; 
```

那没用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:42:34.437

您需要`GROUP BY`在 SQL 查询中使用该子句。

我相信这样的查询应该有效：

```
SELECT * FROM `table` GROUP BY `id`, `updated_date` DESC ORDER BY `id` ASC
                                                    ^
                                                    Might need to be ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:42:57.667

嗯？

```
SELECT * FROM `table` GROUP BY `id` ORDER BY `date` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:31:27.080

搜索了一圈后，我找到了这个解决方案：

```
SELECT * FROM (SELECT * FROM mail_schema ORDER BY last_updated DESC) AS x GROUP BY id 
```

虽然它看起来有点丑陋，但它让我更进一步。

# android - Android AsyncTasks 如何检查活动是否仍在运行

> ID：11189579
> 
> 赞同：19
> 
> 时间：2012-06-25T12:40:23.187
> 
> 标签：android, android-asynctask

我已经`AsyncTasks`在我的应用程序中使用过，以便延迟下载和更新 UI。

现在我`AsyncTasks`简单地更新 UI：

```
protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
        gender.setText(values[0]);
} 
```

我的问题是如何检查性别`TextView`渲染的活动是否仍然可用？

如果没有，我会收到一个错误，我的应用程序将关闭。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-25T12:47:13.357

您可以在活动的 onDestroy 中取消您的异步任务

```
@Override
protected void onDestroy() {
    asynctask.cancel(true);
    super.onDestroy();
} 
```

并在执行更改时检查您的异步任务是否已被取消（活动被破坏）

```
protected void onProgressUpdate(String... values) {
    super.onProgressUpdate(values);
    if(!isCancelled()) {
         gender.setText(values[0]);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-26T16:47:56.840

我有一个类似的问题 - 本质上，在用户销毁片段后，我在异步任务中获得了 NPE。在 Stack Overflow 上研究了这个问题后，我采用了以下解决方案：

```
volatile boolean running;

public void onActivityCreated (Bundle savedInstanceState) {

    super.onActivityCreated(savedInstanceState);

    running=true;
    ...
    }

public void onDestroy() {
    super.onDestroy();

    running=false;
    ...
} 
```

然后，我在我的异步代码中定期检查“是否正在运行”。我已经对此进行了压力测试，现在我无法“破坏”我的活动。这完美地工作并且具有比我在 SO 上看到的一些解决方案更简单的优点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T12:56:55.340

尝试

```
if (!isFinishing()) {
    gender.setText(values[0]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-05T07:43:21.873

检查活动是否正在运行

```
 if (!isFinishing()) {
  // Do whatever you want to do
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T12:45:50.600

尽管如此，我从未遇到过这种情况。我会尽力回答你的问题。

在您的情况下，您将需要验证`Context`传递给`AsyncTask`.

您可以执行验证

```
if(null!=mContext)  //Activity still exist!!
{
  gender.setText(values[0]);
}
else //Activity is destroyed
{
   //Take appropriate action!!
} 
```

好处是，如果活动在您到达此语句时被破坏，您`Context`将自动成为`null`并且您可以处理该场景。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T12:49:16.167

我会坚持告诉你，如果你的 Activity 没有运行，你为什么不取消 AsyncTask？这将是一个更好、更可行的解决方案。如果您的应用程序正在运行，说您从一个活动移动到另一个活动，那么它不会给出错误 AFAIK。

但是，我会坚持取消 AsyncTask 然后你的 Activity 没有运行，你可以检查 AsyncTask 是否正在运行，

```
if(task != null && task.equals(AsyncTask.Status.RUNNING))
task.cancel(true); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-17T20:41:10.117

正如*Android 开发人员培训的*[**这一**](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html#async-task)部分所建议的那样，在任务完成后需要更新的 UI 元素上保留一个，并在使用它之前检查引用是否存在。这不仅有助于检查 UI 是否仍然存在，而且不会阻止 UI 元素被垃圾收集。*`WeakReference``null`*

 ** * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-25T12:43:35.433

不应该

```
if (gender) {
   gender.setText(values[0]);
} 
```

足够？*

# java - 在 Hadoop 中实现采样和数据挖掘算法

> ID：11189581
> 
> 赞同：1
> 
> 时间：2012-06-25T12:40:29.993
> 
> 标签：java, algorithm, hadoop, data-mining, sampling

当前的实现涉及*对大型输入事务文件进行采样，*然后最终将“FP 增长算法”应用于该采样数据以进行数据挖掘。但是，它有其局限性，我想在更大范围内实现它。根据以下采样方法（基于用户响应）对事务文件进行采样：

1.  随机抽样
2.  系统抽样
3.  分层抽样
4.  整群抽样
5.  从采样交易 (FAST) 算法中查找关联。

目标是在 Hadoop 中实现它以进行*并行处理*并支持大型输入数据文件。任何指针如何在 Hadoop 或任何其他开源分布式处理框架中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:37:35.103

这里的问题主要是算法而不是技术问题。我们需要找到算法的并行方法，然后将其转换为 MapReduce 范式。只有这样我们才能使用 Hadoop 并行运行该过程。
我认为对于您的算法相关的并行版本是：http: [//infolab.stanford.edu/~echang/recsys08-69.pdf](http://infolab.stanford.edu/~echang/recsys08-69.pdf)

# android - 选项卡式操作栏中的片段导航

> ID：11189585
> 
> 赞同：4
> 
> 时间：2012-06-25T12:40:51.877
> 
> 标签：android, android-fragments, android-tabs

**问题**

在描述我当前的设置之前，我将描述我的问题。我需要在单独的选项卡内的片段之间进行分层导航。假设我在选项卡中向下钻取，然后切换选项卡，然后返回到第一个原始选项卡，我需要它位于向下钻取的级别，然后能够返回到顶层标签。

**现在进入我的设置。**

我有一个应用程序，其中包含一个名为`MainActivity`. 此活动是控制我的选项卡式操作栏的内容。我遵循了许多不同的教程来处理选择选项卡时片段的切换，下面的代码可以引起您对`onTabSelected`和`onTabUnselected`方法的注意。

**MainActivity -- 选项卡监听器**

```
public static class MyTabListener<T extends Fragment> implements ActionBar.TabListener {
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    private Fragment mFragment;

    public MyTabListener(Activity activity, String tag, Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public MyTabListener(Activity activity, String tag, Class<T> clz, Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            FragmentTransaction ft = mActivity.getFragmentManager().beginTransaction();
            ft.detach(mFragment);
            ft.commit();
        }
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Log.e("FRAGMENT","Selected Fragment With Tag " + mTag);
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(mActivity, "Reselected!", Toast.LENGTH_SHORT).show();
    }

} 
```

当我`Tab1`查看`Fragment1', when a button is pressed I then show another`Fragment `called`Fragment2` 时，我需要能够从中返回。如果我只停留在该选项卡上，下面的代码就可以工作，但是当我离开该选项卡并返回它时，一切都搞砸了。

**MainActivity -- 显示第二个片段**

```
Fragment tdFrag = Fragment.instantiate(this, SecondFragment.class.getName());
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(android.R.id.content, tdFrag, "secondfrag");
    ft.addToBackStack(null);
    ft.commit(); 
```

**我的想法**

我认为这一定是我分离片段并在按下新选项卡时处理切换的方式。也许我需要实现某种方式来存储每个选项卡的每个单独的后台堆栈并从中加载片段而不是系统后台堆栈？

任何帮助都会很棒。我试图尽可能彻底和简单地解释它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:17:53.443

好的，所以经过一些实验后，我决定使用枚举类型来实现自定义 backstack。

我有两种枚举类型：a`ViewType`和`CurrentTab`type。`CurrentTab`类型告诉我当前正在查看的选项卡，以及告诉`ViewType`我在这些选项卡中查看的视图。`ViewType`对于我必须存储在层次结构中的每个选项卡，我都有一个实例。

为了实现后退堆栈，我重写了按下后退按钮时调用的方法。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

             return true;
        }
     return super.onKeyDone(keyCode,event);
} 
```

因此，在它检查后退按钮的地方，我放置了代码来检查当前选项卡和单独的视图类型。这样我就知道我在哪里，如果我退缩，我知道我需要去哪里。

我希望这有助于任何问题，只需发表评论。

# jquery - jQuery ajax 脚本请求成功但没有数据

> ID：11189586
> 
> 赞同：0
> 
> 时间：2012-06-25T12:41:06.520
> 
> 标签：jquery, ajax, request

我已经搜索了一段时间，无法弄清楚为什么我没有得到 ajax 请求的响应对象：

```
$(document).ready(function(){
$.ajax({
    type: 'GET',
    dataType: 'script',
    crossDomain: true,
    url: 'http://api.netimpact.com/qv1.php?key='+apikey+'&qt=geoip&d=json&q='+userip,
    success: function(jqXHR, textStatus) { //both parameters come in as undefined
        console.log(jqXHR);
    },
    error: function(xhr, code){ 
       console.log('error');
    }
   });
}); 
```

响应应该如下所示：

```
[["Tokyo","Tokyo","Japan","Open Computer Network","35.6850","139.7514","JP"]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:47:59.030

您可以尝试`$.getJSON()`：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

> 描述：使用 GET HTTP 请求从服务器加载 JSON 编码的数据。
> 
> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。有关详细信息，请参阅 $.ajax() 中对 jsonp 数据类型的讨论。

或切换到 dataType JSONP：

```
$.ajax({
  url: url,
  dataType: 'jsonp',
  data: data,
  success: callback
}); 
```

> “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。

# objective-c - OCMock 测试通过块是否正确执行

> ID：11189587
> 
> 赞同：4
> 
> 时间：2012-06-25T12:41:15.087
> 
> 标签：objective-c, unit-testing, ocmock

如何验证传递块是否正确执行？

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [self updatePostalCode:newLocation withHandler:^(NSArray *placemarks, NSError *error) {
    // code that want to test
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        self.postalCode = [placemark postalCode];
        _geocodePending = NO;
    }];

    ....
} 
```

我想知道 postalCode, _geocodePending 设置是否正确，但我不知道如何使用 OCMock 执行此操作。

**添加代码**

```
id mockSelf = [OCMockObject partialMockForObject:_location];

    id mockPlacemart = (id)[OCMockObject mockForClass:[CLPlacemark class]];

    [[[mockPlacemart stub] andReturn:@"10170"] postalCode];

    [mockSelf setGeocodePending:YES];
    [mockSelf setPostalCode:@"00000"];

    [self.location handleLocationUpdate]([NSArray arrayWithObject:mockPlacemart], nil);

    STAssertFalse([mockSelf geocodePending], @"geocodePending should be FALSE");
    STAssertTrue([[mockSelf postalCode] isEqualToString:@"10170"], @"10170", @"postal is expected to be 10170 but was %@" , [mockSelf postalCode]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T00:27:26.930

从您的类上的方法返回您的处理程序块。[这样做有几个很好的理由](http://twobitlabs.com/2012/05/block-initialization-for-testability-and-reuse/)，包括可测试性。

```
- (void (^)(NSArray *, NSError *))handleLocationUpdate {
    __weak Foo *weakself = self;
    return ^(NSArray *placemarks, NSError *error) {
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        weakself.postalCode = [placemark postalCode];
        weakself.geocodePending = NO;
    }
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [self updatePostalCode:newLocation withHandler:[self handleLocationUpdate]];

    ....
} 
```

然后，在您的测试中：

```
-(void)testLocationUpdates {
    id mockPlacemark = [OCMockObject mockForClass:[CLPlacemark class]];
    [[[mockPlacemark stub] andReturn:@"99999"] postalCode];

    myClass.geocodePending = YES;
    myClass.postalCode = @"00000";

    [myClass handleLocationUpdate]([NSArray arrayWithObject:mockPlacemark], nil);

    expect(myClass.geocodePending).toBeFalsy;
    expect(myClass.postalCode).toEqual(@"99999");
} 
```

# css - 投影过滤器在 IE 8 中偏移边框

> ID：11189589
> 
> 赞同：1
> 
> 时间：2012-06-25T12:41:22.110
> 
> 标签：css, internet-explorer-8

如果在 IE8 中对 DIV 使用阴影过滤器，则 DIV 的内容将被阴影抵消。如果你给那个 DIV 一个边框，这会导致奇怪的行为。这是它的样子

![在此处输入图像描述](../Images/267ca09c2c1626bbef09858ea9b01428.png)

整个内容和阴影超出了 div 的范围，与边界有一个偏移量。有什么办法可以纠正这个问题，甚至可以伪造纠正这个问题，至少让边界恢复原状？

# java - 解压 GZIP

> ID：11189596
> 
> 赞同：1
> 
> 时间：2012-06-25T12:42:11.573
> 
> 标签：java, android, gzip

我想知道在 gzip 编码响应的情况下我应该做什么。这是处理我的回复的方法：

```
private InputStream getResultStream(Response response) throws IOException
{
    InputStream resultStream = null;
    if(response != null)
    {
        String encoding = response.getHeader("Content-Encoding");
        if((encoding != null) && (encoding.equalsIgnoreCase("gzip")))
        {
            // What to do here ?
            Log.d("Stream :", "Read GZIP");

        } else if ((encoding != null) && encoding.equalsIgnoreCase("deflate")) {
            resultStream = new InflaterInputStream(response.getStream(), new Inflater(true));
            Log.d("Stream :", "Read Deflated.");
        } else {
            resultStream = response.getStream();
            Log.d("Stream :","Read Normal.");
        }       
    }

    return resultStream;
} 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:46:35.883

将您的流包装在 a 中[`GZIPInputStream`](http://developer.android.com/reference/java/util/zip/GZIPInputStream.html)并从中读取。

```
resultStream = new GZIPInputStream(resultStream);
//proceed reading as usual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:48:30.957

如果您只想知道如何读取压缩流，只需使用[GZIPInputStream包装您的输入流](http://developer.android.com/reference/java/util/zip/GZIPInputStream.html)

```
 InputStream is = ...
 GZIPInputStream zis = new GZIPInputStream(new BufferedInputStream(is));
 try {
     // Reading from 'zis' gets you the uncompressed bytes...
     processStream(zis);
 } finally {
     zis.close();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:48:33.443

请执行下列操作 ：

```
resultStream = new java.util.zip.GZIPInputStream(response.getStream()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:52:39.593

免责声明：我没有机会对此进行测试。

根据[Android 的 HTTP 客户端](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)博客文章所说，如果您使用的是 Android 2.3+，那么`HttpURLConnection`可以自动为您完成。

# php - Mantis bug tracker (mantisbt) 动态枚举自定义字段

> ID：11189597
> 
> 赞同：1
> 
> 时间：2012-06-25T12:42:13.467
> 
> 标签：php, customization, mantis

我正在定制 Mantis bugtracker 1.2.8 版的安装，以在错误报告页面上包含一个动态自定义枚举字段。我能够弄清楚如何设置动态枚举并创建相应的函数来生成它的可能值。这是我到目前为止所拥有的：

## 管理 -> 管理自定义字段 -> “旧作业编号”

名称：“旧作业编号”
类型：枚举
可能的值：=legacy_job_number
默认值：0
读写访问权限：查看器
最小。长度：
最大1 长度：0
添加到过滤器：选中
创建作业时
显示：选中 更新作业时显示：选中

## custom_functions_inc.php

```
function custom_function_override_enum_legacy_job_number() {
    $t_project_name = project_get_name( helper_get_current_project() );
    $t_job_time_code = htmlentities(trim(substr(date('U'), 6, 9)));
    $t_project_description = project_get_field( helper_get_current_project(), 'description', '' );

    $t_project_description = "$t_project_description";
    $t_job_code = $t_project_description . "2012" . $t_job_time_code; 
    $t_possible_values_array = array("", "$t_job_code");

    $t_possible_values = implode( '|', $t_possible_values_array );

    return $t_possible_values;
} 
```

我遇到的问题是，每次我尝试提交新工作或更新现有工作并按原样附加“旧作业编号”字段时，我都会收到应用程序错误 #1303，“字段值无效”旧作业数字”。'

我已将问题追溯到 $t_job_time_code = htmlentities(trim(substr(date('U'), 6, 9))); 生成的时间戳值。-- 如果我删除它，错误报告会很好地提交。（如您所见，我只是在 $t_job_code 中硬编码日期，这并不理想，但可以。）

我最终想要做的是将一个四位数的数字附加到“遗留作业编号”字符串中，该字符串有 99.99% 的可能性是唯一的，因为它将用于识别特定的错误。我认为使用时间戳会很好地解决这个问题，因为它会不断增加，但显然 Mantis 不喜欢这样。我已经尝试了许多变体，并且真的不想使用由 rand() 或 mt_rand() 生成的随机数，因为这仍然可能导致重复。

任何人都可以帮助解释（1）为什么会发生这种情况，以及（2）我可能会尝试解决什么问题？

非常感谢您的考虑和帮助。

最好的，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:03:13.887

在完成额外的分析后，我对导致问题的原因有了一个可靠的理论。我发现我能够使用 date("Y") 和 date("m") 来生成表单的字符串

201207

当提交包含此字符串的错误报告时，令我惊讶的是它运行良好。最后一个障碍是“工作代码”末尾的唯一编号。我发现如果我使用 date('U'), 6, 9 生成最后三个数字，每次提交错误报告都失败，可能是因为最后一个数字每秒都在变化。

但是，如果我使用 date('U'), 4, 3 并提交错误报告，它就可以工作。根据我的粗略计算，这个字符串中的最后一个数字——在整个 UNIX 时间戳的上下文中为 0000001000——每 16 分钟变化一次。正如我最初提到的，我需要某种方法来生成唯一编号。我相信我的第一种方法不起作用，因为最初加载错误报告页面时，创建了一个“作业代码”。假设它是“ADM2012447”。但是由于 Unix 时间戳不断增加，提交错误报告会导致与错误报告一起提交的*不同*的3 位数字，这是 Mantis 不喜欢的。

同样，这只是一个可靠的理论，而不是一个已证实的事实。如果我错了，请纠正我。

作为我解决方案的最后一句话，我意识到如果在任何给定的 16 分钟窗口内提交了两个或更多错误报告，它们很可能具有相同的工作代码编号。如果确实发生这种情况，根据系统使用情况，它可能会非常孤立，即使不是，Mantis 自己独特的错误编号系统也可以轻松区分。

感谢所有阅读并考虑过这个问题的人。

# jquery - 如何使用 jQuery 计算具有特定类的单列的 td

> ID：11189599
> 
> 赞同：2
> 
> 时间：2012-06-25T12:42:25.170
> 
> 标签：jquery, html-table

我有一个由代码生成的包含许多行和列的 html 表。其中一些 TD 有一个 ON 类来设置不同的样式。

表格的结构有页眉、正文和页脚行。

我想将每列中所有具有“ON”类的 TD 的数量相加，并将结果放在每列的最后一行（页脚）。

我该怎么做？（行列不是‘固定矩阵’，所以事先不知道表有多少行列）

示例表：

```
data       | id_1 | id_2 | id_3 | ...
2012-06-20 | "ON" |      |      | ...
2012-06-21 | "ON" |      |      | ...
2012-06-22 | "ON" | "ON" |      | ...
2012-06-23 | "ON" |      | "ON" | ...
2012-06-24 | "ON" | "ON" |      | ...
tot        |   5  |   2  |   1  | ... 
```

更新：混合 CRANIO 和 ALNITAK 的解决方案，结果如下：

```
var a = [];
$('td').each(function() {

    var n = $(this).index();
    if($(this).hasClass('on')){
       a[n] = a[n] ? a[n] + 1 : 1;
    }else{
       a[n] = a[n] ? a[n] : 0;
    }
});

var t = $('<tr>').appendTo('#tableID > tfoot');
$.each(a, function(i, n) {
    t.append($('<td>', { text: i === 0 ? 'total' : n }));
}); 
```

通过这种方式，您可以在没有 TD.on 的列中添加零（或空白 ---> a[n] = a[n] ? a[n] : ''; <--- 并解决一些小错误表格末尾的空列（在 alnitak 的优雅解决方案中，未添加最后一行的 TD）

PS对于在不同的TD.class上创建不同的总行也很有用，根据不同的类附加更多的TR。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:57:00.843

见[http://jsfiddle.net/cranio/RTugL/](http://jsfiddle.net/cranio/RTugL/)

我试过这张桌子：

```
<table>
<tr>
    <td></td>
    <td></td>
    <td class='on'>.</td>
    <td class='on'>.</td>
</tr>    

<tr>
    <td class='on'>.</td>
    <td class='on'>.</td>
    <td></td>
    <td></td>
</tr>    
<tr>
    <td></td>
    <td class='on'>.</td>
    <td class='on'> .</td>
    <td class='on'>.</td>
</tr>    </table> 
```

使用此代码：

```
var a = new Array();
$("table tr").each(
    function (i,e)
    {
        $(e).find("td").each(
            function (i,e)
            {
                if (!a[i]) a[i] = 0;
               if ($(e).hasClass("on")) a[i]++;   
            });});
var lastrow = $("<tr>");
$.each(a, function(i,e) { lastrow.append("<td>"+e+"</td>");});
$("table").append(lastrow); 
```

我所做的是计算数组中 TD.on 的出现次数，并针对每个“位置”进行更新。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:01:24.293

这是我目前能想到的最短代码：

```
var a = [];
$('td.on').each(function() {
    var n = $(this).index();
    a[n] = a[n] ? a[n] + 1 : 1;
});

var t = $('<tr>').appendTo('table');
$.each(a, function(i, n) {
    t.append($('<td>', { text: i === 0 ? 'total' : n }));
});​ 
```

[http://jsfiddle.net/alnitak/6XTvN/](http://jsfiddle.net/alnitak/6XTvN/)上的工作示例

**编辑**以确保与此处不匹配的列的空单元格（和零）是第一个代码块的变体：

```
var a = [];
$('td').each(function() {
    var n = $(this).index();
    a[n] = a[n] || 0;
    a[n] += $(this).hasClass('on');
}); 
```

我的第一个版本有一个小缺陷，即没有匹配单元格的列会在 中产生未定义的值`a`，从而导致空白单元格，但更糟糕的是，对于没有匹配单元格的任何尾随列，单元格会完全丢失。

# iphone - 获取多行UILabel最后一行的宽度

> ID：11189600
> 
> 赞同：6
> 
> 时间：2012-06-25T12:42:27.707
> 
> 标签：iphone, objective-c, text, view, uilabel

我有一个动态多行 UILabel 并且需要知道可见文本（不是标签）的文本结尾（X 坐标），以便我可以在文本之后显示一些内容。这可能吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:09:44.980

据我所知，最好的解决方案是使用 UIWebView 而不是 UILabel。您只需格式化 HTML 以使其加载，然后添加您想要添加的任何内容。

例子：

```
[webView loadHTMLString:[NSString stringWithFormat:@"<html><body><font face=\"arial\" size=\"2\">%@</font><font face=\"arial\" size=\"1\"> %@</font></body></html>",text1 , text2] baseURL:nil]; 
```

如果您想继续尝试使用 UILabel / UITextView /any UIView ，我只知道一种正确计算高度的方法：[myView sizeToFit]; 然后得到它的框架。

希望这可以帮助。

问候，

乔治

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:47:11.813

您将能够使用 CoreText 框架更好地控制文本布局。[查看文档](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005533)：

还有一些不错的开源东西已经为你做了很多艰苦的工作，比如：[https ://github.com/Cocoanetics/DTCoreText](https://github.com/Cocoanetics/DTCoreText)

# delphi - 如何在数据库中许可用户数量？

> ID：11189602
> 
> 赞同：1
> 
> 时间：2012-06-25T12:42:32.260
> 
> 标签：delphi, licensing, interbase

给定一个 Delphi 和 Interbase 客户端-服务器应用程序，我想根据数据库中的用户数量来许可该应用程序。商业许可软件如何做到这一点？我看不到任何看起来会涵盖此内容的列表功能。每个用户最初都登录到数据库。该数据库似乎如此可用，以至于它对任何用户（或至少是管理员）都是开放的。我是否还必须编写一个 Delphi exe 或 dll 才能在服务器上运行 - 也许作为数据库中的一个函数 - 与许可相关联？不知道如何进行。顺便说一句，Interbase 许可同时用户，但我认为他们将其写入服务器，但我想要类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:49:01.563

要控制同时的客户端连接，您肯定需要一个服务器端应用程序。它可以是一个简单的 tcp/ip 套接字服务器作为服务（Linux 上的守护程序）或另一个（midas？）服务器层。

当您的客户端应用程序启动时，它会调用一个服务器方法，例如 Session.Connect，在这里您计算活动连接数并在达到最大限制的情况下返回 false（无代码）。当应用程序关闭时，您使用 Session.Disconnect 通知服务器。减少连接数。

在客户端应用程序和服务器服务（因为我很伤心）之间保持实时（永久）连接以处理应用程序挂起、不受控制的重新启动和处理此事件（例如服务器端的 OnSockedDisconnect）也是一个好主意，以减少连接数和处理断开属性，例如写入日志等...

当然，通信应该加密（握手），以避免不受欢迎的客人。您还可以玩 sim 读卡器等。

这种方法不会提供工业（核）级别的安全性，但如果编码正确，即使是专业黑客也需要一些时间才能破解它。

或者，您可以查看一些现成的保护工具，例如 SafeNet（HASP 保护）。

此外，Firebird（可能还有 Interbase）在 DB Connect / Disconnect 触发器上有，如果用户有权限，它可以读取连接计数。但是如果数据库存储在客户服务器上，这些可以很容易地更改。

# testing - 突出显示错误的列

> ID：11189605
> 
> 赞同：0
> 
> 时间：2012-06-25T12:42:37.563
> 
> 标签：testing, automation, fitnesse, dbfit, fit-framework

我正在使用 Fitnesse + dbFit 来验证一个数据库表中的数据。如果记录中至少有一列错误，则突出显示整条记录。您知道 Fitnesse 是否只能突出显示错误的列吗？

我的表有 100 多列，即使我得到了哪一行错误的信息，我也必须花费大量时间来寻找包含错误值的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:48:52.570

DbFit 的 fitSharp 版本突出显示错误的单元格。见[http://fitsharp.github.com/](http://fitsharp.github.com/)

# php - 向同一服务器发出 CURL 多个请求与单个请求一样慢

> ID：11189606
> 
> 赞同：0
> 
> 时间：2012-06-25T12:42:42.313
> 
> 标签：php, multiple-domains, curl-multi

我正在使用[一个很好的 Multi CURL 界面，称为 Rolling CURL](http://code.google.com/p/rolling-curl/)

[http://code.google.com/p/rolling-curl/issues/detail?id=20](http://code.google.com/p/rolling-curl/issues/detail?id=20)

它工作正常，例如它在大约 3 秒内从 20 个站点获取数据。问题是我需要它在同一服务器上的 200 - 300 个站点上工作。这与在循环中发出单个 CURL 请求所需的时间大致相同，大约为 10 分 47 秒。所以我有点不知道该怎么做。我需要做的就是获取每个站点上的 HTTP 代码。我试过 file_get_contents，PHP FTP 函数，它们要慢得多。

另一件事是，当我浏览同一服务器上的 12 个以上域的列表时，它似乎阻止了请求，所以我根本没有在任何站点上获取任何数据。当我运行少于 12 个的列表时，不会出现此问题。我只获取站点的标题数据，因此它不应该那么慢。

如果有人可以帮助我或详细解释为什么会发生这种情况，并提供有关如何克服这个问题的指示，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:52:00.540

听起来图书馆正在限制每个服务器的并发请求。看看你是否可以配置它。例如，这是在[源代码](http://code.google.com/searchframe#qNol_WelWFI/trunk/RollingCurl.php&q=server%20package:rolling-curl%5C.googlecode%5C.com)中，也是说明原因：

```
class RollingCurl {
    /**
     * @var int
     *
     * Window size is the max number of simultaneous connections allowed.
     *
     * REMEMBER TO RESPECT THE SERVERS:
     * Sending too many requests at one time can easily be perceived
     * as a DOS attack. Increase this window_size if you are making requests
     * to multiple servers or have permission from the receving server admins.
     */
     private $window_size = 5; 
```

这对您来说可能也很有趣：

*   [如何使用 PHP 检查远程文件是否存在？](https://stackoverflow.com/questions/981954/how-can-one-check-to-see-if-a-remote-file-exists-using-php)

要获取状态码，通常只需要一个 HEAD 请求，cUrl 支持。

# python - 为什么我不打印和图像

> ID：11189609
> 
> 赞同：0
> 
> 时间：2012-06-25T12:42:56.737
> 
> 标签：python, image, web-scraping, beautifulsoup

这是我的代码：

```
import urllib2
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read())

rows = soup.findAll("table", attrs = {'class': 'data borderTop'})[0].tbody.findAll("tr")[2:]

for row in rows:
    fields = row.findAll("td")
    if len(fields) >= 3:
        anchor = row.findAll("td")[1].find("a")
        if anchor:
            print anchor 
```

它没有打印出图像，而是为我提供了图像在页面源中的位置。有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:03:34.993

看起来您想要团队徽标缩略图？

```
import urllib2
import BeautifulSoup

url = 'http://www.cbssports.com/nba/draft/mock-draft'
txt = urllib2.urlopen(url).read()
bs = BeautifulSoup.BeautifulSoup(txt)

# get the main table
t = bs.findAll('table', attrs={'class': 'data borderTop'})[0]

# get the thumbnail urls
imgs = [im["src"] for im in t.findAll('img')] if "logos" in im["src"]] 
```

`imgs`现在看起来像

```
[[u'http://sports.cbsimg.net/images/nba/logos/30x30/NO.png',
 u'http://sports.cbsimg.net/images/nba/logos/30x30/CHA.png',
 u'http://sports.cbsimg.net/images/nba/logos/30x30/WAS.png',
 u'http://sports.cbsimg.net/images/nba/logos/30x30/CLE.png', 
```

等等。这些是每个徽标的文件位置，这是 HTML 实际包含的所有内容；如果你想要实际的图片，你必须单独获取每一张。

* * *

该列表包含对每个徽标的重复引用；删除重复项的最快方法是

```
imgs = list(set(imgs)) 
```

或者，该列表不包括每个团队；如果您有完整的团队名称缩写列表，则可以直接构建 logo-url 列表。

此外，查看该站点，每个 30x30 徽标都有一个相应的 90x90 徽标，您可能更喜欢它 - 更大更清晰。如果是这样，

```
imgs = [im.replace('30x30', '90x90') for im in imgs] 
```

`imgs`现在看起来像

```
[u'http://sports.cbsimg.net/images/nba/logos/90x90/BOS.png',
 u'http://sports.cbsimg.net/images/nba/logos/90x90/CHA.png',
 u'http://sports.cbsimg.net/images/nba/logos/90x90/CLE.png',
 u'http://sports.cbsimg.net/images/nba/logos/90x90/DAL.png', 
```

等等

* * *

现在，对于每个 url，我们下载图像并保存它：

```
import os

savedir = 'c:\\my documents\\logos'  # assumes this dir actually exists!
for im in imgs:
    fname = im.rsplit('/', 1)[1]
    fname = os.path.join(savedir, fname)
    with open(fname, 'wb') as outf:
        outf.write(urllib2.urlopen(im).read()) 
```

你有你的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:08:28.837

根据 BeautifulSoup 文档，soup.findAll 返回标签列表或 NavigableStrings。所以你必须使用特定的方法，比如 content()。

访问[http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)在“Navigating the Parse Tree”副标题中找到您在这种情况下需要的内容。

# javascript - JavaScript 按名称调用对象方法

> ID：11189612
> 
> 赞同：0
> 
> 时间：2012-06-25T12:43:02.503
> 
> 标签：javascript, object, methods

> **可能重复：**
> [javascript 对象，访问变量属性名称？](https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-name)

当某些事件发生时，我试图通过其名称调用对象的方法 - 这是我的代码：

```
var imageObject = {
    sendImage : function(obj) {
        "use strict";
        var thisId = obj.attr('id');
        var thisSubmit = obj.attr('data-submit');
        var thisCallback = obj.attr('data-callback');
        var thisUrl = $('#' + obj.attr('data-url')).text();
        new AjaxUpload(thisId, {
            action: thisUrl,
            name: 'thisfile',
            onSubmit: imageObject.thisSubmit,
            onComplete: imageObject.thisCallback
        });
    }
} 
```

我还想将参数传递给提交和回调方法。

目前没有任何反应，我确定我说的不对 - 谁能解释如何实现这一目标？

我还使用以下提交和完成：

```
onSubmit: function(file, extension) {
    imageObject.thisSubmit(file, extension);
},
onComplete: function(file, response) {
    imageObject.thisCallback(file, response);
} 
```

但我得到的是错误说：

```
imageObject.thisSubmit is not a function 
```

**属性仅存储对象中方法的名称（字符串） - 例如“uploadImage”。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:01:11.393

TJ 的答案几乎就在那里，除了（根据您问题中的新代码）您需要从`onSubmit`to复制参数`thisSubmit`，或使用`.apply()`为您复制它们。

下面的代码使用后一种方法，避免了一遍又一遍地复制函数签名：

```
new AjaxUpload(thisId, {
    action: thisUrl,
    name: 'thisfile',
    onSubmit: function() {
        imageObject[thisSubmit].apply(imageObject, arguments);
    },
    onComplete: function() {
        imageObject[thisCallback].apply(imageObject, arguments);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:46:16.103

如果我正确理解了您的问题，您需要使用方括号语法来访问属性：

```
new AjaxUpload(thisId, {
    action: thisUrl,
    name: 'thisfile',
    onSubmit: function () { //Anonymous function so you can pass arguments
        imageObject[thisSubmit]("myArg"); //Square brackets here
    },
    onComplete: imageObject[thisCallback] //Square brackets here (no arguments)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:52:33.660

我假设`thisSubmit`和`thisCallback`局部变量是存在于`imageObject`.

使用这些字符串中的名称调用这些方法，并传入参数，您使用括号语法和闭包的组合：

```
var imageObject = {
    sendImage : function(obj) {
        "use strict";
        var thisId = obj.attr('id');
        var thisSubmit = obj.attr('data-submit');
        var thisCallback = obj.attr('data-callback');
        var thisUrl = $('#' + obj.attr('data-url')).text();
        new AjaxUpload(thisId, {
            action: thisUrl,
            name: 'thisfile',
            onSubmit: function() {
                imageObject[thisSubmit](arg, anotherArg, etc);
            },
            onComplete: function() {
                imageObject[thisCallback](arg, anotherArg, etc);
            }
        });
    }
    // Presumably there are more methods here, or added later...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T12:53:48.890

你必须`call`在 js 中使用 which 调用函数

```
onSubmit: function(file, extension) {
    imageObject.thisSubmit.call(undefined, file,extension);
}, 
```

请参阅[call 和 apply 有什么区别？](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)

# paypal - Paypal - 我可以跳过信用卡付款的帐单地址和电话号码信息吗？

> ID：11189627
> 
> 赞同：0
> 
> 时间：2012-06-25T12:44:09.770
> 
> 标签：paypal, credit-card, billing

我正在将贝宝数字商品支付与我的网站集成。当用户进行直接支付时（以客人身份购买 - 信用卡支付），默认情况下，用户需要填写信用卡账单地址和电话号码，然后才能去信用卡号码，csc 填写。有没有办法跳过帐单地址信息或者贝宝信用卡付款需要它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:54:39.157

您可以对其进行设置，这样他们就不会被要求提供送货地址，但 PayPal 将始终要求他们提供账单地址和电话号码以进行自己的记录/信息验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:52:43.467

刚刚设置

```
noshipping=1 
```

或 2 取决于您在 api 调用期间的需要。

# android - 如何使用视频意图从资产或原始文件夹播放视频（.mp4）？

> ID：11189631
> 
> 赞同：0
> 
> 时间：2012-06-25T12:44:18.180
> 
> 标签：android, file, video, android-intent, mp4

如何从我的资产或原始文件夹中播放带有视频意图的 mp4 视频？

无论我尝试什么，我总是得到：

```
06-25 14:32:14.070: E/AndroidRuntime(3070): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=android.resource://mypackage/raw/myvideo } 
```

我试过了：

```
 Intent tostart = new Intent(Intent.ACTION_VIEW);

  String movieUrl = "file:///android_asset/myvideo.mp4";
  // String movieUrl = "android.resource://" + getPackageName() + "/raw/" + "myvideo.mp4";

   tostart.setDataAndType(Uri.parse(movieUrl), "video/*");
   startActivity(tostart); 
```

我只能在人们使用 SD 卡中的视频的地方找到答案，有什么选项可以让我使用 raw 或 assets 文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:49:49.220

```
AssetFileDescriptor afd;

  try {
         afd = getAssets().openFd("videofile/video.3gp");
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

这里**video.3gp**是文件夹下的文件 --- **videofile** -> 是资产文件夹下的一个文件夹

使用媒体播放器，您可以这样设置

```
mediaPlayer = new MediaPlayer();

 if(mediaPlayer.isPlaying()){
   mediaPlayer.reset();
  }

  mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
  mediaPlayer.setDisplay(surfaceHolder);

  try {
      mediaPlayer.setDataSource(afd.getFileDescriptor(), afd
                .getStartOffset(), afd.getLength());

   mediaPlayer.prepare();
  } catch (IllegalArgumentException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } catch (IllegalStateException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }

  mediaPlayer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:53:16.893

您可以使用以下方法从原始文件夹解析视频网址：

```
Uri.parse("android.resource://com.testvideo/" + R.raw.video); 
```

然后尝试：

# java - 具有空“rollbackFor”属性的方法回滚

> ID：11189636
> 
> 赞同：1
> 
> 时间：2012-06-25T12:44:48.613
> 
> 标签：java, spring, transactions, rollback, transactional

当一个带[`@Transactional`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html)注解的方法抛出异常，但没有在其中声明类时[`rollbackFor`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html#rollbackFor%28%29)，事务会回滚还是不回滚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:56:05.393

默认情况下，事务会因未检查的异常（和的子类`RuntimeException`）`Error`而回滚，而不会因已检查的异常而回滚。

可以通过`rollbackFor`和`noRollbackFor`属性自定义此行为。

**也可以看看：**

*   [10.5.3 回滚声明性事务](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-rolling-back)

# python - 如何使用 bash 脚本从不同目录运行代码

> ID：11189637
> 
> 赞同：0
> 
> 时间：2012-06-25T12:44:49.537
> 
> 标签：python, bash, shell

我一直将我的代码放在 github 上，但我遇到了实现障碍。我在许多计算机上运行相同的代码（包括我没有 root 访问权限的计算机）。

一段代码（一个 bash 脚本）调用一些 python 代码，例如：

```
python somecode.py 
```

shell 将运行正确版本的 python，但它不会找到 somecode.py。

我试过的：

失败#1：我尝试将包含 somecode.py 的目录和文件的完整路径都添加到 PATH；无济于事。[Errno 2] 没有这样的文件或目录

失败＃2：只有在顶行中添加正确版本的python的完整路径时，我才能使其适用于一台计算机：

```
#!/usr/local/cool/python/version/location 
```

但是，这会破坏它在任何其他计算机上的运行。

失败#3：如果我让 bash 脚本说，我也可以让它工作：

```
python /full/path/to/github/place/somecode.py 
```

但同样，这仅适用于一台计算机，因为不同计算机的路径不同。

**我真正想做的是**：我希望能够在多台计算机上使用相同的代码（bash 脚本和 somecode.py）。

欢迎任何有关如何正确执行此操作的建议。谢谢！

## 解决方案

添加：

```
#!/usr/bin/env python 
```

到我的 somecode.py 代码的顶部；

```
mv somecode.py somecode
chmod +x somecode 
```

确保 PATH 有 /full/path/to/directory/with/somecode。

Bash 脚本现在只说：

```
somecode 
```

它有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T12:47:20.387

对于问题 #2 尝试

```
#!/usr/bin/env python 
```

尽管它可能会在不同的机器上找到不同版本的 Python，但只要这不是问题，这应该可以解决该特定问题

也请参阅这个 SO question [Python deployment and /usr/bin/env portability](https://stackoverflow.com/questions/40705/python-deployment-and-usr-bin-env-portability)。[Alex Martelli](https://stackoverflow.com/a/2429517/1209279)的这篇文章重新使用了这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:00:06.783

如果你说`python somefile.py`那么它将把 的位置`somefile.py`作为当前目录，而不是从`$PATH`. 它将采用`python`from的位置`$PATH`。

如果你说`somefile.py`，那么它将获取`somefile.py`from的`$PATH`位置，以及你的 python 脚本行的位置，如果你遵循@Levon 的建议，它可以使用 PATH 。`python``#!`

# jsf-2 - h:graphicImage 值标签将空格解析为 +

> ID：11189644
> 
> 赞同：1
> 
> 时间：2012-06-25T12:45:17.050
> 
> 标签：jsf-2, el

我有一个包含空格的文件名：`bw3 - Copy_1340627264571.jpg` 我使用此名称加载图像，如下所示：

```
<h:graphicImage value="/#{myBean.imageFolder}/#{image.name}" width="30" height="30" style="border:0;"/> 
```

这被翻译成：

```
<img width="30" height="30" style="border:0;" src="/MyAPP/image/bw3+-+Copy_1340627264571.jpg"> 
```

而如果我尝试在 outputText 中打印名称，则打印正确：

```
<h:outputText  value="#{image.name}"/> 
```

这被翻译成：

```
<span id="myForm:viewImagesTable:0:_t68">bw3 - Copy_1340627264571.jpg</span> 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:46:42.673

这似乎是`<h:graphicImage>`. 请求 URI 中的空格应该是 URL 编码的`%20`using `java.net.URI`，请求查询字符串中的空格应该是 URL 编码的`+`using `java.net.URLEncoder`。似乎`<h:graphicImage>`使用`java.net.URLEncoder`.

最好事先自己更换它们：

```
<h:graphicImage value="/#{myBean.imageFolder}/#{image.name.replace(' ', '%20')}" /> 
```

或者，更好的是，文件名中根本不允许有空格。当它涉及上传的文件时，请在保存之前将它们替换为`_`或其他内容。

请注意，正如您的问题标记所建议的那样，这与 EL**无关。**

# jquery - asp.net gridview中的DatePicker不显示？

> ID：11189646
> 
> 赞同：0
> 
> 时间：2012-06-25T12:45:19.247
> 
> 标签：jquery, asp.net

我在更新面板中有一个 asp.net gridview。我拥有的字段之一是一个简单的文本框，如下所示：

`<asp:TextBox ID="txtDueDate" Text='<%# Eval("DueDate") %>' Width="75px" runat="server" ToolTip="Select the due date." CssClass="datePickerDueDate"></asp:TextBox>`

我希望在单击此文本框时出现 jquery ui datepicker，我尝试过：

```
 $(".datePickerDueDate").datepicker({
            }); 
```

在 chrome 开发人员工具中，此文本框的 id 显示为：`id="MainContent_gvLineItems_txtDueDate_0"` 处理此问题的最佳方法是什么？我当前的问题是日历没有出现，除非我打开开发人员工具并直接在控制台窗口中输入并按 Enter。

## 编辑

我可以用这个解决它：

`ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "setDueDate", "$(function(){$('.datePickerDueDate').datepicker('option' 'firstDay', 1);});", true);`

在后面的代码中，但这似乎很难看……有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:54:55.473

考虑到您在更新面板中有数据，当更新面板执行部分回发时，可能不会触发文档就绪事件。

我想你会导致你的 gridview 进入编辑模式，然后你的文本框就会出现。

[jQuery $(document).ready 和 UpdatePanels？](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)

该问题包含我以前使用过的解决方案。

但基本上这意味着您订阅更新面板 endrequest，然后将 .datepicker 重新绑定到文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:53:04.020

确保将 datepicker 函数绑定到文档上的元素`ready`

```
$(function(){
   $(".datePickerDueDate" ).datepicker();
}); 
```

由于您的 jQuery 选择器基于 Css 类名，因此您无需担心为输入元素生成的 ID。只要元素的类名是`datePickerDueDate`，它就可以工作

还要确保您已将 2 个库加载到您的页面。**jQuery**和**jQuery 用户界面**

# java - 砍掉未使用的字节数据类型

> ID：11189648
> 
> 赞同：1
> 
> 时间：2012-06-25T12:45:36.753
> 
> 标签：java, string, byte

我正在使用 DatagramSocket 和 DatagramPacket 在 java 中开发一个聊天应用程序。接收到的数据包是以字节为单位的。但我不知道如何切掉未使用的字节这是代码：-

```
String s,pack[];

byte[] data=new byte[100];

data=dp.getData();//dp is instance of DatagramPacket

s=new String(data)

pack=s.split("-");//Username-ConnectionProtocol-IPaddress 
```

在此代码中，最后一次拆分获取 IP 地址以及几乎以字节为单位的未使用数据。所以我需要一个解决方案来以字节为单位切断未使用的数据。像 127.0.0.1[][][][][][][][][].....

我尝试使用 Pack 来切割字符串，`subtstring()`但它的长度会有所不同。所以我需要一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:54:28.663

*   您不需要使用 初始化数据`new byte[100]`，因为`dp.getData()`会丢弃您分配的 100 个字节。
*   如果发送方写入的数据多于必要的数据，则无法知道应该截断多少字节。发件人应该指出他发送了多少字节，或者你应该想出一个启发式方法，让你从有用的字节中分辨出无用的字节。

例如，如果你知道未使用的字节总是在数据包的末尾，并且它们总是设置为零，你可以使用这段代码来设置你的字符串：

```
data=dp.getData();
int pos = data.length-1;
while (pos != 0 && data[pos] == 0) {
    pos--;
}
s=new String(data, 0, pos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:56:18.873

假设数据包的未使用部分为零，您可以使用这种代码：

```
static String[] parsePacket(byte[] p) {
  return new String(p, 0, len(p)).split("-");
}
static int len(byte[] p) {
  for (int i = 0; i < p.length; i++) if (p[i] == 0) return i;
  return p.length;
} 
```

# security - 如何防止脚本在目录中运行？

> ID：11189649
> 
> 赞同：1
> 
> 时间：2012-06-25T12:45:50.553
> 
> 标签：security, .htaccess

我的网络根文件夹中有一个用于存储图像的文件目录，我想知道如何保护该文件夹。我阻止人们将脚本上传到该文件夹​​，我检查文件扩展名，如果它不是图像，那么它将不会保存到该文件夹​​。

但是伪造扩展很容易，如果有人设法将脚本上传到我的文件目录并从浏览器访问它会发生什么

所以我需要一种方法来防止脚本在该文件夹中运行并且只允许图像运行。

我知道 htaccess 可以做到这一点，但我不知道如何设置它。我的 .htaccess 文件是这样的：

```
AddHandler cgi-script .php .pl .py .jsp .asp .htm .shtml .sh .cgi
Options -ExecCGI
ForceType application/octet-stream
<FilesMatch "(?i)\.(gif|jpe?g|png)$">
  ForceType none
</FilesMatch>
Options All -Indexes 
```

但它不起作用，我在该文件夹中保存了一个 php 文件，然后尝试从浏览器访问它，我仍然可以访问它。你知道怎么做吗？或者，如果您对此有更安全的方法，请告诉我。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:06:16.610

我认为它不起作用，因为您只**添加**了一个额外的处理程序，而没有删除其他处理程序。

将另一个 .htaccess 文件放在要保护的文件夹中（而不是弄乱 match 指令）是最简单的方法，其中包含：

```
# Fix PHP, you should do matching commands for JSP and ASP, & html
RemoveType application/x-httpd-php php
# .... add the other remove-handler statements here .... #

# Optionally make these equivalent to text files.
# UPDATE: Taken this out as you dont want people to see PHP files at all
#AddType text/html php

# To disable cgi and server side includes & indexes
# You need to check the setup of Apache, some of the file types
# listed should already be handled as CGI (.pl, .py, .sh)
Options -ExecCGI -Includes -Indexes

# Completely block access to PHP files
<FilesMatch "\.(php|phps|html|htm|jsp|asp)$">
    Order allow,deny
    Deny from all
</Files>
# Add in any additional types to block 
```

这涵盖了 PHP 和 CGI​​，你应该为 JSP 和 ASP 做匹配的命令

更新：添加代码以完全阻止对 PHP 文件的访问 - 抱歉，最初认为您根本不希望它们执行。另请注意，我已经注释掉了将 PHP 文件转换为文本文件的行。

# plone - 创建一个 Plone 4 自定义 portlet 管理器

> ID：11189653
> 
> 赞同：2
> 
> 时间：2012-06-25T12:45:51.777
> 
> 标签：plone

我正在尝试按照[Plone.org](http://plone.org/documentation/manual/theme-reference/elements/portletmanager/practical/adding-portlet-managers)和[WebLion](https://weblion.psu.edu/trac/weblion/wiki/AddingNewPortletManager)的教程为我的主题页脚创建一个自定义 portlet 管理器。

我想要做的是在我的主题中添加一个 viewlet 管理器和一个应该作为 portlet 管理器运行的 viewlet。

当viewlet 的模板中有一个TAL 块时，我得到了一个`ContentProviderLookupError`应该作为我的portlet 管理器工作的viewlet。viewletmanager 和 viewlet 模板在页面上正确显示，据我所知，如果我省略了 TAL 块。

主题是使用[此处的 sane_plone_addon_template 完成的](https://github.com/miohtama/sane_plone_addon_template)

我真的看不出我在这里做错了什么，并且在 Plone 方面成为一个完整的菜鸟真的没有帮助，所以任何能推动我朝着正确方向前进的想法都会非常感激。

这是我的**configure.zcml**

```
<browser:viewletManager
         name="footerPortlets1"
         provides=".interfaces.IspFooterPortletsViewletManager"
         class="plone.app.viewletmanager.manager.OrderedViewletManager"
         layer=".interfaces.IThemeSpecific"
         permission="zope2.View"
    />

<browser:viewlet
        name="footerPortlets"
        manager=".interfaces.IspFooterPortletsViewletManager"
        template="templates/footerPortlets.pt"
        layer=".interfaces.IThemeSpecific"
        permission="zope2.View" 
    /> 
```

**配置文件/默认/中的**portlets.xml****

 **```
 <?xml version="1.0"?>
<portlets
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    i18n:domain="plone">

     <portletmanager 
       name="footerPortlets"
       type="mytheme.interfaces.IFooterPortlets"
     />

</portlets> 
```

**接口.py**

```
from plone.portlets.interfaces import IPortletManager
from plone.app.portlets.interfaces import IColumn

class IFooterPortlets(IPortletManager, IColumn):
     """""" 
```

这是 viewlet 模板**footerPortlets.pt**

```
<div id = "footer-portlets-container">
  test
  <tal:block replace="structure provider:footerPortlets" /> <!-- This part fails -->
</div> 
```

这是错误的堆栈跟踪：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.CMFCore.FSPageTemplate, line 237, in _exec
  Module Products.CMFCore.FSPageTemplate, line 177, in pt_render
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 888, in do_useMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 531, in do_optTag_tal
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 742, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 218, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: file:/home/user/Plone/zinstance/src/santasport/santasport/templates/plonetheme.sunburst.skins.sunburst_templates.main_template.pt
   - Line 181, Column 3
   - Expression: <StringExpr u'footerPortlets1'>
   - Names:
      {'container': <ATDocument at /Santasport/front-page>,
       'context': <ATDocument at /Santasport/front-page>,
       'default': <object object at 0xb77bc7d0>,
       'here': <ATDocument at /Santasport/front-page>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xb4a8e34c>,
       'request': <HTTPRequest, URL=http://127.0.0.1:8080/Santasport/front-page/document_view>,
       'root': <Application at >,
       'template': <FSPageTemplate at /Santasport/front-page/document_view>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'admin'>}
  Module zope.contentprovider.tales, line 80, in __call__
  Module plone.app.viewletmanager.manager, line 154, in render
  Module plone.app.viewletmanager.manager, line 85, in render
  Module zope.browserpage.simpleviewclass, line 44, in __call__
  Module Products.Five.browser.pagetemplatefile, line 125, in __call__
  Module Products.Five.browser.pagetemplatefile, line 59, in __call__
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 531, in do_optTag_tal
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 742, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 218, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: /home/user/Plone/zinstance/src/santasport/santasport/templates/footerPortlets.pt
   - Line 3, Column 1
   - Expression: <StringExpr u'footerportlets'>
   - Names:
      {'args': (),
       'container': <ATDocument at /my-theme/front-page>,
       'context': <ATDocument at /my-theme/front-page>,
       'default': <object object at 0xb77bc7d0>,
       'here': <ATDocument at /my-theme/front-page>,
       'loop': {},
       'nothing': None,
       'options': {},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xb4a7dcfc>,
       'request': <HTTPRequest, URL=http://127.0.0.1:8080/my-theme/front-page/document_view>,
       'root': <Application at >,
       'template': <Products.Five.browser.pagetemplatefile.ViewPageTemplateFile object at 0xb5e055ac>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'admin'>,
       'view': <Products.Five.viewlet.viewlet.SimpleViewletClass from /home/user/Plone/zinstance/src/my-theme/my-theme/templates/footerPortlets.pt object at 0xb4a3f52c>,
       'views': <Products.Five.browser.pagetemplatefile.ViewMapper object at 0xb5e2cdac>}
  Module zope.contentprovider.tales, line 66, in __call__
ContentProviderLookupError: footerPortlets 
```

编辑：

我通过将我的 viewlet 添加到 viewlets.xml 并将其添加到我的配置文件文件夹中（正如其中一个教程所说的 FML），使这段代码工作了一些，但我并没有真正对其进行进一步测试，而是查看了 Mikko 的教程开箱即用地为我工作非常好。

Ps：任何想法如何标记这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:58:30.693

您需要导入`portlets.xml`配置。

最直接的方法是通过`portal_setup`ZMI 中的工具。在“导入”选项卡（在“选择配置文件”或“快照”选择框中）找到您的产品名称，然后当页面重新加载时（显示“用于“您的产品配置文件名称”的可用导入步骤”），您需要查找 Portlet在列表中导入步骤（“*导入 portlet 管理器、类型、分配和黑名单*”），勾选它的框，然后点击底部的“导入所选步骤”按钮。

WebLion 教程对此有点模糊地记录为“配置现已完成。卸载您的主题，重新启动 Zope 并重新安装您的主题。”。Plone.org 文档似乎完全省略了它。**

# android - 没有出现动态壁纸的设置按钮

> ID：11189655
> 
> 赞同：0
> 
> 时间：2012-06-25T12:46:07.137
> 
> 标签：android, android-preferences, live-wallpaper

我为我的幻灯片动态壁纸创建了一个首选项文件。
大部分来源都是从几个样本中复制而来的。我认为我正确地复制了它们，并且 Eclipse 没有显示我的源代码的警告或错误。
我的问题是当我选择动态壁纸时没有出现“设置”按钮。

我检查了非常接近的问题[“无法获取设置按钮以显示动态壁纸”](https://stackoverflow.com/questions/5188742/cant-get-settings-button-to-display-for-live-wallpaper)，但它并没有解决我的问题。

我怀疑我的清单或偏好来源有问题，但我找不到重点。

对不起，我的英语不好。

我的来源如下：

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest package="sample.slide_wallpaper"
    android:versionCode="1"
    android:versionName="1.0"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name">

        <!-- =========================================================== -->
        <!-- Launcher -->
        <activity android:name=".Launcher" android:label="@string/app_name"
            android:theme="@style/Theme.HalfTrans">
           <intent-filter>
               <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />
           </intent-filter>
        </activity>

        <!-- ==============================================================-->
        <!-- Live Wallpaper -->
        <service
            android:enabled="true"
            android:permission="android.permission.BIND_WALLPAPER"
            android:label="@string/app_name"
            android:name="SlideWallpaper"
            android:icon="@drawable/thumbnail">
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService"></action>
            </intent-filter>
            <meta-data
                android:name="android.service.wallpaper"
                android:resource="@xml/wallpaper">
            </meta-data>
        </service>

        <!-- ================================================================= -->
        <!-- Preferences -->
        <activity
            android:name="sample.slide_wallpaper.Prefs"
            android:label="@string/wallpaper_settings"
            android:theme="@android:style/Theme.WallpaperSettings"
            android:exported="true">
            <intent-filter>
                <category android:name="android.intent.category.PREFERENCE" />
             </intent-filter>
        </activity>
    </application>
</manifest> 
```

**设置.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <PreferenceScreen
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:title="@string/wallpaper_settings"
            >
         <ListPreference
              android:key="timer_key"
              android:title="@string/list_title"
              android:summary="@string/list_summary"
              android:entries="@array/timer_pref"
              android:entryValues="@array/timer_pref_values"
              android:defaultValue="5000"
              />
    </PreferenceScreen>

**wallpaper.xml**

    <?xml version="1.0" encoding="utf-8" ?>
    <wallpaper xmlns:android="http://shemas.android.com/apk/res/android"
        android:thumbnail="@drawable/thumbnail"
        android:description="@string/description"
        android:settingsActivity="sample.slidewallpaper.Prefs"
        />

**Prefs.java**

    package sample.slide_wallpaper;

    import sample.slide_wallpaper.R;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.preference.PreferenceActivity;
    import android.util.Log;

    public class Prefs extends PreferenceActivity 
    implements  SharedPreferences.OnSharedPreferenceChangeListener {

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        Log.w("Prefs", "prefs onCreate");
        addPreferencesFromResource(R.xml.settings);
    }

    @Override
    protected void onDestroy()
    {           
        getPreferenceManager().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
        super.onDestroy();
    }

        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key)
        {
        }
    } 
```

**SlideWallpaper.java**

```
package sample.slide_wallpaper;
import java.util.Random;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Handler;
import android.service.wallpaper.WallpaperService;
import android.util.Log;
import android.view.Display;
import android.view.SurfaceHolder;
import android.view.WindowManager;
import android.content.SharedPreferences;
import android.content.res.Resources;

//WallpaperService
public class SlideWallpaper extends WallpaperService {
        // Path for Prefs
        public static final String SHARED_PREFS_NAME = "sample.slide_wallpaper.Prefs";

    @Override
    public void onCreate() {
        .....
        super.onCreate();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public WallpaperService.Engine onCreateEngine() {
        return new WallpaperEngine(getResources());
    }

    //*********************************************************
    //Wallpaper Engine
    //*********************************************************
    public class WallpaperEngine extends Engine 
    implements SharedPreferences.OnSharedPreferenceChangeListener {
        private final Handler handler=new Handler();

        SharedPreferences prefs;

        public Bitmap img;
        private Bitmap images[] = new Bitmap[5];
        private Bitmap eximg;

        private final Random randGen = new Random();

        private static final String TAG = "WallpaperEngine";

        //timer
        private long timer = 5000;//interval(sec)×1000
        private long startTime = 0;

        private int currentAlpha;
        private final Paint imagePaint;

        private final Runnable drawThread=new Runnable() {
            public void run() {
                Log.d(TAG,"runnable");
                drawFrame();
            }
        };

    public WallpaperEngine(Resources r) {

        prefs=SlideWallpaper.this.getSharedPreferences(SHARED_PREFS_NAME, 0);
        prefs.registerOnSharedPreferenceChangeListener(this);

        images[0]=BitmapFactory.decodeResource(r,R.drawable.imgA);
        images[1]=BitmapFactory.decodeResource(r,R.drawable.imgB);
        images[2]=BitmapFactory.decodeResource(r,R.drawable.imgC);
        images[3]=BitmapFactory.decodeResource(r,R.drawable.imgD);
        images[4]=BitmapFactory.decodeResource(r,R.drawable.imgE);

        eximg = BitmapFactory.decodeResource(r,R.drawable.bg1);
        img = eximg;

        imagePaint = new Paint();
        imagePaint.setAlpha(255);
        }

    //=============================
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key){
        Log.w(TAG, "onPreferenceChanged");//this Log doesn't show up
        String listString = prefs.getString("timer_key", "5000");
        int listInt = Integer.parseInt(listString);
        timer = listInt;
    }
    //=================================
    @Override
    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);
        Log.d(TAG, "onCreate");
        drawFrame();
    }

    //=====================================
    @Override
    public void onDestroy() {
        super.onDestroy();
        handler.removeCallbacks(fadeAnimate);
        handler.removeCallbacks(drawThread);
    }

    //==================================
    @Override
    public void onVisibilityChanged(boolean visible) {
        Log.d(TAG, "Visibility changed");
        if (visible) {
            if(nowTime() - startTime + 100 < timer){
                if (img.isRecycled()) {
                    img = eximg;
                }
                drawBitmap(img);
                handler.postDelayed(drawThread, timer - (nowTime() - startTime));
            }else {
                drawFrame();
            }
        } else {
            handler.removeCallbacks(fadeAnimate);
            handler.removeCallbacks(drawThread);
        }
    }

    //===================================================
    //draws bitmap
    private void drawBitmap(Bitmap b) {
    ............
    }

        //=========================
        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
        }

        //============================
        @Override
        public void onSurfaceChanged(SurfaceHolder holder,
            int format,int width,int height) {
            super.onSurfaceChanged(holder,format,width,height);
            drawFrame();
        }

        //==============================
        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            handler.removeCallbacks(fadeAnimate);
            handler.removeCallbacks(drawThread);
        }

        //=================================
        @Override
        public void onOffsetsChanged(float xOffset,float yOffset,
            float xStep,float yStep,int xPixels,int yPixels) {
            drawBitmap(img);
        }

    //=================================================
    //Changes image==================================
    protected void drawFrame() {
    .....
    }

    private final Runnable fadeAnimate = new Runnable() {
        public void run() {
          fadeTransition(img, currentAlpha);
        }
    };

    private void fadeTransition(Bitmap b, int alpha) {
        .....
    }//END fadeTransition

    private long nowTime() {
        return System.nanoTime() / 1000000;
    }

}//Engine
}//END 
```

我真的需要你的帮助！！

此外，缩略图图像不会显示在动态壁纸列表中。但这是一个小问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:53:00.120

您的 wallpaper.xml 有一个小错误。包名不正确。它应该是：

```
<?xml version="1.0" encoding="utf-8" ?>
<wallpaper xmlns:android="http://schemas.android.com/apk/res/android"
    android:thumbnail="@drawable/thumbnail"
    android:description="@string/description"
    android:settingsActivity="sample.slide_wallpaper.Prefs"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:18:46.500

我自己解决了这个问题。感谢 Rajesh，我重写了“wallpaper.xml”的整个代码，它工作正常。实际上，我找不到区别，但我的修订版是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>
<wallpaper
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:thumbnail="@drawable/thumbnail"
    android:description="@string/description"
    android:settingsActivity="sample.slide_wallpaper.Prefs"
/> 
```

通过修改源，缩略图错误也显示出来了！

# javascript - KnockoutJS - 选择与 optgroup 和 javascript 对象的绑定值

> ID：11189660
> 
> 赞同：30
> 
> 时间：2012-06-25T12:46:24.753
> 
> 标签：javascript, jquery, knockout.js

我在[这里](http://jsfiddle.net/HPhmB/3/)找到了一个使用 KnockoutJS 创建包含 optgroup 的选择列表的示例。这很好用，但我想将下拉列表的值绑定到我自己的 javascript 对象，然后访问该对象的特定属性：

```
<select data-bind="foreach: groups, value:selectedOption">
    <optgroup data-bind="attr: {label: label}, foreach: children">
        <option data-bind="text: label"></option>
    </optgroup>
</select> 
```

```
function Group(label, children) {
    this.label = ko.observable(label);
    this.children = ko.observableArray(children);
}

function Option(label, property) {
    this.label = ko.observable(label);
    this.someOtherProperty = ko.observable(property);
}

var viewModel = {
    groups: ko.observableArray([
        new Group("Group 1", [
            new Option("Option 1", "A"),
            new Option("Option 2", "B"),
            new Option("Option 3", "C")
        ]),
        new Group("Group 2", [
            new Option("Option 4", "D"),
            new Option("Option 5", "E"),
            new Option("Option 6", "F")
        ])
    ]),
    selectedOption: ko.observable(),
    specialProperty: ko.computed(function(){
       this.selectedOption().someOtherProperty();
    })
};

ko.applyBindings(viewModel); 
```

​</p>

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-25T13:17:51.323

对于这种情况，一个不错的选择是创建一个快速自定义绑定，让您的“手工制作”选项的行为方式与`options`绑定创建的选项相同（将对象作为元数据附加）。绑定可能看起来像：

```
ko.bindingHandlers.option = {
    update: function(element, valueAccessor) {
       var value = ko.utils.unwrapObservable(valueAccessor());
       ko.selectExtensions.writeValue(element, value);   
    }        
}; 
```

你会像这样使用它：

```
<select data-bind="foreach: groups, value: selectedOption">
    <optgroup data-bind="attr: {label: label}, foreach: children">
        <option data-bind="text: label, option: $data"></option>
    </optgroup>
</select> 
```

示例：http: [//jsfiddle.net/rniemeyer/aCS7D/](http://jsfiddle.net/rniemeyer/aCS7D/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-22T18:53:02.680

此版本带有标题，如果您想选择父项：

```
<select data-bind="value: selectedOption ">
    <option data-bind="value:'', text:'Select'"></option>
    <!-- ko foreach: groups -->
        <optgroup data-bind="attr:{label: label}">
            <option data-bind="value: $data, text:label"></option>
            <!-- ko foreach: children -->
                <option data-bind="value: $data, text:label"></option>
            <!-- /ko -->
        </optgroup>
    <!-- /ko -->
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T15:05:17.970

如果您想完全控制标题、组和选项并使其与 select 元素上的值绑定一起工作，您必须确保在绑定 select 的值绑定之前绑定所有选项。否则，一旦添加了标题选项，值绑定将清空 selectedOption 可观察对象。

例如，您可以添加一个自定义`valueAfterChildren`绑定，它包装值绑定并确保[首先绑定子项](https://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html)。请看下面的示例，在应用绑定之前，它在稍微简化的视图模型上预先选择了“选项 5”：

```
ko.bindingHandlers['valueAfterChildren'] = {
  init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
    ko.applyBindingsToDescendants(bindingContext, element);
    ko.bindingHandlers['value'].init(element, valueAccessor, allBindings, viewModel, bindingContext);
    return { controlsDescendantBindings: true };
  },
  value: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
    ko.bindingHandlers['value'].update(element, valueAccessor, allBindings, viewModel, bindingContext);
  }
}

var viewModel = {
  groups: [
    {
      label: "Group 1",
      children: [{ label: "Option 1" }, { label: "Option 2" }, { label: "Option 3" }]
    }, {
      label: "Group 2",
      children: [{ label: "Option 4" }, { label: "Option 5" }, { label: "Option 6" }]
    }
  ],
  selectedOption: ko.observable()
};

viewModel.selectedOption.subscribe(function(newVal) {
  console.log(`selected ${!!newVal ? newVal.label : 'empty option'}`);
});
viewModel.selectedOption(viewModel.groups[1].children[1]);
ko.applyBindings(viewModel);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
<select data-bind="valueAfterChildren: selectedOption">
  <option value="">Select</option>
  <!-- ko foreach: groups -->
  <optgroup data-bind="attr: {label: label}, foreach: children">
    <option data-bind="value: $data, text: label"></option>
  </optgroup>
  <!-- /ko -->
</select>
```

# c++ - 警告 C4251：需要类的客户端使用 dll 接口

> ID：11189662
> 
> 赞同：6
> 
> 时间：2012-06-25T12:46:35.590
> 
> 标签：c++

> **可能重复：**
> [std::vector 需要有 dll 接口才能被类 'X<T> 警告的客户端使用](https://stackoverflow.com/questions/4145605/stdvector-needs-to-have-dll-interface-to-be-used-by-clients-of-class-xt-war)

这是我在这个小组的第一篇文章。

我正在创建一个 DLL 并在应用程序的主文件中调用它。代码编译正常，但出现以下错误：

```
 warning C4251: 'PNCBaseClass::m_vAvailChannelsFromRx' : class 'std::vector<_Ty>' needs to have dll-interface to be used by clients of class 'PNCBaseClass'
3>          with
3>          [
3>              _Ty=int
3>          ] 
```

我的代码如下：

```
#define TEST_API __declspec(dllexport)
class TEST_API PNCBaseClass
{
public:
vector<int> m_vAvailChannelsFromRx
}; 
```

我一直在寻找解决方案并尝试过但失败了。

我不想禁用警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T12:51:01.810

永远不要将 STL 容器作为导出的类成员。客户端应用程序可能使用与您的不同的 STL 版本进行编译，具有未定义的运行时行为。在您的情况下，用指针 vector<int>* 替换 vector<int> 成员很容易。在类构造函数中初始化，在类析构函数中释放。

# xml - 将元素附加为 Anti-XML 元素的子元素

> ID：11189666
> 
> 赞同：6
> 
> 时间：2012-06-25T12:46:43.763
> 
> 标签：xml, scala, anti-xml

假设我有一个存储为 Anti-XML 的 XML 文档`Elem`：

```
val root : Elem =
    <foo attr="val">
        <bar/>
    </foo> 
```

. 我想`<baz>blahblahblah</baz>`作为一个孩子附加到根元素，给

```
val modified_root : Elem =
    <foo attr="val">
        <bar/>
        <baz>blahblahblah</baz>
    </foo> 
```

相比之下，在 Python 中，您只需`root.append(foo)`.

我知道我可以将（作为兄弟）附加到`Group[Node]`using `:+`，但这不是我想要的：

```
<foo attr="val">
    <bar/>
</foo>
<baz>blahblahblah</baz> 
```

我如何将它附加为的最后一个孩子`<foo>`？查看[文档](http://www.danielspiewak.com/anti-xml/v0.3/doc/#com.codecommit.antixml.package)，我看不到明显的方法。

* * *

类似于[Scala XML Building:Adding children to existing Nodes](https://stackoverflow.com/questions/2199040/scala-xml-building-adding-children-to-existing-nodes)，除了这个问题是针对 Anti-XML 而不是`scala.xml`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T13:08:38.403

`Elem`是一个[案例类](http://www.scala-lang.org/node/107)，所以你可以使用`copy`：

```
import com.codecommit.antixml._

val root: Elem = <foo attr="val"><bar/></foo>.convert
val child: Elem = <baz>blahblahblah</baz>.convert

val modified: Elem = root.copy(children = root.children :+ child) 
```

该`copy`方法是[为案例类自动生成的](http://www.artima.com/scalazine/articles/named_and_default_parameters_in_scala.html)，它采用命名参数，允许您更改原始实例的任何单个字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:31:54.403

虽然还不相关，但在 Anti-XML repo 中有一个方法`addChild/ren`。它的实现当前包含一个错误，但有一个未完成的拉取请求来修复它。所以你可能应该在未来的版本中使用它。`Elem``master`

（本来会发表评论的，但我还不允许这样做。）

# javascript - 如何使第二个弹出窗口出现？

> ID：11189669
> 
> 赞同：0
> 
> 时间：2012-06-25T12:46:55.373
> 
> 标签：javascript, button, html, popup

我从我的问题 [http://jsfiddle.net/bYMGZ/7/](http://jsfiddle.net/bYMGZ/7/)中做了一个小提琴， 第一个弹出窗口显示从按下第一个按钮，但第二个弹出窗口不显示。你能帮我找出错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:54:43.363

在 chrome 开发人员工具中，我看到 sokF div 在 popupSokNamn div 内。您可能忘记在某处关闭其中一个标签。

# extjs - Sencha 列表中的内联编辑

> ID：11189680
> 
> 赞同：0
> 
> 时间：2012-06-25T12:47:45.713
> 
> 标签：extjs, sencha-touch-2

我想在单击按钮时执行内联编辑，然后激活标题的文本字段和持续时间的数字字段。我是 Sencha 的新手，如何实现。

```
{
            xtype: 'list',
            store: "Plays",
            itemId:"playsList",

            mode: 'MULTI',
            loadingText: "Loading PlaysList...",
            emptyText: '<div class="notes-list-empty-text">No PlayList found.</div>',
            itemTpl: '<div class="list"><div class="list-item-title">{title}</div><div class="list-item-narrative">{duration}</div><div class="list-item-hide">{hidden}</div></div>',      
            grouped: true,

        },
     {
                xtype: "button",
                iconCls: "inlineedit",
                iconMask: true,
                itemId: "inlineediting"
        }, 
```

因此，当我单击按钮时，它会在标题文本字段和持续时间数字字段的列表中激活或具有编辑功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:36:25.040

我的猜测是做这样的事情：

**为您的模型添加一个`editing`字段**

```
fields: [
    ... // Other fields
    {name:"editing", type:"boolean", defaultValue: false}, 
] 
```

**使用这种模板**

```
itemTpl: new Ext.XTemplate(
    '<tpl if="editing == false">',
        '<input type="text" name="title" value="{title}" disabled/>',
    '<tpl else>',
        '<input type="text" name="title" value="{title}"/>',
    '</tpl>'
) 
```

然后，当您单击按钮时，您需要按照以下步骤操作：

*   获取您的商店
*   循环遍历商店的所有记录
*   对于每条记录，将`editing`值设置为 true

然后模板将重新渲染并且输入将是可编辑的。

当然，您需要对 CSS 进行处理以向用户隐藏它是一个输入。

最后，当编辑完成时（我想你会有某种“完成”按钮），你需要浏览列表中的所有项目并用它们的新值更新商店。

我没有尝试过，但我过去做过类似的事情。

希望这可以帮助

# facebook - 没有访问令牌 facebook 应用程序身份验证

> ID：11189682
> 
> 赞同：0
> 
> 时间：2012-06-25T12:47:46.800
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我想在我的网站上显示我的 Facebook 墙贴。所以我不想通过对话框对用户进行身份验证，为了授予他们一些权限，我只想向他展示我的评论墙（无法添加评论只是只读访问权限）。

据我所知，现在没有未过期的令牌，所以是否可以只访问我的数据而无需在每次令牌过期时都请求令牌？

我正在使用 asp.net mvc，但我认为这种解决方案根本不依赖于平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:30:09.950

你应该：

1.  公开您的 Facebook 帖子
2.  使用您的有效应用程序调用 API 端点：[https](https://graph.facebook.com/) : //graph.facebook.com/ {your_id}/feed?access_token={app_access_token}`user_id``access_token`
3.  在您的网站上显示结果。

应用程序访问令牌不会过期，因此您不会有问题。只要帖子是公开的，API 就可以获取它们。理论上，您的帖子无论如何都应该是公开的，以便匿名用户可以看到。

这也使您能够私下分享内容，而不会出现在您的网站上。

# java - Android 解析 ArrayList

> ID：11189683
> 
> 赞同：0
> 
> 时间：2012-06-25T12:47:49.803
> 
> 标签：java, android, arraylist, hashmap

我有以下 ArrayList

```
ArrayList<HashMap<String, String>> list;
HashMap<String, String> map; 
```

里面有以下值：

```
list[0] = map.put("key_0", value_0);
list[1] = map.put("key_1", value_1);
list[2] = map.put("key_2", value_2); 
```

我想解析`list`数组并获取特定位置的键值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:53:26.753

`get()`您可以通过使用方法从 ArrayList> 获取特定映射。例如，

```
map = list.get(index); 
```

要获取该地图的密钥，您可以执行以下操作：

```
String key = map.get("key"); 
```

仅供参考，这是可行的解决方案，我不知道您为什么使用 key_0、key_1、key_2 等密钥名称。

# sql-server-2005 - 请更正我的查询

> ID：11189687
> 
> 赞同：0
> 
> 时间：2012-06-25T12:48:05.133
> 
> 标签：sql-server-2005

```
Select empno,sum(cast(substring(othours,0,3)as float)) as
Hour,sum(cast(substring(othours,4,5)as float)) as Minutes from tmstrans 
group by empno,othours 
```

它显示如下数据

*   1 , 10
*   1 , 30
*   2 , 10
*   2 , 30

我需要如下数据

*   1 , 40
*   2 , 40

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:58:08.620

假设您想要`SUM`Hour 和 Minutes 列，您必须从子句中删除该`othours`列。`GROUP BY`像这样测试它：

```
SELECT empno,
       SUM(CAST(SUBSTRING(othours,0,3) AS float)) AS Hour,
       SUM(CAST(SUBSTRING(othours,4,5) AS float)) AS Minutes
FROM tmstrans 
GROUP BY empno 
```

# c# - LINQ to SQL：当“UpdateCheck = Never”时更新而不刷新

> ID：11189688
> 
> 赞同：3
> 
> 时间：2012-06-25T12:48:11.140
> 
> 标签：c#, .net, linq, linq-to-sql

我有一个帐户实体，除了一个字段外，它在“UpdateCheck = Never”中具有所有字段。“ModifiedTime”字段使用“UpdateCheck=Always”。目的是 - 并发检查应仅基于“ModifiedTime”列。

出于测试目的，我提供了用 C# 代码硬编码的“ModifiedTime”值。所以不需要从数据库中获取任何值来实现并发。只有当我调用 Refresh 方法时，代码才会更新数据库。这似乎很奇怪。有什么方法可以避免这种情况？

[请参阅：http: //msdn.microsoft.com/en-us/library/bb386929.aspx](http://msdn.microsoft.com/en-us/library/bb386929.aspx)中的“更新而不查询”部分

注意：我试图通过不使用 Refresh 来避免 SELECT 语句

生成的 SQL

```
 SELECT [t0].[AccountNumber], [t0].[AccountType], [t0].[Duration], [t0].[DepositedAmount], [t0].[Prefernce], [t0].[Comment], [t0].[ModifiedTime]
 FROM [dbo].[Account] AS [t0]
 WHERE [t0].[AccountNumber] = @p0

-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

更新查询

```
UPDATE [dbo].[Account]
SET [AccountType] = @p2, [Duration] = @p3
WHERE ([AccountNumber] = @p0) 
AND ([ModifiedTime] = @p1)

-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [6/25/2012 5:08:32 PM]
-- @p2: Input NChar (Size = 10; Prec = 0; Scale = 0) [SUCESS]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

表结构

```
CREATE TABLE [dbo].[Account](
[AccountNumber] [int] NOT NULL,
[AccountType] [nchar](10) NOT NULL,
[Duration] [int] NOT NULL,
[DepositedAmount] [int] NULL,
[Prefernce] [int] NULL,
[Comment] [nvarchar](50) NULL,
[ModifiedTime] [datetime] NOT NULL,
 CONSTRAINT [PK_Account] PRIMARY KEY CLUSTERED 
(
[AccountNumber] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,   ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

C# 代码

```
 public virtual void UpdateChangesByAttach(T entity)
    {

        if (Context.GetTable<T>().GetOriginalEntityState(entity) == null)
        {
            //If it is not already attached
            Context.GetTable<T>().Attach(entity);
            Context.Refresh(System.Data.Linq.RefreshMode.KeepCurrentValues, entity);
        }

    }

    public void UpdateAccount()
    {
        //Used value from previous select
        DateTime previousDateTime = new DateTime(2012, 6, 25, 17, 8, 32, 677);

        RepositoryLayer.Account accEntity = new RepositoryLayer.Account();
        accEntity.AccountNumber = 1;

        accEntity.AccountType = "SUCESS";
        accEntity.ModifiedTime = previousDateTime;
        accEntity.Duration = 2;

        accountRepository.UpdateChangesByAttach(accEntity);
        accountRepository.SubmitChanges();

    } 
```

表数据

![在此处输入图像描述](../Images/7c9a09a89aad5d18e8c5675a4c113106.png)

阅读：

1.  [LINQ to SQL：如何在不检索整个实体的情况下更新唯一字段](https://stackoverflow.com/questions/3301811/linq-to-sql-how-to-update-the-only-field-without-retrieving-whole-entity?lq=1)

2.  [更新而不首先在 LINQ 2 SQL 中选择数据？](https://stackoverflow.com/questions/399379/update-without-first-selecting-data-in-linq-2-sql)

3.  [在 LINQ to SQL 中更新 SELECT](https://stackoverflow.com/questions/1996911/update-select-in-linq-to-sql)

4.  [linq to sql 更新多行](https://stackoverflow.com/questions/9385041/linq-to-sql-update-mulitple-rows)

5.  [LINQ to SQL 更新中的默认值（C# 变量）问题](https://stackoverflow.com/questions/11186813/default-values-of-c-sharp-variables-issue-in-linq-to-sql-update)

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:08:19.190

感谢@sgmoore。要更新的值在 Attach 方法之后设置。现在它正在工作。还有什么需要改进的吗？

生成的 SQL

```
UPDATE [dbo].[Account]
SET [AccountType] = @p2, [Duration] = @p3, [ModifiedTime] = @p4
WHERE ([AccountNumber] = @p0) 
      AND ([ModifiedTime] = @p1)

-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [6/25/2012 5:08:32 PM]
-- @p2: Input NChar (Size = 10; Prec = 0; Scale = 0) [NEXT]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [4]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [6/26/2012 10:29:19 AM]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

代码

```
 public void UpdateAccount()
    {
        //Used value from previous select
        DateTime previousDateTime = new DateTime(2012, 6, 25, 17, 8, 32, 677);

        RepositoryLayer.Account accEntity = new RepositoryLayer.Account();
        accEntity.AccountNumber = 1; //Primary Key
        accEntity.ModifiedTime = previousDateTime; //Concurrency column

        accountRepository.UpdateChangesByAttach(accEntity);

        //Values to be modified after Attach
        accEntity.AccountType = "NEXT";
        accEntity.ModifiedTime = DateTime.Now;
        accEntity.Duration = 4;

        accountRepository.SubmitChanges();

    }

    public virtual void UpdateChangesByAttach(T entity)
    {

        if (Context.GetTable<T>().GetOriginalEntityState(entity) == null)
        {
            //If it is not already attached
            Context.GetTable<T>().Attach(entity);
        }

    } 
```

# asp.net-mvc - Html.ValidationMessageFor 在 asp.net mvc 2 中不起作用

> ID：11189691
> 
> 赞同：1
> 
> 时间：2012-06-25T12:48:25.910
> 
> 标签：asp.net-mvc

这是我的 asp.net mvc 2 项目的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.DynamicData;
using System.Web.Security;
using System.Globalization;
using System.Web.Profile;

namespace EMS.Models
{
public class UserModels
{

    [Required(ErrorMessage = "*")]
    public string userName { get; set; }

    [Required(ErrorMessage = "*")]
    public string passWord { get; set; }
  }
} 
```

这是我的观点：

```
 <% Html.EnableClientValidation(); %>
    <% using (Html.BeginForm()) { %>

    <table>
            <tr>
                <td><label for="userlogin">User Login:</label></td>
                <td>
                    <%: Html.TextBoxFor(m => m.userName, new { id = "userName"})%> 
                    <%: Html.ValidationMessageFor(m => m.name)%>
                </td>
                <td><label for="password">Password:</label></td>
                <td>
                    <%: Html.PasswordFor(m => m.passWord, new { id = "password"})%> 
                    <%: Html.ValidationMessageFor(m => m.passWord)%>
                </td>
             </tr>
            <tr>
                <td colspan="4">
                    &nbsp; <input type="submit"  name="enter_infor" id="enter_infor" value="Enter Information"/>
                </td>
            </tr>
    </table> 
```

这是我的控制器：

```
 [HttpPost]
    public ActionResult UserMaintenance(FormCollection frm)
    {
        UserModels candidate = new UserModels
        {
            userName = frm["userName"].ToString(),
            passWord = frm["passWord"].ToString()
       };

       DBSEntities context = new DBSEntities();
       UserName user = new UserName();
       context.AddToUserNames(user);
       context.SaveChanges();
       return View();
    } 
```

问题：我想验证用户是否输入了用户名和密码文本框。但是我上面的所有代码，用户仍然可以在没有任何验证消息的情况下提交它。我将脚本包含在 Site.Master 中。谁能告诉我，我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:33:34.393

您应该`ModelState.IsValid`在控制器操作中使用，否则您设置的所有验证都是无用的。

```
public ActionResult UserMaintenance(UserName user)
{
   if(ModelState.IsValid) // save the user only if it is valid
   {
       DBSEntities context = new DBSEntities();
       context.AddToUserNames(user);
       context.SaveChanges();
       return RedirectToAction("Index") // redirect to some other action or whatevery you wish
   }

   return View(); // else return the same view this will show all the validation errors
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:23:15.713

一件事是您在 POST 期间没有检查模型状态，并且确实应该使用强类型控制器/操作和视图。即使您让 ClientValidation 正常工作，您仍然应该进行服务器端检查以确保没有绕过客户端内容。您可以将 POST 方法更改为以下

```
 [HttpPost]
        public ActionResult UserMaintenance(UserModels candidate)
        {
            //If the model is not valid, return the view with the posted values
            //Validation messages will appear where appropriate based on your 
            //View Model
            if(!modelState.isValid()){
               return View(candidate);
            }

            DBSEntities context = new DBSEntities();
            //Not sure what this code was doing, you were creating a variable
            //and then never setting the properties from the FormCollection on 
            //this new variable.  This seems to be the correct way below, but
            //whatever you need to do to get this POSTed info to your DB....
            context.AddToUserNames(candidate);
            context.SaveChanges();
            return View();
    } 
```

至于 ClientSideValidation 的东西，请仔细检查您是否包含正确的脚本和正确的顺序（您可以在您的问题中列出这些吗？）

# java - PHP - 记住从 mysql 中选择的下拉列表的值

> ID：11189692
> 
> 赞同：0
> 
> 时间：2012-06-25T12:48:28.430
> 
> 标签：java, php, mysql, session, cookies

我希望能够记住我的下拉列表的选定值。无论是来自 java、Session 还是 Cookie，并且在回发后都选择了它。任何帮助将非常感激。

下面是我的代码：

```
 <select name="Name" onChange="showSelected(this.value)">
                <?php 
                    $qRtu = "SELECT ID, Name From tblOption";
                    $result = mysql_query($qRtu);
                    while ($data=mysql_fetch_assoc($result)){
                ?>
                <option value ="<?php echo $data['ID'] ?>" ><?php echo $data['Name'] ?></option>
                <?php } ?>
            </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:53:46.410

您将需要放入 HTML 以允许表单控件选择单个选定的选项，类似于：

```
<?php while ($data=mysql_fetch_assoc($result)) { ?>
    <option value ="<?php echo $data['ID'] ?>" <?php if($data['ID'] == 'some value') 
        echo( 'selected = "selected"' ); ?> >
        <?php echo $data['Name'] ?>
    </option>
<?php } ?> 
```

这`'some_value'`是您需要从数据库、会话、cookie 或任何您计划从中获取选择框的默认值的地方获取的内容。

# vector - 将向量作为函数嵌套返回 Clojure

> ID：11189693
> 
> 赞同：1
> 
> 时间：2012-06-25T12:48:29.723
> 
> 标签：vector, clojure

当我将以下函数放入`leon repl`时，我得到 `java.lang.IllegalArgumentException: Wrong number of args (0) passed to: PersistentVector (NO_SOURCE_FILE:0)`

另一个答案建议将第一次调用`vector`放在匿名函数内部`#`，但随后会抛出两个`java.lang.Exception: Unmatched delimiter: )`我想返回嵌套向量，形式为`[ [maxLat, maxLong ] [minLat, minLong ] ]`如何做到这一点？

```
(defn bounding-box [lat lng dist] (
    (vector
    (vector (+ lat (to-degs (/ dist (p-radius dist)))) (+ lng (long-dist lat dist))) ;maxLat, maxLong
    (vector (- lat (to-degs (/ dist (p-radius dist)))) (- lng (long-dist lat dist))) ;minLat, minLong
  )
)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:58:43.817

更仔细地格式化您的代码！

您只需要在函数 args`[lat lng dist] (`和最后一个之后删除括号`)`

# java - 来自数据库的 Primefaces 树

> ID：11189697
> 
> 赞同：1
> 
> 时间：2012-06-25T12:48:34.090
> 
> 标签：java, tree, primefaces

我有以下实体类：

```
@Entity
@Table(name = "THE_TREE", catalog = "", schema = "dbo")
public class TheTree implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@Column(name = "ID", nullable = false)
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column(name = "NODE_NAME")
private String name;

@Column(name = "LEVEL")
private int level;

@OneToMany    
@JoinColumn(name="PARENTID")    
public List<TheTree > children = new LinkedList<TheTree >(); 
```

我想将其表示为 primefaces 树，但我无法正确处理。[primefaces](http://www.primefaces.org/showcase-labs/ui/treeAjax.jsf)网站中给出的示例具有预定义深度的静态节点，其中我需要具有未知深度的节点并从数据库中填充。我在这里看到了各种帖子，但对我来说什么都不清楚。在这篇[文章](https://stackoverflow.com/questions/6660458/how-to-create-a-dynamic-tree)中，作者似乎提出了同样的问题，但答案与问题无关。任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T14:24:41.663

您必须创建一个递归函数来制作树。我会这样做：

```
@ManagedBean
@ViewScoped
public class TreeMBean {

    private TreeNode rootNode;

     @PostConstruct
     public void init() {
         TheTree root = new TheTree(); // instead get root object from database 
         rootNode = newNodeWithChildren(root, null);
     }

     /**
      *  recursive function that returns a new node with its children
     */
     public TreeNode newNodeWithChildren(TheTree ttParent, TreeNode parent){
          TreeNode newNode= new DefaultTreeNode(ttParent, parent);
          for (TheTree tt : ttParent.getChildren()){
               TreeNode newNode2= newNodeWithChildren(tt, newNode);
          }
          return newNode;
     }

     public TreeNode getRootNode() {
         return rootNode;
     }

     public void setRootNode(TreeNode node) {
         rootNode = node;
     }

 } 
```

# python - 更改鼻子测试生成器创建的测试名称

> ID：11189699
> 
> 赞同：8
> 
> 时间：2012-06-25T12:48:44.333
> 
> 标签：python, unit-testing, generator, nose, nosetests

Nose 有一个[错误](http://code.google.com/p/python-nose/issues/detail?id=244)- 生成器创建的测试名称没有被缓存，所以错误看起来像是发生在最后一次测试中，而不是失败的实际测试。我按照错误报告讨论中的[解决方案解决](http://code.google.com/p/python-nose/issues/detail?id=244#c1)了这个问题，但它仅适用于标准输出上显示的名称，不适用于 XML 报告（--with-xunit）

```
from functools import partial, update_wrapper
def testGenerator():
    for i in range(10):
        func = partial(test)
        # make decorator with_setup() work again
        update_wrapper(func, test)
        func.description = "nice test name %s" % i
        yield func

def test():
    pass 
```

鼻子的输出与预期的一样，类似于

```
nice test name 0 ... ok
nice test name 1 ... ok
nice test name 2 ... ok
... 
```

但是 XML 中的测试名称只是“testGenerator”。

```
...<testcase classname="example" name="testGenerator" time="0.000" />... 
```

**如何更改此设置，以便个性化测试名称同时显示在标准输出和 XML 输出中？**

我正在使用鼻子测试版本 1.1.2 和 Python 2.6.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:54:47.060

您可以通过添加实现 describeTest[的插件](http://nose.readthedocs.org/en/latest/plugins/interface.html)来更改 Nose 命名测试的方式

```
from nose.plugins import Plugin
class CustomName(Plugin):
    "Change the printed description/name of the test."
    def describeTest(self, test):
         return "%s:%s" % (test.test.__module__, test.test.description) 
```

然后你必须[安装这个插件](https://nose.readthedocs.org/en/latest/plugins/writing.html#registering)，并在 Nose 调用中启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T08:24:17.053

您可以添加以下行。

`testGenerator.__name__ = "nice test name %s" % i`

例子：

```
from functools import partial, update_wrapper
def testGenerator():
    for i in range(10):
        func = partial(test)
        # make decorator with_setup() work again
        update_wrapper(func, test)
        func.description = "nice test name %s" % i
        testGenerator.__name__ = "nice test name %s" % i
        yield func

def test():
    pass 
```

这将产生您想要的名称。

```
<testsuite name="nosetests" tests="11" errors="0" failures="0" skip="0"><testcase classname="sample" name="nice test name 0" time="0.000" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T22:42:40.660

正如 Ananth 提到的，您可以使用它。

```
testGenerator.__name__ 
```

您也可以改用它

```
testGenerator.compat_func_name 
```

如果您的测试类有参数，我建议对它们进行柯里化，以及使用 with_setup 进行柯里化。使用 lambda 可以节省导入，我认为它更干净一些。例如，

```
from nose.tools import with_setup

def testGenerator():
    for i in range(10):
        func = with_setup(set_up, tear_down)(lambda: test(i))

        func.description = "nice test name %s" % i
        testGenerator.compat_func_name = func.description

        yield func

def test(i):
    pass

def set_up():
    pass

def tear_down():
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T17:18:24.403

如果使用鼻子和 Ecipe 的 PyUnit：

```
import nose

class Test(object):
    CURRENT_TEST_NAME = None

    def test_generator(self):
        def the_test(*args,**kwargs):
            pass

        for i in range(10):
            # Set test name
            Test.CURRENT_TEST_NAME = "TestGenerated_%i"%i
            the_test.description = Test.CURRENT_TEST_NAME

            # Yield generated test
            yield the_test,i

    # Set the name of each test generated
    test_generator.address = lambda arg=None:(__file__, Test, Test.CURRENT_TEST_NAME) 
```

这将使名称在 PyUnit 中也能很好地显示出来。

![生成的测试名称](../Images/fe34469213c5ce07811b1189138eb521.png)

# push-notification - 通过 GPRS/3G 推送通知。它们有多稳定？

> ID：11189700
> 
> 赞同：1
> 
> 时间：2012-06-25T12:48:59.207
> 
> 标签：push-notification, real-time, push, 3g, gprs

我现在为软件实时软件应用程序进行应用程序设计。

应用程序可能需要通知其移动用户系统中的某些事件。一个事件可以在用户第一次与系统交互后开始的 15 分钟时间范围内发生。事件通知应该以软实时完成：如果用户在 15-20 秒后通知他应该被通知，那么它是关键的。基本上，我需要在 15 分钟的时间范围内发生事件后不迟于 15-20 秒通知移动用户。

我计划使用某种[PUSH 技术](http://en.wikipedia.org/wiki/Push_technology)（XMPP/Jabber、具有[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)连接的本机应用程序或[PUSH 电子邮件](http://en.wikipedia.org/wiki/Push_email)）来做到这一点。

不幸的是，最明显的解决方案是拥有实时推送通知的移动网站（例如：[http](http://www.lightstreamer.com/) ://www.lightstreamer.com/）是不合适的，因为在这种情况下，用户将不得不盯着整个 15 分钟的时间范围内的屏幕。通过声音或振动通知用户将是一种更愉快的用户体验（通过智能手机连接到系统 -> 开始与系统交互 -> 将智能手机放回口袋或包中 -> 得到通知）。

我做了一个简单的实验，通过在我的笔记本电脑 (WiFi/100Mbit) 和我的 Android 智能手机 (GPRS/3G) 之间发送 Jabber 聊天消息。问题是某些发送到智能手机的消息迟到了（它们到达智能手机大约需要 1 分钟）或刚刚丢失（它们从未到达智能手机）。此外，我注意到智能手机上的 Jabber 客户端会定期离线几秒钟。我不知道是因为我有一个非常便宜的 Android 智能手机还是因为 3G 连接不是很好，但这种行为对于我设计的软件应用程序来说是不可接受的。

因此，我对以下内容感兴趣：

*   是否有任何技术标准可以*保证以**软实时*方式向移动 (GPRS/3G) 消费者推送消息？即保证不迟于从现在起 N 秒内通知移动客户端的技术标准；
*   您知道任何具有软*实时*推送通知的移动应用程序示例吗？
*   有哪些方法可以解决以软实时方式向移动设备传递/推送软实时消息的问题？（例如，继续发送相同的消息，直到移动设备确认收到消息）

*PS 该软件应用程序的预期用途适用于任何智能手机，无论是 iPhone、Android、WP 还是任何其他联网的智能手机。*

*注意：这个问题与我之前的[一个](https://stackoverflow.com/questions/10499388/real-time-two-side-push-communication-via-gprs)问题类似，但这个问题是关于一个完全不同的用例，重点关注软实时需求。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T12:38:24.510

我知道这个问题已有 3 年历史，但没有任何答案。

* * *

PUSH 通知始终是**Best Effort**。这意味着服务器会尽力交付它，但**不能保证**它会按时完成或是否会交付。
**永远不要**依赖推送通知来完成关键工作。

# javascript - 关于日期和 cookie 的奇怪问题

> ID：11189701
> 
> 赞同：2
> 
> 时间：2012-06-25T12:48:59.317
> 
> 标签：javascript

我写了这段代码：

```
var Ec = new Date ();
Ec.setTime(Ec.getTime() + (365 * 24 * 3600 * 1000));
var Ed = new Date ();
Ed.setTime(Ed.getTime() + (24 * 3600 * 1000));
document.cookie="visit=" + Ed.toGMTString() + ";expires=" + Ec.toGMTString();

var Ea = new Date ();
Ea.setTime(Ea.getTime() + (24 * 3600 * 1000));
alert(Ea.toGMTString()); 
```

在 cookie 中存储以下内容：

```
2012 年 6 月 26 日上午 8 点 46 分
```

并在警报中显示：

```
2012 年 6 月 26 日上午 12:46
```

而我国现在的时间是：

```
 06/25/2012 14:46 
```

为什么 ？我只想将当前时间 + 24 小时存储在 cookie 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:59:42.077

我假设您不在 GMT 时区。

当您执行 时`Ed.toGMTString()`，您会将您的时间转换为 GMT，这就是它与您的本地时间不同的原因。

`Ed.toLocaleTimeString()`或者`Ed.toISOString()`可能更接近标记。

# git - git reset ---hard 返回错误

> ID：11189702
> 
> 赞同：1
> 
> 时间：2012-06-25T12:49:02.390
> 
> 标签：git, git-reset

我是 git 新手。当我希望硬重置丢弃所有本地修改时，git返回合并冲突

> HEAD 现在位于 3291a25 将创建合并冲突 1

我的操作：

1.  大约半个月我承诺如下

    ```
    git commit -am "will create merge conflict 1" 
    ```

2.  今天我希望重置 --hard 到这个 ref

    ```
    yaoyangyong@ubuntulucky:~/repos01$ git reset --hard HEAD
    HEAD is now at 3291a25 will create merge confict 1 
    ```

3.  输出让我感到困惑。事实上，这只是我的旧评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:24:21.990

git 只是告诉你重置的结果。

HEAD（您当前的位置）现在位于 3291a25（您要重置的提交）“将创建合并冲突 1”（提交的消息）。

您应该传递一个要重置的提交，而不仅仅是说`HEAD`. 此外，如果您想中止半完成的合并，请使用`git merge --abort`（或`git reset --merge`在旧版本的 git 中）。

# mef - MEF 组合 .NET 4.0

> ID：11189703
> 
> 赞同：1
> 
> 时间：2012-06-25T12:49:06.783
> 
> 标签：mef

提前感谢你的帮助。我有以下导出的部分：

```
[Export (typeof(INewComponent))]  // orignally tried just [Export} here and importing NewComponent below
public class NewComponent : INewComponent  
{  
    // does stuff including an import  
} 
```

控制台测试程序导入以上内容：

```
public class Program   
{    

    [Import]  // have tried variations on importing "NewComponent NewComponent" etc  
    public INewComponent NewComponent
    {
        get;
        set;
    }

    public static void Main(string[] args)
    {
        var p = new Program();
        var catalog = new AssemblyCatalog(typeof(Program).Assembly);
        var container = new CompositionContainer(catalog);
        container.ComposeParts(p);
} 
```

组合因这些组合异常而失败（我删除了命名空间以保护有罪:)）：

> 1) 没有找到与约束匹配的有效导出 '((exportDefinition.ContractName == "INewComponent") AndAlso (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") AndAlso "INewComponent".Equals(exportDefinition.Metadata.get_Item("ExportTypeIdentity) "))))'，无效的导出可能已被拒绝。

如果我像这样在主程序中进行组合，则组合可以成功运行：

```
public class Program  
{      

    public static void Main(string[] args)
    {
        INewComponent newComponent = new NewComponent();

        var catalog = new AssemblyCatalog(typeof(Program).Assembly);
        var container = new CompositionContainer(catalog);
        container.ComposeParts(newComponent);
    }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:03:26.983

您的导出零件是否包含在同一个装配体中`Program`？如果它位于单独的 DLL 中，则还需要将该程序集包含在目录中，如下所示：

```
var aggregateCatalog = new AggregateCatalog();
aggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Program).Assembly));
aggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(NewComponent).Assembly));
var container = new CompositionContainer(aggregateCatalog);
// etc... 
```

如果这不起作用，那么有一个名为 Visual MEFx 的不错的开源工具可以帮助您分析您的目录。这是一篇关于设置的简短文章：

[Visual MEFx 入门](http://ihadthisideaonce.wordpress.com/2012/02/22/getting-started-with-visual-mefx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:21:06.603

在您的`NewComponent`课堂上，您写道：

```
// does stuff including an import 
```

如果该未显示的导入存在问题，则 MEF 将抱怨`Program.NewComponent`导入而不是实际的更深层次的原因。这被称为“稳定的组合”。[稳定的组合可能很有用](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CGQQFjAD&url=http://blogs.msdn.com/b/nblumhardt/archive/2009/07/17/light-up-or-mef-optional-exports.aspx&ei=EGToT4n4MoqY-wbThLixAw&usg=AFQjCNH3QAoiG-jLvYztozfLIrYNJHFa6w&sig2=-4TMsKQKklwVJANCuIsdKg)，但[它也会使失败组合的调试变得复杂](http://mindinthewater.blogspot.be/2011/05/problems-encountered-when-using-mef-as.html)。

您可以按照 MEF 文档中有关[诊断组合错误](http://mef.codeplex.com/wikipage?title=Debugging%20and%20Diagnostics&referringTitle=Guide)的说明来了解实际原因。

在一个小程序中，您还可以尝试调用`container.GetExportedValue<ISomeExport>()`一些导出，直到找到导致问题的导出。

# git - 使用 tortoise git 克隆存储库失败

> ID：11189707
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:49:19.113
> 
> 标签：git, tortoisegit

我右键单击空文件夹并选择`Git Clone...`，输入网址：（`https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=tree`这是我应该放的吗？）取消选中腻子键，然后得到这个：

```
git.exe clone   --progress -v  "https://git-wip-us.apache.org/repos/incubator-cordova-android" "C:\work\PhoneGapSrc\incubator-cordova-android"

Cloning into 'C:\work\PhoneGapSrc\incubator-cordova-android'...
fatal: https://git-wip-us.apache.org/repos/incubator-cordova-android/info/refs not found: did you run git update-server-info on the server?

git did not exit cleanly (exit code 128) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:54:28.327

网址错误，是[https://git-wip-us.apache.org/repos/asf/incubator-cordova-android.git](https://git-wip-us.apache.org/repos/asf/incubator-cordova-android.git)

# intellij-idea - 是否可以告诉 IntelliJ IDEA 在手表、变量、工具提示窗口中检查的对象上自动调用 toString()？

> ID：11189708
> 
> 赞同：21
> 
> 时间：2012-06-25T12:49:26.580
> 
> 标签：intellij-idea

在 Eclipse 中，当检查变量并且 Eclipse 能够显示其值时，它通过调用 toString() 来实现。

IntelliJ IDEA 不这样做。可以告诉吗？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-25T13:00:48.673

`Settings`| `Debugger`| `Data Views`：

![启用 toString()](../Images/06e59252669220f5a98fd53a3db1a95a.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-01T05:38:37.340

使用 IDEA 13.1：

首选项 -> 调试器 -> 数据类型渲染器

*   +(add) 新的渲染器，给它一个名字

*   在“渲染节点时”选择选项“使用以下表达式”，输入“toString()”。

这似乎给了我类似 Eclipse 的行为。

我会贴一张图片...但没有足够的积分。:P

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-05T21:57:23.800

默认情况下，Intellij Idea**会**在调试视图中显示对象的 toString()，除非您在上面 CrazyCoder 指向的对话框中明确告诉它不要这样做。

我发现的问题是，由于某些只有 JetBrains 的人才能理解的不正当原因，IntelliJ Idea（仍然是版本 13）会默默地忽略上述设置，并且**不会**在不覆盖的类上调用 toString() toString() 方法。即使将您的类添加到“列表中的类：”中也不会导致调用 toString()，除非您的类显式覆盖它。因此，IntelliJ Idea 似乎永远不会调用 Object 类的默认 toString() 方法。我想应该是对它过敏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-07T18:19:00.073

右键单击调试窗口中的变量，然后选择“查看文本”。它将打开一个显示“toString”的窗口

# asp.net - 将数据从 aspx 页面传递到 aspx 弹出窗口

> ID：11189710
> 
> 赞同：0
> 
> 时间：2012-06-25T12:49:32.480
> 
> 标签：asp.net

以下是我面临的场景，我有一个 aspx 页面，在其中添加了我的 ascx 用户控件，我还有一个`<a href`调用 js 函数来打开 aspx 弹出窗口的控件。

当我打开弹出窗口时，我需要将 ascx 控件中存在的数据发送到我的弹出窗口。你能指导我使用什么方法来实现这一点，而不是使用会话，因为数据可以在许多不同的地方更新，因此在会话中维护会很困难。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:02:20.593

```
如果您无法将数据作为查询字符串发送，可以尝试其他一些方法

1\. 尝试使用 target="_blank" 将表单发布到其他页面。
   如果需要，我们可以动态更改表单操作。
或者
2\. 利用弹出窗口中的 window.opener 对象从控件打开页面中读取数据。
  var variable1 = window.opener.getElementById("ControlId").value

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:32:41.683

您说您正在使用 js 函数打开 aspx 弹出窗口。

那么这很简单。

```
1.使用javascript从User控件的控件中读取数据
   var variable1 = document.getElementByID("ControlId").value;
   var variable2 = document.getElementByID("ControlId").value;

2\. 将此数据作为查询字符串传递到下一页
   window.open("http://www.w3schools.com?id=" + variable1 + "&name=" + variable2);
您可以从下一页的查询字符串中读取此数据

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:19:07.150

尝试使用这些语法（RegisterStartupScript + window.open）

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "newWindow", "window.open('Test.aspx?ID=" + _cId + "','_blank','status=1,toolbar=0,menubar=0,location=1,scrollbars=1,resizable=1,width=30,height=30);", false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-10T23:04:40.053

在 ascx 中创建一个隐藏变量。

```
<asp:HiddenField runat="server" ID="hdnId" /> 
```

在 ascx 的页面加载上设置要发送到隐藏变量的值

```
protected void Page_Load(object sender, EventArgs e){    
    hdnId.Value = <value to be sent to pop-up>;
} 
```

在后面的代码中注册一个 ajax 管理器。

```
protected override void OnInit(EventArgs e)
{
    RadAjaxManager.GetCurrent(this.Page).ClientEvents.OnRequestStart = "ajaxMngr_RequestStart;";

    base.OnInit(e);
} 
```

在 ajaxMngr_RequestStart() JS

```
 function ajaxMngr_SA_RequestStart(sender, args) {
            var oPatId = "<%=hdnSendPatId.Value %>";
            //add code to open the pop-up, add oPatId as part of the URL
        }
    } 
```

我使用 Telerik，它对管理弹出窗口有很大帮助。让我知道，如果这有帮助。

干杯!

# php - 会话名称中的变量

> ID：11189711
> 
> 赞同：1
> 
> 时间：2012-06-25T12:49:34.193
> 
> 标签：php, variables, session-variables

会话名称中是否可以包含变量？就像我有一个变量：`$id` 我想要这样的东西：

```
$_SESSION['number'$id] 
```

所以如果`$id=1`

```
$_SESSION['number1'] 
```

而如果`$id=65`

```
$_SESSION['number65'] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T12:51:42.757

是的 - 你可以这样做。

您所要做的就是**连接一个字符串值**作为`$_SESSION`数组中的索引。

```
$id= 42;
$result = $_SESSION['number'.$id]; 
```

现在`$result`将等于*索引*`$_SESSION`处的值； *`"number42"`*

 ** * *

任何关联数组也可以这样做。

```
$any_assoc_array = array('index42'=>'Hooray!');
$id= 42;
$result = $any_assoc_array['index'.$id];
echo $result; 
```

输出 ：

```
 Hooray! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:58:06.810

在 PHP 中，如果在双引号中，您可以将变量名放在字符串文字中，因此以下内容是完全合法的。请注意，该变量可以出现在字符串文字中的任何位置。

```
$result = $_SESSION["number$id"]; 
```*

# core-data - 核心数据 - 从 NSManagedObjectContext peformBlock 调用的共享代码：

> ID：11189713
> 
> 赞同：0
> 
> 时间：2012-06-25T12:49:38.437
> 
> 标签：core-data, concurrency, nsmanagedobject, nsmanagedobjectcontext

我正在使用`performBlock`我的`NSManagedObjectContexts`，以便我的更改发生在给定上下文的正确队列上。我的问题是 - 如果我要进行大量更改并从内部调用方法`performBlock`- 是否有一种简单的方法可以确保我使用来自正确上下文的对象。

例子：

我有一个`activeAccount`iVar（在 Main Queue 上创建），它是`NSMangedObject`应用程序中当前帐户的一个。我有一些使用`activeAccount`对象执行某些任务的实例方法——获取数据、设置数据。所以我的问题是，如果我在后台做某事`NSManagedObjectContext`并调用其中一种共享方法 - 是否有我可以使用的模式，以便在这些方法中我知道使用当前`activeAccount`iVar 或获取新的 iVar。另外，如果我需要做一些需要`NSManagedObjectContext`- 我怎么知道要获取/使用哪一个。

我知道`NSManagedObjectContext`使用哪个方法的一种方法是我有一个方法来检查它是否在当前线程上运行 - 然后它知道返回主线程的上下文或后台线程的上下文。另外，如果我在后台线程上，是否允许我读取位于`activeAccount`主线程上的对象 ID，以便我可以在后台线程上获取它的副本？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:39:57.167

我首先要问，你为什么要同时使用这么多上下文？

我使用一个用于后台操作，一个用于主线程。如果我需要为可丢弃的更改创建另一个，我将创建它并传递它，所以现在我的 self.managedObjectContext 指向草稿上下文。我永远不会让我的托管对象存在于他们可以访问大量上下文的范围内。

不完全清楚您是为 iOS 还是 OSX 编写，但以 iOS 为例：

如果我需要将一个新的视图控制器推送到导航堆栈中，我将初始化我的目标视图控制器的 managedObjectContext ivar 以及任何 NSManagedObject 子类实例。因为在 -prepareForSegue: 我知道我是要创建一个草稿上下文还是只传递我当前的上下文，我也知道我是否需要通过从新创建的上下文中通过它们的 ID 引用它们来初始化这些托管对象实例，或者我可以通过他们上。

现在在我的视图控制器中，我可以理所当然地认为我的托管对象总是绑定到 self.managedObjectContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:41:44.147

布莱恩，

线程限制可能是一个很难维护的提议。您需要维护的关键是在适当的 MOC 中使用对象。由于每个托管对象都维护到其主机 MOC 及其对象 ID 的链接，因此这很容易确保。例如：

```
NSManagedObjectContext *newMOC = NSManagedObjectContext.new;

newMOC.persistentStoreCoordinator = oldActiveAccount.managedObjectContext.persistentStoreCoordinator;

ActiveAccount *newActiveAccount = [newMOC objectWithID: oldActiveAccount.objectID]; 
```

现在，您从中访问的每个实例`newActiveAccount`都是在 中创建的`newMOC`，因此，线程仅限于该 MOC。`objectID`s是持久的。`-persistentStoreCoordinator`很少（如果有的话）在`mainMOC`. 因此，上面的代码被适当地限制了。如果源 MOC 是瞬态的，则上述技术存在问题。因此，我不能保证上述代码适用于两个背景 MOC。

安德鲁

# sql - 包含多个连接的 SQL 语句如何工作？

> ID：11189714
> 
> 赞同：3
> 
> 时间：2012-06-25T12:49:45.163
> 
> 标签：sql, database

我正在学习加入我的班级，但我并没有完全掌握一些概念。有人可以解释具有多个连接的语句是如何工作的吗？

```
SELECT B.TITLE, O.ORDER#, C.STATE FROM BOOKS B
   LEFT OUTER JOIN ORDERITEMS OI ON B.ISBN = OI.ISBN
   LEFT OUTER JOIN ORDERS O ON O.ORDER# = OI.ORDER#
   LEFT OUTER JOIN CUSTOMERS C ON C.CUSTOMER# = O.CUSTOMER#; 
```

我相信我理解BOOKS表是连接BOOKS和ORDERITEMS的第一个外连接中的左表。将显示所有书籍，即使没有书籍的 ORDERITEM。第一次加入后，我不确定到底发生了什么。

> ORDERS 连接时，哪个是左表，哪个是右表？对客户也是如此。这就是我迷路的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:08:41.537

executor 将执行的第一件事——获取第一对有资格连接的表并执行连接。在以下步骤中，先前连接的结果被视为*虚拟关系*，因此您再次拥有类似于 的构造`... FROM virt_tab LEFT JOIN real_tab ...`。这种行为基于[关系代数](http://en.wikipedia.org/wiki/Relational_algebra)中使用的[*闭包概念*](http://en.wikipedia.org/wiki/Closure_%28mathematics%29)，这意味着对关系的任何操作都会产生关系，即操作可以嵌套。RDBMS 代表*Relational* DBMS，请查看链接的 wikipedia 文章。

 *到目前为止，我发现 PostgreSQL 的文档在这个问题上是最权威的，[看看他们](http://www.postgresql.org/docs/current/interactive/explicit-joins.html)。在链接的文章中，通过一些 PostrgeSQL 特定的东西给出了关于数据库如何执行连接的一般概述，这是预期的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:54:31.593

我最喜欢的在线资源之一是： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

至于你的问题。

将显示所有书籍，并且仅显示与书籍匹配的那些订单项所有仅显示与书籍相关的订单项中具有相关记录的订单仅列出具有书籍表中项目的订单的客户。

因此，没有订单的客户不会被列出 有订单但不是书籍的客户不会被列出

好玩的东西。希望你喜欢它。

至于您的第二个问题：右/左仅因为您的 from 语句中表的 ORDER 才重要。如果您重新安排表格顺序，您可以使每个连接都成为左连接。所有右/左所做的就是指定您想要所有记录的表。

考虑一下：您可以轻松地纠正您的选择语句：

从客户中选择 B.TITLE、O.ORDER#、C.STATE C
RIGHT OUTER JOIN ORDERS O ON C.CUSTOMER# = O.CUSTOMER# RIGHT OUTER JOIN ORDERITEMS OI ON O.ORDER# = OI.ORDER# RIGHT OUTER JOIN BOOKS B ON B.ISBN = OI.ISBN

在这种情况下，权利是说我想要右边表格中的所有记录，因为书籍在列表中的最后一个，您将获得所有书籍，并且只有与书籍相关的那些订购项目，只有订购项目是的那些订单book 并且只有那些订购了书籍的订购物品的客户。因此，除了顺序之外，左/右是相同的。为了可读性，我避免右连接。我发现在考虑包含哪些内容和不包含哪些内容时，自上而下更容易。

那些被排除的记录在这些类型的连接中将具有 NULL 值。

希望这可以帮助。*

# git - 如何从项目中完全删除 git？

> ID：11189717
> 
> 赞同：0
> 
> 时间：2012-06-25T12:49:54.370
> 
> 标签：git, symfony

`.git`我使用从我的项目文件夹中删除该文件夹`$ rm -rf .git`，但是当我尝试运行命令`$ ./bin vendors install`（它是一个 symfony2 项目）时，我得到：

```
Installing/Updating symfony
M src/Symfony/Bridge/Twig/Resources/views/Form/form_table_layout.html.twig
"symfony" has local modifications. Please revert or commit/push them before running this command again. 
```

但我不能再提交了，因为`.git`现在不存在了。但即使我创建了另一个 Git 存储库然后提交，我总是得到相同的消息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:08:39.750

尝试恢复本地修改，如建议：

```
cd vendor/symfony
git checkout .
cd ../..
php bin/vendors install 
```

每个供应商应该有一个存储库，因此删除项目的存储库不会影响这些存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:25:59.750

也许有不止一个 git 存储库？尝试以下操作，看看项目中是否还有其他 git 存储库：

```
$ cd /your/project/root
$ find . -name .git 
```

还要检查环境变量 GIT_DIR。

# events - magento 事件监听器

> ID：11189720
> 
> 赞同：0
> 
> 时间：2012-06-25T12:50:14.393
> 
> 标签：events, magento-1.5, observers, discount, coupon

我不想将折扣券应用于已经打折的产品，即特价产品。所以我创建了一个事件监听：

```
<?xml version="1.0" ?>
<config>
<modules>
    <Tweett_Fashionn>
        <version>0.1.0</version>
    </Tweett_Fashionn>
</modules>
<global>
    <events>
        <salesrule_validator_process>
            <observers>
                <Tweett_Fashionn_Hook>
                    <type>singleton</type>
                    <class>Tweett_Fashionn_Model_Observer</class>
                    <method>specialpricediscount</method>
                </Tweett_Fashionn_Hook>
            </observers>
        </salesrule_validator_process>
    </events>
</global> 
```

和观察者文件为

```
<?php
 class Tweett_Fashionn_Model_Observer extends Varien_Event_Observer{
public function __construct(){
    echo "<p style='color:red'>Hello World .. </p>";
}
public function specialpricediscount($observer){
    $item=$observer['item'];
    $_product = Mage::getSingleton('catalog/product')->load($item->getProductId());           
    if($_product->getSpecialPrice()>0 ){
        $result = $observer['result'];
        $result->setDiscountAmount(0);                
    } 
   }
   }
 ?> 
```

但是当我点击应用优惠券按钮时它甚至不打印你好世界..plz帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:04:43.243

您缺少 config.xml 的结尾吗？您可能只是没有粘贴它。您确定您的模块已启用吗？看看这个免费的扩展，它可以帮助您调试扩展 - [http://www.magentocommerce.com/magento-connect/magneto-debug-8676.html](http://www.magentocommerce.com/magento-connect/magneto-debug-8676.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T10:36:51.630

我有同样的问题。我认为以下是正确的方法：

```
 <salesrule_validator_process>
        <observers>
            <Namespace_Modulename> // your namespace_modulename
                <type>model</type> //change singleton to model
                <class>Tweett_Fashionn_Model_Observer</class>
                <method>specialpricediscount</method>
            </Namespace_Modulename>
        </observers>
    </salesrule_validator_process> 
```

愿这对你有所帮助。

# jquery - jQuery复选框甚至

> ID：11189722
> 
> 赞同：0
> 
> 时间：2012-06-25T12:50:41.413
> 
> 标签：jquery, events, checkbox

我有以下 fiddle1 [http://jsfiddle.net/y6tCt/35/](http://jsfiddle.net/y6tCt/35/)。我需要`checkbox`动态构建列表，但现在我已经硬编码了两行。当我单击其中一个`checkbox`es 时，它不会调用“更改”事件。

如果有人可以看看并让我知道我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:56:34.880

问题是你的 dom 在 buildHTML(); 之前已经准备好了。已完成运行。

调用 buildHTML(); 如下

```
$(document).ready( function() {
     buildHTML();
     $(":checkbox").change(function() {

        alert("here");

     });}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:55:43.510

您可以实时使用 jquery，因为它适用于动态创建的元素。

```
$(":checkbox").live('change', function() { 
```

[http://jsfiddle.net/y6tCt/42/](http://jsfiddle.net/y6tCt/42/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:56:47.687

签出它现在工作的脚本，[http://jsfiddle.net/y6tCt/46/](http://jsfiddle.net/y6tCt/46/)

这是我更改的脚本，

```
buildHTML();
$(":checkbox").click(function() {
            if( $(this).is(':checked') ) {
         alert("Checked");
            } else {
                alert('Unchecked');
            }

        });}); 
```

# c# - 使用 AutoMapper 将对象的属性映射到字符串

> ID：11189729
> 
> 赞同：44
> 
> 时间：2012-06-25T12:51:13.730
> 
> 标签：c#, .net, mapping, automapper, automapper-2

我有以下模型：

```
public class Tag
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我希望能够使用 AutoMapper 将类型的`Name`属性映射`Tag`到我的一个视图模型中的字符串属性。

我创建了一个自定义解析器来尝试处理此映射，使用以下代码：

```
public class TagToStringResolver : ValueResolver<Tag, string>
    {
        protected override string ResolveCore(Tag source)
        {
            return source.Name ?? string.Empty;
        }
    } 
```

我正在使用以下代码进行映射：

```
Mapper.CreateMap<Tag, String>()
    .ForMember(d => d, o => o.ResolveUsing<TagToStringResolver>()); 
```

当我运行应用程序时，我收到错误：

> 成员的自定义配置仅支持类型上的顶级个人成员。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-25T14:37:01.657

这是因为您试图映射到实际的目标类型，而不是目标类型的属性。您可以通过以下方式实现您想要的：

```
Mapper.CreateMap<Tag, string>().ConvertUsing(source => source.Name ?? string.Empty); 
```

尽管仅在 Tag 类上覆盖 ToString 会简单得多。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-25T14:36:34.877

ForMember 意味着您正在为想要在类型之间进行映射的成员提供映射。相反，使用这个：

```
Mapper.CreateMap<Tag, String>().ConvertUsing<TagToStringConverter>(); 
```

转换器是

```
public class TagToStringConverter : ITypeConverter<Tag, String>
{
    public string Convert(ResolutionContext context)
    {
        return (context.SourceValue as Tag).Name ?? string.Empty;
    }
} 
```

# java - Android：第二次调用onActivityResult抛出错误

> ID：11189734
> 
> 赞同：0
> 
> 时间：2012-06-25T12:51:41.827
> 
> 标签：java, android, android-intent, oncreate, android-camera-intent

在我的应用程序中，当我单击按钮时它会捕获一些图像。当我第一次单击此按钮时，相机 Intent 打开后，应用程序调用了 onActivityResult，然后应用程序调用了 onResume 方法，一切正常。但是，当我第二次单击按钮时，应用程序会调用相机意图，但在该应用程序调用 onCreate 方法之后，再调用 onActivityResult 方法。我不明白为什么程序会调用 onCreate 方法。正因为如此，我的程序抛出了一些错误。

代码（当点击调用 addPhoto 方法的按钮时）：

```
protected void addPhoto() {
System.out.println("*** addPhoto() ***");

    Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    out1 = Environment.getExternalStorageDirectory(); // out1 is initialized as File out1 = null;
    photoDateString = new DateClass().getCurrentDateAndTime();//this line give current date and time as photo name
    out1 = new File(out, "xxx/images/" + photoDateString + ".jpg");
    i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out1));
    startActivityForResult(i, CAMERA_REQUEST);

 System.out.println("*** End of addPhoto() ***");
} 
```

代码（onActivityResult）：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    System.out.println("*** onActivityResult() ***");

    if (out1 != null && out1.exists()) { 
        // some code
    }
    //some code
    System.out.println("*** End of onActivityResult() ***");
} 
```

因为程序在 onActivityResult 之前调用 onCreate 方法，所以**if (out1 != null && out1.exists()) {**

我不知道我需要做什么。

错误信息：

```
java.lang.RuntimeException: Unable to resume activity {com.pxxl.android.lxxxy/com.pxxl.android.lxxxy.FirstActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=null} to activity {com.pxxl.android.lxxxy/com.pxxl.android.lxxxy.FirstActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:57:25.937

看起来您没有节省`out1`活动生命周期回调。使用`onSaveInstanceState()`和`onRestoreInstanceState()`保存/恢复其值。

以下是有关活动状态处理的更详细说明：[保存活动状态](http://developer.android.com/guide/components/activities.html#SavingActivityState)。

# asp.net - 在 ASP.NET 派生控件中存储和恢复属性

> ID：11189736
> 
> 赞同：1
> 
> 时间：2012-06-25T12:51:47.677
> 
> 标签：asp.net, vb.net, asp.net-2.0

我创建了一个从标准派生的 ASP.NET 类`WebControls.TextBox`，目的是添加将在回发之间持续存在的额外属性。但是，我不知道如何让这些属性中的值保持不变。

我已经尝试将属性的值作为处理程序`ViewState`的一部分设置到控件中`PreRender`，但是在回发的处理程序中无法访问该值`Init`，因为`ViewState`尚未设置。

我*可以*在控件的处理程序中查找该`ViewState`值`Load`，但如果使用该控件的页面/用户控件在其`Load`处理程序期间请求属性值，则该控件尚未到达它的`Load`处理程序，因此它不存在。

我现在的班级看起来像这样......

```
Public Class MyTextBox
    Inherits TextBox

    Private _myParam As String = ""
    Public Property MyParam As String
        Get
            Return _myParam
        End Get
        Set(value As String)
            _myParam = value
        End Set
    End Property

    Private Sub MyTextBox_Init(sender As Object, e As EventArgs) Handles Me.Init
        If Page.IsPostBack Then
            _myParam = ViewState("myParam")
        End If
    End Sub

    Private Sub MyTextBox_PreRender(sender As Object, e As EventArgs) Handles Me.PreRender
        ViewState("myParam") = _myParam
    End Sub
End Class 
```

我一定遗漏了一些非常简单的东西，例如我是否可以针对该属性设置一个属性。

**更新**

感谢@AVD 指出我真的对 ViewState 和 Init / Load 阶段知之甚少，我终于弄清楚了。

如果您有时间（并且如果您正在做任何主要的 ASP.NET 工作，则*需要*抽出时间）请阅读@AVD 指向我的“[了解 ASP.NET 视图状态”文档。](http://msdn.microsoft.com/en-us/library/ms972976.aspx)它会解释很多。

但是，它没有解释的是，如果您将控件放在 a 内`<asp:Repeater>`，则不妨将所有规则扔出窗外……这正是我遇到的问题。

最后，我设法让它工作的方法是使用转发器中的控件，在转发器的处理程序中`<asp:PlaceHolder>`创建我的控件的实例`ItemDataBound`，然后将控件添加到`<asp:PlaceHolder>`... `Init`（幸运的是我能够做到）。

正如[Andrew 在上一个问题中发现的那样，](https://stackoverflow.com/questions/575414/problem-with-viewstate-of-dynamic-controls-inside-a-repeater)您最终可能会遇到先有鸡还是先有蛋的情况，您需要`Init`在`Load`.

（我仍然使 AVD 的答案正确，因为在我原来的问题的上下文中，它是绝对正确的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:03:37.980

您必须在属性访问器中向/从 ViewState 存储/检索值。

```
Public Property MyParam As String
    Get
       If IsNothing(ViewState("myParam")) Then
           return string.Empty
       End IF
       Return ViewState("myParam").ToString()
    End Get
    Set(value As String)
        ViewState("myParam") = value
    End Set
End Property 
```

# c# - 多对多映射问题

> ID：11189737
> 
> 赞同：0
> 
> 时间：2012-06-25T12:51:48.973
> 
> 标签：c#, asp.net-mvc, fluent-nhibernate

我有以下域对象：

```
public class UserSpecialization : PersonSpecialization, IUserSpecialization
{
    public static readonly string SpecializationNameValue = "User";

    public UserSpecialization()
    {
        Roles = new Collection<IRole>();
    }

    public virtual IEnumerable<IRole> Roles
    {
        get;
        set;
    }
}

public abstract class PersonSpecialization : DomainObjectOfInt32, IPersonSpecialization
{
    public virtual IPerson Person { get; set; }
    public virtual string SpecializationName { get; protected set; }
}

public class Person : DomainObjectOfInt32, IPerson, IAuditable
{
    public Person()
    {
        Specializations = new List<IPersonSpecialization>();
    }

    public virtual IList<IPersonSpecialization> Specializations { get; protected set; }
}

public abstract class Role : DomainObjectOfInt32, IRole, IAuditable
{
    public Role(string roleName)
        : this()
    {
        Name = roleName;
    }
    protected Role()
    {
        AssignedUsers = new Collection<IUserSpecialization>();
    }

    public virtual ICollection<IUserSpecialization> AssignedUsers
    {
        get;
        protected set; }
} 
```

我的映射如下：

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    { 
        Id(x => x.Id).GeneratedBy.Identity();
        HasMany<PersonSpecialization>(c => c.Specializations)
            .Cascade.AllDeleteOrphan();
    }
}

public class RoleMap : ClassMap<Role>
{
    public RoleMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        HasManyToMany<UserSpecialization>(x => x.AssignedUsers).Table("UserRole");
        DiscriminateSubClassesOnColumn("Type");
    }
}

public class PersonSpecializationMap : ClassMap<PersonSpecialization>
{
    public PersonSpecializationMap()
    {
        Table("PersonSpecialization");

        Id(c => c.Id).GeneratedBy.Identity();

        DiscriminateSubClassesOnColumn<string>("SpecializationName");

        Map(x => x.SpecializationName).ReadOnly();

        References<Person>(c => c.Person);
    }
} 
```

现在，当我选择一个人时，我还会在角色集合中获得他的所有角色。此外，在保存角色时，所有链接的人员都会很好地保存。但是当我保存一个人时，该人的链接角色不会保存。

我该如何解决这个问题？

UserSpecialization 的映射：

```
public class UserSpecializationMap : SubclassMap<UserSpecialization>
{
   public UserSpecializationMap()
    {
        Table("User");

        DiscriminatorValue(UserSpecialization.SpecializationNameValue);

        Join("[User]", joined =>
        {
            joined.Map(c => c.UserName, "Username");

            joined.HasManyToMany<Role>(x => x.Roles).Inverse()
                .Table("UserRole");
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:23:17.240

你不见了

```
public class UserSpecializationMap : SubclassMap<UserSpecialization>
{
    public UserSpecializationMap()
    {
        Table("PersonSpecialization");

        Id(c => c.Id).GeneratedBy.Identity();

        DiscriminatorValue("UserSpecialization");

        HasManyToMany(x => x.Roles).Cascade.All()...;
    }
} 
```

顺便说一句：我会为 specializationName 使用多态属性，那么您不需要专门初始化该属性，您不能在派生类中忘记它，它不会在对象中占用空间。

```
// base class
public abstract string SpecializationName { get; }

// dereived class
public override string SpecializationName { get { return "User"; } } 
```

# barcode - 创建一个将循环扫描条形码的应用程序，直到设备的电池电量耗尽

> ID：11189738
> 
> 赞同：2
> 
> 时间：2012-06-25T12:51:50.190
> 
> 标签：barcode, zxing, monitor, barcode-scanner, battery

我需要创建一个应用程序，该应用程序将连续扫描条形码，直到设备的电池电量低到关闭为止。我需要测试扫描条码时电池的续航时间。我需要收集条形码类型、条形码编号、扫描条形码的持续时间以及每次扫描的电池百分比的数据。

我是使用 Android 编程的新手，我会感谢我能得到的所有帮助！到目前为止，我已经修改了 ZXing Barcode Scanner 应用程序，它将打印一次扫描的条形码类型、条形码编号、持续时间，但我需要保存这些值以及添加电池组件。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:53:18.437

如果您仅将其用于测试而不是在市场上发布，我认为修改条形码扫描仪源以执行您在此处所说的操作可能是最简单的。您可以在代码中禁用其自动关机计时器，并在每次扫描时记录您想要的任何内容。

# c++ - FFmpeg av_read_frame 和最大数据包大小

> ID：11189741
> 
> 赞同：6
> 
> 时间：2012-06-25T12:52:22.127
> 
> 标签：c++, c, ffmpeg, frame, decode

**是否有可能检测av_read_frame()**可以读取的最大数据包（AVpacket）大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:47:07.593

我最近也在寻找同样的东西。似乎 av_read_frame 在内部为每个编解码器/格式调用了编解码器特定的 read_packet 函数。这反过来为每个数据包分配内存并根据编解码器/格式构成的最大限制释放它。因此，只要您有内存来支持（无效）流，您就应该没问题，并且限制特定于编解码器/格式解码器。[您可以找到在 AVInputFormat 中为每种格式定义的函数 .read_packet ]。

# performance - 实时数据处理

> ID：11189745
> 
> 赞同：0
> 
> 时间：2012-06-25T12:52:25.830
> 
> 标签：performance, database-design, real-time

我每秒解析关键字几次。每秒我有 1000 - 5000 个关键字。所以我想找出异常值、增长和其他称为技术分析的东西。问题之一是如何存储数据。我将能够做类似的事情：

```
 20-01 20-02 20-03 
brother    0      3     4
table      1      0     0
cup        34     54    78 
```

但它可能是很多关键字。对于我需要查看的每个新数据部分，这个词是否存在？如果不这样做，那么我必须添加新单词并为它们添加新行。什么是组织商店的正确方法？我应该使用 key\value 数据库、NoSQL 还是其他东西？

# jquery - $.each 遍历从 jquery 返回的 json 在 firefox 中失败

> ID：11189746
> 
> 赞同：1
> 
> 时间：2012-06-25T12:52:33.930
> 
> 标签：jquery, ajax, json, each

在 chrome 和 safari 中，以下代码可以正常工作。

在`firefox`，所有平台，所有版本，它都不起作用并抛出一个错误，即对象未定义（来自 jQuery）在`$.each`循环中停止

此代码通过 AJAX 调用 json Web 服务并返回 JSON。

想法？

***代码***

```
 $.ajax({
    url: "URL GOES HERE",
    data: JSON.stringify({
        "geoNear": "geotestnew",
        "near": [-73.78086565, 41.014072],
        "maxDistance": 0.3
    }),
    type: "POST",
    crossDomain: true,
    contentType: "application/json",
    success: function(data) {
        var usthis = data.results;
        $.each(usthis, function(entryIndex, entry) {
            var newdis = this.dis * 69;
            $("#results").append('<br>');
            $("#results").append(newdis);
            $("#results").append('<br>');
            $("#results").append(this.obj.Name);
            $("#results").append('<br>');
        });
    },
    error: function(x, e) {
        $('body').html('error: ' + e);
    }
});
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:12:32.310

您还没有设置`dataType`ajax 选项让 jQuery 知道期望的响应类型

```
 dataType:'json' // or 'jsonp' which it appears you may be using 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:13:27.800

我在这里看到了一些错误：

1.  您没有设置数据类型。返回数据的格式由 dataType 属性决定。
2.  您已将 crossDomain 设置为 true，但使用的是“json”的 contentType 而不是跨域请求所需的“jsonp”。
3.  在使用json作为数据类型时，我一直使用`data.d`success方法而不是`data.results`

这是我用于本地 json ajax 请求的代码：

```
 $.ajax({
        type: "POST",
        url: "/Svcs.asmx/GetStateProvOptions",
        dataType: "json",
        data: "{ 'countryID': '" + countryID + "' }",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            var result = data.d;
            var options = [];
            options.push('<option value="0" selected="selected">All</option>');
            for (var i = 0; i < result.length; i++) {
                options.push('<option value="', result[i].ID, '">', result[i].Value, '</option>');
            }
            $('.ddl').html(options.join(''));
        },
        error: Ajax_Error
    }); 
```

还可以查看[$.ajax](http://api.jquery.com/jQuery.ajax/)文档以获取更多信息。

这里有一个解释`data.d`： [http ://encosia.com/never-worry-about-asp-net-ajaxs-d-again/](http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/)

# objective-c - 创建一次后更新/刷新 UIScrollView 的框架

> ID：11189755
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:52:58.740
> 
> 标签：objective-c, uiscrollview, refresh, frame

```
self.scrollView.frame=CGRectMake(CGRectGetMinX(self.bounds),CGRectGetMaxY(self.bounds),CGRectGetWidth(self.bounds),CGRectGetHeight(self.bounds));

[self.scrollView addSubview:self.hourView];

[self.scrollView addSubview:self.gridView]; 
```

现在在 gridview 中嵌入一些视图后，我得到了一些`coordinates(x,y,width,height)`. 现在我想用这些刷新我的滚动视图的框架`coordinates(x,y,width,height)`。

由于滚动视图已经创建一次，所以我应该怎么做才能更新或刷新它的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:57:20.650

您可以通过与最初相同的方式对其进行更新。

```
scrollView.frame=CGRectMake(x,y,width,height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:03:07.243

`[yourScrollView setFrame:CGRectmake(,,,)];`你可以随时打电话

# c# - SQL 身份增量和种子

> ID：11189764
> 
> 赞同：3
> 
> 时间：2012-06-25T12:53:51.167
> 
> 标签：c#, sql, sql-server, sql-server-2005

我正在使用`Microsoft SQL Server`我的数据库。

我的表中有一个 ID 列。在我的使用中，行被删除并重新创建了很多次。所以，如果我使用 SQL Server 的 Identity Increment 和 Identity Seed，ID 号会在一段时间后变得非常大......

每个新行的 ID 是否大于其他行并不重要。只是它必须是独一无二的。

如何在 SQL Server 中做到这一点？我应该禁用自动增量并手动设置 ID 吗？如何？

我正在使用 C# 和 SQL Server Express。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T13:09:07.687

我不确定你为什么关心数字是大是小（希望用户没有情感价值或对身份价值赋予任何意义），但避免用尽问题的一种方法是使用 BIGINT。我忘记了确切的数字，但如果你每秒生成 1000 个 ID 之类的东西，则需要 80 年左右才能达到极限——如果你从负边界开始，你可以加倍。是的，BIGINT 是 8 个字节而不是 4 个字节，但这仍然比 GUID 更小且更有用。如果将此与数据压缩相结合，则在您使用 20 亿个数字之前，您将不需要比 INT 更多的存储空间。

不要过度设计这一点，也不要错误地认为标识值的大小或值应该有意义。这是仅为内部识别和效率而生成的替代值。如果你告诉用户这个值，那就有问题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:58:38.527

您可以尝试使用此代码

--禁用身份 SET IDENTITY_INSERT YourSchema.YourTable OFF GO

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:01:17.360

除非你想搞砸很多东西，即只在存储过程中添加东西，要么使用 select Max(ID) 要么使用带有 next_ID 的表，处理多用户访问等，你在 2005 年就被困住了（SQL显然，2012 年引入了序列）。

另一种选择是重新编号 ID 并重新设定身份，但这也是很多工作。

除了大数字不是问题外，它们只占用四个字节，与小数字相同。翻身当然是一个问题，但要做到这一点需要一段时间！

您可以切换到一个可以扩展的 GUID，但它们会产生一个非常低效的索引，因此除非您将拥有超过 2^31 条记录，否则也不值得这样做。

正如其他人提到的那样，Bigint 会给你更大的范围，但当然更大的数字。:(

# python - 设置打开和保存对话框的扩展类型

> ID：11189770
> 
> 赞同：1
> 
> 时间：2012-06-25T12:54:15.833
> 
> 标签：python, wxpython

我希望打开的对话框按`*.spectrum`或不过滤文件（`*.* all files`）。

我还希望保存对话框在保存时建议`.spectrum`扩展。常见的，`new file.ext`其中`new file`突出显示供我们覆盖。

* * *

我已经`wildcard = "*.spectrum"`为这两个选项设置了，但请给我一个更完整的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:38:11.810

我写了几篇关于这个主题的文章：

*   wxPython：[在 wx.FileDialog 中显示 2 个文件类型](http://www.blog.pythonlibrary.org/2011/02/10/wxpython-showing-2-filetypes-in-wx-filedialog/)
*   [wxPython](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)的对话框

基本上你想要的打开和保存对话框是这样的：

```
wildcard = "Python source (*.spectrum)|*.spectrum|" \
           "All files (*.*)|*.*" 
```

然后在代码中，你会做这样的事情：

```
def onOpenFile(self, event):
    """
    Create and show the Open FileDialog
    """
    dlg = wx.FileDialog(
        self, message="Choose a file",
        defaultDir=self.currentDirectory, 
        defaultFile="",
        wildcard=wildcard,
        style=wx.OPEN | wx.MULTIPLE | wx.CHANGE_DIR
        )
    if dlg.ShowModal() == wx.ID_OK:
        paths = dlg.GetPaths()
        print "You chose the following file(s):"
        for path in paths:
            print path
    dlg.Destroy()

#----------------------------------------------------------------------
def onSaveFile(self, event):
    """
    Create and show the Save FileDialog
    """
    dlg = wx.FileDialog(
        self, message="Save file as ...", 
        defaultDir=self.currentDirectory, 
        defaultFile="", wildcard=wildcard, style=wx.SAVE
        )
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        print "You chose the following filename: %s" % path
    dlg.Destroy() 
```

注意：代码直接取自我的博客，仅稍作修改。

# java - 高效并发树

> ID：11189784
> 
> 赞同：14
> 
> 时间：2012-06-25T12:54:48.017
> 
> 标签：java, concurrency, tree

我正在寻找一种有效的方法来实现并发树结构。如果这有帮助，假设我有比结构更改更多的读取访问权限。

树应该支持这些操作：

*   添加和删​​除节点
*   每次插入新节点时对分支进行排序
*   遍历所有节点（没有 ConcurrentModificationException）
*   按路径查找元素

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T17:13:06.747

看一下： Google 代码上的[Concurrent-Trees](http://code.google.com/p/concurrent-trees/)，了解一种无需锁定即可修改树状结构的方法。

该项目为 Java 提供并发基数和后缀树。它们支持并发读取和写入，并且读取是无锁的。它通过以原子方式将补丁应用于树来工作。虽然这些类型的树可能不是您想要的，但[TreeDesign](https://code.google.com/p/concurrent-trees/wiki/TreeDesign)中描述的使用“修补”的方法对于任何类型的树状结构都很有用。

这些树旨在用于高并发读取主要用例，其中（例如）后台线程可能正在从树中插入或删除条目，而许多前台线程将继续遍历它而不受修改的阻碍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T13:15:06.380

最接近您可能需要的 Java 结构是[ConcurrentSkipListSet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)（或者可能是[ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)）。

* * *

如果您需要更自定义的方法，如果您有分层读写锁，则可以实现自定义树结构。以下是关于如何实现可重入读写锁的类似问题的答案： [https ://stackoverflow.com/a/6154873/272388](https://stackoverflow.com/a/6154873/272388)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T13:04:56.460

您可以在结构中使用读写器锁，这样多个线程可以同时读取，但一次只有一个线程可以修改它。如果某个线程试图修改结构，则在所有读者都完成阅读之前，它不能这样做。如果一个线程想要读取它，那么只有在编写器尚未工作时才能读取它，或者它正在做一些修改。也许看看这个可能会有所帮助：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T13:12:22.287

读/写锁的基本思想

对于所有写入方法，请使用以下成语：

```
someWriteMethod(){
  writeLock.lock();
  // logic
  writeLock.unlock();
} 
```

对于所有读取方法，使用类似的代码：

```
someReadMethod(){
  readLock.lock();
  // logic
  readLock.unlock();
} 
```

*   如果至少有一种方法执行写入，则没有人可以获得读或写锁。
*   如果至少有一种方法执行读取，则任意数量的线程都可以获得读锁。
*   如果至少有一种方法执行读取，则没有人可以获取写入锁。

请注意，如果您的代码（替换上面的逻辑注释）可能引发异常，请确保您在从 finally 部分中的方法退出之前释放锁。

# android - 在 ios 或 android 应用程序中使用 Ms Word

> ID：11189785
> 
> 赞同：-4
> 
> 时间：2012-06-25T12:54:50.467
> 
> 标签：android, ios, ms-word, office365

有没有办法将 ms word 添加到 android 或 ios 应用程序以创建或编辑 word 文档，如 Google play 和应用商店中的 cloudon 应用程序。那么有谁知道 cloudon 应用程序是如何工作的，可能使用 api 或 office 365

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:10:07.987

[在http://poi.apache.org/](http://poi.apache.org/)有一个开源 java 库“Apache POI - Microsoft 文档的 Java API” ，但我自己从未在 Android 上测试过（但在其他 web java 项目中）；但我想它也可以在那里工作。

有了它，您可以读/写办公文档，从而也可以编辑它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:18:03.433

简短的答案是否定的，长答案也是如此。Microsoft Word 是适用于 Windows、Mac 和 Windows Phone 的专有 Office 套件。如果微软移植它，它只能直接在其他操作系统上使用。您可以查看在开源套件（例如 LibreOffice）中读写代码的 MS Office 文档，并以此为基础编写代码。

或者，这是实际的答案，使用您拥有库或可以为其编写代码的格式。我不了解 Android，但 iOS 在 Core Graphics 中支持 PDF。并且有可用于文档应用程序的格式标准。这里有一对：

*   PDF：可能已经是它的库了。
*   HTML：任何 HTML/XML 库都可以，并且已经可以通过嵌入目标系统的 WebKit 来呈现。
*   RTF：我不确定它的开放程度，但它不是二进制的。
*   ODT：最复杂，但功能最全。你甚至可以移植一些 LibreOffice 代码
*   任何其他标记语言：您可以创建自己的格式，但也必须自己呈现。

请记住这一点：始终支持所有 Microsoft Office 文档的唯一程序是 Microsoft Office，如果您提交的应用程序使用 Office 文档作为其主要格式，我也不确定 Apple 会如何。

# php - PHP Imagemagick 将灰度转换为 RGB

> ID：11189787
> 
> 赞同：3
> 
> 时间：2012-06-25T12:54:56.133
> 
> 标签：php, imagemagick, color-profile

我制作了一个工具，人们可以上传照片并对其进行修改，包括去饱和度，从而产生灰度图像。我使用 PHP 的 GD 库生成最终图像。

打印这些图像时，颜色出现错误，因此使用 Image Magick 我添加了颜色配置文件。

除了灰度化的图像外，这非常有用。添加了颜色配置文件，但是当我在 Photoshop 中打开图像时，它显示“无法使用嵌入的 ICC 配置文件，因为 ICC 配置文件无效。忽略配置文件”。在 Photoshop 中，图像设置为灰度而不是 RGB，因此附加的 RGB 配置文件是错误的。我需要它是RGB。

我正在使用以下代码添加所有可能的信息，以尝试使图像变为 RGB：

```
<?php
$i = new Imagick();
$i->readimage('image.jpg');
$i->setimagetype(Imagick::IMGTYPE_TRUECOLOR);
$i->setimagecolorspace(Imagick::COLORSPACE_RGB);
$i->profileimage('icc', file_get_contents('AdobeRGB1998.icc'));
$i->writeimage($d);
$i->destroy();
?> 
```

有谁知道如何成功地将图像设置为 RGB 并附加配置文件？

我确实为“setImageProfile”和“profileImage”尝试了不同的方法和组合，也用于颜色空间和图像类型，但结果总是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:06:32.407

这对我有用，可以将其识别为真彩色图像。假设`$img`是包含灰度图像的 Imagick 对象，我检查它是否确实是灰度图像，然后编辑 1 个随机像素并通过添加或减去 5 个值来修改其红色值，具体取决于红色是否大于 5。

```
<?php
if ($img->getImageType() == Imagick::IMGTYPE_GRAYSCALE)
{
    // Get the image dimensions
    $dim = $img->getimagegeometry();

    // Pick a random pixel
    $x = rand(0, $dim['width']-1);
    $y = rand(0, $dim['height']-1);

    // Define our marge
    $marge = 5;
    //$x = 0;
    //$y = 0;

    // Debug info
    echo "\r\nTransform greyscale to true color\r\n";
    echo "Pixel [$x,$y]\n";

    // Get the pixel from the image and get its color value
    $pixel = $img->getimagepixelcolor($x, $x);
    $color = $pixel->getcolor();
    array_pop($color); // remove alpha value

    // Determine old color for debug
    $oldColor   = 'rgb(' . implode(',',$color) . ')';
    // Set new red value
    $color['r'] = $color['r'] >= $marge ? $color['r']-$marge : $color['r'] + $marge;
    // Build new color string
    $newColor   = 'rgb(' . implode(',',$color) . ')';

    // Set the pixel's new color value
    $pixel->setcolor($newColor);

    echo "$oldColor -> $newColor\r\n\r\n";

    // Draw the pixel on the image using an ImagickDraw object on the given coordinates
    $draw = new ImagickDraw();
    $draw->setfillcolor($pixel);
    $draw->point($x, $y);
    $img->drawimage($draw);

    // Done, 
    unset($draw, $pixel);
}
// Do other stuff with $img here
?> 
```

希望这对将来的任何人都有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T21:29:38.837

@a34z 在评论中说：

> *“不知何故，我必须让 PS 知道它是一个 RGB 图像，其中只有灰色像素或类似的东西。”*

**假设 RGB 图像甚至可能包含“灰色”像素，这是一个基本错误！**

RGB 图像确实具有始终由 3*种颜色*混合组成的像素：**R** ed + **G** reen + **B** lue。这些是可用的 3 个频道，仅此而已。RGB 中没有灰色通道。

使 RGB 图像在我们眼中**看起来**是灰色的原因是 3 个数字通道值中的每一个都相等或不太严格，至少“足够相似”。当然，也有软件可以分析 3 个通道的颜色值，告诉你哪些像素是“灰色”的。ImageMagick 的直方图输出会很高兴地告诉您您会说哪些灰色阴影，并为这些灰色使用不同的名称。但是不要被那个颜色名称所迷惑：像素仍然由具有相同（或非常相似）强度的 3 种颜色组成，并且 ImageMagick 也会报告这些值。

如果你真的需要一个纯灰度图像（灰度级只使用一个通道，而不是三个），那么你必须将它转换为这样的图像类型。

The two images may still look the same (if the conversion was done correctly, and if your monitor is calibrated, and if your not red-green-blind) -- but their internal file structure is different.

RGB images need ICC profiles that deal with RGB (if any), such as sRGB. For grayscale you cannot use sRGB, there you may want to use DeviceGray or something...

# iphone - CFNetwork.framework 在 xcode4 中被误删

> ID：11189789
> 
> 赞同：0
> 
> 时间：2012-06-25T12:55:08.077
> 
> 标签：iphone, ios, xcode, cfnetwork, ios-frameworks

我已经包含`CFNetwork.framework`在我的应用程序中。后来在不需要的时候，我只是右键单击并错误地删除了。现在我的 iPhone 应用程序没有构建，说 CFNetwork.h 丢失了。在添加库中，我搜索但在列表中找不到框架。

(1) 有什么办法可以恢复已删除的`CFNetwork.framework`.

(2) 有没有办法下载这个`framework`并将其添加到`Xcode`or中`SDK`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:01:16.960

试试这个

1.转到xcode中的摘要

2.单击链接的二进制文件和框架下方的+按钮

3.从那里选择您想要的框架工作，然后单击添加

现在您已成功将框架添加到项目中

# python - 有没有更好的方法在 Python 中编写连续的“或”语句？

> ID：11189793
> 
> 赞同：22
> 
> 时间：2012-06-25T12:55:38.353
> 
> 标签：python, conditional

我自己找不到任何“好”答案的简单问题：

假设我有以下条件：

```
if 'foo' in mystring or 'bar' in mystring or 'hello' in mystring:
    # Do something
    pass 
```

根据情况，语句的数量`or`可以相当长。

在不牺牲性能的情况下，是否有一种“更好”（更 Pythonic）的写法？

如果考虑使用`any()`但它需要一个类似布尔元素的列表，那么我必须首先构建该列表（在此过程中放弃短路评估），所以我想它的效率较低。

非常感谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-25T12:58:16.077

一种方法可能是

```
if any(s in mystring for s in ('foo', 'bar', 'hello')):
    pass 
```

你迭代的东西是一个元组，它建立在函数的编译之上，所以它不应该低于你的原始版本。

如果你担心元组会变得太长，你可以这样做

```
def mystringlist():
    yield 'foo'
    yield 'bar'
    yield 'hello'
if any(s in mystring for s in mystringlist()):
    pass 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T13:00:22.690

这听起来像是正则表达式的工作。

```
import re

if re.search("(foo|bar|hello)", mystring):
    # Do something
    pass 
```

它也应该更快。特别是如果您提前编译正则表达式。

如果您要自动生成正则表达式，您可以使用`re.escape()`它来确保没有特殊字符破坏您的正则表达式。例如，如果`words`是您希望搜索的字符串列表，您可以像这样生成您的模式：

```
pattern = "(%s)" % ("|".join(re.escape(word) for word in words), ) 
```

您还应该注意，如果您有`m`单词并且您的字符串有`n`字符，那么您的原始代码具有`O(n*m)`复杂性，而正则表达式具有`O(n)`复杂性。尽管 Python 正则表达式并不是真正理论上的 comp-sci 正则表达式，并且并不*总是* `O(n)`复杂的，但在这个简单的情况下它们是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T13:49:43.093

由于您正在逐字处理`mystring`，因此 mystring 肯定可以用作集合。`mystring`然后只取包含单词的集合和目标单词组之间的交集：

```
In [370]: mystring=set(['foobar','barfoo','foo'])

In [371]: mystring.intersection(set(['foo', 'bar', 'hello']))
Out[371]: set(['foo']) 
```

您的逻辑“或”是两组交集的成员。

使用一套也更快。以下是相对时间与生成器和正则表达式：

```
f1:  generator to test against large string 
f2:  re to test against large string 
f3:  set intersection of two sets of words 

    rate/sec      f2     f1     f3
f2   101,333      -- -95.0% -95.5%
f1 2,026,329 1899.7%     -- -10.1%
f3 2,253,539 2123.9%  11.2%     -- 
```

所以生成器和`in`操作比正则表达式快 19 倍，集合交集比正则表达式快 21 倍，比生成器快 11%。

这是生成时间的代码：

```
import re

with open('/usr/share/dict/words','r') as fin:
     set_words={word.strip() for word in fin}

s_words=' '.join(set_words)
target=set(['bar','foo','hello'])
target_re = re.compile("(%s)" % ("|".join(re.escape(word) for word in target), ))

gen_target=(word for word in ('bar','foo','hello'))

def f1():
    """ generator to test against large string """        
    if any(s in s_words for s in gen_target):
        return True

def f2():
    """ re to test against large string """
    if re.search(target_re, s_words):
        return True

def f3():
    """ set intersection of two sets of words """
    if target.intersection(set_words):
        return True

funcs=[f1,f2,f3]
legend(funcs)
cmpthese(funcs) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T15:37:34.280

如果您有要检查的已知项目列表，您也可以将其写为

```
if mystring in ['foo', 'bar', 'hello']: 
```

您可能无法获得确保比较顺序的好处（我不认为 Python 需要从左到右检查列表元素），但如果您知道 'foo' 比 'bar 更有可能，这只是一个问题'。

# php - Codeigniter 2 模型无法识别 db 对象

> ID：11189794
> 
> 赞同：0
> 
> 时间：2012-06-25T12:55:43.153
> 
> 标签：php, codeigniter, codeigniter-2

我之前使用过 Codeigniter 1.7，现在我已经升级到 Codeigniter 2。我正在尝试编写一个非常简单的模型：

```
<?php
class Test extends CI_Model{

 function __construct(){
  parent::__construct();
 }

 function test(){
  $this->db->orderby ( 'updateDate', 'desc' );
  $this->db->where ( 'logicalDelete', 0 );
  $rs = $this->db->get ( 'act_activity_vw' );

  if (! $rs) {
   throw new DatabaseException ();
  }

  return $rs->result ();
 } 
} 
```

我有一个简单的控制器来调用它。但是当我尝试运行它时，我收到以下错误：

```
<b>Fatal error</b>:  Call to a member function orderby() on a non-object in <b>C:\xampp\htdocs\API\application\models\test.php</b> on line <b>9</b><br /> 
```

似乎它没有将“db”识别为对象成员。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:58:24.797

您需要在 CodeIgniter 系统中加载数据库。您可以通过自动加载或在类的构造函数中加载它来做到这一点。

[http://codeigniter.com/user_guide/database/connecting.html](http://codeigniter.com/user_guide/database/connecting.html)

我认为这有你需要的一切。

# mysql - 在数据库中插入或替换值

> ID：11189796
> 
> 赞同：0
> 
> 时间：2012-06-25T12:55:56.690
> 
> 标签：mysql, database, insert, replace

如何在数据库中插入或替换值？

基本上我需要在不改变其余信息的情况下替换数据库上的一行，在这种情况下是`form_email`基于 id 的行。

在之前的例子中，我收到了一封电子邮件：

```
$query = "SELECT `form_email` FROM `$table_name_email` WHERE `id` = $form_id";
$result = mysql_query($query) or die(mysql_error());

while($row_email = mysql_fetch_array($result_email)){
    $email = $row_email[form_email];
    echo $email;
} 
```

但我无法理解如何插入或替换该电子邮件

这是表结构，以防万一。

```
CREATE TABLE IF NOT EXISTS `contactforms` (
  `id` int(11) NOT NULL auto_increment,
  `form_slug` varchar(100) NOT NULL,
  `form_title` varchar(200) NOT NULL,
  `form_action` mediumtext NOT NULL,
  `form_method` varchar(4) NOT NULL,
  `form_fields` text NOT NULL,
  `submit_button_text` varchar(200) NOT NULL,
  `custom_code` mediumtext NOT NULL,
  `form_style` int(10) NOT NULL default '0',
  `form_email` text NOT NULL,
  `form_success_message` mediumtext NOT NULL,
  `form_thank_you_page` varchar(200) NOT NULL,
  `form_success_title` varchar(150) NOT NULL default 'Form Success!',
  `form_access` text NOT NULL,
  `form_email_subject` varchar(250) NOT NULL,
  `form_email_name` varchar(100) NOT NULL,
  `form_pages` varchar(400) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=17 ; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:01:26.433

您可以使用 sql`UPDATE`语句。它允许您更新某些记录的某些字段，例如（伪代码）：

```
UPDATE contactforms
SET form_email = 'something@narly.com'
WHERE id = 'someId' 
```

这会将所有 form_email 字段修改`something@narly.com`为具有 id 的行`someId`:)

# dll - regasm DLL 位置

> ID：11189797
> 
> 赞同：4
> 
> 时间：2012-06-25T12:55:57.110
> 
> 标签：dll, location, regasm

我正在 Visual Studio 中构建新类。这些最终会生成 DLL 文件，这些文件会通过 VS IDE 自动注册。

这些相同的 DLL（并且只有没有 TLB 的 DLL）被发送到客户端，并通过 REGASM 工具注册它们。

如何识别客户端已注册的 DLL、这些 DLL 的版本以及这些 DLL 在客户端计算机上的位置？

我认为所有这些都保存在注册表中，我只是不知道在哪里。

谢谢，基思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:17:23.730

我认为以下页面可能会给您一个提示： http: [//msdn.microsoft.com/en-us/library/tzat5yw6 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tzat5yw6%28v=vs.100%29.aspx)

所有注册的 COM 类对象都列在 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID 下。如果您通过 MSI 在组件服务中注册您的 COM+，然后在 Program Files\ComPlus Applications 下搜索，您将在那里找到您的 dll。

关于文件属性，请参[阅读/写“扩展”文件属性（C#）](https://stackoverflow.com/questions/220097/read-write-extended-file-properties-c)

# c# - ASP.NET C# 试图隐藏链接按钮

> ID：11189799
> 
> 赞同：0
> 
> 时间：2012-06-25T12:56:04.833
> 
> 标签：c#, asp.net

我对 ASP.NET 有点陌生，我对语法感到困惑，所以我有点迷茫。我正在尝试基于 if 语句隐藏/禁用按钮，但我不知道如何禁用或隐藏它。我以前做过 C#，但这段代码对我来说并不熟悉。

下面是部分代码：

C# 组件：

```
 protected override void Render(HtmlTextWriter writer)
  {    
     string PostCtrl = Request.Params["__EVENTTARGET"];

     if (PostCtrl == "AccColLocation_content$collisionLocation$EditColLocation")
     {
          valDropDownlist(((CustomControl.DropDownValidator)collisionLocation.FindControl("valLoc_municipality")), "CollisionLocation.municipality");

            ..............    
     }    
  } 
```

HTML：

```
 <ItemTemplate>
<asp:LinkButton ID="EditColLocation" runat="server" Text="Edit Collision Location" OnClick="CollisionLocation_Edit" />
 </ItemTemplate> 
```

valDropDownList 方法：

```
protected void valDropDownlist(CustomControl.DropDownValidator valDropdown, string DataElement)
{
    try
    {
        bool mvarRequired, srRequired;
        DataTable dtDataElement = DBFunctions.DBFunctions.getDataElement(RepDateTime, DataElement);
        string s = dtDataElement.Rows[0]["mvarRequired"].ToString();
        mvarRequired = (dtDataElement.Rows[0]["mvarRequired"].ToString() == "True") ? true : false;
        srRequired = (dtDataElement.Rows[0]["srRequired"].ToString() == "True") ? true : false;
        valDropdown.HaveToSelect = (SelfReported) ? srRequired : mvarRequired;
    }
    catch (Exception err)
    {
        MessageBox("An error occurred while setting drop down validation rules. " + err.ToString());
    }
} 
```

所有这些按钮都在网格视图中。

**我有这种性质的东西：**

```
protected void deletedr(object sender, EventArgs e)
    {
        try
        {
            GridView gv = (GridView)FindControl("DriverInfo");
            gv.DataSource = DBFunctions.DBFunctions.getInfo(ReportID.Value, "", 2); ;
            gv.DataBind();

            bool isSelectedLast = false;
            DataTable dt = DBFunctions.DBFunctions.getInfo(ReportID.Value, "", 2);

            if (dlDriverNo.SelectedValue == dt.Rows[dt.Rows.Count - 1]["DriverNo"].ToString())
            {
                isSelectedLast = true;
            }

            if (!(DBFunctions.DBFunctions.deleteDriver(ReportID.Value, dlDriverNo.SelectedValue, isSelectedLast)))
            {
                MessageBox(null);
            }
            else
            {
                dlDriverNo.Visible = false;
                lblDelDriver.Visible = false;
                delDriverconfim.Visible = false;
                cancelDel.Visible = false;
                dlDriverNo.Items.Clear();
                gv.DataSource = DBFunctions.DBFunctions.getInfo(ReportID.Value, "", 2);
                gv.DataBind();
            }
        }
        catch (Exception err)
        {
            MessageBox("An error occurred while deleting the driver. " + err.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:23:54.847

如果您的 LinkBut​​ton 在 GridView 中，最有趣的问题是如何处理它。有了句柄后，您可以将其设置为不可见或禁用：

```
linkButton.Visible = false; 
```

或者

```
linkButton.Enabled = false; 
```

但要获得 LinkBut​​ton 控件的句柄，您需要`.FindControl`在 GridView 控件上的合适事件中使用：

```
<asp:GridView ID="myGridView" runat="server" OnRowDataBound="myGridView_RowDataBound">
...
</aspGridView> 
```

然后在你后面的代码中：

```
protected void myGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    var linkButton = (LinkButton)e.Row.FindControl("EditColLocation");
    if (linkButton != null) 
    {
        if (*your condition to check*)
            linkButton.Visible = false; 
    }
} 
```

希望这会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:12:29.530

在 if 条件之后编写以下代码。按钮名.可见=假；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:08:22.933

你可以试试

valDropdown.Visible = false; //屏蔽控件

# c# - 无法从回历日期转换为公历日期（c#）

> ID：11189807
> 
> 赞同：11
> 
> 时间：2012-06-25T12:56:36.890
> 
> 标签：c#, date, hijri

现在我正在使用回历日期并尝试使用以下代码将它们转换为公历日期：

```
string HijriDate;
string[] allFormats ={"yyyy/MM/dd","yyyy/M/d",
    "dd/MM/yyyy","d/M/yyyy",
    "dd/M/yyyy","d/MM/yyyy","yyyy-MM-dd",
    "yyyy-M-d","dd-MM-yyyy","d-M-yyyy",
    "dd-M-yyyy","d-MM-yyyy","yyyy MM dd",
    "yyyy M d","dd MM yyyy","d M yyyy",
    "dd M yyyy","d MM yyyy","MM/dd/yyyy"};
CultureInfo enCul = new CultureInfo("en-US");
CultureInfo arCul = new CultureInfo("ar-SA");
arCul.DateTimeFormat.Calendar = new System.Globalization.HijriCalendar(); 
DateTime tempDate = DateTime.ParseExact(HijriDate, allFormats, arCul.DateTimeFormat, DateTimeStyles.AllowWhiteSpaces);
return tempDate.ToString("MM/dd/yyyy"); 
```

此代码适用于所有日期，除了每月第 30 天的日期，如下所示：

`30/10/1433`，`30/12/1432`或`30/05/1433`等等，所以如何处理该日期并将其转换为对应的公历

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T14:35:57.037

这是现在在此代码上运行良好的代码我从函数返回日期作为字符串而不是作为`datetime`，但您可以简单地使用返回日期时间类型而不是字符串

```
public string ConvertDateCalendar(DateTime DateConv, string Calendar, string DateLangCulture)
{
    System.Globalization.DateTimeFormatInfo DTFormat;
    DateLangCulture = DateLangCulture.ToLower();
    /// We can't have the hijri date writen in English. We will get a runtime error - LAITH - 11/13/2005 1:01:45 PM -

    if (Calendar == "Hijri" && DateLangCulture.StartsWith("en-"))
    {
        DateLangCulture = "ar-sa";
    }

    /// Set the date time format to the given culture - LAITH - 11/13/2005 1:04:22 PM -
    DTFormat = new System.Globalization.CultureInfo(DateLangCulture, false).DateTimeFormat;

    /// Set the calendar property of the date time format to the given calendar - LAITH - 11/13/2005 1:04:52 PM -
    switch (Calendar)
    {
        case "Hijri":
            DTFormat.Calendar = new System.Globalization.HijriCalendar();
            break;

        case "Gregorian":
            DTFormat.Calendar = new System.Globalization.GregorianCalendar();
            break;

        default:
            return "";
    }

    /// We format the date structure to whatever we want - LAITH - 11/13/2005 1:05:39 PM -
    DTFormat.ShortDatePattern = "dd/MM/yyyy";
    return (DateConv.Date.ToString("f", DTFormat));
} 
```

在这里调用这个方法是一个例子

```
ltrCalValue.Text = ConvertDateCalendar(CalHijri.SelectedDate, "Gregorian", "en-US"); 
```

呼叫回历

```
ltrCalValue.Text = ConvertDateCalendar(CalHijri.SelectedDate, "Hijri", "en-US"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:01:41.883

一个月中一天的最大值可以通过以下方式计算`DateTime.DaysInMonth(year, month)`

并以这种方式使用它

```
int result = DateTime.DaysInMonth(2012, 2); // returns 29 being a leap year 
```

但

```
int result = DateTime.DaysInMonth(2011, 2) // returns 28 being a non-leap year 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T13:07:22.960

Hirji 的第 10 个月和第 12 个月没有第 30 天，因此该日期无效。

# php - 谷歌地图 API 检查是否通过多边形线

> ID：11189810
> 
> 赞同：0
> 
> 时间：2012-06-25T12:56:51.607
> 
> 标签：php, javascript, google-maps

这是我的问题。

我正在使用 Google 地图 API 并正在计算起点和终点之间的距离。这可以。我还有一组多边形线，在这种情况下表示大伦敦地区。我可以确定我的目的地是否在多边形内而没有问题。但我无法解决的是我在什么时候越过了折线（如果这有意义的话）。我需要知道的原因是计算最终目的地和多边形入口点之间的距离，这是因为与英国其他地区相比，大伦敦地区的巴士旅程每英里的费用更高.

我希望这是有道理的。谢谢。

# php - 在托管环境中提供简单的 mysql 表管理界面

> ID：11189812
> 
> 赞同：0
> 
> 时间：2012-06-25T12:56:52.990
> 
> 标签：php, mysql, phpmyadmin, administration

我有一个基于 MySQL 数据库的门户网站，由各种项目组成。项目管理员需要管理他们的表。我想为他们提供一些**已经存在的、免费的、简单的界面，并且设置尽可能便宜**（比如**每个新项目最多花费我 10-15 分钟的时间 - 重要！**项目管理员的数量和他们的请求在增长......） . 它应该支持：

*   *必需：*表导出、导入、插入新行、修改现有行
*   *不需要，但加分：*外键替换为外部表中的其他字段值（通常是“字典”），仅显示某些列等。

问题是它是一个托管环境，所以我对 MySQL 数据库**没有超级用户权限。**我没有授予权限，所以我必须要求我的托管服务提供商运行每个`grant`命令，所以我想尽量减少这些请求，因为它是一项高于标准的服务（这是他们对我的恩惠）。这些请求必须经常进行。

我可以使用哪些数据库管理工具/解决方案？

我的想法：

1) **MySQL ODBC 连接器 + MS Access**作为客户端。MS Access 将通过 ODBC 连接器连接到 MySQL 服务器。我可以准备包含所需表格链接的小型 MS Access 文件，还可以快速生成表格！

*   这很酷，但是，我每次都需要联系我的提供商以创建具有所需权限的数据库用户......以防止用户更改表结构或破坏其他表......

2)**客户端 -> 代理 -> MySQL 服务器。**就像在 1) 中一样，但有一些代理。我现在正在推理，但是 Access 也可以使用其他协议（例如 HTTP）来连接一些可以处理权限的代理，然后这个代理会将其传递给 MySQL 服务器。有没有这样的东西？

3) **PHPMyADMIN**。第 1) 点的问题仍然存在。但是，这里的**权限检查理论上可以在PHP级别实现**，所以不需要更改任何MySQL权限！PHPMyADMIN 是否能够开箱即用？我可以简单地配置一个只能看到表 A 和 B 并且只能修改 C 列等的新用户吗？

*   但是，导入对用户不太友好（没有 XLS，只有 CSV，没有分隔符自动检测等），以及插入新记录......

4) 有很多现代**网络工具，其外观类似于 GoogleDocs**。这些可以用于任务。同样，理论上权限检查可以在网络服务器（而不是数据库）层完成......并轻松设置......（？）

我相信很多人都必须解决同样的问题，所以我期待您的经验和想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:02:09.390

我的最终解决方案是与托管服务提供商达成协议——我要求他创建 5 个虚拟数据库用户以供将来使用，并要求他授予我`GRANT OPTION`特权。所以我可以配置这些用户的权限，而无需询问托管服务提供商！在询问时我不知道这种可能性。

然后，我使用带有 MySQL ODBC 连接器的 MS Access 作为 MySQL 数据库的前端。太棒了1！

# jquery - jQuery 工具覆盖和验证器组合...无法访问验证器 api

> ID：11189815
> 
> 赞同：0
> 
> 时间：2012-06-25T12:57:04.037
> 
> 标签：jquery, api, overlay, validation

我结合了 2 个 jQuery 工具：覆盖和验证器。两者分别工作得很好。但是，当我将它们组合在一起时...（将联系人表单加载到具有外部负载的叠加层中）我无法访问验证器 api（或实例），验证器部分工作。但我无法到达 onSucces 事件，阻止表单在所有验证之前提交。

请帮我。

这是验证器加载脚本：

```
$("#frm_contact").validator({api:true}).submit(function(e) {
                e.preventDefault();
                e.stopPropagation();
                api = $("frm_contact").data("validator");
                // use API to assign an event listener
                api.onSuccess(function(e, els) {
                alert("prima");
                pageTracker._trackPageview('/ContactSubmit');
                         $.ajax({
                              type:'POST', 
                              url: 'process.php', 
                              data:form.serialize(), 
                              cache: false,
                              beforeSend: function(){
                                $('.contentWrap').html("<br /><br /><br /><h3 class=\"contact\">Processing your request...</h3>").fadeIn('slow');
                              }, 
                              error:function(xhr, status, errorThrown) { 
                                //alert(errorThrown+'\n'+status+'\n'+xhr.statusText); 
                              },
                              success: function(response) {
                                $('.contentWrap').html(response).fadeIn('slow', function(){
                                    $('.contentWrap').delay(5000).fadeOut('slow', function(){   
                                        overlayElem.overlay().close();
                                    });
                                });
                              },
                         });

                return false;               
                });          
            });

            $.tools.validator.localize("en", {'[required]'    : '* Required'}); 
```

它加载在覆盖元素内，使其成为整个代码：

```
$(function(){   
    $("#ctactbtn").live('click', function (e) {
    e.preventDefault(); //prevent default link action
    e.stopPropagation();

    overlayElem = $(this); 
    $(this).overlay({
        mask: 'silver',
        api: true,
        load: true,
        onBeforeLoad: function() {
             pageTracker._trackPageview('/contact');

            // grab wrapper element inside content
            var wrap = this.getOverlay().find(".contentWrap");
            $(".contentWrap").fadeIn();
            // load the page specified in the trigger
            wrap.load(this.getTrigger().attr("href"));
        },
        onLoad: function() {
            lastCountry = "";
            $('#countries').change(function () { 
                var option = $("#"+$(this).val()).attr('option');
                if(lastCountry != null){
                    $(lastCountry).fadeOut(500, function() {if(option == "CC"){ $(".contentWrap").animate({height: '400'},500);$(".cWbg").animate({height: '400'},500);}});
                }
                if(option == "CC_Details" | "Details" ){
                    huidig = $("#"+$(this).val());
                    $(".cWbg").animate({height: '460'},500);
                    $(".contentWrap").animate({height: '460'}, 500, function(){ huidig.fadeIn(); });
                }
                if(option == "CC_Details" | "CC" ){
                    $('#CC').val($("#"+$(this).val()).attr('email'));
                } else {
                    $('#CC').val("");
                        if(lastCountry != null){
                            $(lastCountry).fadeOut(500, function() {$(".contentWrap").animate({height: '400'},500);$(".cWbg").animate({height: '400'},500);});
                        }
                }
                lastCountry = "#"+$(this).val(); 
            }).change();

            $("#frm_contact").validator({api:true}).submit(function(e) {
                e.preventDefault();
                e.stopPropagation();
                api = $("frm_contact").data("validator");
                // use API to assign an event listener
                api.onSuccess(function(e, els) {
                alert("prima");
                pageTracker._trackPageview('/ContactSubmit');
                         $.ajax({
                              type:'POST', 
                              url: 'process.php', 
                              data:form.serialize(), 
                              cache: false,
                              beforeSend: function(){
                                $('.contentWrap').html("<br /><br /><br /><h3 class=\"contact\">Processing your request...</h3>").fadeIn('slow');
                              }, 
                              error:function(xhr, status, errorThrown) { 
                                //alert(errorThrown+'\n'+status+'\n'+xhr.statusText); 
                              },
                              success: function(response) {
                                $('.contentWrap').html(response).fadeIn('slow', function(){
                                    $('.contentWrap').delay(5000).fadeOut('slow', function(){   
                                        overlayElem.overlay().close();
                                    });
                                });
                              },
                         });

                return false;               
                });          
            });

            $.tools.validator.localize("en", {'[required]'    : '* Required'}); 

        },
        onBeforeClose: function(){
            $("#frm_contact").data("validator").reset();
            $('.error').hide(); $('.error').empty();
        }
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:27:15.727

我最近遇到了类似的事情。似乎在以下 3 个库之间共享了依赖代码：

*   日期输入/日期输入.js
*   范围输入/范围输入.js
*   验证器/validator.js

我只在我的项目中使用验证器，但为了使其正常工作，在从 JQuery UI 站点生成 JS 文件时，我必须包含对所有 3 个相关库的引用。

# java - 以编程方式检索 Maven 依赖关系图

> ID：11189817
> 
> 赞同：4
> 
> 时间：2012-06-25T12:57:18.110
> 
> 标签：java, maven, ivy

给定一个 Maven 工件 (groupId:artifactId:version)，我如何以编程方式查询它的依赖项？（我实际上不需要检索任何工件，只需要依赖信息。）

**编辑添加**我想在 Maven 插件之外执行此操作，并且我想建立一个依赖关系图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:29:04.970

以下 groovy 脚本使用[ivy](http://ant.apache.org/ivy/)解决依赖关系

```
import groovy.xml.NamespaceBuilder

// Main program
// ============
def ant = new AntBuilder()
def ivy = NamespaceBuilder.newInstance(ant, "antlib:org.apache.ivy.ant")

ivy.resolve(
    inline:true,
    keep:true,
    conf:"default",
    organisation:"org.springframework",
    module:"spring-core",
    revision:"3.1.1.RELEASE",
)

ivy.report(toDir:"reports") 
```

生成 HTML 报告和 graphml 文件：

```
|-- report.groovy
|-- reports
|   |-- ivy-report.css
|   |-- org.springframework-spring-core-caller-default.graphml
|   `-- org.springframework-spring-core-caller-default.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:29:14.877

如果您使用的是 maven 插件（即：扩展 AbstractMojo），您可以执行以下操作：

```
 /**
   * @parameter expression="${project}"
   */
  private org.apache.maven.project.MavenProject mavenProject;

  List<org.apache.maven.model.Dependency> depmgtdeps = mavenProject.getDependencyManagement().getDependencies(); 
```

这将为您提供它检测到的实际依赖对象。MavenProject 类还有许多其他方法用于读取各种与 pom 相关的内容。但是，我不相信这在插件之外有效，或者至少，我从未尝试过这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:30:28.127

我发现这两个链接很有帮助..

1.  [用于检索依赖项的 Maven 插件](http://el4j.sourceforge.net/plugins/maven-depgraph-plugin/plugin-info.html)
2.  [使用 Eclipse 插件](http://www.summa-tech.com/blog/2011/04/12/a-visual-maven-dependency-tree-view/)

# c# - C# 动态 Linq 变量 Where 子句

> ID：11189826
> 
> 赞同：7
> 
> 时间：2012-06-25T12:57:46.563
> 
> 标签：c#, linq

我正在关注 Scott Gu 的文章来创建动态 LINQ [http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library .aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

他举了一个例子：

```
Expression<Func<Customer, bool>> e1 = 
    DynamicExpression.ParseLambda<Customer, bool>("City = \"London\"");  
Expression<Func<Customer, bool>> e2 =
    DynamicExpression.ParseLambda<Customer, bool>("Orders.Count >= 10");  
IQueryable<Customer> query =
    db.Customers.Where("@0(it) and @1(it)", e1, e2); 
```

这在我的情况下很好用。但是，我有未知数量的 where 子句，这是在运行时决定的。

谁能告诉我如何创建一个通用的 Where 子句，例如

```
Where("@0(it) and @1(it) and... @n(it)", e1, e2, ... en); 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T13:00:15.450

`query`您可以在对象上附加其他运算符：

```
 query = db.Customers.Where( ... );
 query = query.Where( ... );
 query = query.Where( ... ); 
```

通过这种方式，您可以动态附加子句，并且您可以独立于它们的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:00:53.753

尝试这个;

[具有多个/未知条件的动态 linq 查询](https://stackoverflow.com/questions/6453420/dynamic-linq-query-with-multiple-unknown-criteria)

我有一个类似的问题，这是我使用的解决方案（并且仍在使用）

# c - 使用 memcpy 和 strtoul 获取乱码而不是数字

> ID：11189828
> 
> 赞同：0
> 
> 时间：2012-06-25T12:57:53.817
> 
> 标签：c, string, char, memcpy, strtol

我在 gcc 下编译了以下代码：

```
int parseMsg(const char *msg_to_parse, unsigned long *exp_input, unsigned long *sysTicks )
{
   int l_msg_size = strlen(msg_to_parse);
   if(l_msg_size <10)
          return -1;
    char l_exp_input_arr[10];
    char l_sys_ticks_arr[10];
    memcpy(l_sys_ticks_arr,msg_to_parse+12,10);

    memcpy(l_exp_input_arr,msg_to_parse,10);
   //l_msg_size = strlen(msg_to_parse);
    *sysTicks = strtoul(l_sys_ticks_arr,NULL,10);

   *exp_input = strtoul(l_exp_input_arr,NULL,10);

   return 0;
} 
```

我正在尝试以以下方式对其进行测试：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int parseMsg(const char *msg_to_parse, unsigned long *exp_input, unsigned long *sysTicks );

int main(void) {
char msg[] = "1234567890  59876543213";
unsigned long along1, along2;
along1 =0;
along2=0;
parseMsg(msg,&along1, &along2 );
printf("result of parsing: \n \t Along 1 is %lu \n \t Along 2 is %lu \n",along1, along2);
return 0;
} 
```

但是，我得到以下结果：

解析结果：Along 1 is 1234567890 Along 2 is 4294967295

为什么第二个 unsigned long 是错误的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T13:12:54.113

您提供的第二个整数太大而无法在架构的内存中表示。所以，根据它的 API，*strtoul*只是返回你 ULONG_MAX（在你的架构上=4294967295），同时将*errno 设置*为*ERANGE*

strtoul API 在这里：[http ://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/](http://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/)

**但是**，如果您给出较小的整数，它也可能会失败，因为*strtoul*仅在遇到非数字字符时才会停止解析。由于您没有确保这一点，因此您无法确定*strtoul*不会尝试解析您的字符串之后的内存中的任何内容。（所以假设随机，256 次中有 10 次出现转换错误）

用 \0 终止你的字符串，这样就可以了：

```
char l_exp_input_arr[11]; // +1 for \0
char l_sys_ticks_arr[11];

memcpy(l_sys_ticks_arr, msg_to_parse+12, 10);
l_sys_ticks_arr[10] = '\0';

memcpy(l_exp_input_arr, msg_to_parse, 10);
l_exp_input_arr[10] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:08:28.060

您需要使两个临时 char[] 变量长一个字符，然后使最后一个字符为 NULL。

# android - 来自 logcat 的 Android 电子邮件特定标签

> ID：11189829
> 
> 赞同：0
> 
> 时间：2012-06-25T12:57:58.193
> 
> 标签：android

我已经为 logcat 设置了一个特定的 TAG 来跟踪一个进程。现在我想通过电子邮件发送那个特定的标签。我已经准备好发送电子邮件了。我想知道如何获得特定的 TAG 而不是整个 logcat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:04:39.927

在我看来，使用 CatLog 或 LogViewer Lite（Google Play 上免费）是最好的，它允许您记录和过滤（即通过标签）日志并直接通过电子邮件从设备发送。

[目录：https: //play.google.com/store/apps/details?](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat) id= com.nolanlawson.logcat

LogViewer 精简版：[https ://play.google.com/store/apps/details?id=ukzzang.android.app.logviewer](https://play.google.com/store/apps/details?id=ukzzang.android.app.logviewer)

当然，您也可以使用 adb 和命令行在通过 USB 连接设备时使用 grep 并将日志输出到文件（请参阅[Filter output in logcat by tagname](https://stackoverflow.com/questions/6173985/filter-output-in-logcat-by-tagname)），但实际上上面提到的工具非常方便。

**更新：**

如果您希望它在没有交互的情况下自动化，那么下面线程中提到的这个库可能会很方便： [如何通过电子邮件发送 logcat？](https://stackoverflow.com/questions/3586938/how-to-send-logcat-via-email)，指的是[http://code.google.com/p/android-log-collector/](http://code.google.com/p/android-log-collector/)

# matlab - 圆柱轴上的 Matlab 3D 图

> ID：11189830
> 
> 赞同：3
> 
> 时间：2012-06-25T12:58:01.913
> 
> 标签：matlab, 3d, cylindrical

我已经运行了模拟，这些模拟为我提供了`X`与不同半径数量相对应的数据点，以及`Y`每个被评估的角度数量。这意味着我有需要绘制的`X`时间数据点。`Y`

我目前正在以非理想方式绘制它：我使用`x`和`y`轴作为`r`和`theta`轴。这意味着我的数据显示为正弦趋势，在笛卡尔网格上随半径增加，而不是它物理代表的圆。这就是我目前绘制数据的方式：

```
surf(r_val, th_val, v_val); 
```

我想做的是将我的数据绘制在圆柱轴上，例如函数的`polar()`，但在 R3 空间中。我宁愿不下载工具箱，也不愿修改现有的极地功能；如果没有其他解决方案，那么我显然最终还是会这样做。

谢谢你的帮助！G。

另外，我正在使用 Matlab 2012a

**编辑：**

r_val = 1x8 包含唯一半径的向量

th_val = 1x16 包含独特角度的向量

v_val = 8x16 矩阵，包含对应于每个位置的电压

**注意：（**回答后）

这个问题不存在真正理想的解决方案，因为 Matlab 目前不支持真正的极轴方法。[资源在这里找到](http://www.mathworks.com/support/solutions/en/data/1-1951J/index.html?product=ML&solution=1-1951J)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:07:18.613

在绘制坐标之前，您应该将坐标转换为笛卡尔坐标。MATLAB 具有用于执行坐标变换的内置函数。例如[`pol2cart`](http://www.mathworks.co.uk/help/techdoc/ref/pol2cart.html)，参见将极坐标或柱坐标转换为笛卡尔坐标。在您的情况下，您只需使用以下内容：

```
[x, y] = pol2cart(th_val, r_val);

surf(x, y, v_val); 
```

**编辑**：鉴于`th_val`和`r_val`是不同长度的向量，有必要在调用之前首先创建一个点网格`pol2cart`，沿线：

```
[R, T] = meshgrid(r_val, th_val);
[x, y] = pol2cart(T, R);
surf(x, y, v_val); 
```

# javascript - Node.js 类模块系统

> ID：11189831
> 
> 赞同：1
> 
> 时间：2012-06-25T12:58:07.290
> 
> 标签：javascript, node.js, asynchronous

我正在尝试在 node.js 中创建一个模块/类来测量异步执行时间，但不明白它有什么问题。我创建了以下类“Measure.js”

```
var Measure = module.exports = function(param_timeout, param_cb) {

    this.timeout = param_timeout;
    this.cb = param_cb;
}

Measure.prototype = {
    startDate: "0",
    timeout:"0",
    cb:null,

    start : function() {
        this.startDate = new Date();
        console.log('started');
    },

    stop : function() {
        var stopDate = new Date();
        this.cb(null,(stopDate-this.startDate));
    }
} 
```

我将它与以下代码一起使用：

```
var Measure = require('./Measure.js');
measure1 = new Measure(100,function(err,result){console.log('result: ' + result)});
measure1.start();
//do something 
measure1.stop(); 
```

它工作得很好。但是，如果我尝试这个：

```
var Measure = require('./Measure.js');
measure1 = new Measure(100,function(err,result){console.log('result: ' + result)});
measure1.start();
//do something 
setTimeout(measure1.stop,100); 
```

它不起作用并引发 TypeError：

```
TypeError: Object #<Object> has no method 'cb' 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T13:11:52.960

当您直接调用对象的方法时，方法`this`内部引用您的对象，但当您尝试将其用作参数时，`this`将引用全局对象（`global`或`window`）。

在你的情况下最好更换

```
setTimeout(measure1.stop,100); 
```

和

```
setTimeout(function() { measure1.stop(); }, 100); 
```

有关`this`行为的更多信息：http: [//bonsaiden.github.com/JavaScript-Garden/#function.this](http://bonsaiden.github.com/JavaScript-Garden/#function.this)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T13:14:58.747

可怕的 timeout-switch-context 错误再次出现！您会看到您所看到的，因为`this`setTimeout 调用的函数中的对象不是`measure1`- 它是`global`（= `window`，当此脚本在浏览器中执行时）。引用[MDN](https://developer.mozilla.org/en/DOM/window.setTimeout#The_%27this%27_problem)：

> 执行的代码`setTimeout()`在与调用它的函数不同的执行上下文中运行。因此，`this` 被调用函数的关键字将设置为`window`(or `global`) 对象，它与被`this`调用函数的值不同`setTimeout`。

顺便说一句，这很容易检查：

```
stop: function() {
  var stopDate = new Date();
  if (! this.cb) { 
    console.log(this); 
  } // *Window*/_display...
} 
```

...并修复：

```
setTimeout(function() { 
  measure1.stop(); 
}, 100); 
```

# wordpress - 建立一个Wordpress 中的表单 好的，所以我想要一个下拉选择表单，当在某个州被选中时，用户将被重定向到我在我的网站 (www.mysite.com/california) 上拥有的该州的页面

### 选择你的州

<select id="state"><option value="www.mysite.com/california">加利福尼亚 ID：11189833 赞同：0 时间：2012-06-25T12:58:07.230 标签：wordpress 回答 #1 赞同：1 时间：2012-06-25T13:47:31.230 你真的应该考虑<select>用按钮而不是这个。对于使用键盘或屏幕阅读器等辅助技术的人来说，这种行为真的很烦人。 回答 #2 赞同：1 时间：2012-06-25T13:41:20.413 为此，您将需要 js/jquery。Wordpress 有 jQuery，所以这样的东西就足够了： $('select#state').on('change', function() { window.location.replace($(this).children('option:selected').val()); }); 回答 #3 赞同：1 时间：2012-06-25T13:07:38.287 您将需要在 javascript 或 jquery 中进行重定向。 类似于以下页面上的建议： 如何创建一个下拉菜单，在选择时重定向到新页面？</option></select>

# php - 带有 Zend 的 PHP 弹出式表单

> ID：11189835
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:58:11.390
> 
> 标签：php, facebook

我使用 facebook 分享器。并且链接只是打开一个新标签。但我想让它弹出。我将 PHP 与 Zend 框架一起使用。

这是我的代码：

```
<a name="fb_share" target="_blank" type="button" href="https://www.facebook.com/sharer/sharer.php?s=100&p[title]=SOMETITLE&p[url]??=http://123.abc.com/&p[summary]=SOME DESCRIPTION">i-share on Facebook</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:24:41.450

您应该考虑使用 JavaScript 方法来执行此操作。共享者是旧的，并且已被“喜欢”按钮所取代。JavaScript 版本的文档可以[在这里找到](http://developers.facebook.com/docs/reference/dialogs/feed/)。

# magento - Magento 导出到 CSV 文件显示“错误 503”

> ID：11189836
> 
> 赞同：1
> 
> 时间：2012-06-25T12:58:11.943
> 
> 标签：magento, export, export-to-csv

早上好。

我已经有这个问题好几天了，一直在寻找解决方案，但我还没有找到一个解决方案。

问题是，我有这个 Magento 商店，一些网格可以导出到 CSV 文件，而另一些则显示：错误 503 服务不可用

暂停服务

上师冥想：

西ID：853411302

* * *

优化缓存服务器

我使用的 Magento 版本是 1.6.2。我想问题不在于 PHP 代码，因为显示的错误是这个通用错误，而不是 PHP 错误（我什至找到了用于导出文件的代码，它似乎没问题）。我想知道为什么会向我显示此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:48:38.033

这是与 Varnish Cache 相关的错误，我建议按照以下指南了解如何识别 XID 返回的内容，以便更深入地了解如何解决该问题：

*   [https://www.varnish-cache.org/docs/trunk/tutorial/troubleshooting.html#varnish-gives-me-guru-meditation](https://www.varnish-cache.org/docs/trunk/tutorial/troubleshooting.html#varnish-gives-me-guru-meditation)

# jsf - 如何为 h:graphicImage Primefaces 添加动作

> ID：11189837
> 
> 赞同：2
> 
> 时间：2012-06-25T12:58:13.053
> 
> 标签：jsf, primefaces

嗨，我有一个图形图像，我希望在单击图像时启动 backingBean 中的一个方法。下面是我正在使用的代码片段，但它不起作用。请帮忙。

```
<h:graphicImage value="../resources/images/delete_button.png"
onclick="editBean.deleteStudyPlan"
style="float:center;height: 18px; width:20px;"
title="Delete the studyplan"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T13:00:45.597

您需要将其包装在`<h:commandLink>`or中`<p:commandLink>`并在此处指定`action`。

```
<h:commandLink action="#{editBean.deleteStudyPlan}">
    <h:graphicImage ... />
</h:commandLink> 
```

或者，您可以将图像指定为命令链接或按钮的 CSS 背景图像。

`onclick`肯定不是 JSF 支持 bean 操作方法的方法表达式。它是一个 JavaScript 函数处理程序。JavaScript 是一种完全不同的语言，它在网络浏览器中运行，处理由 JSF 生成的 HTML 代码。

# ruby-on-rails-3 - 弹性搜索中的独立索引

> ID：11189838
> 
> 赞同：0
> 
> 时间：2012-06-25T12:58:14.550
> 
> 标签：ruby-on-rails-3, elasticsearch, tire

***更新：**重新定义了我想要做的事情。*

我有一个联系人模型，此联系人与我帐户中的所有其他模型一样属于一个帐户。我需要所有搜索，无论它们是全局的还是特定于模型的，只查询包含的帐户。有人告诉我，我可以使用自定义索引名称来做到这一点。我希望索引名称为“index-#{account-id}”。我将如何在我的活动模型中实现这一点？

```
class Contact < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  belongs_to :account

  mapping do
    indexes :first_name
    indexed :last_name
  end    

end

class Account < ActiveRecord::Base
    has_many :contacts
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:18:34.190

您可能想[在 Tyre 的问题上查看此评论，](https://github.com/karmi/tire/pull/92#issuecomment-6929988)该评论基本上介绍了使用 Tire 命名的“基于租户”索引命名的一些可能场景。我相信这就是你所追求的。

在 elasticsearch 本身中，您可以选择为每个帐户设置一个单独的索引、为每个帐户设置一个过滤和路由的索引别名、索引模板等，因此该工具包在该领域非常庞大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:29:30.243

您是指让每个帐户（用户？）在每个它自己的索引中物理上分开吗？这通常被称为“多租户” [http://en.wikipedia.org/wiki/Multitenancy](http://en.wikipedia.org/wiki/Multitenancy)

假设这确实是您打算做的事情：

过去有很多关于“需要”的说法（我假设您出于安全原因想要这个，我不熟悉您想要这个的其他原因，尽管我不是多租户应用程序的专家）用于分区每个帐户/用户的数据，而不是仅具有一个字段`accountid`，`Contact`并确保您的所有查询至少在`accountid`. IMO，一个精心设计的查询组件，例如，系统中使用的每个查询都继承自一个需要设置的“超级查询”，`accountid`在很多情况下就足够了。

即使您事先不知道将来哪些应用程序想要查询这些索引，您仍然可以通过说围绕 ES 拥有一个瘦 REST 服务并要求所有程序通过该服务与 ES 交互来强制执行上述操作。然后，您可以让此服务通过强制执行`accountid`或可能更好地通过`accountid`执行请求的当前登录用户推断 来处理这种类型的安全性。

如果您仍想追求多租户，请查看：[http](http://elasticsearch-users.115913.n3.nabble.com/Multi-tenacy-td471400.html) : //elasticsearch-users.115913.n3.nabble.com/Multi-tenacy-td471400.html（快速搜索此，也许周围有更好的东西）'Kimchy '（ES 的创建者）也在该线程中发表评论。

无论如何，在 ES 中拥有多租户的最佳方式可能是每个 account/user 有 1 个索引。在其中你可以有多个“类型”（一个 ES 构造），其中`Contact`可能是这样的类型。

[http://www.elasticsearch.org/guide/reference/mapping/](http://www.elasticsearch.org/guide/reference/mapping/) http://www.elasticsearch.org/guide/reference/api/search/indices-types.html

正如您所建议的那样，在您的模型中执行此操作可能不是 IMO 的正确方法。一般来说，你应该让你的领域模型远离存储后端的任何知识（包括存储数据的索引）

对我来说，更好的解决方案是，如前所述，拥有一个查询组件，其中包含基于帐户/用户选择正确索引的逻辑。使用上面的 rest-service 方法，动态索引名，正如您所建议的，可以从执行请求的登录用户中获得。

我意识到这可能不是您问题的直接答案，但我希望它仍然有用。

# android - 如何提高 Android WebView 性能？

> ID：11189841
> 
> 赞同：2
> 
> 时间：2012-06-25T12:58:21.677
> 
> 标签：android, performance, webview, android-webview

我正在构建一个应用程序来加载存储在我的 android 设备上的 HTML 文件。这些文件通常非常大（例如 6MB）。如果我加载这些 HTML 文件，显示它们需要很长时间（20 到 25 秒）。谁能给我一些关于如何改善这个加载时间的建议？到目前为止我尝试过的代码：

```
final WebView webView = (WebView) findViewById(R.id.webView1);
webView.loadUrl("file:///android_asset/content.html");
webView.getSettings().setCacheMode(<all cache modes>) 
```

我在 android 2.3 和 4.0 上试过这个，Android 4.0 的性能实际上比 2.3 差。

有关如何提高性能的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:15:36.687

真是一个广泛的讨论。您可能需要更具体。所以就到这里了......

1.  通常加快您的页面速度——http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

2.  如果一次加载多个文件异步加载--http://developer.android.com/reference/android/os/AsyncTask.html

3.  尽可能最小化图片或最后加载它们

4.  public void loadDataWithBaseURL (String baseUrl, String data, String mimeType, String encoding, String historyUrl) 并缓存它以供以后使用以更快地加载第二次或第三次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:14:30.463

好的，所以试试 loadData 方法，它可能会快一点。

```
String summary;

...//convert your file to a string and store in summary variable

webview.loadData(summary, "text/html", null); 
```

# ibm-midrange - 什么情况下OVRDBF会导致提示错误信息CPF5149？

> ID：11189842
> 
> 赞同：0
> 
> 时间：2012-06-25T12:58:23.553
> 
> 标签：ibm-midrange

我目前正在研究四个 CL 和 RLG 程序。调用堆栈如下：A->B->C->D 其中 A 是顶部调用者 CL 程序，D 是底部调用者 RPG 程序。程序 A 在文件上有一个带有 SHARE(*YES) 选项的 OVRDBF 语句，该语句用作程序 D 中的输出。现在我面临一个问题，即每当 D 尝试将记录写入此文件时，错误消息 CPF5149 是抛出告诉我 I/O 操作无效。如果我在程序 A 中注释此 OVRDBF 语句，则 D 可以毫无问题地将记录写入文件。那么，为什么这个 OVRDBF 会导致 RPG 程序中的 I/O 出现问题呢？如何解决？删除它可能不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:21:57.323

保持数据路径打开的`SHARE(*YES)`选项。[`OVRDBF`](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/ovrdbf.htm)如果调用堆栈中打开文件的第一个程序以只读方式打开它，那么它将对所有其他程序保持这种状态。

通常`SHARE(*YES)`仅在您想在将[`OPNQRYF`](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/opnqryf.htm)记录传递给另一个程序之前使用该命令过滤记录时使用。

* * *

**更新：**

您的示例中程序 B、C 和 D（以先打开文件为准）的打开属性将控制打开状态。

如果您使用`OPNQRYF`指定`OPTION(*ALL)`参数来强制它打开具有完整读/写/更新/删除属性的数据路径。

* * *

[IBM i 信息中心：共享开放数据路径](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasc/sc092507374.htm)

# windows-7 - Windows 7 (UAC) 不允许我的程序在另一个程序拥有的数据文件中写下。怎么做？

> ID：11189848
> 
> 赞同：0
> 
> 时间：2012-06-25T12:58:47.130
> 
> 标签：windows-7, vb6, windows-vista, compatibility, uac

我必须维护一个 VB6 软件，它基本上从第二个程序导出数据并将它们导入到关于第三个程序的数据文件中。所以，这个导入/导出工具在 Windows 95 到 XP 下运行了好几年，但是，现在，我必须更新它以支持 Vista 和 7……当它写到第三个程序的文件时它失败了。此时，我刚刚在 Windows 7 下进行了测试，但我想在 Vista 下也会如此。

这是详细的问题：

当我的程序尝试访问第三个程序的数据进行写入时，我收到此错误：“运行时错误'75'：路径/文件访问错误”。因此，这听起来像是一个 UAC 阻塞，因为我的程序试图获得访问权限以写入他不拥有的数据文件。然后，如果我以管理员权限或与 XP 兼容性运行我的程序，它可以工作：没有错误，并且第三个程序的数据文件被很好地修改。

此时我想知道如何以编程方式解决此错误（对我的程序来说是致命的，因为它的主要工作被阻止：导出/导入数据）：在安装期间（我正在使用 Inno Setup）或在运行时。

什么是正确的方法？以编程方式强制“XP兼容性”或提升我的程序以管理员权限启动？如何实现这一点以及何时（在安装期间或运行时）？清单是否可以更改此字段中的某些内容（此时从未使用过任何清单）？

此外，无论是哪种方式（XP 兼容性或管理员权限），UAC 都会在每次启动时警告用户系统更改：非常烦人:(

那么，如何让我的程序在 Windows 7 和 Vista 下像在 XP 下一样顺利运行，知道它除了写在第三方数据文件中（因为它是它的主要目的）别无选择？

等待您的光辉回复...

PS：另外（这可能很重要），我的程序本身并不知道数据文件的路径，但它是使用通用对话框选择它的用户。

* * *

好的，我回来有一些消息。我已经嵌入了一个清单，它使用 VB6 的清单创建器（马特在他的回复中指出的那个）执行 level="requireAdministrator" 。

如果我以管理员身份安装（在 Windows 7 下）我的程序，它会毫无问题地安装，然后程序会毫无问题地启动并完成其工作（读取和写入不属于我的程序的任何文件）非常顺利，没有任何问题问题。所以，在这种情况下完美！

尽管如此，如果我以简单用户身份登录，它在使用管理员密码询问权限后安装良好，然后程序毫无问题地启动，但是（这是剩下的问题）我再次陷入“路径/文件访问错误” （错误'75'）当读取或写入外部文件（不属于我的程序）时。

所以，这是我的另一个问题：如何解决这个以简单用户身份记录的错误？这是否意味着提升不起作用（而在其他情况下似乎对任何步骤都有效：安装、启动、读/写）仅在这种特定情况下？说到这里，心里有点乱……

编辑：嗯，我想我已经理解了一件事，但需要你的确认（或不确认）。我将调用我的程序 B。B 将读取/导入程序 A 拥有的数据，然后写入/导出到程序 C 拥有的数据。

我的困惑是我重新安装了 B 被记录为简单用户，而不是程序 A 和 C 仍然安装被记录为管理员。因此，当 B 读取有关 A 的数据时，尽管有提升，但它失败了，因为这些 A 的数据归管理员所有（即使这些 A 的数据不在用户特定的路径中，但是，说“C:\email_data ”）。

如果我重新安装以简单用户身份记录的所有三个程序，它就可以工作（没有警告也没有错误）。

所以，我重新提出我的问题：既然提升工作（这应该允许程序获得管理员权限），为什么程序 B（由用户安装）无法读取有关程序 A（由管理员安装）的数据？我是否应该在 Inno Setup 过程中添加一些内容以仅以管理员身份安装我的程序（知道我对 A 和 C 程序的安装方式没有任何影响）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:39:32.267

启用 UAC 后，该`%Program Files%`目录在 Windows 7 下受到保护（您需要提升权限才能直接写入该目录）

这是您遇到的问题。

为了让“旧版”程序更无缝地工作（即没有可见错误），Windows 7 使用[文件夹重定向](http://msdn.microsoft.com/en-us/library/bb756960.aspx)。这允许您的旧应用程序读取和写入程序文件目录中的内容的副本。

如果您使用清单，这会告诉 Windows 您的应用程序可识别 UAC，因此不会发生文件夹重定向，但您需要提升（管理员）权限才能读取/写入程序文件。

有大量关于如何使用清单的示例。我个人的偏好是[Manifest Creator](http://www.vbforums.com/showthread.php?t=606736)。

如果您将其设置为`requestedExecutionLevel`，`"requireAdministrator"`那么它将读取和写入实际文件夹，但当您的应用程序运行时，系统会提示您进行 UAC 提升。

解决方案实际上是不读写程序文件位置，而是使用另一个位置。查看[此堆栈溢出问题](https://stackoverflow.com/questions/4273424/where-should-i-store-application-specific-settings)以获取解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:16:46.130

您可以使用外部清单文件 (myapp.exe.manifest) 或使用工具在 exe 和资源中包含 manfiest。

有很多可用的内容，只需谷歌它。从[这里](http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware)我抓取了一个示例清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
        <security>
            <requestedPrivileges>
                <requestedExecutionLevel level="asInvoker" uiAccess="false"/>
            </requestedPrivileges>
        </security>
    </trustInfo>
</assembly> 
```

您需要将级别更改为“requireAdministrator”，这将在用户启动应用程序时提示用户权限（取决于他们的 UAC 设置）。

# html - 当 P 是相对的儿子时，将绝对父 P 拉伸到其子宽度

> ID：11189849
> 
> 赞同：1
> 
> 时间：2012-06-25T12:58:50.540
> 
> 标签：html, css, layout

看这里：http: [//jsfiddle.net/QTrat/10/](http://jsfiddle.net/QTrat/10/)

我想将红色框拉伸到浮动子项的组合宽度。

意思是，它应该是：

```
child child child 
```

代替

```
child
child
child 
```

我该怎么做？

只要布局保持不变，我不介意完全更改代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:05:46.437

将其从浮动更改为`display: inline-block`，并给父级`white-space: nowrap`：

```
.middle-parent{
    background-color: red;
    position: absolute;

    white-space: nowrap;                /* This */

    left: 0;            
}

.floated-child{
    display:inline-block;                     /* And this */

    background-color: beige;
    margin: 0 5px;
} 
```

更新小提琴：http: [//jsfiddle.net/sveinatle/QTrat/12/](http://jsfiddle.net/sveinatle/QTrat/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:08:38.190

只要`position:absolute;`从`.middle-parent`
你身上删除就会发现[这个](http://jsfiddle.net/QTrat/13/)。它可能会帮助你。

# dependencies - Maven 无法从档案库解决项目的依赖关系

> ID：11189850
> 
> 赞同：3
> 
> 时间：2012-06-25T12:58:53.463
> 
> 标签：dependencies, maven-3, archiva

我们使用archiva和maven很长时间了。到目前为止一切正常。一位新开发人员在我们公司开始工作，当他尝试设置他的环境时，他得到了这个错误：

```
13:41:50  [ERROR] Failed to execute goal on project our_project-util: Could not resolve dependencies for project net.corpintra.our_project:our_project-util:jar:2012.1: Failed to collect dependencies for [net.corpintra.our_project:our_project-mda:pom:2012.1 (runtime?), commons-beanutils:commons-beanutils:jar:1.8.3 (compile), org.jboss.logging:jboss-logging:jar:3.1.1.GA (compile), commons-lang:commons-lang:jar:2.6 (compile), com.jcraft:jsch:jar:0.1.38 (compile), org.quartz-scheduler:quartz:jar:2.1.0 (compile), aspectj:aspectjrt:jar:1.5.3 (compile), jboss:jboss-j2ee:jar:4.2.2.GA (provided), commons-net:commons-net:jar:1.4.1 (compile), org.apache.commons:commons-compress:jar:1.3 (compile), org.apache.commons:commons-exec:jar:1.1 (compile), org.codehaus.xfire:xfire-core:jar:1.2.6 (compile), org.codehaus.xfire:xfire-aegis:jar:1.2.6 (compile), org.apache.activemq:activemq-all:jar:5.5.0 (compile), org.apache.activemq:activemq-pool:jar:5.5.0 (compile), net.corpintra.client.util:rar:jar:1.1 (compile), org.bouncycastle:bcprov-jdk15on:jar:1.47 (compile), org.bouncycastle:bcpg-jdk15on:jar:1.47 (compile), com.lowagie:itext:jar:2.1.7 (compile), commons-io:commons-io:jar:2.0.1 (compile), log4j:log4j:jar:1.2.16 (compile)]: Failed to read artifact descriptor for org.andromda.profiles.uml2:andromda-profile:xml.zip:3.4-SNAPSHOT: Could not transfer artifact org.andromda:andromda:pom:3.4-20120529.073812-11 from/to archiva.default (http://svn.ssc-services.de/archiva/repository/internal/): Failed to transfer file: http://svn.ssc-services.de/archiva/repository/internal/org/andromda/andromda/3.4-SNAPSHOT/andromda-3.4-20120529.073812-11.pom. Return code is: 500, ReasonPhrase:Unable to fetch artifact resource.. -> [Help 1]
13:41:50  [ERROR] 
13:41:50  [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
13:41:50  [ERROR] Re-run Maven using the -X switch to enable full debug logging.
13:41:50  [ERROR] 
13:41:50  [ERROR] For more information about the errors and possible solutions, please read the following articles:
13:41:50  [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
13:41:50  [ERROR] 
13:41:50  [ERROR] After correcting the problems, you can resume the build with the command
13:41:50  [ERROR]   mvn <goals> -rf :our_project-util 
```

我们使用档案作为本地存储库。Archiva 包含所有外部项目和我们内部的东西。如果新开发者从我这里得到一个 .m2 的 repo，一切都很好。如果他删除我的 .m2 存储库，他会得到同样的错误。如果我删除我的存储库，也会发生同样的情况。

他的 settings.xml 看起来像这样：

```
<settings>
    <mirrors>
        <mirror>
            <id>archiva.default</id>
            <url>http://svn.our_company.com/archiva/repository/internal/</url>
            <mirrorOf>*</mirrorOf>
        </mirror>
    </mirrors>
    <profiles>
            [... some profile stuff ...]
    </profiles>
</settings> 
```

有谁知道这个问题并且可以告诉我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:08:57.340

嗯。基于给定的错误消息

```
Return code is: 500, ReasonPhrase:Unable to fetch artifact resource.. -> [Help 1] 
```

这意味着内部服务器错误您在访问存档时遇到问题...您是否尝试通过浏览器访问给定的工件？

# html - 显示 Twitter 帐户的 Twitter 关注者

> ID：11189852
> 
> 赞同：-1
> 
> 时间：2012-06-25T12:59:02.207
> 
> 标签：html, api, twitter, twitter-follow

如何获取任何 Twitter 帐户的关注者数量？我想在我的网页中显示 4 个不同 Twitter 帐户的关注者数量，目的是确定谁拥有最多的关注者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:01:44.343

推特 API 文档：

[https://dev.twitter.com/rest/public](https://dev.twitter.com/rest/public)

[https://dev.twitter.com/rest/reference/get/users/show](https://dev.twitter.com/rest/reference/get/users/show)

```
GET users/show
https://api.twitter.com/1.1/users/show.json 
```

# memory-management - newLISP 是否使用垃圾收集？

> ID：11189869
> 
> 赞同：10
> 
> 时间：2012-06-25T13:00:35.793
> 
> 标签：memory-management, garbage-collection, lisp, newlisp

[这个页面](http://www.newlisp.org/MemoryManagement.html)让我很困惑。

它说：

> newLISP 中的内存管理不依赖于垃圾回收算法。内存没有标记或引用计数。相反，在创建内存对象后立即决定是否删除新创建的内存对象。
> 
> newLISP 遵循一个仅引用 (ORO) 规则。一旦 newLISP 在表达式评估期间达到更高的评估级别，每个未被符号引用的内存对象都将过时。newLISP 中的对象（不包括符号和上下文）通过值复制传递给其他用户定义的函数。因此，每个 newLISP 对象只需要一个引用。

再往下看，我看到：

> 所有列表、数组和字符串都通过引用传入和传出内置函数。

我无法理解这两个。

newLISP 怎么能“不依赖垃圾收集算法”，但通过引用传递东西？
例如，在循环引用的情况下它会做什么？！

LISP甚至*有可能*不使用垃圾收集，而不会使性能下降吗？（我假设您始终可以按值传递事物，或者您始终可以在您认为可能有必要时执行全堆扫描，但在我看来，这会严重损害您的性能。）
如果是这样，它会如何处理循环引用？如果不是，它们是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:05:04.300

也许阅读[http://www.newlisp.org/ExpressionEvaluation.html](http://www.newlisp.org/ExpressionEvaluation.html)有助于更好地理解[http://www.newlisp.org/MemoryManagement.html](http://www.newlisp.org/MemoryManagement.html)论文。关于循环引用：它们在 newLISP 中不存在，无法创建它们。性能问题在该内存管理论文的一个子章节中得到解决，这里是：http: [//www.newlisp.org/benchmarks/](http://www.newlisp.org/benchmarks/)

可能正在使用 newLISP 进行工作和试验——即尝试创建循环引用——将解决大部分问题。

# php - CodeIgniter .htaccess 和 base_url() 问题

> ID：11189875
> 
> 赞同：0
> 
> 时间：2012-06-25T13:00:52.020
> 
> 标签：php, .htaccess, codeigniter, base-url

我最近开始研究 CodeIgniter，我遇到了一些与 .htaccess 和 base_url() 函数有关的问题。我希望这只是一个菜鸟错误并且有一个快速修复！

几乎发生的事情是，现在有了 .htaccess，index.php 就从 url 中消失了，这太棒了，但现在我在将样式表和 js 文件与我的模板链接时遇到了问题。

在我阅读/观看的所有教程中，它们都包含了 .htaccess，然后仍然设置它们的 base_url()，然后使用“link_tag(href);” 链接他们的 .css 但现在我在 url 上加倍了。例如，当我尝试添加样式表时，它查找的路径是：

```
http://www.mysite.com/site/www.mysite.com/site/css/stylesheet.css 
```

所以我的第一个想法就是删除我的 base_url() 以便 .htaccess 做所有事情但它不起作用。使用 .htaccess，我可以拥有一个没有 index.php 但没有样式表或 JavaScript 文件链接的站点，或者我可以拥有一个具有一些样式的站点，但处理 index.php。必须有一种方法可以同时工作吗？

另外，我没有使用 link_tag() 进行了修复，我只是回显了一个正常的链接标签，该标签在开始时仍然可以正常工作：

```
http://www.mysite.com/ 
```

但是，如果登录不正确并且我重定向以再次加载登录视图，则样式会消失，因为它现在使用的相对路径来自：

```
http://www.mysite.com/user/login 
```

提前致谢！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:04:09.103

尝试

```
RewriteEngine on
RewriteCond $1 !^(css|js)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

在 as传递给 codeigniter 的`www.mysite.com/css/mycss.css`地方，通常会检索so 。`www.mysite.com/something`

要随身携带 css 文件，这应该`base_url()`会`base_url("css/mycss.css")`导致`"http://www.mysite.com/css/mycss.css"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:29:11.980

更好的 .htaccess 规则集是：

```
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

这不允许访问您的系统和应用程序文件夹，但允许访问所有其他文件，例如：/js/*、/css/*、/img/* 等。

# javascript - 如何在客户端的 Javascript 中包含 Javascript 脚本？

> ID：11189878
> 
> 赞同：2
> 
> 时间：2012-06-25T13:00:59.270
> 
> 标签：javascript, html, browser

我正在制作一个 HTML5 游戏引擎。只有一个文件应该包含在 HTML 文件中，即 engine.js。该脚本应该创建一个全局 Engine 对象，用户可以在其他脚本中使用该对象。Engine 对象是引擎中所有类和函数的包装器，但是，我想将引擎分成不同的文件。我认为如果所有都应该由用户包含，那会有点草率，那么我怎样才能让 engine.js 自动包含呢？

（类似于 Node.js 中的 require() 。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:04:37.153

看看 [RequireJS](http://requirejs.org/)。这是一个符合您要求的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:15:09.493

您拥有的一种选择是使用 javascript 到 javascript 编译器，例如[Closure Tools](https://developers.google.com/closure/compiler/)。使用 RequireJs，您的客户端仍将创建多个 http GET 来获取每个文件（IIRC），使用关闭工具，您的单独 javascript 文件将合并为一个（也缩小并去除死代码。）

这有优缺点，其中一些缺点包括，

*   减少用户缓存的重用
*   如果您更改任何一个文件，则完全重新加载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:18:32.013

纯 JavaScript 方法并不像您想象的那么简单，因为 JS 只有在飞行前检查完成后才能发挥其魔力。包括带有 JavaScript 的脚本是可能的；但是，使用“全局范围”比其他方式更加禁止使用。

```
window.onload = function()
{
    var newScript = document.createElement('script');
    newScript.type = 'text/javascript';
    newScript.src = 'scripts/yourScript.js';
    newScript.onload = yourNormalOnload;
    // or newScript.onreadystatechange = yourNormalOnload;
    document.body.appendChild(newScript);
}

function yourNormalOnload()
{
    //use whatever functions declared in yourScript.js here
} 
```

在此示例中，`yourNormalOnload`函数将是您的脚本，但为了能够访问您即时获得的脚本，您必须将其全部包装在一个回调函数中，一旦包含的脚本被加载，该函数就会被调用。值得庆幸的是，附加脚本会触发`onload`or`onreadystatechange`事件，因此您可以监听它。

* * *

您可能想阅读[此](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)响应，代码几乎相同，但提供的解释比我做的要多得多。

# php - php循环遍历关联数组

> ID：11189879
> 
> 赞同：1
> 
> 时间：2012-06-25T13:01:00.380
> 
> 标签：php, associative-array

在 Stackoverflow 上编辑这段代码，我真的很接近得到我需要的结果。

所以我把这段代码贴在这里：

```
$friends = $facebook->api('/me/friends');
if(!empty($friends['data'])){
$size = variable_get('facebook_graph_pic_size_nodes','square');
$protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';
    foreach($friends['data'] as $data){
        $fbid = $data['id'];
        $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 
    } 
```

`$fbfriendlikes`输出给我一个像这样的数组：http : [//penelope-ns.net/fb/fig.jpg](http://penelope-ns.net/fb/fig.jpg)

我需要做的是将名称保存在一个`$return`值中，所有名称。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:08:29.020

这应该有效。

```
$dataArray = $fbfriendlikes[$data['id']]['data'];
$result = "";
foreach($dataArray as $item){
    $result .= " ".$item['name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:11:55.290

这是你想要的吗？

```
$friends = $facebook->api('/me/friends');
$result= array();
if(!empty($friends['data'])){
    $size = variable_get('facebook_graph_pic_size_nodes','square');
    $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';

    foreach($friends['data'] as $key => $data){
        $fbid = $data['id'];
        $result[$key] = $data;
        $fbfriendlikes[$fbid] = $facebook->api('/'.$fbid.'/likes'); 
    }
} 
```

# java - 由于输入结束，杰克逊未能将空数组映射到没有内容映射到对象

> ID：11189882
> 
> 赞同：1
> 
> 时间：2012-06-25T13:01:03.287
> 
> 标签：java, json, jackson

我向 api 发送查询并使用 Jackson 将 json 结果映射到我的类。当我得到一些结果时它工作正常，但是当没有结果时它会失败

```
java.io.EOFException: No content to map to Object due to end of input
at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2766)
at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2709)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1854)
at com.jthink.discogs.query.DiscogsServerQuery.mapQuery(DiscogsServerQuery.java:382)
at com.jthink.discogs.query.SearchQuery.mapQuery(SearchQuery.java:37)* 
```

但问题是 api 根本没有返回任何内容，所以我不明白它为什么会失败。

这是查询：

```
http://api.discogs.com/database/search?page=1&type=release&release_title=nude+and+rude+the+best+of+iggy+pop 
```

这就是我得到的

```
{
    "pagination": {
        "per_page": 50,
        "pages": 1,
        "page": 1,
        "urls": {},
        "items": 0
    },
    "results": []
} 
```

这是我试图映射到的顶级对象

```
public class Search
{
    private Pagination pagination;
    private Result[] results;

    public Pagination getPagination() {
        return pagination;
    }

    public void setPagination(Pagination pagination) {
        this.pagination = pagination;
    }

    public Result[] getResults() {
        return results;
    }

    public void setResults(Result[] results) {
        this.results = results;
    }
} 
```

我猜这个问题与返回的结果数组为空白有关，但看不出我做错了什么

编辑：下面的评论是正确的，虽然我通常会收到

```
{
    "pagination": {
        "per_page": 50,
        "pages": 1,
        "page": 1,
        "urls": {},
        "items": 0
    },
    "results": []
} 
```

在这些情况下没有问题，但有时我似乎只是得到一个空字符串。现在我想知道问题是否在于我如何从输入流中读取

```
 if (responseCode == HttpURLConnection.HTTP_OK)
        InputStreamReader in= new InputStreamReader(uc.getInputStream());
        BufferedReader    br= new BufferedReader(in);
        while(br.ready())
        {
            String next = br.readLine();
            sb.append(next);
        }
        return sb.toString();
  } 
```

虽然我在收到响应代码之前不阅读，但是否有可能我第一次调用 br.ready() 时我在它准备好之前调用它，因此我不阅读输入

编辑2：

将上面的代码更改为简单

```
 String line;
        while ((line = br.readLine()) != null)
        {
            sb.append(line);
        } 
```

解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:52:32.503

虽然已经有一个解决方案，但我建议您首先创建替代方案，`JsonParser`然后查看是否有任何输入，如果有，请使用数据绑定。这比逐行读取输入，构造一个字符串，然后将其交给解析器要快得多。

```
JsonParser jp = jsonFactory.createJsonParser(uc.getInputStream());
Search result = null;
if (jp.nextToken() != null) { // end-of-input
  result = jp.readValueAs(Search.class);
}
jp.close();
return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:14:10.917

将上面的代码更改为简单

```
 String line;
        while ((line = br.readLine()) != null)
        {
            sb.append(line);
        } 
```

解决了这个问题。

# jquery - keypress 事件阻止所有键盘键

> ID：11189889
> 
> 赞同：0
> 
> 时间：2012-06-25T13:01:22.443
> 
> 标签：jquery, keypress, jquery-events

```
$(document).keypress(function (e) {
    if (e.which == 13) {
        filtruj();
        return false;
    }
    return false;
}); 
```

我想`filtruj()`在用户按下`Enter`键并阻止页面提交时调用。

通常这个函数是通过点击`<a href="#" id="filterButton" onclick="filtruj();" class="t-button t-grid-add">Filtruj</a>`元素来调用的。

相反，我无法在表单字段中的任何地方键入内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:04:24.363

删除最后一个`return false`，您将阻止输入所有键。

```
$(document).keypress(function (e) {
    if (e.which == 13) {
        filtruj();
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T13:03:12.177

删除最后一个`return false;`

它将导致 a `e.preventDefault()`，顺便说一句，在您的第一种情况下也应该足够了。

`return false;`也会导致`e.stopPropagation()`，你不需要。

# html - chrome 扩展将读取特定标签内的文本？

> ID：11189890
> 
> 赞同：1
> 
> 时间：2012-06-25T13:01:25.200
> 
> 标签：html, google-chrome-extension, tags

我正在尝试创建 chrome 扩展，它将从网页中读取特定标签内的文本......
但无法读取值
我需要在标签定义中选择文本，不包括 html 标签......
这里我想从标签“定义”

**输出**：是一种压倒性的想要拥有某些东西的冲动，通常与金钱有关，
假设网页是这样的

```
<div id="definition">
<div class="section blurb">
<p class="short"><i>Greed</i> is an overwhelming urge to have <i>more</i>
 of something
<p class="long"><i>Greed</i> is often connected with money</p>      
</div>  
</div> 
```

这就是我正在尝试的 popup.html

```
<script>
  var newwin = chrome.extension.getBackgroundPage();
      newwin.get(); 
</script> 
```

背景.html

```
 <Script>

    function get()
    {
    var myDivObj = document.getElementById("definition");
    if ( myDivObj ) {
       alert (myDivObj.innerHTML); 
    }else{
       alert ( "Alien Found" );
    }
    }

    </Script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:15:51.180

我将我的脚本从背景页面移动到内容脚本，它就像魅力一样工作......

但只是想知道为什么 dint 在后台页面中工作..？

# mysql - MySQL 查询删除位于 ExpressionEngine 中三个表中的 200,000 个垃圾邮件成员

> ID：11189895
> 
> 赞同：3
> 
> 时间：2012-06-25T13:01:32.080
> 
> 标签：mysql, expressionengine

我的一个 ExpressionEngine 网站遇到了垃圾邮件成员问题。我浏览了受影响的成员组，并写下了我想要保存的每个成员的 member_id 编号。我希望从同一个 group_id 中删除所有其他成员。成员数据存储在 3 个不同的表中。这是我正在寻找的一个等式，但使用的是 MySQL 查询语言：

```
FROM tables = exp_member_data, exp_member_homepage, exp_members<br>
IF group_id = 5<br>
AND NOT member_id = 5, 6, 10, 107, 267, etc... <br>
DELETE remaining rows 
```

任何帮助是极大的赞赏！！

* * *

***编辑**

谢谢@Romil

这是有效的最终结果，因为 group_id 不在两个表中：

```
DELETE FROM `exp_member_homepage`, `exp_member_data`
WHERE member_id not in ( 5, 10, 11, 15 )

***** be sure to add members from ALL member groups 
```

和

```
DELETE FROM `exp_members`
WHERE group_id = 5
AND member_id not in ( 5, 10, 11, 15 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:03:56.930

```
Delete from mytable where  group_id = 5
AND member_id not in ( 5, 6, 10, 107, 267) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T22:11:50.323

我发现的最佳方法是在 ExpressionEngine 社区成员 Bhashkar Yadav 的[Sidd3](http://www.sidd3.com/mass-delete-members-in-expressionengine/)

# c# - Windows Phone 7 本地数据库访问错误

> ID：11189896
> 
> 赞同：0
> 
> 时间：2012-06-25T13:01:35.313
> 
> 标签：c#, windows-phone-7, linq-to-sql

这是我的代码：

```
if (!appdb.DatabaseExists())
{
    appdb.CreateDatabase();
}

var income = from p in appdb.Incomes select p.Amount;
var expense = from q in appdb.Expenses select q.eAmount;

double di = 0;
if (income != null)
{
    foreach (var i in income)
    {
        di += i;
    }
}

double de = 0;
if (expense != null)
{
    foreach (var d in expense)
    {
        de += d;
    }
} 
```

appdb 中有两个表（收入和费用）都具有相同的列。我能够从收入表中插入和检索数据，但在`foreach(var d in expense)`. 错误消息是“指定的表不存在。[费用]”，错误代码是“-2147467259”。请！任何人都可以解释为什么我会收到此错误。

# java - 检索作业和/或进程

> ID：11189898
> 
> 赞同：1
> 
> 时间：2012-06-25T13:01:37.193
> 
> 标签：java, playframework, processbuilder, playframework-1.x

有没有一种简单的方法来检索工作并检查例如 Play 的状态？我有一些运行很长时间的编码作业/下载作业。在某些情况下，我想取消它们。

有没有办法检索工作列表或其他东西？

例如，一个作业使用 ProcessBuilder 调用 FFMPEG 编码器。我希望能够获得这份工作并在不需要时终止该进程（例如，上传了错误的文件并且不想等待一个小时才能完成）。如果我能掌握那个工作，那么我也可以进入这个过程。

我正在使用 Play 1.2.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:30:00.507

请参阅 JobsPlugin.java 以了解如何列出所有已调度的作业。

获取当前执行的任务更加棘手，但您可以通过检查 Job 类并在自定义 Job 中调用方法告诉他取消来在 JobsPlugin.scheduledJobs 列表中找到您的工作

就像是

```
for (Job<?> job : JobsPlugin.scheduledJobs) {
    if (job instanceof MyJob) {
      ((MyJob) job).cancelWork();
    }
} 
```

其中 cancelWork 是您的自定义方法

# iphone - 根据设备视图大小显示 Epub Contnet

> ID：11189903
> 
> 赞同：0
> 
> 时间：2012-06-25T13:01:44.717
> 
> 标签：iphone, objective-c, ios, uiwebview, epub

我在 epub 阅读器创作中工作。遵循我所做的事情，

1.  解压 .epub 文件

2.  从中我读取了基于 .ncx 文件的目录

3.  我显示内容 uiwebview。（如果我想显示第 1 章表示第 1.xml 文件的完整内容以 webview 可滚动状态显示）。

4.  我使用 UISwipeGestureRecognizer 进行基于 .opf 文件的页面导航。

基于这些东西，我可以看到 .epub 文件处于 uiwebview 可滚动状态。

现在我想做以下事情（在uiwebview中）：

1.根据视图大小显示内容。

2.根据用户要求显示列数。

3.相应地显示页码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:41:06.827

1）对于你的第一个问题，我知道你想要根据你的大小显示页面

试试这个java脚本

```
In webViewDidFinishLoad

NSString *insertRule1 = [NSString stringWithFormat:@"addCSSRule('html', 'padding: 0px; height: %fpx; -webkit-column-gap: 0px; -webkit-column-width: %fpx;')", _webview.frame.size.height, _webview.frame.size.width]; 
```

2）用于计算章节中的页数

```
 In webViewDidFinishLoad

 int totalWidth = [[_webview stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollWidth"] intValue];
    ttlChapterPage = (int)((float)totalWidth/_webview.bounds.size.width); 
```

# java - 使用 Spring 的线程安全、无状态设计

> ID：11189907
> 
> 赞同：6
> 
> 时间：2012-06-25T13:02:15.823
> 
> 标签：java, spring, thread-safety, scalability, stateless

我假设如果实例变量由 Spring IOC 管理，并且是单例，那么设计可以称为无状态和线程安全。因此，这种类型的设计可以扩展到集群服务器。我的假设是否正确，如下所述？

```
@Repository("myDao")
public class MyDao implements Dao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    @Value("${sqlFoo}")
    private String foo;

    @Override
    public Integer getMyInt(String str) {
      return jdbcTemplate.queryForInt(foo, str);
    } 
```

然后将其注入：

```
@Service("myService")
public class MyServiceImpl {

    @Resource(name = "myDao")
    Dao dao;

    @Override
    @Transactional(readOnly = true)
    public int getScore(String str) {
      return dao.getMyInt(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T13:07:13.720

Spring bean 不是无状态的，因为它们具有状态（字段）。从技术上讲，它们甚至不是不可变的，因为您可以随时更改注入的字段。

`final`但是，您可以通过使用字段和构造函数注入轻松地使 Spring bean 不可变。从可扩展性的角度来看，这种状态也没有问题。如果您的 bean 包含随时间变化的可变值，则这是集群时的主要问题。但在 Spring 服务中，通常只包含在引导时注入的依赖项。所以它们实际上是无状态的和不可变的。

运行同一个 Spring 应用程序的服务器数量无关紧要 - bean 和依赖项本身是安全的。*但是*，如果您的 Spring bean 包含计数器、缓存、可变映射等 - 您需要考虑它们。

# xaml - 导航到 Windows8 Metro 应用程序的后台后如何将值重新分配给文本框

> ID：11189908
> 
> 赞同：0
> 
> 时间：2012-06-25T13:02:17.807
> 
> 标签：xaml, windows-8, windows-runtime, microsoft-metro, winrt-xaml

我在 windows8 Metro 应用程序中创建了两个页面 Page1.xaml 和 Page2.xaml。

我在 Page1.xaml 中创建了一个文本框和超链接。在 Page1.xaml 的文本框中输入一些文本后单击该超链接按钮。然后它导航到 Page2.xaml。在 Page2.xaml 中，我将显示在 Page1.xaml 文本框中输入的文本。

在来到 Page2.xaml 之后，我单击返回按钮以转到上一页 Page1.xaml。在这里，我想在我之前输入的文本框中显示文本。

但是单击后退按钮时出现错误。

您能否提供在 Page1.xaml 的 TextBox 中显示文本的解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:02:38.773

使代码在不同脚本范围内可用的一种方法是使用 WinJS 命名空间。

例如，在 page1.js 中，您将拥有：

```
(function(){
    function setText(){
        var mytext = "";

        WinJS.Namespace.define("page1", {
           text: mytext 
        });
    }
})(); 
```

在 page2.js 中，您可以将文本放在该命名空间中：

```
(function(){

   page1.text = "page 2 text!";

})(); 
```

回到第 1 页，您可以稍后检索该值：

```
(function(){

    function setText(){
        var mytext = "";

        WinJS.Namespace.define("page1", {
           text: mytext 
        });
    }

    function getText() {
      document.querySelector("#myTextField").value = page1.text;
    }
})(); 
```

我建议对你在命名空间中放置的内容更正式一些，但这是一种方法。

# castle-windsor - Castle Windsor bug：通过子容器解析单例

> ID：11189912
> 
> 赞同：3
> 
> 时间：2012-06-25T13:02:43.857
> 
> 标签：castle-windsor, asp.net-web-api, castle

尝试断言时，这将失败并出现 ObjectDisposedException：

```
 [Test]
    public void Resolve_SingletonAndDisposeChildContainer_ShouldNotDisposeSingleton()
    {
        // arrange
        var container = new WindsorContainer();
        container.AddFacility<TypedFactoryFacility>();

        container.Register(Component.For<ISomeFactory>().AsFactory());
        container.Register(Component.For<A>());

        // uncomment the line below and the test will not fail
        //container.Resolve<ISomeFactory>();

        var childContainer = new WindsorContainer();
        container.AddChildContainer(childContainer);

        // act
        var someFactory = childContainer.Resolve<ISomeFactory>();
        container.RemoveChildContainer(childContainer);
        childContainer.Dispose();

        someFactory = container.Resolve<ISomeFactory>();

        // assert
        Assert.That(someFactory.Create(), Is.Not.Null);
    } 
```

原因是（可能）因为单例由子容器中的生活方式管理器处理，因此被丢弃。这会导致 MVC Web API 中的子容器处理出现一些问题，因此我非常渴望找到解决方案。

有谁知道这个问题的干净解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T01:19:20.913

这确实是一个错误。[我把它放在问题跟踪器](http://issues.castleproject.org/issue/IOC-345)中。它已固定在主干中，并将在 v3.1 中修复

# php - 使用 curl，但是我的数组不会发布并且内容类型标头不会发送

> ID：11189913
> 
> 赞同：0
> 
> 时间：2012-06-25T13:02:45.767
> 
> 标签：php, xml, post, curl

这是我执行 POST 的代码：

```
$url = "http://www.xxxxxxxxxxx.com/dfeed/index.cfm"; //where to send it
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE, 1); // set url to post to
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // return into a variable
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml; charset=ISO-  8859-1'));
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 40); // times out after 4s
curl_setopt($ch, CURLOPT_POSTFIELDS, $data); // add POST fields
curl_setopt($ch, CURLOPT_POST, 1);
$result = curl_exec($ch); // run the whole process
echo $result;
//echo curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close ($ch); 
```

我的帖子数组以相同的几个（手动定义）条目开始，如下所示：

```
$data[0] = "<?xml version='1.0' encoding='ISO-8859-1'?>\n";
$data[1] = "<rss xmlns:g='http://base.google.com/ns/1.0' version='2.0'  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' 
```

xsi:noNamespaceSchemaLocation='http://www.xxxxx.com/dFeed/schemas/FeedSchema1.0.xsd'>\n";

其余的填充在这样的循环中：

```
array_push($data, "\t<item>\n"); 
```

服务器的响应表明与我设置的内容类型不同，并且还表明它没有收到任何信息，所以一定有问题：

```
HTTP/1.1 400 Bad Request Transfer-Encoding: chunked Content-Type: text/htmlServer: Microsoft-IIS/7.0 X-XXX Server: Web2 Date: Mon, 25 Jun 2012 12:49:53 GMT Bad Request
Error: Not XML
Content received: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:21:04.400

字符集看起来像是其中有空格或其他东西，不确定这是刚刚进入 SO 还是实际上在您的代码中。

你真的需要在这个地方添加 \t 和 \n 吗，如果你不这样做，服务器不会关心。

尝试对 post 数组进行 implode() 处理，然后只发送一个 XML 字符串。

没有明确的答案，但希望朝着正确的方向发展。

让我们知道你的进展如何，祝你好运。

# magento - 在 Magento 1.6 中使用单独的样式表进行多发货结帐

> ID：11189915
> 
> 赞同：0
> 
> 时间：2012-06-25T13:02:52.430
> 
> 标签：magento, checkout

目前，我正在我的一个运行 Magento 1.6 的站点上设置 Multishipping 结帐。我一直在为 Magento 使用默认的 Multishipping 结帐，但是我无法正确设置新结帐的样式，因为新结帐的类与我用于单页结帐的类的名称相同。

有谁知道如何为 Multishipping 结帐附加一个完全独立的样式表。我已经尝试使用该`Page.xml`文件并为其添加一个新的操作类，但是，我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:05:29.133

将此添加到您的 local.xml 布局文件中：

```
<checkout_multishipping>
    <reference name="head">
        <action method="addCss">
           <css>your/cssfile.css</css>
        </action>
    </reference>
</checkout_multishipping> 
```

**编辑**- 删除翻译属性

**checkout_multishipping**布局更新句柄是通过每个`checkout_multishipping`操作的布局更新指令添加的。

请注意，也可以使用添加到 body 标记的 fullactionname CSS 类名来定位 CSS 规则：

![页面源代码中的body标签截图](../Images/27b88d1044591be04c19c1f3e3936934.png)

# gradle - tasks.setupAll.dependsOn(copyJars) 在 gradle 中不起作用？

> ID：11189918
> 
> 赞同：0
> 
> 时间：2012-06-25T13:03:13.647
> 
> 标签：gradle

我试着按照这里的答案

[如何覆盖一项任务，使其依赖于我在 gradle 中的一个任务](https://stackoverflow.com/questions/11128540/how-to-override-a-task-making-it-depend-on-one-of-mine-in-gradle)

但它失败了

> 在任务集上找不到属性“setupAll”。

我尝试了几件事

1.  使子项目部分中的任务依赖于 master:copyJars 但失败了
2.  以下解决方案
3.  剥离了不起作用的任务。

我只有一个 build.gradle 文件和 settings.gradle 文件。设置gradle文件是

```
include 'master', 'toneserver','webserver' 
```

主 build.gradle 文件是（具体来说**，搜索 setupAll 的两个实例，因为不知何故有问题**）

```
//NOTE: Currently this file is for dependency management only but we would like
// to convert all of the build to gradle from the ant files.  We needed to add dependency 
// management so did so with gradle first as a first step in the process of evolution

allprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse'

    buildDir = 'output'

    task hello << { task -> println "I'm $task.project.name" }
    build << { task -> println "MASTER: I'm building now classpath=$sourceSets.main.compileClasspath.files" }
}

project(':toneserver') {
    dependencies {
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework', include: '*.jar')

        compile project(':master')
        compile project(':webserver')
    }

    task eclipse(overwrite: true) {
    }

}

project(':webserver') {
    dependencies {
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework', include: '*.jar')

        compile project(':master')
    }

    //playframework has it's own generation of .classpath and .project fils so do not 
    //overwrite their versions
    task eclipse(overwrite: true) {
    }
}

project(':master') {
    project.ext.genLibDir = file('lib')
    project.ext.fixedLibDir = file('libother')

    repositories {
         mavenCentral()
    }

    dependencies {
        compile group: 'org.hibernate',   name: 'hibernate-entitymanager', version: '4.1.4.Final'
        compile group: 'org.slf4j',       name: 'slf4j-api',               version: '1.6.6'
        compile group: 'org.slf4j',       name: 'log4j-over-slf4j',        version: '1.6.6'
        compile group: 'ch.qos.logback',  name: 'logback-core',            version: '1.0.6'
        compile group: 'joda-time',       name: 'joda-time',               version: '2.1'
        compile group: 'com.google.inject',name: 'guice',                  version: '3.0'
        compile group: 'com.google.protobuf',name: 'protobuf-java',        version: '2.4.1'

        //to be erased soon
        compile group: 'commons-configuration',name:'commons-configuration',version: '1.8'
        compile group: 'org.jboss.netty', name: 'netty',                   version: '3.2.7.Final'

        //compile group: 'org.asteriskjava',name: 'asterisk-java',         version: '1.0.0.M3'            
        compile fileTree(dir: project.ext.fixedLibDir, include: '*.jar')
    }

    task('copyJars') { 
        ext.collection = files { genLibDir.listFiles() }
        delete ext.collection
        copy { from configurations.compile into genLibDir }
        copy { from fixedLibDir into genLibDir }
    }

        tasks.setupAll.dependsOn(copyJars)
}

subprojects {
    version = 'Developer-Build'

    //configurations.compile {
    //  exclude group: 'javax.jms',        module: 'jms'
    //  exclude group: 'com.sun.jdmk',     module: 'jmxtools'
    //  exclude group: 'com.sun.jmx',      module: 'jmxri'
    //}

    task('setupAll', dependsOn: ['eclipse']) {
        description = 'Update jars from remote repositories and then fix eclipse classpath for master project'

    }

    hello << {println "- I depend on stserver"}

    build << { println "subproject:source sets=$sourceSets.main.java.srcDirs" }
}

task release << { println "putting together release" }

//TODO: have a release task AND if version is null when running the release task
//throw an exception telling the user to pass in a version with "./build -Dversion=xxxx"
//The automated build will call the release task with a version number like that
gradle.taskGraph.whenReady {taskGraph ->
    if (taskGraph.hasTask(release) && version == 'Developer-Build') {
        throw new StopExecutionException("You must specify -Dversion=<some version> to run the release task")
    } else {
        version = '1.0-SNAPSHOT'
    }
} 
```

这是怎么回事？覆盖任务以依赖其他东西应该很容易我虽然（也许语法仍然是错误的？）

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:14:10.570

没关系，愚蠢的错误，忘记了我的任务在子项目中，应该在外面并且需要一个：所以新的 setupAll 在子项目之外并且是

```
task('setupAll', dependsOn: [':master:copyJars', 'eclipse']) {
    description = 'Update jars from remote repositories and then fix eclipse classpath for master project'

} 
```

# jquery - jQuery通过前面的标签改变输入框

> ID：11189924
> 
> 赞同：0
> 
> 时间：2012-06-25T13:03:55.107
> 
> 标签：jquery, forms

我有以下 HTML：

```
<label>First Name</label><input name="Question62" type="text" value="" /> 
```

不幸的是，因为我正在创建几个表单，输入框的“名称”会改变，但“标签”内容将保持不变（“名字”）。

有没有办法通过前面的标签来改变输入值？（而不是输入框中的 id 标签）？

[编辑] 下面给出的答案，提供代码以防万一有人需要它：

```
var firstName = $("label:contains('First Name')");
firstName.next('input').val(obj.first_name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:06:47.787

你想要jquery`.next()`方法。

[http://api.jquery.com/next/](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:09:07.117

试试这样：

```
var labelContent = "First Name";
$('label:contains('+labelContent+') ~ :text')​.val( 'Some value' ) 
```

# tsql - 使用 T-SQL 从字符串中删除指定的单词

> ID：11189927
> 
> 赞同：12
> 
> 时间：2012-06-25T13:04:07.653
> 
> 标签：tsql

我正在尝试从表中的描述字段中删除某些字符串。为此我做了这个功能

* * *

```
CREATE FUNCTION fnDescriptionClean 
(@strDescription varchar(50))
RETURNS varchar(50)
AS
BEGIN

declare @Return varchar(50)
declare @badword varchar(50)

set @badword = 'Front'
set @strDescription = CASE 

--Remove from mid string

WHEN @strDescription LIKE '% ' + @Badword +' %'  THEN REPLACE(@strDescription,' ' +  @Badword + ' ',' ')

--Remove from start of string

WHEN @strDescription LIKE @Badword +' %' THEN RIGHT(@strDescription, (len(@strDescription)-(len(@Badword)+1)))

--Remove from end of string

WHEN @strDescription LIKE '% ' + @Badword THEN LEFT(@strDescription, (len(@strDescription)-(len(@Badword)+1)))
ELSE @strDescription END 

set @badword = 'Right'
set @strDescription = CASE 

WHEN @strDescription LIKE '% ' + @Badword +' %'  THEN REPLACE(@strDescription,' ' +  @Badword + ' ',' ')
WHEN @strDescription LIKE @Badword +' %' THEN RIGHT(@strDescription, (len(@strDescription)-(len(@Badword)+1)))
WHEN @strDescription LIKE '% ' + @Badword THEN LEFT(@strDescription, (len(@strDescription)-(len(@Badword)+1)))
ELSE @strDescription END 

RETURN      @strDescription
end 
```

* * *

我是 SQL 编程的新手，希望对此进行改进。假设我想要一个包含“坏词”列表的表，我想从字符串中删除它并在清理描述时循环遍历它。

我应该指出，这个过程需要尽可能高效，因为我要处理 1500 万条记录。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-25T13:13:33.787

你为什么不直接使用[REPLACE](http://msdn.microsoft.com/en-us/library/ms186862.aspx)？

```
UPDATE tableName
SET columnName = REPLACE(columnName,'specific word',''); 
```

# mysql - mysql简单查询耗时较长

> ID：11189929
> 
> 赞同：0
> 
> 时间：2012-06-25T13:04:10.930
> 
> 标签：mysql, performance

```
select marksymbol,round(avg(p.closerate * p.out_share),2)
from price p
where trandate >= '2000/06/05' and trandate <= '2012/06/22' and p.markcode='RD'
group by marksymbol 
```

在具有 2gb 内存的本地机器上花费了 0.064 秒，在服务器上花费了 1 分 30.38 秒。

我在本地机器上运行 Windows。服务器在 Linux 下运行 MySQL。

两台机器上的数据库方案是相同的。它们具有相同的索引和主键。

还有哪些其他因素会影响此查询的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:30:30.337

它们已正确编入索引，但它们的大小是否相同？Linux 服务器上的表是否明显大于测试 Windows 服务器上的表？

您可以寻找一些可以帮助解决问题的地方。

1：对查询本身，你解释让mysql告诉你发生了什么。

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

如果您安装了 phpmyadmin，则只需单击“解释”，它会自动为您执行此操作（带有漂亮的饼图），您可以通过这种方式识别瓶颈。

2：服务器上的内存使用情况。使用命令

> 免费-m

和

> vmstat

看看有多少内存可用。您的系统可能一直在为您的查询进行昂贵的交换。

3：优化查询本身。从外观上看，您正在使用字符串比较进行日期搜索。您可以利用 mysql 中强大的日期时间功能来加快日期比较。但是，我怀疑这对您来说是瓶颈，因此请先检查前两个选项。

# c# - ftp删除文件很慢

> ID：11189931
> 
> 赞同：0
> 
> 时间：2012-06-25T13:04:16.267
> 
> 标签：c#, ftp

无论大小如何，我的应用程序都会在大约 15 秒内从 ftp 中删除一个文件。另一方面，FileZilla 会立即删除同一个文件。

这是我的代码：

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(fileName);
request.Proxy = null;    
request.UsePassive = false;
request.KeepAlive = !request.UsePassive;
request.Method = WebRequestMethods.Ftp.DeleteFile;
request.Credentials = new NetworkCredential(usr, pwd);

FtpWebResponse response = (FtpWebResponse)request.GetResponse();
Debug.Print("Delete status: {0}", response.StatusDescription);
response.Close(); 
```

我尝试使用异步函数删除文件，但我得到“无法发送具有此动词类型的内容主体。” 错误。

这可以更快吗？为什么这么慢？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:10:25.653

你运行的是什么操作系统？我唯一的想法是，使用 Windows FileZilla 可能只会标记要删除的文件，而不是实际删除它。一旦文件被标记为要删除，它可能会在新数据进入时被覆盖。“即时”删除来自设置标志，仅此而已。我相信你的代码不是。如果您使用的是 Windows，您可以看到这一点，因为删除任何大小的文件都是即时的。

# c# - 堆栈和堆分配

> ID：11189932
> 
> 赞同：28
> 
> 时间：2012-06-25T13:04:19.263
> 
> 标签：c#, multithreading

我正在研究内存模型，并且正在努力了解进程中存在多少堆。

因此，如果我们有 1 个进程，其中有 5 个线程，我是否正确地说我们有 5 个堆栈和 1 个堆？

如果是这样，线程是否可以访问彼此的堆栈（或者这正是它们具有单独堆栈以防止损坏的原因），如果只有 1 个堆，那么显然它们都访问该堆，因此需要用多个线程锁定？我是否正确理解这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-26T00:12:19.850

是的，每个线程都有自己的堆栈。这是非常必要的，堆栈会跟踪方法完成后返回的位置，并存储返回地址。由于每个线程都执行自己的代码，因此它们需要自己的堆栈。局部变量和方法参数也存储在那里，使它们（通常）是线程安全的。

堆的数量是一个更复杂的细节。您正在为垃圾收集堆计数 1。从实现的角度来看，这并不完全正确，三代堆加上大对象堆在逻辑上是不同的堆，最多加起来四个。当您分配过多时，此实现细节开始变得重要。

在托管代码中您不能完全忽略的另一个是存储静态变量的堆。它与 AppDomain 相关联，静态变量与 AppDomain 一样存在。在 .NET 文献中通常称为“加载程序堆”。它实际上由 3 个堆（高频堆、低频堆和存根堆）组成，jitted 代码和类型数据也存储在那里，但这已经很重要了。

忽略列表的下方是本机代码使用的堆。其中两个很容易从元帅级中看到。有一个默认进程堆，Windows 从它分配，Marshal.AllocHGlobal() 也是如此。还有一个单独的堆，COM 存储数据，Marshal.AllocCoTaskMem() 从中分配。最后，您与之互操作的任何本机代码都将拥有自己的堆以支持其运行时支持。此类代码使用的堆数量仅受加载到您的进程中的本机 DLL 数量的限制。所有这些堆都存在，你几乎不会直接处理它们。

因此，最少 10 个堆。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-25T13:08:09.547

简而言之，**是**的。

进程中的所有线程共享同一个堆，因此它们可以交换数据。每个线程都有自己的堆栈，该堆栈与该线程上的当前代码执行相关。

一个非常好的线程资源在这里：[http ://www.albahari.com/threading/](http://www.albahari.com/threading/)

> 线程类似于运行应用程序的操作系统进程。正如进程在计算机上并行运行一样，线程在单个进程中并行运行。进程彼此完全隔离；线程只有有限程度的隔离。特别是，线程与在同一应用程序中运行的其他线程共享（堆）内存。这部分是线程有用的原因：例如，一个线程可以在后台获取数据，而另一个线程可以在数据到达时显示数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T14:01:11.683

线程是在单个进程的相同虚拟地址空间中同时运行的独立指令流。堆是系统提供给每个进程供其私人使用的一大块内存。进程可以调整它们的堆大小，并且可以根据需要使用堆空间。线程可以协作使用这个堆空间，也可以分配额外的私有内存区域，称为*线程本地存储*（TLSes）。

由于所有线程共享相同的虚拟地址空间，它们可以直接访问彼此的堆栈内存。这意味着一个线程可以将其堆栈上的变量作为参数传递给在其他线程中运行的函数。但是线程堆栈仍然是独立的，因为一个线程从不将值推送或弹出到其他线程的堆栈中，而只会将其推送到自己的堆栈空间中。由于 x86 和 x86-64 上的堆栈向下增长，因此每个线程的堆栈内存底部都有一个特殊的页面——所谓的*保护页面*。如果在操作堆栈时到达保护页面，则会发生堆栈错误。

在 C 和 C++ 等非托管语言中，进程内存的每个部分都可以通过使用指针随意访问。一个线程可以完全弄乱另一个线程堆栈的内容，从而使第二个线程（以及整个进程）崩溃。在 C# 中，这些事情不会发生在`unsafe`块之外，因为堆栈是由 CLR 管理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T13:14:46.240

这是实现定义的，但让我们谈谈最流行的现代操作系统，因为您添加了 C# 标记。

> 一个进程中存在多少堆。

通常每个进程 1 个。

> 因此，如果我们有 1 个进程，其中有 5 个线程，我是否正确地说我们有 5 个堆栈和 1 个堆？

是的。每个线程立即消耗 1MB 的虚拟地址空间用于线程堆栈。

> 如果是这样，线程是否可以访问彼此的堆栈（或者这正是它们具有单独堆栈以防止损坏的原因），如果只有 1 个堆，那么显然它们都访问该堆，因此需要用多个线程锁定？我是否正确理解这一点？

是的，现代环境是非常好的沙盒环境，因此您不能直接从另一个线程访问其他线程堆栈。

# java-me - 在 LWUIT 中打开外部 HTML 文档

> ID：11189937
> 
> 赞同：0
> 
> 时间：2012-06-25T13:04:34.240
> 
> 标签：java-me, lwuit, html-components

我正在尝试在 LWUIT 中打开一个外部 HTML 文档，但我有一个例外

```
htmlC = new HTMLComponent(this);
htmlC.setPage(formURL); 
```

并且该类正在实现 DocumentRequestHandler

这是方法的实现

```
public InputStream resourceRequested(DocumentInfo di) {
        final String url = di.getUrl();
        final boolean isPostRequest = di.isPostRequest();

        new Thread(new Runnable() {
            public void run() {
                in = getExternalData(url, isPostRequest);
            }
        }).start();

        return in;
    }

    private InputStream getExternalData(String url, boolean isPostRequest) {
        if (url.startsWith("http://") == false) {
            return getErrorStream("This handler handles http only.");
        }

        if (isPostRequest) {
            return getErrorStream("GET requests only please!");
        }

        try {

            connection = (HttpConnection) Connector.open(url);

            connection.setRequestMethod(HttpConnection.GET);
            int resCode = connection.getResponseCode();

            if (resCode == connection.HTTP_OK) {
                sb = new StringBuffer();
                in = connection.openDataInputStream();
                int chr;

                while ((chr = in.read()) != -1) {
                    sb.append((char) chr);
                }

                System.out.println("sb : " + sb);
                connection.close();
                return in;
            } else {
                return getErrorStream("Error Opening HTTP Connection.");
            }

        } catch (IOException ex) {
            ExceptionController.printExceptionData("ExternalHTMLForm", "getExternalData", ex.getMessage());
            return getErrorStream(ex.getMessage());
        } finally {
        }

    }

    // To print error message incase not able to open HTML file
    private InputStream getErrorStream(String err) {
        err = "<html><body>" + err + "</body></html>";
        ByteArrayInputStream bais = new ByteArrayInputStream(err.getBytes());
        return bais;
    } 
```

我有以下例外

```
Uncaught exception: java.lang.UnsupportedOperationException: Not supported yet.
    at com.veripark.view.ui.ExternalHTMLForm.parsingError(ExternalHTMLForm.java:233)
    at com.sun.lwuit.html.HTMLComponent.streamReady(), bci=210
    at com.sun.lwuit.html.HTMLComponent$2.run(HTMLComponent.java:968) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:56:12.087

我使用了 LWUIT 演示附带的浏览器代码，它是用于浏览器的，而且这个博客对我有很大帮助

[http://codenameone.blogspot.com/2011/08/lwuit-15-released-finally.html](http://codenameone.blogspot.com/2011/08/lwuit-15-released-finally.html)

# json - 在 Node.js 中使用 JSON.stringify 会导致“进程内存不足”错误

> ID：11189940
> 
> 赞同：9
> 
> 时间：2012-06-25T13:04:39.400
> 
> 标签：json, node.js, ldap

使用 Node，我试图从 LDAP 服务器收集用户数据，然后将该数据写入 JSON 文件。我正在使用以下代码来执行此操作：

```
fs.writeFile('data.json', JSON.stringify(data, null, 4)); 
```

问题是该`JSON.stringify`方法导致以下错误：

```
FATAL ERROR: JS Allocation failed - process out of memory 
```

我知道问题出在`JSON.stringify`因为如果我使用`console.log`而不是`fs.writeFile`我得到同样的错误。

我正在尝试编写大量数据（LDAP 数据库中有超过 500 个条目）。有谁知道我怎样才能让它工作？这是完整的代码：

```
var ldap = require('ldapjs');
var util = require('util');
var fs = require('fs');
var client = ldap.createClient({
  url: '************'
});

client.bind('CN=**********,OU=Users,OU=LBi UK,OU=UK,DC=********,DC=local', '*********', function(err) {
  if (err) {
    console.log(err.name);
  }
});

// taken from http://ldapjs.org/client.html
client.search('OU=Users,OU=******,OU=UK,DC=******,DC=local', {
  scope: 'sub',
  filter: 'objectClass=organizationalPerson',
  attributes: ['givenName', 'dn', 'sn', 'title', 'department', 'thumbnailPhoto', 'manager']
  // filter by organizational person
}, function(err, res) {
  if (err) {
    console.log(err.name);
  }

  var limit = 1;
  var data = {"directory": []};

  res.on('searchEntry', function(entry) {

    var obj = {};
    entry.attributes.forEach(function (attribute) {
      var value;
      if (attribute.type === 'thumbnailPhoto') {
        value = attribute.buffers[0];

      } else {
        value = attribute.vals[0];
      }
      obj[attribute.type] = value;
    });
    data.directory.push(obj);
  });
  res.on('error', function(err) {
    console.log('error: ' + err.message);
  });
  res.on('end', function(result) {
    fs.writeFile('data.json', JSON.stringify(data, null, 4));
  });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:02:12.083

正如@freakish 提到的，问题是我的数据太大了。

数据如此之大的原因是由于大量图像作为对象返回。最后，我需要做的就是使用缓冲区将对象编码为 base64，然后数据的大小变得更易于管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-25T01:14:09.167

斯蒂芬的数据不是“太大”。这是 Node 中的一个错误，在[此处](https://github.com/nodejs/node/issues/13465)进行了跟踪，并没有完全修复。2 年后我仍然看到它，具有恒定复杂性的对象有时会产生 OOM 错误，但大部分时间都成功写入磁盘。

一种解决方法是研究使用流式 JSON 编写器库，如[json-write](https://www.npmjs.com/package/json-write)（来自 D3 作者 Mike Bostock）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:08:02.467

一些事情正在递归地发生。

确保您的 Object`data`不包含任何循环引用，例如 to`this`或任何其他难以序列化的内容。

# android - 如何知道在android开发中下载是否完成

> ID：11189942
> 
> 赞同：2
> 
> 时间：2012-06-25T13:04:41.603
> 
> 标签：android, pdf

我正在使用以下代码从 pdf 列表中下载 pdf，具体取决于所选的内容。我想然后打开下载的pdf。问题是打开pdf的代码发生在下载完成之前。如何使打开pdf的代码在下载完成之前不会运行.....

注意：我最初以文本/html 格式阅读 pdf 的原因是因为我最初将 pdf 作为网站 url，然后在 url 中打开时自动下载。

```
 public class pdfSelectedListener implements OnItemClickListener{

    @Override
    public void onItemClick(AdapterView<?> parent,
            View view, int pos, long id) {
        String pdfName = "";

        for(int i=0;i<nameList.size();i++){
            if(nameList.get(i).equals(parent.getItemAtPosition(pos).toString())){
                try{
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse(websiteList.get(i)), "text/html");

                int slashIndex = websiteList.get(i).lastIndexOf('/');
                pdfName = websiteList.get(i).substring(slashIndex+1, websiteList.get(i).length());

                startActivity(intent);
                }catch(Exception e){
                    Toast.makeText(PDFActivity.this, "Invalid link.", Toast.LENGTH_LONG).show();
                }
            }
        } 
```

//在上面的代码完成从互联网下载pdf之前，我不希望下面的代码执行。

```
 File file = new File("/mnt/sdcard/Download/"+pdfName);
                        if (file.exists()) {
                            Uri path = Uri.fromFile(file);
                            Intent intent = new Intent(Intent.ACTION_VIEW);
                            intent.setDataAndType(path, "application/pdf");
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                            try {
                                startActivity(intent);
                            } 
                            catch (ActivityNotFoundException e) {
                                Toast.makeText(PDFActivity.this, 
                                    "No Application Available to View PDF", 
                                    Toast.LENGTH_SHORT).show();
                            }
                        }else{
                            Toast.makeText(PDFActivity.this, 
                                    "File doesn't exist.", 
                                    Toast.LENGTH_SHORT).show();
                        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:21:36.963

**使用 AsyncTask 并在对话框中显示下载进度**

```
// declare the dialog as a member field of your activity
ProgressDialog mProgressDialog;

// instantiate it within the onCreate method
mProgressDialog = new ProgressDialog(YourActivity.this);
mProgressDialog.setMessage("A message");
mProgressDialog.setIndeterminate(false);
mProgressDialog.setMax(100);
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

// execute this when the downloader must be fired
DownloadFile downloadFile = new DownloadFile();
downloadFile.execute("the url to the file you want to download"); 
```

AsyncTask 将如下所示：

```
private class DownloadFile extends AsyncTask<String, Integer, String> {
@Override
protected String doInBackground(String... sUrl) {
    try {
        URL url = new URL(sUrl[0]);
        URLConnection connection = url.openConnection();
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/file_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null;
} 
```

上面的方法（doInBackground）总是在后台线程上运行。你不应该在那里做任何 UI 任务。另一方面，onProgressUpdate 和 onPreExecute 在 UI 线程上运行，因此您可以更改进度条：

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    mProgressDialog.setProgress(progress[0]);
} 
```

}

如需进一步参考，请查看链接[下载文件和显示进度的可能方法](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog/3028660#3028660)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:08:56.990

您应该实现`AsyncTask`下载 PDF 文件。

*   在 doInBackground() 中，下载 PDF 文件
*   在 onPostExecute() 中，为下载的 PDF 做任何你想做的事情。

# c# - 使用 IObservable 代替事件

> ID：11189944
> 
> 赞同：10
> 
> 时间：2012-06-25T13:04:43.503
> 
> 标签：c#, events, system.reactive

我最近一直在阅读有关 IObservable 的内容。到目前为止，我已经查看了各种 SO 问题，并观看了有关他们可以做什么的视频。我认为的整个“推动”机制非常出色，但我仍在试图弄清楚一切究竟是做什么的。从我的阅读中，我猜想在某种程度上`IObservable`是可以“观察”的东西，并且`IObservers`是“观察者”。

所以现在我要尝试在我的应用程序中实现它。在开始之前，我想先弄清楚一些事情。我已经看到 IObservable 与 IEnumerable 相反，但是，在我的特定实例中，我真的看不到任何可以合并到我的应用程序中的地方。

目前，我大量使用事件，以至于我可以看到“管道”开始变得难以管理。我想，IObservable 可以帮助我。

考虑以下设计，这是我在应用程序中围绕 I/O 的包装器（仅供参考，我通常必须处理字符串）：

我有一个名为`IDataIO`：

```
public interface IDataIO
{
  event OnDataReceived;
  event OnTimeout:
  event OnTransmit;
} 
```

现在，我目前有三个实现这个接口的类，这些类中的每一个都在某种程度上利用了异步方法调用，引入了某种类型的多线程处理：

```
public class SerialIO : IDataIO;
public class UdpIO : IDataIO;
public class TcpIO : IDataIO; 
```

这些类中的每一个都有一个实例包含在我的最终类中，称为 IO（它还实现了 IDataIO - 遵循我的策略模式）：

```
public class IO : IDataIO
{
  public SerialIO Serial;
  public UdpIO Udp;
  public TcpIO Tcp;
} 
```

我已经利用策略模式来封装这三个类，以便`IDataIO`在运行时在不同实例之间进行更改时使其对最终用户“不可见”。正如您可以想象的那样，这在后台导致了相当多的“事件管道”。

那么，在我的情况下，如何在此处使用“推送”通知？我不想订阅事件（DataReceived 等），而是简单地将数据推送给任何感兴趣的人。我有点不确定从哪里开始。我仍在尝试玩弄 的想法/泛型类`Subject`，以及它的各种化身（ReplaySubject/AsynSubject/BehaviourSubject）。有人可以请教我这个（也许参考我的设计）？或者这根本不适合`IObservable`？

PS。随时纠正我的任何“误解”:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T13:48:03.467

Observables 非常适合表示数据流，因此您的`DataReceived`事件可以很好地建模为 observable 模式，例如`IObservable<byte>`or `IObservable<byte[]>`。您还可以获得额外的好处，`OnError`并且`OnComplete`非常方便。

在实现方面，很难说你的确切场景，但我们经常使用`Subject<T>`它作为底层源并调用`OnNext`来推送数据。也许像

```
// Using a subject is probably the easiest way to push data to an Observable
// It wraps up both IObservable and IObserver so you almost never use IObserver directly
private readonly Subject<byte> subject = new Subject<byte>();

private void OnPort_DataReceived(object sender, EventArgs e)
{
    // This pushes the data to the IObserver, which is probably just a wrapper
    // around your subscribe delegate is you're using the Rx extensions
    this.subject.OnNext(port.Data); // pseudo code 
} 
```

然后，您可以通过属性公开主题：

```
public IObservable<byte> DataObservable
{
    get { return this.subject; } // Or this.subject.AsObservable();
} 
```

您可以用 替换您的`DataReceived`事件，`IDataIO`并`IObservable<T>`让每个策略类以他们需要的任何方式处理他们的数据并推送到`Subject<T>`.

另一方面，订阅 Observable 的任何人都可以像处理事件一样处理它（只需使用），或者您可以使用、、等`Action<byte[]>`在流上执行一些非常有用的工作。`Select``Where``Buffer`

```
private IDataIO dataIo = new ...

private void SubscribeToData()
{ 
    dataIo.DataObservable.Buffer(16).Subscribe(On16Bytes);
}

private void On16Bytes(IList<byte> bytes)
{
    // do stuff
} 
```

`ReplaySubject``ConnectableObservable`当您知道您的订阅者将迟到但仍需要赶上所有事件时，/ s 非常棒。源缓存它推送的所有内容，并为每个订阅者重播所有内容。只有你可以说这是否是你真正需要的行为（但要小心，因为它会缓存所有显然会增加你的内存使用的东西）。

当我学习 Rx 时，我发现关于 Rx的[http://leecampbell.blogspot.co.uk/](http://leecampbell.blogspot.co.uk/)博客系列对于理解理论非常有用（这些帖子现在有点过时了，API 也发生了变化，所以请注意这一点)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T04:03:44.613

这绝对是 observables 的理想案例。班级可能会看到最大的`IO`进步。首先，让我们更改接口以使用可观察对象，看看组合类变得多么简单。

```
public interface IDataIO
{
    //you will have to fill in the types here.  Either the event args
    //the events provide now or byte[] or something relevant would be good.
    IObservable<???> DataReceived;
    IObservable<???> Timeout;
    IObservable<???> Transmit;
}

public class IO : IDataIO
{
    public SerialIO Serial;
    public UdpIO Udp;
    public TcpIO Tcp;

    public IObservable<???> DataReceived
    {
        get 
        {
            return Observable.Merge(Serial.DataReceived,
                                    Udp.DataReceived,
                                    Tcp.DataReceived);
        }
    }

    //similarly for other two observables
} 
```

*旁注：*您可能会注意到我更改了接口成员名称。在 .NET 中，事件通常被命名`<event name>`并且引发它们的函数被调用`On<event name>`。

对于生产类，您有一些取决于实际来源的选项。假设您正在使用 .NET SerialPort 类`SerialIO`并`DataReceived`返回一个`IObservable<byte[]>`. 由于 SerialPort 已经有一个接收数据的事件，您可以直接使用它来制作您需要的 observable。

```
public class SerialIO : IDataIO
{
    private SerialPort _port;

    public IObservable<byte[]> DataRecived
    {
        get
        {
            return Observable.FromEventPattern<SerialDataReceivedEventHandler,
                                               SerialDataReceivedEventArgs>(
                        h => _port.DataReceived += h,
                        h => _port.DataReceived -= h)
                   .Where(ep => ep.EventArgs.EventType == SerialData.Chars)
                   .Select(ep =>
                           {
                              byte[] buffer = new byte[_port.BytesToRead];
                              _port.Read(buffer, 0, buffer.Length);
                              return buffer;
                           });
        }
    }
} 
```

对于没有现有事件源的情况，您可能需要使用 RichK 建议的主题。他的回答很好地涵盖了这种使用模式，所以我不会在这里重复。

您没有展示如何使用此接口，但根据用例，在这些类上设置其他函数 return`IObservable`本身并完全取消这些“事件”可能更有意义。使用基于事件的异步模式，您必须将事件与调用的函数分开以触发工作，但使用可观察对象，您可以从函数中返回它们，以使您订阅的内容更加明显。这种方法还允许从每个调用返回的 observables 发送`OnError`和`OnCompleted`消息来表示操作的结束。根据您对组合类的使用，我不希望这在这种特殊情况下有用，但要记住这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-14T19:34:55.167

*使用 IObservable 代替事件*

如果只对 nuget 包 rxx 具有的属性更改*感兴趣*：

```
IObservable<string> obs=Observable2.FromPropertyChangedPattern(() => obj.Name) 
```

（以及许多其他方法）

* * *

或者如果事件排除了属性更改/希望避免实施 INotifyPropertyChanged

```
class ObserveEvent_Simple
{
    public static event EventHandler SimpleEvent;
    static void Main()
    {          
       IObservable<string> eventAsObservable = Observable.FromEventPattern(
            ev => SimpleEvent += ev,
            ev => SimpleEvent -= ev);
    }
} 
```

类似于来自[http://rxwiki.wikidot.com/101samples#toc6的 u/Gideon Engelberth](http://rxwiki.wikidot.com/101samples#toc6)

[https://rehansaeed.com/reactive-extensions-part2-wrapping-events/](https://rehansaeed.com/reactive-extensions-part2-wrapping-events/)涵盖

* * *

这篇codeproject文章也致力于将事件转换为反应事件

[https://www.codeproject.com/Tips/1078183/Weak-events-in-NET-using-Reactive-Extensions-Rx](https://www.codeproject.com/Tips/1078183/Weak-events-in-NET-using-Reactive-Extensions-Rx)

并且还处理弱订阅

# iphone - cocos2dx中CCTexture2D的使用

> ID：11189951
> 
> 赞同：2
> 
> 时间：2012-06-25T13:05:41.087
> 
> 标签：iphone, cocos2d-x

我是 cocos2d-x 开发的新手。所以有人告诉我，我如何在 cocos2Dx 中使用 CCTexture2D？这样我就可以将 setTexture 用于 CCSprite。
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T13:21:10.597

您可以通过以下行创建 CCtexture2D：

```
CCTexture2D *texture = CCTextureCache::sharedTextureCache()->addImage(pszFileName);
sprite -> setTexture(texture); 
```

我认为这可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T05:13:44.680

CCImage* ccImageDefault = new CCImage();

```
ccImageDefault->initWithImageFile("defaultImage.png"); 
```

CCTexture2D* ccTextureDefault= new CCTexture2D();

```
ccTextureDefault->initWithImage(ccImageDefault); 
```

CCSprite* spriteUser = CCSprite::create("my.png");

```
 spriteUser->setTexture(ccTexturedefault); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T16:12:00.653

在 v3.x 或v2.x 中有一种`cocos2d::Sprite`方法可以更好地完成这项工作。你应该检查一下这两个。希望它有所帮助。`setSpriteFrame(std::string frameName)``setDisplayFrame(std::string frameName)`

# android - 如何在没有上下文的情况下显示弹出消息

> ID：11189953
> 
> 赞同：7
> 
> 时间：2012-06-25T13:05:44.230
> 
> 标签：android, notifications, toast, android-context, trial

我们正在开发一个将在`JVM`和中使用的库`Android`。现在我们需要实施试用期通知。在其他平台（.Net 和 Mac）中显示弹出消息框就足够了。但到目前为止，我找不到为 Android 执行此操作的方法。

问题是要显示一些消息（toast 或 AlertDialog），我需要有一个实际的上下文。但是由于我们的库不包含 UI 元素并且与 UI 没有任何关系，因此我们不会在创建组件时要求用户传递上下文。

简而言之：

*   如何在没有从用户代码传递的上下文引用的情况下显示 Toast（AlertDialog，Notification）。
*   如果我不能，也许有人有更好的解决方案来在 Android 和 Java 上实现试用模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:03:43.350

使用[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)。

您的抽象工厂将允许您创建对话框和其他通知。然后，您将有 2 个具体实现来创建通知的 Android 版本或 JVM 版本。

例子：

```
/*
 * The abstract factory
 */
public abstract class NotificationFactory {
    /**
     * Pops a message up for the user.
     * 
     * @param msg
     */
    public abstract void newToast(String msg);

    // other notifications can go here
}

/**
 * Concrete Android notification factory
 * 
 */
public final class AndroidNotificationFactory extends NotificationFactory {

    private final Context context;

    public AndroidNotificationFactory(Context context) {
        this.context = context;
    }

    @Override
    public void newToast(String msg) {
        // normal Android toast stuff using the context
    }

}

/**
 * Concrete JVM Notification factory
 * 
 */
public final class JvmNotificationFactory extends NotificationFactory {

    @Override
    public void newToast(String msg) {
        // JVM toast stuff
    }

}

/**
 * A singleton used for accessing the factory.
 * 
 */
public enum Library {
    Instance;

    private NotificationFactory notificationFactory;

    public NotificationFactory getNotificationFactory() {
        // nb: add synchronized if needed
        return notificationFactory;
    }

    public void setNotificationFactory(NotificationFactory notificationFactory) {
        // nb: add synchronized if needed
        this.notificationFactory = notificationFactory;
    }

    public void InitForAndroid(Context context) {
        setNotificationFactory(new AndroidNotificationFactory(context));
    }

    public void InitForJvm() {
        setNotificationFactory(new JvmNotificationFactory());
    }
}

public class ExampleUsage {

    /**
     * @param args
     */
    public static void main(String[] args) {

        // init the library
        // Library.Instance.InitForAndroid(context); //or:
        Library.Instance.InitForJvm();

        // usage
        Library.Instance.getNotificationFactory().newToast("Test");

    }

} 
```

对于需要能够在创建后调用方法的对话框，您需要创建一个`IDialog`接口以及实现该接口的具体 Android 和 JVM 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T18:48:26.977

看来，如果没有上下文，您确实无法显示 Toast 和 AlertDialog 。最接近的变体是在您的库中提供一些用户应该实现的接口。

# android - 按钮android顶部的图像

> ID：11189957
> 
> 赞同：0
> 
> 时间：2012-06-25T13:05:55.057
> 
> 标签：android, android-layout, button, imageview

是否可以在按钮顶部添加图像（视图）（作为背景图像）？

我正在将 iOS 应用程序移植到 Android 上，这在 iOS 上不是问题，但我想知道由于布局，这是否是 Android 上的正确方法。

编辑 ：

为了澄清，请查看此屏幕截图：

[http://a4.mzstatic.com/us/r1000/062/Purple/v4/7c/4b/cd/7c4bcd53-ba55-94d7-a26c-ce1bfe040003/mza_2736801523527387264.320x480-75.jpg](http://a4.mzstatic.com/us/r1000/062/Purple/v4/7c/4b/cd/7c4bcd53-ba55-94d7-a26c-ce1bfe040003/mza_2736801523527387264.320x480-75.jpg)

我需要做左下角的“carte”按钮（法文卡）

我需要 ：

*   带有背景图像的按钮
*   从互联网加载的按钮顶部显示的图像（一张卡片，有很多不同的，每天都会添加新闻卡片，在截图中它是“MIDI PASS”）
*   按钮上的文本本地化，所以我不能使用 Imagebutton 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:12:11.577

目前尚不清楚您想要实现什么，但以下内容可能对您有所帮助：

*   使用[`ImageButton`](http://developer.android.com/reference/android/widget/ImageButton.html)
*   [`android:background`](http://developer.android.com/reference/android/view/View.html#attr_android%3abackground)在 XML（使用）或代码（使用[`setBackgroundResource`](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)）中将图像设置为按钮的背景

**更新**：

查看您更新的需求，最好使用[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)来实现您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:31:02.617

您的问题有些不清楚，但据我了解，以下可能对您有用：

```
 <ImageButton android:id="@+id/imgButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/bg_image"
            android:src="@drawable/top_image"/> 
```

希望它会有所帮助。

更新：如果您的背景很常见，那么您可以使用以下代码设置位图：

```
((ImageButton)findViewById(R.id.imgButton)).setImageBitmap(bmp); 
```

在这里，您需要在 bmp 变量中获取卡片图像的位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:22:12.827

您还可以使用[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)并实现 onClickListener。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:29:25.110

是的，有可能。

然后使用 ImageButton....

设置你的 android:src="@drawable/foreground Image" 设置你的 android:background="@drawable/background Image"

因此，如果您想要一个苹果作为背景图像，一个 3-d 单词“苹果”作为您的前景图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T13:35:22.737

你可以尝试这样的事情：

首先，为 res/drawable/ 文件夹中的按钮创建一个选择器（我们称之为 selector_button.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/image_resource_for_button_pressed"
          android:state_pressed="true" />
    <item android:drawable="@drawable/image_resource_for_button_pressed"
          android:state_focused="true" />
    <item android:drawable="@drawable/image_resource_for_button_normal" />
</selector> 
```

在这里，您可以定义 as 而`android:drawable`不仅仅是`@drawable`'s，还可以定义`@color`'s 或`@layout`'s。如果你想要一个更复杂的布局，你应该定义一个按钮的背景图像和另一个图像在它上面使用`RelativeLayout`例如。

为此，您必须在 res/drawable/ 文件夹中有`image_resource_for_button_pressed.png`（对于按下和聚焦状态）和`image_resource_for_button_normal.png`（对于正常状态）。

之后，您创建一个按钮，如下所示：

```
<Button
    android:id="@+id/aButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/selector_button"
    android:text="Hardcoded string" /> 
```

这种方法可以帮助您保持代码的可读性，因为您只是将图像资源的更改提取到一个 .xml 文件中。

# ios - 如何将子视图添加到 uiscrollview 以开始内容（在第一个子视图之前）？

> ID：11189958
> 
> 赞同：0
> 
> 时间：2012-06-25T13:05:55.230
> 
> 标签：ios, uiscrollview

我编写了一个聊天模块，当用户向上滚动聊天视图时，我需要加载以前的消息进行聊天。将子视图添加到内容末尾非常容易，但我不知道如何将子视图添加到开始:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:44:54.263

您需要将所有其他视图向下移动新视图的高度，您还可以为视图的运动添加动画，例如，如果您有 5 个视图，并且想要添加额外的视图，您将将这 5 个视图移到底部（并可能应用动画），然后将此新视图添加到正确的位置

但是，正如我在评论中建议的那样，使用 a`UITableView`会更容易，每个单元格都是 a `UITableViewCell`，并添加一个您将使用的新聊天项目

```
[tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]]
                 withRowAnimation:UITableViewRowAnimationRight]; 
```

# android - 在设备上安装后强制关闭应用程序？

> ID：11189959
> 
> 赞同：0
> 
> 时间：2012-06-25T13:05:56.383
> 
> 标签：android, forceclose, android-anr-dialog

我的应用程序在设备和模拟器上成功安装。在模拟器中，它立即启动，但在**某些**设备上，当用户单击`open`安装应用程序后出现的活动中的按钮时，“ANR”对话框出现，而在其他设备上，当用户单击`open`主活动时，活动正常打开。最后在当用户安装应用程序并点击它的图标时`Launcher`，所有设备都正常显示主活动。我忘记了一些导致这种不同的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:48:53.310

我发现了问题：
我的主要活动从请求启动它的意图中获取类别，并使用它来决定是否使用 IF ELSE 块。当用户在启动器中单击应用程序的图标时，意图的类别不为空（它是`launcher`），但在安装应用程序后用户单击`open`按钮，这个意图的类别将是`null`，所以它会导致崩溃。

# powershell - 收集远程计算机上的登录用户名？

> ID：11189964
> 
> 赞同：1
> 
> 时间：2012-06-25T13:06:23.683
> 
> 标签：powershell, vbscript, dsquery

这可能是一个棘手的问题，我想以某种方式解决。我以前工作的公司破产了。在混乱中，很多用户拿着公司的电脑离开了。

现在，他们不知道我们已经在每台计算机上安装了 UAG。与域控制器通信并通过 AD 中的计算机帐户进行身份验证的静默 VPN 解决方案。

所以，我想做的是运行某种脚本，尝试联系每台计算机并收集登录到该计算机的用户名。这将给我一个简单的方法来确定该计算机是否由不在购买破产资源的公司工作的人使用。

我已经运行 dsquery 来查找过去 8 周内不活动的计算机。将该列表与整个计算机列表进行比较，让我对当前正在使用的计算机有了一个很好的了解。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:10:50.963

假设您在使用 VPN 时对远程计算机没有防火墙限制，您可以使用 WMI 调用来查询已登录用户：

```
@(Get-WmiObject -ComputerName remote-pc -Namespace root\cimv2 -Class Win32_ComputerSystem)[0].UserName; 
```

如果您想在机器列表上迭代地执行此操作，请执行以下操作：

```
$MachineList = Get-Content -Path c:\ListOfMachines.txt; # One system name per line
foreach ($Machine in $MachineList) {
    @(Get-WmiObject -ComputerName $Machine -Namespace root\cimv2 -Class Win32_ComputerSystem)[0].UserName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T10:46:50.187

我会使用这样的批处理脚本：

`FOR /F %%a IN (computers.txt) DO ( FOR /F "tokens=2 delims=\" %%b IN ('WMIC /node:"%%a" computersystem get username') DO ( ECHO The user who's logged on to computer %%a is: %%b ) )`

`computers.txt`每个计算机名称的列表在哪里，如下所示：

```
LAPTOP001
DESKTOP001
DESKTOP005 
```

循环的输出将是这样的：

`The user who's logged on to computer LAPTOP001 is: johndoe The user who's logged on to computer DESKTOP001 is: janedoe The user who's logged on to computer DESKTOP005 is: ericdoe-`

# asp.net - 如何使用查询字符串变量显示动态 html 页面而不是 aspx 页面

> ID：11189966
> 
> 赞同：0
> 
> 时间：2012-06-25T13:06:35.003
> 
> 标签：asp.net, url-rewriting, seo

我们正在使用框架 3.5 请让我知道如何实现以下目标

而不是显示

[http://www.mydomain.com/microsite/index.aspx?projid=3&adid=5](http://www.mydomain.com/microsite/index.aspx?projid=3&adid=5)

我想展示类似的东西

http://www.mydomain.com/[cityname]/[keyword]/[customer-project-name]/index.html

其中 [cityname],[keyword],[customer-project-name] 将根据 projid、adid 动态变化

我们想为 SEO 做这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:10:17.530

使用 Urlrewritting 使您的页面更加 Url / 用户友好。

请考虑阅读下面提到的文章，这可能对您有所帮助。

[http://msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

[如何在 IIS6 下对现有的 ASP .NET 3.5 Web 应用程序进行 SEO 友好](https://stackoverflow.com/questions/987871/how-to-seo-friendly-an-existing-asp-net-3-5-web-application-under-iis6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:11:58.307

您可以创建一个重写 url 的 HttpModule 或使用现有的 Url 重写模块，如[UrlRewriter.net](http://UrlRewriter.net)。[这](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)是一篇关于这个主题的博客文章。

# php - 如何在 CodeIgniter 中检测 HTTP 方法

> ID：11189969
> 
> 赞同：35
> 
> 时间：2012-06-25T13:06:39.463
> 
> 标签：php, codeigniter, codeigniter-2, http-method

如何检测 CodeIgniter 控制器类中的 HTTP 方法？

**编辑：**`$_SERVER['REQUEST_METHOD']`除了在 CodeIgniter 中 使用之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-25T13:40:04.687

感谢布兰登，我找到了答案。 `$this->input->server($index)`与 相同`$_SERVER[$index]`。

要获取方法，您可以使用：`$this->input->server('REQUEST_METHOD')`.

*更新：（*感谢[Ecir Hana](https://stackoverflow.com/users/1037407/ecir-hana)）

从 CodeIgniter 3 开始，也可以使用 of[方法：](http://www.codeigniter.com/user_guide/libraries/input.html#CI_Input::method)

```
echo $this->input->method(TRUE); // Outputs: POST
echo $this->input->method(FALSE); // Outputs: post
echo $this->input->method(); // Outputs: post 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-02T13:55:13.870

在 CodeIgniter 3 中，可以使用 Input Class 的[方法](http://www.codeigniter.com/user_guide/libraries/input.html#CI_Input::method)uhm...method。

从文档：

```
echo $this->input->method(TRUE); // Outputs: POST
echo $this->input->method(FALSE); // Outputs: post
echo $this->input->method(); // Outputs: post 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T13:24:53.887

您可以使用 Input 库检测 GET 和 POST。

`$this->input->post()`或者`$this->input->get()`

可以找到更多信息： http: [//ellislab.com/codeigniter%20/user-guide/libraries/input.html](http://ellislab.com/codeigniter%20/user-guide/libraries/input.html)

# asp.net-mvc - ViewData 未发布回控制器

> ID：11189974
> 
> 赞同：0
> 
> 时间：2012-06-25T13:06:52.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有两个页面，一个编辑用户信息，一个编辑图片表中的信息。由于每个页面所需的数据类型不同，我最近停止使用强类型视图模型。

编辑用户信息的页面工作正常，但编辑图片信息的页面不会回发在输入字段中所做的任何编辑；除了正确的 ID 之外，所有其他值都返回为空。它们的结构似乎完全相同——我不知道有什么区别。据我所知，两个页面的代码是相同的，但我没有在第二个页面上获取数据。

**有效的用户控制器和视图**

**控制器**

```
public ActionResult Preferences()
{
    int userid = getUserID(User.Identity.Name);  

    // Info for user preferences
    var accountInfo = db.users.Single(l => l.ID == userid);  

    ViewData["accountInfo"] = accountInfo;

    AccountController usr = new AccountController(); // Info for user menu
    ViewData["userInfo"] = usr.getUserInfo(User.Identity.Name);

     return View();
}

[HttpPost]
public ActionResult Preferences(user accountInfo, string oldPW)
{
    // Do stuff to save user info
    return RedirectToAction(actionname, routeValues);
} 
```

**看法**

```
@using (Html.BeginForm("Preferences", null, FormMethod.Post, 
                                            new { id = "prefsform" }))
{
AutoShowApp_MVC.user item = new AutoShowApp_MVC.user();
item = ViewBag.accountInfo;

<input id="lastname" name="lastname" type="text" value="@item.lastname"/>
<input id="address1" name="address1" type="text" value="@item.address1"/>
<input id="city" name="city" type="text" value="@item.city"/>
<input id="state" name="state" type="text" value="@item.state"/>
<input type="submit" value="Submit Changes"  />

} 
```

**图片控制器和视图不起作用**

**控制器：**

```
public ActionResult Edit(long id)
{
    var picInfo = db.lmit_pics.Single(l => l.ID == id);
    ViewData["picInfo"] = picInfo; // get Picture Info

    // Get User Info for menu
    AccountController usr = new AccountController(); 
    ViewData["userInfo"] = usr.getUserInfo(User.Identity.Name);

    return View();
}

[HttpPost]
public ActionResult Edit(lmit_pics picInfo)
{
    // Do stuff to save picInfo
    return RedirectToAction("Index");
} 
```

**看法：**

```
@using (Html.BeginForm("Edit", null, FormMethod.Post, new { id = "editform" }))
{
    AutoShowApp_MVC.lmit_pics item = new AutoShowApp_MVC.lmit_pics();
    item = ViewBag.picInfo;
    <input type="text" id="model" value="@item.model" />
    <input type="text" id="description" value="@item.description" />
    <input type="submit" value="Save" /> 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:14:09.637

您没有在图片编辑表单的输入中指定名称属性。

```
<input type="text" id="model" value="@item.model" /> 
```

应该

```
<input type="text" id="model" name="model" value="@item.model" /> 
```

表单集合从 name 属性起作用，而不是 Id 属性，这就是您没有获取任何数据的原因（您是，它只是没有正确归因）。

但是，我同意上述 Wahid 的观点，使用强类型视图模型、editorFor 助手等不仅有助于防止上述问题，而且在使网站更安全、更易于维护方面确实有很大帮助。

# visual-c++ - VC++ 等效于 VB6 中的 typdef void*

> ID：11189981
> 
> 赞同：1
> 
> 时间：2012-06-25T13:07:29.663
> 
> 标签：visual-c++, vb6

我有一个 vc++ dll，它有一个这样的函数调用：

```
 typedef void * SIS_HANDLE;
 EXTERN_C SDK4OpenDevice (SIS_HANDLE* sDev ); 
```

现在我试图在 VB6 中调用 VC++ dll，在 VB6 中是否有任何等价物。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:18:36.460

是的，它是一个指针大小的整数，`Long`在 VB6 中。并且您的函数需要一个指向指针的指针，因此它将是`ByRef`.

```
Declare Sub SDK4OpenDevice(ByRef sDev As Long); 
```

但请注意调用约定，如果该`EXTERN_C`宏不隐藏`__stdcall`or`__pascal`关键字，则无法直接从 VB6 调用该函数。

# objective-c - 正则表达式 - 从搜索中排除一个词

> ID：11189982
> 
> 赞同：0
> 
> 时间：2012-06-25T13:07:32.117
> 
> 标签：objective-c, regex, replace, nsregularexpression

我已尝试以下方法从正则表达式搜索中排除单词“and”和“the”，但它似乎不起作用。知道我做错了什么吗？

```
 NSString *pattern = [NSString stringWithFormat:@"\\b%@\\b\\b(?!.*\\b(?:and|the)\\b)", word];
        NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:pattern options: NSRegularExpressionCaseInsensitive error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:29:59.103

似乎Objective C确实支持负面的lookbehinds ..所以我将链接你两个关于负面lookbehinds的优秀帖子。

[http://www.codinghorror.com/blog/2005/10/](http://www.codinghorror.com/blog/2005/10/excluding-matches-with-regular-expressions.html) exclude-matches-with-regular-expressions.html（杰夫·阿特伍德）

[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)（上述博客文章的第二个链接）

# c# - 如何在不使用存储过程的情况下使用 C# 中的 MySQLCommand 在 MySQL 中执行批量插入创建安全查询？

> ID：11189983
> 
> 赞同：4
> 
> 时间：2012-06-25T13:07:34.510
> 
> 标签：c#, mysql

在以下示例中，我构建了一个查询以对 MySQL 数据库进行批量插入：

```
const string QUERY = "INSERT INTO contacts (first_name,last_name) VALUES{0};";

public string BuildQuery(IEnumerable<contact> contacts)
{
    List<string> values = new List<string>();

    foreach (var contact in contacts)
    {
        values.Add(string.Format("('{0}','{1}')", contact.first_name, contact.last_name));
    }

    return string.Format(QUERY, string.Join(",", values));
} 
```

结果可能如下所示：

```
INSERT INTO contacts (first_name,last_name) VALUES("J","Kappers"),("A","Temple") 
```

我可以做些什么来编写一个不易发生 SQL 注入的更安全的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:56:05.840

```
const string QUERY = "INSERT INTO contacts (first_name,last_name) VALUES" + 
                      BuildQuery(c, contacts);

public string BuildQuery(MySQLCommand c, IEnumerable<contact> contacts)
{
    List<string> values = new List<string>();
    string query = null;
    int i = 0;
    foreach (var contact in contacts)
    {
       i++;
       query += "(@firstName" + i + ", @lastName" + i + ")";
       c.Parameters.AddWithValue("@firstName" + i, contact.first_name);
       c.Parameters.AddWithValue("@lastName" + i, contact.last_name);

       if(i < contacts.Count) 
          query += ",";
    }

    return query
} 
```

你可以在这里看到一个[相关的线程](https://stackoverflow.com/questions/10190622/how-to-pass-objects-byte-array-in-query-if-query-is-not-parameterized)！。我一定错过了一些琐碎的事情，但这对你来说是微不足道的。当然你知道`contacts`没有元素时会发生什么。我没有看到更多的边缘情况。顺便说一句，请注意，您可以添加多少此类参数，具体取决于 mysql 允许的最大数据包大小。您可以更改它，或注意不超过该限制。干杯! :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T13:34:42.263

您可以使用与普通 SQL 命令几乎相同的方式转义 MySQL 命令参数。这是[官方 MySQL 手册中的示例](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-prepare)

```
 private void PrepareExample()
 {
     MySqlCommand cmd = new MySqlCommand("INSERT INTO mytable VALUES (?val)", myConnection);
     cmd.Parameters.Add( "?val", 10 );
     cmd.Prepare();
     cmd.ExecuteNonQuery();

     cmd.Parameters[0].Value = 20;
     cmd.ExecuteNonQuery();
 } 
```

PS 无论您选择什么 -**从不**使用用户字符串操作向 SQL 命令添加/插入参数。这是 SQL 注入攻击的主要来源

# objective-c - 如何在 NSTextView 中为子字符串添加书签？

> ID：11189986
> 
> 赞同：1
> 
> 时间：2012-06-25T13:07:43.403
> 
> 标签：objective-c, cocoa, rtf, nstextview

在我的应用程序中，我想为 NSTextView 中的文本提供书签。我应该使用[RTF 书签](http://www.biblioscape.com/rtf15_spec.htm#Heading48)吗？如果是这样，以后如何确定他们的位置？

有哪些选项可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:50:46.777

请参阅[属性字符串编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/AttributedStrings.html#//apple_ref/doc/uid/10000036i)和[文本属性编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextAttributes/TextAttributes.html#//apple_ref/doc/uid/10000088i)。您可以为给定范围设置[标准](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000167-SW6)或[自定义](https://stackoverflow.com/questions/2626667/saving-custom-attributes-in-nsattributedstring)属性属性字符串（NSTextView 使用）。您还可以使用[NSTextAttachment](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextAttachment_Class/Reference/Reference.html)来显示某种可见的“锚点”。选择“书签”时，将属性运行或附件的范围滚动到可见。

真的，就“风格”而言，天空才是极限。这仅取决于您要尝试做什么以及想要多少功能。

# mfc - 富编辑控件2.0创建时设置背景颜色

> ID：11189987
> 
> 赞同：3
> 
> 时间：2012-06-25T13:07:44.003
> 
> 标签：mfc, richedit-control

在我的应用程序中，按下按钮会激活一个对话框。此对话框包含富编辑控件 2.0。我想在创建时将这个富编辑控件 2.0 的背景颜色设置为红色*，*即这个富编辑控件的默认背景颜色应该是红色（而不是白色，这是实际的默认值）。我正在考虑使用 SetBackgroundColor() 函数来设置颜色，但我想知道在哪里放置代码，以便在*创建*富编辑控件 2.0 时执行它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:51:51.963

创建时不能这样做。您必须在创建后执行此操作。如果控件在对话框中，一般会这样：

1) 在对话框类中覆盖 DoDataExchange() 并为 DDX_Control(pDX, IDC_RICHEDI1, m_richedit) 输入一个条目——替换正确的 id 和变量名

2) 在您的对话框中覆盖 OnInitDialog()。使用 m_richedit（或任何您命名的名称），使用 SetBackgroundColor 设置背景颜色。它可能无法执行您想要的操作，并且可能需要查看 SetDefaultCharFormat、SetParaFormat 或 SetSelectionCharFormat。

# c#-4.0 - TCP 通信行为

> ID：11189988
> 
> 赞同：0
> 
> 时间：2012-06-25T13:07:47.007
> 
> 标签：c#-4.0

我通过 TCP 套接字异步发送数据。我目前连接到本地计算机上的 SMSC 模拟器，只是为了检查是否正确创建了所有数据包，然后再连接到真实的东西。

我只发送了一次 PDU，SMSC 完美接收，并生成响应 PDU 并将其发送回来，但之后模拟器上会弹出一条错误消息，指出它无法接收 100 条消息。问题是我只发送一次，没有循环运行不断发送消息，我已经调试并检查它只发送一次。

我认为问题可能出在PDU的创建上。我首先创建一个大小为 1024 的字节数组，然后根据需要进行填充。填满时，它不会使用数组的整个空间。所以我在想，当模拟器收到它时，从数组中检索数据，然后它在实际数据之后读取数组中的“0”字节作为新消息，因为它给了我一条响应消息，说数据无效。

有没有办法避免这种情况，或者我只是在这里遗漏了什么？据我说，当接收字节数组中的值时，你应该只使用必要的编码来检索数据，其余的“0”字节应该被忽略吗？

抱歉，如果我的问题含糊不清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:12:25.057

问题确实是数组中的 0bytes。

在阅读了 Stack Overflow 上发表的一篇文章后，我通过从数组中删除 0 字节来解决它：

这是解决方案：

```
 private byte[] CleanArray(byte[] array)
    {
        int i = array.Length - 1;

        while (array[i] == 0)
        {
            i--;
        }

        byte[] cleanedArray = new byte[i + 1];
        Array.Copy(array, cleanedArray, i + 1);

        return cleanedArray;
    } 
```

# java - Twitter4j：在主题标签中搜索关键字

> ID：11189990
> 
> 赞同：3
> 
> 时间：2012-06-25T13:07:58.090
> 
> 标签：java, twitter, filter, twitter4j, hashtag

我正在使用 Twitter4j 开发一个应用程序。我正在尝试导入带有特定主题标签的推文（例如：天气）然后，我想通过搜索关键字对带有该主题标签的推文进行分类。

例如：一些导入的推文可能是

```
- OMG, I hate this rain #weather
- This sunshine makes me feel so happy #weather
- Such strange #weather! One moment it rains, the next the sun shines. Confusing!
- Rain makes me sad #weather
- I love the sunshine! #weather 
```

然后，我想将这些推文分类为：

```
- hate, Confusing, sad,... are negative 
- happy, love,... are positive 
```

PositiveTweets 将是：

```
- This sunshine makes me feel so happy #weather
- I love the sunshine! #weather 
```

NegativeTweets 将是：

```
- OMG, I hate this rain #weather
- Such strange #weather! One moment it rains, the next the sun shines. Confusing!
- Rain makes me sad #weather 
```

所以，`NegativeTweets=3`和`PositiveTweets=2`

任何人都可以帮助我或将我指向类似的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:04:26.780

您可以查询#weather 主题标签，然后根据推文是否包含您为天气好或坏的天气指定的任何关键字，将它们分成单独的列表。

```
public static void main(String[] args) throws TwitterException {
    List<Tweet> goodWeather = new ArrayList<Tweet>();
    List<Tweet> badWeather = new ArrayList<Tweet>();

    Twitter twitter = new TwitterFactory().getInstance();
    System.out.println("Fetching Weather Data...");

    // get the 1000 most recent tweets tagged #weather
    for (int page = 1; page <= 10; page++) {
        Query query = new Query("#weather");
        query.setRpp(100); // 100 results per page
        query.setPage(page);
        QueryResult qr = twitter.search(query);
        List<Tweet> qrTweets = qr.getTweets();

        // break out if there are no more tweets
        if(qrTweets.size() == 0) break;

        // separate tweets into good and bad bins
        for(Tweet t : qrTweets) {
            if (t.getText().toLowerCase().contains("happy") ||
                t.getText().toLowerCase().contains("love")) {
                goodWeather.add(t);
            }

            if (t.getText().toLowerCase().contains("sad") ||
                t.getText().toLowerCase().contains("hate")) {
                badWeather.add(t);
            }
        }
    }

    System.out.println("Good Weather: " + goodWeather.size());
    for (Tweet good : goodWeather) {
        System.out.println(good.getCreatedAt() + ": " + good.getText());
    }

    System.out.println("\nBad Weather: " + badWeather.size());
    for (Tweet bad : badWeather) {
        System.out.println(bad.getCreatedAt() + ": " + bad.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:05:09.297

我想你想做的是`Sentiment Analysis`看看你检索到的推文中有多少是正面的，有多少是负面的，对吧？一个好的开始是查看`SentiWordNet`它已经存储了很多单词，以及单词的正面或负面极性，它只是一个包含所有这些数据的文本文件。您需要解析它并将数据存储在某种数据结构中。完成所有这些后，您只需扫描推文并匹配单词并获得分数，然后标记推文。这并不像听起来那么难，`SentiWordNet`请先搜索。我相信这是更好的方法，因为从长远来看它会帮助你更多:)

希望这有帮助

# opengl - 黑色背景的OpenGL透明度

> ID：11189996
> 
> 赞同：3
> 
> 时间：2012-06-25T13:08:09.757
> 
> 标签：opengl, background, transparency

我正在使用精灵动画（OpenGL + C++）。我在混合时遇到了一些麻烦。

我正在尝试加载具有黑色背景的图像并将其绘制在另一个纹理上，而图像周围不会出现黑色块。图像具有 Alpha 通道并启用了混合。

我尝试使用不同的混合功能。我最终得到一个块状图像或半透明图像。

我知道如果我用透明颜色代替黑色背景而不是使用图像编辑软件，我可以做到这一点，但我想在没有它并且不使用图像蒙版的情况下让它工作。

一个更好地了解我的情况的例子。

纹理上的图像和图像处理不正确：

![在此处输入图像描述](../Images/73d4ad454e78f7e9b3f258c4bb44c899.png)

我想要的方式：

![在此处输入图像描述](../Images/d95906b702f096e6877dc70b8fb29938.png)

这是我正在使用的一些代码。我选择了似乎最相关的内容，因为大量代码分布在几个类中。

```
 glEnable(GL_DEPTH_TEST);
    ....
    ....
    glEnable(GL_TEXTURE_2D);
    /*Drawing the image with black background first*/
    glBindTexture(GL_TEXTURE_2D, blockImage);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
        //drawing code
        ...
    ...
    ...
    /*background texture is drawn last*/
    glBindTexture(GL_TEXTURE_2D, bgImage);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glBlendFunc(GL_ONE, GL_DST_ALPHA);
    //drawing code
        ...
    glDisable(GL_BLEND);
    glDisable(GL_TEXTURE_2D); 
```

我真的不需要实际的代码来做到这一点。对逻辑的简单解释就足够了（绘制和混合的顺序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:59:41.193

OpenGL 固定功能管道没有对颜色键控的内置支持。如果你想这样做，你可以编写一个着色器来测试片段的颜色并使用该`discard`操作。

如果要在固定功能中执行此操作，则必须正确使用 alpha 通道（在预处理中使所有黑色区域 alpha = 0）。