# StackOverflow 问答 11270000-11270999

# google-app-engine - 将 GAE 数据源用于商业目录等网站需要多少费用？

> ID：11270000
> 
> 赞同：0
> 
> 时间：2012-06-29T23:05:04.783
> 
> 标签：google-app-engine, google-cloud-datastore

我将创建一个网站，或者您可以将其称为 Web 应用程序，并且我尝试使用 GAE 数据存储。然而，许多人会使用这个网站来搜索公司、创建个人资料（帐户）。我不确定要花多少钱，因为会有很多请求来获取公司资料和创建新资料。所以，我需要一些关于我的想法的建议，它会花费很多吗？GAE 数据存储是否适合此类网站和应用程序？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:19:39.037

首先，要估计您需要回答一些问题的成本。您期望的读写操作数是多少？您将存储多少个实体？每个实体的大致大小是多少？使用该值，您可以根据当前[定价](https://developers.google.com/appengine/docs/billing)估算成本。

您没有写出您的要求是什么，但我认为其中之一就是可扩展性。看一下来自[docs](https://developers.google.com/appengine/docs/python/datastore/)的这段摘录。

> App Engine 数据存储区是一种无模式对象数据存储区，可为您的 Web 应用程序提供强大、可扩展的存储，无需计划停机、原子事务、读写的高可用性、读取和祖先查询的强一致性以及所有其他查询的最终一致性。

如果这不能满足您的需求，您还可以使用[Google Cloud Sql](http://developers.google.com/cloud-sql/)。

# r - ggplot2 避免图例符号周围的框

> ID：11270001
> 
> 赞同：52
> 
> 时间：2012-06-29T23:05:12.820
> 
> 标签：r, ggplot2

考虑下面的示例图。我想让传说中每个符号周围的小盒子消失。我该怎么做？

```
 ggplot(mtcars, aes(wt, mpg, shape=factor(cyl))) + geom_point() + theme_bw() 
```

![](../Images/ea0513ab6348abb513d235e670a1ab1b.png)

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-29T23:09:12.303

您正在寻找：

```
 + opts(legend.key = theme_blank()) 
```

你可以在`?opts`. 我不记得是哪一个了，所以我试了几次，直到我猜对了。

**注意**：由于版本 0.9.2`opts`已被[替换](http://docs.ggplot2.org/current/theme.html)为`theme`：

```
+ theme(legend.key = element_blank()) 
```

# zend-framework - 我的 Web 应用程序中的应用程序

> ID：11270005
> 
> 赞同：2
> 
> 时间：2012-06-29T23:05:35.703
> 
> 标签：zend-framework, architecture

目前我们正在开发社交网络，其中包括应用程序，例如游戏。开发人员没有公开的 API 来制作他们的应用程序，而是我们自己开发的应用程序。

我们的平台基于 Zend 框架。我们还有用于聊天、通知和其他推送任务的 XMPP 协议实现（clientside-strophe、serverside-java）。XMPP 将在应用程序中使用。

我们希望将应用程序与社交网络代码分开，这样我们就可以保持简单、轻量。

对于这种分离，你可以建议什么策略？我们的愿望是保持架构和代码简洁明了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:58:14.773

由于这是一个架构问题，我相信有很多方法可以满足您的需求。这是我的 2 美分。让您的应用服务器与社交媒体服务器完全分离。使用客户端 JS 脚本在您的社交媒体网站上嵌入和呈现应用程序。

可以这样想：您知道 Facebook 社交插件允许在外部站点中嵌入 Facebook 组件。下面是嵌入在完全独立的 DNN 门户中的 Facebook LikeBox 的屏幕截图。

![http://bit.ly/MaaKnU](../Images/916d4553164a95f79fec0126022a4c2a.png)

在您的场景中，假设 DNN 作为您的社交媒体网站。和 LikeBox 作为您的应用程序。在架构上，它们被很好地分开，甚至可以从不同的服务器上提供服务。但是集成发生在客户端。

如果您需要这些应用程序与社交媒体网站进行交互，您可以通过 REST API 来实现。或者你可以使用 DOM 事件或简单的 JS 函数调用。

几天前，我写了一篇关于类似架构的博客文章，可以在以下位置找到： http: [//blog.hasith.net/2012/06/traditional-portals-are-dead-long-live.html](http://blog.hasith.net/2012/06/traditional-portals-are-dead-long-live.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:50:13.270

像 facebook 应用程序这样的 3rd 方应用程序是访问 facebook **DATA**的独立应用程序。

因此，通过您的 API 在 Internet 上提供您的社交网络数据，实现`Zend_OAuth`身份验证[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code) 之后，您可以冻结您的社交网络代码。

现在您可以在 Javascript/Flash 中创建您的 Web 应用程序，通过您的 API 访问您的社交网络数据。

# php - Highchart - 使用 PHP、MYSQL 和 jQuery.get 解析数据

> ID：11270006
> 
> 赞同：1
> 
> 时间：2012-06-29T23:05:45.797
> 
> 标签：php, jquery, mysql, highcharts

我正在尝试显示来自 MYSQL 的数据。[我在http://www.blueflame-software.com/blog/using-highcharts-with-php-and-mysql/](http://www.blueflame-software.com/blog/using-highcharts-with-php-and-mysql/)看到了一个例子。如何为我的图表实现 jQuery.get？请我对 jQuery 很陌生，需要很多帮助，谢谢！有人可以让我的图表显示数据吗？

***用于图表的 html***

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>  
<meta charset="utf-8">

   <script src="http://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/scriptaculous/1.8.3/scriptaculous.js"></script>
   <script src="http://www.highcharts.com/js/adapters/prototype-adapter.src.js" ></script>
   <script src="http://www.highcharts.com/js/highcharts.src.js"></script>

   <script>      
      var chart;      
      function create()
      {
         chart = new Highcharts.Chart({
                chart: {renderTo: 'container', defaultSeriesType:'spline', height: 400},
                title: {text: 'SEN-2 Bulkhead Isolation'},
                xAxis: {title: {text: 'Frequency Hz'}, type: 'logarithmic'},    

                yAxis: {title: {text: 'Isolation dB'}, plotLines: [{ value: 0, width: 1, color: '#808080'}]
                },
                tooltip: {
                formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+'('+
                    this.x +' , '+ this.y +')';}
                },
                legend: {layout: 'vertical', align: 'right', verticalAlign: 'top', x: 40, y: 100, borderWidth: 0, width: 300 },
                    series: [{ 
                    name: 'SSTP Keystone STEEL', 
                    data: [[0.6,74.9 ],[0.895,81.74],[ 1.336,77.26],[ 1.993,76.81], [2.974,80.45 ],[4.438,69.41], [6.622,61.37],[9.881,79.07],[14.744,79.75],[20.000,72.33]],pointStart: 0.6
                     }, {
                    name: 'SSTP Keystone COPPER',
                    data: [[0.6,70.18 ],[0.895,85.57],[ 1.336,75.1],[ 1.993,76.09], [2.974,80.45 ],[4.438,67.32], [6.622,59.79],[9.881,72.37],[14.744,73.54],[20.000,72.8]],pointStart: 0.6
                     }, {
                    name: 'SSTP Keystone COPPER UTP antenna',
                    data: [[0.6,53.32], [0.895,56.53], [1.336,72.16], [1.993,65.82],[2.974,80.45],[4.438,63.16],[6.622,59.79],[9.881,69.63],[14.744,70.41],[20.000,73.45]],pointStart: 0.6
                    }, {
                    name: 'SSTP Keystone COPPER STP antenna',
                    data: [[0.6,62.33], [0.895,61.82], [1.336,79.92], [1.993,76.09],[2.974,76.18],[4.438,63.16],[6.622,61.37],[9.881,72.37],[14.744,74.68],[20.000,72.33]],pointStart: 0.6
                    }, {
                    name: 'absorber inside bundle shield',
                    data: []
                     }, {
                    name: 'Series6',
                    data: []
                    }, {
                    name: 'SEN-2 Baseline Isolation',
                    data: [[0.6,76.07], [0.895,90.28], [1.336,77.26], [1.993,82.58],[2.974,83.53],[4.438,74.63],[6.622,63.45],[9.881,76.86],[14.744,76.98],[20.000,72.33]],pointStart: 0.6
                     }],    
                    });
      }

      function destroy()
      {
         if( chart ) {
            chart.destroy();
            delete chart;
            chart = null;
         }   
      }

      document.observe("dom:loaded", function() {
         $('destroy').observe("click", function(){destroy();})
         $('create').observe("click", function(){create();})
         create();
      });

   </script>
</head>
<body>
   <a id="destroy" href="#">destroy</a> | <a id="create" href="#">create</a>
   <div id="container" style="height: 400px; width: 900px"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:47:56.877

好的，这是一个完整的解决方案：

```
<!DOCTYPE html><html><head>
</head><body>

<div id="container" style="height: 400px; width: 900px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://www.highcharts.com/js/highcharts.src.js"></script>
<script>
jQuery(function($) {
    var options = {
        chart: {renderTo: 'container', defaultSeriesType:'spline', height: 400},
        title: {text: 'SEN-2 Bulkhead Isolation'},
        xAxis: {title: {text: 'Frequency Hz'}, type: 'logarithmic'},
        yAxis: {title: {text: 'Isolation dB'}, plotLines: [{ value: 0, width: 1, color: '#808080'}]},
        tooltip: {
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+'('+this.x +' : '+ this.y +')';
            }
        },
        legend: {layout: 'vertical', align: 'right', verticalAlign: 'top', x: 40, y: 100, borderWidth: 0, width: 300 },
        series: []
    };

    jQuery.get('data2.php', null, function(tsv) {
        var data = {};
        tsv = tsv.split(/\n/g); // split into rows
        for (var row=0, rows=tsv.length; row<rows; row++) {
            var line = tsv[row].split(/\t/g), // split into columns
                series_name = line[0],
                x = Number(line[1]),
                y = Number(line[2]);
            if (!data[series_name]) data[series_name] = [];
            data[series_name].push([x,y]);
        }
        for (var series_name in data) {
            options.series.push({
                name: series_name,
                data: data[series_name]
            });
        }
        new Highcharts.Chart(options);
    });

});
</script>
</body></html> 
```

我用这个 TSV 数据对其进行了测试：

```
SSTP Keystone STEEL 0.6 74.9 
SSTP Keystone STEEL 0.895   81.74
SSTP Keystone STEEL 1.336   77.26
SSTP Keystone STEEL 1.993   76.81
SSTP Keystone STEEL 2.974   80.45 
SSTP Keystone STEEL 4.438   69.41
SSTP Keystone STEEL 6.622   61.37
SSTP Keystone STEEL 9.881   79.07
SSTP Keystone STEEL 14.744  79.75
SSTP Keystone STEEL 20.000  72.33 
```

我正在做的是通过 TSV 循环并构建`data`变量，就像以系列名称为键的关联数组一样，如下所示：

```
{
    'SSTP Keystone STEEL': [[0.6,74.9],[0.895,81.74],...],
    ...
} 
```

然后我循环遍历`data`变量并`options.series`以 HighCharts 期望的格式构造 - 具有`name`属性和`data`属性的对象数组。

# php - 推动多数据库建模

> ID：11270008
> 
> 赞同：2
> 
> 时间：2012-06-29T23:05:57.160
> 
> 标签：php, database-design, model, propel

我刚开始使用 Propel，我喜欢它，但我有一个关于如何利用多个数据库连接的问题。我知道我可以在我的模式中设置东西以连接到多个不同的数据库，但我很好奇如何在代码中处理这个问题。

我遇到的问题是多个数据库，每个数据库的架构略有不同，没有数据仓库。结果，我有类似以下内容：

```
databaseName: westCoastUsers
table: users
column1: email
column2: password
column3: FirstName

databaseName: eastCoastUsers
table: users
column1: email
column2: password
column3: firstName
column4: lastName 
```

现在在 PHP 非 Propel 版本中，我手动完成所有这些，并根据需要手动切换数据库。我希望简化一些事情，我很好奇如何建模。有没有办法让我拥有像eastCoastUser和westCoastUser这样的模型，每个模型都引用正确的数据库/等，或者我试图插入不支持的东西？

我读到这个：[如何在推进中使用两个数据库，](https://stackoverflow.com/questions/6908956/how-to-use-two-database-in-propel)但不确定如何在代码中实际执行它。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:32:55.623

在您的模式文件中，您可以为代表您的表的类提供一个名称。它们不必使用与表相同的名称。您可以使用`phpName`table 元素上的属性来执行此操作。

例如，您的 schema.xml 可能包含类似这样的内容

```
<database name="westCoastUsers">
  <table name="users" phpName="WestCoastUser">
    ...columns here...
  </table>
  ...
</database>
<database name="eastCoastUsers">
  <table name="users" phpName="EastCoastUser">
    ...columns here...
  </table>
</database> 
```

（编辑，注意`name="westCoastUser"`数据库元素上的 是指数据库的名称，而不是名称相似的类）

然后在构建时，propel 将生成`WestCoastUser`, `WestCoastUserQuery`, `WestCoastUserPeer`, `EastCoastUser`,`EastCoastUserQuery`和, `EastCoastUserPeer`。每个类都将使用它在您的架构中定义的数据库进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:43:27.930

我最初是为 symfony 1.2 编写的，但我相信这一切都适用。

我在这个例子中使用 Symfony 1.2.4。我有两个数据库，主数据库和从属数据库

如果您要使用多个数据库，您需要做一些事情。

```
You will need separate schema files for both (master.schema.yml and slave.schema.yml)
To use build-sql and insert-sql, you will need multiple propel.ini files
You will need to add an attribute to your schema files to get them to build right 
```

步骤1

使用两个单独的连接创建 databases.yml：

```
dev:
  propel:
  param:
  classname: DebugPDO

test:
  propel:
  param:
  classname: DebugPDO

all:
  propel:
  class: sfPropelDatabase
  param:
  classname: PropelPDO
  dsn: mysql:dbname=master;host=xxx.xxx.xxx.xxx
  username: uname
  password: pass
  encoding: utf8
  persistent: true
  pooling: true

master:
  class: sfPropelDatabase
  param:
  classname: PropelPDO
  dsn: mysql:dbname=slave;host=xxx.xxx.xxx.xxx
  username: uname
  password: pass
  encoding: utf8
  persistent: true
  pooling: true 
```

第2步

如前所述，您将需要两个模式文件。请注意，您需要为与表匹配的数据库定义一个包属性，在这种情况下，它是主连接的“lib.model.master”。

master.schema.yml

```
master:
  _attributes:
  package: lib.model.master
  defaultIdMethod: native
my_table:
  _attributes: { package: lib.model.master }
  my_id: { type: INTEGER, size: '11', primaryKey: true, autoIncrement: true, required: true } 
```

ETC.....

slave.schema.yml

```
slave:
 _attributes:
 package: lib.model.slave
 defaultIdMethod: native
 auctionp:
 _attributes: { package: lib.model.slave } 
```

ETC.....

第 3 步

您将需要创建单独的 propel.ini 文件。在这个例子中，我使用了 propel-master.ini 和 propel-slave.ini。这些文件中的每一个都需要针对它们各自的数据库进行配置。

第4步

您将需要一个好的批处理文件来使用推进工具构建您的数据库。我的看起来像这样：

从应用程序根目录：symfony build-model；cp 配置/slave-propel.ini 配置/propel.ini；symfony 推进：构建-sql；symfony 推进：插入-sql --no-confirmation；cp 配置/propel-master.ini 配置/propel.ini；symfony 推进：构建-sql；symfony 推进：插入-sql --no-confirmation；

第 5 步

如果您已经使用一个数据库构建了模型并且现在正在进行拆分，则需要清除 /lib/model。删除“map”和“om”目录以及根目录中的文件将帮助您避免冲突。

第 6 步

要在代码中使用这两个数据库，您需要在连接中添加一些内容，如下所示：

示例 1：

```
$object = self::doSelect($c, Propel::getConnection('master')); 
```

示例 2：

```
$newObject->save(Propel::getConnection('slave')); 
```

示例 3：

```
$con = Propel::getConnection("propel");
$sql = "ALTER TABLE runlinhp CHANGE class class_rat varchar(15)";
$stmt = $con->prepare($sql);
$stmt->execute(); 
```

# jquery - Firefox（通过 jQuery）报告没有 src 属性的图像高度错误

> ID：11270013
> 
> 赞同：2
> 
> 时间：2012-06-29T23:06:34.080
> 
> 标签：jquery, html, image, height, src

[http://jsfiddle.net/2N854/](http://jsfiddle.net/2N854/)

html:

```
<img alt="test" width="100" height="100"> 
```

javascript:

```
alert($('img').height()); 
```

在大多数浏览器 (chrome) 上，警报会按预期显示“100”。在 Firefox 上，它没有。它“有用地”将 img 转换为如下所示的内容：

```
<div>test</div> 
```

..并报告其高度-在我的情况下为“ 19”。我可以通过在我检查高度之前分配一个占位符 src 来解决这个问题，这可以正常工作。

我并没有真正忘记 src 属性，而是我正在客户端计算它。

我想我的问题是 - 有没有办法禁用这个 Firefox “帮助”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T23:10:21.697

是的，您可以分配`display: inline-block`给您的图像 - [http://jsfiddle.net/2N854/1/](http://jsfiddle.net/2N854/1/)和 FF 会表现:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T23:10:05.443

这不完全是您问题的答案，但您不能直接使用`$('img').attr('height')`吗？

# php - Symfony 和 Silex 的区别

> ID：11270016
> 
> 赞同：36
> 
> 时间：2012-06-29T23:06:49.577
> 
> 标签：php, symfony, frameworks, silex

我想试试 Silex，但我有一些问题。

我知道使用 Symfony2，我想知道 Silex 是否与 Symfony 有很大不同或者它是相同的东西（相同的操作，相同的代码......）？

此外，Silex 被推荐用于小型 PHP 项目，而 Symfony 被推荐用于中型或大型项目，是吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-30T12:58:14.090

有几点值得注意：

*   Silex 基于 Symfony2 组件，就像 Symfony2 框架一样。因此，它可以被认为是组件的替代用户界面（用户是 Web 开发人员）。
*   由于它们使用相同的基础，因此它们之间的迁移应该相对容易。
*   就像 Symfony2 一样，Silex 主要是一个控制器框架。它为您提供了一些结构，但模型和视图部分由第三方库（例如 Twig 或 Doctrine）处理。
*   由于您的业务逻辑无论如何都不应该在您的控制器中，如果您将代码分开并保持控制器轻便，那么项目大小方面的限制因素将只是您拥有的路由数量。

也就是说，Silex 不会给你 Symfony2 拥有的捆绑包。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-30T13:17:28.247

以下是关于何时使用 Silex 的一些有趣想法（尤其是在评论中）： [https ://web.archive.org/web/20160131151109/http://www.testically.org/2011/10/11/is-there -a-specific-situation-when-to-use-a-php-micro-framework-like-silex/](https://web.archive.org/web/20160131151109/http://www.testically.org/2011/10/11/is-there-a-specific-situation-when-to-use-a-php-micro-framework-like-silex/)

Silex 本身非常简单，这意味着如果您想要更多，而不仅仅是路由和测试，您将需要以服务的形式添加特定功能（DB、Twig ...）。我建议看看一些为您提供此功能的现成板： [https](https://github.com/lyrixx/Silex-Kitchen-Edition) ://github.com/lyrixx/Silex-Kitchen-Edition 或 [https://github.com/ivoba/superleansilexplate](https://github.com/ivoba/superleansilexplate)（这是我的 :)）

另一点是 Silex 的占用空间可能比 Symfony2 更轻，所以如果您需要一个更小更快的站点，Silex 值得考虑。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-03T01:03:51.177

**（更新）从 Symfony 2.8 开始**，您可以使用 symfony 2 作为带有微内核控制器的微框架。请参阅此处的简短描述：[symfony.com/blog/new-in-symfony-2-8-symfony-as-a-microframework](http://symfony.com/blog/new-in-symfony-2-8-symfony-as-a-microframework)。现在 Symfony 让我们可以更好地控制结构和架构。如果您更喜欢 Symfony 2 样式，则可以替代 Silex。

**将 Silex 与 Symfony 2.8 之前的版本进行比较**

Silex 微框架基于 Symfony，但并不完全相同。为一个小项目使用诸如 Symfony 之类的全栈框架只是对项目的过度杀伤。

在微框架中，您可以更灵活地选择要使用的工具。您可以对应用程序架构和逻辑做出更多决策。在具有一些扩展的全栈框架中，您将拥有一个已经预定义的架构和逻辑，并对其配置进行限制和限制。

Silex 旨在构建工具，而不是获取您可能不需要的设置工具。我会说，对于 Symfony 中的小型项目，您必须删除功能 - 在 Silex 中您必须添加它们。

Silex 不适合大型项目也是不正确的。Silex 可以成功地用于大型项目，但请记住，您必须构建工具以满足您的要求（如果您需要自定义架构和逻辑 - 也许这是正确的方法）。除此之外，我会考虑使用 Symfony，因为 Symfony 已经有很多开箱即用的工具。

[![Silex 依赖注入](../Images/c053d4a0a1f22aa7caaf7a60c7a60f3e.png)](https://i.stack.imgur.com/J3jsS.png)

请记住： [![Silex 限制](../Images/4879d494711f15a099304956a89ac7ff.png)](https://i.stack.imgur.com/OZd59.png)

总而言之，Silex 适合较小的应用程序，对于那些应用程序，它肯定可以取代 Symfony。Silex 也可用于大型项目（但对于大型应用程序，我建议使用全栈框架，例如 Symfony）。

幻灯片参考：[http](http://www.slideshare.net/dustin.whittle/silex-from-micro-to-full-stack) ://www.slideshare.net/dustin.whittle/silex-from-micro-to-full-stack 。如果您愿意，请继续阅读有关 Silex 框架的更多信息。

我还建议观看此介绍，将 Silex 与 Symfony 进行比较：[https](https://www.youtube.com/watch?v=RDVtnsoOysE) ://www.youtube.com/watch?v=RDVtnsoOysE 。

同样，一些使用 Silex 的 Pro 来自实际使用它的人：[https ://www.youtube.com/watch?v=OJcdHGJFfLU](https://www.youtube.com/watch?v=OJcdHGJFfLU)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-12T21:51:12.553

Silex 适用于小型项目，但也可用于大型项目。我最喜欢 Silex 的是我可以完全控制我的项目结构，但我的项目是否组织良好是我的责任。
如果像我一样，我也推荐它而不是 symfony，你使用 JS 框架将应用程序逻辑移动到客户端。对我来说，只使用 symfony 来服务几个 json 请求感觉有点过头了。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-29T23:08:13.430

Silex 基于独立的 Symfony2 组件，并不像 Symfony 那样真正被视为全栈 Web 应用程序框架。你应该只将它用于只需要几个文件的非常小的项目，否则你很快就会过时。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-26T05:58:45.353

在我写这篇文章的那一刻，**Silex 处于维护模式**，它的**生命周期结束[于 2018 年 6 月](http://symfony.com/blog/the-end-of-silex)**。

这意味着您不应该再将它用于新项目。

他们建议您改用[Symfony 4](https://symfony.com/doc/current/setup/flex.html)。

Silex 非常好而且速度很快（对于简单的请求/要求，可能比 symfony 4 更快），但是 SF4 可能会为我们的应用程序带来一些新的堆栈和好处。

更新：然而，在我从 Silex 迁移到 Symfony 4 的所有尝试中，无论我做什么，简单服务的响应时间都增加了 4 倍。Silex 似乎在简单的微服务方面做得更好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-24T04:22:30.610

Silex 是一个伟大的框架，适用于小型和大型应用程序。为项目提供结构是您在 Silex 的责任。随着项目变得越来越大，您可以很好地将 symfony 组件集成到其中，尽管 symfony 提供者的文档不是很好，尤其是 symfony 安全组件。

Silex 非常适合原型项目。如果您知道您将使用大部分 symfony 组件，那么就选择 symfony，因为您最终会将几乎所有 symfony 组件集成到 silex 中。

就我而言，我需要开箱即用的速度，而 silex 为我提供了速度，虽然我使用了大多数 symfony 组件，但它比开箱即用的 symfony 快得多。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-02-05T02:20:30.733

Silex 是一个 PHP 微框架。用于小型项目。symfony 和 silex 的编码风格与 symfony 几乎相似。但 symfony 用于大型项目

# python - 将带有破折号的列表转换为数字

> ID：11270017
> 
> 赞同：1
> 
> 时间：2012-06-29T23:07:13.680
> 
> 标签：python

我从 CSV 文件制作了一个列表。它看起来像这样：

```
['18', '29', '0'...'0', '-14', '9'] 
```

它在开头有一个文本元素，我弹出了它。现在，Python 不能像使用正确的数字那样使用列表元素。例如，每当我尝试将元素解析为浮点数时，我都会收到错误消息：

```
ValueError: could not convert string to float: - 
```

我的代码如下所示：

```
list2=[[float(column) for column in row] for row in list1] 
```

或这个：

```
list2 = [map(float, x) for x in list1] 
```

两个版本产生相同的结果。如果我尝试不同的数据类型，我会收到如下消息：

```
ValueError: invalid literal for int() with base 10: '-' 
```

谁能告诉我如何让 Python 正确地将破折号解析为数字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T23:14:24.637

看起来您正在创建的列表是一维的，但是当您尝试解析它时，您将其视为 2D 列表，该列表将尝试将每个元素中的每个字符转换为浮点数（因此在尝试执行时会引发错误`float('-')`） . 尝试用以下内容替换该行以解决问题：

```
list2 = map(float, list1) 
```

您还应该尝试`print list1`在该行之前添加以确认列表具有您认为的结构。

# python - 转义任意代码块

> ID：11270021
> 
> 赞同：2
> 
> 时间：2012-06-29T23:07:56.200
> 
> 标签：python, python-3.x

我的脚本接受 Python 代码的任意长度和内容字符串，然后在 exec() 语句中运行它们。如果运行任意代码的时间超过了某个预定限制，则 exec() 语句需要退出，并且需要设置一个布尔标志以指示已发生过早退出。

如何实现？

### 附加信息

这些代码将在多个线程中并行运行（或至少与 GIL 一样并行）。

如果有另一种语言的替代方法，我愿意尝试一下。

我计划清理代码以防止访问任何可能意外损坏我的系统的内容（文件和系统访问、导入语句、对 exec() 或 eval() 的嵌套调用等）。

### 我考虑过的选项

1.  由于 exec() 语句在线程中运行，因此请使用毒丸杀死线程。不幸的是，我读到毒丸不适用于所有情况。
2.  在进程内运行 exec() 语句，然后`process.terminate()`用于杀死所有内容。但是我在 Windows 上运行，并且我已经读过进程创建可能很昂贵。它还使与管理所有这些的代码的通信变得复杂。
3.  只允许在 exec() 语句中预先编写函数，并让这些函数定期检查退出标志，然后根据需要执行清理。这既复杂又耗时，而且要考虑的极端情况太多；我正在寻找一个更简单的解决方案。

我知道这是一个有点奇怪的问题，值得提出“为什么要允许任意代码在 exec() 语句中运行？” 响应类型。我正在尝试一些自我进化的代码。这是我目前的主要绊脚石：如果你允许你的代码做几乎任何事情，那么它可能会永远挂起。你如何重新获得控制权并在它发生时阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:27:10.480

*这不是一个非常详细的答案，但它比我想发表的评论要多。*

您可能需要考虑类似其他问题的问题，以使用多处理作为开始 来[创建具有超时的函数。](https://stackoverflow.com/questions/2196999/how-to-add-a-timeout-to-a-function-in-python)

线程的问题是您可能无法使用*毒丸*方法，因为它们不是从事许多小任务的工人。他们会坐在那里阻止发表声明。它永远不会获得退出的价值。

您提到您担心在 Windows 上使用进程是因为它们很昂贵。因此，您可能会创建自己的进程池（进程列表）。它们都从队列中拉出，您将新任务提交到队列中。如果有任何进程超过了超时时间，则将其杀死，并在池中将其替换为新进程。这样，您就可以将创建新进程的开销限制在它们超时时，而不是为每个任务创建一个新进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T01:09:35.337

这里有几个不同的选项。

首先，从jdi关于使用多处理的建议开始。可能是 Windows 进程创建实际上并不足以破坏您的用例。

如果这确实是一个问题，我个人会使用 Virtual PC，甚至是用户模式 ​​Linux，在另一个操作系统中运行相同的代码，其中进程创建很便宜。您还可以从中获得一个免费的沙箱。

如果您不想这样做，jdi 对进程池的建议会做更多的工作，但只要您不必经常杀死进程，就应该可以正常工作。

如果你真的希望一切都是线程，你可以这样做，只要你可以限制作业的编写方式。如果工作总是可以干净地展开，你可以通过引发异常来杀死它们。当然，他们也必须不捕获您选择引发的特定异常。显然，这些条件作为通用解决方案都不现实，但对于您的用例，它可能没问题。关键是要确保您的代码进化者永远不会插入任何手动资源管理语句（如打开和关闭文件）；仅与语句。（或者，插入打开和关闭，但在 try/finally 中。）即使您不以这种方式做事，这也可能是一个好主意，因为分离了数百个进程，例如，

如果您可以进一步限制代码生成器/进化器，您可以使用某种形式的协作线程（例如，greenlets），这会使事情变得更好。

最后，您可以从 CPython 切换到可以在单个进程中运行多个解释器实例的不同 Python 实现。我不知道 jython 或 IronPython 是否可以这样做。PyPy 可以做到这一点，并且还有一个受限环境沙箱，但不幸的是，我认为这两个——以及 Python 3.x 支持——都不是黄金时段的功能，这意味着你要么必须得到一个特殊的构建 PyPy（可能没有 JIT 优化器），或者自己构建。这可能是最好的长期解决方案，但它可能不是您今天想要的。

# colors - Tapku 日历颜色

> ID：11270025
> 
> 赞同：1
> 
> 时间：2012-06-29T23:08:46.207
> 
> 标签：colors, calendar, ios-simulator, tapku

我在我的应用程序中使用了 TapkuMonthCalendarViewController，当日历加载时，日历的配色方案在模拟器上显示不正常。还有人经历过这个吗？

我没有尝试设置任何东西的背景，而且我以前在其他应用程序中使用过这个日历，它从来没有像这样表现过。

任何建议将不胜感激。

这是我看到的日历视图[http://i.imgur.com/IwT9s.png](http://i.imgur.com/IwT9s.png)

编辑：我意识到我忘记将捆绑包包含到我的项目中！所以这是所有未来tapku用户的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:33:14.377

您更改日历背景比更改日历图块图像。

或者您将此代码放在 drawRect 方法上。

```
- (void) drawRect:(CGRect)rect 

{
    CGContextRef context = UIGraphicsGetCurrentContext();
    //UIImage *tile = [UIImage imageWithContentsOfFile:TKBUNDLE(@"TapkuLibrary.bundle/Images/calendar/Month Calendar Date Tile.png")];

    CGRect r = CGRectMake(0, 0, 46, 44);
    //CGContextDrawTiledImage(context, r, tile.CGImage);

    if(today > 0){
        int pre = firstOfPrev > 0 ? lastOfPrev - firstOfPrev + 1 : 0;
        int index = today +  pre-1;
        CGRect r =[self rectForCellAtIndex:index];
        r.origin.y -= 7;
        //[[UIImage imageWithContentsOfFile:TKBUNDLE(@"TapkuLibrary.bundle/Images/calendar/Month Calendar Today Tile.png")] drawInRect:r];
    }
} 
```

# javascript - Ajax/Rails 嵌套评论

> ID：11270028
> 
> 赞同：0
> 
> 时间：2012-06-29T23:09:00.193
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个应用程序，其中 book_comments 属于书籍。

我的路线文件：

```
resources :books do
  resources :book_comments
end 
```

我在 show.html.erb 上有一个 book_comment 表格用于书籍。

```
def show
  @book = Book.find(params[:id])
  @new_book_comment = @book.book_comments.build
end 
```

我正在使用 ajax 通过部分将 book_comments 发布到图书展示页面： _book_comment_form.html.erb ：

```
<%= form_for([@book, @new_book_comment], remote: :true) do |f| %>
  <div class="field" style="margin-top:60px;">
    <%= f.text_area :comment, rows: 3 %> 
    <%= f.submit "Add Comment" %>
  </div>
<% end %> 
```

当 @new_book_comment 被调用时，它指的是 book_comments_controller 创建操作：

```
def create
    @book = Book.find(params[:book_id])
    @book_comment = current_user.book_comments.build(params[:book_comment]) do |f|
        f.book_id = @book.id
    end
if @book_comment.save
      respond_to do |format|
    format.html { redirect_to @book }
    format.js { render :layout => false }
  end
end 
```

结尾

book_comment 已保存，但在尝试通过 _book_comments 部分中的 ajax 渲染时出现了我的问题：

```
<div id="comments">
<% @book_comments.each do |book_comment| %>
  <%= render 'comment', :book_comment => comment %>
  </div>
<% end %>
</div> 
```

通过：book_comments 文件夹中的 create.js.erb

```
$("div#comments").append("<%= escape_javascript(render('books/comment'))%>") 
```

总而言之，我无法将 book_comments 中的 create.js.erb 渲染到图书展示页面。为什么 book_comments 文件夹中的 create.js.erb 不知道查看 中的对象并推断新的书评应该放在 div 中？

我的错误信息：

```
undefined method `comment' for nil:NilClass 
```

不明白为什么。看到我将实例变量传递给注释部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:02:44.977

你的部分做错了。您将未引用的值（注释）传递给未使用的变量（book_comment）。

代替：

```
<% @book_comments.each do |book_comment| %>
  <%= render 'comment', :book_comment => comment %> .... 
```

你应该做：

```
<% @book_comments.each do |book_comment| %>
  <%= render 'comment', :comment => book_comment  %> 
```

# android - 无法从广播侦听器调用对象方法

> ID：11270033
> 
> 赞同：0
> 
> 时间：2012-06-29T23:09:53.647
> 
> 标签：android, sms, broadcast

我有这个简单的短信监听器类：

```
package net.albanx.smspack;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class ReceiverListener extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";        
        ReceiverActivity addtolist = new ReceiverActivity();
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){

                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);     
                addtolist.addSMS(msgs[i].getOriginatingAddress(), "now", msgs[i].getMessageBody().toString());

                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }

            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                       
    }
} 
```

方法时出现空点执行错误

```
addtolist.addSMS(msgs[i].getOriginatingAddress(), "now", msgs[i].getMessageBody().toString()); 
```

叫做。此方法是活动的一部分：

```
public void addSMS(String sms_adress, String sms_date, String message)
{
    LayoutParams lparams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    // from Number label
    TextView from=new TextView(this);
    from.setLayoutParams(lparams);
    from.setBackgroundColor(Color.argb(200, 0, 0, 0));
    from.setTextAppearance(getApplicationContext(),  R.style.from_style);
    from.setText(this.getString(R.string.label_from_sms)+":"+ sms_adress);
    linearLayout.addView(from);
} 
```

问题出在这一行：

```
TextView from=new TextView(this); 
```

参考 this 那是空的。

我正在尝试制作一个短信监听器，当收到短信时，它会更新我正在运行的应用程序的短信列表。似乎我无法从广播侦听器调用活动方法。谁能解释一下我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:24:37.997

我将再一次回答这类问题（并希望我每次都有一美元）......

```
ReceiverActivity addtolist = new ReceiverActivity(); 
```

您不能实例化`Activity`using `new`。

`Activity`是 Android 中的一个特例，任何扩展类的新实例`Activity`只能由 Android 操作系统本身创建。您永远不应尝试从其自身`Activity`外部访问任何数据成员或方法。`Activity`

如果您需要将数据传递给一个`Activity`，然后使用它启动它`startActivity(...)`并通过`Intent`额外的传递数据。或者，将 your 嵌套`BroadcastReceiver`为`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:12:18.647

您不能使用 new 关键字实例化 Activity。因此，如果要将值从广播接收器传递给 Activity，则使用 Intent 将值传递为：

将 getOriginatingAddress 和 getMessageBody 传递给您的活动：

```
public class ReceiverListener extends BroadcastReceiver
{
List<String> getOriginatingAddresslist = new ArrayList<String>();
List<String> getMessageBodylist = new ArrayList<String>();
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";        
        ReceiverActivity addtolist = new ReceiverActivity();
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){

                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                getOriginatingAddresslist.add(msgs[i].getOriginatingAddress());
                getMessageBodylist.add(msgs[i].getMessageBody().toString());
            }
         Intent msgIntent = new Intent(context,YourActivity.class); 
         msgIntent.putStringArrayListExtra("getOriginatingAddresslist", getOriginatingAddresslist); 
         msgIntent.putStringArrayListExtra("getMessageBodylist", getMessageBodylist);  
         startActivity(msgIntent); 
```

并在您的活动中接收为：

```
public class YourActivity extends MapActivity 
{
List<String> getOriginatingAddresslist = new ArrayList<String>();
List<String> getMessageBodylist = new ArrayList<String>();
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent intent = this.getIntent();
        getOriginatingAddresslist = intent.getStringArrayListExtra("getOriginatingAddresslist");  
        getMessageBodylist = intent.getStringArrayListExtra("getMessageBodylist");
        for (int i=0; i<getMessageBodylist.size(); i++){

                addSMS(getOriginatingAddresslist.get(i).toString(), "now", getMessageBodylist.get(i).toString());

            } 
```

如果 Activity 已经在运行，则用于处理新意图，然后使用 o [nNewIntent （意图意图）](http://developer.android.com/reference/android/app/Activity.html)

或者

您还可以使用自定义广播接收器从 ReceiverListener 接收活动中的值，请参阅

[使用接收器自定义意图和广播](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)

# php - PHP 从 URL 中提取文本

> ID：11270043
> 
> 赞同：-1
> 
> 时间：2012-06-29T23:11:05.347
> 
> 标签：php, regex, query-string

我有一个看起来像这样的 URL...

[http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php](http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php)

我想在 / 之后但在 .php 之前删除文本，并想删除 - 的

所以结果是

这是我想要的文字

这个想法是然后将其用作标题标签

我已经尝试过 substr、strrchr 但无法弄清楚如何得到我需要的东西。

任何帮助将不胜感激

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:20:03.203

你可以使用`basename()`

```
$fname = basename('http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php');
$fname = str_replace('-', ' ', $fname); 
```

## 编辑：

```
<?php
   $fname = basename('http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php');
   $fname = str_replace('-', ' ', $fname);
   $fname = substr($fname, 0, -4);
   echo $fname;
?> 
```

## 结果：

```
this is the text i would like please 
```

参考**[现场演示](http://ideone.com/TA8f6)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:23:42.163

你也可以使用 PHP 的`$_SERVER`数组。该变量`$_SERVER["REQUEST_URI"]`将为您提供服务器名称之后的所有内容。在这种情况下，它将是“/this-is-the-text-i-would-like-please.php”。

之后，您可以运行任何您喜欢的字符串函数。这是一个使用`explode()`and的示例`substr`：

```
$noslash = substr($_SERVER['REQUEST_URI'], 1);  
/* $noslash = "this-is-the-text-i-would-like-please.php" (no leading slash)*/  

$parts = explode($noslash, ".");  
/*   
 * $parts[0] = "this-is-the-text-i-would-like-please"  
 * $parts[1] = "php"  
*/  
$title_tag = $parts[0]; 
```

为格式化道歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:13:10.940

[`strrpos()`](http://php.net/strrpos)您可以使用and使用简单的字符串操作[`substr()`](http://php.net/substr)，如下所示：

```
$str = 'http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php';
echo substr( $str, strrpos( $str, '/') + 1, -4); 
```

这[将输出](http://codepad.viper-7.com/YEAAuS)：

```
this-is-the-text-i-would-like-please 
```

然后，我们用空格替换破折号，使用[`str_replace()`](http://php.net/str_replace)，如下所示：

```
$str = str_replace( '-', ' ', $str); 
```

[屈服](http://codepad.viper-7.com/Vkf56p)：

```
this is the text i would like please 
```

另一种方法是使用[`parse_url()`](http://php.net/parse_url)，然后替换破折号，如下所示：

```
$str = parse_url( $str, PHP_URL_PATH);
$str = substr( $str, 1, -4); // strip off leading slash and .php from the end
$str = str_replace( '-', ' ', $str); 
```

这也将产生所需的输出。

**最后，**没有字符串操作的最简单方法是使用[`pathinfo()`](http://php.net/pathinfo)，如下所示：

```
$str = 'http://www.mydomain.co.uk/this-is-the-text-i-would-like-please.php';
$str = pathinfo( $str, PATHINFO_FILENAME);
$str = str_replace( '-', ' ', $str); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-29T23:23:57.567

像 nickb 但也删除了 - ：

```
echo str_replace('-',' ',substr( $str, strrpos( $str, '/') + 1, -4)); 
```

这将输出

```
this is the text i would like please 
```

或者如果你不想要 %20 ，它会是：

```
 echo str_replace('%20',' ',str_replace('-',' ',substr( $str, strrpos( $str, '/') + 1, -4))); 
```

# ruby-on-rails - 在主页上显示其他型号的信息？轨道上的红宝石

> ID：11270044
> 
> 赞同：0
> 
> 时间：2012-06-29T23:11:08.713
> 
> 标签：ruby-on-rails, view, model, twitter-bootstrap

我有一个帖子模型...我正在尝试在网页的索引页面上显示此模型。

```
<% @posts.each do |post| %>
<%= @posts[1].title %> 
<%end%> 
```

上面代码的问题是它显示标题 3 次，因为我有 3 个帖子。我如何编辑此代码以使其仅显示一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:20:23.257

你打算这样做：

```
<% @posts.each do |post| %>
  <%= post.title %> 
<%end%> 
```

枚举器一次一个地将`each`其变量传递到具有`do |variable|`语法的块中。`post`中的每个项目也是如此`@posts`，一个接一个。

这是 Ruby 和 Rails 的一个非常基本的概念：如果不进一步了解这一点，您可能不会走得太远。我建议你去[阅读 Programming Ruby——](http://www.ruby-doc.org/docs/ProgrammingRuby/)一个非常优秀的教程和对 Ruby 编程语言的参考——以了解块和枚举器是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:31:43.867

如果您使用“每个”，它会显示所有帖子，因为在您的控制器中您有@posts = Posts.all。这会将到目前为止写入的所有帖子都写入 @posts 实例变量，并且每个枚举器都会打印所有帖子

如果您只想显示标题并且只显示第一篇文章，那么您可以在视图中这样写

```
<%= @posts.first.title %> 
```

# java - 输入不匹配异常错误

> ID：11270048
> 
> 赞同：0
> 
> 时间：2012-06-29T23:11:26.347
> 
> 标签：java, exception, error-handling, standard-library

我收到一个编译时错误说：

不能抛出 InputMismatchException 类型的异常；异常类型必须是 Throwable InputMismatchException.java 的子类

据我所知 InputMismatchException 是 Scanner 在收到无效输入时抛出的异常，为什么这个错误会阻止我编译？

```
import java.util.*;
public class InputMismatchException
{
public static void main(String[] args)
{
    boolean continueInput = true;
    Scanner input = new Scanner(System.in);
    do
    {
        try
        {
            System.out.println("Enter an integer: ");
            int num = input.nextInt();
            System.out.println("You entered: " + num);
            continueInput = false;
        }
        catch (InputMismatchException e) //This is where the error occurs.
        {
            System.out.println("Enter an integer!");
            input.nextLine();
        }
    }while(continueInput);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:19:34.273

尝试为您的班级使用不同的名称。`InputMismatchException`当已经是异常类的名称时，您会通过命名一个类来混淆编译器。

# ajax - 使用 Ajax 和 MVC3 的 json 解析错误

> ID：11270052
> 
> 赞同：2
> 
> 时间：2012-06-29T23:12:15.707
> 
> 标签：ajax, json, asp.net-mvc-3, parsing

这是我第一次使用 Ajax Json 帖子。

我现在有以下脚本代码：

```
<script type="text/javascript">
$(document).ready(function () {
    // If the button is clicked, redirect to a controller action, send the data, and show
    // a view with the changes. 
    $('#submitDiffs').click(function () {
        var requirementNumberData = "@Model.FirstOrDefault().Requirement.RequirementNumber";

        var data = [];
        $('table tr').children('td').children('#selected :checked').each(function (i, element) {
            var el = $(element);
            data[i] = el.parent().siblings(':eq(1)').html();
        });

        diffParameters = GetDifferenceParameters(data);
        var jsonData = JSON.stringify(diffParameters, null, 2);

        $.ajax({
            url: '/Requirements/Differences',
            type: 'POST',
            data: jsonData,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            // callback handler that will be called on error 
            success: function (response) {
                alert("Ajax call made successfully!!!");
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status + '\n\r' + xhr.responseText);
                alert(thrownError);
            }     

        });
    });

    function GetDifferenceParameters(data) {
        var requirementNumber = "@Model.FirstOrDefault().Requirement.RequirementNumber";
        var oldRequirement = data[1];
        var newRequirement = data[0];

        return { 
            RequirementNumber: requirementNumber,
            OldRequirement: oldRequirement,
            NewRequirement: newRequirement
        };
    }
}); 
```

此代码发布到 MVC3 控制器，代码如下：

```
[HttpPost]
public ActionResult Differences(RequirementDifferenceViewModel model)
{
    HtmlDiff diff = new HtmlDiff(model.OldRequirement, model.NewRequirement);
    model.ContentDifference = diff.Build();

    return View(model);
} 
```

这是视图模型：

```
public class RequirementDifferenceViewModel
{
    public string RequirementNumber { get; set; }
    public string OldRequirement { get; set; }
    public string NewRequirement { get; set; }
    public string ContentDifference { get; set; }
} 
```

**如果我省略 jSON.stringify 控制器操作不会被执行，我会收到 500 错误。如果我进行字符串化，我会得到 200 状态，但是会向 AJAX 返回一个 JSON 解析错误。在这两种情况下，都会将确切的 JSON 字符串发送到 AJAX 调用。**

这是我从 Firebug 中复制的 JSON 字符串：

```
{
  "RequirementNumber": "PFSNET-UC12-008",
  "OldRequirement": "\n                <p class=\"Bullet1\"><span style=\"font-size:10.0pt;font-family:Wingdings;\nfont-weight:normal\">r<span style=\"font:7.0pt &quot;Times New Roman&quot;\">&nbsp; </span></span><span lang=\"X-NONE\">[PFSNET-UC12-008] – Undo/redo will be supported for Expert\nAssistant. The details can be found in the use case for Undo/Redo.</span>&nbsp; </p> \n\n <p class=\"Bullet2\"><span style=\"font-family:Wingdings;font-weight:\nnormal\" lang=\"X-NONE\">§<span style=\"font:7.0pt &quot;Times New Roman&quot;\">&nbsp; </span></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:06\">A</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">n ‘Undo\nLast Action’ button will </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:06\">also </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">be available</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:05\"> for\nselect products</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">.&nbsp; See\nUC12-</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-29T14:10\">229</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\"> for\nadditional information.</ins></span></p> \n\n <p class=\"MsoNormal\">&nbsp;</p> \n\n\n            ",
  "NewRequirement": "\n                <p class=\"Bullet1\"><span style=\"font-size:10.0pt;font-family:Wingdings;\nfont-weight:normal\">r<span style=\"font:7.0pt &quot;Times New Roman&quot;\">&nbsp; </span></span><span lang=\"X-NONE\">[PFSNET-UC12-008] – Undo/redo will be supported for Expert\nAssistant. The details can be found in the use case for Undo/Redo.</span>&nbsp; </p> \n\n <p class=\"Bullet2\"><span style=\"font-family:Wingdings;font-weight:\nnormal\" lang=\"X-NONE\">§<span style=\"font:7.0pt &quot;Times New Roman&quot;\">&nbsp; </span></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:06\">A</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">n ‘Undo\nLast Action’ button will </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:06\">also </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">be available</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T11:05\"> </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-06-20T12:34\">on </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-06-20T12:42\">the\nAdvanced Expert Assistant screen.&nbsp; </ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\">See\nUC12-</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-29T14:10\">229</ins></span><span class=\"msoIns\"><ins cite=\"mailto:Michelle%20Reini%20Hotchkiss\" datetime=\"2012-05-18T08:36\"> for\nadditional information.</ins></span></p> \n\n <p class=\"MsoNormal\">&nbsp;</p> \n\n\n            "
} 
```

我将此字符串放入一个 JSON 验证器网站并通过：[http://jsonformatter.curiousconcept.com/]

确切的解析错误是：**SyntaxError: JSON.parse: unexpected character**

任何帮助，将不胜感激！

**编辑2：**

事实证明，解析错误是 AJAX 成功处理程序无法正确解析响应的结果。我仍在试图弄清楚这部分。

一旦执行 Success 事件，代码执行就会直接跳转到 Error 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:16:54.000

如果您在浏览器中运行它，例如 firefox 或 chrome（不是 ie），那么您可以检查网络帖子并查看标题。在那里，您应该能够准确地看到正在传递的信息。您很可能会收到一些您不期望的字符，这会导致解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:58:10.113

`var requirementParameters = "{ oldRequirement: contentRecords[1], newRequirement: contentRecords[0] }";`是无效的`json`

您可能正在寻找类似的东西：

```
var requirementParameters = {
    oldRequirement: contentRecords[1],
    newRequirement: contentRecords[0]
}; 
```

这将使用您的字段创建一个匿名对象。旧代码只是一个字符串，您可以`JSON.stringify`再次使用它。

# php - 通过 2 个不同的表排序

> ID：11270061
> 
> 赞同：0
> 
> 时间：2012-06-29T23:13:49.587
> 
> 标签：php, mysql

我有两张表，一张被称为`addons`并保存有关不同插件的信息，有很多列，但这里是主要的

```
addon_id  |  addon_name      |  addon_size

1         |  loft conversion |  small
2         |  extension       |  large 
```

我还有一个叫`addons_count`

```
addon_id  |  addon_count

1         |  5
2         |  6 
```

其中包含系统中使用的插件数量

问题是我已经有一个查询，它只是通过一个while循环输出插件

```
SELECT * FROM `addons` WHERE addon_size='small' LIMIT {$startpoint_small} , {$limit} 
```

但是我试图让它根据 addon_count 对不同的插件进行排序，但是因为它们来自 2 个不同的表，我将如何做到这一点，例如通过 orderby？

谢谢你和所有的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:18:07.947

```
SELECT * FROM 
   addons a , addons_count c 
WHERE
   c.addon_id = a.addon_id
AND
   a.addon_size = 'small'
ORDER BY
   c.addon_count
LIMIT 
   {$startpoint_small} , {$limit} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:18:50.747

您必须加入您的 2 张桌子：

```
$query = "SELECT * FROM addons a, addons_count ac
WHERE a.addon_id=ac.addon_id AND a.addon_size = 'small'
ORDER BY ac.addon_count DESC
LIMIT {$startpoint_small} , {$limit}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:17:48.230

将 INNER JOIN 添加到 addons -> addons_count 的查询中，然后排序。

# css - 更新 Bootstrap 教程有多重要？

> ID：11270065
> 
> 赞同：1
> 
> 时间：2012-06-29T23:14:25.630
> 
> 标签：css, twitter-bootstrap, less

我很喜欢[这里](http://webdesign.tutsplus.com/tutorials/complete-websites/twitter-bootstrap-101-introduction/)的 Bootstrap 教程，但是在前两个之后，我意识到它正在使用 V1 版本的 Bootstrap，其中布局作为 16 列网格工作，并且像 span-one-third class 这样的东西仍然处于活动状态.

我知道我可以下载和使用旧版本的 Bootstrap，但是 (a) 我没那么聪明，并且 (b) 我正在尝试通过使用 github fork 尽早采用最佳实践。

我不确定本教程还有什么不同。我可以弄清楚 16 列和 12 列网格之间的区别，但是在我遵循这些教程时，Bootstrap 中是否有 1.4 和 2.0 之间的任何内容会完全搞砸我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:22:07.250

**超级**关键。从 1.4 到 2.0 有大量变化，总结如下：http: [//twitter.github.com/bootstrap/upgrading.html](http://twitter.github.com/bootstrap/upgrading.html)

我将强调几乎完全响应是最重要的变化，但几乎所有其他组件都发生了变化，为移动设备提供更好的支持，并与行业的新标准和变化保持同步。

通过不升级到 2.0，您将限制自己对框架的未来更新，因为大多数更改*会*破坏您当前的进度。一些教程很适合作为“获得想法并自己实现”教程。

不要仅仅因为您感到舒适而落后于技术。当您遇到的问题不支持时，您就不会出现这种情况，这些问题可能在 2.0 或更高版本中已修复。现在节省您的时间！

# codeigniter-2 - codeigniter：以字符串形式返回表单验证器结果

> ID：11270068
> 
> 赞同：0
> 
> 时间：2012-06-29T23:15:08.743
> 
> 标签：codeigniter-2

我是codeigniter的新手，很抱歉这个简单的问题。

我想为我的 ajax 进程运行 formvalidator。如何将验证错误返回为 JSON？有一个更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:56:10.983

你还没有真正说明你在做什么。我将假设您有一个要使用 ajax 保存数据的表单，这样您就没有任何讨厌的保存/提交按钮。另外，我猜你有某种 .change() 处理程序，它将表单元素作为名称/值对的 post 变量发送到 ajax 处理程序。您将遇到的问题是，当您对数据运行表单验证器时，它总是会失败。因为表单验证器需要该表单的所有字段，并且您一次只能发送一条数据。

通常在代码点火器示例代码中，您检查“运行”方法是否通过。在您的情况下，这并不重要，因为它总是会失败，所以不要费心检查。这是一些示例代码的片段

```
$this->form_validation->run('form');  // it is likely that the form won't validate, but thats ok.
$validation_error=form_error($field_name);
if($validation_error){
    $feedback = 'Field <strong>NOT</strong> saved.';

}else{
    // no errors, we can save.
    $this->my_model->set_field($id,$field_name,$field_value);
    $validation_error='&nbsp;';  // this is set so if the field was initially not validated, and it is later, the validation message goes away. 
    $validation_element = '#'.$field_name;
    $feedback = 'Field saved.';
} 
```

……

```
echo json_encode(array('feedback'=>$feedback,'validation_element'=>'#'.$field_name,'validation_error'=>$validation_error));
break; 
```

在我的代码片段中，一个 json 对象被返回给 ajax 帖子。在 jquery ajax 帖子中，成功处理程序有这段代码。

```
try{
    var json = $.parseJSON(data);

    if(typeof(json.container)==='string'){
        var container=json.container;
    }
    if(typeof(json.html)==='string'){
        var con = $(container);
        $(con).html(json.html);
    }
    if(typeof(json.feedback)==='string'){
        display_feedback(json.feedback);}

    if(typeof(json.validation_element) ==='string'){
        // assumes that if a validation_element object is returned, it has a paired validation_error element.
        $(json.validation_element).closest('.col_b').nextAll('.validation_error').first().html(json.validation_error);
    }

}
catch(err){
    display_feedback(err);
} 
```

在我的表格中，我有一个三列格式，其中：

```
<div class='col_a'>label</div>
<div class='col_b' >input, id = field_name  </div>
<div class='col_c validation_error'>validation text</div> 
```

希望这对你有意义。

# html - 调整浏览器大小 + 水平滚动 = 隐藏 Div 显示

> ID：11270069
> 
> 赞同：0
> 
> 时间：2012-06-29T23:15:20.527
> 
> 标签：html, browser, horizontal-scrolling

当您在 WIDTH 中将浏览器的大小缩小到 1,000 像素以下，然后水平向右滚动时，所有包含的 div 保持浏览器窗口的相同宽度并且不会延伸到整个宽度。

我的页脚和正文宽度为 100%。

下面是我在我测试过的所有浏览器中谈论的一个例子，所以我假设 1 解决方案将全部修复

Opera 12.0
Firefox 11.0
Chrome 20.0.1132.47
Safari 5.1.1
IE 9.08

此处的工作示例：http: [//glustik.com/siteTemplate2012/](http://glustik.com/siteTemplate2012/)

![在此处输入图像描述](../Images/1289df2fbec0318d9391338d60c24fab.png)

专家的任何建议将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:39:28.387

根据 stackoverflow 上其他问题的解决方案：向 div 添加 min-width 属性应该可以解决问题。

在你的情况下，我认为：

```
min-width: 1024px; 
```

（宽度：100% 仅表示视口的 100%）

也可以看看：

[100% 宽度的 bg 图像不在水平滚动上延伸](https://stackoverflow.com/questions/3042979/100-width-bg-images-not-extending-on-horizontal-scroll)

和

[浏览器调整大小时的 CSS 100% 宽度](https://stackoverflow.com/questions/3805150/css-100-width-on-browser-resize)

# django - Django 1.4：如何访问包含标签中的请求对象

> ID：11270070
> 
> 赞同：0
> 
> 时间：2012-06-29T23:15:26.857
> 
> 标签：django, django-templates

代码

```
@register.inclusion_tag('template.html', takes_context=True)
def include_client_side_bar(context):
    return {
        'STATIC_URL': settings.STATIC_URL,
        } 
```

我的代码是这样的，我想在这个函数中访问 request.user 对象，但我无法得到它。

在调试器中，我可以看到这些变量。 ![在此处输入图像描述](../Images/08a4b2d14944650cb5e45360714c80d7.png)

据我所知，我在 django 1.3 中成功地做到了这一点，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:46:37.873

确保您已在设置中包含[请求上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)`TEMPLATE_CONTEXT_PROCESSORS`，并且您的视图使用[`RequestContext`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:33:41.627

`request = context.get('request', None)`如果请求键不存在，请尝试分配 None 值。

[http://docs.python.org/library/stdtypes.html#dict.get](http://docs.python.org/library/stdtypes.html#dict.get)

**更新：**

您也可以通过类似这样的方式将用户传递给包含标签

```
# In your template_tag
@register.inclusion_tag('template.html', takes_context=True)
def include_client_side_bar(context, user):
    if user:
         pass # do something
    return {
        'STATIC_URL': settings.STATIC_URL,
    }

# in your template
{% include_client_side_bar user=request.user %} 
```

# javascript - 在 Internet Explorer 中注册 iframe 事件

> ID：11270072
> 
> 赞同：0
> 
> 时间：2012-06-29T23:15:51.760
> 
> 标签：javascript, internet-explorer, iframe, dom-events, portlet

我有一个 Web 应用程序，它允许用户输入搜索条件，结果会附加到搜索条件的输入字段正下方的 portlet 容器（如上所述）。环境 - JSP、JAVA 和 TAG 库 搜索页面本质上由几个 JSP 页面组成，这些页面引用了无数的标签库。

返回搜索结果 (AJAX) 后 - portlet iframe 应根据新高度重新调整大小。调用的 JavaScript 方法（驻留在其中一个标记库中）`setContainerHeight`是重新调整大小的原因。

问题 -

Internet Explorer 不会调用我的 JS 方法来重新调整大小！

我怀疑下面的帖子可以帮助解决这个问题。 [Javascript IE 事件](https://stackoverflow.com/questions/960419/javascript-ie-event)

Chrome、Firefox、Opera……都可以！

因为我不能明确地告诉页面刷新（我将失去我的搜索条件参数），我也不能明确地检查什么类型的浏览器正在发出请求（我的 JavaScript 没有被调用）；如何在回调后明确告诉页面调用我的 resize 方法？

万一有人好奇——这是我重新调整大小的方法：

```
function setContainerHeight() {
  //reset the height to shrink the scroll height for the usecase where the portlet's contents got smaller.

  getPortlet().style.height = '${frameHeight}px';
  getPortlet().height = '${frameHeight}px';

  try {
     height = getFrameHeight(getPortlet());
  } catch (e) {
    //fallback for crossdomain permission problems.
    height = '${frameHeight}';
  }

  //set the portlet & portlet container to be the same height - not using 100% for the portlet to avoid the inner scrollbar
  try {
    getPortletContainer().style.height = height + 'px';
  } catch ( ex ) {
      // do nothing, we can't get to the container
  }
  getPortlet().style.height = (height + getHorScrollBarHeight()) + 'px';
  getPortlet().height = (height + getHorScrollBarHeight()) + 'px';
} 
```

这是调用此方法的代码部分 -

```
/* resizes the portlet container to fit the size of the porlet. */
function resizePortletContainer() {

  if (hasContainerHeightChanged()) {
    saveScrollPosition();
    setContainerHeight();
    restoreScrollPosition();
  }

  //width handling needs some work
  //if (hasContainerWidthChanged()) {
    //setContainerWidth();
  //}
}

//registering event handlers...
var frame = getPortlet();
var prevPortletLoadEvent = frame.onload ? frame.onload : function () {};
frame.onload = function () {prevPortletLoadEvent(); resizePortletContainer(); };

var prevPortletResizeEvent = frame.onresize ? frame.onresize : function () {};
var onresize = function () {prevPortletResizeEvent(); resizePortletContainer(); }; 
```

更多信息 -
在上面的注册事件处理程序代码之后放置警报语句之后；我注意到 IE 和 Firefox 都只调用了这部分代码一次（当初始搜索屏幕显示给浏览器时，我的警报框在任何一种情况下都只触发一次。）因此，这让我相信出于某种原因，只有Firefox 喜欢我用来注册事件的上述代码；IE 也许正在寻找一种不同的方法来注册这个事件？

我怀疑下面的帖子可能对我寻找这个问题的答案有用——

[Javascript IE 事件](https://stackoverflow.com/questions/960419/javascript-ie-event)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:37:21.783

我在另一篇文章中找到了答案，但本质上问题在于 Internet Explorer 注册其 iframe 事件的方式与所有其他浏览器不同。
也是一个很好的帖子供您查看 - [onload 与 addEventListener('load') 的 iframe 行为](https://stackoverflow.com/questions/5220840/iframe-behaviour-of-onload-vs-addeventlistenerload)

下面列出了我用来解决问题的代码。我希望这可以帮助遇到我遇到类似问题的其他人。

我必须对发出请求的浏览器做一个简单的检查，你在下面看到的 2 个条件块做同样的事情，除了 IE 的语法不同。好'ol IE。哈哈。

```
//Microsoft Internet Explorer Browser - iFrame event register
if (navigator.appName.indexOf("Microsoft") != -1) {
  var frame = getPortlet();
  var prevPortletLoadEvent = frame.onload ? frame.onload : function () {};
  var refresh = function() { prevPortletLoadEvent(); resizePortletContainer(); };

  if(frame.attachEvent) frame.attachEvent('onload', refresh);
  else frame.addEventListener('load', refresh, false);
}

//All other major browsers - iFrame event register
else {
  var frame = getPortlet();
  var prevPortletLoadEvent = frame.onload ? frame.onload : function () {};
  frame.onload = function () {prevPortletLoadEvent(); resizePortletContainer(); };

  var prevPortletResizeEvent = frame.onresize ? frame.onresize : function () {};
  var onresize = function () {prevPortletResizeEvent(); resizePortletContainer(); };
} 
```

# asp.net-mvc-3 - 具有 DataAnnotation 支持的 IModelBinder

> ID：11270074
> 
> 赞同：1
> 
> 时间：2012-06-29T23:16:06.497
> 
> 标签：asp.net-mvc-3, modelbinders, custom-model-binder

我们必须使用实现 IModelBinder 的自定义 ModelBinder。我们根本无法直接更改此代码。它目前不支持从传入的模型的 DataAnnotations 更新 ModelState。我们希望继承 ModelBinder 并添加该支持。我们需要做些什么来添加该支持，以便它像 Def​​aultModelBinder 与 DataAnnotations 一样工作？

# python - Python AWeber API 抛出异常：timestmap、nonce、consumer_key 的组合必须是唯一的

> ID：11270077
> 
> 赞同：0
> 
> 时间：2012-06-29T23:16:55.020
> 
> 标签：python, aweber

我正在使用 Python 的 AWeber API (https://github.com/aweber/AWeber-API-Python-Library)，我经常遇到这些异常。我不知道为什么会这样。有任何想法吗？

```
File "/<path>/aweber_api/entry.py", line 160, in __getattr__
    return self._child_collection(attr)

File "/<path>/aweber_api/entry.py", line 151, in _child_collection
    self._child_collections[attr] = self.load_from_url(url)

File "/<path>/aweber_api/base.py", line 38, in load_from_url
    response = self.adapter.request('GET', url)

File "/<path>/aweber_api/oauth.py", line 60, in request
    '{0}: {1}'.format(error_type, error_msg))

APIException: UnauthorizedError: Combination of nonce, timestamp, and consumer_key must be unique. https://labs.aweber.com/docs/troubleshooting#unauthorized 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:14:24.600

错误消息实际上是由于 OAuth。您多次发送相同的请求。您需要再次生成请求（即使是相同的命令和参数）以获得新的时间戳和随机数。

这是一种 OAuth 措施，可确保它不会多次处理完全相同的请求。例如，您的程序实际上在同一时间发送了两次命令。

# python - 如何在 Tkinter 窗口中刷新 matplotlib 图？

> ID：11270078
> 
> 赞同：6
> 
> 时间：2012-06-29T23:16:58.560
> 
> 标签：python, matplotlib

我想知道是否有人知道为什么在按下 GUI 上的按钮后下面的代码不显示带有线条的图形。我想创建一个程序，通过单击按钮导入一组数据后执行一长串命令。这些命令之一是在同一窗口内的图表上显示光谱数据。这是我到目前为止所拥有的：

```
# import modules that I'm using
import matplotlib
matplotlib.use('TKAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure
import matplotlib.pyplot as pltlib
import Tkinter
from Tkinter import *
import numpy as np
import scipy as sc
#import matplotlib.pyplot as pltlib
# lmfit is imported becuase parameters are allowed to depend on each other along with bounds, etc.
from lmfit import minimize, Parameters, Minimizer

#Make object for application
class App_Window(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()
    def initialize(self):
        button = Tkinter.Button(self,text="Open File",command=self.OnButtonClick).pack(side=Tkinter.TOP)
        self.canvasFig=pltlib.figure(1)
        Fig = matplotlib.figure.Figure(figsize=(5,4),dpi=100)
        FigSubPlot = Fig.add_subplot(111)
        x=[]
        y=[]
        self.line1, = FigSubPlot.plot(x,y,'r-')
        self.canvas = matplotlib.backends.backend_tkagg.FigureCanvasTkAgg(Fig, master=self)
        self.canvas.show()
        self.canvas.get_tk_widget().pack(side=Tkinter.TOP, fill=Tkinter.BOTH, expand=1)
        self.canvas._tkcanvas.pack(side=Tkinter.TOP, fill=Tkinter.BOTH, expand=1)
        self.resizable(True,False)
        self.update()
    def refreshFigure(self,x,y):
        self.line1.set_xdata(x)
        self.line1.set_ydata(y)
        self.canvas.draw()
    def OnButtonClick(self):
        # file is opened here and some data is taken
        # I've just set some arrays here so it will compile alone
        x=[]
        y=[]
        for num in range(0,1000):x.append(num*.001+1)
        # just some random function is given here, the real data is a UV-Vis spectrum
        for num2 in range(0,1000):y.append(sc.math.sin(num2*.06)+sc.math.e**(num2*.001))
        X = np.array(x)
        Y = np.array(y)
        self.refreshFigure(X,Y)

if __name__ == "__main__":
    MainWindow = App_Window(None)
    MainWindow.mainloop() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T01:57:39.213

这是因为 xaxis & yaxis 的范围不会更改为新数据的范围，请更改您的 refreshFigure 如下：

```
def refreshFigure(self,x,y):
    self.line1.set_data(x,y)
    ax = self.canvas.figure.axes[0]
    ax.set_xlim(x.min(), x.max())
    ax.set_ylim(y.min(), y.max())        
    self.canvas.draw() 
```

# fortran - 不同模块上的 fortran 扩展类型

> ID：11270082
> 
> 赞同：4
> 
> 时间：2012-06-29T23:17:45.137
> 
> 标签：fortran, fortran2003

Fortran 中的扩展类型应该是私有组件，对不同模块中的类型扩展可见。

对于 gcc4.7 和 ifort，以下代码会导致错误，因为 bName 既是初始类型又是扩展名。但是由于它是私有的，它在不同模块的扩展中是不可访问的，即，如果您在 bar_type 中注释掉 bName，您将收到一个错误，即它是私有的。

```
module foo
  type :: foo_type
    character(256),private :: bName = "foo"
  contains
    procedure :: pName => pName
  end type
contains
  subroutine pName(this)
    class(foo_type), intent(in) :: this
    print*,trim(this%bName)
  end subroutine
end module

module bar
  use foo, only : foo_type
  type,extends(foo_type) :: bar_type
    character(256),private :: bName = "bar"
  contains
    procedure :: pName => pName
  end type
contains

  subroutine pName(this)
    class(bar_type), intent(in) :: this
    print*,this%bName
  end subroutine
end module

program test
  use foo, only : foo_type
  use bar, only : bar_type
  type(foo_type) :: foo_inst
  type(bar_type) :: bar_inst

  call foo_inst%pName()
  call bar_inst%pName()
end program 
```

如果 bar_type 包含在与 foo_type 相同的模块中，则 bName 可以从 bar_type 访问，即，以下代码将编译

```
module foo
  type :: foo_type
    character(256),private :: bName = "foo"
  contains
    procedure :: pName => pName
  end type

  type, extends(foo_type) :: baz_type
  contains
    procedure :: pName => pName_baz
  end type
contains
  subroutine pName_baz(this)
    class(baz_type), intent(in) :: this
    print*,trim(this%bName)
  end subroutine

  subroutine pName(this)
    class(foo_type), intent(in) :: this
    print*,trim(this%bName)
  end subroutine
end module

program test
  use foo, only : foo_type,baz_type
  type(foo_type) :: foo_inst
  type(baz_type) :: baz_inst

  call foo_inst%pName()
  call baz_inst%pName()
end program 
```

很难解析标准以了解第一个示例中应该发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:54:06.233

我相信第一个例子不符合标准。

即使 private 属性使组件`bName`在 module 外部不可访问`foo`，它仍然被继承`bar_type`（也许相当没有意义，因为它不能做任何事情，但这不是问题）——参见 f2003 中的注释 4.51：

> 父类型的不可访问组件和绑定也被继承，但它们在扩展类型中仍然不可访问。如果通过使用关联访问被扩展的类型并且具有私有实体，则会出现不可访问的实体。

所以`bar_type`有一个名为 的继承组件`bName`，这使得以该名称添加另一个组件是错误的（有关范围和名称规则，请参见第 16.2 段）。

# c - 为什么 INT64_MIN 有不同的定义？为什么他们的行为不同？

> ID：11270084
> 
> 赞同：7
> 
> 时间：2012-06-29T23:18:06.063
> 
> 标签：c, gcc, 64-bit, min

我公司的`stdint.h`标题是：

```
#define INT64_MIN -9223372036854775808LL 
```

但在我项目的一些代码中，一位程序员写道：

```
#undef INT64_MIN
#define INT64_MIN (-9223372036854775807LL -1) 
```

然后他在代码中使用这个定义。
该项目编译时没有警告/错误。
当我试图删除他的定义并使用默认定义时，我得到了：

```
error: integer constant is so large that it is unsigned 
```

这两个定义似乎是等价的。
为什么一个编译正常而另一个编译失败？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T23:20:53.023

`-9223372036854775808LL`不是一个单一的文字。`-`它是一个由应用于常量的一元运算符组成的表达式`9223372036854775808LL`。

该常数（几乎）在 type 的范围之外`long long`，这会导致警告。（我假设`long long`是 64 位，几乎可以肯定是。）

`(-9223372036854775807LL -1)`另一方面，表达式包含在 的范围内的文字`long long`，并且~~同样是对~~的更有效的定义`INT64_MIN`，因为它的类型正确（正如史蒂夫杰索普在评论中指出的那样）。

# c# - C# 中的“yield”关键字有什么用？

> ID：11270086
> 
> 赞同：2
> 
> 时间：2012-06-29T23:18:45.943
> 
> 标签：c#, syntax, yield-return

> **可能重复：**
> [正确使用收益回报](https://stackoverflow.com/questions/410026/proper-use-of-yield-return)

`yield`C#中关键字的用途是什么？

我从[MSDN 参考资料](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)中无法理解...有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T23:36:16.253

我会试着给你一个例子

这是经典的做法，它填充一个列表对象，然后返回它：

```
private IEnumerable<int> GetNumbers()
{
    var list = new List<int>();
    for (var i = 0; i < 10; i++)
    {
        list.Add(i);
    }
    return list;
} 
```

yield 关键字像这样一一返回项目：

```
private IEnumerable<int> GetNumbers()
{
    for (var i = 0; i < 10; i++)
    {
        yield return i;
    }
} 
```

所以想象一下调用 GetNumbers 函数的代码如下：

```
foreach (int number in GetNumbers())
{
   if (number == 5)
   {
       //do something special...
       break;
   }
} 
```

如果不使用yield，您将不得不从0-10生成整个列表，然后返回，然后迭代直到找到数字5。

现在多亏了 yield 关键字，您将只生成数字，直到找到您要查找的数字并打破循环。

我不知道我是否足够清楚..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:36:46.080

> 我的问题是，我什么时候使用它？有没有什么例子让我别无选择，只能使用产量？为什么有人觉得 C# 需要另一个关键字？

您链接的文章提供了一个很好的例子，说明何时以及如何使用它。

我讨厌引用你自己也链接的一篇文章，但它太长了，你没有读过。

yield 关键字向编译器发出信号，表明它出现的方法是一个**迭代器块。**编译器生成一个类来实现迭代器块中表达的行为。

```
public static System.Collections.IEnumerable Power(int number, int exponent)
{
    int counter = 0;
    int result = 1;
    while (counter++ < exponent)
    {
        result = result * number;
        yield return result;
    }
} 
```

在上面的示例中，yield 语句在**迭代器块**中使用。调用 Power 方法时，它返回一个包含数字幂的可枚举对象。请注意，Power 方法的返回类型是 System.Collections.IEnumerable，它是一种迭代器接口类型。

因此，编译器会根据方法执行期间产生的内容自动生成一个 IEnumerable 接口。

为了完整起见，这是一个简化的示例：

```
public static System.Collections.IEnumerable CountToTen()
{
    int counter = 0;
    while (counter++ < 10)
    {
        yield return counter;
    }
}

public static Main(string[]...)
{
    foreach(var i in CountToTen())
    {
        Console.WriteLine(i);
    }
} 
```

# php - 根据“n”个文本框值创建订单总额？

> ID：11270090
> 
> 赞同：0
> 
> 时间：2012-06-29T23:19:21.433
> 
> 标签：php, javascript, mysql, html, textbox

我有一个基于网络的库存系统。我目前正在处理系统的采购订单部分，该部分为更多库存创建新订单。首先，用户输入供应商来订购库存。然后，他会被引导到一个页面，该页面列出了该供应商提供的所有产品。用户被要求选择一些要订购的商品，然后被引导到显示商品及其单价的页面。该页面还在每个项目旁边创建一个文本框，用户可以在其中输入要订购的数量。我接下来要做的是有一个 javascript 按钮，它将输入的数量乘以该项目的单价，并将其显示在下一列的另一个文本框中。然后有一个按钮，用于在底部添加订单总计的所有项目总计。我想在不离开页面的情况下完成所有这些。

```
<html>
<title>Edit Purchase Order</title>
<?php 
    include("menu.php");
    include("sqlconnect.php");
?>
<body>
<table align='center' border='1'>
<tr><th>Supplier:</th>
<th>Item Number:</th>
<th>Size/Volume:</th>
<th>Color:</th>
<th>Wholesale Cost:</th>
<th>Quantity In Stock:</th>
<th>Item:</th>
<th>QUANTITY FOR ORDER:</th>
</tr>
<?php 
        foreach ($_POST[itemselect] as $id)
        {
            $result = mysql_query("SELECT * FROM inventory WHERE id='$id'");
            while ($row = mysql_fetch_array($result))
                {
                    include("colors.php");
                    echo "<td>";
                    echo $row[Supplier];
                    echo "</td>";

                    echo "<td>";
                    echo $row[ItemNumber];
                    echo "</td>";

                    echo "<td>";
                    echo $row[TypeSizeVolume];
                    echo "</td>";

                    echo "<td>";
                    echo $row[Color];
                    echo "</td>";

                    echo "<td>";
                    echo $row[WholeSaleCost];
                    echo "</td>";

                    echo "<td>";
                    echo $row[QuaninInventory];
                    echo "</td>";

                    echo "<td>";
                    echo $row[Item];
                    echo "</td>";

                    echo "<td>";
                    echo "<input type='text' name='quantityfororder[]'><input type='hidden' name='rowid[]' value='$row[id]'>";
                    echo "</td></tr>";
                }
        }
?>

</table>
</body>
</html> 
```

谢谢你一百万。这个我想不通！！

# android - 将 Android 应用程序部署到多个测试设备

> ID：11270094
> 
> 赞同：0
> 
> 时间：2012-06-29T23:19:58.467
> 
> 标签：android

我导出了一个未签名的 apk 文件，它代表我的 Android 应用程序的测试版本。我需要将它分发给相当多的用户。是否有一种简单的方法可以将 apk 文件分发到它将安装应用程序的位置？我试图避免测试用户不得不下载 Astro 或 sdk 之类的东西。有任何想法吗？我试着把它放在一个全球网络服务器上，文件下载但没有安装。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:25:02.567

从[安卓文档](http://developer.android.com/tools/publishing/app-signing.html)：

> Android 系统不会安装或运行未正确签名的应用程序。这适用于运行 Android 系统的任何地方，无论是在实际设备上还是在模拟器上。因此，您必须先为您的应用程序设置签名，然后才能在模拟器或设备上运行或调试它。

因此，即使您的用户选中了“允许安装非市场应用程序”，您的应用程序仍然必须使用至少一个测试密钥进行签名，然后才能将其安装到物理设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:06:47.303

我只是将我的实验性应用程序放在 Android 市场上，并附上“不要安装它，它对你不起作用”的描述，然后给我的测试人员一个访问密钥。

# html - 流体布局与网格？

> ID：11270097
> 
> 赞同：0
> 
> 时间：2012-06-29T23:20:09.900
> 
> 标签：html, css, fluid-layout, grid-layout, baseline

我觉得我错过了一个备忘录或什么的。流体布局和网格布局是一回事吗？我一直听到的这个基线是什么？基线是否就像您创建的用于排列所有文字和图片的东西？这与仅浮动/清除和使用百分比宽度有什么不同？

这只是修改过的术语吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:41:42.507

流体布局和网格布局本质上是 css 起点 - 大多数 css 网格可以与流体宽度或固定宽度一起使用

[样板](http://html5boilerplate.com/)

[960.gs](http://960.gs/)

[基线 CSS](http://baselinecss.com/)

是我能想到的一些 - 它们旨在帮助设计师/开发人员快速简单地创建一致的布局

# sql - 在sql中不同

> ID：11270101
> 
> 赞同：1
> 
> 时间：2012-06-29T23:20:37.743
> 
> 标签：sql, select, distinct, rows

这是我的 SQL：

```
SELECT DISTINCT(CASE WHEN state=18 THEN lga ELSE 'Others' END) LGA,
    COUNT(CASE WHEN choice=21 THEN choice END ) NDCH
FROM bio   
GROUP BY lga 
```

我的期望是它给我所有状态 = 18 的 LGA，如果状态不等于 18，则将它们归为“其他”，但我通常有多个“其他”。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:30:41.213

考虑一个`group by`案例陈述：

```
SELECT  CASE WHEN state=18 THEN lga ELSE 'Others' END LGA
,       COUNT(CASE WHEN choice=21 THEN choice END) NDCH
FROM    bio
GROUP BY
        CASE WHEN state=18 THEN lga ELSE 'Others' END 
```

# objective-c - 可变副本通过引用复制，而不是价值？

> ID：11270102
> 
> 赞同：4
> 
> 时间：2012-06-29T23:20:47.147
> 
> 标签：objective-c, nsmutablearray

显然 mutableCopy 通过引用而不是值复制。即如果我这样做：

```
NSMutableArray arrayA = [arrayB mutableCopy]; 
```

然后改变arrayB的值，那么arrayA的值也会改变。

我认为Java有一个按值复制的 clone() 方法。在目标 c 中是否有等价物？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:30:15.840

该`mutableCopy`方法执行“浅”复制。的每个元素`arrayA`都是对也在 中的对象的引用`arrayB`。如果添加元素`arrayA`（或移除元素），`arrayB`将保持不变，反之亦然。但是由于`arrayA`和`arrayB`引用相同对象的元素，对这些对象之一的更改“显示”在两个数组中。

如果您想要 的一级深层副本`arrayB`，您可以这样做：

```
NSMutableArray *arrayA = [[NSMutableArray alloc] initWithArray:arrayB copyItems:YES]; 
```

这将产生这样的效果：

```
NSMutableArray *arrayA = [[NSMutableArray alloc] init];
for (id element in arrayB) {
    [arrayA addObject:[element copy]]; //copies immutable objects to new array  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:38:05.393

要深度复制数组，您需要使用：

```
NSMutableArray *newArray = [[NSMutableArray alloc] initWithArray: oldArray copyItems:YES]; 
```

这`copyWithZone:`对数组中的每个对象执行

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T23:29:15.177

根据 Apple 的文档，常规`[NSMutableArray copy]`方法将返回一个“功能独立的对象，其值与制作副本时的原始值相同”。您可能应该只使用它。

要完全确定它是可变的，请使用`[[NSMutableArray alloc] initWithArray:[otherArray copy]]`.

# jquery - jquery ( each 和 eq ) 在 switch 中一起使用

> ID：11270107
> 
> 赞同：2
> 
> 时间：2012-06-29T23:21:42.790
> 
> 标签：jquery, indexing, each

问题 1：我正在尝试使用 eq() 将相同的分类 div 元素的 css 操作到它们的顺序，但我无法访问 eq() 值。

问题2：用switch方法试过这个。有没有办法用较少的代码（如 for 循环）来实现这一进展？

[这是演示](http://jsfiddle.net/Aw39W/7/)

HTML

```
<div id="a" class="ele">0</div>
<div id="b" class="ele">1</div>
<div id="c" class="ele">2</div> 
```

​ jQuery

```
$('.ele').each(function() {
var eleH = 100;
var add = 10;

 $('.ele').eq(X); //trying to get value here

 switch(X) {
  case 0:
    $('.ele').css({'height': (eleH + add) + 'px'}); // #a { height:110px}
    break;
  case 1:
    $('.ele').css({'height': (eleH + (add*2)) + 'px'}); // #b { height:120px}
    break;
  case 2:
    $('.ele').css({'height': (eleH + (add*3)) + 'px'}); // #c { height:130px}
    break;
 }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:27:46.267

检查这个[http://jsfiddle.net/Aw39W/4/](http://jsfiddle.net/Aw39W/4/)

您没有为 X 和项目分配值

```
$('.ele').each(function(X) {
    var eleH = 100;
    var add = 10;

    $('.ele').eq(X); //trying to get value here

    switch(X) {
      case 0:
        $(this).css({'height': (eleH + add) + 'px'}); // #a { height:110px}
        break;
      case 1:
        $(this).css({'height': (eleH + (add*2)) + 'px'}); // #b { height:120px}
        break;
      case 2:
        $(this).css({'height': (eleH + (add*3)) + 'px'}); // #c { height:130px}
        break;
    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:30:55.080

我不确定你想做什么，但如果你想根据它的位置改变 CSS 属性，你可以这样做：

```
$('.ele').each(function(i) {
    $(this).css('height', 100 + (10*i));
}); 
```

这是工作版本：http: [//jsfiddle.net/Aw39W/6/](http://jsfiddle.net/Aw39W/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:31:40.633

不太确定您要在这里实现什么，因为您似乎不是在元素本身上设置高度，而是在其他一些元素上设置高度，`project`. 快速连续设置和覆盖它的高度 3 次，看起来就像只发生了最后的循环迭代。

无论如何，从理论上讲，您的代码可以像这样优化。最好记住`each()`传递了一个参数，表示正在处理的元素的索引。

```
var height = 100, add = 10;
$('.ele').each(index) {
    project.css({height: height + (add * index)});
}); 
```

另请注意，我在循环之外声明维度变量 - 无需继续重新定义这些。

# objective-c - Objective-C 块和垃圾收集环境

> ID：11270109
> 
> 赞同：1
> 
> 时间：2012-06-29T23:22:00.387
> 
> 标签：objective-c, garbage-collection, objective-c-blocks

我找不到任何关于块和垃圾收集的参考资料；甚至“Apple Bocks Reference”也没有提及它（只是几个注释）。

我从未在 GC 环境中使用块进行开发，我想知道它是如何工作的，支持什么以及整个过程有多少“自动”。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:23:14.323

作为实现优化块最初是堆栈分配的；这意味着您可以毫无问题地将它们向下传递。

但是，如果您希望将它们向上传递（作为返回值）或存储它们，则必须首先将它们复制到堆中。一旦在堆上正常内存管理规则适用，无论您使用的是 MRC、GC 还是 ARC - 所以它们在 GC 下工作正常。

要将它们复制到堆上，如果您使用 GC 或 MRC，则必须使用 block_copy()（或 [copy]）；在 ARC 下*，只要*你不抛弃类型（例如，通过分配给 type 的变量`id`），那么 block_copy 在存储到强变量或从函数返回时是自动的 - 但调用它不会造成任何伤害，所以如果有疑问你可以叫它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:48:20.817

较新的文档中没有讨论垃圾收集是有原因的，并不是垃圾收集太新。

观看 WWDC 2012 第 101 场会议，时间为 1:13:00—1:14:10。此会话受 NDA 保护，但观看该会话 70 秒后您将不会使用垃圾收集。（一旦细节公开，我会更新这个答案，当山狮发货时他们应该这样做。）

此外，请参阅[Chris Lattner 的帖子](https://devforums.apple.com/thread/146583?start=0&tstart=0)。Chris Lattner 为 Apple 工作，并在 WWDC 之前发布了此内容。

底线：

1.  不要使用垃圾收集。
2.  如果您正在使用垃圾收集，您将希望在 Xcode 4.4 发布后进行迁移。

# asp.net-mvc - 创建/编辑父子窗体 MVC

> ID：11270111
> 
> 赞同：4
> 
> 时间：2012-06-29T23:22:58.670
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在使用 C# 和 MVC3

我有一个简单的实体模型

实体：订单、订单项

订单有 0 个或更多订单项目

我想创建一个页面来创建订单

在此页面上，我将填写订单表中的字段（客户、电话、订单号...等）

然后会有一个网格（我正在使用 Telerik MVC 网格）。我想将 OrderItems 添加到此网格中。我正在考虑在网格上方有一个带有自己的提交按钮的小表单。我可以使用 ajax 提交并使用 ajax 刷新网格。

在底部会有一个提交按钮，可以一次创建订单和所有订单项。

我似乎无法将整个解决方案拼凑在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:12:53.770

简短回答：关注这篇文章 -[如何在单个创建视图上对订单和订单详细信息实施创建操作](https://stackoverflow.com/q/6368804/1437962)

基本上，将您的代码转换为主视图中的部分视图。还将订单输入表单与显示订单列表分开。此外，您可能会发现查看此资源很有用 - [Empty Model with Partial View](http://forums.asp.net/p/1657368/4319330.aspx/1?Empty%20Model%20with%20Partial%20View)

# javascript - 每个页面的Javascript？

> ID：11270114
> 
> 赞同：0
> 
> 时间：2012-06-29T23:23:04.600
> 
> 标签：javascript, jquery

我有一些简单的 JQuery / Javascript 来为所有外部超链接执行一些简单的逻辑：

```
<script>
    $("a[href^='http://']:not([href*='"+location.hostname+"']),[href^='https://']:not([href*='"+location.hostname+"'])")
    .addClass("external")
    .attr("target","_blank")
    .attr("title","Opens new window").click(function(e) {alert('You are leaving mysite and going somewhere else, you crazy dude')});
</script> 
```

这对于一页来说很好。但是，我希望在我的应用程序的每个网页中都有它，并且 100% 确定它在那里。

有什么好的技巧可以做到这一点吗？

我唯一能想到的是，如果您使用的是 java 架构，那么要有一个基本 JSP 并确保基本 JSP 调用它。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:29:36.040

你不需要一些服务器端框架...如果你使用一些模板库（玉把手、胡子、jquery 模板），或者如果你只是分离出你的 HTML 文件，你可以用 jquery 将它们拉入并在页面上呈现它们. 查看 .load 函数。

此外，即使它们是静态的，您也应该分离出您的 html 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:26:52.337

将其包装在一个函数中并调用该函数。然后你可以只调用函数并将实现留给函数调用。由于您没有指定服务器端技术，例如 asp.net 或 php，当然会有其他选项（部分视图或模板）使用它。

```
function doStuff(){

   $("a[href^='http://']:not([href*='"+location.hostname+"']),     
     [href^='https://']:not([href*='"+location.hostname+"'])")
     .addClass("external")
     .attr("target","_blank")
     .attr("title","Opens new window").click(function(e) {alert('You are leaving mysite and going somewhere else, you crazy dude')});

}

<script>
   doStuff();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T23:26:50.210

这取决于您的网站的结构。如果您有一个服务器端框架（如您的 JSP 示例），那么您可以拥有一个确保脚本以某种方式被包含在内的函数。

如果您只有静态 HTML 页面，我的建议是将该代码放在脚本文件中（比方说`dontleaveme.js`）。然后在每一页上，就做

```
<script src="dontleaveme.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T23:28:44.573

一个好的应用程序设计将有一个布局文件或页眉和页脚文件，用于每个页面。然后很容易进行更改，例如添加脚本，这会影响站点上的每个页面。如果您不使用这种技术，这是一个很好的开始。

# php - 为什么 PHP 会话似乎会自动重复自己？

> ID：11270115
> 
> 赞同：0
> 
> 时间：2012-06-29T23:23:08.030
> 
> 标签：php, session

看看以下公认无用的代码：

```
<?php
session_start();
$_SESSION["key-".rand(1,1000)] = time();
print_r($_SESSION);
die(); 
```

如果您要从本地计算机运行它，它会打印出如下内容：

```
Array
(
    [key-272] => 1341011374
) 
```

如果您将代码保持*原样*，然后刷新浏览器，您会看到与此非常相似的内容：

```
Array
(
    [key-272] => 1341011374
    [key-954] => 1341011374
    [key-895] => 1341011379
) 
```

再次刷新：

```
Array
(
    [key-272] => 1341011374
    [key-954] => 1341011374
    [key-895] => 1341011379
    [key-337] => 1341011379
    [key-15] => 1341011869
) 
```

依此类推，每次将*两条*记录添加到 $_SESSION 数组（不仅仅是我期望的一条）。另外，请注意在每对添加的记录中，第一个值与前一个添加的记录相同，但键是不同生成的随机数。

谁能解释这里发生了什么？

## 更新 1

正如我在评论中向其他人提到的，请注意第一个请求只设置*一个*$_SESSION 值，然后每次设置 2。

从第二个请求开始，当它为每个请求设置 2 个值时，时间戳不一样。如果请求发生了两次，您希望它们相同或接近，但每对中的第一个*始终*与前一个请求的时间戳相同，即使您在两者之间等待了很长时间。奇怪。

## 更新 2

我刚刚检查了 Firefox 和 Safari，起初得到了一些奇怪的结果，然后一切似乎都按预期工作，每个请求只添加了一条记录。我已经删除了所有代码，只留下了您在此处看到的代码，在一个普通的 index.php 文件中，其中没有其他代码。然而，在 Chrome 中，它的行为方式与我上面描述的完全相同。

似乎是一个以 Chrome 为中心或至少与 Chrome 相关的问题，但我仍然不知道为什么？除非您的每个脚本都是幂等的，否则让它们运行两次似乎是一个非常可怕的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:36:04.327

如果您开始进行这些测试，请不要使用 rand 进行测试，因为这甚至可能是重复的。除此之外，不要只测试少量的测试（刷新），而是要进行相当数量的测试。您可以通过发送数千个请求以查看实质性结果的大量测试框架来做到这一点。还可以使用不同的浏览器进行测试以获得真实的测试结果。

根据会话的定义，它没有意义。加载图像或样式表等资源也可能会产生这些问题。

还要检查指向同一应用程序上其他页面的链接，因为它们可能已预加载。一般来说，POST 表单不会，但链接会。

由于 PHP 的标准，这个一般问题不太可能，这并不意味着它不可能是一个错误。不过，在用一种非常常见的传播语言思考结构性问题之前，首先要检查你身边的一切。如果存在这样的错误，它将损害很多很多网站。

# sockets - 给定 2 个作者，如何确定谁在套接字上写了什么？

> ID：11270117
> 
> 赞同：0
> 
> 时间：2012-06-29T23:23:14.840
> 
> 标签：sockets

假设程序的一部分将一些内容写入套接字，而**同一程序**的另一部分从同一个套接字读取内容。如果外部工具写入同一个套接字，我将如何区分谁向套接字写入了什么（使用读取它的部分）？使用[命名管道](http://en.wikipedia.org/wiki/Named_pipe)会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:35:30.077

如果您谈论的是 TCP，那么您描述的情况是不可能的，因为连接是一对一的。如果您的意思是 UDP，您可以通过在 recvmesg() 函数中设置适当的标志来获取发件人地址。

# assembly - 将两个值相乘并将它们打印到屏幕上（NASM、Linux）

> ID：11270118
> 
> 赞同：1
> 
> 时间：2012-06-29T23:23:34.753
> 
> 标签：assembly, x86-64, nasm, cpu-registers

我一直在阅读，为了让人们在寄存器上执行整数/浮点除法，正在执行的寄存器实际上需要是`initialized`. 我很好奇正确的汇编指令是做什么的。我是否只是通过以下方式提供地址：

`mov ecx, 0x65F ;0x65F represents an address for ecx to point to`.

然后立即（稍后在代码中）执行以下操作：

`mov byte [ecx], 0xA ;move the value of 0xA into the contents of ecx, using only a byte's worth of data`

这是执行此类操作的正确方法吗？如果不是，那是什么？

**更新**

好的，所以我要做的基本上是将两个值相乘并将它们打印到屏幕上。代码如下，由于某种原因，每次我尝试除法时`edx`都会遇到分段错误或浮点算术异常。有人可以向我解释我做错了什么吗？

**代码**

```
section .data
    counter: db 0xA                         ;store value 10 in 'counter', while allocating only one byte. This will be used for decrementing purposes
section .bss
    valueToPrint: resb 4                    ;alloc 4 bytes of data in 'valueToPrint'

section .text

global _start

_print_char:                    
    add eax, '0'                ;convert to ascii
    mov [valueToPrint], eax     ;store contents of 'eax' in valueToPrint
    mov eax, 4                  ;syswrite
    mov ebx, 1                  ;stdout
    mov ecx, valueToPrint       ;machine will take whatever value exists in 'ecx' and print
    mov edx, 1                  ;print only a single byte's worth of data
    int 0x80                    ;invoke kernel to perfrom instruction
    ret                         

_convert_values:
    mov edx, 0xA                ;dividing eax by 10, which will lower its tens place
    div edx                     ;(**Program crash here**)do division: remainder SHOULD be stored in edx
    mov byte [edx], 0x0         ;zero out edx       
    call _print_char            ;do printing for latest character
    dec byte [counter]          ;decrement counter
    mov dword [eax], counter    ;store counter in eax
    jnz _convert_values         ;while eax > 0 continue process

_endl:
    mov eax, '\n'               ;store newline character in eax to be printed
    call _print_char            ;print value
    ret                 

_mul:
    mov eax, 0x2A ;store 42 in eax
    mov edx, 0x2B ;store 43 in edx
    mul edx       ;multiply [eax] * [edx]
    ret

_safe_exit:
    mov eax, 1  ;initiate 'exit' syscall
    mov ebx, 0  ;exit with error code 0
    int 0x80    ;invoke kernel to do its bidding 

_start:
    nop                             ;used to keep gdb from complaining

    call _mul                       ;multiply the values
    call _convert_values            ;do hex to ascii conversion

    jmp _safe_exit                  ;use jmp as opposed to call since it technically doesn't 'ret' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T13:23:45.097

我们分别在聊天中交谈......

这是一个可以使用的工作版本。

它有一个微妙的问题。你能找到吗？你能解释一下为什么它会这样做吗？

```
; Multiply two numbers, display in ascii/decimal
;
; (because I have a 64bit system, this forces 32bit code)
        bits    32
;
        section .text
;
; _start is the ONLY label you MUST prepend _
; others might be library functions (ex: _printf,_exit)
; pure assembly only needs _start, if linked with glibc
; typically need _main INSTEAD of _start
;
        global _start
;
;
_start:
        nop                             ;placeholder for gdb's debug interrupt
;
        call    mul                     ;multiply the values
        call    convert_values          ;do hex to ascii conversion
;
        jmp     safe_exit               ;use jmp as opposed to call since it technically doesn't 'ret'
;
;
; subroutines / functions follow
;
mul:
        mov     eax, 0x2A               ;store 42 in eax
        mov     edx, 0x2B               ;store 43 in edx (42*43=1806)
        mul     edx                     ;multiply eax*edx, result in edx:eax
        ret
;
; this routine doesn't handle BIG values from 'mul' which extend into edx
; we're learning, don't make things multiply out to more than 4.2 billion-ish
convert_values:
        mov     edx,0                   ;value actually edx:eax, zero edx
        mov     ecx,0x0A                ;divide edx:eax by 10
        idiv    ecx                     ;result in eax, remainder in edx
        push    eax                     ;save value on stack
        mov     eax,edx                 ;put remainder (0-9) in eax
        add     eax,'0'                 ;convert value to ascii character
        call    print_char              ;print the latest character
        pop     eax                     ;restore value
        or      eax,eax                 ;set flags based on eax value
        jnz     convert_values          ;while eax != 0 continue process
;
; nasm doesn't convert \n into LF... just use 10, equivalent
endl:
        mov     eax, 10                 ;store newline character in eax to be printed
        call    print_char              ;print value
        ret
;
print_char:
        mov     [valueToPrint], eax     ;store contents of 'eax' in [valueToPrint]
        mov     eax, 4                  ;syswrite
        mov     ebx, 1                  ;stdout
        mov     ecx, valueToPrint       ;machine will take whatever value exists in [ecx] and print
        mov     edx, 1                  ;print only a single byte's worth of data
        int     0x80                    ;invoke kernel to perfrom instruction
        ret
;
safe_exit:
        mov     eax,1                   ;initiate 'exit' syscall
        mov     ebx,0                   ;exit with error code 0
        int     0x80                    ;invoke kernel to do its bidding
;
; =====================================
        section .bss
; this section is not allocated, just reserved.
; Automatically set to zero when program starts
;
; alloc 4 bytes of data in 'valueToPrint'
valueToPrint:
        resd    1               ; 1 resd=4 resb (Dword/Byte)
;
; 
```

> 剧透警报...
> 
> > 它会向后打印结果！
> > 为了解决这个问题，我们必须重新设计在打印之前如何获取和存储数字。

我将通过电子邮件将其直接发送给您，并附上一些附加说明。

# php - json 回显问题，数组

> ID：11270120
> 
> 赞同：0
> 
> 时间：2012-06-29T23:23:44.473
> 
> 标签：php, json

我正在编写一个脚本，它将使用 steam api，并且我选择使用 json 作为响应格式。所以我使用了有和没有 jason_decode() 的 var_dump，它似乎没问题。但无法打印出来，或回显它。

获取 json 数据的脚本

```
<?php
$id = $_GET['SteamId'];
$get = file_get_contents("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=API_KEY_REMOVED_FOR_SECURITY&steamids=$id",true);
$data = json_decode($get);
//var_dump($data);
echo $data->realname;
?> 
```

所以，我使用带有 json_decode 的 var_dump 就是这样。

```
object(stdClass)#1 (1) { ["response"]=> object(stdClass)#2 (1) { ["players"]=> array(1) { [0]=> object(stdClass)#3 (15) { ["steamid"]=> string(17) "76561198053511970" ["communityvisibilitystate"]=> int(3) ["profilestate"]=> int(1) ["personaname"]=> string(9) "Undefined" ["lastlogoff"]=> int(1340978067) ["profileurl"]=> string(41) "http://steamcommunity.com/id/Heisteknikk/" ["avatar"]=> string(114) "http://media.steampowered.com/steamcommunity/public/images/avatars/5c/5c75278da69102d9c8290bccd1becbb4081954cd.jpg" ["avatarmedium"]=> string(121) "http://media.steampowered.com/steamcommunity/public/images/avatars/5c/5c75278da69102d9c8290bccd1becbb4081954cd_medium.jpg" ["avatarfull"]=> string(119) "http://media.steampowered.com/steamcommunity/public/images/avatars/5c/5c75278da69102d9c8290bccd1becbb4081954cd_full.jpg" ["personastate"]=> int(1) ["realname"]=> string(7) "Andreas" ["primaryclanid"]=> string(18) "103582791430704052" ["timecreated"]=> int(1322427688) ["loccountrycode"]=> string(2) "NO" ["locstatecode"]=> string(2) "09" } } } } 
```

以及来自 json 的原始数据。

```
{
    "response": {
        "players": [
            {
                "steamid": "76561198053511970",
                "communityvisibilitystate": 3,
                "profilestate": 1,
                "personaname": "Undefined",
                "lastlogoff": 1340978067,
                "profileurl": "http:\/\/steamcommunity.com\/id\/Heisteknikk\/",
                "avatar": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/5c\/5c75278da69102d9c8290bccd1becbb4081954cd.jpg",
                "avatarmedium": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/5c\/5c75278da69102d9c8290bccd1becbb4081954cd_medium.jpg",
                "avatarfull": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/5c\/5c75278da69102d9c8290bccd1becbb4081954cd_full.jpg",
                "personastate": 1,
                "realname": "Andreas",
                "primaryclanid": "103582791430704052",
                "timecreated": 1322427688,
                "loccountrycode": "NO",
                "locstatecode": "09"
            }
        ]

    }
} 
```

我一直在谷歌上搜索关于使用“echo $data->realname;”打印 json 的信息。所以我不知道我做错了什么，所以它不能回显数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-10T03:25:53.167

# 介绍

嘿，这是一个非常古老的问题，但因为这里没有答案。

在解码方面你做对了`JSON`PHP 有一个内置函数`json_decode`，可以很容易地为你解码函数：

```
$json = '{...}';
$obj = json_decode($json, [ASSOC_ARRAY = FALSE]); 
```

您可以设置为 bool 的第二个参数用于关联数组，该数组将更改提及：

```
$obj->response; 
```

到

```
$obj['response']; 
```

* * *

# 回复

现在你说你需要`realname`来自玩家的，这就像通过玩家在数组中的位置获取它一样简单，或者只是循环遍历数组：

```
echo $obj->response->players[0]->realname; // Andreas 
```

或者，如果您有多个用户：

```
for( $i = 0; $i < count($obj->response->players); $i++ ) {
  echo $obj->response->players[$i]->realname;
} 
```

这将显示所有`realname`（s）

# ruby - Ruby 符号链接在 OS X 中不起作用

> ID：11270124
> 
> 赞同：1
> 
> 时间：2012-06-29T23:24:09.090
> 
> 标签：ruby, macos, symlink

以下脚本按预期创建符号链接，但永远找不到原始文件。有人能告诉我为什么吗？它们似乎是有效的符号链接，因为它们在 OS X 中注册为别名，并`File.symlink?`在创建后返回 true。

```
 #!/usr/bin/env ruby

 case ARGV.first when 'link'
   file = ARGV[1]

   if !File.exist?(file)
     puts "Unfortunately, \"#{file}\" was not found."
     exit 0
   end

   bin = "/usr/local/bin/"

   if !File.directory?(bin)
     puts "#{bin} does not exist!"
     puts "creating #{bin}..."
     system "mkdir -p #{bin}"
   end

   if File.extname(file).empty?
     if File.symlink?(bin + file)
       puts "Unfortunately, \"#{bin + file}\" already exists."
       exit 0
     end

     name = bin + file

     puts "Symlinking #{file} to #{name}..."
     File.symlink(file, name)
     system "chmod +x #{name}"
   else
     name = file.split(File.extname(file))
     name = bin + name.first

     if File.symlink?(name)
       puts "Unfortunately, \"#{name}\" already exists."
       exit 0
     end

     puts "Symlinking #{file} to #{name}..."
     File.symlink(file, name)
     system "chmod +x #{name}"
   end
 else
   puts "try: bin link <file>"
 end 
```

该脚本按以下方式运行：

```
 ruby script.rb link myfile.rb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:38:37.837

要回答我自己的问题，替换实例

```
File.symlink(file, name) 
```

和

```
File.symlink(File.expand_path(file), name) 
```

完美地工作。

# c - ANSI C 中的字符串处理

> ID：11270127
> 
> 赞同：0
> 
> 时间：2012-06-29T23:24:24.130
> 
> 标签：c, string, path, filesystems

假设我收到以下路径

```
char* path = "home/directory/file.txt" 
```

我怎么能处理这个字符串来获取只是`file.txt`的父目录来获取这个

```
"home/directory" 
```

我想编写以这种方式工作的东西

```
char* _get_ParentDir(char* file_path); 
```

并且该函数将返回父路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T23:34:26.500

首先，不要给你的函数起一个下划线开头的名字。这样的标识符保留给实现。

根据您的描述，您可以将最后一个`/`字符替换为空字符：

```
char *last_slash = strrchr(path, '/');
if (last_slash != NULL) {
    *last_slash = '\0';
} 
```

这会修改字符串 - 但您需要一个函数。编写一个返回指向字符串的指针的函数很棘手。您必须担心为字符串分配空间。常见的方法有以下三种：

1.  在函数中声明一个`static`数组，并返回一个指向其第一个元素的指针。问题：对函数的每次调用都会破坏任何先前调用使用的缓冲区。

2.  让调用者将指针传递给写入结果的缓冲区。这使调用者的事情变得更加复杂。

3.  让函数使用分配缓冲区`malloc()`（并确保检查分配失败）。这可行，但它使调用者稍后负责`free()`处理缓冲区。

您的系统还可能提供为您执行此操作的功能。另一个答案提到了一个`dirname()`函数`<libgen.h>`。这是由 POSIX 指定的，但不是由 C 标准指定的；您的系统可能有也可能没有。您应该阅读手册页（`man 3 dirname`如果您使用的是类 Unix 系统），尤其是 NOTES 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:31:22.820

```
const char* bname=path;
bname+=strlen(path);
while (bname>path && bname[-1]!='\\' && bname[-1]!='/')
   --bname; 
```

还有 basename() 函数，但我的版本适用于 DOS 和 Unix/Linux 路径。

*[编辑：我想提一下，在欧内斯特·弗里德曼-希尔在下面发表评论的大约同一时间，我自己发布了以下内容。在那之后，我继续发布我的其余答案。-phonetagger]* 哎呀...我倒读了你的问题。你想要 dirname() 函数。 `#include <libgen.h>`

或者....

```
const char* dname = strdup(path);
const char* bname = dname;
if (dname)
{
   bname+=strlen(path);
   while (bname>dname && bname[-1]!='\\' && bname[-1]!='/')
      --bname;
   if (bname != dname)
      bname[-1] = '\0';
   else
   {
      bname = path;
      free(dname);
      dname = NULL;
   }
} 
```

请注意，此版本为 dname 分配了一个新字符串，您可能想要也可能不想 free()，这取决于您需要它拥有的寿命。如果您在应用程序执行期间需要它，则根本不需要 free() 它，操作系统将在应用程序退出时自动回收您进程的整个虚拟地址空间。

另请注意，strdup() 是必需的，因为您对 char* 路径的分配来自静态 const 字符串初始化程序，该初始化程序很可能分配在程序的只读部分（可能是 .rodata，具体取决于您的编译器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T23:39:36.173

只是在最后一个斜杠上加上一个 '\0' 可能会对原始字符串产生意想不到的副作用。为避免这种情况，您需要创建另一个字符串：

```
char* _get_ParentDir(char* file_path) {
    char *c = strrchr(file_path, "/");
    long n = c - file_path;
    char *dir = malloc(n+1); // this will need to be freed later
    dir[n] = 0;
    memcpy(dir, file_path, n);
    return dir;
} 
```

# css - Fancybox：覆盖 CSS

> ID：11270128
> 
> 赞同：0
> 
> 时间：2012-06-29T23:24:36.463
> 
> 标签：css, fancybox

如何覆盖fancybox的css？

我正在构建一个在两个不同页面上使用 fancybox 的网站，我想覆盖其中一个页面上的 fancybox css，以便将箭头推到框外。IE 我想在fancybox上赋予这些属性：

```
.fancybox-prev {
    left: -80px !important;
}

.fancybox-next {
    right: -80px;
} 
```

我不知道如何做到这一点，其他相关的 stackoverflow 问题的解决方案也不起作用。我确信有一个简单的方法可以做到这一点。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:45:48.137

```
$('.fancybox-prev').attr('style', 'left: -80px !important');

$('.fancybox-next').attr('style', 'right: -80px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:24:58.513

如果使用 fancybox v1.3.4 检查： http: [//fancybox.net/faq No.8 ....](http://fancybox.net/faq)[检查这个](http://groups.google.com/group/fancybox/browse_thread/thread/525a572c3b9f35a4/)也可能有用。

如果使用 fancybox v2.x 检查： [https ://stackoverflow.com/a/8672001/1055987](https://stackoverflow.com/a/8672001/1055987)

基本上，您必须在加载了 fancybox css 文件之后设置一个 CSS 内联声明以覆盖这些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T00:01:30.863

您必须记住[CSS 的层次结构](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。内联 CSS 是最重要的，其次是外部 CSS。对于后者，它们是从 CSS 文件的顶部读取的。因此，在下面编写您想要用来覆盖前一个样式的样式应该可以很好地完成工作。

其次，你总是可以使用 jQuery 来做到这一点。ShaggyInjun 举了一个很好的例子。您应该可以通过使用[$(selector).css();来做到这一点。](http://api.jquery.com/css/).

# php - 根据用户重定向到不同的页面

> ID：11270131
> 
> 赞同：0
> 
> 时间：2012-06-29T23:25:00.293
> 
> 标签：php, mysql

我需要一个代码来将特定用户重定向到一个页面，并将其他所有人重定向到另一个页面。这就是我所拥有的。

```
if(isset($_POST['submitted']))
{
if($fgmembersite->Login())
 {
    $fgmembersite->RedirectToURL("login-home.php");
 }
}

?> 
```

我需要用户“megan”密码“megan”去 admin.php 和其他人去 login-home.php

我可以做这样的事情：

```
if ($_SESSION['username'] === "megan") { 
        header('Location: admin.php'); 
    }else{ 
        header('Location: login-home.php');  
    } 
```

对不起，我对此很陌生！我仍然不明白其中的一些。

哦，如果我可以做第二个代码块，我如何将它与我的第一个代码块合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:45:06.500

只需这样做：

```
if ('megan' === $_SESSION['username'] && 'megan' === $_SESSION['password']) { 
    header('Location: admin.php'); 
} else { 
    header('Location: login-home.php');  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:22:57.527

我想通了，这就是我所做的。

```
<?PHP
require_once("./include/membersite_config.php");
session_start();
$users['admin'] = array('password' => 'admin', 'redirect' => 'admin.php');
$users[$username] = array('password' => $password, 'redirect' => 'login-home.php');

if(array_key_exists($_POST['username'],$users)) {
if($_POST['password'] == $users[$_POST['username']]['password']) {
    $_SESSION['loggedIn'] = true;
    header('Location:'.$users[$_POST['username']]['redirect']);
    exit();
 }
else {
// invalid password
header('location: login.php');
exit;
}
}
else {
// invalid username
header('location: login.php');
exit;
}
if(isset($_POST['submitted']))
{
 if($fgmembersite->Login())
 {
      $fgmembersite->RedirectToURL("login-home.php");
 }
}

?> 
```

但由于某种原因，有时页面不会加载。有任何想法吗？

好的，我用这个工作了大约一个小时，然后它就停止了工作......我不知道。我能得到一些帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:54:53.783

您应该考虑为每个用户使用组。例如，您可以在用户表（其中保存用户名和密码）中创建一个组字段，该字段可以存储组号。然后在检查用户身份验证后（通过从数据库中获取用户并根据输入的用户名和密码对其进行验证），您只需检查组字段（从获取的记录中）将其重定向到特定页面。

例如，验证用户名和密码后，您可以使用：

```
switch($group) {
    case '1':
        header('Location: admin.php');
        break;
    case '2':
        header('Location: login-home.php');
        break;
    default:
        // any other location you want to redirect
} 
```

通过使用此方法，您可以拥有多个属于同一组的用户并被重定向到特定页面（基于组号）。这比检查个人用户名要好。

只是我的 2 美分；）

# ios - 带有登录覆盖的 iOS 5 故事板（iOS 5.1；Xcode 4.3.3）？

> ID：11270133
> 
> 赞同：2
> 
> 时间：2012-06-29T23:25:18.543
> 
> 标签：ios, xcode, ios5, xcode4, storyboard

我正在尝试创建一个 iOS（iPhone 特定）应用程序，用户必须在访问该应用程序的其余部分之前进行身份验证。我正在为主应用程序使用 Storyboard，它看起来像这样（分成单独的行）：

```
(1)        -> NavigationController
(2)  -(o-o)-> OfficesViewController
(3)   -[<-]-> OfficeViewController 
```

我还有一个名为 XIB 的单独文件，当用户按下按钮时`ScanOverlayViewController`，它会以编程方式推送。`OfficeViewController`不确定这样混合 Storyboard 和 XIB 是否合适，但到目前为止它一直在工作。

无论如何，回到主题，我想在 前面放置一个身份验证屏幕`NavigaitonController`，但我不确定如何。

我尝试在情节提要中放置一个未链接的视图并将其设置为初始视图。然后我放置了一个隐藏按钮并对`NavigationController`. 在代码中，我尝试让控制器执行 segue，但即使视图正确显示，实际上也没有执行 seque。

然后，我尝试将身份验证视图设为自己单独的 XIB，并在应用程序委托中初始化控制器并将其视图设置为应用程序委托的子视图。这只是导致应用程序直接进入`OfficesViewController`视图，就好像我什么都没做一样。

有没有一种特定的方法可以正确地做到这一点，以便它与故事板一起使用？

提前致谢！

**更新**

这是我当前的应用程序委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
AuthenticationViewController *authenticationViewController = [[AuthenticationViewController alloc] initWithNibName:@"AuthenticationViewController" bundle:nil];

if (authenticationViewController) {
    NSLog(@"Should have generated %@", authenticationViewController);
};

[[[application keyWindow] rootViewController] presentModalViewController:authenticationViewController animated:YES];

    return YES;
} 
```

控制器确实被分配和初始化，但它只是没有出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T23:33:30.407

将其`NavigaitonController`作为您的初始视图控制器，然后在需要时以模态方式显示身份验证屏幕。您可以在`-application:didFinishLaunchingWithOptions:`.

混合 XIB 文件和故事板很好，故事板无论如何都会变成 XIB（或 nib）文件，它们只是有一些额外的元数据。混搭是有道理的。

例如：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([self needsAuthentication])
    {
        dispatch_async(dispatch_get_main_queue(), ^{
            AuthVC *authVC = [[AuthVC alloc] init];
            [[UIWindow keyWindow].rootViewController presentModalViewController:authVC animated:YES];
        });
    }
    // anything else
    return YES;
} 
```

# java - java正则表达式有问题

> ID：11270134
> 
> 赞同：1
> 
> 时间：2012-06-29T23:25:18.590
> 
> 标签：java, regex

我是 Java 正则表达式的新手，无法使其正常工作。以下代码表示未找到匹配项。

```
pattern = Pattern.compile("EN\\( [ -][0-5]\\)= \\d+.?\\d*E[+-]\\d{2}");
match = pattern.matcher("EN(  0)= 0.000000E+00");
String result = match.group(); 
```

据我所知，这应该有效。我一直在使用[有关正则表达式的 Oracle java 教程](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)来指导我。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:42:26.050

快到了，你只需要：

```
Matcher match = pattern.matcher("EN(  0)= 0.000000E+00");
match.find(); // <-- missing
String result = match.group(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:42:36.140

`-`in`[ -]`是特殊字符，因此您必须使用`[ \\-]`

```
Pattern pattern = Pattern.compile("EN\\( [ \\-][0-5]\\)= \\d+.?\\d*E[+\\-]\\d{2}");
Matcher match = pattern.matcher("EN(  0)= 0.000000E+00");
if (match.find())
    System.out.println(match.group()); 
```

# asp.net-mvc - 应该在 ASP.NET MVC 控制器的代码中测试什么？

> ID：11270136
> 
> 赞同：2
> 
> 时间：2012-06-29T23:25:44.060
> 
> 标签：asp.net-mvc, unit-testing, testing

标题不是很具体，但让我们使用示例。我们有 ASP.NET MVC 操作代码：

```
[HttpPost]
[ExportModelStateToTempData]
public RedirectToRouteResult ChangePassword(int id, UserChangePasswordVM changePassword)
{
    if (ModelState.IsValid)
    {
        var user = _userService.GetUserByID(id);

        //Checking old password. Administrators can change password of every user, 
        //providing his password instead of user's old password.
        bool oldPasswordIsCorrect = _loginService.CheckPassword(
            CurrentPrincipal.IsInRole(CTRoles.IsAdmin) ?
            CurrentPrincipal.User.UserName : user.UserName,
            changePassword.OldPassword);

        if (oldPasswordIsCorrect)
        {
            TempDataWrapper.Message =
                _userService.ChangePassword(user.UserName, changePassword.NewPassword) ?
                CTRes.PasswordChangedSuccessfully : CTRes.ErrorProcessingRequest;
        }
        else
        {
            ModelStateWrapper.AddModelError("ChangePassword.OldPassword",
                CTRes.CurrentPasswordIsNotValid);
        }
    }

    return RedirectToAction(ControllerActions.Edit, new { id });
} 
```

这是一种简单的方法。它需要用户 id 和密码更改表单的视图模型。如果模型状态有效，它会从服务层检索用户并调用函数来检查他的旧密码。管理员不必提供用户的旧密码，自己的就足够了。如果密码正确，则调用更改用户密码的函数。在成功或失败的情况下，适当的消息被放置在 TempData 中。操作以重定向到用户编辑页面结束，其中包含更改密码的表单并显示所有错误。

我有几个问题：

*   **这段代码应该测试什么？**
*   代码中的 if 语句很少。你会为每个场景编写一个测试吗？
*   您在控制器中测试什么？

代码中使用的接口和类（实现是在构造函数中注入的，但没关系）：

```
public interface IModelStateWrapper
{
    void AddModelError(string name, string error);
    bool IsValid { get; }
}

public interface IUserService
{
    User GetUserByID(int id);
    bool ChangePassword(string userName, string newPassword);
}

public interface ILoginService
{
    bool CheckPassword(string userName, string password);
}

public interface ITempDataWrapper
{
    string Message { get; set; }
}

public class UserChangePasswordVM : IValidatableObject
{
    [DataType(DataType.Password)]
    public string OldPassword { get; set; }

    [DataType(DataType.Password)]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    public string NewPasswordConfirmation { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrEmpty(NewPassword))
            yield return new ValidationResult(CTRes.PasswordNotEmpty, new[] { "NewPassword" });

        if (string.IsNullOrEmpty(NewPasswordConfirmation))
            yield return new ValidationResult(CTRes.ConfirmPassword, new[] { "NewPasswordConfirmation" });

        if (NewPassword != null)
            if (!NewPassword.Equals(NewPasswordConfirmation))
                yield return new ValidationResult(CTRes.PasswordsDontMatch, new[] { "NewPasswordConfirmation" });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:49:57.070

单元测试应该简单易懂。您应该避免在单个测试中测试大量场景。因为如果某些断言失败，那么您不知道以下断言会发生什么。单元测试是一种文档。您应该将较大的分解成较小的，这样您就可以很好地控制单元测试。

我最近开始进行单元测试，尤其是针对 ASP.NET MVC 项目。每当我看到 if..else 时，我都会进行两次测试。如果我有这样的控制器操作，那么以下是我将编写的单元测试。

**1\. 动作结果测试**

这是一个简单的测试，在这个测试中，我将检查输出操作结果是否包含操作名称`ControllerActions.Edit`和`id`路由值。由于无论条件如何，您总是返回具有相同值的相同操作结果，因此一个单元测试就足够了。

**2\. 角色测试**

所以在这里我将编写两个单元测试，一个用于`admin`其余的，另一个用于其余的。我将为. `_loginService`_ `admin`_ （这是一个自定义对象吗？我不确定你将如何模拟它）。`_loginService``CurrentPrincipal.User.UserName``CurrentPrincipal`

在非管理员测试中，我将在模拟对象中设置期望值，以便`user.UserName`传递给`_loginService`我期望的值。

在后面的测试中，我必须模拟`_userService`并存根该`GetUserByID`方法以返回自定义用户。

**3.测试正确/错误的旧密码**

这里我会写两个测试用例。如果旧密码是正确的，我是否得到了一些价值，`TempData`也不应该有模型错误，而其他测试则相反。

**4.密码修改成功/失败测试**

这里我们可能需要两个测试用例来测试`TempData`密码修改成功或异常失败时返回的消息。

# c++ - 删除自我的委托方法：可能的问题？

> ID：11270137
> 
> 赞同：0
> 
> 时间：2012-06-29T23:26:03.987
> 
> 标签：c++

> **可能重复：**
> [安全`delete this`吗？](https://stackoverflow.com/questions/550189/is-it-safe-to-delete-this)

好的，我想使用 some`Object`和它的 delegate `ObjectDelegate`。
这是示例代码：

```
class ObjectDelegate;

class Object {
private:
    int a;
    ObjectDelegate *delegate;
    void crazyMethod();

public:
    Object();
    ~Object();

    void setDelegate(ObjectDelegate*);
};

Object::Object() {
    delegate = NULL;
    a = 9001;
    std::cout << "Object Constructor";
}

Object::~Object() {
    std::cout << "Object Destructor";
}

void Object::crazyMethod() {
    if(delegate != NULL) {
        delegate->deleteMe(this);
    }
}

//-----

class ObjectDelegate {
public:
    virtual void deleteMe(Object*) = 0;
};

//------

class DelegateItself : public ObjectDelegate {
    void deleteMe(Object*);
};

void DelegateItself::deleteMe(Object *object) {
    delete object;
} 
```

我经常在 Objective-C 和 Java 中使用这种方法，但它如何在 C++-from-the-box 中工作？
我的问题是：当我在其中运行一个方法时，`Object`我从它调用另一个对象（）中的另一个方法`DelegateItself`并删除`Object`. 堆栈将是：

*   对象::~对象()
*   委托本身::deleteMe()
*   对象::crazyMethod()

所以在析构方法结束`deleteMe`后方法也结束（一段时间后）。`crazyMethod`但是不存在的对象会发生什么？如果我尝试使用变量`Object::a`，我将有可能获得垃圾而不是实际值（数据将无效）[希望我理解 C++ 逻辑]。如果我尝试在其中调用另一种方法，`Object`我可能会崩溃[希望如此]。但是如果没有后续方法被调用，是否可以**保证**正确结束？`crazyMethod`

# facebook-graph-api - 在用户的墙上发帖不会失败，但也不会失败

> ID：11270138
> 
> 赞同：1
> 
> 时间：2012-06-29T23:26:30.007
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我在使用 facebook SDK 6.0 发布新消息时遇到问题：

```
var client = new FacebookClient("<target users access token>")
{
    AppId = "<my app id>",
    AppSecret = "<my app secret>"
};
var args = new Dictionary<string, object>
        {
            {"message", "A message",
        };
dynamic postResult = client.Post("/me/feed", args); 
```

有趣的是 postResult 有一个 id 属性，但消息没有出现在用户提要/墙上。使用 API 获取所有提要不会返回帖子并使用 https://graph.facebook.com/[message_id] 手动查看它简单返回“false”。

我已经在沙盒模式开启和关闭的情况下尝试过这个，它有所作为。

关于我做错了什么的任何想法？

# ruby-on-rails - 在 Ruby on Rails 中禁用文本框？

> ID：11270141
> 
> 赞同：13
> 
> 时间：2012-06-29T23:26:53.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有代码：

```
 <% generate_bullets = Bullet.all %>
        <% generate_bullets.shuffle.first(4).each do |t| %>
        <%= f.text_field, :bullets, :class => 'text_field disabled' %> 
```

我想使用嵌入式 ruby​​ 禁用文本框，但无法这样做。如果我能就我所面临的情况得到任何帮助，我将不胜感激。

禁用文本框后，我希望有一个按钮从数据库表“bullets”中生成四个随机 ID，并以数组格式将它们打印在禁用的文本框中，并利用这四个打印的 ID 将它们发布到创建的页面上。任何帮助都会更好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-29T23:29:39.760

如果我没看错，请告诉我：您正试图从 HTML 的一开始就禁用文本字段。是对的吗？

如果是这样，`disabled`不是一个类；这是它自己的属性。

```
<%= f.text_field, :bullets, :class => 'text_field', :disabled => true %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-22T12:47:10.000

您也可以使用`:readonly => true` 属性。

对于 HAML

```
= f.text_field :name, :class => "form-control", :readonly => true 
```

再培训局

```
<%= f.text_field :name, :class => "form-control", :readonly => true %> 
```

# html - 如何将两幅画布叠放在一起？

> ID：11270142
> 
> 赞同：3
> 
> 时间：2012-06-29T23:27:02.533
> 
> 标签：html, canvas

我发现了类似的主题，但它们都使用了绝对定位，将画布放在页面的左上角。我将它们包含在一个 div 中，但我不确定如何让它们正确分层。我尝试在 CSS 中使用绝对和相对定位，但我没有任何运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:33:21.410

做这个：

```
<style>
    #container { position: relative; }
    .canvas { position: absolute; top: 0; left: 0; }
</style>

<div id="container">
    <canvas class="canvas" id="canvas1"></canvas>
    <canvas class="canvas" id="canvas2"></canvas>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:31:39.517

确保添加`position: relative`到包含`div`以便将画布元素绝对定位在其中。

# java - 在java中从背景TIF和前景TIF创建TIF图像的高性能是什么

> ID：11270150
> 
> 赞同：0
> 
> 时间：2012-06-29T23:27:40.410
> 
> 标签：java, colors, set, overlay, tiff

我有两个 TIF 文件，一个是背景（覆盖），另一个是前景。以下代码当前用于组合两个 TIF。

```
 // Background color of foreground image
    int w = Color.WHITE.getRGB();

    // Fill all pixels which are not background color
    for (int i = 0; i < foregroundImage.getWidth(); i++)
    {
        for (int j = 0; j < foregroundImage.getHeight(); j++)
        {
            int x = foregroundImage.getRGB(i, j);
            if (x != w)
                backgroundImage.setRGB(i, j, x);
        }
    } 
```

有没有其他方法有更好的性能来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:42:41.280

You can make the `Color.white` pixels transparent using `RGBImageFilter`, shown [here](https://stackoverflow.com/a/4380790/230513), or `LookupOp`, mentioned [here](https://stackoverflow.com/a/4383798/230513). Then you can use the `AlphaComposite.SRC_OVER` rule to combine the images. [`AlphaCompositeDemo`](https://sites.google.com/site/drjohnbmatthews/composite/source-code) is an example that lets one explore the available modes, and there's related example [here](https://stackoverflow.com/a/7824225/230513). Of course, you'll need to profile both approaches to see which is faster.

# python - matplotlib 表被裁剪

> ID：11270153
> 
> 赞同：3
> 
> 时间：2012-06-29T23:27:58.477
> 
> 标签：python, numpy, matplotlib

我试图在 barplot 底部获得一个表格，形成一个 numpy 数组，但它被裁剪了，这是代码：

```
import matplotlib.pyplot as plt
import pylab as p
import numpy as np

a = np.array([[ 100\.        ,  152.84493519,  233.63122532,  263.7018431 ,
                259.22927686,  243.56305545],
              [ 100\.        ,  147.64885749,  194.26319507,  156.2985505 ,
                169.1050851 ,  124.84312468],
              [ 100\.        ,  195.46940792,  273.37157492,  296.54100691,
                271.93708044,  358.30174259],
              [ 100\.        ,  216.44727433,  308.30389994,  243.70797244,
                335.3325307 ,  396.22671612]])
fig = p.figure()
ax = fig.add_subplot(1,1,1)

y = np.mean(a, axis=0)
N = len(y)
ind = range(N)
err = np.std(a, axis=0)/np.sqrt(N)

ax.bar(ind, y, facecolor='#777777',
       align='center', yerr=err, ecolor='black',
       bottom=4)
ax.set_ylabel('ylabel')

ax.set_title('Counts, by group',fontstyle='italic')

tfig = 'Fig 1'
ax.set_title(tfig, fontstyle='italic')

labels = ['a', 'b', 'c', 'd', 'e', 'f']
rowlab = ['row1', 'row2', 'row3', 'row4']
ax.set_xticklabels(labels)
ax.xaxis.set_visible(False)
the_table = ax.table(cellText=a, colLabels=labels, rowLabels=rowlab)
table_props = the_table.properties()
table_cells = table_props['child_artists']
for cell in table_cells: 
    cell.set_fontsize(12)
    cell.set_height(0.05)

fig.savefig(('prueba.png'), dpi=300) 
```

![在此处输入图像描述](../Images/55290fd995477e6de2eaf27235154867.png)

如何获得整个表格，以及如何将条形与每列对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T01:39:09.207

在保存图形之前，将以下两行添加到您的代码中：

```
ax.set_xlim(-0.5, 5.5)
p.subplots_adjust(bottom=0.2) 
```

![在此处输入图像描述](../Images/08e5debc3be58f138d8a8e0b75653f56.png)

# jsf - 关于在 JSF 中上传文件的基本问题

> ID：11270154
> 
> 赞同：2
> 
> 时间：2012-06-29T23:28:01.903
> 
> 标签：jsf, file-upload, primefaces, uploading

我从未在 JSF 中使用过上传功能，但现在我必须使用。我有几个问题，它们就像“傻瓜”系列问题。所以：

1) 将用户的图片登录到数据库或服务器的文件系统？

2）如果服务器相对或固定路径或根 url 到 db/properties 和相对部分到 db 呢？

3）如果是DB，使用JPA2 + Mysql时的性能如何？否则有什么缺点吗？

4) 如果使用服务器，将图像的新上下文添加到 server.xml 并使用来自地址 www.examble.com/imagesfolder/images.jpg 的图像是否安全？如何避免人人都能看到图片的情况？

5) 处理上传的最佳方式是什么？我正在使用 Primefaces，它是否适合这个目的或其他用途？

6）任何好的教程或示例如何像专业人士一样做到这一点:)？

7) 如何避免可能存在同名文件的情况？散列名称还是？

8）如果（真的很大）我决定将我的应用程序共享到两个物理服务器，图片路径有问题怎么办？

9）在我的情况下，我有每个人都共有的图片和“登录用户拥有的图片”。如果你知道我正在使用 Primefaces、JPA2 和 Mysql 并且我在服务器？

10）对每个人来说都是非常美好和炎热的夏天！

萨米人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:16:12.367

您的大部分问题都是关于上传文件后如何处理文件，这是一个设计问题，取决于软件架构师、团队负责人，或者最后是您自己。服务器文件系统/数据库文件保存有两个很好的答案：

*   [在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/a/3751/1065197)
*   [管理数据库或文件系统中上传的文件？](https://stackoverflow.com/a/3707681/1065197)

要处理“7)”和“8)”中描述的问题，您应该使用[文件服务器](http://en.wikipedia.org/wiki/File_server)和内容管理系统。它们还增加了更多的好处，而不仅仅是文件存储，如搜索、索引等等。这里有些例子：

*   [BarracudaDrive 网络文件管理器插件](https://barracudaserver.com/products/BarracudaDrive/WebFileManager.lsp)
*   [露天ECM](http://www.alfresco.com/products/features)

使用 JSF 实现文件上传（注意：要像专业人士那样做，请按照专业人士的方式）：

*   BalusC（JSF 专家）[使用 JSF 2 上传文件](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html)
*   [PrimeFaces 简单文件上传](http://www.primefaces.org/showcase-labs/ui/fileUploadSimple.jsf)

试试这些样本。如果您的编码有问题，最好提出一个新问题。

编辑：我忘记了数字 4，谢谢提醒。如您所述，我将添加一个新上下文，并创建一个过滤器，该过滤器将捕获对该新上下文的请求并将重定向到默认 URL。

关于这个问题的更多信息：

*   [过滤器的要点](http://www.oracle.com/technetwork/java/filters-137243.html)
*   [如何在 Java 中使用过滤器来更改传入的 servlet 请求 url？](https://stackoverflow.com/q/2725102/1065197)
*   [为图像请求重写创建 Java 过滤器](https://stackoverflow.com/q/5755810/1065197)

# php - 获取大量文件列表，按文件时间排序，单位为 *毫秒*

> ID：11270155
> 
> 赞同：10
> 
> 时间：2012-06-29T23:28:05.893
> 
> 标签：php, linux, php-5.2

我知道我的文件系统以毫秒为单位存储文件修改时间，但我不知道通过 PHP 访问该信息的方法。当我这样做时，`ls --full-time`我看到了这个：

```
-rw-r--r-- 1 nobody nobody 900 2012-06-29 14:08:37.047666435 -0700 file1
-rw-r--r-- 1 nobody nobody 900 2012-06-29 14:08:37.163667038 -0700 file2 
```

我假设点后面的数字是毫秒。

所以我意识到我可以使用`ls`它并按修改时间排序，如下所示：

```
$filelist = `ls -t`; 
```

但是，该目录有时会包含大量文件，我注意到`ls`在这种情况下可能会非常慢。

所以相反，我一直在使用`find`，但它没有按修改时间排序结果的开关。这是我现在正在做的一个例子：

```
$filelist = `find $dir -type f -printf "%T@ %p\n" | sort -n | awk '{print $2}'`; 
```

而且，当然，这不会以毫秒为单位进行排序，因此在同一秒内创建的文件有时会以错误的顺序列出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:42:57.060

只有少数文件系统（如 EXT4）实际上将这些时间存储到纳秒精度。这不是保证可用的东西，在其他文件系统（如 EXT3）上，您会注意到小数部分是`.000000000`

现在，如果这个特性对你来说真的很重要，你可以编写一个专门的 PHP 扩展。这将绕过对外部实用程序的调用，并且应该更快。创建扩展的过程在很多地方都有很好的解释，比如[这里](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)。这种扩展的合理方法可能是另一种 fstat 函数实现，它公开了现在 /usr/include/bits/stat.h 中定义的 stat 结构中可用的高精度字段。

像往常一样，没有什么是免费的。必须维护此扩展，可能无法使其在托管环境等上运行。另外，您的 php 解决方案将仅在部署了您的扩展的服务器上运行（尽管可以通过使用基于 ls 的技术来规避这种情况如果未检测到扩展名）。

# php - 阻止某些扩展通过表单发布到 MySQL 中？preg_match_all？

> ID：11270160
> 
> 赞同：0
> 
> 时间：2012-06-29T23:29:23.147
> 
> 标签：php

我在这里做了一些搜索，并希望让用户发布的链接确实显示在我的网站上，以增加一层安全性。我在这里找到了一些代码并对其进行了修改，但它似乎没有拾取我数组中设置的单词。

```
<?php
session_start();
include 'mysql-connection.php';
    $comment = $_POST[comment];
    $comment = htmlentities($comment);
    $comment = mysql_real_escape_string($comment);
    $bannedwords = array(".exe",".zip");
    $matches = array();
    $matchFound = preg_match_all(
                    "/\b(" . implode($bannedwords,"|") . ")\b/i", 
                    $comment, 
                    $matches
                  );

    if ($matchFound) {
        header("Location: http://mydomain/index.php");
    }
else
{
    mysql_query("INSERT INTO posts (postid, post_content, username)
    VALUES ('', '$comment', '$username')");
    header("Location: http://mydomain.org/index.php");
}
mysql_close($con);
?> 
```

我正在使用 $_POST[comment]; 获取评论。然后更改它，以便如果他们发布 html 标签，它不会与页面的布局混淆。然后我们这样做，这样 $comment 就不会造成任何 mysql 损坏。

接下来是我遇到问题的地方。$bannedwords 基本上应该设置数组中每个单词的不区分大小写的混合，在这种情况下是 .exe .eXe .Exe 等等。

我被卡住了，因为它仍然可以正常发布，而不是刷新页面。

# android - 将 SparseBooleanArray 存储在 Bundle 中的最佳方法？

> ID：11270161
> 
> 赞同：15
> 
> 时间：2012-06-29T23:29:26.830
> 
> 标签：android, methods, onconfigurationchanged, sparse-array

当配置更改发生时，我的 ListView Checkbox 状态会丢失，我明白这是为什么。我尝试实施

```
public void onSaveInstanceState(final Bundle outState) 
```

在我的一个片段中。所以我只是想知道将我的 SparseBooleanArray 存储在 outState 中的最简单方法是*什么*。

另外，我有点困惑，因为 ListView 有方法：

```
getListView().getCheckedItemPositions(); 
```

这有什么好处？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-05-23T10:15:16.197

就我而言，我最终通过在 SparseBooleanArray 周围实现一个 Parcelable 包装器来做到这一点，如下所示：

```
import android.os.Parcel;
import android.os.Parcelable;
import android.util.SparseBooleanArray;

public class SparseBooleanArrayParcelable extends SparseBooleanArray implements Parcelable {
  public static Parcelable.Creator<SparseBooleanArrayParcelable> CREATOR = new Parcelable.Creator<SparseBooleanArrayParcelable>() {
    @Override
    public SparseBooleanArrayParcelable createFromParcel(Parcel source) {
      SparseBooleanArrayParcelable read = new SparseBooleanArrayParcelable();
      int size = source.readInt();

      int[] keys = new int[size];
      boolean[] values = new boolean[size];

      source.readIntArray(keys);
      source.readBooleanArray(values);

      for (int i = 0; i < size; i++) {
        read.put(keys[i], values[i]);
      }

      return read;
    }

    @Override
    public SparseBooleanArrayParcelable[] newArray(int size) {
      return new SparseBooleanArrayParcelable[size];
    }
  };

  public SparseBooleanArrayParcelable() {

  }

  public SparseBooleanArrayParcelable(SparseBooleanArray sparseBooleanArray) {
    for (int i = 0; i < sparseBooleanArray.size(); i++) {
      this.put(sparseBooleanArray.keyAt(i), sparseBooleanArray.valueAt(i));
    }
  }

  @Override
  public int describeContents() {
    return 0;
  }

  @Override
  public void writeToParcel(Parcel dest, int flags) {
    int[] keys = new int[size()];
    boolean[] values = new boolean[size()];

    for (int i = 0; i < size(); i++) {
      keys[i] = keyAt(i);
      values[i] = valueAt(i);
    }

    dest.writeInt(size());
    dest.writeIntArray(keys);
    dest.writeBooleanArray(values);
  }
} 
```

这允许您通过执行以下操作来保存和加载 SparseBooleanArray：

```
Bundle bundle; //For your activity/fragment state, to include in an intent, ...
SparseBooleanArray sbarray; //Probably from your listview.getCheckedItemPositions()

//Write it
bundle.putParcelable("myBooleanArray", new SparseBooleanArrayParcelable(sbarray));

//Read it back
sbarray = (SparseBooleanArray) bundle.getParcelable("myBooleanArray"); 
```

只是我的 .02€</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-28T17:29:16.750

我没有看到问题最后一部分的任何答案：

> 另外，我有点困惑，因为 ListView 有方法：
> 
> `getListView().getCheckedItemPositions();`
> 
> 这有什么好处？

假设您将复选框与动作模式结合使用，动作模式本身将存储选中位置的状态。在正常模式下，按住将突出显示一个项目，启用操作模式，然后允许用户点击其他项目以检查它们。

方向改变会发生什么？恢复动作模式并保留亮点。您的复选框不是，但显然检查的数据是。

在方向改变之后，`onCreateActionMode()`被调用。在此方法中（但不是之前），`getListView().getCheckedItemPositions()`将返回`SparseBooleanArray`您可能正在寻找的。

有趣的是，如果这是您的唯一用例`SparseBooleanArray`，您甚至不必担心自己存储它。您可以从*已经*在整个方向更改中存储它的系统中检索它。

这`getListView().getCheckedItemPositions()`就是好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T23:35:54.960

您可以为该数据结构发明一些序列化方案，也可以切换到 HashSet 并仅在其中存储已检查的列表索引位置。由于 HashSet 是可序列化的，因此您可以将其放入实例状态 Bundle 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-05T10:36:26.277

扩展 SparseArray 以实现 Serializable：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import android.util.SparseArray;

/**
 * @author Asaf Pinhassi www.mobiledev.co.il
 * @param <E>
 *
 */
public class SerializableSparseArray<E> extends SparseArray<E> implements Serializable{

    private static final long serialVersionUID = 824056059663678000L;

    public SerializableSparseArray(int capacity){
        super(capacity);
    }

    public SerializableSparseArray(){
        super();
    }

    /**
     * This method is private but it is called using reflection by java
     * serialization mechanism. It overwrites the default object serialization.
     *
     * <br/><br/><b>IMPORTANT</b>
     * The access modifier for this method MUST be set to <b>private</b> otherwise {@link java.io.StreamCorruptedException}
     * will be thrown.
     *
     * @param oos
     *            the stream the data is stored into
     * @throws IOException
     *             an exception that might occur during data storing
     */
    private void writeObject(ObjectOutputStream oos) throws IOException {
        Object[] data = new  Object[size()];

        for (int i=data.length-1;i>=0;i--){
            Object[] pair = {keyAt(i),valueAt(i)}; 
            data[i] = pair;
        }
        oos.writeObject(data);
    }

    /**
     * This method is private but it is called using reflection by java
     * serialization mechanism. It overwrites the default object serialization.
     *
     * <br/><br/><b>IMPORTANT</b>
     * The access modifier for this method MUST be set to <b>private</b> otherwise {@link java.io.StreamCorruptedException}
     * will be thrown.
     *
     * @param oos
     *            the stream the data is read from
     * @throws IOException
     *             an exception that might occur during data reading
     * @throws ClassNotFoundException
     *             this exception will be raised when a class is read that is
     *             not known to the current ClassLoader
     */
    private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {
        Object[] data = (Object[]) ois.readObject();
        for (int i=data.length-1;i>=0;i--){
            Object[] pair = (Object[]) data[i]; 
            this.append((Integer)pair[0],(E)pair[1]);
        }
        return;
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T05:49:27.413

我正在尝试做同样的事情。最初我使用的是`HashMap`

[如何使用意图将哈希图值发送到另一个活动](https://stackoverflow.com/questions/7578236/how-to-send-hashmap-value-to-another-activity-using-an-intent)

在活动之间传递，因为它扩展了`Serializable`接口。但是，经过一番研究：

“旨在比使用 a映射到`SparseBooleanArrays`更有效。”`HashMap``Integers``Booleans`

但是，我找不到存储此数据结构的简单方法。我已经考虑获取的值`SparseBooleanArray`并将其存储在 a 中`HashMap`，以便它可以在活动之间传递。但这似乎增加了更多的复杂性。

不幸的是，我想我将恢复使用 HashMaps 来存储我的复选框列表

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-16T16:20:05.307

我将创建一个`Parcelable`持有者类，使用本机方法`Parcel`来序列化/反序列化`SparseBooleanArray`：

```
import android.os.Parcel;
import android.os.Parcelable;
import android.util.SparseBooleanArray;

public class SparseBooleanArrayHolder implements Parcelable {

    private final SparseBooleanArray source;

    public SparseBooleanArrayHolder(SparseBooleanArray source) {
        this.source = source;
    }

    public SparseBooleanArray get() {
        return source;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeSparseBooleanArray(source);
    }

    @Override
    public int describeContents() {
        return 0;
    }

    public static final Creator<SparseBooleanArrayHolder> CREATOR = new Creator<SparseBooleanArrayHolder>() {
        @Override
        public SparseBooleanArrayHolder createFromParcel(Parcel in) {
            return new SparseBooleanArrayHolder(in.readSparseBooleanArray());
        }

        @Override
        public SparseBooleanArrayHolder[] newArray(int size) {
            return new SparseBooleanArrayHolder[size];
        }
    };
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-08T07:09:09.413

I tried the solution creating `SerializableSparseArray` extending `SparseArray` making it possible to put a `SparseArray` into bundle via `Bundle.putSerializable` call.

But I found I can't obtain the saved object from bundle in `onRestoreInstanceState`. Digging into the issue I found that `savedInstanceState.getSerializable(KEY_TO_STRING_SPARSE_ARRAY) == null`.

Then, trying to inspect `savedInstanceState.get(KEY_TO_STRING_SPARSE_ARRAY)` and suprisingly got a `SparseArray<String>` not `SerializableSparseArray<String>`. Finally I'm using `savedInstanceState.getSparseParcelableArray(KEY_TO_STRING_SPARSE_ARRAY)` to obtaining `SparseArray` back from a bundle.

Then, using java reflection to save a `SparseArray<String>` to bundle directly without extending with `Serializable` or `Parcelable` interface. It's a little bit dirty but I think you can make your own utility function hiding the following detail implementation.

```
try {
    // FIXME WTF
    Method m = Bundle.class.getMethod("putSparseParcelableArray", String.class, SparseArray.class);
    m.invoke(savedInstanceState, KEY_TO_STRING_SPARSE_ARRAY, mSparseStringArray);
} catch (NoSuchMethodException | InvocationTargetException | IllegalAccessException e) {
    Log.e(TAG, "exception", e);
} 
```

I've tested the code and it works on Android 4.4.4\. And I'd like to know if it's safe to use the implementation in other SDK implementations.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-25T08:39:40.810

这是我的解决方案。只是一个简单的包装器，可用于序列化`SparseBooleanArray`.

```
public class SerializableSparseBooleanArrayContainer implements Serializable {

    private static final long serialVersionUID = 393662066105575556L;
    private SparseBooleanArray mSparseArray;

    public SerializableSparseBooleanArrayContainer(SparseBooleanArray mDataArray) {
        this.mSparseArray = mDataArray;
    }

    public SparseBooleanArray getSparseArray() {
        return mSparseArray;
    }

    public void setSparseArray(SparseBooleanArray sparseArray) {
        this.mSparseArray = sparseArray;
    }

    private void writeObject(java.io.ObjectOutputStream out) throws IOException {
        out.writeLong(serialVersionUID);
        int sparseArraySize = mSparseArray.size();
        out.write(sparseArraySize);
        for (int i = 0 ; i < sparseArraySize; i++){
            int key = mSparseArray.keyAt(i);
            out.writeInt(key);
            boolean value = mSparseArray.get(key);
            out.writeBoolean(value);
        }
    }

    private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {
        long readSerialVersion = in.readLong();
        if (readSerialVersion != serialVersionUID) {
            throw new IOException("serial version mismatch");
        }
        int sparseArraySize = in.read();
        mSparseArray = new SparseBooleanArray(sparseArraySize);
        for (int i = 0 ; i < sparseArraySize; i++) {
            int key = in.readInt();
            boolean value = in.readBoolean();
            mSparseArray.put(key, value);
        }
    }

} 
```

然后我将对象添加到一个包中，如下所示：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    SparseBooleanArray sparseBooleanArray = getSparseBooleanArray();
    SerializableSparseBooleanArrayContainer sparseBooleanArraySerializable = new SerializableSparseBooleanArrayContainer(sparseBooleanArray);
    outState.putSerializable(SOME_BUNDLE_KEY, sparseBooleanArraySerializable);
} 
```

# objective-c - 如何将一个项目拖放到另一个项目之上

> ID：11270163
> 
> 赞同：2
> 
> 时间：2012-06-29T23:29:34.460
> 
> 标签：objective-c, xcode, drag-and-drop, uigesturerecognizer

我正在尝试创建一个小游戏，并且在拖放对象时遇到问题：我在两个按钮上使用 UIPanGestureRecognizer。我想要的是在按钮 1 和按钮 2 重叠时突出显示按钮 2。我认为它应该发生在 UIGestureRecognizerStateBegan 中，所以我是这样写的：

```
//This code to make button1 move
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

//This code to handle what happens when button 1 is dragged around
if (recognizer.state == UIGestureRecognizerStateBegan) {
    //And this code to handle what happens when button1 and button2 overlap
    if (CGRectContainsPoint([button2 frame], translation)) {
        button2.highlighted = YES;
    }
} 
```

问题似乎来自 if (CGRectContainsPoint([button2 frame], translation)) 语句。任何人都可以帮忙吗？

# ruby - Heroku Rails 3.2 ActionView::Template::Error ( ...(file)... 具有无效的 UTF-8 字节序列)：

> ID：11270167
> 
> 赞同：1
> 
> 时间：2012-06-29T23:30:17.923
> 
> 标签：ruby, ruby-on-rails-3, heroku, asset-pipeline

嘿，我在我的 Rails 应用程序（Heroku，生产，Rails 3.2.3）中遇到了这个错误：

```
ActionView::Template::Error (/app/vendor/assets/javascripts/star-rating/jquery.MetaData.js has a invalid UTF-8 byte sequence):
3: <head>
4:   <title>ContactTool</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
9: <body>
app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__630446545548622900_53107960' 
```

它在生产中更改为延迟加载后开始发生，我需要：

应用程序.rb

...

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  # Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  Bundler.require(:default, :assets, Rails.env)
end 
```

...

我该如何解决？谢谢！

更新：

我删除了该文件只是为了测试该错误是否仅与该文件有关，并且确实如此。没有这个文件一切正常。不过我需要这个文件，所以如果有人知道为什么我会在 utf8 上得到一个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:57:10.797

放在`# encoding: utf-8`视图的第一行（注意#）

rails 3 发生了变化（如果我没记错的话），它对 utf-8 编码做了一些事情

# java - 正则表达式到空格、连字符和分号

> ID：11270169
> 
> 赞同：0
> 
> 时间：2012-06-29T23:30:41.603
> 
> 标签：java, regex

我对如何做一个正则表达式、在所有空格、连字符和分号中打破一个字符串有疑问，它是在 Java 中的。我正在做：`String[] tmp = input.nextLine().split("\\s:-");`

但它不工作，这是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:33:12.997

您目前正在连续拆分所有三个。尝试字符类，从选择中挑选出任何一个：

`String[] tmp = input.nextLine().split("[\\s:\\-]");`

（连字符在字符类中有意义，所以你也应该转义它们。）

# javascript - Chrome getComputedStyle() 返回错误的 RGBA 颜色？

> ID：11270170
> 
> 赞同：7
> 
> 时间：2012-06-29T23:30:47.797
> 
> 标签：javascript, css, google-chrome, rgba

1.  我在 Chrome (Win7, 19.0.1084.56) 中设置了 rgba() bg-color
2.  我用 window.getComputedStyle() 得到背景颜色，**它是不同的**
3.  我将检索到的值设置在一个新元素上
4.  我再次找回它，它再次**不同**

这是一个小提琴：http: [//jsfiddle.net/zupa/KsuMp/](http://jsfiddle.net/zupa/KsuMp/)

就我而言，前 4 个块在 Chrome 中具有以下内容：

*   背景色：rgba(255, 0, 0, 0.503906)
*   背景颜色：rgba(255, 0, 0, 0.5)
*   背景颜色：rgba(255, 0, 0, 0.496094)
*   背景颜色：rgba(255, 0, 0, 0.496094)

在 Firefox 中，我得到常量 rgba(255, 0, 0, 0.506)

所以，这似乎是一个错误。你能证明我错了或建议一个解决方法吗？我需要所见即所得编辑器的颜色，这正在扼杀我的单元测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:18:58.360

作为一种解决方法，您可以尝试将原始 RGBA 颜色存储在`data-original-background`元素上的 data-* 属性（也许？）中，并用于`$().attr()`从那里获取旧颜色值。这样，即使 Chrome 会以一种奇怪的方式四舍五入，它至少会始终以相同的方式四舍五入，因为它们都使用相同的基值。

编辑：这是我用 [http://jsfiddle.net/aJfPn/1/的概念修改的小提琴之一](http://jsfiddle.net/aJfPn/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-01T14:46:59.663

在大学里，我了解到你永远不应该因为舍入错误而测试浮点数是否相等。只需在测试中包含一个容差即可。

# nginx - nginx 域重写

> ID：11270172
> 
> 赞同：0
> 
> 时间：2012-06-29T23:31:07.070
> 
> 标签：nginx, rewrite

我有以下域配置：

```
server {
    listen                  80;
    server_name             www.xxxx.ru yyyy.ru www.yyyy.ru;
    rewrite                 ^ http://xxxx.ru$request_uri? permanent;
}

server {
    listen                  80;
    server_name             xxxx.ru;
} 
```

我需要将所有这些域重定向到主域：

```
http://www.xxxx.ru/some/path => http://xxxx.ru/some/path
http://yyyy.ru/some/path => http://xxxx.ru/some/path
http://www.yyyy.ru/some/path => http://xxxx.ru/some/path 
```

但是有了这个配置，我有：

```
http://www.xxxx.ru/some/path => http://xxxx.ru/some/path (good)
http://yyyy.ru/some/path => http://xxxx.ru//some/path (double slash)
http://www.yyyy.ru/some/path => http://xxxx.ru (no path) 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:51:33.653

错误是我必须清除浏览器历史记录，因为之前的实验很糟糕，并且重定向是永久性的。配置工作得很好，但我的头不是:(

# python - 在没有文件全名的情况下在python中打开文件？

> ID：11270184
> 
> 赞同：3
> 
> 时间：2012-06-29T23:33:51.800
> 
> 标签：python

我正在尝试`f = open('filename')`在 python 中执行。但是，我不知道文件的全名。我所知道的是它以's12'开头并以'.ka'结尾，我知道它所在的文件夹，并且我知道它是该文件夹中唯一以“s12”和“.ka”开头和结尾的文件”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T23:35:34.523

Glob 是你的朋友：

```
from glob import glob
filename = glob('s12*.ka')[0] 
```

不过要小心，glob 返回与此模式匹配的*所有*文件的列表，因此您可能想要断言您以某种方式获得了您真正想要的文件。

# github - Git不会推动。询问用户/通行证

> ID：11270185
> 
> 赞同：1
> 
> 时间：2012-06-29T23:34:00.140
> 
> 标签：github

我正在尝试将我的一些项目推送到我的 github 帐户，但是当我尝试时它不会让我这样做。前几天我还能推，现在不行了。我试着跑步

```
 cd existing_git_repo
    git remote add origin https://github.com/Ommy/MapTool.git
    git push -u origin master 
```

但在 git bash 它要求

```
 Username for 'https://github.com': 
```

我尝试了我的用户名/密码，但它不起作用。

我试着跑步

```
 git config --global user.name "Fasih Awan"
     git config --global user.email *********@gmail.com 
```

但即便如此，它仍然要求输入用户名/密码。我在推送之前在 github 上创建了存储库，但它仍然这样做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:51:59.447

如果您使用 HTTP 作为远程存储库，您仍然需要输入您的用户名和密码。如果要使用 SSH 密钥，请对远程存储库使用 SSH 协议。[这里](https://help.github.com/articles/generating-ssh-keys)有一个关于如何配置 SSH 密钥的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:37:32.500

使用密码缓存或 SSH。这一切都在这里得到很好的解释：[https ://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T23:58:57.167

确保您已将公钥上传到 github。唯一应该要求您的是公钥的密码，而不是用户名。

# php - 了解 PHP for 循环

> ID：11270187
> 
> 赞同：3
> 
> 时间：2012-06-29T23:34:30.093
> 
> 标签：php, loops

```
for ($i=1; $i<=4; ++$i) {
    echo "The number is " . $i . "\n";
} 
```

这将输出：

```
The number is 1
The number is 2
The number is 3
The number is 4 
```

我怎样才能制作一个循环来给我这样的输出：

```
The number is 1
The number is 1
The number is 1
The number is 1
The number is 2
The number is 2
The number is 2
The number is 2
etc 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T23:36:52.960

没有嵌套循环：这对于单个循环就足够了。

```
for($i=0;$i<9*4;$i++)
{
    echo "The number is ".(1+floor($i/4));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T23:37:54.553

所以你要

```
for ($i=1; $i<=2; ++$i) {
    echo "The number is " . $i . "\n";
    echo "The number is " . $i . "\n";
    echo "The number is " . $i . "\n";
    echo "The number is " . $i . "\n";
} 
```

但是让我们避免循环重复！

```
for ($i=1; $i<=2; ++$i) {
    for ($j=1; $j<=4; ++$j) {
        echo "The number is " . $i . "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T23:36:19.203

您需要两个嵌套循环，如下所示：

```
for( $i = 1; $i <= 4; ++$i) { 
    for( $j = 1; $j <= 4; ++$j) {
        echo "The number is " . $i . "\n"; 
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T23:38:03.527

本质上，您想在循环内打印四次......所以您可以编写四个 echo 语句。更好的方法是使用嵌套的 for 循环。

```
for ($i=1; $i<=4; ++$i) {
    for ($j=1; $j<=4; ++$j) {
        echo "The number is " . $i . "\n";
    }
} 
```

对于外部循环的每次迭代，内部循环都会打印该语句四次。使用嵌套循环要小心的一件事是条件中使用的变量。如果你把它们混在一起，你可能会遇到奇怪的问题，包括无限循环。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-30T00:00:26.587

一百万种可能的解决方案之一可能是使用单循环和[`str_repeat()`](http://php.net/manual/en/function.str-repeat.php)函数。

```
for ($i=1; $i<=4; $i++)
  echo str_repeat("The number is $i\n", 4); 
```

这可能是对同一字符串进行多次重复的最佳方式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-29T23:36:59.653

你可以做两个循环

```
for($i = 1; $i <= 4; $i++) {
    for($j = 1; $j <= 4; $j++) {
        echo 'The number is '.$i."\n";
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T23:36:42.337

您有相同的循环，但其中有四次迭代：

```
for ($i=1; $i<=4; ++$i) {
    for($j=0;$j<4;$j++) {
        echo "The number is " . $i . "\n";
    }
} 
```

# java - 删除 IntelliJ 的系统目录是否安全？

> ID：11270192
> 
> 赞同：10
> 
> 时间：2012-06-29T23:35:32.323
> 
> 标签：java, caching, ide, intellij-idea, temporary-files

[IntelliJ 在其“系统”目录](http://devnet.jetbrains.net/docs/DOC-181)中保留了一堆缓存文件（设置和下载的插件被写入单独的配置目录）。

删除此目录是否安全（不是在 IntelliJ 运行时），而不会丢失设置？原因是我可能会将它放在 tmpfs 上，它会在关机时被清除。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T05:30:20.883

尽管那里有一些非常有用的缓存会丢失，但它是完全安全的。例如，您将面临漫长的项目重新索引、重建，Maven 可能决定重新下载互联网，您的 VCS 存储库提交将被重新查询，代码完成中使用的统计信息将被重新查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T08:03:56.243

是的，那是安全的。或者，您可以通过选择*File* -> *Invalidate Caches...*菜单选项从 IntelliJ中使[缓存无效。](http://www.jetbrains.com/idea/webhelp/cleaning-system-cache.html)

# java - 打印 RTF 文件（带对话框）

> ID：11270196
> 
> 赞同：2
> 
> 时间：2012-06-29T23:35:51.727
> 
> 标签：java, windows, printing, cross-platform, rtf

如何打开标准打印对话框（如在 Word/Wordpad 中）以从 Java 打印 RTF 文档？（跨平台是首选但不是必需的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T00:33:04.267

```
Desktop.getDesktop().print(new File("help.rtf")); 
```

# python - python 日志记录：自定义 Python LogRecord 引发错误

> ID：11270205
> 
> 赞同：3
> 
> 时间：2012-06-29T23:36:34.840
> 
> 标签：python, logging

我正在尝试使用 python 日志记录模块创建一个自定义日志文件，该文件记录主机名等其他信息并将其添加到我的数据库中。下面是我为此创建的类，处理程序部分工作得很好，但是现在我添加了一个自定义`LogRecord`类，它会抛出这个错误：

```
/src/lib/__init__.py", line 31, in __init__
logging.LogRecord.__init__(self, *args, **kwargs)
exceptions.TypeError: __init__() takes at most 9 arguments (10 given) 
```

这就是我执行它的方式

```
logging.setLoggerClass(MyLogger)

log = logging.getLogger('testing')
log.addHandler(MyLogHandler())
d = {'host': '192.168.0.1'}
log.warn('Hi', d) 
```

这是课程。明明跟*args、**kwargs有关系，但是仔细一看，*args是空的，而**kwargs只包含`d`上面指定的变量。我不明白这个问题。

```
class MyLogRecord(logging.LogRecord):
    def __init__(self, *args, **kwargs):
        logging.LogRecord.__init__(self, *args, **kwargs) //THIS IS THE LINE IT DIES ON
        self.host = 'localhost'

class MyLogFormatter(logging.Formatter):

    def __init__(self, fmt, datefmt=None, host=None):
        logging.Formatter.__init__(self, fmt, datefmt)
        self.host = host

    def format(self, record):
        return logging.Formatter.format(record)

class MyLogger(logging.getLoggerClass()):
    def makeRecord(self, *args, **kwargs):
        return MyLogRecord(*args, **kwargs)

class MyLogHandler(logging.Handler): # Inherit from logging.Handler
    def __init__(self):
        # run the regular Handler __init__
        logging.Handler.__init__(self)
        # Our custom argument
        self.mongo = MongoLogger()

    def setupCustomLogger(self, name, this_host):
        formatter = MyLogFormatter(fmt='%(asctime)s - %(levelname)s - %(module)s - %(message)s - %(host)s')

        handler = logging.StreamHandler()
        handler.setFormatter(formatter)

        logger = logging.getLogger(name)
        logger.setLevel(logging.DEBUG)
        logger.addHandler(handler)
        return logger

    def emit(self, record):
        # record.message is the log message
        self.mongo.log(record)

class MongoLogger(object):

'''Logs messages to a MongoDB fh_admin log collection.'''
def log(self, message):
    #@todo write log to DB
    print message 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T04:11:45.097

错误告诉你究竟出了什么问题；您正在使用太多参数调用构造函数。要了解我的意思，请看一下在默认实现中通常如何构造日志记录`makeRecord`：

```
def makeRecord(self, name, level, fn, lno, msg, args, exc_info, func=None, extra=None):
    """
    A factory method which can be overridden in subclasses to create
    specialized LogRecords.
    """
    rv = LogRecord(name, level, fn, lno, msg, args, exc_info, func)
    if extra is not None:
        for key in extra:
            if (key in ["message", "asctime"]) or (key in rv.__dict__):
                raise KeyError("Attempt to overwrite %r in LogRecord" % key)
            rv.__dict__[key] = extra[key]
    return rv 
```

请注意 makeRecord 是如何接受`extra`它不直接传递给的参数的`LogRecord`？另一方面，您将其直接传递给`LogRecord.__init__`，这会导致错误。

从这里开始，您有两个选择；您可以提供一个更完整的实现`makeRecord`，或者您可以尝试使用`LoggerAdapter`应该帮助您以更少的代码实现相同目标的类。

这是一个例子：

```
# Common log info to be added to all logs reported with `log_adapter`
context = {'host': 'localhost'}

log = logging.getLogger('testing')
log.addHandler(logging.StreamHandler())
d = {'host': '192.168.0.1'}

log_adapter = logging.LoggerAdapter(log, context)
log_adapter.warning('Hi', d) 
```

如果您需要在每次记录某些内容时计算“主机”的值（例如），您可以创建`context`一个看起来像字典的类的实例。像这样：

```
class LogContext(object):

    def __getitem__(self, key):
        if key == 'host':
            return 'localhost'
        raise KeyError(key)

    def __iter__(self):
        return iter(['host'])

log_adapter = logging.LoggerAdapter(log, LogContext())
log_adapter.warning('Hi', d) 
```

需要注意的一点是`LoggingAdapter`，它显然没有将所有方便的快捷功能定义为普通的 Logger 类。这就是为什么我调用该`warning`方法而不是`warn`像你上面那样。

`LoggingAdapter`可以在[python 文档](http://docs.python.org/howto/logging-cookbook.html#using-loggeradapters-to-impart-contextual-information)中找到有关日志和添加上下文的更多信息。

注意 - 我没有在我的示例中包含`MyLogHandler`、`MyLogFormatter`或`MongoLogger`，因为它们与问题/错误无关。

# c++ - 在声明时将变量分配给自身

> ID：11270225
> 
> 赞同：3
> 
> 时间：2012-06-29T23:38:14.580
> 
> 标签：c++

> **可能重复：**
> [是自初始化'A a = a;' 允许吗？](https://stackoverflow.com/questions/981714/is-self-initialization-a-a-a-allowed)

考虑以下代码：

```
int main()
{
  int x = x;
  return 0;
} 
```

它编译吗？好吧，我认为不会，但根据我的*gcc-4.2.1*确实如此。该值未指定，因为它只是声明`int x;`。

但是，它有一些重要的后果，例如：

```
int x = 44;
int main()
{
  int x = x;
  return 0;
} 
```

`x`in`main`仍未指定，因为第三个是`x`第二个（我知道我可以通过使用来克服它`::x`，但这不是重点）。

在这种情况下，有人可以争辩说它`int x = x;`等价于`int x; x = x;`，但是当使用适当的对象时，事情会变得更加复杂：

```
class S
{
public:
  S(): x(44) { std::cout << "constructor" << std::endl; }  
  S(const S &s): x(s.x) 
             { std::cout << "copy " << this << " " << &s << std::endl; }

   int getx () const { return x; }

private:
  int x;  
};

int main()
{
  S s(s);
  std::cout << s.getx() << std::endl;
  return 0;
} 
```

上面的代码打印：

```
copy 0x7fff65ac1598 0x7fff65ac1598
0 
```

所以很明显，传递给复制构造函数的对象是一个未构造的垃圾袋（如果能够编译，这并不奇怪）。

编译时我没有收到任何警告，即使使用`-Wall -Wextra`. *它是gcc*中的错误、完全有效的行为还是某种灰色区域？

（无论如何，调试真的很痛苦。）

# mysql - 带有一些前缀的 MySQL 更新字段

> ID：11270226
> 
> 赞同：0
> 
> 时间：2012-06-29T23:38:25.940
> 
> 标签：mysql

我有表前缀`bok-`和`inv-`

```
id | number
1  | bok-1
2  | inv-3
3  | bok-2
4  | inv-2
5  | inv-10
6  | bok-3 
```

它如何对`number`前缀为的字段进行排序`inv-`？
在这种情况下，结果将是：

```
id | number
1  | bok-1
2  | inv-1
3  | bok-2
4  | inv-2
5  | inv-3
6  | bok-3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:40:51.450

你可以只使用 MySQL 的[`SUBSTRING()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring)函数：

```
ORDER BY CAST(SUBSTRING(number, 5) AS SIGNED) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/e79a5/1/0)上查看。

但是，如果可能的话，最好将前缀和整数部分存储在单独的列中：

```
ALTER TABLE mytable
  ADD COLUMN prefix ENUM('bok', 'inv'),
  ADD COLUMN suffix INT;

UPDATE mytable SET
  prefix = LEFT(number, 3),
  suffix = SUBSTRING(number, 5);

ALTER TABLE mytable
  DROP COLUMN number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:41:44.493

基本上你应该重新设计你的数据库结构。不幸的是，没有其他选项可以有效地处理这个问题，因为数据库不会在这些破折号上建立索引。因此，将两个字段分开是最常见的做法。否则，您将对每个 order by 子句运行表扫描。

编辑：除了讨论中的信息之外：[https](https://chat.stackoverflow.com/rooms/13241/discussion-between-eggyal-and-gusdecool) ://chat.stackoverflow.com/rooms/13241/discussion-between-eggyal-and-gusdecool很明显这是一个错误的设计和你的操作根本不应该执行请求。

如果不创建一个体面的结构，就不可能实现它，并且以这种方式创建一个合法的解决方案是不可能的。

# java - 如何使用 Geocoder 获取当前位置的邮政编码

> ID：11270229
> 
> 赞同：1
> 
> 时间：2012-06-29T23:38:59.153
> 
> 标签：java, android

我正在尝试获取用户当前位置的邮政编码。我在 MyActivity 中有一个 teditText，它应该根据我从该活动中获得的邮政编码来填充。

```
public class LocationActivity extends MyActivity {
    double LATITUDE;
    double LONGITUDE;

    Geocoder geocoder = new Geocoder(this, Locale.ENGLISH); 
    {
        try {
            List<Address> addresses = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);

            if(addresses != null) {
                Address returnedZip = addresses.get(0);
                StringBuilder currentZip = new StringBuilder("Address:\n");
                for(int i=0; i<returnedZip.getMaxAddressLineIndex(); i++) {
                    strcurrentZip.append(returnedZip.getPostalCode());
                }
                m_zip.setText(strcurrentZip.toString());
            }
            else {
                m_zip.setText("No zip returned!");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            m_zip.setText("zip not found!");
        }
    }
} 
```

我没有得到任何响应，应用程序 logcat 没有显示任何错误，但我要填充的 editText 字段保持空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:07:54.820

这里 ...

```
XPath xpath = XPathFactory.newInstance().newXPath();
String expression = "//GeocodeResponse/result/address_component[type=\"postal_code\"]/long_name/text()";
InputSource inputSource = new InputSource("https://maps.googleapis.com/maps/api/geocode/xml?latlng="+VARIABLECONTAININGLATITUDE+","+VARIABLECONTAININGLONGITUDE+"&sensor=true");
String zipcode = (String) xpath.evaluate(expression, inputSource, XPathConstants.STRING); 
```

其中 VARIABLECONTAININGLATITUDE 和 VARIABLECONTAININGLONGITUDE 是来自 GPS 或您选择的任何位置提供商的纬度和经度。

您还需要清单中的互联网许可和清单中的位置许可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:41:26.817

请写下面的代码以获取邮政编码

```
Geocoder geocoder = new Geocoder(this, Locale.getDefault());
List<Address> addresses = geocoder.getFromLocation(currentlat, currentlng, 1); 
```

现在地址列表包含最近的已知区域。Address 对象具有 getPostalCode() 函数。抓住第一个对象并找到它的邮政编码。

# java - GLSL - 可变变量获取垃圾值 - GL_POINTS

> ID：11270231
> 
> 赞同：0
> 
> 时间：2012-06-29T23:40:08.877
> 
> 标签：java, opengl, glsl, lwjgl

奇怪的问题。似乎我的 GLSL 程序的行为与逻辑和规范建议的不同。这是垂直着色器：

```
#version 120

uniform mat4 q;
varying vec2 TextureCoord;

void main()
{
  gl_FrontColor = gl_Color;
  gl_TexCoord[0] = gl_MultiTexCoord0;
  vec4 p = q*gl_Vertex;
  TextureCoord = vec2(.01f,.01f);
  gl_Position= gl_ModelViewProjectionMatrix*p;
  gl_PointSize = gl_Normal.x / -p.z;
} 
```

这是碎片着色器：

```
#version 120

uniform sampler2D theTex;
varying vec2 TextureCoord;

void main()
{
  vec2 realTexCoord = ( gl_TexCoord[0].st*vec2(0.024f,0.024f)) + TextureCoord;
  gl_FragColor = gl_Color*texture2D(theTex, realTexCoord);

} 
```

皱纹是这样的。如果我将 + TextureCoord 放在 frag 着色器中并用一些常量 vec2 替换它，例如 (.1f,.1f) 一切都很好，我会看到纹理。但是像这样，我只会得到奇怪的垃圾颜色噪音。这是带有平滑点和纹理坐标替换的 GL_POINTS。我正在使用 TexCoord[0].st 因为 gl_PointCoord 总是为零......

看起来正在发生的事情是垃圾值以某种方式进入了我之间的变化。但是这怎么会发生呢？如果这些值以某种方式在顶点着色器和片段着色器之间“插值”，应用什么样的逻辑？

我尝试将值发送到制服上，但它也始终为零。

我正在使用 LWJGL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:41:02.310

我刚刚用旧的 ATI 卡遇到了一些类似的问题。

您可以尝试`glTexEnvf( GL_POINT_SPRITE_ARB, GL_COORD_REPLACE_ARB, GL_TRUE );`在您的主程序中调用 - 为我修复了 gl_PointCoord。

我不确定这是否对你有用（我不知道为什么它对我有用......）但是我通过在`_coord = gl_TexCoord[0].xy;`我的片段着色器末尾添加该行来解决我的各种乱码问题（_coord 是一个其他未使用的vec2，我根本没有在其他任何地方调用 gl_TexCoord）。我在论坛上发现了这个建议，但对于我的生活，我再也找不到它了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:36:44.590

什么是 GPU 硬件？您是否尝试过为其安装最新的驱动程序？您是否尝试过在来自不同供应商的 GPU 上运行您的代码？这可能是着色器之间的变量没有正确链接的情况——这可能发生在一些有缺陷/旧的 OpenGL 实现上。

您是否尝试过与 GL_TRIANGLE_STRIP 相同的操作？这里可能只有 GL_POINTS 拓扑错误。顺便提一句。纹理 GL_POINTS 对我来说是一个奇怪的想法。

根据当前 gl_Position 通过基元对变化进行插值。对于 GL_POINTS 应该没有插值，因为每个组装的图元都有一个顶点。

# sql - 如何从 Oracle 11G 查询中选择其他列？

> ID：11270237
> 
> 赞同：0
> 
> 时间：2012-06-29T23:41:35.893
> 
> 标签：sql, oracle

我有这个查询，它按 ORDER# 对结果进行分组。

```
SELECT ORDER#, MAX(SHIPDATE - ORDERDATE) DELAYDAYS FROM ORDERS GROUP BY ORDER#; 
```

我的目标是退回发货延迟最长的单个 ORDER#。不是整套。我怎样才能做到这一点？

这个也试过了。不工作。这给了我单列，但不是 ORDER#。

```
SELECT MAX(X.DELAYDAYS) FROM
   (SELECT ORDER#, MAX(SHIPDATE - ORDERDATE) DELAYDAYS 
    FROM ORDERS GROUP BY ORDER#) X; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:02:49.733

也许这个？

```
SELECT X.ORDER# 
FROM (
  SELECT ORDER#, MAX(SHIPDATE - ORDERDATE) DELAYDAYS 
  FROM ORDERS 
  GROUP BY ORDER#
  ORDER BY DELAYDAYS DESC
  ) X
WHERE ROWNUM = 1; 
```

但是，如果存在平局，这将不会给出一致的结果`DELAYDAYS`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:23:22.377

要获取延迟最长的所有订单的列表：

```
with order_delay as (
  select order#,
           max( shipdate - orderdate ) as delayDays
      from orders
     group by order#
),
ranked_order_delay as (
  select order#,
         delayDays,
         rank() over( order by delayDays desc ) as delayRank
    from order_delay
)
select order#, delayDays from ranked_order_delay
 where delayRank=1
; 
```

使用下面的查询来获得一个订单，在最长延迟的情况下采用最低订单#。（应始终争取确定的结果）我相信这是最佳解决方案，只需要一次通过数据。

```
select min(order#) keep (dense_rank last order by (shipdate-orderdate)) as order#,
       max(shipdate-orderdate) delaydays
  from orders 
```

在最长延迟的情况下取最高顺序#，然后简单地使用`max(order#)`。

*编辑 - 我知道有更好的方法。只是花了一点时间。我被挂断了，以为我必须确定每个订单的最大延迟#，但后来我意识到这个查询没有必要。*

# javascript - 调试在 Adob e Air 中运行的 Javascript

> ID：11270242
> 
> 赞同：4
> 
> 时间：2012-06-29T23:42:11.247
> 
> 标签：javascript, debugging, air

是否有任何标准方法可以在从 Adob​​e Air 应用程序内的 htmlLoader 组件访问的网页上调试 Javascript？

我有一个使用 Javascript 构建的 Web 应用程序，可以在浏览器中完美运行。其用户界面的主要元素之一是，当您右键单击图像时，会出现一个特定于该图像的上下文菜单。

我正在尝试在 Adob​​e Air 应用程序中嵌入对该 Web 应用程序的访问。为此，我添加了一个 htmlLoader，它可以访问 URL 并将其显示在 Air 应用程序中。它工作得很好——除了在离开网络应用程序的登录页面后，右键单击图像时上下文菜单不再显示。

我认为这一定与在 Adob​​e Air 中运行时的 Javascript 有关（网络应用程序的所有其他方面继续工作），但是当 Javascript 在 IE/Chrome 中完美运行时，很难找出问题所在/Etc 但不在 Air 内部。我非常怀疑 Flash Builder/Adobe Air 是否存在像 Firebug 这样的东西，但它似乎值得一问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:51:36.787

有[AIR Introspector](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7ed2.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7f16)。它是您添加到应用程序（在生产期间删除）的脚本，其作用类似于[Firebug Lite](http://getfirebug.com/firebuglite/)。它有一个控制台和 HTML 结构查看器。

而且我认为您也可以[使用 Firebug Lite](http://getfirebug.com/firebuglite/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T09:08:24.763

我知道这个帖子很旧，但它仍然可以从谷歌访问，所以我将它列为替代答案：

```
window.onerror = function(msg, url, line) {
   // You can view the information in an alert to see things working
   // like so:
   alert("Error: " + msg + "\nurl: " + url + "\nline #: " + line);

   // TODO: Report this error via ajax so you can keep track
   //       of what pages have JS issues

   var suppressErrorAlert = true;
   // If you return true, then error alerts (like in older versions of 
   // Internet Explorer) will be suppressed.
   return suppressErrorAlert;
}; 
```

信用归功于另一个我担心我已经忘记的SO线程。

# php - 数据未插入 mysqli

> ID：11270243
> 
> 赞同：0
> 
> 时间：2012-06-29T23:42:21.523
> 
> 标签：php, mysqli

我有一个旧的 mysql 代码，它成功地将图像文件的名称插入到数据库中。但是由于旧的 mysql 被斩首，我尝试在 mysqli 中做同样的事情（由于我拥有的 PHP 版本，不能使用 PDO）。问题是我无法获取要插入到 mysqli 数据库中的图像文件名。我究竟做错了什么？

下面是mysqli代码：

```
 <?php

    session_start();

    $username="xxx";
    $password="xxx";
    $database="mobile_app";

      $mysqli = new mysqli("localhost", $username, $password, $database);

      /* check connection */
      if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        die();
      }

    $result = 0;

if(getimagesize($_FILES['fileImage']['tmp_name'])){

    if( is_file("ImageFiles/".$_FILES['fileImage']['name'])) {
        $parts = explode(".",$_FILES['fileImage']['name']);
        $ext = array_pop($parts);
        $base = implode(".",$parts);
        $n = 2;

        while( is_file("ImageFiles/".$base."_".$n.".".$ext)) $n++;
        $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

        move_uploaded_file($_FILES["fileImage"]["tmp_name"],
        "ImageFiles/" . $_FILES["fileImage"]["name"]);
        $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES (?)";

                if (!$insert = $mysqli->prepare($imagesql)) {
          // Handle errors with prepare operation here
        }

        $insert->bind_param("s",'ImageFiles/' . $_FILES['fileImage']['name']);

     $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();

    }
        else
          {
          move_uploaded_file($_FILES["fileImage"]["tmp_name"],
          "ImageFiles/" . $_FILES["fileImage"]["name"]);
          $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES (?)";

                if (!$insert = $mysqli->prepare($imagesql)) {
          // Handle errors with prepare operation here
        }

        $insert->bind_param("s",'ImageFiles/' . $_FILES['fileImage']['name']);

     $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();

          }
    }
    ?> 
```

下面是插入工作的旧 mysql 代码：

```
 <?php

    session_start();

    $username="xxx";
    $password="xxx";
    $database="mobile_app";

    mysql_connect('localhost',$username,$password);

    mysql_select_db($database) or die( "Unable to select database");

    $result = 0;

if(getimagesize($_FILES['fileImage']['tmp_name'])){

    if( is_file("ImageFiles/".$_FILES['fileImage']['name'])) {
        $parts = explode(".",$_FILES['fileImage']['name']);
        $ext = array_pop($parts);
        $base = implode(".",$parts);
        $n = 2;

        while( is_file("ImageFiles/".$base."_".$n.".".$ext)) $n++;
        $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

        move_uploaded_file($_FILES["fileImage"]["tmp_name"],
        "ImageFiles/" . $_FILES["fileImage"]["name"]);
        $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

        mysql_query($imagesql);

    }
        else
          {
          move_uploaded_file($_FILES["fileImage"]["tmp_name"],
          "ImageFiles/" . $_FILES["fileImage"]["name"]);
          $result = 1;

            $imagesql = "INSERT INTO Image (ImageFile) 
            VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

    mysql_query($imagesql);

          }

}
          mysql_close();

    ?>

      <script language="javascript" type="text/javascript">
      window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');
      </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:02:15.723

试试这个，首先将值分配给一个变量，然后绑定它，不要在[bind_param](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)中构建数据：

```
 <?php 
    $imagesql = "INSERT 
                  INTO Image (ImageFile)
                  VALUES (?)";

    $insert = $mysqli->prepare($imagesql);

    //Dont pass data directly to bind_param store it in a variable
    $insert->bind_param("s",$img);

    //Assign the variable
    $img = 'ImageFiles/'.$_FILES['fileImage']['name'];

    $insert->execute();
    ?> 
```

此外，在执行任何 db 操作之前，您还应该检查文件是否已上传，以及上传时是否发生了任何错误：

```
<?php 
//If POST
if($_SERVER['REQUEST_METHOD']=='POST'){
    //Check no errors on upload
    if($_FILES['fileImage']['error']==0){

        if(isset($_FILES['fileImage']['tmp_name'])){
            $imgSize = getimagesize($_FILES['fileImage']['tmp_name']);
            ...
            ...
        }

    }else{
        //get error code and display error
    }

}else{
    //No POST
}
?> 
```

# c++ - 模板类的成员函数模板和模板类的成员函数的区别

> ID：11270247
> 
> 赞同：1
> 
> 时间：2012-06-29T23:42:35.113
> 
> 标签：c++, function, templates, member

**代码 1：**

```
template <class T>
class cat{
public:
       T a;
       void show(){
       cout << a ;
       }
}; 
```

**代码 2：**

```
template <class T>
class dog{
public:
       T a;
       template <class U> // making show function template
       void show(){
       cout << a ;
       }
}; 
```

`cat::show()`模板类的成员函数也是 如此。
并且`dog::show()`是模板类的成员函数模板。

**问题：**
**1）**类模板猫和狗之间有什么区别，而不是当我调用成员函数show时，我必须明确指定U例如狗模板类的实例？
**2）**编译器是否对它们进行相同的处理。例如 cat::show() 在我使用它之前不会被编译。我猜对 dog::show(); 也是一样的。那么我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:55:35.267

这两者的关联方式`foo`与此处的两个自由函数的关联方式相同：

```
void foo() {};
template <typename T>
void foo() {} 
```

作为模板类的成员，两者都将根据隐式实例化的需要进行实例化。另一方面，如果显式实例化模板类，编译器会生成非模板函数，但不会生成模板成员函数。

除此之外，通常的警告：模板函数只会匹配精确类型，而非模板函数将允许隐式转换：

```
template <typename T>
struct tmpl {
   void foo( T, T ) {}
   template <typename U>
   void bar( U, U ) {}
};
tmpl<int> t;
t.foo( 5, 1\. );    // fine, will convert 1\. from double to int
t.bar( 5, 1\. );    // error 
```

以及模板化和非模板化函数之间的所有其他差异。

* * *

我真的不明白*为什么*这会让你如此困惑。您似乎将*实例化*视为函数的唯一属性，但事实并非如此。真正困扰你的是什么？为什么你认为模板和非模板函数是*一样*的？

特别是，我觉得您在实现细节上浪费了太多精力。在大多数情况下，一个模板类的一个或所有成员函数是否被实例化并不会真正影响你程序的语义，如果你的程序*需要*该成员函数，那么编译器会为它生成代码，如果你的程序不需要它，它是否生成代码没有区别（考虑链接器可以删除任何符号，成员函数从未生成或被链接器删除有什么区别？）

# javascript - coffeekup 作为 express 3 的视图引擎

> ID：11270249
> 
> 赞同：2
> 
> 时间：2012-06-29T23:42:48.697
> 
> 标签：javascript, node.js, coffeescript, express, coffeekup

我正在尝试使用 coffeekup 作为我的默认模板

```
app.set 'view engine', 'coffee'
app.register '.coffee', coffeekup.adapters.express 
```

除了 app.register 不是它看起来的功能。什么是迁移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:38:52.527

咖啡杯已更改为“咖啡杯”

按照这个链接：[https ://github.com/gradus/coffeecup](https://github.com/gradus/coffeecup)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:19:02.407

咖啡杯衍生[茶杯有一个最新的例子](http://goodeggs.github.com/teacup/#getting-started/express)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:05:38.790

您想要`app.engine`而不是`app.register`- 需要更新指南。

查看单元测试的示例： [https ://github.com/visionmedia/express/blob/master/test/app.engine.js](https://github.com/visionmedia/express/blob/master/test/app.engine.js)

# python - opencv2.fillPoly 的 python 接口需要什么作为输入？

> ID：11270250
> 
> 赞同：28
> 
> 时间：2012-06-29T23:42:56.423
> 
> 标签：python, opencv, drawing

我正在尝试使用 python 接口绘制一个多边形到 opencv，cv2。我创建了一个空图像，只是一个 640x480 numpy 数组。我有一个要在图像上绘制的多边形（四点四边形）的列表，但是，我似乎无法获得甲酸盐来指示 cv2 四边形应该在哪里，并且我不断收到此错误：

```
OpenCV Error: Assertion failed (points.checkVector(2, CV_32S) >= 0) in fillConvexPoly, file .../OpenCV-2.4.0/modules/core/src/drawing.cpp, line 2017 
```

我的代码基本上包括以下内容：

```
binary_image = np.zeros(image.shape,dtype='int8')
for rect in expected:
    print(np.array(rect['boundary']))
    cv2.fillConvexPoly(binary_image, np.array(rect['boundary']), 255)
fig = pyplot.figure(figsize=(16, 14))
ax = fig.add_subplot(111)
ax.imshow(binary_image)
pyplot.show() 
```

我在预期中的矩形列表具有包含（x，y）点列表值的“边界”。代码打印：

```
[[ 91 233]
 [419 227]
 [410 324]
 [ 94 349]] 
```

我认为这是多边形的点列表，但显然该列表有一个 invalid `points.checkvector`，不管是什么。谷歌搜索该错误没有任何用处。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-12-04T09:55:01.783

```
import numpy as np
import cv2
import matplotlib.pyplot as plt

a3 = np.array( [[[10,10],[100,10],[100,100],[10,100]]], dtype=np.int32 )
im = np.zeros([240,320],dtype=np.uint8)
cv2.fillPoly( im, a3, 255 )

plt.imshow(im)
plt.show() 
```

[![结果显示](../Images/e0210240d7a394088cef07a44ba05e10.png)](https://i.stack.imgur.com/mWlwP.png)

检查[colab.research.google.com](https://colab.research.google.com/drive/1OZf7VhH6ll1HkNadcUyjj3lsaUuq1IJK)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-30T00:38:46.800

AssertionError 告诉您 OpenCV 需要一个有符号的 32 位整数。多边形点的数组应该具有特定的数据类型（例如`points = numpy.array(A,dtype='int32')`）。您也可以将其转换为函数调用（即`my_array.astype('int32')`）或作为朋友将其转换一次...

" 改变

   `cv2.fillConvexPoly(binary_image, np.array(rect['boundary']), 255)` 到

   `cv2.fillConvexPoly(binary_image, np.array(rect['boundary'], 'int32'), 255)` "

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T02:03:39.623

我在 opencv 2.4.2 和 python 2.7 中尝试过。从 C++ 接口

```
void fillPoly(Mat& img, 
              const Point** pts, 
              const int* npts, 
              int ncontours, 
              const Scalar& color, 
              int lineType=8, 
              int shift=0, 
              Point offset=Point() 
             ) 
```

我们知道**pts**是点数组的数组，所以你应该像这样改变

```
cv2.fillConvexPoly(binary_image, np.array([rect['boundary']], 'int32'), 255) 
```

将 [ ] 添加到**rect['boundary']**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-07T17:45:10.383

这是一个带有注释点的示例。您可以按顺时针或逆时针顺序指定多边形顶点，只要它们遵循相同的方向。

```
import numpy as np
import matplotlib.pyplot as plt
import cv2

A = np.array([125,50])
B = np.array([50,50])
C = np.array([50,175])
D = np.array([150,150])

pts = np.array( [ A, B, C, D ] ) # counter-clockwise
#pts = np.array( [ A, D, C, B ] ) # clockwise

print(pts.shape) # (4, 2)

image = np.zeros((200,200), dtype=np.uint8)
image = np.dstack((image, image, image)) # Create three channels.

cv2.fillPoly(image, pts=[pts], color =(0,255,0))

for pt in pts:
    x = pt[0]
    y = pt[1]
    _ = plt.annotate(s='%d, %d' % (x, y), xy=(x, y), color='red', fontsize=20)

print(image.shape) # (200, 200, 3)

plt.imshow(image)
plt.grid(True)
plt.show() 
```

[![在此处输入图像描述](../Images/4672e991cf78ca4ec1325941e25333e3.png)](https://i.stack.imgur.com/AHVU6.png)

如果您的顶点重新排列以使它们不遵循相同的方向，会发生什么？

```
pts = np.array( [ A, B, D, C ] ) 
```

你得到这个：

[![在此处输入图像描述](../Images/35882e6a1c6c89865c3bae272200b15e.png)](https://i.stack.imgur.com/9RouC.png)

# mysql - MySQL 连接性能

> ID：11270253
> 
> 赞同：2
> 
> 时间：2012-06-29T23:43:18.923
> 
> 标签：mysql, performance, join

下面的查询在 17 秒内在视图中执行。有 450,000 行。我在连接的两列上有一个索引，它们是 FK。连接列是 BIGINTS。有没有办法让这家伙加速？

```
SELECT c.id, sce.user_id
FROM sims_classroom c
JOIN sims_class_enrollment sce ON c.id = sce.classroom_id 
```

**解释**

```
'1', 'SIMPLE', 'c', 'index', 'PRIMARY', 'PRIMARY', '8', NULL, '211213', 'Using index'
'1', 'SIMPLE', 'sce', 'ref', 'fk_class_enrollment_classroom_id', 'fk_class_enrollment_classroom_id', '9', 'ngsp.c.id', '1', 'Using where' 
```

**行**

```
sims_classroom = 200100
sims_class_enrollment = 476396 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:00:21.057

它会稍微减慢写入速度，但由于您的索引中只有一列没有您需要的所有内容，所以我会为 sce 做一个两列索引：

```
classroom_id, user_id 
```

这将导致 mysql 甚至不需要转到实际表（在解释中两者都是“使用索引”）。

# python - 如何使用 Python 创建签名的云端 URL？

> ID：11270254
> 
> 赞同：3
> 
> 时间：2012-06-29T23:43:32.340
> 
> 标签：python, django, amazon-web-services, amazon-cloudfront, boto

我想知道如何为云端创建签名 URL。当前的工作解决方案是不安全的，我想将系统切换到安全 URL。

我尝试过使用 Boto 2.5.2 和 Django 1.4

是否有关于如何使用 boto.cloudfront.distribution.create_signed_url 方法的工作示例？或任何其他有效的解决方案？

我使用 BOTO 2.5.2 API 尝试了以下代码

```
def get_signed_url():
    import boto, time, pprint
    from boto import cloudfront
    from boto.cloudfront import distribution
    AWS_ACCESS_KEY_ID = 'YOUR_AWS_ACCESS_KEY_ID'
    AWS_SECRET_ACCESS_KEY = 'YOUR_AWS_SECRET_ACCESS_KEY'
    KEYPAIR_ID = 'YOUR_KEYPAIR_ID'
    KEYPAIR_FILE = 'YOUR_FULL_PATH_TO_FILE.pem'
    CF_DISTRIBUTION_ID = 'E1V7I3IOVHUU02'
    my_connection = boto.cloudfront.CloudFrontConnection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
    distros = my_connection.get_all_streaming_distributions()
    oai = my_connection.create_origin_access_identity('my_oai', 'An OAI for testing')
    distribution_config = my_connection.get_streaming_distribution_config(CF_DISTRIBUTION_ID)
    distribution_info = my_connection.get_streaming_distribution_info(CF_DISTRIBUTION_ID)
    my_distro = boto.cloudfront.distribution.Distribution(connection=my_connection, config=distribution_config, domain_name=distribution_info.domain_name, id=CF_DISTRIBUTION_ID, last_modified_time=None, status='Active')

    s3 = boto.connect_s3()
    BUCKET_NAME = "YOUR_S3_BUCKET_NAME"
    bucket = s3.get_bucket(BUCKET_NAME)
    object_name = "FULL_URL_TO_MP4_ECLUDING_S3_URL_DOMAIN_NAME EG( my/path/video.mp4)"
    key = bucket.get_key(object_name)
    key.add_user_grant("READ", oai.s3_user_id)

    SECS = 8000
    OBJECT_URL = 'FULL_S3_URL_TO_FILE.mp4'
    my_signed_url = my_distro.create_signed_url(OBJECT_URL, KEYPAIR_ID, expire_time=time.time() + SECS, valid_after_time=None, ip_address=None, policy_url=None, private_key_file=KEYPAIR_FILE, private_key_string=KEYPAIR_ID) 
```

在方法 create_signed_url 之前，一切似乎都很好。它返回一个错误。

```
Exception Value: Only specify the private_key_file or the private_key_string not both 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:28:19.337

省略`private_key_string`：

```
my_signed_url = my_distro.create_signed_url(OBJECT_URL, KEYPAIR_ID,
        expire_time=time.time() + SECS, private_key_file=KEYPAIR_FILE) 
```

该参数用于将私钥文件的实际内容作为字符串传递。[源代码](https://github.com/boto/boto/blob/develop/boto/cloudfront/distribution.py)中的注释解释说，只有一个`private_key_file`or`private_key_string`应该通过。

您还可以省略所有设置为 的 kwargs `None`，因为这`None`是默认设置。

# ruby-on-rails - cancan/devise - 重定向到请求的路径

> ID：11270256
> 
> 赞同：1
> 
> 时间：2012-06-29T23:43:38.780
> 
> 标签：ruby-on-rails

当用户访问他们无权查看的页面时，他们会被重定向到登录页面。他们登录后会被重定向到站点根目录。有没有一种快速简便的方法可以将他们重定向回他们最初要求的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:56:48.587

您可以在-form 中添加一个隐藏字段`referring_page`，以将引用者添加到该字段并在其存在时路由回该字段，如下所示：`sign_in``former`

```
def after_sign_in_path_for(resource)
  params[:referring_page] || super
end 
```

这是一个手动解决方案，但我更喜欢在控制器端使用复杂的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:52:36.587

我不明白你到底想通过说“如果用户访问他们无权查看的页面，他们会被重定向到登录页面。登录后他们被重定向到站点根目录”

我假设会有两组用户，一组是管理员用户，另一组是非管理员用户，我处理这个问题的方式是这样的，

内部应用程序控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  check_authorization :unless => :devise_controller?
  before_filter :authenticate_user! 

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_url, :alert => exception.message
  end

  protected

  def stored_location_for(resource_or_scope)
    nil
  end

  def after_sign_in_path_for(resource_or_scope)
    if current_user.admin?
      #add your desired path
    else
      #redirect to your desired path
    end
  end
end 
```

# objective-c - 复制 NSDate 对象并释放

> ID：11270257
> 
> 赞同：0
> 
> 时间：2012-06-29T23:43:39.373
> 
> 标签：objective-c, ios, nsdate

如果我这样做：

```
NSDate *dateStart;
[dateStart alloc];

// Initialise with a date somewhere here..

..

// Modify the start date.
dateStart = [chosenDate copy]; 
```

我应该在分配 dateStart 指针之前执行 [dateStart release] 吗？

我来自 C/C++ 背景，我不了解整个 ObjectiveC/iOS 垃圾收集行为（如果确实有的话）。我的 C 背景告诉我应该释放 dateStart 指向的初始 NSDate 对象。那会是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:46:09.060

是的，因为您在应该在此行之前释放它之前分配了它

```
//Release it before reassign
[dateStart release];
dateStart = [chosenDate copy]; 
```

另请注意，您最好在同一行上进行分配和初始化，不要将它们分成多行

所以这

```
NSDate *dateStart;
[dateStart alloc]; 
```

将更改为

```
NSDate *dateStart = [[dateStart alloc] init....]; 
```

# lua - Lua在对象引用中使用变量？

> ID：11270261
> 
> 赞同：0
> 
> 时间：2012-06-29T23:44:27.030
> 
> 标签：lua

是否可以在 Lua 的对象引用中使用变量？例如，a.Value 是一个字符串，a.Value = "b"。我想访问 abcd 或 a.(a.Value).cd 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:10:10.060

语法`a.b`实际上是`a["b"]`. 要做你想做的事，你会摆脱`"b"`变量，而是使用变量，如下所示：

```
a[a.Value].c.d 
```

# javascript - Javascript 替换所有实例

> ID：11270262
> 
> 赞同：1
> 
> 时间：2012-06-29T23:44:32.210
> 
> 标签：javascript

我发现了一段很好的代码来添加一些“普通”文本链接（即，而不是按钮）以在社交媒体网站上共享页面：

```
<a href="https://twitter.com/share?url=[url]"onclick="this.href = this.href.replace('[url]',window.location)" target="_blank" title="Share on Twitter">Twitter</a> 
```

效果很好。但是对于 Pinterest，我需要将 url 放置两次，分别用于页面 url 和 pin 图像：

```
<a href="http://pinterest.com/pin/create/button/?url=[url]&media=[url]pin.jpg" onclick="this.href = this.href.replace('[url]',window.location)" target="_blank">Pinterest</a> 
```

在这种情况下，只会添加第一个 url。

对javascript没有那么热。必须有一种简单的方法来替换 [url] 的所有实例，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:47:09.990

使用带有`g`(global) 修饰符的正则表达式

```
this.href.replace(/\[url\]/g, window.location) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:47:02.657

使用全局正则表达式来匹配它们：

```
this.href = this.href.replace(/\[url\]/g, window.location) 
```

# python - 使用 Easygui 的多选框选择多个元组项

> ID：11270263
> 
> 赞同：0
> 
> 时间：2012-06-29T23:44:39.247
> 
> 标签：python, list, conditional, tuples, easygui

我`easygui.multchoicebox()`用来选择一个元组中的多个项目。How do I make a conditional that executes code when certain items from the tuple are selected?

这是不起作用的示例代码（不返回任何内容）：

```
from easygui import *

fieldnames = ["Yes", "No", "Maybe"]
choice = multchoicebox("Pick an option.", "", fieldnames)
if choice == fieldnames[0,1]:
    msgbox('Incomplete')
if choice == fieldnames[2]:
    msgbox('Complete') 
```

它说列表索引不能是元组。我将条件更改为字符串，但它也不起作用（仍然没有返回）：

```
from easygui import *

fieldnames = ["Yes", "No", "Maybe"]
choice = multchoicebox("Pick an option.", "", fieldnames)
if choice == "Yes" and "No":
    msgbox('Incomplete')
if choice == "Maybe":
    msgbox('Complete') 
```

是什么阻止了代码被执行？如果`easygui.multchoicebox()`不是由此设计的，那是什么模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:59:55.377

你说

```
fieldnames[0, 1] 
```

本质上，您将元组`(0, 1)`作为索引传递给`fieldnames`. 改用这个成语：

```
if choice in fieldnames[0:2]:
    #dostuff 
```

# apache - 使用 mod_proxy_ajp 连接 Apache 和 Tomcat 有效，但 JDBC 失败

> ID：11270264
> 
> 赞同：1
> 
> 时间：2012-06-29T23:44:59.633
> 
> 标签：apache, tomcat, jdbc, mod-proxy, ajp

我在 Debian Squeeze 上有一个工作的 Apache 2.2.16，它使用不同的域（例如 phpApp1.com、phpApp2.com）为 /var/www/ 中的一些 PHP 应用程序提供服务。

我还有一个工作的 Tomcat 7.x，它位于 /opt/tomcat/ 中，并为一个位于 /opt/tomcat/webapps/MyApp/ 中的 JSF+JPA 应用程序提供服务。

所以 MyApp 可以通过例如 myapp.com:8080/MyApp/home.html 或 phpApp1.com:8080/MyApp/home.html 访问（因为端口）。由于我希望将其改为 myapp.com/home.html，因此我使用以下配置文件使用 mod_proxy_ajp 连接了 Apache 和 Tomcat：

/etc/apache2/sites-available/MyApp 中的 Apache 虚拟主机

```
<Virtualhost *:80>
    ServerName myapp.com
    ServerAlias *.myapp.com
    ProxyPass / ajp://localhost:8009/
    ProxyPassReverse / ajp://localhost:8009/
</Virtualhost> 
```

和 /opt/tomcat/conf/server.xml 中的 Tomcat 虚拟主机

```
<Host name="myapp.com" appBase="webapps" unpackWARs="true" autoDeploy="true">
    <Context path="" reloadable="true" debug="0" docBase="MyApp" />
    <Alias>www.myapp.com</Alias>
</Host> 
```

这使得我无法访问[http://myapp.com/home.html](http://myapp.com/home.html)并获得正确的 html 页面，包括 css、图像和 js。所以tomcat中的AJP连接器应该可以工作。

但是该应用程序无法建立正常工作的 JDBC 连接。不管我是使用 myapp.com 还是 myapp.com:8080，它都会失败。但是，如果我通过[http://phpapp1.com:8080/MyApp/home.html](http://phpapp1.com:8080/MyApp/home.html)访问我的应用程序，它会起作用。只有当我使用代理域“myapp.com”时它才会失败。

有没有人在使用 AJP 和 JDBC 时遇到过类似的问题？我该如何解决这个问题？我在使用 mod_jk 时遇到了同样的问题，它也使用了 AJP。提前致谢。

**更新 1**

@Mark Rotteveel：“直接连接”是什么意思？我的意思是，如果我使用未在 tomcats server.xml 中列为虚拟主机的域之一，则 JDBC 连接正在工作。

这是连接错误：

```
ERROR: HHH000231: Schema export unsuccessful
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
at org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:141)
at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
at org.hibernate.tool.hbm2ddl.DatabaseExporter.<init>(DatabaseExporter.java:52)
at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:367)
at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304)
at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:492)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
at com.myapp.util.database.Database.<init>(Database.java:70)
at com.myapp.util.database.Database.<clinit>(Database.java:38)
at com.myapp.controller.file.UploadBacking.ajaxUpload(UploadBacking.java:89)
at com.myapp.controller.file.UploadBacking$Proxy$_$$_WeldClientProxy.ajaxUpload(UploadBacking$Proxy$_$$_WeldClientProxy.java)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
at org.apache.myfaces.view.facelets.el.ContextAwareTagMethodExpression.invoke(ContextAwareTagMethodExpression.java:96)
at org.apache.myfaces.view.facelets.tag.jsf.core.AjaxHandler$AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxHandler.java:495)
at javax.faces.event.AjaxBehaviorEvent.processListener(AjaxBehaviorEvent.java:57)
at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:74)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:405)
at javax.faces.component.UICommand.broadcast(UICommand.java:103)
at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:1028)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:286)
at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1375)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:752)
at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:38)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.ocpsoft.rewrite.servlet.RewriteFilter.doFilter(RewriteFilter.java:183)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)
at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)
at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)
at java.sql.DriverManager.getDriver(DriverManager.java:253)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
... 60 more 
```

从 Database.java：

```
private Database() {
    entityManagerFactory = Persistence.createEntityManagerFactory("myapp_persistence_unit");
} 
```

MyApp/META-INF/context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Context>

<Context>

<Resource
    name="jdbc/db_myapp" 
    auth="Container"
    type="javax.sql.DataSource" 
    username="user_myapp" 
    password="##########"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/db_myapp?autoReconnect=true"
    validationQuery="select 1"
    maxActive="15" 
    maxIdle="3" />

<Valve
    className="org.apache.catalina.valves.AccessLogValve"
    directory="logs/myapp"
    prefix="myapp_access_"
    suffix=".log"
    pattern="%h %l %u %t &quot;%r&quot; %s %b"
    resolveHosts="false" />

</Context> 
```

来自 WEB-INF/web.xml

```
<resource-ref>
    <description>MySQL database</description>
    <res-ref-name>jdbc/db_myapp</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

最后是 WEB-INF/classes/META-INF/persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="myapp_persistence_unit">
        <properties>
            <property name="hibernate.connection.datasource" value="java:comp/env/jdbc/db_myapp" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
            <property name="hibernate.current_session_context_class" value="thread" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        </properties>
    </persistence-unit>

</persistence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:20:39.993

我终于让它工作了。如果您在 tomcat 中创建虚拟主机，则必须将应用程序的精确副本`/META-INF/context.xml`放入`/tomcat/conf/Catalina/domain.com/`并将其命名为`context.xml.default`. 好吧，我不知道这是否总是如此，但对于我的设置是这样。所以这些是我当前完成这项工作的配置文件：

`/etc/apache2/sites-enabled/domain.com`

```
<Virtualhost *:80>
    ServerName domain.com
    ServerAlias *.domain.com

    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / ajp://my.server.ip:8009/
</Virtualhost> 
```

`/tomcat/conf/server.xml`

```
<Host name="domain.com">
    <Context path="" docBase="MyApp" />
    <Alias>www.domain.com</Alias>
</Host> 
```

从 2006 年开始，我在 coderanch.com 上阅读[了这个帖子](http://www.coderanch.com/t/86226/Tomcat/Accessing-context-xml-virtualhost)后尝试了这个（作者的解决方案在最后一篇文章中）。我没有更改`web.xml`or`context.xml`因为这不是`<Resource>`元素的错误配置。无论如何，感谢您的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T00:45:14.827

确保您的`mysql-connector-j.x.y.z.jar`文件恰好位于一个位置：Tomcat 的`lib`目录。确保您的任何 webapps 中都没有杂散副本`WEB-INF/lib directories`。

两个不相关的提示：

1.  不要使用`autoReconnect`
2.  用作您的验证查询：Connector/J 的最新版本将使用`/* ping */ SELECT 1`轻量级“ping”而不是实际发出查询来测试连接的有效性

# microsoft-metro - 当异步回调返回时，我怎么知道我仍然在正确的页面上？

> ID：11270270
> 
> 赞同：2
> 
> 时间：2012-06-29T23:45:50.120
> 
> 标签：microsoft-metro, winjs

我正在使用[单页导航模型](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)构建 Metro 应用程序。在我的一个页面上，我启动了一个异步 ajax 请求来获取一些信息。当请求返回时，我想将接收到的信息插入到显示的页面中。

例如：

```
WinJS.UI.Pages.define("/showstuff.html", {
    processed: function (element, options) {
        WinJS.xhr(...).done(function (result) {
            element.querySelector('#target').innerText = result.responseText;
        });
    }
}; 
```

但是我怎么知道用户在此期间没有离开页面呢？尝试在不同的页面上插入文本是没有意义的，那么如何确保请求开始时正在加载的页面仍然处于活动状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:34:48.103

您可以将页面 URI 与当前进行比较，`WinJS.Navigation.location`以检查您是否仍在该页面上。您可以使用`Windows.Foundation.Uri`从页面 URI 中提取路径来执行此操作。

```
WinJS.UI.Pages.define("/showstuff.html", {
    processed: function (element, options) {
        var page = this;

        WinJS.xhr(...).done(function (result) {
            if (new Windows.Foundation.Uri(page.uri).path !== WinJS.Navigation.location)
                return;

            element.querySelector('#target').innerText = result.responseText;
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:18:38.247

我找不到正式的方法来做到这一点，所以我实施了一个解决方法。

[`WinJS.Navigation`](http://msdn.microsoft.com/en-us/library/windows/apps/br229778.aspx)提供在导航时触发的事件。我使用该[`navigating`事件](http://msdn.microsoft.com/en-us/library/windows/apps/br229843.aspx)构建了一个简单的类来跟踪页面浏览量：

```
var PageViewManager = WinJS.Class.define(
    function () {
        this.current = 0;
        WinJS.Navigation.addEventListener('navigating',
                this._handleNavigating.bind(this));
    }, {
        _handleNavigating: function (eventInfo) {
            this.current++;
        }
    });

Application.pageViews = new PageViewManager(); 
```

每次用户开始新的导航时，该类都会增加一个计数器。

使用该计数器，Ajax 请求可以检查是否发生了任何导航并做出相应的反应：

```
WinJS.UI.Pages.define("/showstuff.html", {
    processed: function (element, options) {
        var pageview = Application.pageViews.current;

        WinJS.xhr(...).done(function (result) {
            if (Application.pageViews.current != pageview)
                return;

            element.querySelector('#target').innerText = result.responseText;
        });
    }
}; 
```

# ajax - 将 JSON 数组捕获到 MVC3 控制器操作中

> ID：11270273
> 
> 赞同：0
> 
> 时间：2012-06-29T23:46:47.047
> 
> 标签：ajax, json, asp.net-mvc-3

我有一个这样的javascript数组：

```
var optionArray = new Array();
optionArray["totalBankAmount"] = $("#totalBankAmountID").val();
optionArray["singlePlayerAmount"] = $("#singlePlayerAmountID").val();
..... (more array data) 
```

我将这样的数组发送到 StartOption （一个 MVC3 控制器）：

```
$.ajax({
        url: "/StartOption/Index/",
        data: { allOptions: JSON.stringify(optionArray) },
        cache: false,
        type: "POST",
        timeout: 10000,
        dataType: "json",
        success: function (result) {
            ....
        }
}); 
```

Index Action 将如何捕获该 optionArray ？我如何通过数组索引名称将这些数据获取到我的索引操作中？

请给我一个很好的例子，我是 MVC3 的新手。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:06:05.117

> 我有一个这样的javascript数组：

不，你没有数组。javascript 中的数组必须具有从零开始的整数索引。你所拥有的是一个 javascript 对象。

所以有2个场景：

*   您想使用对象
*   您想使用数组

让我们首先介绍对象场景。所以你有一个对象：

```
public class Foo
{
    public string Bar { get; set; }
    public string Baz { get; set; }
} 
```

然后你想将它传递给控制器​​动作：

```
[HttpPost]
public ActionResult Index(Foo foo)
{
    ...
} 
```

以下是调用代码的样子：

```
var foo = {};
foo['bar'] = 'some bar';
foo['baz'] = 'some baz';

// or the equivalent:
// var foo = {};
// foo.bar = 'some bar';
// foo.baz = 'some baz';

// or the equivalent:
// var foo = { bar: 'some bar', baz: 'some baz' };

$.ajax({
    url: '@Url.Action("index", "startoption")',
    contentType: 'application/json',
    data: JSON.stringify({ foo: foo }),
    type: 'POST',
    timeout: 10000,
    success: function (result) {
        ....
    }
}); 
```

* * *

第二种情况，使用数组：

```
[HttpPost]
public ActionResult Index(Foo[] foos)
{
    ...
} 
```

和调用代码：

```
var foos = [];

var foo1 = {};
foo1['bar'] = 'some bar 1';
foo1['baz'] = 'some baz 1';
foos.push(foo1);

var foo2 = {};
foo2['bar'] = 'some bar 2';
foo2['baz'] = 'some baz 2';
foos.push(foo2);

// or the equivalent:
// var foos = [ { bar: 'some bar 1', baz: 'some baz 1' }, 
//              { bar: 'some bar 2', baz: 'some baz 2' } ];

$.ajax({
    url: '@Url.Action("index", "startoption")',
    contentType: 'application/json',
    data: JSON.stringify({ foos: foos }),
    type: 'POST',
    timeout: 10000,
    success: function (result) {
        ....
    }
}); 
```

# javascript - Javascript：如何调整我的 debounce 函数以采用 IF 条件？

> ID：11270275
> 
> 赞同：2
> 
> 时间：2012-06-29T23:46:54.973
> 
> 标签：javascript

我发现了一个错误，并对其进行了跟踪。
您可以[**在此处查看我的代码的简化示例**](http://jsfiddle.net/CTcZ9/)。

事实证明，我需要对我的`if()`语句进行去抖动而不是对函数本身进行去抖动。
我想保持 debounce 作为一个独立的函数，但我不确定如何传递条件。

任何指针？

这是代码：

```
var foo = function(xyz) {
    alert(xyz);
};

function setter(func, arg1, arg2) {
    return {
        fn: func,
        arg1: arg1,
        arg2: arg2
    };
}

function debounce(someObject) {
    var duration = someObject.arg2 || 100;
    var timer;
    if (timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(function() {
        someObject.fn(someObject.arg1);
        timer = 0;
    }, duration);
}

var toggle = true;

if (toggle) {
    debounce(setter(foo, 'The best things in life are worth waiting for.', 1250));
} else {
    foo('Instant gratification is sweet!!');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T00:05:10.557

使用您的示例，为什么不将切换作为 arg 1 传递...类似于：

```
var toggle = true;
var debouncedFunk = function(toggle) {
  if (toggle)
    // the function call
  else
    // something else
};
debounce(debouncedFunk, toggle, 1250); 
```

您还应该考虑使用 Function 对象`.call`和`.apply`方法。它们用于调用函数并传入参数。以示例函数为例：

```
var example = function(one, two) { 
  // Logic here
}; 
```

您可以通过三种方式调用它：

```
// First
example(1, 2);
// Second
example.call({}, 1, 2);
// Third
example.apply({}, [ 1, 2 ]); 
```

第一种是调用函数的标准方式。first 和 the 之间的区别在于，第`.call`一个参数 to`.call`是函数的上下文对象（`this`将指向函数内部的内容），其他参数在此之后传递（并且需要已知列表`.call`. 的好处`.apply`是您可以将数组传递给参数函数，它们将被适当地分配给参数列表，第一个参数仍然是上下文对象。

它将简化您的去抖动功能，而不是像您当前那样处理结构化对象。

对您的去抖动的建议：

```
var debounce = function(funk, delay) {
  var args = [];
  if (arguments.length > 2)
    args = [].slice.call(arguments, 2);
  setTimeout(function() { funk.apply({}, args); }, delay);
}; 
```

将您当前的 if 更改为：

```
var toggle = true;
var debouncedFunk = function(toggle) {
  if (toggle)
    // Do if true
  else
    // DO if false
};
debounce(debouncedFunk, 1000, toggle); 
```

也许信息太多（对不起）？

最后一点，我建议使用已经实现这些功能（以及许多其他有用功能）的框架（如果可能），例如[Underscore](http://underscorejs.org/)。使用下划线，您的示例将如下所示：

```
// Define debouncedFunk and toggle
debouncedFunk = _.bind(debouncedFunk, {}, toggle);
debouncedFunk = _.debounce(debouncedFunk, 1000);
debouncedFunk(); 
```

**编辑**

修复下划线示例，`_.debounce`返回一个仅在延迟后执行但仍需要调用的函数。

# symfony - Symfony2 FOSUserBundle 覆盖配置文件表单：字段表单为空？

> ID：11270282
> 
> 赞同：3
> 
> 时间：2012-06-29T23:48:26.360
> 
> 标签：symfony, overriding, profile, fosuserbundle

我用附加字段覆盖了 FOSUserBundle 的注册表：它运行良好。

当我应用相同的逻辑来覆盖配置文件表单时：表单与我的附加字段一起显示得很好，但都是空的（这些字段不包含连接用户的值）。

注意：当我使用捆绑包中的默认表单时，配置文件表单包含已连接用户的值。

与覆盖注册表单以检索已连接用户的值相比，是否有特定操作？

这是代码：

# src/Vn/UserBundle/Resources/config/services.yml

```
services:
 ...
  vn_user.profile.form.type:
    class: Vn\UserBundle\Form\Type\ProfileFormType
    arguments: [%fos_user.model.user.class%]
    tags:
        - { name: form.type, alias: vn_user_profile }

  vn_user.form.handler.profile:
    class: Vn\UserBundle\Form\Handler\ProfileFormHandler
    arguments: ["@fos_user.profile.form", "@request", "@fos_user.user_manager"]
    scope: request
    public: false 
```

# symfony/app/config/config.yml

```
 fos_user:
  ...
  profile:
        form:
              type: vn_user_profile
              handler: vn_user.form.handler.profile 
```

# src/Vn/UserBundle/Form/Type/ProfileFormType.php

```
 namespace Vn\UserBundle\Form\Type;

  use Symfony\Component\Form\FormBuilder;
  use FOS\UserBundle\Form\Type\ProfileFormType as BaseType;

  class ProfileFormType extends BaseType
  {    
      public function buildUserForm(FormBuilder $builder, array $options)
      {        
      parent::buildUserForm($builder, $options);

          // custom field       
          $builder->add('profile',new MyProfileFormType(),array(
                    'label' => 'PROFILE'
                    ));

      }

      public function getName()
      {
          return 'vn_user_profile';
      }
  } 
```

# src/Vn/UserBundle/Form/Type/MyProfileFormType.php

```
namespace Vn\UserBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class MyProfileFormType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
    $builder->add('birthday','birthday', array(
        'input' => 'array',
        'widget' => 'choice',

        'label'  => 'Birthday',
        ))
        ->add('firstname','text', array(
        'trim' => true,
        'label'  => 'Firstname',
        ))
        ->add('lastname','text', array(
        'trim' => true,
        'label'  => 'Lastname',
        ))
        ->add('gender','choice', array(
        'choices'   => array('1' => 'Male', '2' => 'Female'),
        'expanded'  => true,
        'required'  => true,
        'label'  => 'Vous êtes',
        ));
    }

    public function getName()
    {
        return 'vn_user_myprofile';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Vn\UserBundle\Document\Profile',

        );
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T23:45:25.023

我在我的文件 ProfilFormeHandler.php 中发现了错误：在函数 process() 中，我调用了 parent::onSucess() 而不是 parent::process() ...结果是“静默”错误（静默，因为不是致命错误出现）当然是我的错

感谢您花时间帮助我，非常抱歉！

```
 <?php
  // src/Vn/UserBundle/Form/Handler/RegistrationFormHandler.php

  namespace Vn\UserBundle\Form\Handler;

  use FOS\UserBundle\Form\Handler\ProfileFormHandler as BaseHandler;

  use FOS\UserBundle\Model\UserInterface;

  class ProfileFormHandler extends BaseHandler
  {

      public function process(UserInterface $user)
      {
          //parent::onSuccess($user);
            parent::process($user); // sound better of course : )

      }

      protected function onSuccess(UserInterface $user)
      {
          $this->userManager->updateUser($user);
      }
  } 
```

# objective-c - [[NSMutableData alloc] initWithLength:] 和 CFDataCreateMutable() 的区别？

> ID：11270285
> 
> 赞同：0
> 
> 时间：2012-06-29T23:49:06.937
> 
> 标签：objective-c, cocoa, core-foundation, nsmutabledata, cfdata

我正在查看一些创建可变数据对象并将 SHA1 哈希放入其中的代码。如果我初始化目标可变数据对象

```
CFMutableDataRef hashDataRef = (CFMutableDataRef)[[NSMutableData alloc] initWithLength:SHA_DIGEST_LENGTH]; 
```

一切正常。如果我将那一行更改为

```
CFMutableDataRef hashDataRef = CFDataCreateMutable(kCFAllocatorDefault, SHA_DIGEST_LENGTH); 
```

它会中断（在 SHA1 命令之后，可变数据对象似乎仍然为空）。在这两种情况下，创建之后的行`hashDataRef`是

```
SHA1(CFDataGetBytePtr(inputDataRef), CFDataGetLength(inputDataRef), CFDataGetMutableBytePtr(hashDataRef)); 
```

我没想到两者之间会有任何区别，但显然我错过了一些东西。在不使用 NSMutableData 和免费桥接的情况下，是否有适当的 Core Foundation 方法来获取我想要的可变数据对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:58:12.920

`NSMutableData initWithLength:`创建一个数据对象，其原始数据用零填充，但`CFDataCreateMutable`创建一个空的`CFMutableDataRef`. 即使它是用容量创建的，它的长度仍然为零。因此，当您使用 时`CFDataGetMutableBytePtr`，它会返回一个 NULL 指针。

[要修复它，您可以使用CFDataSetLength](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFMutableDataRef/Reference/reference.html)将 CFMutableDataRef 填充到其容量，它用零填充数据。

# kendo-ui - 如何更改 MVC 网格单元的 Kendo UI 的背景颜色

> ID：11270288
> 
> 赞同：15
> 
> 时间：2012-06-29T23:49:23.890
> 
> 标签：kendo-ui

我正在使用 MVC 的 Kendo UI 开发一个应用程序，我希望能够更改单元格的背景，但我不知道如何获取列单元格背景属性的值，以便我可以设置它。

```
 @(Html.Kendo().Grid(Model)
        .Name("LineItems")
        .Events(e=> e
            .DataBound("LineItems_Databound")
        )
        .Columns(columns =>
            {
                columns.Bound(o => o.Ui).Title("UI").Width(20);
                columns.Bound(o => o.QtyOrdered).Title("Qty Ord").Width(30);
                columns.Bound(o => o.Nomenclature).Width(200);
                columns.Bound(o => o.QtyShipped).Width(20).Title("Qty Sent");
                columns.Bound(o => o.QtyReceived).Width(20).Title("Qty Rx");
                columns.Bound(o => o.ReqID).Width(50);
                columns.Bound(o => o.JCN_Job).Width(50).Title("Job/JCN");
                columns.Bound(o => o.ManPartID).Width(100).Title("Part#");
                columns.Bound(o => o.Requestor).Width(100).Title("Requestor");
            })
                     .ToolBar(toolbar =>
                     {
                         //toolbar.Create();
                         toolbar.Save();
                     })

                .Editable(editable => editable.Mode(GridEditMode.InCell))
                .Sortable()
                .Selectable()
                .Resizable(resize => resize.Columns(true))
                .Reorderable(reorder => reorder.Columns(true))
                .DataSource(dataSource => dataSource
                    .Ajax()
                    .Model(model => model.Id(p => p.ID))
                    .Batch(true)
                    .ServerOperation(false)
                    .Read(read => read.Action("Editing_Read", "Shipping"))
                    .Update(update => update.Action("UpdateShipment", "Shipping"))
                    //.Destroy(update => update.Action("Editing_Destroy", "Shipping"))
                )
) 
```

在我的脚本中，我的代码在 .databound 上的网格中循环

```
 function LineItems_Databound() {
      var grid = $("#LineItems").data("kendoGrid");
      var data = grid.dataSource.data();
      $.each(data, function (i, row) {
          var qtyRx = row.QtyReceived;
          var qtySx = row.QtyShipped;

          if (qtyRx < qtySx) {
             // Change the background color of QtyReceived here
          }

      });
   } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-30T21:03:09.527

**使用 Ajax 绑定**

使用 jquery，您可以通过使用行的 uid（唯一 id）并选择该行的第 n 个子项来选择和更改网格单元格的背景颜色。

```
function LineItems_Databound() {
    var grid = $("#LineItems").data("kendoGrid");
    var data = grid.dataSource.data();
    $.each(data, function (i, row) {
      var qtyRx = row.QtyReceived;
      var qtySx = row.QtyShipped;

      if (qtyRx < qtySx) {
        //Change the background color of QtyReceived here
        $('tr[data-uid="' + row.uid + '"] td:nth-child(5)').css("background-color", "red");
      }
    });
} 
```

**更新**

[Alan Fisher](https://stackoverflow.com/users/1018705/alan-fisher)在评论中提出了另一种解决此问题的方法，这是他从 KendoUI 的人们那里学到的。QtyReceived 列使用将参数传递给数据绑定事件的 ClientTemplate。

```
@(Html.Kendo().Grid(Model)
  .Name("LineItems")
  .Events(e => e.DataBound("LineItems_Databound"))
  .Columns(columns =>
  {
    columns.Bound(o => o.Ui).Title("UI").Width(20);
    columns.Bound(o => o.QtyOrdered).Title("Qty Ord").Width(30);
    columns.Bound(o => o.Nomenclature).Width(200);
    columns.Bound(o => o.Requestor).Width(100);
    columns.Bound(o => o.QtyShipped).Width(20).Title("Qty Sent");
    columns.Bound(o => o.QtyReceived).Width(20).Title("Qty Rx")
      .ClientTemplate("#= LineItems_Databound(QtyShipped,QtyReceived)#");
    columns.Bound(o => o.ReqID).Width(50);
    columns.Bound(o => o.JCN_Job).Width(50).Title("Job/JCN");
    columns.Bound(o => o.ManPartID).Width(100).Title("Part#");
    columns.Bound(o => o.ReceivedBy).Width(100).Title("Received By");
    columns.Bound(o => o.RecAtSiteDate).Width(100).Title("Received Date")
      .Format("{0:dd MMM, yy}");
  })
)

<script>
  function LineItems_Databound(qtySx, qtyRx) {
      if (qtyRx < qtySx) {
        return "<div style='background: pink'>" + qtyRx + " </div>";
      }
      else {
       return qtyRx;
      }
  }
</script> 
```

**使用服务器绑定**

如果您使用的是服务器数据绑定而不是 ajax 数据绑定，那么 CellAction 可能是执行此操作的更好方法。

```
@(Html.Kendo().Grid(Model)
    .Name("LineItems")
    .CellAction(cell =>
    {
      if (cell.Column.Title.Equals("QtyReceived"))
      {
        if (cell.DataItem.QtyReceived.Value < cell.DataItem.QtyShipped.Value)
        {
          cell.HtmlAttributes["style"] = "background-color: red";
        }
      }
    })
    .Columns(columns =>
    {
        columns.Bound(o => o.Ui).Title("UI").Width(20);
        columns.Bound(o => o.QtyOrdered).Title("Qty Ord").Width(30);
        columns.Bound(o => o.Nomenclature).Width(200);
        columns.Bound(o => o.QtyShipped).Width(20).Title("Qty Sent");
        columns.Bound(o => o.QtyReceived).Width(20).Title("Qty Rx");
        columns.Bound(o => o.ReqID).Width(50);
        columns.Bound(o => o.JCN_Job).Width(50).Title("Job/JCN");
        columns.Bound(o => o.ManPartID).Width(100).Title("Part#");
        columns.Bound(o => o.Requestor).Width(100).Title("Requestor");
    })
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-24T11:31:03.480

如果您从 MVC 视图模型中填充网格，这里有一个简单的方法。创建 CSS 样式：

```
 <style>
        .TrunkSummaryLightYellow {
            background: LightYellow;
        }

        .TrunkSummaryPink {
            background: Pink;
        }

        .TrunkSummaryLightGreen {
            background: LightGreen;
        }
    </style> 
```

然后使用如下的文档就绪函数：

```
$(document).ready(function () {
    var grid = $("#TrunkSummaryGrid").data("kendoGrid");
    var gridData = grid.dataSource.view();

    for (var i = 0; i < gridData.length; i++) {
        if (gridData[i].SomeProperty == SomeValue) {
            grid.table.find("tr[data-uid='" + gridData[i].uid + "']").addClass("TrunkSummaryLightYellow");
        }
    }
}) 
```

感谢 Dave Glick ([链接](https://daveaglick.com/posts/simple-row-coloring-in-kendo-grid)) 的这个建议。

我发现单个单元格的背景颜色可以设置如下：

`grid.table.find("tr[data-uid='" + gridData[i].uid + "']")[0].cells[4].style.backgroundColor = 'pink';`

# javascript - 如何切换标记？

> ID：11270289
> 
> 赞同：4
> 
> 时间：2012-06-29T23:49:55.060
> 
> 标签：javascript, google-maps, google-maps-api-3

我制作标记的代码：

```
for (var marker in markers) {
    var posMarker = new google.maps.Marker({
        position: new google.maps.LatLng(markers[marker].lat, markers[marker].lng),
        map: map,
        visible: markers[marker].visible
    });     
}; 
```

我的标记对象：

```
var markers = {
        "London": {"lat": -83.68088192646843, "lng": -125.270751953125, "type": "town", "visible": false},
        "Paris": {"lat": -58.1548020417031, "lng": -21.318115234375, "type": "town", "visible": false},
}; 
```

我试图能够使用这样的复选框来切换标记：

```
$('#toggle').change(function() {
    for (var marker in markers) {
        posMarker.setVisible(true);
    };
}); 
```

但是只显示数组中的最后一个标记，如何让它们全部显示？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T00:05:13.333

好吧，我看到`posMarker`它被用作放置 Google Maps 标记的临时变量，并且随着 for 循环的进行，`posMarker`引用“更新”到放置的最新标记。这就是为什么只显示最后一个标记的原因。

您需要跟踪对放置的 Google 地图标记的所有引用，包括那些已“使用”的标记。我的方法使用一个对象，很像您的`markers`对象，但包含对 Google 地图标记的引用。您还可以使用普通索引数组 (posMarkers[])。由你决定。

请参阅[**演示**](http://jsfiddle.net/yV6xv/94/)，注意 LatLngs 已为简单起见进行了修改（看起来您有自定义坐标系）。

另外，我没有进行此更改，但我只是注意到调用`marker`in可能更有意义`markers`，因为您`city`的`markers`对象的编写方式。它会更具可读性，但不会影响执行。

[最后， for 循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for)块末尾的分号是不需要的，并且要小心对象后面的尾随逗号`Paris`（我猜你只是删除了列表的其余部分）。在这种情况下，这无关紧要，但有时这些尾随逗号可能是难以发现的错误的来源。

```
function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var markers = {
        "London": { "lat": 0, "lng": 0, "type": "town", "visible": false },
        "Paris": { "lat": 10, "lng": 10, "type": "town", "visible": false }
    };

    var posMarkers = {};

    for (var marker in markers) {
        posMarkers[marker] = new google.maps.Marker({
            position: new google.maps.LatLng(markers[marker].lat, markers[marker].lng),
            map: map,
            visible: markers[marker].visible
        });
    }

    $('#toggle').change(function () {
        for (var marker in markers) {
            if (posMarkers[marker].getVisible()) {
                posMarkers[marker].setVisible(false);
            }
            else {
                posMarkers[marker].setVisible(true);
            }
        }
    });
} 
```

# iphone - Sencha 构建生产无法插入元标记

> ID：11270290
> 
> 赞同：0
> 
> 时间：2012-06-29T23:50:06.280
> 
> 标签：iphone, uiwebview, sencha-touch-2

嗨，我正在开发一个**sencha-touch-2**应用程序，它将嵌入在**iPhone UIWebview**上。UIWebview 大小为 280x420，以 iPhone 屏幕为中心。一切在 sencha 开发中都很完美，但是当我尝试将 sencha 构建到生产环境中时，sencha 页面的大小会拉伸或不适合 UIWebview 的大小。请看下面的代码

煎茶

将元标记添加到 index.html 的正文

```
<body>
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1;">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <div id="appLoadingIndicator">
        <div></div>
        <div></div>
        <div></div>
    </div>
</body> 
```

此代码适用于开发，但当更改为生产时，页面会更改。我应该怎么做才能在生产版本中实现它，因为生产在加载时非常快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:15:39.813

试试这个，只需将此脚本添加到您的 html 正文标记中。

```
<script type="text/javascript">
         setTimeout(function(){
             var meta = document.createElement('meta');
             meta.setAttribute("name","viewport");
             meta.setAttribute("content","width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;");
            (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(meta);
         },1000);
    </script> 
```

Sencha touch 2.0 将使用内置的元标记覆盖您的脚本。因此，发生的情况是您的元标记将被加载，但将被它自己的元标记替换。

# java - Tomcat 无法执行外部 java 程序

> ID：11270291
> 
> 赞同：0
> 
> 时间：2012-06-29T23:50:09.713
> 
> 标签：java, jsp, tomcat

我是 JSP/Tomcat 的新手，在很大程度上也是 Java 的新手。这是我必须做的——当用户单击按钮/访问 URL 时，我想启动一个 Java 程序（它需要一些命令行参数）。

我可以很容易地做到

```
Runtime.exec("C:\\Python27\\python.exe test.py") 
```

或者

```
Runtime.exec("java -cp %CLASSPATH%;C:\\devprojects HelloWorld" 
```

这很好用。HelloWorld.class 只打印“HelloWorld”。

但是，当我尝试使用命令行参数的 java 程序时，GET 请求只是挂起，什么也不做。我不知道要查找哪些日志或这里可能有什么问题。在花了两天时间尝试各种事情之后，我现在正要放弃。

```
Runtime.exec("java -cp %CLASSPATH%;C:\\devprojects Run --username Blah --password Foo"); 
```

Tomcat 最终以什么用户身份运行这个 java 程序？我可以成为管理员吗？这是在Windows 2008上，UAC会干扰吗？

我不能在这里修改 Run.class，我必须按原样运行它并使用命令行参数。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:03:40.233

一个想法：您依赖命令行的默认标记化作为一个 complete `String`，并且它没有像您期望的那样解析最后一个。`String[]`相反，在您自己切分命令行之后，您应该使用这种方法的形式：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec(java.lang.String[])](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)

或者，它正在等待你的输入，或者等待你读取它的输出。这可以解释挂起。在互联网上搜索流和`Runtime.exec()`.

`ProcessBuilder`改为考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:30:04.753

还要记住，你必须确保执行的文件不会“永远”运行，如果你需要传递一些参数，你可以使用这个：

```
 static String startProcess(String command, String dir) throws IOException {
        StringBuffer ret = new StringBuffer();
        String[] comm = new String[3];
        comm[0] = COMMAND_INTERPRETER[0];
        comm[1] = COMMAND_INTERPRETER[1];
        comm[2] = command;
        long start = System.currentTimeMillis();
        try {
            //Start process
            Process ls_proc = Runtime.getRuntime().exec(comm, null, new File(dir));
            //Get input and error streams
            BufferedInputStream ls_in = new BufferedInputStream(ls_proc.getInputStream());
            BufferedInputStream ls_err = new BufferedInputStream(ls_proc.getErrorStream());
            boolean end = false;
            while (!end) {
                int c = 0;
                while ((ls_err.available() > 0) && (++c <= 1000)) {
                    ret.append(conv2Html(ls_err.read()));
                }
                c = 0;
                while ((ls_in.available() > 0) && (++c <= 1000)) {
                    ret.append(conv2Html(ls_in.read()));
                }
                try {
                    ls_proc.exitValue();
                    //if the process has not finished, an exception is thrown
                    //else
                    while (ls_err.available() > 0)
                        ret.append(conv2Html(ls_err.read()));
                    while (ls_in.available() > 0)
                        ret.append(conv2Html(ls_in.read()));
                    end = true;
                }
                catch (IllegalThreadStateException ex) {
                    //Process is running
                }
                //The process is not allowed to run longer than given time.
                if (System.currentTimeMillis() - start > MAX_PROCESS_RUNNING_TIME) 
//this is very important
{
                    ls_proc.destroy();
                    end = true;
                    ret.append("!!!! Process has timed out, destroyed !!!!!");
                }
                try {
                    Thread.sleep(50);
                }
                catch (InterruptedException ie) {}
            }
        }
        catch (IOException e) {
            ret.append("Error: " + e);
        }
        return ret.toString();
    } 
```

# java - 我的 BC XTEA 实施不起作用，为什么？

> ID：11270293
> 
> 赞同：0
> 
> 时间：2012-06-29T23:50:34.797
> 
> 标签：java, bouncycastle, encryption

Bouncy castle 已经使用 XTEAEngine 类提供 XTEA 加密。类属性如下所示：

```
private static final int rounds     = 32,
                         block_size = 8,
                         key_size   = 16,
                         delta      = 0x9E3779B9,
                         d_sum      = 0xC6EF3720; // sum on decrypt 
```

但闭源 C++ 应用程序使用以下设置（32 轮）：

`uint32 delta = 0x61C88647; uint32 sum = 0xC6EF3720;`

所以为了改变它，我复制了 BC XTEAEngine 类的整个代码，将其命名为 XTEAEngine2 在更改的增量。但是现在加密无法按预期工作：

```
arr given    : [11, 0, 10, 8, 0, 72, 105, 32, 116, 104, 101, 114, 101, 0, 0, 0] 
arr encrypted: [-128, -26, -32, 17, 7, 98, 80, -112, 26, -83, -11, 47, -124, -50, -80, 59] 
arr decrypted: [-106, 62, 110, -40, -56, -58, 18, -101, -38, -73, -83, 95, 18, -99, -84, -37] 
```

在我改变之前一切都很好：

```
arr given    : [11, 0, 10, 8, 0, 72, 105, 32, 116, 104, 101, 114, 101, 0, 0, 0]
arr encrypted: [89, -95, -88, 120, -117, 39, 57, -126, 23, -74, 35, 105, -23, -7, -109, -27]
arr decrypted: [11, 0, 10, 8, 0, 72, 105, 32, 116, 104, 101, 114, 101, 0, 0, 0] 
```

我正在像这样使用 BouncyCastle XTEA：

```
BlockCipher engine = new XTEAEngine[2]();
BufferedBlockCipher cipher = new BufferedBlockCipher(engine);
KeyParameter kp = new KeyParameter(keyArr);
 private byte[] callCipher( byte[] data )
    throws CryptoException {
        int    size =
                cipher.getOutputSize( data.length );
        byte[] result = new byte[ size ];
        int    olen = cipher.processBytes( data, 0,
                data.length, result, 0 );
        olen += cipher.doFinal( result, olen );

        if( olen < size ){
            byte[] tmp = new byte[ olen ];
            System.arraycopy(
                    result, 0, tmp, 0, olen );
            result = tmp;
        }

        return result;
    }

public synchronized byte[] encrypt( byte[] data )
    throws CryptoException {
        if( data == null || data.length == 0 ){
            return new byte[0];
        }

        cipher.init( true, kp );
        return callCipher( data );
    }

    public synchronized byte[] decrypt( byte[] data )
    throws CryptoException {
        if( data == null || data.length == 0 ){
            return new byte[0];
        }

        cipher.init( false, kp );
        return callCipher( data );
    } 
```

有人能指出我的错误吗？因为我相信我在某个地方做了一个。我什至使用维基百科的算法规范完全自己实现了 XTEA，但同样的事情发生了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:01:40.673

`0x9E3779B9`是 的补码负数`0x61C88647`；这向我表明，在某处交换了加法和减法。

# javascript - 在 Javascript 中接受 2 个输入值

> ID：11270294
> 
> 赞同：0
> 
> 时间：2012-06-29T23:50:36.360
> 
> 标签：javascript, ajax, events

**已编辑**

我有一个表单（我正在使用其他人的代码库，并且找不到表单本身的实际名称，这使得这变得更加困难），现在我有 2 个字段需要在 JavaScript 调用中使用。

我有一个输入框（其中有 JavaScript 调用 'getTotal' 并使用 onkeydown (this.value) 发送值），并且我有一个单选按钮选择。我需要知道如何将按钮值与输入值一起发送到 JavaScript 函数。

如果我尝试使用以下方法在“getTotal”函数中查找值：

```
var taxes = document.getElementById('add-event-dialog-taxes').checked.val(); 
```

我收到错误“无法将 'document.getElementById('add-event-dialog-taxes')' 转换为对象”。

如果我使用：

```
var taxes = $("input[name='add-event-dialog-taxes']:checked").val(); 
```

我没有收到任何错误，但该值没有传递到 AJAX 页面。

如果排除尝试查找按钮值，则该功能正常工作。

以下是字段：

```
<input type="text" id="add-event-dialog-subtotal" style="width:100px" placeholder="0.00" onkeydown="getTotal(this.value)"><input type='radio' name='add-event-dialog-taxes'  value='gstpst' checked/> GST + PST</br>
<input type='radio' name='add-event-dialog-taxes' value='gst'/> GST Only</br>
<input type='radio' name='add-event-dialog-taxes' value='pst' /> PST Only </br>
<input type='radio' name='add-event-dialog-taxes' value='none'/> No Taxes` 
```

这是功能：

```
function getTotal(value) {  
    //var taxes = document.getElementById('add-event-dialog-taxes').checked.val();
    //var taxes = $("input[name='add-event-dialog-taxes']:checked").val();

    var strURL="display/getTotal.php?value="+value+"&taxes="+taxes;
    var req = getXMLHTTP();

    if (req) {
        req.onreadystatechange = function() {

            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('getTotal').innerHTML=req.responseText;                 
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }       
} 
```

有人可以帮我标记这篇文章吗？我似乎永远无法正确格式化代码块。=(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:18:59.243

您将看到错误声明`getTotal`不是函数的原因是因为您`+`在构建 strURL 时省略了 a。这将导致解析错误，并且尝试访问会`getTotal`导致 ReferenceError。

几点评论：

*   您的无线电`<input>`标签不应该相同`id`；任何两个元素都不应该共享一个`id`
*   避免将 JavaScript 放在`onkeydown`属性中，而是更喜欢使用 jQuery 附加处理程序。
*   希望在库使用中保持一致，例如，jQuery 有一个`ajax`函数可以获取一个`XMLHttpRequest`实例并为您处理所有工作。

这是一个适合您的示例（未经测试）：

HTML：

```
<input type="text" id="add-event-dialog-subtotal" style="width:100px" placeholder="0.00">
<input type='radio' name='add-event-dialog-taxes' value='gstpst' checked/> GST + PST</br>
<input type='radio' name='add-event-dialog-taxes' value='gst'/> GST Only</br>
<input type='radio' name='add-event-dialog-taxes' value='pst' /> PST Only </br>
<input type='radio' name='add-event-dialog-taxes' value='none'/> No Taxes` 
```

JavaScript：

```
$('#add-event-dialog-subtotal').keypress(function () {
    var value = $(this).val(),
        taxes = $('input:radio[name=add-event-dialog-taxes]:checked').val();
    $.ajax({
        url: 'display/getTotal.php?value=' + value + '&taxes=' + taxes
    }).done(function (data) {
        $('#getTotal').html(data);
    }).fail(function () {
        alert('There was a problem executing the AJAX request.');
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:09:05.660

的定义中有错字`strURL`，可能会导致：

```
`var strURL="display/getTotal.php?value="+value+"&taxes="taxes;`
```

`我通常在浏览器中打开控制台窗口并检查是否有类似的错误。

编辑：

您所有的单选按钮都具有相同的 ID。您需要解决这个问题，请参见此处的示例：[如何检查是否使用 JavaScript 选择了单选按钮？](https://stackoverflow.com/questions/1423777/how-can-i-check-if-a-radio-button-is-selected-in-javascript)`

# iphone - AppDelegate 中的多个 NSManagedObjectContexts

> ID：11270295
> 
> 赞同：2
> 
> 时间：2012-06-29T23:51:24.873
> 
> 标签：iphone, objective-c, ios, core-data

通常在单线程应用程序中，主托管对象上下文将驻留在 AppDelegate 中，我们将通过 appDelegate.mainMOC 访问它。但是现在 Apple 引入了嵌套上下文（父和子），[他们推荐](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)“传递接力棒”的方法：

> 嵌套上下文比以往任何时候都更重要的是，采用“传递接力棒”的方法来访问上下文（通过将上下文从一个视图控制器传递到下一个视图控制器）而不是直接从应用程序委托中检索它。

但我真的不明白引入嵌套上下文如何使它“比以往任何时候都重要”。为什么我不能在 AppDelegate 中只有三个上下文（masterMOC、mainMOC、extraMOC）？这样做会有什么问题，为什么苹果不推荐这种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:12:07.603

首先，将所有这些都放在应用程序委托中是一个坏主意。它打破了各种软件设计规则。

话虽如此，想法是您不希望必须在必须确切知道哪些上下文的地方编写代码。使用您提出的解决方案，所有代码都必须知道使用 moc1、moc2 或 moc3 . 那是非常脆弱的。

理想情况下，您会将 MOC 传递给代码，并且该代码使用给定的 MOC。如果它需要创建一个临时文件，它可以创建一个传递给它的 MOC 的子节点（当然，假设 MOC 不是限制类型）。

一种方法是传递对象，而不必担心确切的 MOC。必要时只需查询托管对象的 managedObjectContext 属性。

请注意，将内容保留在应用程序委托中意味着您将其用作“厨房水槽”，并且在某些方面只是美化了全局变量。

顺便说一句，它“比以往任何时候都更重要”，因为较新的线程策略更加严格，并且如果线程错误，您的代码几乎肯定会死得很惨。

# javascript - Javascript：如何在 RegEx .exec 结果中获得多个匹配项

> ID：11270302
> 
> 赞同：33
> 
> 时间：2012-06-29T23:52:11.690
> 
> 标签：javascript, regex, node.js, v8

当我跑

```
/(a)/g.exec('a a a ').length 
```

我明白了

```
2 
```

但我认为它应该返回

```
3 
```

`a`因为字符串中有 3 个，而不是 2 个！

这是为什么？

我希望能够在 RegEx 中搜索所有出现的字符串并对其进行迭代。

FWIW：我正在使用 node.js

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-30T00:04:44.423

`exec()`仅返回第一个匹配的捕获集，而不是您期望的匹配集。所以你真正看到的是`$0`（整个比赛，“a”）和`$1`（第一次捕获）——即一个长度为 2 的数组。 同时被设计为你可以*再次*`exec()`调用它来获取*下*一场比赛的捕获. 来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)：

 **> 如果您的正则表达式使用“g”标志，您可以多次使用 exec 方法在同一字符串中查找连续匹配项。当您这样做时，搜索将从正则表达式的 lastIndex 属性指定的 str 的子字符串开始（测试也将推进 lastIndex 属性）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-30T00:03:08.843

您可以`match`改用：

```
'a a a'.match(/(a)/g).length  // outputs: 3 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-05-14T13:51:02.213

**while循环**可以帮助你

```
x = 'a a a a';
y = new RegExp(/a/g);
while(null != (z=y.exec(x))) {
   console.log(z);     // output: object
   console.log(z[0]);  // ouput: "a"
} 
```

如果你添加计数器，那么你会得到它的长度。

```
x = 'a a a a';
counter = 0;
y = new RegExp(/a/g);
while(null != (z=y.exec(x))) {
   console.log(z);     // output: object
   console.log(z[0]);  // output: "a"
   counter++;
}
console.log(counter);  // output: 4 
```

这是非常安全的，即使它没有找到任何匹配项，它也会退出并且计数器将为 0

主要目的是说明如何使用 RegExp 循环并从相同匹配的 RegExp 字符串中获取所有值

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-30T00:07:52.810

您只匹配第一个 a。长度为 2 的原因是它正在查找第一个匹配项和第一个匹配项的括号组部分。在您的情况下，它们是相同的。

考虑这个例子。

```
var a = /b(a)/g.exec('ba ba ba ');
alert(a); 
```

它输出`ba, a`. 数组长度仍然是 2，但更明显的是发生了什么。"ba" 是完全匹配。 `a`是括号内的第一个分组匹配。

[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)支持这一点——只返回第一个匹配项和包含的组。要查找所有匹配项，您将使用 mVChr 所述的 match()。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-30T00:11:10.990

***代码：***

```
alert('a a a'.match(/(a)/g).length); 
```

***输出：***

```
3 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-09T00:09:02.830

`regexp.exec(str)`返回第一个匹配项或整个匹配项和第一个捕获（何时`re = /(a)/g;`），如其他答案中所述

```
const str = 'a a a a a a a a a a a a a';
const re = /a/g;

const result = re.exec(str);
console.log(result);
```

但它也会**记住**它在`regexp.lastIndex`属性中的位置。

下一个调用开始搜索`regexp.lastIndex`并返回下一个匹配项。

如果没有更多匹配项，则`regexp.exec`返回 null 并`regexp.lastIndex`设置为 0。

```
const str = 'a a a';
const re = /a/g;

const a = re.exec(str);
console.log('match : ', a, ' found at : ', re.lastIndex);

const b = re.exec(str);
console.log('match : ', b, ' found at : ', re.lastIndex);

const c = re.exec(str);
console.log('match : ', c, ' found at : ', re.lastIndex);

const d = re.exec(str);
console.log('match : ', d, ' found at : ', re.lastIndex);

const e = re.exec(str);
console.log('match : ', e, ' found at : ', re.lastIndex);
```

这就是为什么你可以使用一个while循环，当比赛结束时会停止`null`

```
const str = 'a a a';
const re = /a/g;

while(match = re.exec(str)){
  console.log(match, ' found at : ', match.index); 
}
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-15T14:19:50.967

已经有几个答案，但不必要地复杂。对结果的身份检查过多，因为它始终是数组或`null`.

```
let text = `How much wood would a woodchuck chuck if a woodchuck could chuck wood?`;
let re = /wood/g;
let lastMatch;

while (lastMatch = re.exec(text)) {
  console.log(lastMatch);
  console.log(re.lastIndex);

  // Avoid infinite loop
  if(!re.global) break;
} 
```

您可以将无限循环保护移动到条件表达式中。

```
while (re.global && (lastMatch = re.exec(text))) {
 console.log(lastMatch);
 console.log(re.lastIndex);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-01T15:27:05.263

封装成一个效用函数：

```
const regexExecAll = (str: string, regex: RegExp) => {
  let lastMatch: RegExpExecArray | null;
  const matches: RegExpExecArray[] = [];

  while ((lastMatch = regex.exec(str))) {
    matches.push(lastMatch);

    if (!regex.global) break;
  }

  return matches;
}; 
```

**用法：**

```
const matches = regexExecAll("a a a", /(a)/g);

console.log(matches); 
```

**输出：**

```
[
  [ 'a', 'a', index: 0, input: 'a a a', groups: undefined ],
  [ 'a', 'a', index: 2, input: 'a a a', groups: undefined ],
  [ 'a', 'a', index: 4, input: 'a a a', groups: undefined ]
] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-01T17:47:29.300

对于您的示例，`.match()`是您的最佳选择。但是，如果您确实需要子组，则可以创建一个生成器函数。

```
function* execAll(str, regex) {
  if (!regex.global) {
    console.error('RegExp must have the global flag to retrieve multiple results.');
  }

  let match;
  while (match = regex.exec(str)) {
    yield match;
  }
}

const matches = execAll('a abbbbb no match ab', /\b(a)(b+)?\b/g);
for (const match of matches) {
  console.log(JSON.stringify(match));
  let otherProps = {};
  for (const [key, value] of Object.entries(match)) {
    if (isNaN(Number(key))) {
      otherProps[key] = value;
    }
  }

  console.log(otherProps);
}
```

虽然大多数 JS 程序员认为污染原型是不好的做法，但您也可以将其添加到`RegExp.prototype`.

```
if (RegExp.prototype.hasOwnProperty('execAll')) {
  console.error('RegExp prototype already includes a value for execAll.  Not overwriting it.');
} else {
  RegExp.prototype.execAll = 
    RegExp.prototype = function* execAll(str) {
      if (!this.global) {
        console.error('RegExp must have the global flag to retrieve multiple results.');
      }

      let match;
      while (match = this.exec(str)) {
        yield match;
      }
    };
}

const matches = /\b(a)(b+)?\b/g.execAll('a abbbbb no match ab');
console.log(Array.from(matches));
```**

# asp.net-mvc-3 - 如何将 ObjectSet 从实体转换为模型的 IEnumerable？

> ID：11270305
> 
> 赞同：2
> 
> 时间：2012-06-29T23:53:07.493
> 
> 标签：asp.net-mvc-3, casting, entity-framework-4.1, repository-pattern

我正在使用 MVC3、Razor 和 Entity Framework 4.1 在存储库模式中使用模式优先方法（与代码优先方法相对）构建一个测试应用程序。我想避免在我的视图中访问数据对象，而是访问模型，但我遇到了问题。据我所知，数据对象作为 ObjectSet 从数据层返回，但我的视图需要 IEnumerable，我不知道如何将一个对象转换为另一个对象。

这是一些代码，以帮助澄清。

* * *

**模型 ...**

```
namespace TestSolution.Models
{
    public class ProjectModel
    {
        [HiddenInput]
        public int Id { get; set; }

        [Required]
        [StringLength(255, ErrorMessage = "The name cannot be more than 255 characters long.")]
        [Display(Name = "Name")]
        public string Name { get; set; }

        [Required]
        [Display(Name = "Description")]
        public string Description { get; set; }
    }
} 
```

**存储库...**

```
public IQueryable<ProjectModel> GetProjects()
{
    return Db.Project;
} 
```

**实体...**

```
public ObjectSet<Project> Project
{
    get
    {
        if ((_Project == null))
        {
            _Project = base.CreateObjectSet<Project>("Project");
        }
        return _Project;
    }
} 
```

**控制器 ...**

```
public ActionResult Index()
{
    IEnumerable<TestSolution.Models.ProjectModel> model = _projectRepository.GetProjects();
    return View(model);
} 
```

**看法 ...**

```
@model IEnumerable<TestSolution.Models.ProjectModel> 
```

**我在构建时遇到的错误...**

```
Cannot implicitly convert type 'System.Data.Objects.ObjectSet<TestSolution.Project>' to 'System.Linq.IQueryable<TestSolution.Models.ProjectModel>'. An explicit conversion exists (are you missing a cast?) 
```

* * *

这个问题有意义吗？我只是不确定从这里去哪里......你们能给我的任何建议都会很棒。:)

**编辑：**我可以通过将我的存储库代码更改为 ...

```
public IQueryable<ProjectModel> GetProjects()
{
  return Db.Project.Select(i => new ProjectModel() { Id = i.Id, Name = i.Name, Description = i.Description });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:01:18.870

问题不在于转换`ObjectSet<T>`为`IEnumerable<T>`( [`ObjectSet<T>`implements`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/dd412719.aspx) )。

问题是从 转换`TestSolution.Project`为`TestSolution.Models.ProjectModel`. 您将需要编写一些转换代码，可能类似于以下内容：

```
model.Select(i => new ProjectModel() { /* Set properties here. */ }); 
```

# ctypes - Python 3.2.2 ctypes.Structure 将 c_void_p 初始化为 None

> ID：11270306
> 
> 赞同：1
> 
> 时间：2012-06-29T23:53:20.993
> 
> 标签：ctypes, python-3.2

一个简单的类在 32 位 Windows 7 上产生了这种奇怪的行为。我试图将此结构的数组传递给我的 dll，然后尝试获取由 dll 填充的数据包内容。当我创建这个类的对象时，我发现 c_void_p 是一个 NoneType 对象。这是正常行为吗？

```
import ctypes
class io_packet( ctypes.Structure ):
    _fields_ = [( 'size', ctypes.c_uint32 ),
                ( 'header', ctypes.c_uint32 ),
                ( 'string1_size', ctypes.c_uint32 ),
                ( 'string2_size', ctypes.c_uint32 ),
                ( 'string1', ctypes.c_char * 128 ),
                ( 'string2', ctypes.c_char * 64 ),
                ( 'virt_handle', ctypes.c_void_p ), ]

a = io_packet()
a.size
a.header
a.string1_size
a.string2_size
a.string1
a.string2
a.virt_handle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:21:09.603

是的，这很正常。 `size`并且`header`被初始化为零，因此`virt_handle`初始化为 None 也就不足为奇了，这相当于 Python 中指针的 N​​ULL。 从 Python 读取结构元素时`ctypes`返回 Python*值。*

另一个例子：

```
>>> a=c_void_p()
>>> a
c_void_p(None)
>>> a.value
>>> type(a.value)
<type 'NoneType'>
>>> a=c_void_p(1)
>>> a
c_void_p(1)
>>> a.value
1
>>> type(a.value)
<type 'int'> 
```

# c# - GDrive 和 SkyDrive 是否可通过 NuGet 获得

> ID：11270307
> 
> 赞同：1
> 
> 时间：2012-06-29T23:53:22.953
> 
> 标签：c#, nuget, google-drive-api, onedrive

有谁知道 Google 的 GDrive 和 Microsoft 的 SkyDrive 是否都存在 NuGet 包？如果不能，谷歌或微软的任何人都可以说出它们可能何时发布吗？

注意：我知道[GDrive 的 SDK 存在于此处](https://developers.google.com/drive/v2/reference/)，[SkyDrive 存在于此处](http://msdn.microsoft.com/en-us/library/live/hh826521)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:05:32.753

Google Drive 包在 NuGet 上尚不可用，但这是我们计划做的事情。请对此功能请求加注星标以获取所有更新的通知：[http ://code.google.com/p/google-api-dotnet-client/issues/detail?id=67](http://code.google.com/p/google-api-dotnet-client/issues/detail?id=67)

# c++ - 用 C++ 输入鸭子的模板

> ID：11270309
> 
> 赞同：0
> 
> 时间：2012-06-29T23:53:47.903
> 
> 标签：c++, templates, duck-typing

有没有办法要求模板类型具有属性？

例如：

```
template <typename T, typename U>
void foo()
{
    U a,b;
    bool truthiness = T()(a,b);
    if (truthiness)
        // do something
} 
```

`T`那么，我将如何要求`operator()(U a, U b)`定义返回特定类型？这可能吗？（我知道它在 d 中，但我不确定 c++）。

附言。如果鸭子在这里输入错误，请告诉我，我相信它是正确的，但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:00:58.730

考虑到您的意图，您的语法是错误的。由于`T`是一种类型，因此将使用双参数构造函数`T(1, 2)`构造一个临时类型的对象。`T`如果你想打电话给`T`s 运营商`()`，你必须 вo 类似

```
T()(1, 2); 
```

假设通过临时工程为您拨打电话。

如果`T`没有这样的 operator `()`，代码将无法编译。我实际上会说模板代码的一大好处是，只要语法有效（即您正在谈论的鸭式打字）它就“有效”，即无需通过要求`operator ()`be来进一步限制它当下。

当然，在我的示例中它实际上可能有意义，因为`T = void (*)(int, int)`代码在语法上是有效的，但会导致通过空指针调用函数。但同样，这是特定于我的代码版本的，我不知道`T`您要将运算符应用于哪个特定类型的对象`()`。

话虽如此，但 Boost 库有很多特性允许人们检查这些属性并将它们用于模板元编程和/或静态断言中的分支，这一点毫无价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:55:22.657

通过简单地表达模板，您需要 T 具有`operator()(int, int)`. 如果没有，它将无法编译。

但是，如果您正在创建 API 并希望通知 API 的用户他们传递了不兼容的类型，那么您需要创建一个类型特征来检测运算符，您可以专门化该函数来区分该事实并创建一个static_assert 来表明事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T04:38:07.913

如果您可以访问 decltype，则可以相对轻松地进行自己的检查。

```
template <class T, class U> class check_same_type_t;

template <class T> class check_same_type_t<T, T> { };

template <class T, class U>
void foo()
{
    U a,b;
    check_same_type_t<bool, decltype(T()(a, b))> check;
    bool truthiness = T()(a,b);
    if (truthiness) ;
        // do something
} 
```

这启用了以下功能：

```
struct A {
    bool operator()(int, int) { return true; }
};

struct B {
    int operator()(int, int) { return 1; }
};

int
main()
{
    foo<A, int>(); // will compile
    foo<B, int>(); // won't compile

} 
```

只要确保这是你真正想要的。**强制通用算法使用特定类型可能会反过来咬你。**如果一个类型可以隐式转换为 bool，为什么在你的条件下使用它不令人满意？

# google-apps-script - 发生错误：TypeError：无法通过 Google 脚本调用未定义的方法“createEvent”

> ID：11270311
> 
> 赞同：0
> 
> 时间：2012-06-29T23:53:59.757
> 
> 标签：google-apps-script

在我的脚本和函数的后半部分，我不断收到无法调用方法错误，我不知道为什么。我完全模仿了模板脚本，但我不确定它为什么不调用该方法。

任何见解将不胜感激。

谢谢。

```
function createEvents(e){

//Get the active application
var app = UiApp.getActiveApplication();

try{
   //get the entries;
   var eventDate = e.parameter.eventDate;
var eventPeople = e.parameter.eventPeople;
var eventCompany = e.parameter.eventCompany;
var eventName = e.parameter.eventName;
var eventTime = e.parameter.eventTime;  
var eventPhone = e.parameter.eventPhone;  
var eventEmail = e.parameter.eventEmail;  
 var eventTaken = e.parameter.eventTaken;  

//Get the calendar
var cal = CalendarApp.getCalendarsByName('Phoenix Reservations')[0];//Change the calendar name
var eventStartTime = eventDate;
//End time is calculated by adding an hour in the event start time 
var eventEndTime = new Date(eventDate.valueOf()+60*60*1000);
//Create the events
cal.createEvent(eventPeople,eventCompany,eventName,eventTime,eventPhone,eventEmail,eventTaken);

//Log the entries in a spreadsheet
var ss = SpreadsheetApp.openById('KEY_TAKEN_OUT');//Change the spreadhseet key to yours
var sheet = ss.getSheets()[0];
sheet.getRange(sheet.getLastRow()+1, 1, 1, 5).setValues([[new Date(), eventDate,eventPeople,eventCompany,eventName,eventTime,eventPhone,eventEmail,eventTaken, 'Event created']]);

//Show the confirmation message
app.add(app.createLabel('Event created Successfully'));
//make the form panel invisible
app.getElementById('panel').setVisible(false);
return app;
}

  //If an error occurs, show it on the panel
  catch(e){
   app.add(app.createLabel('Error occured: '+e));
   return app;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:25:54.273

此行可能什么也不返回：

```
var cal = CalendarApp.getCalendarsByName('Phoenix Reservations')[0];//Change the calendar name 
```

你可以记录它来确认这样 `Logger.log(cal)`

'Phoenix Reservations' 是您拥有的日历名称还是您具有写入权限的日历名称？

编辑：你能测试一下这个简单的功能，看看这个日历是否一切正常吗？它将刚才创建一个事件。

```
function testcal(){
  var cal = CalendarApp.openByName('Phoenix Reservations');// or you can replace this with your var definition : same result normally ;-)
  if (cal) {
  var title = 'Test Event';
  var start = new Date();
  var end = new Date(start.valueOf()+60*60*1000);
  Logger.log(cal.getName()+' '+start+'   '+end)
  var desc = 'Created using Google Script';
  var loc = 'there';

  var event = cal.createEvent(title, start, end, {
      description : desc,
      location : loc
  });
  }   
} 
```

编辑 2：我修改了记录器以使其显示日历名称。

# objective-c - MagicalRecord + Core Data 没有在上下文之间找到对象，尽管 objectID 字符串比较工作正常

> ID：11270312
> 
> 赞同：4
> 
> 时间：2012-06-29T23:54:16.077
> 
> 标签：objective-c, core-data, magicalrecord

我有一个查询核心数据实体“MyGalleryPhoto”的 NSFetchedResultsController。

我正在尝试删除一些对象，并遇到一些问题。我正在使用 MagicalRecord。这是我对代码的最初尝试，在我看来应该可以正常工作。在代码运行时，对象肯定存在，因为它们显示在 fetchedResultsController 中。

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {

    for (MyGalleryPhoto *myGalleryPhoto in [self.fetchedResultsController.fetchedObjects objectsAtIndexes: self.selectedIndexes]) {

        NSError *error = nil;
        MyGalleryPhoto *localMyGalleryPhoto = (MyGalleryPhoto *) [localContext existingObjectWithID: myGalleryPhoto.objectID error: &error];

        NSLog(@"error: %@:%@", [error localizedDescription], [error userInfo]);
        NSLog(@"mygp: %@", [localMyGalleryPhoto description]);

        [localMyGalleryPhoto deleteInContext: localContext];
    }

} completion:^(void){
}]; 
```

此代码不起作用。找不到 myGalleryPhoto 条目，返回的错误是：“操作无法完成。（Cocoa 错误 133000。）”我也尝试使用 MR_inContext，它只调用 existingObjectWithId:error:。

经过一番折腾，我想出了这个邪恶的科学怪人的怪物，它从实体中获取所有记录并比较 ObjectID 的字符串表示形式。这工作正常。为什么？我正在使用我今天从 GitHub 下载的 MagicalRecord 副本、最新的 XCode、最新的 SDK 等等。

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {

    NSArray *allMyGalleryPhotos = [MyGalleryPhoto findAllInContext: localContext];

    for (MyGalleryPhoto *myGalleryPhoto in [self.fetchedResultsController.fetchedObjects objectsAtIndexes: self.selectedIndexes]) {

        MyGalleryPhoto *myGalleryPhotoToDelete = nil;

        for (MyGalleryPhoto *existingMyGalleryPhoto in allMyGalleryPhotos) {

            NSString *existingURLString = [[existingMyGalleryPhoto.objectID URIRepresentation] absoluteString];
            NSString *URLString = [[myGalleryPhoto.objectID URIRepresentation] absoluteString];

            NSLog(@"ExistingURLString: %@", existingURLString);
            NSLog(@"URLString: %@", URLString);

            if ([URLString isEqualToString: existingURLString]) {
                myGalleryPhotoToDelete = existingMyGalleryPhoto;
            }
        }

        if (myGalleryPhotoToDelete) [myGalleryPhotoToDelete deleteInContext: localContext];

    }

} completion:^(void){
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:37:38.120

Cocoa Error 13000 是参照完整性错误，如[文档中所述](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSManagedObjectReferentialIntegrityError)。这意味着您正在寻找商店中不存在的对象。在更实际的层面上，这意味着您的上下文（我假设您有多个托管对象上下文）不同步。也就是说，您已将一个新对象添加到一个上下文中，而另一个没有该对象，因为之前的上下文尚未保存。

关于您的代码，我在第一个示例中看到的第一个问题是您从一开始就跨越了线程边界。fetchedResultsController 引用了另一个上下文中的对象（我将假设默认上下文）。每次调用 saveInBackground 时，它都会为您提供一个新的上下文来使用，但它也会将该代码块放在后台线程上。跨越线程边界，即使在新版本的 Core Data 中，也会让你发疯，难以随机追踪问题。

如果您在第一个（更简单的）代码块中尝试做的事情是您有一组要从应用程序中删除的照片对象，那么要点是。我会做这样的事情：

```
NSPredicate *objectsToDelete = [NSPredicate predicateWithFormat:@"self in %@", self.fetchedResultsController.fetchedObjects];

[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *)localContext
{
     [MyGalleryPhoto deleteAllMatchingPredicate:objectsToDelete inContext:localContext];
}]; 
```

deleteAllMatchingPredicate 方法应该在正确的上下文中查找对象（您在第一个代码块中没有这样做），以便可以删除它们。它还将对象设置为错误加载，因此我们不会将所有内容加载到内存中，只会立即删除它。它只会加载它需要的东西，而不是更多。

在这种情况下，我不会使用 existingObjectWithID:。此方法从不加载故障。您的用例意味着它将整个对象加载到内存中，但无论如何都要删除它。

# php - 按最近日期选择

> ID：11270313
> 
> 赞同：-1
> 
> 时间：2012-06-29T23:54:20.290
> 
> 标签：php, mysql

我需要选择固定帖子 ID、按用户 ID 分组和最新日期的语句。这是我所拥有的：

```
$bids = "SELECT uid, Max(date_made), bid FROM ".$wpdb->prefix."auction_bids WHERE pid=$pid GROUP BY uid"; 
```

在这个查询中，只有日期有问题，它返回第一个结果，但我需要最后一个。这是我的数据库的屏幕： ![BD](../Images/f5f51594e874b824a2a64c3c1710fda2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T23:57:46.070

您需要获得[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT uid, date_made, bid
FROM   ${wpdb->prefix}auction_bids NATURAL JOIN (
  SELECT   uid, MAX(date_made) AS date_made
  FROM     ${wpdb->prefix}auction_bids
  WHERE    pid = $pid
  GROUP BY uid
) AS t
WHERE  pid = $pid 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/abd79/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:58:03.833

使用 min 而不是 max 并获取 id，然后加入：

```
$bids = "SELECT ss.uid, ss.min, b.bid FROM ".$wpdb->prefix."auction_bids bid INNER JOIN (SELECT uid, MIN(date_made) as min FROM ".$wpdb->prefix."auction_bids WHERE pid=$pid GROUP BY uid) ss ON ss.uid = bid.uid"; 
```

不清楚你想从你的英语中得到什么。对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:06:05.510

试试这个

```
"SELECT pre.uid, pre.date_made, pre.bid
FROM ".$wpdb->prefix." AS pre
WHERE pre.pid = $pid AND date_made = 
    (SELECT MAX(pre2.date_made) FROM ".$wpdb->prefix." AS pre2 
    WHERE pre2.uid = pre.uid)
GROUP BY pre.uid"; 
```

有点复杂但高效。类似于[eggyal](https://stackoverflow.com/users/623041/eggyal)的答案，但我使用的是 theta 风格的编码，因此很容易理解。

# ruby-on-rails - Ajax 更新整列时应该更新一个表格单元格

> ID：11270318
> 
> 赞同：0
> 
> 时间：2012-06-29T23:55:13.133
> 
> 标签：ruby-on-rails, ajax, jquery

我正在使用带有upvote 按钮的AJAX。当用户单击“UpVote”按钮时，应提交其表单并应显示禁用的按钮“Upvoted”。

现在upvoting工作，但是当它改变列中的每个'UpVote'按钮都被upvoted，然后在页面上重新加载没有upvote的按钮返回'UpVote'按钮。（奇怪）：

```
<% @master_songs.each do |master_song| %>
    <td><div id="upvote-form">
          <% unless current_user.up_voted_song?(master_song) %>
              <%= render 'upvote', :master_song => master_song %>
          <% else %>
              <%= render 'upvoted' %>
          <% end %>
        </div></td>
  <% end %> 
```

song_up_votes.js.erb 是这样的：

```
$("div#upvote-form").html("<%= escape_javascript(render('fan_bases/upvoted')) %>") 
```

并且应该将上述 div 更改为单行而不是整列。

我怎样才能解决这个问题？非常感谢任何提示/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:44:51.573

看起来您所有的 div 都具有相同的“upvote-form”ID。因此选择器“div#upvote-form”选择了所有的upvote btns 进行替换。给每个 div 一个唯一的 id，这应该可以解决您的问题。

# recursion - 一个插入杀死了流口水中的递归

> ID：11270326
> 
> 赞同：0
> 
> 时间：2012-06-29T23:57:32.693
> 
> 标签：recursion, insert, drools

这与我之前的问题有关。如果我没有`insert`，它会按预期进入递归循环。但如果我确实有`insert`程序结束。我在这里想念什么？

```
rule "Recurse"
    when
        f : Fibonacci(value == 0)
        not Fibonacci(sequence == 0)
    then
        System.out.println(f.sequence + "/" + f.value);
        insert(new Fibonacci(f.sequence - 1));
        f.value = 0;
        update(f);
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:45:46.967

为了解释这个例子，我们假设：

*   系统中只有一个规则
*   提供给规则引擎的初始事实集满足该规则中的条件
*   该序列是一个正整数值

首先，我们考虑插入被注释掉的情况：

我们知道工作内存至少包含一个值 == 0 的对象，并且没有序列 == 0 的对象。（我发现更详细的形式 not 稍微更易读，您可以替换 not Fibonacci (.. .) 与 not ( 存在 Fibonacci(...)))。请注意，如果有一个对象同时满足这两个条件，则该规则是有效的。

结果将对象的值设置为零并通知引擎该对象已更改。然后遇到无限循环，因为系统中没有序列 == 0 的对象，我们已将值设置为该对象将触发规则触发。

现在，让我们考虑插入未注释的情况：

我们已经知道，最初的事实集至少会触发一次规则。结果是现在一个对象被放置在具有递减序列的工作内存中，并且 f 引用的对象的值设置为零（它没有从零更改）并更新。有一种机制可以满足结束条件，因为现在，在某些时候将插入一个具有零序列的对象。即满足结束条件。

简而言之：当存在序列为零的斐波那契对象时，引擎将退出。

我，err..，认为这个系统在输出斐波那契数列之前可能需要一些改变。您需要一种方法来引用前两个斐波那契数字来评估正在设置的数字，递归方法更加优雅；）

# ruby-on-rails - 如何让多态模型的部分与同一页面上的不同事物相关联

> ID：11270327
> 
> 赞同：1
> 
> 时间：2012-06-29T23:57:35.860
> 
> 标签：ruby-on-rails

本质上，我有一个喜欢/不喜欢的二元投票系统。你的类被称为`Like`它与**likeable**具有多态关联：

```
class Like < ActiveRecord::Base
     belongs_to :likeable, polymorphic: true
end 
```

我们有这个类`Comment`，它也有可**评论**的多态关联，并且可以被喜欢

```
class Comment < ActiveRecord::Base
     belongs_to :commentable, polymorphic: true
     has_many :likes, :as :likeable
end 
```

我们有课`Section`，也可以点赞和评论

```
class Section < ActiveRecord::Base
    has_many :likes, as: :likeable
    has_many :comments, as: commentable
end 
```

但是，在页面上，`section#show`我显示部分信息，部分喜欢，然后是评论（来自`comments/comments`部分）。这是`Section#show`视图：

```
<h1><%= exercise.name %></h1>
<p><%= exercise.description %></p>
<%= render 'likes/like_button' %>
<%= render 'comments/comments' %>
<%= render 'comments/comment_form' %> 
```

但是，我希望能够对每条评论进行投票。

以下代码来自`_comments.html.erb`- 当前不起作用的是渲染，`_like_button.html.erb`因为它不适用于手头的评论。

```
<% @comments.each do |comment| %>
    <%= comment.content %>
    <%= render 'likes/like_button' %>
<hr />
<% end %> 
```

这是`_like_button.html.erb`部分

```
<% if @like.nil? %>
    <%# No record of Like in table %>
    <%= form_for [@likeable, Like.new] do |f| %>
    <%= f.submit "Like" %>
    <%= f.submit "Dislike" %>
    <% end %>
<% else %>
    <%# Marks current chosen option, if the opposite option is chosen, the record is updated to reflect the descion by the user %>
    <%= form_for [@likeable, @like] do |f| %>
        <% if @like.is_liked %>
            Currently Liked!
            <%= f.submit "Dislike" %>
        <% else %>
            <%= f.submit "Like" %>
            Currently Disliked!
        <% end %>
    <% end %>
<% end %> 
```

所以最终，我只是想知道如何使从`Section#show`视图中对评论进行投票成为可能谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:29:44.077

试试这个：

```
<% @comments.each do |comment| %>
    <%= comment.content %>
    <%= render 'likes/like_button', :like => comment.like, :likeable => comment %>
<hr />
<% end %>

<% if like.nil? %>
    <%# No record of Like in table %>
    <%= form_for [likeable, Like.new] do |f| %>
    <%= f.submit "Like" %>
    <%= f.submit "Dislike" %>
    <% end %>
<% else %>
    <%# Marks current chosen option, if the opposite option is chosen, the record is updated to reflect the descion by the user %>
    <%= form_for [likeable, like] do |f| %>
        <% if like.is_liked %>
            Currently Liked!
            <%= f.submit "Dislike" %>
        <% else %>
            <%= f.submit "Like" %>
            Currently Disliked!
        <% end %>
    <% end %>
<% end %> 
```

# javascript - 将所有请求的元素设为此类名称

> ID：11270332
> 
> 赞同：-1
> 
> 时间：2012-06-29T23:58:20.240
> 
> 标签：javascript, jquery, css

```
$("td").className=''; 
```

尝试做这样的事情，它使所有`<TD>`元素成为请求的 css 类。我什至不知道这是否是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:00:46.253

你想使用[`addClass()`](http://api.jquery.com/addClass/)：

```
$('td').addClass('yourClassName'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T00:13:34.287

或者你可以使用[`attr()`](http://api.jquery.com/attr/).

```
$('td').attr('class', 'className'); 
```

# php - 将数组插入mysql

> ID：11270334
> 
> 赞同：0
> 
> 时间：2012-06-29T23:58:40.657
> 
> 标签：php, sql

我的数组像这样显示，但我似乎无法将它保存到数据库中。因此，当我`var_dump($result);`在 $result 是我的数组时这样做时，会显示以下内容

```
array
0 => 
array
  'Credit Weighting' => string '5' (length=1)
  'Teaching Period(s)' => string 'Teaching Periods 1 and 2.' (length=25)
  'No. of Students' => string '-.' (length=2)
1 => 
array
  'Credit Weighting' => string '5' (length=1)
  'Teaching Period(s)' => string 'Teaching Periods 1 and 2.' (length=25)
  'No. of Students' => string '-.' (length=2)
2 => 
array
  'Credit Weighting' => string '10' (length=2)
  'Teaching Period(s)' => string 'Teaching Periods 1 and 2.' (length=25)
  'No. of Students' => string '-.' (length=2) 
```

下面是我的 PDO 查询，用于将上述内容保存到 mysql 中，但没有发生任何事情。请问我做错了什么？

```
$result = array();  
$placeholder = array();
$values = "?, ?, ?";
foreach ($result as $array){
$placeholder[] = $value;

        $result[] = $array['CreditWeighting'];
        $result[] = $array['TeachingPeriod'];
        $result[] = $array['NoofStudents'];         
} 

$sql = "INSERT INTO data_array_copy (CreditWeighting,TeachingPeriod,NoofStudents)
                             VALUES (". implode('), (', $placeholder) . ")"; 
$stmt = $conn->prepare($sql);
$stmt->execute($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:20:42.883

尝试这个：

```
<?php 
//If your array is:
/*
$result = array(0=>array('Credit Weighting'=>'5',
                         'Teaching Period(s)'=>'Teaching Periods 1 and 2.',
                         'No. of Students'=> '-.'),
                1=>array('Credit Weighting'=>'5',
                         'Teaching Period(s)'=>'Teaching Periods 1 and 2.',
                         'No. of Students'=> '-.'),
                2=>array('Credit Weighting'=>'10',
                         'Teaching Period(s)'=>'Teaching Periods 1 and 2.',
                         'No. of Students'=> '-.'));
*/
//The query
$sql = "INSERT INTO data_array_copy (CreditWeighting,TeachingPeriod,NoofStudents)
               VALUES (?,?,?)"; 
//Prepare the query
$stmt = $conn->prepare($sql);

//Loop through the $result array
foreach ($result as $array){
    //Bind and execute the values to the prepared query
    $stmt->bindParam(1, $array['Credit Weighting']);
    $stmt->bindParam(2, $array['Teaching Period(s)']);
    $stmt->bindParam(3, $array['No. of Students']);
    $stmt->execute($result);
}
?> 
```

[在http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)上还有其他绑定参数的方法，但在您熟悉其细节之前，使其尽可能易读。通过这种方式，您或其他开发人员可以在没有 var_dump'ing 数组获取键名等情况下看到发生了什么。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T01:51:22.087

好的，以防万一有人可能需要知道可以做到这一点的更简单方法。这是运行良好的解决方案。

```
$result = array();  
foreach($result as $snode) { 

 foreach($snode as $key => &$val) {
  $val = mysql_real_escape_string($val);      
 }

$query = sprintf("INSERT INTO data_array_copy (
        CreditWeighting,
        TeachingPeriod,
        NoofStudents) 
                    VALUES ('%s')",implode("','",$snode));

mysql_query($query) or die (mysql_error());
echo $query. '<br />'; 
} 
```

这很好用！

# objective-c - 使用 UIImagePickerController 获取图像——如何知道是保存 PNG 还是 JPEG？

> ID：11270335
> 
> 赞同：6
> 
> 时间：2012-06-29T23:58:42.663
> 
> 标签：objective-c, ios, uiimage, uiimagepickercontroller

我`UIImagePickerController`让用户从图像库中选择图像，并通过该`didFinishPickingMediaWithInfo`方法获得结果。

我需要能够将生成的图像保存到磁盘（在应用程序的文档文件夹中），然后再重新加载。

问题是我不知道是将其存储为 PNG 还是 JPEG。我不能总是将它存储为 PNG，因为对于较大的照片，它非常慢（更不用说我必须单独处理存储图像方向）。我不能总是将它存储为 JPEG，因为在某些情况下图像具有透明度，如果我这样做会丢失。

我检查了`UIImagePickerControllerMediaType`图像选择器返回的信息字典中的键，无论我选择的是 PNG 还是 JPEG，返回的是`"image.public"`.

所以...

有什么方法可以知道用户是否选择了 PNG？也许某种方法只是检查图像是否有任何透明度或其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T02:59:58.233

好的，所以我想通了。这可能不适用于每种情况，但对我来说已经足够了：

```
 CGImageAlphaInfo imgAlpha = CGImageGetAlphaInfo(theImage.CGImage);

    // Is this an image with transparency (i.e. do we need to save as PNG?)
    if ((imgAlpha == kCGImageAlphaNone) || (imgAlpha == kCGImageAlphaNoneSkipFirst) || (imgAlpha == kCGImageAlphaNoneSkipLast)) {
         // save as a JPEG
    } else {
         // save as a PNG
    } 
```

...当然，您需要记住您保存的图像类型，为其提供适当的文件扩展名，然后将正确的文件重新加载...但基本上这可以解决。具有透明度的图像将保存为 PNG，其他一切都保存为 JPEG。

如果有人有更好的方法，我很想听听。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:31:20.167

在字典中，键 UIImagePickerControllerReferenceURL 将为您提供有关类型的信息

(gdb) 邮政信息

```
{
    UIImagePickerControllerMediaType = "public.image";
    UIImagePickerControllerOriginalImage = "<UIImage: 0x5cfd00>";
    UIImagePickerControllerReferenceURL = "assets-library://asset/asset.JPG?id=EFC44C3C-9C82-4669-924B-A2B9DE6F1F45&ext=JPG";
} 
```

在这种情况下，它是一个 jpg，如 ext=JPG 所示

# php - 组织文件的最佳方式是什么？

> ID：11270341
> 
> 赞同：0
> 
> 时间：2012-06-30T00:00:14.023
> 
> 标签：php, mysqli

我正在学习...我已经阅读了[http://www.w3schools.com](http://www.w3schools.com)上的教程，浏览了 www.php.net 上的手册，并且对一切工作原理有了很好的理解。但是我对如何构建我的页面感到困惑。哪些内容应该放在同一个页面上，哪些内容应该有自己的页面并且只包含/需要？

我仍然需要阅读的一件事是参数化，所以不要在这方面打败我......但是。

这是我所拥有的：

a.php 这是用户在输入 www.mydomain.com/a.php 时看到的页面

```
<html>
<body>

<?php require("b.php"); ?>
// this requires that the page gets b.php and puts it here

<p>Name: <?php echo $row['firstname']; ?></p>
<p>Last Name: <?php echo $row['lastname']; ?></p>

</body>
</html> 
```

b.php 此页面包含/需要在 a.php 中

```
<?php

require("../dbunamepword.php");
// this connects to my database

$query = ("SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC"); 
$result = $mysqli->query($query) or die ("Error: ".mysqli_error($mysqli));
while ($row = $result->fetch_array()) {
// this fetches the data I want from the table in my db while all cases match above

$firstname = $row ['firstname'];     
$lastname = $row['lastname'];
// these are the rows in the table I want to fetch 

echo "First Name: " . $firstname . " " .$lastname ."<br />";
// this is how I want the data presented

}
?> 
```

这是我的问题提前谢谢你：

1) 在构建这些页面时，使用函数对我有什么好处，或者它们对我没有好处？

2) 我不能省略`echo`b.php 上的行，然后像下面那样调用 a.php 中的行并输入一个`foreach`语句吗？我实际上对此进行了测试，并且一直收到意外的 $end 错误，所以我不确定这是否不是一个好方法或者我做错了什么？

```
<html>
<body>

<?php require("b.php"); ?>
// this requires that the page gets b.php and puts it here

<p>Name: <?php echo $firstname; ?></p>
<p>Last Name: <?php echo $lastname; ?></p>

</body>
</html> 
```

3) 假设我添加了一些 if/else 语句，如下所示，我应该将它们放在 b.php 中还是将它们放在它们自己的文件 c.php 中，然后在 b.php 中添加一个包含？

```
if(isset($_GET['leadstatus']) && $_GET['leadstatus'] == "All")
{
$query = "SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') ORDER BY contacts.date DESC";  
}
elseif (in_array($_GET['leadstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed')))
{  
$status = $_GET['leadstatus'];   
$query = "SELECT * FROM contacts WHERE leadstatus = '".$status."' AND contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') ORDER BY contacts.date DESC";
} 
```

4）在我`$query`有`SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor')`而不是在每个 if/else 语句中输入它，或者说我需要添加另一个字段，例如“Renter”，我可以做类似的事情：

```
$type = ('Buyer','Seller','Buyer / Seller','Investor')

$query = ("SELECT * FROM contacts WHERE contacttype = $type AND leadstatus = 'New' ORDER BY date DESC"); 

if (($_GET['date'] == 'today'))
{     
$$query = "SELECT * FROM contacts WHERE contacttype = $type AND date = DATE(NOW()) ORDER BY date DESC";
}

if (($_GET['date'] == 'thisweek'))
{     
$thisweek = date('Y-m-d', strtotime('last sunday'));
$query = "SELECT * FROM contacts WHERE contacttype = $type AND date BETWEEN '$thisweek' AND '$thisweek' + INTERVAL 7 DAY ORDER BY date DESC";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:36:34.817

我建议您开始使用微框架来帮助您组织代码。我更喜欢[Silex](http://silex.sensiolabs.org/)，因为它促进/鼓励良好的编程习惯/实践，并且随着项目的增长，您可以无缝地发展到更全栈的[Symfony](http://symfony.com)世界。

您**不需要**框架，但我相信它们可以帮助您学习组织任何代码库的最佳实践，即使您决定不将其用于某些项目。

# android - 在 Android 上检测有缺陷的 GLSL 实现

> ID：11270343
> 
> 赞同：0
> 
> 时间：2012-06-30T00:00:32.323
> 
> 标签：android, opengl-es, glsl

我的顶点着色器有问题。如图所示，在输出倾斜的图像中。

在我的 Galaxy S (2.3.6/Gingerbread) 上，它是倾斜的。在我妈妈的 Iconia 上，效果很好。我需要能够检测到错误的实现。我正在考虑将此图像渲染到缓冲区并检查是否正确渲染。我认为最好的检测方法是什么？

我已经为这些顶点着色，以便 red=x、green=y 和 blue=z 从范围 [-1, 1] 转换为 [0, 1]。这样我就可以看到顶点是从哪里转换的。 ![顶点着色器图像](../Images/732babec3e5e0e6fa70e17d86e56a226.png)

接下来是使用 OpenGLES 1.0 渲染的同一项目的图像。这个应用了纹理，因为像第一张图像一样着色它需要更多的努力。如您所见，看起来是正确的。 ![在此处输入图像描述](../Images/0d72a0162bd90841388e2378b710149d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:18:17.377

好吧，这就是我解决它的方法：

我创建了函数

```
mat4 mmult(mat4 a, mat4 b){
    return a*b;
} 
```

然后改了：

```
current *= animMatrix; 
```

到：

```
current = mmult(current, animMatrix); 
```

它奏效了。

也试过这个：

```
current = current * animMatrix; 
```

但它也返回了错误的图像。

我对此没有合乎逻辑的解释，但这似乎是解决办法。任何关于为什么的评论将不胜感激。

# jquery - jQuery: 任何滑块 - 具有不同 CSS 样式的多个滑块

> ID：11270344
> 
> 赞同：2
> 
> 时间：2012-06-30T00:00:34.260
> 
> 标签：jquery, css, anythingslider

我正在尝试在一页上使用 3 个任何滑块的实例，但是我在设置每个滑块的样式时遇到了问题。

滑块的 ID 为：slider1、slider2 和 slider3

因此，当我尝试以不同的方式设置 slider2 的一部分时，例如：

```
#slider2 .anythingSlider-default.activeSlider .anythingWindow {} 
```

它不起作用。关于如何实现这一目标的任何想法？提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:20:28.093

希望我在[csstricks 论坛](http://css-tricks.com/forums/discussion/18322/multiple-anything-slider-styling-on-one-page)中充分回答了您的问题。为了完整起见，这又是一次：

> 当前版本的 AnythingSlider 有一个`theme`选项，允许您更改页面上每个滑块的样式。然后对于 css，只需将该主题名称添加到外包装：
> 
> ```
> .anythingSlider-theme1 {}
> .anythingSlider-theme1.activeSlider {}
> .anythingSlider-theme1.activeSlider .anythingWindow {}
> .anythingSlider-theme2 {}
> .anythingSlider-theme2.activeSlider {} 
> ```
> 
> ETC...
> 
> 您无法定位`#slider2`ID，因为它位于`.anythingWindow`

# xcode - NSTimer 停止时显示 UILabel 和 UIImageView

> ID：11270349
> 
> 赞同：0
> 
> 时间：2012-06-30T00:01:22.633
> 
> 标签：xcode, uiimageview, uibutton, uilabel, nstimer

在我的应用程序项目中，我希望能够点击一个按钮，等待 5 秒钟，然后出现 UILabel 和 UIImageView。这是我到目前为止所拥有的：

```
- (IBAction)startTimer
{
    responseBox.placeholder = @"Message Here";
    timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(timerStop) userInfo:nil repeats:YES];
    mainInt +=1;
}

- (void)timerStop
{
    if (mainInt == 5)
    {
        [timer invalidate];
        titleLabel.hidden = NO;
        messageLabel.hidden = NO;
        messageLabel.text = @"Message";
        image.hidden = NO;
    }
} 
```

一切都正确链接，发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:09:46.710

`mainInt`仅在您按下按钮时才会增加`startTimer`，所以您在`timerStop`. 此外，如果您想`mainInt`正确递增，请使用**`mainInt++;`**

试试这个：

```
- (IBAction)startTimer
{
    responseBox.placeholder = @"Message Here";
    timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(timerStop) userInfo:nil repeats:YES];
    mainInt++;
}

- (void)timerStop
{
    [timer invalidate];
    titleLabel.hidden = NO;
    messageLabel.hidden = NO;
    messageLabel.text = @"Message";
    image.hidden = NO;
} 
```

# c++ - 如何将 opencv 图像（IplImage）写入 V4L2 环回设备？

> ID：11270360
> 
> 赞同：2
> 
> 时间：2012-06-30T00:03:20.553
> 
> 标签：c++, c, linux, opencv, v4l2

正如标题所说，我不确定如何将 IplImage 写入 V4l2 环回设备。我知道如何写入设备，正如我在此处发布的[如何写入/管道到由 V4L2loopback 模块创建的虚拟网络摄像头？](https://stackoverflow.com/questions/11067588/how-to-write-pipe-to-a-virtual-webcam-created-by-v4l2loopback-module/11215769#11215769)

但现在我不确定如何将 IplImage 对象准确写入设备。如果我只写 image->imageData，其中图像是 IplImage*，当我使用“luvcview”查看设备时，格式错误的帧会显示大约一秒钟，然后它会引发以下错误。

```
luvcview 0.2.6

SDL information:
  Video driver: x11
  A window manager is available
Device information:
 Device path:  /dev/video3
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
  Frame size:   520x474 (requested size 640x480 is not supported by device)
  Frame rate:   30 fps
libv4l2: error dequeuing buf: Invalid argument
Unable to dequeue buffer: Invalid argument
Error grabbing
Cleanup done. Exiting ... 
```

可能是因为我没有将opencv图像转换为v4l2格式吗？还是 v4l2 参数与 IplImage 属性不匹配？如果有怎么办？

如果有人知道这个错误是什么意思，请告诉我。

我决定单独发布这个问题，因为这个问题不是关于写入设备，特别是关于将 IplImage 写入设备。

谁能给我一个代码片段，显示如何将 IplImage 写入 V4l2 环回设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:21:52.513

我发现上述问题不再是问题，因为 luvcview 或 skype 似乎不完全支持 v4l2。但如果我使用 VLC 播放器查看环回设备，它工作正常。

# git - Github 要求输入用户名和密码/安装错误

> ID：11270361
> 
> 赞同：1
> 
> 时间：2012-06-30T00:03:29.143
> 
> 标签：git, github, github-for-windows

大约一个月前，我决定学习如何使用 github，并且完成了 windows 的整个设置过程。我记得它相当长，但在第一天之后我就停止了使用它。我完全忘记了我从哪里开始做 github 项目（我的意思是我开始做所有事情的目录），我想重新完全理解 github，因为我想下载某人的项目。

我今天继续创建另一个 repo，并成功设置它，并从我放在 Windows 上的“我的文档”目录中的测试项目中添加了一个新的 README 文件。每次我使用`git push -u origin master`它推送我的最新提交时，都会询问我的用户名和密码。有没有办法阻止这种情况？我想我已经设置好不再问我了，但那是在我从 github 开始的第一个目录中。

还是我应该尝试找出我最初从哪里开始 github 并通过那里完成所有事情？

如果我的问题含糊不清，请告诉我。这让我花了很长时间才理解，我只是想确保我以正确的方式做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:08:39.300

如果您在 github 上创建了一个 repo，然后转到该 repo，您​​将看到它的 http 和 ssh 地址。用来自 github 的 ssh 地址替换本地 repo 上的当前远程。在推送时添加此 ssh 远程地址后，您无需输入信息。

当您访问 github 时，在存储库列表下，您将看到您正在处理的存储库。如果您单击它，它将打开存储库，您将看到您的文件及其所有信息。在文件上方的中间，您有存储库的 http 和 ssh 地址。您的本地项目正在使用远程的 http 地址（远程只是推送文件的位置）。如果您使用来自 github 的 ssh 地址并用新的 ssh 地址替换您当前的远程。推送到 ssh 地址后，github 不会返回说输入您的用户名和密码，这是一种更安全的推送方式。

git remote rm origin // 远程远程调用 origin

git remote add origin github ssh address goes here // 添加一个带有 ssh 地址的源远程

git push origin master // 推送到 master

# java - Apache Jena 的*一切都是接口，如果可能*设计理念背后的基本原理是什么？

> ID：11270369
> 
> 赞同：3
> 
> 时间：2012-06-30T00:05:27.607
> 
> 标签：java, design-patterns, jena

如果您熟悉[Java RDF 和 OWL 引擎 Jena](http://jena.apache.org/)，那么您已经了解了他们的理念，即尽可能将所有内容指定为接口。这意味着*Resource*、*Statement*、*RDFNode*、*Property*，甚至 RDF *Model*等，与您可能首先想到的相反，是*接口*而不是具体的类。

这导致经常使用工厂。由于您无法实例化*Property*或*Model*，您必须使用其他东西来为您做这件事——[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。

*那么，我的问题是，考虑到图书馆旨在服务的内容的性质，*使用这种模式而不是传统的类层次系统背后的原因是什么？使用其中任何一个通常都是完全可行的。例如，如果我想要一个内存支持的*模型*而不是数据库支持的*模型*，我可以只实例化这些类，我不需要让工厂给我一个。

* * *

顺便说一句，我正在编写一个用于处理[Pearltrees](http://www.pearltrees.com)数据的库，该库以 RDF/XML 文档的形式从他们的网站导出。在我编写这个库时，我有很多选项来定义 Peartrees 数据中存在的关系。Pearltrees 数据的好处在于它有一个非常合乎逻辑的类系统：一棵树由珍珠组成，珍珠可以是 Page、Reference、Alias 或 Root 珍珠。

我的问题来自于试图弄清楚我是否应该在使用 Jena 的图书馆中采用 Jena 哲学，或者我是否应该忽略它，选择我自己的设计哲学并坚持下去。

# sql - 理解 SSMS 2012 中的“OFFSET/FETCH”

> ID：11270373
> 
> 赞同：1
> 
> 时间：2012-06-30T00:06:13.953
> 
> 标签：sql, sql-order-by, fetch, offset, sql-server-2012

今天刚刚安装了 Microsoft SQL Server Management Studio 2012。在熟悉 ORDER BY 的分页功能时，我一直遇到这个错误：

> 消息 102，级别 15，状态 1，第 5 行
> 'OFFSET' 附近的语法不正确。
> 消息 153，级别 15，状态 2，第 6 行
> FETCH 语句中选项 NEXT 的使用无效。

这是我的查询：

```
 SELECT SingleWomansName, NumberOfCats
    FROM CatLadies
    WHERE NumberOfCats > 1
    ORDER BY NumberOfCats
    OFFSET 10 ROWS
    FETCH NEXT 5 ROWS ONLY 
```

我已经看过很多具有类似语法的操作指南文章。是什么赋予了？

[http://msdn.microsoft.com/en-us/library/gg699618.aspx](http://msdn.microsoft.com/en-us/library/gg699618.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:15:20.793

您确定您已连接到 SQL Server 2012 数据库吗？以下作品：

```
Select Name, CatCount
From CatLadies
Order By Name
Offset 2 Rows 
Fetch Next 2 Rows Only 
```

[SQL 小提琴版本](http://www.sqlfiddle.com/#!6/10e8f/1)

当我切换到 SQL Server 2008 时，我确实收到了您看到的错误

[使用 SQL Server 2008 的 SQL Fiddle](http://www.sqlfiddle.com/#!3/10e8f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:04:26.057

Make sure your database compatibility level is set to SQL Server 2012 (110).

# wpf - MVVM 最佳实践与保持简单

> ID：11270375
> 
> 赞同：1
> 
> 时间：2012-06-30T00:07:15.157
> 
> 标签：wpf, mvvm

下面的第一个代码部分是我很想写的代码。下面的第二个代码部分是以前的代码工作者在尝试完成相同任务时编写的。

之前同事的代码似乎遵循标准的 MVVM 实践，即为每种类型的项目设置单独的 ViewModel，跟踪 ViewModel 中的 SelectedItems 而不是视图，以及避免模型中的 ObservableCollection。

我很想写的代码的大小和复杂度只有一半左右，模型和 ViewModel 不同步的可能性更小，代码行数也少得多。

MVVM 最佳实践真的是正确的答案吗？是否有某种中间立场结合了两个版本的优点？

我的代码：

```
//Model

public class Cheese
{
    public string Name { get; set; }
    public int Tastiness { get; set; }
    public Color Color { get; set; }
}

public class CheeseEditorModel
{
    public ObservableCollection<Cheese> Cheeses { get; private set; }

    public CheeseEditorModel()
    {
        //read cheeses in from file/database/whatever
    }

    public DeleteCheeses(SelectedObjectCollection selected)
    {
        //delete cheeses
    }
}

//ViewModel

public class CheeseEditorViewModel
{
    private CheeseEditorModel _model;
    public ObservableCollection<Cheese> Cheeses { get {return _model.Cheeses} }

    public CheeseEditorViewModel()
    {
        _model = new CheeseEditorModel();
    }

    public DeleteSelected(SelectedObjectCollection selected)
    {
        _model.Delete(selected);
    }
}

//XAML

<ListBox Name="CheeseListBox" ItemsSource={Binding Path="Cheeses"} />
<Button Command={Binding DeleteSelected} CommandParameter="{Binding ElementName=CheeseListBox, Path=SelectedItems}" /> 
```

别人的代码：

```
//Model

public class Cheese
{
    public string Name { get; set; }
    public int Tastiness { get; set; }
    public Color Color { get; set; }
}

public class CheeseEditorModel
{
    public List<Cheese> Cheeses { get; private set; }

    public CheeseDataModel()
    {
        //read cheeses in from file/database/whatever
    }

    public DeleteCheeses(IEnumerable<Cheese> toDelete)
    {
        //delete cheeses
    }
}

//ViewModel

public class CheeseViewModel
{
    private Cheese _cheese { get; set; }
    public bool IsSelected { get; set; }

    public CheeseViewModel(Cheese cheese)
    {
        _cheese = cheese;
        IsSelected = false;
    }

    public string Name {get {return _cheese.Name} set { _cheese.Name = value } }
    public int Tastiness {get {return _cheese.Tastiness} set { _cheese.Tastiness= value } }
    public Color Color {get {return _cheese.Color} set { _cheese.Color = value } }
}

public class CheeseEditorViewModel
{
    private CheeseEditorModel _model;
    public ObservableCollection<CheeseViewModel> Cheeses { get; private set; }

    public CheeseEditorViewModel()
    {
        _model = new CheeseEditorModel();
        foreach (cheese in _model.Cheeses)
            Cheeses.Add(cheese);
    }

    public DeleteSelected()
    {
        var selected = from cheese in Cheeses select cheese.CheeseModel where cheese.IsSelected();
        _model.Delete(selected);
        var selectedVM = from cheese in Cheeses select cheese where cheese.IsSelected();
        foreach (cheese in selectedVM)
            Cheeses.Remove(selected);
    }
}

//XAML

<ListBox ItemsSource={Binding Path="Cheeses"}>
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}"/>
    </Style>
</ListBox.ItemContainerStyle>
</ListBox>
<Button Command={Binding DeleteSelected} /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:39:41.307

Cheese 是否实施 INotifyPropertyChanged？如果是，为什么？但尽管如此，我还是使用了其他人的代码。您可以轻松添加新的非模型相关的东西

# bash - 如何在比赛前打印所有内容？

> ID：11270381
> 
> 赞同：3
> 
> 时间：2012-06-30T00:08:00.657
> 
> 标签：bash, awk

我正在尝试使用 awk match() 和 substr 在匹配发生之前打印所有内容。我在 bash 脚本中使用 awk 从文件名中提取字符串，并尝试了以下操作：

```
awk 'match($0,".S") {print substr($0, RSTART+1, 3)}' 
```

这给了我 3 个字符，*S*加上它后面的 2 个字符。

但是，我想要的是在比赛前打印所有内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:03:43.573

只是一个小的重新排列：

```
awk 'match($0, "\.S") {print substr($0, 1, RSTART + 3)}' 
```

这告诉 AWK 从第一个字符开始打印，通过“S”和接下来的两个字符。

要获得相同的结果`sed`：

简单版本（“.S”只能出现一次：

```
sed 's/\(.*\.S..\).*/\1/' 
```

如果 ".S" 可以出现多次，则此版本给出与 AWK 版本相同的结果（仅保留第一个 ".S" 及其后面的两个字符）：

```
sed 's/\.S../&\n/; s/\n.*//' 
```

**编辑：**

```
perl -nle 'print "$`$&" if /\.S../' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:28:14.280

这应该适合你。

```
awk '{i = index($0, ".S"); if (i>0) print substr($0, 0, i+5)}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T00:36:50.357

我宁愿使用：

```
sed 's/.S.*//' 
```

# symfony1 - 设置环境变量“KERNEL_DIR” symfony phpunit

> ID：11270382
> 
> 赞同：0
> 
> 时间：2012-06-30T00:08:07.230
> 
> 标签：symfony1, phpunit

在不同的目录中运行一些 PHPUnit 测试时遇到了一些问题。

我四处搜寻；答案是我必须更改环境变量`KERNEL_DIR`。

知道如何更改此变量吗？

基于什么样的模式，是所在的文件夹`HTTPKernel.php`或其他一些文件所在的位置。

是指定新文件夹中的路径还是原始文件夹的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:17:35.230

如[文档](http://www.phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.php-ini-constants-variables)中所示：

```
#phpunit.xml
<php>
    <env name="KERNEL_DIR" value="foobar" />
</php> 
```

# java - 遍历所有字节值 -128-127 而无需在 Java 中进行强制转换

> ID：11270383
> 
> 赞同：7
> 
> 时间：2012-06-30T00:08:09.967
> 
> 标签：java, performance, iteration

我需要遍历所有字节值（-128 到 127 包括在内）。我可以使用`int`迭代器，但每次都必须转换为`byte`. 使用`byte`迭代器存在我无法测试的问题，`b < 128`因为它会溢出。我想过使用一个while循环并在递增之前进行测试，这是迄今为止我最好的解决方案。有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T00:10:08.377

Java 字节是有符号的，所以它们的值是 -128 到 127。无论如何，你不应该担心这样的强制转换和额外的检查，因为它们很容易被优化掉。事实上，在 JVM 级别，不存在字节变量之类的东西。无论如何，它都被视为 int 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T01:49:18.190

> 使用字节迭代器的问题是我无法测试 b < 128

测试`b == 127`作为循环终止条件。

但是，我同意 Antimony 的观点，无论您使用`int`还是`byte`从性能角度来看，它可能都没有区别。在字节码级别，JVM 仅提供 32 位和 64 位整数算术运算符。

在语言层面，我认为类型转换将在`byte`案例和`int`案例中发生。考虑这`b++`实际上相当于

```
 byte b = ...;
    b = (byte) (b + 1); 
```

并且 typecast 不是 noop 因为`b + 1`产生一个`int`值。所以

```
 for (byte b = -128; b != 127; b++) {
        ...
    } 
```

其中有一个概念类型转换。从性能的角度来看，这是否意味着什么是值得商榷的，因为 JIT 在生成本机代码时做了很多工作来优化掉不必要的操作。

* * *

最后，关于 Java 中的微优化的标准要点：

*   如果您尚未对代码进行概要分析，则很有可能您正在浪费时间尝试调整无关紧要的内容。
*   您应该依靠实际测量（即对您的应用程序进行基准测试）而不是直觉或建议什么更快。准备好让你的直觉被证明是错误的。
*   即使您确实设法通过微优化获得了可观的加速，请注意加速可能是特定于平台的。事实上，一个平台的改进可能是另一个平台的放缓。

# php - 通过标签更新 subid

> ID：11270386
> 
> 赞同：4
> 
> 时间：2012-06-30T00:08:40.607
> 
> 标签：php, javascript, jquery, mysql, ajax

前段时间我问了这个问题[Jquery tabs keep tab open that is subid in url](https://stackoverflow.com/questions/10674947/jquery-tabs-keep-tab-open-that-is-subid-in-url)你可以看到我找到了我的问题的答案，现在我试图改变它，这样每次你从一个选项卡切换到另一个选项卡时它都会改变tid subid 在标题中，目前它只是将变量 tid 更改为 tab_id 是什么，所以当你按下回时，你可以打开你离开的特定选项卡，但这次我希望它更新 tid滚动浏览选项卡时的标题。

如果此处未显示我先前答案的链接是我的代码

```
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if (results == null) return "";
    else return decodeURIComponent(results[1].replace(/\+/g, " "));
}
$(document).ready(function () {
    $(".tab_content").hide(); //Hide all content
    var tabIndex = parseInt(getParameterByName('tid'), 10);
    if (!tabIndex) tabIndex = 1;
    $("ul.tabs li").eq(tabIndex - 1).addClass("active").show(); //Activate first tab
    $(".tab_content").eq(tabIndex - 1).show(); //Show first tab content
    //On Click Event
    $("ul.tabs li").click(function () {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });
}); 
```

如果您需要其他任何东西，请告诉我，如果这有点令人困惑，请告诉我。

编辑：换句话说，目前如果我在标题中添加 ?tid=2 那么它将转到第二个选项卡，但是当您更改选项卡时它不会自动更新它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:50:01.537

尝试`tid`使用 Javascript 更改当前 URL 的参数而不重新加载页面将不起作用。你有几个选择：

1.  使选项卡实际上只是指向新页面的链接，而不是使用 JavaScript。
2.  更改您的脚本，使选项卡实际上是 id 链接，如下所示：

    `<li><a href="#inbox" class="inbox"></a></li>`

单击选项卡时，应将#outbox 或#inbox 附加到您的URL。然后，当用户单击后退按钮时，它应该将他们带到上一个 URL。您还必须更改您的 JavaScript，以便当页面加载时带有指向其中选项卡的链接（即 page.html#inbox），然后显示收件箱选项卡。

您的 HTML 中似乎已经有了适当的 id 和链接，但由于某种原因，您正在向`<li>`元素添加点击功能而不是`<a>`元素。您应该使您的`<a>`元素具有`display:block`，以便它们填充您的`<li>`元素，然后您可以向它们添加选项卡切换功能。这将使 id 能够附加到 URL（即 page.html#inbox）。

因此，请尝试将 onclick 函数添加到您的链接中：

```
$("ul.tabs li a").click(function () {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).parent().addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).attr("href");
        $(activeTab).fadeIn(); //Fade in the active content
    }); 
```

# ios - CCSprite.draw 不适用于线程中的 CCRenderTexture (iOS cocos2d 2.0 rc2)

> ID：11270387
> 
> 赞同：0
> 
> 时间：2012-06-30T00:08:50.203
> 
> 标签：ios, multithreading, opengl-es, cocos2d-iphone, render-to-texture

`CCRenderTexture`我正在尝试在线程中绘制。我有：

```
EAGLSharegroup *sharegroup = [[[[CCDirector sharedDirector] openGLView] context] sharegroup];
EAGLContext *k_context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2 sharegroup:sharegroup];
[EAGLContext setCurrentContext:k_context]; 
```

在线程的开头。除此之外，一切正常`CCSprite.draw`。我已经测试了渲染纹理：

```
[rt beginWithClear:1 g:1 b:1 a:1];
[sprite visit];
[rt end]; 
```

**调用`[CCSprite visit]`不会绘制精灵。** `glGetError`在所有步骤中返回 0。

为了进一步研究这个问题，我将所有内容都放在 UI 线程中，并删除了上下文调用，我将看到使用相同代码正确绘制的精灵。我还通过将此精灵添加到场景中来验证精灵是否正确。

即使我不使用线程，放置上面的“上下文设置调用”也会`CCSprite.draw`停止工作，但只有在绘制到`CCRenderTexture`. 如果它在屏幕上绘图，它工作正常。

任何想法如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:11:40.853

您只能在创建 cocos2d OpenGL 视图 (CCGLView) 的同一线程上绘图，这通常是主线程。这也是为什么调度到主队列解决了这个问题，但它也阻止了有问题的代码的并行执行，因为它现在在主线程上运行。

如果您想通过使用多个线程来加快速度，请考虑并行化应用程序的其他算法，例如寻路、人工智能或其他关键代码路径等游戏逻辑。

# symfony - symfony2 安全性比单独存储在会话变量中的好处？

> ID：11270390
> 
> 赞同：1
> 
> 时间：2012-06-30T00:09:08.503
> 
> 标签：symfony

Symfony 的安全组件是如何工作的？

目前，我获取用户登录数据，根据数据库对他们进行身份验证，并将他们的信息存储在会话变量中以进行登录。当用户访问页面时，它会检查他们的会话以确保他们有权查看特定页面。所有这些都被组织成服务。

我一直在研究 Symfony 的安全组件，但无法弄清楚它是如何工作的。具体来说，它是否提供了一些额外的安全优势（我有一个需要适当安全性的管理面板）？

我也讨厌在不了解发生了什么的情况下学习特定于框架的东西，因此希望对组件的工作原理进行一般性细分。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:00:55.640

该视频是安全组件如何工作的一个很好的资源。该视频来自去年在巴黎举行的 Symfony 现场会议。演讲者 Johannes Schmitt 是安全组件开发的领导者。

[http://www.youtube.com/watch?v=lSxgEK8WKGA](http://www.youtube.com/watch?v=lSxgEK8WKGA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:19:01.960

安全性是一个两步过程，其目标是防止用户访问他/她不应访问的资源。

在该过程的第一步中，安全系统通过要求用户提交某种身份证明来识别用户是谁。这称为身份验证，这意味着系统正在尝试找出您的身份。

一旦系统知道你是谁，下一步就是确定你是否应该有权访问给定的资源。这部分过程称为授权，这意味着系统正在检查您是否有权执行某个操作。

更多信息请访问： [http ://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

# image - 是否存在任何可以从 Instagram、FaceBook 等社交链接获取照片 URL 的库？

> ID：11270393
> 
> 赞同：2
> 
> 时间：2012-06-30T00:09:19.600
> 
> 标签：image, url, social, expand

我正在寻找常见社交 url 方案的库或解析器列表。

例子：

转这个：http: [//instagram.com/p/MbrP1fPZ5b/](http://instagram.com/p/MbrP1fPZ5b/)

进入这个：[http ://distilleryimage11.instagram.com/2dd747fcc16711e1989612313815112c_7.jpg](http://distilleryimage11.instagram.com/2dd747fcc16711e1989612313815112c_7.jpg)

类似的东西已经存在了吗？这不是一项艰巨的任务，但如果我自己做，我怀疑它会非常全面。

# c# - 为什么执行“从”联接时 EF 会丢失包含数据

> ID：11270394
> 
> 赞同：2
> 
> 时间：2012-06-30T00:09:41.817
> 
> 标签：c#, linq, entity-framework, linq-to-entities

如果我有这样的 LINQ 表达式来提取用户表和相关数据。此查询按预期为我提供了一个填充的对象图：

```
 var query = from u in Context.Users
                    .Include("EventRegistrations")
                    .Include("State")
                select u; 
```

但是，如果我将另一个相关的导航属性添加为“来自”，即使我不对其执行任何操作，我也只会在结果中获得单个对象数据，而没有包含数据。

```
 var query = from u in Context.Users
                    .Include("EventRegistrations")
                    .Include("State")
                from ur in u.UserRoles
                select u; 
```

为什么会这样？我想在 where 子句中的上述表达式中使用“ur”，但它消除了我获取包含的表数据的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:13:23.447

可能是因为您没有包含 UserRoles

```
var query = from u in Context.Users
                .Include("EventRegistrations")
                .Include("State")
                .Include("UserRoles")
            from ur in u.UserRoles
            select u; 
```

# ios - 变换多边形

> ID：11270400
> 
> 赞同：0
> 
> 时间：2012-06-30T00:10:56.767
> 
> 标签：ios, graphics, transform

我制作了一个 UIView，其中我使用 CGmutablePathRef 将一些点收集到一个封闭的多边形中。我正在用 CGContext 绘制它们。我现在想“翻转”这些多边形所在的 UIView。不过，我没有转换来翻转顶点。我在哪里可以得到一个？我该怎么做？我在哪里可以找到一些阅读材料和我在这里通常描述的代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:52:43.867

好吧，我的答案是每个 UIView 基础的 CALayer。那个 CALayer 有一个获取 affineTransform 的方法。然后可以使用 CATransform3DMakeRotation 修改 affineTransform。Rob Napier 在[这里](https://stackoverflow.com/questions/10324373/how-to-draw-the-vertices-on-a-cgcontext-cgmutablepathref)让我了解了 CALayer 的概念。Ray Wenderlich 在[此处](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial)解释了对 CALayer 的访问（包括对其进行绘制），并在[此处](https://stackoverflow.com/questions/3362180/rotating-a-calayer-90-degrees)介绍了旋转 CALayer 。

# data-structures - 具有复杂节点的数据结构

> ID：11270402
> 
> 赞同：0
> 
> 时间：2012-06-30T00:11:19.313
> 
> 标签：data-structures, graph

我有一个有向图，每个节点都是一个复杂的数据类型。

有谁知道如何为此图构建数据结构。例如，这里的图片：

![在此处输入图像描述](../Images/a2f56eea7cae46a4bddf5c0717b91a86.png)

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:16:56.017

看图像，它看起来就像一个有向图。我假设您所说的“复杂数据类型”是指每个顶点都包含某种复杂信息，例如哈希表或其他东西。

我建议您创建一个保存相关信息的专用 Vertex 类，然后使用邻接矩阵或邻接列表实现创建一个图形类，具体取决于图形的密集/稀疏/大/小。

# android - 我的应用突然停止

> ID：11270405
> 
> 赞同：0
> 
> 时间：2012-06-30T00:12:01.310
> 
> 标签：android, android-layout, android-widget

我正在尝试在 android 上创建布局，当我尝试执行时，系统给了我“不幸的消息”，这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <LinearLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/appetizer"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:background="@drawable/header_bk"
            android:text="@string/appetizer" />

        <Button
            android:id="@+id/drinks"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/drinks" />

        <Button
            android:id="@+id/meats"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/meats" />

    </LinearLayout> 

    <ImageView
            android:id="@+id/logo"
            android:layout_width="250dip"
            android:layout_height="85dp"
            android:layout_marginLeft="380dip"
            android:background="@drawable/logo_bk" />       
    <LinearLayout
    android:id="@+id/wrapper"
    android:layout_width="match_parent"
    android:layout_height="425dp"
    android:layout_marginTop="49dip"

    android:background="@drawable/background"
    android:orientation="vertical" >

    </LinearLayout>

    <LinearLayout
        android:id="@+id/header1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:layout_marginLeft="630dip">

        <Button
            android:id="@+id/pastas"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:background="@drawable/header_bk"
            android:text="@string/pastas" />

        <Button
            android:id="@+id/salads"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/salads" />

        <Button
            android:id="@+id/specials"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/specials" />

</LinearLayout> 
```

这是java文件的代码：

```
package menu.menuapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
//import android.widget.*;

public class FrontActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.front);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.front, menu);
    return true;
} 
```

}

和日志：

```
06-29 19:33:30.870: I/ActivityManager(95): START {act=android.intent.action.MAIN cat=    [android.intent.category.LAUNCHER] flg=0x10200000 cmp=menu.menuapp/.FrontActivity} from pid 199
06-29 19:33:31.130: I/ActivityManager(95): Start proc menu.menuapp for activity menu.menuapp/.FrontActivity: pid=519 uid=10040 gids={}
06-29 19:33:31.222: I/WindowManager(95): createSurface Window{415c8348 Starting menu.menuapp paused=false}: DRAW NOW PENDING
06-29 19:33:32.701: E/AndroidRuntime(519): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{menu.menuapp/menu.menuapp.FrontActivity}: java.lang.ClassNotFoundException: menu.menuapp.FrontActivity
06-29 19:33:32.701: E/AndroidRuntime(519): Caused by: java.lang.ClassNotFoundException: menu.menuapp.FrontActivity
06-29 19:33:32.730: W/ActivityManager(95):   Force finishing activity menu.menuapp/.FrontActivity
06-29 19:33:33.305: W/ActivityManager(95): Activity pause timeout for ActivityRecord{415c7a70 menu.menuapp/.FrontActivity} 
```

这是清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="menu.menuapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".FrontActivity"
        android:label="@string/title_activity_front" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:02:53.893

显然你忘了把`</manifest>`你的 AndroidManifest.xml 文件放在末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:49:15.520

有时日食是愚蠢的。尝试执行“项目 --> 清理”，然后重新启动 Eclipse。您会惊讶于这实际上解决了问题的频率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:48:38.827

问题在这里解决：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
     android:orientation="horizontal">
     <LinearLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/appetizer"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:background="@drawable/header_bk"
            android:text="@string/appetizer" />

        <Button
            android:id="@+id/drinks"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/drinks" />

        <Button
            android:id="@+id/meats"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/meats" />

    </LinearLayout> 

<ImageView
    android:id="@+id/logo"
    android:layout_width="250dip"
    android:layout_height="85dp"
    android:layout_marginLeft="380dip"
    android:background="@drawable/logo_bk" />

<LinearLayout
        android:id="@+id/header1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:layout_marginLeft="630dip">

        <Button
            android:id="@+id/pastas"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:background="@drawable/header_bk"
            android:text="@string/pastas" />

        <Button
            android:id="@+id/salads"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/salads" />

        <Button
            android:id="@+id/specials"
            style="@style/header"
            android:layout_width="130dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:background="@drawable/header_bk"
            android:text="@string/specials" />

</LinearLayout>

<LinearLayout
    android:id="@+id/wrapper"
    android:layout_width="match_parent"
    android:layout_height="425dp"
    android:layout_marginTop="45dip"
    android:background="@drawable/background"
    android:orientation="vertical" >

</LinearLayout>
 </RelativeLayout> 
```

问题是因为在我添加应用程序后，Relativelayout 没有方向，运行流畅！谢谢大家的帮助！！！

# php - PHP 对特定页面使用 header()

> ID：11270409
> 
> 赞同：0
> 
> 时间：2012-06-30T00:12:34.390
> 
> 标签：php, redirect, permissions, header

如果用户未登录，我试图阻止查看 javascript 页面 (.js)，我想从 index.php 页面执行此操作以编写 404 或 403 标头，它是如何完成的？
注意：我不想使用 chmod 因为它全局更改文件权限而不是访问者

```
header("HTTP/1.0 404 Not Found", "js.js"); 
```

js.js 是一个错误参数，只是我想要它的示例或类似的东西，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:33:09.997

为此，您将需要一个单独的脚本。如

文件.php

```
$file = $_GET['file'];
//whitelist files
$filelist = array('js.js');
if(in_array($file, $filelist))
{
    header('Cache Control: No-store');
    header('Content-Disposition:inline;filename="' . $file . '"');
    include "../files/$file";

} 
```

使用它

```
<script src="files.php?file=js.js"></script> 
```

并将您的文件放在网络不可访问的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:18:12.007

除了使用单独的 php 脚本提供 *.js 之外，没有安全的方法可以做到这一点。在此脚本中，您将检查用户的 cookie/会话数据，然后 readfile() 您要保护的 js。

这是一个非常hacky的方式......你为什么需要它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T00:29:32.113

人们已经建议你如何做到这一点。这是一个实用的解决方案。

如前所述，您编写了一个脚本来检查会话并通过 header() 调用重定向到您想要的任何错误处理解决方案。

我不提倡您将脚本称为 js.js.php。通常，由于 apache 的内在问题，您不希望允许带有 somename.somename.ext 的文件。

因此，只需将您的脚本命名为 js.js。但是，js.js 的源代码应该是执行会话检查的 php 代码，如果没问题，则返回带有适当 mime 类型标头的 javascript 源代码。

然后在您的目录的 htaccess 中，您可以添加自定义文件规则：

```
<Files js.js>
SetHandler application/x-httpd-php
</Files> 
```

然后 Apache 会将 js.js 视为 php 文件，即使此功能在其他情况下是不可见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T12:29:40.730

这没有回答问题，但是如果用户没有必要的权限，可以做的就是不需要 JS 脚本。你试图做的是一种没有附加价值的矫枉过正。

```
<?php if ($isUserLoggedIn): ?>
    <script src="js.js" type="text/javascript"></script>
<?php endif; ?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-30T00:17:04.393

您可以创建自己的 404 页面，并在您想要的文件部分使用包含功能。

# c# - 在 C# 程序中调用使用 IKVM 生成的 dll 库中的函数，并带有 List 参数

> ID：11270411
> 
> 赞同：-1
> 
> 时间：2012-06-30T00:13:09.790
> 
> 标签：c#, jar, ikvm

一切都在标题中。我从一个包含在我的 C# 项目中的 jar 生成了一个 dll 文件。我尝试从库中调用一个函数，该函数在参数中使用 java.util.List 但我不能使用它，我想知道是否有解决方法。我还将 IKVM.OpenJDK.Util.dll 添加到我的项目中，但它仍然是同样的问题。希望有人能帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:04:50.087

只需添加“使用 java.util;” 并使用 java.util.List 对象...

# web-applications - web2py 应用程序级变量

> ID：11270415
> 
> 赞同：0
> 
> 时间：2012-06-30T00:13:36.390
> 
> 标签：web-applications, web2py, pickle

我是 web2py 和 web 应用程序开发的新手，我有一个特定的用例，考虑到我目前拥有的工具和知识，我不确定如何解决。

我想要做的是加载一次腌制类实例，然后继续为进入我的 web2py 应用程序的每个请求重用它。有没有办法以不影响每个请求性能的方式做到这一点？换句话说，有没有一种方法可以一次性提取数据并为每个请求重复使用它？

取消模型中的数据不是正确的方法，因为模型会在每个请求上执行，因此每次都会重新加载文件。同样，在模块中执行它也是不正确的，因为导入模块将在每次请求时执行模块中的代码。我能想到的唯一另一件事是将数据缓存在 ram 中，但我想知道是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:16:50.977

也许在一个模块中做它并从模块中导入对象。

# c# - 创建一个显示立方体视图的软件的想法？

> ID：11270419
> 
> 赞同：1
> 
> 时间：2012-06-30T00:15:18.223
> 
> 标签：c#, wpf, xaml, drawing

我打算在 WPF 中绘制这些形状。这是一个教育软件。

您对如何实现这些多维数据集和视图有什么想法？

我一开始就计划开始使用画布和绘图，但我想它会成为永恒的。所以我想是否存在一些图书馆来帮助我绘制它们？

![在此处输入图像描述](../Images/3ee79dc5efe801ab30af22fd51a24af4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T00:31:32.283

WPF 中内置了绘制 3D 形状（例如立方体）并从不同角度渲染它们的能力。从立方体的外观来看，您需要一个[正交相机](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.orthographiccamera.aspx)，而不是透视相机，因为组成立方体的线是平行的。

您可能还会发现[Petzold.Media3D 库](http://www.charlespetzold.com/blog/2007/08/110255.html)很有帮助，因为它内置了像立方体这样的对象（您不必编写自己的算法来构建它们）。

最后，[这本入门](http://www.codeproject.com/Articles/23332/WPF-3D-Primer)指南可能有助于您开始使用 WPF 3D。

一旦您对如何使用 3D 有了一定的了解，只需将立方体放置在场景中的适当位置并正确放置摄像机以查看立方体即可。您可能希望继续重复使用相同的四个摄像头位置：一个用于“3D 视图”，一个用于顶视图、侧视图和前视图。

这应该比尝试使用 2D 绘制立方体要少得多。

# arrays - QT 中更复杂的关联数组

> ID：11270422
> 
> 赞同：0
> 
> 时间：2012-06-30T00:15:55.143
> 
> 标签：arrays, multidimensional-array, qt4

大家好，感谢您的时间，

我在 QList 中读取文件名。这就是我所做的：

```
QFileDialog dialog(this);
dialog.setFileMode(QFileDialog::ExistingFiles);
dialog.setViewMode(QFileDialog::Detail);
if(dialog.exec()) {
    files.append(dialog.selectedFiles());
}
foreach(QString file, files) {
    // add files to a table
} 
```

我在 QList 文件中有所有文件。现在我希望用户将信息添加到此列表中。在 PHP（或 javascript）中，我会做这样的事情：

```
$fileinformation = array();
foreach($files AS $file) {
    array_push($fileinformation, array (
                                       'filename'   => $file,
                                       'doAction1'  => false,
                                       'doAction2'  => true,
                                       'parameter2' => array (
                                                              'value1' => $val1,
                                                              'value2' => $val2
                                                       )
                                       )
    )
} 
```

在下一步中，我将允许用户通过编辑来编辑默认选项`$fileinformation['parameter2']['value']`。但是我怎么能在 QT 中做到这一点？我知道，qt 中有某些函数，如 QList 和 QMap，但对于这种情况，它们都不是多维的并且太不灵活。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:08:57.867

你没有错过任何东西。在静态类型语言中，通常不会在同一个容器中拥有完全不同类型的对象。

假设所有参数都在编译时定义，您可以定义包含这些参数的类或结构并将其存储在列表中。为简洁起见，我在此示例中使用了原始结构。您可能希望使用构造函数显式初始化其成员，并可能将其数据包装到有意义的类中。

```
struct FileInformation
{
   QString filename;
   bool doAction1;
   bool doAction2;

   struct ParameterStruct
   {
      QString value1; // I'm guessing it's QString, since you don't show what type it was.
      QString value2;
   } parameter2;
};

int main()
{
   QList<FileInformation> myList;
   FileInformation info;
   info.fileName = "filename.txt";
   info.doAction1 = false;
   info.doAction2 = true;
   info.parameter2.value1 = "someValue";
   info.parameter2.value2 = "someOtherValue";
   myList.append(info);

   //now to change stuff!
   myList[0].parameter2.value1 = "a new value";
} 
```

可以更类似于上面的示例（通过嵌套 QVariantMaps）来执行此操作，但这会非常难看，因为 C++ 的静态类型需要在每次访问时手动转换。

# c# - 嵌套并行中的死锁风险

> ID：11270423
> 
> 赞同：4
> 
> 时间：2012-06-30T00:16:28.903
> 
> 标签：c#, multithreading, threadpool, task-parallel-library, parallel-extensions

使用 ThreadPool 采用以下简单的嵌套异步循环实现：

```
ThreadPool.SetMaxThreads(10, 10);
CountdownEvent icnt = new CountdownEvent(1);
for (int i = 0; i < 50; i++)
{
    icnt.AddCount();
    ThreadPool.QueueUserWorkItem((inum) =>
    {
        Console.WriteLine("i" + inum + " scheduled...");
        Thread.Sleep(10000);  // simulated i/o
        CountdownEvent jcnt = new CountdownEvent(1);
        for (int j = 0; j < 50; j++)
        {
            jcnt.AddCount();
            ThreadPool.QueueUserWorkItem((jnum) =>
            {
                Console.WriteLine("j" + jnum + " scheduled...");
                Thread.Sleep(20000);  // simulated i/o
                jcnt.Signal();
                Console.WriteLine("j" + jnum + " complete.");
            }, j);
        }
        jcnt.Signal();
        jcnt.Wait();
        icnt.Signal();
        Console.WriteLine("i" + inum + " complete.");
    }, i);
}
icnt.Signal();
icnt.Wait(); 
```

现在，您永远不会使用这种模式（它会在启动时死锁），但它确实演示了线程池可能导致的特定死锁 - 通过在阻塞线程消耗整个池后等待嵌套线程完成时阻塞。

我想知道使用嵌套的 Parallel.For 版本是否存在产生类似有害行为的潜在风险：

```
Parallel.For(1, 50, (i) =>
{
    Console.WriteLine("i" + i + " scheduled...");
    Thread.Sleep(10000);  // simulated i/o
    Parallel.For(1, 5, (j) =>
    {
        Thread.Sleep(20000);  // simulated i/o
        Console.WriteLine("j" + j + " complete.");
    });
    Console.WriteLine("i" + i + " complete.");
}); 
```

显然调度机制要复杂得多（而且我还没有看到这个版本出现死锁），但潜在的风险似乎仍然潜伏在那里。理论上是否有可能通过依赖嵌套线程来使 Parallel.For 使用的池干涸到造成死锁的程度？即对于延迟后安排的作业，Parallel.For 保留在其后袋中的线程数是否有限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:42:01.590

不，不存在像`Parallel.For()`（或`Parallel.ForEach()`）中那样的死锁风险。

有一些因素会降低死锁的风险（如使用的线程的动态计数）。但是死锁不可能的还有一个原因：迭代也是在原始线程上运行的。这意味着如果`ThreadPool`完全忙，计算将完全同步运行。在这种情况下，您不会从 using 中获得任何加速`Parallel.For()`，但您的代码仍将运行，不会出现死锁。

此外，与 s 类似的情况`Task`也得到了正确解决：如果您`Wait()`在尚未安排的`Task`（或访问它的）上，它将在当前线程中内联运行。`Result`我认为这主要是一种性能优化，但我认为它在某些特定情况下也可以避免死锁。

但我认为这个问题更多的是理论而不是实际。.Net 4`ThreadPool`的默认最大线程数设置为一千。而且，如果您同时有数千个`Thread`阻塞，那么您就做错了。

# android - ScaleGestureDetector 通过单指触摸触发 onScaleEvent

> ID：11270424
> 
> 赞同：2
> 
> 时间：2012-06-30T00:16:32.060
> 
> 标签：android

我有 onTouchEvent 将触摸事件传递给成员 ScaleGestureDetector 的代码，如果缩放 GD 在我的缩放侦听器上触发 onScaleEvent，我会放大显示项目。如果未触发 onScale 事件，我将此事件视为潜在的拖动并移动显示的项目。我观察到在某些设备上，ScaleGestureDetector 会为我触发 onScale 事件，即使只有一根手指触摸屏幕。这是预期的吗？同时处理尺度和阻力的推荐机制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-22T01:27:18.117

如果我是正确的，您将使用单指针 (mEvent.getPointersCount() == 1) 触发 mScaleGestureDetector.onTouchEvent(mEvent)。它应该由大于 1 的指针触发。确保使用 pointersCount > 1 例如触发。

```
if(pointersCount >1) {
     TOUCH_GESTURE_MODE = GESTURE_MODE_SCALE;
     mScaleGestureDetector.onTouchEvent(mEvent);
     return true;
} 
```

# facebook - 应该为 Facebook 身份验证打开哪些端口

> ID：11270425
> 
> 赞同：3
> 
> 时间：2012-06-30T00:16:34.923
> 
> 标签：facebook, ruby-on-rails-3, omniauth

我试图通过设置一些 iptables 防火墙规则来提高我的服务器安全性。结果是使用 Omniauth 的 Facebook 登录停止工作。在我的日志中，我看到 Facebook 至少将一些包发送到我的服务器端口 37035 和 41198。为什么？这些端口中没有任何运行。

有人可以说我应该打开哪些端口，以便使用 Omniauth 登录的 Facebook 可以在我的网站上重新开始工作。

我应用的规则是：

```
# 删除所有现有规则
iptables -X

# 设置默认规则
iptables -P 输入删除
iptables -P 转发接受
iptables -P 输出接受

# 允许 ssh 进入
iptables -A INPUT -i eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT

# 允许传入的 HTTP
iptables -A INPUT -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT

# 允许传出 SSH
iptables -A OUTPUT -o eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A INPUT -i eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT

# 允许从外部ping
iptables -A INPUT -p icmp --icmp-type echo-r​​equest -j ACCEPT
iptables -A OUTPUT -p icmp --icmp-type echo-r​​eply -j ACCEPT

# 允许ping其他服务器
iptables -A OUTPUT -p icmp --icmp-type echo-r​​equest -j ACCEPT
iptables -A INPUT -p icmp --icmp-type echo-r​​eply -j ACCEPT

# 允许环回访问
iptables -A 输入 -i lo -j 接受
iptables -A 输出 -o lo -j 接受

# 允许发送邮件和后缀
iptables -A INPUT -i eth0 -p tcp --dport 25 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --sport 25 -m state --state ESTABLISHED -j ACCEPT

# 允许 dns 查询
iptables -A OUTPUT -p udp -o eth0 --dport 53 -j ACCEPT
iptables -A INPUT -p udp -i eth0 --sport 53 -j ACCEPT

# 防止 dos 攻击 - 如果需要，升级到 hashlimit
iptables -A INPUT -p tcp --dport 80 -m limit --limit 25/minute --limit-burst 100 -j ACCEPT

# 记录丢弃的包
iptables -N 日志记录
iptables -A 输入 -j 记录
iptables -A LOGGING -m limit --limit 2/min -j LOG --log-prefix "IPTables Packet Dropped:" --log-level 7
iptables -A 日志记录 -j DROP

```

这是来自我的系统日志的示例日志条目（我的 IP 已过滤）

```
IPTables Packet Dropped: IN=eth0 OUT= MAC=40:40:ea:31:ac:8d:64:00:f1:cd:1f:7f:08:00 SRC=69.171.224.54 DST=my_ip LEN=56 TOS=0x00 PREC=0x00 TTL=86 ID=0 DF PROTO=TCP SPT=443 DPT=44605 WINDOW=14480 RES=0x00 ACK SYN URGP=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:40:53.310

终于得到了这个问题的答案。[https://superuser.com/questions/479503/why-are-ports-30000-to-60000-needed-when-browsing-the-net](https://superuser.com/questions/479503/why-are-ports-30000-to-60000-needed-when-browsing-the-net)

http 连接需要从 32768 到 61000 的端口。

# android - 将原始资源设置为铃声

> ID：11270429
> 
> 赞同：5
> 
> 时间：2012-06-30T00:17:32.370
> 
> 标签：android, ringtone

我已经阅读了这 2 个帖子[链接](https://stackoverflow.com/questions/1271777/how-to-set-ringtone-in-android-from-my-activity)[1](https://stackoverflow.com/questions/1986756/setting-ringtone-in-android)和这个链接 2，但代码似乎对我不起作用。

这是我的代码：

```
File newSoundFile = new File("/sdcard/media/ringtone", "myringtone.oog");
            Uri mUri = Uri.parse("android.resource://com.pack.android.myapp/R.raw.song1");
            ContentResolver mCr = Main.this.getContentResolver();
            AssetFileDescriptor soundFile;
            try {
                   soundFile= mCr.openAssetFileDescriptor(mUri, "r");
               } catch (FileNotFoundException e) {
                   soundFile=null;   
               }

               try {
                  byte[] readData = new byte[1024];
                  FileInputStream fis = soundFile.createInputStream();
                  FileOutputStream fos = new FileOutputStream(newSoundFile);
                  int i = fis.read(readData);

                  while (i != -1) {
                    fos.write(readData, 0, i);
                    i = fis.read(readData);
                  }

                  fos.close();
               } catch (IOException io) {
               }
               ContentValues values = new ContentValues();
               values.put(MediaStore.MediaColumns.DATA, newSoundFile.getAbsolutePath());
               values.put(MediaStore.MediaColumns.TITLE, "my ringtone");
               values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/oog");
               values.put(MediaStore.MediaColumns.SIZE, newSoundFile.length());
               values.put(MediaStore.Audio.Media.ARTIST, R.string.app_name);
               values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
               values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
               values.put(MediaStore.Audio.Media.IS_ALARM, true);
               values.put(MediaStore.Audio.Media.IS_MUSIC, false);

               Uri uri = MediaStore.Audio.Media.getContentUriForPath(newSoundFile.getAbsolutePath());
               Uri newUri = mCr.insert(uri, values);

               try {
                   RingtoneManager.setActualDefaultRingtoneUri(Main.this, RingtoneManager.TYPE_RINGTONE, newUri);
               } catch (Throwable t) {
                  // Log.d(TAG, "catch exception");
               } 
```

我正在逼近。Logcat 在这里：

```
06-30 03:13:03.731: E/AndroidRuntime(4187): FATAL EXCEPTION: main
06-30 03:13:03.731: E/AndroidRuntime(4187): java.lang.NullPointerException
06-30 03:13:03.731: E/AndroidRuntime(4187):     at com.pack.android.myapp.Main.Music(Main.java:83)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at com.pack.android.myapp.Main$2.onClick(Main.java:46)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.view.View.performClick(View.java:2538)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.view.View$PerformClick.run(View.java:9152)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.os.Handler.handleCallback(Handler.java:587)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.os.Looper.loop(Looper.java:130)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at android.app.ActivityThread.main(ActivityThread.java:3687)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at java.lang.reflect.Method.invokeNative(Native Method)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at java.lang.reflect.Method.invoke(Method.java:507)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
06-30 03:13:03.731: E/AndroidRuntime(4187):     at dalvik.system.NativeStart.main(Native Method) 
```

soundFile 似乎为空。这是为什么？我的歌曲是 song1.mpe，位于 res 下的 raw 文件夹中。

清单中添加的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:35:57.253

将您的铃声放在资产文件夹中并使用此代码

```
Uri path = Uri.parse("android.resource://yourpackagename/raw/yoursoundfile")
RingtoneManager.setActualDefaultRingtoneUri(
                    getApplicationContext(), RingtoneManager.TYPE_RINGTONE,
                    path);
            Log .i("TESTT", "Ringtone Set to Resource: "+ path.toString());
            RingtoneManager.getRingtone(getApplicationContext(), path)
                    .play(); 
```

将此权限添加到 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T15:11:16.943

这是我使用的代码！对我很有帮助，尤其是本[教程](http://programondaspot.blogspot.com/2015/09/set-raw-resource-file-as-ringtone-in.html)！

```
 String exStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath();
 String path=(exStoragePath +"/media/alarms/"); 

saveas(RingtoneManager.TYPE_RINGTONE);

sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+path+filename+".mp3"
      + Environment.getExternalStorageDirectory()))); 

File k = new File(path, filename);

ContentValues values = new ContentValues(4);
long current = System.currentTimeMillis();
values.put(MediaStore.MediaColumns.DATA, path + filename  );
values.put(MediaStore.MediaColumns.TITLE,  filename );
values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");

 //new
 values.put(MediaStore.Audio.Media.ARTIST, "cssounds ");
 values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
 values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
 values.put(MediaStore.Audio.Media.IS_ALARM, true);
 values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

// Insert it into the database
 this.getContentResolver()
.insert(MediaStore.Audio.Media.getContentUriForPath(k
 .getAbsolutePath()), values); 
```

快乐编码！

# python - 使用标准数据存储索引或构建我自己的

> ID：11270434
> 
> 赞同：0
> 
> 时间：2012-06-30T00:18:40.963
> 
> 标签：python, google-app-engine, indexing, google-cloud-datastore

我正在使用 python 在 google appengine 上运行一个 webapp，我的应用程序允许用户发布主题并对其做出回应，该网站基本上是这些帖子的集合，这些帖子分类到不同的页面上。

现在，我现在每天只有大约 200 个帖子和 30 个访问者，但这已经占用了我对数据存储的近 20% 的读取和 10% 的写入。我想知道使用谷歌应用引擎的内置 get_by_id() 函数是否更有效地通过他们的 ID 检索帖子，或者是否更好地构建我自己的。对于某些查询，我只需要使用 GQL 或内置查询语言，因为它们的检索方式不只是和 ID，但我想看看哪个更好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:47:49.773

你在做有效的缓存吗？（或任何缓存）。

此外，如果您在 300 篇文章中使用了这么多的文章，那么您的模型似乎可能有问题。您是否查看过 Datastore 查看器以查看每个实体使用了多少写入？

您可能会阅读有关[爆炸索引](https://developers.google.com/appengine/docs/python/datastore/queries#Big_Entities_and_Exploding_Indexes)的文档，也许这是您的问题的一部分？

使用起来更好`get_by_id()`。它可以找到确切的对象，并且成本更低（算作只有一个实体的查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:14:51.403

我建议使用预先存在的代码并围绕它进行构建，而不是重新发明轮子。

# php - 使用引用创建变量是个好主意吗？

> ID：11270441
> 
> 赞同：4
> 
> 时间：2012-06-30T00:20:15.253
> 
> 标签：php, variables, reference

例子：

```
function create_pets(&$cats, &$dogs){
 $dogs = get_dogs();
 $cats = get_cats();
} 
```

所以我会这样称呼它：

```
function foo(){
  create_pets($cats, $dogs);

  // here use $cats and $dogs variables normally
} 
```

我知道我可以为这些 getter 函数之一的返回值分配一个新变量，但这只是一个示例。在我的情况下，不仅仅是一个吸气剂......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:27:45.557

这取决于具体情况。大多数情况下，您通常会按值调用变量，但在某些情况下，如果您想修改变量内容而不更改代码其他部分中的变量值，那么按引用调用是个好主意。否则，如果您只想要实际内容并且只想要实际内容，那么按值调用是一个更好的主意。这个链接很好地解释了它。[http://www.exforsys.com/tutorials/c-language/call-by-value-and-call-by-reference.html](http://www.exforsys.com/tutorials/c-language/call-by-value-and-call-by-reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T01:07:21.667

每个人都说的答案是“视情况而定”。在您的具体示例中，“创建”函数，代码的使用和维护不太明显，因此避免这种模式可能是个好主意。

但这是个好消息，有一种方法可以做你想做的事情，在不使用引用的情况下保持简单和紧凑：

```
function create_pets(){
    return array(get_dogs(), get_cats());
}

function foo(){
    list($dogs, $cats) = create_pets();
    //here use $cats and $dogs variables normally
} 
```

如您所见，您可以简单地返回一个数组并使用[列表语言结构](http://php.net/manual/en/function.list.php)在一行中获取各个变量。也更容易判断这里发生了什么， create_pets() 显然返回新的 $cats 和 $dogs; 除非直接检查 create_pets() ，否则之前使用引用的方法并没有说明这一点。

但是，您不会发现使用任何一种方法的性能差异，两者都可以正常工作。但是您会发现编写易于遵循和使用的代码最终会大有帮助。

# php - 如何在页面重置时设置组合框值？

> ID：11270448
> 
> 赞同：0
> 
> 时间：2012-06-30T00:21:31.647
> 
> 标签：php, webforms

当我因为 PHP 中的错误返回给用户时，我可以给文本框一个类似`value = "<?php if(isset($_POST['abc'])){echo $_POST['abc'];}`. 如何使用`<select>`组合框进行等效操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:48:59.930

这有点取决于你的意思`refreshed`。

如果您的意思是在没有任何发布的情况下对页面进行字面刷新/重新加载，您可以使用 javascript 在更改时存储该值，并在刷新/加载页面时加载该值。您的存储选项各不相同，从访问者计算机上的 cookie 和本地存储到使用 ajax 的服务器端存储。

如果您在稍后加载同一页面时谈论使用以前保存/发布的值，那么情况就不同了，尽管 ajax 方法在那里也可以工作（尽管可能没有必要）。

**编辑：**根据您的编辑，您需要添加`selected="selected"`到先前选择的选项。

因此，在构建您的选择选项的循环中（假设是一个循环），您可以执行以下操作：

```
foreach($options as $key => $value)    // the loop, if any...
{
  echo "<li value='{$key}'";
  if ($key == $_POST['def'])
  {
    echo ' selected="selected"';
  }
  echo ">{$value}</li>"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:38:33.783

这是一个示例：

```
<?php
    $cbo_sel = 'SELECTED="SELECTED"'; //to make an item selected, append this attribute to that <option> element

    $post_success = false; //becomes true only when the data submitted is processed successfully

    $name   = '';
    $email  = '';
    $grade  = '';

    $user_msg = ''; //holds the messages to the user

    if($_SERVER['REQUEST_METHOD']=='POST')
    {
        //assigning the values
        $name   = isset($_POST['name']) ? trim($_POST['name']) : '';
        $email  = isset($_POST['email']) ? trim($_POST['email']) : '';
        $grade  = isset($_POST['grade']) ? trim($_POST['grade']) : '';

        //do validation here
        if($name == '') // && any_regex_if_needed
            $user_msg = "Where is your name ?";
        else if($email == '')
            $user_msg = "How am I gonna contact you ?";
        else if($grade == '')
            $user_msg = "Oh! Don't hide your grade from me !";
        else
        {
            //everything is okay.. now do your things here... like inserting this to database or calculating or mailing, etc...
            //...
            //...

            $user_msg = 'Success !';
            $post_success = true; //success
        }
    }
?>
<!DOCTYPE html>
<html>
<head><title>Testing..</title></head>
<body>

    <div><?php echo $user_msg; ?></div>

    <form method="POST">
        Name: 
            <input type="text" name="name" value="<?php echo (!$post_success)?$name:''; ?>" /> <br />
        Email: 
            <input type="text" name="email" value="<?php echo (!$post_success)?$email:''; ?>" /> <br />
        Grade: 
            <select name="grade">
                <option value="A" <?php echo ($grade=='A' && !$post_success)?$cbo_sel:''; ?>>A</option> <!-- if grade='A' and if the data submitted was not processed(because of failed validation), then display the value -->
                <option value="B" <?php echo ($grade=='B' && !$post_success)?$cbo_sel:''; ?>>B</option>
                <option value="C" <?php echo ($grade=='C' && !$post_success)?$cbo_sel:''; ?>>C</option>
                <option value="D" <?php echo ($grade=='D' && !$post_success)?$cbo_sel:''; ?>>D</option>
            </select>

            <input type="submit" name="submit" value="Submit" />
    </form>
</body>
</html> 
```

在这里，我对选项进行硬编码。因此，如果下拉菜单包含多个项目，请使用循环并使用 if 语句检查选项。

也许这可以改进。我欢迎所有建议。:)

# ios5 - 生成 NSJSONSerialization 时的布尔值

> ID：11270452
> 
> 赞同：2
> 
> 时间：2012-06-30T00:22:21.143
> 
> 标签：ios5

这感觉像是一个超级新手问题，所以提前道歉。

使用 NSJSONSerialization 时如何指定布尔值？

我当前的代码如下：

```
NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys: 
                            value, @"key",
                            NO, @"booleanKey",
                            nil];

NSData *jsondata = [NSJSONSerialization dataWithJSONObject:parameters options:0 error:nil];

NSString *jsonString = [[NSString alloc] initWithData:jsondata encoding:NSUTF8StringEncoding]; 
```

它似乎只是忽略了它，并且 NSLog 输出看起来像：

```
{"key":"THE VALUE OF id value"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:16:00.027

它被忽略的原因`NO`是与 相同`nil`，它会终止您的字典列表。您只能将对象添加到字典中，从而将任何原始类型转换为对象。例如：`NO`转向`[NSNumber numberWithBool:NO]`或者如果您使用的是 Xcode 4.4，您可以只使用`@(NO)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:09:02.690

尝试：

```
[NSNumber numberWithBool: NO] 
```

而是直接使用 bool 值。

[你可以在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)查看文档。

# windows - 如何从文件名中删除空格（批量）

> ID：11270453
> 
> 赞同：32
> 
> 时间：2012-06-30T00:22:20.973
> 
> 标签：windows, batch-file, renaming

如何在 Windows 中批量删除数千个文件中的空格（不替换为下划线）？我可以从 DOS 命令执行此操作吗？

目前：

```
file one.mp3
file two.mp3 
```

所有文件都需要变成：

```
fileone.mp3
filetwo.mp3 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-01T01:40:16.857

这是一个可以有效地批量重命名文件的脚本，从名称中删除所有空格。

```
:renameNoSpace  [/R]  [FolderPath]
@echo off
setlocal disableDelayedExpansion
if /i "%~1"=="/R" (
  set "forOption=%~1 %2"
  set "inPath="
) else (
  set "forOption="
  if "%~1" neq "" (set "inPath=%~1\") else set "inPath="
)
for %forOption% %%F in ("%inPath%* *") do (
  if /i "%~f0" neq "%%~fF" (
    set "folder=%%~dpF"
    set "file=%%~nxF"
    setlocal enableDelayedExpansion
    echo ren "!folder!!file!" "!file: =!"
    ren "!folder!!file!" "!file: =!"
    endlocal
  )
) 
```

假设脚本名为**renameNoSpace.bat**

`renameNoSpace`:（无参数）重命名当前目录中的文件

`renameNoSpace /R`：重命名以当前目录为根的文件夹树中的文件

`renameNoSpace myFolder`：重命名当前目录中的“myFolder”目录中的文件。

`renameNoSpace "c:\my folder\"`：重命名指定路径中的文件。使用引号是因为路径包含空格。

`renameNoSpace /R c:\`: 重命名 C: 驱动器上的所有文件。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2019-07-14T04:38:31.083

在 Windows 中：

1.  打开命令提示符。
2.  使用 cd 命令转到文件夹（例如：cd "paht of your folder"）。
3.  通过键入以下命令打开 powershell： powershell
4.  然后输入：get-childitem *.mp3 | foreach {重命名项目 $_ $_.name.replace(" ","")}

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-04-07T12:57:28.947

创建一个 powershell 文件 -`*.ps1`扩展名

写下这段代码：

```
dir |
Where-Object { $_.name.Contains(" ") } |
Rename-Item -NewName { $_.name -replace " ","" } 
```

保存，然后右键->用powershell运行

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-30T00:29:14.157

您可以编写一个简单的脚本来为一个文件/目录执行此操作，例如：

```
@echo off
setlocal enableextensions enabledelayedexpansion

set "ARG=%~1"
ren "%ARG%" "%ARG: =%" 
```

...然后，如果您愿意，可以在您关心的所有文件和/或目录上运行它。例如，如果您将上述脚本创建为 myrenamingscript.cmd，您可以通过运行以下命令在当前目录中的所有非目录文件上运行它：

```
for %f in (*) do @myrenamingscript.cmd "%~f" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-23T02:14:17.067

```
@echo off
setlocal enableextensions enabledelayedexpansion

for %%f in (*.*) do (
set ARG=%%~nxf
rename "%%f" !ARG: =!
) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-07-18T08:46:56.393

在 Windows 中打开**Powershell**，然后**在导航到要重命名文件的文件夹后键入以下命令**

```
get-childitem *.mp3 | foreach { rename-item $_ $_.Name.Replace(" ", "") } 
```

我们来分析一下：

get-childitem *.mp3 这会列出所有名称以 .mp3 结尾的文件。然后使用 | 将它们传送到下一个命令。操作员。

foreach { 重命名项目 $_ $_.Name.Replace(" ", "") }

这将“”的所有实例*（在这种情况下为空格 || 这是要替换的实例）替换为空*，用“”表示，有效地从目录中的所有文件中擦除该单词。

您还可以将 get-childitem *.mp3 修改为 get-childitem - 这将重命名目录中的所有文件，而不仅仅是名称以 .mp3 结尾的文件。

** 笔记 **

如果您不喜欢上述方法，有一个很棒的软件，名为 Bulk Rename Utility。我个人使用过这个软件，你可以在 youtube 上了解如何使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-13T07:59:23.833

我面临的问题是，有可能已经有一个文件名称与您尝试赋予新文件的名称相同（例如，如果文件夹中有 2 个文件名为“file one.txt”和“file_one.txt” " 当您尝试用下划线替换空格时，一个文件将替换另一个文件）。所以我制作了这个脚本来检查新名称是否已经存在，如果存在，则在文件名的末尾放置一个数字（将数字加 1 直到没有其他具有该名称的文件）。有关更改内容的说明位于顶部（已注释掉的行）。如果使用 *.* 选项，请勿将批处理文件存储在要重命名文件的同一文件夹中。我希望这有帮助。

```
@echo off

REM Instructions
REM This script repaces spaces from file names with underscores. 
REM If you want to just remove the spaces uncomment lines 30 and 52 and comment out the lines 29 and 51\. 
REM set the following parameters. 
REM pb is the folder containing the files we want to rename (fullpath)
REM tm is a temporary folder that will be created and deleted. Just put a folder that does not exist and is not used by anything else (fullpath).
REM all is the file type you want to raname. E.g. *.* for every file, *.txt for TXTs, *.pdf for PDFs etc 
REM you don't have to change anything else

set pb=<folder containing the files to rename>
set tm=<a temp folder that does not exist>
set all=*.*

set pa=%pb%%all%

setlocal EnableDelayedExpansion

cd /d %pa%

set /a count=1

if not exist %tm% mkdir %tm%

for /f %%F in (%pa%) do (

    set name=%%~nF
    set name2=!name: =_!
    REM set name2=!name: =!
    set name3=!name2!%%~xF

    if !name2! == %%~nF ( 
        move /y %%~dpF\!name3! %tm%\ >nul
    ) else (
            if not exist %%~dpF\!name3! ( 
                if not exist %tm%\!name3! (
                    ren "%%F" "!name3!" 
                    move /y %%~dpF\!name3! %tm%\ >nul
                )
        )   
    ) 

)

:rename

for /f %%F in (%pa%) do (

    set name=%%~nF
    set name2=!name: =_!
    REM set name2=!name: =!
    set name4=!name2!%count%
    set name3=!name4!%%~xF

    if !name2! == %%~nF ( 
        move /y %%~dpF\!name3! %tm%\ >nul
    ) else (
            if not exist %%~dpF\!name3! ( 
                if not exist %tm%\!name3! (
                    ren "%%F" "!name3!" 
                    move /y %%~dpF\!name3! %tm%\ >nul
                )
        )   
    ) 

)

set /a count = %count% + 1

set /a loop = 0

for %%F in (%pa%) do (set /a loop = 1)

if %loop% equ 1 goto rename

move /y %tm%\%all% %pb% >nul

rmdir /s /q %tm% 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T08:28:14.353

由于以编程方式重命名文件是有风险的（如果你弄错了可能会造成破坏），我会使用专门为批量重命名而构建的具有空运行模式的工具，例如[renamer](https://github.com/75lb/renamer)。

此命令从当前目录中的所有文件中删除空格：

```
$ renamer --find "/\s/g" --dry-run *

Dry run

✔︎ file one.mp3 → fileone.mp3
✔︎ file two.mp3 → filetwo.mp3

Rename complete: 2 of 2 files renamed. 
```

[这里](https://github.com/75lb/renamer/wiki/Examples)有更多的重命名器用法示例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-05T13:37:40.487

> 只需将其复制粘贴到批处理文件并另存为`c:\myfolder\r.bat`

```
setlocal EnableDelayedExpansion
@echo off &cls
set p=%*
set p=!p: =!
set p=!p:^(=!
set p=!p:^)=!
set p=!p:^[=!
set p=!p:^]=!
set p=!p:^$=!
set p=!p:^&=!
set p=!p:^@=!
set p=!p:^;=!
set p=!p:^:=!
set p=!p:^,=!
set p=!p:^#=!
set p=!p:^_=!
set p=!p:^-=!
set e=%p:~-4%
ren "%*" %time:~6,2%%time:~9,2%%e%
exit 
```

在以下位置添加注册表

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\#myRENAME]
@=""

[HKEY_CLASSES_ROOT\*\shell\#myRENAME\command]
@="c:\myfolder\r.bat \"%1\"" 
```

完成，现在选择文件并只需右键单击选择`myRENAME` 所有文件将立即重命名。

# python - 根据兄弟父/兄弟值解析 xml

> ID：11270457
> 
> 赞同：0
> 
> 时间：2012-06-30T00:23:31.260
> 
> 标签：python, lxml

给定以下xml：

```
<Title>
<EST>
  <EST_Start_Date>2009-09-21</EST_Start_Date>
  <EST_End_Date>2015-12-31</EST_End_Date>
  <EST_Version>
    <Vendor_ID>asdf-200130</Vendor_ID>
    <Master_Type_HD_SD>SD</Master_Type_HD_SD>
  </EST_Version>
  <EST_Version>
    <Digital_SKU>205119</Digital_SKU>
    <Vendor_ID>qwer-205119</Vendor_ID>
    <Master_Type_HD_SD>HD</Master_Type_HD_SD>
  </EST_Version>
</EST>
</Title> 
```

和一个`Title`节点：

```
titles = node.xpath("//Title")
for title in titles:
    est=title.find('EST')
    hd_vendor_id = ? 
```

在这种情况下，我将如何提取高清供应商 ID `qwer-205118`？lxml 调用应该与给定的 Title 节点相关，因为 xml 文档中有多个标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:54:43.920

使用 XPath 的强大功能！通过在 EST_Version 元素上使用谓词，您可以找到具有 HD-Master_Type 的谓词：

```
titles = node.xpath("//Title")
for title in titles:
    hd_vendor_id = title.xpath(
        "./EST/EST_Version[Master_Type_HD_SD='HD']/Vendor_ID)") 
```

如果您只需要供应商 ID，则可以使用一个 XPath：

```
node.xpath("//Title/EST/EST_Version[Master_Type_HD_SD='HD']/Vendor_ID/text()") 
```

* * *

如果您需要从每个 EST 元素中获得更多信息，您可以坚持使用您的语法：

```
titles = node.xpath("//Title")
for title in titles:
    est=title.find('EST')
    hd_vendor_id = est.xpath("./EST_Version[Master_Type_HD_SD='HD']/Vendor_ID)" 
```

或者，例如，使用 XPath 立即选择 EST 元素：

```
ests = node.xpath("//Title/EST")
for est in ests:
    hd_vendor_id = est.xpath("./EST_Version[Master_Type_HD_SD='HD']/Vendor_ID)" 
```

# java - Aspectj @Around 切入点Java中的所有方法

> ID：11270459
> 
> 赞同：10
> 
> 时间：2012-06-30T00:24:00.333
> 
> 标签：java, aop

我正在编写一个简单的计时器方面来检测属于我的项目的所有包中的所有方法。但是，这些类中各种方法的返回类型不同，我收到以下**错误**：

它仅适用于 setter，但不适用于 getter...

> 错误：应用于不返回 void 的连接点

这是我的`timeraspect`...

```
@Around("execution(* com.myproject..*(..))")
public void log(ProceedingJoinPoint pjp) throws Throwable{

    LOG.info("TimerAspect");
    String name = pjp.getSignature().getName();
    Monitor mon = MonitorFactory.start(name);
    pjp.proceed();
    mon.stop();

    LOG.info("TimerAspect Mon" + mon);

    String printStr = mon.getLabel()+","+mon.getUnits()+","+mon.getLastValue()+","+mon.getHits()+","+mon.getAvg()+","+mon.getTotal()+","+mon.getMin()+","+mon.getMax()+","+mon.getFirstAccess()+","+mon.getLastAccess();

    File f = new File("target/stats.csv");
    BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(f, true));
    bufferedWriter.write(printStr);
    bufferedWriter.newLine();
    bufferedWriter.flush();
    bufferedWriter.close();

} 
```

非常感谢任何解决此问题的线索。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-30T00:30:01.313

您应该从您的建议调用中捕获输出，并按照以下方式从您的周围建议中返回它：

```
@Around("execution(* com.myproject..*(..))")
public Object log(ProceedingJoinPoint pjp) throws Throwable{

....
Object result = pjp.proceed();
......
return result;
} 
```

这将处理您的所有电话

# iphone - popviewcontrolleranimated 或 poptorootviewcontrolleranimated 后手势和输入停止

> ID：11270463
> 
> 赞同：0
> 
> 时间：2012-06-30T00:24:44.653
> 
> 标签：iphone, ios, uitableview, uinavigationcontroller, uigesturerecognizer

我有一个主 uinavigationcontroller，它将一个 uitableview 作为子视图加载为我的“主视图”，我推动了一个新的 uiview 控制器，然后在该视图控制器中，我向 popviewcontroller 添加了一个左导航按钮，让我回到主视图

所有这一切都很好，问题是当我回到主视图时，所有输入都是 doa，没有滑动、滚动、手势等，不能点击任何表格单元格或滚动表格

没有被扔给调试器，所以我只能假设我没有使应用程序崩溃，并且我可以在 viewdidappear 中执行影响视图、设置计时器等的编程操作，但我的屏幕输入不起作用

关于我的输入去哪里的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:30:00.960

没有任何代码很难，但您可能正在将手势识别器添加到刚刚弹出的视图中的视图中。您可以尝试将手势添加到 UINavigationController 的视图、window.view 或其他在导航堆栈推送/弹出之间保持活动状态的视图。

# ruby-on-rails-3 - rails 3中2个活动记录关系对象的联合

> ID：11270467
> 
> 赞同：0
> 
> 时间：2012-06-30T00:26:45.343
> 
> 标签：ruby-on-rails-3, activerecord

我有一个由类表示的内容模型：**content**。现在用户可以对内容进行*评分*、*评论*或两者兼而有之。我想找到用户*评分*、*评论*或*评分和评论*的所有内容。**评论表与****内容**表具有多对一的关联（意味着可以多次评论内容）。**评级**表和**内容**表之间存在类似的关系。

我在想我应该做单独的查询来查找用户的所有评分内容，然后是用户的所有评论内容，然后进行联合。但我不知道如何做一个返回活动记录关系的联合。我需要一个关系，因为我想对结果进行分页。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:11:37.910

好的，首先让我们设置您的模型。从你的解释我想你会想要这样的东西：

```
class Content < ActiveRecord::Base
  has_many :reviews
  has_many :reviewing_users, :through => :reviews, :class_name => "User"

  has_many :ratings
  has_many :rating_users, :through => :ratings, :class_name => "User"
end

class User < ActiveRecord::Base
  has_many :reviews
  has_many :reviewed_contents, :through => :reviews, :class_name => "Content"

  has_many :ratings
  has_many :rated_contents, :through => :ratings, :class_name => "Content"
end

class Review < ActiveRecord::Base
  belongs_to :content
  belongs_to :user
end

class Rating < ActiveRecord::Base
  belongs_to :content
  belongs_to :user
end 
```

然后对于给定的用户，您可以找到他们审查和/或评分的所有内容：

```
( user.reviewed_contents + user.rated_contents ).uniq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T03:12:47.073

`(user.reviewed_contents + user.rated_contents).uniq`返回一个数组，而不是一个关系，所以要小心。您可以通过尝试调用类方法`@posts`（分页除外）来测试这一点。

你仍然可以分页。只需使用`@posts.paginate`, 因为`will_paginate`gem 为数组类添加了一个**[分页](http://pathfindersoftware.com/2008/06/how-to-use-will_paginate-with-non-activerecord-collectionarray/)**方法。

# android - 不幸的是，活动已经停止了 android

> ID：11270468
> 
> 赞同：0
> 
> 时间：2012-06-30T00:27:19.163
> 
> 标签：android

我正在编写代码来编写 TextView，但是当我单击应用程序时出现错误：

> 不幸的是 aulanewboston1 已经停止。

我在`AndroidManifest.xml`

这是控制台中显示的代码和错误

```
package com.br.aulanewboston1.boston;

import java.util.Random;

import android.R.string;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.text.InputType;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.ToggleButton;

public class TextTela extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.text);
        Button chkCmd = (Button) findViewById(R.id.bResult);
        final ToggleButton passTog = (ToggleButton) findViewById(R.id.tbpassword);
        final EditText senha = (EditText) findViewById(R.id.edtextsenha);
        final TextView display =(TextView) findViewById(R.id.tvDisplay);
        passTog.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(passTog.isChecked()){
                    senha.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD); 
                }else{
                senha.setInputType(InputType.TYPE_CLASS_TEXT);
            }
        }
    });
        chkCmd.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                String check = senha.getText().toString();
                display.setText(check);

                if(check.contentEquals("left")){
                    display.setGravity(Gravity.LEFT);
                }else if(check.contentEquals("center")){
                    display.setGravity(Gravity.CENTER);
                }else if (check.contentEquals("right")){
                    display.setGravity(Gravity.RIGHT);
                }else if (check.contentEquals("blue")){
                display.setTextColor(Color.BLUE);
                }else if (check.contains("WTF")){
                    Random crazy = new Random();
                    display.setText("WFT");
                    display.setTextSize(crazy.nextInt(75));
                    display.setTextColor(Color.rgb( crazy.nextInt(265), crazy.nextInt(265), crazy.nextInt(265)));
                    switch(crazy.nextInt(3)){
                    case 0: 
                        display.setGravity(Gravity.LEFT);
                        break;
                    case 1:
                        display.setGravity(Gravity.CENTER);
                        break;
                    case 2:
                        display.setGravity(Gravity.RIGHT);
                        break;
                    }

                    }else {
                    display.setText("invalido");
                    display.setGravity(Gravity.CENTER);
                    display.setTextColor(Color.WHITE);
                }

        }

  });

}

} 
```

错误信息

```
[2012-06-29 20:09:39 - NewBoston] ActivityManager: Starting: Intent { 
    act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] 
    cmp=com.br.aulanewboston1.boston/.Tema }

[2012-06-29 20:09:39 - NewBoston] ActivityManager: Warning: Activity not started, 
    its current task has been brought to the front 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T22:00:14.137

当您不更改项目代码时。java文件、xmls、drawables等没有变化，你按下eclipse的播放按钮来运行你的应用程序。

然后，如果您的应用程序已经在前台或后台运行。Eclipse 不会将您的应用程序的新副本上传并安装到设备/模拟器。但是，它将已经运行`Activity`到前面，并会在控制台中为您留下一条消息，告诉您它已将当前活动带到前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:38:23.010

似乎您在运行将其推入后台的活动时不小心按了主页键，然后当您点击应用程序的图标时，Android 将其带入前台。这个错误很正常 :) 没什么好担心的，当它在你面前运行时，按下后退键应该会结束活动。

# ios - iOS - 恢复时出现的时钟的相关性？

> ID：11270469
> 
> 赞同：0
> 
> 时间：2012-06-30T00:27:28.447
> 
> 标签：ios, performance, background, clock, resume

我正在开发一个长期存在的、相当复杂的 iOS Cocoa 应用程序，并且我正在尝试修复从非活动状态恢复时的性能（例如，锁定设备）。该问题出现在所有版本的 iPhone 上（我们支持回 3G）。

步骤是：

1.  运行应用程序。
2.  使用睡眠/唤醒按钮（锁定按钮）锁定屏幕。
3.  恢复应用程序。该应用程序出现在它之前显示的相同视图上，但它没有响应。此外，在操作系统栏中，会出现运营商、信号、电池和位置图标，但缺少时钟。
4.  大约一秒钟后，时钟回来了，大约在同一时间，我的应用程序响应了。

我会说这是 iOS 的事情，但大多数应用程序不需要那么长时间才能回来，包括显示时钟。

从睡眠状态恢复时，在 OS 任务栏中渲染时钟有什么意义？我需要知道这代表什么时间段（在此事件/操作/委托/等之后，但在另一个之前），以便我可以缩小要检查的代码点。

当我使用 Xcode 进行调试时，这不会发生。它也不会发生在模拟器中，永远。

谢谢！

# objective-c - 试图在 Objective C 中放置一个全局 NSMutable 数组

> ID：11270479
> 
> 赞同：1
> 
> 时间：2012-06-30T00:29:14.500
> 
> 标签：objective-c

我正在做一个练习，我有 2 类歌曲和播放列表，在程序中我可以将歌曲放入播放列表中，一切正常，但我需要制作一个包含所有正常播放列表中的所有歌曲的主播放列表和有问题。

这是代码

```
 //
//  main.m
//  MyItunes
//
//  Created by Rodrigo López on 6/29/12.
//  Copyright (c) 2012 ITQ. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "Songs.h"
#import "PlayList.h"

int main (int argc, const char * argv[])
{

    @autoreleasepool {

        Songs *mySong1 = [Songs new];
        Songs *mySong2 = [Songs new];
        Songs *mySong3 = [Songs new];
        PlayList *myPlayList1=[[PlayList alloc]initWithName:@"First"];
        PlayList *myPlayList2=[[PlayList alloc]initWithName:@"Second"];

[mySong1 setTitle:@"Back In Black" setArtist:@"AC/DC" setAlbum:@"Back In Black"               setPlayt:@"4:16"];
[mySong2 setTitle:@"Medicate" setArtist:@"AFI" setAlbum:@"Crash Love" setPlayt:@"4:21"];
[mySong3 setTitle:@"Rucci" setArtist:@"Austin TV" setAlbum:@"La ultima noche" setPlayt:@"4:39"];

        [myPlayList1 addSong:mySong1];
        [myPlayList1 addSong:mySong2];
        [myPlayList2 addSong:mySong3];

        [myPlayList1 showPlayList];
        [myPlayList2 showPlayList];

         [myPlayList1 showPlayList];
         [myPlayList1 showAllSongs];

       }
    return 0;
}

    //
//  PlayList.m
//  MyItunes
//
//  Created by Rodrigo López on 6/29/12.
//  Copyright (c) 2012 ITQ. All rights reserved.
//

#import "PlayList.h"

@implementation PlayList

@synthesize playListarray,playListName;

-(id) initWithName: (NSString *) name  
{
  if(self)
  { 
    playListName = [NSString stringWithString: name]; 
    playListarray = [NSMutableArray array];
    playlistMaster=[NSMutableArray array ];
  }
    return self;
}

-(void) addSong: (Songs *) theSong
{

    [playListarray addObject:theSong];  

    [playlistMaster addObject:theSong];  

}

-(void) showPlayList
{
     NSLog(@"Play List: %@", self.playListName);
    for(Songs *theSong in playListarray)
    {
        NSLog(@"%@", theSong.title);
    }

}

-(void) showAllSongs
{
    NSLog(@"Play List: Master");
    for(Songs *theSong in playlistMaster)
    {
        NSLog(@"%@", theSong.title);
    }
}

-(NSUInteger) entries 
{
    return [playListarray count]; 
}

-(void) remove: (Songs *) theSong 
{

    [playListarray removeObjectIdenticalTo:theSong];
}

@end 
```

问题在于 NSMutable 数组，我想全局声明数组，但我不知道该怎么做，这是该程序的输出：

```
2012-06-29 19:24:06.061 MyItunes[17184:707] Play List: First
2012-06-29 19:24:06.080 MyItunes[17184:707] Back In Black
2012-06-29 19:24:06.083 MyItunes[17184:707] Medicate
2012-06-29 19:24:06.084 MyItunes[17184:707] Play List: Second
2012-06-29 19:24:06.085 MyItunes[17184:707] Rucci
2012-06-29 19:24:06.089 MyItunes[17184:707] Play List: First
2012-06-29 19:24:06.090 MyItunes[17184:707] Back In Black
2012-06-29 19:24:06.091 MyItunes[17184:707] Medicate
2012-06-29 19:24:06.091 MyItunes[17184:707] Play List: Master
2012-06-29 19:24:06.092 MyItunes[17184:707] Back In Black
2012-06-29 19:24:06.093 MyItunes[17184:707] Medicate 
```

所以在播放列表大师中，它缺少Rucci的歌曲，希望你能帮助我，非常感谢你，我很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:47:56.277

I would make your playlistMaster a "static variable" of the PlayList implementation file as described at: [Objective C Static Class Level variables](https://stackoverflow.com/questions/1063229/objective-c-static-class-level-variables). You just declare and initialize it the .m file outside of any other methods. (Don't forget to make sure it is retained.)

I should also note that there are some memory issues in your PlayList class. In particular, your initializer code should retain the member variables, like:

```
-(id) initWithName: (NSString *) name
{
    if (self = [super init]) {
        playListName = [[NSString stringWithString: name] retain];   // NOTE:  You could also do:  [[NSString alloc] initWithString: name];
        playListarray = [[NSMutableArray array] retain];    // NOTE:  You could also do:  [[NSMutableArray alloc] init];
        playlistMaster = [[NSMutableArray array] retain];    // ditto
    }
    return self;
} 
```

If you do this, you will need to add a `dealloc` method that releases each of these. But if you don't they may be released before you try to use them.

# .net - 到 Azure Blob 的增量/差异备份

> ID：11270482
> 
> 赞同：3
> 
> 时间：2012-06-30T00:29:35.200
> 
> 标签：.net, azure, microsoft-sync-framework, azure-blob-storage

是否可以使用 Azure Blob 实现增量/差异备份？我只想发送更改的数据。也许有块斑点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:41:14.210

我建议开始研究 Page Blob 和 Block Blob 架构以及它们如何帮助您实现目标。每个都有一些限制，但是如果你能理解它们是如何工作的，你就可以想出一个解决方案。

**块 Blob**针对流式工作负载。修改和更新块 blob 是一个两阶段更新过程，您可以添加/修改/上传所有新的更改，然后在添加修改取消提交 + 添加的情况下，如果是上传后的新，则提交更改。

**页 Blob**针对随机写入工作负载。页面 blob 使用立即（一步过程）更新，一旦对一组连续页面的写入请求成功，写入就已提交。

所以你可以决定你有什么样的工作负载，然后选择页面或块 blob。Windows Azure 存储团队在此处提供了有关如何使用 Page Blob 的详细信息：

[使用 Windows Azure 页面 Blob 以及如何有效地上传和下载页面 Blob](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/11/using-windows-azure-page-blobs-and-how-to-efficiently-upload-and-download-page-blobs.aspx)

# perl - 在 Perl 中，如何将字符串中的多个十进制数字转换为等效的十六进制？

> ID：11270489
> 
> 赞同：3
> 
> 时间：2012-06-30T00:30:27.197
> 
> 标签：perl, printf

在 Perl 中，如何将文件一行中的多个十进制数字转换为十六进制等效值？

我有代码将转换找到的最后一个数字但保留先前的数字未转换，我想转换所有数字而不仅仅是找到的最后一个数字：

```
if ($line =~ /[0-9]+/) {
   $loc = index($line,/\s+[0-9]+\s*/);
   $mybyte = substr($line,$loc);
   $newbyte = sprintf("%x\n", $mybyte);
   $newline = substr($line,0,$loc).$newbyte;
   print my_report $newline;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T00:34:13.933

```
$line =~ s/([0-9]+)/sprintf "%X", $1/eg; 
```

# c - C 标准对位移比类型宽度更多的位有什么看法？

> ID：11270492
> 
> 赞同：10
> 
> 时间：2012-06-30T00:31:07.150
> 
> 标签：c, bit-shift

考虑以下代码：

```
int i = 3 << 65; 
```

我希望结果是`i==0`，但实际结果是`i==6`。通过一些测试，我发现使用以下代码：

```
int i, s;
int a = i << s;
int b = i << (s & 31); 
```

`a`和的值`b`始终相同。

C 标准是否说明移动超过 32 位（类型的宽度`int`）或者这是未指定的行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-30T00:35:12.230

从我的 WG12/N1124 草案（*不是标准，但对我来说足够好），6.5.7**位移位运算符*中有以下块：

> 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

所以，*未定义*。当心。

# c# - 返回对象时如何抛出异常？

> ID：11270497
> 
> 赞同：6
> 
> 时间：2012-06-30T00:31:56.040
> 
> 标签：c#, exception

我有一个像这样的网络方法作为网络服务的一部分

```
public List<CustomObject> GetInformation() {
    List<CustomObject> cc = new List<CustomObject>();

    // Execute a SQL command
    dr = SQL.Execute(sql);

    if (dr != null) {
       while(dr.Read()) {
           CustomObject c = new CustomObject()
           c.Key = dr[0].ToString();
           c.Value = dr[1].ToString();
           c.Meta = dr[2].ToString();
           cc.Add(c);
       }
    }
    return cc;
} 
```

我想将错误处理合并到其中，以便如果没有返回行，或者如果`dr`是`null`，或者如果出现其他问题，我想以错误描述的形式返回异常。但是，如果函数正在返回`List<CustomObject>`，当出现问题时，我如何向客户端返回错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:40:35.417

我将创建一个包装类，其中包含您`List`的 of`CustomObject`和错误信息作为另一个属性。

```
public class MyCustomerInfo
{
  public List<CustomObject> CustomerList { set;get;}
  public string ErrorDetails { set;get;}

  public MyCustomerInfo()
  {
    if(CustomerList==null)
       CustomerList=new List<CustomObject>();  
  }
} 
```

现在我将从我的方法返回这个类的一个对象

```
public MyCustomerInfo GetCustomerDetails()
{
  var customerInfo=new MyCustomerInfo();

  // Execute a SQL command
    try
    {
      dr = SQL.Execute(sql);

      if(dr != null) {
         while(dr.Read()) {
           CustomObject c = new CustomObject();
           c.Key = dr[0].ToString();
           c.Value = dr[1].ToString();
           c.Meta = dr[2].ToString();
           customerInfo.CustomerList.Add(c);
         }
      }
      else
      {
          customerInfo.ErrorDetails="No records found";
      } 
   }
   catch(Exception ex)
   {
       //Log the error in this layer also if you need it.
       customerInfo.ErrorDetails=ex.Message;
   }     
  return customerInfo;    
} 
```

**编辑**：为了使其更可重用和通用，创建一个单独的类来处理这个是个好主意。我将在我的基类中将其作为属性

```
public class OperationStatus
{
  public bool IsSuccess { set;get;}
  public string ErrorMessage { set;get;}
  public string ErrorCode { set;get;}
  public string InnerException { set;get;}
}
public class BaseEntity
{
  public OperationStatus OperationStatus {set;get;}
  public BaseEntity()
  {
      if(OperationStatus==null)
         OperationStatus=new OperationStatus();
  } 
} 
```

并让您参与事务的所有子实体都**继承**自这个基类。

```
 public MyCustomInfo : BaseEntity
   {
      public List<CustomObject> CustomerList { set;get;}
      //Your constructor logic to initialize property values
   } 
```

现在从您的方法中，您可以根据需要设置 OperationStatus 属性的值

```
public MyCustomInfo GetThatInfo()
{
    var thatObject=new MyCustomInfo();
    try
    {
       //Do something 
       thatObject.OperationStatus.IsSuccess=true;
    }
    catch(Exception ex)
    {
      thatObject.OperationStatus.ErrorMessage=ex.Message;
      thatObject.OperationStatus.InnerException =(ex.InnerException!=null)?ex.InnerException:"";
    }
    return thatObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:24:33.433

你在使用 WCF 吗？如果是这样考虑使用[故障](http://msdn.microsoft.com/en-us/library/ms733841)。

# bash - 获取 ssh 远程命令以终止，以便具有并行选项的 xargs 可以继续

> ID：11270503
> 
> 赞同：1
> 
> 时间：2012-06-30T00:32:44.343
> 
> 标签：bash, ssh, xargs

我正在运行类似于以下的命令

```
getHosts | xargs -I{} -P3 -n1 ssh {} 'startServer; sleep 5; grep -m 1 "server up" <(tail -f log)' 
```

问题是，即使在服务器启动之后，ssh 有时也会挂起一段时间。该命令是否有任何问题可能导致它不终止以便可以继续并行执行？当我在远程 shell 中运行命令时，对即将启动的服务器的检查似乎是可靠的，并且在将“服务器启动”写入日志时准时关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:43:31.470

我可以通过两种方式看到它无法终止：

1.  远端挂起`startServer`
2.  服务器在“服务器启动”之后生成了这么多消息，`tail -f`不会捕获该行并永远等待（因为`tail`默认情况下会占用最后 10 行）

`ssh`也可能由于多种原因无法连接：主机关闭、密钥丢失等。我会以写入日志和/或拥有的形式添加一些错误检查条件

```
|| echo "Failed to do stuff" | mail -s SUBJECT TO@WHO.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:25:51.893

而不是远程命令

```
startServer; sleep 5; grep -m 1 "server up" <(tail -f log) 
```

我会用

```
grep -m 1 "server up" <(tail -F log -n 0) & startServer ; wait 
```

差异：

*   *在尝试重新启动服务器之前*开始跟踪日志，这样我们就不会错过任何消息。我们从日志的末尾开始，所以我们看不到任何以前的“服务器启动”消息。
*   使用`tail`'`-F`选项而不是`-f`，这样如果日志文件被轮换，我们将跟随新文件，而不是继续无用地跟随旧文件。

# layout - 如何在 SocketAppender 中使用模式布局

> ID：11270504
> 
> 赞同：1
> 
> 时间：2012-06-30T00:32:48.740
> 
> 标签：layout, appender

我读过 org.apache.log4j.net.SocketAppender 不使用布局。但是，我真的需要格式化我的日志并且我需要使用 ConversionPattern。有人知道这个的替代品吗？我必须使用某种 SocketAppender。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:20:01.220

通过 SocketAppender 发送的日志是序列化的，并且在反序列化之前不能为其指定布局。在远程主机上，您将可以访问所有相同的信息，并且应该能够指定打印日志的布局。因此不同之处仅在于您指定了另一侧的布局。

# unix - 将远程文件放入hadoop而不将其复制到本地磁盘

> ID：11270509
> 
> 赞同：36
> 
> 时间：2012-06-30T00:33:44.437
> 
> 标签：unix, ssh, hadoop, copying, piping

我正在编写一个 shell 脚本，以便在生成数据后立即将它们放入 hadoop。我可以 ssh 到我的主节点，将文件复制到那里的文件夹，然后将它们放入 hadoop。我正在寻找一个 shell 命令来摆脱将文件复制到主节点上的本地磁盘。为了更好地解释我需要什么，您可以在下面找到我到目前为止的内容：

1）将文件复制到主节点的本地磁盘：

```
scp test.txt username@masternode:/folderName/ 
```

我已经使用密钥设置了 SSH 连接。因此，无需密码即可执行此操作。

2）我可以使用ssh远程执行hadoop put命令：

```
ssh username@masternode "hadoop dfs -put /folderName/test.txt hadoopFolderName/" 
```

我正在寻找的是如何将这两个步骤通过管道/组合为一个步骤，并跳过 masterNode 本地磁盘上文件的本地副本。

谢谢

换句话说，我想以一种我可以的方式传递几个命令

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-30T00:40:16.360

试试这个（未经测试）：

```
cat test.txt | ssh username@masternode "hadoop dfs -put - hadoopFoldername/test.txt" 
```

我使用了类似的技巧来复制目录：

```
tar cf - . | ssh remote "(cd /destination && tar xvf -)" 
```

这会将 local- 的输出发送`tar`到 remote- 的输入`tar`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-30T12:44:39.633

您在其上生成数据的节点是否能够到达您的每个集群节点（名称节点和所有数据节点）。

如果你确实有数据连接，那么你可以从生成数据的机器上执行 hadoop fs -put 命令（假设你也安装了 hadoop 二进制文件）：

```
#> hadoop fs -fs masternode:8020 -put test.bin hadoopFolderName/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T01:27:10.437

Hadoop 提供了几个 REST 接口。检查[Hoop](http://www.cloudera.com/blog/2011/07/hoop-hadoop-hdfs-over-http/)和[WebHDFS](http://hadoop.apache.org/common/docs/stable/webhdfs.html)。您应该能够在不将文件复制到主服务器的情况下从非 Hadoop 环境中复制文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T05:47:52.037

创建管道，然后使用管道进行传输。这样文件就不会存储在本地。

```
mkfifo transfer_pipe

scp remote_file transfer_pipe| hdfs dfs -put transfer_pipe <hdfs_path> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T10:14:21.730

（未经测试）

由于您创建数据的节点可以访问互联网，那么也许您可以安装 hadoop 客户端节点软件，然后将其添加到集群中 - 在正常 hadoop fs -put 之后，然后断开并删除您的临时节点 - hadoop 系统应该然后自动在你的hadoop集群中复制你的文件块

# ruby-on-rails - Rails ActiveRelation 子关系

> ID：11270510
> 
> 赞同：0
> 
> 时间：2012-06-30T00:33:46.183
> 
> 标签：ruby-on-rails, activerecord, active-relation

我是 Rails 新手，对访问 ActiveRecord 中的关系有疑问。

考虑这个伪代码：

```
class Organisation
has_many: :projects

class Project
has_many: :tests

class Test
belongs_to: project 
```

有效3级。我需要访问特定组织的测试，尽管我只能像项目一样深入。

IE

```
@organisation = Organisation.find(params[:id], :include => [:projects]) 
```

真的，我需要做的是

```
@organisation.projects.scripts.all 
```

但从我读的内容来看，那是不可能的。那么，这个问题的解决方案是什么？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:14:47.200

你想要这样的东西：

```
@organisation = Organization.includes(:projects => :tests).find(params[:id])
@organization.projects.collect(&:tests) 
```

这将急切地加载一个组织及其所有项目和测试，然后它将收集与该组织相关的所有项目的所有测试。

# jquery - 尝试使用 if 语句分配 jQuery 值

> ID：11270511
> 
> 赞同：0
> 
> 时间：2012-06-30T00:34:11.940
> 
> 标签：jquery, variables, if-statement

我有不同的“抽屉”，可以根据页面上的导航链接滑动打开和关闭。我正在使用一些 jQuery 来打开和关闭它们，并根据打开的“抽屉”更改页面背景和链接颜色。

我还使用一些 jQuery 来淡化链接上的悬停颜色。一切正常，除了让链接在鼠标移出时返回新的基色。它始终默认为原始 css 值。所以，我知道我必须进入以下内容并根据我希望链接在鼠标移出时返回的颜色来更改 .mouseout 颜色。

如果我只是像下面的例子那样设置一个变量，一切都很好，它工作得很好。

```
 var originalColor = "#123456";

    jQuery.fn.linkFader = function(settings) {
      settings = jQuery.extend({
        returnColor: originalColor,
        color: '#8dc63f',
        duration: 600
      }, settings);
      return this.each(function() {
        $(this).mouseover(function() { $(this).stop(true, true).animate({ color: settings.color },settings.duration); });
        $(this).mouseout(function() { $(this).stop(true, true).animate({ color: settings.returnColor },settings.duration); });
        $(this).click(function() { $(this).stop(true, true).animate({ color: settings.color },settings.duration); });
      });
    };

    $(document).ready(function() {
      $('.fader').linkFader({
      });
    }); 
```

BUT... If I try to assign the variable "originalColor" like the following, it fails. I need the script to figure out which "drawer" is open, and set the variable to the proper color. What am I doing wrong here?

```
 var originalColor='';
      if($('#drawerA').is(":visible")){
        var originalColor = "#123456";
      }

      if($('#drawerB').is(":visible")){
        var originalColor = "#456789";
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:46:00.130

*Elements with visibility: hidden or opacity: 0 are considered **visible**, since they still consume space in the layout.* - [jQuery API](http://api.jquery.com/visible-selector/)

That's why your 2nd if always gets hit.

You have to hide it with `display: none`

**FYI**

Visible elements are elements that are **not**:

*   set to `display:none`
*   form elements with `type="hidden"`
*   Width and height set to `0`
*   A hidden parent element (this also hides child elements)

# css - 如何创建具有特定格式的 div？

> ID：11270516
> 
> 赞同：0
> 
> 时间：2012-06-30T00:35:17.653
> 
> 标签：css

我需要创建一个 div 女巫将填充另一个图像，在上图的口袋中： ![图片](../Images/43e7cce443d3005a2047592e0f5a84f3.png)

图像没有固定大小，因此需要重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:30:14.107

具体看一下 CSS3 转换`rotate`（可能使用倾斜，具体取决于您的用例）。您可能必须将图片*放在*裤子后面，以使其成为正确的形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:38:25.630

你可以用 CSS 来做，但我认为使用照片编辑软件并粘贴到图像上并将其另存为新文件会容易得多。

# c# - 使用委托C#将值传递给未指定的对象

> ID：11270521
> 
> 赞同：1
> 
> 时间：2012-06-30T00:35:58.043
> 
> 标签：c#, winforms

我有一个 FlowLayoutPanel 包含未指定数量的标签，当我双击其中一个时，将出现一个包含**TextBox**和**Button**的新表单，代码如下：

```
foreach (Label lb in FlowLayoutPanel1.Controls)
{
    lb.MouseDoubleClick+=new MouseEventHandler(lb_MouseDoubleClick);
}

private void lb_MouseDoubleClick(object sender, MouseEventArgs e)
{
    NewForm form = new NewForm();
    form.ShowDialog();
    ((Label)sender).Text = ...;//I want get text from TextBox of the NewForm here
} 
```

我想从NewForm 的**TextBox**中获取 Text 并将 Text 分配给当用户单击 Form 的**Button**时调用 Form 的对象，我不知道如何使用委托来执行此操作，请帮忙！感谢您阅读本文！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:43:11.153

To be honest, I think your best bet might be to store the TextBox value in a static variable and simply take the value from there. It'll avoid a lot of complicated work.

That said, I'm not sure of how you've implemented the NewForm class. If you've set that up to have the textbox, or the textbox's value, publicly accessible, you could set it a lot more simply.

# python - 从 python 执行时如何打印和捕获 7zip 的 % 进度标记？

> ID：11270524
> 
> 赞同：4
> 
> 时间：2012-06-30T00:36:08.410
> 
> 标签：python, 7zip

当 7zip 从命令行运行时，它将使用一系列 '%' 符号打印一个进度条。

从 Python 中执行 7zip 时，我想同时捕获和打印这个进度条。我该怎么做呢？

我目前使用的 Python 代码：

```
from subprocess import Popen, PIPE
pipe = Popen('7za.exe a -tgzip "e:\\backup\\sch Testerr 2012 06 23 17-27.gzip" "E:/archiv"' , stdout=PIPE)
text = pipe.communicate()[0]
print text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:39:45.530

来自[`communicate`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)（强调我的）：

> 从 stdout 和 stderr 读取数据，直到到达文件结尾。**等待进程终止。**

考虑[`poll`](http://docs.python.org/library/subprocess.html#subprocess.Popen.poll)改用：

```
from subprocess import Popen, PIPE
pipe = Popen('7za.exe a -tgzip "e:\\backup\\sch Testerr 2012 06 23 17-27.gzip" "E:/archiv"', stdout=PIPE)
while True: # Feeling fancy?  add a timeout condition here...
    if pipe.poll():
        break
    # consider reading from stdin and printing as your needs indicate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:28:42.833

你想要的是 sys.stdout.flush()。

但是，您可能需要在单独的线程上执行刷新，因为主线程可能会被阻塞，直到 Popen 中的底层进程完成。

编辑：使用布赖恩的回答来帮助（并避免多线程），我设想了一个这样的解决方案：

```
from subprocess import Popen, PIPE
pipe = Popen('7za.exe a -tgzip "e:\\backup\\sch Testerr 2012 06 23 17-27.gzip" "E:/archiv"' , stdout=PIPE)

# Assuming Python thread continues after POpen invoke (but before 7za is finished)
while (not pipe.poll()):
    sys.stdout.flush()
    time.sleep(1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-02T12:13:39.483

我发现 7za 在重定向标准输出时会抑制进度输出。
所以，我写了一个补丁。
'sopg' 选项即使在 stdout 被重定向或管道传输时也启用进度输出。 [https://github.com/photom/p7zip/commit/2baacd6c354fbde19ebc83d185e73f6d9bd62517](https://github.com/photom/p7zip/commit/2baacd6c354fbde19ebc83d185e73f6d9bd62517)

`$ 7za x -sopg ..7z`

# ios - 将 iPad 连接到 Mac Mini 以进行 Xcode 开发

> ID：11270525
> 
> 赞同：0
> 
> 时间：2012-06-30T00:36:22.340
> 
> 标签：ios, xcode, connection, device

我似乎无法在 iPad 和 Mac Mini 之间获得任何认可。我正在使用 iPad 随附的白色 USB 电缆连接它们。尝试重新启动广告恶心。这就像两个惰性物体，两边都没有迹象表明两者是相连的。没有灯光、声音或动画。所有的教程都说只是连接它们，并没有提到如果这个基本步骤失败该怎么办。我在其他论坛上看到了一些类似的问题，但令人沮丧的是，他们没有得到答复。任何帮助，将不胜感激！益民

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T00:43:48.553

In Xcode, you need to go to **Organizer** `Shift`+`Command`+`2`. On the left sidebar, choose the iPad you want to use for development, for example:

![enter image description here](../Images/b2c85000a6bf3ac674574d2f8b4a0a1f.png)

Alternatively, you can try and kill **iTunes Helper** in from Activity Monitor and then relaunch iTunes.

If all else fails, try another USB port or try another USB cable.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T13:40:33.587

需要先在 iTunes 中设置设备。许多教程似乎省略了此步骤，或者它可能是一个新功能并且教程已过时。

无论如何，如果在连接新设备时能够进行某种视觉确认，并且可能会就下一步做什么提出建议，那将会很有帮助。

另一方面，现在在 Xcode 中设置配置文件似乎大大简化了。无需复制 ID、运行密钥生成器等。

# selenium - PHPUnit_Selenium 代码覆盖是否有效？

> ID：11270527
> 
> 赞同：3
> 
> 时间：2012-06-30T00:36:45.603
> 
> 标签：selenium, phpunit, code-coverage

[在 PHPUnit docs](http://www.phpunit.de/manual/current/en/selenium.html)中，它说可以获得代码覆盖率数据：

> PHPUnit_Extensions_SeleniumTestCase 可以为通过 Selenium 运行的测试收集代码覆盖率信息：
> 
> 1.  将 PHPUnit/Extensions/SeleniumTestCase/phpunit_coverage.php 复制到您的网络服务器的文档根目录中。
>     
>     
> 2.  在您的网络服务器的 php.ini 配置文件中，将 PHPUnit/Extensions/SeleniumTestCase/prepend.php 和 PHPUnit/Extensions/SeleniumTestCase/append.php 分别配置为 auto_prepend_file 和 auto_append_file。
>     
>     
> 3.  在扩展 PHPUnit_Extensions_SeleniumTestCase 的测试用例类中，使用 protected $coverageScriptUrl = 'http://host/phpunit_coverage.php'; 配置 phpunit_coverage.php 脚本的 URL。

我无法让它输出任何覆盖信息。我可以通过正常的单元测试获得代码覆盖率信息。

对于我运行的应用程序，`http://localhost/ts2_templates/`我已复制`phpunit_coverage.php`到`http://localhost/phpunit_coverage.php`.

我在 php.ini 中添加了以下内容：

```
auto_prepend_file = "/path/to/pear/share/pear/PHPUnit/Extensions/SeleniumTestCase/prepend.php"
auto_append_file = "/path/to/pear/share/pear/PHPUnit/Extensions/SeleniumTestCase/append.php" 
```

...并验证他们是用`die("yep it's me");`.

最后，我在我的测试用例中添加了以下内容：

```
<?php

class WebTest extends PHPUnit_Extensions_Selenium2TestCase
{
    # added line below
    protected $coverageScriptUrl = 'http://localhost/phpunit_coverage.php';

    protected function setUp()
    {
        $this->setBrowser('firefox');
        $this->setBrowserUrl('http://localhost/ts2_templates');
    }

    public function testTitle()
    {
        $this->url('http://localhost/ts2_templates');
        $this->assertContains('test', $this->title());
    }
}

?> 
```

这是由 PHPStorm 生成的用于运行代码覆盖率测试的命令：

`/Applications/MAMP/bin/php5.3/bin/php -dxdebug.coverage_enable=1 /private/var/folders/pp/0t4y41f95j5313qm_f8b42fw0000gn/T/ide-phpunit.php --coverage-clover /path/to/coverage/ts2_templates$WebTest.coverage --no-configuration WebTest /Users/Ian/php/ts2_templates/tests/WebTest.php`

下面是覆盖 XML 文件的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<coverage generated="1341015508">
    <project timestamp="1341015508">
        <metrics files="0" loc="0" ncloc="0" classes="0" methods="0" coveredmethods="0" conditionals="0" coveredconditionals="0" statements="0" coveredstatements="0" elements="0" coveredelements="0"/>
    </project>
</coverage> 
```

测试本身通过。

我已经验证代码中的任何地方都没有退出或死亡语句。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:39:42.643

我也有一些问题让事情正常工作。Samuel Goldstein[在 YII 论坛上](http://www.yiiframework.com/forum/index.php/topic/31373-selenium-code-coverage-is-blank/page__p__165738#entry165738)的以下帖子帮助了我：

> 我最终将 prepend.php 和 append.php 移动到我项目的文档根目录中。
> 
> 我还发现临时文件位置有所不同 - 我最初试图将它们保存到`/tmp/`PHP 默默地失败了。当我更改`$GLOBALS['PHPUNIT_COVERAGE_DATA_DIRECTORY']`并`myroot/protected/runtime/tmp`在该目录上执行 chmod 777 时，它开始工作。
> 
> 可能让您感到沮丧的一件事是，通过 Ajax 运行的代码不会被标记为被覆盖。
> 
> 这似乎是 Selenium 的一个已知问题。谷歌“github sebastianbergmann phpunit-selenium 问题”并追踪[已关闭的问题 #22](https://github.com/sebastianbergmann/phpunit-selenium/issues/22)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:47:36.623

它肯定是有效的。我已经根据文档在 symfony 中设置了 selenium 测试来测量覆盖率。

我遇到的最大问题是，覆盖数据的文件路径错误，因此无法将源与覆盖数据对齐。这是因为我从不同的地方执行测试，因为服务器将文件保存在其中。因此我调整了`append.php`以重写源文件所在位置的路径。

# mysql - 高效地将大型 mysql2 结果写入 CSV

> ID：11270528
> 
> 赞同：3
> 
> 时间：2012-06-30T00:36:46.020
> 
> 标签：mysql, ruby

我们正在我们刚刚构建的 CMS 中构建 CSV 导出机制，但我们无法在包含数百万行的结果集上保持内存不足。将 1MM+ 行结果从 MySQL（通过`mysql2`gem）写入 CSV 的最佳方法是什么。如果有什么不同的话，我们使用的是 Ruby 1.9.3p194 和 MySQL 5.5。我们的主要目标是减少 Ruby 进程的内存消耗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T15:56:00.517

默认情况下，mysql2 缓存它为其结果集创建的 ruby​​ 对象。如果你关闭它，那么内存消耗应该会大大减少。例如你可能会做

```
require 'mysql2'
client = Mysql2::Client.new(:host => "localhost", :username => "someuser")
client.query 'use some_db'

CSV.open('output.csv', 'w') do |csv|
  results = client.query("SELECT * FROM big_table")
  results.each(:cache_rows => false) do |row| 
    csv << [row['column_a'], row['column_b']]
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T00:38:37.360

[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)或[*`mysqldump`*](http://dev.mysql.com/doc/en/mysqldump.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T00:48:24.753

如果您出于某种原因不想使用 eggyal 的解决方案，我会使用and`OUTFILE`将查询分成批次：`LIMIT``OFFSET`

```
SELECT ... LIMIT 5000 OFFSET 5000 
```

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

内存消耗将来自于从 1M+ 的大查询创建一个大的单个 ruby​​ 数组。通过将其拆分为更小的批次并将每个批次依次转储到 CSV 文件中，将有助于降低内存消耗。

# android - 运行 doInBackground 方法时出现空指针异常

> ID：11270531
> 
> 赞同：0
> 
> 时间：2012-06-30T00:36:59.307
> 
> 标签：android, dropbox

我正在尝试将文件上传到保管箱，我还创建了一个进度条来检查其状态，但在执行时会引发异常。我创建了一个 UploadFile 类的对象并调用 UploadFile 函数，传递的参数是 UploadData.this, mApi,FILE_DIR,file。

```
public class UploadFile extends AsyncTask<Void, Long, Boolean> {
private DropboxAPI<?> mApi;
private String mPath;
private File mFile;
private long mFileLen;
private UploadRequest mRequest;
private Context mContext;
private final ProgressDialog mDialog;
private String mErrorMsg;
public UploadFile(Context context, DropboxAPI<?> api, String dropboxPath,
        File file) 
{
    mContext = context.getApplicationContext();
    mFileLen = file.length();
    mApi = api;
    mPath = dropboxPath;
    mFile = file;

    mDialog = new ProgressDialog(context);
    mDialog.setMax(100);
    mDialog.setMessage("Uploading " + file.getName());
    mDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mDialog.setProgress(0);
    mDialog.setButton("Cancel", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // This will cancel the putFile operation
            mRequest.abort();
        }
    });
    mDialog.show();
}

@Override
protected Boolean doInBackground(Void... params) {
    try {
        FileInputStream fis = new FileInputStream(mFile);
        String path = mPath + mFile.getName();
        mRequest = mApi.putFileOverwriteRequest(path, fis, mFile.length(),
                new ProgressListener() {
            @Override
            public long progressInterval() {
                return 500;
            }
            public void onProgress(long bytes, long total) {
                publishProgress(bytes);
            }
        });

        if (mRequest != null) {
            mRequest.upload();
            return true;
        }

    } catch (DropboxUnlinkedException e) {
        mErrorMsg = "This app wasn't authenticated properly.";
    } catch (DropboxFileSizeException e) {
        mErrorMsg = "This file is too big to upload";
    } catch (DropboxPartialFileException e) {
        mErrorMsg = "Upload canceled";
    } catch (DropboxServerException e) {
        if (e.error == DropboxServerException._401_UNAUTHORIZED) {
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {

        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {

        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        mErrorMsg = "Unknown error.  Try again.";
    } catch (FileNotFoundException e) {
    }
    return false;
}

@Override
protected void onProgressUpdate(Long... progress) {
    int percent = (int)(100.0*(double)progress[0]/mFileLen + 0.5);
    mDialog.setProgress(percent);
}

@Override
protected void onPostExecute(Boolean result) {
    mDialog.dismiss();
    if (result) {
        showToast("Image successfully uploaded");
    } else {
        showToast(mErrorMsg);
    }
}

private void showToast(String msg) {
    Toast error = Toast.makeText(mContext, msg, Toast.LENGTH_LONG);
    error.show();
}
} 
```

这是日志（我是新手，我不正确理解日志）

```
06-30 06:18:34.400: W/dalvikvm(422): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
06-30 06:18:34.410: E/AndroidRuntime(422): FATAL EXCEPTION: AsyncTask #1
06-30 06:18:34.410: E/AndroidRuntime(422): java.lang.RuntimeException: An error occured while executing doInBackground()
06-30 06:18:34.410: E/AndroidRuntime(422):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.lang.Thread.run(Thread.java:1096)
06-30 06:18:34.410: E/AndroidRuntime(422): Caused by: java.lang.NullPointerException
06-30 06:18:34.410: E/AndroidRuntime(422):  at com.sachin.UploadFile.doInBackground(UploadFile.java:59)
06-30 06:18:34.410: E/AndroidRuntime(422):  at com.sachin.UploadFile.doInBackground(UploadFile.java:1)
06-30 06:18:34.410: E/AndroidRuntime(422):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-30 06:18:34.410: E/AndroidRuntime(422):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:44:38.860

确保正确初始化

```
UploadRequest mApi; 
```

因为不这样做会导致`NullPointerException`方法`onClick`被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:27:26.160

在有异常的行上放置一个断点并调试您的应用程序。当它停在那里时，检查您在该行上使用的所有变量值。如果一个或多个为空，则存在您的错误。这些是您在该方法中使用之前忘记初始化的变量。

# apache-flex - 将 ObjectProxy 强制转换为 ActionScript 中的对象/字典

> ID：11270533
> 
> 赞同：0
> 
> 时间：2012-06-30T00:37:09.760
> 
> 标签：apache-flex, actionscript, dictionary, casting

我如何在不进行深度遍历的情况下做到这一点？

我正在使用 as3corelib 的 JSON 编码器，它的编码方式与预期的不同`if ( describeType( o ).@name.toString() != "Object"`。

我正在调用使用 HttpService 加载一些数据，并将其作为 mx.utils::ObjectProxy 对象返回，其 .object 属性受到保护。

我尝试过使用`Object(o)`and进行投射`o as Object`，但这些不会改变`describeType`寻找的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:01:02.873

默认情况下，HTTP 服务的变量“makeObjectsBindable”设置为“true”。将其设置为 false，您应该有一个对象而不是 objectProxy

# openerp - 在 OpenERP 6.1 Web 客户端中调试销售订单工作流程

> ID：11270536
> 
> 赞同：0
> 
> 时间：2012-06-30T00:37:38.493
> 
> 标签：openerp

我正在测试 OpenERP 6.1 Web 客户端，有时我的销售订单或其他类型的文档由于某种原因卡住了。我希望能够查看此文档的工作流程图，以准确了解它卡在哪里。

发生在我身上的一个例子是一个销售订单已经发货并且发票已经支付，但是销售订单仍然没有完成。经过一番挖掘，我发现其中一个采购仍在运行。

我仍然可以从 GTK 客户端打印工作流程，但没有办法从 Web 客户端打印它吗？

我找到了几种进入屏幕的方法，可以让我编辑工作流程，但这不是我想要的。我想打印显示打开文档的工作流实例当前状态的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:27:00.920

是的，我同意 Ruchir 的评论，即在 Web 客户端中您不能打印工作流程，但我想提醒您，从我们[`Process View`](http://doc.openerp.com/v6.0/book/7/7_18_Process/index.html#ch-process)实施的一些视图中，这些视图是交互式的，对展示您的业务流程很有用。

要查看如何使用它，请点击以下链接[管理您的销售报价](http://doc.openerp.com/v6.0/book/6/6_16_Sales/6_16_Sales_quotations.html#sales-quotations)单这将在最后指导您如何使用流程视图。就像当你起草你的报价单时你的一些过程 Ndoe 将是红色结束颜色其他将是灰色然后如果你前进状态将不断变化，这里的优势是它们是交互式的，你可以跳转到特定节点相关的视图，所以你可以非常快速和互动地推动您的销售过程。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:38:17.270

从 webclient 无法打印工作流。所以为此你必须使用 GTK 客户端。

# java - Eclipse 中的 Maven 选项消失了

> ID：11270537
> 
> 赞同：4
> 
> 时间：2012-06-30T00:37:59.347
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

我重新启动了计算机，并重新启动了装有 Ubuntu 12.04 的 VM，然后重新启动了 Eclipse。然后我注意到构建存在错误，所以我在终端的 repo 上做了一个“mvn clean install”，然后我在 Eclipse 中重新导入了 Maven 项目（当该选项仍然可用时）。导入完成后，我注意到它说 mvn 缺少 m2e 中的“解包”命令。所以我想，我需要更新软件，所以我进入帮助 > 检查更新，然后我猜它找到了更好的 m2e 版本，但现在“导入现有 Maven 项目”已经消失了。我尝试定期导入它，但是 'src/java/main' 和 'src/java/test' 并没有区分为不同的特殊文件夹。

有没有其他人遇到过这个问题？如果是这样，你做了什么来解决这个问题。

在此先感谢，
ejay

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T02:31:32.873

如果您右键单击项目并选择配置，它是否提供将项目转换为 Maven 特性？

通常，在任何工具上使用“清理”选项都会删除被视为“次要”的文件和文件夹，即可以轻松地重新创建它们。在这种情况下，这可能包括一些配置文件。

# java - 对象创建并将它们放入二维数组

> ID：11270538
> 
> 赞同：1
> 
> 时间：2012-06-30T00:38:16.243
> 
> 标签：java, object, multidimensional-array

我在使用 2D 数组和插入需要 3 个参数（int x、int y、int cost）的对象时遇到了困难。这是搜索算法的开始，诚然，我的开始很糟糕。我将粘贴下面的代码。当我尝试运行此代码时收到编译错误，我很确定它很简单，但我无法解决它。我打算用来实现主要算法的 Map2 类，例如排序等。

```
 import java.util.Arrays;

    public class Map2 {

        public static void main (String args[]){

         Points[][] grid = new Points[4][4];

         for(int i = 0; i < grid.length; i++){
             for(int j = 0; j < grid.length; j++){
                 grid[i][j] = new Points(i,j,1);
             }

         }
         System.out.print(Arrays.deepToString(grid));

    }
    } 
```

这个类是我的对象，它包含从一个位置移动到下一个位置的移动成本（下一步显然是确定邻居），是的，这是尝试创建一个有效的 A 星算法的一部分。

```
 public class Points {
     int x;
     int y;
     int movement_cost;

    public  Points(int iX, int iY, int cost){
        x = iX;
       y = iY;
        movement_cost = cost;

    }

    public int getX(){
        return x;
    }
    public int getY(){
        return y;
    }
    public int getMovementCost(){
        return movement_cost;
    }
    public void setX(int x){
        this.x = x;
    }
    public void setY(int y){
        this.y = y;
    }
    public void setMovementCost(int cost){
        this.movement_cost = cost;
    }
    public String toString(){
        return ""+getX()+ ""+getY()+""+getMovementCost();
    }
} 
```

这是编译后读出的控制台（内存中有3个地址空间）

```
 run:[[001, 011, 021, 031], [101, 111, 121, 131], 
[201, 211, 221, 231], [301, 311, 321, 331]]
BUILD SUCCESSFUL (total time: 2 seconds) 
```

我希望这里很简单，数组中的每个对象都将包含其在内存中的坐标的引用并包含移动成本，稍后将用于比较以确定下一个最佳位置（我稍后将实现诸如目标，开始）

我的问题是：代码有什么问题吗？

我要提前感谢任何回复的人，因为您的回复将永远受到赞赏

我的问题 V0.1 的当前修订：哇，非常感谢您的快速响应，我今天学到了一些新东西^^ Arrays.deepToString(grid)); 是一个我不知道的工具，但是我仍然收到运行时错误。再次感谢您的回复，并再次感谢您的进一步回复:)。上面的代码已按建议修改，但运行时错误仍然存​​在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:43:12.723

您的代码有几个问题：

*   您的嵌套循环假定数组是方形的（您将两个维度迭代到`grid.length`），
*   在初始化每一行后打印整个数组，并且
*   您错误地打印了数组（Java 数组在传递给 时不打印它们的内容`System.out.println`）

如果您的矩阵确实总是正方形，则第一项是可以的。第二项很容易通过将输出移到第二个嵌套循环之外来修复。

第三项是最难的。编写一个静态方法来获取二维数组，并使用两个嵌套循环逐个元素地打印出来，这将是一个很好的练习。[`System.out.println(Arrays.deepToString(grid));`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)如果您更愿意使用系统功能，也可以使用。

# go - Go big.Int 递归阶乘

> ID：11270547
> 
> 赞同：11
> 
> 时间：2012-06-30T00:38:39.957
> 
> 标签：go

我正在尝试实现这段代码：

```
func factorial(x int) (result int) {
  if x == 0 {
    result = 1;
  } else {
    result = x * factorial(x - 1);
  }
  return;
} 
```

作为 big.Int 以使其对较大的 x 值有效。

以下为 fmt.Println(factorial(r)) 返回值 0

7的阶乘应该是5040？

关于我做错了什么的任何想法？

```
package main

import "fmt"
import "math/big"

func main() {
        fmt.Println("Hello, playground")

    //n := big.NewInt(40)
    r := big.NewInt(7)

    fmt.Println(factorial(r))

}

func factorial(n *big.Int) (result *big.Int) {
    //fmt.Println("n = ", n)
    b := big.NewInt(0)
    c := big.NewInt(1)

    if n.Cmp(b) == -1 {
        result = big.NewInt(1)
    }
    if n.Cmp(b) == 0 {
        result = big.NewInt(1)
    } else {
        // return n * factorial(n - 1);
        fmt.Println("n = ", n)
        result = n.Mul(n, factorial(n.Sub(n, c)))
    }
    return result
} 
```

去游乐场上的这段代码：[http ://play.golang.org/p/yNlioSdxi4](http://play.golang.org/p/yNlioSdxi4)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-10T23:46:43.287

Go 包`math.big`有`func (*Int) MulRange(a, b int64)`. 在第一个参数设置为 1 的情况下调用时，它将返回 b!：

```
package main

import (
    "fmt"
    "math/big"
)

func main() {
    x := new(big.Int)
    x.MulRange(1, 10)
    fmt.Println(x)
} 
```

会产生

> 3628800

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-30T00:59:51.477

在你的`int`版本中，每一个`int`都是不同的。但在你的`big.Int`版本中，你实际上是在分享`big.Int`价值观。所以当你说

```
result = n.Mul(n, factorial(n.Sub(n, c))) 
```

表达式`n.Sub(n, c)`实际上存储`0`回`n`，所以当`n.Mul(n, ...)`被评估时，你基本上是在做`0 * 1`，你会得到`0`结果。

请记住，`big.Int`操作的结果不仅返回它们的值，它们还将它们存储到接收器中。这就是为什么您会在诸如 之类的表达式中看到重复`n.Mul(n, c)`，例如为什么它`n`再次作为第一个参数。因为你也可以说`result.Mul(n, c)`，你会得到相同的值，但它会存储在`result`而不是`n`.

这是您为避免此问题而重写的代码：

```
func factorial(n *big.Int) (result *big.Int) {
    //fmt.Println("n = ", n)
    b := big.NewInt(0)
    c := big.NewInt(1)

    if n.Cmp(b) == -1 {
        result = big.NewInt(1)
    }
    if n.Cmp(b) == 0 {
        result = big.NewInt(1)
    } else {
        // return n * factorial(n - 1);
        fmt.Println("n = ", n)
        result = new(big.Int)
        result.Set(n)
        result.Mul(result, factorial(n.Sub(n, c)))
    }
    return
} 
```

这是一个稍微更干净/优化的版本（我试图删除无关的`big.Int`s 分配）：[http ://play.golang.org/p/feacvk4P4O](http://play.golang.org/p/feacvk4P4O)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T01:31:18.040

例如，

```
package main

import (
    "fmt"
    "math/big"
)

func factorial(x *big.Int) *big.Int {
    n := big.NewInt(1)
    if x.Cmp(big.NewInt(0)) == 0 {
        return n
    }
    return n.Mul(x, factorial(n.Sub(x, n)))
}

func main() {
    r := big.NewInt(7)
    fmt.Println(factorial(r))
} 
```

输出：

```
5040 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T17:39:01.257

非递归版本：

```
func FactorialBig(n uint64) (r *big.Int) {
    //fmt.Println("n = ", n)
    one, bn := big.NewInt(1), new(big.Int).SetUint64(n)
    r = big.NewInt(1)
    if bn.Cmp(one) <= 0 {
        return
    }
    for i := big.NewInt(2); i.Cmp(bn) <= 0; i.Add(i, one) {
        r.Mul(r, i)
    }
    return
} 
```

[`playground`](http://play.golang.org/p/91KD70ZJG_)

# php - LIKE 运算符和 NOT IN 的正确用法

> ID：11270551
> 
> 赞同：1
> 
> 时间：2012-06-30T00:38:54.963
> 
> 标签：php, mysql, field, sql-like

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

这目前有效...

```
$resultInput = mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field NOT IN ('id', 'created', 'date_modified', 'content', 'type', 'bodytext', 'project_content', 'content_short') AND Field NOT LIKE '%_image%'"); 
```

但是我想删除所有具有名称内容的字段并将其添加到 LIKE 函数中，例如`%content%`

```
$resultInput = mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field NOT IN ('id', 'created', 'date_modified', 'type', 'bodytext') AND Field NOT LIKE ('%_image%', %content%)"); 
```

但这似乎不起作用？并返回一个“

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值
> 在第 33 行的 C:\xampp\htdocs\framework.php 中给出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:44:32.010

您正在尝试的实际上是语法错误。`LIKE`条件必须单独列出并用`AND`or分隔`OR`。但是，在您的情况下，您可以通过以下方式分隔条件来做到[这`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)一点`|`：

```
SHOW COLUMNS 
FROM " . $table. " 
WHERE Field NOT IN ('id', 'created', 'date_modified', 'type', 'bodytext') 
AND Field NOT REGEXP '_image|content' 
```

因为正则表达式将匹配模式或`content`其中的`_image` *任何地方*，`Field`所以不需要任何额外的等效字符来代替.`%``LIKE`

出于安全目的，我们假设`$table`已将其与此查询中使用的有效表名列表进行了比较。

最后，您收到了致命错误，*`mysql_num_rows()`期望参数 1 是资源*，因为您没有对查询结果执行错误检查。

```
$result_input = mysql_query("SHOW COLUMNS.....");
if (!$result_input) {
  // Something's wrong
  echo mysql_error();
}
else {
  // ok, everything is working, proceed.
} 
```

# c# - DataGrid 中的验证规则

> ID：11270552
> 
> 赞同：3
> 
> 时间：2012-06-30T00:38:56.113
> 
> 标签：c#, wpf, mvvm, datagrid, dataset

我正在使用 DataSet 填充 DataGrid。我通过在每个 DataGridColumn 中的 make 为验证规则启用了我的 dataGrid，`ValidatesOnDataError=True`但是当我添加一个`DataGridRow`具有 DataErrors 的时，`DataGridRow`它被阻止，我不能做任何其他事情，也不能更正`DataGridRow`

```
 <!--Template for DataGridRow in Error state-->        
                <ControlTemplate x:Key="BasicRowValidationErrorTemplate">
                    <Grid Margin="0,-2,0,-2" ToolTip="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}},
                        Path=(Validation.Errors)[0].ErrorContent}">
                        <Ellipse StrokeThickness="0" Fill="Red" Width="{TemplateBinding FontSize}" Height="{TemplateBinding FontSize}" />
                        <TextBlock Text="!" FontSize="{TemplateBinding FontSize}" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"  />
                    </Grid>
                </ControlTemplate>

     <!--Style for DataGridCell in static mode-->
            <Style x:Key="textBlockInError" TargetType="{x:Type TextBlock}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="ToolTip"
                  Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                  Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

    <!--Style for DataGridCell in edit mode-->
            <Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="Background" Value="Red"/>
                        <Setter Property="ToolTip"
                  Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                  Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>
            </Style> 
```

我已经定义了我的列

```
<DataGrid>
   <DataGrid.RowValidationRules>
      <DataErrorValidationRule ValidationStep="ComittedValue"/>
   </DataGrid.RowValidationRules>
   <DataGrid.Columns>
    <DataGridTextColumn Header="Nombre" Binding="{Binding Nombre, UpdateSourceTrigger=PropertyChanged,
                        ValidatesOnDataErrors=True}" ElementStyle="{StaticResource textBlockInError}" 
                                        EditingElementStyle="{StaticResource textBoxInError}"/>    
    <DataGridTemplateColumn Header="Price">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Price, ValidatesOnDataErrors=True}" Style="{StaticResource textBlockInError}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor,
                                    AncestorType={x:Type UserControl},AncestorLevel=2},
                                    Path=DataContext.Prices}" DisplayMemberPath="DisplayMember" 
                                    SelectedValue="{Binding Price}" IsEditable="{Binding RelativeSource={RelativeSource FindAncestor, 
                                            AncestorType={x:Type UserControl}, AncestorLevel=2},
                                            Path=DataContext.IsComboBoxEditable, Mode=OneWay}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
   </DataGrid.Columns>
</DataGrid> 
```

我的 ViewModel 中有

```
DataTable Price;
DataTable Prices; 
```

Price 有两列 Name 和 Price，Prices 有两列 DisplayMember 和 ValueMember

我从文件中获取 Precios，如果未加载文件，则我没有要显示的 precies，因此当我没有文件时，我将我的组合框设为 Editable。只需将我选择的值设置为用户编写的值

```
private void ComboBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
{
    ComboBox comboBox = sender as ComboBox;
    if (comboBox.IsEditable)
    {
        comboBox.SelectedValue = (sender as ComboBox).Text;
    }
} 
```

为什么阻止我的 DataGridRow ？

# javascript - 设计动态响应式周历

> ID：11270553
> 
> 赞同：18
> 
> 时间：2012-06-30T00:39:00.893
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)创建一个动态响应式周历。

这是我当前的实现： http: [//jsfiddle.net/dvirazulay/Lhe7C/](http://jsfiddle.net/dvirazulay/Lhe7C/)（完整粘贴在这里有点长）

这是它的当前屏幕截图：

![在此处输入图像描述](../Images/e557a5e6331468f692448215a157480f.png)

我想要实现的是一个完全动态的设计——从我的后端生成初始视图是没有问题的，但是有点复杂，因为我当前的实现使用了**tables**。我担心在 JavaScript 方面很难维护它，即动态删除事件/添加它们。

显然，我选择了对我来说有意义的表格——周历基本上就是一张桌子。我将描述我的设计：

1.  一个事件可能跨越 30 分钟以上，所以我用`rowspan`它来定义它应该跨越多少小时。
2.  可能有两个事件发生冲突（我不允许超过两个）。按照目前的设置，它们彼此相邻显示，每个占据事件宽度的 50%，并占据代表结束时间所需的高度。
3.  在后端，我计算`td`我需要跳过多少列才能在表的末尾没有多余的列（`rowspan`将一些推到右边）

**我的问题如下：**

*   这是正确的方法吗？
*   我应该将相同的后端逻辑应用于前端，并根据我拥有的事件数量重新计算`tr`/`td`显示的数量，还是有更好的解决方案？

理想情况下，一个好的答案应该描述如何在前端处理事件而没有复杂性或针对此问题的替代（响应式！）设计。

我不想使用现有的插件，因为我已经搜索并尝试了多个插件，并且我想保持这个非常轻的重量，但是如果您对满足要求的插件有很好的建议 - 我很乐意检查出来！（例如，jQuery 周历太慢且杂乱无章）

**注意**：我无意支持早于 IE9 的浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:10:20.397

在研究了这些问题并咨询了一些前端专家之后，我得出的结论是，将其保留为表格是最好的选择，即使生成它并非易事。

虽然这个决定使得在不重新生成整个表格的情况下很难动态更改时间表，但*应该*将表格作为表格的样式元素的好处得到了回报 - 对齐、宽度、高度、边框等都很容易控制并且工作出色的跨浏览器。

一个重要的注意事项是，这种方法使日程安排的响应能力变得微不足道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:24:50.337

使用表格是一个好方法。

好的，这是一个基于 jQuery 的“rowspans are push right”问题的解决方案。问题的根源是后端的表生成错误。

例如，如果渲染了 rowspan="3" 的 td，那么接下来两行中相同列索引位置的 td 将受到影响并被推到右侧。这是不希望的。

```
<table border="1">
<tr>
    <td>07:30</td>
    <td rowspan="3">Event 07:30 to 09:00</td>
</tr>
<tr>
    <td>08:00</td>
    <td>Should not be rendered.</td>
</tr>
<tr>
    <td>08:30</td>
    <td>Should not be rendered.</td>
</tr>
<tr>
    <td>09:00</td>
    <td>C</td>
</tr> 
```

正确的解决方案是在后端生成正确的表。在行跨度之后渲染 td 根本不应该发生。如果你知道，你正在渲染一个 rowspan="3"，那么就采取相应的行动。:)

无论如何，如果无法修改表格渲染，则使用 jQuery 修复它：

[http://jsfiddle.net/9tQvu/3/](http://jsfiddle.net/9tQvu/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T08:28:13.687

**[dhtmlxScheduler](http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml) - Ajax/JavaScript 事件日历**

dhtmlxScheduler 是一个 JavaScript 事件日历，允许您将类似 Google 的调度程序添加到您的网络应用程序或网站。直观的拖放界面允许最终用户在不同的视图中快速管理事件和约会：日、周、月、年、议程、时间线等。非常轻量级（压缩后大约 20Kb）、高度可定制和快速，dhtmlxScheduler提供了一种在网页上添加基于 Ajax 的事件日历的快速方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T03:46:31.693

这是一种完全可以接受的方式。

如果我是你，我可能会使用 div，因为它们更易于管理，更易于使用 CSS 并且更标准。

除此之外，我认为您采取了一种很好的方法，您可能应该以与后端相同的方式来做前端，因为您知道它有效。

至于处理事件，我只会使用类按类型对 div 进行排序，然后在这些相应的类上使用事件处理程序和您想要使用的事件类型（除了单击之外，我不知道您想要什么）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T08:21:30.920

当一个事件仅与另一个事件部分重叠时会发生什么，我的意思是，2 个重叠事件占用 50% 的宽度，但如果其中一个事件将更快完成而另一个事件稍后完成，那么继续的事件是否占用所有宽度“下一个”行还是继续宽度的 50%？如果事件 A 是从 8:00 到 8:30 而事件 B 是从 8:00 到 18:00 会发生什么？事件 B 将填满宽度应该很好，直到有另一个重叠事件..但我想这可能有点棘手。只是一个想法。快乐编码，这真是一个不错的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-11T12:47:32.483

使用 CSS 和 div，而不是表格单元格，可能会更精确，并且肯定会更容易计算客户端并保持响应能力。这是第一个事件的伪 CSS/JS 示例：

```
.event:first-child {
    height: `(1.5/24)*100`%; /* 6.25%, based on duration */
    position: absolute;
    top: `(10/24)*100`%; /* 41.7%, based on event start */
} 
```

# objective-c - 目标 C：协议和委托语法

> ID：11270558
> 
> 赞同：1
> 
> 时间：2012-06-30T00:40:15.150
> 
> 标签：objective-c, ios, delegates

调用委托方法时是否可以发回两个参数？我有一个委托，我正在尝试设置以将两个修改后的日期返回给我的父级，但我收到第二个参数的语法错误。我的语法是错误的还是不可能的？

```
@protocol PeriodsChangedDelegate <NSObject>
@optional

-(void) periodsChanged: (NSDate *) newTimeStart, (NSDate *) newTimeFinished;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:41:07.360

代替

```
-(void) periodsChanged: (NSDate *) newTimeStart, (NSDate *) newTimeFinished; 
```

写

```
-(void) periodsChanged: (NSDate *) newTimeStart  timeFinished:(NSDate *)newTimeFinished; 
```

`,`您不会通过使用将它们分开来传递两个参数`:`

# android - OAuth 2.0、Android 和 cookie

> ID：11270563
> 
> 赞同：3
> 
> 时间：2012-06-30T00:40:27.517
> 
> 标签：android, cookies, webview, authorization, oauth-2.0

如果内置 WebView 浏览器无法访问默认用户浏览器的 cookie，那么在 Android 中使用 OAuth 2.0 客户端授权有什么意义？我的意思是，如果我`http://blablabla.com/authorize?client_id=APP_ID&redirect_uri=REDIRECT_URI&response_type=token`在 WebView 中打开一些 oauth-url（例如 ） - 无论如何都会提示用户输入他的凭据以登录“blablabla.com”社交网络。因为即使他已经使用他的某些浏览器（Opera 或 Dolphin，或默认浏览器）登录，WebView 浏览器也不知道任何有关相应 cookie 的信息。

* * *

## 编辑：

我会尽量让它更清楚一点。

主要目标是简化我的应用程序中的登录程序。我想实现我们可以在许多网站上看到的这种机制：“登录... Facebook/Google/Twitter/whatever”。在桌面浏览器中，这种方法非常有效，因为最终用户已经在此浏览器中登录了目标服务。所以基本上要登录我的网站，他只需要：

1.  按下“使用...登录”按钮
2.  在重定向的窗口/弹出窗口上按“批准/确认”。
3.  被重定向回来，已经登录。

主要好处是**用户不需要输入他的电子邮件/姓名/任何东西**——我已经从他的社交网络帐户中提取了它。

我想知道如何在 Android 上获得相同的效果。问题是，正如我所见，我们不能让用户避免输入密码，因为应用程序（WebView）永远不知道他是否登录到某个外部服务。这就是为什么无论如何都会提示用户输入他的一些详细信息，并且所有 OAuth 优势都将消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:56:36.837

解决方法取决于您要执行的操作。我不清楚，再次查看您的问题，因为您没有解释您的用例。相反，您间接要求一些看起来非常广泛的东西，就好像您想使用共享 cookie 维护跨越多个应用程序的 Android 系统范围的登录状态一样。

由于安全原因，这既不好也不想要。流氓应用程序可以对其他应用程序请求的现有访问令牌做任何它想做的事情，或者只是修改或读取在其他应用程序中创建和维护的现有 cookie。

假设您试图通过让用户使用 WebView 登录来使用 OAuth 2.0 授权您自己的应用程序访问 Web 服务，您需要实现自己的[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)，覆盖其 onPageStarted 或 onPageFinished 方法并检查 URL 参数是否与您的重定向匹配网址。

如果有匹配项，您需要从 URL 字符串中提取访问令牌。如果还有可用的刷新令牌，则也提取该令牌。

（但这仅适用于特定类型的 OAuth 流，它将访问令牌添加到重定向 URL。）

现在您至少有一个可用的访问令牌。将该令牌存储在您的应用程序的私有首选项中，并在您的服务请求中使用它，直到您从服务返回 401 未授权错误消息。此时，您可以使用刷新令牌（如果可用）来请求新的访问令牌，或者您必须再次显示登录 WebView。

如果您尝试从您的应用程序访问 Google 服务，您可能会发现[Tasks API 和 OAuth 2.0 入门](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)文章很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:18:37.017

您是否考虑过从外部（非嵌入式）启动浏览器？

这将受益于现有的 cookie，并为用户在输入这些服务的凭据时提供最舒适的可信 UI。（换句话说 - 用户看到 SSL 锁、地址栏中的正确 URL 等）

# c# - Are all page changes in Facebook Canvas App supposes to first redirect to FacebookRedirect.axd

> ID：11270572
> 
> 赞同：1
> 
> 时间：2012-06-30T00:42:47.213
> 
> 标签：c#, facebook, canvas, sdk

I have a Facebook Canvas app that works. It is a vb.net website using Facebook C# SDK. I noticed that when clicking a link to change from one .aspx page to the next it always redirects to FacebookRedirect.axd and then to the page. Is this normal and expected with all facebook canvas apps?

# php - PHP session variables in SWFupload

> ID：11270576
> 
> 赞同：0
> 
> 时间：2012-06-30T00:43:16.633
> 
> 标签：php, session, swfupload

Just to start, yes I've read all the other Stack Overflow questions relating to this topic, but none of them provided me with a solution. One had a promising link that turned about to be dead. Apparently the entire swfupload forum doesn't exist anymore.

My problem is of course relating to passing my session variables to the actual PHP that processes the upload and inserts a line into a MySQL database. Two of the fields in that SQL line are session variables from the logged in user.

Based on the documentation and what I read from other threads, this is my code (or the relevant parts):

This is my javascript code from the main upload page. There is more but this is what's relevant. This code is a part of a `$content` variable that I use in a template function so its PHP syntax. Note, when I check this code in the browser it renders the correct values there.

```
var swfu;

window.onload = function() {
    var settings = {
        flash_url : "js/swfupload/swfupload.swf",
        upload_url: "process_upload.php",
        post_params: {
            "user_id" : "'.$_SESSION['user_id'].'",
            "school_id" : "'.$_SESSION['school_id'].'"
        },
        file_size_limit : "1000 MB",
        file_types : "*.wmv; *.mpg; *.avi; *.vob; *.mov; *.m4v; *.mpeg; *.mkv; *.flv; *.3gp",
        file_types_description : "All Files",
        file_upload_limit : 10, 
```

Now, in my process_upload.php file if I do this:

```
$user_id = $_POST['user_id'];
$school_id = $_POST['user_id']; 
```

Then use those variables in a query:

```
mysql_query("INSERT INTO table SET name='".$file_name."', school_id='".$school_id."', user_id='".$user_id."'") or die(mysql_error()); 
```

The query is successful and I get an entry in the database, but it doesn't fill in `user_id` and `school_id` and my error log shows Undefined Index error on that line.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:27:32.320

所以显然我缺少的是 process_upload 页面上的会话 ID。所以我这样做了，它现在似乎承载了我的会话值。

上传页面：

```
 post_params: {
            "PHPSESSID" : "'.session_id().'",
            "user_id" : "'.$_SESSION['user_id'].'",
            "school_id" : "'.$_SESSION['school_id'].'"
        }, 
```

流程页面：

```
if (isset($_POST["PHPSESSID"])) {
    session_id($_POST["PHPSESSID"]);
} else if (isset($_GET["PHPSESSID"])) {
    session_id($_GET["PHPSESSID"]);
}

session_start();

$user_id = $_POST['user_id'];
$school_id = $_POST['school_id']; 
```

然后我在查询中使用这些变量，我们都很好！

# javascript - jquery scale using animate

> ID：11270578
> 
> 赞同：0
> 
> 时间：2012-06-30T00:43:34.813
> 
> 标签：javascript, jquery, css, jquery-animate

I am trying to use the transform "scale" for a DIV using Jquery's animate function but it is not showing any effect. Can someone tell if "transforms" are supported in Jquery's animate function. I also tried JQuery's UI/Effect "scale" method but as I am not sure if it is supported as it is throwing aan error that the "property" is not supported by the object. Might be possibly because I am using it on a metro app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:01:54.107

在你的代码中包含这个文件

```
 jquery.transform2d.js 
```

然后使用 animate 函数来缩放 div

```
$("div").animate({"transform" : "scale(2)"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T12:13:39.797

您可以使用 Transit 插件进行 css 转换 [http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

Jquery animate 函数只接受那些具有数值的属性。

阅读本文了解更多详情[http://www.w3schools.com/jquery/jquery_animate.asp](http://www.w3schools.com/jquery/jquery_animate.asp)

这应该会有所帮助。

# r - How to know when a token can be used?

> ID：11270581
> 
> 赞同：1
> 
> 时间：2012-06-30T00:43:56.023
> 
> 标签：r, api, curl

Some APIs give a token back with the API call instead of the result, then you make a second API call with that token to get the query result. Right now, I just use Sys.sleep() within a function to guess that amount of time it may take for the query to finish and the token to be useable. Seems like there must be a better way. That is, can you iteratively send the second API call with the token every X number of seconds, or fractions of seconds, until success?

Here is a minimal example using the TotalImpact API (http://total-impact.org/api-docs).

```
require(RCurl); require(stringr); require(RJSONIO)

foo <- function(url, sleep) {
  tt <- getURL(url)
  token <- str_extract(tt[[1]], "[a-z0-9]+")
  message("Pausing a bit for the query to finish...")
  Sys.sleep(time = sleep)
  fromJSON(
    getURL(
      paste("http://total-impact-core.herokuapp.com/item/", token, sep='')))
}
myurl <- "http://total-impact-core.herokuapp.com/tiid/doi/10.1371/journal.pcbi.1000361"
sleeptime <- 4
foo(myurl, sleeptime)

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C/en_US.UTF-8/C/C/C/C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RJSONIO_0.98-1 stringr_0.6    RCurl_1.91-1   bitops_1.0-4.1 devtools_0.7  

loaded via a namespace (and not attached):
[1] digest_0.5.2 httr_0.1.1   memoise_0.1  plyr_1.7.1   tools_2.15.1 
```

# jquery - jQuery：按钮启用不起作用

> ID：11270582
> 
> 赞同：1
> 
> 时间：2012-06-30T00:44:00.013
> 
> 标签：jquery

我的 jsfiddle 在这里- [http://jsfiddle.net/hhimanshu/HVRLA/](http://jsfiddle.net/hhimanshu/HVRLA/)

**需要**
- 一旦输入文本，“创建”按钮应该启用
- 如果没有文本（文本长度 = 0），应该再次禁用“创建”按钮

**更新**

建议的解决方案适用于解决方案，但不适用于我在下拉列表中有表单。这是小提琴 - [http://jsfiddle.net/hhimanshu/ukYek/](http://jsfiddle.net/hhimanshu/ukYek/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:50:56.563

看起来您没有正确选择按钮，并且`else`如果输入中没有字符（即用户退格他们输入的所有文本），您忘记放置以使其再次禁用。这有效：

```
$(function(){
    var input = $('#new-list :input');
    $(input).keyup(function(){
      //alert($(input).val().length);                
        if ($(input).val().length > 0) {
            //alert($(input).val().length);
            $('#new-list button[type="submit"]').removeAttr('disabled');
        }
        else {
            $('#new-list button[type="submit"]').attr('disabled',true);
        }
    });
}); 
```

jsFiddle：http: [//jsfiddle.net/HVRLA/2/](http://jsfiddle.net/HVRLA/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:58:53.203

另一个解决方案：http: [//jsfiddle.net/HVRLA/5/](http://jsfiddle.net/HVRLA/5/)

**编辑：**

正如您在此[http://jsfiddle.net/hhimanshu/ukYek/fiddle](http://jsfiddle.net/hhimanshu/ukYek/)下方的评论中所说的那样，它不起作用。您在输入选择器中遇到问题：

```
$(function(){
    var input = $('#new-playlist :input');
    $(input).live('keyup',function(){
      //alert($(input).val().length);                
        if ($(input).val().length > 0) {
            //alert($(input).val().length);
            $('#create-playlist-button').removeAttr('disabled');
        }
        else {
            $('#create-playlist-button').attr('disabled',true);
        }
    });
});​ 
```

我认为这是您的代码中的问题-因为它们在您的 html 中没有`new-list`id

```
 var input = $('#new-list :input'); 
```

所以我把它改成这样：

```
var input = $('#new-playlist :input'); 
```

这是小提琴链接：http: [//jsfiddle.net/ukYek/3/](http://jsfiddle.net/ukYek/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T01:22:30.803

一个工作示例：

```
$(function(){
    var input = $('#new-playlist :input');
    input.live('keyup',function(){   
            $('#create-playlist-button').attr('disabled',input.val().length==0);
     });
});​ 
```

# php - Submitting data with AJAX

> ID：11270583
> 
> 赞同：1
> 
> 时间：2012-06-30T00:44:29.640
> 
> 标签：php, jquery, ajax

I'm learning AJAX and jQuery and I'm trying to put together a simple test script that will take 2 `input` fields and insert the data to my database. I can't figure out what I'm doing wrong, but the code below won't insert the data. can anyone spot my problem?

I'm not getting any errors and I don't see anything weird in the console.

HTML

```
<input id="name" type="text"/>
<input id="LastName" type="text"/>
<button id="testButton">Button</button>
<div id="callback"></div> 
```

JS

```
$('#testButton').click(function () {
    var firstName = $("#name").val();
    var lastName = $("#LastName").val();

    $.ajax({
      type: "POST",
      url: "insert.php",
      data: { name: firstName, LastName: lastName }
    }).done(function( msg ) {
      alert( "Data Saved: " + msg );
});
}); 
```

PHP

```
 //Adding to the local database
    $name = array($_POST['name'], $_POST['LastName']);

    $qry = $dbh->prepare(
        'INSERT INTO info (FirstName, LastName) VALUES (?,?)');

    if ($qry->execute($name)) {
        echo "Success";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:37:31.310

尝试`success`在 ajax 调用中使用该函数。

```
$('#testButton').click(function () {
    var firstName = $("#name").val();
    var lastName = $("#LastName").val();

    $.ajax({
      type: "POST",
      url: "insert.php",
      data: { name: firstName, LastName: lastName }
      success: function(data) {
        alert("sucess" + data);
      }
    });
}); 
```

此外，如果按钮在元素内，单击它后可能仍在执行提交，请在`form`它触发的函数末尾添加“return false”以避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T01:58:55.443

正如您已经提到的，输入需要一个“名称”属性。所以 HTML 现在可以了。

如果你的 PHP 工作正常，那么你应该看看你的 JS。

我认为这段代码没有被执行。[http://api.jquery.com/ready/](http://api.jquery.com/ready/)尝试将您的 JS 代码封装在此代码中：

```
$(function() {
    // Your code here
}); 
```

您还可以使用 Google Chrome 检查器的“网络”和“控制台”选项卡来更好地了解您的 ajax 请求发生了什么。

“网络”将向您显示 HTTP 请求及其响应（如果有）。也尝试插入一些

```
console.log('message') 
```

在您的 JS 中查看控制台进行调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:46:51.663

您的 JS 代码运行良好，但使用 jsfiddle 回显服务。

```
$('#testButton').click(function () {
    var firstName = $("#name").val();
    var lastName = $("#LastName").val();

    $.ajax({
      type: "POST",
      url: "/echo/html/",
      data: { name: firstName, LastName: lastName }
    }).done(function( msg ) {
      alert( "Data Saved: " + msg );
});
});​ 
```

这是链接： http: [//jsfiddle.net/TPu8X/](http://jsfiddle.net/TPu8X/) 另一个版本：http: [//jsfiddle.net/TPu8X/1/](http://jsfiddle.net/TPu8X/1/)

您的代码仅适用于 `jquery 1.5.2`或更高版本（可能您使用的是旧版本）

看来您的路径不`insert.php`正确。因此，请尝试将 php 放置在正确的路径上。

# c - 可变参数函数（va_arg）不适用于浮点数？

> ID：11270588
> 
> 赞同：21
> 
> 时间：2012-06-30T00:45:28.540
> 
> 标签：c, floating-point, variadic-functions

我有一个可变参数函数，它接受一个浮点参数。为什么它不起作用？

```
va_arg(arg, float) 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-30T00:49:50.690

对应的函数的参数在传递给您的可变参数函数之前`...`被*提升。*`char`并`short`被提升为`int`,`float`被提升为`double`, 等等

> 6.5.2.2.7 函数原型声明器中的省略号会导致参数类型转换在最后声明的参数之后停止。默认参数提升是在尾随参数上执行的。

原因是早期版本的 C 没有函数原型。参数类型在函数站点声明，但在调用站点不知道。但是不同类型的表示方式不同，传递参数的表示方式必须符合被调用函数的期望。因此 char 和 short 值可以传递给带有 int 参数的函数，或者可以将 float 值传递给带有 double 参数的函数，编译器将较小的类型“提升”为较大的类型。当在调用站点不知道参数的类型时，仍然会看到这种行为——即，对于可变参数函数或没有原型声明的函数（例如，`int foo();`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-30T00:54:29.040

正如@dasblinkenlight 所提到的，*float 被提升为 double*。这对我来说可以：

```
#include <stdio.h>          
#include <stdarg.h>

void foo(int n, ...)
{   
    va_list vl;
    va_start(vl, n);

    int c; 
    double val; 

    for(c = 0; c < n; c++) {
        val = va_arg(vl, double);
        printf("%f\n", val);
    }

    va_end(vl);
}

int main(void)
{
  foo(2, 3.3f, 4.4f);
  return 0;
} 
```

输出：

```
3.300000
4.400000 
```

# android - 直接在应用程序中评价 Google Play 应用程序

> ID：11270591
> 
> 赞同：52
> 
> 时间：2012-06-30T00:46:04.603
> 
> 标签：android, google-play, rate

我需要在我的 android 应用程序中设置费率选项。

我找到了这个[链接](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

但我不确定我是否要搜索。我只想让用户能够在 Google Play 上对我的应用进行评分。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-06-30T01:02:51.080

评级是通过市场应用程序完成的，因此可以信任评级。如果允许应用程序自己处理评级，那么开发人员可以随时操纵应用程序的评级。因此，您无法自己处理评级。您只能提示用户访问您在 Google Play 上的应用页面，并要求他们对您的应用进行评分以获得更多支持。

使用内置意图启动市场

```
private void launchMarket() {
    Uri uri = Uri.parse("market://details?id=" + getPackageName());
    Intent myAppLinkToMarket = new Intent(Intent.ACTION_VIEW, uri);
    try {
        startActivity(myAppLinkToMarket);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(this, " unable to find market app", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-15T22:56:30.287

这样做很简单...

```
final String appPackageName = "your.package.name";

try {
      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + appPackageName)));
    } catch (android.content.ActivityNotFoundException anfe) {
      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id=" + appPackageName)));
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-19T08:48:09.033

您可以使用 3rd 方工具。以下是一些常用的解决方案：

应用程序：[https ://github.com/drewjw81/appirater-android/](https://github.com/drewjw81/appirater-android/)

apptentive： http: [//www.apptentive.com/](http://www.apptentive.com/)

[民意调查： https](https://polljoy.com) ://polljoy.com

AppRater：[https ://github.com/delight-im/AppRater](https://github.com/delight-im/AppRater)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-10T02:51:36.740

```
public void launchMarket() 
{
    Uri uri = Uri.parse("market://details?id=" + this.getPackageName());
    Intent myAppLinkToMarket = new Intent(Intent.ACTION_VIEW, uri);
    try 
    {
        mContext.startActivity(myAppLinkToMarket);
    } 
    catch (ActivityNotFoundException e) 
    {
        Toast.makeText(this, " Sorry, Not able to open!", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-30T01:02:46.340

用户无法直接在您的应用中对您的应用进行评分。他们必须去 Google Play 进行评分。如链接所示，您必须重定向用户以在 Google Play 上查看您的应用：

```
mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME))); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-26T06:14:11.000

对于下面的代码，我使用了 try 和 catch 方法。try 和 catch 方法将按如下方式工作。单击按钮时，try 方法将尝试在您的 Android 手机上搜索 Google Play 商店应用程序，如果已安装，则启动它并导航到您在 Play 商店中的应用程序。但是，如果您的 Android 手机上没有 Play 商店应用程序，则会执行 catch 方法并启动安装在您的应用程序上的浏览器并导航到您在 Play 商店中的应用程序。getPackageName() 是一个内置函数，用于获取您的项目包名称。您可以手动将其添加为字符串。

另请参阅[**亚马逊商店**](http://whats-online.info/science-and-tutorials/47/Linking-To-the-Amazon-Appstore-for-rating-Android-tutorial/)

```
String package="com.example.android"; 
```

完整的代码。

```
 button.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                     try {
                            Uri uri = Uri.parse("market://details?id="+getPackageName()+"");
                            Intent goMarket = new Intent(Intent.ACTION_VIEW, uri);
                            startActivity(goMarket);
                        }catch (ActivityNotFoundException e){
                            Uri uri = Uri.parse("https://play.google.com/store/apps/details?id="+getPackageName()+"");
                            Intent goMarket = new Intent(Intent.ACTION_VIEW, uri);
                            startActivity(goMarket);
                        }
                }
            }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-06T07:05:42.463

I was searching for a feature similar to iOS, where the user doesn't need to be redirected to play store and again asked to write his reviews. Initially, I thought this was impossible but thankfully my understanding was outdated. Found this [app](https://play.google.com/store/apps/details?id=com.test.app.inappreview&showAllReviews=true) which does that searching for code though.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-19T05:29:22.543

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
  intent.setData(Uri.parse("market://details?id=com.test(This is the package name)"));
  startActivity(intent); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-05T07:30:54.553

我总是使用这样的方法

```
private void launchMarket() {
    Uri uri = Uri.parse("market://details?id=" + getPackageName());
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    try {
        startActivity(goToMarket);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(this, "couldn't launch the market", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-26T09:46:55.393

粘贴此简单代码以从您的应用程序中播放商店评级页面

```
Intent intent1 = new Intent(Intent.ACTION_VIEW,
                        Uri.parse("market://details?id="
                                + MainActivity.this.getPackageName()));
startActivity(intent1); 
```

# c++ - MinGW 未定义对“___atomic_fetch_sub_4”的引用

> ID：11270592
> 
> 赞同：0
> 
> 时间：2012-06-30T00:46:32.283
> 
> 标签：c++, c++11, mingw, atomic, compare-and-swap

当尝试构建一个使用原子操作的简单测试程序时，我得到了错误 `undefined reference to `___atomic_fetch_sub_4'`
具体来说，它只发生在我`--`结合使用时`==`：

```
std::atomic<std::size_t> foo;
if (--foo == 42) { ... }
```

代码编译得很好，但是在尝试链接时出现错误。我将 MinGW 与 GCC 4.7 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:21:14.673

`std::thread`并且`std::atomic`对 MinGW 的支持仍然非常有限。如果你想在 Windows 上试验那些 C++11 功能，我推荐[Visual Studio 2012 RC](http://www.microsoft.com/visualstudio/11/en-us)。

# eclipse - Install android adt in eclipse

> ID：11270595
> 
> 赞同：0
> 
> 时间：2012-06-30T00:47:09.403
> 
> 标签：eclipse, ubuntu

I am trying to install android in eclipse to develop apps on my ubuntu setup.

I get the following error though:

```
Cannot complete the install because one or more required items could not be found.
Software being installed: Android Development Tools 20.0.0.v201206242043-391819 
(com.android.ide.eclipse.adt.feature.group 20.0.0.v201206242043-391819)
Missing requirement: Android Development Tools 20.0.0.v201206242043-391819 
```

Any ideas as to what the problem is? I have tried using the url and download the zip manually in eclipse under add new software.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:26:44.843

我有类似的东西。如果您需要 ADT 版本 20.0.0，请按照此处所述手动安装（从 ZIP 存档）并从此处下载：[http :](http://jayxie.com/mirrors/android-sdk/sdk/eclipse-adt.html#InstallingADT) [//dl.google.com/android/ADT-20.0.0.zip](http://dl.google.com/android/ADT-20.0.0.zip)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:09:34.853

在安装过程中，出现需要org.eclipse.wst.sse.ui 的错误。我该如何解决？

Google Plugin for Eclipse 依赖于其他特定的 Eclipse 组件，例如 WST。您的 Eclipse 安装可能尚未包含所有这些，但可以按照这些说明轻松安装它们。Eclipse 3.6（太阳神）

选择帮助 > 安装新软件... 单击可用软件站点的链接。确保有一个名为 Juno 的更新站点。如果这不存在，请单击 Add... 并输入[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)作为 Location。现在完成安装步骤；Eclipse 应该下载并安装插件的依赖项。

过滤 wst 并安装所有这些。重启 Eclipse，然后就可以安装 adt 插件了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:21:24.123

试试这个：当通过 Eclipse 安装 ADT 时，只需确保您已检查：在安装期间联系所有更新站点以查找所需的软件。这对我有帮助。

还尝试更新 Eclipse（帮助 -> 检查更新）

解决方法是：检查联系所有更新站点...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T05:56:30.590

在 Eclipse JUNO Windows7PRO 上安装 Android ADB。

这些步骤对我有用： 1- 转到“帮助”-“安装新软件” 2- 插入一个名为 AndroidADT [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)的新路径 3- 选中“联系方式”框安装过程中的所有更新站点以查找所需的软件”。4- 选择所有 6 个 android 组件 5- 下载，重新启动 eclipse，更新 adt 然后......享受吧！

# css - 我可以在两边都有一个内阴影吗？

> ID：11270596
> 
> 赞同：1
> 
> 时间：2012-06-30T00:47:56.283
> 
> 标签：css

```
-moz-box-shadow: inset 3px 0px #BDD4DE;
-webkit-box-shadow: inset 3px 0px #BDD4DE;
box-shadow: inset 3px 0px #BDD4DE; 
```

这会在左侧放置一个内部阴影。有可能两边都有内影吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T00:51:57.590

`box-shadow`接受多个值，因此只需使用`-3px`偏移量重复您的值：

```
-moz-box-shadow: inset 3px 0px #BDD4DE, inset -3px 0px #BDD4DE;
-webkit-box-shadow: inset 3px 0px #BDD4DE, inset -3px 0px #BDD4DE;
box-shadow: inset 3px 0px #BDD4DE, inset -3px 0px #BDD4DE; 
```

但这些看起来更像是边界而不是阴影。也许你应该使用边框，也许`box-sizing: border-box`你不能从宽度或填充中减去：

```
border-left: 3px solid #BDD4DE;
border-right: 3px solid #BDD4DE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:56:26.050

你也可以这样使用

```
box-shadow:0px 0px 5px Grey 
```

第一个和第二个值是偏移量（不使用偏移量），第三个值是模糊值

# ios - Using Perl code in iOS/ObjectiveC

> ID：11270598
> 
> 赞同：1
> 
> 时间：2012-06-30T00:48:01.160
> 
> 标签：ios, perl, sample

How can I incorporate perl code into an native iOS/Objective application? Could you provide a sample?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:15:05.543

您需要越狱设备才能安装 perl：

```
http://blog.thireus.com/how-to-install-ios-perl-framework-on-iphone-ipod-touch-or-ipad 
```

您仍然需要遵循 perl 嵌入指南（正如 Chris Reuter 所说）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:38:19.277

[perldoc perlembed](http://perldoc.perl.org/perlembed.html)中描述了从 C 调用 Perl 代码的基础知识。将 C 程序链接到 Perl 解释器并为其提供执行代码非常简单。但是，我还没有找到 Perl 的 iOS 版本，这可能意味着您必须自己构建它。

不幸的是，我无法访问 iOS 开发环境，所以我不能给你任何实际的代码。

# ruby-on-rails - 在使用 capybara 进行集成测试时，在 rspec 中使用 mocha 模拟 api 调用

> ID：11270601
> 
> 赞同：2
> 
> 时间：2012-06-30T00:49:17.640
> 
> 标签：ruby-on-rails, rspec, integration-testing, mocha.js

基本上发生的事情是，当我在我的 rspec 规范中进行集成测试时，我正在测试重置密码功能，并且我正在使用第三方 api 调用来发送电子邮件。我想信任第三方 api 发送电子邮件并完全忽略响应。

这是我现在正在使用的代码，但它仍在发送电子邮件并且失败，因为根据 Mocha 对 send_password_reset 的调用（其中包含第三方 api 调用）是“不”被调用的

```
before(:each) do
  @client = Factory(:user_with_clients).clients.first
end

it 'should send out the email(mock) set a temporary password and take them back to the login page' do
  # WHEN THE MOCK WAS MOVED HERE THE SPEC PASSSED
  visit '/client_portal/reset_password/new'
  fill_in 'email', with: @client.email
  click_button 'Send password reset'
  # THIS NEEDED TO BE MOVED TO THE TOP OF THE FUNCTION
  Client.expects(:send_password_reset).returns(true)
  current_path.should eq('/client_portal/login')
  page.should have_content('Check your email')
  @client.reload
  @client.tmp_password.should_not eq(nil)
end 
```

我不认为发布用于创建这个的工厂会揭示任何其他内容，但你认为这会帮助你帮助我，我会做的。

我也尝试将 Cilent.expects 更改为 @client.expects，但我仍然遇到同样的问题。我不依赖于 Mocha 框架，因为这实际上是我做过的第一个模拟。

我还读到我不应该在集成测试中模拟对象，但我不知道在调用测试时不发送电子邮件的方法。

只是想我应该在那里添加控制器动作，以防我应该在那里改变一些东西......

```
def create
    client = Client.find_by_email(params[:email])
    if client
      client.set_tmp_password
      if client.send_password_reset
        redirect_to '/client_portal/login', notice: 'Check your email for the password reset link'
      else
        redirect_to '/client_portal/login', notice: 'There was an error resetting your password. Please try one more time, and contact support if it doesn\'t work'
      end
    else
      flash.now[:notice] = 'No account with that email address was found'
      render :new
    end
  end 
```

我在运行测试时收到此错误

```
 1) Reset a users password user is not logged in valid email address supplied should send out the email(mock) set a temporary password and take them back to the login page
     Failure/Error: Client.any_instance.expects(:send_password_reset).returns(true)
     Mocha::ExpectationError:
       not all expectations were satisfied
       unsatisfied expectations:
       - expected exactly once, not yet invoked: #<AnyInstance:Client(id: integer, first_name: string, last_name: string, email: string, password_digest: string, signup_charge: decimal, monthly_charge: decimal, active: boolean, created_at: datetime, updated_at: datetime, monthly_charge_day: integer, sold_by_user_id: integer, tmp_password: string)>.send_password_reset(any_parameters)
     # ./spec/requests/client_portal/reset_password_spec.rb:14:in `block (4 levels) in <top (required)>' 
```

**解决方案**

使用来自@Veraticus 的以下代码并将其移至规范的顶部解决了该问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:12:51.193

问题是您没有`send_password_reset`在类上调用该方法；你在那个类的一个实例上调用它。用这个：

```
 Client.any_instance.expects(:send_password_reset).returns(true) 
```

发现者`client`将`Client.find_by_email`正确设置期望。

# c# - Is it possible to register software as a local device?

> ID：11270602
> 
> 赞同：1
> 
> 时间：2012-06-30T00:49:49.210
> 
> 标签：c#, usb, driver, device, webcam

I'm looking into the feasibility of taking a video stream from a network device (IP camera) and somehow creating/ registering a software local device from the stream of bitmaps that I can then access from other applications (like in skype/ msn etc to select a local webcam device for video chat). Any pointers or suggestions would be greatly appreciated. I'm hoping to be able to do it in c#.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:56:31.780

If your question's 'Is Windows and C# as flexible as Linux "/dev", where "everything's a file"?'... the answer is "No.".

If your question is "can I create a "virtual camera device and use it with Skype or MSN: the answer's "Yes".

You'll probably have to get your hands dirty with DirectShow and/or the Windows DDK. Look here:

*   [Virtual Webcam Driver](https://stackoverflow.com/questions/1627448/virtual-webcam-driver)

Addendum :

You'll also probably have to venture outside of .Net (and C#) and do some C/C++ work...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:58:35.213

不确定它在c#中是否可行。

非 c# 解决方案之一是为您的相机编写 DirectShow 过滤器。这是在开源 smartcam 项目中所做的：http: [//sourceforge.net/projects/smartcam/](http://sourceforge.net/projects/smartcam/)

# php - How do I retrieve the underlying entity object from a Twig template in a Symfony2 entity field?

> ID：11270604
> 
> 赞同：3
> 
> 时间：2012-06-30T00:50:03.047
> 
> 标签：php, symfony, doctrine-orm, twig

I have a form builder which creates a form with an 'entity' field type (let's call that entity MyBundle:MyEntity). MyEntity has a property entitled 'description'. In *addition* to the __tostring() method automatically called by Symfony2 that is used for the label of each radio button, I'd like to access the description property.

I've overridden the choice_widget block and attempted to get `{{ child.vars.value }}`, but that's just the ID of the entity rather than the object itself.

Does anyone know how to do this, or if it is even possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:11:00.500

我不太了解您到底想做什么，因为您没有提供任何代码，但据我了解，您想访问孩子的对象，对吗？

如果是这种情况，您可以使用 child.get('value') 这将返回对象

这意味着您可以调用 child.get('value').getDescription() 或子对象具有的任何功能

# jquery - jquery exclude some child nodes from .text()

> ID：11270607
> 
> 赞同：13
> 
> 时间：2012-06-30T00:50:21.147
> 
> 标签：jquery

The html structure looks like this

```
<div id="parent">
    parent may contain text
    <div id="child1">
       child 1 may contain text
       <script>console.log('i always contain something');</script>`
    </div>

    <div id="child2">
       child2 may contian text
    </div>    
</div> 
```

I am trying to get contents of every node except the contents of `<script>`. The result should look like this:

```
 parent may contain text
    child 1 may contain text 
    child2 may contian text 
```

I've tried using `($('#parent').not('div script').text()` ,but it does not work

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T01:22:13.263

您可以通过克隆节点、删除脚本标签并检索`text()`值来实现：

```
var content = $('#parent').clone();
content.find('script').remove();
console.log(content.text()); 
```

[**演示**](http://jsfiddle.net/dvHKv/)

您应该克隆该节点以确保之后保持不变的 DOM 树。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T00:57:45.440

尝试这个：

```
($('#parent').text()).replace($('#parent script').text(),''); 
```

看看这个[小提琴](http://jsfiddle.net/QLBvK/12)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-23T17:13:54.157

一个不错的小型 jQuery 插件：[***jQuery.ignore()***](http://jsfiddle.net/RokoCB/hh7ya7hL/5/)

```
$.fn.ignore = function(sel){
  return this.clone().find(sel||">*").remove().end();
}; 
```

像这样使用：

```
$("#parent").ignore()                  // Will ignore all children elements
$("#parent").ignore("script")          // Will ignore a specific element
$("#parent").ignore("h1, p, .ignore")  // Will ignore specific elements 
```

例子：

```
<div id="parent">
   Get this
   <span>Ignore this</span>
   <p>Get this paragraph</p>
   <div class="footer">Ignore this</div>
</div> 
```

```
var ignoreSpanAndFooter = $("#parent").ignore("span, .footer").html(); 
```

将导致：

```
Get this
<p>Get this paragraph</p> 
```

[此答案的片段：[https ://stackoverflow.com/a/11348383/383904](https://stackoverflow.com/a/11348383/383904)]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-30T01:09:19.953

这对我有用，看起来很通用[编辑以使程序更清晰]

```
var t = [];
$("#parent").each(function(i,e) 
    {if (e.nodeName!="SCRIPT") t.push(e.innerText);}​);​​​​​​​​​​​​​​
console.log(t); 
```

而不是`console.log()`您显然应该以其他方式（数组？）收集字符串以在您的代码中使用它们。

[http://jsfiddle.net/8eu4W/3/](http://jsfiddle.net/8eu4W/3/)

# ruby - Installing opencv on Ubuntu - can't find libopencv_calib3d

> ID：11270609
> 
> 赞同：1
> 
> 时间：2012-06-30T00:50:28.817
> 
> 标签：ruby, linux, ubuntu, opencv

I successfully installed Opencv via

```
sudo apt-get install libcv-dev libcv4 libcvaux-dev libcvaux4 libhighgui-dev libhighgui4 opencv-doc python-opencv 
```

But now when I try to use ruby-opencv I keep getting

```
 libopencv_calib3d not found. 
```

error

What am I missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-22T23:57:21.050

在 Ubuntu 14.04 上，我遇到了这个问题，使用以下方法解决了这个问题：

```
sudo apt-get install libopencv-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:56:28.187

Try also

```
sudo apt-get install libopencv-calib3d2.3 
```

Add `libopencv-calib3d-dev` if you need to *compile* the Ruby bindings yourself.

# python - python convert unknown character to ascii

> ID：11270611
> 
> 赞同：3
> 
> 时间：2012-06-30T00:50:47.133
> 
> 标签：python, character-encoding

In a text file I'm processing, I have characters like ����. Not sure what they are.

I'm wondering how to remove/convert these characters.

I have tried to convert it into ascii by using .encode(‘ascii’,'ignore’). python told me char is not whithin 0,128

I have also tried unicodedata, unicodedata.normalize('NFKD', text).encode('ascii','ignore'), with the same error

Anyone help?

Thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T01:03:24.590

您始终可以使用 Unicode 字符串并使用您显示的代码：

```
my_ascii = my_uni_string.encode('ascii', 'ignore') 
```

如果这给了您一个错误，那么您实际上并没有一个 Unicode 字符串开始。如果这是真的，那么你有一个字节字符串。您需要知道它使用的是什么编码，并且可以将其转换为 Unicode 字符串：

```
my_uni_string = my_byte_string.decode('utf8') 
```

（假设您的编码是 UTF-8）。

字节字符串和 Unicode 字符串之间的这种拆分可能会令人困惑。我的演示文稿[Pragmatic Unicode 或 How Do I Stop The Pain](http://bit.ly/unipain)可以帮助您保持直截了当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:06:54.843

它并不完美（特别是对于较短的字符串），但 chardet 库将在这里使用：

[http://pypi.python.org/pypi/chardet](http://pypi.python.org/pypi/chardet)

要让 chardet 找出编码，然后编码为 un​​icode，您可以：

```
import chardet
encoding = chardet.detect(some_string)['encoding']
unicode_string = unicode(some_string, encoding) 
```

当然，如果它们超出 ascii 范围，您将无法将它们编码为 ascii。

# shell - Weird behavior with the $@ variable

> ID：11270613
> 
> 赞同：4
> 
> 时间：2012-06-30T00:51:01.103
> 
> 标签：shell, unix, variables

As I understand and read it, `$@` turns into "arg1" "arg2" "arg3".
But it seems to have some weird behavior in some cases when quoted.

**Test 1, $@**

```
$ function somefunc { sh -c "echo $@"; }
$ somefunc 1 2 3
> + somefunc 1 2 3
> + sh -c 'echo 1' 2 3
> 1 
```

The expected output is 1 2 3, the output I get is 1\. Now I see that, for some reason, it seems to only pass `echo 1` as command, but why does `"echo "1" "2" "3""` turn into it? I would maybe have expected `echo ` because the " before echo may get closed by the " before 1.

**Test 2, $***

```
$ function somefunc { sh -c "echo $*"; }
$ somefunc 1 2 3
> + somefunc 1 2 3
> + sh -c 'echo 1 2 3'
> 1 2 3 
```

This is pretty obvious and works, just to make sure. After all `$*` passes `1 2 3`, not `"1" "2" "3"`.

**Test 3, $@ and $***

```
$ function somefunc { sh -c "echo $@ $*"; }
$ somefunc 1 2 3
> + somefunc 1 2 3
> + sh -c 'echo 1 2 3 1 2 3'
> 1 2 3 1 2 3 
```

This seems to work again weirdly enough. But I don't get how `"echo "1" "2" "3" 1 2 3"` turns into `'echo 1 2 3 1 2 3'` and doesn't follow the "pattern" that only `"echo $@"`did.

**Test 4, $@ and a string**

```
$ function somefunc { sh -c "echo $@ hi"; }
$ somefunc 1 2 3
> + somefunc 1 2 3
> + sh -c 'echo 1' 2 '3 hi'
> 1 
```

This again follows the pattern of `"echo $@"`, even thought, as I see it, it is pretty much the same as `"echo $@ $*"` since `$*` turns into a string after all.
What also puzzles me is that it turned into `'echo 1' 2 '3 hi'`, the first test would have suggested `'echo 1' 2 3 hi` (without the two `'` surrounding `3 hi`)

**Test 5, $@ and $var**

```
$ var="hi"
> + var=hi
$ function somefunc { sh -c "echo $@ $var"; }
$ somefunc 1 2 3
> + somefunc 1 2 3
> + sh -c 'echo 1 2 3 hi'
> 1 2 3 hi 
```

This works again. So `$@` seems to work if another variable follows it.

The tests are also possible with `su user -c` or `bash -c` instead of `sh -c`, so I suppose also every other command that executes the next given argument.

I now seem to have gotten some kind of behavior out of it,
but I do still not understand this behavior.
What am I missing here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:45:55.680

[sh 语言规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sh.html)有这样的说法`$@`：

**扩展到位置参数，从一个开始。当扩展发生在双引号内时，并且在执行字段拆分（请参阅字段拆分）时，每个位置参数都应扩展为一个单独的字段，前提是第一个参数的扩展仍应与开头部分连接原词（假设扩展参数嵌入在一个词中），最后一个参数的扩展仍应与原词的最后部分连接。如果没有位置参数，“@”的扩展将生成零字段，即使“@”被双引号引起来。**

这意味着 `"echo $@ $*"`位置参数所在的字符串`1`,应该扩展为`2`，以便您的测试 3 应该输出该字符串。bash 错误地将字符串扩展为并输出的事实表明 bash中存在错误。`3``"echo 1" "2" "3 1 2 3"``1``"echo 1 2 3 1 2 3"``1 2 3 1 2 3`

处理 sh 语法规则的这个（又一个）奇怪之处的常用技术是仅在 $@ 是一个不同的单词时在双引号中使用它。换句话说，可以写`"$@"`，但不要放在`$@`双引号中，除非它是双引号内的唯一内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:25:59.680

使用@BrianSwift 的提示，一切都非常有意义，除了**Test3**（在这里，我们得到三个参数的情况**并非**`'echo '`如此，第一个参数的前缀为，第三个参数的后缀为`' $*'`。相反，结果是单个参数） .

但这可能可以通过以下事实来解释：`$@`和`$*`都是 shell 中存在特殊代码的“特殊”变量。我假设`$*`just 的存在覆盖了@BrianSwift 注意到的特殊行为，因为`$*`稍后会对其进行评估。

尝试交换顺序：`somefunc() { sh -x "echo $* $@"; }`。您将再次获得带有前缀和后缀的拆分行为，这似乎支持我的上述假设。

因此，总而言之，除了 Test3 的行为可能有点“未充分记录”之外，一切都可以通过参考手册来解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T00:54:13.447

> As I understand and read it, $@ turns into "arg1" "arg2" "arg3".

No, `"$@"` turns into `"arg1" "arg2" "arg3"`. The quotes matter.

# html - Trying to create rounded corners on table but only one the edges

> ID：11270614
> 
> 赞同：0
> 
> 时间：2012-06-30T00:51:12.677
> 
> 标签：html

so I've created a table with table classes and I want the table to have rounded edge, but this code gives me all Cells Rounded. How to have only the table rounded ? thank you

```
 <!DOCTYPE html>
<html>
<head>
<style type="text/css">
table
{
border-collapse:collapse;
}
table, td, th
{
/* This is to have rounded corners */

border:1px solid black;  
/*  change to 1 if border needed */
}
table.margin
{
margin-top:25px;
}

table.margin2
{
margin-top:15px;

border-radius:5px;
-moz-border-radius:5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:57:10.477

Your going to need to take the rounded corners code out of the table, td, th since that will apply the rounded corners code to all of those elements, but if you move it to the table { /* rounded corners code here */ } then it won't apply to the td's and the th's.

This code works for me on chrome.

```
<!DOCTYPE html>
<html>
  <head>
    <style type=text/css>
      .rounded_edges {
        -moz-border-radius: 15px;
        border-radius: 15px;
        border: 1px solid black;
      }
    </style>
  </head>

  <body>
    <table class="rounded_edges">
      <tr>
        <th>Head 1</th>
        <th>Head 2</th>
        <th>Head 3</th>
      </tr>
      <tr>
        <td>Cell 1-1</td>
        <td>Cell 1-2</td>
        <td>Cell 1-3</td>
      </tr>
      <tr>
        <td>Cell 2-1</td>
        <td>Cell 2-2</td>
        <td>Cell 2-3</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T06:31:33.923

如果您使用的是表格，只需将其放入样式中：

```
border-radius:10px;-moz-border-radius:10px;-webkit-border-radius:10px; 
```

# ios - prepareForDeletion being called once when I call deleteObject: and a second time when I save

> ID：11270616
> 
> 赞同：2
> 
> 时间：2012-06-30T00:51:37.780
> 
> 标签：ios, core-data, cs193p

edited with extra information: I am using an app based on `CoreDataTableViewController` from cs193p. When I delete an instance of an entity called `Position`, the `prepareForDeletion` is called immediately. But when I call `saveToURL`, or when the database is being autosaved, `prepareForDeletion` is called again.

Is this the way it should be? can I prevent it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:49:43.783

设置 a`BOOL isDeleting`并检查该进程是否已在运行。

## 例子

```
- (void) prepareForDeletion
{
    if ( isDeleting ) 
        return;

    /* handle the rest of the deleting process */
    isDeleting = YES;

    if ( /* the process has finished deleting */ )
        isDeleting = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T02:57:27.647

这大概就是它应该的样子。UIManagedDocument 使用两个 ManagedObjectContexts。当子上下文 (document.managedObjectContext) 保存时，它会对其父上下文进行保存。`prepareForDeletion`当父级保存到持久存储时，父级上下文中的对象又会立即被调用。

# android - detecting the side of a cube that is facing the camera in android opengl es

> ID：11270619
> 
> 赞同：3
> 
> 时间：2012-06-30T00:52:11.540
> 
> 标签：android, opengl-es, cubes

So I started creating an app to learn openGL es on adroid. First I went through a chapter that explained how to construct a cube and get it to rotate using the system timer. I then mapped each side to a different segment of one image. For development purposes each side is textured with a number. I then implemented the drag feature to allow the user to rotate the cube up/down or left/right depending how they swiped.

First here is some background on my problem:

I want to keep track of which side is facing the camera because each face is being rotated on the axis it started on. For example given a cube that has the unfolded layout as follows.

```
 2
  4
3 1 5
  6 
```

Where 1 is the side facing the screen, 2 is the opposite (or back face), 4 is up, 5 is right, 6 is down, and 3 is left.This means 3/5 are on the x-axis, 4/6 on the y-axis, and 1/2 on the z axis.

Here is my issue:

The cube rotates correctly if I only rotate around 1 axis (i.e. I only go left/righ or up/down until I go 360) but if I only go to 90 180 or 270 then the axis I should be rotating around have switched. This happens because of what is stated above about each side of the cube being stuck to the axis it started on.

If you rotate right once so 5 is facing, then the z axis from the users perspective is the x-axis of the cube. This gets even more convoluted when you start going 90 degrees left/right then 90 degrees up/down, etc.

I tried to keep track of the faces with an array of numbers listed clockwise from the top number, but depending which number you came from the new directions for the surrounding numbers have changed.

For Example:

I mapped out the numbers surrounding each number as it faces the screen if it was rotated to from 1 so

```
 4         2         4         1         4           
3 1 5     3 4 5     1 5 2     3 6 5     2 3 1     
  6         1         6         2         6 
```

and 2 is a wild card because it can be gotten to from any direction so there is no real initial number layout from 1

```
 6  
3 2 5
  4 
```

So my arrays would be

```
sidesOfFace1[] = {4,5,6,3}
sidesOfFace2[] = {6,5,4,3}
sidesOfFace3[] = {4,1,6,2}
sidesOfFace4[] = {2,5,1,3}
sidesOfFace5[] = {4,2,6,1}
sidesOfFace6[] = {1,5,2,3} 
```

And MOVE can have the values

```
UP = 1  RIGHT = 2  DOWN = 3  LEFT = 4 
```

Then by keeping track of the previous face, curr face, and last move I tried to figure out a formula to get an offset that would help me select what the next face would be given a direction to move to a new face. Roughly I came out with this interpretation:

```
prevface MOVE currFace
    1 -> UP(1) -> 4 -> RIGHT(2) -> 5

offset = opposite direction of MOVE - (sidesOfFace.indexOf(prevFace)+1)

So first I get
   1) DOWN - sidesOfFace4.indexOf(1)+1 => 3 - 3 = 0

   2) LEFT - sidesOfFace5.indexOf(4)+1 => 4 - 1 = 3 
```

1) This tells me that the sides around 4 are in the same order as the array sidesOfFace, in clockwise starting at the top. So when the user swipes again I can know which side we are going to. This is imperative in being able to set up the right rotations of the cube since they change for the viewer as the cube gets turned.

2) This shows that there is an offset, if we look at the array the index of 4 should be 0 but the cube has been rotated such that the UP side is now at index 3, RIGHT is 0, DOWN is 1, and LEFT is 2.

Besides needing to know which side is facing the screen for other functionality in my app, I also have to know because depending on which side is facing the screen I have to rotate the cube along the correct axis. I am keeping track of the xRot and yRot but these rotations have to happen according the the camera/users view, not the cubes axis.

For Example I found that:

```
axis for front face  up/down axis  right/left axis  (as seen by the camera)
    1   +z              +x             +y
    2   -z              -x             -y

    4   +y              +x             +z
    6   -y              -x             -z

    5   +x              +z             +y
    3   -x              -z             -y 
```

This means that depending on which side is facing the screen I have to do the xRotations around the up/down axis and the yRotations around the right/left axis.

A friend said something about possibly checking the 4 vertices that are closest to the camera but since I am using glRotate funcs I wasn't sure where I could get that information from. But I still need to know which numbers are on which side of the front face so I can automate the rotations of the cube.

If you actually sat down and read all this I truely do appreciate it, If you could steer me in the right direction. Maybe a link, or better yet a known solution to this problem would be amazing. I have been struggling with this for a few days now and I was just wondering if this was already a problem that had a solution.

Thanks all,

Alan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:46:31.877

老实说，我没有完全阅读您帖子的最后 3/4，它看起来比需要的要复杂得多。

但是，如果您只想检测立方体的哪一侧最靠近相机，则只需执行以下操作：

使用未旋转的立方体，为每个方向创建一个向量：

```
vec3 left(-1, 0, 0)
vec3 right (1, 0, 0)
vec3 up(0, 1, 0)
etc... 
```

然后获取立方体的当前模型视图矩阵。如果您通过立方体的模型视图转换法线，您将在眼睛空间中获得结果向量。

```
vec3 leftInEyeSpace = modelView * left;
vec3 upInEyeSpace = modelView * up;
... 
```

这将是每个向量相对于您的眼睛的方向。

然后定义一个从立方体中心指向相机的向量：

```
vec3 cubeToCamera= -normalize((modelView * vec4(0,0,0,1)).xyz); 
```

然后你想用你的 'cubeToCamera' 向量获取每个向量的点积。因为点积随着向量之间的角度增加而减小，所以具有最大量级的点积将是最面向相机的点积。

```
float leftDot = dot(cubeToCamera, leftInEyeSpace)
float rightDot = dot(cubeToCamera, rightInEyeSpace)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T03:37:59.723

有点令人费解，但这样的事情可以吗？我遗漏了一些方法，但希望你能明白我的大致想法，你应该能够使用布尔变量来确定哪一侧面向用户。

```
private Boolean right, left, spin;
private Boolean up, down, upsideDown;
private Boolean rightSide, leftSide;
// All false by default.

public void swipe(int swipeDirection)
{
    // Swipe Direction - 0 = Right, 1 = Left, 2 = Up, 3 = Down
    switch (swipeDirection)
    {
    case 0:
        if (upsideDown)
        {
            swipeLeft();
        }
        else if (rightSide)
        {
            swipeDown();
        }
        else if (leftSide)
        {
            swipeUp();
        }
        else
        {
            swipeRight();
        }
        break;
    case 1:
        if (upsideDown)
        {
            swipeRight();
        }
        else if (rightSide)
        {
            swipeUp();
        }
        else if (leftSide)
        {
            swipeDown();
        }
        else
        {
            swipeLeft();
        }
        break;
    case 2:
        if (upsideDown)
        {
            swipeDown();
        }
        else if (rightSide)
        {
            swipeRight();
        }
        else if (leftSide)
        {
            swipeLeft();
        }
        else
        {
            swipeUp();
        }
        break;
    case 3:
        if (upsideDown)
        {
            swipeUp();
        }
        else if (rightSide)
        {
            swipeLeft();
        }
        else if (leftSide)
        {
            swipeRight();
        }
        else
        {
            swipeDown();
        }
        break;
    }
}

private void swipeRight()
{
    if (right)
    {
        right = false;
        spin = true;
    }
    else if (left)
    {
        left = false;
    }
    else if (spin)
    {
        spin = false;
        left = true;
    }
    else if (up)
    {
        up = false;
        if (rightSide)
        {
            rightSide = false;
            upsideDown = true;
        }
        else if (leftSide)
        {
            leftSide = false;
        }
        else
        {
            rightSide = true;
        }
    }
    else if (down)
    {
        down = false;
        if (leftSide)
        {
            leftSide = false;
            upsideDown = true;
        }
        else if (rightSide)
        {
            rightSide = false;
        }
        else
        {
            leftSide = true;
        }
    }
    else
    {
        right = true;
    }
}

private void swipeUp()
{
    if (down)
    {
        down = false;
    }
    else if (up)
    {
        upsideDown = !upsideDown;
    }
    else if (upsideDown)
    {
        upsideDown = false;
        up = true;
    }
} 
```

# c# - Polymorphic cross-associations on Entity Framework

> ID：11270620
> 
> 赞同：4
> 
> 时间：2012-06-30T00:52:41.533
> 
> 标签：c#, .net, entity-framework, orm, polymorphic-associations

OK, this is an interesting and most importably **real urgent problem** for me to solve... In order for others to neatly comprehend it, I've stretched myself to make a well illustrated post.

* * *

## The Object Model

So I have this simple, easy and "beautiful" model in mind. See the first picture. (You can ignore `PathEntry`, it's not relevant in my situation.)

The idea is that a `MediaFeedItem` owns:

*   a collection of `ThumbnailFileEntries` (accesible through the *ThumbnailFiles* property)
*   at most 1 **raw** `FileEntry` (*MetadataFile* property) and
*   at most 1 `MediaFileEntry` (*MediaFile* property)

We shall refer to these last three entity types as the *file entities*.

Now there's more: As you can see, I am inheriting both `ThumbnailFileEntry` and `MediaFileEntry` from `FileEntry`, **and let's not debate that!** (for now), it's one of those end-of-story aspects of the design and both entity types will continue to grow later on.

![EDMX Model Diagram](../Images/f3da705fecc70aef4517962aad7e5d68.png)

This already brings me some significant issues right away in regards to the polymorphic associations induced by the relationships from the *file entities* to `MediaFeedItem`.

The first thing that you shall observe is that I have eliminated the navigation property from the **derived** *file entities* (`ThumbnailFileEntry` and `MediaFileEntry`) to the primary entity `MediaFeedItem`.

![MediaFeedItem_MediaFile association](../Images/3d0d978224b3500979ffdc3932d9ecc1.png)

I do this because they already inherit that property defined in the base class `FileEntry`. As you can see, I do not delete the roles at the end of these associations.

![MediaFeedItem_MetadataFile association](../Images/f443673e409b5fbc3b12f86ec51ee23c.png)

* * *

## The Relational Model

I shall be using the so-vastly-conceptually-superior TPT strategy for generating and mapping my Object Model to the RDB world (vs TPH/TPC).

I'm using EF5-rc, the EDMX model designer to design my model, and the EF5 DbContext Generator to generate a DbContext and POCOs cuz I wanna use the DbContext API.

As you can see, I can nicely generate the database model using the EF tools:

![DB Model Diagram](../Images/2f68dfc73f50ac47eca0c042148609a9.png)

* * *

## The Problem

When loading a new MediaFeedItem and saving it, I get the following error:

**System.InvalidOperationException: Multicplicity constraint violated. The role 'MetadataFile' of the relationship 'MediaFeedModel.MediaFeedItem_MetadataFile' has multiplicity 1 or 0..1.**

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:46:40.307

看看你的问题，有一件事很突出，File 和 MediaFeedItem 之间的 FK 关系是必需的（即文件必须有一个 MediaFeedItem），但如果你在 File 的扩展版本中，你可能不想要这个。

我认为你想要做的是以下之一：

*   将 MediaFeedItem_FileEntry 上的多重性更改为 0..1 - 0..1 以便在任一端都不需要
*   创建一个新的扩展类型来处理您的 metadataFile 类型并删除基类型和 MediaFeedItem 之间的直接引用

我个人认为第二个是解决您的问题的更优雅的解决方案，因为它为您的 MetadataFile 创建了一个实际类型

似乎正在发生的事情是您正在尝试创建扩展类型，但基本类型实际上并不是元数据文件。

# asp.net - Trying to deploy MVC 3 application using shared hosting, getting 403 - Forbidden: Access is denied

> ID：11270635
> 
> 赞同：0
> 
> 时间：2012-06-30T00:56:13.830
> 
> 标签：asp.net, asp.net-mvc-3, web-config, iis-7.5, shared-hosting

In the control panel I can see that I am using IIS7.5, ASP.NET Version 4. I have all the MVC3 dependencies in the /BIN folder too. The root folder has correct file access [read only] and I would think the host sets all the users access privillages for all the IIS services/users etc.

Folder structure.

```
-HTTPROOT
Content
Scripts
Views
bin
cleditor
colorbox
slider
treeview 
```

The web.config is below

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <section name="resizer" type="ImageResizer.ResizerSection" />
  </configSections>
  <connectionStrings>

    <add name="wwdbEntities" connectionString="metadata=res://*/Models.entitymodel.wwModel.csdl|res://*/Models.entitymodel.wwModel.ssdl|res://*/Models.entitymodel.wwModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ms-someserver.com;Initial Catalog=myDbname;User Id=XXXXX;Password=XXXXXXbwrt;integrated security=False;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />

  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="false" />
  </appSettings>
  <system.web>
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880">
        <credentials passwordFormat="Clear">
          <user name="admin" password="xxxxxxx" />
        </credentials>
      </forms>
    </authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules>
      <add name="ImageResizingModule" type="ImageResizer.InterceptModule" />
    </httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ImageResizingModule" type="ImageResizer.InterceptModule" />
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="somesqlserver.com; Integrated Security=False; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <resizer>
    <plugins>
      <add name="MvcRoutingShim" />
    </plugins>
  </resizer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:44:58.360

您可能需要检查以下内容：

*   查看是否在 IIS 中启用了匿名身份验证。

由于您处于共享环境中，这应该已经是正确的，但是可能值得检查。

*   检查是否在 IIS 中启用了默认文档。

即使这是一个 MVC 应用程序并且您可能认为没有默认文件，您仍然需要确保启用“default.aspx”作为您的默认文档。

# php - 方法在那里，但我不能使用它？

> ID：11270636
> 
> 赞同：0
> 
> 时间：2012-06-30T00:56:13.950
> 
> 标签：php

`Fatal error: Call to a member function get() on a non-object`在

```
pr($transaction->invoice->get()); 
```

我收到一条奇怪的消息。我确定该方法存在，并且可以使用，甚至在使用之前仔细检查过。这里有什么问题？

```
pr(get_class_methods($transaction->invoice));
Array
(
    [0] => __construct
    [1] => get
    [2] => __toString
    [3] => getHref
    [4] => setHref
    [5] => _get
) 
```

**更新：**

`var_dump(is_object($transaction->invoice));`评价为`bool(true)`

这些方法都不起作用。我很混乱！我认为这是那些边缘情况之一。我正在使用 Recurly 库。

**更新**

看起来有些返回的对象本身没有实例化。这很奇怪。我不知道 PHP 会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T22:34:46.743

你在这里体验的是**魔法**。由于 Magic 很难理解，因此更难调试。预计 Recurly PHP 库中有很大一部分是基于 Magic 的。

> 看起来有些返回的对象本身没有实例化。这很奇怪。我不知道 PHP 会这样做。

它不是 PHP，而是库。它为属性使用了[魔法 getter 和 setter](http://php.net/manual/en/language.oop5.magic.php)以及其他魔法材料。他们一定是被某个非常热爱魔法的巫师驱使的。你还没有陶醉吗？

超越魔法的最佳方法是为自己安装一个像**Xdebug**这样的步进调试器，然后设置断点并直接检查值。所有常见的 PHP IDE 都支持[xdebug 远程调试](http://xdebug.org/docs/remote)（即使这被称为远程调试，它也可以在您的本地开发机器上工作）。

# ruby - ruby forms in div elements

> ID：11270641
> 
> 赞同：0
> 
> 时间：2012-06-30T00:56:54.097
> 
> 标签：ruby, forms, html, erb

I'm having an issue where the form generated with ruby isn't included inside my `#content` div, is this because the form is generated after the html is read by the browser (sorry if I sound like a moron on this)

-- edit update - view source --

The code below generates with the email box and submit button outside of the content box

```
<div id="content">
<!-- text here -->
<form accept-charset="UTF-8" action="/password_resets" method="post">
<div style="margin:0;padding:0;display:inline">
<input name="utf8" type="hidden" value="&#x2713;" />
<input name="authenticity_token" type="hidden" value="afmtpSAc93w1uMcnouhY9XmbVTM7fE1VNFvZKnp0kMs=" />
</div>
    <div class="field"> 
        <input id="email" name="email" placeholder="email@website.com" type="text" />
    </div>
    <div class="actions">
        <input name="commit" type="submit" value="Reset Password" />
</form> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:01:27.293

访问此链接后想通了 [在FORM中使用DIV是否正确？](https://stackoverflow.com/questions/9942538/is-it-correct-to-use-div-inside-form)

一旦我删除了 div 的字段和操作，它就会清除所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:33:44.140

我不确定我的问题是否正确，但在上面的 html 中，最后一个`</form> </div>`应该是 `</div> </form>`

# ruby-on-rails - 如何在 Rails 中存储房间形状数据？

> ID：11270652
> 
> 赞同：2
> 
> 时间：2012-06-30T00:58:59.830
> 
> 标签：ruby-on-rails, gis, polygon

我正在编写一个 Rails 应用程序，该应用程序需要存储表示公共空间平面图的形状数据。这些空间主要是教堂和音乐厅。许多形状将非常简单（“扇形”或“鞋盒”），但有些形状会更复杂（例如[，像这样](http://www.berliner-philharmoniker.de/en/philharmonie/floor-plans/)）。

我对 Rails 相当陌生，对 GIS 应用程序完全陌生。（这是 GIS 问题吗？我不确定。）

谁能建议我应该使用哪种数据类型将这些信息存储在我的数据库中？房间形状应该存储为多边形吗？或者是否有更合适的数据类型，比如可以更准确地表示在[某些场地](http://www.angelfire.com/music2/davidbundler/carnegie.jpg)发现的曲面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:18:53.590

这可能不是最有效的方法，但您可以从定义一些模型开始，例如：

```
class Path
    has_many :nodes
end

class Node
    attr_accessible :x, :y, :next_id
    belongs_to :next, class_name: 'Node'
    has_one :arc_extension
end

class ArcExtension
    attr_accessible :radius, :x1, :y1, :x2, :y2
    belongs_to :node
end 
```

路径只是节点的集合。每个节点将存储路径上一个点的坐标以及路径中下一个节点的 id。如果您希望一个节点代表一个弧的起点，您可以为该节点创建一个弧延伸。arc_extension 可能会存储弧的半径以及构造弧所需的两个参考点。有关如何定义这些参考点的参考，您可以查看 HTML5 画布中使用的 arcTo 方法：http: [//dbp-consulting.com/tutorials/canvas/CanvasArcTo.html](http://dbp-consulting.com/tutorials/canvas/CanvasArcTo.html)。

如果您想表示其他类型的曲线路径（例如贝塞尔曲线），您应该能够稍微更改此方法。

# apache - 如何将 C:/xampp/htdocs/myfolder 重定向到 C:/somewhere_else？

> ID：11270653
> 
> 赞同：1
> 
> 时间：2012-06-30T00:59:18.757
> 
> 标签：apache, xampp, directory

我安装了 XAMPP 并运行了一个 apache 服务器。我的文件位于 C:/xampp/htdocs 并且可以从 www.mydomain.etc 访问，但我希望 www.mydomain.etc/foo 由 C:/somewhere_else 读取。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:40:34.157

启用 mod_alias 并将其添加到 httpd.conf：

```
Alias /foo c:/somewhere_else 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T01:04:10.363

您只需进入您的 httpd 配置文件，该文件可能位于以下位置：

```
C:\xampp\apache\conf\httpd.conf 
```

打开它，并进行以下更改，更改为您的新目录。

```
Change the lines:
.
.
DocumentRoot "C:/xampp/htdocs"
.
.
<Directory "C:/xampp/htdocs">
.
. 
```

重新启动 Apache 和 xampp，您应该可以启动并运行。

# replace - Excel宏用县名替换数字邮政编码

> ID：11270656
> 
> 赞同：0
> 
> 时间：2012-06-30T01:00:08.663
> 
> 标签：replace, zip

问题 - 我们有一个包含数千个地址但没有县的电子表格。

目标 - 我们想在每条记录中添加县。我们可以使用邮政编码识别县，并拥有邮政编码和县名列表。

到目前为止我已经尝试过 - 县名在 A 列中，相应的邮政编码在 B 列中。我将地址列表复制到同一个电子表格中，从 D 列中的邮政编码开始。

![在此处输入图像描述](../Images/ff16e17880f08219d3511e69be8d03ab.png)

我编写了以下简单的宏来比较和替换邮政编码与县名。它运行但似乎没有取代任何东西。我没有收到任何错误，所以我不确定问题出在哪里。有任何想法吗？

```
 Public Sub Take_Two_Replace_Zip_With_Name()

  Dim LastBCell As Long
  Dim B As Integer
  Dim Bcell As Range

  LastBCell = ActiveSheet.Range("B65000").End(xlUp).Row

  For B = LastBCell To 2 Step -1
  Set Bcell = ActiveSheet.Cells(B, 2)

  If Bcell = Bcell.Offset(0, 2) Then Bcell.Offset(0, 2) = Bcell.Offset(0, -1)
  Next B

  End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:25:24.507

好的，我自己解决了：

```
 For Each Bcell In Range("B2:B100").Cells

  Columns("D:D").Cells.Replace What:=Bcell, Replacement:=Bcell.Offset(0, -1).Value,          LookAt:=xlPart, _
          SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
          ReplaceFormat:=False

  Next Bcell 
```

# java - 如何在 maven 程序集中包含 rmic 包 jar

> ID：11270657
> 
> 赞同：1
> 
> 时间：2012-06-30T01:00:25.760
> 
> 标签：java, rmi, maven-assembly-plugin

我有一个多模块 maven 项目，它必须生成 RMI 存根（与不能使用动态代理的遗留产品集成）。我已将 rmic-maven-plugin 配置为在编译阶段执行 rmic，并在打包阶段打包存根 jar。

```
<execution>
        <id>rmic-process-classes</id>
        <goals>
          <goal>rmic</goal>
        </goals>
        <phase>compile</phase>
        <configuration>
          <keep>true</keep>
          <!--outputDirectory>${project.build.outputDirectory}</outputDirectory-->
          <includes>
            <include>com.MyImpl</include>
          </includes>
        </configuration>
      </execution>
      <execution>
        <id>rmic-package</id>
        <goals>
          <goal>package</goal>
        </goals>
        <configuration>
          <!--outputDirectory>${project.build.outputDirectory}</outputDirectory>
          <finalName>broker-dl</finalName>
          <classifier>${project.version}</classifier-->
        </configuration>
      </execution> 
```

在我的“-dist”模块中创建程序集后，我遇到了一个问题，该模块是用于创建分发存档的父模块的子模块。它不包括由 rmic-package 执行生成的客户端 jar。

如何配置程序集插件以包含 rmic 插件在打包阶段生成的 jar？我尝试`<files.`在 之后添加一个部分`<moduleSets>`，但是当 files 部分存在时，**只有**这些文件最终出现在我的程序集中，就好像 moduleSet 部分不存在一样。

```
 <moduleSets>
      <moduleSet>
          <useAllReactorProjects>true</useAllReactorProjects>
          <includes>
              <include>com:ImplModule</include>
           </includes>
          <binaries>
              <unpack>false</unpack>
              <fileMode>644</fileMode>
              <directoryMode>755</directoryMode>
              <dependencySets>
                <dependencySet>
                  <outputDirectory>lib</outputDirectory>
                </dependencySet>
              </dependencySets>
          </binaries>
      </moduleSet>     
   </moduleSets>
   <files>
       <file>           
           <outputDirectory>lib</outputDirectory>
           <source>../ImplModule/target/ImplModule-${project.version}-client.jar</source>
           <fileMode>644</fileMode>
       </file>       
   </files> 
```

**注意**：我已经阅读了一个[相关的问题](https://stackoverflow.com/questions/3711270/how-to-reference-a-jar-containing-only-stubs-created-with-rmicpackage-maven-g)，但是创建一个存根项目似乎是不可能的，因为生成存根的 RMI 服务器类显然需要成为主应用程序 jar 的一部分，而不是存根 jar 的一部分，所以我不看不到如何在一个模块中对 RMI 服务器进行 rmic，而在另一个模块中对其进行 javac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:32:03.523

通过从使用 moduleSets 切换到 fileSets 和 dependencySets 的组合，我能够自己解决这个问题。文件集为程序集的根目录提取主 jar，并将 rmic 客户端 jar 从 rmic-package 目标提取到 lib 目录中。然后，dependencySet 将主 jar 的所有依赖项也拉到 lib 目录中。

```
<!-- Include the -dl jar created by the rmic-package goal in
        the lib part of the assembly. It is necessary because 
        the target VM does not support dynamic RMI stubs, so the 
        stubs must be deployed in the assembly. -->
   <fileSets>
       <fileSet>
           <directory>../{project}/target</directory>
           <outputDirectory>.</outputDirectory>
           <!-- put the main jar in the top level -->
           <includes>
               <include>*.jar</include>
           </includes>
           <!-- don't include the RMIC-built -dl jar at the top -->
           <excludes>
               <exclude>*-dl-*.jar</exclude>
           </excludes>
       </fileSet>
       <fileSet>
           <directory>../{project}/target</directory>
           <outputDirectory>lib</outputDirectory>
           <!-- put the RMIC-built -dl jar in the lib dir -->
           <includes>
               <include>*-dl-*.jar</include>
           </includes>
       </fileSet>
   </fileSets>
   <dependencySets>
       <dependencySet>
           <!-- put all the dependencies in lib, as usual -->
           <useProjectArtifact>false</useProjectArtifact>
           <outputDirectory>lib</outputDirectory>             
           <excludes>
               <!-- don't include the main jar, which is at 
                    the top level already. -->
               <exclude>{groupId}:{artifact}</exclude>
           </excludes>
           <unpack>false</unpack>
       </dependencySet>
   </dependencySets> 
```

# android - 通过 Android 中的各种活动修复视图

> ID：11270658
> 
> 赞同：0
> 
> 时间：2012-06-30T01:00:54.183
> 
> 标签：android, admob, android-activity

Android 2.1 以上如何通过各种活动实现固定视图？*固定*是指视图应在活动更改时保持其状态。

特别是，我希望在每个活动之上都有一个[Admob AdView](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)，而无需在每次应用程序启动新活动时重新加载广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:39:55.650

我认为不可能使用不同的活动。但是您可以只使用一个活动，并通过该活动内的多个片段拆分屏幕并添加/删除它们，同时保持固定视图不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:53:53.540

这是不可能的。`Activity`是应用程序用户界面的基础，每个都必须`View`存在于`Activity`的父级`ViewGroup`中。由于 each`Activity`必须在最初启动时创建，因此必须对位于 s`View`内部的每个对象`Activity`进行膨胀并附加到`Activity`s 布局。

您可以做的是将实例化特定 admob 所需的信息传递`View`给下一个`Activity`使用`Intent`.

# python - 使用python获取列表中的最大重复项索引

> ID：11270660
> 
> 赞同：1
> 
> 时间：2012-06-30T01:01:24.903
> 
> 标签：python, list

正如这里有人指出的那样，为了在列表中获取最大重复项，可以使用：

```
>>> from collections import Counter
>>> mylist = [20, 20, 25, 25, 30, 30]
>>> max(k for k,v in Counter(mylist).items() if v>1)
30 
```

但是，如果我想获取索引而不是值怎么办？`[4, 5]`

有什么帮助吗？？

问候...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:06:52.017

```
>>> from collections import defaultdict
>>> mylist = [20, 20, 25, 25, 30, 30]
>>> D = defaultdict(list)
>>> for i,x in enumerate(mylist):
        D[x].append(i)

>>> D[max(k for k,v in D.items() if len(v)>1)]
[4, 5] 
```

# azure - 创建有效的 Azure VM 备份策略

> ID：11270661
> 
> 赞同：2
> 
> 时间：2012-06-30T01:01:37.867
> 
> 标签：azure

我正在尝试了解如何备份 Azure VM/Role 上的所有内容

例如，我有一个虚拟机，我已经通过远程桌面安装和配置了各种东西，比如流媒体服务器。
现在如果由于某种原因需要重新启动 VM 会发生什么，硬件故障是需要重新启动的一个示例。会发生什么，我需要重新安装我所有的东西吗？所以我不明白，MS [SLA](https://www.windowsazure.com/en-us/support/legal/sla/)保证 VM 99.9% 的正常运行时间，这是否解决了我重新安装的 0.01% 的机会？我认为我重新安装的真正机会迟早是 100%。

在 AWS 上，您可以将 EC2 备份到 ESB 或 S3，安装所有东西，拍摄快照，如果 EC2 出现故障，则恢复快照。

在这里我找到了一篇关于 Azure 不支持这个的帖子，但它是从 1 年前开始的，我想知道这是否已经改变，但找不到任何信息。 [在 Windows azure 中备份/快照 vm 映像 (vhd)](https://stackoverflow.com/questions/5791947/backup-snapshot-a-vm-image-vhd-in-windows-azure)

在管理门户中，我看到一个名为 [reimage] 的蹩脚按钮，但它的作用与名称所暗示的完全不同。

*如果这仍然不可能，我认为这将是一个交易破坏者，我将不得不放弃 Azure，转而支持 AWS 的成熟解决方案*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:24:08.490

听起来您正在寻找最近发布的[Windows Azure 虚拟机](http://msdn.microsoft.com/en-us/library/windowsazure/jj156003)(IaaS) 功能。这项新功能允许 Azure 直接与 Amazon 的 EC2 产品竞争。对于 Windows Azure 虚拟机，磁盘是存储在 blob 存储中的可写 .vhd 文件。如果机器因任何原因停止（硬件故障或手动停止），.vhd 只是位于 blob 存储中，等待机器再次启动。 [这篇](http://blogs.msdn.com/b/windowsazure/archive/2012/06/28/data-series-exploring-windows-azure-drives-disks-and-images.aspx)来自 Windows Azure 博客的文章描述了随着 Windows Azure VM 的出现而提供的新的持久性选项。

# android - Android 上的属性网格 - 只读和/或可编辑

> ID：11270662
> 
> 赞同：2
> 
> 时间：2012-06-30T01:01:38.273
> 
> 标签：android

我需要在我的应用程序中创建一个属性网格，以允许用户读取（最初）并最终编辑我使用自定义列表适配器显示的对象的属性。

我做了一些研究，发现 Android 有偏好活动，就 UI 部分而言听起来不错，但我不想实际保存“偏好”，我需要一个编辑屏幕。

有没有办法创建一个对话框，它将使用反射（对不起，.net 术语）来创建允许用户编辑对象的每个属性的对话框，还是我需要手动创建它？两者都可以，我只需要知道。谢谢！

# android - 如何将 eclipse 3.5.2 更新为 eclipse 3.6.2 以获得最新的 android？

> ID：11270671
> 
> 赞同：0
> 
> 时间：2012-06-30T01:03:22.063
> 
> 标签：android, eclipse, eclipse-plugin, adt, eclipse-3.5

我正在开发一个使用 Eclipse 作为 IDE 的 android 应用程序。我的 Eclipse 版本是 3.5.2。现在我想将 android 应用程序转换为适用于 android 4.1 的最新版本。在我的日食中，它最多只能显示 4.0。所以我需要更新。

当我单击帮助-> 在 Eclipse 中检查新软件时。然后它会显示一些 android 新组件。如果我点击安装意味着，那么它会显示一条消息需要“eclipse 3.6.2”

我找不到将 Eclipse 更新到 3.6.2 的方法。因为如果我新安装另一个 Eclipse 意味着我想完全改变我的 sdk 路径，更多的改变等等

所以我需要`update eclipse 3.6.2 without deleting, modifying the content`已经有安卓应用程序。

所以请大家给出你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:07:30.890

你必须从 android manager 更新 android sdk 而不是 eclipse

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:25:28.103

获取 Eclipse 版本 Indigo (3.7)

要从 Galileo(3.5) 或 Helios(3.6) 升级到 Indigo (3.7)，**首先**需要添加 Indigo 软件存储库，如下所示：

**1.**窗口 > 首选项 > 安装/更新 > 可用软件站点

**2.**点击“添加”

**3.**进入[http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

**4.**点击“确定”

现在要升级已安装的软件，请执行以下操作：

**1.**帮助 > 检查更新

**2.**如果找到更新，请继续安装向导并在最后单击完成

**3.**如果您正在升级平台本身，当系统提示您重新启动时，强烈建议您这样做。更新其他功能时可能不需要重新启动，但如果您不确定，请始终选择重新启动

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:30:34.640

我无法升级我的eclipse。所以我新下载了eclipse pulsar并用MTJ（eclipse中java的移动工具）安装了它。
现在它工作正常。
我只是改变我的程序位置。

感谢所有 4 给你的想法。

# jquery-ui - 如何禁用新的 Chrome HTML5 日期输入？

> ID：11270675
> 
> 赞同：35
> 
> 时间：2012-06-30T01:03:44.720
> 
> 标签：jquery-ui, google-chrome, date, input, datepicker

Chrome 的最新更新 (V 20.x) 使用新的内置日期和时间输入类型破坏了我的一种表单。我在日期字段上调用 ​​jQuery UI datepicker，它在更新之前可以正常工作。更新后，Chrome 会覆盖我的占位符并使 jQuery UI 小部件无法使用。

关于如何防止 Chrome 在不更改其类型的情况下弄乱我的输入字段的任何想法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-30T02:25:19.340

你有几个不同的选择。

您可以通过嗅探用户代理字符串并阻止点击事件来检测用户正在使用 Chrome。

```
if (navigator.userAgent.indexOf('Chrome') != -1) {
    $('input[type=date]').on('click', function(event) {
        event.preventDefault();
    });
} 
```

[用户代理嗅探是一个坏主意](http://css-tricks.com/browser-detection-is-bad/)，但这会起作用。

在我看来，理想的方法是检测浏览器是否支持本机日期选择器，是否使用它，如果不使用 jQuery UI。

```
if (!Modernizr.inputtypes['date']) {
    $('input[type=date]').datepicker({
        // Consistent format with the HTML5 picker
        dateFormat: 'yy-mm-dd'
    });   
}​ 
```

示例 - [http://jsfiddle.net/tj_vantoll/8Wn34/](http://jsfiddle.net/tj_vantoll/8Wn34/)

当然，由于 Chrome 支持原生日期选择器，用户会看到它而不是 jQuery UI。但至少您不会发生功能冲突，并且 UI 将可供最终用户使用。

这让我很感兴趣，所以我写了一些关于在原生控件旁边使用 jQuery UI 的日期选择器的内容 - [http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to- jQuery-ui/](http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/)。

## **编辑**

如果您有兴趣，我最近发表了关于在 HTML5 表单控件旁边使用 jQuery UI 的小部件的演讲。

*   [幻灯片](http://tjvantoll.com/speaking/slides/UI-Widgets-vs-HTML5/Sofia/)
*   [视频](http://www.youtube.com/watch?v=Q6Bjs4BoBTc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T10:26:30.233

这对我有用：

```
;
(function ($) {
    $(document).ready(function (event) {
        $(document).on('click input', 'input[type="date"], input[type="text"].date-picker', function (e) {
            var $this = $(this);
            $this.prop('type', 'text').datepicker({
                showOtherMonths: true,
                selectOtherMonths: true,
                showButtonPanel: true,
                changeMonth: true,
                changeYear: true,
                dateFormat: 'yy-mm-dd',
                showWeek: true,
                firstDay: 1
            });

            setTimeout(function() {
                $this.datepicker('show');
            }, 1);
        });
    });
})(jQuery, jQuery.ui); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-20T12:36:36.020

要删除箭头和旋转按钮：

```
.unstyled::-webkit-inner-spin-button,
.unstyled::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
} 
```

您仍然可以通过按`Alt`+激活日历`Down Arrow`（在 Windows 10 上选中）。

要禁用，您需要添加一些 JavaScript：

```
dateInput.addEventListener('keydown', function(event) {
    if (event.keyIdentifier == "Down") {
        event.preventDefault()
    }
}, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T22:47:16.703

我完全同意 TJ。

如果您正在对日期值进行任何类型的编辑、预填充或动态设置，您还需要知道自 2013 年 7 月 3 日起，[Chrome 仅支持 ISO 标准日期格式（yyyy-mm-dd )](http://dev.w3.org/html5/markup/input.date.html#input.date.attrs.value) . 它将以本地格式（美国为“mm/dd/yy”）向用户显示日期，但会忽略 HTML 中设置的非 ISO 标准格式的任何值。

要在页面加载时进行转换，您可以使用 TJ 的用户代理嗅探器并执行以下操作：

```
if (navigator.userAgent.indexOf('Chrome/2') != -1) {
    $('input[type=date]').each(function(){
        var d = trim(this.getAttribute('value'));
        if (d){
            d = new Date(d);
            var dStr = d.toISOString().split('T')[0];
            this.value = dStr; 
        }
    });
} 
```

例如，如果您选择禁用本机日期选择器并使用 jQuery，您还需要设置日期格式以匹配 Chrome 的日期字段，否则它不会显示 jQuery 日期选择器发送的输入：

```
$('#myDate').datepicker({dateFormat: 'yy-mm-dd'}); 
```

将这两件事添加到 TJ 答案的第一个选项中，您就可以让 jQuery 的日期选择器在 Chrome 中正常工作！

依靠本机日期选择器是理想的最佳解决方案。但是，当您需要支持停电日期、日期范围的东西，或者您只是想让它看起来更漂亮时，这将起作用。

# python - 如何删除 mod_python？

> ID：11270678
> 
> 赞同：4
> 
> 时间：2012-06-30T01:04:33.107
> 
> 标签：python, apache, flask, mod-python

我的 Apache 日志中不断出现这些错误：

```
[error] python_init: Python version mismatch, expected '2.6.5+', found '2.6.6'.
[error] python_init: Python executable found '/usr/bin/python'.
[error] python_init: Python path being used '/usr/lib/python2.6/:/usr/lib/python2.6/plat-linux2:/usr/lib/python2.6/lib-tk:/usr/lib/python2.6/lib-old:/usr/lib/python2.6/lib-dynload'.
[notice] mod_python: Creating 8 session mutexes based on 150 max processes and 0 max threads.
[notice] mod_python: using mutex_directory /tmp 
```

根据我的阅读，这些错误来自 mod_python。但是，我在我的 Python 项目中使用 Flask 和 WSGI，所以我不知道为什么会出现这些错误。

有没有一种简单的方法可以删除 mod_python？- 我试过 a2dismod，但 mod_python 似乎不存在，即使我在 Apache 的 mods-available 目录中看到它。

**编辑：**我刚刚尝试过 a2dismod python，这似乎奏效了。我想我 n00bishly 试图禁用 mod_python。我的 Python 应用程序似乎仍然可以正常工作。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T01:07:38.050

查看您的`httpd.conf`文件，并删除显示以下内容的行：

```
LoadModule mod_python   /path/to/mod_python.so 
```

然后重启apache：

```
apachectl restart 
```

# windows - 批量 FOR 循环内的 WHILE 循环

> ID：11270679
> 
> 赞同：3
> 
> 时间：2012-06-30T01:04:48.333
> 
> 标签：windows, loops, batch-file, for-loop

我已经看到其他问题解决了这个问题的*一部分*，但我没有看到完成整个事情的解决方案。当然，在命令处理器中没有“while”之类的东西，并且由于 goto :line 语句会中断所有循环，因此在继续执行下一个值之前，它不是在特定*持续时间内*迭代某些值集的选项。

这是我要使用的逻辑流程的伪代码；命令处理器挫败了我让它运行至今的尝试。您将如何构建它（除了放弃批处理脚本并使用 c# 或其他东西）？

**伪代码**：

```
SET %%durationMinutes=60
FOR %%X IN (10 20 40 80 160 200 0) DO (
  :: calculate elapsed minutes...
  WHILE %elapsedMinutes < %%durationMinutes DO (
    :: unrelated hocus pocus here, uses %%X as a variable
    call :foo %%X 
    // can't use goto to simulate the WHILE loop since it breaks %%X, so...?
  )
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T12:26:48.120

这个问题有两个方面。首先，`goto`打破任何嵌套 IF/FOR 命令的事实，但也许更重要的是，While 组装起来`goto`非常慢。一种解决方案是用无限循环模拟一个while：并通过a在子例程中`for /L %%i in () do ...`打破它。`goto`这个解决方案的问题是`for /L`不能`goto` *在同一个 cmd.exe 上下文中*破坏 a 。因此，解决方案是调用一个新的 cmd.exe 来执行 While。

在新的 cmd.exe 中执行的 Batch 文件可能是同一个调用者文件，所以我们需要通过同一个 Batch 文件中的特殊参数来控制 While 的执行。此外，我们可以使用辅助变量来使所有这些东西更清晰。这里是：

```
@echo off
setlocal EnableDelayedExpansion

rem While dispatcher
if "%1" equ "While" goto %2

rem Definition of auxiliary variables
set While=for /L %%a in () do if
set Do=(
set EndW=) else exit
set RunWhile=cmd /Q /C "%0" While

echo Example of While
echo/
goto RunMyWhile

rem Write the While code here
:MyWhile
set /A i=0, num=0
set /P "num=Enter number: "
%While% !num! gtr 0 %Do%
   set /A i+=1
   echo !i!- Number processed: !num!
   echo/
   set num=0
   set /P "num=Enter number: "
%EndW% !i!

rem Execute the While here
:RunMyWhile
%RunWhile% MyWhile
set i=%errorlevel%
echo/
echo While processed %i% elements 
```

如您所见，While 可能会通过 ERRORLEVEL 将数字结果返回给调用者代码。

在您的特定情况下：

```
SET durationMinutes=60
goto RunMyWhile

:MyWhile
:: calculate elapsed minutes...
%WHILE% !elapsedMinutes! < %durationMinutes% %DO%
    :: unrelated hocus pocus here, uses %3 as a variable
    call :foo %3
    :: calculate elapsed minutes again...
%EndW%

:RunMyWhile
FOR %%X IN (10 20 40 80 160 200 0) DO (
  %RunWhile% MyWhile %%X
) 
```

[这篇文章](http://www.dostips.com/forum/viewtopic.php?t=2707)详细解释了这个主题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:26:08.490

Harry 在[他的回答](https://stackoverflow.com/a/11270934/1012053)中使用子程序的想法是正确的。通常，一旦调用子例程，就无法访​​问外部循环 FOR 变量。但是如果子程序有自己的 FOR 循环，它们就会“神奇地”再次可用。这可以消除将外部循环值存储在变量中或将值作为参数传递的需要。

```
@echo off
for %%x in (1 2 3 4 5) do (
  echo begin outer loop iteration, x=%%x
  call :innerLoop
  echo end of outer loop iteration, x=%%x
  echo(
)
echo Outer loop complete
exit /b

:innerLoop
echo inside subroutine, x FOR variable is inaccessible: x=%%x
for %%y in (1 2 3 4 5) do (
  if %%y gtr %%x goto :break
  echo within FOR loop inside subroutine: x=%%x y=%%y
)
:break
echo end of subroutine, x FOR variable is inaccessible: x=%%x
exit /b 
```

结果如下：

```
begin outer loop iteration, x=1
inside subroutine, x FOR variable is inaccessible: x=%x
within FOR loop inside subroutine: x=1 y=1
end of subroutine, x FOR variable is inaccessible: x=%x
end of outer loop iteration, x=1

begin outer loop iteration, x=2
inside subroutine, x FOR variable is inaccessible: x=%x
within FOR loop inside subroutine: x=2 y=1
within FOR loop inside subroutine: x=2 y=2
end of subroutine, x FOR variable is inaccessible: x=%x
end of outer loop iteration, x=2

begin outer loop iteration, x=3
inside subroutine, x FOR variable is inaccessible: x=%x
within FOR loop inside subroutine: x=3 y=1
within FOR loop inside subroutine: x=3 y=2
within FOR loop inside subroutine: x=3 y=3
end of subroutine, x FOR variable is inaccessible: x=%x
end of outer loop iteration, x=3

begin outer loop iteration, x=4
inside subroutine, x FOR variable is inaccessible: x=%x
within FOR loop inside subroutine: x=4 y=1
within FOR loop inside subroutine: x=4 y=2
within FOR loop inside subroutine: x=4 y=3
within FOR loop inside subroutine: x=4 y=4
end of subroutine, x FOR variable is inaccessible: x=%x
end of outer loop iteration, x=4

begin outer loop iteration, x=5
inside subroutine, x FOR variable is inaccessible: x=%x
within FOR loop inside subroutine: x=5 y=1
within FOR loop inside subroutine: x=5 y=2
within FOR loop inside subroutine: x=5 y=3
within FOR loop inside subroutine: x=5 y=4
within FOR loop inside subroutine: x=5 y=5
end of subroutine, x FOR variable is inaccessible: x=%x
end of outer loop iteration, x=5

Outer loop complete 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T02:23:44.347

只需将循环的内容放在子程序中即可。这是一个简单示例的伪代码：

```
for x in (1 2 3 4 5) {
  y = 1
  while (y <= x) {
    echo y
    y = y + 1
  }
  echo Looping
} 
```

并批量实施：

```
for %%x in (1 2 3 4 5) do set x=%%x & call :for_loop
goto :for_end
:for_loop

  set y=1

  :while_loop
  if not %y% LEQ %x% goto :while_end

    echo %y%
    set /a y=y+1

  goto :while_loop
  :while_end

  echo Looping

goto :eof
:for_end 
```

和输出：

```
1
Looping
1
2
Looping
1
2
3
Looping
1
2
3
4
Looping
1
2
3
4
5
Looping 
```

# java - 在 Android 中解压缩带有子文件夹的文件夹

> ID：11270680
> 
> 赞同：2
> 
> 时间：2012-06-30T01:05:55.823
> 
> 标签：java, android, unzip

首先，我用谷歌搜索了很多次，搜索了一大堆 Stackoverflow 页面，但我什么也做不了。我想要做的是我有一个结构如下的 zip 文件：

压缩文件.zip

> 文件夹
> 
> > 子文件夹 1
> > 
> > > 带空格的子文件夹（大约 100 个，但数量不详）
> > > 
> > > > 带有空格的子子文件夹
> > > > 
> > > > > 几个文件
> > > > 
> > > > SubSubFolderWithoutSpaces
> > > > 
> > > > > 还有几个文件
> > 
> > 子文件夹 2
> > 
> > > 带空格的子文件夹（大约 100 个，但数量不详）
> > > 
> > > > 带有空格的子子文件夹
> > > > 
> > > > > 几个文件
> > > > 
> > > > SubSubFolderWithoutSpaces
> > > > 
> > > > > 还有几个文件
> > 
> > 子文件夹 3
> > 
> > > 带空格的子文件夹（大约 100 个，但数量不详）
> > > 
> > > > 带有空格的子子文件夹
> > > > 
> > > > > 几个文件
> > > > 
> > > > SubSubFolderWithoutSpaces
> > > > 
> > > > > 还有几个文件
> > 
> > 子文件夹4
> > 
> > > 带空格的子文件夹（大约 100 个，但数量不详）
> > > 
> > > > 带有空格的子子文件夹
> > > > 
> > > > > 几个文件
> > > > 
> > > > SubSubFolderWithoutSpaces
> > > > 
> > > > > 还有几个文件

我目前正在使用来自[http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)的代码来尝试解压缩文件，但它所做的只是创建一个名为 zipfile 的目录，然后在其中有一个子目录称为文件夹，目录中没有任何内容，这显然不应该发生。

任何帮助将非常感激。

更新：哦，如果你想知道我确实有 WRITE_EXTERNAL_STORAGE_PERMISSION。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T04:40:23.473

我希望这可以帮助你：

```
private boolean unzipPack(InputStream stream) {
    FileOutputStream out;
    byte buf[] = new byte[16384];
    try {
        ZipInputStream zis = new ZipInputStream(stream);
        ZipEntry entry = zis.getNextEntry();
        while (entry != null) {
            if (entry.isDirectory()) {
                File newDir = new File(rootDirectory + entry.getName());
                newDir.mkdir();
            } else {
                String name = entry.getName();
                File outputFile = new File(rootDirectory + name);
                String outputPath = outputFile.getCanonicalPath();
                name = outputPath
                .substring(outputPath.lastIndexOf("/") + 1);
                outputPath = outputPath.substring(0, outputPath
                .lastIndexOf("/"));
                File outputDir = new File(outputPath);
                outputDir.mkdirs();
                outputFile = new File(outputPath, name);
                outputFile.createNewFile();
                out = new FileOutputStream(outputFile);

                int numread = 0;
                do {
                    numread = zis.read(buf);
                    if (numread <= 0) {
                        break;
                    } else {
                        out.write(buf, 0, numread);
                    }
                } while (true);
                out.close();
            }
            entry = zis.getNextEntry();
        }
        return true;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

**参考**：
`android pico installer source`

# php - 虚荣 URL 创建

> ID：11270692
> 
> 赞同：1
> 
> 时间：2012-06-30T01:08:43.823
> 
> 标签：php

我一直在寻找答案，但我就是找不到。我不是在为我的网站上的用户寻找能够快速访问他们的页面的方法，坦率地说，同样的问题不断弹出，“如何创建 Facebook 个人资料 URL”或“如何使用“.htaccess”。我只是在寻找一个简单的 PHP 程序，它可以创建基本的虚 URL，这样我就可以快速访问我网站上的不同页面，让它看起来更整洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:06:02.387

将它放在 .htaccess 中以将所有请求发送到 index.php（这称为前端控制器）

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^.*$ ./index.php 
```

然后把它放在你的 index.php

```
<?php
  // get the request
  $request  = $_SERVER['REQUEST_URI'];

  // split the path by '/'  
  $params     = split("/", $request); 
```

您现在可以请求如下页面：`http://foo.com/one/two/three`

您的`$params`变量现在看起来像：

```
$params = array('', 'one', 'two', 'three'); 
```

您现在可以使用这些参数来调用函数或重定向到页面或任何您想要的。

这是一个**非常**简化的示例，但它应该为您提供基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:23:04.660

PHP 根本不支持虚 URL，您需要配置您的网络服务器才能使用它们。

.htdocs 是 apache 的配置文件，但是，您的情况可能是：

1.  Apache 尚未配置为处理这些。
2.  您的服务器不是 apache httpd。

# apache - POST 中的求和符号

> ID：11270694
> 
> 赞同：0
> 
> 时间：2012-06-30T01:09:02.297
> 
> 标签：apache, http, post, sum

我将这个 POST 请愿书发送到我的服务器：name=pepito&friends=pep+mar

我注意到到达的是 name=pepito&friends=pep mar

为什么总和符号消失了？比你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:34:38.457

**+**号是​​表示 URL 中空格的一种方式。另一个是**%20**。有一个问题描述了这一点：[何时将空格编码为加号 (+) 或 %20？](https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-and-when-to-20)

如果要发送加号，则必须使用**%2B**对其进行正确编码。

阅读 URL 和 URLEncode 函数中允许的字符。

# php - PHP-创建和图像并读取它会给出不同的值

> ID：11270702
> 
> 赞同：0
> 
> 时间：2012-06-30T01:10:57.007
> 
> 标签：php, image-processing

在使用 PHP 处理图像时，我注意到一个奇怪的行为，不知道为什么。

我读了一个 jpeg 图像，然后从中创建一个新图像。然后我阅读了新图像。但是，显示颜色值会产生不同的结果。（虽然，图像看起来一样。）

这是我的代码：

```
$img = imagecreatefromjpeg('test2.jpg');
imagejpeg($img, 'test100.jpg'); 
$new= imagecreatefromjpeg('test100.jpg');   
list($width,$height) = getimagesize('test100.jpg'); 

for($x=0; $x<$width; $x++){
    for($y=0; $y<$height; $y++){
        echo "At [$x][$y] --".imagecolorat($img,$x,$y)."--".imagecolorat($new,$x,$y)."<br>";
    }
} 
```

我得到以下输出：

```
At [0][0] --14732734--14667454
At [0][1] --14601148--14666941
At [0][2] --13810862--13810862
At [0][3] --14271156--14139570
At [0][4] --15717832--15652039
At [0][5] --14598838--14401972
At [0][6] --11440262--11309188 
```

等等...

尽管图像看起来相似，但我不明白为什么值会发生变化。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T22:20:28.783

JPEG 是一种[有损压缩](http://en.wikipedia.org/wiki/Lossy_compression)的图像文件格式。这意味着每次保存图像时都会丢失数据。

您看到每个像素的不同颜色值与数据丢失没有什么不同。无需打开和重新保存，只需使用文件系统功能复制 jpeg 文件

```
$img = imagecreatefromjpeg('test2.jpg');
copy('test2.jpg', 'test100.jpg');          ## <-- copy image _file_
$new= imagecreatefromjpeg('test100.jpg'); 
```

然后你会得到相同的结果：

```
At [0][0] --855561--855561
At [0][1] --855561--855561
At [0][2] --921353--921353
At [0][3] --987144--987144
At [0][4] --1052937--1052937
At [0][5] --1250570--1250570
At [0][6] --1579535--1579535 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:22:31.370

如果保存时未指定任何值，则保存到 test100.jpg 的图像质量默认为 75%...使用以下内容保存 100% 质量。

```
imagejpeg($img, 'test100.jpg', 100); 
```

# python - unicode 字符未正确显示

> ID：11270703
> 
> 赞同：0
> 
> 时间：2012-06-30T01:11:10.393
> 
> 标签：python, python-2.7

我爬取了一组网站并提取了带有 unicode 编码字符的不同字符串，例如“D\xfcsseldorf 的最佳用餐地点”。我将它们存储在 PostgreSQL 数据库中。当我从数据库中检索前面提到的字符串并执行以下操作时：

```
name = string_retrieved_from_database
print name 
```

输出为 unicode u'D\xfcsseldorf 的最佳用餐场所'。我想按应有的方式显示字符串：“杜塞尔多夫的最佳就餐场所”。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:19:33.030

您需要尽快处理编码。最好的办法是读取 HTML 页面，将得到的字节字符串解码为 Unicode，然后将字符串作为 Unicode 存储在数据库中，或者至少以统一编码（如 UTF8）的形式存储。

如果您需要有关详细信息的帮助，[Pragmatic Unicode 或 How Do I Stop The Pain](http://bit.ly/unipain)提供了所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T01:22:48.900

您确定在*打印*变量时得到输出，而不是仅以交互方式显示它吗？使用时你不应该得到`u'...'`显示`print`：

```
>>> x = b"Best places to eat in D\xfcsseldorf"
>>> x.decode('latin-1')
u'Best places to eat in D\xfcsseldorf'
>>> print x.decode('latin-1')
Best places to eat in Düsseldorf 
```

如果您在实际字符串中得到反斜杠等，那么在编码阶段可能出现问题（例如，文字反斜杠被写入文本）。在这种情况下，您可能需要查看“unicode-escape”编解码器：

```
>>> x = b"Best places to eat in D\\xfcsseldorf"
>>> print x
Best places to eat in D\xfcsseldorf
>>> print x.decode('unicode-escape')
Best places to eat in Düsseldorf 
```

# javascript - Twitter OAuth1.0A Javascript 错误

> ID：11270708
> 
> 赞同：3
> 
> 时间：2012-06-30T01:13:53.553
> 
> 标签：javascript, ajax, twitter, oauth

我目前正在按照此处描述的方法为 Twitter 整合授权功能：[https](https://dev.twitter.com/docs/auth/implementing-sign-twitter) ://dev.twitter.com/docs/auth/implementing-sign-twitter 。我正在使用 Ajax 发送我的 POST 'http' 请求，但我一直在遇到 '401: Unauthorized' 错误。我的代码如下：

```
function getTweets() {
    var time = generateTimestamp(); 
    var nonce = generateNonce();
    var signature = generateSignature(time, nonce);
    var headers = {
          "Authorization": 'OAuth oauth_callback="http%3A%2F%2Fwww.google.com%2F", oauth_consumer_key="eEeAAz9fakedtAOlIUhPgQ", oauth_nonce="bbc34b2ca6faabogus6dfc025907fa334", oauth_signature="' + signature + '", oauth_signature_method="HMAC-SHA1", oauth_timestamp="' + time + '", oauth_version="1.0"'
    };

    $.ajax({
        type: "POST",
        url: "https://api.twitter.com/oauth/request_token",
        dataType: "text",
        headers: headers,
        success: function(data) {
            alert("Success!");
            console.log(data);
        },
        error: function(jq) {
            alert("Request Failed.");
            console.log(jq.statusText);
        }
    });
}

function generateTimestamp() {
    var currentTime = new Date;
    currentTime = Math.floor(currentTime.getTime() / 1000);
    return currentTime;
}

function generateNonce() {
    var code = "";
    for (var i = 0; i < 20; i++) {
        code += Math.floor(Math.random() * 9).toString();
    }
    return code;
}  

function generateSignature(timestamp, nonce) {
    var http_method = "POST";
    var base_url = "https://api.twitter.com/oauth/request_token";
    var consumer_key = "eEeAAz9hUKtdjunkeIUhPgQ";
    var consumer_secret = "c7wHxnjubxVDcc5hYFqnotactuallymysecretWs2XazUFde0lPRBtBQ";
    var signature_method = "HMAC-SHA1";
    var token = "609493744-kNPzLKSI4Hg9NWQnopeFPb91eXFUutFm1nZ2hDk2";
    var token_secret = "15WOJS9Ji1AXsKRkyAZrxKdsalted5Gj5ZyEAb9aVrJxI";
    var version = "1.0";
    var parameter_string = "oauth_callback=" + encodeURIComponent(base_url) + "&oauth_consumer_key=" + consumer_key + "&oauth_nonce=" + nonce + "&oauth_consumer_key=" + consumer_key + "&oauth_signature_method=" + signature_method + "&oauth_timestamp=" + timestamp +"&oauth_version=" + version; 
    var base_string = http_method + "&" + encodeURIComponent(base_url) + "&" + encodeURIComponent(parameter_string);
    var signing_key = encodeURIComponent(consumer_secret) + "&";  
    var signature = encodeURIComponent(window.btoa(CryptoJS.HmacSHA1(base_string, signing_key)));
    alert(signature);
    return signature;
} 
```

如果有任何其他信息可以使此错误更清楚，请随时在下面发布。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:23:09.360

我创建了一个 node.js 库来处理 Twitter OAuth 舞蹈和 API。代码在[这里， tweeter.js](https://github.com/jimschubert/tweeter.js)

欢迎您了解创建标头和签名的逻辑（从第[348](https://github.com/jimschubert/tweeter.js/blob/master/lib/tweeter.js#L348)行开始）

我在您发布的代码中没有看到的一件事会产生巨大的影响，那就是必须生成签名字符串以包含原始标题，然后必须使用生成的字符串**重建标题。**这是一个巨大的痛苦，我花了一段时间才弄清楚。

虽然我写的代码是针对 node.js 的，但是你应该能够重用很多逻辑来满足你的需求。

**编辑**
我发现一个名为[hueniverse](http://hueniverse.com/oauth/)的网站很好地记录了 OAuth。事实上，这里有一个实用程序[可以](http://hueniverse.com/oauth/guide/authentication/)构建您自己的标头来验证您的逻辑（选择“创建您自己的”单选按钮）。

**编辑 2**

为了更好地解释`oauth_signature`在标题中包含值，假设您拥有到目前为止的所有数据：

```
var headerObj = {
    oauth_consumer_key="123456789",
    oauth_token="11111",
    oauth_nonce="asdfghjkl%3B",
    oauth_timestamp="1341852000",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0"
}; 
```

您创建 HMAC-SHA1 签名并接收：`"jBpoONisOt5kFYOrQ5fHCSZBGkI%3D"`

然后，您将该返回值添加到`headerObj`，为您提供：

```
headerObj = {
    oauth_consumer_key="123456789",
    oauth_token="11111",
    oauth_nonce="asdfghjkl%3B",
    oauth_timestamp="1341852000",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0",
    oauth_signature="jBpoONisOt5kFYOrQ5fHCSZBGkI%3D"
}; 
```

而这个 headerObj 的修改版本是您构建 HTTP 标头的基础。

```
GET / HTTP/1.1
Host: api.twitter.com:443
Authorization: OAuth realm="https://api.twitter.com/",
    oauth_consumer_key="123456789",
    oauth_token="11111",
    oauth_nonce="asdfghjkl%3B",
    oauth_timestamp="1341852000",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0",
    oauth_signature="jBpoONisOt5kFYOrQ5fHCSZBGkI%3D" 
```

*注意：我没有验证主机/领域/端口，所以这些可能是错误的。检查那些 API。*

这样做的原因是，在 Twitter 方面（这是一个 OAuth 实现细节），该`oauth_signature`值被删除并且标头的其余部分被散列并且它的返回值与发送的值进行比较`oauth_signature`。这有点像信封上的蜡封……如果标题其余部分的哈希值与您发送的哈希值不匹配`oauth_signature`，Twitter 就知道不信任发件人或内容。

*编辑 2.5*

我正在将其从评论移至答案。

如果您查看tweeter.js 中的[这一行](https://github.com/jimschubert/tweeter.js/blob/master/lib/tweeter.js#L378)，您将看到其中的逻辑。

```
 var signature = self.oauthSignature(method, path, headerObj, query);
    headerObj.oauth_signature = qs.escape(signature);

    // concat the header object into a csv string
    var header = 'OAuth realm="Twitter API",';
    var oauthParts = [];
    for (var h in headerObj) {
        oauthParts.push(h + '="'+headerObj[h]+'"');
    }
    header+= oauthParts.join(',');

    //...

    return header; 
```

这段代码就像我在 EDIT 2 中解释的那样，通过将 JSON 对象转换为`key="value"`存储在 中的字符串`oauthParts[]`，然后将该数组中的每个元素连接成一个以逗号分隔的字符串，该字符串以`OAuth realm="Twitter API",`

# php - 子域上 Slim PHP REST API 的 .htaccess 配置？

> ID：11270709
> 
> 赞同：4
> 
> 时间：2012-06-30T01:13:59.487
> 
> 标签：php, api, .htaccess, slim

[我目前有一个使用Slim Framework](http://www.slimframework.com/)构建的 api.php 文件。我想使用 api.mydomain.com（或 mydomain.com/api）之类的东西来引用 API 文件并使用[http://api.mydomain.com](http://api.mydomain.com)作为基本 url 进行调用。Slim 文档要求将以下内容添加到您的 .htacess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

但如果我是正确的，如果请求的文件不存在，则返回 index.php 文件。如何最好地设置从 api.mydomain.com 或 mydomain.com/api 到 index.php 的重写？我们发现的所有内容都指向使用 .htaccess 进行配置。

我们使用了以下重写规则，但这导致我们的所有 URL 都附加了斜杠（'/'），这也需要我们在 Slim 中重新配置我们的路由。（例如：“/messages”变成“/messages/”，“/threads?id=123”变成“/threads/?id=123”）

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^api\.mydomain\.com [NC]
RewriteRule ^ api.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-08T03:44:25.930

虽然可以使用一些复杂的 apache 规则来解决这个问题（请参阅包含的链接），但这实际上是 Slim 版本 2.2+ 中的地址，因此您最好只更新您的 slim 版本（phar 版本设置为“2\. *”或“2.2.* ”）。

[http://www.slimframework.com/install](http://www.slimframework.com/install)

如果您决定走 apache 路线（不推荐），请查看以下链接：

[https://webmasters.stackexchange.com/questions/23382/how-to-remove-trailing-slashes-from-url-with-htaccess](https://webmasters.stackexchange.com/questions/23382/how-to-remove-trailing-slashes-from-url-with-htaccess)

[htaccess 删除 .php、.html 和斜杠](https://stackoverflow.com/questions/21481137/htaccess-remove-php-html-and-trailing-slash)

# vb.net - 如何使用鼠标滚轮在一个图片框中循环图像？

> ID：11270710
> 
> 赞同：0
> 
> 时间：2012-06-30T01:14:13.370
> 
> 标签：vb.net, mouseevent, mousewheel

我正在制作一个简单的游戏，用户选择两种武器（主要和次要）。在游戏窗口中，武器显示在屏幕角落的图片框（picWeapon）中。我希望用户能够向上滚动（或向下滚动，因为只有一种其他武器）来选择辅助武器。我放置什么代码来使用鼠标滚轮循环浏览图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:12:59.797

```
Private isPrimary As Boolean = True 'assumes the Primary image is already loaded
Private Sub Form1_MouseWheel(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseWheel
    If e.Delta > 0 And isPrimary = False Then
        Debug.WriteLine("Scrolled up!")
        PicWeapon.Load(filepathOfPrimary)
        isPrimary = True
    ElseIF isPrimary = True Then
        Debug.WriteLine("Scrolled down!")
        PicWeapon.Load(filepathOfSecondary)
        isPrimary = False
    End If
End Sub 
```

# soundcloud - SoundCloud API：使用“created_at”过滤器按热度排序不起作用

> ID：11270712
> 
> 赞同：6
> 
> 时间：2012-06-30T01:14:54.650
> 
> 标签：soundcloud

我正在尝试确定 2012 年 5 月 1 日至 2012 年 5 月 10 日期间最热门的曲目。

不幸的是，以下查询返回一组空轨道：

```
http://api.soundcloud.com/tracks?limit=20&order=hotness&created_at[from]=2012-05-01&created_at[to]=2012-05-10&consumer_key= 
```

但是很明显，在该时间范围内创建了轨道，因为当省略 order 参数时，相同的查询有效：

```
http://api.soundcloud.com/tracks?limit=20&created_at[from]=2012-05-01&created_at[to]=2012-05-10&consumer_key= 
```

我希望热度算法能够在任何时间范围内工作。

我发现的另一个奇怪的事情是，当在 hotness 和 created_at 参数旁边指定查询参数时，会返回结果：

```
http://api.soundcloud.com/tracks?limit=20&order=hotness&created_at[from]=2012-05-01&created_at[to]=2012-05-10&q=a&consumer_key= 
```

不幸的是，结果似乎没有按热度排序（尽管我认为它们可能在过去的某个时间点出现过）。

有关如何获取特定时间范围内按热度排序的曲目列表的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T16:38:34.840

自 2013 年 4 月 16 日起，热度参数已被[弃用](https://developers.soundcloud.com/blog/removing-hotness-param)。作为替代方案，您可以根据播放次数 ( `playback_count`)、下载次数 ( `download_count`)、收藏 ( `favoritings_count`)、评论 ( `comment_count`)、喜欢 ( `likes_count`) 或转发 ( `reposts_count`)对曲目进行排名在一个`track`物体上。

# php - 按索引合并多个数组

> ID：11270715
> 
> 赞同：0
> 
> 时间：2012-06-30T01:16:06.240
> 
> 标签：php, arrays, merge

我是某个查询返回的一些数组。结果是这样的：

```
array(array('balance_1'=> '-5', 'balance_2'=>'-21'), array('balance_1'=> '-21', 'balance_2'=>'21'), array('balance_1'=> '-50', 'balance_2'=>'40')) 
```

我想把它转换成一个看起来像这样的数组：

```
array(array(-5,11,-50), array(-21, 21, 40)); 
```

基本上我想将所有 balance_1、所有 balance_2、所有 balance_3 加入到单独的数组中。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:20:35.213

您只需遍历列表，然后收集值。如果您重用现有密钥进行分组，则最简单：

```
foreach ($list as $row) {
    foreach ($row as $key=>$value) {
        $out[$key][] = $value;
    }
} 
```

这样，您将获得一个`$out`数组，其中包含`[balance_1]`或`[balance_2]`保存值列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:21:03.290

循环遍历数组并使用“array_key_exists”如果键存在添加到数组中，如果它没有使用您的索引构建新数组。

更多信息可以在这里找到： [http ://www.php.net/manual/en/function.array-key-exists.php](http://www.php.net/manual/en/function.array-key-exists.php)

# php - 我应该如何设置客户可以嵌入其网站的搜索小部件？

> ID：11270716
> 
> 赞同：0
> 
> 时间：2012-06-30T01:17:27.843
> 
> 标签：php, forms, codeigniter, search, cross-domain

我公司抓取我们系统中公司的网站，并允许用户专门搜索这些公司。目前，我们所有的搜索工具都使用 Sphinx。

我们的客户（我们索引的公司）要求提供一个搜索小部件，他们可以将其嵌入到他们的网站上，以便为他们自己的网站添加搜索功能。搜索小部件将允许用户从我们客户的网站提交搜索查询。然后结果将加载到我们的网站上（这个搜索功能已经在我们的网站上运行......只是不是可嵌入的小部件）。起初这看起来很简单，但后来我开始考虑安全性和跨域表单提交。

搜索功能已经存在于我们网站的 uri 中，如下所示： `/companies/profile_search/1581/die-cutting`

`companies`是我的控制器。`profile_search`是我的方法。`1581`是要搜索的公司的id。`die-cutting`是搜索查询。

我希望我们的客户能够简单地将代码剪切并粘贴到他们的站点中以嵌入小部件。

1.  我应该简单地将搜索查询指向上述网址吗？
2.  如果不是，我应该如何设置它以确保它的安全？
3.  我在这里忽略了其他问题吗？

我们的网站主要使用 PHP 构建，使用 CodeIgniter 和 Sphinx 进行搜索，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:41:17.630

CodeIgniter 具有内置的 CSRF 保护，如果您要求客户将 a 粘贴`form`到他们的网站中，这可能会妨碍您。

做到这一点的简单方法是为您的客户提供一个`iframe`标签以粘贴，并`form`从您的站点提供该标签，`target="_top"`用于使表单提交重新加载整个窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:48:49.270

您也可以仅对此方法禁用 CSRF；使用预系统挂钩，或者更骇人听闻地作为条件，`config.php`例如：

```
 $config['csrf_protection'] = (stripos($_SERVER["REQUEST_URI"],'/controller/method') === FALSE) ? TRUE : FALSE; 
```

可以在[这里](http://codeigniter.com/forums/viewthread/182631/)找到关于暂时禁用 CSRF 的详细讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T22:52:10.230

对于跨域请求，您可以使用 JSONP：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# algorithm - 仅使用 3 个指针在链表的中间三分之一处查找元素？

> ID：11270719
> 
> 赞同：1
> 
> 时间：2012-06-30T01:19:49.347
> 
> 标签：algorithm, pointers, linked-list

**考试中的问题：**

1.  给定一个大小未知的链表`n`，在哪里`3`划分`n`，我们如何打印链表的中间元素组（例如在 1/3 和 2/3 之间），只使用`3`指针，**而不**使用计数器？
2.  我们如何只用两个指针来做到这一点？

**备注**：我们不能向左走，只能向右走！

无法提出不涉及计数器的答案，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T01:30:01.083

试着把指针想象成磁带上的拾音头。您从一开始就全部启动它们，然后以不同的速度移动它们（提示，这些速度是彼此 1/3 分数的倍数）。现在想想速度较慢的指针在哪里，当最快移动的指针到达终点时。

现在如何使指针像那样移动，即使您只能递增而不能进行乘法或除法。想想机械计数器是如何传递其数字的。

以及如何只用两个指针来做： 想想你到达起始位置后可以做什么： 将快指针放在慢指针的位置并重复。

# r - 当 var() 应用于 R 中的数据框行时会发生什么？

> ID：11270720
> 
> 赞同：2
> 
> 时间：2012-06-30T01:19:54.770
> 
> 标签：r, dataframe, variance

新手R问题。很抱歉问：我确定它已被回答，但显然它很难搜索。我已经阅读了 var (variance) 的手册页，但我不明白。检查书籍，网页（好的，只有两本书）。我会等待有人指出我现有的答案....

```
> df
first second
1     1      3
2     2      5
3     3      7

> df[,2]
[1] 3 5 7

> var(df[,2])
[1] 4 
```

好的，到目前为止，一切都很好。

```
> df[1,]
  first second
1     1      3
> var(df[1,])
       first second
first     NA     NA
second    NA     NA 
```

啊？？

提前致谢。！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T02:12:25.760

第一个问题是，当您从 data.frame 中选择一行时，您获得的对象类别与选择列时不同：

```
df = data.frame(first=c(1, 2, 3), second=c(3, 5, 7))

class(df[, 2])
[1] "integer"

class(df[1, ])
[1] "data.frame"

# But you can explicitly convert with as.integer.
var(as.integer(df[1, ]))
# [1] 2 
```

第二个问题是`var()`对待 data.frame 的方式完全不同。它将每一列视为变量，并通过将每一列与其他每一列进行比较来计算方差和协方差矩阵：

```
# Create a data frame with some random data.
dat = data.frame(first=rnorm(20), second=rnorm(20), third=rnorm(20))

var(dat)
#              first     second       third
# first   0.98363062 -0.2453755  0.04255154
# second -0.24537550  1.1177863 -0.16445768
# third   0.04255154 -0.1644577  0.58928970

var(dat$third)
# [1] 0.5892897

cov(dat$first, dat$second)
# [1] -0.2453755 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:40:07.857

如果您知道 data.frame 都是数字并希望它可用于行和列操作，则将其转换为矩阵：

```
dat = data.frame(first=rnorm(20), second=rnorm(20), third=rnorm(20))
dm <- data.matrix(df)
var(dm[1,])
#[1] 20.25 
```

（当您使用 apply() 时，会出现相同的效果 .... 列表结构丢失并且所有行都转换为最小公分母。）

```
> apply(dat, 1, var)
 [1] 0.45998066 1.51241166 0.13634927 0.49981030 0.04440448 1.21224067 0.28113135 0.57968597
 [9] 0.26102036 0.41999510 1.01237100 0.17304770 0.50572223 1.17825272 1.39342510 2.94125062
[17] 1.18640684 2.15245595 3.06482195 0.96396008 
```

# c++ - 原子比较、多处理器、C/C++ (Linux)

> ID：11270732
> 
> 赞同：3
> 
> 时间：2012-06-30T01:22:14.073
> 
> 标签：c++, c, linux, shared-memory, atomic

*我在多处理器*系统上的共享内存 x 中有一个变量。

```
void MyFunction(volatile int* x) {
  if (*x != 0) {
     // do something
  }
} 
```

其他进程（可能在不同的处理器上）将使用 gcc 内置的原子操作（例如 __sync_bool_compare_and_swap 等）写入 x。

我想我遇到了一些缓存并发问题，有时在 x 最终用新值更新之前需要一些时间。

我想要的是一种 atomic_compare （没有交换），如果存在这样的事情？或“原子读取”。最快的方法是什么？（避免互斥体、锁等）

谢谢

编辑：

我刚刚意识到一个有点骇人听闻的解决方法是使用 __sync_val_compare_and_swap 的值，我知道它永远不可能。那能解决问题吗？（有没有更清洁的方法？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:15:18.593

新的 C 标准 C11 具有`_Atomic`处理此问题的数据类型和操作。该标准尚未实现，但 gcc 和 clang 已接近它，它们已经实现了该功能。事实上，功能 `__sync_bool_compare_and_swap`是其中的一部分。我已经将它包装到[P99 中的一组标题中](http://p99.gforge.inria.fr/p99-html/group__atomic.html)，让您已经使用 C11 接口进行编程。

C11 功能可以做您想做的事情，`atomic_load`或者如果您对连贯性有特殊要求`atomic_load_explicit`。毫不奇怪，正如您所怀疑的那样，P99 将其映射到`__sync_val_compare_and_swap(&x, 0, 0)`. 然后，如果您查看它在大多数体系结构上生成的汇编程序，这将只转换为一个简单的加载操作，如果`x`是`int`. 但这不是语言所保证的，由编译器知道这些事情并合成保证是原子的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T01:51:08.983

> 最快的方法是什么？（避免互斥体、锁等）

我很确定您不想避免互斥锁。linux 的 futexes 允许您利用比较和交换的优点（大部分时间），同时保持经典的互斥体语义（发生的“交换”是互斥体之一，而不是受其保护的代码/数据）。我强烈建议您尝试并分析解决方案（`perf`、、`oprofile`VTune 等），看看您的瓶颈是否真的与锁定机制本身有关，而不是缓存利用率、内存吞吐量、CPU 周期、IO 访问、远程节点等内存访问等

> 我想我遇到了一些缓存并发问题，有时在 x 最终用新值更新之前需要一些时间。

好吧，假设您确实需要在处理器之间进行交互，并且您已经测量了从 futex 获得的延迟影响，并且您确定它不能满足您的应用程序的需求。因此，如果是这种情况，一个相对健全的方法可能是这样的：创建一个 32 位整数数组，填充的距离大于或等于目标缓存行的大小。使用当前执行的 CPU 和缓存行大小作为此列表中实际值的索引（因此，如果您的缓存行是 64 字节，您可以将 CPU# 缩放 16 以跳过填充）。您应该只从适当的 CPU 写入这些值，并且可以从任何其他 CPU 轮询它（可能应该在忙等待的主体中调用您的 CPU 的“暂停”指令之一）。

我应该补充一点，这几乎肯定会起作用（有效地用 CPU 效率换取可能更低的延迟），但对于除了一组非常特殊的硬件之外的所有硬件来说，它仍然是一个非常脆弱的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:02:47.870

> 我想要的是一种 atomic_compare （没有交换），如果存在这样的事情？或“原子读取”。

比较已经是原子的。是单读。

如果处理器之间的延迟已经很糟糕，那么您的代码似乎会从解耦中受益。即稍微分离出依赖关系，这样您就不会依赖内部循环中的这种通信。

# c++ - C++ 是否有类似于 Objective-C 的 NSDictionary 的字典？

> ID：11270738
> 
> 赞同：4
> 
> 时间：2012-06-30T01:23:59.543
> 
> 标签：c++, objective-c, cocoa, dictionary, nsdictionary

正如标题所说，有没有类似于 Objective-C 的`NSDictionary`C++ 字典？我只需要一个包含（键，值）对并且可以添加和检索的数据结构。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T01:34:12.730

使用 std::map。

例如，从整数映射到 std::string：

```
#include <map>
#include <string>
#include <iostream>

int main() {
  std::map<int, std::string> my_map;
  my_map[3] = "hello";
  my_map[4] = "world";

  std::cout << my_map[3] << " " << my_map[4] << std::endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-10T17:41:50.930

You can use std::map or std::unordered_map (NSDictionary is unordered) in C++, however there is one major difference. Because the standard template libraries use templates for the value types, your map will be locked into one type each for both the key and the value. With NSDictionary, since everything is based off of NSObject, you can mix and match types.

If your data is homogenous, then you are all set. If you need that mixed-type behavior, you will need to create a custom class that can contain or derive into all of the types you wish to use.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T01:27:14.900

查看标准模板库中的 std::map 。它会做你需要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-30T02:17:31.480

其他人已经回答了你的问题，我已经 +1 了。仍然觉得那里有更多可能有用的信息，我也去。

是的，C++ 有[`std::map`](http://en.cppreference.com/w/cpp/container/map). 然而，它是一个具有 O(log n) 搜索/插入复杂度的有序关联容器。通常，哈希表是首选。为此目的，有[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)与 O(1) 最佳情况查找。

通常，哈希表比排序树更受欢迎（尽管并非总是如此）。如果性能对您很重要，那么标准的 C++ 哈希表实现可能不适合您。毕竟，它非常通用。因此，您可能想看看[Google Sparse Hash](http://code.google.com/p/sparsehash/)项目 - 它提供了密集哈希和稀疏哈希实现，可以提高您的性能并进行权衡（即速度与内存等），请参阅[文档](http://sparsehash.googlecode.com/svn/trunk/doc/index.html)了解更多信息。

I am not sure how serious you are about learning C++, but in case you do want to learn it a bit more, you will be surprised with its rich set of other different containers and algorithms. I've once found SGI's STL documentation and have been using it for more than decade now, so I recommend it to you as well - [http://www.sgi.com/tech/stl/table_of_contents.html](http://www.sgi.com/tech/stl/table_of_contents.html). It could be just a little bit outdated, though, but is very useful. That is what C++ comes with out of the box. On top it, check out Boost, a set of different libraries that are not part of the standard library - [http://www.boost.org/doc/libs/release/](http://www.boost.org/doc/libs/release/)

Hope it helps!

# android - Android：在视图上应用模糊效果（BlurMaskFilter）

> ID：11270740
> 
> 赞同：3
> 
> 时间：2012-06-30T01:24:07.660
> 
> 标签：android, view, blur

是否可以在不使用 View 的位图屏幕截图的情况下在 View 上应用模糊效果（BlurMaskFilter）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T11:18:57.633

看看这个库 - [BlurringView](https://github.com/500px/500px-android-blur/) by 500px。[他们在此处](http://developers.500px.com/2015/03/17/a-blurring-view-for-android.html)的博客文章中描述了设计过程。BlurringView 会模糊其下方的任何视图。他们使用`ScriptIntrinsicBlur`from `android.support.renderscript`library 来实现这个效果。

我想 OP 将不再需要它，但这个答案可能对其他人有用。

# c# - MonoTouch Hello World 教程中的部分类声明错误

> ID：11270741
> 
> 赞同：0
> 
> 时间：2012-06-30T01:24:16.367
> 
> 标签：c#, xamarin.ios

我正在尝试 MonoTouch 试用版中的 Hello World 教程，并且我已经输入了所有代码并尝试构建。

在`designer.cs`文件中，行

```
partial void actBtn (MonoTouch.Foundation.NSObject sender) 
```

给出一个错误

> 部分方法“HelloWorld_iPhone.HelloWorld_iPhoneViewController.actBtn (MonoTouch.Foundation.NSObject sender)”实现缺少部分方法声明。

我错过了什么？

我应该补充一点，这一行是由 MonoTouch 自动插入的——我只写了下面的单行方法代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:43:52.917

本教程的阅读方式暗示您将代码放在 Designer.cs 文件中。那是错误的。他们向您展示的代码实际上位于 Controller.cs 文件中。

这是您添加到 Controller.cs 文件中的内容：

`partial void actnButtonClick (MonoTouch.Foundation.NSObject sender) { this.lblOutput.Text = "Action button " + ((UIButton)sender).CurrentTitle + " clicked."; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:06:23.117

我从未尝试过单触，但有人认为这里滴答作响->

查看有问题的代码，我们可以在 c# 和 monotouch 中使用部分方法吗？

我使用了部分类，但我们不能声明部分方法。

partial 不能用作为方法修改的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:08:01.307

我可以通过将语句放在文件 controller.cs 中来实现它。

在我的例子中是这样的：

```
partial void action1 (MonoTouch.Foundation.NSObject sender); 
```

在我的designer.css中：

```
[Action ("action1:")]
partial void action1 (MonoTouch.Foundation.NSObject sender){
    this.lblOutput.Text=" Action 1 activated";
} 
```

这意味着该语句在一个单独的类中，并在设计器中实现。

# javascript - 为什么我不能在我的 javascript 代码中继承 Animal 类的原型？

> ID：11270746
> 
> 赞同：5
> 
> 时间：2012-06-30T01:25:45.387
> 
> 标签：javascript

我正在尝试创建一个`Dog`通过类的原型继承继承的新`Animal`类：

```
function Animal() {
  this.name = "animal";
  this.writeName = function() {
    document.write(this.name);
  }    
}

function Dog() {
  this.name = "dog";
  this.prototype = new Animal();
}

new Dog().writeName() 
```

JS [小提琴](http://jsfiddle.net/BbrTF/1/)

但是，我收到一个 Javascript 错误：`Uncaught TypeError: Object #<Dog> has no method 'say'`.

为什么？对象不应该`Dog`保留一个`Animal`对象作为原型吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T01:29:49.760

```
function Animal() {
  this.name = "animal";
  this.writeName = function() {
    document.write(this.name);
  }    
}

function Dog() {
  this.name = "dog";

}
Dog.prototype = new Animal();
dog = new Dog();
dog.writeName(); 
```

现在狗具有动物的所有特性。

[jsfiddle](http://jsfiddle.net/BbrTF/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T02:43:03.323

@ryan 的回答当然是正确的，但他并没有真正*说出*它有什么不同，初学者可能不清楚，所以......

您所犯的错误是将实例`this.prototype = new Animal();`分配给在当前*实例*`Animal`上命名的属性（由 引用），但在此上下文中命名的属性没有什么特别之处。`prototype``Dog` *`this``prototype`*

 *该`prototype`属性仅对*函数*对象具有魔力。当您`SomeFunc`使用`new SomeFunc()`该新对象的内部/隐藏的*[[prototype]]*创建一个新实例时，指针将引用`SomeFunc.prototype`. 该`prototype`名称在任何其他情况下都没有特殊意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T01:29:05.850

“原型”属性只是一个常规属性。处理委托的真正 [[Proto]] 属性是隐藏的，并且在创建对象后无法直接操作（除了一些扩展：在 Firefox 中，它的`__proto__`属性）。

一个正确的 Javascript 继承示例，在精神上与您正在做的事情相似，将使用 Object.create 创建具有正确 [[Prototype]] 属性的狗：

```
function Animal() {
  this.name = "animal";
  this.writeName = function() {
    document.write(this.name);
  }    
}

function Dog() {
  var dog = Object.create(new Animal())
  dog.name = "dog";
  return dog;
}

(new Dog()).writeName() 
```

一个更惯用的例子就像 ryan 的答案，虽然我建议使用`Object.create`而不是`new Animal`实例化狗原型，并且我会将动物方法放在单独的动物原型中，而不是像你正在做的那样手动将它们附加到构造函数中。*

# layout - 径向堆栈问题

> ID：11270748
> 
> 赞同：0
> 
> 时间：2012-06-30T01:26:20.363
> 
> 标签：layout, d3.js, radial

我正在尝试使用 Stack 布局和 Nest（按照 mbostock 的建议）绘制径向图（雷达图）。代码在这里：[http](http://bl.ocks.org/3017677) ://bl.ocks.org/3017677目的是沿着三个度量轴（轴 1、2 和 3）绘制堆叠区域。区域映射到这些指标的最小值、平均值和最大值。最大面积包括包含最小面积的平均面​​积。

在构建路径数据字符串之前，计算似乎真的很好。也就是说，当输入图层时，d.values 看起来没问题，而 area(d.values) 返回的运动序列有点正确，但值很小 (e-14)。

还不明白我做错了什么:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:27:29.297

问题在于角度刻度的域。[在http://bl.ocks.org/3017677](http://bl.ocks.org/3017677)为好奇的人准备WIP 。

# php - 正则表达式包含一个字段

> ID：11270749
> 
> 赞同：0
> 
> 时间：2012-06-30T01:26:48.247
> 
> 标签：php, mysql, regex

```
 $resultInput = mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field NOT IN ('id', 'created', 'date_modified', 'type', 'bodytext') AND Field NOT REGEXP '_image|content'"); 
```

有效...但是如何在这种情况下使用 REGEXP 来包含特定字段？

例如：

```
 $resultTextarea = mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field IN ('bodytext') AND Field LIKE '%content%'"); 
```

（还有 AND 字段 REGEXP 'content' - 似乎也不起作用）

现在两者都不会返回错误，但是它不会以我从表格列构建的形式返回我想要的内容字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:29:08.753

您已经明确指定`Field`必须完全包含字符串“bodytext”（`WHERE Field IN ('bodytext')`），因此它不能同时包含“内容”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:47:19.730

您可以这样做，只需在正则表达式中不断添加关键字

```
SHOW COLUMNS FROM Field 
WHERE Field
REGEXP 'bodytext|content' 
```

# git - Master 和 topic 分支都有变化

> ID：11270752
> 
> 赞同：2
> 
> 时间：2012-06-30T01:27:24.697
> 
> 标签：git, branching-and-merging

我的主 git 分支中有一个名为“Readme”的文件。该文件具有以下文本：

> 这是主分支

我创建了一个名为“justatest”的主题分支，并在其中编辑了“Readme”文件。我编辑了这个文件（同时签出了 justatest 分支）说以下内容：

> 这是主分支 此文本只能在“justatest”分支中看到

当我在“justatest”主题分支中时，它显示正确，但是当我切换到主分支时，文件内容如下：

> 这是主分支 此文本只能在“justatest”分支中看到

如您所见，即使我签出了一个主题分支，它也会在主分支中进行更改！为什么？？？

最糟糕的是，如果我不喜欢我在主题分支中所做的更改并将其删除，那么更改将保留在主分支中！这哪里安全？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:35:32.137

如果您在主题分支中提交更改，那么您可以签出主分支并发现您的更改仅在主题分支中可见，直到您将它们合并回主分支。

例子：

```
[matthewh@folio temp]$ git branch
* master
[matthewh@folio temp]$ cat Readme 
This is the master branch
[matthewh@folio temp]$ git checkout -b justatest
Switched to a new branch 'justatest'
[matthewh@folio temp]$ echo "This text should only be seen in the justatest branch" >> Readme 
[matthewh@folio temp]$ git commit -am "Modified readme"
[justatest 1afc6c7] Modified readme
 1 files changed, 1 insertions(+), 0 deletions(-)
[matthewh@folio temp]$ git branch
* justatest
  master
[matthewh@folio temp]$ cat Readme 
This is the master branch
This text should only be seen in the justatest branch
[matthewh@folio temp]$ git checkout master
Switched to branch 'master'
[matthewh@folio temp]$ cat Readme 
This is the master branch
[matthewh@folio temp]$ git merge justatest
Updating 88aa000..1afc6c7
Fast-forward
 Readme |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
[matthewh@folio temp]$ cat Readme 
This is the master branch
This text should only be seen in the justatest branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T01:42:47.300

当您进行编辑时，它们不属于任何分支。这些更改仅在您的工作文件夹中。允许在您有一些尚未提交的未完成工作时更改分支 - 只要它们不与文件的提交版本冲突。

在您的情况下，它甚至更简单。由于您刚刚创建了分支，因此 master 和这个新分支都指向同一个提交。添加并提交更改后，切换分支将具有您期望的行为。

```
git add -A
git commit -m "my changes"
git checkout master 
```

你的文件将是你分支之前的样子。

您可以通过反复执行在您签出的最后两个分支之间翻转

```
git checkout - 
```

这也是如此`cd`。

查看[http://progit.org/book](http://progit.org/book)以获取有关工作目录和索引的信息。

# oop - PostgreSQL标识符中的下划线或camelCase，当编程语言使用camelCase时？

> ID：11270753
> 
> 赞同：66
> 
> 时间：2012-06-30T01:27:29.913
> 
> 标签：oop, postgresql, database-design, naming-conventions, camelcasing

这一直困扰着我一段时间，我无法找到一个感觉*正确*的解决方案......

给定一种 OO 语言，其中对象属性的通常命名约定是驼峰式命名，以及这样的示例对象：

```
{
    id: 667,
    firstName: "Vladimir",
    lastName: "Horowitz",
    canPlayPiano: true
} 
```

我应该如何在 PostgreSQL 表中建模这个结构？

有三个主要选项：

1.  不带引号的 camelCase 列名
2.  引用的 camelCase 列名
3.  带下划线的不带引号（小写）的名称

它们各有缺点：

1.  不带引号的标识符会自动折叠为小写。这意味着您可以创建带有`canPlayPiano`列的表，但混合大小写永远不会到达数据库。当您检查表时，该列将始终显示为`canplaypiano`- 在 psql、pgadmin、解释结果、错误消息等所有内容中。

2.  带引号的标识符保留它们的大小写，但是一旦您像这样创建它们，您将*始终*必须引用它们。IOW，如果您创建带有`"canPlayPiano"`列的表，则 a`SELECT canPlayPiano ...`将失败。这给所有 SQL 语句增加了很多不必要的噪音。

3.  带有下划线的小写名称是明确的，但它们不能很好地映射到应用程序语言正在使用的名称。您必须记住为存储 ( `can_play_piano`) 和代码 ( `canPlayPiano`) 使用不同的名称。它还可以防止某些类型的代码自动化，其中属性和数据库列需要命名相同。

所以我被夹在一块石头和一块坚硬的地方（还有一块大石头；有三种选择）之间。不管我做什么，总有一部分会让人觉得尴尬。在过去 10 年左右的时间里，我一直在使用选项 3，但我一直希望会有更好的解决方案。

我很感激你可能有任何建议。

PS：我确实意识到大小写折叠和引号需求的来源 - SQL 标准，或者更确切地说是 PostgreSQL 对标准的改编。我知道它是如何工作的；我对最佳实践的建议比对 PG 如何处理标识符的解释更感兴趣。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-12-10T10:03:44.230

如果您的列`PostgreSQL`带有`underscores`，您可以使用别名但带有**双引号**。

例子 ：

```
SELECT my_column as "myColumn" from table; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-30T05:38:18.647

鉴于 PostgreSQL 使用带有下划线的不区分大小写的标识符，您是否应该更改应用程序中的所有标识符以执行相同的操作？显然不是。那么为什么你认为反过来是一个合理的选择呢？

PostgreSQL 中的约定是通过标准合规性和用户的长期经验来实现的。坚持下去。

如果在列名和标识符之间进行翻译变得乏味，让计算机来做——他们擅长这样的事情。我猜几乎所有 900 万个数据库抽象库都可以做到这一点。如果你有一个动态语言，你需要两行代码来将列名交换为 CamelCase 中的标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-17T18:04:57.867

我知道这已经很晚了，但是对于一些很容易即时翻译的东西，你可以编写一个小的帮助函数，它会存在于你的代码中：

函数 FormatObjForDb(srcObj){

```
const newObj = {};

Object.keys(srcObj).forEach(key => newObj[key.toLowerCase()] = srcObj[key]);

return newObj; 
```

}

导出常量 formatObjForDb = FormatObjForDb;

# facebook - 通过新的 iOS6 社交框架查询 Facebook 用户数据

> ID：11270755
> 
> 赞同：8
> 
> 时间：2012-06-30T01:27:40.453
> 
> 标签：facebook, ios6

我正在尝试使用 iOS 6 的新 Facebook 集成 API 查询有关用户的信息。这是我正在使用的代码，与他们在 WWDC 上演示的代码基本相同：

```
{
NSDictionary *parameters = @{};
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me"];
SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodGET
                                                  URL:url
                                           parameters:parameters];
request.account = self.account;
[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    NSLog(@"Facebook request received, status code %d", urlResponse.statusCode);
    NSString *response = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Response data: %@", response);
    dispatch_async(dispatch_get_main_queue(), ^{

    });
}];
} 
```

问题是我从 Facebook 收到错误代码 2500：“必须使用活动访问令牌来查询有关当前用户的信息。” 如果我将查询更改为 https://graph.facebook.com/[facebook id] 那么它工作正常。我假设问题是iOS在通过requestForServiceType发送请求时传递了应用程序的访问令牌而不是用户的访问令牌。我只是不知道如何解决它。显然，对我的用户的 Facebook ID 进行预测和硬编码不是一种选择。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:24:13.950

在参数中添加您的活动访问令牌，例如

```
NSDictionary *parameters = [NSDictionary dictionaryWithObject:@"PUT_ACCESS_TOKEN_HERE" forKey:@"access_token"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:10:00.477

我遇到了同样的问题并找到了解决方法：

```
NSString *uid = [NSString stringWithFormat:@"%@", [[self.account valueForKey:@"properties"] valueForKey:@"uid"]] ;                
NSURL *url = [NSURL URLWithString:[@"https://graph.facebook.com" stringByAppendingPathComponent:uid]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T05:56:41.597

好的，这就是我如何与 iOS 6 集成并从 Facebook 获得我想要的东西：

在 AppDelegate 我这样做：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
}
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [FBSession.activeSession handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    [FBSession.activeSession close];
} 
```

在我想要检索关于我自己或我的朋友的信息的 ViewController 中，我这样做（注意：这是一个测试，所以它有很多权限！）：

```
NSArray *permissions =
    [NSArray arrayWithObjects:@"email", @"user_location",
     @"user_birthday",
     @"user_likes", @"user_interests",@"friends_interests",@"friends_birthday",@"friends_location",@"friends_hometown",@"friends_photos",@"friends_status",
     @"friends_about_me", @"friends_birthday", @"friends_hometown", @"friends_interests", @"friends_likes", @"friends_location", nil];

    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                      /* handle success + failure in block */
                                      if (status) {
                                          NSLog(@"Facebook Read Permission is successful!");
                                          [self presentPostOptions];

                                          //   [self presentPostOptions];

                                      }
                                  }]; 
```

然后在“presentPostOptions”中我这样做（在这个例子中，我尝试从我的朋友那里检索一些东西）：

```
- (void)presentPostOptions
{

    [[FBRequest requestForMyFriends] startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error)

     {

         if (!error) {

NSArray *data = [user objectForKey:@"data"];
             NSLog(@"%d", [data count]);
             for (FBGraphObject<FBGraphUser> *friend in data) {
                 NSLog(@"%@", [friend first_name]);
                 NSLog(@"%@", [friend last_name]);
                 NSLog(@"%@", [friend id]);
                 //make sure you have FBProfilePictureView outlet in your view
                 //otherwise skip the profile picture!
                 self.fbProfilePic.profileID = @"you'r friend's profile.id";

             }
         }
         else
         {
             NSLog(@"error");
             //  [self didFailWithError:error];
         }
     }]; 
```

我不知道您还想做什么，因为在您的问题中您只是尝试建立连接，但是这样您就可以在集成到 iOS 6 时做任何您想做的事情。

还有一件事，确保你在 Facebook 上的应用设置和那里的配置，比如为 iOS 启用你的应用和为 iPhone/iPad 启用 ID。还有您 plist 中的 FacebookAppID。

让我知道它是否适合你，

编辑：顺便说一句，我的 Facebook SDK 是 3.1.1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:47:48.510

我有同样的错误消息，我在更新凭证后通过保存我的帐户来修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:54:05.267

确保您的**(ACAccount *)facebookAccount（或在您的情况下为 self.account）** 对象是强大的，并且在获得权限时正确设置它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-11T03:45:50.037

答案很简单

在 viewDidLoad() 中使用：

```
accountStore= [[ACAccountStore alloc]init];
facebookAccountType= [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSDictionary *options= @{
ACFacebookAudienceKey: ACFacebookAudienceEveryone,
ACFacebookAppIdKey: @"<YOUR FACEBOOK APP ID>",
ACFacebookPermissionsKey: @[@"public_profile"]

                          };    

[accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {

    if (granted) {
        NSLog(@"Permission has been granted to the app");
        NSArray *accounts= [accountStore accountsWithAccountType:facebookAccountType];
        facebookAccount= [accounts firstObject];
        [self performSelectorOnMainThread:@selector(facebookProfile) withObject:nil waitUntilDone:NO];

    } else {
        NSLog(@"Permission denied to the app");
    }
}]; 
```

以及函数-(void)facebookProfile

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me"]; 
```

请注意，您需要的参数已添加为字典请参阅下面的完整列表 [https://developers.facebook.com/docs/graph-api/reference/user](https://developers.facebook.com/docs/graph-api/reference/user)

```
NSDictionary *param=[NSDictionary dictionaryWithObjectsAndKeys:@"picture,id,name",@"fields", nil];

SLRequest *profileInfoRequest= [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:url parameters:param];
profileInfoRequest.account= facebookAccount;

[profileInfoRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    NSLog(@"Facebook status code is : %ld", (long)[urlResponse statusCode]);

    if ([urlResponse statusCode]==200) {

        NSDictionary *dictionaryData= [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];

    } else {

    }
}];

} 
```

# client-side - 强类型的客户端语言？

> ID：11270760
> 
> 赞同：9
> 
> 时间：2012-06-30T01:29:24.533
> 
> 标签：client-side, strong-typing

强大的服务器端语言有很多选择，但我想不出任何强类型、真正强大的客户端语言。Javascript 在表单、基本数学以及使用 AJAX 与服务器交互等方面做了很多工作，但与其他语言相比，它有其局限性。

我正在寻找一种能够进行图像处理或数据处理的强类型客户端语言，诸如此类的原始内容。或者，如果有 javascript 库可以帮助强制执行变量的数据类型，那也可能会起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T02:05:50.420

在浏览器中，就**强类型**而言，你有 Java 和[GWT](https://developers.google.com/web-toolkit/)（静态）、Python（动态）和[睡衣](http://code.google.com/p/pyjamas/)、[Dart](http://www.dartlang.org/)、[Opa](http://www.opalang.org/)（静态）和一堆可以从[LLVM](http://llvm.org/)（C、C++、Objective ）交叉编译到 javascript 的语言C、Java、Ada 和许多其他）感谢[emscripten](https://github.com/kripken/emscripten)。

在性能方面，您可以查看[Google Native Client](http://code.google.com/p/nativeclient/)和[Javascript typed arrays](https://developer.mozilla.org/en/JavaScript_typed_arrays)。

我个人认为 Opa 是当今最有趣的网络语言之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:10:03.183

[Haxe](http://haxe.org/)是一种静态类型语言，可以编译到各种客户端环境，例如 JavaScript 或 Flash。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T11:46:04.167

[TypeScript](http://www.typescriptlang.org/)、[Flow](http://flowtype.org)和[Dart](http://www.dartlang.org/)具有可选的静态类型。TypeScript 是 JavaScript 的超集（您可以使用类型信息注释现有库）；Dart 是一种独立的语言，伴随着不断增长的[标准库](http://www.dartlang.org/docs/dart-up-and-running/ch03.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T17:33:44.177

您可能想看看[ST-JS](http://st-js.org/)。该工具允许您编写 javascript，但借用了 java 的语法和静态类型。这些工具提供了一系列准确反映标准 javascript 库的 Java 接口和类，以及一些其他常用的有用库（DOM、jquery 等）。然后，您可以用 java 编写源代码，ST-JS 翻译器会将静态类型的代码转换为普通的（最重要的是可读的）javascript 代码。只要您编写相应的 java 接口，ST-JS 还与您想要使用的任何其他 javascript 库兼容。

ST-JS 的另一个优点是，由于您正在编写 java 代码，因此您可以使用 java 生态系统中所有真正强大的工具。所有 IDE 中的重构工具都可以开箱即用。Findbugs、PWD、checkstyle 等静态分析工具也能很好地工作，并且在启用 ST-JS 的代码上非常准确。

您可以将 ST-JS 视为介于 GWT（对您完全隐藏 javascript 标准库，并阻止您使用外部库）和一些 javascript 静态分析工具（例如 JSLint）之间的某个地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-07T13:18:17.370

[Scala.js](http://www.scala-js.org/)是另一种选择。它的[JavaScript 互操作性](http://www.scala-js.org/doc/js-interoperability.html)很重要。

# html - 具有动态用户输入的 HTML5 画布

> ID：11270761
> 
> 赞同：3
> 
> 时间：2012-06-30T01:29:35.267
> 
> 标签：html, canvas, html5-canvas

我将首先承认我以前从未使用过画布，所以我不知道这是否可能，但我似乎无法找到解决方案。

我正在尝试创建一个画布，该画布根据用户最有可能以 HTML/PHP 形式输入的多边形的边数和大小在画布中绘制一个简单的正多边形形状（所有边都相等）。实际上没有任何内容保存到服务器或数据库中，仅用于一张图纸。

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:38:51.597

您应该使用 JavaScript 库来更轻松地在画布上绘图。

这是您正在寻找的功能的一个非常好的演示：

[http://fabricjs.com/](http://fabricjs.com/)

库是 Fabric.js，你可以在这里下载：http: [//fabricjs.com/](http://fabricjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:57:44.417

我在谷歌上查了一下，有一个有趣的[教程/代码](http://www.scienceprimer.com/drawing-regular-polygons-javascript-canvas)，它绘制了一个具有 n 边和大小的正多边形。所以我想把它做成一个函数，我遇到的一个技术问题是当画布被画出来时，我点击画另一个画布，第二个画布被“覆盖”在第一个画布上。幸运的是[，这里](https://stackoverflow.com/questions/2142535/how-to-clear-the-canvas-for-redrawing)有人通过清除画布解决了这个问题。

所以这是我的代码，您可以根据需要更改它：

```
<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <title>Regular Polygon</title>
</head>
<body>
  <canvas id="regular_polygon" width="400" height="400"></canvas>

  <p>Polygon drawer:</p>
  <p>Number of sides <input type="text" id="nSides"></p>
  <p>Size <input type="text" id="size"></p>
  <p>Color <input type="text" id="color"></p>
  <p>Width <input type="text" id="width"></p>
  <button id="draw">Draw!</button>

  <script type="text/javascript">
    function polygon (element_id, nSides, psize, pcolor, pwidth) {
      var c = document.getElementById(element_id);
      c.width = c.width;
      var cxt = c.getContext("2d");
      var numberOfSides = nSides,
          size = psize,
          Xcenter = c.width/2,
          Ycenter = c.height/2;

      cxt.beginPath();
      cxt.moveTo (Xcenter +  size * Math.cos(0), Ycenter +  size *  Math.sin(0));

      for (var i = 1; i <= numberOfSides;i += 1) {
        cxt.lineTo (
          Xcenter + size * Math.cos(i * 2 * Math.PI / numberOfSides),
          Ycenter + size * Math.sin(i * 2 * Math.PI / numberOfSides)
        );
      }

      cxt.strokeStyle = pcolor;
      cxt.lineWidth = pwidth;
      cxt.stroke();
    }

    (function () {
      polygon("regular_polygon", 3, 40, "#000000", 2);
      document.querySelector('#draw').addEventListener('click', function (e) {
        e.preventDefault();
        var nSides = document.querySelector('#nSides'),
            size = document.querySelector('#size'),
            color = document.querySelector('#color'),
            width = document.querySelector('#width');

        polygon("regular_polygon", nSides.value, size.value, color.value, width.value);
      });
    })();
  </script>
</body>
</html> 
```

# android - 关于AlarmManager.RTC_WAKEUP和AlarmManager.RTC类型的告警的区别

> ID：11270762
> 
> 赞同：3
> 
> 时间：2012-06-30T01:29:48.353
> 
> 标签：android, alarmmanager

`RTC_WAKEUP`和类型的警报有什么区别`RTC`？

从 的文档来看`AlarmManager`，如果设备当前处于睡眠状态，警报似乎`RTC`不会唤醒设备，并且直到设备下次唤醒时才会发出**。**但是我发现类型的闹钟`RTC`还是会唤醒设备，这是怎么回事呢？

我的做法是在, 函数中将 的类型`RTC_WAKEUP`改为，然后设置从现在起 3 分钟的闹钟，然后检查设备，你会发现它仍然可以被闹钟唤醒。`RTC``AlamrManagerService.java``setRepeating()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T09:58:04.660

还有其他实例报告[`AlarmManager.RTC`](http://developer.android.com/reference/android/app/AlarmManager.html#RTC)似乎唤醒了设备：

*   [`AlarmManager.RTC`在唤醒时做太多更新](https://stackoverflow.com/questions/9081988/alarmmanager-rtc-doing-too-many-updates-on-wakeup)
*   [设备睡眠时Android`AlarmManager RTC`不会暂停](https://stackoverflow.com/questions/3565622/android-alarmmanager-rtc-doesnt-pause-while-device-is-sleeping)
*   [`RTC`在 Android 上使用闹钟时允许手机进入睡眠状态](https://stackoverflow.com/questions/6112327/allowing-the-phone-to-sleep-while-using-rtc-alarm-on-android)

每次，根本原因都是一样的：

有些东西使设备保持清醒（即使屏幕是黑色的）。
不要忘记充电设备（连接到电源）没有休眠。

# php - 来自不同类的变量 - php

> ID：11270766
> 
> 赞同：0
> 
> 时间：2012-06-30T01:31:08.677
> 
> 标签：php, oop

好的，这是我的结构。

one.php 二.php 三.php

one.php 包括 two.php 和 three.php

二.php是

```
class two {
  function test(){  $var ='gello'; }} 
```

三.php是

```
class three {
function testt(){  $var ='hello'; }} 
```

那么我怎么能在 three.php 中使用 two.php 的 $var 变量呢？

在 one.php 我可以做到这一点

```
 $one = new two(); 
 $one->var; 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:37:24.503

您需要在函数之外定义变量

当您在函数内部编写时，只有函数知道谁是谁`$var`并显示正确的值。

```
class two {
    public $var = 'foo';

    function setVar($var = 'foo') {
        $this->var = $var;
    }
}

class three {
    function test() {
        $two = new two();
        echo($two->var); // Show 'foo'

        $two->setVar('bar');
        echo($two->var); // Show 'bar'
    }
}

// Result 'foo'
$one = new two();
echo($one->var);

// Result 'fooz'
$one->setVar('fooz');
echo($one->var);

// Result 'foo' and 'bar'
$three = new three();
$three->test(); 
```

# c++ - 调用函数时出现段错误

> ID：11270768
> 
> 赞同：1
> 
> 时间：2012-06-30T01:31:34.843
> 
> 标签：c++, c, segmentation-fault

我的程序在循环迭代过程中遇到了段错误。调用中间函数后，`inter_value`打印直到`inter_value[199][208]`，然后，我有一个段错误。为了确保它没有超出范围访问，我`inter_value`首先打印数组，然后数组打印没有任何问题。

这是内存不足的象征吗？由,创建的数组`ct`和是一个静态数组。`inter_value``malloc``key_byte`

```
D = 200;
K = 256;
for(j = 0; j < D; j++)
    for(i = 0; i < K; i++)
        printf("inter_value[%i][%i] = %i\n", j, i, inter_value[j][i]);

for(j = 0; j < D; j++) {
    for(i = 0; i < K; i++) {
        intermediate(ct[j][0], key_byte[i], &inter_value[j][i]);
        printf("inter_value[%i][%i] = %i\n", j, i, inter_value[j][i]);
        fflush(stdout);
    }
}
printf("rex\n");

for(j = 0; j < D; j++) {
    for(i = 0; i < K; i++) {
        hamming_dist(ct[j][0], inter_value[j][i], &h[j][i]);
    }
} 
```

中间函数在这里

```
void intermediate(unsigned char ct, unsigned char key_byte, unsigned char *inter_value){
    *inter_value = getSBoxInvert(ct^key_byte);
} 
```

* * *

编辑 1：数组声明。

```
//initialize different intermediate values
inter_value = (unsigned char**)malloc(D * sizeof(unsigned char*));
if(inter_value == NULL){
    fprintf(stderr, "out of memory\n");
    return 0;
}
for(i = 0; i < D; i++){
    inter_value[i] = (unsigned char *)malloc(K * sizeof(unsigned char)); // this is fix to key size
    if(inter_value[i] == NULL){
        fprintf(stderr, "out of memory\n");
        return 0;
    }
}

//ct = malloc(row * sizeof(unsigned char*));
ct = (unsigned char**)malloc(D * sizeof(unsigned char*));
if(ct == NULL){
    fprintf(stderr, "out of memory\n");
    return 0;
}
for(i = 0; i < D; i++){
    //ct[i] = malloc(column * sizeof(unsigned char));
    ct[i] = (unsigned char *)malloc(column * sizeof(unsigned char));
    if(ct[i] == NULL){
        fprintf(stderr, "out of memory\n");
        return 0;
    }
}

unsigned char key_byte[256] = {0}; 
```

编辑2：段故障前的打印输出。

```
inter_value[199][233] = 214
inter_value[199][234] = 119
inter_value[199][2 
```

编辑 3：gdb 输出（似乎它指向另一个函数）

程序收到信号 SIGSEGV，分段错误。0x0804a3f5 in hamming_dist (ct=31 '\037', inter_value=203 '\313', h=0x2) at cpa.cpp:53 53 *h = c;

编辑 4：从 gdb 发出回溯命令后...

#0 0x0804a3f5 in hamming_dist (ct=31 '\037', inter_value=203 '\313', h=0x2) at cpa.cpp:53

#1 0x0804aff5 in main (argc=3, argv=0xbffff2f4) at cpa.cpp:266

编辑 5：在其之前添加 hamming_dist 函数调用和 printf 调用。

编辑 6：初始化 h

```
int **h;
h = (unsigned int**)malloc(D * sizeof(unsigned int*));
if(h == NULL){
    fprintf(stderr, "out of memory\n");
    return 0;
}
for(i = 0; i < D; i++){
    h[i] = (unsigned int*)malloc(K * sizeof(unsigned int)); // this is fix to key size
    if(h[i] == NULL){
        fprintf(stderr, "out of memory\n");
        return 0;
    }
} 
```

编辑 7：hamming_dist 函数声明。

```
void hamming_dist(unsigned char ct, unsigned char inter_value, int *h){
    int temp;
    temp = ct ^ inter_value;
    //then count No. of ones
    int c; // c accumulates the total bits set in v
    for (c = 0; temp; c++)
        temp &= temp - 1; // clear the least significant bit set

    *h = c;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T02:47:17.133

您的段错误是因为`&h[j][i]`当作为 hamming_dist 参数 h 的值传递时为 0x2，它试图取消引用它并存储到其中。这显然是因为早期的越界商店覆盖了`h[j]`.

请注意，在 malloced 缓冲区中越界写入可能会产生直到在您的程序中任意稍后才会出现的效果。它们可能根本不会出现......直到您发布代码并且一些客户使用恰好触发错误的输入运行它。

# ios - CCSprite 纹理大小

> ID：11270769
> 
> 赞同：0
> 
> 时间：2012-06-30T01:31:58.297
> 
> 标签：ios, xcode, cocos2d-iphone

我对更改 CCSprite 的纹理有点困惑。

我有：

```
aTexture[NUM_WALLS+11] = [[CCTexture2D alloc]initWithImage:[UIImage imageNamed:@"shop1.png"]];
[aSprite setTexture:aTexture[NUM_WALLS+11]]; 
```

和

```
aTexture[NUM_WALLS+9] = [[CCTexture2D alloc]initWithImage:[UIImage imageNamed:@"bush2.png"]];
[aSprite setTexture:aTexture[NUM_WALLS+9]]; 
```

这两个图像有两种不同的尺寸。但是，当我更改纹理时，精灵不会改变大小。相反，图像会缩放到精灵的大小。我认为精灵应该改变大小。

有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:21:47.060

图像文件可能有不同的大小，但纹理可能使用相同的大小，因为它们通常会放大到下一个最接近的 2 次方（在 cocos2d 中默认禁用 NPOT 纹理支持）。

含义：如果一张图像是 150x150 而另一张是 250x250，它们的纹理都将具有 256x256 尺寸。如果从图像文件加载精灵，cocos2d 会将绘制的纹理的实际部分调整为图像的大小（contentSize）。如果更改纹理，cocos2d 将简单地使用纹理的大小，而不管存储在纹理中的图像的大小——因为在创建纹理后该信息会丢失。

在这种情况下，您将不得不在精灵上手动调用 setTextureRect: 以仅在纹理中绘制实际图像的区域。

更好的解决方案是[创建一个](http://www.codeandweb.com/texturepacker)包含两种纹理的纹理图集，然后只更改精灵显示的精灵帧。它更容易，也可以节省内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:40:25.430

对于那些仍然想使用 setTexture 的人。

我发现这在这里有效：

`CCTexture2D* tex2d = [[CCTexture2D alloc] initWithImage:[UIImage imageNamed:_texture]]; CGSize texSize = [tex2d contentSize]; [sprite setTexture:tex2d]; [sprite setTextureRect:CGRectMake(0, 0, texSize.width, texSize.height)];`

setTexture 和 setTextureRect 的顺序很重要。否则它将无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:02:50.283

> CCTexture2D* tex2d = [[CCTexture2D alloc] initWithImage:[UIImage imageNamed:_texture]]; CGSize texSize = [tex2d contentSize]; [精灵 setTexture:tex2d]; [精灵 setTextureRect:CGRectMake(0, 0, texSize.width, texSize.height)];

**警告**

此代码存储纹理，但它可能会导致内存泄漏，因为从不调用 dealloc 函数。

您可以通过继承 CCTexture2D 类来检查它。至少 alloc-init 对于 CCSprite 对象总是以这种错误的方式工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T10:17:36.000

据我所知，CCSprite 使用它的 contentSize 属性和位置来计算要使用 OpenGL 绘制的顶点数组。这样，精灵不会改变它的可见大小，直到你改变它的 contentSize 属性。

# ruby-on-rails - Heroku 在消息传递方面与本地处理 Tanker 'tankit' 的方式不同

> ID：11270772
> 
> 赞同：1
> 
> 时间：2012-06-30T01:33:47.850
> 
> 标签：ruby-on-rails, search, heroku, indexing, message

我正在使用 rails gem Tanker 以便在我的应用程序中使用 Searchify。我还使用acts-as-messageable 以允许用户发送消息。在我的行为作为消息模型中，我有

```
 tankit 'idx' do 
             indexes :topic
             indexes :body

             indexes :sender_name do
                sent_messageable.name
              end
              indexes :sender_username do
                sent_messageable.username
              end
       end 
```

在本地，这运行良好。但是在 Heorku 上运行时`rake tanker:reindex`出现以下错误：`Indexing Message model rake aborted! undefined method 'name' for nil:NilClass`

我认为这是因为它没有将 sent_messageable 识别为用户。（Acts-as-Messageable 不要求这是用户，我只是将其作为一个用户）。有没有办法将它投射给用户？

在java中我会做（User）sent_messageable，但这也会引发错误（这次是语法）。

谢谢。

# wcf - 在客户端对象模型 Sharepoint 2010 中上传文件方法时出错

> ID：11270775
> 
> 赞同：0
> 
> 时间：2012-06-30T01:34:22.623
> 
> 标签：wcf, sharepoint

在客户端对象模型 + Sharepoint 2010 中上传文件方法时出错。文件上传后。之后虽然代码编译没有错误

执行时出现错误

"{"值不在预期范围内。"}

{System.Collections.Generic.SynchronizedReadOnlyCollection}

我有一种方法可以处理上传文件的功能

///////////////////////////////////////// //////////////////////////////////

```
public void Upload_Click(string documentPath, byte[] documentStream)
{
    String sharePointSite = "http://cvgwinbasd003:28838/sites/test04";
    String documentLibraryUrl = sharePointSite +"/"+ documentPath.Replace('\\','/');

    ////////////////////////////////////////////////////////////////////
    //Get Document List
    List documentsList = clientContext.Web.Lists.GetByTitle("Doc1");

    var fileCreationInformation = new FileCreationInformation();

    //Assign to content byte[] i.e. documentStream
    fileCreationInformation.Content = documentStream;

    //Allow owerwrite of document
    fileCreationInformation.Overwrite = true;

    //Upload URL
    fileCreationInformation.Url = documentLibraryUrl;
    Microsoft.SharePoint.Client.File uploadFile = documentsList.RootFolder.Files.Add(
    fileCreationInformation);             

    //uploadFile.ListItemAllFields.Update();
    clientContext.ExecuteQuery();
} 
```

///////////////////////////////////////// ///////////////////////////////////////

在控制器的 MVC 3.0 应用程序中，我定义了以下方法来调用上传方法。

///////////////////////////////////////// ////////////////////////////////////////

```
public ActionResult ProcessSubmit(IEnumerable<HttpPostedFileBase> attachments)
{
    System.IO.Stream uploadFileStream=null;
    byte[] uploadFileBytes;
    int fileLength=0;      

    foreach (HttpPostedFileBase fileUpload in attachments)
    {
        uploadFileStream = fileUpload.InputStream;
        fileLength=fileUpload.ContentLength;
    }

    uploadFileBytes= new byte[fileLength];
    uploadFileStream.Read(uploadFileBytes, 0, fileLength);

    using (DocManagementService.DocMgmtClient doc = new DocMgmtClient())
    {
        doc.Upload_Click("Doc1/Doc2/Doc2.1/", uploadFileBytes);
    }

    return RedirectToAction("SyncUploadResult");
} 
```

///////////////////////////////////////// ////////////////////////////////////////

请帮我定位错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T07:41:12.023

我认为您的 documentLibraryUrl 需要是相对的。这适用于 Sharepoint 2013

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    [SharePointContextFilter]
    public ActionResult Upload()
    {
        if (Request.Files.Count > 0)
        {
            HttpPostedFileBase file = Request.Files[0];

            if (file != null && file.ContentLength > 0)
            {
                var fileName = Path.GetFileName(file.FileName);

                var spContext = SharePointContextProvider.Current.GetSharePointContext(HttpContext);

                using (var clientContext = spContext.CreateUserClientContextForSPHost())
                {
                    if (clientContext != null)
                    {
                        FileCreationInformation newFile = new FileCreationInformation();
                        using (MemoryStream ms = new MemoryStream())
                        {
                            file.InputStream.CopyTo(ms);
                            byte[] array = ms.GetBuffer();
                            newFile.Content = array;
                        }
                        List docs = clientContext.Web.Lists.GetByTitle("Documents");
                        Folder folder = docs.RootFolder;
                        clientContext.Load(folder);
                        clientContext.ExecuteQuery();
                        newFile.Url = docs.RootFolder.ServerRelativeUrl + "/" + fileName;
                        Microsoft.SharePoint.Client.File uploadFile = docs.RootFolder.Files.Add(newFile);
                        clientContext.Load(uploadFile);
                        clientContext.ExecuteQuery();

                        //Set the metadata
                        Microsoft.SharePoint.Client.ListItem item = uploadFile.ListItemAllFields;
                        string docTitle = string.Empty;
                        item["Title"] = docTitle;
                        item.Update();
                        clientContext.ExecuteQuery();
                    }
                }
            }
        }
        return RedirectToAction("Index", new { SPHostUrl = SharePointContext.GetSPHostUrl(HttpContext.Request).AbsoluteUri });
    } 
```

# r - 应用两个不同矩阵-R代码的列的配对t检验

> ID：11270777
> 
> 赞同：1
> 
> 时间：2012-06-30T01:35:15.107
> 
> 标签：r

我有两个矩阵。我想逐列应用配对 t 检验并打印每列的 t 值、自由度、置信区间和 p 值。我从下面的代码开始。

D1 和 D2 是两个矩阵：

```
for (j in 1:n){
    t.test(D1[,j],D2[,j],paired=T)
} 
```

另外，我怎样才能打印这个循环的每个结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T03:47:24.887

这是我解决问题的方法：

```
#Make some random data
m1 <- matrix(rnorm(100), ncol = 5)
m2 <- matrix(rnorm(100), ncol = 5)

#Define a function to run your t.test, grab the relevant stats, and put them in a data.frame
f <- function(x,y){
  test <- t.test(x,y, paired=TRUE)
  out <- data.frame(stat = test$statistic,
                    df   = test$parameter,
                    pval = test$p.value,
                    conl = test$conf.int[1],
                    conh = test$conf.int[2]
                    )
  return(out)
}

#iterate over your columns via sapply
sapply(seq(ncol(m1)), function(x) f(m1[,x], m2[,x]))
#-----
     [,1]       [,2]       [,3]       [,4]       [,5]      
stat -0.7317108 1.73474    -0.0658436 0.6252509  -0.6161323
df   19         19         19         19         19        
pval 0.4732743  0.09898052 0.9481902  0.5392442  0.5451188 
conl -1.097654  -0.1259523 -0.7284456 -0.5680937 -0.7523431
conh 0.5289878  1.345625   0.6840117  1.052094   0.4101385 
```

您可能想要转置输出，因为它是列主要排序的。

# iphone - 当我在 iPad 模拟器 5.1 中运行应用程序时，显示屏顶部有一个间隙，背景图像没有覆盖

> ID：11270779
> 
> 赞同：0
> 
> 时间：2012-06-30T01:36:01.020
> 
> 标签：iphone, xcode, uiimageview, ios-simulator

当我在 iPhone 模拟器 5.1 中运行应用程序时，默认图像加载正常，但是当应用程序运行时，iPad 模拟器显示中的 iPhone 框架顶部有一个间隙（iPhone 模拟器中状态栏的大小）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:44:22.713

检查 xib 文件中的视图框架，同时更改窗口和查看背景颜色以帮助您找到问题。

PS。在 info.plist 文件中，添加“状态栏最初是隐藏的”。这可能会有所帮助。

# ios - 在不使用点精灵的情况下在屏幕上的不同点渲染多个纹理

> ID：11270780
> 
> 赞同：1
> 
> 时间：2012-06-30T01:36:11.923
> 
> 标签：ios, opengl-es, opengl-es-1.1

我正在构建一个 ios 绘图应用程序，并且很难在屏幕上的不同点绘制纹理。大多数在线教程都是指在屏幕上渲染特定大小的单个纹理。

但是，我正在寻找的是提供一个 2d 顶点数组，用于绘制基于用户在屏幕上触摸的位置计算的绘制纹理。

我使用的点精灵不需要我指定纹理坐标和用于绘制纹理的原始对象。

但是，我想使用纹理坐标来提供原始对象（例如用三角形条绘制的四边形）。

关于如何做到这一点的任何想法？任何指针都会有所帮助。

库纳尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:34:26.773

如果我理解正确，您想在用户触摸屏幕的点绘制许多纹理（相同的图像）。对于我的粒子系统，我使用这个：

```
float squarevData[12]={
        -1,1,
        1,1,
        -1,-1,
        1,1,
        1,-1,
        -1,-1,
    };
float squarevData2[12]={
        -1,1,
        1,1,
        -1,-1,
        1,1,
        1,-1,
        -1,-1,
    };
class BatchRenderer
{
public:
    float* partVdata;
    float* partCdata;
    float* partTdata;

    int counter1,counter2,counter3;
    int count;
    bool isz;
    BatchRenderer(int maxTextures,bool iszi)
    {
        isz=iszi;
        if(isz)partVdata=(float*)malloc(maxTextures*18*4);
        else partVdata=(float*)malloc(maxTextures*12*4);

        partCdata=(float*)malloc(maxTextures*24*4);
        partTdata=(float*)malloc(maxTextures*12*4);
    }

    void Draw(float x,float y,float z,float scalex,float scaley,float angle,float r,float g,float b,float a)
    {
        angle*=0.017453f;
        for(int c2=0;c2<12;c2+=2)
        {
                float x=squarevData[c2]*scalex;
                float y=squarevData[c2+1]*scaley;
                float cos1=cos(angle);
                float sin1=sin(angle);
                squarevData2[c2] = (cos1*x) - ( sin1*y);
                squarevData2[c2+1] = (sin1*x) + ( cos1*y);
        }

        partVdata[counter1++]=x+squarevData2[0];
        partVdata[counter1++]=y+squarevData2[1];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[2];
        partVdata[counter1++]=y+squarevData2[3];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[4];
        partVdata[counter1++]=y+squarevData2[5];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=0;

        partVdata[counter1++]=x+squarevData2[6];
        partVdata[counter1++]=y+squarevData2[7];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[8];
        partVdata[counter1++]=y+squarevData2[9];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=0;

        partVdata[counter1++]=x+squarevData2[10];
        partVdata[counter1++]=y+squarevData2[11];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=0;

        count++;

    }
    void RenderStart()
    {
        counter1=counter2=count=counter3=0;

    }
    void RenderStop(int textureid)
    {
        glEnable(GL_TEXTURE_2D);
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE);
        glEnableClientState(GL_COLOR_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);
        glEnableClientState(GL_VERTEX_ARRAY);
        glBindTexture(GL_TEXTURE_2D, textureid);
        glTexCoordPointer(2, GL_FLOAT, 0, partTdata);
        glColorPointer(4, GL_FLOAT, 0,partCdata );
        if(isz)glVertexPointer(3, GL_FLOAT, 0, partVdata);
        else glVertexPointer(2, GL_FLOAT, 0, partVdata);
        glDrawArrays(GL_TRIANGLES, 0, count*6);
        glDisableClientState(GL_COLOR_ARRAY);
        glDisableClientState(GL_TEXTURE_COORD_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

    }
}; 
```

如何使用它？

```
BatchRenderer* br=new BatchRenderer(500,false)//the max number of textures that can be drawn , and if you want z axis

void Render()
{
      br->RenderStart();
      for(int c=0;c<POINTS;c++)
      {                          
    br->Draw(p[c].x,p[c].y,0,p[c].scalex,p[c].scaly,p[c].angle,p[c].r,p[c].g,p[c].b,p[c].a);
      }
      br->RenderStop(yourtextureid);

} 
```

您可以使用中间设备以 60 fps 的速度绘制 500 多个纹理，并且每个纹理都可以具有独特的比例、旋转和颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:18:23.187

我终于让这个工作了。我将用户触摸的每个点绘制为 TRIANGLE_STRIP 图元，其中两个一起形成一个正方形。

```
 GLfloat *tBuffer = malloc(4 * 2 * sizeof(GLfloat));
    tBuffer[0] = 0.0;
    tBuffer[1] = 1.0;
    tBuffer[2] = 1.0;
    tBuffer[3] = 1.0;
    tBuffer[4] = 0.0;
    tBuffer[5] = 0.0;
    tBuffer[6] = 1.0;
    tBuffer[7] = 0.0;
    glTexCoordPointer(2, GL_FLOAT, 0, tBuffer);

    CGFloat padding = 16;
    vBuffer[0] = xCenter - padding;
    vBuffer[1] = yCenter - padding;

    vBuffer[2] = xCenter + padding;
    vBuffer[3] = yCenter - padding;

    vBuffer[4] = xCenter - padding;
    vBuffer[5] = yCenter + padding;

    vBuffer[6] = xCenter + padding;
    vBuffer[7] = yCenter + padding;

    CGFloat degrees = atan2(end.y - start.y, end.x - start.x) * 180 / M_PI;

    // rotate the texture in the direction of the stroke.
    glMatrixMode(GL_TEXTURE);
    glPushMatrix();
    glTranslatef(0.5, 0.5, 0);
    glRotatef(degrees, 0, 0, 1);
    glTranslatef(-0.5, -0.5, 0);
    glVertexPointer(2, GL_FLOAT, 0, vBuffer);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, count);
    glPopMatrix();
    glMatrixMode(GL_MODELVIEW); 
```

xCenter，yCenter 是用户触摸的地方。填充确定图元的大小。

我也旋转纹理，但在旋转之前将其转换到中心，因为旋转发生在原点处的枢轴上。

希望这可以帮助！

**更新**：

通过运行以下旋转命令集，我能够将 openGL 调用的数量减少 1：

请注意，通过运行以下旋转命令集（删除推/弹出矩阵），我能够将 OpenGL 调用的数量减少 1

```
 glMatrixMode(GL_TEXTURE);
    glLoadIdentity();
    glTranslatef(0.5, 0.5, 0);
    [GLManager rotateBrush:degrees];
    glTranslatef(-0.5, -0.5, 0);
    [GLManager drawVertexBuffer:vBuffer withVertexNumber:4];
    glMatrixMode(GL_MODELVIEW);` 
```

# javascript - 覆盖它们时如何显示两个画布？

> ID：11270784
> 
> 赞同：0
> 
> 时间：2012-06-30T01:38:00.597
> 
> 标签：javascript, html, canvas

我按照[这篇](https://stackoverflow.com/questions/11270142/how-to-place-two-canvases-on-top-of-one-another/11270179#11270179)文章和[这个](http://jsfiddle.net/loktar/zbTzq/)小提琴中的说明进行操作，但我对如何使下部画布可见感到困惑。在我的网站中，仅绘制了上部画布的内容。

我觉得我错过了一些明显的东西，但我不确定它是什么。在小提琴页面上似乎没有什么特别的事情发生，两个画布都画得很好。

这是我的代码中的 CSS 和相关 JS：

```
#container {
    position: relative;
}

#drawingCanvas {
    position: absolute;
    left: 0px;
    top: 0px;
}

   **JAVASCRIPT**:
previewContext.strokeStyle = "#000";
previewContext.beginPath();
previewContext.moveTo(5, 5); // just testing
previewContext.lineTo(50, 50); // testing
previewContext.stroke(); 
```

该线绘制在下层画布上，不可见。我知道这一点，因为如果我将它们并排放置，我可以看到画线。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:43:12.417

我认为您只想使顶部画布背景“透明”。但是，如果这不能回答您的问题，您可能需要发布您的确切方法。

```
#drawCanvas {
    position:absolute;
    top:0;
    left:0;
    background: 0;
} 
```

[http://jsfiddle.net/userdude/zbTzq/4/](http://jsfiddle.net/userdude/zbTzq/4/)

# javascript - 使用回调或全局函数重新分配存储在闭包中的变量

> ID：11270785
> 
> 赞同：1
> 
> 时间：2012-06-30T01:38:02.697
> 
> 标签：javascript, closures

## 编辑

让我更深入一点。我正在尝试创建一个伪承诺实现。这里的想法是我有一个回调，在收到异步调用之前不会执行。所以我只是将所有对这个函数的调用排队，直到它被通知可以执行。队列被清空，任何对该函数的进一步调用都应该立即执行，但由于某种原因，该函数仍在排队。这是因为，无论出于何种原因，我对 runner 函数的重新定义都无法正常工作。下面的代码是我脑海中每一个想法的睡眠不足、沮丧的版本。这是实际的代码：

```
function Promise(callback){
  var queue    = []
    , callback = callback
    , runner   = function(){
        queue.push({
          context: this,
          args: Array.prototype.slice.call(arguments, 0)
        });
      }
  ;//var

  runner.exec = function(){
    for(var i = 0, ilen = queue.length; i < ilen; i++){
      var q = queue[i];

      callback.apply(q.context, q.args);
    }

    runner = callback;
  };

  return runner;
}

test = Promise(function(){
  $('<div/>').appendTo('#output').html(Array.prototype.slice.call(arguments,0).toString());
});

test(1,2);
test(3,4);
test.exec();
test(5,6);​ 
```

[http://jsfiddle.net/a7gaR/](http://jsfiddle.net/a7gaR/)

* * *

我正用这个把头撞在墙上。我正在尝试通过函数本身外部的调用重新分配函数中的变量（理想情况下，通过将重新分配函数作为回调传递）。在我在 jsfiddle 上发布的示例中，我创建了一个全局函数，理论上，它引用了其父函数中包含的变量。在调用该外部函数时，我希望它重新分配另一个函数正在使用的值。它似乎不以这种方式工作。

```
window.test = function temp() {
    var val = 7,
        func = function() {
            return val;
        };

    window.change = function() {
        window.test.val = 555555;
        $('<div>Changing ' + val + ' to ' + window.test.val + 
               '</div>').appendTo($output);
        val = window.test.val;
        temp.val = window.test.val;
        func = function() {
            return 'Why isn\'t this working?';
        }
    }

    return func();
}

var $output = $('#output');

$('<div/>').appendTo($output).html('::' + test() + '::');
window.change();
$('<div/>').appendTo($output).html('::' + test() + '::'); 
```

[http://jsfiddle.net/YhyMK/](http://jsfiddle.net/YhyMK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:04:00.300

第二次调用时，`test`您将创建一个名为的*新*局部变量`func`并定义一个关闭该新变量的新变量*。* `window.change`您`func`通过调用原件对原件所做的更改`window.change`与第二次调用无关。

另请注意以下行：

```
window.test.val = 555555; 
```

...不修改/引用`val`外部函数中的变量。`window.test.val`指的是在对象上命名`val`的`test`属性（恰好是一个函数），而不是任何局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:58:42.383

我终于创建了一个可以执行此操作的函数。它的要点在这里：[https](https://gist.github.com/2586972) ://gist.github.com/2586972 。

它像这样工作......

您调用 Defer 传递您想要延迟其功能的回调：

```
var deferredCB = Defer(function(){ console.log(this,arguments) }; 
```

deferredCB 现在将存储您传递的所有参数，以便在以后执行它们：

```
defferedCB(1);
defferedCB(2); 
```

现在，当您准备好执行操作时，您只需“执行”deferredCB：

```
defferedCB.exec(); 
```

结果是：

```
// window, 1
// window, 2 
```

所有未来对 deferredCB 的调用都将立即执行。现在我正在考虑它，我可能会进行重写以允许您将 deferredCB 重置为其预执行状态（再次存储所有参数）。

让它工作的关键是有一个包装函数。Javascript 根本不允许您在执行函数时重新分配它。

田田！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T01:42:51.513

您正在尝试使用语法来引用函数中的局部变量`func.varname`。那是行不通的，这不是局部变量的工作方式。

# jquery - 拉伸图像以填充 div，但不倾斜

> ID：11270787
> 
> 赞同：8
> 
> 时间：2012-06-30T01:38:20.220
> 
> 标签：jquery, css

我正在尝试使图像拉伸以适合 div 内。但是我希望它溢出，以便填充整个 div。div 随页面调整大小。我想要一个类似于 jQuery bgstretcher 插件（[http://www.ajaxblender.com/bgstretcher-2-jquery-stretch-background-plugin-updated.html](http://www.ajaxblender.com/bgstretcher-2-jquery-stretch-background-plugin-updated.html)）的效果，但我不能使用那个插件，因为我已经在使用它用于页面上的背景图像，当您尝试激活它的多个实例时，它似乎不起作用。

所以我要的是某种简单的 jQuery 函数，它可以调整图像的大小以完全填充隐藏溢出的 div，这样就没有间隙，但不会倾斜图像。

**编辑：**

[http://jsfiddle.net/R7UCZ/](http://jsfiddle.net/R7UCZ/)

这就是我所追求的，但我希望图像*填充*整个 div*而不会*倾斜。如果图像稍微超出 div，那很好，但我需要它与 div 一起调整大小，div 会随着页面的高度和宽度调整大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T02:42:05.120

首先需要获取图片属性，看哪个大，高还是宽，然后在窗口调整大小后根据div大小调整图片大小，像这样：

```
 //this would load up initially, you will need this data for future processing

   div = $("div");
   imgsrc = div.find('img').attr('src');

   var img = new Image()
   img.onload = function(){
        imgw = img.width;
        imgh = img.height;

        //after its loaded and you got the size..
        //you need to call it the first time of course here and make it visible:

        resizeMyImg(imgw,imgh);
        div.find('img').show();

        //now you can use your resize function
        $(window).resize(function(){ resizeMyImg(imgw,imgh) });

        }
   img.src = imgsrc

   function resizeMyImg(w,h){     
      //the width is larger
      if (w > h) {
        //resize the image to the div
        div.find('img').width(div.innerWidth() + 'px').height('auto');
      }        
      else {
        // the height is larger or the same
        //resize the image to the div
        div.find('img').height(div.innerHeight() + 'px').width('auto');
      }

     } 
```

您实际上可以在这里找到完整的解决方案：http: [//jsfiddle.net/CDywS/1](http://jsfiddle.net/CDywS/1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T02:07:34.273

你根本不需要 JavaScript/jQuery。只需使用`contain`or`cover`值`background-size`：

1.  `background-size: contain`将图像缩放到最大宽度/高度，以便在保持纵横比的同时整个图像可见。（没有溢出）

2.  `background-size: cover`将图像缩放到最大宽度，以便在保持纵横比的同时用图像填充整个 div。（如果图像不是正方形则溢出）

因此，您只需要编写以下代码：

```
#myDiv {
    background-size: contain;
} 
```

或者：

```
#myDiv {
    background-size: cover;
} 
```

更多信息：[http ://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

**更新**：[**演示**](http://jsfiddle.net/R7UCZ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T11:41:56.423

Zee Tee 的答案被标记为正确并且确实可以完成工作-但仅适用于横向图像。肖像图像不适用于它，您可以在 jsfiddle 示例中尝试使用这样的图像。

但是，您可以通过为包含图像的 div 指定高度来使其工作。您可以为此提供一个固定值或一个最小高度，两者都可以。

原因是在 resizeMyImg 函数中，在该行中：

```
div.find('img').height(div.innerHeight() + 'px').width('auto'); 
```

div.innerHeight 是未定义的，除非 div 具有与其关联的 height 或 min-height CSS 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T02:00:32.767

你可以简单地这样做：

```
 <img src="your_picture.png" alt="" style="width:100%;height:100%"></img> 
```

当您的容器 div 调整大小时，图像将自行拉伸以填充整个 div。

**编辑：**

如果您不希望图像倾斜：

```
 <img src="your_picture.png" alt="" style="width:100%"></img> 
```

或者：

```
 <img src="your_picture.png" alt="" style="height:100%"></img> 
```

根据您不想溢出的维度...

# xml - RESTful Web 服务：为同一资源记录 XML

> ID：11270790
> 
> 赞同：1
> 
> 时间：2012-06-30T01:38:57.473
> 
> 标签：xml, rest, restful-architecture

我正在使用 W3C XML Schema (XSD) 来记录资源。今天，XML 表示是在少数资源中返回的。我的一个资源上的 POST 操作需要来自客户端的 XML。此资源的响应是 XML。我的问题如下：

a) 我应该创建一个 XSD 来处理资源的请求 (POST) 和响应吗？

b) 如果使用单个 XSD，我应该如何区分请求 (POST) 和响应？一个想法围绕着：

```
<stream>
  <request>
    <items>xxx</items>
  </request>
  <response>
    <stuff>xxx</stuff>
  </response>
</stream> 
```

麻烦的是，我担心请求/响应标签反映了 RPC 风格的方法。

c) 关于 POST 操作，我想通知客户 XML 是必需的，并且只允许在 POST 操作期间使用。我怀疑如果违反此要求，我最好的选择是返回 400 错误请求？除此之外，我认为我对 XSD 的唯一选择是“通过评论记录要求”？只是想感受一下除了评论之外我应该考虑的任何 XSD 设计选项。当然，一个 XSD 的挑战是对 GET 操作的响应——它不需要来自客户端的 XML——将要求客户端“忽略”XML 中的 POST 内容。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:40:00.713

a) 创建一个 XSD 并在该 XSD 中定义多种类型是可以的。在单个 XSD 中定义请求/响应对对我来说似乎是合理的。请记住 XSD 的消费者或用户。会是谁？您是否希望您的 API 的用户使用该 XSD 来构建应用程序，还是仅由服务器（接收）端使用它来验证传入的请求？

在许多情况下，在 REST api 中交换的消息并未在模式文档中正式定义。相反，它们被记录在一个 html 页面中，然后公司提供一个 API 测试页面，他们可以在其中查看示例请求和响应。这是记录 API 的一种非常实用的方式。有关这方面的示例，请参阅[https://api.stackexchange.com/docs/answers](https://api.stackexchange.com/docs/answers)。

* * *

b) 为了区分请求和响应，我想您会在 XSD 中使用不同的元素类型。也许我不明白这个问题。

* * *

c) 返回 400 是完全合理的，如果请求是错误的内容类型，不包括 XML 文档，或者 XML 文档不符合所需的模式。如果您确实返回了 400，那么最好也返回一个消息正文，其中包含一个提供更多信息的 XML 文档：

```
<response> 
  <error>
    <code>101.4.c</code>
    <description>your request did not include an XML document</description>
    <link>http://example.com/errorinfo?code=101.4.c</link> 
  </error>
</response> 
```

有关 REST API 设计的更多信息，请参阅[http://dinochiesa.net/?p=192](http://dinochiesa.net/?p=192)

# visual-studio-2010 - Visual Studio - 是否有简单的方法添加“关闭解决方案”以在解决方案资源管理器中单击

> ID：11270794
> 
> 赞同：16
> 
> 时间：2012-06-30T01:40:20.273
> 
> 标签：visual-studio-2010, visual-studio-2008

我似乎无法打破总是右键单击解决方案以尝试关闭解决方案的习惯。然后我总是记得并把鼠标移过屏幕很远的地方才能在“文件”菜单中找到它。

我用它不足以记住击键。

我使用 VS2008、VS2010，偶尔使用 VS2012

我不想仅仅为这个小任务构建插件。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-30T01:49:07.067

在 Visual Studio 2010 中，您可以：

1.  右键单击工具菜单，然后单击“自定义..”。
2.  单击“命令”选项卡。
3.  单击“上下文菜单”选项。
4.  选择“项目和解决方案上下文菜单|解决方案”。
5.  单击“添加命令...”按钮。
6.  在“类别”列表框中选择“文件”。
7.  在“命令”列表框中选择“关闭解决方案”。
8.  根据需要向上/向下移动。
9.  单击“关闭”并享受。

我手边没有 VS 2008 或 2012，但步骤应该类似。

编辑：对于 VS2008

1.  右键单击工具菜单，然后单击“自定义..”。
2.  单击“工具栏”选项卡。
3.  检查“上下文菜单”选项。（将出现上下文菜单工具栏）
4.  在当前对话框中选择命令选项卡。
5.  在“类别”列表框中选择“文件”。
6.  在“命令”列表框中选择“关闭解决方案”。
7.  将命令拖到上下文菜单工具栏中的“选择”项目和解决方案上下文菜单“。您可以将其拖放到菜单上的任何位置或子菜单中 - 即“项目和解决方案上下文菜单 | 解决方案”
8.  单击“关闭”并享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T21:09:47.153

***视觉工作室 2019***

这是使用**COMBINATION KEYS**执行此操作的方法，它比将其添加到工具栏或上下文菜单要好:)

1.  转到**工具**菜单
2.  转到**选项**
3.  按**Ctrl+E**并搜索 Keyboard // 或转到 **Environment>Keyboard**
4.  在右侧的**搜索栏中键入****CLOSE**（我的意思是在**“显示包含的命令”下方）**
*****   向下并从结果中选择**“File.CloseSolution”***   单击框**“按快捷键：”**并指定您的组合键*   **请注意**，Visual Studio 有很多**默认**组合键，并且**不使用任何常规快捷键**。（我使用**Ctrl+F4**）*   选中“使用新的快捷方式：”并选择要使用此快捷方式的地方（我建议使用**GLOBAL**）*   单击**分配**>**确定**>**玩得开心******

 ***** * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-03-21T13:25:45.827

您只需在 Visual Studio 2017 中单击文件->关闭解决方案即可关闭解决方案

[![关闭解决方案](../Images/78e693bc5dd838cfe5ff75c955c1b1c9.png)](https://i.stack.imgur.com/i73nj.png)****

# sql - 查询以获取每个人的最大捐款

> ID：11270800
> 
> 赞同：0
> 
> 时间：2012-06-30T01:42:16.957
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL Server 中有一个名为 [Donations] 的表，其中包含各种人的捐款。

它的字段是：

```
FirstName,LastName,FullName,Description --VARCHARs
DateOrdered, --DATE
Donation     --MONEY 
```

我希望返回表中的所有字段，但我只想要每个人最大的捐赠记录，而不是他们所有的捐赠。

假设该表包含 8 条记录，John Doe 有 5 条捐赠记录，而 Jane Doe 有 3 条。我希望编写一个查询，它将给出 John 的最大捐赠记录和 Jane 的捐赠记录。最大的捐赠。

我怎样才能用 SQL 写这个？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:56:53.723

```
select
  *
from
  donations d
where
  donation=(select max(donation) from donations where fullname=d.fullname group by fullname) 
```

这假设 fullname 是您在此表上的 PK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:19:27.753

这是使用排名函数的示例：

```
DECLARE @Donations TABLE (FirstName VARCHAR(128),LastName VARCHAR(128),
FullName VARCHAR(256),Description VARCHAR(1024), 
DateOrdered DATETIME, Donation DECIMAL)
INSERT @Donations VALUES 
('John', 'Doe', 'John Doe', '', '20120605', 125),
('John', 'Doe', 'John Doe', '', '20120603', 12.34),
('John', 'Doe', 'John Doe', '', '20120602', 13.59),
('John', 'Doe', 'John Doe', '', '20120609', 125),
('John', 'Doe', 'John Doe', '', '20120601', 15),
('Jane', 'Doe', 'Jane Doe', '', '20120612', 155),
('Jane', 'Doe', 'Jane Doe', '', '20120613', 152),
('Jane', 'Doe', 'Jane Doe', '', '20120612', 155)

-- Return maximum donations including duplicate donations 
-- on different and same dates
;WITH a AS
(
    SELECT  *,
            DENSE_RANK() OVER (PARTITION BY FullName 
                ORDER BY Donation DESC) DenseRank
    FROM    @Donations
)

SELECT  *
FROM    a
WHERE   DenseRank = 1
ORDER   BY Donation DESC, DateOrdered DESC

-- Return maximum donations including duplicate donations on same dates,
-- excluding duplicate donations on different dates
;WITH a AS
(
    SELECT  *,
            DENSE_RANK() OVER (PARTITION BY FullName 
                ORDER BY Donation DESC, DateOrdered DESC) DenseRank
    FROM    @Donations
)

SELECT  *
FROM    a
WHERE   DenseRank = 1
ORDER   BY Donation DESC, DateOrdered DESC

-- Return maximum donations excluding duplicate donations 
-- on same and different dates
;WITH a AS
(
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY FullName 
                ORDER BY Donation DESC, DateOrdered DESC) RowNum
    FROM    @Donations
)

SELECT  *
FROM    a
WHERE   RowNum = 1
ORDER   BY Donation DESC, DateOrdered DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T09:18:30.273

尝试这个：

```
select d1.*,(select max(d2.donation) where d2.fullname=d1.fullname group d2.fullname) from donation d1; 
```

# c# - 如何拆分和添加文本？

> ID：11270804
> 
> 赞同：0
> 
> 时间：2012-06-30T01:42:57.087
> 
> 标签：c#, string

我在 C# 中有这样的字符串：

`string a = "A|B|C|D"`

我想在管道字符上分割这个字符串，并在每个条目前面加上一些文本。目前，我正在做这样的拆分：

`string[] result = a.Split('|')`

但是因为字符串数组的大小是固定的，所以我需要创建一个新数组并使用 for 循环复制前置结果。是否有一种 Linq 方式或单线来实现这一点，而不是编写一个 for 循环？在 Python 中，我会做一个单行 for 循环：

`newresult = ["Prepend string " + x for x in result]`

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:45:04.337

```
var newResult = a.Split('|').Select(x => "Prepend string " + x).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T01:45:06.260

我发现这很容易，如果你说也想加入它：

`string.Join(" , ", devices.Select(s => "PREFIX = " + s).ToArray());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T01:46:07.017

不知道为什么需要创建一个新数组，但首先 Linq 方法是使用`.Select`运算符：

```
stirng[] result = a.Split('|').Select(x => "Prepend string " + x).ToArray(); 
```

也就是说，您也可以只编辑内联数组（即不需要新数组）：

```
for (var i = 0; i < result.Length; i++) 
    result[i] = "Prepend string " + result[i]; 
```

# c# - Metro 应用程序，在 C# 错误中解析 JSON 数据

> ID：11270810
> 
> 赞同：1
> 
> 时间：2012-06-30T01:44:30.877
> 
> 标签：c#, json, windows-8, microsoft-metro

我正在尝试在 Windows 8 Metro 应用程序中解析 json 数据以获取 reddit 评论。我已经能够使用 JSONObject.Parse() 成功解析主页 json 数据，但是在尝试解析评论页面的数据时，解析失败。有问题的数据在这里：

主页：可以解析

[http://jsonviewer.stack.hu/#http://www.reddit.com/.json](http://jsonviewer.stack.hu/#http://www.reddit.com/.json)

评论：无法解析

[http://jsonviewer.stack.hu/#http://www.reddit.com/r/leagueoflegends/comments/vt3wk/proving_grounds_playable_on_live_on_all_3_regions/.json](http://jsonviewer.stack.hu/#http://www.reddit.com/r/leagueoflegends/comments/vt3wk/proving_grounds_playable_on_live_on_all_3_regions/.json)

问题似乎是评论json的根对象是一个数组，而主页的根对象是一个普通对象。但是，jsonlint.com 告诉我 json 在这两种情况下都是有效的。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:53:11.047

我找到了答案。必须调用 JsonArray.Parse 而不是 JSONObject.Parse。

# visual-studio-2008 - 如何从动态 NAV 女士中的“采购线”。“快捷维度 2 代码”中检索值？

> ID：11270817
> 
> 赞同：1
> 
> 时间：2012-06-30T01:45:09.330
> 
> 标签：visual-studio-2008, dynamics-nav

我只是在 Ms. Dynamic Nav 2009 R2 中创建了一个全局变量，并将其数据类型设置为 RECORD 并选择一个特定的表（购买行）。之后，我将一个文本框添加到 Classic Report 并设置其 SourceExpr ：“Purchase Line”。“Shortcut Dimension 2 Code”。然后我转到 RTC 报告并将该字段添加到 RTC 报告中。运行 RTC 报告后。我得到一个空白值。你有没有经历过这种情况？请帮助我。我只想从“Purchase Line”中检索一个值。“Shortcut Dimension 2 Code”。

预先感谢

马卡拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:43:30.127

您是否测试过该字段在经典客户报告中是否有效？

此外，您需要记住，当您以这种方式使用全局变量（而不是报表数据项）时，您需要在 OnAfterGetRecord 触发器中的 C/AL 代码中手动从数据库中获取相关记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:56:01.987

RTC 报告中的字段位于何处？它必须在主体内，并且不能在 RTC 的页眉或页脚部分内，否则该值不会在没有附加代码的情况下出现。

# java - Java AffineTransform 翻译不起作用

> ID：11270825
> 
> 赞同：-2
> 
> 时间：2012-06-30T01:46:44.287
> 
> 标签：java, translation, affinetransform

**更新** 原来我只是累了。这里没有任何问题很抱歉浪费您的时间。不用担心，我已将此标记为版主查看。

我的问题是，当我在 java 中翻译 bufferedimage 时，它​​会上下移动，同时在 x 轴上翻译它。为了更好地理解我的问题，请观看：
[http ://www.youtube.com/watch?v=stwi1qVakp4](http://www.youtube.com/watch?v=stwi1qVakp4)

那么我的设置是什么：嗯，我所做的是在我的渲染方法中：

```
AffineTransform.translate(player_dx,0); 
```

然后我会有一个keylistener，就像：

```
public void keyPressed(KeyEvent e){
    int key = e.getKeyCode();
    if(key == KeyEvent.VK_RIGHT){
        player_dx = 1;
    }
    if(key == KeyEvent.VK_LEFT){
        player_dx = -1;
    }

}

 public void keyReleased(KeyEvent e){
    int key = e.getKeyCode();
    if(key == KeyEvent.VK_RIGHT){
        player_dx = 0;
    }
    if(key == KeyEvent.VK_LEFT){
        player_dx = 0;
    }

} 
```

我认为这是发生的，因为当我旋转它时，它会改变 x，y 坐标，所以如果它是 90 度，x 和 y 就会改变。我只是不知道我是否可以绕过它。

只要告诉我你是否需要知道其他任何事情。谢谢， Javaman111

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:58:35.060

您的问题在于手臂的代码，而不是角色的仿射变换。这可能与您在每个轴上移动手臂的程度有关，或者您可能错误地颠倒了 X 和 Y。

# javascript - 事件绑定时，“not:()”选择器不能与“.live()”一起使用

> ID：11270826
> 
> 赞同：0
> 
> 时间：2012-06-30T01:46:52.183
> 
> 标签：javascript, jquery

当我添加`live()`一些鼠标按下时，我的`not:`条件停止工作。

```
 $("body :not(" + _self.somevar + ")").live('mousedown',
     function(event){
     event.stopPropagation();
     // some more code
 } 
```

当它不是`live()`它的工作。现在我使用了`live()`，当我在该项目上按下鼠标时，它会在不应该触发时触发。

有谁知道为什么`not:`不再坚持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:22:03.510

我希望你只知道一个可以在 HTML 页面中使用的 body 标签。在您的情况下，如果您尝试为 id/class 附加事件会更好。语法将是这样的，

对于元素的 id

```
$("#not:'+ _self.somevar'+").live('mousedown',
 function(event){
 event.stopPropagation();
 // some more code
} 
```

对于元素类

```
$(".not:'+ _self.somevar'+").live('mousedown',
 function(event){
 event.stopPropagation();
 // some more code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T03:22:20.903

您可以将您的`.live()`方法更新为`.on()`（以使用新版本的 jQuery）。因此，您需要`document`在`mousedown`选择`body :not(#notAcceptedElement)`. 例子：

**HTML**：

```
<div id="notAccept">Not Accept Mousedown</div>
<div id="accept">Accept Mousedown</div> 
```

**JS**（jQuery 1.6）：

```
$('body :not(#notAccept)').live('mousedown', function(ev) {
    console.log(ev.target);
    $('#accept').clone().appendTo(document.body);
}); 
```

**JS**（jQuery 边缘/1.8）：

```
$(document).on('mousedown', 'body :not(#notAccept)', function(ev) {
    console.log(ev.target);
    $('#accept').clone().appendTo(document.body);
});
​ 
```

现场示例：[jsFiddle jQuery-1.6](http://jsfiddle.net/DgXUj/1/)，[jsFiddle jQuery-edge](http://jsfiddle.net/DgXUj/)。

# css - CSS 布局差异（在 Octopress 上使用 Twitter Bootstrap）

> ID：11270828
> 
> 赞同：0
> 
> 时间：2012-06-30T01:47:54.227
> 
> 标签：css, heroku, twitter-bootstrap, octopress

背景：我目前正在将我的 Tumblr 博客（带有（轻微）定制的 Bootstrap 主题）带到 Octopress。

Tumblr 站点：[http](http://eatsleeprepeat.net/) : //eatsleeprepeat.net/ Octopress 站点（WIP）：[http](http://stark-autumn-3851.herokuapp.com/) ://stark-autumn-3851.herokuapp.com/ Github：[https://github.com/elithrar/octopress/tree/master/。主题/eatsleeprepeat](https://github.com/elithrar/octopress/tree/master/.themes/eatsleeprepeat)（参见 sass/ 样式表）

现在最大的问题是`hero-unit`包含各个帖子的方式不符合（据我所知）`@media`_bootstrap_responsive.css 文件中的语句，该文件加载在`screen.css`网站本身的底部（通过 Octopress）。

HTML 结构是相同的（就 hero-unit div 而言），Chrome 中的 Web Inspector 没有告诉我任何有用的信息（阅读：我可以理解）。

如果有人有一些好的 CSS-fu 并且有几分钟的空闲时间，我将非常感激。

**更新**：我已经解决了 hero-unit（水平）的问题，所以它现在尊重页面大小。这是由于一个*非常*明显的错误：容器的“id”而不是“class”。

但是，说：我仍然对div`hero-unit`下方的垂直对齐有问题；`navbar navbar-fixed-top`它们之间没有间距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:24:53.787

您可能需要添加这些 CSS 规则：

```
.container::before, .container::after {
    display: table;
    content: "";
}
.container::after {
    clear: both;
}
.container::before, .container::after {
    display: table;
    content: "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:38:39.970

我通过添加以下内容解决了这个问题：

```
 <style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style> 
```

# jquery - 为什么 jQuery .on() 不能与 AJAX 加载的元素一起使用？

> ID：11270833
> 
> 赞同：0
> 
> 时间：2012-06-30T01:49:11.120
> 
> 标签：jquery, ajax

好的，我已经设法`.on`在另一个网站上工作，但由于某种原因，这只是一个痛苦。

这是我的代码：

```
$("#tabSection").on("click", "a.tab", function () {
    alert('bob');
}); 
```

和 HTML（将通过 jQuery 加载`.load()`：

```
<div id="tabSection">
    <table border=0 width="750px" cellspacing=0 cellpadding=0>
    <tr><td class="tab"><a href="javascript:void();" rel="details" class="tab selected">Details</a></td> 
```

显然我关闭了表格和 tabsection div。在我通过 ajax 加载之前一切正常。现在，我根本无法让它工作。关于为什么它不会的任何建议？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T01:53:44.520

您正在加载`#tabSection`元素，这意味着当您尝试连接事件时它不存在。

连接事件时必须存在的元素。使用加载 HTML 的元素。

```
$("#customerForm").on("click", "#tabSection a.tab", function () {
  alert('bob');
}); 
```

# wpf - Excel 文档内容到 Web 服务

> ID：11270839
> 
> 赞同：6
> 
> 时间：2012-06-30T01:50:52.947
> 
> 标签：wpf, linq, web-services, excel, rest

我有一个 wpf 员工创建窗口，我可以在其中创建名字、姓氏等基本信息，这会在我的 REST Web 服务中创建员工。一个例子：

客户端：

```
 private void CreateStaffMember_Click(object sender, RoutedEventArgs e)
    {
        string uri = "http://localhost:8001/Service/Staff";
        StringBuilder sb = new StringBuilder();
        sb.Append("<Staff>");
        sb.AppendLine("<FirstName>" + this.textBox1.Text + "</FirstName>");
        sb.AppendLine("<LastName>" + this.textBox2.Text + "</LastName>");
        sb.AppendLine("<Password>" + this.passwordBox1.Password + "</Password>");
        sb.AppendLine("</Staff>");
        string NewStudent = sb.ToString();
        byte[] arr = Encoding.UTF8.GetBytes(NewStudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show("Staff Creation: Status " + resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

Web服务端：

```
 #region POST

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Staff")]
    void AddStaff(Staff staff);

    #endregion

    public void AddStaff(Staff staff)
    {
        staff.StaffID = (++eCount).ToString();
        staff.Salt = GenerateSalt();
        byte[] passwordHash = Hash(staff.Password, staff.Salt);
        staff.Password = Convert.ToBase64String(passwordHash);
        staffmembers.Add(staff);
    } 
```

在那方面一切都很好，但是我希望从 excel 电子表格中“导入”员工详细信息，不确定导入是否是正确的词，但我想获取此类电子表格中包含的名字和姓氏并将它们添加到来自客户端 wpf 应用程序的 Web 服务。

我该怎么办？我有我的打开文件对话框：

```
 private void Import_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

        // Show open file dialog box
        Nullable<bool> result = dlg.ShowDialog();

        // Process open file dialog box results
        if (result == true)
        {
            // Open document
            string filename = dlg.FileName;
        }
    } 
```

所以我打开我的 excel 电子表格，然后我将如何获取内部内容并将其发送到 Web 服务？真的坚持代码或如何去做：/

只是寻找一种自动添加员工的方式，而不是手动输入姓名，但是看到员工 excel 文档可以命名为任何我想要的打开文件对话框。内部的结构将始终是相同的名字，然后是姓氏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:35:26.923

首先，这是我的测试 Excel 文件，其中包含您要导入的员工： ![在此处输入图像描述](../Images/c8949272315052656e01b26390da6d69.png)

（“A”列是名字，“B”列是姓氏，“C”列是密码……）

好的，假设您的代码调用您的 Web 服务有效，这是我的 Import_Click 方法版本（以及保存新员工的通用方法）：

```
 private void Import_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

        // Show open file dialog box
        Nullable<bool> result = dlg.ShowDialog();

        // Process open file dialog box results
        if (result == true)
        {
            // Open document
            string filename = dlg.FileName;

            Microsoft.Office.Interop.Excel.Application vExcelObj = new Microsoft.Office.Interop.Excel.Application();
            try
            {
                Workbook theWorkbook = vExcelObj.Workbooks.Open(filename, Type.Missing, true);

                Worksheet sheet = theWorkbook.Worksheets[1];  // This is assuming that the list of staff is in the first worksheet

                string vFirstName = "temp";
                string vLastName = "temp";
                string vPassword = "temp";
                int vIndex = 1;

                while (vFirstName != "")
                {
                    // Change the letters of the appropriate columns here!  
                    // In my example, 'A' is first name, 'B' is last name and 'C' is the password
                    vFirstName = sheet.get_Range("A" + vIndex.ToString()).Value.ToString();
                    vLastName = sheet.get_Range("B" + vIndex.ToString()).Value.ToString();
                    vPassword = sheet.get_Range("C" + vIndex.ToString()).Value.ToString();

                    this.SaveNewStaff(vFirstName, vLastName, vPassword);

                    vIndex++;

                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error processing excel file : " + ex.Message);
            }
            finally {
                vExcelObj.Quit();
            }
        }
    }

    private void SaveNewStaff(string firstName, string lastName, string password) {
        string uri = "http://localhost:8001/Service/Staff";
        StringBuilder sb = new StringBuilder();
        sb.Append("<Staff>");
        sb.AppendLine("<FirstName>" + firstName + "</FirstName>");
        sb.AppendLine("<LastName>" + lastName + "</LastName>");
        sb.AppendLine("<Password>" + password + "</Password>");
        sb.AppendLine("</Staff>");
        string NewStudent = sb.ToString();
        byte[] arr = Encoding.UTF8.GetBytes(NewStudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        //MessageBox.Show("Staff Creation: Status " + resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

注意：我已经在调用 Web 服务时对 MessageBox 进行了 REM 处理，以确保如果列表很长，您不会因此而烦恼，但如果您需要确认每个员工的创建，您可以自由地“取消 REM”它。在同一行中，没有验证创建是否成功。我需要更多细节来创建一个体面的验证过程。同样非常重要的是，这并不能验证您要保存的员工是否已经存在于列表中。如果您多次重新运行此导入过程，它可能（并且可能会）创建重复条目。

干杯

# mongodb - 如何在 Play Morphia 中设置 2D 索引？

> ID：11270842
> 
> 赞同：0
> 
> 时间：2012-06-30T01:51:26.973
> 
> 标签：mongodb, playframework, morphia

如何在 play morphia 中设置 2D 索引？

例子：

```
db.places.ensureIndex( { loc : "2d" } ) 
```

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:18:22.670

我假设你的意思是玩 1.2.x。

您还不能从 @Indexed 注释中执行此操作，似乎：[http ://code.google.com/p/morphia/issues/detail?id=290](http://code.google.com/p/morphia/issues/detail?id=290)

你可以用这个有点 hacky [未经测试的] 代码来做到这一点：

```
MorphiaPlugin.ds()
   .getMongo()
   .getDB('dbname')
   .getCollection('places')
   .ensureIndex(BasicDBObject(loc, "2d")); 
```

但正如您所展示的，您可能只想从 shell 中执行此操作。这是一次性的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-02T00:45:12.947

再补充一点，几年后：

```
@Indexes(
        @Index(fields=@Field( value = "location", type= IndexType.GEO2DSPHERE))
) 
```

在`@Entity`类上（如果调用了持有 GeoPoint 的成员`location`）为球形地理空间查询生成正确的索引。

不要忘记将`.near()`方法的第四个参数设置为`true`（球形）。

此外，您应该确保通过`datastore.ensureIndexes()`在查询之前简单地调用来生成索引。

# android - PackageManager.getApplicationIcon() 返回默认图标？

> ID：11270843
> 
> 赞同：5
> 
> 时间：2012-06-30T01:51:30.263
> 
> 标签：android, bitmap, drawable

有没有办法判断我从 getApplicationIcon() 返回的 Drawable 是否是默认/内置图标？

例如，我的模拟器上安装了几个应用程序。“Adobe Reader”具有 Adob​​e 提供的图标。另一方面，“com.android.gesture.builder”和“Sample Soft Keyboard”有一个通用的 Android 图标。这两个包的 getApplicationIcon() 返回不同的 BitmapDrawable 对象，但在这两个对象上运行 getBitmap() 返回相同的 Bitmap 对象 (android.graphics.Bitmap@401a7df8)。

到目前为止，我唯一的想法是做类似[如何预览 R.drawable.* 图像](https://stackoverflow.com/questions/1905128/how-to-preview-r-drawable-images)并获取所有 android.R.drawable 资源，从中创建 Drawables，并检查我是否从 getApplicationIcon（ ) 匹配其中任何一个。不过，这是非常次优的。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T21:22:01.097

我只是想通了。有一个返回 Drawable 的 PackageManager.getDefaultActivityIcon() 方法。如果该 Drawable 的位图与应用程序图标 Drawable 的位图匹配，那么它就是默认图标。

```
PackageManager pm = context.getPackageManager();
Drawable icon = pm.getApplicationIcon(apk.package_name);
Drawable default_icon = pm.getDefaultActivityIcon();
if (icon instanceof BitmapDrawable && default_icon instanceof BitmapDrawable) {
    BitmapDrawable icon_bd = (BitmapDrawable)icon;
    Bitmap icon_b = icon_bd.getBitmap();
    BitmapDrawable default_bd = (BitmapDrawable)pm.getDefaultActivityIcon();
    Bitmap default_b = default_bd.getBitmap();
    if (icon_b == default_b) {
        // It's the default icon
    }
} 
```

# actionscript-3 - addChild 与内部movieClips 通信

> ID：11270850
> 
> 赞同：0
> 
> 时间：2012-06-30T01:54:40.410
> 
> 标签：actionscript-3, flash

我对 AS3 有一些问题。我有一个 Movieclip，我已将它添加到舞台上 `addChild(gameLevelSelect);`。

问题是我里面还有其他的电影剪辑，但不像`addChild(gameLevelSelect);`舞台上的 addChild 那样。我给了一个符号实例名称`stageThumb_01`，但它不起作用。我该如何解决？

这是代码：

```
gameLevelSelect.getChildByName("stageThumb_01").addEventListener(MouseEvent.CLICK, load_Level01);
function load_Level01(e:MouseEvent):void {
    trace("blam")
    gameLevelSelect.getChildByName("stageThumb_01").getChildByName("stars").gotoAndPlay(2);
} 
```

..................................................................

```
gameTitle.addEventListener(Event.ENTER_FRAME, load_LevelSelection);
function load_LevelSelection(event:Event):void {
    if(MovieClip(gameTitle).currentFrame == 22){
        removeChild(gameTitle);
        addChild(gameLevelSelect);

        addChild(thumbLevel01);

        thumbLevel01.getChildByName("stars").gotoAndPlay(1);

        gameLevelSelect.gotoAndPlay(1);

    }
}

var thumbLevel01 = new stageThumb01();
thumbLevel01.x = 83;
thumbLevel01.y = 161;

thumbLevel01.addEventListener(MouseEvent.CLICK, load_Level01);
function load_Level01(e:MouseEvent):void {
    trace("blam")
    //thumbLevel01.getChildByName("stars").gotoAndPlay(2);
} 
```

这行得通，原因是我将 thumbLevel01 设置为 addChild。但这不是我想要的。我在舞台上添加了一个影片剪辑作为 addChild(gameLevelSelect); 在那个movieclip中有动画和按钮而不是做一个链接我想把它作为一个movieclip保存在addChild(gameLevelSelect);中。我想知道的是如何与 addChild(gameLevelSelect); 中具有实例名称的影片剪辑进行通信。我努力了

> gameLevelSelect(theAddClass).getChildByName("thumbLevel01").getChildByName("stars").<..stars 是 thumbLevel01 中的一个movieClip。然后 addEventListener(MouseEvent.CLICK, load_Level01);

[addChild - gameLevelSelect] 。. . . . . . > 带有实例名称的电影剪辑 - thumbLevel01（不添加子项）。. . . . . . . .> 带有实例名称的电影剪辑 - starsMeter（用于得分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:40:22.417

您提出问题的方式非常迟钝，因此我无法深入了解您真正要问的内容，但我怀疑发生的事情是您试图在将孩子添加到之前访问它们您通过代码添加的实例的阶段。

通常，您不想直接访问孩子。相反，您添加的组件应该公开允许您做您需要做的事情的属性和方法，同时还要考虑到如何构建 MC 的具体细节。例如：

```
class ShowMessage extends MovieClip {
  public var tf:TextField;//this is public so the Flash player can fill it, not for external use
  private var _message:String;
  public function get message():String {
      return _message;
  }
  public function set message(value:String):void {
      _message = value;
      if (tf) {
        tf.text = value;
      } 
  }
} 
```

有关处理时间线和 AS 混合的其他方法，请查看[在 Flash 中结合时间线和 OOP](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。

# objective-c - Objective-C 用环形画一个圆

> ID：11270851
> 
> 赞同：0
> 
> 时间：2012-06-30T01:54:40.900
> 
> 标签：objective-c, drawing, quartz-2d, geometry

我写了这个用圆圈绘制动画进度的类（它根据浮动进度绘制圆形扇区）

```
@implementation MXMProgressView

@synthesize progress;

- (id)initWithDefaultSize {
    int circleOffset = 45.0f;
    self = [super initWithFrame:CGRectMake(0.0f,
                                           0.0f,
                                           135.0f + circleOffset,
                                           135.0f + circleOffset)];
    self.backgroundColor = [UIColor clearColor];
    return self;
}

- (void)drawRect:(CGRect)rect {

    CGRect allRect = self.bounds;
    CGRect circleRect = CGRectMake(allRect.origin.x + 2, allRect.origin.y + 2, allRect.size.width - 4,
                                   allRect.size.height - 4);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // background image
    //UIImage *image = [UIImage imageNamed:@"loader_disc_hover.png"]; 
    //[image drawInRect:circleRect];

    // Orange: E27006
    CGContextSetRGBFillColor(context, 
                             ((CGFloat)0xE2/(CGFloat)0xFF),
                             ((CGFloat)0x70/(CGFloat)0xFF),
                             ((CGFloat)0x06/(CGFloat)0xFF),
                             0.01f); // fill

    //CGContextSetLineWidth(context, 2.0);
    CGContextFillEllipseInRect(context, circleRect);
    //CGContextStrokeEllipseInRect(context, circleRect);

    // Draw progress
    float x = (allRect.size.width / 2);
    float y = (allRect.size.height / 2);

    // Orange: E27006
    CGContextSetRGBFillColor(context, 
                             ((CGFloat)0xE2/(CGFloat)0xFF),
                             ((CGFloat)0x70/(CGFloat)0xFF),
                             ((CGFloat)0x06/(CGFloat)0xFF),
                             1.0f); // progress

    CGContextMoveToPoint(context, x, y);
    CGContextAddArc(context, x, y, (allRect.size.width - 4) / 2, -M_PI_2, (self.progress * 2 * M_PI) - M_PI_2, 0);
    CGContextClosePath(context);
    CGContextFillPath(context);
}

@end 
```

现在我想做的是用相同的进度动画绘制一个环形，而不是填充整个圆圈，所以圆形扇区再次不是从圆心开始。

我试过`CGContextAddEllipseInRect`了`CGContextEOFillPath(context);`

没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:37:18.803

我认为您需要构建一个更复杂的路径，例如：

```
// Move to start point of outer arc  (which might not be required)
CGContextMoveToPoint(context, x+outerRadius*cos(startAngle), y+outerRadius*sin(startAngle));
// Add outer arc to path (counterclockwise)
CGContextAddArc(context, x, y, outerRadius, startAngle, endAngle, 0);
// move *inward* to start point of inner arc
CGContextMoveToPoint(context, x+innerRadius*cos(endAngle), y+innerRadius*sin(endAngle));
// Add inner arc to path (clockwise)
CGContextAddArc(context, x, y, innerRadius, endAngle, StartAngle, 1);
// Close the path from end of inner arc to start of outer arc
CGContextClosePath(context); 
```

*注意：我自己没有尝试过上面的代码*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:24:20.983

便宜又讨厌的解决方案：

*   绘制一个实心圆，该圆比原始圆小您要绘制的圆环的厚度。
*   在原始圆圈的顶部绘制这个圆圈，您将看到的动画就是环。

# php - PHP，MySQL - 我自己的 SALT 版本（我称之为 salty） - 登录问题

> ID：11270852
> 
> 赞同：2
> 
> 时间：2012-06-30T01:54:51.293
> 
> 标签：php, mysql, phpmyadmin

好的，我编写了自己的 SALT 版本，我称之为咸味，哈哈，不要取笑我。无论如何，我的脚本的注册部分如下所示是 100% 正确工作的。

```
 //generate SALTY my own version of SALT and I likes me salt.. lol
    function rand_string( $length ) {
        $chars = "ABCDEFGHIJKLMNOPQRSTUWXYZabcdefghijklmnopqrstuwxyz1234567890";
        $size = strlen( $chars );
        for( $i = 0; $i < $length; $i++ ) {
            $str .= $chars[ rand( 0, $size - 1 ) ];
        }
        return $str;
    } 
    $salty = rand_string( 256 );

    //generate my extra salty pw 
    $password = crypt('password');
    $hash = $password . $salty;
    $newpass = $hash;

    //insert the data in the database
    include ('../../scripts/dbconnect.php');

    //Update db record with my salty pw ;)
                                           // TESTED WITH AND WITHOUT SALTY 
                                          //HENCE $password and $newpass
    mysql_query("UPDATE `Register` SET `Password` = '$password' WHERE `emailinput` = '$email'");
    mysql_close($connect); 
```

但是我的 LOGIN 脚本失败了。我将其设置为测试并回显是否登录。它总是返回失败。我进入数据库并将加密的咸密码更改为“测试”，我得到了成功。所以我的问题出在我假设的这个 LOGIN 脚本中。现在我不确定如何在其中实现我的 $Salty。但也请注意，即使没有 SALTY（仅使用 crypt 存储我的通行证） - 我仍然无法成功登录。如果你建议我使用河豚 - 请注意我的虚拟主机不支持它，我不知道如何安装它。

这是我的登录脚本：

```
if (isset($_POST['formsubmitted'])) 
{
include ('../../scripts/dbconnect.php');

$username = mysql_real_escape_string($_POST['username']);
$password = crypt(mysql_real_escape_string($_POST['password']));

$qry = "SELECT ID FROM Register WHERE emailinput='$username' AND Password='$password'"; 
$result = mysql_query($qry);

if(mysql_num_rows($result) > 0) 
{
    echo 'SUCCESS';
    //START SESSION
}
else
{
    echo 'FAILED';
    //YOU ARE NOT LOGGED IN     
}
} 
```

1.  那么这个登录有什么问题呢？为什么仅使用 crypt/storing only crypt 不起作用？

2.  我怎样才能让它同时存储 crypt 和随机生成的 SALTY :) ？

泰前进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:19:14.070

每次运行此代码时，您都会生成一个不同的盐值。所以当密码第一次被存储时，你的盐将是（组成一些例子）`abc`。你加密你的密码（假设它是`123`，附加盐，最后是`123abc`，你存储在数据库中。

当您下次尝试登录时，您会生成一个新的随机盐（例如`456`）。你加密密码，附加盐，现在你得到了`123456`. 还有你的问题。现在你有两个完全不同的字符串，所以你的登录失败了。

您需要将盐与加密文本分开存储，以便稍后再次使用盐。这意味着您的登录脚本首先必须检索与尝试登录的任何用户关联的盐，重新加密/盐他们输入的密码，并查看字符串是否匹配。

从更大的角度来看，您还错误地使用了盐渍。在通过 crypt 运行密码**之前**，必须将盐添加到密码中。盐可以增加暴力破解密码的难度。`123`是一个简单的密码，但`123big_long_ugly_salt_value`不是。

你所做的只是一些无用的随机数生成，只会增加你的 CPU 和存储开销，但对提高安全性没有任何作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T01:58:26.423

因此，在存储中，您要加密“密码”，然后附加 $salty（这是一个 rand_string）

但是，在稍后的密码比较中，您将加密 $_POST['password']，而不是附加相同的随机字符串。所以他们不会是一样的。

不是在每个密码存储过程中随机生成盐，而是最终将盐存储在某个地方，或者从以后可以确保再次找到的东西创建盐，以便在再次登录时进行比较。

如果您希望每个用户使用不同的盐，那么您可以使用用户 ID 或其他一些不会更改为您的盐的信息，关于如何让这个现在工作的一些想法。或者，如果这无关紧要，您可以使用自己的其他随机字符串来使用。

正如马克 B 在他的回答中所说，你应该在加密之前添加盐。在确实不保护密码之后添加它。

使用 crypt 函数时，您可以在函数调用中添加盐：

地穴（$密码，$盐）；

而且我不会真正弄乱密码的 mysql_real_escape_string ，因为您正在加密它。由于您正在加密可能的顽皮字符串，因此不必担心注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:10:48.290

我将对您的代码进行以下调整：

```
function rand_string( $length ) {
    // added period and slash to the alphabet
    $chars = "ABCDEFGHIJKLMNOPQRSTUWXYZabcdefghijklmnopqrstuwxyz1234567890./";
    $size = strlen( $chars );
    for( $i = 0; $i < $length; $i++ ) {
        $str .= $chars[ rand( 0, $size - 1 ) ];
    }
    return $str;
}

// we need 22 random characters
$salty = rand_string(22);
// apply blowfish with cost := 13
$newpass = crypt($password, sprintf('$2y$%02d$%s', 13, $salty)); 
```

这使用 Blowfish 对您的密码进行哈希处理；在强度 13 时完成大约需要 0.5 秒，因此根据您的情况，您可能希望减少它；成本可以更改为较新的密码。

salt 与密码 btw 一起存储，因此无需为此设置另一列。

要验证数据库中的密码，您必须首先从相应`Register`行加载密码字段。

```
if (crypt($_POST['password'], $password_from_db) === $password_from_db) {
    // success
} else {
    // password didn't match
} 
```

顺便说一句，比较函数经常变成一个恒定时间算法来防止定时攻击。

* * *

您的`salty()`函数可以替换为以下等价物以产生 22 char long salts：

```
substr(strtr(base64_encode(openssl_pseudo_random_bytes(18)), '+', '.'), 0, 22); 
```

* * *

另见：[https ://wiki.php.net/rfc/password_hash](https://wiki.php.net/rfc/password_hash)

# ios5 - 尝试使用方法更改单例中的变量

> ID：11270865
> 
> 赞同：0
> 
> 时间：2012-06-30T01:58:36.857
> 
> 标签：ios5, singleton

我正在尝试使用单例来存储将在多个视图控制器中使用的变量。我需要能够获取变量并设置它们。如何在单例中调用方法来更改存储在单例中的变量。

```
 total+=1079;
[var setTotal:total]; 
```

其中 var 是

```
static Singleton *var = nil; 
```

我需要更新总数并发送到单例中的 setTotal 方法。但是当我这样做时， setTotal 方法永远不会被访问。get 方法有效，但 setTotal 方法无效。请让我知道应该怎么做。下面是我的一些源代码

```
 //
//  Singleton.m
//  Rolo
//
//  Created by  on 6/28/12.
//  Copyright (c) 2012 Johnny Cox. All rights reserved.
//

#import "Singleton.h"

@implementation Singleton
@synthesize total,tax,final;

#pragma mark Singleton Methods

+ (Singleton *)sharedManager
{
    static Singleton *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[Singleton alloc] init];
        // Do any other initialisation stuff here
    });
    return sharedInstance;
}

+(void) setTotal:(double) tot
{
    Singleton *shared = [Singleton sharedManager];
    shared.total = tot;
    NSLog(@"hello");
}
+(double) getTotal
{
    Singleton *shared = [Singleton sharedManager];
    NSLog(@"%f",shared.total);
    return shared.total;
}
+(double) getTax
{
    Singleton *shared = [Singleton sharedManager];
    NSLog(@"%f",shared.tax);
    return shared.tax;
}
@end

//
//  Singleton.h
//  Rolo
//
//  Created by  on 6/28/12.
//  Copyright (c) 2012 Johnny Cox. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface Singleton : NSObject
@property (nonatomic, assign) double total;
@property (nonatomic, assign) double tax;
@property (nonatomic, assign) double final;

+ (id)sharedManager;
+(double) getTotal;
+(void) setTotal;
+(double) getTax;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:05:56.687

您尝试将 getter 和 setter 实现为*类方法*而不是*实例方法*。属性是你的单例的属性，而不是它的类。有关objective-c中实例方法与类方法的更多信息，请参见[此处](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/_index.html)或[此处](https://stackoverflow.com/questions/4375443/difference-between-class-methods-and-instance-methods)

你会有更好的运气，比如：

```
-(double) getTotal;
-(void) setTotal:(double) total;
-(double) getTax; 
```

# database - 数据库的可扩展性是否有限制？

> ID：11270868
> 
> 赞同：1
> 
> 时间：2012-06-30T01:59:29.390
> 
> 标签：database, query-optimization

假设数据库越大，SELECT 行所需的时间越长，无论优化程度如何，数据库最终不会花费太长时间（即对用户来说很烦人）来遍历吗？

仅仅是因为时间的增长如此微不足道，以至于只有理论上的限制，而没有现实的限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:26:52.817

嗯，是的，从某种意义上说。通常，您拥有的数据越多，找到所需内容的时间就越长。

有一些方法可以显着减少该时间（索引、分片等），并且您始终可以添加更多硬件。索引尤其使您不必扫描整个表来查找结果。如果你有一个简单的 B 树索引，最坏的情况应该是 O(log n)。

除了理论限制之外，还有一些实际限制，例如每个表的最大行数，但现在这些限制非常高，您几乎可以忽略它们。

我不会担心的。如果您使用的是体面的 DBMS 和体面的硬件......具有真实数量的数据，您总能找到一种方法在可接受的时间内返回结果。如果您确实达到了极限，那么您很可能会从您存储的内容中赚钱，然后您可以随时聘请专业人士来帮助您；）

# xml - SOAP、XML-RPC、JSON 之间有什么区别？

> ID：11270869
> 
> 赞同：4
> 
> 时间：2012-06-30T01:59:37.963
> 
> 标签：xml, json, web-services, soap, xml-rpc

很抱歉问这个问题，但我花了几个小时试图了解它们中的每一个在 Web 服务中的位置。我只是想不通我需要使用什么来创建 Web 服务。

我知道 Web 服务可以是基于 .Net 或 Java 或 PHP 的。假设我想使用 C# 在 .NET 中创建 Web 服务。SOAP、XML-RPC 或 JSON 什么时候出现？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T02:11:12.953

JSON 是表示人类可读数据的标准。它仅代表数据，仅此而已。

SOAP 是一种用于传输信息和调用 Web 服务的协议规范，并使用 XML 对其进行编码。SOAP 通过 HTTP（在其他网络协议中）工作。

XML-RPC 是另一种协议，用于传输信息和调用远程过程。它不通过 HTTP 运行，而是不同的协议、不同的端口等。

因此，SOAP 和 XML-RPC 之间的主要区别在于前者封装在​​ HTTP 内部，而后者则没有。JSON 是完全不同的东西。

# ruby-on-rails - Gem 在 Rails 应用程序中不可用，但在 Rails 控制台（IMGKit）中工作正常

> ID：11270872
> 
> 赞同：3
> 
> 时间：2012-06-30T02:01:43.280
> 
> 标签：ruby-on-rails, ruby, rvm, bundler

尝试在我的 Rails 控制器之一中创建 IMGKit 实例：

```
def wkhtmltoimage
  ...
  kit = IMGKit.new("http://#{request.host_with_port}/?auth_token=" + token)
  img = kit.to_img(:jpg)
  file = kit.to_file(Rails.root + "public/uploads/testimage.jpg")
  ...
end 
```

当我加载页面时，我得到这个：

```
NameError in PagesController#wkhtmltoimage

uninitialized constant PagesController::IMGKit 
```

在我的 Gemfile 中，我包含了正确的 gem：

```
gem 'imgkit' 
```

Bundler 安装得很好。当我运行 Rails 控制台时，它就在那里并且可以工作：

```
1.9.3p194 :005 > IMGKit.new("http://google.com")
 => #<IMGKit:0x007fb08d16a658 @source=http://google.com, @stylesheets=[], @options={}> 
1.9.3p194 :006 > 
```

为什么 IMGKit 类可以在 Rails 控制台中工作，但不能在应用程序中工作？有什么建议么？使用 RVM、Pow、Rails 3.2.6（以及所有其他 gem 都可以在该设置下正常工作）。

## 编辑答案

重新启动 pow 服务器似乎已经解决了这个问题。只需输入终端：

```
touch tmp/restart.txt 
```

那应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:29:34.093

重新启动 pow 服务器似乎已经解决了这个问题。只需输入终端：

```
touch tmp/restart.txt 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:47:29.133

您将套件设置为控制器中的局部变量。您是否尝试将其设置为控制器中的实例变量（@kit）？

# xcode - 为什么我的代表没有收到这个选择器？

> ID：11270877
> 
> 赞同：0
> 
> 时间：2012-06-30T02:03:55.573
> 
> 标签：xcode

我有一个我不明白的错误。

我有一门课来帮助打印作业：

```
//.h

@interface PrintDelegate : NSObject <UIPrintInteractionControllerDelegate, UIAlertViewDelegate>

@property (weak, nonatomic) FFDetailViewController* controller;
@property (strong, nonatomic) NSMutableData*    pdf;
@property (assign) int          pageCount;
@property (strong, nonatomic) NSArray*          fields;
@property (weak, nonatomic)   UIPrintInteractionController* printController;

- (id) initWithPageCount:(int)pc forFields:(NSArray*)flds Controller:(FFDetailViewController*)ctlr;
- (int) printFromButton: (UIBarButtonItem*) btn;
- (void) makePDF;
- (void) shift:(PixelShiftDirection)dir pixelCount:(int)amt;
- (void) adjustFields;
- (void) onPrintComplete;

@end 
```

打印完成后，我会显示一条警报，询问用户是否要调整打印输出（并再次打印）。

```
//.m
- (void) onPrintComplete
{
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Printing Complete" message:@"Would you like to adjust the field positions?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Adjust", nil];

    [alert show];
}

- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString* clickedButton = [alertView buttonTitleAtIndex:buttonIndex];

    if ([clickedButton isEqualToString:@"Adjust"]) 
    {
        [self adjustFields];
    }
} 
```

当我点击警报中的任一按钮时，我会收到类似于此的错误：

```
-[__NSArrayM alertView:clickedButtonAtIndex:]: unrecognized selector sent to instance 
```

接收错误选择器的对象总是很奇怪，（我也见过**NSCFArrayM 和 __NSMallocBlock**）。选择器是来自 UIAlertViewDelegate 协议的方法。我不明白为什么选择器被发送到一些不正确的对象而不是我的 PrintDelegae 对象。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:14:54.813

简短的回答是您很可能没有`PrintDelegate`正确保留。较长的版本是您应该检查`PrintDelegate`实例的生命周期。它需要足够长的时间来处理 clickedButton 回调。`PrintDelegate`您可以尝试在'方法中设置断点，`-dealloc`然后查看何时以及如何调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:15:23.320

`__NSArrayM`是一个可变数组。要么您将错误的对象作为委托传递，要么在调用委托方法之前将其释放、解除分配、重新分配和重新初始化。由于您还得到`NSCFArrayM`另一个可变数组和`__NSMallocBlock`，我推断它是一个已分配但尚未初始化的内存块，我建议使用第二个。在创建警报视图和关闭它之间检查您的内存管理。您可能想尝试 XCode 分析和剖析工具，它们出奇的好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:09:48.170

您发布的代码对我来说看起来不错（尽管 UIAlertView 最终可能会泄漏）。根据您对错误的描述，可能是您有一些堆损坏，这可能是由于多次释放指向同一对象的指针而引起的。

# javascript - 禁用 Shadowbox.js 的右键单击

> ID：11270879
> 
> 赞同：3
> 
> 时间：2012-06-30T02:04:55.660
> 
> 标签：javascript, right-click, shadowbox

我目前在我的画廊中使用[Shadowbox.js](http://www.shadowbox-js.com/)，我想在访问者查看全尺寸图像时禁用右键单击。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:27:24.470

您可以执行以下操作来专门针对[Shadowbox.js](http://www.shadowbox-js.com/)，并在页面的其余部分保持上下文菜单不变。

## jQuery 1.7+

```
$(function(){
    $('#sb-wrapper').on('contextmenu', function(){return false;});
}); 
```

## jQuery 1.6

```
$(function(){
    $('#sb-wrapper').live('contextmenu', function(){return false;});
}); 
```

## 本国的

```
//Should be executed as part of the window.onload method 
document.getElementById('sb-wrapper').oncontextmenu = function(){return false;} 
```

## 演示

[在http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)上的 Chrome 控制台中执行 Native 语句

# ruby - Ruby Sinatra + Sequel 约束错误处理

> ID：11270880
> 
> 赞同：0
> 
> 时间：2012-06-30T02:05:34.427
> 
> 标签：ruby, orm, sqlite, sinatra, sequel

在 Sequel 中处理来自模型的异常的正确方法是什么？特别是我遇到的事情是将唯一约束应用于登录时。这种情况下的异常似乎来自 SQLite 本身而不是 Sequel，这意味着它没有被“错误”处理。

这是我在尝试使用“非唯一”登录创建用户后遇到的错误：

```
Sequel::DatabaseError at /user/create
SQLite3::ConstraintException: column login is not unique
file: database.rb location: close line: 97 
```

这是我的缩写代码：

```
require 'sinatra'
require 'sequel'

DB.create_table :users do
  primary_key :id
  String :login, :key => true, :length => (3..40), :required => true, :unique => true
  String :hashed_password, :required => true
  String :salt
  DateTime :created_at, :default => DateTime.now
end

class User < Sequel::Model
  # password authentication code
end

get '/user/create' do
  slim :user_create
end

post '/user/create' do
  user = User.new
  user.login = params['login']
  user.password = params['password']
  if user.save
    'User created'
  else
    tmp = []
    user.errors.each do |e|
      tmp << (e.join('<br/>'))
    end
    tmp
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:43:09.153

您可能想要使用 validation_helpers 插件并`validates_unique :login`在 validate 方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-14T09:12:59.727

首先 - 使用验证插件

```
# models/account.rb
Sequel::Model.plugin :validation_helpers

class Account < Sequel::Model
  def validate
    super
     validates_unique :login
  end
end 
```

下一步 - 处理应用程序中的错误

```
# app.rb
... 
begin
  Account.create
rescue => e
  # do what you need
end
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T17:31:35.927

添加以下代码以处理 sinatra 中的后续错误。

sinatra 中的错误块将处理在您的一条路线中引发的任何错误。您可以在第一行中指定错误的类型，以便仅处理这些类型的错误。

```
error Sequel::Error do
  e = env['sinatra.error']
  content_type :json
  status(400)
  return {
    message: e.message
  }.to_json
end 
```

如果您想处理所有错误，您将插入以下代码块。

```
error Exception do
  e = env['sinatra.error']
  content_type :json
  status(400)
  return {
    message: e.message
  }.to_json
end 
```

您可以组合其中的许多块，以便以不同的方式处理不同类型的错误。

# ruby-on-rails - Rails 在 PHP 中的迁移

> ID：11270884
> 
> 赞同：1
> 
> 时间：2012-06-30T02:06:27.020
> 
> 标签：ruby-on-rails, migration, rake

是否有可能解除 Rails 的迁移并将其直接粘贴到 PHP 应用程序中（并使用 rake 命令等运行它）？

我一直在研究 PHP 等价物，但我对它们并不完全满意，所以我认为应该有一种方法可以提取 Rails 的版本并将其粘贴在我的应用程序的文件结构中的某个位置。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:09:32.813

你当然可以编写一个只有迁移的小 Rails 应用程序——迁移并不关心最终使用他们创建的表的结果。通过更多的工作，您应该能够制作仅使用 activerecord 和 activesupport gem 的东西，而不需要整个 rails 应用程序。

# actionscript-3 - addEventListener() 未检测到 KEY_UP 或 KEY_DOWN

> ID：11270886
> 
> 赞同：0
> 
> 时间：2012-06-30T02:06:57.470
> 
> 标签：actionscript-3, flash, keyboard, flash-cs5

我的完整代码是 import flash.events.KeyboardEvent; 导入 flash.events.Event；

```
//init some variables
var speedX = 0;
var speedY = 0;
msg.visible = false;
var curLevel = 2;
var level = new Array();
var flagVar;
var won = false;

//Adding level platforms
for(var i = 0; i < numChildren; i++) {
    if(getChildAt(i) is platform) {
        level.push(getChildAt(i).getRect(this));
    }
    if(getChildAt(i) is flag) { flagVar = getChildAt(i).getRect(this); }
}

//Checking key presses
var kUp     = false;
var kDown   = false;
var kLeft   = false;
var kRight  = false;
var kSpace  = false;

stage.addEventListener(KeyboardEvent.KEY_DOWN, kD);
stage.addEventListener(KeyboardEvent.KEY_UP, kU);

function kD(k:KeyboardEvent) {
    trace("Key down - " + k.keyCode);
    if(k.keyCode == 32) { kSpace    = true; }
    if(k.keyCode == 37 ) { kLeft    = true; }
    if(k.keyCode == 38) { kUp       = true; }
    if(k.keyCode == 39) { kRight    = true; }
}

function kU(k:KeyboardEvent) {
    trace("Key up - " + k.keyCode);
    if(k.keyCode == 32) { kSpace    = false; }
    if(k.keyCode == 37) { kLeft     = false; }
    if(k.keyCode == 38) { kUp       = false; }
    if(k.keyCode == 39) { kRight    = false; }
}

addEventListener(Event.ENTER_FRAME, loopAround);
function loopAround(e:Event) {

    //horizontal movement
    if(kLeft) {
        speedX = -10;
    } else if(kRight) {
        speedX = 10;
    } else {
        speedX *= 0.5;
    }

    player.x += speedX;

    //horizontal collision checks
    for(var i = 0; i < level.length; i++) {
        if(player.getRect(this).intersects(level[i])) {
            if(speedX > 0) {
                player.x = level[i].left - player.width;
            }
            if(speedX < 0) {
                player.x = level[i].right;
            }

            speedX = 0;
        }
    }

    //vertical movement
    speedY += 1;
    player.y += speedY;
    var jumpable = false;

    //Vertical collision
    for(i = 0; i < level.length; i++) {
        if(player.getRect(this).intersects(level[i])) {
            if(speedY > 0) {
                player.y = level[i].top - player.height;
                speedY = 0;
                jumpable = true;
            }
            if(speedY < 0) {
                player.y = level[i].bottom;
                speedY *= -0.5;
            }
        }
    }

     //JUMP!
    if((kUp || kSpace) && jumpable) {
        speedY=-20;
    }

    //Moving camera and other
    this.x = -player.x + (stage.stageWidth/2);
    this.y = -player.y + (stage.stageHeight/2);
    msg.x = player.x - (msg.width/2);
    msg.y = player.y - (msg.height/2);

    //Checking win
    if(player.getRect(this).intersects(flagVar)) {
        msg.visible = true;
        won = true;
    }

    //Check for next level request
    if(kSpace && won) {
        curLevel++;
        gotoAndStop(curLevel);
        won = false;
    }
} 
```

有问题的部分是 //Checking key presses var kUp = false; var kDown = 假；var kLeft = 假；var kRight = 假；var kSpace = 假；

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, kD);
stage.addEventListener(KeyboardEvent.KEY_UP, kU);

function kD(k:KeyboardEvent) {
    trace("Key down - " + k.keyCode);
    if(k.keyCode == 32) { kSpace    = true; }
    if(k.keyCode == 37 ) { kLeft    = true; }
    if(k.keyCode == 38) { kUp       = true; }
    if(k.keyCode == 39) { kRight    = true; }
}

function kU(k:KeyboardEvent) {
    trace("Key up - " + k.keyCode);
    if(k.keyCode == 32) { kSpace    = false; }
    if(k.keyCode == 37) { kLeft     = false; }
    if(k.keyCode == 38) { kUp       = false; }
    if(k.keyCode == 39) { kRight    = false; }
} 
```

昨晚工作得很好，但今天我把它移到一个新的关键帧上，现在它不工作了。我没有收到任何错误（即使我调试）。它只是不会移动角色，甚至不会出现在输出中。

我对as3还是很陌生，所以我真的不知道该怎么做。

提前致谢。

**编辑**：玩了一下之后，我发现它不起作用的原因是菜单。菜单有一个按钮和两个文本元素，这很好。我在菜单上使用的代码是这样的：

```
import flash.events.MouseEvent;

stop();

var format:TextFormat = new TextFormat();
format.size = 26;
format.bold = true;
playGameButton.setStyle("textFormat", format);

stage.addEventListener(MouseEvent.CLICK, playGame);
function playGame(e:MouseEvent) {
    if(e.target.name == "playGameButton") {
        gotoAndStop(2);
    }
} 
```

如果我只使用`gotoAndStop(2);`它可以正常工作，但其他所有内容都会进入第二帧，之后就没有其他工作了。

**编辑＃2**：我已经将其范围缩小到 if 语句本身。

```
if(e.target == playGameButton)

if(e.target.name == "playGameButton") 
```

这两个都不行。如果我只是一起删除 if 语句，它就可以很好地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T16:54:06.930

这条线似乎有问题

```
if(getChildAt(i) is platform) 
```

导致错误 1067：将 flash.display:MovieClip 类型的值隐式强制转换为不相关的类型 Class

其余的代码似乎还不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:14:49.393

尝试`e.currentTarget`代替`e.target`. 从[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html)中：

> currentTarget : Object [只读]​​ 使用事件侦听器主动处理 Event 对象的对象。
> 
> target : Object [只读]​​ 事件目标。

我不太确定这是你的问题，但`target`vs的`currentTarget`困惑已经让我感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:43:54.927

尝试禁用您的按钮 mouseChildren。

```
playGameButton.mouseChildren = false; 
```

# objective-c - UITableView reloadRowsAtIndexPaths 和 cellForRowAtIndexPath

> ID：11270889
> 
> 赞同：0
> 
> 时间：2012-06-30T02:07:02.330
> 
> 标签：objective-c, ios, uitableview

我有一个计时器，它调用下面的代码在我的分组 UITableView 的第二部分重新加载一个单元格。除非我向上滚动屏幕以使第一部分/单元格不可见，否则它工作得很好。一旦它“弹回”到正确的位置，我就会看到应该出现在第 0 节中的文本已经出现在第 1 节中，反之亦然。

```
 [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:1]] withRowAnimation:UITableViewRowAnimationNone]; 
```

reloadRowsAtIndexPaths 或 cellForRowAtIndex 路径是否从完整（可见或不可见）单元格的顶部开始工作，还是仅从屏幕上可见的单元格开始工作？换句话说，第 0 部分实际上是否会根据它在屏幕上是否可见而改变？

还有什么会导致 cellForRowAtIndexPath 将错误的数据加载到单元格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:07:28.713

好的，我对您的项目进行了一些尝试，以下是我的建议：

当您将按钮添加到单元格时，请记住在您不想使用它时将其删除（当您刷新单元格时，基本上您创建一个新单元格，并存储第二个以重复使用，所以如果您向下滚动并然后，您将重用该单元格作为名称的单元格）。

```
 if (cell == nil) 
  {
       cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
  }  
 [[cell viewWithTag:2] removeFromSuperview]; 
```

为此，您必须为按钮设置相应的标签：

```
 myButton1.tag = 2;
  [cell addSubview:myButton1]; 
```

而且，将按钮直接添加到单元格，而不是 contentView （这对我有用，我不知道为什么）。

**编辑**：我上传了您项目的固定版本，[下载它](http://bit.ly/LOcoZL)。

# objective-c - reloadData 不调用 cellforrowatindexpath

> ID：11270894
> 
> 赞同：0
> 
> 时间：2012-06-30T02:07:52.390
> 
> 标签：objective-c, call, reloaddata

也许这是一个相似的开始，但这是真的。

首先很抱歉，如果格式不正确，第一次这样做。很长一段时间以来，我一直在使用 stackoverflow 来寻求帮助，它非常有帮助（谢谢大家），但这是我第一次发布自己的问题。这个问题已经被问过很多次了，但是当我调用 [self.tableView reloadTable] 时，方法 numberOfSectionsInTableView 和 numberOfRowsInSection 被调用但不是 cellForRowAtIndexPath。

我在搜索时看到的每个答案都是以下内容的变体：

1.  表视图是`nil`
2.  `numberOfRowsInSection`是 0
3.  未设置 tableView 的委托/数据源。这些都不是我的情况，所以我想知道还有什么问题。

但我不确定 4\. 在错误的 uiTableView 上调用 reloadTable。或者它是关于其他一些错误的。

现在我的APP类似于*dropbox*，首先当我们登录它时，我们在TableView中得到一个文件列表（包括目录）。另外，我在视图底部添加了一个工具栏`[self.navigationController.view addSubview:toolBar]`，当我触摸按钮项目“刷新"，它调用`[self.tableView reloadData]`并且运行良好。

其次，当我们选择一个目录时，我们会得到一个新的文件列表表，它是`pushViewController`by `self.navigationController`，但是这次当我们触摸“刷新”时，语句 [self.tableView reloadData] 调用 numberOfSections，numberOfRows，而不是 cellForRowAtIndexPath

关于为什么第二次不调用 cellForRow 的任何想法？提前致谢。

```
FileListViewController.h
@interface FileListViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource>    

FileListViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (isDir) {       
        FileListViewController *fileListViewController = [[FileListViewController alloc] init];
        [self.navigationController pushViewController:fileListViewController animated:YES];
    }
}

- (void)refresh
{
    [Utilities refresh];//Utilities is my custom class.

    [self viewDidLoad];
    [self.tableView reloadData];
} 
```

我在表格视图中返回的部分和行数不是 0。

当我添加`NSLog(@"Calling reloadData on %@", self.tableView);`到“刷新”中时：

```
- (void)refresh
{
    [Utilities refresh];//Utilities is my custom class.

    [self viewDidLoad];
    NSLog(@"Calling reloadData on %@", self.tableView);
    [self.tableView reloadData];
} 
```

然后它返回 Calling reloadData on ; 内容偏移：{0, 0}>。委托：FileListViewController，数据源：FileListViewController

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:29:33.677

您不应该手动调用`[self viewDidLoad]`. 此方法旨在被覆盖，并自动调用。有关更多信息，请[阅读此文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidLoad)。

# python - 列出python中的切片错误

> ID：11270895
> 
> 赞同：0
> 
> 时间：2012-06-30T02:09:11.557
> 
> 标签：python, python-2.7

我想我的问题不在于方法，而在于切片列表（例如列表 [2:5]）。当代码实际运行时，它并没有在正确的位置切割列表。该程序试图猜测用户给它的数字。它是使用随机模块执行此操作的，我知道这可能不是最好的方法，但我正在试验。

编码：

```
import random

number = input('Pick a number from 1-100 for the computer to guess, \nand find out how many tries it takes the computer: ')

print number

possibilities = range(101)

del possibilities[0]

tries = 1

guess = random.choice(possibilities)

print "\n", guess

while guess != number:
    if guess > number:
        possibilities = possibilities[:(guess-1)]
    else:
        possibilities = possibilities[(guess-1):]
    print possibilities
    guess = random.choice(possibilities)
    print guess
    tries += 1 
```

错误示例：

程序的输出，来自上面的打印语句。我还想提一下，它并不总是出现故障，大约 50-60% 的时间可以正常工作。此外，不仅仅是我输入的数字，例如，45 可能工作正常，或者可能会像下面那样失败，这似乎是一个非常随机的事件。

初始输入 45：

45

30 [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79、80、81、82、83、84、85、86、87、88、89、90、91、92、93、94、95、96、97、98、99、100]

88 **初始错误**（程序应该在 88 之后切断列表） [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97、98、99、100]

54 [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82] 40 **致命错误**（它切断了列表，删除了它正在“寻找”的数字）[69,70,71,72,73,74,75,76,77,78, 79, 80, 81, 82] 72 [69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82]

初始输入 6：

```
6

48
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47]
9
[1, 2, 3, 4, 5, 6, 7, 8]

5  **Initial Error** (the program should have eliminated 5 from the list below this line)
[5, 6, 7, 8]

5  **Fatal Error** (the program deleted the rest of the list)
[]

Traceback (most recent call last):
  File "C:\Users\Joseph\Documents\Programming fun\computer guessing a number game.py", line 32, in <module>
    guess = random.choice(possibilities)
  File "C:\Python27\lib\random.py", line 274, in choice
    return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
IndexError: list index out of range 
```

我想知道 Python 为什么要这样做，以及它是否可以避免。我不认为我的代码有问题，在我看来，Python 只是没有按应有的方式工作，但我对编程非常陌生，所以我不确定我是否遗漏了什么。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:14:41.353

当你这样做时`guess = random.choice(possibilities)`，你会从列表中获取一个值，但是当你这样做时你将它用作索引`possibilities = possibilities[:(guess-1)]`：在循环几次后，您的列表中的值超出了索引范围：

```
[80, 81, 82, 83, 84, 85, 86, 87] 
```

当你从这里选择一个值（比如 85），然后 do `possibilities = possibilities[85:]`，你会得到一个空列表。

你需要坚持索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:17:24.883

您将这些值`possibilities`与它们的索引混淆了。`mylist[:i]`表示“mylist 中直到第 i 个元素的所有值”，而不是“直到具有值 i 的元素”。

最初，混淆索引和值不会导致问题，因为您的列表值（几乎，因为您跳过 0）等于它们的索引。但是当您开始切割列表的各个部分时，您会遇到列表比其中的某些值短的情况。例如，当 80 以下的所有内容都已被删除并且您猜测为 90 时，`possibilities[90:]`尝试从长度为 20 的列表中访问第 90 个元素。当然，这是行不通的。

试试这个：

```
i = possibilities.index(guess)    
possibilities = possibilities[:(i-1)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:25:14.613

切片由*索引*而不是元素的值定义。如果您有一个列表切片`x[a:b]`，它给出了一个列表，其中`a`第 th 项后跟第`a+1`th 项，直到但不包括第`b`th 项。如果`b`小于或等于`a`结果将为空。如果`b`大于或等于列表中的项目数，`a`则将包含 th 之后的每个项目。如果省略第一个数字，则假定为 0，如果省略第二个数字，则假定列表中的项目数。这是一个不使用列表中的数字以避免混淆的示例：

```
x = ['a','b','c','d','e','f','g']
print x[3:] # prints ['d','e','f','g']
print x[:2] # prints ['a','b']
print x[1:4] # prints ['b','c','d'] 
```

如果您在切片中使用负数，则列表的长度将被添加到数字以确定最终索引。

为了让您的代码正常工作并仍然使用切片来优化可能性列表，有一种`index`列表方法可以提供作为参数传递的项目的索引（当然）。因此，对于您的程序，您可以更改要读取的行

```
if guess > number:
    possibilities = possibilities[:possibilities.index(guess)]
else:
    possibilities = possibilities[possibilities.index(guess):] 
```

编写猜测数字类型程序的更好方法是只使用两个变量`hi`，并`lo`分别跟踪答案可能的最大和最小数字。如果答案大于猜测，则设置`lo`为猜测加一，如果答案小于猜测，则设置`hi`为猜测减一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T02:14:55.633

When "5" is selected, this code will remove from the fifth position onwards. 您的数组只有四个元素，所以这意味着所有元素。

# android - 如何通过单击通知来执行方法

> ID：11270898
> 
> 赞同：34
> 
> 时间：2012-06-30T02:09:50.170
> 
> 标签：android, notifications

我有一个带有两个按钮的应用程序。一个“关闭”应用程序的按钮和一个开始算法的按钮。当我单击“开始”时，它会“隐藏”应用程序并在通知栏中显示通知。单击/按下通知时，我需要能够执行/调用方法。这类问题有几个答案，但它们非常模糊，只有一个指向 BroadcastReceiver 上的文档的链接。

如果您要在 BroadcastReceiver 文档中留下 URL 并说“阅读此页面”，请不要回复此问题。如果你要解释我如何使用 BroadcastReceiver 来执行一个方法（在显示通知的同一个类中），请给我一些代码来说明如何做到这一点。

我的算法：按下按钮，显示通知，点击通知，调用方法（不显示活动）。而已。

如果不可能，请告诉我。如果是的话，请告诉我你会做些什么来使它成为可能。android sdk 的开发人员不应该忽视这么简单的事情。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-04-07T03:26:59.607

经过几次反复试验和错误，我终于找到了一种相当简单明了的方法来在单击通知的操作时运行任意方法。在我的解决方案中，有一个类（我将其称为 NotificationUtils）创建通知，还包含一个 IntentService 静态内部类，该类将在单击通知上的操作时运行。这是我的 NotificationUtils 类，然后是对 AndroidManifest.xml 的必要更改：

```
public class NotificationUtils {
    public static final int NOTIFICATION_ID = 1;

    public static final String ACTION_1 = "action_1";

    public static void displayNotification(Context context) {

        Intent action1Intent = new Intent(context, NotificationActionService.class)
            .setAction(ACTION_1);

        PendingIntent action1PendingIntent = PendingIntent.getService(context, 0,
                action1Intent, PendingIntent.FLAG_ONE_SHOT);

        NotificationCompat.Builder notificationBuilder =
                new NotificationCompat.Builder(context)
                        .setSmallIcon(R.drawable.ic_launcher)
                        .setContentTitle("Sample Notification")
                        .setContentText("Notification text goes here")
                        .addAction(new NotificationCompat.Action(R.drawable.ic_launcher,
                                "Action 1", action1PendingIntent));

        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);
        notificationManager.notify(NOTIFICATION_ID, notificationBuilder.build());
    }

    public static class NotificationActionService extends IntentService {
        public NotificationActionService() {
            super(NotificationActionService.class.getSimpleName());
        }

        @Override
        protected void onHandleIntent(Intent intent) {
            String action = intent.getAction();
            DebugUtils.log("Received notification action: " + action);
            if (ACTION_1.equals(action)) {
                // TODO: handle action 1.
                // If you want to cancel the notification: NotificationManagerCompat.from(this).cancel(NOTIFICATION_ID);
            }
        }
} 
```

现在只需在 onHandleIntent 中实现您的操作，并将 NotificationActionService 添加到`<application>`标签内的清单中：

```
<service android:name=".NotificationUtils$NotificationActionService" /> 
```

**概括：**

*   创建一个将创建通知的类。
*   在该类中，添加一个 IntentService 内部类（*确保它是静态的，否则您将收到一个神秘的错误！*），它可以根据单击的操作运行任何方法。
*   在清单中声明 IntentService 类。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-30T04:19:59.750

在通知单击时，我们无法获得任何触发事件或任何单击侦听器。当我们在通知栏中添加通知时，我们可以设置一个待处理的意图，它会在点击通知时触发一个意图（活动/服务/广播）。

我有一个适合您的解决方案，如果您真的不想显示您的活动，那么将以待定意图开始的活动从那里向您的父活动发送广播，然后完成待定活动，然后一旦广播接收器在父活动中接收接收器中您想要的任何方法。供你参考..

```
// This is what you are going to set a pending intent which will start once
// notification is clicked. Hopes you know how to add notification bar. 
Intent notificationIntent = new Intent(this, dummy_activity.class);
notificationIntent.setAction("android.intent.action.MAIN");
notificationIntent.addCategory("android.intent.category.LAUNCHER");
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                                notificationIntent,
                                PendingIntent.FLAG_UPDATE_CURRENT | 
                                Notification.FLAG_AUTO_CANCEL);

// Now, once this dummy activity starts send a broad cast to your parent activity and finish the pending activity
//(remember you need to register your broadcast action here to receive).
    BroadcastReceiver call_method = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action_name = intent.getAction();
                if (action_name.equals("call_method")) {
                    // call your method here and do what ever you want.
                }
            };
        };
        registerReceiver(call_method, new IntentFilter("call_method"));
    }
} 
```

# iphone - iPhone：如何为路径由用户输入确定的 CAShape 线设置动画

> ID：11270899
> 
> 赞同：0
> 
> 时间：2012-06-30T02:10:22.600
> 
> 标签：iphone, objective-c, animation, calayer, cabasicanimation

我试图复制有时会出现在政治辩论中的“蠕虫”，以代表观众对候选人回答问题的看法。它基本上是一条沿 x 轴动画表示时间的线，在 y 轴上下表示意见。

我看到我可以通过

1.  创建 UIBezierPath 并将其 moveToPoint/addLineToPoint 方法与预定义的一组坐标一起使用。
2.  创建一个 CAShapeLayer 并将其路径属性设置为上面的 UIBezierPath。
3.  创建一个 CABasicAnimation 并将其添加到 CAShapeLayer。

这一切都很好，但我需要通过用户输入实时影响线条（点击按钮向上或向下移动线条），这意味着在上面的第一步中我不能有一组预定义的坐标。该线应该水平移动，除非它接收到用户的输入以使其也垂直移动。

所以我的问题是我该怎么做？我仍然可以以某种方式使用我在上面的要点中描述的方法并进行一些修改，还是我必须使用不同的方法？

非常感谢您的任何建议！

[编辑]

我只是有一个想法，这可能有效，但效率有点低，我不确定创建的路径是否会很短，即不是从起点开始的完整路径，而是当前绘制的路径部分？！如果我做了以下事情怎么办：

*   创建两个变量*lastPoint*和*currentPoint*；
*   重复调用执行以下操作的绘制方法
    1.  [路径 moveToPoint: lastPoint];
    2.  [路径 addLineToPoint: currentPoint];
    3.  最后一个点 = 当前点；
    4.  currentPoint = [self calculateNewPointFromUserInput];
    5.  重复;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:40:02.863

两点对您来说非常短，您可以获取用户的触摸事件数组，然后从数组中绘制最后 10-15 个点。我认为这将达到您的目的。

# javascript - 为什么这个悬停事件会在页面加载时触发？

> ID：11270902
> 
> 赞同：0
> 
> 时间：2012-06-30T02:11:51.940
> 
> 标签：javascript, jquery, css, jquery-ui, animation

这是我的旧代码，它有效：

```
$('.logo').hover(function(){
  $(this).addClass('animated swing')},
  function(){$(this).removeClass('animated swing')
}); 
```

这是我试图重构的新代码。问题是它在页面加载时添加了“动画摆动”类（我没有将鼠标悬停在徽标上）。

```
$('.logo').on('hover').toggle( function() { $(this).toggleClass('animated swing') }); 
```

它也不会超过第一次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:18:05.383

您必须更改您的代码。on 接受 2 个参数，事件和要执行的函数。它应该是这样的：

```
$('.logo').on('hover', 
    $(this).toggle( function() { $(this).toggleClass('animated swing') });
); 
```

当您在现实中使用 .on('hover').toggle(...) 时，您将元素向前传递，而不是将该函数应用于“悬停”侦听器，因此它会在解释时执行（从而触发动画只要该行被解释而不是等待鼠标悬停事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:17:55.597

干得好：

```
$('.logo').on('hover', function() { $(this).toggleClass('animated swing') }); 
```

此外，我不确定带有空格的类是否是个好主意。试试`animated-swing`吧。

# javascript - 调整应用程序的画布大小

> ID：11270906
> 
> 赞同：0
> 
> 时间：2012-06-30T02:13:55.890
> 
> 标签：javascript, facebook, facebook-canvas

我们一直在尝试为画布应用程序设置高度，但没有运气。

这是我们正在使用的代码

```
window.fbAsyncInit = function()
{
// assume we are already logged in
FB.init({appId: '<?=$fb_app_id ?>', xfbml: true, oauth : true,cookie: true});
FB.Canvas.setAutoGrow();
}
function sizeChangeCallback() {
FB.Canvas.setSize({ width: 810, height: 950);
} 
```

我们都尝试了没有 sizechangecallback

我们的设置设置为 Fixed 和 Fixed 950

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:38:57.940

在应用程序设置中设置固定高度参数后，
您可以调用`FB.Canvas.setSize`更改页面高度。

如果您的页面高度动态变化，您可以运行`FB.Canvas.setDoneLoading`
检查 Canvas 是否已加载并运行`FB.Canvas.setAutoGrow`。

```
window.fbAsyncInit = function() {
    // assume we are already logged in
    FB.init({ appId: '<?=$fb_app_id ?>', xfbml: true, oauth: true, cookie: true });

    FB.Canvas.setSize({ width: 810, height: 950 });

    FB.Canvas.setDoneLoading( function(response) {
        console.log(response.time_delta_ms);
        FB.Canvas.setAutoGrow();
    });
} 
```

FB 文档：[https ://developers.facebook.com/docs/reference/javascript/FB.Canvas.setDoneLoading/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setDoneLoading/)

# magento - Magento - 通过额外的步骤或问题扩展购物车

> ID：11270912
> 
> 赞同：0
> 
> 时间：2012-06-30T02:15:42.037
> 
> 标签：magento

是否有“购物车属性”之类的东西来允许购物车自定义？

基本上我需要客户在发布订单之前回答一个问题，例如：

**如果您订单中的一件或多件商品不可用，您希望我们怎么做？**

1.  请选择一个答案
2.  向您发送相似的颜色或型号。
3.  联系您讨论更多选择。
4.  仅取消“仅”丢失的物品并退还您的信用卡。
5.  取消整个订单并退还您的信用卡。

这可能是一个下拉菜单或一些单选按钮。考虑到我的 php sills 不是那么好，这个想法是使用一些内置功能或扩展。

提前致谢;

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T11:54:21.860

我认为一个好主意是使用magento poll。

# jquery - Ruby 到 Javascript 参数

> ID：11270920
> 
> 赞同：1
> 
> 时间：2012-06-30T02:18:34.993
> 
> 标签：jquery, ruby, ruby-on-rails-3, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 Rails 开发应用程序。使用我的模型进行操作后，我想向我的 javascript/jQuery 函数（UI 的库函数等）发送一些参数

我能想到的唯一方法是构建一个隐藏的 div 并填充其中的值。这样当文档加载时，onload 函数可以对其进行处理并依次调用其他函数。

有人可以建议我这样做的更好方法。

干杯! 苯胺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:56:59.273

要扩展 @mu 的评论，`script`标签是有效的 html，对吗？您可以在其中一个视图的脚本标记内动态创建 javascript，并将数据分配给该 javascript。页面加载后，您可以使用 javascript 函数访问此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:50:52.353

在 RAILSCASTS 上观看“将数据传递给 Javascript”。Ryan 提供了三种（多种）方法。一种可能适合您的需求。[http://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

编辑：

此外，根据您的前端开始变得多么繁重的 javascript，您可能需要查看 Backbone.js。还有两个 RailsCast。不过，它可能不仅仅是您想要实现的。[http://railscasts.com/episodes/323-backbone-on-rails-part-1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)

# c++ - 返回*这个；删除指针

> ID：11270922
> 
> 赞同：0
> 
> 时间：2012-06-30T02:18:50.853
> 
> 标签：c++, class, rvalue

我认为发生的是`A`SetVar 返回的右值是相同的副本`Class`并共享相同的指针`Var`。但是当右值调用它的解构函数时，它会删除`Class`'s `Val`。

```
class A
{
private:
    int* Var;
public:
    A SetVar(int);
    ~A()
    {
        delete Var;
    }
};

A A::SetVar(int NewVar)
{
    Var=new int;
    *Var=NewVar;
                //POINT A
    return *this;
}

int main()
{
    A Class;
    Class.SetVar(8);

                //POINT B
} 
```

等于8 `POINT A` `*Val`，但`POINT B` `*Val`等于`-17891602`。由于尝试删除`Val`两次，我还得到 _BLOCK_TYPE_IS_VALID(pHead->nHeadUse) 。

删除解构函数可以解决问题，但会造成内存泄漏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T02:26:32.723

你违反[了三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

所以，当你做的时候，你制作了一个对象的副本

```
return *this 
```

它也会被破坏，并`delete`在同一个指针上被调用两次。无论如何，你真的不应该这样做。你应该返回一个引用，但是为什么 setter 函数应该返回一个对它被调用的对象的引用呢？是链接函数调用吗？

`Var`此外，每次重新分配它时都会泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:26:44.223

这里有几个问题。

首先，问题的最直接原因是SetVar() 返回时创建了对象的*副本。*`this`（您可能希望返回对 A 的引用。）由于没有为类 A 定义复制构造函数，所有字段的值都被隐式复制。这意味着该副本将具有指向您在 SetVar 中分配的同一个 Var int 的指针。换句话说，您将有两个指向同一内存的指针，一个位于原始 A 变量（您称为“类”的那个）中，另一个位于由 SetVar() 返回的副本中。当其中第二个被销毁时，其析构函数将删除已删除指针处的内存。

# java - 使用 javah 创建 .h 文件，出现错误“找不到 NativeDemo 的类文件”

> ID：11270926
> 
> 赞同：0
> 
> 时间：2012-06-30T02:19:29.657
> 
> 标签：java

我已经研究了几个与这个问题类似的例子，但我还没有找到一个可以解决我的问题的例子。我只是想用原生方法来做我的第一个程序。我没有将程序存储在包的层次结构中，因为我试图在我的第一个示例中使其尽可能简单。以下是所有内容的存储方式：

我有一门课叫做 NativeDemo。它存储在 C:/JavaFiles/demo/ 中。我编译了程序，.class 文件存储在同一个文件夹中。当我尝试在该程序上调用 javah 命令时，它告诉我找不到类文件。你能告诉我我做错了什么吗？

我的javah命令存储在我的JDK中，存储方式如下：C:/jdk1.0.7_04/bin/

在命令提示符的命令行中，我键入：

C:\JavaFiles\demo>C:\jdk1.7.0_04\bin\javah -jni NativeDemo 也试过 C:\JavaFiles\demo>C:\jdk1.7.0_04\bin\javah.exe -jni NativeDemo

当我这样做时，它告诉我找不到类文件。这与编译时使用的路径相同，它找到了文件，编译并创建了 .class 文件，没有任何问题。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T02:27:11.977

您可能需要`-classpath`在命令行上提供一个参数[`javah`](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javah.html)来设置类路径。（`-classpath`for 参数的`javah`行为与其他 Java 工具的行为相同；例如 java、javac、javap 等。如果您不了解类路径，请阅读[此页面](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/classpath.html)和[此页面](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/classpath.html)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T08:58:42.160

由于从未添加过解决方案，我想我会贡献我找到的解决方案来解决这个问题。这并不是一个真正的解决方案，因为它是 100% 的用户错误！。

在听起来类似的情况下，我想创建一个快速的小项目来演示 JNI 的使用。由于这是一个简单的练习，我没有使用 IDE，而是简单地使用 vi 编写代码并使用 javac 编译它。

例如

myclass.java（完全限定的类名是 mypackage.myclass）

javac myclass.java

上面的命令将 myclass.class 输出到当前目录。我现在的工作目录中有 myclass.java 和 myclass.class。

运行 javah mypackage.myclass 会导致所描述的错误。

这里的问题是我使用 javac，我将编译后的类写入当前目录，但是 javah 正在“/mypackage/myclass.class”中寻找它。

一个愚蠢的小问题，一个愚蠢的小答案，但我很生气今天在这上面浪费了 15 分钟，所以希望我可以拯救别人同样的痛苦（是的，我知道我应该早点发现它，如果我不只是有一个娱乐几个小时发现热点和 gnuj java 实现之间的 System.load 差异，所以遗憾的是我并不完全信任我的工具:(!!)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T13:36:33.197

您必须使用类的完全限定名称。javah 的语法是*javah [options] classes*。**类是用它们的完全限定名指定的**。所以，在你的情况下，如果你的包是**演示**，那么命令是，

```
C:\JavaFiles\demo>C:\jdk1.7.0_04\bin\javah -classpath . demo.NativeDemo 
```

类路径是 . 因为，正如您提到的，您在当前目录中有 .class 文件。并且 -jni 选项不是必需的，因为它是默认的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-22T18:44:58.587

在 android studio 1.5 中我遇到了同样的问题并运行了上面的命令但什么也没有，我探索了 app 模块构建文件夹，并且中间文件夹中没有 classes 文件夹，所以在运行命令创建项目之前，你可以通过 Build>Make Project 或快捷键`Ctrl`+ `F9`，然后运行上面的命令

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-10T13:21:06.783

我用eclipse项目目录中使用的以下命令解决了这个问题：

```
javah -classpath [PROJECT_DIR\bin\classes] class.name 
```

# mysql - 从不同的服务器连接多个 FTP 和 SQL DB（共享资源）

> ID：11270927
> 
> 赞同：1
> 
> 时间：2012-06-30T02:19:33.367
> 
> 标签：mysql, database, ftp, cluster-computing, grid-computing

这是一个具有挑战性的问题，但仍然会问。我知道没有什么是不可能的。不可能只是意味着尚未发现。

我想做的是从我的 10 台服务器连接我所有的 FTP 和 SQL DB，并将它们集中在一起以组合资源并创建共享资源环境。因此创建了一个 ftp 和 sql 集群。我不想购买任何软件。只是想知道PHP中是否有一些方法。我不想将我的站点数据库克隆到 10 台服务器，但想知道有没有办法将 10 个 sql 数据库桥接到 10 台服务器上以创建类似超级计算机的环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:12:34.433

[MySQL Cluster](http://www.mysql.com/products/cluster/)是一个开源解决方案。
[分布式 FTP 守护进程](http://sourceforge.net/projects/drftpd/)似乎是一个很有前途的项目。

# paypal - 是否可以将 Paypal 集成到非 Web 应用程序中？

> ID：11270929
> 
> 赞同：1
> 
> 时间：2012-06-30T02:19:46.473
> 
> 标签：paypal

我的任务是将支付系统集成到我们的应用程序中，这是一个全屏 DirectX 独立 Windows 可执行文件。它不存在于浏览器中！Paypal 对我们的目的来说是理想的，但是在浏览了许多不同的 Paypal api 的文档之后，我仍然不太清楚这是否可能。基本上，我希望能够让用户在不离开应用程序的情况下进行付款。如果应用程序需要与我们自己的 Web 服务器通信，然后由它处理与 paypal 的通信，那不是问题。如果应用程序需要通过某种 REST api 直接与 Paypal 通信，那也不是问题。如果应用程序需要显示官方 Paypal 徽标，也可以。但是不得不离开全屏应用程序并导航到网页是不行的。贝宝仍然是一种选择吗？如果没有，是否有替代方案可以处理大量国家/地区的交易？

# php - 显示来自站点根目录之外的图像

> ID：11270931
> 
> 赞同：2
> 
> 时间：2012-06-30T02:20:54.787
> 
> 标签：php, html

在这里问了一个类似的问题

[从文档根目录之外提供图像](https://stackoverflow.com/questions/3131562/serving-images-from-outside-of-document-root)

给出并接受的解决方案是使用 Apache Aliases。

但是，文件夹的 Apache 别名是否也将其公开？我想服务于一个形象，并保持它在公众眼中的隐身性。

除了别名之外，有谁知道在文档根目录之外提供图像的任何其他解决方案？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:50:25.080

你可以做这样的事情......

```
<?php

// somehow assign $file from a query string or database or whatever
header("Content-length: ". filesize($file));
header("Content-type: ". mime_content_type($file));
readfile($file); 
```

# c# - 如何在 C# 中比较 XML 字符串？

> ID：11270935
> 
> 赞同：0
> 
> 时间：2012-06-30T02:23:50.573
> 
> 标签：c#, .net, xml, linq-to-xml

在 DB 中，我将 XML 字符串存储在列中。下面是我的 XML 结构：

```
<?xml version="1.0"?>
-<ProductAttributes xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
-<Attribute Required="false" ID="2" Name="Color">
<Value ID="18">Light Pink</Value>
</Attribute>
-<Attribute Required="false" ID="1" Name="Size">
<Value ID="9">XL</Value>
</Attribute>
</ProductAttributes> 
```

另一个 XML 是：

```
<?xml version="1.0"?>
-<ProductAttributes xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
-<Attribute Required="false" ID="1" Name="Size">
<Value ID="1">S</Value>
</Attribute>
-<Attribute Required="false" ID="2" Name="Color">
<Value ID="4">Red</Value>
</Attribute>
-<Attribute Required="false" ID="3" Name="Weight">
<Value ID="6">10gr</Value>
</Attribute>
</ProductAttributes> 
```

**笔记**

1.  可以有**n**个 xml 字符串，每个 xml 字符串可以有**m**个标签

2.  属性节点可以按不同的顺序排列，例如在第一个属性中，Id=1 可以是第一个属性，在第二个属性中，Id=1 可以是最后一个。

要求不是比较这 n 个 XML 字符串并查找是否有任何字符串具有完全重复的属性（此比较将考虑值，因为顺序可能不同）。

请指导和帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:27:32.833

不要比较 XML 字符串。将它们用作 XML 解析器的输入，将它们转换为 XML 树，然后在树中搜索匹配的元素并比较它们的属性列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:46:13.733

您可能想尝试可从[此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=24313)[的 XML Diff and Patch GUI Tool](http://msdn.microsoft.com/en-us/library/aa302295.aspx)。我以前用过它，它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:22:18.480

您可以迭代 xml doc A 的所有节点，对于每个节点，在 xml doc B 中查找其 xpath。如果未找到任何路径或找到路径但值不同，则文档不“相同”。

然后，您必须对 B 中的所有节点执行相同的操作，检查 A 中的 xpath，以确保没有“B 中但 A 中没有”

一旦未找到 xpath 或值不匹配，通过退出为“不等于”进行优化。

# python - 为什么 cv2 dilate 实际上不会影响我的形象？

> ID：11270937
> 
> 赞同：6
> 
> 时间：2012-06-30T02:23:57.577
> 
> 标签：python, opencv

所以，我正在使用 python 和 opencv2 生成一个二进制（嗯，真的是灰度，8 位，用作二进制）图像，将少量多边形写入图像，然后使用内核扩展图像。但是，无论我使用什么内核，我的源映像和目标映像总是以相同的方式结束。有什么想法吗？

```
from matplotlib import pyplot
import numpy as np
import cv2

binary_image = np.zeros(image.shape,dtype='int8')
for rect in list_of_rectangles: 
    cv2.fillConvexPoly(binary_image, np.array(rect), 255)
kernel = np.ones((11,11),'int')
dilated = cv2.dilate(binary_image,kernel)
if np.array_equal(dilated, binary_image):
    print("EPIC FAIL!!")
else:
    print("eureka!!") 
```

我得到的只是`EPIC FAIL`！

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T19:02:53.510

因此，事实证明问题出在内核和映像的创建中。我相信 openCV 期望`'uint8'`作为内核和图像的数据类型。在这种特殊情况下，我创建了内核`dtype='int'`，默认为`'int64'`. 此外，我将图像创建为`'int8'`，而不是`'uint8'`。不知何故，这并没有触发异常，而是导致扩张以一种令人惊讶的方式失败。

将以上两行更改为

```
binary_image = np.zeros(image.shape,dtype='uint8')

kernel = np.ones((11,11),'uint8') 
```

解决了这个问题，现在我明白了`EUREKA`！万岁！

# php - 以任何顺序或格式解析来自用户的输入

> ID：11270939
> 
> 赞同：0
> 
> 时间：2012-06-30T02:24:30.120
> 
> 标签：php

我在试图弄清楚如何解析从用户那里收集的信息时遇到了一些麻烦。我正在收集的信息是：

*   年龄
*   性别
*   邮政编码

以下是我如何从用户那里收到此信息的一些示例：

*   30男90250
*   30/月/90250
*   30 米 90250
*   米 30 90250
*   30-M-90250
*   90250,M,30

我从explode 函数开始，但留下了一个巨大的if else 语句列表，试图查看用户如何分隔信息（是空格、逗号、斜线还是连字符）

任何反馈表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:28:19.590

这很容易。邮政编码总是 5 位数字，所以简单的正则表达式匹配`/\d{5}/`就可以了。年龄是一个 1 到 3 位的数字，所以请`/\d{1,3}/`注意这一点。至于性别，你可以只寻找一个`f`for `female`，如果没有假设`male`。

尽管如此，单独的输入字段有什么问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T02:29:31.253

您可能需要使用一些正则表达式：

*   一个查找 5 个数字的数字：`[^\d]\d{5}[^\d]`
*   一个查找 2 个数字的数字：`[^\d]\d{2}[^\d]`
*   一个寻找单个字母的： `[a-zA-Z]`

**[编辑]**

我已经编辑了正则表达式。它们现在匹配所有提供的替代方案，并且不需要对输入字符串进行任何更改（这使其成为更有效的选择）。它们也可以按任何顺序运行。

# c# - 在 C# 中循环文本标签？

> ID：11270941
> 
> 赞同：1
> 
> 时间：2012-06-30T02:24:41.227
> 
> 标签：c#, winforms, loops, timer, visual-c#-express-2010

我有一个计时器，可以在每个刻度上更改标签的文本。出于某种原因，它会停止并且不会继续循环。为什么？

```
 private int count = 0;
    private void timer1_Tick(object sender, EventArgs e)
    {
            string[] arr4 = new string[3]; // 4 
            arr4[0] = "one";
            arr4[1] = "two";
            arr4[2] = "three";

            if (count == 4)
            {
                count = 0;
            }
            toolStripStatusLabel1.Text = arr4[count];
            count++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:42:26.667

> 此外，当我的表单加载时，标签的文本是空白的。然后它转到 arr4[0]。当它再次循环时，文本从 arr[0] 开始。为什么文本首先是空白的，我该如何解决？

看起来您的原始问题已在评论中得到解答。我将从评论中回答您的第二个问题。

当您的程序启动时，您的`timer1_Tick`事件不会立即执行。在您的情况下，它第一次执行是在 5000 毫秒之后。所以标签会先显示为空白，然后更改为 arr4[0] 的值。如果你不想这样，你可以：

*   在设计时在设计器中设置标签的值
*   在运行时在构造函数中设置标签的值
*   将数组的创建从计时器滴答事件中拉出来，这样您就不会每 5 秒重新创建一次，将其设为类变量，并在构造函数中创建它，然后在创建后立即将标签设置为 arr4[0]

# ruby - Ruby 字符串转义字符

> ID：11270944
> 
> 赞同：1
> 
> 时间：2012-06-30T02:25:18.813
> 
> 标签：ruby, string, escaping

我想将下面一行中引用的字符串完全按原样转换为字符串，但我在 Ruby 的必要转义序​​列上绊倒了。 `mycommand.cmd`实际上是 powershell.exe 的包装，所以我想保留引号之间的所有内容，并保留已经存在的转义字符。

```
mycommand.cmd "^|foreach-object { \"{0}=={1}\" -f $_.Name, $_.Found }" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T02:36:03.277

使用单引号：

```
ruby-1.9.3-p0 :001 > '^|foreach-object { \"{0}=={1}\" -f $.Name, $.Found }'
 => "^|foreach-object { \\\"{0}=={1}\\\" -f $.Name, $.Found }" 
```

单引号中唯一的转义字符是 :`\'`和`\\`

# windows - windows azure mongodb教程不起作用

> ID：11270946
> 
> 赞同：0
> 
> 时间：2012-06-30T02:26:07.377
> 
> 标签：windows, node.js, azure, azure-storage

我遵循以下教程： [https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/website-with-mongodb-(mac)/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/website-with-mongodb-(mac)/)

并按照教程中的说明执行了 app.js，但我得到了：

No data received 无法加载网页，因为服务器未发送数据。

我想知道教程是什么意思：

您必须将上面的连接字符串替换为您之前创建的 MongoDB 服务器的连接字符串。例如，mongodb://mymongodb.cloudapp.net/tasks。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:03:33.447

您收到的错误意味着“您的 node.js 应用程序和 MongoDB 服务器之间没有连接”。本[教程](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/website-with-mongodb-%28mac%29/)有一个非常重要的安装 MongoDB 的步骤，如下所示：

**创建虚拟机并安装MongoDB**

*   本教程假设您已经在 Windows Azure 中创建了一个虚拟机。创建虚拟机后，您需要在虚拟机上安装 MongoDB：
*   要创建 Linux 虚拟机并安装 MongoDB，请参阅[在 Linux 虚拟机上安装 MongoDB。](https://www.windowsazure.com/en-us/manage/linux/common-tasks/mongodb-on-a-linux-vm/)

因此，如果您已完成上述步骤，您必须已将安装 MongoDB 的虚拟机 DNS 名称创建为“Your_MongoDB_VM_name.cloudapp.net”，否则请完成此步骤。

因此，如果您已经在 Linux 虚拟机上安装了 MongoDB，并且您的 DNS 名称是“Your_MongoDB_VM_name.cloudapp.net”，那么在 App.js 中，您将如下更改以下行：

```
var taskList = new TaskList('mongodb://Your_MongoDB_VM_name.cloudapp.net/tasks'); 
```

上述更改将使您的 Node.js 应用程序与运行在 Linux 机器上的 MongoDB 服务器连接，并且您的 node.js 应用程序必须需要此更改才能工作。

# ios - Core Graphics CGPathRef 在指定点绘制

> ID：11270949
> 
> 赞同：0
> 
> 时间：2012-06-30T02:26:41.960
> 
> 标签：ios, macos, core-graphics

我有一个路径的“调色板”，我会画很多次；也许100。

我想在这样的指定位置绘制这些：

```
CGPathRef foo = ...
CGPathRef bar = ...
// do this dozens of times at differing points
[self draw:context path:foo atX:100 andY:50];
[self draw:context path:bar atX:200 andY:50]; 
```

我现在做的是翻译。它有效，但我不确定这是性能最高的解决方案。像这样的东西：

```
- (CGRect) draw:(CGContextRef) context path:(CGPathRef) path atX:(CGFloat) x andY:   (CGFloat)y
{
    CGContextSaveGState(context);
    CGContextTranslateCTM(context, x, y);
    CGRect pathBoundingRect = CGPathGetBoundingBox(path);
    CGContextSetFillColorWithColor(context, drawColor);
    CGContextAddPath(context, path);
    CGContextDrawPath(context, kCGPathFill);
    CGContextRestoreGState(context);
    return pathBoundingRect;
} 
```

你有什么改进的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:20:33.197

如果它们移动，在其自己的 UIView 中绘制每一个可能会快得多（所以一开始，它们都是相同的），并定位视图本身。

这样，（视图的）转换将在 GPU 而不是 CPU 上自动完成，并且`drawRect:`只需要为每个路径对象调用一次。

# javascript - 读取 cookie 数据并重定向

> ID：11270952
> 
> 赞同：3
> 
> 时间：2012-06-30T02:26:46.190
> 
> 标签：javascript, cookies

我需要一些帮助来阅读 cookie。我的网站是双语的，因为我不想根据 IP 更改语言，所以我需要能够设置一个名为“_lang”的 cookie，并查看内容是“en”还是“jp”。我可以设置 cookie 及其内容，没有问题，但我无法确定读取 cookie 内容的语法；这是我第一次真正尝试过。

```
function createCookie(name,value,days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function GetCookie(name) {
  var arg=name+"=";
  var alen=arg.length;
  var clen=document.cookie.length;
  var i=0;
  while (i<clen) {
    var j=i+alen;
    if (document.cookie.substring(i,j)==arg)
      return "here";
    i=document.cookie.indexOf(" ",i)+1;
    if (i==0) break;
  }
  return null;
}

var visit=getCookie("_lang");
var rc=readCookie("_lang");
if (visit==true){
        if (rc == "jp"){
            window.location = "http://jp.mywebsite.com";
        }

        else if (rc == "en"){
            window.location = "http://www.mywebsite.com";
        }
}
else if (visit==null){
    document.title = "Welcome to MyWebsite!"
    document.getElementById('welcomeLB').style.display='block';
    document.getElementById('behindLightBox').style.display='block';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:30:31.333

### 我建议使用插件。[https://github.com/pavelkukov/localdata](https://github.com/pavelkukov/localdata)

在你的情况下：

* * *

```
var lang_cookie = readCookie('user_lang') ;

if( lang_cookie && lang_cookie !== null && lang_cookie !== 'undefined')
{
     if(lang_cookie === 'en')
     {
          document.location = 'http://en.mysite.com';
     }
     document.location = 'http://jp.mysite.com';
}

document.location = 'http://en.mysite.com'; 
```

# ios - iOS：将id类型作为字符串打印

> ID：11270956
> 
> 赞同：1
> 
> 时间：2012-06-30T02:27:16.330
> 
> 标签：ios, ios5

在android中我可以`Log("aa",""+Object)`，然后对象可以作为字符串打印，它可以帮助我理解对象，如果对象是int类型，我不是转换器，所以我想做和iOS一样。例如：我想在 iOS 上将 id 类型打印为字符串，如下所示：

```
NSLog(@"#### %s",[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 5)]); 
```

我想将返回值打印`[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 5)]`为字符串，以便理解该`indexSetWithIndexesInRange`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:28:57.390

尝试使用`%@`，这是打印`NSObject`'s的格式`description`（可可类似于 Java 的's `toString`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T02:30:38.187

如果目标是获取对象“id”，请考虑以下事项 -

```
 print("#A>\(String(format: "%@", arguments: [self]))");
    print("#B>\(String(format: "%d", arguments: [self]))");
    print("#C>\(String(format: "%d", arguments: [self.hash]))");
    print("#D>\(String(format: "%d", arguments: [self.hashValue]))"); 
```

我得到以下控制台输出（对于我在 TimerCell.swift 中的示例代码）-

```
 #A><MultiTimer.TimerCell: 0x7fa133806200; baseClass = UITableViewCell; frame = (0 0; 320 75); layer = <CALayer: 0x7fa131d07080>>
    #B>864051712
    #C>864051712
    #D>864051712 
```

# jquery - jQuery Isotope 插件 - 重新布局

> ID：11270962
> 
> 赞同：3
> 
> 时间：2012-06-30T02:28:41.880
> 
> 标签：jquery, jquery-masonry, jquery-isotope

我正在为 WordPress 帖子使用 jQuery Isotope 插件。我只想在页面加载时显示帖子摘录，然后通过简单地扩展 div 的高度来显示整个帖子。但是，Isotope 插件会在用户单击“阅读更多”按钮展开页面之前计算 div 高度，因此新高度会破坏插件。

我正在使用 reLayout 方法，但还没有弄清楚……有什么想法吗？

这是一个工作链接。试试“草莓”的帖子。[http://ashlinixon.com/new-test/index.html](http://ashlinixon.com/new-test/index.html)

此外，代码示例：

HTML：

```
<article class="item">
    <div class="featured-img"><img src="images/strawberries.jpg" alt="Strawberries" /></div>
    <h2>Strawberries</h2>
    <p class="excerpt">Lorem ipsum dolor sit amet</p>
    <p class="read-more">Read more</p>
    <div class="post">
        test test<br />test test<br />test test
    </div>
</article> 
```

jQuery：

```
$(document).ready(function(){
    $(".post").hide();
    $(".excerpt").show();

    $('.read-more').click(function(){
        $(".post").slideToggle();
        $("#portfolio").isotope( 'reLayout' );
    });            
}); 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T02:31:40.350

如果我使用切换而不是 slideToggle 似乎工作正常。现在对我来说已经足够好了。:)

```
$(document).ready(function(){
  $(".post").hide();
  $(".excerpt").show();

  $('.read-more').click(function(){
      $(".post").toggle();
      $("#portfolio").isotope( 'reLayout' );
  });              
}); 
```

# javascript - 淘汰赛 JS：在“选择”标签中显示不正确的值

> ID：11270970
> 
> 赞同：1
> 
> 时间：2012-06-30T02:30:28.093
> 
> 标签：javascript, knockout.js

视图模型：

```
function Specialization(id, name) {
            var self = this;
            self.id = id;
            self.name = name;
        }

        function ObservableSpecialization() {
            var self = this;
            self.availableItem = ko.observable();
        }

        function ViewModel() {
            var self = this;
            self.specializations = ko.observableArray([]);
            self.availableSpecializations = [];

            self.addSpecialization = function () {
                self.specializations.push(new Specialization());
            }
            self.removeSpecialization = function (specialization) {
                self.specializations.remove(specialization)
            }
        } 
```

文件加载：

```
$(document).ready(function () {
            var model = new ViewModel();

            var temp = [];
            $.each(window.availableSpecializations, function (i, item) {
                var specialization = new Specialization(item.ID, item.Name);
                model.availableSpecializations.push(specialization);
                temp.push(item.ID);
            });
            $.each(window.userSpecializations, function (i, item) {

                var idx = temp.indexOf(item.ID);
                if (idx != -1) {
                    var available = model.availableSpecializations[idx];
                    var specialization = new ObservableSpecialization();
                    specialization.availableItem = available;
                    model.specializations.push(specialization);
                }
            });

            ko.applyBindings(model);
        }); 
```

`<select>`片段：

```
<tbody data-bind="foreach: specializations">
                        <tr>
                            <td>
                                <select name="Specializations" data-bind="options: $root.availableSpecializations, value: 'availableItem', optionsText: 'name'">
                                </select>
                            </td> 
```

结果：

正如您在下面看到的，所有值始终设置为列表中的第一项。我猜 ID 没有以某种方式绑定到选定的项目...我哪里出错了？

![在此处输入图像描述](../Images/d15eeb6782278ffae46352499d83e7cc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:40:29.963

有两个问题：首先，`specialization.availableItem`是一个可观察的，因此应该分配一个函数调用：`specialization.availableItem(available)`

其次，在绑定字符串中，您`value: 'availableItem'`只需将选择值设置为字符串“availableItem”。应该没有引号：`value: availableItem`

这是两个修复的小提琴：[jsfiddle](http://jsfiddle.net/antishok/xrETq/37/)

# apache - 与网站ip地址相关的不同页面

> ID：11270971
> 
> 赞同：1
> 
> 时间：2012-06-30T02:31:11.103
> 
> 标签：apache, .htaccess, iis, webserver, static-ip-address

我的网站被分配了一个特定的 IP 地址。现在，有没有办法像 apache 一样配置 Web 服务器，这样当我在浏览器中输入网站 url 时，它显示的页面与我输入与网站相关的 IP 地址时显示的页面不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:33:42.367

是的。您正在寻找的是 apache [Virtual Hosts](http://httpd.apache.org/docs/2.0/vhosts/examples.html)。

您还需要配置您的域以指向您的 IP。

# delphi - 在 Delphi 中声明本地还是全局？

> ID：11270972
> 
> 赞同：0
> 
> 时间：2012-06-30T02:31:29.930
> 
> 标签：delphi, scope, global-variables, local-variables

我有一个程序我的程序调用了数万次，它使用这样的通用结构：

```
procedure PrintIndiEntry(JumpID: string);

type
  TPeopleIncluded = record
    IndiPtr: pointer;
    Relationship: string;
  end;

var
  PeopleIncluded: TList<TPeopleIncluded>;
  PI: TPeopleIncluded;

begin { PrintIndiEntry }

  PeopleIncluded := TList<TPeopleIncluded>.Create;

 { A loop here that determines a small number (up to 100) people to process }
  while ... do begin

    PI.IndiPtr := ...;
    PI.Relationship := ...;
    PeopleIncluded.Add(PI);

  end;

  DoSomeProcess(PeopleIncluded);

  PeopleIncluded.Clear;
  PeopleIncluded.Free;

end { PrintIndiEntry } 
```

或者，我可以在全局而不是在本地声明 PeopleIncluded，如下所示：

```
unit process;

interface

type
  TPeopleIncluded = record
    IndiPtr: pointer;
    Relationship: string;
  end;

var
  PeopleIncluded: TList<TPeopleIncluded>;
  PI: TPeopleIncluded;

procedure PrintIndiEntry(JumpID: string);

begin { PrintIndiEntry }

 { A loop here that determines a small number (up to 100) people to process }
  while ... do begin

    PI.IndiPtr := ...;
    PI.Relationship := ...;
    PeopleIncluded.Add(PI);

  end;

  DoSomeProcess(PeopleIncluded);

  PeopleIncluded.Clear;

end { PrintIndiEntry }

procedure InitializeProcessing;
begin
  PeopleIncluded := TList<TPeopleIncluded>.Create;
end;

procedure FinalizeProcessing;
begin
  PeopleIncluded.Free;
end; 
```

我的问题是，在这种情况下，在全局而不是在本地声明 PeopleIncluded 是否更好。我知道理论是尽可能在本地定义，但我想知道在进行数以万计的“创建”和“免费”方面是否有任何问题需要担心？让它们全球化只会做一次创建和一次免费。

在这种情况下推荐使用什么方法？

如果推荐的方法仍然是在本地定义它，那么我想知道在本地定义仍然是一个选项时，是否存在更好的全局定义的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T09:05:54.190

关于流程的可见性，我要做的是*创建一个* `class`保存所有数据的方法，一种初始化方法和一种析构函数，然后是一种调用流程的方法。然后使用分析器优化它的速度。*永远不要使用全局变量*，而是*将您的进程封装在小型可重用和多线程就绪类*中。

关于进程速度，简而言之：“过早的优化是万恶之源”——Donald Knuth 引用 CAR Hoare 的话。我确定瓶颈*不在*. 中`TList Create/Free`，而是在您的主流程循环中。

因此，在猜测可能发生的变化之前，请使用分析器查看瓶颈在哪里。请参阅[Delphi 的 Profiler 和内存分析工具](https://stackoverflow.com/questions/291631/profiler-and-memory-analysis-tools-for-delphi)

您可以预先分配变量和/或缓存可重用数据，使用静态数组而不是 a `TList`（或分配它并通过使用外部`count`变量重用它），并避免分配`string`实例（并在没有参数的情况下传递它们`const`）。但也许不是一个神奇的解决方案。

为了使过程更快，*更改算法*几乎总是比您尝试的一些低级实现技巧更好。使用预先计算的查找表、内存预分配、避免创建临时的`string`（例如使用`PosEx`代替`copy`子链；或混合`AnsiString`/ `UnicodeString`）、避免磁盘、API 或 DB 调用、更改内存结构、对数据进行排序然后使用二分查找，使用散列或非管道循环，让你处理多线程等等......如果没有你的进程的整个源代码，就不可能猜测应该改变什么，并对真实数据运行分析器！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:51:06.570

你的第一个代码更好。向外部隐藏任何数据结构是件好事。第一个代码显示 PeopleIncluded 不在您的过程之外使用，因此最好将其保留在内部。将其暴露在外部（在界面部分）将使其对使用该单元的所有其他单元可见。这样做，您就有可能被其他单位访问和修改。这可能是您或其他使用您的代码的人有意或无意地发生的，并且可能导致不良结果。

如果您不能或仍然想使其不是您的过程的本地，最好在实现部分而不是接口部分中声明类型和 var。

您不必担心性能。内存中的操作很快，我的建议是只在真正发生性能瓶颈时才担心它。当它发生时，您可以分析您的应用程序以找到瓶颈，并仅优化导致瓶颈的代码。这样做将避免不必要的努力来优化对您的应用程序性能没有贡献（或最小）的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:40:36.320

案例#3

```
unit process;

interface

type
  TPeopleIncluded = record
    IndiPtr: pointer;
    Relationship: string;
  end;

procedure PrintIndiEntry(JumpID: string);
var
  PeopleIncluded: TList<TPeopleIncluded>;
  PI: TPeopleIncluded;

begin { PrintIndiEntry }

 { A loop here that determines a small number (up to 100) people to process }
  while ... do begin

    PI.IndiPtr := ...;
    PI.Relationship := ...;
    PeopleIncluded.Add(PI);

  end;

  DoSomeProcess(PeopleIncluded);

  PeopleIncluded.Clear;

end { PrintIndiEntry }

procedure InitializeProcessing; 
```

Dsomeprocess((PeopleIncluded) 也必须知道记录。在多个地方声明相同的记录有点糟糕。这就是为什么你想让它对 Dsomeprocess 可用。但是，最好在本地声明变量。

不过，创建一个小班可能是最好的。

# php - 带有“偏移”包装的循环（while/foreach）和

> ID：11270975
> 
> 赞同：2
> 
> 时间：2012-06-30T02:33:02.377
> 
> 标签：php, arrays, loops, foreach, while-loop

在[使用数学运算符应用包装对象](https://stackoverflow.com/questions/11268901/wrapping-3-objects-or-less-inside-a-while-foreach-in-php/)后，我只是认为它会结束。但不是。到目前为止。

```
<?php
$faces= array(
  1 => '<div class="block">happy</div>',
  2 => '<div class="block">sad</div>',
  (sic)
  21 => '<div class="block">angry</div>'
);

$i = 1;
foreach ($faces as $face) {
  echo $face;
  if ($i == 3) echo '<div class="block">This is and ad</div>';
  if ($i % 3 == 0)  {
    echo "<br />"; // or some other wrapping thing
  }
  $i++;
}

?> 
```

在代码中，我必须在第二个对象之后放置广告，成为第三个对象。然后将这三个全部包装在一个中`<div class="row">`（由于设计原因，后面的 br 将无法解决）。我想我会回去应用一个开关，但如果有人在数组中放入更多开关可以正确包装的元素，最后两个剩余的元素将被公开包装。

我可以将“广告”添加到第三个位置的数组中吗？这会让事情变得更简单，只让我猜测如何包装第一个和第三个，第四个和第六个，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:27:42.423

首先，插入广告：

```
array_splice($faces, 2, 0, array('<div class="block">this is an ad</div>')); 
```

然后，应用包装：

```
foreach (array_chunk($faces, 3) as $chunk) {
    foreach ($chunk as $face) {
        echo $face;
    }
    echo '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:59:31.867

您可以将数组一分为二，插入您的广告，然后附加其余部分：

```
// Figure out what your ad looks like:
$yourAd = '<div class="block">This is and ad</div>';

// Get the first two:
$before = array_slice($faces, 0, 2);
// Get everything else:
$after = array_slice($faces, 2);
// Combine them with the ad. Note that we're casting the ad string to an array.
$withAds = array_merge($before, (array)$yourAd, $after); 
```

我认为 nickb 关于使用比较运算符而不是赋值的注释将有助于弄清楚你的包装。

# c# - 以编程方式向标签添加空格？

> ID：11270977
> 
> 赞同：0
> 
> 时间：2012-06-30T02:34:01.100
> 
> 标签：c#, winforms, label

我有一个标签和这个代码：

```
 string User = Environment.UserName;
        toolStripStatusLabel1.Text = "This Software is Licensed to:" + User; 
```

由于某种原因，输出是：

```
This Software is Licensed to:UserName 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:36:19.573

非常简单的修复：

```
string User = Environment.UserName;
toolStripStatusLabel1.Text = "This Software is Licensed to: " + User;
// Add a space after 'to:' 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:41:26.920

尝试在“：”之后插入一个空格

# php - COUNT(*) 中的 PHP 错误为 num

> ID：11270978
> 
> 赞同：0
> 
> 时间：2012-06-30T02:34:21.333
> 
> 标签：php, mysql

我收到 `Notice: Use of undefined constant num - assumed 'num'`我的代码所遵循的错误

```
$query = "SELECT COUNT(*) AS num FROM $tableName";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num]; 
```

如何解决这个问题？

我没有合适的头衔，所以请不要把它改成合适的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T02:37:02.237

@AkhileshBChandran 给出了一个正确的解决方案。将来，如果您要引用该列，则需要将其放在引号中。

```
$total_pages = $total_pages['num']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:35:29.323

`$total_pages = $total_pages[0];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:36:47.930

```
$total_pages = $total_pages['num']; 
```

# android - 自定义方形按钮

> ID：11270980
> 
> 赞同：0
> 
> 时间：2012-06-30T02:35:00.743
> 
> 标签：android, android-view

我正在尝试制作一个自定义按钮，我有两个问题：

1.  如何将 xml 布局文件指定为自定义按钮的布局？

2.  如何确保自定义按钮是方形的？（满足高度=宽度或宽度=高度取决于哪个更小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:21:25.210

当您说自定义按钮时，我假设您正在尝试通过扩展视图或按钮来创建按钮。有了这个假设..

1）您可以通过使用其完整的类名在布局文件中使用自定义按钮

前任：

```
Instead of <Button />  use <com.xxx.MyButton /> 
```

更多信息：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

2) 通过覆盖 onMeasure()，您可以控制 Button 的宽度和高度。有关更多信息，请参阅上面的 android 文档。

# php - 如何在进入数据库之前检查值是否为空？

> ID：11270981
> 
> 赞同：0
> 
> 时间：2012-06-30T02:35:14.157
> 
> 标签：php, mysql, insert

我有一个php函数

```
function insertIntoDb($db, $table) {
    mysql_select_db($db) or die("Could not select database. " . mysql_error());
    $resultInsert = mysql_query("SHOW COLUMNS FROM " . $table);
    $fieldnames=array();
      if (mysql_num_rows($resultInsert) > 0) {
        while ($row = mysql_fetch_array($resultInsert)) {
            $fieldnames[] = $row['Field'];
            $values = array_intersect_key( $_POST, array_flip($fieldnames) ); #check if value is null otherwise do not INSERT
        }
      }
      $sql = sprintf('INSERT INTO %s (%s) VALUES ("%s")', $table, 
      implode(', ', array_map('mysql_escape_string', array_keys($values))), implode('", "',array_map('mysql_escape_string', $values))); 
      mysql_query($sql); 
      echo '<div class="success">Data was entered into the database successfully!<br><a href="view.php?type=recent">View listing?</a></div>';
} 
```

基本上，我使用表列为用户表单生成字段，然后使用相同的方法插入表中。目前它正在工作，但是如何在将其插入表之前检查输入的值是否为空（例如用户尚未填写字段）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:35:18.287

关于检查 null/not-set/empty 值的一些好处：

## 空同余（`===`）：

```
$result = $x === NULL 
```

或者

```
$result = is_null($x)
// $result === TRUE if:
// $x was never set
// was set to NULL 
```

## `isset`

```
$result = isset($x['some_key'])
// $result === TRUE if $x['some_key'] is either:
// NULL
// does not exist in $x (was never set) 
```

## 是`empty`：

```
if(empty($x))
// $result === TRUE if $x is either:
// NULL
// FALSE
// (int) 0
// (float) 0.0
// (string) ''
// (string) '0' 
```

上述操作的速度按顺序列出：

*   `===`/`!==`因为他们是运营商
*   `isset`/`empty`因为它们是语言结构（不是函数）
*   `is_null`因为它是一个函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:46:02.767

替换这个：

```
while ($row = mysql_fetch_array($resultInsert)) {
    $fieldnames[] = $row['Field'];
    $values = array_intersect_key( $_POST, array_flip($fieldnames) );
} 
```

有了这个：

```
while ($row = mysql_fetch_array($resultInsert)) $fieldnames[] = $row['Field'];
$values = array_intersect_key( $_POST, array_flip($fieldnames) );
$values = array_filter($values, function($x) { return $x !== ''; }); 
```

如果您使用的是 PHP < 5.3，则需要将最后一行替换为：

```
$values = array_filter($values, create_function('$x', 'return $x !== "";')); 
```

# c# - 将 XNA 渲染图像保存到磁盘

> ID：11270983
> 
> 赞同：0
> 
> 时间：2012-06-30T02:35:41.130
> 
> 标签：c#, 3d, xna

我正在尝试将在 XNA 中渲染的图像保存到磁盘。这实际上很容易，但更重要的是我需要每个通道的完整 32 位浮点精度，而不仅仅是 0-255 范围。

我一直在研究使用纹理打包（将浮点数转换为 4 分量 ARGB），但我担心这样会失去精度。我需要非常高的准确性。

我正在研究的另一种方法是使用着色器并将浮点分量与 2147483647（最大正整数）相乘，然后遍历每个位并在渲染图像中存储二进制 0 或 1。以后可以用常规代码重新组合每个图像，以重建全精度浮点数。这可行，但问题是，着色器模型 3.0 似乎不能正确支持 32 位 int。通过这种方式，我得到的只是 24 位精度。

有没有办法以更直接和准确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:20:37.330

既然您说您的四个通道中的每一个都使用 32 位精度，我假设您的纹理正在使用`SurfaceFormat.Vector4`，据我所知，这是 XNA 支持的唯一 128 位纹理格式。在这种情况下，很容易从您渲染的纹理中检索实际数据：

```
var tex = new Texture2D(GraphicsDevice, 1024, 1024, false, SurfaceFormat.Vector4);
var data = new Vector4[1024 * 1024];
tex.GetData<Vector4>(data); 
```

然后，您需要做的就是编写一些代码来将`data`数组保存到一个您可以稍后读取的文件中，这很容易。然后你可以重构纹理：

```
Vector4[] data = LoadMyData();
tex.SetData(data); 
```

# git - Git：为什么本地分支会自动推送到远程，但本地删除后需要手动删除？

> ID：11270984
> 
> 赞同：1
> 
> 时间：2012-06-30T02:35:59.870
> 
> 标签：git, branch

如果我的任何假设似乎是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:36:29.563

因为创建分支不是破坏性操作。删除一个是。

在遥控器上创建一个分支通常是“安全的”——没有什么取决于一个不存在的分支。但是，删除分支并不安全——其他人可能正在使用它，或者某些工具可能正在监视它，或者其他什么。

# regex - 匹配一个词，但不在评论中

> ID：11270988
> 
> 赞同：0
> 
> 时间：2012-06-30T02:36:41.880
> 
> 标签：regex, negative-lookahead, negative-lookbehind

我正在尝试匹配一个单词，但不是在它前面有评论（`/*`而不是后面`*/`）的情况下。到目前为止，我一直在尝试使用否定的前瞻断言来实现这一点，但没有成功。这是否可以通过消极的前瞻或消极的后视断言来实现，或者这是徒劳的努力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:50:19.067

我只是假设您正在编写 Perl 脚本，试图分析 C 代码。

它可能是一些单一而优雅的正则表达式，但是你必须阅读整个文件并将其变成一个字符串。我记得在尝试对包含多行（`\n`字符）的字符串运行 Perl 正则表达式时遇到问题，但也许只是我。

无论如何，我建议您逐行处理，注意 3 种情况：

1.  单行注释：`/* my comment */`
2.  注释从当前行开始：`/* my comment starts here`
3.  以当前行结尾的注释： `my comment ends here */`

从正在分析的文本中删除评论，然后在其余部分中搜索您的单词。像这样的东西：

```
#!/usr/bin/perl
use strict;
use warnings;

my $word = shift;
my $line_no = 0;
my $whole_line = "";

my $in_comment = 0;

sub word_detection
{
    while ($_ =~ /\b($word)\b/g)
    {
        print "'$1' found on line $line_no: $whole_line\n";
    }
}

while (<>)
{
    chomp;
    $whole_line = $_;
    $line_no ++;

    $_ =~ s/\/\*.*?\*\///;

    if ($_ =~ /\/\*/)
    {
        my @split = (split /\/\*/,  $_);
        $_ = $split[0];
        $in_comment = 1;
        word_detection $_;
    }
    elsif ($_ =~ /\*\//)
    {
        my @split = (split /\*\//,  $_);
        $_ = $split[1];
        $in_comment = 0;
        word_detection $_;
    }
    elsif (not $in_comment)
    {
        word_detection $_;
    }
} 
```

使用您的单词作为第一个参数（在下面的示例中为“int”）运行此脚本，然后是您的文件名。它应该完成这项工作：

```
$ match-word int test.cc
'int' found on line 11: int /* comment on one line */ x = 10;
'int' found on line 13: int y; /* and this is
'int' found on line 15:     comment */ int z;
'int' found on line 17: int main(int argc, char* argv[])
'int' found on line 17: int main(int argc, char* argv[]) 
```

# python - 根据 bin 大小将列表划分为多个列表

> ID：11270991
> 
> 赞同：9
> 
> 时间：2012-06-30T02:37:04.687
> 
> 标签：python

我有一个包含超过 100,000 个值的列表。

我需要根据特定的 bin 宽度（例如 0.1）将列表分成多个较小的列表。谁能帮我写一个python程序来做到这一点？

我的清单看起来像这样

```
-0.234
-0.04325
-0.43134
-0.315
-0.6322
-0.245
-0.5325
-0.6341
-0.5214
-0.531
-0.124
-0.0252 
```

我想要这样的输出

```
list1 = [-0.04325, -0.0252] 
list2 = [-0.124] 
list3 = [-0.234, -0.245 ] 
list4 = [-0.315] 
list5 = [-0.43134] 
list6 = [-0.5325, -0.5214, -0.531] 
list7 = [-0.6322, -0.6341] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T07:43:59.427

这是使用[numpys digitize](http://scipy.org/Numpy_Example_List_With_Doc#head-e68744814a0dcbf3acbcf1aee5db412198cf312c)的简单而好方法：

```
>>> import numpy as np
>>> mylist = np.array([-0.234, -0.04325, -0.43134, -0.315, -0.6322, -0.245,
                       -0.5325, -0.6341, -0.5214, -0.531, -0.124, -0.0252])
>>> bins = np.arange(0,-1,-0.1)
>>> for i in xrange(1,10):
...     mylist[np.digitize(mylist,bins)==i]
... 
array([-0.04325, -0.0252 ])
array([-0.124])
array([-0.234, -0.245])
array([-0.315])
array([-0.43134])
array([-0.5325, -0.5214, -0.531 ])
array([-0.6322, -0.6341])
array([], dtype=float64)
array([], dtype=float64) 
```

digitize，返回一个数组，其中包含每个元素所属的 bin 的索引值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T02:39:56.310

这将创建一个字典，其中每个值都是适合 bin 的元素列表。

```
import collections
bins = collections.defaultdict(list)
binId = lambda x: int(x*10)
for val in vals:
    bins[binId(val)].append(val) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T06:17:39.430

这有效：

```
l=[-0.234, -0.04325, -0.43134, -0.315, -0.6322, -0.245,
-0.5325, -0.6341, -0.5214, -0.531, -0.124, -0.0252]

d={}
for k,v in zip([int(i*10) for i in l],l):
   d.setdefault(k,[]).append(v)

LoL=[d[e] for e in sorted(d.keys(), reverse=True)]

for i,l in enumerate(LoL,1):
    print('list',i,l) 
```

印刷：

```
list 1 [-0.04325, -0.0252]
list 2 [-0.124]
list 3 [-0.234, -0.245]
list 4 [-0.315]
list 5 [-0.43134]
list 6 [-0.5325, -0.5214, -0.531]
list 7 [-0.6322, -0.6341] 
```

这个怎么运作：

```
1: The list
>>> l=[-0.234, -0.04325, -0.43134, -0.315, -0.6322, -0.245,
... -0.5325, -0.6341, -0.5214, -0.531, -0.124, -0.0252]

2: Produce the keys:
>>> [int(i*10) for i in l]
[-2, 0, -4, -3, -6, -2, -5, -6, -5, -5, -1, 0]

3: Produce tuples to put in the dict:
>>> zip([int(i*10) for i in l],l)
[(-2, -0.234), (0, -0.04325), (-4, -0.43134), (-3, -0.315), (-6, -0.6322), 
 (-2, -0.245), (-5, -0.5325), (-6, -0.6341), (-5, -0.5214), (-5, -0.531), 
 (-1, -0.124), (0, -0.0252)]

4: unpack the tuples into k,v and loop over the list
>>>for k,v in zip([int(i*10) for i in l],l):

5: add k key to a dict (if not there) and append the float value to a list associated 
   with that key:
    d.setdefault(k,[]).append(v) 
```

我建议就这些语句编写 Python 教程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-30T02:57:30.010

这是你想要的吗？（示例输出会很有帮助:)

```
f = [-0.234, -0.04325, -0.43134, -0.315, -0.6322, -0.245, 
     -0.5325, -0.6341, -0.5214, -0.531, -0.124, -0.0252]

import numpy as np
data = np.array(f)
hist, edges = np.histogram(data, bins=10)
print hist 
```

产量：

```
 [2 3 0 1 0 1 2 0 1 2] 
```

这个 SO question [assignment points to bin](https://stackoverflow.com/questions/2144443/assigning-points-to-bins)可能会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-01T00:25:20.087

分箱可以通过以下方式完成[`itertools.groupby`](https://docs.python.org/3/library/itertools.html#itertools.groupby)：

```
import itertools as it

iterable = ['-0.234', '-0.04325', '-0.43134', '-0.315', '-0.6322', '-0.245',
            '-0.5325', '-0.6341', '-0.5214', '-0.531', '-0.124', '-0.0252']

a,b,c,d,e,f,g = [list(g) for k, g in it.groupby(sorted(iterable), key=lambda x: x[:4])]
c
# ['-0.234', '-0.245'] 
```

注意：这个简单的 key 函数假设 iterable 中的值在 -0.0 和 -10.0 之间。考虑`lambda x: "{:.1f}".format(float(x))`一般情况。

有关如何工作的详细信息，另请参阅这篇[文章](https://stackoverflow.com/a/45873519/4531270)`groupby`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-31T23:32:33.240

[`more_itertools`](https://github.com/erikrose/more-itertools)我们可以使用第三方库制作垃圾箱。

**给定**

```
iterable = (
    "-0.234 -0.04325 -0.43134 -0.315 -0.6322 -0.245 "
    "-0.5325 -0.6341 -0.5214 -0.531 -0.124 -0.0252"
).split()

iterable
# ['-0.234', '-0.04325', '-0.43134', '-0.315', '-0.6322', '-0.245', '-0.5325', '-0.6341', '-0.5214', '-0.531', '-0.124', '-0.0252'] 
```

**代码**

```
import more_itertools as mit

keyfunc = lambda x: float("{:.1f}".format(float(x)))
bins = mit.bucket(iterable, key=keyfunc)

keys = [-0.0,-0.1,-0.2, -0.3,-0.4,-0.5,-0.6]
a,b,c,d,e,f,g = [list(bins[k]) for k in keys]
c
# ['-0.234', '-0.245'] 
```

* * *

**细节**

我们可以通过 key 函数来 bin ，我们定义它来将数字格式化为单精度，`-0.213`即`-0.2`.

```
keyfunc = lambda x: float("{:.1f}".format(float(x)))
bins = mit.bucket(iterable, key=keyfunc) 
```

这些 bin 由 key 函数定义的键访问：

```
c = list(bins[-0.2])
c
# ['-0.234', '-0.245'] 
```

通过迭代键访问所有 bin：

```
f = lambda x: float("{:.1f}".format(float(x)))
bins = mit.bucket(iterable, key=keyfunc)

keys = [-0.0,-0.1,-0.2, -0.3,-0.4,-0.5,-0.6]
for k in keys:
    print("{} --> {}".format(k, list(bins[k]))) 
```

输出

```
-0.0 --> ['-0.04325', '-0.0252']
-0.1 --> ['-0.124']
-0.2 --> ['-0.234', '-0.245']
-0.3 --> ['-0.315']
-0.4 --> ['-0.43134']
-0.5 --> ['-0.5325', '-0.5214', '-0.531']
-0.6 --> ['-0.6322', '-0.6341'] 
```

列表理解和解包是另一种选择（参见代码示例）。

另请参阅[`more_itertools`文档](https://more-itertools.readthedocs.io/en/latest/api.html)以获取更多详细信息。

# php - PHP 从 MYSQL 制作数组

> ID：11270995
> 
> 赞同：0
> 
> 时间：2012-06-30T02:37:26.810
> 
> 标签：php, mysql, arrays, shopping-cart

我在 Authorize.net 网关上工作我需要为逐项账单创建下面的数组

```
$sql= "select *  from shop where cusid = '1'";
 $sqlexc= mysql_query($sql) or die(mysql_error());

$line_items = array();
while ($title = mysql_fetch_array($sqlexc)) {
    $line_items[] = ('Coupon',' $title[6]', '1', '0.99', 'Y');
} 
```

如何创建以下类型的数组

```
/*    $line_items = array(
    "Coupon1','description','2','10.99','Y'",
    "Coupon2','description','2','10.99','Y'",
    "Coupon3','description','2','10.99','Y'",);*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:03:06.327

```
$line_items = array();
while ($title = mysql_fetch_array($sqlexc)) {
    $line_items[] = $title;
}
foreach ($line_items as $row){
    echo $row[0]." ".$row[1]." ".$row[2]." ".$row[3]."<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:50:07.803

呃..如果你想让它完全一样......

```
$i=0;
$line_items = array();   
while ($title = mysql_fetch_array($sqlexc)) {
    $line_items[] = "Coupon" . ++$i . "', '" . $title[6] . "', '2', '10.99', 'Y'";
} 
```

但是我会在 mysql_fetch_array 上使用 mysql_fetch_assoc （实际上我会切换到 PDO，因为不推荐使用 mysql）

# timezone - 在 Vertica 中将一个时区的日期时间值转换为另一个时区

> ID：11270998
> 
> 赞同：4
> 
> 时间：2012-06-30T02:38:10.333
> 
> 标签：timezone, vertica

Vertica 中是否有任何东西可以获得与 Oracle 中以下 Sql 查询相同的输出？

```
SELECT FROM_TZ(CAST(TO_DATE('1999-12-01 11:00:00', 
      'YYYY-MM-DD HH:MI:SS') AS TIMESTAMP), 'America/New_York') 
   AT TIME ZONE 'America/Los_Angeles' "West Coast Time" 
   FROM DUAL;

West Coast Time
------------------------------------------------
01-DEC-99 08.00.00.000000 AM AMERICA/LOS_ANGELES 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:22:48.957

我能够转换。下面给出的示例查询：

```
SELECT TIMESTAMP WITH TIME ZONE '2012-07-02 10:00:00-04' AT TIME ZONE 'GMT';
      timezone
---------------------
2012-07-02 14:00:00
(1 row)

SELECT TIMESTAMP WITH TIME ZONE '2012-07-02 14:00:00-00' AT TIME ZONE 'EDT';
      timezone
---------------------
2012-07-02 10:00:00
(1 row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T16:36:14.030

可能会有所帮助。oracle中有一个用于此目的的功能

[https://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2036.htm](https://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2036.htm)

```
select NEW_TIME (TO_DATE ('2011/11/11 01:45', 'yyyy/mm/dd HH24:MI'), 'AST', 'MST') from dual; 
```

# c# - 如何将 sql 查询的结果映射到对象上？

> ID：11270999
> 
> 赞同：26
> 
> 时间：2012-06-30T02:38:23.077
> 
> 标签：c#, sql

目前，我正在使用这样的东西：

```
 try
    {
      dr = SQL.Execute(sql);

      if(dr != null) {
         while(dr.Read()) {
           CustomObject c = new CustomObject();
           c.Key = dr[0].ToString();
           c.Value = dr[1].ToString();
           c.Meta = dr[2].ToString();
           customerInfo.CustomerList.Add(c);
         }
      }
      else
      {
          customerInfo.ErrorDetails="No records found";
      } 
```

有没有一种方法可以直接进行此映射，而不是我手动进行分配（假设列名与字段名匹配）。

然而，一个要求是我想通过我目前使用 sql 查询的方法而不是通过使用纯 LINQ 的方法来做到这一点。一方面，SQL 查询足够大，涉及复杂的 JOIN 并且已经过彻底的测试，所以我现在不想引入更多的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T07:09:20.840

一个简单的解决方案是为您创建一个构造函数，该构造函数`CustomObject`采用 a `DataRow`（来自示例，所以如果它是另一个类，请纠正我）。

在你的新构造函数中，按照你自己的例子做。

```
public CustomObject(DataRow row)
{
    Key = row[0].ToString();
    // And so on...
} 
```

另一种方法是引入泛型，并在您的 SQL 类中创建一个新函数

示例（从[将参数传递给模板类型的 C# generic new() 中获取](https://stackoverflow.com/questions/840261/passing-arguments-to-c-sharp-generic-new-of-templated-type)代码）：

```
// This function should reside in your SQL-class.
public IEnumerable<T> ExecuteObject<T>(string sql)
{
    List<T> items = new List<T>();
    var data = ExecuteDataTable(sql); // You probably need to build a ExecuteDataTable for your SQL-class.
    foreach(var row in data.Rows)
    {
        T item = (T)Activator.CreateInstance(typeof(T), row);
        items.Add(item);
    }
    return items;
} 
```

示例用法：

```
public IEnumerable<CustomObject> GetCustomObjects()
{
    return SQL.ExecuteObject<CustomObject>("SELECT * FROM CustomObject");
} 
```

我已经在 LinqPad 中测试了这段代码，它应该可以工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-23T07:59:25.197

您可以通过为您的要求创建通用方法来实现。您也可以将新方法作为数据表的扩展。

```
 public static List<T> ToList<T>(this DataTable table) where T : class, new()
{
    try
    {
        List<T> list = new List<T>();

        foreach (var row in table.AsEnumerable())
        {
            T obj = new T();

            foreach (var prop in obj.GetType().GetProperties())
            {
                try
                {
                    PropertyInfo propertyInfo = obj.GetType().GetProperty(prop.Name);
                    propertyInfo.SetValue(obj, Convert.ChangeType(row[prop.Name], propertyInfo.PropertyType), null);
                }
                catch
                {
                    continue;
                }
            }

            list.Add(obj);
        }

        return list;
    }
    catch
    {
        return null;
    }
} 
```

}

用法：

```
 DataTable dtCustomer = GetCustomers();
    List<CustomObject> CustomObjectList = dtCustomer.ToList<CustomObject>(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-23T09:42:02.927

您应该研究 MicroORM。与提供您必须使用的 SDL 的常规 ORM 不同，MicroORM 允许您使用自己的 SQL 查询，并且仅提供从 SQL 结果集到 C# 对象以及从 C# 对象到 SQL 参数的映射。

我最喜欢的是[PetaPoco](https://github.com/CollaboratingPlatypus/PetaPoco)，它还提供了一个查询构建器，它使用您自己的 SQL，但对参数编号进行了一些巧妙的操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-18T01:31:38.077

[@user1553525](https://stackoverflow.com/users/1553525/user1553525)的答案很好，但是，如果您的列名与您的属性名称不完全匹配，则它不起作用。

因此，首先您需要创建一个自定义属性。然后在你的类中使用你试图反序列化的属性，最后，你想要反序列化 DataTable。

## 自定义属性

我们创建了一个自定义属性，该属性将应用于我们类内部的属性。我们创建类以具有`Name`稍后将用于从 DataTable 中获取正确列的属性。

```
[AttributeUsage(AttributeTargets.Property, Inherited = false)]
public class MySqlColName : Attribute
{
    private string _name = "";
    public string Name { get => _name; set => _name = value; }

    public MySqlColName(string name)
    {
        _name = name;
    }
} 
```

## 反序列化的类

接下来，在我们要填充的类中，我们将使用`[MySqlColName]`我们刚刚创建的属性声明将链接到类中的属性的列名。

但是，如果属性名称与数据库列相同，我们不需要在属性中指定列名称，因为该`.ToList<>()`函数将假定属性名称中的列名称。

```
public class EventInfo
{
    [MySqlColName("ID")]
    public int EventID { get; set; }

    //Notice there is no attribute on this property? 
    public string Name { get; set; }

    [MySqlColName("State")]
    public string State { get; set; }

    [MySqlColName("Start_Date")]
    public DateTime StartDate { get; set; }

    [MySqlColName("End_Date")]
    public DateTime EndDate { get; set; }

} 
```

## 数据表 ToList 扩展方法

最后，我们修改[@user1553525](https://stackoverflow.com/users/1553525/user1553525)的答案，添加检查以查看是否提供了我们的自定义属性。如果是，那么我们将列的名称设置为提供的名称，否则，我们使用属性名称（参见 try 块内的代码）。

```
public static List<T> ToList<T>(this DataTable table) where T : class, new()
{
    try
    {
        List<T> list = new List<T>();

        foreach (var row in table.AsEnumerable())
        {
            T obj = new T();

            foreach (var prop in obj.GetType().GetProperties())
            {
                try
                {
                    //Set the column name to be the name of the property
                    string ColumnName = prop.Name;

                    //Get a list of all of the attributes on the property
                    object[] attrs = prop.GetCustomAttributes(true);
                    foreach (object attr in attrs)
                    {
                        //Check if there is a custom property name
                        if (attr is MySqlColName colName)
                        {
                            //If the custom column name is specified overwrite property name
                            if (!colName.Name.IsNullOrWhiteSpace())                                        
                                ColumnName = colName.Name;
                        }
                    }

                    PropertyInfo propertyInfo = obj.GetType().GetProperty(prop.Name);

                    //GET THE COLUMN NAME OFF THE ATTRIBUTE OR THE NAME OF THE PROPERTY
                    propertyInfo.SetValue(obj, Convert.ChangeType(row[ColumnName], propertyInfo.PropertyType), null);
                }
                catch
                {
                    continue;
                }
            }

            list.Add(obj);
        }

        return list;
    }
    catch
    {
        return null;
    }
}//END METHOD 
```

## 用法

最后，我们可以调用该`.ToList<>()`方法并获取序列化对象的列表

```
List<EventInfo> CustomObjectList;

using (DataTable dtCustomer = GetDataTable("SELECT * FROM EventIndex"))
{
    CustomObjectList = dtCustomer.ToList<EventInfo>();
} 
```

* * *

***旁注：***我使用了一些自定义方法

```
public static bool IsNullOrWhiteSpace(this string x)
{
    return string.IsNullOrWhiteSpace(x);
}

public static DataTable GetDataTable(string Query)
{
    MySqlConnection connection = new MySqlConnection("<Connection_String>");
    try
    {            
        DataTable data = new DataTable();
        connection.Open();
        using (MySqlCommand command = new MySqlCommand(Query, connection))
        {
            data.Load(command.ExecuteReader());
        }
        return data;

    }
    catch (Exception ex)
    {
        // handle exception here
        Console.WriteLine(ex);
        throw ex;
    }
    finally
    {
        connection.Close();
    }            
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-10T14:26:14.297

**假设：**如果您只需要用于序列化或简单的临时输出的对象。

你可以像这样使用`ExpandoObject`和`SqlDataReader.GetSchemaTable()`：

```
 private IEnumerable<dynamic> ReaderToAnonymmous(SqlCommand comm) {
        using (var reader = comm.ExecuteReader()) {
            var schemaTable = reader.GetSchemaTable();

            List<string> colnames = new List<string>();
            foreach (DataRow row in schemaTable.Rows) {
                colnames.Add(row["ColumnName"].ToString());
            }

            while (reader.Read()) {
                var data = new ExpandoObject() as IDictionary<string, Object>;
                foreach (string colname in colnames) {
                    var val = reader[colname];
                    data.Add(colname, Convert.IsDBNull(val) ? null : val);
                }

                yield return (ExpandoObject)data;
            }
        }
    } 
```

尽管发布了更快的解决方案（我将其发布为临时 SQL/Reader 结果/输出的替代惰性方法）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-10T14:12:12.223

下面的函数接受一个 SQL 字符串和一个对象，它要求对象在 select 语句中的每一列都有一个属性。该对象必须被实例化。

```
public object SqlToSingleObject(string sSql, object o)
{
    MySql.Data.MySqlClient.MySqlDataReader oRead;
    using (ConnectionHelper oDb = new ConnectionHelper())
    {
        oRead = oDb.Execute(sSql);
        if (oRead.Read())
        {
            for (int i = 0; i < oRead.FieldCount; i++)
            {
                System.Reflection.PropertyInfo propertyInfo = o.GetType().GetProperty(oRead.GetName(i));
                propertyInfo.SetValue(o, Convert.ChangeType(oRead[i], propertyInfo.PropertyType), null);
            }

            return o;
        }
        else
        {
            return null;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-16T13:07:04.193

在搜索此答案时，我发现您可以使用 Dapper 库：[https ://dapper-tutorial.net/knowledge-base/44980945/querying-into-a-complex-object-with-dapper](https://dapper-tutorial.net/knowledge-base/44980945/querying-into-a-complex-object-with-dapper)

你可以使用这样的东西：

```
 using (var connection = new SqlConnection(ConnectionString))
        {
            connection.Open();
            IList<CustomObject> result = connection.Query<CustomObject>(sql, commandType: CommandType.Text).ToList();
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-10T02:26:58.653

虽然这个问题一直存在，但我找不到一个干净的解决方案。出于我的目的，我想出了以下在我的情况下效果很好的方法。

```
 using System.Dynamic;

    private IEnumerable<ExpandoObject> GetQueryToList()
    {
        try
        {
            using (var conn = new SqlConnection(ConnectionString))
            using (var cmd = new SqlCommand(MyQuery, conn))
            {
                var list = new List<ExpandoObject>();
                conn.Open();
                var reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                    var expandoObject = new ExpandoObject();
                    for (var i = 0; i < reader.FieldCount; i++)
                    {
                        ((IDictionary<string, object>) expandoObject).Add(
                            reader.GetName(i), reader[i]);
                    }
                    list.Add(expandoObject);
                }

                reader.Close();
                return list;
            }
        }
        catch (Exception ex)
        {
            var m = MethodBase.GetCurrentMethod();
            Console.WriteLine(ex.Message + " " + m.Name);
        }

        return null;
    } 
```