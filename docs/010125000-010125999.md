# StackOverflow 问答 10125000-10125999

# asp.net - 如何在具有限制的 IIS7 中添加 Access-Control-Allow-Origin 标头

> ID：10125004
> 
> 赞同：25
> 
> 时间：2012-04-12T13:52:45.480
> 
> 标签：asp.net, iis, cross-domain, font-face, access-control

我需要从我也拥有的服务器访问我的应用程序中的字体文件。它适用于除 Firefox 之外的所有浏览器，而且我知道我需要添加一个“Access-Control-Allow-Origin”标头。

因此，在我的服务器的根目录中，我添加了另一个带有 web.config 的应用程序：

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
  </customHeaders>
</httpProtocol> 
```

它工作正常，但是我不确定这里有什么安全问题。在这里指定可以访问它的域是一个很好的安全解决方案吗？我想我宁愿只为字体文件夹中的文件而不是整个应用程序设置此设置。我看到了一个 .htaccess 解决方案，它需要将文件放在所需的文件夹中，但是如何使用 web.config 或 IIS 设置来做到这一点？

阿帕奇：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "http://yourdomain.com"
</IfModule>
</FilesMatch> 
```

非常感谢，

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T16:15:33.293

您是否尝试将 web.config 仅放在所需的子文件夹中？看看“ [ASP.NET 配置文件层次结构和继承](http://msdn.microsoft.com/en-us/library/ms178685.aspx)”。

# android - 在 Android 手机上查找 SQL 数据库文件

> ID：10125007
> 
> 赞同：0
> 
> 时间：2012-04-12T13:53:00.677
> 
> 标签：android, sqlite, eclipse-adt

我创建了一个使用 Android SQL 数据库的应用程序。有没有办法在安装了应用程序的手机上找到这个数据库？

本质上，我想使用 SQL 数据库查看器查看所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:58:23.167

`root/data/data/package/databases/database`

它应该在这样的文件中，在模拟器中，您可以使用 ddms 中的文件资源管理器直接进入该文件，否则使用有根电话和 ES 文件资源管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:04:30.353

如果您使用的是模拟器，则可以使用 android 安装的 sdk-platform 文件夹中的 adb 工具。

类似于以下内容：

```
./adb shell
#sqlite3 /data/data/com.example.package/databases/database.db 
```

然后，您应该能够进行查询。

如果它在手机上，然后尝试像上面一样提取数据库并使用 sqlite3 工具查询该数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:06:36.103

这里已经回答了一个类似的问题：[https ://stackoverflow.com/a/4556642/450534](https://stackoverflow.com/a/4556642/450534)

那里提供的相同答案是：

如果出于某种原因，您需要访问手机上的数据库，您必须在手机上具有 root 访问权限（即超级用户）。然后，您将需要一个使用 root 权限的文件资源管理器来授予您对系统文件的访问权限。

如果以上都存在，那么您将在以下位置找到应用程序数据库：

**/data/data/com.yourpackage.name/databases。**

# python - Pyserial 缓冲区的填充速度比我读的快

> ID：10125009
> 
> 赞同：6
> 
> 时间：2012-04-12T13:53:11.017
> 
> 标签：python, serial-port, pyserial

我正在以 921600 的波特率通过串行从微控制器读取数据。我正在读取大量 ASCII csv 数据，并且由于它来得如此之快，因此缓冲区已被填满，并且所有其余数据在之前都丢失了我可以阅读它。我知道我可以手动编辑 serialwin32 的 pyserial 源代码以增加缓冲区大小，但我想知道是否有另一种解决方法？

我只能估计我将收到的数据量，但它大约是 200kB 的数据量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:59:06.720

在将命令发送到 uC 以发送数据**之前**，您是否考虑过在单独的线程中从串行接口读取？

这将消除写入命令和开始读取之后的一些延迟。还有[其他 SO 用户](https://stackoverflow.com/questions/8796800/pyserial-possible-to-write-to-serial-port-from-thread-a-do-blocking-reads-fro)使用这种方法取得了成功，当然他们没有缓冲区溢出。

如果不清楚，请告诉我，我可以拼凑一些东西来展示这一点。

**编辑**

再想一想，如果您尝试从缓冲区读取并将其写入文件系统，即使独立线程也可能无法拯救您。为了尽量减少处理时间，您可以考虑一次读取 100 个字节，`serial.Read(size=100)`并将该数据推送到队列中，以便在传输完成后处理所有数据

**伪代码示例**

```
def thread_main_loop(myserialobj, data_queue):
    data_queue.put_no_wait(myserialobj.Read(size=100))

def process_queue_when_done(data_queue):
    while(1):
        if len(data_queue) > 0:
            poped_data = data_queue.get_no_wait()
            # Process the data as needed
        else:
            break; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:56:30.473

有一个“接收缓冲区”滑块，可从设备管理器中 com 端口的属性页面访问。它可以通过“端口设置”​​选项卡上的“高级”按钮找到。

![com 端口的高级设置](../Images/825d0da7b83a9fd698192b2336e7caa8.png)

*更多信息：*

[http://support.microsoft.com/kb/131016](http://support.microsoft.com/kb/131016)在标题**接收缓冲区下**

[http://tldp.org/HOWTO/Serial-HOWTO-4.html](http://tldp.org/HOWTO/Serial-HOWTO-4.html)在标题下的**中断**

尝试将其降低一两个档次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T21:47:56.633

您不需要手动更改 pyserial 代码。

如果你在 Windows 平台上运行你的代码，你只需要在你的代码中添加一行

```
ser.set_buffer_size(rx_size = 12800, tx_size = 12800) 
```

其中 12800 是我选择的任意数字。您可以将接收（rx）和传输（tx）缓冲区设为 2147483647a

* * *

也可以看看：

[https://docs.python.org/3/library/ctypes.html](https://docs.python.org/3/library/ctypes.html)

[https://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readbuffersize(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readbuffersize(v=vs.110).aspx)

您也许可以从 DLL 设置串行端口 // 设置串行

```
 mySerialPort.BaudRate = 9600;
 mySerialPort.PortName = comPort;
 mySerialPort.Parity = Parity.None;
 mySerialPort.StopBits = StopBits.One;
 mySerialPort.DataBits = 8;
 mySerialPort.Handshake = Handshake.None;
 mySerialPort.RtsEnable = true;
 mySerialPort.ReadBufferSize = 32768; 
```

属性值 类型：System.Int32 缓冲区大小，以字节为单位。默认值为 4096；最大值是正整数，或 2147483647

然后在 Python 中打开并使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T07:52:39.907

令我有些惊讶的是，尚未有人提及此类问题的正确解决方案（如果可用），即通过软件 (XON/XOFF) 或微控制器与其接收器之间的硬件流控制进行有效的流控制。[这篇网络文章](https://www.lammertbies.nl/comm/info/RS-232_flow_control.html)很好地描述了这个问题。

可能是源设备不支持此类协议，在这种情况下，您会遇到一系列解决方案，这些解决方案将问题向上委托给更多可用资源的地方（将其从 UART 缓冲区移动到驱动程序并向上移动到您的应用代码）。如果您正在丢失数据，那么在可能的情况下尝试实施较低的数据速率当然是明智的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-29T12:08:28.383

对我来说，问题是从 Arduino 接收数据时缓冲区过载。我所要做的就是`mySerialPort.flushInput()`它奏效了。

我不知道为什么`mySerialPort.flush()`没有工作。`flush()`必须只刷新传出数据？

我所知道的只是`mySerialPort.flushInput()`解决了我的问题。

# java - JSONObject 搜索约束

> ID：10125012
> 
> 赞同：0
> 
> 时间：2012-04-12T13:53:22.013
> 
> 标签：java, json

我收到 json，它肯定包含指向 json-hash 的键，但是当我这样做时

```
JSONArray jsonRecipeTypes = (JSONArray) jRoot.get("dishGroups"); 
```

jsonRecipeTypes 包含 null。有搜索限制吗？ps：我的钥匙位于 json hierachy 的第二层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:14:01.053

如果您的密钥位于第二级，则在搜索根目录时将找不到它。只能查询根对象的属性，即这里没有复杂的搜索功能。它更像是在可能包含其他地图的地图中查找。

# php - 自定义路由元素在 cakephp 中不起作用

> ID：10125023
> 
> 赞同：0
> 
> 时间：2012-04-12T13:54:18.023
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.1。这是交易...

我想要一个这种格式的网址：

```
http://mysite.com/[username]/ 
```

哪里`[username]`可以是动态的并调用已经实现的“用户”控制器。

这是 routes.php 中定义的路由：

```
Router::connect(
    '/:username',
    array('controller' => 'users', 'action' => 'profile'),
    array(
        'pass' => array('username'),
        'username' => '[a-zA-Z0-9][/-_.]+'
    )); 
```

如果我尝试访问[http://mysite.com/testuser](http://mysite.com/testuser)，则会显示此错误：

```
"Missing Controller
Error: testuserController could not be found." 
```

这是我的整个 routes.php 文件：

```
 <?php
/**
 * Routes configuration
 *
 * In this file, you set up routes to your controllers and their actions.
 * Routes are very important mechanism that allows you to freely connect
 * different urls to chosen controllers and their actions (functions).
 *
 * PHP 5
 *
 * CakePHP(tm) : Rapid Development Framework (http://cakephp.org)
 * Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 * @link          http://cakephp.org CakePHP(tm) Project
 * @package       app.Config
 * @since         CakePHP(tm) v 0.2.9
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 */

    Router::connect('/', array('controller' => 'home', 'action' => 'index'));

    Router::connect(
    '/:username',
    array('controller' => 'users', 'action' => 'profile'),
    array(
        'pass' => array('username'),
        'username' => '[a-zA-Z0-9][/-_.]+'
    ));

/**
 * Load all plugin routes.  See the CakePlugin documentation on 
 * how to customize the loading of plugin routes.
 */
    CakePlugin::routes();

/**
 * Load the CakePHP default routes. Remove this if you do not want to use
 * the built-in default routes.
 */
    require CAKE . 'Config' . DS . 'routes.php'; 
```

我试过这样的事情：

```
Router::connect(
    '/users/:username',
    array('controller' => 'users', 'action' => 'profile'),
    array(
        'pass' => array('username'),
        'username' => '[a-zA-Z0-9][/-_.]+'
    )); 
```

这样它就起作用了......！然后我可以得到： $this->request->params['pass'][0]

所以，现在的问题是：为什么它在路径的第一级（domain.com/:nickname）中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:59:55.543

尝试：

```
Router::connect('/*', array('controller' => 'users', 'action' => 'actionName')); 
```

然后在你的用户控制器中，如果你有

```
public function foo($username){
   ...
} 
```

$username 将包含 URL 中的用户名

# axapta - 更改 ActionPane 中按钮的标签

> ID：10125029
> 
> 赞同：2
> 
> 时间：2012-04-12T13:54:34.197
> 
> 标签：axapta, dynamics-ax-2009, x++

我在 Dynamics AX 2009 中有一个表单，上面有一个 ActionPane。在这个 ActionPane 中，我有几个 ActionPaneTab，每个都包含一组 ButtonGroup。我在其中一个中有一个按钮，我希望能够动态更改其标签。

这是我在覆盖“点击”方法时使用的代码：

```
void clicked()
{
    ;
    super();
    if(Element.switch())
    {
        this.text("Go to X");
    }
    else
    {
        this.text("Go to Y");
    }
} 
```

请注意，将 super(); 在方法结束时不会改变任何东西。Element.switch() 返回一个布尔值。相反，我还尝试了这段代码：

```
btn_switch.text("..."); 
```

...并将按钮的属性“自动声明”设置为 true（而不是使用“this”调用方法）。它仍然行不通。

使用调试器我可以看到这段代码被正确执行，它只是没有对按钮的标签做任何事情。

我想知道当按钮位于 ActionPane 中时是否可以更改按钮的标签（我在文档中查找了信息，但找不到任何相关信息）。更改位于ActionPane*之外*的按钮标签（即表单上的常规按钮）就像一个魅力。

也许有人可以帮忙？我可能在这里做错了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:42:07.250

不幸的是，由于按钮在 ActionPane 内的使用方式，在 Dynamics AX 2009 中没有办法做到这一点，但该问题已在 Dynamics AX 2012 中得到解决。

您可以通过使用两个按钮来伪造它，每个按钮都有一个标签，然后根据您要显示的标签设置每个按钮的可见性。

# plone - 组到角色映射与 Plone 中的本地角色

> ID：10125032
> 
> 赞同：1
> 
> 时间：2012-04-12T13:54:54.053
> 
> 标签：plone

在portal_workflow - 选项卡组中，可以指定组到角色的映射。

在“共享”选项卡中，可以基于文件夹为组选择角色。

在工作流的给定状态和特定文件夹中分配给用户、映射或本地角色的优先级是什么？

它们是添加剂吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:00:25.427

最终，它们是一样的。*工作流程会修改（在转换期间）使用“共享*”选项卡手动编辑的相同设置。因此，转换可能会覆盖您之前所做的设置。

假设您希望某个用户组拥有所有处于*私有*状态的对象的*编辑*者角色。您将配置工作流以管理该组并编辑组以使*Editor*角色处于*私有*状态，而不是其他状态。现在，当您单击*更新安全设置时，该组将在该工作流控制的所有**私有*对象中获得定义的角色。如果您现在通过*共享*选项卡对该特定组进行手动修改，您的修改将在下一次工作流转换或*更新安全设置*运行后丢失。*`simple_publication_workflow`*

# c# - 如何为从源文件编译的应用程序分配自定义图标？

> ID：10125034
> 
> 赞同：3
> 
> 时间：2012-04-12T13:55:11.573
> 
> 标签：c#, .net, icons, csharpcodeprovider

在我的程序中，我使用 CSharpCodeProvider 从源文件编译另一个应用程序，我使用的代码如下：

```
public static bool CompileExecutable(String sourceName)
{
    FileInfo sourceFile = new FileInfo(sourceName);
    CodeDomProvider provider = null;
    bool compileOk = false;

    // Select the code provider based on the input file extension.
    if (sourceFile.Extension.ToUpper(CultureInfo.InvariantCulture) == ".CS")
        provider = CodeDomProvider.CreateProvider("CSharp");
    else if (sourceFile.Extension.ToUpper(CultureInfo.InvariantCulture) == ".VB")
        provider = CodeDomProvider.CreateProvider("VisualBasic");
    else
    {
        Console.WriteLine("Source file must have a .cs or .vb extension");
    }
    if (provider != null)
    {
        // Format the executable file name.
        // Build the output assembly path using the current directory
        // and <source>_cs.exe or <source>_vb.exe.

        String exeName = String.Format(@"{0}\{1}.exe",
            System.Environment.CurrentDirectory,
            sourceFile.Name.Replace(".", "_"));

        CompilerParameters cp = new CompilerParameters();

        // Generate an executable instead of  a class library.
        cp.GenerateExecutable = true;

        // Specify the assembly file name to generate.
        cp.OutputAssembly = exeName;

        // Save the assembly as a physical file.
        cp.GenerateInMemory = false;

        // Set whether to treat all warnings as errors.
        cp.TreatWarningsAsErrors = false;

        cp.ReferencedAssemblies.Add("System.dll");
        cp.ReferencedAssemblies.Add("System.Windows.Forms.dll");
        cp.ReferencedAssemblies.Add("mscorlib.dll");
        cp.ReferencedAssemblies.Add("Microsoft.VisualBasic.dll");

        // Invoke compilation of the source file.
        CompilerResults cr = provider.CompileAssemblyFromFile(cp,
            sourceName);

        if (cr.Errors.Count > 0)
        {
            // Display compilation errors.
            Console.WriteLine("Errors building {0} into {1}",
                sourceName, cr.PathToAssembly);
            foreach (CompilerError ce in cr.Errors)
            {
                Console.WriteLine("  {0}", ce.ToString());
                Console.WriteLine();
            }
        }
        else
        {
            // Display a successful compilation message.
            Console.WriteLine("Source {0} built into {1} successfully.", sourceName, cr.PathToAssembly);
        }

        // Return the results of the compilation.
        if (cr.Errors.Count > 0)
            compileOk = false;
        else
            compileOk = true;
    }
    return compileOk;
} 
```

我放了一个名为 (source.cs) 的文件，其中包含我要编译的程序的源代码，我将它放在与我的应用程序相同的目录中，并从我的应用程序中调用该函数

```
CompileExecutable("source.cs"); 
```

然后源代码被编译并保存到与我的应用程序相同的目录中。

我现在要做的是添加一个选项，让我为编译的源代码选择自定义图标，因此输出可执行文件将具有我选择的图标，但我不知道如何分配输出可执行文件的编译前的图标。

关于如何在编译之前为输出可执行文件设置自定义图标的任何帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T14:08:36.153

要建立在[Brian's answer 的](https://stackoverflow.com/a/10125205/635634)基础上，您可以通过指定[`/win32icon`](http://msdn.microsoft.com/en-us/library/2aaxe43f%28v=vs.71%29.aspx)编译器选项来设置自定义图标：

```
CompilerParameters parameters = new CompilerParameters();
parameters.CompilerOptions = @"/win32icon:C:\full\path\to\icon.ico"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:05:03.077

查看[/win32icon](http://msdn.microsoft.com/en-us/library/2aaxe43f%28v=vs.71%29.aspx)编译器选项。

概括：

> /win32icon 选项在输出文件中插入一个 .ico 文件，从而使输出文件在 Windows 资源管理器中具有所需的外观。

# html - 右浮动不改变顺序，强制收缩

> ID：10125036
> 
> 赞同：1
> 
> 时间：2012-04-12T13:55:16.603
> 
> 标签：html, css

这个问题可能很容易解决，但我不确定我做错了什么。

我有以下代码：

HTML：

```
<div class='absolute'>
   <div class='container'>
      <span>blabla</span>
      unknown number of spans..
   </div>
</div> 
```

CSS：

```
.absolute{
    position: absolute;
    bottom: 0px;
    right: 0px;
}
.container{
    float: right;
}
span{
    display:block;
    float: left;
} 
```

基本上我想要的是将所有跨度都放在右下角的一条直线上。绝对 div 完美地工作，容器 div 完全像我想要的那样浮动。问题是跨度拒绝排成一排。我得到以下外观： ![在此处输入图像描述](../Images/9120ed2b151d451b59ca4588b627464a.png)

红色是绝对 div，蓝色是容器 div，绿色是跨度。好吧，你看到我的问题..

我试图给容器 div 一个宽度。这会产生一条直线，就像我想要的那样，除了跨度向左浮动到蓝色容器 div 的宽度。而且我无法计算宽度，因为我不知道跨度的数量。

那么如何在不更改任何顺序且不为容器 div 设置宽度的情况下解决这个问题呢？或者更确切地说，为什么容器 div 会缩小，而不是像浮动一样宽？

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:10:02.370

change display:block to display:inline-block?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:00:00.213

将您的范围更改为：

```
display: inline-block; 
```

应该使它们彼此相邻。IE7 或更早版本不支持此功能，但如果这对您很重要，您可以这样做：

```
display: inline-block; *display: inline; 
```

哦，移除留在跨度上的浮子。

# android - 如何在 Android 上使用 pic.twitter.com 将图像上传到 Twitter

> ID：10125038
> 
> 赞同：3
> 
> 时间：2012-04-12T13:55:26.540
> 
> 标签：android, twitter4j

我使用 twitter4j 库来发推文，但如果没有 TwitPic、yFrog 等任何其他服务，我无法处理如何上传图像。

twitter4j 支持这个，还是我必须使用其他服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:22:21.477

您需要稍微修改 twitter4j 代码。

这里有一个解释：http: [//sholtz9421.wordpress.com/2011/10/29/using-update_with_media-with-twitter4j/](http://sholtz9421.wordpress.com/2011/10/29/using-update_with_media-with-twitter4j/)

# jquery - jQuery UI 盲效 - 从底部显示

> ID：10125040
> 
> 赞同：6
> 
> 时间：2012-04-12T13:55:30.313
> 
> 标签：jquery, jquery-ui

这可能非常明显，我完全想念它。

我已经搜索了几个小时，似乎无法找到一种方法来使用 jQuery 从下往上显示隐藏的 div。我想要实现的与以下链接完全相同，但相反：http: [//jqueryui.com/demos/show/](http://jqueryui.com/demos/show/)

我可以将一个 div 从底部滑到顶部，但这会在它移动时显示出来，而不是被“掩盖”。

就像我说的，这可能（应该？）真的很明显，我没有看到，但我一直在寻找年龄，无法找到解决这个相对简单问题的方法。

谢谢，

罗尼

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T16:02:54.653

您正在寻找的效果有点难以实现，但即使没有包装器元素，也可以做到。

这里的主要问题是元素自然呈现自上而下，而不是自下而上。`top`为相对定位元素的 the和CSS 属性设置动画`height`允许我们实现上滑效果，但该元素仍会自上而下呈现：

```
+-------------------------------------------+
|                                           |  ^
|                                           |  |  Hidden area collapses upwards.
|                                           |  |
+-------------------------------------------+ <-- 'top'
|                                           |  ^
|  |  Upper part of element (visible).      |  |  
|  |                                        |  |  Animation goes bottom-up.
|  |  Element still renders top-down.       |  |  
|  |                                        |  |
+--|----------------------------------------+ <-- 'top + height' 
|  |                                        |  |
|  |  Lower part of element (hidden).       |  |
|  V                                        |  |
+-------------------------------------------+ 
```

如果我们想模拟自底向上渲染，我们必须在动画期间修改元素的[scrollTop](https://developer.mozilla.org/en/DOM/element.scrollTop)属性，以使其下部始终保持在视图中：

```
+-------------------------------------------+
|                                           |  ^
|  |  Upper part of element (hidden).       |  |  Hidden area collapses upwards.
|  |                                        |  |
+--|----------------------------------------+ <-- 'top' and 'scrollTop'
|  |                                        |  ^
|  |  Element still renders top-down.       |  |  
|  |                                        |  |  Animation goes bottom-up.
|  |  Lower part of element (visible).      |  |  
|  V                                        |  |
+-------------------------------------------+ <-- 'top + height' 
```

我们可以将[animate()](http://api.jquery.com/animate/)与一起使用`scrollTop`，但在我的测试中与它一起使用`top`并且`height`无法正常工作（我怀疑在第一个动画步骤中`scrollTop`被重置`top`或被`height`修改，所以它最终被卡住了`0`）。

为了解决这个问题，我们可以`scrollTop`通过我们可以传递给的可选[step](http://api.jquery.com/animate/#step)函数来处理自己`animate()`。这个函数用两个参数调用，`now`和是动画属性的当前值，是`fx`有用信息的包装对象，比如被动画的元素和属性。`now``fx`

由于我们总是希望`scrollTop`与 相同`top`，因此我们只需要测试是否在我们的函数`top`中进行动画处理。`step`如果是，我们设置`scrollTop`为`now`。这个解决方案给出了可以接受的结果，尽管它对我的口味来说有点闪烁（不过，这可能是我的浏览器的产物）。

因此，总而言之，要实现这种效果，我们必须：

*   获取元素的原始高度，
*   制作元素`position: relative;`，以便我们可以为其`top`属性设置动画，
*   `top`通过将元素设置为原始高度和`height`来折叠元素`0`，
*   显示元素（在你的小提琴`display: none;`中是必要的，因为应用了），
*   动画`top`到原始高度`0`，`height`
*   给出每个动画步骤`scrollTop`的值`top`。

导致以下代码：

```
$("#click").click(function() {
    var $revealMe = $("#revealMe");
    var originalHeight = $revealMe.height();
    $revealMe.css({
        position: "relative",
        top: originalHeight,
        height: 0
    }).show().animate({
        top: 0,
        height: originalHeight
    }, {
        duration: 1000,
        step: function(now, fx) {
            if (fx.prop == "top") {
                $(fx.elem).scrollTop(now);
            }
        }
    });
}); 
```

你可以在[这个 fiddle](http://jsfiddle.net/gBY8V/1/)中测试它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T14:06:53.793

使用带有方向选项的幻灯片而不是盲目的怎么样？这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/mesWL/)**。

jQuery：

```
$( "#effect" ).show( 'slide', { direction: "down" } , 500); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-09T16:05:13.820

如果您可以使用 jQuery UI 库，您可以：

```
$("div").hide("blind", {"direction": "down"});
$("div").show("blind", {"direction": "down"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:08:07.667

这不是诀窍吗：

```
$("div").show('blind', {}, 'slow'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-15T18:38:59.163

**盲效果**方向默认：`"up"`。

可能的值：`up`, `down`, `left`, `right`, `vertical`, `horizontal`.

`**[Documentation](http://jqueryui.com/?s=blind)**`

**例子：**

```
$( document ).click(function() {
  $( "#toggle" ).toggle( "blind", {"direction": "down"}, 1000 );
});
```

```
#toggle {
  width: 100px;
  height: 100px;
  background: #ccc;
}
```

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<p>Click anywhere to toggle the box.</p>
<div id="toggle"></div>
```

# ios - 您可以在 iOS 应用程序中全局禁用旋转吗？

> ID：10125050
> 
> 赞同：27
> 
> 时间：2012-04-12T13:56:50.060
> 
> 标签：ios, xcode

我有一个由许多视图控制器组成的应用程序......在项目摘要中，我已将纵向方向设置为唯一支持的设备方向。

但是，当横向转动时，该应用程序仍然会变得混乱。

我的问题是，有没有办法通过应用程序委托或其他方式全局禁用自动旋转？

还是我必须进入我所有的视图控制器并添加“shouldAutorotateToInterfaceOrientation”方法？

只是不想错过将它添加到一个或什么...

谢谢！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-26T12:50:31.377

在 Info.plist 中展开“支持的界面方向”并删除横向项目，使您的应用程序仅在纵向模式下运行。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-04-15T07:47:10.443

现在有三种设备方向键`info.plist`。

1.  支持的界面方向 (iPad)
2.  支持的界面方向 (iPhone)
3.  支持的界面方向

第三个是我认为用于非通用应用程序的，其余两个是用于 iPad 和 iPhone 的。

你应该试一试。

![在此处输入图像描述](../Images/a860c3939cf13febd6b28aadf986b17c.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-18T10:16:03.810

在努力设置 UIViewController 的 `shouldAutorotate`和`supportedInterfaceOrientation`方法之后，在 iOS6 中没有成功，我发现最有效的方法是在应用程序委托中设置它。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

但是返回使`UIInterfaceOrientationMaskPortraitUpsideDown`我的应用程序崩溃。我不知道我做错了什么！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T14:02:43.350

在根视图控制器的方法中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

设置“返回否”；

这应该适用于所有视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-14T03:33:18.947

如果您支持 iPad，那么您不应该取消选中横向，因为它会阻止您的应用在 App Store 上被 Apple 接受。

为了防止在应用程序显示您的第一个屏幕之前旋转，请将其放入您的 AppDelegate.m

此方法在以上 iOS 7.1 中有效并经过测试。

```
// G - fix for ipad.
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T09:25:48.380

从 IOS 6 开始，Haris Hussain 的回答现在似乎已被弃用，但有一些新方法可用于限制/启用轮换。

以下是 UIViewController 标头中列出的方法：

```
// New Autorotation support.
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
- (UIInterfaceOrientationMask)supportedInterfaceOrientations NS_AVAILABLE_IOS(6_0);
// Returns interface orientation masks.
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation NS_AVAILABLE_IOS(6_0); 
```

请注意，如果您在已经旋转的状态下启动应用程序，shouldAutoRotate 似乎不起作用！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-02T00:42:46.723

**斯威夫特**
**iOS 6+**

`shouldAutorotate`推荐的方法是在每个附加的视图控制器中覆盖。如果您在根视图控制器中覆盖此属性，则所有“附加”视图控制器也将继承该行为。然而，呈现的视图控制器可能会变得“未附加”到根，因此不会继承覆盖，因此您需要单独覆盖这些视图控制器中的属性。

```
class RootViewController: UIViewController {
    override var shouldAutorotate: Bool { false }
}

class PresentedViewController: UIViewController {
    override var shouldAutorotate: Bool { false }
} 
```

但是，如果您只是子类`UIViewController`化并且仅在项目中使用子类化视图控制器，那么您将拥有真正的全局修复（使用代码）。

```
class NonrotatableViewController: UIViewController {
    override var shouldAutorotate: Bool { false }
} 
```

**设置替代（无代码）**

也许最全局的修复是在目标设置的信息选项卡中编辑 Info.plist 文件。有一个supported-interface-orientations 键，每个值代表一个支持的方向。删除除纵向之外的所有视图控制器将禁用所有视图控制器中的旋转，无论是否附加到根。

# java - Websphere Portal portlet 在出现异常后不会失败，并在重新加载时重新触发所有事件

> ID：10125051
> 
> 赞同：2
> 
> 时间：2012-04-12T13:57:04.380
> 
> 标签：java, jsf, websphere-portal

我正在开发一个应用程序，通常发生运行时异常（例如空指针异常）的 Portlet 将被替换为（在页面呈现/重新加载时）带有消息“Portlet 暂时禁用”的小框。但不知何故，我的应用程序不会因未捕获的错误而失败，而是将页面呈现为好像没有任何问题（同时将巨大的堆栈跟踪吐入控制台）。你可能想知道为什么这很糟糕。

我在按钮操作方法中犯了一个错误，导致`NullPointerException`某个输入字段为空。在此操作方法中，一些信息被插入到数据库中。Web 表单无声无息地失败了，这就是我多按几次按钮的原因。然后我在输入字段中输入数据并再次按下按钮。现在动作处理程序方法不再抛出`NullPointerException`。

然而，发生的事情是处理程序方法运行了 6 次（每次提交失败 + 1 次）。显然，`ActionEvent`导致 NullPointerException 的 s 没有从操作队列中删除，它们在后续请求中被重新触发。如果应用程序确实被禁用，这不是问题。

谁能帮我这个？我需要让 portlet 在未捕获的异常上再次失败，或者在每个渲染响应阶段之后以某种方式清除 faces 事件队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:41:51.573

1.  在 NPE 实际发生的地方放置一个断点。
2.  以调试模式启动服务器。
3.  当服务器在断点处停止时，查看堆栈并查看调用链。某些东西可能正在“吞噬”您的 NPE。

当您针对定制设计的 Portlet 开发框架进行开发时，通常会发生这种情况。该框架中的设计缺陷可能会导致对操作的异常处理不当。我以前见过这样的自定义框架。

# inheritance - 公共领域方法的继承或服务？

> ID：10125053
> 
> 赞同：1
> 
> 时间：2012-04-12T13:57:12.023
> 
> 标签：inheritance, grails, grails-domain-class

我有一些在我的几个域类中通用的方法。我想减少重复代码的数量，我想到了两个解决方案：

1）将常用方法放在 baseDomain 类中，并在我的域中从它继承方法
2）将常用方法放在我可以导入到我的 commonDomainMethodService 中域

我想我应该不理会继承，除非域共享公共属性，但我不确定。这些方法中的一种是否比另一种更有益？是否更符合 Grails 最佳实践？

例如，基于参数比较两个域实例的方法：

```
int compareInstances(instance, otherInstance, propertyName){
    return //some logic to compare the instances based on the type of property
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:49:51.300

对于这种情况，我会使用`Mixin`：[Mixin Reading](http://mrhaki.blogspot.com/2009/10/groovy-goodness-mixin-functionality-to.html) and [Further Mixin Reading](http://groovy.codehaus.org/Category+and+Mixin+transformations)

例如：

```
@Mixin(MyCompare)
class DomainA {
}

@Mixin(MyCompare)
class DomainB {
}

class MyCompare {

    def compare(instance1, instance2, propertyName) {
        instance1[propertyName] == instance2[propertyname]
    }
} 
```

现在 DomainA 和 DomainB 的所有实例都会有你的`compare`方法。这样，您可以实现多个 Mixin 以向您想要的域类添加功能，而无需扩展超类或在服务中实现它。（我假设您希望您的`compare`方法比这更复杂一点，但您明白了）

一些潜在的陷阱：

1) 's 中的私有方法`mixin`似乎不起作用。

2）具有`mixin`'s 的循环依赖也很糟糕： MixinClassA 混合在 MixinClassB 中，而 MixinClassB 混合在 MixinClassA 中（对于您的设置，我认为您不会`mixin`在其他`mixin`'s 中混合）。

3）我忘记了方法冲突会发生什么，所以你应该尝试一下。示例：ClassA 有一个 doStuff() 方法并在 DoStuffMixin 中混合，后者也有一个 doStuff() 方法。

4) 请记住，在您用作 a 的类中，您`mixin`可以引用`this`哪个将是使用`mixin`. 例如，在上面的示例中，您可以删除 并将其`instance1`替换为`this`. 在运行时`this`将是 DomainA 或 DomainB 的实例（我觉得这是 mixins 的一个非常强大的部分）。

这些是我能想到的大问题。

# facebook - facebook 应用程序的 git shortlog 显示未知作者

> ID：10125054
> 
> 赞同：1
> 
> 时间：2012-04-12T13:57:12.500
> 
> 标签：facebook, git, heroku

我目前正在开发一个托管在 heroku 上的 facebook 应用程序，并且很想知道我到目前为止所做的 git 提交的数量。`Note:I am the only one doing the project.` 我使用了以下命令

> git shortlog -s -n

请在下面找到结果，第一个显然是我。为什么它显示了许多我从未听说过的未知作者，这怎么可能？有没有其他人看到这个或者我是唯一一个有这种情况的人？默认情况下，heroku 上托管的所有 fb 应用程序是否有可能具有这些提交数据？

![在此处输入图像描述](../Images/ff1c4fa7431ac4cfc967e2fc97bd090d.png)

如果这可能是重复的，请指出我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:01:04.730

我会说你使用了 Heroku Facebook 应用程序模板——我认出其中几个名字是 Heroku 工作人员，所以他们的历史保留在 git repo 中。

更新：是的，检查这个 repo 的提交[https://github.com/heroku/facebook-template-php/commits/master](https://github.com/heroku/facebook-template-php/commits/master)这可能是你的基础。

# c - 当您不知道父母可能有多少孩子时，如何实现 n 叉树？

> ID：10125056
> 
> 赞同：2
> 
> 时间：2012-04-12T13:57:14.147
> 
> 标签：c, tree, filesystems

这是我在理论上一直在努力解决的问题，但在网上没有找到任何好的答案。我以前用二叉树编写过程序，这很简单：每个节点都有两个链接。但是现在我正在为一个项目计划一个基于树的文件系统，但我不确定如何进行。麻烦来了：

我想要一棵树，它具有指向叶子文件和内部节点子目录的指针（我认为这就是 Unix 的做法？）。但是如果用户想要创建一个新的文件或目录，则必须增加父节点中的链接数。

当我设计我的结构时，我该如何解释这一点？我不确定我的选择是什么，除了硬编码，比如 10 个链接和限制目录成员。任何指针？（哈，明白了吗？）

如果没有，是否有人知道我可以在其中了解更多信息的任何好资源？就像我说的，到目前为止，我的互联网搜索一直没有结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:59:59.353

您可以简单地使用孩子的链接列表。

请原谅我的 ASCII 图形：

```
+------+
|parent|
+------+
   |
   |
   \    +-----------+     +----------+       +----------+
    --->|first child|---->|next child|--...->|last child|-->NULL
        +-----------+     +----------+       +----------+ 
```

这使得步行孩子变得有点棘手，因为要获得第*n*个孩子，您需要访问前面的*n* -1 个孩子，但我认为这是一种可行的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:02:18.377

您可以使用孩子的链接列表。例如：

```
struct tree {
   /* data */
   struct children_list* children;
}

struct children_list {
   struct tree* child;
   struct children_list* next;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T13:59:59.790

用数据成员创建一个节点=> 1.data 2.leftchild 3.rightsibling

假设父母有 k 个孩子。第一个孩子将被父节点中的leftchild指针指向..第二个孩子将被第一个孩子中的rightsibling指针指向..以类似的方式 ith child(1

这允许我们从父节点导航到子节点，反之亦然。注意：虚拟节点只是最后一个子节点的指示器...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T14:01:31.620

这是 Linux 如何处理目录 [http://en.wikipedia.org/wiki/Inode_pointer_structure](http://en.wikipedia.org/wiki/Inode_pointer_structure)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:00:16.570

一个简单的解决方案是在每个树节点中都有一个列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:01:08.630

您可以使用动态分配的数组，并存储数组指针及其大小。当你需要编辑它时，你只需重新分配它。

但是，在这种情况下，您应该在操作系统和文件系统书籍、文章、科学杂志/出版物等中寻找公认的解决方案。

# jquery - 需要添加 html 代码，以便可以在源视图中设置它 - 使用 jQuery

> ID：10125058
> 
> 赞同：0
> 
> 时间：2012-04-12T13:57:14.840
> 
> 标签：jquery, html

我有画廊！当您添加图像时，它会在图库中淡出...工作正常 - 我使用 .append()，但还需要添加它，以便添加的 html 代码在“源视图”中可见 - 我看不到它！我尝试了 .html() 而不是 .append()，但我得到的只是 div 中的“替换”html，它用作所有图像的持有者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:58:21.657

**这是不可能的。**“查看源代码”显示在任何脚本开始更改之前从请求加载的 DOM。

只有检查“实时 DOM”才能让用户看到正在发生的事情。在 Chrome 中，您可以通过右键单击页面来执行此操作：

![在此处输入图像描述](../Images/a708a9d285c42f73d2840351b04ab82b.png)

在 IE 中，您可以使用 F12 Developer 工具来选择元素： ![在此处输入图像描述](../Images/956946939da9454a0b2c4e2f2ce04526.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:59:36.483

你不能！将代码动态添加到 DOM 不会将其添加到实际文档中，这是所有主流浏览器中“作为源视图”显示的内容。

但是，您将在控制台中看到更改（萤火虫、蜻蜓、Chrome 检查器等）

# mysql - 临时表不存在错误

> ID：10125065
> 
> 赞同：1
> 
> 时间：2012-04-12T13:57:48.623
> 
> 标签：mysql, sql, stored-procedures, temp-tables

无法使用临时表调用存储过程：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `summary_daily_reports`$$
CREATE PROCEDURE  `summary_daily_reports`()
BEGIN

DROP TEMPORARY TABLE IF EXISTS `both_daily_repots`;

CREATE TEMPORARY TABLE both_daily_repots(
       `date`        VARCHAR(10),
       balance         DOUBLE,
       balance_ua         DOUBLE
       ) DEFAULT CHAR SET utf8;

INSERT INTO both_daily_reports VALUES ('2012-01-01',0,0);

SELECT * FROM both_daily_repots;

END $$ 
```

然后我调用程序并得到错误“表'report_cfd.both_daily_reports'不存在”；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:01:16.767

在一些地方，您将表名拼写为`both_daily_repots`而不是`both_daily_reports`. 这就是导致错误的原因。

会发生什么：

*   `DROP TABLE`,`CREATE TABLE`并`SELECT`在`repots`（不带`r`）上操作；
*   `INSERT`尝试插入`reports`（使用`r`）并失败。

# c++ - QT 中的延迟 DLL 加载

> ID：10125067
> 
> 赞同：3
> 
> 时间：2012-04-12T13:57:59.603
> 
> 标签：c++, qt, dll, dynamic-loading

QT 中是否可以延迟 DLL 加载？例如，我的程序依赖于某些第三方 DLL，我想删除它。

我应该在 .pro 文件中写什么来消除依赖关系？

我可以将 DLL 存储在资源中吗？

我可以“全局”加载 DLL 吗？因此，DLL 中的某些函数（例如 func1）将在我的代码中保留为 func1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:09:34.397

是的，你想使用这个`QLibrary`类。它专门用于在运行时加载共享库。

在这种情况下，您的 .pro 文件中不需要任何内容​​。但是，您需要确保 DLL 在目标计算机上可用。它需要位于系统可以找到它的位置（Windows 上的 PATH，Linux 上的 LD_LIBRARY_PATH，Mac 上的 DYLD_LIBRARY_PATH），或者您可以提供应用程序的绝对路径。

如果您查看文档，您将了解如何将库函数映射到代码中的函数指针，以便“func1()”指向库中的函数。

*   [QLibrary 类参考](http://qt-project.org/doc/qt-4.8/qlibrary.html)

**[编辑]**

这是从资源生成的临时文件加载 dll 的概念验证。IMO，这是一个非常糟糕的主意，但它至少适用于我的 Windows 7 机器。如果您想做类似的事情，您将不得不处理清理临时文件、检查重复项等。

**foo.cpp**，编译成共享库

```
#include <QtCore/qglobal.h>

extern "C" Q_DECL_EXPORT int foo(int value) {
  return value + 42;
} 
```

**bar.pro**，注意没有引用 foo 库

```
SOURCES += main.cpp
RESOURCES += resources.qrc 
```

**主文件**

```
#include <QtCore>
#include <iostream>

int main(int argc, char **argv) {
  QCoreApplication app(argc, argv);

  // Copy resource dll to temporary file.
  QFile::copy(":/lib/Foo.dll", QDir::temp().filePath("Foo.dll"));

  // Load the temporary file as a shared library.
  QLibrary foo_lib(QDir::temp().filePath("Foo.dll"));
  typedef int (*FooDelegate)(int);
  FooDelegate foo = (FooDelegate)foo_lib.resolve("foo");

  if (foo) {
    std::cout << "foo(13) = " << foo(13) << std::endl;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:20:06.520

我只能从 Microsoft 编译器的角度发言......它更少取决于 QT 想要什么，而是取决于何时何地访问延迟加载的代码和/或数据。

通常，您必须告诉链接器该 DLL 是使用`/delayload:[dllname]`选项延迟加载的，并使用 delayimp.lib 链接。您可以在 .cpp 文件中添加一个库

`#pragma comment(lib, "delayimp")`

这将消除在链接器命令行上指定它的需要。

我不确定 .pro 文件中包含什么来完成将延迟加载开关添加到链接器命令。

请参阅[此链接](http://msdn.microsoft.com/en-us/library/hf3f62bz.aspx)以获取 Microsoft 文档。

# c# - 正确的处置方式：对象未沿所有异常路径处置

> ID：10125070
> 
> 赞同：5
> 
> 时间：2012-04-12T13:58:21.107
> 
> 标签：c#, dispose, idisposable, ravendb, ca2000

我收到第 84 行和第 85 行的消息（这两个，*使用*行堆叠）：

> CA2000：Microsoft.Reliability：在方法“RavenDataAccess.GetRavenDatabase()”中，对象“<> *g_initLocal9”并未沿所有异常路径进行处理。在对对象“<>g* _initLocal9”的所有引用超出范围之前调用 System.IDisposable.Dispose。

DocumentStore 实现 IDisposable。

为什么？我还能如何处理 DocumentStore 对象？它们是在 using 块中创建的，我将它们放在我的 catch 块中。这应该如何解决？

```
private static IDocumentStore GetRavenDatabase()
{
    Shards shards = new Shards();

    try
    {
        using (DocumentStore docStore1 = new DocumentStore { Url = ConfigurationManager.AppSettings["RavenShard1"] })  // Line 84
        using (DocumentStore docStore2 = new DocumentStore { Url = ConfigurationManager.AppSettings["RavenShard2"] })  // Line 85
        {
            shards.Add(docStore1);
            shards.Add(docStore2);
        }

        using (ShardedDocumentStore documentStore = new ShardedDocumentStore(new ShardStrategy(), shards))
        {
            documentStore.Initialize();

            IndexCreation.CreateIndexes(typeof(RavenDataAccess).Assembly, documentStore);

            return documentStore;
        }
    }
    catch
    {
        shards.ForEach(docStore => docStore.Dispose());

        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:33:02.663

您必须确保沿任何可能的异常路径处理所有新创建的 Disposable 对象。见下文：

```
private static IDocumentStore GetRavenDatabase()
{
    Shards shards = new Shards();
    DocumentStore docStore1 = null;
    DocumentStore docStore2 = null;

    ShardedDocumentStore shardedDocumentStore = null;
    ShardedDocumentStore tempShardedDocumentStore = null;

    try
    {
        docStore1 = new DocumentStore();
        docStore1.Url = ConfigurationManager.AppSettings["RavenShard1"];
        docStore2 = new DocumentStore();
        docStore2.Url = ConfigurationManager.AppSettings["RavenShard2"];

        shards.Add(docStore1);
        shards.Add(docStore2);

        tempShardedDocumentStore = new ShardedDocumentStore(new ShardStrategy(), shards);
        tempShardedDocumentStore.Initialize();

        IndexCreation.CreateIndexes(typeof(RavenDataAccess).Assembly, tempShardedDocumentStore);

        docStore1 = null;
        docStore2 = null;

        shardedDocumentStore = tempShardedDocumentStore;
        tempShardedDocumentStore = null;

        return shardedDocumentStore;
    }
    finally
    {
        if (tempShardedDocumentStore != null) { tempShardedDocumentStore.Dispose(); }
        if (docStore1 != null) { docStore1.Dispose(); }
        if (docStore2 != null) { docStore2.Dispose(); }
    }
} 
```

CA 似乎对内联属性初始值设定项有问题，但如果你把它们分开，这应该可以工作。关键是要确保无论在 try 块中哪里抛出异常，所有可以释放的新对象都被清理干净。

通过在返回之前设置您不再需要的临时引用`null`（`docStore1`、、`docStore2`和`tempShardedDocumentStore`），您可以在 finally 块中检查它们是否实际上设置为`null`，如果没有，则在某处发生异常，您可以处理它们在执行离开此方法之前。

***注意*** `docStore1`和`docStore2`是临时参考，因为它们被添加到`Shards`集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:15:26.577

首先，`shards`您传入的`new ShardedDocumentStore()`包含已处置的`docStore1`和`docStore2`。这很可能会导致问题。

此外，在 catch 语句中，您处置`docStores`可能已经处置的。

最后，`ShardedDocumentStore`当你返回它时，你返回的那个被处理（通过使用），可能使它对调用者不可用。

另外，我快速浏览了一下`ShardedDocumentStore`（在 GitHub 上），我想说它负责处理`docStores`. 也就是说，你不应该处理它。

将您的代码更改为：

```
private static IDocumentStore GetRavenDatabase()
{
    ShardedDocumentStore documentStore = null;
    var docStore1 = null;
    var docStore2 = null;

    try
    {
        Shards shards = new Shards();
        docStore1 = new DocumentStore { Url = ConfigurationManager.AppSettings["RavenShard1"] };
        shards.Add(docStore1);
        docStore2 = new DocumentStore { Url = ConfigurationManager.AppSettings["RavenShard2"] };
        shards.Add(docStore2);

        documentStore = new ShardedDocumentStore(new ShardStrategy(), shards);
        documentStore.Initialize();

        IndexCreation.CreateIndexes(typeof(RavenDataAccess).Assembly, documentStore);

        return documentStore;
    }
    catch
    {
        if (documentStore != null)
        {
            documentStore.Dispose();
        }
        else
        {
            if (docStore2 != null) docStore2.Dispose();
            if (docStore1 != null) docStore1.Dispose();
        }
        throw;
    }
} 
```

...并让调用者`GetRavenDatabase()`处理返回的`IDocumentStore`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:15:26.320

这就是为什么 using 语句中的对象初始值设定项会导致 CA 警告的原因：

您的代码如下所示：

```
using (DocumentStore docStore2 = new DocumentStore { Url = ConfigurationManager.AppSettings["RavenShard2"] })  // Line 85
{
   ...
} 
```

...由于对象初始化程序的工作方式，本质上变成了这样：

```
DocumentStore foo = new DocumentStore;
foo.Url = ConfigurationManager.AppSettings["RavenShard2"];
using(DocumentStore docStore2 = foo)
{
   ...
} 
```

如您所见，DocumentStore 的初始化现在发生在 using{} 块之外，因此如果设置 temp.Url 的行抛出异常，您的 DocumentStore 将不会被释放。

有许多解决方法，例如将参数传递给对象的构造函数，在 using 语句中设置属性而不是使用对象初始值设定项，或者使用 try/finally 块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:09:19.627

考虑到[CA2000: Dispose objects before lost scope](http://CA2000%3a%20Dispose%20objects%20before%20losing%20scope)文档状态（部分）：

> 仅受一个异常处理程序保护的嵌套构造函数。例如：
> 
> 使用 (StreamReader sr = new StreamReader(new **FileStream** ("C:\myfile.txt", FileMode.Create))) { ... }
> 
> 导致 CA2000 发生，因为 StreamReader 对象的构造失败可能导致**FileStream**对象永远不会关闭。

并且考虑到我在代码中*没有看到*提供任何一次性对象分配而不是`DocumentStore`它本身，我认为这是编译器的错误。

# jquery - 了解 DOM 文档类型

> ID：10125071
> 
> 赞同：1
> 
> 时间：2012-04-12T13:58:21.110
> 
> 标签：jquery, dom, internet-explorer-9

我试图理解为什么，如果我在我的 aspx 页面上做出这个声明......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

在 DOM 中，它是这样通过的

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Strict//EN"> 
```

令人沮丧的原因是 IE9 会将其扔进 IE7 标准和 IE9 兼容模式。在 IE 8 中，它很好并且不这样做。这是一个大问题，因为它破坏了我正在创建的应用程序，直到我强制 IE9 进入 IE9 标准，我不能指望整个公司的客户每次使用该应用程序时都这样做。

这个应用程序使用 $.ajax 调用，虽然这个问题发生在页面加载时 jquery 还没有被调用。

当我做一个简单的视图源并验证它时，它很好。没有错误。当我验证“dom”源时，这是一场灾难。为什么？？解决此问题的方法或解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:10:04.453

While this might not be an ideal solution for you, what has come to work for me is just to use the following doctype. Deceptively simple:

```
<!DOCTYPE html> 
```

That's it!

There's probably reasons why that is a bad idea (or not what you want) but give it a try if you can in your situation and let me know if it disappoints.

Update:

Other things I've learned about this is that even an empty line or a comment prior to the doctype declaration can cause IE to throw its hands up.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:51:00.863

回答：啊哈！这必须是头脑中的“第一个”条目，它解决了问题。“第一”也很重要，不知道为什么，但我尝试了多种方式，这是唯一可行的方式。

# c# - 正则表达式匹配 URL 的片段

> ID：10125074
> 
> 赞同：0
> 
> 时间：2012-04-12T13:58:22.210
> 
> 标签：c#, regex

我有这样的网址：

[http://127.0.0.1:81/controller/verbOne/NXw4fDF8MXwxfDQ1](http://127.0.0.1:81/controller/verbOne/) ?source= **dddd**

或者

[http://127.0.0.1:81/controller/verbTwo/](http://127.0.0.1:81/controller/verbTwo/) **NXw4fDF8MXwxfDQ1**

我想用粗体提取那部分。主机和端口可以更改为任何内容（当我将其发布到实时服务器时，它会更改）。控制器永远不会改变。而对于动词部分，有两种可能。

任何人都可以帮助我使用正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:01:23.263

而不是使用正则表达式，您可以使用的内置功能`Uri`

```
Uri uri = new Uri("http://127.0.0.1:81/controller/verbOne/NXw4fDF8MXwxfDQ1?source=dddd");

var lastSegment = uri.Segments.Last(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:01:01.380

您正在寻找`Uri`和`Path`类：

```
Path.GetFileName(new Uri(str).AbsolutePath) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:02:53.157

为什么要寻找正则表达式？您可以查找两个字符串元素“verbOne/”或“verbTwo/”并从末尾创建一个子字符串。然后您可以查找其余部分并用“？”减去该部分。

我认为这比正则表达式更快。

克里基特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:06:58.430

尽管这里的其他人都认为正则表达式不是最佳解决方案是正确的，因为当解析器已经存在并且由于其专业化而永远不会失败时，它可能会失败，我相信您*可以*使用以下正则表达式：

```
(?<=http://127\.0\.0\.1:81/controller/verb(One|Two)/)[a-zA-Z0-9]* 
```

# javascript - Zurb 基础类在 Wordpress 中不起作用，它们出现在 WebKit Inspector 中

> ID：10125077
> 
> 赞同：0
> 
> 时间：2012-04-12T13:58:23.827
> 
> 标签：javascript, css, wordpress-theming, nav

这是我的 wordpress 主题中 header.php 的菜单代码：

```
<?php wp_nav_menu( array( 
'theme_location'    => 'header-menu',
'container'         => 'nav',
'container_class'   => 'elephant-menu, show-on-desktops, hide-on-phones, hide-on-tablets'
 ) ); ?>

<?php wp_nav_menu( array( 
'theme_location'    => 'mobile-header-menu',
'container'         => 'nav',
'container_class'   => 'show-on-phones, hide-on-desktops, hide-on-tablets'
 ) ); ?> 
```

大象菜单样式菜单栏和显示..et.al ...课程来自Zurb-Foundation和wordpress之外，它们工作得很好，可以打开和关闭......我在这里错过了什么？

我对 Zurb Foundation 的内部运作了解不足，无法放弃它......但我觉得它在某个地方是一个 javascript。

应该发生的是顶部菜单应该关闭并仅显示移动菜单。

菜单已经在functions.php中正确定义并且加载得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:39.370

对于初学者...抛弃“container_class”中的逗号。

提供给 'container_class' 的字符串将几乎逐字用作类值（字符串首先*被*转义）。

其次，WordPress 默认不会生成与 Zurb Foundation 兼容的菜单。实际上，您必须有效地绕过 WordPress 的整个 wp_nav_menu() 函数才能输出完全兼容 Zurb 的 HTML。

# java - JMX 远程部署架构

> ID：10125080
> 
> 赞同：0
> 
> 时间：2012-04-12T13:58:28.690
> 
> 标签：java, monitoring, jmx

我第一次阅读 JMX，并试图看看它是否是解决我们在生产中遇到的问题的可行解决方案。

我们的架构*不断*访问远程 Web 服务（由不同团队在他们自己的服务器上管理）并从中请求数据（我们也从该服务缓存，但这是一个棘手的问题，缓存不是非常有效）。

我们希望*能够*在代码中的某个特定点动态打开/关闭日志记录，就在我们点击 Web 服务之前，我们可以在其中看到我们发送到服务的确切 URL/查询。如果我们只是盲目地设置日志级别并记录所有 Web 服务请求，我们将拥有*天文数字般的大*日志文件。

JMX 似乎是解决方案，我们在本节中使用托管 bean 控制日志记录，然后可以`setLoggingEnabled(boolean)`通过某个管理器（可能只是基本的 HTML 适配器）远程设置该 bean 的状态（等）。

我的问题都与部署有关：

*   如果我编写 MBean 接口和实现，以及代理（将 MBean 和 HTML 适配器注册到平台 MBean 服务器），我是在我的主 Web 应用程序 (WAR) 中编译、打包和部署它们，还是它们有编译成自己的，比如 JAR 并坐在我的应用程序旁边的 JVM 上？
*   我们有一个 Dev、QA、Demo 和 Prod 环境；是否可以有 1 个单一的 HTML 适配器指向一个 MBean 服务器，该服务器注册了不同的 MBean，每个环境 1 个？如果有一个 URL 可以访问您可以在不同环境中管理 bean 的位置，那就太好了
*   如果我上面第一个问题的答案是 MBean 接口、impl 和代理都部署在您的应用程序中，那么是否可以将启用 JMX 的应用程序部署在一个服务器上（例如 Demo），但要从另一个服务器监视它服务器？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:12:27.283

`JMX`是一种用于远程管理您的应用程序的技术，例如，当您想要更改配置而不重新启动时，这是最合适的用途。

但在你的情况下，我不明白你为什么需要 JMX。例如，如果您使用`Log4j`日志记录，您可以配置文件看门狗并将日志记录更改为可能的最低级别。即调试。这不需要重新启动，恕我直言，这本来应该是您最初的设计，即围绕记录器和级别工作。目前，尚不清楚您的意思是什么以及`setLoggingEnable`.

在任何情况下，托管 bean 都应该与您的应用程序一起部署，如果您使用的是 Spring，那么您很幸运，因为它提供了非常好的集成，`JMX`您可以将 Spring bean 部署为托管 bean。

最后，当您连接到您的进程时，您将看到为该 JVM 运行的托管 bean。所以我不确定你对第 2 点的确切含义。

无论如何，我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:08:29.427

如何打包 MBean 在很大程度上取决于可移植性。这些特定的服务在这个 webapp 的范围之外是否有任何实际的用途？如果不是，我将简单地声明您的 webapp “JMX Manageable”并构建它。否则，组件化 MBean，将它们放入 jar 中，将 jar 放入 WEB-INF/lib 并使用在您的配置中配置的启动 servlet 初始化它们网页.xml。

对于单个 HTML 适配器，是的，这是可能的。可以将其视为拥有 Dev、QA、Demo 和 Prod MBeanServer，然后是一个**Master** MBeanServer。您的 HTML 适配器应该呈现主。然后就可以使用[OpenDMK 级联服务](https://stackoverflow.com/questions/9710003/is-it-possible-with-jmx-to-register-or-show-the-mbeans-form-different-vms-in-one)在 Master 中注册 Dev、QA、Demo 和 Prod 的级联。现在您将在 HTML 适配器显示中看到所有 5 个 MBeanServer 的 bean。

这能回答你的第三个问题吗？

# android - Android - 检查耳机按钮点击

> ID：10125083
> 
> 赞同：1
> 
> 时间：2012-04-12T13:58:39.250
> 
> 标签：android, implementation, headset

如何检查是否单击了耳机中的播放/暂停按钮？在那之后我可以实现一些可以改变我自己的动作（关闭等）的典型动作（播放/暂停）的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-28T10:43:18.800

现在我正在使用下面的代码耳机按钮单击事件，它对我有用。试试这个代码

```
// Receiver
public class MediaButtonEventReceiver extends BroadcastReceiver {

    private static final String TAG = "MediaButtonIntentReceiv";
    public MediaButtonIntentReceiver() {
        super();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();
        if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
            return;
        }
        KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
        if (event == null) {
            return;
        }

        int action = event.getAction();
        if (action == KeyEvent.ACTION_DOWN) {
            // do something
            Log.e(TAG, "onReceive: " );
            Toast.makeText(context, "BUTTON PRESSED!", Toast.LENGTH_SHORT).show();
        }

        abortBroadcast();
    }
} 
```

```
// Write this code in onCreateview in your activity 

IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);
MediaButtonIntentReceiver r = new MediaButtonIntentReceiver();
filter.setPriority(1000); //this line sets receiver priority
registerReceiver(r, filter); 
```

```
//  manifest.xml 
 <receiver android:name=".MediaButtonIntentReceiver">
            <intent-filter >
                <action android:name="android.intent.action.MEDIA_BUTTON"/>
            </intent-filter>
 </receiver> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:08:51.713

如果您试图从前台的活动中侦听此内容，请使用`onKeyDown()`并注意`KEYCODE_MEDIA_PLAY_PAUSE`.

如果您尝试从后台收听此事件（例如，播放音乐的服务），请使用`BroadcastReceiver`for 。`ACTION_MEDIA_BUTTON`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:02:28.370

您可以使用[ACTION_MEDIA_BUTTON](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_BUTTON)意图阅读上面链接的更多信息希望这有帮助

# javascript - 调用 Page_ClientValidate 后，div 不隐藏

> ID：10125084
> 
> 赞同：0
> 
> 时间：2012-04-12T13:58:42.280
> 
> 标签：javascript, jquery, asp.net, validation

当调用 Page_ClientValidate 将 isValid 设置为 true 时，以下代码不会隐藏“信息”DIV 并显示“问题”DIV。如果我将 isValid 设置为 true 或 false，它会按预期工作。

为什么 Page_ClientValidate 会阻止隐藏/显示行为的发生？

```
function hide() {
        var isValid = Page_ClientValidate('validInfo');
        if (isValid) {
            if (!$('[id$=chkConfirm]').is(':checked'))
            { alert("Please confirm and agree with conditions"); }
            else {
                $('#info').hide();
                $('#questions').show();
            }
        }
    } 
```

这是 HTML - 我将其缩短为主要部分，DIVS 中只有更多的 txtBoxes 和 radioLists：

```
 <div id="info">
    <asp:TextBox ID="tBoxTradingName" runat="server" Width="200"></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="tBoxTradingName"
        ValidationGroup="validInfo">Required</asp:RequiredFieldValidator>
    <asp:CheckBox ID="chkConfirm" Text=" I confirm that the information provided above is accurate."
        runat="server" />
    <asp:Button ID="btnNext" Text="Next >>" runat="server" OnClientClick="hide()" Width="100"
        CausesValidation="true" ValidationGroup="validInfo" />
</div>
<div id="questions" style="display:none;">
    <div class="label">
        Do you trade as a
    </div>
    <asp:RadioButtonList ID="rBtnTradeAs" runat="server">
        <asp:ListItem>Sole Proprietor</asp:ListItem>
        <asp:ListItem>Company</asp:ListItem>
        <asp:ListItem>Closed Corporation</asp:ListItem>
        <asp:ListItem>Trust</asp:ListItem>
        <asp:ListItem>Other (please specify)</asp:ListItem>
    </asp:RadioButtonList>
    <asp:TextBox ID="txtBoxTradeAs" runat="server" Width="200"></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator30" runat="server" ControlToValidate="rBtnTradeAs"
        ErrorMessage="Required">
    </asp:RequiredFieldValidator>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:35:16.893

您在`Button`'s上调用客户端函数`OnCLientClick`。`Page_ClientValidate`然后，如果返回，您想通过 javascript 更改某些控件的可见性`true`。

问题是：如果没有验证器咬，按钮将导致回发。回发将导致页面在服务器端重新创建，因此每个客户端更改都会丢失。

所以要么

*   不要回发（返回`false`将`OnCLientClick`阻止回发）或
*   更改服务器端控件的可见性（通过添加`runat="server" to your divs)`

# php - Zend Studio 浏览器工具栏替代 PhpStorm 3？

> ID：10125087
> 
> 赞同：2
> 
> 时间：2012-04-12T13:58:50.237
> 
> 标签：php, zend-studio, phpstorm, zend-debugger

我已经使用[Zend Studio](http://www.zend.com/en/products/studio/)很长时间了，有一个超级有用的资源叫做**Studio Browser Toolbar**，它基本上是一个 Firefox 工具栏，它允许我从浏览器直接调试网页到 Zend Studio。

现在我开始使用[PhpStorm 3](http://www.jetbrains.com/phpstorm/)，并且一直在尝试寻找 Zend Studio 功能的替代方案。

我已经从我的 Zend Server 安装中为 PhpStorm 进行了基本的调试配置，以便使用 Zend Debugger 进行调试。现在我需要某种功能，允许我从浏览器调试特定网页。

那么，有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:07:08.637

请[参考文档](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)，它描述了如何创建[书签](http://www.jetbrains.com/phpstorm/marklets/)（可以放置在浏览器书签栏中并在 PhpStorm 中触发调试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:09:53.713

对我来说，如果您使用的是 ZendDebugger，它就可以使用原始工具栏开箱即用。

以下是[说明](http://confluence.jetbrains.net/display/WI/Configure+Zend+Debugger+Toolbar+for+Firefox+to+work+with+PhpStorm)

# ruby-on-rails - Rails I18n 在生产中只返回部分翻译

> ID：10125088
> 
> 赞同：1
> 
> 时间：2012-04-12T13:58:51.587
> 
> 标签：ruby-on-rails, internationalization, locale, ruby-on-rails-3.2

我在 Rails 中遇到了 I18n 的问题，部分翻译他只获得了文件的一部分。

我的应用程序.rb：

```
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '*.{rb,yml}').to_s]
config.i18n.default_locale = :'pt-BR' 
```

pt-BR.yml：

```
pt-BR:
  date:
    formats:
      default: ! '%d/%m/%Y'
      my_format: ! '%d de %B de %Y'
      short: ! '%d de %B'
  month_names:
  - 
  - Janeiro
  - Fevereiro
  - Março
  - Abril
  - Maio
  - Junho
  - Julho
  - Agosto
  - Setembro
  - Outubro
  - Novembro
  - Dezembro 
```

查看文件：

```
<%= l news.created_at, :format => :my_format %> 
```

查看输出：

```
11 de April de 2012 
```

正确的视图输出应该是：

```
11 de Abril de 2012 
```

Rails 拯救了“ 2012 年4 月11**日**”，但没有得到“ 2012 年**4月 11****日**”月份

 **细节：在开发中翻译是完美的，我只在生产中遇到这个问题。

我正在使用 ruby​​ 1.9.3 和 Rails 3.2.2。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:54:06.787

如果这有帮助，现在不要这样做，但我通常会在这里获得正确的语言环境模板： [https ://github.com/svenfuchs/rails-i18n/tree/master/rails/locale](https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale)

一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:08:23.097

我相信 month_names 仅用于 date_select 和 datetime_select 标签。

[http://i18n.lighthouseapp.com/projects/14947/tickets/12](http://i18n.lighthouseapp.com/projects/14947/tickets/12)的可能答案：

```
lt:
  date:
    order: [ :year, :month, :day ]
    formats:
      default: "%Y-%m-%d"
      short: "%b %d"
      long: "%B %d, %Y"
    day_names: [Sekmadienis, Pirmadienis, Antradienis, Trečiadienis, Ketvirtadienis, Penktadienis, Sekmadienis]
    abbr_day_names: [S, P, A, T, K, Pn, Š]
    month_names: [~, Sausis, Vasaris, Kovas, Balandis, Gegužė, Birželis, Liepa, Rugpjūtis, Rugsėjis, Spalis, Lapkritis, Gruodis]
    abbr_month_names: [~, Sau, Vas, Kov, Bal, Geg, Bir, Lie, Rugs, Rugp, Spa, Lap, Gruo] 
```**

# php - 查询时的PHP嵌套问题

> ID：10125096
> 
> 赞同：0
> 
> 时间：2012-04-12T13:59:45.537
> 
> 标签：php, loops, nested

我正在做一个项目。我需要查询数据库并将结果写入 csv 文件。结果将超过 15,000 个条目（这就是用户想要的）。我正在使用 LIMIT 分解结果，因为如果我不这样做，数据库将超时。我将查询划分为我所说的 total_pages。这是我的代码。

大for循环，循环19次。问题是代码将通过嵌套循环一次（只有 500 个条目）然后它不会返回。我尝试在 $results 上使用 null 但没有运气。请帮忙。

```
// using this for my LIMIT
$start_from = 0; 

$sql = "select * from someplace where gender = '".$gender."'";

$rs_result = mysql_query($sql);

$total_records =  mysql_num_rows($rs_result);

$total_pages = ceil($total_records / 500);

// open a file

//write x in file

file = fopen("./DataFile/gdownload.csv","w");

//write header to the file

$x = "Last Name,First Name,Primary_Name, ........ etc...... \n";

fwrite($file, $x);

for($count = 0; $count <= $total_pages; $count++)
{

    $query = "SELECT * 
             FROM ptable
            JOIN person_name ON ptable.Primary_Name = person_name.Primary_Name
            WHERE gender = '$gender'
            ORDER BY person_name.Lname ASC
            LIMIT ".$start_from.", 500";

    $result = mysql_query($query) or die(mysql_error());

    $num_row = mysql_num_rows($result);

    //print tables in rows

    while($row = mysql_fetch_array($result))
    {
             $x="";
        $x=$x.$row['Lname'].",";
        $x=$x.$row['Fname'].",";
        $x=$x.$row['Primary_Name'].",";
        $x=$x.$row['asdf#'].",";
        $x=$x.$row['qwer'].",";
        $x=$x.$row['hjkl'].",";
        $x=$x.$row['bnm,'].",";
        $x=$x.$row['yui'].",";
        $x=$x.$row['aaa'].",";
        ..... 
                fwrite($file, $x);
        }// end nested while

        $start_from+=500;
   }// end for loop
   fclose($file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:14:20.430

您的 LIMIT 条件可能有问题。你所拥有的对我来说似乎没问题，但行仅在第一次通过时才被写入这一事实让我认为 $result 在第一次通过后是空的。

尝试改变

`LIMIT ".$start_from.", 500";`

至

```
LIMIT 500 OFFSET ".$start_from; 
```

还要确保查询实际返回超过 500 个结果。

另一方面，奇怪的是请求仅在 15,000 条记录上超时。

# google-fusion-tables - 通过单击 html 元素打开多边形信息窗口

> ID：10125101
> 
> 赞同：2
> 
> 时间：2012-04-12T14:00:01.383
> 
> 标签：google-fusion-tables

我正在编写google api 3代码，在这里：http: [//jsfiddle.net/zVaGN/2/](http://jsfiddle.net/zVaGN/2/) 首先我调用两个Fusiontables出现在地图上，然后我在地图外创建了一个html元素，点击它时，打开我之前在 Fusiontables 中创建的自定义信息窗口。所以我不知道如何创建一个函数，当我单击 html 元素时，它将从 fusiontables 中调用已经创建的信息窗口。所以我想要这个效果[http://econym.org.uk/gmap/example_egeotestmon.htm](http://econym.org.uk/gmap/example_egeotestmon.htm) 但我应该从已经存在的融合表中调用自定义信息窗口。这个怎么做？？？

谢谢任何人！

**更新**

感谢您的回复埃里克。我不知道这一点，我尝试了一个看起来像这样的函数：

```
function izbor() {
var infowindow = new google.maps.InfoWindow({
query: {" SELECT 'ExtendedData' FROM " + tableid};
    });
infowindow.open(map);
} 
```

但我不知道从表中调用什么，fusiontables 中 infowindows 的名称是什么。我调用了 ExtendedData，因为当我将 fusiontable 导出到 kml 文件时，这是 infowindow 的代码，但是这段代码对于我写的 google api 3 可能不好..

**更新#2**

我在这里尝试过，但它不起作用.. jsfiddle.net/zVaGN/4/

无论如何感谢您的帮助，如果您提出其他解决方案，请写信！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:15:47.847

我认为这在 Fusion Tables 中是不可能的。在 Fusion Tables 中，您无法真正控制地图上显示的叠加层的创建，无论是标记还是多边形。Fusion Tables 正在使用已经渲染的叠加层动态创建图块，AFAIK 除了使用 infoWindowSuppress: false 之外，您无法控制它们上的点击事件，它确实允许您使用从 FT 点击事件返回的值显示您自己的 infoWindow .

**编辑**

此函数将显示从 Fusion Tables 返回的 html。似乎应该有一种方法可以从页面内触发图层上的点击事件。

```
 google.maps.event.addListener(layer, 'click', function(e){
     alert(e.infoWindowHtml);
 } 
```

# c# - Entity Framework 4 自动加载所有引用

> ID：10125105
> 
> 赞同：1
> 
> 时间：2012-04-12T14:00:07.377
> 
> 标签：c#, .net, vb.net, entity-framework, entity-framework-4

我正在开发一个新项目并获得了 Entity Framework 3.5 的一些经验。现在我正在构建模型并编写第一个方法，我注意到 Entity Framework 4 似乎加载了存在导航属性的每个引用。在 3.5 中，如果我想访问它们，我必须手动 .Include() 每个引用的实体。它甚至加载嵌套引用。我有 3 个看起来像这样的表：

```
Container(PK: container_Id, Name),
Text(PK: text_Id, FK: container_Id, Name),
Binary(PK: binary_Id, FK: text_Id, Name) 
```

如果我这样做，`var containerList = Context.Container.ToList();`一切都会被加载，甚至是二进制表。

此行为是否已更改，或者是否有一些选项可用于禁用每个引用的自动加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:04:47.200

EF 4 中默认启用延迟加载。您可以禁用延迟加载。

[在 Entity Framework 4 中默认禁用延迟加载](https://stackoverflow.com/questions/2967214/disable-lazy-loading-by-default-in-entity-framework-4)

# drupal - Drupal 7 Search api Solr - 400 Bad request on indexing or clean

> ID：10125112
> 
> 赞同：0
> 
> 时间：2012-04-12T14:00:25.923
> 
> 标签：drupal, solr

尝试清理索引：Apache_Solr_HttpTransportException：'400' 状态：错误请求 Apache_Solr_Service->_sendRawPost() (linha 364 de /home/mercado/public_html/sites/all/libraries/SolrPhpClient/Apache/Solr/Service.php

尝试索引itens：无法索引项目。检查日志以获取详细信息。日志说：索引时发生错误：'400' 状态：错误请求。

我使用最新版本的 apache solr 和 solrPHPclient。一切正常，我正在使用模块中的 schema.xml，模块检查 solr 服务器是否正常...

我的路径/to/solr/example/logs 中没有日志文件

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:24:56.023

我遇到了同样的问题，并意识到我将错误的配置文件复制到了 /Applications/apache-solr-3.6.1/example/solr/conf 目录。一旦我从 sites/all/modules/search_api_solr/solr-conf/3.x 复制了更正版本，它就开始正确索引。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-26T10:45:51.277

检查您的 Apache solar 是否在您的服务器上运行

# macos - Git：'rebase' 不是 git 命令。见'git --help'

> ID：10125113
> 
> 赞同：5
> 
> 时间：2012-04-12T14:00:25.727
> 
> 标签：macos, git, github, github-for-mac

我为 mac 设置了[github](http://mac.github.com/)
，现在我正在尝试从终端使用 git 命令。

如果我尝试运行`git rebase`命令，我会收到以下消息

```
> cd /Applications/GitHub.app/Contents/Resources/git/bin
> git rebase
git: 'rebase' is not a git command. See 'git --help'.

>git --help
usage: git [--version] [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p|--paginate|--no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           [-c name=value] [--help]
           <command> [<args>]

The most commonly used git commands are:
...
rebase     Forward-port local commits to the updated upstream head
.... 
```

因此，您可以从帮助输出中看到选项 rebase 存在。
我的 git 有什么问题？

```
git --version
git version 1.7.8.2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T10:14:44.900

对我来说，我发现要修复此错误消息（“ `'rebase' is not a git command`”），我需要 [通过命令行设置 Git“exec-path”，](https://github.com/hbons/SparkleShare/issues/491#issuecomment-3603531)以便一次性使用，或者更好地[通过环境变量](http://www.kernel.org/pub/software/scm/git/docs/)：

```
export GIT_EXEC_PATH=/PATH/TO/git/libexec/git-core 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:05:36.503

您正在使用 GitHub for Mac 附带的 Git 构建。他们（也就是 GitHub）可能修改了二进制文件以删除 GitHub for Mac 不使用的功能。

你真的应该安装你自己的 Git。我推荐使用 Homebrew：[链接](https://brew.sh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T11:42:28.413

我偶尔会遇到这种情况，但仅与 Xcode 安装或 macOS 安装的更改有关。

Xcode 命令行工具需要重新安装：

```
 $ xcode-select --install 
```

这将启动用于安装这些工具的 GUI。完成后，`git`按预期工作。

# git - Git - 最佳实践：如何在分支之间频繁切换并避免多次提交？

> ID：10125114
> 
> 赞同：3
> 
> 时间：2012-04-12T14:00:28.237
> 
> 标签：git, branch

我正在开发一个验证软件。我继续使用随时准备启动测试的主分支代码。所以我在其他分支中开发新功能（例如 dev ）。这是经典的 git 工作流程。

我担心的是，我需要每天在 master 和 dev 之间切换 10 次，因为设计师要求我检查他们的更新。

目前我只知道一种方法：

1.  *使用“需要回归”*消息提交我的开发工作
**   切换到主分支*   运行回归并提供反馈*   重新打开开发并继续工作*

 *这很烦人，因为在 dev 分支上创建了无用的历史记录。

是否有另一种**简单**的方法（我是初学者）来避免 dev 分支上的多次提交？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:02:46.067

在切换分支之前，请执行[`git stash`](http://schacon.github.com/git/git-stash.html). 这将以易于恢复的方式记录您正在处理的当前状态。当您切换回您的开发分支时，请执行`git stash pop`. 这将重新应用这些更改，并删除存储，使其不会留在您的历史记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:03:44.340

我认为这`git stash`就是你所需要的。[这里](http://book.git-scm.com/4_stashing.html)有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:23:52.837

`git clone`您的主存储库，并从那里运行回归测试。请记住运行`git pull`以检索更新。并且永远不要提交到克隆的存储库（或准备尽快将其合并回主存储库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T15:12:06.717

这里有几个很好的建议。我的第一个想法是有两个克隆，一个在 dev 上，一个在 master 上。只需更改目录（类似于 ydroneaud 所说的）。

另一种方法，如果你只想运行回归，是使用 git archive 来获取快照并用它进行测试。转到一个空目录并执行以下操作：

```
git --git-dir=/my/dev/clone/.git archive master | tar xvf - 
```

然后构建和测试。当然，将其放入脚本中是有意义的。*

# selenium - 选择选项机器人框架

> ID：10125116
> 
> 赞同：3
> 
> 时间：2012-04-12T14:00:42.950
> 
> 标签：selenium, robotframework

真的很快（但很复杂？）的问题。

我有这个：

```
<select multiple="multiple" id="id_products" class="selectmultiple" name="products">
    <option value="3243">testproductP (3243)</option>
    <option value="3244">testproductQ (3244)</option>
</select> 
```

我需要使用 selenium 进行机器人框架来复制我选择的选项。但是我找不到像“选择选项”这样的关键字。所以我尝试使用带有指向该选项的 xpath 的“Click Element”。

```
Click Element  xpath=//select[@name="products"]/option[@value=3244] 
```

但是，这使测试失败并出现错误：“超时：超时”

xpath 返回正确的元素，但不知何故超时。也许 Click Element 不应该这样使用，但我找不到更好的关键字。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:04:51.723

Click Element 等待页面加载事件，除非你给它一个额外的参数告诉它不要等待。但是，您也应该能够使用“从列表中选择”关键字。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T22:16:29.070

您可以使用

```
 Select From List  ${XPATH}    Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T15:34:36.223

使用“按值选择元素”关键字并指定列表下拉列表的 Xpath 和要从列表中选择的组件的值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-02-20T03:14:04.137

尝试使用 Javascript 选择元素。例子：

执行 Javascript `document.querySelector("your css").click()`

# c# - 使用 itextsharp 将 Pdf 文件页面转换为图像

> ID：10125117
> 
> 赞同：23
> 
> 时间：2012-04-12T14:00:45.703
> 
> 标签：c#, itextsharp

我想使用 ItextSharp lib 转换图像中的 Pdf 页面。

知道如何转换图像文件中的每一页

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T14:40:45.397

iText/iTextSharp 可以生成和/或修改现有的 PDF，但它们不执行任何您正在寻找的渲染。我建议查看[Ghostscript](https://stackoverflow.com/questions/1941118/converting-pdf-to-a-collection-of-images-on-the-server-using-ghostscript)或其他一些知道如何实际呈现 PDF 的库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T15:11:02.023

您可以使用 ImageMagick 将 pdf 转换为图像

转换 - 密度 300 "d:\1.pdf" -scale @1500000 "d:\a.jpg"

并且拆分pdf可以使用itextsharp

这是其他人的代码。

```
void SplitePDF(string filepath)
    {
        iTextSharp.text.pdf.PdfReader reader = null;
        int currentPage = 1;
        int pageCount = 0;
        //string filepath_New = filepath + "\\PDFDestination\\";

        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        //byte[] arrayofPassword = encoding.GetBytes(ExistingFilePassword);
        reader = new iTextSharp.text.pdf.PdfReader(filepath);
        reader.RemoveUnusedObjects();
        pageCount = reader.NumberOfPages;
        string ext = System.IO.Path.GetExtension(filepath);
        for (int i = 1; i <= pageCount; i++)
        {
            iTextSharp.text.pdf.PdfReader reader1 = new iTextSharp.text.pdf.PdfReader(filepath);
            string outfile = filepath.Replace((System.IO.Path.GetFileName(filepath)), (System.IO.Path.GetFileName(filepath).Replace(".pdf", "") + "_" + i.ToString()) + ext);
            reader1.RemoveUnusedObjects();
            iTextSharp.text.Document doc = new iTextSharp.text.Document(reader.GetPageSizeWithRotation(currentPage));
            iTextSharp.text.pdf.PdfCopy pdfCpy = new iTextSharp.text.pdf.PdfCopy(doc, new System.IO.FileStream(outfile, System.IO.FileMode.Create));
            doc.Open();
            for (int j = 1; j <= 1; j++)
            {
                iTextSharp.text.pdf.PdfImportedPage page = pdfCpy.GetImportedPage(reader1, currentPage);
                pdfCpy.SetFullCompression();
                pdfCpy.AddPage(page);
                currentPage += 1;
            }
            doc.Close();
            pdfCpy.Close();
            reader1.Close();
            reader.Close();

        }
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-30T17:53:42.200

您可以使用[Ghostscript](http://www.ghostscript.com/download/gsdnld.html) 将 PDF 文件转换为图像，我使用以下参数将所需的 PDF 转换为具有多帧的 tiff 图像：

```
gswin32c.exe   -sDEVICE=tiff12nc -dBATCH -r200 -dNOPAUSE  -sOutputFile=[Output].tiff [PDF FileName] 
```

[您也可以将 -q 参数用于静默模式您可以从此处](https://www.ghostscript.com/doc/9.26/Devices.htm)获取有关其输出设备的更多信息

之后，我可以轻松加载 tiff 帧，如下所示

```
using (FileStream stream = new FileStream(@"C:\tEMP\image_$i.tiff", FileMode.Open, FileAccess.Read, FileShare.Read))
{
    BitmapDecoder dec = BitmapDecoder.Create(stream, BitmapCreateOptions.IgnoreImageCache, BitmapCacheOption.None);
    BitmapEncoder enc = BitmapEncoder.Create(dec.CodecInfo.ContainerFormat);
    enc.Frames.Add(dec.Frames[frameIndex]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-28T10:45:33.490

我用 MuPDFCore NuGet 做到了。这是我使用的指南链接： [https ://giorgiobianchini.com/MuPDFCore/MuPDFCore.pdf](https://giorgiobianchini.com/MuPDFCore/MuPDFCore.pdf)

```
using System;
using System.Threading.Tasks;
using MuPDFCore;
using VectSharp.Raster;   
      MuPDFContext context = new MuPDFContext();
                    MuPDFDocument document = new MuPDFDocument(context, @"C:\install\test.pdf");

                    //Renderers: one per page
                    MuPDFMultiThreadedPageRenderer[] renderers = new MuPDFMultiThreadedPageRenderer[document.Pages.Count];
                    //Page size: one per page
                    RoundedSize[] renderedPageSizes = new RoundedSize[document.Pages.Count];
                    //Boundaries of the tiles that make up each page: one array per page, with one element per thread
                    RoundedRectangle[][] tileBounds = new RoundedRectangle[document.Pages.Count][];
                    //Addresses of the memory areas where the image data of the tiles will be stored: one array per page, with  one element per thread
                    IntPtr[][] destinations = new IntPtr[document.Pages.Count][];
                    //Cycle through the pages in the document to initialise everything
                    for (int i = 0; i < document.Pages.Count; i++)
                    {
                        //Initialise the renderer for the current page, using two threads (total number of threads: number of pages x 2
                    renderers[i] = document.GetMultiThreadedRenderer(i, 2);
                        //Determine the boundaries of the page when it is rendered with a 1.5x zoom factor
                        RoundedRectangle roundedBounds = document.Pages[i].Bounds.Round(2);//quality ..can use 0.5 ,1 etc.
                        renderedPageSizes[i] = new RoundedSize(roundedBounds.Width, roundedBounds.Height);
                        //Determine the boundaries of each tile by splitting the total size of the page by the number of  threads.
                        tileBounds[i] = renderedPageSizes[i].Split(renderers[i].ThreadCount);
                        destinations[i] = new IntPtr[renderers[i].ThreadCount];
                        for (int j = 0; j < renderers[i].ThreadCount; j++)
                        {
                            //Allocate the required memory for the j-th tile of the i-th page.
                            //Since we will be rendering with a 24-bit-per-pixel format, the required memory in bytes is height   x width x 3.
                            destinations[i][j] = System.Runtime.InteropServices.Marshal.AllocHGlobal(tileBounds[i][j].Height * tileBounds[i][j].Width * 3);
                        }
                    }
                    //Start the actual rendering operations in parallel.
                    Parallel.For(0, document.Pages.Count, i =>
                    {
                        renderers[i].Render(renderedPageSizes[i], document.Pages[i].Bounds, destinations[i], PixelFormats.RGB);
                    });
                    //The code in this for-loop is not really part of MuPDFCore - it just shows an example of using VectSharp to  "stitch" the tiles up and produce the full image.
        for (int i = 0; i < document.Pages.Count; i++)
                    {
                        //Create a new (empty) image to hold the whole page.
                        VectSharp.Page renderedPage = new VectSharp.Page(renderedPageSizes[i].Width,
                        renderedPageSizes[i].Height);
                        //Draw each tile onto the image.
                        for (int j = 0; j < renderers[i].ThreadCount; j++)
                        {
                            //Create a raster image object containing the pixel data. Yay, we do not need to copy/marshal anything!
                        VectSharp.RasterImage tile = new VectSharp.RasterImage(destinations[i][j], tileBounds[i][j].Width,
                        tileBounds[i][j].Height, false, false);
                            //Draw the tile on the main image page.
                            renderedPage.Graphics.DrawRasterImage(tileBounds[i][j].X0, tileBounds[i][j].Y0, tile);

                        }
                        //Save the full page as a PNG image.
                        renderedPage.SaveAsPNG(@"C:\install\page"+ i.ToString() + ".png");
                    }
                    //Clean-up code.
                    for (int i = 0; i < document.Pages.Count; i++)
                    {
                        //Release the allocated memory.
                        for (int j = 0; j < renderers[i].ThreadCount; j++)
                        {
                            System.Runtime.InteropServices.Marshal.FreeHGlobal(destinations[i][j]);
                        }
                        //Release the renderer (if you skip this, the quiescent renderer’s threads will not be stopped, and your  application will never exit!
                        renderers[i].Dispose();
                    }
                        document.Dispose();
                        context.Dispose();
                    } 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-11-24T17:24:22.933

您可以从 PDF 中提取图像并另存为 JPG 这是您需要的示例代码 Itext Sharp

```
 public IEnumerable<System.Drawing.Image> ExtractImagesFromPDF(string sourcePdf)
    {
        // NOTE:  This will only get the first image it finds per page.
        var pdf = new PdfReader(sourcePdf);
        var raf = new RandomAccessFileOrArray(sourcePdf);

        try
        {
            for (int pageNum = 1; pageNum <= pdf.NumberOfPages; pageNum++)
            {
                PdfDictionary pg = pdf.GetPageN(pageNum);

                // recursively search pages, forms and groups for images.
                PdfObject obj = ExtractImagesFromPDF_FindImageInPDFDictionary(pg);
                if (obj != null)
                {
                    int XrefIndex = Convert.ToInt32(((PRIndirectReference)obj).Number.ToString(CultureInfo.InvariantCulture));
                    PdfObject pdfObj = pdf.GetPdfObject(XrefIndex);
                    PdfStream pdfStrem = (PdfStream)pdfObj;
                    PdfImageObject pdfImage = new PdfImageObject((PRStream)pdfStrem);
                    System.Drawing.Image img = pdfImage.GetDrawingImage();
                    yield return img;
                }
            }
        }
        finally
        {
            pdf.Close();
            raf.Close();
        }
    } 
```

# windows-phone-7 - 使用本地文件为动态磁贴 WP7 设置 BackBackgroundImage

> ID：10125119
> 
> 赞同：1
> 
> 时间：2012-04-12T14:00:55.157
> 
> 标签：windows-phone-7, live-tile

这可能真的很简单，我已经尝试过搜索，但我无法找到解决方案。

我的问题很基本。我无法将 BackBackgroundImage uri 路径设置为我制作的本地静态 png。

这是我用来生成图块的代码：

```
 ShellTile testtile = ShellTile.ActiveTiles.First();

        if (testtile != null)
        {
            StandardTileData newtiledata = new StandardTileData
            {

                Title = "Test Title",
                Count = 0,
                BackContent = "Test Content",
                BackBackgroundImage = new Uri("Content/BackTileIcon.png", UriKind.Relative)

            };
            testtile.Update(newtiledata);
        } 
```

问题是我无法让 BackTileIcon.png 显示。我的“测试内容”显示正常，并且图块翻转回正面图像 好的，这只是我无法显示的背面图像。

如果我在构建后打开 XAP，我可以看到有一个 Content 文件夹，并且内容文件夹内是 BackTileIcon.png 文件。

我无法确定子文件夹中本地图像的 Uri 所需的格式。我将 Uri 更改为指向包含在根文件夹中的我的游戏大图标（因此 Uri 路径只是“LargeAppIcon.png”）并且可以正常工作，因此我知道代码可以使用正确的路径更新背面图像。

我只是在这里做一些愚蠢的错误吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:02:28.130

为了在您的动态磁贴中使用本地图像，该图像必须位于 /Shared/ShellContent 文件夹下的独立存储中，而不是在您的项目中。

您要么必须在应用程序中生成图像并将其直接保存在 isolatedStorage 中，要么在运行时将内容图像复制到那里。

# c++ - 有没有使用显卡的方法（除了CUDA和OpenCL）？

> ID：10125120
> 
> 赞同：2
> 
> 时间：2012-04-12T14:01:01.173
> 
> 标签：c++, gpu

我是 GPU 编程的新手，我还没有听说过任何其他方式（除了 CUDA 和 OpenCL）来使用视频板，所以我想知道是否有其他方式来使用它。任何人都可以指出一些例子吗？

还有一个问题：D：OpenGL 和 DirectX 是否利用了显卡的优势？如果是，你能告诉我怎么做吗？

PS：我使用 C++。

编辑：感谢您的快速回复。

据我所知，显卡用于并行处理（尤其是同指令多数据）。如果你提到了，我也想知道显卡是否还有其他用途（尤其是老的，因为他们不支持OpenCL和CUDA，我猜他们不能做并行处理） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:17:08.177

其他 GPGPU 语言/标准

[溪](http://graphics.stanford.edu/projects/brookgpu/)

[开放式ACC](http://www.openacc-standard.org/)

[开放式MP](http://openmp.org/wp/)

> 还有一个问题：D：OpenGL 和 DirectX 是否利用了显卡的优势？如果是，你能告诉我怎么做吗？

在引入着色器之前，渲染过程是由固定功能电路顺序实现的。引入Shader Model之后，增加了顶点着色器处理器和像素着色器处理器来代替固定功能块。现在每个流核心都是统一的着色器处理器，它可以运行在DirectX11中引入的Vertex/Geometry/Pixel Shader以及Hull和Doman Shader，以及Compute Shaders -Kernels。因此，着色器的全部容量可以随时使用，最大化着色器性能效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:16:36.947

> 我是 GPU 编程的新手，我还没有听说过任何其他方式（除了 CUDA 和 OpenCL）来使用视频板

有 OpenCL 和 OpenMP。ATI 也有某种 API（我认为），但我忘记了它叫什么。

> OpenGL 和 DirectX 是否利用了显卡？

他们当然会。特别是 DirectX 旨在提供或多或少轻松访问硬件加速。您无法以相同的速度在 CPU 上执行渲染。

> ,我也想知道显卡是否还有其他用途

如果显卡支持浮点纹理，即使 GPU 不支持 CUDA/OpenCL/whatever，您也可以结合这些纹理使用片段/像素着色器在 GPU 上执行一些计算。我*认为*技术被称为GDGPU。DirectX sdk 前段时间有“GPU 布”的例子，在 NVidia OpenGL SDK 中有[“GDGPU 流体”和“GPU 粒子”](http://http.download.nvidia.com/developer/SDK/Individual_Samples/samples.html)。请注意，以这种方式在 GPU 上尝试执行过于昂贵的计算（例如对渲染的每个像素在 4096x4096 纹理上执行详尽搜索）可能会在某些硬件上蓝屏系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:15:32.737

OpenCL、OpenGL、DirectX 以及某种程度上的 CUDA 只是硬件供应商可以在驱动程序中实现的接口规范。然后，这些接口可以总线用于利用驱动程序驱动的任何内容。在大多数情况下，这是用于这些接口的 GPU。还有其他接口（WDDM 指定更多接口）与 GPU 通信，但它们都有特定的用例。您可能想通过“使用图形卡”来澄清您的意思。

# c# - DataGrid ScrollContentPresenter 未捕获 RequestBringIntoView 气泡事件

> ID：10125122
> 
> 赞同：1
> 
> 时间：2012-04-12T14:01:01.800
> 
> 标签：c#, .net, wpf, events, xaml

我有一个带有一个 DataGrid 的窗口。此 DataGrid 的 DataGridColumnHeader 是模板化的：

```
<Style x:Key="headerTxtBox"  TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Border>
                               <ScrollViewer/>
                        </Border>
                        <Thumb Name="PART_LeftHeaderGripper">
                        ...
                        </Thumb>

                        <Thumb Name="PART_RightHeaderGripper">
                        ...
                        </Thumb>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
</Style> 
```

主视图：

```
<Window>
    <Window.Resources>
    ...
    </Window.Resources>
    <DataGrid Loaded="GridOnLoaded"
              ColumnHeaderStyle="{StaticResource headerTxtBox}"/>
</Window> 
```

在 DataGrid.Loaded 事件的后端，我将处理程序添加到 ScrollContentPresenter.RequestBringIntoView。

```
private void GridOnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        ScrollContentPresenter scp = Utils.FindDescendant<ScrollContentPresenter>(_grid);
        if (scp != null)
        {
            scp.RequestBringIntoView += ScpOnRequestBringIntoView;
        }
    } 
```

**问题：**

如果我的模板包含带有 ScrollViewer（例如 TextBox）的控件，则 ScrollContentPresenter 将永远不会捕获 RequestBrintIntoView 事件。

如果我将更改我的模板并摆脱 ScrollViewer，一切正常。ScrollContentPresenter 将捕获每个 RequestBringIntoView。

当 RequestBringIntoView 提出时，我已经查看了路线。在这两种情况下，路线相同。它通过 ScrollContentPresenter。但在第一种情况下 RequestBringIntoView 由 ScrollContentPresenter 的父 ScrollViewer 处理，而不是由 ScrollContentPresenter。

# sinatra - Sinatra on Thin：如何隐藏或更改 HTTP“服务器”响应标头

> ID：10125124
> 
> 赞同：3
> 
> 时间：2012-04-12T14:01:07.943
> 
> 标签：sinatra, rack, thin

最干净的方法是什么？一些机架中间件？我试图修改`env['SERVER_SOFTWARE']`，但我仍然得到回应：

```
Server: thin 1.3.1 codename Triple Espresso 
```

如何更改该标头的值，或将其完全从响应中删除？

**编辑**

另一个尝试：

```
before do
  headers 'Server' => 'ipm'
end

after do
  headers 'Server' => 'ipm'
end 
```

但仍然没有任何变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:02:12.793

这在这里有效：

```
require 'sinatra'

get '/' do
  [200, {'Server' => 'My Server'}, 'contents']
end 
```

如果您想为所有请求执行此操作：

```
class ChangeServer
  def initialize(app)
    @app = app
  end

  def call(env)
    res = @app.call(env)
    res[1]['Server'] = 'My server'
    return res
  end
end 
```

然后你`use ChangeServer`在你的应用程序中。

# database - 在日期类型中隐藏时间

> ID：10125126
> 
> 赞同：0
> 
> 时间：2012-04-12T14:01:14.157
> 
> 标签：database, asp.net-mvc

我想隐藏时间并只显示这样的日期（DD/MM/YYYY）。我尝试了很多方法：

```
<%: Html.DisplayFor(modelItem => item.Dmcv.ToString()) %>
<%: Html.DisplayFor(modelItem => item.Dmcv.ToString("DD/MM/YYYY")) %>
<%: Html.DisplayFor(modelItem => item.Dmcv.Date.ToShortDateString()) %> 
```

但我总是遇到同样的错误：

> System.InvalidOperationException：模型只能与房屋所有权的表达式访问字段、一维数组的索引或自定义索引器单个参数一起使用。

我真的错过了一些简单的东西:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:03:25.533

DisplayTemplates 需要一个简单的属性表达式。您不能使用 DisplayTemplate 并简单地直接呈现值：

```
@item.Dmcv.Date.ToShortDateString() 
```

或者，您可以为 DateTime 创建一个名为 Date 的新 DisplayTemplate（部分视图）：

```
@model DateTime
@Model.ToShortDateString() 
```

然后更改您的视图以使用新模板：

```
<%: Html.DisplayFor(modelItem => item.Dmcv.Date, "Date") %> 
```

# c - 流上可能导致设置 ferror() 的错误条件是什么？

> ID：10125127
> 
> 赞同：2
> 
> 时间：2012-04-12T14:01:15.447
> 
> 标签：c, stream, ferror

从流中读取和写入的某些操作可能会在流中设置错误标志，可以使用 进行测试`ferror(stream)`，虽然我很确定这一定是一个常见问题，但我无法找到所有可能的列表SO或一般网络中的错误原因。什么可能导致 ferror() 被设置？

特别是，我正在寻找在 Minix 3 上对标准输入执行 fgets() 时可能导致错误的原因，但我也在寻找更通用的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:20:37.640

没有任何可能的错误的简单列表。但是，根据您正在读取或写入的设备，问题可能包括：

*   设备故障（短路、过热、老化、...）
*   设备从机器中拔出（USB 记忆棒）
*   设备已关闭或断电（外部磁盘驱动器）
*   设备被弹出（CD-ROM）
*   网络连接丢失（SAN、NAS）
*   设备已满（没有空间可写）
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-23T21:01:26.407

> 流上可能导致设置 ferror() 的错误条件是什么？

几种可能性之一： 尝试错误方向的 I/O 操作会设置*错误指示器*。

```
#include <stdio.h>
int main(void) {
  FILE *f = fopen("t", "w");
  if (f) {
    int ch = fgetc(f);
    printf("ch %d\n", ch);
    printf("Error %d\n", ferror(f));
    printf("EOF %d\n", feof(f));
    fclose(f);
  }
} 
```

输出

```
ch -1
Error 1
EOF 0 
```

# vmware - VMware 工作站 v7 上的来宾操作系统在无线适配器上桥接时无法 ping 主机操作系统

> ID：10125130
> 
> 赞同：4
> 
> 时间：2012-04-12T14:01:19.453
> 
> 标签：vmware, vmware-workstation

我最近在工作中购买了一台新的 Windows 7（64 位）笔记本电脑，我安装了 VMware Workstation 7.1 的试用版并设置了两个来宾操作系统——Windows 2008 R2 和 Windows 7 Professional，它们都是 64 位的。

*当 Vmnet0 桥接设置为自动或专门绑定到无线适配器*（在虚拟网络编辑器下）时，来宾 VM 无法ping 主机操作系统。但是，主机系统可以在此设置下 ping 并访问来宾 VM 管理员共享。

现在*，当 vmnet0 专门桥接到以太网适配器*时，来宾 VM 能够连接到主机操作系统。

直到最近，我一直在使用安装在 Windows XP（主机操作系统）笔记本电脑上的 VMware server 2.0，带有两个来宾操作系统，Win XP 和 Win 2003（32 位），并且 vmnet0 桥接设置为“桥接到自动选择的适配器”。当我通过以太网或无线适配器连接到网络时，我从未遇到过与主机连接的虚拟机问题。

根据 VMware 的说法，从 v4.0 开始支持无线适配器桥接。是否需要在 Windows 7 或 Vmware 工作站中的无线适配器上配置任何东西才能使从来宾到主机的桥接工作也成功？无线适配器型号为-intel centrino Ultimate N6300。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-19T15:50:40.467

既然你还没有答案，我会试着建议一些离题的东西......

您的无线接入点是否打开了站点隔离？AP 的这一特性限制了 wifi 客户端之间的通信。他们只能与 AP 通话，然后再与 AP 的有线连接通话。我已经看到越来越多的企业环境开启了这一点。

# python - 有没有办法使用用户定义的距离度量来选择 scikits 学习中的 k 个最近邻居？

> ID：10125131
> 
> 赞同：3
> 
> 时间：2012-04-12T14:01:22.577
> 
> 标签：python, machine-learning, scikits, scikit-learn

我必须使用余弦相似度度量和其他一些用户定义的度量来为一组向量使用 K 最近邻。如何使用 scikits 学习来实现这一目标？我找到`sklearn.neighbors.KNeighborsClassifier`了，但我无法找出用户定义指标的任何选项。我目前使用的是最新版本的scikits learn 0.11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:06:01.153

（还没有？）可以将预先计算或延迟计算的用户定义距离函数传递给 kNN 模型。

但是在主分支中，现在您可以使用任意 p 表示 p-Minkowsky 距离：

[https://github.com/scikit-learn/scikit-learn/pull/742](https://github.com/scikit-learn/scikit-learn/pull/742)

很容易为蛮力方法传递任意用户定义的距离函数，但是球树实现（对于低维数据）不能那么容易地适应一般情况。

同样对于稀疏的正数据和余弦相似度，倒排索引将是更好的数据结构，请参阅： http: [//metaoptimize.com/qa/questions/9691/efficient-nearest-neighbors-in-a-very-sparse-settings](http://metaoptimize.com/qa/questions/9691/efficient-nearest-neighbors-in-a-very-sparse-settings)

# java - Apache POI jar 没有 hwpf 包

> ID：10125136
> 
> 赞同：2
> 
> 时间：2012-04-12T14:01:39.930
> 
> 标签：java, apache-poi, hwpf

我已经从[这个链接](http://www.apache.org/dyn/closer.cgi/poi/release/bin/poi-bin-3.8-20120326.zip)的第一个[镜像链接](http://apache.petsads.us/poi/release/bin/poi-bin-3.8-20120326.zip)下载了 poi api jar 文件，这是建议的。

下载后，我看到那里不存在**org.apache.poi.hwpf包。**实际上我的工作完全依赖于那个 API。所以任何人都可以告诉我下载**hwpf API**的正确链接。

实际上，我的工作是读取带有一些文本和一些表格的 MS Word 文件，然后编辑表格行的值。如果任何其他 API 也适用于此类工作，请建议我提供下载链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:09:05.363

如[Apache POI 组件页面](http://poi.apache.org/overview.html#components)中所述，HWPF 包在“scratchpad”JAR 中可用：poi-scratchpad-3.8-20120326.jar

请注意，便签本功能并不是特别成熟，应谨慎使用。

# mysql - 我可以从 Vim 视觉选择中执行 MySQL 查询，并在新缓冲区中输出

> ID：10125138
> 
> 赞同：7
> 
> 时间：2012-04-12T14:01:46.773
> 
> 标签：mysql, linux, vim

给定一个包含多行 MySQL 查询的文件，例如

```
SELECT foo, bar, etc
FROM blah
WHERE something or other
LIMIT etc 
```

有什么方法可以让我在 Vim 中直观地选择一个查询，通过 MySQL 进行管道传输，然后查看查询并生成一个新的缓冲区？

澄清：我不想要表格输出，而是可以在 vim 中进一步处理或导入电子表格的东西（比如从 mysql --batch 获得的制表符分隔输出）（Ubuntu Linux）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T14:13:02.220

该[`Dbext`插件](http://www.vim.org/scripts/script.php?script_id=356)支持这种行为。

直观地选择 SQL 语句，然后运行`:DBExecRangeSQL`以执行它。

结果将返回到当前视口底部的新拆分中。

控制输出窗口的选项有很多。看看`:help dbext`辉煌的细节。

![dbext 示例输出](../Images/74551cee939519901859d8131dbdbaa3.png)

### 2012 年 5 月 1 日更新

该插件的 15.0 版本已发布，内置此功能。

`-t`可以覆盖默认标志

**默认设置：**

```
let g:dbext_default_MYSQL_extra = '-t' 
```

**覆盖批量设置**

```
let g:dbext_default_MYSQL_extra = '--batch --raw' 
```

~~Dbext 将`-t`选项硬编码到 MySQL，但如果从 dbext.vim 中删除该行，则在 DB_MYSQL_execSql（我当前版本）的第 2278 行，您可以传递 --batch 和 --raw 选项：~~

 ~~```
:DBSetOption MYSQL_cmd_options='--batch --raw' 
```~~ 

要恢复表格输出：

```
:DBSetOption MYSQL_cmd_options='-t' 
```

~~我在我的安装中成功测试了这个。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:40:08.437

感谢 Michael 和 Zsolt Botykai 对 dbext 和其他 vim 插件的建议——尽管它们似乎没有提供原始输出。

[受Matias 的回答](https://stackoverflow.com/a/2585673/20074)启发，我在 .vimrc 中添加了以下内容。这是我第一次尝试 vimscript，所以请注意...

```
function Query() range
    " use a temp file for result
    let s:tmpfile = system('mktemp')
    " single line copy of query followed by blank line
    echo system('echo '.shellescape(join(getline(a:firstline,a:lastline)," ")).
    \ ' > '.s:tmpfile)
    echo system('echo >> '.s:tmpfile)
    " pipe through mysql into temp file
    echo system('echo '.shellescape(join(getline(a:firstline,a:lastline),"\n")).
    \ '| mysql --batch --silent --raw &>> '.s:tmpfile)
    " and open in new buffer
    exec 'ed '.s:tmpfile
endfunction
" select query and <F5>
vmap <F5> :call Query()<cr> 
```

可视选择查询，按 F5（或 :call Query()），结果在新缓冲区中打开。

它假定 linux（使用 mktemp）并从 .my.cnf 获取连接详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:13:03.110

试试[dbext](http://www.vim.org/scripts/script.php?script_id=356)插件。

但是这个任务还有一些[其他](http://www.vim.org/scripts/script.php?script_id=2081)的。

# c# - 使用 Youtube API 添加评论在 .NET 中随机失败

> ID：10125139
> 
> 赞同：5
> 
> 时间：2012-04-12T14:01:49.053
> 
> 标签：c#, .net, youtube-api

我在 2010 年使用 C# .NET 2.0 winform，添加了用户登录和发表评论的功能。我复制了 .NET 开发人员指南中的如何发表评论，但在尝试发表评论时出现随机但频繁的异常。起初我认为这可能是因为使用 google 电子邮件而不是 youtube 登录名存在一些问题，当用户成功登录时，为了解决这个问题，我请求配置文件，获取用户名并创建一个新的youtube 设置类，并使用用户个人资料名称提供适当的凭据。然而，这并没有解决问题，评论仍然偶尔有效。这是基本上处理登录的代码。

```
 youtubeService.setUserCredentials(userBox.Text, passwordBox.Text);

        try
        {
            String strAuth = youtubeService.QueryClientLoginToken();
        }
        catch (Exception ex)
        {
        } 
```

上面的代码是一个单独的表单，托管 youtube 视频的表单基本上是查看此过程是否已完成，并获取用于登录的用户名、密码并设置新设置：

```
 m_LoggedInSettings = new YouTubeRequestSettings(myappname, mydevkey, username, password);
                m_LoggedInRequest = new YouTubeRequest(m_LoggedInSettings); 
```

然后用于添加评论：

```
 Comment userComment = new Comment();
                userComment.Content = commentText;
                m_LoggedInRequest.AddComment(youtubevideo, userComment); 
```

当它失败时，我得到以下信息：

{“请求执行失败：[https](https://gdata.youtube.com/feeds/api/videos/t-8K8Hj8bxE/comments) ://gdata.youtube.com/feeds/api/videos/t-8K8Hj8bxE/comments ”}

使用以下信息：

{“远程服务器返回错误：(403) Forbidden。”}

状态码：

System.Net.HttpStatusCode.Forbidden

状态说明：

禁止的

我想到了几件事，我没有适当的注销来立即向 youtube 发送任何内容（这需要吗？），所以可能是我已经登录了多次，并且不知何故在 youtube 上标记边？也可能是我本质上是在创建新的设置并请求未用于获取视频/评论的对象，也许从正常设置文件（没有登录）中获取的视频出现问题或类似的问题？老实说，我不知道出了什么问题，任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:02:44.517

好的，所以我发现他们出错的原因是因为我试图太快地发布连续评论，但是我不知道能够发布更多评论的超时时间是多少。

# c++ - 实现 vptr 的替代方案？

> ID：10125140
> 
> 赞同：7
> 
> 时间：2012-04-12T14:02:03.713
> 
> 标签：c++, compiler-construction, compiler-optimization, micro-optimization, vptr

这个问题不是关于 C++ 语言本身（即不是关于标准），而是关于如何调用编译器来实现虚函数的替代方案。

实现虚函数的一般方案是使用指向指针表的指针。

```
class Base {
     private:
        int m;
     public:
        virtual metha();
}; 
```

相当于说 C 会是这样的

```
struct Base {
    void (**vtable)();
    int m;
} 
```

第一个成员通常是指向虚函数列表等的指针（应用程序无法控制的内存中的一块区域）。在大多数情况下，在考虑成员等之前，这恰好花费了指针的大小。因此，在 32 位寻址方案中，大约 4 个字节等。如果您在应用程序中创建了 40k 多态对象的列表，则大约为 40k x在任何成员变量等之前 4 字节 = 160k 字节。我也知道这恰好是 C++ 编译中最快和最常见的实现。

我知道这因多重继承而变得复杂（尤其是其中的虚拟类，即菱形结构等）。

另一种方法是将第一个变量作为 vptrs 表的索引 id（在 C 中等效，如下所示）

```
struct Base {
    char    classid;     // the classid here is an index into an array of vtables
    int     m;
} 
```

如果应用程序中的类总数少于 255（包括所有可能的模板实例化等），则 char 足以容纳索引，从而减少应用程序中所有多态类的大小（我不包括对齐问题， ETC）。

我的问题是，GNU C++、LLVM 或任何其他编译器中是否有任何开关可以做到这一点？或减小多态对象的大小？

编辑：我了解指出的对齐问题。还有一点，如果这是在 64 位系统上（假设是 64 位 vptr），每个多态对象成员的成本约为 8 个字节，那么 vptr 的成本是内存的 50%。这主要与大量创建的小型多态有关，所以我想知道如果不是整个应用程序，这种方案是否至少适用于特定的虚拟对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:12:52.977

您的建议很有趣，但是如果可执行文件由多个模块组成，并在它们之间传递对象，则它将不起作用。鉴于它们是单独编译的（例如 DLL），如果一个模块创建一个对象并将其传递给另一个模块，而另一个模块调用一个虚拟方法 - 它如何知道`classid`所指的是哪个表？您将无法添加另一个`moduleid`，因为这两个模块在编译时可能不知道彼此。所以除非你使用指针，否则我认为这是一个死胡同......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:54:38.753

不，没有这样的开关。

LLVM/Clang 代码库避免了由数以万计分配的类中的虚拟表：这在**封闭**的层次结构中运行良好，因为单个`enum`可以枚举所有可能的类，然后每个类都链接到`enum`. **关闭**显然是`enum`因为。

然后，在调用该方法之前，虚拟性由 a `switch`on the`enum`和适当的强制转换实现。再次**关闭**。`switch`必须针对每个新类进行修改。

* * *

第一种选择：外部 vpointer。

如果您发现自己经常支付 vpointer 税，那么大多数对象都是已知类型的。然后，您可以将其外部化。

```
class Interface {
public:
  virtual ~Interface() {}

  virtual Interface* clone() const = 0; // might be worth it

  virtual void updateCount(int) = 0;

protected:
  Interface(Interface const&) {}
  Interface& operator=(Interface const&) { return *this; }
};

template <typename T>
class InterfaceBridge: public Interface {
public:
  InterfaceBridge(T& t): t(t) {}

  virtual InterfaceBridge* clone() const { return new InterfaceBridge(*this); }

  virtual void updateCount(int i) { t.updateCount(i); }

private:
  T& t; // value or reference ? Choose...
};

template <typename T>
InterfaceBridge<T> interface(T& t) { return InterfaceBridge<T>(t); } 
```

然后，想象一个简单的类：

```
class Counter {
public:
  int getCount() const { return c; }
  void updateCount(int i) { c = i; }
private:
  int c;
}; 
```

您可以将对象存储在数组中：

```
static Counter array[5];

assert(sizeof(array) == sizeof(int)*5); // no v-pointer 
```

并且仍然将它们与多态函数一起使用：

```
void five(Interface& i) { i.updateCount(5); }

InterfaceBridge<Counter> ib(array[3]); // create *one* v-pointer
five(ib);

assert(array[3].getCount() == 5); 
```

价值与参考实际上是一种设计张力。一般来说，如果您需要，`clone`您需要按值存储，并且在您按基类存储时需要克隆（`boost::ptr_vector`例如）。实际上可以同时提供*两个*接口（和桥接器）：

```
Interface <--- ClonableInterface
  |                 |
InterfaceB     ClonableInterfaceB 
```

这只是额外的打字。

* * *

另一种解决方案，涉及更多。

切换可以通过跳转表来实现。这样的表可以在运行时完美地创建，`std::vector`例如：

```
class Base {
public:
  ~Base() { VTables()[vpointer].dispose(*this); }

  void updateCount(int i) {
    VTables()[vpointer].updateCount(*this, i);
  }

protected:
  struct VTable {
    typedef void (*Dispose)(Base&);
    typedef void (*UpdateCount)(Base&, int);

    Dispose dispose;
    UpdateCount updateCount;
  };

  static void NoDispose(Base&) {}

  static unsigned RegisterTable(VTable t) {
    std::vector<VTable>& v = VTables();
    v.push_back(t);
    return v.size() - 1;
  }

  explicit Base(unsigned id): vpointer(id) {
    assert(id < VTables.size());
  }

private:
  // Implement in .cpp or pay the cost of weak symbols.
  static std::vector<VTable> VTables() { static std::vector<VTable> VT; return VT; }

  unsigned vpointer;
}; 
```

然后，一个`Derived`类：

```
class Derived: public Base {
public:
  Derived(): Base(GetID()) {}

private:
  static void UpdateCount(Base& b, int i) {
    static_cast<Derived&>(b).count = i;
  }

  static unsigned GetID() {
    static unsigned ID = RegisterTable(VTable({&NoDispose, &UpdateCount}));
    return ID;
  }

  unsigned count;
}; 
```

好吧，现在你会意识到编译器为你做这件事是多么的棒，即使是以一些开销为代价。

哦，由于对齐，一旦一个`Derived`类引入一个指针，就有可能在`Base`和下一个属性之间使用 4 个字节的填充。您可以通过仔细选择前几个属性来使用它们`Derived`以避免填充...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T14:20:50.740

几点观察：

1.  是的，可以使用较小的值来表示类，但是某些处理器需要对齐数据，因此将数据值对齐到例如 4 字节边界的要求可能会丢失空间节省。此外，对于多态继承树的所有成员，class-id 必须位于明确定义的位置，因此它很可能早于其他日期，因此无法避免对齐问题。

2.  存储指针的成本已转移到代码中，其中每次使用多态函数都需要代码将类 ID 转换为 vtable 指针或一些等效的数据结构。所以它不是免费的。显然，成本权衡取决于代码量与对象数量。

3.  如果从堆中分配对象，通常会在 orer 中浪费空间以确保对象被登录到最差边界，因此即使代码量小，多态对象数量多，内存管理开销也可能是明显大于指针和字符之间的差异。

4.  为了让程序能够独立编译，整个程序中的类的数量，因此在编译时必须知道class-id的大小，否则无法编译代码来访问它。这将是一笔巨大的开销。在最坏的情况下修复它更简单，并简化编译和链接。

请不要让我阻止您尝试，但是使用任何可能使用可变大小 id 来派生函数地址的技术来解决更多问题。

我强烈建议您在[Wikipedia Cola上查看](http://en.wikipedia.org/wiki/COLA_%28software_architecture%29)[Ian Piumarta 的可乐](http://piumarta.com/software/cola/)

它实际上采用了不同的方法，并以更灵活的方式使用指针来构建继承、基于原型或开发人员需要的任何其他机制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T14:51:25.807

简短的回答是不，我不知道有任何开关可以使用任何常见的 C++ 编译器来执行此操作。

更长的答案是，要做到这一点，您只需要将大部分智能构建到链接器中，这样它就可以协调在所有链接在一起的目标文件中分配 ID。

我还要指出，它通常不会有很多好处。至少在典型情况下，您希望结构/类中的每个元素都处于“自然”边界，这意味着它的起始地址是其大小的倍数。使用包含单个 int 的类的示例，编译器将为 vtable 索引分配一个字节，然后立即填充三个字节，以便下一个`int`将落在一个四的倍数的地址处。最终结果将是类的对象将占用与我们使用指针完全相同的存储量*。*

我要补充一点，这也不是一个牵强的例外。多年来，最小化插入到结构/类中的填充的标准建议是，将预期最大的项目放在开头，然后朝着最小的方向发展。这意味着在*大多数*代码中，您最终会在结构的第一个显式定义的成员之前得到相同的三个字节的填充。

要从中获得任何好处，您必须意识到这一点，并拥有一个包含（例如）三个字节数据的结构，您可以将其移动到您想要的位置。然后你会将它们移动到结构中明确定义的第一个项目。不幸的是，这也意味着如果您关闭此开关以便拥有一个 vtable 指针，最终编译器会插入可能不必要的填充。

总结一下：它没有实现，如果它通常不会完成太多。

# javascript - Node.js 源代码需要什么编码？

> ID：10125141
> 
> 赞同：12
> 
> 时间：2012-04-12T14:02:04.127
> 
> 标签：javascript, node.js, unicode

我做了一些谷歌搜索，但我得到了与编码字符串或文件相关的结果。

我可以用 UTF-8*编写我的 Node.js JavaScript 源代码吗？*我可以在注释、字符串或变量名中使用非 ASCII 字符吗？

ECMA-262 似乎[需要 UTF-16 encoding](http://bclary.com/2004/11/07/#a-6)，但 Node.js 不会运行 UTF-16 编码`.js`文件。但是，它将运行 UTF-8 源代码并正确解释非 ASCII 字符。

那么这是设计使然还是“意外”？是否在某处指定支持 UTF-8 源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:14:51.307

参考： http: [//mathiasbynens.be/notes/javascript-identifiers](http://mathiasbynens.be/notes/javascript-identifiers)

UTF-8 字符是有效的 JavaScript 变量名。继续并编码 UTF-8。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-11T16:58:02.740

我找不到说明 Node 将文件视为以 UTF-8 编码的文档，但在实验上似乎是这样：

```
/* Check in your editor that this Javascript file was saved in UTF-8 */
var nonEscaped = "Планета_Зямля";
var escaped = "\u041f\u043b\u0430\u043d\u0435\u0442\u0430\u005f\u0417\u044f\u043c\u043b\u044f";
if (nonEscaped === escaped) {
  console.log("They match");
} 
```

上面的示例打印`They match`.

## 非 BMP 注释：

请注意，UTF-8 支持非 BMP 代码点（U+10000 及以上），但 Javascript 在这种情况下会很复杂，它会自动将它们转换为代理对。这是语言的一部分：

```
/* Check in your editor that this Javascript file was saved in UTF-8 */
var nonEscaped = ""; // U+1F4A9
var escaped1 = "\ud83d\udca9";
if (nonEscaped === escaped1) {
  console.log("They match");
}
/* Newer implementations support this syntax: */
var escaped2 = "\u{1f4a9}";
if (nonEscaped === escaped2) {
   console.log("The second string matches");
} 
```

这打印`They match`和`The second string matches`.

# java - 如何创建一个大的选择屏幕？

> ID：10125155
> 
> 赞同：0
> 
> 时间：2012-04-12T14:02:46.583
> 
> 标签：java, android

我的应用程序跟踪玩家在扑克桌上的游戏方式。我让我的用户可以选择以“玩家”对象的形式保存多达 50 个玩家的统计数据，该对象存储在 sharedPreferences 中的 JSON 数组中。事实证明，允许用户选择和加载其中一个播放器是很困难的。

alertDialog 似乎很小，对于本质上只是一个大菜单的新活动似乎有点过火，我担心将我的对象传递给它会很困难。viewFlipper 听起来很有趣，但我不知道它是否合适。

我该怎么做呢？用几十个按钮填满屏幕是我真正想做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:32:38.083

我同意为此创建一个新活动将是矫枉过正。解决此问题的一种方法是`GridView`使用您的“按钮”填充 - 用户可以通过单击从网格中选择一个。问题是在哪里/如何显示这个网格。

ViewFlipper 在我看来是一个不错的选择。您将采取的方法是将现有布局放在视图翻转器中，然后在现有布局之后将 GridView 放入 ViewFlipper：

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:id="@+id/flipper">

    <LinearLayout ...>

        <!-- this is where your main layout goes -->

    </LinearLayout>

    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/player_select"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" />
</ViewFlipper> 
```

然后在您的活动中为您的网格视图设置适配器，并在`OnItemClickListener`单击一项时执行某些操作。最后在某个地方（在主布局或选项菜单或其他地方）提供了一些东西来显示这个网格视图。在该操作的处理程序代码中，您将拥有类似

```
ViewFlipper flip = (ViewFlipper)flip.findViewById(R.id.flipper);
flip.showNext(); 
```

这将有效地隐藏您的主要布局并显示网格。最后`OnItemClickListener`你会有

```
ViewFlipper flip = (ViewFlipper)flip.findViewById(R.id.flipper);
flip.showPrevious(); 
```

这将隐藏网格视图并导航回您的主布局。随意添加任何你喜欢的动画过渡（例如 3G 翻转动画看起来特别好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:41:50.577

尝试一个`AutoCompleteTextView`. 开始输入其中一个名称，然后会弹出所有可能匹配项的列表。

[谷歌教程](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)截图：

![在此处输入图像描述](../Images/52d36f8f5e6cd1126408b9c016f81716.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:35:25.163

我选择了[ListView](http://developer.android.com/resources/tutorials/views/hello-listview.html)。它结合了自动完成的过滤和整洁性，同时显示名称，因此用户不必像 ViewFlipper 解决方案那样记住它们。

![在此处输入图像描述](../Images/33739e39c581fb0ee0c54d679ab39e5a.png)

感谢您的两个答案，它们都是很好的解决方案，帮助我找到了结合两者的解决方案。

自动完成具有搜索的优势，因此我可以将用户可以保存的玩家数量扩展到我心中的内容，它看起来也很整洁，但无法轻易看到整个列表，这对于扑克玩家来说是必要的，因为你在给你的标题命名时给出的名字笔记很少是你的同伴的名字，而是基于他们的外表/演奏风格的即兴昵称。因此，使用自动完成功能，用户必须记住他们给超过 50 名玩家和可能相隔数月的昵称会被证明是棘手的。

Alek Gs 解决方案将避免该问题，但不适合大量名称或长名称，因为按钮将不固定大小。

# c#-2.0 - 未链接的 .cs 文件对应用程序性能的影响

> ID：10125156
> 
> 赞同：0
> 
> 时间：2012-04-12T14:02:48.897
> 
> 标签：c#-2.0

我有一个非常简单的问题。让我们假设有`C# project`name`Game`并且在这个项目中有两个`.cs`文件，`PacMan.cs`和`Snake.cs`. `Snake.cs`我复制了这两个文件并将它们粘贴到和所在的同一文件夹中`PacMan.cs`。如果我构建项目，文件夹中存在的未链接文件是否对应用程序有任何影响`performance`？我相信编译器会忽略未链接的文件并且不会对性能产生任何影响，但我不能 100% 确定。有人可以对此发表评论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:26:23.810

这些文件不包含在编译中，因此生成的程序不知道它们，因此不会影响性能。

# android - 冰淇淋三明治风格标签

> ID：10125164
> 
> 赞同：3
> 
> 时间：2012-04-12T14:03:03.453
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-tabs

有谁知道样式选项卡的教程**/示例**`Ice Cream Sandwich`（向左/向右滑动 - 就像在`YouTube`应用程序中一样）*不*适合向后兼容性支持库。只需要 API 级别 14 或 15。

我的项目只需要`Ice Cream Sandwich`在我的`Galaxy Nexus`. 所以我想知道这是如何在不需要向后兼容性的情况下完成的。

谢谢，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:10:42.597

Well, there's not really a reason to specifically avoid backwards compatibility, since if you don't want older devices using it, you can specify the minimum API version in the manifest for your app.

That said, the [`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html) is the way that Google does it, and it leverages `Fragments`, which while they are backwards compatible, are built into Android 4\.

If you don't care to use `Fragments` but just want to swipe from `View` to `View`, you can use a regular `PagerAdapter` with it instead of a `FragmentPagerAdapter`, or you could use a [`ViewFlow`](https://github.com/pakerfeldt/android-viewflow).

The example on the ViewFlow page is for support v4, but there are also some examples [here](http://developer.android.com/resources/samples/Support13Demos/src/com/example/android/supportv13/app/index.html) for API 13+ which may be closer to what you're looking for ([this one](http://developer.android.com/resources/samples/Support13Demos/src/com/example/android/supportv13/app/FragmentPagerSupport.html) in particular).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:46:00.150

我想你已经在你的 API 14+ 设备上实现了一个[带有“tabs+swipe”导航的 ActionBar 。](http://developer.android.com/design/patterns/actionbar.html#considerations-split-action-bars)整个东西可以适应蜂窝设备之前的设备，因为我只是碰巧自己做了一个演示。

最简单的方法是，基本上，你只需要：

*   尽可能扩展/导入**com.actionbarsherlock**类！
*   尽可能从**android.support.v4**（而不是通常的**android** ）包导入！

但是，在您执行这些操作之前，您必须首先：

*   知道如何使用[Android 支持库](http://developer.android.com/training/basics/fragments/support-lib.html)，貌似又名兼容库。
*   知道如何开始使用[ActionBarSherlock](http://actionbarsherlock.com/faq.html)。

例如（MainActivity.java）：

```
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.view.Menu;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;

public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {/*...*/} 
```

# machine-learning - 训练中的查询

> ID：10125167
> 
> 赞同：0
> 
> 时间：2012-04-12T14:03:16.197
> 
> 标签：machine-learning, libsvm

我在 matlab 中使用 libsvm 进行图像分类。training_label_vector 在“svmtrain”命令中的确切含义是什么。“svmpredict”中的 testing_label_vector 和 testing_instance_matrix 是什么。训练后如何使用结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:24:51.073

对于 SVM，每个示例都包含两部分：一个输入对象（通常是一个包含数据的向量）和一个期望的输出值或标签，以指定它属于哪个对象/类。训练标签向量基本上代表了向量所属的类。对于二分类，Training Label 的值为 1 或 -1。所以一些特征将被赋予一个标签，如 1 和一些 -1。这适用于测试标签向量。测试实例矩阵表示您尝试用来测试模型的数据。

训练后，模型将被输出，您必须使用测试矩阵和测试标签进行测试，以获得分类器的准确性。

要阅读有关 SVM 的更多信息，这是一个很好的链接：[http ://www.tristanfletcher.co.uk/SVM%20Explained.pdf](http://www.tristanfletcher.co.uk/SVM%20Explained.pdf)

# php - 黑客如何入侵网站？

> ID：10125170
> 
> 赞同：-1
> 
> 时间：2012-04-12T14:03:24.227
> 
> 标签：php

所以基本上，几天前我的一个网站客户来找我，告诉我他们的数据库和网站已被黑客入侵（黑客以某种方式从数据库中窃取了 md5 哈希密码），登录管理面板并更改了数据。好吧，是的，我在 1 年半前创建了该页面，所以当时我不知道有什么更好的方法`hash`或盐。无论如何，他们如何破解数据库？基本上，是否有任何保护措施，或者他们是否使用任何类型的 JavaScript 代码，我不应该允许加载，或者还有什么？

希望你能帮助我解决这个问题，这样我就可以创建更多受保护的网站。

这是该站点以前的登录代码。根据请求添加 -

```
 public function loginUser($username, $password) {
    if(isset($_POST['login'])) {
      if($username != '' && $password != '') {
        $sql = "SELECT * FROM `users` WHERE `username` = '".$username."' AND `password` = '".$password."'";
        $q = mysql_query($sql);
        $row = mysql_fetch_array($q);
        if(mysql_num_rows($q) > 0) {
          if($row['level'] == 'admin') {
            $_SESSION['user_level'] = 'admin';
          }
          else {
            $_SESSION['user_level'] = 'normal';
          }
          $_SESSION['logged_in'] = 1;
          header('location: account.php');
        } 
        else {
          header('location: error2.php');
          // Return to page and show error
        }
      }
      else {
        header('location: error1.php');
        // Show error, when people have empty fields entered
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:07:59.237

如果没有更多信息，不可能肯定地说，但最有可能的情况是您的应用程序容易受到[SQL 注入](http://bobby-tables.com/)的攻击，这使攻击者能够让网站显示数据库的内容。另一种可能性是[目录遍历攻击](http://en.wikipedia.org/wiki/Directory_traversal_attack)允许他们直接下载数据库文件。

由于 MD5 现在完全被破坏了（无论你是否使用盐对 MD5 来说都不再重要），剩下的就很简单了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:06:42.143

您应该阅读有关 SQL 注入的信息（也许这就是他们在您的数据库中获取信息的方式）。

然后你应该看看XSS。

你要做的第一件事就是验证每一个输入，一切！

对于 SQLi，您应该使用准备好的语句。

针对 XSS，您应该对所有内容进行编码！

但是，嘿，不用担心，你可以用谷歌搜索所有这些！

# liferay - liferay : 什么时候重写 GenericPortlet 的 doHelp 和 doEdit 方法？

> ID：10125173
> 
> 赞同：4
> 
> 时间：2012-04-12T14:03:26.380
> 
> 标签：liferay

我看到当我们扩展这个 GenericPortlet 类时，有 doHelp、doEdit、doView 和 processAction 之类的方法。

当我浏览互联网上的教程时，我发现使用 GenericPortlet 的人不会费心去重写 doEdit 和 doHelp 这两个方法。

请告诉我，我们需要在什么时候以及在什么场景下重写这两个方法（doEdit 和 doHelp），有没有网站允许用户有这些行为？？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T08:18:20.043

这 3 个方法是 Portlet API ( [JSR168](http://jcp.org/aboutJava/communityprocess/review/jsr168/index.html) ) 的一部分。

'doHelp' 方法被概念化以向用户显示有关如何使用 portlet 的有用信息，它是为 HELP 模式实现的 render 方法。

'doEdit' 方法被概念化用于portlet 配置以个性化portlet，即指定用户首选项，它是为EDIT 模式实现的render 方法。

在实际生产中，这个提议并不是真正的最佳方案，因此像 Liferay 这样的 portlet 容器已经为这些东西制定了自己的概念，并且不使用“doHelp”和“doEdit”方法。

有关 liferay 中使用的 portlet 配置，请参阅此[wiki](http://www.liferay.com/community/wiki/-/wiki/Main/How+to+Add+Configuration+Page+to+a+Plugin+Portlet)。

# wcf - 使用 RESTSharp (addFile) 上传图片

> ID：10125174
> 
> 赞同：4
> 
> 时间：2012-04-12T14:03:31.440
> 
> 标签：wcf, windows-phone-7, rest, azure, restsharp

我想在 Windows Azure 上托管的 Web 服务上从我的 Windows Phone 发送一张图片。为了与我的服务通信，我使用 RESTSharp，我看到有一个名为 addFile 的方法用于发送文件。

```
RestRequest request;
request = new RestRequest("/report/add", Method.POST);

request.AddFile("test", ConvertToBytes(e.ChosenPhoto), "testfile");
App.Client.ExecuteAsync(request, response =>
{
    RestResponse resource = response;
    if (response.StatusCode == HttpStatusCode.OK)
    {
        MessageBox.Show("Your report has been sent! Thank you for your participation!");
    }
}); 
```

但是，我不知道如何检索请求到达服务时发送的字节数组。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:54:20.803

你能展示你用来处理文件服务器端的代码吗？可能是你找错地方了。

或者，您可以尝试其他方式来添加文件：

```
request.AddBody(new { myFile = fileByteArray })) 
```

**注意：**在这两种情况下，文件都将加载到内存中。这可能是大文件的问题。

# java - 如何在 Tomcat 中定义应用程序特定的类路径？

> ID：10125175
> 
> 赞同：1
> 
> 时间：2012-04-12T14:03:35.750
> 
> 标签：java, tomcat, classpath

假设我们在“webapps”文件夹下有两个 Web 应用程序；“abc”和“xyz”。有没有办法为每个应用程序定义不同的类路径文件夹？在 Tomcat 中，类似“abc.classpath=Directory_A; xyz.classpath=Directory_B”的东西会更好。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:10:01.863

Your applications will all load the TOMCAT_HOME/lib contents. Other than that each of your webapps will load whatever's in their own WEB-INF/lib & WEB-INF/classes folders.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:30:14.017

我找到了一个方法...

我爆炸的 Web 应用程序的名称是“abc”。我创建了“$CATALINA_BASE/conf/Catalina/localhost/abc.xml”文件并定义了

```
<Context className="org.apache.catalina.core.StandardContext">
     <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
             virtualClasspath="/externalClasspath/*.jar"/>
</Context> 
```

关于这个问题有什么想法吗？因为它没有用。

# php - 声纳分析PHP项目的问题

> ID：10125176
> 
> 赞同：3
> 
> 时间：2012-04-12T14:03:35.957
> 
> 标签：php, phpunit, sonarqube

我想用声纳分析一个 PHP 项目。我安装了 PHP-Plugin 和 PHPunit，并创建了一个包含所有必要信息的 sonar-project.properties 文件。我使用 Java-runner 来执行。我已经为我的问题尝试了数百种可能的解决方案，但没有任何效果。我总是收到这个错误：

```
Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: org.sonar.api.utils.SonarException: Can't read PhpUnit report : /var/www/smc/.sonar/target/logs/phpunit.xml
        at org.sonar.runner.Runner.delegateExecution(Runner.java:189)
        at org.sonar.runner.Runner.execute(Runner.java:78)
        at org.sonar.runner.Main.main(Main.java:61)
Caused by: org.sonar.api.utils.SonarException: Can't read PhpUnit report : /var/www/smc/.sonar/target/logs/phpunit.xml
        at org.sonar.plugins.php.phpunit.PhpUnitResultParser.getTestSuites(PhpUnitResultParser.java:103)
        at org.sonar.plugins.php.phpunit.PhpUnitResultParser.parseFile(PhpUnitResultParser.java:158)
        at org.sonar.plugins.php.phpunit.PhpUnitResultParser.parse(PhpUnitResultParser.java:145)
        at org.sonar.plugins.php.phpunit.PhpUnitSensor.analyse(PhpUnitSensor.java:72)
        at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
        at org.sonar.batch.phases.Phases.execute(Phases.java:93)
        at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:143)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:115)
        at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:105)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:102)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.Batch.execute(Batch.java:104)
        at org.sonar.runner.Launcher.executeBatch(Launcher.java:65)
        at org.sonar.runner.Launcher.execute(Launcher.java:58)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.sonar.runner.Runner.delegateExecution(Runner.java:186)
        ... 2 more
Caused by: java.io.FileNotFoundException: /var/www/smc/.sonar/target/logs/phpunit.xml (No such file or directory)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at org.sonar.plugins.php.phpunit.PhpUnitResultParser.getTestSuites(PhpUnitResultParser.java:98)
        ... 22 more 
```

这是我的属性文件：

```
# required metadata
sonar.projectKey=my:project
sonar.projectName=Social Media Connector
sonar.projectVersion=1.0

# path to source directories (required)
sources=htdocs/website/controllers

# path to test source directories (optional)
#tests=htdocs/website/controllers/tests
#sonar.phpUnit.mainTestClass=htdocs/website/controllers/tests/website/controllers/blubbTest.php

# path to project binaries (optional), for example directory of Java bytecode
#binaries=binDir

# optional comma-separated list of paths to libraries. Only path to JAR file and path to directory of classes are supported.
#libraries=path/to/library.jar,path/to/classes/dir

# Uncomment those lines if some features of java 5 or java 6 like annotations, enum, ...
# are used in the source code to be analyzed
#sonar.java.source=1.5
#sonar.java.target=1.5

# Uncomment this line to analyses a project which is not a java project.
# The value of the property must be the key of the language.
sonar.language=php

# Advanced parameters
#my.property=value
#sonar.phpUnit.skip=true
sonar.phpUnit.analyze.test.directory=true 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:06:54.257

原来的错误在这里：

> 引起：java.io.FileNotFoundException：/var/www/smc/.sonar/target/logs/phpunit.xml（没有这样的文件或目录）

确保`/var/www/smc/.sonar/target/logs/phpunit.xml`正在找到该文件。

# html - 围绕表单元素的 Chrome 18 渲染工件

> ID：10125177
> 
> 赞同：3
> 
> 时间：2012-04-12T14:03:40.727
> 
> 标签：html, css, google-chrome, browser, rendering

在 OSX 10.7.3 上升级到 Chrome 18 后，我们开始注意到似乎与表单元素相关的稍纵即逝的渲染伪影：

![在此处输入图像描述](../Images/82492daf1891e2d244b1d62cd0233075.png)

他们似乎在滚动过程中来来去去。我一直在各种其他操作系统/浏览器环境中进行测试，但无法重现这一点，在以前的 Chrome 版本中也没有发生过这种情况。

这是一个成熟、稳定的 Web 应用程序，具有相当复杂的 HTML/CSS。我无法制作一个简单的测试小提琴来重现这一点。

还有人看到问题吗？你能想到一个可能的 HTML/CSS 原因而不是 Chrome 错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:27:48.987

我还注意到 Chrome 18 在某些页面中显示伪影，但这仅在该页面经过 GPU 加速时才会发生。前几天我问了一个类似的问题：

[GPU 加速使网站崩溃](https://stackoverflow.com/questions/9999418/gpu-acceleration-crashes-website)

Chrome 在检测到 CSS 中的 3D 变换时会启用硬件加速。

您可以转到[chrome://flags](http://chrome://flags)并启用“合成渲染层边框”选项，如果您在页面周围看到绿色方块，那是因为某些 CSS 规则导致您的页面被硬件加速。您可以尝试删除任何 3D CSS 规则或为这些元素分配更高的 z-index。它通常会有所帮助。

# scala - Scala ArrayBuffer 中的扩展函数缺少参数类型

> ID：10125183
> 
> 赞同：9
> 
> 时间：2012-04-12T14:03:51.780
> 
> 标签：scala, sorting, types, parameters

在尝试从[Scala 为不耐烦的](https://rads.stackoverflow.com/amzn/click/com/0321774094)人运行以下代码段时：

```
val b = ArrayBuffer(1,7,2,9)
val bSorted = b.sorted(_ < _) 
```

我收到以下错误：

```
 error: missing parameter type for expanded function ((x$1, x$2) => x$1.$less(x$2))
       val bSorted = b.sorted(_ < _) 
```

有人可以解释这里可能发生的事情。不应该从 ArrayBuffer 的内容中推断出参数类型，还是我需要明确指定它？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T14:13:07.543

`.sorted`接受类型的隐式参数`Ordering`（类似于 Java `Comparator`）。对于整数，编译器将为您提供正确的实例：

```
scala> b.sorted
res0: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 2, 7, 9) 
```

如果要传递比较函数，请使用`sortWith`：

```
scala> b.sortWith( _ < _ )
res2: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 2, 7, 9)

scala> b.sortWith( _ > _ )
res3: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(9, 7, 2, 1) 
```

但是，请注意，虽然`ArrayBuffer`是可变的，但两种排序方法都会返回一个已排序的副本，但不会触及原始的。

# javascript - 如何解析字符串

> ID：10125184
> 
> 赞同：0
> 
> 时间：2012-04-12T14:03:52.360
> 
> 标签：javascript, string, replace

我试图解析以下字符串；

```
"data[Product][0][fieldname]" 
```

我需要能够将“[0]”部分更改为数字，“data[Product]”不会更改，而“[fieldname]”会更改。

我不知道如何用 javascript 来做，但有一个粗略的想法。

我所拥有的所有错误都在下面，但由于 [0] 每次它不起作用时都会发生变化；

```
name="data[Product][0][fieldname]";
name.replace('[0]', '['+newrowid+']' 
```

小提琴； [http://jsfiddle.net/fuzzy_dunlop/8WKcs/](http://jsfiddle.net/fuzzy_dunlop/8WKcs/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:12:49.677

使用正则表达式：

```
var a = "data[Product][0][fieldname]";
var re = /(.*\[.*\]\[)(.*)(\]\[.*\])/gi;  

newstr = a.replace(re, "$1" + "YourString" + "$3");  
document.write("Now: " + newstr); 
```

示例代码：http: [//jsfiddle.net/NKbd9/1/](http://jsfiddle.net/NKbd9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:10:32.760

改用这个

```
name = name.replace('[0]', '['+newrowid+']'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:13:25.547

Replace 可以采用正则表达式而不是字符串。

试试这个：

```
name="data[Product][0][fieldname]";
name.replace(/\[\d\]/, '['+newrowid+']'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:10:10.543

我假设您正在尝试在循环中执行此操作，在这种情况下，您只需使其动态化。也不是替换不会更改当前字符串，它会返回一个新字符串，因此您需要将返回的值分配回名称。

```
 var i = 0, 
        len = 10,
        name,
        newrowid = 13;
for(; i <len; i++) {
    name = "data[Product]["+i+"][fieldname]";
    name = name.replace('['+i+']', '['+newrowid+']');
} 
```

# google-maps-api-3 - 谷歌地图自动完成：只输出地址，没有国家和城市

> ID：10125189
> 
> 赞同：8
> 
> 时间：2012-04-12T14:04:20.157
> 
> 标签：google-maps-api-3

我使用[Places 库](https://developers.google.com/maps/documentation/javascript/places "地方图书馆")来自动完成地址输入。搜索仅限于一个城市，我得到这样的输出：

"Rossiya, Moskva, Leninskiy prospekt 28"

如何隐藏“Rossiya，Moskva”？...

我的查询：

```
function() {
        // Search bounds
        var p1 = new google.maps.LatLng(54.686534, 35.463867);
        var p2 = new google.maps.LatLng(56.926993, 39.506836);
        self.options = {
            bounds : new google.maps.LatLngBounds(p1, p2),
            componentRestrictions: {country: 'ru'},
        };

        var elements = document.querySelectorAll('.address');

        for ( var i = 0; i < elements.length; i++) {
            var autocomplete = new google.maps.places.Autocomplete(elements[i],
                    self.options);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T20:22:19.280

您可以，但您必须在两个地方替换输入字段的值。例子：

```
var autocomplete = new google.maps.places.Autocomplete(input, placesOptions);
var input = document.getElementById('searchTextField'); 
```

在“place_changed”事件中，您执行以下操作：

```
placeResult = autocomplete.getPlace();
//This will get only the address
input.value = placeResult.name; 
```

这会将 searchtextfield 中的值更改为街道。

第二个地方有点棘手：

```
input.addEventListener('blur', function(){
// timeoutfunction allows to force the autocomplete field to only display the street name.
if(placeResult){ setTimeout(function(){ input.value = placeResult.name; }, 1); } 
```

我们必须这样做的原因是，如果您只为模糊添加事件侦听器，谷歌地方将使用完整地址填充输入文件，因此您必须“等待”谷歌更新，然后通过等待强制更改几毫秒。

在没有 setTimeout 函数的情况下尝试它，你会明白我的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:57:51.107

**编辑**

你不能。我有相反的看法，你只是在寻找一个城市。没有办法只从地址组件中打印出街道名称（我假设那是街道名称）。

* * *

**与所问内容相反**

[从文档：](https://developers.google.com/maps/documentation/javascript/places#adding_autocomplete)

> (cities) 类型集合指示 Place 服务返回与`locality`或匹配的结果`administrative_area3`。

```
var input = document.getElementById('searchTextField');
var options = {
  bounds: defaultBounds,
  types: ['(cities)']
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:50:11.690

结果你有哈希，你可以从中得到你想要的部分：

```
 google.maps.event.addListener(autocomplete, 'place_changed', function() {
          var place = autocomplete.getPlace(); 
```

现在从“地方”你可以得到它

```
place.geometry.location.lat() 
```

和地址

```
place.address_components[0] or place.address_components[1] ... 
```

取决于你想得到什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T14:59:23.387

我有一个非常相似的问题，确实可以解决。这在 Angular 2 项目中，但它也应该适用于其他地方。我过滤了机构的结果，并且只想显示名称并隐藏结果的地址部分。这对我有用，一旦你选择了一个建议就会执行一个函数：

```
 getAddress(place: Object) {
    this.zone.run(() => {
        this.establishment = place['name'];
    }); 
```

其中`zone`是在构造函数中注入的 NgZone 组件，并且`this.establishment`是绑定到`[(NgModel)]`输入字段中的变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-30T04:33:01.167

在 place_changed 里面设置了一个超时函数：

```
var streetString = place.address_components[0] or place.address_components[1];

window.setTimeout(function() {
  $('input').val(streetString);
}, 200); 
```

这个解决方案对我有用。

# null - Silverlight 5 DatePicker（或任何其他日期控件）允许空白/空/空值

> ID：10125193
> 
> 赞同：0
> 
> 时间：2012-04-12T14:04:26.930
> 
> 标签：null, datepicker

有没有办法可以将 datepicker 值设置为 Empty/Null/blank （它通常默认为 Mindate 即 01/01/0001）

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:29:15.850

XAML：

**转换器：DateTime 到 null 转换器**

```
 public class DateTimeToNullConverter : IValueConverter

{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if(System.Convert.ToDateTime(value).ToLongTimeString() != "12:00:00 AM")
        {
            return null;
        }
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null || value.ToString() == "")
        {
            return DateTime.Now;
        }
        return value;
    }
}
} 
```

在日期选择器的 Text、SelectedDate 和 Display Date 属性中使用此转换器，然后在视图模型中处理 lostfocus 中继命令以进行更多验证

```
private void FromDateLostFocusCommandExecuted(EventArgs args)
    {
        //ClearValidationErrors();

        string inputDate =
            ((System.Windows.Controls.Primitives.DatePickerTextBox)
             (((System.Windows.RoutedEventArgs)(args)).OriginalSource)).Text;

        if (inputDate != "")
        {
            if (!IsValidDate(inputDate))
            {
                ObservableCollection<string> errors = GetErrorsCollection("FromDate");
                errors.Add("Please enter a valid From Date (M/d/yyyy)");
                RaiseErrorsChanged("FromDate");

                if (!validationErrors.Contains("FromDate"))
                {
                    validationErrors.Add("FromDate");
                }
            }
            else
            {
                ClearValidationErrors("FromDate");
                if (validationErrors.Contains("FromDate"))
                {
                    validationErrors.Remove("FromDate");
                }
            }
        }
        else
        {
            ClearValidationErrors("FromDate");
            if (validationErrors.Contains("FromDate"))
            {
                validationErrors.Remove("FromDate");
            }
        }
    } 
```

# c# - AutoFixture - 配置夹具以限制字符串生成长度

> ID：10125199
> 
> 赞同：51
> 
> 时间：2012-04-12T14:04:47.650
> 
> 标签：c#, autofixture

当对某种类型使用 AutoFixture 的 Build 方法时，如何限制生成的字符串的长度以填充该对象的字符串属性/字段？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-12T19:12:08.133

使用该`Build`方法本身，没有那么多选项，但您可以执行以下操作：

```
var constrainedText = 
    fixture.Create<string>().Substring(0, 10);
var mc = fixture
    .Build<MyClass>()
    .With(x => x.SomeText, constrainedText)
    .Create(); 
```

但是，就个人而言，我看不出这有什么更好或更容易理解的：

```
var mc = fixture
    .Build<MyClass>()
    .Without(x => x.SomeText)
    .Create();
mc.SomeText =
    fixture.Create<string>().Substring(0, 10); 
```

就个人而言，我*很少*使用这种`Build`方法，因为我更喜欢基于约定的方法。这样做，至少有三种方法可以限制字符串长度。

第一个选项只是限制所有字符串*的基数*：

```
fixture.Customizations.Add(
    new StringGenerator(() =>
        Guid.NewGuid().ToString().Substring(0, 10)));
var mc = fixture.Create<MyClass>(); 
```

上述自定义将所有生成的字符串截断为 10 个字符。但是，由于默认属性分配算法会将属性名称添加到字符串前面，因此最终结果将`mc.SomeText`具有类似“SomeText3c12f144-5”的值，因此大多数情况下这可能不是您想要的。

`[StringLength]`正如 Nikos 指出的那样，另一种选择是使用该属性：

```
public class MyClass
{
    [StringLength(10)]
    public string SomeText { get; set; }
} 
```

这意味着您可以只创建一个实例而无需明确说明属性的长度：

```
var mc = fixture.Create<MyClass>(); 
```

我能想到的第三个选项是我最喜欢的。这增加了一个专门针对的约定，即每当要求夹具为名称为“SomeText”且类型为字符串的属性创建值时，生成的字符串应该正好是 10 个字符长：

```
public class SomeTextBuilder : ISpecimenBuilder
{
    public object Create(object request, ISpecimenContext context)
    {
        var pi = request as PropertyInfo;
        if (pi != null && 
            pi.Name == "SomeText" &&
            pi.PropertyType == typeof(string))

            return context.Resolve(typeof(string))
                .ToString().Substring(0, 10);

        return new NoSpecimen();
    }
} 
```

用法：

```
fixture.Customizations.Add(new SomeTextBuilder());
var mc = fixture.Create<MyClass>(); 
```

这种方法的美妙之处在于它让 SUT 不受影响，并且仍然不会影响任何其他字符串值。

* * *

您可以将其推广`SpecimenBuilder`到任何类别和长度，如下所示：

```
public class StringPropertyTruncateSpecimenBuilder<TEntity> : ISpecimenBuilder
{
    private readonly int _length;
    private readonly PropertyInfo _prop;

    public StringPropertyTruncateSpecimenBuilder(Expression<Func<TEntity, string>> getter, int length)
    {
        _length = length;
        _prop = (PropertyInfo)((MemberExpression)getter.Body).Member;
    }

    public object Create(object request, ISpecimenContext context)
    {
        var pi = request as PropertyInfo;

        return pi != null && AreEquivalent(pi, _prop)
            ? context.Create<string>().Substring(0, _length)
            : (object) new NoSpecimen(request);
    }

    private bool AreEquivalent(PropertyInfo a, PropertyInfo b)
    {
        return a.DeclaringType == b.DeclaringType
               && a.Name == b.Name;
    }
} 
```

用法：

```
fixture.Customizations.Add(
    new StringPropertyTruncateSpecimenBuilder<Person>(p => p.Initials, 5)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-12T18:37:25.207

如果最大长度是一个约束并且您拥有该类型的源代码，则可以使用[StringLengthAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute%28v=vs.90%29.aspx)类来指定允许的最大字符长度。

从 2.6.0 版本开始，AutoFixture 支持 DataAnnotations，它会自动生成一个指定最大长度的字符串。

举个例子，

```
public class StringLengthValidatedType
{
    public const int MaximumLength = 3;

    [StringLength(MaximumLength)]
    public string Property { get; set; }
}

[Fact]
public void CreateAnonymousWithStringLengthValidatedTypeReturnsCorrectResult()
{
    // Fixture setup
    var fixture = new Fixture();
    // Exercise system
    var result = fixture.CreateAnonymous<StringLengthValidatedType>();
    // Verify outcome
    Assert.True(result.Property.Length <= StringLengthValidatedType.MaximumLength);
    // Teardown
} 
```

上面的测试在使用 Build 时也会通过（自定义单个对象的创建算法）：

```
var result = fixture.Build<StringLengthValidatedType>().CreateAnonymous(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-20T17:05:03.407

这是一个样本生成器，它可以生成任意长度的随机字符串——甚至比默认情况下的 Guid+PropertyName 字符串还要长。此外，您可以选择要使用的字符子集，甚至可以传入您自己的随机字符（以便您可以根据需要控制种子）

```
public class RandomStringOfLengthRequest
{
    public RandomStringOfLengthRequest(int length) : this(length, "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890 !?,.-")
    {
    }

    public RandomStringOfLengthRequest(int length, string charactersToUse): this(length, charactersToUse, new Random())
    {
    }

    public RandomStringOfLengthRequest(int length, string charactersToUse, Random random)
    {
        Length = length;
        Random = random;
        CharactersToUse = charactersToUse;
    }

    public int Length { get; private set; }
    public Random Random { get; private set; }
    public string CharactersToUse { get; private set; }

    public string GetRandomChar()
    {
        return CharactersToUse[Random.Next(CharactersToUse.Length)].ToString();
    }
}

public class RandomStringOfLengthGenerator : ISpecimenBuilder
{
    public object Create(object request, ISpecimenContext context)
    {
        if (request == null)
            return new NoSpecimen();

        var stringOfLengthRequest = request as RandomStringOfLengthRequest;
        if (stringOfLengthRequest == null)
            return new NoSpecimen();

        var sb = new StringBuilder();
        for (var i = 0; i < stringOfLengthRequest.Length; i++)
            sb.Append(stringOfLengthRequest.GetRandomChar());

        return sb.ToString();
    }
} 
```

然后，您可以使用它来填充对象的属性，如下所示：

```
 var input = _fixture.Build<HasAccountNumber>()
                            .With(x => x.AccountNumber,
                                  new SpecimenContext(new RandomStringOfLengthGenerator())
                                      .Resolve(new RandomStringOfLengthRequest(50)))
                            .Create(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-03-16T08:30:04.950

这是我的解决方案。当字符串包含的内容无关紧要时，我正在使用这种方法：

```
public static string GetStringOfLength(this IFixture fixture, int length)
    {
        return string.Join("", fixture.CreateMany<char>(length));
    } 
```

它很短，对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-29T23:06:59.280

我在我的项目中添加了一个自定义字符串生成器。它附加一个 4 位数字而不是 guid。

```
 public class StringBuilder : ISpecimenBuilder
    {
        private readonly Random rnd = new Random();

        public object Create(object request, ISpecimenContext context)
        {
            var type = request as Type;

            if (type == null || type != typeof(string))
            {
                return new NoSpecimen();
            }

            return rnd.Next(0,10000).ToString();
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-31T21:19:00.827

其他一些解决方案非常好，但是如果您在基于数据模型的测试夹具中生成对象，您会遇到其他问题。首先，StringLength 属性对于代码优先数据模型来说不是一个很好的选择，因为它添加了看似重复的注释。为什么需要 StringLength 和 MaxLength 并不明显。手动保持它们同步是相当多余的。

我倾向于自定义 Fixture 的工作方式。

1) 您可以为一个类自定义夹具，并指定在创建该属性时，根据需要截断字符串。因此，要将 MyClass 中的 FieldThatNeedsTruncation 截断为 10 个字符，您可以使用以下命令：

```
fixture.Customize<MyClass>(c => c
  .With(x => x.FieldThatNeedsTruncation, Fixture.Create<string>().Substring(0,10)); 
```

2）第一个解决方案的问题是您仍然需要保持长度同步，只是现在您可能在两个完全不同的类中而不是在两行连续的数据注释中这样做。

我想出的从任意数据模型生成数据而无需在您声明的每个自定义项中手动设置的第二个选项是使用直接评估 MaxLengthAttribute 的自定义 ISpecimenBuilder。这是我从库本身修改的类的源代码，它正在评估 StringLengthAttribute。

```
/// <summary>
/// Examine the attributes of the current property for the existence of the MaxLengthAttribute.
/// If set, use the value of the attribute to truncate the string to not exceed that length.
/// </summary>
public class MaxLengthAttributeRelay : ISpecimenBuilder
{
    /// <summary>
    /// Creates a new specimen based on a specified maximum length of characters that are allowed.
    /// </summary>
    /// <param name="request">The request that describes what to create.</param>
    /// <param name="context">A container that can be used to create other specimens.</param>
    /// <returns>
    /// A specimen created from a <see cref="MaxLengthAttribute"/> encapsulating the operand
    /// type and the maximum of the requested number, if possible; otherwise,
    /// a <see cref="NoSpecimen"/> instance.
    ///  Source: https://github.com/AutoFixture/AutoFixture/blob/ab829640ed8e02776e4f4730d0e72ab3cc382339/Src/AutoFixture/DataAnnotations/StringLengthAttributeRelay.cs
    /// This code is heavily based on the above code from the source library that was originally intended
    /// to recognized the StringLengthAttribute and has been modified to examine the MaxLengthAttribute instead.
    /// </returns>
    public object Create(object request, ISpecimenContext context)
    {
        if (request == null)
            return new NoSpecimen();

        if (context == null)
            throw new ArgumentNullException(nameof(context));

        var customAttributeProvider = request as ICustomAttributeProvider;
        if (customAttributeProvider == null)
            return new NoSpecimen();

        var maxLengthAttribute = customAttributeProvider.GetCustomAttributes(typeof(MaxLengthAttribute), inherit: true).Cast<MaxLengthAttribute>().SingleOrDefault();
        if (maxLengthAttribute == null)
            return new NoSpecimen();

        return context.Resolve(new ConstrainedStringRequest(maxLengthAttribute.Length));
    }
} 
```

然后只需将其添加为自定义项，如下所示：

```
fixture.Customizations.Add(new MaxLengthAttributeRelay()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-06T13:08:26.460

**注意：这个解决方案并没有真正使用 AutoFixture，但有时使用包比自己编程更难。**

为什么在使用 AF 更难更丑的情况下使用 AF，我的首选用法是：

```
var fixture = new Fixture();
fixture.Create<string>(length: 9); 
```

所以我创建了一个扩展方法：

```
public static class FixtureExtensions
{
    public static T Create<T>(this IFixture fixture, int length) where T : IConvertible, IComparable, IEquatable<T>
    {
        if (typeof(T) == typeof(string))
        {
            // there are some length flaws here, but you get the point.
            var value = fixture.Create<string>();

            if (value.Length < length)
                throw new ArgumentOutOfRangeException(nameof(length));

            var truncatedValue = value.Substring(0, length);
            return (T)Convert.ChangeType(truncatedValue, typeof(T));
        }

        // implement other types here

        throw new NotSupportedException("Only supported for strings (for now)");
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-27T20:56:39.083

这是我的解决方案和注释。

首先，很明显 AutoFixture.Create 中存在一些紧密耦合，以了解如何构建和定制样本。对于字符串，这很烦人，因为我们知道默认值是 Guid。使用这些知识，我创建了一个 Func 来在我的测试用例中处理这个问题：

```
private readonly Func<IFixture, int, string> _createString = (IFixture fixture, int length) => (fixture.Create<string>() + fixture.Create<string>()).Substring(0, length); 
```

这可以归纳定义为利用 Auto-Fixture 默认生成的 guid。默认为 36 个字符，因此：

```
private readonly Func<IFixture, int, string> _createString = (IFixture fixture, int length) =>
        {
            if (length < 0) throw new ArgumentOutOfRangeException(nameof(length));
            var sb = new StringBuilder();
            const int autoFixtureStringLength = 36;
            var i = length;
            do
            {
                sb.Append(fixture.Create<string>());
                i -= autoFixtureStringLength;
            } while (i > autoFixtureStringLength && i % autoFixtureStringLength > 0);
            sb.Append(fixture.Create<string>());
            return (sb).ToString().Substring(0, length);
        }; 
```

同样，此解决方案的整个前提是 AutoFixture 已经与您拥有的任何对象创建策略紧密耦合。你正在做的就是在这方面相互配合。

如果 AutoFixture 公开“最小值”和“最大值”扩展点以进行查询，这可能是理想的。这就是像 QuickCheck 这样的功能测试框架所做的，然后让你“缩小”价值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-02T13:49:07.190

您可以使用`StringLength`属性：

```
public class MyData 
{
    [System.ComponentModel.DataAnnotations.StringLength(42)]
    public string Description { get; set; }
} 
```

然后像往常一样使用fixture

```
var fixture = new Fixture();
var mockData = fixture.Create<MyData>(); 
```

# qt - 在 QT 应用程序中集成广告

> ID：10125202
> 
> 赞同：1
> 
> 时间：2012-04-12T14:04:53.937
> 
> 标签：qt, ads, adsense

我已经编写了一个小应用程序，我计划在其中集成广告（例如 adsense）。

一种方法是有一个 QWebView 项目，它将在应用程序窗口中显示广告。
你能建议另一种方式吗？我必须拥有一个网站才能做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:25:28.063

> 你能建议另一种方式吗？

这是唯一的方法。

> 我必须拥有一个网站才能做到这一点吗？

不，只是在 QWebView 中显示 adsense 代码。

# java - 按一定顺序获取 JSoup 元素

> ID：10125206
> 
> 赞同：0
> 
> 时间：2012-04-12T14:05:04.180
> 
> 标签：java, jsoup

在一个`<div>`元素中，我有三种类型的元素（其中包括）：

*   `<span class="some_name_1">`
*   `<div class="some_name_2">`
*   `<p>`

问题是我不知道它们的数量和顺序。所以我需要将上面显示的所有这些元素放在某种数组中，这样我就可以遍历它们。

我对 JSoup 很陌生 - 我怎么能做到这一点？顺序对我来说至关重要。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:01:24.997

嗯，你需要迭代元素吗？这很简单。

```
Document doc = Jsoup.connect(url).get();
         Element div = doc.select("div").first(); //here you get your parent div
         for (Element element : div.children()) {
            //Here you can acccess all childs of your div
        } 
```

# c# - 使用 winform 或应用程序在客户端打印

> ID：10125209
> 
> 赞同：4
> 
> 时间：2012-04-12T14:05:22.393
> 
> 标签：c#, asp.net, winforms, wcf

我已经开发了 ASP.NET 程序。问题是：我想在客户端选择打印机并打印。

我知道这几乎是不可能的，也许使用 ActiveX，但我对 ActiveX 了解不多，它只在 IE 下工作。

所以我创建了一个解决方法。我创建了一个在 PC 客户端上运行的 Winfrom，并通过 WCF 连接到我的 ASP.NET。

到目前为止工作正常，但这个过程对客户来说变得很烦人。因为他必须在 ASP.NET 上工作才能保存项目并运行 Winform 并单击它以从 ASP.NET 检索项目并打印它。

现在我使用 PULL 方法，这意味着我的 Winform 从 ASP.NET 拉取数据。我想知道我是否可以使用 PUSH 方法，这意味着 ASP.NET 将数据推送到 Winform 并且客户端只需单击 ASP.NET 上的一个按钮。或者我怎样才能让我的 winform 总是监听 ASP.NET？

顺便说一句，我想简化客户端，所以他只点击一个按钮而不是两个。

提前谢谢你，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:16:06.720

如我所见，您可以：

1.  将您的 WinForms 应用程序重新制作为托管在客户端上运行的 Windows 服务中的 WCF 服务。这将使您的 ASP.NET 页面能够调用 WCF 服务并告诉它进行打印。
2.  将 Web 浏览器控件添加到您的 WinForms 应用程序，并在单个应用程序中完成所有操作。
3.  在 ASP.NET 服务器端生成您要打印的信息，例如 PDF，然后让用户正常打印。类似于@AdamKing。

# c++ - 如何使用非 stl 类型（例如 ICU 的 UnicodeString）创建 unordered_map？

> ID：10125211
> 
> 赞同：4
> 
> 时间：2012-04-12T14:05:27.233
> 
> 标签：c++, stl, c++11, icu, unordered-map

我希望能够做到这一点：

```
std::unordered_map<icu::UnicodeString, icu::UnicodeString> mymap; 
```

但是，当我这样做（并且开始使用它）时，我遇到了“无法将 size_t 转换为 UnicodeString”错误。所以我环顾四周并[阅读了 unordered containers](http://marknelson.us/2011/09/03/hash-functions-for-c-unordered-containers/)。这篇博文指出我需要提供 的专业化`std::hash<icu::UnicodeString>`，所以我确实做到了：

```
namespace std
{
    template<>
    class hash<icu::UnicodeString> {
    public:
        size_t operator()(const icu::UnicodeString &s) const 
        {
            return (size_t) s.hashCode();
        }
    };
}; 
```

不完美，但满足要求。但是，现在我收到的错误源于：

```
error C2039: 'difference_type' : is not a member of 'icu_48::UnicodeString' 
```

博客文章本身暗示我需要做更多的事情；但是，它并没有告诉我应*该做什么*，以这些评论结尾：

> 除了需要哈希函数之外，无序容器还需要能够测试两个键是否相等。他们执行此操作的规范方法是使用在全局命名空间中定义的 operator==() 版本。这通常是您在创建新类时习惯于构建的一个函数，但如果您忽略它，您将遇到本文前面看到的同样大量难以理解的编译器错误。
> 
> 我不必在本文中处理它，因为标准库已经为 std::pair 定义了这个运算符。当然，在使用 std::pair 时，您还必须确保您有 T1 和 T2 的相等运算符。

所以，现在我有点困惑，因为[`operator==`是为 UnicodeString 定义的](http://icu-project.org/apiref/icu4c/classUnicodeString.html#a0dca5ffc55b3f73e9b7382749cffcc76)。

因此，使用 C++11、MSVC 和 GCC。还使用 Qt 依赖项进行编译。然后，我的问题是，我还需要做什么才能将`icu::UnicodeString`类型添加到无序映射？

根据要求，我稍后会尝试迭代地图。地图本身是一个类的一部分，称为`this->mymap`：

```
std::unordered_map<icu::UnicodeString, icu::UnicodeString>::const_iterator it;
for ( it = this->mymap.begin(); it != this->mymap.end(); ++it )
{
    // access it->first, it->second etc...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:56:19.687

正如 OP 发现的那样，

> 有人留下了一个不错`mymap->insert(key, value)`的错错错错

由于无序映射具有 2 参数插入方法，

```
template <class P>
iterator insert(const_iterator hint, P&& obj); 
```

编译器将尝试匹配`key`as a `const_iterator`，这可能`difference_type`是请求类型成员的原因（它是迭代器的成员）。

插入条目的正确方法是插入一对，

```
mymap.insert(std::make_pair(key, value)); 
```

或者只是使用“emplace”方法，

```
mymap.emplace(key, value); 
```

# asp.net - ASP.NET 会话在 2:30 后过期

> ID：10125212
> 
> 赞同：0
> 
> 时间：2012-04-12T14:05:28.733
> 
> 标签：asp.net, .net, windows-7, iis-7, timeout

我已经解决了好几天了。代码是外部的。我们正在将它安装在我们的系统上。

## 操作系统：Windows 7

问题：第一次访问该站点时，编译大约需要2分30秒，然后抛出错误“您的会话已超时”。有趣的是，它加载了网页的一部分，即页眉部分。

## 其他问题：

当我在 Visual Studio 中编译这段代码时，它不会编译（我认为它应该编译）。我收到这些错误

```
Error   1   Could not load file or assembly 'Microsoft.Web.UI.WebControls, Version=1.0.2.226, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.  C:\Users\--\Documents\HDWeb\CoreTabStrip.ascx   1    

Error   2   Could not load type 'Excelergy.Web.HD.cEditServicePeriodTab'.   C:\Users\--\Documents\HDWeb\EditServicePeriodTab.aspx   2 
```

## 可能的解决方案

1.  我查看了[这个解决方案](http://brianseekford.com/index.php/2009/11/23/asp-net-state-server-wont-start-on-windows-7-64-bit-file-is-missing/)，它说注册表中的 aspnet_state.exe 路径可能是错误的，这可能是问题所在。事实证明这是真的。我的 .net2.xxxx 框架中缺少此文件，所以我添加了它，但问题没有解决。

2.  我尝试下载[iWebControls.msi](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=13807)以解决上述编译错误。原来该文件与 Window 7 不兼容并且不会安装。

3.  我试图跟踪代码，但我当然不能，因为代码一开始就没有编译。

## 真正的问题

有谁知道我该如何解决这个问题？我已经研究了 IIS，应用程序池。更改不同的设置，但它只是一直超时。可能是什么问题。

可能只是 Windows 7 特定问题（Windows 7 + .net 2.xxxx）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:12:55.343

可能是在 2:30 运行 Recycle 的应用程序池

右键单击应用程序池>>属性>回收选项卡->“在以下时间回收工作进程”取消选中此选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:23:17.567

就设置而言，其他答案应涵盖有关会话的所有内容-我认为唯一缺少的项目是让您检查 web.config 中的会话超时值是什么-当然还有不一致之处-重新：如果它**不是**inproc，那么它要么是状态服务器要么是 sql（所以当然你必须有任何一个会话才能工作）。

唯一需要检查的地方是源代码（不是设置）。检查任何 Session.Abandon 命令或类似命令的代码（重新：设置、删除会话等）。它可能根本与设置没有任何关系，并且在代码中的某个地方（其他）被控制。

您已经可以看到异常加载时间（初始或非初始）的问题，因此这是挖掘代码的标志......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:13:51.177

问题很可能是您正在使用`in-proc session state`（默认）。

这可能会帮助你。[http://msdn.microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)和这个[http://technet.microsoft.com/en-us/library/cc725820%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc725820%28WS.10%29.aspx)

# php - PhpStorm + Xdebug = 页面未加载

> ID：10125216
> 
> 赞同：17
> 
> 时间：2012-04-12T14:06:02.283
> 
> 标签：php, xdebug, phpstorm

首先，有一些 xdebug 信息：

```
Xdebug installed: 2.2.0rc1
Server API: Apache 2.4 Handler Apache Lounge
Windows: yes - Compiler: MS VC9 - Architecture: x86
Zend Server: no
PHP Version: 5.4.0
Zend API nr: 220100525
PHP API nr: 20100525
Debug Build: no
Thread Safe Build: yes
Configuration File Path: C:\Windows
Configuration File: C:\Uniserver\UniServer\usr\local\php\php.ini
Extensions directory: C:\Uniserver\UniServer\usr\local\php\extensions

You're already running the latest Xdebug version 
```

一切看起来都很好。这就是我的 php.ini 的样子：

```
[Xdebug]
zend_extension=C:\Uniserver\UniServer\usr\local\php\extensions\php_xdebug-2.2.0RC1-5.4-vc9.dll
xdebug.remote_host=localhost
xdebug.remote_port=9123
xdebug.idekey=PHPSTORM
xdebug.remote_mode=req
xdebug.remote_handler=dbgp
xdebug.remote_enable=1
xdebug.remote_connect_back=0
xdebug.remote_autostart=0
xdebug.remote_log="C:\Uniserver\UniServer\usr\local\php\extensions\tmp\log.log"
xdebug.overload_var_dump=1
xdebug.trace_format=0
xdebug.show_exception_trace=0
xdebug.default_enable=0 
```

现在，我将尝试使用 PhpStorm 进行调试。首先，我转到 Settings->PHP->Servers 并添加以下内容：

```
Name: localhost
Host: localhost
Port: 8080
Debugger: Xdebug 
```

（是的，我的网站在端口 8080 上运行，否则我会与我正在使用的其他软件发生冲突。）然后我创建一个新的运行/调试配置：

```
PHP Remote Debug
Name: local
Servers: localhost
Ide key(session id): PHPSTORM 
```

我还使用此工具创建了一个启动/停止调试书签：http: [//www.jetbrains.com/phpstorm/marklets/index.html](http://www.jetbrains.com/phpstorm/marklets/index.html)

好的，一切看起来都准备好了，所以我点击了 PhpStorm 中的 Debug 按钮。

我的项目主页位于[http://localhost:8080/Project/page/Home.php](http://localhost:8080/Project/page/Home.php)，所以我在那里导航。页面加载。我点击书签栏中的开始按钮，重新加载，页面保持空白......

当我在项目中的 home.php 文件上添加断点并再次重新加载时，断点被击中！我可以跨步，跨步进入，...显示所有值..这没有任何问题。但是当我检查所有的断点，或者点击恢复程序，并返回浏览器时，页面是完全空白的。HTML 代码如下所示：

```
<html><head><style type="text/css"></style></head><body></body></html> 
```

到底是怎么回事？为什么我正在调试的页面没有被呈现？单步执行代码，所有的 php 和 html 都在执行，但最终在我的浏览器中没有显示任何内容。我计划在位于 /Project/class/Account.php 文件中的函数上使用 Xdebugger，但如果不按主页上的按钮，我就无法到达那里。

为什么不使用你说的 Xdebug 代理？那能解决什么吗？好吧，每当我尝试设置一个时，我都会收到此错误：

Xdebug 代理：无法连接到 'localhost:9123' 上的 xdebug 代理

即使我的 Xdebug 代理配置是正确的：

```
IDE key: PHPSTORM
Host: localhost
Port: 9123 
```

谁能告诉我发生了什么事？我真的需要这个调试器，因为某些功能由于某种原因无法正常工作，这让我发疯了。我需要检查正在传递哪些变量以及它们发生了什么。

**编辑**

额外信息：当我完成所有代码时，我的调试器会说：

```
Waiting for incoming connection with ide key 'PHPSTORM' 
```

这可能是我的页面无法加载的原因吗？

**编辑编辑**

好的，不用点击调试按钮，我也可以开始收听 PHP 调试连接。这也有效！我的断点被击中，我可以进入......但同样的问题仍然存在：我的网页保持空白，我的调试器最后说“断开连接”。该问题在任何浏览器中都存在。

**编辑 编辑 编辑**

我在调试时发现了一些非常奇怪的东西......我可以很好地进入我的代码，直到我点击获取我的数据库实例的函数。数据库类如下所示：

```
class Database
{
    private static $instance = null;
    private static $conn;

    private function __construct()
    {
        try {
            self::$conn = new mysqli('localhost', 'root', 'root', 'database', '3308');
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
        }
    }

    public static function getInstance()
    {
        try {
            if (self::$instance == null) {
                self::$instance = new Database();
            }
            return self::$instance;
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
            return false;
        }
    }

    public function query($sql)
    {
        try {
            return self::$conn->query($sql);
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
            return false;
        }
    }
} 
```

我觉得我的数据库类可能与这个问题有关......每次我点击 getInstance() 函数时，调试都会突然停止，并且我在 Google Chrome 中得到 net::ERR_CONNECTION_RESET 错误。这可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:03:02.513

该问题已在 Xdebug 2.2.0RC2 中修复。请升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:07:11.900

*   Symfony 2
*   PhpStorm 4.0.1

我已经升级到 php_xdebug-2.2.1-5.4-vc9.dll 这解决了问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:07:01.490

在我的情况下，这是因为 xdebug 仅在 ipv6 端口上侦听，并且浏览器尝试通过 ipv4 (localhost) 进行连接。

我不确定调试服务器是否绑定到 ipv4 或 ipv6 端口取决于什么。在我的情况下，它使用 Ubuntu 12.04 和默认 Ubuntu 存储库中的 php 内容。

您可以通过运行检查是否有相同的问题

```
sudo netstat -tulpen 
```

而 phpstorm 正在等待连接。查找端口 9000（或您配置的任何内容）的条目。在我的情况下，输出然后包含该行

```
tcp6       0      0 :::9000                 :::*                    LISTEN      1000       6687897     318/java 
```

可以通过更改内核设置来解决这个问题，但我采取的解决方案是连接到这个 ipv6 端口：在用于该项目的 phpstorm 运行/调试配置中，在服务器设置中，我将主机从“localhost”更改为“ip6-localhost” ”。在 Ubuntu 中，它是 localhost (127.0.0.1) 的 ipv6 对应物 (::1)，默认情况下在 /etc/hosts 中配置。同样，我不确定这是否也适用于其他操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:10:02.383

根据您的描述，xdebug 远程调试有效。

为什么 HTML 会返回给浏览器（而不是你所期望的）很难说。您是否尝试过使用稳定版本的 xdebug？

# php - PHP 中的 Md5 替代方案？

> ID：10125219
> 
> 赞同：8
> 
> 时间：2012-04-12T14:06:19.530
> 
> 标签：php, security, encryption, md5

用于加密存储在 MySQL 数据库中的用户数据（如密码和其他安全数据）的 PHP 的 Md5 算法的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:25:21.777

SHA512 不是一个糟糕的选择。但用不了多久它就会破解大多数长度的密码。接受[杰夫的建议](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)。使用[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)或[PBKDF2](http://en.wikipedia.org/wiki/Pbkdf2)。它们对 EC2 或其他并行处理技术具有抵抗力。可能不是免疫的，但有抵抗力。

在这种情况下，更好的哈希值不是更好的原因是`ABC`在 MD5 中变为一个值，而`ABC`在 SHA512 中变为一个值。SHA512计算所有 3 个字母的密码[实际上比 MD5 更容易](http://www.cryptopp.com/benchmarks.html)。关键是很难做到。这意味着一个缓慢的哈希，一个使用大量 RAM 的，和/或一个在 EC2 上无法轻松完成的哈希。

最好的选择是不再单独使用密码。确定您的站点是否真的需要登录，如果需要，请先尝试使用第三方提供商。如果这不是一个选项，请考虑来自 RSA 的密码 + 令牌。如果您没有其他可行的选择，请仅使用密码。

散列密码时，关键是**散列（密码+盐）**，盐需要每个用户唯一，并且也应该很难或不可能猜到。使用用户名符合第一个标准，并且比没有盐或每个用户使用相同的盐要好，**但每个用户使用唯一的随机盐是更好的选择**。理想情况下，在一个单独的数据库中，如果不是位置，具有自己的凭据。它也应该不是在用户名上键入，而是在 user_id 甚至是 user_id 的哈希上。您希望该数据库是 SQL 注入证明。不接受未经哈希处理的用户输入是一种很好的方法。明智的做法是让查询本身进行哈希处理。慢的？是的，这也是一件好事。

盐本身应该包含它可以获得的所有难以预测的数据。用户名 + 用户 ID + 时间戳 + 来自 dev/urandom 的垃圾 + 带有 taco 字样的最新推文。越长越好。SHA512 在这里是一个不错的哈希选择。

总结：hash = bcrypt(password + salt), salt = sha512(username + user_id + timestamp + microtimestamp + dev/urandom bits + other noise)。

如果您在所有这些之后仍然担心。随意对 bcrypted 密码进行 SHA512 处理。您将获得 SHA512 的强度，它在破解时只会显示更难以暴力破解的 bcrypted 哈希。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T14:12:05.420

试试 php hash() 函数[http://php.net/manual/en/book.hash.php](http://php.net/manual/en/book.hash.php)

示例代码：

```
$hash = hash('SHA512', $pass); 
```

这变成了这样：

```
SHA512("The quick brown fox jumps over the lazy dog") 
```

进入：

```
0x07e547d9586f6a73f73fbac0435ed76951218fb7d0c8d788a309d785436bbb642e93a252a954f23912547d1e8a3b5ed6e1bfd7097821233fa0538f3db854fee6 
```

进一步阅读： [http ://en.wikipedia.org/wiki/SHA-2](http://en.wikipedia.org/wiki/SHA-2)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T14:10:47.557

MD5 确实不推荐了。大多数 php 安装都包含`hash`扩展。目前散列函数的最佳选择是 SHA-512。您可以使用具有以下功能的 SHA-512：

```
<?php
    function sha512($string) {
        return hash('sha512', $string);
    }
?> 
```

如果您愿意，还有其他输出尺寸较小的替代方案，例如`SHA-256`或`RIPEMD-160`。

更新：阅读您更新的问题，我建议使用 php [crypt](http://jp.php.net/manual/en/function.crypt.php)函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T14:09:58.843

你可以像这样使用[散列](http://www.php.net/manual/en/function.hash.php)，你有很多算法来散列你的数据。

```
hash('sha256', $data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:08:26.437

[MCrypt](http://php.net/manual/en/book.mcrypt.php)提供了许多更安全的方法（以及 md5 本身，顺便说一句）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:08:52.417

我建议去阅读[散列](http://php.net/manual/fr/function.hash.php)函数。您也可以阅读有关[Mcrypt](http://php.net/manual/fr/book.mcrypt.php)的信息。我猜这是目前最好的哈希值。Mcrypt 提供基于 CPU 周期的散列。

# c# - 调试和部署时 ASP.NET 登录看起来不同？

> ID：10125220
> 
> 赞同：0
> 
> 时间：2012-04-12T14:06:20.197
> 
> 标签：c#, asp.net, visual-studio-2010, login

我只是好奇是否有人知道为什么这突然改变了我。

我已经为此工作了一个多月，但从未发生过。当我在 Visual Studio 中工作时，我在 Visual Studio 中的登录屏幕看起来像默认屏幕（我想要它，而且它一直都有），但是当我部署它时，它看起来很平淡，只有普通文本（以前从未发生过）。

看起来这可能是我忽略的一些简单的事情，但任何洞察力将不胜感激。图一是它在 VS 中的样子，我希望它看起来的样子，图二是我调试/部署时的样子。

![我希望它的外观，以及它在 VS 中的外观。](../Images/ddab77b08873e371b3bf4f2c9d2d4203.png)

![我不希望它看起来的样子，以及它在部署时的样子。](../Images/147d265ccad277bca35aae74f4ebcce8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:36:07.403

看起来您的 CSS 文件位于只有登录用户才能访问的文件夹中。尝试在 web.config 文件中添加[location 元素：](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)

```
<location path="Your Styles Folder" allowOverride="false">
   <system.web>
      <authorization>
         <allow users="*"/>
      </authorization>
   </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:39:21.950

确保您的其他`css`人拥有`tables`并且他们就是他们`overriding`。尝试删除它们，它会正常工作。

# android - android 2.2 上的 Wifi 文件共享

> ID：10125225
> 
> 赞同：0
> 
> 时间：2012-04-12T14:06:44.823
> 
> 标签：android, wifi, p2p

你好，我正在做一个关于 android 上的 P2P 文件共享的项目......

有适用于 android 4.0 的 Wifi API。但我正在寻找适用于 android 2.2 的东西 是否有任何 API 可用于 android 2.2 的 wifi ？请帮忙 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:45:01.947

是的，有一个用于此特定文件共享的应用程序。它被称为文件共享，可以在 google play 上找到

它实际上很容易使用，它会自动搜索您的外网 IP 地址

祝你好运

阿杰

# scala - Play2 表单属性 - 其中“值 - 不是符号的成员”

> ID：10125227
> 
> 赞同：12
> 
> 时间：2012-04-12T14:06:51.957
> 
> 标签：scala, playframework, playframework-2.0

我刚刚开始使用 Play2，我正在努力使用 scala。

在一个视图中，我有这个简单的表单助手来创建一个新闻项目。

```
@textarea(
  newsItemForm("content"),
  '_label -> "Content",
  'rows -> 3,
  'cols -> 50,
) 
```

现在我想将 a 添加`data-wysiwyg`到属性中，但由于它包含 - scala 抱怨 - 不是 Symbol 的成员。

因为`'`这只是编写 Symbol("data-wysiwyg") 的一种好方法，我可以让它工作，但是我的视图看起来很难看，因为一些属性被指定了，`Symbol`而另一些属性被指定了`'`

我的问题是：有没有办法将 scala`'`表示法用于 html5`data-`属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T14:29:16.460

我认为这是不可能的，因为破折号将被解释为减号。如果是为了缩短声明，为什么不在`s`字符串中添加一个方法来生成相应的符号（类似于生成正则`r`表达式的方法）？

```
class SymbolString( str: String ) {
  def s = Symbol(str)
}

implicit def str2symstr( str: String ) = new SymbolString(str)

scala> "hello".s
res20: Symbol = 'hello

scala> "data-wysiwyg".s
res21: Symbol = 'data-wysiwyg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-21T23:14:45.477

您还可以使用`Symbol`伴随对象的 apply 方法。我认为这更具可读性，因为它很明显您正在创建一个符号：

```
scala> Symbol("data-wysiwyg");
res0: Symbol = 'data-wysiwyg 
```

# jsf-2 - 如何隐藏元素以响应ajax调用

> ID：10125231
> 
> 赞同：0
> 
> 时间：2012-04-12T14:06:54.457
> 
> 标签：jsf-2, primefaces

我有一个 JSF 页面。

```
<div id="SaarcImage">

    <h:panelGrid id="saarcImagesTable" columns="4" style="position: relative; top: 50px;"
                 columnClasses="nameColumn" >

        <span class="asterisk">*</span><span class="labels"> #{label.saarcCountryMap}: </span>
        <p:fileUpload id="cityMap" widgetVar="uploader" description="Image"
                      update="countryMap" allowTypes="*.jpg;*.png;*.gif;*.jpeg;"
                      auto="true" fileUploadListener="#{countryPages_Detail.imageUpload}">

       </p:fileUpload>

       <p:graphicImage id="countryMap" value="#{countryPages_Detail.imagePath}"
                       width="80" height="50" cache="false">

          <f:event type="preRenderComponent" listener="#{countryPages_Detail.putImage}" />

       </p:graphicImage>

       <h:commandLink id="removeCountryMap" value="remove" title="Remove Picture"
                      style="color: #0d5b7f;text-decoration: underline;"
                      onclick="if (! confirm('Are you sure, you want to remove picture?') ) { return false;}; return true; ">

          <f:ajax event="click" render="countryMap"
                  listener="#{countryPages_Detail.removeImage}"/>

      </h:commandLink>

      ........   //7 more images

    </h:panelGrid>
</div> 
```

同样，我在页面上还有 7 个图像。在每个图像渲染之前，我都会调用 preRenderComponent 事件。这是我处理删除链接的方式

```
@ViewScoped
public class CountryPages_Detail {

    private int x = 0;
    private boolean remove;

    public void removeImage() {
        remove = true;      
    } //end of removeImage()

    public void putImage(ComponentSystemEvent event) {
        GraphicImage image1 = (GraphicImage)event.getComponent();
        String imageId = image1.getClientId();

        // Check to ensure that x doesn't greater than the number of images
        if (x > 7) {
            x = 0;
        } //end of if (x > 4)

        if (remove || uploadImage) {

            if (imageId.contains("countryMap")) {
                x = 0;
            } else if (imageId.contains("Image1")) {
             x = 1;
            }
            ....
        }
        ArrayList imagesNames = (ArrayList)session.getAttribute("countryDetailImageNames");

        for(; x<imagesNames.size(); x++) {
            String fileName = imagesNames.get(x).toString();
            if (fileName.contains(imageId)) {
                if (remove) {
                    imagePath = "";
                    imagePath = "/resources/images/no-preview.jpg";
                    imageNames.set(x, "no-preview.jpg"); //also remove from list
                    remove = false;
                    break;
                }
            } else if (fileName.contains("no-preview")) {
                 imagePath = "";
                 imagePath = "/resources/images/no-preview.jpg";
                 x++;
                 break;
            }              
        } //end of for()
    } //end of putImage()
} //end of class CountryPages_Detail 
```

如果没有图像，则默认图像为**no-preview.jpg**。如果用户上传图像，那么我的 putImage() 会被调用，或者如果用户点击删除链接，那么图像会设置为**no-preview.jpg**和 putImage() 会被调用。现在我希望，如果我的任何图像的图像路径是**/resources/images/no-preview.jpg**，那么该图像旁边的删除链接不应该出现。现在发生的事情是，无论我有**no-preview.jpg**或其他图像，我的删除链接都会出现。**我希望删除链接仅在我有no-preview.jpg**以外的图像时出现。我该怎么做？我制作了一个脚本来检查图像 Scr 属性是否包含**no-preview.jpg**，如果是，则隐藏所有删除链接。这里是

```
var saarcImages = $("#SaarcImage #saarcImagesTable tr").each(function(index){

    var $tr = $(this);
    var $image = $tr.find("img");

    if ($image.length != 0) {   //Image exist

        var imageSource = $image.attr("src");       
        var contains = imageSource.indexOf("no-preview.jpg") >= 0; // true

        if (contains) {
            $tr.find("a").fadeOut("slow");
        } else {
            $tr.find("a").fadeIn("slow");
        }
    }
}); //end of .each() 
```

但是这个脚本只在页面加载时运行。因为我正在使用 ajax 更新图像，所以如果我上传任何图像，则脚本不会运行，并且我的删除链接不会再次出现。如果我有图像**no-preview.jpg**那么删除链接不会出现，我该怎么做。

谢谢

# delphi - 如何在标签的标题中打印字符串？

> ID：10125232
> 
> 赞同：1
> 
> 时间：2012-04-12T14:06:55.397
> 
> 标签：delphi

我有一个带有标签的表单，我想在其中放置 Real 类型的变量 'accuracy' 和符号 '%'（例如，格式为 57,49%）。甚至可以使用标签吗？我尝试使用谷歌搜索，但没有找到任何相关内容。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T14:13:53.717

```
Label1.Caption := Format('%.2f%%', [accuracy]); 
```

第二个`%`转义百分比符号并将其视为实际字符串的一部分（而不是格式字符串）。

# prolog - prolog中的三个依赖参数

> ID：10125238
> 
> 赞同：0
> 
> 时间：2012-04-12T14:07:26.047
> 
> 标签：prolog

我是prolog中的新手。所以请任何人指导我正确的方式！我有两个参数 CctypeInt 和 Ru1，下面的关系说：如果 CctypeInt 是 0，那么 Ru1 是一个列表 {2,3,4}，如果 CctypeInt 是 1，Ru1 是一个列表 {2,3,4}，CctypeInt 是 2 Ru1 是具有一个元素 {2} 的列表

```
relation(CctypeInt,[0-{2,3,4}, 1-{2,3,4}, 2-{2}],Ru1), 
```

这里一切正常。但还有第三个参数可以采用如下所述的值：

```
(
CctypeInt is 0 then Ru2 is -1
    ;CctypeInt is 1 and Ru1 is  2 then Ru2 is [2,3,4]
    ;CctypeInt is 1 and Ru1  is  3 then Ru2 is [2,3]
    ;CctypeInt is 1 and Ru1  is  4 then Ru2 is 2
    ;CctypeInt is 2 then Ru1 is 2 then Ru2 is 2
    ),!. 
```

我尝试了以下代码。

```
 (
CctypeInt=:=0->Ru2 is -1
    ;CctypeInt=:=1,Ru1 =:= 2->Ru2 is [2,3,4]
    ;CctypeInt=:=1,Ru1 =:= 3->Ru2 is [2,3]
    ;CctypeInt=:=1,Ru1 =:= 4->Ru2 is 2
    ;CctypeInt=:=2->Ru1 is 2,Ru2 is 2
    ),!. 
```

但我收到一个错误，例如 CctypeInt is a range 0..2 并且无法比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:48:13.627

也许我错过了一些东西，但这似乎可以完成这项工作：

```
% relation(CctypeInt, Ru1, Ru2)

relation(1,2,[2,3,4]).
relation(1,3,[2,3]).
relation(1,4,2).
relation(2,2,2). 
```

# ios - iOS 本地化，尤其是文件夹

> ID：10125241
> 
> 赞同：1
> 
> 时间：2012-04-12T14:07:33.443
> 
> 标签：ios, internationalization, solution

iOS（以及 Mac OS .. 和 NextStep）都使用相同的基本技巧来本地化文件：可本地化的资产被放置在一个以文件对应的语言变体命名的后缀为 .lproj 的文件夹中。例如，如果您的开发系统设置为英语，则此文件夹称为 en.lproj。其他语言和本地化变体遵循相同的形式：es.lproj（西班牙语）、zh-Hant.lproj（繁体中文）、zh-Hans（简体中文）、en-GB（英式英语）等。注意变体使用' -' 并不是 '_'！。

XCode 试图通过隐藏这些文件位于 .lproj 文件夹中的事实来提供帮助。某些文件是在 en.lproj 中自然为您创建的，例如 Info-plist.strings 和 Localizable.strings。通常，要为您的项目添加新的本地化，您可以选择有问题的文件，在文件检查器中查看其信息，找到本地化部分，点击加号，然后选择一种语言，然后文件将被复制进入适当的 .lproj 文件夹。这在大多数情况下适用于单个文件。但是，经过多次试验，我发现以相同的方式添加文件夹不起作用，XCode 会感到困惑。我喜欢将大量资产放在一个文件夹中，而不是单独添加它们，这样我可以更轻松地找到它们！这是我为您的项目添加本地化文件夹的技术：

*   在 en.lproj 中创建文件夹以开始
*   使用项目导航器（“添加文件”）将文件夹添加到构建中。确保选择“为任何添加的文件夹创建文件夹引用”，最重要的是，不要选中“将项目复制到目标组的文件夹”。
*   如果您还没有其他 .lproj 文件夹，您可以通过本地化 Info-plist.strings 来制作它们，如上所述。
*   将文件夹从 en.lproj 复制到彼此的 .lproj 文件夹
*   通过项目导航器添加每个文件夹。

我发现其他方法，例如选择文件夹并在文件检查器中使用本地化系统，往往会将新文件夹放在层次结构的错误部分，只复制一些文件夹内容，并且通常会造成严重破坏。并且“复制到...文件夹”按钮尤其具有误导性。

即使在执行了这些步骤之后，您也可能需要通过转到目标的构建阶段选项卡并单击“验证设置”来清理构建脚本。让它为你清理列表，以防有骗子。您可能还想在 Info.plist 中添加本地化键，我认为这会提示 iOS 或 MacOS 这些 .lproj 文件可用。

所以 - 这不是一个真正的问题，而是 StackOverflow 社区需要阅读的答案。如果我能再把它简化一点，我会提交一份雷达报告。我真正想要的是让 XCode 停止在其界面中隐藏文件位于 .lproj 中的事实。

# ios - 是否有可能在 iOS 罗盘航向中获得低于度数的精度？

> ID：10125244
> 
> 赞同：1
> 
> 时间：2012-04-12T14:07:42.167
> 
> 标签：ios, compass-geolocation, magnetometer, heading

基本上我想知道 iPhone 高精度指向的方向，我尝试了 CLLocationManager：问题是 CLHeading.magneticHeading 返回双精度，例如 36.44323 但是当我开始转动设备时，CLLocationManager 仅在达到 1 度时更新方向，所以数字读起来像这样：36.44323、37.44323、38.44323 等等。是否有可能获得更高的准确性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T23:22:04.867

设置`CLLocationManager` `headingFilter`为`kCLHeadingFilterNone`或小于默认 1 度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:21:15.170

如果您不关心准确性但对方向的微小变化感兴趣，那么您可能需要查看`CMMotionManager`. 它是一个属性 ( `deviceMotion`)，它允许您获取`attitude`设备的 ，尤其是`yaw`. 通过记录`x`每次航向更新的偏航和磁航向之间的差异（例如），您可以获得更新之间的近似航向`yaw + x`。您将收到更及时的更新，`CMMotionManager`因为您可以`deviceMotionUpdateInterval`自己设置。

如果我没记错的话，该`yaw`值以 -pi 和 pi 之间的弧度返回，因此在计算时您需要转换回度数，`x`因为`CLLocationManager`返回的磁航向是度数（0 到 360）。

您可能还想对设备方向进行调整。指南针从设备顶部返回航向数据，因此如果您在 LandscapeLeft 中，您需要从航向值中减去 90°， LandscapeRight 您需要在航向值上添加 90°，并且 PortraitUpsideDown 需要调整 180° .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:12:33.180

不是我知道的，不。

并且不要将准确性与正确性混为一谈；仅仅因为它说 36.44323 并不意味着它精确到小数点后 5 位，该值的误差范围可能是 ±1 度:(

我不认为 iPhone 上的指南针具有足够高的精度，无法真正自信地说出你所指向的方向是你想要的精度。对不起！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T02:33:08.283

如果您需要更高的精度，您应该使用陀螺仪。CoreMotion 的设备运动数据应该可以帮助您。指南针确实不够准确。

# asp.net - 在 Repeater FooterTemplate 中显示数据

> ID：10125249
> 
> 赞同：2
> 
> 时间：2012-04-12T14:08:12.750
> 
> 标签：asp.net, repeater

更新：

行为空

```
if (e.Item.ItemType == ListItemType.Footer)
{
 Label lblDateCreated = e.Item.FindControl("lblDateCreated ") as Label;
 DataRowView row = (DataRowView)e.Item.DataItem; //row is null here <<<<
 lblDateCreated .Text = row["DateChecked"].ToString();

} 
```

**结束更新：**

如何在转发器页脚中显示数据？...

我花了很多时间来弄清楚这非常愚蠢，但是如果我将其移至 itemtemplate 则它会显示但不在页脚中...下面是我的代码..

```
<asp:Repeater ID="rpt" runat="server">
        <HeaderTemplate>
            header...
        </HeaderTemplate>
        <ItemTemplate>
            <div class="rpt">
                <div class="inner">
                    <div>
                        <div class="ert">
                            <%#DataBinder.Eval(Container.DataItem, "Comment")%>
                        </div>
                    </div>
                </div>
            </div>
            <br />
        </ItemTemplate>
        <FooterTemplate>
            footer.....
            <div id="datetime">
            <asp:Label ID="lblDateTime" runat="server" Text='<%#DataBinder.Eval(Container.DataItem, "DateChecked")%>'></asp:Label>
            </div>
            <div id="save">
            <p>
                <asp:HyperLink ID="Hyperlink2" runat="server" NavigateUrl="~/link.aspx"
                    Text="More"></asp:HyperLink></p>
            </div>
         </FooterTemplate>
    </asp:Repeater> 
```

代码隐藏：

```
rpt.DataSource = mydatasource;
rpt.DataBind(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:21:15.640

整个数据集的页脚只呈现一次，而项目模板则为集合中的每个项目呈现。

*编辑*

中继器渲染如下：

标题

项目模板

项目模板

...（数据源中每个项目的一个项目模板）

项目模板

项目模板

页脚

如果您希望某些内容出现在每行的页脚中，您只需将该标记添加到您的`ItemTemplate`

```
 <ItemTemplate>
        <div class="rpt">
            <div class="inner">
                <div>
                    <div class="ert">
                        <%#DataBinder.Eval(Container.DataItem, "Comment")%>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <div class="footer">
            footer.....
            <div id="datetime">
                <asp:Label ID="lblDateTime" runat="server" Text='<%#DataBinder.Eval(Container.DataItem, "DateChecked")%>'></asp:Label>
            </div>
        </div>
    </ItemTemplate> 
```

*结束编辑*

您可能会覆盖 ItemDataBound 或 DataBound 事件，并在需要设置值时访问您的页脚。

从[MSDN修改](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)

```
 void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

      // This event is raised for the header, the footer, separators, and items.

      // Execute the following logic for Footer only.
      if (e.Item.ItemType == ListItemType.Footer) {

            ((Label)e.Item.FindControl("lblDateTime")).Text= /* your value */;
      }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:15:17.107

FooterTemplate 不会与每一行一起呈现，因此您不能像这样将 DateItem 的 Comment 绑定到页脚。

似乎只有一个 Date Checked 您想在页脚中显示。

您正在查看 DataItem 中的 DateChecked ，每行可能不同。

如果所有行都包含相同的 DateChecked 您可以创建一个服务器端属性来存储它，如果所有行都相同，则可以使用任何行 Datechecked 如果不是，您可以存储要在页脚中显示的任何日期（它应该是任何一个日期）使用页脚中的以下块以显示 DateChecked <% = PropertyName %> 或者由于您已经在页脚中放置了标签，您可以使用此属性直接从服务器端绑定 lblDateTime。

```
rpt.DataSource = mydatasource;
rpt.DataBind();

var lblDateTime = rpt.FindControl("lblDateTime") as Label;
if (lblDateTime != null)
{
   lblDateTime.Text = mydatasource.First().DateChecked;
} 
```

在页脚控件中绑定中继器

```
 void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

  // This event is raised for the header, the footer, separators, and items.

  // Execute the following logic for Footer only.
  if (e.Item.ItemType == ListItemType.Footer) {

        footerRepeater.DataSource = mydatasource;
        footerRepeater.DataBind();
  }
 } 
```

ASPX

```
<asp:Repeater ID="rpt" runat="server">
    <HeaderTemplate>
        header...
    </HeaderTemplate>
    <ItemTemplate>
        <div class="rpt">
            <div class="inner">
                <div>
                    <div class="ert">
                        <%#DataBinder.Eval(Container.DataItem, "Comment")%>
                    </div>
                </div>
            </div>
        </div>
        <br />
    </ItemTemplate>
    <FooterTemplate>
        footer.....
       <asp:Repeater ID="rpt" runat="server">
         <ItemTemplate>
           <div>
              <asp:Label ID="lblDateTime" runat="server" DataBinder.Eval(Container.DataItem, "DateChecked")%>'></asp:Label>
          </div>
        </ItemTemplate>
       </asp:Repeater>
     </FooterTemplate>
 </asp:Repeater> 
```

CS

在页脚控件中绑定中继器

```
 void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

  // This event is raised for the header, the footer, separators, and items.

  // Execute the following logic for Footer only.
  if (e.Item.ItemType == ListItemType.Footer) {

        footerRepeater.DataSource = mydatasource;
        footerRepeater.DataBind();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:17:06.217

*FooterTemplate*未绑定到数据项。*构建转发器时， FooterTemplate*内的控件不会绑定，因此不会计算数据绑定表达式。

您可以做的是使用 FindControl 方法。

```
rpt.DataSource = mydatasource;
rpt.DataBind();

var lblDateTime = rpt.FindControl("lblDateTime") as Label;
if (lblDateTime != null)
{
   lblDateTime.Text = mydatasource.First().DateChecked;
} 
```

你看，我调用 First() 方法来获取单个项目，这是因为只有一个渲染的页脚，这就是为什么我说这个模板不适用于项目。

# groovy - Groovy：创建新的 xml 结构以及如何在构建时插入新节点

> ID：10125253
> 
> 赞同：1
> 
> 时间：2012-04-12T14:08:15.343
> 
> 标签：groovy, xml-parsing

我对 Groovy 有一点 xml 解析问题。
这就是我的数据的样子：

```
ID      001=1234
sID     001=q8b6v
d1      001=some Text
d2      001=more Text2
tzh     001=data
dse     001=data
ID      001=567823
sID     001=l3n37v2
d1      001=some Text
d2      001=more Text2
hrg     001=data
dfe     001=data
... 
```

我需要 ID、sID 和 d1。

我得到什么：

```
What I get:
<add>
  <doc>
    <field name='ID'>00573419</field>
    <field name='sID'>20120110572</field>
    <field name='d1'>some Text</field>
    <field name='ID'>00573406</field>
    <field name='sID'>20120111110</field>
    <field name='d1'>some Text2</field>
  </doc>
</add> 
```

我想要的是：

```
<add>
  <doc>
    <field name='ID'>00573419</field>
    <field name='sID'>20120110572</field>
    <field name='d1'>some Text</field>
  </doc>
  <doc>
     <field name='ID'>00573406</field>
     <field name='sID'>20120111110</field>
     <field name='d1'>some Text2</field>
  </doc>
</add> 
```

这是我的代码的一部分：

```
if(!dataFile.exists()){
        println "File does not exist!"
    }else{

        def key1, key2, key3, key4
        def val1, val2, val3, val4

        xml.add{
            doc {
                dataFile.eachLine {line ->
                    if(line.startsWith(regExId)){
                        (key1, val1) = line.split(/001=/).collect {it.trim()}
                        field(name:key1, val1)
                    }
                    if(line.startsWith(regExEntryId)){
                        (key2, val2) = line.split(/001=/).collect {it.trim()}
                        field(name:key2, val2)
                    }
                    if(line.startsWith(regExTitle)){
                        (key3, val3) = line.split(/001=/).collect {it.trim()}
                        field(name:key3, val3)
                    }
                }
            }
        } 
```

我想让它尽可能简单。所以我需要一个像'如果这里开始一个新的regExId然后开始一个新的xml块'这样的语句，这样我就可以根据需要轻松添加数据的新部分（如d2）。没有现有的 xml 文件。
感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:30:32.023

这就是我想出的：

```
import groovy.xml.MarkupBuilder

dataFile = new File( 'data.txt' )

// A closure that will add a new doc element to our xml
def addDoc = { builder, data ->
  builder.doc {
    data.each { k, v ->
      builder.field( name:k, v )
    }
  }
}

String result = new StringWriter().with { out -> // create a StringWriter
  new MarkupBuilder( out ).with { xml ->         // pass it to MarkupBuilder
    add {                                        // create our root level element
      def data = [:]
      // Then, for each line in our input file
      dataFile.eachLine { line ->
        // Get the key and value as you had it
        def (key,value) = line.split( /001=/ )*.trim()
        // Just use the keys we want
        if( key in [ 'ID', 'sID', 'd1' ] ) {
          // If we have a new ID and we have data
          if( key == 'ID' && data ) {
            // Add it to the document
            addDoc( xml, data )
            // And start again with a new map
            data = [ ID: value ]
          }
          else {
            // Otherwise, just add the key to the map
            data[ key ] = value
          }
        }
      }
      // So, we've run out of lines. If we have data, write it in
      if( data ) addDoc( xml, data )
    }
  } 
  // Convert our StringWriter to a String (this goes into the variable `result)
  out.toString()
}
// And print it out
println result 
```

# jquery - 使用 jQuery 我想在单击显示按钮时一次显示五个

> ID：10125260
> 
> 赞同：1
> 
> 时间：2012-04-12T14:08:43.220
> 
> 标签：jquery

使用 jQuery，我想在单击显示按钮时一次显示五个。

这是我的代码：

```
<button class="show">show</button>
<ul>
    <li id="Li0">0</li>
    <li id="Li1">1</li>
    <li id="Li2">2</li>
    <li id="Li3">3</li>
    <li id="Li4">4</li>
    <li id="Li5">5</li>
    <li id="Li6">6</li>
    <li id="Li7">7</li>
    <li id="Li8">8</li>
    <li id="Li9">9</li>
    <li id="Li10">10</li>
    <li id="Li11">11</li>
    <li id="Li12">12</li>
    <li id="Li13">13</li>
    <li id="Li14">14</li>
    <li id="Li15">15</li>
</ul> 
```

脚本是：

```
$(".show").click(function(){
    $("ul > li:lt(' + (index - 5) + ')+ ").addClass('active');
}); 
```

CSS是：

```
ul li{
    display:none;
}
.active{
    display:inline;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:18:50.313

```
$(".show").click(function () {
    $("ul li").not(".active").slice(0, 5).addClass("active");
});​ 
```

[**演示。**](http://jsfiddle.net/9Z5Jr/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:23:11.010

```
$(".show").click(function () {
    $("ul li").not(":visible").slice(0, 5).slideDown();
    if($("ul li").not(":visible").length == 0)
         $(this).hide();
});​ 
```

[http://jsfiddle.net/9Z5Jr/4/](http://jsfiddle.net/9Z5Jr/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:24:41.730

使用您给定的 CSS。

尝试这个

```
$(".show").click(function() { 
  $("ul li:not(.active):lt(5)").addClass('active'); 
}); 
```

[http://jsfiddle.net/ceehn/](http://jsfiddle.net/ceehn/)

# objective-c - AVCaptureVideoPreviewLayer 在简历上不显示任何内容

> ID：10125261
> 
> 赞同：1
> 
> 时间：2012-04-12T14:08:49.097
> 
> 标签：objective-c, ios, cocoa-touch, avcapturesession

我正在开发一个增强现实应用程序，它使用`AVCaptureVideoPreviewLayer`来显示来自设备摄像头的视频源。如果您关闭并重新打开应用程序（通过按下主页按钮，而不是强制退出）或让手机进入睡眠状态然后唤醒它，则会`AVCaptureVideoPreviewLayer`显示一个黑色矩形而不是相机的提要。

我正在初始化捕获会话，如下所示`viewDidLoad:`

```
captureSession = [[AVCaptureSession alloc] init];

AVCaptureDevice *videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if (videoDevice) { 
    NSError *error;
    AVCaptureDeviceInput *videoIn = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:&error];
    if (!error) {
        if ([captureSession canAddInput:videoIn])
            [captureSession addInput:videoIn];
        else
            NSLog(@"Couldn't add video input");
    } else
        NSLog(@"Couldn't create video input");
} else
    NSLog(@"Couldn't create video capture device");

[captureSession startRunning];

AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:captureSession];
previewLayer.frame = cameraView.bounds;
previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
[[cameraView layer] addSublayer:previewLayer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:25:07.503

您将需要观察您使用 KVO的`interrupt`标志并对其做出反应。`AVCaptureSession`

从[AVCaptureSession 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html)：

```
interrupted 
```

指示接收器是否已被中断。（只读）

```
@property(nonatomic, readonly, getter=isInterrupted) BOOL interrupted
Discussion 
```

> 您可以使用键值观察来观察此属性的值
> 
> 在 iOS 4.0 及更高版本中可用。在 AVCaptureSession.h 中声明

# dojo - Dojo：来自 JsonRest 存储的 DataGrid

> ID：10125268
> 
> 赞同：0
> 
> 时间：2012-04-12T14:09:00.943
> 
> 标签：dojo

我正在尝试按照此处的教程进行操作：

[http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/](http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/)

教程写道：

```
require(["dojo/store/JsonRest"], function(JsonRest){
myStore = new JsonRest({target:"MyData/"}); 
```

我的 MyData.json 文件放在 ROOT\MyData 中。如果我运行以下代码

```
...
<script>
var myStore, dataStore, grid;
require(["dojo/store/JsonRest"], function(JsonRest){
    myStore = new JsonRest({target:"MyData/"});
});

require(["dojox/grid/DataGrid",
         "dojo/data/ObjectStore",
         "dojo/domReady!"
], function(DataGrid, ObjectStore){
        grid = new DataGrid({
        store: dataStore = ObjectStore({objectStore: myStore}),
        structure: [
            {name:"State Name", field:"name", width: "200px"},
            {name:"Abbreviation", field:"abbreviation", width: "200px"}
        ]
        }, "target-node-id"); // make sure you have a target HTML element with this id
        grid.startup();
});
</script>
... 
```

如果我写“MyData/”，我会在数据上收到 404 错误，如果我写“MyData/MyData.json”，则会收到 416（请求的范围不满足）。

我知道这完全是愚蠢的，因为我找不到任何人有同样的问题，但我看不到解决方案：/

最好的问候，并感谢您的帮助！

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:50:47.947

好的，所以您提供的数据不足以确定问题所在，但未找到 404。

所以：

1.  确保您可以通过浏览器毫无问题地访问 json 文件。
2.  如果这样做，请在*{target:"http://URL"}*中使用此 url ，这应该可以工作。
3.  请记住，在 dojo.store.JsonRest 目标选项*{target:"relative or absolute"}*中，如果使用相对路径，它将查找执行脚本的路径。

例如，如果您的网格脚本位于*http://localhost/grid/*中，那么 JsonRest 将相对于该路径。对于目标*{target:"MyData.json"}*它将在*http://localhost/grid/MyData.json*中查找，如果它在*http://localhost/MyData.json中的位置，则找不到它*

如果您仍然无法再次解决此帖子！

# java - 准备语句：使用参数的 ArrayList 创建方法

> ID：10125270
> 
> 赞同：2
> 
> 时间：2012-04-12T14:09:03.847
> 
> 标签：java, jdbc, design-patterns

我正在尝试修改一些 Java 现有代码（不是我做的），我发现查询没有使用 prepare 语句完成。因为我有很多代码，所以我试图尽可能少地修改它。所以而不是像这样的方法

```
public void executeInsertStmt(String strQuery, String param1, String param2) {

...
...
PreparedStatement preparedStatement = cnx.prepareStatement(stringRequest);
preparedStatement.setString(1, param1);
preparedStatement.setString(2, param2);
} 
```

我想做类似的事情（我不确定这是最好的解决方案）。

```
public void executeInsertStmt(String strQuery, ArrayList<ArrayList<Object>> parameters) {

PreparedStatement preparedStatement = cnx.prepareStatement(stringRequest);

int counter=1;
            for (final ArrayList<Object> eachParam : parameters) {

                switch(DataTypes.valueOf(eachParam.get(0).toString().toUpperCase()))
                {
                    case STRING:
                        preparedStatement.setString(counter, (String)eachParam.get(1));
                    break;
                    case DATE:
                        preparedStatement.setDate(counter, (Date)eachParam.get(1));
                    break;
                    case INT:
                        preparedStatement.setInt(counter, (Integer)eachParam.get(1));
                    break;
                    default:
                        preparedStatement.setString(counter, (String)eachParam.get(1));
                    break;
                }

                counter++;

            }
} 
```

然后有这样的东西：

```
strQuery = "insert into toto values (?,?)";
ArrayList<Object> paramToPass1 = new ArrayList<Object>();

paramToPass1.add("String");
paramToPass1.add("TheValueForTheString");

ArrayList<Object> paramToPass2 = new ArrayList<Object>();

paramToPass2.add("String");
paramToPass2.add("TheValueForTheString2");

ArrayList<ArrayList<Object>> paramToPass = new ArrayList<ArrayList<Object>>();

paramToPass.add(paramToPass1);
paramToPass.add(paramToPass2);

executeInsertStmt(strQuery,paramToPass); 
```

因为我有许多具有不同数量参数的查询，这种方法对我来说是最好的。我不必为每种类型的查询做一个方法。

你觉得怎么样。

有什么不对吗？是最好的方法吗？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:48:00.630

您应该为参数使用对象表示，而不是 `ArrayList<Object>`大小为 2。此外，您不需要自己的`DataType`枚举，已经有一个`java.sql.Types`类。最重要的是，有一个`setObject()`方法`PreparedStatement`可以识别这些类型的值，因此您不需要`switch`声明或调用特定于类型的`PreparedStatement.set..()`方法。

这是一个解决方案，它具有参数的对象表示，利用`java.sql.Types`和`preparedStatement.setObject()`支持这些类型，并且还将您与类型常量值隔离开来。

首先，参数的对象表示：

```
import java.sql.Types;

public class ParamDescriptor {
    // Constructor itself is private, we are encapsulating so that
    // you don't need to write java.sql.Types constants yourself
    private ParamDescriptor(int dataType, Object value) {
        _dataType = dataType;
        _value = value;
    }

    // Factory methods for actual instantiation
    public static ParamDescriptor forInt (int paramVal) {
        return new ParamDescriptor (Types.INTEGER, paramVal);
    }

    public static ParamDescriptor forString (String paramVal) {
        return new ParamDescriptor (Types.VARCHAR, paramVal);
    }

    public static ParamDescriptor forDate (Date paramVal) {
        return new ParamDescriptor (Types.DATE, paramVal);
    }
    // Add more here to support more data types . . . .    

    public int getDataType() {
        return _dataType;
    }

    public Object getValue() {
        return _value;
    }

    private int     _dataType;
    private Object  _value;
} 
```

接下来，新版本的`executeInsertStmt()`. 我们已将其缩减为仅几行代码，并且无论将来是否支持参数类型，它都无需再次更改：

```
 public void executeInsertStmt(String strQuery, List<ParamDescriptor> parameters) throws SQLException {    
        PreparedStatement preparedStatement = cnx.prepareStatement(strQuery);

        int counter = 1;
        for (ParamDescriptor paramDescriptor : parameters) {
            preparedStatement.setObject(counter, 
                                        paramDescriptor.getValue(),
                                        paramDescriptor.getDataType());
            counter++;
        }
    } 
```

最后，调用 new 的代码`executeInsertStmt()`：

```
String strQuery = "insert into toto values (?,?)";

ParamDescriptor paramToPass1 = ParamDescriptor.forString("TheValueForTheString");
ParamDescriptor paramToPass2 = ParamDescriptor.forString("TheValueForTheString2");

List<ParamDescriptor> parameters = new ArrayList<ParamDescriptor>();
parameters.add(paramToPass1);
parameters.add(paramToPass2);

executeInsertStmt(strQuery, parameters); 
```

请注意，如果您计划处理小数，还有另一个版本`PreparedStatement.setObject()`支持指定小数刻度。您可能需要在`executeInsertStmt()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:18:25.213

好吧，您的想法还不错……只是一些指示。

不要传递 ArrayList 的 ArrayList... 而是使用 instanceof 或 DataHolder 类。

方法一：instanceof

简单添加类型 Integer、String、Double 等，然后在您的方法中：

```
public void executeInsertStmt(String strQuery, ArrayList<Object> parameters) {

    PreparedStatement preparedStatement = cnx.prepareStatement(stringRequest);
    int counter=1;
    for (final Object eachParam : parameters) {
        if (eachParam instanceof String) {
            preparedStatement.setString(counter, (String)eachParam); 
        } else if (eachParam instanceof Integer) {
            preparedStatement.setInt(counter, (Integer)eachParam); 
        } else ...

        counter++;

    }
} 
```

DataHolder 的想法是一个字段将保留类型，另一个字段将保留实际数据。您甚至可以使用泛型使其更好。但是，在这种情况下，我会选择 instanceof 。

# iphone - 如何使用这种格式解析日期字符串（例如：2012-04-12T14:23:23）

> ID：10125272
> 
> 赞同：1
> 
> 时间：2012-04-12T14:09:14.967
> 
> 标签：iphone, objective-c, cocoa-touch

如何使用这种格式解析日期字符串（例如：2012-04-12T14:23:23）。
我尝试使用此格式字符串，但它是错误的：yyyy-MM-ddThh:mm:ss。
请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T14:10:54.313

你应该逃避这封信`T`：

```
formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:13:00.893

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];

NSDate *formattedDate = [dateFormatter dateFromString:@"2008-12-3T22:11:30"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:18:07.637

那是 ISO 8601 日期格式。因此，最好的方法是使用特定的日期解析器，这将使您的生活变得轻松。

可以在这里找到[http://boredzo.org/iso8601parser/](http://boredzo.org/iso8601parser/)。

另外，请搜索“ISO 8601”。您会发现大量资源和示例，例如

[在可可中解析 ISO8601 日期的正确方法是什么？](https://stackoverflow.com/questions/6194998/whats-the-right-way-to-parse-an-iso8601-date-in-cocoa)

[有没有一种简单的方法可以将 ISO8601 时间戳转换为格式化的 NSDate？](https://stackoverflow.com/questions/2201216/is-there-a-simple-way-of-converting-an-iso8601-timestamp-to-a-formatted-nsdate)

# c# - C#整数这个输出是什么？

> ID：10125276
> 
> 赞同：-5
> 
> 时间：2012-04-12T14:09:25.067
> 
> 标签：c#, .net

我对这个 C# 片段有点困惑。有人可以解释以下内容吗？

```
 int i = 5;

 i = i + 6; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T14:10:53.640

```
int i = 5; // sets the variable i to the value of 5\. (i = 5)
i = i + 6; // sets the variable i equal to itself plus 6\. (i = 5 + 6) 
```

因此 i = 11 *(5 + 6)*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T14:12:26.027

```
int i = 5; 
```

创建一个名为`i`存储整数的变量，并为其赋予初始值`5`。

```
i = i + 6; 
```

修改`i`为 的值`i + 6`。`=`通过记住在赋值发生之前评估赋值运算符右侧的所有内容的规则，可以避免这里的混淆。因此，使用 的先前值`i`，即`5`。所以当运行时，代码变成

```
i = 5 + 6; 
```

因而`i`具有价值`11`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T14:09:41.447

创建一个名为 i 的值为 5 的整数变量，然后将其加 6，结果为：

```
11 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T14:12:14.920

```
 int i = 5; 
```

创建一个整数 i 并将其值设置为 5。

```
i = i + 6; 
```

将 i 的值设置为 i + 6（在本例中为 11）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T14:14:46.983

`=`表示**分配**而不**等于**

```
int i = 5; // Means "put 5 in variable i"
i = i + 6; // Means "get the value in i, add 6 to it and put the result back in i" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T14:20:00.813

这是瘦的，一行一行的。

```
int i = 5; 
```

分配了一个名为“i”的原始整数变量，其值为 5。

```
i = i + 6; 
```

此行中的代码首先评估 = 右侧的内容，在尝试分配之前获取该值。因此，i + 6 变为 5 + 6，即 11。然后，原始变量“i”被赋予新计算的值 11。所以，i = 11；

希望有帮助！

# c# - 使用 UCMA 3.0 清除已发布的存在

> ID：10125280
> 
> 赞同：0
> 
> 时间：2012-04-12T14:09:40.460
> 
> 标签：c#, lync-2010, ucma

我在受信任的应用程序端点中发布用户存在，但我也想在不再需要时清除此存在。

这样做是终止 UserEndpoint 实例的唯一选择吗？

我正在使用这个代码片段：

```
 user.Endpoint.LocalOwnerPresence.BeginPublishPresence(
        user.categories,
        arBeginPublishPresence =>
        {
            try
            {
                user.Endpoint.PresenceServices.EndUpdatePresenceState(arBeginPublishPresence);
                logger.log("Published presence for {0} with state {1}.", user.SipUserUri, newState.Availability);
            }
            catch (RealTimeException ex)
            {
                logger.log("Failed publishing presence for {0}. {1}", user.SipUserUri, ex);
            }
        },
        null); 
```

其中 user.Endpoint 是该用户的 UserEndpoint，而 user.categories 是 PresenceCategoryWithMetaData 对象的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:35:34.340

首先 - 我很惊讶这真的有效！您在 LocalOwnerPresence 对象上调用 BeginPublishPresence，然后在 aysnc 回调中调用 PresenceServices 对象上的 EndUpdatePresenceState。请告诉我这是一个错字，否则我将不得不扔掉我认为我知道的关于 Lync 开发和异步编程的所有内容；o)

无论如何 - 假设您正在发布存在

`LocalOwnerPresence.BeginPublishPresence`

（并在异步回调中调用对应的 EndPublishPresence ），可以调用

`LocalOwnerPresence.BeginDeletePresence`

删除发布。

# maven - Maven项目-对我来说服务器错误500，但对其他人来说效果很好

> ID：10125291
> 
> 赞同：1
> 
> 时间：2012-04-12T14:10:04.313
> 
> 标签：maven

我检查了一个 Maven 项目，`Return code is: 500, ReasonPhrase:Internal Server Error.`当我尝试编译它时它给了我一个“”。奇怪的是，对于同事来说，完全相同的工作却没有问题。我可以在这里做什么？

**我的 Maven 输出**

```
autosparql-lite$ mvn clean compile
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building AutoSPARQL Lite 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://uk.maven.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
Downloaded: http://uk.maven.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom (5 KB at 9.4 KB/sec)
Downloading: http://uk.maven.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar
Downloaded: http://uk.maven.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar (23 KB at 57.3 KB/sec)
Downloading: http://s1.semanticscience.org:8080/nexus/content/groups/public/com/extjs/gxt/2.2.5/gxt-2.2.5.pom
Downloading: http://s1.semanticscience.org:8080/nexus/content/groups/public/uk/ac/shef/wit/simmetrics/1.6.2/simmetrics-1.6.2.pom
Downloading: http://s1.semanticscience.org:8080/nexus/content/groups/public/woodstox/wstx-api/3.2.0/wstx-api-3.2.0.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.091s
[INFO] Finished at: Thu Apr 12 15:45:28 CEST 2012
[INFO] Final Memory: 14M/209M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project autosparql-lite: 
Could not resolve dependencies for project org.dllearner:autosparql-lite:war:1.0-SNAPSHOT: 
Failed to collect dependencies for [com.google.gwt:gwt-servlet:jar:2.3.0 (compile), com.google.gwt:gwt-user:jar:2.3.0 (provided), net.sf.ehcache:ehcache:pom:2.5.0 (compile), junit:junit:jar:4.8.1 (test), com.extjs:gxt:jar:2.2.5 (compile), org.dllearner:components-ext:jar:1.0-SNAPSHOT (compile), commons-configuration:commons-configuration:jar:1.6 (compile)]: 
Failed to read artifact descriptor for com.extjs:gxt:jar:2.2.5: 
Could not transfer artifact com.extjs:gxt:pom:2.2.5 from/to semanticscience.org (http://s1.semanticscience.org:8080/nexus/content/groups/public/): 
Failed to transfer file: http://s1.semanticscience.org:8080/nexus/content/groups/public/com/extjs/gxt/2.2.5    /gxt-2.2.5.pom. Return code is: 500, ReasonPhrase:Internal Server Error. -> [Help 1] 
```

**我的 settings.xml**

```
<settings>
   <mirrors>
    <mirror>
      <id>UK</id>
      <name>UK Central</name>
      <url>http://uk.maven.org/maven2</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings> 
```

PS：

**我的 Maven 版本**

```
Apache Maven 3.0.4 (rNON-CANONICAL_2012-01-24_13-02_root; 2012-01-24 14:02:02+0100)
Maven home: /opt/maven
Java version: 1.7.0_03-icedtea, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-openjdk/jre
Default locale: de_DE, platform encoding: UTF-8
OS name: "linux", version: "3.0.26-1-lts", arch: "amd64", family: "unix" 
```

**他的 Maven 版本**

```
Apache Maven 2.2.1 (rdebian-4)
Java version: 1.7.0
Java home: /usr/lib/jvm/jdk1.7.0/jre
Default locale: de_DE, platform encoding: UTF-8
OS name: "linux" version: "2.6.38-13-generic" arch: "amd64" Family: "unix" 
```

PS：这和我们的maven版本有关系吗？我使用 Maven 3，他使用 Maven 2。这个语义科学服务器来自哪里？

PPS：好的，我终于摆脱了语义科学存储库，方法是从我的 pom.xml 中删除它并删除 ~/.m2/repository 文件夹。现在我得到另一个错误，见下文。

奇怪的是，以下网址可以在浏览器中解析：

*   [http://repo.aduna-software.org](http://repo.aduna-software.org/maven2/releases)
*   [http://repo.aduna-software.org/maven2/releases](http://repo.aduna-software.org/maven2/releases)

但是 ping 不起作用：

```
$ ping http://repo.aduna-software.org
ping: unknown host http://repo.aduna-software.org
$ ping http://repo.aduna-software.org/maven2/releases
ping: unknown host http://repo.aduna-software.org/maven2/releases 
```

但这不是 ping 的错：

```
$ ping www.google.de
PING www-cctld.l.google.com (173.194.69.94) 56(84) bytes of data.
64 bytes from bk-in-f94.1e100.net (173.194.69.94): icmp_req=1 ttl=48 time=13.3 ms
[...] 
```

这是错误：

```
Failed to read artifact descriptor for org.openrdf.sesame:sesame-sail-memory:jar:2.4.0: Could not transfer artifact org.openrdf.sesame:sesame-sail-memory:pom:2.4.0 from/to aduna-software-release-repo (http://repo.aduna-software.org/maven2/releases): repo.aduna-software.org: Der Name oder der Dienst ist nicht bekannt: Unknown host repo.aduna-software.org: Der Name oder der Dienst ist nicht bekannt 
```

我尝试了`http://wiki.tuxtorials.de/wiki/Ping:_unknown_host`告诉我的并做了

```
echo "echo \"hosts:      files dns\" > /etc/nsswitch.conf" | sudo sh 
```

但这也无济于事。

好的，我不知道为什么，但现在它对我有用。但我想知道为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:12:40.523

您必须在某处配置了一个 Maven 代理，名称为`http://s1.semanticscience.org:8080/nexus/`

可能在您的其中一个 settings.xml 文件中，`$HOME/.m2`或者`$MAVEN_HOME/conf/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:13:26.197

当 Maven 尝试从那里检索 gxt-2.2.5 时，Nexus 服务器似乎回复了错误 500。我会再试一次，如果它仍然不起作用，请检查浏览器中的 URL，并可能与该 Nexus 安装的管理员交谈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T13:10:59.917

您正在尝试`com.extjs:gxt:pom:2.2.5`从[http://s1.semanticscience.org:8080/nexus/content/groups/public/com/](http://s1.semanticscience.org:8080/nexus/content/groups/public/com/)下载，但在 Nexus 存储库中不可用。

我怀疑您的同事一定是从另一个存储库中检索该工件，但您不是。查看他可能已配置的任何其他存储库，或者您遗漏的任何其他存储库。

# math - 跟踪移动值的平方根

> ID：10125293
> 
> 赞同：7
> 
> 时间：2012-04-12T14:10:04.513
> 
> 标签：math, iteration, estimation, approximation, sqrt

我有一个高频运行的控制回路，需要在每个周期计算一个平方根。典型的平方根函数可以正常工作，但会花费过多的时间。由于我取平方根的值在每个循环中变化不大，我想找到一个迭代平方根，它会收敛，然后跟踪正确的结果。这样我可以在每个时间步进行一次迭代，而不是多次。

问题是当输入发生变化时，我见过的所有迭代平方根方法都可能会失败。特别是当输入变为零然后再次增加时，看起来会有问题——这些方法不喜欢从猜测零开始。

我的输入范围是 0-4.5，我需要大约 0.01 的精度，因此使用 0.01 的增量/减量可能需要很长时间 - 我希望它大部分在 10 个周期或更短的时间内收敛。

仅供参考，我使用的是 16/32 位定点，输入是 16 位 q12。它在微控制器上，所以我对使用 1K 查找表不感兴趣。代码也是从 simulink 模型生成的，它们的查表功能相当多的开销。

有一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:15:54.407

0-4.5 的范围相当小。精度为 0.01，这只有 450 次可能的计算。您可以在编译时将它们全部计算为常量，并在运行时进行查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:18:11.367

如果您提前知道要处理的范围，我建议您使用查找表。生成一个数组或哈希表（取决于您使用的语言）到您需要的精度级别，并在需要您的根时参考它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T14:37:43.097

我尝试了二阶泰勒展开`sqrt(x)`并得到以下结果

如果`y=sqrt(x)`你`y_c = sqrt(x_c)`已经知道了：

```
t = x-3*x_c;
y = (12*x_c*x_c-t*t)/(8*y_c*y_c*y_c); 
```

越大`x`近似越好。在最坏的情况下，`x_c=0.01`结果`x=0.02`与`0.1375`实际结果相比，`sqrt(0.02)=0.1414`或者其差异`0.0039`为 under `0.01`。

我测试了代码`C#`并看到了稳定的`33%`加速与`Math.Sqrt()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T20:15:56.867

您可以使用一杆哈雷方法。它具有三次收敛性，因此如果值略有移动，则应该非常精确：

```
x_{n+1} = x_n * (x_n^2 + 3Q) / (3 x_n^2 + Q) 
```

这三次收敛到`sqrt(Q)`。

*参考： http: [//www.mathpath.org/Algor/squareroot/algor.square.root.halley.htm](http://www.mathpath.org/Algor/squareroot/algor.square.root.halley.htm)*

# jquery - jQuery ajax根据ID加载信息

> ID：10125294
> 
> 赞同：0
> 
> 时间：2012-04-12T14:10:04.580
> 
> 标签：jquery, asp.net, ajax

我想使用 .load 根据从数据库中提取项目的另一个页面来更改 div 的文本。本质上，我有 Ajax/popup.aspx?pID=23 它带回了一个带有 h2 和

文本

我将使用 .load 将文本从 div 中交换出来。这是我目前拥有的：

```
 $(document).ready(function () {
        if ($(".CompanyType").length > 0) {

            $('.CompanyType').click(function () {
                $(".BuildingSize").empty();
                $(".BuildingSize").load("Ajax/popup.aspx" + "?pID=" + *WHAT TO PUT HERE*);
            });
        }

    }); 
```

我的问题是我通常会使用类似 $(this).attr("value") 的东西来声明 pID，因为我只从下拉列表中做过。如何为图像分配值。（companyType 是图像）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:14:12.227

如果你有一个`<input type="hidden" id="myIdHidden" val="23" />`

你可以 ：

```
$(document).ready(function () {
    if ($(".CompanyType").length > 0) {

        $('.CompanyType').click(function () {
            $(".BuildingSize").empty();
            $(".BuildingSize").load("Ajax/popup.aspx" + "?pID=" + $('#myIdHidden').val();
        });
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:14:42.380

我想你正在寻找这个

```
$(".BuildingSize").load("Ajax/popup.aspx" + "?pID=" + $(this).attr("id")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:16:36.857

使用 HTML5`data-*`属性，如下所示：

```
<img src="yourimgsrc" class="companyType" data-id="yourpID"/> 
```

然后，在您的代码中，您将执行以下操作：

```
$(document).ready(function () {
    $('.CompanyType').click(function () {
        $(".BuildingSize").empty();
        $(".BuildingSize").load("Ajax/popup.aspx" + "?pID=" + $(this).data('id'));
    });
}); 
```

请注意，我已经删除了代码中的长度检查，因为它是不必要的 - jQuery 会自行处理。`empty()`我也认为您在调用之前不需要元素`.load()`- 它应该替换而不是附加加载的内容。

# html - 由粗体文本确定的容器宽度

> ID：10125297
> 
> 赞同：2
> 
> 时间：2012-04-12T14:10:12.213
> 
> 标签：html, css

`ul`我正在使用 a和 float制作带有菜单的网页`li`。为了将活动页面与其他页面区分开来，以及当我将鼠标悬停在链接上时，文本变为粗体。

我遇到的问题是，当文本变为粗体时，它会推动菜单中的所有内容。（见：http: [//jsfiddle.net/tVDaf/](http://jsfiddle.net/tVDaf/)）

我想到的一种可能的解决方案是通过粗体文本的大小来确定每个菜单项的宽度，但我不知道这是否可能（至少，不使用 javascript）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:19:03.090

我可以为您看到三个选择。最后一个可能是你最好的选择：

1.  使用 JavaScript
2.  使用等宽字体
3.  `li`在标签上设置宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:20:26.257

唯一真正做到这一点的方法是将每个 li 设置为一定的宽度，因为现在它被设置为其中锚点的宽度。在锚点上加粗通常不是一个好习惯，而是改变颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:25:13.373

一个快速肮脏的黑客（逃避javascript），[尝试减少悬停时的填充](http://jsfiddle.net/tVDaf/3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:25:47.990

如果你不能设置宽度，那么这意味着宽度会随着文本变粗而改变。没有办法避免这种情况，除非通过修改每个状态的填充/边距等妥协。

如果它帮助您在此处投票支持他的评论，则此答案的所有学分均归功于 Andrew Vit： [Inline elements shift when made bold on hover](https://stackoverflow.com/questions/556153/horiz-css-menu-text-shifting-on-bold-hover)

并且请在发帖前搜索论坛，因为我已经看到这个来了很多

# jquery - 无限滚动和 facebook 评论

> ID：10125299
> 
> 赞同：0
> 
> 时间：2012-04-12T14:10:14.303
> 
> 标签：jquery, facebook, infinite-scroll

我有一个 tumblr 博客，每个帖子都添加了 facebook 评论。

我也在使用infiniteScroll。

当浏览器滚动并且内容滚动时，一切都必须再次初始化，那么我该如何重新初始化 facebook 评论呢？

这是我的代码和无限滚动的回调

```
 function initialiseDescriptions(){
        $(".description").each(function(){

            $(this).click(function(){
                //alert();
                var postId = $(this).find(".id")[0].value;

                    $.openDOMWindow({ 
                        windowSourceID:'#post-' + postId,           
                        windowPadding:20,  
                        windowBGColor:'#fff',
                        overlayOpacity: 60,  
                        borderSize:'0', 
                        height:710,
                        width: 410,
                        anchoredSelector:'.defaultDOMWindow'
                    }); 

                    return false;
            })
        });

    //Pretty sure I need to reinitialize facebook comments in here but the following code doesn't work

$("<div id='fb-root'></div>'.appendTo("body");
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

        }

    $(window).load(function () {

        initialiseDescriptions();

        var $content = $('#content');

        if($content.infinitescroll) {

            $content.masonry({
                itemSelector: '.posts',
                //columnWidth: 235,
                isAnimated: true
            }),    
            $content.infinitescroll({
                navSelector    : 'div#pagination',  
                nextSelector   : 'div#pagination div#nextPage a', 
                itemSelector   : '.posts',
                loading: {
                    finishedMsg: '',
                    img: 'http://static.tumblr.com/dbek3sy/pX1lrx8xv/ajax-loader.gif'
                },
                bufferPx       : 500,
                debug          : false,
            },
            // call masonry as a callback.
            function( newElements ) {
                var $newElems = $( newElements );
                $newElems.hide();
                // ensure that images load before adding to masonry layout
                $newElems.imagesLoaded(function(){
                    $content.masonry( 'appended', 
                        $newElems, true,
                        function(){$newElems.fadeIn();} 
                    );

                initialiseDescriptions();

                });
            });
        }else{
            $content.masonry({
                itemSelector: '.posts',
                //columnWidth: 235,
                isAnimated: true
            });
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:04:04.463

经过几个小时的研究，我设法理解了这个问题（我在使用 Infinite Scroll 和 FB 的 Like 框时遇到了这个问题）。Infinite Scroll 确实创建了正确的 HTML 标签，但问题是如果 Facebook 没有解析这些小部件，它们仍然不会显示在浏览器中。现在这变得复杂了：如果你只是调用`FB.XFBML.parse()`你的回调函数，页面上的所有小部件都将被重新加载。这很重，根本不是最佳选择，如果您的页面上有很多小部件，它会使您的页面看起来像是损坏了。我想出的解决方案是只解析最新的元素。我是这样做的：

```
 <script type="text/javascript">
        $('#content').infinitescroll({
            navSelector  : "div.navigation",            
                // selector for the paged navigation (it will be hidden)
                nextSelector : "div.navigation a:first",    
                // selector for the NEXT link (to page 2)
                itemSelector : "#content div.post",
                // selector for all items you'll retrieve
                debug: true
                },
                function(arrayOfNewElems) {
                    for(var i=0;i<arrayOfNewElems.length;i++)
                        FB.XFBML.parse(arrayOfNewElems[i]);
                }
            );
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-14T02:00:04.840

是的！我只添加了 FB.XFBML.parse(); 在成功功能上，它对我有用！

# cobol - How to display single quote in cobol

> ID：10125302
> 
> 赞同：2
> 
> 时间：2012-04-12T14:10:26.653
> 
> 标签：cobol

I want to display these words using display statement **Company's Policy** But if i use so, it is considering the words as variables. I've tried using

```
DISPLAY "COMPANY'S POLICY"
DISPLAY 'COMPANY\'S POLICY' 
```

But none worked. How escape this single quote?

sample code:

```
DFHMDF POS=(1,23),LENGTH=30,            
   INITIAL="company's policy"
   ATTRB=PROT 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T14:59:32.487

引用转义在 COBOL 中的工作方式与在许多其他语言中一样。尝试：

`DISPLAY 'COMPANY''S POLICY'`

一行中的两个撇号表示单个文字撇号字符。或者：

`DISPLAY "COMPANY'S POLICY"`

使用引号作为外部字符串分隔符，允许您在文字中使用未转义的撇号

在 DFHMDF（严格来说，这不是 COBOL）中，您只能使用撇号作为文字分隔符。在这里，您需要连续使用两个撇号。

```
 DFHMDF POS=(1,23),LENGTH=30,                                X            
                INITIAL='company''s policy',                          X
                ATTRB=PROT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:17:12.397

理想情况下，这必须工作

```
DISPLAY "COMPANY'S POLICY" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:07:06.983

Enterprise COBOL 编译器支持混合引用。

这些中的任何一个都可以：

显示'他说，'你好''。显示“他说，”“你好”“”。

显示“我累了”。显示“我累了”。

QUOTE/APOST 选项与比喻常数 QUOTE(S) 有关，它始终可以用作备份选项。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T20:16:24.077

这看起来像一个 BMS 宏调用。您将需要使用双撇号。

显示“公司政策”

或者

DFHMDF POS=(1,23),LENGTH=30,
INITIAL='公司'的政策' ATTRB=PROT

您还可以使用 COBOL 比喻常量（如果 APOST 编译器选项打开）：

显示“公司”报价“政策”

# asp.net - 窗体视图不显示

> ID：10125308
> 
> 赞同：5
> 
> 时间：2012-04-12T14:10:39.933
> 
> 标签：asp.net, formview

我整天都在试图解决这个问题 - 我有一个`FormView`带有一些文本字段和一个`GridView`带有几列的。出于某种原因，我的`FormView`不显示，但`GridView`

我的 .aspx 文件如下：

`FormView`：

```
<asp:FormView ID="frmPurchases" runat="server" DataKeyNames="ID"  DataSourceID="dsPurchases" DataMember="DefaultView" Width="100%" SkinID="formSkinPP" >
    <ItemTemplate>
        <asp:Label id="lblApproval" runat="server" Text="NOT APPROVED: the guids do not match...."></asp:Label>
        <br /><br />
        <div style="width:800px;padding:0px 0px 10px 0px;">
            <div style="float:left;width:400px;">
                <div style="float:left;width:100px;">Reference</div>                                  
                <div style="float:left;">
                    <asp:TextBox ID="txtReference" CssClass="TextBox" runat="server" Width="237px" ValidationGroup="Group1" Text='<%# Bind("SupplierReference") %>'></asp:TextBox><br />
                </div>
            </div>

        <div style="width:800px;padding:0px 0px 10px 0px;">
            <div style="float:left;width:400px;">
                <div style="float:left;width:100px;">Date</div>                                  
                <div style="float:left;">
                    <telerik:RadDatePicker DatePopupButton-CssClass="datePopUp" Width="260px" id="radDate" SelectedDate='<%# Bind("Date") %>' DateInput-BorderWidth="1px" DateInput-BorderColor="#7F9DB9" Runat="server" MinDate="2000-01-01">                                                    
                        <DateInput runat="server" DateFormat="dd/MM/yyyy" Width="260px" BorderColor="#7F9DB9" BorderWidth="1px" InvalidStyleDuration="100">
                        </DateInput>
                    </telerik:RadDatePicker>
                </div>
            </div>
        </div>

        <div style="width:800px;padding:0px 0px 10px 0px;">
            <div style="float:left;width:400px;">
                <div style="float:left;width:100px;">Type</div>                                  
                <div style="float:left;">
                    <asp:TextBox ID="txtType" runat="server" Width="240px" Text='<%# Bind("Type") %>'                            
                     ValidationGroup="Group1"></asp:TextBox><br />
                </div>
            </div>
        </div>

         <div style="width:800px;padding:0px 0px 10px 0px;">
            <div style="float:left;width:400px;">
                <div style="float:left;width:100px;">PO Number</div>                                  
                <div style="float:left;">
                    <asp:TextBox ID="acPONumber" runat="server" Width="240px" Text='<%# Bind("PONumber") %>'></asp:TextBox><br />

                </div>
            </div>
        </div>

         <div style="width:800px;padding:0px 0px 10px 0px;">
            <div style="float:left;width:400px;">
                <div style="float:left;width:100px;"><asp:Label ID="lblEstimatedAmount" runat="server" Text="Estimated Amount"></asp:Label></div>                                  
                <div style="float:left;">
                  <asp:TextBox ID="acEstimatedAmount" runat="server" Width="240px" Text='<%# Bind("Rate") %>'></asp:TextBox><br />                               
                </div>
            </div>
        </div>
        </div>
    </ItemTemplate>
</asp:FormView> 
```

`GridView`：

```
<asp:GridView ID="gridSupplierPurchasesDetail" DataSourceID="dsPurchasesDetail" runat="server" AutoGenerateColumns="False" AllowSorting="True" BorderStyle="Solid" BorderColor="#5E5EAE" BorderWidth="1pt"
CellPadding="5" Font-Names="Helvetica,Arial,Sans-Serif" Font-Size="9pt" DataMember="DefaultView"
SkinID="gridSkin" EmptyDataText="No Supplier Purchases Added to this Reference" 
EnableTheming="False" Width="755px" ShowFooter="True" FooterStyle-VerticalAlign="Top" RowStyle-VerticalAlign="Top">
    <HeaderStyle BackColor="#5E5EAE" ForeColor="White" HorizontalAlign="Left" />                     
    <EmptyDataRowStyle VerticalAlign="Top" />
    <RowStyle VerticalAlign="Top" />
    <FooterStyle VerticalAlign="Top" />
    <Columns>
        <asp:TemplateField HeaderText="Description" SortExpression="Description">                                       
            <ItemTemplate> 
                <asp:TextBox ID="txtDescription" Width="200px" runat="server" Text='<%# Bind("Description") %>'></asp:TextBox> 

            </ItemTemplate> 
        </asp:TemplateField> 
        <asp:TemplateField HeaderText="NetAmount" SortExpression="NetAmount">                                     
            <ItemTemplate> 
                <asp:TextBox ID="txtNetAmount" width="80px" runat="server" Text='<%# Bind("NetAmount") %>'></asp:TextBox> 

            </ItemTemplate> 
        </asp:TemplateField>
        <asp:TemplateField HeaderText="VATRates" SortExpression="VATRates">                                       
            <ItemTemplate> 
                <asp:DropDownList AutoPostBack="true"  
                    ID="ddlVATRates" runat="server"  
                         Width="80px"></asp:DropDownList>

            </ItemTemplate>                                         
        </asp:TemplateField>
        <asp:TemplateField HeaderText="VATAmount" SortExpression="VATAmount">                                         
            <ItemTemplate> 
                <asp:TextBox ID="txtVATAmount" width="80px" runat="server"  Text='<%# Bind("VATAmount") %>' ReadOnly="true"></asp:TextBox> 
            </ItemTemplate> 
        </asp:TemplateField>
        <asp:TemplateField HeaderText="TotalAmount" SortExpression="TotalAmount"> 

            <ItemTemplate> 
                <asp:TextBox ID="txtTotalAmount" width="80px" runat="server" Text='<%# Bind("TotalAmount") %>' ReadOnly="true"></asp:TextBox> 
            </ItemTemplate> 
        </asp:TemplateField>

        <asp:TemplateField HeaderText="PartNumber" SortExpression="PartNumber">                
            <ItemTemplate> 
                <asp:TextBox ID="txtPartNumber" runat="server" class="PartNumber" Width="100px" Text='<%# Bind("PartNumber") %>' ValidationGroup="Group2"></asp:TextBox>
            </ItemTemplate> 
        </asp:TemplateField>                                    
    </Columns>
</asp:GridView> 
```

数据源控件：

```
<asp:ObjectDataSource ID="dsPurchases" runat="server" SelectMethod="GetSupplierPurchasesByID" TypeName="SupplierPurchasesSystem" OldValuesParameterFormatString="original_{0}" >
    <SelectParameters>
        <asp:Parameter Name="SupplierPurchasesID" Type="Int32" DefaultValue="13243" />
        <asp:Parameter DefaultValue="VNE_DB" Name="DataSource" Type="String" />
    </SelectParameters>
</asp:ObjectDataSource>
    <asp:ObjectDataSource ID="dsPurchasesDetail" runat="server" SelectMethod="GetSupplierPurchasesDetails"
        TypeName="SupplierPurchasesSystem" >
        <SelectParameters>
            <asp:ControlParameter ControlID="HiddenField1" DefaultValue="" Name="guid" PropertyName="Value"
                Type="String" />
            <asp:Parameter DefaultValue="VNE_DB" Name="DataSource" Type="String" />
        </SelectParameters>
    </asp:ObjectDataSource>
<asp:HiddenField ID="HiddenField1" runat="server" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T14:23:52.150

老实说，您没有显示的最可能原因是您`FormView`没有从数据源中获得任何回报。[`EmptyDataTemplate`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.emptydatatemplate.aspx)您可以为您创建一个`FormView`以确保。把它放在你之后`</ItemTemplate>`和你之前`</asp:FormView>`

```
<EmptyDataTemplate>
    There is nothing to see here.
</EmptyDataTemplate> 
```

# websocket - Would it be possible to use WebSockets as a poor-mans proxy?

> ID：10125310
> 
> 赞同：0
> 
> 时间：2012-04-12T14:10:43.323
> 
> 标签：websocket

Im thinking a web browser would fetch a document from a server, the document then sets up a websocket to the server, ie communication link.

Would it then be possible for the server to fetch any website/document the user types in and return it over the websocket and perhaps using javascript magic display it? Perhaps in an iframe? Thus the server would act as a proxy.

Why would I do this? For fun.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:40:16.520

如果网页有 javascript，那么当它在服务器上执行时，您将无法复制页面上发生的一切。以及大多数事情都无法做到。据我了解，您想做远程浏览之类的事情，简单的示例是当您在服务器上实现浏览器时，然后将浏览器屏幕上的图像不断发送到客户端。没有交通安全，您实际上会大大增加交通量。您可以发送鼠标输入和键盘输入事件，并使用 websockets 在服务器上处理它们。视频可以使用 mjpeg 完成。客户端只需进行少量计算即可计算视频中的鼠标坐标，以转换为服务器逻辑的真实坐标。

当然没有办法在客户端计算机上节省流量或减少逻辑，除非网页非常繁重，但我看不到任何这种需要的真实例子。

# amazon-web-services - How to fire EC2 instances and upload/run a startup script on each of them?

> ID：10125311
> 
> 赞同：55
> 
> 时间：2012-04-12T14:10:47.260
> 
> 标签：amazon-web-services, amazon-ec2, ec2-ami

I want to automate the launch of a set of Linux EC2 instances.

Basically, I want to write a script/program that would :

*   Instantiate N occurrences of a given AMI of mine.
*   For each started instance, it would upload a customized script and let the script run into the instance.

Using VMWare, I would typically do that using *vmrun* or the Vix SDK.

What are the options in Amazon AWS/EC2?

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-12T16:55:09.280

答案在一定程度上取决于您正在运行的 AMI，因为所提供的功能完全依赖于 AMI。

Amazon Linux AMIS 和官方 Ubuntu AMI 安装了[cloud-init](https://help.ubuntu.com/community/CloudInit)包。您可以通过多种方式触发启动操作，但最符合您的请求的方式（也是我最喜欢的，因为我发明了它）是[用户数据脚本](http://alestic.com/2009/06/ec2-user-data-scripts)的概念。

在启动 EC2 实例时，您可以简单地将任何脚本（以两个字符 #! 开头）作为用户数据传递。它将在实例的第一次启动时以 root 身份运行。

有关其工作原理的具体示例，我在最近的文章中使用了这种精确的技术： [在 EC2 用户数据脚本中上传已知 ssh 主机密钥](http://alestic.com/2012/04/ec2-ssh-host-key)

您还希望使用相同的脚本运行多个 EC2 实例。ec2-run-instances 命令以及相关的 API 和 Web 控制台允许您指定任意数量的实例以使用相同的用户数据开始。例如：

```
ec2-run-instances            \
  --instance-count 10        \
  --user-data-file $MYSCRIPT \
  --key $USER                \
  $SOMEAMI 
```

如果您当前正在运行未安装 cloud-init 的 AMI，您可以执行以下操作之一：

*   切换到安装了 cloud-init 的 AMI，或

*   构建安装了 cloud-init 的自定义 AMI 版本，或

*   编写一个更复杂的包装脚本，记录所有实例启动后的 id，等待所有实例进入运行状态，等待 sshd 接受连接，将启动脚本上传到每个实例，并在每个实例上运行启动脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T08:58:51.203

我有一个教程可以在每次 AWS EC2 启动时运行[的“cloud-init”中运行脚本。](https://stackoverflow.com/a/38479159/4058484)

> *   设置配置文件（AWS CentOS6）和
>     
>     
> *   启动 EC2 时运行脚本

要在 Linux 上设置配置文件，您可以参考[在 AWS Linux 上配置 cloud-init](https://stackoverflow.com/a/23411409/4058484)。

我个人使用基于 Linux AMI 设置的[*AWS VPC/EBS*](https://stackoverflow.com/a/38235022/4058484)，我没有对配置文件进行任何修改，`/etc/cloud/cloud.cfg`但我[在 cloud-init 中的启动脚本](https://stackoverflow.com/a/38186787/4058484)运行良好。

# javascript - 如何将绝对元素水平滚动到我想要的位置？

> ID：10125319
> 
> 赞同：0
> 
> 时间：2012-04-12T14:11:04.937
> 
> 标签：javascript, css, scroll, horizontal-scrolling

如果问题听起来不对，我很抱歉，我不知道如何更清楚地描述我的问题。

我有一个网站（正在开发中）：[http](http://baronettes.tapagecommunication.com) ://baronettes.tapagecommunication.com 如您所见，当滚动或选择菜单上的项目时，窗口滚动但菜单保持在相同的绝对位置。徽标中的小“凹痕”必须以每个部分左侧的圆圈为中心。它适用于所有部分，但不适用于最后一个，因为我不知道窗口的宽度。如果您水平调整窗口大小，您将看到我在说什么。

我正在尝试找到解决此问题的方法，但现在只有 0 个想法。

值得注意的是，我正在使用 localScroll 插件进行滑动。

所以，如果有人有某种想法的开始，请告诉我:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:26:21.077

我会在最右边添加一个适当大小的“假”部分，但不提供此部分的链接。

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:41:37.563

你可以有两组圆，“位置：固定”和“位置：相对”。隐藏所有固定的圆圈，直到它们的位置滚动到，然后动态隐藏相对的圆圈并取消隐藏固定的圆圈，使其看起来像是“卡入”到位。

或者您可以在超宽容器 div 之外创建一个零高度块级元素，并使用 javascript 查找其宽度以估计屏幕宽度（并在调整大小时刷新）。（请注意，除非您手动设置所有内容，例如边距、填充等。浏览器之间的数字会略有不同）

# ipad - Can Images Display the "Open in..." menu on the iPad? How?

> ID：10125321
> 
> 赞同：1
> 
> 时间：2012-04-12T14:11:19.547
> 
> 标签：ipad, jpeg

I have a program that opens PDFs. My program shows up in the "Open In..." menu from emails. However, when I hold down on a picture, the only options that come up are 'Copy' and 'Save Image'. Is there a way to open an image in another program?

# php - PHP：使用 isset 验证带有必需文本字段的表单

> ID：10125323
> 
> 赞同：1
> 
> 时间：2012-04-12T14:11:21.293
> 
> 标签：php, validation, isset

我一直在尝试设置一些东西来检查 HTML 表单，以确保在提交表单（到下一页）之前输入的文本字段至少有 1 个字符。

HTML 表单位于一页上，并流向第二页。然后第二页更新一个文本文件。一切正常，所以我不想改变它。但我需要的是验证器。

我搜索并阅读了许多建议，看到了一些使用 ISSET 的建议，并完成了下面的脚本。

但这不起作用（因为表单总是提交/没有错误消息）。我已经厌倦了许多其他建议（基于我读过的其他教程）。但似乎，无论文本字段是否为空，表单仍然会始终提交。（下一页有一个时间戳，所以我可以知道提交了什么。

有人能告诉我 Isset 在这种情况下是否可以工作吗？如果是这样，我哪里出错了。或者，如果没有，我可以使用什么来获取文本字段的验证器。我宁愿为此使用 PHP，但如果我需要使用 Javascript，这是可能的。

（补充：我认为问题是即使出现以下 $error 消息，它也永远不会出现，因为页面是通过提交按钮自动重定向的。我需要它类似于事件处理程序 - 例如，如果按钮提交点击，检查错误。如果有错误，打印它们。如果没有，提交表单。此代码不这样做）。

第 1 页代码。

```
<?php
if (isset($_POST['submit'])) {
    $error = '';
    if (trim($_POST['topic']) == '') {
        $error = "Please enter a topic<br>");
    }
    if (trim($_POST['outline']) == '') {
        $error = "Please enter an outline<br>";
    }
    if ($error == '') {
        Echo "There are no errors";
    } else {
        echo "$error";
    }
}
?>
<form style="" method="post" action="addtopic2.php">
    Topic:<input name="topic" id="topicbox" maxlength="100" type="text">
    Outline: <textarea input wrap="nowrap" rows="10" cols="120" name="outline">
</textarea><br><input name="submit" value="Submit" type="submit">
</form> 
```

第 2 页代码

```
 <?php
 $b = time (); 
 $c = date("g:i:s A D, F jS Y",$b);
 print "Topic and Outline Submitted at $c";

 $t = "Topic:";
 $o = "Outline:";
 $d = "Time Date:";

 $topic = $_POST['topic'];
 $outline = $_POST['outline'];

 $data = stripslashes("$t $topic | $o $outline | $d $c |\n");

 $fh = fopen("users.txt", "a");
 fwrite($fh, $data); 
 fclose($fh); 
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:16:09.817

你试过`if((is_array($_POST)) && (!empty($_POST)) {...}`吗？

并且最好使用`empty($var)`替代`$var == ''`或`!empty($var)`替代`$var != ''`

例子：

```
<?php
    function arTrim (&$item , $keys) { //trims the string and makes it safe
        if (!is_array($item))
            $item = trim(htmlspecialchars($item));
    }

    array_walk($_POST, 'arTrim'); //apply this to each element in the our POST array

    if((is_array($_POST)) && (!empty($_POST)) {
        $error='';
        if((empty($_POST['topic'])) || (empty($_POST['password'])))
            $error='Please enter a topic<br / >';
        if((empty($_POST['outline'])) || (empty($_POST['password'])))
            $error='Please enter an outline<br />'; 
        if(empty($error)) 
            echo '<a href="addtopic2.php">text of the link</a>';
        else
            echo $error;
    }
?> 
```

并且不要忘记在键入键时使用引号：`$_POST['password']`等`$_POST['outline']`。

还有一个建议：不要在没有必要的情况下在 PHP 中使用双引号。最好用单机。因为双精度中的所有文本都将被解析为变量。未优化。

`<br>`是错误的变体，使用`<br />`. `<img />`,`<link />`等情况相同`<meta />`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:31:35.883

这应该这样做

```
<?php

if(isset($_POST['submit'])){

    if($_POST['topic'] == ""){
        $error="Please enter a topic<br>"; 
    }

    if($_POST['outline'] == ""){
        $error="Please enter an outline<br>"; 
    }

    if(isset($error)){
        echo $error;
    }else{
        // Both fields have content in

    }

}

?>
<form style="" method="post" action="addtopic2.php">
Topic:<input name="topic" id="topicbox" maxlength="100" type="text">                
Outline: <textarea input wrap="nowrap" rows="10" cols="120" name="outline">
</textarea><br><input name="submit" value="Submit" type="submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:30:56.053

对于初学者，在验证数据时，请**始终**将客户端验证（如 Javascript）视为一种精妙的方法——您必须始终对数据执行服务器端验证 (PHP)。

PHP`isset()`旨在与字符​​串类型变量一起使用：

```
$password = trim($_POST['password']);
$topic = trim($_POST['topic']);
$outline = trim($_POST['outline']);

if(!isset($password)) {
    //is empty
} 
```

PHP`empty()`旨在与数组一起使用，不应用于检查字符串类型的变量。

资料来源：[Zackstronaut：小心使用 PHP Empty()](http://www.zachstronaut.com/posts/2009/02/09/careful-with-php-empty.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:34:19.263

Javascript 提供更快的响应，如果您使用的是 HTML5，它可以更快：

对于 html5，您可以尝试以下操作：

```
<input type="text" id="topicbox" name="topic" required="required" data-minlength="6" /> 
```

为此，在 IE 上使用此标题：

```
<!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 
```

如果您更喜欢 javascript，我建议您使用 jquery 插件：[jquery.validation](http://docs.jquery.com/Plugins/Validation)

# c# - Get OS-Version in WinRT Metro App C#

> ID：10125324
> 
> 赞同：27
> 
> 时间：2012-04-12T14:11:26.417
> 
> 标签：c#, operating-system, windows-8, microsoft-metro, windows-runtime

I'm programming a Metro Style App with C# and the Visual Studio 11 Beta. Now I want to get the OS-Version of the OS. How can I get this?

I found out how to do it in "normal" Applications. There you take the Environment-Class with the attribute OSVersion but in .NET Core there isn't this attribute

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T16:03:03.797

您可以通过使用设备 API 获取低级系统组件的驱动程序版本号来获取操作系统版本号，但可能存在不正确的风险。

公认的答案是正确的，因为您不应该将功能与版本号联系起来，但有正当理由使用它，例如分析 - 了解很多用户何时已经在使用新版本并且您应该是很有用的考虑更新应用程序以利用它。

[https://github.com/AttackPattern/CSharpAnalytics/blob/master/Source/CSharpAnalytics/SystemInfo/WindowsStoreSystemInfo.cs](https://github.com/AttackPattern/CSharpAnalytics/blob/master/Source/CSharpAnalytics/SystemInfo/WindowsStoreSystemInfo.cs)有更多信息和示例代码（披露，我写了那个代码）

注意：代码已更新，现在可以处理自定义/多个 HAL 等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T14:19:57.107

对于新应用程序，您应该检查特定功能，而不是操作系统版本。

据我所知，没有理由检查操作系统版本，因为 Metro 应用程序仅适用于 win 8。

**编辑：**商店应用程序现在可在多个 Windows 版本上使用，但仍建议测试功能而不是操作系统版本。创建项目时将最低操作系统版本设置为项目的构建目标。

**编辑 #2：**如果您对跟踪应用程序安装库中的操作系统版本感兴趣，您可以从针对 Windows 8.1 的应用程序开始将 Application Insights 集成到您的项目中。这是开始使用它的方法：

[http://azure.microsoft.com/en-us/documentation/articles/app-insights-windows-get-started/](http://azure.microsoft.com/en-us/documentation/articles/app-insights-windows-get-started/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-19T11:38:59.533

事实上，有一个简单的解决方法可以在其用户代理形式 (Windows NT 6.x) 中获取 Windows 版本字符串。

对于想知道我们为什么要这样做的人：收集有关我们用户 Windows 版本的统计信息并做出有关向后兼容性的明智决策。

```
public class OsVersion
{
    public static Task<string> GetAsync()
    {
        var t = new TaskCompletionSource<string>();
        var w = new WebView();
        w.AllowedScriptNotifyUris = WebView.AnyScriptNotifyUri;
        w.NavigateToString("<html />");
        NotifyEventHandler h = null;
        h = (s, e) =>
        {
            try
            {
                var match = Regex.Match(e.Value, @"Windows\s+NT\s+\d+(\.\d+)?");
                if (match.Success)
                    t.SetResult(match.Value);
                else
                    t.SetResult("Unknowm");
            }
            catch (Exception ex) { t.SetException(ex); }
            finally { /* release */ w.ScriptNotify -= h; }
        };
        w.ScriptNotify += h;
        w.InvokeScript("execScript", new[] { "window.external.notify(navigator.appVersion); " });
        return t.Task;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T22:40:47.613

根据其他发帖者的回答 - 没有 API 来测试 OS 版本，但会有 API 来查询特定类型的版本。这意味着您可能无法使用当前代码判断 Windows 未来版本的版本，但如果您不断更新代码 - 您可以根据特定类型是否可用来确定操作系统版本。现在，您假设使用的是当前版本的 Windows 8。

另外，我还没有尝试过，但是您可以通过与 JavaScript 进行互操作并解析“navigator.appVersion”来获得它。

# .htaccess - Use the Magento Test Automation Framework (MTAF) on a site with htaccess protection?

> ID：10125326
> 
> 赞同：0
> 
> 时间：2012-04-12T14:11:32.500
> 
> 标签：.htaccess, magento, phpunit

I want to run a test on a Magento installation that is protected with a htaccess password. How can I do that without entering the password each time the test is started?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:08:31.553

在您的 .htaccess 文件中设置密码 prodection（基本身份验证）应保护的时间。

例如，下面的配置 (.htaccess) 将： 允许从 IP 地址 123.45.67.12 进行访问，但在从任何其他 IP 地址请求时限制访问（提示输入用户名和密码）。

```
AuthType Basic
AuthName “Sorry, Restricted Area!”
AuthUserFile /path/to/your/.htpasswd
Require valid-user
Allow from 123.45.67.890
Satisfy Any 
```

# css - 使用 CSS 显示徽标的正确方法是什么？

> ID：10125335
> 
> 赞同：16
> 
> 时间：2012-04-12T14:12:07.197
> 
> 标签：css, graphical-logo

我最近一直在学习 CSS，我正在看的教程系列说显示徽标图像的最佳方法是将文本包装在 H1 标签中，然后将该标签的 CSS 样式设置为背景图像，并带有文本缩进 -99999 或类似的大数字。

这似乎令人难以置信的hackish和不雅。似乎使用 CSS 隐藏文本对于 SEO 来说是一个很大的禁忌（因为通过 CSS 隐藏文本是不受欢迎的）。

我还读到应该避免使用 img，因为 logo 本身并不是真正的内容，所以应该降级到编码的设计方面（即 CSS）。

目前对此有何共识？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T14:20:44.777

显示徽标的正确方法是使用`<img>`元素。如果你没有研究过[logos 和 logotype](http://en.wikipedia.org/wiki/Logo)，你可能没有意识到 logo 有它自己的语义并且需要以非常具体的方式呈现。`[alt]`它也可能有一个必需的解释，这是属性中应该使用的。

如果所需的解释合法地是页面中的标题，则将其添加到`<h#>`元素中在语义上是正确的：

```
<h1>
    <img src="logo.png" alt="Foo Co.: Where everyone can fizz the buzz" />
</h1> 
```

通常，徽标用作链接，因此很常见：

```
<a href="/">
    <img src="logo.png"... />
</a> 
```

此外，可以强调徽标（可以是`<strong>`或`<em>`取决于程度）：

```
<strong>
    <a href="/">
        <img src="logo.png" ... />
    </a>
</strong> 
```

* * *

了解徽标的语义。如果您引用的是可口可乐公司，则该品牌的徽标不会，并且如果您换掉或删除样式表也不应该更改。大多数人从语义上理解，

![可口可乐标志](../Images/c193de8a3d4897d03d870ebe8d28c128.png)

不同于

![百事可乐标志](../Images/45f7e9fe0445f1836d3e3c4d4e96d947.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T14:15:15.650

我总是在图像周围加上一个锚标签：

```
<a href=""><img src=""></a> 
```

或将锚标记创建为块并设置背景图像

```
<a class="logo" href="">Logo</a>

.logo { 
         background: url("/path") no-repeat; 
         width: 100px; 
         height: 100px; 
         display: block; 
         text-indent: -9999px;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T14:22:10.453

您应该始终使用`img`来显示徽标。使用`h1`和使用徽标作为背景是一种非常糟糕的做法，应该避免。您的徽标是内容，而不是`h1`.

哈里·罗伯茨在他的帖子中清楚地解释了这一点——[你的标志是一个图像，而不是一个`<h1>`](http://csswizardry.com/2010/10/your-logo-is-an-image-not-a-h1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T14:18:17.293

我认为**这并不重要**。有许多不同的方法可以做到这一点，它们都得到支持。他们都工作。它们中的大多数都是搜索引擎友好的并且完全可以访问。

我会做这样的事情：

```
<h1><a href="/"><img src="rsc/logo.jpg" alt="Frobozz Company"></a></h1> 
```

搜索引擎、文本模式浏览器和屏幕阅读器看到 alt 文本，其他人看到徽标图像。

# oracle - Enabling Oracle Constraint on Multiple Tables

> ID：10125337
> 
> 赞同：1
> 
> 时间：2012-04-12T14:12:09.350
> 
> 标签：oracle, indexing, constraints

For my business app using Oracle 11.2.0 as the backend, we're going to have a series of tables Foo{0}, where {0} is a date, and there will be one table for each month end (long story on why this is required, but those are my marching orders). Each table will have a primary key constraint and an index, using the same columns for all tables. Instead of defining a constraint and index for all tables, is it possible to create one of each and apply those to all tables? Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:20:27.853

不，如果您想要 12 个单独的表，则需要定义 12 个单独的主键约束（如果您不希望 Oracle 在创建约束时自动创建索引，则需要定义 12 个单独的索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:30:43.007

在 Oracle 11.2 中创建这 12 个表没有充分的理由。

我建议：

*   创建一个表。分成12个
*   使用关联的全局索引创建单个主键约束
*   如果需要与现有代码兼容，则在此表上创建视图`Foo1`，`Foo2`... `Foo12`

# android - android-如何在选项卡中使用 startActivityforResults()

> ID：10125338
> 
> 赞同：0
> 
> 时间：2012-04-12T14:12:11.287
> 
> 标签：android, android-tabhost

我是标签概念的新手。在我的应用程序中，一个选项卡可以导航到多个活动。在某些情况下，我需要子活动的结果，因此我想使用该`startActivityforresult()`方法。我试过我没有得到请任何人都可以帮助我。

代码

```
Intent intent = new Intent(getParent(), RB_StateMList.class);       
startActivityForResult(intent,GET_SEL_STATES_LIST); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:18:43.113

您需要在您的or中覆盖**onActivityResult**以便从其他活动接收结果。见下文：`Activity``ActivityGroup`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
} 
```

# jquery - 带有 Superfish 的 bgIframe，项目位于 Silverlight 对象后面

> ID：10125340
> 
> 赞同：1
> 
> 时间：2012-04-12T14:12:18.057
> 
> 标签：jquery, silverlight, superfish, bgiframe

我正在使用 Superfish 菜单和 bgIFrame 插件。我在几页上有 Silverlight 对象。菜单位于对象下方，即使我在[本示例](http://users.tpg.com.au/j_birch/plugins/superfish/#sample2)中添加了 bgIFrame （它发生在 IE9 和 Chrome 上，我还没有检查其他浏览器）。我知道您可以将 IsWindowless 设置为 true，但出于多种原因，我不想这样做。

当我使用 ASP.Net 菜单控件时，它确实出现在对象上，所以我知道这是可能的。bfIFrame 是否没有以正确的方式使用 IFrame 来实现这一点。有没有 bgIFrame 的替代品？

[编辑：我在Github 页面](https://github.com/brandonaaron/bgiframe/issues/8)上交叉发布了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:52:11.457

I was looking at the pull requests on GitHub and [request #7](https://github.com/brandonaaron/bgiframe/pull/7) seems to fix the issue. For now I downloaded the forked version.

Edit: This issue was completed in February, 2013\. [https://github.com/brandonaaron/bgiframe/issues/8](https://github.com/brandonaaron/bgiframe/issues/8)

# visual-studio-2010 - 在报表设计器中使用表达式时出错 - Visual Studio 2010

> ID：10125344
> 
> 赞同：0
> 
> 时间：2012-04-12T14:12:28.617
> 
> 标签：visual-studio-2010, reporting-services, string-concatenation

在 VS 2010 的报表设计器中，我在 ASP.NET Web 应用程序中设计了一个本地报表 (.rdlc)。在此报告中，我可以显示数据集的字段（例如：

`=Fields!CONTRACT_NO.Value), constants, expressions with constants (="One" & " Two")`,

但是当我尝试将字段与字符串连接时

```
(="Number " & Fields!AC_TYPE.Value), 
```

此字段显示在报告中：#Error。

我尝试将字段显式转换为字符串：`="Number " & CStr(Fields!AC_TYPE.Value)`

，但我有同样的错误。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:54:27.430

出于连接目的，您可以使用`+`符号代替 `&`

例如：

```
=IIf(Fields!Itemamount.Value<0,"("+""+Format(Abs(Fields!Itemamount.Value),"N")+""+")",Format(Fields!Itemamount.Value,"N")) 
```

像这样。

# c++ - OpenCV 中的转换

> ID：10125349
> 
> 赞同：0
> 
> 时间：2012-04-12T14:12:42.587
> 
> 标签：c++, opencv

我有一个问题，我有一个由圆圈组成的图案图像。所以我找到了带有 cv::findContours 函数的圆圈，但问题是要对这些圆圈进行排序。我附上 te 图案图像： ![在此处输入图像描述](../Images/4c040d8d8290047f42d12524967777a7.png)

所以现在我想从左到右以及从最后一行到顶部对行中的点进行排序。问题是属于不同行的某些点具有相同的 Y，因此我无法对它们进行排序。使用 gimp 我试图“纠正”图像以获取属于同一行且具有相同 Y 的点。您有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:45:11.307

如何选择最左边的点作为起点。然后，对于每个点，找到与前一个具有相同（或每隔一次不同）颜色的垂直距离最近的点？您也可以使用边缘检测来获取框的边界，这样可以确保您不会越过这些框。

# java - 为什么不使用更确定大小的类型来实现 BitSet？

> ID：10125354
> 
> 赞同：0
> 
> 时间：2012-04-12T14:12:58.937
> 
> 标签：java, bits, primitive-types, bitset, bitsets

[**此处**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的 Java 参考表明布尔类型虽然用“位”信息表示，但没有精确定义的大小。相比之下，其他类型似乎表明定义了大小。例如，一个**int**是 32 位，故事结束。

当我们查看[**BitSet**](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)的规范时，我们可以看到它由**布尔**值组成。通过上面的参考，这似乎表明**BitSet**的“大小”是未定义的——毕竟它是由**布尔值组成的。**果然，文档指定：

> 请注意，大小与位集的实现有关，因此它可能会随着实现而改变。

所以我的问题是，为什么不使用另一种精确定义的数据类型来实现**BitSet ？**例如，如果我们使用一个字节，我们可以保证 8 位的大小，并且我们不会有大小可能不是我们想象的那样的模糊感觉。确实，大小必须能被 8 整除，但至少这种方式似乎更具大小确定性。

如果我们有一个绝对不能超过某个内存容量的系统，那么拥有一个在大小方面精确的**BitSet实现似乎很有用。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:23:45.460

我认为您在概念上被方法签名使用布尔值这一事实所困扰。

考虑单个位的最简单方法是关闭/打开，因此布尔值 true/false 是对其进行建模的便捷方法。另一件事完全是`BitSet`内部存储，如果您查看[源代码](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/BitSet.java.html)，它使用`long`数组并使用位掩码来旋转各个位。

因此，它的大小与`BitSet`使用的位数密切相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:15:26.173

部分`BitSet`原因在于它的长度在概念上是无限的——我们可以用它来操作任意多个位。我们关心的不是内存消耗，而是语义，`size`只是内存消耗的一个指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:23:34.223

A`BitSet`不一定由布尔值组成，但会将位转换为布尔值以便于使用（而不是必须检查 0 或 1）。

除此之外，实现很可能会使用某种数据类型，但取决于架构，可能会使用一堆 8 位、16 位、32 位或 64 位整数（或其他东西）来存储位。在大多数系统中，内存限制并不那么难，因此逻辑大小为 5 且实际大小为 1 或 8 个字节的位集并不那么重要。

诚然，您可以仅使用字节来实现位集，但可能有理由遵守平台的内存对齐（可能超过一个字节）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T14:24:00.267

你让它听起来像 BitField*需要是*一个实际的数组`boolean`，事实并非如此；例如，您可以在 JDK 的源代码中查找当前实现。这是一个片段：

```
/**
 * The internal field corresponding to the serialField "bits".
 */
private long[] words; 
```

因此，在这种情况下，使用了一个 s 数组，`long`并通过位掩码和移位访问这些位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T14:26:02.433

与大多数原语不同，Java 对象的字节大小没有很好地定义，并且依赖于实现，甚至可能由于 JIT 编译和 JVM 内部使用的不同技巧而在应用程序运行时发生变化。即使在 Sun JVM 版本之间（4 对 1 字节）， a 的大小`boolean`也发生了变化，如果我没记错的话，甚至有一段时间单个`boolean`需要 4 个字节，而 N 的数组`booleans`需要大约 N*1 个字节（或者也许是`byte`类型？）。无论如何，变量的逻辑大小或其信息容量可能与JVM分配的物理内存完全不同。

`BitSet`仅在概念上由布尔值组成，实现不需要遵循逻辑布局。实际上，大多数实现将使用字节数组，`BitSet`并且每个值大约只使用一位（但为了允许它增长和一些额外的内务数据存在一些松弛）。

# c# - Lambda 事件处理程序范围

> ID：10125359
> 
> 赞同：4
> 
> 时间：2012-04-12T14:13:05.597
> 
> 标签：c#, delegates, lambda

有人可以给我一个雄辩的，深入的解释为什么可以这样：

```
EventHandler e;

private void foobar(){
     e = new EventHandler((o, s) => {
           somectl.LayoutUpdated -= e;
     }
     somectl.LayoutUpdated += e;
} 
```

但这不是：

```
private void foobar(){
     EventHandler e = new EventHandler((o, s) => {
           somectl.LayoutUpdated -= e;
     }
     somectl.LayoutUpdated += e;
} 
```

这也不是：

```
private void foobar(){
    EventHandler e;
    e = new EventHandler((o, s) => {
          somectl.LayoutUpdated -= e;
    }
    somectl.LayoutUpdated += e;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:15:11.977

最后两个不会编译，因为`e`在完成分配之前您无法引用。

第一个有效，因为此限制不适用于字段。

您可以通过将其分配给`null`第一个来使最后一个工作，这样它就会被明确分配。

```
EventHandler e = null;
e = (o, s) => {
      somectl.LayoutUpdated -= e;
};
somectl.LayoutUpdated += e; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:18:06.023

这与 lambda 的关系比您想象的要少。例如，这将失败：

```
int i = i + 1; 
```

就像这样：

```
int i;
if (condition) {i = 0;}
i = i + 1; 
```

或者：

```
int i;
if (condition) {Console.WriteLine(i);}
i = 1; 
```

lambda 表达式失败的原因相同：中间一个是因为你不能在它的声明中引用任何变量，最后一个是因为你不能保证`e`在你尝试在 lambda 中使用它之前已经初始化了它。

第一个示例运行良好，因为*字段*总是被初始化。它们要么在类的构造函数中被赋予一个值，要么它们将自动设置为默认值。如果你想在方法的范围内进行这项工作，你只需要在声明它时分配你的变量。

```
private void foobar(){
    EventHandler e = null;
    e = new EventHandler((o, s) => {
          somectl.LayoutUpdated -= e;
    }
    somectl.LayoutUpdated += e;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:19:06.777

在最后两种情况下，编译器可以检查您是否正在使用 lambda 中未分配的局部变量。在第一种情况下，由于全局变量，编译器无法检查这一点。

# sql - 在 SQL 任务编辑器问题中插入 INTO

> ID：10125368
> 
> 赞同：0
> 
> 时间：2012-04-12T14:13:33.630
> 
> 标签：sql, ssis

我花了 15 分钟试图找到一个可以解决我的问题的帖子，因为它看起来很常见，但我没有运气。

我有一个 SSIS 包，它将一些表从访问 SQL 服务器复制。它的工作很酷。现在我想处理那些 SQL 表。

我在 SQL 任务编辑器中运行的插入出现问题。

```
INSERT INTO TelepromTableNamesInfo (name, date) select ?, getdate() 
```

这 '？' 是一个输入变量。

我得到的错误是这样的：

```
Error: 0xC002F210 at Insert Name, Execute SQL Task: Executing the query "INSERT 
INTO TelepromTableNamesInfo 
(name, date)..." failed with the following error: "An error occurred while 
extracting the result into a 
variable of type (DBTYPE_I4)". Possible failure reasons: Problems with the query,
"ResultSet" property not 
set correctly, parameters not set correctly, or connection 
not established correctly. 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:22:54.273

```
INSERT INTO TelepromTableNamesInfo (name, date) VALUES (?, getdate()) 
```

确保您的输入变量是字符串类型。

# java - 使用 Java 反射，如何将参数化类型的参数传递给方法？

> ID：10125370
> 
> 赞同：1
> 
> 时间：2012-04-12T14:13:45.217
> 
> 标签：java, reflection

假设我有一个方法：

```
public void method(LinkedList<Integer> intList); 
```

我使用反射来获取该方法的java.lang.reflect.Method，并且我想获取ParameterizedType，即。链表<整数>。

不幸的是，使用 Method.getParameterTypes() 我似乎只能得到非参数化的类 Class<LinkedList>。

但是，在我的调试器中，如果我查看 Method 对象，我会看到有一个“签名”字段似乎包含通用信息：

```
(Ljava/util/LinkedList<Ljava/lang/Integer;>;)V 
```

那么如何从 Method 对象中获取 LinkedList 参数化类型呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:16:08.307

使用[`Method.getGenericParameterTypes`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getGenericParameterTypes%28%29). 示例代码：

```
import java.lang.reflect.*;
import java.util.*;

public class Test {

    public void foo(LinkedList<Integer> intList) {
    }

    public static void main(String[] args) throws Exception {
        Method method = Test.class.getMethod("foo", LinkedList.class);
        Type[] parameters = method.getGenericParameterTypes();
        System.out.println(parameters[0]);
    }
} 
```

输出：

```
java.util.LinkedList<java.lang.Integer> 
```

# wordpress - 将超过 6k 的单个页面重定向到新的 url 结构：使用 htaccess 或 http 重定向？

> ID：10125373
> 
> 赞同：1
> 
> 时间：2012-04-12T14:13:51.347
> 
> 标签：wordpress, .htaccess, url, redirect, pagerank

我们正在将一个直接用 html 构建的网站移动到一个新的 wordpress cms。由于该站点主要依赖于谷歌搜索，因此基本不要丢失以前的链接。但这是踢球者：

1) 所有旧 URL 都是以随机方式构建的，每次他想创建一个新页面时，他只需将一个新文件上传到服务器（“somedirectory/page_about_something-4.html”），它们将在 wordpress 中使用全新的方式重新创建网址（“新类别/页面标题/”）。因此，在 htacess 中不可能只有一个正则表达式行，我可能需要每个案例重定向一个案例

2）有超过6000个页面需要重定向。我无法想象拥有 .htaccess 文件会对性能产生什么样的影响。

那么我在这里有什么选择呢？我想我可以简单地将旧文件保留在服务器上，并将它们中的每一个作为单独的 http 重定向，但我担心这可能会影响我们的谷歌页面排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:48:40.503

与其在 .htaccess 中添加 6k 重写规则，不如在这种情况下使用[RewriteMap](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritemap)。[检查此答案](https://stackoverflow.com/questions/8899805/edit-htaccess-with-php/8901022#8901022)作为使用 RewriteMap 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:40:47.070

无论您做什么，请确保您给他们 301 告诉 SEO 它已[永久移动](http://webdesign.about.com/od/http/qt/tip301v302redir.htm)

也看看这个：
[.htaccess 重定向性能](https://stackoverflow.com/questions/209209/htaccess-redirect-performance)

# django - 如何在 Django 表单中选择文件夹？

> ID：10125374
> 
> 赞同：5
> 
> 时间：2012-04-12T14:13:52.270
> 
> 标签：django, forms

有没有一种简单的方法可以让用户从 Django 表单中选择一个文件夹？我想使用与 FileField 相同的小部件，但只允许用户选择一个文件夹，以便我可以处理该文件夹中的所有文件。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T10:25:45.050

这是不可能的，您永远不会从 type="file" 输入按钮收到目录名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-10T10:59:05.300

`FilePathField`在某些情况下，您可以使用内置`allow_files=False, allow_folders=True`

[FilePathField，Django 的模型字段参考](https://docs.djangoproject.com/en/1.10/ref/models/fields/#filepathfield)

# php - 如何写入文件并允许用户在 PHP 中下载文件？

> ID：10125386
> 
> 赞同：0
> 
> 时间：2012-04-12T14:14:34.360
> 
> 标签：php, mysql

我对 PHP 有点陌生。我如何将 mysql 查询的结果数据写入临时文件并允许用户下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:20:18.400

您可能最好将其直接流式传输到客户端，而不是将其保存到临时文件并为用户提供链接（具体取决于您在做什么）。

就像是：

```
<?php
header('content-type: text/plain');
file_get_contents('/your/temporary/file');
?> 
```

显然，假设您的输出是纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:27:00.843

我认为您需要花一些时间阅读一些基本的 PHP 教程来入门。PHP 有许多与文件相关的函数，您可以使用它们来实现您想要做的事情——我不会推荐一种单一的方法。这一切都取决于您项目的特定环境和要求。W3 学校可能是一个很好的起点或 php 手册。查看 fopen、fwrite、fread、file_put_contents 和 file_get_contents 等方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:29:53.293

```
<?php
$filename = 'temporary.file';
$file = '/path/to/temporary.file';
header("Content-Description: File Transfer");
header('Content-Type: application/octet-stream');
header("Content-Disposition: attachment; filename=$filename");
readfile($file); 
```

# java - 数组上的克隆方法是深拷贝还是浅拷贝？

> ID：10125390
> 
> 赞同：5
> 
> 时间：2012-04-12T14:14:43.933
> 
> 标签：java

我不确定以下是否会导致深拷贝或浅拷贝？

```
public void viewImages(final String[] instancesFilename) {

    String[] instances = (String[])instancesFilename.clone();    
} 
```

有没有一种简单快速的方法来深度复制字符串数组？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T14:16:22.333

Java 中的字符串是不可变的（不能改变它们的值）。因此，在复制字符串时，深拷贝和浅拷贝之间没有可检测到的区别。

只是为了进一步参考：副本会很浅，但这应该不是问题，因为字符串是不可变的。

哦，有趣的事实：不能用 clone 方法克隆字符串，所以如果你尝试用 clone 方法对字符串进行深拷贝，你会得到一个 CloneNotSupportedException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:34:20.373

数组类也有 copyOf 方法。这通常是我用来创建数组副本的方法。所有差异的继承和解释：http: [//forum.codecall.net/topic/49450-copying-arrays/](http://forum.codecall.net/topic/49450-copying-arrays/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T15:50:28.953

这是一篇有趣的[文章，讨论了使用序列化进行深度复制](http://www.javaworld.com/javaworld/javatips/jw-javatip76.html)。

调用图中的对象确实需要支持序列化，但是在 3 层应用程序的许多业务类型中，这种必要性是存在的。

文章通过一些图表提供了对深拷贝和浅拷贝的讨论。

# php - 假私钥 - 为什么会是假的？

> ID：10125399
> 
> 赞同：2
> 
> 时间：2012-04-12T14:15:23.707
> 
> 标签：php, ssl, openssl

我正在打开我的密钥文件，它说它是错误的，我不知道为什么会这样。当我用记事本打开它时，我的钥匙看起来没问题。为什么它不起作用，我是第一次这样做，所以如果它很明显，请原谅我..

这是我读到的地方

```
// Reading private key
$fp = fopen("certs/cert.pem", "r");
$priv_key = fread($fp, 8192);
fclose($fp);
$pkeyid = openssl_get_privatekey($priv_key); // Empty 
```

`openssl_error_string()`给我`error:0906D06C:PEM routines:func(109):reason(108)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:45:33.357

看起来您正试图从证书文件中获取私钥；私钥不存储在证书中，它是单独存储的。你从哪里弄来的证书？如果您自己生成了 CSR 并稍后由 CA 签名，则密钥文件与 CSR 一起为您生成。如果您使用 openssl 生成 CSR 而不指定任何其他选项，例如 openssl -req -new 密钥将位于名为 privkey.pem 的文件中。它将由 ---- BEGIN RSA PRIVATE KEY --- 分隔，并且内容受密码保护（生成 CSR 时会提示您输入密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:47:01.087

如何诊断 OpenSSL 错误：

查看错误信息：

```
error:0906D06C:PEM routines:func(109):reason(108) 
```

取原因码 (108) 并确定错误：

```
grep 108 include/openssl/ssl.h
#define SSL_F_GET_SERVER_FINISHED                        108
#define SSL_R_BAD_DH_G_LENGTH                            108
#define SSL_R_TLSV1_ALERT_INTERNAL_ERROR                 1080 
```

现在谷歌搜索`SSL_R_BAD_DH_G_LENGTH`

好吧，运气不太好。查看源代码表明此错误是在

```
 ssl3_get_key_exchange() in s3_clnt.c 
```

可能这会有所帮助。

# qt - Qt winmigrate 框架

> ID：10125403
> 
> 赞同：1
> 
> 时间：2012-04-12T14:15:33.640
> 
> 标签：qt, winapi

我尝试使用 mingw 编译器运行其中一个 winwidget。但它一直在寻找 qmain 方法。我可以使用 Visual Studio 编译器运行此示例而不会出现问题。有没有人对此有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:48:42.607

经过几天的头部撞击，找到了解决方案。为了解决这个问题，需要花一点时间。

实际上，除了 qwinwidget 示例之外，组件编译得很好。所以我将 main 方法（由 Visual Studio 编译器支持）替换为 mingw 支持的 main 方法支持的方法。

//这部分是给mingw的

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
} 
```

//这是给视觉工作室的

```
int APIENTRY wWinMain(HINSTANCE hInstance,
              HINSTANCE /*hPrevInstance*/,
              LPTSTR    /*lpCmdLine*/,
              int       nCmdShow)
{
} 
```

我很欣赏有人可以证实这一点。

# scripting - 如何从 Illustrator 脚本发出 HTTP 请求？

> ID：10125404
> 
> 赞同：1
> 
> 时间：2012-04-12T14:15:49.930
> 
> 标签：scripting, httprequest, adobe-illustrator, extendscript

有没有人成功地从 Illustrator 脚本 ( `.jsx`) 发出 HTTP 请求并愿意分享如何？

我目前正在 OS X 上试验 CS3，但 CS4–5.5 也可以。

我找到了一个使用 Bridgetalk 来利用 Bridge 的套接字连接的示例，但到目前为止还不能让它工作。

有人提到了 libcurl 的包装器，还想到了一个简单的 bash 脚本。还没有找到太多关于如何实现的信息。

*任何*输入/建议/提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:14:41.373

看起来这是一个真正的边缘案例，这里概述了我最终做了什么。我计划在某个时候写一篇关于我的解决方案的博客文章，但它的边缘仍然非常粗糙。

似乎——出于某种奇怪的原因——人工智能确实没有任何可能发出 HTTP 请求，而大多数其他 Adob​​e (CS) 应用程序都能够这样做。但事实证明，可以使用一个名为 BridgeTalk 的库（所有 CS 应用程序都附带）来促进不同应用程序之间的通信。

BridgeTalk 通过 Adob​​e 的 Bridge 应用程序（您可能已经猜到了）并启用序列化代码的异步（和同步，使用一个小技巧）执行。

Bridge 带有一个 Web 套接字库，可用于向外部服务器发出请求。我的 AI 脚本现在通过小型自定义 API 和 HTTP 包装器，我最终使用[可扩展框架](http://extendables.org/)中的 HTTP 解析器来处理响应。为简单起见，我强制同步请求。

举个例子，我最终创建的 API 看起来像这样（假设一个`foo`具有属性的对象`uuid`）：

```
function synchFoo(foo) {
    var options = {
        path  : '/api/foos/' + foo.uuid + 'sync',
        format: 'json',
        method: 'POST',
        host  : '127.0.0.1:3000',
        data  : fooDataToString(foo)
    }
    var response = bridgeHTTP.sendSynch(options);
    return JSON.parse(response.body);
} 
```

*这种方法是我唯一可以开始工作（跨 AI 版本）的方法，并且仍然相当不稳定，因此还没有准备好发布。但是，围绕此解决方案的项目已被放弃，因此请不要屏住呼吸。*

# cross-compiling - autotools：C 编译器无法创建可执行文件

> ID：10125410
> 
> 赞同：4
> 
> 时间：2012-04-12T14:16:02.007
> 
> 标签：cross-compiling, autotools, osdev

我正在 OS X 上构建 x86_64-elf 内核。我的构建系统是 autotools。我成功编译 gcc 以在 OS X 上为 x86_64-elf 进行交叉编译。当我运行从 autotools 生成的配置脚本时，我遇到了一个问题：

```
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

所以我查看 config.log 并查看：

```
cannot find crt0.o: No such file or directory
collect2: error: ld returned 1 exit status 
```

这很有意义。交叉编译器不会生成可执行文件，因为没有关联的运行时。但我不需要或不希望我的编译器生成可执行文件，我将为我的引导加载程序适当地链接它。我如何告诉 autotools 不要检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T00:17:17.083

确保在运行配置脚本时指定以下 gcc 标志（将它们添加到 CFLAGS 环境变量）：

```
-nostdlib -nostartfiles -nodefaultlibs -ffreestanding 
```

如果您不知道如何将这些附加到 CFLAGS 的末尾，请尝试以下操作：

```
export CFLAGS=$CFLAGS -nostdlib -nostartfiles -nodefaultlibs -ffreestanding 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:27:48.160

尝试：

```
DARWIN_VERSION_FULL=darwin`uname -r`
./configure --build=x86_64-apple-${DARWIN_VERSION_FULL} --host=x86_64-unknown-linux 
```

现在`configure`应该处于交叉编译模式，并停止运行该测试。

# clearcase - 用户存储库工作区中的多个组件

> ID：10125412
> 
> 赞同：3
> 
> 时间：2012-04-12T14:16:04.423
> 
> 标签：clearcase, rtc

将多个组件添加到用户存储库工作区有什么意义。据我了解，需要一个组件，因为这是本地存储库中源代码的占位符，但为什么要使用多个组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:31:18.330

如“[何时在 RTC 源代码控制中的流中使用多个组件](https://stackoverflow.com/questions/10120788/when-to-use-multiple-components-within-a-stream-in-rtc-source-control)”中所述，您可以在流中定义多个组件，以便更轻松地将文件集管理为连贯的子集。

这是系统方法，您可以在其中列出构建系统所需的所有组件。

但是，对于给定的任务，您可能不需要*所有*组件来完成所述任务。
这就是为什么存储库工作区允许您只选择您需要在“空间”中看到的内容才能工作（工作+空间）。
即使这样，您的*本地*工作区（或沙箱）也允许您仅加载（即复制到硬盘上）某些选定的组件，甚至是一个组件的子集（以避免复制*太多*文件）。

您会发现与 ClearCase UCM 快照视图的加载规则类似的方法，其中：

*   选择Stream 的*所有*组件的配置规范
*   但加载规则仅加载（复制）您想要的硬盘驱动器

因此，在以下模式中（来自[Jazz Source Control FAQ](https://jazz.net/library/article/126/)），repo 工作区不必在 Stream 上声明所有组件，并且本地工作区不必加载 repo 工作区的所有组件。

![在此处输入图像描述](../Images/b867cecc22031e01afc0564c4cfb37a3.png)

# swing - 如何创建文件选择器

> ID：10125414
> 
> 赞同：1
> 
> 时间：2012-04-12T14:16:07.090
> 
> 标签：swing, file-io, filesystems

如何创建可以一次选择多个派生/文件夹/文件的文件选择器，如下图示例。我想使用复选框来选择项目，并且在选择时不可用的驱动器应该被禁用，如 H、I、Z 的灰色标记派生 n fig。![在此处输入图像描述](../Images/072e931184992761ce92879c880df268.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:03:35.820

没有看起来像屏幕截图中的默认组件。您必须自己构建它。

查看[JTrees](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)并使用自定义 TreeRenderer，它使用 JCheckboxes 来显示节点。然后，您可以启用/禁用特定节点，并获取所有选定节点的列表

# directx - 屏幕空间到剪辑空间的转换问题

> ID：10125420
> 
> 赞同：0
> 
> 时间：2012-04-12T14:16:33.190
> 
> 标签：directx, shader, rendering, hlsl

我正在 Direct3D 11 中绘制一个 GUI，目前我正在通过在屏幕附近绘制大量 3D 四边形来管理它。我决定对屏幕四边形进行实例化以稍微提高速度。

当我绘制四边形时，我为它提供了一个输入位置 (input.pos)，它是一组定义四边形的坐标，如下所示：

```
0,0
0,1
1,0
1,1 
```

我还传入了一个实例位置，它是屏幕空间中四边形的一个位置，例如

```
456,700 
```

最后我传入四边形的比例，以像素为单位。因此，一个 50x30 像素的四边形将具有以下比例值：

```
50,40 
```

为了将这些坐标转换为我的像素着色器的剪辑空间，我使用以下数学运算（我打算最终在 CPU 上执行，但现在在顶点着色器中完成）：

```
output.pos = float4((input.pos*2* input.instanceScale) / winSize+input.instancePos*2/winSize -1,0.25,1); 
```

这大部分都有效，并且所有内容都出现在其他所有内容附近，但是 y 轴是倒置的。这是因为剪辑空间从 -1 到 1，但 1 是剪辑空间中屏幕的顶部 - 与正常的处理方式相反。因此，解决方案应该是：

```
output.pos.x = 2*(input.pos.x * input.instanceScale.x + input.instancePos.x)/winSize.x -1;
output.pos.y = 1 - 2*(input.pos.y * input.instanceScale.y + input.instancePos.y)/winSize.y; 
```

但是，当我运行它时，我的四边形就消失了。我认为他们仍在渲染，但在某个地方不在屏幕上。

有人知道可能出了什么问题吗？

此外，如果我保留新的 output.pos.x 计算但对 y 坐标使用旧计算，它仍然有效。所以问题一定出在这个新代码的第二行。

非常感谢

EDIT1：我现在听从了 TomMcTwattyPants 的建议，并在 1 和 -1 之间确定了最终的 y 位置。发生的情况是 GUI 元素垂直向中心移动并缩小。当它们到达中心时，它们会消失，然后循环。

循环之前有一个延迟，所以我相信在乘法的 0 和 -1 部分之间，四边形是不可见的。我不确定为什么，也许顶点的顺序已经改变，所以法线现在指向远离屏幕并被剔除？我会尝试关闭背面剔除，看看是否会改变任何东西。无论如何，GUI 通行证都不需要它。

EDIT2：问题是背面剔除。禁用它可以解决所有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:08:22.247

反转 y 轴的最简单方法是将其乘以负一：

```
output.pos.y *= -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T20:37:11.227

刚刚遇到同样的问题：如果你发现四边形消失了，可能是因为索引缠绕顺序。我没有禁用背面剔除，而是颠倒了四边形的缠绕顺序，一切正常。

# git - 让 git 在单独的窗口而不是终端中询问密码

> ID：10125421
> 
> 赞同：2
> 
> 时间：2012-04-12T14:16:36.360
> 
> 标签：git, ssh, msysgit

我已经这样配置了`~/.ssh/config`：

```
host myserver_myuser
    user myuser
    hostname myserver
    port 1234
    identityfile ~/.ssh/myserver.private 
```

执行远程 Git 命令时，Git 总是要求我输入私钥的密码：

```
$ git ls-remote myserver_myuser:/path/to/repository
Enter passphrase for key '~/.ssh/myserver.private': 
```

当从一个没有终端的应用程序启动这个 Git 命令时，这会导致麻烦，因为 Git 仍然在一个不可见的终端上要求输入密码。我试图告诉 msysgit 使用`git-gui--askpass`，但它仍然要求在命令行上输入密码：

```
$ export SSH_ASKPASS=/libexec/git-core/git-gui--askpass
$ git ls-remote myserver_myuser:/path/to/repository
Enter passphrase for key '~/.ssh/myserver.private': 
```

我如何说服 msysgit 使用`git-gui--askpass`来询问密码？

# java - JBoss 服务的应用程序 - 无法访问使用 apache proxypass 会话

> ID：10125425
> 
> 赞同：0
> 
> 时间：2012-04-12T14:16:44.220
> 
> 标签：java, apache, session, jboss, proxypass

我遇到了一个奇怪的（对我来说）从 JBoss 提供的 java 应用程序的情况。

**- 背景 -**

1) JBoss 安装在 Linux 环境中。

为了便于说明，我的环境中的IP地址是：99.999.999.99

2) 在环境中，我的 JBoss 运行在：http: [//127.0.0.1 :8080](http://127.0.0.1:8080)

有几个可以访问的应用程序：http: [//127.0.0.1 :8080/APPLICATION_NAME](http://127.0.0.1:8080/APPLICATION_NAME)

3) 我有 apache 将流量路由到我的 IP 地址，如下所示：

```
ProxyPass / http://127.0.0.1:8080/app1/
ProxyPassReverse / http://127.0.0.1:8080/app1/

ProxyPass /app2/ http://127.0.0.1:8080/app2/
ProxyPassReverse /app2/ http://127.0.0.1:8080/app2/

ProxyPass /app3/ http://127.0.0.1:8080/app3/
ProxyPassReverse /app3/ http://127.0.0.1:8080/app3/ 
```

4) 当我访问 99.999.999.99 时，我可以访问 app1，它按预期运行（除了下面的问题）。

当我访问 99.999.999.99/app2 时，我可以访问 app2。

**- 问题 -**

1）在app1内部，我有一个jsp页面写入​​会话：

_sessionTest1.jsp session.setAttribute("test", "test");

2) 问题是运行这个 JSP 之后，会话中不会包含设置的数据。

3) 如果我删除 apache 代理，而是公开 JBoss 根目录，以及管理链接和 JMX 控制台，会话将按预期更新。

以这种方式配置时，我访问应用程序的方式是：

99.999.999.99/app1

其中 99.999.999.99 将显示我的 JBoss 根目录。

4) 如果如上配置，是否预计应用程序的会话将无法访问？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:59:08.940

原来问题在于需要将 apache 配置为从 cookie 中查找会话信息，而不是默认的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:00:16.117

I just had this same problem with Apache proxying Jetty. The rule was:

```
ProxyPass /myapp http://localhost:8080
ProxyPassReverse /myapp http://localhost:8080 
```

Which proxied `https://myhost/myapp` to `http://localhost:8080`. This worked in general, but the session in myapp was not preserved between requests. Adding the following rule fixed it:

```
ProxyPassReverseCookiePath / /myapp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:58:32.540

我相信您的第一份代理声明实际上应该是您的最后一份。Apache 将在与 URL 匹配的第一个规则处停止，因此您通过 Web 服务器的所有请求都使用通用 / 捕获规则 1。

```
ProxyPass /app1/ http://127.0.0.1:8080/app1/
ProxyPassReverse /app1/ http://127.0.0.1:8080/app1/

ProxyPass /app2/ http://127.0.0.1:8080/app2/
ProxyPassReverse /app2/ http://127.0.0.1:8080/app2/

ProxyPass /app3/ http://127.0.0.1:8080/app3/
ProxyPassReverse /app3/ http://127.0.0.1:8080/app3/

ProxyPass / http://127.0.0.1:8080/app1/
ProxyPassReverse / http://127.0.0.1:8080/app1/ 
```

# c# - Asp.net C# Webform 表单生成器/生成器

> ID：10125428
> 
> 赞同：2
> 
> 时间：2012-04-12T14:16:57.367
> 
> 标签：c#, asp.net, webforms

我正在寻找一个简单的 Asp.net C# Webform 表单生成器/生成器

[与http://wufoo.com/form-b](http://wufoo.com/form-builder/) ​​uilder/ 非常相似的东西（更基本的也可以），但在 .Net 实现和本地而不是付费云服务中。

有谁知道我在哪里可以找到这个？

这是为了集成到现有的 C# Webform 应用程序中，以允许员工（非开发人员）轻松创建和存储表单，然后他们能够呈现给系统的公共用户。

Ps 我已经看过[http://frevvo.com](http://frevvo.com)但他们的价格是*滞后*的。

其他类似性质的问题最终会得到一堆 ASP.Net MVC 答案。为了清楚起见，我正在寻找一个基于 WebForms 的 WebForm 解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T16:23:10.527

我也在寻找基于 C# 的表单生成器系统，并提出了以下解决方案：

1.  使用 [jquery-form-b​​uilder-plugin](http://code.google.com/p/jquery-form-builder-plugin/)为用户提供用户友好的 UI。这会将 JSON 对象发布到服务器
2.  使用 ASP.Net 保存 JSON 并将表单呈现给用户

`System.Web.Extensions`在 .Net 3.5 中使用创建 ASMX 可以轻松处理 JSON 。一个很好的系列供参考在[这里](http://encosia.com/category/asmx-mistakes-and-misconceptions/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:04:29.270

我完全支持与现有应用程序保持兼容性，但这是网络，所以你只需要在某个地方链接......

您的问题似乎定义了 Microsoft [LightSwitch](http://www.microsoft.com/visualstudio/en-us/lightswitch)项目的既定目标。

> LightSwitch 是一款简化的自助式开发工具，可让您快速轻松地为桌面和云构建业务应用程序

只需替换`cloud`为`web based forms`，就可以了。

# image-processing - 识别图像中的矩形区域

> ID：10125432
> 
> 赞同：0
> 
> 时间：2012-04-12T14:17:09.863
> 
> 标签：image-processing, opencv

这听起来很简单，但我遇到了很多问题。

通过霍夫变换，我想我可以从图像中得到 ROI。但由于我们的 3D 世界和我不完美的手部协调，ROI 是倾斜的，或者有透视投影——也就是说，它不是一个真正的矩形，无法进一步分析。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:56:11.020

您可以使用`getPerspectiveTransform()`and`warpPerspective()`再次将其变为矩形。

```
//cornerpoints contains the Point2f corners you detected in the image in clockwise ordering from top left
int rectheight=480;
int rectwidth=640;
Point2f rectpoints[4];
rectpoints[0]=Point2f(0,0);
rectpoints[1]=Point2f(0,rectwidth);
rectpoints[2]=Point2f(rectheight,rectwidth);
rectpoints[3]=Point2f(rectheight,0);
Mat pt=getPerspectiveTransform(cornerpoints,rectpoints);
Mat rectangle(rectheight,rectwidth,CV_8U);
warpPerspective(image,rectangle,pt,Size(rectheight,rectwidth)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:31:10.473

您是否考虑过使用 Gonzalez 在他的书中提出的形状签名？如果您的形状已经被分割和标记，那么计算起来既简单又快速。

[这篇论文也可能有帮助](http://www.sciencedirect.com/science/article/pii/S0165168411001976)

# python - 如何将输入视为生成器

> ID：10125435
> 
> 赞同：3
> 
> 时间：2012-04-12T14:17:26.437
> 
> 标签：python, input, serial-port, generator

我正在从串行连接（pyserial）读取行，目前我正在使用 while 循环来读取行，然后对该输入执行一系列功能，然后将其存储在一个对象（范围查找器）中。

有人提到我应该将串行输入视为生成器，因为这就是在 python 中完成的方式。

有人对这个有经验么？
或者至少可以原则上解释如何实现这一目标？
为什么更好？纯粹是为了内存/速度吗？

编辑：

功能在哪里：

```
at_end() 
```

来自？我越来越：

`AttributeError: 'Serial' object has no attribute 'at_end'`

如果我使用

```
while True:
    yield source.readline() 
```

然后我得到输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:30:20.043

您可能会查看[Iterator Types](http://docs.python.org/library/stdtypes.html#iterator-types)。基本上你实现了一个类：

```
class SerialReader(object):
    def __init__(self, source):
        super(SerialReader, self).__init__()
        self.source = source

    def next(self):
        """Provide next piece of data from the serial source."""
        # If we have no more data, we have to raise StopIteration exception
        if self.source.at_end():
            raise StopIteration
        else:
            return self.source.read()

    def __iter__(self):
        return self

reader = SerialReader(some_serial_source)

for data in reader:
    do_something_with_data(data) 
```

优点是使用这种迭代器/生成器 - 您可以将它与任何接受迭代器的 python 方法一起使用：

*   列表理解：`sample = [data for data in serial_reader]`
*   [迭代工具](http://docs.python.org/library/itertools.html)
*   快速简单地转换为列表：`list(serial_reader)`- 将读取所有数据并返回一个列表
*   ... 多得多

迭代器是非常 Pythonic 的模式，你可以经常见面。许多 python 库都使用迭代器。

关于内存使用：假设您想使用另一个接受数据流的函数来处理您的源。您不必加载所有源数据，只需将生成器（迭代器）传递给处理函数，即可根据需要读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:26:12.920

你应该做的是：

```
for x in myObject:
    # do stuff with x 
```

这将迭代 myObject 中的值。为此，对象必须实现迭代器协议（请参阅[http://docs.python.org/library/stdtypes.html#iterator-types](http://docs.python.org/library/stdtypes.html#iterator-types)）。这将适用于列表、元组、生成器、字典 ...

好处是您不需要索引，并且对象不必实现 `__getitem__`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:24:47.113

Python 文档是最好的文档之一，所以我只会将您重定向到[Generator 文档](http://docs.python.org/tutorial/classes.html#generators)

是的，它纯粹是为了内存和速度。

# iphone - 向服务器发送 Post 请求

> ID：10125441
> 
> 赞同：-1
> 
> 时间：2012-04-12T14:17:54.533
> 
> 标签：iphone, objective-c, ios, web-services

我有这个 php 代码。

```
<?php  
       $users = $this->Session->read("user");
       $varFName = $users['User']['first_name'];
       $varLName = $users['User']['last_name'];
       $message = "Hello,
 I would like to invite you to Clicksays! ".$varFName." ".$varLName;
       echo $this->Form->create('User', array('id' => 'sendEmailRequest', 'style'=>'padding : 0px;', 'url' => array('controller' => 'Contacts', 'action' => 'addEmailRequest')));
       echo $this->Form->input('Email', array('id' => 'email', "size"=>"40"));
       echo $this->Form->textarea("Message", array("type"=>"textarea", "id"=>"PreviewEmail", "style"=>"display:none;","rows"=>"5", "cols"=>"45", "value"=>$message));
       echo $this->Form->button('Preview and edit invitation Clickup', array("id" => "butInvite", "type"=>"button"));
       echo $this->Form->button('Send invitation Clickup', array('id' => 'butSendInvitation',  'type'=>'submit'));
       echo $this->Form->end(); ?> 
```

现在它接受用户、电子邮件和消息的数据数组：

```
NSURL *URL = [NSURL URLWithString:@"myLink"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:6.0];
[request setHTTPMethod:@"POST"];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
    [connection start]; 
```

现在我很确定我需要将数组作为 HTTP 正文，但我不知道如何。我不是网络人，对网络编程和方法知之甚少。

我怎样才能传递详细信息？没有它就无法工作，并发布错误以输入用户的详细信息，该代码也存在于 php 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:33:10.787

RestKit 非常适合在 iOS 应用程序中处理 JSON 内容。查看本教程：http: [//mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:44:56.617

试试这个

```
 NSString *urlString = @"Your url";

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSMutableData *body = [NSMutableData data];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // Text parameter1
    // NSString *param1 = @"parameter text";
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"name\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:param1] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // Another text parameter
    // NSString *param2 = @"Parameter 2 text";
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"desc\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:param2] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // set request body
    [request setHTTPBody:body]; 
```

像上面的代码一样，你可以使用 HTTP post 方法发送多个值。

# delphi - 如何检测文件的正确修改？

> ID：10125444
> 
> 赞同：1
> 
> 时间：2012-04-12T14:18:03.610
> 
> 标签：delphi, windows-7, file-io, delphi-xe, datemodified

在[上一个问题](https://stackoverflow.com/questions/9983060/how-to-write-a-file-that-is-being-read)中，我的一个问题是我的应用程序如何知道文件已被重写。我应该添加：“由另一个应用程序”。首先，我尝试[了 ShellNotify](http://delphikingdom.torry.net/authorsmore.php?id=6057)，它报告目录中的更改，而不是特定文件中的更改 afaik，我错过了什么吗？

现在我在计时器中使用 FileAge，它每秒检查特定文件是否已更改。虽然这有效，但它会检测到*两次*修改，相隔约 13 毫秒；当我将测试间隔更改为 10 秒时，此行为仍然存在。下面的代码是定时器的回调。

```
procedure TAMI_Column_Selector.doWork (Sender: TObject);
var new_stamp: TDateTime;
begin
   if FileAge (remove_extension (FileName) + '.csv', new_stamp) then
   begin
      if (new_stamp <> FDateTimeStamp) then
      begin
         FDateTimeStamp := new_stamp;
         FTask.SyncCall (notify_user);
      end; // if
   end; // if
end; // doWork // 
```

我的问题：

1.  究竟是什么导致在`notify_user`上面的代码中被调用两次？文件系统的愚蠢错误或一些奇怪的行为（例如，修改日期设置在打开和关闭文件时）？
2.  每秒检查文件是否已更改感觉有点“浪费”。有没有像 ShellNotify 这样的东西，它只在特定文件被修改时通知我？

**更新**

David Heffeman 的答案（使用`ReadDirectoryChangesW`而不是轮询）是问题 2 的正确答案。但是，如问题 1 中所述，它也会在一次修改期间（从用户的角度）导致多次调用。

我比较`ReadDirectoryChangesW`了和轮询方法。测试了两个文件（0.5MB 和 10MB）。在这两种情况下，轮询方法都被调用了两次，并且`ReadDirectoryChangesW`被调用了多次（3 到 5 次）。我将恢复轮询方法并忽略第一个`FileAge`更改。我知道我无法确定这种行为是否一致，因为我不了解导致它的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:52:23.140

我知道这不是您问题的直接答案，但我建议使用[`ReadDirectoryChangesW`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465.aspx)而不是轮询。

# apache-flex - Possibilities of Flex Mobile on Symbian OS

> ID：10125455
> 
> 赞同：1
> 
> 时间：2012-04-12T14:18:31.210
> 
> 标签：apache-flex, air, symbian

recently ive been doing research and testing of Flex Mobile framework for iOS and Android platforms, to see some good results.

I could not, however, find enough information (that are not outdated) about Flex Mobile on Symbian OS.

Is it possible, to package Flex mobile application (built in Flash Builder 4.6) also for Symbian OS? Flash builder only offers iOS, Android and Blackberry platform packaging.

Does Symbian OS support AIR3 platform? - from what i understand, only Flash Lite is supported. Is Flash Lite capable of rendering Flex Mobile apps?

Any link to valuable resource covering my questions will be **appreciated**.

Thanx for your help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:31:53.067

No, Flash Lite and full-fledged AS3 (Flex Spark mobile) are not near anyhow.

I don't think it would be easy or even possible for a Flex kind of apps (since devices running Symbian are usually not that powerful compared to iOS or Android devices). But here's something you could using Google: [http://www.developer.nokia.com/Community/Wiki/How_to_port_Adobe_AIR_to_WRT](http://www.developer.nokia.com/Community/Wiki/How_to_port_Adobe_AIR_to_WRT) http://www.flashmobileblog.com/2010/03/03/helisso-a-packager-for-symbian-devices/

# android - android andengine 场景截图

> ID：10125458
> 
> 赞同：0
> 
> 时间：2012-04-12T14:18:41.723
> 
> 标签：android, screenshot, andengine, high-resolution

我以 1000x1000 的分辨率初始化引擎，并希望将整个场景保存在文件中。如果我使用 ScreenCapture 类截屏，则图片的最大分辨率为 800x480（因为我的设备（htc 渴望）是 800x480，而且屏幕上不可能有更多像素）。但是场景更大，也许有一种方法可以遍历场景中的所有像素并保存 1000x1000 图片？

我尝试使用以下代码从 RenderTexture 保存图片：

```
@Override
public Engine onCreateEngine(EngineOptions pEngineOptions)
{
        return new Engine(pEngineOptions) {

            private boolean mRenderTextureInitialized;

            int r[];

            private  RenderTexture mRenderTextures;

            @Override
            public void onDrawFrame(final GLState pGLState) throws InterruptedException {
                final boolean firstFrame = !this.mRenderTextureInitialized;

                if(firstFrame) {
                    this.initRenderTextures(pGLState);
                    this.mRenderTextureInitialized = true;
                }
                this.mRenderTextures.begin(pGLState);

                super.onDrawFrame(pGLState);

                this.mRenderTextures.end(pGLState);

                if (needToSave)
                {
                    needToSave = false;
                    final String location = SAVED_PATH + "/Screen_" + System.currentTimeMillis() + ".png";
                    FSHelper.saveBitmapToFile(mRenderTextures.getBitmap(pGLState), location);
                }

            }

            private void initRenderTextures(final GLState pGLState) {
                final int surfaceWidth = this.mCamera.getSurfaceWidth();
                final int surfaceHeight = this.mCamera.getSurfaceHeight();

                    this.mRenderTextures = new RenderTexture(EnchantActivity.this.getTextureManager(), surfaceWidth, surfaceHeight);
                    this.mRenderTextures.init(pGLState);

                }

        };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:55:33.307

您无法截取未渲染的内容！

但是当使用 GLES2 分支时，您可以将您的场景渲染成一个 RenderTexture，它可以是任意大小。这个例子应该有帮助：[https ://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/MotionStreakExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/MotionStreakExample.java)

# java - 如何防止同一应用程序的并行 Java Web Start 下载？

> ID：10125461
> 
> 赞同：1
> 
> 时间：2012-04-12T14:18:48.723
> 
> 标签：java, jnlp, java-web-start

我们已将 Java Swing 应用程序部署到 Intranet Web 服务器，以便客户端机器可以使用 Java Web Start 访问和下载它。所有应用程序文件（jar 文件）的总大小为 130 MB。

我们现在面临这个问题：当用户单击链接并启动下载过程时，会出现一个带有进度条的对话框。在下载过程中，如果他/她再次点击该链接，Java Web Start 将启动另一个下载过程。那时，同一应用程序将有两个并行下载（两个进度对话框）。最终，当下载完成时，用户（或系统）缓存中将有大约 260 MB 的文件，证明实际上下载了两个（相同的）应用程序。

有没有办法防止同时多次下载同一个应用程序？是否可以配置 Java Web Start 启动器，以便它可以检测何时已经下载了相同的应用程序？

澄清一下：我们的客户端机器实际上并不是经典客户端——它们是为数百个终端用户服务的 Citrix 服务器。因此，很容易发生同一应用程序在同一时间下载不止一次的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:42:13.373

由于没有人回答，我会这样做，所以也许有一天它会对遇到同样问题的人有所帮助。根据我拥有的信息和我所做的测试，我发现无法指示 Java Web Start 检测当前已经下载的同一应用程序（由同一台机器上的同一用户发出）的请求。

显然，Java Web Start 将启动另一个下载过程，因此两个相同的应用程序内容将有两个相同的下载 - 从而不必要地消耗网络、Web 服务器和磁盘资源。在 Citrix XenApp 等虚拟应用程序交付系统中，这是一个相当大的问题。

我想到的一种解决方案是创建自定义 java 启动器应用程序，将下载请求与锁定文件同步。就像是：

1.  循环等待（向用户显示一些进度指示器），直到创建锁定文件（获取锁定）。
2.  从服务器下载更新的应用程序资源（如果有）：`javaws -import -silent http://someserver/jnlp-app.jnlp`
3.  开始申请：`javaws http://someserver/jnlp-app.jnlp`
4.  删除锁定文件（释放锁定）

# winforms - 使用反射确定对象是否需要在 GUI 线程上调用其成员

> ID：10125465
> 
> 赞同：5
> 
> 时间：2012-04-12T14:18:53.993
> 
> 标签：winforms, f#, fsi

参考[这个](http://code.google.com/p/fseye/issues/detail?id=20)FsEye 问题，我如何使用反射来确定对象是否需要在 GUI 线程上调用其成员（或者实际上是特定成员，如果可能）？

场景是这样的：用户在 FSI 中创建一个`WebBrowser`对象的实例（它运行自己的 WinForms 事件循环），然后他们尝试在 FsEye 中展开节点。但这会导致未处理的异常对话框警告

> System.Threading.ThreadStateException：当前线程必须设置为单线程单元 (STA) 模式，然后才能进行 OLE 调用。确保您的 Main 函数上标记了 STAThreadAttribute。

（具体而言，这似乎仅在加载 AccessibilityObject 属性时发生）。

我知道这是因为 FsEye使用 F# 异步计算表达式延迟、异步和*并行*`Async.Parallel`加载子节点，因此从非原始、非 STA（即不是原始 FSI GUI 线程）线程池调用此 OLE 对象的成员线程。我也知道如何通过在我的异步表达式中切换到 GUI 线程上下文来解决这个问题，但我只想在绝对必要时这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:24:45.370

您无法查看单个成员来确定是否需要从应用程序的 STA/主线程调用对象。这只是个人类型合同中固有的东西

话虽如此，您可以寻找某些线索。这些将表明一个对象是一个 UI 绑定组件，但绝不是一个明确的列表

*   派生自 System.Windows.Forms.Control
*   派生自 UIElement

# javascript - onMouseOver JavaScript with CSS list-style-image

> ID：10125466
> 
> 赞同：1
> 
> 时间：2012-04-12T14:18:58.083
> 
> 标签：javascript, html, css, minecraft

我很好奇 - 有没有办法将 JavaScript 中的 onMouseOver 元素添加到 CSS 列表样式图像（项目符号点的图像）。这是我的代码：

```
<style type="text/css">
ul.one {list-style-image:url('http://fun.resplace.net/Emoticons/Minecraft/Diamond.png');}
</style> 
```

这是与此交互：

```
<ul class="one">
<li class="one"><input type="button"  id="1"onclick="show_prompt()" value="Minestatus" /></li>
<li class="two"><input type="button" id="2" onclick="show_alert()" value="Minecraft Server List" /></li>
<li class="three"><input type="button" id="3" onclick="show_alert1()" value="MCSL" /></li>
</ul> 
```

我想这样做，当有人将鼠标悬停在钻石上时，它会显示除此之外的消息：

```
<p>Please vote for my server!</p> 
```

此外，这是我正在开发的我的 Minecraft 服务器网站投票代码的一部分，以防你想知道这整件事是什么。我想让它在您滚动其中一颗钻石时，除了“请为我的服务器投票”之外，它会显示他们将投票的网站名称。感谢您的帮助，非常感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:00:00.053

Lokase 是正确的，没有办法将它添加到项目符号中。但是，您可以做一些事情来模仿这一点。

不要在列表项上使用列表样式图像，而是在列表项中添加一个跨度标记，删除列表样式并将鼠标悬停事件附加到跨度。所以你的列表项看起来像：

```
<li class="one"><span>Please vote for my server!</span><input type="button"  id="1"onclick="show_prompt()" value="Minestatus" /></li> 
```

您的 CSS 将更改为：

```
<style type="text/css">
ul.one span { background:url('http://fun.resplace.net/Emoticons/Minecraft/Diamond.png') no-repeat left top; display: block; height: 12px; list-style: none; text-indent: -9999px; width: 12px;}
</style> 
```

您必须调整高度和宽度以对应钻石图像的高度和宽度。而且，必须调整列表项样式以解决填充和边距差异，因为实际的项目符号将不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:00:56.533

鼠标事件无法区分子弹点和li，因为它们是一回事。

相反，您应该用 li 背景 + 填充替换项目符号，然后添加一个在鼠标悬停时展开/显示的消息容器。

或者，您可以为钻石本身制作一个单独的容器，其中包含在悬停时显示的消息。消息容器当然可以包含您想要的任何内容。

这可以在没有任何 javascript 参与的情况下完成。

在这个主题上，您不应该使用[内联事件处理程序](http://www.quirksmode.org/js/events_early.html)。您应该通过 javascript 附加事件，从而分离 HTML 和 Javascript。它更容易管理，看起来更好，也更稳定。

传统的[事件注册模型](http://www.quirksmode.org/js/events_tradmod.html)和[高级注册模型](http://www.quirksmode.org/js/events_advanced.html)应该让您了解这一点。

* * *

## [第一个例子](http://jsfiddle.net/uZjz9/1/)| 代码

HTML

```
<ul class="one">
    <li class="one">
        <div class='diamond'>
            <div class='message'>Please vote for me!</div>
        </div>
        <input type="button"  id="1"onclick="show_prompt()" value="Minestatus" />
    </li>
    <li class="two">
        <div class='diamond'>
            <div class='message'>Please vote for me!</div>
        </div>
        <input type="button" id="2" onclick="show_alert()" value="Minecraft Server List" />
    </li>
    <li class="three">
        <div class='diamond'>
            <div class='message'>Please vote for me!</div>
        </div>
        <input type="button" id="3" onclick="show_alert1()" value="MCSL" />
    </li>
</ul> 
```

CSS

```
ul.one {
    list-style: none;
    position: relative;
    width: 200px;
    margin-left: 50px;
}

ul.one li .diamond{
    background: url('http://img835.imageshack.us/img835/6175/shinyn.png') center no-repeat;
    margin-right: 10px;
    position: relative;
    width: 12px;
    height: 13px;
    display: inline-block;
}

ul.one li .diamond:hover{
    background: url('http://img42.imageshack.us/img42/3357/shinyo.png') center no-repeat;
}

ul.one li .diamond:hover > .message{
    display: block;
}

ul.one .message{
    position: absolute;
    background: white;
    border: 1px solid gray;
    margin-top: 5px;
    top: 100%;
    left: -56.5px;
    z-index: 1;
    display: none;
    width: 125px;
} 
```

* * *

## [第二个例子](http://jsfiddle.net/uZjz9/)| 代码

HTML

```
<ul class="one">
    <li class="one">
        <input type="button"  id="1"onclick="show_prompt()" value="Minestatus" />
        <div class='message'>Please vote for me!</div>
    </li>
    <li class="two">
        <input type="button" id="2" onclick="show_alert()" value="Minecraft Server List" />
        <div class='message'>Please vote for me!</div>
    </li>
    <li class="three">
        <input type="button" id="3" onclick="show_alert1()" value="MCSL" />
        <div class='message'>Please vote for me!</div>
    </li>
</ul> 
```

CSS

```
ul.one {
    list-style: none;
    position: relative;
    width: 200px;
    margin-left: 50px;
}

ul.one li{
    background: url('http://img835.imageshack.us/img835/6175/shinyn.png') left no-repeat;
    padding-left: 20px;
    position: relative;
}

ul.one li:hover{
    background: url('http://img42.imageshack.us/img42/3357/shinyo.png') left no-repeat;
}

ul.one li:hover > .message{
    display: block;
}

ul.one .message{
    position: absolute;
    background: white;
    border: 1px solid gray;
    top: 0;
    left: 100%;
    z-index: 1;
    display: none;
    width: 125px;
} 
```

* * *

## [第三个例子](http://jsfiddle.net/uZjz9/2/)| 代码

第三个示例使用 javascript onmouseover/out 事件来跟踪消息触发。

与第一个示例相同的 HTML，除了我在列表中添加了一个 id。

CSS

```
ul.one {
    list-style: none;
    position: relative;
    width: 200px;
    margin-left: 50px;
}

ul.one li .diamond{
    background: url('http://img835.imageshack.us/img835/6175/shinyn.png') center no-repeat;
    margin-right: 10px;
    position: relative;
    width: 12px;
    height: 13px;
    display: inline-block;
}

ul.one li .hovering{
    background: url('http://img42.imageshack.us/img42/3357/shinyo.png') center no-repeat;
}

ul.one .message{
    position: absolute;
    background: white;
    border: 1px solid gray;
    margin-top: 5px;
    top: 100%;
    left: -56.5px;
    z-index: 1;
    display: none;
    width: 125px;
} 
```

Javascript

```
var eList = document.getElementById("list"),
    eItems = eList.getElementsByTagName("li");

for(i = 0; i < eItems.length; i++){
    eItems[i].onmouseover = function(event){
        var eDivs = this.getElementsByTagName("div");

        for(j = 0; j < eDivs.length; j++){
            if(eDivs[j].className.indexOf("diamond") >= 0){
                if(eDivs[j].className.indexOf("hovering") == -1) eDivs[j].className += " hovering";
            }

            if(eDivs[j].className.indexOf("message") >= 0){
                eDivs[j].style.display = "block";
            }
        }
    };

    eItems[i].onmouseout = function(event){
        var eDivs = this.getElementsByTagName("div");

        for(j = 0; j < eDivs.length; j++){
            if(eDivs[j].className.indexOf("diamond") >= 0){
                if(eDivs[j].className.indexOf("hovering") != -1) eDivs[j].className = eDivs[j].className.replace("hovering", "").replace(" ", "");
            }

            if(eDivs[j].className.indexOf("message") >= 0){
                eDivs[j].style.display = "none";
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:31:55.200

很确定鼠标悬停无法区分 LIs 项目符号和 LIs 文本。

您可以将鼠标悬停在每个 LI 上并弹出一条消息，以下代码示例是基于 Jquery 的，您可以在原始 javascript 中破解类似的内容：

```
$('ul.one li').mouseover(function() {
    show_message('my_message');
}); 
```

# c# - ASP.net C# 从另一个线程返回 JS 警报

> ID：10125467
> 
> 赞同：0
> 
> 时间：2012-04-12T14:18:58.823
> 
> 标签：c#, javascript, asp.net, multithreading

我有以下情况：

在 Default.aspx.cs

```
void Button1_Click(Object Sender, EventArgs e)
{
  new Thread(() =>LongProcessFunction()).Start(); 
  // I am running this function in a new thread so the end user does not wait till the end of the process
}

public void LongProcessFunction()
{
  //some code with long process
  // When done alert the user no matter what he's doing on the website.
  System.Web.UI.ScriptManager.RegisterStartupScript(this, GetType(), "Alert","alert('Function is Complete')" , true);    
} 
```

问题是我需要这个警报脚本来显示给最终用户。我假设它在另一个线程上运行并且没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:17:35.123

您应该能够在长时间运行的函数结束时设置会话或应用程序变量，这表明进程已完成。然后，您可以检查是否已在每次页面加载时设置了此变量（最好是在从 Page 继承的基类中），如果已设置，请取消设置并调用 RegisterStartupScript 代码。

# mysql - 大型数据库的Mysql查询优化

> ID：10125470
> 
> 赞同：0
> 
> 时间：2012-04-12T14:19:03.473
> 
> 标签：mysql, query-optimization

我们有很大的数据库，我们有近两个湖记录，而我们尝试使用下面的查询进行搜索需要太长时间才能带来结果

我的查询

```
SELECT 
      count( DISTINCT e.guid ) AS total
   FROM 
      elgg_entities e
         JOIN elgg_users_entity u 
            ON e.guid = u.guid
         JOIN ( SELECT 
                      subm1.*, 
                      s1.string
                   FROM 
                      elgg_metadata subm1
                         JOIN elgg_metastrings s1 
                            ON subm1.value_id = s1.id ) AS m1 
            ON e.guid = m1.entity_guid
   WHERE 
          m1.name_id = '332'
      AND m1.string LIKE '%96059%'
      AND ( (     e.access_id = -2
              AND e.owner_guid IN ( SELECT guid_one
                                        FROM elgg_entity_relationships
                                        WHERE relationship = 'friend'
                                           AND guid_two =130 )
            )
            OR 
            (     e.access_id IN ( 2, 1, 3, 4, 6, 7 )
              OR ( e.owner_guid = 130 )
              OR (     e.access_id = 0
                   AND e.owner_guid = 130 )
            )
            AND e.enabled = 'yes'
          ) 
```

[我的查询解释](http://www.diigo.com/item/image/2kmq5/pdvq)

编辑，我们在循环中有更多派生查询，所以我需要更多关于@DRapp 的优化

回答

```
SELECT count( DISTINCT e.guid ) AS total
FROM elgg_entities e
JOIN elgg_users_entity u ON e.guid = u.guid
JOIN (

SELECT subm1 . * , s1.string
FROM elgg_metadata subm1
JOIN elgg_metastrings s1 ON subm1.value_id = s1.id
) AS m1 ON e.guid = m1.entity_guid
JOIN (

SELECT subm2 . * , s2.string
FROM elgg_metadata subm2
JOIN elgg_metastrings s2 ON subm2.value_id = s2.id
) AS m2 ON e.guid = m2.entity_guid
WHERE (
(
subm1.name_id = '332'
AND s1.string LIKE '%10001%'
)
AND (
subm2.name_id = '328'
AND s2.string LIKE '%New York%'
)
)
AND (
(
e.access_id = -2
AND e.owner_guid
IN (

SELECT guid_one
FROM elgg_entity_relationships
WHERE relationship = 'friend'
AND guid_two =2336
)
)
OR (
e.access_id
IN ( 2, 1 )
OR (
e.owner_guid =2336
)
OR (
e.access_id =0
AND e.owner_guid =2336
)
)
AND e.enabled = 'yes'
)
AND (
(
subm1.access_id = -2
AND subm1.owner_guid
IN (

SELECT guid_one
FROM elgg_entity_relationships
WHERE relationship = 'friend'
AND guid_two =2336
)
)
OR (
subm1.access_id
IN ( 2, 1 )
OR (
subm1.owner_guid =2336
)
OR (
subm1.access_id =0
AND subm1.owner_guid =2336
)
)
AND subm1.enabled = 'yes'
)
AND (
(
subm2.access_id = -2
AND subm2.owner_guid
IN (

SELECT guid_one
FROM elgg_entity_relationships
WHERE relationship = 'friend'
AND guid_two =2336
)
)
OR (
subm2.access_id
IN ( 2, 1 )
OR (
subm2.owner_guid =2336
)
OR (
subm2.access_id =0
AND subm2.owner_guid =2336
)
)
AND subm2.enabled = 'yes'
) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:20:36.617

我已经重组了您的查询。一些 where 子句是多余的（相对于 e.owner_guid = 130），因此删除了多余的元素。

我添加了 MySQL 子句“STRAIGHT_JOIN”来告诉引擎按照表和相应连接提供的顺序执行。我从您的“m1”作为第一个预查询开始，还包括您的“name_id”和“String”限定符标准。确保您的 elgg_metadata 表在 name_id 列上有索引。此外，由于您没有对元数据或元字符串表中的任何其他列进行任何操作（限定除外），因此我只返回 DISTINCT“entity_id”。这应该为您返回一个快速的小子集。

根据该结果，仅将那些预先限定的对象加入到您的实体、用户和关系表中（在关系上留下连接，因为稍后这是一个“OR”条件）。如果它在实体 ID 上找不到匹配项，请不要再继续下去。

然后，可以应用其余的 OR 标准...如果 owner_guid = 130 OR 在 eer（关系）中通过左连接与 IN（子选择）找到，这将是性能杀手，以及 Access_ID 的最终 OR .

```
SELECT STRAIGHT_JOIN
      count( DISTINCT e.guid ) AS total
   FROM
      ( SELECT DISTINCT
              subm1.entity_id
           FROM 
              elgg_metadata subm1
                 JOIN elgg_metastrings s1 
                    ON subm1.value_id = s1.id 
           WHERE
                  subm1.name_id = '332'
              AND s1.string LIKE '%96059%' ) AS m1 

         JOIN elgg_entities e
            ON m1.entity_id = e.guid
            AND e.enabled = 'yes'

            JOIN elgg_users_entity u 
               ON e.guid = u.guid

            LEFT JOIN elgg_entity_relationships eer
               ON e.owner_guid = eer.guid_one
               AND eer.relationship = 'friend'
               AND eer.guid_two = 130
               AND e.access_id = -2
   WHERE
         e.owner_guid = 130
      OR eer.guid_one = e.owner_guid
      OR e.access_id IN ( 2, 1, 3, 4, 6, 7 ) 
```

# parallel-processing - 为什么在某些机器上使用 openmp 的并行化速度较慢

> ID：10125473
> 
> 赞同：1
> 
> 时间：2012-04-12T14:19:09.907
> 
> 标签：parallel-processing, openmp

我正在开发一个可以并行运行以提高速度的数值模拟。我通常多次运行模拟，然后对各个结果进行平均。这个循环，多次运行，使用 openmp 并行化：

```
 // set the number of threads
    omp_set_num_threads (prms.nthreads);

#pragma omp parallel if(prms.parallel) shared(total) private(iRun)
    {
#pragma omp for schedule(dynamic)
        for (iRun = 1; iRun <= prms.number_runs; iRun++)
        {
            // perform the simulation
        }
    } 
```

实际上没有共享变量，除了`total`，它是一个大小数组，`iRun`其中每个元素都保存相应运行的结果。到目前为止，在我测试的所有机器上，速度都与内核数量成正比；所以使用 4 个线程比没有并行化快 4 倍。但是，在我们的计算集群上，情况并非如此（第二次运行是并行化并使用 2 个线程，因此它的速度应该是原来的两倍）：

```
$ time hop ...

real    0m50.595s
user    0m50.484s
sys 0m0.088s

$ time hop ... -P

real    1m35.505s
user    3m9.238s
sys 0m0.134s 
```

如您所见，并行计算比串行计算慢得多，即使总体而言也是如此。我确信这不是内存问题，并且计算机具有多个内核。

可能是什么问题？可能是openmp实现吗？还是系统中的某些内容配置错误？我真的不知道要找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:46:21.113

似乎缓存一致性将是一个问题。如果`total`是您的共享数组，并且每个线程在 中更新自己的单元格`total`，由于线程正在动态选择工作，因此线程很可能必须更新`total`可能位于同一缓存行中的相邻值。

在您的测试机器上，这可能不会造成太大伤害，因为`total`在共享的 L3 中可能是连贯的，但在需要通过网络来回传输的集群中，这应该会造成伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:06:48.097

由于我没有足够的声誉，我将其添加为答案而不是评论：

您是否确保为不同的模拟同时初始化数据而不是串行？

我知道这会根据您的架构产生巨大的影响。也许您可以提供有关架构的提示。

准确地说：如果你这样做

```
for(i = 1; i < prms.number_runs; ++i)
   allocAndInitializeSimulationData( i )

#pragma omp parallel if(prms.parallel) shared(total) private(iRun)
{
#pragma omp for schedule(dynamic)
    for (iRun = 1; iRun <= prms.number_runs; iRun++)
    {
        // perform the simulation
    }
} 
```

这可能比

```
#pragma omp parallel if(prms.parallel) shared(total) private(iRun)
{
   #pragma omp for schedule(dynamic)
   for(i = 1; i < prms.number_runs; ++i)
      initializeAndAllocSimulation( i )

   #pragma omp for schedule(dynamic)
   for (iRun = 1; iRun <= prms.number_runs; iRun++)
   {
      // perform the simulation
   }
} 
```

# objective-c - 以编程方式将委托设置为每个 UITextField

> ID：10125474
> 
> 赞同：0
> 
> 时间：2012-04-12T14:19:13.983
> 
> 标签：objective-c, ios

我对目标 C 编程或多或少是新手，所以这听起来可能有点奇怪..

我正在尝试从 UIViewController 以编程方式设置许多 UITextFields 的委托，该 UIViewController 是包含 UITextfields 的实际 UIViewController 的父级。基本上它与右键单击 UITextField 并将 UIViewController 设置为此控件的委托相同。

我试图循环 self.view.subview 数组，但我只得到 2 个 UIImageViews （我仍在试图理解这一点......我认为是关于使用静态单元格但我很困惑）。所以下一个选项是遍历类的所有属性。

使用stackoverflow的混合代码我几乎完成了，但我仍然需要将消息发送到文本字段本身。

```
unsigned int count = 0;
objc_property_t *properties = class_copyPropertyList( [self class], &count );
for( unsigned int i = 0; i < count; i++ ) {
    objc_property_t property = properties[i];
    const char* propertyName = property_getName(property);
    NSLog( @"property: %s", propertyName ); //this is actually correctly writing the name of the properties
    objc_msgSend((id)GetTheObjectThroughTheName, @selector(setDelegate:), self);

} 
```

问题是我不知道如何仅使用属性名称来获取与该属性相关的对象......但是如果我可以获取它并使用 objc_msgsend 使用该对象作为接收器，它将得到解决。

有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:38:03.773

我认为如果您改为通过视图层次结构，维护起来会更容易。就像是...

```
- (NSArray *)textFieldsInView:(UIView *)view {
    NSMutableArray * fields = [NSMutableArray array];
    for (UIView *sub in [view subviews]) {
        if ([sub isKindOfClass:[UITextField class]]) {
            [fields addObject:sub];
        } else if ([[sub subviews] count] > 0) {
            [fields addObjectsFromArray:[self textFieldsInView:sub]];
        }
    }
    return fields;
} 
```

...应该为您提供所需的字段列表。`[self textFieldsInView:self.view];`（在 viewDidLoad 中调用。）

# javascript - 使用 Graph API 检索照片的图像位置

> ID：10125480
> 
> 赞同：1
> 
> 时间：2012-04-12T14:19:40.227
> 
> 标签：javascript, facebook, facebook-graph-api

使用 Graph API，如果提供了 ID，我们可以访问任何对象（如用户、事件、照片等）的图像。

因此，如果我需要检索我的用户个人资料图片，我可以通过

[https://graph.facebook.com/100000109274242/图片](https://graph.facebook.com/100000109274242/picture)

我的 ID 是 100000109274242

上面的 URL 将我重定向到[https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/49592_100000109274242_1437093998_q.jpg](https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/49592_100000109274242_1437093998_q.jpg)

这是我的图像的实际 URL。我需要编写一个 JS 函数，我需要使用它来检索照片的实际 URL。我什么也做不了，因为我不明白从哪里开始使用 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:40:49.647

*   首先加载并初始化 Facebook JavaScript SDK：[https](https://developers.facebook.com/docs/reference/javascript/) ://developers.facebook.com/docs/reference/javascript/ （加载部分）
*   仅在 JS SDK 初始化时才应与 FB api 交互。这是一个关闭电话的示例：

    ```
     FB.api(100000109274242+'/picture',function(userImage){
                    alert(userImage);
                }); 
    ```

**UPD** 完整示例。HTML：

```
<div id="fb-root">
  <!-- you must include this div for the JS SDK to load properly -->
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.api(100000109274242+'/picture',function(userImage){
         alert(userImage);
    });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:39:28.103

如果您只想显示图像，您可以直接使用第一个链接：

```
<img src="https://graph.facebook.com/100000109274242/picture"> 
```

由于这是一个 302 重定向，浏览器将处理它并显示最终图片，而无需您使用 JS 解决它。我不确定您是否真的想要 JS 中的 url，或者您认为您需要解决它。

顺便说一句，如果您有兴趣，这里是该 url 的标头响应，它发回一种 jpeg 类型并重定向到实际图形。

```
curl --HEAD https://graph.facebook.com/100000109274242/picture
找到 HTTP/1.1 302
...
内容类型：图片/jpeg
过期：2000 年 1 月 1 日星期六 00:00:00 GMT
位置：https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/49592_100000109274242_1437093998_q.jpg
...
```

# webdriver - GetEval WebDriver

> ID：10125483
> 
> 赞同：0
> 
> 时间：2012-04-12T14:19:45.330
> 
> 标签：webdriver

如何`getEval()`在 webdriver 中使用命令？这里 Selenium RC (1) 代码：

```
String date2 = selenium.getEval("var d=new Date(); d.getDate()+'.'+(((d.getMonth()) < 10 ? \"0\" + (d.getMonth()+1) : d.getMonth()+1)) +'.'+d.getFullYear();"); 
```

如何在 webdriver 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:43:22.000

试试这个：

```
String date2 = (String) ((JavascriptExecutor) driver).executeScript(
"var d=new Date(); d.getDate()+'.'+(((d.getMonth()) < 10 ? \"0\" + (d.getMonth()+1) : d.getMonth()+1)) +'.'+d.getFullYear();"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T12:28:52.827

如果您只想使用日期方法生成随机数，请使用此方法：

```
DateFormat format = new SimpleDateFormat("ddMMyyHHmmSS");
Date date = new Date();
String randomInteger = format.format(date);
return randomInteger; 
```

您也可以在 Selenium RC 和 webdriver 中使用此代码。

# javascript - substr 和 substring 有什么区别？

> ID：10125488
> 
> 赞同：-2
> 
> 时间：2012-04-12T14:19:59.120
> 
> 标签：javascript

> **可能重复：**
> [substr 和 substring 有什么区别？](https://stackoverflow.com/questions/3745515/what-is-the-difference-between-substr-and-substring)

我只想澄清以下差异：-

```
alert("abc".substr(0,2));
alert("abc".substring(0,2)); 
```

上述情况都将返回

`ab`

```
alert("abc".substr(1,2));
alert("abc".substring(1,2)); 
```

上述情况将返回第一个`bc`和第二个`b`

所以基本上`substr`第二个参数是它必须走的长度？因为`substring`它会停止但不包括？

如果我错了，请纠正我，因为我们今天会有一个测验，我不想再犯这个错误了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:25:43.333

是的，[`substr()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)' 的第二个参数是所需子字符串的长度，而[`substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)' 是字符索引，通过网络搜索很容易找到这一事实。

鲜为人知的是它`substr()`是非标准的（直到并包括 ECMAScript 5；ES3 和 ES5 有非规范部分`substr()`）并且在旧版本的 IE 中存在一些错误。此外，[`slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice)它更可取，`substring()`因为它允许从字符串末尾倒数的负字符索引：

```
alert( "Dandelion".slice(-4) ); // Alerts "lion" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:22:07.147

是的，`substring`去一个索引，`substr`而去一个长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:24:33.540

根据以下链接：

[http://rapd.wordpress.com/2007/07/12/javascript-substr-vs-substring/](http://rapd.wordpress.com/2007/07/12/javascript-substr-vs-substring/)

`Substr`需要一个起始索引和您尝试分段的字符串的长度

`Substring`需要一个起始索引和您希望它分割字符串的索引

# javascript - jQuery onload 事件维护“this”

> ID：10125489
> 
> 赞同：0
> 
> 时间：2012-04-12T14:19:59.847
> 
> 标签：javascript, jquery

```
 $(this).load(function(){
  if ($(this).val()!="") {
    $(this).next().css('display','none');
  }
}); 
```

我正在尝试创建一个函数，如果它的值不是none，则隐藏它之后的元素，但是当加载事件启动时，“this”关键字现在指向“Document”！我尝试加载/准备好/绑定加载控件没有ID，我错过了什么......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:22:20.767

您始终可以保留 的值`this`：

```
var it = this;
$(this).load(function() {
  if ($(it).val() != '') ... 
```

但是，为什么您可能会为某种表单字段元素分配“加载”处理程序尚不清楚。

# wpf - 如何从 DataGrid 中获取单元格？

> ID：10125502
> 
> 赞同：1
> 
> 时间：2012-04-12T14:20:37.507
> 
> 标签：wpf, datagrid, .net-3.5, border, datagridcell

我有一个 DataGrid（.net framework 3.5，WPFToolKit）。我想更改某些单元格的边框（左或右）。一，二，三。那么如何才能访问单个单元格呢？这可能吗？我找到了一些解决方案，但它们适用于 .net 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:53:16.650

您可以扩展 DataGrid 并添加以下内容，注意：这只是一个示例，您不需要做我正在做的一些处理：

```
public DataGridCell GetCell(int row, int column)
    {
        var rowContainer = GetRow(row);

        if (rowContainer != null)
        {
            var presenter = FindVisualChild<DataGridCellsPresenter>(rowContainer);
            if (presenter == null)
                return null;

            // try to get the cell but it may possibly be virtualized
            var cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            if (cell == null)
            {
                // now try to bring into view and retreive the cell
                ScrollIntoView(rowContainer, Columns[column]);
                cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            }
            return cell;
        }
        return null;
    }

    public DataGridRow GetRow(int index)
    {
        var row = (DataGridRow)ItemContainerGenerator.ContainerFromIndex(index);
        if (row == null)
        {
            // may be virtualized, bring into view and try again
            ScrollIntoView(Items[index]);
            row = (DataGridRow)ItemContainerGenerator.ContainerFromIndex(index);
        }
        return row;
    } 
```

对于 的 定义`FindVisualChild`, 看[这个 网站](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx).

# asp.net-web-api - 如何在 MVC4 Web API 的自定义绑定器中调用默认模型绑定？

> ID：10125508
> 
> 赞同：9
> 
> 时间：2012-04-12T14:20:47.950
> 
> 标签：asp.net-web-api

我最近在 Stack Overflow 上提出了一个关于[在](https://stackoverflow.com/questions/10096957/how-can-i-invoke-a-custom-model-binder-in-mvc4)Web API 测试版中找到模型绑定的正确扩展点的问题。使用自定义提供程序 /`IModelBinder`让我可以完全控制模型绑定和对值提供程序的访问。

但是，这确实是太多的控制。我只想控制几个值的映射方式，并且不想手动编码本来可以正常工作的模型绑定。

最终，这就是我希望能够做到的：

```
public class MyCustomModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        // Invoke default model binding

        // Pull out custom values
        var value1 = bindingContext.ValueProvider.GetValue("value1");
        var value2 = bindingContext.ValueProvider.GetValue("value2");

        bindingContext.Model.Value1 = DoCustomStuff(value1);
        bindingContext.Model.Value2 = DoCustomStuff(value2);

        return true;
    }

    ... // Define DoCustomStuff
} 
```

看起来很难获得 WebAPI 的默认提供程序。 **有谁知道它是否可以访问以及应该如何在自定义模型绑定器中访问它？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T14:24:03.337

我不确定在 Web API 中，但在 MVC 中，您可以从 DefaultModelBinder 继承并调用 base.BindModel

# google-friend-connect - Google 朋友群按钮停止工作

> ID：10125510
> 
> 赞同：0
> 
> 时间：2012-04-12T14:20:51.890
> 
> 标签：google-friend-connect

在我的站点中，我有一个按钮，我和我的用户用来连接到 GFC。

现在按钮仍然存在，但单击它什么也不做——没有响应——甚至没有 Javascript 错误。

API 最近有什么变化吗？

这是我用来创建带有按钮的页面的代码 - 它非常简单：

```
<body>
<div id='gfclogin' class='login'>
    <a href='#' onclick='google.friendconnect.requestSignIn();'>Connect</a>
</div>
...

<script type='text/javascript' src='http://www.google.com/jsapi'></script>

<script type='text/javascript'>
    google.load('friendconnect', '0.8');
</script>

<script type='text/javascript'>    
    google.friendconnect.container.setParentUrl('/');
    google.friendconnect.container.loadOpenSocialApi({
        site: '11268733983612202568',
        onload: function() {
                if (!window.timesloaded) {
                    window.timesloaded = 1;
                } else {
                    window.timesloaded++;
                }
                if (window.timesloaded > 1) {
                    location.href = location.href.replace(/[&amp;]?to=logout/,'');;
                }
        }});
    google.friendconnect.renderSignInButton({'id': 'gfclogin', 'text': 'Connect', 'style': 'long' });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:09:12.990

[Google 朋友群去年已被弃用](http://googleblog.blogspot.co.uk/2011/11/more-spring-cleaning-out-of-season.html)。它已经不存在了。

# c# - 单击按钮后加载指示器

> ID：10125511
> 
> 赞同：2
> 
> 时间：2012-04-12T14:20:56.960
> 
> 标签：c#, jquery, sql, web-applications

我想在用户单击执行多个 SQL 查询的按钮后显示加载指示器。我尝试在按钮单击时取消隐藏 div，但直到按钮后面的所有工作完成后才会显示。我也尝试了这个解决方案但没有成功 - [http://forums.asp.net/t/1608046.aspx/1](http://forums.asp.net/t/1608046.aspx/1)

有什么建议么？

`code`

```
<asp:Button ID="loadButton" OnClientClick="ShowDiv()" runat="server" 
onclick="loadButton_Click" Text="Go" />

<script type="text/javascript">
    function ShowDiv()
    {setTimeout('document.getElementById("updatediv").style.display = "inline";', 500);}}
</script>

<div ID="updatediv" runat="server" >
<img src="Images/ajax-loader.gif"  /> Updating ....
</div> 
```

`code`

使用上面的链接解决方案时出现以下错误： ![在此处输入图像描述](../Images/9e4989cdac5485cbccffc7e557aaedd5.png)

**这似乎可以解决问题

`code`

```
<script type="text/javascript" language="javascript">
function ShowDiv()
   $('#updatediv').show() }
</script> 
```

`code`

![在此处输入图像描述](../Images/fcfe2a57c3852c55594ec6b609d012e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:23:38.440

您需要在客户端而不是服务器端有 show div。`OnClientClick`除了服务器端`Click`事件之外， ASP 按钮还有一个方便的功能。

这当然是您显示的链接的作用。如果您遵循它，那么它不应该等待完成回发来执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:28:48.450

CSS：

```
<style type="text/css"> 
        #UpdateProgress1 { 
            top:450px; left: 450px; 
            position: absolute; 
            background-color: #C3E1FF; 
           background-repeat: repeat-x; } 
</style> 
```

添加 scriptMananger,UpdatePanel 如图：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
         <asp:UpdatePanel ID="UpdatePanel1" runat="server">
             <ContentTemplate>
                <table runat="server" border="1" width="98%" align="center">
                <tr><td></td></tr>
                </table>
                <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
                            <ProgressTemplate>
                                <img src="Images/Loading.gif" /><br /><center><font color=red>Processing Data...</font></center>
                            </ProgressTemplate>
                        </asp:UpdateProgress>
                </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnprocess" />
            </Triggers>
        </asp:UpdatePanel> 
```

然后给一些计时器

```
System.Threading.Thread.Sleep(3000); 
```

如果您使用的是 Simple JQuery，则需要使用 ajax 方式，以下是使用 ajax 的方式：

```
$('#ShowDiv')
    .hide()  // hide
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
}); 
```

# android - Android：滑动屏幕打开另一个活动？

> ID：10125512
> 
> 赞同：21
> 
> 时间：2012-04-12T14:20:58.010
> 
> 标签：android, gesture, swipe-gesture

我是一名 n00b 程序员，需要很多帮助。

仅出于教程目的，我想做简单的动植物（植物和动物）百科全书

我想让我的主屏幕**像 Android 的主屏幕一样可拖动**。向右滑动打开植物页面，向左滑动打开动物页面。我不知道如何制作**过渡效果**。所以我们可以把它拖到一半来查看下一页的内容，然后拖回来取消它

你们能分享一个链接来制作可拖动的屏幕吗？

之前谢谢

**[编辑]**

@Agarwal 我尝试了您 Link2 中的代码，但它不起作用

我尝试通过将 Toast 放在内部类中来测试是否检测到手势，但没有显示 Toast。Link1 基本相同。

从代码的外观来看，我认为它不能让我的屏幕像 Android 的主屏幕那样可拖动

我的代码：

```
public class Home extends Activity implements OnClickListener {
    private GestureDetector gestureDetector;
    View.OnTouchListener gestureListener;
    ImageButton flora, fauna;
    Intent go;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    initialize();

    gestureDetector = new GestureDetector(new SwipeGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };
}

private void initialize() {
    //find view by id to image button
    //set onClickListener to image button
}

public void onClick(View v) {
    //normal switch and case for each button

}

private void onLeftSwipe() {
    Toast t = Toast.makeText(Home.this, "Left swipe", Toast.LENGTH_LONG);
    t.show();
    go = new Intent("test.apps.FLORA");
    startActivity(go);
}

private void onRightSwipe() {
    Toast t = Toast.makeText(Home.this, "Right swipe", Toast.LENGTH_LONG);
    t.show();
    go = new Intent("test.apps.FAUNA");
    startActivity(go);
}

private class SwipeGestureDetector extends SimpleOnGestureListener {
    private static final int SWIPE_MIN_DISTANCE = 50;
    private static final int SWIPE_MAX_OFF_PATH = 200;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        try {
            Toast t = Toast.makeText(Home.this, "Gesture detected", Toast.LENGTH_SHORT);
            t.show();
            float diffAbs = Math.abs(e1.getY() - e2.getY());
            float diff = e1.getX() - e2.getX();

            if (diffAbs > SWIPE_MAX_OFF_PATH)
                return false;

            // Left swipe
            if (diff > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Home.this.onLeftSwipe();
            } 
            // Right swipe
            else if (-diff > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Home.this.onRightSwipe();
            }
        } catch (Exception e) {
            Log.e("Home", "Error on gestures");
        }
        return false;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T15:44:44.440

我意识到这是一个老问题，但对于其他想知道为什么上面的代码不起作用的人来说，这是因为他没有将 OnTouchListener 设置为 View 对象。这就是为什么他的滑动“事件”没有被拾取，因为没有人在听它。

他可以添加这一行来在他的图像按钮上设置滑动（尽管你可能想要一个更好的 View 对象然后这个）：

```
flora.setOnTouchListener(gestureListener); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-20T12:39:00.557

![在此处输入图像描述](../Images/b2a1b77082ad4fae0653147b40a3a53c.png)

您应该使用 ViewPager ，请参阅以下链接。

[http://android-developers.blogspot.in/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

[http://developer.android.com/training/implementing-navigation/lateral.html#horizo​​ntal-paging](http://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-09T13:05:32.397

**Android Activity 滑动检测**

创建一个基础活动类

```
public abstract class _SwipeActivityClass extends AppCompatActivity
{
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    private GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        gestureDetector = new GestureDetector( this, new SwipeDetector());
    }

    protected abstract void onSwipeRight();
    protected abstract void onSwipeLeft();

    public class SwipeDetector extends GestureDetector.SimpleOnGestureListener
    {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
        {

            // Check movement along the Y-axis. If it exceeds SWIPE_MAX_OFF_PATH,
            // then dismiss the swipe.
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
            {
                return false;
            }

            //toast( "start = "+String.valueOf( e1.getX() )+" | end = "+String.valueOf( e2.getX() )  );
            //from left to right
            if( e2.getX() > e1.getX() )
            {
                if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
                {
                    onSwipeRight();
                    return true;
                }
            }

            if( e1.getX() > e2.getX() )
            {
                if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
                {
                    onSwipeLeft();
                    return true;
                }
            }

            return false;
        }
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev)
    {
        // TouchEvent dispatcher.
        if (gestureDetector != null)
        {
            if (gestureDetector.onTouchEvent(ev))
            // If the gestureDetector handles the event, a swipe has been
            // executed and no more needs to be done.
            return true;
        }

        return super.dispatchTouchEvent(ev);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        return gestureDetector.onTouchEvent(event);
    }
} 
```

然后从**_SwipeActivityClass**扩展您的**活动**

 **实现方法**onSwipeLeft()**和**onSwipeRight()**来启动另一个活动**

# java - 用安卓设备控制电机

> ID：10125516
> 
> 赞同：5
> 
> 时间：2012-04-12T14:21:04.197
> 
> 标签：java, android, port

我正在尝试获取一个自定义的 android 应用程序（在 Packard Bell“自由选项卡”，android 3.2 上运行）来控制外部电机。无需精细控制，只需一种信号“开”和“关”的方式。我可以使用设备上的哪个端口来获取该输出，以及如何对其进行编程？能够简单地打开或关闭 USB 上的电源将是完美的，但我在这个网站上阅读了另一个问题的答案，告诉我这是不可能的 android。

我一直在考虑简单地在耳机插孔上播放声音，然后构建一个继电器来对这个电流做出反应。

对于那些想知道原因的人来说，这款平板电脑将用于训练一只蓝色和金色的金刚鹦鹉（巨大的鹦鹉）。平板电脑将被安装在她的笼子里（适当的保护，但以某种方式让她可以在屏幕上使用她的舌头），并使用专门编写的程序来训练她并连接到自动饲料分配器。我需要的是一种控制这个分配器的简单方法，它也将是定制的，可能带有一个小型直流电机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:24:27.990

如果您的平板电脑支持，这将是[ADK（附件开发工具包）的完美应用程序。](http://developer.android.com/guide/topics/usb/adk.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:24:17.633

有一些方法可以[在 Android 上使用 RS232](https://stackoverflow.com/q/4621580/111210)（使用适当的适配器），因此您可以简单地使用串行端口向继电器或其他东西发出信号来打开/关闭电机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:01:03.887

如果您的平板电脑有蓝牙，我正在研究由 Android 手机通过蓝牙控制的遥控船。基本上，我将一个蓝牙模块和电机的速度控制器连接到一个 Arduino，并编写了一些代码来解释来自 Android 手机上运行的程序的信号。现有的库使这项任务变得非常容易。您可以将小型伺服电机直接连接到 Arduino，而不是这些大功率电机，这非常简单，应该非常适合您的情况。

有关详细信息，请参阅[此博客文章](http://projects.schneidr.de/2012/03/controlling-the-boats-motors-from-android/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-20T10:20:38.637

作为一种选择，您可以使用现有的应用程序，该应用程序使用 IR 来触发相机快门。例如[这个](https://play.google.com/store/apps/details?id=de.dslrremote&feature=search_result#?t=W251bGwsMSwxLDEsImRlLmRzbHJyZW1vdGUiXQ) 你可以很容易地创建红外发射器，查看[这个视频](http://www.youtube.com/watch?v=eHbmXVZTAgA)

然后您可以使用 arduino 获取 IR 信号并移动电机。[如果幸运的话，您可以在本教程](http://learn.adafruit.com/ir-sensor)中获得更多信息 ，您可能会发现一些非常相似的内容，并且不必从头开始。祝你好运，这听起来是一个有趣的项目。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-12T14:40:10.047

您可以使用类似的东西，但没有开箱即用的 java 绑定。不确定您的平板电脑是否支持运行 dll。

[http://www.pc-control.co.uk/motorbee_info.htm](http://www.pc-control.co.uk/motorbee_info.htm)

# forms - 如何在 Symfony2 中显示月份-年份下拉列表

> ID：10125517
> 
> 赞同：12
> 
> 时间：2012-04-12T14:21:06.200
> 
> 标签：forms, symfony

在我的应用程序中，用户只需在两个下拉列表中选择月份和年份即可给出日期。我怎样才能做到这一点？

这是我迄今为止尝试过的：

在我的表格中：

```
$builder->add('date1', 'date', array(
 'widget'      => 'choice',
 'empty_value' => '',
 'format'      => 'MMMM-yyyy',
 'input'       => 'datetime',
 'years'       => range(date('Y'), date('Y') - 30, -1)
) 
```

它实际上可以正常工作并完全按照我的意愿显示，但是在验证表单时，出现错误：

```
This value is not valid 
```

想要的结果的截图：

![截屏](../Images/0dc2f66ecafaee8eda61fac27cad623a.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-09T14:09:21.563

信用卡到期日示例：

```
$builder->add('expirationDate', 'date', array(
 'label' => 'Expiration date',
 'widget' => 'choice',
 'empty_value' => array('year' => 'Year', 'month' => 'Month', 'day' => 'Day'),
 'format' => 'dd-MM-yyyy',
 'input' => 'string',
 'data' => date('Y-m-d'),
 'years' => range(date('Y'), date('Y') + 10),
)); 
```

然后您必须手动呈现该字段。

您表单的树枝模板：

```
{{ form_row(form.expirationDate, {'date_pattern': '<span style="display: none;">{{ day }}</span> {{ month }} <span class="delim">&#47;</span> {{ year }}'}) }} 
```

覆盖`date_pattern`将隐藏日期选择。您将获得**月/年**格式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T14:32:59.930

很简单，datetime 需要一天！

你需要输出一天，像这样：

```
 ->add(
            'ccExpirationDate',
            'date',
            array(
                'format'          => 'MMM-yyyy',
                'years'           => range(date('Y'), date('Y')+12),
                'days'            => array(1),
                'empty_value'     => array('year' => '----', 'month' => '----', 'day' => false)
            )
        ) 
```

枝条：

```
{{ 
    form_widget(
        form.payment.ccExpirationDate.day, 
        { 
            'attr': { 'style': 'display:none' } }
        ) 
}} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-30T09:21:07.797

我正在研究一种可以解决此类问题的自定义表单类型。该解决方案基于@oleg-andreyev 提出的建议。包装到表单类型的逻辑。

用法：

```
<?php
$builder->add('exp_date', 'payum_credit_card_expiration_date'); 
```

表单类型代码：

```
<?php
namespace Payum\Bundle\PayumBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class CreditCardExpirationDateType extends AbstractType
{
    public function finishView(FormView $view, FormInterface $form, array $options)
    {
        if ('choice' == $options['widget']) {
            if (empty($view['day']->vars['value'])) {
                $view['day']->vars['value'] = $view['day']->vars['choices'][0]->value;
            }

            $style = 'display:none';
            if (false == empty($view['day']->vars['attr']['style'])) {
                $style = $view['day']->vars['attr']['style'].'; '.$style;
            }

            $view['day']->vars['attr']['style'] = $style;
        }
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->replaceDefaults(array(
            'years' => range(date('Y'), date('Y') + 9)
        ));
    }

    public function getParent()
    {
        return 'date';
    }

    public function getName()
    {
        return 'payum_credit_card_expiration_date';
    }
} 
```

您可以复制\粘贴它或注册 payum 捆绑包并从中使用此类型（将在下一个主要版本中提供）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-24T14:18:59.900

@Oleg 非常接近正确答案。您必须使用视图转换器来确保 DateTime 得到一天。

```
/* In your formType.php */

$builder->add(
   $builder->create('date1', 'date', array(
       'format'      => 'MMMM-yyyyd', // you need to have 'y', 'M' and 'd' here
       'years'       => range(date('Y'), date('Y') - 30, -1)
   ))
   ->addViewTransformer(new IncompleteDateTransformer()));
) 
```

创建一个转换器：

```
class IncompleteDateTransformer implements DataTransformerInterface
{
/**
 * Do nothing when transforming from norm -> view
 */
public function transform($object)
{
    return $object;
}

/**
 * If some components of the date is missing we'll add those. 
 * This reverse transform will work when month and/or day is missing
 *
 */
public function reverseTransform($date)
{
    if (!is_array($date)) {
        return $date;
    }

    if (empty($date['year'])) {
        return $date;
    }

    if (empty($date['day'])) {
        $date['day']=1;
    }

    if (empty($date['month'])) {
        $date['month']=1;
    }

    return $date;
}
} 
```

创建一个树枝模板，您可以在其中使用来自文件本身的自定义表单主题：

```
{# example.html.twig #}
{% form_theme form _self %}

{% block date_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        {{ block('field_widget') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            <div class="datetime_widget">
                {{ date_pattern|replace({
                '{{ year }}': form_widget(form.year),
                '{{ month }}': form_widget(form.month),
                '{{ day }}':  '',
                })|raw }}
            </div>
        </div>
    {% endif %}
{% endspaceless %}
{% endblock date_widget %}

<h2>Select a date</h2>
{{ form(form) }} 
```

参考：

*   [数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)
*   [表单定制](http://symfony.com/doc/current/cookbook/form/form_customization.html)
*   [选择类型](http://symfony.com/doc/current/reference/forms/types/date.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T12:53:50.870

我没有使用下拉菜单，[而是](https://github.com/smalot/bootstrap-datetimepicker)在`single_text`. 对我来说，将月份和年份保存在数据库中的单独字段中会很困难，因为我是在这个日期之前订购的。所以我决定总是保存所选月份的第一天。我正在使用[DatetimepickerBundle](https://github.com/stephanecollot/DatetimepickerBundle)，我的自定义表单类型如下所示：

```
class MonthPickerType extends AbstractType
{
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'pickerOptions' => array(
                'autoclose' => true,
                'format' => 'mm/yyyy',
                'startView' => 'year',
                'minView' => 'year',
            )
        ));
    }

    public function getParent()
    {
        return 'collot_datetime';
    }

    public function getName()
    {
        return 'month_picker';
    }
} 
```

结果：

[![在此处输入图像描述](../Images/68def7d613824d313a0cad4223d7b545.png)](https://i.stack.imgur.com/XrNug.png)

# sql - 两个表并试图从另一个表访问信息

> ID：10125519
> 
> 赞同：0
> 
> 时间：2012-04-12T14:21:12.163
> 
> 标签：sql, ms-access

我有一张叫做 users 的桌子和另一个叫做 ticket

用户表有

```
id
firstName
lastName 
```

门票表具有以下字段

```
id
ticket
issuedTo
fine
user (numeric id that corresponds to the id field of the user table)
status 
```

我正在尝试设计一个查询，我可以在其中找到由特定人员创建的所有查询

```
SELECT tickets.*, user.firstname, user.lastname FROM tickets WHERE tickets.user INNER JOIN user.id AND user.firstname="John" AND user.lastname="Doe" 
```

我尝试了上述方法但没有奏效，所以我的 SQL 查询一定有问题。请帮忙

我正在使用 Microsoft Access 数据库 2007。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:22:42.427

尝试这个

```
SELECT u.firstName, u.lastName, t.*
FROM users u INNER JOIN tickets t
    ON u.id = t.user
WHERE u.firstName = ???
  AND u.lastName = ??? 
```

# php - 是否可以通过 Streaming API 搜索用户的推文？

> ID：10125527
> 
> 赞同：0
> 
> 时间：2012-04-12T14:21:49.630
> 
> 标签：php, twitter

我正在做一个需要大量推文的项目。从当前返回推文的用户中，例如“frog”，我想使用 STREAMING API 来搜索用户 X 的个人资料以查找更多出现的单词“frog”在搜索 API 中，这很简单，我会得到用户 id当前的推文，然后运行如下代码：

$json = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?user_id='.$user_id,0,null,null);

然后我会在用户时间线中搜索该词的出现。如何在 Streaming API 中执行此操作。我正在使用 PHP 的 Phirhose 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:50:10.300

简而言之。你不能。

Streaming API 是一个实时提要，不允许您“搜索”。为此，您需要将 Search API 或 REST API 与 Streaming API 结合使用

Twitter Streaming API 文档可以在这里找到：[https ://dev.twitter.com/docs/streaming-api](https://dev.twitter.com/docs/streaming-api)

问候

# mongodb - mongodb中的子查询以获取每个中的前N个

> ID：10125528
> 
> 赞同：0
> 
> 时间：2012-04-12T14:21:58.750
> 
> 标签：mongodb, mongoose

所以我需要返回一个主题集合，每个主题都有一个“mostRecentThree”属性，其中包含 3 个最新帖子

我有 2 个收藏

话题

```
{name:'food', foo:bar} 
```

邮政

```
{ topic:'food', created: someDate } 
```

返回结果应该是设置了 recentThree 属性的集合

```
{name:food, recentThree: [postId1, postId2, postId3], foo:bar} 
```

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-08T20:32:00.143

我这么晚才回答，这对其他人有帮助，

将[aggregate()](https://docs.mongodb.com/manual/reference/method/db.collection.aggregate/)与管道一起使用，

*   [$lookup](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/index.html)阶段添加了一个新的数组字段，其元素是“加入”集合中的匹配文档，并且[$llokup 与 agregation pipeline](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/index.html#specify-multiple-join-conditions-with-lookup)指定要在加入集合上运行的管道。管道从连接的集合中确定生成的文档。
*   我们要加入`post`收藏
*   `$match` `topic`和`name`表达式使用`$expr`and`$eq`
*   `$sort`按日期降序*(-1)*顺序，表示最新的将在前
*   `$limit`获取已在上述管道中排序的前 3 条记录

```
db.topic.aggregate([
  {
    $lookup: {
      from: "post",
      as: "recentThree",
      let: { name: "$name" },
      pipeline: [
        {
          $match: {
            $expr: { $eq: ["$topic", "$$name"] }
          }
        },
        { $sort: { created: -1 } },
        { $limit: 3 }
      ]
    }
  }
]) 
```

游乐场：[https ://mongoplayground.net/p/_QXjhk-Qxg4](https://mongoplayground.net/p/_QXjhk-Qxg4)

# android - 为什么 XMPP 不能与蓝牙同时工作？

> ID：10125529
> 
> 赞同：1
> 
> 时间：2012-04-12T14:22:05.200
> 
> 标签：android, bluetooth, xmpp

我编写了一个 android 应用程序，作为通过 XMPP 和蓝牙进行通信的网络中的中间层。出于某种原因，我发现尽管蓝牙连接和 XMPP 连接在我将它们组合在同一个应用程序中时似乎可以单独工作，但蓝牙连接似乎会中断 XMPP 连接并且应用程序失败。以前有没有人遇到过这样的问题，或者可以在我的代码中看到可能导致这种情况的问题？

注意我已经从代码中删除了我的 IP 地址。

```
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;

public class XMPPActivity extends Activity {
    private static final int REQUEST_ENABLE_BT = 1;
    private BluetoothAdapter mBluetoothAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //Thread th = new Thread(new XMPP());
        //th.start();
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mReceiver, filter);
        mBluetoothAdapter.startDiscovery();
        try {
            Thread.sleep(12000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        /*mBluetoothAdapter.cancelDiscovery();
        unregisterReceiver(mReceiver);*/
    }
    final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                // Add the name and address to an array adapter to show in a ListView
                System.out.println(device.getName() + "\n" + device.getAddress());
                if(device.getName().contentEquals("NXT")){
                    Thread connection = new Thread(new ConnectThread(device,mBluetoothAdapter));
                    connection.start();
                }
            }
        }
    };
}

import org.jivesoftware.smack.*;
import org.jivesoftware.smack.ConnectionConfiguration.SecurityMode;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.filter.PacketFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Packet;
public class XMPPClient {
    private String server;
    private int port;
    private ConnectionConfiguration config;
    private XMPPConnection connection;
    private PacketListener messageListener;
    private PacketFilter messageFilter;
    public XMPPClient(String server, int port){
        this.server=server;
        this.port = port;
    }
    public void init() throws XMPPException {
        config = new ConnectionConfiguration(server,port);
        config.setSASLAuthenticationEnabled(false);
        config.setSecurityMode(SecurityMode.disabled);

        connection = new XMPPConnection(config);
        connection.connect();
        messageListener = new MyMessageListener();
        messageFilter = new MessageTypeFilter(Message.Type.chat);
        connection.addPacketListener(messageListener,messageFilter);
    }
    public void performLogin(String username, String password) throws XMPPException{
        if(connection!=null&&connection.isConnected()){
            connection.login(username, password);
        }
    }
    public void destroy(){
        if(connection!=null && connection.isConnected()){
            connection.disconnect();
        }
    }
    public void sendMessage (String message, String buddyJID) throws XMPPException{
        System.out.println(String.format("Sending message '%1$s' with name %2$s", message, buddyJID));
        Message msg = new Message(buddyJID,Message.Type.chat);
        msg.setBody(message);
        this.connection.sendPacket(msg);
    }
    public void createEntry (String user, String name) throws Exception {
        System.out.println(String.format("Creating entry for buddy '%1$s' to user %2$s", user,name));
        Roster roster = connection.getRoster();
        roster.createEntry(user, name, null);
    }
    class MyMessageListener implements PacketListener{
        public void processPacket(Packet packet) {
            if(!(packet instanceof Message))
                return;
            // Extract the useful stuff
            Message message = (Message)packet;
            String from = message.getFrom();
            String body = message.getBody();
            System.out.println(String.format("Recieved message '%1$s' from %2$s", body,from));
        }
    }
}

import org.jivesoftware.smack.XMPPException;

public class XMPP implements Runnable{

    @Override
    public void run() {
        // TODO Auto-generated method stub
        String username = "androidtestuser1";
        String password = "androidtestuser1";
        XMPPClient xmppClient = new XMPPClient("ipAddress",5222);
        try {
            xmppClient.init();
        } catch (XMPPException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            xmppClient.performLogin(username, password);
        } catch (XMPPException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            xmppClient.sendMessage("Hello mate", "testuser1@localhostname/Spark 2.6.3");
        } catch (XMPPException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        boolean isRunning = true;
        while (isRunning){
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        xmppClient.destroy();
    }

}

import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.UUID;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;

public class ConnectThread extends Thread {
    private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    private final BluetoothSocket mmSocket;
    private final BluetoothAdapter mBluetoothAdapter;

    public ConnectThread(BluetoothDevice device, BluetoothAdapter mBluetoothAdapter) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        BluetoothSocket tmp = null;
        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
        this.mBluetoothAdapter = mBluetoothAdapter;
    }

    public void run() {
        // Cancel discovery because it will slow down the connection
        mBluetoothAdapter.cancelDiscovery();
        System.out.println("connecting");
        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }
        System.out.println("connected");
        byte b = 1;
        try {
            writeMessage(b);
        } catch (InterruptedException e) {
            System.out.println("Send failed");
        }
        // Do work to manage the connection (in a separate thread)
        //manageConnectedSocket(mmSocket);
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
    public void writeMessage(byte msg) throws InterruptedException{
        if(mmSocket!=null){
            try {

                OutputStreamWriter out=new OutputStreamWriter(mmSocket.getOutputStream());
                out.write(msg);
                out.flush();

                Thread.sleep(1000);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            //Error
        }
    }
} 
```

# php - 会话未立即在 ModX Evo 中发布

> ID：10125536
> 
> 赞同：2
> 
> 时间：2012-04-12T14:22:23.723
> 
> 标签：php, session-variables, modx, modx-evolution

我正在使用 Modx Evo 1.0.4 并尝试通过 API 检索值并将它们存储到 modx 会话变量中。这是一个用户登录。发送登录凭据后，下一页调用 print_r($_SESSION); 但是，会打印一个空数组。如果我刷新此页面，则会显示加载了会话变量的数组。

我在这里创建会话：

```
require_once '../manager/includes/config.inc.php';
startCMSSession();
$_SESSION['mx_iCode'] = "test";//$_SESSION['iCode'];
$_SESSION['mx_firstName']= $_SESSION['firstName'];
$_SESSION['mx_lastName']= $_SESSION['lastName'];
$_SESSION['mx_address'] = $_SESSION['address1'].' '.$_SESSION['address2'].'       .$_SESSION['address3'];
$_SESSION['mx_city'] = $_SESSION['city'];
$_SESSION['mx_state'] = $_SESSION['stProvince'];
$_SESSION['mx_zip'] = $_SESSION['postalCode']; 
```

并将其打印到发布到的页面上：

```
print_r($_SESSION); 
```

我已经尝试在 modX 的“print_r”页面上调整缓存选项，但每个选项都会产生相同的结果……也就是说，它只在我刷新页面后列出会话变量。

延迟是将外部会话存储到 modX 会话的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:28:37.373

解决了！最后。

在我的外部页面上，我打电话给

`session_start();`

处理一些其他数据。我添加了

`startCMSSession();`

在我需要在片段中访问的值之前。摆脱 session_start() 完全解决了这个问题。

不要在带有 startCMSSession() 的页面上的任何地方使用 session_start()。

# java - 带有附加节点的 Xpath 查询

> ID：10125537
> 
> 赞同：0
> 
> 时间：2012-04-12T14:22:24.503
> 
> 标签：java, xml, dom, xpath

我正在尝试向 xml 文档添加和搜索元素。当我搜索最近添加的节点时，XPath 返回“null”。

这是我的文件

```
 <root>
    </root> 
```

这是我的代码

```
 File xmlFile = new File("C:\\caeycae.xml");
    String uri = "http://www.w3.org/2000/svg";
    DocumentBuilderFactory domFactory = DocumentBuilderFactory
            .newInstance();
    domFactory.setNamespaceAware(false);
    DocumentBuilder builder;
    builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse(xmlFile);
    Element nodo = doc.createElementNS(uri, "e");
    nodo.setAttributeNS(null, "id", "a");

    doc.getDocumentElement().appendChild(nodo);
    Element testElement = (Element) getNode("root/e[@id='a']", doc);
    System.out.println("node:" + testElement);
    System.out.println("xml:" + doc.getDocumentElement()); 
```

控制台输出为：

```
 node: null
    xml: <root>
    <e id="a"/>
    </root> 
```

有没有办法通知 Xpath 文档已更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:48:05.243

您在 SVG 命名空间中创建了新元素，但是当您搜索它时，您在没有命名空间中寻找元素名称“e”。

（无论如何这里应该发生什么有点值得怀疑。XPath 是在 XDM 数据模型上定义的，而不是在 DOM 上。XDM 模型要求当元素位于特定命名空间中时，它必须具有该命名空间的范围内命名空间声明. 使用 DOM 可以创建不满足该约束的树，对于 XPath 在遇到这样的树时应该如何表现，没有人有明确的答案。）

# jsf-2 - 如何从 h:commandLink 重定向 url

> ID：10125540
> 
> 赞同：2
> 
> 时间：2012-04-12T14:22:30.283
> 
> 标签：jsf-2

我是否记得正确或将参数立即设置为 true 应该更改浏览器的 url？如果是正确的，为什么这个链接不能正常工作？

```
 <h:form>
    <h:commandLink immediate="true" action="/url_page.xhtml" value="Label link"/>
    </h:form> 
```

经过一番研究，我发现了一个问题，作者在网址中添加了字符串“？faces-redirect = true”......它像我一样工作吗？我应该设置其他东西吗？感谢您的帮助。

PS：我也尝试了 h:link 但也许它并没有执行所有的事情，因为在那之后下一页返回一个 nullpointerException 但 url 改变了我想要的......

解决方案完成：我将 h:commandLink 的操作更改为调用返回 /url_page?faces-redirect=true 的方法，因为我发现 nullpointer 异常进入了 servlet 过滤器......谢谢@BalusC 和@Matt！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T14:32:03.473

> *我是否记得正确或将参数立即设置为 true 应该更改浏览器的 url？*

没有这个属性有不同的用途。

您可以`h:link`用于导航。`h:commandLink`需要一个 bean 方法作为`action`属性。操作方法的结果是导航目标。如果action方法返回`null`或者是`void`方法，则当前页面将被重新加载。如果它返回一个字符串，JSF 将接受它并导航到该结果。

如果您想从您的操作方法执行重定向，您可以添加`?faces-redirect=true`到您的结果中，例如

```
return "login?faces-redirect=true"; 
```

# c - 如何将我的单体程序拆分为更小的独立文件？

> ID：10125542
> 
> 赞同：10
> 
> 时间：2012-04-12T14:22:34.073
> 
> 标签：c

在我在网上看到的所有代码中，程序总是被分解成许多较小的文件。不过，对于我所有的学校项目，我只需要一个包含我使用的所有结构和函数的巨大 C 源文件就可以了。

我想学习如何将我的程序分成更小的文件，这似乎是专业的标准。（顺便说一句，为什么会这样——仅仅是为了便于阅读吗？）

我四处搜索，我能找到的所有信息都是建立图书馆，我不认为这不是我想做的事。我希望我能提供更多帮助，但我不完全确定如何实现这一点——我只确定我想要的最终产品。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T14:34:53.283

好吧，这正是您想要的：将您的代码拆分为多个库！

举个例子，在一个文件中你有：

```
#include <stdio.h>

int something() {
    return 42;
}

int bar() {
    return something();
}

void foo(int i) {
    printf("do something with %d\n", i);
}

int main() {
    foo(bar());
    return 0;
} 
```

您可以将其拆分为：

mylib.h：

```
#ifndef __MYLIB_H__
#define __MYLIB_H__

#include <stdio.h>

int bar();
void foo();

#endif 
```

*注意：上面的预处理器代码称为“守卫”，用于不运行两次此头文件，因此您可以在多个地方调用相同的包含，并且没有编译错误*

mylib.c：

```
#include <mylib.h>

int something() {
    return 42;
}

int bar() {
    return something();
}

void foo(int i) {
    printf("do something with %d\n", i);
} 
```

myprog.c：

```
#include <mylib.h>
int main() {
    foo(bar());
    return 0;
} 
```

编译它：

```
gcc -c mylib.c -I./
gcc -o myprog myprog.c -I./ mylib.o 
```

现在的优势？

1.  它使您能够在逻辑上拆分代码，然后更快地找到代码单元
2.  它使您能够拆分编译，并仅在修改某些内容时重新编译所需的内容（这是 Makefile 为您所做的）
3.  它使您能够公开某些功能并隐藏其他功能（例如上面示例中的“something()”），并且它有助于为将阅读您的代码的人（例如您的老师）记录您的 API；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:33:15.997

> 仅仅是为了阅读方便吗？

*主要原因*是_

*   **可维护性：**在您所描述的大型单体程序中，更改文件一部分中的代码可能会在其他地方产生意想不到的影响。回到我的第一份工作，我们的任务是加速驱动 3D 图形显示的代码。它是一个单一的、整体的、超过 5000`main`行的函数（在宏伟的计划中并没有那么大，但大到令人头疼），*我们所做的每一个改变都*打破了其他地方的执行路径。这是一路写得很糟糕的代码（`goto`s galore，实际上是数百个单独的变量，具有令人难以置信的信息名称，例如`nv001x`，读起来像老式 BASIC 的程序结构，没有做任何事情的微优化，只是使代码更难阅读，脆弱得要命）但是将它们全部放在一个文件中会使糟糕的情况变得更糟。我们最终放弃了，并告诉客户我们要么必须从头开始重写整个东西，要么他们必须购买更快的硬件。他们最终购买了更快的硬件。

*   **可重用性：**一遍又一遍地编写相同的代码是没有意义的。如果您想出了一些通常有用的代码（例如，XML 解析库或通用容器），请将其保存在单独编译的源文件中，并在必要时将其链接。

*   **可测试性：**将函数分解为各自独立的模块，使您可以将这些函数与其余代码隔离开来进行测试；您可以更轻松地验证每个单独的功能。

*   **可构建性：**好的，所以“可构建性”不是一个真正的词，但是每次更改一两行代码时从头开始重新构建整个系统可能会很耗时。我曾在*非常*大的系统上工作过，其中完整的构建可能需要几个小时。通过分解代码，您可以限制必须重新构建的代码量。更不用说任何编译器都会对它可以处理的文件大小有*一些*限制。我上面提到的那个图形驱动程序？我们试图加速它的第一件事是在打开优化的情况下编译它（从 O1 开始）。编译器吃掉了所有可用内存，然后吃掉了所有可用的交换空间，直到内核崩溃并关闭了整个系统。我们*真的无法建造*启用了任何优化的代码（这可以追溯到 128 MB 是*很多*非常昂贵的内存的时代）。如果该代码被分成多个文件（见鬼，同一个文件中只有多个*函数*），我们就不会遇到这个问题。

*   **并行开发：**没有“能力”这个词，但是通过将源代码分解为多个文件和模块，您可以并行化开发。我在一个文件上工作，你在另一个文件上工作，其他人在第三个文件上工作，等等。我们不会冒险那样踩对方的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T14:29:16.850

> 仅仅是为了阅读方便吗？

不，它还可以为您节省大量编译时间；当您更改一个源文件时，您只需重新编译该文件，然后重新链接，而不是重新编译所有内容。但重点是将程序划分为一组分离良好的模块，这些模块比单个整体“blob”更容易理解和维护。

对于初学者，请尝试遵守 Rob Pike 的[“数据占主导地位”](http://www.lysator.liu.se/c/pikestyle.html)的规则：围绕一堆数据结构（`struct`通常是 's）设计您的程序，并对它们进行操作。将属于单个数据结构的所有操作放入单独的模块中。使所有`static`不需要被模块外函数调用的函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T14:32:57.447

易于阅读的一点是分解文件，但另一点是当您构建一个包含多个文件（头文件和源文件）的项目时，一个好的构建系统只会重新构建已修改的文件，从而缩短构建时间。

至于*如何*将一个单体文件分解为多个文件，有很多方法可以走。对我来说，我会尝试对功能进行分组，例如，所有输入处理都放在一个源文件中，输出放在另一个源文件中，而许多不同函数使用的函数则放在第三个源文件中。我会对结构/常量/宏、组相关结构/等做同样的事情。在单独的头文件中。我还将仅在单个源文件中使用的函数标记为`static`，因此它们不能错误地从其他源文件中使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T14:53:18.803

只是给你一个想法。

创建一个名为 print.c 的文件，将其放入：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void print_on_stdout(const char *msg) {
   if (msg) fprintf(stdout, "%s\n", msg);
}
void print_on_stderr(const char *msg) {
   if (msg) fprintf(stderr, "%s\n", msg);
} 
```

创建一个名为 print.h 的文件，将其放入：

```
void print_on_stdout(const char *msg);
void print_on_stderr(const char *msg); 
```

创建一个名为 main.c 的文件，将其放入：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "print.h"

int main() {
    print_on_stdout("test on stdout");
    print_on_stderr("test on stderr");

    return 0;
} 
```

现在，对于每个 C 文件，编译：

```
gcc -Wall -O2 -o print.o -c print.c
gcc -Wall -O2 -o main.o -c main.c 
```

然后链接编译的文件以生成可执行文件：

```
gcc -Wall -O2 -o test print.o main.o 
```

运行 ./test 并享受。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T14:26:57.877

好吧，我不是专家，但我总是试图在比函数更大的实体中思考。如果我有一组逻辑上属于一起的函数，我将它放入一个单独的文件中。通常，如果功能相似，并且有人想要其中一个功能，他可能还需要该组中的一些其他功能。

拆分单个文件的需要与您为文件使用不同文件夹的原因相同：人们希望对众多功能进行一些逻辑组织，这样他们就不需要 grep 巨大的单个源文件找到需要的。这样，当您考虑/开发程序的某些固定部分时，您可以忘记程序的不相关部分。

拆分的另一个原因可能是您可以通过在标题中不提及它来从其余代码中*隐藏一些内部函数。*这种方式明确地将内部函数（仅在`.c`文件内部需要）与程序的外部“宇宙”感兴趣的函数分开。

一些更高级的语言甚至将“函数属于一起”的概念扩展为“在同一事物上工作的函数，作为一个实体呈现”——并将其称为*类*。

拆分的另一个历史原因是单独的编译功能。如果您的编译器速度很慢（例如，C++ 经常出现这种情况），将代码拆分为多个文件意味着如果您只修改一个位置，则很有可能只需要重新编译一个文件以获取更改. 由于现代 C 编译器与典型处理器速度相比并没有那么慢，因此这对您来说可能不是问题。

# javascript - 有谁告诉我这段代码有什么问题

> ID：10125543
> 
> 赞同：0
> 
> 时间：2012-04-12T14:22:34.793
> 
> 标签：javascript

```
function ge(id){
    this.id=id;
    this.d=document;
    this.w=window;
    return document.getElementById(id);
}
ge.prototype={
    set_in:function(value){
        this.innerHTML=value;
    },
    getIn:function(){
        return document.getElementById(this.id).innerHTML;
    },
    foc:function(){
        document.getElementById(this.id).focus();
    }
} 
```

我想做的是，如果我调用 ge('id').getIn() 将导致该元素的 innerHTML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:25:46.520

您`DOM Node`在该构造函数中返回 a 。我猜您将它用作构造函数，因此您覆盖了`Object`它实际上应该返回的内容。

跳过

```
return document.getElementById(id); 
```

你很好。您可以将该节点引用存储在某个`this.myRef`值中。

* * *

删除该`return`语句后，您需要创建一个实例。像

```
var myGE = new ge('id'); 
```

然后你终于可以打电话了

```
myGE.getin(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:28:55.583

您需要调用`new ge("header").getIn();`而不是仅仅调用`ge("header").getIn();`- 或创建另一个返回新实例的函数`ge`- 例如：

```
function newge(id) {
    return new ge(id);
}
function ge(id){
    this.id=id;
    this.d=document;
    this.w=window;
    return this; //document.getElementById(id);
}
ge.prototype={
    set_in:function(value){
        this.innerHTML=value;
    },
    getIn:function(){
        return document.getElementById(this.id).innerHTML;
    },
    foc:function(){
        document.getElementById(this.id).focus();
    }
}
newge("header").getIn(); 
```

# java - derby DB 中的位数据类型（在 NetBeans 中创建）

> ID：10125546
> 
> 赞同：2
> 
> 时间：2012-04-12T14:22:38.970
> 
> 标签：java, sql, jdbc, derby, netbeans-7

我使用 IDE 中的“创建表”窗口从 Netbeans 7.1 中创建了一个 Derby DB 表。其中一列需要是位类型（我想保存布尔数据 - 1/0）。当我添加该列时，我使用“char for bit data”作为它的类型。当我使用 IDE 的“插入记录”窗口添加行时，会添加行，但是当我尝试使用 SQL 命令添加行时（我最终将如何从我的 java 代码中将数据添加到表中），它总是抛出一个错误。如果我尝试`INSERT INTO APP.TEMP (ID, BOOL) VALUES (3, 0)`响应是`Columns of type 'CHAR () FOR BIT DATA' cannot hold values of type 'INTEGER'.`，如果我尝试`INSERT INTO APP.TEMP (ID, BOOL) VALUES (3, '0')`响应是`Columns of type 'CHAR () FOR BIT DATA' cannot hold values of type 'CHAR'.` 我认为通过使用 SQL 代码 ( `CREATE TABLE...`) 创建表，并将该列简单地设置为“位”，但是当我这样做时，我得到的响应是`Syntax error: Encountered "bit" at line 7, column 8.`

那么我怎样才能在 Derby DB 中有一个布尔字段呢？还是我应该放弃并简单地使用整数？

干杯，埃雷兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:14:07.963

Derby 有一个实际的 BOOLEAN 数据类型，如果那是您正在寻找的：[http ://db.apache.org/derby/docs/10.8/ref/rrefsqljBoolean.html](http://db.apache.org/derby/docs/10.8/ref/rrefsqljBoolean.html)

# java - 客户端上针对不同 Java Web 启动应用程序的不同 Java 版本

> ID：10125552
> 
> 赞同：4
> 
> 时间：2012-04-12T14:23:06.287
> 
> 标签：java, java-web-start

我有 3 个不同的 java web start 应用程序，它们对客户端桌面上的 jvm 版本有不同的要求才能工作。一个是 1.5，两个有不同的 1.6.x 要求。我的经验是，根据您上次安装的 java 版本，一些应用程序可以工作，而另一些则不能。

有没有办法确保所有 3 都可以工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:27:33.710

您可以通过安装任何应用程序所需的更高版本来配置 JAVAWS 以在 Java 1.5 模式下运行应用程序。

[JVM 的 VM 属性](http://java.sun.com/javase/technologies/desktop/javawebstart/faq.html#41)

[要配置的 JNLP 语法](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:31:59.230

> 有没有办法确保所有 3 都可以工作？

是的。

> 一个是1.5 ..

```
<j2se version='1.5*'> 
```

> ..两个有不同的 1.6.x 要求。

有关更多详细信息，请参阅[Java Web Start - 运行时版本控制](http://pscode.org/jws/version.html)。

# sip - 通过 sip 每 20 分钟拨打一个号码的软件

> ID：10125555
> 
> 赞同：-2
> 
> 时间：2012-04-12T14:23:13.480
> 
> 标签：sip, voip, phone-call

我正在寻找一种每 20 分钟通过 sip 调用的软件。实际上我想拨打一个特定的号码，但线路在 20 分钟后掉线。我想在线路掉线时自动重拨....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:30:33.163

您可以使用带有[呼叫控制 XML (CCXML)的](http://www.w3.org/TR/ccxml/)[Voxeo Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)来实现这些要求。Prophecy 使用 SIP 作为其电信接口，使用 CCXML，您可以轻松地拨打外线电话并执行呼叫进度分析以确定线路是否掉线。你可以下载一个免费的 Prophecy 副本，它有两个端口，可以在本地服务器上运行，或者你可以使用他们的托管服务。托管服务将允许您免费对其进行测试，如果您将其投入生产，则需要付费。Voxeo 的技术支持人员非常乐于助人，他们的网站上有关于如何拨打电话和执行呼叫进度分析的文档。

# autohotkey - 每隔一次执行复制（Ctrl-C）的AutoHotKey奇怪问题

> ID：10125558
> 
> 赞同：5
> 
> 时间：2012-04-12T14:23:30.143
> 
> 标签：autohotkey

我是编写自己的 AutoHotKey 脚本的新手，所以这只是我在这里想念的一些愚蠢的东西。

该脚本的目的是让用户选择一些文本并按下热键 ( `Win`- `W`)。菜单弹出，他们单击菜单项。然后应将所选文本复制到剪贴板。这就是我现在要做的。

问题是它第一次工作，然后失败，然后工作，然后失败，等等。它基本上只每隔一段时间工作一次。

我正在运行最新`AutoHotKey_l`版本（unicode 32bit）的 Win7 x64。

我有一个超时`ClipWait`，它基本上只是等待，从不接收复制的文本，并发出 ErrorLevel 1。

这是代码：

```
#SingleInstance force
; EXAMPLE #2: This is a working script that creates a popup menu that is displayed when the user presses the Win-w hotkey.

; Create the popup menu by adding some items to it.
Menu, MyMenu, Add, Demo, Demo

return  ; End of script's auto-execute section.

Demo:
clipboard =  ; Start off empty to allow ClipWait to detect when the text has arrived.
Send ^c
ClipWait, 2  ; Wait for the clipboard to contain text.
if ErrorLevel = 1
{
    MsgBox Copy failed
}
else
{
    MsgBox Copy worked
}
return

#w::Menu, MyMenu, Show  ; i.e. press the Win-w hotkey to show the menu. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T19:55:04.540

当您的脚本在其他程序中表现不定期和/或不同时，
首先要尝试的是模拟按键持续时间和/或按键之间的延迟时间。
这是因为有些程序的设计不是为了处理 AutoHotkey 发送
人工击键的速度。

这是最基本的例子：

```
f1::
Send, {ctrl down}
Sleep, 40
Send, {c down}
Sleep, 40
Send, {c up}
Sleep, 40
Send, {ctrl up}
Return 
```

我们有几种方法可以使它更简洁。
最简单的（但并不总是可取的，因为它在延迟期间阻塞，不像睡眠）
是[`SetKeyDelay`](http://ahkscript.org/docs/commands/SetKeyDelay.htm)命令，它只适用于 SendEvent 和 SendPlay 模式。

```
f2::
SetKeyDelay, 40 ; could be set at the top of the script instead.
Send, {ctrl down}{c down}{c up}{ctrl up}
Return 
```

那些使用 AHK_L 的人可以使用 for 循环和数组：

```
f3::
For i, element in array := ["{ctrl down}","{c down}","{c up}","{ctrl up}"] {
   Sendinput, %element%
   Sleep, 40
} Return 
```

那些使用 AHK basic（或 AHK_L）的人可以使用`Loop, Parse`：

```
f4::
list := "{ctrl down},{c down},{c up},{ctrl up}"
Loop Parse, list, `,
{
    Sendinput, %A_LoopField%
    Sleep, 40
} Return 
```

了解这三种[Sendmodes](http://ahkscript.org/docs/commands/SendMode.htm)很有用。
更多信息可以在[发送命令页面](http://ahkscript.org/docs/commands/Send.htm)的底部找到。

# reporting - 对话框在按钮单击时将值传递给另一个对话框

> ID：10125559
> 
> 赞同：1
> 
> 时间：2012-04-12T14:23:33.647
> 
> 标签：reporting, x++, axapta

我想知道这是否可能，并相信它与对话框有关。

我在运行报表的表单上有一个菜单项按钮，当单击此按钮时，将向用户显示一个对话框表单，该表单从表单中复制所选值的唯一 ID。

在底部有一个运行另一个报告的按钮，这只是不时运行并且必须运行该按钮，这部分工作正常。

我需要发生的是，当单击运行第二个报告的按钮时，当前选定的值将传递给该报告。现在这不能以正常方式完成，因为值已经传递给第一个报告，所以我假设必须将值从第一个对话框复制到第二个？

如果是这样，有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:51:05.340

我将假设该报告是 MorphX 报告（不是 SSRS），并且对话框位于扩展`RunBaseReport`.

为第一个和第二个报告中的每个对话框字段创建一个 parm 方法。

然后在第二个报告的主报告中输入第一个报告的值，如下所示：

```
static void main(Args args)
{
    SecondReport report = new SecondReport();
    report.getLast(); // to fetch saved values
    // args.caller() must be set in FirstReport
    report.parmItemId(args.caller().parmItemId()); // ItemId to be passed around
    if (report.prompt())
        report.run();
} 
```

# yql - 使用 URL 时 YQL 请求不起作用

> ID：10125561
> 
> 赞同：0
> 
> 时间：2012-04-12T14:23:34.330
> 
> 标签：yql, yahoo-api

谁能告诉我这个 YQL 请求有什么问题：

```
http://query.yahooapis.com/v1/public/yql?&format=json&q=select%20*%20from%20html%20where%20url=%22http%3A%2F%2Fsearch-movies-jc4u2tqsvf5jgd7xxmceezlu24.us-east- 1.cloudsearch.amazonaws.com%2F2011-02-01%2Fsearch%3Ffacet%3Dgenre%26return-fields%3Dactor%2Cdirector%2Ctitle%2Cyear%2Ctext_relevance%26q%3DLove%26bq%3D%28and%20%28field%20genre% 20'浪漫'%29%29%22%20and%20xpath=%22*%22

```

当我提交它直接抱怨的 URL 时，它工作正常。我相信我正在适当地转义所有保留字符:(

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:02:30.533

在发出 YQL 请求之前，您需要对 bq 参数中的空白进行 url 编码。YQL 选择语句将是：

```
select * from html where url="http://search-movies-jc4u2tqsvf5jgd7xxmceezlu24.us-east-1.cloudsearch.amazonaws.com/2011-02-01/search?facet=genre&return-fields=actor,director,title,year,text_relevance&q=Love&bq=(and%20(field%20genre%20'Romance'))" and xpath="*" 
```

请注意 bq URL 参数中的空白编码。YQL 请求将是：

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fsearch-movies-jc4u2tqsvf5jgd7xxmceezlu24.us-east-1.cloudsearch.amazonaws.com%2F2011-02-01%2Fsearch%3Ffacet%3Dgenre%26return-fields%3Dactor%2Cdirector%2Ctitle%2Cyear%2Ctext_relevance%26q%3DLove%26bq%3D(and%2520(field%2520genre%2520'Romance'))%22%20and%20xpath%3D%22*%22&diagnostics=true 
```

# blackberry - Blackberry 中的自定义 LabelField 无法正确显示文本

> ID：10125565
> 
> 赞同：3
> 
> 时间：2012-04-12T14:23:45.167
> 
> 标签：blackberry, custom-fields, labelfield

我正在我的应用程序中实现自定义标签字段。它适用于小字体，当我增加字体大小时，它不会正确显示。在这里你可以在这张图片中看到它。

![在此处输入图像描述](../Images/5cabfc4b14fa9bdfa992ad696b179943.png)

您可以在图像中看到它只显示了一半的文本。我该如何克服这一点。

在这里，我给出了自定义 LabelField 的代码。请告诉我我做错了什么。

```
public class CustomLabelField extends Field  
{  
    private String label;  
    private int fontSize;
    private int foregroundColor;  
    private int backgroundColor;  
    public CustomLabelField(String label, int fontSize, int foregroundColor,  
                     int backgroundColor,long style)  
    {  
        super(style);  
        this.label = label;  
        this.foregroundColor = foregroundColor;  
        this.backgroundColor = backgroundColor;  
        this.fontSize = fontSize;
    }  

   protected void layout(int width, int height) {  

       setExtent(width, getFont().getHeight());  

   }  

    protected void paint(Graphics graphics) {  

       graphics.setBackgroundColor(backgroundColor);  
       graphics.clear();  
       graphics.setFont(setMyFont());  
       graphics.setColor(foregroundColor);  
       graphics.drawText(label, 0, 0, (int)(getStyle()& DrawStyle.ELLIPSIS | DrawStyle.HALIGN_MASK),getWidth() - 6);  
   }  

   // Get font for the label field  
   public Font setMyFont()  
   {  
     try {  
         FontFamily alphaSansFamily = FontFamily.forName("BBAlpha Serif");  
         Font appFont = alphaSansFamily.getFont(Font.PLAIN, fontSize, Ui.UNITS_pt);  
         return appFont;  

    } catch (ClassNotFoundException e) {  
        // TODO Auto-generated catch block  
        e.printStackTrace();  
    }  
    return null;  
  }  

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:01:37.127

在您的`layout`方法中，您将字段的高度设置为当前的默认字体高度。这意味着当您使用较大的字体进行绘制时，文本会被裁剪。要解决此问题，请将您的布局方法更改为：

```
protected void layout(int width, int height) {  

    int fieldHeight = Ui.convertSize(fontSize, Ui.UNITS_pt, Ui.UNITS_px);
    setExtent(width, fieldHeight);  
} 
```

这会将您所需的字体大小转换为像素，并使用它来设置您的字段高度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T15:44:37.770

`CustomLabelField`仅仅通过扩展来创建你的`LabelField`呢？然后布局、绘制文本的复杂性（对齐、换行、样式考虑等）和其他任务将由自己完成，`LabelField`如果您在构造函数中设置适当的样式位。

你可以`Field`通过调用来应用任何字体`setFont(Font)`。该字段本身将调整其大小和绘图。检查以下片段。

* * *

CustomLabelField 实现：

```
class CustomLabelField extends LabelField {
    private int foregroundColor;
    private int backgroundColor;

    public CustomLabelField(String label, int foregroundColor,
            int backgroundColor, long style) {
        super(label, style);
        this.foregroundColor = foregroundColor;
        this.backgroundColor = backgroundColor;
    }

    protected void paint(Graphics graphics) {
        graphics.setBackgroundColor(backgroundColor);
        graphics.clear();
        graphics.setColor(foregroundColor);
        super.paint(graphics);
    }
} 
```

* * *

例子：

```
class MyScreen extends MainScreen {

    public Font getMyFont(int fontSize) {
        try {
            FontFamily alphaSansFamily = FontFamily.forName("BBAlpha Serif");
            return alphaSansFamily.getFont(Font.PLAIN, fontSize, Ui.UNITS_pt);
        } catch (Exception e) {
        }
        return null;
    }

    public MyScreen() {
        CustomLabelField clf = new CustomLabelField(
                    "Main",
                    Color.WHITE,
                    Color.BLACK,
                    LabelField.ELLIPSIS);

        // Font setup
        clf.setFont(getMyFont(20));

        add(clf);
    }
} 
```

# python - 如何在字典python中随机选择多个键及其值

> ID：10125568
> 
> 赞同：26
> 
> 时间：2012-04-12T14:23:50.760
> 
> 标签：python

我有一本这样的字典：

```
user_dict = {
            user1: [(video1, 10),(video2,20),(video3,1)]
            user2: [(video1, 4),(video2,8),(video6,45)]
            ...
            user100: [(video1, 46),(video2,34),(video6,4)]                 
            } 

(video1,10) means (videoid, number of request) 
```

现在我想随机选择 10 个用户并进行一些计算，例如

```
 1\. calculate number of videoid for each user. 
 2\. sum up the number of requests for these 10 random users, etc 
```

那么我需要将随机数分别增加到20、30、40

但是“random.choice”一次只能选择一个值，对吧？如何选择多个键和每个键后面的列表？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-12T14:25:13.837

这就是[`random.sample()`](http://docs.python.org//library/random.html?highlight=random.choice#random.sample)：

> 返回从总体序列中选择的唯一元素的 ak 长度列表。用于无放回的随机抽样。

这可用于选择键。随后可以通过正常的字典查找来检索这些值：

```
>>> d = dict.fromkeys(range(100))
>>> keys = random.sample(list(d), 10)
>>> keys
[52, 3, 10, 92, 86, 42, 99, 73, 56, 23]
>>> values = [d[k] for k in keys] 
```

或者，您可以直接从`d.items()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T20:45:05.930

如果您想返回字典，则可以使用字典推导而不是[Sven Marnach 回答](https://stackoverflow.com/a/10125602/2514130)中的列表推导，如下所示：

```
d = dict.fromkeys(range(100))
keys = random.sample(d.keys(), 10)
sample_d = {k: d[k] for k in keys} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-12T12:58:55.587

我有这个问题的工作，

```
import random

def random_a_dict_and_sample_it( a_dictionary , a_number ): 
    _ = {}
    for k1 in random.sample( list( a_dictionary.keys() ) , a_number ):
        _[ k1 ] = a_dictionary[ k1 ]
    return _ 
```

**在你的情况下：**

```
user_dict = random_a_dict_and_sample_it( user_dict , 2 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-20T12:14:00.903

简单地

```
import random
mydict = {"a":"its a", "b":"its b"}
random.sample(mydict.items(), 1)

# [('b', 'its b')]
# or
# [('a', 'its a')] 
```

# php - 如何处理上传到 php 服务器的 jsonarray 字符串？

> ID：10125572
> 
> 赞同：0
> 
> 时间：2012-04-12T14:23:55.787
> 
> 标签：php, android

c我正在使用此代码将 jsonarray 上传到服务器（也许有更好的方法）：

```
 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("json_a", json_a.toString()));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            String responseText = EntityUtils.toString(response.getEntity()); 
```

我在 LogCat 中得到的响应是：

```
04-10 23:05:39.833: D/ProviderTester(601): The response text is POST = array (
04-10 23:05:39.833: D/ProviderTester(601):   'json_a' => '[name=Mike, datetime=2012-04-10 21:29]\\",\\"[name=Roger, datetime=2012-03-10 21:29]\\"]\\"]',
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): GET = array (
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): request = array (
04-10 23:05:39.833: D/ProviderTester(601):   'Content-Length' => '174',
04-10 23:05:39.833: D/ProviderTester(601):   'Content-Type' => 'application/x-www-form-urlencoded',
04-10 23:05:39.833: D/ProviderTester(601):   'Host' => 'graasdfon.hostei.com',
04-10 23:05:39.833: D/ProviderTester(601):   'Connection' => 'Keep-Alive',
04-10 23:05:39.833: D/ProviderTester(601):   'User-Agent' => 'Apache-HttpClient/UNAVAILABLE (java 1.4)',
04-10 23:05:39.833: D/ProviderTester(601):   'Expect' => '100-Continue',
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): 
04-10 23:05:39.833: D/ProviderTester(601): <!-- www.000webhost.com Analytics Code --> 
```

php 脚本服务器端如下所示：

```
<?php

$out="POST = " . var_export($_POST, true) . "\n";
$out.="GET = " . var_export($_GET, true) . "\n";
$out.="request = " . var_export(getallheaders(), true) . "\n";
print $out;

?> 
```

我看到 'json_a' => '[name=Mike, datetime=2012-04-10 21:29]\",\"[name=Roger, datetime=2012-03-10 21:29]\"]\ "]' 包含我想要的数据，但是如何从对象中取出名称和日期？

编辑：当我在 logcat 中打印出 JSON 对象时，这就是它的样子（不是来自服务器的响应）：

```
 4-10 23:33:36.013: I/JSONInfo(601): JSON object: ["[name=mike, datetime=2012-04-10 23:33]","[name=red, datetime=2012-04-10 23:12]"] 
```

我不确定 ["[name=mike, datetime=2012-04-10 23:33]","[name=red, datetime=2012-04-10 23:12]"] 是否是正确的 json 对象打印成字符串的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:26:21.867

如果 JSON 正确，您可以使用`json_decode()`将数据作为数组或对象获取。实际上，您发送的内容看起来不是有效的 JSON。

# php - 如何在服务器端（php）接收使用 XMLHttpRequest 从浏览器发送的数据？

> ID：10125581
> 
> 赞同：3
> 
> 时间：2012-04-12T14:24:24.197
> 
> 标签：php, javascript, xmlhttprequest

我无法理解如何在我的 PHP 脚本中从 XMLHttpRequest 获取 blob。我在 JS 中有这样的代码：

```
var req = new XMLHttpRequest();          // create instance

var file = document.getElementById('file').files[0];     // get File Object from <input type=file />. It is picture

req.open("POST", “uploader.php”, true); // make request

req.setRequestHeader("Content-Type", file.type);   set request headers
req.setRequestHeader("Content-Length", file.size);

req.send(file);                 // send request with file-blob

if (req.readyState == 4 && req.status == 200) {
      alert("result = " + req.responseText);
} 
```

我了解如何将 blob 发送到服务器，但不了解如何以及从何处获取它。我尝试使用`$_POST`,`$_GET`和`$_FILES`全局数组，但它们没有任何文件。我什至尝试`file`像这样添加到网址：

```
req.open("POST", “uploader.php?file=” + file, true); 
```

这也不是解决方案。

在这里阅读答案，我发现我可以使用`php://input`. 我试过了，是的，我得到了一些原始数据。将彻底检查这个解决方案。但是想问这是唯一的方法吗？如果不是，其他是什么？那么哪一个是最正确的呢？

此外，当我设置标题时`("Content-Length", file.size)`，`console.log`显示错误并显示“拒绝设置不安全的标题“内容长度”。这个标题不是必需的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:37:33.347

看看下面的帖子：

[使用ajax和php上传图片](https://stackoverflow.com/questions/1558838/image-upload-with-ajax-and-php)

您不能真正通过 XmlHttpRequest 上传 blob，但您可以使用隐藏的 iframe 创建类似 AJAX 的感觉。

看起来有一些 JQuery 插件也可以帮助你。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:37:46.707

尝试将其用于您的标题：

```
req.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

# c# - 错误消息 Nullable 对象必须有一个值

> ID：10125585
> 
> 赞同：6
> 
> 时间：2012-04-12T14:24:28.210
> 
> 标签：c#, asp.net

我的 DTO 对象在运行时出现空错误：

![在此处输入图像描述](../Images/55a9522a8bcbabaacf62d32b4d3af0f6.png)

我不明白，因为列可以为空：

```
[DataContract]
public class SearchParametersCompanyDTO
{
    public SearchParametersCompanyDTO();

    [DataMember]
    public CompanyColumnsEnumDTO? Column { get; set; }
    [DataMember]
    public int PageIndex { get; set; }
    [DataMember]
    public int PageSize { get; set; }
    [DataMember]
    public string Term { get; set; }
}

[DataContract]
public enum CompanyColumnsEnumDTO
{
    [EnumMember]
    CompanyName = 0,
    [EnumMember]
    City = 1,
    [EnumMember]
    PostCode = 2,
} 
```

这一定是一个转换问题，因为在 Column 上接受了 null：

```
 var dto = new SearchParametersCompanyDTO
        {
            PageIndex = pageIndex,
            PageSize = defaultPageSize,
            Term = term,
            Column = null
        }; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:26:24.310

您正在尝试将空值强制转换为枚举类型（而不是可为空的枚举类型）。我猜您实际上想将演员表更改为：

```
Column = (CompanyColumnsEnumDTO?) column 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:26:52.593

这里的问题是您将 value`column`转换为 non-nullable value `CompanyColumnsEnumDTO`。基于它看起来像的异常`column`是`null`here并且适当地转换为非null会引发异常。你的意思是改为投到`CompanyColumnsEnumDTO?`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:26:45.787

您需要转换为 (CompanyColumnsEnumDTO?) 而不是 (CompanyColumnsEnumDTO)

# tcp - tcp 数据包注入 - ？

> ID：10125589
> 
> 赞同：0
> 
> 时间：2012-04-12T14:24:42.797
> 
> 标签：tcp, packet-injection

我在主机 192.168.1.13 上有 TCP 客户端，从静态 ip 176.132.74.74 读取数据...我需要将精心制作的数据包注入此连接以测试我的防火墙是否可以过滤掉欺骗性流量。我从主机 192.168.1.15 尝试了“nemesis”1.4beta3： nemesis tcp -v -D 192.168.1.13 -S 176.132.74.74 -fS -fA 但出现错误：“无法分配套接字描述符” TCP 紧急指针： 0 我在使用 nemesis 时犯了一些错误，或者我只能从同一主机（192.168.1.13）使用它？是否有其他类似的工具可以用于此目的？我很感激一些建议：我在使用 nemesis 时找不到太多建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:02:01.090

你可以试试[libcrafter](http://code.google.com/p/libcrafter/)。是 C++ 生成和嗅探网络数据包的高级库。并且还包含一个非常幼稚的 TCP/IP 堆栈实现（尚未处理分段）在 USER 级别，可以使用精心制作的 TCP 流。例如，您可以控制连接的 ACK 和 SEQ 编号，或使用已建立连接的 SEQ/ACK 编号和 IP。因此，可以向连接注入流量并劫持它。

在用户级别，我的意思是该库与“内核背面”上的 TCP 流一起使用。因此，要正确使用 TCP 流类，您需要稍微使用 IPTABLES。

尽管（还）没有 TCPConnection 类的文档，但您可以查看“示例”git 存储库中的一些示例。

干杯。

# javascript - 来自 MySQL 的 JQuery 格式日期。如何？

> ID：10125590
> 
> 赞同：1
> 
> 时间：2012-04-12T14:24:44.727
> 
> 标签：javascript, php, jquery, mysql

我在 MySQL 数据库中有以下日期格式，并且想知道重新格式化该日期并输出我的想法的最佳方法是什么。

MySQL：2012-04-12

预期产出：2012 年 4 月 12 日，星期四

也许我可以在 MySQL 查询中格式化它？还是使用 Java 脚本？

谁能提供两者的样本以便我学习？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:41:27.203

试试[moment.js](http://momentjs.com/)

例如 var day = moment("2012-04-12", "DDDD, MMMM DD YYYY");

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:29:30.740

你有很多方法可以做到这一点：

*   使用 MySQL，使用`DATE_FORMAT` [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)
*   使用 PHP，使用`strtotime`and `date`：`date('J, M d Y', strtotime($yourdate))`
*   使用 JavaScript，将日期拆分为“-”，然后再次创建日期`new Date()`
*   此外（如 t0s6i 所解释的），使用 JavaScript，您可以使用库[momentjs](http://momentjs.com)执行以下操作：`date = moment("2012-04-12", "DDDD, MMMM DD YYYY");`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:30:05.487

对于使用 jquery 在 javascript 中进行格式化，请查看其他帖子。

[最好的 JavaScript 日期解析器和格式化程序？](https://stackoverflow.com/questions/206790/best-javascript-date-parser-formatter)

我可能会使用实际提取日期表单 MySql 的代码进行格式化。您使用什么语言？php、asp、java...？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:30:44.023

PHP 有一个方便的类来读取特定格式的日期：

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

```
$result = mysql_query("select date_column from table_name limit 1");
$array = mysql_fetch_array($result);

print DateTime::createFromFormat('Y-m-d')->format('jS M Y'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:31:41.400

最好的方法通常是在输出之前用 PHP 端格式化值：

```
$date = DateTime::createFromFormat('Y-m-d', $row['the_date']);
echo $date->format('J, M d Y'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:35:57.533

当您与 mysql 约会时，您会在 Php 中收到它吗？

为了优化你的性能，使用原生 php 日期函数来转换你的 mysql 日期，很简单：

阅读官方 PHP 文档 => [http://php.net/manual/fr/function.date.php](http://php.net/manual/fr/function.date.php)

Php 处理比 javascript 处理更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T14:38:05.597

在 javascript 中，您可以使用下面的函数[**DEMO格式化您的日期**](http://jsfiddle.net/CZqTJ/1/)

**注意：**以下功能另外显示日期（例如：3 日、12 日等）。`if..else if`如果您不想要，请删除以下代码中的所有内容。

```
function formatDate(d) {

    var d_names = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

    var m_names = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

    var curr_day = d.getDay();
    var curr_date = d.getDate();
    var sup = "";
    if (curr_date == 1 || curr_date == 21 || curr_date == 31) {
        sup = "st";
    } else if (curr_date == 2 || curr_date == 22) {
        sup = "nd";
    } else if (curr_date == 3 || curr_date == 23) {
        sup = "rd";
    } else {
        sup = "th";
    }

    var curr_month = d.getMonth();
    var curr_year = d.getFullYear();

    return  d_names[curr_day] + " " + m_names[curr_month] + " " + curr_date + sup + "  " + curr_year;

} 
```

**参考：** [Javascript 日期格式](http://www.webdevelopersnotes.com/tips/html/getting_current_time_using_javascript.php3)（以上是 Format #5 的修改版本）

# configuration - 如何配置石墨中的碳以冗余存储指标？

> ID：10125600
> 
> 赞同：3
> 
> 时间：2012-04-12T14:25:12.247
> 
> 标签：configuration, metrics, graphite

我有以下问题：我想从多个位置（或服务器）收集数据。现在我想将所有收集的数据本地存储在该位置（通过碳缓存、存储模式等），但除此之外，我还想聚合（碳聚合器）这些信息（以减少网络负载）并发送它到另一个（主要或中央）位置，存储来自不同位置的所有重要指标。其原因是，与多个地点的互联网连接并不总是像发展中国家的某些地点那样可靠。因此，包含所有数据的本地备份将降低丢失重要数据的风险。我想到了一个使用 carbon-relay 复制数据的设置。一个进入碳缓存，另一个进入碳聚合器，将其转发到主要位置。这甚至可能吗？我将如何实现这种配置？或者实现我的目标的另一种可能性。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:03:16.643

是的，你会使用碳继电器来做到这一点。

配置您的 carbon.conf 进行中继： http: [//graphite.readthedocs.org/en/latest/carbon-daemons.html](http://graphite.readthedocs.org/en/latest/carbon-daemons.html)

然后需要配置relay-rules.conf：[http ://graphite.readthedocs.org/en/latest/config-carbon.html](http://graphite.readthedocs.org/en/latest/config-carbon.html)

这是一个更详细的示例说明：[https ://answers.launchpad.net/graphite/+question/126700](https://answers.launchpad.net/graphite/+question/126700)

# nhibernate - 选择一个带有休眠查询的表达式

> ID：10125603
> 
> 赞同：2
> 
> 时间：2012-04-12T14:25:21.687
> 
> 标签：nhibernate, queryover

使用 nHibernate QueryOver 我想选择一系列包含聚合表达式的值。所以sql可能是：

```
SELECT SUM(Total / (TaxRate + 1)) Totals FROM Contract Group By CustomerId 
```

我看不出在哪里（或是否）支持它。我可以将 where 子句编写为表达式，但不能将 select 中的列定义为表达式，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:24:35.537

由于我没有您的代码，因此无法验证任何内容，但您可以尝试以下操作：

```
var dividePropertyProjection = Projections.SqlProjection(
                "SUM(Total/TaxRate+1) as Totals", new string[] {"Totals"}, new IType[] {NHibernateUtil.Decimal});  //Assuming the sum is decimal, you can change it

var list=   Session.QueryOver<Contract>().Select(Projections.Group<Contract>(x=>x.CustomerId),dividePropertyProjection).List(); 
```

不确定会返回什么列表，我猜它应该返回`CustomerId, Sum`组合。

希望有帮助

# c# - 为什么 Process.WaitForExit 不等待？

> ID：10125607
> 
> 赞同：2
> 
> 时间：2012-04-12T14:25:31.497
> 
> 标签：c#, process

为什么 Process.WaitForExit 不等待？

```
static void Main(string[] args)
    {
        while (true)
        {
            try
            {
                if (Process.GetProcessesByName("ServerAPPFileManager").Length > 0)
                {
                    Process clsProcess = Process.GetProcessesByName("ServerAPPFileManager")[0];
                    Console.WriteLine(clsProcess.ProcessName);
                    clsProcess.WaitForExit();
                }
                if (System.IO.File.Exists(System.IO.Path.Combine(Environment.CurrentDirectory, "ServerAPPFileManager.exe")))
                {
                    Console.WriteLine("File Found");
                    Process p = new Process();
                    p.StartInfo.Verb = "runas";
                    p.StartInfo.FileName = System.IO.Path.Combine(Environment.CurrentDirectory, "ServerAPPFileManager.exe");
                    p.Start();
                }
            }
            catch(Exception e)
            {
                Console.Write(e.Message);
                System.Threading.Thread.Sleep(1000);
            }
        }
    } 
```

它不断循环并一次又一次地启动应用程序！

**编辑：**

它现在起作用了，它不起作用，因为它是这样的`clsProcess.WaitForExit(1000);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:28:30.127

这段代码被包裹在一个循环中，循环体内`while(true)`没有`break`, `throw`or语句。`return`它确实会导致无限循环。

如果您想在`WaitForExit`完成后退出循环，那么您需要引入一个`break`语句来执行此操作。

```
clsProcess.WaitForExit();
break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:30:21.043

检查`if (Process.GetProcessesByName("ServerAPPFileManager").Length > 0)`不返回错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:31:20.500

嗯，这就是你编码的方式。它正在等待退出，然后在下一个 if 语句中再次启动它。正如 Jared 指出的那样，它一直在循环，无法突破。所以它启动它，等待它退出，然后再次启动它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:43:38.663

问题可能是您没有在已创建的 Process 对象上调用 WaitForExit，而是在从 Process.GetProcessesByName() 返回的 Process 对象上调用。相反，请尝试：

```
Process p = new Process(); 
// etc
p.Start();
p.WaitForExit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:29:05.180

在 while 语句中将其删除并将其添加到计时器中.. 验证是否 process.hasexited=true 然后再次调用您的进程，否则验证是否 process.responding=true 然后等待否则强制进程终止

# wpf - SnapsToDevicePixels、UseLayoutRounding 和 BitmapScalingMode 似乎不起作用

> ID：10125608
> 
> 赞同：4
> 
> 时间：2012-04-12T14:25:38.550
> 
> 标签：wpf, xaml, snapstodevicepixels

当我在 WPF 上使用 Visual Studio C# 2010 进行编程时，有些文本非常不清楚，无论将 SnapsToDevicePixels 设置为 true、UseLayoutRounding 设置为 true 并将 BitmapScalingMode 设置为 HighQuality。您可以在图像中看到问题...

[http://i.stack.imgur.com/WXPAF.png](http://i.stack.imgur.com/WXPAF.png)

有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:31:05.550

您可以尝试使用`TextOptions.TextFormattingMode`. [MSDN 参考](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)。

# sap-ase - 如何从 Toad 中的存储过程中获取返回码？

> ID：10125611
> 
> 赞同：1
> 
> 时间：2012-04-12T14:25:44.503
> 
> 标签：sap-ase, toad

我有一个测试程序：

```
CREATE PROCEDURE bfmsp_testproc(@test CHAR(32) = NULL)
AS
BEGIN
  IF @test IS NULL
    RETURN

  IF @test = 'BadReturnCode'
    RETURN 1

  /* Bad test, should probably do something */
  PRINT 'Invalid test code'
  RETURN 1
END 
```

但是，当我在 Toad for Sybase 中运行它时，我无法获得返回码。

```
bfmsp_testproc

bfmsp_testproc 'invalid'

bfmsp_testproc 'BadReturnCode' 
```

没有结果集（显然）。我在结果的“消息”选项卡中看到了 PRINT 输出。但是，我在输出中的任何地方都找不到返回码。返回代码在我的应用程序代码中可用，所以我知道它来自 Sybase OK。

想法？是否有我缺少的设置来显示这个？还是蟾蜍没有这个功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:20:22.793

我假设您使用的是 Adaptive Server 12.5 或更高版本。

```
DECLARE @ret_val INT
EXECUTE @ret_val=bfmsp_testproc 'BadReturnCode'
SELECT @ret_val 
```

# html - 我可以在标题内正确对齐 CSS3 注释气泡吗？

> ID：10125615
> 
> 赞同：0
> 
> 时间：2012-04-12T14:25:54.743
> 
> 标签：html, css

我正在尝试在标题末尾对齐评论气泡，但我无法将其向上移动一点。

在此处查看小提琴中的示例 - [http://jsfiddle.net/3yn9r/](http://jsfiddle.net/3yn9r/)

我成功地将它放在标题末尾的唯一方法是放在 h1 内（这不是一个很好的结构化方法）。即使这样，我也无法将它向上移动以正确对齐（文本底部的底部三角形）。负边距顶部不起作用。

有什么线索可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:30:14.520

可能这就是你想要的[http://jsfiddle.net/3yn9r/2/](http://jsfiddle.net/3yn9r/2/)。给予`top`而不是`margin-top`

# php - 用闭包克隆对象

> ID：10125616
> 
> 赞同：1
> 
> 时间：2012-04-12T14:25:55.010
> 
> 标签：php, object, closures

我在 PHP5.3 中有以下类：

```
class MyClass {
    public $a=1;
    public $hook;
    function setHook(){
        $t=$this;
        $this->hook=function() use($t){
            echo $t->a;
        };
   }
} 
```

以下语法按预期工作：

```
$x = new MyClass();
$x->setHook();
call_user_func($x->hook);     // outputs 1; 
```

但是，如果我继续使用此代码：

```
$y = clone $x;
$y->a = 2;
call_user_func($y->hook); 
```

然后它仍然会输出 1。我理解它为什么会发生，因为我已经分配了一个局部变量，该变量嵌入到我的闭包的定义中，随后嵌入到“钩子”属性中。

**请建议如何解决这个问题**。对于包含“可调用”属性的类，我如何克隆它并使闭包正确引用当前对象。也许我可以遵循不同的模式。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:19:08.267

`$hook`您可以在克隆时简单地覆盖：

```
public function __clone() {
    $this->setHook();
} 
```

不确定您的示例是否代表您的实际代码。我希望它有所帮助。

在 PHP 5.4 中，您可以直接在闭包中使用[`Closure::bindTo`](http://php.net/closure.bindto)and ：`$this`

```
class MyClass {
    public $a = 1;
    public $hook;

    public function setHook(){
        $this->hook=function() {
            echo $this->a;
        };
    }

    public function __clone() {
        $this->hook = $this->hook->bindTo($this);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:27:04.930

我认为最简单的方法是[自我封装](http://martinfowler.com/refactoring/catalog/selfEncapsulateField.html)：

```
private function getA() { return $this->a;}

$this->hook=function(){
        echo $this->getA();
} 
```

# liferay - 无法从 Portlet Action 类显示默认登录页面

> ID：10125617
> 
> 赞同：0
> 
> 时间：2012-04-12T14:25:57.767
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6 Portal 进行开发。我创建了一个页面（无论是公共页面还是私有页面），并向其中添加了一些我开发的自定义 Portlet，并且我将此页面定义为默认登录页面。

现在在我的 GenericPortlet 类中，一旦用户使用我们的数据库验证了他的用户名和密码，我想将他重定向到我的登录页面。

我已经尝试了很多使用 Portlets RequestDispatcher 的转发，也包括到我的默认登录页面的绝对路径和相对路径的组合。并且还尝试了使用来自 processAction Method 的 ActionResponse 的运气。

但是这两件事都没有奏效，有人可以告诉我如何解决这个问题吗？

如果有人知道，请帮助我如何解决这个问题。

非常感谢您阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:40:03.650

将重定向放入 portlet processAction 方法中：

```
@Override
public void processAction(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException {
    //defaultLandingPage = ...
    actionResponse.sendRedirect(defaultLandingPage);
}; 
```

# macos - Bash：如何将参数与 if 语句进行比较？

> ID：10125620
> 
> 赞同：9
> 
> 时间：2012-04-12T14:26:00.830
> 
> 标签：macos, bash, shell

我正在尝试使用以下代码在 OSX 下比较 bash 中的参数...

```
 #!/bin/bash

if ["$1" == "1"]
then
        echo $1
else
        echo "no"
fi 
```

但我不断收到以下错误

```
$bash script.sh 1

script.sh: line 3: [1: command not found
no 
```

如何阻止它尝试评估“1”？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T14:27:31.527

`[`是一个测试命令，所以你需要在 and 之间有`[`一个`"$1"`空格，以及在`"1"`和结束之间有一个空格`]`

**编辑**

只是为了澄清一下，需要空格是因为bash 命令`[`的语法不同`test`，所以以下是编写脚本的另一种方式：

```
#!/bin/bash

if test "$1" == "1"
then
        echo $1
else
        echo "no"
fi 
```

可以进一步简化为

```
#!/bin/bash
[ "$1" == "1" ] && echo "$1" || echo "no" 
```

# c - C 条件后增量

> ID：10125627
> 
> 赞同：1
> 
> 时间：2012-04-12T14:26:18.473
> 
> 标签：c, loops, do-while, post-increment

```
do {instructions...}
while (x--) 
```

应该首先执行说明，然后检查是否`x`不是，然后`0`根据结果继续/或离开循环，**并且只有在所有这些操作减量之后** `x`。

但我的编译器**先递减**。

谁错了？我或我的编译器;-)？你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:49:58.723

C 中的许多表达式都有**值**和**副作用**。

对于表达式`x--`，**值**是`x`之前的值；副作用是递减`x`的值。

因此，如果您从`x`1 开始，当执行到达该表达式时，它将产生**值** `1`并设置`x`为 0。下一次计算表达式时，该**值**是`0`并`x`设置为`-1`, ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:33:02.783

你在说什么

> 应该首先执行指令，然后检查'x'是否不是'0'并根据结果继续/或离开循环，并且仅在所有这些操作减量'x'之后

应该是什么

> 应该首先执行指令，然后检查'x'是否不是'0'，然后减量'x'并根据结果继续/或离开循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:32:29.230

流程是：

1）做指令

2) 检查 x 的值

3.1) 是 x == 0？然后执行 x-- (x 变为 -1) 并退出循环

3.2) 是 x != 0 吗？然后执行 x-- 并转到步骤 1)

# mysql - 我可以连接到我的数据库，但根本无法选择它，我非常需要帮助

> ID：10125629
> 
> 赞同：0
> 
> 时间：2012-04-12T14:26:20.830
> 
> 标签：mysql, database, select

好吧，就这样吧，我要攻读网页设计学士学位，而我的教授在解决问题方面并不那么有帮助，而我正要在这方面大发雷霆。更重要的是，我正在尝试连接到我创建的数据库，并且成功了。然后我去选择数据库，它告诉我我被拒绝或错误消息指出：

用户“DataBase_user”@“192.168.1.1”拒绝访问数据库“DataBase_user”

这是我正在使用的代码字符串，和我导师的一样。

```
 <?php
$host = "DB_Host_name";
$db = "DB_User_name";
$pwd = "Password";
$connect = mysql_connect($host, $db, $pwd) or die(mysql_error());
$dbSelect = mysql_select_db($db, $connect) or die(mysql_error());
/*if ($connect == true)
{
    echo("connected <br />");   
}*/
if ($dbSelect)
{
    echo("database is selected");
}

?> 
```

因此，感谢任何帮助，这不是我的主机的错，因为这是我从两个不同的免费主机提供商那里收到的相同错误。我进行了双重和三重检查，我输入的数据库的用户拥有他可以拥有的所有特权。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:33:36.223

您正在使用变量 $db 作为用户名和密码。我建议使用一个名为 $db 的数组，其中包含： $db["hostname"]; $db["db"]; $db["用户名"]; $db["密码"];

确保你正确设置了这些！！！即使数据库确实与用户名同名。

# asp.net - ASP.net html 链接（IE7 问题）

> ID：10125636
> 
> 赞同：0
> 
> 时间：2012-04-12T14:26:32.840
> 
> 标签：asp.net, .net, html, internet-explorer-7

```
<td><a target="_blank" href='<%=Common.Utility.GetLink("FooterLink.Home")%>'>Home</a></td>
<td><a target="_blank" href='<%=Common.Utility.GetLink("FooterLink.ContactUs")%>'>Contact Us</a></td> 
```

这个设计适用于所有浏览器，但由于某种原因，点击链接适用于除 ie7 之外的所有浏览器。在 ie7 中，链接不可点击。感谢您提供任何可能有帮助的意见！

# java - 如何使用终端创建 .jar 文件

> ID：10125639
> 
> 赞同：24
> 
> 时间：2012-04-12T14:26:47.470
> 
> 标签：java, jar, terminal

我正在尝试使用 mac 终端创建一个 .jar 文件，但遇到了一些麻烦。我按照[此处](http://www.sundh.com/blog/2010/01/making-jar-files-on-mac/)的步骤操作，但没有成功。我收到此错误消息：

```
Failed to load Main-Class manifest attribute from
aclient.jar 
```

那么你到底是怎么做的呢？我的 java 程序称为 Main.java，我已将其编译为 .class 文件。现在我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-12T22:30:24.153

1) 确保所有必要的文件都在目录中，您已打开终端/命令提示符并导航到该目录。

2）编译.java类，例如HelloWorld.java

```
javac HelloWorld.java 
```

3) 这将生成 JAR 文件所需的 .class 文件。

4）接下来使用文本编辑器创建一个清单文件（使用扩展名.txt保存）并输入以下内容

```
Main-Class: HelloWorld 
```

或者你的文件名是什么。

5) 接下来使用以下代码创建 JAR 文件：

```
jar cfm HelloWorld.jar Manifest.txt HelloWorld.class 
```

6）运行文件：

```
java -jar HelloWorld.jar 
```

如果有任何不清楚的地方，请查阅这些网站： [创建 jar 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)并[设置应用程序入口点](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)。

希望这对其他人有所帮助，汤姆欢呼！

编辑：

在 inga 的评论之后，值得注意的是，为了在 jar 中包含多个文件，您需要使用：

```
javac *.java 
```

其次是

```
jar cfm HelloWorld.jar Manifest.txt *.class 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-05T13:31:42.783

是的，我们需要在类名末尾使用新行......它对我有用

即主类：HelloWorld

```
 It will look like this in Notepad++
 1.Main-Class: HelloWorld
 2. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-01T19:52:02.600

也许这将有助于重新 Manifest.txt 文件：

警告：文本文件必须以换行符或回车符结尾。如果最后一行没有以新行或回车结束，则不会正确解析。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T14:48:25.337

您需要有一个定义主类的文本文件。例如

```
% cat MyMain
Main-Class: HelloWorld 
```

然后

```
%jar cvfm foo.jar MyMain *.class
%java -jar foo.jar
Hello world 
```

请参阅：http: [//java.sun.com/j2se/1.4.2/runtime.html#example](https://web.archive.org/web/20111208021943/http://java.sun.com/j2se/1.4.2/runtime.html#example)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-28T16:02:45.530

我按照说明进行操作，但在加载 Manifest.txt 文件时遇到了问题。

在 Manifest.txt 中我们只需要编写 Main-class: class_name

但在上述声明之后，请在 Manifest.txt 中按 Enter，您的 Manifest.txt 加载问题将得到解决。清单文件末尾的新行是必需的。

问候

# delphi - 用途条款的差异

> ID：10125641
> 
> 赞同：10
> 
> 时间：2012-04-12T14:26:55.063
> 
> 标签：delphi, uses-clause

接口块中声明的单元和实现块中声明的单元有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:29:38.307

如果该单元在该`interface`部分中列出，则它在接口部分和实现部分中都可用。但是，如果它在该`implementation`部分中列出，则它仅在该部分中可用。

一般来说，如果你只需要某个单元来*实现*一个单元，那么在`uses`实现部分的子句中列出它。这样一来，您的单元*接口*所依赖的单元就变得很清楚了。

如您所知，一个单元的界面部分是其他单元所看到的。它只是您的单位和其他单位之间的“界面”。这就像一份合同。“这就是我能做的，你告诉我怎么做。” 单元的实现部分完成了接口部分承诺的所有工作。在这里，您只需“实现”该单元；在这里，您放置了接口部分中列出的类/函数的代码。实施部分的内容与其他单元无关。

通过这种方式，您可以将（巨大的）项目分成小部分，并且很容易看出它们作为一个系统是如何协同工作的。

# c# - 如何使用 StreamReader 和 StreamWriter 在多个浏览器上跟踪用户之间的按钮事件？

> ID：10125642
> 
> 赞同：0
> 
> 时间：2012-04-12T14:26:56.783
> 
> 标签：c#, asp.net, browser, stream

### 您好，是否可以使用 StreamWriter 和 StreamReader 从 Server.MapPath（文本文件）中保存和提取，同时跟踪用户之间的交互（2）？

每个用户都可以打开浏览器或选项卡，连接到 URL，然后输入加入井字游戏的提示。游戏开始时，服务器如何跟踪按下了哪些按钮，以便对手可以看到他的挑战者在哪里玩过。

StreamWriter 和 StreamReader 是否会在后台初始化一个虚拟游戏，然后通过按下 9 个按钮之一将文本更改为 X 或 O 来发送 HttpRequests。假设我按下按钮 1、2 和 3，游戏有一个CheckWinner 检查您是否在水平、垂直或对角线上获胜。那么如何发送（或保存到流写入器）此单击事件以允许游戏将按钮注册为已单击？

我正在使用 Visual Studio '08、ASP.NET 网站和表单。我的玩家是一个班级，我的游戏能够为每个正在玩的游戏实例化一个单独的实例

有谁知道如何进行投票？我得到了这个刷新提示，它可以用来跟踪两个玩家的动作吗？但是我认为要让它起作用，我需要准备好我的文件路径并写入玩家选择的动作，对吗？

```
Response.AppendHeader("Refresh", "10"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:50:04.713

我不确定它是否使用 Streams，但这听起来像是[SignalR 的完美用途](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)。您可以使用它在任意数量的用户之间创建多个游戏，并实时跟踪状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:35:06.313

你需要[websocket](http://en.wikipedia.org/wiki/WebSocket)

一种用于在线全双工流式连接的现代解决方案，可用于所有主要浏览器的游戏、聊天、事件广播。

# oracle - Oracle TO_DATE 头痛

> ID：10125645
> 
> 赞同：2
> 
> 时间：2012-04-12T14:26:59.970
> 
> 标签：oracle, oracle10g, to-date

我有一个包含以下数据的字符串列作为示例

```
10/20/2005 15:08:00 
11252011 15:22:40 
```

我创建了一个临时日期列，我会将内容复制到其中，删除字符串列并将临时列重命名为字符串之一。

但是，在我尝试将数据复制到新的临时列时，我收到了错误：

```
ERROR
ORA-01861: literal does not match format string 
```

这是SQL：

```
update mytable set MYDATE_TEMP = to_date(mystringcol, 'yyyy/mm/dd hh24:mi:ss') 
```

有没有办法复制数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:30:31.603

如果这些是您需要处理的仅有的 2 种格式，请尝试：

```
update mytable set MYDATE_TEMP = to_date(replace(mystringcol,'/',''),
                                         'mmddyyyy hh24:mi:ss') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:43:52.273

对于第一个，您可以使用：

```
update mytable set MYDATE_TEMP = to_date(mystringcol, 'mm/dd/yyyy hh24:mi:ss'); 
```

对于第二个：

```
update mytable set MYDATE_TEMP = to_date(mystringcol, 'mmddyyyy hh24:mi:ss'); 
```

# admob - Admob 状态不活跃

> ID：10125649
> 
> 赞同：1
> 
> 时间：2012-04-12T14:27:14.787
> 
> 标签：admob

我的 admob 状态显示为非活动状态。但是，人们已经下载了我的应用程序，并且我已经在手机上完成了测试广告并且它可以工作。

这里可能是什么问题？

正如在一个较旧的问题中所讨论的，它需要 24 小时，但我已经等了最后两天，它仍然没有激活。我确定发布 ID 是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:33:07.433

您是否意外启动时`GADRequest.testing`设置为？`true`你能在你的设备上看到制作广告吗？

# java - 如何在 Java 中为表 JOINS 实现 DAO/DTO？

> ID：10125654
> 
> 赞同：2
> 
> 时间：2012-04-12T14:27:38.310
> 
> 标签：java, mysql, join, design-patterns, dao

我在 Java 中实现了一个相当复杂的 DAO 层，基于最优秀的 BalusC 文章，这里：[http ://balusc.blogspot.co.uk/2008/07/dao-tutorial-data-layer.html](http://balusc.blogspot.co.uk/2008/07/dao-tutorial-data-layer.html)

我的问题是：在这种“模式”中加入的最佳方法是什么？

在我的项目中，我已经完成了“复合”类的连接 - 例如。我有 Stage、StageDAO 和 Node、NodeDAO 类，并从字面上将它们加入形成 JOINNodeStage、JOINNodeStageDAO 类。

这对我来说似乎不是很理想-有更好的方法吗？

非常感谢期待！

PS。BalusC在外面吗？;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:59:15.380

我不知道是否退出理解......但我认为你需要做的是在节点内有一个阶段的集合，所以你不需要一个连接类。

您可以在每次找到 dao 时获取集合，或者您可以在需要时进行延迟加载请求它。

希望有帮助

# java - 带有空命名空间的 XML 模式验证

> ID：10125656
> 
> 赞同：1
> 
> 时间：2012-04-12T14:27:57.143
> 
> 标签：java, xml, xsd, schema

我试图理解遵循 XML Schema 处理的所有（复杂）规则，但我仍然无法弄清楚！我的问题是这样的：

*   我有一个 XSD；
*   我想创建和验证基于这个 XSD 的 XML 文件，*没有*元素前缀；
*   我希望 jEdit、Eclipse 等编辑器能够处理基于 XSD 的自动完成功能。

但是，所有验证编辑器都会给我相同的错误消息。

这是 XSD 的精简版：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://www.megadix.org/standards/temp.xsd" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jfcm="http://www.megadix.org/standards/temp.xsd"
elementFormDefault="unqualified" attributeFormDefault="unqualified">

<xsd:complexType name="MapsType">
    <xsd:sequence>
        <xsd:element name="map" minOccurs="0" maxOccurs="unbounded">
            <xsd:complexType>
                <xsd:attribute name="name" type="xsd:string" use="required"></xsd:attribute>
                <xsd:sequence>
                    <xsd:element name="description" type="xsd:string" minOccurs="0" maxOccurs="1"></xsd:element>
                    <xsd:element name="concepts" minOccurs="0" maxOccurs="1">
                        <xsd:complexType>
                            <xsd:sequence>
                                <xsd:element name="concept" minOccurs="0" maxOccurs="unbounded">
                                    <xsd:complexType>
                                        <xsd:attribute name="name" type="xsd:string" use="required"></xsd:attribute>
                                    </xsd:complexType>
                                </xsd:element>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </xsd:sequence>
</xsd:complexType>

<xsd:element name="maps" type="jfcm:MapsType"></xsd:element> 
```

如果我使用前缀，文件会正确验证并自动完成：

```
<?xml version="1.0" encoding="UTF-8"?>
<jfcm:maps xmlns:jfcm="http://www.megadix.org/standards/temp.xsd">
<map name="Test Map">
    <concepts>
        <concept name="c1" />
        <concept name="c2" />
        <concept name="c3" />
    </concepts>
</map> 
```

但如果我删除它：

```
<?xml version="1.0" encoding="UTF-8"?>
<maps xmlns:jfcm="http://www.megadix.org/standards/temp.xsd">
<map name="Test Map">
    <concepts>
        <concept name="c1" />
        <concept name="c2" />
        <concept name="c3" />
    </concepts>
</map> 
```

我收到此错误消息：

> 发现以元素“地图”开头的无效内容。需要“{map}”之一。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:36:34.643

由于您对元素的形式使用“不合格”，因此这是正确的做法：

```
<?xml version="1.0" encoding="UTF-8"?>
<maps xmlns="http://www.megadix.org/standards/temp.xsd">
  <map name="Test Map" xmlns="">
    <concepts>
      <concept name="c1" />
      <concept name="c2" />
      <concept name="c3" />
    </concepts>
  </map>
</maps> 
```

如果您希望所有元素在命名空间上“共享”，则必须定义 elementFormDefault="qualified"; 作为侧边栏，许多 XSD 设计人员会认为这是一个很好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:38:14.130

您可以从这里了解很多关于命名空间及其在验证方面的关系。

[XML 模式验证](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=/com.ibm.ccl.soa.sdo.xsd.ui.tutorial.doc/topics/xml_schema_lesson13.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:43:06.963

请记住，前缀是无关紧要的。重要的是命名空间。

如果您希望“maps”元素不在命名空间中，则必须在模式中以这种方式声明它。当前，您已将其声明为具有目标命名空间的架构文档中的全局元素声明。

你的要求似乎很奇怪。您的实例文档声明了一个命名空间，但随后它不会将该命名空间用于文档中的任何元素。这是合法的，但这是一件非常奇怪的事情。

# jquery - 位置属性的HTML CSS问题

> ID：10125658
> 
> 赞同：1
> 
> 时间：2012-04-12T14:28:04.193
> 
> 标签：jquery, html, css

我有以下代码

```
<!DOCTYPE html>
<html>
<head>
    <title>jQuery goes to DOM-ville</title>
    <style>

        #change-me {
            position:absolute;
            top:500px;
            left:400px;
            font:24px arial;
        }

        #move_up #move_down #color #disappear {
            padding:5px;
        }

    </style>
    <script src="jquery-1.6.2.js"></script>
</head>
<body>
    <button id="move_up">Move Up</button>
    <button id="move_down">Move Down</button>
    <button id="color">Change Color</button>
    <button id="disappear">Disappear/Re-appear</button>

    <div id="change_me">Make me do stuff</div>
    <script>
        $(document).ready(function(){
            $("#move_up").click(function(){
                $("#change_me").animate({top:30}, 200);
            });//end move up
            $("#move_down").click(function(){
                $("#change_me").animate({top:500}, 2000);
            });//end move down
            $("#color").click(function(){
                $("#change_me").css("color","purple");
            });//end color
            $("#disappear").click(function(){
                $("#change_me").toggle("show");
            });//end disappear
        });//end doc ready
    </script>

</body>
</html> 
```

当我在 firefox 中打开 html（jquery 文件位于同一文件夹中）时，firebug 显示的元素的样式规则为 nil，并且向上和向下移动按钮不起作用但是当我更改以下内容时它们会更改相应的 css 样式线

```
<div id="change_me">Make me do stuff</div> 
```

对此

```
<div id="change_me" style="position:absolute;">Make me do stuff</div> 
```

一切似乎都再次起作用了，所以我的假设是 head 元素中的任何样式都没有应用于 html 元素，如果是这样，它们的意义何在，如果它们被应用，那么为什么它们会被覆盖。

我的浏览器是 MacOSX 中的 Firefox 11.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:30:43.600

```
change-me 
```

对比

```
change_me 
```

两者不一样。

# ruby-on-rails - 我们如何在 ruby on rails 中使用 actionmailer 每小时发送 5000 封电子邮件？

> ID：10125663
> 
> 赞同：5
> 
> 时间：2012-04-12T14:28:20.107
> 
> 标签：ruby-on-rails, smtp, actionmailer, mass-emails

**我对 ActionMailer 有一些疑问：**

1.  Actionmailer 如何连接到 smtp 服务器？

2.  如果电子邮件数量高 > 1000 ，连接是**并发的还是并行的？**

3.  发送像 facebook 这样**的电子邮件（数量为 1000 个**）作为即时电子邮件将如何影响 ruby​​ on rails 应用程序以及 actionmailer 将如何处理它？

4.  除了 ActionMailer，还有其他**解决方案/插件**可以从 RoR 应用程序发送大量电子邮件吗？

- - - - - - - - - - - - - - - - - - - - - - - - 添加 ：

我们需要每 15 分钟发送至少 1000 封电子邮件。我们使用 Notes Domino 服务器作为我们的 smtp 服务器。！这种问题的可能架构是什么。我们已经将电子邮件存储在数据库中以便以后发送，但需要的是**发送方法**！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T14:37:38.827

通常的做法是创建一个后台作业来发送电子邮件。ActionMailer 非常适合单封电子邮件，但在发送多封电子邮件后往往会遇到麻烦，因为每封电子邮件可能需要几秒钟才能完成。这就是我创建[PostageApp](http://postageapp.com/)来帮助解决这些问题的原因。

市场上的一些服务可以帮助您从 Rails 发送大量电子邮件：

*   [邮筒](http://mailgun.com/)
*   [发送网格](http://sendgrid.com/)
*   [邮戳应用](http://postmarkapp.com/)
*   [邮件黑猩猩](http://mailchimp.com/)
*   [邮递](https://www.mailjet.com/docs/code/ruby)
*   [邮资应用](http://postageapp.com/)

所有这些都可以通过单个 API 调用或 SMTP 事务发送多条消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T14:49:10.730

1) Actionmailer 通过一组参数连接到您的 smtp 服务器，包括主机、端口和协议。

3) 由于执行了许多同步任务，结果将是一个缓慢的站点。

2 & 4)

Actionmailer 有点太慢了，无法在负载下发送大量电子邮件，请记住，它是一个同步操作，因此它并不是您想要在繁忙的网站上经常做的事情。

老实说，您最好不要从您的网站发送大量电子邮件。它并不是真正设计用于以这种方式使用的。如果我必须发送那种我会考虑在后台完成工作的卷，那么像[延迟作业这样的东西在](https://github.com/collectiveidea/delayed_job)[这里](https://www.ruby-toolbox.com/categories/Asynchronous_E-Mail)会很好用，或者在这里找到的许多异步 Rails 邮件程序中的一个就可以了。

您真正想在这里看到的是您要满足的要求，该网站是否绝对有必要负责以同步方式发送邮件？在大多数情况下，这个问题的答案是否定的。如果可以，最好将此类任务推迟到系统的另一部分，尽可能保持站点精简和集中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T20:34:58.603

在这里为您提供简单的解决方案... Sidekiq 或 Resque

我强烈推荐 Sidekiq，因为它不像服务器那样密集运行多个工作人员，只需要注意并发问题（确保你没有 2 名工作人员接手相同的工作并发送重复的电子邮件）。

假设您设置了 20 个 Sidekiq 工作人员，每个工作人员应该能够每 2-4 秒发送一封电子邮件，您每分钟可以轻松查看 300-600 个。

不要尝试在没有 Sidekiq、Resque 或 DelayedJob 等后台工作人员的情况下执行此操作。如果您尝试在应用程序中发送任何大量电子邮件，您将冻结整个应用程序。即使在应用程序中发送激活电子邮件，也不会导致您不必要的减速问题。

我将有一个定期处理排队的 Worker 和另一个处理发送的 Worker 类。我们在一个较旧的应用程序（pre-sidekiq）上使用 Resque（可能是 6 个工作人员？）每 5 分钟发送大约 500 封电子邮件，没有任何问题。

您可以像提到的那样使用第三方。Sendgrid很不错。但这不是问题，这就是您自己简单轻松地进行操作的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T14:33:16.780

1.  如果留空，则在配置文件中定义 SMTP 设置，它使用 sendMail local

2.  同时

3.  多个处理程序

4.  [Rails 应用程序有批量电子邮件插件吗？](https://stackoverflow.com/questions/517601/is-there-a-bulk-email-plugin-for-rails-apps)

你也可以做 1000 次 email.deliver 但它可能会崩溃你的服务器

# c - 在c中将十六进制数转换为八进制

> ID：10125664
> 
> 赞同：-1
> 
> 时间：2012-04-12T14:28:24.817
> 
> 标签：c

我想要一个要求十六进制数并给出输出等效八进制数的 ac 程序。我使用代码使用 printf() 函数将 int 转换为八进制。

```
#include<stdio.h>
Void main(){
  int i;
  printf("Enter the Hax number: ");
  scanf("%x",&i);
  printf("Octal equivalent of number is %o",i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:31:44.970

**十六进制和八进制只是相同基础数字格式的不同表示。即二进制**。所以在你的例子中没有真正发生转换。只是您正在以两种不同的方式解释/打印相同的数字。在你`printf`的例子中确实做得很好

```
Enter the Hax number: FF
Octal equivalent of number is 377 
```

我能看到的唯一其他有问题的事情是`Void`主要的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:32:29.193

除了您的语法错误之外，这似乎有效，我只是复制了它。改变

```
Void main() 
```

到

```
int main() 
```

或者

```
//Since you are not using command line arguments this isn't necessary but valid
int main(int argc, char **argv) 
```

并添加一个

```
return 0; //not necessary but good practice 
```

在方法结束时

编辑：

还

```
void main() 
```

将与许多 C 编译器一起编译，但 C 是无效的（没有当前和先前的标准制裁它）。改为使用`int`。

# php - 为什么 PHP 在这两种情况下会输出不同的错误信息？

> ID：10125665
> 
> 赞同：7
> 
> 时间：2012-04-12T14:28:24.963
> 
> 标签：php

这可能不是最佳实践，但在 PHP 中，我们可以在文件底部定义类但是，

```
$t = new Test();

$t->foo();

class Test extends FakeInvalidClass  {
    public function foo(){
        echo "arrived in foo.";
    }
} 
```

产生错误信息：

`Fatal error: Class 'Test' not found in /mysite/test.php on line 4`

这很奇怪......类'Test'定义在文件的底部，PHP应该失败，因为`FakeInvalidClass`没有找到，不是`Test`

```
<?php
// test.php

class Test extends FakeInvalidClass  {
    public function foo(){
        echo "arrived in foo.";
    }
}

$t = new Test();

$t->foo(); 
```

产生更易读的错误

`Fatal error: Class 'FakeInvalidClass' not found in /mysite/test.php on line 4`

作为参考，这很好用：

```
<?php
// test.php

$t = new Test();

$t->foo();

class Test {
    public function foo(){
        echo "arrived in foo.";
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T15:04:18.803

我认为当您看到 Zend Engine 为每个示例生成的操作码时，这一切对您来说都是有意义的（无论如何它对我来说都是如此）。

**示例 1：**

```
compiled vars:  !0 = $t
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   4     0  >   EXT_STMT                                                 
         1      ZEND_FETCH_CLASS                                 :0      'Test'
         2      EXT_FCALL_BEGIN                                          
         3      NEW                                              $1      :0
         4      DO_FCALL_BY_NAME                              0          
         5      EXT_FCALL_END                                            
         6      ASSIGN                                                   !0, $1
   6     7      EXT_STMT                                                 
         8      ZEND_INIT_METHOD_CALL                                    !0, 'foo'
         9      EXT_FCALL_BEGIN                                          
        10      DO_FCALL_BY_NAME                              0          
        11      EXT_FCALL_END                                            
   7    12      EXT_STMT                                                 
        13      ZEND_FETCH_CLASS                                 :6      'FakeInvalidClass'
        14      ZEND_DECLARE_INHERITED_CLASS                     $7      '%00test%2Fhome%2Fflacroix%2Ftest.php0x7f756fea4055', 'test'
  12    15    > RETURN                                                   1 
```

正如你所看到的，#1 得到了`Test`类，而后者又转到#13 得到`FakeInvalidClass`（见`return :6`那里）。由于后者未定义，#13 失败并返回到#1，这也失败了，因为`Test`未定义。

它们（#13 和#1）都将调用`zend_error`（如 PHP 源代码所示），但`zend_error`具有全局状态（即：错误未堆叠），因此任何后续调用都将用新的错误消息覆盖错误消息。所以，在伪代码中：

```
ZEND_FETCH_CLASS('Test')
    ZEND_FETCH_CLASS('FakeInvalidClass')
        zend_error('Class FakeInvalidClass not found')
        return
    zend_error('Class Test not found')
    return 
```

**示例 2：**

```
compiled vars:  !0 = $t
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   4     0  >   EXT_STMT                                                 
         1      ZEND_FETCH_CLASS                                 :0      'FakeInvalidClass'
         2      ZEND_DECLARE_INHERITED_CLASS                     $1      '%00test%2Fhome%2Fflacroix%2Ftest2.php0x7fe2c1461038', 'test'
  10     3      EXT_STMT                                                 
         4      ZEND_FETCH_CLASS                                 :2      'Test'
         5      EXT_FCALL_BEGIN                                          
         6      NEW                                              $3      :2
         7      DO_FCALL_BY_NAME                              0          
         8      EXT_FCALL_END                                            
         9      ASSIGN                                                   !0, $3
  12    10      EXT_STMT                                                 
        11      ZEND_INIT_METHOD_CALL                                    !0, 'foo'
        12      EXT_FCALL_BEGIN                                          
        13      DO_FCALL_BY_NAME                              0          
        14      EXT_FCALL_END                                            
  13    15    > RETURN                                                   1 
```

这里#1 是一个`ZEND_FETCH_CLASS 'FakeInvalidClass'`代码，但该类不存在，所以它返回一条`FakeInvalidClass not found`消息，正如它应该的那样。

**示例 3：**

```
compiled vars:  !0 = $t
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   4     0  >   EXT_STMT                                                 
         1      ZEND_FETCH_CLASS                                 :0      'Test'
         2      EXT_FCALL_BEGIN                                          
         3      NEW                                              $1      :0
         4      DO_FCALL_BY_NAME                              0          
         5      EXT_FCALL_END                                            
         6      ASSIGN                                                   !0, $1
   6     7      EXT_STMT                                                 
         8      ZEND_INIT_METHOD_CALL                                    !0, 'foo'
         9      EXT_FCALL_BEGIN                                          
        10      DO_FCALL_BY_NAME                              0          
        11      EXT_FCALL_END                                            
   8    12      EXT_STMT                                                 
        13      NOP                                                      
  13    14    > RETURN                                                   1 
```

Zend 得到一个`ZEND_FETCH_CLASS 'Test'`代码并正常执行。

*这可以通过 PHP 将在执行代码之前*解析它在代码中遇到的*第一级*类这一事实来解释。当您创建扩展另一个类或实例化对象的类定义时，将在代码中的该点为该类插入一个操作码。它实际上是*惰性初始化*。*`ZEND_FETCH_CLASS`*

 **这也可以通过以下事实得到证明：

```
<?php

exit;

class Test extends FakeInvalidClass  {
    public function foo(){
        echo "arrived in foo.";
    }
} 
```

**结论：**

不同的错误消息由操作码的不同参数解释`ZEND_FETCH_CLASS`。

现在，如果您想知道为什么 ZE 会生成这样的操作码，这可能是一种设计选择，它可能更容易维护。但老实说，我不知道。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T14:37:37.547

合乎逻辑的结论是，如果您尝试创建一个类的对象，它将继续扫描文件的其余部分以查找该类声明。如果它无法“解析”类（由于您扩展了一个不存在的类），它将返回到您尝试创建对象的行并告诉您该类不存在。

那么，为什么在找不到您扩展的类时不给您一个错误呢？

好吧，PHP 不知道您以后是否会包含一个包含 的文件`FakeInvalidClass`，并且在第 4 行说`Fatal error: Class 'FakeInvalidClass' not found`.

**编辑：** 但是，您以后不能包含`FakeInvalidClass`，因为`Test`已经被解析了。所以，PHP 仍然会在它无法执行的那一行给你错误。但是一个更有用的错误信息是把它们堆叠起来：

`Class 'Test' not found (Class 'FakeInvalidClass' not found in /mysite/test.php on line 8) in /mysite/test.php on line 4`

但是 PHP 不会堆积错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T14:32:14.113

只是因为在您的第一种情况下，未加载“测试”类。在第二种情况下，类是加载但扩展无效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:38:57.563

案例 1：您尝试创建 Test 类的对象，因此当它尝试创建对象时，是基类 FakeInvalid 类的扩展，因此在创建 Test 类时出错，说找不到。

案例 2：它首先尝试扩展基类并且没有找到它，所以给出了错误，说 FakeInvalidClass not found。**

# crystal-reports - Crystal Report 子报表“完整文件路径”

> ID：10125668
> 
> 赞同：2
> 
> 时间：2012-04-12T14:28:41.867
> 
> 标签：crystal-reports

您如何确定已经从主报告本身“内部”插入到主报告中的子报告的“完整路径”，即我如何知道这些子报告[被主报告指向]实际上在哪里身体上得救了。请记住，这些子报告在插入主报告之前曾经是位于某处的物理报告 - 因此逻辑表明 CR 应该有一种方法来跟踪这个完整路径。

这似乎是一件简单的事情，但由于某种原因，我注意到从主报告中很难确定这一点。因此，除非我自己设计报告，否则很难知道这些子报告的实际位置。充其量我观察到可以从主报告中确定子报告的实际名称，但似乎仍然没有选择从“内部”实际确定子报告的“完整路径”主要报告。

我已经意识到，在灾难恢复的情况下，知道物理子报表实际保存在哪里实际上会有所帮助 - 例如，当主报表由于任何逻辑原因而丢失其子报表设计时[我自己已经遇到过这个问题]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T10:54:30.533

您可以通过将报表复制到另一台PC，断开PC与网络并打开报表来找到子报表的文件路径

尝试重新导入子报告并显示显示文件路径的错误消息。

我不能把功劳因为这个链接帮助我解决了它[http://scn.sap.com/thread/3354250](http://scn.sap.com/thread/3354250)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:37:16.747

子报告与其容器（父）存在于同一个 .RPT 文件中。

** 编辑 **

查看 SAP Crystal Reports 2011 报表应用程序服务器 Java SDK，我发现了一个*可能*有效的内部方法：ISubreportClientDocument.getReportURL()。它位于 com.crystaldecisions.sdk.occa.report.application 包中。

虽然 .Net SDK 有一个类似的对象 (CrystalDecisions.CrystalReports.Engine.SubreportObject)，但该对象没有 ReportURL 属性。

# neo4j - Neo4j 密码查询性能通过中心节点上的 REST

> ID：10125672
> 
> 赞同：0
> 
> 时间：2012-04-12T14:28:48.630
> 
> 标签：neo4j, cypher

我对 neo4j 还是很陌生。我编写了一个小型 RESTFUL 服务，它通过 REST 作为 PoC 将节点插入到 neo4j db（服务器）。结构看起来是这样的：root - [NODES] -> n -> [NODE] -> node

n 节点是“居中”的节点。我计划将其他居中节点添加为不同的节点类型（例如产品/类别/文档/属性/用户...）

在我的第一个示例中，我添加了大约。1.000 个节点。现在我尝试增​​加节点数量并查询该节点。现在我面临着一种性能“问题”。这是我的查询，在 neo4j (1.6.1) 网络控制台上执行

START x = node(0) MATCH PATH = (x - [:NODES] -> centered - [:NODE] -> node) 返回节点 ORDER BY node.id LIMIT 10

START x = node(0) MATCH PATH = (x - [:NODES] -> centered - [:NODE] -> node) 返回计数(*)

我需要分页查询。第一个应该选择要显示的元素，第二个应该计算页面。

查询时间：1.000 个节点：~120ms 4.000 个节点：~200 - 300ms 6.000 个节点：~250 - 500ms

密码查询时间增加得非常快（在我看来）。我计划以这种方式添加 ~2.000.000 个节点。我的查询有什么问题吗？有没有可能让他们更快？（我已经将我的 neo4j 堆大小设置为 100M，对于 10k 节点应该可以）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:06:32.567

您可以做的第一件事是删除路径分配 - 您没有使用路径 PATH，因此无需创建它。

除此之外，您似乎在这里没有做错任何事情。

这种查询的 Cypher 性能在 1.7 上比 1.6 好得多。我们昨天发布了 1.7.M03，如果你没有被 1.6 束缚，你可以把它拿出来试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T18:28:33.117

如果它们只是后续节点的描述符，则根本没有“居中”节点可能会有所帮助。我认为如果您只使用带有标签的索引节点来描述节点类型（例如产品/类别/文档/属性/用户......），它会更快更好地组织。见[标签](http://blog.neo4j.org/2013/04/nodes-are-people-too.html)

# internet-explorer - IE8 和 IE9 中的背景颜色和 ms-linear-gradient 问题

> ID：10125676
> 
> 赞同：1
> 
> 时间：2012-04-12T14:29:04.303
> 
> 标签：internet-explorer, firefox, css, css-transitions

下面是应用的 CSS 并遇到了这个问题，

```
 background-color: rgba(91, 94, 85, 0.5) !important;
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F5B5E55,endColorstr=#7F5B5E55);
filter:ms-linear-gradient(startColorstr=#7F5B5E55,endColorstr=#7F5B5E55); /*fix for round corner edges in IE9 and input mess rendering in all IE */ 
```

图 1：FF、Chrome 和 IE 9 工作正常

图 2：IE8 不好

我不确定如何在 IE8 中正确修复此输入。我猜它的发生是因为 filter **filter:ms-linear-gradient**，如果我在 IE8 背景颜色应用中删除了这个过滤器，但输入被弄乱了，如下图所示。

如果我有这个过滤器输入在 IE8 背景颜色中正确呈现，则未按预期应用

![Firefox 正常工作的输入可见](../Images/d002e0a3c0b43596b6c4d39baffe1f79.png)

![IE8 输入 bg 搞砸了](../Images/51e7ced41ad67a756e9ac0f8b10ccf99.png)

谢谢 ，

尼西语

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T14:44:14.570

您的代码存在问题：

*   **`background-color: rgba(91, 94, 85, 0.5) !important;`**
    这条线似乎没问题。`!important`不过，该标志很可能是多余的。
*   **`filter:progid:DXImageTransform.Microsoft.gradient( ... );`**
    这一行也可以，虽然[`-ms-filter: "...";`语法在 IE8+ 中是首选的](https://stackoverflow.com/questions/7546638/css3-cross-browser-linear-gradient/7546655#7546655)。
*   **`filter:ms-linear-gradient(startColorstr=#7F5B5E55,endColorstr=#7F5B5E55);`**
    麻烦从这里开始：

    1.  Internet Explorer 的供应商前缀是`-ms-`,（以连字符开头）。
    2.  [`-ms-linear-gradient`](http://msdn.microsoft.com/en-us/library/windows/apps/hh453527.aspx)是 的值**`background`，而不是`filter`**。
        此外，仅从 IE 10 开始支持此值...
*   **`//fix for round corner edges in IE9`** CSS 中的注释采用以下格式：**`/* comment */`**.
    没有例外。

使固定：

```
background-color: rgba(91, 94, 85, 0.5) !important;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F5B5E55,endColorstr=#7F5B5E55);
-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F5B5E55,endColorstr=#7F5B5E55)"; 
```

# javascript - 如何停用 tinyMCE 编辑器

> ID：10125677
> 
> 赞同：1
> 
> 时间：2012-04-12T14:29:04.833
> 
> 标签：javascript, tinymce

在 Chrome 上，tinyMCE 仅在激活新编辑器时停用已激活的编辑器，而不是在您单击编辑器外部时。但是我需要它，所以当我单击 html 元素时，我构建了一个小事件。

我可以毫无问题地获得激活的编辑器：`tinyMCE.activeEditor`但是我需要它来停用。

有人有线索吗？

# java - php 检查数据库中是否存在两个字段，使用 JSON

> ID：10125678
> 
> 赞同：0
> 
> 时间：2012-04-12T14:29:04.837
> 
> 标签：java, php, android, json, phpmyadmin

在“用户”表中，我将客户注册，并且要访问菜单，您必须登录，所以我需要验证客户端，使用 php 并使用 Json。但它不起作用

这是 l'activité loginActivity

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    final EditText txtNumCompte = (EditText)findViewById(R.id.txtNumCompte);
    final EditText txtCodCompte = (EditText)findViewById(R.id.txtCodCompte);
    Button btnLogin = (Button)findViewById(R.id.btnLogin);
    btnLogin.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            String numcompte = txtNumCompte.getText().toString();
            String codecompte = txtCodCompte.getText().toString();
            if (numcompte.equals("") || codecompte.equals(""))
            {
                Toast.makeText(getBaseContext(),
                    "Numéro et code confidentiel de compte sont obligatoires",
                    Toast.LENGTH_SHORT).show();
                return;
            }
            Pattern p = Pattern.compile(".[0-9]+");
            Matcher m = p.matcher(numcompte);
            if (m.matches() == false)
            {
                Toast.makeText(LoginActivity.this,
                    "La carte est non trouvée \nVeuillez vérifier son numéro",
                    Toast.LENGTH_SHORT).show();
                return;
            }
            try{
                HttpParams httpParams = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParams,
                    TIMEOUT_MILLISEC);
                HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
                HttpParams d = new BasicHttpParams();
                d.setParameter("user", "1");

                HttpClient httpclient = new DefaultHttpClient(d);
                String url = "http://10.0.2.2/connect.php";
                HttpPost httppost = new HttpPost(url);

                try {
                    Log.i(getClass().getSimpleName(), "send  task - start");
                    //
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("user", "1"));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    ResponseHandler<String> responseHandler = new BasicResponseHandler();
                    String responseBody = httpclient.execute(httppost,
                        responseHandler);

                    JSONObject json = new JSONObject(responseBody);
                    JSONArray jArray = json.getJSONArray("posts");

                    for (int i = 0; i < jArray.length(); i++) {
                        JSONObject e = jArray.getJSONObject(i);
                        String s = e.getString("post");
                        if(s!=null) a=a+1;
                    }

                    if(a==0)
                    {
                        Toast.makeText(LoginActivity.this,"Connecté avec succès", Toast.LENGTH_LONG).show();
                        Intent intent= new Intent(LoginActivity.this,MenuActivity.class);
                        startActivity(intent);
                    }
                    else{
                        Toast.makeText(LoginActivity.this,"Numéro/code confidentiel invalide", Toast.LENGTH_LONG).show();
                    }

                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(LoginActivity.this,"dsl , probleme de connexion",Toast.LENGTH_LONG).show();
                } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            catch (JSONException e) {
                Toast.makeText(LoginActivity.this,"dsl , probleme dans le serveur , essayez autre fois",Toast.LENGTH_LONG).show();
            }
        }
    });
}
} 
```

这是 connct.php

>

```
 <?php
$json = file_get_contents('php://input');
$obj = json_decode($json);
$con = mysql_connect('localhost','root','') or die('Cannot connect to the DB');
mysql_select_db('baseandroid',$con);
$sql = 'SELECT count(*) FROM user WHERE Num_Compte=".$obj->{'num'}.'" AND Code_Compte="'.$obj->{'code'}.'"'; 
$req = mysql_query($sql) ;
$data = mysql_fetch_array($req); 
mysql_free_result($req); 
  $query = "SELECT * FROM Compte where Num_Compte=".$obj->{'num'}."";
  $result = mysql_query($query,$con) ;
 /* create one master array of the records */
   if(mysql_num_rows($result)) {
    while($post = mysql_fetch_assoc($result)) {
      $posts[] = array('post'=>$post);
    }
  }
 @mysql_close($con);
  header('Content-type: application/json'); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:46:18.330

首先，您在 UI 线程上使用网络。这是错误的。使用 AsyncTask 来做到这一点。

然后，“它不起作用”不是对问题的非常有用的描述。可以开始连接了吗？你有什么例外吗？你看到服务器上的连接了吗？你在连接中有一些数据吗？你收到答复了吗？答案是什么？

# php - 构建自定义表单和 Javascript/jQuery 不会影响某些元素

> ID：10125684
> 
> 赞同：1
> 
> 时间：2012-04-12T14:29:14.260
> 
> 标签：php, javascript, jquery, html

我正在尝试为我自己的 CMS 构建一个自定义表单的系统，现在这在大多数情况下都有效，我有一个“标准”文本用于表单，我有 Textarea，输入文本，这些都可以工作，

我正在使用 jQueryUI 可排序以允许用户从左侧的工具提示拖动到右侧疼痛，当元素被删除时，它会将其返回到工具提示，然后复制模板元素这一切现在都可以完美地工作以获取订单发送到我使用了替换名称系统的服务器，

例如

下拉模板使用的，

```
<div id="dropdown" class="item">
    <div class="title">Dropdown Field</div>
    <div class="container">
        <div class="error" style="display:none;">There are error in this element</div>
         <input class="type" type="hidden" name="items[%itemid%][type]" value="group" />
         Label : <br />
         <input type="text" class="label" name="items[%itemid%][label]" value="<?php echo $this->currentItem["label"]; ?>" /><br />
         Options :<br />
         <textarea name="items[%itemid%][options]" class="text_area"><?php echo $this->currentItem["options"]; ?></textarea>
         <div class="delete">
            <img src="<?php $this->getImagePath() ?>/delete.png" title="delete item" alt="a Rex X" />
            <span class="comment">Delete this Item</span>
        </div>
    </div>
</div> 
```

就在提交表单之前，我有一些 jQuery 代码将名称替换为有序表单，这里是代码，

```
function buildOrder(){
    window.count = 0;
    $(".rightPain > div.item").each(function(){
        window.count++;
        var currentItem = $(this);
        $("input, select, textarea", $(currentItem)).each(function() {
            $(this).attr('name', $(this).attr('name').replace('%itmid%', window.count));
        });
    });
    delete window.count;
} 
```

现在正如我所说，上面的代码适用于“std”文本、文本字段、文件字段、文本区域、密码和提交/重置按钮，

这只是下拉菜单，并且组选择不起作用，更奇怪的是window.count会增加，所以如果我放一个

> 下拉到表单中，分组到表单中，Std Text 到表单中，

在标准文本上`%itemid%`更改为`3`，但下拉列表和组仍然说`%itemid%`我觉得奇怪的是，使用`.replace(//,window.count)`通常应该导致`%itemid%`更改为`或，`undefined`但这并没有发生，真正奇怪的是我`console.log($(this))`在 buildOrder中添加了一个functions .each 选择，它正在选择它只是没有替换名称的元素`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:42:43.700

```
$(this).attr('name', $(this).attr('name').replace('%itmid%', window.count)); 
```

应该是 %itemid% 而不是 %itmid% 我假设`

# django - django profies 和 request.user - 错误

> ID：10125688
> 
> 赞同：1
> 
> 时间：2012-04-12T14:29:33.213
> 
> 标签：django, django-users, django-profiles

我收到以下错误：

> 'AnonymousUser' 对象没有属性 'get_profile'

在我添加了以下中间件之后，并尝试在之前没有登录的情况下登录我的网站：

```
class TimezoneMiddleware(object):
    def process_request(self, request):
        try:
            driver = request.user.get_profile()
            timezone.activate(driver.timezone)
        except ObjectDoesNotExist:
            timezone.activate('UTC') 
```

在回溯中，错误发生在 try 语句的第一行。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:50:45.533

对于未登录的用户，`request.user`是`AnonymousUser`实例，其中不包含`get_profile`. 我们可以通过以下方式检查是否`request.user`已登录并保护已登录用户的逻辑[`if request.user.is_authenticated():`](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.models.User.is_authenticated)

```
def process_request(self, request):
    if request.user.is_authenticated(): 
        try:
            driver = request.user.get_profile()
            timezone.activate(driver.timezone)
        except ObjectDoesNotExist:
            timezone.activate('UTC') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:13:44.977

request.user.get_profile() 可能会引发 AttributeError，您应该尝试以下操作

```
class TimezoneMiddleware(object):
    def process_request(self, request):
        try:
            driver = request.user.get_profile()
            timezone.activate(driver.timezone)
        except ObjectDoesNotExist, AttributeError:
            timezone.activate('UTC') 
```

# android - Android：PreferenceActivity 项目下方有额外的空格

> ID：10125695
> 
> 赞同：0
> 
> 时间：2012-04-12T14:29:49.527
> 
> 标签：android, background, styles, preferenceactivity

全部，

我是使用 PreferenceActivity 的新手，最终让它工作。但是，我遇到的问题是在我的首选项之后有一个难看的空白。我尝试应用样式并将背景颜色设置为黑色。然而，这并没有奏效。任何帮助，将不胜感激。我在下面附上了一些代码和屏幕截图。

谢谢

```
public class EditPref extends PreferenceActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    addPreferencesFromResource(R.xml.preferences);

} 
```

}

样式xml代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="editPref">
       <item name = "android:background">#FF000000</item>

    </style>

</resources> 
```

附件是首选项 xml 文件。

```
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">
    <CheckBoxPreference
        android:key="checkbox"
        android:title="Checkbox Preference"
        android:summary="Check it on, check it off" />
    <RingtonePreference
        android:key="ringtone"
        android:title="Ringtone Preference"
        android:showDefault="true"
        android:showSilent="true"

        android:summary="Pick a tone, any tone" />
</PreferenceScreen> 
```

我正在为 API 10 开发。

![在此处输入图像描述](../Images/d543f9cb25d91309cf70aad8d8d7964f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:56:55.353

ActivityManifest.xml 中的 Activity 声明是什么样的？更具体地说，您使用的是什么主题？我发布了一个[相关的 SO 帖子](https://stackoverflow.com/questions/9417111/how-to-change-background-color-of-child-preference-screen-in-honeycomb/10885472#10885472)的解决方案，但基本上你应该能够通过在 API 级别 10+ 上为 ListViews设置`overScrollFooter`来摆脱丑陋的空白。`@null`

我遇到了同样的问题，只是写了一篇更详细的[博客文章](http://wordpress.badwaterstudios.com/android-listview-background-fill-and-empty-space/)，但尝试使用它（当然，用你使用的主题代替父级）：

res/values/styles.xml

```
<style name="MyListView" parent="@android:style/Widget.ListView">
</style> 
```

res/values-v10/styles.xml

```
<style name="MyListView" parent="@android:style/Widget.ListView">
    <item name="android:overScrollFooter">@null</item>
</style> 
```

将您的主题设置为使用新的 ListView 样式：

```
<style name="Theme.MyPreferences" parent="android:Theme.Holo">
    <item name="android:listViewStyle">@style/MyListView</item>
</style> 
```

在您的 AndroidManifest.xml 中，声明 EditPref Activity 以使用新主题。类似于以下内容：

```
<activity
    android:name=".EditPref"
    android:theme="@style/Theme.MyPreferences" /> 
```

# ios - 纯文本之后的下一个最佳简单数据存储？

> ID：10125696
> 
> 赞同：1
> 
> 时间：2012-04-12T14:29:51.250
> 
> 标签：ios, ios5

我正在寻找一些结构化数据的存储格式。这是几个表/ 2-dim 数组。然后我想在 OS X 上输入数据并在 iOS 应用程序中使用它。这将是一个非常简单的学习应用程序（对我自己而言）。
稍后我希望能够在 iOS 上编辑表格。

我可能想稍后将它迁移到数据库，但现在最重要的是它尽可能简单（因为我对这件事的经验很少）。
如果你不能推荐任何东西，我会用纯文本文件来做。

但是，是否有一些简单的东西可以从一开始就提供优于纯文本的好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:32:08.867

XML 简单易懂。以后也可以轻松导入数据库、excel 和许多其他应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:33:34.553

JSON 非常适合以简单的方式存储信息。

这是一个关于它的教程。

[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:40:43.677

使用属性列表（plist）。他们完全是本地人。您需要做的就是将键值对填充到一个`NSDictionary`实例中，然后调用`-writeToFile:atomically:`or `-writeToURL:atomically:`。字典将作为 plist 写入磁盘，然后您可以使用`[ NSDictionary dictionaryWithContentsOfFile: plistPath ];`

如果您想将 plist 迁移到数据库，您需要做的就是从磁盘中读取 plist，并对键值对进行快速枚举，例如：

```
NSDictionary    *d = [ NSDictionary dictionaryWithContentsOfFile: plistPath ];

for ( NSString *key in d ) {
    [ myDBObject insertValue: [ d objectForKey: key ] forKey: key ];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:36:03.367

Xml 很酷，但远非简单的恕我直言。json 很酷，但在纯文件中编辑可能会很棘手。我建议您处理结构化文本，例如

```
key:value<cr> 
```

一个例子：

```
data00: the value for entry data00
foo: the value for entry foo
bar: the value for entry bar 
```

在目标 C（或任何其他语言）中解析它不会是太大的负担，并且肯定有网络上可用的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:50:34.750

取决于您要用于应用程序的语言 javascript: json java: xml, csv ruby​​: yaml, json, xml, csv .. CSV 和 XML 是所有语言中通常使用的格式，CSV 最简单，您可以找到工具就像 CSV 和 Excell 的数据库管理器一样，它可以立即与 CSV 一起工作。几乎所有处理数据范导出和导入 CSV 的程序。

用于某些目的的固定宽度也很简单。所有这些本质上都是文本文件。

现在有更强大的数据库解决方案也很容易设置，比如 SQLite 和一些 NoSql 产品（CouchDb、Mongo 等），虽然你需要学习更多，但从长远来看会更好。

在最近的浏览器中，您有存储可能性。

# javascript - 单击浏览器的后退按钮后，Opera 浏览器不会触发页面上的 JS 或服务器端代码 (JSP)

> ID：10125701
> 
> 赞同：3
> 
> 时间：2012-04-12T14:30:01.900
> 
> 标签：javascript, jsp, browser, opera, back-button

我在其他流行的浏览器中没有这个问题。在一个 JSP 页面（我们称之为 Page1.jsp）中，我单击了一个转到另一个页面的表单。当我单击 Opera 的后退按钮时，它返回到 Page1.jsp，但没有重新触发 JavaScript 或 JSP 代码。例如，

```
<!-- Inside header tag -->
<script language="JavaScript>
  alert("Does this work in Opera?");
</script> 
```

一个简单的警报语句不会触发。服务器端代码也是如此。但是，其他流行的桌面浏览器没有问题。

我怎样才能解决这个问题？

感谢您的任何帮助。

**更新**

我应该声明——对此我深表歉意——Page1.jsp 包含一个框架/一个 iframe，这是提交表单所在的位置。当用户提交表单时，它会在框架/iframe 中加载一个新页面。此时，当用户单击浏览器的后退按钮时，我看到 Page1.jsp 已缓存，但 frame/iframe 会重新加载。这发生在除 Opera 之外的所有流行浏览器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:46:08.580

实际上，大多数浏览器的行为都是这样的，将浏览器返回到您离开它的状态，而不是“从头开始”重新加载访问过的页面。这通常是一件好事，使导航更快。

“保存状态”的浏览器在卸载时这样做，要覆盖它，您可以用您自己的一个替换卸载处理程序 -

```
<script>
alert('loaded');

onunload=function(){ return true; }
</script> 
```

用户可以在其浏览器上设置某种自动保存来记住访问之间的表单状态 - 为此，您可能需要在卸载处理程序中手动将表单字段设置为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:20:30.230

@kennebec：非常感谢。由于您的回答，我能够做更多的挖掘工作，我在[这里](https://stackoverflow.com/questions/158319/cross-browser-onload-event-and-the-back-button)找到了一个 stackoverflow 问题和一篇 Opera 文章[，](http://www.opera.com/support/kb/view/827/)它解决了这个问题：

```
history.navigationMode = "compatible"; // Opera only property
$(document).ready(function() {
  alert("test");
}); 
```

根据[这个网站](http://help.dottoro.com/ljrtiivh.php)，navigationMode 仅受 Opera 浏览器支持。所以，这很完美，我不必编写任何卸载事件的脚本。我查了 pageshow/pagehide，但它似乎并不完全兼容跨浏览器，而且 HTML5 有 onpageshow/onpagehide，但我需要跨浏览器投诉并支持旧版浏览器。

# javascript - 当克隆一个 jquery 对象并在其中保存一个 javascript 对象时，我如何访问内容

> ID：10125705
> 
> 赞同：0
> 
> 时间：2012-04-12T14:30:18.420
> 
> 标签：javascript, jquery

我在 javascript 对象中保存了一个 div：

```
DYN = {}; 
DYN['mydiv'] = $('#my-div').clone(true); 
```

如何使用 jquery 直接访问此 javascript 对象的属性。我是否必须先重新加载#my-div div，才能访问 div 的属性，还是 ????

```
$("#my-div").replaceWith(DYN['mydiv']); 
$('#my-div').val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:31:45.380

由于`DYN['mydiv']`包含一个 jQuery 对象，您应该能够在其上使用 jQuery 方法。

```
alert( DYN['mydiv'].val() ); 
```

**演示：http:** [//jsfiddle.net/5rB2X/](http://jsfiddle.net/5rB2X/)

# android - android如何在android ip更改时弹出消息？

> ID：10125711
> 
> 赞同：0
> 
> 时间：2012-04-12T14:30:33.180
> 
> 标签：android, android-wifi, wifimanager

我需要一个每次网络 ip 发生变化时都会弹出一条消息的应用程序。例如，当我在 wifi-es 之间移动时。

有人可以给我一些代码示例吗？

谢谢。欣赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:53:40.267

可能您可以使用教程 [http://android-er.blogspot.in/2011/01/check-rssi-by-monitoring-of.html](http://android-er.blogspot.in/2011/01/check-rssi-by-monitoring-of.html) 其中包括广播接收器，并且在接收到此类广播时，您可以比较以前的 ip 和当前的ip。希望这会有所帮助。

# in-app-purchase - www.sandbox.itunes.apple.com 已关闭

> ID：10125714
> 
> 赞同：4
> 
> 时间：2012-04-12T14:30:42.607
> 
> 标签：in-app-purchase, app-store-connect

在此先感谢您的帮助。

**具体问题：**由于在沙盒环境中测试应用内购买时出现错误 -1001“无法连接到 iTunes 商店”：

1.  知道是否`www.sandbox.itunes.apple.com`下降很重要吗？
2.  如果没有，我怎么知道 Apple 的沙盒是否已关闭？

**背景：**我正在努力将应用内购买添加到我的 iOS 应用并在沙盒中进行测试。我能够接收`productsRequest:didReceiveResponse`方法，并接收产品数组。当我将 SKPayment 添加到 SKPaymentQueue 时，我的问题就出现了。

**我已经做好了：**

1.  具有匹配配置文件的特定 appID（com.company.appname 中没有 *）
2.  在 xcode 中下载它们
3.  我的应用程序包标识符与我在 #1 以及 iTunesConnect 中的标识符匹配
4.  更新了 Xcode 设置（代码签名等，如[Troy Bryant 的教程](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/comment-page-3/#comment-20901)中所述）
5.  在 iTunesConnect 中注册应用程序和产品
6.  已提交，被拒绝的二进制文件（状态再次等待上传）
7.  使用 Ray Wenderlich 教程中的代码（此代码之前在另一个测试应用程序中工作，但我删除了该测试项目）
8.  在 iTunesConnect 中添加了一个测试用户
9.  测试前从应用商店注销
10.  其他：删除app再测试；iPhone的总重置
11.  在 iTunesConnect 中最后一次更改后等待 24 小时

如果您有其他建议，请提供帮助。我的主要问题是如何知道沙盒服务器是否有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:59:54.947

我的沙盒应用内购买突然起作用了。似乎沙盒服务器现在已经启动。我现在可以回答上面的第一个菜鸟问题： 1\. 检查 www.sandbox.itunes.apple.com 是否启动并不是测试沙盒服务器是否启动的方法。www.sandbox.itunes.apple.com 仍然关闭，但我的沙盒应用内购买正在运行。我仍然没有答案 2。感谢 microspino 抽出时间提供您的观察。

# linux - 执行 c6accel 示例后出现分段错误错误

> ID：10125721
> 
> 赞同：1
> 
> 时间：2012-04-12T14:30:58.797
> 
> 标签：linux, memory, arm, texas-instruments, omap

我使用 OMAP-L138 Exp 套件。首先请查看我的 U-boot 属性。

它们是：

```
U-Boot > printenv
    baudrate=115200
    autoload=no
    bootcmd=run netboot
    bootfile=uImage-da850-omapl138-evm.bin
    filesize=204104
    fileaddr=C0700000
    rootpath=/home/my_name/targetfs
    netboot=tftpboot 0xc0700000 uImage-da850-omapl138-evm.bin; bootm 0xc0700000
    bootargs=console=ttyS2,115200n8 mem=64M root=/dev/nfs rw nfsroot=192.168.1.218:/home/my_name/targetfs ip=192.168.1.231
    netargs=console=ttyS2,115200n8 noinitrd rw mem=64M root=/dev/nfs rw nfsroot=192.168.1.218:/home/my_name/targetfs,nolock ip=192.168.1.231
    stdin=serial
    stdout=serial
    stderr=serial
    ver=U-Boot 2009.11 (Jan 13 2011 - 01:05:37)
    Environment size: 728/65532 bytes 
```

在 DVSDK 的 setup.sh 中，我使用了下一个参数：**板内存 64 mb**，Linux 内核位置 - TFTP，根文件系统位置 - NFS。DVSDK制作成功。我也在 c6accel_1_01_00_07 目录中进行了安装。

```
root@my_name-desktop:/usr/local/dvsdk/c6accel_1_01_00_07# make install
Creating /home/my_name/targetfs/c6accel_app
Copying kernel modules to target file system: /home/my_name/targetfs/c6accel_app/
Copying cmemk.ko
Copying dsplinkk.ko
Copying c6accel codec servers from /usr/local/dvsdk/c6accel_1_01_00_07
Copying c6accel test app from /usr/local/dvsdk/c6accel_1_01_00_07
Copying testfile from /usr/local/dvsdk/c6accel_1_01_00_07 
```

现在我想执行 C6accel 示例。所以我重置了目标。**哦不，那是什么？**

```
CMEM Range Overlaps Kernel Physical - allowing overlap
CMEM phys_start (0xc2000000) overlaps kernel (0xc0000000 -> 0xc4000000)
CMEMK Error: Failed to request_mem_region(0xc2000000, 18874368)
FATAL: Error inserting cmemk (/lib/modules/2.6.37/kernel/drivers/dsp/cmemk.ko): Bad address 
```

行。我**忽略它**并输入登录名。

```
root@arago:/c6accel_app# ls
benchmarking.txt                 dsplinkk.ko
c6accel_app                      loadmodules_omapl138_c6accel.sh
c6accel_omapl138.x674            test_files
cmemk.ko 
```

行！

```
root@arago:/c6accel_app# ./loadmodules_omapl138_c6accel.sh
    CMEMK module: built on Apr 12 2012 at 17:32:52
      Reference Linux version 2.6.37
      File /usr/local/dvsdk/linuxutils_2_26_02_05/packages/ti/sdo/linuxutils/cmem/src/module/cmemk.c
    CMEM Range Overlaps Kernel Physical - allowing overlap
    CMEM phys_start (0xc2000000) overlaps kernel (0xc0000000 -> 0xc4000000)
    CMEMK Error: Failed to request_mem_region(0xc2000000, 18874368)
    FATAL: Error inserting cmemk (/lib/modules/2.6.37/kernel/drivers/dsp/cmemk.ko): Bad address 
```

哎呀！**又是同样的错误！**

在文件 loadmodules_opl138_c6accel.sh 我只修改了一个字符串

```
modprobe cmemk phys_start=0xC2000000 phys_end=0xC3200000 pools=20x4096 allowOverlap=1 
```

所以，最后我有

```
modprobe cmemk phys_start=0xC4000000 phys_end=0xC5200000 pools=20x4096 allowOverlap=1 
```

保存了它。 **尝试2。**

```
root@arago:/c6accel_app# ./loadmodules_omapl138_c6accel.sh
CMEMK module: built on Apr 12 2012 at 17:32:52
  Reference Linux version 2.6.37
  File /usr/local/dvsdk/linuxutils_2_26_02_05/packages/ti/sdo/linuxutils/cmem/src/module/cmemk.c
allocated heap buffer 0xc5000000 of size 0x11ec000
cmemk initialized 
```

**成功！**然后我跑了 ./c6accel_app

我很高兴看到

```
Test for Arithmetic RTS functions successful
******************************************************************************
All tests done.
******************************************************************************

libgcc_s.so.1 must be installed for pthread_cancel to work 
```

**不过早……**

```
root@arago:/c6accel_app# ls
Segmentation fault 
```

东西坏了。它已经完全坏掉了。在这种情况下我该怎么办？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:25:42.987

棺材很容易打开......

设备有 64 mb 的 RAM。通过这个命令

```
bootargs=console=ttyS2,115200n8 mem=64M root=/dev/nfs rw nfsroot=192.168.1.218:/home/my_name/targetfs ip=192.168.1.231 
```

我只是说“好吧，内核，把它全部拿走。这一切都是给你的”

所以...我得到了我想要的：32 mb - 用于内核。其他 32 mb 用于 CMEM。没有更多的分段错误。

# c# - C# 限制线程 CPU 使用率

> ID：10125727
> 
> 赞同：3
> 
> 时间：2012-04-12T14:31:18.753
> 
> 标签：c#, multithreading, backgroundworker

已编辑：最初陈述了两个问题，自己测试了一个并得到了答案。

我正在创建一个线程读取器/写入器，它查看文件夹集中的文件。它每 5 分钟执行一次，如果用户指定它则更少。

我当前的问题是线程会以有点贪婪的方式查看文件。我想将线程限制为最多使用 CPU 的 30%（或用户指定的数量，以防他们想要更快/更慢）。这样做的原因是这是一个应该始终打开的程序，我不希望它干扰他们浏览互联网或同时使用其他程序。我个人倾向于注意到使用 100% CPU 的线程程序与其他程序一起使用，即使它们被设置为较低的优先级，并且我试图避免这种情况。

我正在考虑使用 PerformanceCounter 来检查 CPU 使用率，希望能识别程序，并在性能（整个 CPU 或我的程序发现它）开始达到峰值时添加更多的睡眠周期。我没有找到任何关于限制线程 CPU 使用率的文档，除了“大声笑，为什么要打扰？”，“不太可行”，没有任何理由（这完全没问题 - 大多数人希望线程尽快完成，可能没有.Net 或其他 C# 库固有的方法）。

有没有人知道除了设置它的优先级较低或通过使用 PerformanceCounter/其他一些 CPU 监视器增加更多开销之外的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:33:54.193

我不确定您当前是如何监视文件夹的，但我认为您应该看看 FileSystemWatcher 类（http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx ）。

您可以将其设置为监视特定路径的更改，并且对 CPU 使用率非常低。它也是异步的（所以你甚至不需要单独的线程）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:42:41.297

不确定我是否以正确的方式理解您。您每 5 分钟检查一次文件，并且检查（或它们的处理）占用了其他进程太多的 CPU 时间？

如果是这样，如何通过在处理之间（例如文件之间）暂停使用来减慢它[`Thread.Sleep`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)？

我真的不认为你应该担心一些最大 CPU 负载（加上配置这对于用户来说可能很麻烦或令人困惑，因为对于多核 CPU，实际上 100% 的 cpu 使用并不总是很清楚，它是在一个核心上 100%还是总共 100%？）。

暂停/睡眠的时间可能取决于到目前为止经过的时间量以及剩下的时间来做其他事情，例如，您可以为每个文件保留 10 毫秒；如果处理时间为 4 毫秒，则您睡眠 6 毫秒。

如果您不断检查文件以进行检查，请确保使用 a`FileSystemWatcher`代替，这应该可以解决您在这种情况下的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:54:54.280

CPU负载本身还不错，只要你不max out。只需降低进程的优先级就可以了。如果还有其他优先级更高的进程，它们将被优先处理。

```
Process thisProc = Process.GetCurrentProcess();
  thisProc.PriorityClass = ProcessPriorityClass.BelowNormal; 
```

# ios - iOS：NSXMLParser - 向 UITableView 添加属性值

> ID：10125732
> 
> 赞同：0
> 
> 时间：2012-04-12T14:31:27.127
> 
> 标签：ios, uitableview, nsxmlparser

我已经为此工作了几个小时，并且已经被难住了。我可能正在做一些导致这个问题的多余或愚蠢的事情，所以我能得到的任何帮助都将不胜感激。

我正在使用 NSURL 拉入一个网站：[http ://undignified.podbean.com/feed](http://undignified.podbean.com/feed). 从这里我使用 NSXMLParser 来解析 XML 页面并搜索 elementName “enclosure”。“enclosure”元素包含一个属性“url”，其中包含 Mp3 的 URL。解析部分有效，我能够 NSLog 出数组的内容，并且我已经验证所有可用的 URL 都存在，但我无法将它加载到 UITableView 中，它只是加载为空白。我正在加载解析出的属性值的数组，_podAllEntries 将使用 dispatch_async 中的值登录到控制台，但是当我的 ViewController 的任何其他部分访问此数组时，它是空白的。我认为由于在后台线程上调用了异步，因此可能必须实现某种委托，以便其他方法可以访问该数组中的值？不过，我可能完全错了。

总而言之，我正在尝试连接到 RSS 提要（xml 页面），解析一个名为“url”的属性并收集它的值，然后将 URL 加载到 tableView 中。我的代码在下面列出。如果我对任何事情不清楚或模棱两可，请随时发表评论。

UnDigParser.h - 用于解析[http://undignified.podbean.com/feed的类](http://undignified.podbean.com/feed)

```
@interface UnDigParser : NSXMLParser <NSXMLParserDelegate> {
}
@property (retain) NSMutableArray *links;
@end 
```

UnDigParser.h - 实现文件：

```
#import "UnDigParser.h"

@implementation UnDigParser
NSMutableArray *_links;

@synthesize links = _links;

-(void)parserDidStartDocument:(NSXMLParser *)parser{
_links=[[NSMutableArray alloc] init];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
if ([elementName isEqualToString:@"enclosure"]){

    NSString *link = [attributeDict objectForKey:@"url"];
    if (link){
        [_links addObject:link];
        }
} 
```

}

```
-(BOOL)parse{
self.delegate = self;
return [super parse];
}

@end 
```

ViewController.h 文件：

```
@interface getpodViewController : UITableViewController <UITableViewDataSource>{
NSMutableArray *_podAllEntries;
NSMutableArray *_allEntries;
}

@property(retain) NSMutableArray *podAllEntries;
@property(retain) NSMutableArray *allEntries;

@end 
```

ViewController.M 文件：

```
#import "getpodViewController.h"
#import "PodcastEntry.h"
#import "UnDigParser.h"

@implementation getpodViewController

@synthesize podAllEntries = _podAllEntries;
@synthesize allEntries = _allEntries;

-(void)addRows{
dispatch_async(dispatch_get_global_queue(0, 0), ^{

    NSURL *url = [NSURL URLWithString:@"http://undignified.podbean.com/feed"];
        UnDigParser *parser = [[UnDigParser alloc] initWithContentsOfURL:url];      

    [parser parse];
    [_podAllEntries addObject:parser.links];
    NSLog(@"%@", _podAllEntries);

});

}

- (void)viewDidLoad {
[super viewDidLoad];

self.title = @"Podcasts";
self.podAllEntries = [[[NSMutableArray alloc]init]autorelease];

[self addRows];
for (UnDigParser *entry in _podAllEntries){
    [_allEntries insertObject:entry atIndex:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]]
                          withRowAnimation:UITableViewRowAnimationRight];
}
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [_podAllEntries count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil){
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

NSString *cellValue = [_podAllEntries objectAtIndex:indexPath.row];

cell.textLabel.text = cellValue;

return cell;
}

- (void)dealloc {
    [super dealloc];
[_podAllEntries release];
_podAllEntries = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:33:48.357

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
} 
```

尝试添加这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:50:39.350

该问题实际上与 cellForRowAtIndexPath 方法有关。当试图填充单元格时，我使用了一个普通的 NSString 来对抗一个不允许的 NSMutableArray 对象。修改代码如下：

```
NSString *cellValue = [NSString stringWithFormat:@"%@", _podAllEntries];

cell.textLabel.text = cellValue; 
```

# javascript - ajax 调用后未解释 Javascript

> ID：10125733
> 
> 赞同：0
> 
> 时间：2012-04-12T14:31:28.483
> 
> 标签：javascript, wordpress

我正在制作一个 wordpress 网站，但我遇到了问题。我添加了一个社交按钮以在多个社交网站上分享帖子。

我还做了一个无限滚动加载下一篇文章。我的问题是当我将 html 回调放入我的页面时，这个 javascript 没有被解释。这个按钮是用javascript制作的。

我的 ajax 调用返回给我一个 wordpress 页面的所有 html（带有 html 标签......）

这是我的 javascript 代码：

```
$(window).scroll(function(){
        if  ($(window).scrollTop() == $(document).height() - $(window).height()){

            // Are there more posts to load?
            if(pageNum <= max) {
                $.ajax({
                    type: "GET",
                    url:nextLink,
                    dataType: "html",
                    success : function(data) {
                        // Update page number and nextLink.
                        pageNum++;
                        nextLink = nextLink.replace(/\/page\/[0-9]?/, '/page/'+ pageNum);
                        var pageN = pageNum-1;
                        var div = $(data).find('.my-post-format');

                        // Add a new placeholder, for when user clicks again.
                        $('#pbd-alp-load-posts')
                            .before('<div class="pbd-alp-placeholder-'+ pageNum +'"></div>')
                    }

                });
            }
        }
    }); 
```

我的html代码：

```
<!-- Lockerz Share BEGIN -->
                    <li id="partager-article"> <a class="a2a_dd" href="http://www.addtoany.com/share_save?linkurl=<?php the_title() ?>&amp;linkname=<?php the_permalink() ?>">share</a>
                   <script type="text/javascript">
                   var a2a_config = a2a_config || {};
                   a2a_config.linkname = "<?php the_title() ?>";
                   a2a_config.linkurl = "<?php the_permalink() ?>";
                   a2a_config.locale = "fr";
                   a2a_config.num_services = 6;
                   </script>
                   <script type="text/javascript" src="http://static.addtoany.com/menu/page.js"></script>
                   <!-- Lockerz Share END --></li> 
```

在我的数据变量中，我有我的标签，但是当我执行 $(data) 时，这个标签就会消失。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:57:08.357

尝试创建一个包含 div 并向其中添加数据，例如

```
$('<div />').html(数据)
```

# eclipse - 导入开源项目

> ID：10125736
> 
> 赞同：1
> 
> 时间：2012-04-12T14:31:35.957
> 
> 标签：eclipse, open-source

我下载[了hedgewars](http://code.google.com/p/hedgewars/source/checkout)并继续将文件导入Eclipse。我去了文件>导入|| 常规>Workspace 中的现有项目 || 我设置了下载hedgewars文件夹的根目录。然后它给我一个错误，说“没有找到要导入的项目”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:47:51.143

检查这个：[如何在 Eclipse 中从现有源创建项目然后找到它？](https://stackoverflow.com/questions/2636201/how-to-create-a-project-from-existing-source-in-eclipse-and-then-find-it) 如果您下载的项目内部没有eclipse项目，您可能需要使用现有源创建一个新项目

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-23T23:14:55.380

如果有 pom 文件，你应该可以通过 Existing Maven Projects 导入

# class - 从 fla 文件到 actionscript 3.0 中的类

> ID：10125744
> 
> 赞同：2
> 
> 时间：2012-04-12T14:31:48.997
> 
> 标签：class, actionscript

我正在尝试制作“Achtung！die kurve” - 类似于 Actionscript 3.0 中的游戏。

到目前为止，我已经完成了其中一个“蠕虫”的运动，并且效果很好。

我想把它分成不同的类文件，但我似乎无法让它工作。我有一个 .fla 文件和 4 个 .as 文件。到目前为止，我只有其中两个中的代码。当我将所有代码直接放入 fla 文件时，它工作得非常好，但是当我将它放入我的播放器类时，它不会“添加孩子”到舞台上。

这是我的播放器 .as 文件： http: [//pastebin.com/hZSxT9cu](http://pastebin.com/hZSxT9cu)

我之所以评论 addChild，是因为我想在我的 mainFile.as

这是来自主文件： http: [//pastebin.com/TAwUYrTU](http://pastebin.com/TAwUYrTU) 我不太确定如何在主文件中调用它，所以我猜这将是问题所在。

所有文件都被命名并正确放置在同一个文件夹中，flash 说我的每个 .as 文件都针对 .fla 文件，所以这似乎不是问题。

任何帮助深表感谢。

此外，如果有人知道我可以如何改变我的精灵的速度，那就太棒了！似乎也无法使其正常工作。

最好的问候杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:53:41.990

查看您引用的游戏，很明显您将需要一些碰撞检测。[本关于像素级碰撞检测的](http://active.tutsplus.com/tutorials/games/pixel-level-collision-detection/)教程可能有助于您入门。

使用您当前的设置，我认为提高绘图速度的唯一方法是提高 fla 的帧速率。

您不能将播放器实例作为子类添加到主类中，因为目前它无权访问它。实际上，在你的玩家类中创建多个精灵是非常低效的。一种更有效的方法是直接在播放器实例的图形实例中绘制矩形。

我认为以下内容可能是您尝试做的一个很好的起点。再次，我包含了一些评论，希望能解释我在做什么。

将此设置为您的 fla 中的文档类：

```
package  {

    import flash.display.MovieClip;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    public class MainTrink extends MovieClip {

        // define a list of players, their color, and controls
        // this should make it easier to vary the number of players
        private var players:Array = [
            {color: 0xff0000, left: Keyboard.A, right: Keyboard.S},
            {color: 0x0000ff, left: Keyboard.O, right: Keyboard.P},
            {color: 0x00ff00, left: Keyboard.NUMBER_1, right: Keyboard.NUMBER_2},
            {color: 0xffff00, left: Keyboard.LEFT, right: Keyboard.RIGHT},
        ];

        public function MainTrink() {

            var playerData:Object;
            var player:PlayerTrink;

            // Create a player instance for each player specified in the players array
            for (var i:int = 0; i < players.length; i ++) 
            {
                playerData = players[i];

                player = new PlayerTrink();
                player.color = playerData.color;
                player.init();

                this.addChild(player);

                // Add a reference to the instance back onto the players
                // list so that we can access it easily in other methods
                playerData.player = player;
            }

            // add listeners for keyboard events
            this.stage.addEventListener(KeyboardEvent.KEY_DOWN, _onKeyDown);
            this.stage.addEventListener(KeyboardEvent.KEY_UP, _onKeyUp);
        }

        private function _onKeyDown(event:KeyboardEvent):void
        {
            var playerData:Object;
            var player:PlayerTrink;

            // Check whether pressed key is a control for one of our players
            for (var i:int = 0; i < players.length; i ++)
            {
                playerData = players[i];
                player = PlayerTrink(playerData.player);

                if (event.keyCode == playerData.left)
                    player.leftKeyDown = true;

                if (event.keyCode == playerData.right)
                    player.rightKeyDown = true;
            }
        }

        private function _onKeyUp(event:KeyboardEvent):void
        {
            var playerData:Object;
            var player:PlayerTrink;

            for (var i:int = 0; i < players.length; i ++)
            {
                playerData = players[i];
                player = PlayerTrink(playerData.player);

                if (event.keyCode == playerData.left)
                    player.leftKeyDown = false;

                if (event.keyCode == playerData.right)
                    player.rightKeyDown = false;
            }
        }
    } 
```

}

并将此文件包含在与 fla 相同的目录中：

```
 package  {

    // Need to import other classes referenced within this class
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.events.Event;
    import flash.ui.Keyboard;

    // By convention classes are usually named using CamelCase
    public class PlayerTrink extends MovieClip {

        // Move your properties out of your class constructor
        private const TURNSPEED:Number = 0.1;

        private var posX:Number = 50;
        private var posY:Number = 50; 
        private var dirX:Number = 1;
        private var dirY:Number = 1;
        private var dir:Number = 0;

        private var _leftKeyDown:Boolean = false;
        private var _rightKeyDown:Boolean = false;

        private var _color:Number;

        public function PlayerTrink() {
            // constructor code
        }

        public function init():void
        {
            this.addEventListener(Event.ENTER_FRAME, _onEnterFrame);
        }

        private function _onEnterFrame(e:Event):void {
            if(_leftKeyDown) dir -= TURNSPEED;
            if(_rightKeyDown) dir += TURNSPEED;
            dirX = Math.cos(dir);
            dirY = Math.sin(dir);
            posX += dirX;
            posY += dirY;
            drawRect(posX, posY); 
        }

        private function drawRect(x:Number, y:Number):void {
            this.graphics.beginFill(_color);
            this.graphics.drawRect(x, y, 4, 4);
            this.graphics.endFill();
        }                           

        public function set leftKeyDown(value:Boolean):void 
        {
            _leftKeyDown = value;
        }

        public function set rightKeyDown(value:Boolean):void 
        {
            _rightKeyDown = value;
        }                   

        public function set color(value:Number):void 
        {
            _color = value;
        }        
    }   
} 
```

# c# - WCF WebService 中的 GZip 压缩

> ID：10125748
> 
> 赞同：9
> 
> 时间：2012-04-12T14:31:56.257
> 
> 标签：c#, wcf, web-services, gzip

我有一个托管在 IIS7.5 上的 .NET 3.5 Web 服务。

我有一个连接到此 Web 服务的客户端应用程序。

我更改（在客户端应用程序中）httpWebRequest.Create 方法为 GZip 添加自动解压缩，但它不起作用

```
 WebRequest IWebRequestCreate.Create(Uri uri)
    {
        HttpWebRequest httpWebRequest =
            Activator.CreateInstance(
                typeof(HttpWebRequest), 
                BindingFlags.CreateInstance | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance,
                null, 
                new object[] { uri, null }, 
                null) as HttpWebRequest;

        if (httpWebRequest == null)
            return null;

        httpWebRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
        httpWebRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;

        return httpWebRequest;
    } 
```

这样请求正确发送，答案以gzip编码（我从Fiddler看到），但出现异常：

```
Response is not wellformed XML 
```

（我认为客户没有解码答案）

如果我删除这一行，如 MSDN 文档中所示

```
httpWebRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate"); 
```

答案不是 GZip 编码的（并且在请求中没有 ACCEPT-ENCODING 标头）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:28:41.820

我这样做是为了使用带有 DataContract 的 WCF 传输 DataTable 对象。您必须按如下方式创建 DataContract：

```
[DataContract]
public class WCFDataTableContract
{
    [DataMember]
    public byte[] Schema { get; set; }

    [DataMember]
    public byte[] Data { get; set; }
} 
```

然后我创建了一个二进制转换器，它将自动将任何对象转换为字节数组，然后我可以使用 GZip 对其进行压缩。

```
public static class CompressedBinaryConverter
{
    /// <summary>
    /// Converts any object into a byte array and then compresses it
    /// </summary>
    /// <param name="o">The object to convert</param>
    /// <returns>A compressed byte array that was the object</returns>
    public static byte[] ToByteArray(object o)
    {
        if (o == null)
            return new byte[0];

        using (MemoryStream outStream = new MemoryStream())
        {
            using (GZipStream zipStream = new GZipStream(outStream, CompressionMode.Compress))
            {
                using (MemoryStream stream = new MemoryStream())
                {
                    new BinaryFormatter().Serialize(stream, o);
                    stream.Position = 0;
                    stream.CopyTo(zipStream);
                    zipStream.Close();
                    return outStream.ToArray();
                }
            }
        }
    }

    /// <summary>
    /// Converts a byte array back into an object and uncompresses it
    /// </summary>
    /// <param name="byteArray">Compressed byte array to convert</param>
    /// <returns>The object that was in the byte array</returns>
    public static object ToObject(byte[] byteArray)
    {
        if (byteArray.Length == 0)
            return null;

        using (MemoryStream decomStream = new MemoryStream(byteArray), ms = new MemoryStream())
        {
            using (GZipStream hgs = new GZipStream(decomStream, CompressionMode.Decompress))
            {
                hgs.CopyTo(ms);
                decomStream.Close();
                hgs.Close();
                ms.Position = 0;
                return new BinaryFormatter().Deserialize(ms);
            }
        }
    }
} 
```

将其转储到您的项目中并在您的服务中像这样调用以进行压缩：

```
dt.Data = CompressedBinaryConverter.ToByteArray(data); 
```

然后在客户端这样调用它以转换回对象：

```
dt = (DataTable)CompressedBinaryConverter.ToObject(wdt.Data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:54:44.690

如果您同时控制客户端和服务器，一种可能的方法是使用[protobuf](http://marcgravell.blogspot.com/2009/11/controlling-wcf-protobuf-net-at.html)通过 WCF 服务实现压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T09:40:23.553

解决了！！问题中的代码足以用于服务参考。如果您使用的是 Web 引用，请同时添加该行

```
my_service_object.EnableDecompression = true; 
```

# java - 使用 WSS4J 的安全 Web 服务调用返回“处理 标题"

> ID：10125753
> 
> 赞同：0
> 
> 时间：2012-04-12T14:32:03.693
> 
> 标签：java, ws-security, wss4j

我正在尝试使用 WSS4J 将密码摘要 WS-Security 位添加到来自我的客户端的 Web 服务调用。我使用 Axis 的 WSDL4J 从 WSDL 生成客户端类，并按照说明使用 WSS4J 将 WS-Security 的“Password Digest”标头添加到 SOAP 消息，但返回错误消息“处理标头时发现错误”。添加调试消息，看起来我的 CallbackHandler 并没有受到打击。我做错了什么吗？或者我是否遗漏了一些在 WSS4J 文档中无法解释的设置？

```
class CSProvider {
    public CS get(CSService csService, URL url, String username)
            throws ServiceException {
        CS csPort = csService.getCSPort(url);

        ((Stub) csPort)._setProperty(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
        ((Stub) csPort)._setProperty(WSHandlerConstants.USER, username);
        ((Stub) csPort)._setProperty(UsernameToken.PASSWORD_TYPE, WSConstants.PW_DIGEST);
        ((Stub) csPort)._setProperty(WSHandlerConstants.PW_CALLBACK_CLASS, "com.example.namespace.to.PasswordCallbackHandler");

        return csPort;   
    }
}

public class PasswordCallbackHandler implements CallbackHandler {

    @Override
    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (Callback callback : callbacks) {
            if (callback instanceof WSPasswordCallback) {
                ((WSPasswordCallback) callback).setPassword(PasswordStore.getPassword());
            } else {
                throw new UnsupportedCallbackException(callback);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:31:44.947

经过一番摸索，我发现了问题所在。正如我所料，Web 服务请求在没有通过的情况下`PasswordCallbackHandler`发出，因此它们从远程服务器返回给定的错误消息，该服务器需要有效的身份验证凭据。我花了一段时间才确定我需要`csService`像这样构建服务定位器（在本例中为 ）：

```
CSService csService = new CSServiceLocator(new FileProvider("client_deploy.wsdd")); 
```

使用 client_deploy.wsdd 文件，如下所示：

```
<deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
    <transport name="http" pivot="java:org.apache.axis.transport.http.HTTPSender"/>
    <globalConfiguration>
        <requestFlow>
            <handler name="csHandler" type="java:org.apache.ws.axis.security.WSDoAllSender"/>
        </requestFlow>
    </globalConfiguration>
</deployment> 
```

然后设置属性从`CSProvider.get()`工作得很好。

我避免使用 wsdd 文件，因为我看到的所有其他示例都使用它来设置用户名和密码类——这两件事我要到运行时才知道。明智的说法：当文档说您可以使用`_setProperty()`方法*而不是*wsdd 文件时，这仅意味着出于设置这些属性的目的，而不是完全替换文件。

# wpf - MVVM Light - 当前显示的是哪个视图？

> ID：10125760
> 
> 赞同：0
> 
> 时间：2012-04-12T14:32:30.153
> 
> 标签：wpf, mvvm-light

我已经实现了 WPF 的导航服务来从一个视图导航到另一个视图。我通过使用 ViewModelLocator 来做到这一点，该 ViewModelLocator 负责在每次收到正确的“Galasoft Messenger”时从一个视图导航到另一个视图。

好的。

现在，有很多 Views-ViewModels 组合，我决定创建一个在某些视图中共享（包含在 XAML 中）的用户控件。这个 UserControl 有它自己的 ViewModel 和一些属性来设置它的外观取决于当前显示的视图。

如何从当前显示的视图（在用户控件内部）访问 UserControl 的 ViewModel 的属性？

还有更多，我如何（以及在​​哪里）确定当前显示的视图？

如果需要，我可以发布一些代码来提供帮助，但我想答案很简短，但我不知何故错过了一些东西......

谢谢你。

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:59:36.800

当我在我想访问视图模型的地方托管用户控件时，我通常使用一个 ContentControl 连接到数据绑定的 DataTemplate 中，就像在[这个](https://stackoverflow.com/questions/5498989/datatemplate-in-resource-sets-viewmodel-to-view-but-then)答案中一样。如果您需要切换视图模型使用的视图，您可以使用类似[此](https://stackoverflow.com/questions/6114479/what-is-the-best-way-to-switch-views-usercontrols-in-mvvm-light-and-wpf)答案的触发器。

通过该设置，您将能够设置用户控件的视图模型所需的所有属性，并知道用户控件正在使用哪个视图。

# php - 联系表 - 来自字段

> ID：10125762
> 
> 赞同：0
> 
> 时间：2012-04-12T14:32:42.923
> 
> 标签：php, email, contact-form

我的网站上有一个联系表格，有时通过此表格发送的电子邮件会进入垃圾邮件文件夹。我认为问题在于已发送电子邮件标题中使用的“发件人”字段。在该字段中是用户输入的电子邮件地址。将诸如contact@mywebsite.com之类的地址用于“发件人”字段并仅用于发件人的回复字段地址是否是一种好习惯？或者可以使用其他什么解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:36:08.500

电子邮件被标记为垃圾邮件的原因有很多。

您是否有一个反向 dns 名称再次设置邮件服务器的上行地址？许多邮件服务器首先检查这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:36:46.517

在我看来，在 from 字段中使用 contact@mywebsite.com 没有问题，因为它来自您网站的联系页面。没有问题海事组织。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:46:46.880

电子邮件被标记为垃圾邮件的原因有很多。最容易解决的最常见的方法称为 Forward Confirm(s) Reverse DNS。

这基本上意味着您从 mywebsite.com 发送的邮件服务器的 DNS 查找解析为 IP：1.2.3.4。

如果在 ARPA `in-addr.arpa`(IPv4) 查找中，您解析的 IP 1.2.3.4 解析为 mywebsite.com，那么您已经通过了这个最基本的步骤。如果您还没有这样做，您可能已经将您的邮件服务器列入黑名单，因此请检查网络上可用的各种搜索引擎和工具。

这是一个检查工具：

[http://multirbl.valli.org/](http://multirbl.valli.org/)

# ssrs-2008 - SSMS 2008R2 SSRS - 权限不足

> ID：10125764
> 
> 赞同：2
> 
> 时间：2012-04-12T14:32:44.643
> 
> 标签：ssrs-2008, ssms, reporting-services

我有 SSMS R2 标准版，我正在使用它附带的 SQL Server 商业智能开发工作室。我有 Windows 7 专业版。我正在阅读Brian Larson 的*Microsoft SQL Server 2008 Reporting Services*并已阅读第 10 章关于使用报表设计器部署报表的内容。

我不确定我面临的问题是否是因为我使用的是 SSMS R2。

指示

在一组说明中，它告诉您如何使用报表设计器部署报表。

右键单击第 9 章属性...

> 为 TargetDataSourceFolder 和 TargetReportFolder 键入 Galactic Delivery Services/Chapter 09。这是将要部署报告的文件夹。

我的 TargetURL 是`http://**/ReportServer`. 因此，当我在解决方案资源管理器中右键单击 Chapter09 项目条目并选择部署时，我收到以下错误

> 错误 1 ​​授予用户“ *** *”的权限不足以执行此操作。

供参考

数据源属性数据源=**；初始目录=银河

授予许可的程序是什么？

我曾尝试使用以下参考资料，但它们没有帮助......

*   [http://www.soheib.com/technical-knowledge/sql-server-2012-reporting-services-uac-user-access-control/](http://www.soheib.com/technical-knowledge/sql-server-2012-reporting-services-uac-user-access-control/)
*   [http://thecodeattic.wordpress.com/category/ssrs/](http://thecodeattic.wordpress.com/category/ssrs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:45:37.003

如果您启用了 UAC，请尝试使用管理员权限运行 BIDS。（右键单击 Visual Studio 图标并选择“以管理员身份运行”）

您是否能够毫无问题地访问报告管理器 (http://server/reports/)？那么[http://server/reportserver/](http://server/reportserver/)呢？

# android - 使用 PhoneGap 使用客户端证书进行身份验证

> ID：10125770
> 
> 赞同：4
> 
> 时间：2012-04-12T14:33:05.187
> 
> 标签：android, security, authentication, cordova, certificate

有没有人使用客户端证书进行身份验证和 PhoneGap 的经验？我有一个受客户端证书保护的 Web 应用程序，现在我想使用 PhoneGap 访问这个 Web 应用程序。Web 应用程序拒绝我的请求，因为找不到证书，它无法对我进行身份验证。我通过 Android 的默认浏览器下载了数据格式为 PKCS#12 的客户端证书，但我现在只存储在浏览器密钥库中，而不是 Android 的全局密钥库或类似的东西。所以总结一下：

1.) 是否可以在 Android 上使用客户端证书进行身份验证？2.) 如果是，PhoneGap 也可以吗？3.）如果再次是，我该如何完成？

谢谢！

问候， 拉尔夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:30:57.330

迟到总比没有好：android 4+ 的问题（至少在 SDK 16 之前）是 webview 拒绝使用 SDK 隐藏的 onReceivedClientCertRequest 的客户端证书身份验证，它不能被覆盖。

这可以通过在 android.jar 中包含隐藏类来绕过（参见[https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)）然后编译cordova（来自[https://github.com/apache/incubator-cordova-android](https://github.com/apache/incubator-cordova-android)）覆盖 CordovaWebViewClient::onReceivedClientCertRequest。

我这样做是为了使 init 上的应用程序加载私钥和证书链（用户仅在第一个应用程序执行时从钥匙串中选择它）。这应该在另一个线程中完成；我怀疑这是不支持客户端证书身份验证的原因，因为主线程会等待用户选择要使用的证书和/或要加载的证书链，这是不可接受的。

编辑： *这是短暂的：似乎在 Android 4.2（SDK 17）中删除了 onReceivedClientCertRequest*

结论太快了：他们只是将功能移至 WebViewClientClassicExt 类，因此您只需要从中扩展 CordovaWebViewClient 而不是 WebViewClient，它也适用于 4.2。

# html - 额外的镀铬边框使用圆角的项目我在 Chrome 中有一个问题，当我在选择菜单框上使用圆角时有“两个”边框（见下文，顶部是输入框，底部是选择框）输入，选择 { 边框： 2px 实心#ced6e9; -moz-边界半径：8px；边框半径：8px；我尝试了其他两种方法，但它们不起作用：Chrome 中的圆角不起作用并设置 -webkit-appearance: none; 但这会删除指示它是选择框的小按钮 编辑 我正在使用带有 Chrome v18 的 Windows 7（服务包 1） 请参阅此

> ID：10125771
> 
> 赞同：7
> 
> 时间：2012-04-12T14:33:13.600
> 
> 标签：html, google-chrome, css, rounded-corners

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T15:26:28.683

Had this problem before and all I did was remove the border on the select and wrap it in a div with the same style (rounded borders). I'm sure there's a more elegant solution but it was better than searching for hours/days for a solution.

Check out this [fiddle](http://jsfiddle.net/8ks5t/).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T14:56:21.967

您使用的是什么版本的 Windows？有时，操作系统会在某些 HTML 元素上强制添加额外的图形怪癖。在启用了 Aero 主题的 Windows 7 上的 Chrome 18 中，一切似乎都如愿以偿。实际上，我昨天回答了一个类似的问题，用样式`select`元素替换丢失的图形元素的示例`-webkit-appearance: none`：[https](https://stackoverflow.com/a/10074928/1030243) ://stackoverflow.com/a/10074928/1030243 。希望如果没有找到其他解决方案，您可以使用几行额外的 CSS 来实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:41:15.380

将 CSS 大纲属性设置为无以进行下拉...

```
select:focus  
{  
    outline: none;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T14:04:57.430

我会推荐使用填充而不是边距...看起来会更好

```
select {        
  -moz-border-radius:8px; 
  border-radius: 8px;
  -webkit-border-radius: 5px; /*this one is more important than the moz one*/
  padding:9px;
} 
```

# uml - 如何针对元模型验证对象图（又名“实例图”）？

> ID：10125776
> 
> 赞同：1
> 
> 时间：2012-04-12T14:33:37.563
> 
> 标签：uml, eclipse-emf, metamodel, object-diagram

我必须开发一个将元模型（类图）和他的实例（对象图）作为输入的 API，但我不知道如何以编程方式进行操作。

我做了一些研究，发现我可以使用 EMF API，但我不确定如何去做以及如何在验证之前插入我的图表。

我是初学者，迷失在互联网上的所有文档之间，如果我的主题不清楚，请原谅

我只需要一些方向，建议了解我必须做什么。

**编辑：主题是针对他使用**[Magic Draw](http://www.nomagic.com/products/magicdraw.html)创建的元模型验证实例。所以我必须导出文件（ecore？XMI？我不知道谁是最好的）然后创建一个解析这两个文件的Java API（我还需要弄清楚如何注入/导入它们）并返回一个布尔值关于验证。这是第一步，之后我想我会添加 OCL 约束来验证实例，但现在我需要专注于简单的验证。如果需要，我如何使用 EMF 或其他工具来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:05:09.540

您的问题可以从两个层面回答：概念和实施。我不确定您要寻求哪方面的帮助，因此我将尝试涵盖两者。如果其中任何一个是多余的，请道歉（希望两者都不是！）。

首先：对于您给出的示例，将类图称为“模型”并将对象图称为该模型的实例会更正常。严格来说，“元模型”用于描述依次具有实例的模型。我会在下面坚持你的术语，但可能值得注意。

**概念层面**

通过“概念”，我的意思是回答“根据元模型验证模型意味着什么”这个问题？

答案很简单。元模型是一个模式或一组规则，用于定义构成有效模型的内容。xml 提供了一个很好的例子。xml 模式定义了某些主题的结构和规则：允许哪些类型，它们可以具有哪些属性，一个属性是否可以具有多个值，一个属性可以包含的可能值的集合。等等。当且仅当它不违反架构中定义的任何规则时，xml 文档才符合架构。

推广到模型：当且仅当模型不违反元模型中定义的任何规则时，模型才符合其元模型。

**实施级别**

您没有详细说明“API”将用于什么。可能您最简单的解决方案就是使用 xml：元模型就是 xml 模式，而模型是符合这些模式的 xml 文档。然后，您的“实现”将只涉及选择众多验证 xml 解析器库之一并从您的客户端代码中调用它。

但是您提到 EMF，所以也许您需要使用它。为简化起见，假设我们要定义一个元模型，如下所示：

```
Class Dog {
  name: String
  gender: String
  owner: Person
}

Class Person {
  name: String
  address: Address
  dogs: Set<Dog>
} 
```

EMF 提供了一个 API—— [eCore API——](http://download.eclipse.org/modeling/emf/emf/javadoc/2.7.0/org/eclipse/emf/ecore/doc-files/EcoreHierarchy.gif)来定义这些东西。可以把它想象成 java 的反射 API。您可以通过创建 eCore API 的实例（以编程方式或通过其中一个编辑器）来定义元模型。所以你会创建：

*   两个实例`EClass`（一个用于人，一个用于狗）
*   六个实例`EAttribute`（每个属性一个）
*   一个`EReference`for Class.owner 和一个 for Person.dogs 的`EReferences`集合

等等。eCore API 还提供了使用 API 创建模型实例的能力。（如果需要，它还会为您自动生成一个编辑器，以便在 Eclipse GUI 中创建实例）。您还可以阅读各种具体语法的模型实例。如果您正在阅读的模型不符合元模型，EMF 将引发异常。

对不起，如果这有点长。[如果需要，这里](http://www.ibm.com/developerworks/library/os-eclipse-dynamicemf/)有一篇很好的文章会更详细地介绍一个示例。

**编辑**

对修改后的问题的补充：

> 主题是根据他使用 Magic Draw 创建的元模型验证实例。

好的。我对 MagicDraw 的导出功能了解不多，但如果它可以导出 ecore，那么这应该是一个不错的起点：

*   将类图（“元模型”）导出为 ecore 并加载到 EMF 中以创建模型。这应该很简单。
*   同样将对象图导出为 ecore 并加载，让 EMF 在加载时验证。如果您需要添加进一步的验证，@Charles 的帖子提供了指向 EMF 验证框架的良好链接。

如果您有很多工作要做，那么可能值得投资[EMF 书](http://www.amazon.co.uk/EMF-Eclipse-Modeling-Framework-Addison-Wesley/dp/0321331885/ref=sr_1_1?ie=UTF8&qid=1334353597&sr=8-1)。它不是最容易访问的，但它确实提供了对 EMF 各种元素的良好覆盖。

hth。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:16:03.457

如果您使用 ECore 定义了元模型，EMF 将生成用于创建已定义 EClass 的实例（模型）的 java API。因此，根据定义，您的模型将符合其元模型。

如果您的模型是由另一个应用程序创建的，并且您想根据单独创建的元模型对其进行验证，首先您可以尝试使用 EMF 从您的元模型生成的编辑器打开您的模型。如果它不合规，您将遇到一些错误，这对于第一次尝试可能就足够了。如果我没记错的话，这也是一个默认验证器，您可以通过右键单击生成的编辑器并选择“验证”来运行它。

EMF 提供了另一种解决方案：EMF Validation Framework。该框架将允许您定义将针对您的实例进行验证的约束。

```
public class MyConstraint extends AbstractModelConstraint{
   @Override
   public IStatus validate(IValidationContext ctx) {
      try{
         //Get the object that will be validated
         Object obj = ctx.getTarget();
         //Here you can run you validation
         //Create Validation Status
         return validationStatus
      } catch (Exception e) {
         return ctx.createFailureStatus(e);
      }
   }
} 
```

有关更多信息，您可以查看本教程：[http ://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.emf.validation.doc%2Ftutorials%2FvalidationTutorial.html](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.emf.validation.doc%2Ftutorials%2FvalidationTutorial.html)

我很确定您可以在元模型上定义 OCL 约束，但这是另一个项目的一部分。看看这个：[http](http://www.eclipse.org/modeling/mdt/?project=ocl#ocl) ://www.eclipse.org/modeling/mdt/?project=ocl#ocl 我从来没有用过它，所以我不能帮你。对不起。

我希望它有所帮助。

查尔斯

# ruby - 使用 Ruby On Rails 拍摄 html 页面的快照

> ID：10125777
> 
> 赞同：2
> 
> 时间：2012-04-12T14:33:41.040
> 
> 标签：ruby, ruby-on-rails-3, heroku

我正在做一个 RoR 项目，该项目有一个包含很多链接图像的表格。这些图像是链接页面的快照。链接的页面每天更改几次，因此必须经常更新。

关于我如何实现这一目标的任何想法？

我认为我可以有一个生成快照的过程，但将来应该将它上传到 Heroku。我更喜欢与我的解决方案集成的解决方案（即 rake 任务）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:49:05.353

您可以使用[IMGKit](https://github.com/csquared/IMGKit)生成图像，然后使用 ImageMagick 或其他东西来调整图像大小

# objective-c - 撤消 [UIGestureRecognizer* requireGestureRecognizerToFail]

> ID：10125778
> 
> 赞同：7
> 
> 时间：2012-04-12T14:33:45.630
> 
> 标签：objective-c, ios, cocoa-touch, memory-management, uigesturerecognizer

有没有办法撤消requireGestureRecognizerToFail。

我像这样使用 requireGestureRecognizerToFail 在两个 UIGestureRecognizers 之间建立了依赖关系。

```
UITapGestureRecognizer* tgr1 = [UITapGestureRecognizer alloc] initWithTarget ...];
UITapGestureRecognizer* tgr2 = [UITapGestureRecognizer alloc] initWithTarget ...];
[tgr1 requireGestureRecognizerToFail: tgr2];
... 
// later in the code
[tgr2 release]; 
```

如何使用 tgr1 注销 tgr2？tgr2 是否实际发布或 tgr1 现在有参考？如果不是，释放 tgr2 会导致问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:46:33.733

你的问题：

**如何使用 tgr1 注销 tgr2？**

你有很多选择。

1.  您可以将其从视图中移除。
2.  您可以禁用 tgr2。
3.  为了保持这两个识别，你需要创建一个新的识别器，它需要失败并添加它，我不知道如何只删除它们之间的依赖关系，也不知道是否有办法。

**tgr2 是否实际发布或 tgr1 现在有参考？**

当您使用 tgr2 添加到 tgr1 requireGestureRecognizerToFail 时，tgr2 不会增加保留计数。

**如果不是，释放 tgr2 会导致问题吗？**

不，它不会引起问题，只是 tgr2 总是会失败，它会调用 tgr1

# xcode - 如何将视图与窗口的左上角对齐？

> ID：10125782
> 
> 赞同：5
> 
> 时间：2012-04-12T14:33:58.040
> 
> 标签：xcode, cocoa, xcode4, xcode4.3, autolayout

当我在窗口的左上角放置一个按钮时，它会完全按照我的预期对齐：

[http://stuf.ro/Button.png](http://stuf.ro/Button.png)

它也不会随着窗口一起调整大小，这很好。但是，如果我尝试对自定义视图做同样的事情，它会自动在底部和右侧添加约束，这会使视图与窗口一起调整大小：

[http://stuf.ro/View.png](http://stuf.ro/View.png)

我该如何摆脱这些？我希望视图永远不会调整大小，并且我希望它被固定在窗口的左上角，就像一个按钮一样。

如果我尝试选择约束并按 Backspace 键，则没有任何反应。编辑菜单中的“删除”选项也被禁用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T16:21:52.163

您的视图会调整大小，因为它具有约束条件，即其上方、下方、左侧和右侧的空间应该是固定的。这些是您可以在屏幕截图中的视图周围看到的线条。当窗口调整大小时，满足这些约束的唯一方法是调整视图大小。

您可以选择约束线来修改或删除它们。您可能认为您可以删除下方和右侧的视图，您的视图将不再需要调整大小以满足剩余的约束，但这不起作用。视图需要一个（一组）约束来指定大小和间距：在任何一侧都有（自动创建的）间距约束意味着大小，但如果你去掉其中一个，将不再指定大小。（这就是为什么你不能摆脱自动创建的约束——这些约束在视图中显示为窄蓝线，在文档大纲中显示为紫色图标。）

这对按钮来说不是问题，因为按钮知道如何调整自己的大小，而 IB 知道按钮如何调整自己的大小。IB 不知道您的自定义视图，因此您必须自己设置约束。选择视图后，选择 Editor > Pin > Width 以创建宽度约束。这既创建了宽度约束，又将现有的间距约束转换为用户约束（与自动约束相反）——它们显示为实线并在文档轮廓中具有蓝色图标。

*现在*您可以选择右侧的间距约束并将其删除，您的视图将保持其宽度并粘在左侧。重复下面的高度和空间，您的视图将保持在左上角并且不会调整大小。

[您可以在 Apple 的指南](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)中阅读有关新的自动布局系统的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:45:21.043

选择您的视图。转到“文件检查器”并禁用“使用自动布局”。D

# json - 关系数据库的 JSON 数据类型

> ID：10125783
> 
> 赞同：1
> 
> 时间：2012-04-12T14:34:01.380
> 
> 标签：json, nosql, relational-database, sqldatatypes

关系数据库可以将 JSON 作为数据类型吗？或者关系数据是否需要有这样的数据类型。我知道将此类数据存储在 MongoDB 或 Redis 等 NoSQL 中更有意义。但是假设如果有一个小数据要存储为 JSON 并在关系数据库上下文中快速使用它。

示例：我想存储一些配置。将来这些配置的名称：值对可能会继续增加，我不想继续添加列。我可以使用一些分隔符以文本格式存储，或者只是喜欢使用 JSON 并将其作为字符串放入数据库中。（这就是为什么我想知道关系数据库本身是否可以具有 JSON 类型，而我不必费心解析和存储）。

有些人还可能争辩说我的数据模型不是 100% 正确的，这就是为什么我有这样的要求，这也是正确的。但我仍然觉得关系数据库可能有 JSON 类型。

你的想法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-01T21:18:56.233

`PostgreSQL`现在有一种`jsonb`数据类型，您可以在其中存储和查询 json。

查询 json 示例：[http ://schinckel.net/2014/05/25/querying-json-in-postgres/](http://schinckel.net/2014/05/25/querying-json-in-postgres/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:34:25.677

如果您想做示例中解释的事情，那么**XML 存储**对您来说更好。

但是，如果数据每天都在增加，那么如果您没有合适的 SQL 数据库平台，那么**nosql 就会出现性能问题。**

因此，您需要使用**Nosql**来满足您的要求**Document Store 或 Ket-Value Pair 数据库**更适合您。

# javascript - 当'Status =（失败）'和'Type = undefined'时Chrome会遇到什么样的网络错误

> ID：10125784
> 
> 赞同：30
> 
> 时间：2012-04-12T14:34:02.927
> 
> 标签：javascript, google-chrome, cross-domain

有时我会随机看到来自 Chrome 的网络请求以 Status = '(failed)' （JavaScript 中请求对象的状态代码 0）和响应类型为 'undefined' 失败。我无法找出原因，我的互联网连接似乎已启动，并且如果从 cURL 请求，服务器上的同一端点工作。

查看请求详细信息不会显示更多响应信息，仅显示请求信息。

我认为它可能缺少 CORS 标头，但我已经验证它们在那里并且无论如何在 CORS 权限问题上 Chrome 将状态报告为“（已取消）”。

有什么想法吗？只是主机无法访问吗？为什么在重新启动浏览器之前，来自 Web 应用程序的所有重试似乎都失败了？

![（失败）在 Chrome 检查器中请求状态文本](../Images/63332a24fc8b165c6fbd036abc2fdcd8.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-05-28T04:52:27.753

我在广告服务网络上工作时遇到了这个问题。它最终成为阻止任何资产的 AdBlock Plus Chrome 扩展程序，可能是路径中的“广告”。我将我的域列入白名单并且它有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T10:41:01.000

当 Content-Length 标头中的大小大于提交的实际内容时，可能会发生这种情况，chrome 认为请求“失败”，因为它无法检索整个文档。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-31T18:26:01.223

我开始在 SSL 证书错误的网页上看到这些错误。我已经允许浏览器继续访问该页面，但过了一段时间，对服务器的 AJAX 请求将开始失败。要解决此问题，我必须刷新页面才能返回警告消息，以便我可以再次接受它并停止阻止我的 AJAX 请求。

不幸的是，就我而言，我还没有找到 Chrome 忘记我想要访问该域的原因。中有`Remember decisions to proceed through SSL errors for a specified length of time`设置`chrome://flags`，但似乎没有影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T20:45:35.410

我在 ASP.NET IHttpHandler 中遇到了这个问题，因为我调用 `context.Response.Close()`的是`context.Response.End()`. 没有完全正确地关闭 HTTP 连接。除了 Chrome 之外，它在任何浏览器中都没有引起问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-23T20:27:59.110

我们在应用程序到达我们控制的 API 时遇到了这个问题。我花了一段时间才意识到速度较慢的客户端没有看到问题，而速度较快的客户端（以及具有更多请求的页面）却看到了问题。

事实证明，我们的 HA 代理在我们的前端限制了请求的速率。一旦我们将限制从我们设置的 20 值提高到 100 左右，我们就不再有问题了。

因此，您可能会被请求路径中的某些东西阻止，可能是代理或负载平衡器，甚至是防火墙。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-20T08:17:19.240

当我的 isp 阻止 cdn 时，我收到此错误。冲洗 dns 对我有用。请参阅[此](https://superuser.com/a/1553417/708839)以获取操作方法。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-04-11T01:34:54.417

就我而言，我有一台三星笔记本电脑，我取消了**三星支持服务**，清除了 Chrome 的缓存及其工作。

# ios - 了解在 Core Data 中添加/更新关系对象

> ID：10125787
> 
> 赞同：0
> 
> 时间：2012-04-12T14:34:14.880
> 
> 标签：ios, core-data, entity, nsmanagedobjectcontext

例如，我有两个名为`Class`和的实体`Student`。两个实体通过一对多关系连接，“Class”有一个 ClassID 字段，Student 有一个 ClassID 和 StudentID 字段。

我对这种情况有几个问题：

1.  当我在 Class 和 Student 之间定义 Connection 时，它们是通过 ClassID 连接的，还是 Core Data 以某种方式创建了自己的连接？
2.  在保存了一个 Class 实体之后，假设我想向它添加一个 Student。我可以添加一个具有该 ClassID 的新学生，还是我必须获取 Class 对象，将一个学生添加到其 .students NSSet 对象，然后将其保存回 Core Data ？
3.  如果后一个选项是唯一的选项，我将如何继续更新 Core Data 中的记录？Fetch 使用 NSFetchRequest，更改它，而不仅仅是再次保存托管对象上下文？

很抱歉有很多问题，我非常感谢您对此提供的任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:53:59.350

1.  就核心数据而言，您的 ClassID 只是用户数据。它不参与关系。

2.  第二种选择。Core Data 持久化对象及其关系，因此策略是更新对象然后保存它们。

3.  是的，尽管应用程序通常已经加载了相关记录，以便让用户指示他们想要的连接。

将您的班级称为“班级”会令人困惑。:-)

# php - PHP没有正确更新选择框

> ID：10125791
> 
> 赞同：0
> 
> 时间：2012-04-12T14:34:28.967
> 
> 标签：php

这是另一个。同一天两次。我正在尝试设置 4 个选择框，如果它们等于 enSlot 的值，则显示基于 Target1-4 中的值选择的选项。

```
echo "<select id='target".$row['paSlot']."' size='1' style='width:90px;'>";
$query = "SELECT * FROM enemy WHERE enChar = ".$_SESSION['chNum']." ORDER BY enSlot";
$result1 = mysql_query($query, $_SESSION['connect']) or die('Error 150: '.mysql_error());
while ($row1 = mysql_fetch_array($result1)) {
    $s = "";
    if ($_GET['Target1'] == $row1['enSlot']) {
            $s = "selected='selected'";
    }
    if ($_GET['Target2'] == $row1['enSlot']) {
            $s = "selected='selected'";
    }
    if ($_GET['Target3'] == $row1['enSlot']) {
            $s = "selected='selected'";
    }
    if ($_GET['Target4'] == $row1['enSlot']) {
            $s = "selected='selected'";
    }
    echo "<option value=".$row1['enSlot']." ".$s.">".$row1['enSlot'].". ".$row1['enRace'];
}
echo "</select>"; 
```

我用这个运行它：

Target1 = 1, Target2 = 2, Target3 = 3, Target4 = 4 敌人有 4 条记录，enSlot = 1 - 4

当它执行时，我得到所有 4 个选择框显示 Target4 的最后一个值被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:37:29.683

```
echo "<option value=".$row1['enSlot']." ".$s.">".$row1['enSlot'].". ".$row1['enRace']; 
```

我看到不见了`</option>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:06:36.970

问题出在您的逻辑中，无论哪种条件评估 $s 的值总是会被​​选中=选中...您可以试试这个：

```
while ($row1 = mysql_fetch_array($result1)) {
    foreach( $_GET[] as $target ) {
        if( $target == $row1['enSlot'] ) {
            echo "<option value=".$row1['enSlot']." selected=selected>".$row1['enSlot'].". ".$row1['enRace']."</option>";
        } else {
            echo "<option value=".$row1['enSlot'].">".$row1['enSlot'].". ".$row1['enRace']."</option>";

        }
    }
} 
```

# php - 在分段的 UITableView 中显示 JSON 响应数据

> ID：10125798
> 
> 赞同：0
> 
> 时间：2012-04-12T14:34:45.563
> 
> 标签：php, iphone, objective-c, json, uitableview

我想在我的 iPhone 上的分段 UItableView 中显示这个 json 响应数据。这些部分应该是客户姓名的第一个字母。

这里是[http://mobile.beger.org/getdata.php53?object=customer&mode=all](http://mobile.beger.org/getdata.php53?object=customer&mode=all)

我如何更改我的 mysql_fetch_object？以及如何在我的 Objective-C 代码中实现它？

```
$rs = mysql_query("SELECT LEFT(CUSTOMER_M.s_name1,1) as FirstLetter,CUSTOMER_M.i_customer_m, CUSTOMER_M.s_name1, COALESCE(CUSTOMER_M.s_town,'unbekannt') as s_town FROM `CUSTOMER_M` WHERE CUSTOMER_M.I_CUSTOMER_M > 0 ORDER BY CUSTOMER_M.S_NAME1");

while($obj = mysql_fetch_object($rs)) {

   $arr[] = $obj;
   }

echo '{"customer":'.json_encode($arr).'}'; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:55:32.613

1.  将[UITableViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITableViewController_Class/Reference/Reference.html)添加到您的 UI，实现[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)和[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)协议。
2.  [发出 http 请求。](https://stackoverflow.com/questions/319463/can-i-make-post-or-get-requests-from-an-iphone-application#322573)获取数据。
3.  解析 JSON。 [这是一个很好的，广泛使用的框架](https://github.com/stig/json-framework)。

**编辑**

支持部分的一种常见方法是让数据源保存一个集合的集合。比如说，对于 json 客户，一个由 26 个数组组成的数组，其中内部数组是客户名称中包含相应的第一个字母。您可以通过这种方式提供 json，或者让设备接收一个平面数组并在数据到达时进行索引。

# iphone - 是否可以使用蓝牙将高清视频从一台 iOS 设备流式传输到另一台设备？

> ID：10125799
> 
> 赞同：0
> 
> 时间：2012-04-12T14:34:50.260
> 
> 标签：iphone, ios, video, bluetooth, video-streaming

蓝牙是否足够快，可以通过无线方式将实时高清视频直接从一台设备传输到另一台设备？有没有关于这个主题的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:42:51.837

我相信蓝牙 3.0 + HS（高速）及更高版本是有能力的，但这并不是严格使用蓝牙链接来传输高速数据本身——它使用了 802.11 链接。

[http://en.wikipedia.org/wiki/Bluetooth#Bluetooth_v3.0_.2B_HS](http://en.wikipedia.org/wiki/Bluetooth#Bluetooth_v3.0_.2B_HS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:42:11.653

也许[这](http://www.comp.nus.edu.sg/~cs5248/0304S1/surveys/wang-bluetooth.pdf)会让你感兴趣。

另一方面，我真的不知道苹果是否让你这样做。

# apache - 使用 s3fs 在 ubuntu 上访问挂载的 S3 - 使用 apache

> ID：10125800
> 
> 赞同：1
> 
> 时间：2012-04-12T14:34:51.273
> 
> 标签：apache, amazon-s3, http-status-code-403, s3fs

我已经使用 s3fs 在 ubuntu 上安装了 s3 存储桶。我需要做的就是使用 apache 访问这个存储桶（它有我的媒体文件）。我确实设置`DocumentRoot`了`/etc/apache2/sites-available`S3 路径，但是当我访问`http://ubuntu_domain_name:80/BUCKET`它时显示 403。我确实在 S3 中创建了存储桶，但它仍然显示 403。（其中 ubuntu 是一个 EC2 实例）。

然后我将文档根指向其他目录，并创建了指向存储桶的符号链接，但我仍然看到 403 错误。

我想要的是，通过 ubuntu ec2 上的 apache 访问带有媒体文件的 S3 存储桶。

谁能指出我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:31:23.580

挂载桶时设置默认acl会很方便...

```
/usr/bin/s3fs my-bucket /mnt/my-bucket -odefault_acl=public-read 
```

配置 fstab 时也很重要......

我在 codeabode 上写了一篇关于它的博客[：s3fs 和 ubuntu](http://thecodeabode.blogspot.com.au/2012/11/s3fs-mounting-s3-on-ec2-instance.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-17T02:05:02.657

您还可以在 s3 连接字符串中指定 uid 和 gid，即

;uid=5

# windows - 有没有办法在安装后立即在 Windows 7 上以管理员权限运行 AIR 应用程序？

> ID：10125802
> 
> 赞同：1
> 
> 时间：2012-04-12T14:35:12.753
> 
> 标签：windows, air, admin

我有一个 AIR 应用程序。它适用于 Windows XP，但在 Windows 7 上，它只有在我授予它管理员权限时才有效。我不介意这样做，但是我该如何设置它，以便在安装后运行应用程序 - 它本身会要求管理员权限？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-12T16:43:31.190

尝试在应用描述符文件中启用“extendedDesktop”配置文件。

[http://help.adobe.com/en_US/air/build/WS144092a96ffef7cc16ddeea2126bb46b82f-8000.html](http://help.adobe.com/en_US/air/build/WS144092a96ffef7cc16ddeea2126bb46b82f-8000.html)

# css - 列表项不会对齐/继承 img/div 大小

> ID：10125803
> 
> 赞同：0
> 
> 时间：2012-04-12T14:35:13.753
> 
> 标签：css, alignment, css-position

我正在尝试创建一个直接位于图像下方的文本列表。图像是通过 CMS 加载的，可以是任意大小。所以我想不出一种使用固定尺寸的方法。

这有意义吗？

这是我的代码：
目前它们（列表项）与放置 ul 的 div 的最左侧对齐。

**css**

```
.maincontent h5 {
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:14px;
    font-weight:600;
    text-decoration:none;
    text-indent:2px;
    text-align:left;
    line-height:0px;
}
.maincontent img {
    max-width:900px;
    text-align:center;
    display: block; 
margin-left: auto; 
margin-right: auto;
}
.maincontent a {
    text-decoration:none;
}
.maincontent a:hover {
}
.maincontent ul {
    display:block;
    list-style-type:none;
    list-style:none;
    z-index:5;
    padding:0px;
}

.maincontent ul li {
    display:block;
    text-align:left;
    list-style-type:none;
    list-style:none;
} 
```

**html**

```
 <div style="display:block; margin-left:auto; margin-right:auto;"><ul>

    <li>
    <img src="/americanmedium1/files/9913/3401/0984/AM-LOGO.jpg" width="300" height="111"    alt="" />
    </li>

    <li><h5>testes</h5></li>

    <li><h5>setsete</h5></li>

    <li><h5>setes</h5></li>

    <li><h5>estes</h5></li>

    <li><h5>estes</h5></li>

    <li><h5>setes</h5></li>

</ul></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:12:24.703

您的问题是您将 UL 设置为将`display: block;`其推至其所在容器的 100% 宽度。如果它所在的容器比图像宽，则列表将显示为关闭。我试图用你的代码来[模拟一些东西，](http://jsfiddle.net/rlemon/DSMbS/)但很明显我们缺少一些 HTML。尝试设置 UL 宽度，或将其设置为 'inline-block'

# python - Python 计算，使用元组、列表。蟒蛇 2.7

> ID：10125805
> 
> 赞同：1
> 
> 时间：2012-04-12T14:35:20.010
> 
> 标签：python, list, tuples, multiplication

好的，开始吧。我有一个包含用户的元组列表，然后是他们的图书评级列表作为第二项。例如：

```
[('Ben', [5, 0, 0, 0, 0, 0, 0, 1, 0, 1, -3, 5, 0, 0, 0, 5, 5, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 0, 1, 0, -5, 0, 0, 5, 5, 0, 5, 5, 5, 0, 5, 5, 0, 0, 0, 5, 5, 5, 5, -5]),
('Moose', [5, 5, 0, 0, 0, 0, 3, 0, 0, 1, 0, 5, 3, 0, 5, 0, 3, 3, 5, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 3, 5, 0, 0, 0, 0, 0, 5, -3, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 5, 5, 0, 3, 0, 0])] 
```

这只是列表中的前两件事。好的，所以他们总共有 86 个用户和他们在列表中的评分。我需要弄清楚如何能够将 Ben 的所有评分乘以 Mooses 的所有评分，然后将它们加在一起。例如，Ben 的第一个评分是 5，Moose 的第一个评分是 5，所以我做 5x5，然后将其添加到相似度得分列表中。我的问题是我不知道如何将评分列表的所有元素乘以输入用户的评分列表。所以我基本上需要提示输入用户名，然后将所有其他用户的评分乘以所选用户并输出最高相似度分数。感谢任何帮助，因为我陷入了困境，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:37:57.827

您可以使用 NumPy，但纯 Python 解决方案也很简单：

```
d = dict(my_list)
sum(map(operator.mul, d["Ben"], d["Moose"])) 
```

第一行与问题无关——它只是将您的元组列表转换为更合适的字典。

要获得完整的相似性矩阵，您可以使用

```
{name1: {name2: sum(map(operator.mul, d[name1], d[name2])) for name2 in d}
         for name1 in d} 
```

（后面的代码片段仅适用于 Python 2.7 或 3.x。）

# c# - 发布 Lync 2010 用户状态未显示在用户 lync 客户端上

> ID：10125808
> 
> 赞同：1
> 
> 时间：2012-04-12T14:35:29.967
> 
> 标签：c#, lync-2010, ucma, user-presence

在受信任的应用程序端点中，我必须根据外部存在提供者发布用户状态，我可以这样做（稍后在外部源变为“空闲”时清除它们是一个不同的问题）

但问题是，如果我为用户 A 发布新状态，这不会反映在用户拥有的 Lync 客户端上，尽管其他人都会收到更新。

目前，我正在使用这段代码进行发布：

```
 user.Endpoint.LocalOwnerPresence.BeginPublishPresence(
        user.categories,
        arBeginPublishPresence =>
        {
            try
            {
                user.Endpoint.PresenceServices.EndUpdatePresenceState(arBeginPublishPresence);
                logger.log("Published presence for {0} with state {1}.", user.SipUserUri, newState.Availability);
            }
            catch (RealTimeException ex)
            {
                logger.log("Failed publishing presence for {0}. {1}", user.SipUserUri, ex);
            }
        },
        null); 
```

其中 user.categories 是：

```
 PresenceCategoryWithMetaData stateWithMetaDataForPersonal = new PresenceCategoryWithMetaData(++instanceId, 400, newState);
            PresenceCategoryWithMetaData stateWithMetaDataForWorkgroup = new PresenceCategoryWithMetaData(instanceId, 300, newState);
            PresenceCategoryWithMetaData stateWithMetaDataForColleagues = new PresenceCategoryWithMetaData(instanceId, 200, newState);
            PresenceCategoryWithMetaData stateWithMetaDataForExternal = new PresenceCategoryWithMetaData(instanceId, 100, newState);
            PresenceCategoryWithMetaData stateWithMetaDataForAll = new PresenceCategoryWithMetaData(instanceId, 0, newState);
            if (instanceId >= Int64.MaxValue)
            {
                instanceId = 1;
            }

            stateWithMetaDataForPersonal.ExpiryPolicy = expirypolicy;
            stateWithMetaDataForWorkgroup.ExpiryPolicy = expirypolicy;
            stateWithMetaDataForColleagues.ExpiryPolicy = expirypolicy;
            stateWithMetaDataForExternal.ExpiryPolicy = expirypolicy;
            stateWithMetaDataForAll.ExpiryPolicy = expirypolicy;

            stateWithMetaDataForPersonal.Expires = timeout;
            stateWithMetaDataForWorkgroup.Expires = timeout;
            stateWithMetaDataForColleagues.Expires = timeout;
            stateWithMetaDataForExternal.Expires = timeout;
            stateWithMetaDataForAll.Expires = timeout;

            user.categories =
                new List<PresenceCategoryWithMetaData>()
                        {
                            stateWithMetaDataForPersonal,
                            stateWithMetaDataForWorkgroup,
                            stateWithMetaDataForColleagues,
                            stateWithMetaDataForExternal,
                            stateWithMetaDataForAll
                        }; 
```

这些类别正在地毯式轰炸存在状态，我只*知道*我做错了。不可能是这样的……乱七八糟的。

请耐心等待，我是 C#、.NET 和 UCMA 的新手，直到一个月前才接触过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:25:34.297

这对我来说似乎是正确的行为。Lync 将聚合用户登录的所有终结点的状态，以提供单一状态。例如，如果用户在其 PC 上登录 Lync 时将其状态设置为“离开”，并且在其移动客户端上登录到 Lync 时状态设置为“可用”，则所有用户都将看到“可用”的聚合状态 -因为他可以到达端点之一。但是，他的 Lync 客户仍将“离开”。

所以我认为同样的事情正在发生在你身上。您的 UCMA 应用程序只是您从中发布状态的另一个端点。您可能正在发布“可用”的存在，但它是来自 UMCA 应用程序中的端点的存在，因此它不会影响他登录的任何其他端点，例如 Lync 客户端。但是，所有其他用户将看到聚合的在线状态。

这更像是一个有根据的猜测，而不是我用代码证明的任何东西。我已经通过 SDK 进行了侦察，但我看不到任何方法可以“覆盖”另一个端点的存在（实际上，这样做强烈感觉像是错误的行为）。

# c# - 缺少根元素

> ID：10125810
> 
> 赞同：18
> 
> 时间：2012-04-12T14:35:35.003
> 
> 标签：c#, asp.net, xml

我正在从 xxx URl 读取 xml，但由于缺少 Root 元素而出现错误。

我读取 xml 响应的代码如下：

```
 XmlDocument doc = new XmlDocument();
  doc.Load("URL from which i am reading xml");
  XmlNodeList nodes = doc.GetElementsByTagName("Product");
  XmlNode node = null;
  foreach (XmlNode n in nodes)
   {
   } 
```

xml响应如下：

```
<All_Products>
   <Product>
  <ProductCode>GFT</ProductCode>
  <ProductName>Gift Certificate</ProductName>
  <ProductDescriptionShort>Give the perfect gift. </ProductDescriptionShort>
  <ProductDescription>Give the perfect gift.</ProductDescription>
  <ProductNameShort>Gift Certificate</ProductNameShort> 
  <FreeShippingItem>Y</FreeShippingItem>
  <ProductPrice>55.0000</ProductPrice>
  <TaxableProduct>Y</TaxableProduct>
   </Product>    
 </All_Products> 
```

你能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-05-20T10:26:01.920

以防万一其他人从 Google 登陆，我在使用 XDocument.Load(Stream) 方法时被此错误消息所困扰。

```
XDocument xDoc = XDocument.Load(xmlStream); 
```

在尝试加载 Stream 之前，请确保将流位置设置为 0（零），这是一个我总是忽略的简单错误！

```
if (xmlStream.Position > 0)
{
    xmlStream.Position = 0;
}
XDocument xDoc = XDocument.Load(xmlStream); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-12T14:42:37.083

确保您的 XML 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<rootElement>
...
</rootElement> 
```

此外，空白 XML 文件将返回相同的 Root 元素丢失异常。每个 XML 文件必须有一个包含所有其他元素的根元素/节点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T14:44:20.323

嗨，这是一种奇怪的方式，但请尝试一次

1.  将文件内容读入字符串
2.  打印字符串并检查您是否获得了正确的 XML
3.  您可以使用`XMLDocument.LoadXML(xmlstring)`

我尝试使用您的代码和相同的 XML，而不添加任何适用于我的 XML 声明

```
XmlDocument doc = new XmlDocument();
        doc.Load(@"H:\WorkSpace\C#\TestDemos\TestDemos\XMLFile1.xml");
        XmlNodeList nodes = doc.GetElementsByTagName("Product");
        XmlNode node = null;
        foreach (XmlNode n in nodes)
        {
            Console.WriteLine("HI");
        } 
```

正如菲尔在下面的答案中所述，如果 xmlStream 位置不为零，请将其设置为零。

```
if (xmlStream.Position > 0)
{
    xmlStream.Position = 0;
}
XDocument xDoc = XDocument.Load(xmlStream); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T14:42:21.160

[如果您从远程位置加载 XML 文件，我会使用像Fiddler](http://www.fiddler2.com/fiddler2/)这样的嗅探器检查文件是否实际下载正确。

我编写了一个快速控制台应用程序来运行您的代码并解析文件，它对我来说很好用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-15T08:26:04.967

1.  检查位于config文件夹中的trees.config文件......有时（我不知道为什么）这个文件变成空的，就像有人删除里面的内容一样......在你的本地电脑上备份这个文件然后当出现此错误 - 用您的本地文件替换服务器文件。这就是我在发生此错误时所做的。

2.  检查服务器上的可用空间。有时这就是问题所在。

祝你好运。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-07T12:35:31.970

当我尝试读取从存档中提取到内存流的 xml 时，我遇到了同样的问题。

```
 MemoryStream SubSetupStream = new MemoryStream();
        using (ZipFile archive = ZipFile.Read(zipPath))
        {
            archive.Password = "SomePass";
            foreach  (ZipEntry file in archive)
            {
                file.Extract(SubSetupStream);
            }
        } 
```

问题出在以下几行：

```
XmlDocument doc = new XmlDocument();
    doc.Load(SubSetupStream); 
```

解决方案是（感谢@Phil）：

```
 if (SubSetupStream.Position>0)
        {
            SubSetupStream.Position = 0;
        } 
```

# .net - 反序列化 wsdl 肥皂服务 (suds)

> ID：10125812
> 
> 赞同：1
> 
> 时间：2012-04-12T14:35:38.623
> 
> 标签：.net, python, service, wsdl, suds

服务页面显示了这一点。

要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以使用命令行中的 svcutil.exe 工具执行此操作，语法如下：

```
svcutil.exe http://url/?wsdl 
```

这将生成一个配置文件和一个包含客户端类的代码文件。将这两个文件添加到您的客户端应用程序并使用生成的客户端类来调用服务。例如：

**C＃**

```
class Test
{
    static void Main()
    {
        SaeServicesClient client = new SaeServicesClient();

        // Use the 'client' variable to call operations on the service.

        // Always close the client.
        client.Close();
    }
} 
```

**视觉基础**

```
Class Test
    Shared Sub Main()
        Dim client As SaeServicesClient = New SaeServicesClient()
        ' Use the 'client' variable to call operations on the service.

        ' Always close the client.
        client.Close()
    End Sub
End Class 
```

客户的回应。

```
Suds ( https://fedorahosted.org/suds/ )  version: 0.4 GA  build: R699-20100913

Service ( SaeService ) tns="http://tempuri.org/"
Prefixes (3)
   ns0 = "http://schemas.datacontract.org/2004/07/ImproveIT.SAE.Services"
   ns1 = "http://schemas.datacontract.org/2004/07/System"
   ns2 = "http://schemas.microsoft.com/2003/10/Serialization/"
Ports (1):
   (BasicHttpBinding_ISaeServices)
      Methods (8):
         GetCliente(xs:anyType claveCliente, )
         GetPedido(xs:anyType clavePedido, )
         GetPedidos()
         GetPedidosCargadosEnPeriodoTiempo(xs:dateTime fechaInicial, xs:dateTime fechaFinal, )
         GetProducto(xs:anyType claveProducto, )
         GetProductos()
         GetVendedor(xs:anyType claveVendedor, )
         IsAlive()
      Types (18):
         ns0:ArrayOfPedidoDTO
         ns0:ArrayOfProductoDTO
         ns0:ClienteDTO
         ns1:Exception
         ns0:GetClienteResponse
         ns0:GetPedidoResponse
         ns0:GetPedidosResponse
         ns0:GetProductoResponse
         ns0:GetProductosResponse
         ns0:GetVendedorResponse
         ns0:PartidaDTO
         ns0:PedidoDTO
         ns0:ProductoDTO
         ns0:Response
         ns0:VendedorDTO
         ns2:char
         ns2:duration
         ns2:guid 
```

**代码片段**

```
client = suds.client.Client(url)
client.service.GetVendedor(id) 
```

**xml**

```
<wsdl:definitions name="SaeService" targetNamespace="http://tempuri.org/"    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/ soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://192.168.1.200:8450/?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://192.168.1.200:8450/?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
<xsd:import schemaLocation="http://192.168.1.200:8450/?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/ImproveIT.SAE.Services"/>
<xsd:import schemaLocation="http://192.168.1.200:8450/?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/System"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="ISaeServices_IsAlive_InputMessage">
<wsdl:part name="parameters" element="tns:IsAlive"/>
</wsdl:message>
<wsdl:message name="ISaeServices_IsAlive_OutputMessage">
<wsdl:part name="parameters" element="tns:IsAliveResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetProductos_InputMessage">
<wsdl:part name="parameters" element="tns:GetProductos"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetProductos_OutputMessage">
<wsdl:part name="parameters" element="tns:GetProductosResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetProducto_InputMessage">
<wsdl:part name="parameters" element="tns:GetProducto"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetProducto_OutputMessage">
<wsdl:part name="parameters" element="tns:GetProductoResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedidos_InputMessage">
<wsdl:part name="parameters" element="tns:GetPedidos"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedidos_OutputMessage">
<wsdl:part name="parameters" element="tns:GetPedidosResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedidosCargadosEnPeriodoTiempo_InputMessage">
<wsdl:part name="parameters" element="tns:GetPedidosCargadosEnPeriodoTiempo"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedidosCargadosEnPeriodoTiempo_OutputMessage">
<wsdl:part name="parameters" element="tns:GetPedidosCargadosEnPeriodoTiempoResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedido_InputMessage">
<wsdl:part name="parameters" element="tns:GetPedido"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetPedido_OutputMessage">
<wsdl:part name="parameters" element="tns:GetPedidoResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetVendedor_InputMessage">
<wsdl:part name="parameters" element="tns:GetVendedor"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetVendedor_OutputMessage">
<wsdl:part name="parameters" element="tns:GetVendedorResponse"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetCliente_InputMessage">
<wsdl:part name="parameters" element="tns:GetCliente"/>
</wsdl:message>
<wsdl:message name="ISaeServices_GetCliente_OutputMessage">
<wsdl:part name="parameters" element="tns:GetClienteResponse"/>
</wsdl:message>
<wsdl:portType name="ISaeServices">
<wsdl:operation name="IsAlive">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/IsAlive" message="tns:ISaeServices_IsAlive_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/IsAliveResponse" message="tns:ISaeServices_IsAlive_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetProductos">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetProductos" message="tns:ISaeServices_GetProductos_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetProductosResponse" message="tns:ISaeServices_GetProductos_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetProducto">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetProducto" message="tns:ISaeServices_GetProducto_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetProductoResponse" message="tns:ISaeServices_GetProducto_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetPedidos">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetPedidos" message="tns:ISaeServices_GetPedidos_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetPedidosResponse" message="tns:ISaeServices_GetPedidos_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetPedidosCargadosEnPeriodoTiempo">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetPedidosCargadosEnPeriodoTiempo" message="tns:ISaeServices_GetPedidosCargadosEnPeriodoTiempo_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetPedidosCargadosEnPeriodoTiempoResponse" message="tns:ISaeServices_GetPedidosCargadosEnPeriodoTiempo_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetPedido">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetPedido" message="tns:ISaeServices_GetPedido_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetPedidoResponse" message="tns:ISaeServices_GetPedido_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetVendedor">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetVendedor" message="tns:ISaeServices_GetVendedor_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetVendedorResponse" message="tns:ISaeServices_GetVendedor_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetCliente">
<wsdl:input wsaw:Action="http://tempuri.org/ISaeServices/GetCliente" message="tns:ISaeServices_GetCliente_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ISaeServices/GetClienteResponse" message="tns:ISaeServices_GetCliente_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_ISaeServices" type="tns:ISaeServices">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="IsAlive">
<soap:operation soapAction="http://tempuri.org/ISaeServices/IsAlive" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetProductos">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetProductos" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetProducto">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetProducto" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetPedidos">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetPedidos" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetPedidosCargadosEnPeriodoTiempo">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetPedidosCargadosEnPeriodoTiempo" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetPedido">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetPedido" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetVendedor">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetVendedor" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetCliente">
<soap:operation soapAction="http://tempuri.org/ISaeServices/GetCliente" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="SaeService">
<wsdl:port name="BasicHttpBinding_ISaeServices" binding="tns:BasicHttpBinding_ISaeServices">
<soap:address location="http://192.168.1.200:8450/Sae"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

我得到的错误，除了 IsAlive() 之外的所有方法。

suds.WebFault：服务器引发错误：'格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://tempuri.org/:claveProducto](http://tempuri.org/:claveProducto)时出错。[InnerException 消息是“来自命名空间http://tempuri.org/](http://tempuri.org/)的元素 claveProducto不能将子内容反序列化为对象。请使用 XmlNode[] 反序列化这种 XML 模式。

# sql - 检查 2 个 sql 列并在 1 列中显示结果

> ID：10125814
> 
> 赞同：1
> 
> 时间：2012-04-12T14:35:45.093
> 
> 标签：sql, logic, case

好的..我有 2 个表...除了其中一个中的列名之外，它们完全相同，因为它们处理 2 个不同的“公司”，但是..我想要的数据在具有相同名称的列中。漂亮我想做的很多...**如果 tableA.Col2 > 0 或 tableB.Col2 > 0 然后 1**..else 0 ..它们也需要不同...我可以将它们作为单独的表...但我不能将它们放在一起..我需要将它们放在 1 列中，因为它是如何发送到 C3 代码页的以及它是如何读取它的……结构已经预先设置好了……并且在这样的一个存储过程中正在执行大约 5 个其他语句（我也不是设置它的人）。因此，如果这是可能的..请告诉我..如果您想查看真实的代码，我还将粘贴我拥有的确切代码..我只是试图简化它以使其更易于理解。

```
DECLARE @id INT;
DECLARE @invest nvarchar(50);
SET @id = '7633';
SET @invest = '';

SELECT 'a' + CONVERT(nvarchar, orderfindings.risk_rating) AS cat, COUNT(DISTINCT orderfindings.prnt_id) AS stat
        FROM orderheader, orderaudits, orderfindings
        WHERE orderheader.id = orderaudits.orderheader_id AND orderaudits.ID = orderfindings.prnt_id
        AND orderheader.id = @id AND orderfindings.risk_rating > 0 AND orderaudits.Investor_Name LIKE '%' + @invest + '%'
        GROUP BY orderfindings.risk_rating
UNION ALL
SELECT 'a' + CONVERT(nvarchar, orderagencies.risk_rating) AS cat, COUNT(DISTINCT orderagencies.prnt_id) AS stat
        FROM orderheader, orderaudits, orderagencies
        WHERE orderheader.id = orderaudits.orderheader_id AND orderaudits.ID = orderagencies.prnt_id
        AND orderheader.id = @id AND orderagencies.risk_rating > 0 AND orderaudits.Investor_Name LIKE '%' + @invest + '%'
        GROUP BY orderagencies.risk_rating

-------------------
/*
Results from 1st statement
cat | stat
-----------
a1  |  4
-----------
a2  |  5
-----------

Results from 2nd statement
cat | stat
-----------
a1  |  3
-----------
a2  |  2
-----------

I pretty much want

Results from new awesome statement
cat | stat
-----------
a1  |  5
-----------
a2  |  5
-----------
I think those are the numbers that would be accurate
Simple version---    if tableA.Col2 is > 0 or tableB.Col2 is > 0 then 1 else 0
  |Table A                |               Table B                 |    result of query
  |   col_1     col2      |      col_1               col2         |
  --------------------------------------------------------------------
1 |   1           5       |       1                   3           |          1
2 |   1           45      |       1                   0           |          1
3 |   1           0       |       1                   0           |          0  
4 |   1           0       |       1                   3           |          1

so a1 would be 3...4 records in the tables..but only 3 of them matter because row 3 has 0 
whatevers in col 2 for both tables..there might be 100 records that have 1 for col 1..there 
might only be 1 
```

我希望这更有意义......这是一个奇怪的任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:51:41.767

您可以使用另一个级别的子查询将它们包含在摘要结果中，就像您在此处的示例一样。

```
Select cat , SUM(stat) as stat
FROM
(
  YOUR FIRST QUERY
  UNION ALL
  YOUR SECOND SECOND QUERY 
) AS subquery
GROUP BY cat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:13:29.313

尝试这个：

```
DECLARE @id INT;
DECLARE @invest nvarchar(50);
SET @id = '7633';
SET @invest = '';

SELECT  Findings.cat [cat], 
        CASE WHEN Findings.stat > 0 OR Agencies.stat > 0 THEN 1 ELSE 0 END [stat]

FROM (SELECT 'a' + CONVERT(nvarchar, orderfindings.risk_rating) AS cat, COUNT(DISTINCT orderfindings.prnt_id) AS stat
        FROM orderheader, orderaudits, orderfindings
        WHERE orderheader.id = orderaudits.orderheader_id AND orderaudits.ID = orderfindings.prnt_id
        AND orderheader.id = @id AND orderfindings.risk_rating > 0 AND orderaudits.Investor_Name LIKE '%' + @invest + '%'
        GROUP BY orderfindings.risk_rating) Findings
INNER JOIN (SELECT 'a' + CONVERT(nvarchar, orderagencies.risk_rating) AS cat, COUNT(DISTINCT orderagencies.prnt_id) AS stat
        FROM orderheader, orderaudits, orderagencies
        WHERE orderheader.id = orderaudits.orderheader_id AND orderaudits.ID = orderagencies.prnt_id
        AND orderheader.id = @id AND orderagencies.risk_rating > 0 AND orderaudits.Investor_Name LIKE '%' + @invest + '%'
        GROUP BY orderagencies.risk_rating) Agencies

ON Findings.cat = Agencies.cat 
```

# sql - BindingSource.Filter 使用内部联接

> ID：10125818
> 
> 赞同：0
> 
> 时间：2012-04-12T14:35:51.107
> 
> 标签：sql, datagridview, inner-join, bindingsource

我正在使用 BindingSource，我想使用一些 SQL 代码来执行内部联接。我的代码不起作用

```
ticketsBindingSource.Filter = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user WHERE u.CallerName = 'joe.smith' AND t.ProblemStatus = 'Open'"; 
```

但以下确实有效

```
ticketsBindingSource.Filter = "ProblemStatus = 'Open'"; 
```

如何运行我的 InnerJoin 查询并更新我的 datagridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:16:23.993

将`BindingSource.Filter`过滤器应用于已加载到您的`DataGridView`. 因此，如果您显示了帐户，并且您正在寻找一个特定的帐户，那么您将按帐号过滤该数据。

,`Filter`无法为您运行另一个 SQL 查询。

如果您想`INNER JOIN`对该数据执行一次搜索，那么您将需要执行另一次搜索并加载`DataGridView`. 听起来您不想执行过滤器，但您想在同一网格中的数据上显示两个单独的集合。

您的基本流程是：

1.  加载你的 DataGridView
2.  使用选择他们想要的过滤器或记录
3.  使用您的 INNER JOIN 执行第二次搜索
4.  使用新数据重新加载 DataGridView。

编辑这里是一些可能让你开始的代码：

[如何：将数据绑定到 Windows 窗体 DataGridView 控件](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)

```
private void GetData(string selectCommand)
{
    try
    {
        // Specify a connection string. Replace the given value with a 
        // valid connection string for a Northwind SQL Server sample
        // database accessible to your system.
        String connectionString =
            "Integrated Security=SSPI;Persist Security Info=False;" +
            "Initial Catalog=Northwind;Data Source=localhost";

        // Create a new data adapter based on the specified query.
        dataAdapter = new SqlDataAdapter(selectCommand, connectionString);

        // Create a command builder to generate SQL update, insert, and
        // delete commands based on selectCommand. These are used to
        // update the database.
        SqlCommandBuilder commandBuilder = new SqlCommandBuilder(dataAdapter);

        // Populate a new data table and bind it to the BindingSource.
        DataTable table = new DataTable();
        table.Locale = System.Globalization.CultureInfo.InvariantCulture;
        dataAdapter.Fill(table);
        bindingSource1.DataSource = table;

        // Resize the DataGridView columns to fit the newly loaded content.
        dataGridView1.AutoResizeColumns( 
            DataGridViewAutoSizeColumnsMode.AllCellsExceptHeader);
    }
    catch (SqlException)
    {
        MessageBox.Show("To run this example, replace the value of the " +
            "connectionString variable with a connection string that is " +
            "valid for your system.");
    }
}

private void Button1_Click(object sender, EventArgs e)
{
    // Bind the DataGridView to the BindingSource
    // and load the data from the database.
    dataGridView1.DataSource = bindingSource1;
    GetData("select * from Customers");
} 
```

将数据绑定到网格后，您将为用户提供某种过滤方式，但您希望他们再次搜索数据。因此，您将希望在代码中使用某种方式来选择要运行的 SQL。因此，您可以将 SQL 作为您根据用户选择设置的字符串传递给 GetData()

```
private void Button1_Click(object sender, EventArgs e)
{
    // Bind the DataGridView to the BindingSource
    // and load the data from the database.
    dataGridView1.DataSource = bindingSource1;

    string sqlQuery = string.Empty;

    if(your check goes here)
    {
        sqlQuery = "select * from Customers";
    }
    else 
    {
        sqlQuery = "your new SQL";
    }

    GetData(sqlQuery);
} 
```

然后您将根据新查询重新绑定您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:25:05.993

更改数据源。

使用连接创建视图。

将该视图用作数据绑定的数据源。

并在需要时使用过滤器。

请记住，过滤器成为 where 子句的一部分。

# c# - 如何在我的班级中定义有效的 get set 属性

> ID：10125819
> 
> 赞同：2
> 
> 时间：2012-04-12T14:35:52.770
> 
> 标签：c#, asp.net-2.0

我使用 c# 技术在 asp.net 2.0 中创建了我的网站。我在我的管理控制部分中包含了一种新闻信应用程序。当 Add_Code 目录中有我的 JobRunner.cs 类之一时。

实际上我的问题是在新闻信应用程序中开始工作。有关详细信息，我还包括我的文件 cs.code 和 JobRunner.cs 类的完整代码。

*   这是我的 manage_jobs.aspx.cs 编码，用于将 Job Id 设置为 Start Job。

    ```
    protected void lbut_startjob_Click(object sender, EventArgs e)
    {
        int count = 0;
        SetData();
        GV_ViewJobs.AllowPaging = false;
        this.FillGrid();
        ArrayList arr = (ArrayList)ViewState["SelectedRecords"];
        count = arr.Count;
        for (int i = 0; i < GV_ViewJobs.Rows.Count; i++)
        {
            if (arr.Contains(GV_ViewJobs.DataKeys[i].Value))
            {
                StartJob(GV_ViewJobs.DataKeys[i].Value.ToString());
                arr.Remove(GV_ViewJobs.DataKeys[i].Value);
            }
        }
        ViewState["SelectedRecords"] = arr;
        hfCount.Value = "0";
        GV_ViewJobs.AllowPaging = true;
        this.FillGrid();
        ShowMessageRun(count);
    }
    private void StartJob(string JobID)
    {
        int jobId = Convert.ToInt32(JobID);
        if (!JobRunner.IsJobQueuedOrRunning(jobId))
        {
            JobRunner.RunJob(jobId);
        }
    } 
    ```

*   和我的 JobRunner.cs 类（所有编码）

JobRunner.cs ------------------------------------------------------------ ----

```
 using System;
    using System.Data;
    using System.Configuration;
    using System.Web;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Web.UI.WebControls.WebParts;
    using System.Web.UI.HtmlControls;
    using System.Collections.Generic;
    using System.Data.SqlClient;
    using System.Text;
    using System.IO;
    using System.Net.Mail;
    using System.Threading;
    /// <summary>
    /// Summary description for JobRunner
    /// </summary>
    public static class JobRunner
    {
        private static List<JobInfo> ActiveJobs = new List<JobInfo>();
        //public static JobRunner()
        //{
        //    //
        //    // TODO: Add constructor logic here
        //    //
        //}
        public static void RunJob(int jobId)
        {
            lock (ActiveJobs)
            {
                JobInfo jobInfo = FindQueuedOrRunningJob(jobId);

                if (jobInfo != null)
                    return;

                jobInfo = FindExitedJob(jobId);

                if (jobInfo == null)
                {
                    jobInfo = new JobInfo(jobId);
                    ActiveJobs.Add(jobInfo); // Default status is Queued
                }
                else
                {
                    jobInfo.State = JobInfo.JobState.Queued;
                }

                ThreadPool.QueueUserWorkItem(new WaitCallback(StartJob), jobInfo);
            }
        }
        public static bool IsJobQueuedOrRunning(int jobId)
        {
            return FindQueuedOrRunningJob(jobId) != null;
        }
        public static JobInfo FindJob(int jobId)
        {
            JobInfo ji = FindQueuedOrRunningJob(jobId);

            if (ji != null)
                return ji;

            return FindExitedJob(jobId);
        }
        public static JobInfo FindQueuedOrRunningJob(int jobId)
        {
            lock (ActiveJobs)
            {
                for (int i = 0; i < ActiveJobs.Count; i++)
                {
                    JobInfo ji = ActiveJobs[i];
                    if (ji.JobId == jobId && (ji.State == JobInfo.JobState.Queued | ji.State == JobInfo.JobState.Running))
                        return ji;
                }

                return null;
            }
        }
        public static JobInfo FindExitedJob(int jobId)
        {
            lock (ActiveJobs)
            {
                for (int i = 0; i < ActiveJobs.Count; i++)
                {
                    JobInfo ji = ActiveJobs[i];

                    if (ji.JobId == jobId && ji.State == JobInfo.JobState.Exited)
                        return ji;
                }

                return null;
            }
        }
        public static void StartJob(object stateInfo)
        {
            JobInfo jobInfo = (JobInfo)stateInfo;
            int jobId = jobInfo.JobId;
            jobInfo.State = JobInfo.JobState.Running;
            // Email settings
            string fromName = ConfigurationManager.AppSettings["Newsletter_FromName"];
            string fromEmailAddress = ConfigurationManager.AppSettings["Newsletter_FromEmailAddress"];
            SmtpClient client = Util.GetSmtpClient();
            // For logging
            int emailsSentInThisAttempt = 0;
            try
            {
                using (SqlConnection con = Util.GetConnection())
                {
                    con.Open();
                    jobInfo.Log(con, "Connected to database...");
                    // Step 1: Retrieving job information
                    string subject, plainText;
                    DatabaseHelper.GetJobInfo(con, jobInfo.JobId, out subject, out plainText);
                    jobInfo.Log(con, String.Format("Retrieved job #{0} information...", jobId));
                    // Creating a loop to send all emails one-by-one
                    while (true)
                    {
                        // Step 2: Retrieving one email from the list
                        // to whom this email will be sent
                        //int subscriberId;
                        string email;
                        //int validationCode;

                        //DatabaseHelper.PopAllotedEmail(con, jobId, out subscriberId,out email, out validationCode);
                        DatabaseHelper.PopAllotedEmail(con, jobId, out email);
                        if (email == null)
                            break;

                        // Step 3: Sending email
                        try
                        {
                            //SendEmail(fromName, fromEmailAddress, email, subject, plainText, client, subscriberId,validationCode);
                            SendEmail(fromName, fromEmailAddress, email, subject, plainText, client);
                        }
                        catch (Exception ex)
                        {
                            DatabaseHelper.PushAllotedEmail(jobId, email);
                            jobInfo.Log(con,
                        String.Format("Could not send email to: {0}",
                            email));

                            throw ex;
                        }

                        emailsSentInThisAttempt++;
                    }

                    DatabaseHelper.SetJobCompleted(con, jobId, DateTime.Now);
                    jobInfo.Log(con, "Successfully delivered " +
                emailsSentInThisAttempt + " email(s).");
                    jobInfo.Log(con, "Exiting with success!");
                }
            }
            catch (Exception ex)
            {
                jobInfo.Log("Exception: " + ex.Message);
                jobInfo.Log("Exiting with disgrace!");
            }
            finally
            {
                jobInfo.State = JobInfo.JobState.Exited;
            }
        }
        private static void SendEmail(string fromName, string fromEmailAddress, string toEmailAddress, string subject, string plainText, SmtpClient client)
        {
            MailMessage msg = new MailMessage();
            msg.IsBodyHtml = true;
            client.EnableSsl = true;
            if (fromName != null)
                msg.From = new MailAddress(fromName + " <" + fromEmailAddress + ">");
            else
                msg.From = new MailAddress(fromEmailAddress);
            msg.To.Add(new MailAddress(toEmailAddress));
            msg.Subject = subject;
            string pathToApp = ConfigurationManager.AppSettings["Newsletter_PathToApplication"];
            string unsubscribeText = "<br/>\r\n\r\n---------------------------\r\n" +
                                     "To unsubscribe, please click the following link:\r\n" +
                                     pathToApp + "Unsubscribe.aspx";
            msg.Body = plainText + unsubscribeText;
            client.Send(msg);
        }
        public class JobInfo
        {
            public enum JobState { Queued, Running, Exited }
            public int JobId
            {
                get
                {
                    return JobId;
                }
                set
                {
                    JobId = value; // <- Exception occurred here.
                }
            }
            public JobState State
            {
                get
                {
                    return State;
                }
                set
                {
                    State = value;
                }
            }
            public JobInfo(int jobId)
            {
                JobId = jobId;
                State = JobState.Queued;
            }
            public void Log(string message)
            {
                DatabaseHelper.AddLogMessage(JobId, DateTime.Now, message);
            }
            public void Log(SqlConnection con, string message)
            {
                DatabaseHelper.AddLogMessage(con, JobId, DateTime.Now, message);
            }
            public override bool Equals(object obj)
            {
                if (obj is JobInfo)
                {
                    JobInfo otherJobInfo = (JobInfo)obj;
                    if (JobId == otherJobInfo.JobId && State == otherJobInfo.State)
                        return true;
                }
                return false;
            }
        }
    } 
```

例外：

> “System.StackOverflowException 未处理 App_Code.okrls50x.dll 中发生了“System.StackOverflowException”类型的未处理异常”

*   我是否在编译时也收到一条警告消息，例如“'JobRunner.JobInfo' overrides Object.Equals(object o) but doesn't override Object.GetHashCode()”

请帮助我在 JobInfo 方法中获取设置属性有问题吗？....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:41:47.213

这些属性之一导致 StackOverflowException：

```
public int JobId
            {
                get
                {
                    return JobId;
                }
                set
                {
                    JobId = value; 
                }
            }
            public JobState State
            {
                get
                {
                    return State;
                }
                set
                {
                    State = value;
                }
            } 
```

您可以将属性实现为（自动实现）：

```
public int JobId { get; set; } 
```

或者您可以使用支持字段手动实现它：

```
private int _jobId;
public int JobId
{
    get { return _jobId; }
    set { _jobId = value; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:38:38.930

问题是在代码的某个地方你有一个属性

```
JobState State 
{ 
   get { return State; } 
   set { State = value; } //THIS LINE RUNS in STACKOVERFLOW 
} 
```

修复此声明变量 JobState，如下所示：

```
private JobState state;
public JobState State 
{ 
     get { return state; } 
     set { state= value; } 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:42:55.697

```
public JobState State
            {
                get
                {
                    return State;
                }
                set
                {
                    if(value != State)
                    {
                       State = value;
                    }
                }
            } 
```

# ruby-on-rails - rails before_filter 阻止成功保存的创建方法

> ID：10125820
> 
> 赞同：0
> 
> 时间：2012-04-12T14:35:56.810
> 
> 标签：ruby-on-rails, before-filter

所以我制作了一个启动页面，并为每个[帖子](https://stackoverflow.com/questions/3695334/splash-landing-page-for-rails-app)设置了一个重定向。但它搞砸了应用程序。当我得到下面的代码时，该应用程序不会保存用户提交的电子邮件地址。（当我注释掉重定向代码时，一切正常。）

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

   before_filter(:except => :splash) do
     redirect_to root_path
   end

 end 
```

这是控制器。它基于 Railscast #124。所以对于启动页面，没有用户登录，这意味着邀请保存后，它应该保存并闪烁“谢谢，我们准备好时会通知”。但是当上面的过滤器就位时，它只是重新渲染“新”。

```
class InvitationsController < ApplicationController

  def new
    @invitation = Invitation.new
  end

  def create
    @invitation = Invitation.new(params[:invitation])
    @invitation.sender = current_user
    if @invitation.save
      if signed_in?
        UserMailer.invitation(@invitation).deliver
        flash[:notice] = "Thank you, invitation sent."
        redirect_to hunts_path      
      else
        flash[:notice] = "Thank you, we will notify when we are ready."
        redirect_to root_path  
      end
    else
      render :action => 'new'
    end
  end

end 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:48:18.187

嗯，不确定，但是您将 设置`@invitation.sender`为当前用户，并在保存后测试`signed_in?`. 如果用户未登录，是否无法保存邀请？

编辑：对不起，监督你说如果你删除重定向一切正常。我认为这个重定向会阻止其他操作做任何事情（顺便说一句，你只能重定向一次）。

# html - 彼此相邻的跨度具有相同的高度

> ID：10125827
> 
> 赞同：0
> 
> 时间：2012-04-12T14:36:13.287
> 
> 标签：html

有跨度：

```
<span style="width: 25%; float:left;">A</span><span style="width: 75%; float:left;">B</span> 
```

现在，如果 A 列或 B 列的高度不同，这一切都会崩溃。如果 A 的高度为 40px，我希望 B 的高度相同。换句话说，自动扩展高度。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:40:26.717

```
<div>
    <span style="height: 100%; width: 25%; float:left;">A</span><span style="height: 100%; width: 75%; float:left;">B</span>
</div> 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:23:38.867

我认为你应该用一个容器来围绕跨度，`div`并使用[等高列的一个真实布局技巧](http://www.positioniseverything.net/articles/onetruelayout/equalheight)来确保两个跨度具有相同的高度。

您还需要`word-wrap: break-word;`在两者中使用该属性`span`。

最好在 jsfiddle 中看到它：http: [//jsfiddle.net/y7TDQ/1/](http://jsfiddle.net/y7TDQ/1/)

# asp.net-mvc-3 - 使用 MvcSiteMapProvider 创建动态多级站点地图

> ID：10125830
> 
> 赞同：1
> 
> 时间：2012-04-12T14:36:21.613
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我有一个 mvc.SiteMap 定义如下：

```
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
        xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0    MvcSiteMapSchema.xsd"
        enableLocalization="true" >

<mvcSiteMapNode title="Home" controller="Home" action="Index" key ="_Home_">
    <mvcSiteMapNode title="View Plans" controller="Home" action="ViewCompletePlans"/>
        <mvcSiteMapNode title="Edit Plan" controller="Plan" action="EditPlan" dynamicNodeProvider= {pathToProvider}>
            <mvcSiteMapNode title="Critical Functions" controller="Plan" action="EditCriticalandNormalFunctions" dynamicNodeProvider={pathToProvider}>
                <mvcSiteMapNode title="Edit Critical Function" controller="CriticalFunction" action="EditCriticalFunction" dynamicNodeProvider= {pathToProvider}>
                    <mvcSiteMapNode title="Manage Uploaded Documents" controller="CriticalFunction" action="UploadedDocuments" dynamicNodeProvider={pathToProvider}></mvcSiteMapNode>
                </mvcSiteMapNode>
            </mvcSiteMapNode>
        </mvcSiteMapNode>
    </mvcSiteMapNode>
</mvcSiteMap> 
```

在每个级别，节点都是从数据库中的值动态生成的。我的问题是，对于子节点，在构建站点地图时会多次调用节点提供程序。我不确定是否是：

1.  为创建的每个父类型调用一次。所以如果有 5 个计划，那么关键功能的提供者会被调用 5 次，因此节点会生成 5 次。如果是这样，是否有某种方法可以传递提供者信息，以便我只能生成与当前父节点关联的节点，而不是所有具有该类型的节点？或者有没有办法访问当前的父节点？
2.  由于另一个原因被多次调用，尽管最高级别的动态节点提供程序只被调用一次。

该代码现在可以工作，但是效率非常低。

这是一个示例提供程序：

```
public class CriticalFunctionNodeProvider : DynamicNodeProviderBase  
{  
      public override IEnumerable<DynamicNode> GetDynamicNodeCollection()  
    {
        var db = new COPEntities();
        var returnValue = new List<DynamicNode>();
        foreach (var criticalFunction in db.NormalFunctions)
        {
            var node = new DynamicNode();
            node.Title = "Critical Function: " + criticalFunction.FunctionName;
            node.ParentKey = "_Plan_" + criticalFunction.PlanId + "_CritFuncs_";
            node.RouteValues.Add("planId", criticalFunction.PlanId);
            node.RouteValues.Add("id", criticalFunction.Id);
            node.Key = "_Plan_" + criticalFunction.PlanId + "_CritFuncs_" + criticalFunction.Id;
            returnValue.Add(node);
        }
        return returnValue;
    }
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:01:11.633

目前没有办法做到这一点，除了在单个 DynamicNodeProvider 中创建层次结构。但这将是一个很好的补充。

# mysql - mysql中的索引如何工作？

> ID：10125841
> 
> 赞同：1
> 
> 时间：2012-04-12T14:37:04.597
> 
> 标签：mysql, indexing

我想了解 MySql 中的索引是如何工作的。我对索引有几个问题。

首先是我们是否必须索引只有唯一值的列，或者我们可以索引其中值可以重复的列，例如。姓。我知道索引姓氏是愚蠢的，但我想了解它是如何工作的。所以我的理解是……

例如。一个表中有 1000 条记录。并且有 400 个姓氏重复。因此，如果我们索引“lastname”，mysql 将获取所有唯一值并对其进行索引，当搜索查询被触发而不是在 1000 条记录中搜索时，它只会遍历 600 条索引记录，其中甚至包括一次重复值，只是节约时间。

就像是.....

姓氏 ：-

史密斯

约翰逊

琼斯

棕色的

戴维斯

史密斯//重复

约翰逊//重复

史密斯//重复

棕色 //重复

威廉姆斯

## MySql 索引

1.  史密斯

2.  约翰逊

3.  琼斯

4.  棕色的

5.  戴维斯

6.  威廉姆斯

我对么....？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:43:08.080

有几个索引，但让我们以`btree`. 该索引是一个二叉树，每个节点有两个分支。

**制作索引** 你制作了一棵二叉树，其中一半的值在左边，另一半在右边。最简单的方法是用数字来看待它：如果你有数字 1 到 6，你会在顶部用 5 制作一棵树，然后用 1 和 3 制作 2，对了，你会用 4 和 6 作为叶子制作 5。

**用索引搜索东西：** 你基本上问的是“这个节点'少'还是'多'然后你正在寻找的值。所以你问第一个节点（丢弃一半的值），然后往下走，意思是您只需要搜索`log(n)`值以获取值的索引`n`。要“找到”3，您将与 5 和 2 进行比较，就可以了。这对于大数字来说非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:44:15.157

你的前提有些正确。执行查找的性能索引的好处 ( `SELECT`)。如果您有一个包含 1,000 个姓氏的列表（无论唯一名称的数量有多少），并且您想找到等于“Smith”的那些，您将必须查看所有 1,000 行以查找哪些条目（如果有）与您的询问。这可能会非常慢，因为根据您拥有的行数（无论唯一行数如何），您的性能会变得更差。

现在想象你的名字按姓氏的字母顺序排列。如果您想查找姓氏为“Smith”的任何条目，您可以进行“二分查找”：选择中间条目并按字母顺序查看姓氏是否小于或大于“Smith”。如果少的话，就扔掉前半部分的名字，只处理后半部分。选择其余名称的中间条目并将其与 Smith 等进行比较...

您所做的是减少了搜索时间。现在，您不必检查所有 n 个条目来找到“Smith”，而只需检查 log(2)n 个条目，对于较大的 n 值，它可以小得多。

这基本上是索引的作用，除了经常使用的 B+ 树（类似于上面提到的二叉树方法，但具有一些额外的好属性）会有所帮助。

关于您的唯一性问题，是的，您可以将索引应用于非唯一列。索引通常用于必须唯一的列（例如主键），因为如果没有索引，在列中保持唯一性可能会非常昂贵。例如，假设您想添加一个姓氏为“Smith”的条目，但您对“姓氏”列有唯一约束。你怎么知道是否已经有一个名为“Smith”的条目？你必须搜索它。如果没有索引，则需要检查 n 个条目；有一个索引，只有 log(2)n。因此，在唯一列上保留索引以保持合理的性能通常是一个好主意。

此外，关于数据库索引[的 Wikipedia 文章](http://en.wikipedia.org/wiki/Database_index)更详细地回答了您的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T14:44:42.977

阅读 MySQL 手册的[“优化和索引”](http://dev.mysql.com/doc/refman/5.6/en/optimization-indexes.html)部分。

# ms-access - DBEngine 变量未在 vb 6.0 中定义

> ID：10125843
> 
> 赞同：0
> 
> 时间：2012-04-12T14:37:06.530
> 
> 标签：ms-access, vb6, vbscript, ms-access-2003

当我写 dbengine.Workspace("", "", "") 时，它在未定义的 dbengine 变量附近显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:39:18.577

您是否添加了对[DAO](http://msdn.microsoft.com/en-us/library/aa266542%28v=VS.60%29.aspx)的引用？[DBEngine](http://msdn.microsoft.com/en-us/library/bb177488%28v=office.12%29.aspx)是 DAO 的一部分

在VB6中选择菜单选项`Project-References`并勾选`Microsoft DAO 3.6 Object Library`

![在此处输入图像描述](../Images/5c47046b0355fb8e760b3952035a8b54.png)

# networking - 在安装过程中使用 Inno Setup 共享文件夹

> ID：10125844
> 
> 赞同：1
> 
> 时间：2012-04-12T14:37:10.437
> 
> 标签：networking, inno-setup, shared-directory

是否可以从 innosetup 安装创建网络共享文件夹？

有权限和所有？

我的应用程序在客户端网络中使用 2 个共享文件夹，每个人都必须能够读取/写入这些文件夹。

我喜欢在设置中创建它，以避免手动进行。是否可以 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:59:53.740

您可以使用[`Create`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389393%28v=vs.85%29.aspx)Win32_Share 类的方法。

试试这个样本

```
Const
 FILE_SHARE = 0;
 MAXIMUM_CONNECTIONS = 25;

function CreateShared(const Path, Name, Description : string):Integer;
var
    FSWbemLocator: Variant;
    FWMIService   : Variant;
    FWbemObjectSet: Variant;
begin
    FSWbemLocator := CreateOleObject('WBEMScripting.SWBEMLocator');
    FWMIService := FSWbemLocator.ConnectServer('', 'root\CIMV2', '', '');
    FWbemObjectSet := FWMIService.Get('Win32_Share');
    Result:=FWbemObjectSet.Create(Path, Name, FILE_SHARE, MAXIMUM_CONNECTIONS, Description);
end; 
```

并以这种方式使用

```
 Err:= CreateShared('C:\Foo', 'MyShare','This is a public shared folder'); //0 indicates Success 
```

# javascript - ExtJs：网格单元格中的多个表单对象

> ID：10125850
> 
> 赞同：0
> 
> 时间：2012-04-12T14:37:33.523
> 
> 标签：javascript, extjs4

有没有办法在单列中放置一个复选框和 2 个数字字段？就像是

```
+------------------------+------------------------+
| 第 1 栏 | 第 2 栏 |
+------------------------+------------------------+
| | CB NF NF |
+------------------------+------------------------+
| | CB NF NF |
+------------------------+------------------------+
| | CB NF NF |
+------------------------------------------------+

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:38:42.970

“标准”方法涉及使用功能来编辑行/列模板以包含具有 id 的 div，然后使用配置将组件渲染到这些 div 中`renderTo`。但是，由于您是按列而不是按行工作，因此您可以采用更简单的方法。

在您的列配置中，使用这样的自定义渲染器：

```
// May not be exact, I just came up with this on the spot
renderer: function(value, metaData, record, rowIdx, colIdx, store, view) {
    return [
        "<div id='combobox_", rowIdx, "'></div>",
        "<div id='numberfield_1_", rowIdx, "'></div>",
        "<div id='numberfield_2_", rowIdx, "'></div>"
    ].join("");
} 
```

因此，现在该列中的每个单元格都有三个具有唯一 ID 的 div（您可能需要将“rowIdx”替换为其他一些标识方法，例如 record.id）。然后由您来创建组件并保持它们呈现。

请注意，`refresh`每次网格更新时都会调用网格视图的方法，包括排序、过滤、隐藏列等。因此您需要注意`afterrefresh`事件或类似的事情并根据需要重新渲染您的组件。要欺骗渲染的组件重新渲染，使用`myComponent.rendered = false; myComponent.render();`它应该可以工作。

人们可能已经编写了一些插件，可以为您管理这个过程的很大一部分，但这是基本概念。它不漂亮，但它有效。

# unit-testing - Python 2.7下进行单元测试时如何设置默认库

> ID：10125860
> 
> 赞同：1
> 
> 时间：2012-04-12T14:38:09.357
> 
> 标签：unit-testing, google-app-engine, python-2.7

我正在将我的 Google AppEngine 解决方案从 Python 2.5 迁移到 2.7。应用程序迁移相对容易，但我在单元测试方面遇到了困难。

在 2.5 版本中，我使用 use_library 函数将 django 版本设置为 1.2，但 2.7 不再支持此功能。现在我在 app.yaml 中设置了默认版本。

当我现在运行我的单元测试时，默认 django 版本变为 0.96，我无法将 1.2 设置为默认版本。

谁知道我如何设置单元测试的默认库，以便匹配 app.yaml 中的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:44:08.697

使用以下语法`app.yaml`设置始终使用的 Django 版本：

```
libraries:
- name: django
  version: "1.3" 
```

有关如何在 Python 2.7 中设置使用 3rd 方库的更多详细信息，请[点击此处](https://developers.google.com/appengine/docs/python/tools/libraries27)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T13:12:52.273

`app.yaml`使用 webtest app 和 NoseGAE 进行单元测试时不应用配置。 `use_library`也不行。

这种情况下的正确解决方案是为首选 lib 版本提供正确的 python 路径，例如`PYTHONPATH=../google_appengine/lib/django-1.5`在运行nosetests 时。

# java - 如何匹配多个正则表达式并确定Java中匹配的表达式

> ID：10125862
> 
> 赞同：3
> 
> 时间：2012-04-12T14:38:29.170
> 
> 标签：java, regex

我有一个 Java 程序，它逐行遍历文件，并尝试将每一行与四个正则表达式之一进行匹配。根据匹配的表达式，程序执行特定操作。这是我所拥有的：

```
private void processFile(ArrayList<String> lines) {
    ArrayList<Component> Components = new ArrayList<>();
    Pattern pattern = Pattern.compile(
            "Object name\\.{7}: (.++)|"
            + "\\{CAT=([^\\}]++)\\}|"
            + "\\{CODE=([^\\}]++)\\}|"
            + "\\{DESC=([^\\}]++)\\}");

    Matcher matcher;
    // Go through each line and see if the line matches the any of the regexes
    // defined
    Component currentComponent = null;

    for (String line : lines) {
        matcher = pattern.matcher(line);

        if (matcher.find()) {
            // We found a tag. Find out which one
            String match = matcher.group();

            if (match.startsWith("Obj")) {
                // We've got the object name
                if (currentComponent != null) {
                    Components.add(currentComponent);
                }
                currentComponent = new Component();
                currentComponent.setName(matcher.group(1));
            } else if (currentComponent != null) {
                if (match.startsWith("{CAT")) {
                    currentComponent.setCategory(matcher.group(2));
                } else if (match.startsWith("{CODE")) {
                    currentComponent.setOrderCode(matcher.group(3));
                } else if (match.startsWith("{DESC")) {
                    currentComponent.setDescription(matcher.group(4));
                }
            }
        }
    }

    if (currentComponent != null) {
        Components.add(currentComponent);
    }
} 
```

如您所见，我已将四个正则表达式合二为一，并将整个正则表达式应用于该行。如果找到匹配项，我会检查字符串的开头以确定匹配的表达式，然后从组中提取数据。如果有人对运行代码感兴趣，下面提供了一些示例数据：

```
Object name.......: PMF3800SN
Last modified.....: Wednesday 9 November 2011 11:55:04 AM
File offset (hex).: 00140598 (Hex).
Checksum (hex)....: C1C0 (Hex).
Size (bytes)......: 1,736
Properties........: {*DEVICE}
                    {PREFIX=Q}
                    {*PROPDEFS}
                    {PACKAGE="PCB Package",PACKAGE,1,SOT-323 MOSFET}
                    {*INDEX}
                    {CAT=Transistors}
                    {SUBCAT=MOSFET}
                    {MFR=NXP}
                    {DESC=N-channel TrenchMOS standard level FET with ESD protection}
                    {CODE=1894711}
                    {*COMPONENT}

                    {PACKAGE=SOT-323 MOSFET}
                    *PINOUT SOT-323 MOSFET
                    {ELEMENTS=1}
                    {PIN "D" = D}
                    {PIN "G" = G}
                    {PIN "S" = S} 
```

尽管我的代码有效，但我不喜欢稍后在调用startsWith 例程时重复部分字符串的事实。

我很想知道其他人会如何写这个。

阿米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:46:42.277

`group()`返回`null`匹配失败的组。因此，您可以将子表达式分组并`null`在匹配后检查它们：

```
Pattern pattern = Pattern.compile(
         "(Object name\\.{7}: (.++))|"
         + "(\\{CAT=([^\\}]++)\\})|"
         + "(\\{CODE=([^\\}]++)\\})|"
         + "(\\{DESC=([^\\}]++)\\})"); 
...
if (match.group(1) != null) { // Object ...
    ...
} ... 
```

实际上，如果您的子表达式中没有`|`s，您甚至可以对现有组执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:03:37.400

正如@axtavt 指出的那样，您可以直接发现一个小组是否参加了比赛。您甚至不必更改正则表达式；对于每个备选方案，您已经有一个捕获组。我喜欢使用该`start(n)`方法进行测试，因为它看起来更简洁，但检查`group(n)`空值（如 @axtavt 所做的那样）会产生相同的结果。这是一个例子：

```
private static void processFile(ArrayList<String> lines) {

    Pattern p = Pattern.compile(
            "Object name\\.{7}: (.++)|"
            + "\\{CAT=([^\\}]++)\\}|"
            + "\\{CODE=([^\\}]++)\\}|"
            + "\\{DESC=([^\\}]++)\\}");

    // Create the Matcher now and reassign it to each line as we go.
    Matcher m = p.matcher("");

    for (String line : lines) {
        if (m.reset(line).find()) {
            // If group #n participated in the match, start(n) will be non-negative.
            if (m.start(1) != -1) {
                System.out.printf("%ncreating new component...%n");
                System.out.printf("  name: %s%n", m.group(1));
            } else if (m.start(2) != -1) {
                System.out.printf("  category: %s%n", m.group(2));
            } else if (m.start(3) != -1) {
                System.out.printf("  order code: %s%n", m.group(3));
            } else if (m.start(4) != -1) {
                System.out.printf("  description: %s%n", m.group(4));
            }
        }
    }
} 
```

但是，我不确定我是否同意您关于在代码中重复部分字符串的推理。如果数据格式发生变化，或者您更改了提取的字段，那么更新代码时似乎更容易不同步。换句话说，您当前的代码不是多余的，它是自我记录的。:D

**编辑：**您在评论中提到了一次处理整个文件而不是逐行处理的可能性。这实际上是更简单的方法：

```
private static void processFile(String contents) {

    Pattern p = Pattern.compile(
            "Object name\\.{7}: (.++)|"
            + "\\{CAT=([^\\}]++)\\}|"
            + "\\{CODE=([^\\}]++)\\}|"
            + "\\{DESC=([^\\}]++)\\}");

    Matcher m = p.matcher(contents);

    while (m.find()) {
        if (m.start(1) != -1) {
            System.out.printf("%ncreating new component...%n");
            System.out.printf("  name: %s%n", m.group(1));
        } else if (m.start(2) != -1) {
            System.out.printf("  category: %s%n", m.group(2));
        } else if (m.start(3) != -1) {
            System.out.printf("  order code: %s%n", m.group(3));
        } else if (m.start(4) != -1) {
            System.out.printf("  description: %s%n", m.group(4));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:48:15.260

我会定义一个模式+可运行的元对象。遍历行，然后遍历元对象。如果匹配，则执行可运行文件。就像是，

```
class Meta {
  Pattern pattern;
  Runnable runnable;
  Matcher matcher;

  Meta(Pattern p, Runnable r) {
    pattern = p;
    runnable = r;
  }
}

Meta[] metas = new Meta[] { new Meta(Pattern.compile(...), new Runnable() { ... }), new Meta(...), ... };

for (String line : lines) {
  for (Meta meta : metas) {
    final Matcher matcher = meta.pattern.matcher(line);
    if (matcher.matches()) {
      meta.matcher = matcher;
      meta.runnable.run();
    }
  }
} 
```

这是“对象”行的元对象的样子，

```
Meta m = new Meta(Pattern.compile("Object name\\.{7}: (.++)", new Runnable() {
  // We've got the object name
  if (currentComponent != null) {
    Components.add(currentComponent);
  }
  currentComponent = new Component();
  currentComponent.setName(matcher.group(1));
}); 
```

# graph - 如何从 Google Analytics 导出带有注释的图表

> ID：10125866
> 
> 赞同：0
> 
> 时间：2012-04-12T14:38:40.193
> 
> 标签：graph, google-analytics, export

是否可以将带有注释事件日期的站点使用图从 Google Analytics 导出到 MS-Word 中？

我知道如何对我的图像编辑器进行屏幕截图，但我希望做一些更自动化或简化的事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:12:03.217

检查这个网站。你需要 GreaseMonkey 和 Firefox。还有一点耐心；）

[http://damionbrown.com/2012/02/export-and-share-google-analytics-annotations/](http://damionbrown.com/2012/02/export-and-share-google-analytics-annotations/)

# javascript - 当用户更改下拉菜单时使 div 可见

> ID：10125869
> 
> 赞同：1
> 
> 时间：2012-04-12T14:38:52.380
> 
> 标签：javascript, prototypejs

我想知道当用户从下拉列表中选择特定选项（选择选项）时，如何使包含文本框的 div 可见

例如，大学会有一个选择选项，其中一个选项是其他，如果用户选择这个，我想要一个包含文本框的 div，如果它不在列表中，则允许用户输入他们的大学。

我正在使用原型框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:43:24.973

如果您在更改时绑定选择，则可以在每次选择一个时比较所选值，如果该选定值是“其他”，假设您的值与您的选项标签匹配，那么您可以触发显示额外元素。

只需隐藏页面中已经存在的元素并将其 element.style.display 从 'none' 切换为 '' （我放置空字符串而不是块，因为您的元素可能不是块并将其设置为空字符串返回显示给定元素的默认值（内联，块...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:46:21.957

像这样的东西？

```
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
div{
    visibility:hidden;}

</style>
<script type="text/javascript">
function call(){
    var response = document.getElementById('Select').value;
    document.getElementById(response).style.visibility='visible';

    }
</script>

</head>

<body>

<select name="Select" id="Select" onChange="call()">
<option>1<option>
<option>2<option>
<option>3<option>
</select>
<div id="div1">Content for  id "div1" Goes Here</div>
<div id="2">Content for  id "2" Goes Here</div>
<div id="3">Content for  id "3" Goes Here</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:48:49.567

这是原型几乎没有任何价值的例子之一。这是我将如何处理这个问题：

```
​document.getElementById("test").onchange = function () {
    var val = this.options[this.selectedIndex].value;
    document.getElementById("otherTb").style.display = (val == "other") ? "block" : "none";  
};​​​ 
```

[**演示。**](http://jsfiddle.net/DsbaK/)

如果你真的坚持原型化：

```
​$("test").onchange = function () {
    var val = this.options[this.selectedIndex].value;
    $("otherTb").style.display = (val == "other") ? "block" : "none";  
};​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T15:15:17.947

可能的香草解决方案

HTML

```
<select id="university">
    <option value="foo">Something</option>
    <option value="other">Other</option>
</select>

<div id="other"></div> 
```

JavaScript

```
document.getElementById("university").onchange = function() {
    if (this.value == "other") {
        document.getElementById("other").innerHTML = "<input type='text' name='other' />";
    }
}; 
```

[演示](http://jsfiddle.net/596rf/2/)

# asp.net - ASP.NET - cookieless = UseCookies - 浏览器中只有会话ID？没有客户端cookies？

> ID：10125876
> 
> 赞同：1
> 
> 时间：2012-04-12T14:39:22.367
> 
> 标签：asp.net, security, cookieless

我正在研究 asp.net (4.0) 网站。我试图使用表单身份验证（）。显然试图让一些页面安全。我的理解是，最好的安全解决方案是设置 cookieless="UseCookies" 这样它就不会将 id 写入 URL。

我的问题是当我使用 cookieless="UseCookies" 时到底发生了什么。

1.  会话是否已创建并且某些 id 是否存储在浏览器中（〜内存，稍后用于从 IIS 服务器端会话“cookie”中提取信息）或者它实际上是创建“常规”客户端加密 cookie 的配偶？

（我显然试图避免写入 URL 和客户端 cookie - 不确定是否可以避免所有这些）

1.  如果它在浏览器中设置 ID，是否所有浏览器都允许在其中存储会话 ID。如果浏览器不允许这样做会发生什么？有没有办法预先检查它？

所以我想和我们所有人一样，我只是在尝试构建适当的安全应用程序，如果有人有任何其他建议，我们将不胜感激。

坦克很多，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:26:05.537

如果您允许 cookie，那么设置 cookieless="false" sessionID 将存储在 cookie 中，并且在整个会话期间（默认为 20 分钟）都可以访问。

如果您允许 cookie 并且用户将在浏览器中禁用 cookie，则 sessionID 将不会存储在任何地方，并且每次用户创建新请求（通过转到另一个页面）时，他都会获得新的 sessionID，因此无法保留任何数据。

您可以使用 cookieless="true" 加密并将 sessionID 附加到 url，这样即使启用了 cookie，用户也可以保持会话。

还有一个 cookieless="AutoDetect" 将确定用户是否禁用或启用了 cookie，并基于此创建一个带有 sessionID 的 cookie 或将其扔到 URL。这样做的缺点是，对您页面的每个请求都会产生 3 个请求，一个请求确定用户是否启用了 cookie，将查询字符串附加到第一个请求的结果中，第三个请求将用户带到适当的 URL。

还有一个设置可以根据浏览器的数据关闭和打开无 cookie。因此，如果有人使用 10 年前的手机浏览您的页面，它可能会将 cookie 附加到 URL，因为在该设备上没有允许 cookie 的选项。

我希望这有帮助。我个人会向用户发送消息以启用 cookie，甚至不必担心其他情况，但有些人（例如我的老板）不喜欢这个想法并希望得到所有人的支持。

# java - BIRT 的饼图和每个单元格的附加数据

> ID：10125877
> 
> 赞同：1
> 
> 时间：2012-04-12T14:39:24.083
> 
> 标签：java, charts, birt

我在 BIRT 中构建了简单的 PieChart，现在我需要为值添加 onclick 操作，因此当用户单击时，他将被重定向。

添加 onclick 动作很简单：

```
PieSeries ps = (PieSeries) PieSeriesImpl.create();
ps.getTriggers().add(TriggerImpl.create(TriggerCondition.ONCLICK_LITERAL,
   ActionImpl.create(ActionType.INVOKE_SCRIPT_LITERAL,
   ScriptValueImpl.create("gotoURL(arguments);")))); 
```

现在，如果用户单击图表值，将调用一个 javascript 函数并传递一些参数（categoryData、valueData、valueSeriesName、legendItemText、legendItemValue、axisLabel）

但是我需要传递仅在图表生成时间（当我创建数据集脚本时）知道的附加值，它基于来自 CellObject（具有单元格值的对象）的另外两个值 recordID 和来自 LabelObject（具有标签名称）。

如何将此值传递给饼图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:00:41.193

你的意思是这样的：http: [//www.birt-exchange.org/org/devshare/designing-birt-reports/1474-client-side-script-to-show-detail-rows-from-chart-and-桌子/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1474-client-side-script-to-show-detail-rows-from-chart-and-table/)

# css - 如何更改鼠标悬停在图像上的超链接颜色？

> ID：10125878
> 
> 赞同：0
> 
> 时间：2012-04-12T14:39:27.377
> 
> 标签：css, hyperlink, hover

我正在建立一个网页，上面有一个小饼图。馅饼有 6 块，在这张图片的右侧，我有文本超链接，人们可以选择点击这些超链接，以转到点击这块馅饼的相同位置。

hover 属性设置为更改鼠标悬停时超链接的颜色。有没有办法我也可以将鼠标悬停在图像饼块上，并且仍然使文本超链接改变颜色，就像我悬停在它们上面一样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:46:17.167

将它们包装在容器中，并将悬停功能应用于该容器。

[jsFiddle 示例](http://jsfiddle.net/jackdent/mrS5b/1/)

CSS：

```
.container:hover a {
    color: black;
    text-decoration: none;
} 
```

或者使用 CSS + 选择器来选择下一个兄弟元素
查看这个更新的[例子](http://jsfiddle.net/jackdent/mrS5b/2/)

# android - 如何在 Android 中将“ScrollView”与其他布局一起应用？

> ID：10125880
> 
> 赞同：1
> 
> 时间：2012-04-12T14:39:29.063
> 
> 标签：android, layout, scrollview

使用 scrollView 会导致我的应用程序崩溃。我需要一个滚动视图，因为所有内容都在屏幕上不可见，它位于屏幕末尾。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<LinearLayout
    android:isScrollContainer="true"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="vertical">

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dip"
                android:text="RECORD MATCH DETAILS"
                android:textSize="25dip"
                android:textStyle="bold" />

                <TextView
                        android:text="Home Team:" 
                        android:textStyle="bold"/>

                <Spinner
                    android:id="@+id/spinner1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />

                <TextView
                        android:text="Away Team:" 
                        android:textStyle="bold"/>

                <Spinner
                    android:id="@+id/spinner2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />

                <TextView
                        android:text="Select Date:" 
                        android:textStyle="bold"/>

            <DatePicker
                android:id="@+id/datePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

                <TextView
                        android:text="Select Time:" 
                        android:textStyle="bold"/>

            <TimePicker
                android:id="@+id/timePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

    </LinearLayout>
</ScrollView> 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:48:17.627

您的布局无效，因为您的 TextViews 没有指定 layout_width 和 height。这在您的应用程序崩溃的堆栈跟踪中进行了解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:54:07.040

知道了！！

感谢你的帮助。

我的线性布局 layout_height 需要是“wrap_content”。我还以表格格式输入了数据。这是我的新代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

        <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dip"
                android:text="RECORD MATCH DETAILS"
                android:textSize="25dip"
                android:textStyle="bold" />
        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <TableRow>
                <TextView
                        android:text="Home Team:" 
                        android:textStyle="bold"/>
            </TableRow>
            <TableRow>
                <Spinner
                    android:id="@+id/spinner1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </TableRow>

            <TableRow>
                <TextView
                        android:text="Away Team:" 
                        android:textStyle="bold"/>
            </TableRow>
            <TableRow>
                <Spinner
                    android:id="@+id/spinner2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </TableRow>

            <TableRow>
                <TextView
                        android:text="Select Date:" 
                        android:textStyle="bold"/>
            </TableRow>
            <TableRow>
            <DatePicker
                android:id="@+id/datePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
            </TableRow>

            <TableRow>
                <TextView
                        android:text="Select Time:" 
                        android:textStyle="bold"/>
            </TableRow>
            <TableRow>
            <TimePicker
                android:id="@+id/timePicker1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
            </TableRow>

            <TableRow >
                <Button 
                    android:id="@+id/btnCreateMatch"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="15dip"
                    android:layout_marginBottom="15dip"
                    android:textSize="20dp"
                    android:text="Create Match"/>
            </TableRow>

        </TableLayout>

</LinearLayout>

</ScrollView> 
```

再次感谢！

# javascript - 从在浏览器中运行的 Javascript 向 Windows 批处理文件发送消息

> ID：10125881
> 
> 赞同：1
> 
> 时间：2012-04-12T14:39:32.293
> 
> 标签：javascript, windows, batch-file

由于我必须使用的架构可能会破坏许多非常好的软件设计规则，我需要将消息从在 ​​Web 浏览器中运行的一些 javascript 代码发送到同一台机器上的 Windows 批处理文件。操作系统是 Windows Vista 或更高版本。使用的浏览器主要是 Chrome 和 Firefox。jQuery 也与 javascript 一起使用。

浏览器连接到互联网并且它们是涉及的服务器，所以我可以将消息中继到服务器，然后到批处理文件。现在我有一个批处理文件，每分钟左右运行一次，理论上可以向服务器查询任何消息。除此之外，我没有任何好的想法。

此外，**这是一个“封闭”系统**。客户端浏览器、客户端系统和服务器都在我的完全控制之下。这不是公众在他们的浏览器中运行 Javascript 的情况。可以操纵客户端计算机以能够接收消息。

发送此消息的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:01:22.187

# 1.本地HTTP服务器

从 JavaScript 向本地 HTTP 服务器发送包含您的命令的 AJAX 请求。所有现代浏览器都支持跨域 AJAX。服务器可以将命令作为参数传递给批处理文件。**确保无法从网络访问服务器**。

这种方法的优点是您可以将命令的响应发送回 JavaScript。

*   **JavaScript：**

    ```
    $.post('http://localhost:8080', {command: '...'}); 
    ```

*   **Bottle.py 服务器：**

    ```
    #!/usr/bin/python
    from bottle import run, route, request, response
    import subprocess

    @route('/', method='POST')
    def index():
        command = request.POST['command']
        result = subprocess.check_output(['batchfile.bat', command], shell=True)

        response.set_header('Access-Control-Allow-Origin', '*')
        return result

    run(host='localhost', port=8080, reloader=True) 
    ```

*   **或者Apache/nginx下的PHP：**

    ```
    $result = shell_exec("batchfile.bat " . escapeshellarg($_POST['command'])); 
    ```

*   **或 PHP 中的守护进程**：

    为了获得额外的乐趣，它具有完整的 shell 访问权限，并且可以异步运行命令，这允许启动桌面应用程序而不会阻塞。它不需要 Apache。

    开始：`php.exe -f batrunner_daemon.php`

    利用：`$.get('http://localhost:33333/ping -h', function(response) { console.log(response) });`

    ```
    $host = '127.0.0.1';
    $port = 33333;
    $async = false; // enable to run commands without blocking the server (useful for GUI applications)

    $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
    $open = @socket_bind($socket, $host, $port);
    if ($open) {
        echo "\nListening on http://{$host}:{$port}";
    } else {
        echo "\nError. Port {$port} in use";
        exit;
    }
    socket_listen($socket, 1);

    while(1) {
        $connection = socket_accept($socket);
        $http_request = socket_read($connection, 32768);
        $command = rawurldecode(substr(strstr($http_request, "\r\n", true), 5, -9));

        echo "\nRunning: {$command}...";

        if ($async) {
            $response = pclose(popen('start "" /B ' . $command, 'r')) ? 'error' : 'success';
        } else {
            $response = shell_exec($command);
        }

        echo " Done.";

        socket_write($connection, implode("\r\n", array(
            'HTTP/1.1 200 OK',
            'Content-Type: text/plain; charset=UTF-8',
            'Connection: close',
            'Content-Length: ' . strlen($response),
            'Access-Control-Allow-Origin: *',
            "\r\n" . $response
        )));
        socket_close($connection);
    } 
    ```

    为简单起见，它没有适当的错误处理，并允许任何站点在您的计算机上执行任何操作，使用风险自负。

    `Access-Control-Allow-Origin: *`意味着任何站点都可以接收来自 shell 的响应。如果没有这个标头，它们显然仍然可以运行命令，但无法接收响应。

* * *

# 2.URI方案

我尝试了@mamdrood 的想法，结果证明它非常简单，比 HTTP 服务器容易得多。

*   从 HTML 中，您将能够像这样调用批处理文件：

    ```
    <a href="batrunner://somecommand">Wipe all files</a> 
    ```

*   以下是批处理文件如何`C:\mybatfile.bat`解析命令：

    ```
    @echo off
    SET command=%1
    SET command=%command:batrunner://=%
    echo %command% 
    ```

    我对批处理文件不是很熟悉，而且我的命令名解析代码很容易受到攻击。如果您知道更好，请更新此答案。

*   要将您的批处理文件与`batrunner://`协议创建`batrunner.reg`并运行一次。代替`C:\\mybatfile.bat`您的脚本，路径应该被转义。

    ```
    Windows Registry Editor Version 5.00

    [HKEY_CLASSES_ROOT\batrunner]
    "URL Protocol"=""

    [HKEY_CLASSES_ROOT\batrunner\shell]

    [HKEY_CLASSES_ROOT\batrunner\shell\open]

    [HKEY_CLASSES_ROOT\batrunner\shell\open\command]
    @="C:\\mybatfile.bat %1" 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:02:58.193

您还可以创建一个小的 Windows 应用程序，并使用[URI 方案](http://en.wikipedia.org/wiki/URI_scheme)连接信息，就像 BitTorrent 磁铁或 Skype callto 一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:46:47.147

据我所知，在浏览器中运行的 JavaScript 无法与本地文件系统进行通信。如果网络上的页面可以在您的系统上读取和写入文件，那对每个人来说都是非常非常糟糕的。:)

如果你需要生成一个批处理文件，你*可以*从服务器输出文件，让用户在本地下载并运行它，但是 JavaScript 在这里没有任何帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T14:59:28.237

我认为您不会找到一种“开箱即用”的方式来使用 javascript 触发本地批处理文件。我敢肯定，当我完成发布这篇文章时，就会提倡使用插件方法，但是这会带来很多开发开销。Chrome 也有一些带有 --enable-local-file-access 开关的花哨的东西，但也有很多警告。（只是把它们扔在那里作为探索的选择）。

您可能会考虑只提供一个链接，将 .bat 文件下载到盒子并从那里执行。

**编辑** 我可能说得太早了。如果您使用的是 IE，看起来 js/ActiveX 解决方案可以满足您的需求。取自[这里](http://www.tek-tips.com/viewthread.cfm?qid=1226233)。

# c# - wcf restful 服务配置错误

> ID：10125883
> 
> 赞同：3
> 
> 时间：2012-04-12T14:39:41.183
> 
> 标签：c#, wcf, rest

我正在创建一个宁静服务的框架算法，展示如何处理发布和获取请求。从我的示例中，get 工作正常，但是 post 没有。我想我应该在 web.config 中添加一些东西，但我不知道是什么以及为什么。在此先感谢，佐利。

```
 [ServiceContract]
public interface IRestfulService
{
    [OperationContract]
    [WebGet(UriTemplate = "/GetAStudent")]
    Student GetExistingStudent();

    [OperationContract]
    [WebInvoke(UriTemplate = "/GetTheGivenStudent/{studentName}", Method = "POST")]
    Student GetGivenStudent(string studentName);
}

public class RestfulService : IRestfulService
{
    public Student GetExistingStudent()
    {
        Student stdObj = new Student
        {
            StudentName = "Foo",
            Age = 29,
            Mark = 95
        };
        return stdObj;
    }

    public Student GetGivenStudent(string studentName)
    {
        Student stdObj = new Student
        {
            StudentName = studentName,
            Age = 29,
            Mark = 95
        };
        return stdObj;
    }
}

 [DataContract]
public class Student
{
    [DataMember]
    public string StudentName { get; set; }
    [DataMember]
    public int Age { get; set; }
    [DataMember]
    public double Mark { get; set; }
} 
```

网络配置：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <protocolMapping>
        <add scheme="http" binding="webHttpBinding"/>
    </protocolMapping>

    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>

        </serviceBehaviors>
        <endpointBehaviors>
            <behavior>
                <webHttp />
            </behavior >
        </endpointBehaviors>

    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:24:02.070

您不需要为 REST 服务公开 mex 端点。您的 web.config 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
      <service name="BookService">

        <!-- Expose an XML endpoint: -->
        <endpoint name="xml"
              address="xml"
              binding="webHttpBinding"
              contract="BookStore.Contracts.IBookService"
              behaviorConfiguration="poxBehavior" />

        <!-- Expose a JSON endpoint: -->
        <endpoint name="json"
              address="json"
              binding="webHttpBinding"
              contract="BookStore.Contracts.IBookService"
              behaviorConfiguration="jsonBehavior" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="poxBehavior">
           <webHttp />
        </behavior>
      <endpointBehaviors>
        <behavior name="jsonBehavior">
           <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

以上将公开两个端点，一个使用 XML 数据，一个使用 JSON。当然，像这样暴露两个端点是完全可选的；这只是你可以做的一个例子。

我也喜欢为 REST 服务使用路由；类似于您的 Global.asax.cs 中的内容：

```
protected void Application_Start(object sender, EventArgs e)
{
    RouteTable.Routes.Add(
        new System.ServiceModel.Activation.ServiceRoute("books",
            new System.ServiceModel.Activation.WebServiceHostFactory(),
            typeof(BookStore.Services.BookService)
        )
    );
} 
```

其中，使用示例 web.config 中的上述端点，将允许像这样访问服务：

```
http://yourdomain.com/books/xml 
```

如果您选择使用或添加 json 端点，如下所示：

```
http://yourdomain.com/books/json 
```

# c# - 创建存储库

> ID：10125884
> 
> 赞同：2
> 
> 时间：2012-04-12T14:39:41.693
> 
> 标签：c#, visual-studio-2010, asp.net-mvc-3, linq, repository

我一直在使用 [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an- asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application) 作为帮助我创建存储库的指导。我用下面的代码创建了一个类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using TheatreGroup.Models;

namespace TheatreGroup.DAL
{
    public interface IShowRepository : IDisposable
    {
        IEnumerable<Show> GetShows();
        Show GetShowByID(int showId);
        void InsertShow(Show name);
        void DeleteShow(int showID);
        void UpdateShow(Show name);
        void Save();
    }
} 
```

但是当我开始创建第二类时，我收到一条错误消息：

> TheatreGroup.DAL.ShowRepository' 没有实现接口成员'TheatreGroup.DAL.IShowRepository.InsertShow(TheatreGroup.Models.Show)'。

错误在 5line down (round about)

```
using System.Data;
using TheatreGroup.Models;

namespace TheatreGroup.DAL
{
    public class ShowRepository: IShowRepository, IDisposable
    {
        private TheatreContext context;

        public ShowRepository(TheatreContext context)
        {
            this.context = context;
        }

        public IEnumerable<Show> GetShows()
        {
            return context.Shows.ToList();
        }

        public Show GetShowByID(int id)
        {
            return context.Shows.Find(id);
        }

        public void InsertShows(Show name)
        {
            context.Shows.Add(name);
        }

        public void DeleteShow(int showID)
        {
            Show shows = context.Shows.Find(showID);
            context.Shows.Remove(shows);
        }

        public void UpdateShow(Show name)
        {
            context.Entry(name).State = EntityState.Modified;
        }

        public void Save()
        {
            context.SaveChanges();
        }

        private bool disposed = false;

        protected virtual void Dispose(bool disposing)
        {
            if (!this.disposed)
            {
                if (disposing)
                {
                    context.Dispose();
                }
            }
            this.disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:41:01.330

你`InsertShows`没有`InsertShow`。你的界面需要`InsertShow`。

# javascript - 使用 jQuery 从帖子文本中去除简码

> ID：10125885
> 
> 赞同：0
> 
> 时间：2012-04-12T14:39:48.407
> 
> 标签：javascript, jquery, wordpress

我制作了一个 WordPress 插件，它使用 JS 在“写帖子面板”中使用帖子正文的前几句填充帖子编辑表单的摘录文本区域。（我知道如果没有摘录，WordPress 会默认显示前 55 个单词 - 这是我的客户想要的。）不幸的是，如果帖子正文中有一个短代码，这会出现在我的自动摘录中。例如

```
[imageshortcode url="http://xxx.co.uk/i/pix/2012/04/12/article-1234237614713-128F6F6E000005DC-482208_636x407.jpg" title="Clock Tower" caption="A clock on top of a train station in Damascus"] 
```

有人知道一些 jQuery 喘息，我可以用它从我从帖子编辑器获取的文本中删除这种短代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:48:48.983

一个可能的答案可以在[这里](http://wordpress.org/support/topic/how-to-remove-short-code-from-post-excerpt)找到。它使用正则表达式。要删除特定的错误短代码，请使用[它。](http://wordpress.org/support/topic/remove-short-code-from-excerpt) 这两个都使用PHP，这是你想要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:04:20.987

如果这对其他人有用，我最终使用这个 JS 正则表达式从文本中删除方括号之间的任何字符，同时留下任何可能出现在短代码标签之间的文本，例如 [note] ... [/笔记]。

```
var myReg = /\[.+\]/g;
paragraphText = paragraphText.replace(myReg, ''); 
```

# javascript - 关于 ECMAScript 中 JSON.stringify 的问题

> ID：10125886
> 
> 赞同：1
> 
> 时间：2012-04-12T14:39:51.240
> 
> 标签：javascript, json, ecmascript-5, stringify

我正在看[MDN 的“使用原生 JSON”](https://developer.mozilla.org/En/Using_native_JSON)。我对这个`JSON.stringify`方法有 3 个问题。

**问题一：**

```
var foo = {
    "foundation": "Mozilla",
    "model": "box",
    "week": 45,
    "transport": "car",
    "month": 7
},
    censor = function (key, value) {
        if (typeof value === 'string') {
            return;
        }
        return value;
    };
console.log(JSON.stringify(foo, censor)); // String: {"week":45,"month":7} 
```

上面的代码工作正常。但是为什么下面的代码不能正常工作？

```
var foo = {
    "foundation": "Mozilla",
    "model": "box",
    "week": 45,
    "transport": "car",
    "month": 7
},
    censor = function (key, value) {
        if (typeof value !== 'string') {
            return;
        }
        return value;
    };
console.log(JSON.stringify(foo, censor)); // undefined 
```

**问题2：**

请注意以下代码：

```
var foo = {
    "foundation": "Mozilla",
    "model": "box",
    "week": 45,
    "transport": "car",
    "month": 7
},
    censor = function (key, value) {
        return 2;
    };
console.log(JSON.stringify(foo, censor)); // String: 2 
```

我认为我的代码应该在下面得到字符串，因为“如果您返回一个数字，则与该数字对应的字符串在添加到 JSON 字符串时用作属性的值。” （引自[https://developer.mozilla.org/En/Using_native_JSON](https://developer.mozilla.org/En/Using_native_JSON)）。

```
{"foundation":2,"model":2,"week":2,"transport":2,"month":2} 
```

但我只是得到一个字符串`2`。为什么？

**问题 3：**

如果我想得到`{"foundation":2,"model":2,"week":2,"transport":2,"month":2}`，我应该如何更改代码？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:53:58.090

1.  `foo`是一个对象 ( `{…}`)。对象不是字符串。您审查外部对象，因此它永远不会被递归到。
2.  因为你 return `2`for`foo`而不是递归进去
3.  测试它是字符串还是数字（而不是测试它是否不是字符串）然后返回 2

# zend-framework - 优化 Zend 布局

> ID：10125888
> 
> 赞同：2
> 
> 时间：2012-04-12T14:39:58.950
> 
> 标签：zend-framework

我正在使用 zend 框架中的布局。好像现在它看起来很丑，有很多很多代码。我想知道参考下面的代码。我是否有可能给它一个更清洁的方法。这是我的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
        <title>Administrative Panel</title>
        <link href="/css/main.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="/js/jquery.min.js"></script>
        <script type="text/javascript" src="/js/plugins/spinner/ui.spinner.js"></script>
        <script type="text/javascript" src="/js/plugins/spinner/jquery.mousewheel.js"></script>
        <script type="text/javascript" src="/js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="/js/plugins/forms/uniform.js"></script>
        <script type="text/javascript" src="/js/custom.js"></script>
    </head>
    <body>
        <!-- Left side content -->
        <div id="leftSide">
            <div class="logo"><a href="<?php echo $this->url(array(), 'admin-dashboard'); ?>"><img src="/images/logo.png" alt="" /></a></div>
            <!-- Divider Decorator -->
            <div class="sidebarSep mt0"></div>
            <!-- Search widget -->
            <form action="" class="sidebarSearch">
                <input type="text" name="search" placeholder="search…" id="ac" />
                <input type="submit" value="" />
            </form>
            <!-- Divider Decorator -->
            <div class="sidebarSep"></div>
            <!-- Statistics -->
            <div class="numStats">
                <ul>
                    <li><?php echo $this->itemCount; ?><span>Items</span></li>
                    <li><?php echo $this->categoryCount; ?><span>Categories</span></li>
                    <li class="last"><?php echo $this->userCount; ?><span>Users</span></li>
                </ul>
                <div class="clear"></div>
            </div>
            <!-- Divicer Decorator -->
            <div class="sidebarSep"></div>
            <!-- Sidebar buttons -->
            <a href="#" title="" class="sButton sBlue"><img src="/images/icons/sPlus.png" alt="" /><span>Add new item</span></a>
            <a href="#" title="" class="sButton sRed" style="margin-top: 12px;"><img src="/images/icons/sPlus.png" alt="" /><span>Add new user</span></a>
            <!-- Divider Decorator -->
            <div class="sidebarSep"></div>
            <!-- Left navigation -->
            <?php $this->navigation()->menu()->setPartial(array('partials/sidebar.phtml', 'admin')); echo $this->navigation()->menu()->render(); ?>
        </div>
        <!-- Right side -->
        <div id="rightSide">
            <!-- Top fixed navigation -->
            <?php echo $this->render('topnav.phtml') ?>
            <!-- Title area --> 
            <div class="titleArea"></div>
            <!-- Action Navigation -->
            <?php echo $this->placeholder('action-navigation'); ?>
            <!-- Main content wrapper -->
            <div class="wrapper">
                <?php echo $this->layout()->content ?>
            </div>
            <!-- Footer line -->
            <?php echo $this->render('footer.phtml') ?>
        </div>
        <div class="clear"></div>
    </body>
</html> 
```

我见过很多次，大多数人使用一些辅助方法来清理布局文件。来自zend框架自己的例子

```
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <?php echo $this->headTitle() ?>
    <?php echo $this->headScript() ?>
    <?php echo $this->headStyle() ?>
</head>
<body>
    <?php echo $this->render('header.phtml') ?>

    <div id="nav"><?php echo $this->placeholder('nav') ?></div>

    <div id="content"><?php echo $this->layout()->content ?></div>

    <?php echo $this->render('footer.phtml') ?>
</body>
</html> 
```

他们使用一些辅助方法，例如

```
$this->docType()
$this->headTitle()
$this->headScript()
$this->headStyle() 
```

这种方法对我来说看起来更干净。因为他们在同一份文档中对此并没有说太多。我想知道那个辅助方法的确切目的是什么？以及如何在我的布局文件中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:53:22.980

您将在手册中找到有关 View 助手和占位符的所有信息，尤其是在有关占位符具体实现的[本节中。](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.doctype)

请参阅[手册的这一部分](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.custom)来创建您自己的视图助手。自定义视图助手基本上允许您在 HTML 中使用`echo $this->myViewHelperName();`您的布局或您需要此内容的任何视图来呈现一些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:13:36.080

我使用的最有用的布局视图助手是管理样式和 javascript 资产的助手：

```
$this->headScript()
$this->headStyle() 
```

基本上，这些助手允许您通过调用从任何视图或布局管理您的样式表和 JavaScript 资产：

```
$this->headLink()->prependStylesheet($this->baseUrl('/media/css/shared.css')); 
```

或者

```
$this->headScript()->prependFile('https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js'); 
```

如果您的应用程序中的每个模块都有一个特定的样式表，这将非常有用。您可以从不同的视图调用`prependStylesheet`/ `prependFile`，布局中的最终 echo 调用将打印您加载的文件。

要打印出 html 头标签，请使用与示例布局中相同的代码：

```
<?php echo $this->headScript() ?>
<?php echo $this->headStyle() ?> 
```

请注意，有一个附加样式表的函数和附加样式表的函数：

```
$this->headLink()->prependStylesheet($this->baseUrl('/media/css/shared.css'));
$this->headLink()->appendStylesheet($this->baseUrl('/media/css/shared.css')); 
```

您加载样式表的顺序将决定资产的顺序。这一点尤其重要，因为通常您需要在任何其他插件之前加载 jquery javascript 资产。

我同意，ZF 的手册几乎没有提到这些助手的任何用法。（http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headstyle）

# c - 在普通的旧 C 中抛弃 volatile

> ID：10125890
> 
> 赞同：3
> 
> 时间：2012-04-12T14:40:01.870
> 
> 标签：c, casting

我正在寻找一种只抛弃波动性而不抛弃基础类型的方法。我知道`const_cast`在 C++ 中，我想知道在普通的旧 C 中是否有任何等效的方法可以做到这一点。

问题是我们有一些通过易失性指针访问的共享内存数据库，还有一个使用非易失性指针的 B-tree 库。（在查找过程中树将被锁定，因此编译器不必担心 B 树库中的易变性）。

我们还有大量自动生成的代码将两者联系起来，并从指针中丢弃易失性。不幸的是，今天有人在数据库中使用错误的结构定义了树节点，并且自动生成的转换完全隐藏了编译器的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:20:07.803

这有点棘手，但如果你只想从指针类型转换为指针类型，你可以在这里得到预处理器来帮助你。

```
#define cv_cast(TYPE,expr) (*((TYPE)(expr)) = *(expr),(TYPE)(expr)) 
```

> 用法：
> 
> ```
> typedef struct {
>   float f;
> } Foo;
> 
> typedef struct {
>   char b;
> } Bar;
> 
> void somefunction(void) {
>   Foo f; Bar b;
>   Foo volatile* foov = &f;
>   Foo* foo = 0;
>   Bar* bar = &b;
>   foo = cv_cast(Foo*,foov); // legal (no error, no warning)
>   foov = cv_cast(Foo*,foo); // legal (no error, no warning)
>   foo = cv_cast(Foo*,bar); // illegal (an error)
> } 
> ```

这里的基本技巧是我们在 from `Bar`to`Foo`中强制分配`cv_cast`from `Bar*`to `Foo*`。这是在`,`. 当且仅当您转换不兼容的指针类型时，它才会触发错误。

但是，请注意，`cv_cast`指向无效位置（例如`NULL`）的 ing 指针将导致段错误。

* * *

注意：作为参考（在评论中），这篇文章`nullfn`之前使用了一个不必要的辅助函数。有兴趣的可以在历史上查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:19:26.423

C 在类型安全方面并没有太多的东西，标准中没有任何内容可以帮助在编译时发现此类错误。任何显式类型转换都可能完全抛弃类型并留下未定义的行为。

如果您担心可能会出现此类类型转换，我想您总是可以制作某种宏来使此类错误更难编写。

```
#define PTR_CONST_CAST(type, ptr) ((type*)ptr)

volatile int* const ptr_original;
int* ptr_new;

ptr_new = PTR_CONST_CAST(int, ptr_original); 
/* Note: here I am casting away volatile and const because... */ 
```

这个宏根本不添加任何类型安全性。但至少它让程序员意识到可能存在危险的类型转换，希望让他们在编写错误之前三思而后行。说明为什么在特定情况下这样做是安全的，也是一种很好的做法。

但是，清除所有不正确的强制转换的唯一真正严肃的方法是首先将编译器警告调到最大。在多个编译器上编译它。然后还通过[静态分析工具](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#C.2FC.2B.2B)运行代码，该工具专用于发现编译器可以随意忽略的内容。

# iphone - 如何以编程方式从通讯录中获取联系人信息

> ID：10125891
> 
> 赞同：0
> 
> 时间：2012-04-12T14:40:04.540
> 
> 标签：iphone, ios, ios5

我是 iphone 开发的新手。我正在开发应用程序，如果我需要以编程方式从通讯录中获取联系方式，例如名字、电子邮件 ID、电话号码。这些值要存储在数组中，我做得很好，但问题是即使添加了空联系人也意味着如果有人只有姓名而没有电子邮件 ID，那么如何检查不添加的空值。这是我正在使用的代码。

```
ABRecordRef ref;
ABAddressBookRef m_addressbook = ABAddressBookCreate();

CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);
NSLog(@" n people count values %ld",nPeople);

for (int i=0; i<nPeople; i++)
{ 
    AFContacts *contactOfAPerson = [[AFContacts alloc] init];
    ref = CFArrayGetValueAtIndex(allPeople,i);
    [contactOfAPerson setEmail:(NSString *)ABRecordCopyValue(ref, kABPersonEmailProperty)];
    [contactOfAPerson setFirstName:(NSString *)ABRecordCopyValue(ref, kABPersonFirstNameProperty)];
    //[contactOfAPerson setPhoneNumber:(NSString *)ABRecordCopyValue(ref, kABPersonPhoneMobileLabel)];
    [contactList addObject:contactOfAPerson];
    [contactOfAPerson release];
}
CFRelease(ref);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:36:12.913

如果我理解正确，您不想将没有电子邮件地址的联系人添加到数组中。您可以尝试使用 if 条件将联系人添加到数组

```
ABMultiValueRef emailAddresses = ABRecordCopyValue(ref, kABPersonEmailProperty);

if (ABMultiValueGetCount(emailAddresses) > 0)
{
   [contactOfAPerson setEmail:(NSString *)ABRecordCopyValue(ref, kABPersonEmailProperty)];
   [contactOfAPerson setFirstName:(NSString *)ABRecordCopyValue(ref, kABPersonFirstNameProperty)];
   [contactList addObject:contactOfAPerson];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T07:31:45.957

结帐这个最好导入联系人及其所有详细信息

[http://iphoneappcode.blogspot.in/2011/05/abpeoplepickernavigationcontroller.html](http://iphoneappcode.blogspot.in/2011/05/abpeoplepickernavigationcontroller.html)

# asp.net - 如何使用 Unity 注入消息检查器？

> ID：10125892
> 
> 赞同：1
> 
> 时间：2012-04-12T14:40:05.867
> 
> 标签：asp.net, wcf, dependency-injection, unity-container, idispatchmessageinspector

我目前正在使用 Unity 作为 ASP MVC 3 应用程序的 DI 容器。由于我必须将一些功能公开为 Web 服务，因此我已经编写了一些 WCF 服务。这工作得很好。为了保护网络服务，我想使用消息检查器的概念。到目前为止，这也很有效，但现在我想将一些服务类的实例注入到消息检查器中，以便调用它的功能（例如检查凭据）。不幸的是，我真的不知道如何注入服务。

我已经阅读了 Unity.WCF 包，但不太确定这是否会从一开始就起作用，或者分别在哪里调整这种方法。

有谁知道如何做到这一点？

# actionscript-3 - AS3 和 Movieclip 动态调整大小手柄

> ID：10125900
> 
> 赞同：0
> 
> 时间：2012-04-12T14:40:21.823
> 
> 标签：actionscript-3, flash, actionscript

我希望在 Flash AS3 中为影片剪辑添加调整大小句柄，以便用户可以单击一个角并调整影片剪辑的大小。有没有人有任何示例代码或我可以遵循的示例？我似乎找不到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:54:10.447

我认为您可以使用senocular 提供的不错的[Transform Tool 2作为初学者。](http://www.senocular.com/?entry=799)

这很容易实现。将其包含在容器影片剪辑中，并且相同的工具将在该容器内的兄弟姐妹上可用。请参阅源代码中的示例。

有一些错误，但这是你现在最好的选择。

其他包括：

1.  [转换管理器](http://blog.ryantan.net/2010/08/free-transform-manager/)
2.  [从相当的转换工具](http://www.quietless.com/kitchen/transform-tool-drag-scale-and-rotate-at-runtime/)

# excel - 运行时错误 13

> ID：10125901
> 
> 赞同：0
> 
> 时间：2012-04-12T14:40:22.150
> 
> 标签：excel, vba

我在使用一些非常简单的代码时遇到了一些麻烦，我已经阅读了多个帖子和论坛，但似乎无法找到问题：

```
Sub ownership()
 Dim row, column, x, y As Integer
 For row = 2 To 42
  For column = 4 To 18
   For x = 2 To 16
    For y = 5 To 45
     If ActiveWorkbook.Sheets("orka").Cells(3, row).Text = Left(ActiveWorkbook.Sheets("values").Cells(x, y).Text, ActiveWorkbook.Sheets("orka").Cells(2, row).Value) Then ActiveWorkbook.Sheets("orka").Cells(column, row).Text = "X"
    Next
   Next
  Next
 Next
End Sub 
```

十分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:29:43.557

那是因为`.Text`它是一个只读属性。改为使用`.Value`。你不能说

`Range("A1").Text = "Blah Blah"`

但是，您可以这样做

`MsgBox Range("A1").Text`

尝试这个

```
Option Explicit

Sub ownership()
    Dim row  As Integer, column  As Integer, x  As Integer, y As Integer

    For row = 2 To 42
        For column = 4 To 18
            For x = 2 To 16
                For y = 5 To 45
                    If ActiveWorkbook.Sheets("orka").Cells(3, row).Value = _
                    Left(ActiveWorkbook.Sheets("values").Cells(x, y).Text, _
                    ActiveWorkbook.Sheets("orka").Cells(2, row).Value) Then _
                    ActiveWorkbook.Sheets("orka").Cells(column, row).Value = "X"
                Next
            Next
        Next
    Next
End Sub 
```

同样在 VBA 中，当您将变量声明为

```
Dim row, column, x, y As Integer 
```

然后在这种情况下只有最后一个变量`y`将被声明为 Integer ，其余的将被声明为`Variant`. 正确的方法是像我在上面所做的那样声明它。

高温高压

# groovy - Groovy - 覆盖单个实例的 invokeMethod

> ID：10125903
> 
> 赞同：5
> 
> 时间：2012-04-12T14:40:27.500
> 
> 标签：groovy, metaprogramming

我有一个 java 对象的实例，比方说一个名为 myList 的 ArrayList 实例。

对于这个特定的实例，我想重写 invokeMethod 方法以（比如说）记录该方法被调用。

我可以做这样的事情：

```
myList.metaclass.invokeMethod { name, args -> 

   println "Called ${name} with ${args}"
   whatGoesHere.invokeMethod(name, args)

} 
```

注意闭包的第二行——我如何调用原始的 invokeMethod 方法？我这样做对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:45:18.330

到原始方法可能有更短的路线，但这应该可行：

```
def myList = [ 1, 2, 3 ]

myList.metaClass.invokeMethod { name, args -> 
   println "Called ${name} with ${args}"
   delegate.class.metaClass.getMetaMethod( name, args )?.invoke( delegate, args )
}

myList.sum() 
```

# java - 我将如何使用工具包获取图像来检索裁剪的图像？

> ID：10125910
> 
> 赞同：1
> 
> 时间：2012-04-12T14:40:54.697
> 
> 标签：java, eclipse

```
image = ImageIO.read(new File("C:/Graphics/src/name2.jpg"));         

ImageFilter filter = new CropImageFilter(0, 0, 250, 250);
    ImageProducer producer = new FilteredImageSource(image.getSource(), filter);

Image resultImage = Toolkit.getDefaultToolkit().createImage(
    producer);
ImageIO.write(resultImage, "jpg", 
    new File("C:/Graphics/src/name7.jpg"));  //not allowing me 
```

//这是行显示错误为：

```
The method write(RenderedImage, String, File) in the type ImageIO is not 
    applicable for the arguments (Image, String, File) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:57:24.490

请参阅[`BufferedImage.html#getSubimage(x,y,,w,h)`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getSubimage%28int,%20int,%20int,%20int%29)子图像。

要获得`BufferedImage`，请使用[`ImageIO.read(File/InputStream/URL)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)。

* * *

```
The method write(RenderedImage, String, File) in the type ImageIO is not 
    applicable for the arguments (Image, String, File) 
```

`image`显然声明为，将`Image`其更改为：

```
BufferedImage image = ImageIO.read(new File("C:/Graphics/src/name2.jpg")); 
```

# mysql - 如何通过一个查询检查两列中的唯一值？

> ID：10125913
> 
> 赞同：0
> 
> 时间：2012-04-12T14:41:00.370
> 
> 标签：mysql, pdo

我有一个 MySQL 表，其中两个字段应该是唯一的。随着新数据的提供，我需要检查它是否已经存在，因此想做类似的事情（包括 PDO 参数）：

```
SELECT COUNT(foo),COUNT(bar) 
FROM `mytable` 
WHERE foo=:foo 
OR bar=:bar; 
```

这里的问题是，如果两个值都返回相同的计数，那么如果该计数为 1，我不知道哪一列包含匹配值。显然我可以将其拆分为 2 个查询，但是有没有一种更简洁的方法可以同时检查这两个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:43:57.023

也许是这样的：

```
SELECT
    SUM(CASE WHEN foo='foo' THEN 1 ELSE 0 END) AS FooCount,
    SUM(CASE WHEN bar='bar' THEN 1 ELSE 0 END) AS BarCount
FROM
    `mytable` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:45:57.243

不是真的，但你可以像这样伪造它：

```
SELECT COUNT(foo) FROM `mytable` WHERE foo=:foo
UNION
SELECT COUNT(bar) FROM `mytable` WHERE bar=:bar; 
```

或者

```
SELECT (SELECT COUNT(foo) FROM `mytable` WHERE foo=:foo) AS `foo`, (SELECT COUNT(bar) FROM `mytable` WHERE bar=:bar) AS `bar`; 
```

或者

```
SELECT SUM(IF(foo=:foo, 1, 0)) as foo, SUM(IF(bar=:bar, 1, 0)) as bar FROM `mytable` 
```

在这三者之间，您需要进行测试，看看哪个表现最好。

# database - 哪个数据库使用这种文件和目录结构？

> ID：10125920
> 
> 赞同：0
> 
> 时间：2012-04-12T14:41:25.643
> 
> 标签：database, database-design

我正在尝试从我不知道且具有以下结构的数据库中读取数据：

```
cur
|
|
---- FILE ----
|             rs_pers.dat
|             rs_pers.fmt
|             rs_pers.idx
|             ..............
|             WS_FTP.LOG
|
---- red7-----
|             77008
|             .........
|
---- sys------
|             db.DAT
|             db.idx
|             ........
|
|
cee_ap
name.idx
name.dat
...........
isam.log
tmpout3384.txt 
```

有谁知道是哪个数据库以及如何读取它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:02:09.147

几乎可以肯定它是用 TODAY 编程语言创建的（它本身是由 TodaySystems 创建的）。TODAY 是一种非常古老（20 年？）的语言，似乎没有被广泛使用，尽管它似乎构成了 4GL BuilderProfessional 开发环境的核心。

在回答“我如何阅读它？”时，您应该能够在 .FMT 文件中找到文件格式，然后根据该格式从 .DAT（这是一个平面文件）中读取。

我最近自己遇到了一个 TODAY 应用程序，并且很想找到它的任何文档！

JC

# c++ - 在非类成员函数的参数中传递类成员函数

> ID：10125922
> 
> 赞同：0
> 
> 时间：2012-04-12T14:41:27.997
> 
> 标签：c++, parameter-passing

如何将类成员函数传递给非类成员函数的参数？我收到以下编译错误：

```
error: argument of type ‘void (MyNamespace::MyClass::)(int*)’ does not match ‘void (*)(int*)’ 
```

**图书馆.h**

```
typedef void (*testCallback)(int* iParam);
void UsingTheFoo(testCallback Callback); 
```

**图书馆.cpp**

```
void UsingTheFoo(testCallback Callback)
{
  int *p_int = new int;
  *p_int = 5;
  Callback(p_int);
} 
```

**我的类.cpp**

```
namespace MyNamespace
{

    void MyClass::fooCB(int* a)
    {
        printf("hey! %d\n", *a);
    }

    void MyClass::testo()
    {
        UsingTheFoo(fooCB);
    }

} // MyNamespace 
```

我无法更改“库”中的代码，我需要在 MyClass 成员函数中使用“UsingTheFoo”。我知道我的方法是错误的，我搜索并发现了类似的问题，但无法理解（班次结束时脑残:)）其中任何一个都完全适应我的问题。

我已经读过： http: [//www.parashift.com/c++-faq-lite/pointers-to-members.html](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:45:45.893

将您想要作为回调传递的方法设为静态。您遇到此错误是因为所有方法都有隐式的第一个参数 - 指向对象的指针**this**，因此它们的原型与回调不对应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:46:33.043

成员函数不是常规函数。
将其视为具有签名 (className *pthis,...) 的函数，其中 .. 是您会想到的签名。您仍然可以这样做，但您需要 std/boost::bind 和一个函数对象而不是回调。或者正如其他人发布的那样，您可以将其设为静态。

所以也许你可能想要类似的东西

```
typedef function<void (int*)> TCallback
void UsingTheFoo(TCallback, Callback);

MyClass class_object 
```

带回调

```
TCallback cb = bind(std::ref(class_object),MyClass::fooCB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:45:57.957

`fooCB`，在您的示例中，必须是静态类成员：

```
class MyClass {
public:
    static void MyClass::fooCB(int* a);
    ...
} 
```

# django - 预缓存 Django REST 视图

> ID：10125928
> 
> 赞同：0
> 
> 时间：2012-04-12T14:41:50.773
> 
> 标签：django, web-services, rest, django-views, django-cache

我有一个用 django 实现的 REST-ful 服务，对于访问的每个资源，我想缓存可能被访问的相关数据。

例如 ressource`http://www.example.com/publication/1280`会给出 xml 响应：

```
<publication xmlns="http://www.example.com" xmlns:atom="http://www.w3.org/2005/atom">
<abstract>None</abstract>
<owner>
    <atom:link rel="owner" type="application/xml" href="http://www.example.com/user/1">ckpuser</atom:link>
</owner>
<authors>
<author>
   <atom:link rel="author" type="application/xml" href="http://www.example.com/author/564">P. Almquist</atom:link>
</author>
</authors>
<comments></comments>
<tags></tags>
<keywords></keywords>
<referencematerials></referencematerials>
<peerreviews></peerreviews>
<fields>
<howpublished>RFC 1349 (Proposed Standard)</howpublished>
<url>http://www.ietf.org/rfc/rfc1349.txt</url>
</fields>
</publication> 
```

然后我想预先缓存与资源`http://www.example.com/user/1`和`http://www.example.com/author/564`.

由于在 Web 服务中给出的响应是一种数据结构，我认为缓存整个响应比查询集更好。如果我们缓存查询集，那么每次访问资源时我们都会在模板渲染中浪费时间。

这是一个好方法吗？我错过了什么吗？

如果这种方法是正确的，那么我如何使用 django 提供的中间件预先缓存视图

`'django.middleware.cache.UpdateCacheMiddleware'`

和

`'django.middleware.cache.FetchFromCacheMiddleware'`?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:29:29.447

试试 Django 的[per-view cache](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#the-per-view-cache)。

基本上，它使用 URL（和其他一些东西）作为缓存键，实现如下：

```
from django.views.decorators.cache import cache_page

@cache_page(60 * 15) # cache for 15 minutes
def my_view(request):
... 
```

这将缓存视图的 XML 输出，正如您所怀疑的那样，在缓存有效时检索它比仅缓存查询集需要更少的资源。

缓存中间件将缓存整个站点`django.middleware.cache.UpdateCacheMiddleware`，`django.middleware.cache.FetchFromCacheMiddleware`这很可能不是您想要的。

# windows - 实现用于备份目的的旋转路径？

> ID：10125931
> 
> 赞同：0
> 
> 时间：2012-04-12T14:41:57.183
> 
> 标签：windows, command-line, batch-file

我想每天运行一次映像备份（在 Windows 上使用命令行）。我想为过去三天​​的每一天保留一张图像，所以我必须在每次备份运行时在 3 条路径之间轮换，例如

```
c:\image0.ext // encode as 0, see text below
c:\image1.ext // encode as 1
c:\image2.ext // encode as 2 
```

我想在文本文件中写入 0、1 或 2，以某种方式读取它的值，然后做某事。like (number+1) mod 2，执行备份，将新的数字写入文本文件。然后，我将使用 if 语句将每个数字从 0 到 2 链接到路径。有更好/更简单的方法吗？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:35:28.907

由于 imageX.ext 是一个文件，我假设它是类似于 zip 文件的数据的一些压缩存档。每次被新版本替换时，修改后的日期都会更新，因此您不需要单独的文件来跟踪最新的图像。您可以使用按日期排序的 DIR 来获取最新的图像（列出的最后一张）。

```
@echo off
for /f "delims=" %%F in ('dir /b /od c:\image?.ext') do set lastImage=%%F
set /a nextImage=(%lastimage:~-5,1%+1)%%3
set nextImage="c:\image%nextImage%.ext" 
```

如果有人在您拍摄最后一张图像后创建了另一个与您的文件掩码匹配的文件，则此算法将中断。

# java - 如何使用 UDP 将结构从 C 应用程序发送到 Java 应用程序

> ID：10125933
> 
> 赞同：1
> 
> 时间：2012-04-12T14:42:01.830
> 
> 标签：java, c, serialization, udp, structure

我实际上想通过 UDP 将结构从 C 应用程序发送到 java 应用程序。

结构看起来像这样：

```
typedef struct {
type1 liste1;
type2 liste2;
type3 liste3;
type4 liste4;
}liste; 
```

type1,2,3,4 也是包含其他结构的结构。

现在，我只是发送这样的结构（liste 是我的结构）：

```
sendto(socketOut, &(liste), sizeof(liste), 0, (SOCKADDR *) &(recvAddrAck),sizeof(recvAddrAck)); 
```

我在java应用程序上得到了这样的UDP：

```
DatagramSocket socket = new DatagramSocket(SERVERPORT);
byte[] buf = new byte[1500];
DatagramPacket packet = new DatagramPacket(buf, buf.length);
while (true) {
socket.receive(packet);
data = packet.getData();
} 
```

所以，我的问题是，如何解码数据？我是 UDP 协议的新手，但是我和我的朋友 Google 做了一些研究，我发现了一些东西，比如 C 端的 htons/htonl/... 和 java 的 ByteArrayInputStream/DataInputStream ...边。但我真的不明白如何以及何时必须使用这些东西，尤其是对于 java 端。

希望我的问题可以理解

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:00:14.667

您将需要以某种方式进行序列化。手动，通过某种文本格式或 XML，或者如果您想要更健壮的东西，请查看双方的 ASN.1 / BER 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:57:25.413

不确定是否理解，但您是否看过 DatagramPacket ？

就像是

```
DatagramPacket answerPacket = null;
  try { 
    byte[] buffer = new byte[REC_BUFFER_SIZE];
    answerPacket = new DatagramPacket(buffer, REC_BUFFER_SIZE);
    yourSocket.receive(answerPacket);
    log.debug("Received UDP Packet from " + answerPacket.getAddress().getHostAddress());
  } catch (SocketTimeoutException e) {
    log.debug("No Answer - Connection to DatagramSocket timed out");
  }

if (answerPacket != null && answerPacket.getLength() != 0) {
    String result = new String(answerPacket.getData());
    result = result.trim(); // remove leading and trailing whitespaces...
} 
```

可能会做你需要的，但这意味着使用自定义格式。

# java - Java 返回值（在 try/catch 子句中）

> ID：10125941
> 
> 赞同：6
> 
> 时间：2012-04-12T14:42:24.677
> 
> 标签：java, try-catch, return

每个人。我有一个关于java中返回值的菜鸟问题。这是我的代码。

```
@Override
public long addDrugTreatment(long id, String diagnosis, String drug,
        float dosage) throws PatientNotFoundExn {
    try {
        Patient patient = patientDAO.getPatientByDbId(id);
        long tid = patient.addDrugTreatment(diagnosis, drug, dosage);

        Connection treatmentConn = treatmentConnFactory.createConnection();
        Session session = treatmentConn.createSession(true, Session.AUTO_ACKNOWLEDGE);
        MessageProducer producer = session.createProducer(treatmentTopic);

        TreatmentDto treatment = null;
        ObjectMessage message = session.createObjectMessage();
        message.setObject(treatment);
        producer.send(message);

        return tid;
    } catch (PatientExn e) {
        throw new PatientNotFoundExn(e.toString());
    } catch (JMSException e) {
        logger.severe("JMS Error: " + e);
    }
} 
```

Eclipse 报告“此方法必须返回 long 类型的结果”错误。然而，我确实在 try 块中返回了 tid；eclipse 建议在 try/catch 块之后添加一个返回值，这会破坏逻辑。你能告诉我这里有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T14:43:20.080

当 a`JMSException`被抛出时，返回值是未定义的。当抛出异常时，控制立即传递给异常处理程序。在这种情况下，您记录错误。然后控制从该点继续进行，直到函数结束而不返回值。你要么需要返回一个值，要么抛出一个异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:44:44.767

在 Java（或任何其他类 C 语言）中，所有控制路径都必须返回一个值。

如果在内部引发异常，`try`则`return`不会执行，因此您不会在所有可能的控制路径上返回值。

您必须：

1.  在或`return`之后添加`try-catch`
2.  `return`在每个内部添加一个`catch`或
3.  加`finally`一个`return`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:44:53.350

```
catch (JMSException e) {
        logger.severe("JMS Error: " + e);
        //You need to throw exception here or return something
        //better would be throw new Exception("JMS Error: " + e);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:46:54.857

有一条通过您的代码的路由，这意味着没有定义返回值，这是一个错误，因为您的方法说您将始终返回一个 long。

如果代码抛出 JMSException，您是否期望返回一个值？如果是这样，也许在 try 之外使用默认值声明 tld 。

否则您真的要重新抛出 JMSException 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:47:40.623

这里的问题是，对于方法，无论代码采用哪条路径，如果方法的执行完成，它必须返回指定的类型。所以你在这段代码中的问题是第二个问题。第一个 catch 抛出一个错误，因此该方法没有完成执行，因此不需要 return 语句。但是，在您的第二次捕获中，您只需打印一个错误，因此该方法将执行到最后，因此必须返回一个 long。解决这个问题的方法是为您的代码在第二次捕获中返回适当的 long，或者抛出 JMSException 并在调用此方法的代码中处理它。请注意，如果您抛出 catch，则必须将 throw 添加到您的方法声明中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:47:56.513

让我们想象一个 JMSException 被抛出：

```
@Override
public long addDrugTreatment(long id, String diagnosis, String drug,
        float dosage) throws PatientNotFoundExn {
    try {
        Patient patient = patientDAO.getPatientByDbId(id);
        long tid = patient.addDrugTreatment(diagnosis, drug, dosage);

        Connection treatmentConn = treatmentConnFactory.createConnection();
        //JMS thrown above. No code from here gets executed
    } catch (PatientExn e) {
        throw new PatientNotFoundExn(e.toString());
    } catch (JMSException e) {
        logger.severe("JMS Error: " + e);
    }
} 
```

在上面，如果抛出 JMSException，则代码的任何部分都不会返回 long。

# r - 在 R 中创建多级表

> ID：10125942
> 
> 赞同：1
> 
> 时间：2012-04-12T14:42:32.463
> 
> 标签：r

我最近开始使用**R**。我想对 2x2x2 表进行对数线性分析。我所拥有的只是类别和频率。如何将这些数据输入**R**？

我知道这个函数`table()`可以用数据制作列联表，问题是，我已经有了列联表。现在的问题是如何在**R**中正确表示它。

到目前为止，我有下表：

```
>g1
   c1 c2 c1 c2
a1 10 20 50 20
a2  5 40 30 25
> 
```

现在，在 c1 和 c2 上方应该有 b1 和 b2。这显然不是分析的正确格式，因为不包括 b1 和 b2。我希望这个问题不是愚蠢的，但我在网上找不到一个好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:03:19.560

您可以更改`dim`当前表的属性：

```
g1 <- matrix(1:8,nrow=2)
g1
     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8
dim(g1)<-c(2,2,2)
g1
, , 1

     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    6    8 
```

# wpf - 阻止某些对象缩放

> ID：10125952
> 
> 赞同：0
> 
> 时间：2012-04-12T14:42:54.000
> 
> 标签：wpf, animation, scaletransform

我有一个 WPF 画布，上面有一些对象，我对它应用了 ScaleTransform 动画（缩放）。正如预期的那样，所有对象都随画布缩放。

即使某些对象是画布的子对象，它们是否可能保持其大小？

到目前为止，我唯一的想法是另一个在相反方向运行的缩放动画以再次缩放到对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:09:56.080

简单地说，没有。ScaleTransform 将捕获一个元素，以及它的所有子元素。您只能采用您建议的技巧。

# c# - 如何为 SQL Server 和 SQL Server Compact 编写相同的 ado.net 代码？

> ID：10125957
> 
> 赞同：2
> 
> 时间：2012-04-12T14:43:13.163
> 
> 标签：c#, .net, sql-server, sql-server-ce

我正在开发一个应用程序。客户希望应用程序在两个数据库上运行，SQL Server Compact Edition 和 SQL Server。

现在问题出在数据集中的 Visual Studio 中，您必须为不同的数据库编程两次。

这将使我的工作加倍。有什么方法可以使用相同的数据集和数据表代码与这两个对象进行交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:49:45.200

通过使用`DbProviderFactories`（参见[http://msdn.microsoft.com/en-us/library/wda6c36e.aspx](http://msdn.microsoft.com/en-us/library/wda6c36e.aspx)），可以在连接字符串中指定提供者并编写适用于多个提供者（不同数据库）的代码。

然后确保您的代码使用诸如 and 之类的基类，而不是诸如and`DbConnection`之`DbDataReader`类的提供者特定类。`SqlConnection``SqlDataReader`

# android - Twitter API 在 Android 中不起作用

> ID：10125959
> 
> 赞同：0
> 
> 时间：2012-04-12T14:43:24.167
> 
> 标签：android, twitter, twitter-oauth

我在 android 中使用 Twitter4j 库进行 twitter 扩展，它工作正常，但从昨天开始它显示 OAthNoAuthorizedException 错误，我不知道为什么。错误日志是

```
E/check.com.twitter.OAuthRequestTokenTask(341): Error during OAUth retrieve request token
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): oauth.signpost.exception.OAuthNotAuthorizedException: Authorization failed (server replied with a 401). This can happen if the consumer key was not correct or the signatures did not match.
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:239)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at check.com.twitter.OAuthRequestTokenTask.doInBackground(OAuthRequestTokenTask.java:55)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341):     at check.com.twitter.OAuthRequestTokenTask.doInBackground(OAuthRequestTokenTask.java:1)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-12 20:01:29.743: E/check.com.twitter.OAuthRequestTokenTask(341): at java.lang.Thread.run(Thread.java:1096) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:07:19.980

我认为这个 API 版本已经过期，如果有新版本发布，请尝试。

# json.net - C# winform：序列化/反序列化来自 REST 服务的 JSON 数据以在应用程序中使用

> ID：10125962
> 
> 赞同：0
> 
> 时间：2012-04-12T14:43:29.013
> 
> 标签：json.net

我有网格视图并将其绑定到从基于 REST 的 Web 服务调用的数据。REST 服务以 JSON 格式提供它，那么我如何反序列化并用于我的网格？

这是我拥有的大部分代码，

```
public ICollection<Employee> GetEmployees()
    {
        var request = HttpWebRequest.Create(GetEndPointAddress("GetEmployeeService"));
        var response = request.GetResponse();
        var stream = response.GetResponseStream();
        var serializer = new DataContractSerializer(typeof(ICollection<Employee>));
        var employees = serializer.ReadObject(stream) as ICollection<Employee>;
        response.Close();
        return employees;
    }

public Uri GetServiceBaseAddress
    {
        get
        {
            return new Uri("http://localhost/Employeeservices/api");

        }
    }

private Uri GetEndPointAddress(string relativeAddress)
    {
        return new Uri(GetServiceBaseAddress.ToString() + "/" + relativeAddress);
    } 
```

我收到以下错误：

反序列化 System.Collections.Generic.ICollection`1[[EmployeeApp.Models.Employee, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 类型的对象时出错。根级别的数据无效。线

另外，如果我对这些数据中的任何一个进行更改，如何将数据发布回服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:59:39.317

问题是您正在使用 DataContractSerializer，它是一个 XML 序列化程序。您不能使用 XML 序列化程序并期望它反序列化 JSON 数据，因为它们是两种完全不同的数据格式。

首先，考虑使用 DataContractJsonSerializer 是否适合您。我的猜测是它不是，因为使用 DCJS 有它自己的一组要求、约束和术语，你很可能不熟悉，使用或熟悉的灵活性很小，或者只是矫枉过正。要了解这是否是一个选项，请查看[JSON API 参考](http://ttp://msdn.microsoft.com/en-us/library/bb412187.aspx)和[独立的 JSON 序列化](http://msdn.microsoft.com/en-us/library/bb412187.aspx)示例。

我最好的建议是使用 Json .NET 框架。请参阅[http://json.codeplex.com/](http://json.codeplex.com/)以了解您可以使用它做什么——这可能是您开始使用 .NET 和 JSON 的最简单方法。

# javascript - jquery弹出窗口不会在按键时关闭

> ID：10125964
> 
> 赞同：0
> 
> 时间：2012-04-12T14:43:37.660
> 
> 标签：javascript, jquery, keypress, popupwindow

我试图修改用于在我正在开发的食谱网站的弹出窗口中打开 div 的一段 jquery

我能够对其进行修改以满足我的需要，但在尝试允许关闭按键时遇到了障碍

我现在拥有的代码只允许我关闭按键上的第一个弹出窗口，当我尝试对其他弹出窗口执行相同操作时，它只会淡出背景并使弹出窗口漂浮在内容容器上。这是代码：

查询：

```
//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup($contact_selector){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        }).fadeIn("slow");

        $contact_selector.fadeIn("slow");

        popupStatus = 1;
    }
}
//disabling popup with jQuery magic!
function disablePopup($contact_selector){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $contact_selector.fadeOut("slow");
        popupStatus = 0;
    }
}

//centering popup
function centerPopup($contact_selector){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $contact_selector.css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){   
    //LOADING POPUP
    //Click the button event!
    $("#button1").click(function(){
        //centering with css
        centerPopup($('#popupContact1'));
        //load popup
        loadPopup($('#popupContact1'));
    });
    $("#button2").click(function(){
        //centering with css
        centerPopup($('#popupContact2'));
        //load popup
        loadPopup($('#popupContact2'));
    });
    $("#button3").click(function(){
        //centering with css
        centerPopup($('#popupContact3'));
        //load popup
        loadPopup($('#popupContact3'));
    });
    $("#button4").click(function(){
        //centering with css
        centerPopup($('#popupContact4'));
        //load popup
        loadPopup($('#popupContact4'));
    }); 
    $("#button5").click(function(){
        //centering with css
        centerPopup($('#popupContact5'));
        //load popup
        loadPopup($('#popupContact5'));
    });
    $("#button6").click(function(){
        //centering with css
        centerPopup($('#popupContact6'));
        //load popup
        loadPopup($('#popupContact6'));
    });                 
    //CLOSING POPUP
    //Click the x event!
    $("#popupContactClose1").click(function(){
    disablePopup($('#popupContact1'));
});
    $("#popupContactClose2").click(function(){
    disablePopup($('#popupContact2'));
});
    $("#popupContactClose3").click(function(){
    disablePopup($('#popupContact3'));
});
    $("#popupContactClose4").click(function(){
    disablePopup($('#popupContact4'));
});
    $("#popupContactClose5").click(function(){
    disablePopup($('#popupContact5'));
});
    $("#popupContactClose6").click(function(){
    disablePopup($('#popupContact6'));
});

    //Press Escape event!
    $(document).keyup(function(e) {
    if( e.which == 27 ){
    disablePopup($('#popupContact1'));

    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact2'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact3'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact4'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact5'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact6'));
    }
});

}); 
```

CSS：

```
table {  
border-collapse:separate;  
border-spacing:0pt;  
}  
caption, th, td {  
font-weight:normal;  
text-align:left;  
}  
blockquote:before, blockquote:after, q:before, q:after {  
content:"";  
}  
blockquote, q {  
quotes:"" "";  
}  

br.both{  
clear:both;  
}  
#backgroundPopup{  
display:none;  
position:fixed;  
_position:absolute; /* hack for internet explorer 6*/  
height:100%;  
width:100%;  
top:0;  
left:0;  
background:#000000;  
border:1px solid #cecece;  
z-index:1;  
}  
#popupContact1, #popupContact2, #popupContact3, #popupContact4, #popupContact5, #popupContact6{  
display:none;  
position:fixed;  
_position:absolute; /* hack for internet explorer 6*/  
height:384px;  
width:408px;  
background:#FFFFFF;  
border:2px solid #cecece;  
z-index:2;  
padding:12px;  
font-size:13px;  
}  
#popupContact1 h1, #popupContact2 h1, #popupContact3 h1, #popupContact4 h1, #popupContact5 h1, #popupContact6 h1{  
text-align:left;  
color:#6FA5FD;  
font-size:22px;  
font-weight:700;  
border-bottom:1px dotted #D3D3D3;  
padding-bottom:2px;  
margin-bottom:20px;  
}  
#popupContactClose1, #popupContactClose2, #popupContactClose3,#popupContactClose4,#popupContactClose5,#popupContactClose6,{  
font-size:14px;  
line-height:14px;  
right:6px;  
top:4px;  
position:absolute;  
color:#6fa5fd;  
font-weight:700;  
display:block;  
cursor:pointer;
}  
#button6,#button5,#button4,#button3,#button2,#button1, {  
text-align:left;  
cursor:pointer;
} 
```

django的html模板：

```
{% block content %}
{% autopaginate recipe_list 6 %}
    <div id="recipe_cont">
    {% for recipe in recipe_list %}
    <div id="recipe">
        <img src="{{ STATIC_URL }}chicknbraw.jpg" alt="" height="30" width="30" style=display:"inline"; />
        <div id="button{{ forloop.counter }}"<a type="submit" value="View" >link</a></div>          
        <h4>{{ recipe.name }}</h4></a>
        <h5>{{ recipe.author}}</h5>
        <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>
        <h6><a href="/addrecipe/{{ recipe.id }}">Add Recipe</a>
        <a href="/removerecipe/{{ recipe.id }}">Remove Recipe</a></h6>
        <div id="popupContact{{ forloop.counter }}">
            <a id="popupContactClose{{ forloop.counter }}" style="cursor:pointer;float:right;">x</a>
            <h1>{{ recipe.name }}</h1>
            <h3>{{ recipe.author }}</h3>
            <p id="contactArea">
                Ingredients: {{ recipe.ingredients }}
                <br/><br/>
                Steps: {{ recipe.steps }}
            </p>
        </div>
        <div id="backgroundPopup"></div>        
    </div>
    {% endfor %}
    </div>
    <div id="col2-footer">
    {% paginate %}
    <p id="recipe_order_text"> order by: <a href="/account/ordered/name">abc</a>|<a href="/account/ordered/date">date</a> 
    </div>

{% endblock %} 
```

我认为给我错误的代码如下：

```
//Press Escape event!
    $(document).keyup(function(e) {
    if( e.which == 27 ){
    disablePopup($('#popupContact1'));

    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact2'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact3'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact4'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact5'));
    }
});
    $(document).keyup(function(e){
    if(e.which==27){
        disablePopup($('#popupContact6'));
    }
});

}); 
```

我注意到最后一点代码取决于顺序，第一个 $(document) 调用是唯一正常运行的调用。所以按照目前的顺序

```
//Press Escape event!
    $(document).keyup(function(e) {
    if( e.which == 27 ){
    disablePopup($('#popupContact1'));

    }
}); 
```

正确激活，但如果这是针对 #popupContact2 那么 #popupContact2 div 将正常工作。

谢谢大家，如果这是代码过载，我很抱歉——我只是想确保我是彻底的，没有遗漏任何细节。

最好的，

零食鱼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:12:20.867

由于“keyup”本身并不特定于打开哪个对话框，因此您可以给每个对话框元素一个类（如“popup”），然后：

```
disablePopup($('.popup')); 
```

从（单个）“keyup”处理程序内部。

# inheritance - 最佳 JAXB XJC 代码生成和最佳 XML 模式与继承

> ID：10125966
> 
> 赞同：5
> 
> 时间：2012-04-12T14:43:43.777
> 
> 标签：inheritance, xsd, jaxb, code-generation, xjc

有很多类似的问题都集中在要优化的一个方面，但每个解决方案都有一个丑陋的缺点。

假设我想开发一个 XML 模式 (XSD)，它允许以下文档并希望使用 XJC 生成类：

```
<Catalogue>
    <Book>...</Book>
    <Journal>...</Journal>
    <Book>...</Book>
    ...
</Catalogue> 
```

模式应该对类型层次结构进行建模（`Book`并且`Journal`是 的子类`Publication`）。当然，生成的 Java 类也应该如此。

我尝试了以下方法，它们都有一个主要问题：

**1.) 建模目录以包含`xsd:choice`所有可能的子类型。**

```
<xsd:complexType name="Catalogue">
    <xsd:choice maxOccurs="unbounded">
        <xsd:element ref="Book" />
        <xsd:element ref="Magazine" />
    </xsd:choice>
</xsd:complexType>

<xsd:element name="Publication" abstract="true" type="Publication" />
<xsd:element name="Book" type="Book"/>
<xsd:element name="Magazine" type="Magazine"/>

<xsd:complexType name="Publication">
    <xsd:sequence></xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Book">
    <xsd:complexContent>
        <xsd:extension base="Publication">
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType>
... 
```

这里的问题是我必须提到`choice`元素中所有可能的子类型，这在实际应用程序中可能很多。一个小问题是，尽管该`Catalogue`属性具有正确的类型`List<Publication>`，但它的名称却很丑陋`bookAndMagazine`。由于冗余模式定义，不是一个选项！

**2.) 建模目录包含一个`xsd:sequence`父类**

```
<xsd:complexType name="Catalogue">
    <xsd:choice maxOccurs="unbounded">
        <xsd:element ref="Publication" maxOccurs="unbounded"/>
    </xsd:choice>
</xsd:complexType> 
```

仅当 XML 文档的格式类似于`<Publication xsi:type="Book"...>`. 因此，不是一个选择！

**3.）使用这里提到的替代组[http://www.xfront.com/ElementHierarchy.html](http://www.xfront.com/ElementHierarchy.html)**

```
<xsd:complexType name="Catalogue">
    <xsd:choice maxOccurs="unbounded">
        <xsd:element ref="Publication" maxOccurs="unbounded"/>
    </xsd:choice>
</xsd:complexType>

<xsd:element name="Publication" abstract="true" type="Publication" />
<xsd:element name="Book" type="Book" substitutionGroup="Publication"/>
<xsd:element name="Magazine" type="Magazine" substitutionGroup="Publication"/>

<xsd:complexType name="Publication">
    <xsd:sequence></xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Book">
    <xsd:complexContent>
        <xsd:extension base="Publication">
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType>
... 
```

在这里，代码生成是个问题，因为 的内部元素`Catalogue`被映射到`List<JaxbElement<? extends Publication>>`而不是 `List<Publication>`. 因此，这也不是一个选择。

如何将我的所有目标集中在一起？：

*   对继承进行建模的规范的非冗余模式（例如在**2.）**或**3.)**中）
*   从此模式生成的简单而干净的 Java 类，这些类对继承进行建模（如**2.）**和部分在**1.）**）
*   干净的 XML 文档（不像**2.）**）
*   使用标准 JAXB，最好不要太多绑定元数据

如果没有与所有这些目标相匹配的解决方案，您更喜欢哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:01:03.850

我建议使用类似于您的第一个选项的东西，因为我从未见过更清洁的解决方案。

**XSD**

```
<xs:element name="Publications" minOccurs="0">
  <xs:complexType>
    <xs:sequence>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="Magazine" type="magazine"/>
        <xs:element name="Book" type="book"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
</xs:element>

 <xs:complexType name="magazine">
  <xs:complexContent>
   <xs:extension base="publication">
    <xs:sequence>
      <xs:element name="issueName" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:extension>
 </xs:complexContent>
</xs:complexType>

<xs:complexType name="publication">
  <xs:sequence>
    <xs:element name="name" type="xs:string" minOccurs="0"/>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="book">
  <xs:complexContent>
    <xs:extension base="publication">
      <xs:sequence>
        <xs:element name="title" type="xs:string" minOccurs="0"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

**JAVA** 这是我用来生成上述 XSD 的 Java 代码。

```
@XmlElements({
  @XmlElement(name="Magazine", type=Magazine.class),
  @XmlElement(name="Book", type=Book.class)
})
@XmlElementWrapper(name="Publications")
public List<Publication> publications; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T17:23:48.037

如果您可以从代码（而不是 XSD）开始，并且可以使用 MOXY，请查看此[博客文章](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)。它使用没有 JAXBElement 包装器的方法 3。我希望有一种从 XSD 开始的方法，但我还没有找到它。

# php - Netbeans“没有执行测试”

> ID：10125971
> 
> 赞同：2
> 
> 时间：2012-04-12T14:43:59.897
> 
> 标签：php, unit-testing, netbeans, phpunit

我有一个包含单元测试的 php 项目。我使用 Netbeans 进行开发，并希望在我的 IDE 中集成 phpunit。如果我从命令行运行 phpunit，它就可以工作。**如果我按 Alt+F6 在 Netbeans no tests run 中运行测试**，我会收到以下消息：

> 未执行任何测试（可能发生错误，请在“输出”窗口中验证。）

结构（它是 Zend Framework 2 模块）：

```
Foo/
  src/
    Foo/
      Bar.php
      Baz.php
  tests/
    Foo/
      BarTest.php
    bootstrap.php
    phpunit.xml
  Module.php
  autoload_register.php 
```

BarTest.php 的内容

```
namespace Foo;

use PHPUnit_Framework_TestCase as TestCase;

class BarTest extends TestCase
{
    public function testIsWorking ()
    {
        $this->assertTrue(true);
    }
} 
```

我的 phpunit.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="bootstrap.php">
    <testsuite name="Foo">
        <directory>./</directory>
    </testsuite>
</phpunit> 
```

我的 bootstrap.php：

```
// Set error reporting pretty high
error_reporting(E_ALL | E_STRICT);

// Get base, application and tests path
define('BASE_PATH',  dirname(__DIR__));

// Load autoloader
require_once BASE_PATH . '/autoload_register.php'; 
```

在我试过的 Netbeans 项目属性中：

1.  将测试目录设置为`Foo/tests`（我认为这是必需的）
2.  专门设置引导文件（我认为不需要）
3.  专门设置 XML 配置文件（我认为不需要）
4.  专门设置为运行所有 *Test 文件（我认为不需要）

**如何确保 Netbeans 可以执行我的 phpunit 测试？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:06:02.060

您可以简单地将所有这些放入您的 PHPUnit bootstrap.php 中：

```
<?php

error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', '1');
ini_set('display_startup_errors', '1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:46:43.437

问题是 Netbeans 期望所有测试都位于一个根项目文件夹中。如果不这样做，代码覆盖率和其他功能将无法正常工作。有关更多信息，请参阅[增强](http://netbeans.org/bugzilla/show_bug.cgi?id=201654)。

这个问题可以通过创建自定义 testSuite 来解决：

*   如果尚未创建，请在根项目文件夹中创建目录“test”或“tests”。
*   在这个“测试”文件夹中创建文件 TestSuite.php
*   在您的 Netbeans 项目设置中添加这个 TestSuite.php。

```
<?php

class TestSuite extends PHPUnit_Framework_TestSuite
{
    public static function suite()
    {
        $suite = new TestSuite();

        $file = '/Foo/tests/Foo/BarTest.php';

        echo 'Adding test: ' . $file . "\n";
        $suite->addTestFile($file);

        //add here algorithm that will search and add all test files from your /tests directory

    return $suite;

} 
```

Netbeans 7.2 将具有[在单独目录中运行所有测试的](https://blogs.oracle.com/netbeansphp/entry/run_tests_in_folder)好功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:37:47.900

尽管我已将 error_reporting 设置为高级别，但 PHP CLI 并没有打开 display_errors。就是这样，所以现在我得到了我的报告……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-19T22:30:38.347

NetBeans 找不到自动加载器类。然后，在项目设置中，您必须说出类 autoloader、bootstrap 等。

就我而言，刚刚进入：项目属性-> 测试-> PHPUnit。我将选项设置为“使用引导程序”，并告诉引导程序的路径。

我的引导文件有自动加载器，然后我所有的测试类都没有错误地执行。

# perl - 如何使用 PDF::API2 将多个 pdf 与 Perl 合并为一个？

> ID：10125972
> 
> 赞同：2
> 
> 时间：2012-04-12T14:44:02.533
> 
> 标签：perl, pdf, merge

我有很多 pdf 文档要合并在一起，所以我编写了这段代码来完成它。它适用于我只有两个要合并的 pdf 文档的情况，但如果我给它两个以上，额外的文档就会出现乱码。你能帮我找出问题所在吗？

```
#!/usr/bin/perl

use PDF::API2;
use List::Util qw( reduce );

# Given two pdfs and a page number, appends the given page of the second pdf to the first pdf
sub append_page_to_pdf {
    my ( $pdf1, $pdf2, $pg ) = @_;
    $pdf1->importpage( $pdf2, $pg );
}

# Given two pdfs, appends the second to the first.  Closes pdf2
sub merge_2_pdfs {
    my ($pdf1, $pdf2) = @_;
    map &append_page_to_pdf( $pdf1, $pdf2, $_ ), 1..$pdf2->pages;
    $pdf2->end;
    return $pdf1;
}

# does what it says
sub open_pdf {
    my $file = $_[0];
    my $pdf = PDF::API2->open( $file );
    print "Opened pdf ( $file )\n";
    return $pdf;
}

# reduces merge_2_pdfs over an array of pdfs
sub merge_pdfs {
    my @files = @_;
    my $starting_filename = shift @files;
    my $start_pdf = &open_pdf( $starting_filename );
    my $final_pdf = reduce { &merge_2_pdfs( $a, &open_pdf( $b ) ) } $start_pdf, @files;
    return $final_pdf;
}

# Get the arguments ie save_name, file1, file2, file3, ...
my @files = @ARGV;
my $save_name = shift @files;
my $save = &merge_pdfs( @files );
$save->saveas( $save_name ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:03:02.640

您的代码中的实际问题是因为您`shift`在合并它们之前关闭了其中一个文件。

```
my $save_name = shift @files; 
# which should be 
my $save_name = $files[0]; 
```

否则，代码实际上可以工作，我没有发现任何乱码。

一些提示：

1.  `use strict`和`use warnings`

2.  现在的一般做法是`&`在您的子例程调用中省略 。[有关该规则的例外情况，请参见此处](http://perldoc.perl.org/perlsub.html)。

3.  在这种情况下，子例程会使您的代码变得冗长，从而使其更难遵循。这里有更简洁的东西。

    ```
    use strict;
    use warnings;
    use List::Util 'reduce';
    use PDF::API2;

    my $new
      = reduce { $a->importpage($b, $_) foreach 1 .. $b->pages; $a }
        map { PDF::API2->open($_) }
        @ARGV;
    $new->saveas('new.pdf'); 
    ```

4.  一个简单的循环比使用更容易阅读`reduce`。

    ```
    use PDF::API2;

    my $new = PDF::API2->new;
    foreach my $filename (@ARGV) {
        my $pdf = PDF::API2->open($filename);
        $new->importpage($pdf, $_) foreach 1 .. $pdf->pages;
    }
    $new->saveas('new.pdf'); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:24:01.103

[PDF::重用](http://search.cpan.org/perldoc/PDF%3a%3aReuse)。

```
prFile('myFile.pdf');
for my $pdf (@PDFS) {
    prDoc($pdf);
}
prEnd(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:08:28.470

另一种可能性是我的图书馆[CAM::PDF](http://search.cpan.org/dist/CAM-PDF/)。

```
my $pdf1 = CAM::PDF->new($file1) or die;
my $pdf2 = CAM::PDF->new($file2) or die;
my $pdf3 = CAM::PDF->new($file3) or die;
$pdf1->appendPDF($pdf2);
$pdf1->appendPDF($pdf3);
$pdf1->cleanoutput($outfile); 
```

或者也许将它包装在@ARGV 上的循环中。对于两个 PDF，我有一个简单的 cmdline 包装器来做同样的事情：

[appendpdf.pl](http://search.cpan.org/dist/CAM-PDF/bin/appendpdf.pl) file1.pdf file2.pdf out.pdf

# c# - WCF：运行几秒钟后出现 EndpointNotFoundException

> ID：10125973
> 
> 赞同：6
> 
> 时间：2012-04-12T14:44:07.223
> 
> 标签：c#, wcf

我正在使用两个应用程序，一个具有配置为使用 net.tcp 绑定的自托管服务。服务的 ServiceBehaviorAttribute 配置为：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple,
                 InstanceContextMode = InstanceContextMode.Single,
                 IncludeExceptionDetailInFaults = true,
                 UseSynchronizationContext = false,
                 ValidateMustUnderstand = false)] 
```

对于服务和客户端，transferMode 都设置为 Streamed，超时时间为：

```
closeTimeout="00:01:00"
openTimeout="00:00:30"
receiveTimeout="00:02:30"
sendTimeout="00:02:30" 
```

MaxConnections 设置为 500，ServiceThrottlingBehavior 使用 WCF 4 默认值：

*   MaxConcurrentSessions：100 * ProcessorCount
*   MaxConcurrentCalls：16 * ProcessorCount
*   MaxConcurrentInstances：默认是以上两个的总和，跟之前的模式一样。

我使用的是四核机器并且启用了 Net.Tcp 端口共享服务。

客户端应用程序有一个使用 ChannelFactory 类创建的服务的单一通道。一旦创建了通道，就会产生 100 个线程。每个线程使用通道以每秒一条消息的频率向服务器发送消息。

运行正常几秒钟后（客户端将消息发送到服务器并正确接收它们）抛出 EndpointNotFoundException 并显示以下消息：

```
Could not connect to net.tcp://localhost/service. The connection attempt lasted 
for a time span of 00:00:02.1777100\. TCP error code 10061: No connection could 
be made because the target machine actively refused it 127.0.0.1:808. 
```

奇怪的是：

*   如果我在同一台机器上运行两个应用程序，则异常的时间跨度约为 2 秒，但如果我在我的机器上运行服务器应用程序，而在另一台机器上运行客户端应用程序，则异常的时间跨度始终为 1 秒。
*   有时（如十分之一）不会抛出异常，并且两个应用程序都可以正常工作。
*   在抛出异常之前，服务器接收消息并正确处理它们。服务器中不会​​抛出异常。

我做了很多测试，减少线程数量，增加线程数量，将关闭、打开、接收和发送超时更改为更低和更高的值，为 maxConnections 设置更高的值但结果始终相同，在某些时候抛出 EndpointNotFoundException。我即将放弃并更改代码，因此每个线程都有自己的频道，希望这可以解决问题，但我想知道为什么会发生这种情况。如果有人知道我做错了什么或者可以指出我正确的方向以继续调查，那将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:59:31.777

默认情况下，Windows 不启用端口共享。我会检查您是否已正确启用它（[请参阅此处](http://msdn.microsoft.com/en-us/library/ms734772.aspx)）。

如果可能，您还可以尝试更改一个应用程序的端口，或者在 VM 中测试一个应用程序。

此外，对于可能遇到相同问题的任何其他人，请按照 Diego 所做的那样检查配置中是否启用了端口共享。添加`portSharingEnabled="true"`到绑定：

```
<system.serviceModel>
  <bindings>
    <netTcpBinding name="portSharingBinding" 
                   portSharingEnabled="true" />
  <services>
    <service name="MyService">
        <endpoint address="net.tcp://localhost/MyService"
                  binding="netTcpBinding"
                  contract="IMyService"
                  bindingConfiguration="portSharingBinding" />
    </service>
  </services>
</system.serviceModel> 
```

取自：http: [//msdn.microsoft.com/en-us/library/ms731810.aspx](http://msdn.microsoft.com/en-us/library/ms731810.aspx)

# jquery - jquery找到前面的兄弟

> ID：10125978
> 
> 赞同：1
> 
> 时间：2012-04-12T14:44:14.547
> 
> 标签：jquery, dom, traversal

我想用 jquery 找到一个元素的前一个兄弟，所以举个例子，

```
<li>
    <a href="">
        <img src="http://placehold.it/45x45" alt="Profile Image"/>
        <hgroup>
            <h5>Person Number 1</h5>
            <h6>Recruitment Consultant</h6>
        </hgroup>
     </a>
</li>
<li>
    <a href="">
        <img src="http://placehold.it/45x45" alt="Profile Image"/>
        <hgroup>
            <h5>Person Number 2</h5>
            <h6>Recruitment Consultant</h6>
        </hgroup>
     </a>
</li>
<li>
    <a href="">
        <img src="http://placehold.it/45x45" alt="Profile Image"/>
        <hgroup>
            <h5>Person Number 3</h5>
            <h6>Recruitment Consultant</h6>
        </hgroup>
     </a>
</li> 
```

如果我要悬停在第二个列表元素`a`上，我将如何找到前`li`一个`a`？

我的尝试如下，

```
$('resultsset a').hover(function(){
    $(this).prev().find('li a').css('bottom-bottom', '1px solid #000');
},
function() {
    $(this).prev().find('li a').css('bottom-border', '1px solid #c0c0c0');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:46:44.557

你很近。你想找到元素的父元素的前一个兄弟，然后`a`在其中找到。

```
$(this).parent().prev().find('a') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:46:33.297

```
$(this).parent().prev('li').children('a').first(); 
```

`.prev('li')`确保兄弟姐妹确实是一个`<li>`.

使用`.children('a')`确保只考虑直接后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:47:41.783

```
$('resultsset a').hover(function(){
     $(this).parent().prev().find('a').css('bottom-bottom', '1px solid #000');
}, 
```

# python - Windows 中的 UAC 和 Windows 框选择

> ID：10125983
> 
> 赞同：1
> 
> 时间：2012-04-12T14:44:27.180
> 
> 标签：python, windows, com

所以我正在使用 Python（尽管 C# 或 VB 等其他语言建议也可以）。我想让一个程序启动一个 EXE 文件安装程序，然后告诉该安装程序可以使用 UAC 运行该程序。

我还希望能够选择按钮（单击此处安装！）。

什么库或语言可以做到这一点？我从哪里开始？它会处理 COM 对象，还是......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:23:13.117

我敢肯定您正在使用您的权力，但您建议的方法本质上是删除 UAC 旨在为您的用户提供的保护措施。如果他们已将 UAC 配置为在低于最大保护级别下运行，则可能会执行您想要的操作，但通常 UAC 提示会显示在安全桌面中（这就是背景变暗的原因），所以没有您的进程可以自动单击其按钮。

# jquery - 检查会话是否在 Jquery 中超时

> ID：10125989
> 
> 赞同：0
> 
> 时间：2012-04-12T14:44:37.953
> 
> 标签：jquery, asp.net, session

在 asp.net 应用程序中，我有一个 Jquery 函数。

我需要检查会话是否有类似这样的超时

```
function Myfunction() {
    if(FuctionHasTimedOut)
    {
        return 1;
    }
    else
    {
        return 2;
    }
} 
```

怎么做？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:47:29.007

如果意味着服务器端会话状态，那么您可以在这样的功能中向服务器发出 ajax 请求：

```
function Myfunction() {
    $.post('{urlToHandler}', function(){
        // server should return some session value, that would indicate that session state  is accesible
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:50:02.967

试试这个插件[http://philpalmieri.com/js_sandbox/timedLogout/jquery-idleTimeout.js](http://philpalmieri.com/js_sandbox/timedLogout/jquery-idleTimeout.js)

```
/** Run with defaults **/
  $(document).ready(function(){
    $(document).idleTimeout();
  });

/** With Optional Overrides **/
  $(document).ready(function(){
    $(document).idleTimeout({
      inactivity: 30000,
      noconfirm: 10000,
      sessionAlive: 10000
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:04:43.267

我会为此使用 a `PageMethod`。[这是我在这里](https://stackoverflow.com/a/7029210/879420)找到的一些代码：

```
[WebMethod]
public static bool HasSessionTimedOut()
{
    HttpSessionState session = HttpContext.Current.Session;

    // I put this value into Session at the beginning.
    DateTime? sessionStart = session[SessionKeys.SessionStart] as DateTime?;

    bool isTimeout = false;

    if (!sessionStart.HasValue)
    {
        isTimeout = true;
    }
    else
    {
        TimeSpan elapsed = DateTime.Now - sessionStart.Value;
        isTimeout = elapsed.TotalMinutes > session.Timeout;
    }

    return isTimeout;
} 
```

这是我的 Javascript：

```
<script type="text/javascript">                                   
    $(function() {                                                 
        var callback = function(isTimeout) {
            if (isTimeout) {                           
                // Show your pop-up here...
            }                         
        };                                                         
        setInterval(                                                
            function() {
                // Don't forget to set EnablePageMethods="true" on your ScriptManager.
                PageMethods.HasSessionTimedOut(false, callback);    
            },                                                     
            30000                                                   
        );                                                          
    });                                                            
</script> 
```

# asp.net - 在 VB.NET 中使用 Any() 检查行返回错误

> ID：10125995
> 
> 赞同：1
> 
> 时间：2012-04-12T14:44:45.387
> 
> 标签：asp.net, vb.net, entity-framework, entity-framework-4

我有以下功能：

```
Public Function CheckHasRoom(people_id As String, semester As String, year As String)
    ' Don't let folks already registered for a room register for another.
    Dim RoomSelected As String
    Using dbContext As pbu_housingEntities = New pbu_housingEntities
        Dim hasroom = (From p In dbContext.Residents _
                       Where p.people_code_id = people_id _
                       Where p.semester = semester _
                       Where p.year = year _
                       Where (p.room = "" _
                       Or p.building Is Nothing) _
                       Select p)
        If hasroom.Any() Then
            ' Let them keep going.
            RoomSelected = "N"
        Else
            ' Redirect them to the main page.
            RoomSelected = "Y"
            ' HttpContext.Current.Response.Redirect("default.aspx")
        End If
    End Using
    Return RoomSelected
End Function 
```

但是它在 hasroom.Any() 上出现了问题，说“输入字符串的格式不正确。” 关于为什么的任何想法？这会返回一组行，就像我在其他地方使用相同的代码没有问题一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:27:37.040

尝试使用 .Count

```
 Dim hasroom = (From p In dbContext.Residents _
                   Where p.people_code_id = people_id _
                   AndAlso p.semester = semester _
                   AndAlso p.year = year _
                   AndAlso (p.room = "" _
                   Or p.building Is Nothing) _
                   Select p).count

'--------   Example   --------

Public Sub test()

    Dim l1 As New List(Of String) From {"1", "2", "3"}
    Dim l2 As New List(Of String) From {"1", "2", "3", "4", "5"}

    'return nothing 
    Dim noresult = From p In l1 Where 1 = 0 Select p

    'return ienumerable
    Dim someresult = From p In l1 Where p > 2 Select p

    'return ienumerable with count = 1 with handled_noresult(0)=Nothing
    Dim handled_noresult = (From p In l1 Where 1 = 0 Select p).DefaultIfEmpty

    'return emtpty array with .Length=0 --try this
    Dim handled_noresult2 = (From p In l1 Where 1 = 0 Select p).ToArray

    'return 1
    Dim FakeNoResult1 = handled_noresult.Count()

    'return 0
    Dim FakeNoResult2 = handled_noresult2.Count()

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T08:28:01.020

正如 DaveMackay 在他的评论中所建议的那样，在我看来，其中一个 where 子句导致了错误。它在代码的 .Any() 点出错的原因是，这是实际执行查询的地方，直到那时您已经声明了查询的意图，但它实际上还没有发生。如果您将查询包装在括号中并在其末尾添加 .ToList() ，您可能会在声明查询的行上出现错误，因为这将强制立即执行。

From the error you got I'd guess it's the p.room = "" that is doing it, is p.room a string value? If it's not that then check all the other clauses, are they all strings? It looks unlikely to me that year especially would be stored as a string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:05:03.000

尝试查询

```
p.room = '' 
```

代替

```
p.room = "" 
```

# c# - 如何在 WPF 中获取 TreeViewItem 的内容？

> ID：10125997
> 
> 赞同：1
> 
> 时间：2012-04-12T14:44:55.050
> 
> 标签：c#, wpf, treeviewitem

例如，我的 TreeViewItem 标头由 TextBlock 和 Image 组成。我怎样才能得到他们的参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:06:09.757

我不确定我是否正确，但是如果您想获得元素的视觉子级，请尝试使用`VisualTreeHelper.GetChild`and `VisualTreeHelper.GetChildrenCount`。

PS：通常获取对 TreeViewItem 本身的引用会更有问题......

更新（后代的代码示例）：

```
private IEnumerable<DependencyObject> GetChildren(DependencyObject parent)
{
    var count = VisualTreeHelper.GetChildrenCount(parent);
    if (count > 0)
    {
        for (int i = 0; i < count; i++)
            yield return VisualTreeHelper.GetChild(parent, i);
    }
    else
        yield break;
}

private DependencyObject FindInTheVT(DependencyObject parent,Predicate<DependencyObject> predicate)
{
    IEnumerable<DependencyObject> layer = GetChildren(parent);

    while (layer.Any())
    {
        foreach (var d in layer)
            if (predicate(d)) return d;

        layer = layer.SelectMany(x => GetChildren(x));
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:13:57.650

如果你有这样的东西（在 Xaml 或代码中创建）：

```
TreeViewItem Item = new TreeViewItem();

StackPanel HeaderLayout = new StackPanel() { Orientation = Orientation.Horizontal };

HeaderLayout.Children.Add(new Image());
HeaderLayout.Children.Add(new TextBlock() { Text = "tv item" });

Item.Header = HeaderLayout; 
```

你可以使用类似的东西：

```
foreach (object Control in ((StackPanel)Item.Header).Children)
{
    if (Control is Image)
    {
        //get the image control: Image img = (Image)Control;
    }
    else if (Control is TextBlock)
    {
        //get the textblock: TextBlock tb = (TextBlock)Control;
    }
} 
```

我不建议这样做。如果您改为创建自定义标头（包含 Image 和 TextBlock 属性的类）并将其分配给您的标头或自定义模板会更好。

# out-of-memory - System.OutOfMemoryException 与 PLINQ

> ID：10125998
> 
> 赞同：1
> 
> 时间：2012-04-12T14:45:05.503
> 
> 标签：out-of-memory, plinq

我正在尝试更新标准 LINQ 查询以使用 PLINQ。标准查询如下所示：

```
var query = (from doc in this.ownershipRepository.GetDocuments()
     let queryStateCode = this.currentQuery.StateCode
         let queryCountyCode = this.currentQuery.CountyCode
         where queryStateCode != null ? doc.StateCode == queryStateCode : true &&
         queryCountyCode != null ? doc.CountyCode == queryCountyCode : true
         orderby doc.Owner
     select doc)
     .Take(QUERY_RESULTS_SIZE); 
```

存储库中的 .GetDocuments() 方法很简单：

```
public class OwnershipRepository : IDisposable
{
    private OwnershipEntities context;

...

public IQueryable<Document> GetDocuments()
    {
        return this.context.Documents;
    }

...
} 
```

这很好用。我尝试使用 PLINQ 来利用查询，如下所示：

```
var query = (from doc in this.ownershipRepository.GetDocuments().AsParallel()
     let queryStateCode = this.currentQuery.StateCode
     let queryCountyCode = this.currentQuery.CountyCode
         where queryStateCode != null ? doc.StateCode == queryStateCode : true &&
     queryCountyCode != null ? doc.CountyCode == queryCountyCode : true
     orderby doc.Owner
     select doc)
     .AsSequential()
     .Take(QUERY_RESULTS_SIZE); 
```

但这会引发 System.OutOfMemoryException。我正在使用以下规格的机器上测试它：

> Intel(R) Core(TM) i7 CPU 860 @ 2.80GHz 2.79 GHz / 4 GB 内存

我需要做些什么来优化此查询，以免导致内存不足问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:59:21.133

使查询并行意味着在某个阶段将其拆分，然后再次合并。你一开始就分裂了。这似乎是正确的。比您过滤和排序拆分的序列。这些需要保存在内存中并合并回来。我的建议是在合并后排序。

```
var query = (from doc in this.ownershipRepository.GetDocuments().AsParallel()
     let queryStateCode = this.currentQuery.StateCode
     let queryCountyCode = this.currentQuery.CountyCode
         where queryStateCode != null ? doc.StateCode == queryStateCode : true &&
     queryCountyCode != null ? doc.CountyCode == queryCountyCode : true
     select doc);

var result = query.AsSequential().OrderBy(doc=>doc.Owner).Take(QUERY_RESULTS_SIZE); 
```