# StackOverflow 问答 10717000-10717999

# javascript - 如何从 Dijit.Calendar 中获取值？

> ID：10717000
> 
> 赞同：0
> 
> 时间：2012-05-23T09:21:22.030
> 
> 标签：javascript, calendar, dojo

这是一个容易的，至少我认为它是。

我在我的标记中声明了一个 Dijit.Calendar，它可以正常加载并且可以正常工作。但我不明白我将如何访问该值。

我想要做的是，更新日历旁边的文本框以包含用户选择的日期。我不在乎它是否在用户单击日期后立即更新，或者需要以某种方式确认他的选择。我只是想知道如何实现这一目标。

可悲的是，参考指南除了如何设置之外没有提供任何信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:16:41.927

由道场 IRC 上的***dleonardi***回答。

基本上，将`onChange`事件连接到小部件实例，可以使用`dijit.byId()`( **not** `dojo.byId()` ) 检索该实例。

然后返回的实例只包含一个名为 的属性`value`，它是 的一个实例`Date`。

# java - 在小程序中绘制图像

> ID：10717006
> 
> 赞同：2
> 
> 时间：2012-05-23T09:21:46.363
> 
> 标签：java, image, swing, paint, japplet

我在小程序中绘制图像时遇到问题。我想在小程序中一张一张地显示所有图像，但它只显示我的代码在下面给出的文件夹的最后一张图像。

```
public class ImageInSwingTest extends JApplet
{
    String filePath="C:\\Users\\yogi\\Pictures\\pictures"; //all .png files more than 200 files
    String files;
    File folder=new File(filePath);
    File[] listOfFiles;
    Image m;

    @Override
    public void init()
    {
        listOfFiles=folder.listFiles();
        for(int i=0;i<listOfFiles.length;i++)
        {
            if(listOfFiles[i].isFile())
            {
                files=listOfFiles[i].getName();
                if(files.endsWith(".png"))
                {
                    String filepath=listOfFiles[i].getAbsolutePath();
                    System.out.println(filepath);
                    try {
                         m = ImageIO.read(new File(filepath));
                        paint(ImageInSwingTest.this.getGraphics());

                    } catch (IOException ex) {
                        Logger.getLogger(ImageInSwingTest.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }

        }
    }
    public void paint(Graphics g)
    {
        g.drawImage(m, 0, 0, this);

    }

} 
```

所以，请谁能告诉我如何一张一张地显示所有图像。？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:54:55.513

> 所以，请谁能告诉我如何一张一张地显示所有图像。？谢谢。

*   `for(int i=0;i<listOfFiles.length;i++)`因为替换`JApplet`内容中的每个循环

*   放到`JPanel`_`JApplet`

*   放入`Images`数组`Icon[]`

*   放到`Icon`_`JLabel`

*   用于`GridLayout`放置`JLabel`_ `Icons`_`JPanel`

*   不要`JApplet`直接绘制，使用`JPanel`或`JComponent`使用覆盖方法`paintComponent()`而不是`paint()`

编辑

> 实际上我希望所有图像都相互替换，所以所有图像看起来都像是在播放电影

*   你必须暂停这个过程`Thread.sleep(int);`

*   你可以使用`Thread.sleep(int);`inside`SwingWorker`或`Runnable#Thread`,

*   不要`Thread.sleep(int);`在 Swing GUI 中使用其他方式，因为会阻塞 Event Dispatch Thread，并且可能不会绘制任何内容或仅绘制最后一个图像

*   `Runnable#Thread`会更好，更简单，但是任何来自`Runnable#Thread`Swing GUI 的输出都必须包装`JLabel.setIcon(myIcon)`到`invokeLater`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:05:23.830

结束循环所需的时间非常短，您只能看到显示的最后一张图像。尝试`pause`在绘制每个图像后添加一个。

# jquery - jquery选项卡不显示ajax数据

> ID：10717010
> 
> 赞同：0
> 
> 时间：2012-05-23T09:22:07.707
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-tabs

我正在将数据发送给客户端，但数据未显示在选项卡中？？这是我在单击选项卡时发送的 ajax 请求的**响应：**

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: application/json;charset=UTF-8
Content-Length: 196
Date: Wed, 23 May 2012 08:57:02 GMT

{
    "footerPkg": {
        "hotelRoomPrice": 1,
        "idHolidayPackage": 1,
        "idHolidayPackageVariant": 1,
        "idOriginCity": 1,
        "itineraryHeader": "Header",
        "miscPrice": 0,
        "name": "name",
        "occupancyType": "TWIN",
        "variantPrice": 10
    }
} 
```

在我的 jsp 中，我使用它来创建选项卡：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%-- <%@ taglib prefix="sj" uri="/struts-jquery-tags"%> --%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link
    href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
    rel="stylesheet" type="text/css" />
<script
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script
    src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script>
  $(document).ready(function() {
    $("#tabs").tabs({
        ajaxOptions: {
            dataType: "json",
            success : function(data, status) {
                alert(data.footerPkg.name);
            }
        }
    });
  });
  </script>

<title>Hello World!</title>
</head>
<body onload="alert('body load');">

    <div id="tabs">
        <ul>
            <li><a href="getJsonResult.action?idPkg=1">Tab 0</a></li>
            <li><a href="getJsonResult.action?idPkg=1">Tab 1</a></li>
            <li><a href="HelloWorld.jsp">Tab 3</a></li>
        </ul>
    </div>      
</body>
</html> 
```

但是，我在标签内容中看不到任何内容。即使是纯文本的 Homepage.jsp 也没有显示在选项卡 3 中。

这是它的样子：

![空标签](../Images/bcb718fa0d5140cd6aed4ed12eddf7d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:57:01.093

数据返回到您的 ajax 成功方法后，必须有一个回调函数。回调对于让 jquery ui 知道有新数据要处理是必要的。

这可能是这个问题的重复。

[ajax加载选项卡后的回调](https://stackoverflow.com/questions/740652/callback-after-ajax-loading-a-tab)

这是另一个具有所需加载功能的明确示例

[ajax内容加载到新添加的jquery ui选项卡后如何执行回调函数](https://stackoverflow.com/questions/9336520/how-to-execute-a-callback-function-after-ajax-content-has-been-loaded-into-a-new)

# 32bit-64bit - 32 位 nasm 程序集未在 64 位系统上启动

> ID：10717011
> 
> 赞同：1
> 
> 时间：2012-05-23T09:22:13.157
> 
> 标签：32bit-64bit, nasm, ld

我已经编写了一个 32 位汇编文件，我想在 64 位 Linux 系统上编译它（并让它工作）。我已经安装`gcc-multilib`和`lib32-glibc`.

我尝试使用以下命令创建二进制文件：

```
nasm -f elf test.asm
ld -melf_i386 -o test -e _main test.o /usr/lib32/libc.so.6 
```

`_main`入口点在哪里。文件测试已创建，我对其进行了chmod：

```
chmod ugo+x ./test 
```

但是，我无法打开它。我得到：

```
bash: ./test: No such file or directory 
```

我确定该文件存在，因为我可以在 vim 中打开它（并且我可以看到 ELF 写在第一行）。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:49:39.063

该消息与动态链接器有关，因为使用动态库需要更多的努力。简单的方法是链接到静态 C 库 (/usr/lib32/libc.a)。但是，如果您只是将入口点称为“main”并像普通的 C 程序（gcc -m32 -o test test.o）一样链接它，它也可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-19T13:24:38.547

问题不在编译器中。

实际上你输入了错误的命令。

1）用于编译 32 位程序的命令是：nasm -f elf32 test.asm

```
 and for 64 bit asm or assembly language file command is : nasm -f elf64 test.asm 
```

2）编译后，您需要为该命令链接该文件：

```
 ld -o test test.o  ( for both the 64/32 bit program) 
```

3）现在您将能够使用以下命令执行程序：

```
 ./test 
```

# mysql - MySQL order by rand() 性能问题

> ID：10717016
> 
> 赞同：1
> 
> 时间：2012-05-23T09:22:24.247
> 
> 标签：mysql, database

我有一个效率相当低的 MySQL 查询，直到最近随着数据库规模的扩大，它一直运行良好。我正在尝试使用 ORDER BY RAND() 语法选择一个随机记录，但它非常慢（30 多秒）并导致我的 PHP 脚本出现问题。有没有更有效的方法来编写这个查询？

```
 SELECT * FROM accountcampaign, accounts WHERE 
    accountcampaign.status='ACTIVE' 
    AND accountcampaign.dateLocked IS NULL
    AND accountcampaign.campaignID='1' 
    AND ( (accountcampaign.lockedIPAddress IS NULL)  
          OR (accountcampaign.lockedIPAddress='') 
        ) 
    AND ( (accountcampaign.dateLastEntry IS NULL) 
          OR (DATE(accountcampaign.dateLastEntry) < DATE(NOW())) 
        ) 
    ORDER BY RAND() LIMIT 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:37:16.700

您不想使用`ORDER BY RAND() LIMIT 1`: 它会为表中的每一行生成一个随机数。

您应该尝试使用 2 个查询：

*   第一个计算表中的行数
*   然后在 PHP 中生成一个介于 0 和这个计数之间的随机数
*   然后第二个查询只获取这一行

[更多在这里](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)

# c# - SQLDataadapter 不适用于 GO

> ID：10717024
> 
> 赞同：1
> 
> 时间：2012-05-23T09:22:57.150
> 
> 标签：c#, sql, sqldataadapter

我正在使用 SQLDataAdapter 运行脚本。脚本如下，

```
ALTER TABLE dbo.Table1 SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
select Has_Perms_By_Name(N'dbo.Table1', 'Object', 'ALTER') as ALT_Per, Has_Perms_By_Name(N'dbo.Table1', 'Object', 'VIEW DEFINITION') as View_def_Per, Has_Perms_By_Name(N'dbo.Table1', 'Object', 'CONTROL') as Contr_Per BEGIN TRANSACTION
GO
ALTER TABLE dbo.Table2
DROP CONSTRAINT DF_Table2
GO 
```

它给了我错误，因为 GO 附近的语法不正确。如果我从查询文本中删除 GO，它可以正常工作。但我只需要执行这个脚本。

这是ac#代码。QueryText 是一个字符串，它包含整个查询以及 SET 和 GO。

```
DataSet ds = new DataSet();
SqlConnection conn = new SqlConnection(_connectionString);
SqlDataAdapter da = new SqlDataAdapter(QueryText, conn);
da.Fill(ds); 
```

有谁知道如何使用它。

在此先感谢，
维杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:37:49.057

GO 是 Management Studio 或其他 SQLServer 命令行工具的标记，并用作最终分隔符以将一批命令发送到 SQL Server。
在您的代码中，您需要复制此行为。
使用 GO 作为分隔符将脚本分隔为子部分。
使用单个命令（用于 ALTER TABLE）发送每个部分，并将 SqlDataAdapter 用于 SELECT 部分。
此外，您应该从脚本部分中删除 COMMIT 和 BEGIN TRANSACTION，并在您的代码中使用来自 SqlConnection的[SqlTransaction对象。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

# c# - 如何为asp：grid中的第一行着色

> ID：10717025
> 
> 赞同：1
> 
> 时间：2012-05-23T09:22:59.787
> 
> 标签：c#, asp.net

大家早上好/下午好，

我有一个 ASP:grid 显示我们当前使用的条款和条件的当前版本/使用网格中的第一行始终是我们当前正在使用的行，我需要突出显示该行但我无法尝试突出显示它

继承人asp：gridview

 `````
<asp:GridView runat="server" ID="grvTermsAndConditions" AutoGenerateColumns="false"
                    OnRowDataBound="grvTermsAndConditions_rowDataBound" Style="margin-bottom: 20px;">
                    <Columns>
                        <asp:TemplateField HeaderText="CurrentVersion">
                            <ItemTemplate>
                                <asp:Label ID="lblVersion" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.CurrentVersion") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Added">
                            <ItemTemplate>
                                <asp:Label ID="lblDateAdded" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Added") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="CreatedBy">
                            <ItemTemplate>
                                <asp:Label ID="lblCreatedBy" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.CreatedBy") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
````  `这是我试图获取第一行并且颜色为红色的代码

 `````
protected void grvTermsAndConditions_rowDataBound(Object sender, GridViewRowEventArgs e)
        {

            for (int i = 0; i < grvTermsAndConditions.Rows.Count; ++i )
            {
                if (i == 0)
                {
                    e.Row.CssClass = "gvRowRed";
                    e.Row.Cells[0].CssClass = "white";
                    e.Row.Cells[1].CssClass = "white";

                }
            }
        } 
````  `但是每次我运行这个时，第二行都会着色？！？！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:27:17.037

请注意，该[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound)事件是针对每一行执行的 - 当您绑定每一行时，您正在做的是遍历所有行。对性能非常不利。

试试这个：

```
protected void grvTermsAndConditions_rowDataBound(Object sender, GridViewRowEventArgs e)
{
        if (e.Row.RowIndex == 0)
        {
            e.Row.CssClass = "gvRowRed";
            e.Row.Cells[0].CssClass = "white";
            e.Row.Cells[1].CssClass = "white";

        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:33:10.640

试试这个

```
protected void grvTermsAndConditions_rowDataBound(Object sender, GridViewRowEventArgs e)
    {
             if(e.Row.RowType == DataControlRowType.DataRow) // Use this if condition otherwise exception is occurred
             {
                      if(e.RowIndex == 0)
                      {
                             e.Row.CssClass = "gvRowRed";
                e.Row.Cells[0].CssClass = "white";
                e.Row.Cells[1].CssClass = "white";
                      }
             }            
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:27:03.867

为了性能起见，我建议您使用 gridview DataBound-event，因为您只想更改一行：

```
protected void grvTermsAndConditions_DataBound(object sender, EventArgs e)
    {
        GridViewRow firstRow = grvTermsAndConditions.Rows[0];
        firstRow.CssClass = "gvRowRed";
        //etc.
    } 
```

因此，您不必遍历所有可能对大型网格视图感兴趣的行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T09:28:16.703

Rows-collection 是从零开始的，所以第一行是 i == 0，而不是 i == 1。虽然循环遍历添加的每一行的所有行似乎也是一个坏主意（因为你是在 OnRowDataBound 中进行。

我的一般建议是使用 CSS 中的 :first-child 伪类为第一行着色。[http://www.w3schools.com/cssref/sel_firstchild.asp](http://www.w3schools.com/cssref/sel_firstchild.asp)````

# svn - 从谷歌代码下载源代码

> ID：10717032
> 
> 赞同：1
> 
> 时间：2012-05-23T09:23:20.370
> 
> 标签：svn

我不知道如何从谷歌源代码下载代码这是我去那里时显示的页面，我在这里按照这些说明进行操作 [http://engtech.wordpress.com/2007/03/03/howto_google_code_hosting_subversion_tortoisesvn/](http://engtech.wordpress.com/2007/03/03/howto_google_code_hosting_subversion_tortoisesvn/) 但仍然无法获取源代码，因为我无法找到我必须用来下载的链接。

[http://code.google.com/p/andres-development-resource/source/checkout](http://code.google.com/p/andres-development-resource/source/checkout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:31:44.977

```
hg clone https://code.google.com/p/andres-development-resource/ 
```

这是一个 Mercurial 命令，因此您需要**[Mercurial](https://www.mercurial-scm.org/)**而不是 SVN 来下载（克隆）该 repo。

如果你想要 TortoiseSVN 的等价物，你也可以使用**[TortoiseHg](http://tortoisehg.bitbucket.io/)**：

![乌龟汞菜单](../Images/0e34934faf96ad6a3293a8197fd4dbac.png)

# javascript - Node.js 无法解析来自 base64 解码的 JSON 字符串

> ID：10717033
> 
> 赞同：1
> 
> 时间：2012-05-23T09:23:26.617
> 
> 标签：javascript, json, node.js, base64

我有一个字符串，我想解码成 json。该字符串最初是 base64。当我尝试解码为 jason 时，出现以下错误。

```
 var query_string = new Buffer(bid, 'base64').toString('ascii');
  console.log(query_string);
  var q = JSON.parse(query_string);

{'avid': 'info@tssf.co.jp', 'crid': '20767073515', 'mabid': {'node': None, 'hod': '13', 'cid': '36', 'industry': None, 'ex': '1', 'vid1': '29', 'dow': '3'}, 'prid': {'hod': '13', 'woy': '18', 'cid': '36', 'dow': '3', 'ssp': 'adx', 'st': None, 'bt': 'firefox', 'cty': 'tokyo', 'ex': '1', 'vid2': '222', 'dt': '1', 'os': 'mac', 'vid1': '29'}, 'agid': '4547917795', 'cookieid': 'retageting:cookie', 'did': 'yahoo.com', 'validation': True} 
```

> SyntaxError: Unexpected token ' at Object.parse (native) at /home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/app.js:115:16 at callbacks (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules /express/lib/router/index.js:272:11) 在参数 (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:246:11) 在传递 ( /home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:253:5) 在Router._dispatch (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express /lib/router/index.js:280:4) 在 Object.handle (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:45:10) 在下一个 (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/http.js:204:15) 在 Object.methodOverride [作为句柄] (/home/ubuntu/工作区/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:35:5) 在下一个（/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/连接/lib/http.js:204:15)5）在下一个（/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/http.js:204:15）5）在下一个（/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/http.js:204:15）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:26:51.557

JSON 格式需要**双引号**，而不是**单引号**。

还：

*   **无**应该是：**空**
*   **True**应为小写：**true**

**query_string**应如下所示：

```
{"avid": "info@tssf.co.jp", "crid": "20767073515", "mabid": {"node": null, "hod": "13", "cid": "36", "industry": null, "ex": "1", "vid1": "29", "dow": "3"}, "prid": {"hod": "13", "woy": "18", "cid": "36", "dow": "3", "ssp": "adx", "st": null, "bt": "firefox", "cty": "tokyo", "ex": "1", "vid2": "222", "dt": "1", "os": "mac", "vid1": "29"}, "agid": "4547917795", "cookieid": "retageting:cookie", "did": "yahoo.com", "validation": true} 
```

我想那是一个 Python 字典，你应该使用一个库来将 Python 字典正确序列化为 JSON，或者如果你使用的是 Python 2.6+，只需执行以下操作：

```
import json
json_string = json.dumps({'test': 'test'}) 
```

文档：[http ://docs.python.org/library/json.html](http://docs.python.org/library/json.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:27:39.123

JSON 需要在键和（字符串）值周围加上双引号，而不是单引号。

还：

1.  `None`不是合法值 - 编码空键的 JSON 方式是`"mykey": null`
2.  `True`并且`False`必须小写

JSON 的正式语法位于[http://www.json.org/的首页](http://www.json.org/)

# asp-classic - Opera 正在加载我的页面两次

> ID：10717035
> 
> 赞同：0
> 
> 时间：2012-05-23T09:23:34.383
> 
> 标签：asp-classic, include, opera, pageload

我的页面被 Opera 加载了两次。版本 11.11

我在几个地方放置了一些控制台日志，以指示我的文档部分加载的顺序，见下文。

```
Console Logs:

Head section
Head section
Inside my Script.js file
Inside my Script.js file
Body section
Body section
Inside jQuery(document).ready
Inside jQuery(document).ready 
```

这是一个使用 .shtml 和 .asp 包含的 .asp 经典页面，我在脚本中使用 jQuery。

有没有人知道为什么 Opera 会加载页面两次，而 Firefox、Safari、IE 和 Chrome 都很好？

如果您需要更多信息，请询问，我不确定我需要提供多少细节才能获得一些初步建议，我希望以上内容足以开始，谢谢。

* * *

我注意到的一件事是输出控制台日志的顺序。如果页面实际上加载了两次，那么订单不是吗？

```
Console Logs:

Head section    
Inside my Script.js file
Body section
Inside jQuery(document).ready
Head section    
Inside my Script.js file
Body section
Inside jQuery(document).ready 
```

因此，我认为这是 Opera 控制台（即 Dragonfly）的错误。

有人会倾向于同意这一点或有任何其他理论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:39:06.120

这是 Opera 的一个已知问题[为什么 console.log 会打印两次？](http://my.opera.com/community/forums/topic.dml?id=1055322)

# sql-server - 表 1 和表 2 中日期的 MSSQL 总和

> ID：10717037
> 
> 赞同：0
> 
> 时间：2012-05-23T09:23:35.847
> 
> 标签：sql-server, sum, subquery

我有以下问题：

我有两张表，一张用于客户购买的商品，另一张用于员工销售：

```
Table 1 (Emp)
EmpId 
ProductId
dateSold
Price
Qty

Table 2 (Cust)
CustomerId
ProductId
dateSold
Price
Qty 
```

这样做是我目前正在查询的查询：

```
SELECT  SUM(EmployeeSales.productPrice * EmployeeSales.Qty + 
            userBoughtItems.ProductPrice * userBoughtItems.qty) AS Total, 
        EmployeeSales.dateSold, 
        userBoughtItems.dateSold AS Expr1
FROM    EmployeeSales 
INNER JOIN userBoughtItems ON EmployeeSales.dateSold = userBoughtItems.dateSold
GROUP BY EmployeeSales.dateSold, userBoughtItems.dateSold 
```

我想在同一日期获得两张桌子的总数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:13:53.250

A`join`为左表中的每个匹配行重复右表。在您的示例中，我希望这会导致大量重复的行。考虑使用 a`union`代替：

```
select  cast(dt as date)
,       sum(sales)
from    (
        select  dateSold as dt
        ,       productPrice * Qty as sales
        from    EmployeeSales
        union all
        select  dateSold
        ,       ProductPrice * qty
        from    userBoughtItems
        ) as SubQueryAlias
group by
        cast(dt as date) 
```

子查询包含所有销售额的列表，外部查询每天汇总它们。

如果您使用的是 SQL Sever 2005 或更早版本，请替换`cast(dt as date)`为`dateadd(dd, 0, datediff(dd, 0, dt))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:30:46.370

如果没有 group by 子句，它就无法工作，它会引发以下错误。

> 消息 8120，级别 16，状态 1，第 4 行列“employeesales.dateSold”在选择列表中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。

我稍微变了，

用这个

> select dt , sum(sales) from ( select dateSold as dt , sum(Price * Qty) as sales from employeesales group by dateSold union all select dateSold , sum(Price * qty) from customerboughtitems group by dateSold ) as SubQueryAlias group by dt

# ruby-on-rails - 未定义的方法“user_signed_in？” 为了 ＃

> ID：10717038
> 
> 赞同：7
> 
> 时间：2012-05-23T09:23:36.937
> 
> 标签：ruby-on-rails, ruby, authentication

我想使用 Ruby on Rails 进行身份验证，每个用户都有自己的帐户。但现在我收到了这个错误：

```
undefined method user_signed_in? for #<ProjectsController:0x007faead1853e0> 
```

有人可以帮我吗？

这是代码：

**完整跟踪：**

```
app/controllers/projects_controller.rb:69:in `require_login'
activesupport (3.2.3) lib/active_support/callbacks.rb:418:in `_run__2505248868868045404__process_action__114470166732456289__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__4031929640367205598__call__2058268190974805736__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

**项目控制器.rb**

```
class ProjectsController < ApplicationController
  before_filter :require_login
  # GET /projects
  # GET /projects.json
  def index
    @projects = current_user.projects

  end

  # GET /projects/1
  # GET /projects/1.json
  def show
    @projects = current_user.projects.find(params[:id])

  end

  # GET /projects/new
  # GET /projects/new.json
  def new
    @projects = current_user.projects.build

  end

  # GET /projects/1/edit
   def show
    @projects = current_user.projects.find(params[:id])

  end

  # POST /projects
  # POST /projects.json
  def create
    @projects = current_user.projects.build(params[:mytime])
      if @projects.save
         redirect_to projects_path,
            notice: 'Created successfully!'
      else
        render 'new'
      end
     end 

  # PUT /projects/1
  # PUT /projects/1.json
  def update
    @projects = current_user.projects.find(params[:id])
      if @projects.update_attributes(params[:mytime])
        redirect_to projects_path,
            notice: 'Changed successfully!'
      else
        render 'edit'

   end
 end

  # DELETE /projects/1
  # DELETE /projects/1.json
  def destroy
    @projects = current_user.projects.find(params[:id])
    @projects.destroy
    redirect_to projects_url,
        notice: 'Deleted successfully!'

  end
end 

private

def require_login
  unless user_signed_in?
    redirect_to login_path,
    alert: "Please, Sign In first!"
end 
end 
```

**应用程序.html.erb**

```
<!DOCTYPE html>
<html>
<head>
  <title>Test</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <%= csrf_meta_tags %>
</head>
<body>
<div id="container">

    <div id="content">
        <% if flash[:notice] %>
        <p id="notice">
            <%= flash[:notice] %>
        </p>
        <% end %>

        <% if flash[:alert] %>
        <p id= "alert">
            <%= flash[:alert] %> 
        </p>
        <% end %>
    </div>
    <div id="footer">
    <%= link_to "Sign In", new_user_path %> |
        <% if user_signed_in? %>
        <%= link_to "Logout", logout_path, method: :delete %> |
        <%= link_to "Test", projects_path %>
        <% else %>
        <%= link_to "Login", login_path %>
        <% end %> 
        <%= yield %>
    </div>
</div>
</body>
</html> 
```

**路线.rb**

项目::Application.routes.draw 做

```
 get "pages/home"

  resources :projects
  resources :users, :only => [:new, :create]
  resources :sessions, :only => [:create]

  get "login" => "sessions#new", as: "login"
  post "sessions" => "sessions#create", as: "sessions"
  delete "logout" => "sessions#destroy", as: "logout"

  root to: 'pages#home' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T09:42:09.823

您是否使用设备进行身份验证？我自己没有使用过它，但是通过查看[设计代码](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L18)和[文档](https://github.com/plataformatec/devise)，看起来你应该`before_filter :authenticate_user!`在控制器（或某些父控制器类）中使用类似`user_signed_in?`.

请注意，从 Rails 5.1 开始，您必须`before_action`改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-16T16:44:31.467

# **您是如何生成设计模型的？**

就我而言，我以不同的方式生成它。如果你像这样生成它：

```
rails g devise User/Person 
```

然后您应该能够在您的控制器中使用它来确保用户在查看页面之前已登录：

注意我使用的是**人**而不是**用户**

```
before_action :authenticate_person! 
```

要检查他们是否已登录，请执行以下操作：

```
 <% if person_signed_in? %>
        <p>You are signed in</p>
    <% else %>
        <p>Aww you are not signed in!</p>
    <% end %> 
```

诀窍是了解这些帮助程序是根据您最初生成设计模型的方式自动生成的。

它记录在 Devise 的 github 上：

> 请注意，如果您的 Devise 模型被称为 Member 而不是 User，例如，那么可用的助手是：
> 
> ```
> before_action :authenticate_member!
> 
> member_signed_in?
> 
> current_member
> 
> member_session 
> ```

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

# 笔记：

`:authenticate_user_person`就像我生成的那个不起作用，我不知道为什么它只选择了最后一部分。如果您不确定，通常错误页面会显示：

“你的意思是#your_devise_model_name_here#？”

[![在此处输入图像描述](../Images/3d196f3d7b7626c1e04567339974ac14.png)](https://i.stack.imgur.com/3pShS.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:46:40.813

确保您安装了身份验证 gem 设计。方法'user_signed_in? ' 不是 rails3 内置的。

请参阅[设计：NoMethod 错误和 user_signed_in](https://stackoverflow.com/questions/4116484/devise-nomethod-error-user-signed-in)

# sql - SSIS 配置文件的动态位置

> ID：10717039
> 
> 赞同：1
> 
> 时间：2012-05-23T09:23:38.110
> 
> 标签：sql, ssis

SSIS配置文件的存储是否有更动态的解决方案？

根据我的阅读，常见的解决方案是为每组配置文件使用“标准”地址/文件夹

IE "C:\Config"

有没有让这更加动态？通过从变量驱动它甚至将服务器名称附加到前面以便可以使用共享位置“\server\config”？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:47:58.967

两种选择：

1.  可以将配置存储在 Windows 环境变量中。您可以在每个环境（例如，DEV、TEST、PROD）上管理和配置这些。此环境变量可以包含指向您的其他配置 (SQL) 的连接字符串，也可以直接为每个 XML 配置文件选择。

有关选择合适配置策略的更多信息：http: [//msdn.microsoft.com/en-us/library/cc671625.aspx](http://msdn.microsoft.com/en-us/library/cc671625.aspx)

1.  您可以使用相对路径，例如，将配置文件的路径定义为`.\Configs\MyConfig.dtsConfig`. SSIS 将尝试从执行 SSIS 包的路径访问 Config 目录。部署这可能很烦人，因为在调试模式下，SSIS 从`bin`项目目录执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T10:45:55.237

BIDS 2008 在相对路径上不起作用，可能是某种错误 如果您尝试输入相对路径，单击下一步会计算整个路径。最好的解决方法是打开 SSIS xml 搜索您刚刚输入的路径并将其设为相对路径。例如。

在 BIDS 包配置窗口中，您输入的路径为：c:\BIDS\abc.config 转到 Package xml 搜索上述行并替换为：..\BIDS\abc.config

并保存它。工作完成，现在如果您在 BIDS 窗口中重新打开 SSIS 并检查包配置窗口，它将显示相对路径。

要查看 xml，请转到 BIDS 的解决方案资源管理器窗口，右键单击包并单击查看代码。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:56:25.350

不是真的，当你使用 XML 配置时，你需要告诉包从哪里读取文件。这实际上不是问题，因为如果您使用 deploymentManifest 安装它，它会询问您配置文件在哪里，因此您不必太担心。

[另外，请阅读我在这篇](https://stackoverflow.com/questions/10663343/whats-are-the-advantages-disadvantages-of-different-package-configuration-in-ssi)文章中的回答，了解配置类型之间的差异。

# paypal - WSO2 ESb 贝宝集成

> ID：10717041
> 
> 赞同：1
> 
> 时间：2012-05-23T09:23:47.907
> 
> 标签：paypal, wso2, wso2esb

在 WSO2 ESB 中添加 PayPal 业务适配器的存储库的链接是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:23:13.020

[http://wso2.org/library/articles/2010/06/wso2-esb-business-service-adapter-part-1-integration-paypal-ws-api](http://wso2.org/library/articles/2010/06/wso2-esb-business-service-adapter-part-1-integration-paypal-ws-api)

上面的文章提供了更多信息。- 阿散卡

# visual-studio - 带有 SQL Server 2008 的 Visual Studio 2005 报告服务

> ID：10717056
> 
> 赞同：2
> 
> 时间：2012-05-23T09:24:20.963
> 
> 标签：visual-studio, sql-server-2008, reporting-services, visual-studio-2005

> **可能重复：**
> [Visual Studio 2005 不支持 Sql Server 2008](https://stackoverflow.com/questions/1593345/visual-studio-2005-doesnt-support-sql-server-2008)

我的 Visual Studio Reporting Service 出现问题，有时当我打开在 Reporting Services 中工作的报告进行编辑时，我收到一条错误消息：

> “不支持服务器版本。您必须拥有 Microsoft SQL Server 2005 Beta 2 或更高版本”

当我们开始使用新的 SQL Server 2008 时，这种情况开始发生。无论如何，我要问的是 - 是否可以升级到新的 Visual Studio，同时保持所有报告完整、更新和可编辑？

SQL Server 2008 也不能与 Visual Studio 2005 一起工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:30:32.450

我猜你不能使用 Visual Studio 2005 中的 SQL Server 2008 RS。你需要安装 Visual Studio 2008。我强烈建议不要坚持使用这么旧的软件。

此外，Microsoft 通常会带来向后兼容性：您可以从 Visual Studio 2008 使用 SQL Server 2005，但反之则不行。

是的，您可以将 SSRS 2008 升级到 SSRS 2008，保留所有数据。但无论如何先备份它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:39:30.577

如果您处于特定情况，我想添加一个方便的解决方法。您实际上可以使用 Visual Studio 2005 并创建 SSRS 2005 报告，并且仍然从 SQL 2008 数据中提取数据。只要您的环境中有一台仍在运行 SQL 2005 的服务器，就可以做到这一点。

您只需要为您的 2008 服务器创建一个链接服务器。然后，在 SSRS 中，为 2005 服务器创建一个数据源，但在查询中引用 2008 链接服务器，它会起作用。例如，如果您有一个名为 Chicago 的 SQL 2008 服务器和一个名为 Detroit 的 SQL 2005 服务器，您将在底特律为芝加哥创建一个链接服务器，并在 Visual Studio 2005 中为您的报表创建一个数据源，该数据源将指向到底特律。然后，在您的查询中，您只会有类似 SELECT * FROM Chicago.Database.dbo.Table 的内容，它应该可以工作。

显然，您可能希望完全切换到 2008 环境，但对于转换阶段来说这是一件好事。

希望有帮助。

# caching - 如何重新启动 AppFabric 中缓存的特定命名

> ID：10717063
> 
> 赞同：2
> 
> 时间：2012-05-23T09:24:44.397
> 
> 标签：caching, powershell, windows-server-2008, appfabric

我已经在服务器上安装了 AppFabric，我希望多个实例指向缓存。所以我为每个实例创建了命名缓存并将应用程序指向这些缓存。

现在我想清除特定命名缓存的缓存。但是我没有找到任何特定的命令。Microsoft 提供的只是“Restart-CacheCluster”。我不能使用此选项，因为这将清除所有命名缓存。

有什么办法可以重新启动/清除特定的命名缓存？

**使用 ClearRegion 后**

在使用 ClearRegion 方法时，它不会清除所有统计信息，它只是清除项目计数。那么它会伤害吗？

![在此处输入图像描述](../Images/4e7ecc01df8dfa45f3d41c341341200d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:11:03.520

有关为缓存创建方法的方法，请参见[我之前的答案。](https://stackoverflow.com/questions/4691538/asp-net-appfabric-cache-missing-flush-clear-and-count-getcount-methods/4691798#4691798)`Flush`

# java - JPA 2 和 EJB 3 的多租户支持

> ID：10717066
> 
> 赞同：1
> 
> 时间：2012-05-23T09:24:48.373
> 
> 标签：java, hibernate, jakarta-ee, jpa, glassfish

我正在尝试更改使用 JPA2 和 EJB3 以支持多租户的 Java EE Web 应用程序。

我想在我的应用程序请求开始之前设置当前租户 ID，这样应用程序本身就不必知道它在多租户环境中使用。

我试图不使用供应商特定功能来允许自己将应用程序部署到本地容器和谷歌 AppEngine。话虽如此，如果我可以从外部使用供应商特定的功能，例如 servlet 过滤器，这将是一个很好的解决方案。

我目前使用 Glassfish 3.1 作为容器，使用 Hibernate 4.0 作为 JPA2 提供程序。

示例代码将不胜感激。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:32:30.647

JPA 没有定义任何特定的多租户支持。因此，如果不使用提供者特定的功能，可能很难实现。

您可以为每个租户拥有相同的表，但使用不同的架构。然后，您可以拥有一个具有相同映射的不同持久性单元，但在附加的 orm.xml 文件中设置不同的默认模式。

有关 Glassfish 通过 EclipseLink 的多租户支持，请参阅，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Single-Table_Multi-Tenancy](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Single-Table_Multi-Tenancy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:19:27.980

我会使用两个数据库进行多租户。这样，维护仍然更简单。您可以将指标存储在线程本地并在运行时检查它以确定要使用的连接。

# java - 如何关闭 2 个线程使用的 inputStream

> ID：10717067
> 
> 赞同：1
> 
> 时间：2012-05-23T09:24:51.870
> 
> 标签：java, sockets, stream

我有 2 个线程 - 一个是接收消息，第二个是接收和发送。

```
PrintStream os = new PrintStream(sock.getOutputStream());
BufferedReader is = new BufferedReader(new InputStreamReader(sock.getInputStream()));

ServerThread server = new ServerThread(sock, maxid, os,is);
OutputThread out = new OutputThread(sock, maxid, os,is); 
```

然后，当我关闭连接时，我想正确关闭 is 和 os，但是如何在 2 个线程中同时完成呢？我`java.net.SocketException`进去`ServerThread`

```
public ServerThread(..){
    try{
          //here I use is and os

} finally {
        disconnect();
    }
}

public void disconnect() {
    try {
        System.out.println(addr.getHostName()+ " disconnected");
        os.close();
        try {
            is.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } finally {
        this.interrupt();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:35:24.143

您的线程正在从外部来源接收 is 和 os，因此关闭流的责任应由外部实体承担。不要在螺纹内关闭它们。在创建它们的地方从外部处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:32:03.957

查看[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html) 这可用于线程在其中一个关闭流之前相互等待。

# c# - EntityFramework 代码第一个异常

> ID：10717068
> 
> 赞同：0
> 
> 时间：2012-05-23T09:24:53.177
> 
> 标签：c#, entity-framework, code-first

当我尝试保存我的实体buzzmate时，我遇到了这个例外：

```
 An entity object cannot be referenced by multiple instances of IEntityChangeTracker. 
```

这是生成此异常的代码：

```
 var p = Session["mayaProfile"] as MayaProfile;
        BuzzMate buzzmate = new BuzzMate();
        buzzmate.MayaProfile = p;
        SocialBuzzCompaign socialcampaign = _buzzService.GetSocialBuzzCompaign(model.socialBuzzCompaignId);
        //Ajouter le BuzzMate
        buzzmate.SocialBuzzCompaign = socialcampaign;
        buzzmate.JoiningStatus = JoiningStatus.Approved;
        buzzmate.SelectionType = BuzzMateSelectionType.InvitedByBuzzLeader;                     
        //try
        //
        _buzzService.AddBuzzMate(buzzmate); 
```

这是 AddBuzzMate 方法：

```
 public void AddBuzzMate(BuzzMate buzzMate)
    {
        _buzzMateRepository.Insert(buzzMate);
        _buzzMateRepository.Save();
    } 
```

当我试图拯救嗡嗡声时，我有异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:44:09.440

问题很可能是`p`. 不要使用存储在会话中的实体进行持久化，否则您将无法避免此错误。尝试创建克隆`p`并将其分配给`buzzmate`，如果您使用相同的 EF 上下文进行加载`socialcampaign`和持久化`buzzmate`，它应该可以工作。

# xml - 将 xml 文档读入 XmlDocument 对象

> ID：10717069
> 
> 赞同：2
> 
> 时间：2012-05-23T09:24:57.047
> 
> 标签：xml, vb.net, web-services

我已经通过这样的网络服务发布了 xml 文档

```
<WebMethod()> _
Public Function HelloWorld() As XmlDocument
    Dim xmlDoc As New XmlDocument
    xmlDoc.Load(AppDomain.CurrentDomain.BaseDirectory & "\Product.xml")
    Return xmlDoc
End Function 
```

如何从其他 Web 服务将这个 Xml 文档读入 xmldocument 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:51:27.647

我根本不会使用 XmlDocument 作为返回类型。我建议简单地将 XML 作为字符串返回，例如：

```
<WebMethod()> _
Public Function HelloWorld() As String
    Return File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory & "\Product.xml")
End Function 
```

然后，在您的客户端应用程序中，您可以将 XML 字符串加载到 XmlDocument 对象中：

```
Dim xmlDoc As XmlDocument = New XmlDocument()
xmlDoc.LoadXml(serviceRef.HelloWorld()) 
```

但是，如果您需要保留返回 XmlDocument 的方法，请记住它是一个复杂类型，因此在客户端，它将表示为代理类型，而不是实际的 XmlDocument 类型。因此，您需要创建一个新的 XmlDocument 并从代理的 xml 文本中加载它：

```
Dim xmlDoc As XmlDocument = New XmlDocument()
xmlDoc.LoadXml(serviceRef.HelloWorld().InnerXml) 
```

# asp.net - Visual Studio 2010 SP1 上的 ASP.NET 代码分析

> ID：10717070
> 
> 赞同：0
> 
> 时间：2012-05-23T09:24:59.067
> 
> 标签：asp.net, code-analysis, fxcop, visual-studio-2010

我正在尝试从 CodePlex 安装[Fxcop ASP.NET 安全规则](http://fxcopaspnetsecurity.codeplex.com/)，如 MSDN 杂志文章中所述：[使用 Visual Studio 2010 代码分析提高 ASP.NET 安全性](http://msdn.microsoft.com/en-us/magazine/gg490350.aspx)

我正在使用 VS 2010 SP1 Ultimate，我无法让它加载要在 IDE 中使用的规则。我已将包包含的 DLL 文件复制到 VS 似乎正在寻找规则但我没有规则集文件的不同文件夹中。

有没有人知道在不外部使用 FXcop 的情况下使其工作的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:00:40.270

如果您有一个规则集文件（一个带有`*.ruleset`扩展名的文件），那么您可以直接在 VS 中添加它们。

> 右键单击您的项目->选择属性->在道具窗口中选择代码分析选项卡->单击打开按钮

这将打开规则窗口。选择`add ruleset`如下屏幕所示的按钮

![在此处输入图像描述](../Images/8583fd9dc48803f02603d5c0d9005be9.png)

这将弹出另一个规则窗口，如下所示 -> 单击`add rules`按钮 -> 浏览规则集文件所在的文件位置 -> 选择文件并单击确定。

![在此处输入图像描述](../Images/ec6c8a7ec97865c5c70d59abc023d345.png)

# mysql - 更新 mysql 中的值，该值是从另一个没有级联的表中引用的

> ID：10717071
> 
> 赞同：0
> 
> 时间：2012-05-23T09:25:00.650
> 
> 标签：mysql

假设 'id' 是表 A 的 PK。
假设 'a_id' 是 FK，指的是表 B 中的表 A

我没有在更新时设置级联。

现在如何更新表 A 中某一行的 id？`update table`（如果发出简单的命令，显然约束将失败）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:37:00.583

1.  放弃 FK 约束
2.  修复你的数据
3.  重新创建 FK 约束

我怀疑“修复你的数据”可能可以通过*插入*一个新行来实现，该行的 ID 是你要更新现有行的 ID，而不是更新一行：如果有任何行，你仍然需要旧 ID B指向它。

# java - RabbitMQ 消息属性

> ID：10717072
> 
> 赞同：3
> 
> 时间：2012-05-23T09:25:05.863
> 
> 标签：java, rabbitmq

我在 RabbitMQ 中有这样的代码：

```
byte[] rawBytes = serialize(trxEntities);    
byte[] zipped = rawBytes;  
if (shouldBeCompress) {  
zipped = compressor.compress(rawBytes);  
}  
BasicProperties persistentBasic = MessageProperties.PERSISTENT_BASIC;  
channel.basicPublish("", queueName, persistentBasic, zipped); 
```

正如你所看到的，我的一些消息应该与其他一些不应该一起压缩。
有什么方法可以设置任何属性来告诉消费者“嘿！这是一条压缩消息”？

PS。“ *com.rabbitmq.client.AMQP.BasicProperties.BasicProperties(..., Map headers, ...)* ”对我有帮助吗？我的意思是我可以在 BasicProperties.header 中设置任何参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:16:13.073

我想你可以在标题中添加任何你喜欢的东西。但是，有一个名为“contentEncoding”的字段，我认为它更适合这种情况。您可以只在此字段中输入“gzip”、“deflate”或压缩算法，请查看此页面以了解为 HTTP 定义的那些编码：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec3 .html#sec3.5](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:10:33.330

你可以使用它的包装器：

```
 public class wrapper(){
    public boolean isZipped;
    public String serializedMessage;
} 
```

然后使用 [Java Serializable Object 将此消息序列化为字节数组](https://stackoverflow.com/questions/2836646/java-serializable-object-to-byte-array)

或者您可以使用以下代码：

```
persistentBasic = persistentBasic.builder().headers(filter).build(); 
```

并将适当的过滤器放在标题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:32:35.883

对于我正在使用 RabbitMQ 的项目，我们使用标头字段来识别内容类型和内容编码

例如，队列中的纯文本消息将读取

`{'type' : 'plaintext', 'encoding' : 'utf-8'}`

压缩后的数据流经过Base64处理后发送

`{'type' : 'gzip', 'encoding' : 'base64'}`

RabbitMQ 没有标准化的机制来识别内容类型和编码，您可以采用自己的标准或选择常用的标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T16:48:11.123

是的你可以！

我们使用`type`字段指定发送的消息（例如 USER_INFO、HEARTBEAT 等）和`contentEncoding`指定压缩的字段（如果有）：

```
AMQP.BasicProperties.Builder propsBuilder = new AMQP.BasicProperties.Builder();
propsBuilder.type(typeName);
if (compress)
{
  propsBuilder.contentEncoding("zip");
}
BasicProperties props = propsBuilder.build();
channel.basicPublish(targetExchange, "", true, props, data);

// and receiving works like this:
Delivery delivery = consumer.nextDelivery();
byte[] data = delivery.getBody();
BasicProperties props = delivery.getProperties();
String typeName = props.getType();
String replyToServerId = props.getReplyTo();
String contentEncoding = props.getContentEncoding(); 
```

# mysql - MySQLdb - libmysqlclient_r 卡在 read() 上

> ID：10717073
> 
> 赞同：0
> 
> 时间：2012-05-23T09:25:07.380
> 
> 标签：mysql, pthreads, python-2.7, mysql-python, libmysql

我正在编写一个读/写 MySQL DB 的多线程 python 应用程序（使用 MySQLDB 和 libmysqlclient_r - 线程安全库）。

在某些时候（不确定为什么或何时），其中一个线程卡住了。

```
#0  0x00007f6c124ad14d in read () from /lib/libpthread.so.0
#1  0x00007f6c0d78f759 in vio_read_buff () from /usr/lib/libmysqlclient_r.so.16
#2  0x00007f6c0d79086f in ?? () from /usr/lib/libmysqlclient_r.so.16
#3  0x00007f6c0d790c75 in my_net_read () from /usr/lib/libmysqlclient_r.so.16
#4  0x00007f6c0d78afca in cli_safe_read () from /usr/lib/libmysqlclient_r.so.16
#5  0x00007f6c0d78b7a9 in ?? () from /usr/lib/libmysqlclient_r.so.16
#6  0x00007f6c0d789adc in mysql_real_query () from /usr/lib/libmysqlclient_r.so.16
#7  0x00007f6c0db24aad in ?? () from /usr/lib/pymodules/python2.6/_mysql.so
#8  0x00000000004a7ba5 in PyEval_EvalFrameEx ()
#9  0x00000000004a84a0 in PyEval_EvalFrameEx () 
```

知道为什么 read () 不返回吗？它偶尔会发生一次。

笔记！大约有 6 个不同的线程连接到该数据库并在其上查询/执行。

它可能是一个错误的查询字符串吗？API 使用不当？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:19:05.753

如果您在线程之间共享单个连接，那就是问题所在。MySQL 客户端库/协议不允许这样做。您可以安全地为每个线程提供自己的连接，并且它们不会相互阻塞。

# sql - 在存储过程中传递错误信息

> ID：10717074
> 
> 赞同：1
> 
> 时间：2012-05-23T09:25:15.800
> 
> 标签：sql, tsql, sql-server-2008

我编写了一些存储过程来将 2 个表数据传输到一个新的合并表。

*   表 1 -> OldUsers 表
*   表 2 -> 猎人表
*   表 3 -> 用户表

表结构：

```
CREATE TABLE [dbo].[Users]
(
    [uid] [int] IDENTITY(1,1) NOT NULL,
    [username] [varchar](50) NULL,
    [password] [varchar](50) NULL,
    [state] [int] NULL,
    [name] [varchar](50) NULL,
    [license] [varchar](50) NULL,
    [lansno] [varchar](50) NULL,
    [curcuit_no] [varchar](50) NULL,
    [communism] [varchar](100) NULL,
    [Olduid] [int] NULL,
    [Is_hunter] [bit] NULL,
    [free_text] [text] NULL,
    [country] [varchar](50) NULL,
    [curcuit] [varchar](50) NULL,
    [license_territory] [varchar](50) NULL,
    [forest] [varchar](50) NULL,
    [association] [varchar](50) NULL,
    [hunt_ar] [varchar](50) NULL,
    [area] [varchar](50) NULL,
    [contract] [varchar](50) NULL,
    [radio_frequency] [varchar](50) NULL,

    CONSTRAINT [PK_timeuser] 
        PRIMARY KEY CLUSTERED ([uid] ASC)
) 
```

我写了一些存储过程来导入数据。但是当我正常执行时，然后传递 ALL NULLS（整个表都填充了 NULLS）。之后我删除

```
Where @uid = @index; 
```

然后执行。然后我看到一个 id 到处重复。

```
ALTER PROCEDURE [dbo].[UserTransfer]
AS
    declare @OldUser_tbl_count int;
    declare @Hunters_tbl_count int;

    declare @index int;
    set @index = 1;

    declare @uid int;
    declare @usr varchar(50);
    declare @psw varchar(50);
    declare @stat int;
    declare @name varchar(50);
    declare @license varchar(50);
    declare @lansno varchar(50);
    declare @curcuit varchar(50);
    declare @commu varchar(100);
    declare @sid int;
    --declare @text text;
    declare @country varchar(50);
    declare @curc varchar(50);
    declare @terri varchar(50);
    declare @forest varchar(50);
    declare @assoc varchar(50);
    declare @hunt varchar(50);
    declare @area varchar(50); 
    declare @contract varchar(50);
    declare @radio varchar(50);
    declare @town varchar(100);
    declare @lans varchar(50);

    --SET @OldUser_tbl_count = (SELECT COUNT (*) from OldUsers)
    SELECT @OldUser_tbl_count = COUNT (*) from OldUsers;
    SELECT @Hunters_tbl_count = COUNT (*) from Hunters;

-- entering from OldUsers to Users tbl
while(@index <= @OldUser_tbl_count)
BEGIN
    Select @uid=OldUsers.uid , @usr=OldUsers.username , @psw=OldUsers.password , @stat=OldUsers.state,
@name = dbo.OldUsers.name, @license=OldUsers.license,@curcuit= OldUsers.curcuit_no,@commu= OldUsers.communism,@lans=OldUsers.lansno
FROM OldUsers 
Where @uid=@index;

INSERT INTO Users
Values (@usr,@psw,@stat,@name,@license,@lans,@curcuit,@commu,@uid,0,'','','','','','','','','','');

SET @index = @index+1;
END

-- entering from Hunters to Users tbl
While (@index <= @Hunters_tbl_count)
BEGIN
SELECT @uid=Hunters.id,@license=Hunters.licence,@name=Hunters.hunter,@country=Hunters.country,@curc=Hunters.circuit,
@terri=Hunters.licence_territory,@forest=Hunters.forest,@assoc=Hunters.association,@hunt=Hunters.hunt_ar,@area=Hunters.area,
@contract=Hunters.contract,@radio=Hunters.radio_frequency,@town=Hunters.town

From Hunters
Where @uid = @index;

INSERT INTO Users
VALUES      ('','','',@name,@license,'','',@town,@uid,1,'',@country,@curc,@terri,@forest,@assoc,@hunt,@area,@contract,@radio);

SET @index=@index+1;
END

-exec UserTransfer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:42:41.507

避免使用 WHILE，它会严重影响性能，就像使用 CURSOR。在这种情况下，我建议使用 INSERT INTO...SELECT，[查看 Pinal Dave](http://blog.sqlauthority.com/2011/08/10/sql-server-use-insert-into-select-instead-of-cursor/)的此链接，了解如何用 INSERT INTO...SELECT 子句替换游标的详细说明。

查看[Microsoft MSDN 网站](http://msdn.microsoft.com/es-es/library/ms174633%28v=sql.105%29.aspx)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:33:19.903

我可以建议一种不同的方法吗？

尝试调整这个：

```
INSERT INTO Users 
select username, password,state, name, license, lansno, curcuit_no, communism, uid,0,'','','','','','','','','',''
from OldUsers 
```

您可能必须在插入后添加列名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:52:24.947

更改`Where @uid=@index;`为`OldUsers.uid`老用户

和

`Where @uid = @index;` 对 `Hunters.id`猎人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:57:50.933

你能试试这两个插件吗？

```
INSERT INTO Users
Select username, [password], [state], name, license, lansno, curcuit_no, communism, [Uid], 0 ,'','','','','','','','','',''
FROM OldUsers 

INSERT INTO Users
SELECT '', '', '', Hunter, licence, '', '', town, ID, 1, '', country, circuit, licence_territory, forest, association, hunt_ar, area, [contract], radio_frequency
From Hunters 
```

您可以一次完成，而不是逐条选择和插入数据记录。请检查[此链接到 Sql Server 文档](http://msdn.microsoft.com/en-us/library/ms174335%28v=sql.105%29.aspx)。

# jquery - 如何获取相对元素的位置？

> ID：10717075
> 
> 赞同：0
> 
> 时间：2012-05-23T09:25:18.250
> 
> 标签：jquery, css-position

我有`div`一个`relative`位置，但我需要`absolute`在那一刻获得实际位置。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:27:00.843

使用`offset()`.

```
var top = $("#myElement").offset().top;
var left = $("#myElement").offset().left; 
```

[**示例小提琴**](http://jsfiddle.net/GdjLt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:27:02.430

对于 JQuery，您可以使用[`offset`](http://api.jquery.com/offset/)：

```
var pos = $(element).offset();
console.log("Left: " + pos.left);
console.log("Top: " + pos.top); 
```

**演示：http:** [//jsfiddle.net/NVVFM/](http://jsfiddle.net/NVVFM/)

# java - 使用java从URL中删除jsessionid的正则表达式

> ID：10717078
> 
> 赞同：3
> 
> 时间：2012-05-23T09:25:27.547
> 
> 标签：java

我需要从给定的 URL 中删除 jsessionid。jessionid 不在查询部分中，例如我有类似的 URL

```
http://example.com/index.do;jsessionid=XXXXXXXXXXXXXXX?username=example 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:33:30.040

尝试这个：

```
url = url.replaceAll(";jsessionid=[^?]*", ""); 
```

无论您的 url 是否有任何参数，这都将起作用，例如，它适用于这两个参数：

*   `http://example.com/index.do;jsessionid=XXXXXXXXXXXXXXX`
*   `http://example.com/index.do;jsessionid=XXXXXXXXXXXXXXX?username=example`

它采用正则表达式“向前看”来捕获（但不包括）`?`输入的 a 或 end。

# c# - 屏幕抓取执行 ajax 请求的页面

> ID：10717079
> 
> 赞同：2
> 
> 时间：2012-05-23T09:25:33.727
> 
> 标签：c#, screen-scraping

我正在尝试使用带有 httpwebrequest 的 c# 中的此屏幕抓取来获取页面的 html

当我尝试废弃一个普通页面时它工作正常..但是现在如果我尝试获取正在加载 ajax 请求的页面的 html，我会遇到麻烦...这是我尝试时发送的两个请求得到那个页面..

绕过登录的正常请求

```
POST (http)://example/user/login?destination=/events/Sports HTTP/1.1
Host: example
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: (http)://example/user/login?destination=/events/Sports
Cookie: has_js=1; SESSee201d4242c83ea2671330cdceee4623=qdco8gukcm2pk9offdof1uv3a0
Content-Type: application/x-www-form-urlencoded
Content-Length: 121

name=Username&pass=Password&remember_me=1&form_build_id=form11cb87efa605eb9fb384eb9d2a2c686e&form_id=user_login&op=Go 
```

AJAX 请求获取数据

```
GET (http)://example/views/ajax?name=Sports&view_name=Events&view_display_id=page_1&view_args=Sports&view_path=events%2FSports&view_base_path=events&view_dom_id=1&pager_element=0 HTTP/1.1
Host: example
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: application/json, text/javascript, */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: (http)://example//events/Sports
Cookie: has_js=1; SESSee201d4242c83ea2671330cdceee4623=vd36esbpe8065snbfo39ubhmk3
If-Modified-Since: Wed, 23 May 2012 08:13:51 GMT 
```

我曾尝试以这种方式编写代码，但它不起作用..

```
string sid = String.Empty;
string uri = "http://example/user/login?destination=/events/Sports";
string postData = string.Format("name=UserName&pass=Password&remember_me=1&form_build_id=form-11cb87efa605eb9fb384eb9d2a2c686e&form_id=user_login&op=Go");
byte[] postBytes = Encoding.UTF8.GetBytes(postData);

//web request

HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(uri);
req.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0";

req.KeepAlive = true;

////set the cookie
Cookie cookie = new Cookie();
cookie.Name = "Sports";

cookie.Domain = "SESSee201d4242c83ea2671330cdceee4623";
req.CookieContainer = new CookieContainer();
req.CookieContainer.Add(cookie);

req.Headers.Add("Accept-Encoding", "gzip, deflate");
req.Headers.Add("Accept-Language", "en-us,en;q=0.5");
req.Method = "POST";
req.Host = "example";
req.Referer = "http://example/user/login?destination=/events/Sports";
req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

req.ContentType = "application/x-www-form-urlencoded";
req.ContentLength = postBytes.Length;

//getting the request stream and posting data
StreamWriter requestwriter = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
requestwriter.Write(postData);
requestwriter.Close();
string url = "http://example/views/ajax?name=Sports&view_name=Events&view_display_id=page_1&view_args=Sports&view_path=events%2FSports&view_base_path=events&view_dom_id=1&pager_element=0";

HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0";
request.KeepAlive = true;
request.Headers.Add("X-Requested-With", "XMLHttpRequest");
request.Headers.Add("Accept-Encoding", "gzip, deflate");
request.Headers.Add("Accept-Language", "en-us,en;q=0.5");
request.Host = "example";
request.Method = "GET";
request.Referer = "http://example//events/Sports";
request.Accept = "application/json, text/javascript, */*";

request.CookieContainer.Add(cookie);
request.ContentType = "text/javascript; charset=utf-8";

try
{
    HttpWebResponse res = (HttpWebResponse)request.GetResponse();
    StreamReader sr = new StreamReader(res.GetResponseStream());
    sid = sr.ReadToEnd().Trim();
}
catch {} 
```

我进入`{ "status": false, "display": "", "messages": "" }`字符串 sid 而不是它应该给我状态 true 并显示一些值..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:34:43.910

您正在为每个请求创建一个新的 CookieContainer，因此假设您的登录请求返回一个包含会话 ID 的 cookie，那么您的下一个请求将不会在 cookie 容器中包含该会话 ID。

对两个请求使用相同的 CookieContainer，即：

```
 //web request

    HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(uri);
    req.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0";

    req.KeepAlive = true;

    CookieContainer cookies = new CookieContainer();
    req.CookieContainer = cookies;

    req.Headers.Add("Accept-Encoding", "gzip, deflate");
    req.Headers.Add("Accept-Language", "en-us,en;q=0.5");
    req.Method = "POST";
    req.Host = "example";
    req.Referer = "http://example/user/login?destination=/events/Sports";
    req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

    req.ContentType = "application/x-www-form-urlencoded";
      req.ContentLength = postBytes.Length;

    //getting the request stream and posting data
      StreamWriter requestwriter = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
      requestwriter.Write(postData);
      requestwriter.Close();

      var firstResponse = req.GetResponse();
      using(var sr = new StreamReader(firstResponse.GetResponseStream()) {
          sr.ReadToEnd();
      }

      string url = "http://example/views/ajax?name=Sports&view_name=Events&view_display_id=page_1&view_args=Sports&view_path=events%2FSports&view_base_path=events&view_dom_id=1&pager_element=0";

      HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
      request.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0";
      request.KeepAlive = true;
      request.Headers.Add("X-Requested-With", "XMLHttpRequest");
      request.Headers.Add("Accept-Encoding", "gzip, deflate");
      request.Headers.Add("Accept-Language", "en-us,en;q=0.5");
      request.Host = "example";
      request.Method = "GET";
      request.Referer = "http://example//events/Sports";
      request.Accept = "application/json, text/javascript, */*";

      request.CookieContainer = cookies;
      request.ContentType = "text/javascript; charset=utf-8";

    try
    {
        HttpWebResponse res = (HttpWebResponse)request.GetResponse();
        StreamReader sr = new StreamReader(res.GetResponseStream());
        sid = sr.ReadToEnd().Trim(); 
```

# jquery - IE 7 中的 jQueryRotate 插件

> ID：10717083
> 
> 赞同：0
> 
> 时间：2012-05-23T09:25:54.317
> 
> 标签：jquery

我正在尝试在本教程 [http://usejquery.com/posts/create-a-unique-gallery-by-using-z-index-and-jquery](http://usejquery.com/posts/create-a-unique-gallery-by-using-z-index-and-jquery)中制作图像滑块，并且我正在尝试创建图像旋转使用 JQueryRotate 插件的效果，它在除 IE 7 之外的所有浏览器中都可以正常工作，其中图像忽略 z-index 如果我删除 Rotate 函数，它工作正常这是我的代码：http: [//jsfiddle.net/syaa3/4/](http://jsfiddle.net/syaa3/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:36:02.333

您是否尝试过使用这里的 jQueryRotate ver.3

[https://code.google.com/p/jqueryrotate/source/browse/#svn%2Ftrunk](https://code.google.com/p/jqueryrotate/source/browse/#svn%2Ftrunk)

也许它会解决你的问题？

# yaml - YAML 锚点/引用可以跨文件/文档出现吗？

> ID：10717087
> 
> 赞同：19
> 
> 时间：2012-05-23T09:26:12.960
> 
> 标签：yaml

刚开始使用 YAML 并想确认是否可以在单独的文件或一个文件中的单独文档中使用其锚 ( `&`) 和引用 ( ) 功能。`*`例如，对于后者：

```
--- # Document A
Lunch: &lunch01     # Already thinking of lunch ;-)
    - BBQ Chicken
    - Sirloin Steak
    - Roast Beef
    - Salmon
...

--- # Document B
Monday:    *lunch01
Tuesday:   closed
Wednesday: *lunch01
Thursday:  closed
Friday:    *lunch01
... 
```

（抱歉，如果我的语法不正确，仍然试图从数组和字典的角度转换。）

这行得通吗？或者我会通过在运行时将数据合并到我选择的编程语言中来解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T08:27:34.083

我不是 YAML 专家，但根据我的经验，这不起作用。我正在使用 PyYAML，解析器在到达引用时抛出错误，抱怨“未定义的别名”。

因此，您必须在运行时合并数据。

# c - 我无法理解优先级倒置是如何发生的

> ID：10717090
> 
> 赞同：1
> 
> 时间：2012-05-23T09:26:34.223
> 
> 标签：c, operating-system, embedded, scheduled-tasks, rtos

HPT -> 最高优先级任务。
MPT -> 中优先级任务
LPT -> 低优先级任务

您好朋友，我从许多网站（例如[http://www.embeddedheaven.com/priority-inversion-2.htm](http://www.embeddedheaven.com/priority-inversion-2.htm)）阅读了优先级反转。但是我想知道，为什么HPT不能抢占LPT？如果您将阅读第 3.3 节无界反转，它会说明 LPT 是否已获取资源，同时如果 HPT 已准备好但由于 LPT 而被阻止。但是如果 MPT 准备好了，它就会抢占 LPT 并自行执行。然后LPT必须等到MPT完成。一旦 MPT 完成，LPT 就会恢复。一旦 LPT 完成，HPT 就会开始。所以我的问题是为什么HPT不能抢占LPT或MPT？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T10:40:26.680

维基百科的解释可能比您提供的链接更容易理解：[https ://en.wikipedia.org/wiki/Priority_inversion](https://en.wikipedia.org/wiki/Priority_inversion)

用稍微不同的话回答你的问题，大致按时间顺序发生的是

1.  LPT获得R
2.  MPT 变得可运行，从而抢占 LPT
3.  HPT 变得可运行，从而抢占 MPT
4.  HPT 尝试获取 R 和块
5.  调度程序选择可运行的最高优先级任务，即 MPT。
6.  MPT 无限运行（可能“永远”），从而阻止 LPT 运行并释放 R，从而阻止 HPT 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:42:55.310

如果较低优先级的任务*还*拥有一些独占资源，那么抢占（以便任务获得 CPU 时间）是不够的。然后，高优先级任务将尝试获取资源（例如，通过锁定互斥锁），这将阻塞它，直到低优先级任务完成资源。

因此，较高优先级的任务最终被阻塞（未运行），而较低优先级的任务开始运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:17:26.383

优先级倒置是一种无限期推迟具有共享资源的优先执行官的形式。

当高优先级任务请求访问当前分配给低优先级任务的共享资源时，就会发生优先级反转。高优先级任务必须被阻塞，直到低优先级任务释放资源。

当一个或多个中等优先级任务阻止执行低优先级任务时，这个问题变得复杂。因为低优先级任务没有执行，它不能完成与资源的交互并释放该资源。因此，有效地防止了高优先级任务被低优先级任务执行。

# xsd - XSD 架构验证

> ID：10717091
> 
> 赞同：1
> 
> 时间：2012-05-23T09:26:39.090
> 
> 标签：xsd, xsd-validation

我有一个关于如何使用 XSD Schema 来验证 XML 格式的问题。

我已经成功编程以使用 XSD 模式验证 XML 格式。但是，我需要将 xx.xsd 放在当前项目的主要位置。无论如何将 xsd 模式嵌入到程序集中，这样我就不需要总是将 xxx.xsd 放在可执行程序集的相同位置。我试图将它嵌入到项目的资源中，但是当使用像 resgen xxx.xsd 这样的 VS 命令提示符时，我似乎无法重新生成 XSD 文件。它说此命令不支持扩展名。

有没有其他方法可以解决这个问题。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:09:18.423

如果您只处理一个 XSD（没有外部引用），那么 @Romil 的答案就是您所需要的。但是，如果您转而使用组件化 XSD（通过 xsd:include/import/redefine 链接的 XSD 集），那么该解决方案将无法正常工作。[SO上的这篇文章](https://stackoverflow.com/questions/7982275/how-can-i-resolve-the-schemalocation-attribute-of-an-xsd-when-all-of-my-xsds)向您展示了如何正确解决它；您需要构建和使用自己的解析器，它将能够从嵌入式资源中提供这些引用，并且非常重要的是，您需要在以下情况下提供基本 URI（通常是使用某些专有方案的组合 URL）创建第一个阅读器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:29:20.233

第 1 步：像往常一样将 XSD 添加到您的类库项目中

步骤 2：右键单击 XSD 文件的属性，然后在 Build Action 下选择“Embedded Resource”</p>

第 3 步：修改代码，如下所示

```
XmlSchemaSet schemaSet = new XmlSchemaSet() ;
schemaSet.Add("", XmlReader.Create(xmlSchema)); 
```

至

```
TextReader schemaStream =
    new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream(xmlSchema));
XmlSchemaSet schemaSet = new XmlSchemaSet() ;
schemaSet.Add("",XmlReader.Create(schemaStream)); 
```

# javascript - 当 JSON 返回“成功”时，EXT.Ajax.request 将成功：false

> ID：10717100
> 
> 赞同：4
> 
> 时间：2012-05-23T09:27:09.317
> 
> 标签：javascript, ajax, extjs

我有这个 EXT JS 代码：

```
Ext.Ajax.request({
                url     : "xxx",
                method  : "POST",
                params  : params,
                success : function(response) {
                            success();

                },
                failure : function(){
                            fail();
                }
        }); 
```

url`xxx`返回这段 JSON。

```
{"success": false } 
```

由于某种原因，这永远不会失败。它从不运行该`fail()`方法，总是`success()`。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:22:34.980

只有当请求在网络级别失败时，它才会调用失败处理程序 - 如果您收到服务器错误或服务器不会返回任何内容。否则它将成功，您需要解析响应以查看它是否是逻辑失败。

# html - 臭名昭著的两个 Div 紧挨着

> ID：10717101
> 
> 赞同：5
> 
> 时间：2012-05-23T09:27:14.120
> 
> 标签：html, css, facebook

我知道有很多关于这个的问题，我已经尝试了很多解决方案，但我无法让它发挥作用。我在 facebook 画布页面（810px）中有两个 div，我希望它们彼此相邻显示。目前一个在另一个之上。这是我的代码：

```
<div class="tab_content tab1" >
 <div id="dialerdiv1" style="float: left; margin-right: 405px;">
    <embed type="application/x-shockwave-flash" wmode="opaque"
    src="thesource"
    width="301"
    height="401"
    id="popUpSwf"
    name="popUpSwf"
    quality="high"
    border="none"
    allowscriptaccess="always"
    pluginspage="http://www.adobe.com/go/getflashplayer"
    scale="noscale"
    menu="false"
    flashvars="..." />
 </div>
 <div id="dialerdiv2" style="float: right; width: 405px;">
      <embed type="application/x-shockwave-flash" wmode="opaque"
      src="thesource"
      width="301"
      height="401"
      id="popUpSwf"
      name="popUpSwf"
      quality="high"
      border="none"
      allowscriptaccess="always"
          pluginspage="http://www.adobe.com/go/getflashplayer"
      scale="noscale"
      menu="false"
      flashvars="..." />            
 </div>
</div> 
```

如何让这两个内部 div 彼此相邻？另外，我尝试使用表格，它可以工作，但是 Firefox 将这些 td 单元格移动到画布区域的外部，我无法让它们居中（只有 Firefox）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:32:27.343

如果父 div 的`<div class="tab_content tab1">`可用宽度超过 810px，那么下面的代码应该可以正常工作。

```
<div class="tab_content tab1">
    <div id="dialerdiv1" style="float: left; width: 405px;">
        <embed ... />
    </div>
    <div id="dialerdiv2" style="float: left; width: 405px;">
        <embed ... />            
    </div>
    <div style="clear: both;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:47:04.370

如果您更改第二个 div 的宽度，它应该可以工作。

```
<div id="dialerdiv2" style="float: right; width: 370px;"> 
```

它也应该像这样工作

```
 <div id="dialerdiv1" style="float: left; margin-right: 390px;">
            ......
         </div>
         <div id="dialerdiv2" style="float: right; width: 390px;">
            ........
         </div> 
```

问题来自 div 的大小和可用空间。与他们一起玩一点，您将找出要使用的正确值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:34:57.813

您是否删除了正文边距和填充？

```
body{margin:0;padding:0} 
```

# asp.net-mvc-2 - 在 MVCSiteMapProvider 2.3.1 中编辑面包屑 Html

> ID：10717103
> 
> 赞同：0
> 
> 时间：2012-05-23T09:27:25.223
> 
> 标签：asp.net-mvc-2, mvcsitemapprovider

我已经通过 nuget 为我的 MVC2 项目安装了 MVCSiteMapProvider，但是我无法调整面包屑的显示。基本上我对帮助文件所做的任何更改都不会反映在浏览器中，我什至可以将整个内容注释掉，但它仍然可以在页面上正确呈现，只是使用默认标记。

我想在 Html 中添加几个类来帮助我设置面包屑菜单的样式。我尝试在整个项目中搜索渲染标记的片段，但没有返回任何结果，导致我认为构建 Html 的代码被锁定在 DLL 中。有谁知道我做错了什么？或者我怎样才能达到我想要的？

提前致谢！

我想要的标记（被忽略）在 SiteMapPathHelperModel.ascx 文件中：

```
<% foreach (var node in Model)
{ %>
    <div class="node-left"></div>
    <div class="node-label">
        <%=Html.DisplayFor(m => node)%>
    </div>
    <div class="node-right"></div>

<% if (node != Model.Last())
   { %>
        &gt;
<% } %> 
```

我使用构建面包屑

```
<div id="breadCrumb">
   <%= Html.MvcSiteMap().SiteMapPath() %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:57:26.587

这有点晚了，但我最近这样做了，也使用 MVC2 并且没有 Razor。我在 Views/Shared/ 中创建了一个名为“DisplayTemplates”的新文件夹，并在该文件夹中创建了一个名为“SiteMapPathHelperModel”的新 .ascx 文件...

ascx 文件包含以下代码：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<MvcSiteMapProvider.Web.Html.Models.SiteMapPathHelperModel>" %>
<%@ Import Namespace="System.Web.Mvc.Html" %>
<ul id="crumbs">    
    <% foreach (var node in Model.Nodes) { %>
        <% if (!node.IsClickable)
           { %>
           <li><span class="noclick"><%=Html.DisplayFor(m => node)%></span>
        <%}
           else
           { %>
            <li><%=Html.DisplayFor(m => node)%>
        <%} %>
        <% if (node.Children.Any())
            { %>
           <%=Html.DisplayFor(m => node.Children)%>
        <% } %>
        </li>
    <% } %>
</ul> 
```

然后在您的视图中正确调用它只是一个简单的问题。为此我做了：

```
<div id="breadcrumbs">        
        <%= Html.MvcSiteMap().SiteMapPath() %>            
</div> 
```

一切都很好。我需要一个特定的标记，这样我想使用的 CSS 才能正常工作。

# python - Matplotlib 中许多子图的通用标题

> ID：10717104
> 
> 赞同：50
> 
> 时间：2012-05-23T09:27:25.130
> 
> 标签：python, matplotlib

我正在 matplotlib 中制作一个图表，其中有许多子图，每个子图都有不同的标题，但在顶部，我还想为整个图表添加一个标题。如何做到这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-23T09:32:04.697

除了子图标题外，您还可以使用该[`pyplot.suptitle`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.suptitle)命令为*图形添加居中的标题。*

# c++ - 可以将不同的 GCC 方言联系在一起吗？

> ID：10717106
> 
> 赞同：17
> 
> 时间：2012-05-23T09:27:29.590
> 
> 标签：c++, gcc, linker, undefined-behavior, dialect

我知道原则上这可能是未定义的行为，但为了处理大型项目，这是我关于 GCC 的问题：

假设我使用完全相同的编译器安装编译一个转换单元`gcc -std=c++98`和另一个转换单元。`-std=c++11`是否有任何保证可以链接两个目标文件并获得定义明确的程序？

据我所知，由于宏的不同，潜在的问题只能来自库头的不同视图，而这些反过来最多只会向标准库类*添加*新的成员函数，但绝不会添加成员对象。

这会以某种方式使编译具有不同语言方言选项的大型项目的不同部分变得可以接受吗？

**更新：**我应该添加一个正交问题：如何使用两个*不同*版本的 GCC（比如 4.3 和 4.6），但是使用*相同*的方言选项（`-std=c++98`）？[此 GCC 文档中](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)的列表似乎表明该库在 4.2.2 和 4.6 之间的两个方向上都兼容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:53:53.470

先验的，没有。最安全的解决方案是假设*所有*编译器选项都是相同的，除非编译器专门记录该选项不会影响二进制兼容性。（大多数编译器都非常缺乏文档。）在实践中，在缺乏文档的情况下，控制警告的选项（`-W...`在 g++ 中）不会影响二进制兼容性，而影响代码生成的选项（语言级别等）可能：g++ 通常在不同级别的优化之间保持兼容性，而 VC++ 则没有。

另一个真正的问题是在命令行中定义预处理器符号。同样，最安全的赌注是所有定义都是相同的，但同样，一些常识是有序的：很难期望标准库已经使用项目中使用的预处理器符号进行编译（例如`MYPROG_CONFIG_FILE_LOCATION`， ）。另一方面，请注意预处理器定义`_GLIBCXX_DEBUG`and`_GLIBCXX_DEBUG_PEDANTIC`会影响二进制兼容性（尽管 g++ 确保如果您始终使用它们，您将获得与它们一起使用的库版本）。

关于您的问题：由于标准版本，我不希望对二进制兼容性产生太大影响，*但是*如果选择会影响某些预定义的预处理器符号，我不会感到惊讶，这会破坏库中的二进制兼容性，就好像你编译了一些带有 的模块`_GLIBCXX_DEBUG`，而有些没有。它可能会起作用，但我不会指望它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-05T22:15:00.317

> 我知道原则上这可能是未定义的行为，

它不是。

> 假设我使用完全相同的编译器安装编译一个转换单元`gcc -std=c++98`和另一个转换单元。`-std=c++11`是否有任何保证可以链接两个目标文件并获得定义明确的程序？

是的，这是受支持且有效的（有例外，例如在一个对象中启用调试模式而不是另一个，或者使用显式 ABI 更改选项，例如在一个对象中而不是另一个对象`-fshort-enums`中，但这应该很明显，因为那不会即使您`-std`对两个对象使用相同的选项也可以工作）。

> 据我所知，由于宏的不同，潜在的问题只能来自库头的不同视图，而这些宏又最多会向标准库类添加新的成员函数，但绝不会添加成员对象。

正确的。

> 这会以某种方式使编译具有不同语言方言选项的大型项目的不同部分变得可以接受吗？

对于 GCC，是的，绝对是。作为证明它是可以的，考虑它`libstdc++.so`本身包含一些用 构建的对象`-std=c++98`和一些用`-std=c++14`.

> 更新：我应该添加一个正交问题：如何使用两个不同版本的 GCC（比如 4.3 和 4.6），但是使用相同的方言选项（-std=c++98）？此 GCC 文档中的列表似乎表明该库在 4.2.2 和 4.6 之间的两个方向上都兼容。

不是双向，您需要使用`libstdc++.so`来自 GCC 4.6（或更高版本）的，因为使用该版本编译的对象可能依赖于新版本中引入的符号并且不存在于旧`libstdc++.so`库中。

[https://stackoverflow.com/a/49119902/981959](https://stackoverflow.com/a/49119902/981959)上的一些相关信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T22:55:18.300

语言 ABI 相同，但 STL ABI 不同。见[https://gcc.gnu.org/wiki/Cxx11AbiCompatibility](https://gcc.gnu.org/wiki/Cxx11AbiCompatibility)

所以不建议混合使用 -std=c++98 -std=c++11 编译的库。跨图像边界传递数据时可能会发生崩溃。

（如果您只调用 extern "C" 函数并且只传递 POD，它可能会起作用）。

另见相关：[Mixing different C++ standards with GCC](https://stackoverflow.com/questions/38056849/mixing-different-c-standards-with-gcc?rq=1)

# css - 在 CSS(2) 上是否可以在背景位置上说 right-5？

> ID：10717109
> 
> 赞同：0
> 
> 时间：2012-05-23T09:27:42.400
> 
> 标签：css

> **可能重复：**
> [使用 CSS 从右侧偏移背景图像](https://stackoverflow.com/questions/5142405/offset-a-background-image-from-the-right-using-css)

CSS通常是：

```
background-position:right top; 
```

但是，如果我想说诸如 right-5px 之类的话？可能吗？像元素中的位置：

```
right:-5px; 
```

有人知道吗？

**编辑**

可能还不清楚！我的意思是：

```
background-position:right-5px top; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:32:15.237

[http://www.w3.org/TR/CSS21/colors.html#propdef-background-position](http://www.w3.org/TR/CSS21/colors.html#propdef-background-position)

在 CSS2.1 规范中，只有知道容器的尺寸才能执行此操作。

假设容器是 300px。你可以说：

`background-position:305px`或使用百分比。

**然而**，

[http://www.w3.org/TR/css3-background/#the-background-position](http://www.w3.org/TR/css3-background/#the-background-position)

从 css3 规范开始，您可以定义所有不同角落的偏移量。

所以`background-position: top 0 right -5px;`会给你想要的结果。

除了IE，**[支持](http://caniuse.com/#feat=background-img-opts)**都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:47:04.370

这是不可能的，`CSS2`但你可以做一个技巧。像这样写：

```
div{
    background:red;
    width:200px;
    height:200px;
    position:relative;
    overflow:hidden;
}
div:after{
    content:'';
    position:absolute;
    width:200px;
    height:200px;
    top:0;
    right:-5px;
    background:url('http://www.dummyimage.com/600x400/000/fff');
} 
```

检查这个 [http://jsfiddle.net/s9L2T/](http://jsfiddle.net/s9L2T/)

# html - 如何使用 Rails 制作实时网络？

> ID：10717121
> 
> 赞同：1
> 
> 时间：2012-05-23T09:28:38.893
> 
> 标签：html, ruby-on-rails, ruby, real-time, erb

我想对 HTML 文档进行实时更改。
当变量随事件发生变化时，HTTP 文档（.erb 文件）必须一起自动变化。

```
#controller.rb

puts("Downloading...")

bt = RubyTorrent::BitTorrent.new("public/files/ubuntu.torrent")
bt.on_event(self, :complete) { @donemessage="Done!" } #<-- This event

#index.html.erb
<h1>Transfers</h1>
<p><%= @donemessage %></p> <!-- <- This must be changed --> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:42:04.927

这根本不是一件容易的事。但通常方法如下：

1.  客户端（为简单起见，想象一下浏览器）应该告诉服务器它想知道给定对象的状态变化；即它想订阅监听某些对象上发生的事件；
2.  所有可能改变其状态的对象都应该放在 special `queue`；
3.  在服务器端，`queue`解析器在处理队列中给定的（下一个）对象后，应通知所有订阅的客户端对象的新状态。
4.  现在客户已收到通知，他们可以根据收到的有关对象的新数据采取进一步的行动。例如，客户端可以更新页面的html部分。

再次，我不能在这里详细说，因为这不是那么简单。

查看以下项目以获取有关该主题的更多信息：

1.  [流星](http://meteor.com/)
2.  [事件机](http://rubyeventmachine.com/)

# c# - 根据以前的值实时猜测值

> ID：10717122
> 
> 赞同：2
> 
> 时间：2012-05-23T09:28:41.480
> 
> 标签：c#, c#-4.0, smooth, smooth-streaming

![平滑值](../Images/d91d5cb7b65993c081032f5a0817bb39.png)

以下适用于 c# .net 4。我正在寻找 ac# 代码。

（图 1）我有不同的值，例如 700、712、703 和 720。dt1 是例如 30ms，dt2 可能是 9ms。重要的是 dt1 到 dtn 不是恒定的。

（图2）时间轴

（图 3）这就是我想要的，大约 17ms 的恒定时间间隔 tc 的值。x1 到 xn 是变量包含的值，即：

```
x(t(x1)) = x1
x(t(x2)) = x2
...
x(t(xn)) = xn 
```

如何实时确定 x1 到 xn？因此，假设当前时间是 dt1+dt2+dt3 内的某个位置。我不知道 dt3 什么时候完成（即使之前的 dt 在 9 毫秒和 30 毫秒之间）以及会有什么价值。我怎么能猜到 x4 的值，它考虑了以前的变化？

如何同时平滑（图 1）的值以使它们成为 - 比如说 - 700 - 708 - 712 - 720，即消除抖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:37:01.700

我认为有两种解决方案，因为我理解了您的问题

1.  通过引用传递变量，例如：x(ref t(ref (x1))
2.  将您的变量声明为静态变量，例如：静态 x1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:44:36.680

将对此进行尝试（以下是措辞不佳的操作序列）：

> 1.  读取当前 X（我们称之为 Xt）
> 2.  使用 Xt 执行您需要的任何操作
> 3.  存储 Xt
> 4.  读取新的 X（我们称之为 X2）
> 5.  如果 abs(X1-X2) 小于某个容差，则丢弃 X2 并使其 = X1
>     
>     
>     
>     如果 X2 > X1，则丢弃 X2 的值，使其 = X1+K
>     
>     
>     
>     如果 X2 < X1，则丢弃 X2 的值并使其 = X1-K
>     
>     
> 6.  设置 Xt = X2
>     
>     
> 7.  转到 2

只是一个非常粗略的“平滑”概念，您忽略了值，只关心 x 的“运动”的方向。

# internet-explorer-9 - HTML5 javascript 在框架集中不起作用

> ID：10717126
> 
> 赞同：1
> 
> 时间：2012-05-23T09:29:01.077
> 
> 标签：internet-explorer-9, doctype, frames, quirks-mode, x-ua-compatible

我有一个页面托管在其他人的框架集中，但是它都在同一个域上（我的内容通过服务上传到他们的服务器）。然而，他们为什么使用框架集是另一天的争论。他们不会改变他们的标记，所以我必须找到一个可以在我的代码中工作的解决方法。我在我的测试用例中发现了一个奇怪的问题，如果我能解决它可能会对我有所帮助。像往常一样，这只是 IE 中的一个问题。

包装框架看起来像这样（带有未引用的属性，是的）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN">
<HTML>
<HEAD>
    <TITLE>foo</TITLE>
    <META content="text/html; charset=UTF-8" http-equiv=Content-Type>
    <META content=IE=EmulateIE8 http-equiv=X-UA-Compatible>
</HEAD>
<FRAMESET frameSpacing=0 cols=8,*,8 frameBorder=1>
    <FRAME id=blackleft src="black.htm" name=blackleft scrolling=no>
    <FRAME id=content marginHeight=0 src="button.html" name=ScormContent marginWidth=0>
    <FRAME id=blackright src="black.htm" name=blackright scrolling=no>
</FRAMESET>
</HTML> 
```

我的测试用例页面（button.html）如下所示：

```
<!DOCTYPE html>
<html><head>
<meta http-equiv=X-UA-Compatible content="IE=Edge">
<title>test</title>
</head>

<body>
<section>
    <a href="javascript:alert('hello world');">
        <button>pressing me works unless you are in a frameset</button>
    </a>
</section>
<section>
    <a href="#" onclick="alert('hello world');">
        <button>Pressing me always works</button>
    </a>
</section>
</body>
</html> 
```

我想知道为什么在框架集中使用第一个按钮在 IE9 中没有响应 - 独立运行页面会产生一个可点击的按钮。

关于 doctypes 和 x-ua 兼容技巧的大量阅读让我比以往任何时候都更加困惑，我无法弄清楚我应该做什么。如前所述，我*不能*以任何方式更改框架集的标记，因此为了使我的代码能够正常工作（它依赖于诸如 beforeunload 和 unload 事件之类的东西，以便在页面导航时传达数据以保存 - 这不会在框架集中运行时工作）。我的直觉告诉我，按钮示例显示我接近潜在问题，互联网告诉我这与 x-ua 兼容标签和怪癖模式有关，但有关该主题的大量阅读并没有让我受益一个解决方案...例如，如果我选择强制 IE9 进入（比如说）IE7 兼容模式，那么我所有的页面样式工作都会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:16:13.153

IE 具有独特的[iframe 安全性](http://msdn.microsoft.com/en-us/library/ie/ms534622)：

> SECURITY 属性限制在 URL 中使用 javascript、vbscript 和 about 协议。例如，在受限框架或 iframe 中，源文件无法执行以下代码：

```
<a href="javascript:alert('Disallowed in restricted FRAME or IFRAME!');">JavaScript Link</a> 
```

# .net - 如何使用 iTextSharp 写入 pdf 文档

> ID：10717130
> 
> 赞同：0
> 
> 时间：2012-05-23T09:29:15.783
> 
> 标签：.net, itextsharp

我想在提供的 X,Y 位置将给定的文本插入到现有的 pdf 中。

我正在使用 iTextSharp(4.1.6.0)

我在**datagridview**控件中接受位置（在其中插入文本）和要插入的值，仅当指定的位置没有图像时，文本才会插入到指定的位置。

内容未插入到输入 pdf 中有图像的位置。

是否有任何不同的方法可以将文本添加到现有的 pdf，以便无论图像是否存在，文本都将插入到指定的位置。

请在下面找到我的代码：

```
for (int i = 0; i < reader.NumberOfPages; i++)
        {
            document.NewPage();

            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                gridColumn = Convert.ToInt32(row.Cells[2].Value);
                if (gridColumn == i + 1)
                {
                    //document.NewPage();
                    BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
                    cb.SetColorFill(iTextSharp.text.Color.BLACK);
                    cb.SetFontAndSize(bf, 8);

                    text = "" + row.Cells[3].Value;
                    cb.BeginText();
                    cb.ShowTextAligned(2, text, Convert.ToSingle(row.Cells[0].Value), Convert.ToSingle(row.Cells[1].Value), 0);
                    cb.EndText();

                    page = writer.GetImportedPage(reader, Convert.ToInt32(row.Cells[2].Value));

                    cb.AddTemplate(page, 0, 0);

                }
                else
                {
                    page = writer.GetImportedPage(reader, i + 1);
                    cb.AddTemplate(page, 0, 0);

                }

           }//end foreach

      }//end for i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:14:21.343

我通过使用 PdfContentByte 的 SetTextRenderingMode(PdfContentByte.TEXT_RENDER_MODE_FILL) 解决了这个问题。
我在 PDF 上插入我自己的文本时使用 writer.DirectContent，否则我使用 writer.DirectContentUnder

在下面找到我修改后的代码：

```
for (int i = 0; i < reader.NumberOfPages; i++)
{
     document.NewPage();
     log.Debug("Creating new page in the document..");
     bool wasPageImported = false;

     foreach (DataGridViewRow row in dataGridView1.Rows)
     {
           gridColumn = Convert.ToInt32(row.Cells[2].Value);
           if (gridColumn == i + 1)
           {
               //DirectContent for writing text to PDF
                PdfContentByte cb = writer.DirectContent;

                if (!wasPageImported)
               {
                    page = writer.GetImportedPage(reader,       Convert.ToInt32(row.Cells[2].Value));
                    cb.AddTemplate(page, 0, 0);
                    wasPageImported = true;
                }
                    BaseFont bf = BaseFont.CreateFont(BaseFont.COURIER, BaseFont.CP1250, BaseFont.NOT_EMBEDDED);
             //The text rendering mode causes entered text to appear above backround
                                 cb.SetTextRenderingMode(PdfContentByte.TEXT_RENDER_MODE_FILL);

               cb.SetColorFill(iTextSharp.text.Color.BLACK);
               int fontSize = -1;
               if (row.Cells[4].Value.ToString() == "" || row.Cells[4].Value == null)
               {
                   fontSize = 12;
               }
               else
              {
                   fontSize = Convert.ToInt32(row.Cells[4].Value);
               }

               cb.SetFontAndSize(bf, fontSize);

               text = "" + row.Cells[3].Value;
               cb.BeginText();
               cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, Convert.ToSingle(row.Cells[0].Value), Convert.ToSingle(row.Cells[1].Value), 0);
               cb.EndText();

         }
        else
       {
            //DirectContentUnder if not writing any text to PDF
              PdfContentByte cb = writer.DirectContentUnder;
              page = writer.GetImportedPage(reader, i + 1);
              cb.AddTemplate(page, 0, 0);
        }

 }//end foreach

}//end for int i 
```

# powershell - 通过批处理文件为 PowerShell 设置执行策略权限

> ID：10717134
> 
> 赞同：0
> 
> 时间：2012-05-23T09:29:27.467
> 
> 标签：powershell, batch-file

我正在通过批处理文件[将执行策略权限设置为 PowerShell](https://technet.microsoft.com/en-us/library/ee176961.aspx)，以允许运行 PowerShell 脚本。

默认情况下，Windows PowerShell 具有执行策略`Restricted`。是的，我们可以使用提升的（管理员）权限启动 PowerShell 并`Unrestricted`手动设置策略。

现在的问题是如果我们可以手动设置它，那么通过批处理文件设置它是否有意义？

当您需要在多台机器上运行脚本文件时（例如出于测试目的），手动为每台机器设置策略权限可能会很麻烦。虽然这对一个人来说并不是什么工作，但是当您要求用户自己进行此设置时，这可能是一种开销。一些用户喜欢尽可能少地做事情。

> 所以这个想法是用户只需要执行具有管理员权限的批处理文件，这将自动设置策略权限。执行脚本的路径应该不是问题，因为批处理文件和 PowerShell 脚本都在同一个文件夹中（推荐）。

这是我迄今为止在我的批处理（.bat）文件中尝试过的。

```
powershell.exe -Set ExecutionPolicy Unrestricted -FILE file.ps1 "args[0]" "args[1]".... 
```

`file.ps1`PowerShell 脚本的名称在哪里`args[0]`， , `args[1]`,.... 是传递给脚本的可选参数。

唯一在这里不起作用的是执行策略。这也可能是一些语法问题。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:32:43.193

Windows 7 自带 Powershell v2.0

只需转到运行或开始菜单并键入“Powershell”并按 Enter。

要运行脚本，您可能必须做`Set-ExecutionPolicy unrestricted`或类似的事情。看这里 - [http://technet.microsoft.com/en-us/library/ee176961.aspx](http://technet.microsoft.com/en-us/library/ee176961.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:02:38.847

这是对我有用的解决方案。

```
@powershell -ExecutionPolicy Unrestricted -FILE file.ps1 "args[0]" "args[1]" "args[2]" 
```

最终，如您所见，问题出在语法上。

# java - Android 无法从图库中加载正确方向的图像

> ID：10717136
> 
> 赞同：5
> 
> 时间：2012-05-23T09:29:34.460
> 
> 标签：java, android, image, opencv, orientation

我正在通过位图 api 从图库中加载图像，但图像的方向与我保存的方向不同。在stackoverflow的某个地方，我读到我需要获取初始值，然后旋转矩阵。我试过这个，但我的方向是来自 exif 界面的 0。

```
 int desiredImageWidth = 310;  // pixels
        int desiredImageHeight = 518; // pixels

        Log.i("FA", "Image Loading "+strFileName);
        BitmapFactory.Options o = new BitmapFactory.Options();
        Bitmap newImage = Bitmap.createScaledBitmap(BitmapFactory.decodeFile(strFileName, o), 
                                                   desiredImageWidth, 
                                                   desiredImageHeight, 
                                                   false);

        Bitmap finalBmp = getCorrectOrientedBitmap(strFileName,newImage);

        Bitmap myBitmap32 = finalBmp.copy(Bitmap.Config.ARGB_8888, true);

        Mat matImg = Utils.bitmapToMat(myBitmap32); 
```

我的主要定位功能是

```
 private Bitmap getCorrectOrientedBitmap(String filename,Bitmap Source) throws IOException{

    Bitmap rotatedBitmap = null;
    ExifInterface exif = new ExifInterface(filename);
    int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

    Matrix matrix = new Matrix();
    Log.i("FA", "orientation "+orientation);
    switch(orientation)
    {
    case 6:
        matrix.postRotate(90);
        break;
    case 3:
        matrix.postRotate(180);
        break;
    case 8:
        matrix.postRotate(270);
        break;
    }
    rotatedBitmap = Bitmap.createBitmap(Source, 0, 0, Source.getWidth(), Source.getHeight(), matrix, true);

    return rotatedBitmap;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:11:30.997

如果您从`0`回来`getAttributeInt`，那么我认为这只是意味着您的“旋转”图像中没有存储任何方向信息。您可以使用在线工具独立仔细检查或下载一个好的图像查看器来找出答案。

您是否在另一台设备上尝试过此代码？您的测试设备是否有可能不保存方向标签？

[这个页面](http://mobisocial.stanford.edu/news/2011/08/rotating-images-in-android/)有一些很好的示例代码来做你想做的事情，也许你也可以在那里找到一些改进。

# jquery - 未调用函数

> ID：10717137
> 
> 赞同：1
> 
> 时间：2012-05-23T09:29:34.787
> 
> 标签：jquery

我正在尝试在[这个小提琴](http://jsfiddle.net/adrianjsfiddlenetuser/WhKqZ/)中测试一些 jQuery ：

```
<div id="myDiv"></div>
<input name="Button3" type="button" value="Invoke" onclick="get()"> 
```

```
function get() {
    var data = {};
    data.foo = "bar";
    data.stuff = {
        nifty: "stuff"
    };

    $("#myDiv").text(JSON.stringify(data));
} 
```

`get()`当我按“调用”时，没有调用该函数。应该发生的是`div`内容应该得到更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:31:48.347

您的小提琴不起作用的原因是设置错误。`onLoad`将左侧的下拉菜单更改为`no wrap (head)`，它将起作用。

但是，由于您将 jQuery 用于您的逻辑，因此最好也使用它来附加事件，而不是使用笨重的`onclick`属性。试试这个：

```
<input name="Button3" type="button" value="Invoke" id="button"> 
```

```
$("#button").click(get); 
```

[**示例小提琴**](http://jsfiddle.net/WhKqZ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:45:58.053

Jsfiddle 在 windows.load 事件上评估您的函数：

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
function doSomething() {
    var data = {};
    data.foo = "bar";
    data.stuff = {nifty: "stuff"};

    ("#myDiv").text(JSON.stringify(data));
}

});//]]>  

</script> 
```

但是浏览器需要它在标题上或在引用它的元素之前。

您必须将您的代码更改为：

```
<div id="myDiv"></div>
<script type="text/javascript" >
    function doSomething() {
    var data = {};
    data.foo = "bar";
    data.stuff = {nifty: "stuff"};

    $("#myDiv").text(JSON.stringify(data));
}
</script>

<input name="Button3" type="button" value="Invoke" onclick="doSomething()">
​ 
```

但，

建议使用 jquery 样式的事件附件：

```
<input id="myBTN" name="Button3" type="button" value="Invoke" />
$('#myBTN').click(function(e){
    // do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:33:23.743

给你更新的[玩笑](http://jsfiddle.net/WhKqZ/7/)

您正在使用 javascript 调用该函数，而您已在 jQuery 库中声明了该函数。

**HTML**

```
<div id="myDiv"></div>
<input name="Button3" type="button" value="Invoke"> 
```

**文档内的脚本已准备就绪**

```
$('input[type=button]').click(function () {
get();
})

function get() {
var data = {};
data.foo = "bar";
data.stuff = {nifty: "stuff"};

$("#myDiv").text(JSON.stringify(data));
} 
```

# python - 在python中编写正则表达式

> ID：10717139
> 
> 赞同：1
> 
> 时间：2012-05-23T09:29:45.037
> 
> 标签：python, regex, python-2.7

我一直在尝试为此编写一个正则表达式，但到目前为止还没有成功。

```
_ any thing\_ fdfdf \_ any thing_ 
```

下划线，然后是 _ 之前的任何字符。

`\_`是一个转义字符，所以正则表达式必须接受这样的字符串。

```
_ any \_ thing _ 
```

以下字符串：

```
checking_ happens \_ ano\_ther _ test of bold _ and escape \_asteric 
```

应该给：

```
_ happens \_ ano\_ther _ 
```

到目前为止，我只能想出这个：

```
(\\_)|_[^_]*[\\_]*[_] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:02:02.463

这可以完成工作：

```
(?<!\\)(?:\\\\)*_((?:[^_\\]|\\.)+)_ 
```

打破它：

*   `(?<!\\)(?:\\\\)*`- 匹配偶数个反斜杠，前面没有更多反斜杠
*   `_`- 后跟一个下划线
*   `((?:[^_\\]|\\.)+)`- 匹配以下1次或多次
    *   `[^_\\]`- 除下划线或反斜杠外的任何字符
    *   `\\.`- 任何反斜杠/字符对（例如`\_`或`\\`）
*   `_`- 匹配尾随下划线

这将捕获第一组中下划线之间的字符串。

# internet-explorer - 边框半径即Firefox chrome冲突

> ID：10717141
> 
> 赞同：1
> 
> 时间：2012-05-23T09:29:48.407
> 
> 标签：internet-explorer, css

我在浏览器之间的 css3 边界半径有冲突。

```
#menu ul li:first-child {
    border-radius: 0px 8px 8px 0px;
}

#menu ul li:last-child {
    border-radius: 8px 0px 0px 8px;
}

<ul>
    <li><a href="#">الرئيسية</a></li>
    <li><a href="#">صفحتي</a></li>            
    <li><a href="#">كتبي</a></li>
    <li><a href="#">أصدقائي</a></li>            
    <li><a href="#">خروج</a></li>
</ul> 
```

火狐

![火狐和 Chrome](../Images/06b79f87da3b62afc06d2fbf54512b88.png)

即问题

![IE问题](../Images/a86b91dd55b90db2f940512b636ba795.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:06:08.980

我怀疑这是因为 rtl 方向。

**解决方案**：使用条件为 IE 的 HTML 添加一个类 - 例如：

```
<!--[if IE]><div dir="rtl" class="ie"><![endif]-->
<!--[if !IE]><!--><div dir="rtl"><!--<![endif]-->
<div id="menu">
    <ul>
        <li><a href="#">الرئيسية</a></li><li><a href="#">صفحتي</a></li><li><a href="#">كتبي</a></li><li><a href="#">أصدقائي</a></li><li><a href="#">خروج</a></li>
    </ul>
</div>
</div> 
```

我已将该类添加到包含 div，但您可以将其直接添加到`<html>`标签中（请参阅[http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)）

然后你的 CSS 中就会有这样的东西：

```
#menu li:first-child {
    border-radius: 0 8px 8px 0;
}
#menu li:last-child {
    border-radius: 8px 0 0 8px;
}
.ie #menu li:first-child {
    border-radius: 8px 0 0 8px;
}
.ie #menu li:last-child {
    border-radius: 0 8px 8px 0;
} 
```

完整的演示在这里[http://dabblet.com/gist/2774749](http://dabblet.com/gist/2774749) - 我已经对其进行了测试，并且在 Chrome、Firefox、Opera 和 IE9 中的工作方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:38:30.130

尝试这个：

```
#menu ul li:first-child {
    -webkit-border-top-left-radius: 8px;
    -webkit-border-bottom-left-radius: 8px;
    -moz-border-radius-topleft: 8px;
    -moz-border-radius-bottomleft: 8px;
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
}

#menu ul li:last-child {
    -webkit-border-top-right-radius: 8px;
    -webkit-border-bottom-right-radius: 8px;
    -moz-border-radius-topright: 8px;
    -moz-border-radius-bottomright: 8px;
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
} 
```

在执行一般命令之前定义特定于浏览器的 css 总是更好

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T09:50:27.053

在不通过 CSS 支持的边界半径中，您必须使用 Javascript 阅读本教程以获取有关如何在 IE 中设置边界半径的完整帮助

[http://davidwalsh.name/css-rounded-corners](http://davidwalsh.name/css-rounded-corners)

# grails - 在grails中检查long Type是否需要为null

> ID：10717144
> 
> 赞同：0
> 
> 时间：2012-05-23T09:30:01.320
> 
> 标签：grails

当我生成域的视图时，gsp 页面会自动创建以下内容。

```
 <g:if test="${dataArchivingInstance?.id != null}">  
      <g:hiddenField name="id" value="${dataArchivingInstance?.id}"/>  
 </g:if> 
```

dataArchivingInstance.id 是 long 类型。现在需要检查 long Type 为 null 吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:35:36.827

因为如果它为null，则不需要制作此隐藏字段。

UPD：它是`Long`（对象）类型，而不是`long`（原始），它可以是`null`

# javascript - 使用 GPS 坐标修改地图中心

> ID：10717147
> 
> 赞同：0
> 
> 时间：2012-05-23T09:30:13.073
> 
> 标签：javascript, google-maps, gps, location

我想使用一个函数来使用 GPS 获取位置，而不是使用坐标（经度和纬度）来修改地图的中心。

这是我的代码的一部分：

```
var lat;
var longi;

function initialize() {

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(onGeoSuccess, onGeoError, {
            maximumAge: 3000,
            enableHighAccuracy: true
        });

        function onGeoSuccess(event) {
            lat = event.coords.latitude;
            longi = event.coords.longitude;
            alert(lat + ', ' + longi);
        }

        function onGeoError(event) {
            lat = 50;
            longi = 150;
        }
    } else {
        lat = 50;
        longi = 150;
    };

    var array;
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: new google.maps.LatLng(lat, longi),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        disableDefaultUI: true,
        zoomControl: true
    });
} 
```

问题是：警报很好，它显示了实际的经度和纬度，但地图没有出现，它只给出了一个小问号。

任何帮助都会受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:44:52.740

而不是使用`map.setCenter(lat,longi);`

尝试：

`map.set('center', new google.maps.LatLng(lat, longi));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:35:08.500

您需要在`onGeoSuccess`方法中居中地图：

首先移动`map`变量更高：

```
var lat, longi, map; 
```

然后在`onGeoSuccess`方法上添加`setCenter`方法调用：

```
function onGeoSuccess(event){
    lat=event.coords.latitude;
    longi=event.coords.longitude;
    map.setCenter( new google.maps.LatLng(lat, longi) );
} 
```

无论你在哪里改变`lat, longi`值，在`onGeoError`方法上都这样做。

最好使用一些默认值`lat, longi`：

```
var lat = 50, 
  longi = 150, 
  map; 
```

并将地图初始化上移（不要忘记删除行`var`前的语句`map = new google.maps.Map`）：

```
function initialize() {

    var array;
    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: new google.maps.LatLng(lat, longi),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        disableDefaultUI: true,
        zoomControl: true
    });
// rest of your code 
```

# unit-testing - 如何在 gwt mvp 应用程序测试的测试用例中模拟/提供不同的事件类？

> ID：10717154
> 
> 赞同：1
> 
> 时间：2012-05-23T09:30:37.967
> 
> 标签：unit-testing, gwt, uibinder, gwt-platform, gwttestcase

我正在使用 gwtp，我正在我的视图上编写一些测试，我在我的视图中有一些事件，如 ChangeEvent、clickEvent，所以我怎样才能获得这些我通过模拟尝试但它不起作用的对象。

我认为的代码是

`@UiHandler("submit") void onClickSubmit(ClickEvent e) { doClick(); }

```
@UiHandler("change")
public void onChange(ChangeEvent e) {
    doChange();
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:50:41.103

尝试扭转 MVP 模式。这样，您将只需要测试演示者。请记住，在 MVP 中，视图应该是“愚蠢的”。目标是避免测试视图。

[http://arcbees.wordpress.com/2010/09/03/reversing-the-mvp-pattern-and-using-uihandler/](http://arcbees.wordpress.com/2010/09/03/reversing-the-mvp-pattern-and-using-uihandler/)

# objective-c - cocos2d 或 cocos3d 需要购买任何许可证还是免费软件？

> ID：10717156
> 
> 赞同：1
> 
> 时间：2012-05-23T09:30:40.637
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我打算开发一个 cocos2d 或 3d iOS 应用程序，这需要购买任何许可证还是免费软件？任何帮助都是预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:35:17.237

许可证在[这里](http://www.cocos2d-iphone.org/wiki/doku.php/license)

它说“特此免费授予任何获得此软件副本的人的许可”。您无需支付任何费用即可使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:49:13.290

考虑到与 Zynga 的关联，这是一个合理的问题。不过不用担心，因为 Cocos2D 目前是在[MIT 许可](http://en.wikipedia.org/wiki/MIT_License)下发布的。如果 Zynga 曾经试图拔掉插头，他们就无法追溯，所以人们只会分叉在 MIT 许可下已经存在的东西并继续。

[http://www.cocos2d-iphone.org/wiki/doku.php/faq](http://www.cocos2d-iphone.org/wiki/doku.php/faq)

# c# - 当我更改 ComboBox 的选定项时如何触发 INotifyPropertyChanged 处理程序？

> ID：10717157
> 
> 赞同：2
> 
> 时间：2012-05-23T09:30:43.087
> 
> 标签：c#, wpf, xaml, combobox, inotifypropertychanged

我正在尝试将 a 绑定`ComboBox`到 an`ObservableCollection<MyType>`但它没有按我预期的那样工作。当我创建一个实例时`ComboData`，例如

```
ComboData = new ObservableCollection<MyType>(); 
```

并向其中添加数据，例如

```
ComboData.Add(new MyType(string.Format("{0}", i.ToString()), i)); 
```

我可以看到正在设置的`Value`属性和事件处理程序执行。这是正确的功能。`MyType``PropertyChangedEventHandler`

问题是当我`ComboBox`稍后选择不同的项目时。我希望看到`Value`再次设置并触发事件处理程序，但没有任何反应。但是，我可以看到该属性的 getter 被解雇并返回`_value`。

有什么我做错了吗？

`MyType`定义为：

```
public class MyType : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public MyType(string key, int value)
    {
        Key = key;
        Value = value;
    }

    public string Key { get; set; }
    private int _value;
    public int Value
    {
        get { return _value; }
        set
        {
            if (_value != value)
            {
                _value = value;

                OnPropertyChanged("Value");
            }
        }
    }

    internal void OnPropertyChanged(string prop)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(prop));
        }
    }

    private void IntegerItem_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        // this never executes *after* the ComboBox has been populated!!!
    }

} 
```

用户控件的 XAML 是：

```
<Grid>
    <ComboBox x:Name="cboItems"
      DisplayMemberPath="Key"
      SelectedValuePath="Value"
      ItemsSource="{Binding Path=ComboData}">
    </ComboBox>
</Grid> 
```

用户控件背后的代码是

```
public partial class ComboBoxControl : UserControl
{
    public ObservableCollection<MyType> ComboData { get; set; }

    public ComboBoxControl()
    {
        InitializeComponent();

        ComboData = new ObservableCollection<MyType>();
        int min = 0;
        int max = 10;
        for (int i = min; i <= max; i++)
        {
            ComboData.Add(new MyType(string.Format("{0}", i.ToString()), i));
        }

        cboItems.DataContext = this;            
    }
} 
```

当我更改中的选定项目时，我需要做什么来触发事件处理程序`ComboBox`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:42:10.937

最好使用`CollectionView`具有 CurrentChanged 事件的类。您可以将 CollectionView 绑定到您的 ComboBox。因此，当 selecteditem 更改时..您可以从 CurrentChangedEvent 中的 CollectionViewMember.CurrentItem 获取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:42:43.250

在组合框中选择不同的选项不会更改 ComboData 中的任何项目，它只是更改所选项目，因此它不会使用 MyType 中的设置器。它使用 getter 检索要显示的值。

ComboBox 有一个 SelectedItemChanged 事件，该事件将在选择新项目时触发。

# eclipse - Mylyn Redmine 连接器 Zend Studio 9.x/Eclipse 在哪里？

> ID：10717162
> 
> 赞同：1
> 
> 时间：2012-05-23T09:31:01.343
> 
> 标签：eclipse, redmine, zend-studio, mylyn

似乎有几个网站声称拥有该插件。服务器插件从这里安装： http: [//danmunn.github.com/redmine_mylyn_connector/](http://danmunn.github.com/redmine_mylyn_connector/)

然后我需要一个 Eclipse 插件。但是来自： [http](http://wiki.eclipse.org/index.php/Mylyn_Extensions#Redmine) ://wiki.eclipse.org/index.php/Mylyn_Extensions#Redmine 的那个 似乎不起作用

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Mylyn Connector: Redmine - Redmine-Plugin-Support 0.1.0.201203072118 (net.sf.redmine_mylyn.extensions.feature.feature.group 0.1.0.201203072118)
  Missing requirement: Redmine-Mylyn-Connector Common 0.1.1.201203072118 (net.sf.redmine_mylyn.common 0.1.1.201203072118) requires 'bundle org.eclipse.equinox.log 1.2.0' but it could not be found
  Cannot satisfy dependency:
    From: Redmine-Mylyn-Connector Core 0.3.3.201203072118 (net.sf.redmine_mylyn.core 0.3.3.201203072118)
    To: bundle net.sf.redmine_mylyn.common 0.1.0
  Cannot satisfy dependency:
    From: Mylyn Connector: Redmine - Redmine-Plugin-Support 0.1.0.201203072118 (net.sf.redmine_mylyn.extensions.feature.feature.group 0.1.0.201203072118)
    To: net.sf.redmine_mylyn.core 0.3.0 
```

但推荐的网络插件不再存在：http: [//download.eclipse.org/tools/mylyn/update/incubator](http://download.eclipse.org/tools/mylyn/update/incubator)

我以为这现在可以工作了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:57:52.637

看看这里（[http://www.redmine.org/boards/1/topics/10923](http://www.redmine.org/boards/1/topics/10923)）有一个官方插件和其他一些替代品......

# git - 查看要点的渲染输出？

> ID：10717169
> 
> 赞同：40
> 
> 时间：2012-05-23T09:31:26.280
> 
> 标签：git, github, gist

我确定我很昏暗，但是是否可以查看 gist 的渲染输出？

这是我感兴趣的要点：[https ://gist.github.com/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503](https://gist.github.com/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503)

我在哪里可以看到它的实际呈现方式？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-05-06T17:04:55.560

[rawgit.com](//rawgit.com)提供这项服务。要使用 rawgit.com，只需将要查看的 gist 或 github 文件的原始视图的域替换为 rawgit.com。例如：

```
https://gist.githubusercontent.com/mbostock/844752/raw/index.html 
```

到

```
https://rawgit.com/mbostock/844752/raw/index.html 
```

或者

```
https://raw.githubusercontent.com/caffinatedmonkey/Hello-World-PSP/master/main.cpp 
```

到

```
https://rawgit.com/caffinatedmonkey/Hello-World-PSP/master/main.cpp 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-14T19:19:50.827

RawGithub.com 可以让你在 Github 上渲染任何东西，包括要点。两个例子：

*   [https://gist.github.com/mbostock/4341574](https://gist.github.com/mbostock/4341574)和[渲染版本](https://rawgithub.com/mbostock/4341574/raw/3c483a24da81d8e4e5870113a3eb7036e8ea0190/index.html)
*   [https://gist.github.com/hemulin/4148842](https://gist.github.com/hemulin/4148842)和[渲染版本](https://rawgithub.com/hemulin/4148842/raw/7f5408ad6d0d61dfd7aa89071415e28c63b7ffd0/index.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-05T10:43:23.910

我的印象是呈现要点的方式最近发生了变化。这是我找到的解决方案：

*   转到[http://rawgit.com/](http://rawgit.com/)，粘贴您的 gist 的地址并获取原始 html 代码的地址 - 或单击Github中的**原始按钮**
*   在 URL 前添加：`http://htmlpreview.github.io/?`

### 例子

*   链接到一个要点：[https ://gist.github.com/stla/9007180](https://gist.github.com/stla/9007180)
*   rawgit.com 生成的链接：[https](https://rawgit.com/stla/9007180/raw/) ://rawgit.com/stla/9007180/raw/或按**原始**按钮链接：[https ://gist.githubusercontent.com/stla/9007180/raw/](https://gist.githubusercontent.com/stla/9007180/raw/)
*   链接到渲染版本： http://htmlpreview.github.io/?https: [//rawgit.com/stla/9007180/raw/](http://htmlpreview.github.io/?https://rawgit.com/stla/9007180/raw/)或[http://htmlpreview.github.io/?https://gist.githubusercontent .com/stla/9007180/raw/](http://htmlpreview.github.io/?https://gist.githubusercontent.com/stla/9007180/raw/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-17T02:32:53.943

Mike Bostock 做了一个很酷的应用程序来渲染 Gists：[http ://bl.ocks.org/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503](http://bl.ocks.org/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503)

不过，我很感兴趣这是如何在技术上完成的。GitHub 有一个很酷的 api，您可以通过它以 JSON 格式获取 gist 数据：[https](https://api.github.com/gists/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503) ://api.github.com/gists/844752/420cc52eb4910fe8fa2bec9e13daab18b6230503它包括文件及其原始内容。我不知道如何动态渲染它，就好像它们是文件系统上的实际文件一样。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-07-12T12:55:09.943

# 2020 年更新：RawGit 正在关闭。替代方案和测试：

要将您的要点预览为呈现的 HTML，请使用以下服务之一：

*   ~~rawgit.com~~（[已过时](https://rawgit.com/)）
*   [raw.githack.com](https://raw.githack.com/)（**警告**：将 JavaScript 注入您的页面！）
*   [gitcdn.xyz](https://gitcdn.xyz/)
*   [gistcdn.rawgit.org](https://gistcdn.rawgit.org/)
*   [htmlpreview.github.io](https://htmlpreview.github.io/)（这不是代理，它通过前端的 AJAX 加载您的页面）

所有这些都在 GitHub 上使用 HTML gists 进行了测试，并于 2020 年 7 月开始运行。

## 测试

使用此要点的示例：

*   [https://gist.github.com/rsp/977d142fd21bfd0f070a3e6b9758ac99#file-script-html](https://gist.github.com/rsp/977d142fd21bfd0f070a3e6b9758ac99#file-script-html)

检查它是否仍然有效以及 URL 的样子：

### ~~rawgit.com~~（截至 2020 年 7 月无效）

[https://rawgit.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://rawgit.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

### gist.githack.com

[https://gist.githack.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://gist.githack.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

**警告：**它会将 JavaScript 注入您的页面！看：

```
curl https://gist.githack.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html 
```

输出：

```
<!-- Valid HTML Test -->
<!doctype html>
<html lang=en>
<meta charset=utf-8> 
<title>Valid HTML Test</title>
<script>
alert('It works');
</script>
<script async src='/cdn-cgi/bm/cv/2172558837/api.js'></script><script type="text/javascript">(function(){window['__CF$cv$params']={r:'5b1aaf571d8bf2c0',m:'65442fcb36a12a3fd4d99294f0ae0a2c6c071945-1594556076-1800-AdUTDXjrrqS1ZqgeCevOb/vrvZSZaBf8uXiIHtYhab+Pu1AhAHEnvoPv7d6apyJwU+p7FNPWY8VQAjdSpjC5/5JRJKo5Og1S5Qod6jctf3ECBmhA7mctVQJOrzVBXkf2fZrHHOVjSD5cezyUp1zDZeSLAYtov29CfJKdbN7/gstPjgYcF/FbgiA5tm4WJ/ToqDwoSGljZwlHIrqr9EdLCecSgQO1D+ASFBtWOduqNIx9',s:[0x603d28608f,0x9fc0e2444b],}})();</script> 
```

**最后两个脚本标签不是我的！** 我注意到它是因为 HTML Validator 给了我一个完全有效的 HTML 的警告（所以它不仅注入了代码，而且还注入了一个无效的代码......）

### gitcdn.xyz

[https://gitcdn.xyz/cdn/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://gitcdn.xyz/cdn/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

似乎没有改变 HTML：

```
curl -v https://gitcdn.xyz/cdn/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html 
```

### gistcdn.rawgit.org

[https://gistcdn.rawgit.org/rsp/dd2481a75c1668846a752e24099ce020/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://gistcdn.rawgit.org/rsp/dd2481a75c1668846a752e24099ce020/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

**注意：**该 URL 不包含`/raw/`所有其他 URL，因此如果您手动构建它，很容易拼错 URL。

### htmlpreview.github.io

[https://htmlpreview.github.io/?https://gist.githubusercontent.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://htmlpreview.github.io/?https://gist.githubusercontent.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

# 警告：

它们似乎在以下方面有所不同：

*   有些是代理，有些在前端使用 AJAX
*   像注入脚本一样更改实际的 HTML，请参阅上面的警告

## 文件完整性

我编写了这个脚本来检查提供的 HTML 的 SHA1 总和：

```
#!/bin/bash
for i in \
'https://gist.githubusercontent.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html' \
'https://gist.githack.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html' \
'https://gitcdn.xyz/cdn/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html' \
'https://gistcdn.rawgit.org/rsp/dd2481a75c1668846a752e24099ce020/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html' \
'https://htmlpreview.github.io/?https://gist.githubusercontent.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html' \
;do
n=`echo $i | sed 's|^[a-z:]*//||; s|/.*||'`
s=`curl -s $i | shasum`
echo $s $n
done 
```

如果需要，请随意使用它来测试您自己的要点的完整性。请记住，即使其中一个代理**现在**没有注入任何东西或弄乱您的代码，也并不意味着它永远不会这样做。

我的结果是：

```
7a785588d5806469a7a9256968f82257accd7183 - gist.githubusercontent.com
809819224097b5f116b63fd6019cb490005d1ff8 - gist.githack.com
7a785588d5806469a7a9256968f82257accd7183 - gitcdn.xyz
7a785588d5806469a7a9256968f82257accd7183 - gistcdn.gistcdn.rawgit.org
5069f27b01308f3cf71c9d7f3a5c924e3a91b243 - htmlpreview.github.io 
```

第一个是原始的，所以看起来：

*   gitcdn.xyz 和 rawgit.org 提供原始文件
*   githack.com**将脚本注入您的页面！**（确实是一个 git **hack ......）**
*   htmlpreview.github.io 在前端工作，因此提供了一个不同的页面，该页面使用前端的逻辑加载和显示您的要点（我想知道它是否适用于相关链接和图像 - 我将不得不稍后对其进行测试）。

### 关于 htmlpreview.github.io 的注意事项

有趣的是，它使用另一个服务，一个 JSONP 代理[jsonp.afeld.me](https://jsonp.afeld.me/)并且不是直接从 GitHub 加载你的要点，而是作为： [https ://jsonp.afeld.me/?url=https://gist.githubusercontent.com /rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html](https://jsonp.afeld.me/?url=https://gist.githubusercontent.com/rsp/dd2481a75c1668846a752e24099ce020/raw/233e4d9d5388fc087785ff2d6f63ce232302d255/test.html)

## 其他想法

我只是想看看是否可以以某种方式使 gh-pages 与 gists 一起使用（因为 gists 可以作为 repos 结帐）。我会测试它并写一个更新。更新：我无法让它工作。我也不能从 gist 部署到 Netlify。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-23T09:33:45.547

据我所知 gist 不提供执行环境，但您可以轻松地将其粘贴到[jsfiddle](http://jsfiddle.net)中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-10T11:52:19.787

Gist 呈现输出（当前是在更新 gist 之后，而不是实时预览）。

这仅适用于正确的文件扩展名。

例如，如果您的文件格式为 MediaWiki，您必须将文件名编辑为`somefile.mediawiki`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-21T00:47:12.310

您可以在 GitHub 中直接完成。我只是使用评论部分，因为它已经有自己的“预览”选项，当然“支持使用 Markdown 进行样式设置”。

# linq - 如何在 LINQ 语句的 where 子句中查询和计算日期？

> ID：10717177
> 
> 赞同：0
> 
> 时间：2012-05-23T09:31:54.940
> 
> 标签：linq, entity-framework, datetime, group-by, where-clause

我在使用以下代码时遇到问题。在我粘贴之前，让我先介绍一下应该发生什么的历史。

我目前有一个模型，其中包含 2 个感兴趣的字段，即客户下订单的名称，以及他/她下订单的日期。将使用预先计算的日期来查询该`dateplaced`字段（并且应该只查询日期，而不是时间）。该查询计算 MondayOrder 字段中出现的重复项的数量，并将它们组合在一起。现在，当我排除应该查询日期的 where 子句时，查询运行良好。但是，此查询的目标是根据下订单的日期计算下一周的订单数量。

```
List<string> returnlist = new List<string>();
DateTime dt = getNextWeekMondaysDate().Date;
switch (day)
{
    case DayOfWeek.Monday: 
    {
        var CountOrders =
           from x in Data.EntityDB.Orders 
           group x by x.MondayOrder into m 
           let count = m.Count() 
           select new
           {
               MondayOrderItem = m.Key, Amount = count 
           };

        foreach (var item in CountOrders)
        {
            returnlist.Add(item.MondayOrderItem + " : " +
               item.Amount);
        }
    }
    break; 
```

该`getNextWeekMondaysDate()`方法有一个我可以使用的重载，如果我为其提供一个日期，它将从给定的参数中获取下一个星期一的日期。但问题是，LINQ 不接受如下查询：

```
var CountOrders =
    from x in Data.EntityDB.Orders 
    where getNextWeekMondaysDate(x.DatePlaced.Value).Date == dt
    group x by x.MondayOrder into m 
    let count = m.Count() 
    select new { MondayOrderItem = m.Key, Amount = count }; 
```

这正是我必须达到的。这种情况有什么解决方法吗？

**更新**

这是我尝试第二个查询时遇到的异常。

LINQ to Entities 无法识别方法 'System.DateTime getNextWeekMondaysDate(System.DateTime)' 方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:40:50.940

您不能直接执行此操作，因为 EF 查询提供程序无法将用户定义的方法调用转换为 SQL。提供程序识别[一组有限的 .NET 方法](http://msdn.microsoft.com/en-us/library/bb738681.aspx)，这些方法可以转换为 SQL 以及[一些规范函数](http://msdn.microsoft.com/en-us/library/bb738626.aspx)。除非您编写自己的查询提供程序（这只是理论上的一种选择），否则仅使用这些方法无法表达的任何内容都是禁止的。

作为一种实用的解决方法，您可以在查询之前计算代码中的适当范围，`x.DatePlaced.Value`然后在子句上使用特定`DateTime`值。`where`

作为一项智力练习，请注意[此方法](http://msdn.microsoft.com/en-us/library/2dhha2f3) *已*被查询提供程序识别，并可用作表达式的一部分。所以这个可憎的东西也应该起作用：

```
var CountOrders =
    from x in Data.EntityDB.Orders 
    where EntityFunctions.AddDays(
        x.DatePlaced.Date.Value, 
        (9 - DateAndTime.DatePart(DateInterval.WeekDay, x.DatePlaced.Value)) % 7)
        .Date == dt
    group x by x.MondayOrder into m 
    let count = m.Count() 
    select new { MondayOrderItem = m.Key, Amount = count }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:41:55.073

Linq to Entities 不知道如何将任意 C# 方法转换为 SQL——这通常是不可能的。

所以，你必须使用它理解的方法。

在这种情况下，您可以执行以下操作：

```
DateTime weekBegin = CalculateWeekBegin( dt );
DateTime weekEnd = CalculateWeekEnd( dt );

var CountOrders =
  from x in Data.EntityDB.Orders 
  where x.DatePlaced.Value >= weekBegin && x.DatePlaced.Value < weekEnd
  group x by x.MondayOrder into m 
  let count = m.Count() 
  select new { MondayOrderItem = m.Key, Amount = count }); 
```

# c++ - 使用opencv编译头文件。自己的类定义

> ID：10717178
> 
> 赞同：0
> 
> 时间：2012-05-23T09:32:00.917
> 
> 标签：c++, opencv, compilation, include, header-files

我一直在寻找，但找不到明确的疑问。

我正在尝试在 C++ 中定义我自己的类，我的类使用来自 opencv 的库。

我创建了一个 file.h 文件，我只是在其中声明了函数及其保护。

我创建了一个 file.cpp 文件，我在其中解释了函数的外观。在这个程序中，我使用了在普通 opencv 程序中使用的所有包含。（我认为它是正确的）+ 包含 file.h。

通常我编译我的opencv程序，如：

```
g++ -o program.cpp `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

现在我尝试以相同的方式编译我的 file.cpp，以便在 oder 主文件中使用该类，但我得到一个错误。

下一步，一旦我有了编译的类，将是：

```
g++ -o programMain.cpp compiledClass.o `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

任何帮助/建议都会很好，因为这是我第一次管理这么大的程序。

```
#ifndef _NAMES_H  
#define _NAMES_H     

class segmentator {
public:

   void search(Mat img,
               vector<std::vector<cv::Point> >&contours,
               vector<int>&similarity);

   void similar(vector<std::vector<cv::Point> >&contours,
                vector<std::vector<cv::Point> >&contours2,
                vector<int>&similarity);

   vector<Mat*> separate(Mat img,
                         Mat img2,
                         vector<std::vector<cv::Point> >&contours,
                         vector<std::vector<cv::Point> >& contours2,
                         vector<int> idx);
};

#endif 
```

这是我的文件segmentator.h。

在 segmentator.c 我有：

```
#include <stdio.h>
#include <stdlib.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
#include <sstream>
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "segmentator.h"

void segmentator::search(/*parameters*/){/*CODE*/}
void segmentator::similar(/*parameters*/){/*CODE*/}
vector<Mat*> separate(/*parameters*/){/*CODE*/} 
```

然后我像这样编译

```
g++ -o segmentator.cpp `pkg-config --cflags opencv` 
```

并且它不识别 opencv 库的扩展。

我用出现的新问题移动了这个问题：[无法编译。头文件。封闭自己的对象定义](https://stackoverflow.com/questions/10829245/not-possible-to-compile-headers-files-enclosed-own-objects-definition)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:48:20.860

通常，您首先将 file.cpp 编译为目标文件：

> g++ -c file.cpp pkg-config --cflags opencv

这会产生`file.o`，然后您可以使用它来编译和链接主要内容：

> g++ programMain.cpp file.o -o programMain pkg-config --cflags opencv pkg-config --libs opencv

您应该将包含的内容限制为`file.h`您严格需要的内容。同样对于`file.cpp`.

**编辑**：查看您的代码，您需要执行以下操作：

*   包括`cv::Mat`和`cv::Point`in的标题`segmentator.h`。我认为这些会是`opencv2/core/core.hpp`虽然对我`opencv/cv.h`来说在 OpenCV 2.3.1 上很好。
*   将标题包含`vector`在`segmantator.h`
*   如果你`segmentator.c`包含一个`main`函数，你需要在 OpenCV 库中链接，所以

    > g++ 分段器.cpp -o 分段器 pkg-config --cflags opencv pkg-config --libs opencv

*   如果您`segmentator.c`没有`main`，即不能是可执行文件，则可以将其编译为目标文件，以后可以使用该文件来构建应用程序：

    > g++ -c segmentator.cpp pkg-config --cflags opencv

# grid - 如何使用分页删除网格中的滚动条 - Ext JS 4

> ID：10717181
> 
> 赞同：0
> 
> 时间：2012-05-23T09:32:05.783
> 
> 标签：grid, extjs4, paging, store

我的应用程序中有一个网格，配置了`xtype : 'pagingtoolbar'`与此网格相关的存储，`pageSize : 10`结果是`pagingtoolbar`正确显示（如下所示），但网格中有一个滚动条，所有记录都加载到网格。我肯定在网格/存储配置中缺少某些东西： ![分页工具栏](../Images/39f0e4902a891e16613286c05758dc70.png)

**网格 ：**

```
xtype : 'gridpanel',
store : mystore,
height : 350,
hidden : true,
columns : [ {
              dataIndex : 'firstName',
              text      : 'First Name',
              flex      : 1
            },{
              dataIndex : 'lastName',
              text      : 'Last Name',
              flex      : 1
            },{
              dataIndex : 'email',
              text      : 'Email',
              flex      : 1  
 }],
 dockedItems : [ {
        xtype : 'pagingtoolbar',
        hight : 28,
                    displayInfo : true,
        dock : 'bottom'
 } ] 
```

**店铺 ：**

```
Ext.define('Users',{
   extend: 'Ext.data.Store',
   model: usersModel,
   pageSize : 10,
   proxy: {
             type: 'ajax',
             url: 'servletURL',
             reader: {
                   type: 'json',
                   root: 'data',
                   successProperty: 'success',
                   totalProperty: 'total'
             },
            writer: {
               type : 'json',
               root: 'data' 
    },
    actionMethods: {
        read   : 'POST',
        create : 'POST',
        update : 'POST',
        destroy: 'POST'
    },

},
sortOnLoad: true,
sorters: { property: 'dateTimeTrx', direction : 'DESC' },

}); 
```

我从服务器端正确接收数据，但我无法显示页面，所有数据都在一个页面中，即使`pagingtoolbar`如上所示正确显示，有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:25:53.840

ExtJs`pagingtoolbar`不负责从服务器响应中提取所需的数据。相反，您的服务器必须准确地响应应该为当前页面显示的数据。为了告诉服务器需要什么数据，ExtJs 会发送额外的参数（类似于`?start=0&page=1&limit=10`）。**您必须根据此参数形成响应。**

# python - python3通过pop3下载邮件并处理

> ID：10717187
> 
> 赞同：0
> 
> 时间：2012-05-23T09:32:28.637
> 
> 标签：python, python-3.x

我在我的电子邮件中发送了打印机状态报告。我想下载它们并一一处理，并将所有信息放入某个数据库中以供进一步处理。我想在开始学习时使用 python3。我有这个代码：

```
import getpass
import poplib

server = poplib.POP3('pop3.mailserver.com' )

server.user('report@mailserver.com')
server.pass_('pswd')

numMessages = 1 #len(server.list()[1])
emails, total_bytes = server.stat()

print("{0} emails in the inbox, {1} bytes total".format(emails, total_bytes))

for i in range(numMessages):  
    for msg in server.retr(i+1)[1]:
        print(msg) 
```

我得到的是这种格式的整个电子邮件（带有标题和正文）：

```
b'Return-Path: <"tever">'
b'Delivered-To: reportc@mailserver.com'
b'Received: (qmail 13193 invoked by uid 89); 23 May 2012 08:44:51 -0000'
b'Received: by simscan 1.2.0 ppid: 13156, pid: 13164, t: 0.1620s'
b'         scanners: clamav: 0.97-exp/m:53 spam: 3.3.1'
b'X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on mxavas16.ad.aruba.it'
b'X-Spam-Level: *'
b'X-Spam-Status: No, score=1.4 required=5.0 tests=FH_FROMEML_NOTLD,INVALID_MSGID,'
b'\tT_FILL_THIS_FORM_SHORT autolearn=disabled version=3.3.1'
b'Received: from unknown (HELO smtplq02.aruba.it) (62.149.158.35)'
b'  by mxavas16.ad.aruba.it with SMTP; 23 May 2012 08:44:51 -0000'
b'Received: (qmail 30750 invoked by uid 89); 23 May 2012 08:44:51 -0000'
b'Received: from unknown (HELO smtp8.aruba.it) (62.149.158.228)'
b'  by smtplq02.aruba.it with SMTP; 23 May 2012 08:44:51 -0000'
b'Received: (qmail 30979 invoked by uid 89); 23 May 2012 08:44:51 -0000'
b'Received: from unknown (HELO NM7ACD31) (email@server.it@83.xxx.xxx.xxx)'
b'  by smtp8.ad.aruba.it with SMTP; 23 May 2012 08:44:51 -0000'
b'Date: Wed, 23 May 2012 10:46:34 +0200'
b'From: tever'
b'Subject: QEQ1313212'
b'To: report@mailserver.com'
b'Message-Id: <201205231046340001d806.TEVER>'
b'Mime-Version: 1.0'
b'Content-Type: text/plain; charset="utf-8"'
b'Content-Transfer-Encoding: base64'
b''
b'RXF1aXBtZW50IElEOiAgICAgICAgICAgICANCk1vZGVsIE5hbWU6ICAgICAgICAg'
b'ICAgICAgQ0RDIDE3MjVfRENDIDI3MjUNClNlcmlhbCBOdW1iZXI6ICAgICAgICAg'
b'ICAgUUVRMTMxMzIxMg0KTWV0ZXJEYXRlOiAgICAgICAgICAgICAgICBXZWQgMjMg'
b'TWF5IDIwMTIgMTA6NDY6MzQNCkNvdW50ZXJzIGJ5IEZ1bmN0aW9uDQogUHJpbnRl'
b'ZCBQYWdlcw0KICBDb3BpZXI6ICAgICAgICAgICAgICAgICAyMjE1ICAgIA0KICBQ'
b'cmludGVyOiAgICAgICAgICAgICAgICAxMTEyMDQgIA0KICBGQVg6ICAgICAgICAg'
b'ICAgICAgICAgICA5MzIgICAgIA0KICBUb3RhbDogICAgICAgICAgICAgICAgICAx'
b'MTQzNTEgIA0KIFNjYW5uZWQgUGFnZXMNCiAgQ29waWVyOiAgICAgICAgICAgICAg'
b'ICAgMTkxOSAgICANCiAgRkFYOiAgICAgICAgICAgICAgICAgICAgMjIwNyAgICAN'
b'CiAgT3RoZXI6ICAgICAgICAgICAgICAgICAgMTgyMiAgICANCiAgVG90YWw6ICAg'
b'ICAgICAgICAgICAgICAgNTk0OCAgICANCkNvdW50ZXJzIGJ5IFBhcGVyIFNpemUN'
b'Ck1vbm9jaHJvbWUNCiAgQTM6ICAgICAgICAgICAgICAgICAgICAgNDU0ICAgICAN'
b'CiAgQjQ6ICAgICAgICAgICAgICAgICAgICAgMCAgICAgICANCiAgQTQ6ICAgICAg'
b'ICAgICAgICAgICAgICAgMTA4MDQ4ICANCiAgQjU6ICAgICAgICAgICAgICAgICAg'
b'ICAgNDI3ICAgICANCiAgQTU6ICAgICAgICAgICAgICAgICAgICAgMCAgICAgICAN'
b'CiAgRm9saW86ICAgICAgICAgICAgICAgICAgMSAgICAgICANCiAgTGVkZ2VyOiAg'
b'ICAgICAgICAgICAgICAgMCAgICAgICANCiAgTGVnYWw6ICAgICAgICAgICAgICAg'
b'ICAgMCAgICAgICANCiAgTGV0dGVyOiAgICAgICAgICAgICAgICAgMCAgICAgICAN'
b'CiAgU3RhdGVtZW50OiAgICAgICAgICAgICAgMCAgICAgICANCiAgT3RoZXIxOiAg'
b'ICAgICAgICAgICAgICAgMCAgICAgICANCiAgT3RoZXIyOiAgICAgICAgICAgICAg'
b'ICAgMiAgICAgICANCk1vbm8gQ29sb3INCiAgQTM6ICAgICAgICAgICAgICAgICAg'
b'ICAgMCAgICAgICANCiAgQjQ6ICAgICAgICAgICAgICAgICAgICAgMCAgICAgICAN'
b'CiAgQTQ6ICAgICAgICAgICAgICAgICAgICAgMCAgICAgICANCiAgQjU6ICAgICAg'
b'IE90aGVyIEVycm9ycw0KDQo8V2VkIDIzIE1heSAyMDEyIDEwOjQxOjU0Pg0KICBb'
b'IF0gQWxsIE90aGVyIEVycm9ycw0KDQo8V2VkIDIzIE1heSAyMDEyIDEwOjQ1OjIx'
b'Pg0KICBbKl0gQWRkIFBhcGVyDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0NCkNEQyAx'
b'NzI1X0RDQyAyNzI1DQpbMDA6YzA6ZWU6N2E6Y2Q6MzFdDQotLS0tLS0tLS0tLS0t'
b'LS0tLS0t'
b'DQo='
b'' 
```

我需要的是逐行处理正文内容，如果匹配，我需要从服务器中删除它。

和提示怎么做？

非常感谢杰拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:24:51.903

也许如果您从解析消息开始，那将是一个好的开始：

```
# ... get your message ...
# msg = [b'Return-Path: <"tever">'
#        b'Delivered-To: reportc@mailserver.com', ... ]

import email

# decode simple non-multipart message
message = email.message_from_bytes(b'\n'.join(msg))
payload = message.get_payload(decode=True)
payload = payload.decode(message.get_content_charset())
print(payload) 
```

然后你可以随心所欲地使用有效载荷......

# svg - 将 SVG 多边形转换为路径

> ID：10717190
> 
> 赞同：29
> 
> 时间：2012-05-23T09:32:43.177
> 
> 标签：svg, raphael

我有一个相当大的 SVG 行政分区文件，我需要在 Raphael.JS 中使用它（它有 600 个多边形和 1.2 Mb 的权重）。

现在，我需要将这些多边形转换为路径，以便它在 Raphael 中工作。伟大的[poly2path 工具](http://aautar.digital-radiation.com/blog/?p=3042)可以做到这一点，但它不支持任何批处理命令，因此每个多边形相对于其他多边形的位置都会丢失。

您知道将 SVG 多边形转换为路径的任何工具吗？（我也有用于导出 SVG 的 AI 文件）。

非常感谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-24T02:09:36.680

1.  在网络浏览器中打开您的 SVG。
2.  运行此代码：

    ```
    var polys = document.querySelectorAll('polygon,polyline');
    [].forEach.call(polys,convertPolyToPath);

    function convertPolyToPath(poly){
      var svgNS = poly.ownerSVGElement.namespaceURI;
      var path = document.createElementNS(svgNS,'path');
      var pathdata = 'M '+poly.getAttribute('points');
      if (poly.tagName=='polygon') pathdata+='z';
      path.setAttribute('d',pathdata);
      poly.parentNode.replaceChild(path,poly);
    } 
    ```

3.  使用浏览器的开发者工具（或 Firebug），在元素上使用“复制为 HTML”（或复制 SVG）将修改后的源代码放到剪贴板上。

4.  粘贴到新文件中并享受。

我的网站上有上述方法的演示（稍作修改）：http:
[//phrogz.net/svg/convert_polys_to_paths.svg](http://phrogz.net/svg/convert_polys_to_paths.svg)

*该页面上使用了两种方法；一个（如上）使用基于字符串的技术来获取和设置点；另一个使用 SVG DOM 访问点和设置路径命令。*

* * *

正如@Interactive 在评论中指出的那样，您可以通过纯文本转换来做到这一点：

1.  全部转换`<polyline`为`<polygon``<path`
2.  全部更改`points="`为`d="M`
3.  对于之前的任何元素`<polygon>`，您需要添加`z`作为`d`属性的最后一个字符以将最后一个点连接到第一个点。例如：

    ```
    <polygon points="1,2 3,-4 5,6"/> 
    ```

    变成

    ```
    <path d="M1,2 3,-4 5,6z"/> 
    ```

这种'hack'之所以有效，是因为[规范声明](https://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands)后跟多个坐标的`moveto`命令（`M`或）是合法的，第一个坐标之后的所有坐标都被解释为命令。`m``lineto`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:32:18.717

多边形 id、填充和描边属性保存的小修复

```
var polys = document.querySelectorAll('polygon,polyline');
[].forEach.call(polys,convertPolyToPath);

function convertPolyToPath(poly){
  var svgNS = poly.ownerSVGElement.namespaceURI;
  var path = document.createElementNS(svgNS,'path');
  var points = poly.getAttribute('points').split(/\s+|,/);
  var x0=points.shift(), y0=points.shift();
  var pathdata = 'M'+x0+','+y0+'L'+points.join(' ');
  if (poly.tagName=='polygon') pathdata+='z';
  path.setAttribute('id',poly.getAttribute('id'));
  path.setAttribute('fill',poly.getAttribute('fill'));
  path.setAttribute('stroke',poly.getAttribute('stroke'));
  path.setAttribute('d',pathdata);

  poly.parentNode.replaceChild(path,poly);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T14:21:35.960

从开发人员工具中复制所有内容似乎很不方便。您可以使用 XSLT 将多边形和折线转换为路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" exclude-result-prefixes="svg"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg">

  <!-- Identity transform: Copy everything 
       (except for polygon/polyline, handled below) -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Turn polygons/polylines into paths, 
       copy all attributes and content 
       (except for @points: Will be matched
       by template below) -->
  <xsl:template match="svg:polygon|svg:polyline">
    <path>
      <xsl:apply-templates select="@*|node()"/>
    </path>
  </xsl:template>

  <!-- Turn the points attribute into a d attribute -->
  <xsl:template match="@points">
    <xsl:attribute name="d">
      <xsl:value-of select="concat('M',.)"/>
      <!-- If we have a polygon, we need to make 
           this a closed path by appending "z" -->
      <xsl:if test="parent::svg:polygon">
        <xsl:value-of select="'z'"/>
      </xsl:if>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

多边形/折线元素的任何属性都将被传递到路径元素。这也适用于批处理。您可以使用任何 XSLT 处理器（Saxon、Xalan、xsltproc、Altova...）甚至在浏览器中使用`XSLTProcessor`对象来运行它，例如：

```
var xsltProcessor = new XSLTProcessor();
xsltProcessor.importStylesheet(stylesheet);
var transformedSVG = xsltProcessor.transformToFragment(svgDocument).firstChild 
```

（类似问题：[SVG 中由路径与多边形绘制的多边形示例](https://stackoverflow.com/questions/13679495/examples-of-polygons-drawn-by-path-vs-polygon-in-svg)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T03:09:10.557

A clicky-bunty answer:

1.  open the svg in inkscape vector graphics editor
2.  select all objects (ctrl-a)
3.  at the drop down menu point "path" select first entry "object to path" (shift-ctrl-c)
4.  save the svg and check out the path properties

Might be not an appropriate answer (because with large files the program needs some time).

# android - 如何在android中设置相机拍摄视频的帧速率...？

> ID：10717191
> 
> 赞同：2
> 
> 时间：2012-05-23T09:32:46.207
> 
> 标签：android, video-capture

实际上，我想通过 android 设备的帧速率 30 的相机拍摄视频，但它会根据不同的设备而变化。那么如何将相机的视频捕获设置或限制为 30 的帧速率。我尝试过 (MediaRecorder) **recorder.setVideoFrameRate(30)**，但它在捕获视频方面没有任何变化..

提前非常感谢...!! :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:03:39.243

它绝对会改变录制视频的帧速率。我刚刚对运行 Ice Cream Sandwich 的 Xoom 进行了测试，并且没有设置该值，它默认为大约 8fps。您使用的设备可能不支持您尝试的帧速率（我使用的是 24）。

确保您遵循有关何时拨打此电话的文档说明。它明确表示您需要在设置格式之后但在调用 prepare 之前执行此操作。

如果相机无法处理设置，它将简单地忽略您的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-24T19:35:03.600

setCaptureRate() 将帮助设置捕获率！

# git - Git推送，状态问题

> ID：10717192
> 
> 赞同：0
> 
> 时间：2012-05-23T09:32:47.287
> 
> 标签：git, push, sync, status

我的 git 项目发生了一个奇怪的错误。

```
liam@development ~/android/system/system/core $ git push git@development:android.git/platform/system/core.git gingerbread-release-om
Everything up-to-date
liam@development ~/android/system/system/core $ git status
# On branch gingerbread-release-om
# Your branch is ahead of 'development/gingerbread-release-om' by 1 commit.
#
nothing to commit (working directory clean)
liam@development ~/android/system/system/core $ 
```

有谁知道为什么会发生这种情况？

编辑：

```
liam@development ~/android/system/system/core $ git remote -v
development     git@development:android/platform/system/core (fetch)
development     git@development:android/platform/system/core (push) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:08:24.120

编辑2：（我还不能回答我自己的问题）

好的，我现在知道问题所在了。我的网络管理员通过将 .git 添加到 android repo 的根目录中“修复”了 git web 中的错误。这是在我同步本地源代码树之后完成的。遥控器现在应该读取

```
git@development:android.git/platform/system/core 
```

为了解决这个问题，我需要运行

```
git remote set-url development git@development:android.git/platform/system/core git@development:android/platform/system/core 
```

修复我的整个 android 源代码树

```
repo forall -c 'pwd; git remote -v; git remote set-url development git@development:android.git/platform/$REPO_PATH git@development:android/platform/$REPO_PATH; git remote -v' 
```

从源码树的根开始。为了清楚地改变变化，那里有一些额外的东西。

修好后，我跑了：

```
liam@development ~/android/system/system/core $ git status
# On branch gingerbread-release-om
# Your branch is ahead of 'development/gingerbread-release-om' by 1 commit.
#
nothing to commit (working directory clean)
liam@development ~/android/system/system/core $ git push
Everything up-to-date
liam@development ~/android/system/system/core $ git status
# On branch gingerbread-release-om
nothing to commit (working directory clean)
liam@development ~/android/system/system/core $ 
```

排序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:36:35.163

因为当你推送到一个 url 时，git 不会更新任何远程分支。

您应该推动`development gingerbread-release-om`该消息消失。

# linq - ObjectStateManager 中已存在具有相同键的对象

> ID：10717198
> 
> 赞同：0
> 
> 时间：2012-05-23T09:33:18.013
> 
> 标签：linq

使用以下代码，我在存储库中搜索特定的 Matrix，然后将其分配给 Shuttle 属性。

```
var requestRepository = unitOfWork.Create<Request>();
var matrixRepository = unitOfWork.Create<Matrix>();
...
var matrix = matrixRepository.Find(m => m.MatrixID == matrixID).FirstOrDefault();
request.Shuttle = matrix;
.... 
```

这行得通。我尝试另一种选择。使用以下代码，我准备了一个 Matrix 对象并尝试将其附加到我的存储库。

```
var requestRepository = unitOfWork.Create<Request>();
var matrixRepository = unitOfWork.Create<Matrix>();
...
var matrix = new Matrix { MatrixID = matrixID };
matrixRepository.Attach(matrix);
request.Shuttle = matrix;
.... 
```

这行不通。在附加语句中，我收到错误：**ObjectStateManager 中已存在具有相同键的对象**

有人可以解释我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:56:21.353

第一种方式，你只需找到元素并将其放入矩阵中。但是在第二种方式中，您尝试添加可能已经存在于 matrixRepository 中的矩阵。

**编辑**

```
var matrix = matrixRepository.Find(m => m.MatrixID == matrixID).FirstOrDefault(); 
```

这表明如果不返回默认值，matrixID 可以在 matrixRepository 中。

但在这儿

```
var matrix = new Matrix { MatrixID = matrixID };
matrixRepository.Attach(matrix); //if matrixRepository allready have matrix with matrixID  you will get error 
```

您只需将其添加到 matrixRepository

# hibernate - 使用自然 fk 时出现休眠错误 org.hibernate.PropertyAccessException

> ID：10717201
> 
> 赞同：1
> 
> 时间：2012-05-23T09:33:30.587
> 
> 标签：hibernate

我有用户实体

```
@Entity
@Table(name = "ETN_USER", uniqueConstraints = {@UniqueConstraint(columnNames = {"LOGIN"})})
@org.hibernate.annotations.Table(appliesTo = "ETN_USER", indexes={@org.hibernate.annotations.Index(name="IDX_ETN_USER",  columnNames={"LOGIN"})})
public class User implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue // use auto increase index
    @Column(name = "USER_ID", unique = true, nullable = false, insertable = true, updatable = true)
    private Long userId;

    @Column(name = "LOGIN", nullable = false, columnDefinition = "varchar(100)")
    private String login;

    public Long getUserId() {
        return userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
    }

    public String getLogin() {
        return login;
    }

    public void setLogin(String login) {
        this.login = login;
    }

} 
```

和

```
@Entity
@Table(name = "ETN_USER_ROLE")
@org.hibernate.annotations.Table(
    appliesTo = "ETN_USER_ROLE", 
    indexes={@org.hibernate.annotations.Index(name="IDX_ETN_USER_ROLE",  columnNames={"USER_ROLE_ID", "LOGIN", "ROLE_CODE"})}
)
public class UserRole implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "USER_ROLE_ID", unique = true, nullable = false, insertable = true, updatable = true)
    private Long userRoleId;

    @ManyToOne(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
    @JoinColumn(name = "LOGIN", referencedColumnName = "LOGIN", nullable = false)
    @ForeignKey(name="fk_userrole_user_login")
    @Where(clause="isDeleted = 0")
    private User user;

    @ManyToOne(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
    @JoinColumn(name = "ROLE_CODE", referencedColumnName = "ROLE_CODE", nullable = false)
    @ForeignKey(name="fk_userrole_role_rolecode")
    @Where(clause="isDeleted = 0")
    private Role role;

    @Column(name = "STATUS", nullable = false, length = 1)
    private String status;

    public Long getUserRoleId() {
        return userRoleId;
    }

    public void setUserRoleId(Long userRoleId) {
        this.userRoleId = userRoleId;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public Role getRole() {
        return role;
    }

    public void setRole(Role role) {
        this.role = role;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

} 
```

我使用字段登录在用户和用户角色之间进行映射。当我插入数据时一切正常，但是当我从表中选择数据时发生用户错误

```
org.hibernate.PropertyAccessException: could not get a field value by reflection getter of th.go.excise.ethanol.entity.user.User.login
    at org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:62)
    at org.hibernate.tuple.component.AbstractComponentTuplizer.getPropertyValue(AbstractComponentTuplizer.java:77)
    at org.hibernate.tuple.component.AbstractComponentTuplizer.getPropertyValues(AbstractComponentTuplizer.java:83)
    at org.hibernate.tuple.component.PojoComponentTuplizer.getPropertyValues(PojoComponentTuplizer.java:108)
    at org.hibernate.type.ComponentType.getPropertyValues(ComponentType.java:386)
    at org.hibernate.type.ComponentType.getHashCode(ComponentType.java:217)
    at org.hibernate.engine.EntityUniqueKey.generateHashCode(EntityUniqueKey.java:86)
    at org.hibernate.engine.EntityUniqueKey.<init>(EntityUniqueKey.java:67)
    at org.hibernate.type.EntityType.loadByUniqueKey(EntityType.java:669)
    at org.hibernate.type.EntityType.resolve(EntityType.java:441)
    at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:139)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)
    at org.hibernate.loader.Loader.doQuery(Loader.java:857)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
    at com.reaction.dao.base.BaseDao.listByNameQuery(BaseDao.java:193)
    at th.go.excise.ethanol.service.UserService.getByLogin(UserService.java:55)
    at th.go.excise.ethanol.service.UserService.getUserInfoBean(UserService.java:281)
    at th.go.excise.ethanol.service.UserService$$FastClassByCGLIB$$b7bd97cf.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:617)
    at th.go.excise.ethanol.service.UserService$$EnhancerByCGLIB$$22987fe4.getUserInfoBean(<generated>)
    at th.go.excise.ethanol.struts.action.MainAction.welcome(MainAction.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.IllegalArgumentException: Can not set java.lang.String field th.go.excise.ethanol.entity.user.User.login to java.lang.Long
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:37)
    at sun.reflect.UnsafeObjectFieldAccessorImpl.get(UnsafeObjectFieldAccessorImpl.java:18)
    at java.lang.reflect.Field.get(Field.java:358)
    at org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:59)
    ... 133 more 
```

它说 Can not set java.lang.String field th.go.excise.ethanol.entity.user.User.login to java.lang.Long 我不明白，因为数据库中的字段 LOGIN 的类型为 varchar 不长

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:45:35.557

我发现一些教程说所有参考字段都使用@NaturalId

```
@NaturalId
@Column(name = "LOGIN", nullable = false, columnDefinition = "varchar(100)")
private String login; 
```

这是工作！我可以从数据库中获取数据（在测试之前删除并重新创建数据库）。

# iphone - 试图划分 UIBezierPath

> ID：10717203
> 
> 赞同：1
> 
> 时间：2012-05-23T09:33:35.880
> 
> 标签：iphone, objective-c, ios, uibezierpath

在一个功能中，我使用 UIBezierPath 来绘制曲线。在一种情况下，我需要将 UIBezierPath 分解为相对于常数的部分（在设备景观 x 值 512.0 中）。我不确定它是否可能。是否存在任何笏做同样的事情。请帮助我摆脱这种情况。提前致谢。

我在我的应用程序中用于绘图的一些代码片段：

```
 [bezierPath moveToPoint:mid1];
    [drawingBezier addQuadCurveToPoint:mid2 controlPoint:previousPoint1];
    [self setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:40:37.343

每个贝塞尔路径都有两个点（起点和终点）。

在触摸开始事件

```
 UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];      // points (X1,y1) 
```

在触摸移动事件

```
 UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
   [myPath addLineToPoint:[mytouch locationInView:self]];   // points (X2,y2) 
```

现在使用 (x1,x2) 和 (y1,y2) 值拆分 mypath 行。(ie) x1=500, x2= 700, y1=250, y2 = 500 和新 x = (x1+x2/2) y = (y1+y2/2) （根据您的要求计算新点）调用 drawRect 绘制线条。

# java - CAS可以是无国籍的吗？

> ID：10717212
> 
> 赞同：1
> 
> 时间：2012-05-23T09:34:19.133
> 
> 标签：java, spring, single-sign-on, cas

CAS 3被设计成有状态的，因为它使用spring webflow并将tgt存储在内存（或数据库）中；是否可以使 CAS 无状态？
我可以通过删除 webflow 并将 tgt 存储在 cookie 中来实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:38:21.107

TGT 已存储在 cookie 中。

查看“/login” URI： [http ://www.jasig.org/cas/protocol](http://www.jasig.org/cas/protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:17:32.807

对，cas-server 是有状态的，因为它需要一个用于登录过程的会话（默认会话超时：5 分钟）并具有一个应用程序范围的票证注册表，它存储所有有效票证（票证授予票证和服务-票）。

由于身份验证逻辑是在 spring webflow 之上构建（和测试）的，因此我不建议将此部分交换为自己的实现。

为什么要让 cas-server 无状态？

# java - 在 Eclipse 中处理没有“声明的包 com.pkgY 与预期的包 dirX.src.main.java.com.pkgY 不匹配”的主要和测试

> ID：10717213
> 
> 赞同：0
> 
> 时间：2012-05-23T09:34:27.220
> 
> 标签：java, eclipse, buildpath

我下载的每个 Java 项目都有*main*和*test*文件夹。两者都包含*java*和*resources*子文件夹。一些项目甚至添加了更多级别：例如根目录中的*dir1*、*dir2*、*dir3*等，其中每个 dirX 包含*src*以及 main 和 test 子文件夹。我该如何处理它们？如果我只是将项目根目录的内容放到默认 src 中，Eclipse 会将类属性放入*dirX.src.main.java.com.pkgY*显然会导致“声明的包*com.pkgY 与预期的包 dirX.src**不*匹配*.main.java.com.pkgY* ”错误。我应该添加每个*dirX/src/java*目录作为 buildpath 中的一个源，正如[这个答案](https://stackoverflow.com/questions/7628686/eclipse-the-declared-package-does-not-match-the-expected-package)所暗示的那样？相应的测试呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:41:55.283

这个结构是 Maven 的`Standard Directory Layout`。在您的情况下，您需要通过选项添加 src/main/java 和 src/test/java （右键单击 java 文件夹并将其用作源文件夹）和资源以及类路径`configure buildpath`。有关更多详细信息，请参阅此[maven 链接](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:01:36.453

确保您安装了 m2e (http://download.eclipse.org/technology/m2e/releases)，如果您正在使用 Eclipse WTP 做 JavaEE，您还应该添加 m2eclipse-wtp (https://github. com/sonatype/m2eclipse-wtp/wiki)

然后，您有 2 个解决方案：

*   右键单击每个项目并配置 > 转换为 Maven 项目
*   从您的工作区中删除项目并执行“导入为现有 Maven 项目”

m2e 将负责根据您的 pom.xml 配置配置 Eclipse。

# php - CSqlDataProvider 属性标签

> ID：10717219
> 
> 赞同：0
> 
> 时间：2012-05-23T09:34:49.697
> 
> 标签：php, yii

```
<?php
//form
class SomeForm extends CFormModel
{
    public $id;
    public $user_id;

    public function search()
    {
        $sql = 'SELECT id, name FROM some_table';
        $sql_count = 'SELECT COUNT(id) FROM some_table';
        return new CSqlDataProvider($sql, array(
            'totalItemCount' => Yii::app()->db->createCommand($sql_count)->queryScalar(),                                    
            'sort' => array(
                'attributes' => array(
                    'id', 'name',
                ),                
            ),
            'pagination' => array(
                'pageSize' => 50,
            ),
        ));
    }

    public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'name' => 'NAME',            
        );
    }
}

//grid
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $model->search(), //$model = new SomeForm()    
    'columns' => array(
        'id',
        'name'
    ),
));
/*
Result:
id | name
---------
1  | John

EXPECTED Result:
ID | NAME
---------
1  | John
*/ 
```

如何为查询列设置自定义名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:39:15.710

最简单的方法：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $model->search(), //$model = new SomeForm()    
    'columns' => array(
        'id::ID',
        'name::NAME'
    ),
)); 
```

其他方式：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $model->search(), //$model = new SomeForm()    
    'columns' => array(
        array(
            'header' => 'ID',
            'name' => 'id'
        ),
        array(
            'header' => 'NAME',
            'name' => 'name',
        ),
    ),
)); 
```

[链接到 api 文档](http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T20:50:48.280

如果您不想使用自定义名称；如果你想使用你的模型中声明的标签，那么你可以这样做：

1.  创建模型的空实例并将其传递给您的视图。因此，视图将使用`$data`( `CSqlDataProvider`) 以及空模型。

    ```
    $labelModel = new my_model;

    $this->widget('zii.widgets.CListView',array(
        'dataProvider'=>$my_model->search(), //returns a CSqlDataProvider
        'itemView'=> '_view',
        'viewData' => array('labelModel' => $labelModel),
    )); 
    ```

2.  使用空模型 - 连同 getAttributeLabel - 来回显标签。

3.  用于`$data['field_name']`回显数据。

此[链接](http://www.yiiframework.com/wiki/252/special-variables-in-cgridview-and-clistview/)包含有关如何将附加模型传递给`CListView`or的更多信息`CGridView`。

# rvm - 为什么 rvm 不向我显示一个像 virtualenv 这样的特殊提示

> ID：10717224
> 
> 赞同：0
> 
> 时间：2012-05-23T09:35:05.987
> 
> 标签：rvm

我刚刚在 Ubuntu 11.04 上安装了 RVM，并将它与 Python 的 virtualenv 进行了比较。

当我激活 virtualenv 时，它会更改提示（在我的 Ubuntu 系统上），所以我确切地知道该终端中哪个环境处于活动状态。另一方面，RVM 似乎并没有这样做。RVM 似乎也不需要任何激活。

我在这里遗漏了什么，还是 rvm 默认的工作方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:25:40.647

你需要自己做：

```
PS1="\$(~/.rvm/bin/rvm-prompt) $PS1" 
```

更多细节在这里：[https ://rvm.io/workflow/prompt/](https://rvm.io/workflow/prompt/)

或者您可以像我一样构建自己的提示： [https](https://github.com/mpapis/home_dotfiles/blob/master/.bashrc#L17) ://github.com/mpapis/home_dotfiles/blob/master/.bashrc#L17 + [https://github.com/mpapis/home_dotfiles/blob/master/.functions #L156-L160](https://github.com/mpapis/home_dotfiles/blob/master/.functions#L156-L160)

# animation - 处理带有静态部分的巨大纹理

> ID：10717226
> 
> 赞同：0
> 
> 时间：2012-05-23T09:35:09.587
> 
> 标签：animation, cocos2d-iphone, png, textures

我正在编写带有动画的 iPad cocos2d 游戏。

设计师给了我每个 png 动画角色的帧。我正在使用 TexturePacker 来打包我的纹理。但是其中一个字符非常大（600x600 像素）。还有200帧动画。因此，如果我将它与 TP 一起打包到一些地图集中，这将是非常大的内存部分。但实际上并非所有 600x600 像素都在变化。角色只有移动的手和腿。

我认为，我应该从帧中删除静态部分并从每个帧中删除动态部分以减少内存使用。是否有一些现有的工具可以做到这一点？还是在我的情况下有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:04:57.753

AFAIK，没有用于此类任务的工具。还有 200 帧 600x600 像素....我敢肯定，您将无法将所有这些帧与其他纹理作为背景、其他效果等一起放入内存中。对于移动设备来说太多了。即使是 iPad。您应该要求您的艺术家尽可能减少帧数和尺寸。

例如，几个月前我得到了 200x300 像素帧的动画。实际上内容只有大约 100x100 像素。这些框架中的所有其他地方都充满了光芒。光晕去掉后，虽然没有以前那么酷了，但也很好。并减少记忆问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:25:50.470

对于其他有同样问题的人：

毕竟我拒绝了 Cocos2d 并用视频写游戏。巨大的动画被预渲染在视频文件中，我用 imageView.animationImages 覆盖了小动画。

您可以更改视频播放时间以添加交互。

# java - 如何从 MS-Access 的 OLE 对象中提取图像？

> ID：10717232
> 
> 赞同：0
> 
> 时间：2012-05-23T09:35:20.747
> 
> 标签：java, sql, ms-access, jdbc, ole

我有带有图像字段的 MS Access 数据库，我需要将这些图像提取到字节数组中。问题是进入数据库图像在 OLE 容器内，当我从数据库中获取图像作为 BLOB 时，我有 OLE 容器，里面有图像，我无法显示和打印这个图像。我已经尝试[过从 MS Access 转换 OLE 图像对象以用于 .NET](https://stackoverflow.com/questions/2416497/converting-an-ole-image-object-from-ms-access-for-use-in-net)方式来提取图像，但它仅适用于容器内的 BMP 图像。我使用 JDBC-ODBC 桥。

那么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:03:40.700

我没有尝试过，但也许这可以工作： http: [//poi.apache.org/](http://poi.apache.org/)。

从网站：

> 该项目为 OLE2 文件系统 (POIFS) 和 OLE2 文档属性 (HPSF) 提供 API。

# ios - iPhone应用程序中C代码的内存管理

> ID：10717236
> 
> 赞同：0
> 
> 时间：2012-05-23T09:35:35.000
> 
> 标签：ios, xcode, memory

我正在开发一个 iPhone 应用程序，它有一个用 C 和 Objective C 编写的模块。我正在使用 pthread_create 创建新线程。对于内存分配，我使用了 malloc()。

1.  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init] 会处理这个内存吗？或者我应该明确使用 free() 来释放这个内存？

    线程连续运行，它正在分配大量内存。因此，在某一点之后，它会发出内存警告。

2.  如果我显式释放内存以及使用 NSAutoreleasePool 会产生问题吗？

3.  有没有办法检查这个线程中的内存泄漏。Xcode 的分析工具用于检查目标 C 代码中的内存泄漏。它有助于管理 C 类型的内存分配吗？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:42:20.563

您不向其发送`autorelease`消息的任何内容都不会成为自动释放池的目标。由于您不能将消息发送到普通的 c 对象，因此它们永远不会受到影响。C 对象总是需要手动管理（即使使用 ARC）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:49:07.870

> NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init] 会处理这个内存吗？或者我应该明确使用 free() 来释放这个内存？

您应该使用`free`通过分配的所有内存`malloc`

> 如果我显式释放内存以及使用 NSAutoreleasePool 会产生问题吗？

没有任何。你也必须这样做。

> 有没有办法检查这个线程中的内存泄漏。Xcode 的分析工具用于检查目标 C 代码中的内存泄漏。它有助于管理 C 类型的内存分配吗？

据我了解，Instruments Leaks 与 ObjC 运行时系统密切相关，因此它不适用于通过`malloc`. 对于 MacOSX，Apple 提供了一些工具来检测内存泄漏（MallocDebug 和泄漏，请参见[此处](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html)），但它们不适用于 iOS 应用程序。您可能会尝试在模拟器上运行它们，但我怀疑它们不会给您可靠的结果。

另一方面，如果您使用的是纯 C 库，那么您可以围绕它构建一个从您的整体代码（通过删除 iOS 特定部分）派生的纯 C 测试平台，以便能够在 MacOSX 下检查它。测试平台将使用纯 C 模块模拟您的应用程序的工作流程。不过，这将是一项重大的努力，只有当你真的担心它时，我才会去做。

您拥有的另一种方法是围绕您的 C 模块构建和 ObjC 包装器，以便您拥有一个或多个使用 C 模块并通过 init/dealloc 方法中的 malloc/free 为其分配/释放内存的类；您可以使用 Instruments 检查您的 ObjC 包装器对象是否没有泄漏，如果您已正确实现包装器对象，您可以非常确定您没有泄漏 malloc 内存。

# android - 片段活动转换

> ID：10717237
> 
> 赞同：0
> 
> 时间：2012-05-23T09:35:34.937
> 
> 标签：android

我有一个应用程序，它设置了一个带有 5 个选项卡的 TabHost。这些选项卡是片段活动。在这些片段活动中的每一个中，都设置了几个片段。

我的 Main 类设置 tabHost 和片段活动，如下所示

```
 public class Main extends TabActivity 
        {

            public void onCreate(Bundle savedInstanceState)
            {
                super.onCreate(savedInstanceState);
                requestWindowFeature(Window.FEATURE_NO_TITLE);
                setContentView(R.layout.main);

            Resources res = getResources();
                tabHost = getTabHost();
                TabHost.TabSpec spec;
                Intent intent;

      intent = new Intent().setClass(this,
                                                 Tab1.class);
                    spec = tabHost
                    .newTabSpec("home")
                                            .setIndicator("Home",
                                                    res.getDrawable(R.drawable.tabhome))
                                            .setContent(intent);
                                    tabHost.addTab(spec);
        //and do this for the other 4 tabs

    tabHost.setCurrentTab(0);
}

        } 
```

然后我的 fragmentActivity 是这样设置的

```
public class Tab1 extends FragmentActivity
{

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

FragmentTransaction fragmentTransaction = getSupportFragmentManager()
                .beginTransaction();
        // Fragments
        Fragment fragOne = new FragmentOne();
        Fragment fragTwo = new FragmentTwo();
        Fragment fragThree = new FragmentThree();

        fragmentTransaction.replace(R.id.fragmentOne, fragOne);
        fragmentTransaction.replace(R.id.fragmentTwo, fragTwo);
        fragmentTransaction.replace(R.id.fragmentThree, fragThree);

        fragmentTransaction.commit();

      }
} 
```

Tab1 Fragment Activity 有 3 个片段，如上所示。每个 Fragment、FragmentOne、FragmentTwo 和 FragmentThree 每个都在 Fragment 内包含一个下一步按钮。

我想知道的是如何设置它，以便它们在类中的每个片段之间转换。例如

Frag1（在 Frag1 中单击下一步按钮），Frag 2 从右侧过渡（在 Frag2 中单击下一步按钮） Frag3 从右侧过渡（在 Frag3 中，单击下一步按钮） Frag1 从右侧过渡。

任何帮助将不胜感激！！！

编辑：还将在 home.xml 布局文件中粘贴片段的设置方式，以防您想知道我是如何设置的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeMain"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RelativeLayout
                    android:id="@+id/FragmentOneRL"
                    android:layout_width="wrap_content"
                    android:layout_height="100dp"
                    android:orientation="vertical" >

                    <FrameLayout
                        android:id="@+id/fragmentOne"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                    </FrameLayout>
                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/FragmentTwoRL"
                    android:layout_width="wrap_content"
                    android:layout_height="100dp"
                    android:layout_below="@+id/FragmentOneRL"
                    android:orientation="vertical" >

                    <FrameLayout
                        android:id="@+id/fragmentTwo"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                    </FrameLayout>
                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/FragmentThreeRL"
                    android:layout_width="wrap_content"
                    android:layout_height="100dp"
                    android:layout_below="@+id/FragmentTwoRL"
                    android:orientation="vertical" >

                    <FrameLayout
                        android:id="@+id/fragmentThree"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                    </FrameLayout>      

                </RelativeLayout>

       </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:09:42.973

我最终想通了，我将 XML 文件更改为这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

             <FrameLayout
                    android:id="@+id/TheFragment"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                </FrameLayout>

</RelativeLayout> 
```

然后在 FragmentActivity 我创建了这个方法

```
protected void changeFragment(Fragment removeFrag, Fragment f)
    {
        FragmentTransaction ft = fm.beginTransaction();
        ft.setCustomAnimations(R.anim.view_transition_in_left,
                R.anim.view_transition_out_left);
        ft.replace(R.id.TheFragment, f);
        ft.remove(removeFrag);
        ft.addToBackStack(null);
        ft.commit();
    } 
```

然后在用户单击下一步按钮时的每个片段中都会执行类似的操作

```
Fragment f = ((Tab1) getActivity()).fragTwo;
            Fragment rf = ((Tab1) getActivity()).fragOne;

            ((Tab1) getActivity()).changeFragment(rf, f); 
```

# sql-server - 在sql中计算两行中两次之间的差异

> ID：10717248
> 
> 赞同：1
> 
> 时间：2012-05-23T09:36:26.723
> 
> 标签：sql-server

我正在使用 MSSQL 2008 标准

我在选择命令中有多行，其中填充了事件。对于每个事件我都有一个时间戳，现在我想计算事件之间的时间：

```
(number) | event          | timestamp           | duration
---------+----------------+---------------------+----------
 1       | logon          | 2012-05-23 10:00:00 |
 2       | incomming call | 2012-05-23 10:01:00 |
 3       | call ended     | 2012-05-23 10:02:00 |
 4       | logoff         | 2012-05-23 10:04:00 | 
```

（数字栏不存在但更容易解释）

现在第一行的持续时间单元格应该是 1，第二行也是 1，第三行是 2。

有谁知道如何在没有循环等的情况下实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:39:28.360

你需要一个自我加入。由于您需要生成一个 id，因此类似于：

```
 select t1.*, datediff(minute, t2.timestamp, t1.timestamp) from
     (select *, row_number() over (order by ...) as rowid from MyTable) t1
 inner join 
     (select *, row_number() over (order by ...) as rowid from MyTable) t2
 on t1.rowid = t2.rowid - 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:57:52.847

这是我当前的版本/解决方案：

```
declare @temp table
(
    id int,
    timestamp datetime,
    type nvarchar(255),
    skillname nvarchar(255),
    event nvarchar(255),
    userstatus nvarchar(255)
)

insert into @temp (id, timestamp, type, skillname, event, userstatus)
(
    select ROW_NUMBER() over (order by timestamp) as id, * from
    (
        select TimeStamp, 'Event' as type, SkillName, Event, UserStatus from AgentEvents
            where TimeStamp >= '2012-05-22T00:00:00'
                and UserName like '%engel%'
        union
        select TimeStamp, 'Anruf' as type, SkillName, '' as event, '' as status from calls
            where TimeStamp >= '2012-05-22T00:00:00'
                and UserName like '%engel%'
    ) as a 
)

select t1.*, DATEDIFF(second, t1.timestamp, t2.timestamp) as duration 
from @temp t1
left outer join @temp t2 on t1.id = t2.id - 1 
```

编辑：更改`inner join`为`left outer join`，否则最后一行将丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T15:36:42.377

我发现提供的 CTE 答案不太理想，因为它没有报告第一行。我发现加入的其他答案太复杂了。我将问题提炼成这个片段

这是使用 CTE 的代码，它在 CTE 的选择中创建一个序列，该序列通过有序时间戳标识行号。产生的选择在产生的有序行上挑选并确定分钟。

```
WITH AgentActions AS
(
    select ROW_NUMBER() OVER (ORDER BY [TimeStamp]) -- Create an index number ordered by time.
         AS [Sequence],
    * from AgentInteractions
)
SELECT *,
       ISNULL(DATEDIFF(Minute, 
                      (SELECT other.TimeStamp 
                              FROM AgentActions Other 
                              WHERE other.Sequence = AgentActions.Sequence - 1 ), 
                       AgentActions.TimeStamp), 
               0) 
    AS MinutesFromLastPoint
FROM AgentActions; 
```

这是设置表

```
CREATE TABLE AgentInteractions
(
[Event]      VARCHAR(12) NOT NULL, 
[Timestamp] [DateTime] NOT NULL
);

INSERT INTO dbo.AgentInteractions( Event, TimeStamp  )
VALUES ( 'Alpha', '1-Jan-2018 3:04:22 PM' ),
       ( 'Omega', '3-Jan-2018 10:04:22 PM' ),
       ( 'Beta', '2-Jan-2018 2:04:22 AM' ); 
```

结果

![在此处输入图像描述](../Images/32b879af3305370151134443249424d1.png)

`[SQL Fiddle Example](http://sqlfiddle.com/#!6/d02a2/1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T11:10:30.430

据我了解，您需要更新持续时间列。

你可以使用这样的东西：

```
update mytable a set duration =  DateDiff( a.timestamp, select top b.timestamp from mytable b order by b.timestamp asc) 
```

我无法测试它，只是为了给你一个想法（它可能有一些语法错误）。使用带有“order by”子句的“top”应该可以解决问题。

（已编辑）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T11:30:07.493

我认为你最好创建一个触发器

```
CREATE TRIGGER update_duration ON sometable 
INSTEAD OF INSERT 
AS 
DECLARE @lastDT datetime 
BEGIN
SET @lastDT =
  (SELECT TOP 1 _timestamp
   FROM sometable
   ORDER BY _timestamp DESC)
UPDATE sometable
SET duration = DATEDIFF(MINUTE, @lastDT, GETDATE()) 
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-10T12:39:07.457

`WITH rows AS ( SELECT *, ROW_NUMBER() OVER (ORDER BY Col1) AS rn FROM dbo.Table_2 ) SELECT mc.col1, DATEDIFF(HOUR, mc.Col1, mp.Col1) as TimeDiffInHours FROM rows mc JOIN rows mp ON mc.rn = mp.rn-1`

# php - 获取当前域

> ID：10717249
> 
> 赞同：169
> 
> 时间：2012-05-23T09:36:29.727
> 
> 标签：php, url, php-5.2

我在服务器上有我的网站`http://www.myserver.uk.com`。

在这台服务器上，我有两个域：

```
one.com and two.com 
```

我想使用 PHP 获取当前域，但如果我使用，`$_SERVER['HTTP_HOST']`那么它会显示给我

```
myserver.uk.com 
```

代替：

```
one.com or two.com 
```

如何获取域，而不是服务器名称？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-05-23T09:41:05.637

尝试使用这个：

```
$_SERVER['SERVER_NAME'] 
```

或解析：

```
$_SERVER['REQUEST_URI'] 
```

参考：*[apache_request_headers()](http://php.net/manual/en/function.apache-request-headers.php)*

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-05-05T15:54:16.440

最好的用途是

```
echo $_SERVER['HTTP_HOST']; 
```

它可以像这样使用：

```
if (strpos($_SERVER['HTTP_HOST'], 'banana.com') !== false) {
    echo "Yes this is indeed the banana.com domain";
} 
```

下面的代码是在结构化 HTML 输出中查看 $_SERVER 中所有变量的好方法，其中突出显示的关键字在执行后立即停止。因为我有时会忘记自己使用哪一个 - 我认为这可能很漂亮。

```
<?php
    // Change banana.com to the domain you were looking for..
    $wordToHighlight = "banana.com";
    $serverVarHighlighted = str_replace( $wordToHighlight, '<span style=\'background-color:#883399; color: #FFFFFF;\'>'. $wordToHighlight .'</span>',  $_SERVER );
    echo "<pre>";
    print_r($serverVarHighlighted);
    echo "</pre>";
    exit();
?> 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2018-05-11T23:56:27.980

## 这样做的唯一安全方法

检索当前域的唯一有保证的安全方法是将其存储在自己的安全位置。

大多数框架都会为您存储域，因此您需要查阅特定框架的文档。如果您不使用框架，请考虑将域存储在以下位置之一：

|    存储域的安全方法</th> |   使用者 |
| --- | --- |
| 一个配置文件</td> | [Joomla](https://en.wikipedia.org/wiki/Joomla) , [Drupal](https://en.wikipedia.org/wiki/Drupal) / [Symfony](https://en.wikipedia.org/wiki/Symfony) |
| 数据库</td> | [WordPress](https://en.wikipedia.org/wiki/WordPress) |
| 环境变量 | [Laravel](https://en.wikipedia.org/wiki/Laravel)  </td> |
| 服务注册中心</td> | [Kubernetes](https://en.wikipedia.org/wiki/Kubernetes) DNS |

## 以下工作......但它们并不安全

黑客可以使以下变量输出他们想要的任何域。这可能导致缓存中毒和几乎不明显的网络钓鱼攻击。

```
$_SERVER['HTTP_HOST'] 
```

这会从对[黑客开放](https://expressionengine.com/blog/http-host-and-server-name-security-issues)的请求标头中获取域。与：

```
$_SERVER['SERVER_NAME'] 
```

[如果 Apache 设置usecanonicalname](https://httpd.apache.org/docs/2.4/mod/core.html#usecanonicalname)关闭，这个可以做得更好；在这种情况下，`$_SERVER['SERVER_NAME']`将不再允许使用任意值填充并且将是安全的。但是，这不是默认设置，也不是常见的设置。

# 在流行的系统中

以下是如何在以下框架/系统中获取当前域：

**WordPress**

```
$urlparts = parse_url(home_url());
$domain = $urlparts['host']; 
```

如果您在 WordPress 中构建 URL，只需使用[home_url](https://codex.wordpress.org/Function_Reference/home_url)或[site_url](https://codex.wordpress.org/Function_Reference/site_url)或任何[其他 URL 函数](https://code.tutsplus.com/tutorials/why-you-shouldnt-code-urls-in-wordpress-themes-or-plugins--cms-23262)。

**拉拉维尔**

```
request()->getHost() 
```

该`request()->getHost`功能继承自 Symfony，自 2013 [CVE-2013-4752](https://symfony.com/blog/security-releases-symfony-2-0-24-2-1-12-2-2-5-and-2-3-3-released)补丁以来一直是安全的。

**德鲁巴**

安装程序尚未确保此安全（[问题 #2404259](https://www.drupal.org/project/drupal/issues/2404259)）。但是在 Drupal 8 中，您可以在[受信任的主机设置](https://www.drupal.org/node/1992030)中遵循文档来保护您的 Drupal 安装，之后可以使用以下内容：

```
\Drupal::request()->getHost(); 
```

**其他框架**

随意编辑此答案以包括如何在您喜欢的框架中获取当前域。执行此操作时，请包含指向相关源代码或任何其他有助于我验证框架是否安全运行的链接的链接。

* * *

## 附录

开发示例：

1.  如果僵尸网络不断地使用错误的主机头请求页面，则可能发生缓存中毒。然后，生成的 HTML 将包含指向攻击者网站的链接，他们可以在其中对您的用户进行网络钓鱼。起初恶意链接只会被发回给黑客，但如果黑客做了足够多的请求，页面的恶意版本最终会在你的缓存中分发给其他用户。

2.  如果您根据主机标头将链接存储在数据库中，则可能发生网络钓鱼攻击。例如，假设您将绝对 URL 存储到论坛上用户的个人资料。通过使用错误的标题，黑客可以让任何点击其个人资料链接的人被发送到钓鱼网站。

3.  如果黑客在为其他用户填写密码重置表单时使用恶意主机标头，则可能发生密码重置中毒。然后，该用户将收到一封电子邮件，其中包含指向网络钓鱼站点的密码重置链接。另一种更复杂的形式通过让电子邮件退回并重新发送到黑客的一个 SMTP 服务器[（例如 CVE-2017-8295）来跳过用户必须做的任何事情。](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-8295)

4.  这里有一些[更恶意的例子](http://shiflett.org/blog/2006/server-name-versus-http-host)

其他注意事项和注意事项：

*   当[usecanonicalname](https://httpd.apache.org/docs/2.4/mod/core.html#usecanonicalname)关闭时，将使用`$_SERVER['SERVER_NAME']`相同的标头填充`$_SERVER['HTTP_HOST']`（加上端口）。这是 Apache 的默认设置。如果您或 DevOps 将其打开，那么您就可以了 - 是的 - 但您是否真的想依赖一个单独的团队，或者三年后的您自己，以保持看起来像次要配置的非-默认值？尽管这使事情变得安全，但我会警告不要依赖此设置。
*   然而，Red Hat 在默认情况下确实打开了 usecanonical [ [source](https://www-uxsup.csx.cam.ac.uk/pub/doc/redhat/redhat8/rhl-rg-en-8.0/s1-apache-config.html) ]。
*   如果在虚拟主机条目中使用了[serverAlias](https://httpd.apache.org/docs/2.4/mod/core.html#serveralias)，并且请求了别名域，`$_SERVER['SERVER_NAME']`则不会返回当前域，而是返回 serverName 指令的值。
*   如果无法解析 serverName，则使用操作系统的 hostname 命令代替[[source]](https://httpd.apache.org/docs/2.4/mod/core.html#servername)。
*   如果主机头被遗漏，服务器将表现得好像 usecanonical 在[[source]](https://httpd.apache.org/docs/2.4/mod/core.html#usecanonicalname)上。
*   最后，我只是尝试在我的本地服务器上利用它，但无法欺骗主机头。我不确定 Apache 是否有解决此问题的更新，或者我是否只是做错了什么。无论如何，在不使用虚拟主机的环境中，此标头仍然可以利用。

一点咆哮：

     这个问题获得了数十万的关注，却没有提到手头的安全问题！不应该这样，但仅仅因为 Stack Overflow 答案很受欢迎，这并不意味着它是安全的。

* * *

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-04-15T10:45:32.607

使用`$_SERVER['HTTP_HOST']`得到我（子域。）maindomain.extension。对我来说，这似乎是最简单的解决方案。

如果您实际上是通过 iFrame 进行“重定向”，则可以添加一个[GET](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)参数来说明域。

```
<iframe src="myserver.uk.com?domain=one.com"/> 
```

然后您可以设置一个会话变量，在整个应用程序中保留这些数据。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-05-23T09:40:05.077

试试`$_SERVER['SERVER_NAME']`。

提示：创建一个调用该函数的 PHP 文件`phpinfo()`并查看“PHP 变量”部分。那里有很多我们从未想过的有用变量。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-08-09T08:39:38.910

要获取域：

```
$_SERVER['HTTP_HOST'] 
```

带协议的域：

```
$protocol = strpos(strtolower($_SERVER['SERVER_PROTOCOL']), 'https') === FALSE ? 'http' : 'https';
$domainLink = $protocol . '://' . $_SERVER['HTTP_HOST']; 
```

协议、域和 queryString 总数：

```
$url = $protocol . '://' . $_SERVER['HTTP_HOST'] . '?' . $_SERVER['QUERY_STRING']; 
```

**由于 $_SERVER['SERVER_NAME'] 对于多域托管不可靠！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-15T06:34:13.893

每个人都在使用该`parse_url`函数，但有时用户可能会以不同的格式传递参数。

为了解决这个问题，我创建了一个函数。看一下这个：

```
function fixDomainName($url='')
{
    $strToLower = strtolower(trim($url));
    $httpPregReplace = preg_replace('/^http:\/\//i', '', $strToLower);
    $httpsPregReplace = preg_replace('/^https:\/\//i', '', $httpPregReplace);
    $wwwPregReplace = preg_replace('/^www\./i', '', $httpsPregReplace);
    $explodeToArray = explode('/', $wwwPregReplace);
    $finalDomainName = trim($explodeToArray[0]);
    return $finalDomainName;
} 
```

只需传递 URL 并获取域。

例如，

```
echo fixDomainName('https://stackoverflow.com'); 
```

将返回：

```
stackoverflow.com 
```

在某些情况下：

```
echo fixDomainName('stackoverflow.com/questions/id/slug'); 
```

而且它也会回来`stackoverflow.com`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-08-23T17:56:09.903

我知道这可能不完全是关于这个主题，但根据我的经验，我发现将当前 URL 的 WWW 属性存储在一个变量中很有用。

此外，请参阅下面的我的评论，看看这是什么意思。

在确定是否使用“www”发送 Ajax 调用时，这一点很重要：

```
$.ajax("url" : "www.site.com/script.php", ...

$.ajax("url" : "site.com/script.php", ... 
```

调度 Ajax 调用时，域名必须与浏览器地址栏中的域名匹配，否则您将在控制台中出现**Uncaught SecurityError 。**

所以我想出了这个解决方案来解决这个问题：

```
<?php
    substr($_SERVER['SERVER_NAME'], 0, 3) == "www" ? $WWW = true : $WWW = false;

    if ($WWW) {
        /* We have www.example.com */
    } else {
        /* We have example.com */
    }
?> 
```

然后，根据 $WWW 是真还是假，运行正确的 Ajax 调用。

我知道这听起来可能微不足道，但这是一个很容易被绊倒的常见问题。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-06-17T14:14:34.947

只需尝试：

```
echo apache_request_headers()[3]; 
```

# json - 有没有办法向 Grails JSON 响应添加额外的字段？

> ID：10717253
> 
> 赞同：4
> 
> 时间：2012-05-23T09:37:02.270
> 
> 标签：json, grails, groovy

我希望每个对 post-request 的 JSON 响应都包含一个 field `success`。在那里添加此字段的最佳方法是什么？

我使用这样的代码来生成 JSON 响应：

```
try {
    def entity = myService.saveEntity(arg1,arg2)
    render entity as JSON //I want to add artificial field 'success = "yes"' here
} catch (ValidationException e) {
    render parseErrors(e.errors) as JSON //field 'success = "no"' here
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T16:11:10.253

这周我只是在这个确切的问题上苦苦挣扎。我想将域类作为 JSON 发回，但同时添加一个可能包含其他信息的“errorMessage”属性。

事实证明，当在 grails 中**用作 JSON**时，它会发回一个转换器对象，但可以使用**JSON.parse()**将该转换器实例转换为 jsonObject ，我们可以轻松地向其中添加新值。

```
def jsonObject = JSON.parse((entity AS JSON).toString())
jsonObject.put("success", "yes")
render jsonObject as JSON 
```

我认为有几种不同的方法，但这对我来说是最简单的，因为我已经为我的大多数域类提供了自定义转换器，并且我不想向我的域对象添加任何其他瞬态属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T09:43:38.597

您能否返回一个包含该`success`字段的地图，并将该对象包装在一个单独的变量中：

```
try {
    def entity = myService.saveEntity(arg1,arg2)
    render [ success:'yes', val:entity ] as JSON
} catch (ValidationException e) {
    render [ success:'no', val:parseErrors(e.errors) ] as JSON
} 
```

没测试过吧。。。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T09:59:50.700

您可以注册自己的 JSON 编组器（例如，在`BootStrap.groovy`），例如：

```
JSON.registerObjectMarshaller(MyEntity) { MyEntity it ->
  return [
    someField : it.someField, // you should specify fields for output, or put all '.properties'
    success   : true // as I understand you always have 'true' for real entity
  ]
} 
```

`MyEntity`您要使用的课程在哪里

# build - Jenkins - 在构建任何构建作业之前执行脚本

> ID：10717255
> 
> 赞同：3
> 
> 时间：2012-05-23T09:37:05.500
> 
> 标签：build, continuous-integration, hudson, jenkins

我想在 Jenkins 服务器上执行任何项目/构建之前执行一个脚本。我已经检查了 BuildWrapper 脚本和其他一些脚本。

这些似乎都基于一个特定的工作，但我想让这个排序在这个服务器上的任何工作/构建中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:59:30.993

您可以添加所有作业都依赖的上游作业。

具体来说，在您的工作的构建步骤中，您可以选择“在其他项目上触发/调用构建”，添加 ParentJob 并选择“阻止直到触发的项目完成构建”，然后再调用您的工作的构建步骤。

# android - Android NDK：从源代码编译的自定义 WebView

> ID：10717257
> 
> 赞同：10
> 
> 时间：2012-05-23T09:37:10.420
> 
> 标签：android, c, sdk, compilation, webview

我的目标是在 Android 中创建 WebView 的修改版本（称为 WebViewCustom），供我个人在我的应用程序中使用。WebView 是基于 WebKit 的，所以我需要通过 NDK 在 C 中编译它。我现在对参与开源的Android项目没有兴趣，所以我的需要只是能够编译WebView的原始C源并将其用作我的Android应用程序中的自定义控件（SDK和NDK都是可能的环境）申请）。我认为没有我不感兴趣的所有 GIT WebKit 东西是可能的，但我不是 Android 和 WebKit 项目的专家。是否可以只编辑和编译 WebView 代码并将其作为新控件放入我的应用程序中？你能告诉我这个任务的主要步骤吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:56:43.390

这当然是可能的。从源代码重建的主要困难`android.webkit`在于缺乏正确的构建环境。它从未打算在目标平台之外构建，但是围绕源代码进行了一些简单的黑客攻击，使其非常容易实现。

首先，`android.webkit`出于显而易见的原因，必须重命名整个包业务，因为`android.webkit.WebView`在运行时已经可以使用一个类。`sed`例如，在所有`frameworks/base/core/java/android/webkit`树上使用。

基本上你必须获取完整的源代码树，初始化构建环境（更多信息在这里[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)），`make framework`使内部运行环境可用，创建一个新的开发平台，替换从`framework.jar`（在构建它之后`out/target/common/obj/JAVA_LIBRARIES/framework_intermediaries/classes.jar`）到平台的所有类，针对这个包含内部组件的新平台`android.jar`构建您自己的包。`webkit`

查看[https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)了解有关获取可用于开发目的的内部运行时的更多信息。

您还需要`core_intermediaries`和`bouncycastle_intermediaries`其他人为了编译`webkit`，这些都在`make framework`调用时可用，在构建包时查看错误`webkit`并用 grep`out/target/common/obj/JAVA_LIBRARIES/`找出哪些类包含符号。

然而，这还不是全部，包使用`libwebcore.so`的将本机方法暴露给`android.webkit`包；这将必须将所有本机方法绑定注册到您的新包名称 (in `external/webkit/WebKit/android/jni`) 并在*没有预链接*( `make libwebcore`) 的情况下重新编译并与您的应用程序一起打包为本机库。

在一切都满意之后，您将使用您自己`WebView`的包中的自己的类而不是那个`android.webkit`。如果您打算`android.webview`完全替换 - 您必须重新编译`framework.jar`并在内部替换它`system/framework/`（需要 root 权限）。

# sql-server - 仅在日期部分之间获取 DateRange sql server 2005

> ID：10717262
> 
> 赞同：0
> 
> 时间：2012-05-23T09:37:20.053
> 
> 标签：sql-server

在仅考虑日期部分的日期之间获取记录的最佳方法是什么？我的意思是只得到例如 2012-07-30

以下似乎不起作用

```
DECLARE @StartDate datetime,@EndDate datetime,@NewStartDate dateTime
SET @StartDate='2012-06-03 17:43:56.220'
SET @EndDate='2012-07-30 00:00:00.000'

SELECT  *
FROM    MyTable
WHERE CONVERT(varchar(10),StartDate,111) >=CONVERT(varchar(10),@StartDate,111)
AND CONVERT(varchar(10),EndDate,111) <=CONVERT(varchar(10),@EndDate,111) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:40:34.937

```
 select CONVERT(varchar(10),getdate(),111) 
```

印刷

```
2012/05/23 
```

所以它肯定会去掉日期部分。是什么让您认为您的查询“似乎不起作用”？

# c# - WPF DataGrid，按下向下箭头键时文本框没有获得焦点

> ID：10717263
> 
> 赞同：1
> 
> 时间：2012-05-23T09:37:23.553
> 
> 标签：c#, wpf, datagrid, textbox

我在单元格中放置了一些文本框，我真正需要的是，当我按下向下箭头或向上箭头键时，下一行中的下一个文本框或控件应该得到关注

```
 <owpfc:FFDataGrid ItemsSource="{Binding Path=Ss}" AutoGenerateColumns="False" SelectionUnit="FullRow">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewKeyDown">
                    <mvvmlightextra:EventToCommand Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}, Path=DataContext.CmdDownKeyDown}" PassEventArgsToCommand="True" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <wpftk:DataGrid.Columns>
                <wpftk:DataGridTemplateColumn Header="Name" IsReadOnly="False">
                    <wpftk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Path=Ts1}" x:Name="txtName" />
                        </DataTemplate>
                    </wpftk:DataGridTemplateColumn.CellTemplate>

                </wpftk:DataGridTemplateColumn>
                <wpftk:DataGridTextColumn Binding="{Binding Path=Ts2}" Header="Ts2" IsReadOnly="False"/>
            </wpftk:DataGrid.Columns>
        </owpfc:FFDataGrid> 
```

之后我尝试

```
protected override void OnPreviewKeyDown(System.Windows.Input.KeyEventArgs e)
    {

        if (e.Key == System.Windows.Input.Key.Down)
        {
            if (SelectedIndex < Items.Count)
            {
                SelectedIndex++;
                DataGridCell cell = GetCell(SelectedIndex, 0);
                var currentFirstControl = (FrameworkElement)cell.Content;
                currentFirstControl.Focus();
            }

        }
        else if (e.Key == System.Windows.Input.Key.Up)
        {
            if (SelectedIndex > 0)
            {
                SelectedIndex--;
                DataGridCell cell = GetCell(SelectedIndex, 1);
                var currentFirstControl = (FrameworkElement) cell.Content;
                currentFirstControl.Focus();
            }

        }

        base.OnPreviewKeyDown(e);
    } 
```

真的需要你的帮助，谢谢！

# shell - shell脚本获取eth0的网关地址

> ID：10717264
> 
> 赞同：1
> 
> 时间：2012-05-23T09:37:27.510
> 
> 标签：shell, ubuntu

我想使用一个简短的 shell 脚本来获取我的默认网关地址。这样它就可以了

```
$> whatismygateway.sh
192.168.100.10 
```

我试过`ifconfig eth0`了，但它只是不包含有关网关的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:48:54.553

如果`eth0`是你的界面，你可以尝试这样的事情

```
 cat /etc/sysconfig/network-scripts/ifcfg-eth0|grep GATEWAY|sed 's/^[A-Z].*=//' 
```

输出：

> 95.174.29.225

你也可以使用`route`命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:48:58.883

`route | grep default`应该给你你正在寻找的东西，但如果你有多个接口，你可能需要进一步过滤结果。

# php - wso2 php 出错

> ID：10717268
> 
> 赞同：1
> 
> 时间：2012-05-23T09:38:14.657
> 
> 标签：php, wso2

我在安装 wso2 php 框架时遇到问题。按照他们网站[http://wso2.org/project/wsf/php/2.0.0/docs/install_guide.html#1.Installing_and_Running_on_Linux的说明进行操作](http://wso2.org/project/wsf/php/2.0.0/docs/install_guide.html#1.Installing_and_Running_on_Linux)

运行opensuse 12.1

当我运行 make 时，我收到以下错误，我不知道如何继续。任何帮助将不胜感激

```
cp: target `/usr/lib64/php5/extensions/wsf_c/lib/' is not a directory
make[6]: *** [install-data-hook] Error 1
make[6]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c/sandesha2c/s                                                                                                                                                             rc/core'
make[5]: *** [install-data-am] Error 2
make[5]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c/sandesha2c/s                                                                                                                                                             rc/core'
make[4]: *** [install-am] Error 2
make[4]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c/sandesha2c/s                                                                                                                                                             rc/core'
make[3]: *** [install-recursive] Error 1
make[3]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c/sandesha2c/s                                                                                                                                                             rc'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c/sandesha2c'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/home/wso2/wso2-wsf-php-src-2.1.0/wsf_c'
make: *** [install-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:43:02.380

似乎您正在关注 2.0.0 文档，以安装 2.1.0。请按照文档 [1] 获取相关版本。我最近在 Ubuntu 10.04 上安装了 WSF/PHP 2.1.0。[2] 解决了我面临的一些问题。

[1] - [http://wso2.org/project/wsf/php/2.1.0/docs/install_guide.html](http://wso2.org/project/wsf/php/2.1.0/docs/install_guide.html) [2] - [http://kkpradeeban.blogspot.com/2012/01/installing-wso2-wsfphp -on-ubuntu-1004.html](http://kkpradeeban.blogspot.com/2012/01/installing-wso2-wsfphp-on-ubuntu-1004.html)

# jquery - 在 Jquery 中将元素设置为默认状态

> ID：10717273
> 
> 赞同：0
> 
> 时间：2012-05-23T09:38:47.633
> 
> 标签：jquery, html, jquery-ui

我有一个这样的**div**：

```
<div id='resultBar'></div> 
```

我将此**div**更改为**进度**条，因为使用以下内容：

```
$('my button').click(function(){
     $('#resultBar').html('<div/>').closest('div').progressbar({
          value: 100
     }).height(15);

     $.ajax({
         url : "searchClass",
             type : "POST",
             data : $("#frmSearchClass").serialize(),
             success : function(data){
                     $('#resultBar').empty();
             }
     });
}); 
```

现在**成功**后，我清空了**id***为 resultBar的***div**，但问题是 jquery 应用到它的类保持原样。我想把那个 div 带到它的初始状态，就像在应用进度条之前一样 ***`<div id='resultBar'></div>`***

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:43:15.843

添加这个...

```
$('#resultBar').progressbar("destroy"); 
```

参考：http: [//jqueryui.com/demos/progressbar/#method-destroy](http://jqueryui.com/demos/progressbar/#method-destroy)***

# iphone - 如何删除在 iPhone 中使用 UIWebview 加载的 HTML 文件的背景颜色

> ID：10717277
> 
> 赞同：0
> 
> 时间：2012-05-23T09:39:02.563
> 
> 标签：iphone, html, objective-c, ios5, uiwebview

我的包中有一个 HTML 文件..我正在使用 webView 加载它...然后我得到白色背景颜色（我认为它可能是 HTML 文件的背景颜色）..当它出现时如何删除该背景出现在 iPhone...

问题 2：我想为 iPhone 和 iPad 使用不同字体大小的 HTML 文件。我有 20 个 HTML 文件。例如 HTML 中文本的字体大小是 15 ......这个大小对于 iPhone 来说已经足够了，但对于 iPad 来说就足够了看起来很小...如何使用 iPhone 代码动态更改 HTML 文件中文本的字体大小...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:46:35.977

尝试将 uiview 的背景颜色设置为清除，如下所示：

```
uiwebview.backgroundColor = [UIColor clearColor]; 
```

并将 body 标签更改为此（或将其添加到您的 CSS）：

```
<body style="filter: alpha (opacity=0)"> 
```

# gwt - 进度条定位

> ID：10717282
> 
> 赞同：0
> 
> 时间：2012-05-23T09:39:36.887
> 
> 标签：gwt, xtk

@haehn 嗨，Haehn

我将 GWT 与 XTK 一起使用。我已经成功地在 GWT 应用程序中使用了“最小高度：100%”技巧来让 XTK 运行。现在一切正常，除了进度条位于黑色区域的正下方。

在其中一篇文章中，您提到了使用 position:relative 使其出现在黑色区域的中心。但在我的情况下，这个技巧对我没有帮助。实际上，我不太确定我是否在该帖子中正确地遵循了您的解释。快速浏览一下 XTK 代码库也没有发现任何问题。

这里有一点帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:41:24.730

这是一个艰难的 - 你必须使用 css 风格。如果您发现问题，请告诉我们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:08:31.987

有一种为进度条定义 CSS 的新方法：重载 CSS 类`xtk-progress-bar`。任何样式都会自动应用于进度条。

# wpf - 使用纯黑色矩形的 WPF 边框

> ID：10717283
> 
> 赞同：0
> 
> 时间：2012-05-23T09:39:39.887
> 
> 标签：wpf, border

如何让 WPF 中的边框使用纯黑色矩形？它总是看起来有较粗的底部和左侧线条，我猜这是阴影效果，即使我没有应用任何效果。我不想使用矩形，因为我正在使用它在包含控件的网格周围应用边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:56:49.630

尝试设置`SnapsToDevicePixels="true"`。像这样：

```
<Border Width="200" Height="200" 
        BorderBrush="Black" BorderThickness="1" 
        SnapsToDevicePixels="true"></Border> 
```

对我来说，这消除了边界的不同厚度。

# .net - .NET 应用程序 - 获取程序集/文件版本令人困惑

> ID：10717284
> 
> 赞同：2
> 
> 时间：2012-05-23T09:39:42.480
> 
> 标签：.net, powershell, powershell-2.0

我想阅读使用***Powershell v2***的强命名 .NET（使用 v4.0 构建）程序集的版本信息。我使用两种不同的方法来做到这一点，但第二种方法总是给我正确的版本信息[尽管第一种方法是显而易见的自然选择]：-

**方法一：** `[Reflection.AssemblyName]::GetAssemblyName("C:\ManagedAssembly.exe").Version.ToString()`

将值设为“ **50.0.0.0** ”

**方法二：** `[System.Diagnostics.FileVersionInfo]::GetVersionInfo("C:\ManagedAssembly.exe").FileVersion`

正确给出版本为“ **50.0.0.93** ”

知道为什么会有这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:53:27.477

我的错误和无知。AssemblyVersionInfo.cs 文件包含两个条目 -

```
[assembly: AssemblyVersion("50.0.0.0")] 
```

&

```
[assembly: AssemblyFileVersion("50.0.0.93")] 
```

所以，上面的代码绝对没问题。

# iphone - iPhone 应用程序：查找已将应用程序安装到设备中的 Facebook 好友

> ID：10717285
> 
> 赞同：2
> 
> 时间：2012-05-23T09:39:43.670
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在实现 iPhone 应用程序，我想从 Facebook 获取已经将应用程序安装到他们设备中的朋友列表。

为此，我发送如下请求：

```
 AppDelegate *appDelegate=[[UIApplication sharedApplication] delegate];
   NSMutableDictionary*params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"picture,id,name,link,gender,last_name,first_name",@"fields", nil];
   [[appDelegate facebook] requestWithMethodName:@"friends.getAppUsers" andParams:params andHttpMethod:@"GET" andDelegate:self]; 
```

但作为回应，它只给了我在他们的设备中安装了应用程序的用户的 Facebook id：

```
 xxxxxxxxxxxxxx1,
   xxxxxxxxxxxxxx2,
   xxxxxxxxxxxxxx3 
```

我怎样才能收到所有正在使用应用程序的朋友的回复？

```
 {
    "first_name" = abc;
    gender = male;
    id = 10000xxxxxxxxxxxx;
    "last_name" = xyz;
    link = "http://www.facebook.com/profile.php?id=10000xxxxxxxxxxxx";
    name = "abc xyz";
    picture = "http://profile.ak.fbcdn.net/static-ak/rsrc.php/v2/yo/r/UlIqmHJn-SK.gif";         
 } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:34:25.863

使用 FQL 我可以 `is_app_use`在 Query 中获得带有参数的响应

```
 NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                @"select uid, name,pic_small, is_app_user from user where uid in (select uid2 from friend where uid1=me()) and is_app_user=1", @"query",
                                nil];
[[APPDELEGATE facebook ]   requestWithMethodName: @"fql.query"
                                       andParams: params
                                   andHttpMethod: @"POST"
                                     andDelegate: self]; 
```

# jquery - chrome中的文本字段光标问题

> ID：10717294
> 
> 赞同：8
> 
> 时间：2012-05-23T09:40:13.237
> 
> 标签：jquery, html, css

我在我的表单部分使用以下 css。

![表单字段的屏幕截图](../Images/8d141f1c232d11a9930b9b48a84cf309.png)

**CSS**

```
.username input{
 background-color: #FFFFFF;
 border: 2px solid #DDDDDD;
 border-radius: 5px 5px 5px 5px;
 color: #9E9E9E;
 height: 30px;
 width: 330px;
 padding:0px 10px 0px 0px;
 padding-left:10px;
 margin:15px 0px 0px 0px;
 line-height:30px;
} 
```

它在所有浏览器中都能正常工作。但是在 Chrome 中，光标显示在输入标签的相同高度。我找到了解决方案，如果我删除`line-height`它会按我的意愿显示。但在 IE 中，这些值位于该字段的顶部。我需要这个问题的解决方案。

请看[我的小提琴](http://jsfiddle.net/4Etyn/)。[镀铬不好]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T09:44:27.180

`line-height`从您的 css 类中删除属性，我认为它会帮助您
更新小提琴：http: [//jsfiddle.net/4Etyn/16/](http://jsfiddle.net/4Etyn/16/)

```
<div class="username">
    <input name="txtFullName" id="txtFullName" type="text" class="user" value="Username" onBlur="if(this.value=='') this.value='Username'" onFocus="if(this.value =='Username' ) this.value=''"  />
</div>

.username input{
    background-color: #FFFFFF; 
    border: 2px solid #DDDDDD;
    border-radius:5px;            
    color: #9E9E9E;
    height: 30px; 
    height: 22px\0/; 
    width: 330px; 
    padding:0px 10px 0px 10px; 
    padding:8px 10px 0px 10px\0/;  
    margin:15px 0px 0px 0px;
    vertical-align:middle;
}
:root .username input{
    height: 30px\9;
    padding:0px 10px 0px 10px\9;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-17T13:36:23.120

### 最新答案（2014 年 10 月）

在玩弄并观察“参考”项目在做什么之后，我意识到一件事：我们做错了。

简而言之：对于一个可靠且干净的跨浏览器解决方案，**不能使用** `line-height`属性来使`input type="text"`元素更高，而是使用`padding`属性。

* * *

### 跨浏览器问题

正如问题中所指出的，浏览器以不同`line-height`的方式解释元素的属性。`input type="text"`

在这种情况下，对于 2012 年的 Chrome，甚至现在 2014 年 10 月（版本 37），它是针对光标位置的。

请注意，2010 年 6 月提交了一个相关错误，[https://code.google.com/p/chromium/issues/detail?id=47284](https://code.google.com/p/chromium/issues/detail?id=47284)，但随后作为过时而关闭（谁知道为什么？）：但提供的实时错误复制，[http://jsbin.com/avefi/2](http://jsbin.com/avefi/2)，在编写时仍显示 chrome 错误（2014 年 10 月 - chrome 37）。

请注意，`Valli69`的答案还将`line-height`属性确定为问题的根源。但随后使用了一些相当 hacky/dirty/risky 的 IE8 和 IE9 修复（使用`\0/`和`\9`）。关于[Ie8 CSS Hack 上的这些技术的相关问题 - 最佳方法？](https://stackoverflow.com/questions/5635829/ie8-css-hack-best-method)

* * *

### 不使用`line-height`也不`height`财产呢？

这个解决方案很简单，甚至现代和旧的浏览器都支持！

1) 简化示例中的解决方案

```
/* 
 * [1] overrides whatever value "line-height" property was given by any other selector
 *     note: make it "line-height: normal !important;" if necessary
 * [2] overrides whatever value "height" property was given by any other selector
 *     note: make it "height: auto !important;" if necessary
 */
.username {
  line-height: normal;  /* [1] */
  height: auto;  /* [2] */
  padding-top: 10px;
  padding-bottom: 10px;
}
<input class="username" type="text" placeholder="Username" /> 
```

[http://jsbin.com/yadebenoniro/1/edit?html,css,output](http://jsbin.com/yadebenoniro/1/edit?html,css,output)上的现场演示（ps. 使用此 url [http://jsbin.com/fugegalibuha/1](http://jsbin.com/fugegalibuha/1)在 IE8 上进行测试）

在**Windows 操作系统**上测试：IE8+、IE11、Chrome 38 和 Firefox 32。

2）问题背景下的解决方案

```
/*
 * [1] overrides whatever value line-height property was given by any other selector
 *     note: make it "line-height: normal !important;" if necessary
 * [2] overrides whatever value "height" property was given by any other selector
 *     note: make it "height: auto !important;" if necessary
 *
 * [3] use the padding-top, padding-bottom to adjust the height of your input type text
 * [4] keep in mind that when changing the font-size value you will have to adjust the padding top and padding bottom if you want to keep the same height as previously
 */
.username input {
  background-color: #FFFFFF;
  border: 2px solid #DDDDDD;
  border-radius: 5px;
  color: #9E9E9E;
  height: auto;  /* [2] */
  line-height: normal;  /* [1] */
  margin: 15px 0px 0px 0px; 
  padding: 10px 5px 10px 5px;  /* [3] */
  width: 330px;
  font-size: 20px;  /* [4] */
} 
```

[http://jsbin.com/busobokapama/1/edit?html,css,output](http://jsbin.com/busobokapama/1/edit?html,css,output)上的现场演示（ps. 使用此 url [http://jsbin.com/busobokapama/1](http://jsbin.com/busobokapama/1)在 IE8 上测试）

在**Windows 操作系统**上测试：IE8+、IE11、Chrome 38 和 Firefox 32。

3) 进一步说明

这个想法是在查看[Foundation](http://foundation.zurb.com/)后想到的：它仅使用`height`and`padding`属性：该`line-height`属性保留为其默认*的浏览器提供的*值，即`line-height: normal`.

自己看：通过检查[基础的表单组件演示页面上](http://foundation.zurb.com/docs/components/forms.html)`input type="text"`的元素http://foundation.zurb.com/docs/components/forms.html

唯一的问题是，即使“只是”使用`height`，`padding`对于 IE8 来说似乎也是一个问题，所以我决定甚至删除该`height`属性。

* * *

### 结论

该解决方案显然具有简单代码的巨大优势，可以在所有浏览器中“正常工作”。

但它也有一个缺点，即不能让您完全控制***计算的总高度***：计算的高度属性（字体大小 + 任意像素数）+ padding-top + padding-bottom + (border-width x 2)。“计算高度属性”[似乎因浏览器而异](https://stackoverflow.com/questions/26426856/html-is-input-box-default-calculated-content-height-different-across-browsers)，因此命名为*“任意像素数”*。

由您决定您最喜欢什么：简单的代码或像素精确的设计。

* * *

### 资源

*   [https://developer.mozilla.org/en-US/docs/Web/CSS/height](https://developer.mozilla.org/en-US/docs/Web/CSS/height)
*   [https://developer.mozilla.org/en-US/docs/Web/CSS/line-height](https://developer.mozilla.org/en-US/docs/Web/CSS/line-height)
*   [HTML：输入框默认/计算的内容高度因浏览器而异](https://stackoverflow.com/questions/26426856/html-is-input-box-default-calculated-content-height-different-across-browsers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:49:49.987

我找到了一个适用于最新版本的 Chrome 和 Firefox，以及 IE 8 和 9 的解决方案。我没有测试任何其他浏览器，因为我不需要支持低于 IE 8 的任何东西。

```
<input class="issue" type="text" />
<input class="solution" type="text" />

.issue {
  font-size: 14px;
  height: 44px;
  line-height: 44px;
  padding: 0 10px;
  vertical-align: top;
}

.solution {
  font-size: 14px;
  line-height: 14px;
  height: 14px;
  padding: 15px 10px;
} 
```

[在http://jsbin.com/usimeq/1](http://jsbin.com/usimeq/1)上查看现场演示

编辑：忘记添加第一个输入显示问题，第二个显示解决方案。

基本上只需将行高和高度设置为与字体大小相同，然后使用填充调整输入以匹配预期的整体高度。

希望它可以帮助其他遇到这个烦人问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:44:24.680

只需在您的 jsFiddle 中替换为我即可`line-height:30px;`。`height:30px;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T12:29:53.527

这是将在 IE8 中对齐并且不会在 Chrome 中显示巨大光标的输入的示例 css。

```
line-height: 14px/*to enclose 13px font, override this if needed*/;
height: 14px/*to enclose 13px font, override this if needed*/;
/*Padding is needed to avoid giant cursor in webkit, which we get if
height = line-height = 22px.*/
padding: 6px 8px; 
```

# jquery - Chrome 不加载新的更新图像

> ID：10717297
> 
> 赞同：4
> 
> 时间：2012-05-23T09:40:24.747
> 
> 标签：jquery, html, image, google-chrome

我对 Chrome 有疑问：我有一个产品页面，其中包含使用 Galleryffic（jquery 插件）的产品，并且我已经用新图像更新了画廊的第二个元素。

在 Mozilla Firefox、IE6+、Safari 3+ 中，它们显示更新的图像，但在 chrome 版本 19.0.1084.46 m 中，它显示旧图像。

我尝试取消并重新添加图像，Ctrl+f5 ，删除历史记录，cookies，缓存：无事可做，即使图像已被删除，Chrome 也会显示旧图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:33:41.273

通过 ctrl + shift + del 删除您的完整历史记录，然后更新您的浏览器这个问题是谷歌浏览器的旧版本。

# c# - 如何将 WinForm 用户控件添加到 WPF 中，以便我可以在 xaml.cs 文件中引用它

> ID：10717305
> 
> 赞同：6
> 
> 时间：2012-05-23T09:40:41.643
> 
> 标签：c#, wpf, winforms, visual-studio-2010, user-controls

我正在将 WinForms 项目的一部分迁移到 WPF 中。

我想将现有的 WinForms 用户控件添加到 WPF 表单中。WinForm 用户控件称为“TicketPrinter”，与 WPF 表单位于同一项目中。

在我的 xaml 中，我有这一行：

```
xmlns:Printers="clr-namespace:Project.UserControls.Printers" 
```

然后我在我的 xaml 中使用它：

```
 <WindowsFormsHost Height="430" HorizontalAlignment="Left" Margin="468,12,0,0" Name="windowsFormsHost1" VerticalAlignment="Top" Width="324">
            <Printers:TicketPrinter Printers:Name="ZapTicketPrinter">
            </Printers:TicketPrinter>
        </WindowsFormsHost> 
    </Grid>
</Window> 
```

当我运行项目时，用户控件按预期显示在表单上。

但是当我进入 xaml.cs 文件后面的代码并尝试访问“ZapTicketPrinter”时，它不能作为参考。

IE

我尝试使用 ZapTicketPrinter，但无法识别。

我还尝试了以下方法：

```
TicketPrinter ticketPrinter = this.FindName("ZapTicketPrinter") as TicketPrinter; 
```

但得到一个空

我错过了什么？如何在我的代码中引用名称？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T09:43:29.697

提供 x:Name 而不是 printer:name

```
<WindowsFormsHost>
    <Printers:TicketPrinter x:Name="ZapTicketPrinter"/>
</WindowsFormsHost> 
```

MSDN 示例

~~[使用http://msdn.microsoft.com/en-us/library/ms751761.aspx](http://msdn.microsoft.com/en-us/library/ms751761.aspx)~~[演练](https://msdn.microsoft.com/en-us/library/ms751761(v=vs.100).aspx)背后的代码：在 WPF 中托管 Windows 窗体控件

使用 xaml
~~[http://msdn.microsoft.com/en-us/library/ms742875.aspx](http://msdn.microsoft.com/en-us/library/ms742875.aspx)~~
[演练：使用 XAML 在 WPF 中托管 Windows 窗体控件](https://msdn.microsoft.com/en-us/library/ms742875(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-31T10:33:32.560

尝试使用以下代码：

```
private void LoadWFUserControl() 
{
    // Initialize a Host Control which allows hosting a windows form control on WPF. Ensure that the WindowsFormIntegration Reference is present.
    System.Windows.Forms.Integration.WindowsFormsHost host =
        new System.Windows.Forms.Integration.WindowsFormsHost();

    // Create an object of your User control.
    MyWebcam uc_webcam = new MyWebcam();

    // Assign MyWebcam control as the host control's child.
    host.Child = uc_webcam;

    // Add the interop host control to the Grid control's collection of child controls. Make sure to rename grid1 to appr
    this.grid1.Children.Add(host);
} 
```

# eclipse - 与 ANTLR 一起使用的 Eclipse 源代码编辑器插件

> ID：10717312
> 
> 赞同：0
> 
> 时间：2012-05-23T09:41:29.700
> 
> 标签：eclipse, eclipse-plugin, editor, eclipse-rcp, antlr

我使用 ANTLR 框架创建了我的“新编程语言”。该语言由其语法定义，语义是使用遍历 AST 的 tree walker 强制执行的。

我想开发一个 eclipse 插件作为源代码编辑器来用我的新语言编写程序。例如，我想突出显示关键字、标记带有句法/语义错误的行等。

解决这个问题的最佳方法是什么？任何人都知道任何与 ANTLR 轻松集成来执行此操作的库/框架吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:31:03.640

我会推荐[Xtext](http://www.eclipse.org/Xtext/)框架，它基于 ANTLR + EMF。功能齐全的源代码编辑器，具有可定制的自动完成 + 快速修复...可以轻松完成

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T17:25:05.833

Eclipse [dltk](http://www.eclipse.org/dltk/)插件将是更好的选择。

# asp.net-mvc - 视图未从 mvc 中的模型更新

> ID：10717316
> 
> 赞同：1
> 
> 时间：2012-05-23T09:41:52.863
> 
> 标签：asp.net-mvc, razor

我有一个简单的 MVC 控制器和视图和模型（我删除了所有其他代码以找出问题）模型是一个简单的属性类：

```
public class SiteFileUploadModel
{
    [Required]
    public int ActivePage { get; set; }
} 
```

视图也很简单：

```
@model Models.SiteFileUploadModel
@{
      ViewBag.Title = "Index";
 }
 <h2>Index</h2>
 @if (Model != null)
 {
      using (this.Html.BeginForm("Index", "SiteFileUpload"))
      {
           @Html.Hidden("ActivePage",Model.ActivePage)
           @Model.ActivePage
           switch (Model.ActivePage)
           {
                case 1:
                    <p>Page 1</p>
                    break;
                case 2:
                    <p>Page 2</p>
                    break;
           }
           <button type="submit" name="actionButtons">Previous</button>
           <button type="submit" name="actionButtons">Next</button>
      }
  } 
```

控制器只有一种方法：

```
public class SiteFileUploadController : Controller
{
    //
    // GET: /FileUpload/SiteFileUpload/
    [HttpGet]
    public ActionResult Index()
    {
        var model = new SiteFileUploadModel();
        model.ActivePage = 1;
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(SiteFileUploadModel model, string actionButtons)
    {
        if (actionButtons == "Next")
        {
            model.ActivePage++;

        }
        if (actionButtons == "Previous")
        {
            model.ActivePage--;
        }

        return View(model);
    }

} 
```

当我运行它并按下一步时，我可以看到 model.activePage 变为 2 并且它也显示在输出中（它显示 2 和第 2 页），但隐藏的值仍然是 1。实际上隐藏的值始终是 1 并且它不遵循 ActivePage 的真正价值。我还使用 HiddenFor(m=>m.ActivePage) 生成隐藏字段对其进行了测试，效果相同！问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:50:41.430

看到这个[答案](https://stackoverflow.com/questions/1775170/asp-net-mvc-modelstate-clear)。

简而言之，您需要在重新显示视图之前清除 ModelState，因为 Html Helper 将使用模型状态而不是模型作为其数据。

将以下语句添加到您的控制器操作中：

```
ModelState.Clear(); 
```

# android - 数据存储 - 歌曲歌词应用程序的哪种方法？

> ID：10717324
> 
> 赞同：1
> 
> 时间：2012-05-23T09:42:14.697
> 
> 标签：android, storage

我想编写一个基本上在列表视图中显示歌曲标题的 Android 应用程序，通过在列表中选择一首歌曲，该歌曲的歌词显示在文本视图中。在第二步中，可能会翻译每首歌的歌词。

到目前为止没有什么太复杂，但由于我对 android 编程完全陌生，我想知道存储数据的最佳方法是什么（即歌曲标题/歌词）。我为每首歌曲考虑了一个（xml？）文件，其中文件名是标题，文件包含歌词。我认为这将使添加新歌曲变得容易。这些文件通常存储在哪里？/res/xml?

还是另一种方法更合适？数据库存储？内容提供商？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:04:31.913

我会使用数据库和内容提供程序，因为使用 Loader API 将内容绑定到 ListView 变得非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:15:01.190

根据有关[Data Storage](http://developer.android.com/guide/topics/data/data-storage.html)的文档，您有多种选择。

但似乎满足您需求的存储策略是**SQLite Database**。

你可以使用[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)和[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)来让它工作。

实施它需要大量的工作和理解，但值得付出努力：

*   比其他解决方案更容易在数据存储后对其进行操作。
*   很多 android 组件被设计为使用数据库游标。
*   随着应用程序的发展，易于添加新的数据和结构。
*   您将学到很多关于如何“以正确的方式”开发 android 应用程序的知识。

如果我是你，我会**避免**：

*   [SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)因为这不适合数据列表，因为没有任何“id 机制”。另一方面，它很容易用于小型设置。

*   [内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)，因为数据一旦存储就很难操作。此外，不推荐存储该类型数据的方式。

# ios - UIwebView - 加载它在dismissView时留下的URL

> ID：10717330
> 
> 赞同：0
> 
> 时间：2012-05-23T09:42:29.003
> 
> 标签：ios, uiwebview, nsuserdefaults

我有以下代码，允许我每次加载一个设置的 URL，放置在我的 viewDidLoad 方法中：

```
NSString *urlAddress =  @"http://google.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj]; 
```

现在用户当然可以从这里访问任何网页，如果用户决定关闭我希望他们能够返回的视图。

现在我有了这个代码，通过阅读各种论坛和搜索：

再次 viewDidLoad - 现在看起来像这样：

```
NSURLRequest *currentRequest = [_webView request];
NSURL *currentURL = [currentRequest URL];

if(currentURL != nil) 
{
NSString *urlAddress = currentRequest;
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj];
}
else {
NSString *urlAddress =  @"http://google.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj];
} 
```

在我看来DidUnLoad 我有这个：

```
-(void)viewDidUnload {

NSURLRequest *currentRequest = [_webView request];
NSURL *currentURL = [currentRequest URL];
NSLog(@"Current URL is %@", currentURL.absoluteString);

[NSURLConnection connectionWithRequest:currentRequest delegate:self];

} 
```

a) 我是否在正确的轨道上实现这一目标？

b) 我在这一行创建了一个警告：`NSString *urlAddress = currentRequest; 这是：

> 使用“NSURLRequest *__strong”类型的表达式初始化“NSString *__strong”的不兼容指针类型

任何帮助表示赞赏:-)

谢谢：-）

[PS我从这个问题开始这个问题，但觉得值得一个新的，所以如果你不这么认为，请原谅我。](https://stackoverflow.com/questions/10711027/stop-uiwebview-from-loading-the-set-url-everytime-when-it-gets-loaded)

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:06:01.630

```
NSString *urlAddress = currentRequest;
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj]; 
```

可能只是

```
[_webView loadRequest:currentRequest]; 
```

您可能想尝试在用户关闭视图/视图控制器时不卸载它，然后用户将其带回时不会有时间延迟。（也许您可以将其隐藏而不是卸载它，例如当用户关闭它时，或者将其发送到导航控制器堆栈的后面，假设您有一个作为根视图控制器）。

PS您的警告是因为您试图将 NSURLRequest 对象分配给 NSString 对象。

# iphone - 由于导航到不同视图而导致应用程序崩溃

> ID：10717331
> 
> 赞同：0
> 
> 时间：2012-05-23T09:42:28.803
> 
> 标签：iphone, ios

当我导航到不同的视图超过 10 到 11 次时，我的应用程序崩溃了。我的意思是我在主屏幕上有 6 个按钮，按下它们会带您进入不同的视图。当我反复按下这些按钮时，我的应用程序崩溃了。我已经花了 3 天时间，但没有提出任何解决方案。这是应用程序崩溃的代码

当我取消注释发布声明时，它会在第一次后崩溃。

```
-(IBAction) goToLiveAlerts{
    teamAlerts *showLiveAlerts=[[teamAlerts alloc] initWithNibName:@"teamAlerts" bundle:nil];
    [self.navigationController pushViewController:showLiveAlerts animated:YES];
        //[showLiveAlerts release];
} 
```

当我取消注释时，我的控制台错误是“wait_fences：未能收到回复：10004003 [切换到进程 2093] [切换到进程 2093] 程序收到信号：“EXC_BAD_ACCESS”。-(IBAction)goToPhotos{ picturesGallery *showPictures=[[picturesGallery alloc] initWithNibName:@"picturesGallery" bundle:nil]; [self.navigationController pushViewController:showPictures animated:YES]; //[显示图片发布]; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:48:01.260

您是否使用ARC？如果不是，根据您的代码，您的代码中存在一些内存泄漏，请尝试以下操作：

```
-(IBAction)goToPhotos{
    picturesGallery *showPictures=[[picturesGallery alloc] initWithNibName:@"picturesGallery" bundle:nil];
    [self.navigationController pushViewController:showPictures animated:YES];
    [showPictures release];
} 
```

无论如何，您需要提供更多的代码崩溃日志。

* * *

根据您的崩溃日志，`EXC_BAD_ACCESS`意味着存在一些内存泄漏。`NSZombie`在 Xcode 中启用以进行调试。在 Xcode 4.3 中，转到`Product->Edit Scheme->Diagnostics`并检查`Enable Zombie Objects`.

# php - CakePHP：home.ctp 上的元素中的分页

> ID：10717340
> 
> 赞同：0
> 
> 时间：2012-05-23T09:43:07.100
> 
> 标签：php, pagination, cakephp-2.1

我正在使用 CakePHP 使用 MySQL 后端为 PowerDNS 创建前端 UI。在应用程序的首页上，我想要一些小部件（“快速添加记录”、“快速添加域”等）。我想要的小部件之一是现有域的分页列表。

DomainsController.php 中的索引函数如下所示：

```
public $paginate = array(
  'fields'     => array('id', 'name'),
  'limit'      => 25,
  'order'      => array( 'name' => 'asc' ),
  'conditions' => array( "NOT" => array( "name LIKE" => "%.arpa" ) )
);

public function index() {
  $domains = $this->paginate();
  if ( $this->request->is('requested')) {
    return $domains;
  } else {
    $this->set('domains', $domains);
  }
} 
```

我创建了一个如下所示的元素：

```
<?php $domains = $this->requestAction('Domains/index'); ?>

<ol>
  <?php foreach( $domains as $domain) :?>
    <li>echo $domains['domain']['name']</li>
  <?php endforeach; ?>
</ol>

<?php echo $paginator->numbers(); ?> 
```

当我访问首页时，我收到“未定义变量：分页器”错误。我尝试使用 $this->Paginator->numbers() 代替，但这只是给了我“未定义的属性：View::$Paginator”。将“Paginator”助手添加到 PagesController.php 也无济于事 - $this->Paginator 可用，但我得到“未定义索引：pageCount”。

是否可以从 home.ctp 上的元素进行这种分页，还是我必须做一些自定义 JavaScript 的东西？

**编辑**

现在我到了某个地方：我将 DomainsController 索引函数更改为：

```
public function index() {
 $domains = $this->paginate();
 $paginator = $this->params;
 if ( $this->request->is('requested')) {
  return compact( 'domains', 'paginator' );
 } else {
  $this->set('domains', $domains);
 }
} 
```

并将以下内容添加到 domainList.ctp 元素：

```
<?php 
$result = $this->requestAction('Domains/index');
$domains = $result['domains'];
$this->Paginator->request = $result['paginator'];
?>

<ol>
  <?php foreach( $domains as $domain) :?>
    <li>echo $domains['domain']['name']</li>
  <?php endforeach; ?>
</ol>

<?php echo $paginator->numbers(); ?> 
```

$this->Paginator 现在工作正常，我可以正常访问它的所有方法和属性等等。我现在的问题是，如果我点击“2”，浏览器会导航到 /pages/home/page:2 但域列表仍然显示第 1 页。只需要弄清楚如何传递“page:2”到元素。并且 AJAX-ify 整个事情，这样我就不需要刷新整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:54:19.603

好的，我解决了这个问题，虽然我的解决方案可能不是很优雅。

DomainsController.php 有一个 listDomains() 函数，如下所示：

```
public function listDomains() {
 $domains = $this->paginate(); 
 $paginator = $this->params;
 if ( $this->request->is('ajax') ) {
  $this->set( 'domains', $domains );
 }
 if ( $this->request->is('requested')) {
  return array( 'domains' => $domains, 'paginator' => $paginator, 'paging' => $this->params['paging'] );
 } else {
  $this->set( 'domains', $domains );
 }
} 
```

home.ctp 引用了一个名为 domainList.ctp 的元素。下面的 domainList.ctp 又使用 requestAction() - 我知道，我知道 - 调用上面的 domainList() 函数。Bequest 请求被请求，包含 $domains 和 $paginator 值的数组被发送回元素。

domainList.ctp 包含以下代码：

```
<?php
$result = $this->requestAction('Domains/listDomains', array('updateId' => 'domainList') );
$domains = $result['domains'];
$paginator = $result['paginator'];
$this->Paginator->request = $paginator;

$this->Paginator->options(array(
 'update' => '#domainList',
 'evalScripts' => true,
 'url' => array('controller' => 'Domains', 'action' => 'listDomains', 'updateId' => 'domainList' ),
));

?> 
```

本质上，我在这里所做的是手动重新填充 $this->Paginator->request 与最初发送到 DomainController 的 domainList() 函数的参数。这让我可以正确访问各种分页器功能，例如 numbers()、prev() 和 next()。这有点混乱，但你猜怎么着？它变得有点混乱。

当您单击由这些分页器函数创建的链接时，会执行“if ($this->request->is('ajax'))”段，并且页面上的 div 对象会使用 View/Domains 的内容进行更新/domainList.ctp 而不是 View/Elements/domainList.ctp。View/Domains/domainList.ctp 的内容与相应的元素或多或少相同，两者必须或多或少保持同步。不同的是我们不需要手动填充 $this->Paginator：

```
<?php
$this->Paginator->options(array(
 'update' => '#domainList',
 'evalScripts' => true,
 'url' => array('controller' => 'Domains', 'action' => 'listDomains', 'updateId' => 'domainList' ),
));

?> 
```

就像我说的那样，它既凌乱又不优雅，但它对我有用。我很高兴知道是否有人有不那么笨拙的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:28:19.140

首先，不要这样做：

$domains = $this->requestAction('Domains/index'); 这是昂贵的，不是好的做法，我不确定你为什么需要从你的例子中这样做。

其次，像这样调用你的分页：

$domains = $this->Paginate('Domain');

# android - JSONParser 错误，找不到类。安卓

> ID：10717341
> 
> 赞同：3
> 
> 时间：2012-05-23T09:43:08.723
> 
> 标签：android, json, parsing, twitter, feed

我正在尝试在我的 Android 应用程序中从 Twitter 获取信息。为了做到这一点，我使用了一些示例代码，但现在我无法启动应用程序。这是代码：

```
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;
import org.json.simple.parser.JSONParser;

    import android.app.Activity;
    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.net.Uri;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.ImageView;
    import android.widget.ListView;
    import android.widget.TextView;

    public class Twitter extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.twitter_layout);

            ArrayList<Tweet> tweets = getTweets("android", 1);

            ListView listView = (ListView) findViewById(R.id.ListViewId);
            listView.setAdapter(new UserItemAdapter(this, R.layout.listitem, tweets));
        }

        public class UserItemAdapter extends ArrayAdapter<Tweet> {
            private ArrayList<Tweet> tweets;

            public UserItemAdapter(Context context, int textViewResourceId, ArrayList<Tweet> tweets) {
                super(context, textViewResourceId, tweets);
                this.tweets = tweets;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.listitem, null);
                }

                Tweet tweet = tweets.get(position);
                if (tweet != null) {
                    TextView username = (TextView) v.findViewById(R.id.username);
                    TextView message = (TextView) v.findViewById(R.id.message);
                    ImageView image = (ImageView) v.findViewById(R.id.avatar);

                    if (username != null) {
                        username.setText(tweet.username);
                    }

                    if(message != null) {
                        message.setText(tweet.message);
                    }

                    if(image != null) {
                        image.setImageBitmap(getBitmap(tweet.image_url));
                    }
                }
                return v;
            }
        }

        public Bitmap getBitmap(String bitmapUrl) {
            try {
                URL url = new URL(bitmapUrl);
                return BitmapFactory.decodeStream(url.openConnection() .getInputStream()); 
            }
            catch(Exception ex) {return null;}
        }

        public ArrayList<Tweet> getTweets(String searchTerm, int page) {
            String searchUrl = "http://search.twitter.com/search.json?q=@" 
                                + searchTerm + "&rpp=100&page=" + page;

            ArrayList<Tweet> tweets = new ArrayList<Tweet>();

            HttpClient client = new  DefaultHttpClient();
            HttpGet get = new HttpGet(searchUrl);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            String responseBody = null;
            try{
                responseBody = client.execute(get, responseHandler);
            }catch(Exception ex) {
                ex.printStackTrace();
            }

            JSONObject jsonObject = null;

            /*  */
            JSONParser pars=new JSONParser();

            /*  */

            try {
                Object obj = pars.parse(responseBody);
                jsonObject=(JSONObject)obj;

            }catch(Exception ex){
                Log.v("TEST","Exception: " + ex.getMessage());
            }

            JSONArray arr = null;

            try {
                Object j = jsonObject.get("results");
                arr = (JSONArray)j;
            }catch(Exception ex){
                Log.v("TEST","Exception: " + ex.getMessage());
            }

            for(Object t : arr) {
                Tweet tweet = new Tweet(
                        ((JSONObject)t).get("from_user").toString(),
                        ((JSONObject)t).get("text").toString(),
                        ((JSONObject)t).get("profile_image_url").toString()
                        );
                tweets.add(tweet);
            }

            return tweets;
        }

        public class Tweet {
            public String username;
            public String message;
            public String image_url;

            public Tweet(String username, String message, String url) {
                this.username = username;
                this.message = message;
                this.image_url = url;
            }
        }
    } 
```

这是我的 LogCat：

```
05-23 11:34:16.443: E/AndroidRuntime(25616): FATAL EXCEPTION: main
05-23 11:34:16.443: E/AndroidRuntime(25616): java.lang.NoClassDefFoundError: org.json.simple.parser.JSONParser
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:673)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.widget.TabHost.setCurrentTab(TabHost.java:345)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:138)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.view.View.performClick(View.java:2408)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.view.View$PerformClick.run(View.java:8816)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.os.Handler.handleCallback(Handler.java:587)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.os.Looper.loop(Looper.java:123)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at android.app.ActivityThread.main(ActivityThread.java:4627)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at java.lang.reflect.Method.invokeNative(Native Method)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at java.lang.reflect.Method.invoke(Method.java:521)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
05-23 11:34:16.443: E/AndroidRuntime(25616):    at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:47:21.617

您需要在项目的`Lib`or`Libs`目录中有 json-simple jar。您可能当前已设置它，因此 jar 可用于构建，但不包含在构建的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:52:52.293

你应该进口，

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject; 
```

并使用

```
JSONArray aryJSONStrings = new JSONArray("your json string");
for (int i=0; i<aryJSONStrings.length(); i++) {
       NewsItemId = aryJSONStrings.getJSONObject(i).getString("your_attribute_name");
} 
```

# c# - C# 创建函数队列

> ID：10717344
> 
> 赞同：4
> 
> 时间：2012-05-23T09:43:15.980
> 
> 标签：c#, .net, queue, action, func

我写了一个名为 QueueManager 的类：

```
class QueueManager
{
    Queue functionsQueue;

    public bool IsEmpty 
    { 
        get 
            {
                if (functionsQueue.Count == 0)
                    return true;
                else
                    return false;
            }
    }

    public QueueManager()
    {
        functionsQueue = new Queue();
    }

    public bool Contains(Action action)
    {
        if (functionsQueue.Contains(action))
            return true;
        else 
            return false;
    }

    public Action Pop()
    {
        return functionsQueue.Dequeue() as Action;
    }

    public void Add(Action function)
    {
        functionsQueue.Enqueue(function);
    }

    public void Add(Func<CacheObject,Boolean> function)
    {
        functionsQueue.Enqueue(function);
    } 
```

当我创建这个类的一个实例并调用 Add 方法时，它适用于没有参数的函数，例如： functionQueue.Add(Method); ，但是当调用具有参数和返回值的方法时（在我的情况下，ClassType 作为参数，Boolean 作为返回值），例如 functionQueue.Add(Method2(classObject)); 它无法编译，我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T09:45:56.693

因为与`functionQueue.Add(Method2(classObject))`您一起排队的是您的通话结果，而不是通话本身。

要将带有参数的方法加入队列，您应该更改`Add`原型以接受参数（并将它们与委托一起存储）。作为替代方案，您可以使用 lambda：

```
functionQueue.Add(() => Method2(classObject)); 
```

（那么你的第二个重载`Add`是没用的，你总是可以排队一个`Action`你在闭包内提供所有参数的地方）。

**更新**
这种类型的队列的一个例子是在 WinForms 内部，从主线程以外的其他线程分派方法是通过*方法队列*完成的（查看 的反汇编`Control.MarshaledInvoke`）。跳过同步和上下文，它会保留`System.Collections.Queue`每个条目的位置`ThreadMethodEntry`（用于保存所需数据的结构）。

# java - 从文本文件中读取数据并打印到文本文件 Java

> ID：10717345
> 
> 赞同：-1
> 
> 时间：2012-05-23T09:43:18.697
> 
> 标签：java, text-files

好的，输入文本文件有以下格式：

```
product     sugar  
boughton    13-3-2012 
useby       12-12-2012 
boughtat    $3.56 
quantity    5 

product     sauce pan  
quantity    10 
boughtat    $19.99 
boughton    13-3-2012

product     sugar  
boughton    23-3-2012 
quantity    15
boughtat    $2.99 
useby       1-10-2012 

product     plate  
quantity    10 
boughtat    $-19.99 
boughton    13-3-2012

product     orange juice  
boughton    33-3-2012 
quantity    15
boughtat    $2.99 
useby       1-10-2012 
```

我的代码：DataIn.java

```
class DataIn {

    public static ArrayList<Product> getData(String filename) {
        ArrayList<Product> recordlist = new ArrayList<Product>();
        int index = -1;
        try {
            File inFile = new File(filename);
            Scanner reader = new Scanner(inFile);
            String s;
            Product p = null;

            while (reader.hasNext()) {
                s = reader.nextLine();
                Scanner line = new Scanner(s);
                String cmd;
                if (line.hasNext()) {
                    cmd = line.next();
                    if (cmd.equalsIgnoreCase("product")) {
                        index++;
                        p = new Product();
                        p.setName(line.nextLine());
                        recordlist.add(index, p);
                    } else if (cmd.equalsIgnoreCase("boughton")) {
                        Calendar d;
                        d = ConvertToCal(line.nextLine());
                        p.setBoughtOn(d);
                        recordlist.set(index, p);
                    } else if (cmd.equalsIgnoreCase("useby")) {
                        Calendar d;
                        d = ConvertToCal(line.nextLine());
                        p.setUseBy(d);
                        recordlist.set(index, p);

                    } else if (cmd.equalsIgnoreCase("boughtat")) {
                        if (line.hasNextDouble()) {
                            p.setBoughtAt(line.nextDouble());
                            recordlist.set(index, p);
                        }
                    } else if (cmd.equalsIgnoreCase("quantity")) {
                        if (line.hasNextInt()) {
                            p.setQuantity(line.nextInt());
                            recordlist.set(index, p);
                        }
                    } else {
                        System.out.println("Error: no command");
                    }
                }
            }

            reader.close();

            return recordlist;
        } catch (Exception e) {
            System.out.println("Error" + e.getMessage());
            return null;
        }
    }

    public static Calendar ConvertToCal(String s) {
        try {
            Date d;
            DateFormat f = new SimpleDateFormat("dd-MM-yyyy");
            d = (Date) f.parse(s);

            Calendar cal = Calendar.getInstance();
            cal.setTime(d);
            return cal;
        } catch (ParseException e) {
            System.out.println("Exception: " + e);

        }
        return null;
    }

    // method to print the output in the file
    public static void writeData(ArrayList<Product> productlist, String fileName) {

        if (productlist.size() == 0) {
            System.out.println(" no product");
            return;

        }

        try {
            File fileOut = new File(fileName);
            PrintWriter out = new PrintWriter(fileOut);
            for (Product p : productlist) {
                out.println("product " + p.getName());
                out.println("boughtOn " + (p.getBoughtOn().get(Calendar.DATE)));
                out.println("useBy " + (p.getUseBy()).get(Calendar.DATE));  //ERROR in here
                out.println("boughtAt " + p.getBoughtAt());
                out.println("quantity " + p.getQuantity());
            }

            out.close();
        } catch (FileNotFoundException e) {
            System.out.println("file not found");
        }

    }
} 
```

产品.java

```
//products class 
public class Product {
    private String name;
    private Calendar boughtOn;
    private Calendar useBy;
    private double boughtAt;
    private int quantity;
  // first product class constructor
  public Product (){
    name=null;
    boughtOn=null;
    useBy=null; 
    boughtAt=0;
    quantity=0;
 }
  //second product class constructor
  public Product( String pName, Calendar bOn, Calendar uBy, double bAt, int qt){
    name= pName;
    boughtOn=bOn;
    useBy=uBy;
    boughtAt= bAt;
    quantity=qt;
 }
  //method to get the name of product
   public String getName(){
      return name;
 }
 //method to get the date that product bought on
   public Calendar getBoughtOn() {
    return boughtOn;
}
  //method to get the date that product use by
 public Calendar getUseBy() {
  return useBy;
}
//method to get the purchase price of product
   public double getBoughtAt() {
      return boughtAt;
}
  //method to get the quantity of the product
   public int getQuantity() {
     return quantity;
   }
  //method to change the product name
 public  void setName (String n) {
 name=n;
}

  //method to change the date  that product bought on
 public void setBoughtOn( Calendar bo)   {
      boughtOn=bo;

}
 //method to set the date that product will expired at
    public void setUseBy( Calendar ub) {
    useBy=ub;
}
  //method to set the purchase price of product
  public void setBoughtAt( double ba) {
    boughtAt= ba;
 }
 //method to set the product quantity
   public  void setQuantity( int q) {
    quantity=q;
}
   public String toString (){
       return name +"\t" + boughtOn + "\t" + useBy + "\t" + boughtAt +"\t" + quantity;
   }
   public static void main(String []args){

        ArrayList<Product> list;
        list=DataIn.getData("products_1.txt");
        DataIn.writeData(list,"save1.txt");
}       

} 
```

线程“主”java.lang.NullPointerException 中的错误异常

在这一行中 out.println("useBy " + (p.getUseBy()).get(Calendar.DATE)); 在 DataIn.java 中

我想不通，所以我在这里发了整件事，Mod请用java代码重新格式化代码，我不知道该怎么做

此外，当我通过使用 // 避免该行时，程序可以运行但我在输出文件中仅显示这样（boughtOn 和 buyAt 有问题）

```
product     sugar  
boughtOn 13
boughtAt 0.0
quantity 5
product     sauce pan  
boughtOn 13
boughtAt 0.0
quantity 10
product     sugar  
boughtOn 23
boughtAt 0.0
quantity 15
product     plate  
boughtOn 13
boughtAt 0.0
quantity 10
product     orange juice  
boughtOn 2
boughtAt 0.0
quantity 15 
```

对不起，如果代码太长，但很难解释我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:57:29.627

您的输入列表中的某些产品缺少“useby”字段，因此您的错误是正常的，因为您的某些 Product 对象具有 NULL useby 字段。

# javascript - 单击 iscroll 区域时从文本框中删除焦点

> ID：10717347
> 
> 赞同：3
> 
> 时间：2012-05-23T09:43:26.773
> 
> 标签：javascript, jquery, textbox, onblur, iscroll4

我已经定义了输入文本框获得焦点时的一些事件以及移除焦点时要执行的一些任务。我也在使用 iscroll4 但文本框不在滚动条中。我的问题是当文本框获得焦点并且我单击 iscroll 区域时，来自文本框的焦点不会出现。但是，如果我单击 iscroll 之外的区域，则焦点将从文本框中删除。我不明白为什么单击 iscroll 区域不会删除焦点，而单击事件有效。我已经定义了`blur`事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:24:32.067

我正在使用`iscroll4`并且在`iscroll.js`文件中定义了以下事件：

```
onBeforeScrollStart: function (e) {
    if (e.preventDefault) {
        e.preventDefault(); 
    }
} 
```

我评论了这`e.preventDefault`条线，它对我有用。当我单击 iscroll 区域时，这基本上可以防止`blur`事件触发，因为这是 iscroll 在收到任何鼠标按下事件时触发的第一个事件。

# security - 使用我的 setup.exe 文件下载 Insight 反对安全风险

> ID：10717350
> 
> 赞同：1
> 
> 时间：2012-05-23T09:43:36.713
> 
> 标签：security, installation, symantec

我使用设置工厂提取我的项目设置文件。但 Windows Internet Explorer 和 Symantec Endpoint Protection 的行为就像是一个有害应用程序。我能做些什么来解决这个问题？

![在此处输入图像描述](../Images/d88c40229f08bdb6511b6865f3b19310.png)

![在此处输入图像描述](../Images/e68c0a84813df3ff1601a8cae884469b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:36:12.030

您应该使用[Authenticode](http://msdn.microsoft.com/en-us/library/ms537364%28v=vs.85%29.aspx)代码签名签名对文件进行签名。

如果你不签署你的可执行文件，你将不得不处理看到各种警告的用户。

Comodo 代码签名证书并不太贵。

# c# - DataGrid中数组内的数组未更新

> ID：10717352
> 
> 赞同：0
> 
> 时间：2012-05-23T09:43:44.407
> 
> 标签：c#, .net, wpf, wpfdatagrid

我有一个对象集合，在对象内部会有一些属性和一个动态对象列表。我是我的例子，这用 Name 和 Numbers 属性来说明。

现在我让它看起来正确，但是我在从后面的代码中更改数据时遇到了问题。如果我在 MainWindow() 内的 mList 中更改某些内容，它会正确显示在我的 DataGrid 上，但如果我在 Click 内执行相同操作，即使没有任何反应。

我看过 INotifyPropertyChanged，但这并没有改变什么。

请注意，这是我为这个问题创建的示例项目

我的列表.cs

```
public class MyObject : IEnumerable<object[]>
{
    public string Name { get; set; }
    public int[] Numbers { get; set; }

    public IEnumerator<object[]> GetEnumerator()
    {
        var obj = new object[Numbers.Length + 1];
        obj[0] = Name;
        for (var i = 0; i < Numbers.Length; i++)
            obj[i + 1] = Numbers[i];

        yield return obj;
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

主窗口.xaml.cs

```
private List<MyObject> mList;
    public MainWindow()
    {
        InitializeComponent();

        mList = new List<MyObject>
                    {
                        new MyObject {Name = "List 1", Numbers = new[] {1, 2, 3, 4}},
                        new MyObject {Name = "List 2", Numbers = new[] {1, 2, 3, 4}},
                        new MyObject {Name = "List 3", Numbers = new[] {1, 2, 3, 4}}
                    };

        dataGrid.ItemsSource = mList;
        var columnNames = new[] {"List", "Number 1", "Number 2", "Number 3", "Number 4"};
        AddColumns(dataGrid, columnNames);

        mList[0].Name = "Test";   //Works
        mList[0].Numbers[0] = 123;  //Works

    }
    private void AddColumns(DataGrid gv, string[] columnNames)
    {
        for (int i = 0; i < columnNames.Length; i++)
            gv.Columns.Add(new DataGridTextColumn()
                               {
                                   Header = columnNames[i],
                                   Binding = new Binding(String.Format("[{0}]", i))
                               });

    }

    private void ButtonClick(object sender, RoutedEventArgs e)
    {
        mList[0].Name = "Test test";   //Don't work
        mList[0].Numbers[0] = 234;  //Don't work
    }
} 
```

主窗口.xaml

```
<StackPanel>
    <Button Click="ButtonClick">Test</Button>
    <DataGrid Height="Auto" Name="dataGrid" AutoGenerateColumns="False"/>
</StackPanel> 
```

**编辑** 这是一个已修改的 MyObject，我仍然无法从代码中更改名称

```
 public class MyObject : IEnumerable<object[]>, INotifyPropertyChanged
{
    private string _name;
    public string Name
    {
        get { return _name; }
        set { _name = value;
            OnPropertyChanged("Name");
        }
    }

    public int[] Numbers { get; set; }

    public IEnumerator<object[]> GetEnumerator()
    {
        var obj = new object[Numbers.Length + 1];
        obj[0] = Name;
        for (var i = 0; i < Numbers.Length; i++)
            obj[i + 1] = Numbers[i];

        yield return obj;
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:59:32.133

The problem is that with the following code

```
Binding = new Binding(String.Format("[{0}]", i)) 
```

you bind each column to a Path like [i].

For example in the case of column 0 (binding to property Name) you need

```
new Binding("Name") 
```

With this code you should see your datagrid update after executing

```
mList[0].Name = "Test test"; 
```

The same concept is valid for the other columns

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:01:38.147

your //Works just works because its in the ctor :) you need to implement INotifyPropertyChanged in your MyObject class and raise it when the Property changed.

for your Numbers Property you should take int wrapper wich implements INotifyPropertyChanged too.

# jdbc - 为什么 PreparedStatement 优于 Statement

> ID：10717355
> 
> 赞同：1
> 
> 时间：2012-05-23T09:44:04.003
> 
> 标签：jdbc, prepared-statement

虽然，PreparedStatement 可以做所有事情，即 DDL，DML 相关查询，性能比 Statement.Than 更好。为什么 Java API 中仍然存在 Statement 接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:57:47.710

因为有些查询没有任何参数，并且准备语句然后执行它实际上可能比直接执行语句效率低。在这种情况下，使用（并可能重用）单个语句也更具可读性和直接性。

这是[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#createStatement%28%29)所说的，顺便说一句：

> 不带参数的 SQL 语句通常使用 Statement 对象执行。如果多次执行相同的 SQL 语句，使用 PreparedStatement 对象可能更有效。

# android - 矩形画布中的效果阴影

> ID：10717357
> 
> 赞同：14
> 
> 时间：2012-05-23T09:44:15.353
> 
> 标签：android, canvas, shadow

我用画布绘制了一个矩形，我想知道是否有任何属性或方法可以提供一个小阴影。

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint pincel1 = new Paint();
    pincel1.setColor(Color.rgb(151, 217, 69));
    RectF rectangle = new RectF(30, 20,200,100);
    canvas.drawRoundRect (rectangle, 6, 6, pincel1);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-23T09:46:33.463

[这个](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)问题包含以下代码：

```
 Paint mShadow = new Paint();  
// radius=10, y-offset=2, color=black  
mShadow.setShadowLayer(10.0f, 0.0f, 2.0f, 0xFF000000);  
// in onDraw(Canvas)  
canvas.drawBitmap(bitmap, 0.0f, 0.0f, mShadow); 
```

因此，根据您的需要对其进行一些定制，这样就可以解决问题。

在您的情况下，只需添加`pincel1.setShadowLayer(10.0f, 0.0f, 2.0f, 0xFF000000);`到您的代码中。

# android - 未捕获的 ReferenceError：未定义 AFMA_getSdkConstants

> ID：10717358
> 
> 赞同：5
> 
> 时间：2012-05-23T09:44:16.817
> 
> 标签：android, admob

我正在尝试将 AdMob 广告添加到我的 android 应用程序，但每当我打开应该显示广告的活动时，我都会收到此错误：

```
I/Ads(11448): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"kw":[],"preqs":4,"session_id":"17111845472336325405","u_sd":2,"seq_num":"5","slotname":"MYUSERIDHERE","u_w":360,"msid":"com.lazyprogrammer.dartscore","adtest":"on","js":"afma-sdk-a-v6.0.1","mv":"8011019.com.android.vending","isu":"70069487A7A68D24BEF2581104A73318","cipa":0,"format":"360x50_mb","net":"wi","smart_h":"auto","app_name":"1.android.com.lazyprogrammer.dartscore","hl":"en","smart_w":"full","u_h":613,"carrier":"26203","ptime":225498,"u_audio":1});</script></head><body></body></html>
E/Ads(11448): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
E/Web Console(11448): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1
I/Ads(11448): AdLoader timed out after 60000ms while getting the URL.
D/webviewglue(11448): nativeDestroy view: 0x2bc958
I/Ads(11448): onFailedToReceiveAd(A network error occurred.)
I/Ads(11448): AdLoader timed out after 60000ms while getting the URL.
D/webviewglue(11448): nativeDestroy view: 0x5a1850
I/Ads(11448): onFailedToReceiveAd(A network error occurred.) 
```

我在谷歌或其他地方找不到关于这个问题的任何东西，我不认为我做错了什么。

以防万一，这是我应该显示广告的 xml 片段：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    ...

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="MyIDhere"
        ads:loadAdOnCreate="true"
        ads:testDevices="70069487A7A68D24BEF2581104A73318" />

</RelativeLayout> 
```

当然，我为这个问题取出了所有 - 我认为 - 不必要的代码，但如果有必要查看它，我也会在这里发布。

我还拿出了我的 AdMob UnitID，您可能已经猜到了，但我在这里写这篇文章是为了避免缺少 UnitId 的答案。

我的清单列出了正确的权限：
android.permission.ACCESS_NETWORK_STATE
android.permission.INTERNET

而且我还添加了正确的 configChanges 的 AdActivity

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T20:50:14.187

是连接问题。我通过卸载我的广告拦截器来修复它...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-15T10:59:16.900

我也有这个错误，并通过在单独的线程中加载广告来解决（在 ICS 中，您不允许在主线程中执行网络操作）

```
(new Thread() {
                public void run() {
                     Looper.prepare();
                    adView.loadAd(new AdRequest());
                }
            }).start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T15:14:06.137

只需检查您所有的互联网连接。我的笔记本电脑有互联网，而手机没有。我确实尝试连接到笔记本电脑上的网络服务器，它工作正常。所以在尝试使用手机后，我重新启动了我的 DSL 路由器。一切都很好，然后恢复正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T08:36:16.380

在网络之间移动并让模拟器运行时，我遇到了这个问题。

我发现连接到新网络后只需重新启动模拟器即可解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-09T12:45:42.390

检查 /etc/hosts 文件。许多自定义 rom 都有 adblock 条目...

# windows - 在一个qt项目中，如何在windows下添加路径包含空格的pro的include路径

> ID：10717359
> 
> 赞同：6
> 
> 时间：2012-05-23T09:44:16.850
> 
> 标签：windows, qt

我想将此 C:\Program Files\MySQL\MySQL Server 5.5\include 添加到我的 .pro 文件中。我怎样才能做到这一点？谢谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T09:48:36.710

写在双引号之间..

```
win32 {

    INCLUDEPATH += "C:\Program Files\MySQL\MySQL Server 5.5\include"
    ...
} 
```

# facebook - Facebook 通知 RSS 提要

> ID：10717362
> 
> 赞同：4
> 
> 时间：2012-05-23T09:44:25.120
> 
> 标签：facebook, rss, notifications

再会

当我想查看通知的 RSS 提要时，Facebook 给了我这个 URL [http://www.facebook.com/feeds/notifications.php?id=100001444273394&viewer=100001444273394&key=AWiVVNlBfK8I9PcN&format=rss20](http://www.facebook.com/feeds/notifications.php?id=100001444273394&viewer=100001444273394&key=AWiVVNlBfK8I9PcN&format=rss20)

密钥是如何生成的？（为了安全起见，我更改了值）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T22:29:24.660

当您更改 Facebook 帐户密码时，“Key”参数也会更改。

# python - 在 R 中调整热图的颜色和比例

> ID：10717363
> 
> 赞同：1
> 
> 时间：2012-05-23T09:44:25.547
> 
> 标签：python, r, heatmap, levelplot

我正在使用 R 和`levelplot()`lattice 中的函数制作热图。

我正在使用的命令是：

```
data<-read.table("data_corr", header=T) 
library(gplots)
library(lattice)
z<-cor(data)
levelplot(z) 
```

我得到这样的数字

![一](../Images/58baab5480d03eeb4cb45f27c771b8d6.png)

三件事：

(a) 行标签被弄脏，如何解决这个问题以获得更清晰的行标签？

(b) 如何使用红色、绿色和蓝色来代替默认颜色（粉色、白色和蓝色）？

(c) 是否可以将比例从 0.90 调整到 1 而不是 0.84？

python中的解决方案也很受欢迎，在这种情况下，我有一个90 * 90（行*列）的相关文件，比如文件名是z.txt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:09:13.540

在 python's`matplotlib`中，您的问题的答案是：

`imshow`(a) 带有选项的绘图`interpolation="nearest"`

(b) 例如，可以在`imshow`选项`cmap=cm.jet`中选择颜色图。[更多例子在这里](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)。

(c) 为了缩放，我假设您只想显示阈值中的值并相应地使用颜色条图。使用`imshow`选项`vmax`和`vmin`。

这是一个最小的工作示例：

```
import numpy as np
import pylab as plt

# Create random matrix, save it to a text file
N = 90
A = np.random.random((N,N))
np.fill_diagonal(A,.95)
np.savetxt("z.txt",A)

# Load the data
A = np.loadtxt("z.txt")

# Apply a mask so values below .9 don't show
A[A<.9] = None

# Scale the values from .9 to 1.0 using vmin,vmax
plt.imshow(A, interpolation='nearest', vmin=.9,vmax=1.0,cmap=plt.cm.jet)
plt.colorbar()
plt.show() 
```

![在此处输入图像描述](../Images/c0429f24ca8c20ae36b699120323ea0f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:17:55.013

从帮助页面`levelplot`：

如果区域为 TRUE，则使用col.regions颜色向量。一般的想法是，这应该是一个长度适中的颜色向量（比区域数长。默认情况下为 100）。预计该向量的颜色会逐渐变化（因此附近的颜色会相似）。当实际选择颜色时，它们被选择为沿该向量等距分布。当 中的区域多于颜色时`col.regions`，颜色将被回收。实际的颜色分配由 执行`level.colors`，这是单独记录的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:25:29.840

除了卡尔的回答：

*   `col.regions`您可以通过例如设置默认值

    ```
    `trellis.par.set (regions = list (col = rainbow)) 
    ```

*   色标范围：见`levelplot`参数`at`。

*   行名和列名：见`? xyplot`, 参数`scales`。

# jquery - 使用 .parent() 进行 ul li 菜单悬停

> ID：10717365
> 
> 赞同：0
> 
> 时间：2012-05-23T09:44:28.273
> 
> 标签：jquery, css

我正在使用`ul li`菜单，当用户超过他们时，我正在尝试为所有`li`父母着色。

html

```
<ul id="jMenu">

            <li class="arrow"></li>
            <li><a >Category 7.2</a></li>
            <li><a>Category 7.2</a></li>
            <li><a>Category 7.2</a></li>
            <li><a>Category 7.2</a></li>
        </ul> 
```

CSS：

```
#jMenu li a {
    padding:10px 25px 10px 20px;
    display:block;
    background-color: transparent;
    color:#6d6e72;
    text-transform:uppercase;
    cursor:pointer;
    font-size:12px;
    direction:rtl;
    color:#8A8B8E;
}

    #jMenu li a:hover {
     background-image:url('../images/header/top_menu_over2.jpg');
     color:White;
      background-repeat:repeat-x;

} 
```

我制作了这个简单的 jQuery 脚本：

```
$("#jMenu").find("li").hover(function(){
    $(this).parents("li").css("background-image","url('images/header/top_menu_over2.jpg');");
}, function(){ 
    $("#jMenu").find("li").parents("li").css("background-color","#f2f2f2")
    $("#jMenu").children("li").css("background-color","transparent")
    $("#jMenu").find("li").parents("li").css("background-image","none");
}); 
```

它适用于 IE，但不适用于 Firefox 或 Chrome。有人知道为什么吗？

谢谢。

# python - 谷歌应用引擎后端

> ID：10717369
> 
> 赞同：1
> 
> 时间：2012-05-23T09:44:37.117
> 
> 标签：python, google-app-engine, backend

我有一个页面使用数据存储中的一些数据，如果数据过时，它应该触发更新。更新大约需要几分钟，所以我决定在后端进行。但是，当我使用 时`urlfetch.fetch(backends.get_url('backend-name'))`，页面会显示，并且在我从这行脚本中`500 Internal Server Error`看到的日志中。还有一件事：即使不使用`DeadlineExceededError`，部署的后端似乎也在运行和浪费。`Backend Hours`

关于这个主题的谷歌文档没有完整的例子，我看不出有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:53:56.343

后端是您的处理程序可以运行的上下文，您可以使用[taskqueue.add()](https://developers.google.com/appengine/docs/python/taskqueue/functions#add)将目标参数设置为您的后端名称，在后端执行处理程序。
这将在后端执行处理程序，使其能够存活超过十分钟并拥有更多内存。

# javascript - jqPlot 饼图渲染但抛出错误并且行为怪异？

> ID：10717370
> 
> 赞同：1
> 
> 时间：2012-05-23T09:44:37.753
> 
> 标签：javascript, jquery, charts, jqplot

我使用 jqPlot 制作了一个饼图，饼图确实渲染了，我的代码在下面提到

```
var plot4 = $.jqplot('pie', [[["none",10],["error",20],["click",30],["impression",40]]], {
        seriesDefaults:{
            renderer:$.jqplot.PieRenderer,
            rendererOptions:{ sliceMargin: 0 }
        },
        legend:{ show: true }     
    }); 
```

我面临的问题是，当我将鼠标悬停在饼图上时，我收到一条错误消息

```
B.axes[D[0]]._ticks[0] is undefined 
```

在萤火虫控制台上。当我单击饼图的任何一个切片时，我会看到一个更奇怪的情况，即我单击的整个切片消失了。

在单击之前，饼图如下所示：-

![原始饼图](../Images/9bf2c178906d233dc136d6753ada308c.png)

在我点击棕色区域后，馅饼变成了如下所示的东西，甚至棕色切片也消失了。

![没有棕色切片的饼图](../Images/a523b8d7708064691f62d8740577ea21.png)

请提供上述解决方案。我尝试了不同的配置，但工作正常。还让我告诉你我正在使用其他插件，例如此页面上的条形图和光标。

我在下面提到了我正在执行此操作的页面的整个源代码：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>jqPlot Demo</title>
<!--[if IE]><script src="./js/excanvas.min.js"></script><![endif]-->
<script type="text/javascript" src="./js/jquery.min.js"></script>
<script type="text/javascript" src="./js/jquery.jqplot.js"></script>
<script type="text/javascript" src="./js/jqplot.cursor.min.js"></script>
<script type="text/javascript" src="./js/jqplot.dragable.min.js"></script>
<script type="text/javascript" src="./js/jqplot.trendline.min.js"></script>
<script type="text/javascript" src="./js/jqplot.barRenderer.min.js"></script>
<script type="text/javascript" src="./js/jqplot.pieRenderer.min.js"></script>
<script type="text/javascript" src="./js/jqplot.canvasAxisLabelRenderer.min.js"></script>
<script type="text/javascript" src="./js/jquery-ui.min.js"></script>
<link rel="stylesheet" href="./css/jquery.jqplot.min.css"/>
<link rel="stylesheet" href="./css/jqPlot.css"/>
<script>
$(document).ready(function(){
    $.jqplot.config.enablePlugins = true;
    var lineGraph=$.jqplot('chart',  [[[10, 2],[30,5.12],[50,13.1],[70,33.6],[90,85.9],[11,20.9]]],
            {
            title:'Exponential Line',
            axes:{yaxis:{min:0,max:100},xaxis:{min:0,max:100}},
            legend:{
                show:true,
                location:'se',
                xoffset:12,
                yoffset:0
                },
            grid:{
                    gridLineColor:'#F2F2F2',
                    background:'#FFFFFF',
                    borderWidth:1,
                    borderColor:'#BBBBBB',
                    shadow:true,
                    shadowAmgle:45,
                    shadowWidth:2,
                    shadowOffset:2,
                    shadowDepth:2
                    },
           cursor:{
                     style: 'pointer',
                     show:false,
                     showTooltip: true,
                     followMouse:true,
                     tooltipOffset:10,
                     tooltipLocation:'se'
                  },
           highlighter: {
                        lineWidthAdjust: 2.5,
                        sizeAdjust: 5,          
                        showTooltip: true,     
                        tooltipLocation: 'nw', 
                        fadeTooltip: true,     
                        tooltipFadeSpeed: "fast",
                        tooltipOffset: 2,       
                        tooltipAxes: 'both',   
                        tooltipSeparator: ', ',
                        useAxesFormatters: true,
                        tooltipFormatString: '%.5P'
                    },
           seriesDefaults:{
                       trendline:{
                                show:true,
                                color:'#A2D379',
                                lable:'trendX',
                                lineWidth:2,
                                shadow:true
                                    },
                       color:'#058DC7',
                       lineWidth:5,
                       fill:true,
                       fillAndStroke:true,
                       fillColor:'#E6F4F9'
                       }

            });
    var plot4 = $.jqplot('pie', [[["none",10],["error",20],["click",30],["impression",40]]], {
        seriesDefaults:{
            renderer:$.jqplot.PieRenderer,
            rendererOptions:{ sliceMargin: 0 }
        },
        legend:{ show: true },
        cursor: {   
            show: false   
        }
    });
});
$('document').ready(function(){
        $('.column').sortable({
            connectWith:'.column',
            handle:'h2',
            cursor:'move',
            placeholder:'placeholder',
            forcePlaceholderSize:true,
            opacity:0.4,
            revert:true

        }).disableSelection();
}

    );
</script>
</head>
<body>
 <div class="column" id="column1">
        <div class="dragbox" id="item1" >
            <h2>Handle 1</h2>
            <div class="dragbox-content" >
                <div id="chart" style="width:100%;height:100%;float:left"></div>
            </div>
        </div>
 </div>
 <div class="column" id="column1">
        <div class="dragbox" id="item1" >
            <h2>Handle 1</h2>
            <div class="dragbox-content" >
                <div id="pie" style="width:100%;height:100%;float:left"></div>
            </div>
        </div>
 </div>
 <div class="column" id="column1">
        <div class="dragbox" id="item1" >
            <h2>Handle 1</h2>
            <div class="dragbox-content" >
                <div id="chart1" style="width:400px;height:300px;float:left"></div>
            </div>
        </div>
 </div>

<div id="barRender" style="width:400px;height:300px;float:left"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:58:23.117

好的，我得到了问题的答案。我们只需要删除一行代码，然后一切正常

```
 $.jqplot.config.enablePlugins = true; 
```

当我删除上述内容时，我会在需要时和在任何需要的地方调用单个插件。当此语句存在时，所有插件都已启用，这就是奇怪输出的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:01:40.303

对于您的部分问题，您缺少荧光笔插件。如果添加它，它可以很好地拖动[折线图上的点](http://jsfiddle.net/Boro/ZkWcz/9/)。它不会抛出异常，但由于某种原因，拖动看起来很难看。我检查了一下，如果你禁用它看起来并不难看`fill`，`seriesDefaults`显然它们有一些冲突。

正如我所观察到的，饼图没有链接可拖动脚本，因为它在禁用时表现良好。

**编辑：**

我想出了如何为 @Shiv Kumar Ganesh 用来解决问题的特定插件启用可拖动。 [在这里展示。](http://jsfiddle.net/Boro/ZkWcz/12/)重要的是：设置`isDragable: true`为`series`和`show: true`。`highlighter`

# c# - 将 Visual Studio 中的链接文件复制到某个位置

> ID：10717376
> 
> 赞同：2
> 
> 时间：2012-05-23T09:45:19.317
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio

我在我的 Visual Studio 解决方案中设置了一个项目，其中包含许多链接文件。这些是内容文件。

当我构建项目时，我想将链接的文件复制到另一个位置。这可能吗？我该如何实现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-10T00:10:10.297

对于像我这样在这个页面上绊倒的人，在 5arx 的帖子之后，我实现了一个 MSBuild 目标，它将所有链接的内容文件复制到它们的“虚拟”位置（您在 Visual Studio 中放置链接的目录）： [http://mattperdeck .com/post/Copying-linked-content-files-at-each-build-using-MSBuild.aspx](http://mattperdeck.com/post/Copying-linked-content-files-at-each-build-using-MSBuild.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:10:09.497

如果您右键单击项目，然后选择“构建事件”选项卡，您应该能够创建一个构建后事件脚本，该脚本将获取您指定的任何文件并将其复制到您指定的位置。

开始的好地方就在[这里](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:58:10.240

您可以使用[MSBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd)做到这一点。特别是其[复制文件](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)任务：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T07:49:38.957

似乎只需添加

```
<CopyToOutputDirectory>Always</CopyToOutputDirectory> 
```

到 Visual Studio 2017 csproj 项目文件中的链接文件项将导致链接文件被复制到构建时的输出目录，无论您已将构建操作声明为无或内容。

例如，这两个工作......

```
<None Include="..\configuration\Shared.OctopusDeploy.config">
  <Link>Shared.OctopusDeploy.config</Link>
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
</None>

<Content Include="..\configuration\Shared.OctopusDeploy.config">
  <Link>Shared.OctopusDeploy.config</Link>
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
</Content> 
```

# arrays - perl 文件操作

> ID：10717378
> 
> 赞同：1
> 
> 时间：2012-05-23T09:45:21.470
> 
> 标签：arrays, algorithm, perl, file, multidimensional-array

我有一个文件**File1**包含这些数据：

```
NC_009066   5239    5308    trnA(tgc)   2.10899859667e-09   -
NC_009066   5309    5382    trnN(gtt)   7.03000463545e-10   -
NC_009066   5422    5487    trnC(gca)   7.09999799728e-08   -
NC_009066   5487    5557    trnY(gta)   3.72200156562e-11   -
NC_009066   5549    7097    cox1    291081744.81    +
NC_009066   7109    7180    trnS2(tga)  1.83000043035e-09   -
NC_009066   7183    7256    trnD(gtc)   2.5720000267e-09    + 
```

和另一个fasta文件**File2**

```
> NC_009066,1,0-17045,
GCTATCGTAGCTTAATTAAAGCATAACACTGAAGATGTTAAGATGAACCCTAGAAA 
```

我已将 file1 逐行放入一个数组中，然后我可以通过在`/\s+/`.

```
for $line(@array){
    @column= split(/\s+/,$line);
    # print $column[5]."\n";

$gene=substr($seq,$column[1],$column[2]);#$seq extracted from File2....} 
```

但我想做的是从第一行取第二列，从第二行取第三列`(substr($seq,5239,5382))`，然后从第二行取第二列，从第三行取第三列`(substr($seq,5309,5487))`.....最好的方法是什么？ ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:25:37.840

首先，注意 的默认效果`split`是分割`$_`空白，丢弃前导和尾随的空字段。大多数情况下，这是您想要的，而且`split /\s+/`是不必要的。如果要对变量调用默认拆分，则`$_`必须传递单个文字空间，*而不是*正则表达式，作为模式参数，例如`split ' ', $line`.

我建议您首先使用`map`创建一个仅包含第二列和第三列中的数据的数组。

然后你可以遍历数据，提取起始值和结束值并将基因从序列中拉出。

代码看起来像这样

```
use strict;
use warnings;

open my $fh, '<', 'f1.txt' or die $!;

my @data = map [ (split)[1,2] ], <$fh>;

my $seq = 'GCTATCGTAGCTTAATTAAAGCATAACACTGAAGATGTTAAGATGAACCCTAGAAA';

for my $i (1 .. $#data) {
  my ($start, $end) = ( $data[$i-1][0], $data[$i][1] );
  my $gene = substr($seq, $start, $end - $start);
  print "$gene\n";
} 
```

请注意，循环是通过索引`1`（数组的*第二个*元素）到`$#data`（最后一个元素）。这是因为循环体将*前一个*元素的第一列和当前元素的第二列作为一对，并且第一列之前没有元素。

另请注意，您可能必须将参数调整为，`substr`因为我不知道您的索引是从零开始还是从一开始，或者它们是否包含该索引处的字符。

例如，当您实际表示or或时`$start = 1; $end = 2`，`substr('ATC', $start, $end - $start);`会返回。`T``A``AT``TC`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:39:55.273

您已经自己弄清楚了一切，只是您使用`substr`不正确。里面的梗概[`perldoc -f substr`](http://p3rl.org/substr)说：

> substr 表达式，偏移量，长度

但你给它两个偏移量。相反，从另一个偏移量中减去一个偏移量以计算正确的长度参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:52:01.083

使用二维数组：

```
for (my $i = 0; $i < scalar(@array); ++$i) {
    $$table[$i] = [ split(/\s+/,$array[$i]) ];
}

# you may put this into a loop
$start = $$table[0][1];
$end = $$table[1][2] - $$table[0][1];
$gene = substr($seq, $start, $end); 
```

另见[perllol](http://perldoc.perl.org/perllol.html)。

# image - Flickr 对显示照片的限制

> ID：10717379
> 
> 赞同：0
> 
> 时间：2012-05-23T09:45:25.680
> 
> 标签：image, limit, flickr

Flickr 照片的最大数量是否有限制，我可以放在单个 URL 上？像这样的东西：

```
<a href="http://farm8.staticflickr.com/7065/6862159450_c16aa57f6a_b.jpg">
    <img src="http://farm8.staticflickr.com/7065/6862159450_c16aa57f6a_s.jpg">
</a>
<a href="http://farm8.staticflickr.com/7127/7008274819_c0159a6b2b_b.jpg">
    <img src="http://farm8.staticflickr.com/7127/7008274819_c0159a6b2b_s.jpg">
</a>
<a href="http://farm8.staticflickr.com/7243/7008274599_b414b0e4ff_b.jpg">
    <img src="http://farm8.staticflickr.com/7243/7008274599_b414b0e4ff_s.jpg">
</a>
....
<!-- and 100 other photos... --> 
```

我已经从我们的数据库中知道照片 ID（因此不会有特殊的 API 请求），我只需要确保我可以`<img>`在单个页面上添加这么多标签。

两三年前我建了一个网站，我大概记得有**一些**限制。我现在尝试检查此限制，但我无法在他们的网站上找到此信息。

# c# - 加载后我的应用程序没有完全隐藏在托盘中

> ID：10717382
> 
> 赞同：0
> 
> 时间：2012-05-23T09:45:33.873
> 
> 标签：c#, winforms, trayicon

我有这样的代码：

```
public form()
{
    InitializeComponent();
    init(); //read ini and try to minimize
}

private void timer1_Tick(object sender, EventArgs e)
{
} 
```

在 ini 方法中，我最小化表单并隐藏它（在调试中我可以看到 form.visible = false），但是当它离开 init 方法时，它会跳转到计时器并更改可见 = true，我可以在任务栏和托盘中看到我的应用程序。我只想看到托盘图标。我用[它](https://stackoverflow.com/questions/7625421/minimize-app-to-system-tray)来最小化表格到托盘。

到目前为止，我做了这个，但可能是以错误的方式实现的，因为当显示表单时，表单会像刷新一样，看起来很奇怪。

```
private void notifyIcon1_Click(object sender, EventArgs e)
    {
        this.Show();
        this.WindowState = FormWindowState.Normal;
    }

    private void minimizeWindow()//this method is called on form resize
    {
        if (FormWindowState.Minimized == this.WindowState)
        {
            notifyIcon1.Visible = true;
            this.Hide();
            this.ShowInTaskbar = false;
        }
        else if (FormWindowState.Normal == this.WindowState)
        {
            notifyIcon1.Visible = false;
            this.ShowInTaskbar = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:01:01.463

要从任务栏中隐藏窗口，您可以使用`ShowInTaskbar`属性。在你的`init`方法中试试这个东西：

```
form.ShowInTaskbar = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:59:36.520

如果您的程序设置为最小化到系统托盘，您可以在加载时添加最小化事件！

或者您可以在加载时添加`Me.Opacity = 0`（`Me.Opacity = 1`再次单击系统托盘图标时），然后隐藏任务栏按钮！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:40:39.503

解决方案很简单：

```
 private void notifyIcon1_Click(object sender, EventArgs e)
    {
        this.Show();
        this.WindowState = FormWindowState.Normal;
    }

    private void minimizeWindow()
    {
        if (FormWindowState.Minimized == this.WindowState)
        {
            notifyIcon1.Visible = true;
            this.Hide();
        }
        else if (FormWindowState.Normal == this.WindowState)
        {
            notifyIcon1.Visible = false;
        }
    } 
```

和

```
 private void AAL_Load(object sender, EventArgs e)
    {
        minimizeWindow();//call it again
    } 
```

不要使用 form.ShowInTaskbar = false; 因为这会带来很多问题。

# c# - 如何忽略帮助文件生成器为公共类或方法生成的文档？

> ID：10717383
> 
> 赞同：7
> 
> 时间：2012-05-23T09:45:37.397
> 
> 标签：c#, sandcastle

如何在 SandCastle Help File Builder 生成的文档中省略某些公共类或方法？

示例：我有以下带有两个公共方法的公共类：

```
/// <summary>
/// A simple test class.
/// </summary>
public class MyClass
{
    /// <summary>
    /// Method1s this instance.
    /// </summary>
    public void Method1()
    {
        // Do some operations here.
    }

    /// <summary>
    /// Method2s this instance.
    /// </summary>
    public void Method2()
    {
        // Do some operations here.
    }
} 
```

当我使用 SandCastle Help File Builder 从此代码生成帮助文件时，我想忽略`Method2`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-12T17:13:00.987

（这是一个更新，因为自从 Thomas Levesque 发表评论后，用户界面似乎发生了变化。这也与我在网上其他地方找到的一些信息不同。）

在最新版本的 SandCastle 中，截至 2014 年 5 月 31 日，您必须经过 3 个步骤才能到达那里。

1.  在独立 UI 中，选择**项目属性**选项卡。
2.  左侧应该有一个类别列表。选择**可见性**
3.  单击**编辑 API 过滤器**按钮；这是在右侧的底部。

从那里，您将找到 API 条目列表。您可以单独取消选择类、命名空间和类中的项目（属性、字段、方法）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T09:51:05.933

在 Sandcastle Help File Builder GUI 的项目属性中，编辑`ApiFilter`属性（单击“...”按钮）并取消选中您不想在帮助文件中看到的成员。

# c++ - C/C++ sizeof 运算符：为什么 sizeof('a') 返回不同的值？

> ID：10717385
> 
> 赞同：5
> 
> 时间：2012-05-23T03:46:12.037
> 
> 标签：c++, c, memory

> **可能重复：**
> [C/C++ 中字符（'a'）的大小](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

我是C的初学者，对此感到困惑。

`C:`我尝试使用“%zu”修饰符在 C 中打印 sizeof('a')，它打印出一个值 4。

`C++:`在 C++ 中使用 cout 打印 sizeof('a')，而 printf（使用上面的格式）都打印了一个值 1。

我相信正确的值应该是 1，因为 'a' 将被视为一个字符。为什么它在 C 中不返回 4？两种语言的大小操作是否不同？如果是这样，有什么区别，为什么它返回不同的值？在这两种情况下我都使用了 gcc 编译器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T04:23:34.583

在 C 中，`'a'`是一个字符常量，它被视为一个整数，所以你得到一个 4 的大小，而在 C++ 中它被视为一个`char`. 这是此处问题的副本：

[C/C++ 中字符 ('a') 的大小](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T04:51:03.157

在 C 中，字符文字（常量）具有 int 类型。所以，考虑下面的程序

```
#include <stdio.h>

main(int argc, char *argv[])
{
  printf("%zu\n", sizeof('a'));
  printf("%zu\n", sizeof('ab'));
  printf("%zu\n", sizeof('abc'));
  printf("%zu\n", sizeof('abcd'));

  printf("%u\n", 'a');
  printf("%u\n", 'ab');
  printf("%u\n", 'abc');
  printf("%u\n", 'abcd');

  printf("%x\n", 'a');
  printf("%x\n", 'ab');
  printf("%x\n", 'abc');
  printf("%x\n", 'abcd');

  printf("%c\n", 'a');
  printf("%c\n", 'ab');
  printf("%c\n", 'abc');
  printf("%c\n", 'abcd');
} 
```

前四个语句都将文字视为**一个**字符常量，并且它们都打印 4 == sizef(int)，至少在 gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3 上。请注意，此编译器会为上述程序打印几个警告：

```
warning: multi-character character constant 
```

基本上，字符文字指定组成 int 的四个字节，从左到右，高位字节在前。缺少的前导字节用 0 填充。所以，在我的机器上，第二组和第三组 printf 语句打印

```
97
24930
6382179
1633837924
61
6162
616263
61626364 
```

在十六进制输出中，您可以看到文字中四个字符的布局（ASCII 码从左到右）：“a”映射到最高字节 0x61）。

最后，第四组打印：

```
a
b
c
d 
```

即字符文字作为整数被压入堆栈，但 printf 仅将该 int 的最低字节打印为 char。

C++ 的行为方式类似，但单字节字符文字被认为是 char 类型，而不是 int。该程序

```
#include <iostream>

using namespace std;

main(int argc, char *argv[])
{
  cout << sizeof('a') << endl;
  cout << sizeof('ab') << endl;
  cout << sizeof('abc') << endl;
  cout << sizeof('abcd') << endl;

  cout << 'a' << endl;
  cout << 'ab' << endl;
  cout << 'abc' << endl;
  cout << 'abcd' << endl;
} 
```

将使用 GCC 编译并给出类似的警告。它的输出与 C 不同：

```
1
4
4
4
a
24930
6382179
1633837924 
```

因此，单字节字符文字被视为 char，而多字节文字被视为 int。

**重要的提示**

我在一个 int 有 4 个字节的 32 位 Linux 系统上运行我的测试。看看在其他系统上发生了什么会很有趣，例如在 64 位系统上。

**编辑**

固定答案（感谢提示）：字符文字在 C 中具有 int 类型，它们不会强制转换为 int。

# windows - 编辑 MSI 文件以添加新驱动程序

> ID：10717394
> 
> 赞同：0
> 
> 时间：2012-05-23T09:46:23.547
> 
> 标签：windows, windows-7, windows-installer, windows-7-x64

我有一个带有驱动程序的 VPN 检查点文件，导致笔记本电脑上出现大量 BSOD，我有可以替换旧版本的新驱动程序。有谁知道我如何更换驱动程序，但还要确保 Windows 验证这一点。我有 msi 包和 .sys 格式的新驱动程序。

我尝试使用 Windows Msidb.exe，但它不会提取驱动程序或让我添加驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:03:01.117

您可以使用Microsoft的[ORCA 编辑器。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557%28v=vs.85%29.aspx)
但是，不再支持此工具，并且编辑 MSI 并非易事。
还可以查看上面同一页面中的其他工具

[在这里找到](http://www.technipages.com/download-orca-msi-editor.html)一个链接，您可以在其中单独下载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:44:35.783

您也可以使用[InstedIt](http://www.instedit.com/)比 ORCA 更有用和更实用的工具。关于您在 msi 中更改文件的问题（架构类似于关于 ORCA 的帖子）：

1.  在**组件**表中创建一个新组件（您需要指定目标目录）。
2.  在**FutureComponents**中，将新组件与主要未来相关联。
3.  在**文件**表中，您可以删除旧文件并创建一个具有相同名称的新文件，将其与新组件关联，将属性设置为 Compressed (0x4000) 并设置序列。该序列应该是文件 table+1 中的最后一个（要确定哪个是最后一个，您可以按序列对文件进行排序）。
4.  在**Media**表中，您需要创建一个 cab（InstedIt 可以在没有额外软件的情况下执行此操作），使用以下参数创建一个新行带有 .cab 扩展名。然后右键单击该行并选择“重建选定的 CAB”，它会生成错误，路径应该是磁盘上的新文件。将文件放在这里，然后再生成一次 cab。
5.  返回到**Component**表并将 KeyPath 参数与您的文件相关联。

它应该工作，但如果有任何问题 - 欢迎您。

# javascript - 如何通过比较 Jquery 或 Javascript 中的两个字符串来删除字符串的重复部分

> ID：10717399
> 
> 赞同：2
> 
> 时间：2012-05-23T09:46:43.313
> 
> 标签：javascript, jquery

```
$str1='<option value="AAA">AAA</option><option value="BBB">BBB</option><option value="CCC">CCC</option>';

$str2='<option value="CCC">CCC</option><option value="DDD">DDD</option>'; 
```

我想要的预期结果如下。如果其中的某些部分`$str2`与 的部分重复`$str1`，则删除 $str2 的重复部分。

预期结果：

```
$expectedStr = '<option value="DDD">DDD</option>'; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:56:53.467

```
var str1='<option value="AAA">AAA</option><option value="BBB">BBB</option><option value="CCC">CCC</option>',
    str2='<option value="CCC">CCC</option><option value="DDD">DDD</option>',

    result = str2.replace(/<option .+?<\/option>/g, function(m) {
        return (str1.indexOf(m) > -1)? "" : m;
    });

console.log(result); //returns <option value="DDD">DDD</option> 
```

（在这里我假设您要检查“原子”子字符串`<option>...</option>`）

小提琴示例：http: [//jsfiddle.net/jAyAE/](http://jsfiddle.net/jAyAE/)

# android - 列表视图中的子视图不经常被点击

> ID：10717403
> 
> 赞同：1
> 
> 时间：2012-05-23T09:47:02.573
> 
> 标签：android

我有一个 listview 并且我已经为 listview 实现了 onItemClicklistner，另外我在 listview 中还有一个图像，我点击它可以移动到另一个屏幕，但是设备上实际发生的事情是很难检测到被点击的图像并且 90% 的时间 listview 的 onitemclick 列表器被触发。我怎样才能区分两者。

图像视图的监听器

```
iv.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) { 
                            int id = togglePublicationFlag(iv);
                            updateDatbase(id, iv.getTag().toString());                          
                    }
}); 
```

![在此处输入图像描述](../Images/4a78199af1d72099aec434d17936eb0e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:53:00.023

确保图像高度与 ListView 项的高度相似，

您可以尝试使用透明背景使宽度变宽，这样图像看起来相同但点击区域更宽。

# c# - 字典的神秘行为

> ID：10717406
> 
> 赞同：8
> 
> 时间：2012-05-23T09:47:07.067
> 
> 标签：c#, exception, dictionary, mono, thread-safety

我正在开发一个基于 Asp.net MVC 3.0 并使用 Mono-2.10.8 (Windows 7) 的庞大系统。

直到几天前，一切都很好。

在我的 API 中，我有几个使用字典的实用程序类。例如，像这样一个：

```
public static class KeyUtility  
{
  static KeyUtility() {
    Alphabet = new[] {
      'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 
      'J', 'K', 'L', 'M', 'N', 'P', 'R', 'S', 
      'T', 'U', 'V', 'X', 'Y', 'Z', '0', '1', 
      '2', '3', '4', '5', '6', '7', '8', '9'
    };

    ReverseAlphabet = Alphabet
      .Select((c, i) => new { Char = c, Value = i })
      .ToDictionary(k => k.Char, v => (byte) v.Value);
  }

  internal static char[] Alphabet;      
  private static IDictionary<char, byte> ReverseAlphabet;

  public static string ToKey(byte[] key, int groupSize)
  {
    //Accessing Alphabet to generate string key from bytes
  }

  public static byte[] FromKey(string key)
  {
    //Accessing ReverseAlphabet to get bytes from string key
  }
} 
```

随机我得到这样的异常：

```
System.IndexOutOfRangeException: Array index is out of range.
at System.Collections.Generic.Dictionary`2<char, byte>.TryGetValue (char,byte&) <0x000a1>
at MyAPI.KeyUtility.FromKey (string) <0x0009a>
at MyApp.Controllers.AboutController.Index () <0x002df>
at (wrapper dynamic-method) object.lambda_method (System.Runtime.CompilerServices.Closure,System.Web.Mvc.ControllerBase,object[]) <0x0002f>
at System.Web.Mvc.ActionMethodDispatcher.Execute (System.Web.Mvc.ControllerBase,object[]) <0x0001b>
at System.Web.Mvc.ReflectedActionDescriptor.Execute (System.Web.Mvc.ControllerContext,System.Collections.Generic.IDictionary`2<string, object>) <0x000ff>
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod (System.Web.Mvc.ControllerContext,System.Web.Mvc.ActionDescriptor,System.Collections.Generic.IDictionary`2<string, object>) <0x00019>
at System.Web.Mvc.ControllerActionInvoker/<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12 () <0x00066>
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter (System.Web.Mvc.IActionFilter,System.Web.Mvc.ActionExecutingContext,System.Func`1<System.Web.Mvc.ActionExecutedContext>) <0x000b8> 
```

大多数时候一切都很好并且`KeyUtility`工作正常，但在极少数情况下我会遇到这样的异常。尽管它看起来像线程安全问题，但`ReverseAlphabet`始终只能以只读方式访问字典，而不能以写入方式访问字典。一旦在静态构造函数中创建它，就只能使用`TryGetValue`. 正如我从 MSDN 文章中了解到的那样，在这种情况下它应该是线程安全的。而且，我以前没有见过这个问题。

我应该看什么？我什至无法创建复制品，因为我完全不知道出了什么问题。

Mono-2.10.8 和更早的版本在字典中被证明是稳定的。我已经密集使用它几年了，以前从未见过这种异常。

如何解决这个问题？

**升级版：**

我记得在麻烦开始的时候，我所做的是将单声道与我的可执行文件静态链接（我将单声道嵌入到我的应用程序中）。我只是下载了单声道的来源。除了我将 libmono 的输出设置为静态库之外，没有任何更改就编译它。我还与 libeay32 和 sqlite3 相关联。所有多线程（MT）。也许这种变化会影响应用程序？不幸的是，我无法在独立单声道下检查这个。在此之前，我正在动态链接所有库，一切都很好。

**UPD2：** 这里是完整来源的链接：http: [//pastebin.com/RU4RNCki](http://pastebin.com/RU4RNCki)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T13:01:35.330

> 我所做的是静态链接单声道与我的可执行文件

你已经知道我认为的问题，那肯定会破坏单声道。静态链接时不再发生的最重要的事情是 DllMain() 回调，每当新线程开始在进程中执行时，Windows 都会进行回调。这就是 CLR 意识到*可能*执行托管代码的线程的方式。静态构造函数确实是一种可能的故障模式，必须阻止线程执行类中的任何代码，直到 cctor() 完成执行。如果 CLR 不知道线程，它就不能这样做。

如果您想完成这项工作，那么您至少需要在您自己的 DllMain() 函数中为 mono_thread_info_attach() 调用提供替代方案。一般来说，我会说这是一种太多的优化。

# objective-c - iVar的Objective-C继承

> ID：10717407
> 
> 赞同：1
> 
> 时间：2012-05-23T09:47:12.950
> 
> 标签：objective-c

在 MapBox 的 Route-Me 中，我看到 iVars 是这样实现的：

```
@implementation RMMapView
{
    BOOL _delegateHasBeforeMapMove;
    BOOL _delegateHasAfterMapMove;
    BOOL _delegateHasBeforeMapZoom;
    BOOL _delegateHasAfterMapZoom;
    BOOL _delegateHasMapViewRegionDidChange;
    BOOL _delegateHasDoubleTapOnMap;
    BOOL _delegateHasSingleTapOnMap;
    BOOL _delegateHasSingleTapTwoFingersOnMap;
    BOOL _delegateHasLongSingleTapOnMap;
    BOOL _delegateHasTapOnAnnotation;
    BOOL _delegateHasDoubleTapOnAnnotation;
    BOOL _delegateHasTapOnLabelForAnnotation;
    BOOL _delegateHasDoubleTapOnLabelForAnnotation;
    BOOL _delegateHasShouldDragMarker;
    BOOL _delegateHasDidDragMarker;
    BOOL _delegateHasDidEndDragMarker;
    BOOL _delegateHasLayerForAnnotation;
    BOOL _delegateHasWillHideLayerForAnnotation;
    BOOL _delegateHasDidHideLayerForAnnotation;

    BOOL _constrainMovement;
    RMProjectedRect _constrainingProjectedBounds;

    float _lastZoom;
    CGPoint _lastContentOffset, _accumulatedDelta;
    BOOL _mapScrollViewIsZooming;
} 
```

也就是说，它是在 .m 文件而不是 .h 文件中声明的。如果我对这个 RMMapView 进行子类化，我看不到这些 iVar。有没有办法让它在子类中可见而不对世界可见？

我打算保留原始代码，因此选择子类化并从那里修改行为。但也许只是直接更改文件并通过 git 从主存储库更新代码是更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:55:50.340

在 Objective-C（与其他 OO 语言一样）中，大多数开发人员将实例变量视为定义类的实现细节。它们不应该被其他类直接访问。

在这种情况下，实例变量是在实现中声明的，这强烈暗示作者`RMMapView`不想将变量暴露给外部代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:34:23.573

如果你真的希望实例变量对子类可见，你需要在.`@interface`而不是`@implementation`.

```
@interface RMMapView : NSObject
{
@protected
    BOOL _delegateHasBeforeMapMove;
    BOOL _delegateHasAfterMapMove;
    BOOL _delegateHasBeforeMapZoom;
    BOOL _delegateHasAfterMapZoom;
    BOOL _delegateHasMapViewRegionDidChange;
    BOOL _delegateHasDoubleTapOnMap;
    BOOL _delegateHasSingleTapOnMap;
    BOOL _delegateHasSingleTapTwoFingersOnMap;
    BOOL _delegateHasLongSingleTapOnMap;
    BOOL _delegateHasTapOnAnnotation;
    BOOL _delegateHasDoubleTapOnAnnotation;
    BOOL _delegateHasTapOnLabelForAnnotation;
    BOOL _delegateHasDoubleTapOnLabelForAnnotation;
    BOOL _delegateHasShouldDragMarker;
    BOOL _delegateHasDidDragMarker;
    BOOL _delegateHasDidEndDragMarker;
    BOOL _delegateHasLayerForAnnotation;
    BOOL _delegateHasWillHideLayerForAnnotation;
    BOOL _delegateHasDidHideLayerForAnnotation;

    BOOL _constrainMovement;
    RMProjectedRect _constrainingProjectedBounds;

    float _lastZoom;
    CGPoint _lastContentOffset, _accumulatedDelta;
    BOOL _mapScrollViewIsZooming;
} 
```

`@protected`顶部的 限定可见性，它也可以是`@public`或`@private`。 `@protected`是默认值，但最好明确地将其放入以显示您故意希望这些 ivars 对子类可见。

# c# - 如何在代理类中正确指定复杂类型？

> ID：10717408
> 
> 赞同：0
> 
> 时间：2012-05-23T09:47:13.607
> 
> 标签：c#, wcf

我在服务器上有一个**ServiceContract**，如下所示：

```
[ServiceContract]
public interface ICheckService
{
    [OperationContract]
    IEnumerable<Message> CheckInbox(string user);
} 
```

我将上面的定义复制到客户端的**代理类**中：

```
[ServiceContract]
public interface ICheckService
{
    [OperationContract]
    IEnumerable<Message> CheckInbox(string user);
} 
```

编译客户端时，出现以下错误：

```
The type or namespace name 'Message' could not be found (are you missing a using directive or an assembly reference?) (CS0246) 
```

消息.cs

```
public class Message
{
    public int message_id;
    public string message_from;
    public string message_to;
    public string message_text;
    public DateTime message_time;
} 
```

这是`DataContracts`发挥作用的地方吗？如果是这样，我应该在 ServiceContract 定义中修改什么？

注意：ServiceContract 有其他 OperationContracts，它们返回简单的数据类型并且正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:49:33.980

```
[DataContract]
public class Message{
[DataMember]
public String Sender{get;set;}
//etc - not sure what your message class contains
} 
```

类似的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:59:09.423

请记住，这`WCF`是一个消息通信框架，这些消息是`DataContracts`，换句话说，它们是由`DataContract`属性修饰的类，以告知 `WCF`该类中的此对象将通过服务进行通信或传播。在您的示例中，您正在向客户端发送一组对象，那么这`class`应该是一个`DataContract`并且应该对客户端可见的属性应该用`DataMember`属性装饰。

```
 [DataContract]
 public class Message
 {
   [DataMember]
   public string Name{get;set;}
 } 
```

因此，您应该修改您的合同`Message`而不是服务合同

# c - Micriμm μC/OS-III RTOS 中的分配和释放

> ID：10717409
> 
> 赞同：2
> 
> 时间：2012-05-23T09:47:14.377
> 
> 标签：c, memory-management, rtos, micrium, ucos

我们使用 Micrium 的 μC/OS-III RTOS 和 Renesas 的 RX62N。

我们建立了一个系统，我们必须动态分配和释放数据。我们发现函数**malloc()**和**free()**不适用于 RTOS。然而，RTOS 对此有一个自定义功能；Mem_HeapAlloc **()**函数。这个函数分配了一些 RTOS 的内存*'heap'*。问题是它没有自由功能，可能是因为一切都进入了**堆池**。

在 RTOS 中，也可以创建一个池。这个池的问题是所有包含的块都需要相同的大小。由于我们分配和释放不同的大小，这对我们来说不是一个好的解决方案。

[我们在这里](http://www.2shared.com/document/w4jSSx96/uC-LIB-Manual.html)找到了描述内存 RTOS 功能的文档， 第 4 章描述了这些功能。

有人知道我们如何解决这个问题吗？

我们已经拥有的一些解决方案

*   **使所有块大小与最大分配相同。** 我们有很多开销，因为最小和最大的分配差别很大。
*   **不要做免费的。** 这是没有办法的，会出现内存泄漏。

希望有人可以帮助我们。如果有不清楚的地方，请问我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:09:12.193

*   `you can allocate your objects in multiples of block sizes.`

您仍然会有一些内部碎片，因此您将无法充分利用可用空间。

使用内存池仍然有以下优势

*   内存池允许内存分配具有恒定的执行时间（无碎片）。一个池中上千个对象的内存释放只是一个操作，如果使用malloc为每个对象分配内存就不是一个一个的操作。

*   内存池可以按层次树结构分组，适用于循环和递归等特殊编程结构。

*   固定大小的块内存池不需要为每个分配存储分配元数据，描述诸如已分配块大小之类的特征。特别是对于小的分配，这提供了大量的空间节省。

# php - 未创建隐藏的表单域

> ID：10717412
> 
> 赞同：0
> 
> 时间：2012-05-23T09:47:31.993
> 
> 标签：php, codeigniter

我正在尝试在 Code Igniter 中创建一个名为 EMPLOYEES_id 的隐藏字段。我查看了文档并关注了它们，但是该领域并没有进入。

我的代码如下..

```
<?php $EMPLOYEES_id = array('EMPLOYEES_id' => $message[0]->EMPLOYEES_id); ?>
<?php $attributes = array('class' => 'well form-horizontal');?>
<?=form_open('messages/create', $attributes, '',$EMPLOYEES_id)?> 
```

该字段未出现在我的表单中。我假设这是因为一个额外的数组被添加到`form_open`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:51:30.347

建议进行两个更改：

*   隐藏字段数组应该是第三个参数，而不是第四个。
*   尝试执行完整`<?php echo`而不是`<?=` [快捷语法](http://php.net/manual/en/function.echo.php)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:08:24.937

如果你还想试试 form_open 方法，那么首先按照 Yan 的思路，数组是第三个参数，而不是第四个。

其次，当您传递两个类时，可能是 CodeIgniter 不喜欢这种情况。

也许尝试：

```
$attributes = array('class' => 'well', 'class' => 'form-horizontal'); 
```

也。虽然我怀疑这不是问题，但它必须值得一试......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:09:35.747

干得好：

你的代码：

```
<?=form_open('messages/create', $attributes, '',$EMPLOYEES_id)?> 
```

隐藏的输入是第三个参数，您将它作为第四个参数传递，它应该是：

```
<?=form_open('messages/create', $attributes, $EMPLOYEES_id)?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:16:05.700

```
$initial_pump = array(
                    'name' => 'EMPLOYEE_id',
                    'id' => 'EMPLOYEE_id',
                    'value' => $message[0]->EMPLOYEES_id)
                );
echo form_hidden($initial_pump); 
```

# c - 用于创建我自己的 certmgr.exe 的 API

> ID：10717413
> 
> 赞同：0
> 
> 时间：2012-05-23T09:47:33.860
> 
> 标签：c, windows, winapi, certificate, ssl-certificate

是否有任何 Windows api 可用于创建我自己的`cermgr.exe`，它将`.cer`文件安装到证书存储。如果不是以编程方式如何实现这一目标？

如何在不使用`certmgr.exe`or的情况下安装`certutil.exe`证书

我想在这里补充几点。证书文件由我自己创建和签名。现在我有一个`.cer`文件。我想将它安装在“localMachine root”、“localMachine 受信任的发布者”中。如何以编程方式进行（使用 WINAPI）。

**更新：**

[此链接在 C# 中提供了一个解决方案，](https://stackoverflow.com/questions/566570/how-can-i-install-a-certificate-into-the-local-machine-store-programmatically-us?answertab=active#tab-top)在 C 中实现相同的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:53:13.780

您应该查看 MSDN 中的“[证书和证书存储功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380252%28v=vs.85%29.aspx#certificate_and_certificate_store_functions)”。

在商店中添加证书的函数是[CertAddEncodedCertificateToStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376015%28v=vs.85%29.aspx)。

# objective-c - 从 plist 读取字典后无法编辑字典

> ID：10717418
> 
> 赞同：0
> 
> 时间：2012-05-23T09:47:48.350
> 
> 标签：objective-c, ios, plist, nsmutabledictionary

我将 NSMutableDictionary 存储在 plist 文件中。当我将它读入对象的属性时，我需要能够对其进行编辑。我的属性指针仅是 NSMutableDictionary，但是从 plist 生成的对象是 NSDictionary。

现在我希望能够添加更多键值对或删除一些键值对并再次保存。我不能，因为它现在是一个不可变的对象。

该对象是在我的模型的 init 中创建的。

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:51:00.833

这应该做你需要的：

```
NSDictionary * dict = [NSDictionary dictionaryWithContentsOfFile: <myfilename>];
NSMutableDictionary * mutableDict = [[dict mutableCopy] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:50:45.623

这就是你需要做的一切

```
NSMutableDictionary *mutableDictionary = [dictionary mutableCopy]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:51:39.020

您只需要制作字典的可变副本：

```
NSDictionary *dictionary;

NSMutableDictionary *mutableDictionary = [dictionary mutableCopy]; 
```

# php - $_POST 失败而不是 $_REQUEST

> ID：10717421
> 
> 赞同：0
> 
> 时间：2012-05-23T09:48:00.580
> 
> 标签：php, ajax, post, request

我正在尝试将表单 $_REQUEST 转换为 $_POST，因为它更安全。我的 server.php 中有以下代码：

```
 if (isset($_REQUEST['mode']) && $_REQUEST['mode']=='verwijderturf'){
    $sql="SELECT * FROM users WHERE Naam='".cleanInput($_REQUEST['naam'])."'";
    $result=mysql_query($sql);
    $count=mysql_num_rows($result);
    if($count > 0){
        $date2 = date("Y-m-d");
        $naam2 = cleanInput($_REQUEST['naam']);
        $door = cleanInput($_REQUEST['door']);
        mysql_query("INSERT INTO turfjes 
                     VALUES (
                             'Adtje', 
                             '".$naam2."',
                             '', 
                             '".$date2."',
                             '".$door."')") 
        or die (mysql_error());
    }
} 
```

效果很好。但是，当我将所有 $_REQUEST 切换到 $_POST 时，我的 server.php 什么都不做......

我正在使用 ajax 请求将数据发送到我的服务器。例如：

```
function verwijderturf() {
    var naam = $("naam").value;
    $("naamnieuw").value = "";
    $("naam").value = "";
    $("redennieuw").value = "";
    new Ajax.Request('server.php?mode=verwijderturf&naam='+naam+'&door='+$("door2").value,{
        method: 'post', 
        onSuccess: update,
        onFailure: ajaxFailure
    });
} 
```

如您所见，我的 ajax 方法是 'post'，所以它应该可以与 $_POST 一起正常工作。

任何人都可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:53:38.207

您需要将参数提供为 POST 参数，而不是 GET。您使用的是哪个 Javascript 库？

即对于 jQuery 它会是

```
jQuery.ajax('server.php',{
    data: {
        'mode': 'verwijderturf',
        'naam': naam,
        'door': $("door2").value
    },
    type: 'post', 
    success: update,
    error: ajaxFailure
}); 
```

原型示例：

```
new Ajax.Request('server.php',{
    parameters: {
        'mode': 'verwijderturf',
        'naam': naam,
        'door': $("door2").value
    },
    method: 'post', 
    onSuccess: update,
    onFailure: ajaxFailure
}); 
```

`data`(jQuery) 和`parameters`(Prototype) 是键/值对象，代表所有 POST 参数。在这两个库中，这可能是一个序列化的字符串，`'key=value&key2=value'`但我更喜欢使用一个对象并让库序列化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:46:41.357

我有同样的问题，除了一个简单的带有 POST 方法的 HTML FORM，而且我没有使用任何库，所以它必须是 linux/apache/php/mysql 的标准安装（php 是第 5 版）。

也许 POST 和 REQUEST 使用与 PHP 不同的库？也许不需要库，它与 somo INI 文件有关？谁知道，事实是，$_POST 数组不起作用。

# ember.js - 如何在 ember.js 中迭代数组集合视图

> ID：10717423
> 
> 赞同：0
> 
> 时间：2012-05-23T09:48:06.420
> 
> 标签：ember.js

我想迭代一个 Emebrjs 集合 - 每次用户单击下一个时，都会选择以下项目并且其属性会更改：

如何从外部迭代列表视图项？看 -

[http://jsfiddle.net/gavriguy/NHxJ4/](http://jsfiddle.net/gavriguy/NHxJ4/)

```
var App = Em.Application.create({
    ready: function() {

        App.someItemsView.appendTo('body');
        this._super();
    }
});

App.tempController = Em.ArrayController.create({
    self: this,
    foo: {title:'tt'},
    content: [
        {
        title: 'A',
        unread: true},
    {
        title: 'B',
        unread: false},
    {
        title: 'C',
        unread: false}
    ],
    init: function() {},

    highlightNext: function() {

        var currentItem = this.content.filterProperty('unread', false)[0];
        //How to change the current item's unread to true???

    }

});

App.someItemsView = Ember.CollectionView.create({

    contentBinding: 'App.tempController.content',

    itemViewClass: Ember.View.extend({
        template: Ember.Handlebars.compile('<div>{{content.title}} unread: {{content.unread}}</div>'),
        click: function(event) {

            this.setPath('content.unread', false);
        }
    }),

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:11:25.630

由于您在`App.tempController.content`数组中的项目不是`Ember.Object`'s，因此您不能使用`content.set('unread', false)`. 如果要更改非 Ember 对象的属性，可以使用该`Ember.setPath`函数，请参阅[http://jsfiddle.net/pangratz666/7RLDr/](http://jsfiddle.net/pangratz666/7RLDr/)：

```
highlightNext: function() {
    // get all unread items
    var unreadItems = this.content.filterProperty('unread', true);
    // get the first object
    var nextUnreadItem = unreadItems.get('firstObject');
    // check if there is a object at all
    if (nextUnreadItem) {
        // finally set the property
        Ember.setPath(nextUnreadItem, 'unread', false);
    }
} 
```

# css - 定心体和大滑块

> ID：10717424
> 
> 赞同：3
> 
> 时间：2012-05-23T09:48:07.927
> 
> 标签：css, centering, jquery-ui-slider, shopify

在尝试将滑块定位在背景中时，我设法使我的身体不居中，使其也居中，即使调整窗口大小时它也保持居中。

如果您的浏览器允许缩小该站点，则该站点处于活动状态，您可以看到该站点居中，但是当您打开它并且滑块图像太大时，它只会与窗口的左边缘对齐。

我是自学成才的，所以也许我错过了一些东西，或者只是需要一些指导来解决这个问题。请帮忙！

CSS在这里：

```
#billboardWrapper {height:600px;width:1800px; margin:-170px auto auto; position:relative; overflow:hidden;  }

#billboard {height:600px;width:1800px;position:relative;/*background:#1c1c1c;*/ background-position: 50% 0pt;}

#billboardPrev,
#billboardNext { display:block; text-indent:-9999px; position:absolute; left:40px; top:270px; width:30px; height:30px; cursor:pointer; background: url(arrows.png) no-repeat 0 0; z-index:99;}
#billboardNext {left:auto; right:40px; background-position:0 -92px; }

.slide {height:600px;width:1800px;display:none;  } 
.slide img {height:600px;  width:100%; background-position: 50% 0pt;  
.slideLeftLayout .slideTitle,.slideLeftLayout .slideText,.slideLeftLayout .slideLink {left:auto;}
.slideRightLayout .slideTitle,.slideRightLayout .slideText,.slideRightLayout .slideLink {right:50px;text-align:auto;} 
```

html 是（用 firebug 复制，因为 html 是 shopify 液体）

```
<html>
<head>
<body id="welcome" class="index" data-twttr-rendered="true">
<div id="body">
<div id="utility-wrap">
<div id="header-wrap">
<div id="content-wrap">
<script type="text/javascript" src="//dk0684j3ynpoi.cloudfront.net/assets/client.js">
<div id="gatekeeper-content" class="">
<div id="body">
<div id="billboardWrapper">
<span id="billboardPrev">Previous</span>
<span id="billboardNext">Next</span>
<div id="billboard">
<div class="slide slideRightLayout" style="position: absolute; top: 0px; left: 0px; z-index: 2; opacity: 0; display: none; width: 1800px; height: 600px;">
<div class="slide slideRightLayout" style="position: absolute; top: 0px; left: 0px; display: block; z-index: 3; opacity: 1; width: 1800px; height: 600px;">
<img alt="" src="http://static.shopify.com/s/files/1/0059/9612/t/10/assets/slideTwo.jpg?108526">
</div>
</div>
</div>
</div> 
```

![这是缩小后的样子][2] ![在窄分辨率下，滑块与窗口左侧对齐并移动][3] ![这就是我的目标？！？？] [4]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:09:15.890

即使您缩小浏览器，删除 style.css 第 287 行上的`left:40px`from也会使上一个图标在滑块内可见。`#billboardPrev, #billboardNext`

您的“下一步”图标也没有显示。`background-position: 0 -41px;`在`#billboardNext`style.css 第 288 行显示该更改。

您的滑块图像太大。这就是为什么它在放大和缩小时发生变化的原因。

**解决方案：**

不要使用那个大图像，而是将其拆分为 2 个图像。

使用以下图像作为滑块图像： ![小滑块图像](../Images/c48a2ab76d40c048bf3f7763aeb16055.png)

并供您`#gatekeeper-content`使用以下背景和 CSS。

![滑块背景](../Images/1226285bcf5caff3ee997da2cecec5f4.png)

```
background-repeat: repeat-x; 
```

滑块图像被裁剪为 960 像素宽度。也尝试`position:relative`在您的代码上使用。

# c# - 如何将 zip 文件中的内容显示到 Windows 窗体？

> ID：10717435
> 
> 赞同：0
> 
> 时间：2012-05-23T09:49:05.890
> 
> 标签：c#, asp.net, winforms

我正在使用 Windows 窗体。我们从系统中选择一个 zip 文件。选择该文件后，如果我们单击“显示内容”，则内容应显示在文本框中。

这怎么可能？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:56:52.983

[您可以使用位于http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)的名为 DotNetZip 的库来实现此目的

该库有一个 ZipEntry 类，其属性 FileName (http://cheeso.members.winisp.net/DNZHelp/) 从 Zip 中迭代文件名，如第一个 url 的示例所示

希望这可以帮助 ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:00:26.523

您可以使用开源库来读取 zip 文件（通过[NuGet](http://nuget.org/packages/SharpZipLib)获取它在这里您可以找到读取 zip 文件内容的示例：

[http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx](http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx)

# oracle - ADF - 更新扩展视图对象

> ID：10717436
> 
> 赞同：0
> 
> 时间：2012-05-23T09:49:06.570
> 
> 标签：oracle, jdeveloper, oracle-adf

当基础对象更新时，是否可以强制更新扩展视图对象？截至目前（Jdeveloper 11g 第 1 版），我必须在每个扩展视图对象中打开查询并在关闭查询表单时选择确定。这会强制更新对象。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:42:06.583

是的，如果它不刷新，可能是一个错误。从 otn 尝试最新版本的 jdeveloper，看看它是否仅与您的 jdev 版本有关。如果它没有升级，并且如果升级不是选项，或者您仍然可以始终如一地重现这听起来是的，那么请继续并记录一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:50:31.820

听起来很奇怪。如果您更改在运行时使用的类并从类路径或类路径上的库中读取，则应应用更改。

# html - iphone 中的 Gmail 应用程序忽略 html 邮件的“字体大小”并将其更改为 13px

> ID：10717438
> 
> 赞同：4
> 
> 时间：2012-05-23T09:49:12.533
> 
> 标签：html, gmail, smartphone

我构建了一个适合电子邮件的 HTML 页面（使用 Photoshop）。当我将它复制到 Gmail 时，使用 PC 中的浏览器发送它，然后打开邮件，它看起来还不错。但是，当我尝试通过 iPhone 上的 Gmail 应用程序打开它时，它会完全忽略`style="font-size:11px"`并将其更改回 13px。

所有样式属性都是内联的，页面宽度为 600px。

我可以在 HTML 代码中做什么以使其接受较小的字体？我不想更改 iPhone 设置或类似的设置，因为它应该发送到其他 iPhone。当然，我不想要求他们更改设置。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-02T16:26:27.980

这只是一个愚蠢的猜测，但您可以尝试 Gmail 用于“小”字体的标记，如下所示：

```
<font size="1">Text to be displayed with "small" font</font> 
```

让我知道它是否有效！

# c# - 如何读取封闭多边形内的像素？

> ID：10717441
> 
> 赞同：2
> 
> 时间：2012-05-23T09:49:30.877
> 
> 标签：c#, .net

读取封闭多边形内位图像素颜色的最佳方法是什么？

闭合多边形定义为位图尺寸中的 System.Drawing.Point 列表。我正在使用 C# 和 .NET 框架。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:26:46.707

据我所知，c# 默认不提供此功能。最简单的方法可能是创建第二个具有白色背景的图像，其中您`FillPolygon`是具有黑色像素的多边形。然后扫描整个第二张图像的黑色像素，并从原始图像中读取相同坐标处的每个黑色像素。

如果多边形是大图像的一小部分，这当然会很慢，但是您可以轻松确定多边形落入的范围，并仅为该区域创建地图。

另一种方法是从 (-1, 0) 到 (width + 1, 0) 扫描一条线并计算与每条多边形线的交点，在交点后，下一个像素在多边形内，在下一个交点后，像素在外. 然后扫描 (-1, 1) 到 (width + 1, 1) 等。请记住，与与多边形点完全匹配的点相交的线应格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:29:48.860

一种可能的方法是创建 Drawing2D.GraphicsPath 的实例并通过[GraphicsPath.AddLines( PointF[] )](http://msdn.microsoft.com/en-us/library/kkh85f05%28v=vs.90%29)添加点，然后使用 GraphicsPath 作为构造函数的参数创建一个区域。

然后，您使用[Region.IsVisible(x, y, graphicsobject)](http://msdn.microsoft.com/en-us/library/ms142263%28v=vs.90%29)根据多边形适合的最小矩形执行命中测试。

这种方法会比创建第二个位图更有效，但可能不会那么快。

这是 VB，但很容易翻译：

```
Dim path As New GraphicsPath

path.AddLines( YourPointsArray )

path.CloseFigure( )

Dim rgn As New Region( path )

'Find your min/max box based on YourPointsArray here

For y As Integer = min.Y To max.Y
  For x as Integer = min.X To max.X
    If rgn.IsVisible( x, y, YourGraphicsObject ) Then
      'Do what you need to do
    End If
  Next
Next 
```

这只是快速示例代码，但应该可以理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T11:35:42.527

很有趣的话题。按照 Kogitsune 的建议缩小矩形听起来是合理的第一步。但我认为你不需要一个区域。如果您只是找到所有点的最大和最小 x 和 y 坐标，您将拥有仍然包含整个多边形的最小矩形。然后，您可以尝试使用[高效的多边形填充算法](http://alienryderflex.com/polygon_fill/)来查找多边形内的所有水平线。然后简单地计算。这些颜色。

# php - php页面中的错误

> ID：10717442
> 
> 赞同：-2
> 
> 时间：2012-05-23T09:49:33.053
> 
> 标签：php, apache, session, cookies

我收到以下错误：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 3
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 3
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 20
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 24
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 25
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 38
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 39
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 52
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 52
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 38
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 39
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 52
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 52
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 76
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 77
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 96
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 96
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 96
Warning: Cannot modify header information - headers already sent by (output started at C:\Apache2.2\htdocs\monitor.php:2) in C:\Apache2.2\htdocs\monitor.php on line 96 
```

它发生在每当`session_start()`我刷新`cookie`.

* * *

同一页面（和代码）正在另一台机器上工作。唯一的区别是安装的 Apache 服务器（我的是 2.2.21，另一个是 2.2.17）。

php版本为5.2.17，php.ini文件相同。

* * *

我该如何解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:52:35.713

大多数情况下，在调用 session_start() 之前从 php 脚本发送内容/输出时会发生此错误。

通常在`<?php`您可能有空间或其他标志/字母之前。在您的情况下，问题出在 monitor.php 第 2 行 - 您可能会在调用之前回显`session_start()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:52:56.133

~~php.ini 文件是否相同？~~对我来说，听起来其中一个可能有 output_buffering=on，而另一个（失败的那个）有 output_buffering=off。

[http://www.php.net/manual/en/outcontrol.configuration.php](http://www.php.net/manual/en/outcontrol.configuration.php)

显然，这是默认的取决于完成了哪种 PHP 安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:53:37.277

您应该检查文件的第二行`monitor.php`，因为该行似乎向浏览器输出了一些文本。

`session_start()`输出文本后无法执行。

# mysql - 如何在mysql中更改ID

> ID：10717444
> 
> 赞同：0
> 
> 时间：2012-05-23T09:49:52.910
> 
> 标签：mysql, vb.net

假设我在 mySQL 中有一个表业务。

每个“企业”中的 ID 是标题和位置的函数。它使编程变得更加容易。

我也经常合并 2 个相同的业务，等等。

说有一天公司的名称改变了，我想改变ID。我很少做的手术。

许多其他表格都指向该业务。

所以我该怎么做？

我是否应该创建新 ID，然后将指向原始业务的所有关系更改为新 ID？

是否有一个 mysql 命令可以更快地执行此操作？

任何示例 vb.net 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:42:42.500

根据每个表使用的数据库引擎及其设计，*如果*您在表上配置了外键和约束，您可能无需执行任何操作。

首先要做的是检查链接表的结构。为此，请`show create table xyz`在 MySQL 会话中运行并检查：

1.  如果正在使用 InnoDB 引擎
2.  表上存在外键和约束

（外键仅在使用 InnoDB 引擎时才有实际用途。您可以在其他引擎中请求它们，但它们不会做任何事情。）

如果你幸运地使用了 InnoDB 引擎并且有适当的约束，那么你正在寻找类似的东西：

```
CONTRAINT `FK_businessID` FOREIGN KEY(`businessID`) REFERENCES `Business` (`ID`) 
    ON DELETE CASCADE ON UPDATE CASCADE 
```

在表定义中。如果您确实看到这样的内容，您*应该*能够安全地更改业务表中的 ID，并且所有其他链接表都应该效仿。

如果您没有外键但*正在*使用 InnoDB 引擎，请在单个事务中更改所有表中的信息，这样，如果出现任何问题，请执行您无法控制的更改（连接丢失、查询错误等）可以回滚。

最后，如果你没有使用 InnoDB 引擎，祝你好运。您将不得不冒着“即时”更改记录的风险。您的主要选择（按个人喜好排列）是：

1.  计算出新密钥并在表上使用多个更新，并希望它们都能正常工作并且不会影响当前使用数据的任何人
2.  使用新 ID 创建一条新记录，将初始记录中的所有信息复制到新记录中，然后在链接表上使用多个更新，然后删除原始记录，同时希望它一切正常并且不会影响当前使用数据的任何人
3.  使用新 ID 创建一条新记录，复制链接表中的所有记录，检查它然后删除初始记录
4.  使用魔法

显然，通过以上所有方法，在下定决心之前，请进行大量（我说的是**大量**）测试和备份。并且在使用数据库的客户数量最少的时候进行；换句话说，一夜之间。

# javascript - 在 HTML 中更改行中单元格的索引

> ID：10717451
> 
> 赞同：1
> 
> 时间：2012-05-23T09:50:34.477
> 
> 标签：javascript, jquery, html, css

我有下表：

```
<table class="AMDetailTableCss" id="tblQueueHistory" cellspacing="5" cellpadding="5" >
    <tr>
        <td id="Working">
            <div class="AMQueueName AMWorkingAgent"><div>
            <span class="AMQueueText">Working</span>
            </div></div>
        </td>
        <td id="OnBreak">
            <div class="AMQueueName AMOnBreakAgent"><div>
            <span class="AMQueueText">On Break</span>
            </div></div>
        </td>
        <td id="Idle">
            <div class="AMQueueName AMIdleAgent"><div>
            <span class="AMQueueText">Idle</span>
            </div></div>
        </td>
    </tr>
</table> 
```

我想`td`在运行时使用 javascript/Jquery 更改索引。我的意思是第二个`td`应该被移动到第一个。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:00:17.817

尝试这个：

```
$("#OnBreak").detach().insertBefore("#Working") 
```

[**示例小提琴**](http://jsfiddle.net/ZT8PH/2/)

使用`detach()`将确保分配给 的任何事件或数据`td`也被移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:56:14.500

```
var firstHtml=$('#Working').html();
var secondHtml=$('#OnBreak').html();

$('#OnBreak').html(firstHtml);
$('#Working').html(secondHtml); 
```

[演示](http://jsfiddle.net/ankur20us/eZZy9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:58:15.620

你想什么时候做这个？

```
$("#OnBreak").prependTo($("#OnBreak").parent()); 
```

# jboss - JBoss 7.1 上 GateIn portlet 中的 JNDI 数据源

> ID：10717454
> 
> 赞同：1
> 
> 时间：2012-05-23T09:50:42.987
> 
> 标签：jboss, jndi, gatein

我正在尝试在 JBoss 7.1 上的 GateIn 3.2.0 中部署的 portlet 中获取数据源。

首先，我在standalone.xml 中创建了数据源

```
 <datasource jta="true" jndi-name="java:jboss/datasources/ccr" pool-name="ccr-pool" enabled="true" use-java-context="false" use-ccm="true">
                <connection-url>jdbc:mysql://localhost:42006/contentrepository</connection-url>
                <driver>com.mysql</driver>
                <security>
                    <user-name>node</user-name>
                </security>
                <statement>
                    <prepared-statement-cache-size>100</prepared-statement-cache-size>
                    <share-prepared-statements>true</share-prepared-statements>
                </statement>
            </datasource> 
```

我还添加了驱动程序和驱动程序模块。

在我的 portlet 中，我尝试使用

```
dataSource = (DataSource) new InitialContext().lookup("java:jboss/datasources/ccr"); 
```

但我只得到一个 javax.naming.NameNotFoundException: Name 'jboss' not found in context ''。

我也试着用

```
dataSource = (DataSource) new InitialContext().lookup("java:comp/env/datasources/ccr"); 
```

并将其映射到 web.xml 和 jboss-web.xml 中的以下条目

网页.xml：

```
<resource-ref>
    <description>MySQL DS</description>
    <res-ref-name>datasources/ccr</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

jboss-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <resource-ref>
        <res-ref-name>datasources/ccr</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <jndi-name>java:jboss/datasources/ccr</jndi-name>
    </resource-ref>
</jboss-web> 
```

然后我得到 javax.naming.NameNotFoundException: Name 'comp' not found in context ''。

我错过了什么？是否有一些安全设置阻止我的应用程序获取数据源？

奇怪的是，当使用 servlet 时，我可以在同一个 web 应用程序中获取数据源，但只能在 doGet/doPost 方法中，而不是在 init() 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:07:13.070

我在 GateIn 3.3 上有同样的问题。但它没有用 GateIn 3.4M1 复制。当我用谷歌搜索这个错误时，我在 JIRA 中找到了它：[https ://issues.jboss.org/browse/GTNPORTAL-2511](https://issues.jboss.org/browse/GTNPORTAL-2511)

# java - 这是在 Java 中重复方法调用的最干净的方法吗？

> ID：10717458
> 
> 赞同：3
> 
> 时间：2012-05-23T09:50:54.310
> 
> 标签：java, coding-style

以下看起来像杂乱的代码，但我想不出如何使它更整洁。有任何想法吗？我想为 10、20 和 30 的值调用 doSearch。如果没有返回值的结果，那么我想尝试以下值。否则，只能退出。我知道这会起作用，但它是最易读的方式吗？

```
SearchResult result = doSearch("10");
if (result.getResults() == null) {
  result = doSearch("20");
  if (result.getResults() == null) {
    result = doSearch("30");
    if (result.getResults() == null) {
      // put code to deal with lack of results here
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:55:11.830

这里有一个建议：

```
SearchResult result = null;
for (String attempt : "10,20,30".split(","))
    if ((result = doSearch(attempt)) != null)
        break;

if (result == null) {
    // put code to deal with lack of results here
} 
```

（正如 Marko Topolnik 在评论中所建议的那样。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:53:36.213

您可以将搜索字符串存储在 String[] 中，然后遍历数组并调用 doSearch()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:55:18.743

```
int [] searchValues = {10, 20, 30};

for(int i=0; i<searchValues.length; i++) {
   SearchResult result = doSearch(searchValues[i]);
   if (result.getResults() != null) {
       return result;
   }
}

// put code to deal with lack of results here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T10:16:08.340

我会用这样的东西：

```
SearchResult result = null;
for (int i=10; i<=30 && result == null; i+=10) {
    result = doSearch(i);
}
if (result == null) {
    // throw a meaningful business exception here
} 
```

由于数字是数字，我不认为遍历它们的字符串表示是一个好主意。

# linux - 编译多个 C 文件，以便生成的可执行文件将源文件的基本名称作为其名称

> ID：10717463
> 
> 赞同：0
> 
> 时间：2012-05-23T09:51:07.910
> 
> 标签：linux, gcc

我在目录中有以下 C 文件...

```
hello.c, myprog.c, out.c 
```

我想在一个命令中编译这些文件，以便可执行文件命名如下：

```
hello, myprog, out 
```

我试过这个命令

```
ls *.c | awk '{print $1}' 
```

这列出了所有没有扩展名的 c 文件。

是否可以通过管道将这些值传递给变量并使用

```
| gcc $variable.c -o $variable 
```

生成可执行文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:52:46.650

```
for i in *.c; do  # or explicitly enumerate the files
    gcc -o `basename $i .c` $i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:42:23.147

如果您已经`make`安装，内置的构建规则将足以构建您的二进制文件。

只要做`make hello`，你就会得到你的二进制文件。无需显式调用`gcc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:55:35.043

```
for f in *.c ; do gcc $f -o `echo $f | sed "s/\.c$//"`; done 
```

（未测试）

# c# - 证书到期后的PDF数字签名验证

> ID：10717465
> 
> 赞同：2
> 
> 时间：2012-05-23T09:51:13.673
> 
> 标签：c#, asp.net, digital-signature

我是数字签名世界的新手，我正在尝试研究它。我在这里找到了一篇好文章[和](http://www.codeproject.com/Articles/14488/E-signing-PDF-documents-with-iTextSharp)[一个](http://www.youdzone.com/signature.html)很好的教程。但是我对数字签名有一些疑问。我不确定这些是什么愚蠢的问题。但我没有其他最好的资料来澄清我的疑问:)

1）假设用户使用他的私钥对 pdf 进行数字签名。几年后，假设他的证书到期。那么其他人可以验证pdf吗？

2）假设有一个组织，他们以pdf格式存储文件，并由一名官员进行数字签名。假设该官员搬到了另一个组织。那么前一个组织的其他官员是否能够验证签名？

3) 两个或更多人可以使用自己的证书签署 pdf 吗？

4）我也想创建一个网络应用程序。我正在考虑使用 iTextSharp。那么我应该如何获取服务器的证书和密码呢？如果可能的话，任何人都可以分享一个好的教程的链接吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:18:17.947

1）除非签名带有时间戳，否则验证会抱怨证书/签名过期。为了解决这个缺点，提供了[PAdES](http://stf364ms.sites.ac.upc.edu/phpmyfaq/index.php?action=show&cat=1)标准。

2) 是的，在大多数情况下，签名是自包含的（假设受信任的根证书仍然可用）。

3) PDF 格式不支持对原始文档进行两个独立的签名，否则是的，因此可以由两个人在文档上签名（即第一人在原件上签名，第二人在 document_with_fist_signature 上签名）。

4）没有办法也没有意义（私钥必须保持私密并保存在客户端上）。在此处阅读[我对类似问题的回复](https://stackoverflow.com/a/10656679/47961)。顺便说一句，我们的解决方案将为您工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:41:47.677

> 那么我应该如何获取服务器的证书和密码呢？

你不应该这样做。如果您希望某人签署文件，那么您应该让他们下载`current`文件，让他们打开文件并验证并签署文件，然后上传`updated`副本。

正如尤金指出的那样，多人签署一份文件是可能的。这是如何发生的，第一个人填写一半的信息保存并在文档上签名。然后第二个人能够验证信息是由第一个人填写的（由他们的证书签名）并填写文件的后半部分。他们无法更改由第一人签名的任何信息（否则它将变为未签名/未经验证），但理论上可以将其发回，要求第一人更改信息。

我已经看到这是用表单格式的 pdf 文档完成的。

# silverlight - 将多个 DomainDataSources 绑定到 RadGridView 选择更改的最佳方法

> ID：10717467
> 
> 赞同：2
> 
> 时间：2012-05-23T09:51:17.083
> 
> 标签：silverlight, binding, wcf-ria-services, radgridview, query-parameters

我有一个主网格，用于查找项目，然后是一组 3 个网格，用于使用简单的名称值对显示所选行的相关详细信息的平行集。

## 它看起来像这样：

![在此处输入图像描述](../Images/51de67b4ee4c7da088cd54166859657e.png)

当我对域服务进行断点时，所选行中的参数会正确传递给它，但子网格显示的条目与返回的数据无关。

## 3 种域服务方法之一的调试版本如下所示：

```
 public IEnumerable<NameValuePair> GetRandNameValues(int randId)
    {
        // If I breakpoint here the values in randId are 
        // correct for the selected master row

        List<NameValuePair> result = new List<NameValuePair>();
        result.Add(new NameValuePair("[ID]", randId.ToString()));
        ...
        return result;
    } 
```

## 3 个子 RadGridViews 之一的示例是：

```
 <telerik:RadGridView Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch" Name="randGridView" VerticalAlignment="Stretch" ShowGroupPanel="False"  RowIndicatorVisibility="Collapsed"
                                 ItemsSource="{Binding ElementName=randDataSource, Path=Data}" AutoGenerateColumns="False">
                <telerik:RadGridView.Columns>
                    <telerik:GridViewDataColumn Header="Name" DataMemberBinding="{Binding Name}" IsReadOnly="True" Width="*" />
                    <telerik:GridViewDataColumn Header="Value" DataMemberBinding="{Binding Value}" IsReadOnly="True" Width="*" />
                </telerik:RadGridView.Columns>
            </telerik:RadGridView> 
```

## 3 个子 DomainDataSource 对象之一的示例是：

```
 <riaControls:DomainDataSource Name="randDataSource" Height="0" Width="0"
        QueryName="GetRandNameValuesQuery">
        <riaControls:DomainDataSource.DomainContext>
            <my:RandDomainContext />
        </riaControls:DomainDataSource.DomainContext>
        <riaControls:DomainDataSource.QueryParameters>
             <riaControls:Parameter ParameterName="randId"
                Value="{Binding ElementName=masterGridView, Path=SelectedItem.Rand_ID}"/>
        </riaControls:DomainDataSource.QueryParameters>
    </riaControls:DomainDataSource> 
```

在这个测试用例中，它应该返回传递的键值，但它总是显示一个 0 值，如下所示： ![在此处输入图像描述](../Images/1ecfbb92ea2ae4177fa8a830f3c9841c.png)

0 来自未选择任何内容的初始情况。详细信息网格中的其他行会更改，但不会更改为正确的记录。事实上，它们似乎在与几个主行相关的一小组值之间交替出现......很奇怪。

使用正确的键在正确的时间调用 DomainService，但返回值是错误的。

## 什么触发了子网格的更新？我错过了什么？为什么他们在某些行中显示旧数据，但不是在所有行中？

## 更新：

我为`LoadedData`数据源上的事件添加了一个处理程序，并在我断点它时发现其中的实体是错误的值......即不是域服务选择的：

```
 private void randDataSource_LoadedData(object sender, LoadedDataEventArgs e)
    {
        if (e.HasError)
        {
            System.Windows.MessageBox.Show(e.Error.ToString(), "Rand Load Error", System.Windows.MessageBoxButton.OK);
            e.MarkErrorAsHandled();
        }
    } 
```

当我将交叉绑定替换为 Grid 选择时，如上所示，在 3 个单独的域上下文中使用 3 个单独的加载调用，它工作正常。问题似乎在于将 DomainDataSource 参数绑定到网格上的选择更改。

**有任何想法吗？**

# parsing - 解析此文件格式时扫描仪输出困难

> ID：10717468
> 
> 赞同：1
> 
> 时间：2012-05-23T09:51:19.867
> 
> 标签：parsing, antlr

我需要解析第三方应用程序生成的文件。使用 ANTLR，我构建了一个似乎工作正常的解析器，直到遇到以下问题。

文件类型是基于行的，并使用几个关键字来定义层次结构；所谓的“块”，它们本身可以有子块，等等。根据当前块的类型，不同的行具有特殊的含义，例如在一个特定的块中，第 5 行（相对于块的开始）包含文件的作者，在另一行中，第 3 行是文件名，等等。所有这些本质上都是字符串，即用户可以在创建文件时输入任何他们想要的数据；但是它们是字符串的事实只能通过行号隐含地知道。

因为没有引号或任何东西来识别这些字符串，所以我的词法分析器偶尔会标记这些文本的一部分（如数字或与关键字相同的单词），结果我无法可靠地从解析器规则中的标记。

是否可以像我尝试的那样使用解析器生成器来处理这种文件？由于我对解析器的构造不是很精通，我希望有一个简单的解决方法或 ANTLR 的功能可以帮助克服这个小问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:26:38.653

不要使用 ANTLR 或 Yacc 或任何其他类似工具来解析此类语法（没有不同且与上下文无关的预定义标记集）。

无词法分析的方法（如[Packrat](http://bford.info/packrat/)或任何其他解释[PEG](http://en.wikipedia.org/wiki/Parsing_expression_grammar)的方式）会更好。

周围有许多 Packrat 实现，在没有任何第三方工具的情况下，用任何语言编写一个临时递归下降 PEG 解析器并不难，特别是对于没有特定性能要求的琐碎语法。

# c# - 非静态类比静态类有什么优势？

> ID：10717469
> 
> 赞同：6
> 
> 时间：2012-05-23T09:51:21.203
> 
> 标签：c#, .net

非静态类比静态类有什么优势？

不需要实例化静态类。所以我们可以直接使用`ClassName.MemberName`，那么非静态类有什么用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:54:30.537

静态类与非静态类基本相同，但有一个区别：静态类不能实例化。换句话说，您不能使用 new 关键字来创建类类型的变量。因为没有实例变量，所以您可以通过使用类名本身来访问静态类的成员

静态类只有一个类本身的实例，因此您不能创建静态类的多个实例。

查看您的问题，如果类是静态的，则无法为以下属性设置两个不同的值，因为`ClassName`内存中只有一个实例

```
ClassName.MemberName 
```

更多信息在

[http://msdn.microsoft.com/en-us/library/79b3xss3.aspx](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:56:16.387

假设您需要存储[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)员工的信息和操作。

```
class Employee
{  
    string Name {get; set;}
    double HourlyRate {get; set;}
    double CalculatePay(int hoursWorked) { . . . }
} 
```

现在，假设您的程序需要同时比较两个员工？

确切地！使用非静态员工类，您可以实例化 Employee 类的两个（或更多）[实例](http://en.wikipedia.org/wiki/Instance_%28computer_science%29)，每个[对象](http://en.wikipedia.org/wiki/Object_%28computer_science%29)代表一个不同的 Employee。

你不能这样做，雇员是静态的。

例如

```
void CompareEmployees(Employee empA, Employee empB)
{
    if(empA.HourlyRate < empB.HourlyRate)
        Console.WriteLine("Employee {0} has a higher rate than {1}", empA.Name, empB.Name);

    else if(empA.HourlyRate > empB.HourlyRate)
        Console.WriteLine("Employee {0} has a higher rate {1}", empb.Name, empA.Name);
    else
        Console.WriteLine("{0} and {1} have the same rate", empb.Name, empA.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:00:40.063

将一个类视为建筑蓝图，将该类（对象）的实例视为根据蓝图中的设计建造的建筑物。

给定一个蓝图，您可以创建许多建筑物。这些建筑中的每一个都有相同的结构，但每个都是独立的——一个可以打开它的门，而另一个可以关闭它的门。

静态类就像一个蓝图，永远不能用来建造任何房子。你仍然可以做一些事情，比如把它撕掉或者把咖啡洒在上面，但是你永远不能打开蓝图上的门，因为它没有真正的门，只有门的设计。

描述这种情况的另一种方式是考虑“状态”。建筑物（对象）具有某种状态（例如门是否打开），并且每个建筑物的状态可以不同（例如它自己的门是否打开）。蓝图（类）也可以具有（静态）状态（例如咖啡是否洒在上面），但这与根据蓝图建造的建筑物相关的状态是不同的并且是分开的。

```
public class House {
    private static boolean isCoffeeSpilt;

    private boolean isDoorOpen;

    public static void spillCoffee() {
        House.isCoffeeSpilt = true;
    }

    public void openDoor() {
        isDoorOpen = true;
    }
}

public static class Program {
    public static void main(String[] args) {
        House redHouse = new House();   // 1
        House blueHouse = new House();  // 2

        redHouse.openDoor();            // 3

        House.spillCoffee();            // 4
    }
} 
```

`House`在上面的示例中，如果是静态类，则第 1、2 和 3 行是不可能的。请注意，在while`openDoor`的实例上调用的是在类本身上调用。另请注意，在第 4 行的点，红房子的门是开着的，但蓝房子的门仍然是关着的。`House``spillCoffee`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:56:14.523

非静态类的一个优点是静态类对单元测试来说很糟糕——它们不容易被模拟，而且它们不支持接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T10:04:23.220

静态类不能被实例化（技术上它是实例化，但只有一次），并且静态构造函数“通常”在第一次访问该类时被调用，这可能难以跟踪和协调。如果您想要一个只收集一些实用方法的类，则静态类很好。.net 框架中的数学就是一个很好的例子。它们对于[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)也很有用。除此之外，我不使用它们。

如果您需要单个实例，并且不想被绑定到静态类的约束，那么单例模式非常有用。一篇关于单例和静态类之间区别的[好文章。](http://www.dotnetperls.com/singleton-static)

当然，一个非静态类必须被实例化，存储在一个变量中并且可以被多次实例化。

例子：

一个静态类，只是加载文件的辅助方法：

```
static class TextureHelper
{
   public static byte[] LoadFromFile(string aFileName);
} 
```

一个单例，它是创建纹理的主要点。

```
public sealed class TextureManager
{
   public static TextureManager Instance{get;set;}

   public Texture CreateTexture();
} 
```

一个实际的纹理，我的应用程序中可能有很多。

```
public class Texture
{

} 
```

# ruby-on-rails - link_to 与同一页面上的其他 link_to 失败，但单独工作

> ID：10717473
> 
> 赞同：0
> 
> 时间：2012-05-23T09:51:30.557
> 
> 标签：ruby-on-rails, rails-routing, actionview

环境：

*   导轨 3.2.3
*   Mac OS X 狮子
*   Ruby-1.9.3-p194 (MRI)

我有一个 rails 应用程序，我使用 app/views/layouts/application.html.erb 作为一些我用作菜单选项的链接的“左导航窗格”。

菜单中有两个使用 link_to 的链接（此处为简洁起见）。如果我删除一个链接并运行该应用程序，则剩余的链接会执行它应该做的事情。如果我删除第二个链接并恢复第一个链接，则第一个链接会执行 IT 应该做的事情。

但是，如果我同时在菜单中有两个链接，单击其中一个将起作用，但单击第二个会产生运行时错误。

使用 Pry 和 Rails 源代码本身 (3.2.3)，我已经确定了框架中发生错误的位置。异常发生在 actionpack-3.2.3/lib/action_view/template.rb 中，并且发生在以下代码行的 render 方法中：

```
def render(view, locals, buffer=nil, &block)
  ActiveSupport::Notifications.instrument("!render_template.action_view", :virtual_path => @virtual_path) do
    compile!(view)
    view.send(method_name, locals, buffer, &block)   # <----ERROR OCCURS HERE
  end
rescue Exception => e
  handle_render_error(view, e)
end 
```

method_name 的值 = _app_views_layouts_application_html_erb___1387085669206687706_70334317584180

*视图上*有一个同名的方法。执行“发送”时，会生成以下异常。

```
ActionController::RoutingError: No route matches {:action=>"signup_for_role",       
:controller=>"assignments", :club_id=>nil, :member_id=>[#<Member id: 2, first_name: 
"Joseph", last_name: "Smith", start_date: "2012-01-01", end_date: "9999-12-31", 
created_at: "2012-04-07 13:58:46", updated_at: "2012-05-06 21:54:12", club_id: 2, email:    
"joe.smith@gmail.com", assignable: true, address_one: nil, address_two: nil, city: nil, 
state: nil, zip_code: nil, phone: nil, mobile_phone: nil>]} 
```

因为方法中的代码是由 Rails 生成的，而不是在源代码文件中，所以我无法使用 Pry 单步执行它；我只能“发送”消息并查看结果。

这是布局中的代码，其中包含有问题的两个链接：

```
<!DOCTYPE html>
<html>
  <head>
    <title>MyApp</title>
    <%= stylesheet_link_tag    "application" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <div style='padding-left:10px;  margin-top:10px; ' >
      <div class='container' style='margin-top:50px; margin-left:50px;padding-right:200px; '>

        <!-- This link_to works, whether alone, or when the other link_to is present -->
        <%=  link_to "Sign Up for a Role", signup_for_role_club_member_assignments_path(params[:club_id], current_user_as_member) %>  
        <br/><br/>

        <!-- This link_to fails when both link_to's are present, but works when the other link_to is removed. -->
        <%= link_to "Clubs", clubs_path %><br>

      </div>
      <!-- ***************************************************************** -->
      <!-- Yield below... this is where the currently selected view displays -->
      <!-- ***************************************************************** -->
      <div class='container' style='margin-left:200px'  >
        <%= yield %>
      </div>
    </div>
  </body>
</html> 
```

最后，这是我的 routes.rb 文件：

```
Rolemaster::Application.routes.draw do

  resources :sessions
  resources :enrollments
  resources :logs

  resources :clubs do
    resources :members do
      resources :assignments do
        collection do
          get 'signup_for_role'
          get 'display_success'
          get 'past_activity'
        end
      end
      resources :absences 
    end
    resources :roles 
    resources :role_groups  

    resources :meetings do
      get 'forassignment', :on => :collection
      get 'print'
      resources :assignments
    end

    resources :assignments do
      post 'generate', :on => :collection 
    end
    resources :absences do
      get 'list', :on => :collection
    end
  end  

  resources :users do
    put "update_password" => "users#update_password"
    put "update_email" => "users#update_email"
    get "edit_password" => "users#edit_password"
    get "edit_email"    => "users#edit_email"
  end

  match "agendas/print"  
  get "enrollments/new"
  post "enrollments/create"
  get "log_in" => "sessions#new", :as => "log_in"
  get "log_out" => "sessions#destroy", :as => "log_out"
  get "sign_up" => 'users#new', :as => 'sign_up'
  get "test/email"
  get "sessions/revoke_admin"
  get "sessions/revoke_super_user"

  get "admins" => "admins#index"
  root :to => 'sessions#new'
end 
```

任何帮助是极大的赞赏。到目前为止，我可能已经为此花费了 20 个小时或更长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:42:39.420

总是阅读错误信息，真相就在那里）

```
params[:club_id] is nil 
```

# mysql - 无法运行迁移

> ID：10717477
> 
> 赞同：1
> 
> 时间：2012-05-23T09:51:50.890
> 
> 标签：mysql, migration, gem

我跑

```
 rake db:create 
```

并得到奇怪的错误

```
 rake aborted!
   126: ═х эрщфхэ єърчрээ√щ ьюфєы№.   - C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-
   0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so 
```

我试图重新安装捆绑器。是宝石问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:10:38.927

要解决此问题，请参考以下链接： http: [//maxivak.com/installing-mysql2-gem-on-ruby-1-9-2-and-rails-3-0-5-on-windows/](http://maxivak.com/installing-mysql2-gem-on-ruby-1-9-2-and-rails-3-0-5-on-windows/)

您需要通过 Rails DevKit 包含 mysql-connector。

# c# - EF Codefirst 方法“afterModelCreating”是否存在？

> ID：10717482
> 
> 赞同：0
> 
> 时间：2012-05-23T09:52:08.427
> 
> 标签：c#, code-first

我对 EF CodeFirst 方法有疑问。创建数据库后我需要创建索引。但是方法 OnModelCreating 被调用得太早（数据库还不存在）。有没有“AfterModelCreating”方法？

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
     base.OnModelCreating(modelBuilder);
     this.Database.ExecuteSqlCommand(String.Format("CREATE INDEX IX_{0} ON {1} ({0})", "Text", "Table")); 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:06:11.307

在 4.3 之前的 EF 版本中，您应该配置**Database Initializer**

```
System.Data.Entity.Database.SetInitializer<YourDbContext>(new YourDbInitializer()); 
```

初始化器类可能如下所示：

```
public class YourDbInitializer : DropCreateDatabaseIfModelChanges<YourDbContext>
{
    protected override void Seed(DiorContextBase context)
    {
        context.Database.ExecuteSqlCommand(
                "CREATE UNIQUE NONCLUSTERED INDEX Username_Unique " +
                "ON dbo.Users(username)");
    }
} 
```

在最新的 EF 版本中使用迁移[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# c++ - 在集合上使用 lambda 表达式和 find_if

> ID：10717485
> 
> 赞同：3
> 
> 时间：2012-05-23T09:52:24.930
> 
> 标签：c++, stl, lambda

我有一个容器对象：

```
R Container; 
```

R 是类型`list<T*>`或`vector<T*>`

我正在尝试编写以下函数：

```
template<typename T, typename R>
T& tContainer_t<T, R>::Find( T const item ) const
{   
typename R::const_iterator it = std::find_if(Container.begin(), Container.end(),  [item](const R&v) { return item == v; });
if (it != Container.end())
    return (**it);
else
    throw Exception("Item not found in container");
} 
```

尝试该方法时（v 是我的类的对象）

```
double f = 1.1;
v.Find(f); 
```

我明白了`binary '==' : no operator found which takes a left-hand operand of type 'const double' (or there is no acceptable conversion)`

我对 lambda 表达式语法以及我应该在那里写什么感到困惑，但找不到任何友好的解释。

怎么了 ？10 倍。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:06:29.230

缺少一些上下文，但我注意到：

*   你回来`**it`了，所以你可能想比较`*v==itemt`
*   你通过`const R&v`我怀疑你的意思`const T&v`进入 lambda
*   您使用了 const_iterator，但返回了非常量引用。那是不匹配
*   我做了一些参数 const& 以提高效率（并支持不可复制/不可移动的类型）

这是工作代码，去掉了缺少的类引用：

```
#include <vector>
#include <algorithm>
#include <iostream>

template<typename T, typename R=std::vector<T> >
T& Find(R& Container, T const& item ) 
{   
    typename R::iterator it = std::find_if(Container.begin(), Container.end(),  [&item](const T&v) { return item == v; });
    if (it != Container.end())
        return *it;
    else
        throw "TODO implement";
}

int main(int argc, const char *argv[])
{
    std::vector<double> v { 0, 1, 2, 3 };
    Find(v, 2.0); // not '2', but '2.0' !
    return 0;
} 
```

# php - 基于ID和ParentID的php排序

> ID：10717487
> 
> 赞同：0
> 
> 时间：2012-05-23T09:52:26.777
> 
> 标签：php, arrays, multidimensional-array

**我有以下数组结构：**

```
 |  ID  |  CategoryName  | ParentID 
    _________________________________
       1  |  Movies        | -1
    _________________________________
       2  |  Series        | -1
    _________________________________
       3  |  ActionMovies  |  1
    _________________________________
       4  |  HorrorMovies  |  1
    _________________________________
       5  |  ComedySeries  |  2
    _________________________________
       6  |  TVShows       | -1 
```

我的目标是达到以下结构

**目标：**

```
 |  ID  |  CategoryName  | ParentID 
    _________________________________
       1  |  Movies        | -1
    _________________________________
       3  |  ActionMovies  |  1
    _________________________________
       4  |  HorrorMovies  |  1
    _________________________________
       2  |  Series        | -1
    _________________________________
       5  |  ComedySeries  |  2
    _________________________________
       6  |  TVShows       | -1 
```

或用文字解释：

*   父类别有`ParentID = -1`（示例电影）
*   所有类别均保留其原始 ID 号
*   应直接列在其 ParentCategory 之后（示例 ActionMovies）
*   RootCategories without Children，列在数组的末尾。（例如电视节目）

我怎样才能用 PHP 做到最好？我无权访问原始的 Mysql 查询，所以这不是一个选项:)

我已经开始使用此代码，但我不确定它是正确的路径，并且只需最少的努力/可读性

```
 $tmpList = Categories_Models_Main::getAllCategories();

    $categoryData = array();
    foreach ($tmpList as $index => $categoryObject) {
        $categoryData[] = array('id' => $categoryObject->id,
                                 'CategoryName' => $categoryObject->parentId,
                                 'name' => $categoryObject->name);

    }

    ///let us assume $categoryData is original state.

    ///Beginning of manipulation and re-sorting of $tmpList

    foreach ($categoryData as $key => $value) {

        $mainId[$key] = $value['id'];

        $parentId[$key] = $value['parentId'];

    }

    array_multisort($parentId, $mainId, $categoryData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:09:03.100

将主数组一分为二，一个是那些没有子节点的节点，另一个是其余的项目。

使用 array_multisort 函数对项目数组进行排序，并使用您想要的标准对没有子项的类别数组进行排序。最后一步是将没有子元素的数组推送到另一个数组。

这种形式不是最有效的，但有第一种方法是有效的，在此之后，您可以节省时间优化代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:11:23.923

```
$input = array(
    array("foo", "bar", "5"),
    array("barr", "baz", "9"),
    array("nyan", "nyu", "2")
);

usort($input, function($a, $b) {
    if($a[2] < $b[2]) {
        return -1;
    } else if($a[2] > $b[2]) {
        return 1;
    } else {
        return 0;
    }
});

var_dump($input); 
```

你的意思是这样的吗？这个想法是使用您知道的条件手动比较数组的内容。由于要排序的东西是唯一的，因此必须始终实现*如何排序的逻辑。*使用 PHP，PHP 的排序功能大部分时间都能正确执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:37:32.543

我很确定这不能回答你的问题，但可能会给你一些想法，让你的生活更轻松。这是解决问题的 javascript 方法，但这样您甚至不必考虑对任何内容进行排序。您只需提供父母和孩子，它就会为您分类并准备好使用。在我看来是一个非常好的方式。然而，它可能与您尝试做的事情无关，但对于其他一些类似的问题，您可能会将其视为解决方案：[https ://developers.google.com/chart/interactive/docs/gallery/orgchart](https://developers.google.com/chart/interactive/docs/gallery/orgchart)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-05T10:35:52.090

解决这个问题的唯一方法是使用自下而上的方法（我指的是金字塔）。

**解释**

我们需要从数组中没有父项的行（条目）开始。就我而言，它是任何具有“parent_id = 0”的元素。一旦我们有了这些，我们需要为每个父元素构建子元素。

后一部分将通过调用排序方法递归地完成，直到我们正在处理的元素没有子元素。排序方法的结果将向下传递到前一个数组点，直到数组完成。

**代码**

```
Class Categories {
    private $cats;

    public function getAllCategoriesSorted() {
        /**
         * $this->cats = [
         *      'id' => x, 'parent_id' => x
         * ];
         */
        $this->cats = Category::get()->toArray();

        # find categories with no parents
        $keys = array_keys(array_column($this->cats, 'parent_id'), 0);

        $return = [];
        # loop through each and populate each one
        foreach ($keys as $key) {
            $return[$this->cats[$key]['id']] = $this->sortCategories($this->cats[$key]);
        }

        dd($return);
    }

    private function sortCategories($currentElement) {
        # we need to check if current element has any children
        $keys = array_keys(array_column($this->cats, 'parent_id'), $currentElement['id']);

        if ($keys === false || empty($keys)) {
            # we are dealing with childless element, we should return it as it is
            return $currentElement;
        }

        # we are dealing with element that has children, we need to loop through each child
        $currentElement['children'] = [];

        foreach ($keys as $key) {
            $currentElement['children'][$this->cats[$key]['id']] = $this->sortCategories($this->cats[$key]);
        }

        return $currentElement;
    }
} 
```

**示例结果**

```
array:2 [▼
  65 => array:4 [▼
    "id" => 65
    "name" => "Parent 1"
    "parent_id" => 0
    "children" => array:14 [▼
      66 => array:4 [▼
        "id" => 66
        "name" => "Child 1"
        "parent_id" => 65
        "children" => array:22 [▶]
      ]
      87 => array:4 [▼
        "id" => 87
        "name" => "Child 2"
        "parent_id" => 65
        "children" => array:31 [▶]
      ]
      117 => array:4 [▶]
      118 => array:4 [▶]
      120 => array:4 [▶]
      124 => array:4 [▶]
      125 => array:4 [▶]
      127 => array:4 [▶]
      225 => array:4 [▶]
      305 => array:4 [▶]
      434 => array:4 [▶]
      321 => array:4 [▶]
      348 => array:4 [▶]
      468 => array:4 [▶]
    ]
  ]
  64 => array:4 [▼
    "id" => 64
    "name" => "Parent 2"
    "parent_id" => 0
    "children" => array:5 [▼
      128 => array:4 [▶]
      132 => array:4 [▼
        "id" => 132
        "name" => "Child 3"
        "parent_id" => 64
        "children" => array:22 [▼
          202 => array:3 [▶]
          203 => array:3 [▼
            "id" => 203
            "name" => "Child 4"
            "parent_id" => 132
          ]
          204 => array:3 [▶]
          205 => array:3 [▶]
          206 => array:3 [▶]
          207 => array:3 [▶]
          208 => array:3 [▶]
          209 => array:3 [▶]
          210 => array:3 [▶]
          211 => array:3 [▶]
          212 => array:3 [▶]
          213 => array:3 [▶]
          214 => array:3 [▶]
          215 => array:3 [▶]
          216 => array:3 [▶]
          217 => array:3 [▶]
          218 => array:3 [▶]
          220 => array:3 [▶]
          221 => array:3 [▶]
          222 => array:3 [▶]
          223 => array:3 [▶]
          224 => array:3 [▶]
        ]
      ]
      134 => array:4 [▶]
      394 => array:4 [▶]
      454 => array:4 [▶]
    ]
  ]
] 
```

# ruby - 模式：将未经检查的对象作为 ruby 方法的默认参数传递

> ID：10717489
> 
> 赞同：0
> 
> 时间：2012-05-23T09:52:32.957
> 
> 标签：ruby, refactoring

我正在重构一些代码，我发现了类似的东西

**编辑**：

设置是存储在我的数据库中的哈希。因此，想象一下存储在数据库中的键-> 值结构化。所以如果它不可访问，它会产生一个异常

```
def MyClass

 def my_method(foo = Settings[:foobar]
   foo
 end

 def your_method
   my_method
 end 
```

结尾

我认为它不安全，因为没有检查 Settings[:foobar] 是否存在。我的问题是：

像这样写会更安全吗：

```
def MyClass
   def my_method(foo)
     foo unless foo.nil?
   end
   def your_method
       my_var = Settings[:foobar] rescue "default value"
       my_method my_var
   end
end 
```

如果没有，还有其他好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:46:59.063

如果`Settings`是哈希，则`Settings[:foo]`返回`nil`. `foo unless foo.nil?`同样的事情也是如此。

另一种方法是使用该`||=`方法。

```
def method(foo)
   foo ||= Settings[:foo]
   ...
end 
```

但我看不出有什么理由比你所拥有的更好......

```
def method(foo)
   foo ||= Settings[:foo] || "my really default default"
   ...
end 
```

...除非您可以在缺少设置的情况下默认设置另一个值，否则您可以执行此类操作。

从头开始……无论如何都不会阻止你这样做……

```
def method(foo = Settings[:foo])
   foo ||= "my really default default"
   ...
end 
```

希望这在一些小的方面有所帮助。

# jquery - 如何创建一个变量来获取 html 页面上的特定图像 url 并使用 jQuery 将其作为固定图像输出到 pinterest？

> ID：10717492
> 
> 赞同：0
> 
> 时间：2012-05-23T09:52:45.820
> 
> 标签：jquery, url-routing, pinterest

我正在尝试在我的网站上使用 Pinterest 的 pin it 按钮。Pinterest“创建按钮”部分的说明是直截了当的，除了我只能选择输入我想要固定的图像的 url。这可能非常费力和多余，尤其是对于在拥有超过一百个页面（包含产品图像的页面）的网站上工作的人。所以我想我会使用一些Javascript（最好是jQuery）来解决这个问题。

这是我的代码。

HTML：

```
<div id="pinterest"></div>
<!--Sample Image-->
<div id="pic">
    <img id="sampleimage4div" src="images/wonderfulpicture.jpg" />
</div>

<!--SCRIPTS-->
<script type="text/javascript" src="http://assets.pinterest.com....
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/... etc 
```

jQuery 脚本

```
<script type="text/javascript">
$(document).ready(function(){
    var currentURL = $(location).attr('href');
    var description = encodeURIComponent($(this).attr('title'));
    var imageURL = encodeURIComponent($('#sampleimage4div').attr('src')+currentURL);

$('#pinterest').append('<a href="http://pinterest.com/pin/create/button/?url='+currentURL+'&media='+imageURL+'&description='+description+'"class="pin-it-button"count-layout="horizontal"><img border="0" src="http://assets.pinterest.com/images/PinExt.png"title="Pin It"/></a>');        
}); 
</script> 
```

我能够更改/自定义页面“URL”和“描述”，但由于某种原因我无法获取图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:04:35.187

```
var currentURL = $(location).attr('href');
var imageURL = encodeURIComponent($('#sampleimage4div').attr('src')+currentURL); 
```

这些代码行是问题所在。采用

```
var currentURL = $(location).attr('host')
var imageURL = encodeURIComponent("//" + currentURL + $('#sampleimage4div').attr('src')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:02:38.563

一旦使用这个：

```
$('#pinterest').append('<a href="anything"><img src='+imgvariable+'></a>'); 
```

你也可以在这里使用：

```
$('#sampleimage4div').attr('src')+currentURL //at the place of this 
```

采用

```
$('#sampleimage4div').attr('src','src_which_you_want') 
```

# android - Android 4.0 中的 WebView 错误

> ID：10717494
> 
> 赞同：0
> 
> 时间：2012-05-23T09:52:50.737
> 
> 标签：android, webview, sd-card

我制作了一个应用程序，我在其中从 sd 卡读取 html 文件并在 webview 中显示它。这在 Android 3.2 中成功运行，但是当我将其更改为 4.0 并在 Micromax 平板电脑上运行以进行测试时。它给出了一个错误“链接可能暂时关闭或它已移动到新地址”即使它也没有在模拟器中运行。你能告诉我 4.0 不支持从 SD 卡访问文件吗？或者有什么问题请建议。

代码片段是：

```
WebView webComp = (WebView) findViewById(R.id.webView);
WebSettings webSettings = webComp.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setSupportZoom(false);
webSettings.setAllowFileAccess(true);
webSettings.setLoadsImagesAutomatically(true);
webSettings.setSavePassword(false);
webSettings.setSaveFormData(false);
webSettings.setJavaScriptEnabled(true);        

webComp.setWebViewClient(new HelloWebViewClient());                    

    webComp.loadUrl("file://sdcard/Tab-Demo/index10.html");            
    } 
}

class HelloWebViewClient extends WebViewClient 
{ 
    @Override 
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
        view.loadUrl (url); 
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:08:19.493

您可以使用 ContentProvider 将本地文件提供给 WebView，如下所示： http: [//blog.tourizo.com/2009/02/how-to-display-local-file-in-android.html](http://blog.tourizo.com/2009/02/how-to-display-local-file-in-android.html)

更改覆盖的**openFile**以将根设置为 SD 卡的文件提供服务

```
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {
    File file = new File(Environment.getExternalStorageDirectory(), uri.getPath());
    ParcelFileDescriptor parcel = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
    return parcel;
} 
```

使用此方法，您可以访问文件

```
webComp.loadUrl("content://Tab-Demo/index10.html"); 
```

不要忘记将 ContentProvider 添加到您的清单中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T09:56:15.900

检查平板上的文件路径是否相同

# c# - Asp.Net MVC 2.0 应用程序中的全球化

> ID：10717501
> 
> 赞同：0
> 
> 时间：2012-05-23T09:53:13.873
> 
> 标签：c#, asp.net, asp.net-mvc, user-interface

我正在开发 asp.net mvc 2.0 Web 应用程序，我想在其中提供多种语言的支持。目前应用程序以英语运行，但我希望会有一个语言下拉列表，如果用户选择法语，那么我的应用程序语言应该转换为法语。任何想法如何实现这个或任何教程，请与我分享。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:40:02.770

在您的 ASP.NET MVC 代码中，您可以利用 System.Globalization 类，该类将对所有字符串使用 App_LocalResources。在决定选择什么之前，有几件事需要了解：

URL路由是常用的，它是一种使用路由机制将其存储在URL中的非常简单且非常强大的方式。 [http://adamyan.blogspot.com/2010/07/addition-to-aspnet-mvc-localization.html](http://adamyan.blogspot.com/2010/07/addition-to-aspnet-mvc-localization.html)

您可以选择“使用 Session 进行本地化”，这不是一个流行的选项，但被某些人选择，并且在下面的文章中，Session 用于存储当前文化以对内容进行本地化：

[http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html](http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html)

SO 讨论的内容是相同的： [Localization & Globalization in asp.net mvc 2.0](https://stackoverflow.com/questions/4660688/localization-globalization-in-asp-net-mvc-2-0)

# c++ - 是否有用于检测 C++11x 支持的预处理器指令？

> ID：10717502
> 
> 赞同：53
> 
> 时间：2012-05-23T09:53:15.460
> 
> 标签：c++, gcc, c-preprocessor, preprocessor-directive

如果有一些代码我想尽可能多地使用 C++11x 扩展，但如果不支持则有一个后备。目前 OSX 版本的 GCC 和 VisualC 编译器几乎不支持 C++11x，所以我使用：

```
#if (defined(__APPLE__) || (defined(_WIN32)))
   ...fallback code without C++11x ...
#else
   ... code using C++11x ...
#endif 
```

这可行，但并不是真正正确的做法，尤其是因为 MacPorts 中的 gcc 编译器确实支持 c++11x。

有`#define C11X_SUPPORTED`类型宏吗？也许只有 GCC 才有？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-23T10:04:54.260

`__cplusplus`应该`199711L`在支持 C++11 的编译器`201103L`中定义为 C++11 之前的编译器。这在实践中是否有很大帮助是另一个问题：大多数编译器只完成了一半，因此不应将其定义为`201103L`，即使它们支持您感兴趣的功能。编译器撒谎并非闻所未闻：a例如，将其定义为`199711L`但不支持`export`模板的编译器。但是功能测试没有标准功能。

最简单的解决方案是在确定所有编译器都支持之前不要使用任何特定的新特性。无论如何，您必须编写并支持回退代码；为什么要维护两个版本。该规则的一个例外可能是影响性能的新特性：编译器是否支持移动语义。在这种情况下，我建议您根据编译器文档和个人测试自己编写一个依赖于编译器的包含文件；仅仅因为编译器可能会记录它支持特定功能并不意味着它的支持是没有错误的。只需为每个目标编译器创建一个目录，将这个文件放在那里并在你的 makefile 或项目文件中指定适当的`-I`或`/I`选项。

你的测试应该是这样的：

```
#ifdef HAS_MOVE_SEMANTICS
...
#endif 
```

而不仅仅是编译器，版本或其他。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-23T09:54:10.780

您可以检查`__cplusplus`宏的值。对于 C++11，它大于`199711L`.

所以像

```
#if __cplusplus > 199711L

#endif 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-21T02:24:18.983

[Boost.Config](http://www.boost.org/doc/libs/1_53_0/libs/config/doc/html/index.html)库提供了细粒度的[预处理器宏](http://www.boost.org/doc/libs/1_53_0/libs/config/doc/html/boost_config/boost_macro_reference.html)，可用于根据给定 C++11 功能的存在进行有条件的编译。

（对于编译器而言，C++11 支持不一定是全有或全无的主张。例如，考虑 Microsoft 樱桃如何根据他们认为最有利于客户的内容来[选择 Visual Studio 2012 中包含的 C++11 功能](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)。 )

# python - 是否可以使用 read_csv 仅读取特定行？

> ID：10717504
> 
> 赞同：8
> 
> 时间：2012-05-23T09:53:22.890
> 
> 标签：python, csv, pandas

我有一个如下所示的 csv 文件：

```
TEST  
2012-05-01 00:00:00.203 ON 1  
2012-05-01 00:00:11.203 OFF 0  
2012-05-01 00:00:22.203 ON 1  
2012-05-01 00:00:33.203 OFF 0  
2012-05-01 00:00:44.203 OFF 0  
TEST  
2012-05-02 00:00:00.203 OFF 0  
2012-05-02 00:00:11.203 OFF 0  
2012-05-02 00:00:22.203 OFF 0  
2012-05-02 00:00:33.203 OFF 0  
2012-05-02 00:00:44.203 ON 1  
2012-05-02 00:00:55.203 OFF 0 
```

并且无法摆脱`"TEST"`字符串。

是否可以检查一行是否以日期开头并只读那些日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:23:48.343

```
from cStringIO import StringIO
import pandas

s = StringIO()
with open('file.csv') as f:
    for line in f:
        if not line.startswith('TEST'):
            s.write(line)
s.seek(0) # "rewind" to the beginning of the StringIO object

pandas.read_csv(s) # with further parameters… 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T10:10:06.580

当您`row`从 中获取`csv.reader`，并且可以确定第一个元素是字符串时，您可以使用

```
if not row[0].startswith('TEST'):
    process(row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:17:15.827

[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html?highlight=read_csv#pandas.io.parsers.read_csv](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html?highlight=read_csv#pandas.io.parsers.read_csv)

> skiprows : 类列表或整数要跳过的行号（0-indexed）或要跳过的行数（int）

通过`[0, 6]`以跳过带有“TEST”的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:49:29.943

另一种选择，因为我也遇到了这个问题：

```
import pandas as pd
import subprocess
grep = subprocess.check_output(['grep', '-n', '^TITLE', filename]).splitlines()
bad_lines = [int(s[:s.index(':')]) - 1 for s in grep]
df = pd.read_csv(filename, skiprows=bad_lines) 
```

它的便携性不如@eumiro（阅读：可能不适用于Windows）并且需要两次读取文件，但具有您不必将整个文件内容存储在内存中的优点。

你当然可以做与 Python 中的 grep 相同的事情，但它可能会更慢。

# c++ - OpenMP - 并行化嵌套循环

> ID：10717512
> 
> 赞同：2
> 
> 时间：2012-05-23T09:53:42.267
> 
> 标签：c++, multithreading, openmp

我在尝试重新编码嵌套的 for 循环以使其并行化时遇到问题：

```
for(i=0; i<n; i++)
{
    for(j=0; j<n; j++)
    {
        if(asubsref(struct1,j) > 0)
            asubsref(struct2,j) = asubsref(struct3,j) + 1;
    }
    for(j=0; j<n; j++)
        asubsref(struct1,j) = asubsref(struct2,j) - asubsref(struct3,i);
} 
```

Struct1/struct2 是两个分别具有宽度/高度/int-float 数组的结构。struct3 是一个浮点结构。

到目前为止，我的尝试是将它们变成两个不同的循环，但可惜，它不起作用，因为我会得到很多不正确的结果：

```
#pragma omp parallel
{
#pragma omp for private(j)
   for(i=0; i<n; i++)
   {
     for(j=0; j<n; j++)
     {
       if(asubsref(struct1,j) > 0)
         asubsref(struct2,j) += 1;
     }
   }
#pragma omp for private(j)
   for(i=0; i<n; i++)
   {
     k = asubsref(struct3,i);
     for (j=0; j<n; j++)
     {
       asubsref(struct1,j) -= k;
     }
   }
} 
```

我不是在寻找答案，而是在寻找一些指导来帮助我思考如何解决这个问题/提示答案等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:38:15.630

我在这段代码中看到的是三个数组：

```
array1: asubsref(seed,0) ... asubsref(seed,n-1)
array2: asubsref(bin,0) ... asubsref(bin,n-1)
array3: asubsref(w,0) ... asubsref(w,n-1) 
```

如果这个假设是正确的并且 asubsref 不会产生任何副作用，则可以推导出以下不变量：

> 循环执行结束后，array2[j] 增加数字 x，该数字是最大的数字，使得 i 从 0 到 x 的 array3[i] 之和小于 array1[j]。

这是你可以做的。首先，您可以合并两个最里面的循环，因为（*在我们的假设下*）它们的迭代是独立的：

```
for(i=0; i<n; i++)
{
    for(j=0; j<n; j++)
    {
        if(asubsref(seed,j) > 0)
            asubsref(bin,j) = asubsref(bin,j) + 1;
        asubsref(seed,j) = asubsref(seed,j) - asubsref(w,i);
    }
} 
```

然后交换最里面和最外面的循环

```
for(j=0; j<n; j++)
{
   for(i=0; i<n; i++)
   {
        if(asubsref(seed,j) > 0)
            asubsref(bin,j) = asubsref(bin,j) + 1;
        asubsref(seed,j) = asubsref(seed,j) - asubsref(w,i);
   }
} 
```

现在很明显，以下代码应该可以工作

```
#pragma omp parallel for (private i)
for(j=0; j<n; j++)
{
   for(i=0; i<n; i++)
   {
        if(asubsref(seed,j) > 0)
            asubsref(bin,j) = asubsref(bin,j) + 1;
        asubsref(seed,j) = asubsref(seed,j) - asubsref(w,i);
   }
} 
```

而拆分循环显然会破坏不变量。

# ios - Matt Gallagher 的 AudioStreamer 在播放状态之前从偏移量播放 mp3

> ID：10717514
> 
> 赞同：2
> 
> 时间：2012-05-23T09:53:47.257
> 
> 标签：ios, mp3, media, audiostreamer

我没有找到一个问题的解决方案：如何立即从偏移量播放 mp3 文件？

我只能播放文件然后发送**-(void)seekToTime:**但在这种情况下，声音开始并中断，然后从定义的偏移量开始。

我尝试在 ASStatusChangedNotification 上应用**seekToTime****方法**（在**AudioStreamerState**的不同情况下），但没有结果。

 ****upd：我认为这可能会在文件开始流式传输之后（播放之前）设置时间偏移。但是怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:49:47.607

我所做的是创建一种方法来寻找我想要运行的时间`[streamer start]`：

`while(streamer.bitRate == 0) { sleep(1); }`

如果您担心等待时间过长，您可以添加超时：通过循环的次数，或设置开始时间并将其与当前时间进行比较以跳出循环。

这篇博文有另一种看法： http: [//www.saygoodnight.com/2009/08/streaming-audio-to-the-iphone-starting-at-an-offset/](http://www.saygoodnight.com/2009/08/streaming-audio-to-the-iphone-starting-at-an-offset/)****

# java - 在 Java 中返回 Web 服务对象的多种类型

> ID：10717523
> 
> 赞同：0
> 
> 时间：2012-05-23T09:54:06.357
> 
> 标签：java

我在 Java 中使用 Web 服务。这是我的问题：

```
public Object execute(int servicecode)
{
    switch (servicecode)
    {
        case 1:
           return OBJECT_1;
        case 2:
           return OBJECT_2;
        case 3:
           return OBJECT_3;
    }
} 
```

*   我的函数返回 OBJECT_1、OBJECT_2、OBJECT_3。我希望客户了解：
    *   案例 1 对象=OBJECT_1
    *   案例 2 对象=OBJECT_2
    *   案例 3 对象=OBJECT_3

我如何在 Web 服务中做到这一点？我尝试在 Web 服务中使用继承，但无法获取 OBJECT_1、OBJECT_2、OBJECT_3 的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:55:07.540

是的，如果 OBJECT_1,OBJECT_2,OBJECT_3 有不同的类型，那么......你可以这样做......

* * *

```
public class Object {
// here we are creating a class who has all objects you want to return, 
    // this is called wrapper class
private Object_1 object_1;
private Object_2 object_1;
private Object_3 object_1;
public Object_1 getObject_1() {
    return object_1;
}
public void setObject_1(Object_1 object_1) {
    this.object_1 = object_1;
}
public Object_2 getObject_1() {
    return object_1;
}
public void setObject_1(Object_2 object_1) {
    this.object_1 = object_1;
}
public Object_3 getObject_1() {
    return object_1;
}
public void setObject_1(Object_3 object_1) {
    this.object_1 = object_1;
} 
```

}

```
public class Test{ 
public Object execute(int servicecode)
{
    Object object = new Object();
    switch (servicecode)
    {
        case 1:
           return object.setObject_1(object_1);
        case 2:
           return object.setObject_2(object_2);;
        case 3:
           return object.setObject_3(object_3);;
    }
} 
```

}

# jquery - 由于延迟，Jquery 超级菜单显示多个菜单

> ID：10717524
> 
> 赞同：0
> 
> 时间：2012-05-23T09:54:07.087
> 
> 标签：jquery, hover, megamenu

嗨，我为电子商务平台创建了一个 jquery megamenu。我已经设置好了，当你将鼠标悬停在顶层的 li 上时，它的所有兄弟姐妹 ul 都会消失，而相关的兄弟姐妹会出现。问题是，如果您将鼠标悬停在“手套”上，那么“头盔”很快就会出现“手套”，就好像有延迟一样。但是，如果您很快从“头盔”变为“手套”，它就可以正常工作。有任何想法吗？谢谢

这是 jquery 代码和网站链接 [http://www.firecrestmoto.co.uk/index.php](http://www.firecrestmoto.co.uk/index.php)

```
 // Add controller class to <li> on top level
      $('#menu.accordion ul li ul    li').parent().parent().parent().addClass('parentitem');

      // Hide and show entire category and sub categories at the same time
      $('#menu.accordion a').addClass('menu_closed');
       $('#menu.accordion a').hover(

    function(){
    $(this).addClass('menu_open');
    $(this).siblings('ul').fadeIn();
    $('#menu.accordion ul li ul').show();
    }
    );

      $('ul.parentitem').mouseleave(function(){
$(this).hide();
       });

      // Hover on <li> in the top level menu
    $('#menu.accordion li').hover(function(){
$(this).siblings('li').children('ul.parentitem').hide();
$(this).children('ul.parentitem').css('z-index','10000');
});

        // Leave the main menu div, all submenus disappear
         $('#menu').mouseleave(function(){
$(this).children('li').children('ul').hide();
        });

     // Add controller classes to <li> on each sub level
       $('#menu.accordion').children('li').addClass('topline');
        $('#menu.accordion ul.parentitem').children('li').addClass('finallines'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:27:59.237

我认为您触发了太多悬停事件-因此，如果您快速移动鼠标，则会发生很多事情。

当您将鼠标悬停在顶级菜单项上时，您将同时悬停在`<a>`和`<li>`上，因此

```
$('#menu.accordion a').hover( 
```

和

```
$('#menu.accordion li').hover( 
```

都会执行。

此外，[jQuery .hover()](http://api.jquery.com/hover/)采用：

```
hover( handlerIn(eventObject) , handlerOut(eventObject)  ) 
```

或者

```
hover( handlerInOut(eventObject)  ) 
```

因此，在您的情况下，您使用的是 handlerInOut ，因为您在 hover() 中仅使用了一个函数-因此该函数在鼠标进入和鼠标离开时触发。这意味着当您移入和移出顶级导航项时，会触发四个事件。

另外，请注意，这`$('#menu.accordion li')`不仅会匹配顶级项目，还会匹配`li`子菜单中的每个项目，并且您将悬停事件附加到每个项目。这事件**太多了**。

因此，不要同时悬停，而是尝试这样的事情：

```
$('#menu.accordion').children('li').hover(function(){
        // Add here your code for mouse enter
        $(this).siblings('li').children('ul.parentitem').hide();
        $(this).children('ul.parentitem').css('z-index','10000');
        $(this).find('a').addClass('menu_open');
        $(this).find('ul').fadeIn();
        // I'm not sure what the following is supposed to do...
        // ...you are showing ul in all sub-menus.
        $('#menu.accordion ul li ul').show();
    }, function(){
        // Add here your code for mouse leave
        $(this).find('a').removeClass('menu_open');
        $(this).children('ul.parentitem').css('z-index','0').hide();
    },
); 
```

您可能需要调整和清理上面的代码——这只是一个大概的想法。

# email - 如何在 MS-Outlook 2010 中显示 html 按钮元素？

> ID：10717530
> 
> 赞同：2
> 
> 时间：2012-05-23T09:54:34.150
> 
> 标签：email, outlook, outlook-2010

我写了一个邮件程序。邮件正文是纯html。

html 的所有元素（如 a、span、p、img 标记等）都显示在 MS Outlook 2010 的邮件输出中，但按钮除外。

只有文本（按钮的值）显示为纯文本。如果按钮有 onClick 事件，甚至不会触发 javascript 事件。

**注意：**它适用于 gmail、yahoo 等其他邮件服务。问题仅在 Outlook 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:08:10.573

我不确定 MS Outlook 2007 及以后的版本是否可以处理 HTML 按钮，因为它们使用 MS Words HTML 处理器（这不是最好的......）

关于尝试在电子邮件中使用 javascript - [Outlook 2007 中的 Javascript 点击事件](https://stackoverflow.com/questions/5106165/javascript-click-event-in-outlook-2007)

我也遇到过类似的问题...

杰克。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-30T14:45:12.343

javascript 被电子邮件客户端阻止，因为它没有保存。

有一些解决方案或多或少在 Outlook 中起作用：

[https://litmus.com/blog/a-guide-to-bulletproof-buttons-in-email-design](https://litmus.com/blog/a-guide-to-bulletproof-buttons-in-email-design)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-12T07:29:39.220

请使用下面提到的 HTML 代码，这在 Outlook 中效果很好。

```
<table cellpadding="0" align="left" cellspacing="0" style="border-radius:2px; background-color:#5794FF; color:#FFFFFF">
    <tbody>
        <tr>
            <td align="center" height="32" style="padding:0px 19px; height:32px; font-size:14px; line-height:12px">
                <a href="https://www.google.co.in/" target="_blank" style="text-decoration:none; color:#FFFFFF">Search Google</a>
            </td>
        </tr>
    </tbody>
</table> 
```

# objective-c - 仅调整 UIWebView 的大小/适合内容的高度？

> ID：10717538
> 
> 赞同：2
> 
> 时间：2012-05-23T09:55:14.880
> 
> 标签：objective-c, ios, uiwebview, scroll

我几乎完成了调整 UIWebView 的大小。我使用了委托方法：

**在 .h 中：**

```
@interface myController : UIViewController <UIWebViewDelegate> 
```

**在 .m 中：**

```
#pragma mark UIWebView delegate methods

- (void) webViewDidFinishLoad : (UIWebView *) aWebView
{
    CGRect frame = aWebView.frame;
    frame.size.height = 1;
    aWebView.frame = frame;
    CGSize fittingSize = [aWebView sizeThatFits:CGSizeZero];
    frame.size = fittingSize;
    aWebView.frame = frame;
} 
```

但我需要的是一个固定宽度和可变高度的 webview，具体取决于内容。前面的代码几乎没问题，但 webview 也可以水平扩展和滚动。我也试过这个：

```
[myWebView setUserInteractionEnabled:NO]; 
```

但它只会禁用滚动，不会调整内容。

请问如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:20:43.190

这可能会有所帮助。我很容易让它工作：

[https://stackoverflow.com/a/6104537/1413088](https://stackoverflow.com/a/6104537/1413088)

# mysql - 分组依据和选择列

> ID：10717541
> 
> 赞同：0
> 
> 时间：2012-05-23T09:55:24.210
> 
> 标签：mysql, sql, sql-server, oracle

我有以下查询

```
SELECT  McId, MAX(TimeDone) 
FROM    Trace 
WHERE   PcbId = 'C825514362' 
AND  DeviceId <> 0 GROUP BY McId 
```

但我还需要从以下列中获取`Program`值`DeviceId`，，`OrderNo`

是否有可能以某种方式将其组合在同一个查询中？

这个查询应该在 mssql 、 mysql 和 oracle 下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:13:12.803

好吧，我猜你想获取包含 TimeDone 最大值的行的 Program、DeviceId 和 OrderNo 的值。据我所知，您必须使用子查询来做到这一点。像这样的东西：

```
SELECT t.McID, t.Program, t.DeviceID, t.OrderNo, t.TimeDone
FROM Trace t,
   (SELECT MAX(TimeDone) as maxtime, McID
 FROM Trace 
 GROUP BY McID) maxresults
WHERE t.McID = maxresults.McID
AND t.TimeDone= maxresults.maxtime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:00:33.473

```
SELECT  
 McId, 
 MAX(TimeDone),
 Program,
 DeviceId,
 OrderNo
FROM  Trace
WHERE   PcbId = 'C825514362' AND  DeviceId <> 0
GROUP BY 
 McId,
 Program,
 DeviceId,
 OrderNo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:02:45.237

您是否尝试过以下构造？

```
SELECT McId, MAX(TimeDone),Program,DeviceId,OrderNo FROM Trace WHERE PcbId = 'C825514362' AND  DeviceId <> 0 GROUP BY McId,Program,DeviceId,OrderNo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:04:03.113

为什么不能将 Program,DeviceId,OrderNo 添加到 group by？

如果您回答它会产生更多行，因为“Program,DeviceId,OrderNo”的值与您希望显示的值不同？

您始终可以在 group by 上嵌入一个子查询以获取此值，但是同样，如果您有多种可能性，则需要定义规则以提出程序，例如

```
SELECT  McId, MAX(TimeDone), 
        (select top 1 program from trace t2 where t2.McId = trace.McId) as program
FROM  Trace
WHERE   PcbId = 'C825514362' AND  DeviceId <> 0
GROUP BY McId 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T10:12:51.647

三种解决方案。

1.  考虑到你想要`MAX`的`Program,DeviceId,OrderNo`

    ```
    选择麦克德，
           MAX（时间完成），
           MAX（程序），
           最大（设备 ID），
           MAX(订单号)
    从跟踪
    其中 PcbId = 'C825514362' AND DeviceId 0
    按麦克德分组；

    ```

2.  考虑到您希望剩余的列以逗号分隔，并`~`作为分隔符

    ```
    选择麦克德，
           MAX（时间完成），
           GROUP_CONCAT('~', Program, '~', DeviceId, '~', OrderNo)
    从跟踪
    其中 PcbId = 'C825514362' AND DeviceId 0
    按麦克德分组

    ```

3.  考虑到您想与 McId 一起分组

    ```
    选择麦克德，
           MAX（时间完成），
           程序，
           设备编号，
           订单号
    从跟踪
    其中 PcbId = 'C825514362' AND DeviceId 0
    按 McId、程序、DeviceId、OrderNo 分组；

    ```

# iphone - 在 UIImageView 中拖动和调整图像大小

> ID：10717547
> 
> 赞同：1
> 
> 时间：2012-05-23T09:55:35.777
> 
> 标签：iphone, objective-c, drag-and-drop, resize

您好，我想从另一个视图中拖动图像并将其添加到另一个视图中，并且我正在使用 SPUserRezisableView 来调整视图大小，但它仅适用于 UIView，我该如何为 UIImageView 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:04:17.410

请参阅下面的链接以调整 iphone 中的图像大小。

[高质量调整图像大小](http://www.iphonedevsdk.com/forum/iphone-sdk-development/5204-resize-image-high-quality.html)

我希望这将为解决问题提供一些帮助

# c# - 运行时 Autofac 绑定

> ID：10717553
> 
> 赞同：6
> 
> 时间：2012-05-23T09:56:12.713
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, autofac

我目前使用 Autofac 进行简单的构造函数注入，没有任何问题。但是我想知道的是如何在运行时解决依赖关系。下面的示例显示了我们可以导出文档的多种方式。通过简单的构造函数注入，IExport 的具体实现在运行时被解析。然而，需要做的是从下拉列表中解决用户选择的 IExport，这将在我的容器构建后发生。有没有什么例子可以说明我如何做到这一点？

```
Public interface IExport
{
   void Run(string content);
}

public class PDFformat : IExport
{ 
   public void Run(string content)
   {
       // export in pdf format
   }
}

public class HTMLformat : IExport
{
   public void Run(string content)
   {
       // export in html format
   }
}

public class RTFformat : IExport
{  
   public void Run(string content)
   {
       // export in rtf format
   }
}

public class HomeController : Controller
{
   IExport Export;

   public HomeController(IExport export)
   {
      Export = export;
   }

   public void ExportDocument(string content)
   {
      Export.Run(content);
   }
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:16:36.573

您应该使用工厂：

```
public interface IExportFactory
{
    IExport CreateNewExport(string type);
} 
```

执行：

```
class ExportFactory : IExportFactory
{
    private readonly IComponentContext container;

    public ExportFactory(IComponentContext container)
    {
        this.container = container;
    }

    public IExport CreateNewExport(string type)
    {
        switch (type)
        {
            case: "html":
                return this.container.Resolve<HTMLformat>();
            // etc
        }
    }
} 
```

登记：

```
builder.Register<IExportFactory>(
    c=> new ExportFactory(c.Resolve<IComponentContext>()))));
builder.RegisterType<HTMLformat>();
builder.RegisterType<PDFformat>(); 
```

控制器：

```
public class HomeController : Controller
{
   IExportFactory factory;

   public HomeController(IExportFactory factory)
   {
      this.factory = factory;
   }

   public void ExportDocument(string content)
   {
      this.factory.CreateNew("html").Run(content);
   }
} 
```

# c# - 有没有其他方法可以从服务器端检索数据，例如 HTTPWEBREQUEST

> ID：10717567
> 
> 赞同：0
> 
> 时间：2012-05-23T09:57:03.593
> 
> 标签：c#, windows-phone-7

```
HttpWebRequest objHttpWebRequest = System.Net.WebRequest.CreateHttp("http://URL");
objHttpWebRequest.Method = "POST";
objHttpWebRequest.ContentType = "application/xml";
objHttpWebRequest.Headers["authentication"] = clsGlobal.AuthKey; 
```

这个方法是异步的，所以我在排序以及计数项目和评估价值方面遇到了很多问题。

所以我的问题是有没有像 WebClient 这样的其他方法，以便我可以访问我的数据。？

笔记 ：

我曾尝试使用 WebClient，但它不起作用。！

它会给我这样的错误

**远程服务器返回错误：NotFound。**

有谁知道为什么。？

我的代码喜欢..

```
 WebClient client = new WebClient();
            client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
            client.Headers["authentication"] = AEGAPI.clsGlobal.AuthKey; 
            client.OpenReadAsync(new Uri(url), UriKind.RelativeOrAbsolute); 
```

# ruby - 试图让 svn2git 在 Windows 上工作

> ID：10717571
> 
> 赞同：18
> 
> 时间：2012-05-23T09:57:25.667
> 
> 标签：ruby, git, svn, git-svn

我正在将 SVN 存储库迁移到 Git。git-svn 命令不能正确处理分支和标签，但我偶然发现了一个名为 svn2git 的工具，它似乎可以解决这个问题（https://github.com/nirvdrum/svn2git）。

我已经尝试设置这个工具在 Windows 上工作，但我没有取得太大的成功。

我首先将 svn2git 安装复制到 C:\svn2git 并下载 Ruby for Windows (http://rubyinstaller.org/) 并将其保存在 C:\Ruby193。

运行 svn2git 回来了

```
/bin/env: ruby: No such file or directory 
```

然后我将 Ruby 的 bin 和 lib 文件夹分别复制到 svn2git 的 bin 和 lib 文件夹。

运行 svn2git 然后返回

```
<internal:gem_prelude>:1:in `require': cannot load such file -- rubygems.rb (LoadError) from <internal:gem_prelude>:1:in `<compiled>' 
```

有谁知道如何让它在 Windows 环境下工作？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T12:54:52.550

很明显，`rubygems.rb`失踪了。按照此处记录的方式安装它：
[https ://rubygems.org/pages/download](https://rubygems.org/pages/download)

然后，`svn2git`按照此处的说明安装：
[https ://github.com/nirvdrum/svn2git](https://github.com/nirvdrum/svn2git)

在那之后，一切都会好起来的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T14:55:34.247

我建议你试试[SubGit](http://subgit.com/)工具。它确实将 Subversion 标签翻译为标签，并且在 Windows 上运行良好（需要 Java 5 或更高版本）。SubGit 可以使用了。[您可以在下载页面](http://www.subgit.com/download.html)获得最新版本并阅读[网站](http://subgit.com/)上的文档。

最初在 2012 年，早期的 SubGit 版本需要本地访问 Subversion 存储库（通过文件系统），但后来（到 2015 年）添加了对 subversion 的网络访问。

免责声明：我是 SubGit 开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T08:23:27.290

如果您只想从 SVN 迁移主干及其提交历史，您可以使用以下 git 命令轻松完成：

```
git svn init --prefix=svn/ --no-metadata --trunk=http://[svnHostName]/svn/[projectTrunkUrl] --no-minimize-url
git svn fetch --log-window-size=4000 
```

太棒了！您已经使用所有 SVN 主干存储库历史初始化了本地 git 存储库！

现在您可能想要添加一个默认遥控器并推送：

> [https://help.github.com/en/articles/adding-a-remote](https://help.github.com/en/articles/adding-a-remote)
> 
> [https://help.github.com/en/articles/pushing-to-a-remote](https://help.github.com/en/articles/pushing-to-a-remote)

# ios - 获取月份的第一个日期，最后一个日期？

> ID：10717574
> 
> 赞同：17
> 
> 时间：2012-05-23T09:57:45.933
> 
> 标签：ios, xcode, nsdate

我想获取月份的firstdate、lastdate，我试试

```
NSDateComponents *components = [calendar components:units fromDate:[NSDate date]];
[components setDay:1];
self.currentDate = [calendar dateFromComponents:components];
int m = components.month;
int y = components.year;
int d = components.day;

log: 2012,5,1 
```

我怎样才能得到 lastdate od month？

请给我一些建议，谢谢！！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-23T10:02:58.347

我写的一些`NSDate`分类方法会对你有所帮助：

以下是查找月份开始的简单方法：

```
 (NSDate *) startOfMonth
{
    NSCalendar * calendar = [NSCalendar currentCalendar];

    NSDateComponents * currentDateComponents = [calendar components: NSYearCalendarUnit | NSMonthCalendarUnit fromDate: self];
    NSDate * startOfMonth = [calendar dateFromComponents: currentDateComponents];

    return startOfMonth;
} 
```

它所做的只是从当天获取年份和月份部分，然后再次转换回日期。

在月底，我使用了几种方法：

```
- (NSDate *) dateByAddingMonths: (NSInteger) monthsToAdd
{
    NSCalendar * calendar = [NSCalendar currentCalendar];

    NSDateComponents * months = [[NSDateComponents alloc] init];
    [months setMonth: monthsToAdd];

    return [calendar dateByAddingComponents: months toDate: self options: 0];
} 
```

和

```
- (NSDate *) endOfMonth
{
    NSCalendar * calendar = [NSCalendar currentCalendar];

    NSDate * plusOneMonthDate = [self dateByAddingMonths: 1];
    NSDateComponents * plusOneMonthDateComponents = [calendar components: NSYearCalendarUnit | NSMonthCalendarUnit fromDate: plusOneMonthDate];
    NSDate * endOfMonth = [[calendar dateFromComponents: plusOneMonthDateComponents] dateByAddingTimeInterval: -1]; // One second before the start of next month

    return endOfMonth;
} 
```

这是一个 3 步过程 - 将一个月添加到当前日期，找到下个月的开始，然后减去 1 秒以找到本月的结束。

* * *

*斯威夫特 3*

```
extension Date {

    func startOfMonth() -> Date? {

        let calendar = Calendar.current
        let currentDateComponents = calendar.dateComponents([.year, .month], from: self)
        let startOfMonth = calendar.date(from: currentDateComponents)

        return startOfMonth
    }

    func dateByAddingMonths(_ monthsToAdd: Int) -> Date? {

        let calendar = Calendar.current
        var months = DateComponents()
        months.month = monthsToAdd

        return calendar.date(byAdding: months, to: self)
    }

    func endOfMonth() -> Date? {

        guard let plusOneMonthDate = dateByAddingMonths(1) else { return nil }

        let calendar = Calendar.current
        let plusOneMonthDateComponents = calendar.dateComponents([.year, .month], from: plusOneMonthDate)
        let endOfMonth = calendar.date(from: plusOneMonthDateComponents)?.addingTimeInterval(-1)

        return endOfMonth

    }
} 
```

* * *

*斯威夫特 2*

```
extension NSDate {

    func startOfMonth() -> NSDate? {

        let calendar = NSCalendar.currentCalendar()
        let currentDateComponents = calendar.components(.CalendarUnitYear | .CalendarUnitMonth, fromDate: self)
        let startOfMonth = calendar.dateFromComponents(currentDateComponents)

        return startOfMonth
    }

    func dateByAddingMonths(monthsToAdd: Int) -> NSDate? {

        let calendar = NSCalendar.currentCalendar()
        let months = NSDateComponents()
        months.month = monthsToAdd

        return calendar.dateByAddingComponents(months, toDate: self, options: nil)
    }

    func endOfMonth() -> NSDate? {

        let calendar = NSCalendar.currentCalendar()
        if let plusOneMonthDate = dateByAddingMonths(1) {
            let plusOneMonthDateComponents = calendar.components(.CalendarUnitYear | .CalendarUnitMonth, fromDate: plusOneMonthDate)

            let endOfMonth = calendar.dateFromComponents(plusOneMonthDateComponents)?.dateByAddingTimeInterval(-1)

            return endOfMonth
        }

        return nil
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T11:57:31.960

试试这个技巧。

Day Param：1 是获取本月的第一个日期

Day Param：0 是通过获取上个月的最后一个日期来获取本月的最后一个日期（表示本月）

```
- (void)returnDate:(NSDate *)date {

    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit;
    NSDateComponents *comps = [calendar components:unitFlags fromDate:date];

    NSDate * firstDateOfMonth = [self returnDateForMonth:comps.month year:comps.year day:1];
    NSDate * lastDateOfMonth = [self returnDateForMonth:comps.month+1 year:comps.year day:0];

    NSLog(@"date %@", date);              // date 2013-06-20
    NSLog(@"First %@", firstDateOfMonth); // firstDateOfMonth 2013-06-01
    NSLog(@"Last %@", lastDateOfMonth);   // lastDateOfMonth  2013-06-30

} 
```

下一个

```
- (NSDate *)returnDateForMonth:(NSInteger)month year:(NSInteger)year day:(NSInteger)day {

    NSDateComponents *components = [[NSDateComponents alloc] init];

    [components setDay:day];
    [components setMonth:month];
    [components setYear:year];

    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
    return [gregorian dateFromComponents:components];
} 
```

不要忘记正确的日期格式化程序

针对 IOS 8.0 更新

```
- (void)returnDate:(NSDate *)date { 
    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
    unsigned unitFlags = NSCalendarUnitYear | NSCalendarUnitMonth;
    NSDateComponents *comps = [calendar components:unitFlags fromDate:date];

    NSDate * firstDateOfMonth = [self returnDateForMonth:comps.month year:comps.year day:1];
    NSDate * lastDateOfMonth = [self returnDateForMonth:comps.month+1 year:comps.year day:0];

    NSLog(@"date %@", date);              // date 2013-06-20
    NSLog(@"First %@", firstDateOfMonth); // firstDateOfMonth 2013-06-01
    NSLog(@"Last %@", lastDateOfMonth);   // lastDateOfMonth  2013-06-30

} 
```

下一个

```
- (NSDate *)returnDateForMonth:(NSInteger)month year:(NSInteger)year day:(NSInteger)day {

    NSDateComponents *components = [[NSDateComponents alloc] init];

    [components setDay:day];
    [components setMonth:month];
    [components setYear:year];

    NSCalendar *gregorian = [[NSCalendar alloc]
                         initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
    return [gregorian dateFromComponents:components];
} 
```

现在您正在使用：

*   NSCalendarUnitYear
*   NSCalendarUnitWeekOfMonth
*   NSCalendarIdentifierGregorian

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T19:06:40.990

好的，因为我正在滚动自己的日历控件，所以我继续创建了一个`NSCalendar`类别。这是我的`lastOfMonth`方法：

```
- (NSDate *)lastOfMonth:(NSDate *)date
{
    NSDateComponents *dc = [self components:NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit fromDate:date];

    NSRange dim = [self rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:date];
    dc.day = dim.length;

    return [self dateFromComponents:dc];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-29T19:06:22.163

对于**Swift 2.0**获取当月的第一天：

```
 let date = NSDate()
    let calendar = NSCalendar.currentCalendar()
    let dateComponents = calendar.components([NSCalendarUnit.Month, NSCalendarUnit.Year], fromDate: date)
    let firstDay = self.returnDateForMonth(dateComponents.month, year: dateComponents.year, day: 1)
    let dateFormatter = NSDateFormatter()
    dateFormatter.dateFormat = "dd-MMM-yy"

    print("First day of this month: \(firstDay)") // 01-Sep-15 
```

以及执行此操作的功能：

```
 func returnDateForMonth(month:NSInteger, year:NSInteger, day:NSInteger)->NSDate{
    let comp = NSDateComponents()
    comp.month = month
    comp.year = year
    comp.day = day

    let grego = NSCalendar.currentCalendar()
    return grego.dateFromComponents(comp)!
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T09:59:48.180

您可以使用以下方式获取月份的最后一个日期：-

```
NSDate currDate=[NSDate date];

-(NSString *)getLastDateMonth:(NSDate *)currDate{

  NSCalendar *gregCalendar=[[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

  NSDateComponents *components=[gregCalendar components:NSMonthCalendarUnit|NSYearCalendarUnit fromDate:currDate];
  NSInteger month=[components month];
  NSInteger year=[components year];

  if (month==12) {
    [components setYear:year+1];
    [components setMonth:1];
  } else {
    [components setMonth:month+1];
  }
  [components setDay:1];

  NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
  [dateFormat setDateStyle:NSDateFormatterShortStyle];
  NSString *lastDateOfMonth = [dateFormat stringFromDate:(NSDate *)[[gregCalendar dateFromComponents:components] dateByAddingTimeInterval:-86400]];
  dateFormat=nil;
  return lastDateOfMonth;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-23T21:50:11.497

在基于纳齐尔的回答的斯威夫特

```
 func getFirstAndLastDateOfMonth(date: NSDate) -> (fistDateOfMonth: NSDate, lastDateOfMonth: NSDate) {

            let calendar = NSCalendar(calendarIdentifier: NSCalendarIdentifierGregorian)
            let calendarUnits = NSCalendarUnit.CalendarUnitYear | NSCalendarUnit.CalendarUnitMonth
            let dateComponents = calendar?.components(calendarUnits, fromDate: date)

            let fistDateOfMonth = self.returnedDateForMonth(dateComponents!.month, year: dateComponents!.year, day: 1)
            let lastDateOfMonth = self.returnedDateForMonth(dateComponents!.month + 1, year: dateComponents!.year, day: 0)

            println("fistDateOfMonth \(fistDateOfMonth)")
            println("lastDateOfMonth \(lastDateOfMonth)")

            return (fistDateOfMonth!,lastDateOfMonth!)
        }

       func returnedDateForMonth(month: NSInteger, year: NSInteger, day: NSInteger) -> NSDate? {
            var components = NSDateComponents()
            components.day = day
            components.month = month
            components.year = year

            let gregorian = NSCalendar(calendarIdentifier: NSCalendarIdentifierGregorian)

            return gregorian!.dateFromComponents(components)
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-25T15:12:09.763

Swift 5 得到月的最后一天 - 基于不同的来源

```
// -------------------------------------------------------
// lastDayOfMonth
// -------------------------------------------------------
static func lastDayOfMonth(year:Int, month:Int) -> Int {
    let calendar:Calendar = Calendar.current
    var dc:DateComponents = DateComponents()
    dc.year = year
    dc.month = month + 1
    dc.day = 0
    let lastDateOfMonth:Date = calendar.date(from:dc)!
    let lastDay = calendar.component(Calendar.Component.day, from: lastDateOfMonth)
    return lastDay
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-09T05:12:03.190

看起来不需要任何技巧或技巧，**NSCalendar**的**rangeOfUnit**做得很好：

```
NSCalendar *cal = [NSCalendar currentCalendar];

NSDateComponents *dc = [[NSDateComponents alloc] init];
dc.year = 1947;
dc.month = 8; //desired month

//calculate start date
dc.day = 1; //As far as I can think start date of a month will always be 1
NSDate *start = [cal dateFromComponents:dc];

//calculate last date of month
NSRange dim = [cal rangeOfUnit:NSCalendarUnitDay inUnit:NSCalendarUnitMonth forDate:start]; // we used start date as it has the same month & year value as desired
dc.day=dim.length; //this is the simply the last day of the desired month
NSDate *last = [[NSCalendar currentCalendar] dateFromComponents:dc]; 
```

记录值以进行验证：

```
NSLog(@"Start day of month Date: %@", start);
NSLog(@"Last day of month Date: %@", last); 
```

关于 NSCalendar rangeOfUnit 的 Apple 文档：[https ://developer.apple.com/documentation/foundation/nscalendar/1418344-rangeofunit](https://developer.apple.com/documentation/foundation/nscalendar/1418344-rangeofunit)

ps 看起来这使用与@Scott Means 的答案相同的逻辑，但不需要任何类别，因此请使用您喜欢的答案！

# axis2 - 无法找出原因 Axis2+Rampart 服务器内部错误 500

> ID：10717577
> 
> 赞同：0
> 
> 时间：2012-05-23T09:57:51.230
> 
> 标签：axis2, rampart

请帮忙。我在构建服务器端壁垒服务时遇到了一个问题。我使用 Axis2 服务器接收 Rampart 客户端请求。我在 Eclipse 轴客户端中得到了不好的响应。服务器端也在本地。请参阅下面的完整堆栈跟踪（log4j）。我只能看到 JuiCEProviderOpenSSL 的 ClassNotFound 异常，但有人说我可以忽略它。而且我怀疑粗体部分会导致此问题，因为之后构建器开始创建故障消息。所以，这让我发疯。我对这个问题一无所知。请帮我。谢谢。还有，原谅我的格式，第一次在这里问。TT

axis2.log - log4j

```
2012-05-22 18:00:52,585 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - Calling MTOMXMLStreamWriter.flush
2012-05-22 18:00:52,585 [HttpConnection-8080-1] DEBUG org.apache.rampart.MESSAGE  - *********************** RampartReceiver received 
<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1"><wsse:BinarySecurityToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-984C299ACFD3E6AABA13376808432101">MIIDSzCCAjOgAwIBAgIEeiVTTzANBgkqhkiG9w0BAQUFADBWMQswCQYDVQQGEwJDTjELMAkGA1UECBMCTE4xCzAJBgNVBAcTAkRMMQ0wCwYDVQQKEwRDaXRpMQ8wDQYDVQQLEwZKUFRlY2gxDTALBgNVBAMTBFN0YXIwHhcNMTIwNTE3MDQzNjQxWhcNMTIwODE1MDQzNjQxWjBWMQswCQYDVQQGEwJDTjELMAkGA1UECBMCTE4xCzAJBgNVBAcTAkRMMQ0wCwYDVQQKEwRDaXRpMQ8wDQYDVQQLEwZKUFRlY2gxDTALBgNVBAMTBFN0YXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbDDrpjwITkzxFzNkGV7W5SHTMuNdw+miscGymTDAjJvQZU/FXScu5TtnqQzgef+FDE+Nuu4olMUAB1dYx3r8vucnNRo3i36N/mxA4lD3Y0A0JM1r0lCzxaYQPAaIw7FxQ2Tu7Vmso9b9Vpp4DrDL7U6Si7JlRB7RmzuEViWnvVfgK0cRN3KpjfaJc3Zpdj549dGLpVA/g2feXhEvpTxoCHfRuqUHGjbdHN0dRlmDk8KMi8MBuH+kivcKoWZAsQL8VCJwBgOg232v4ZcodOLyHUfA0eeKK/dht1NhOavlE8Mn/Lq4e8+B7RE8n4bq7wtYshXO02Vc2rSodqWHecm4TAgMBAAGjITAfMB0GA1UdDgQWBBS614JqGc6WsHsY8ZbC9p8R/38sHjANBgkqhkiG9w0BAQUFAAOCAQEALFwI0+ARt4BoCZDEjjBZjvMerCLOXirx3p5e1CYv5R8UTU+l7kTssQpQpDQuxVsyHuClnORyBadhuBKO78Ztq5MyPTBSf4tCxvtRd6ghM8B1FB7aopkHoP6CI016IMrVEfka+OVELrphOxyAeQU0/IOsT6zOWOzN2uUTvzqTYOtP+hI1DL9pYVIr+2R+4Qr5NuVv0Wi+nhFJTohpWRKZy7u27j07SHJ4rOfsaquNz1PohgbMDWULPLoivdUYEFgvDzolk/veqJ0ypqt3iIdQRSPfaIL6/eSZINmrjHvFo4EBi8s7zi12J3iFFpahVOoTZrb2RzC1UtWtfgkLfQWDsQ==</wsse:BinarySecurityToken><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="Signature-1">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
<ds:Reference URI="#Id-6349096">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
<ds:DigestValue>7Fk2H6qKHzE7LpXN0BbMnULTuZk=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
c4XDzwPEh58ungiFCp7QaF+LvTjRqW3gE5iiLwWWJiq+AUVyN6l4zN2zRmpWhnAoNr9ecP48ZjkS
pk7LY8DsjEXLQ6j4mroM+fm9vuEoeXlVUmSLezC0cByVBGYDHNxLFC5hpVGYAhfC4gOqZBhmtT3U
ZNGn/5ZjR1aQowUrveCaBQ8Zoz8YjUnMsmdgDK9VD3G2gPwJ3Hujb4TicVP8jN9/FNn7jPPKFRDr
cqjvyApVEj1xn/VcpYlnpJxWG2/Jv9pLNTCBBnHE4gGXRjae5ZznLLYESeEaYRNYWqSKz51F28fU
+Imkj7qS06e8WHcxh2SnKat1fVwM6Agj4D5PnQ==
</ds:SignatureValue>
<ds:KeyInfo Id="KeyId-984C299ACFD3E6AABA13376808432422">
<wsse:SecurityTokenReference xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="STRId-984C299ACFD3E6AABA13376808432423"><wsse:Reference URI="#CertId-984C299ACFD3E6AABA13376808432101" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" /></wsse:SecurityTokenReference>
</ds:KeyInfo>
</ds:Signature></wsse:Security></soapenv:Header><soapenv:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Id-6349096"><ns1:concat xmlns:ns1="http://ttdev.com/ss"><s1>xyz</s1><s2>123</s2></ns1:concat></soapenv:Body></soapenv:Envelope>

2012-05-22 18:00:53,570 [HttpConnection-8080-1] DEBUG org.apache.ws.security.WSSConfig  - The provider BC was added at position: 2
2012-05-22 18:00:53,570 [HttpConnection-8080-1] DEBUG org.apache.ws.security.util.Loader  - org.apache.security.juice.provider.JuiCEProviderOpenSSL
java.lang.ClassNotFoundException: org.apache.security.juice.provider.JuiCEProviderOpenSSL
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
    at org.apache.ws.security.util.Loader.loadClass(Loader.java:185)
    at org.apache.ws.security.WSSConfig.loadProvider(WSSConfig.java:605)
    at org.apache.ws.security.WSSConfig.addJceProvider(WSSConfig.java:662)
    at org.apache.ws.security.WSSConfig.staticInit(WSSConfig.java:306)
    at org.apache.ws.security.WSSConfig.<init>(WSSConfig.java:324)
    at org.apache.ws.security.WSSConfig.getNewInstance(WSSConfig.java:333)
    at org.apache.ws.security.WSSConfig.getDefaultWSConfig(WSSConfig.java:342)
    at org.apache.rampart.RampartMessageData.<init>(RampartMessageData.java:345)
    at org.apache.rampart.RampartEngine.process(RampartEngine.java:78)
    at org.apache.rampart.handler.RampartReceiver.invoke(RampartReceiver.java:92)
    at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
    at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
    at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.HTTPWorker.service(HTTPWorker.java:296)
    at org.apache.axis2.transport.http.server.AxisHttpService.doService(AxisHttpService.java:281)
    at org.apache.axis2.transport.http.server.AxisHttpService.handleRequest(AxisHttpService.java:187)
    at org.apache.axis2.transport.http.server.HttpServiceProcessor.run(HttpServiceProcessor.java:82)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:650)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:675)
    at java.lang.Thread.run(Thread.java:595)
2012-05-22 18:00:53,585 [HttpConnection-8080-1] DEBUG org.apache.ws.security.WSSConfig  - The provider JuiCE could not be added: org.apache.security.juice.provider.JuiCEProviderOpenSSL
2012-05-22 18:00:53,585 [HttpConnection-8080-1] TRACE org.apache.axiom.om.impl.builder.StAXOMBuilder  - START_ELEMENT: 
2012-05-22 18:00:53,585 [HttpConnection-8080-1] TRACE org.apache.axiom.om.impl.builder.StAXOMBuilder  -   QName: {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security

2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.rampart.util.RampartUtil  - Loading Signature crypto
2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.rampart.RampartEngine  - Processing security header in normal path
2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.rampart.util.RampartUtil  - Loading encryption crypto
2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.rampart.util.RampartUtil  - Trying the signature crypto info
2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.rampart.util.RampartUtil  - Loading Signature crypto
**2012-05-22 18:00:53,632 [HttpConnection-8080-1] DEBUG org.apache.ws.security.WSSecurityEngine  - enter processSecurityHeader()
2012-05-22 18:00:53,648 [HttpConnection-8080-1] DEBUG org.apache.ws.security.WSSecurityEngine  - Processing WS-Security header for '' actor.
2012-05-22 18:00:53,679 [HttpConnection-8080-1] DEBUG org.apache.axis2.client.Options  - getAction (null) from org.apache.axis2.client.Options@12cfd62
2012-05-22 18:00:53,679 [HttpConnection-8080-1] DEBUG org.apache.axis2.context.MessageContext  - Old WSAAction is (null)
2012-05-22 18:00:53,679 [HttpConnection-8080-1] DEBUG org.apache.axis2.context.MessageContext  - New WSAAction is (http://www.w3.org/2005/08/addressing/soap/fault)
2012-05-22 18:00:53,679 [HttpConnection-8080-1] DEBUG org.apache.axis2.client.Options  - setAction Old action is (null)
2012-05-22 18:00:53,679 [HttpConnection-8080-1] DEBUG org.apache.axis2.client.Options  - setAction New action is (http://www.w3.org/2005/08/addressing/soap/fault)
2012-05-22 18:00:53,695 [HttpConnection-8080-1] TRACE org.apache.axis2.addressing.EndpointReference  - hasAnonymousAddress: http://www.w3.org/2005/08/addressing/anonymous is Anonymous: true
2012-05-22 18:00:53,695 [HttpConnection-8080-1] TRACE org.apache.axis2.addressing.EndpointReference  - hasAnonymousAddress: http://www.w3.org/2005/08/addressing/anonymous is Anonymous: true
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.util.MessageContextBuilder  - start createFaultEnvelope()**
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.util.MessageContextBuilder  - faultCode == null
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.util.MessageContextBuilder  - context.isSOAP11() = true
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.util.MessageContextBuilder  - End createFaultEnvelope()
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.addressing.AddressingHelper  - [MessageContext: logID=19f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] isFaultRedirected: FaultTo is null. Returning isReplyRedirected
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.addressing.AddressingHelper  - [MessageContext: logID=19f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] isReplyRedirected: ReplyTo is null. Returning false
2012-05-22 18:00:53,695 [HttpConnection-8080-1] TRACE org.apache.axis2.engine.AxisEngine  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] sendFault:null
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Checking pre-condition for Phase "MessageOut"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking phase "MessageOut"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking Handler 'AddressingOutHandler' in Phase 'MessageOut'
2012-05-22 18:00:53,695 [HttpConnection-8080-1] TRACE org.apache.axis2.handlers.addressing.AddressingOutHandler  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Addressing is disabled. Not adding WS-Addressing headers.
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Checking post-conditions for phase "MessageOut"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Checking pre-condition for Phase "Security"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking phase "Security"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking Handler 'SecurityOutHandler' in Phase 'Security'
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking Handler 'Apache Rampart outflow handler' in Phase 'Security'
2012-05-22 18:00:53,695 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Checking post-conditions for phase "Security"
2012-05-22 18:00:53,695 [HttpConnection-8080-1] TRACE org.apache.axis2.addressing.EndpointReference  - hasAnonymousAddress: http://www.w3.org/2005/08/addressing/anonymous is Anonymous: true
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.client.Options  - getAction (http://www.w3.org/2005/08/addressing/soap/fault) from org.apache.axis2.client.Options@12cfd62
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.context.MessageContext  - SoapAction is (http://www.w3.org/2005/08/addressing/soap/fault)
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.CommonsHTTPTransportSender  - SOAP Action from messageContext : (http://www.w3.org/2005/08/addressing/soap/fault)
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.OMOutputFormat  - Start getContentType: OMOutputFormat [ mimeBoundary =null rootContentId=null doOptimize=false doingSWA=false isSOAP11=true charSetEncoding=UTF-8 xmlVersion=null contentType=null ignoreXmlDeclaration=false autoCloseWriter=true actionProperty=null optimizedThreshold=0]
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.OMOutputFormat  - getContentType= {text/xml}   OMOutputFormat [ mimeBoundary =null rootContentId=null doOptimize=false doingSWA=false isSOAP11=true charSetEncoding=UTF-8 xmlVersion=null contentType=text/xml ignoreXmlDeclaration=false autoCloseWriter=true actionProperty=null optimizedThreshold=0]
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  - contentType from the OMOutputFormat =text/xml
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  - contentType returned =text/xml; charset=UTF-8
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  - start writeTo()
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  -   preserve=false
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  -   isOptimized=false
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  -   isDoingSWA=false
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - Creating MTOMXMLStreamWriter
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - OutputStream =class org.apache.axis2.transport.http.server.AxisHttpResponseImpl$AutoCommitOutputStream
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - OMFormat = OMOutputFormat [ mimeBoundary =null rootContentId=null doOptimize=false doingSWA=false isSOAP11=true charSetEncoding=UTF-8 xmlVersion=null contentType=text/xml ignoreXmlDeclaration=false autoCloseWriter=true actionProperty=null optimizedThreshold=0]
2012-05-22 18:00:53,710 [HttpConnection-8080-1] TRACE org.apache.axiom.om.impl.MTOMXMLStreamWriter  - Call Stack =DEBUG_FRAME = org.apache.axiom.om.util.CommonUtils.callStackToString(CommonUtils.java:78)
    DEBUG_FRAME = org.apache.axiom.om.impl.MTOMXMLStreamWriter.<init>(MTOMXMLStreamWriter.java:100)
    DEBUG_FRAME = org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:191)
    DEBUG_FRAME = org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    DEBUG_FRAME = org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:364)
    DEBUG_FRAME = org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:241)
    DEBUG_FRAME = org.apache.axis2.engine.AxisEngine.sendFault(AxisEngine.java:526)
    DEBUG_FRAME = org.apache.axis2.transport.http.server.AxisHttpService.doService(AxisHttpService.java:320)
    DEBUG_FRAME = org.apache.axis2.transport.http.server.AxisHttpService.handleRequest(AxisHttpService.java:187)
    DEBUG_FRAME = org.apache.axis2.transport.http.server.HttpServiceProcessor.run(HttpServiceProcessor.java:82)
    DEBUG_FRAME = java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:650)
    DEBUG_FRAME = java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:675)
    DEBUG_FRAME = java.lang.Thread.run(Thread.java:595)

2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.util.StAXUtils  - XMLStreamWriter is org.apache.axiom.util.stax.dialect.WoodstoxStreamWriterWrapper
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl  - Could not close builder or parser due to:
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl  - builder is null
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - Calling MTOMXMLStreamWriter.flush
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.wire  - << HTTP/1.1 500 Internal server error
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.wire  - << Date: Tue, 22 May 2012 10:00:53 GMT
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.wire  - << Server: Simple-Server/1.1
2012-05-22 18:00:53,710 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.wire  - << Transfer-Encoding: chunked
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.wire  - << Content-Type: text/xml; charset=UTF-8
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axiom.om.impl.MTOMXMLStreamWriter  - close
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.SOAPMessageFormatter  - end writeTo()
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.TransportUtils  - Did not find RequestResponseTransport cannot set response written
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking flowComplete() in Phase "Security"
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking flowComplete() for Handler 'Apache Rampart outflow handler' in Phase 'Security'
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking flowComplete() for Handler 'SecurityOutHandler' in Phase 'Security'
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking flowComplete() in Phase "MessageOut"
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.engine.Phase  - [MessageContext: logID=09f9baf1b4a9bb41bd81e508daa5dfcc964b902ec7eb7e33] Invoking flowComplete() for Handler 'AddressingOutHandler' in Phase 'MessageOut'
2012-05-22 18:00:53,726 [HttpConnection-8080-1] DEBUG org.apache.axis2.transport.http.server.AxisHttpService  - Remote address of the connection : 127.0.0.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:37:35.867

我终于发现了这个问题，但是，我认为我的解决方案不能帮助其他人，因为我犯了一个非常愚蠢的错误。

我认为我解决问题的方式更有价值。我调试了源代码并跟踪了每一步以找出异常的位置。

接下来，我发现 Rampart 无法从我放置 Rampart 配置的 services.xml 中获取安全配置​​。

发生错误是因为我错过了`xmlns='..../rampart/policy'`公告。因此，代码无法将它们识别为`RampartConfig`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:23:54.180

如果您也附上了服务政策，那就太好了。您的政策中使用的算法套装是什么。JCE 需要在许多加密操作中安装在您的 JVM 中，特别是在需要长度超过 128 位的密钥的情况下。请参阅**我的**博客[http://sureshatt.blogspot.com/2012/03/java-cryptography-extension-jce.html](http://sureshatt.blogspot.com/2012/03/java-cryptography-extension-jce.html)，安装 JCE 并再次尝试该服务。

# java - 如何将字符串转换为日期 Java

> ID：10717578
> 
> 赞同：1
> 
> 时间：2012-05-23T09:57:55.230
> 
> 标签：java, string, list, parsing, date

我目前有一个`ArrayList`充满格式的日期，`2012-06-19`我正在尝试将它们全部添加到`Date`s 数组中。

这是我失败的代码部分，

```
 listIterator = dateValues.listIterator();

    Date [] dates = new Date[dateValues.size()];
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    int i = 0;
    try{
        while(listIterator.hasNext())
        {
            //System.out.println(listIterator.next().toString());
            dates[i] =  dateFormat.parse(listIterator.next().toString());
            i++;

        }

        for(i = 0; i < dates.length;i++)
        {
            System.out.println(dates[i]);
        }
    }
    catch(Exception e){e.printStackTrace()};
} 
```

线

```
//System.out.println(listIterator.next().toString()); 
```

将打印出 ArrayList 中的每个日期。输出看起来像，

```
2007-09-07
2007-09-07
2007-10-05
2007-10-05
2007-10-05
2007-10-05
2007-10-05 
```

但我的`dateFormat`行从不向`dates[]`. 任何帮助，将不胜感激。

不，这不是家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:06:41.037

试试这个：

```
List<String> dateValues = new ArrayList<String>();
Date[] dates = new Date[dateValues.size()];
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
int i = 0;
for (String dateValue : dateValues) {
    dates[i++] = dateFormat.parse(dateValue);
} 
```

“代码越少越好”，所以使用语言（foreach 循环等）来保持代码小而干净（如上面的代码）。

在您发表评论之前请注意：“代码越少越好”，只要它保持可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:16:40.277

如果该行：

```
//System.out.println(listIterator.next().toString()); 
```

is uncommented`next()`在一次迭代中被调用两次，最终将导致`NoSuchElementException`被抛出。这意味着后续`for`循环将不会被执行。存储结果`next()`：

```
while(listIterator.hasNext())
{
    String s = listIterator.next().toString();
    System.out.println(s);
    dates[i] = dateFormat.parse(s);
    i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:31:50.643

@Tom Celic 的解决方案对我有用。

```
List<String> dateValues = new ArrayList<String>();
    dateValues.add("2012-09-08");
    dateValues.add("2011-09-08");
    Date[] dates = new Date[dateValues.size()];
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    int i = 0;
    for (String dateValue : dateValues) {
        dates[i++] = dateFormat.parse(dateValue);
    }
    System.out.println(dates.length);
    System.out.println(dates[0]);
    System.out.println(dates[1]); 
```

它打印：

```
 2
Sat Sep 08 00:00:00 IST 2012
Thu Sep 08 00:00:00 IST 2011 
```

# java - 在 Java 中处理运行时异常

> ID：10717585
> 
> 赞同：3
> 
> 时间：2012-05-23T09:58:18.070
> 
> 标签：java, exception-handling

我有以下一段代码

```
 try{//do something
     }
  catch (Exception e) {
        log.error(e, e);
        if (e instanceof RuntimeException) {
            throw (RuntimeException) e;
        } else {
            throw new RuntimeException(e);
        }
    } 
```

findbugs 静态分析工具会在其上抛出此警告

> 对于 methodX 中的所有非空值，instanceof 将始终返回 true，因为所有 RuntimeException 都是 RuntimeException 的实例

我不明白的是它的异常被捕获而不是RuntimeException，那么为什么会出现这个警告呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:00:39.783

也许，`// do something`代码不会抛出任何已检查的异常，因此您可以在 try 块中获得的唯一异常是未检查的异常（子类化`RuntimeException`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T10:08:03.660

您也可以尝试以下代码。这将更好地阅读和维护。

```
try{//do something
}
catch (RuntimeException e) {
    throw e;
} 
catch (Exception e) {
    throw new RuntimeException(e);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T10:04:05.490

可能没有在“尝试”部分抛出不 RuntimeException 的方法。因此，您可以使用构造

```
catch(RuntimeException e)
{
 //Do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:18:52.717

试试[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Throwables.html#propagate%28java.lang.Throwable%29](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Throwables.html#propagate%28java.lang.Throwable%29)。它完全符合您的要求。今天我出于同样的原因做了替换（findbugs警告），也查看了这个方法的来源。

# playframework - fbconnect 在播放应用程序中

> ID：10717588
> 
> 赞同：0
> 
> 时间：2012-05-23T09:58:22.437
> 
> 标签：playframework

我已经尝试过了，但我的模块文件夹中没有 facebook！我已经安装了 fbconnect 0.6 和 fbgraph。但是我的 IDE 显示错误，告诉我找不到“play.modules.facebook.FbGraph”。

项目成员 erja...@gmail.com 的评论，2011 年 5 月 16 日

```
// [...]
import play.modules.facebook.FbGraph;
import play.modules.facebook.FbGraphException;
import play.modules.facebook.Parameter;
// [...]
public class Application extends Controller {
// [...]
    public static void facebookLogin() {
        try {
            JsonObject profile = FbGraph.getObject("me"); // fetch the logged in user
            String email = profile.get("email").getAsString(); // retrieve the email
            // do useful things
            Session.current().put("username", email); // put the email into the session (for the Secure module)
        } catch (FbGraphException fbge) {
            flash.error(fbge.getMessage());

            if (fbge.getType() != null && fbge.getType().equals("OAuthException")) {
                    Session.current().remove("username");
                }
            }
            redirect("/");
        }
    } 
```

请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:42:43.470

如果您还没有这样做，请尝试以下操作：

1.  将你的模块添加到 dependencies.yml
2.  播放 deps --sync
3.  玩日食
4.  在eclipse中删除并重新导入

# python - 如何实现高速、一致的采样？

> ID：10717589
> 
> 赞同：4
> 
> 时间：2012-05-23T09:58:22.853
> 
> 标签：python

需要考虑的应用类型是示波器或高速数据记录器。我有一个检索所需信息的函数，我只需要弄清楚如何一遍又一遍地调用它，非常快速且高精度。

time.sleep() 有限制，我不认为这是要走的路。

我已经研究了内置的事件调度程序，但我认为它不够精确，也不能完全满足我的需求。

对此的要求是：

*   高速采样。10ms 是最多的。
*   高精度间隔。在 10ms 时，10% 的误差是可以接受的 (±1ms)。
*   相当低的 CPU 使用率，在 10 毫秒时可以接受一些负载，但对于 100 毫秒或更长时间的间隔，它应该小于 ~5%。我知道这是主观的，我想我的意思是占用 CPU 是不可接受的。
*   理想情况下，定时器将使用间隔时间初始化，然后在需要时启动。然后应以正确的时间间隔一遍又一遍地调用所需的函数，直到计时器停止。
*   它只会（不是必须）在 Windows 机器上运行。

是否有任何现有的库可以满足这些要求？我不想重新发明轮子，但如果必须，我可能会使用 Windows 多媒体计时器 (winmm.dll)。对此有何评论/建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-01T08:36:23.850

我知道我回答自己的问题迟到了，但希望它会对某人有所帮助。

我为 Windows 多媒体计时器编写了一个包装器，纯粹是为了测试。它似乎运行良好，但代码没有经过全面测试，也没有经过优化。

mmtimer.py：

```
from ctypes import *
from ctypes.wintypes import UINT
from ctypes.wintypes import DWORD

timeproc = WINFUNCTYPE(None, c_uint, c_uint, DWORD, DWORD, DWORD)
timeSetEvent = windll.winmm.timeSetEvent
timeKillEvent = windll.winmm.timeKillEvent

class mmtimer:
    def Tick(self):
        self.tickFunc()

        if not self.periodic:
            self.stop()

    def CallBack(self, uID, uMsg, dwUser, dw1, dw2):
        if self.running:
            self.Tick()

    def __init__(self, interval, tickFunc, stopFunc=None, resolution=0, periodic=True):
        self.interval = UINT(interval)
        self.resolution = UINT(resolution)
        self.tickFunc = tickFunc
        self.stopFunc = stopFunc
        self.periodic = periodic
        self.id = None
        self.running = False
        self.calbckfn = timeproc(self.CallBack)

    def start(self, instant=False):
        if not self.running:
            self.running = True
            if instant:
                self.Tick()

            self.id = timeSetEvent(self.interval, self.resolution,
                                   self.calbckfn, c_ulong(0),
                                   c_uint(self.periodic))

    def stop(self):
        if self.running:
            timeKillEvent(self.id)
            self.running = False

            if self.stopFunc:
                self.stopFunc() 
```

定期测试代码：

```
from mmtimer import mmtimer
import time

def tick():
    print("{0:.2f}".format(time.clock() * 1000))

t1 = mmtimer(10, tick)
time.clock()
t1.start(True)
time.sleep(0.1)
t1.stop() 
```

以毫秒为单位的输出：

```
0.00
10.40
20.15
29.91
39.68
50.43
60.19
69.96
79.72
90.46
100.23 
```

一键测试代码：

```
from mmtimer import mmtimer
import time

def tick():
    print("{0:.2f}".format(time.clock() * 1000))

t1 = mmtimer(150, tick, periodic=False)
time.clock()
t1.start() 
```

以毫秒为单位的输出：

```
150.17 
```

从结果中可以看出，它非常准确。然而，这只是使用`time.clock()`，所以带上一小撮盐。

在使用 10 毫秒定期计时器的长时间测试期间，我的旧双码 3GHz 机器上的 CPU 使用率约为 3% 或更少。该机器似乎也在空闲时使用它，所以我想说额外的 CPU 使用率是最小的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:26:39.990

编辑：写完下面的东西后，我倾向于为 python 事件调度程序实现类似的测试。我不明白你为什么认为它不够准确。

像下面这样的东西似乎在我的 Linux 下运行得很好（我没有理由认为它不适用于 Windows）。每 10 毫秒`on_timer_event()`调用一次，根据实时时钟打印自上次调用以来的时间。这显示了计时器的大致精度。最后，打印出总时间以显示没有漂移。

下面的代码似乎存在一个问题，事件偶尔会以虚假（和短时间间隔）出现。我不知道为什么会这样，但毫无疑问，通过一些游戏你可以让它变得可靠。我认为这种方法是要走的路。

```
import pygame
import time

pygame.init()
TIMER_EVENT = pygame.USEREVENT+1

pygame.time.set_timer(TIMER_EVENT, 10)

timer_count = 0
MAX_TIMER_COUNT = 1000

def on_timer_event():
    global last_time
    global timer_count

    new_time = time.time()

    print new_time - last_time
    last_time = new_time

    timer_count += 1

    if timer_count > MAX_TIMER_COUNT:
        print last_time - initial_time
        pygame.event.post(pygame.event.Event(pygame.QUIT, {}))

initial_time = time.time()
last_time = initial_time
while True:
    event = pygame.event.wait()
    if event.type == TIMER_EVENT:
        on_timer_event()

    elif event.type == pygame.QUIT:
        break 
```

# object - 从 ObservableColelction 获取具有条件的对象

> ID：10717590
> 
> 赞同：0
> 
> 时间：2012-05-23T09:58:27.550
> 
> 标签：object, observablecollection, conditional-statements

我有一个 ObservableColection totalsCol 并且想要检索其 id 与指定 id 匹配的对象。我编码为：

```
IEnumerable<Totals> ie = totalsCol.Where(a => a.IdCTS == ct1.TOR_Id);
 if (ie.Count() > 1)
 {
    // Update the TotalCts of Totals object
    ie.ElementAt(0).TotalCTS = ct1.TotalCts;
     CalculateTotalsPercent();
 } 
```

我得到 ie.count 为空。而它有3条记录。在调试时，我可以在基础源下看到。

我在哪里错了？我相信用 ie.ElementAt 更新值的方式将反映 totalsCol observableCollection 的变化。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:32:27.547

我实现了：

```
totalsCol.First(a => a.IdCTS == ct1.TOR_Id); 
```

并解决了这个问题。

# android - Android中的应用交互

> ID：10717591
> 
> 赞同：2
> 
> 时间：2012-05-23T09:58:34.197
> 
> 标签：android, android-intent

我从这个很棒的网站学到了很多东西，我想问我关于 Android 的第一个问题；出于安全原因，有什么方法可以阻止任何其他应用程序启动我自己的应用程序？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:13:12.360

当一个应用调用另一个应用时，通常使用 startActivity 或 startActivityForResult。

如果使用 startActivity 进行调用，则没有什么可以让您获得发件人信息（http://stackoverflow.com/questions/4789155/how-to-find-intent-source-in-android）：

```
private String mAction;
private Uri mData;
private String mType;
private String mPackage;
private ComponentName mComponent;
private int mFlags;
private HashSet<String> mCategories;
private Bundle mExtras; 
```

如果它使用 startActivityForResult，它会创建一个意图，您可以通过 getIntent() 获取该意图，并最终检索原始意图并在这种情况下执行终止操作。

所以简而言之，你不能 100% 确定它会起作用。

# iphone - 我应该将图像存储在哪里，以便可以与它们共享 iTunes 文件？

> ID：10717601
> 
> 赞同：1
> 
> 时间：2012-05-23T09:59:30.823
> 
> 标签：iphone, objective-c, ios, ipad

我的 iOS 应用程序从照片库和相机中拍摄照片，但我不确定将它们存储在哪里。我想通过 iTunes 文件共享将这些图像呈现给用户。

我应该将它们存储在应用程序的 Documents 目录中还是会导致 Apple 拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:37:18.503

将文件保存在 doc 目录中

```
#define ROOT_FOLDER_PATH        [NSString stringWithFormat:@"%@", [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask, YES)objectAtIndex:0]]    

-(BOOL)savePhoto:(NSData*)photoData:(NSString*)photoName
{
NSString *fullFilePath = [NSString stringWithFormat:@"%@/%@", ROOT_FOLDER_PATH, photoName];
return [photoData writeToFile:fullFilePath atomically:YES];
} 
```

在**Plist**中启用**应用程序支持 iTunes 文件共享**。就这样。:-)

我们有一个这样的应用程序。苹果会批准。没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:07:25.973

使用 ALAssetsLibrary 保存图像，如果您希望将这些图像保存在您的应用程序中，您只需将资产 url 存储在文档目录中。

Apple 将倾向于拒绝将大文件不必要地保存到文档目录中的应用程序，即将大量图像保存到文档目录中。

# php - 将 CSV 格式化为 json 以供 ui.autocomplete 使用

> ID：10717604
> 
> 赞同：0
> 
> 时间：2012-05-23T09:59:36.393
> 
> 标签：php, jquery, drupal

我在格式化 CSV 输出以使其可用作 jquery ui.autocomplete 的 json 时遇到 php 问题。

**水果.csv：**

```
apple, bananna, jackfruit, 
... etc 
```

**来自这里的jquery：**

[http://jqueryui.com/demos/autocomplete/#default](http://jqueryui.com/demos/autocomplete/#default)

```
$( "#fruits" ).autocomplete({
            source: '/path/to/fruit.json'
        }); 
```

**PHP 将 CSV 转换为 json：**

```
 // Callback function to output CSV as json object
        function _custom_json_from_csv() {
            $fruit_path = '/path/to/fruit.csv';
            $fruits = array_map("str_getcsv", file($fruit_path));
            drupal_json_output(array(array_values($fruits)));
            exit;
        }

       // Below are CMS codes for detailed illustration
            function drupal_json_output($var = NULL) {
              // We are returning JSON, so tell the browser.
              drupal_add_http_header('Content-Type', 'application/json');

              if (isset($var)) {
                echo drupal_json_encode($var);
              }
            }

            function drupal_json_encode($var) {
              // The PHP version cannot change within a request.
              static $php530;

              if (!isset($php530)) {
                $php530 = version_compare(PHP_VERSION, '5.3.0', '>=');
              }

              if ($php530) {
                // Encode <, >, ', &, and " using the json_encode() options parameter.
                return json_encode($var, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_AMP | JSON_HEX_QUOT);
              }

              // json_encode() escapes <, >, ', &, and " using its options parameter, but
              // does not support this parameter prior to PHP 5.3.0\.  Use a helper instead.
              include_once DRUPAL_ROOT . '/includes/json-encode.inc';
              return drupal_json_encode_helper($var);
            }

// parts of json-encode.inc - drupal_json_encode_helper(), responsible for json output:
    case 'array':
      // Arrays in JSON can't be associative. If the array is empty or if it
      // has sequential whole number keys starting with 0, it's not associative
      // so we can go ahead and convert it as an array.
      if (empty($var) || array_keys($var) === range(0, sizeof($var) - 1)) {
        $output = array();
        foreach ($var as $v) {
          $output[] = drupal_json_encode_helper($v);
        }
        return '[ ' . implode(', ', $output) . ' ]';
      }
      // Otherwise, fall through to convert the array as an object.

    case 'object':
      $output = array();
      foreach ($var as $k => $v) {
        $output[] = drupal_json_encode_helper(strval($k)) . ':' . drupal_json_encode_helper($v);
      }
      return '{' . implode(', ', $output) . '}'; 
```

如果有直接通过 jquery 消费 CSV 的解决方案，那就太好了。但目前还没有头绪。

我的问题是函数**_custom_json_from_csv()**为 ui.autocomplete 输出非预期格式。注意过多的 [[[...]]]：

```
[[["apple", "bananna", "jackfruit"]]] 
```

虽然 ui.autocomplete 想要：

```
["apple", "bananna", "jackfruit"] 
```

按jquery ui.autocomplete 预期格式化函数的任何方向？

PS：我不使用#autocomplete_path 表单API，而是使用ui.autocomplete，原因：

1）代码存储在主题设置中，主题没有可用的 hook_menu，我想尽可能避免使用此需要的模块。

2) 有一个使用 ui.autocomplete 的计划，所以考虑一下这个冒险

3）我之前从jquery的角度提出的问题导致我改正了json的输出，而不是让jquery适应json。

4）这更多是我的php问题而不是drupal

谢谢

更新：从 drupal_json_output(array(array_values($fruits))) 中删除一个数组；到 drupal_json_output(array_values($fruits)); 成功减少了一个**[]**（这个叫什么名字？）。显然与领导小组的先前格式相去甚远。 **[[“苹果”、“香蕉”、“菠萝蜜”]]**

我需要再删除一个**[]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:37:29.517

也许简单的是在 js 中使用 array[0][0](for drupal_json_output(array(array_values($fruits))); 在 php) 或 array[0] 在 js(for drupal_json_output(array_values($fruits));) 中php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:45:33.860

我认为你的代码是“正确的”，如果你有：

```
apple, bananna, jackfruit
peanut, walnut, almont
carrot, potato, pea 
```

那么你的功能最终会成为......等

```
[[apple, bananna, jackfruit],[peanut, walnut, almont],[carrot, potato, pea]] 
```

这似乎是明智的。

如果你只想要一行，为什么不能只使用结果

```
$FileContents = file($fruit_path); 
$fruits = str_getcsv($FileContents[0]); 
```

因为这将转换第一行中的值数组，而不是所有行的数组数组

# objective-c - 核心数据实体继承。根据属性值返回实体子类

> ID：10717605
> 
> 赞同：0
> 
> 时间：2012-05-23T09:59:39.637
> 
> 标签：objective-c, core-data

假设我们有***ServiceProvider***实体，其属性*为 identifier*。然后我创建从**ServiceProvider继承的****ConcreteServiceProvider**实体。我应该怎么做才能使核心数据返回**ServiceProvider**对象列表，除了标识符 == 5 的 ServiceProvider 它应该是**ConcreteServiceProvider**

 ******是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:02:06.503

**您只能在每个请求中获取一种实体。**

所以我将执行 ConcreteServiceProvider 实体的 NSFetchRequest 并将它的谓词设置为仅获取标识符 == 5 的那些。然后我将执行另一个 NSFetchRequest 但这次我将询问所有 ServiceProvider 实体。拥有 serviceProvider 实例的结果数组，我将遍历它们并将标识符 == 5 的那些替换为 ConcreteServiceProvider 实例..（假设那些实际上是 ConcreteServiceProvider 的实例，您可能需要引入一个辅助属性来区分，您不能避免它，因为您一次只能获取一种实体..)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:45:08.040

最后！正确的答案是用所需的实体预填充核心数据。******

# c# - foreach 和泛型编译器问题

> ID：10717608
> 
> 赞同：2
> 
> 时间：2012-05-23T09:59:45.560
> 
> 标签：c#, .net, generics, compiler-construction, foreach

我使用了类似于以下的接口和类：

```
public interface IIdentity
{
    int Id { get; set; }
}

public class Identity : IIdentity
{
    public int Id { get; set; }
} 
```

我正在创建`Identity`类的实例并将其添加到`List<Identity>`（后来称为实例创建块）。

```
var identities = new List<IIdentity>();
identities.Add( new Identity { Id = 1 } );
identities.Add( new Identity { Id = 2 } );
identities.Add( new Identity { Id = 3 } ); 
```

然后使用`identities`如下：

```
foreach ( IIdentity identity in identities )
{
    Console.WriteLine( "Plug-in: {0}", identity.Id.ToString() );
} 
```

最近我需要添加更多关于实例的数据，而不需要对和`IIdentity`进行任何修改。因此我添加了以下课程：`IIdentity``Identity`

```
public class Wrapper<T> where T : class
{
    public T WrappedObject { get; set; }
    public string Name { get; set; }
    public int Order { get; set; }
} 
```

并将实例创建块替换为以下内容：

```
var identities = new List<Wrapper<IIdentity>>();
identities.Add( new Wrapper<IIdentity> { WrappedObject = new Identity { Id = 1 }, Name = "John", Order = 1 } );
identities.Add( new Wrapper<IIdentity> { WrappedObject = new Identity { Id = 2 }, Name = "Jane", Order = 2 } );
identities.Add( new Wrapper<IIdentity> { WrappedObject = new Identity { Id = 3 }, Name = "Joe", Order = 3 } ); 
```

我期待我仍然需要对 foreach 块进行一些修改才能使应用程序编译。但是，应用程序编译成功并`System.InvalidCastException`在运行时抛出。

从提供的代码中可以看到，`Wrapper`不实现`IIdentity`接口。

但是，如果进行了以下两项修改之一，编译器会抱怨：

1.  `Wrapper`类是密封的。
2.  第 1 行替换为第 2 行

第 1 行：

```
foreach ( IIdentity identity in identities ) 
```

第 2 行：

```
foreach ( var identity in identities ) 
```

问题是为什么在修改 1 或 2 没有到位的情况下编译器成功编译了应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T10:03:20.477

编译器看到的类型`identities`是，它*可以*`List<Wrapper<IIdentity>>`看到`Wrapper<T>`没有实现。但是，这本身不足以产生编译时错误，因为某处可能存在这样的派生类：*`IIdentity`*

 *```
class DerivedWrapper<T> : Wrapper<T>, IIdentity { ... } 
```

的实例`DerivedWrapper`可以合法地放入`identities`其中，因此编译器必须在运行时尝试强制`identity`转换`IIdentity`并在失败时抛出异常。

这两个修改以不同的方式影响这一点：

1.  如果`Wrapper`是，`sealed`那么编译器知道不可能有这样的派生类，因此运行时强制转换永远不会成功；有帮助的是，它将此提升为编译时错误。

2.  如果使用隐式类型 with ，`var`则编译器解析`var`为 的静态类型`identity`，在本例中为`Wrapper<IIdentity>`。这意味着循环体试图访问不存在的成员`Wrapper<IIdentity>.Id`成员，因此会出现编译时错误。*

# parsing - 如何解析 EPS 以获得网格类数据？

> ID：10717611
> 
> 赞同：0
> 
> 时间：2012-05-23T09:59:51.047
> 
> 标签：parsing, 3d, ghostscript, mesh, eps

我的目标是将 EPS 文件导入应用程序（语言为 C++）以创建 3D 对象。我正在寻找一些库/工具，它可以帮助我将 EPS 解析为基元列表（圆形、线条、路径等，如 SVG）甚至轮廓数组。我已经尝试过首先使用 pstoedit 和 uniconverter 工具将 EPS 转换为 SVG 的方法。但有时这两种工具都会在数据丢失的情况下进行错误的对话。所以我不能说这种方式是可以接受的。有没有人有这方面的经验或有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:29:30.917

这是一个大工程。对于初学者，您将需要 PostScript 解释器，除此之外别无选择，因为 EPS 几乎可以包含任何内容。

与其编写自己的解释器，我建议您使用现有的解释器，实际上我建议您使用 Ghostscript，因为它是我所知道的唯一 GPL PS 解释器。

您可以编写一个包含方法的 Ghostscript，只要从输入中解释相关操作，就会执行这些方法。有一个现有的（非常有限的、不完整的）SVG 输出设备可以帮助您入门。

如果你想要一个通用的解决方案，你将不得不处理很多不同类型的操作；例如 PostScript 没有圆形图元，它的曲线都是贝塞尔曲线，有不同种类的线连接。您将需要考虑如何处理图像和可能的文本（可能丢弃这些）和阴影模式。您至少必须了解可以使用的各种色彩空间，即使您不打算自己使用它们。

鉴于 PostScript 本质上是 2D，我真的不知道您将如何构造 3D 对象，但这是一个不同的问题。

# ios - 如何从 NSDictionary 中获取字符串值？

> ID：10717613
> 
> 赞同：0
> 
> 时间：2012-05-23T10:00:10.517
> 
> 标签：ios, json, sdk, xcode4.2

json解析后，我得到这样的字典值

```
 NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                         options:kNilOptions error:&error]; 
```

打印 json 字典后，我得到以下输出

```
{
       Title= "hi";
        title2 = "welcome";
        FriendlyName = B325;
        Id = 1;
        MyLocation = "opp";
        sliders =         (
                        {
                NAme1 = hai;
                Name2 = "apple";
                Name3 = "world";
                Name4 = "happiness";
            }
        );
        Address = "northZone";
        Title3 = "hello world";
    },
        {
       title= "hi";
        title2 = "welcome";
        FriendlyName = B325;
        Id = 2;
        MyLocation = "opp1";
        sliders =         (
                        {
                NAme1 = hai;
                Name2 = "apple";
                Name3 = "world";
                Name4 = "happiness";
            }
        );
        Address = "westZone";
        Title3 = "hello world";
    },

    title= "hi";
    title2 = "welcome";
    FriendlyName = B325;
    Id = 3;
    MyLocation = "opp";
    sliders =         (
                    {
            NAme1 = hai;
            Name2 = "apple";
            Name3 = "world";
            Name4 = "happiness";
        }
    );
    Address = "southZone";
    Title3 = "hello world";
},
 '''''''''etc.,

NSMutableArray *resultArray = [json objectForKey:@"title"]; 
```

我想将字典字符串存储到结果数组中，但执行已在上述步骤中停止

我将如何将字典值存储到数组中？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:16:07.663

尝试使用此代码

```
NSMutableArray *resultArray = [[NSMutableArray alloc] init];
[resultArray addObject:[json objectForKey:@"title"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:21:58.147

从您显示的输出来看，您的 JSON 对象似乎已经是一个字典数组。但是，您的陈述/问题对我来说没有意义，所以我无法弄清楚您真正想要什么。

有更多奇特的方法可以访问您的数据，但这应该会给您一个基本的想法，并希望您能顺利上路……

```
if ([json isKindOfClass:[NSArray class]]) {
    // Your top-object is an array of objects.  It can hold strings, numbers,
    // arrays, dictionaries (and NSNull).
} else if ([json isKindOfClass:[NSDictionary class]]) {
    // your top level object is a dictionary
} 
```

从这里，您应该能够验证您拥有什么。我敢打赌你会得到一系列字典。此时，只需遍历顶级数组并查询每个字典的内容。

# ftp - 使用 TCL 将文件从一台服务器传输到另一台服务器时遇到困难

> ID：10717620
> 
> 赞同：1
> 
> 时间：2012-05-23T10:00:30.797
> 
> 标签：ftp, tcl, expect

我正在尝试借助 TCL 脚本将文件从一台服务器传输到远程服务器。但是我的脚本在消息“200 Port set OK”之后停止，并继续从下面的 telnet 会话中运行。

我检查了目标位置，我的文件没有传输。

请建议我能做什么或我错在哪里

```
#!/usr/bin/tclsh
#!/usr/bin/expect

package require Expect

set p "mm155_005.006.010.200_bt.fw"

#**************************************************************\
                FILE TRANSFER TO REMOTE SERVER                  \
***************************************************************
spawn ftp 10.87.121.26
expect "User (10.87.121.26:(none)):"
send "user\r"
expect "Password:"
send "pswd\r"

expect "ftp>"
send "cd FW\r"
expect "ftp>"
send "ha\r"
expect "ftp>"
send "bi\r"
expect "ftp>"

send "mput \"$p\"\r"
expect "mput $p? "
send "yes\r"
expect "ftp>"
send "ls\r"

#**************************************************************\
                RUNNING THE TRANSFERED FILE                     \
***************************************************************

spawn telnet 10.87.121.26
expect "Login: "
send "user\r"
expect "password: "
send "pswd\r"

expect "*? > "
send "cd FW\r"

expect "*? > "
send "burnboot 30 5.6(10.200)\r" 
```

## 输出

```
生成 ftp 10.87.121.26
连接到 10.87.121.26。
220 VxWorks FTP 服务器（VxWorks VxWorks5.4.2）准备就绪。
名称（10.87.121.26:vkumar）：用户
331 需要密码
密码：
230 用户登录
远程系统类型是 UNIX。
使用二进制模式传输文件。
ftp> cd 固件
250 将目录更改为“C:/FW”
ftp>哈哈
散列标记打印（1024 字节/散列标记）。
ftp>bi
200 类型设置为 I，二进制模式
ftp> mput "mm155_005.006.010.200_bt.fw"
输入 mm155_005.006.010.200_bt.fw？是的
200 Port set OK \ 我在这行之后看不到哈希进度条
生成远程登录 10.87.121.26
正在尝试 10.87.121.26...
连接到 10.87.121.26。
转义字符是 '^]'。

登录：用户
密码：

node84.7.PXM.a > cd FW

node84.7.PXM.a > bash-2.05b$

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:36:41.410

与其在 Expect 中推出自己的解决方案（大约 9 年前我也这样做过），不如使用 tcllib 中的 FTP 模块——它已经久经考验。

[http://tcllib.sourceforge.net/doc/ftp.html](http://tcllib.sourceforge.net/doc/ftp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:22:40.140

报告的脚本不太可能完全产生该输出；`ls`完成之后没有什么`mput`。但是，如果`mput`挂起，最可能的问题是存在[防火墙问题](http://slacksite.com/other/ftp.html)；FTP 使用多个套接字进行文件传输（这就是为什么 FTP 在整体防火墙管理方面如此痛苦的原因）。特别是，它有一个命令通道（您与 FTP 服务器通信的套接字）和每个文件的单独数据通道（以及一些远程命令的输出，例如`ls`）；就是这样`Port set okay`。这对防火墙不友好，并且很容易在该区域错误配置防火墙（尤其是当还有 NAT 时）。

您可能（即，*首先尝试这个*）想要使用被动模式，因为这样可以降低防火墙级别的复杂性。尝试`passive`在 the 之前发出 a `mput`（就像您当前发出`bi`nary 一样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:24:16.457

这是我用类似功能编写的 bash 脚本；

您应该能够使其适应您的需求。

在 SSH 中添加几行并运行脚本应该非常简单。

作为旁注；你为什么要使用TCL？

```
#!/bin/bash

fileName=`ls /home/user/downloads -t1 | head -n1`
latestFile="/home/user/downloads/$fileName"
echo $latestFile
hostname="HOSTNAME"
username="USER"
password="PASS"
ftp -inv $hostname << EOF
quote USER $username
quote PASS $password
cd transfer/jirabackup 
binary
put $latestFile $fileName
quit 
```

# java - 如何将文档侦听器添加到面板内的 JTextFields？

> ID：10717623
> 
> 赞同：1
> 
> 时间：2012-05-23T10:00:36.690
> 
> 标签：java, swing, jtextfield, documentlistener

我有一个扩展 JPanel 的类，在这个面板中我添加了很多 textField。我想将 DocumentListener 添加到每个 textField 以检测文本的更改并将 txtField 的背景更改为红色。我做了如下的事情，但还没有工作。

**任何人都可以帮助解决它还是欢迎任何新的建议？**

```
public class MainDetailPanel extends JPanel implements DocumentListener{
public JLabel lblS_DWLDIRPRDPIC,lblL_DWLDIRPRD,lblS_UPLDIR,lblL_UPLDIR,lblS_DWLDIRPRD;
public JLabel lblFTP_DEFDIR,lblFTP_SERVER,lblFTP_POORT,lblFTP_USER,lblFTP_PASWOORD,lblL_CFDIR;
public JLabel lblL_DWLDIRPRDPIC,lblS_CFDIR,lblS_CFNAME,lblS_DWLNAMEPRD,lblS_DWLNAMEPRDPIC;

public JTextField txtL_DWLDIRPRD,txtS_DWLDIRPRDPIC,txtL_UPLDIR,txtS_DWLNAMEPRDPIC,txtL_CFDIR;
public JTextField txtFTP_DEFDIR,txtFTP_SERVER,txtFTP_POORT,txtFTP_USER,txtFTP_PASWOORD,txtS_UPLDIR;
public JTextField txtL_DWLDIRPRDPIC,txtS_CFDIR,txtS_CFNAME,txtS_DWLNAMEPRD,txtS_DWLDIRPRD;
public MainDetailPanel() {
    createComponents();
    layoutComponents();
}

private void createComponents() {
    txtL_DWLDIRPRD      = new JTextField(30);
    txtL_DWLDIRPRD.getDocument().addDocumentListener(this);
    txtS_DWLDIRPRDPIC   = new JTextField(30);
    txtL_UPLDIR         = new JTextField(30);
    txtS_DWLNAMEPRDPIC  = new JTextField(30);
    txtFTP_DEFDIR       = new JTextField(30);
    txtFTP_SERVER       = new JTextField(30);
    txtFTP_POORT        = new JTextField(30);
    txtFTP_USER         = new JTextField(30);
    txtFTP_PASWOORD     = new JTextField(30);
    txtL_CFDIR          = new JTextField(30);
    txtL_DWLDIRPRDPIC   = new JTextField(30);
    txtS_UPLDIR         = new JTextField(30);
    txtS_CFDIR          = new JTextField(30);
    txtS_CFNAME         = new JTextField(30);
    txtS_DWLNAMEPRD     = new JTextField(30);
    txtS_DWLDIRPRD      = new JTextField(30);

    lblFTP_DEFDIR       = new JLabel("FTP_DEFDIR");
    lblFTP_SERVER       = new JLabel("FTP_SERVER");
    lblFTP_POORT        = new JLabel("FTP_POORT");
    lblFTP_USER         = new JLabel("FTP_USER");
    lblFTP_PASWOORD     = new JLabel("FTP_PASWOORD");
    lblL_CFDIR          = new JLabel("L_CFDIR");
    lblL_UPLDIR         = new JLabel("L_UPLDIR");
    lblL_DWLDIRPRDPIC   = new JLabel("L_DWLDIRPRDPIC");
    lblS_CFDIR          = new JLabel("S_CFDIR");
    lblS_CFNAME         = new JLabel("S_CFNAME");
    lblS_DWLNAMEPRD     = new JLabel("S_DWLNAMEPRD");
    lblS_DWLDIRPRD      = new JLabel("S_DWLDIRPRD");
    lblS_DWLNAMEPRDPIC  = new JLabel("S_DWLNAMEPRDPIC");
    lblS_UPLDIR         = new JLabel("S_UPLDIR");
    lblS_DWLDIRPRDPIC   = new JLabel("lblS_DWLDIRPRDPIC");
    lblL_DWLDIRPRD      = new JLabel("lblL_DWLDIRPRD");
}

private void layoutComponents() {
    setLayout(new ParagraphLayout());
    add(lblFTP_DEFDIR, ParagraphLayout.NEW_PARAGRAPH);
    add(txtFTP_DEFDIR);
    add(lblFTP_SERVER, ParagraphLayout.NEW_PARAGRAPH);
    add(txtFTP_SERVER);
    add(lblFTP_POORT, ParagraphLayout.NEW_PARAGRAPH);
    add(txtFTP_POORT);
    add(lblFTP_USER, ParagraphLayout.NEW_PARAGRAPH);
    add(txtFTP_USER);
    add(lblFTP_PASWOORD, ParagraphLayout.NEW_PARAGRAPH);
    add(txtFTP_PASWOORD);
    add(lblL_CFDIR, ParagraphLayout.NEW_PARAGRAPH);
    add(txtL_CFDIR);
    add(lblL_UPLDIR, ParagraphLayout.NEW_PARAGRAPH);
    add(txtL_UPLDIR);
    add(lblL_DWLDIRPRD, ParagraphLayout.NEW_PARAGRAPH);
    add(txtL_DWLDIRPRD);
    add(lblL_DWLDIRPRDPIC, ParagraphLayout.NEW_PARAGRAPH);
    add(txtL_DWLDIRPRDPIC);
    add(lblS_UPLDIR, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_UPLDIR);
    add(lblS_CFDIR, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_CFDIR);
    add(lblS_CFNAME, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_CFNAME);
    add(lblS_DWLNAMEPRD, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_DWLNAMEPRD);
    add(lblS_DWLDIRPRD, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_DWLDIRPRD);
    add(lblS_DWLNAMEPRDPIC, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_DWLNAMEPRDPIC);
    add(lblS_DWLDIRPRDPIC, ParagraphLayout.NEW_PARAGRAPH);
    add(txtS_DWLDIRPRDPIC);
}

public void insertUpdate(DocumentEvent e) {
    ((JTextField)e.getDocument()).setBackground(Color.red);
}

public void removeUpdate(DocumentEvent e) {
    ((JTextField)e.getDocument()).setBackground(Color.red);
}

public void changedUpdate(DocumentEvent e) {
    ((JTextField)e.getDocument()).setBackground(Color.red);
}

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T10:23:46.690

您不能将 Document 转换为 JTextField。JTextField*有*一个文档。但是 JTextField`is not a`文件。

AFAIK，您必须为每个 JTextField 使用单独的侦听器，并将 JTextField 的引用提供给您的侦听器：

```
private static class BecomingRedDocumentListener implements DocumentListener {
    private JTextField textField;

    public BecomingRedDocumentListener(JTextField textField) {
        this.textField = textField;
    }
    @Override
    public void insertUpdate(DocumentEvent e) {
        textField.setBackground(Color.red);
    }
    @Override
    public void removeUpdate(DocumentEvent e) {
        textField.setBackground(Color.red);
    }
    @Override
    public void changedUpdate(DocumentEvent e) {
        textField.setBackground(Color.red);
    }
} 
```

你应该使用工厂方法来创建你的文本字段：

```
private JTextField createTextFieldBecomingRed() {
    JTextField tf = new JTextField(30);
    tf.addDocumentListener(new BecomingRedDocumentListener(tf));
    return tf;
} 
```

# html - 垂直对齐问题

> ID：10717628
> 
> 赞同：0
> 
> 时间：2012-05-23T10:00:50.973
> 
> 标签：html, css, vertical-alignment

我试图让一个垂直对齐在显示为表格单元格的 div 上工作。

有关 html/css，请参阅[http://jsfiddle.net/midnitesonnet/Rwahk/](http://jsfiddle.net/midnitesonnet/Rwahk/)。

我似乎无法让显示垂直对齐到底部。任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:09:21.410

您定义`display:table-cell`&`position:absolute`会产生问题。只需删除您的**.title** DIV `height`。

```
#whats_available .title {
    position: absolute;
    z-index: 1000;
    bottom: 0;
    left: 0;
    text-align: center !important;
    width: 100%;
    color: #fff;
} 
```

检查这个[http://jsfiddle.net/Rwahk/5/](http://jsfiddle.net/Rwahk/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:10:11.553

[http://jsfiddle.net/Rwahk/7/](http://jsfiddle.net/Rwahk/7/)按您的意愿工作...

所做的更改是添加`display: table;`到`#whats_available > div`和更改`.title`为`position: relative;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:05:29.640

您应该将内部 div 的高度更改为 30px 而不是 100% [http://jsfiddle.net/Rwahk/4/](http://jsfiddle.net/Rwahk/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:07:49.320

您不应该在纯 html 中使用尺寸属性（唯一的例外可能是图像，但这仍然是一个坏主意）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T10:09:52.510

我编写了这个小 jQuery 函数，它可能对您或其他读者有用。

```
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", (($(window).height() - this.outerHeight()) / 2) + $(window).scrollTop() + "px");
    this.css("left", (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft() + "px");
    return this;
} 
```

采用：

```
$(selector).center(); 
```

享受并度过美好的一天:)

# php - Symfony2 容器合并/添加参数到特定键

> ID：10717633
> 
> 赞同：1
> 
> 时间：2012-05-23T10:01:16.673
> 
> 标签：php, symfony

我有一个容器：

```
$newContainer = new ContainerBuilder(); 
```

我加载了一些参数：

```
$loader = new YamlFileLoader($newContainer, new FileLocator(__DIR__.'/../Resources/config/newFolder'));
$loader->load('newParameters.yml'); 
```

我的容器看起来像这样：

```
 [parameters:protected] => Array
        (
            [exampleKey => Array
                (
                    [parameter] => something value
                    [anotherParameter] => another value
                )

        ) 
```

现在我进行合并：

```
$container->merge($newContainer); 
```

我的合并看起来像这样 - print_r($container)：

```
 [parameters:protected] => Array
        (
            [existing] => Array
                (
                ...
                )
            [existing2] => Array
                (
                ...
                )          
            [exampleKey => Array
                (
                    [parameter] => something value
                    [anotherParameter] => another value
                )
            [existing3] => Array
                (
                ...
                )    
        ) 
```

**如何合并我的容器所以我有这个？？：**

```
 [parameters:protected] => Array
        (
            [existing] => Array
                (
                ...
                )
            [existing2] => Array
                (
                ...
                [exampleKey => Array
                    (
                        [parameter] => something value
                        [anotherParameter] => another value
                    )                    
                )          
            [existing3] => Array
                (
                ...
                )    
        ) 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:54:15.063

不要使用合并，使用 add()：

```
$container->getParameterBag()
          ->add(array(
              'existing2' => $newContainer->getParameterBag()->all()
          )); 
```

我不知道$container->getParameterBag() 后面隐藏了一些方法，你可以使用：->all()、set()、has()、get() 等。非常有用。谢谢

# javascript - 试图在android webview中附加图像

> ID：10717635
> 
> 赞同：0
> 
> 时间：2012-05-23T10:01:25.393
> 
> 标签：javascript, android, function, webview

因此，我一直在尝试找到使用 javascript 在 webview 中附加图像的最简单方法。我自己写了 html 并包含了我自己的函数，看起来像这样：

```
<script type="text/javascript">

function image(src) {
    var img = document.createElement("IMG");
    img.src = src;
    document.getElementById('image').appendChild(img);
}
</script> 
```

我发现我不能只使用 myview.loadurl(javascript:image('line1.png')); 所以我想弄清楚我怎么能做到这一点。我正在考虑将此函数降级为我可以放入 loadurl() 的一行代码，但我似乎也遇到了一个错误。我听说过使用 addJavascriptInterface ，但它看起来很复杂，我不确定它是否适合我想要的。那么我最好的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:48:47.743

就是这么简单。尝试以下

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.webkit.WebView;

public class StackOverFlowActivity extends Activity {

    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView view=(WebView)findViewById(R.id.webView1);
        view.getSettings().setJavaScriptEnabled(true);
        view.loadUrl("file:///android_asset/index.html");
        view.addJavascriptInterface(new MyJavaScriptInterface(), "Android");
    }

    final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                    String url="file:///android_asset/img.jpg";
                                webview.loadUrl("javascript:image(\""+url+"\")");
                            }
                    });
            }
    }
} 
```

索引.html：

```
<script type="text/javascript">
 function getimage()
 {
   Android.ProcessJavaScript("image",null); 
 }

function image(src) {
    var img = document.createElement("IMG");
    img.src = src;
    document.getElementById('image').appendChild(img);
}
</script> 
```

并添加以下内容，

```
<body onload="getimage()" > 
```

**要传递更多图像：**

```
function image(src) {

        //var img = document.createElement("IMG");
        //img.src = src;
       // document.getElementById('image').appendChild(img);
            images = eval('(' + src+ ')');
            for (i = 0; i < images.length; i++) {    
            var img = document.createElement("IMG");
            img.src = images[i];            
              document.getElementById('image').appendChild(img);
            }
    } 
```

并且您在加载 url 中传递字符串数组而不是字符串，例如

```
final class MyJavaScriptInterface
        {
            public void ProcessJavaScript(final String scriptname, final String args)
                {             
                    mHandler.post(new Runnable()
                        {
                            public void run()
                                {
                        //String url="file:///android_asset/img.jpg";
                                    //webview.loadUrl("javascript:image(\""+url+"\")");
                                    ArrayList<String> url=new ArrayList<String>();
                                    url.add("file:///android_asset/img1.jpg");
                                    url.add("file:///android_asset/img2.jpg");
                                    url.add("file:///android_asset/img3.jpg");
                                    webview.loadUrl("javascript:image(\""+url+"\")");
                                }
                        });
                }
        } 
```

**要多次调用图像脚本：**

```
 final class MyJavaScriptInterface
            {
                public void ProcessJavaScript(final String scriptname, final String args)
                    {             
                        mHandler.post(new Runnable()
                            {
                                public void run()
                                    {
                                      // you can load url anywhere in this application. check below to call this inside the other function.
                                       callimageFirstTime(scriptname,args);
                                     // check below to loadurl in other class Test.java
                                      Test newtest=new Test();
                                      newtest.methodtoloadurl(scriptname,args);
                                    }
                            });
                    }
            }

public void callimageFirstTime(String script, String arguments)
{
  // add images with String array and pass here
  webview.loadUrl("javascript:image(\""+url+"\")");

} 
```

# asp.net - 验证摘要自动更新

> ID：10717638
> 
> 赞同：1
> 
> 时间：2012-05-23T10:01:33.567
> 
> 标签：asp.net

在我的 asp.net 应用程序中，我尝试在我的网页中使用验证摘要。我有类似的控件

```
<td>First Name *</td>
<td>                                                        
    <asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox> 
    <div>
        <asp:RequiredFieldValidator ID="reqValStaffFirstName" runat="server" 
                 ErrorMessage="Enter FirstName" Text="*" 
                 ControlToValidate="txtFirstName" Display="Dynamic" 
                 ValidationGroup="valGrpStaffGeneral">
         </asp:RequiredFieldValidator>
    </div>
</td>
<td>Last Name *</td> 
<td>
    <asp:TextBox ID="txtLastName" runat="server"></asp:TextBox> 
    <div>
        <asp:RequiredFieldValidator ID="reqValStaffLastName" runat="server" 
                 ErrorMessage="Enter LastName" Text="*" 
                 ControlToValidate="txtLastName" Display="Dynamic" 
                 ValidationGroup="valGrpStaffGeneral">
         </asp:RequiredFieldValidator>
    </div>
</td>
<td>
     <asp:Button Id="btnSave" runat="server" ValidationGroup="valGrpStaffGeneral">
<td> 
```

我的验证摘要脚本是

```
<asp:ValidationSummary ID="summary1" ShowSummary="true" runat="server" 
         ValidationGroup="valGrpStaffGeneral" DisplayMode="BulletList" /> 
```

如果我单击`save`按钮而不在 textbox1 和 textbox2 中填写任何内容，则它会在我的验证摘要区域中显示验证错误。如果我在我的文本框中填写任何内容并按选项卡，则错误（*）会自动消失，但验证摘要中的错误不会自动更改并且在我单击保存按钮之前它会显示，我应该怎么做才能使验证摘要更改为已修复自动出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:04:09.033

这可能会有所帮助 - 查看控件的`EnableClientScript`属性`ValidationSummary`。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary.enableclientscript.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary.enableclientscript.aspx)

# javascript - 了解jquery和ajax

> ID：10717650
> 
> 赞同：0
> 
> 时间：2012-05-23T10:02:35.813
> 
> 标签：javascript, jquery

我被分配了一个涉及大量 jQuery 的项目。我很容易使用它，但是以前的开发人员使用了以下代码，这对我来说是全新的，我不知道它的作用。

```
$.extend({
    ay: {
        ajaxRequest: {
            abort: function(){}
        }
    }
}); 
```

我可以说这`ay`是所有项目的配置文件和模板所在的目录名称。任何人都可以解释这段代码吗？谢谢

我还在项目中看到了这段代码：

```
$.ay.ajaxRequest = $.ajax({
    data: {
        ay: {
            action: 'update',
            element: {
                id: $(this).data().id
            },
            input: {
                name: $(this).attr('name'),
                value: $(this).val()
            }
        }
    },
    type: 'post'
});​ 
```

在这个示例代码中，没有 php 脚本的 url 或路径，你能解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:06:49.010

他正在使用[`jQuery.extend()`](http://api.jquery.com/jQuery.extend/)扩展jQuery来添加一个`ay`属性，这是一个具有`ajaxRequest`属性的对象，这是另一个具有`abort`空函数（noop）属性的对象。

所以你可以这样做；

```
jQuery.ay.ajaxRequest.abort(); 
```

如果你愿意，它绝对不会做任何事情。

至于为什么这是有用的；您必须检查其余代码以查看他在哪里调用它。

有关扩展 jQuery 的更多信息，请参阅[文档](http://docs.jquery.com/Plugins/Authoring)。

**编辑：**为了解决第二部分，如果他在您看到该代码之前扩展 jQuery，那么他将`ajaxRequest`替换`jQuery.ajax()`. 如果他在该代码之后扩展 jQuery，那么他将覆盖该`abort()`方法而不做任何事情；基本上没有人可以取消 AJAX 请求。

这样`jQuery.extend()`做很奇怪，我会这样做：

```
jQuery.ay.ajaxRequest.abort = jQuery.noop; 
```

他必须使用[`jQuery.ajaxSetup()`](http://api.jquery.com/jQuery.ajaxSetup)（设置 AJAX 默认值）声明该 AJAX 请求的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:06:35.623

该代码向 jQuery 对象 ($) 添加了一个名为 ay 的属性，从而使代码成为`$.ay.ajaxRequest.abort()`可能。

如果您传递一个参数来扩展该参数，它将扩展它自己的 jQuery 命名空间。这意味着参数的每个属性都将被克隆到 jQuery 对象中。在您的情况下，有一个名为 ay 的属性被克隆到 jQuery 对象中。使用具有一个属性的对象调用 extend 等于

```
$.ay = {
          ajaxRequest : {...}
       }; 
```

# python - Python 模块中的 for 循环

> ID：10717653
> 
> 赞同：0
> 
> 时间：2012-05-23T10:02:43.553
> 
> 标签：python, function, module, for-loop, numpy

我正在为求解特定微分方程的隐式方案编写函数。该函数如下所示：

```
import numpy as np

def scheme(N,T):
    y = np.zeros(N+1)          # Array for implicit scheme
    h = T/N                    # Step length
    for i in range(N):
        y[i+1] = y[i] + h*(1+4*y[i])

    print y 
```

我保存文件，然后以通常的方式导入它，但是当我运行方案函数时，零在`y = [0 ... 0]`哪里。似乎这些值在 for 循环的范围内丢失了。`...``N-1`

如果我改为在解释器（在我的例子中是 Spyder）中编写整个函数，那么一切都会正常工作。

为什么从模块导入函数时不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:31:32.980

```
h = T/N 
```

是否可能`T`和`N`都是整数和`T < N`？在那种情况下`h = 0`（并且`y`保持全零），因为它是一个整数除法（`1/2 == 0`）。

尝试将此行替换为

```
h = 1\. * T / N 
```

并查看结果。

```
y[i+1] = y[i] + h*(1+4*y[i]) 
```

可以改写为

```
y[i+1] = y[i] + h + 4 * h * y[i]
               ^^^ 
```

这意味着对于`y[i] = 0`，新的`y[i+1]`将是`h`。如果整数除法`T/N`使其为零，那么这就是你得到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:33:13.333

通常，如果你在 python 中将两个整数相除，你也会将整数四舍五入到负无穷大。所以

```
1/3 == 0 
```

在您的示例中，如果*T*和*N*是整数并且*T* < *N*，则*h*将为 0。如果*h*为 0，则*y*的所有元素也将为 0。这可以通过将 value 转换为 float 来修复，即

```
float(1)/3 == 0.333 
```

在你的情况下：

```
h = float(T)/N 
```

不熟悉 Spyder，但快速查看文档显示，它是为科学家准备的。也许这个解释器总是使用浮点除法。

# python - 为什么 ** 在函数调用中不解包 kwargs？

> ID：10717655
> 
> 赞同：8
> 
> 时间：2012-05-23T10:02:46.210
> 
> 标签：python, arguments, keyword-argument

这是困扰我一段时间的事情：

```
def test (*args, **kwargs):
    print target

test(foo='bar', target='baz') 
```

我假设`target='test'`在底部的 aFunc 调用中会以 kwargs 结尾（确实如此），并且我还假设 ** 会在函数调用中解包 kwargs，因此 target 将作为关键字参数存在于 aFunc 中。它没有。我知道它是以字典的形式出现的，但我需要在参数列表中解压该字典。这可能吗？简而言之，有没有办法让 *args 和 **kwargs 消失并让实际的 args 和 kwargs 进入通话？

**编辑**：我整理了一个案例，其中 *args 和 **kwargs 的解包可能会有所帮助：

假设我有一个打印列表的函数：

```
def printList (inputList=None):
    print inputList 
```

我希望能够不传递任何列表并提供默认列表：

```
def ensureList (listFunc):
    def wrapper (inputList=None):
        listFunc(inputList=inputList or ['a','default','list'])
    return wrapper

@ensureList
def printList (inputList=None):
    print inputList 
```

现在我想用一个列表中继器变得更复杂一点：

```
@ensureList
def repeatList (inputList=None):
    print inputList*2 
```

这很好用。但现在我想要变量重复：

```
@ensureList
def repeatList (times, inputList=None):
    print inputList*times 
```

现在你可以说：

```
repeatList(5) 
```

它将生成默认列表并重复 5 次。

当然，这会失败，因为 wrapper 无法处理 times 参数。我当然可以这样做：

```
@ensureList
def repeatList (inputList=None, times=1) 
```

但是我总是必须这样做：

```
repeatList(times=5) 
```

也许在某些情况下我想强制提供一个值，所以非关键字 arg 是有意义的。

当我去年第一次遇到这样的问题时，我认为一个简单的解决方案是删除对包装器的要求：

```
def ensureList (listFunc):
    "info here re: operating on/requiring an inputList keyword arg"
    def wrapper (*args, **kwargs):
        listFunc(inputList=inputList or ['a','default','list'])
    return wrapper 
```

但是，这行不通。这就是为什么我想让 args 和 kwargs 真正扩展，或者我想有办法进行扩展。然后，无论我提供什么 args 和 kwargs，它们实际上都会填写参数，而不是列表和字典。包装器中的文档将解释要求。如果传入inputList，它实际上会进入，并且从包装器回调repeatList 中的inputList 将是有效的。如果您没有传入 inputList，它会在对 repeatList 的回调中使用默认列表创建它。如果您的函数不在乎，但使用了 *kwargs，它会优雅地接受它而不会出现问题。

如果以上任何一个错误（超出一般概念），我们深表歉意。我在这里打出来的，未经测试，已经很晚了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T10:12:25.597

“*为什么不**在函数调用中解包 kwargs？* ”的答案是：因为这是一个坏主意，开发函数的人不希望局部变量仅根据调用参数出现。

所以，这不是它的工作方式，你肯定不希望 python 表现得那样。

要访问`target`函数中的变量，您可以使用：

```
def test(target='<default-value>', *args, **kwargs):
    print target 
```

或者

```
def test(*args, **kwargs):
    target = kwargs.get('target', '<default-value>')
    print target 
```

但是，如果您想要破解（*仅限教育用途*）来解压 **kwargs，您可以尝试：

```
def test(*args, **kwargs):
    for i in kwargs:
        exec('%s = %s' % (i, repr(kwargs[i])))
    print target 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:08:49.913

这种特殊情况的明显方法是

```
def test(foo=None, target=None):
    print target

test(foo='bar', target='baz') 
```

如果要按名称访问函数内部的参数，请在参数列表中明确命名。

# android - 位置重新启动列表视图中的画廊

> ID：10717659
> 
> 赞同：2
> 
> 时间：2012-05-23T10:03:04.260
> 
> 标签：android, listview, gallery

在我的应用程序中，我在 Listview 中使用 Gallery 视图。而滚动 Listview 项目显示第一个位置。意味着在我的屏幕上 4 行可见 0,1,2,3。要查看第五行，我正在向上滚动。在这种情况下，第 5 个位置值显示为 0 而不是 5。提前感谢您的任何建议。

```
public class TestprojectActivity extends Activity {
ListView listView;
LayoutInflater inflater;
int gloppos;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    listView=(ListView)findViewById(R.id.listView);
    ladapter=new ListViewAdapter(this);
    listView.setAdapter(ladapter);
}
private class ListViewAdapter extends BaseAdapter{
  Context context;
  public ListViewAdapter(Context context){
    this.context=context; 
    inflater=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

   }
  @Override
  public int getCount() {
    // TODO Auto-generated method stub
    return 30;
  }

  @Override
  public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
  }

  @Override
  public long getItemId(int position) {
    // TODO Auto-generated method stub
    return  position;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    Gallery mygallery;
    if(convertView==null){
        convertView=inflater.inflate(R.layout.mygallary,null);
        mygallery=(Gallery)convertView.findViewById(R.id.listgallary);
        convertView.setTag(mygallery);
      }else{
        mygallery=(Gallery)convertView.getTag();
      }
    Toast.makeText(TestprojectActivity.this,"List pos "+position, Toast.LENGTH_SHORT ).show();
    gloppos=position;
    GallaryAdapter adpt=new GallaryAdapter(position);
    mygallery.setAdapter(adpt);
    return convertView;
  }

}
private class GallaryAdapter extends BaseAdapter{
  int listpos;  
  public GallaryAdapter(int pos){
      listpos=pos;
    }
  @Override
  public int getCount() {
    // TODO Auto-generated method stub
    return 10;
  }

  @Override
  public Object getItem(int c) {
    // TODO Auto-generated method stub
    return null;
  }

  @Override
  public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView==null){

          convertView=inflater.inflate(R.layout.gallaryitems,null);
          TextView text=(TextView)convertView.findViewById(R.id.txt);
          text.setText("GALLARYPOS  "+position);
          TextView num=(TextView)convertView.findViewById(R.id.num);

          num.setText("LSTVIEWPOS  "+listpos);
        }
        Toast.makeText(TestprojectActivity.this,"calledin gallery "+gloppos,    Toast.LENGTH_SHORT ).show(); 
    return convertView;
  }

} 
```

}

# jquery - Asp.Net-MVC3 - 如何使用视频网址在页面上播放上传的视频

> ID：10717661
> 
> 赞同：-1
> 
> 时间：2012-05-23T10:03:18.800
> 
> 标签：jquery, asp.net-mvc-3

我想使用视频 url 在我的页面上播放 flash 视频，例如。在同一页面上提交视频播放后，我有一个用于提交视频 URL（任何 youtube、vimeo、hulu 视频 url）的文本框。

我的代码是

```
@using (Html.BeginForm())
{
    @Html.TextBox("url")
    <input type="submit" id="submit" value="Submit Video Url" />
    <br /> 
}

    <div id="frame">
    <iframe id="testIframe" width="420" height="315" src="" frameborder="0"></iframe>
    </div>
<script type="text/javascript">
    $(document).ready(function () {
        var url = '';
        $('#submit').click(function () {
            if ($('#url').val() != '') {
                $("#testIframe").attr("src", $('#url').val());

                return false;
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:20:23.130

视频嵌入代码可以选择将其设置为自动播放，因此您必须检查每个提供商的代码。如果找不到，您可以查看此示例：http: [//videoplayer.codeplex.com/](http://videoplayer.codeplex.com/)

# directshow - 我们可以为同一个 DirectShow 图形的预览和捕获设置不同的分辨率吗？

> ID：10717662
> 
> 赞同：0
> 
> 时间：2012-05-23T10:03:20.250
> 
> 标签：directshow, webcam, resolution, preview

我有 2 个流，一个用于预览，一个用于在我的 DirectShow 应用程序中捕获。现在，我们观察到 1080P 视频和 1280*720 视频的预览速度很慢。我想知道我们是否有任何方法可以为捕获和预览流提供不同的分辨率。如果有的话，我可以单独在捕获端使用高分辨率，在预览时，我可以显示低分辨率。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:45:17.123

您可以将捕获输出连接到 Infinite Tee 过滤器。使用 tee 过滤器的一个输出进行捕获，将第二个输出连接到调整大小过滤器，然后使用它进行预览。

在某些硬件上，您可以直接以不同的分辨率使用预览输出。但并非所有硬件都支持这一点。例如，某些硬件无法缩放预览，因此如果您使用较低的分辨率，您只能看到视频的左上角部分。而其他硬件根本没有预览图钉……

# c# - Ajax 请求不起作用（asp.net-mvc）

> ID：10717664
> 
> 赞同：1
> 
> 时间：2012-05-23T10:03:33.293
> 
> 标签：c#, ajax, asp.net-mvc-3

看法：

```
@{
    AjaxOptions ajax = new AjaxOptions() { HttpMethod = "POST", UpdateTargetId = "sub_id" };
    Layout = null;       
}

<div id="sub_id"></div>

@using (Ajax.BeginForm(ajax))
{
    @Html.TextBox("email");
    <input type="submit" value="подписаться" />
} 
```

控制器：

```
[HttpPost]
public ContentResult LeftMenuSubscription(string email)
{
    return new ContentResult(){Content = "<script>alert('Thanks')</script>"};
} 
```

“谢谢”警报节目。

但在 div 中`sub_id`设置所有 page( `<title></title><div>...</div>`)。

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

- 连接的。

html:

```
<html>
    <head>
        <title>Главная страница</title>
        <link href="/Content/Site.css" rel="stylesheet" type="text/css">
        <script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"</script>
        <script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
        <script src="/Scripts/jQueryFixes.js" type="text/javascript"></script>
    </head>
    <body>
        ....
        <form action="/" data-ajax="true" data-ajax-method="POST" data-ajax-mode="replace" data-ajax-update="#sub_id" id="form0" method="post">
            <input id="email" name="email" type="text" value="">
            <input type="submit" value="подписаться">
        </form>
        ....
    </body>
</html> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:36:01.393

在我看来，您的 Ajax 选项不完整。我相信您需要添加您请求的操作：

```
@using (Ajax.BeginForm("ActionName", "ControllerName", ajax))
{
    @Html.TextBox("email");
    <input type="submit" value="подписаться" />
} 
```

在测试中运行它我会收到一个弹出警报，这正是应该发生的事情，因为您正在返回一个脚本，上面写着：`<script>alert('Thanks')</script>`

如果您只想显示 div`Thanks`则不要返回脚本标签

如果您只想在 div 中显示感谢一词，请使用此选项

```
[HttpPost]
public ContentResult Test(string email) 
    return new ContentResult() { Content = "<span>Thanks</span>" };
} 
```

这非常适合我使用修改后的表格

```
@using (Ajax.BeginForm("Test", "Test", ajax))
{
    @Html.TextBox("email");
    <input type="submit" value="Save" />
} 
```

# ruby-on-rails-3 - 防止在 Rails 3.2.2 上为 RESTful api 创建会话

> ID：10717667
> 
> 赞同：12
> 
> 时间：2012-05-23T10:03:43.407
> 
> 标签：ruby-on-rails-3, session, devise, warden, session-storage

如何防止会话存储在 JSON/XML 调用上创建会话？

我的问题是我将会话保存在数据库中，并且它被多个 api 调用淹没。

我正在使用 Rails 3.2.2 和 Devise 进行身份验证。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T16:03:30.250

我的问题是与 Devise 内部的 Warden 有关。在用户通过身份验证后，我不得不“告诉”Warden 不要将用户存储在会话中。

```
resource = warden.authenticate!(:scope => resource_name, :store => !(request.format.xml? || request.format.json?)) 
```

希望对看到这个帖子的人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:29:00.497

```
resource = warden.authenticate!(:scope => resource_name, :store => is_navigational_format?) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:36:52.140

理论上如果你不使用它，它现在不会加载。直到 rails 2.3.8，你可以这样做：

```
# application_controller.rb
session :off, :if => :sessionless_request?

protected

def sessionless_request?(request)
  request.format == :xml || request.format == :json
end 
```

现在你可以对这个 gem 做同样的事情 [https://github.com/kares/session_off](https://github.com/kares/session_off)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-13T09:48:16.640

您应该在模型中使用“devise :timeoutable”并在 config/initializers/devise.rb 中使用 config.timeout_in = 0

重启你的服务器！

# magento - Magento 安装 - 可以访问管理面板

> ID：10717668
> 
> 赞同：2
> 
> 时间：2012-05-23T10:03:46.257
> 
> 标签：magento

在我的本地主机中，我安装了 Magento。我可以看到前端，但看不到后端。当我尝试输入错误的用户名和密码来访问后端时，它会抛出错误消息。但是，当我提供有效的用户名和密码来访问管理员时，它只会保留在同一个登录页面中，没有任何错误消息，

网址显示为

```
http://localhost/magento/index.php/myadmin/index/index/key/3a3f51c8c24d767533889679cd7e85f2/ 
```

这是我第一次安装 Magento。这是安装问题还是我需要配置的任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:35:12.590

使用 Firefox 而不是 Chrome ;) 我所知道的是，默认情况下浏览器不会为 localhost 保存 cookie，因此除非您在 chrome 中为 localhost 明确设置 cookie，否则登录在 chrome 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T11:53:13.057

`magento/index.php/admin/index/login/key/`

只需将上面的 url 添加到您的 localhost 是这样的：

```
//localhost/magento/index.php/admin/index/login/key/ 
```

密钥是自动生成的，因此您不必担心。

# iphone - 如何在目标 C 中将 JSON 转换为 XML？

> ID：10717669
> 
> 赞同：1
> 
> 时间：2012-05-23T10:03:47.260
> 
> 标签：iphone, xml, json

我正在使用 JSON 转换器将 XML 字符串转换为 JSON 字符串。我需要再次将此 JSON 字符串转换回 XML 字符串。有什么具体的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-28T15:17:36.153

使用此代码，您可以将**JSON**转换为**NSDictionary**

```
NSString * jsonString = @"blblblblblb";
NSStringEncoding  encoding;
NSData * jsonData = [jsonString dataUsingEncoding:encoding];
NSError * error=nil;
NSDictionary * parsedData = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error]; 
```

请使用以下代码将 NSDictionary 转换为 XML。所以你可以有 JSON 到 XML 的转换器。

```
+(NSString*)ConvertDictionarytoXML:(NSDictionary*)dictionary withStartElement:(NSString*)startele
{
    NSMutableString *xml = [[NSMutableString alloc] initWithString:@""];
    NSArray *arr = [dictionary allKeys];
    [xml appendString:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"];
    [xml appendString:[NSString stringWithFormat:@"<%@>",startele]];
    for(int i=0;i<[arr count];i++)
    {
        id nodeValue = [dictionary objectForKey:[arr objectAtIndex:i]];
        if([nodeValue isKindOfClass:[NSArray class]] )
        {
            if([nodeValue count]>0){
                for(int j=0;j<[nodeValue count];j++)
                {
                    id value = [nodeValue objectAtIndex:j];
                    if([ value isKindOfClass:[NSDictionary class]])
                    {       
                        [xml appendString:[NSString stringWithFormat:@"<%@>",[arr objectAtIndex:i]]];
                        [xml appendString:[NSString stringWithFormat:@"%@",[value objectForKey:@"text"]]];
                        [xml appendString:[NSString stringWithFormat:@"</%@>",[arr objectAtIndex:i]]];
                    }

                }
            }
        }
        else if([nodeValue isKindOfClass:[NSDictionary class]])
        {
            [xml appendString:[NSString stringWithFormat:@"<%@>",[arr objectAtIndex:i]]];
            if([[nodeValue objectForKey:@"Id"] isKindOfClass:[NSString class]])
                [xml appendString:[NSString stringWithFormat:@"%@",[nodeValue objectForKey:@"Id"]]]; 
            else
                [xml appendString:[NSString stringWithFormat:@"%@",[[nodeValue objectForKey:@"Id"] objectForKey:@"text"]]]; 
            [xml appendString:[NSString stringWithFormat:@"</%@>",[arr objectAtIndex:i]]];
        }

        else
        {
            if([nodeValue length]>0){
                [xml appendString:[NSString stringWithFormat:@"<%@>",[arr objectAtIndex:i]]];
                [xml appendString:[NSString stringWithFormat:@"%@",[dictionary objectForKey:[arr objectAtIndex:i]]]]; 
                [xml appendString:[NSString stringWithFormat:@"</%@>",[arr objectAtIndex:i]]];
            }
        }
    }

    [xml appendString:[NSString stringWithFormat:@"</%@>",startele]];
    NSString *finalxml=[xml stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"];
//  NSLog(@"%@",xml);
    return finalxml;
} 
```

# java - VMWare API / Java - 将文件夹与数据存储区分开

> ID：10717670
> 
> 赞同：0
> 
> 时间：2012-05-23T10:03:53.863
> 
> 标签：java, directory, vmware, datastore

我正在使用 vim（VMWare 的 Java API，而不是更高版本的 vim25）返回数据存储列表，使用：

```
ManagedObjectReference[] datastores = (ManagedObjectReference[])cb.getServiceUtil().getDynamicProperty(dcmor, "datastore"); 
```

这将返回完整的数据存储集，但与它们混合的是文件夹。使用 DatastoreSummary 和 DatastoreInfo 显示两者之间没有变化。

甚至

```
for (int j = 0; j < datastores.length; j++) {
    System.out.println(datastores[j].getType());
} 
```

将文件夹的类型显示为 Datastore。

有什么元素可以用来过滤掉那些讨厌的文件夹吗？

# spring - JPA2：复合键（无法映射）

> ID：10717671
> 
> 赞同：0
> 
> 时间：2012-05-23T10:03:57.590
> 
> 标签：spring, hibernate, jpa, jpa-2.0, spring-data-jpa

我正在尝试使用 JPA2 映射以下数据库结构：

```
ASSET
ID: assetId
...

PARTY
ID: partyId
...

PARTYASSET
ID: partyId
ID: assetId
ID: relationshipType 
```

PARTYASSET 的主键是 PARTY 和 ASSET 的外键和一个附加列的组合：relationshipType。

由于列关系类型，我不能使用@ManyToMany 注释我必须使用@ManyToOne 和@OneToMany，如以下链接所述： [http ://en.wikibooks.org/wiki/Java_Persistence/ManyToMany](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany)

我尝试了以下指南，但没有帮助： [http ://www.kawoolutions.com/Technology/JPA,_Hibernate,_and_Co./JPA_Composite_Key_Variants#JPA_2.0_@IdClass](http://www.kawoolutions.com/Technology/JPA,_Hibernate,_and_Co./JPA_Composite_Key_Variants#JPA_2.0_@IdClass)

请你帮助我好吗？

我尝试了以下方法：（继承用于其他目的）

*党课*

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.STRING)
@DiscriminatorValue("PARTY")
public class Party implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long partyId;

    @OneToMany(mappedBy = "party")
    private Set<PartyAsset> partyAsset;
    ... 
} 
```

*资产类别*

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.STRING)
@DiscriminatorValue("ASSET")
public class Asset implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long assetid;

    @OneToMany(mappedBy = "asset")
    private Set<PartyAsset> partyAsset;
    ...
} 
```

## **使用@IdClass：**

*派对资产类*

```
@Entity
@IdClass(PartyAssetPK.class)
public class PartyAsset implements Serializable {
    private static final long serialVersionUID = 1L;

    public static enum RelationshipType {
        OWNER, TENANT, SECONDARY_CONTACT, SUPPLIER
    }

    @Id
    @Enumerated(EnumType.STRING)
    private RelationshipType relationshipType;

    @Id
    @ManyToOne
    @JoinColumn(name="partyId")
    private Party party;

    @Id
    @ManyToOne
    @JoinColumn(name="assetId")
    private Asset asset;
    ...
} 
```

*PartyAssetPK 类*

```
public class PartyAssetPK implements Serializable {
    private static final long serialVersionUID = 1L;

    private Long partyId;
    private Long assetId;
    private PartyAsset.RelationshipType relationshipType;
} 
```

上面的代码抛出异常：

> 在实体 PartyAsset 中找不到 @IdClass 的属性：assetId

## **@IdClass 的替代品**

*派对资产类*

```
@Entity
@IdClass(PartyAssetPK.class)
public class PartyAsset implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private Long partyId;
    @Id
    private Long assetId;

    public static enum RelationshipType {
        OWNER, TENANT, SECONDARY_CONTACT, SUPPLIER
    }

    @Id
    @Enumerated(EnumType.STRING)
    private RelationshipType relationshipType;

    @ManyToOne
    @JoinColumn(name="partyId")
    @MapsId("partyId")
    private Party party;

    @ManyToOne
    @JoinColumn(name="assetId")
    @MapsId("assetId")
    private Asset asset;    
} 
```

这会引发异常：

> 未找到超类型

## **使用@EmbeddedId**

*派对资产类*

```
@Entity
public class PartyAsset implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    public PartyAssetPK id;

    public static enum RelationshipType {
        OWNER, TENANT, SECONDARY_CONTACT, SUPPLIER
    }

    @MapsId("relationshipType")
    @Enumerated(EnumType.STRING)
    private RelationshipType relationshipType;

    @ManyToOne
    @JoinColumn(name="partyId")
    @MapsId("partyId")
    private Party party;

    @ManyToOne
    @JoinColumn(name="assetId")
    @MapsId("assetId")
    private Asset asset;    
} 
```

*PartyAssetPK 类*

```
@Embeddable
public class PartyAssetPK implements Serializable {
    private static final long serialVersionUID = 1L;

    private Long partyId;
    private Long assetId;
    private PartyAsset.RelationshipType relationshipType;
} 
```

这会引发异常；

> 原因：org.springframework.beans.factory.BeanCreationException：创建 com.ardan1.propertymanagement.test.config.TestApplicationContext 类中定义的名称为“entityManagerFactoryBean”的 bean 时出错：调用 init 方法失败；嵌套异常是 java.lang.NullPointerException 引起：java.util.Hashtable.put(Unknown Source) at java.util.Properties.setProperty(Unknown Source) at org.hibernate.cfg.annotations.SimpleValueBinder 的 java.lang.NullPointerException .setType(SimpleValueBinder.java:227) 在 org.hibernate.cfg.annotations.PropertyBinder.makePropertyAndValue(PropertyBinder.java:188) 在 org.hibernate.cfg.annotations.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:203) 在 org. hibernate.cfg.AnnotationBinder.processElementAnnotations（AnnotationBinder.java：

我有以下库（使用 Maven）：

```
<hibernate.version>4.1.2</hibernate.version>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>${hibernate.version}</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>${hibernate.version}</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.2.0.Final</version>
</dependency>
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-jpa</artifactId>
    <version>1.0.3.RELEASE</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:54:57.050

我认为您可以使用@JoinColumn 进行映射。以下代码使用 Spring Data JPA。

BaseEntity.java

```
import java.io.Serializable;

import org.apache.commons.lang3.builder.EqualsBuilder;
import org.apache.commons.lang3.builder.ToStringBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;
import org.springframework.data.jpa.domain.AbstractPersistable;

public abstract class BaseEntity<PK extends Serializable> extends AbstractPersistable<PK> implements Serializable {

    private static final long serialVersionUID = 201304010827L;

    @Override
    public String toString() {
        return ToStringBuilder.reflectionToString(this, ToStringStyle.MULTI_LINE_STYLE);
    }

    @Override
    public boolean equals(Object obj) {
        return EqualsBuilder.reflectionEquals(this, obj);
    }

} 
```

资产实体.java

```
@Entity
@Table(name = "tb_asset")
@AttributeOverride(name = "id", column = @Column(name = "AssetID"))
public class AssetEntity extends BaseEntity<Long> {

    @Column(name = "desc")
    private String desciption;

    // getters and setters...

} 
```

PartyEntity.java

```
@Entity
@Table(name = "tb_party")
@AttributeOverride(name = "id", column = @Column(name = "PartyID"))
public class PartyEntity extends BaseEntity<Long> {

    private String party;

    // Getters and setters.

} 
```

要使用@JoinColumn 和@Embeddable，我们有PartyAsset.java。

```
@Embeddable
public class PartyAssetKey implements Serializable {

    @ManyToOne
    @JoinColumn(name = "party_id", referencedColumnName = "id")
    private PartyEntity partyEntity;

    @ManyToOne
    @JoinColumn(name = "asset_id", referencedColumnName = "id")
    private AssetEntity assetEntity;

    private Long relationshipType;

} 
```

最后是 PartyAssetEntity.java

```
@Entity
@Table(name = "tb_party_asset")
public class PartyAsset extends BaseEntity<PartyAssetKey> {

    private Long type;

    // Getters and setters.

} 
```

我用葡萄牙语写了一篇关于 Spring Data JPA 的帖子：[http ://wpattern.com/blog/post/2012/11/25/Introducao-ao-Spring-Data-JPA-(Contextualizacao)-Parte-01.aspx](http://wpattern.com/blog/post/2012/11/25/Introducao-ao-Spring-Data-JPA-(Contextualizacao)-Parte-01.aspx)

赛亚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T11:27:13.110

@Techky你通过尝试复合键的所有选项做得很好，巧合的是，我也得到了所有场景完全相同的错误。

对于使用@EmbeddedId 的情况，这是我的解决方案。我在一个类本身中编写了这段代码，在实体类中。

*   Class MyEntity - 这是我的表的实际实体类。“OtherFields”是那些不属于主键的字段。
*   Class MyEntityPrimaryKeys - 这是为我的复合键创建的类，它为我的“MyEntity”类创建主键。这里 ROLLNO 和 AGE 一起构成一个主键。

我的实体.java

```
@Entity
@Table(name = "myTable")
public class MyEntity extends GenericPersistableEntity implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId 
    MyEntityPrimaryKeys id;//Composite Primary key

    //Composite fields can be declared here for getter and setters
    @Column(name = "ROLLNO")
    private Long RollNo;

    //Composite fields can be declared here for getter and setters
    @Column(name = "AGE")
    private Long age;

    @Column(name = "OtherFields"
    private Long OtherFields;

    //getter and setters comes here
}

@Embeddable
 class MyEntityPrimaryKeys  implements Serializable{

    private static final long serialVersionUID = 1L;

    @Column(name = "ROLLNO")
    Long RollNo;

    @Column(name = "AGE")
    Long age;

    @Override
    public int hashCode() {
        HashCodeBuilder hcb = new HashCodeBuilder();
        hcb.append(RollNo);
        hcb.append(age);
        return hcb.toHashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof MyEntityPrimaryKeys)) {
            return false;
        }
        MyEntityPrimaryKeys that = (MyEntityPrimaryKeys) obj;
        EqualsBuilder eb = new EqualsBuilder();
        eb.append(RollNo, that.RollNo);
        eb.append(age, that.age);
        eb.append(tonMonth, that.tonMonth);
        eb.append(tonYear, that.tonYear);
        return eb.isEquals();
    }
} 
```

希望这可以帮助！！

# http - 如何在 ExpressJS 中删除 X-Powered-By

> ID：10717685
> 
> 赞同：149
> 
> 时间：2012-05-23T10:05:00.787
> 
> 标签：http, node.js, http-headers, express

我想删除 X-Powered-By 以确保安全，在 ExpressJS（node.js）中保存带宽。怎么做？可能是 filter(app.use) ？

```
app.use(function(req,res,next_cb){ /* remove X-Powered-By header */ next_cb(); } 
```

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-10-24T18:32:48.430

不要删除它；要求 Express 首先不要生成它：

[https://stackoverflow.com/a/12484642/506073](https://stackoverflow.com/a/12484642/506073)

转到您的`app.js`，然后：

```
var app = express(); 
```

添加：

```
app.disable('x-powered-by'); 
```

* * *

## 回答 #2

> 赞同：228
> 
> 时间：2012-05-23T10:31:02.727

更好的方法是：

```
app.disable('x-powered-by'); 
```

您还可以制作一个中间件来删除任何标头，如下所示：

```
app.use(function (req, res, next) {
  res.removeHeader("X-Powered-By");
  next();
}); 
```

查看有关如何删除标头的更多信息：

[http://nodejs.org/api/http.html#http_response_removeheader_name](http://nodejs.org/api/http.html#http_response_removeheader_name)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-28T20:10:54.177

中间件片段来自：[Can't get rid of header X-Powered-By:Express](https://stackoverflow.com/questions/5867199/cant-get-rid-of-header-x-powered-byexpress/13112545#13112545)

```
function customHeaders( req, res, next ){
  // Switch off the default 'X-Powered-By: Express' header
  app.disable( 'x-powered-by' );

  // OR set your own header here
  res.setHeader( 'X-Powered-By', 'Awesome App v0.0.1' );

  // .. other headers here

  next();
}

app.use( customHeaders );

// ... now your code goes here 
```

# magento - Magento - 显示二级父母的类别？

> ID：10717686
> 
> 赞同：0
> 
> 时间：2012-05-23T10:05:19.453
> 
> 标签：magento, navigation, sidebar

我有以下类别结构..

```
Defualt
    - Cat a
        - child a
        - child b
        - child c
        - child d
    - Cat b
        - child a
        - child b
        - child c 
```

例如，当您查看类别 A 或其任何子类别时，我想在左侧类别边栏中显示类别 A 中的所有类别，无论深度如何，只要您所在的页面包含在其中甲类

相同的规则适用于类别 B。当您查看类别 B 时，它是子类别或子类别中的任何产品，我希望类别 B 中的子类别显示在左侧边栏中的任何深度。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:06:54.113

这是模板：catalog/navigation/category_nav.phtml

```
<div class="block-category-nav">

  <div class="block-content">
    <ol>

    <?php //echo $this->renderCategoriesMenuHtml() // 1\. Full categories tree ?>

    <?php // 2\. Current category tree
    foreach ($this->getStoreCategories() as $_category){
        if($this->isCategoryActive($_category)) // ...only from active node
            echo $this->drawItem($_category,-1);
    }?>

    <?php /*/ 3\. Current subcategories 
    foreach ($this->getCurrentChildCategories() as $_category){
        echo $this->drawOpenCategoryItem($_category);
    }*/?>

    </ol>
  </div>

</div> 
```

# c++ - Physx 粒子示例

> ID：10717694
> 
> 赞同：2
> 
> 时间：2012-05-23T10:05:36.780
> 
> 标签：c++, particle-system, physx

有人知道 PhysX 粒子系统的简单工作示例吗？我希望该示例使用 C++，但任何语言都可以。

我知道这样的事情可能不存在，甚至可能无法创建一个简单的示例，因此任何和所有指向有用信息的指针都将不胜感激（是的，我已经用谷歌搜索了它。重复。）。

# android - 弹出式崩溃中的 Android 手势识别

> ID：10717698
> 
> 赞同：2
> 
> 时间：2012-05-23T10:05:54.743
> 
> 标签：android, popup, gestures

这是我关于 stackoverflow 的第一个问题，但几个月来我一直在使用您已经生成的资源，我必须说这真的很酷。非常感谢那些实现它的人！

我正在尝试在弹出窗口中创建手势识别（用户绘图，应用程序识别绘图）。当用户选择列表中的元素时，会创建弹出窗口。

应用程序在启动后崩溃，我从列表中选择元素。

**带有手势监听器的弹出窗口：**

```
 LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View pView = inflater.inflate(R.layout.gestures_layout_view, null, false);
    final PopupWindow pw = new PopupWindow(pView);
    pw.setFocusable(true);
    pw.showAtLocation(this.findViewById(R.id.bag_list), Gravity.CENTER, 0, 0); 
    pw.update(300,300);

    mLibrary = GestureLibraries.fromRawResource(mContext, R.raw.symbol);
    if (!mLibrary.load()) {
        finish();
    }

    GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures);
    gestures.addOnGesturePerformedListener(new OnGesturePerformedListener()
    {
        public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {

        }

    });

    // button that allows to go back to inventory
    ImageButton buttonExit = (ImageButton) pView.findViewById(R.id.exit_button_gestures_layout);
    buttonExit.setOnClickListener(new OnClickListener()
    {

            @Override
            public void onClick(View arg0) {

                pw.dismiss();
            }
    }); 
```

**弹窗布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.gesture.GestureOverlayView
        android:background="#0000ff"
        android:id="@+id/gestures"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"/>

    <ImageButton android:id="@+id/exit_button_gestures_layout"         android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:src="@drawable/image"
       android:layout_alignParentRight="true"
       android:layout_alignParentBottom="true"/>   

</RelativeLayout> 
```

**日志猫**

```
05-23 09:06:50.293: D/AndroidRuntime(473): Shutting down VM
05-23 09:06:50.293: W/dalvikvm(473): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-23 09:06:50.293: E/AndroidRuntime(473): Uncaught handler: thread main exiting due to uncaught exception
05-23 09:06:50.303: E/AndroidRuntime(473): java.lang.NullPointerException
05-23 09:06:50.303: E/AndroidRuntime(473):  at pl.maciej.traviddle.BagActivity.onListItemClick(BagActivity.java:318)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.app.ListActivity$2.onItemClick(ListActivity.java:312)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.widget.ListView.performItemClick(ListView.java:3285)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1640)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.os.Handler.handleCallback(Handler.java:587)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.os.Looper.loop(Looper.java:123)
05-23 09:06:50.303: E/AndroidRuntime(473):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-23 09:06:50.303: E/AndroidRuntime(473):  at java.lang.reflect.Method.invokeNative(Native Method)
05-23 09:06:50.303: E/AndroidRuntime(473):  at java.lang.reflect.Method.invoke(Method.java:521)
05-23 09:06:50.303: E/AndroidRuntime(473):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-23 09:06:50.303: E/AndroidRuntime(473):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-23 09:06:50.303: E/AndroidRuntime(473):  at dalvik.system.NativeStart.main(Native Method)
05-23 09:06:50.313: I/dalvikvm(473): threadid=7: reacting to signal 3
05-23 09:06:50.313: E/dalvikvm(473): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
05-23 09:06:51.653: I/Process(473): Sending signal. PID: 473 SIG: 9 
```

我已经在互联网上搜索过，但找不到任何有用的东西。

到目前为止，我注意到：

-> 如果我删除将侦听器分配给 GestureOverlayView 的代码，它一切正常，即创建弹出窗口并且用户可以绘制符号

-> 当我使用“实现”来实现手势监听器（如在[http://developer.android.com/resources/articles/gestures.html](http://developer.android.com/resources/articles/gestures.html)中）而不是内联实现时，我得到了同样的错误

您能否告诉我为什么应用程序崩溃以及如何修复它？

# asp.net - 从客户端检测到潜在危险的 Request.Form 值

> ID：10717703
> 
> 赞同：7
> 
> 时间：2012-05-23T10:06:09.563
> 
> 标签：asp.net, html-encode

当我尝试在 ASP.NET 中提交表单时，我遇到了上述异常。 [这篇](https://stackoverflow.com/questions/81991/a-potentially-dangerous-request-form-value-was-detected-from-the-client)文章真的很有帮助，但即使在设置之后，`ValidateRequest="false"`我也只会在“&#”组合中得到这个错误。由于我们使用的是挪威字符，因此需要这种特定的组合。

我也`httpRuntime requestValidationMode="2.0"`加入了`web.config`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:31:14.517

好的，从评论中，我也将其作为答案。

将`ValidateRequest="false"`放在 上`web.config`以防止它在没有此声明的情况下命中被遗忘的页面。

```
<pages validateRequest="false" ... > 
```

# regex - Youtube 安全搜索

> ID：10717705
> 
> 赞同：2
> 
> 时间：2012-05-23T10:06:11.490
> 
> 标签：regex, youtube

我不确定这个问题是否应该放在这里。

我应该如何更改 youtube 偏好 cookie 以便始终开启安全模式？

```
PREF=f1=50000000&fms2=30000&fms1=30000&fv=10.3.183 
```

这是首选 cookie，如果关闭安全搜索，则会`fms2`更改为。如果出现在 cookie 中，`10000`我使用正则表达式替换来替换文本。`fms2=10000`但这似乎不起作用。如何更改 cookie，以便关闭安全模式将由于 cookie 替换而将其重新打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:10:26.870

首先：我真的不确定我是否正确理解了你的问题。`fms2=10000`对于从到的静态字符串替换，`fms2=30000`您不一定需要使用正则表达式。“正常”字符串替换也可以。但我想还有更多？您使用哪种语言？

第二：您所说的“关闭安全模式将由于cookie替换而将其重新打开”是什么意思？您是否要交换逻辑：“关闭”实际上是“打开”，反之亦然？

第三：您的数据中是否有一些您可能不知道的额外修改，例如 URL 编码？

**更新：** 我对正则表达式的猜测是（PCRE 语法 - 我对 C++ 不太熟悉）

```
/^(?=PREF\=)(.*?(?:PREF\=|&)fms2=).*?($|&.*)/ 
```

取而代之

```
$130000$2 
```

这将匹配

```
PREF=f1=50000000&fms2=10000&fms1=30000&fv=10.3.183
PREF=f1=50000000&fms2=&fms1=30000&fv=10.3.183
PREF=f1=50000000&fms1=30000&fv=10.3.183&fms2=123
PREF=fms2=123&f1=50000000&fms1=30000&fv=10.3.183 
```

但听起来这不仅仅是一个正则表达式问题，不是吗？如果您遇到问题或需要对模式的解释，请告诉我。

# php - 检测移动设备的免费 PHP 脚本

> ID：10717721
> 
> 赞同：0
> 
> 时间：2012-05-23T10:07:00.227
> 
> 标签：php, mobile, user-agent

简单的问题，人们使用过并找到工作最好的免费移动设备检测脚本有哪些？我需要将移动用户重定向到我们网站的移动版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:10:11.667

我在我的项目中使用它：

```
function checkMobile()  {
    if (preg_match("/Mobile|Android|BlackBerry|iPhone|Windows Phone/", $_SERVER['HTTP_USER_AGENT'])) {
        header(Location: MOBILE SITE);
    }
} 
```

然后我在我的 html 文档的头部调用这个函数，如下所示：

```
<?php checkMobile() ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:08:50.730

[http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)这应该可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:09:38.103

WURFL 被认为是最好的：http: [//sourceforge.net/projects/wurfl/files/WURFL/](http://sourceforge.net/projects/wurfl/files/WURFL/)

注意：请注意最新版本的许可证更改，这里是[v2.2 的直接链接](http://sourceforge.net/projects/wurfl/files/WURFL/2.2/)

# c - 从ansi C中的字符串中删除空格

> ID：10717723
> 
> 赞同：0
> 
> 时间：2012-05-23T10:07:11.450
> 
> 标签：c, string, string.h

我正在尝试在 ansi C 中的字符串中编写简单的函数修剪空间。

我的 str_utis.h：

```
#include <string.h>

const char* trim_str(char *input_str); 
```

我的 str_utils.c：

```
const char* trim_str(char* input_str){
    char* str = NULL;
    int len = strlen(input_str);
    int i = 0;
    for (i = 0; i < len - 1; i++){
        if (input_str[i] == ' ')
            ;
        else
            str += input_str[i];
    }
    return str;
} 
```

当我尝试执行它时，我得到了段错误：

```
int main(int argc, char** argv) {
    const char* a = trim_str("Hey this is string");
    printf("%s", a);
    return 0;
} 
```

为什么错了？我怎样才能正确写？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:09:12.650

您不能修改字符串文字。是UB。复制字符串并修改其内容。改变

```
char* str = NULL;
int len = strlen(input_str); 
```

到

```
size_t len = strlen( input_str );
char *str = malloc( len + 1 ); 
```

然后继续复制非空白内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:09:05.530

str 未分配，并且无论如何您都不能使用 += 附加到字符串。阅读 strncat。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:24:13.527

通过这个。这将从输入字符串的两端删除空格和制表符。

```
const char* trim_str(char* input_str){
    char* str = NULL;
    int len = strlen(input_str);
    str = (char *)malloc(len+1);
    int i = 0;
    while(i < len && (input_str[i]==' ' || input_str[i]=='\t')){
        ++i;
    }
    int j = 0;
    while(i< len && input_str[i]!=' ' && input_str[i]!='\t'){
      str[j]= input_str[i];
      ++j;
      ++i;
    }
   str[j] = '\0';

   return str;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T10:25:22.813

首先，您需要获得不带空格的新字符串大小：如果不需要，您不想分配大字符串。

```
 const char* trim_str(char* input_str){
        char* str = NULL;
        int len = strlen(input_str);
        int i = 0;
        int newSize = 0; 
        for (i = 0; i < len - 1; i++){
            if (input_str[i] == ' ')
                ;
            else
                newSize++;
        }
        str = malloc( newSize+ 1 );
        str[newSize] = '\0'

        // put the code of the copy bytes here...

        return str;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T10:30:58.750

```
char *trimdupstr(char *str)
{
size_t len, src,dst;
char *new;

if (!str) return NULL;
len = strlen (str);
new = malloc(len+1);
if (!new) return NULL;

for(src=dst=0; new[dst] = str[src++];   ) {
        if (new[dst] != ' ') dst++;
        }
return new;
} 
```

这个也删除了标签和 CR/LF：

```
char *trimdupstr(char *str)
{
size_t len, src,dst;
char *new;

if (!str) return NULL;
len = strlen (str);
new = malloc(len+1);

for (src=dst=0; str[src]; dst += len) {
        len = strspn(str+src, "\t \r\n" );
        src += len;
        len = strcspn(str+src, "\t \r\n" );
        memcpy (new+dst, str+src, len);
        src += len;
        }
new[dst] = 0;
return new;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T03:09:24.810

这是一个相当安全的方法。

```
void rtrim(char instrng[]) {
assert (instrng != NULL);
if (strlen(instrng) == 0) {
    return;
}
while (instrng[strlen(instrng)-1] == '\n' || instrng[strlen(instrng)-1] == ' ' ) {
    instrng[strlen(instrng)-1] = '\0';
}
return; 
} 
```

# visual-studio-2010 - 如何在报告的每一页中重复来自 tablix 的第一行（pdf，excel word）

> ID：10717724
> 
> 赞同：1
> 
> 时间：2012-05-23T10:07:22.940
> 
> 标签：visual-studio-2010, pdf, rdlc, ssrs-tablix

我有一个包含多个页面的大型报告（基本上是一个大型 tablix）。我不想使用页眉，因为我不能在那里插入 tablix。

我试过这个： http: [//msdn.microsoft.com/en-us/library/cc627566%28SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/cc627566%28SQL.105%29.aspx) 但是当我打开 pdf 时，标题并不在每一页上

# qt - 如何确保 QWidget 不在屏幕上？

> ID：10717727
> 
> 赞同：3
> 
> 时间：2012-05-23T10:07:29.890
> 
> 标签：qt

假设我有一个`QPushButton`，如果我按下按钮，那么我将显示一个`QFrame`。当按钮靠近屏幕边缘时，有些部分`QFrame`是看不到的。如何确定`QFrame`是窗外的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:39:10.320

我希望您通常需要以下检测方法`QWidget`。

```
bool IsOutOfDesktop(QWidget *w)
{
    QDesktopWidget *desktopWidget = QApplication::desktop();
    QRect screenRect = desktopWidget->screenGeometry(&w);
    QPoint topLeft = w.mapToGlobal(w.geometry().topLeft());
    QPoint bottomRight = w.mapToGlobal(w.geometry().bottomRight());

   if(!screenRect.contains(topLeft) || !screenRect.contains(bottomRight))
        return true;

   return false;
} 
```

# android - Android：使用多个 Gridview 或其他一些布局来实现下图

> ID：10717731
> 
> 赞同：-4
> 
> 时间：2012-05-23T10:07:57.907
> 
> 标签：android, image, gridview

嗨，我正在制作一个应用程序，我必须在其中动态使用多个 Gridview 和图像。我在stackoverflow上搜索了我的链接，例如：[如何使GridLayout适合屏幕大小](https://stackoverflow.com/questions/10347846/how-to-use-the-gridlayout-to-fit-screen-size) 我还尝试了另一个链接[http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

但是这些链接没有帮助。![在此处输入图像描述](../Images/8a1494eab2254c9f2eba4a80b9f3458e.png)

我的意思是说，为了实现上面的图像，我是否必须使用**多个网格视图或其他东西**？而我的疑问是如何实现上面的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:28:42.693

好吧，在上面的屏幕中，GridView 可能比帮助更大。当您拥有要显示的数据集合时，它们很有用，例如从服务器返回的项目列表。

您的图像看起来像一个非动态的布局，因此拥有一个外部滚动视图可能是最简单的，然后使用 GridLayout（不同于 GridView）或其他布局的集合（例如具有均匀分布的权重的 RelativeLayout 和 LinearLayouts）构建您的视图的间距。

# python - 正则表达式速度差异到代码或控制台执行

> ID：10717732
> 
> 赞同：1
> 
> 时间：2012-05-23T10:07:59.447
> 
> 标签：python, regex, performance

我在我的 python 控制台中优化了这个表达式：

```
texts = re.findall(r"text[^>]*\>(?P<text>(:?[^<]|</\s?[^tT])*)\</text", text) 
```

它工作得很好，当我在控制台中执行时，他的执行时间几乎是即时的，但是当我将它放入我的代码并通过解释器执行时，它似乎被阻塞了。

我在控制台中再次对其进行了测试，并在不到一秒的时间内再次执行。

我检查阻塞语句是正则表达式执行，并且所有执行的文本都相同。

怎么了？

- - - - - - - - - - - - - - - - - - - - 代码 - - - - - ----------------------------------

```
class Wiki:
    # Regex definition
    search_text_regex = re.compile(r"text[^>]*\>(?P<text>(:?[^<]|</\s?[^tT])*)\</text")

def search_by_title(self, name, text):
        """ Search the slice(The last) of the text that contains the exact name and return               the slice index.
        """
        print "Backoff Launched:"
        # extract the tex from wikipedia Pages
        print "\tExtracting Texts from pages..."
        texts = self.search_text_regex.findall(text) # <= The Regex Launch
        # find the name in the text
        print "\tFinding names on text..."
        for index, text in enumerate(texts):
            if name in text:
                return index
        return None 
```

- - - - - - - - -来源 - - - - - - - - - - - - - - - - --

```
<page><title>Andrew Johnson</title><id>1624</id><revision><id>244612901</id><timestamp>2008-10-11T18:30:44Z</timestamp><contributor><username>Excirial</username><id>5499713</id></contributor><minor/><comment>Reverted edits by [[Special:Contributions/71.113.103.209|71.113.103.209]] to last version by Soliloquial ([[WP:HG|HG]])</comment><text xml:space="preserve">{{otherpeople2|Andrew Johnson (disambiguation)}}
{{Infobox President
|name=Andrew Johnson
|nationality=American
|image=Andrew Johnson - 3a53290u.png
|caption=President Andrew Johnson, taken in 1865 by [[Mathew Brady|Matthew Brady]].
|order=17th [[President of the United States]]
|vicepresident=none
|term_start=April 15, 1865
|term_end=March 4, 1869
|predecessor=[[Abraham Lincoln]]
|successor=[[Ulysses S. Grant]]
|birth_date={{birth date|mf=yes|1808|12|29}}
|birth_place=[[Raleigh, North Carolina]]
|death_date={{death date and age|mf=yes|1875|7|31|1808|12|29}}
|death_place=[[Elizabethton, Tennessee]]
|spouse=[[Eliza McCardle Johnson]]
|occupation=[[Tailor]]
|party=[[History of the Democratic Party (United States)|Democratic]] until 1864 and after 1869; elected Vice President in 1864 on a [[National Union Party (United States)|National Union]] ticket; no party affiliation 1865–1869
|signature=Andrew Johnson Signature.png
|order2=16th [[Vice President of the United States]]
|term_start2=March 4, 1865
|term_end2=April 15, 1865
|president2=[[Abraham Lincoln]]
|predecessor2=[[Hannibal Hamlin]]
|successor2=[[Schuyler Colfax]]
|jr/sr3=United States Senator
|state3=[[Tennessee]]
|term_start3=October 8, 1857
|term_end3=March 4, 1862
|preceded3=[[James C. Jones]]
|succeeded3=[[David T. Patterson]]
|term_start4=March 4, 1875
|term_end4=July 31, 1875
|preceded4=[[William Gannaway Brownlow|William G. Brownlow]]
|succeeded4=[[David M. Key]]
|order5=17th
|title5=[[Governor of Tennessee]]
|term_start5=October 17, 1853
|term_end5=November 3, 1857
|predecessor5=[[William B. Campbell]]
|successor5=[[Isham G. Harris]]
|religion=[[Christian]] (no denomination; attended Catholic and Methodist services)<ref>[http://www.adherents.com/people/pj/Andrew_Johnson.html Adherents.com: The Religious Affiliation of Andrew Johnson]</ref>
}}
Johnson was nominated for the [[Vice President of the United States|Vice President]] slot in 1864 on the [[National Union Party (United States)|National Union Party]] ticket.  He and Lincoln were [[United States presidential election, 1864|elected in November 1864]].  Johnson succeeded to the Presidency upon Lincoln's assassination on April 15, 1865.

==Bibliography==
{{portal|Tennessee}}
{{portal|United States Army|United States Department of the Army Seal.svg}}
{{portal|American Civil War}}
* Howard K. Beale, ''The Critical Year. A Study of Andrew Johnson and Reconstruction'' (1930). ISBN 0-8044-1085-2
*  Winston; Robert W. ''Andrew Johnson: Plebeian and Patriot'' (1928) [http://www.questia.com/PM.qst?a=o&d=3971949 online edition]

===Primary sources===
* Ralph W. Haskins, LeRoy P. Graf, and Paul H. Bergeron et al, eds. ''The Papers of Andrew Johnson'' 16 volumes; University of Tennessee Press, (1967–2000). ISBN 1572330910.) Includes all letters and speeches by Johnson, and many letters written to him. Complete to 1875.
* [http://www.impeach-andrewjohnson.com/ Newspaper clippings, 1865–1869]
* [http://www.andrewjohnson.com/09ImpeachmentAndAcquittal/ImpeachmentAndAcquittal.htm Series of [[Harper's Weekly]] articles covering the impeachment controversy and trial]
*[http://starship.python.net/crew/manus/Presidents/aj2/aj2obit.html Johnson's obituary, from the ''New York Times'']

==Notes==
{{reflist|2}}

==External links==
{{sisterlinks|s=Author:Andrew Johnson}}
*{{gutenberg author|id=Andrew+Johnson | name=Andrew Johnson}}
{{s-start}}
{{s-par|us-hs}}
{{s-aft|after=[[Ulysses S. Grant]]}}
{{s-par|us-sen}}
{{s-bef|before=[[James C. Jones]]}}
{{s-ttl|title=[[List of United States Senators from Tennessee|Senator from Tennessee (Class 1)]]|years=October 8, 1857{{ndash}} March 4, 1862|alongside=[[John Bell (Tennessee politician)|John Bell]], [[Alfred O. P. Nicholson]]}}
{{s-vac|next=[[David T. Patterson]]|reason=[[American Civil War|Secession of Tennessee from the Union]]}}
{{s-bef|before=[[William Gannaway Brownlow|William G. Brownlow]]}}
{{s-ttl|title=[[List of United States Senators from Tennessee|Senator from Tennessee (Class 1)]]| years=March 4, 1875{{ndash}} July 31, 1875|alongside=[[Henry Cooper (U.S. Senator)|Henry Cooper]]}}
{{s-aft|after=[[David M. Key]]}}
{{s-ppo}}
{{s-bef|before=[[Hannibal Hamlin]]}}
{{s-ttl|title=[[List of United States Republican Party presidential tickets|Republican Party¹ vice presidential candidate]]|years=[[U.S. presidential election, 1864|1864]]}}

{{Persondata
|NAME= Johnson, Andrew
|ALTERNATIVE NAMES=
|SHORT DESCRIPTION= seventeenth [[President of the United States]]<br/> [[Union (American Civil War)|Union]] [[Union Army|Army]] [[General officer|General]]
|DATE OF BIRTH={{birth date|mf=yes|1808|12|29|mf=y}}
|PLACE OF BIRTH= [[Raleigh, North Carolina]]
|DATE OF DEATH={{death date|mf=yes|1875|7|31|mf=y}}
|PLACE OF DEATH= [[Greeneville, Tennessee]]
}}

{{Lifetime|1808|1875|Johnson, Andrew}}
[[Category:Presidents of the United States]]
[[vi:Andrew Johnson]]
[[tr:Andrew Johnson]]
[[uk:Ендрю Джонсон]]
[[ur:انڈریو جانسن]]
[[yi:ענדרו זשאנסאן]]
[[zh:安德鲁·约翰逊]]</text></revision></page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:37:16.073

我解决它。该代码有一个用于清理文本的管道，该管道删除了一些必要的标记以进行正确匹配。因为文本的长度，不可能匹配的搜索需要太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:12:18.100

我会用这个：

```
result = re.findall(r"(?s)<text[^>]*>(?P<text>(?:(?!</?text>).)*)</text>", subject) 
```

`(?:(?!</?text>).)*`一次使用一个字符，但只有在前瞻验证它不是 a `<text>`or`</text>`标记的第一个字符之后。

# mysql - 将数据发送到 REST api 的良好实现？

> ID：10717735
> 
> 赞同：1
> 
> 时间：2012-05-23T10:08:07.027
> 
> 标签：mysql, api, rest

每天在我们的服务（使用 .Net 和 MySql 数据库的后端）上插入、更新和删除数十万个项目。

现在我们正在使用他们的 RESTful API 将我们的服务与另一个服务集成。每次在我们的服务上插入、更新或删除项目时，我们还需要连接到他们的 Web 服务并使用 POST、PUT、DELETE。

这个案例的一个好的实现是什么？

每次用户在我们的服务上插入一个项目时连接到他们的 API 似乎不是一个好主意，因为这对用户来说将是一个非常缓慢的体验。

另一个想法是像往常一样更新我们的数据库。然后设置另一个服务器常量连接到我们的数据库并获取需要发布到 RESTful API 的数据。这是要走的路吗？

你会怎么解决？任何实现这样的东西的指南都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:53:07.817

这取决于您是否可以接受延迟更新其他服务。如果没有，则创建一个事件并将其放入事件处理器的队列中，后者可以将其发送到第二个服务。如果延迟是可以接受的，那么可以有可以定期运行并发送数据的后台批处理作业。

# c# - 与实体框架在同一张表上的关系

> ID：10717736
> 
> 赞同：5
> 
> 时间：2012-05-23T10:08:09.803
> 
> 标签：c#, entity-framework, entity-framework-4, entity-relationship

如何使用实体框架在同一张表上指定一个关系？

我的表“项目”具有以下字段： - Id（唯一标识符） - ThreadId（唯一标识符） - 创建（日期时间） - 文本（nvarchar（max））

我的模型“项目”：-Id（Guid）-ThreadId（Guid）-创建（DateTime）-文本（字符串）-ChildItems（Icollection）

如何创建关系，以便 ChildItems 保存 Id = ThreadId 的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:24:37.110

我认为以下应该做到这一点：

```
modelBuilder.Entity<Item>()
                    .HasOptional(c => c.ChildItems)
                    .WithMany()
                    .HasForeignKey(c => c.ThreadId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:58:13.780

项目实体

```
public class Item
{
    public Guid Id { get; set; }
    public Guid ThreadId { get; set; }
    public ICollection<Item> ChildItems { get; set; }

    /* Other properties */
} 
```

以及流畅的配置

```
modelBuilder.Entity<Item>()
                .HasMany(i => i.ChildItems)
                .WithOptional()
                .HasForeignKey(i => i.ThreadId); 
```

# mysql - mysql m:n 关系的高效插入/更新

> ID：10717742
> 
> 赞同：4
> 
> 时间：2012-05-23T10:08:40.537
> 
> 标签：mysql, many-to-many, insert-update, relation

我正在开发一个 HTML5 多人游戏，其中我有：n 表“关键字”和“模型”之间的关系，如下图所示：

![数据库方案](../Images/04ab7a737c10bf4d2e95909cdb9c8618.png)

`keyword.id`并且`model.id`是 auto_increment unsigned int 并且`keyword.keyword`是唯一索引。
为了效率，我正在寻找一种管理关系的方法。简单的方法是：

*   检查关键字是否已经存在
*   如果是：更新`timesCount`和`roundCount`从`model_has_keyword`
*   如果没有：`insert into keyword`和`insert into model_has_keyword`

但随着越来越多的用户同时玩，只怕琐碎的方式会变得太慢。那么最有效的方法是什么？

在 StackOverflow 上搜索时，我偶然发现了两个想法，但我认为它们都不符合我的需求。

1.  `INSERT INTO table ON DUPLICATE KEY UPDATE col=val`
    如果`INSERT INTO`会被处理，我需要触发另一个`INSERT INTO` 语句来插入两个表`keyword`和`model_has_keyword`
2.  `REPLACE`语句：如果我替换table关键字中的记录，`id`则分配下一个自增值，从而`model_has_keyword`丢失对表的引用。

由于我不是专家，如果我在这里误解了什么，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:06:53.630

您需要检查关系是否存在，然后插入/更新。

A.- 将 INSERT 查询包含在 try 块中，如果出现错误，请进行更新查询。当关系不存在时，这将保存所有检查......

B.- 在重复更新上进行所有插入。这将与“A”中的完全相同，但您无需担心异常。

绝对你的第二个想法是绝对错误的。

我不会创建表关键字，因为您只需要关键字本身......然后我会像这样定义我的 model_has_keyword：

```
CREATE TABLE model_has_keyword (
  model_id         INT NOT NULL,
  keyword          VARCHAR(50) NOT NULL,
  timesCount       INT NOT NULL,
  roundCount       INT NOT NULL,
  PRIMARY KEY (model_id,keyword)
); 
```

并像这样更新它：

```
INSERT INTO model_has_keyword 
  (model_id,keyword,timesCount,$myIntValue) 
VALUES 
  ($model_id,$keyword,0,0) 
ON DUPLICATE KEY UPDATE 
  timesCount=timesCount+1,roundCount=roundCount + $myIntValue 
```

# php - 尝试在 Mac OS lion 上的 MAMP 中使用 PECL 安装 OAUTH 时出现问题

> ID：10717752
> 
> 赞同：27
> 
> 时间：2012-05-23T10:09:06.753
> 
> 标签：php, oauth, mamp, pecl

我是设置 php 服务器的新手，我看过其他相关的帖子，似乎没有人和我有同样的错误。我正在使用 MAMP 2.0.2 并运行 PHP 5.3.6，并且尝试使用以下命令在本地 MAMP 上安装 oAuth：

```
$ cd /Applications/MAMP/bin/php/php5.3.6/bin
$ ./pecl install oauth 
```

但是，它返回这样的错误：

```
Notice: unserialize(): Error at offset 276 of 1133 bytes in Config.php on line 1050
ERROR: The default config file is not a valid config file or is corrupted. 
```

怎么了？PECL 捆绑在 MAMP 中，它应该是开箱即用的....

更新：

我在其他地方阅读了一篇文章，表明包含安装路径的配置文件数据不正确，因此我更改了以下文件中的一些值：

```
/Applications/MAMP/bin/php/php5.3.6/conf/pear.conf 
```

然后，我使用命令：

```
$ ./pecl install oauth 
```

它开始下载和解压，但是当它尝试安装时，它给出：

```
creating libtool
appending configuration tag "CXX" to libtool
configure: creating ./config.status
config.status: creating config.h
running: make
/bin/sh /private/tmp/pear/temp/pear-build-user1RU5EZA/oauth-1.2.2/libtool --mode=compile cc  -I. -I/private/tmp/pear/temp/oauth -DPHP_ATOM_INC -I/private/tmp/pear/temp/pear-build-user1RU5EZA/oauth-1.2.2/include -I/private/tmp/pear/temp/pear-build-user1RU5EZA/oauth-1.2.2/main -I/private/tmp/pear/temp/oauth -I/Applications/MAMP/bin/php/php5.3.6/include/php -I/Applications/MAMP/bin/php/php5.3.6/include/php/main -I/Applications/MAMP/bin/php/php5.3.6/include/php/TSRM -I/Applications/MAMP/bin/php/php5.3.6/include/php/Zend -I/Applications/MAMP/bin/php/php5.3.6/include/php/ext -I/Applications/MAMP/bin/php/php5.3.6/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2 -Wall -g   -c /private/tmp/pear/temp/oauth/oauth.c -o oauth.lo
mkdir .libs
cc -I. -I/private/tmp/pear/temp/oauth -DPHP_ATOM_INC -I/private/tmp/pear/temp/pear-build-user1RU5EZA/oauth-1.2.2/include -I/private/tmp/pear/temp/pear-build-user1RU5EZA/oauth-1.2.2/main -I/private/tmp/pear/temp/oauth -I/Applications/MAMP/bin/php/php5.3.6/include/php -I/Applications/MAMP/bin/php/php5.3.6/include/php/main -I/Applications/MAMP/bin/php/php5.3.6/include/php/TSRM -I/Applications/MAMP/bin/php/php5.3.6/include/php/Zend -I/Applications/MAMP/bin/php/php5.3.6/include/php/ext -I/Applications/MAMP/bin/php/php5.3.6/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -Wall -g -c /private/tmp/pear/temp/oauth/oauth.c  -fno-common -DPIC -o .libs/oauth.o
In file included from /private/tmp/pear/temp/oauth/oauth.c:14:
/private/tmp/pear/temp/oauth/php_oauth.h:20:10: 

fatal error: 'php.h' file not found

include "php.h"
     ^

1 error generated.

make: *** [oauth.lo] Error 1

ERROR: `make' failed 
```

再次，发生了什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-24T05:29:31.147

我知道这很旧，但我在遇到类似问题时发现了这个问题。

> MAMP 不附带一堆 PHP 源代码

*   下载 MAMP 组件并配置
*   网址： http: [//www.mamp.info/en/downloads/index.html](http://www.mamp.info/en/downloads/index.html)（即MAMP_components_2.0.2.zip）
*   解压你的 MAMP_components_2.0.2.zip
*   确定您的 php-5.xxtar.gz 文件（其中 5.xx 是您的 PHP 版本）
*   如果您使用的是 php > 5.4.10，请从[http://php.net/releases](http://php.net/releases)下载源代码，因为它们不在 MAMP 组件下载中（在评论中注明 pulkitsinghal）
*   为您的 PHP 源代码创建目录：

    `mkdir -vp /Applications/MAMP/bin/php5/include`

*   将 php-5.xxtar.gz 解压到 /Applications/MAMP/bin/php/php5.*/include 或 /Applications/MAMP/bin/php5/ 中：

    `tar zxvf php-5.x.x.tar.gz -C /Applications/MAMP/bin/php/php5.?.??/include`

*   将您的 php-5.xx 目录重命名为 php（不带版本编号）：

    `mv /Applications/MAMP/bin/php/php5.2.17/include/php-5.?.?? /Applications/ MAMP/bin/php/php5.2.17/include/php`

*   配置 PHP 源代码（它将创建必要的文件，例如 zend_config.h、tsrm_config.h 等）：

    `cd /Applications/MAMP/bin/php/php5.?.??/include/php`

    `./configure`

该过程用于另一个修复，但这解决了找不到 php.h 的问题

归功于我找到答案的地方 - ：

[托马斯·亨特博客](http://thomashunter.name/blog/getting-the-php-mongodb-driver-installed-with-mamp-on-os-x/)

[谷歌文档详解流程](http://thomashunter.name/blog/getting-the-php-mongodb-driver-installed-with-mamp-on-os-x/)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-11T01:08:50.700

我在尝试`pecl install -f ssh2`使用 MAMP 时遇到了同样的问题。

这是我修复它的方法：

1.  MAMP 不提供 PHP 5.4.10 的源代码存档，因此请从[php.net下载](http://www.php.net/releases/)
2.  将源代码存档解压缩到 /Applications/MAMP/bin/php/php5.4.10/include/php
3.  运行`./configure`为您的平台配置源代码（如果没有这一步，pecl 安装将无法查找一堆头文件）
4.  重试`pecl`安装

（非常感谢斯蒂芬的回答几乎相同）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-05T02:33:32.797

这是对斯蒂芬的回答和格雷格的评论的补充

在 OSX 10.10.2 上为 php 5.6.2 编译 xdebug 2.3.2 时，我无法摆脱

> 'zend_config.h' 文件未找到

错误，直到我将以下选项添加到 php 文件夹中的 ./configure ：

> ./configure --without-iconv

[卡梅伦布朗宁的学分](http://www.5cameron.com/content/installing-php-uploadprogress-mac-os-109-mavericks)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-18T00:52:54.833

PECL 模块是编译模块，为了安装它们，你需要 PHP 头文件。您可以在 php.net/downloads.php 上找到标题，确保下载与您的 PHP 版本匹配的版本。然后你可以按照这个：[在 MAMP 环境中安装 PHP OAuth](https://stackoverflow.com/questions/5413380/installing-php-oauth-in-mamp-environment/24275145)

# jsf-2 - java.lang.NumberFormatException：尝试从 clientId 'j_idt36:j_idt38:j_id2' 中提取 rowIndex 对于输入字符串：“j_idt38”

> ID：10717753
> 
> 赞同：0
> 
> 时间：2012-05-23T10:09:10.323
> 
> 标签：jsf-2, primefaces

我正在使用 EJB 3.0 + JPA 2.0 + PrimeFaces 3.2 + JSF 2.0。当我在每个页面中重复相同的代码时，我的应用程序中的导航非常棒，没有任何问题。当我`template.xhtml`用作母版页以便相同的代码适用于所有页面时，会出现一条错误消息：

> javax.servlet.ServletException：尝试从 clientId 'j_idt36:j_idt38:j_id2' 中提取 rowIndex 对于输入字符串：“j_idt38”

此链接会在出现错误消息时向您显示：[http ://www.youtube.com/watch?v=rR6CqwBREpM](http://www.youtube.com/watch?v=rR6CqwBREpM)

`template.xhtml`代码 ：

```
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script>
        window.history.forward();
    </script>
    <ui:insert name="title">
    </ui:insert>
    <link href="#{facesContext.externalContext.requestContextPath}/resources/css/cssLayout.css" rel="stylesheet" type="text/css"/>
</h:head>

<h:body>
    <f:view locale="#{langueApp.localeCode}">
        <p:layout fullPage="true">
            <p:layoutUnit position="north" size="100" header="#{bundle.header}" resizable="true" closable="false" collapsible="true">
                <ui:include src="template/header.xhtml"/>
            </p:layoutUnit>

            <p:layoutUnit position="west" size="300" resizable="true"  collapsible="true" header="#{bundle.me}" minSize="200">
                <ui:include src="template/dynamicmenu.xhtml"/>
            </p:layoutUnit>

            <ui:insert name="content">

            </ui:insert>

            <p:layoutUnit position="south" size="0" style="text-align: center;" header="#{bundle.footer}" resizable="false" closable="false" collapsible="false" >
                <ui:include src="template/footer.xhtml"/>
            </p:layoutUnit> 
        </p:layout>
    </f:view>
</h:body> 
```

堆栈跟踪：

```
Avertissement: PWC4011: Unable to set request character encoding to UTF-8 from context /ProjetIset2, because request parameters have already been read, or ServletRequest.getReader() has already been called
Avertissement: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NumberFormatException: Trying to extract rowIndex from clientId 'j_idt36:j_idt38:j_id2' For input string: "j_idt38"
    at javax.faces.component.UIData.invokeOnComponent(UIData.java:1006)
    at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1403)
    at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:669)
    at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1403)
    at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:669)
    at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1403)
    at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:669)
    at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1403)
    at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:669)
    at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:1403)
    at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:669)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:305)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:452)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:40:07.820

我认为这是 Mojarra 实现中的一个错误。我追查到代码中的错误并触发了一个错误：http: [//java.net/jira/browse/JAVASERVERFACES-2623](http://java.net/jira/browse/JAVASERVERFACES-2623)

# php - 通过参数名称将参数传递给函数？

> ID：10717763
> 
> 赞同：2
> 
> 时间：2012-05-23T10:09:29.963
> 
> 标签：php, function

> **可能重复：**
> [命名 PHP 可选参数？](https://stackoverflow.com/questions/1342908/named-php-optional-arguments)

是否可以在 PHP 中直接传递参数，例如如果我有一个函数：

```
function test ($a="",$b="",$c=""){} 
```

是否可以仅使用 $c 参数调用该函数，现在我通过传递所有参数来执行此操作：

```
test("","","Hello"); 
```

但我可以这样做吗

```
test($c="Hello"); 
```

?

# javascript - JavaScript - 将字符串作为对象属性传递

> ID：10717764
> 
> 赞同：0
> 
> 时间：2012-05-23T10:09:33.803
> 
> 标签：javascript

仅供参考，这段代码是 ExtJS 4 脚本的一部分。我有一个全局设置，用于显示我的图标所在目录的路径。我正在做一些修改，所以之前是：

> g_settings.iconUrl

但现在我需要像这样传递第三个参数属性：

> g_settings.iconUrl.docIcon

我遇到的问题是我有一个`if`检查不同值的语句：

> if (扩展 == 'doc'|| 扩展 == 'docx'|| 扩展 == 'xlsx'|| 扩展 == 'xls)

然后我做：

> 扩展 += '图标';

我需要使用：

> g_settings.iconUrl.extension

当我使用`console.log(extensions)`它时，它的值符合预期（例如`docIcon`），但是当我尝试将它用作属性时它不起作用。如果我使用 console.log 登录：

> console.log(g_settings.iconUrl+ '.' +extensions)

输出是`[object Object].docIcon`所以我想我也必须以某种方式转换`extensions`为对象。我不确定这是否能解决问题，但这就是我现在所拥有的。

有什么建议么？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:14:22.787

为什么不直接将它添加到字符串中..

`console.log("g_settings.iconUrl." + examples)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:20:47.990

iconURL 是（并且可能仍然是）一个字符串，但是你添加了一些属性......所以在分配 .iconURL="..." 你应该使用

```
iconURL.file="...";//(or other name you choose) 
```

和后期使用

```
.iconURL.file+"."+extensions; 
```

# mysql - Amazon EC2 上的 MySQL/Magento 性能问题

> ID：10717767
> 
> 赞同：2
> 
> 时间：2012-05-23T10:09:39.197
> 
> 标签：mysql, magento, amazon-ec2

我们在 Amazon EC2 上运行 2 个托管 Magento 电子商务站点和 1 个 MySQL 数据库服务器的 Web 服务器。

我们在 MySQL 服务器上遇到了主要的性能问题、死锁、“超过锁定等待超时”错误等，并且很难解决这些问题。

我们最近将 db 服务器升级到了 m1.xlarge 实例（来自 m1.large），但我们仍然会继续遇到这些问题。

我们一直将这些问题归因于我们经常在 EC2 服务器上看到的坏磁盘 IO，但最近我看到了死锁等问题，即使磁盘 IO 很好。

“sar”命令显示我们在高峰时间或当我们执行数据库密集型操作（如通过 Magento API 创建发票）时磁盘 IO 性能非常差。我们经常看到 iowait 高达 20% 以上。

下面是一个屏幕截图的链接，显示了我们最近遇到的一个问题中“mtop”的结果，其中查询导致整个数据库变慢：

[http://i.imgur.com/AARlc.png](https://i.imgur.com/AARlc.png)

此屏幕截图显示了阻止其余查询执行的一个或其他查询。它还显示了相当低的平均负载，当执行密集命令时，我们经常看到平均负载上升到 3.0。

以下是`my.cnf`设置：

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
symbolic-links=0
innodb_file_per_table=1
key_buffer=512M
max_allowed_packet=64M
table_cache=512
innodb_thread_concurrency=5
innodb_buffer_pool_size=4976M
innodb_additional_mem_pool_size=8M
innodb_log_file_size=128M
innodb_log_buffer_size=8M
thread_cache_size=150
sort_buffer_size=4M
read_buffer_size=4M
read_rnd_buffer_size=2M
myisam_sort_buffer_size=64M
tmp_table_size=256M
query_cache_type=1
query_cache_size=128M
max_connections=400
wait_timeout=28800
innodb_lock_wait_timeout=120
max_heap_table_size=256M
long_query_time=3
log-slow-queries=...mysql-slow.log

[mysqld_safe]
log-error=...mysqld.log
pid-file=...mysqld.pid 
```

我们已经`pt-query-digest`广泛使用该功能来分析我们的 MySQL 慢查询日志。

基本上我们看到`sales_flat_quote table`更新和插入的速度非常慢，但许多其他表也是如此。

`sales_flat_quote`虽然不是特别大，但表中只有大约 100k 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:19:48.487

可能有几个根本原因：

*   您的一些慢查询可能会锁定表，从而使其他查询排队
*   您的查询可能未优化
*   您的查询可能需要一些表上的更多索引

[使用这个官方工具](http://dev.mysql.com/doc/refman/5.1/en/mysqldumpslow.html)检查你最慢的查询：

```
mysqldumpslow 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:24:51.630

我们在我们的 mysql EC2 服务器上观察到了类似的问题，但是，我们很快将我们的数据库迁移到了 RDS 实例。从那以后，问题很少。有人可能会争辩说 RDS 成本高昂，而 EC2 成本不高，但是，您还可以节省花在管理数据库/日常备份等上的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T16:07:52.617

我建议将您的数据库迁移到 RDS 实例。

# c# - 为什么检索匿名类型的属性名称会产生以下结果？

> ID：10717768
> 
> 赞同：2
> 
> 时间：2012-05-23T10:09:39.763
> 
> 标签：c#, reflection

我的一个初级同事设法编写了非常可怕的代码。

```
printJob.Type = item[LocalFunctions.GetName(new { printJob.Type })].ToString();

 public static string GetName<T>(T item) where T : class
    {
        try
        {
            return typeof(T).GetProperties()[0].Name;
        }
        catch (Exception ex)
        {
            return null;
        }
    } 
```

你猜 GetName 会输出什么？**它将输出“类型”**！我只是不明白这怎么可能。我的第一个想法是 MS 将创建一个匿名类型，其属性与值来自的属性同名（编译器魔术？）。由于这不可能是受支持的功能，我建议我的初级同事不要使用他无法理解的东西。

但这留下了一个问题：**这怎么可能？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:12:59.273

匿名类型推断属性名称，除非它们被指定：

> 如果未在匿名类型中指定成员名称，编译器会为匿名类型成员提供与用于初始化它们的属性相同的名称。

[http://msdn.microsoft.com/en-us/library/bb397696.aspx](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

然后编译器在编译时推断泛型的类型 - 这样就`typeof(T)`可以了。完全支持它，即使代码很脆弱。当有人重构属性名称时会发生什么？

我还要说不建议就您自己没有答案的主题向人们提供建议-这是许多 www.thedailywtf.com 文章的来源；-)

就个人而言，我仍然会删除它以支持更健壮的代码，而不是假设属性名称总是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:13:22.553

这就是编译器（不是 MS）在创建匿名类型时所做的。它使用所提供参数的类型、名称和顺序来构造一个新类型。这是完全支持的，并打算这样做，所以没有理由不使用它。

编译器具有执行此操作的所有可用信息。它会查看您用来初始化它的属性的名称和类型（例如`printJob.Type`），并可以使用该信息为您生成匿名类型。

请参阅此处了解更多信息：http:
[//msdn.microsoft.com/en-us/library/bb397696.aspx](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

# dos - 如何修复此批处理脚本？

> ID：10717772
> 
> 赞同：2
> 
> 时间：2012-05-23T10:09:58.217
> 
> 标签：dos, batch-file

我正在尝试编写一个将多个 css 文件组合到一个文件中的批处理脚本。到目前为止，我已经想出了这个......

```
# Set start folders & files
set fn1=filename.css
set fn2=another-filename.css
set fn3=yet-another-filename.css

# get filename add to temp file inside comment syntax
echo /* %fn1% >>  tmp.css
echo. --------------------------------------------------------------- */ >>  tmp.css
echo. >>  tmp.css

# copy file contents
copy/b %fn1% + tmp.css

# repeat with other files...

echo /* %fn2% >>  tmp.css
echo. --------------------------------------------------------------- */ >>  tmp.css
echo. >>  tmp.css
copy/b %fn2% + tmp.css

...

rename tmp.css  combined-files.css
move combined-files.css \new-folder\combined-files.css 
```

问题是它产生以下

```
/* filename.css
--------------------------------- */
/* another-filename.css
--------------------------------- */
/* ... */

[styles from filename.css]
[styles from another-filename.css]
.... 
```

我哪里错了？

谢谢

ps 我尝试使用 ms-dos FOR 命令简化上述内容也很糟糕。

```
set commentpt1=\*
set commentpt2=----------------------------------------- *\

FOR /F %%I IN ('DIR /s C:\[folder location]') DO echo %commentpt1% %%~nI 0x0A %commentpt2% 0x0A 0x0A >> temp.css copy/b %%I + tmp.css >> temp.css 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:45:32.517

您的主要问题是您在 COPY /B 命令中颠倒了文件名的顺序。此问题的副作用是您正在修改原始文件！

您可能不想看到 COPY /B 命令的输出，因此您可以重定向到 nul。

在移动临时文件之前无需重命名它。

事实上，为什么要使用临时文件呢？为什么不直接写入您想要的目标文件？

我会将空行放在文件内容之后，而不是之前。我认为它看起来更好。
使用它来`echo(`代替`echo.`.

但是......有一个更简单，更清洁的方法来做你想做的事。

```
@echo off
(
  for %%F in (
    "filename.css"
    "another-filename.css"
    "yet-another-filename.css"
  ) do (
    echo /* %%~F
    echo --------------------------------------------------------------- */
    type %%F
    echo(
  )
)>"\new-folder\combined-files.css" 
```

如果要合并文件夹中的所有 .css 文件，那就更简单了：

```
@echo off
(
  for %%F in ( *.css ) do (
    echo /* %%~fF
    echo --------------------------------------------------------------- */
    type "%%~fF"
    echo(
  )
)>"\new-folder\combined-files.css" 
```

以上处理当前目录，但您可以在 IN() 子句中包含路径信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:14:02.863

例如，您可以将 file1.txt 和 file2.txt 连接到一个名为 file3.txt 的新文件中：

```
copy/b file1.css+file2.css file3.css 
```

或者：

```
copy/b *.css newfilename.css 
```

或者对于文件夹中的所有文件：

```
copy/b * "newfilename_with_path" 
```

# java - java中的字符串

> ID：10717778
> 
> 赞同：1
> 
> 时间：2012-05-23T10:10:18.730
> 
> 标签：java, string

我正在尝试创建一个字符串，我希望它具有这种形式：

```
 <atom:link rel="name" type="html" href="http://www/data/name/1"/> 
```

我正在尝试这个：

```
 String astring = "<atom:link rel="+"name"+" "+"type="+"html"+" "+"href="+"http://www/data/name/"+id+"/>" 
```

我拿这个：

```
&lt;atom:link rel=name type=html href=http://www/data/name/1/&gt; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:12:34.923

双引号必须在字符串文字中用反斜杠转义：

```
String astring = "<atom:link rel=\"name\" type=\"html\" href=\"http://www/data/name/1\"/>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:13:52.023

看一下 [`StringEscapeUtils`](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:13:34.107

试试这个：

```
String astring = "<atom:link rel="+"\"name\""+" "+"type="+"\"html\""+" "+"href="+"\"http://www/data/name/"+id+"\"/>" 
```

您需要转义`"`字符串中的字符，通过在它前面加上反斜杠来实现：`\"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:15:48.333

无意冒犯，但似乎您没有太多 google 或试图了解根本问题，即*escaping*。由于这是数据格式和编程的基本概念，这里是维基百科中[关于转义字符的页面。](http://en.wikipedia.org/wiki/Escape_character)

然后，您应该自己研究在 (1) java 字符串和 (2) xml 的上下文中转义的概念。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T10:17:07.890

你的问题到底是什么？缺少双引号？还是逃脱了 < > ？

对于缺少双引号，这只是因为您没有在字符串中放置任何双引号。请做类似的事情`"rel=\"name\""`

对于后一种，我敢打赌您已经将字符串作为文本节点并让 XML 编写器写出数据？因为在 XML 中，`< >`必须对字符串进行转义才能正确表示。您不应期望通过在某个 xml 节点中提供纯字符串来创建 XML 结构。使用您的 XML API 来正确地构建这块 XML 结构。

# user-input - 如何强制 Windows Server 2008 相信用户以交互方式登录？

> ID：10717788
> 
> 赞同：0
> 
> 时间：2012-05-23T10:10:52.070
> 
> 标签：user-input, ui-automation, graphic

我编写了一些运行安装程序并单击其按钮以完成安装而无需人工交互的 UI 自动化。

这样做的主要原因是自动化无法通过正统手段（例如参数或部署包）自动化的安装。

这是一个低成本的解决方案，它在用户 PC 上运行良好，但至关重要的是，它不适用于我们的构建农场，该系统主要用于构建农场。

经过一番调查，我认为这是因为在构建代理中，尽管用户已登录，但此登录不是“交互式”的，除非 Windows 必须这样做，否则不会呈现屏幕。我可以通过远程桌面连接来强制渲染，然后自动化可以正常工作。如果远程桌面窗口失去焦点（例如通过位于另一个窗口后面），自动化将停止工作。

我怀疑如果我可以欺骗 Windows 相信用户以交互方式登录并且 Windows 呈现，自动化会正常工作，但我不知道如何实现这一点。

我知道这个解决方案远非可靠，如果你能推荐更好的方法来解决这个问题，我很高兴听到它们，但它实现起来真的很便宜，而且如果它可以工作的话会非常有效（内置的代码构建农场取决于正在安装的软件包，因此在同步后需要运行自动安装程序，并且我们将有多达 30-40 台机器来管理和维护）。

简而言之：有没有人知道如何欺骗 Windows 让它相信它应该表现得就像人类用户以交互方式登录一样？

先感谢您！

# apache-flex - 使项目编辑器可编辑 flex 中的高级数据网格

> ID：10717789
> 
> 赞同：2
> 
> 时间：2012-05-23T10:11:09.620
> 
> 标签：apache-flex, flex4, advanceddatagrid, itemeditor

我有一个高级数据网格，其中我有 2 列，该列的每一行都是一个项目编辑器

现在我想在双击时编辑行单元格我尝试了各种方法以使其可编辑一些属性是用这段代码编写的。

我使 colmns Grid 的可编辑属性为 true，并且我尝试使用 rendrerIsEditor 将其设置为 true...

```
 <mx:AdvancedDataGrid id="varGrid"  width="100%" top="7" bottom="5" left="7" right="7" rowCount="15"
                            sortableColumns="true" editable="true">
            <mx:columns>
                <mx:AdvancedDataGridColumn headerText="Name" editable="true" dataField="name" sortable="true" editorDataField="text" rendererIsEditor="true">
                    <mx:itemEditor>
                        <fx:Component>
                            <s:GridItemEditor >
                                <s:TextInput id="variableName" text="@{value}" restrict="^\\{\\}" width="100%" height="100%" maxChars="250" 
                                            />
                            </s:GridItemEditor>
                        </fx:Component>
                    </mx:itemEditor>
                </mx:AdvancedDataGridColumn>

                <mx:AdvancedDataGridColumn headerText="Value" editable="true" dataField="lastValue" sortable="true" rendererIsEditor="true">
                    <mx:itemEditor>
                        <fx:Component>
                            <s:GridItemEditor>
                                <s:TextInput text="@{value}" restrict="^\\{\\}" width="100%" height="100%" maxChars="250"/>
                            </s:GridItemEditor>
                        </fx:Component>
                    </mx:itemEditor>
                </mx:AdvancedDataGridColumn>
            </mx:columns>

            <s:AsyncListView list="{data.variables}"/>
        </mx:AdvancedDataGrid> 
```

请帮助我是我做得对还是其中缺少某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:07:30.843

您的代码有几个问题：

*   你想使用自定义`itemEditor`，所以不要设置`rendererIsEditor="true"`。
*   您不能`s:GridItemEditor`在`AdvancedDataGrid`. 这是为 Spark 准备的`s:DataGrid`。
*   该`id`属性不允许在`<fx:Component>`.
*   使用 Spark 组件不像`itemEditor`以前使用 Halo 组件那么容易。我建议您使用.`mx:TextInput`而不是`s:TextInput`. 如果您需要使用 Spark，请查看[MXAdvancedDataGridItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/advancedDataGridClasses/MXAdvancedDataGridItemRenderer.html)和[Using a Spark item renderer with a MX control](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-1c32bcb9124deadc3e9-8000.html)。

下面是纠正所有这些问题并使用该`mx:TextInput`组件的代码片段：

```
<mx:AdvancedDataGrid id="varGrid" width="100%" top="7" bottom="5" left="7" right="7" rowCount="15" sortableColumns="true"
                     editable="true">
    <mx:columns>
        <mx:AdvancedDataGridColumn headerText="Name" editable="true" dataField="name" sortable="true" editorDataField="text">
            <mx:itemEditor>
                <fx:Component>
                    <mx:TextInput restrict="^\\{\\}" width="100%" height="100%" maxChars="250"/>
                </fx:Component>
            </mx:itemEditor>
        </mx:AdvancedDataGridColumn>

        <mx:AdvancedDataGridColumn headerText="Value" editable="true" dataField="lastValue" sortable="true">
            <mx:itemEditor>
                <fx:Component>
                    <mx:TextInput restrict="^\\{\\}" width="100%" height="100%" maxChars="250"/>
                </fx:Component>
            </mx:itemEditor>
        </mx:AdvancedDataGridColumn>
    </mx:columns>

    <s:AsyncListView list="{data.variables}"/>
</mx:AdvancedDataGrid> 
```

# git - GitPython通过sha获取树和blob对象

> ID：10717790
> 
> 赞同：8
> 
> 时间：2012-05-23T10:11:13.517
> 
> 标签：git, gitpython

我正在使用带有裸存储库的 GitPython，并且试图通过其 SHA 获取特定的 git 对象。如果我直接使用 git，我会这样做

```
git ls-tree sha_of_tree
git show sha_of_blob 
```

由于我使用的是 GitPython，并且我想获得一棵特定的树，因此我执行以下操作：

```
repo = Repo("path_to_my_repo")
repo.tree("b466a6098a0287ac568ef0ad783ae2c35d86362b") 
```

把这个拿回来

```
<git.Tree "b466a6098a0287ac568ef0ad783ae2c35d86362b"> 
```

现在我有一个树对象，但我无法访问它的属性，如路径、名称、blob 等。

```
repo.tree("b466a6098a0287ac568ef0ad783ae2c35d86362b").path 
```

```
Traceback (most recent call last):

File "<stdin>", line 1, in <module>
File "c:\Python27\lib\site-packages\gitdb\util.py", line 238, in __getattr__
self._set_cache_(attr)
File "c:\Python27\lib\site-packages\git\objects\tree.py", line 147, in _set_cache_
super(Tree, self)._set_cache_(attr)
File "c:\Python27\lib\site-packages\git\objects\base.py", line 157, in _set_cache_
raise AttributeError( "path and mode attributes must have been set during %s object creation" % type(self).__name__ )
AttributeError: path and mode attributes must have been set during Tree object creation 
```

但是如果我输入以下内容，它会起作用

```
repo.tree().trees[0].path 
```

我的问题的另一部分是如何使用 GitPython 获取 blob 对象。我注意到唯一的对象树有属性 blob，所以为了通过 SHA 获取 blob，我必须 (a) 首先知道它属于哪个树，(b) 找到这个 blob，然后 (c) 调用`data_stream`方法。我可以做

```
repo.git.execute("git show blob_sha") 
```

但我想首先知道这是做到这一点的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-17T20:50:31.143

尝试这个：

```
 def read_file_from_branch(self, repo, branch, path, charset='ascii'):
            '''
            return the contents of a file in a branch, without checking out the
            branch
            '''
            if branch in repo.heads:
                blob = (repo.heads[branch].commit.tree / path)
                if blob:
                    data = blob.data_stream.read()
                    if charset:
                        return data.decode(charset)
                    return data
            return None 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T20:00:16.960

一般来说，一棵树的孩子是斑点和更多的树。Blob 是作为该树的直接子级的文件，而其他树是作为该树的直接子级的目录。

直接访问该树下的文件：

```
repo.tree().blobs # returns a list of blobs 
```

访问该树正下方的目录：

```
repo.tree().trees # returns a list of trees 
```

如何查看子目录中的 blob：

```
for t in repo.tree().trees:
    print t.blobs 
```

让我们从前面获取第一个 blob 的路径：

```
repo.tree().blobs[0].path # gives the relative path
repo.tree().blobs[0].abspath # gives the absolute path 
```

希望这能让您更好地了解如何导航此数据结构以及如何访问这些对象的属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-15T22:41:12.637

我一直在寻找这个，因为我遇到了同样的问题，我找到了解决方案：

```
>>> import binascii
>>> id_to_find = repo.head.commit.tree['README'].hexsha  # For example
>>> id_to_find
"aee35f14ee5515ee98d546a170be60690576db4b"
>>> git.objects.blob.Blob(repo, binascii.a2b_hex(id_to_find))
<git.Blob "aee35f14ee5515ee98d546a170be60690576db4b"> 
```

我觉得应该有一种方法可以通过 repo 引用 Blob，但我找不到它。

# c# - WPF图像轮播控制？

> ID：10717796
> 
> 赞同：-1
> 
> 时间：2012-05-23T10:11:36.110
> 
> 标签：c#, wpf, xaml, wpf-controls, carousel

在我的 WPF 应用程序中，我有许多书籍图像，我想在图像轮播/滑块控件中显示它们。

在该控件中，当我单击右箭头（图片）时，新的一组 4 张图像将以流畅的方式出现。

有没有免费的。

![在此处输入图像描述](../Images/fe7437422c1a52a24c1ce7f7d7ceebe4.png)

这种技术包含在我们的网站中，使用 javascript 和其他东西，但我想要一个 WPF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:56:26.857

对于旋转木马控件，我知道[FluidKit](http://fluidkit.codeplex.com/)。根据[介绍性博客](http://blog.pixelingene.com/2008/03/introducing-fluidkit-a-wpf-library-of-controls-helpers-and-the-likes/)，它仅在[BSD 许可](http://en.wikipedia.org/wiki/BSD_licenses)下以源代码形式提供。特别是，看看[ElementFlow](http://blog.pixelingene.com/2008/03/elementflow-added-to-fluidkit/)控件。

![在此处输入图像描述](../Images/6d50ee2cf1b1464a657b61b0c594a59d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:10:52.960

试试这个。

[http://www.codeproject.com/Articles/181835/WPF-Carousel-Control](http://www.codeproject.com/Articles/181835/WPF-Carousel-Control)

[http://fluidkit.codeplex.com/](http://fluidkit.codeplex.com/)

[http://blog.pixelingene.com/2007/06/the-elementflow-custom-control-can-do-coverflow-too/](http://blog.pixelingene.com/2007/06/the-elementflow-custom-control-can-do-coverflow-too/)

# ruby - Rails 在多对多上嵌套表单：如何防止重复？

> ID：10717797
> 
> 赞同：4
> 
> 时间：2012-05-23T10:11:38.917
> 
> 标签：ruby, ruby-on-rails-3, many-to-many, nested-forms, nested-attributes

我在我的 rails 3.2.3 应用程序中设置了一个嵌套表单，它工作正常，我的模型是：

```
class Recipe < ActiveRecord::Base
  attr_accessible :title, :description, :excerpt, :date, :ingredient_lines_attributes

  has_and_belongs_to_many :ingredient_lines
  accepts_nested_attributes_for :ingredient_lines
end 
```

和：

```
class IngredientLine < ActiveRecord::Base
  attr_accessible :ingredient_id, :measurement_unit_id, :quantity

  has_and_belongs_to_many :recipes
  belongs_to :measurement_unit
  belongs_to :ingredient
end 
```

如上所述，一个食谱可以有多个成分行，反之亦然。

我要避免的是 IngredienLine 表上的记录重复。

例如，假设对于 recipe_1 与 {"measurement_unit_id" => 1, "ingredient_id" => 1, "quantity" => 3.5} 的成分线相关联，如果对于 recipe_5，成分线子表单由用户使用相同的值编译，我不想在 IngredientLine 表上创建新记录，而只需要在 join 表成分_lines_recipes 中创建新的关联记录。

请注意，目前我没有任何成分线控制器，因为保存和更新成分线是由嵌套的表单例程处理的。甚至我的食谱控制器也是简单而标准的：

```
class RecipesController < ApplicationController
  respond_to :html

  def new
    @recipe = Recipe.new
  end

  def create
    @recipe = Recipe.new(params[:recipe])
    flash[:notice] = 'Recipe saved.' if @recipe.save  
    respond_with(@recipe)
  end

  def destroy
    @recipe = Recipe.find(params[:id])
    @recipe.destroy
    respond_with(:recipes)
  end

  def edit
    respond_with(@recipe = Recipe.find(params[:id]))
  end

  def update
    @recipe = Recipe.find(params[:id])
    flash[:notice] = 'Recipe updated.' if @recipe.update_attributes(params[:recipe])
    respond_with(@recipe)
  end

end 
```

我的猜测是，应该足以用 覆盖`create`IngredientLine 的标准行为`find_or_create`，但我不知道如何实现它。

但是还有一点需要注意，想象一个存在一些成分线的子表单的编辑，如果我添加另一个成分线，它已经存储在成分线表中，轨道当然不应该在成分线表上写任何东西，但也应该区分已经与父关联的子记录，以及需要为其创建关系的新子记录，在连接表上写入新记录。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-17T12:53:46.670

老问题，但我有同样的问题。忘记使用 rails 4 strong_parameters 将 :id 添加到白名单。

例如：

widgets_controller.rb

```
def widget_params
  params.require(:widget).permit(:name, :foos_attributes => [:id, :name, :_destroy],)
end 
```

小部件.rb

```
class Widget < ActiveRecord::Base
  has_many :foos, dependent: :destroy
  accepts_nested_attributes_for :foos, allow_destroy: true
end 
```

foo.rb

```
class Foo < ActiveRecord::Base
  belongs_to :widget
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:15:47.813

在配方模型中重新定义方法

```
def ingredient_lines_attributes=(attributes)
   self.ingredient_lines << IngredientLine.where(attributes).first_or_initialize
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:56:33.260

我遇到了类似的情况，并在[这个答案](https://stackoverflow.com/a/3580267/5610)中找到了灵感。简而言之，在节省时间之前，我不担心嵌套模型的重复。

翻译成你的例子，我添加`autosave_associated_records_for_ingredient_lines`到`Recipe`. 正如您的直觉所说，它遍历`ingredient_lines`并执行 a 。`find_or_create`如果成分线很复杂，尤里的`first_or_initialize`方法可能更干净。

我相信这具有您正在寻找的行为：嵌套模型永远不会重复，但编辑一个会导致新记录而不是更新共享的记录。孤儿的可能性很大，`ingredient_lines`但如果这是一个严重的问题，如果该模型只有一个`recipe`id 与当前模型匹配的模型，您可以选择更新。

# linux - CMake 错误：此项目中使用了以下变量，但它们设置为 NOTFOUND

> ID：10717798
> 
> 赞同：11
> 
> 时间：2012-05-23T10:11:42.587
> 
> 标签：linux, cmake, configure

我正在尝试`whalebot`使用 tar 文件配置爬虫`whalebot-0.02.00.tar.gz`。我已经正确提取了它：

```
root@Admin1:~/dls# tar xvzf whalebot-0.02.00.tar.gz 
```

之后我想配置它：

```
root@Admin1:~/dls/whalebot# ./configure 
```

它给了我错误：

> bash: ./configure: 没有这样的文件或目录

我也运行了命令：

```
root@Admin1:~/dls/whalebot# cmake ./ 
```

它给了我以下结果：

```
root@Admin1:~/dls/whalebot# cmake ./
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Boost version: 1.44.0
-- Found the following Boost libraries:
-- filesystem
-- system
-- thread
-- program_options
-- date_time
CMake Warning (dev) at webspider/CMakeLists.txt:25 (link_directories):
This command specifies the relative path

../statsem_string/bin

as a link directory.

Policy CMP0015 is not set: link_directories() treats paths relative to the
source dir. Run "cmake --help-policy CMP0015" for policy details. Use the
cmake_policy command to set the policy and suppress this warning.
This warning is for project developers. Use -Wno-dev to suppress it.

CMake Warning (dev) at webspider/CMakeLists.txt:25 (link_directories):
This command specifies the relative path

../3dparty/google-url

as a link directory.

Policy CMP0015 is not set: link_directories() treats paths relative to the
source dir. Run "cmake --help-policy CMP0015" for policy details. Use the
cmake_policy command to set the policy and suppress this warning.
This warning is for project developers. Use -Wno-dev to suppress it.

CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
HTMLCXX_LIBRARY
linked by target "whalebot" in directory /root/dls/whalebot/webspider

-- Configuring incomplete, errors occurred! 
```

我该如何进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:43:39.753

CMake 似乎无法找到 htmlcxx 库。

在[whalebot 文档](http://code.google.com/p/whalebot/wiki/GettingStarted)中，htmlcxx 被列为依赖项。

你需要[下载 htmlcxx](http://sourceforge.net/projects/htmlcxx/)，解压，然后安装：

```
cd <path to unzipped htmlcxx>
./configure --enable-static=on --enable-shared=off
make
sudo make install 
```

您可能需要添加`#include <cstddef>`到顶部`html/tree.h`才能使其成功构建。它将`usr/local/`默认安装到。

如果您还没有安装[icu](http://site.icu-project.org/) ， 您还需要安装它：

```
sudo apt-get install libicu-dev 
```

最后，您现在可以构建和安装whalebot。同样，如果你有一个相当最新的 boost 安装，make 可能会失败。

在第 57 行中`webspider/src/webspider_options.cpp`，您需要替换`boost::filesystem::initial_path().native_directory_string()`为`boost::filesystem::initial_path().string()`. 然后你应该很好地构建和安装：

```
cd <path to unzipped whalebot>
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make
sudo make install 
```

这也将`usr/local/`默认安装到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-26T08:23:24.587

检查您是否在 CMakeLists 中编写了`find_library(..)`或`find_path(.)`，然后将其替换为`find_package(..)`.

它解决了我的错误。

# java - 春天 scope="prototype" 的目的是什么？

> ID：10717803
> 
> 赞同：3
> 
> 时间：2012-05-23T10:11:56.760
> 
> 标签：java, spring

据我了解，如果为 bean 提供了 scope="prototype" ，则会在每个请求上创建该类的新实例。那么为什么会有人使用spring来创建一个新对象而不是简单地编写

```
ClassName newBean = new ClassName(); 
```

我只使用弹簧来创建单例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:15:20.150

因为您可能想在原型中注入其他 bean。或者您可能希望将 AOP 方面应用于此 bean 的方法。或者你可能想让它成为事务性的。或安全。

如果只是简单地调用类的构造函数，它就不再是 Spring 管理的 bean，而且 Spring 对 bean 所做的一切都不是对手动构建的对象进行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:15:23.297

我知道的一种情况是spring用作struts2的ObjectFactory。为每个 http 请求创建一个新的 Action 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:19:20.807

CMOE =“关闭修改，打开扩展。”

如果 ClassName 有任何行为变化，那么您可以扩展 ClassName 并在 config.xml 中提供新类的对象。

这不需要任何代码更改。

这是简单的原因之一。JB Nizet 所说的更具描述性和深入性。

# php - 在后台 WAMP 中运行 SQL Server PHP 脚本

> ID：10717804
> 
> 赞同：0
> 
> 时间：2012-05-23T10:11:58.820
> 
> 标签：php, sql-server-2008, batch-file, wamp

我有一个脚本可以连接到 SQL 服务器以将一些数据拉到 MySQL 数据库中，并且我想设置计划任务以定期运行它。理想情况下它应该在后台运行，但如果它打开/关闭某些东西，我不会太在意。

我用脚本制作了一个bat文件

```
C:\wamp\bin\php\php5.3.0\php.exe "C:\wamp\www\data\import.php" 
```

但是，它似乎不喜欢它连接到 SQL Server 并且出错的事实

```
PHP Fatal error: Call to undefined function sqlsrv_connect() in c:\wamp\www\includes\connection.php on line 4 
```

在浏览器中运行它时不会抛出它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:14:46.900

您的命令行 PHP (CLI) 似乎没有激活 SQL Server 扩展。

尝试：

*   检查您的`php.ini`文件（特定于 CLI 的文件，而不是 Apache 的文件）
*   运行`php -m`以查看在命令行中激活了哪些模块。

# powershell - 获取联系人通讯组

> ID：10717808
> 
> 赞同：2
> 
> 时间：2012-05-23T10:12:19.903
> 
> 标签：powershell, active-directory, exchange-server, contacts

我正在创建一个脚本来管理`Exchange 2010`via上的联系人和用户`Powershell`。特别是我们尝试获取联系人/用户的所有通讯组。

有没有办法获取联系人/用户的通讯组？也许没有在所有分发组中搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:26:57.560

可以通过使用联系人的 guid 使用 Get-ADObject 来完成：

```
$contact = Get-MailContact domainname\contactname
(Get-ADObject -Identity $contact.Guid -Properties 'MemberOf').MemberOf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T21:15:44.340

我按照上面的命令出错了，接下来的一周对我有用。

> (Get-ADObject -Identity $contact.Guid -Properties 'MemberOf' | Select-Object MemberOf).MemberOf

# solr - Solr 最小匹配结果排名

> ID：10717809
> 
> 赞同：0
> 
> 时间：2012-05-23T10:12:25.533
> 
> 标签：solr, sunspot, sunspot-rails

在我的 Rails 应用程序中，我有一个 Question 模型，使用 sunspot solr 设置，带有一个字段“text”，我想在该字段中搜索单词之间的逻辑 OR。我发现将 minimum_match 设置为 1 可以解决我的问题，但是我还想通过提升超过 1 个单词匹配的问题来排序结果。有没有办法用 Solr 做到这一点？该文档对排名函数并没有真正的帮助。

编辑：这是我在控制器中执行的完整查询

```
@questions = Question.solr_search do
  fulltext params[:query], :minimum_match => 1
end.results 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:03:13.453

根据[http://wiki.apache.org/solr/SchemaXml](http://wiki.apache.org/solr/SchemaXml)，

> Solr 的查询解析器 (SolrQueryParser) 使用的默认运算符可以配置为

```
<solrQueryParser defaultOperator="AND|OR"/>. 
```

> 如果未指定，则默认运算符为“OR”。最好不要使用或依赖此设置；相反，请求处理程序或查询 LocalParams 应指定默认运算符。此处的此设置可以省略，并且正在考虑弃用。

您可以在 solr/conf/schema.xml 中更改您的 defaultOperator，或者您可以使用 LocalParams 通过诸如[https://github.com/sunspot/sunspot/wiki/Building-queries-by-hand之类的语法来指定 OR](https://github.com/sunspot/sunspot/wiki/Building-queries-by-hand)

确实，Sunspot 的默认运算符是“AND”，如[https://github.com/sunspot/sunspot/blob/master/sunspot_solr/solr/solr/conf/schema.xml中所引用](https://github.com/sunspot/sunspot/blob/master/sunspot_solr/solr/solr/conf/schema.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:41:51.007

逻辑 OR 是 Sunspot 中使用的 Dismax 请求处理程序的默认行为。

另外，匹配的单词越多，文档的分数就越高（这听起来像你想要的）

```
Question.search do
  fulltext 'best pizza'
end 
```

...应该返回匹配一个或两个单词的结果（返回首先匹配两个单词的结果）：

1.  “Joe's 有纽约市**最好的披萨**”
2.  “很难说哪个**披萨店**最好**吃**”
3.  “**披萨**对你来说不是**最好**的食物”
4.  “我不管**披萨**对你有没有坏处！”
5.  “你认为**最好**的快餐是什么？”

`minimum_match`仅当您想要过滤掉低相关性结果（实际匹配的术语数量或百分比较低）时才有用。这不会影响评分或逻辑 OR/AND 行为。

# .net - 为什么大量 AppSettings 调用不存在的键会导致应用程序崩溃？

> ID：10717814
> 
> 赞同：0
> 
> 时间：2012-05-23T10:12:39.150
> 
> 标签：.net, vb.net, exception, windows-services, crash

我正在处理的 Windows 服务存在一个非常奇怪的问题，我想了解它为什么会发生。

该服务每 5 分钟循环一次，然后在该循​​环内循环遍历包含编号的 Web 服务 URL 的键，例如：

```
<add key="URL.1" value="http://dummy1.com/Service.asmx"/>
<add key="URL.2" value="http://dummy2.com/Service.asmx"/>
<add key="URL.3" value="http://dummy3.com/Service.asmx"/> 
```

执行此检查的代码是：

```
If String.IsNullOrEmpty(AppSettings("OM." & intCount & ".Name").ToString) Then 
```

当它击中一个不存在的键时，将引发异常并且服务停止并等待 5 分钟，直到下一个循环。

这通常效果很好，但每隔一两周，Windows 服务就会在那条线上崩溃，没有任何异常。应用程序日志在该行之前有一行，但之后没有任何内容，没有一个 Try Catches 被命中（主要是捕获基本的“异常”类）。

在 Windows 的事件日志中如下：

```
Faulting application name: MyService.exe, version: 1.1.2.0, time stamp: 0x4fa22a24
Faulting module name: KERNELBASE.dll, version: 6.1.7601.17651, time stamp: 0x4e211319
Exception code: 0xe053534f
Fault offset: 0x0000b9bc
Faulting process id: 0x%9
Faulting application start time: 0x%10
Faulting application path: %11
Faulting module path: %12
Report Id: %13 
```

奇怪的是，这行代码每天至少执行 300 次，持续至少一周，这大约是在导致应用程序完全崩溃之前的 2000 次。

任何想法为什么会发生这种情况？我已将那行代码更改为不依赖异常，并且它已经工作了一周没有崩溃，所以可能与太多异常有关 - 可能导致堆栈溢出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:19:57.240

> 异常代码：0xe053534f

您的程序因该站点的名称而崩溃。异常代码的最后 3 个十六进制对是“SSO”的 ascii 代码。这意味着“软堆栈溢出”。它与硬堆栈溢出异常相同，只是它被提前检测到。在设置调用时，CLR 注意到实际进行调用会导致硬堆栈溢出。

否则，您的程序将像在硬 StackOverflowException 上一样崩溃，它是立即中止，没有 catch 块或 AppDomain.UnhandledException 被执行。

您的程序究竟是如何遭受这种命运的，这个问题无法诊断。否则这是一个典型的编程错误。

# c# - 如何显示选定文件夹中存在的子文件夹？

> ID：10717817
> 
> 赞同：0
> 
> 时间：2012-05-23T10:12:56.313
> 
> 标签：c#, asp.net, winforms

我有一个文本框，它接受所选文件夹的路径。我需要在 TreeView 中显示该文件夹中存在的所有子文件夹。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:15:37.917

```
string Path = @"C:\Temp Folder\";
string[] folders = System.IO.Directory.GetDirectories(Path, "*", System.IO.SearchOption.TopDirectoryOnly); 

       TreeNode treeNode = new TreeNode(Path);          
        TreeNode subNode;
        for (int i = 0; i < folders.Length; i++)
        {
            subNode = new TreeNode(folders[i].ToString());
            treeNode.Nodes.Add(subNode);            
        }
        treeView1.Nodes.Add(treeNode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:12:49.860

以下代码将对您有所帮助。

```
 DirectoryInfo parentInfo = new DirectoryInfo(@"path");
           DirectoryInfo[] childInfo= parentInfo.GetDirectories();
           treeView1.Nodes.Add(parentInfo.Name);
            foreach(DirectoryInfo di in childInfo)
            {
                treeView1.Nodes[0].Nodes.Add(di.Name);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:15:17.903

我过去曾使用 VB.net 完成此操作（我将很快为您转换）您所需要的只是一个递归函数

```
YourTreeViewControl.Nodes.Add("C:\Temp")
Recursive(@"C:\Temp", Tree.Nodes(0))

    void Recursive(string d, TreeNode nodePar)
    {
        DirectoryInfo dir = new DirectoryInfo(d);
        foreach (var item in dir.GetDirectories()) {
            Recursive(item.FullName, nodePar.Nodes.Add(item.Name));
        }
    } 
```

# c# - 适用于多用户应用程序 C# 的窗口注册表位置

> ID：10717820
> 
> 赞同：1
> 
> 时间：2012-05-23T10:12:59.230
> 
> 标签：c#, registry

我正在制作一个适用于多个用户的应用程序，并使用另一个用户编写的注册表中的数据。
目前我正在写信给 HKCU。它不起作用，因为 HKCU 是本地的。失败后我尝试在本地机器上写，但它有一些权限问题。

那么在这种情况下写注册表的合适位置是什么。
我正在使用以下代码来创建密钥。
`RegistryKey regKey = Registry.CurrentUser;`
`RegistryKey subKey = regKey.CreateSubKey(subKeyName);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:45:08.380

我阅读了很多关于窗口注册表的内容，并开始知道这`HKEY_CURRENT_CONFIG`将
适合我的情况，因为它是所有用户的共同位置。

此注册表位置的唯一问题是您需要管理员权限才能修改密钥。

`RegistryKey regKey = Registry.CurrentConfig;`
`RegistryKey subKey = regKey.CreateSubKey(subKeyName);`

# wpf - WPF 中的简单 XAML 查看器

> ID：10717830
> 
> 赞同：1
> 
> 时间：2012-05-23T10:13:24.280
> 
> 标签：wpf, xaml, viewer, xamlwriter

我需要将 WPF 控件的 XAML 写入字符串。我使用了 XamlWriter.Save()。它运作良好。我还需要在 VS Xaml 代码视图等编辑器（只读）中格式化、缩进和显示字符串。我不知道该怎么做。

请分享您的宝贵意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:29:10.293

您可以[保存到 XmlWriter 实例](http://msdn.microsoft.com/en-us/library/ms590446.aspx)、创建 XmlWriter、创建[XmlWriterSettings](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)实例并将`Indent`属性设置为 true 并在您的 XmlWriter 上进行设置。这样你应该有缩进。

现在要让控件显示它，您可以在 wpf 中使用[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)，或者在 Web 上查找自定义控件。

# r - 在每一行中查找最小正值（不包括 0）

> ID：10717831
> 
> 赞同：1
> 
> 时间：2012-05-23T10:13:32.473
> 
> 标签：r, min

我目前正在使用矩阵，我想在每一行中找到最低的正值。

使用 apply(my.matrix,1,min) 将不起作用，因为输出将始终为 0...

有没有办法找到不包括 0 的最小值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T10:42:09.280

您可以使用匿名函数来执行此操作。

```
apply(my.matrix, 1, FUN = function(x) {min(x[x > 0])}) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-02T21:08:27.550

您的方法的这种变化对我有用：

```
apply(my.matrix, 1, FUN=function(x) {min(x>0)}) 
```

# php - 表单未在文本单击时提交

> ID：10717833
> 
> 赞同：0
> 
> 时间：2012-05-23T10:13:41.207
> 
> 标签：php, javascript

这是我通过单击文本提交的表单，但值未在操作页面上传递。

```
 <form action="forget_pass.php" method="post" id="new_user" name="new_user">
  <ul class="inputlist">
    <li><span class="redcolor">*</span>Email Address or Phone No.</li>
    <li>
      <input name="" class="inputbox" type="text" name="EmailAddress" id="txtEmail" />
      &nbsp;&nbsp;

      </li>

     <li class="rightalign">
     <a href="javascript:document.new_user.submit();" onclick="">
      Retrieve Password</a></li>

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:16:55.637

```
<input name="" class="inputbox" type="text" name="EmailAddress" id="txtEmail" /> 
```

应该

```
<input class="inputbox" type="text" name="EmailAddress" id="txtEmail" /> 
```

-

```
<a href="javascript:document.new_user.submit();" onclick=""> 
```

应该更好

```
<a href="#" onclick="document.new_user.submit();return false;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:22:47.380

这是您可以使用的工作代码

```
<form action="forget_pass.php" method="post" id="new_user" name="new_user">
  <ul class="inputlist">
    <li><span class="redcolor">*</span>Email Address or Phone No.</li>
    <li>
      <input class="inputbox" type="text" name="EmailAddress" id="txtEmail" />
      &nbsp;&nbsp;

      </li>

     <li class="rightalign">
     <a href="javascript:document.new_user.submit();">
      Retrieve Password</a></li>

    </form> 
```

您的代码中的问题是

1-您有两个名称属性。一个是空的

2- onclick 没有正确使用...

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:26:23.087

你应该试试这段代码，

```
<form action="forget_pass.php" method="post" id="new_user" name="new_user">
  <ul class="inputlist">
    <li><span class="redcolor">*</span>Email Address or Phone No.</li>
    <li>
      <input class="inputbox" type="text" name="emailAddress" id="txtEmail" >
      &nbsp;&nbsp;
      </li>
     <li class="rightalign">
     <a href="javascript:submitForm();">
      Retrieve Password</a></li>
    </ul>
</form> 
```

而javascript代码是，

```
submitForm = function(){
    alert(document.forms[0].emailAddress.value);
document.forms[0].submit();
} 
```

运行代码是这个[http://jsfiddle.net/4AWW6/](http://jsfiddle.net/4AWW6/)

# jquery - 用于单击链接的 Rails jQuery 自定义函数

> ID：10717836
> 
> 赞同：0
> 
> 时间：2012-05-23T10:13:47.327
> 
> 标签：jquery, ruby-on-rails, function

## 我究竟做错了什么？。

**这是代码。**

```
 $("#online-include-out-of-stock a").live("click", function() {

       $(this).out_of_stock("#include-out-of-stock","#exclude-out-of-stock","#online-grid",$(this).attr("href"));

    });

$.fn.out_of_stock = function (clicked_div_id,div_id_to_show,grid_div_id,href_attr) {

  var product_id = href_attr.match(/product_id=([0-9]+)/)[1];
  var sub_category_id = href_attr.match(/sub_category_id=([0-9]+)/)[1];
  var include = href_attr.match(/include=([0-9]+)/)[1];
  var type = href_attr.match(/type=([a-z]+)/)[1];

  if(product_id == "") product_id="0";
  if(sub_category_id == "") sub_category_id="0";
  if(type == "") type="0";
  if(include == "") include="0";

  $.get('/specific/include_exclude/' + product_id + '/' + sub_category_id + '/' + include + '/' + type, function(data){
        $(grid_div_id).html(data);
        $(clicked_div_id).css('display','none');
        $(div_id_to_show).css('display','inline');
    })
    return false;
} 
```

我在萤火虫中收到以下错误，

```
GET http://127.0.0.1:3000/specific/include_exclude/141/1/1/online   

jquery.js?body=1 (line 8103)
ParamsHeadersPostPutResponseCacheHTML
Response Headersview source
Request Headersview source
Host    127.0.0.1:3000
User-Agent  Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10
Accept  */*
Accept-Language en-us,en;q=0.5
Accept-Encoding gzip,deflate
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive  115
Connection  keep-alive
X-CSRF-Token    epUllDUjvfaFXojTrCZjECBiRmmgYHgTRPDrNETY9GI=
X-Requested-With    XMLHttpRequest
Referer http://127.0.0.1:3000/specific/141/1
Cookie  _session_id=4f7c92f56e66871da77690d5e6747258 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:29:37.300

## 我改成这个并且它起作用了。

```
$("#online-include-out-of-stock a").live("click", function() {

   out_of_stock("#online-include-out-of-stock","#online-exclude-out-of-stock","#online-grid",$(this).attr("href"));
   return false;

});

 function out_of_stock(clicked_div_id,div_id_to_show,grid_div_id,href_attr) {

  var product_id = href_attr.match(/product_id=([0-9]+)/)[1];
  var sub_category_id = href_attr.match(/sub_category_id=([0-9]+)/)[1];
  var include = href_attr.match(/include=([0-9]+)/)[1];
  var type = href_attr.match(/type=([a-z]+)/)[1];

  if(product_id == "") product_id="0";
  if(sub_category_id == "") sub_category_id="0";
  if(type == "") type="0";
  if(include == "") include="0";

  $.get('/specific/include_exclude/' + product_id + '/' + sub_category_id + '/' + include + '/' + type, function(data){
        $(grid_div_id).html(data);
        $(clicked_div_id).css('display','none');
        $(div_id_to_show).css('display','inline');
    })

} 
```

# facebook-graph-api - access_token 过期后重新认证用户

> ID：10717837
> 
> 赞同：0
> 
> 时间：2012-05-23T10:13:48.257
> 
> 标签：facebook-graph-api, facebook-oauth, facebook-access-token

我需要迁移我的 FB 应用程序，使其不再使用该`offline_access`权限。`access_token`据我了解，一旦用户通过身份验证，服务器端 OAuth 应该返回一个 long-lived（60 天） 。

一旦这 60 天结束，我必须申请一个新的令牌。但是，我可以在不需要用户重新访问 Facebook 的情况下透明地执行此操作吗？我了解不会提示用户提供相同的权限，但是：

a)`redirect_uri`参数必须指向我可以处理 OAuth 请求的 URL，这使得透明操作变得困难

b) 我的许多 Graph API 调用都是从访问我的服务器的 AJAX 请求启动的。如果这些因令牌过期而被拒绝，我无法在不中断我的应用程序流程的情况下将用户重定向。

所以我的问题是，这可以以完全透明的方式完成吗？我假设答案是“不”，但每 60 天骚扰用户一次——特别是如果他们已经定期使用该应用程序 59 天——似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:49:37.990

看起来答案确实是“否”……在[场景 3下](https://developers.facebook.com/roadmap/offline-access-removal/)

> 注意：用户必须先访问您的应用程序，然后您才能获得有效的“授权代码”才能再次进行服务器端 OAuth 调用。应用程序将无法设置尝试自动延长过期时间的后台/cron 作业，因为“授权码”是短暂的并且已经过期。

我们面临着同样的问题，看起来我们将被迫每 60 天对用户进行一次 bug。值得庆幸的是，这是我们系统中*相对*较小的一部分，所有 AJAX 调用都是对我们的服务器进行的，这些服务器依次查询 fb - 所以我们在那里有一个抽象层，我们可以在其中交回缓存的数据/控制消息来管理应用程序流这给了我们一些回旋余地，可以优雅地失败，直到我们可以存储待处理的数据并适当地重定向用户。

顺便说一句，值得注意的是，根据[路线图](https://developers.facebook.com/roadmap/) `offline_access`，将于 2012 年 10 月 3 日正式弃用。

# android - 如何在android中创建JSON格式数据？

> ID：10717838
> 
> 赞同：13
> 
> 时间：2012-05-23T10:13:51.020
> 
> 标签：android, json

我需要将一些参数传递给服务器，我需要按以下格式传递

```
{
  "k2": {
    "mk1": "mv1",
    "mk2": [
      "lv1",
      "lv2"
    ]
  }
} 
```

那么如何在android中生成这种格式。

我使用[如示例 5.3 中所示的](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-1_-_Encode_a_JSON_object)方法尝试了此操作，但在`obj.writeJSONString(out);`此行显示错误。任何人都可以帮助解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-23T10:28:55.407

根本不是这样，您想要的输出是 JSONObject 中的 JSONArray 和另一个 JSONObject 中的 JSONObject。因此，您可以单独创建它们，然后可以将它们组合在一起。如下。

```
try {
            JSONObject parent = new JSONObject();
            JSONObject jsonObject = new JSONObject();
            JSONArray jsonArray = new JSONArray();
            jsonArray.put("lv1");
            jsonArray.put("lv2");

            jsonObject.put("mk1", "mv1");
            jsonObject.put("mk2", jsonArray);
            parent.put("k2", jsonObject);
            Log.d("output", parent.toString(2));
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

**输出-**

```
 {
           "k2": {
             "mk1": "mv1",
             "mk2": [
               "lv1",
               "lv2"
             ]
           }
         } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T10:16:28.600

您可以使用`JSONObject`它来使用和构建您的数据。

这是[文档链接](http://developer.android.com/reference/org/json/JSONObject.html)

```
jsonObject.toString() // Produces json formatted object 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T11:59:11.973

您好，首先您必须创建单独的类 HttpUtil.java。请参阅以下代码

```
public class HttpUtil {

// lat=50.2911 lon=8.9842

private final static String TAG = "DealApplication:HttpUtil";

public static String get(String url) throws ClientProtocolException,
        IOException {
    Log.d(TAG, "HTTP POST " + url);
    HttpGet post = new HttpGet(url); 
    HttpResponse response = executeMethod(post);
    return getResponseAsString(response);
}

public static String post(String url, HashMap<String, String> httpParameters)
        throws ClientProtocolException, IOException {
    Log.d(TAG, "HTTP POST " + url);
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
            httpParameters.size());
    Set<String> httpParameterKeys = httpParameters.keySet();
    for (String httpParameterKey : httpParameterKeys) {
        nameValuePairs.add(new BasicNameValuePair(httpParameterKey,
                httpParameters.get(httpParameterKey)));
    }

    HttpPost method = new HttpPost(url);
    UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(nameValuePairs);
    System.out.println("**************Request=>"+urlEncodedFormEntity.toString());
    method.setEntity(urlEncodedFormEntity);
    HttpResponse response = executeMethod(method);

    return getResponseAsString(response);
}

private static HttpResponse executeMethod(HttpRequestBase method)
        throws ClientProtocolException, IOException {
    HttpResponse response = null;
    HttpClient client = new DefaultHttpClient();
    response = client.execute(method);
    Log.d(TAG, "executeMethod=" + response.getStatusLine());
    return response;
}

private static String getResponseAsString(HttpResponse response)
        throws IllegalStateException, IOException {
    String content = null;
    InputStream stream = null;
    try {
        if (response != null) {
            stream = response.getEntity().getContent();
            InputStreamReader reader = new InputStreamReader(stream);
            BufferedReader buffer = new BufferedReader(reader);
            StringBuilder sb = new StringBuilder();
            String cur;
            while ((cur = buffer.readLine()) != null) {
                sb.append(cur + "\n");
            }
            content = sb.toString();
            System.out.println("**************Response =>"+content);
        }
    } finally {
        if (stream != null) {
            stream.close();
        }
    }
    return content;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T13:47:01.293

这个例子是帮助你调用这个函数，它将返回 JSON 作为字符串值。试试看

```
 public String getResult() {
    JSONObject userResults = null;
    try {
        userResults = new JSONObject();
        userResults.put("valueOne",str_one);
        userResults.put("valueTwo", str_two);
        userResults.put("valueThree" ,str_three);
        userResults.put("valueFour", str_four);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return userResults.toString();
} 
```

# java - 线程转储分析（AWT-EventQueue 可运行但条件等待）

> ID：10717842
> 
> 赞同：3
> 
> 时间：2012-05-23T10:13:54.013
> 
> 标签：java, multithreading, concurrency, thread-dump

我有一个 Swing 应用程序在一段时间（随机）后冻结。我在它冻结后每 10 秒拍摄 5 个线程快照，它们都包含这些完全相同的行：

```
"AWT-EventQueue-0" prio=6 tid=0x0000000009949000 nid=0x7bec waiting on condition [0x000000000ebbc000]
  java.lang.Thread.State: RUNNABLE
      at java.math.BigInteger.valueOf(Unknown Source)
      at java.math.BigDecimal.inflate(Unknown Source)
      at java.math.BigDecimal.add(Unknown Source)
      at uk.co.xx.xxx.xxxx.XXX$4.get(XXX.java:171) 
```

请注意，线程转储中没有其他线程在 XXX.java 中。相应的代码行 (XXX.java:171) 看起来有些无害：

```
a = a.add(b.multiply(c, MATH_CONTEXT), MATH_CONTEXT); 
```

在哪里：

*   `a`,`b`和`c`是局部`BigDecimal`变量。
*   `MATH_CONTEXT`是一个`public final static`变量，只能在 XXX.java 中访问

**我的问题**（回答其中任何一个都会有很大帮助）

*   这是死锁或活跃度问题的证据（线程似乎没有取得进展，但它处于`RUNNABLE`状态）？
*   这是冻结的可能原因还是我应该看看其他地方？
*   解决问题的下一步是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:23:13.340

> 这是死锁或活跃度问题的证据（线程似乎没有取得进展，但它处于`RUNNABLE`状态）？

我对此表示怀疑。由于程序冻结，显然存在问题。但是，我怀疑您显示的代码存在死锁。

> 这是冻结的可能原因还是我应该看看其他地方？

我认为这很可能是一个红鲱鱼，问题出在其他地方。

> 解决问题的下一步是什么？

我个人会研究潜在的内存分配和垃圾收集问题。特别是，我会确保该程序不会将所有时间都花在收集垃圾上，因此无法取得进展。

为此，我会使用内存分析器。

在此期间，我还将监视进程的整体 CPU 和内存使用情况，以及页面错误统计信息（以查看是否存在过度交换）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:23:19.300

我没有看到解决方案，但我可以描述我要开始的步骤。

我会尝试附加一个 Profiler 并检查内存是否在增长，因为系统可以交换内存以及它似乎挂起的原因，但我没有。

分析器还会告诉您，线程是否真的挂起，如果是，它似乎挂在哪里。

对于分析，我使用 VisualVM。

# nhibernate - FluentNHibernate：LazyLoad 和 Fetch

> ID：10717845
> 
> 赞同：1
> 
> 时间：2012-05-23T10:14:00.290
> 
> 标签：nhibernate, fluent-nhibernate

在流利的 nhibernate 中，我可以将 Fetch.Something 和 Not.LazyLoad 设置为 Reference 或 HasMany。如果我同时使用会发生什么？

这两者对这三种方式查询数据有何体现？

```
class UserMap
{
   HasMany(x=>x.Contacts). (Fetch or Not.LazyLoad)
   References(x=>x.Supervisor). (Fetch or Not.LazyLoad)
}

session.Query<User>();
session.Query<User>().FetchMany(x=>x.Contacts);
session.Get<User>(ID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:49:28.730

问题是`Fetch`Query/HQL 没有考虑到这一点。因此，在运行查询后，它会立即尝试**一一**`Not.LazyLoad`获取您的属性。

 **一般来说，在 99% 的情况下禁用延迟加载是个坏主意。推荐阅读：[NHibernate 是懒惰的，只是忍受它](http://ayende.com/blog/4573/nhibernate-is-lazy-just-live-with-it)**

# c# - 如何避免这里的代码重复？

> ID：10717849
> 
> 赞同：0
> 
> 时间：2012-05-23T10:14:19.697
> 
> 标签：c#, oop, code-duplication, overloading, duplication

我在一个类中有两种方法，一种带有额外参数

第一：

```
public override void CalcV(IV iv)
{
     initializations
     otherOperations

     for (int i=0; i < NUM; ++i)
     {
         SomeOtherOperations
         double v = GetV(a,b,c);
         SomeOtherOperationsUsing_v
     }

     restOfOperations
} 
```

第二个：

```
public override void CalcV(IV iv, int index)
{
     initializations
     otherOperations

     for (int i=0; i < NUM; ++i)
     {
         SomeOtherOperations
         double v = GetV(a,b,c, index);
         SomeOtherOperationsUsing_v
     }

     restOfOperations
} 
```

如您所见，唯一的区别是第一个调用带有 3 个参数的 GetV()，第二个调用带有 4 个参数的 GetV() 重载。

我怎样才能最好地避免代码重复？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:18:52.177

假设您不知道合理的默认值，一个非常简单的方法是：

```
public override void CalcV(IV iv)
{
    CalcV(iv, null);
}

public override void CalcV(IV iv, int? index)
{
     ...
     double v = index.HasValue ? GetV(a,b,c,index.Value) : GetV(a,b,c);
     ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:16:49.753

猜测 GetV 做了什么（你需要改变它以适应：

```
public override void CalcV(IV iv)
{
     CalcV(iv, 0);
}

public override void CalcV(IV iv, int index)
{
     initializations
     otherOperations

     for (int i=0; i < NUM; ++i)
     {
         SomeOtherOperations
         double v = GetV(a,b,c, index);
         SomeOtherOperationsUsing_v
     }

     restOfOperations
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:18:38.123

如果您使用的是 .Net 4.0，则可以将其设为可选参数：

```
public override void CalcV(IV iv, int index = -1)
{
    ....
    double v = index > -1 ? GetV(a,b,c, index) : GetV(a,b,c);

    ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T10:18:50.197

```
public override void CalcV(IV iv, int? index = null)
{
     initializations
     otherOperations

     for (int i=0; i < NUM; ++i)
     {
         SomeOtherOperations
         double v = index != null ? GetV(a,b,c, index) : GetV(a,b,c);
         SomeOtherOperationsUsing_v
     }

     restOfOperations
} 
```

然后您可以删除第一个覆盖，这将处理这两种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T10:18:30.953

我假设`index`是基于 0 的正数：

```
public override void CalcV(IV iv, int index)
{
  initializations
  otherOperations

  for (int i=0; i < NUM; ++i)
  {
    SomeOtherOperations
    double v = index == -1 ? GetV(a, b, c) : GetV(a,b,c, index);
    SomeOtherOperationsUsing_v
  }

  restOfOperations
} 
```

然后，如果要使用四个参数调用，则使用索引为 -1 的函数调用要使用`GetV`三个参数或“正确”索引`GetV`的函数。

```
public override void CalcV(IV iv)
{
  return CalcV(iv, -1);
} 
```

# symfony - 如何从 Twig 中的多维数组中获取值？

> ID：10717852
> 
> 赞同：10
> 
> 时间：2012-05-23T10:14:32.863
> 
> 标签：symfony, twig

我的数组 $strs[$key][$id] 的 var_dump 给出以下结果：

```
array(2) {
    [0]=> array(4) {
        [8259]=> string(8260) "ouvrir 1"
        [8260]=> string(8261) "fichier 2"
        [8261]=> string(8262) "quitter 1"
        [8262]=> string(8263) "lire 2"
    }
    [1]=> array(4) {
        [8259]=> string(8260) "lancer 2"
        [8260]=> string(8261) "dossier 1"
        [8261]=> string(8262) "exit 1"
        [8262]=> string(8263) "lire 2"
    }
} 
```

在我看来，我想从所有 $key 中获取具有相同 $id 的所有字符串。像这样的东西：
1-
ouvrir 1
lancer 2
2-
fichier 2
lancer 2

ETC

我在我的树枝视图中试过这个：

```
{% for key,val in strs['key']['id']  %}
    {% if strs['key']['id'] is defined %}
     {{ key }} - <br/>      
     {{ val }}       
    {% endif %}   
{% endfor %} 
```

我收到此错误：
带有键“0、1”的数组的键“键”不存在...
我在这里做错了什么？我怎样才能得到我正在寻找的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T10:47:31.767

不要把这个逻辑放在你的观点中。*仅*使用您的视图来显示内容。
而是在您的控制器中执行此操作并将结果传递给您的视图：

```
$result = array();
foreach ($arrays as $array) {
  foreach ($array as $key => $value) {
    $result[$key][] = $value;
  }
} 
```

结果将是一个数组，其键是 ID，值是属于同一 ID 的字符串数组。

要显示它：

```
{% for id, stringsById in results %}
  {{ id }}- <br />
  {% for string in stringsById %}
    {{ string }} <br />
  {% endfor %}
{% endfor %} 
```

# plone - 行为是否可以为其添加的字段指定自定义子表单

> ID：10717857
> 
> 赞同：2
> 
> 时间：2012-05-23T10:15:03.193
> 
> 标签：plone, dexterity

我正在尝试创建一种行为，该行为将 2 个新字段添加到应用它的内容类型，但我希望这些字段在添加/编辑表单上具有自定义子表单，用于添加到它的内容类型。作为行为的一部分，是否有任何直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:01:47.973

您可以在架构中使用字段集

```
from plone.directives import form
....
class IMyBehaviorSchema(form.Schema):

    form.fieldset('myfieldset', label=u"My Behavior fieldset",
                  fields=['firstfieldname', 'secondfieldname']) 
```

在启用 Plone 表单选项卡的情况下显示您的附加字段。有关详细信息，请参阅[敏捷手册](http://plone.org/products/dexterity/documentation/manual/behaviors/schema-only-behaviors)

# python - 使用 python 通过 LAN 从多个源复制文件的一部分

> ID：10717858
> 
> 赞同：0
> 
> 时间：2012-05-23T10:15:03.893
> 
> 标签：python, copy

Python似乎有复制文件的功能（例如shutil.copy）和复制目录的功能。这也适用于网络路径。

有没有办法只从多个来源复制文件的一部分并在之后合并它们

就像下载管理器从多个来源下载单个文件的一部分一样，提高了整体下载速度。

我想通过局域网实现同样的目标。

我在网络上的两台以上机器上有一个文件。

我如何将部分文件从多个来源复制到单个目的地？

可以用标准的shutil库来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:22:23.230

*   统计文件以查找大小
*   划分每个读者将处理的起点：终点
*   以二进制模式打开您的写入文件
*   以二进制模式打开您的阅读器
*   在写出数据时处理数据的合并/整理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:00:19.447

我建议您使用免费的开源对等库。

对等文件传输对您描述的问题有效：*将一些大文件 ~1gb 从网络上的一台机器复制到 40 -50 台机器*

例如[http://code.google.com/p/python-libtorrent/](http://code.google.com/p/python-libtorrent/)

或者使用客户端实现。

# sql - 如何将此 SQL 翻译成更具可读性？

> ID：10717864
> 
> 赞同：0
> 
> 时间：2012-05-23T10:15:24.800
> 
> 标签：sql, sql-server

您如何将其重写为“更简单”的 SQL：

```
SELECT tab1.ScenarioID, 
       tab1.TradeID, 
       tab1.Value AS Val1, 
       tab2.Value, 
       AS         Val2, 
       tab2.Value - tab1.Value 
FROM   (SELECT ScenarioID, 
               TradeID, 
               FileName, 
               Value, 
               Change 
        FROM   CalypsoResults 
        WHERE  FileName = 'x' 
               AND Date = '2012-05-17') tab1 
       LEFT JOIN (SELECT ScenarioID, 
                         TradeID, 
                         FileName, 
                         Value, 
                         Change 
                  FROM   CalypsoResults 
                  WHERE  FileName = 'x' 
                         AND Date = '2012-05-18') tab2 
         ON tab1.ScenarioID = tab2.ScenarioID 
            AND tab1.ID = tab2.ID 
```

我试过这个，但我没有得到相同的结果：

```
SELECT a.ScenarioID, 
       a.ID, 
       a.Date, 
       a.Value           AS Val1, 
       b.Value           AS Val2, 
       b.Value - a.Value AS Change 
FROM   CalypsoResults a 
       LEFT JOIN CalypsoResults b 
         ON a.ScenarioID = b.ScenarioID 
            AND a.ID = b.ID 
            AND a.FileName = B.FileName 
WHERE  a.Date = '2012-05-17' 
       AND ( b.Date = '2012-05-18' 
              OR b.Date IS NULL ) 
       AND a.FileName = 'x' 
```

第二个是错过了在a中有一行但在b中没有的实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:23:00.967

将表的第二个实例的*所有*`JOIN`谓词放入，而不是`WHERE`.

```
SELECT
    tab1.ScenarioID,
    tab1.TradeID,
    tab1.Value AS Val1,
    tab2.Value AS Val2,
    tab2.Value - tab1.Value
FROM CalypsoResults AS tab1
    LEFT JOIN CalypsoResults AS tab2 ON tab1.ScenarioID = tab2.ScenarioID
        AND tab2.FileName = 'x'
        AND tab2.Date = '2012-05-18'
        AND tab1.ID = tab2.ID
WHERE tab1.FileName = 'x'
    AND tab1.Date = '2012-05-17' 
```

此外，您将加入`FileName`您的第二个版本，但不是第一个版本。

# tomcat - Tomcat 7.0.27 更新后启动错误

> ID：10717867
> 
> 赞同：2
> 
> 时间：2012-05-23T10:15:43.333
> 
> 标签：tomcat, out-of-memory

我今天更新了我的 Tomcat 服务器，但在启动时出现了这个错误

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at java.io.DataInputStream.readUTF(Unknown Source)
    at java.io.DataInputStream.readUTF(Unknown Source)
    at org.apache.tomcat.util.bcel.classfile.ConstantUtf8.<init>(ConstantUtf8.java:48)
    at org.apache.tomcat.util.bcel.classfile.Constant.readConstant(Constant.java:129)
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.<init>(ConstantPool.java:60)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readConstantPool(ClassParser.java:209)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:119)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2032)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1923)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1891)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1877)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1270)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    ... 8 more
23/Mai/2012 10:20:25 org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) Caused by:
org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
23/Mai/2012 10:20:25 org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start:
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
23/Mai/2012 10:20:25 org.apache.catalina.startup.Catalina 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:21:15.827

您只需通过为 -Xmx VM 参数指定更高的值来扩展堆大小。

# xml - XPath 1.0 检查计数

> ID：10717871
> 
> 赞同：4
> 
> 时间：2012-05-23T10:15:59.840
> 
> 标签：xml, xpath, count, nodes

我有以下 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE inventory SYSTEM "books.dtd">
<inventory>
    <book num="b1">
        <title>Snow Crash</title>
        <author>Neal Stephenson</author>
        <publisher>Spectra</publisher>
        <price>14.95</price>
        <chapter>
            <title>Snow Crash - Chapter A</title>
            <paragraph>
                This is the <emph>first</emph> paragraph.
                <image file="firstParagraphImage.gif"/>
                afetr image...
            </paragraph>
            <paragraph>
                This is the <emph>second</emph> paragraph.
                <image file="secondParagraphImage.gif"/>
                afetr image...
            </paragraph>
        </chapter>
        <chapter>
            <title>Snow Crash - Chapter B</title>
            <section>
                <title>Chapter B - section 1</title>
                <paragraph>
                    This is the <emph>first</emph> paragraph of section 1 in chapter B.
                    <image file="Chapter_B_firstParagraphImage.gif"/>
                    afetr image...
                </paragraph>
                <paragraph>
                    This is the <emph>second</emph> paragraph of section 1 in chapter B.
                    <image file="Chapter_B_secondParagraphImage.gif"/>
                    afetr image...
                </paragraph>
            </section>
        </chapter>
        <chapter>
            <title>Chapter C</title>
            <paragraph>
                This chapter has no images and only one paragraph
            </paragraph>
        </chapter>
    </book>
    <book num="b2">
        <title>Burning Tower</title>
        <author>Larry Niven</author>
        <author>Jerry Pournelle</author>
        <publisher>Pocket</publisher>
        <price>5.99</price>
        <chapter>
            <title>Burning Tower - Chapter A</title>
        </chapter>
        <chapter>
            <title>Burning Tower - Chapter B</title>
            <paragraph>
                This is the <emph>second</emph> paragraph of chapter B in the 2nd book.
                <image file="Burning_Tower_Chapter_B_secondParagraphImage.gif"/>
                afetr image...
            </paragraph>
        </chapter>
    </book>
    <book num="b3">
        <title>Zodiac</title>
        <author>Neal Stephenson</author>
        <publisher>Spectra</publisher>
        <price>7.50</price>
        <chapter>
            <title>Zodiac - Chapter A</title>
        </chapter>
    </book>
    <!-- more books... -->
</inventory> 
```

如何编写 XPath 1.0 表达式来选择所有包含超过 1 个图像的书籍？

我试过`inventory/book//image[2]/ancestor::book`但它给出了错误的结果......

是`inventory/book//image[2]`给每本书中的所有第二张图片吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:00:09.973

**使用**：

```
/*/book[(.//image)[2]] 
```

**这将选择`book`作为 XML 文档顶部元素的子元素并且具有第二个`image`后代**的所有元素。

**这个表达式的计算速度可能**比任何以 开头的表达式都要快`//`，因为以 开头的表达式`//`通常会导致整个文档被遍历。

**它也比**：

```
//book[count(.//image)>1] 
```

即使这个表达式被重写为不以 . 开头`//`。

之所以如此，是因为在上面的表达式中`count(.//image)`会计算所有`image`后代，而在我们的解决方案中：

```
(.//image)[2] 
```

仅验证是否`image`存在第二个后代。

**最后，这是一个基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy-of select="/*/book[(.//image)[2]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<inventory>
        <book num="b1">
            <title>Snow Crash</title>
            <author>Neal Stephenson</author>
            <publisher>Spectra</publisher>
            <price>14.95</price>
            <chapter>
                <title>Snow Crash - Chapter A</title>
                <paragraph>
                    This is the <emph>first</emph> paragraph.
                    <image file="firstParagraphImage.gif"/>
                    afetr image...
                </paragraph>
                <paragraph>
                    This is the <emph>second</emph> paragraph.
                    <image file="secondParagraphImage.gif"/>
                    afetr image...
                </paragraph>
            </chapter>
            <chapter>
                <title>Snow Crash - Chapter B</title>
                <section>
                    <title>Chapter B - section 1</title>
                    <paragraph>
                        This is the <emph>first</emph> paragraph of section 1 in chapter B.
                        <image file="Chapter_B_firstParagraphImage.gif"/>
                        afetr image...
                    </paragraph>
                    <paragraph>
                        This is the <emph>second</emph> paragraph of section 1 in chapter B.
                        <image file="Chapter_B_secondParagraphImage.gif"/>
                        afetr image...
                    </paragraph>
                </section>
            </chapter>
            <chapter>
                <title>Chapter C</title>
                <paragraph>
                    This chapter has no images and only one paragraph
                </paragraph>
            </chapter>
        </book>
        <book num="b2">
            <title>Burning Tower</title>
            <author>Larry Niven</author>
            <author>Jerry Pournelle</author>
            <publisher>Pocket</publisher>
            <price>5.99</price>
            <chapter>
                <title>Burning Tower - Chapter A</title>
            </chapter>
            <chapter>
                <title>Burning Tower - Chapter B</title>
                <paragraph>
                    This is the <emph>second</emph> paragraph of chapter B in the 2nd book.
                    <image file="Burning_Tower_Chapter_B_secondParagraphImage.gif"/>
                    afetr image...
                </paragraph>
            </chapter>
        </book>
        <book num="b3">
            <title>Zodiac</title>
            <author>Neal Stephenson</author>
            <publisher>Spectra</publisher>
            <price>7.50</price>
            <chapter>
                <title>Zodiac - Chapter A</title>
            </chapter>
        </book>
        <!-- more books... -->
</inventory> 
```

**计算 XPath 表达式并将选定的节点（在本例中只有一个）复制到输出**：

```
<book num="b1">
   <title>Snow Crash</title>
   <author>Neal Stephenson</author>
   <publisher>Spectra</publisher>
   <price>14.95</price>
   <chapter>
      <title>Snow Crash - Chapter A</title>
      <paragraph>
                    This is the <emph>first</emph> paragraph.
                    <image file="firstParagraphImage.gif"/>
                    afetr image...
                </paragraph>
      <paragraph>
                    This is the <emph>second</emph> paragraph.
                    <image file="secondParagraphImage.gif"/>
                    afetr image...
                </paragraph>
   </chapter>
   <chapter>
      <title>Snow Crash - Chapter B</title>
      <section>
         <title>Chapter B - section 1</title>
         <paragraph>
                        This is the <emph>first</emph> paragraph of section 1 in chapter B.
                        <image file="Chapter_B_firstParagraphImage.gif"/>
                        afetr image...
                    </paragraph>
         <paragraph>
                        This is the <emph>second</emph> paragraph of section 1 in chapter B.
                        <image file="Chapter_B_secondParagraphImage.gif"/>
                        afetr image...
                    </paragraph>
      </section>
   </chapter>
   <chapter>
      <title>Chapter C</title>
      <paragraph>
                    This chapter has no images and only one paragraph
                </paragraph>
   </chapter>
</book> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T10:31:59.683

试试这个

```
//book[count(.//image)>1] 
```

所有在某处具有多个图像标签的书籍

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T10:37:04.180

`inventory/book//image[2]/`如果您的元素中有 2 个或更多`image`子节点，则会为您获取第二张图像。`book`尝试：

```
 //inventory/book[count(descendant::image) > 1] 
```

您需要将层次结构向下移动到一个`book`元素，然后从那里开始查询。谓词（或外行术语的查询）是`image`从那里查找所有元素——这正是`descendant`轴的作用。您追加`::`并`nodename`选择一个特定的后代，就像我们`descendant::image`查找所有`image`s 一样。最终测试是否确定`count`（如函数名称所示）是否大于 1。

# iphone - 如果从 iPhone 主屏幕上的链接打开，网站将失去身份验证

> ID：10717873
> 
> 赞同：1
> 
> 时间：2012-05-23T10:16:03.053
> 
> 标签：iphone, asp.net-mvc, homescreen

我有 asp.net mvc 站点。用户需要登录才能访问。然后我发现当用户在 iPhone 的主屏幕上添加指向网站的链接时，并且在该用户通过此链接之后。该网站是在一些有限的沙盒（不是 Safari）中打开的——你可以[在那里检查](https://stackoverflow.com/a/5579845/182344)不同的地方。这不是问题。用户登录并重定向到主页。但是当用户点击主页上的任何链接时，他会被重定向到 Safari。在这种情况下，肯定用户会丢失身份验证。怎么可能解决这个问题？

我看到两种方式：

1.  打开网站后立即将用户重定向到 Safari 并在那里进行身份验证。
2.  继续在这个沙箱中工作。

我更喜欢第一种方式，但很乐意接受任何建议。

我发现了同样的问题，但坦率地说我没有得到[解决方案](https://stackoverflow.com/a/2635836/182344)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:55:01.433

添加

```
<meta name="apple-mobile-web-app-capable" content="no" /> 
```

到您的 HTML 头部部分。这将使它从主屏幕在 Safari 中打开。

# php - php 获取第一个唯一的子字符串

> ID：10717878
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:11.563
> 
> 标签：php, string, substring, unique

如何获得给定字符串中的第一个唯一子字符串。

例如，我想找到被问到的唯一字符串“ **tr6hrvjh** ”

> $string = "htr6hrvjhtr6hrvjhtr6hrvjhtr6hrvjh";

我尝试**了 substr_count**并使用**for()**，还尝试了嵌套循环。仍然无法让它工作你有什么方法可以检索唯一的字符串吗？还是可以使用正则表达式？我目前正在使用 php。如果你可以用其他编程语言做到这一点，请这样做。

- 编辑 -

好的。正是**niftydude**所说的唯一字符串 im 指的是重复。对于那个很抱歉。让我改述一下这个问题

$string (h) 中的第一个字符用作正在搜索的唯一字符串的“限制器”。它表示正在搜索的唯一字符串的结尾。

第二个字符 (t) 是唯一字符串的开始。这就是为什么我说“tr6hrvjh”

我所做的是我从第一个偏移量 [1] 即 (t) 开始循环 $string 中的每个字符。循环只会结束，如果

*   您找到了“限制器”字符，即“h”
*   例如，当您遍历已经拥有“tr6hrvjh”的 $string 时，该字符串已经重复了。在又几个循环之后，您再次检测到“tr6hrvjhtr6”。你的循环必须结束。

'unique' 字符串的条件是：

*   只能是字母数字
*   必须 >= 5
*   $string 中的所有字符都必须在那个“唯一”字符串中。例如，如果 $string 是**htr6ahrvjhtr6ahrvjhtr6ahrvjh**，则唯一字符串必须是**tr6ahrvjh**而不是**tr6ah**，这**会将 rvjh 留**在 $string

请注意， $string 总是这样。第一个和第二个字符始终分别作为“唯一”字符串的最后一个和第一个字符。并且唯一的字符串总是在 $string 中重复，重复之间没有其他字符。

另一个问题是正在搜索的字符串中有两个 h。好吧，我希望你能理解。随意评论：D

- 编辑 -

到目前为止我遇到的测试字符串就像我给你的那些

> htr6hrvjhtr6hrvjhÔi§¯ŸÍ©¥g§¬Ð™×ªhÖØ¡~¦ÓkÕ¬šÕª—©«</p>
> 
> htr6hrvjhtr6Ôi§¯ŸÍ©¥g§¬Ð™×ªhÖØ¡~¦ÓkÕ¬šÕª—©«</p>
> 
> 512354651235465Ôi§¯ŸÍ©¥g§¬Ð™×ªhÖØ¡~¦ÓkÕ¬šÕª—©«</p>
> 
> 5123546512354651235Ôi§¯ŸÍ©¥g§¬Ð™×ªhÖØ¡~¦ÓkÕ¬šÕª—©«</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:55:11.220

可能是我仍然没有正确理解您的问题，但试试这个：

```
function getUniqueString($string) {
  $delimiter = $string[0];
  $chunks = array_filter(explode($delimiter, $string), function ($chunk) {
    return preg_match('/^[0-9a-zA-Z]+$/', $chunk);
  });

  return implode(array_unique($chunks)) . $delimiter;
} 
```

演示：[http ://codepad.viper-7.com/oYoD40](http://codepad.viper-7.com/oYoD40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:19:27.750

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

使用`strpos()`. 给你的字符串和'needle'，它将返回索引中你的needle在字符串中的第一个实例。如果没有找到，它将返回`FALSE`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:19:47.763

大海捞针示例：

```
 $pos = strpos($haystack,$needle);

    if($pos === false) {
     // string needle NOT found in haystack
    }
    else {
     // string needle found in haystack
    } 
```

[http://www.maxi-pedia.com/string+contains+substring+PHP](http://www.maxi-pedia.com/string+contains+substring+PHP)

此外，关于它的 php.net 手册：http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# asp.net - 如何解决 ASP.NET 下拉历史导航问题

> ID：10717879
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:13.190
> 
> 标签：asp.net, navigation, history

我有以下网络应用程序： - 一个下拉菜单来更改星期几 - 一个根据上述选择更新其内部文本的跨度 - 下拉菜单设置为自动回发

我的问题是，从浏览器按钮向后和向前导航时，页面不一致。例如：在其初始状态下，星期几在下拉菜单和跨度中都是“星期一”。如果我更改为“星期二”，一切都会很好地更新，但如果我现在点击“后退”按钮，则跨度会更改回“星期一”，但下拉菜单不会。

![在此处输入图像描述](../Images/d9f1375ed1cd9a091244ba7479107b3e.png)

有没有办法解决这个缓存问题？

这是一个简单的网络应用程序：

```
<form id="form1" runat="server">
<div>   

<asp:DropDownList ID="DaysCombo" runat="server"
        AutoPostBack = "true" 
        onselectedindexchanged="DaysCombo_SelectedIndexChanged"            
        />    

<div runat="server">
    <span id="ContentSpan" runat="server"></span>
</div>

</div>
</form> 
```

和代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            string[] days = new string[] { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" };
            this.DaysCombo.DataSource = days;
            Page.DataBind();
            this.ContentSpan.InnerText = days[0];
        }          

    }

    protected void DaysCombo_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.ContentSpan.InnerText = this.DaysCombo.SelectedValue;            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:12:41.527

您最好在客户端上使用 javascript，因为它避免了回发到服务器。您可以添加 javascript 加载和更改侦听器以确保跨度文本和下拉列表同步

# gwt - GWT 代码服务器参数

> ID：10717880
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:13.343
> 
> 标签：gwt

我在`GWT codeserver parameter`下面的一个简单场景中遇到了一个问题，

项目结构

```
myapp
+src
++mypkg
---MainWindow.gwt.xml
---NextWindow.gwt.xml
+++client
----MainWindow.java
----NextWindow.java
+war
--MainWindow.html
--NextWindow.html 
```

主窗口.gwt.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='mainwindow'>
  <inherits name='com.google.gwt.user.User'/>
  <entry-point class='mypkg.client.Mainwindow'/>
  <source path='client'/>
</module> 
```

主窗口.java

```
package mypkg.client;

import com.google.gwt.core.client.*;
import com.google.gwt.event.dom.client.*;
import com.google.gwt.user.client.ui.*;

public class MainWindow implements EntryPoint {
    @Override
    public void onModuleLoad() {
        Button button = new Button("NextWindow!");
        button.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                Window.open("/NextWindow.html", null, null);
            }
        });
        RootPanel.get().add(button);
    }
} 
```

主窗口.html

```
<!doctype html>      
<html>
<head>
<title>MainWindow</title>  
<script type="text/javascript" language="javascript"
    src="mainwindow/mainwindow.nocache.js"></script>
</head>  
<body>
    <h1>Hi, MainWindow!</h1>   
</body>
</html> 
```

NextWindow.gwt.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='nextwindow'>
  <inherits name='com.google.gwt.user.User'/>
  <entry-point class='mypkg.client.NextWindow'/>
  <source path='client'/>
</module> 
```

NextWindow.java

```
package mypkg.client;

import com.google.gwt.core.client.*;
import com.google.gwt.user.client.ui.*;

public class NextWindow implements EntryPoint {    
    @Override
    public void onModuleLoad() {
        RootPanel.get().add(new Label("Hi, NewLabel!"));
    }
} 
```

NextWindow.html

```
<!doctype html>      
<html>
<head>
<title>NextWindow</title>  
<script type="text/javascript" language="javascript"
    src="nextwindow/nextwindow.nocache.js"></script>
</head>  
<body>
    <h1>Hi, NextWindow!</h1>   
</body>
</html> 
```

从`Devmode`链接启动编译的 myapp 时，

```
http://127.0.0.1:8888/MainWindow.html?gwt.codesvr=127.0.0.1:9997 
```

点击按钮“NextWindow”然后`GWT browser plugin`弹出投诉窗口，

```
Module NextWindow need be (re)compiled! 
```

确认它，然后从链接打开一个新的浏览器窗口`Prodmode`，

```
http://127.0.0.1:8888/NextWindow.html 
```

而不是所需的链接`Devmode`，

```
http://127.0.0.1:8888/NextWindow.html?gwt.codesvr=127.0.0.1:9997 
```

因此它只显示，

```
Hi, NextWindow! 
```

但是下面非常期待的内容并没有出现，

```
Hi, NewLabel! 
```

如果我们追踪`GWT codeserver parameter` `?gwt.codesvr=127.0.0.1:9997`源代码，可以通过牺牲 和 之间的一致性来解决`source level`问题。`Devmode``Prodmode`

确实有哪些更可取的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:31:25.160

您可以使用`if(GWT.isProdMode())`检查 Prodmode 和 Devmode，如果它是 devmode，则跟踪参数。

这不会影响生产模式——gwt 编译器足够聪明，可以忽略 devmode-code，因此 devmode-block 永远不会进入编译后的 javascript。

# c# - NetworkChange.NetworkAddressChanged 事件不会触发

> ID：10717883
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:30.213
> 
> 标签：c#, .net, windows-phone-7, sockets

我正在开发一个需要使用网络的 windows phone 7 应用程序。

我希望我的应用程序在 NetworkAddress 更改为可用时连接。所以我使用了 NetworkChange.Networkaddresschanged。我正在模拟器上测试我的应用程序。它第一次启动，但由于没有网络，我什么也不做。当网络可用时，此 NetworkAddresschanged 不会第二次启动。

我的代码是

```
 public void OnNetworkDownEvent()
    {
        lock (_networkChange)
        {
            var handler =_OnNetworkDown;
            if (handler != null)
            {
                _OnNetworkDown();
            }
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                NetworkChange.NetworkAddressChanged -= OnNetworkChange;
                NetworkChange.NetworkAddressChanged += OnNetworkChange;
            });

            _connectionDown = true;

            Monitor.Wait(_networkChange);
            OnNetworkUpEvent();
        }
    }

    public void OnNetworkUpEvent()
    {
        var handler = _OnNetworkUp;
        if (handler != null)
        {
            _OnNetworkUp();

        }
    }

    private void OnNetworkChange(object sender, EventArgs e)
    {
        lock(_networkChange)
        {
            if(NetworkInterface.GetIsNetworkAvailable())
            {

                if (_connectionDown)
                {
                    _connectionDown = false;
                    Monitor.Pulse(_networkChange);
                    //OnNetworkUpEvent();
                }
            }
        }
    } 
```

我`Networkdownevent()`在网络关闭时打电话。那时我将一个代表附加到 NetworkAddressChange。

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:49:39.997

手机会将与主机 PC 的 USB 连接视为主要连接，因此连接 PC 的网络连接的更改不会对手机产生影响。

这是您无法使用附加的调试器进行测试的一种情况。您必须在未连接的设备上存储/显示调试输出。
对于测试，我建议让手机仅连接到 WiFi，然后通过打开或关闭接入点来控制连接状态。（对于这种情况，这是我所知道的最简单的技术。）

# html - 如何使用包含隐藏表单字段的 curl 发送 POST 表单？

> ID：10717890
> 
> 赞同：2
> 
> 时间：2012-05-23T10:16:44.567
> 
> 标签：html, post, curl, forms

我想在这个网站上提交一个带有 curl 的 html 表单。 [http://pickupline.be/bekijk](http://pickupline.be/bekijk)

当您点击“Stem”时，它会向[http://pickupline.be/submitVote](http://pickupline.be/submitVote)发送一个帖子表单。

该表单需要以下字段：

```
<input type="text" id="num" name="num" class="required center_text">
<input type="text" id="firstname" name="fname" class="fname required" >
<input type="text" id="lastname" name="lname" class="lname required" >
<input type="text" id="mail" name="email" class="required email" >
<select name="birthday_day" class="required birthday_day">
<option selected value="">DD</option>
<option value="1">1</option>
<select name="birthday_month" class="required birthday_month">
<option selected value="">MM</option>
<option value="1">1</option>
<select name="birthday_year" class="required birthday_year">
<option selected value="">JJ</option>
<option value="2000">2000</option>
<input type="checkbox" id="chkOpdehoogte" name="newsletter"><label   for="chkOpdehoogte">Ik wil op de hoogte blijven van nieuwe inzendingen</label>
<input type="checkbox" id="chkAgreeConditions" name="agree" class="required"><label for="chkAgreeConditions">Ik ga akkoord met het <a href="http://pickupline.be/reglement" target="_blank">reglement</a></label>
<input type="hidden" id="pickupline_id" name="id">
<input type="submit" value="STEM"> 
```

请注意，id 是隐藏的。这是我迄今为止尝试过的：

```
curl -v --data 'num=${nummer}&fname=${voornaam}&lname=${achternaam}&email=${mail}&birthday_day=${dag}&birthday_month=${maand}&birthday_year=${jaar}&agree="yes"&id=100' http://pickupline.be/submitVote --referer http://pickupline.be/bekijk 
```

但是我没有得到服务器的响应。我也尝试保存 cookie 并将它们与 curl 一起使用，没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:08:58.440

隐藏只是浏览器不向用户显示该字段的属性。它仍然以与实际 HTTP POST 请求中的任何其他表单字段相同的方式发送。

# c# - 实验室网站的自定义异常处理和使用

> ID：10717891
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:44.373
> 
> 标签：c#, custom-exceptions

我知道以前有人问过类似的问题，但这并不能消除我对此事的怀疑。

在我的所有页面 Page_Load 方法和调用连接到数据库的方法的所有其他方法周围，我将代码放在 try catch 语句中：

```
try {
    //Some code

}
//When something goes wrong, catch the exception and translate it into understandable language for the end user.
catch (LaboratoryException ex) {
    switch (ex.Code) {
        case LaboratoryExceptionCode.GROUP_NOTFOUND: ErrorMessage.Text += "<p class='error'>You didn't enter the correct parameters."; break;
        default: ErrorMessage.Text += "<p class='error'>An unknown error occurred"; break;
    }
    switch (ex.Fault) {
        case LaboratoryExceptionFault.FAULT_CONSUMER: ErrorMessage.Text += " - We think you should check your entered parameters.</p>"; break;
        case LaboratoryExceptionFault.FAULT_SERVER: ErrorMessage.Text += " - Oops, our bad.</p>"; break;
        default: break;
    }
} 
```

为每种类型的错误使用自定义异常是否明智？

*   如果在我的数据库中没有找到一个组（如上面的代码）；
*   如果存在一个组；
*   无法更新群组时；
*   当一个组达到最大成员数 (5) 时；
*   ETC。;

还是最好限制这种错误处理方式？我知道为什么以及何时，但我不知道什么时候太多，或者你必须在哪里划清界限。

一个后续问题，我对一个组中的人数有限制，这个限制，我什么时候在我的代码中强制执行这个？在页面的类后面的代码中？或者当我连接到数据库时？或两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:51:52.207

几个月后我变得更聪明了，在再次查看这个主题后，我推断出以下答案是我同意的答案：

[https://stackoverflow.com/a/3443605/1055690](https://stackoverflow.com/a/3443605/1055690)

# jquery - jQuery 延迟和队列并不总是在 window.onhashchange 之后运行

> ID：10717892
> 
> 赞同：1
> 
> 时间：2012-05-23T10:16:44.980
> 
> 标签：jquery

这段代码似乎完美地工作：

```
window.onhashchange = function(){
    if (!window.location.href.match('#pop')) {
        //alert('go back last');
        $('#main').removeClass('hidden');
        $('.pop').removeClass('pop-ready');
        $('.pop').addClass('pop-hidden');
    }

    /* navigate back after back button */
    if (!window.location.href.match('#secondpage')) {
        $('#pageCont').removeClass('posTwo');
        $('#pageOne').removeClass('hidden');
        $('#pageTwoInner').addClass('hidden'); 

    }
    if (window.location.href.match('#secondpage')) {
        $('#pageCont').addClass('posTwo');

        $('#pageTwoInner').removeClass('hidden'); 
    }
}; 
```

但是，当我向一个函数添加延迟和队列时，代码变得喜怒无常，有时没有添加该类：

```
window.onhashchange = function(){
    if (!window.location.href.match('#pop')) {
        //alert('go back last');
        $('#main').removeClass('hidden');
        $('.pop').removeClass('pop-ready');
        $('.pop').addClass('pop-hidden');
    }

    /* navigate back after back button */
    if (!window.location.href.match('#secondpage')) {
        $('#pageCont').removeClass('posTwo');
        $('#pageOne').removeClass('hidden');
                    /* CHANGE HERE */
        $('#pageTwoInner').delay(200).queue(function(){
            $(this).addClass('hidden'); 
        });
    }
    if (window.location.href.match('#secondpage')) {
        $('#pageCont').addClass('posTwo');

        $('#pageTwoInner').removeClass('hidden'); 
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:19:46.850

使用[queue()](http://api.jquery.com/queue/)时，您必须将下一个项目出列，否则回调链将被破坏。

有两种方法可以实现这一点。从您的回调中调用[dequeue() ：](http://api.jquery.com/dequeue/)

```
$("#pageTwoInner").delay(200).queue(function() {
    $(this).addClass("hidden").dequeue(); 
}); 
```

或者调用`next`传递给回调的参数：

```
$("#pageTwoInner").delay(200).queue(function(next) {
    $(this).addClass("hidden"); 
    next();
}); 
```

# java - SDCard 的安全性

> ID：10717893
> 
> 赞同：0
> 
> 时间：2012-05-23T10:16:46.140
> 
> 标签：java, android, android-sdcard

如何在 android sd 卡文件中提供安全性。我正在为电子书阅读创建一个应用程序，用户可以使用该应用程序下载它，并且可以阅读用户可以下载它`web-service`并在下载后将其存储在 SDCcard 中`.epub file`

但我想提供安全性，如果一个用户下载任何书籍，那么其他用户无法从 SDCard 复制或他们无法共享文件。

请给我发一个关于这个逻辑的帖子，或者如果你有一些相关的例子，请发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:06:52.690

您可以使用您可以检查的一些信息作为密钥，使用您的程序加密您的 epub 文件。当然，您的应用程序可以反转，但这将保护您的文件免受普通用户的侵害。

# string - Groovy 中使用“body”的高效字符串替换策略

> ID：10717898
> 
> 赞同：2
> 
> 时间：2012-05-23T10:17:00.567
> 
> 标签：string, performance, groovy, replace

简单的问题：

这是执行替代的最有效方法，例如：

```
"Some tekst with a link like this <ref>linktekst</ref>" 
```

至

```
"Some tekst with a link like this <a href="linktekst">linktekst</a>" 
```

在时髦？

文本中很容易有多个标签，应该被替换，而*链接*文本当然是`<ref>`标签的主体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:21:05.037

您可以使用`String.replaceAll`：

```
def s = "Some tekst with a link like this <ref>linktekst</ref> and <ref>link2</ref>"
s = s.replaceAll "<ref>(.+?)</ref>", '<a href="$1">$1</a>' 
```

# javascript - 正则表达式：无值匹配

> ID：10717904
> 
> 赞同：1
> 
> 时间：2012-05-23T10:17:54.667
> 
> 标签：javascript, regex

我创建了以下正则表达式，它匹配 9 个连续数字或 14 个连续数字。

```
^[0-9]{14}$|^[0-9]{9}$ 
```

如何使此正则表达式匹配 9 个连续数字或 14 个连续数字或空值？

基本上我想修改正则表达式，以便用户不需要为此字段输入值。或者换句话说，使该字段的验证成为可选的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:20:43.900

怎么样：

```
if (value.length && !value.match(/^(?:[0-9]{14}|[0-9]{9})$/) {
    alert('invalid value');
} 
```

如果字符串为空，则通过；如果非空，它必须匹配正则表达式。

仅正则表达式解决方案：

```
if (!value.match(/^(?:[0-9]{14}|[0-9]{9})?$/) {
    alert('invalid value');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:45:06.107

只需添加另一种选择。

```
^[0-9]{14}$|^[0-9]{9}$|^$ 
```

您也可以将其重构为可选的 9，后跟另一个可选的 5 位数字。

```
^([0-9]{9}([0-9]{5})?)?$ 
```

如果您不需要捕获组，非捕获组`(?:...)`会稍微快一些，但在这种情况下，差异可以忽略不计。

# php - PHP 字符串连接

> ID：10717907
> 
> 赞同：-1
> 
> 时间：2012-05-23T10:18:02.757
> 
> 标签：php

下面的代码没有为我连接字符串，怎么会？

```
$test = $this->address . $this->url;

echo $test; // prints the content of $this->address only 
```

但是这段代码有效：

```
$begin = $this->address;
$end = $this->url;
$test = $begin.$end;

echo $test; // prints the concatenation 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:20:21.997

这是完全有效的代码。

做一个

```
echo 'value of url: '.$this->url; 
```

当你尝试连接两个字符串之前的一行。它必须绝对是空的。如果它不为空，请尝试这样的连接：

```
$test = '' . $this->address . $this->url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:25:53.280

检查`echo $this->url`
变量是否为空的情况

# javascript - 每个图像映射的 onclick 显示单个 div

> ID：10717912
> 
> 赞同：0
> 
> 时间：2012-05-23T10:18:22.903
> 
> 标签：javascript, jquery, onclick, imagemap

我有这样的代码：

```
<html>
<head>
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.maphilight.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('img[usemap]').maphilight();

        $('area').on('click', function(e){
            $a = $(this);
            e.preventDefault();
            $('area').each(function(){
                var d = $(this).data('maphilight') || {};
                if(d.alwaysOn == true){
                    d.alwaysOn = false;  
                }
            });
            var data = $a.mouseout().data('maphilight') || {};
            data.alwaysOn = !data.alwaysOn;
            console.log(data);
            $a.data('maphilight', data).trigger('alwaysOn.maphilight');
        });

    });
</script>
</head>
<body>

<img src="karte.gif" width="464" height="320" border="0" usemap="#karte">

<map name="karte">
    <area shape="poly" coords="141,73,140,25,156,24,161,17,165,13,171,12,173,20,170,42,205,63,201,75,193,85,184,90,168,82,157,76" href=""  rel="area1 - jajaja!">
    <area shape="poly" coords="207,65,202,78,192,90,195,94,202,95,208,97,208,105,210,112,212,118,219,123,224,124,228,128,249,131,255,132,257,138,268,136,274,133,282,133,287,132,297,127,298,113,298,104,309,94,309,83,303,74,296,67,280,65,276,76,269,60,247,58,231,64,220,68,216,70" href="" rel="area2 - jajaja!">
    <area shape="poly" coords="139,76,150,77,161,80,170,85,178,89,184,93,191,91,194,96,205,97,207,103,208,114,211,122,219,124,225,127,224,134,219,132,213,132,206,132,199,135,194,142,159,140,137,131,126,115,121,96,129,82" href="" rel="area3 - jajaja!">
    <area shape="poly" coords="197,141,207,135,214,134,221,136,227,133,228,129,233,132,244,132,251,134,253,138,258,140,265,140,270,138,277,135,283,135,279,141,279,155,282,170,285,177,257,179,252,188,244,193,241,190,231,193,229,190,227,195,220,199,214,207,211,208,198,199,193,184,196,162,202,153" href="" rel="area4 - jajaja!">
    <area shape="poly" coords="207,209,208,222,213,233,219,242,226,244,230,252,236,260,244,261,242,268,223,263,180,304,158,298,139,289,129,281,134,274,115,248,117,239,141,230,159,216,169,204,193,202" href="" rel="area5 - jajaja!">
    <area shape="poly" coords="245,267,247,260,236,257,231,248,227,241,218,236,212,225,210,216,211,210,218,205,222,200,227,197,232,195,238,194,244,195,250,192,255,188,258,181,270,181,285,179,293,194,288,219,294,231,293,236,294,239,292,245,295,251,291,257,291,264,271,276" href=""  rel="area6 - jajaja!">
    <area shape="poly" coords="293,261,297,252,294,244,296,237,297,228,290,219,295,197,314,194,339,214,335,231,338,244,327,255,313,251" href=""  rel="area6 - jajaja!">
</map>

</body>
</html> 
```

它工作正常。当我悬停图像地图时，该区域会突出显示，当我单击图像地图时，突出显示效果会切换。现在我正在寻找一种解决方案，通过单击图像地图来显示（个人）div。例如，我单击第一个图像映射，然后出现一个 div 容器，其中包含有关第一个图像映射的文本。然后我单击第三个图像映射，一个 div 容器出现，其中包含关于第三个图像映射的文本，第一个 div 容器消失。

很像这里： http: [//ncmarinescience.com/](http://ncmarinescience.com/) => 点击一个彩色点让我们出现一个 div 包含有关该点的一些信息。

感谢您的帮助和来自波兰的问候！

# actionscript-3 - 如何将 google+ 集成到 flex 移动应用程序中

> ID：10717919
> 
> 赞同：2
> 
> 时间：2012-05-23T10:18:47.397
> 
> 标签：actionscript-3, apache-flex, google-plus, flexbuilder, flex4.6

任何人都知道如何将 google+ 集成到 flex 移动应用程序中。当我尝试使用 google+ 进行身份验证时，收到类似 text="Error #2032: Stream Error. URL: [https://accounts.google.com/o/oauth2/auth?response%5Ftype=code&redirect%5Furi=urn%3Aietf之类的错误%3Awg%3Aoauth%3A2%2E0%3Aoob&client%5Fid](https://accounts.google.com/o/oauth2/auth?response%5Ftype=code&redirect%5Furi=urn%3Aietf%3Awg%3Aoauth%3A2%2E0%3Aoob&client%5Fid) ..." errorID=2032]。网址：[https](https://accounts.google.com/o/oauth2/auth) ://accounts.google.com/o/oauth2/auth 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:27:44.983

这是你的幸运日，因为我知道该怎么做 :-)

该文档是[Using OAuth 2.0 for Installed Applications](https://developers.google.com/accounts/docs/OAuth2InstalledApp)并且您从网页标题中获取访问令牌。

下面是我的视图和我的应用程序和 Google+ API 控制台的屏幕截图：

![在此处输入图像描述](../Images/234e46bbb830051a7b0d5e2664669feb.png)

![在此处输入图像描述](../Images/f4e60599c726466c6f9ff9197b3e846d.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        viewActivate="openSWV(event)"
        viewDeactivate="closeSWV(event)"
        title="Getting data...">

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <fx:Script>
        <![CDATA[
            import flash.media.StageWebView;

            private static const APP_ID:String     = 'XXXXXXXXX.apps.googleusercontent.com';
            private static const APP_SECRET:String = 'XXXXXXXXXXXXXXXXXXX';
            private static const APP_URL:String    = 'urn:ietf:wg:oauth:2.0:oob';
            private static const AUTH_URL:String   = 'https://accounts.google.com/o/oauth2/auth?';

            private var _swv:StageWebView = new StageWebView();

            private function openSWV(event:ViewNavigatorEvent):void {
                _swv.addEventListener(Event.COMPLETE, extractAccessToken);
                _swv.addEventListener(LocationChangeEvent.LOCATION_CHANGE, extractAccessToken);
                _swv.addEventListener(IOErrorEvent.IO_ERROR, closeSWV);
                _swv.addEventListener(ErrorEvent.ERROR, closeSWV);
                stage.addEventListener(Event.RESIZE, resizeSWV);

                _swv.stage = stage;
                resizeSWV();

                var reqVars:URLVariables = new URLVariables();
                reqVars.client_id     = APP_ID;
                reqVars.response_type = 'code';
                reqVars.redirect_uri  = APP_URL;
                reqVars.state         = getTimer();
                reqVars.scope         = 'https://www.googleapis.com/auth/userinfo.profile';
                _swv.loadURL(AUTH_URL + reqVars);
            }

            private function closeSWV(event:Event=null):void {
                stage.removeEventListener(Event.RESIZE, resizeSWV);
                if (! _swv)
                    return;
                _swv.removeEventListener(Event.COMPLETE, extractAccessToken);
                _swv.removeEventListener(LocationChangeEvent.LOCATION_CHANGE, extractAccessToken);
                _swv.removeEventListener(IOErrorEvent.IO_ERROR, closeSWV);
                _swv.removeEventListener(ErrorEvent.ERROR, closeSWV);
                _swv.dispose();
                _swv = null;
            }           

            private function resizeSWV(event:Event=null):void {
                if (! _swv)
                    return;
                // align to the right-bottom corner
                _swv.viewPort = new Rectangle(stage.stageWidth - width, stage.stageHeight - height, width, height);
            }

            private function extractAccessToken(event:Event):void {
                trace('title: ' + _swv.title);
                trace('location: ' + _swv.location);

                var code:String = getValue('code=', _swv.title);
                if (code) {
                    trace('code=' + code);

                    closeSWV();

                    var reqVars:URLVariables = new URLVariables();
                    reqVars.code          = code;
                    reqVars.grant_type    = 'authorization_code';
                    reqVars.client_id     = APP_ID;
                    reqVars.client_secret = APP_SECRET;
                    reqVars.redirect_uri  = APP_URL;

                    var req:URLRequest = new URLRequest('https://accounts.google.com/o/oauth2/token');
                    req.method = URLRequestMethod.POST;
                    req.data = reqVars;

                    var loader:URLLoader = new URLLoader();
                    loader.addEventListener(Event.COMPLETE, handleComplete); 
                    loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, handleError);
                    loader.addEventListener(IOErrorEvent.IO_ERROR, handleError);
                    loader.load(req);
                }
            }

            private function handleError(event:ErrorEvent):void {
                var loader:URLLoader = URLLoader(event.target); 
                trace(event.text);
                trace(loader.data);
            }

            private function handleComplete(event:Event):void {
                var obj:Object;
                var loader:URLLoader = URLLoader(event.target); 
                trace(loader.data);
                try {
                    obj = JSON.decode(loader.data);
                } catch(e:Error) {
                    trace('Invalid JSON: ' + loader.data);
                    return;
                }

                trace('access_token=' + obj.access_token);

                var req:URLRequest = new URLRequest('https://www.googleapis.com/oauth2/v1/userinfo?access_token=' + obj.access_token);
                var loader2:URLLoader = new URLLoader();
                loader2.addEventListener(Event.COMPLETE, handleComplete2); 
                loader2.addEventListener(SecurityErrorEvent.SECURITY_ERROR, handleError);
                loader2.addEventListener(IOErrorEvent.IO_ERROR, handleError);
                loader2.load(req);
            }

            private function handleComplete2(event:Event):void {
                var obj:Object;
                var loader:URLLoader = URLLoader(event.target); 
                trace(loader.data);
                try {
                    obj = JSON.decode(loader.data);
                } catch(e:Error) {
                    trace('Invalid JSON: ' + loader.data);
                    return;
                }
                var info:Object =  { 
                    ID:      obj.id,
                    FIRST:   obj.given_name,
                    LAST:    obj.family_name,
                    FEMALE:  (obj.gender != 'male'),
                    AVATAR:  obj.picture
                };

                _userid.text = 'id: '     + info['ID'];
                _first.text  = 'first: '  + info['FIRST'];
                _last.text   = 'last: '   + info['LAST'];
                _female.text = 'female: ' + info['FEMALE'];
                _avatar.text = 'avatar: ' + info['AVATAR'];
                _img.source  = info['AVATAR'];

                title = 'Your data';
                _busy.visible = false;
                _busy.includeInLayout = false;
                _group.visible = true;
            }

            private function getValue(key:String, str:String):String {
                const pattern:RegExp = /[-_a-zA-Z0-9\/.]+/;
                var index:int = str.indexOf(key);
                if (index > -1) {
                    var matches:Array = str.substring(index + key.length).match(pattern);
                    if (matches.length > 0)
                        return matches[0];
                }
                return null;
            }
        ]]>
    </fx:Script>

    <s:BusyIndicator id="_busy"/>
    <s:VGroup id="_group" visible="false">
    <s:Button id="_play" label="Start game"/>
        <s:Label id="_token"/>
        <s:Label id="_userid"/>
        <s:Label id="_first"/>
        <s:Label id="_last"/>
        <s:Label id="_female"/>
        <s:Label id="_avatar"/>
        <s:Image id="_img"/>
    </s:VGroup>
</s:View> 
```

# iphone - 在 Objective c 中实现键值编码

> ID：10717927
> 
> 赞同：0
> 
> 时间：2012-05-23T10:19:11.943
> 
> 标签：iphone, objective-c, ipad

我是时候在我的程序中实现键值编码了，所以我对它不太满意。我有控制器类，其中解析方法在开始文档中实现，我已经初始化了对象和键。Universal 类的所有数据成员都是类型 id。

```
 univ=[[Universal alloc] init];
            [univ setValue:univ.datamember1 forKey:@"1"];
            [univ setValue:univ.datamember2 forKey:@"2"];
            [univ setValue:univ.datamember3 forKey:@"3"];
            [univ setValue:univ.datamember4 forKey:@"4"];
            [univ setValue:univ.datamember5 forKey:@"5"]; 
```

我在结束元素方法中设置数据成员的值：

```
 id temp1=[univ valueForKey:@"1"];
        temp1=strVal;
        [resultArray addObject:univ]; 
```

我收到此代码的以下异常：

```
'NSUnknownKeyException', reason: '[<Universal 0x6e994d0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key 1 
```

这是什么原因。是否缺少某些东西或一切都出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:45:40.893

在大多数情况下，您不必实现键值编码。相反，您创建类以符合各种约定，然后键值编码会自动为它工作。

这些约定是关于如何命名方法以使属性可以通过 KVC 访问。

你的代码：

```
 univ=[[Universal alloc] init];
        [univ setValue:univ.datamember1 forKey:@"1"];
        [univ setValue:univ.datamember2 forKey:@"2"];
        [univ setValue:univ.datamember3 forKey:@"3"];
        [univ setValue:univ.datamember4 forKey:@"4"];
        [univ setValue:univ.datamember5 forKey:@"5"]; 
```

很奇怪。你想在这里做什么？这段代码*看起来*像是试图`univ`从对象的其他属性中设置`univ`对象的属性。那将是多余的。

我怀疑你认为你在这里建立了同义词或别名——你正在将键“1”映射到 property `datamember1`。这是不正确的。该`-setValue:forKey:`方法用于实际设置属性的值。这很像调用 setter 方法；事实上，它通常会导致调用 setter 方法。

所以，你写的很像下面这样：

```
 univ=[[Universal alloc] init];
        [univ set1:univ.datamember1];
        [univ set2:univ.datamember2];
        [univ set3:univ.datamember3];
        [univ set4:univ.datamember4];
        [univ set5:univ.datamember5]; 
```

我怀疑这是你打算做的任何事情。它可能会帮助您用非 KVC 术语解释您正在尝试做什么。您尝试更改哪些属性（如果是）？你想赋予他们什么价值？您将如何仅使用普通的 setter 和 getter 来做到这一点？

后来，您发布了以下代码：

```
 id temp1=[univ valueForKey:@"1"];
    temp1=strVal;
    [resultArray addObject:univ]; 
```

同样，这很奇怪且令人困惑。我怀疑您正在尝试更改 上的属性值`univ`，但这不是该代码完成的任务，即使它可以工作。第一行尝试获取`univ`对象的属性值，其中属性的名称为“1”。这不是属性的有效名称。无论如何，它将检索到的值存储到局部变量`temp1`中。第二行简单地丢弃第一行的结果并将不同的值存储到局部`temp1`变量中。该`temp1`变量独立于`univ`对象，即使之前它正在存储从`univ`对象检索到的结果。改变`temp1`不能改变`univ`（尽管传递指向的对象`temp1`可以更改该对象，并且它也可能由 ) 指向`univ`。

在我看来，您还没有准备好使用键值编码。您需要更好地了解基础知识。此外，几乎不需要将键值编码与静态的、编译时已知的键一起使用。当您在编译时不知道该属性的名称但您将在运行时将名称*作为数据*时，键值编码用于动态访问对象的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:28:42.903

请阅读 Apple 文档中有关[确保 KVC 合规性](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Compliant.html)的部分。

它是这样说的：

> 对于属性或一对一关系的属性，这要求您的类：
> 
> *   实现一个名为 -<key>、-is<Key> 的方法，或者有一个实例变量 <key> 或 _<key>。
> *   如果属性是可变的，那么它也应该实现 -set<Key>:。

合成一个属性也有资格实现一个方法，所以你的`Universal`类需要一个名为`1`（`2`等）的方法和另一个被调用的方法`set1:`，它当然没有，因为方法名称以数字开头是非法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:30:47.553

您还没有为要访问的键实现 setter 和 getter，也没有实现`-setValue:forUndefinedKey:`.

在运行时，NSObject 的实现`-setValue:forKey:`查找名为“set1:”的方法，如果找不到，它会查找名为“1”的 ivar（这不是 ivar 的合法名称，但仍然如此），如果失败，它会尝试发送`-setValue:forUndefinedKey:`您尚未实现的。

阅读有关键值编码的文档，并了解如何使您的类符合 KVC。

# javascript - HTML5 更改图像的 RGB 值

> ID：10717935
> 
> 赞同：0
> 
> 时间：2012-05-23T10:19:38.513
> 
> 标签：javascript, image, html, canvas

我是使用 HTML5 进行图像处理的新手。我需要一些帮助来更改图像的 RGB 值以创建不同的效果。在网上我没有找到任何关于它的直接教程。我已经整理了一些代码，开始在网络上到处走走：

```
 window.onload = function(){
     var imageObj = new Image();
     imageObj.onload = function(){
         drawImage(this);
     };
     imageObj.src = "images/test.jpg";
 };

 function drawImage(imageObj){
      var canvas = document.getElementById("mau");
      var context = canvas.getContext("2d");

      var destX = 1;
      var destY = 1;

      context.drawImage(imageObj, destX, destY);

      var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
      var data = imageData.data;

      for (var i = 0; i < data.length; i += 4) {
          var red = data[i]; // red
          var green = data[i + 1]; // green
          var blue = data[i + 2]; // blue
          // i+3 is alpha (the fourth element)
      }

      // overwrite original image
      context.putImageData(imageData, 0, 0);
 } 
```

在这个阶段，图像显示没有变化。例如，如何更改 3 个变量 R、G、B 以增强蓝色通道？有人可以通过代码让我更好地理解它吗？

提前感谢毛罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:47:56.230

[这是一个简单的例子](http://jsfiddle.net/robertc/XbGf6/)。它交换周围的红色、绿色和蓝色分量：

```
 for (var i = 0; i < data.length; i += 4) {
      var red = data[i]; // red
      var green = data[i + 1]; // green
      var blue = data[i + 2]; // blue
      // i+3 is alpha (the fourth element)
      data[i] = green;
      data[i + 1] = blue;
      data[i + 2] = red;
  } 
```

原图来自维基百科：

![测试图像原件](../Images/53c42480215356a6e088a8a73f7676e5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:24:51.800

我会尝试[EaselJS](http://www.createjs.com/#!/EaselJS)库。

您可以使用`ColorFilter`,`ColorMatrix`和`ColorMatrixFilter`来操作图像。更改值很容易，您也可以轻松地为它们设置动画（过渡）。

# php - PHP / CakePHP 会话超时未按预期工作

> ID：10717937
> 
> 赞同：1
> 
> 时间：2012-05-23T10:19:40.633
> 
> 标签：php, session, cakephp

这是一个 PHP/CakePHP 问题，因为我认为它们涉及同一件事！

所以在我的应用程序中，我将会话超时设置得非常低。20 分钟。这是为了确保用户不会长时间不活动而保持登录状态的安全措施，但是我注意到这并不是正在发生的事情。

我期望发生的 = 会话持续 20 分钟不活动。

实际发生的情况 = 无论他们是否正在使用该应用程序，会话都会在 20 分钟后到期，所以基本上如果他们在这里、那里和任何地方进行回发，他们仍然会在 20 分钟后注销。

这是正常行为吗？如果是这样，如果用户仍在使用该应用程序，我怎样才能使会话不会过期？

# c# - EF CF 中的主详细信息查询和通用存储库模式

> ID：10717940
> 
> 赞同：0
> 
> 时间：2012-05-23T10:19:43.130
> 
> 标签：c#, .net, entity-framework-4, ef-code-first, repository-pattern

我正在使用通用存储库模式，如[本文所示](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。

这些是我的 POCO 课程：

```
public class Order
{
    public int ID { get; set; }
    public int CustomerID {get; set;}

    [InverseProperty("Order")]
    public virtual List<OrderDetail> OrderDetail {get; set;}

    public static Expression<Func<Order, bool>> OrdersFromCustomer(decimal customerId)
    {
        return f => f.CustomerID == customerId;
    }
}

public class OrderDetail
{
    public int OrderID { get; set;}
    public int ID { get; set;}
    public int ItemID { get; set;}
    public int Amount { get; set;}

    [ForeignKey("OrderID")]
    public virtual Order { get; set;}
} 
```

因此，当在我的程序中我想获得客户的所有订单时，我可以这样做：

```
using (MyDbContext context = new MyDbContext())
{
    MyRepository repository = new MyRepository(context);
    var orders = repository.Get(Order.OrdersFromCustomer(25));
} 
```

它很好用，但我有一个问题：如果我想要所有金额大于 100 的订单？作为 OrderFromCustomer 函数，我如何构建一个表达式来过滤详细信息？
我也尝试过使用 LinqKit，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:54:56.023

您可以将 Where 过滤器子句链接在一起，例如，这样做如下所示：

```
 orders = repository.Get(filter: q => q.Where(f => f.CustomerID == customerId).Where( n => n.Amount > 100); 
```

# java - Java 工作组和 AD 安全性

> ID：10717946
> 
> 赞同：1
> 
> 时间：2012-05-23T10:20:05.363
> 
> 标签：java, security, active-directory, dns, certificate

我正在构建一个与 CMS 平台交互的应用程序。反过来，该平台可能与 AD 服务器或 Windows 域（例如工作组）集成。

在我的代码中，我需要的是保护对平台 api 的访问。我将解释我的逻辑：

1.  应用程序与 Web 服务交互。
2.  Web 服务验证用户的身份。（我不想向用户询问它的用户/密码组合）
3.  Web 服务使用平台的 API 执行各种任务。

那么，在第 2 步中，我应该使用什么？证书不是一种选择。如果我在一个有数千个用户的 Intranet 中，则必须创建数千个证书。有没有其他选择？

# c# - C# - 未完成时显示加载？

> ID：10717952
> 
> 赞同：3
> 
> 时间：2012-05-23T10:20:25.470
> 
> 标签：c#, .net, loading

在我的 C# 应用程序中，我通过读取 HTML 页面并解析其中的一些链接并将它们放入richTextBox（现在）来启动程序。但问题是，因为它必须读取链接需要一些时间，所以当我启动程序时，大约需要 5 秒才能显示表单。我想做的是立即显示表单，并显示加载光标或禁用的richTextBox。我该怎么做呢？这是发生的情况的示例：

```
public Intro()
        {
            InitializeComponent();
            WebClient wc = new WebClient();
            string source = wc.DownloadString("http://example.com");

            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(source);
            var nodes = doc.DocumentNode.SelectNodes("//a[starts-with(@class, 'url')]");
            foreach (HtmlNode node in nodes)
            {
                HtmlAttribute att = node.Attributes["href"];
                richTextBox1.Text = richTextBox1.Text + att.Value + "\n";

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:26:06.487

我建议使用Backgroundworker。（有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)）。进行异步操作的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:35:44.293

好的，一点点（我希望它是正确的）示例如何使用任务并行库来完成它（什么？我喜欢它......）

```
public Intro()
{
    InitializeComponent();

    richTextBox1.IsEnabled = false;
    Task.Factory.StartNew( () =>
    {
       WebClient wc = new WebClient();
       string source = wc.DownloadString("http://example.com");

       HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
       doc.LoadHtml(source);
       var nodes = doc.DocumentNode.SelectNodes("//a[starts-with(@class, 'url')]");
       return nodes;
    }).ContinueWith( result =>
    {
      richTextBox1.IsEnabled = true;

      if (result.Exception != null) throw result.Exception;

      foreach (var node in result.Result)
      {
           HtmlAttribute att = node.Attributes["href"];
           richTextBox1.Text = richTextBox1.Text + att.Value + "\n";
      }

    }, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

# php - 使用路由从 url 中删除提交

> ID：10717955
> 
> 赞同：0
> 
> 时间：2012-05-23T10:20:28.087
> 
> 标签：php, codeigniter

我试图弄清楚如何设置我的路由，以便如果我的任何控制器具有提交功能，那么它不会在 url 中显示它。

例子。

siteurl.com/cms/register/submit 在表单提交后变成 siteurl.com/cms/register 那样它不会在 url 中显示提交功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:25:59.283

您可以在路由文件中使用它：

```
$route['register/(:num)'] = 'register/submit/$1'; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:25:44.617

```
$route['/submit'] = 'controller/submit'; 
```

没测试过，试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:26:02.463

覆盖 routes.php 配置文件中的默认路由：

```
$route['cms/register'] = '/cms/register/submit'; 
```

在您的表单中使用 /cms/register。这样，无论何时你去 /cms/register CI 都知道它必须调用 /cms/register/submit 控制器方法。

欲了解更多信息，请[点击此处](http://codeigniter.com/user_guide/general/routing.html)

# javascript - JSTestDriver 覆盖 eclipse 插件

> ID：10717957
> 
> 赞同：4
> 
> 时间：2012-05-23T10:20:40.737
> 
> 标签：javascript, eclipse, unit-testing, code-coverage, js-test-driver

我正在使用 JSTestDriver Eclipse 插件，我想安装覆盖插件：有人知道如何让它在 Eclipse 中工作吗？

提前致谢

其他需要注意的事项：我在 Win XP 64 位，Eclipse 版本：面向 Web 开发人员的 Eclipse Java EE IDE。版本：Helios Service Release 2 Build id：20110218-0911

.conf 文件中的插件部分是：

```
plugin:
  - name: "coverage"
    jar: "F:/eclipse/plugins/coverage-1.3.4.b.jar"
    module: "com.google.jstestdriver.coverage.CoverageModule" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:09:21.570

coverage.jar 不是一个 Eclipse 插件，它是一个 JsTestDriver 插件。JsTestDriver ecplise 插件不支持测试覆盖。您的测试失败，因为您的覆盖插件必须位于与您的配置文件相同的文件夹或子文件夹中。

例如

```
plugin:
- name: "coverage"
  jar: "plugins/coverage-1.3.4.b.jar"
  module: "com.google.jstestdriver.coverage.CoverageModule" 
```

[如果您想知道项目的测试覆盖率，您应该从http://code.google.com/p/js-test-driver/downloads/list](http://code.google.com/p/js-test-driver/downloads/list)下载 JsTestDriver-1.3.4.b.jar 。

然后运行类似的命令

```
java -jar JsTestDriver-1.3.4.b.jar --browser <browserpath> --port 4224 --tests all 
```

在您的控制台中。

为此，您的配置文件和 JsTestDriver.jar 应该在同一个文件夹中。

# jquery - jQuery ajaxTransport 返回错误时忽略数据

> ID：10717966
> 
> 赞同：3
> 
> 时间：2012-05-23T10:21:25.203
> 
> 标签：jquery

我创建了一个 jQuery ajaxTransport 处理程序（对于我拥有的一些测试用例），它应该模拟服务器上的 403 验证错误。

问题是，当我这样做并返回 403 错误时，数据没有返回，不是 json 也不是 responseText。

这是我的代码（简化）：（也在 jsfiddle [http://jsfiddle.net/znTCL/1/](http://jsfiddle.net/znTCL/1/)上）

```
$.ajaxTransport('json',function( options, originalOptions, jqXHR ) {
    return {
      send: function( headers, completeCallback ) {
        completeCallback(403, 'Forbidden', {json : {'Title': 'Title is required.'}});
      }
    };
});

$(function() {

    $.ajax({
        url :document.location,
        type : 'POST',
        data : {Title:''},
        dataType : 'json'                   
    }).fail(function(){ 
        console.log(arguments);
    });
}); 
```

如果我在服务器上返回 403 并且不使用 ajaxtransports，那么一切都按预期工作，失败回调具有 jqXHR 对象，该对象还包含我可以解析为 JSON 的 responseText，然后显示基于该的验证错误. 对于 ajaxtransports，jqXHR 对象没有 reponseText 属性。

如果我在传输中返回 200，则数据按应有的方式出现，并且 responseText 应按应有的方式出现。

**我做错了什么还是这是 jQuery ajaxTransports 的限制？** ​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:14:47.363

返回错误时，您似乎无法将 json 返回到 completeCallback。即使您的请求是 json 请求。

返回文本作品：

```
completeCallback(403, 'Forbidden', {text : 'Title is required.'}); 
```

或者

```
completeCallback(403, 'Forbidden', {text : JSON.stringify({'Title': 'Title is required.'})}); 
```

现在失败回调中 jqXHR 对象的 responseText 不是未定义的，它包含我提供的文本，我现在可以解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:27:25.897

尝试使用 `statusCode:`

```
$.ajax({
  statusCode: {
    404: function() {
      alert("page not found");
    }
  }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - .db 文件未在 SQLite 中创建

> ID：10717967
> 
> 赞同：0
> 
> 时间：2012-05-23T10:21:31.467
> 
> 标签：android, database, sqlite

我是 SQLite 新手，运行应用程序时没有 .db 文件

> 数据/数据/your.application.package/databases/

```
package com.navigationsystem;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.hardware.SensorManager;

public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME="navigationsystem.db";
    public static final String NODE_ID="nodeID";

    public static final String CHILD_ID="childID";
    public static final String PARENT_ID="parentID";

    private SQLiteDatabase db;  

    public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, 1);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    db.execSQL("CREATE TABLE nodes( nodeID CHAR(1) PRIMARY KEY );");
    db.execSQL("CREATE TABLE edges( childID CHAR(1) NOT NULL, parentID CHAR(1) NOT NULL,PRIMARY KEY(childID,parentID) );");

    this.db = this.getWritableDatabase(); 
    ContentValues cv=new ContentValues();

    cv.put(NODE_ID, "A");
    db.insert("nodes", NODE_ID, cv);
    cv.put(NODE_ID, "B");
    db.insert("nodes", NODE_ID, cv);
    cv.put(NODE_ID, "C");
    db.insert("nodes", NODE_ID, cv);
    cv.put(NODE_ID, "D");
    db.insert("nodes", NODE_ID, cv);
    cv.put(NODE_ID, "E");
    db.insert("nodes", NODE_ID, cv);
    cv.put(NODE_ID, "E");
    db.insert("nodes", NODE_ID, cv);

    cv.put(CHILD_ID, "A");
    cv.put(PARENT_ID, "C");
    db.insert("edges", CHILD_ID, cv);
    db.insert("edges", PARENT_ID,cv);

    cv.put(CHILD_ID, "B");
    cv.put(PARENT_ID, "E");
    db.insert("edges", CHILD_ID, cv);
    db.insert("edges", PARENT_ID,cv);

    cv.put(CHILD_ID, "C");
    cv.put(PARENT_ID, "D");
    db.insert("edges", CHILD_ID, cv);
    db.insert("edges", PARENT_ID,cv);

    cv.put(CHILD_ID, "C");
    cv.put(PARENT_ID, "F");
    db.insert("edges", CHILD_ID, cv);
    db.insert("edges", PARENT_ID,cv);
    db.close();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    android.util.Log.w("Constants", "Upgrading database, which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS constants");
    onCreate(db);
    }
} 
```

我的代码有什么问题？我需要为此做任何设置，还是必须创建另一个类来创建数据库文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:29:11.720

您有任何使用 DatabaseHelper 类的代码吗？如果从不使用 DatabaseHelper，则永远不会调用其 onCreate 方法，因此不会创建数据库。

例如，如果您尝试创建一个内容提供者，那么当向它发送请求时，内容提供者将由 Android 启动（例如，活动将数据插入内容提供者）。在启动时，内容提供者的 onCreate 方法被调用，这是创建数据库助手实例的好地方，比如

```
@Override
public boolean onCreate() {
    dbHelper = new DatabaseHelper(getContext());
    ...
} 
```

Android 不会神奇地为我们创建数据库助手实例。

现在，我意识到您可能不是在创建内容提供者，而是需要一个用于其他目的的数据库助手。但问题可能是相同的——没有代码实例化您的 DatabaseHelper 类的实例。

需要对您的应用程序进行更详细的描述才能更具体地说明您需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:13:21.380

您提供了不错的代码。但是您需要提及您在活动中使用的代码。
您是否在活动（启动器）中使用 DatabaseHelper？
如果您不使用它，则将以下语句放入活动 oncreate() 并运行。

```
DatabaseHelper databaseHelper = new DatabaseHelper(); 
```

现在您可以找到您的数据库文件。

# c# - 如何更改虚拟目录的物理路径？

> ID：10717969
> 
> 赞同：0
> 
> 时间：2012-05-23T10:21:34.743
> 
> 标签：c#, deployment, installation

我为我的 Web 服务应用程序创建了一个 Web 设置并成功部署。但是，Web 设置将始终在 inetpub\wwwroot 目录下创建我的虚拟目录（它恰好在我的 C 驱动器中）。

无论如何我可以让网络设置在另一个位置创建虚拟目录，例如，d-drive，因为我的客户在 d 驱动器中有 wwwroot。我已经尝试删除 web setup 的安装地址步骤，但它仍然默认为 inetpub\wwwroot。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:33:34.030

这是我编写的一些代码，可以让您了解我如何*创建*虚拟目录。我刚刚在编写代码时包含了代码，因此其中有几个信念的飞跃。但希望入站参数是显而易见的（尽管请注意，该方法希望您知道网站的 ID）。另请查看第二种方法（由第一种方法调用） - 这两种方法结合使用将允许您访问现有站点的现有虚拟目录，并设置各种属性，包括“路径”属性。

希望这对您有所帮助...

```
 /// <summary>
    /// Creates a virtual directory on the specified web site
    /// </summary>
    /// <param name="serverName">name of server</param>
    /// <param name="siteId">Site Id</param>
    /// <param name="directoryName">Virtual Directory Name</param>
    /// <param name="physicalPath">physical path of directory</param>
    /// <param name="bAnonymousLogon">Integrated Windows authentication or Anonymous Logon</param>
    /// <param name="defaultDoc">The default document for the site.</param>
    /// <returns>The Virtual Directory</returns>
    public DirectoryEntry CreateVirtualDirectory(string serverName, int siteId, string directoryName, string physicalPath, bool bAnonymousLogon, string defaultDoc)
    {
        try
        {
            // Does the directory exist already?
            DirectoryEntry vDir = GetVirtualDirectory(serverName, siteId, directoryName);

            if (vDir != null)
            {
                // Yes, it does, no need to create
                _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirAlreadyExists, directoryName, siteId));
            }
            else
            {
                // No, we have some creating to do
                DirectoryEntry root = new DirectoryEntry("IIS://" + serverName + "/W3SVC/" + siteId.ToString(CultureInfo.CurrentUICulture) + "/Root");
                vDir = root.Children.Add(directoryName, IisVirtualDirectory);
                vDir.CommitChanges();
                _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreated, directoryName, siteId));
            }

            // Created or not, we want to set the virtual directory's properties
            // We take a risk here by using literals rather than variables (need to make sure the
            // log value is the same as the actual entry)
            // But its not really much of a risk - the main reason for logging is to record progress
            // through the "set" operation

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreatePath, physicalPath));
            vDir.Properties["Path"][0] = physicalPath;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAccessRead, true.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AccessRead"][0] = true;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAccessExecute, true.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AccessExecute"][0] = true;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAccessWrite, false.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AccessWrite"][0] = false;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAccessScript, false.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AccessScript"][0] = false;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAuthNtlm, (!bAnonymousLogon).ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AuthNTLM"][0] = !bAnonymousLogon;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAuthAnon, bAnonymousLogon.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["AuthAnonymous"][0] = bAnonymousLogon;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateDefaultDoc, true.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["EnableDefaultDoc"][0] = true;

            if (!string.IsNullOrEmpty(defaultDoc))
            {
                _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateDefaultDoc,
                                          defaultDoc.ToString(CultureInfo.CurrentUICulture)));
                vDir.Properties["DefaultDoc"][0] = defaultDoc + ",default.htm,default.aspx,default.asp";
            }

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateDirBrowse, false.ToString(CultureInfo.CurrentUICulture)));
            vDir.Properties["EnableDirBrowsing"][0] = false;

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAppFriendlyName, directoryName));
            vDir.Properties["AppFriendlyName"][0] = directoryName;    // The name of the application

            if (_InstalledIISVersion >= IisVersion.Iis6)
            {
                _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateAppPool, directoryName));
                vDir.Properties["AppPoolId"][0] = directoryName;
            }

            // Commit the changes to the directory
            vDir.CommitChanges();

            // Create out-of-process application
            vDir.Invoke("AppCreate", false);

            _Logger.Log(VirDirCreateSetUp);

            return vDir;
        }
        catch (Exception ex)
        {
            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirCreateException, directoryName, siteId));
            _Logger.Log(ex);
            throw ;
        }
    } 
```

还...

```
 /// <summary>
    /// Determines whether the directory entry exists on the specified site
    /// </summary>
    /// <param name="serverName">name of server</param>
    /// <param name="siteId">site id</param>
    /// <param name="directoryName">virtual directory name</param>
    /// <returns>the Virtual Directory, if it exists, otherwise null</returns>
    private DirectoryEntry GetVirtualDirectory(string serverName, int siteId, string directoryName)
    {
        try
        {
            DirectoryEntry root = new DirectoryEntry("IIS://" + serverName + "/W3SVC/" + siteId.ToString(CultureInfo.CurrentUICulture) + "/Root");

            foreach (DirectoryEntry entry in root.Children)
            {
                if (0 == String.Compare(directoryName, entry.Name, true, CultureInfo.CurrentUICulture))
                {
                    _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirFound, directoryName, serverName));
                    return entry;
                }
            }

            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirNotFound, directoryName, serverName));
            return null;
        }
        catch (Exception ex)
        {
            _Logger.Log(String.Format(CultureInfo.CurrentUICulture, VirDirException, directoryName, siteId, serverName));
            _Logger.Log(ex);
            throw;
        }
    } 
```

刚刚注意到顶部的匈牙利符号 - 畏缩！

# ruby - RSpec Ruby中的关键字“应该”到底是什么

> ID：10717970
> 
> 赞同：10
> 
> 时间：2012-05-23T10:21:38.943
> 
> 标签：ruby, rspec

我是 Ruby 的初学者，这个问题困扰了我很长时间。

在 RSpec 文件中，如果我们写`Book.should <do something>`，`should`关键字是什么？它是 Book 对象的成员吗？它是如何成为 Book 对象的成员的？还是它是 Ruby 的某种构造？它是一个函数吗？如果它是一个函数或成员，我在哪里可以找到它的定义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T10:45:51.703

加载后，RSpec 会在模块中包含[一个模块](https://github.com/dchelimsky/rspec/blob/master/lib/spec/expectations/extensions/kernel.rb)，该`Kernel`模块包含在 Ruby 已知的所有对象中。因此，它可以使 should 方法对所有对象都可用。因此，`should`不是关键字（如`if`、、`class`或`end`），而是普通方法。

请注意，mixin 仅在 RSpec 上下文中可用，因为它在加载或 RSpec 期间被“修补”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:50:02.687

我在[这里](https://stackoverflow.com/a/8883688/586748)回答了一个类似的问题。基本上：

我认为 Holger 的回答可能会更明确，并且最初可能让您感到困惑的是，它`should`打破了大多数常用的方法命名约定（例如，该方法没有描述它的作用）以使代码为整个读作一种句子。

因此，该库不只是创建一组测试，而是试图鼓励您通过测试以类似于人类可读规范的方式描述您的应用程序。

# sql - SQL Developer - 视图、行 ID 和插入

> ID：10717971
> 
> 赞同：1
> 
> 时间：2012-05-23T10:21:39.040
> 
> 标签：sql, oracle, oracle10g, ora-01446

"CID","NAME","EMAIL","LOC" 是两个表的属性

> 创建视图 TEST_V 为
> 
> 从表 1 中选择 *
> 
> 联盟
> 
> 从表2中选择*；

* * *

> 插入 TEST_ERROR（Source_Rowid、Source_Table、Filter_Id、Date_Time、Action）
> 
> 选择 ROWID, 'TEST_V', 100, sysdate,'Request Admin'
> 
> 来自 TEST_V
> 
> 其中 LOC =（从位置选择 CityList）；

Location 是另一个表，其中定义了 CityList，我想将 CityList 与 LOC 匹配，然后添加行。

我得到的错误是：

*SQL 错误：ORA-01446：无法从具有 DISTINCT、GROUP BY 等的视图中选择 ROWID 或对其进行采样。01446\. 00000 -“无法从具有 DISTINCT、GROUP BY 等的视图中选择或采样 ROWID。”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:29:08.530

如果您需要视图基表的 ROWID，请执行以下操作：

```
Create View TEST_V As
Select Table1.*, rowid as row_id From Table1
Union all
Select Table2.*, rowid as row_id From Table2; 
```

然后：

```
Insert Into TEST_ERROR (Source_Rowid, Source_Table, Filter_Id, Date_Time, Action)
Select ROW_ID, 'TEST_V', 100, sysdate,'Request Admin'
From TEST_V
Where LOC in (Select CityList From Location); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:34:39.070

在这个查询中（ loc= select citylist from location ）一次选择了这么多城市，所以这些城市不能同时适合 loc 这为什么它会给出错误所以试试这个（ loc =（从 citylist= 的位置选择城市列表） '作为你表中一个城市的名称'））我认为它会起作用

# c# - 控制同一类中方法的输出

> ID：10717974
> 
> 赞同：1
> 
> 时间：2012-05-23T10:21:53.753
> 
> 标签：c#, unit-testing, nunit, moq

我正在测试一个在同一个类中调用另一个方法的方法。

根据此内部方法调用是否返回结果，我会做不同的事情。在这种情况下，它是一个`Cache`类，我正在测试我的`GetOrStore`方法。我想测试两条路径，何时`Get`返回 null 和何时`Get`返回*something*。

`Get`控制调用时输出的正确方法是`GetOrStore`什么？感觉`Get`应该在模拟实例上执行但是我不确定如何在同一个类中给出两个方法来执行此操作。

**更新**

此时我唯一能想到的就是确保在运行测试之前删除缓存键：

```
 HttpRuntime.Cache.Remove("foo"); // Make sure foo isn't in the cache.

  var output = _cache.GetOrStore("foo", () => "Foo", 100);
  Assert.AreEqual(output, "Foo"); 
```

但这只是感觉不对。我实际上不希望在测试期间触及 HttpRuntime 缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:07:58.737

答案在模拟`CallBase`实例的 Moqs 属性中。

设置`CallBase`为`true`确保在模拟对象的真实实例上调用任何未明确设置的方法。

这意味着我们可以设置`Get`方法并且仍然`GetOrStore`正确执行：

```
 var _mockCache = new Mock<Cache>();
  _mockCache.Setup(m => m.Get(It.IsAny<string>())).Returns(null);
  _mockCache.CallBase = true;

  var output = _mockCache.Object.GetOrStore("foo", () => "Foo", 100);
  Assert.AreEqual("Foo", output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:00:21.953

您发布的代码暗示在您正在测试的缓存类中，Get 方法调用 HttpRuntime.Cache 上的静态方法。是这样吗？

通常最好避免像这样的可变静态状态。您可以创建一个包装 HttpRuntime.Cache 的代理类，并让您的 Cache 依赖于它的一个实例。然后在您的测试中，您可以使用可以轻松控制的模拟版本替换代理。

# ios - 如何确定图像是制作到设备还是从外部iOS下载的？

> ID：10717977
> 
> 赞同：0
> 
> 时间：2012-05-23T10:22:20.387
> 
> 标签：ios, image, uiimagepickercontroller, exif, alassetslibrary

实际上我的标题问题是，如何确定图像是在设备上制作的还是从外部下载的。

我使用 ALAssetsLibrary 和标准 UIImagePickerController 来加载图像，但它们可以返回用户从 Internet 保存或从电子邮件获取的图像，我需要切换使用相机和其他设备在设备上制作的图像。

有任何问题欢迎提问，希望社区能帮到我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:32:42.477

您需要将源指定为`UIImagePickerControllerSourceTypeSavedPhotosAlbum`. 这将设备的相机胶卷相册指定为图像选择器控制器的源。请参阅[UIImagePickerController上的文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:03:47.343

您可以尝试阅读字典，例如：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
//your code
NSLog(@"INFO: %@", info);
} 
```

你会看到有一个带有设备信息的键：

```
"{TIFF}" =         {
            DateTime = "2012:09:13 16:59:41";
            Make = Apple;
            Model = "iPhone 4S";
            Software = "5.1.1";
            XResolution = 72;
            YResolution = 72;
        }; 
```

希望这有帮助。

# javascript - 设置一系列同步/异步函数的正确方法，所有这些函数都可以停止表单提交和进一步处理？

> ID：10717982
> 
> 赞同：0
> 
> 时间：2012-05-23T10:22:36.420
> 
> 标签：javascript, jquery, events, preventdefault, form-submit

1.  我需要在表单提交按钮单击时依次调用一些函数-

    func1() -> func2() -> func3() ... -> func7() -> ...

2.  所有这些功能都会进行某种验证/检查，如果验证失败，则会向用户显示确认对话框。如果用户确认，则执行队列中的下一个函数。

3.  这些函数中的任何一个都可以执行一些异步任务，例如发送 Ajax 请求，并根据结果向用户显示一些确认对话框。

**细节**

我有具有以下结构的异步函数 -

```
function preValidateUrls(evt)
{
   evt.preventDefault();

   $.ajax({
       type: "POST",
       url: posturl+"?"+params,
       dataType: "json",
       success: function(res)
           { 
                 //display some confirmation dialog
                 if(confirm(msg)) 
                 {
                       $("form#frmBanners").submit();
                 }
            }
        });
} 
```

我该怎么做呢？

首先，我只有两个像这样定义的同步函数 -

```
<form onsubmit="return func3()">
...
...
<input type="submit" onclick="return func1()"/>
</form> 
```

*   func1() 最初被调用，显示确认对话框，然后是 func2()...

*   然后我定义了异步函数 func2() （结构与上图相同）并像这样调用它 -

    $("input#formsubmitbutton").click(func2);

但是，正如预期的那样，这不会等待 func1() 的确认。

*   如果我确实喜欢以下内容，则该函数`func2`会一次又一次地被调用-

    $('form#frmBanners').submit(function() { return func2(); //这个在preValidateUrls()之后调用 });

我如何以一种干净的方式做到这一点，所以明天当我需要在两者之间添加任何同步/异步函数时，我只需要在一个地方进行编辑，比如 -

```
func1() -> func2() -> func3() ... -> func7() 
```

PS - 我知道，如何在 javascript 中使用回调函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:33:32.190

提交处理程序中只有一个函数怎么样：

```
<form action="" onsubmit="return func_test_all();">
</form> 
```

然后在您的内部`func_test_all()`设置一个[`Deferred pipe`](http://api.jquery.com/deferred.pipe/)and`return false;`最后以防止立即提交表单。

我必须运行，所以我没有完整的代码示例；我希望你能弄清楚延期的 ;-) 只会在 3 小时左右后回来。

# mysql - MySQL重复连接在同一张表上

> ID：10717986
> 
> 赞同：0
> 
> 时间：2012-05-23T10:22:47.120
> 
> 标签：mysql, sql, join

我有一张邮政编码表：

```
id INT, postcode VARCHAR(8) 
```

以及这些邮政编码之间的距离表，该表仅存储两个不同邮政编码之间的一个方向的距离，因此从邮政编码 ID 2 到邮政编码 ID 5，距离仅存储为`2, 5, 78.2`或存储为，`5, 2, 78.2`但不能同时存储。

```
from INT, to INT, dist DECIMAL 
```

距离的主键是（从，到），我在该表的每一列上也有一个索引。

我有一个看起来像这样的查询：

```
SELECT *
FROM listings, postcode_distances,
     postcodes postcode_listings, postcodes postcode_searchterm
WHERE listing.`status` = 3
AND listings.category = 8
AND postcode_listings.id = listings.postcode_id
AND (
     (postcode_distances.to = postcode_listings.id AND
      postcode_distances.from = postcode_searchterm.id AND
      postcode_distances.dist < 30)
     OR
     (postcode_distances.from = postcode_listings.id AND
      postcode_distances.to = postcode_searchterm.id AND
      postcode_distances.dist < 30)
)
AND postcode_searchterm.postcode = 'AB11'
GROUP BY id_listings
ORDER BY postcode_distances.dist ASC; 
```

查询运行缓慢（如您所料）并作为副作用锁定数据库。

解释查询显示 postcode_distances 连接的这一行：

```
1 | SIMPLE | postcode_distances | ALL | PRIMARY,dist,to,from | 695332 | Using where; Using join buffer 
```

有什么方法可以在单个查询中实现两个连接（搜索的邮政编码是列`from`或列）？`to`

我可以使用 UNION 并只运行两次查询，但将 postcode_distance OR 条件的每一半放在每个查询中，但我想检查我是否错过了另一种更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:41:45.503

```
SELECT postcodes.id       AS SearchedId, 
       postcodes.postcode AS SearchedPostCode, 
       p1.postcode        AS FromPostCode, 
       p2.postcode        AS ToPostCode, 
       p1.id              AS FromPostCodeId, 
       p2.id              AS ToPostCodeId, 
       postcode_distances.dist 
FROM   listings 
       INNER JOIN postcodes 
         ON postcodes.id = listings.postcode_id 
       INNER JOIN postcode_distances 
         ON ( postcode_distances.to1 = postcodes.id 
               OR postcode_distances.from1 = postcodes.id ) 
       INNER JOIN postcodes p1 
         ON postcode_distances.From1 = p1.id 
       INNER JOIN postcodes p2 
         ON postcode_distances.to1 = p2.id 
WHERE  listings.status = 3 
       AND listings.category = 8 
       AND postcode_distances.dist < 30 
       AND postcodes.postcode = 'AB11' 
ORDER  BY postcode_distances.dist ASC; 
```

[请参阅 Sql Fiddle 示例](http://sqlfiddle.com/#!2/8d7f2/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:02:53.373

```
SELECT   *
FROM     listings
  JOIN   postcodes postcode_listings ON postcode_listings.id = listings.postcode_id
  JOIN   postcodes postcode_searchterm
  JOIN   postcode_distances
    ON ( (listings.postcode_id, postcode_searchterm.id)
         IN (
           (postcode_distances.to,   postcode_distances.from),
           (postcode_distances.from, postcode_distances.to)
         )
     AND postcode_distances.dist < 30
    )
WHERE    listings.status = 3
     AND listings.category = 8
     AND postcode_searchterm.postcode = 'AB11'
GROUP BY id_listings
ORDER BY postcode_distances.dist ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:08:11.580

这是一种不同的方法：

```
SELECT
  MAX(CASE p.id WHEN d.`from` THEN p.postcode END) AS from_postcode,
  MAX(CASE p.id WHEN d.`to`   THEN p.postcode END) AS to_postcode,
  d.`from`,
  d.`to`,
  d.`dist`,
  MAX(l.id_listings) AS id_listings
FROM postcode_distances d
INNER JOIN postcodes p ON p.id IN (d.`from`, d.`to`)
LEFT JOIN listings l ON l.postcode_id = p.id AND l.`status` = 3 AND l.category = 8
WHERE p.postcode =  'AB11' AND l.id_listings IS     NULL
   OR p.postcode <> 'AB11' AND l.id_listings IS NOT NULL
GROUP BY
  d.`from`,
  d.`to`,
  d.`dist`
HAVING COUNT(*) = 2 
```

该查询使用到特定子集的外连接，`listings`并检索在该子集中具有匹配项或具有特定`postcode`. 然后对这些行进行分组，并确保这些组恰好有两行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T11:59:45.607

如果您发现有问题，请尝试此评论

```
 select * from listings, postcode_distances pDis,postcodes post
 WHERE listing.status = 3 AND listings.category = 8
 AND (pDis.to = post.id OR pDis.from = post.id) AND post.postcode = 'AB11' 
 AND pDis.dist < 30; 
```

# c# - VS中的奇怪警告

> ID：10717988
> 
> 赞同：6
> 
> 时间：2012-05-23T10:22:50.363
> 
> 标签：c#, .net, warnings, com-interop

我有很多这样的警告，但我不知道它们是什么意思。

有谁知道这是什么？

“运行时封送处理程序无法封送 'IOleWindow.GetWindow' 的至少一个参数。因此，此类参数将作为指针传递，并且可能需要不安全的代码来操作。”

我还应该指出它与“c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets”有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:18:44.677

您可以使用[类型库导入器 (tblimp)](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28VS.80%29.aspx)在 Visual Studio 外部导入 DLL 并使用生成的引用而不是让 Visual Studio 创建它，从而消除警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:24:08.490

[可以在这里找到](https://xceed.com/forums/topic/TlbImp-warning-At-least-one-of-the-arguments-for-IXceedHashing-FromString-can-not-be-marshaled-by-the-runtime-marshaler/)很好的情况解释：

> 您可以放心地忽略这些警告。您可以通过查阅此页面了解有关此问题的更多信息：http: [//msdn.microsoft.com/en-us/library/aa289520%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa289520%28v=vs.71%29.aspx)
> 
> “In/Out C-Style Arrays”部分特别相关。底线：如果警告中指定方法的返回缓冲区接受“in”值，则必须应用文章中的修改。但是由于所有列出的方法都只处理缓冲区，因此警告对您和框架都没有影响。
> 
> 但是，如果您想永久消除警告（例如，当您执行“全部重建”时），您将别无选择，如文章中所述。您将不得不反汇编互操作包装器（使用 ildasm），编辑 IL 并重新组装（使用 ilasm）。此过程也称为“创意往返”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:33:46.320

警告消息的主要问题是它仅指示项目而不是有问题的 COM，因此消除过程似乎是追踪此问题的唯一方法。

# wordpress - Umbraco + wordpress

> ID：10717990
> 
> 赞同：3
> 
> 时间：2012-05-23T10:22:54.463
> 
> 标签：wordpress, umbraco, umbraco-blog

我刚刚听说过这个umbraco，并在官方网站上观看了演示。那么可以用它来维护我的wordpress博客吗？我目前正在使用 windows live writer，我可以在其中下载帖子、编辑它们并上传回来。可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:59:59.957

不，不是。umbraco v5.x 有一个实验性的 wordpress 配置单元提供程序，理论上允许 umbraco 读取/写入 wordpress 数据，但它并不是你可以开始使用的东西 - 它更像是一个概念验证演示。

Wordpress 更像是 Umbraco 的竞争对手，而不是您（通常）联合使用的工具。

如果您有兴趣，这里是 umbraco 的 wordpress 提供程序的源代码：[https ://bitbucket.org/boxbinary/hive-wordpress-provider](https://bitbucket.org/boxbinary/hive-wordpress-provider)

这是一个讨论它的博客：http: [//labs.thesedays.com/blog/2011/11/25/a-blob-storage-hive-provider-for-umbraco-5-beta/](http://labs.thesedays.com/blog/2011/11/25/a-blob-storage-hive-provider-for-umbraco-5-beta/)

# jquery - 如何在 XSLT 中用 jquerys data() 方法替换自定义属性？

> ID：10717991
> 
> 赞同：0
> 
> 时间：2012-05-23T10:22:56.790
> 
> 标签：jquery, xslt

我有以下输入元素：

```
<input type="radio">
        <xsl:attribute name="name">
          <xsl:value-of select="../../os:Row_ID "/>
        </xsl:attribute>
        <xsl:attribute name="row_id">
          <xsl:value-of select="../../os:Row_ID "/>
        </xsl:attribute>
        <xsl:attribute name="column_id">
          <xsl:value-of select="os:Column_ID "/>
        </xsl:attribute>
        <xsl:attribute name="value">
          <xsl:value-of select="../../os:Row_ID "/>
          <xsl:value-of select="os:Column_ID "/>
        </xsl:attribute>
      </input> 
```

我不想使用未在 W3C 验证器中验证的自定义属性，而是使用 jQuerys data() 方法：

```
 <xsl:attribute name="row_id">
      <xsl:value-of select="../../os:Row_ID "/>
    </xsl:attribute>
    <xsl:attribute name="column_id">
      <xsl:value-of select="os:Column_ID "/> 
```

所以我可以添加“row_id”作为键，值`<xsl:value-of select="../../os:Row_ID "/>`作为值。

我将如何在 XSLT 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:49:56.743

```
<input 
  type="radio" 
  name="{../../os:Row_ID}"
  value="{../../os:Row_ID}{os:Column_ID}"
  data-row_id="{../../os:Row_ID}"
  data-column_id="{os:Column_ID}"
/> 
```

请注意，`<xsl:attribute>`除非您有变量属性名称，否则使用是多余的。您可以使用属性值模板 (the `{expressions in braces}`) 来分配值。