# StackOverflow 问答 12491000-12491999

# ios - 如何在没有内容长度的情况下获得文件的总大小

> ID：12491001
> 
> 赞同：1
> 
> 时间：2012-09-19T08:29:05.700
> 
> 标签：ios, download, content-length

我想下载一些文件并用progressview显示下载进度。格式为 currentSize/totalSize。如您所知，我可以使用 http 响应的内容长度来获取总大小。但是，有时您无法在标题中找到该属性。所以，我的问题是如何获得要下载的文件的总大小？或者有什么方法可以让内容长度重新出现在标题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:38:42.520

`NSURLResponse`有一个方法称为`-(long long)expectedContentLength` 它返回预期的内容长度，或者`NSURLResponseUnknownLength`如果无法确定长度。

资料来源：[Apple 文档](https://developer.apple.com/documentation/foundation/nsurlresponse/1413507-expectedcontentlength)

# cassandra - 最新版本的问题（cassandra 1.15）

> ID：12491003
> 
> 赞同：1
> 
> 时间：2012-09-19T08:29:09.197
> 
> 标签：cassandra

我尝试使用可用的 tarball 二进制文件安装最新的 cassandra 版本 -

[http://www.apache.org/dyn/closer.cgi?path=/cassandra/1.1.5/apache-cassandra-1.1.5-bin.tar.gz](http://www.apache.org/dyn/closer.cgi?path=/cassandra/1.1.5/apache-cassandra-1.1.5-bin.tar.gz)

我按照入门页面提供的说明进行操作。

但是当我通过 ./cassandra -f 运行 cassandra 时，出现以下错误#

```
amt@amtlt2:~/Downloads/apache-cassandra-1.1.5/bin$ ./cassandra -f
xss =  -ea -javaagent:./../lib/jamm-0.2.5.jar -XX:
+UseThreadPriorities-XX:ThreadPriorityPolicy=42 -Xms4G
Xmx4G -Xmn800M -XX:+HeapDumpOnOutOfMemoryError -Xss180k 
```

PS我正在服务器上安装。

> 好吧，我对 java 没有任何问题，因为我正在运行最新版本，并且该版本在我配置了 cassandra 的另一台 PC 上工作。

```
amt@amtlt2:~/Downloads/apache-cassandra-1.1.5/bin$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

> 而且我也觉得它与堆大小无关，因为它设置为非常高的值

```
# The example HEAP_NEWSIZE assumes a modern 8-core+ machine for decent pause
# times. If in doubt, and if you do not particularly want to tweak, go with
# 100 MB per physical CPU core.

MAX_HEAP_SIZE="4G"
HEAP_NEWSIZE="800M" 
```

> > 有趣的是，如果我按照相同的说明下载（不受支持的）cassandra 1.12 发行版。它的工作原理与我在上面所做的配置相同。

任何帮助都非常感谢。如果我在这里做错了，请指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:51:46.867

您实际上没有记录错误。 `-XX:+HeapDumpOnOutOfMemoryError`实际上是命令的命令行选项，`java`告诉它在 OOM 时执行堆转储。

# c# - 使用 monodevelop 向应用程序添加自定义图标的最简单方法是什么？

> ID：12491005
> 
> 赞同：2
> 
> 时间：2012-09-19T08:29:15.807
> 
> 标签：c#, mono, monodevelop

> **可能重复：**
> [Mono .EXE 程序集集资源管理器图标](https://stackoverflow.com/questions/1622143/mono-exe-assembly-set-explorer-icon)

我最近使用 monodevelop 作为 IDE 启动了 ac# 项目（应该在 Windows 和 Linux 上运行），我想为 .exe 文件提供我自己的应用程序图标，而不是默认图标。

任何建议如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T09:09:14.387

转到`Project Menu -> <project name> Options`项目选项窗口中的和：

![项目选项](../Images/1d32838471f6f19427876d30b7c2ad91.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T09:04:58.080

右键单击您的项目，Options，选择 Build/General 页面并提供 Win32 图标。

请注意，该图标可能只会出现在 Windows 上，Linux 使用不同的方式来显示可执行文件的图标（尽管在这里无法帮助您）。

# symfony - 在 symfony 2 中将 bundle 注入服务

> ID：12491014
> 
> 赞同：0
> 
> 时间：2012-09-19T08:29:40.863
> 
> 标签：symfony, dependency-injection, bundle

有没有办法将捆绑包注入服务？

我想像这样编写我的服务构造函数：

```
<?php
use Symfony\Component\HttpKernel\Bundle\Bundle;

class MyService
{
    /** @var Bundle */
    private $bundle;

    public function __construct(Bundle $bundle) 
    {
        $this->bundle = $bundle;
    }
} 
```

对于`services.yml`我想要这样的东西：

```
services:
    my_service:
        class:     MyService
        arguments: ['how_can_i_reference_a_bundle'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T08:43:39.607

您的捆绑包可以设置为这样的服务：

```
services:
    acme_foo_bundle:
        class: Acme\Foo\AcmeFooBundle
        factory_service: kernel
        factory_method: getBundle
        arguments:
            - "AcmeFooBundle" 
```

# php - 想要隐藏特定国家的内容

> ID：12491015
> 
> 赞同：0
> 
> 时间：2012-09-19T08:29:46.407
> 
> 标签：php, javascript, jquery, apache, ip

我想隐藏内容并将某些特定国家（如伊朗、巴基斯坦、阿富汗）的流量重定向到专门为其构建的其他网页，但我想将此内容展示给其他国家的流量如何实现请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:32:33.050

最简单的方法是从用户那里确定他们所在的国家/地区，然后将该信息保存到 Session 或 Cookie 中，以便您的代码可以引用它。虽然可以猜测 IP 范围，也可能根据本地用户时间设置猜测位置（此时开始变得非常棘手），但最简单的方法是简单地询问用户。

如果您在寻找代码示例，我为这个您可能感兴趣的非常相似的问题写了一个相当长的答案：[Wordpress: Use method="post" for multiple language selection](https://stackoverflow.com/questions/11796046/wordpress-use-method-post-for-multiple-language-selection/11796069#11796069)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:33:59.443

您需要像[IP2Location](http://www.ip2location.com/)这样的服务。您的服务器端代码必须对照 API 或 IP 到位置的数据库检查 IP 地址并从那里阻止。通过 JavaScript 阻止内容**可能会**阻止某些客户端，但很容易绕过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:34:27.393

获取 IP，`$_SERVER`然后使用它`http://api.hostip.info/country.php?ip=100.100.100.100`来跟踪国家/地区，然后对其应用重定向

# java - CATALINA_HOME 路径设置

> ID：12491016
> 
> 赞同：1
> 
> 时间：2012-09-19T08:29:46.533
> 
> 标签：java, tomcat, web, catalina

在安装Tomcat的过程中，多个论坛都需要设置CATALINA_HOME变量，并且要指向Tomcat的父目录。我正在通过 Eclipse 运行 Web 项目，它在存在和没有设置此环境变量的情况下运行。

我想知道这个变量解决了什么确切的目的，什么时候设置它成为强制性的。

我还想知道 Tomcat/bin 目录中的 tomcat-juli.jar 的确切用途

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:09:14.033

Q> 这个变量解决的具体目的是什么
A>类的[Javadoc](http://javasourcecode.org/html/open-source/tomcat/tomcat-6.0.32/org/apache/catalina/startup/Bootstrap.html)`Bootstrap`说：

> 该应用程序构造了一个类加载器，用于加载 Catalina 内部类（通过累积在“catalina.home”下的“server”目录中找到的所有 JAR 文件），并开始容器的常规执行。这种迂回方法的目的是使 Catalina 内部类（以及它们所依赖的任何其他类，例如 XML 解析器）远离系统类路径，因此对应用程序级类不可见。

但还有更多。`CATALINA_HOME`并且（可互换地）`CATALINA_BASE`定义一个“基本目录”，用于引用`work`目录（用于保存已编译的jsps），也有助于查找上下文配置文件等。

可能是 Eclipse 在您不知情的情况下设置了这些属性。打印所有[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)以查看其中的内容。

Q> 什么时候设置成为强制性
的 A> 据我所知

Q> tomcat-juli.jar 的确切使用
A> 直接来自[Tomcat 文档](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)：

> Apache Tomcat 有自己的 java.util.logging API 的几个关键元素的实现。这个实现被称为“JULI”。关键组件是自定义 LogManager 实现，它知道在 Tomcat 上运行的不同 Web 应用程序（以及它们不同的类加载器）。它支持私有的每个应用程序日志记录配置。当 Web 应用程序从内存中卸载时，Tomcat 也会通知它，以便清除对其类的引用，防止内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:55:29.580

安装 Tomcat 后，检查 java 选项下的 tomcat 属性，默认情况下已设置以下变量。

```
-Dcatalina.home=C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0 

-Dcatalina.base=C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0 

-Djava.endorsed.dirs=C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0\endorsed 

-Djava.io.tmpdir=C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0\temp 

-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 

-Djava.util.logging.config.file=C:\Program Files (x86)\Apache SoftwareFoundation\Tomcat 
6.0\conf\logging.properties 
```

您不需要自己设置 CATALINA_HOME ，即使在 Eclipse 中运行也是如此。您必须设置**CATALINA_HOME**和/或**CATALINA_BASE**的唯一时间是您想要覆盖默认值。最常见的是，如果您使用相同的 Tomcat 二进制文件来运行多个 Tomcat 实例，您会这样做。

**tomcat-juli.jar**

此 tomcat-juli.jar 是用于记录目的的第三方组件。它包含完整的 Apache Commons Logging 实现，因此能够发现 log4j 的存在并进行自我配置。

**如何使用 tomcat-juli.jar**

如果要将 Tomcat 配置为全局使用 log4j：

1.  下载或构建可用作 Tomcat 的“附加”组件的 tomcat-juli.jar 和 tomcat-juli-adapters.jar。
2.  将 log4j.jar 和 tomcat-juli-adapters.jar 从“extras”放入 $CATALINA_HOME/lib。用 "extras" 中的 tomcat-juli.jar 替换 $CATALINA_HOME/bin/tomcat-juli.jar。

# opencv - OpenCV FREAK：快速视网膜关键点描述符

> ID：12491022
> 
> 赞同：17
> 
> 时间：2012-09-19T08:30:06.057
> 
> 标签：opencv, feature-descriptor, freak

我正在开发一个涉及使用[怪胎](http://infoscience.epfl.ch/record/175537/files/2069.pdf)描述符的应用程序，刚刚在**OpenCV2.4.2**版本中发布。

在[文档](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#freak-freak)中只出现了两个函数：

*   类构造函数

*   令人困惑的方法`selectPairs()`

我想使用我自己的检测器，然后调用 FREAK 描述符传递检测到的关键点，但我不清楚该类是如何工作的。

**问题：**

我真的需要使用`selectPairs()`吗？打电话就够了`FREAK.compute()`吗？我不太明白selectPairs的用途是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T09:35:04.043

刚刚浏览了这篇论文，在第 4.2 段中看到作者设置了一种方法来选择感受野对以在其描述符中进行评估，因为获取所有可能的对将是太多的负担。selectPairs() 函数让您重新计算这组对。

之后阅读他们在原始文章中准确指向本段的文档。此外，文档中的一些注释告诉您，已经有一个可用的、离线学习的对集合可以与 FREAK 描述符一起使用。所以我想至少一开始你可以只使用预先计算的对，并将你从方法中获得的关键点列表作为参数传递给 FREAK.compute。

如果您的结果令人失望，您可以尝试原始论文中使用的关键点选择方法（第 2.1 段），然后最终学习自己的一组对。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-19T17:10:54.557

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include "cv.h"
#include "highgui.h"
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/flann/flann.hpp>
#include <opencv2/legacy/legacy.hpp>
#include <vector>

using namespace cv;
using namespace std;

int main()
{
    Mat image1,image2;
    image1 = imread("C:\\lena.jpg",0);
    image2 = imread("C:\\lena1.bmp",0);

    vector<KeyPoint> keypointsA,keypointsB;
    Mat descriptorsA,descriptorsB;

    std::vector<DMatch> matches;

    OrbFeatureDetector detector(400);

    FREAK extractor;

    BruteForceMatcher<Hamming> matcher;

    detector.detect(image1,keypointsA);
    detector.detect(image2,keypointsB);

    extractor.compute(image1,keypointsA,descriptorsA);
    extractor.compute(image2,keypointsB,descriptorsB);

    matcher.match(descriptorsA, descriptorsB, matches);

    int nofmatches = 30;
    nth_element(matches.begin(),matches.begin()+nofmatches,matches.end());
    matches.erase(matches.begin()+nofmatches+1,matches.end());

    Mat imgMatch;
    drawMatches(image1, keypointsA, image2, keypointsB, matches, imgMatch);

    imshow("matches", imgMatch);
    waitKey(0);

    return 0;
} 
```

这是一个简单的应用程序来匹配两个图像中的点...我已经使用 Orb 来检测关键点和 FREAK 作为这些关键点上的描述符...然后 brutforcematching 来检测两个图像中的对应点...我已经获得了前 30 分最好的匹配...希望这对您有所帮助...

# java - 如何获得一种 RESTeasy 方法来正确使用 UTF-8 编码的 application/x-www-form-urlencoded？

> ID：12491023
> 
> 赞同：2
> 
> 时间：2012-09-19T08:30:06.157
> 
> 标签：java, encoding, utf-8, resteasy

我在用

```
curl --data-binary "content=abcdeöäüabcde" http://myserver.com/application/api -H "Content-Type: application/x-www-form-urlencoded; encoding=utf-8" 
```

形成数据到`POST`我的网络服务器。

在服务器端，我想解码内容：

```
@POST
@Path("/api")
@Consumes("application/x-www-form-urlencoded")
public void createNote(@FormParam("content") String content){
    System.out.println(content);
} 
```

结果是`abcde???abcde`

有谁知道我如何告诉这个方法将表单参数作为 UTF-8 使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:47:02.663

尝试：

```
byte[] encoded = content.getBytes("UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:54:34.073

似乎 cURL 根本无法处理 POST 请求中的 UTF-8 编码字符串。将字符串转换为`latin1`解决我的问题。

# session - 获取会话过期时间

> ID：12491024
> 
> 赞同：1
> 
> 时间：2012-09-19T08:30:13.860
> 
> 标签：session, cakephp, session-timeout

如何`Session`在控制器中获取实际超时或其到期时间？

我试过了`CakeSession::$sessionTime`，但它返回了`CakeSession::$time`，并且。`CakeSession::$cookieLifeTime``FALSE``FALSE``NULL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:46:55.500

要获取会话超时，请使用以下代码

```
Configure::read('Session.timeout'); 
```

# sql-server - 聚集索引和分布式数据库

> ID：12491025
> 
> 赞同：2
> 
> 时间：2012-09-19T08:30:20.223
> 
> 标签：sql-server, azure, indexing, azure-sql-database

我有一个将由多个客户端（本地安装）使用的数据库，然后计划将数据复制到 Azure 以允许全局报告等。

数据库将使用 GUID 作为它的主键。

我应该为表上的聚集索引使用什么，或者在将数据添加到 Azure 时这无关紧要？我真的需要聚集索引吗？Azure 将拥有数据库的单个副本，其中包含所有客户端数据（如果有影响的话）。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:02:42.400

尽管您可以在 SQL Server 中创建（并在其中包含数据）没有聚集索引的表，但在 Windows Azure SQL 数据库（WASD / SQL Azure）中是不允许的。虽然您可以在 WASD 中将没有聚集索引的表作为定义，但不允许对这样的表执行 DML 语句，即您将无法对没有聚集索引的 WASD 中的表执行 INSTERT/UPDATE/DELETE 语句。因此，如果数据有任何机会进入云，您应该有一个聚集索引。有关详细信息，请查看指南中的[聚簇索引要求](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx#cir)和 Windows Azure SQL 数据库的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:29:48.637

这里的一些建议是不正确的。

1.  SQL Azure 上不允许使用 NEWSEQUENTIALID()。
2.  在 SQL Azure 中，绝对需要聚集索引。您可以创建没有表的表，但在添加聚集索引之前，您将无法向其中添加数据。

在 Azure 中，聚集索引用于其后端复制。参考：http: [//blogs.msdn.com/b/sqlazure/archive/2010/05/12/10011257.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/12/10011257.aspx)

我认为最好的办法是使用带有 Identity 元素的列作为聚集索引，以及 guid 列上的非聚集索引。我遇到了同样的问题，经过大量研究，这是我最终想出的解决方案。汇总起来有点麻烦，尤其是如果您已经在 Azure 上拥有生产数据，但它似乎可以解决所有问题。

我觉得使用 NEWSEQUENTIALID 是最简单的，但这不是 Azure 上的选项。

# vb.net - 在设计时运行的控件、属性、事件和计时器

> ID：12491032
> 
> 赞同：2
> 
> 时间：2012-09-19T08:30:55.823
> 
> 标签：vb.net, events, properties, custom-controls, design-time

我在 vb.net 中使用了一些自定义控件，其中我有一个布尔属性，每当它发生变化时，如果它的值为 false，它就会启动一个计时器，如果它是 true，它就会停止。

如果计时器运行了几秒钟，它会引发一个消息框，警告正在发生的问题。

问题是这个消息框即使在设计时也会显示。正如我所追踪的，当控件在设计时加载到 winform 中时，该属性的默认值为 false，它似乎启动了计时器，当它结束时会引发消息框，每当我打开项目或重建它时都会发生这种情况。

我不明白为什么这种行为，因为这应该只在运行时发生，但这让我发疯，我尝试在设置器中的属性更改并创建“onpropertychanged”事件时直接启动计时器，但这仍然发生在设计中时间。

任何人都知道如何摆脱这种情况或如何解决它以避免这种情况发生，当程序甚至没有运行时，事情就会发生，这真的很令人不安。

提前致谢。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:00:57.837

常用的方法是使用[`DesignMode`](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx)控件的属性。

> 如果组件处于设计模式，则为 true；否则为假。

因此，在您的财产中，在启动计时器之前，首先检查是否`DesignMode`为`False`.

# django - 为每个请求在 apache 下为 django 重新启动守护进程

> ID：12491039
> 
> 赞同：0
> 
> 时间：2012-09-19T08:31:20.363
> 
> 标签：django, wsgi

我有许多 django 安装，它们只能在一个 URL 下运行。所以我有一个像

1.  Django 安装 1
2.  Django 安装 2

3.  Django 安装 N

在我的根目录下。

现在从 URL“www.mysite.com/installation1”我选择子部分“installation1”并将 os.environ['DJANGO_SETTINGS_MODULE'] 设置为“installation.settings”并让请求得到处理。现在对于请求“www.mysite.com/installation2”，我必须这样做。但是，由于 django 在内部缓存站点对象、AppCache 等，我必须在每次请求之前重新启动 wsgi 进程，以便清除 django 的内部缓存。（我知道性能不会很好，但我并不担心）。为了实现上述场景，我实现了以下解决方案：

1.  在 httpd.conf 中作为 WSGIDaemonProcess django processes=5 threads=1
2.  在 django.core.handlers.wsgi 中，我在 def " **call** "中做了以下更改

    ```
    if environ['mod_wsgi.process_group'] != '':
        import signal, os
        print 'Sending the signal to kill the wsgi process'
        os.kill(os.getpid(), signal.SIGINT)
    return response 
    ```

我的假设是，在发送响应后，每个请求都会杀死守护进程。我想确认这个假设，即我的进程只会在我的响应发送后才会被杀死。

还有另一种方法可以解决这个问题

谢谢

编辑：在建议将 MaxRequestsPerChild 设置为 1 之后，我对 httpd.conf 进行了以下更改

KeepAlive Off
Listen 12021
MaxSpareThreads 1
MinSpareThreads 1
MaxRequestsPerChild 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 1
WSGIDaemonProcess django processes=5 线程=1

但是我的进程并没有在每次请求时重新启动。一旦进程启动，它就会继续处理请求。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:39:52.997

这应该可以使用[http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild)中所述的 apache 指令`MaxRequestsForChild`到**1**

然而，它对于每个进程守护进程都是全局的。

**更新：**

或者您可以`maximum-requests`在[http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines中检查 WSGIDaemonProcess 中的选项](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:40:57.360

不要这样做。WSGI 进程的持续时间比单个请求长是有原因的——你说你不担心性能，但这仍然没有理由这样做。我不知道你为什么认为你需要 - 很多人在一台服务器上运行多个 Django 站点，但没有人觉得需要在每次请求后终止进程。

相反，您需要确保每个站点在其自己的 WSGI 进程中运行。请参阅 mod_wsgi 文档以了解如何执行此操作：[应用程序组](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines#Defining_Application_Groups)似乎是一个不错的起点。

# spring - Spring：不调用Bean init方法，其属性不取值

> ID：12491042
> 
> 赞同：1
> 
> 时间：2012-09-19T08:31:34.280
> 
> 标签：spring, inversion-of-control

我有两个相似的豆子。它们被设置为在`ScheduledTimerTask`.

但是一个工作正常，另一个不行！以下是这两种配置：

```
<!--  Clear Orders By Sessions -->
<bean id="clearExpiredSessionOrdersTask" class="com.datx.timers.ClearExpiredSessionOrdersTask" autowire="byName">
    <property name="period" value="00:02:10"/>
</bean>

<bean id="clearExpiredSessionOrdersTaskInvoker"
    class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
    <property name="targetObject" ref="clearExpiredSessionOrdersTask" />
    <property name="targetMethod" value="doTask" />
</bean>

<bean id="clearExpiredSessionOrdersTaskTimer" class="org.springframework.scheduling.timer.ScheduledTimerTask">
    <property name="timerTask" ref="clearExpiredSessionOrdersTaskInvoker" />
    <property name="delay" value="1000" /><!-- In miliseconds -->
    <property name="period" value="130000" /><!-- In miliseconds -->
</bean>
<!--  Clear Orders By Sessions --> 
```

这是一个正在工作的。我的班级`com.datx.timers.ClearExpiredSessionOrdersTask`排在第一排。

另一个bean是这样设置的：

```
<!-- DocumentScheduleTask -->

<bean id="documentSchaduleTask" class="com.datx.timers.DocumentSchaduleTask" autowire="byName" init-method="init">
     <property name="period" value="00:02:10"/>
</bean>

<bean id="documentSchaduleTaskInvoker"
    class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
    <property name="targetObject" ref ="documentSchaduleTask" />
    <property name="targetMethod" value="doTask" />
</bean>

<bean id="documentSchaduleTaskTimer" class="org.springframework.scheduling.timer.ScheduledTimerTask">
    <property name="timerTask" ref="documentSchaduleTaskInvoker" />
    <property name="delay" value="1000" /><!-- In miliseconds -->
    <property name="period" value="130000" /><!-- In miliseconds -->
</bean>

<!-- DocumentScheduleTask --> 
```

你看到相似之处了吗？第一行也是我的课。

这是我的`DocumentScheduleTask`课：

```
public class DocumentSchaduleTask{
    private String period;
    public init(){
       System.out.println("Test");
    }
    public void doTask(){
        //This method is called at a specific time
    }

    public void setPeriod(String period){
        this.period = period;
    }
    public String getPeriod(){
        return this.period;
    }
} 
```

这些配置的其余部分是相同的。但在第二个中，`period`财产没有价值。并且它的`init`方法没有被调用。这些意味着什么？

为什么会造成这种情况？我应该去哪里寻找？你有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:17:13.007

我对这种差异的一个担忧是`init`第二种配置中的方法。AFAIK`init`在属性设置为 bean 后调用，因此您的方法中的代码可能会`init`清除该值。请为 DocumentSchaduleTask 添加您的 init 方法的来源。

而且，也许，当您按名称自动接线时，您的错字 Sch **a** duler 会导致一些问题。

# asp.net-mvc-3 - 使用 jquery 将模型从视图传递到控制器

> ID：12491044
> 
> 赞同：2
> 
> 时间：2012-09-19T08:31:44.513
> 
> 标签：asp.net-mvc-3, model-view-controller, jquery

我有一个看法

```
@using staffInfoDetails.Models
@model staffInfo

<link href="../../Content/myOwn.css" rel="stylesheet" type="text/css" />
@{staffInfo stf = Model; 
  }

<div id="education1">
@using (Html.BeginForm("addNewEdu","Home",FormMethod.Post))
{
    @Html.HiddenFor(x=>x.StaffId)
    <table>    
    <tr>
        <th>Country</th>
        <th>Board</th>
        <th>Level</th>
        <th>PassedYear</th>
        <th>Division</th>
    </tr>     
    <tr> 
       @Html.EditorFor(x => x.eduList)
    </tr>
    <tr>
    @*<td><input type="submit" value="create Another" id="addedu"/> </td>*@
    @*<td>@Html.ActionLink("Add New", "addNewEdu", new {  Model })</td>*@    
    </tr>
    </table>  
}
<button id="addedu">Add Another</button>
</div> 
```

我想使用 jquery 将模型 staffInfo 传递给控制器​​，如下所示

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#addedu").live('click', function (e) {
//            e.preventDefault();           
            $.ajax({
                url: "Home/addNewEdu",
                type: "Post",
                data: { model: stf },//pass model
                success: function (fk) {
                    //                    alert("value passed");
                    $("#education").html(fk);
                }

            });
        });
    });
</script> 
```

jquery 似乎只传递元素而不是整个模型，所以我如何将模型从视图传递到控制器，这样我就不必在 jquery 中编写整个参数列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:25:15.313

你可以用这个给表格ID

```
@using (Html.BeginForm("addNewEdu", "Home", FormMethod.Post, new { id = "addNewEduForm" }))
{

} 
```

然后在脚本中

```
<script type="text/javascript">
    $('#addedu').click(function(e) {
      e.preventDefault();
      if (form.valid()) { //if you use validation
        $.ajax({
          url: form.attr('action'),
          type: form.attr('method'),
          data: $("#addNewEduForm").serialize(),
       success: function(data) {
                }
        });
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:48:54.377

如我所见，您尝试使用 AJAX 提交表单？看[序列化](http://api.jquery.com/serialize/)函数。

```
$('#addedu').click(function(e) {
    e.preventDefault();
    var form = $('form');

    if (form.valid()) { //if you use validation
        $.ajax({
            url: form.attr('action'),
            type: form.attr('method'),
            data: form.serialize(),
            success: function(r) {

            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:47:23.633

`getElementById`您可以通过然后发送您的操作来获取您的值：

```
$(document).ready(function () {
    var select = document.getElementById('...');
    $.ajax({
        type: "get", 
        url: "get_street_name", 
        data: { a: select },
        success: function (data) {
            $('#result').html(data);
        }
    });
} 
```

# iphone - OpenCV.Framework 不能针对 armv7s 架构进行编译

> ID：12491046
> 
> 赞同：17
> 
> 时间：2012-09-19T08:31:52.017
> 
> 标签：iphone, ios, opencv, xcode4.5

我正在使用 openCV 框架开发 iphone 应用程序。一切正常。但是最近随着 iOS 6 和 XCode 4.5 的发布，我将我的项目迁移到 XCode 4.5 在构建时遇到了这个错误：

> ld：文件是通用的（2 个切片）但不包含一个（n）armv7s 切片：/Users/jobs/iPhone_Client/workspace/MyProject/third-party/OpenCV.framework/OpenCV for architecture armv7s clang：错误：链接器命令失败退出代码 1（使用 -v 查看调用）
> 
> ** 构建失败 **
> 
> 以下构建命令失败：Ld build/MyProject.build/Debug-iphoneos/MyProject.build/Objects-normal/armv7s/MyProject normal armv7s (1 failure)

据我了解，这是由于新的**armv7s**架构造成的。OpenCV 显然不是用 armv7s 编译的。

我该如何解决这个问题？

在哪里可以找到与 armv7s 架构兼容的新版本框架？

如果没有可用的兼容框架，有没有办法获取源代码并创建针对新架构编译的我自己的库？也许一些关于如何做的快速步骤？

**注意：**请注意，我需要**armv7s**而不是**armv7**的构建。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T23:19:11.763

这个答案建立在 n9986 给出的答案之上。正如他所建议的，我克隆了在

[https://github.com/jonmarimba/OpenCV-iOS](https://github.com/jonmarimba/OpenCV-iOS)

当我下载它时，项目内部对不同库的几个引用被破坏了，这很奇怪，但它们很容易修复。在它们被修复后，它的行为与 n9986 描述的完全一样，输出为 armv7 和 armv7s 编译的库。但是，出于我的目的，我要求将它们捆绑到一个 .framework 中，以便它们可以替代我一直在使用的旧 .framework。

以前我在[这里](http://sourceforge.net/projects/opencvlibrary/files/)下载了最新版本的 Opencv for ios并花了很多时间尝试修改他们的 cmake 文件以支持 armv7s 进行编译。jonmarimba 已经重组了 xcode 项目文件以剥离其 cmake 依赖项，这使得更改目标架构更加直观。不幸的是，他没有构建与标准 openCV 构建一样多的库。我在 jonmarimba 的 opencv_world 项目中添加了一个新目标，这是标准 openCV 版本中用于转换为框架的目标。构建完成后，我将其用作标准 openCV 版本生成的框架文件结构中的静态库的替代品。

我创建的框架可以在[这里](https://github.com/hammer498)下载。它非常适合我作为我之前的 opencv2.framework 的替代品。但是我确实注意到 jonmarimba 没有转换 opencv_videostab、opencv_stitching 或 opencv_nonfree 的目标。如果您使用其中一个库，我的框架可能对您不起作用。如果是这种情况，请告诉我，我可以尝试为您将它们设置为 xcode 项目中的目标。

**更新**

要为其他架构编译，请将包含的 xcode 项目中的目标架构更改为您喜欢的 opencv_world 库。构建完成后，找到刚刚构建的库。将 opencv_world 库重命名为 opencv2，并将在 .framework 中找到的库文件替换为 opencv_world。

**更新2**

[OpenCV 2.4.3](http://code.opencv.org/projects/opencv/wiki/ChangeLog#243)现在默认编译支持 armv7s，因此这些解决方案已经过时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T05:28:54.843

为 opencv 克隆 Xcode 项目并根据 README 更新 opencv git 子模块：

[https://github.com/jonmarimba/OpenCV-iOS](https://github.com/jonmarimba/OpenCV-iOS)

检查构建设置，确保存在 iOS6 和 armv7s。单击构建。您现在应该拥有与 armv7s 兼容的 .a 文件。我刚试过这个：

```
$ file libopencv_core.a 
libopencv_core.a: Mach-O universal binary with 2 architectures
libopencv_core.a (for architecture armv7):  current ar archive random library
libopencv_core.a (for architecture cputype (12) cpusubtype (11)):   current ar archive random library 
```

根据我目前的研究，最后一个条目是针对 armv7s 的。

**编辑：最后一个条目确实是 armv7s。我运行了 Xcode 自己的 lipo info 命令：**

```
$ xcrun -sdk iphoneos lipo -info libopencv_core.a 
Architectures in the fat file: libopencv_core.a are: armv7 armv7s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:36:35.700

您始终可以不针对 armv7s，而只针对 armv7。您的应用程序在 iPhone 5 上仍然可以正常运行，只是不会针对新指令集进行完全优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T06:25:30.470

[简单地说，我从这里](http://code.opencv.org/projects/opencv/repository)克隆了源代码并使用[本教程](http://docs.opencv.org/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)进行构建。

然后我得到了可与 armv7、armv7s 和模拟器一起使用的 opencv2.framewok。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T11:03:36.360

`-DCMAKE_OSX_ARCHITECTURES="armv6;armv7;armv7s;i386"`在为 iOS 编译 OpenCV 库/框架时传递给 cmake。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T10:04:50.273

很明显，您需要重新编译和重建库 openCV.framework 并将其定位为 armv7s。

在重建之前调整库“项目设置”和“目标设置”。祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T10:49:25.150

可能它可以用 CMake 构建它。一年前，我想为 iOS 构建一个医学库时遇到了问题。我可以用 CMake 处理这个问题。

也许这个链接可以作为一个开始。

[http://computer-vision-talks.com/2010/12/building-opencv-for-ios/](http://computer-vision-talks.com/2010/12/building-opencv-for-ios/)

祝你好运！

# asp.net - ajax 在托管网页时出错

> ID：12491049
> 
> 赞同：0
> 
> 时间：2012-09-19T08:32:12.357
> 
> 标签：asp.net, ajax, scriptmanager

我的网站在本地运行良好，但在制作时遇到了问题。

解析器错误消息：未知的服务器标记“asp:ScriptManager”。我用谷歌搜索了这个问题并找到了解决方案...

```
<pages>

<controls> <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>

</controls> </pages> 
```

我做了同样的事情，但又出错了......

解析器错误消息：无法加载文件或程序集“System.Web.Extensions，版本=1.0.61025.0，文化=中性，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我已经在 Bin 文件夹中上传了 ajaxtoolkit???? 请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:34:11.337

很可能您没有配置正确的 .net 版本。请咨询您的网络托管公司或控制面板，了解您的网站使用的 .net 版本。你也可以试试 smarterasp.net，他们也让你通过他们的控制面板设置你自己的版本。

# java - 具有多个表连接和 sum()、first() 的 HQL

> ID：12491057
> 
> 赞同：0
> 
> 时间：2012-09-19T08:32:38.170
> 
> 标签：java, hibernate, hql

塔布斯：

```
Grandpa
    GP_ID  (PK)
    NAME

Dad
    DAD_ID (PK)
    PG_ID  (FK)

Children
    C_ID   (PK)
    DAD_ID (FK)
    MONEY_AMOUNT
    MONEY_UNIT 
```

类（此处省略注释）：

```
class Grandpa
{
    Long id;
    String name;

    Double moneyAmount; // sum of Children's money amount

    String moneyUnit; // first of Children's money unit.
}

class Dad
{
    Long id;
    Grandpa grandpa;
}

class Children
{
    Long id;
    Dad dad;

    Double moneyAmount;
    String moneyUni;
} 
```

我想编写一个 hql 来获取带有 sum(grandpa.dad.children.money_amount) 和 first(grandpa.dad.children.money_unit) 的 Grandpa 对象。这是我的，但它不起作用：

```
select gp, sum(chdn.moneyAmount) as gp.moneyAmount, first(chdn.moneyUnit) as gp.moneyUnit
from Grandpa gp, Dad dad, Children chdn
where gp.id =: chdn.dad.grandpa.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:00:03.443

```
select gp.id, gp.name, sum(chdn.moneyAmount) as moneyAmount, min(chdn.moneyUnit) as gp.moneyUnit
from Children chdn, chdn.dad dad, dad.grandpa gp
groupBy gp.Id 
```

并使用 aliastobean 变压器投影到爷爷 dto

或者您将moneyAmount 和unit 实现为访问包含爸爸的子集合并将内存中的金额相加的属性，那么它将是

```
select gp from Grandpa gp join fetch gp.children dad join fetch dad.children 
```

但要小心巨大的笛卡尔积

# maven - 使用 maven 将 pom 文件签入到 SCM

> ID：12491059
> 
> 赞同：0
> 
> 时间：2012-09-19T08:32:41.973
> 
> 标签：maven, maven-release-plugin, versions, maven-scm

使用 maven 版本插件我更新了 pom 文件的版本号：

```
versions:set -DnewVersion=1.0.2-SNAPSHOT 
```

然后我在执行构建之前手动签入 pom 文件。我不认为版本插件可以自动签入文件？maven 发布插件似乎提供了使用“准备”目标签入文件的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:25:05.990

没有结果是它唯一的可怜的 mans SCM（存储一个备份，其中包含您对 pom 所做的更改，并允许您恢复到它）。

使用发布插件。

# c# - 使用 CodeDom 构建字典

> ID：12491060
> 
> 赞同：0
> 
> 时间：2012-09-19T08:32:43.267
> 
> 标签：c#, codedom

我试图找出一种方法来使用 CodeDom 构建这样的东西

```
public System.Collections.Generic.Dictionary<string, string> Attributes
{
    get
    {
        return new System.Collections.Generic.Dictionary<string, string>()
        {
            {"firstkey", "first value"},
            {"second", "second value"},
            {"third", "third value"}
        };
    }
} 
```

我确实读过这个，但它并没有真正让我到达我想要的地方， http: [//msdn.microsoft.com/en-us/library/system.codedom.codetypeparameter.aspx](http://msdn.microsoft.com/en-us/library/system.codedom.codetypeparameter.aspx)

我做了这个

```
Type myType = typeof (System.Collections.Generic.Dictionary<string, string>);
string dictionaryTypeName = myType.FullName;

CodeTypeReference dictionaryType = new CodeTypeReference(dictionaryTypeName);

var abc = new CodeVariableDeclarationStatement(
    dictionaryType, "dict2",
    new CodeObjectCreateExpression(
        dictionaryType, new CodeSnippetExpression(@"{""firstkey"", ""first value""}")
        )
    );

property.GetStatements.Add(abc); 
```

它生成这个

```
public Dictionary<object, object> Attributes
{
    get
    {
        Dictionary<string, string> dict2 = new Dictionary<string, string>({"firstkey", "first value"});
    }
} 
```

有人建造过类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:43:05.743

如果你想使用初始化而不是使用 Add 方法，你也必须使用 Snippet 方式来调用构造函数。如果您不想将类型名称写入常量字符串，这可能会更加困难。在这种情况下，您可以创建对无参数构造函数的调用，使用 CSharpCodeProvider 获取表示构造函数调用的字符串，丢弃最后的括号并连接初始化片段。代码将是这样的，并生成所需的代码：

```
 CSharpCodeProvider codeProvider = new CSharpCodeProvider();
        CodeGeneratorOptions options = new CodeGeneratorOptions();
        options.IndentString = "   ";
        options.BracingStyle = "C";

        Type myType = typeof(System.Collections.Generic.Dictionary<string, string>);
        string dictionaryTypeName = myType.FullName;

        CodeTypeReference dictionaryType = new CodeTypeReference(dictionaryTypeName);

        // here you create the CodeobjectCreateExpression in order to obtain the string with the name of the type
        StringWriter sw = new StringWriter();
        CodeObjectCreateExpression createExpr = new CodeObjectCreateExpression(dictionaryType);
        codeProvider.GenerateCodeFromExpression(createExpr, sw, options);
        string creationCode = sw.ToString();
        // throw away the final ()
        creationCode = creationCode.Substring(0, creationCode.Length - 2);
        // add initialization
        creationCode = creationCode + @"{{""firstkey"", ""first value""}, {""secondkey"", ""second value""}, {""thirdkey"", ""third value""}}";
        CodeMethodReturnStatement retVal = new CodeMethodReturnStatement(new CodeSnippetExpression(creationCode));
        property.GetStatements.Add(retVal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:47:12.307

我确实必须使用 .add 而不是将值作为参数添加到构造函数中。

```
if (type == typeof(Dictionary<string, string>))
{
    string variableName = "dict";

    CodeVariableDeclarationStatement codeVariableDeclarationStatement = new CodeVariableDeclarationStatement(new CodeTypeReference(type.FullName), variableName,
            new CodeObjectCreateExpression(type)
    );

    property.GetStatements.Add(codeVariableDeclarationStatement);
    property.GetStatements.Add(AddPropertyValues(new CodeSnippetExpression(string.Format(@"""{0}"", ""{1}""", "a", "xx xx1")), variableName));
    property.GetStatements.Add(AddPropertyValues(new CodeSnippetExpression(string.Format(@"""{0}"", ""{1}""", "b", "xx xx2")), variableName));
    property.GetStatements.Add(AddPropertyValues(new CodeSnippetExpression(string.Format(@"""{0}"", ""{1}""", "c", "xx xx3")), variableName));

    property.GetStatements.Add(new CodeMethodReturnStatement(new CodeSnippetExpression(variableName)));
}

static CodeStatement AddPropertyValues(CodeExpression exp, string variableReference)
{
    return new CodeExpressionStatement(
        new CodeMethodInvokeExpression(
            new CodeMethodReferenceExpression(
                new CodeTypeReferenceExpression(new CodeTypeReference(variableReference)),
                    "Add"),
                        new CodeExpression[]{
                            exp,
                                }));
} 
```

生成这个

```
public System.Collections.Generic.Dictionary<string, string> Attributes
{
    get
    {
        System.Collections.Generic.Dictionary<string, string> dict = new System.Collections.Generic.Dictionary<string, string>();
        dict.Add("a", "xx xx1");
        dict.Add("b", "xx xx2");
        dict.Add("c", "xx xx3");
        return dict;
    }
} 
```

很公平！

# maven-2 - Apache Maven 安装

> ID：12491061
> 
> 赞同：-2
> 
> 时间：2012-09-19T08:32:48.063
> 
> 标签：maven-2, maven-3

我在我的计算机上安装 apache maven 时遇到问题，我不知道如何解决它，任何人都可以提出一些解决问题的方法，在此先感谢

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.172s
[INFO] Finished at: Wed Sep 19 13:00:13 MSK 2012
[INFO] Final Memory: 2M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] The goal you specified requires a project to execute but there is no POM
in this directory (C:\Documents and Settings\Saken). Please verify you invoked
Maven from the correct directory. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProject
Exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:32:27.827

首先你需要设置`MAVEN_HOME`然后`set PATH=%MAVEN_HOME%\bin;%PATH%` 设置`JAVA_HOME`，`PATH=%JAVA_HOME%\bin;%PATH%` 这是 maven 配置的先决条件。

我假设你已经处理了上面的问题。

然后创建必须有 pom.xml 的 maven 项目并进行相应的配置。转到 pom.xml 所在的目录并运行所需的配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:37:30.563

Maven 需要`pom.xml`工作目录中的配置文件。运行`cd c:/path/to/your/project/folder`和运行后`mvn <needed goals>`

# c# - html 电子邮件中的撇号字符未显示

> ID：12491068
> 
> 赞同：1
> 
> 时间：2012-09-19T08:33:20.957
> 
> 标签：c#, html-email, html-encode, system.net.mail

我正在使用 System.Net.Mail，并且正在将 html 读入电子邮件正文。

不幸的是，撇号字符`'`显示为带有黑色背景的问号。

我试图用 html 替换撇号，`&apos;`但这仍然显示带有黑色背景的问号。其他 Html 标签（h1、p 等）工作正常。

我现在必须有一个非常明显的答案，但我似乎找不到它。谢谢你的帮助。

更新

看来是 System.IO.StreamReader 导致了我的问题。

```
using (StreamReader reader = new StreamReader("/Email/Welcome.htm"))
{
     body = reader.ReadToEnd(); 
     //body string now has odd question mark character instead of apostrophe.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:06:12.047

如果您知道文件的[编码](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)，则需要将其传递给[`StreamReader`](http://msdn.microsoft.com/en-us/library/x8xxf0x5.aspx)初始化：

```
using (StreamReader reader = new StreamReader("/Email/Welcome.htm", "Windows-1252"))
{
     body = reader.ReadToEnd();
     // If the encoding is correct you'll now see ´ rather than �
     // Which, by the way is the unicode replacement character
     // See: http://www.fileformat.info/info/unicode/char/fffd/index.htm
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:56:40.933

您需要将此文件保存为 unicode utf-8 格式以使其正确。

# knockout.js - 我可以在淘汰验证中手动添加错误消息吗？

> ID：12491069
> 
> 赞同：10
> 
> 时间：2012-09-19T08:33:21.477
> 
> 标签：knockout.js, asp.net-mvc-4, knockout-validation

我正在使用**MVC 4**`knockout.js`并进行淘汰验证。我可以通过敲除验证很好地执行客户端验证。但是我需要确保发布到我的控制器的任何视图模型都是有效的。因此，我手动验证了我的视图模型服务器端并返回序列化为 JSON 的模型状态（一位同事编写了一个简单的函数来执行此操作）。我的问题是我想了解如何使用淘汰验证来使用 JSON 序列化模型状态来输出错误。

 **那么有没有办法在淘汰验证中手动添加错误和消息？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-26T17:50:41.257

最新的淘汰验证版本添加了以下内容：

```
//manually set error state
observable.setError = function (error) {
    observable.error = error;
    observable.__valid__(false);
};

//manually clear error state
observable.clearError = function () {
    observable.error = null;
    observable.__valid__(true);
} 
```

因此您可以使用这些手动将错误添加到您的 observables，但就像 graeme 链接的另一个问题一样，没有内置的方法来映射它们。

我之前所做的只是在表单下方/上方显示模型状态错误以显示服务器端验证错误，并在输入类型错误旁边让 ko 验证处理所有客户端。比提出复杂的映射方案要容易得多，尤其是当您有复杂的表单数据时。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-20T23:10:54.003

除了凯文所说的，我发现我需要打电话`isModified`才能让信息真正显示出来。我认为这是因为我更改了消息出现时的一些默认设置。

```
observable.setError('Your password is incorrect');
observable.isModified(true); 
```**

# android - 为什么我的 AsyncTask 没有完成？

> ID：12491071
> 
> 赞同：0
> 
> 时间：2012-09-19T08:33:27.160
> 
> 标签：android, android-asynctask

我在我的 MapActivity 中创建了一个异步任务，它是：

```
class ReadLocations extends AsyncTask<String, String, String> {

    GeoPoint apoint1;
    GeoPoint apoint2;
    ArrayList<GeoPoint> Locations = new ArrayList<GeoPoint>(); 

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        pDialog = new ProgressDialog(MyMapLocationActivity.this);
        pDialog.setMessage("DONE");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();

    }

    protected String doInBackground(String... args) {

        return null; 
    }

    protected void onPostExecute() {
        // dismiss the dialog once done
        pDialog.dismiss();

    }

} 
```

我正在尝试以这种方式执行它：

```
public class MyMapLocationActivity extends MapActivity {

private MapView mapView;
private ProgressDialog pDialog;  
private ProgressDialog eDialog;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

ReadLocations Read = new ReadLocations();
Read.execute();

 ... 
```

我的控制对话框永远不会消失 - 似乎我的 onPostExecute 方法没有被调用 - 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:35:56.977

Becoz，您的 AsyncTask`onPostExecute()`没有参数。这是返回的`doInBackground()`。

**所以正确覆盖这两种方法。**

就像是，

```
@Override
protected String doInBackground(String... args) {  // Return type of same as argument of onPostExecute() 
    return null; 
}

@Override
protected void onPostExecute(String result) { // Add String argument in onPostExecute()
    // dismiss the dialog once done
    pDialog.dismiss();
} 
```

的执行尽可能`doInBackground()`快，因为其中没有任何其他工作实现。只有一个回报声明..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:36:55.673

您没有正确覆盖 onPostExecute，缺少结果参数

它应该是这样的

```
@Override
protected void onPostExecute(String result) {
    // dismiss the dialog once done
    pDialog.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:22:57.170

在 Eclipse 中，正确覆盖或实现超类方法的最佳和最简单的方法是：

1.  将光标聚焦在您的`AsyncTask`身体上。然后`mouse right click`--> `source`--> `override/implement methods`。
2.  选择必要的方法。
3.  单击确定。方法将自动添加到您的类中。

您也可以通过这种方式生成构造函数、getter/setter 等。

# android - 缩小 放大位图或画布

> ID：12491075
> 
> 赞同：0
> 
> 时间：2012-09-19T08:33:37.410
> 
> 标签：android

我是 Android 新手，我想在画布或位图上进行缩小和放大。我制作了绘图应用程序，然后我想缩小和放大我绘制的图片。任何人都可以建议我吗？

我想放大：

```
private Bitmap mBitmap;
private Canvas mCanvas; 
```

如何制作“图层绘图”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:02:41.723

使用画布 API

```
scale(float sx, float sy)
    Preconcat the current matrix with the specified scale.

drawBitmap(int[] colors, int offset, int stride, float x, float y, int width, int height, boolean hasAlpha, Paint paint)
    Treat the specified array of colors as a bitmap, and draw it. 
```

# lucene - 获取 ngram 频率时，Lucene 输出中带有停用词的下划线

> ID：12491077
> 
> 赞同：4
> 
> 时间：2012-09-19T08:33:39.710
> 
> 标签：lucene, n-gram

我目前正在为用户提供在过滤 ngram 频率的文本正文时是否包含停用词的选项。通常，这样做如下：

```
snowballAnalyzer = new SnowballAnalyzer(Version.LUCENE_30, "English", stopWords);               
shingleAnalyzer = new ShingleAnalyzerWrapper(snowballAnalyzer, this.getnGramLength()); 
```

stopWords 设置为要包含在 ngram 中或从中删除的完整单词列表。this.getnGramLength()); 仅包含当前 ngram 长度，最多为三个。

如果我在为 trigrams 过滤文本“卫星肯定掉到地球”中使用停用词，则输出为：

```
No=1, Key=to, Freq=1
No=2, Key=definitely, Freq=1
No=3, Key=falling to earth, Freq=1
No=4, Key=satellite, Freq=1
No=5, Key=is, Freq=1
No=6, Key=definitely falling to, Freq=1
No=7, Key=definitely falling, Freq=1
No=8, Key=falling, Freq=1
No=9, Key=to earth, Freq=1
No=10, Key=satellite is, Freq=1
No=11, Key=is definitely, Freq=1
No=12, Key=falling to, Freq=1
No=13, Key=is definitely falling, Freq=1
No=14, Key=earth, Freq=1
No=15, Key=satellite is definitely, Freq=1 
```

但是，如果我不对三元组使用停用词，则输出是这样的：

```
No=1, Key=satellite, Freq=1
No=2, Key=falling _, Freq=1
No=3, Key=satellite _ _, Freq=1
No=4, Key=_ earth, Freq=1
No=5, Key=falling, Freq=1
No=6, Key=satellite _, Freq=1
No=7, Key=_ _, Freq=1
No=8, Key=_ falling _, Freq=1
No=9, Key=falling _ earth, Freq=1
No=10, Key=_, Freq=3
No=11, Key=earth, Freq=1
No=12, Key=_ _ falling, Freq=1
No=13, Key=_ falling, Freq=1 
```

为什么我看到下划线？我会想到看到简单的一元组，“卫星坠落”，“坠落地球”和“卫星坠落地球”？绝对在我使用的停用词集中。

我可以用下划线过滤掉结果，但是......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:01:06.970

下划线表示“缺失的停用词/s”。为避免这种行为，您应该将其设置`enablePositionIncrements`为`false`但`SnowballAnalyzer`（现在在 4.0.0-Beta 中已弃用）不允许您这样做。

一种解决方案是首先使用没有停用词的 StandardAnalyzer，然后使用 、 和`StopFilter`装饰`SnowballFilter`输出`ShingleFilter`。Lucene 4.0.0-Beta 中的二元语法示例：

```
Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_40, CharArraySet.EMPTY_SET);
TokenStream tokenStream = analyzer.tokenStream("content", new StringReader(input));
StopFilter stopFilter = new StopFilter(Version.LUCENE_40, tokenStream, stopWords);
stopFilter.setEnablePositionIncrements(false);
SnowballFilter snowballFilter = new SnowballFilter(stopFilter, "English");
ShingleFilter bigramShingleFilter = new ShingleFilter(snowballFilter, 2, 2); 
```

希望这能让你走上正轨！

**编辑**

Lucene v4.4+ 不再可能，仍在寻找一个不错的替代方案......

# magento - 在 magento 代码中从前端上传自定义图像不起作用

> ID：12491085
> 
> 赞同：2
> 
> 时间：2012-09-19T08:34:00.583
> 
> 标签：magento

我在magento的自定义模块中上传图像时遇到问题..

我为此目的使用了核心php ccoding，但magento没有上传图像..

我使用相同的代码在本地 xampp 中上传文件。但该代码在我的服务器上不起作用..

我也使用此代码，但它也不起作用....

```
$path = Mage::getBaseDir().DS.'customer_documents'.DS; //desitnation directory
  $fname = $_FILES['docname']['name']; //file name
  $uploader = new Varien_File_Uploader('docname'); //load class
  $uploader->setAllowedExtensions(array('doc','pdf','txt','docx')); //Allowed extension for file
  $uploader->setAllowCreateFolders(true); //for creating the directory if not exists
  $uploader->setAllowRenameFiles(false); //if true, uploaded file's name will be changed, if file with the same name already exists directory.
  $uploader->setFilesDispersion(false);
  $uploader->save($path,$fname); //save the file on the specified path 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:03:12.853

我在我的代码中添加了这一行并且它正在工作..

```
<?php require_once ("lib/Varien/File/Uploader.php");?> 
```

在此之后编写此代码

```
<?php
$path = Mage::getBaseDir().DS.'customer_documents'.DS; //desitnation directory
  $fname = $_FILES['docname']['name']; //file name
  $uploader = new Varien_File_Uploader('docname'); //load class
  $uploader->setAllowedExtensions(array('doc','pdf','txt','docx')); //Allowed extension for file
  $uploader->setAllowCreateFolders(true); //for creating the directory if not exists
  $uploader->setAllowRenameFiles(false); //if true, uploaded file's name will be changed, if file with the same name already exists directory.
  $uploader->setFilesDispersion(false);
  $uploader->save($path,$fname); //save the file on the specified path
?> 
```

# sql - SQL Server 查询以对连续日期进行分组

> ID：12491087
> 
> 赞同：7
> 
> 时间：2012-09-19T08:34:06.277
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个名为 Absence Details 的表，我想对连续日期进行分组。这里是数据

```
EID        AbsenceType  AbsenceStartDate               AbsenceEndDate
769     Holiday     2012-06-25  00:00:00.000            2012-06-25 23:59:59.000
769     Holiday     2012-06-26  00:00:00.000            2012-06-26 23:59:59.000
769     Holiday     2012-09-03  00:00:00.000            2012-09-03 23:59:59.000
769     Holiday     2012-09-04  00:00:00.000            2012-09-04 23:59:59.000
769     Holiday     2012-09-05  00:00:00.000            2012-09-05 23:59:59.000
769     Holiday     2012-09-06  00:00:00.000            2012-09-06 23:59:59.000
769     Holiday     2012-09-07  00:00:00.000            2012-09-07 23:59:59.000 
```

我想要得到的结果是

```
EID     AbsenceType AbsenceStartDate          AbsenceEndDate
769     Holiday     2012-06-25  00:00:00.000         2012-06-26 23:59:59.000
769     Holiday     2012-09-03  00:00:00.000         2012-09-07 23:59:59.000 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:01:53.043

我已经简化了您的方案以隔离主要问题。让我们假设这个表有间隙：

```
with ns as (
select 1 as n union
select 2 as n union
select 3 as n union
select 8 as n union    --gap
select 9 as n )
select * 
into #ns
from ns; 
```

现在，您期望的结果是：

```
ini fi 
--- -- 
1   3  
8   9 
```

为了得到这个结果，我以这种方式处理数据：首先，我创建两个带有开始和结束时间段的视图，其次，我加入两个视图以获得最终结果。请注意，我将表与它自己连接以定位开始和结束时间段：

```
with 
inis as                                     -- identifying start periods
(
   select n1.n
   from #ns n1
   left outer join #ns n2 
       on n1.n = n2.n + 1
   where n2.n is null
   ),
fis as                                      -- identifying ends periods
( 
   select n1.n 
   from #ns n1
   left outer join #ns n2 
       on n1.n = n2.n - 1
   where n2.n is null
   )  
select inis.n as ini, min( fis.n ) as fi    -- joining starts and ends
from inis 
inner join fis 
  on inis.n <= fis.n
group by inis.n
; 
```

您可以将此技术转移到您的数据和数据类型。如果您在翻译查询时遇到任何问题，请随时提出。

[检查查询和结果。](https://data.stackexchange.com/stackoverflow/query/80479?opt.textResults=true)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T10:45:23.367

这是对我有用的解决方案。

```
SELECT EID, AbsenceType, MIN(AbsenceStartDate) AS AbsenceStartDate, MAX(AbsenceEndDate) AS AbsenceEndDate
FROM (SELECT EID, AbsenceType, AbsenceStartDate, AbsenceEndDate,
      DATEADD(dd, - ROW_NUMBER() OVER (PARTITION BY EID, AbsenceType ORDER BY EID,AbsenceStartDate), AbsenceStartDate)
      FROM AbsenceDetails
      GROUP BY EID,AbsenceType,AbsenceStartDate,AbsenceEndDate
      ) a(EID, AbsenceType, AbsenceStartDate, AbsenceEndDate, Grp)
GROUP BY EID, AbsenceType, Grp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:53:45.083

我会这样做：

1.  确定缺勤日期的顺序列表。

    ```
    SELECT
        ad1.EID, ad1.StartDate, ad2.EndDate
    FROM 
        AbsenceDetails ad1
        JOIN AbsenceDetails ad2
        ON ad1.EID = ad2.EID
    WHERE
        DATEDIFF(ss, ad1.EndDate, ad2.StartDate) = 1 
    ```

    结果如下：

    ```
    769 2012-06-25 00:00:00.000 2012-06-26 23:59:59.000
    769 2012-09-03 00:00:00.000 2012-09-04 23:59:59.000
    769 2012-09-04 00:00:00.000 2012-09-05 23:59:59.000
    769 2012-09-05 00:00:00.000 2012-09-06 23:59:59.000
    769 2012-09-06 00:00:00.000 2012-09-07 23:59:59.000 
    ```

2.  遍历列表并确定每个拉伸的开始和结束持续时间。这最好在应用层完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:52:47.547

如果我正确理解了您的问题，您希望在记录中找到连续的时间间隔。
主要问题将是确定实际构成连续时间间隔的内容：
如果您正在查看工作中的缺勤而不是任何序列

```
date1.09:00 to date1.18:00  
date2.09:00 to date2.18:00 
```

之后`date2`的**下一个工作日**`date1`可以认为是连续的 。

在您的情况下，它相对容易，但您将无法在单个查询中完成。至少我现在想不出办法。

PS“podiluska”建议的“Islands and Gaps”算法将帮助您在单个查询/存储过程中编写它。

# c++ - 谁应该释放内存？

> ID：12491090
> 
> 赞同：-1
> 
> 时间：2012-09-19T08:34:19.157
> 
> 标签：c++, memory, memory-management

> **可能重复：**
> [返回指针后删除堆](https://stackoverflow.com/questions/12490284/delete-heap-after-returning-pointer)

我有一个带有成员函数的类：

```
char* toChar(); 
```

成员函数分配内存并返回指向该内存的指针......

可以说我会这样使用它：

```
int main() {
    MyClass mc = new MyClass();
    char* str = mc.toChar();

    return 0; 
} 
```

我应该在哪里释放内存？在类的析构函数中或在这样的程序中：

```
int main() {
    MyClass * mc = new MyClass();
    char* str = mc.toChar();
    // tostuff with str
    delete mc;
    delete[] str; 

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:38:45.827

如果您希望它可重用（也就是说，您可以多次调用它并且它可能返回不同的值，可能是因为类已更改），那么您应该在 main 中释放它。否则由你决定。

但一般来说，你不应该使用纯字符串。您应该将其更改为使用`std::string`，然后按值返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:45:01.180

成员函数应该返回一个管理内存的对象。通常是`std::unique_ptr`，但对于`char`data`std::string`可能更合适：

```
class MyClass {
    ...
    std::string toChar();
};

int main() {
    MyClass mc;
    std::string str = mc.toChar();
} 
```

请注意，通过创建`mc`一个托管对象（这里它直接在堆栈上进行管理；`unique_ptr`也可以工作，但在很大程度上是不必要的），就不需要`delete`出现在代码中的任何地方。一般来说，除非您正在编写自己的容器，`delete`否则不应出现在您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:07:26.637

问题是谁是 str 所指向的那块内存的“所有者”。由于 mc 返回一个 char* 而不是 const char*，它允许客户端 (str) 修改字符串的值，所以我想说 str 也应该因此负责释放内存。如果 mc 释放内存但 str 仍想访问它会发生什么？该过程将被终止。

# java - 从 Java 中的集合中检索较晚的日期

> ID：12491091
> 
> 赞同：0
> 
> 时间：2012-09-19T08:34:19.490
> 
> 标签：java, sql, collections

我正在从我的数据库中检索一些日期记录，结果如下：

```
Date
09/18/2012 1:34:34 AM
09/8/2012 8:15:34 AM
09/8/2012 12:02:11 AM
08/30/2012 8:47:02 PM
08/29/2012 11:44:00 PM 
```

从上面的列表中，有 2 个日期为**09/8/2012**，我想选择 09/8/2012 8:15:34 AM（后一个），因此我的结果将如下所示：

```
Date
09/18/2012 1:34:34 AM
09/8/2012 8:15:34 AM
08/30/2012 8:47:02 PM
08/29/2012 11:44:00 PM 
```

我该怎么做呢？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:37:16.800

使用`min()`方法来自`Collections`

```
Collections.min(yourCollectionOfDate); 
```

`java.sql.Date`并且`java.util.Date`已经实现了比较器，因此您可以通过此方法获得较晚的日期

如果你想要自定义行为，那么你可以传递一个`Comparator`in`min()`

你也可以在数据库端处理这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:39:24.697

为什么不直接打开您的查询呢？

```
SELECT MAX(`DATE`) DateList
FROM tableName
GROUP BY DATE(`DATE`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:54:55.090

您可以使用 SortedSet 将所有日期从低到高排列。
您可以使用 TreeSet 的 iterator() 或 descendingIterator() 方法。
这是一个例子

```
 TreeSet<Date> set = new TreeSet<Date>();
    DateFormat df = new SimpleDateFormat("dd.MM.yyyy HH:mm");
    set.add(df.parse("01.01.2000 12:00"));
    set.add(df.parse("01.01.2000 09:00"));
    set.add(df.parse("01.01.2000 18:00"));

    System.out.println("First date: " + set.first());
    System.out.println("Last date: " + set.last());

    System.out.println("From low to high:");
    for (Date date : set)
        System.out.println(date);

    System.out.println("From high to low:");
    Iterator<Date> backIterator = set.descendingIterator();
    while (backIterator.hasNext())
        System.out.println(backIterator.next()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:42:34.397

```
select max(date_column)
from table
group by trunc(date_column)
order by 1 
```

# iphone - Sencha Touch 2 和浮动、可弯曲的面板

> ID：12491100
> 
> 赞同：1
> 
> 时间：2012-09-19T08:34:55.927
> 
> 标签：iphone, sencha-touch, panel, floating

我在使用 Sencha Touch 2 和 vbox flexing 时遇到问题。这是我的面板代码（为简单起见进行了修改，真正的面板要复杂得多，但归根结底就是这样）：

```
Ext.define('risbergska2.view.Test', {
extend: 'Ext.Panel',
xtype: 'test',

config: {
    title: 'Test',
    iconCls: 'home',

    items: [
        {
            xtype: 'container',
            layout: 'vbox',
            items: [
                {
                    xtype: 'container',
                    flex: 2,
                    style: 'background-color: #f90;'
                },
                {
                    xtype: 'container',
                    flex: 1,
                    style: 'background-color: #9f0;'
                },
                {
                    xtype: 'container',
                    flex: 1,
                    style: 'background-color: #0f9;'
                },
                {
                    xtype: 'container',
                    flex: 2,
                    style: 'background-color: #90f;'
                }
            ]
        }
    ]
} 
```

})

这是我的 Main.js：

```
Ext.define("risbergska2.view.Main", {
extend: 'Ext.tab.Panel',
requires: [
    'Ext.TitleBar',
    'Ext.Video'
],
config: {
    tabBarPosition: 'bottom',

    items: [
        {
            xtype: 'homeloggedinview'
        },
        {
            xtype: 'myview'
        },
        {
            xtype: 'programview'
        },
        {
            xtype: 'socialview'
        },
        {
            xtype: 'aboutview'
        },
        {
            xtype: 'test'
        }
    ]
} 
```

});

我的 app.js：

```
Ext.application({
name: 'risbergska2',

requires: [
    'Ext.MessageBox'
],

views: ['Main', 'HomeLoggedIn', 'My', 'Program', 'Social', 'About', 'Test'],

launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();

    // Initialize the main view
    Ext.Viewport.add(Ext.create('risbergska2.view.Main'));
},

onUpdated: function() {
    Ext.Msg.confirm(
        "Application Update",
        "This application has just successfully been updated to the latest version. Reload now?",
        function(buttonId) {
            if (buttonId === 'yes') {
                window.location.reload();
            }
        }
    );
} 
```

});

如果我运行此代码并转到测试面板，则没有任何显示。我希望它显示（在测试用例中）四个不同的容器，其中有四种不同的颜色，顶部的容器和底部的容器是中间容器垂直尺寸的两倍。

这不是得到那个结果的方法吗？我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:13:01.247

设置布局：“适合”risbergska2.view.Test

```
Ext.define('risbergska2.view.Test', {
extend: 'Ext.Panel',
xtype: 'test',

config: {
    title: 'Test',
    iconCls: 'home',
    layout : 'fit',
    items: [
        {
            xtype: 'container',
            layout: 'vbox',
            items: [ 
```

# javascript - javascript从for循环创建数组

> ID：12491101
> 
> 赞同：41
> 
> 时间：2012-09-19T08:35:01.960
> 
> 标签：javascript, arrays, for-loop

我有一个存储到两个变量中的年份范围。我想在该范围内创建一个年份数组。

就像是：

```
var yearStart = 2000;
var yearEnd = 2040;

var arr = [];

for (var i = yearStart; i < yearEnd; i++) {

     var obj = {
        ... 
     };

      arr.push(obj);
} 
```

我应该在 obj 里面放什么？

我想生成的数组如下：

```
arr = [2000, 2001, 2003, ... 2039, 2040] 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-19T08:59:47.447

如果您可以丢失 yearStart 值，则更短：

```
var yearStart = 2000;
var yearEnd = 2040;

var arr = [];

while(yearStart < yearEnd+1){
  arr.push(yearStart++);
} 
```

[更新：如果您可以使用 ES6 语法，您可以按照此处](https://stackoverflow.com/questions/30650961/functional-way-to-iterate-over-range-es6-7#30651275)建议的方式进行操作：

```
let yearStart = 2000;
let yearEnd = 2040;
let years = Array(yearEnd-yearStart+1)
    .fill()
    .map(() => yearStart++); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-19T08:36:25.560

你需要推`i`

```
var yearStart = 2000;
var yearEnd = 2040;

var arr = [];

for (var i = yearStart; i < yearEnd+1; i++) {
    arr.push(i);
} 
```

然后，您的结果数组将是：

> `arr = [2000, 2001, 2003, ... 2039, 2040]`

希望这可以帮助

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-19T08:37:36.523

```
var yearStart = 2000;
var yearEnd = 2040;

var arr = [];

for (var i = yearStart; i <= yearEnd; i++) {

     arr.push(i);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T08:38:36.107

删除`obj`并在您的 for 循环中执行此操作：

```
arr.push(i); 
```

此外，`i < yearEnd`条件不包括最后一年，因此将其更改为`i <= yearEnd`。

# html - schema.org SiteNavigationElement 的正确用法是什么？

> ID：12491102
> 
> 赞同：44
> 
> 时间：2012-09-19T08:35:03.947
> 
> 标签：html, seo, schema.org

在搜索引擎优化方面...

最好将方案放在包含所有链接的父级上吗？

```
<nav itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
    <a href="#">Link 3</a>
</nav> 
```

...或者每个链接都应该被视为它自己的元素？

```
<nav>
    <span itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
        <a itemprop="url" href="#">
            <span itemprop="name">Link 1</span>
        </a>
    </span>
    <span itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
        <a itemprop="url" href="#">
            <span itemprop="name">Link 2</span>
        </a>
    </span>
    <span itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
        <a itemprop="url" href="#">
            <span itemprop="name">Link 3</span>
        </a>
    </span>
</nav> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-03-02T21:40:08.280

如果`SiteNavigationElement`用于整个导航（即导航链接列表），那么您的第一个示例是正确的。

如果`SiteNavigationElement`用于单个导航条目（即导航链接列表中的链接），那么您的第二个示例是正确的。

我认为 Schema.org 并没有明确定义是指哪个变体，因为他们只说：

> 页面的导航元素。

但是，父类型[`WebPageElement`](http://www.schema.org/WebPageElement)定义为：

> 网页元素，例如表格或图像

此外，所有其他子类型（如[`Table`](http://www.schema.org/Table)or [`WPFooter`](http://www.schema.org/WPFooter)）似乎都用于整个事物，而不是事物的特定部分。

所以这似乎表明应该标记整个导航，而不是每个链接：

```
<nav itemscope itemtype="http://schema.org/SiteNavigationElement">
<ul>
  <li><a href="/link-1">Link 1</a></li> <!-- don’t use the 'url' or 'name' property here! -->
  <li><a href="/link-2">Link 2</a></li>
</ul>
</nav> 
```

在这种情况下，所有属性都属于整个导航，这意味着该`url`属性将为此导航指定一个 URL（而*不是*此导航中链接的 URL！）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-28T13:30:58.680

根据[Search Engine Land](http://searchengineland.com/schema-markup-structured-data-seo-opportunities-site-type-231077)，它应该看起来像这样：

```
<ul itemscope itemtype="http://www.schema.org/SiteNavigationElement">
    <li itemprop="name">
        <a itemprop="url" href="#">Link 1</a>
    </li>
    <li itemprop="name">
        <a itemprop="url" href="#">Link 2</a>
    </li>
    <li itemprop="name">
        <a itemprop="url" href="#">Travel Resources</a>
    </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-22T12:45:40.100

第一个答案是正确的，但我会混合使用（HTML5-）语义：

```
<nav itemscope itemtype="http://schema.org/SiteNavigationElement">
    <ul>
        <li>
            <a itemprop="url" href="http://example.com/">
                <span itemprop="name">Link 1</span>
            </a>
        </li>
    </ul>
</nav> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-13T00:31:27.003

```
<nav role="navigation">

    <ul role="menubar" aria-activedescendant="">

        <li role="presentation" itemscope itemtype="https://schema.org/SiteNavigationElement">
            <a href="" role="menuitem" tabindex="-1" itemprop="url">
                <span itemprop="name">Link 1</span>
            </a>
        </li>   

    </ul>

</nav> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-13T20:11:33.087

考虑以下改编自[habd.as](https://habd.as)页面源的代码片段：

```
<nav itemscope itemtype="https://schema.org/SiteNavigationElement">
  <meta itemprop="name" content="Main Menu">
  <a itemprop="url" class="active" href="/">habd.as</a>
  <a itemprop="url" href="/code/">Code</a>
  <a itemprop="url" href="/post/">Posts</a>
  <a itemprop="url" href="/site/">Sites</a>
  <a itemprop="url" href="/talk/">Talks</a>
</nav>
<nav itemscope itemtype="https://schema.org/SiteNavigationElement">
  <meta itemprop="name" content="Utility Menu">
  <a itemprop="url" href="/about/">About</a>
  <a itemprop="url" href="/contact/">Contact</a>
</nav> 
```

当如上所示有多个导航时，使用 对导航项`SiteNavigationElement`进行*分组*`name`提供了 这样的使用，以便可以标记分组本身。可以使用链接本身的内容获得组内各个项目的标签。

因此，尽管断言相反，您的第一个示例更正确。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-29T11:40:51.103

[schema.org/SiteNavigationElement](http://schema.org/SiteNavigationElement)扩展了 WebPageElement 并且可用于标记链接，这通常会产生良好的上下文链接。您可以将此架构用于您的页面菜单。

```
<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
<ul>
    <li>
        <a href="https://yoursite.com/" title="Link to Home" itemprop="url">
            <span itemprop="name">Home</span>
        </a>
    </li>
    <li>
        <a href="https://yoursite.com/sample-page" title="Link to sample page" itemprop="url">
            <span itemprop="name">sample page</span>
        </a>
    </li>
</ul> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-18T15:37:39.747

OP 的原始问题包含一个很好的代码示例。虽然没有一个答案......

似乎每个人都给出了一个有点随机的答案......您可以使用以下*官方谷歌工具* [search.google.com/structured-data/testing-tool](https://search.google.com/structured-data/testing-tool)测试您的架构微数据代码。

如果您在此工具中运行建议的答案，您会注意到没有一个给您预期的结果：`SiteNavigationElement`带有名称和 url的列表

有些人可能会争辩说，整个菜单可能被视为“导航元素”，但我认为这个名称指定单个导航链接更有意义。另外，如果我们将`SiteNavigationElement`用作整个菜单的标记，我们将无法将名称与 html 中的 URL 关联起来。

为了实现这一点，您需要将每个链接都封装在一个`itemscope`属性中，并且它们都需要拥有自己的`name`and `url` `itemprop`（这些是@David Harkness 提到的单例，因此它们只能出现一次`itemprop`）

```
<nav>
    <ul>
        <li  itemscope itemtype="http://schema.org/SiteNavigationElement">
            <a itemprop="url" href="http://example.com/link-1">
                <span itemprop="name">Link 1</span>
            </a>
        </li>
        <li  itemscope itemtype="http://schema.org/SiteNavigationElement">
            <a itemprop="url" href="http://example.com/link-2">
                <span itemprop="name">Link 2</span>
            </a>
        </li>
    </ul>
</nav> 
```

上面的代码将产生两个不同的导航元素，每个元素都有一个名称和一个 URL。

注意：`itemprop="url"`属性使用锚的`href`属性作为值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-06T04:33:20.810

我认为最优雅的解决方案是使用[hasPart](https://schema.org/hasPart)属性。

```
<nav itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
  <a itemprop="hasPart" href="/link1.html">Link 1</a>
  <a itemprop="hasPart" href="/link2.html">Link 2</a>
  <a itemprop="hasPart" href="/link3.html">Link 3</a>
</nav> 
```

使用 Google 的[结构数据测试工具](https://search.google.com/structured-data/testing-tool/)会通知这些链接是 SiteNavigationElement 的一部分，并且 Google 应该遵循这些项目的链接：

[![谷歌结构化数据测试工具的结果](../Images/b53d7f55ad47d1bb33ac617ade73936b.png)](https://i.stack.imgur.com/ht6aA.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-23T18:56:11.773

[这是谷歌支持网站上](https://support.google.com/webmasters/thread/13954295?hl=en)一篇文章的引述，说：

> 我们正在考虑实施站点导航架构 [https://schema.org/SiteNavigationElement](https://schema.org/SiteNavigationElement)
> 
> 如果架构存在，谷歌会尊重它并显示附加链接，还是它会做自己的事情？我有一点吗？
> 
> 此类顶级当前不支持 Google。事实上，这种类型甚至没有范围定义。尚不清楚这种类型是否会影响一个组，例如导航菜单或仅一个链接。

这证实了我对他们丰富的结果测试的经验：只识别面包屑。Yandex 可以很好地验证我的微数据。因此`SiteNavigationElement`，在您的页面上似乎无用但有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-27T11:52:08.643

综合以上几点，我得出以下结论：

```
<nav itemscope itemtype="http://schema.org/SiteNavigationElement">
  <ul>
   <li itemprop="hasPart">
     <a href="/" itemprop="url"><span itemprop="name">Home</span></a>
   </li>
</nav>
```

因此，每个`<li>`都是`SiteNavigationElement`具有`url`and的部分`name`。我认为这是最好的选择。

但是搜索引擎需要这样的冗余标记吗？他们已经知道`href`in`<a href="">`是`url`，而标签里面`<a>name</a>`是`name`。你怎么看待这件事？

# c# - WIF：如何指定在身份验证时返回哪些声明？

> ID：12491105
> 
> 赞同：1
> 
> 时间：2012-09-19T08:35:08.780
> 
> 标签：c#, wif, claims-based-identity

与[这个问题](https://stackoverflow.com/questions/3638471/how-do-i-request-additional-claims-from-passive-sts-with-wif)类似，除了我需要在身份验证时获得额外的声明，而不是稍后。

我正在将我的 RP 作为另一个网站的身份验证插件来实现，所以我不能（或者宁愿尽可能避免）做诸如更改`web.config`文件或添加`FederationMetadata.xml`到我的 RP 之类的事情。

我已经成功地对 STS 进行了身份验证，现在除了它发送给我的基本信息之外，我还需要获得更多声明。STS 是公开的（或附近），不受我的控制，并且会有许多不同的 RP 针对它进行身份验证，所以我不希望每个 RP 都会受到特殊待遇。因此，我假设 STS 在我执行身份验证之前对我的 RP 一无所知，并且在身份验证完成后它将忘记所有相关信息。

如前所述，我正在使用 WIF，并且我正在用代码做所有事情。我在哪里指定要发送哪些声明？到目前为止，这是我的代码：

```
// Init configuration
var config = new ServiceConfiguration();
config.AudienceRestriction.AllowedAudienceUris.Add(new Uri("https://MyAudienceURI/"));
config.CertificateValidator = System.IdentityModel.Selectors.X509CertificateValidator.None;
var issuers = new ConfigurationBasedIssuerNameRegistry();
issuers.AddTrustedIssuer("08F81147C44D95CDA617963AFF0650EF26578E4A", "http://STSIssuer/trust");
config.IssuerNameRegistry = issuers;

// Create the FAM
var fam = new WSFederationAuthenticationModule();
fam.ServiceConfiguration = config;
fam.PassiveRedirectEnabled = true;
fam.Issuer = "https://STSUrl/Default.aspx";
fam.Realm = "https://MyAudienceURI/";
fam.Reply = Request.Url.ToString();
fam.RequireHttps = false;

// Check the current request
var req = System.Web.HttpContext.Current.Request;
if (!fam.CanReadSignInResponse(req, true))
{
    fam.RedirectToIdentityProvider("Nop.Plugin.ExternalAuth.WIF", Request.Url.ToString(), false);
    Response.End();
}

var principal = ClaimsPrincipal.CreateFromIdentities(config.SecurityTokenHandlers.ValidateToken(fam.GetSecurityToken(fam.GetSignInResponseMessage(req)))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:12:13.490

通常，STS 被配置为提供声明。该配置基于每个 RP，因此不同的 RP 可以获得不同的声明。

您可以使用 WIF 来扩充它。

使用 ClaimsAuthenticationManager 并覆盖 Authenticate。

然后是这样的：

((IClaimsIdentity)incomingPrincipal.Identity).Claims.Add(new Claim(...))

如果声明是外部的，您必须自己获取它们，例如访问 AD？

# php - 将单页结帐添加到自定义页面

> ID：12491106
> 
> 赞同：1
> 
> 时间：2012-09-19T08:35:14.070
> 
> 标签：php, magento, checkout, magento-1.7

我在搞乱magento，我无法弄清楚如何将相同的内容从magento onepage checkout 添加到我的自定义模块页面。

我**不希望覆盖**原始结帐页面，只需在我自己的页面上创建类似的页面。我已经设法创建了一个控制器，它扩展了 OnepageController 并将我重定向到我的自定义页面。

欢迎所有建议！先感谢您 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:42:11.407

那么重新创建单页结帐是一个漫长的过程。但是您想知道的信息是，单页结帐的所有模板文件都在 template/checkout/ 下，而它的布局文件在 layout/checkout.xml 中。

如果您想知道单页结帐的幕后情况，请阅读本文，它将帮助您了解 magento 对单页结帐到底做了什么。查看这篇文章 [http://inchoo.net/ecommerce/magento/magentos-onepage-checkout-in-a-nutshell/](http://inchoo.net/ecommerce/magento/magentos-onepage-checkout-in-a-nutshell/)。

如果有更多的查询在这里更新，我会尽我所能给你一个答案。

# algorithm - 为路径规划实施 D* Lite - 如何检测边缘成本变化？

> ID：12491107
> 
> 赞同：2
> 
> 时间：2012-09-19T08:35:19.000
> 
> 标签：algorithm, path-finding, d-star

我目前尝试实施 D* Lite 算法进行路径规划（另请参见[此处](https://cstheory.stackexchange.com/questions/11855/how-do-the-state-of-the-art-pathfinding-algorithms-for-changing-graphs-d-d-l)）以掌握它。我在网上找到了两个实现，都是针对 C/C++ 的，但不知何故不能完全遵循这些想法，因为它们似乎与白皮书中的伪代码有很大的不同。我特别使用以下两篇论文： [Koening,S.;Likhachev,M. - D* Lite，2002](http://idm-lab.org/bib/abstracts/papers/aaai02b.pdf) [Koenig & Likkachev，在未知地形中快速重新规划导航，IEEE Transactions on Robotics，Vol。2005年6月21日第3期](http://pub1.willowgarage.com/~konolige/cs225b/dlite_tro05.pdf)

我尝试从第一个白皮书（第 5 页，图 4）中实现 D* Lite 的优化版本，对于“调试”，我使用第二个白皮书（第 6 页，图 6 和图）中所示和解释的示例.7)。所有工作都在 MatLab 中完成（更容易与他人交换代码）。

到目前为止，我通过运行一次 computeShortestPath() 来运行代码以找到初始最短路径。但现在我被困在伪代码的 {36''} 和 {37''} 行：

```
{36”} Scan graph for changed edge costs;
{37”} if any edge costs changed 
```

我如何检测这些变化？我似乎不知道这是如何被检测到的？到目前为止，在我的实现中，我主要使用了 3 个矩阵。一个与包含所有 rhs 值的网格图大小相同的矩阵。一个大小相同的矩阵，包含类似的所有 g 值。还有一个具有可变行数的矩阵，用于优先级队列，前两列是优先级键，第三和第四行是 x 和 y 坐标。

比较我的结果，我在第 5 步中第一次运行 computeShortestPath() 得到的结果与第二份白皮书第 6 页图 6 中所示的结果相同。移动机器人一步也不是问题。但我真的不知道下一步应该如何实施扫描更改的边缘成本。

感谢您的任何提示、建议和/或帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:42:35.653

以下是别人向我指出的：

> 在现实世界的代码中，您几乎不必“扫描图表以查找更改”。您的图表仅在您在代码中更改时才会更改，因此您已经确切知道何时何地可以更改！
> 
> 实现这一点的一种常见方法是在 Graph 类中设置 OnGraphChanged 回调，可以将其设置为调用 PathFinder 类中的 OnGraphChanged 方法。然后在您的 Graph 类中图表发生变化的任何地方，确保调用 OnGraphChanged 回调。

我个人通过使用“真实地图”和“已知地图”来实现它，并且在每次移动之后让机器人检查/扫描所有下一个可能的继任者，并在真实地图和已知地图上比较它们。

# php - Apache 重写 URL，在 WAMP 中工作，而不是在 LAMP 中

> ID：12491108
> 
> 赞同：0
> 
> 时间：2012-09-19T08:35:23.640
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我有一个自定义 MVC 应用程序，其中使用`IndexController`了我在 WAMP 上构建的命名约定。今天我尝试将它放入Linux（LAMP）。奇怪的是，它给出了错误“找不到页面”。任何人都可以帮忙。我不擅长mod重写，

以下是代码

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?request=$1 [L,QSA] 
```

网址是

> `http://hostname/mvc/incident/add`

错误是在此服务器上找不到请求的 URL /app01/users/public_html/mvc/index.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:17:12.887

嗨，我通过使用错误重定向功能解决了这个问题。我将以下代码放在我的 .htaccess 文件中

```
ErrorDocument 403 /~renjith/mvc/index.php
ErrorDocument 404 /~renjith/mvc/index.php 
```

在我使用的 index.php 文件中， $_SERVER['REQUEST_URI'] 使用查询字符串获取 thr URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:37:58.853

尝试添加：

```
RewriteBase /mvc/ 
```

就在`RewriteEngine on`指令下，或添加一个前导斜杠`index.php`：

```
RewriteRule ^(.*)$ /mvc/index.php?request=$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:38:08.450

你需要放一个`/`之前`index.php`和一些其他的东西。看看我从 Wordpress 那里得到的例子。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T10:03:42.573

我认为 ./htaccess 配置是正确的。我只是通过将此指令添加到我在 debian 上的 apache2.conf 文件来解决它。

```
<Directory /var/www/html/your_app_folder>
Options Indexes FollowSymLinks
AllowOverride All
Require all granted</Directory> 
```

# java - 线程创建监听器

> ID：12491112
> 
> 赞同：7
> 
> 时间：2012-09-19T08:35:39.780
> 
> 标签：java, multithreading, jvm, classloader

是否可以在 java 中编写线程创建侦听器？例如使用 aop？！

我的意思是这样的，如果我的应用程序创建一个线程，我想在我自己的表、容器或其他东西中注册这个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:46:07.410

我将创建一个线程，不断列出 JVM 上所有正在运行的线程。
然后每次它注意到出现了一个新线程时，它都会以任何一种方式通知你代码中的一个类。

以下是有关如何列出当前在 JVM 上运行的所有线程的一些链接：

1.  [获取当前在 Java 中运行的所有线程的列表](https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java)

2.  [列出所有正在运行的线程](http://www.exampledepot.com/egs/java.lang/ListThreads.html)

=============

起始代码：

**ThreadCreationListener.java**

```
public interface ThreadCreationListener {
    public void onThreadCreation(Thread newThread);
} 
```

**ThreadCreationMonitor.java**

```
public class ThreadCreationMonitor extends Thread {
   private List<ThreadCreationListener> listeners;
   private boolean canGo;

   public ThreadCreationMonitor() {
      listeners = new Vector<ThreadCreationListener>();//Vector class is used because many threads may use a ThreadCreationMonitor instance.
      canGo = true;
      // Initialize the rest of the class here...
   }

   // Most important methods
   public void addListener(ThreadCreationListener tcl) {
        listeners.add(tcl);
   }

   public void removeListener(ThreadCreationListener tcl) {
        listeners.remove(tcl);
   }

   public void run() {
        List<Thread> runningThreads;
        List<Thread> lastRunningThreads;

        while(canGo) {
            // Step 1 - List all running threads (see previous links)
            // runningThreads = ...

            // Step 2 - Check for new threads and notify all listeners if necessary
            if (runningThreads.removeAll(lastRunningThreads)==true) {
                for(Thread t : runningThreads) {
                    for(ThreadCreationListener tcl : listeners) {
                        tcl.onThreadCreation(t);//Notify listener
                    }
                }
            }
        }
   }

   public void shutdown() {
       canGo = false;
   } 
```

}

**MyThreadInfoConsumer.java**

```
public class MyThreadInfoConsumer implements ThreadCreationListener {
    public void onThreadCreation(Thread newThread) {
        // Process here the notification...
    }
} 
```

**主.java**

```
public class Main {
    public static void main(String[] args) {
       ThreadCreationMonitor tcm = new ThreadCreationMonitor();
       tcm.start();

       MyThreadInfoConsumer myTIC = new MyThreadInfoConsumer();
       tcm.addListener(myTIC);

       // rest of your code...
       // Don't forget to call tcm.shutdown() when exiting your application !
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:59:24.693

我认为这可以通过AOP（例如aspectj）实现。但是仍然需要创建自己的`Thread`and `ThreadGroup`/`Executor`类型，除非您可以使用切面编译器重新编译 JDK 类。`start`如果要在线程启动时注册，请在线程方法上定义切入点；`createThread`如果要在创建线程对象时注册，请在池的方法上定义切入点。

* * *

仅当您使用方面编译器重新编译 JDK 时，以下内容才有效：所有线程都以 开头`Thread.start`，因此为该方法编写一个切入点，然后您可以使用建议来做您想做的事情。当然，这并不完美，因为例如 cachedThreadPool 执行器可能不会为每个任务启动一个新线程，但也许如果您在`Runnable.run`and`Callable.call`而不是 on 上注册一个切入点`Thread.start`，这可能就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:09:50.963

也许你需要一个 ThreadGroup。所有线程都是 ThreadGroup 的成员，当您启动新线程时，默认情况下会将其添加到与其父级相同的组中。

理论上，当从组中添加或删除线程时，它可能（但不推荐）子类得到通知。

轮询该组的线程或轮询所有线程可能是更好的解决方案。

# actionscript-3 - 我已经使用 Adob e Air 3.2 创建了一个移动应用程序，但它不适用于 iOS 6 iPad

> ID：12491116
> 
> 赞同：1
> 
> 时间：2012-09-19T08:36:02.080
> 
> 标签：actionscript-3, ipad, air, flashdevelop, mobile-application

我用 Adob​​e Air 3.2 创建了一个移动应用程序，但它不能在 iOS 6 iPad 上运行，

即使我无法在 Ipad 上安装。

请让我知道如何解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:49:09.720

我认为 iOS 6 不支持 3.2。尽管我相信它也存在一些问题，但您至少需要使用 3.3。

最好的建议是升级到最新版本（[此处为 AIR SDK](http://www.adobe.com/devnet/air/air-sdk-download.html)）并使用它，在撰写本文时它是 3.4.0.2540。最新版本中对移动设备进行了很多改进，[请参阅此处以获取列表](http://www.adobe.com/devnet/articles/flashplayer-air-feature-list.html)。

# objective-c - 自定义字段编辑器不绘图

> ID：12491118
> 
> 赞同：0
> 
> 时间：2012-09-19T08:36:17.153
> 
> 标签：objective-c, macos, cocoa, nstokenfield

我正在尝试继承 NSTokenField 来拦截一些键盘事件。我为 NSTokenField、NSTokenFieldCell 和 NSTextView 编写了子类。在 NSTokenField 子类中，我将常规单元格与自定义单元格交换，并在自定义单元格中覆盖 -(NSTextView*)fieldEditorForView:(NSView *)aControlView 以提供我的文本视图作为自定义字段编辑器。所有初始化方法都按预期调用，但由于某种原因，我的自定义令牌字段未绘制。

这是 NSTokenField 子类的代码：

```
@synthesize fieldEditor = _fieldEditor;

-(JSTextView *)fieldEditor
{
    if (!_fieldEditor) {
        _fieldEditor = [[JSTextView alloc] init];
        [_fieldEditor setFieldEditor:YES];
    }
    return _fieldEditor;
}

- (void)awakeFromNib {
    JSTokenFieldCell *newCell = [[JSTokenFieldCell alloc] init];
    [self setCell:newCell];
}

+ (Class) cellClass
{
    return [JSTokenFieldCell class];
}

- (id)initWithFrame:(NSRect)frameRect
{
    self = [super initWithFrame:frameRect];
    if (self) {
        JSTokenFieldCell *newCell = [[JSTokenFieldCell alloc] init];
        [self setCell:newCell];
    }
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        JSTokenFieldCell *newCell = [[JSTokenFieldCell alloc] initWithCoder:aDecoder];
        [self setCell:newCell];
    }
    return self;
} 
```

下面是 NSTokenFieldCell 子类的代码：

```
-(NSTextView*)fieldEditorForView:(NSView *)aControlView
{
if ([aControlView isKindOfClass:[JSTokenField class]]) {
    JSTokenField *tokenField = (JSTokenField *)aControlView;
    return tokenField.fieldEditor;
    }
return nil;
}

- (id)initWithCoder:(NSCoder *)decoder
{
    return [super initWithCoder:decoder];
}

- (id)initTextCell:(NSString *)aString
{
    return [super initTextCell:aString];
}

- (id)initImageCell:(NSImage *)anImage
{
    return [super initImageCell:anImage];
} 
```

**添加**

在进一步挖掘之后，我发现[这篇文章](http://lists.apple.com/archives/cocoa-dev/2005/Jul/msg00474.html)说拥有`NSTokenField`自定义文本视图的唯一方法是覆盖私有方法。这是真的吗？如果是这样，有没有其他方法可以在没有子类化的情况下拦截键盘事件`NSTextView`？

# ruby-on-rails - 为什么rails设置后会更改属性_was值的类型？

> ID：12491121
> 
> 赞同：3
> 
> 时间：2012-09-19T08:36:20.960
> 
> 标签：ruby-on-rails, ruby, activerecord

我的模型中有一个属性，该属性存储为文本，但被解释为有理数。我有这个方法来处理：

```
def start
  read_attribute(:start).to_r
end 
```

当我将`start`属性设置为新值时，`start_was`辅助方法返回一个字符串，而不是一个有理数，但在我这样做之前，它会返回正确的值。为什么？

```
Loading development environment (Rails 3.2.8)
1.9.3p194 :001 > d = Day.find(55)
  Day Load (8.7ms)  SELECT "days".* FROM "days" WHERE "days"."id" = ? LIMIT 1  [["id", 55]]
 => #<Day id: 55, date: "2012-03-30", start: "1/2", finish: "2/2", created_at: "2012-09-18 15:16:42", updated_at: "2012-09-19 08:20:41", day_year_id: 1> 

1.9.3p194 :002 > d.start_was
 => (1/2) 

1.9.3p194 :003 > d.start=0
 => 0 

1.9.3p194 :004 > d.start_was
 => "1/2" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:28:34.823

我认为原因是 ActiveModel 中的这种方法（activemodel-3.2.8\lib\active_model\dirty.rb）

```
# Handle <tt>*_was</tt> for +method_missing+.
def attribute_was(attr)
  attribute_changed?(attr) ? changed_attributes[attr] : __send__(attr)
end 
```

如您所见，如果属性实际上没有更改，它只会调用自己的 getter，在您的情况下，点击`start`执行转换的方法。但如果属性实际发生了变化，它会从`changed_attributes`存储中读取其原始值。

# javascript - 为什么 array.push 不起作用？

> ID：12491126
> 
> 赞同：0
> 
> 时间：2012-09-19T08:36:47.423
> 
> 标签：javascript, node.js, express

我有这个代码

```
function imagenesIn(errU,errores)
    {
        if(errU) throw errU;
        var directorios=new Array();
        var origenDir='';
        var destinoDir='';
        if(errores=='')
        {
            if(campos.img instanceof Array)
            {
                for(file in campos.img)
                {
                    origenDir='';
                    destinoDir='';
                    origenDir=campos.img[file].path;
                    destinoDir='/uploads/publish/alquiler/'+req.session.passport.user+campos.img[file].name;
                    fs.rename(origenDir,process.cwd()+'/public'+destinoDir,function(err)
                    {
                        if (err) throw err;
                        directorios.push(destinoDir);
                        console.dir(directorios)
                    })
                }
            }
        }else{
            res.send(errores)
        }
        return directorios;
    }, 
```

我想在directios中获取req.files.img中campos.img中所有文件内容的命运数组

但是当我在控制台中打印时发生了

```
"img": [
  "/uploads/publish/alquiler/andres@hotmail.comTulips.jpg",
  "/uploads/publish/alquiler/andres@hotmail.comTulips.jpg"
], 
```

我试图得到这个结果

```
"img": [
  "/uploads/publish/alquiler/andres@hotmail.comTulips.jpg", //first img
  "/uploads/publish/alquiler/andres@hotmail.flowers.jpg"//second img
], 
```

为什么 .push() 方法只放第一个图像目录而不放第二个？？？我想念什么？？？

tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:52:49.663

你的问题是在

```
 fs.rename(origenDir,process.cwd()+'/public'+destinoDir,function(err)
                {
                    if (err) throw err;
                    directorios.push(destinoDir);
                    console.dir(directorios)
                }) 
```

到你做的时候你`push()`不会真的跑

```
 return directorios; 
```

您需要确保最后*完成*`fs.rename(...)`的调用（*不是*，我重复一遍，*不一定是最后**开始*的同一个调用）处理所有调用都完成的情况。使用异步调用，您*不能*在启动一堆它们并执行;之后就失败了。在所有工作完成后，您必须将要运行的代码放在一个回调中，该回调解决了我之前所说的“句柄”。*****`return`*****

 ***像 async.js 这样的控制流库可以简化你的代码，但是你需要明白一旦你的函数变成异步的，它后面的所有东西也必须是异步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:43:35.793

ebohlman 几乎称它为。现在，您的 for 循环正在设置 rename 函数完成后将调用的匿名函数。

一旦这些设置完成，imagenesIn 将返回目录。它可能包含一些目录，也可能不包含目录，具体取决于您返回之前是否完成了重命名。

节点的强大之处在于它是异步的。您可以使用 fs.renameSync 是的，它会按照您的预期进行。Node 不像 apache php 服务器。php 服务器收到一个请求，并为该请求保留一小块内存。这就是为什么仍然可以处理其他请求的原因，因为它们都有自己的内存。节点不这样做。它在单个线程上运行，如果您执行任何阻塞操作（如同步 IO），其他请求必须等到它完成才能处理它们。

理想情况下，您的 imagenesIn 也应该是异步的，将函数作为最终参数。函数的标准通常遵循函数（错误，数据）。如果没有，则错误应该为空。fs.rename 遵循这种模式。

调用 imagenesIn 的函数也应该理想地处理服务器响应。这允许在其他类型的情况下使用该功能。如果您不想在错误时发送该特定响应怎么办？如果您根本不想发送响应怎么办？现在，这是意外发送标头两次（并出现错误）的好方法。

如果是我，这就是我编写函数的方式（我没有测试，但应该给你一些指导）。

```
function imagenesIn(callback) {

    var directorios=new Array();
    var origenDir='';
    var destinoDir='';
    if(campos.img instanceof Array) {

        function recursion(index){

            //the case that ends the recursion and returns directories
            if (index >= campos.img.length) {
                callback(null, directorios);
                return;
            }

            origenDir=campos.img[index].path;
            destinoDir='/uploads/publish/alquiler/'+req.session.passport.user+campos.img[index].name;

            fs.rename(origenDir, process.cwd() + '/public' + destinoDir, function(err) {

                //the case that ends recursion and sends an error
                if (err) {
                    callback(err);
                    return; 
                }
                directorios.push(destinoDir);
                console.dir(directorios);
                recursion(index++);
            })  
        }

        recursion(0);
    }
    else {
        callback('Campos.img was not an array.');
    }
} 
```

并且您调用它的代码可能看起来像这样

```
imagenesIn(function(err, directories) {
    if (err) {
        res.send(err);
    }
    else {
        //do cool stuff with directories.
    }
}); 
```

另外，我想确保您了解 for( ; ; ) 和 for(key in object) 之间的独特区别。“For in”遍历对象的键。这适用于数组，因为它本质上是一个带有数字键的对象。不过我可以这样做

```
var array = ['data', 'data'];
array.nonNumericKey = 'otherdata'; 
```

如果你为 (var i = 0; i < array.length; i++) 做了，你只会遍历数组数据。如果您使用 for (key in array)，您还将遍历 nonNumericKey。这就是为什么我个人只对不是数组的对象使用“for in”。***

# jquery - Autson 幻灯片和 Moset 树之间的 Jquery 冲突

> ID：12491128
> 
> 赞同：1
> 
> 时间：2012-09-19T08:36:50.277
> 
> 标签：jquery

我在 Autson Slideshow 和 Mosets Tree 之间存在冲突。我认为这是由于 jquery 冲突，因为当我尝试在列表图像中打开子图像时，它们通常会在灯箱中打开，但事实并非如此。图像在新窗口中打开没有任何效果，但如果我禁用模块 Autson Slideshow 它工作正常。如果我从模块中禁用 jquery，模块将无法工作，Moset Tree 中的图像工作正常。我能做些什么？

我正在使用 Joomla 1.6.5、Moset 树 2.2.4，并且都使用 jquery-1.4.4.min、jquery.fancybox-1.3.4 并且我正在使用 localhost 。

询问您是否需要更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:44:42.100

尝试包含 `jQuery.noConflict();`在您的脚本标签中
阅读更多来自[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# magento - 在 Magento 上使用 OR 条件加入 AND 条件

> ID：12491136
> 
> 赞同：0
> 
> 时间：2012-09-19T08:37:19.840
> 
> 标签：magento, boolean

我可以使用 addFieldToFilter 和 addAttributeToFilter 在 Magento 上运行 AND 和 OR 布尔条件。

但是，我很好奇实现更复杂的布尔条件，如下所示：

```
WHERE (`sku > 5` AND `price` > '10') OR (`name` = 'books') 
```

对于 AND 条件，我有

```
$collections = Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('*')
->addFieldToFilter( 'sku', array('gt' => 5 )
->addFieldToFilter('price', array('gt' => 10); 
```

这转化为 WHERE 条件的第一个括号：

```
(`sku` > 5 AND `price` > 10) 
```

我不知道如何从这里开始表达 OR 条件

```
`name` = 'books' 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T09:54:14.090

见我之前的帖子：

[Magento 上的复杂布尔条件](https://stackoverflow.com/questions/12472713/complex-boolean-conditions-on-magento/12473013#12473013)

您可以通过传递数组来创建 OR：

```
Mage::getModel('catalog/product')
->getCollection()
->addFieldToFilter('price', array('gt' => 10))
->addAttributeToFilter(
    array(
        array('attribute'=>'firstname', 'like'=>'test%'),
        array('attribute'=>'lastname', 'like'=>'test%'),
    )
) 
```

对 addAttributeToFilter() 的每个额外调用都将进行 AND 运算，但 firstname / lastname 将进行 OR 运算。

如果您需要更复杂的选择语句，您始终可以从集合中获取选择对象并对查询进行调整。查看 Varien_Db_Select 以获取提示:)

```
$collection->getSelect()->join(..)->orWhere(..);  // etc 
```

您甚至可以调试查询以查看它是否正常：

```
echo $collection->getSelect()->__toString(); 
```

# sql - 如何在 SQL 数据代理操作中实现参数别名？

> ID：12491137
> 
> 赞同：0
> 
> 时间：2012-09-19T08:37:25.033
> 
> 标签：sql, aviarc

我有一个主键为 的表`claims_id`，但由于遗留原因，我需要能够使用参数`claims_id`或查找记录`claim_id`。我怎样才能做到这一点？我之前使用过如下模式进行搜索查询：

```
select...
 where (
         {$claims_id} is null
         or
         claims.claims_id = {$claims_id}
       )
       and
       (
         {$claim_id} is null
         or
         claims.claims_id = {$claim_id}
       ) 
```

...但这对我来说似乎不太正确，因为您可以为查询提供两个参数，这没有任何意义。实现这样的事情的正确方法是什么？

这些是大表，因此如果出于某种原因未指定任何参数，则查询不应返回任何内容。

**更新：**注意到有问题的数据库是 DB2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:35:05.977

如果无法调整代理以使其仅允许一个参数名称，那么我的建议是为操作设置一个预工作流程，检查这两个参数是否存在并根据需要进行调整。

举个最简单的例子，

```
<workflow>
  <if test="not-equal" value1="{$parameters.claims_id}" value2="">
    <then>
      <set-field field="parameters.claim_id" value="{$parameters.claims_id}"/>
    </then>
  </if>
</workflow> 
```

然后在查询中，您只关心 claim_id 参数。

这也将允许以某种方式处理或记录提供两个参数的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:31:59.497

I would usually identify which one of the parameters has precedence and structure the query something similar to:

```
select...
 where (
            {$claims_id} is null
            and 
            (
                {$claim_id} is null
                or
                claims.claims_id = {$claim_id}
            )
        )
    or claims.claims_id = {$claims_id} 
```

Here the **claims_id** checked as a primary option and then **claim_id** as secondary.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:51:34.977

你可以这样做：

```
select
.
.
 where coalesce({$claims_id},{$claim_id}) is null 
    or coalesce({$claims_id},{$claim_id}) = claim_id 
```

# android - TableLayout中点击事件的问题

> ID：12491138
> 
> 赞同：1
> 
> 时间：2012-09-19T08:37:29.743
> 
> 标签：android, android-tablelayout, tablerow

大家，早安，

我在学习 Android 的道路上面临着另一个问题。我使用 CSV 文件的内容制作了一个动态 TableLayout。我需要当我单击/触摸表格中的一行时，颜色应该会改变，然后单击按钮获取同一行的内容。现在我被第一部分困住了，当然我不知道如何获取该行的数据。

我在 LinearLayout 中声明了表格，该表格也在我的布局中的 ScrollView 内部，具有以下属性：

```
 <ScrollView
    android:id="@+id/scrollMotors"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="50dp"
    android:layout_marginRight="50dp"
    android:layout_marginTop="90dp"
    android:layout_marginBottom="50dp" >
    <LinearLayout
        android:id="@+id/layoutMotors"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
        <TableLayout
            android:id="@+id/tableMotors"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="true"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:gravity="center_vertical"
            android:stretchColumns="*" >

        </TableLayout>
    </LinearLayout>
</ScrollView> 
```

在我的 java 代码中，我声明了该行的创建：

```
 //Initialization of my table
    my_tableMotors = (TableLayout) findViewById(R.id.tableMotors);
    //This is an ArrayList<ArrayList<String>> that contains the lines of the CSV file,
    //I use this variable as a dynamic Matrix because my CSV file can change its dimensions.
    m = valuesFile.size(); 
    for (n = 0 ; n < m ; n++)
    {
        //Declaration and initialization of my rows
        final TableRow line = new TableRow(MotorActivity.this);
        //Setting the parameters of my row
        line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        line.setFocusable(true);
        line.setFocusableInTouchMode(true);
        line.setClickable(true);
        //Initialization of my TextViews that are gonna be the content of each one of the rows in the dynamic TableLayout
        myCol1 = new TextView(MotorActivity.this);
        myCol2 = new TextView(MotorActivity.this);
        myCol3 = new TextView(MotorActivity.this);
        myCol4 = new TextView(MotorActivity.this);
        j = valuesFile.get(n).size();
        for (i = 0 ; i < j ; i++)
        {
            switch(i)
            {
            case 0: 
                if (n == 0)
                {
                    myCol1.setText("Line");
                }
                else
                {
                    myCol1.setText(valuesFile.get(n).get(i)); //Sets value for the column
                }
                line.addView(myCol1);
                break;
            case 1:
                myCol2.setText(valuesFile.get(n).get(i)); //Sets value for the column
                line.addView(myCol2);
                break;
            case 2:
                myCol3.setText(valuesFile.get(n).get(i)); //Sets value for the column
                line.addView(myCol3);
                break;
            case 3:
                myCol4.setText(valuesFile.get(n).get(i)); //I use this variable for some other purpose
                break;
            }
        }
        my_tableMotors.addView(line);
    }
    my_tableMotors.setOnClickListener(new View.OnClickListener() {public void onClick(View v) {onClickedRow(); }});
} 
```

从我在这里看到和阅读的内容来看，最好的方法是使用 setOnClickListener ，这就是我使用在这里找到的两个不同答案所做的事情：

```
 public void onClickedRow()
{
    m = my_tableMotors.getChildCount();
    for (n = 0 ; n < m ; n++)
    {
        if (my_tableMotors.getChildAt(n).hasFocus())
        {
            my_tableMotors.setBackgroundColor(myColor);
        }
    }
} 
```

现在我根本无法关注 tableLayout，所以如果您在我的代码中发现有问题，或者如果您知道如何帮助我，我将不胜感激！！！！

提前谢谢了 ：）。

**编辑 1**

我找到了获得焦点的方法。我将方法更改为不是整个 TableLayout 而是仅更改为 TableRow，所以最终是这样的：

****之前****

```
 my_tableMotors = (TableLayout) findViewById(R.id.tableMotors);
    m = valuesFile.size(); 
    for (n = 0 ; n < m ; n++)
    {
        //Declaration and initialization of my rows
        final TableRow line = new TableRow(MotorActivity.this);
        /*Other declarations*/
        j = valuesFile.get(n).size();
        for (i = 0 ; i < j ; i++)
        {
            /*Code*/
        }
        my_tableMotors.addView(line);
    }
    my_tableMotors.setOnClickListener(new View.OnClickListener() {public void onClick(View v) {onClickedRow(); }});
} 
```

****之后****

```
 my_tableMotors = (TableLayout) findViewById(R.id.tableMotors);
m = valuesFile.size();
for (n = 0 ; n < m ; n++)
{
    //Declaration and initialization of my rows
        final TableRow line = new TableRow(MotorActivity.this);
    /*Other declarations*/
    j = valuesFile.get(n).size();
    for (i = 0 ; i < j ; i++)
    {
        /*Code*/
    }
    line.setOnClickListener(new View.OnClickListener() {public void onClick(View v) {onClickedRow(); }});
    my_tableMotors.addView(line);
} 
```

我还对如何设置线条的颜色进行了更改：

****之前****

```
my_tableMotors.setBackgroundColor(myColor); 
```

****之后****

```
my_tableMotors.getChildAt(n).setBackgroundResource(R.drawable.myColor); 
```

现在我正忙于找出如何从 TableRow 中获取数据。一旦我得到那个解决方案或你的答案，我想我的问题已经解决了！！！

**编辑 2**

在@Luksprog 的帮助下，我可以找到检索内容问题的答案！！！我确实使用他的解决方案使用了下一个代码：

```
 public void onClickedRow()
{
    TableRow clickedRow = new TableRow(MotorActivity.this);
    m = my_tableMotors.getChildCount();
    for (n = 1 ; n < m ; n++)
    {
        if (my_tableMotors.getChildAt(n).isFocused())
        {
            my_tableMotors.getChildAt(n).setBackgroundResource(R.drawable.highlightTableRow);
            clickedRow = (TableRow) my_tableMotors.getChildAt(n);
            j = clickedRow.getChildCount();
            for (i = 0; i < j ; i++)
            {
                switch(i)
                {
                case 0:
                    myField1 = (TextView) clickedRow.getChildAt(i);
                    break;
                case 1:
                    myField2 = (TextView) clickedRow.getChildAt(i);
                    break;
                case 2:
                    myField3 = (TextView) clickedRow.getChildAt(i);
                    break;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:42:42.213

不要设置`OnClickListener`on`TableLayout`而是将其设置为`TableRow`您在该 for 循环中创建的每个：

```
for (n = 0 ; n < m ; n++) {
    //Declaration and initialization of my rows
    final TableRow line = new TableRow(MotorActivity.this);
    line.setOnClickListener(mListener);
    line.setId(1000 + n);
    // ... 
```

哪里`mListener`是：

```
OnClickListener mListener = new OnClickListener() {

     public void onClick(View v) {
         // v is the TableRow that was clicked
         v.setBackgroundColor(Color.RED);
         // mClickedPosition is a int field representing the clicked row(to know the position later)
         // if you allow more than one row to be clicked at one time, use a list of ints
         // or something like this
         mClickedPosition = v.getId() - 1000; 
     }
} 
```

要稍后检索该行的内容，您将使用该`mClickedPosition`变量：

```
TableRow clickedRow = (TableRow) my_tableMotors.getChildAt(mClickedPosition);
// having the child TableRow that was clicked you could extract any data you want from it
// of course you could simply use the mClickedPosition to extract the data from whatever data structure you have(I'm looking at valuesFile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:38:25.253

您可以根据需要修改以下代码。给你：-

```
public void createTable() {
        TableLayout table = (TableLayout) findViewById(R.id.tableMotors);
        table.removeAllViewsInLayout();

        List<String> namesList = new ArrayList<String>();
        namesList.add("name");
        namesList.add("name2");
        namesList.add("name3");

        // display dynamic table rows
        for (int counter = 0; counter < namesList.size(); counter++) {
            TableRow row = new TableRow(this);

            // add the index view to the row
            TextView index = new TextView(this);
            index.setLayoutParams(new LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            index.setId(100);
            index.setTextColor(Color.RED);
            String indexString = String.valueOf(counter + 1);
            index.setText(indexString);

            // textview to display names
            final TextView nameView = new TextView(this);
            nameView.setLayoutParams(new ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            nameView.setId(0);
            nameView.setText(namesList.get(counter));
            nameView.setTextColor(Color.RED);

            RelativeLayout relativeRowContent = new RelativeLayout(this);

            // set the layout params for the control to be added
            RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp.setMargins(10, 0, 0, 0);
            rlp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            relativeRowContent.addView(index, rlp);

            // add the divider after index
            final TextView indexDivider = new TextView(this);
            indexDivider.setWidth(1);
            indexDivider.setId(101);
            indexDivider.setHeight(80);
            indexDivider.setBackgroundColor(Color.GRAY);

            // display the index
            rlp = new RelativeLayout.LayoutParams(
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp.setMargins(80, 0, 0, 0);
            rlp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            relativeRowContent.addView(indexDivider, rlp);

            // set the layout params for the control to be added
            rlp = new RelativeLayout.LayoutParams(
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,
                    android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp.setMargins(10, 0, 0, 0);
            rlp.addRule(RelativeLayout.RIGHT_OF, indexDivider.getId());
            relativeRowContent.addView(nameView, rlp);

            // finally add the relative row content layout in the table row.
            row.addView(relativeRowContent);
            /* row.setBackgroundResource(R.drawable.row_border_light); */

            // add the row to the table.
            table.addView(row, new TableLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            row.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(TestActivity.this,
                            "" + nameView.getText().toString(),
                            Toast.LENGTH_SHORT).show();

                    // or do something more use full here.

                }
            });

        }
    } 
```

# excel - 在 Excel 中动态融合具有相同值的行单元格

> ID：12491141
> 
> 赞同：1
> 
> 时间：2012-09-19T08:37:34.187
> 
> 标签：excel

在带有自动过滤器的数据表中，我有这个（例如值和列名）：

```
Continent      Country      City        Street
----------------------------------------------------------
Asia           Vietnam      Hanoi       egdsqgdfgdsfg
Asia           Vietnam      Hanoi       fhfdghdfdh
Asia           Vietnam      Hanoi       dfhdfhfdhfdhfdhfdh
Asia           Vietnam      Saigon      ggdsfgfdsdgsdfgdf
Asia           Vietnam      Hue         qsdfqsfqsdf
Asia           China        Beijing     qegfqsddfgdf
Asia           China        Canton      sdgsdfgsdgsdg
Asia           China        Canton      tjgjfgj
Asia           China        Canton      tzeryrty
Asia           Japan        Tokyo       ertsegsgsdfdg
Asia           Japan        Kyoto       qegdgdfgdfgdf
Asia           Japan        Sapporo     gsdgfdgsgsdfgf
Europa         France       Paris       qfqsdfdsqfgsdfgsg
Europa         France       Toulon      qgrhrgqzfqzetzeqrr
Europa         France       Lyon        pàjhçuhàçuh
Europa         Italy        Rome        qrgfqegfgdfg
Europa         Italy        Rome        qergqegsdfgsdfgdsg 
```

我希望这样显示，如果过滤器发生变化，动态融合行

```
Continent      Country      City        Street
    ----------------------------------------------------------
                                            egdsqgdfgdsfg
                                Hanoi       fhfdghdfdh
                   Vietnam                  dfhdfhfdhfdhfdhfdh
                                Saigon      ggdsfgfdsdgsdfgdf
                                Hue         qsdfqsfqsdf
                   ---
    Asia                        Beijing     qegfqsddfgdf
                   China                    sdgsdfgsdgsdg
                                Canton      tjgjfgj
                                            tzeryrty
                   ---
                                Tokyo       ertsegsgsdfdg
                   Japan        Kyoto       qegdgdfgdfgdf
                                Sapporo     gsdgfdgsgsdfgf
    ---
                                Paris       qfqsdfdsqfgsdfgsg
                   France       Toulon      qgrhrgqzfqzetzeqrr
    Europa                      Lyon        pàjhçuhàçuh
                   Italy        Rome        qrgfqegfgdfg
                                            qergqegsdfgsdfgdsg 
```

宏是强制性的吗？

我不想合并 Street 列中的值。我想保留所有线路。我只想在第一列显示上工作，以避免出现一长串相同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:29:29.930

您还可以设置数据透视表 - 这看起来像这样：

![在此处输入图像描述](../Images/93d300f9bce901b8bba16f011d6c5efc.png)

只需转到“插入->数据透视表”并选择您给定的数据作为输入并将数据透视表创建为新工作表；）

将所有字段放在“行”部分，删除任何子和或总和计算。

因为您没有任何要总结的值，所以您应该隐藏这些列，以获得清晰的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:15:12.897

如果你想使用一个函数。你可以这样做：

```
=IF(MATCH(Tabelle1!A1;(Tabelle1!A:A);0)=ROW();Tabelle1!A1;"") 
```

将此公式插入另一张工作表中。

# html - 使用 HTML 表单输入类型文件？

> ID：12491144
> 
> 赞同：1
> 
> 时间：2012-09-19T08:37:47.497
> 
> 标签：html, forms, http

我有一个 HTML 表单，如下所示：

```
<form action="/AddFile" method="post">
    <input type="file" name="filedata"/>
    <input type="submit" value="Add File"/>
</form> 
```

当我使用它并提交一个名为`foo`内容`bar`的文件时，POST 请求包含的内容`filedata=foo`不`filedata=bar`符合预期。

我究竟做错了什么？如何获取文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:40:46.730

您需要添加`enctype="multipart/form-data"`到表单中的一个。

两个你需要从 $_FILES 获取文件。

三我认为是`file_get_contents($_FILES['filedata']['tmp_name']);`获取文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:26:19.183

您的标记缺少`enctype="multipart/form-data"`文件字段存在时需要的属性。[`form`请参阅有关element](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)的HTML 4.01 规范。

使用`multipart/form-data`，发送文件内容。其余的取决于您的服务器端处理程序。

# c# - 通过编程 Linq/Lambda 创建订单

> ID：12491145
> 
> 赞同：1
> 
> 时间：2012-09-19T08:37:52.260
> 
> 标签：c#, .net, linq, c#-4.0, lambda

我有这个代码：

```
public void CreateOrdering(string field, string direction)
{
    //direction : ASC/DESC
    var result = context.MyTable
        .Where(x => x.Code > 5)
        .OrderBy()
        .Skip(10)
        .Take(5)
        .ToList<MyTable>();
} 
```

我换个说法，我有一个方法，这个方法接收为字符串字段名称，用于排序和方向（“ASC”，“DESC”）

我想创建一个带有字段和在参数中收到的方向的订单。我必须能够：

1.  我希望在这个查询中能够进行升序和降序
2.  通过编程设置订购字段，这里`Code`可能稍后`Id`或其他...
3.  排序必须在 SQL Server 端完成，而不是在返回的列表上

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:16:50.613

您可以在允许 linq 语法的扩展方法中使用反射：

```
public static IQueryable<TSource> OrderBy<TSource>(this IQueryable<TSource> source, string field, string direction)
{
    string orderByMethod = (direction == "ASC") ? "OrderBy" : (direction == "DESC" ? "OrderByDescending" : null);
    if(orderByMethod == null) throw new ArgumentException();

    var propertyInfo = typeof (TSource).GetProperty(field);
    var entityParam = Expression.Parameter(typeof(TSource), "e");
    Expression columnExpr = Expression.Property(entityParam, propertyInfo);
    LambdaExpression columnLambda = Expression.Lambda(columnExpr, entityParam);

    MethodInfo orderByGeneric =  typeof (Queryable).GetMethods().Single(m => m.Name == orderByMethod
                                                    && m.GetParameters().Count() == 2
                                                    && m.GetParameters()[0].ParameterType.GetGenericTypeDefinition() == typeof(IQueryable<>)
                                                    && m.GetParameters()[1].ParameterType.GetGenericTypeDefinition() == typeof(Expression<>));

    MethodInfo orderBy = orderByGeneric.MakeGenericMethod(new [] {typeof(TSource), propertyInfo.PropertyType});

    return (IQueryable<TSource>) orderBy.Invoke(null, new object[] { source, columnLambda });
} 
```

样品用途：

```
internal class SomeType
{
    public string StringValue { get; set; }
}

IQueryable<SomeType> l = new List<SomeType>
    {
        new SomeType {StringValue = "bbbbb"},
        new SomeType {StringValue = "cccc"},
        new SomeType {StringValue = "aaaa"},
        new SomeType {StringValue = "eeee"},
    }.AsQueryable();

var asc = l.OrderBy("StringValue", "ASC");
var desc = l.OrderBy("StringValue", "DESC"); 
```

或者对于您的示例：

```
context.MyTable
        .Where(x => x.Code > 5)
        .OrderBy(field, direction)
        .Skip(10)
        .Take(5)
        .ToList<MyTable>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:42:34.453

我可能误解了你的问题，但你不能这样做：

**上升**

```
.OrderBy(x => x.Property) 
```

**降序**

```
.OrderByDescending(x => x.Property) 
```

**更新**

您需要的是[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。但是，您尝试执行的操作可能会变得非常复杂。作为一个简单的解决方法，您可以执行以下操作：

```
var result = context.MyTable
                    .Where(x => x.Code > 15);

if (direction == "ASC")
{
    result = result.OrderBy(field);
}
else
{
    result = result.OrderByDescending(field);
}

result = result.Skip(10)
               .Take(5)
               .ToList<MyTable>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:53:55.383

```
void Main() {
    // Ascending by some other property
    CreateOrdering(item => item.SomeProperty, SortDirection.Ascending).Dump("Ascending order for SomeClass.SomeProperty");
    // Descending by some other property
    CreateOrdering(item => item.SomeProperty, SortDirection.Descending).Dump("Descending order for SomeClass.SomeProperty");
    // Ascending by the Code property
    CreateOrdering(item => item.Code, SortDirection.Ascending).Dump("Ascending order for SomeClass.Code");
    // Descending by the Code property
    CreateOrdering(item => item.Code, SortDirection.Descending).Dump("Descending order for SomeClass.Code");
}

// I reccomend not using bare strings, and instead use an enum
public enum SortDirection {
     Ascending = 0,
     Descending = 1
}
// Define other methods and classes here
public List<SomeClass> CreateOrdering<T>(Expression<Func<SomeClass, T>> field, SortDirection direction) {
    // query does not get executed yet, because we have not enumerated it.
    var query = context.MyTable
        .Where(x => x.Code > 5);

    if (direction.Equals(SortDirection.Ascending)) {
        query = query.OrderBy (field);
    } else {
        query = query.OrderByDescending (field);
    }

    // query gets executed when the call ToList is made.
    return query.Skip(10)
                .Take(5)
                .ToList();
}

public static class context {
    private static List<SomeClass> _MyTable = new List<SomeClass>() {
        new SomeClass("A", 4), new SomeClass("B", 5), new SomeClass("C", 6),
        new SomeClass("D", 7), new SomeClass("E", 8), new SomeClass("F", 9),
        new SomeClass("G", 10), new SomeClass("H", 11), new SomeClass("I", 12),
        new SomeClass("J", 13), new SomeClass("K", 14), new SomeClass("L", 15),
        new SomeClass("M", 16), new SomeClass("N", 17), new SomeClass("O", 18)
    };

    public static IQueryable<SomeClass> MyTable {
        get {
            return _MyTable.AsQueryable();
        }
    }
}

public class SomeClass {
    public SomeClass(string property, int code) {
        this.SomeProperty = property;
        this.Code = code;
    }

    public string SomeProperty { get; set; }

    public int Code { get; set; }
} 
```

![LINQPad 中的执行结果](../Images/a33c85448b97535a41bb358c14cf795e.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:43:27.263

通常你会这样做：

```
.OrderBy(x => x.yourField) 
```

或者

```
.OrderByDescending(x => x.yourField) 
```

如果您需要您的领域是动态的，请检查[此](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T08:44:57.993

如果该字段作为 a 传递`string`（例如，当使用 a 时`ObjectDataSource`），您可以使用 a 对其进行映射`switch`：

```
var qry = context
  .MyTable
  .Where(x => x.Code > 5);

switch(orderBy) {
  case "MyField": qry = qry.OrderBy(r => r.MyField); break;
  case "MyField DESC": qry = qry.OrderByDescending(r => r.MyField); break;
}

// By the way, ToList can infer the generic type if you don't
// want to state it explicity
var result = qry.Skip(10).Take(5).ToList(); 
```

查询不会在 之前执行`ToList`，并且至少使用 EF 它是在 SQL Server 上执行的。我承认这`switch`是相当多的样板，但它确实非常可靠和快速。

# jquery - Jquery AJAX 到外部 SOAP Web 服务

> ID：12491149
> 
> 赞同：0
> 
> 时间：2012-09-19T08:38:06.873
> 
> 标签：jquery, ajax, soap, wsdl

最后，我将开始我的第一个线程。仅仅通过搜索，我就得到了很多问题的答案，而且至少需要 2-3 年。但是现在，我找不到我的问题的任何答案。所以我想这也可以帮助其他人！

我在另一台服务器上有一个 SOAP 网络服务。

我回来的网址是：[https ://dummy.de/testarea/soap/index.php?wsdl](https://dummy.de/testarea/soap/index.php?wsdl)

不，我需要取回一个 XML 文件。我知道，跨域 ajax 调用是不可能的，但我找到了一个 jquery 脚本，这使得它成为可能：

[https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

因此，使用该解决方法，我的代码如下所示：

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: 'https://xxxxxxx/testarea/soap/index.php?wsdl',
        dataType: "xml",
        success: function(xml) {
               alert(xml);
       },
        error: function(xhr, xml) { 
                       alert(xml); 
       }
    });
}); 
```

当我调试时，var XML 显示一个值为“”的 responseText

现在，我不知道问题出在哪里 - 跨域、SOAP Web 服务等

我对 SOAP ajax 请求并不十分熟悉，因此非常感谢您提供有关此方面的帮助和信息！

非常感谢阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:59:14.133

您是否在本地 SOAP Web 服务上对此进行测试？

如果是这样，它将不起作用，因为您使用的插件会通过`query.yahooapis.com`站点获取数据。

因此，如果您的 web 服务对世界不可用，那么 yahoo api 将无法访问它。

# android - 将 android 应用程序连接到远程应用程序服务器

> ID：12491154
> 
> 赞同：0
> 
> 时间：2012-09-19T08:38:28.620
> 
> 标签：android, url, application-server

我正在开发应该连接到应用程序服务器的 android 应用程序。

我要问的是，我应该在代码中静态编写此应用程序服务器的 url，还是 android 提供了一种方法来根据需要动态更改 url？

考虑到应用一旦上传到play store，应用服务器应该保留地址，永远不要更改，以免影响android应用。

我只是在询问在这些情况下的最佳实践。

谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:45:10.700

虽然那会很好，但可能不值得麻烦。我认为按照目前的方式在 URL 中编码是可以的。如果由于某种原因您更改了端点，请尝试这样做，以便您发送一条错误消息，指出用户需要更新应用程序（并使用更新的 URL 发布新版本）。这也是间接让您的用户更新到最新版本的好方法，因此您无需维护太多！

此外，如果您的服务器移动，这仍然不是问题，因为您仍将使用相同的域名指向您的服务器！

（这是假设它仍然是同一个域名，只是端点发生了变化，并且您不需要将以前的端点重用于其他事情。是的，很多假设:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:00:04.423

您可以在代码中编写重定向服务器的 URL，并让该服务器根据需要重定向到不同的 URL。例如，最简单形式的重定向“服务器”可以只是存储在您公司网站上的文本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:45:42.800

最好考虑一下你的服务器将来会搬迁，因为你永远不知道。除非您愿意随时升级您的应用程序，否则动态配置是最好的方法。

# ios - iOS PDF 解析 Type 1 Fonts 指标

> ID：12491155
> 
> 赞同：2
> 
> 时间：2012-09-19T08:38:29.477
> 
> 标签：ios, parsing, pdf, metrics, font-size

我正在（尝试）编写“PDF 到纯文本解析器”，并且以 pdfKitten 为例。

我的 PDF 包含一种 type1 字体，该字体包含在“标准 14 种字体”中。随后，PDF 字体字典不包括“Widths”“FirstChar”“LastChar”的键。

我假设，因为它是“标准 14 种字体”之一（实际上是 2，Courier 和 Courier-bold），iOS 框架在某处包含这些指标。

如何访问这些指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:38:06.850

标准 PDF 字体的度量通常内置在每个 PDF 查看器应用程序中。这些指标通过相应的 .afm 文件公开，每种字体一个。它们可以从 Adob​​e 网站下载，但现在我找不到链接。
您可以从任何 iText / iTextSharp 发行版中获取这些文件，我确信还有其他产品包含这些文件。

# javascript - jQuery崩溃页面？

> ID：12491158
> 
> 赞同：0
> 
> 时间：2012-09-19T08:38:36.320
> 
> 标签：javascript, jquery, colorbox

当我尝试加载一个页面时，有时它会崩溃而不加载，我的浏览器说它是 jQuery，但那是由 Google 托管的，如果我删除它，但其他一切似乎都正常，任何人都可以看到我的代码中的任何错误或知道我在哪里可以去验证一下吗？

```
$(document).ready(function(){
  $(".group1").colorbox({rel:'group1'});
  $(".group2").colorbox({rel:'group2', transition:"fade"});
  $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});

  $('#viewport').carousel('#simplePrevious', '#simpleNext');

  $('.viewer').each(function() {
    $(this).carousel('.viewer #simplePrevious', '.viewer #simpleNext');
  });

  //$('#slider-stage').carousel('#previous', '#next');
  $('#tab-container').easytabs();

  // Dropdown, show more text
  $('.useful-links ul li a').on('click', function () {
    $(this).next('p').toggle();
    return false;  
  });
}); 
```

* * *

如果我对此发表评论

```
//$('.viewer').each(function() {
//    $(this).carousel('.viewer #simplePrevious', '.viewer #simpleNext');
//}); 
```

一切正常，有些页面实际上没有轮播查看器，这可能是问题所在，我应该先检查元素是否存在吗？

# grails - 为什么我不能从控制器的脚手架模板访问注入的服务？

> ID：12491169
> 
> 赞同：1
> 
> 时间：2012-09-19T08:39:23.647
> 
> 标签：grails, scaffolding

我有一个看起来像这样的控制器：

```
class CategoryController {

    static scaffold = true

    def messageSource

    def categoryService
    ...
} 
```

我想修改控制器模板以在需要时使用服务：

```
class ${className}Controller {

    static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

    def list() {
        def domainObjectsProperty = ... //long complex line
        render view: "/${domainClass.propertyName}/list", model: [(domainObjectsProperty): ${domainClass.propertyName}Service.list()]
    }

    ...
} 
```

表达式`${domainClass.propertyName}Service`被评估为`categoryService`，但我收到消息：

> 没有这样的属性：categoryService 类：mypackage.CategoryController

同时，当我调用使用 CategoryService 的 CategoryController 的非脚手架方法时，一切都很好。

是什么导致了这种行为以及如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:37:44.557

我想你忘记了服务注入

```
class ${className}Controller {

   def ${domainClass.propertyName}Service

   ... 
} 
```

# objective-c - (lldb) 以十六进制打印 unsigned long long

> ID：12491170
> 
> 赞同：16
> 
> 时间：2012-09-19T08:39:35.420
> 
> 标签：objective-c, debugging, hex, lldb, unsigned-long-long-int

我正在尝试调试我的 Objective-C 程序，我需要以`unsigned long long`十六进制打印我的变量。我正在使用`lldb`调试器。

为了打印`short`为十六进制，[您可以使用](http://lldb.llvm.org/varformats.html)：

```
(lldb) type format add --format hex short
(lldb) print bit
(short) $11 = 0x0000 
```

但是，我无法使其适用于`unsigned long long`.

```
// failed attempts:
(lldb) type format add --format hex (unsigned long long)
(lldb) type format add --format hex unsigned long long
(lldb) type format add --format hex unsigned decimal
(lldb) type format add --format hex long long
(lldb) type format add --format hex long
(lldb) type format add --format hex int 
```

我正在模拟器上运行 iOS 应用程序，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-03-05T08:43:40.700

您可以使用格式字母。链接到 GDB 文档（也适用于 LLDB）：[https ://sourceware.org/gdb/current/onlinedocs/gdb/Output-Formats.html#Output-Formats](https://sourceware.org/gdb/current/onlinedocs/gdb/Output-Formats.html#Output-Formats)

```
(lldb) p a
(unsigned long long) $0 = 10
(lldb) p/x a
(unsigned long long) $1 = 0x000000000000000a 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-23T10:35:00.407

type format add 期望类型名称为单个单词——如果它是多个单词，则需要引用参数。例如

```
 2    {
   3      unsigned long long a = 10;
-> 4      a += 5;
   5      return a;
   6    }
(lldb) type form add -f h "unsigned long long"
(lldb) p a
(unsigned long long) $0 = 0x000000000000000a
(lldb) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:11:22.773

在阅读了[文档](http://lldb.llvm.org/varformats.html)的其余部分后，我发现可以执行以下操作：

```
// ObjC code
typedef int A; 
```

然后，

```
(lldb) type format add --format hex A 
```

这给了我这样的想法`typedef unsigned long long BigInt`：

```
// ObjC code
typedef unsigned long long BigInt; 
```

然后，

```
(lldb) type format add --format hex BigInt 
```

奇迹般有效。

# php - 提交按钮需要按两次才能加载页面

> ID：12491172
> 
> 赞同：0
> 
> 时间：2012-09-19T08:39:46.707
> 
> 标签：php, html, wordpress, cookies

我创建了一个双语言网站，其表单在提交时会保存一个 cookie，然后每个页面都会检查 cookie 以查看要加载的语言。

我遇到的问题是提交按钮需要按两次才能加载页面并切换语言。

这是我的表格：

```
<form action="<?php the_permalink(); ?>" name="region" method="post">
   <input type="submit" name="region" value="English" id="en-button" />
   <input type="submit" name="region" value="Cymraeg" id="cy-button" />
</form> 
```

这是在我的functions.php文件中保存cookie：

```
function set_region_cookie()
{
    if(isset($_POST['region']))
    {
        // Set Cookie
        setcookie('region', $_POST['region'], time()+1209600);
        // Reload the current page so that the cookie is sent with the request
        header('Region: '.$_SERVER['REQUEST_URI']);
    }
}
add_action('init', 'set_region_cookie'); 
```

这就是我在每个内容区域周围加载不同内容的内容：

```
<?php $language = $_COOKIE["region"];
if ($language == "English") { ?>
    <?php echo the_field('english_content'); ?>
<?php } else { ?>
    <?php echo the_field('welsh_content'); ?>
<?php } ?> 
```

语言正确切换，但仅当您单击提交按钮两次时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:13:35.977

事实证明，问题的出现是由于 cookie 的工作方式，[在这个问题中](https://stackoverflow.com/questions/5936054/php-set-cookie-issue)找到了以下（重要）信息：

> cookie 的工作方式如下：
> 
> 1.  你提出请求
> 2.  服务器将 cookie 标头发送回客户端
> 3.  页面加载 - 在此页面加载时 Cookie 对 PHP 不可见
> 4.  刷新
> 5.  客户端向服务器发送 cookie 标头
> 6.  服务器收到 cookie 标头，因此 PHP 可以读取它
> 7.  页面加载 - Cookie 在此处可见。

一开始我并没有真正注意到，但问题中实际上有一行代码来处理刷新页面以便服务器接收 cookie：-

```
// Reload the current page so that the cookie is sent with the request
header('Region: '.$_SERVER['REQUEST_URI']); 
```

将其更改为：

```
// Reload the current page so that the cookie is sent with the request
header('Location: '.$_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:43:31.720

尝试改用选择字段。浏览器可能只是因为有两个提交按钮而吓坏了。然后你可以做一些类似`document.getElementById('theSelectMenu').onchange = function(){ document.getElementById('theForm').submit(); }`或更好的事情，但使用 jQuery。

# c++ - 命令解析器的返回集

> ID：12491174
> 
> 赞同：0
> 
> 时间：2012-09-19T08:39:54.693
> 
> 标签：c++, parsing, command

我需要编写一个解析器来解析命令。5个这样的命令是：

```
"a=10"
"b=foo"
"c=10,10"
"clear d"
"c push_back 2" 
```

在第一个示例中，set 是命令，a 是对象，10 是值。

你认为解析器应该为上面的每一行返回什么？

这是我的想法：

```
 "a=10" -> SET (COMMAND_ENUM), INT (VALUE_TYPE), "a", ("10")
   "b=foo" -> SET (COMMAND_ENUM), STRING (VALUE_TYPE), "b", ("foo") 
```

这是一个好方法吗？这个问题的标准方法是什么？我应该派人代替吗？

我有一个检查与对象关联的类型的函数。例如，`a`上面是类型`INT`并且必须分配一个`INT`值，否则解析器应该返回或抛出某种错误。我还有一个转换函数，用于将值从字符串转换为所需的类型。如果无法进行转换，则会抛出这些。如果解析器试图将值从字符串转换为所需的类型，那么通过 boost::variant 返回它们可能是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:45:13.653

你需要为你想要识别的命令语言至少想出一个半正式的语法，因为你已经留下了很多模糊的东西（例如，`b=foo`你想`b`成为一个变量名但`foo`成为一个字符串字面量。你如何区分它们？如果一个字符序列在赋值的右侧表示一个标识符，但如果它在左侧则表示一个字面量？还是单个字符表示一个标识符，但多个字符表示文字？） In`c=10,10`表示`10,10`列表还是向量？写一个语法至少会迫使你思考这些事情，它也至少可以作为如何编写你的解析器的指南（最多它会是可以自动翻译到你的解析器中的东西）。

通过思考语句应该如何表示为抽象语法树 (AST)，您走在了正确的轨道上，但是您需要退后一步，从具体语法的角度来看您想要什么。

# ruby-on-rails - gem 1.8.23 install rails 3.2.8 失败，无法解决依赖关系

> ID：12491177
> 
> 赞同：0
> 
> 时间：2012-09-19T08:40:24.517
> 
> 标签：ruby-on-rails, rubygems, installation

我正在尝试将 Rails 3.2.8 安装到没有互联网连接的 linux 机器上。我已经手动下载了所有相关的 gem 包并将它们复制到 linux 框中。当我尝试安装其中一些软件包时，出现错误。例如：

```
[jw@web gems]$ sudo /usr/local/bin/gem install --local ./activemodel-3.2.8.gem
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: activemodel requires builder (~> 3.0.0) 
```

奇怪的是，有些包可以这样安装。例如，*构建器*已经安装。请注意，所需的所有依赖项都在那里。

为什么依赖项无法解决？

我的环境：

```
Ruby: ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
Rubygem: 1.8.23 
```

我安装的宝石：

```
[jw07@web gems]$ gem list

*** LOCAL GEMS ***

activesupport (3.2.8)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.1.3)
bundler (1.2.0)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.1)
io-console (0.3)
journey (1.0.4)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
minitest (2.5.1)
multi_json (1.3.6)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rake (0.9.2.2)
rdoc (3.9.4)
sprockets (2.5.0)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:53:34.127

尝试升级到最新的 RubyGems：

```
gem update --system 
```

并安装带有依赖项的rails：

```
gem install rails --include-dependencies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:00:31.037

看起来 Rubygems 版本不是问题。

您看到 rails 需要 gem builder ~> 3.0.0，但您有 3.1.3 不匹配（`~>`意味着它将匹配 3.0.x，但不匹配 3.1.x）。您必须安装 builder 3.0.3。

另一种可能是您的 Gemfile 中有另一个 gem 需要 builder 3.1.x，从而导致冲突。如果您提供了 Gemfile，将会很有帮助。

# c++ - 如何使用 SendMessage 函数发送用户数据？

> ID：12491182
> 
> 赞同：1
> 
> 时间：2012-09-19T08:41:01.103
> 
> 标签：c++, winapi

如何使用 SendMessage 或 PostMessage 函数发送结构或指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T09:12:59.053

这是一个简单的例子：

```
typedesf struct tagMY_STRUCT{
    unsigned int a;
    unsigned int b;
    unsigned int c;
}MY_STRUCT;

//Some code which sends message
MY_STRUCT *pStruct = new MY_STRUCT;

pStruct->a = 5;
pStruct->b = 4;
pStruct->c = 1;

SendMessage(hWnd, WM_USER + 1, 0, (LPARAM)pStruct);

//WndProc

case (WM_USER + 1) :
{
    MY_STRUCT *pStruct = (MY_STRUCT*)lParam);
    if(pStruct)
    {
        int a = pStruct->a;

        delete pStruct;
    }

}
break; 
```

*   永远不要尝试在进程之间进行。首先学习 IPC 基础知识。

*   不要忘记使用 **delete**释放指向 struct 的指针。

**更新**

正如**Remy Lebeau**在评论中提到的那样，您还可以使用 new/malloc 在堆栈上分配结构，而不是在堆上，因为[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)会阻塞线程，直到它在 WndProc 中处理。这不适用于将消息添加到窗口的消息队列并立即返回的[PostMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)，所以它需要堆块。

但是，如果您打算传递更复杂的数据结构，我建议使用堆分配而不是堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:55:06.050

发送/邮寄到哪里？

通常，通过在一端转换指向 LParam 或 WParam 的指针并将其转换回另一端来进行进程内通信是相当简单的。不要在本地堆栈上创建对象/结构/任何东西，尤其是在 PostMessaging 时 - 使用带有 new() 的动态分配。考虑对象的生命周期——如果接收者不需要保留 PostMessaged 对象或传递它，它应该 delete() 它。

对于进程间通信，谷歌搜索“WM_COPYDATA”。

# c++ - Opencv：使用高斯混合模型 (GMM) 获得期望最大化 (EM)

> ID：12491183
> 
> 赞同：0
> 
> 时间：2012-09-19T08:41:04.990
> 
> 标签：c++, opencv, gaussian, mixture-model, expectation-maximization

我正在尝试使用 GMM 来找到视频帧中不同颜色的期望最大化。然后据此，我将确定哪个是主色。

为此，我的问题是如何执行基于 GMM 的 EM 来获取和比较对不同颜色的期望？

# java - 如何为 websphere MQ 创建自定义通道以及如何使用 java 客户端程序进行配置

> ID：12491187
> 
> 赞同：2
> 
> 时间：2012-09-19T08:41:23.940
> 
> 标签：java, ibm-mq

如何为 websphere MQ 创建自定义通道以及如何使用 java 客户端程序进行配置，

我想创建哪个通道来向 websphereMQ 发送消息（服务器连接通道可以）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:04:02.360

您将需要为您的客户端应用程序创建一个服务器连接 (SVRCONN) 通道，以将消息发送到 WebSphere MQ 队列。应用程序是否使用 Java、C、C# 等开发并不重要。

您可以使用 MQ Explorer (GUI) 或 RUNMQSC(cmd line) 来创建 SVRCONN 通道。在 MQExplorer 中，右键单击“Channels”并选择“Server-Connection channel”菜单。将弹出一个向导，指导您创建频道。

您也可以使用“RUNMQSC”命令行工具。从命令提示符运行“runmqsc”，它会打开一个 MQ shell。在 shell 中以最简单的形式运行以下命令（将 <> 替换为您的首选名称）。

```
DEFINE CHANNEL(<some channel name>) CHLTYPE(SVRCONN) 
```

您还可以为[这里描述的此命令指定许多其他属性](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/sc11010_.htm)

许多 Java/JMS 样本随 MQ 一起提供。SimplePTP.java 解释了如何使用 SVRCONN 连接到队列管理器并发送/接收消息。

# javascript - 从字符串变量运行javascript函数并传递参数

> ID：12491188
> 
> 赞同：2
> 
> 时间：2012-09-19T08:41:24.877
> 
> 标签：javascript, jquery, function, jquery-callback

我需要从我的 costom jquery 插件中调用用户定义的 javascript 函数并将参数传递给它，例如：

```
function test(data)
    {
      var myfunc="function(data){alert(data);}"; //this is user defined function I   retrieved from html tag attribute
      var fn=new Function("("+myfunc+")();");
      fn.apply(this,arguments);
      return fn;
} 
test("hello"); 
```

结果未定义，如何将数据参数从测试函数传递给用户定义函数？提前致谢！

问题更新：

我正在编写一个 jquery 插件来处理 ajax 请求，很像 asp.net mvc unobtrusive ajax，我从 html 标记 attrbute 获取 ajax callfack 函数，例如：

```
<div data-ajax-success="function(data,status,xhr){alert(data);}".... 
```

data-ajax-success 属性的值是用户定义的函数，它可以是以下格式：

```
data-ajax-success="function(data,status,xhr){alert(data);}"
data-ajax-success="function(data){alert(data);}"
data-ajax-success="function(){alert('hello');}"
data-ajax-success="functionName" 
```

我需要将此属性值解析为 javascript 函数并将 jquery ajax 回调参数传递给此函数，其中 data-ajax-success 值为函数名称，我可以使用 Micrsoft jquery-unobtrusive-ajax.js 中定义的以下方法正确调用它：

```
function getFunction(code, argNames) {
        var fn = window, parts = (code || "").split(".");
        while (fn && parts.length) {
            fn = fn[parts.shift()];
        }
        if (typeof (fn) === "function") {
            return fn;
        }
        argNames.push(code);
        return Function.constructor.apply(null, argNames);
    } 
```

但是当 data-ajax-success 是函数体时，我无法将参数传递给它，这是我处理 ajax 回调的示例代码：

```
loadData: function (index, options) {
complete: function (xhr,status) {
            $(context.loading).hide(context.loadingDuration);
            getFunction(context.onComplete, ["xhr", "status"]).apply(this, arguments);
            },
        success:function (data, status, xhr) {
            $(context.updateTarget).html(data);
            getFunction(context.onSuccess, ["data", "status", "xhr"]).apply(this, arguments);
            },
            error: getFunction(context.onFailure, ["xhr", "status", "error"])
});

      $.ajax(options);
  } 
```

任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:56:46.017

MDN 描述了 Function 对象的语法，如下所示：

```
new Function ([arg1[, arg2[, ... argN]],] functionBody) 
```

下面是对应的例子：

```
// Example can be run directly in your JavaScript console

// Create a function that takes two arguments and returns the sum of those arguments
var adder = new Function("a", "b", "return a + b");

// Call the function
adder(2, 6);
// > 8 
```

应用于您的示例代码，它应为：

```
var fn=new Function("data",myfunc); 
```

参考：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:49:47.947

您没有将参数传递给`fn`函数。

更改此部分：

```
var fn=new Function("("+myfunc+")();"); 
```

对此：

```
var fn=new Function("("+myfunc+")("+data+");"); 
```

但是，如果您要定义这样的函数，则该`data`变量必须包含一个 json 字符串：

```
var fn=new Function("("+myfunc+")("+JSON.stringify(data)+");"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:54:48.920

我认为您没有正确使用 Function 构造函数。请参阅此链接以供参考：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FFunction#Example.3A_Specifying_arguments_with_the_Function_constructor](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FFunction#Example.3A_Specifying_arguments_with_the_Function_constructor)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T03:21:49.607

我通过修改这个微软方法解决了这个问题：

```
 function getFunction(code, argNames) {
    var fn = window, parts = (code || "").split(".");
    while (fn && parts.length) { fn = fn[parts.shift()]; }
    if (typeof (fn) === "function") { return fn; } //onSuccess="functionName"
    if ($.trim(code).toLowerCase().indexOf("function")==0) { return new Function("return (" + code + ").apply(this,arguments);");} //onSuccess="function(data){alert(data);}"
    argNames.push(code);
    try {return Function.constructor.apply(null, argNames); //onSuccess="alert('hello');return false;"
    }catch(e){alert("Error:\r\n"+code + "\r\nis not a valid callback function");}
} 
```

# javascript - 解析 dateBox() 中的时间，或消除 datebox 中的时间

> ID：12491189
> 
> 赞同：0
> 
> 时间：2012-09-19T08:41:25.967
> 
> 标签：javascript, google-apps-script

有没有办法解析 dateBox() 中的时间，或者更好地把它全部消除？我希望有人能够使用 dateBox() 仅选择日期，但想摆脱时间并使用我为时间创建的另一个函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:56:17.073

一种简单的方法是这样的：

```
var date = new Date(e.parameter.start);// convert the string to a full date object (with time value) (the date widget is named 'start' in this example)
var dateOnly = date.setHours(0,0,0,0); // set time to '0' (hours,min,sec,millisec)or use the hours and minutes you get from elsewhere... 
```

您可以查看[此示例表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dEFnZzNIMG1udUpIcUdaNGhUeEU4cXc)，我使用它来组合来自 2 列（日期和时间）的数据以创建完整的日期对象

# postgresql - 端口 phpmyadmin 和 openerp

> ID：12491194
> 
> 赞同：0
> 
> 时间：2012-09-19T08:41:41.897
> 
> 标签：postgresql, phpmyadmin, openerp

我是 Ubuntu 上 PHP 的新手，我的电脑已经安装了 OpenERP 并且它使用 PosgresSQL 作为数据库，我可以安装 PhpMyadmin 吗？

如果端口是两个数据库之间的冲突，如何应对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:45:12.537

**安装phpmyadmin + mysql**应该没有问题， mysql 和 postgresql 监听不同的端口，所以不会有任何冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T12:33:45.477

这可能是由于服务器进程已经在运行，所以您需要终止该进程，但我不确定它是否适合您。

请试试这个命令

ps斧头| grep postmaster 或类似的来确定服务器上已经运行的任何进程。

# wordpress - wordpress 响应式布局中的额外“空间”

> ID：12491195
> 
> 赞同：1
> 
> 时间：2012-09-19T08:41:41.773
> 
> 标签：wordpress, responsive-design, media-queries

我最近下载了[Gridly](http://www.eleventhemes.com/gridly-theme/) wordpress 主题（响应式），并使用 css 媒体查询来调整不同宽度的布局 - 1020px、610px、480px、320px。

[在这里](http://wordpress.jssim.com/)查看我的页面。

当我将窗口从 1020px 最小化到 610px 和 610px 到 480px 时，网格会平滑地重新排列。当我从 480 像素切换到 320 像素时，会出现“问题”，因为弹出的特色图像缩略图下方似乎有一个额外的空间，导致一个帖子图像和下一个图像之间存在很大差距。当我从横向视图旋转到纵向视图时，这在我的笔记本电脑上的浏览器和我的 iPhone 上都会发生。

当我从 320 像素切换到 480 像素（将 iPhone 从纵向旋转到横向）时，也会发生同样的问题，只是这次图像重叠。

有谁知道可能是什么原因造成的？

一般来说，我对媒体查询、php 和自定义 wordpress 主题相当陌生，所以我可能错过了一些基本的编码元素。

非常感谢您提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:26:23.180

jQuery Masonry 插件，在努力将东西重排到瘦窗口中，正在向`<div class="post">`s. 添加内联样式。如果不修改该插件（或在特定屏幕宽度以下禁用它），您可以在适当的媒体查询中粗暴地覆盖这些样式。在我看来，这样的事情可以解决问题：

```
#post-area .post {
    float: left;
    top: auto ! important;
    display: block;
    position: relative ! important;
} 
```

根据[这个答案](https://stackoverflow.com/questions/5849535/jquery-masonry-and-media-queries-reload-masonry)，对于媒体查询的调整大小， [Isotope 插件](http://isotope.metafizzy.co/)可能比 Masonry 工作得更好。

# asp.net-mvc - selectList.SelectedValue 为空

> ID：12491196
> 
> 赞同：1
> 
> 时间：2012-09-19T08:41:43.643
> 
> 标签：asp.net-mvc, selectlist

当我为下拉列表实现代码时，我不断收到此错误。这是我的代码：

```
String sort = "";
String day_hire = "Daily hire rate";
String man_date = "Manufacturing date";
string man_n = "Manufacturer's name";

if (sl2.SelectedValue.ToString()== man_n)
{
    sort = "man.manufacturer_name";

}
else if (sl2.SelectedValue.ToString() == man_date)
{
    sort = "veh.manufacturing_date";
}
else if (sl2.SelectedValue.ToString() == day_hire) 
{
    sort = "veh.daily_hire_rate";
}
else
{
    sort = "veh.daily_hire_rate"; 
} 
```

这是在构造函数中。鉴于我有：

```
<%=Html.DropDownList ("sort",((SelectList)ViewData["selectOptions2"]))%> 
```

这是一个运行时错误，显示`sl2.SelectedValue.ToString()`为空。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:21:02.007

当您执行 POST 时，所选值将存储在您在此处声明的“排序”值中：

```
<%=Html.DropDownList ("sort",((SelectList)ViewData["selectOptions2"]))%> 
```

所以你需要这样做：

```
[HttpPost]
public void Whatever()
{
    var selectedItem = Request.Form["sort"] // Or however you want to pick up the value.
} 
```

[这是一篇非常好的文章](http://codeclimber.net.nz/archive/2009/08/10/how-to-create-a-dropdownlist-with-asp.net-mvc.aspx)，它更详细地介绍了。

# javascript - JQuery 工具提示位置

> ID：12491197
> 
> 赞同：1
> 
> 时间：2012-09-19T08:41:43.893
> 
> 标签：javascript, jquery, html, css, tooltip

我一直在研究一个简单的工具提示（参见下面的小提琴），但遇到了一些定位问题。我希望提示显示在被点击的链接的中心和上方。目前左上角位于鼠标单击处。我试图将这个位置偏移工具提示的一半，但没有成功。

[http://jsfiddle.net/Ricco/CBf4C/](http://jsfiddle.net/Ricco/CBf4C/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:52:45.330

查看[http://jsfiddle.net/CBf4C/3/上的更改](http://jsfiddle.net/CBf4C/3/)

您需要获取单击元素的位置（*使用[`.position()`](http://api.jquery.com/position/)*），获取工具提示的尺寸，[`.outerWidth()`](http://api.jquery.com/outerWidth/)然后[`.outerHeight()`](http://api.jquery.com/outerHeight/)根据这些计算..

实际代码是

```
$('a[title]').click(function(e) {

    //fadetooltip and display information
    $('body').append('<div class="tooltip"><div class="tipBody"></div></div>');
    tip = $(this).attr('title');
    var tooltip = $('.tooltip'); // store a reference to the tooltip to use it later
    tooltip.fadeTo(300, 0.9).children('.tipBody').html( tip );

    // calculate position of tooltip
    var el = $(this),
        pos = el.position(), // get position of clicked element
        w = el.outerWidth(), // get width of clicked element, to find its center
        newtop = pos.top - tooltip.outerHeight() , // calculate top position of tooltip
        newleft = pos.left + (w/2) - (tooltip.outerWidth()/2); // calculate left position of tooltip

    //set position
    $('.tooltip').css('left', newleft )  ;
    $('.tooltip').css('top',  newtop );

    hideTip = false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:35:47.900

[http://jsfiddle.net/CBf4C/15/](http://jsfiddle.net/CBf4C/15/) - 看到这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:57:21.757

查看我在这里所做的更改：http: [//jsfiddle.net/CBf4C/9/](http://jsfiddle.net/CBf4C/9/)

# ruby-on-rails - 连接到扭矩箱记录器

> ID：12491198
> 
> 赞同：2
> 
> 时间：2012-09-19T08:41:55.267
> 
> 标签：ruby-on-rails, jboss, torquebox

如何从（例如）计划作业中重新使用现有的 Torquebox/JBoss 记录器？

如果我做

```
@logger = TorqueBox::Logger.new()
@logger.debug "hello" 
```

......它无处可去。我也尝试`TorqueBox::Logger.new("my_rails_app_name")`过同样的结果。

# jsp - 使用 JSP 和 servlet 上传文件并转换为字节

> ID：12491201
> 
> 赞同：0
> 
> 时间：2012-09-19T08:42:17.200
> 
> 标签：jsp, servlets, file-upload, byte, indexoutofboundsexception

我有一个 JSP 页面和一个 servlet。JSP 有两个输入，一个是文件，另一个是文本输入。当用户单击提交按钮时，表单操作指向 Servlet 的 do Post()。在 Do Post () 我将代码分为两部分。一部分从 Jsp 页面中检索文本输入和文件名，另一部分将文件转换为字节。

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                                                                                    IOException {
    response.setContentType(CONTENT_TYPE);
    PrintWriter out = response.getWriter();

    //This is 1st part
    //For Converting the File into Stream of Bytes
    String contentType = request.getContentType();
    //System.out.println("Content type is :: " +contentType);

    if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) {
        DataInputStream in = new DataInputStream(request.getInputStream());
        int formDataLength = request.getContentLength();
        byte dataBytes[] = new byte[formDataLength];
        int byteRead = 0;
        int totalBytesRead = 0;
        int k = -1;
        while (totalBytesRead < formDataLength) {
            byteRead = in.read(dataBytes, totalBytesRead, formDataLength);

            totalBytesRead += byteRead;
            //System.out.println(dataBytes[++k]);

        }
        for (int i = 0; i < formDataLength; i++) {
            System.out.print((char)dataBytes[i]);

        }

        System.out.println("Converted");
        out.println("<HTML>");
        out.println("<HEAD>");
        out.println("</HEAD>");
        out.println("<BODY>");
        out.println("<H1>UPLOADED FILE</H1>");
        out.println("<BODY>");
        out.println("</HTML>");
    } else
        System.out.println("asa");

    //This is the 2nd part
    // Create a new file upload handler
    DiskFileUpload upload = new DiskFileUpload();

    // parse request
    List items = null;

    // get uploaded file
    try {
        items = upload.parseRequest(request);
    } catch (FileUploadException e) {
    }
    FileItem file = (FileItem)items.GET(1);
    String DocTitle = file.getName();

    int len = DocTitle.length(), pos = 0, j = 2;
    for (int i = 0; i < len; i++) {

        if (DocTitle.charAt(i) == 46) {
            pos = i;

        }

    }

    String s = DocTitle.substring(pos + 1, len);
    System.out.println("TheContent Type is: " + s);

    // get taget filename
    FileItem name = (FileItem)items.get(1);
    String fileName = name.getString();
    System.out.println("Filename: " + fileName + "." + s);

} 
```

问题是，如果我只运行第一部分或第二部分，代码可以工作，但它们似乎不起作用。如果两者放在一起，那么第一部分会被执行，第二部分会抛出

> java.lang.IndexOutOfBoundsException：索引：0，大小：0 在 java.util.ArrayList.RangeCheck(ArrayList.java:547)

请帮我解决以上问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:48:49.203

您的具体错误是您尝试读取 HTTP 请求正文两次。第一次使用`request.getInputStream()`显然唯一的目的是将其打印到标准输出（也许是粗心的调试尝试？）。第二次使用 Apache Commons FileUpload。但是，它会通过 检索一个完全空的请求正文`request.getInputStream()`，因为您已经预先使用了它！客户端不会再次重新发送文件，以便您可以再次读取它（使用 Apache Commons FileUpload）。

完全删除第一个块，它应该可以工作。

哦，请停止阅读roseindia.net。该站点仅显示误导性代码示例，并教授非常糟糕的做法，这完全使初学者感到困惑。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# actionscript-3 - 在 AS3 中创建（适当的）时间计数器

> ID：12491213
> 
> 赞同：6
> 
> 时间：2012-09-19T08:43:22.443
> 
> 标签：actionscript-3, timer

如何在 as3 中创建计时器？在 google 上进行一些简单的搜索会将您指向 AS3 类 Timer，它实际上是事件计数器，而**不是适当的时间**计数实用程序。

我已经看过这个[http://blogs.adobe.com/pdehaan/2006/07/using_the_timer_class_in_actio.html](http://blogs.adobe.com/pdehaan/2006/07/using_the_timer_class_in_actio.html)并且我有点担心它应该是官方文档。

**问：**问题究竟出在哪里？

**答：** Timer 类在一堆事件中执行操作，如果你有一个相当繁重的应用程序，我敢打赌，如果你用它来计算秒数、毫秒数或其他什么，它会扭曲你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:16:10.553

如果您希望准确*测量*较短的时间间隔，您只需使用`getTimer()`函数 ( `flash.utils.getTimer`)，它会返回自 Flash 播放器启动以来经过的毫秒数。典型的简单 StopWatch 类是：

```
public class StopWatch {
    private var _mark:int;
    private var _started:Boolean = false;

    public function start():void { _
        mark = getTimer(); 
        _started = true;
    }

    public function get elapsed():int { 
        return _started ? getTimer() - _mark : 0; 
    }
} 
```

[更多信息：](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:49:34.093

你如何覆盖这个？

我们也只是在可以正确计算时间的脚本中使用**Date类。**

1.  创建一个新的 AS3 文档
2.  添加 3 个名为 minText、secText、MilText 的文本框和一个名为 start_btn 的按钮
3.  在第一帧添加此代码：

var stt:int;// 我们使用这个变量来跟踪开始时间作为时间戳
var myTimer:Timer = new Timer(1); // 这是我们的计时器

```
var starttime:Date; // pretty obvious
var actualtime:Date; // pretty obvious

myTimer.addEventListener(TimerEvent.TIMER, stopWatch); // we start counting with this counter

start_btn.addEventListener(MouseEvent.CLICK, startClock); // add a button listener to start the timer

function startClock(event:MouseEvent):void
{
    starttime = new Date(); // we get the moment of start
    stt = int(starttime.valueOf().toString()); // convert this into a timestamp
    myTimer.start(); // start the timer (actually counter)
}

function stopWatch(event:TimerEvent):void
{
    actualtime = new Date(); // we get this particular moment       
    var att:int = int(actualtime.valueOf().toString()); // we convert it to a timestamp

    // here is the magic
    var sec:int = (Math.floor((att-stt)/1000)%100)%60; // we compute an absolute difference in seconds
    var min:int = (Math.floor((att-stt)/1000)/60)%10; // we compute an absolute difference in minutes
    var ms:int = (att-stt)%1000; // we compute an absolute difference in milliseconds

    //we share the result on the screen
    minText.text = String(min);
    secText.text = String(sec);
    milText.text = String(ms);
} 
```

为什么需要时间戳而不使用 Date 类的功能？

因为如果你想计算两个事件之间的差异，你可能会使用这个：

```
 endEvent.seconds - startEvent.seconds 
```

如果您的开始事件发生在第 57 秒并且结束事件发生在第 17 秒，这是非常错误的，您将得到 -40 秒而不是 20 秒，依此类推。

# razor - CSHTML 小写通用模型类型上的 Visual Studio 2012 代码格式

> ID：12491215
> 
> 赞同：8
> 
> 时间：2012-09-19T08:43:28.960
> 
> 标签：razor, visual-studio-2012, code-formatting

在 Visual Studio 2012（使用 Ctrl + K + D）中格式化 Razor cshtml 文件的代码时，如果模型是泛型类型，VS 会将其全部小写。例如：

```
@model IEnumerable<Content> 
```

转换为（考虑所有小写*内容*）：

```
@model IEnumerable<content> 
```

格式化后。这会导致代码无法编译。这是一个错误还是我错过了什么？如何修复？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T16:01:43.637

此问题来自 Visual Studio 2012 未将其识别为剃刀代码并将其视为常规 HTML。我相信这是 VS 2012 的一个错误，希望很快得到修复。作为临时修复，您可以执行以下操作：

1.  转到工具 -> 选项
2.  选择文本编辑器 -> HTML -> 格式
3.  将客户标签下拉菜单设置为“输入时”

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:37:21.650

如果这是 VS 2012 中的新项目，则需要在主文件的`<appSettings>`部分中添加这行代码：`web.config`

```
<add key="webpages:Version" value="1.0.0.0"/> 
```

如果这是一个预先存在的项目，您的`web.config`. 确保它适用于版本`1.0.0.0`而不是 2.X 或 1.2.X

还要确保您的项目引用`System.Web.WebPages`是针对版本`1.0.0.0`而不是`2.0.0.0`

**进行这些更改后，您必须关闭并重新打开 Visual Studio 2012！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-05T00:47:08.703

以下内容适用于**Visual Studio Professional 2012、ASP.NET MVC 5 和 Microsoft.System.Web.WebPages 3.0**：

```
<add key="webpages:Version" value="3.0.0.0" /> 
```

**但是这个解决方案并没有立即奏效**

起初，Chris Haddox 的解决方案是`webpages:Version`：

```
<add key="webpages:Version" value="1.0.0.0"/> 
```

对我不起作用，我已经有了这个密钥，它被设置为 1.0.0.0。

但由于我使用的是**Visual Studio Professional 2012、ASP.NET MVC 5 和 Microsoft.System.Web.WebPages 3.0** ...

这个问题显示我的 Web.Config`webpages:Version`设置为`1.0.0.0`，我将其更改为，`3.0.0.0`因为我在另一篇文章中阅读了可能对 Microsoft.System.Web.WebPages 3.0 正确的文章，但我仍然有一段时间的格式错误。

我继续对我的 .cshtml 文件进行编辑。然后，所有突然的格式化开始正常工作。也许来自构建，但我不认为我确实做了构建，但不能确定，而且我知道我没有重新启动 Visual Studio 2012。

# javascript - 插入到页外dom时保留脚本标签，然后使用jquery进行页面

> ID：12491219
> 
> 赞同：2
> 
> 时间：2012-09-19T08:43:51.647
> 
> 标签：javascript, jquery, ajax, dom

我正在构建一个无限滚动例程来缓存行以添加页外。

我`$.get`将行添加到 a`$('<div/>')`中，然后每当我需要新行时，我从该 dom 添加一个到页面。

我读过当添加到 dom **jquery 时会去掉脚本标签**并执行 javascript。

这似乎给我带来了一个问题，因为当 jquery 运行脚本时，元素位于页面外 dom 中，而不是主页 dom 中。

**如何保留脚本以便在向页面添加页外元素时执行它？**

**我已经添加了警报，并且在添加到关闭页面 dom 或实际页面 dom 时，**javascript 似乎根本没有被执行，所以在这成为问题之前我可能会失败。****

 *** * *

获取新行并将它们放置在页外 dom 中的代码：

```
var nextPageDOM = $('<div/>');
var jqxhr = $.get(data.nextPageURL, function(nextPageHTML) {
    nextPageDOM.html($(nextPageHTML).find(data.settings.pagedContent));

    // Get the elements to add to the page
    data.nextPageElements = nextPageDOM.find(data.settings.rowSelector);
} 
```

从页外 DOM 添加到页面的代码：

```
var elementToAdd = data.nextPageElements.first().clone();
$(data.settings.pagedContent).append(elementToAdd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:37:43.037

不知道许多变量指向哪里很难解决，所以如果我们假设 data.settings.pagedContent 指向页面上的 DOM，为什么只找到与您在 ajax 响应中已有的元素相等的元素？另一方面，如果 data.settings.pagedContent 是一个选择器，我想知道脚本是否超出了选择器。如果您提供 ajaxresponse 示例，将会非常有用。

无论如何，如果您正在寻找避免 jQuery 脚本剥离的方法，您可以执行以下操作：创建辅助 div 容器

```
var $cont = $("<div/>"); 
```

通过 innerHTML 将 ajax 响应插入其中（希望格式正确）

```
$cont[0].innerHTML = nextPageHTML; 
```

然后从 $cont 中选择脚本并保存它们

```
$scripts = $cont.find("script"); 
```

现在您已经提取了脚本，您可以像以前一样继续缓存，但分别处理 html 和脚本，并且当您想要在页面 DOM 中检索一些 html 时，您还可以将脚本附加到DOM。

希望它有所帮助，很抱歉在这里要求澄清而不是在评论中，但我没有足够的声誉。

**编辑**(2013-01-22)

[jQuery 核心功能中关于处理脚本标签解析的新闻，在jQuery 2.0 升级指南](http://jquery.com/upgrade-guide/1.9/)中的 jQuery 2.0 beta 上实现（jQuery 1.9 将是最后一个延续旧行为的版本）

> **在 HTML 内容中加载和运行脚本**
> 
> 在 1.9 之前，任何接受 HTML 的方法（例如，$()、.append() 或 .wrap()）都会执行 HTML 中的任何脚本并将它们从文档中删除以防止它们再次被执行。在使用 .wrap() 等方法删除脚本并重新插入到文档中的情况下，这仍然会中断。从 1.9 开始，插入到文档中的脚本会被执行，但会留在文档中并标记为已执行，因此即使移除并重新插入它们也不会再次执行。
> 
> 尽管发生了这种变化，但将可执行的 JavaScript 混入 HTML 标记中是非常糟糕的做法；它具有设计、安全性、可靠性和性能方面的影响。例如，HTML 中包含的外部脚本标签会被同步获取，然后进行评估，这可能会花费大量时间。没有界面可以通知这些脚本何时或是否加载，或者在出现错误时采取纠正措施。
> 
> 尝试通过克隆现有脚本标记并将该克隆注入文档来加载脚本的代码将不再起作用，因为克隆的脚本标记已被标记为已执行。要加载新脚本，请改用 jQuery.getScript()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:48:50.640

据我了解，问题是没有执行动态加载的脚本。我在 SO 上找到了[以下帖子](https://stackoverflow.com/questions/75943/how-do-you-execute-a-dynamically-loaded-javascript-block)，根据`<script>`添加到现有 DOM 元素的解决方案标签没有被执行，您必须创建一个新元素并将脚本附加到它，然后将该元素添加到您想要的任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:49:33.723

简单地说，如果你想执行脚本获取脚本内容，然后使用 eval（不推荐）或通过 jQuery 创建脚本标签并将脚本插入标签中，它将自动执行

```
var nextPageDOM = $('<div/>');
var jqxhr = $.get(data.nextPageURL, function(nextPageHTML) {
    nextPageHTML =  stripScripts(nextPageHTML );  // remove the script tag ;)
    nextPageDOM.html($(nextPageHTML).find(data.settings.pagedContent));

    // Get the elements to add to the page
    data.nextPageElements = nextPageDOM.find(data.settings.rowSelector);
} 
```

**此函数将从 html 字符串中获取所有脚本**

```
function getScripts(text) {
       var SCRIPT_REGEX = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;
         text = text.match(SCRIPT_REGEX);
        return test;   // you can use eval to execute the script or you can crete a script tag and insert the script in the tag and it will get executed
      } 
```

**页面中的演示脚本**

```
`<scr<script>Ha!</script>ipt> alert(document.cookie);</script>` 
```

**此功能将删除所有这些**

```
 function stripScripts(text) {
       var SCRIPT_REGEX = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;
       while (SCRIPT_REGEX.test(text)) {
         text = text.replace(SCRIPT_REGEX, "");
        }
      return test
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T21:51:11.337

使用`$.ajax({... datatype:script ...})`而不是`$.get(...)`那种方式，您可以执行所有需要的 js，当然，在这个 js 中，附加页面可见部分的代码。

在页面侧：

```
$.ajax({url:data.nextPageURL, datatype:script, data:relevant_data_map,}); 
```

在服务器响应时（请注意标签不得存在）：

```
alert('this is running');                        // or whatever
var nextPageDOM = $('<div/>');
nextPageDOM.html('this is from the server');     // or whatever
$(nextPageDOM).insertBefore("#end_of_content_mark"); 
```**

# neo4j - 我如何在 Neo4j 图形数据库中检索关系

> ID：12491221
> 
> 赞同：3
> 
> 时间：2012-09-19T08:44:23.363
> 
> 标签：neo4j, neo4jclient

请耐心等待我是新手：我目前正在使用.Net neo4jClient。目前我有一个**共享**节点和一个**客户**节点。我正在他们之间创建关系**CustomerOwnsShare**并将其持久化。

这是我的关系课

```
public class CustomerOwnsShare :
    Relationship,
    IRelationshipAllowingSourceNode<Customer>,
    IRelationshipAllowingTargetNode<Share>
{
    public CustomerOwnsShare(NodeReference targetNode)
        : base(targetNode)
    {

    }

    public int Quantity { get; set; }
    public float CostPerShare { get; set; }
    public string DateOfPurchase { get; set; }
    public string ShareSymbol { get; set; }

    public const string TypeKey = "CUSTOMER_OWNS_SHARE";
    public override string RelationshipTypeKey
    {
        get { return TypeKey; }
    }
} 
```

现在从我正在使用 Linq 的数据库中检索关系列表，如下所示

```
IEnumerable<RelationshipInstance> relationshipInstances =
            graphClient.RootNode.In<Customer>(CustomerBelongsTo.TypeKey, c => c.Email == email)
            .OutE(CustomerOwnsShare.TypeKey) 
```

但这会返回没有我需要的数据（数量、CostPerShare 等）的**关系实例对象。**

**RelationshipInstance**公开了一个**RelationshipReference**对象，但即使这样也不能帮助我检索我的实际**关系**对象。在深入挖掘时，我发现我可以执行 Raw gremlin 查询，如下所示

```
graphClient.ExecuteGetAllRelationshipsGremlin<>() 
```

但它的函数签名也返回了一个 IEnumerable 的**RelationshipInstance**。

关于如何用它的数据检索我的实际持久关系对象的任何想法或建议？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:16:58.417

很抱歉花时间把这个给你，你真正想要的是一个' `RelationshipInstance<CustomerOwnsShare>`'......

所以，让我们假设我有以下设置：

```
Root(0) -[]-> User(1) -[CUSTOMER_OWNS_SHARE]-> MSFT(2) 
```

括号中的数字是 neo4j 参考。我将使用 neo4jclient 执行的查询是：

```
var results = graphClient.ExecuteGetAllRelationshipsGremlin<CustomerOwnsShare>("g.v(2).inE", null);
var quant = results[0].Data.Quantity; //etc 
```

现在，如果你只是复制/粘贴这个，你会得到一个错误：

```
'CustomerOwnsShare' must be a non-abstract type with a public parameterless constructor in order to use it as parameter 'TData' in the generic type or method 'Neo4jClient.GraphClient.ExecuteGetAllRelationshipsGremlin<TData>(string, System.Collections.Generic.IDictionary<string,object>)' 
```

这很痛苦，解决方法是将无参数构造函数放入您的 CustomerOwnsShare 类：

```
[EditorBrowsable(EditorBrowsableState.Never)]
public CustomerOwnsShare() : base(0) { } 
```

这对您来说很好，因为 TargetNode 将由反序列化器设置。您*确实*要确保自己不使用该构造函数。'EditorBrowsable' 将阻止外部程序集看到它，但不幸的是不会对同一程序集中的任何代码做任何事情，因此您可能希望将其标记为：

```
[Obsolete] 
```

同样，只是为了提醒自己。

# python - 在python中追加命令

> ID：12491222
> 
> 赞同：1
> 
> 时间：2012-09-19T08:44:29.833
> 
> 标签：python

我有一些我认为是正确的代码。但是，它应该返回一个值向量，但它返回的是单个累积值。

```
pExact = 0.8
pOvershoot = 0.1
pUndershoot = 0.1

def move(p, U):
    q = []
    for i in range(len(p)):
        s = pExact * p[(i - U) % len(p)]
        s = s + pOvershoot * p[(i - U - 1) % len(p)]
        s = s + pUndershoot * p[(i - U + 1) % len(p)]

        print i, s  # check if calculations are corrects
    q.append(s)

    return q        # should return a vector

p = [0, 1, 0, 0]
print move(p, 1)    # prints only cumulated value 
```

我试图理解为什么它只打印一个值而不是我认为应该`[0.10000000000000001]`的向量。`[0, 0.1, 0.8, 0.1]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:47:57.207

中的标识有误`q.append(s)`。它应该在`for`循环内。

这是正确的版本：

```
pExact = 0.8
pOvershoot = 0.1
pUndershoot = 0.1

def move(p, U):
    q = []
    for i in range(len(p)):
        s = pExact * p[(i - U) % len(p)]
        s = s + pOvershoot * p[(i - U - 1) % len(p)]
        s = s + pUndershoot * p[(i - U + 1) % len(p)]

        print i, s  # check if calculations are corrects
        q.append(s)

    return q        # should return a vector

p = [0, 1, 0, 0]
print move(p, 1)    # prints only cumulated value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:48:31.567

不要使用 q，而是使用更 Pythonic 的产量

```
def move(p, U):
    for i in range(len(p)):
        s = pExact * p[(i - U) % len(p)]
        s = s + pOvershoot * p[(i - U - 1) % len(p)]
        s = s + pUndershoot * p[(i - U + 1) % len(p)]

        print i, s  # check if calculations are corrects
        yield s 
```

此外，代码的问题是您之前忘记了 4 个空格缩进`q.append(s)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:48:12.580

这只是一个缩进问题。您的行`q.append(s)`与函数的主要部分处于相同的缩进级别，这意味着它仅在 for 循环结束后执行。将其向右移动一级，使其与循环体的其余部分一起使用，并且每次循环都会执行。

# javascript - 检查DOM中是否存在元素，如果不存在，插入它

> ID：12491236
> 
> 赞同：0
> 
> 时间：2012-09-19T08:45:24.353
> 
> 标签：javascript, jquery, json

假设我有以下 html：

```
<div id="list">
    <span id="one">toto</span> 
    <span id="two">titi</span>
</div> 
```

不知何故，我在 json 中检索了一个**ids** +**内容**列表，如下所示：

```
var retrievedList = [
{
"id" : "one",
"content" : "toto"
},
{"id" : "two",
 "content" : "titi"
},
{
"id" : "three",
"content" : "tutu"
}]; 
```

注意**第三个元素**还没有在 DOM 中。

**我想使用 JS/JQuery 来检查检索到的列表中是否存在不在 DOM/HTML 中的元素，如果是这种情况，则在 DOM/Html 中插入相应的跨度。**

在 JQuery 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:55:32.133

```
$.each(retrievedList, function(i, v) {
    if(!$('#' + v.id).length) {
        $('<span />').prop('id', v.id).text(v.content).appendTo('#list');
    }
}); 
```

[这是一个小提琴](http://jsfiddle.net/dAMbp/1/)

# javascript - 如何使用/强制使用默认字体

> ID：12491239
> 
> 赞同：0
> 
> 时间：2012-09-19T08:45:42.157
> 
> 标签：javascript, html, css

我在网站设计的某个部分中使用了一种特定的字体。我知道这种字体不会出现在我 99.9% 的用户计算机上……所以有没有办法将此字体应用于某些文本，而不必为文本使用图像……

如果您可以提出建议，您能否确认它在所有浏览器中都兼容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:48:04.047

您需要为每个浏览器转换该字体。这项工作有几个在线转换。然后你只需要在 CSS 中添加它：

```
@font-face {
    font-family: 'mwebfont';
    src: url('fonts/mw.eot');
    src: url('fonts/mw.eot?#iefix') format('embedded-opentype'),
         url('fonts/mw.woff') format('woff'),
         url('fonts/mw.ttf') format('truetype'),
         url('fonts/mw.svg#mwebfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

[这](http://www.fontsquirrel.com/fontface/generator)是一个不错的转换器

注意：确保您的字体在法律上符合 Web 嵌入的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:50:48.437

我建议尝试使用[Google Web Fonts](http://www.google.com/webfonts)或[Cufon](http://cufon.shoqolate.com/generate/) 。

# javascript - Onclick 属性不适用于链接（a href）

> ID：12491240
> 
> 赞同：1
> 
> 时间：2012-09-19T08:45:43.753
> 
> 标签：javascript, android, html, cordova

我正在开发一个带有 phonegap 的 android 应用程序，并且我有一个包含一些数据的表。单击一行时，它应该返回索引并触发一个函数，因此我将每一行转换为`a href`具有`onclick`属性的 html。问题是`href`它正在工作并且它返回到索引但 ti 没有触发该功能。这是生成表格的代码和函数的代码：

```
function doLocalStorage(xyz) {
        alert(xyz);
    }

<table id="hor-minimalist-b"><thead></thead><tbody></tbody></table>
    <script language="javascript">
    var table = document.getElementById('hor-minimalist-b'); // get the table element
    var tableBody = table.childNodes[1]; // get the table body
    var tableHead = table.childNodes[0]; // get the table head
    var thead = document.createElement('th');
    var row2 = document.createElement('tr'); // create a new row
    var headText = document.createTextNode('Dados');
      thead.scope = "col";
        thead.appendChild(headText);
        row2.appendChild(thead);
        tableHead.appendChild(row2);

    for (var i=0; i<len; i++) {

        var row = document.createElement('tr'); // create a new row

        var cell = document.createElement('td'); // create a new cell
        var a = document.createElement('a');
        var cellText = document.createTextNode(localStorage.getItem('key' + i));
        var xyz = localStorage.key(i);
        a.href = "index.html";
        a.onclick = "doLocalStorage(xyz);";
        a.appendChild(cellText);
        cell.appendChild(a); // append input to the new cell
        row.appendChild(cell); // append the new cell to the new row
        tableBody.appendChild(row); // append the row to table body
        }
    </script> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:53:13.740

您应该真正使用 jQuery，因为它会为您处理浏览器的不一致问题。

第二，您可能需要像这样使用 onlick。

```
a.onclick = function() { doLocalStorage(xyz); }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:52:01.527

尝试删除 href 属性并使用重定向处理单击事件`window.location.href = ('url')`。它应该有帮助。

# php - 通过键合并数组并为值创建一个新数组

> ID：12491244
> 
> 赞同：-3
> 
> 时间：2012-09-19T08:46:06.327
> 
> 标签：php, arrays, merge, key

我有一个数组，我需要按键合并并使用该键的值创建一个新数组。我已经搜索和搜索没有结果。任何帮助都会很棒！

原始数组

```
Array
(
    [0] => Array
    (
        [name] => Key 1
        [value] => Value 1
    )

    [2] => Array
    (
        [name] => Key 1
        [value] => Value 2
    )

    [3] => Array
    (
        [name] => Key 2
        [value] => Value 1
    )

    [4] => Array
    (
        [name] => Key 1
        [value] => Value 3
    )

    [5] => Array
    (
        [name] => Key 2
        [value] => Value 2
    )
) 
```

最终数组应如下所示

```
Array
(
    [0] => Array
    (
        [name] => Key 1
        [value] => Array
        (
            [0] => Value 1

            [1] => Value 2

            [2] => Value 3
        )
    )

    [1] => Array
    (
        [name] => Key 2
        [value] => Array
        (
            [0] => Value 1

            [1] => Value 2
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:13:47.077

```
<?php 
$array =    Array
(
    0 => Array
    (
        'name' => 'Key 1',
        'value' => 'Value 1'
    ),

    2 => Array
    (
        'name' => 'Key 1',
        'value' => 'Value 2'
    ),

    3 => Array
    (
        'name' => 'Key 2',
        'value' => 'Value 1'
    ),

    4 => Array
    (
        'name' => 'Key 1',
        'value' => 'Value 3'
    ),

    5 => Array
    (
        'name' => 'Key 2',
        'value' => 'Value 2'
    )
);
$tmpArray = array(); 
foreach ($array as $smallArray) {
if(!is_array($tmpArray[$smallArray['name']]))
    $tmpArray[$smallArray['name']] = array();

$tmpArray[$smallArray['name']][] = $smallArray['value'];
}
$finalArray = array();
foreach ($tmpArray as $key => $value) {
    $someArray['name'] = $key;
    $someArray['value'] = $value;
    $finalArray[] = $someArray;
}

print_r($finalArray); 
```

我为你写了解决方案，但下次你应该先试试自己

# javascript - IE7 中的 Zebra_Calendar 和 JSON 错误

> ID：12491245
> 
> 赞同：0
> 
> 时间：2012-09-19T08:46:06.547
> 
> 标签：javascript, jquery, json, plugins

我在我的页面上使用[Zebra_Calendar](http://stefangabos.ro/jquery/zebra-datepicker/) jQuery 插件，但是一旦我包含一个实现，在 IE7 模式下运行页面时，`json`我在初始化期间收到“对象不支持此属性或方法”错误。`string.split`

我将 json 插件产生的错误代码减少到以下几行：

```
(function () {
    if (typeof Date.prototype.toJSON !== 'function') {
    String.prototype.toJSON =
            Number.prototype.toJSON =
            Boolean.prototype.toJSON = function (key) {
                return this.valueOf();
            };
    }
} ()); 
```

这取自[https://raw.github.com/douglascrockford/JSON-js/master/json2.js](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)中的标准 json 实现，但我在其他 json 实现中也遇到了这个错误。

现在，我没有看到错误，但也许其他人遇到了这个问题并有解决方案？我的页面上需要 json，我想使用这个日历。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:19:54.773

好的，我想我自己想出来的......只需`Boolean.prototype.toJSON =`从json代码中删除，我还没有发现任何副作用。我认为它甚至没有被 ecmascript 标准定义。

所以，我希望这对某人有帮助。

# oracle - Oracle Sql Developer如何在Oracle中创建和设置角色？

> ID：12491247
> 
> 赞同：1
> 
> 时间：2012-09-19T08:46:08.177
> 
> 标签：oracle, oracle10g, oracle11g

我有一个 Oracle SQL Developer，我想为指定的表创建和设置多个角色（例如，插入、更新、删除和选择语句），但是当我使用 Grant 或 Revoke 语句来执行这些操作时，如下所示：

```
GRANT INSERT, UPDATE on Employees to username or rolename
REVOKE INSERT, UPDATE on Employees from username or rolename 
```

结果没有出现，所以我不能在 Oracle 中使用插入、更新、选择语句，我尝试一次又一次地发出这些语句，但它不起作用。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:03:24.327

为了能够将这些权限授予用户，您必须与具有此权限的用户建立联系。

如果您与这样的用户连接，您可以像这样授予用户权限

```
GRANT UPDATE ANY TABLE TO "user"; 
```

你也可以`ADMIN OPTION`像这样盛大

```
GRANT UPDATE ANY TABLE TO "user" WITH ADMIN OPTION; 
```

您还可以将特定角色/用户授予特定表的特权：

```
GRANT SELECT ON "table_name" TO "user_or_role"; 
```

> 以下语句将 emp 表的所有列的 SELECT、INSERT 和 DELETE 对象权限授予用户 jfee 和 tsmith：

```
GRANT SELECT, INSERT, DELETE ON "table" TO "user1", "user2"; 
```

有关管理用户权限，请参阅[http://docs.oracle.com/cd/B10500_01/server.920/a96521/privs.htm](http://docs.oracle.com/cd/B10500_01/server.920/a96521/privs.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:08:04.683

您是否一起发出了 GRANT 和 REVOKE？GRANT 提供，REVOKE 带走，因此将它们一起发布意味着什么都不会做。只需发出 GRANT 语句即可授予访问权限

```
GRANT INSERT, UPDATE ON schema.table1 TO username; 
```

将允许 USERNAME 在 SCHEMA 的 TABLE1 中插入和更新行。

```
REVOKE INSERT, UPDATE ON schema.table1 FROM username; 
```

如果您授予它们，将删除允许 USERNAME 在 SCHEMA 中的 TABLE1 中插入和更新行的授予（否则它会告诉您您没有授予它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:04:50.460

你最后没有分号只是一个错字吗？

运行语句时会得到什么输出？

# c# - 如何在文本框 c#/.net Windows 窗体中保存电子邮件或密码

> ID：12491248
> 
> 赞同：1
> 
> 时间：2012-09-19T08:46:08.523
> 
> 标签：c#, .net, email, textbox, save

我正在创建一个简单的电子邮件发送应用程序，每次我必须在我的应用程序中输入电子邮件 ID 或密码但我想保存它们时，我已将其放在文本字段中，例如我们保存用户名或密码以进​​行登录。

这是我的代码：

```
 try
        {
            // setup mail message
            MailMessage message = new MailMessage();
            message.From = new MailAddress(textBox1.Text);
            message.To.Add(new MailAddress(textBox2.Text));
            message.Subject = textBox3.Text;
            message.Body = richTextBox1.Text;

            // setup mail client
            if (textBox1.Text.Contains("gmail"))
            {
                SmtpClient mailClient = new SmtpClient("smtp.gmail.com");
                mailClient.Credentials = new NetworkCredential(textBox1.Text, textBox4.Text);
                mailClient.Send(message);

                MessageBox.Show("Sent from Gmail");
            }
            else if (textBox1.Text.Contains("yahoo"))
            {
                SmtpClient mailClient = new SmtpClient("smtp.mail.yahoo.com");
                mailClient.Credentials = new NetworkCredential(textBox1.Text, textBox4.Text);
                mailClient.Send(message);

                MessageBox.Show("Sent from Yahoo");
            }
        }
        catch (Exception)
        {
            MessageBox.Show("Error");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:51:27.317

如果它仅适用于一个用户。您可以将此信息放在 App.Config 中，如果用户更多，您可以将其设置为数据源（数据库、XML 等）

# c# - WatiN 无法通过正则表达式找到元素

> ID：12491250
> 
> 赞同：4
> 
> 时间：2012-09-19T08:46:24.017
> 
> 标签：c#, regex, watin

我在页面上有一个跨度，上面写着“第 1 项 bla-bla-bla 的详细信息”。此代码工作正常：

```
IE.Span(Find.ByText(new Regex("Details for item 1"))).Click(); 
```

但是这个（大写的'I'） - 找不到元素：

```
IE.Span(Find.ByText(new Regex("Details for Item 1"))).Click(); 
```

为什么？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:48:04.497

添加`(?i)`使其不区分大小写

```
new Regex("(?i)Details for Item 1 bla-bla-bla") 
```

# javascript - 两个 node.js 服务器？

> ID：12491251
> 
> 赞同：3
> 
> 时间：2012-09-19T08:46:24.283
> 
> 标签：javascript, android, node.js, httpserver, appfog

我想在不同的端口上运行两个 node.js httpserver：

```
var http = require('http');        

var dbserver = http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write('<html><body><h2 align=center>TEST index.html.</h2></body></html>');
    res.end();
});

dbserver.listen(8888);

var s = http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.write('hello world');
    res.end();
});

s.listen(8080); 
```

我想制作一个 android 应用程序，它将在 AppFog 主机的 8888 端口上连接到我的 Node.js 服务器，向服务器发送消息，并从它接收响应。如果我从浏览器打开我的服务器，我只会得到一个简单的 html 页面。但是我的代码不起作用。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:26:18.490

在 AppFog 上，您可以在此处查看运行 Node 应用程序的一些文档：http: [//docs.appfog.com/frameworks/node](http://docs.appfog.com/frameworks/node)

一个重要的部分是如何确定要绑定到哪个端口。在您的代码示例中，您有 s.listen(8080); 但要指定的端口实际上在 env var 中：

```
s.listen(process.env.VCAP_APP_PORT || 8080); 
```

AppFog 目前不支持为同一个应用程序打开两个端口，因此您必须将其拆分为两个应用程序，并将第二个应用程序类似地绑定到 env var：

```
dbserver.listen(process.env.VCAP_APP_PORT || 8888); 
```

AppFog 将在几个月内支持 WebSocket，但今天不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:49:02.827

好吧，好吧，我收到了来自 AppFog 支持的电子邮件答复，听起来像这样：

//------------------------------------------------ ----------------------

乔，9 月 19 日 12:30（太平洋夏令时间）：

你好！

不幸的是，AppFog 仅支持 HTTP 流量，因此 websockets 和 UDP 流量将不起作用。不过，Websocket 支持在我们的路线图上，所以请继续关注！

乔 AppFog 支持

//------------------------------------------------ ---------------------

所以问题不在 Node.js 中，也不在我的代码中，而是在 AppFog 中。非常感谢大家的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:05:31.817

您当然可以在单个节点应用程序的两个不同端口上运行两个不同的服务器，但是如果您希望客户端代码访问它们，您很可能会遇到同源规则问题（例如浏览器通常，从一台服务器加载的运行代码无法向另一台服务器发出 AJAX 请求，因为同一 URL 上的两个不同端口被认为是两个不同的来源）。您的跨服务器连接能力将仅限于请求脚本（包括 JSONP 请求）和 Websocket 连接（但请记住，如果您使用的是 socket.io 并且客户端不支持 Websockets，则套接字的后备传输方法.io 使用不一定能跨域工作。

# php - AWS S3 PHP我可以将文件直接上传到存储桶中的文件夹吗

> ID：12491253
> 
> 赞同：4
> 
> 时间：2012-09-19T08:46:29.213
> 
> 标签：php, amazon-s3, amazon-web-services

使用 php sdk 将文件直接上传到 AWS S3 中的文件夹的语法是什么？

我使用以下方法成功上传到存储桶：

```
$response = $s3->create_object($bucket, $file_name, array('fileUpload' => $file_path)) 
```

发送！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T08:53:36.743

试试这个方法

```
$s3->create_object($bucket, 'folder/filename', $options) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-28T05:27:09.210

只需做 1 件事，添加 'path/' 例如：如果您在存储桶中有一个文件夹 'videos'，那么您必须在 'key' =>'vid​​eos/video-name-here' 中添加这样的路径。

```
try {
    // Upload data.
$result = $s3Client->putObject([
    'Bucket' => bucket-name,
    'Key'    => 'videos/video-name', //add path here
    'Body'   => fopen($video, 'r'),
    'ACL'    => 'public-read'
]);
print_r($result['ObjectURL']);

} catch (S3Exception $e) {
    echo $e->getMessage() . PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T19:43:54.690

这是您可以尝试的另一种方法

```
 $this->Aws->bucket = 'bucket'
    $old_file = $dir. '/'.old_file_name;       
    $new_file = $dir. '/'.new_file_name;
    $file_permission = 'private';
    $this->Aws->upload($old_file , $new_file , $file_permission); 
```

# java - 获取范围内所有蜂窝塔的 CID、LAC 和信号强度

> ID：12491256
> 
> 赞同：5
> 
> 时间：2012-09-19T08:46:43.140
> 
> 标签：java, android, gsm, signal-strength, cellid

目前，我正在使用网络中的单元对我的 Android 进行三边测量。它比我想象的还要准确。但没有我想要的那么准确。所以我想参与的塔比从 getNeighboringCellInfo 获得的要多。我想获取范围内每个塔的 Cell ID 和信号强度。每个网络运营商。有没有办法“ping”塔，所以他们用 cellID、Lac 和信号强度来回答？不知何故，这必须是可能的。我可以同时扫描 2G 和 3G（和 4G）吗？或者我可以以编程方式在它们之间切换吗？有什么建议么？希望我足够清楚...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:33:18.633

似乎`TelephonyManager`并且`getNeighboringCellInfo()`是您正在寻找的东西。

这是一个简单直接的示例：

```
/* first you wanna get a telephony manager by asking the system service */
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

/* then you can query for all the neighborhood cells */
List<NeighboringCellInfo> neighbors = tm.getNeighboringCellInfo();

/* here's something you can get from NeighboringCellInfo */
for (NeighboringCellInfo n : neighbors) {
    Log.v("CellInfo", "" + n.getCid());
    Log.v("CellInfo", "" + n.getLac());
    Log.v("CellInfo", "" + n.getPsc());
    Log.v("CellInfo", "" + n.getRssi());
} 
```

确保在清单文件中包含所有所需的权限，例如`ACCESS_COARSE_LOCATION`或`READ_PHONE_STATE`，具体取决于您将使用的 API，否则它会简单地崩溃。

哦顺便说一句，这只适用于2G。3G及以上不支持这种操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-02T09:38:50.890

到目前为止，这是获取相邻小区信息的正确方法：

```
 TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    List<CellInfo> cellInfoList = telephonyManager.getAllCellInfo();
    for (int i = 0; i < cellInfoList.size(); i++) {
        if (cellInfoList.get(i) instanceof CellInfoWcdma) {
            CellInfoWcdma cellInfoWcdma = (CellInfoWcdma) cellInfoList.get(i);
            /* Get LAC, strength etc. here */
        } else if (cellInfoList.get(i) instanceof CellInfoGsm) {
            CellInfoGsm cellInfoGsm = (CellInfoGsm) cellInfoList.get(i);
            /* Get LAC, strength etc. here */
        } else if (cellInfoList.get(i) instanceof CellInfoLte) {
            CellInfoLte cellInfoLte = (CellInfoLte) cellInfoList.get(i);
            /* Get TAC, strength etc. here */
        } else if (cellInfoList.get(i) instanceof CellInfoCdma) {
            CellInfoCdma cellInfoCdma = (CellInfoCdma) cellInfoList.get(i);
            /* Get strength etc. here */
        }
    } 
```

现在，

1.  您可以找到 LAC 为`cellInfoWcdma.getCellIdentity().getLac()`，类似地为`cellInfoGsm`和`cellInfoLte`。请注意，CDMA 不包含 LAC。另请注意，LTE 具有 TAC 而不是 LAC，它们相似，但术语不同。

2.  你可以找到力量`cellInfoWcdma.getCellSignalStrength().getLevel()`。LTE、GSM 和 CDMA 也是如此。请注意，您可以`getLevel`，`getDbm`或`getAsuLevel`，任何您感兴趣的内容。

3.  对于 CID，您可以将其获取为`cellInfoWcdma.getCellIdentity().getCid()`，与 LTE 和 GSM 类似。请注意，LTE 具有`getCi`而不是`getCid`. 另请注意，它不适用于 CDMA。

4.  如果您对 MCC 和 MNC 感兴趣，您可以获取`cellInfoWcdma.getCellIdentity().getMccString()`API Level >= 28，否则使用`cellInfoWcdma.getCellIdentity().getMcc()`. 请注意，您无法获得 CDMA 的 MCC 和 MNC。

您可以制作自己的模型类并通过制作对象来存储您需要的所有值（我已经评论过）。将这些对象存储在列表中。不要忘记向 Manifest 添加权限。

# android - android中的地图错误

> ID：12491257
> 
> 赞同：0
> 
> 时间：2012-09-19T08:46:43.200
> 
> 标签：android, google-maps, android-activity

大家好，我写了 2 个类，一个用于 mapView，另一个用于位置设置，我使用 alertDialog 框让用户在启用 GPS 或使用意图直接进入地图之间进行选择，但我遇到了错误。任何人都可以帮忙？？？

这是对话框代码

```
public void onClick(View arg0) {

            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);

            // set title
            alertDialogBuilder.setTitle("Your Title");

            // set dialog message
            alertDialogBuilder
                    .setMessage("Click yes TO ENABLE GPS")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if this button is clicked, close
                                    // current activity
                                    Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);  
                                      startActivityForResult(intent, 1);  
                                      } 

                            })
                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if this button is clicked, just close
                                    // the dialog box and do nothing
                                    //dialog.cancel();

                                    Intent intent = new Intent(MainActivity.this, AndroidGoogleMapsActivity.class);
                                    context.startActivity(intent);
                                }
                            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();

        }

    }); 
```

这是我得到的错误

```
09-19 08:28:58.996: W/dalvikvm(440): Unable to resolve superclass of Lcom/mkyong/android/AndroidGoogleMapsActivity; (16)
09-19 08:28:58.996: W/dalvikvm(440): Link of class 'Lcom/mkyong/android/AndroidGoogleMapsActivity;' failed
09-19 08:28:59.004: E/dalvikvm(440): Could not find class 'com.mkyong.android.AndroidGoogleMapsActivity', referenced from method com.mkyong.android.MainActivity$1$2.onClick
09-19 08:28:59.004: W/dalvikvm(440): VFY: unable to resolve const-class 19 (Lcom/mkyong/android/AndroidGoogleMapsActivity;) in Lcom/mkyong/android/MainActivity$1$2;
09-19 08:28:59.004: D/dalvikvm(440): VFY: replacing opcode 0x1c at 0x0008
09-19 08:28:59.014: D/dalvikvm(440): VFY: dead code 0x000a-0018 in Lcom/mkyong/android/MainActivity$1$2;.onClick (Landroid/content/DialogInterface;I)V
09-19 08:29:16.164: D/AndroidRuntime(440): Shutting down VM
09-19 08:29:16.174: W/dalvikvm(440): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-19 08:29:16.254: E/AndroidRuntime(440): FATAL EXCEPTION: main
09-19 08:29:16.254: E/AndroidRuntime(440): java.lang.NoClassDefFoundError: com.mkyong.android.AndroidGoogleMapsActivity
09-19 08:29:16.254: E/AndroidRuntime(440):  at com.mkyong.android.MainActivity$1$2.onClick(MainActivity.java:61)
09-19 08:29:16.254: E/AndroidRuntime(440):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
09-19 08:29:16.254: E/AndroidRuntime(440):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 08:29:16.254: E/AndroidRuntime(440):  at android.os.Looper.loop(Looper.java:123)
09-19 08:29:16.254: E/AndroidRuntime(440):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-19 08:29:16.254: E/AndroidRuntime(440):  at java.lang.reflect.Method.invokeNative(Native Method)
09-19 08:29:16.254: E/AndroidRuntime(440):  at java.lang.reflect.Method.invoke(Method.java:521)
09-19 08:29:16.254: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-19 08:29:16.254: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-19 08:29:16.254: E/AndroidRuntime(440):  at dalvik.system.NativeStart.main(Native Method)
09-19 08:29:18.725: I/Process(440): Sending signal. PID: 440 SIG: 9 
```

我不知道如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:54:54.393

您是否在清单文件中定义了 AndroidGoogleMapsActivity 类和地图库？您必须放入元素内。

```
<application ...>
...
<uses-library android:required="true" android:name="com.google.android.maps" />
...
</application> 
```

# python - 无法通过 Homebrew 安装 Python 2.7.3 在 OSX Lion 上导入 wxPython

> ID：12491262
> 
> 赞同：1
> 
> 时间：2012-09-19T08:47:06.067
> 
> 标签：python, wxpython, osx-lion, importerror

从这个包[http://downloads.sourceforge.net/wxpython/wxPython2.9-osx-2.9.4.0-cocoa-py2.7.dmg](http://downloads.sourceforge.net/wxpython/wxPython2.9-osx-2.9.4.0-cocoa-py2.7.dmg)安装后，我无法`wxPython`在 OSX Lion 上导入。`wxPython`

我也尝试将`wxPython`目录添加到`PYTHONPATH`，但仍然无法导入它。安装程序创建了这些文件夹：

```
/usr/local/lib/wxPython-2.9.4.0
/usr/local/lib/wxPython-unicode
/usr/local/lib/wxPython 
```

我将它们添加到`PYTHONPATH`，但仍然没有成功。仍然没有调用任何模块`wx`。

当我尝试通过 pip( `pip install wx`) 安装它时，我能够导入`wx`，但无法导入`wx.App()`等`wx.Frame()`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:47:12.570

我和你有类似的问题，但我使用的是自制软件和 python brew 和 pip。我在reddit上发布了这个：[http ://www.reddit.com/r/learnpython/comments/1063o1/wx_install_problems_os_x/](http://www.reddit.com/r/learnpython/comments/1063o1/wx_install_problems_os_x/)

显然，wx 与 wxpython 不同。

我使用自制软件并安装了 wxmac 以使其正常工作。

它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:09:31.217

如果您可以导入`wx`，那么它正在工作。

您如何尝试导入`App`等`Frame`？

你只需要做

```
import wx
app= wx.App() 
```

或者如果您只想导入`App`然后`Frame`，

```
from wx import Frame, App
app = App()
frame = Frame(None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T08:35:36.307

1.  `brew install wxpython`
2.  启动 python 并输入`import site; site.getsitepackages()`，您将获得站点包的站点，例如：'/Library/Python/2.7/site-packages'
3.  `cd /Library/Python/2.7/site-packages`
4.  `ln -s /usr/local/Cellar/wxpython/3.0.2.0/lib/python2.7/site-packages/wx-3.0-osx_cocoa/wx wx`

# zend-framework - 社交引擎在注册后将用户发送到自定义页面

> ID：12491263
> 
> 赞同：0
> 
> 时间：2012-09-19T08:47:11.057
> 
> 标签：zend-framework, socialengine

当用户在我的 SocialEngine 网站上注册时 - 我如何将他重定向到我在 SE4 中创建的自定义页面之一（位于`mydomain.com/index.php/pages/custompage`）？

有没有办法将我的页面集成到注册过程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:08:11.937

使用钩子`onUserSignUpAfter`将用户重定向到所需的页面。

如果您不介意编辑 SE4 文件以对其进行自定义，那么您可以在任何活动模块上执行以下操作。否则，您必须将以下内容放在单独的模块中。找到您选择编辑或创建的模块的清单文件（假设我们编辑`application/modules/Core`）。查找或添加“钩子”键并添加 onUserSignupAfter，如下所示：

```
    '钩子' => 数组（
      大批（
        '事件' => 'onUserSignupAfter',
        '资源' => 'Core_Plugin_Core'
      )
    )

```

编辑 Core_Plugin_Core 并添加方法：

```
    公共函数 onUserSignupAfter($event)
    {
      header('位置：/page/my_custom_page');
      出口;
    }

```

# c# - 在 ApiController 中返回 BsonDocument

> ID：12491265
> 
> 赞同：9
> 
> 时间：2012-09-19T08:47:23.090
> 
> 标签：c#, asp.net-mvc, mongodb, mongodb-.net-driver

我正在使用 ASP.NET MVC 4 中的 API，我使用 MongoDB 作为后端。

由于 MongoDB 存储和返回 BSON 对象，而 MVC4 返回 JSON 对象，我认为在其余调用中简单地返回 BSON 会相当容易。

这没有用，所以我`.toJson()`在 th`BsonDocument`类上找到了方法，将 BSON 对象转换为 JSON 字符串表示。不幸的是，当我通过我的返回这个字符串时`ApiController`，MVC 显然认为它应该将字符串重新序列化为 JSON，浏览器无法解释。

所以我想问一下是否有办法禁用特定`ApiController`方法的JSON序列化？

我目前的解决方法是在返回`.toJson()`之前对返回的 JSON 进行反序列化，以便再次对其进行序列化，但这似乎相当浪费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:53:52.917

我也遇到了这个问题，我获取了 Bson 数据，在 Web API 端迭代了将每个文档转换为 json，正如我假设你所做的那样，创建了一个 json 字符串列表 - 我将其发回并将每个字符串反序列化回布森文件：

```
List<string> data = response.Content.ReadAsAsync<List<string>>().Result;

List<BsonDocument> docList = new List<BsonDocument>();
foreach (string dataStr in data) {
    BsonDocument doc = MongoDB.Bson.Serialization.BsonSerializer.Deserialize<BsonDocument>(dataStr);
    docList.Add(doc);                 
} 
```

我在这篇文章中发现：[将字符串转换为 MongoDB BsonDocument](https://stackoverflow.com/questions/5624934/convert-string-into-mongodb-bsondocument)

位火腿吝啬，但它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:50:34.137

大概您有一个与您的应用程序关联的架构以及您的 api 控制器试图返回的资源。通过强制它使用 json，您完全回避了内容协商，从而忽略了 WebApi 的许多好处。如果您的客户想要 xml 或 yaml 或...

您遇到的问题是 WebApi 不知道如何序列化 BsonDocument。因此，您可以为它编写一个 ModelBinder 以便它知道如何处理它。或者，暗指我的第一段，创建强类型实体/资源类，因为 MongoDB 和 WebApi 都已经知道这些类型，它们将能够在本地使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T11:05:33.387

我面临同样的事情，想简化后端代码。

我发现[对动态的支持](https://mongodb.github.io/mongo-csharp-driver/2.0/what_is_new/)从今年年初的驱动程序 v2.0 开始就可以工作了。只需`BsonDocument`用`dynamic`这样的关键字替换：

```
public async Task<dynamic> GetAll(string collectionName)
{
    //var collection = db.GetCollection<BsonDocument>(collectionName);
    //var result = await collection.Find(new BsonDocument()).ToListAsync();
    var collection = db.GetCollection<dynamic>(collectionName);
    return await collection.Find(new BsonDocument()).ToListAsync();
} 
```

也用于插入：

```
var collection = db.GetCollection<dynamic>(collectionName);
await collection.InsertManyAsync(new List<dynamic>()
{
    new
    {
        PointType = "Building",
        Name = "My Place",
        Location = GeoJson.Point(GeoJson.Position(lng, lat))
    }
}); 
```

创建迁移脚本真的很有帮助。但是，不要接受`dynamic`来自客户网站的“任何东西”。

# php - 如何使用 preg_match 从字符串 (php) 中提取数据？

> ID：12491272
> 
> 赞同：-3
> 
> 时间：2012-09-19T08:48:09.947
> 
> 标签：php, string, pattern-matching, preg-match

我有一个字符串，

```
 DXD RO 012345 SMITH JOHN 094 5251 907 REQ 008313 M 
```

我正在尝试提取可能有 5-15 位数字的电话号码，其中包含未知数量的空格。我还需要最后一个字母（性别）和名字。

这样做的确切模式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:56:07.820

```
$subject = "DXD RO 012345 SMITH JOHN 094 5251 907 REQ 008313 M";
$pattern = "/[a-z]+\s+[a-z]+\s+\d+\s+[^\d]+\s*(\d+\s*\d+\s*\d+)\s+[a-z\-]+\s+\d+\s+([a-z])/i";

preg_match($pattern, $subject, $matches); 
```

$matches[1] 包含电话号码，$matches[2] 包含性别。

为此，我假设第 1、2、4、5 和 9 列仅包含字母，而 3、6、7、8、10 仅包含数字（性别必须是字母）。

但是，如果您需要数字和字母，只需将**[az]**或**\d**替换为**[a-z0-9]**用于相应的列（**\s**是空格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:58:29.447

对于手机您可以尝试：

```
$subject = "DXD RO 012345 SMITH JOHN 094 5251 907 REQ 008313 M";
preg_match_all("/([0-9]|\s).+{5,15}(\s)/si", $subjectt, $matches); 
```

# c - Windows 创建窗口 API

> ID：12491277
> 
> 赞同：1
> 
> 时间：2012-09-19T08:48:30.693
> 
> 标签：c, windows, api, winapi, createwindow

我是 Windows 编程新手。在 Windows 操作系统上，几乎每个应用程序都会打开一个窗口，我想知道如果所有这些应用程序都调用相同的 API`CreateWindow()`来创建它们的窗口？

或者，问我问题的另一种方式：游戏、音乐播放器、浏览器、即时消息、IDE 等是否都通过调用 API 来创建它们的窗口`CreateWindow()`？如果没有，还有哪些其他 API 可用于在 Windows 上创建窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:50:48.700

是的，并且[`CreateWindowEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)是唯一可以创建窗口的 API（其他相关的 API，例如`DialogBox`并且`AllocConsole`也在内部执行此操作）。无论每个应用程序使用什么图形堆栈（WPF、DirectX 等），最终都归结为`CreateWindow`.

# gwt - gwt-dnd 多重拖动

> ID：12491280
> 
> 赞同：0
> 
> 时间：2012-09-19T08:48:47.030
> 
> 标签：gwt, drag-and-drop

我正在使用 gwt-links 和 gwt-dnd 框架来制作节点图。我的问题是我想拖动多个对象。有人有这个任务的经验吗？

任何想法或指向正确的方向都会有所帮助。

卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:50:58.797

我实际上并没有使用过 gwt-links 库，但是入门部分让我大致了解了总体思路。它使用 gwt-dnd 来移动项目，所以你唯一需要做的就是：

```
PickupDragController dragController = new PickupDragController(controller.getView(), true);

// Allow multiple widgets to be selected at once using CTRL-click
dragController.setBehaviorMultipleSelection(true);

dragController.makeDraggable(labelHello);
dragController.makeDraggable(labelWorld);
// Register the dragController in gwt-links
controller.registerDragController(dragController); 
```

也就是说，按照入门 wiki [http://code.google.com/p/gwt-links/wiki/GettingStarted上的预期使用 gwt 链接](http://code.google.com/p/gwt-links/wiki/GettingStarted)

并添加 setBehaviourMultipleSelection(true); 在你的 dragController 初始化行。

# optimization - 待办事项应用程序：查看上下文更改（最新-ember）

> ID：12491282
> 
> 赞同：1
> 
> 时间：2012-09-19T08:48:57.230
> 
> 标签：optimization, ember.js, handlebars.js

我实现了一个可工作的待办事项应用程序，它考虑了最新 ember 版本的“查看上下文更改”（[单击](https://gist.github.com/2494968)）。

它工作正常，但我想知道是否有更简单（更好/更短）的解决方案：http:
[//jsfiddle.net/KBtwG/](http://jsfiddle.net/KBtwG/)

（我也收到了一些恼人的未捕获错误/警告......）

模板：

```
<script type="text/x-handlebars">
{{view Todos.CreateTodoView placeholder="What has to be done?"}}

{{#collection contentBinding="Todos.todosController"}}
    <label>
        {{view Em.Checkbox labelBinding="content.title" checkedBinding="view.content.isDone"}}
        {{view.content.title}}
    </label>
{{/collection}}

<br /><br />

<label>
    {{view Em.Checkbox class="mark-all-done" title="Mark All as Done" checkedBinding="Todos.todosController.allAreDone"}}
    Mark All as Done 
</label>

{{#view Ember.Button target="Todos.todosController" action="clearCompletedTodos"}}
    Clear
{{/view}}

{{#view Todos.StatsView}}
    Remaining: {{view.remainingString}}
{{/view}} 
```

​</p>

编码：

```
/*************************** Application ********************/
Todos = Em.Application.create();
Todos.initialize();

/*************************** Models *************************/
Todos.Todo = Em.Object.extend({
    title: null,
    isDone: false
});

/*************************** Controllers ********************/
Todos.todosController = Ember.ArrayProxy.create({
    content: [],

    createTodo: function(title) {
        var todo = Todos.Todo.create({
            title: title
        });
        this.pushObject(todo);
    },
    clearCompletedTodos: function() {
        this.filterProperty('isDone', true).forEach(this.removeObject, this);
    },
    remaining: function() {
        return this.filterProperty('isDone', false).get('length');
    }.property('@each.isDone'),
    isEmpty: function() {
        return this.get('length') === 0;
    }.property('length'),
    allAreDone: function(key, value) {
        if (arguments.length === 2) {
            this.setEach('isDone', value);

            return value;
        } else {
            return !this.get('isEmpty') && this.everyProperty('isDone', true);
        }
    }.property('@each.isDone')
});

/*************************** Views **************************/
Todos.CreateTodoView = Em.TextField.extend({
    insertNewline: function() {
        var value = this.get('value');
        if (value) {
            Todos.todosController.createTodo(value);
            this.set('value', '');
        }
    }
});

Todos.StatsView = Em.View.extend({
    remainingBinding: 'Todos.todosController.remaining',

    remainingString: function() {
        var remaining = this.get('remaining');
        return remaining + (remaining === 1 ? " item" : " items");
    }.property('remaining')
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:37:00.980

我已经更新了你的小提琴工作：http: [//jsfiddle.net/KBtwG/2/](http://jsfiddle.net/KBtwG/2/)

请注意，由于您使用的是 Ember 最新版本，因此您可以利用许多新功能，例如路由器。集成 Ember 的最新功能后，您发布的代码看起来会更好。

# backbone.js - 在获取完成之前触发主干重置事件，并且集合为空

> ID：12491284
> 
> 赞同：0
> 
> 时间：2012-09-19T08:49:08.590
> 
> 标签：backbone.js, backbone-events, backbone-views

下面的代码看起来好像在获取完成之前触发了 AccItemList 集合上的“重置”事件。为此，控制台的输出如下...

渲染

0

取来的

0

...所以“渲染”在集合中没有任何模型之前被调用，这显然是错误的，但同样令人困惑的是，即使在 fetch 成功回调中，集合中似乎也没有任何模型。我也尝试在路由器初始化程序中实例化 AccItemList 集合，但这并没有什么不同。我确定我缺少一些基本的东西，请帮忙，这让我发疯！

```
$(function () {

    var AccItem = Backbone.Model.extend({
        defaults: {}
    });

    var AccItemList = Backbone.Collection.extend({
        model: AccItem,
        url: "/Dashboard/Accommodation",
        parse: function (response) {
            this.add(response.AccItems);
        }
    });

    var AccListView = Backbone.View.extend({
        el: $("#temp"),
        initialize: function () {
            _.bindAll(this, 'render', 'renderAccItem');
            this.collection = new AccItemList();
            this.collection.on('reset', this.render);
            var that = this;
            that.collection.fetch({
                success: function () {
                    console.log("fetched");
                    console.log(that.collection.models.length);
                }
            });
        },
        render: function () {
            var that = this;
            console.log("rendering");
            console.log(this.collection.models.length);
        }
    });

    var App = Backbone.Router.extend({
        routes: {
            "": "index"
        },
        index: function () {
        },
        init: function () {
            var accItemView = new AccListView();
        }
    });

    var app = new App();
    app.init();

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:12:58.873

在中，您手动添加模型，除了[Backbone 文档](http://backbonejs.org/#Collection-parse)状态`AccItemList.parse`外不返回任何内容

> **解析** *集合.解析（响应）*
> 
> 每当服务器返回集合的模型时，Backbone 都会在 fetch 中调用 parse。该函数传递原始响应对象，并**应返回要添加到集合中的模型属性数组**。默认实现是无操作的，只是通过 JSON 响应。如果您需要使用预先存在的 API 或更好的响应命名空间，请覆盖此选项。请注意，之后，如果您的模型类已经有一个解析函数，它将针对每个获取的模型运行。

尝试

```
var AccItemList = Backbone.Collection.extend({
    model: AccItem,
    url: "/Dashboard/Accommodation",
    parse: function (response) {
        return response.AccItems;
    }
}); 
```

模拟您的代码和修改版本的小提琴：http: [//jsfiddle.net/nikoshr/Q25dp/](http://jsfiddle.net/nikoshr/Q25dp/)

调用重置事件和成功回调的顺序取决于 Backbone 源代码中的实际实现。请参阅[http://documentcloud.github.com/backbone/docs/backbone.html#section-98](http://documentcloud.github.com/backbone/docs/backbone.html#section-98)

```
var success = options.success;
options.success = function(resp, status, xhr) {
    //reset call
    collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), options);

    //custom success call
    if (success) success(collection, resp);
}; 
```

# html - 如何使用 HTML5 客户端验证来验证 0 - 999 之间的数字？

> ID：12491291
> 
> 赞同：0
> 
> 时间：2012-09-19T08:49:39.143
> 
> 标签：html

我只能找到这样的验证检查？

```
 <input required pattern="^d{3}-d{2}-d{4}$"
            title="###-##-####" /> 
```

有没有办法可以验证输入以确保它是 0 - 999 之间的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:51:42.073

```
<input required pattern="^\d{1,3}$" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:31:42.783

两种方式：

```
<input required pattern="\d{1,3}">

<input required type=number min=0 max=999> 
```

这些创建不同的用户界面。在不支持的浏览器上，它们都回退到没有检查的正常输入字段。

# python - Python中如何使用WSGI从客户端接收HTML表单数据？

> ID：12491293
> 
> 赞同：0
> 
> 时间：2012-09-19T08:49:44.163
> 
> 标签：python, wsgi

> **可能重复：**
> [从 WSGI 访问 POST 数据](https://stackoverflow.com/questions/530526/accessing-post-data-from-wsgi)

我对 Python 很陌生。我知道如何在 FieldStorage 类的帮助下使用 CGI 接收从客户端提交的 HTML 表单数据，但我不知道如何使用 WSGI 来做同样的事情？

你能给我提供一小段代码吗？

# sql - 数据检索 SELECT - SQL 中的 LocalVariable

> ID：12491296
> 
> 赞同：4
> 
> 时间：2012-09-19T08:49:50.780
> 
> 标签：sql, select, local-variables

我正在制作一个存储过程，它有一个 SELECT 子句从一些连接表中选择多个列。对于这些列之一，该值取决于 CASE 的条件。

```
SELECT DISTINCT
 table1.col1 as var1,
 table2.col2 as var2,
 CASE WHEN (FLOOR(table3.col3/0.2)*0.2) > 20 THEN 20
      WHEN (FLOOR(table3.col3/0.2)*0.2) <= 20 THEN FLOOR(table3.col3/0.2)*0.2
      ELSE table3.col4 -- selecting another value is the 
                       -- value in table3.col3 is null
      END as var3 
FROM ... 
WHERE ... 
```

正如您在选择中看到的那样，我正在执行三倍的 FLOOR(table3.col3/0.2)*0.2 计算。是否可以将此计算值存储在 SELECT 内的变量中，然后在条件中使用此变量？

提前致谢，

杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:01:05.437

不，您可以将其减少到 2 个调用，如下所示。但是无论你做什么，都会比实际这样做更昂贵，因为你在那里做的事情非常快。当您实际上有一些繁重的操作时，您可以考虑改进。这没什么。您也可以创建一个 get_min 函数，但我再次认为这不值得。

有2个电话：

```
case when table3.col3 then table3.col4
     when (FLOOR(table3.col3/0.2)*0.2) > 20 THEN 20
     else FLOOR(table3.col3/0.2)*0.2
end 
```

带 min 功能：

```
case when table3.col3 then table3.col4
     else dbo.get_min(FLOOR(table3.col3/0.2)*0.2,20)
end 
```

作为旁注，我所指的 min 函数必须被构建（用户定义的函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:54:33.477

有一种方法可以通过在 的表引用中选择它来执行此操作`table3`，而不是`... FROM table3`您可以这样做：

```
SELECT ...
CASE WHEN (t3.flooredCol3) > 20 THEN 20
  WHEN (t3.flooredCol3) <= 20 THEN t3.flooredCol3

....
FROM 
(
    SELECT col1, ...,
        FLOOR(table3.col3 / 0.2) * 0.2 AS flooredCol3
    FROM table3
) t3
-- the rest of the table references 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:54:51.867

你可以做一个子查询

```
 SELECT
      *, FloorCalc
   FROM
   ( select *, (FLOOR(table3.col3/0.2)*0.2)) as FloorCalc from table3 ...) v 
```

但是，查询优化器可能会自动缓存计算结果。

# javascript - 在选中单选按钮之前禁用输入字段（HTML）

> ID：12491297
> 
> 赞同：14
> 
> 时间：2012-09-19T08:50:09.140
> 
> 标签：javascript, html, html-select, forms, html-input

我有两个字段，其中一个是文本输入字段，另一个是选择标签。问题是我希望仅启用其中一个，用户应通过单击上面的单选按钮之一来选择启用哪一个。

因此，如果用户选择第一个单选按钮，输入字段将被启用，如果他选择第二个，则选择标签将被启用。

这是我的代码：

```
 <input type="radio" name="type" value="customurl">wanna custom url?
        <input type="text" name="custom" placeholder="should be 5 charecters at least" >
        <br><br>
        <input type="radio" name="type" value="customurl">random?
        <select name="charstype">
            <option>Letters</option>
            <option>Number</option>
        </select> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T09:02:25.373

您将需要使用 javascript。您提供的代码中最短的方法是将 ID 属性附加到选择和输入字段，并通过“onclick”事件禁用/启用它们。

```
<input onclick="document.getElementById('custom').disabled = false; document.getElementById('charstype').disabled = true;" type="radio" name="type" checked="checked">wanna custom url?
<input type="text" name="custom" id="custom" placeholder="should be 5 charecters at least" >
<br><br>
<input onclick="document.getElementById('custom').disabled = true; document.getElementById('charstype').disabled = false;" type="radio" name="type" value="customurl">random?
<select name="charstype" id="charstype" disabled="disabled">
       <option>Letters</option>
       <option>Number</option>
</select>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:02:55.773

我修改了你的代码来做你想做的事，这里是：

```
<input type="radio" name="type" value="customurl" 
onclick="document.getElementById('text').removeAttribute('disabled')">wanna custom url?
<input type="text" id="text" name="custom" 
placeholder="should be 5 charecters at least" disabled>
<br><br>
<input type="radio" name="type" value="customurl" 
onclick="document.getElementById('sel').removeAttribute('disabled')">random?
<select id="sel" name="charstype" disabled>
    <option>Letters</option>
    <option>Number</option>
</select>​​​​​​​​​​​ 
```

你可以看到它在[**这里工作**](http://jsfiddle.net/YZ9bW/)

# c# - 网页上的多个标签

> ID：12491310
> 
> 赞同：1
> 
> 时间：2012-09-19T08:51:04.353
> 
> 标签：c#, asp.net

我有两个数组，一个是我需要在网页标签上显示的值，另一个是标签的位置。我在网页上有 54 个标签名称为“lb1,lb2,...lb54”

认为

```
int [] values = {21,22,18,16,17.........22}

int [] positions = {12, 1,3,5,54,.........8} 
```

现在我需要在具有相应位置的标签上显示“值”。position 数组描述了赋值的顺序。所以标签12应该有21，标签1应该有22等等......

我通过运行一个循环来尝试这个并且无法得到它..

```
for (int j=1;j<=54; j++)
{
    getLabelID("label" + positions [j].toString).Text = Convert.ToString(values[1]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:54:59.840

第一个数组基于 0 索引，因此您的循环应该从 0 开始到 <54 或数组长度

并且没有用于获取字符串的 toString 属性，有用于获取字符串值的 ToString() 方法。`positions[j].toString`也会如此`positions[j].ToString()`

并且您总是通过使用从值数组中获取第二个元素`values[1]`，它需要更改为`values[j]`

你的循环应该像

```
for (int j=0;j<positions.Length; j++)
{
    getLabelID("label" + positions[j].ToString()).Text = Convert.ToString(values[j]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:55:37.497

您缺少 ToString() 末尾的括号。尝试：

```
for (int j=1;j<=54; j++)
{
    getLabelID("label" + positions [j].ToString()).Text = Convert.ToString(values[1]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:23:54.367

如果你不想硬编码“54”，你可以这样做：

```
positions.ToList().ForEach(
  p=>getLabelID(String.Format("label{0}",p)).Text=values[p].ToString()
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:57:41.413

您可以尝试使用此代码 - 基于 LINQ 运算符

```
var controls = this.Controls.OfType<Label>().ToList();
foreach(Label item in controls)
{
     var index = Convert.ToInt32(item.Id.ToString().Replace("label","").Trim());
     var text =  Convert.ToString(values[index]);
     System.Console.WriteLine(text);
     item.Text =  text;
} 
```

# django - 在 Django 应用程序中添加/编辑对象后返回 url

> ID：12491311
> 
> 赞同：0
> 
> 时间：2012-09-19T08:51:19.343
> 
> 标签：django, django-forms, django-views

在 Django 应用程序中添加/编辑一些对象后，对 url 实施返回操作的最佳方法是什么？在我的应用程序中，我实现了添加/编辑对象的视图，这些对象可以从许多地方启动（同一操作的许多不同路径）。现在我想改进我的应用程序，并在将添加/编辑表单关闭到与启动表单之前完全相同的位置后向支持用户介绍功能。有什么常见的做法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:15:46.093

这已经被问过[很多](https://stackoverflow.com/search?q=django%20redirect%20next)次了，您可以在表单中使用下一个参数，或者，如果您使用基于类的视图，您可以使用 FormView 的[get_succes_url](https://docs.djangoproject.com/en/1.3/ref/class-based-views/#django.views.generic.edit.FormMixin.success_url)方法进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:06:33.013

我不确定我是否清楚地了解了你的问题；

但是，如果您的意思是将用户重定向到他之前所在的上一页，请转到添加/编辑表单；

您可以简单地使用 javascript 代码。某事喜欢：

```
history.back(-1) 
```

这会将用户带到浏览器上的上一页。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T08:56:24.553

实现这一点的简单方法是给你的表单一个名为 的隐藏输入**`next`**，然后在`views`just `redirect`user to**`next`**的值处。

这是[django-registration](https://bitbucket.org/ubernostrum/django-registration)的方式。

# php - 为什么 _REQUEST["MAX_FILE_SIZE"] 设置为 2097152？

> ID：12491316
> 
> 赞同：0
> 
> 时间：2012-09-19T08:51:36.097
> 
> 标签：php

我一直在关注这个非常简单的 PHP 上传脚本：

[http://www.commentcamarche.net/faq/889-php-upload-de-fichiers](http://www.commentcamarche.net/faq/889-php-upload-de-fichiers)

我确实检查了：

```
$ cat /etc/php5/apache2/php.ini | grep upload_max_filesize
upload_max_filesize = 2047M 
```

和

```
$ cat /etc/php5/apache2/php.ini | grep post_max_size
post_max_size = 2146445312 ; 2047M + 10K 
```

但是无论我在表单中设置什么，硬限制始终是（使用 phpinfo() 显示信息）：

```
 Core
  PHP Version   5.3.3-7+squeeze14 
  post_max_size 2146445312  2146445312
  upload_max_filesize   2047M   2047M

           PHP Variables
  _REQUEST["MAX_FILE_SIZE"] 2097152
  _POST["MAX_FILE_SIZE"]    2097152 
```

这个限制可能来自哪里？我只需要一个简单的 HTML 表单来发送数据，因为我的客户无法进行匿名 ftp 上传。

为了完整起见，这是我使用的：

```
$ cat input.html
<form method="post" action="upload.php" enctype="multipart/form-data">
          <input type="hidden" name="MAX_FILE_SIZE" value="2012345">
          <input type="file" name="nom_du_fichier">    
          <input type="submit" value="Envoyer">    
</form> 
```

我什至尝试删除字段 MAX_FILE_SIZE，它永远不会改变。我使用了魔法值 2012345 希望看到它出现在 phpinfo() 的输出中，但到目前为止还是没有运气......

谢谢 ！

# jquery - 带十进制的 jQuery 计算

> ID：12491319
> 
> 赞同：0
> 
> 时间：2012-09-19T08:51:47.823
> 
> 标签：jquery

所以我不确定如何从这些计算中显示小数 - 我还需要显示兴趣代码是：

```
function reCalc(borrowValue) {
    $("#targetVal").html("&pound;" + borrowValue);
    var borrowBC = Math.floor(borrowValue * 1.25);
    var borrowAC = Math.floor(borrowBC + 4.95);
    $("#paybackAmount").html(borrowAC);
} 
```

其工作原理如下：

```
borrowValue = 100
BorrowBC = 125
BorrowAC = 129 
```

我最想做的两件事：

1) BorrowAC 是十进制的，所以它的 129.95 不是 129

2）我还想展示计算利息的差异，所以假设borrowValue减去borrowAC我认为？

基本上，如果我借 100，我支付 25 利息和 4.95 费用，所以我想分别显示适用于 100 的费用和利息，这将根据他们想要的金额而增加

非常感谢提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:54:09.850

[JavaScript toFixed() 方法](http://www.w3schools.com/jsref/jsref_tofixed.asp)

```
var borrowBC = (borrowValue * 1.25).toFixed(2);
var borrowAC = (borrowBC + 4.95).toFixed(2); 
```

[演示](http://jsfiddle.net/dvuqV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:54:23.990

然后像这样编辑

```
var borrowBC = borrowValue * 1.25;
var borrowAC = borrowBC + 4.95; 
```

对于你的第二个，它将是

```
var interest = (borrowAC - borrowValue).toFixed(2); 
```

# java - SWTChart 鼠标悬停处理

> ID：12491321
> 
> 赞同：2
> 
> 时间：2012-09-19T08:52:03.133
> 
> 标签：java, swt, mouseover, onmouseover, swtchart

我找到[了 SWTChart 库](http://www.swtchart.org)，只是想知道如何用鼠标浏览下图并获取包含有关 y 值信息的框，如本[例所示](https://web.archive.org/web/20180628025902/http://teethgrinder.co.uk:80/open-flash-chart/gallery.php)。

[![一只忙碌的猫](../Images/5b36e977539c22071b5d37ceca83f0aa.png)](https://i.stack.imgur.com/HD48b.png)
[（来源：[swtchart.org](http://www.swtchart.org/screenshots/img/area.png)）]

```
package org.swtchart.examples;

import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.swtchart.Chart;
import org.swtchart.ILineSeries;
import org.swtchart.ISeries.SeriesType;

/**
* An example for area chart.
*/
public class AreaChartExample {

    private static final double[] ySeries1 = { 0.1, 0.38, 0.71, 0.92, 1.0 };

    private static final double[] ySeries2 = { 1.2, 3.53, 3.1, 0.1, 0.5 };

    /**
    * The main method.
    * 
    * @param args
    *            the arguments
    */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Area Chart");
        shell.setSize(500, 400);
        shell.setLayout(new FillLayout());

        createChart(shell);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    /**
    * create the chart.
    * 
    * @param parent
    *            The parent composite
    * @return The created chart
    */
    static public Chart createChart(Composite parent) {

        // create a chart
        Chart chart = new Chart(parent, SWT.NONE);

        // set titles
        chart.getTitle().setText("Area Chart");

        // create line series
        ILineSeries lineSeries1 = (ILineSeries) chart.getSeriesSet()
                .createSeries(SeriesType.LINE, "line series 1");
        lineSeries1.setYSeries(ySeries1);
        lineSeries1.setLineColor(Display.getDefault().getSystemColor(
                SWT.COLOR_RED));
        lineSeries1.enableArea(true);

        ILineSeries lineSeries2 = (ILineSeries) chart.getSeriesSet()
                .createSeries(SeriesType.LINE, "line series 2");
        lineSeries2.setYSeries(ySeries2);
        lineSeries2.enableArea(true);

        // adjust the axis range
        chart.getAxisSet().adjustRange();

        return chart;
    }
} 
```

怎么可能包含一个鼠标事件来打开一个带有 y 值的盒子，就像上面的例子一样？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:22:53.043

得到它的工作。我的代码将搜索离鼠标位置最近的数据点，在工具提示中显示其坐标并突出显示图中的数据点：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;
import org.swtchart.Chart;
import org.swtchart.IAxis;
import org.swtchart.ILineSeries;
import org.swtchart.ISeries;
import org.swtchart.ISeries.SeriesType;

/**
 * An example for area chart.
 */
public class AreaChartExample {

    private static final double[] ySeries1 = { 0.1, 0.38, 0.71, 0.92, 1.0 };

    private static final double[] ySeries2 = { 1.2, 3.53, 3.1, 0.1, 0.5 };

    /* Used to remember the location of the highlight point */
    private static int highlightX;
    private static int highlightY;

    /**
     * The main method.
     * 
     * @param args
     *            the arguments
     */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Area Chart");
        shell.setSize(500, 400);
        shell.setLayout(new FillLayout());

        createChart(shell);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    protected static boolean highlight;

    /**
     * create the chart.
     * 
     * @param parent
     *            The parent composite
     * @return The created chart
     */
    static public Chart createChart(Composite parent) {

        // create a chart
        final Chart chart = new Chart(parent, SWT.NONE);

        // set titles
        chart.getTitle().setText("Area Chart");

        // create line series
        ILineSeries lineSeries1 = (ILineSeries) chart.getSeriesSet()
                .createSeries(SeriesType.LINE, "line series 1");
        lineSeries1.setYSeries(ySeries1);
        lineSeries1.setLineColor(Display.getDefault().getSystemColor(
                SWT.COLOR_RED));
        lineSeries1.enableArea(true);

        ILineSeries lineSeries2 = (ILineSeries) chart.getSeriesSet()
                .createSeries(SeriesType.LINE, "line series 2");
        lineSeries2.setYSeries(ySeries2);
        lineSeries2.enableArea(true);

        // adjust the axis range
        chart.getAxisSet().adjustRange();

        /* Get the plot area and add the mouse listeners */
        final Composite plotArea = chart.getPlotArea();

        plotArea.addListener(SWT.MouseHover, new Listener() {

            @Override
            public void handleEvent(Event event) {
                IAxis xAxis = chart.getAxisSet().getXAxis(0);
                IAxis yAxis = chart.getAxisSet().getYAxis(0);

                double x = xAxis.getDataCoordinate(event.x);
                double y = yAxis.getDataCoordinate(event.y);

                ISeries[] series = chart.getSeriesSet().getSeries();

                double closestX = 0;
                double closestY = 0;
                double minDist = Double.MAX_VALUE;

                /* over all series */
                for (ISeries serie : series) {
                    double[] xS = serie.getXSeries();
                    double[] yS = serie.getYSeries();

                    /* check all data points */
                    for (int i = 0; i < xS.length; i++) {
                        /* compute distance to mouse position */
                        double newDist = Math.sqrt(Math.pow((x - xS[i]), 2)
                                + Math.pow((y - yS[i]), 2));

                        /* if closer to mouse, remember */
                        if (newDist < minDist) {
                            minDist = newDist;
                            closestX = xS[i];
                            closestY = yS[i];
                        }
                    }
                }

                /* set tooltip of closest data point */
                plotArea.setToolTipText(closestX + " " + closestY);

                /* remember closest data point */
                highlightX = xAxis.getPixelCoordinate(closestX);
                highlightY = yAxis.getPixelCoordinate(closestY);

                highlight = true;

                /* trigger repaint (paint highlight) */
                plotArea.redraw();
            }
        });

        plotArea.addListener(SWT.MouseMove, new Listener() {

            @Override
            public void handleEvent(Event arg0) {
                highlight = false;

                plotArea.redraw();
            }
        });

        plotArea.addListener(SWT.Paint, new Listener() {

            @Override
            public void handleEvent(Event event) {
                if (highlight) {
                    GC gc = event.gc;

                    gc.setBackground(Display.getDefault().getSystemColor(
                            SWT.COLOR_RED));
                    gc.setAlpha(128);

                    gc.fillOval(highlightX - 5, highlightY - 5, 10, 10);
                }
            }
        });

        return chart;
    }
} 
```

结果如下所示：

![在此处输入图像描述](../Images/ca7d7b99b400801a708b6e673e5b42d5.png)

# compilation - 跳过某些操作系统的端口编译？

> ID：12491322
> 
> 赞同：1
> 
> 时间：2012-09-19T08:52:03.650
> 
> 标签：compilation, erlang, rebar

我有一个基于 Rebar 的 Erlang 应用程序，它构建了一个端口程序。此端口程序是 Linux 特定的，因此在 Mac OS 上编译失败。但是，我希望 Rebar 在 Mac OS 上构建时跳过端口程序。我怎样才能做到这一点？

当前的规范`rebar.config`如下所示：

```
{port_specs, [{"priv/my_port", ["c_src/foo.c", "c_src/bar.c"]}]}. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:52:03.650

如[rebar_port_compiler.erl 中的注释中所述](https://github.com/basho/rebar/blob/f0bf3503cb470523db540a1f2080547450de3387/src/rebar_port_compiler.erl#L41)，列表元素`port_specs`有另一种形式`{ArchRegex, TargetFile, Sources}`。所以像这样编写你的 Rebar 配置：

```
{port_specs, [{"linux", "priv/my_port", ["c_src/foo.c", "c_src/bar.c"]}]}. 
```

“那个正则表达式匹配的是什么？”，你可能会问。[它与rebar_utils:get_arch](https://github.com/basho/rebar/blob/f0bf3503cb470523db540a1f2080547450de3387/src/rebar_utils.erl#L75)的返回值匹配，它由以下部分组成，用连字符分隔：

*   由 返回的 OTP 版本`erlang:system_info(otp_release)`，例如`"R15B02"`
*   由返回的系统架构`erlang:system_info(system_architecture)`。对于类 Unix 系统，这是由配置脚本确定的 CPU-vendor-OS 三元组，例如`"i386-apple-darwin10.8.0"`或`"x86_64-unknown-linux-gnu"`.
*   模拟器字长，32 或 64，基于`erlang:system_info({wordsize, external})`.
*   操作系统系列，`unix`或`win32`. （返回元组的第一个元素`os:type/0`）

所以最终结果将类似于`"R15B01-i386-apple-darwin10.8.0-32-unix"`or `"R15B02-x86_64-unknown-linux-gnu-64-unix"`。

# php - yii 1.1.12 如何实现复合主键

> ID：12491324
> 
> 赞同：0
> 
> 时间：2012-09-19T08:52:12.987
> 
> 标签：php, mysql, model, yii, centos

在 CrudeCode.php 中，我注释掉了第 69-70 行，并使用 Gii 创建了我的模型，它有 2 个复合键作为主键。现在当我浏览到页面时出现错误

```
2012/09/19 09:50:29 [error] [exception.CException] exception 'CException' with message 'Property "ComAsset.Array" is not defined.' in /opt/dam/yii-1.1.12.b600af/framework/base/CComponent.php:131
Stack trace:
#0 /opt/dam/yii-1.1.12.b600af/framework/db/ar/CActiveRecord.php(144): CComponent->__get('Array')
#1 /opt/dam/protected/views/comAsset/_view.php(9): CActiveRecord->__get('Array')
#2 /opt/dam/yii-1.1.12.b600af/framework/web/CBaseController.php(131): require('/opt/dam/protec...')
#3 /opt/dam/yii-1.1.12.b600af/framework/web/CBaseController.php(96): CBaseController->renderInternal('/opt/dam/protec...', Array, false)
#4 /opt/dam/yii-1.1.12.b600af/framework/zii/widgets/CListView.php(260): CBaseController->renderFile('/opt/dam/protec...', Array)
#5 /opt/dam/yii-1.1.12.b600af/framework/zii/widgets/CBaseListView.php(161): CListView->renderItems()
#6 [internal function]: CBaseListView->renderSection(Array)
#7 /opt/dam/yii-1.1.12.b600af/framework/zii/widgets/CBaseListView.php(144): preg_replace_callback('/{(\w+)}/', Array, '{summary}?{sort...')
#8 /opt/dam/yii-1.1.12.b600af/framework/zii/widgets/CBaseListView.php(129): CBaseListView->renderContent()
#9 /opt/dam/yii-1.1.12.b600af/framework/web/CBaseController.php(174): CBaseListView->run()
#10 /opt/dam/protected/views/comAsset/index.php(20): CBaseController->widget('zii.widgets.CLi...', Array)
#11 /opt/dam/yii-1.1.12.b600af/framework/web/CBaseController.php(127): require('/opt/dam/protec...')
#12 /opt/dam/yii-1.1.12.b600af/framework/web/CBaseController.php(96): CBaseController->renderInternal('/opt/dam/protec...', Array, true)
#13 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(870): CBaseController->renderFile('/opt/dam/protec...', Array, true)
#14 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(783): CController->renderPartial('index', Array, true)
#15 /opt/dam/protected/controllers/ComAssetController.php(128): CController->render('index', Array)
#16 /opt/dam/yii-1.1.12.b600af/framework/web/actions/CInlineAction.php(50): ComAssetController->actionIndex()
#17 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(309): CInlineAction->runWithParams(Array)
#18 /opt/dam/yii-1.1.12.b600af/framework/web/filters/CFilterChain.php(134): CController->runAction(Object(CInlineAction))
#19 /opt/dam/yii-1.1.12.b600af/framework/web/filters/CFilter.php(41): CFilterChain->run()
#20 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(1146): CFilter->filter(Object(CFilterChain))
#21 /opt/dam/yii-1.1.12.b600af/framework/web/filters/CInlineFilter.php(59): CController->filterAccessControl(Object(CFilterChain))
#22 /opt/dam/yii-1.1.12.b600af/framework/web/filters/CFilterChain.php(131): CInlineFilter->filter(Object(CFilterChain))
#23 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(292): CFilterChain->run()
#24 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)
#25 /opt/dam/yii-1.1.12.b600af/framework/web/CWebApplication.php(283): CController->run('')
#26 /opt/dam/yii-1.1.12.b600af/framework/web/CWebApplication.php(142): CWebApplication->runController('comAsset')
#27 /opt/dam/yii-1.1.12.b600af/framework/base/CApplication.php(162): CWebApplication->processRequest()
#28 /opt/dam/index.php(13): CApplication->run()
#29 {main}
REQUEST_URI=/dam/index.php?r=comAsset 
```

我已经在 yii 论坛上搜索并查看过，但找不到任何关于如何在 yii 1.1.12 中实现复合键的明确文档。谁能详细说明。

在我的模型中，我包含了主键功能

```
public function primaryKey()
{
    //return 'id';
    // For composite primary key, return an array like the following
    return array('fixed_asset', 'component');
}

/**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'fixedAsset0' => array(self::BELONGS_TO, 'FixedAsset', 'fixed_asset'),
            'component0' => array(self::BELONGS_TO, 'Components', 'component_id'),
        );
    } 
```

在 fixed_asset 表中，主键是`fixed_asset`和`component`。这也是`component_id`components 表和`fixed_asset_id`fixed_asset 表中的外键。我的关系和主键对吗？

# c# - 在sql表中插入文本

> ID：12491325
> 
> 赞同：2
> 
> 时间：2012-09-19T08:52:13.553
> 
> 标签：c#, sql, sql-server

当我在 sql server 的表中插入文本时，行没有显示文本并显示??????

我知道用打击代码可以纠正它：

```
INSERT [dbo].[TableName] (CityName,latitude,longitude)
VALUES (N'txt',34,56) 
```

但我使用此代码进行插入：

```
INSERT INTO [dbo].[TableName]
VALUES (@CityName,@latitude,@longitude)

sqlcmd.Parameters.Add("@CityName",SqlDbType.VarChar);
sqlcmd.Parameters.Add("@latitude", SqlDbType.Int);
sqlcmd.Parameters.Add("@longitude", SqlDbType.Int); 
```

我能做些什么 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T08:59:48.977

尝试使用`SqlDbType.NVarChar`as type for your`@CityName`而不是您当前使用的 varchar。

```
 \/
sqlcmd.Parameters.Add("@CityName", SqlDbType.NVarChar); 
```

此外，就像 Prasanna 建议的那样，使用

```
sqlcmd.Parameters.AddWithValue("@CityName", cityName); 
```

在您的情况下，这可能无需指定类型即可工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:55:32.290

它应该是：

```
sqlcmd.Parameters.Add("@CityName", SqlDbType.VarChar); 
```

并不是

```
sqlcmd.Parameters.Add("@CityName", SqlDbType.Int); 
```

**更新**

`SqlDbType.NVarChar`然后使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:59:36.700

使用**command.Parameters.AddWithValue()**而不是 command.Parameters.Add()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:54:43.860

```
insert into [dbo].[TableName] 
values(@CityName,@latitude,@longitude) 

sqlcmd.Parameters.Add("@CityName", SqlDbType.Int); <-- CityName (int) :) 
sqlcmd.Parameters.Add("@latitude", SqlDbType.VarChar); 
sqlcmd.Parameters.Add("@longitude", SqlDbType.VarChar); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T08:55:11.807

尝试这个

```
insert into [dbo].[TableName]
values(@CityName,@latitude,@longitude)

// implicit conversion of the value
sqlcmd.Parameters.AddWithValue("@CityName", 'txt');
sqlcmd.Parameters.AddWithValue("@latitude", 34);
sqlcmd.Parameters.AddWithValue("@longitude", 36); 
```

或者

```
sqlcmd.Parameters.Add("@CityName", SqlDbType.VarChar); 
sqlcmd.Parameters.Add("@latitude", SqlDbType.Int);
sqlcmd.Parameters.Add("@longitude", SqlDbType.Int); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T08:59:57.590

请使用`VarChar`而不是`int`在下表中插入记录，因为`CityName`它不是`int`：

```
INSERT INTO [dbo].[TableName]
VALUES (@CityName,@latitude,@longitude)

sqlcmd.Parameters.Add("@CityName",SqlDbType.VarChar);
// Replace of 
sqlcmd.Parameters.Add("@CityName", SqlDbType.Int);

sqlcmd.Parameters.Add("@latitude", SqlDbType.Int);
sqlcmd.Parameters.Add("@longitude", SqlDbType.Int); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T09:05:07.300

请编辑您的连接字符串，其中 UTF-8 和 SQL 数据库端必须声明 'nvarchar' 而不是 'varchar' ：

```
 Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;CharSet=utf8; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T08:57:29.367

你的参数类型没有反转吗？

是否应该由 SqlDbType.VarChar 和其他 2 个 SqlDbType.Int 来“@CityName”？

# mysql - MySQL 性能波动

> ID：12491326
> 
> 赞同：0
> 
> 时间：2012-09-19T08:52:15.613
> 
> 标签：mysql, database, performance

我有一个带有不同表的 MySQL (MyISAM) 数据库。让我们以具有下表的数据库“rh955_omf”为例：

*   信号（600 MB，17925 个条目）
*   图片（5'355 MB，17925 个条目）
*   速度（680 MB，4979 个条目）

实际上，我只是专注于信号表条目。因此，我想更好地描述这张表。它的创建如下：

```
CREATE TABLE rh955_omf.signal(MeasNr TINYINT UNSIGNED, ExperimentNr TINYINT UNSIGNED, Time INT, SequenceNr SMALLINT UNSIGNED, MeanBeatRate SMALLINT UNSIGNED, MedBeatRate SMALLINT UNSIGNED, MeanAmp1 MEDIUMINT UNSIGNED, MeanAmp2 MEDIUMINT UNSIGNED, StdDeviationAmp1 DOUBLE, StdDeviationAmp2 DOUBLE, MeanDeltaAmp MEDIUMINT UNSIGNED, Offset INT UNSIGNED, NrOfPeaks SMALLINT UNSIGNED, `Signal` MEDIUMBLOB, Peakcoord MEDIUMBLOB, Validity BOOL, Comment VARCHAR(255), PRIMARY KEY(MeasNr, ExperimentNr, SequenceNr)); 
```

我使用以下命令从该表中加载值：

```
SELECT MeanBeatRate FROM rh955_omf.signal WHERE MeasNr = 3 AND ExperimentNr = 10 AND SequenceNr BETWEEN 0 AND 407 
```

如果我第一次加载整个“MeanBeatRate”行（int 16 值），大约需要 54 秒（MeasNr = 1..3，ExperimentNr = 1..24，SequenceNr >= min AND <= max）。如果我再次加载它，它需要 0.5 秒（缓存）。

所以我想做的是加快数据库的速度。因此，我创建了一些新数据库，但没有将所有表放入不同的数据库中：

*   rh955_copy_omf：信号表
*   rh955_p_copy_omf：信号表、图片表
*   rh955_v_p_copy_omf：信号表、图片表、速度表

我重新启动计算机并从不同的表中加载所有“MeanBeatRate”值。这给了我以下时间：

*   rh955_omf：54s（如前所述）
*   rh955_copy_omf：3.1s
*   rh955_p_copy_omf：12.9s
*   rh955_v_p_copy_omf：10.7s

所以看起来加载数据的时间取决于数据库中的其他表。这甚至可能吗（因为我只是在“信号”表中搜索）？更令人困惑的是：在“rh955_v_p_copy_omf”表中，我拥有原始表中的所有数据，但性能要好约 5 倍。对这种行为有什么解释吗？我会感谢任何帮助，因为我真的被困在这一点上，需要提高数据库性能......

**附加信息：**在一种情况下，我使用命令“LOAD DATA INFILE 'D:/Exported MySQL/rh955/signal.omf' INTO table rh955_omf.signal”将数据存储在表中（这是加载数据缓慢的情况） ，在其他情况下，我逐行存储数据。也许这就是为什么性能不同的原因？如果是，从文件存储数据的解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:02:38.260

它们的索引是否相同？

每个数据库的服务器参数是否相同（相同的内存、启动配置和参数等）？

它们在同一个磁盘上吗？

如果它们在同一个磁盘上，是否有其他应用程序同时运行会影响读写头的位置？

您是每次都停止其他数据库还是有一些仍在运行？

# c++ - python distutils 不包括 SWIG 生成的模块

> ID：12491328
> 
> 赞同：20
> 
> 时间：2012-09-19T08:52:23.947
> 
> 标签：c++, python, swig, rpm, distutils

我正在使用 distutils 从我的项目中创建一个 rpm。我有这个目录树：

```
project/
        my_module/
                 data/file.dat
                 my_module1.py
                 my_module2.py
        src/
            header1.h
            header2.h
            ext_module1.cpp
            ext_module2.cpp
            swig_module.i
        setup.py
        MANIFEST.in
        MANIFEST 
```

我的`setup.py`：

```
from distutils.core import setup, Extension

module1 = Extension('my_module._module',
                sources=['src/ext_module1.cpp',
                         'src/ext_module2.cpp',
                         'src/swig_module.i'],
                swig_opts=['-c++', '-py3'],
                include_dirs=[...],
                runtime_library_dirs=[...],
                libraries=[...],
                extra_compile_args=['-Wno-write-strings'])

setup(  name            = 'my_module',
        version         = '0.6',
        author          = 'microo8',
        author_email    = 'magyarvladimir@gmail.com',
        description     = '',
        license         = 'GPLv3',
        url             = '',
        platforms       = ['x86_64'],
        ext_modules     = [module1],
        packages        = ['my_module'],
        package_dir     = {'my_module': 'my_module'},
        package_data    = {'my_module': ['data/*.dat']} ) 
```

我的`MANIFEST.in`文件：

```
include src/header1.h
include src/header2.h 
```

该`MANIFEST`文件由`python3 setup.py sdist`. 当我运行`python3 setup.py bdist_rpm`它时，它会编译并创建正确的 rpm 包。但问题是，当我在 C++ 源代码上运行 SWIG 时，它会创建一个`module.py`包装二进制`_module.cpython32-mu.so`文件的文件，它是使用`module_wrap.cpp`文件创建的，并且不会复制到`my_module`目录中。

我必须写入`setup.py`文件以自动复制 SWIG 生成的 python 模块？

而且我还有另一个问题：当我安装 rpm 包时，我希望创建一个可执行文件`/usr/bin`来运行应用程序（例如，如果它`my_module/my_module1.py`是应用程序的启动脚本，那么我可以在 bash 中运行：`$ my_module1`）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-20T14:08:09.497

问题是`build_py`（将 python 源代码复制到构建目录）在`build_ext`运行 SWIG 之前。

您可以轻松地将构建命令子类化并交换顺序，因此在尝试复制它之前`build_ext`生成。`module1.py``build_py`

```
from distutils.command.build import build

class CustomBuild(build):
    sub_commands = [
        ('build_ext', build.has_ext_modules), 
        ('build_py', build.has_pure_modules),
        ('build_clib', build.has_c_libraries), 
        ('build_scripts', build.has_scripts),
    ]

module1 = Extension('_module1', etc...)

setup(
    cmdclass={'build': CustomBuild},
    py_modules=['module1'],
    ext_modules=[module1]
) 
```

但是，这样做有一个问题：如果您使用的是 setuptools，而不仅仅是普通的 distutils，running`python setup.py install`将不会运行自定义构建命令。这是因为 setuptools install 命令实际上并没有先运行 build 命令，它运行的是 egg_info，然后是 install_lib，后者运行的是 build_py，然后是 build_ext。

因此，可能更好的解决方案是将 build 和 install 命令子类化，并确保 build_ext 在两者开始时运行。

```
from distutils.command.build import build
from setuptools.command.install import install

class CustomBuild(build):
    def run(self):
        self.run_command('build_ext')
        build.run(self)

class CustomInstall(install):
    def run(self):
        self.run_command('build_ext')
        self.do_egg_install()

setup(
    cmdclass={'build': CustomBuild, 'install': CustomInstall},
    py_modules=['module1'],
    ext_modules=[module1]
) 
```

看起来您不需要担心 build_ext 会运行两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:25:24.453

这不是一个完整的答案，因为我没有完整的解决方案。模块未复制到安装目录的原因是安装过程尝试复制它时它不存在。事件的顺序是：

```
running install
running build
running build_py
file my_module.py (for module my_module) not found
file vcanmapper.py (for module vcanmapper) not found
running build_ext 
```

如果您第二次运行`python setup.py install`，它将首先执行您想要的操作。Python 的官方 SWIG 文档建议您先运行`swig`以生成包装文件，然后再运行`setup.py install`以进行实际安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:56:01.177

[看起来](http://docs.python.org/distutils/setupscript.html#extension-source-files)您必须添加一个`py_modules`选项，例如：

```
setup(...,
  ext_modules=[Extension('_foo', ['foo.i'],
                         swig_opts=['-modern', '-I../include'])],
  py_modules=['foo'],
) 
```

[在 Linux 中使用 rpm 安装系统脚本](http://www.logiqwest.com/TechnicalPapers/rpmScriptInstall.html)，您必须修改您的规范文件。该`%files`部分告诉`rpm`将文件放在哪里，您可以将其移动或链接到 in `%post`，但[可以](https://stackoverflow.com/a/1509052/819417)使用以下方法定义`setup.py`：

```
options = {'bdist_rpm':{'post_install':'post_install', 'post_uninstall':'post_uninstall'}}, 
```

[在 Bash 中运行 Python 脚本](http://sandbox.mc.edu/~bennet/python/running.html)可以使用通常的第一行 as`#!/usr/bin/python`和文件上的可执行位使用`chmod +x filename`.

# orm - 使用组件的流畅 NHibernate 映射

> ID：12491329
> 
> 赞同：1
> 
> 时间：2012-09-19T08:52:32.290
> 
> 标签：orm, fluent-nhibernate, nhibernate-mapping

我刚刚开始使用 Fluent NHibernate 开展一个项目。

使用 Fluent NHibernate 映射以下类的正确方法是什么？

```
public class DurationUnit
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}

public class Duration
{
    public virtual int Value { get; set; }
    public virtual DurationUnit Unit { get; set; }
    public virtual int DurationInMinutes { get{ throw new NotImplementedException(); } }
}

public class Event
{
    public virtual int Id { get; set; }
    public virtual String Name { get; set; }
    public virtual Duration MaxDuration { get; set; }
    public virtual Duration MinDuration { get; set; }
} 
```

我最初的方法是为 DurationUnit 和 Event 声明一个 ClassMap，并将 Duration 作为 Event 的一个组件。尝试此操作时，我收到了异常：

> NHibernate.MappingException：无法确定类型：Entities.DurationUnit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:51:49.420

如果您的映射看起来像这样

```
public EventMap()
{
    Component(x => x.MaxDuration, c =>
    {
        c.Map(x => x.Value, "MaxDurationValue");
        c.Reference(x => x.Unit, "MaxDurationUnitId");
    });
} 
```

然后确保`class DurationUnitMap`是公开的并被添加到配置中

# magento - Magento，在分层导航中显示是/否属性过滤器

> ID：12491331
> 
> 赞同：0
> 
> 时间：2012-09-19T08:52:44.457
> 
> 标签：magento, attributes

我在 Magento 管理员中创建了新属性为是/否类型。我只想在前端显示此属性，但 Magento 不支持在分层导航中使用是/否类型属性。

有人帮我做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:50:52.373

您可以将其添加为下拉列表，然后仅添加两个选项，是和否。

这将是一个非常容易的工作:)

# ios - MKMapView 在卸载和加载后忽略注释（内存警告）

> ID：12491339
> 
> 赞同：1
> 
> 时间：2012-09-19T08:53:07.423
> 
> 标签：ios, mkmapview

请帮我解决这个障碍。我有一个带有大约 200 个注释的**MKMapView 。**当我点击其中一个时，一个详细视图被推送到 UINavigationController 中，因此 MKMapView 被隐藏。在浏览呈现的详细视图期间，我收到**内存警告**并且隐藏视图被卸载。在我关闭显示的详细视图后，**再次加载带有 MKMapView**的视图，但没有可见注释（除了用户位置蓝色气泡）并且焦点被重置为默认值。[mapView: viewForAnnotation:] 没有被调用。

即使我删除了 viewDidUnload 中的所有注释并在 viewDidLoad 中插入新的注释，MKMapView 也不会显示它们，即使 [mapView: viewForAnnotation:] 被每个单独的注释调用。

知道如何在卸载和加载后使其表现并保持相同的可见地图矩形吗？非常感谢。

编辑 - 已解决！问题是在 initWithNibName 中，我得到了

地图 = (MKMapView*)[self.view viewWithTag:TAG_MAP];

从那一刻起，我只使用“地图”变量。但是在重新加载之后，变量显然指向了一个无效的对象。所以我将上面的命令移到了 viewDidLoad，现在它可以工作了。感谢克雷格为我指明了好的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:16:14.610

也许您在重新加载期间与 MKMapView 或其委托分离。您可以查看修复内存警告，或更改地图初始化代码以确保在 viewdidload 期间调用相同的内容作为初始加载。不过可能值得检查 viewDidLoad，我想我听说它在 iOS 6 中得到了不同的处理。

# iphone - 由于捆绑包 ID，iPhone 应用程序更新无法验证

> ID：12491342
> 
> 赞同：1
> 
> 时间：2012-09-19T08:53:21.473
> 
> 标签：iphone, app-store, app-store-connect

我们无法在应用商店发布我们对 iPhone 应用的第一次更新。构建后的验证步骤总是失败：

“此捆绑包无效。捆绑包标识符无法从以前的版本更改。如果您想更改捆绑包标识符，您需要在 iTunes Connect 中创建一个新应用程序。”

我们只有一个 Apple 帐户，只有一个应用程序。自从我们在夏天早些时候发布以来，我们就没有更改 plist 文件中的捆绑 ID（虽然在我们发布之前有所不同）。它是“com.company.product”（我们的真实公司名称和真实产品名称全部小写）。我们只是将版本号从 1.0 增加到 1.10（在看到这里有问题的文章后转到 1.1）

iTunes 连接需要 1.10 和相同的捆绑包 ID。花了 2 天谷歌搜索，但找不到任何有用的东西，并尝试了不同的版本和捆绑 ID 等，但没有什么好。请帮忙！

（我还向 Apple 发送了一个关于此问题的 iTunes 连接问题，但到目前为止没有回复）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:51:55.977

我之前遇到过这个错误，但是我不确定你是否做了和我一样的事情：

在我的应用程序的 1.0、1.1 和 1.2 版本中，它只支持 iPhone。然后我得到了自己的 iPad 进行测试。在我的应用程序的 1.3 版中，我对其进行了更新以支持 iPhone 和 iPad。它不会上传，给我这个错误。事实证明，如果你想要一个通用应用程序，它必须从一开始就是通用的，你不能决定在 1.4 版或任何你想添加 iPad 兼容性的东西。

# java - NFSv4 - EOFException

> ID：12491343
> 
> 赞同：2
> 
> 时间：2012-09-19T08:53:22.430
> 
> 标签：java, nfs

我有以下问题：

这段代码...

```
 try {
        fis = new FileInputStream(serializedKeyIndex);
        in = new ObjectInputStream(fis);  // this line throws the EOFException (and IOException)
        keys = (HashMap<String, String>) in.readObject();
        in.close();
    } catch (FileNotFoundException e) {
        // create the key index
        keys = new HashMap<String, String>();
        storeKeyIndex(bucket, keys);
    } catch (IOException e) {
        throw new DataAccessResourceFailureException(
                "Unable to store Bucket: " + bucket, e);
    } catch (ClassNotFoundException e) {
        throw new DataAccessResourceFailureException(
                "Unable to store Bucket: " + bucket, e);
    } 
```

... littles3 服务器实现（[http://code.google.com/p/littles3/source/browse/trunk/modules/filesystem/src/main/java/com/jpeterson/littles3/dao/filesystem/FileS3ObjectDao .java](http://code.google.com/p/littles3/source/browse/trunk/modules/filesystem/src/main/java/com/jpeterson/littles3/dao/filesystem/FileS3ObjectDao.java)，在第 474 行）在已安装的 NFS 版本 4 驱动器上引发 EOFException。

Glassfish 的报告告诉我：

```
 [#|2012-09-19T10:46:00.277+0200|WARNING|oracle-glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID
 java.io.EOFException
     at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298)
     at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767)
     at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)
     at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
     at com.jpeterson.littles3.dao.filesystem.FileS3ObjectDao.retrieveKeyIndex(FileS3ObjectDao.java:474)
     at com.jpeterson.littles3.dao.filesystem.FileS3ObjectDao.loadS3Object(FileS3ObjectDao.java:63)
     at com.jpeterson.littles3.service.impl.FileStorageServiceImpl.load(FileStorageServiceImpl.java:89)
     at com.jpeterson.littles3.StorageEngine.methodPut(StorageEngine.java:823)
     at com.jpeterson.littles3.StorageEngine.doService(StorageEngine.java:233)
     at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:475)
     at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:450)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:691)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
     at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 
```

奇怪的是，它可以在通常的本地文件系统中正常工作。那里也不例外。

如果我想在存储桶下创建第二个 S3Object（文件夹或文件），NFSv4 只会出现该错误。似乎它只能在一个桶下面创建一个 S3Object 。正如我已经说过的，它在通常的文件系统上运行良好。

文件锁可能会导致该问题吗？有人已经在这里获得了经验吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:07:57.360

错误消息表明该文件为空。

# java - 从xml导入jtable

> ID：12491345
> 
> 赞同：0
> 
> 时间：2012-09-19T08:53:30.963
> 
> 标签：java, xml, jtable

我编写了一个可以将数据保存到 xml 的代码。现在我想使用该存储的 xml 并将其数据导入表单中的表中。问题是：代码没有错误，但表格不是带有 xml 数据的字段：（这是我的代码：

```
 private void jPanel4ComponentShown(java.awt.event.ComponentEvent evt) {                                       
      // TODO add your handling code here:
    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    try{
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse("D:\\test.xml");

    Element root = doc.getDocumentElement();

    NodeList nodelist1 = root.getElementsByTagName("FrameDefinitionSection");

    String[] st= new String[4];

    for(int i=0;i<nodelist1.getLength();i++)
    {
        Node node=nodelist1.item(i);
        st[0]= node.getChildNodes().item(1).getTextContent();
        st[1]= node.getChildNodes().item(3).getTextContent();
        st[2]= node.getChildNodes().item(5).getTextContent();
        st[3]= node.getChildNodes().item(7).getTextContent();
        ((DefaultTableModel) jTable1.getModel()).addRow(st);
    }

    }
    catch(Exception ex)
    {
        System.out.print("error");
    }
} 
```

这是我的 xml 文件：该表应该将此 xml 中的节点显示到表的字段中，但它不起作用！：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<FrameDefinitionSection>
<FrameNameAndElements>
<FrameName>here is the frame's name</FrameName>
<FrameElements>its element</FrameElements>
</FrameNameAndElements>
<FrameDefinition>
<Definition>the definition of the frame</Definition>
</FrameDefinition>
<FrameExampleSentences>
<ExampleSentences>its example as well</ExampleSentences>
</FrameExampleSentences>
</FrameDefinitionSection> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:09:38.323

1.  您在 Root-Node 下搜索节点 FrameDefinitionSection-Tags，但您必须搜索 FrameNameAndElements-Tags
2.  getElementsByTagName 也会找到 sub-sub-sub-tags。

你最好使用这个：

```
 DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse("D:\\test.xml");

        Element root = doc.getDocumentElement();

        NodeList nodelist1 =
                root.getChildNodes();

        String[] st = new String[4];

        for (int i = 0; i < nodelist1.getLength(); i++)
        {
            Node node = nodelist1.item(i);
            if (node.getNodeType() == node.ENTITY_NODE) {
                st[0] = node.getChildNodes().item(1).getTextContent();
                st[1] = node.getChildNodes().item(3).getTextContent();
                st[2] = node.getChildNodes().item(5).getTextContent();
                st[3] = node.getChildNodes().item(7).getTextContent();
                ((DefaultTableModel) jTable1.getModel()).addRow(st);
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:41:33.713

如果你像下面这样写，nodelist1 为空。

```
 NodeList nodelist1 = root.getElementsByTagName("FrameDefinitionSection"); 
```

所以你需要像这样改变，

```
 NodeList nodelist1 = doc.getElementsByTagName("FrameDefinitionSection"); 
```

# javascript - 如何防止 ESC 按下时的连接中断？

> ID：12491347
> 
> 赞同：1
> 
> 时间：2012-09-19T08:53:32.820
> 
> 标签：javascript, browser, webpage

当我们按下 ESC 时，浏览器的服务器连接会中断，除非另一个请求，例如用户输入或 ajax 请求。

我的问题是，当我在将文件上传到服务器时按 ESC 时，我的上传不会进一步处理（它挂起）。但是我需要按 ESC 键才能获得页面的某些功能。如，

1.  按 ENTER 进行重命名，按 ESC 忽略重命名。
2.  按 ESC 取消消息框等。

当我们按下 ESC 时，如何编写 JavaScript 以防止连接中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:44:15.220

让忽略重命名和取消消息框的两个功能是 `cancelRename();` 现在`cancelMsgBox();` 通过此脚本检查浏览器上的 ESC 按下；

```
function isESCpress(ev) {
if(ev.keyCode==27) {cancelRename();cancelMsgBox();return false;}
}
document.onkeypress=isESCpress; 
```

笔记：

函数`cancelRename();`，`cancelMsgBox();`当您按 ESC 时将始终调用。因此，您必须自己管理。

提示：

```
function cancelRename() {
if(cancelStatus==1) //do your rename cancel process
} 
```

# google-maps-api-3 - gmap api v3 自动完成功能在“集成 IE7/8”中不起作用

> ID：12491352
> 
> 赞同：1
> 
> 时间：2012-09-19T08:53:40.590
> 
> 标签：google-maps-api-3

我的IE8集成在VC++应用程序中，web应用程序必须运行在这个“集成的IE浏览器”中。自动完成功能适用于独立的 IE8 和 FF15，但不适用于“集成 IE8”。如果我在文本字段中输入内容，不仅自动完成功能不起作用，输入的文本也会在焦点消失时自动清除。

如果我像下面这样强制设置值，gmap 自动完成将（仅）对该输入起作用。

```
<input id="searchTextField" type="text" size="50" value="london" /> 
```

所以我一开始以为这个值是不能输入的，但是使用jQuery自动完成的其他自动完成字段工作得很好。我想知道什么可能导致这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:58:10.673

我解决了问题，可以在VC++Application中配置IE

# security - 如何在 Windows 启动前运行 Application.exe？

> ID：12491364
> 
> 赞同：13
> 
> 时间：2012-09-19T08:54:15.813
> 
> 标签：security, windows-7, windows-applications, windows-task-scheduler

我有一个带有用户界面的 Windows 应用程序可以做一些事情......现在我的客户想要这样，当他按下电源按钮 MyApplication 在他强制输入用户名和密码之前运行！评论：系统在 Windows XP 或 7 上是多用户的。

有可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-12-15T02:39:14.310

我发现这样做的方法是创建一个带有“启动时”触发器的计划任务。这会在 Windows 登录之前启动应用程序。如果您需要运行不是服务的东西，这在服务器类型环境中特别有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T09:00:21.893

很简单。过程是。

1.  运行 gpedit.msc
2.  转到计算机配置 -> Windows 设置 -> 脚本（启动/关闭）
3.  转到启动属性，然后您将获得新窗口。
4.  现在添加您要在登录前运行的程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T04:22:55.093

正确的方法是实现 Windows 服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T23:48:16.210

我在这里使用了这篇文章，因为我运行了一个 Minecraft 服务器，我需要让控制台交互，以便我可以管理服务器并将它作为服务运行在这种情况下不是一个好的解决方案：[https://www.tenforums .com/tutorials/138685-turn-off-automatically-restart-apps-after-sign-windows-10-a.html](https://www.tenforums.com/tutorials/138685-turn-off-automatically-restart-apps-after-sign-windows-10-a.html)

我所做的是编辑注册表：

1.  去`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon`
2.  创建一个新的 DWORD 值（如果此 DWORD 尚不存在）并`RestartApps`使用值**1调用它**

现在，这会启动通常在您登录之前启动的应用程序并启动程序`shell:startup`

* * *

## 回答 #5

> 赞同：-13
> 
> 时间：2013-10-26T23:53:15.627

如果不先加载操作系统，您将无法运行 exe。但是，您可以在不先登录的情况下运行 exe。只需将 exe 的快捷方式复制并粘贴到 C:\Documents and Settings\Administrator[或其他用户名]\Start Menu\Programs\Startup 即可。然后检查 msconfig 以确保检查您的 exe 以在启动时运行。

# r - 在 \SweaveInput{} 中使用 Sexpr{}

> ID：12491372
> 
> 赞同：4
> 
> 时间：2012-09-19T08:54:36.860
> 
> 标签：r, sweave

我有这 2 行代码，我使用 R Sweave 函数运行。

```
\SweaveInput{samples.rnw}
\SweaveInput{\Sexpr{args$samples}} 
```

第一行导致包含相应文件的内容，而第二行仅导致对 Sexpr{} 术语的评估，仅此而已。我想要的是：首先让评估 Sexpr{} 术语，然后包含相应的文件内容。

如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:09:23.740

如果您使用该[`knitr`软件包](http://yihui.name/knitr)，则解决方案很简单

```
<<child='samples.rnw'>>=
<<child=args$samples>>=
@ 
```

Sweave 在可编程性方面要弱得多`knitr`。例如，`knitr`允许块选项是任何有效的 R 表达式，这就是我们可以`child=args$samples`在这里写的原因；`knitr`将像函数参数一样评估块选项。

顺便说一句，该`child`选项等同于`\SweaveInput{}`，但我强烈反对使用伪 LaTeX 命令。有关 Sweave vs 的更多信息`knitr`，请参阅[http://yihui.name/knitr/demo/sweave/](http://yihui.name/knitr/demo/sweave/)

# eclipse - EJB - 发送数据到远程

> ID：12491384
> 
> 赞同：1
> 
> 时间：2012-09-19T08:55:10.793
> 
> 标签：eclipse, jsf, ejb, send

我想在两个应用程序 JEE6/JSF2.0 之间交换数据，我正在寻找最佳解决方案。我想到了以下解决方案：

*   通过使用 JSON 文件。
*   通过使用 XML 文件。
*   通过使用 GSON 文件。
*   通过使用远程接口 (EJB 3.0)。

对您来说，最好的解决方案是什么？

编辑：这两个应用程序将始终在同一个网络上运行（但不能在同一个 JVM 上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:54:11.660

我想为大卫的回答提供一个替代方案，因为我觉得 RMI 存在一些他低估的缺点。

1.  这是 Java 特有的技术。如果需要引入第三台服务器并且它是 Microsoft Reporting Services 服务器，那么它就不能使用相同的语言。

2.  RMI 是一项旧技术，在简历上看起来并不特别好。Web 服务是未来。经验丰富的 RMI 开发人员比经验丰富的 Web 服务开发人员更为罕见。

3.  笨重的框架

我认为更好的解决方案是使用基于 SOAP XML 的 Web 服务。以下是这种方法的一些优点：

1.  在几乎所有开发框架中普遍接受。无论采用何种技术，几乎所有技术都有用于与 Web 服务交互的有用库。

2.  Java 很好地支持将对象序列化为 XML。这意味着对象可以快速序列化为 SOAP XML 请求，发送到其他服务器，然后由其他应用服务器反序列化回 Java 对象进行处理。

3.  服务层可以为您提供两个应用程序之间的解耦接口，就像 RMI 一样。

我希望您重新考虑在您的应用程序中使用基于 SOAP XML 的 Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:14:33.553

正如您自己所说，有两种选择。

使用 RMI 连接到 EJB 或使用 Web 服务并通过 JSON/XML 等进行通信......

根据我的经验，如果您的应用程序在同一个网络上，RMI 可能是有利的，如果不是，那么您可能会遇到防火墙等问题并被迫使用 HTTPS 对 RMI 进行隧道传输……这几乎使 RMI 调用 web 服务调用。

如果您在两台不同的机器上，那么 Web 服务很好，因为它们不会对防火墙造成太大的麻烦。此外，由于他们使用 HTTP 协议，您不必担心正在传输的数据。

这些例子有点笼统，但应该给你一些见识。

GSON vs XML vs JSON 是一个完全不同的主题...... Non 优于另一个，并且都相当容易被人眼阅读。

**更新** 据我了解，您不必担心防火墙等问题，我建议您使用 RMI。它通常会产生更简洁的代码和更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T07:52:09.170

由于我已经看到了这两种技术的实际应用，因此我可以对 EJB 和 WebServices 这两种技术进行比较。我可以确认 EJB 效率更高，支持事务（包括分布式事务，如果这是您的要求）、异常处理和开箱即用的二进制流。在性能方面，EJB 的速度可能超过 SOAP 5 倍，而 REST 大约是 3 倍。

但是，EJB 不是一种集成技术。事实上，它从未想过这样做。EJB 最大的缺陷是它与 Java 平台的耦合度很高。因此，两个端点都必须用 Java 编写，并且应该使用相同的 Java EE 版本。

另一个问题是 EJB 本身不是协议，因此来自两个容器/供应商的实现可能不同。如果您需要从 Oracle WebLogic 服务器上的 JBoss AS 访问远程 EJB，您必须随身携带 JBoss EJB 客户端实现。

与 EJB 集成相关的另一个大问题是缺乏数据交换格式。由于它使用 Java 序列化对象进行通信，因此数据类型必须在两端共享。如果你在服务器上创建了一个新的异常类型，它被归类为Application Exception，如果消费这个服务的客户端触发了这个异常，他的代码就会中断。请注意，在这种情况下，没有违反远程 API，而是引入了另一种未知类型。

当然，仅仅依靠类类型作为交换格式，你就给了程序员做非常愚蠢的事情的机会。如果您在大型项目中有许多不同的团队使用 EJB 作为集成技术，并使用不同版本的 Java EE，那么请准备好体验极度痛苦。我似乎是一个程序员，在客户端包括一个 JPA 实体，它被命名查询、正在访问的表、它的列等注释，基本上将所有数据库布局都交给了服务使用者。但它可能会变得更糟。我似乎已经是一名程序员返回属于依赖项的数据结构，即 Eclipselink 1.0。但是，如果从 JBoss 服务器访问，Eclipselink 也是 JPA 实现技术，与 JBoss 的 hibernate 冲突。所以，现在您必须在您的 JBoss APP 类路径中包含 Eclipselink jar 并配置容器以不加载 JPA 相关包，否则将完全破坏您的应用程序。即便如此，它可能会变得比以前更糟：您需要连接的其他一些服务也有使用相同数据结构的好主意，但现在从 Eclipselink 1.1.1 开始，它具有不同的实现，但具有相同的类签名。现在你的处境很糟糕。但相同的类签名。现在你的处境很糟糕。但相同的类签名。现在你的处境很糟糕。

底线：永远不要使用 EJB 作为集成技术。使用契约优先方法使用 SOAP，您可以在其中为应用程序定义规范数据模型，将 java 数据结构映射到任何客户端都可以使用的 XML 交换格式，无论是用任何语言编写还是使用不同的堆栈。或者使用 REST 实现基于资源的 HATEOAS 原则。这些天来，我似乎根本没有使用 EJB 的理由，因为 CDI 现在已经上市，支持 EJB 的许多特性，但不包括任何 RPC 相关技术。

# c# - 从父表单项目中引用的子表单返回 DialogResult

> ID：12491392
> 
> 赞同：0
> 
> 时间：2012-09-19T08:55:33.080
> 
> 标签：c#, winforms, formclosing

在一个多项目解决方案中，我有一个带有 2 个表单的启动 WinForms 项目，`DialogResult`每当子表单显示在我的主表单中继续执行时，我都会期待一个。

```
var form2 = new ThisNameSpace.FormChild();
var dResult = form2.ShowDialog(this);

if(dResult == DialogResult.OK)
{
    // Do some work
}
else
{
    // Do other work
} 
```

出于某种原因，我不得不将子窗体移动到另一个项目中。我在我的主启动表单项目中引用了新项目的 dll，但我现在无法返回对话框结果。当我的子表单关闭时，`FormClosing`会引发主表单的事件`CloseReason.None`并且应用程序退出。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:44:32.570

您不应该自己引发`FormClosing`事件，也不应该编写任何自定义代码来关闭对话框。

而是这样做：

*   在子窗体中的“确定”按钮上，将`DialogResult`属性设置为`OK`
*   在您的子表单上，将 set`Accept Button`属性设置为指向您的确定按钮

这就是您关闭窗口所需的全部内容，并且将返回正确的 DialogResult。

如果您需要“手动”关闭它（这在模态对话框中很少见，即用`ShowDialog`代替打开的对话框`Show`），请使用`Close`method.

# c# - 模式与大字符串不匹配（c# 风格）

> ID：12491394
> 
> 赞同：0
> 
> 时间：2012-09-19T08:55:44.907
> 
> 标签：c#, xml, regex

我正在使用正则表达式，大型 XML 文件的 C# 风格。我通过不止一个案例注意到，一些应该在一种“大字符串”上运行的模式根本不匹配。例如，以下字符串：

```
<p>
<?tex xxxxxx ?>
</p>
  <table-wrap position="float">
 <table>
 <tbody>
 <tr>
<td colspan="2">
<hr/>
</td>
</tr>
<tr>
<td>
<nlm.tabular>Patient</nlm.tabular>
</td>
<td>
<nlm.tabular>Patient Waiting Time</nlm.tabular>
</td>
</tr>
<tr><td
<nlm.tabular>1st patient in block <italic>B</italic>
<subscript>1</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular>0</nlm.tabular>
</td>
</tr><tr>
<td>
<nlm.tabular>2nd patient in block <italic>B</italic><subscript>1</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn></mml:mrow>
</mml:msubsup>
</mml:math></nlm.tabular>
</td>
</tr>
<tr>
<td>
<nlm.tabular>3rd patient in block <italic>B</italic>
<subscript>1</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
<mml:mrow><mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
</mml:msubsup>
<mml:mo>+</mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">2</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn></mml:mrow></mml:msubsup></mml:math>
</nlm.tabular>
<?tex llllll?>
</td></tr>
<tr>
<td>
<nlm.tabular/>
</td>
<td>
<nlm.tabular/>
</td>
</tr>
<tr>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:mo>⋮&lt;/mml:mo>
</mml:math>
</nlm.tabular>
</td>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:mo>⋮&lt;/mml:mo></mml:math>
</nlm.tabular>
<?tex cccccccc?>
</td></tr>
<tr>
<td>
<nlm.tabular>
<italic>n</italic>
<subscript>1</subscript>th patient in block <italic>B</italic>
<subscript>1</subscript></nlm.tabular>
</td><td>
<nlm.tabular>
<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow><mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow></mml:msubsup>
<mml:mo>+</mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">2</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
</mml:msubsup><mml:mo>+</mml:mo>
<mml:mo>…&lt;/mml:mo>
<mml:mo>+</mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi></mml:mrow>
<mml:mrow>
<mml:msub>
<mml:mrow>
<mml:mi>n</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
<mml:mo>-</mml:mo>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
</mml:msub>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
</mml:msubsup>
</mml:math>
</nlm.tabular>
</td>
</tr>
<tr>
<td colspan="2">
<hr/>
</td>
</tr>
<tr>
<td>
<nlm.tabular>vvvvvvvvvvvvvv</nlm.tabular>
</td>
<td>
<nlm.tabular>2222222222</nlm.tabular>
</td>
</tr>
<tr>
<td>
<nlm.tabular>Patient</nlm.tabular>
</td>
<td>
<nlm.tabular>Patient Waiting Time</nlm.tabular>
</td>
</tr>
<tr>
<td>
<nlm.tabular>1st patient in block <italic>B</italic>
<subscript>2</subscript>
</nlm.tabular>
</td>
<td>
<nlm.paragraph>0&lt;?tex type="longcontinued-tabular" cols="xxx" width="yyy"?&gt;</nlm.paragraph>
</td>
</tr>
<tr>
<td>
<nlm.tabular>2nd patient in block <italic>B</italic>
<subscript>2</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">2</mml:mn>
</mml:mrow>
</mml:msubsup>
</mml:math>
</nlm.tabular></td>
</tr>
<tr>
<td>
<nlm.tabular>3rd patient in block<italic> B</italic>
<subscript>b</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi></mml:mrow><mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn></mml:mrow><mml:mrow>
<mml:mi>b</mml:mi></mml:mrow></mml:msubsup><mml:mo>+</mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">2</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mi>b</mml:mi>
</mml:mrow>
</mml:msubsup>
</mml:math>
</nlm.tabular>
</td>
</tr>
<tr>
<td rowspan="2">
<nlm.tabular>
<mml:math display="block">
<mml:mo>⋮&lt;/mml:mo>
</mml:math>
</nlm.tabular>
<nlm.tabular>
<italic>n</italic>
<subscript>b</subscript>th patient in block<italic> B</italic>
<subscript>b</subscript>
</nlm.tabular>
</td>
<td>
<nlm.tabular>
<mml:math display="block"><mml:mo>⋮&lt;/mml:mo>
</mml:math>
</nlm.tabular>
</td>
</tr>
<tr>
<td colspan="0">
<nlm.tabular/>
</td>
<td>
<nlm.tabular>
<mml:math display="block">
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mi>b</mml:mi>
</mml:mrow>
</mml:msubsup>
<mml:mo>+</mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mi>S</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mn fontstyle="italic">2</mml:mn>
</mml:mrow>
<mml:mrow>
<mml:mi>b</mml:mi>
</mml:mrow>
</mml:msubsup>
<mml:mo>+</mml:mo>
<mml:mo>…&lt;/mml:mo>
<mml:msubsup>
<mml:mrow>
<mml:mo>+</mml:mo>
<mml:mi>S</mml:mi></mml:mrow>
<mml:mrow>
<mml:msub>
<mml:mrow>
<mml:mi>n</mml:mi>
</mml:mrow>
<mml:mrow>
<mml:mi>b</mml:mi>
<mml:mo>-</mml:mo>
<mml:mn fontstyle="italic">1</mml:mn>
</mml:mrow>
</mml:msub>
</mml:mrow>
<mml:mrow>
<mml:mi>b</mml:mi>
</mml:mrow>
</mml:msubsup>
</mml:math>
</nlm.tabular>
</td>
</tr>
<tr>
<td colspan="2"><hr/>
</td>
</tr>
</tbody>
</table>
</table-wrap> 
```

我试图将它与：

```
MatchCollection mc = Regex.Matches(input , @"\<p\>\<\?tex\s*.*?\?\>\s*\<\/p\>\s*\<table\-wrap\s*.*?\>.*?\<\/table\-wrap\>); 
```

简单地说，这根本没有任何匹配。如此大小的字符串也会发生同样的情况。

那么问题出在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:59:25.843

使用这个正则表达式`<p>\s*<\?tex\s*.*?\?\>\s*\<\/p\>\s*\<table\-wrap\s*.*?\>.*?\<\/table\-wrap\>` 你丢失了标签之间的空格

# wifi - 在 WiFi 中看不到另一台计算机

> ID：12491396
> 
> 赞同：0
> 
> 时间：2012-09-19T08:55:47.123
> 
> 标签：wifi

我正在尝试做一个小实验，但得到的结果很奇怪，我无法解释。我和我的朋友一起来到我的大学，我们都带了笔记本电脑并连接到同一个 WiFi。但是由于某种原因，我们的计算机无法相互通信。例如，我无法 ping 他，当我进行 ARP 扫描以查找 LAN 上的所有主机时，我没有找到他。他也这样做了。当他进行 ARP 扫描时，他无法 ping 我，也没有找到我的笔记本电脑。然而，LAN 上还有许多其他设备我们都可以 ping 通，而且我们都在 ARP 扫描中发现了这些设备。大学可能很大，但我们坐在一起。

我知道大学的 WiFi 可能很复杂，但我无法解释发生了什么。我们坐在一起，连接到同一个 WiFi（同一个接入点 MAC），我们都在我们的 LAN 中看到许多相同的设备，但我们看不到对方。任何人都知道可能发生的事情吗？当我们在同一个 LAN 上时，为什么我们不能看到/ping 对方？

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:53:59.740

无线接入点可能已打开“SSID 内的无线隔离”的安全设置。此功能完全符合您的描述。它允许所有经过身份验证的用户看到 LAN 上的机器，但不能看到同一接入点上的其他无线机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T13:48:32.690

重新配置您的路由器并进行一些这样的设置

```
LAN DHCP=Enable
Wireless Authentication type=WPA-PSK/WPA2-PSK
Encryption=AES 
```

完成此设置后，删除您 PC 中列出的所有路由器无线网络。而不是连接，它会起作用。您可以同时 ping 两台 PC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T17:53:53.930

因为您连接到基础设施模式接入点（99% 的 AP），为了将数据包发送到另一台设备，您的笔记本电脑将数据包发送到 AP（到分发系统），然后 AP 将数据包发送给您的朋友（来自分配系统）。您不能“直接”连接到您的朋友。

AP 可以指示无线客户端是否可以互相看到 - 根据制造商的不同，这可以通过多种不同的方式实现。您可以与您的系统管理员讨论此政策为何/如何运作。

# c++ - 用 C++ 打包库

> ID：12491397
> 
> 赞同：1
> 
> 时间：2012-09-19T08:55:54.490
> 
> 标签：c++

我是过去四年的 Java 开发人员。我正计划开发一个使用 boost 等库的 c++ 应用程序。在 java 中，我们可以在类路径中添加库并导出为单个 jar 并分发它。我不确定如何在 c++ 中执行此操作，而且我在 java 中也使用 ant 进行构建。

我们是否有任何构建太像 C++ 的 ant。

在开发 C++ 应用程序以支持不同的操作系统和一些通用的事情时，我们需要考虑哪些事情。

c++ 在 java 中有类似 maven 的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:10:28.730

没有像 C++ 的 Maven 这样的东西。依赖管理通常由您的操作系统（Unix 包管理器，如 apt-get 或 yum）或手动（Windows ;)）完成。

对于多平台环境，我建议使用 CMake，因为它可以为 Visual Studio、Eclipse、XCode、Unix Makefiles 等生成项目文件。CMake 可以为您提供许多工具功能，例如 find_package (XXXXX)，让生活变得更轻松。

恕我直言，学习它的最佳方式是阅读编译器、构建工具（例如 CMake）和一些示例代码的文档。一些关键字是“静态库”、“动态库”（如 DLL、“链接”）、包含路径。从一些简单的东西开始，比如一个使用 Boost 和 CURL 库的小程序，并尝试在多个平台上构建它。

# ios - UISearchBar 显示搜索结果的问题

> ID：12491398
> 
> 赞同：0
> 
> 时间：2012-09-19T08:56:06.580
> 
> 标签：ios, uitableview, uisearchbar, nssortdescriptor

在我的应用程序中，我有 3 `NSMutableArray`s`empJsonArray` `searchArray`和`nameArray`

`empJsonArray`使用 JSON 填充。 `nameArray`用`valueForKey:@"Name"`from填充`empJsonArray`，`searchArray`最初用 的内容填充`empJsonArray`。

数据显示在`UITableView`

现在我`UISearchBar`用于搜索我的`UITableView`并显示相关数据。`UISearchBar`工作正常，但显示搜索数据时出现问题。假设当我搜索“T”时，我有 2 个包含字母“T”的名称`UITableView`显示 2 个项目，但形成了`nameArray`（即索引 0 和 1）的顶部，而不是包含“T”的项目。

我也在使用`NSSortDescriptor`.

这是代码： -

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MYCell"];
if (!cell) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MYCell"];
}
sorter = [[NSSortDescriptor alloc]initWithKey:@"Name" ascending:YES selector:@selector(caseInsensitiveCompare:)];
sortedArray = [self.empJsonArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sorter]];
cell.textLabel.text = [[sortedArray objectAtIndex:indexPath.row]objectForKey:@"Name"];
nameArray = [[NSMutableArray alloc]initWithArray:[sortedArray valueForKey:@"Name"]];

return cell;

} 
```

搜索方法：

```
- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText {

if ([searchText length]==0) {
    [searchArray removeAllObjects];
    [searchArray addObjectsFromArray:nameArray];

}
else {
    [searchArray removeAllObjects];
    for (NSString *string in nameArray) {
        NSRange r = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];
        if (r.location != NSNotFound) {
            [searchArray addObject:string];
        }
    }
}
[empTable reloadData];

} 
```

你可以在这里看到截图 1.[搜索前](http://dl.dropbox.com/u/42881080/1.png) 2.[搜索后](http://dl.dropbox.com/u/42881080/2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:16:10.980

问题解决了。

而不是显示搜索结果`cell`

```
cell.textLabel.text = [[searchArray objectAtIndex:indexPath.row] 
```

我在展示

```
cell.textLabel.text = [[sortedArray objectAtIndex:indexPath.row]objectForKey:@"Name"]; 
```

# wordpress - 在wordpress中激活插件的代码

> ID：12491399
> 
> 赞同：2
> 
> 时间：2012-09-19T08:56:07.257
> 
> 标签：wordpress, plugins

该客户希望在每周二几个小时之间自动激活一个 wordpress 插件。这是因为该插件与另一个插件有冲突。我在网上没有找到任何关于此的内容，该怎么做...任何人都知道当单击按钮激活插件时 wordpress 背后会发生什么？我在我的 wordpress 文件夹中找不到该特定页面...谢谢！

我尝试过但不起作用的东西：

```
require('/web/htdocs/www.fattorefamiglia.com/home/wp-content/plugins/quick-chat/quick-chat.php');

function toggle_plugin() {

    // Full path to WordPress from the root
    $wordpress_path = '/web/htdocs/www.fattorefamiglia.com/home/';

    // Absolute path to plugins dir
    $plugin_path = $wordpress_path.'wp-content/plugins/';

    // Absolute path to your specific plugin
    $my_plugin = $plugin_path.'quick-chat/quick-chat.php';
$start = strtotime('1:30');
$end = strtotime('22:30');
$timenow = date('U'); 

if((date('w') == 3) && ($timenow >= $start && $timenow <= $end)) { // day 2 = Tuesday
     activate_plugin($my_plugin);
    }
    else {
        deactivate_plugins($my_plugin);   
    }
} 
```

我把这段代码放在functions.php中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-09T11:28:08.587

> 在 wordpress 中通过代码激活插件

```
 function run_activate_plugin( $plugin ) {
     $current = get_option( 'active_plugins' );
     $plugin = plugin_basename( trim( $plugin ) );

     if ( !in_array( $plugin, $current ) ) {
     $current[] = $plugin;
      sort( $current );
      do_action( 'activate_plugin', trim( $plugin ) );
      update_option( 'active_plugins', $current );
      do_action( 'activate_' . trim( $plugin ) );
      do_action( 'activated_plugin', trim( $plugin) );
     }

    return null;
  }
run_activate_plugin( 'plugin-folder-name/plugin-main-file.php' ); 
```

# asp.net-mvc-3 - “数据注释扩展 MVC3”中的日期验证无法正常工作

> ID：12491401
> 
> 赞同：0
> 
> 时间：2012-09-19T08:56:18.743
> 
> 标签：asp.net-mvc-3, data-annotations

我在带有 Telerik MVC 组件的 Razor C# 项目中使用“数据注释扩展 MVC3”中包含的日期验证，但它不能正常工作。“19.09.2012”日期（德语格式）的验证失败，因为它采用（月/日/年）模式。有没有办法让它根据文化发挥作用？或者假设这个验证只适用于提到的模式？

[http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:29:27.633

好的，我已经找到了解决方案：

[https://github.com/srkirkland/DataAnnotationsExtensions/issues/33](https://github.com/srkirkland/DataAnnotationsExtensions/issues/33)

# java - 将 URL 与 Java 中的参数进行比较

> ID：12491403
> 
> 赞同：6
> 
> 时间：2012-09-19T08:56:28.450
> 
> 标签：java, url, selenium

这两个网址应该相同：

```
http://localhost?asdf=1&qwer=2
http://localhost?qwer=2&asdf=1 
```

但是使用 URL 类中的“equals()”，我知道它们是不同的。我该如何比较它们？

*编辑：关于这个问题的一些背景*

我正在为一些 url 映射创建一个 Selenium 测试。我有旧的 url，它应该映射到的 url 和实际的 url。我需要将应该的 url 与实际的 url 进行比较。url 列表由客户端创建。如果参数列表相同并且它们都具有正确的值（这些参数的顺序无关紧要），则具有相同参数和值的 URL 被认为是有效的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:13:25.550

因此，如果我做对了，您想比较两个 URL，而不管查询部分的顺序如何。

课堂上似乎没有这样的方法`URL`，所以你必须自己编写。另外，`URL`您`final`不能覆盖`URL.equals(Object)`.

您的方法可以从调用[`sameFile()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#sameFile%28java.net.URL%29).
如果计算结果为`true`，则调用[`getQuery()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getQuery%28%29)，并将其拆分为组件 - 可能使用[String.split("\&")](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)。从那里开始，您评估参数是否相同。
另外，不要忘记检查“#fragment”是否相等，如果这对您的应用程序很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:27:45.837

我不认为你会喜欢它，但你可以做类似的事情

```
URL url = new URL("http://localhost?asdf=1&qwer=2");
URL url2 = new URL("http://localhost?qwer=2&asdf=1");

System.out.println(isEqual(url, url2));

public static boolean isEqual(URL url1, URL url2) {

    boolean isEqual = url1.getAuthority().equals(url2.getAuthority()) &&
                    url1.getPort() == url2.getPort() &&
                    url1.getHost().equals(url2.getHost()) &&
                    url1.getProtocol().equals(url2.getProtocol());

    if (isEqual) {

        String query1 = url1.getQuery();
        String query2 = url2.getQuery();

        if (query1 != null && query2 != null) {

            if (query1.length() == query2.length()) {

                List<String> list1 = getParameters(query1);
                List<String> list2 = getParameters(query2);

                for (int index = 0; index < list1.size(); index++) {

                    String value1 = list1.get(index);
                    String value2 = list2.get(index);
                    if (!value1.equals(value2)) {

                        isEqual = false;
                        break;

                    }

                }

            } else {

                isEqual = false;

            }

        } else {

            isEqual = false;

        }

    }

    return isEqual;

}

protected static List<String> getParameters(String value) {

    List<String> parameters = new ArrayList<String>(25);

    String[] values = value.split("&");
    for (String par : values) {

        if (!par.contains("=")) {
            par += "=null";
        }

        parameters.add(par);

    }

    Collections.sort(parameters);

    return parameters;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:13:08.467

URL/URI equals 方法已损坏。至少它没有提供您期望的结果。它有很多奇怪的东西。您可能有兴趣阅读

[高斯林先生——你为什么让 URL 等于烂？！？](http://brian.pontarelli.com/2006/12/05/mr-gosling-why-did-you-make-url-equals-suck/)

或者可能

[如何比较java中的两个URL？](https://stackoverflow.com/questions/5402485/how-to-compare-two-urls-in-java)

所以，不要指望这会很容易。您可以为您的特定情况创建自定义比较器，但通常您可能必须解析 url 字符串。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T06:20:17.283

您可以使用 String 类中提供的功能来完成此操作。

这种方法将 URL 分成两部分，“？”之前的部分。和之后的一个（如果没有“？”或参数也可以）。如果“？”之前的 URL 是等价的，就我们的目的而言，两者是“相等的”。

```
public boolean urlsMatchWithoutQueryParameters(String firstUrl, secondUrl) {
    // Get the portion of the URLs before the "?", and before all parameters.
    String firstUrlWithoutParameters = firstUrl.split("\\?", 2)[0];
    String secondUrlWithoutParameters = secondUrl.split("\\?", 2)[0];

    return firstUrlWithoutParameters.equals(secondUrlWithoutParameters);
} 
```

* * *

代码有点拥挤，所以你可以做一些事情把 String 逻辑拉到一个帮助器中，如下所示：

```
public boolean urlsMatchWithoutQueryParameters(String firstUrl, secondUrl) {
    return getUrlWithoutParameters(firstUrl).equals(getUrlWithoutParameters(secondUrl));
}

public String getUrlWithoutParameters(String url) {
    // Get the portion of the URL before the "?", and before all parameters.
    return url.split("\\?", 2)[0];
} 
```

* * *

*注意：*这会忽略 URL 锚点（例如，URL www.example.com/profiles/user123#friends 中的#photos）。
对于锚点，只需替换`"\\?"`为`"#"`in `split("\\?", 2)`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T09:22:58.387

我喜欢这个问题，所以我写了这个小演示。（抱歉，我使用 StringUtils 类作为子字符串）

```
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Arrays;
import java.util.List;

import org.apache.commons.lang.StringUtils;

public class URLDemo
{

    /**
     * @param args
     * @throws MalformedURLException
     */
    public static void main(String[] args)
        throws MalformedURLException
    {
        String url1 = "http://localhost?asdf=1&qwer=2";
        String url2 = "http://localhost?qwer=2&asdf=1";
        URL url11 = new URL(StringUtils.substringBefore(url1, "?"));
        URL url22 = new URL(StringUtils.substringBefore(url2, "?"));

        if (url11.equals(url22))
        {
            // url are equal but still need to check the parameters
            List<String> params1 = Arrays.asList(StringUtils.split(StringUtils.substringAfter(url1, "?"), "&"));
            List<String> params2 = Arrays.asList(StringUtils.split(StringUtils.substringAfter(url2, "?"), "&"));

            // need to check both ways
            if (params1.containsAll(params2) && params2.containsAll(params1))
            {
                System.out.println("URLs are the same");
            }
            else
            {
                System.out.println("URLs are different");
            }
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-19T08:59:51.613

那么这**两个网址实际上是不同的**

```
http://localhost?asdf=1&qwer=2
http://localhost?qwer=2&asdf=1 
```

//////// 编辑部分 //////////

尝试这个....

**-**`openStream()`在**两个**网址上使用。

**-**将它们都保存为 2 个`String`对象，或者`StringBuilder`改为。

**-**现在使用 . 比较它们`equals()`。

**-**这将解决问题，我想是的......

# sql - SQL 2008 VS 2012 错误：关键字“COMPUTE”附近的语法不正确

> ID：12491404
> 
> 赞同：5
> 
> 时间：2012-09-19T08:56:30.087
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

我的朋友向我发送了他在服务器 2008 中编写的命令，他们可以正常工作，但是我的副本和过去在 2012 中无法正常工作。有什么原因吗？这是代码：

```
 Use Kudler_Database
        SELECT  AccountNumber, [Description], ShortDescription,Balance
        FROM Chart_of_Accounts 
        ORDER BY left (AccountNumber, 2)
        COMPUTE SUM(Balance) BY left (AccountNumber, 2)
        COMPUTE SUM(Balance); 
```

这是错误：

> 消息 156，级别 15，状态 1，第 6 行关键字“计算”附近的语法不正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T08:59:31.013

`COMPUTE`在 SQL Server 2012 中不再可用，这就是您收到该错误的原因。请参阅此页面：

*   [SQL Server 2012 中已停用的数据库引擎功能](http://msdn.microsoft.com/en-us/library/ms144262.aspx)

它说：

> 本主题介绍 SQL Server 2012 中不再提供的数据库引擎功能：
> 
> ***Transact-SQL 语法 | 计算/计算 ***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T02:51:53.917

自 SQL Server 2012 中不推荐使用Compute By 以来，RollUp 的一种 hack [- （请参阅“SQL SERVER – 使用 ROLL UP 子句而不是 COMPUTE BY”）](http://blog.sqlauthority.com/2012/04/02/sql-server-use-roll-up-clause-instead-of-compute-by/)

```
DECLARE @t TABLE(AccountNumber VARCHAR(10),[Description] VARCHAR(100),ShortDescription VARCHAR(100),Balance INT)
INSERT INTO @t SELECT '1234567890','Some Description for 1st Account','Short Description for 1st Account',2000 Union All
SELECT '2345678901','Some Description for 2nd Account','Short Description for 2nd Account',3000 Union All
SELECT '1234567890','Some Description for 1st Account','Short Description for 1st Account',4000

SELECT  
    AccountNumber   
    ,Balance
    ,Total = SUM(Balance)
FROM @t 
GROUP BY AccountNumber,Balance
WITH ROLLUP 
```

**结果**

```
AccountNumber   Balance  total
1234567890      2000     2000
1234567890      4000     4000
1234567890      NULL     6000
2345678901      3000     3000
2345678901      NULL     3000
NULL            NULL     9000 
```

或者

你可以使用下面的

```
DECLARE @t TABLE(AccountNumber VARCHAR(10),[Description] VARCHAR(100),ShortDescription VARCHAR(100),Balance INT)
INSERT INTO @t SELECT '1234567890','Some Description for 1st Account','Short Description for 1st Account',2000 Union All
SELECT '2345678901','Some Description for 2nd Account','Short Description for 2nd Account',3000 Union All
SELECT '1234567890','Some Description for 1st Account','Short Description for 1st Account',4000

;With CTE AS
(
SELECT 
    AccountNumber
    ,[Description]
    ,ShortDescription
    ,Balance
    ,SubTotal = SUM(Balance) OVER (PARTITION BY AccountNumber ORDER BY LEFT (AccountNumber, 2))
    ,Rn = ROW_NUMBER() OVER(PARTITION BY AccountNumber ORDER BY LEFT (AccountNumber, 2))
FROM @t)
SELECT 
    AccountNumber
    ,[Description]
    ,ShortDescription
    ,Balance  = CAST(Balance AS VARCHAR(10))
    ,SubTotal = CASE  WHEN Rn != 1 THEN NULL ELSE SubTotal END
FROM CTE
UNION ALL
SELECT
    ' ', ' ',' ' ,'Total Amount' , SUM(Balance) FROM CTE 
```

**输出是**

```
AccountNumber   Description                         ShortDescription                  Balance   SubTotal
1234567890      Some Description for 1st Account    Short Description for 1st Account   2000    6000
1234567890      Some Description for 1st Account    Short Description for 1st Account   4000    NULL
2345678901      Some Description for 2nd Account    Short Description for 2nd Account   3000    3000
                                                                                    Total Amount  9000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:22:18.530

您可以使用 GROUPING SETS 创建类似的内容，但它们都包含在一个结果集中，例如：

```
SELECT AcGroup, AccountNumber, [Description], ShortDescription, SUM( Balance ) Balance,  GROUPING_ID(AcGroup, AccountNumber)
FROM ( SELECT LEFT( AccountNumber, 2 ) AcGroup, * FROM Chart_of_Accounts ) x
GROUP BY GROUPING SETS( (AcGroup), ( AccountNumber, [Description], ShortDescription ), () )

SELECT AcGroup, SUM( Balance ) Balance
FROM ( SELECT LEFT( AccountNumber, 2 ) AcGroup, * FROM Chart_of_Accounts ) x
GROUP BY GROUPING SETS( AcGroup, () )

SELECT AcGroup, SUM( Balance ) Balance
FROM ( SELECT LEFT( AccountNumber, 2 ) AcGroup, * FROM Chart_of_Accounts ) x
GROUP BY AcGroup WITH CUBE 
```

我添加了 GROUPING_ID() ，如果源是原始的，汇总到总行，它可以更容易地计算出来。

我一直想知道你会如何消费这样的东西，因为多个结果集很难处理。你不能将它传递给另一个存储过程，你不能将它直接复制粘贴到 Excel 中（不要乱来），传递给 .net 客户端会很尴尬。你是如何使用之前的代码的？

高温高压

# regex - .htaccess 301 前向正则表达式语法

> ID：12491410
> 
> 赞同：1
> 
> 时间：2012-09-19T08:56:40.947
> 
> 标签：regex, .htaccess, http-status-code-301, forward

需要一个代码块。

看看我的网站 www.mysite.com 好.. 和我的新网站 www.newsite.com 我的网站搜索网址：[http ://www.mysite.com/search.php?key=apple+pie+2+box+59 +分](http://www.mysite.com/search.php?key=apple+pie+2+box+59+cent)

需要一个 htacces 301 转发代码仅转发包含苹果关键字。

例如：www.mysite.com/search.php?key=apple+pie+2+box+59+cent => www.newsite.com/search.php?key=apple+pie+2+box+59+cent （关键包括apple ok forw true）

例如：www.mysite.com/search.php?key=banana+and+apple+paste => www.newsite.com/search.php?key=banana+and+apple+paste （密钥包括苹果 ok forw true）

例如：www.mysite.com/search.php?key=kivi+and+black+berry+juice+cent => www.mysite.com/search.php?key=--NO FORVARD 返回当前站点--- (键不包括苹果。没有转发错误。）

例如：www.mysite.com/search.php?key=one+piece+apple => www.newsite.com/search.php?key=one+piece+apple （关键包括苹果。是的，转发为真。）

需要正则代码..

考试：RewriteRule ^"仅包含苹果关键字"/(.+)$ www.newsite.com/search.php?key=$1 [L,R=301]

感谢所有帮手。对不起我的英语不好。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:11:05.923

您可能正在寻找这个：

```
RewriteCond %{HTTP_HOST} ^www\.mysite\.com$
RewriteCond %{QUERY_STRING} apple
RewriteRule ^search\.php$ http://www.newsite.com/search.php [QSA,L,R=301] 
```

# c# - 您可以在创建文件时通过线路传输文件 - 并行操作吗？

> ID：12491414
> 
> 赞同：0
> 
> 时间：2012-09-19T08:56:43.110
> 
> 标签：c#, .net, parallel-processing

我打算在创建文件时通过 LAN 复制文件。假设正在使用 StreamWriter 写入一个 500MB 的文件。我们可以每写入 100MB 就复制一次文件吗？

框架 C# async 或 LINQ.Parallel.. 有什么功能可以帮助我实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:01:54.887

这可以通过所谓的 tee 流来实现。[EchoStream](http://www.codeproject.com/Articles/3922/EchoStream-An-Echo-Tee-Stream-for-NET)看起来可以解决问题。设置您的 StreamWriter 以写入 EchoStream 并将该写入同时写入 NetworkStream 和 FileStream，或 2 个 FileStreams（或其他）。

# regex - 允许 1 个字母和 1 个数字的正则表达式

> ID：12491417
> 
> 赞同：-5
> 
> 时间：2012-09-19T08:56:59.227
> 
> 标签：regex

嗨，我想要一个只允许一个字母的正则表达式**（**可以是大写或小写的 AZ 中的任何一个，然后是（1-9）之间的**一个数字**

正确的值是

```
T5
e3
k8
Z2 
```

不正确的值是

```
Aa1
12
aa
rr
4r
1w 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:01:51.350

[***你应该在问这个问题快速教程***](http://www.regular-expressions.info/reference.html)之前探索正则表达式[](http://www.regular-expressions.info/reference.html)

 *顺便说一下，这个正则表达式适合你

```
^[a-zA-Z][1-9]$ 
```

`^`用于字符串的开头

`$`对于字符串的结尾

您可以根据需要使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T09:01:21.707

尝试使用这个正则表达式`\b[a-zA-Z][1-9]\b`*

# c++ - 链接 DLL 错误 Visual Studio

> ID：12491418
> 
> 赞同：0
> 
> 时间：2012-09-19T08:57:08.553
> 
> 标签：c++, visual-studio, visual-c++

我浏览了[本](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL#CppMatureApproach)教程并尝试重新创建我收到此错误的示例：

```
Error   1   error LNK2019: unresolved external symbol __imp__GetXyz@0 referenced in function _main  app.obj app 
```

如果我从网站下载源代码并在 Visual Studio 中运行该项目，它可以工作，但如果我什至从我自己的 Visual Studio 解决方案中复制原始项目的代码，它仍然无法工作。我猜肯定是一些项目设置，我不知道。做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:03:35.147

似乎您缺少一些需要链接的外部库。缺少提供 GetXyz 功能的任何东西。

打开有效的解决方案，右键单击项目、属性、链接器、输入，然后检查它们的附加依赖项列表。您需要将其添加到您自己的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:06:03.913

您需要将 XyzLibrary.lib 添加到项目设置中的链接器设置中。

`#pragma comment(lib,"xyzlibrary.lib")`如果您使用的是 VisualStudio，您也可以直接在代码中使用。

它在没有这两种方法的情况下在给定示例中工作的原因是，在解决方案文件中，依赖项设置为从 XyzExe 到 XyzLib，并且 XyzProject 将链接器设置中的“链接库依赖项”设置为 true。但是，我不太喜欢这种方法，因为我不喜欢在解决方案文件中存储对构建重要的数据（对于较大的项目，开发人员的解决方案文件可能与构建系统解决方案文件不同）

# android - ItemizedOverlay OnTap（）未触发

> ID：12491426
> 
> 赞同：0
> 
> 时间：2012-09-19T08:57:29.927
> 
> 标签：android, android-mapview, itemizedoverlay

我已经定义了地图叠加层，并且可以毫无问题地显示标记。当我点击一个时，我现在正试图让一些事情发生，但这个事件似乎永远不会触发。我确定我错过了一些明显的东西......

```
public class MapBlobCollection extends ItemizedOverlay<OverlayItem> {

        @SuppressWarnings("serial")
        public class ItemTappedEvent extends EventObject
        {
            public ItemTappedEvent(int itemIndex) {
                super(itemIndex);
            }
        }

        private ArrayList<OverlayItem> myOverlays ;

        public MapBlobCollection(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
            myOverlays = new ArrayList<OverlayItem>();
            populate();
        }

        public void addOverlay(OverlayItem overlay){
            myOverlays.add(overlay);
            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return myOverlays.get(i);
        }

        // Removes overlay item i
        public void removeItem(int i){
            myOverlays.remove(i);
            populate();
        }

        // Returns present number of items in list
        @Override
        public int size() {
            return myOverlays.size();
        }

        public void addOverlayItem(OverlayItem overlayItem) {
            myOverlays.add(overlayItem);
            populate();
        }

        public void addOverlayItem(int lat, int lon, String title) {
            try {
                GeoPoint point = new GeoPoint(lat, lon);
                OverlayItem overlayItem = new OverlayItem(point, title, null);
                addOverlayItem(overlayItem);    
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
        }

        @Override
        protected boolean onTap(int index) {
            super.onTap(index);
            Log.d("TESTING","Triggering tap event on " + Integer.toString(index));
            EventManager.triggerEvent(this, new ItemTappedEvent(index));
            return true;
        }
} 
```

基本上，调试日志条目不会被写入，事件也不会触发。

此外，我的地图视图本身并没有平移（应该是它，没有我的任何额外代码吗？），尽管设置了 setBuitInZoomControls(true)，但这些也没有出现......所以也许地图视图本身有问题？

mapview 在布局中定义为：

```
<com.google.android.maps.MapView
android:id="@+id/indexMapView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:apiKey="@string/mapskey_release"/> 
```

而且我没有覆盖任何平局事件或任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:06:07.377

我相信你需要添加

```
android:clickable="true" 
```

到您的地图视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:19:23.630

尝试将超级功能移到最后：

```
 @Override
     protected boolean onTap(int index) {
         Log.d("TESTING","Triggering tap event on " + Integer.toString(index));
         EventManager.triggerEvent(this, new ItemTappedEvent(index));
         return super.onTap(index);
     } 
```

# ruby-on-rails - 使用数据库中的值在数组中创建哈希

> ID：12491427
> 
> 赞同：0
> 
> 时间：2012-09-19T08:57:30.287
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有数据库中人员列表的名字、姓氏和 ID。现在我想制作一个像

```
[{
  value: <corresponding id>,
  label: "<corresponding person name>"
 },
 {
  value: <corresponding id>,
  label: "<corresponding person name>"
 },
  ....
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:00:37.197

```
users = User.all
user_hash_array = users.collect{|user| {:value => user.id, :label => user.firstname}} 
```

这将像以下一样工作

```
id   firstname   lastname
1    Salil       Gaikwad
2    Nidhin      Bose 
```

这将为您提供以下信息

```
user_hash_array = [{:value=>1, :label=>"Salil"}, {:value=>2, :label=>"Nidhin"}] 
```

# python - 如何同时支持 argparse 和 optparse？

> ID：12491429
> 
> 赞同：4
> 
> 时间：2012-09-19T08:57:41.553
> 
> 标签：python, argparse, optparse

我有一个小型应用程序，它可以在使用 Python 2.7+ 的最新 Linux 发行版上运行，但也可以在尚未切换到 Python 2.7 的 CentOS 和 Scientific Linux 机器上运行。`optparse`已被 Python 2.7 弃用，坦率地说我不想支持`optparse`，这就是我开发应用程序的原因`argparse`。但是，`argparse`在这些较旧的发行版上不存在。此外，系统管理员对安装`argparse`.

现在，我应该这样做吗？坚持`optparse`？围绕这两个库编写另一个包装器？说服系统管理员和用户（在大多数情况下只能启动应用程序）安装`argparse`反向移植？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:04:20.050

`optparse`只要它提供您当前需要的功能（并期望将来需要），我就会坚持下去。

`optparse`工作得很好，只是不会进一步开发。它在 Python 3 中仍然可用，所以即使有一天你决定迁移到 Python 3，它也会继续工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T09:49:22.273

随您的程序提供一份副本`argparse.py`，因为不需要安装该模块。`argparse.py`从[pypi.python.org/pypi/argparse](https://pypi.python.org/pypi/argparse)获取并将其放置在`sys.path`.

# voip - Kamailio 文本文件 CDR

> ID：12491430
> 
> 赞同：1
> 
> 时间：2012-09-19T08:57:45.203
> 
> 标签：voip, kamailio

我试图让 Kamailio 将其 CDR 记录到文本文件而不是数据库。呼叫路由正常，但我的 CDR 目录中什么也没有。以下是我认为 kamailio.cfg 文件的相关部分。显然，这不是全部，但大部分是 3.3.1 发行版附带的默认设置。呼叫根据分发文件进行路由，但在呼叫终止时不会在 /var/log/kamailio 目录中写入任何内容。Kamailio 以 kamailio:kamailio 的身份运行，并且该目录由其所有。Wireshark 跟踪显示正确的信令代码顺序（邀请 IVR、尝试、200、再见）并且有音频。

谢谢。

```
`...
loadmodule "dialog.so"
loadmodule "db_flatstore.so"
...
modparam("acc", "db_url", "flatstore:/var/log/kamailio") 
modparam("acc", "early_media", 0)
modparam("acc", "report_ack", 0) 
modparam("acc", "report_cancels", 0)
modparam("acc", "detect_direction", 0)
modparam("acc", "log_flag", FLT_ACC)
modparam("acc", "log_missed_flag", FLT_ACCMISSED)
modparam("acc", "log_extra", 
modparam("acc", "failed_transaction_flag", FLT_ACCFAILED)
modparam("acc", "cdr_enable", 1)
modparam("acc", "cdr_flag", 3)
...
request_route {
    ...
        remove_hf("Route");
        if (is_method("INVITE")) {
                record_route();   
                setflag(FLT_ACC); 
                ds_select_dst("1","4");
                forward();
                exit();   
        }
        ...
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:43:03.173

被驱赶半便便后发现了问题。问题在于“forward()”——在这种情况下没有写入会计记录。

而不是使用 forward() 使用

```
if (!t_relay()) {
    sl_reply_error();
} 
```

会计记录被神奇地写下来。我的 acc 模块的 modparams 也到处都是，但这仍然是一项正在进行的研究，不会影响我在这里遇到的基本问题。

如果比我聪明的人能解释为什么前锋不写 CDR，那么如果你能写评论，我将不胜感激。

# c++ - 访问基类中的子模板参数（在子类上模板化）

> ID：12491433
> 
> 赞同：1
> 
> 时间：2012-09-19T08:58:01.553
> 
> 标签：c++, templates, generics, typedef, typename

我有一个子类 (Child)，它继承了在子类上模板化的基类 (Base)。子类也是一个类型的模板（可以是整数或其他......），我试图在基类中访问这个类型，我尝试了很多东西但没有成功......这就是我的想法可能更接近工作解决方案，但它无法编译......

```
template<typename ChildClass>
class Base
{
    public: 
        typedef typename ChildClass::OtherType Type;

    protected:
        Type test;
};

template<typename TmplOtherType>
class Child
    : public Base<Child<TmplOtherType> >
{
    public:
        typedef TmplOtherType OtherType;
};

int main()
{
    Child<int> ci;
} 
```

这是 gcc 告诉我的：

> test.cpp：在'Base>'的实例化中：test.cpp：14：7：
> 从'Child'实例化test.cpp：23：16：从这里实例化test.cpp：7：48：错误：没有名为'的类型'class Child'中的OtherType'</p>

这是一个等效的工作解决方案：

```
template<typename ChildClass, typename ChildType>
class Base
{
    public:
        typedef ChildType Type;

    protected:
        Type test;
};

template<typename TmplOtherType>
class Child 
    : public Base<Child<TmplOtherType>, TmplOtherType>
{
    public:
}; 
```

但困扰我的是重复的模板参数（将 TmplOtherType 作为 Childtype 转发）到基类......

你们有什么感想 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:00:26.073

您可以使用[*模板模板参数*](https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c)来避免重复的模板参数：

```
template<template<typename>class ChildTemplate, //notice the difference here
          typename ChildType>
class Base
{
  typedef ChildTemplate<ChildType>  ChildClass; //instantiate the template
  public:
    typedef ChildType Type;

  protected:
    Type test;
};

template<typename TmplOtherType>
class Child 
    : public Base<Child, TmplOtherType> //notice the difference here also
{
    public:
}; 
```

# javascript - 用JS设置DIV内容不起作用，所以关闭

> ID：12491434
> 
> 赞同：0
> 
> 时间：2012-09-19T08:58:11.520
> 
> 标签：javascript, jquery, html, load

我正在尝试用 sourceURL 替换 div 的内容，它仅在平面 html 设置中工作，但是当我尝试将其合并到 php 页面中时，它不想工作，我不知道为什么。

..是的，我正在加载 jquery。

```
<script type="text/javascript">
function loadContent(elementSelector, sourceURL) {
$(""+elementSelector+"").load("http://forexfbi.com/"+sourceURL+"");
}
</script> 
```

和

```
echo "<tr class=\"expand-child\"><td colspan=\"11\" height=\"100px\">$name1<br>"; ?> <a href="javascript:loadContent('#content', 'Earnings-Disclaimer.html');">Link 1</a> <?php echo"<div id=\"content\"></div></td></tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:03:42.783

首先检查浏览器控制台以查看错误。这可能是您的 php 文件中可能存在的 jquery 冲突。

请说明您在控制台上发现的错误。按 f12 并单击控制台。

# javascript - 创建一个具有透明边框和背景的梯形？

> ID：12491438
> 
> 赞同：5
> 
> 时间：2012-09-19T08:58:22.593
> 
> 标签：javascript, html, css, css-shapes

我知道通过一些[边框技巧](http://css-tricks.com/examples/ShapesOfCSS/)，我可以创建梯形。我还可以将其边框颜色设置为 rgba(r,g,b,a) 以使其透明。

但是是否可以创建具有透明边框和背景的梯形？

例如，请参见下图，

![在此处输入图像描述](../Images/ca0dcdcf7e70e429cf7f235358d27050.png)

目前，我使用一些png图片来实现这个效果，但是生成不同大小的图片真的很无聊，所以我正在寻找一个css解决方案。</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:52:51.150

就个人而言，我认为这是矫枉过正，但可以这样做：

# [**演示**](http://dabblet.com/gist/3749727)

**HTML**：

```
<div class='outer'>
    <div class='content'><!--stuff here--></div>
    <div class='label l1'></div>
    <div class='label l2'></div>
</div> 
```

**CSS**：

```
.outer {
    position: relative;
    width: 500px; /* whole thing breaks if this is not a multiple of 100px */
    border: solid .5em rgba(0,0,255,.5);
    border-bottom: solid 0px transparent;
    margin: 7em auto 0;
    background: rgba(0,0,0,.5);
    background-clip: padding-box;
}
.outer:before, .outer:after {
    position: absolute;
    top: 100%;
    height: .5em;
    background: rgba(0,0,255,.5);
    content: ''
}
.outer:before { left: -.5em; width: 15%; border-left: solid .5em transparent; }
.outer:after { right: -.5em; width: 55%; border-right: solid .5em transparent; }
.content {
    padding: .5em;
    margin: 1.5em;
    border-bottom: solid 1.5em transparent;
    background: lightblue;
    background-clip: padding-box;
}
.label {
    overflow: hidden;
    position: absolute;
    top: 100%;
    width: 15%;
    height: 3em;
}
.l1 { left: 15%; }
.l2 { left: 30%; }
.label:before {
    position: absolute;
    top: -.5em;
    width: 100%;
    height: 2.5em;
    border: solid .5em rgba(0,0,255,.5);
    background: rgba(0,0,0,.5);
    background-clip: padding-box;
    content: '';
}
.l1:before { left: 9%; transform: skewX(30deg); }
.l2:before { right: 9%; transform: skewX(-30deg); } 
```

* * *

它适用于 Firefox、Chrome、Opera 和 Safari（我不敢在 IE9 中测试它，尽管两者都`transform`有效`background-clip`），但前提是`width`for`.outer`的值是`100px`.

除非使用 的`width`倍数`100px`，否则它仅适用于 Firefox 和 Chrome（Chrome 中存在一个小故障 - 可以通过使用仅 WebKit 的从左到右线性渐变来修复，该渐变从透明急剧变为半透明蓝色，非常接近开始）。

![铬合金](../Images/73a99f5c21537e34dc8fc47a6948aa39.png)

它在 Opera 和 Safari 中中断（如果使用的 a`width`不是 的倍数`100px`）：

![歌剧](../Images/24f93d46eedded09736a4baad99a4b6c.png) ![苹果浏览器](../Images/5e164dc63dc55341d9940c1e0ab1269f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:11:48.800

您可以使 bg 颜色和边框颜色透明，但边框不会跟随梯形的形状：

[http://jsfiddle.net/Kyle_Sevenoaks/UZbJh/1/](http://jsfiddle.net/Kyle_Sevenoaks/UZbJh/1/)

所以你最好的选择是现在坚持使用 pngs。

# java - 实例化 CommonsHttpSolrServer 时出现异常

> ID：12491440
> 
> 赞同：1
> 
> 时间：2012-09-19T08:58:26.077
> 
> 标签：java, maven, solr, solrj

我有一个这样的类（它是 Eclipse 中的一个 java 类，在一个 Maven 项目下）：

```
public class SolrJ
{
    public static void main( String[] args )
    {
        String url = "http://localhost:8983/solr";
        try {
            SolrServer server = new CommonsHttpSolrServer(url);
            server.deleteByQuery( "*:*" );
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        } catch (SolrServerException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

运行这个类后，我得到了以下异常：

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access field org.slf4j.impl.StaticLoggerBinder.SINGLETON from class org.slf4j.LoggerFactory
    at org.slf4j.LoggerFactory.staticInitialize(LoggerFactory.java:83)
    at org.slf4j.LoggerFactory.<clinit>(LoggerFactory.java:73)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.<clinit>(CommonsHttpSolrServer.java:77)
    at ultimo.solrJ.SolrJ.main(SolrJ.java:19) 
```

我的 pom.xml 看起来像这样：

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <artifactId>solr-solrj</artifactId>
        <groupId>org.apache.solr</groupId>
        <version>1.4.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <artifactId>solr-core</artifactId>
        <groupId>org.apache.solr</groupId>
        <version>1.4.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.5.6</version>
    </dependency> 
```

有人可以帮忙解决我的问题吗？我已经通过 Internet 搜索，但找不到任何方法来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:09:02.860

你读过文档吗？
[http://lucene.apache.org/solr/api-3_6_0/org/apache/solr/client/solrj/impl/CommonsHttpSolrServer.html](http://lucene.apache.org/solr/api-3_6_0/org/apache/solr/client/solrj/impl/CommonsHttpSolrServer.html)
按照建议的路线

# ruby-on-rails - 如何从 ActiveAdmin 调用控制器操作？

> ID：12491443
> 
> 赞同：4
> 
> 时间：2012-09-19T08:58:32.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我的 reports_controller.rb 中有这个方法，它允许用户发送状态。

```
def send_status        
  date = Date.today        
  reports = current_user.reports.for_date(date)        
  ReportMailer.status_email(current_user, reports, date).deliver        
  head :ok      
  rescue => e        
  head :bad_request    
end 
```

如何从 ActiveAdmin 调用此操作，以检查用户是否发送了此报告？我希望它像列上的 status_tag 或其他东西。我应该执行会员操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:37:19.280

稍后我将解决检查报告是否已发送的问题，但首先我将讨论如何从 ActiveAdmin 调用控制器操作的问题。

虽然您可以`ReportsController#send_status`通过创建一个`ActionController::Base::ReportsController`然后调用所需的方法来调用，例如

```
ActionController::Base::ReportsController.new.send_status 
```

这不是一个好主意。您可能应该重构它以解决几个潜在问题。

`app/controllers/reports_controller.rb`：

```
class ReportsController < ApplicationController

  ... # rest of controller methods

  def send_status
    if current_user # or whatever your conditional is
      ReportMailer.status_email(current_user).deliver
      response = :ok
    else
      response = :bad_request
    end

    head response
  end
end 
```

`app/models/user.rb`：

```
class User < ActiveRecord::Base
  ... # rest of user model

  def reports_for_date(date)
    reports.for_date(date)
  end
end 
```

`app/mailers/reports_mailer.rb`

```
class ReportsMailer < ActionMailer::Base
  ... # rest of mailer

  def status_email(user)
    @user = user
    @date = Date.today
    @reports = @user.reports_for_date(@date)

    ... # rest of method        
  end
end 
```

这显然可以进一步重构，但提供了一个不错的起点。

需要考虑的重要一点是，此控制器操作不会异步发送电子邮件，因此为了并发和用户体验，您应该强烈考虑使用排队系统。使用我提供的示例，DelayedJob 将是一个简单的实现（查看 DelayedJob RailsCast）。

至于检查报告是否已发送，您可以实现一个 ActionMailer 观察者并注册该观察者：

*这要求`User`模型具有 BOOLEAN 列`status_sent`并且用户具有唯一的电子邮件地址。*

`lib/status_sent_mail_observer.rb`：

```
class StatusSentMailObserver
  self.delivered_email(message)
    user = User.find_by_email(message.to)
    user.update_attribute(:status_sent, true)
  end
end 
```

`config/intializer/setup_mail.rb`：

```
... # rest of initializer
Mail.register_observer(StatusSentMailObserver) 
```

如果您使用的是DelayedJob（或几乎任何其他排队系统），您可以实现一个回调方法，以便在作业完成时调用（即发送状态电子邮件），以更新用户的列。

如果您想跟踪每天的状态消息，您应该考虑创建一个`Status`属于`User`. 每次用户发送电子邮件时都可以创建状态模型，让您可以通过检查是否存在状态记录来检查电子邮件是否已发送。这个策略是我会认真考虑采用的一个简单的策略`status_sent`专栏上采用的策略。

**tl;dr** `ActionController::Base::ReportsController.new.send_status` & 实现一个观察者，它更新跟踪状态的用户列。但你真的不想那样做。像我上面提到的那样研究重构。

# javascript - 在 Internet Explorer (IE) 中创建“对象不支持此属性或方法”的 Javascript 映射方法？

> ID：12491444
> 
> 赞同：1
> 
> 时间：2012-09-19T08:58:41.630
> 
> 标签：javascript, jquery, internet-explorer

javascript 代码在 Internet Explorer 中显示错误，但在 FF 中没有。

```
$(document).ready(function(){

var countries = [
  ["Afghanistan","Af"],
  ["Åland Islands","Ax"],
  ["Zimbabwe","Zw"]
];

 var countryNames = countries.map(function(country){
  return {
    /*label: '<div class="flag '+country[1].toLowerCase()+'">'+country[0]+'</div>',*/
    value: country[0]
  }

  var my_var=countryNames();
}); 

}); 
```

在 IE 8 开发者工具中，如果我调试 js，错误信息是：'对象不支持这个属性或方法'。错误在以以下行开头的代码段中指示：

```
var countryNames = countries.map(function(country){ 
```

如何使代码在 IE 中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:13:59.647

[Array.prototype.map()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)函数仅在 Internet Explorer 9 中受支持，因此该代码在早期版本的浏览器中无法运行。由于您已将问题标记为 jQuery，因此您可以改用[jQuery.map()](http://api.jquery.com/jQuery.map/)函数：

```
var countryNames = jQuery.map(countries, function(country) {
    return { 
        value: country[0]
    }
}); 
```

[jsFiddle DEMO](http://jsfiddle.net/anthonygrist/DsJsL/)在 IE7 模式下使用 Internet Explorer 9 进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:05:36.350

使用 Jquery .each() 代替[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

```
var countryNames = [];    
$.each(countries, function(index, value){
    countryNames.push(value[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:06:09.520

并非所有版本（如果有）都有`Array.prototype.map`

这是一个 polyfill/MonkeyPatch，您可以在 IE 下使用它来支持它——但如果您`for ... in`在数组上使用，包含此代码可能会导致问题。

[Array.prototype.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FArray%2Fmap)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:08:39.937

```
 var my_var=countryNames();
}); 
```

应该：

```
}); 
  var my_var=countryNames; 
```

为我在IE9中工作。

或者你可以像尼尔肯尼迪所说的那样使用 $.each 。

# javascript - 这个 javascript 代码块是什么意思？

> ID：12491445
> 
> 赞同：0
> 
> 时间：2012-09-19T08:58:52.597
> 
> 标签：javascript

我遇到了javascript中的代码块。你能告诉我它的含义吗？

```
var result = {
    diagmetric : diag * 2.54,
    sizex : xd,
    sizey : yd,
    metricsizex : 2.54*xd,
    metricsizey : 2.54*yd,
    xppi : x/xd,
    yppi : y/yd,
    dotpitch : pitch,
    sqppi : x/xd*y/yd
}; 
```

全功能：

```
function calc_dpi (x,y,diag) {
    if (y == 0 || x == 0) return;
    var ratio = y/x;
    var xd = Math.sqrt( Math.pow(diag,2) / ( 1 + Math.pow(ratio, 2) ));
    var yd = xd * ratio;
    var pitch = 25.4/(x/xd); // metric
    var result = {
        diagmetric : diag * 2.54,
        sizex : xd,
        sizey : yd,
        metricsizex : 2.54*xd,
        metricsizey : 2.54*yd,
        xppi : x/xd,
        yppi : y/yd,
        dotpitch : pitch,
        sqppi : x/xd*y/yd
    };
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:01:56.467

在这里，您将 Object 分配给`result`var。在 JS 中，您可以这样定义对象中的字段：

```
var obj = {fieldA:A, fieldB:B}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:02:05.293

那是一个 JS 对象文字。把它想象成一个关联数组。

[https://stackoverflow.com/a/3831209/1410212](https://stackoverflow.com/a/3831209/1410212)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:03:13.133

从语法上讲，它只是一个文字对象赋值。`{...}`具有指定属性和值的表达式将创建一个新对象。从语义上讲，它将函数的返回值打包在一个新的普通对象中并返回该对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T09:03:17.630

它使用 6 个参数定义了一个 javascript 对象（这些参数肯定被定义为定义 var 的函数参数）：

x,y,诊断,xd,yd,间距

我想 xd 和 yd 是英寸大小 x 和 y 是像素大小 diag：我想对角线间距：一些间距信息。

这个 javascript 对象存储定义的结构化信息（作为任何对象）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T09:03:37.690

此函数计算 dpi 并返回一个带有结果的对象。对象是用文字表示法编写的。这是 javascript 中的一种常见方式，不仅从函数返回单个值，而且返回完整对象甚至另一个函数。

您可以通过以下方式使用它：

```
var result = calc_dpi(/* your parameters*/)
// now you have access to the result by calling the properties
// of the result object e.g. with:
alert(result.dotpitch); 
```

# c++ - 如何隐式链接库？

> ID：12491449
> 
> 赞同：1
> 
> 时间：2012-09-19T08:59:06.197
> 
> 标签：c++, compiler-construction, compilation, linker, g++

我有一个名为 Aa 的库，它的 .hpp 文件名为 A.hpp。当程序需要使用这个库时，它们#include "A.hpp"，并像这样链接到它：g++ test1.cpp Aa -o test1。我希望能够只像 g++ test1.cpp -o test1 那样编译它，而无需在其中显式键入 Aa，就像我不需要显式地将我的程序与 iostream 链接一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:42:36.163

它可以在 Visual C++ 上完成（编译器可以在目标文件中嵌入一些链接器选项，链接库的请求是可能的请求之一）。

Gcc（据我所知，clang）没有这样的功能。您必须在命令行上提供库；没有办法解决它（构建工具在技术上不是解决它的方法；他们还将库放在用于运行链接器的命令行上）。

# php - 如果我在 txt 文件中读取它，为什么我无法获取数组中的每个数组元素？

> ID：12491450
> 
> 赞同：1
> 
> 时间：2012-09-19T08:59:08.273
> 
> 标签：php

说 orders.txt 包含

```
hello
hello
hello 
```

代码：

```
<?php
  $orders = file("orders.txt");

  $row_count = count($orders);

  for ($row = 0; $row < $row_count; $row++) {
        $col_count = count($orders[$row]);

        for ($col = 0; $col < $col_count; $col++) {
            echo $orders[$row][$col];

        }
  }

?> 
```

我发现这里出错的原因是`count($orders[$row])`没有返回这个数组中元素的总数。

.txt 中的文本文件是多维数组吗？

如果我创建一个多维数组，我可以使用 count() 获取多维数组中的每个数组元素计数

但这里我从 .txt 文件中读取，我认为它是多维数组

我的问题：

我得到了行数，但没有得到列数。
我知道我可以这样做`strlen($orders[$row])`，但为什么`count($orders[$row])`不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:08:46.847

你想达到什么目的。您的示例 orders.txt 太简单了，您没有指定您期望的结果。file() 返回一个字符串数组，其中每个字符串都是文件中的一行 (http://php.net/manual/en/function.file.php)。

也许如果您尝试从每一行读取多个值（即，将每一行读取为一个数组），您应该改用 fgetcsv() (http://php.net/manual/en/function.file.php)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T09:06:07.147

当我检查 print_r($orders) 时，来自 txt 的数据没有存储在多维数组中，而只是一个带有 key/val 的普通数组。所以你的假设是不正确的。我很难准确理解问题所在（语言障碍......）。您的 col 计数也是正确的，因为里面只有 1 个值（我在这里得到 1 个）。

它可能返回 4（应该是 3），因为您在 txt 文件中有一个额外的换行符，删除最后一个空行，这将是有意义的。

# facebook - Facepile 不适用于 news.reads 动作

> ID：12491452
> 
> 赞同：0
> 
> 时间：2012-09-19T08:59:16.340
> 
> 标签：facebook, facepile

我正在尝试将 facebook facepile 插件添加到页面。我正在尝试在插件中使用 news.reads 操作，但它不起作用。

我要补充：

```
div class="fb-facepile fb_iframe_widget" data-action="news.reads" data-href="url-with-article" data-max-rows="1" data-width="200" 
```

我知道如果我`news.reads`在这里采取行动，我应该能够显示阅读过这篇文章的朋友的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:00:50.253

我发现，只需在用户通过读取操作进行交互的对象上使用 Facepile 插件，就会自动显示拥有`read`该对象的用户。

指定`news.read`为`data-action`实际使插件停止运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:14:58.417

确保您已使用您的应用程序 ID 初始化 Javascript：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=0&appId=YOUR_APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

另外，请阅读名为“为什么什么都没有显示？”的部分。在这里：http: [//developers.facebook.com/docs/reference/plugins/facepile/](http://developers.facebook.com/docs/reference/plugins/facepile/)

如果一切都失败了，请尝试 IFRAME 版本，看看是否有任何结果。

```
<iframe src="//www.facebook.com/plugins/facepile.php?href=url-with-article&amp;action=news.reads&amp;size=medium&amp;max_rows=1&amp;width=200&amp;colorscheme=light&amp;appId=YOUR_APP_ID" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px;" allowTransparency="true"></iframe> 
```

# android - 在android中设置视图的方向

> ID：12491453
> 
> 赞同：2
> 
> 时间：2012-09-19T08:59:22.423
> 
> 标签：android, android-orientation

> **可能重复：**
> [android通过代码设置活动方向](https://stackoverflow.com/questions/4277596/android-setting-activity-orientation-by-code)

我有问题需要你的帮助。我有一个需要在 LANDSCAPE 中查看的图表，以让屏幕可以查看完整的图表。我想将设备设置为以横向模式查看，当用户将设备旋转到纵向时，图表将保持横向模式。我只是一个新手，谁能告诉我如何实现这一目标。

感谢您的任何评论

克拉克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:04:41.623

请参阅此[活动文档](http://developer.android.com/guide/topics/manifest/activity-element.html)。打开您的 AndroidManifest.xml，添加以下代码：

```
<activity android:screenOrientation="landscape" android:configChanges="orientation|keyboardHidden" android:name="myActivity"> 
```

或将此行添加到您的活动课程中

```
myActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

# android-widget - 安卓网络电台播放器

> ID：12491454
> 
> 赞同：1
> 
> 时间：2012-09-19T08:59:23.223
> 
> 标签：android-widget, audio-streaming, android-mediaplayer, soundmanager2, android-mediarecorder

我是安卓新手。我有一个内部项目并选择了一个 android Internet Radio 播放器。在这里我不知道该怎么办...？但我想做的是一个简单的播放器，当我按下播放按钮时，它就像一个音频播放器，它将从互联网或从列表中选择的电台流式传输。我知道我需要什么。

1.  对应用程序的 Internet 访问。
2.  电台列表，现在这对我来说很难获得不同站点上可用的电台列表。我从谷歌知道 ShoutCast.com 是最好的之一，但我现在不知道如何获取他们的电台列表。

请任何人都可以帮助我这个应用程序。我需要紧急帮助或建议。这对我会有很大的帮助。请。

# html - CSS 中的最小高度在 Firefox 中不起作用。它在IE中工作

> ID：12491464
> 
> 赞同：1
> 
> 时间：2012-09-19T08:59:46.637
> 
> 标签：html, css

在我的 facelets 模板中，有 div min-hight。它在 Firefox 浏览器中不起作用。

```
 <div class="body">
        <table>
            <tr>
                <td valign="top" width="100%" style="min-height: 400px;">
                    <ui:insert name="body"/>
                </td>
            </tr>
        </table>

    </div> 
```

我需要为这两个浏览器做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:07:19.497

尝试

```
<td valign="top" width="100%" style="display:block; min-height: 400px;"> 
```

正如[feeela](https://stackoverflow.com/users/341201/feeela)所说，“[最小高度适用于块级和替换元素](https://developer.mozilla.org/en-US/docs/CSS/min-height)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:08:16.693

仅使用高度，因此它可以正常工作

```
 <div class="body">
     <table>
       <tr>
            <td valign="top" width="100%" style="height: 400px;">
                  <ui:insert name="body"/>
           </td>
      </tr>
  </table>
 </div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T09:20:39.473

根据[此处的规范 (spec)](http://www.w3.org/TR/CSS2/visudet.html#min-max-heights) min-height 不应该应用于表格元素。因此，显示此属性错误的是 IE，而不是 Firefox（这并不奇怪）。您可以做的是停止使用表格进行布局（标准推荐）或在表格单元格中放置一个 DIV 并将 min height 属性应用于 div 以强制 TD 采用其内容大小。

选项1：

```
<body>
    <div class="body" style="min-height:400px;">
        <ui:inser name="body"/>
    </div>
</body> 
```

选项2：

```
<div class="body">
    <table>
        <tr>
            <td valign="top" width="100%">
                <div  style="min-height: 400px;">
                    <ui:insert name="body"/>
                </div>
            </td>
        </tr>
    </table>
</div> 
```

选项 1 的缺点 - 为旧版 IE (6,7,8) 获取 x 浏览器需要额外样式的可能性 选项 2 的缺点 - 不必要的标记，非标准。

# android - HTC windows 7 驱动程序

> ID：12491471
> 
> 赞同：1
> 
> 时间：2012-09-19T09:00:02.940
> 
> 标签：android, windows-7, adb, driver, htc-android

我有一台 HTC One V 设备，我正在通过 ADB 运行一些命令并使用驱动模式从 pc 访问。

我知道 HTC Sync 会安装驱动程序，并且运行良好。但是我想只安装没有 HTC 同步应用程序本身的驱动程序。

有没有办法处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:19:23.033

您需要安装 android usb 驱动程序并在文件中添加手机的硬件 ID -[将我的设备连接到 PC 时](https://stackoverflow.com/questions/7510471/problem-when-connecting-my-device-to-pc/7511988#7511988)`android_winusb.inf`检查此问题？.这应该足以从 adb 发送命令。我也使用 HTC 手机，我从未安装任何驱动程序或同步软件，这对我来说很好。

# .net - 使用 OOP 技术创建窗体

> ID：12491475
> 
> 赞同：0
> 
> 时间：2012-09-19T09:00:12.723
> 
> 标签：.net, winforms, oop, layer

我需要创建 5 个类似的窗口窗体，每个窗体都有一些变化。一个可能有几个额外的文本框，另一个可能有更少的字段。数据表将是分开的，但功能是相同的。我将创建一个包含所有相关 TableAdopters 的数据集。然后我将有另一层“业务逻辑”来填充表格中的数据。使用“面向对象”技术创建表单的正确方法是什么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:09:37.720

更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:41:26.807

就像 Steven 说的那样，你应该真正关注组合而不是继承，所以制作更小的控件来完全满足你的需要，然后将其中的一些添加到每个表单中。但是，如果您真的打算继承，您可以使用 Winforms 来实现，我很确定有一个向导甚至可以让您从现有表单继承。

OOP 因您与谁交谈而有所不同，如果是来自 C++ 背景的人，那么他们无疑会在 oo 的上下文中说多态性和继承，但是如果您与来自 Java 和 .net 的人谈论 OO，他们可能会更关注关于封装和组成。

继承仍然有它的位置，只是大多数问题可以通过组合更容易更好地解决。

# jquery - 将json转换为html

> ID：12491479
> 
> 赞同：2
> 
> 时间：2012-09-19T09:00:23.357
> 
> 标签：jquery, html, json

我正在尝试在我的页面中包含新闻文章列表，并已获得指向 json 文件的链接。我想将json文件中的数据转换成html。下面我列出了 json 结构的示例（它将位于外部服务器上的 json 文件中，但为简单起见，我在此处包含了它的一个片段）。我想将json文件中的数据渲染成html，如下表结构。我曾尝试使用 jQuery (JSON2HTML - [http://json2html.com/](http://json2html.com/) ) 来完成此操作，但无法弄清楚。任何帮助将不胜感激！

```
<table>
  <tr class="header">
    <td colspan="2">name from company</td>
    <td class="alignR">page 1 of total pages (total from hits)</td>
  </tr>
  <tr>
      <td class="colOne">Here I want the publishedAt data</td>
      <td class="colTwo">Here I want the summary data</td>
      <td class="colThree">Here I want the source data</td>
  </tr>
  <tr class="footer">
    <td colspan="3">(list pages) <a href="#">1</a> <a href="#">2</a> <a href="#">3</a> <a href="#">4</a> <a href="#">5</a> <a href="#">6</a> <a href="#">7</a> <a href="#">8</a> <a href="#">9</a> <a href="#">10</a> <a href="#">Next</a></td>
  </tr>
</table>

{
   "company":{
      "registrationNumber":1234567890,
      "name":"Lorem Ipsum Name"
   },
   "search":{
      "from":"2012-08-19",
      "to":"2012-09-18",
      "languages":"eng",
      "mediaChannels":"web,print"
   },
   "hits":{
      "page":1,
      "perPage":20,
      "total":123,
      "articles":[
         {
            "id":1111111111,
            "title":"Lorem Ipsum title 1",
            "publishedAt":"2012-09-04T14:30:09+02:00",
            "summary":"Lorem ipsum dolor sit amet 1",
            "source":{
               "id":12111,
               "name":"the source name"
            },
            "url":"http://myurl.com/articles/1535585834",
            "openAccessUrl":"http://myurl.com/open_access/d4f2a56a6dc1da563f90/articles/1535585834-f2b64530e4c6be0a2321d57b4870dd7a3f8952df"
         },
         {
            "id":2222222222,
            "title":"Lorem Ipsum title 2",
            "publishedAt":"2012-09-05T14:30:09+02:00",
            "summary":"Lorem ipsum dolor sit amet 1",
            "source":{
               "id":12121,
               "name":"the source name"
            },
            "url":"http://myurl.com/articles/1535585834",
            "openAccessUrl":"http://myurl.com/open_access/d4f2a56a6dc1da563f90/articles/1535585834-f2b64530e4c6be0a2321d57b4870dd7a3f8952df"
         },
         {
            "id":3333333333,
            "title":"Lorem Ipsum title 3",
            "publishedAt":"2012-09-06T14:30:09+02:00",
            "summary":"Lorem ipsum dolor sit amet 1",
            "source":{
               "id":12345,
               "name":"the source name"
            },
            "url":"http://myurl.com/articles/1535585834",
            "openAccessUrl":"http://myurl.com/open_access/d4f2a56a6dc1da563f90/articles/1535585834-f2b64530e4c6be0a2321d57b4870dd7a3f8952df"
         },
      ]
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:38:31.883

想我会回答这个关于如何用 json2html 做到这一点的问题，即使它有点旧

要显示文章，可以使用以下模板：

```
var map_article = {"tag":"tr","children":[
    {"tag":"td","class":"colOne","html":"${publishedAt}"},
    {"tag":"td","class":"colTwo","html":"${summary}"},
    {"tag":"td","class":"colThree","html":"${source.id} : ${source.name}"}
]};

$('#table').json2html(data.hits.articles,article); 
```

要将 this 包装到表格中，您可以执行以下操作：

```
var map_table = {"tag":"table","children":[
{"tag":"tbody","children":[
    {"tag":"tr","class":"header","children":[
        {"tag":"td","colspan":"2","html":"${company.name}"},
        {"tag":"td","class":"alignR","html":"page 1 of ${hits.total}"}
      ]}
  ]},
{"tag":"tbody","children":function(){$.json2html(this.hits.articles,map_article);}},
{"tag":"tbody","children":[
    {"tag":"tr","class":"footer","children":[
        {"tag":"td","colspan":"3","html":""}
      ]}
  ]}
]}

$('#table').json2html(data,map_table); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:11:20.427

几乎所有的 JS 模板引擎都是这样做的——将一些 JSON 数据填充到文本 (HTML) 模板中。您可能想看看许多选项，包括[jQuery 模板](http://api.jquery.com/category/plugins/templates/)、[jsRender](https://github.com/BorisMoore/jsrender)、[mustache](http://mustache.github.com/)、[handlebars.js](http://handlebarsjs.com/)、[dust.js](http://akdubya.github.com/dustjs/)等（没有特别的顺序）

[然而， JSON2HTML](http://json2html.com/)有点不同，它没有文本模板，而是使用对象映射从 JSON 数据对象树创建 HTML 对象树。

无论哪种方式，您都需要一个模板（当使用传统文本模板时）或一个映射（当使用 JSON2HTML 时）才能产生任何有意义的结果。

# flash - 在 Flash 项目中导入 core.swc 和 flex.swc

> ID：12491488
> 
> 赞同：1
> 
> 时间：2012-09-19T09:00:58.193
> 
> 标签：flash

我想在 Flash Professional 中使用 Starling：他们告诉我必须在我的 Flash 项目中导入 core.swc 和 flex.swc。我如何找到这两个？以及如何导入它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:56:41.713

它们带有 Flex SDK。在 SDK 内部，它们位于 frameworks/libs/ 目录或该目录附近的某个位置，它在版本之间波动。

您可以从这里下载旧版本的 SDK：http: [//sourceforge.net/adobe/flexsdk/wiki/Download%20Flex%204.5/](http://sourceforge.net/adobe/flexsdk/wiki/Download%20Flex%204.5/)

还有来自这里的较新的：http: [//incubator.apache.org/flex/download.html](http://incubator.apache.org/flex/download.html)

请注意，从用户的角度来看，Apache Flex 发行版更加复杂（由于许可问题），并且要拥有功能齐全的 SDK，您可能更喜欢使用 SDK 安装程序（这不是官方发行版的一部分，但由一些热心的贡献者创建）：[http://incubator.apache.org/flex/installer.html](http://incubator.apache.org/flex/installer.html)

# ruby-on-rails - Rails：有没有办法在开发模式下禁用友好 ID？

> ID：12491489
> 
> 赞同：2
> 
> 时间：2012-09-19T09:00:58.010
> 
> 标签：ruby-on-rails, friendly-id

有没有办法在开发模式下禁用友好 ID？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:25:03.143

您可以在模型中检查 rails 环境。

```
class User < ActiveRecord::Base

  unless Rails.env.development?
    extend FriendlyId
    friendly_id :name, use: :slugged
  end

end 
```

跳过在开发中生成新的 slug

```
class User < ActiveRecord::Base

  extend FriendlyId
  friendly_id :name, use: :slugged

  def should_generate_new_friendly_id?
    false if Rails.env.development?
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:07:19.397

尝试从您的 Gemfile 中删除它：

```
gem 'friendly_id' 
```

并将其添加到您的 Gemfile 中：

```
group :production, :test do
gem 'friendly_id'
end 
```

# css - CSS3不是带有最后一个孩子的选择器

> ID：12491490
> 
> 赞同：4
> 
> 时间：2012-09-19T09:01:03.933
> 
> 标签：css, css-selectors

我有以下 css 需要更改没有“myClass”类的最后一个孩子，但我似乎无法让它工作。

有什么想法我哪里出错了吗？

```
ul li:not(.myClass):last-child a {
    font-style:italic;
} 
```

**根据要求的示例html：**

```
<ul>
    <li><a href="#">one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
    <li class="myClass"><a href="#">Extra</a></li>
</ul> 
```

我想将css应用到李三...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:39:22.233

仅当您能够使用 jQuery 时才能使用 css 完成此操作，您可能会发现此解决方案很有帮助。

[http://jsfiddle.net/6ku3Y/](http://jsfiddle.net/6ku3Y/)

```
$('ul li').not('.myClass').last().find('a').addClass('mystyle');​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:20:34.940

如果您确定要定位的元素是最后一个，则可以使用`nth-last-child(2)`

```
ul li:nth-last-child(2) a {
    border-right:0px solid #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:16:07.433

如果您只想将 css 应用于 li 三个，请尝试 :nth-child(3)

```
ul li:nth-child(3) a​ {
    border-right:0
}​ 
```

[http://jsfiddle.net/hhncn/](http://jsfiddle.net/hhncn/)

> 这个伪类根据元素在父元素的子元素列表中的位置来匹配元素。– [http://reference.sitepoint.com/css/pseudoclass-nthchild](http://reference.sitepoint.com/css/pseudoclass-nthchild)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:33:57.980

当前的 CSS 语法无法帮助`AND`操作员执行这种样式。你需要的是[CSS LESS](http://lesscss.org/)框架。

这将允许您这样做：

```
ul > li:not(.myClass) {
  li:last-child {
    //style here
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T09:23:20.910

尝试这样的事情：

```
ul li:not(.myClass):nth-last-of-type(2) a {
    border-right:0px solid #000;
} 
```

[**看演示**](http://jsfiddle.net/kzNyk/)

# xcode - NSUbiquitousKeyValueStoreDidChangeExternallyNotification 似乎迷路了

> ID：12491495
> 
> 赞同：1
> 
> 时间：2012-09-19T09:01:26.287
> 
> 标签：xcode, icloud, notificationcenter

尝试集成iCloud，并尝试理解NSUbiquitousKeyValueStoreDidChangeExternallyNotification。我有一个观察者设置来监听它，一切都按预期工作，除非互联网连接丢失。当它被重新获取时，观察者不会发现在停机期间发生的任何变化。此时任何后续更改都会被拾取（并且看起来停机期间的更改此时也会被推送）但我想我的困惑出现了，因为同一个观察者可以在应用程序首次打开时通知我更改，不管发生了什么变化或互联网是否可用。我会假设观察者在任何情况下都会采取同样的行动，但我没有看到这种行为？

# sql - 丰富表

> ID：12491496
> 
> 赞同：0
> 
> 时间：2012-09-19T09:01:27.253
> 
> 标签：sql, teradata

这是我的查询：

```
 SELECT 
 a.account_type AS ACCOUNT_TYPE
,b.at_account_type_desc
,COUNT(a.BAN) AS num_BAN 
 FROM csm_adx.billing_account_act AS a 
 LEFT OUTER JOIN csm_adx.account_type_act AS b ON a.account_type = b.at_acc_type
 GROUP BY 1,2 
```

现在我想将它连接到另一个表 TABLE_C，其中包含的信息是帐户：暂定、取消、关闭、暂停、打开。

我希望我的结果表包含另外三列：`ACTIVE_BAN`，`SUSPENDED_BAN`并且`CANCELLED_BAN` 每个值都包含当前活动、暂停和取消禁令的数量。我正在使用 Teradata。

你能帮我做这件事吗？

这是当表与另一个包含 BAN 状态的表连接时的结果：

```
SELECT 
 a.account_type AS ACCOUNT_TYPE
,b.at_account_type_desc
,c.description
,COUNT(a.BAN) AS num_BAN
FROM csm_adx.billing_account_act AS a
LEFT OUTER JOIN csm_adx.account_type_act AS b 
ON a.account_type = b.at_acc_type
LEFT OUTER JOIN csm_adx.acct_status AS c
ON a.ban_status = c.original_status_code
GROUP BY 1,2,3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:09:41.713

```
SELECT 
 a.account_type AS ACCOUNT_TYPE
,b.at_account_type_desc
,COUNT(a.BAN) AS num_BAN ,
 sum(case when a.column=value then 1 else 0 end) as 'user_colname1',
sum(case when b.column=value then 1 else 0 end) as 'user_colname2'
 FROM csm_adx.billing_account_act AS a 
 LEFT OUTER JOIN csm_adx.account_type_act AS b 
ON a.account_type = b.at_acc_type
 GROUP BY 1,2 
```

# ruby-on-rails - $GEM_PATH 的值在哪里修改？

> ID：12491500
> 
> 赞同：0
> 
> 时间：2012-09-19T09:01:38.227
> 
> 标签：ruby-on-rails, gem, rvm

我当前的 $GEM_PATH 是“/home/me/.rvm/gems/ruby-1.9.2-p318”，我想将其恢复为“”/home/me/.rvm/gems/ruby-1.9.2 -p290”，我需要编辑什么“rc”文件。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:20:31.663

当您使用 rvm 时：

```
rvm use 1.9.2-p290 --default 
```

这将为当前和下一个会话更改它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:05:41.737

在您的控制台上执行此操作：

```
export GEM_PATH=/home/me/.rvm/gems/ruby-1.9.2-p290 
```

# jsp - 包含 JSP 页面

> ID：12491501
> 
> 赞同：0
> 
> 时间：2012-09-19T09:01:38.707
> 
> 标签：jsp, jspinclude

我有一个以多种形式使用的 JSP 代码，我试图将它包含在 JSP 页面中。

它适用于静态 JSP，但我没有成功使用动态 JSP。

我试图包含的代码是这样的：

```
<ui:panelLayout id="panelMem" panelLayout="flow" >
            <p>TestMem</p>
            <ui:label id="labelTest" style="left: 24px; top: 0px; position: absolute" text="TEST"/>          
</ui:panelLayout> 
```

我尝试了 jsp:include 和 jsp:directive:include，但它不起作用。

最后，我的应用程序的标签是：

```
<jsp:root version="1.2" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:ui="http://www.sun.com/web/ui"> 
```

不幸的是，我无法更改应用程序。有没有办法做到这一点？

谢谢。

# php - 禁用文件的url访问

> ID：12491502
> 
> 赞同：0
> 
> 时间：2012-09-19T09:01:43.950
> 
> 标签：php, mysql, url, redirect

我正在使用 WAMP 并在本地托管 PHP 文件。

假设我有这两个文件。

**customer.php** - 添加客户详细信息的表单

**recordCustomer.php** - 连接到数据库并将信息存储在数据库中（所有处理完成的地方）

如何通过在地址栏中键入文件名来阻止用户访问文件**recordCustomer.php**。

```
http://localhost/testing/recordCustomer.php has to be redirected and given an error message 
```

然而

```
http://localhost/testing/customer.php is allowed 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:10:32.300

问题不在于访问，`recordCustomer.php`而是如果访问是直接的，则执行代码这一事实。例如，阻止通过 htaccess 访问会使您的表单无法提交。

您应该在`customer.php`表单中使用随机令牌。令牌被保存到会话中并插入到带有隐藏输入的表单中。

`recordCustomer.php`你只需要检查是否给出了令牌以及它是否与会话中的令牌匹配。

如果匹配 => 这是对`recordCustomer.php`
else 的合法调用 => 尝试绕过您的表单，请拒绝该请求。

这是 CSRF 攻击的学校案例；）

看看[这里](http://codeutopia.net/blog/2008/10/16/how-to-csrf-protect-all-your-forms/)例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:30:39.677

您不必阻止对整个**recordCustomer.php**的访问，您只需在**recordCustomer.php**的开头检查调用该页面的用户是否有权修改他在表单中发送的记录。如果没有，则显示错误。

我给你贴了一些代码，这样你就明白了。

**recordCustomer.php**的伪/php 代码：

```
if (! isset($_SESSION['user_logged'])) {
    echo 'You have to be logged in to access this page (this incident will be logged)';
    exit;
}

$user = $_SESSION['user_logged']; //this was saved when the user logged in
$record = $_POST['record_to_modify'];

if (!user_can_modify_record($user, $record)) {
    echo 'You dont have permission to access that record (this incident will be logged)';
    exit;
}

//HERE THE REST OF recordCustomer.php

function user_can_modify_record($user, $record) {
   $set = db_query("select user from table where user = '". $user. "' and record_id = ". $record);
   return db_count_rows($set) > 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:12:47.913

您可以通过检查来简单地检查是否正在从表单请求文件：

`if(isset($_POST['submit']))`

# c# - WCF for remote SQL connection?

> ID：12491514
> 
> 赞同：0
> 
> 时间：2012-09-19T09:02:39.860
> 
> 标签：c#, wpf, sql-server, wcf

My existing scenario is below:

I have an SQL server which resides in a main company office. The company has another branch which is 60 miles apart.

I have a WPF application installed in computers in the main office and the branch which connects to the SQL server in the main office for printing records etc.

I am specifying the connection parameters in the app.config file as below:

```
<add name="CompanyEntities" connectionString="metadata=res://*/LabModel.csdl|res://*/LabModel.ssdl|res://*/LabModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=publicIPaddress of remote SQL here;Initial Catalog=databasename;Persist Security Info=True;User ID=sa;Password=password;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

My problem is that the application in the branch hangs for ever at certain times. So my question is whether its the best practice to use WCF for connecting to the remote SQL server?

Which is the best way to go about it? Is there any links which best discribes this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:21:08.700

In your current scenario, WCF is useless to you. If you write a server side application, that manages the database connection, you can use WCF to send the data to your clients. However that requires your client side software adapted to the use of WCF also, but in that case your clients wouldn't access the database (you would change from a two-layer architecture to a three-layer architecture). It might solve your problems, and it might introduce some other problems.

The hanging problem you describe could be caused by many things. For example you can run out of database connections, get into a deadlock (altough that transaction would be terminated by the server normally), or just simply have a lock on data being edited, and the employee using it going for a break.

It is also possible, that the problem is not with the database connection, but something in the client side code. Since I have no details, I can not tell you anything more specific.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T12:57:16.497

Picking on the wording you chose, I don't think you'll be "*connecting to the remote SQL server*" using WCF. However, you can certainly use WCF to host a service that provides your client (WPF app) with secure access to your data, though it will do so indirectly. This approach will be quite different from the approach you currently have: accessing the server directly from the WPF app.

Although I haven't used it myself, I believe one approach may be [WCF Data Services](http://msdn.microsoft.com/en-us/data/odata.aspx). If you only need a few operations in your service (e.g. GetRecord) for printing you may also be able to just roll your own WCF service that just provides "Records" to your client app. Any introductory book or tutorial on WCF will probably get you on your way.

* * *

The above answers the *questions* you seemed to be asking. However, WCF doesn't solve connection issues for you: if you say "the application [...] hangs forever at certain times" you should investigate that no matter what. But that's a different question.

# php - Internet Explorer 未在后退按钮 php 上存储复选框

> ID：12491519
> 
> 赞同：0
> 
> 时间：2012-09-19T09:02:57.177
> 
> 标签：php

我正在在线构建一个 php 多项选择风格的应用程序，作为项目调查工具的一部分，除了我在 Internet Explorer 中进行测试之外，这一切似乎都很好，这并不奇怪。

当我在 IE 中单击提交我的答案按钮时，应用程序会检查用户是否输入了正确答案或在数组中返回错误。

问题是当我使用 javascript go back -1 函数时，复选框是空白的，而不是“勾选”。它适用于所有其他浏览器。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:13:20.183

您不能依赖浏览器供应商（IE、Firefox、Chrome 等）实现此行为。也许在 IE 10 中这会起作用 - 也许在 Firefox 3.6 中它不会等等。

如果您想保留表单值而不通过发布数据`POST`- 您必须将它们存储在 cookie 中（或者在较新的浏览器中可能是本地存储）。

我想您的调查脚本最好在服务器端发布数据并拦截前向/后向提交。

# c# - 如何在日历选择上填充文本框已更改

> ID：12491529
> 
> 赞同：1
> 
> 时间：2012-09-19T09:03:25.263
> 
> 标签：c#, asp.net, calendar, asp.net-ajax, ajaxcontroltoolkit

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
   <div style="text-align:center">

        <asp:Calendar ID="myCal" runat="server" Height="600px" width="900px" 
            BorderColor="#F2F3F4" BorderWidth="3px" DayStyle-BorderWidth="1px" 
                    TodayDayStyle-BackColor="#82CAFF" NextPrevFormat="ShortMonth" 
            SelectionMode="Day" DayHeaderStyle-Height="30px" 
                    TitleStyle-BackColor="#CBE3F0" TitleStyle-ForeColor="#153E7E" 
            OtherMonthDayStyle-ForeColor="#B4CFEC" NextPrevStyle-ForeColor="#2554C7" 
            CssClass="mGrid" onselectionchanged="myCal_SelectionChanged">
            <DayHeaderStyle Height="30px" /><TitleStyle Height="50px" />
            <DayStyle BorderWidth="1px" HorizontalAlign="Left" VerticalAlign="Top" />
            <TodayDayStyle BackColor="#CBE3F0" />
        </asp:Calendar>

    </div>

    <asp:Panel ID="pnlSelect" runat="server" width="200px" Height="200px"  >

       <table border="0" cellspacing="6" cellpadding="0" style="background-color:white">
            <tr>
                <td align="right"></td>
                <td>
                    <h2>New Appointment</h2>
                </td>
            </tr>
            <tr>
                <td align="right">Start Date:</td>
                <td><asp:TextBox ID="TextBoxStart" runat="server"></asp:TextBox></td>
            </tr>
            <tr>
                <td align="right">End Date:</td>
                <td><asp:TextBox ID="TextBoxEnd" runat="server"></asp:TextBox></td>
            </tr>
            <tr>
                <td align="right">Name:</td>
                <td><asp:TextBox ID="TextBoxName" runat="server"></asp:TextBox></td>
            </tr>
            <tr>
                <td align="right"></td>
                <td>
                    <asp:Button ID="ButtonOK" runat="server" OnClick="ButtonOK_Click" Text="OK" />
                    <asp:Button ID="ButtonCancel" runat="server" Text="Cancel" OnClick="ButtonCancel_Click" />
                </td>
            </tr>
        </table>

    </asp:Panel>

    <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="myCal" PopupControlID="pnlSelect"
         OkControlID="ButtonOK" CancelControlID="ButtonCancel" Drag="True">

    </asp:ModalPopupExtender> 
```

我想在弹出窗口中填充当前日期，但是`myCal_SelectionChanged`事件没有触发

我如何实现这一目标

**请帮忙**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:31:56.883

您的代码对我来说运行良好。创建一个新的测试页，然后再尝试使用相同的代码，如果它可以工作的话.. 可能是您的页面设计器.cs 有问题

# ajax - 如何实现onpopstate？读了这么多东西后感到困惑

> ID：12491530
> 
> 赞同：1
> 
> 时间：2012-09-19T09:03:29.377
> 
> 标签：ajax, html, history, pushstate, popstate

我正在使用 AJAX 加载内容，并使用 pushastate 更改 URL，下面是我的代码，任何人都可以告诉我如何实现 onpopstate 以在我的情况下启用后退按钮。

HTML

```
<div id="tabs" style="margin:1px 0px 0px 15px;">
   <ul class="tabs-ul">
        <li id="boardLi" class="current-tab"><a class="current-tab" href="board.jsp">Board</a></li>
        <li id="aboutLi"><a href="aboutme.jsp">Info</a></li>
        <li id="photoLi"><a href="photo.jsp">Photo Albums</a></li>

   </ul>  
</div> 
```

JS

```
$(document).ready(function() {
function loadContent(path,c,pageName){
     $.ajax({ url: path, success: function(html) {
            $('#ajax-content').empty().append(html);
                window.history.pushState({path:''},'',pageName+'?tab='+c);
        }
    });
 }
function checkC(target){
        var c='';
        if(target=='aboutme.jsp')
        {c='info';}
        else if(target=='board.jsp')
        {c='board';}
        else if(target=='photo.jsp')
        {c='photo';}
        else if(target=='tab.jsp')
        {c='ht';}
     return c;

}

$(".tabs-ul li a").on('click', function(e) {
    e.preventDefault();
    $('#ajax-content').empty().append("<div id='loading'><img src='images/preloader.gif' alt='Loading' /></div>");
    $('.tabs-ul li a').removeClass('current-tab');
    $('.tabs-ul li').removeClass('current-tab');
    $(this).addClass('current-tab');
    $(this).parent().addClass('current-tab');

    var url = window.location.pathname;
    var pageName = url.substring(url.lastIndexOf('/') + 1);  
    var target=$(this).attr('href');
    var c=checkC(target);

    loadContent(target,c,pageName);

    return false;
});

var loaded = false;
window.onpopstate = function(e) {
    if (!loaded) {
        loaded = true;
        return;
    } else {
        alert(window.loacation.back().pathname);
        loadContent();
    }
};
}); 
```

当用户单击链接时，首先我添加删除类以进行加载，然后我获取 URL 并从该 URL 获取页面名称（保存在“pageName”中），“target”是单击链接的 href attr 和“c”是我将在 url 中显示的值（例如，example.com/profile.jsp?tab=info，如果 href 是 info.jsp 则 'c' 将是 info），最后我正在调用 'loadContent' 函数它加载 ajax 内容并使用 pushState 更改 URL。

# java - Lucene IndexReader 提交不起作用

> ID：12491533
> 
> 赞同：0
> 
> 时间：2012-09-19T09:03:35.477
> 
> 标签：java, lucene

我有一种方法可以从我的 Lucene 索引中搜索和删除文档。

但是，当我运行代码两次时，它仍然会找到标记为从上一次迭代中删除的文档，并且 indexReader.hasDeletions() 评估为 true。

```
public void duplicatesRemover(String currentIndex) throws Exception {

Directory directory = FSDirectory.open(new File(currentIndex));
IndexReader indexReader = IndexReader.open(directory, false);
IndexSearcher indexSearcher = new IndexSearcher(indexReader);

int dups = 0;    
for (int i = 0; i < indexReader.numDocs(); i++) {
  Document doc = indexReader.document(i);
  int articleId = Integer.parseInt(doc.get("articleId"));
  Query q = NumericRangeQuery.newIntRange("articleId", articleId,  articleId, true, true);
  TopDocs topDocs = indexSearcher.search(q, 10);
  if (topDocs.totalHits > 1 ) {
    indexReader.deleteDocument(i);

    System.out.print("Total matches from search found: " + topDocs.totalHits + " articleId = " + articleId);
    System.out.println(" total dups found " + ++dups + "/" + i);

  }
}
if(indexReader.hasDeletions()){
  System.out.println("Has deletions");      
  Map<String, String> commitUserData = new HashMap<String, String>();
  commitUserData.put("foo", "fighter");    
  indexReader.commit(commitUserData);
}

indexSearcher.close();    
indexReader.close();

directory.close();
} 
```

非常感谢瑜伽士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:23:22.733

您使用的是哪个 Lucene 版本？和方法已弃用`deleteDocument`。`commit`应该按照[这里](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexReader.html#deleteDocument%28int%29)`IndexWriter`提到的方式完成这些操作。

关于您的问题，我认为在`IndexSearcher`打开时操纵索引不是一个好习惯。我将从检查这个方向开始。

# ibatis - 使用 mybatis 或 ibatis 的一对多关系

> ID：12491536
> 
> 赞同：2
> 
> 时间：2012-09-19T09:03:50.017
> 
> 标签：ibatis, mybatis

我有两个表的数据库

```
 post: 
    id
    post_name
    post_desc        

  files:
    file_id
    file_name

  post_attachments
    post_id
    file_id 
```

在我的 xml 映射中，我已经有了

```
 <select id="selectPosts" resultType="com.mycom.myproject.bean.postBean">  
     select id, post_name as postName from post
  </select> 
```

所以它是一对多的关系。我想要所有附加到帖子的文件。我不明白如何在 mybatis 中进行映射。

我有我的 PostBean

```
public class PostBean extends Post {

 private List<FileAttachment> filesAttachment;
 //getter setter
} 
```

我正在使用带有spring和mysql的mybatis作为数据库如果您需要其他任何东西请告诉我。

**- 更新 -**

我已将 mapper.xml 修改为

```
 <resultMap id="BaseResultMap" type="com.mycom.myproject.db.mybatis.model.post">
<!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Tue Sep 11 10:14:08 BST 2012.
-->
<id column="id" jdbcType="BIGINT" property="id" />
<result column="post_name" jdbcType="VARCHAR" property="postName" />
<collection property="filesAttachment" ofType="com.mycom.myproject.db.mybatis.model.FileAttachment">
    <id property="fileId" column="file_id" />
    <id property="fileName" column="file_name" />
</collection> 
```

**--- 更新 2 ---**

实际上我也有一个我在上面创建的映射表，所以我的查询就像

```
 <select id="selectPosts" parameterType="string"  resultType="com.mycom.myproject.bean.postBean"> 
   select p.id, p.post_name, fa.file_id as fileId, fa.file_name as fileName from post p
left outer join files f on f.post_id = p.id join post_attachments pa on pa.file_id = f.post_id
where p.id = 371    

  </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:28:42.017

如[手册](https://www.mybatis.org/mybatis-3/sqlmap-xml.html#Advanced_Result_Maps)中所示，您必须编写更复杂的查询并更改映射器。

请求将是这样的：

```
<select id="selectPosts" resultType="com.mycom.myproject.bean.postBean">  
    select id, post_name, file_id, file_name as postName from post left outer join files
</select> 
```

你的结果图：

```
<resultMap id="detailedPostResultMap" type="Blog">
  <result property="id" column="id"/>
  <result property="name" column="post_name"/>
  <collection property=filesAttachment" ofType="FileAttachment">
     <id property="fileId" column="file_id"/>
     <result property="fileName" column="file_name"/>
  </collection>
</resultMap> 
```

# python - 将字符串拆分为 2 个字母的段

> ID：12491537
> 
> 赞同：10
> 
> 时间：2012-09-19T09:04:00.317
> 
> 标签：python, string, python-3.x, iterator

我有一个字符串，我需要将其分成 2 个字母的部分。例如，`'ABCDXY'`应该成为`['AB', 'CD', 'XY']`. 奇数字符情况下的行为可能完全是任意的（我会提前检查长度）。

有没有办法在没有丑陋的循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T09:06:38.853

```
>>> [s[i:i + 2] for i in range(0, len(s), 2)]
['AB', 'CD', 'XY'] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-19T09:11:41.807

使用正则表达式！

```
>>> import re
>>> s = "ABCDXYv"
>>> re.findall(r'.{1,2}',s,re.DOTALL)
['AB', 'CD', 'XY', 'v'] 
```

* * *

我知道已经有一段时间了，但我又回到了这个问题上，很好奇哪种方法更好；我的：`r'.{1,2}'`或乔恩的`r'..?'`。从表面上看，乔恩的看起来好多了，我认为它会比我的快得多，但我惊讶地发现不是这样，所以我想我会分享：

```
>>> import timeit
>>> timeit.Timer("re.findall(r'.{1,2}', 'ABCDXYv')", setup='import re').repeat()
[1.9064299485802252, 1.8369554649334674, 1.8548105833383772]
>>> timeit.Timer("re.findall(r'..?', 'ABCDXYv')", setup='import re').repeat()
[1.9142223469651611, 1.8670038395145383, 1.85781945659771] 
```

这表明确实`r'.{1,2}'`是更好/更快的选择。（但只是轻微）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:07:20.863

你可以试试：

```
s = 'ABCDEFG'
r = [s[i:i+2] for i in xrange(0, len(s), 2)]

# r is ['AB', 'CD', 'EF', 'G'] 
```

**更新 2**

如果您不关心奇数字符，则可以使用正则表达式（避免循环）：

```
s = 'ABCDEFG'
r = re.compile('(..)').findall(s)
# r is ['AB', 'CD', 'EF'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T09:07:46.853

完美的 Pythonic 并没有什么丑陋之处：

```
string = 'ABCDXY'
[string[i:i+2] for i in xrange(0, len(string), 2)] 
```

您还可以使用以下内容（来自 - [http://docs.python.org/library/itertools.html](http://docs.python.org/library/itertools.html)）：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

（这取决于您如何看待它 - 可能会或可能不会使用“循环”；））

或类似的东西：

```
re.findall('..?', string) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T09:31:43.687

还有另一种解决方案，这个解决方案建立在`zip`一个切片步幅之上：

```
map(''.join, itertools.izip_longest(mystr[::2], mystr[1::2], fillvalue='')) 
```

它确实处理奇数长度的输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T09:31:53.500

这是另一个没有显式循环的解决方案（尽管[@Emmanuel 的回答最适合您的问题](https://stackoverflow.com/a/12491575/4279)）：

```
s = 'abcdef'
L = zip(s[::2], s[1::2])
# -> [('a', 'b'), ('c', 'd'), ('e', 'f')] 
```

获取字符串：

```
print map(''.join, L)
# ['ab', 'cd', 'ef'] 
```

`list()`在 Python 3上，必要时使用 wrap 。

# javascript - 如何在 Highstock 中同步 From To date 包装器？

> ID：12491539
> 
> 赞同：1
> 
> 时间：2012-09-19T09:04:07.317
> 
> 标签：javascript, highstock

好的。我敢肯定，对于那些习惯于 Highstock 的人来说，这很容易。

我基本上想要做的是同步 From 和 To 日期输入，这样当您单击 From 输入字段时，不仅 From 输入从“Sep 10, 2012”更改为“2012-09-10”，而且 To输入字段也将从“Sep 12, 2012”变为“2012-09-12”。

事实上，它对客户不是很友好，因为输出基本上是“从：'2012-09-10'到：'2012 年 9 月 12 日'

我已经知道的是，代码的更改必须发生在 Highstock.src.js 中的第 15639 行之后的某个地方（我使用的是 1.1.5 版）。不幸的是，我不太擅长修改 Java Script 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:53:47.407

你可能想玩[`rangeSelector.inputDateFormat`](http://api.highcharts.com/highstock#rangeSelector.inputDateFormat)和[`rangeSelector.inputEditDateFormat`](http://api.highcharts.com/highstock#rangeSelector.inputEditDateFormat)

最简单的方法是将两者设置为相同，因此在编辑或正常模式下无关紧要，两个框仍将显示相同的格式

```
rangeSelector: {
    inputDateFormat : '%Y-%m-%d',
    rangeSelector.inputEditDateFormat : '%Y-%m-%d'
} 
```

或者，您可以使用该`Highcharts.dateFormat(format, time)`方法将日期格式化为所需格式并将其设置到文本框中

```
var dateImputBoxes=[chart.rangeSelector.leftBox, chart.rangeSelector.rightBox];

function formatBoxes(format) {
    $(dateImputBoxes).each(function() {
        this.value = Highcharts.dateFormat(format, this.HCTime);
    });
}

$(dateImputBoxes).each(function() {
    $(this).focus(function() {
        formatBoxes('%Y-%m-%d');
    });
     $(this).blur(function() {
        formatBoxes('%b %e, %Y');
    });
}); 
```

[格式化输入日期文本框@jsFiddle](http://jsfiddle.net/jugal/AVUE9/)

# javascript - 在 VIM 中快速切换 CoffeeScript 和 JavaScript 文件

> ID：12491543
> 
> 赞同：3
> 
> 时间：2012-09-19T09:04:42.387
> 
> 标签：javascript, coffeescript, vim

可悲的是，我是 Vimscript 的新手，未能编写从`.coffee`文件切换到相应`.js`文件的函数。

我想知道是否有人已经这样做了？

我知道有`:CoffeeCompile watch`vim-coffee-script 插件的功能，但是您看到的文件不是您在本地存储的真实文件。

拥有这样的功能会很酷（如果您将`.coffee`和`.js`文件存储在同一目录中）：

```
function! GoToJS()
  " get current file path in a string variable
  " change the .coffee extention to a .js extention
  " open the .js file
endfunction 
```

像这样的东西真的很酷-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:15:52.257

试试 vim 插件[`a.vim`](https://github.com/vim-scripts/a.vim)。它是可配置的。将这些添加到`.vimrc`：

```
let g:alternateExtensions_coffee = 'js'
let g:alternateExtensions_js = 'coffee' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T21:54:16.413

我喜欢在 linux 上编写本机 javascript 时用 coffeescript 作弊。以下是我很容易进行交换的方法：

*   运行一次`npm install -g js2coffee coffee-script`
*   把它放在你的`vimrc`：

.

```
 nmap cc :! [[ \! -f %:r.coffee ]] && js2coffee % > %:r.coffee<CR>:sp %:r.coffee<CR> 
```

*   打开一个**.js**`.coffee`文件，并通过键入以下内容创建/切换到该文件：`cc`

在本文中查看更多漂亮的快捷方式：[switch-coffeescript-and-javascript-in-vim-like-a-ninja](http://leon.vankammen.eu/tech/switch-coffeescript-and-javascript-in-vim-like-a-ninja.html)

# sql - 将字符串传递给 bash 脚本

> ID：12491544
> 
> 赞同：0
> 
> 时间：2012-09-19T09:04:47.830
> 
> 标签：sql, bash

我有这个转储数据库的脚本：

```
cat /usr/bin/dbbkup
#!/bin/bash
mysqldump -uroot -proot db > db_$(date +%d%H%M%S).sql 
```

我这样执行：

```
dbbkup && ls -atlr 
```

但是我怎样才能将一个参数传递到这个脚本中，该参数将作为数据库转储的前缀？例如

```
dbbkup -arg "changed name of field" && ls -atlr 
```

然后将脚本更改为：

```
#!/bin/bash
mysqldump -uroot -proot db > db_$(arg)_$(date +%d%H%M%S).sql 
```

谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:09:59.003

传递给 bash 脚本的第一个参数是 $1。

```
#!/bin/bash
mysqldump -uroot -proot db > $1db_$(date +%d%H%M%S).sql 
```

像这样称呼它：

```
dbbkup prefix 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:48:31.790

Bash 脚本按顺序引用参数，例如：

```
dbbkup "changed name of field" 
```

成为`$1`脚本中的变量。

因此，要继续您的示例，要使用基于日期和特定前缀的自定义文件名创建数据库转储，您的命令将是：

```
./dbbkup.sh prefix 
```

你的脚本的内容是：

```
#!/bin/bash
mysqldump -uroot -proot db > db_$1_$(date +%Y%m%d%H%M%S).sql 
```

这将生成一个名为`db_prefix_20120919104317.sql`. 我更改了日期格式，因为您有更多信息，并且在目录列表中您现在可以按名称排序，也可以按时间排序。

另外，我假设您希望将此作为如何使用 bash 参数的示例，因为您传入的参数与创建的输出无关，只是文件名，在这种情况下，为什么不对文件名进行硬编码？我没有看到具有多个名称且具有相同（尽管已更新）数据的文件的用例。

# php - 关于 _e() 函数的嵌套转义

> ID：12491551
> 
> 赞同：0
> 
> 时间：2012-09-19T09:05:09.030
> 
> 标签：php, wordpress, escaping, translation

stackoverflow 上的第一个问题：我想在 php 中转义 html，然后在 html php 中再次转义，并从 _e() 函数返回一个字符串。我不确定“术语”是否正确。所以情况是这样的：

```
return '...<span class="strike"></span><a class="read-more" href="'. 
get_permalink($post->ID) . '" title="'.get_the_title($post->ID).'">Read more</a>'; 
```

“阅读更多”应替换为

```
_e( 'Read more', 'mytheme' ) 
```

能够翻译这个词。

我什么都试过了。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:13:53.437

怎么样：

```
return '...<span class="strike"></span><a class="read-more" href="'. 
get_permalink($post->ID) . '" title="'.get_the_title($post->ID).'">'._e( 'Read more', 'mytheme' ).'</a>'; 
```

# c++ - 如何使用 C++ 强制向右保留两位小数

> ID：12491552
> 
> 赞同：1
> 
> 时间：2012-09-19T09:05:12.637
> 
> 标签：c++, visual-c++

我是 C++ 编程的新手。我想知道如何输入任何数字（例如 1256 或 2523）并将输出读取为 12.56 或 25.23？

基本上我想要的是最后两位数字出现在小数点的右侧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:11:32.367

```
float value = input / 100.0f;

// C way
printf("%.2f\n", value);

// C++ way
cout << setiosflags(ios::fixed) << setprecision(2) << value << endl; 
```

# jquery - Yii：动态创建字段的 Ajax 验证

> ID：12491553
> 
> 赞同：3
> 
> 时间：2012-09-19T09:05:14.547
> 
> 标签：jquery, yii, validation

我有一个用 CActiveForm 创建的表单，HTML 输出是这样的

```
...
    <tr>
        <td><input class="span9" placeholder="Type in the seminar title" name="CvSeminar[0][title]" id="CvSeminar_0_title" maxlength="255" value="Some Value" type="text">        <span class="help-inline error" id="CvSeminar_0_title_em_" style="display: none"></span>    </td>
        <td><input class="span1" name="CvSeminar[0][yearIssued]" id="CvSeminar_0_yearIssued" maxlength="4" value="2009" type="text">        <span class="help-inline error" id="CvSeminar_0_yearIssued_em_" style="display: none"></span>    </td>
        <td><a href="#" class="removeSeminarRow"><i style="margin-top: 10px" class="icon-remove"></i></a></td>
    </tr>
    <tr>
        <td><input class="span9" placeholder="Type in the seminar title" name="CvSeminar[1][title]" id="CvSeminar_1_title" maxlength="255" value="Some Value" type="text">        <span class="help-inline error" id="CvSeminar_1_title_em_" style="display: none"></span>    </td>
        <td><input class="span1" name="CvSeminar[1][yearIssued]" id="CvSeminar_1_yearIssued" maxlength="4" value="2006" type="text">        <span class="help-inline error" id="CvSeminar_1_yearIssued_em_" style="display: none"></span>    </td>
        <td><a href="#" class="removeSeminarRow"><i style="margin-top: 10px" class="icon-remove"></i></a></td>
    </tr>
... 
```

如您所见，我创建了一个区域，其中每行包含两个字段。我还创建了一个按钮，用户可以在其中添加新行。用户点击按钮时的 html 输出为：

```
<tr>
   <td><input class="span9" placeholder="Type in the seminar title" name="CvSeminar[1000][title]" id="CvSeminar_1000_title" maxlength="255" type="text"><span class="help-inline error" id="CvSeminar_1000_title_em_" style="display: none"></span></td>
   <td><input class="span1" name="CvSeminar[1000][yearIssued]" id="CvSeminar_1000_yearIssued" maxlength="4" type="text"><span class="help-inline error" id="CvSeminar_1000_yearIssued_em_" style="display: none"></span></td>
   <td><a href="#" class="removeSeminarRow"><i style="margin-top: 10px" class="icon-remove"></i></a></td>
</tr> 
```

当我创建一个新行并将其留空时，我的问题就开始了。服务器端的 Ajax 验证工作正常。Yii 用 json 响应新字段有错误。

```
{"CvSeminar_1000_title":["Title cannot be empty."],"CvSeminar_1000_yearIssued":["Year cannot be empty"]} 
```

问题出在客户端。由于 yiiactiveform 对新添加的行一无所知，我如何更新 yiiactiveform 以包含新添加的字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:20:01.573

添加新行时，只需使用要验证的新属性更新表单设置。

```
var settings = $(myform).data('settings');
settings.attributes.push({
   ...Validation settings here
});
$(myform).data('settings', settings); 
```

看看 Yii 生成的 javascript，你就知道该用什么了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:12:44.233

好吧，经过大量研究，我找到了解决方案。不是最好的，但肯定是最干净的。

因为`yiiactiveform`确实对它一无所知，所以`CvSeminar_1000_title`我`CvSeminar_1000_yearIssued`事先创建了它：

```
for($i = 1000; $i <= 1050; $i++) {
    $form->textField(new CvSeminar, '['.$i.']title'); 
    $form->error(new CvSeminar, '['.$i.']title'); 
    $form->textField(new CvSeminar, '['.$i.']yearIssued');
    $form->error(new CvSeminar, '['.$i.']yearIssued');
} 
```

*   注1：是的，我知道！这不是最好的解决方案，但效果很好！
*   注意 2：我不是在呼应表单元素，只是调用方法以强制`CActiveForm`创建适当的 js ajax 验证。

# xpath - Xpath 匹配单引号？

> ID：12491554
> 
> 赞同：2
> 
> 时间：2012-09-19T09:05:26.070
> 
> 标签：xpath, soapui

如何断言要断言的字符串中包含单引号的 xpath 匹配？

```
This is my string with value '40' to be asserted. 
```

我假设用转义单引号字符，`\'`但这不起作用。

```
matches( //faultstring[1]/text(), 'This is my string with value \'40\' to be asserted.' ) 
```

这是如何正确完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:35:03.370

我对这个问题的理解是，如果 XPath 表达式在 XML 文档中，则该问题是由于需要使用嵌套引号引起的。

如果是这种情况，可以使用这个 XPath 表达式：

```
$yourString = &quot;This is my string with value &apos;40&apos; to be asserted.&quot; 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/* = &quot;This is my string with value &apos;40&apos; to be asserted.&quot;"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>This is my string with value '40' to be asserted.</t> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:12:23.153

**尝试这个**

```
//faultstring[matches(text(),'&#x0027;')] 
```

或者

```
//faultstring[matches(text(),'&apos;')] 
```

或者

```
//faultstring[matches(text(),'&#39;')] 
```

有关更优雅的解决方案，请参阅此[**帖子**](https://stackoverflow.com/a/2888544/797393)

# c - 将数组转换为字符串 Nesc

> ID：12491556
> 
> 赞同：0
> 
> 时间：2012-09-19T09:05:33.183
> 
> 标签：c, nesc

我想将一个数组转换为`uint8_t`NesC**中**`uint32_t`的a 。

 **有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:52:26.003

我找到的解决方案是使用该功能：

```
void * memcpy ( void * destination, const void * source, size_t num ); 
```

还有这个功能：

```
void * memset ( void * ptr, int value, size_t num ); 
```

在我的代码中，我使用 memcpy，它工作正常。感谢所有回答我问题的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:33:55.327

如果要将`uint8_t`源中的单曲转换为`uint32_t`目标中的单曲，其实很简单。只需创建目标数组，并在循环中复制值：

```
uint8_t *source;
size_t   source_count;  /* Number of entries in the source */

uint32_t *dest = malloc(sizeof(*dest) * source_count);
for (int i = 0; i < source_count; i++)
    dest[i] = source[i]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:35:42.193

您的标题提到了字符串，但您的问题文本没有。这令人困惑。

如果您有四个 8 位整数，则可以将它们连接成一个 32 位，如下所示：

```
const uint8_t  a = 1, b = 2, c = 3, d = 4;
const uint32_t big = (a << 24) | (b << 16) | (c << 8) | d; 
```

这样对它们进行排序，其中字母表示来自上述变量的位：

```
0xaabbccdd 
```

换句话说，`a`被认为是最高有效字节，`d`也是最低字节。

如果您有一个数组，您当然可以在循环中执行此操作：

```
uint32_t bytes_to_word(const uint8_t *bytes)
{
   size_t i;
   uint32_t out = 0;

   for(i = 0; i < 4; ++i)
   {
     out <<= 8;
     out |= bytes[i];
   }
   return out;
} 
```

以上假设`bytes`有四个值。**

# android - xmpp中如何让对方回复聊天消息？

> ID：12491563
> 
> 赞同：3
> 
> 时间：2012-09-19T09:06:00.147
> 
> 标签：android, client, xmpp, chat

我已使用以下代码在 android 中制作聊天应用程序。借助此代码，我可以向客户端发送消息。但我需要让其他人使用我的应用程序进行通信。但目前它是不可能。另一个人需要打开他的 xmpp 客户端窗口才能看到消息。如何使用 xmpp 在两个人之间创建会话。我看过很多教程。他们没有帮助。所以我在这里发布一个问题。

```
SettingDialog.java

 package org.apache.android.xmpp;

import android.app.Dialog;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.SmackConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Presence;

/**
 * Gather the xmpp settings and create an XMPPConnection
 */

public class SettingsDialog extends Dialog implements android.view.View.OnClickListener {
    private XMPPClient xmppClient;
public SettingsDialog(XMPPClient xmppClient) {
    super(xmppClient);
    this.xmppClient = xmppClient;
}

protected void onStart() {
    super.onStart();
    setContentView(R.layout.settings);
    getWindow().setFlags(4, 4);
    setTitle("XMPP Settings");
    Button ok = (Button) findViewById(R.id.ok);
    ok.setOnClickListener(this);
}

public void onClick(View v) {
    //String host = getText(R.id.host);
    //String port = getText(R.id.port);
    //String service = getText(R.id.service);
    String username = getText(R.id.userid);
    String password = getText(R.id.password);
    String host,port,service;
    host="talk.google.com";
    port="5222";
    service="gmail.com";
  //  username="sabarish";
   // password="ramya";
    // Create a connection
    SmackConfiguration.setPacketReplyTimeout(500);

    ConnectionConfiguration connConfig =
            new ConnectionConfiguration("192.168.1.4 ", 5222,"ubuntu");
    XMPPConnection connection = new XMPPConnection(connConfig);

    try {
        connection.connect();
        Log.i("XMPPClient", "[SettingsDialog] Connected to " + connection.getHost());
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
        Log.e("XMPPClient", ex.toString());
        xmppClient.setConnection(null);
    }
    try {
        connection.login(username, password);
        Log.i("XMPPClient", "Logged in as " + connection.getUser());

        // Set the status to available
        Presence presence = new Presence(Presence.Type.available);
        connection.sendPacket(presence);
        xmppClient.setConnection(connection);
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to log in as " + username);
        Log.e("XMPPClient", ex.toString());
            xmppClient.setConnection(null);
    }
    dismiss();
}

private String getText(int id) {
    EditText widget = (EditText) this.findViewById(id);
    return widget.getText().toString();
} 
```

}

```
xmppclient.java

  package org.apache.android.xmpp;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.filter.PacketFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Packet;
import org.jivesoftware.smack.util.StringUtils;

import java.util.ArrayList;

public class XMPPClient extends Activity {

    private ArrayList<String> messages = new ArrayList();
    private Handler mHandler = new Handler();
    private SettingsDialog mDialog;
    private EditText mRecipient;
    private EditText mSendText;
    private ListView mList;
    private XMPPConnection connection;

    /**
     * Called with the activity is first created.
     */
    @Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    Log.i("XMPPClient", "onCreate called");
    setContentView(R.layout.main);

    mRecipient = (EditText) this.findViewById(R.id.recipient);
    Log.i("XMPPClient", "mRecipient = " + mRecipient);
    mSendText = (EditText) this.findViewById(R.id.sendText);
    Log.i("XMPPClient", "mSendText = " + mSendText);
    mList = (ListView) this.findViewById(R.id.listMessages);
    Log.i("XMPPClient", "mList = " + mList);
    setListAdapter();

    // Dialog for getting the xmpp settings
    mDialog = new SettingsDialog(this);

    // Set a listener to show the settings dialog
    Button setup = (Button) this.findViewById(R.id.setup);
    setup.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            mHandler.post(new Runnable() {
                public void run() {
                    mDialog.show();
                }
            });
        }
    });

    // Set a listener to send a chat text message
    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            String to = mRecipient.getText().toString();
            String text = mSendText.getText().toString();

            Log.i("XMPPClient", "Sending text [" + text + "] to [" + to + "]");
            Message msg = new Message(to, Message.Type.chat);
            msg.setBody(text);
            connection.sendPacket(msg);
            messages.add("You"+ ":");
            messages.add(text);
            setListAdapter();
        }
    });
}

/**
 * Called by Settings dialog when a connection is establised with the XMPP server
 *
 * @param connection
 */
public void setConnection
        (XMPPConnection
                connection) {
    this.connection = connection;
    if (connection != null) {
        // Add a packet listener to get messages sent to us
        PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        connection.addPacketListener(new PacketListener() {
            public void processPacket(Packet packet) {
                Message message = (Message) packet;
                if (message.getBody() != null) {
                    String fromName = StringUtils.parseBareAddress(message.getFrom());
                    Log.i("XMPPClient", "Got text [" + message.getBody() + "] from [" + fromName + "]");
                    messages.add(fromName + ":");
                    messages.add(message.getBody());
                    // Add the incoming message to the list view
                    mHandler.post(new Runnable() {
                        public void run() {
                            setListAdapter();
                        }
                    });
                }
            }
        }, filter);
    }
}

private void setListAdapter
        () {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.multi_line_list_item,
            messages);
    mList.setAdapter(adapter);
} 
```

}

# android-layout - TableLayout 按钮比屏幕大

> ID：12491571
> 
> 赞同：2
> 
> 时间：2012-09-19T09:06:20.597
> 
> 标签：android-layout

我正在使用 TableLayout 进行设置布局。我所有的行都填满了屏幕。而且因为图像更容易理解，所以这里的情况：

![在此处输入图像描述](../Images/b92d09ce29574bd2a82fbf7567d7956a.png)

这是布局代码的一部分（我没有放所有内容，因为有很多行，都一样）：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:isScrollContainer="true"
        android:orientation="vertical"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbars="vertical">

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/textIpBox"
                android:text="@string/ipAddress" />

        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <View
                android:id="@+id/dividerIpbox"
                android:background="@android:drawable/divider_horizontal_dim_dark" />

        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <TextView
                android:id="@+id/textPortSend"
                android:text="@string/sendPort" />

        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <EditText
                android:id="@+id/entryPortSend"
                android:inputType="number"
                android:background="@android:drawable/editbox_background" />

        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <View
                android:id="@+id/dividerPortSend"
                android:background="@android:drawable/divider_horizontal_dim_dark" />

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <Spinner
                android:id="@+id/spinner"
                android:prompt="@string/home_page" />

        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <TextView
                android:id="@+id/textCurrentWifi"
                android:text="@string/currentWifi" />

        </TableRow> 

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" >

            <Button
                android:id="@+id/buttonSave"
                android:text="@string/validate" />
        </TableRow>

    </TableLayout >

</ScrollView> 
```

我肯定错过了一些东西，`android:layout_width="fill_parent"`但我看不到是什么。

`layout_width`当我的所有设置都设置为时，我不太明白为什么它不起作用`fill_parent`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T03:05:38.167

我不同意。这可能已经解决了问题，但是将线性布局更改为表格布局并不能修复表格布局。
尝试

```
android:stretchColumns = "1,2,3"
android:shrinkColumns = "1,2,3" 
```

这将告诉应用程序哪些列应该扩大/缩小以适应屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:10:10.440

我找到了问题，尝试将您的 TableLayout 更改为 LinearLayout

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:isScrollContainer="true"
    android:orientation="vertical"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbars="vertical"> 
```

# javascript - 插件上的 jQuery 错误？

> ID：12491573
> 
> 赞同：0
> 
> 时间：2012-09-19T09:06:30.737
> 
> 标签：javascript, jquery

在我的网站上，我的浏览器在查看网页时崩溃，它说我的脚本仅在第 21 行我不确定出了什么问题？有人能看出问题吗？

```
jQuery.fn.carousel = function(previous, next, options){
    var sliderList = jQuery(this).children()[0];

    if (sliderList) {
        var increment = jQuery(sliderList).children().outerWidth("true"),
        elmnts = jQuery(sliderList).children(),
        numElmts = elmnts.length,
        sizeFirstElmnt = increment,
        shownInViewport = Math.round(jQuery(this).width() / sizeFirstElmnt),
        firstElementOnViewPort = 1,
        isAnimating = false;

        for (i = 0; i < shownInViewport; i++) {
            jQuery(sliderList).css('width',(numElmts+shownInViewport)*increment + increment + "px");
            jQuery(sliderList).append(jQuery(elmnts[i]).clone());
        }

        jQuery(previous).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort == 1) {
                    jQuery(sliderList).css('left', "-" + numElmts * sizeFirstElmnt + "px");
                    firstElementOnViewPort = numElmts;
                }
                else {
                    firstElementOnViewPort--;
                }

                jQuery(sliderList).animate({
                    left: "+=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }

        });

        jQuery(next).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort > numElmts) {
                    firstElementOnViewPort = 2;
                    jQuery(sliderList).css('left', "0px");
                }
                else {
                    firstElementOnViewPort++;
                }
                jQuery(sliderList).animate({
                    left: "-=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }
        });
    }
}; 
```

* * *

第 21 行是

```
jQuery(sliderList).append(jQuery(elmnts[i]).clone()); 
```

我用...调用我的插件

```
$('.viewer').each(function() {
    $(this).carousel('.viewer .simplePrevious', '.viewer .simpleNext');
}); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-19T09:17:48.960

它在**HTML5 元素**和**IE**中吗？即使使用 html5shiv，我也遇到过类似的问题。必须恢复为 xhtml 才能再次工作。

# jasper-reports - 导出到 Excel - 一行中的详细信息 - 单元格中的子报表

> ID：12491574
> 
> 赞同：2
> 
> 时间：2012-09-19T09:06:34.540
> 
> 标签：jasper-reports, export-to-excel, subreport

我正在使用*JasperReports*生成*Excel*格式的报告。

我的报告有一个详细信息行。此行包括一个子报表（数据库关系 1:N）。

生成的*Excel文件在主报告（**详细信息*带）中的每一行都有几行- 每个子报告的行都有一行。

我需要*Excel*文件中的一行用于每个报告的行（*详细信息*带中的行），以及单元格中的每个子报告，而不是新行。

我该怎么做？

我的模板：

![在此处输入图像描述](../Images/324b38577969f2e6b7b65c907ee2ec1f.png)

# iphone - xcode 4.4.1 的自定义字体不起作用。自定义 DIN 字体消失

> ID：12491577
> 
> 赞同：2
> 
> 时间：2012-09-19T09:06:42.283
> 
> 标签：iphone, xcode, fonts, uifont

我已经尝试过使用系统字体，它们看起来很好。当我添加自定义字体时，字体根本不会出现。谁能告诉我到底发生了什么？！它也复制到了bungle资源中？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"MenuItemCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

  cell.textLabel.text = [self.menuItems objectAtIndex:indexPath.row];
  cell.textLabel.textColor = [UIColor whiteColor];
  //[UIFont fontWithName:@"DIN-Regular.ttf" size:60];
  cell.textLabel.font = [UIFont fontWithName:@"DIN" size:10.0];

  return cell;
} 
```

什么都没有出现……甚至没有默认系统 helvetica？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:09:58.900

您必须将其添加到 Your_Project_name-Info.plist 文件中，该文件可能位于您的**支持文件**夹中

1.  点击**Your_Project_name-Info.plist**

2.  在关键字段上添加新对象（数组）=> 类型**应用程序提供的字体。**

3.  在该数组中添加一个具有**字体名称的对象**

# performance - 在 x86 上成功的非对齐访问的实际效果是什么？

> ID：12491578
> 
> 赞同：26
> 
> 时间：2012-09-19T09:06:44.073
> 
> 标签：performance, memory, x86, alignment, memory-alignment

我总是听说未对齐的访问很糟糕，因为它们要么会导致运行时错误并使程序崩溃，要么会降低内存访问速度。但是，我找不到任何关于它们会减慢多少速度的实际数据。

假设我在 x86 上并且有一些（但未知的）未对齐访问份额 - 实际上可能出现的最糟糕的减速是什么？我如何在不消除所有未对齐访问并比较两个版本代码的运行时间的情况下估计它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T09:14:19.317

这取决于指令，对于大多数 x86 SSE 加载/存储指令（不包括未对齐的变体），它会导致错误，这意味着它可能会使您的程序崩溃或导致大量往返异常处理程序（这意味着几乎或所有性能都会丢失）。未对齐的加载/存储变体以两倍的周期运行 IIRC，因为它们执行部分读/写，因此需要 2 来执行操作（除非你很幸运并且它在缓存中，这大大减少了惩罚）。

对于一般的 x86 加载/存储指令，代价是速度，因为读取或写入需要更多的周期。不对齐也可能影响缓存，导致缓存行拆分和缓存边界跨越。它还可以防止读取和写入的原子性（保证所有对齐的 x86 读取/写入，障碍和传播是另一回事，但是在未对齐的数据上使用 LOCK 指令可能会导致异常或大大增加本已巨大的惩罚lock incurs)，这是并发编程的禁忌。

[英特尔 x86 和 x64 优化手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)详细介绍了上述每个问题、它们的副作用以及如何解决它们。

[Agner Fog 的优化手册](http://www.agner.org/optimize/)应该包含您正在寻找的原始循环吞吐量的确切数字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T10:31:46.713

在某些 Intel 微架构上，由高速缓存线边界分割的负载比平时多花费十几个周期，而由页面边界分割的负载则多花费 200 多个周期。糟糕的是，如果负载在循环中始终未对齐，则值得进行两次对齐的负载并手动合并结果，即使`palignr`不是一个选项。即使是 SSE 的未对齐负载也无法拯救您，除非它们完全从中间分开。

在 AMD 上，这从来都不是问题，在 Nehalem 中问题基本消失了，但仍然有很多 Core2 存在。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-19T09:27:30.703

一般来说，估计现代处理器的速度非常复杂。这不仅适用于未对齐的访问，而且一般来说都是如此。

现代处理器具有流水线架构，指令无序并且可能并行执行以及许多其他可能影响执行的事情。

如果不支持未对齐的访问，则会出现异常。但是，如果它受支持，您可能会或可能不会减速，具体取决于很多因素。这些因素包括您在未对齐指令之前和之后执行的其他指令（因为处理器可能能够在执行先前的指令时开始获取您的数据，或者在等待时继续执行后续指令）。

如果未对齐访问发生在缓存线边界上，则会发生另一个非常重要的区别。一般来说，未对齐访问可能会发生 2 倍缓存访问，真正的减速是如果访问越过缓存行边界并导致双缓存未命中。在最坏的可能情况下，2 字节未对齐读取可能需要处理器将两个高速缓存行刷新到内存，然后从内存中读取 2 个高速缓存行。这是大量的数据移动。

优化的一般规则也适用于此：首先编码，然后测量，然后当且仅当存在问题时找出解决方案。

# java - 单击按钮后将 JPanel 添加到另一个 JPanel

> ID：12491580
> 
> 赞同：1
> 
> 时间：2012-09-19T09:06:49.237
> 
> 标签：java, swing, netbeans, runtime, jpanel

我正在使用 Netbeans IDE 制作一个 gui 应用程序。我有一个 JFrame，里面有一个 JPanel。单击按钮后，我想在第一个内部显示不同的 JPanel。另一个 JPanel 在不同的文件中。我该怎么做呢？如果这不切实际，我不介意用第二个 JPanel 替换第一个 JPanel。

我尝试了以下方法，但似乎不起作用。我是 Java 和 Gui 编程的新手，所以如果能得到任何帮助，我将不胜感激。

```
private void jButtonActionPerformed(java.awt.event.ActionEvent evt) {        
    JPanel2 jPanel2 = new JPanel2();
    JPanel1.add(jPanel2);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:08:14.410

查看方法的javadoc `Container#add`：

> 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。

所以添加面板是不够的，但您还必须再次验证层次结构，例如通过调用

```
JPanel1.validate();
JPanel1.repaint(); 
```

使用`CardLayout`@Andrew 在他的回答中建议的可能是比手动替换面板更好的选择

两个旁注：

*   学习并尊重 Java 命名约定（例如，类的实例以小写字母开头）。所以你的`JPanel1.add`电话会变成`jPanel1.add`
*   在大多数情况下，不需要扩展`Jxxx`Swing 类。查看您的班级名称`JPanel1`，`JPanel2`您正在这样做。最好使用可用的 API 自定义这些类，然后扩展它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T09:08:23.280

您还必须添加以下代码，例如您的更改才能生效：

```
jPanel1.validate();
jPanel1.repaint(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T09:32:20.523

使用[CardLayout ，如此](http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html)[处](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)所示。

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T07:18:20.913

```
 newPanel obj = new newPanel ();
    setLayout(new BorderLayout());
    add(obj ,BorderLayout.EAST ,1);//3rd argument is index
    repaint();
    revalidate(); 
```

# paypal - 贝宝数据的长度是多少？

> ID：12491581
> 
> 赞同：0
> 
> 时间：2012-09-19T09:06:50.753
> 
> 标签：paypal

我需要知道贝宝数据的长度是多少：

*   Api登录（我觉得这个是动态的）
*   api密码
*   API签名

我在`paypal`文档中进行了搜索，但没有发现任何有用的信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T06:54:18.643

API 密码和签名的长度因账户而异。

查看/创建 Live paypal 帐户的 API 签名：[登录 API](https://www.paypal.com/us/cgi-bin/webscr?cmd=_login-api-run)

查看/创建沙盒贝宝帐户的 API 签名：[链接](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_login-api-run)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:58:47.307

我签入了几个 PayPal 帐户。密码和签名是固定长度的。

API 密码 - 16 个字符

API 签名 - 56 个字符

# sql - SQL-SSIS。查找表中缺失的数字

> ID：12491582
> 
> 赞同：3
> 
> 时间：2012-09-19T09:06:52.560
> 
> 标签：sql, sql-server, ssis, sql-server-2012

我正在使用 ssis 2008 和 sql server 2012。我有一个带有 column 的表`FileNumber`。我想确保所有的数字都在后面，并且没有整数。没有丢失的数字。例如：

```
FileNumber
--------------
110
111
112
114
115
117 
```

我希望 ssis 输出缺少`113`的数字。`116`

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:18:29.273

试试这个：

```
DECLARE @t table(
 FileNumber int
 );

INSERT INTO @t(FileNumber) VALUES(110), (111), (112), (114), (115), (117);

SELECT t1.FileNumber + 1 AS sequance
FROM @t AS t1
LEFT OUTER JOIN @t AS t2 ON t1.FileNumber + 1 = t2.FileNumber
WHERE t2.FileNumber IS NULL 
```

# sql-server - MS SQL Server 日志利用率永远不会降低

> ID：12491584
> 
> 赞同：1
> 
> 时间：2012-09-19T09:06:59.750
> 
> 标签：sql-server, logging, backup, utilization

我的任务是管理一些 MS SQL Server (Express) 数据库。我的主要 DBA 经验是使用 DB2 LUW 和 Oracle 数据库，我很难理解 SQL Server 处理其事务日志的方式。

我有一个设置为“完整”恢复模式的数据库和一个 100 MB 的预分配事务日志文件。使用 Windows 调度程序，我在 00:00 运行每日完整备份，并从 02:00 开始每 2 小时记录一次备份。

我的理解是运行日志备份会自动释放事务日志空间，但情况似乎并非如此——“dbcc sqlperf(logspace)”的输出显示“使用的日志空间%”数字不断（如果缓慢）上升。

目前是 5%，所以我还没有处于恐慌状态，但我对 SQL Server 执行此操作的方式*感到困惑。*

我用于完整备份的 TSQL 语句：

`BACKUP DATABASE [xxx] TO DISK = N'E:\backups\xxx.bak' WITH DESCRIPTION = N'blah', RETAINDAYS = 7, NOFORMAT, NOINIT, NAME = N'blah', NOSKIP, REWIND, NOUNLOAD, STATS = 10, CHECKSUM`

日志备份的 TSQL 语句是：

`BACKUP LOG [xxx] TO DISK = N'E:\backups\xxx.trn' WITH DESCRIPTION = N'blah', RETAINDAYS = 7, NOFORMAT, NOINIT, NAME = N'blah', NOSKIP, REWIND, NOUNLOAD, STATS = 10, CHECKSUM`

那么，我必须做什么才能释放日志空间？

提前感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:55:53.807

`dbcc sqlperf(logspace)`显示日志空间的大致使用情况。通常此值高于（但绝不会低于）实际可用空间。本文简要介绍了为什么`log space used`日志备份后不设置为“0”：http: [//support.microsoft.com/kb/281879](http://support.microsoft.com/kb/281879)。因此，您使用的日志空间可能会上升到 25%，然后回落到例如 5%。您不必担心增加日志空间使用值。只要你有定期的日志备份，事务日志就会有足够的可用空间（除了一个事务跨越 100 Mb 的日志文件的情况，我猜这不是很常见的情况）。

# javascript - 在 jquery 中删除 .toggle 上的事件处理程序

> ID：12491585
> 
> 赞同：0
> 
> 时间：2012-09-19T09:07:02.607
> 
> 标签：javascript, jquery

是否可以删除 .toggle() 上的事件处理程序？现在，它已设置为侦听鼠标单击，但我希望 .toggle() 改为在 mouseover() 上执行。

我在这里阅读 .toggle() 方法，它说可以使用 unbind() 删除点击：

[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

但是，我在这里查看 unbind 方法：

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

他们只给出了如何取消绑定 html 元素和 css id 的示例，而不是 jquery 函数本身。

所以我的问题是，是否可以从 .toggle() 中取消绑定 .click() 并绑定 .mouseover()？

如果是这样，我将如何做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:11:07.463

我认为您正在寻找的是`.hover()`.

检查文档***[.hover()](http://api.jquery.com/hover/)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:10:31.193

`$("#myObject").unbind("click")`应该管用

# c# - 限制图像大小

> ID：12491597
> 
> 赞同：2
> 
> 时间：2012-09-19T09:07:37.197
> 
> 标签：c#, winforms

我的 WinForm 中有一个 OpenFileDialog，我想何时选择图像以将图像的大小限制为 100 Ko，将尺寸限制为 350x350。

我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:17:07.623

这取决于您需要支持的图像类型。对于最常见的类型（bmp、jpg、png），您可以轻松检索图像信息：

```
string filename = // get it from OpenFileDialog

if (new FileInfo(filename).Length > SOME_LIMIT)
{
  MessageBox.Show("!!!");
}
else
{
  Image img = Image.FromFile(filename);
  MessageBox.Show(string.Format("{0} x {1}", img.Width, img.Height));
} 
```

如果您需要对许多图像格式提供更广泛的支持，那么我建议使用[ImageMagick.NET 之类的库](http://imagemagick.codeplex.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T09:46:48.363

```
private bool ValidFile(string filename, long limitInBytes, int limitWidth, int limitHeight)
        {
            var fileSizeInBytes = new FileInfo(filename).Length;
            if(fileSizeInBytes > limitInBytes) return false;

            using(var img = new Bitmap(filename))
            {
                if(img.Width > limitWidth || img.Height > limitHeight) return false;
            }

            return true;
        }

        private void selectImgButton_Click(object sender, EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                if(ValidFile(openFileDialog1.FileName, 102400, 350, 350))
                {
                    // Image is valid and U can
                    // Do something with image
                    // For example set it to a picture box
                    pictureBox1.Image = new Bitmap(openFileDialog1.FileName);
                }
                else
                {
                    MessageBox.Show("Image is invalid");
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:25:07.250

把它作为全局变量

int imgSize = 0

* * *

```
private void button1_Click(object sender, EventArgs e)
{
  Image imageFile;
  OpenFileDialog dlg = new OpenFileDialog();

  dlg.Title = "Open Image";
  dlg.Filter = "jpg files (*.jpg)|*.jpg|All files (*.*)|*.*";

  if (dlg.ShowDialog() == DialogResult.OK)
     {
      imageFile = Image.FromFile(dlg.FileName);
      imgHeight = imageFile.Height;
      if (imgHeight > 350)
         {
              MessageBox.Show("Not 350x350 Image", "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                                imgPhoto.Image = null;
         }
         else
         {
           PictureBox1.Image = new Bitmap(dlg.OpenFile());
         }
      }
  dlg.Dispose();
} 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:40:03.500

试试这个 ：

```
OpenFileDialog fileDialog = new OpenFileDialog
{
    // managed GDI+ supports bmp, jpeg, gif, png and tiff.
    Filter =
        "Image files (*.bmp;*.jpg;*.gif;*.png;*.tiff)|*.bmp;*.jpg;*.gif;*.png;*.tiff|All files (*.*)|*.*",
};
if (fileDialog.ShowDialog() == DialogResult.OK)
{
    // Many exceptions could be raised in the following code
    try
    {
        var fileSize = new FileInfo(fileDialog.FileName);
        var validFilesize = fileSize.Length <= 1024 * 100; // 100 kilo bytes
        var validDimensions = false;

        // free the file once we get the dimensions
        using (Image image = Image.FromFile(fileDialog.FileName))
        {
            validDimensions = (image.Width <= 350) && (image.Height <= 350);
        }

        if (!validDimensions || !validFilesize)
        {
            MessageBox.Show("Error ! Choose another image");
        } 
        else
        {
            // do something with the file here
        }
    }
    catch (Exception exception)
    {
        MessageBox.Show(exception.Message);
    }
} 
```

# jasper-reports - iReport 子报表除以分页符

> ID：12491599
> 
> 赞同：4
> 
> 时间：2012-09-19T09:07:43.890
> 
> 标签：jasper-reports, subreport

子报表有两个*详细信息*带，第一个是“标题”，第二个是另一个子报表。这些带在两页上彼此分开。

我尝试了很多没有结果的属性，如“忽略分页”和“允许拆分”

我的问题是：如何强制 ireport 不要将我的子报表分成两页？

我有一些截图：

主报告：

![在此处输入图像描述](../Images/25551395010982cf0a5234231d22db33.png)

子报告：

![在此处输入图像描述](../Images/79d240444e1e4fbc7d15b923f7424f25.png)

另一个子报告：

![在此处输入图像描述](../Images/c94e679759dd07119bd6eb7459f68aba.png)

生成的*pdf*文件如下所示：

![在此处输入图像描述](../Images/7a97dbf4055b9de1187b8d0c71249436.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:06:16.130

不要在主子报表中使用两个带区，而是将标题和第二个子报表放在同一个带区。然后`splitType`将该单个频段的 设置为`"Prevent"`。这样，标题和数据将保持在一起，如果数据不适合页面，则拆分将在标题*之前进行。*

### 编辑 - 防止标题重复：

将标题放入详细信息带将使其与每组数据重复。为防止这种情况，请将 更改`printWhenExpression`为`$V{REPORT_COUNT} == 1`。这将导致它只打印一次，对于第一条记录，而不是对于通过数据源的每个后续循环。

# ios - Testflight 在 Mac OS X 桌面应用程序中找不到 SDK？

> ID：12491602
> 
> 赞同：1
> 
> 时间：2012-09-19T09:07:58.840
> 
> 标签：ios, macos, api, sdk, testflight

我正在尝试在 Test FLight 的桌面应用程序上创建一个临时版本，但找不到 sdk？

![在此处输入图像描述](../Images/aa8943f633cec4e2ef9151c5f7c411bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:13:40.177

我怀疑自 1.1 SDK 更新以来 TestFlight 客户端存在一些问题，它增加了对 ARMv7s (iPhone 5) 的支持。我有完全相同的问题。

您仍然可以使用 Web 界面上传您的构建。一切都在那里工作，所以**最好等待客户端应用程序更新**。

要上传构建，请从 xCode 转到**Organizer** (cmd-shift-2)，然后选择**"Archives"**。

选择您需要上传的档案，然后点击**“分发”**。

选择**“Save for Enterprise or Ad-Hoc deployment”**，然后选择您的签名身份。

然后，您将能够保存**ipa**文件，您可以使用 TestFlight Web 界面上传该文件。

# javascript - 防止推文 URL 被 Android 上的原生 Twitter 应用程序打开

> ID：12491605
> 
> 赞同：1
> 
> 时间：2012-09-19T09:08:05.147
> 
> 标签：javascript, android, url, twitter, titanium

我正在开发一个内置于 Titanium 中的应用程序，该应用程序有一些“Tweet about this”按钮。由于我不能使用 Twitter API 中描述的推文按钮的 Javascript 部分，我只使用带有参数的普通 URL。

在 Android 上，这会导致问题。当用户单击此链接时，他们可以选择如何打开它：始终使用本机浏览器，以及任何已注册此类链接的应用程序。因此，如果用户安装了 Twitter 应用程序，Twitter 将显示为选项之一。

那太好了，除了 Twitter 应用程序很糟糕。大多数类型的Suggest-a-tweet URL 会导致应用程序崩溃，而少数有效的URL 不会传递状态文本。

我正在寻找一种方法来强制本地浏览器打开 URL。（或者阻止 Twitter 应用程序成为呈现给用户的选项之一，但这似乎更难做到）

这是否可能仅使用 URL 本身，或者可能使用一点 Javascript？由于我使用的是 Titanium，Java 不会帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:48:12.950

我不能给你你想要的，但给你一个替代建议。

即使使用本机代码作为您尝试针对操作系统工作，您正在尝试的事情也很难（通常不可能没有错误）。Intent 在 android 中被用作让用户决定哪个程序应该处理某个请求的一种方式。如果您不希望用户做出此决定，我建议您在嵌入式浏览器中打开该网址。

# erlang - 远程节点、组长和打印输出

> ID：12491607
> 
> 赞同：5
> 
> 时间：2012-09-19T09:08:14.913
> 
> 标签：erlang

给定两个 Erlang 节点，“foo@host”和“bar@host”，下面会在“foo”上生成一个打印输出：

```
(foo@host) rpc:call('bar@host', io, format, ["~p", [test]]). 
```

虽然在“栏”上打印出以下内容：

```
(foo@host) rpc:call('bar@host', erlang, display, [test]). 
```

即使`erlang:display/1`应该仅用于调试，这两个函数都应该将内容发送到标准输出。每个进程都应该从其父进程继承组长，所以我希望这两个函数会以一致的方式运行。

上述行为有什么理由吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T11:51:14.683

这种行为差异的原因在于*输出的**位置*和人员：

 **   `erlang:display/1`是一个*BIF*，由 BEAM 直接处理，BEAM 直接将其写入其标准输出，而无需靠近 Erlang 的 io 系统。所以这样做`bar`会导致它打印到`bar`的标准输出。

*   `io:format/1/2`由 Erlang io 系统处理。由于没有`IoDevice`给出它，它会向其*组长*发送一个 io-request 。其`rpc:call/4`实现方式是远程生成的进程继承执行 RPC 调用的进程的组长。所以输出到调用进程的标准输出。`foo`因此，对节点进行 RPC 调用`bar`会导致输出进入`foo`的标准输出。

因此差异。有趣的是，在 Erlang io 系统中不需要对此进行特殊处理，一旦设置了组长，它就可以透明地工作。*

# c# - ASP.NET 仅上传图片，将路径和文件名保存在 sql 表中

> ID：12491608
> 
> 赞同：5
> 
> 时间：2012-09-19T09:08:14.523
> 
> 标签：c#, asp.net, file-upload, code-behind

> **可能重复：**
> [如何在 FileUpload 控件中限制文件类型](https://stackoverflow.com/questions/2780191/how-to-restrict-file-type-in-fileupload-control)

我有一个问题，使用我的图片上传器。它将上传所有类型的文件。我需要后面的代码，以确定它是否是图像（jpg、png 等）。然后它需要将路径和文件名保存在我的sql中。保存名称和路径已启动并正在运行，正则表达式也是如此。我现在需要合并我在这里找到的 som 代码。问题是，它是如何完成的？

我背后的代码是：

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    if (FileUpload1.PostedFile != null)
    {
        string FileName = Path.GetFileName(FileUpload1.PostedFile.FileName);

        //Save files to disk
        FileUpload1.SaveAs(Server.MapPath("~/_PublicData/Images/" + FileName));

        //Add Entry to DataBase
        String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["Computer_Klubben_CommunitySiteConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConnString);
        string strQuery = "insert into dbo.Billeder (FileName, FilePath)" + " values(@FileName, @FilePath)";
        SqlCommand cmd = new SqlCommand(strQuery);
        cmd.Parameters.AddWithValue("@FileName", FileName);
        cmd.Parameters.AddWithValue("@FilePath", "~/_PublicData/Images/" + FileName);
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;

        try
        {
            con.Open();
            cmd.ExecuteNonQuery();
        }

        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }

        finally
        {
            con.Close();
            con.Dispose();
        }
    }
} 
```

我需要将该代码放入我在此处找到的以下代码中。 [我怎样才能只上传jpeg文件？](https://stackoverflow.com/questions/4702811/how-can-i-upload-only-jpeg-files)

我是在此处的代码之后放置我的代码，还是放置它？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:13:52.830

您已从代码行为中询问，因此请尝试使用此方法验证您的文件名是否是某些图像。通过比较它们的扩展名.. 只需将您的 FileUplaod 控件的名称传递给此方法并验证您的按钮单击..

```
 private Boolean ImageUploadValidation(FileUpload UploadedFile)
{
    String FileExtension = String.Empty, Code = String.Empty;
    try
    {
        if (String.IsNullOrEmpty(UploadedFile.PostedFile.FileName))
        {
            Code = "<script> alert(' Please select file');</script>";
            ClientScript.RegisterStartupScript(this.GetType(), "someKey", Code);
            return false;
        }

        FileExtension = Path.GetExtension(UploadedFile.FileName).ToLower();

        if (!FileExtension.Equals(".gif") &&
            !FileExtension.Equals(".png") &&
            !FileExtension.Equals(".jpg") &&
            !FileExtension.Equals(".bmp") &&
            !FileExtension.Equals(".gif") &&
            !FileExtension.Equals(".jpeg") &&
            !FileExtension.Equals(".tif") &&
            !FileExtension.Equals(".tiff"))
        {
            Code = "<script> alert(' Please select valid file. File can be of extension(gif, png, jpg, bmp, gif, jpeg, tif, tiff)');</script>";
            ClientScript.RegisterStartupScript(this.GetType(), "someKey", Code);
            return false;
        }
        return true;
    }
    catch (Exception)
    {

        throw;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:14:58.803

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    if (FileUpload1.PostedFile != null)
    {
            string fileExt = 
               System.IO.Path.GetExtension(FileUpload1.FileName);

            if (fileExt == ".jpeg" || fileExt == ".jpg")
            {

string FileName = Path.GetFileName(FileUpload1.PostedFile.FileName);

        //Save files to disk
        FileUpload1.SaveAs(Server.MapPath("~/_PublicData/Images/" + FileName));

        //Add Entry to DataBase
        String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["Computer_Klubben_CommunitySiteConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConnString);
        string strQuery = "insert into dbo.Billeder (FileName, FilePath)" + " values(@FileName, @FilePath)";
        SqlCommand cmd = new SqlCommand(strQuery);
        cmd.Parameters.AddWithValue("@FileName", FileName);
        cmd.Parameters.AddWithValue("@FilePath", "~/_PublicData/Images/" + FileName);
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;

        try
        {
            con.Open();
            cmd.ExecuteNonQuery();
        }

        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }

        finally
        {
            con.Close();
            con.Dispose();
        }

}
else
{
  //Show Error Message. Invalid file.
}

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:12:52.680

我找到了使用此解决方法的解决方案：

```
<asp:FileUpload ID="fuImportImage" runat="server" />
<asp:RegularExpressionValidator ID="regexValidator" runat="server"
     ControlToValidate="fuImportImage"
     ErrorMessage="Only JPEG images are allowed" 
     ValidationExpression="(.*\.([Jj][Pp][Gg])|.*\.([Jj][Pp][Ee][Gg])$)">
</asp:RegularExpressionValidator> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:17:50.733

这是给你的正则表达式..

```
System.Text.RegularExpressions.Regex imageFilenameRegex = new 
System.Text.RegularExpressions.Regex(@"(.*?)\.(jpg|jpeg|png|gif)$", 
System.Text.RegularExpressions.RegexOptions.IgnoreCase);

bool ismatch =imageFilenameRegex.IsMatch(imgFile.FileName) 
```

# c# - WCF 参数序列化错误

> ID：12491613
> 
> 赞同：1
> 
> 时间：2012-09-19T09:08:31.387
> 
> 标签：c#, wcf, serialization

我在服务器端收到 WCF 错误：

尝试序列化参数[http://tempuri.org/:GetUserResult](http://tempuri.org/:GetUserResult)时出错。InnerException 消息是 'Type 'RoleProxy' with data contract name RoleProxy:http://schemas.datacontract.org/2004/07/' 不是预期的。...

我的问题是，我没有任何可以序列化的 RoleProxy 类型。

我有以下课程：

```
[DataContract]
[KnownType(typeof(Permission))]
public class Role
{
    protected virtual long _ID { get; set; }

    [DataMember]
    public virtual long ID
    {
        get { return _ID; }
        // zum Test
        set { _ID = value; }
    }
    [DataMember]
    public virtual string Name { get; set; }
    [DataMember]
    public virtual bool IsDefault { get; set; }
    [DataMember]
    public virtual ICollection<Permission> Permissions { get; set; }

    public Role()
    {

    }

    public Role(string name, ICollection<Permission> permissions, bool isDefault = false)
    {
        Name = name;
        Permissions = permissions;
        IsDefault = isDefault;
    }

    public virtual bool HasPermission(Permission perm)
    {
        foreach(Permission permission in this.Permissions)
            if (permission.Equals(perm))
                return true;

        return false;
    }

    public virtual bool Equals(Role other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return Equals(other.Name, Name);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof(Role)) return false;
        return Equals((Role)obj);
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

这是我正在调用的函数：

```
[ServiceContract]
[ServiceKnownType(typeof(Role))]
[ServiceKnownType(typeof(User))]
[ServiceKnownType(typeof(Permission))]
[ServiceKnownType(typeof(IList<Role>))]
[ServiceKnownType(typeof(IList<User>))]
[ServiceKnownType(typeof(IList<Permission>))]
public interface ISecurityManager
{
    ...

    [OperationContract]
    User GetUser(string userDomain, string userName);

    ...

} 
```

服务器正确接收了结果，但是我找不到一些序列化问题。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:16:06.960

诸如 EF 和 NHibernate 之类的 ORM 喜欢在运行时创建扩展默认行为的代理类型。大多数常规代码不会关心它是否具有子类型（Liskov 替换原则等） - 但是：具有继承意识的序列化程序需要检查它们实际使用的对象。

处理动态代理类型很痛苦；一些序列化程序可以处理一些代理（即不将代理视为意外的子类型，而是将其序列化，*就好像*它是基本类型一样），但它绝不是通用的。最实际的做法是将您的数据映射回一个`Role`实例，以**确保**您提供给 WCF 的是您告诉它的对象。AutoMapper 可能会为此提供方便的实现。

作为一个额外的观察，这也意味着你`Equals`的代码是错误的：

```
 if (obj.GetType() != typeof(Role)) return false;
    return Equals((Role)obj); 
```

应该：

```
 return Equals(obj as Role); 
```

（注意`Equals(Role)`已经为我们正确处理了`null`此案）

# php - 从 wordpress 中注销用户并阻止 BACK 按钮

> ID：12491615
> 
> 赞同：0
> 
> 时间：2012-09-19T09:08:36.910
> 
> 标签：php, wordpress, security, .htaccess

可以做些什么来阻止用户在`wp_logout_url`被调用时使用后退按钮吗？当然，它会将用户注销，但如果他们按下返回，他们仍然可以在页面上看到预渲染的 HTML。作为敏感数据，可以做什么？

我想出了各种无法回答的解决方法，从尝试关闭窗口到重定向到不同的 url 等等。

有谁知道我可以如何阻止用户按下 BACK 或优雅的黑客来阻止这个？

我需要一些东西来检查用户是否登录，类似于如果你在 facebook 中注销，你不能点击返回

# c++ - timerfd 和读取

> ID：12491629
> 
> 赞同：3
> 
> 时间：2012-09-19T09:09:22.340
> 
> 标签：c++, timer, timeout, epoll

我有应用程序，它定期（通过计时器）检查一些数据存储。
像这样：

```
#include <iostream>
#include <cerrno>
#include <cstring>
#include <cstdlib>
#include <sys/fcntl.h>
#include <unistd.h>

// EPOLL & TIMER
#include <sys/epoll.h>
#include <sys/timerfd.h>

int main(int argc, char **argv)
{
    /* epoll instance */
    int efd = epoll_create1(EPOLL_CLOEXEC);

    if (efd < 0)
    {
        std::cerr << "epoll_create error: " << strerror(errno) << std::endl;
        return EXIT_FAILURE;
    }

    struct epoll_event ev;
    struct epoll_event events[128];

    /* timer instance */
    int tfd = timerfd_create(CLOCK_MONOTONIC, TFD_CLOEXEC);

    struct timespec ts;
    // first expiration in 3\. seconds after program start
    ts.tv_sec = 3;
    ts.tv_nsec = 0;

    struct itimerspec new_timeout;
    struct itimerspec old_timeout;

    bzero(&new_timeout, sizeof(new_timeout));
    bzero(&old_timeout, sizeof(old_timeout));

    // value
    new_timeout.it_value = ts;

    // no interval;
    // timer will be armed in epoll_wait event trigger
    new_timeout.it_interval.tv_sec =
    new_timeout.it_interval.tv_nsec = 0;

    // Add the timer descriptor to epoll.
    if (tfd != -1)
    {
        ev.events = EPOLLIN | EPOLLERR /*| EPOLLET*/;
        ev.data.ptr = &tfd;
        epoll_ctl(efd, EPOLL_CTL_ADD, tfd, &ev);
    }

    int flags = 0;
    if (timerfd_settime(tfd, flags, &new_timeout, &old_timeout) < 0)
    {
       std::cerr << "timerfd_settime error: " << strerror(errno) << std::endl;
    }

    int numEvents = 0;
    int timeout = 0;
    bool checkTimer = false;
    while (1)
    {
        checkTimer = false;
        numEvents = epoll_wait(efd, events, 128, timeout);
        if (numEvents > 0)
        {
            for (int i = 0; i < numEvents; ++i)
            {
                if (events[i].data.ptr == &tfd)
                {
                    std::cout << "timeout" << std::endl;
                    checkTimer = true;
                }
            }
        }
        else if(numEvents == 0)
        {
            continue;
        }
        else
        {
            std::cerr << "An error occured: " << strerror(errno) << std::endl;
        }

        if (checkTimer)
        {
            /* Check data storage */
            uint64_t value;
            ssize_t readBytes;
            //while ( (readBytes = read(tfd, &value, 8)) > 0)
            //{
            //    std::cout << "\tread: '" << value << "'" << std::endl;
            //}
            itimerspec new_timeout;
            itimerspec old_timeout;
            new_timeout.it_value.tv_sec = rand() % 3 + 1;
            new_timeout.it_value.tv_nsec = 0;
            new_timeout.it_interval.tv_sec =
            new_timeout.it_interval.tv_nsec = 0;
            timerfd_settime(tfd, flags, &new_timeout, &old_timeout);
        }
    }

    return EXIT_SUCCESS;
} 
```

这是对我的应用程序的简单描述。每次超时后，计时器需要在每次超时时重新设置一些不同的值。

问题是：

1.  是否需要将 timerfd 添加到带有 EPOLLET 标志的 epoll (epoll_ctl) 中？
2.  每次超时后是否需要读取timerfd？
3.  是否有必要无限等待epoll_wait（超时= -1）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:48:57.220

您可以在两种模式之一（边沿触发或电平触发）中执行此操作。如果您选择边缘触发路线，那么您必须通过`EPOLLET`并且不需要`timerfd`在每次唤醒后阅读。您收到一个事件的事实`epoll`意味着一个或多个超时已经触发。或者，您可以阅读，它将返回*自您上次阅读以来*`timerfd`已触发的超时数。

 *如果你选择了水平触发的路线，那么你不需要通过`EPOLLET`，但你*必须*`timerfd`在每次唤醒后阅读。如果您不这样做，那么您将立即再次被唤醒，直到您消耗时间为止。

您应该作为超时或一些正值传递`-1`给。`epoll`如果你通过`0`了，就像你在示例中所做的那样，那么你将永远不会入睡，你只会旋转等待触发时间。这几乎可以肯定是不受欢迎的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-19T05:49:01.420

问题的答案：

> 1.  是否需要将 timerfd 添加到带有 EPOLLET 标志的 epoll (epoll_ctl) 中？

不会。添加`EPOLLET`（边缘触发）确实会改变接收事件的行为。如果没有`EPOLLET`，您将不断收到来自`epoll_wait`与 相关的事件，`timerfd`直到您`read()`来自`timerfd`。使用`EPOLLET`，您将不会收到超出第一个事件的其他事件，**即使发生了新的到期**，直到您`read()`从 开始`timerfd`并且发生了新的到期。

> 2.  每次超时后是否需要读取timerfd？

是的，以便在发生新到期时（见上文）继续并接收事件（仅）。不使用定期计时器（仅单次到期）时不，并且您关闭`timerfd`而不阅读。

> 3.  是否有必要无限等待epoll_wait（超时= -1）？

不，您可以使用`epoll_wait`' 超时代替`timerfd`。`timerfd`我个人认为它比继续计算下一个超时更容易使用`EPOLL`，特别是如果您期望多个超时间隔；当超时发生时，密切关注您的下一个任务是什么，因为它与唤醒的特定事件相关联时会容易得多。*

# php - 如何将 mysqli 类扩展为其他类方法

> ID：12491632
> 
> 赞同：1
> 
> 时间：2012-09-19T09:09:26.503
> 
> 标签：php, mysqli

嘿对不起这个愚蠢的问题。我在 php 中阅读了很多关于 oop 的信息，所以我决定尝试一下。我有一个运行程序 php 的博客，一切正常，但我的代码上有 mysql 而不是 mysqli，我决定升级到新的 mysqli。这里的问题实际上是查询数据库以获得结果。我已经解决这个问题两天了。这是我想要实现的代码示例。

```
class myDB extends mysqli
{
  //perform mysqli connection to host here and return  $connection_handle
}

class siteConfig
{
   private function getConfig($id)
  {
   $res = $connection_handle->query("SELECT * from config where id='1'");
   $row = $res->fetch_assoc();
   return $row['option'];
  }

} 
```

在主索引文件上我会这样做

```
$c = new siteConfig();
echo $c->getConfig(1);
//and this will return the result of the query. 
```

还请原谅我的编程逻辑，仍然是 oop 世界的一个非常糟糕的新手

任何想法都会有所帮助，谢谢。

附言

这是正在使用的代码的工作示例

```
$db_link = mysqli_connect(DB,HOST,DB_USER,DB,PASS,DB_NAME) or die(mysql_error());

class myDB extends mysqli
{
  public function getConfig($id, $db_link) // thanks cbuckley
{
 $db_link = $this->db_link;
     $res = mysqli_query($this->db_link,"SELECT * from config where id='1'");
     $row = mysqli_fetch_array($res);
     return $row['option'];
}    
} 
```

我已经定义了常量并且连接成功但选择不起作用。在索引页面上这是 [code] include('inc/dbc.php');

```
 $db = new MyDB();
 echo $db->getConfig(1, $db_link); 
```

请让我知道在哪里遗漏了它，或者如果可能的话，在必要时为我重构代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:17:16.083

保持数据库连接和任何业务逻辑之间的分离很好，所以你的例子很好。只有一些额外的事情需要整理，即应用程序逻辑如何访问数据库处理程序。这是一个例子：

```
class MyDB extends mysqli {
    // any custom DB stuff here
}

class SiteConfig {
    protected $db;

    public function __construct(MyDB $db) {
        $this->db = $db;
    }

    public function getConfig($id) {
        $statement = $this->db->prepare('SELECT * FROM config WHERE id = ?');
        $statement->bind_param('i', $id);

        if ($statement->execute()) {
            $row = $statement->get_result()->fetch_assoc();
            return $row['option'];
        }
    }
}

$db = new MyDB('host', 'user', 'password', 'db');
$config = new SiteConfig($db);
var_dump($config->getConfig(1)); 
```

这里有几个有趣的地方：

*   **[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)**：传入`$db`你的配置类
*   **[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)**：SiteConfig 类不负责建立数据库连接，从而保持其角色干净且定义明确
*   **[方法和属性可见性](http://php.net/oop5.visibility)**：`$config->db`被声明为受保护，因此不能在类范围之外访问
*   **[类型提示](http://php.net/language.oop5.typehinting)**：强制 SiteConfig 的构造函数的第一个参数是 MyDB 的实例
*   **[类属性](http://php.net/language.oop5.properties)**：将`$db`实例设置为 SiteConfig 类的属性，因此可以在`getConfig()`
*   **[方法和属性可见性](http://php.net/oop5.visibility)**：`$config->db`被声明为受保护，因此不能在类范围之外访问
*   **[准备好的语句](http://php.net/mysqli.quickstart.prepared-statements)**：更有效的查询，免费[获得针对SQL 注入的保护](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:13:51.077

为什么不直接扩展 mysqli 类并将您的函数添加到 myDB？

```
class myDB extends mysqli
{
   public function getConfig($id) // thanks cbuckley
  {
   $res = $this->query("SELECT * from config where id='1'");
   $row = $res->fetch_assoc();
   return $row['option'];
  }    
}

$db = new myDB;
$db->getConfig($id); 
```

您可以使用 $this 关键字在 myDb 中调用任何 mysqli 函数（它引用自身，并且由于“it self”扩展了 mysqli，它将具有 mysqli 具有的所有函数 + 您添加的函数）

# asp.net - MVC 中的 HTTPContext 和 ControllerContext

> ID：12491634
> 
> 赞同：7
> 
> 时间：2012-09-19T09:09:35.270
> 
> 标签：asp.net, asp.net-mvc

我在**MVC** (fundamentalbook) 中读到了 `HTTPContext` And ，但我不知道 And到底是什么。`ControllerContext`**`HTTPContext``ControllerContext`**

 **有人可以解释这些方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T10:15:08.730

`HttpContext`将提供有关单个 HTTP 请求的信息。`ControllerContext`将提供有关指定控制器的 HTTP 请求的信息。

有关更多信息，请参阅下面的链接......

Http上下文：

[http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)

控制器上下文：

[http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext%28v=vs.108%29.aspx)**

# cocoa-touch - 如何将 Kobold2D 嵌入到 Cocoa Touch 应用程序中

> ID：12491639
> 
> 赞同：3
> 
> 时间：2012-09-19T09:09:47.183
> 
> 标签：cocoa-touch, cocos2d-iphone, kobold2d

我有一个用 Cocoa 编写的带有 UIKit 视图的现有游戏应用程序，我想将游戏视图本身转换为 Kobold2D，将开始屏幕和其他屏幕保留为标准 Cocoa/UIKit 屏幕。所以我想将 Kobold2D 嵌入到应用程序中，并仅为游戏屏幕激活它。

我已经阅读了 Steffan Itterheim 的书的第 15 章，其中介绍了如何为 Cocos2d 执行此操作。Kobold2D 的流程是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:42:22.867

我个人没有尝试甚至尝试将 Kobold2D 嵌入到 UIKit 应用程序中。这不是我的目标之一。现在我想不出一种简单的方法。无论如何，将现有的源代码和资源移动到 Kobold2D 项目中会更容易，而不是尝试将 Kobold2D-Libraries 项目附加到现有项目中。

Kobold2D 在 main() 和应用程序委托 (KKAppDelegate) 中运行相当多的设置代码。当应用程序委托完成时，cocos2d 已经设置并运行。

您可以尝试暂时停止director，将您的UIKit 视图附加到已经存在的窗口，然后在需要显示时将cocos2d 视图附加到您的游戏视图控制器（并恢复director）。只要 cocos2d 视图从未发布，沿着这条线的东西就可以工作。

我通常也建议不要重新创建 cocos2d 视图，因为这是一项昂贵的操作，而且似乎还没有经过测试。与多次重新创建 cocos2d 视图相关的问题很常见。

# .net - 如何保护无法通过反编译提取的 .NET 程序集中的私有字符串（如 API 密钥）？

> ID：12491642
> 
> 赞同：0
> 
> 时间：2012-09-19T09:09:51.607
> 
> 标签：.net, obfuscation

我使用的其中一个库要求您在使用它时传递一个 API 密钥，该密钥是为您的帐户唯一生成的，并且必须保持完全私密和安全。

如果我将密钥放入我的应用程序中，`private const string API_KEY = "ABC";`那么有人可能会反编译我的代码并查看密钥。

一般的 .NET 混淆（例如来自免费混淆工具）是否足以掩盖这一点，还是有更好的方法来尝试阻止窥探者获取原始 API 密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:17:26.823

您可以在 app.config 文件中使用自定义部分（很好的选择）。用您的数据（密钥）填充它，然后加密配置文件。这是示例：

```
 //loading config file...
            config = ConfigurationManager.OpenExeConfiguration("AvtoNetPublisher.exe");
            //getting specific section (in this case custom class)
            csp = (GmailSettingsProvider)config.GetSection("gsp");
            if (!csp.SectionInformation.IsProtected)
            {
                DialogResult result = MessageBox.Show("Configuration is not protected, proceed to enter configuration!", "Configuration is not protected", MessageBoxButtons.OKCancel, MessageBoxIcon.Information);
                if (result != DialogResult.OK)
                {
                    throw new Exception("Configuration was interupted by user!");
                }
                csp.UserName = Microsoft.VisualBasic.Interaction.InputBox("Enter user name", "UserName", csp.UserName, Cursor.Position.X, Cursor.Position.Y);
                csp.Password = Microsoft.VisualBasic.Interaction.InputBox("Enter password", "Password", csp.Password, Cursor.Position.X, Cursor.Position.Y);
                csp.ImapServer = Microsoft.VisualBasic.Interaction.InputBox("Enter ImapServer", "ImapServer", csp.ImapServer, Cursor.Position.X, Cursor.Position.Y);
                csp.Port = Convert.ToInt16(Microsoft.VisualBasic.Interaction.InputBox("Enter int32 Port", "Port", csp.Port.ToString(), Cursor.Position.X, Cursor.Position.Y));
                csp.EnableSSL = Convert.ToBoolean(Microsoft.VisualBasic.Interaction.InputBox("Enter bool EnableSSL", "EnableSSL", csp.EnableSSL.ToString(), Cursor.Position.X, Cursor.Position.Y));
                csp.SectionInformation.ProtectSection("RsaProtectedConfigurationProvider");
                config.Save();
            } 
```

这可以在首次应用安装或加载时触发。

# sql - 我怎样才能给日期排名？

> ID：12491646
> 
> 赞同：1
> 
> 时间：2012-09-19T09:10:05.467
> 
> 标签：sql, ranking, rank

我有一个订单表，`USER_ID`我`ORDER_DATE`
想实现这样的目标：

```
SELECT [USER_ID], [FIRST_ORDER_DATE], [SECOND_ORDER_DATE], 
       [THIRD_ORDER_DATE], [FOURTH_ORDER_DATE]
FROM ORDERS 
```

我试图创建一个标量函数 ( `getFirstOrder`, `getSecondOrder`, ...) 但在第三个之后它非常慢

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:04:30.257

像这样的东西：

```
select user_id, 
       max(case when rnk = 1 then date_col else null end) as first_order_date,
       max(case when rnk = 2 then date_col else null end) as second_order_date,
       max(case when rnk = 3 then date_col else null end) as third_order_date
from (
     select user_id, 
            date_col,
            dense_rank() over (partition by user_id order by date_col) as rnk
     from orders
) t
group by user_id; 
```

您没有指定您的 DBMS。以上是适用于大多数现代 DBMS 的 ANSI SQL。

# jquery - 使用 zoomooz 缩放 HTML 内容

> ID：12491647
> 
> 赞同：1
> 
> 时间：2012-09-19T09:10:10.730
> 
> 标签：jquery, css, zooming, zoomooz

我想缩放一个带有文本的 HTML 表格。我正在使用 zoomooz，这是一个很棒的缩放工具：

[http://janne.aukia.com/zoomooz/](http://janne.aukia.com/zoomooz/)

我面临的问题是字体也被缩放，这使得相同的内容看起来更大。我希望在缩放、文字环绕等时显示更多内容。可能你知道我的意思。

我检查了这一点，但当我将它应用于目标 div 时似乎没有任何效果：

-webkit-文本大小调整：无；

谢谢天使

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:51:51.667

也许您可以调整要缩放到的元素的大小，而不是缩放。然后，字体大小等将保持不变，但您将拥有更多空间内容。

您可以使用 调整元素大小`jQuery.animate`，请参见此处的示例：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

我不太明白你的目标是什么，所以请对你的问题进行更详细的解释。

# performance - Visual Studio 2012 编译慢，互联网使用率高

> ID：12491648
> 
> 赞同：16
> 
> 时间：2012-09-19T09:10:13.790
> 
> 标签：performance, compilation, visual-studio-2012, download

当我在 VS 2012 中编译我的项目时，它需要很长时间（分钟或 2 分钟）。我注意到，在我的任务管理器中，“系统”在编译期间大量使用互联网连接。

我尝试禁用符号加载。

到目前为止，唯一有帮助的是我禁用了本地连接。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T14:55:58.460

这可能是由您安装的扩展程序或插件引起的吗？例如，如果缺少的包不存在，NuGet 将在构建期间下载它们。

尝试使用[WireShark](http://www.wireshark.org/)等应用程序监控您的网络，它可能会为您指明正确的方向。

您还可以使用 /Log 参数运行 Visual Studio，并查看 activity.log 中是否记录了任何内容。

最后，您可以将构建输出设置为来自工具 | 的诊断。选项 | 项目与解决方案 | 构建并运行，看看那里是否有任何异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:45:23.797

这*可能*与 VS 检查撤销的证书有关。看看这个帖子...

[如何阻止 SSIS “打电话回家”](https://stackoverflow.com/questions/8570200/how-to-stop-ssis-from-phoning-home)

我发现它显着提高了 VS 性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:11:26.277

我猜你已经启用了从微软服务器获取符号。转到 Visual Studio 选项 -> 调试 -> 符号并检查您的设置。

# asp.net-mvc - JsRender does not make the transformation for a for loop

> ID：12491655
> 
> 赞同：1
> 
> 时间：2012-09-19T09:10:33.443
> 
> 标签：asp.net-mvc, jsrender

The code works according to JsFiddle; [http://jsfiddle.net/arame3333/PTWnq/6/](http://jsfiddle.net/arame3333/PTWnq/6/)

However in my MVC project it renders on the page as;

{{ for BusinessUnitName }} •{"BusinessUnitName":["Design and Build (Technical)","Architectual Design","ICT","Mechanical & Electrical ","Safety Management","Pre-Construction & Bid Preparation"]} {{/for }}

Why would this happen?

The relevant code is;

```
<ul id="departmentList"><%: Html.DisplayFor(model => model.AdditionalDepartmentList) %></ul>

<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
            {{ for BusinessUnitName }}
                <li>{{:#data}}</li>
            {{/for }}
    </script>

function RefreshDepartments(o) {
        alert("Here are the results");
        var url = '<%: Url.Action("GetAdditionalDepartments", "DataService")%>';
        dataService.getAdditionalDepartments(
            o.EmployeeId,
            RenderDepartments,
            url
        );
    }

    RenderDepartments = function (data) {
        $('#departmentList').empty();
        $('#departmentList').html($('#DepartmentTemplate').render(data));
    }; 
```

The data comes from the controller here;

```
public ActionResult GetAdditionalDepartments(int employeeId)
        {
            var list = AdditionalDepartment.GetBusinessNamesByEmployeeId(employeeId);
            var jss = new JavaScriptSerializer();
            var json = jss.Serialize(new JsonArrayFormat(list.ToList()));
            return new JsonResult
                       {
                           Data = json,
                           JsonRequestBehavior = JsonRequestBehavior.AllowGet
                       };
        } 
```

Edited markup - I cannot dispaly all of it;

```
 <form method="post" action="/Employee/Edit"><input name="__RequestVerificationToken" value="IM9yFknHf1HKgZbd+UYsyMs9wQKL9dPK8zcRfi5uXTRQl7JvCq/Gr6cVq1wnUnao5Y2IToCDtEb5Vz/KnnxXSEDartM7fE9mQ7Cm7ynsFVE6ST2hhcygJX1ALAP67AXVlBBSf5ozczCctqb8ok+Blw==" type="hidden">

        <input id="Employee_EmployeeId" name="Employee.EmployeeId" value="258" type="hidden">
        <input id="Employee_ApproverEmployeeId" name="Employee.ApproverEmployeeId" value="340" type="hidden">
        <input id="CurrentCostRate_EmployeeId" name="CurrentCostRate.EmployeeId" value="258" type="hidden">
        <input id="CurrentCostRate_CostRateId" name="CurrentCostRate.CostRateId" value="303" type="hidden">
        <input id="Employee_UserName" name="Employee.UserName" value="aaronchampion" type="hidden">
        <input id="Employee_BusinessUnit_BusinessUnitName" name="Employee.BusinessUnit.BusinessUnitName" value="Construction" type="hidden">
        <fieldset>
            <legend>Edit Employee</legend>

            <table id="editTable" class="groupBorder">

                      <tr>
                          <td style="text-align: right;">Additional Departments</td>
                          <td colSpan="2">
                              <span style="display: inline-block;">

<script type="text/javascript">
        $(function () {
            $("#DialogAdditionalDepartmentsAdditionalDepartment").dialog({
                show: "fade",               
                width: 620,
                height: 850,
                title: 'Additional Departments/Divisions for Aaron Champion',
                modal: true,
                resizable: true,
                autoOpen: false,
                close: function () { $("#DialogAdditionalDepartmentsAdditionalDepartment").html(""); },
                buttons: {
                    "": function () { $(this).dialog('close'); }, 
                    "Close": function () { $("#DialogAdditionalDepartmentsAdditionalDepartment form").submit(); } 
                }
            }); 
        });

        var lockpopupDialogAdditionalDepartmentsAdditionalDepartment = null;
        function callDialogAdditionalDepartmentsAdditionalDepartment(employeeId) { 
            if(lockpopupDialogAdditionalDepartmentsAdditionalDepartment != null) return;
            lockpopupDialogAdditionalDepartmentsAdditionalDepartment = true;
            $.get('/AdditionalDepartment/AdditionalDepartments',
             { employeeId : employeeId }, 
            updateDialogAdditionalDepartmentsAdditionalDepartment
            );
        }

        function OnSuccessDialogAdditionalDepartmentsAdditionalDepartment(result) {
            if (result == 'ok') {
                $("#DialogAdditionalDepartmentsAdditionalDepartment").dialog('close');

            }            

            else
            if(typeof(result) == 'object'){
            $("#DialogAdditionalDepartmentsAdditionalDepartment").dialog('close');
             RefreshDepartments(result);
            }

            else {
                updateDialogAdditionalDepartmentsAdditionalDepartment(result);
            }
        }        

        function updateDialogAdditionalDepartmentsAdditionalDepartment(data) {
            lockpopupDialogAdditionalDepartmentsAdditionalDepartment = null;
            $("#DialogAdditionalDepartmentsAdditionalDepartment").html(data);
            $("#DialogAdditionalDepartmentsAdditionalDepartment form").ajaxForm({

                beforeSubmit: function () { return $("#DialogAdditionalDepartmentsAdditionalDepartment form").validate().valid(); },

                success: OnSuccessDialogAdditionalDepartmentsAdditionalDepartment
            }); //ajaxForm
            $("#DialogAdditionalDepartmentsAdditionalDepartment").dialog('open');
            $("#DialogAdditionalDepartmentsAdditionalDepartment form input:visible:first").focus();
        }
</script>

                                <a href="javascript:callDialogAdditionalDepartmentsAdditionalDepartment(258)">Add/Edit additional departments/divisions</a></span>
                              <ul id="departmentList">

<li>Architectual Design</li>

<li>ICT</li>

<li>Mechanical &amp; Electrical </li>

<li>Safety Management</li>

<li>Estimating</li>

<li>HR and Training Development</li></ul>
                          </td>
                      </tr>

            </tbody></table>
        </fieldset>

    </form>

    <div>
        <a href="/Employee/List">Back to List</a>
    </div>

    <script id="DepartmentTemplate" type="text/x-jquery-tmpl">
        {{ for BusinessUnitName }}
            <li>{{:#data}}</li>
        {{/for }}
    </script>

    <script type="text/javascript">
        function RefreshDepartments(o) {
            alert("Here are the results");
            var url = '/DataService/GetAdditionalDepartments';
            dataService.getAdditionalDepartments(
                o.EmployeeId,
                RenderDepartments,
                url
            );
        }

        RenderDepartments = function (data) {
            $('#departmentList').empty();
            var data1 = $.parseJSON(data);
            $('#departmentList').html($('#DepartmentTemplate').render(data1));
        };

    </script>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:17:20.240

```
<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
    {{ for BusinessUnitName }}
         <li>{{:#data}}</li>
    {{/for }}
</script> 
```

The problem was in 3 whitespaces, it was hard to find problem, because **jsfiddle.net** example works fine. After all attempts to detect problem I asked **arame3333** for htmp-markup, then I just try it and found, that problem in template, correct one:

```
<script id="DepartmentTemplate" type="text/x-jquery-tmpl">
    {{for BusinessUnitName}}
         <li>{{:#data}}</li>
    {{/for}}
</script> 
```

# wpf - 如果 CanExecute 为 false 时执行了命令怎么办？

> ID：12491656
> 
> 赞同：0
> 
> 时间：2012-09-19T09:10:34.513
> 
> 标签：wpf, silverlight

我有一个有点奇怪的问题，但你的意见对我来说很有趣。

让我们想象一下，我们已经在 WPF 或 Silverlight 中实现了 Command，并且由于某些原因，在不正确的状态下调用了 Execute 方法，即使 CanExecute 返回 false。不管它是如何发生的，但它确实如此。当然，我们不能正确执行命令，因为我们的状态不正确，但是怎么办呢？

我们应该忽略这种情况吗？但我们可能会错过一些严重的问题。

我们应该抛出异常吗？但是我们都生活在异步世界中，所以理论上可以执行检查，返回 true 为 CanExecute，然后状态可能会更改为不正确，并且将在不正确的状态下调用 Execute。所以，我们按照要求做了一切，但我们有一个例外。

所以，请让我知道你的想法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:24:02.813

你的 CanExecute 不应该太长太复杂以至于这实际上是一个问题。

如果在运行 Execute 时再次检查 CanExecute（如果您没有在 CanExecute 中做坏事，这将同步发生），那么您可以做的更多。您的业​​务规则应该在通往数据存储库的过程中捕获与业务相关的问题，并且作为执行结果调用的任何其他函数也可以进行自己的验证和数据检查。

***如果*** 发生这种情况，那么对我来说，这意味着您在 CanExecute 的某个地方有问题。或者可能没有调用 CanExecute （可能更改了属性并且没有重新评估命令）。

除非你给出这个行为不端的代码的一个可靠的例子，否则这就是我能说的最多的。

## 编辑：

> 在 Execute 方法中调用 CanExecute 是没有问题的，但是如果我们得到 false 怎么办？我们只需要退出吗？

是的，你可以退出。或者，您可以抛出与验证相关的异常（不推荐，因为您通常会通过绑定调用它）。基本上 Execute 是链条的开始，任何调用它的人或任何东西都应该被设置为处理错误——你永远不应该仅仅因为它被调用就期望成功。

> 但是，如果我的同事创建了一个使用我的命令的组件并且在调用 Execute 之前忘记检查 CanExecute 怎么办？

在这种情况下，我会说在视图模型中实现命令然后绑定到它是不好的。如果该命令是在视图后面的代码中实现的，则可以从那里调用视图模型以执行所需的任何工作（例如保存一些数据），并将该调用包装在 try/catch 中，如果你捕获一个例外，您可以轻松地在 UI 中显示某些内容（如果您正确遵守 MVVM，则从 VM 中是不可能的）。

请记住：绑定到命令很棒，但没有人说命令都必须在视图模型中。甚至 CanExecute 也可以调用视图模型，以便进行数据验证 - 如果您是一名优秀的编码人员，那么视图所需的视图模型上的所有方法/属性都通过接口公开。

# javascript - 移动设备的最准确 gps 位置

> ID：12491657
> 
> 赞同：5
> 
> 时间：2012-09-19T09:10:36.730
> 
> 标签：javascript, android, iphone, web-applications, asp.net-web-api

我正在为移动设备构建一个基于 Web 的注册系统。获得最准确的 gps 位置（纬度/经度）非常重要。HTML5 导航器不是很准确，甚至没有使用 GPS 作为我所看到的 var。google gears 稍微好一点，但还是有超过一公里的偏差或者有获取最近道路坐标的习惯。

有人可以给我关于如何使用 JavaScript 等获得移动设备最准确 gps 位置的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:42:17.703

无法强制 API 使用特定的定位方法。它们比“硬件”控件高一个级别。据我所知，他们都只是试图获得最精确/最新的数据，但不能保证他们会使用什么。您可以将 enableHighAccuracy 选项与 Geolocation API 一起使用，但这并不明确意味着它将使用 GPS。文档建议它将首先尝试。

从文档中：

> enableHighAccuracy 属性提供应用程序希望接收最佳结果的提示。这可能会导致响应时间变慢或功耗增加。用户也可能拒绝此功能，或者设备可能无法提供比未指定标志更准确的结果。此属性的预期目的是允许应用程序通知实现它们不需要高精度的地理定位修复，因此，实现可以避免使用消耗大量功率的地理定位提供程序（例如 GPS）。这对于在电池供电的设备上运行的应用程序特别有用，例如移动电话。

[http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

PS 避免使用 Google Gears，因为它处于 EOL 状态。

# php - PHP/MySQL我选择多列

> ID：12491658
> 
> 赞同：1
> 
> 时间：2012-09-19T09:10:37.370
> 
> 标签：php, mysql, web-applications, mysqli, prepared-statement

**大家好，**

下面的这个查询包含我想要处理 mysqli 的准备好的语句

```
"SELECT password, salt FROM accounts WHERE username=?" 
```

到目前为止，似乎没有关于 fetch_array() 如何在 OO 风格中使用准备好的语句工作的文档。我能找到的最接近的是[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)

使用 mysqli 准备好的语句（OO 方式）是否有一种特殊的“正确”方式？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:18:16.467

您不会使用准备好的语句直接从数据库中获取对象。

使用`fetch` [http://php.net/manual/en/mysqli-stmt.fetch.php](http://php.net/manual/en/mysqli-stmt.fetch.php)循环遍历结果，创建所需的类实例并为其分配数据。

模型类通常会有一个`read`方法来执行此操作。该方法返回一个实例或实例数组。

（看看 symfony 模型：[http](http://www.symfony-project.org/book/1_0/08-inside-the-model-layer) ://www.symfony-project.org/book/1_0/08-inside-the-model-layer有所谓的*对等模型*提供静态方法“从表。它们的方法通常返回一个对象或相关对象类的对象集合。）

# iphone - Facebook SDK 不会在墙上发布

> ID：12491659
> 
> 赞同：0
> 
> 时间：2012-09-19T09:10:45.783
> 
> 标签：iphone, objective-c, ios, xcode, facebook

在阅读了几乎所有问题和答案后，仍然无法正常工作。为什么我尝试在我的 Facebook 墙上发帖时不断收到此错误？

```
2012-09-19 11:57:17.389 projectQuantity[5131:f803] received response
2012-09-19 11:57:17.390 projectQuantity[5131:f803] The operation couldn’t be completed. (facebookErrDomain error 10000.)
2012-09-19 11:57:17.391 projectQuantity[5131:f803] Err details: Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x6a9c100 {error=<CFBasicHash 0x6a9b140 [0x1743b48]>{type = mutable dict, count = 3,
entries =>
2 : <CFString 0x6a9b420 [0x1743b48]>{contents = "type"} = <CFString 0x6a9b5b0 [0x1743b48]>{contents = "OAuthException"}
3 : <CFString 0x6a9b550 [0x1743b48]>{contents = "message"} = <CFString 0x6a9b4b0 [0x1743b48]>{contents = "An active access token must be used to query information about the current user."}
6 : <CFString 0x6a9be30 [0x1743b48]>{contents = "code"} = 2500 
```

为什么会这样？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:05:42.763

这是一个使用非常旧的 Facebook SDK 的老问题，但现在，使用新的 Facebook SDK 比以往任何时候都容易。

已经解决了。谢谢大家。

在此处下载并按照指南操作：http: [//developers.facebook.com/ios/](http://developers.facebook.com/ios/)

享受。

# delphi - 在 ADODataset 上的插入中检索自动生成的数据

> ID：12491660
> 
> 赞同：4
> 
> 时间：2012-09-19T09:10:48.540
> 
> 标签：delphi, tadodataset

我实际上尝试在具有自动生成的 GUID 的表上链接的 ADODataset 上进行插入。当我尝试获取我的记录的新 ID 时，我得到一些 GUID 为零。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-05T01:10:04.840

这是一个老问题，但如果有人遇到它......

使用 GUID 的一大优势是您不必关心它们的来源。作为默认约束的一部分生成的值并不比客户端程序中正确生成的 GUID 好或差。

@Ravaut123 是正确的，您应该在插入 TADOataSet 集时设置 GUIDs 值

# java - 相同的字符串，不同的字符集，不等于

> ID：12491662
> 
> 赞同：3
> 
> 时间：2012-09-19T09:10:59.673
> 
> 标签：java, string, ascii

我有一个奇怪的问题。

我有一个抓取网页以获取名称列表的应用程序。然后将该列表传递给使用这些名称的另一个应用程序，使用其 API 向站点请求信息。

当我将第一个网页中的某些字符串与 API 抓取的其他字符串进行比较时，通常会得到错误的结果。

我试图逐个字母地获取字符值我得到了这个：

```
Rocco De Nicola
82 111 99 99 111 160 68 101 32 78 105 99 111 108 97 1st web page
82 111 99 99 111 32 68 101 32 78 105 99 111 108 97 2nd 
```

如您所见，在第一个字符串中，空格被编码为 160（不间断空格）而不是 32。

我可以正确编码第一组字符串吗？

我也尝试将 Charset 设置为 UTF-8，但没有成功。

也许我只需要将 160 替换为 32 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:23:17.967

我首先会修剪并替换字符串中的复杂字符以进行比较。在这一步之后是equals调用。如果您的文本中有特定语言的替换，这也带来了优势。将生成的字符串转换为小写也是一个好主意。

通常我使用类似的东西....

```
private String removeExtraCharsAndToLower(String str) {
    str=str.toLowerCase();
    str=str.replaceAll("ä", "ae");
    str=str.replaceAll("ö", "oe");
    str=str.replaceAll("ü", "ue");
    str=str.replaceAll("ß", "ss");
    return str.toLowerCase().replaceAll("[^a-z]","");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:20:28.230

使用蛮力。这列出了在编码时将 160 转换为 32 的所有字符集。

```
String s = "" + (char) 160;
for (Map.Entry<String, Charset> stringCharsetEntry : Charset.availableCharsets().entrySet()) {
    try {
        ByteBuffer bytes = stringCharsetEntry.getValue().encode(s);
        if (bytes.get(0) == 32)
            System.out.println(stringCharsetEntry.getKey());
    } catch (Exception ignored) {
    }
} 
```

什么都不打印。

如果我将条件更改为

```
if (bytes.get(0) != (byte) 160)
    System.out.println(stringCharsetEntry.getKey()+" "+new String(bytes.array(), 0)); 
```

我得到了很多例子。

# asp.net - 将来自 .aspx 页面（asp.net）的值从 10 单选按钮列表插入到数据库中的单行中

> ID：12491663
> 
> 赞同：0
> 
> 时间：2012-09-19T09:11:02.827
> 
> 标签：asp.net, sql-server

我在 .aspx 页面（在 asp.net 中）中有 10 个单选按钮列表，在数据库中的一行（名称答案）

1.在模型层，我提到了这段代码

```
 public class DimensionQuestion
        {
           public string NewCompanyName { get; set; }
           public string NewSurveyName { get; set; }
           public List<int> NewAnswer { get; set; }
        } 
```

2.在数据层层，我提到了这段代码，

```
public static bool InsertNewDimAnswer(DimensionQuestion dimension)
       {
           bool result;

           using (var helper = new DbHelper())
           {
               _cmdtext = "sp_InsertNewDimAnswer";

               var success = new SqlParameter("@Success", SqlDbType.Bit, 1, ParameterDirection.Output, true, 0, 0,
                                              "Result", DataRowVersion.Default, 0);

               foreach (string s in dimension.NewAnswer)
               {
                   if (s.Trim().Length > 0)
                   {
                       var parameter = new[]
                                    {
                                        new SqlParameter("@CompanyName", dimension.NewCompanyName),
                                        new SqlParameter("@SurveyName", dimension.NewSurveyName),

                                        new SqlParameter("@Answer",s  ),

                                        success,
                                    };
                       helper.ExecuteScalar(_cmdtext, CommandType.StoredProcedure, parameter);
                   }
               }
               result = (bool)success.Value;
           }

           return result;
       } 
```

1.  最后在业务层

    private void FillObjects() { List Answer = new List(); Answer.Add(Convert.ToInt32(rbAnswer1.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer2.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer3.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer4.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer5.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer6.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer7.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer8.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer9.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer10.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer11.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer12.Text.Trim())); 回答。添加(Convert.ToInt32(rbAnswer13.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer14.Text.Trim())); Answer.Add(Convert.ToInt32(rbAnswer15.Text.Trim())); _DimensionQuestion.NewAnswer = 答案；}

并在**按钮上单击**

```
protected void btnSave_Click(object sender, EventArgs e)
        {
            try
            {
                FillObjects();

                if (InsertData.InsertNewDimAnswer(_DimensionQuestion) 
                {

                    ShowMessage("Information is saved");
                    Reset();

                }
                else
                {
                    ShowMessage("Please try again");

                }
            }

            finally
            {
                //_DimensionQuestion = null;

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:24:31.933

只需将其作为分号分隔的字符串存储在数据库中即可。

通过单选按钮构建字符串循环时，然后添加 ; 然后将完整的字符串存储在数据库中。

然后在重新填充数据时，只需将字符串拆分为 ; 并用每个项目填充数组/列表。

# iphone - 更新 Xcode 4.3 以支持 ios 5.1

> ID：12491665
> 
> 赞同：0
> 
> 时间：2012-09-19T09:11:08.460
> 
> 标签：iphone, ios, xcode

我今天的 Xcode 版本是 4.3，所以它只支持 iOS 5.0，对吧？然后我为我的客户完成了我的项目。我想要的是让我的项目支持 iOS 5.1，我正在考虑将我的 Xcode 更新到 4.3.3，还是应该将它更新到 4.4？支持 iOS 5.1。我现在真的很困惑。我的项目是否仍然与我将要更新到的版本兼容，或者我将更改我的项目中的一些代码。

希望有人能帮助我，我有点害怕犯错误。感谢您的考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:23:46.090

将您的更新`XCode`到最新版本它也将支持所有较低版本。低版本`XCode`不支持高于其兼容**IOS 版本的高****IOS**版本，但最新版本将支持所有低.**`XCode``IOS version`**

 **我认为这已经足够清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:26:33.810

Xcode 4.3 不支持 5.1 了吗？你在狮子吗？如果是这样，那么 xcode 4.3 应该已经支持 5.1。顺便说一句，xcode 4.3.3 是更好和稳定的版本。你不应该担心它，并更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:32:20.913

正如您在[描述](https://developer.apple.com/downloads/index.action?name=Xcode)中看到的那样，Xcode 4.3.3 和 Xcode 4.0 都与 Lion 兼容并支持 iOs 5.1。

我想让你知道的是，从 iPhone 5 版本开始，很明显 iOs 6.0 即将推出，可能与 Xcode 4.5 版本一起支持最新的 SDK - 但它必须需要 Mountain Lion。而且您可能会失去对 armv6 的支持。

通常，您不必为更新的 SDK 支持更改代码的任何部分，除非您使用在标头注释中声明为私有或明确标记为已弃用的内容。**

# android - 带有 html/js 的网页可以从安卓手机/平板电脑本地运行吗？

> ID：12491672
> 
> 赞同：0
> 
> 时间：2012-09-19T09:11:28.417
> 
> 标签：android, static, local

我想在 Android 平台上将静态网页作为应用程序运行。

该网页只会根据用户输入生成 XML 文件并本地存储在 android 设备上。

目前我对 Android 开发的知识为零。

可以按照我描述的方式完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:23:24.270

要在 android 中创建静态网页，您应该按照以下步骤操作：

1.  在布局文件中创建一个包含 Web 视图的 Activity。

2.  将网页放在**assets**项目文件夹中。

3.  现在从您的活动中使用以下路径调用这些文件：

    ```
    webview.loadUrl("file:///android_asset/form.html"); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:17:01.700

快速回答： **可以。**

您可能想先四处搜索，`WebView`在您的活动中使用并在其上加载 html。尝试先四处搜索。是的，你必须使用`WebView`，所以你可能想从那里开始寻找。

# php - PHP - codeigniter - 控制日期格式

> ID：12491674
> 
> 赞同：3
> 
> 时间：2012-09-19T09:11:35.420
> 
> 标签：php, validation, codeigniter, date

我有一个表单，用户可以使用它来编辑自己的生日，我将生日以这种格式保存在数据库中`15/24/1989`，即 dd/mm/yyyy

如何检查表单生日帖子值的格式是否如图所示？

如果我通过 12/00/hello 怎么办？

我想我只需要数字，并且在日期范围内 01 > dd < 31, 01 > mm < 12, 1920 > yyyy < current_year –

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:15:22.733

```
$date = date("d/m/Y", strtotime($this->input->post('date'))); 
```

要以这种格式验证日期，您应该使用此功能。

```
function checkDateFormat($date) {
    if (preg_match('/^\d{2}\/\d{2}\/\d{4}$/', $date)) {
        if(checkdate(substr($date, 3, 2), substr($date, 0, 2), substr($date, 6, 4)))
            return true;
        else
            return false;
    } else {
        return false;
    }
} 
```

它将检查日期格式，并使用 PHP`checkdate()`函数检查实际日期本身。

```
checkDateFormat("10/10/2010"); // true
checkDateFormat("29/02/2008"); // true
checkDateFormat("29/02/2007"); // false
checkDateFormat("10/10/20101"); // false
checkDateFormat("ilikecookie"); // false 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:15:06.373

使用[strtotime](http://php.net/manual/en/function.strtotime.php)

```
date("d/m/Y", strtotime(this->input->post('date')) 
```

# jakarta-ee - 通过 HttpServlet 或类似方式提供 SSL 证书

> ID：12491675
> 
> 赞同：1
> 
> 时间：2012-09-19T09:11:39.160
> 
> 标签：jakarta-ee, ssl, jetty

设置：我有一个码头（8.1.5，如果重要的话）服务器通过 https 运行一个简单的站点，使用自签名证书（它是内部网，所以这不是问题）。这行得通。

但是，为了提供更好的用户体验，我想提供 SSL 证书以供下载和安装，并使用正确的内容类型“application/x-x509-ca-cert”。为了做到这一点，我需要两件事：

1.  一种从 Jetty 使用的 KeyStore 获取证书的方法。我知道我可以使用 OpenSSL 客户端执行此操作，但我确实需要以编程方式执行此操作，并且最好不必打开与服务器的新连接。

2.  一种以正确格式向用户提供此证书的方法。我非常确信我可以通过编写自定义 HttpServlet 来做到这一点，但是有没有更聪明/更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:12:27.107

不久前，我写了一些代码来验证签名 jar 的证书，您可能可以使用它来启发 servlet，该 servlet 可以引用密钥库并返回证书。它至少可以帮助您入门。

[https://github.com/jetty-project/jetty-webapp-verifier/blob/master/src/main/java/org/mortbay/jetty/webapp/verifier/rules/JarSignatureRule.java](https://github.com/jetty-project/jetty-webapp-verifier/blob/master/src/main/java/org/mortbay/jetty/webapp/verifier/rules/JarSignatureRule.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:05:05.670

这是我过去所做的，这可能是您考虑的另一种选择：

1.  仅使用浏览器下载服务器证书（不需要 openSSL）。访问您的网站，查看证书并将证书复制/导出到您的计算机。
2.  将该服务器证书复制到您的 Web 服务器并在您的 Jetty 上发布一个 HTTP 页面，其中包含下载该证书的链接以及在不同浏览器中安装的说明（最好带有屏幕截图）。
3.  与将访问您的 (HTTPS) 网站的用户共享此链接

# c# - 自托管 WCF 服务中的 HTTP 413 请求实体太大

> ID：12491679
> 
> 赞同：8
> 
> 时间：2012-09-19T09:11:58.420
> 
> 标签：c#, wcf, https, self-hosting

我有一个通过 HTTPS 接受消息的自托管 WCF 服务。

Java 应用程序正在发送一条消息，该应用程序接收响应：

```
HTTP/1.1 413 Request Entity Too Large
Content-Length: 0
Server: Microsoft-HTTPAPI/2.0
Date: Wed, 19 Sep 2012 09:05:34 GMT
Connection: close 
```

我没有尝试上传文件，只是发送一个 78kb 的 XML/SOAP 消息。我尝试增加我的最大消息和缓冲区大小，但无济于事。

```
 <binding name="SecuredNoProxy" openTimeout="00:00:10" sendTimeout="00:00:10">
      <textMessageEncoding messageVersion="Soap11WSAddressing10" />
      <security includeTimestamp="true" enableUnsecuredResponse="true">
          <localClientSettings timestampValidityDuration="00:15:00" />
      </security>
      <httpsTransport manualAddressing="false" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" allowCookies="false" bypassProxyOnLocal="true" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard" keepAliveEnabled="true" realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false" useDefaultWebProxy="false" requireClientCertificate="true" />
  </binding> 
```

如果我可以提供任何其他信息，请告诉我。

**WCF 跟踪日志**

> 在连接“https://localhost”上接收字节
> 
> 活动边界（开始）
> 
> 连接信息
> 
> 抛出异常（错误）

例外是：

> System.ServiceModel.ProtocolException，System.ServiceModel，版本=4.0.0.0，文化=中性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:19:19.853

正如我在问题中所避开的那样，这与绑定配置非常相关。特别是 maxReceivedMessageSize。

```
maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" 
```

这是需要更改的正确区域（可能不要让事情变得这么大，因为它会使您可能容易受到拒绝服务攻击）。根据您的实际消息确定一个合理的值。

出站端点已正确配置，但入站端点没有 - 它是：

```
<httpsTransport requireClientCertificate="true" /> 
```

这意味着它使用的是默认值`65536`，这对于发送的消息来说是不够的。所以这确实是一个非常仔细检查端点的情况，特别是如果它们的名称相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:58:57.597

对我来说，它是 system.web 下的 maxRequestLength：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
    <httpRuntime
        maxRequestLength="2147483647"
        executionTimeout="300" />
</system.web> 
```

# c++ - C++ 查找 char* 数组中的元素数量

> ID：12491683
> 
> 赞同：1
> 
> 时间：2012-09-19T09:12:24.947
> 
> 标签：c++, arrays

有没有办法知道 char* 数组中的元素数量？

我的代码是：

```
char* inputOptions[]={
    NULL,     
    "first sentence",
    "second sentence"}

for(int j=0;j<3;j++)
   cout<<inputOptions[j]<<endl; 
```

我想将'3'更改为依赖于'arr'的一些表达式。有没有办法这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:15:43.713

是的，你可以写

```
std::distance(std::begin(inputOptions), std::end(inputOptions)); 
```

在 C++03 中，使用

```
sizeof inputOptions / sizeof inputOptions[0] 
```

但是，在 C++11 中，您最好使用以下范围访问数组：

```
for (auto option: inputOptions)
   cout << option << endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:14:17.360

```
const char * inputOptions[] = {
    NULL,     
    "first sentence",
    "second sentence" };

const int numOptions = sizeof(inputOptions) / sizeof(inputOptions[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:14:57.833

您可以使用`sizeof()`静态数组，它会给您以字节为单位的大小。如果你将它除以指针大小，你将得到数组的大小：

```
siz = sizeof(inputOptions)/sizeof(char*); 
```

# database - 图数据库：我们为什么需要它？

> ID：12491687
> 
> 赞同：2
> 
> 时间：2012-09-19T09:12:40.210
> 
> 标签：database, nosql, graph-databases

我从维基百科阅读了图形数据库，但仍然不明白。

什么是“无索引邻接”？

我可以将其视为“而不是将主键存储到其他表的行，而是直接存储这些行的物理位置”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:24:12.487

当您的数据可以表示为图形（地图上的路线，一些树等）时，图形数据库是可用的。这些数据库为您提供了很酷的功能，可以像使用图形一样使用存储。我真的不知道，为什么可以将这种数据库用于其他用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:18:16.550

在图形数据库中，您可以引用其他“对象”或其他任何东西，因此您不需要连接表（这在 CPU 和内存方面更昂贵）。

# c# - C# Linq 加入 2 个表

> ID：12491690
> 
> 赞同：2
> 
> 时间：2012-09-19T09:12:53.757
> 
> 标签：c#, linq, join, dataset

我想用 linq 或 DataRelation 加入 2 个表。所以我首先尝试了 linq，它工作得很好，但是当我将另一个对象添加到 1.Tables 并加入 2.Table 时，它​​不会显示这个对象。

这是我的代码：

```
DataTable table = new DataTable("Kunde");

table.Columns.Add("KundeID", typeof(Int32));
table.Columns.Add("KundeName", typeof(String));
table.Columns.Add("Produkt", typeof(String));

table.PrimaryKey = new DataColumn[] { table.Columns["KundeID"] };

DataTable comment = new DataTable("Comment"); 

comment.Columns.Add("KundeName", typeof(String));
comment.Columns.Add("Comment", typeof(String));

comment.PrimaryKey = new DataColumn[] { comment.Columns["KundeName"] };

DataSet ds = new DataSet("DataSet");

ds.Tables.Add(table);
ds.Tables.Add(comment);

object[] o1 = { 1, "Michael", "Jogurt" };
object[] o2 = { 2, "Raj", "Cola" };
object[] o3 = { 3, "Gary", "Fanta" };
***object[] o4 = { 4, "Miky", "Sprite" };***

object[] c1 = { "Raj", "Ich bin cool" };
object[] c2 = { "Gary", "yahoo" };
object[] c3 = { "Michael", "nichts zu verlieren" };

table.Rows.Add(o1);
table.Rows.Add(o2);
table.Rows.Add(o3);
table.Rows.Add(o4);

comment.Rows.Add(c1);
comment.Rows.Add(c2);
comment.Rows.Add(c3);

var results = from table1 in table.AsEnumerable()
              join table2 in comment.AsEnumerable()
              on table1.Field<string>("KundeName") equals table2.Field<string>("KundeName")
              select new
                  {
                      KundeID = table1.Field<Int32?>("KundeID"),
                      KundeName = table1.Field<String>("KundeName"),
                      Produkt = table1.Field<String>("Produkt"),

                      Comment = table2.Field<String>("Comment")
                  };

foreach (var item in results)
{
    Console.WriteLine(String.Format("{0}    {1}    {2}    {3}", item.KundeID, item.KundeName, item.Produkt, item.Comment));
}

Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:20:54.043

如果您需要第一个表中的所有行，无论它们是否可以连接到第二个表中的行，您都需要左连接：

```
 var results = from table1 in table.AsEnumerable()
                  join table2 in comment.AsEnumerable()
                  on table1.Field<string>("KundeName") equals table2.Field<string>("KundeName") into joined
                  from table3 in joined.DefaultIfEmpty()
                  select new
                      {
                          KundeID = table1.Field<Int32?>("KundeID"),
                          KundeName = table1.Field<String>("KundeName"),
                          Produkt = table1.Field<String>("Produkt"),

                          Comment = table3 != null ? table3.Field<String>("Comment") : null
                      }; 
```

通过这种方式，您可以获得名为“Miky”的客户，但`Comment`对他来说将是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:21:00.177

您的`o4`对象中没有具有`comment`匹配`KundeName`值的对象，因此它不包含在结果中。

也许您不是要使用内部联接？

# javascript - AngularJS - 跨控制器广播

> ID：12491694
> 
> 赞同：1
> 
> 时间：2012-09-19T09:13:02.600
> 
> 标签：javascript, html, angularjs

我正在尝试一个我登录的场景，并且在成功时想要存储该 LoginID 并将其传递给所有其他控制器以进行导航/用户管理。类似于设置全局变量，存储一次使用无处不在的概念。

一直在使用 angularjs 共享服务技术，但它没有在其他控制器中选择 braodcaster LoginID。

高级细节：

1）登录 HTML 调用登录控制器，我从那里调用后端服务器以进行用户身份验证 2）成功后，通过共享服务广播 LoginID 3）从登录 HTML，页面导航到 OrderMenu Html 并调用 OrderMenu 控制器，我试图在其中获取用户 ID这是通过共享服务广播的。4) 但在 Order Menu 控制器中，显示的 UserID 是初始化值，即看起来 app.factory 再次被调用并初始化 Broadcasted 值。

我想停止重新加载 app.factory。看起来我在这里遗漏了一些东西。任何想法在这里都会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:31:44.627

这是您所描述的快速实现示例。它似乎正在工作。

[http://plnkr.co/edit/SPAB4W](http://plnkr.co/edit/SPAB4W)

我的服务定义如下：

```
app.factory('UserAuth', function() {
  return {
    userId: 'unknown',
    authenticate: function( name ) {
      // do server side authentication here...
      this.userId = 'authenticatedUserId_Of_' + name;
    }
  };
}); 
```

在此示例中，当调用第二个控制器 ( `OrderCtrl`) 时， `UserAuth.userId`不会重新初始化并保留获得的身份验证所提供的用户 ID。

您可能想分享您的代码。

# android - 如何检测可用的运营商网络？

> ID：12491715
> 
> 赞同：0
> 
> 时间：2012-09-19T09:14:15.997
> 
> 标签：android, telephonymanager

Android 中是否有任何方法可以检测该地区所有可用的运营商网络。我试图从连接管理器中搜索它，它似乎只返回活动网络信息。我还尝试了电话管理器，它只返回活动运营商的信号和邻居信息（例如同一运营商的其他信号）。我想创建一个应用程序，它将扫描每个国家/地区的可用手机网络（例如在设置中），以便在漫游时选择我的网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:36:03.453

据我所知，这是不可能的，因为您只能获取 SIM 运营商的手机信息，但我们有一个新方法`TelephonyManager`调用`getAllCellInfo ()`。
问题是该方法仅在 API 级别 17 上可用，仅在带有 Jelly Bean (4.2) 的设备上可用。

检查此[链接](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getAllCellInfo%28%29)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T16:27:54.160

即使是 getAllCellInfo 函数也永远不会报告您所在位置的“所有网络”，这仅仅是因为手机只会收听/测量当前服务小区告诉它测量的频率/网络。通常这意味着它只会测量（并且能够报告小区）来自与手机当前使用的相同网络的网络。

如果手机失去了“家庭 PLMN”（家庭或选定网络）的覆盖范围，它会定期在其他频率上进行测量，以尝试回到“最喜欢的网络”。

为了能够获得您所在地区所有现有网络的列表，您需要拥有另一种设备，例如“扫描仪”，它从不锁定任何小区，而是连续扫描许多频率以从任何网络和任何无线电中查找小区这些频率内的接入技术（例如 GSM/WCDMA LTE）。

或者连续按“选择网络”功能...

/肯尼斯

# ajax - f:ajax 不更新 ui:repeat

> ID：12491719
> 
> 赞同：2
> 
> 时间：2012-09-19T09:14:27.577
> 
> 标签：ajax, jsf-2, uirepeat

我的 JSF 页面是这样的，该`<f:ajax>`部分现在可以工作了。

```
<h:selectOneListbox value="#{category.categoryId}">
    <f:selectItems value="#{category.allSubCategories}" var="c" itemLabel="#{c.title}" itemValue="#{c.categoryId}" />
    <f:ajax execute="@form" render="projects" />
</h:selectOneListbox>

<h:panelGroup id="projects">
    <ul>
        <ui:repeat items="#{category.allItems}" var="o" id="itemTable">
            <li><h:graphicImage value="#{o.imageUrl}" id="itemImage" /></li>
            <li><h:outputText value="#{o.title}" /></li>
            <li><label>Price: $ </label><h:outputText value="#{o.price}" /></li>
        </ui:repeat>
    </ul>       
</h:panelGroup> 
```

我的豆是：

```
@ManagedBean(name = "category")
@SessionScoped
public class CategoryServiceBean extends BaseService implements Serializable {

    private static final long serialVersionUID = -12082902292711980L;    
    private Integer categoryId;
    private Integer parentCategoryId;
    private Integer locationId;

    @ManagedProperty(value="#{categorySupport}")
    private CategorySupport categorySupport;

    public List<RestCategory> getAllSubCategories() {
        return getCategorySupport().getCategoriesByParent(locationId, parentCategoryId);            
    }

    public List<RestItem> getAllItems() {
        return response = getCategorySupport().getCategoryItems( locationId, categoryId);               
    }

    // ...
} 
```

我的问题是`<f:ajax execute="@form" render="projects" />`不会将值填充到`<h:panelGroup id="projects">`. 这是如何引起的，我该如何解决？如果我使用`<h:dataTable>`而不是`<ui:repeat>`，那么它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:26:19.733

```
<ui:repeat items="#{category.allItems}" var="o" id="itemTable"> 
```

该`items`属性在 中不存在[`<ui:repeat>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/repeat.html)。您显然将其与[`<c:forEach>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/c/forEach.html). 使用`value`属性。

```
<ui:repeat value="#{category.allItems}" var="o" id="itemTable"> 
```

# iphone - 连接到袜子服务器objective-c

> ID：12491730
> 
> 赞同：2
> 
> 时间：2012-09-19T09:15:13.640
> 
> 标签：iphone, objective-c, ios, proxy, socks

我想在我的应用程序中连接到 socks 服务器以通过政府过滤。

我正在使用这个组件：[Chilkat Socket/SSL/TLS 组件/库](http://www.example-code.com/objc/socket_socks_proxy.asp)

一切正常，我可以连接到服务器。但是 NSURLRequest 不使用代理。

这是我的代码：

```
NSMutableString *strOutput = [NSMutableString stringWithCapacity:1000];
CkoSocket *socket = [[CkoSocket alloc] init];
BOOL success;
success = [socket UnlockComponent: @"Anything for 30-day trial"];
if (success != YES) {
    [strOutput appendString: socket.LastErrorText];
    [strOutput appendString: @"\n"];
    return;
}

socket.SocksHostname = @"my socks server";
socket.SocksPort = [NSNumber numberWithInt:1080];
socket.SocksUsername = @"user";
socket.SocksPassword = @"pass";
socket.SocksVersion = [NSNumber numberWithInt:5];

success = [socket AsyncConnectStart:@"my socks server" port: [NSNumber numberWithInt: 1080] ssl:NO maxWaitMs: [NSNumber numberWithInt: 20000]];

if (success) {
    NSLog(@"connected");

    NSURLRequest *request = [NSURLRequest requestWithURL:
                             [NSURL URLWithString:@"an image link"]];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:request queue:queue  completionHandler:^(NSURLResponse *response,
                                                                                      NSData *data, NSError *error) {
        if ([data length] >0 && error == nil){
            NSLog(@"%@",data);
            img.image=[[UIImage alloc]initWithData:data];
        }

    }];

} else {
    NSLog(@"not connected");
}

socket.MaxReadIdleMs = [NSNumber numberWithInt:10000];
socket.MaxSendIdleMs = [NSNumber numberWithInt:10000]; 
```

连接成功，但数据未通过 socks 服务器。

# python - 举起一个 tkMessageBox

> ID：12491731
> 
> 赞同：4
> 
> 时间：2012-09-19T09:15:14.853
> 
> 标签：python, tkinter, tkmessagebox

我正在使用 tkMessageBox.showinfo ( [info at tutorialspoint](http://www.tutorialspoint.com/python/tk_messagebox.htm) ) 在我的程序中弹出警告。

仅当使用屏幕上的第二个 TopLevel 窗口（主窗口除外）调用警告时才会出现问题：在这种情况下，警告仍然隐藏在第二个 TL 窗口后面。

我试着这样称呼它：

```
tkMessageBox.showinfo(title='Warning',message=s).lift() 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:50:20.877

我认为消息框只能保证在其父级之上。如果您创建第二个顶层并且希望消息框位于该第二个窗口的顶部，则将该第二个窗口设置为该消息框的父级。

```
tl2 = tk.Toplevel(...)
...
tkMessageBox.showinfo("Say Hello", "Hello World", parent=tl2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:31:45.480

我没有看到你描述的问题。我在下面编写的代码几乎是创建一个创建第二个窗口的窗口所需的最低限度。第二个窗口使用该`showinfo`方法创建一个信息框。我想知道你是否还有其他东西。（请注意，我将窗口做得有点大，以试图掩盖信息窗口。）

```
from Tkinter import Tk, Button, Toplevel
import tkMessageBox

top = Tk()
def make_window():
    t = Toplevel(top)
    t.title("I'm Window 2\. Look at me too!")
    B2 = Button(t, text = "Click me", command = hello)
    B2.pack()
    t.geometry('500x500+50+50')

def hello():
    tkMessageBox.showinfo("Say Hello", "Hello World")

B1 = Button(top, text = "New Window", command = make_window)
B1.pack()

top.title("I'm Window 1\. Look at me!")
top.geometry('500x500+100+100')
top.mainloop() 
```

这是使用 Python 2.7（32 位）在 Windows 7（64 位）上测试的。它产生这样的东西：

![在此处输入图像描述](../Images/14b2ab0d6c4651a94b75cd5a6f011219.png)

# javascript - XRegExp 替换 IE 中的 Unicode 字符

> ID：12491735
> 
> 赞同：0
> 
> 时间：2012-09-19T09:15:33.933
> 
> 标签：javascript, regex, unicode, xregexp

我开发了一个 javascript 函数来清理一系列 Unicode 字符。例如，“ñeóñú a1.txt”=>“neonu a1.txt”。为此，我使用了一个正则表达式：

```
 var = new RegExp patternA ("[\\u0300-\\u036F]", "g");
 name = name.replace (patternA,''); 
```

但它在 IE 中无法正常工作。如果我的研究是正确的，IE 不会以同样的方式检测 Unicode。[我正在尝试使用与所有浏览器兼容的库 XRegExp ( http://xregexp.com/](http://xregexp.com/) )制作等效函数，但我不知道如何编写 Unicode 模式，因此 XRegExp 在 IE 中工作。

失败的尝试之一：

```
 XRegExp.replace(name,'\\u0300-\\u036F',''); 
```

我怎样才能建立这种模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:00:45.650

作为`XRegExp.replace`方法的第二个参数提供的值应该是正则表达式对象，而不是字符串。正则表达式可以由`XRegExp`或本地`RegExp`构造函数构建。因此，以下两行是等价的：

```
name = name.replace(/[\u0300-\u036F]/g, '');
// Is equivalent to:
name = XRegExp.replace(name, /[\u0300-\u036F]/g, ''); 
```

但是，您编写的以下行无效：

`var = new RegExp patternA ("[\\u0300-\\u036F]", "g");`

相反，它应该是：

`var patternA = new RegExp ("[\\u0300-\\u036F]", "g");`

我不知道这是否是您问题的根源，但也许。作为记录，IE 的 Unicode 支持与其他浏览器一样好或更好。

XRegExp 可以让您通过名称来识别您的块，而不是使用幻数。`XRegExp('[\\u0300-\\u036F]')`并且`XRegExp('\\p{InCombiningDiacriticalMarks}')`完全等价。但是，该块中的标记是所有组合标记的一小部分。您可能实际上想要匹配类似`XRegExp('\\p{M}')`. 但是，请注意，像您正在做的那样简单地删除标记并不是删除变音符号的安全方法。通常，您尝试做的是一个坏主意，应该避免，因为它通常会导致错误或难以理解的结果。

# php - 自定义创建的小部件的 phtml 文件中的 Magento 联系表单

> ID：12491741
> 
> 赞同：1
> 
> 时间：2012-09-19T09:15:56.883
> 
> 标签：php, magento

我正在为 Magento 开发一个小部件，在这个小部件中我需要加载 magento 联系表格。我尝试了几种选择，但似乎都没有。

小部件位于

```
app/
   code/
       local/
         CompanyName/
              WidgetName/ 
```

phtml文件位于

```
app/
   design/
      frontend/
          default/
             default/
                 template/
                     templatename/
                           templatefile1.pthml
                           templatefile2.pthml
                           templatefile3.phtml 
```

要加载我在 templatefile3.phtml 中添加的 magento 联系表

```
<?php echo $this->getChildHtml('contactForm') ?> 
```

但它没有显示出来，即使在将 xml 添加到 2 个文件之后，我已经将此行添加到 app/design/frontend/base/default/layout/catalog.xml 中，就在下面`<reference name="content">`

```
<block type="core/template" name="contactForm" form_action="/contacts/index/post" template="contacts/form.phtml"/> 
```

并将此代码添加到 app/design/frontend/base/default/layout/default.xml （该文件甚至不存在）

```
<default>
<cms_page>
    <reference name="content">
        <block type="core/template" name="contactForm" as="contactForm" template="contacts/form.phtml">
            <action method='setBlockId'><block_id>contactForm</block_id></action>
        </block>
    </reference>
</cms_page> 
```

我的想法是我没有将 xml 放入正确的文件中，但我不知道要使用其他文件，并且在互联网上找不到除这两个之外的任何其他提示。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:48:47.553

您可以使用 CMS 内容框内的 CMS 标签将联系表单添加到任何 CMS 页面：

```
{{block type="core/template" name="contactForm" template="contacts/form.phtml"}} 
```

您可以创建一个新页面，然后插入该代码段以在此新页面上显示联系表单。

您还可以复制 form.phtml 并根据需要对其进行修改，并更新标记代码以使用新模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T14:58:27.227

请使用以下功能在模板内显示。

```
 <?php echo $this->getLayout()->createBlock("Magento\Framework\View\Element\Template")->setTemplate("Magento_Contact::form.phtml")->toHtml(); ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T16:11:40.580

您不能只创建一个 default.xml - 要让 Magento 知道存在布局 xml 文件，您必须通过并创建一个模块并指定布局文件的位置。这是一个非常冗长的尝试来实现你所需要的东西。

`<cms_page>`另外我相信不支持手柄。引用 CMS 页面中的块最好通过将您的 xml 放在该 CMS 页面的“设计”选项卡下的布局更新部分中来完成。

因此，将联系表单放入 CMS 页面是相当直接的——再次使用布局更新工具。只需输入以下xml...

```
<reference name="content">
    <block type="core/template" name="contactForm" template="contacts/form.phtml"/>
</reference> 
```

请注意，您不需要布局句柄 - Magento 当然已经知道您要插入内容的特定 CMS 页面，因为这是该页面的布局更新。所以在上面你只是引用了你想要添加到的结构块（在这种情况下是内容）并告诉 Magento 添加 contactForm 块及其关联的模板位置。

我以前在一个网站上使用过这种方法。您可能会发现，一旦您将联系人表单调用到您的 CMS 页面中，并且尽管在浏览器中成功显示，表单实际上并没有发布。事实上，该表格仅在使用预期页面 yoursite.com/contacts 时才会发送

简单的修复。创建文件**app/design/frontend/YOUR-PACKAGE/YOUR-THEME/template/contacts/form.phtml**并将所需内容从默认 form.phtml 复制到其中。

将 form.phtml 文件底部的脚本更改为：

```
<script type="text/javascript">
    var contactForm = new VarienForm('contactForm', true);
</script> 
```

至：

```
<script type="text/javascript">
    elem = $("contactForm");
    elem.writeAttribute('action', '/contacts/index/post');
</script> 
```

您的 CMS 页面联系表现在将根据需要发布。

**就像一个补充（你可能会也可能不会觉得这很有用）。**

我需要我的 CMS 页面上的联系表格与出现在联系人上的标准表格不同。使用上面的方法，这也很简单。

复制文件**app/design/frontend/YOUR-PACKAGE/YOUR-THEME/template/contacts/form.phtml**并重命名为**app/design/frontend/YOUR-PACKAGE/YOUR-THEME/template/contacts/customForm.phtml** - 然后进行所需的修改，例如不同的字段等...

现在在您希望它出现的 CMS 页面的布局更新中，只需添加以下 xml：

```
<reference name="content">
    <block type="core/template" name="customContactForm" template="contacts/customForm.phtml"/>
</reference> 
```

就是这样。

注意块名称是如何改变的——块名称实际上可以是任何东西——Magento 不在乎你怎么称呼它，但我显然会推荐一些合乎逻辑的东西！

# c# - FILE 声明的 C# 等效项

> ID：12491742
> 
> 赞同：3
> 
> 时间：2012-09-19T09:16:03.800
> 
> 标签：c#, c++, file, c++builder

> **可能重复：**
> [更改文件扩展名 c#](https://stackoverflow.com/questions/5259961/change-file-extension-c-sharp)

下面的代码是用 c++ 编写的，我将如何在 c# 中表示它？

```
FILE fp = fopen(ChangeFileExt(Application.ExeName, ".DAT").c_str(), "w"); 
```

与此主题相关的另一个问题是：

c# 中的等价物如下：

```
fputs((thisstring.CommaText + "\n").c_str(), fp); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T09:18:27.300

怎么样：

```
FileStream fs = File.OpenWrite(Path.ChangeExtension(Application.ExeName, "DAT")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T09:19:31.813

您可以根据 EXE 名称打开（创建）一个 FileStream：

```
FileStream fs = File.Create(
        Path.ChangeExtension(Application.ExeName, "dat")); 
```

或者 TextWriter 更接近 C/C++ `FILE`：

```
StreamWriter writer = File.CreateText(
        Path.ChangeExtension(Application.ExeName, "dat")); 
```

但请注意，普通用户禁止写入 ProgramFiles 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:19:59.663

还没有编译它，但这可能会给你一个想法。

```
string appName = Assembly.GetExecutingAssembly().Location;
FileStream s = File.Open(Path.ChangeExtension(appName , ".DAT"), FileMode.OpenOrCreate); 
```

# localhost - localhost 不指向 127.0.0.1

> ID：12491750
> 
> 赞同：4
> 
> 时间：2012-09-19T09:16:28.707
> 
> 标签：localhost, hosts

当我`ping localhost`，答案是：

```
alsotang@alsotang-laptop:~$ ping localhost
PING localhost (61.139.8.100) 56(84) bytes of data. 
```

但该`hosts`文件有一条记录`127.0.0.1<feff> localhost`

我该如何解决？

ps：我的系统是Ubuntu 10.04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-28T20:30:53.080

如果有人在您的 DNS 服务器上犯了错误，这可能会导致问题。试试`nslookup localhost`。如果有 localhost 的 DNS 服务器条目（127.0.0.1 除外），请联系服务器管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:29:01.153

您需要检查您的主机文件。

```
 127.0.0.1 localhost 
```

请执行下列操作：

```
 Go to ->windows->system32->etc->host
    remove-> ::1 localhost
    set-> 127.0.0.1 localhost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-03T05:10:48.807

在 linux 和 max 平台上，确保你的 hosts 文件有这样的内容。您可以尝试重新启动编辑器，或重新启动系统。

```
127.0.0.1       localhost
::1             localhost 
```

这是一个 DNS 问题。如需更多帮助，您可以参考以下资源

1.  [虚拟主机](https://vitux.com/linux-hosts-file/)
2.  [特定于窗口](https://gist.github.com/zenorocha/18b10a14b2deb214dc4ce43a2d2e2992)
3.  [关于 DNS 的博客](https://blog.catchpoint.com/2014/07/01/dns-lookup-domain-name-ip-address/)

# android - 如何将图像从图库加载到意图

> ID：12491752
> 
> 赞同：0
> 
> 时间：2012-09-19T09:16:34.287
> 
> 标签：android, image-processing, android-gallery

我正在尝试从相机或画廊加载图像（不是 URL）并将其保存到全局类。（目前我正在尝试获取图像，尚未定义类）。

所以我认为相机正确返回图像，并将其放入捆绑包中，如果可能的话，我喜欢对画廊使用相同的方法。

所以我有：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK){
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");

    }
} 
```

而这两个选择，显然我在画廊做错了什么：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    switch(arg2){
    case 0:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, cameraData);
        break;
    case 1:

        Intent intent = new Intent( Intent.ACTION_GET_CONTENT );
        intent.setType( "image/*" );

        //i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(intent, 10); 
        break;
    } 
```

我收到失败的结果：资源上的空指针异常：dat=content://media/external/images/media/23

所以我想我做错了什么。

Idea is similar to behavior seen in Instagram, take photo or select existing one, and when selected it should be stored in some singletone object, as I'll have 3 more options that can be selected before image is shown again within my app.

我不确定这是否是处理图像的最佳方式，所以这里也欢迎任何建议。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:32:30.367

onActivityResult，试试这个代码。

```
InputStream in = getContentResolver().openInputStream(data.getData());
// get picture size.
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream(in, null, options);
in.close();
// resize the picture for memory.
int width = options.outWidth / displayWidth + 1;
int height = options.outHeight / displayHeight + 1;
int sampleSize = Math.max(width, height);
options.inSampleSize = sampleSize;
options.inJustDecodeBounds = false;
in = getContentResolver().openInputStream(data.getData());
// convert to bitmap with declared size.
Bitmap bitmap = BitmapFactory.decodeStream(in, null, options);
in.close(); 
```

# regex - 在regexp_replace的greenplum中将十六进制转换为utf8

> ID：12491753
> 
> 赞同：-1
> 
> 时间：2012-09-19T09:16:37.650
> 
> 标签：regex, postgresql, hex, greenplum

我的表中有包含十六进制值的字符串，例如`\ffffffc4`. 一个例子如下：

```
Urz\ffffffc4\ffffff85dzenie zgodne ze standardem High Definition Audio 
```

以下代码可以将十六进制转换为 UTF8：

```
select chr(x'c4'::int) 
```

它返回`Ä`，但是当我尝试使用 regexp_replace 时，我遇到了问题。我尝试了以下方法：

```
select regexp_replace(sal_input, E'\\f{6}(..)',convert(E'\\1','xyz','UTF8'),'g') 
```

其中 XYZ 是 8.2 中提供的各种源编码，但我得到的只是十六进制值。

关于如何在里面使用 chr 函数的任何想法`regexp_replace`？

使用的版本：x86_64-unknown-linux-gnu 上的 PostgreSQL 8.2.15 (Greenplum Database 4.1.1.1 build 1)

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:15:22.033

您误解了评估的顺序。的第二个参数`regexp_replace`不是每次替换 '\1' 时调用的回调。

发生的情况是您的`convert`调用*首先*在字面值上进行评估`\1`，然后将该结果传递给`regexp_replace`.

无论如何，由于更严格的转换规则，SQL 甚至不会在现代 PostgreSQL 上进行评估，因为`'\1'`它不是有效的`bytea`文字。

在不太古老的 Pg 版本中，可能可以使用`regexp_split_to_table`,`chr`和`string_agg`. 在 8.2 中，我认为您将使用 PL。我会加载`PL/Perl`并编写一个简单的 Perl 函数来完成它。很可能在 PL/PgSQL 中实现，但我怀疑任何具有 8.2 中可用功能的实现都会冗长且缓慢。我很想被证明是错的。

# objective-c - 在 OSX 应用程序中为复选框创建 if 语句

> ID：12491755
> 
> 赞同：-1
> 
> 时间：2012-09-19T09:16:53.090
> 
> 标签：objective-c, xcode, checkbox, preferences

我正在尝试在我的 OSX 应用程序的欢迎窗口中添加一个工作复选框。我已经在 Interface builder 中将复选框添加到应用程序中。

如果有人可以帮助我为 OSX 项目中的 CHECKBOX 编写 IF 语句，我将不胜感激。

我需要在打开应用程序（已经完成）时选中欢迎屏幕类型窗口上的复选框。当用户取消选中该复选框时，当再次运行应用程序时，不应出现欢迎屏幕。

我已经整理好写入和获取偏好，我只需要编写正确的 if 语句，但我不能完全正确。

我不想要指向 UIButton 的东西（即 IOS！）的链接，也不想要指向 iPhone 教程等的链接。

我需要 OSX 编码方面的帮助！请！将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:02:59.463

使用[Cocoa 绑定](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html)。

将复选框的值绑定绑定到共享用户默认控制器上的某个键。存储简单首选项的逻辑位置是`NSUserDefaults`.

![复选框绑定图示](../Images/05586935bf8186b76645b6d7014a3bde.png)

# php - 取消设置 cookie php

> ID：12491756
> 
> 赞同：12
> 
> 时间：2012-09-19T09:16:54.597
> 
> 标签：php, cookies

我有在登录检查正常时设置的代码：

```
if((isset($_POST["remember_me"]))&&($_POST["remember_me"]==1))
    {
    setcookie('email', $username, time()+3600);
    setcookie('pass', $pass, time()+3600);
    } 
```

现在，当我单击注销链接（logout.php）时，我这样做了：

```
<?php session_start();
setcookie("email", '', 1, "");
setcookie("pass", '', 1, "");
$_SESSION["login"] = "";
header("location: aforum/enter_furom.php");
?> 
```

我没有使用销毁会话，因为我不想销毁所有会话……现在销毁会话工作正常……但是当我尝试取消设置 cookie 时，浏览器（所有浏览器：资源管理器、chrome、firefox , mozilla) 给我一个错误，说*新的 cookie 无法设置*……有什么帮助取消设置上述 cookie 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T09:20:34.430

要么使用超全局`_COOKIE`变量：

```
unset($_COOKIE['mycookiename']); 
```

或**仅**`setcookie()`使用cookie 名称调用

 **```
setcookie('mycookiename'); 
```

要在注销时重置 cookie，请使用：

```
setcookie('pass');
setcookie('email'); 
```

为您登录检查：

```
if(
  isset($_POST["remember_me"]) &&
  $_POST["remember_me"]==1  &&
  $_COOKIE['pass'] != NULL &&
  $_COOKIE['email'] != NULL &&
) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T09:40:36.630

```
setcookie('cookiename', '', time()-3600); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-24T08:15:51.273

在您的浏览器中检查 cookie 运行的目录。并通过指定 cookie 的路径来取消设置。就像在示例中一样，如果 cookie 目录是`/aforum/`

```
setcookie ("email","",time()-1,"/aforum/","http:// yourdomain.com"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-12T07:24:32.743

只需将 cookie 的值设置`false`为即可取消设置，

```
setcookie('cookiename', false); 
```

这是最简单的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T09:39:12.717

要在 PHP 中取消设置 cookie，只需将它们的到期时间设置为过去的某个时间。例如：

```
$expire = time() - 300;
setcookie("email", '', $expire);
setcookie("pass", '', $expire); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-11T05:09:13.980

尝试这个

```
 setcookie ("email", "", time() - 3600);
    setcookie ("pass", "", time() - 3600); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-09T16:02:57.307

至少在 Chrome 和 IE8+ 中，以下内容将从浏览器中删除 cookie。但是，在重新加载页面之前，它不会反映在`$_COOKIE`数组中。

`setcookie('cookiename','',0,'/',$cookieDomain)`

您可以在这里省略一些参数，但重要的是您设置了一个空字符串，这会从浏览器中删除 cookie。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T09:42:09.143

您需要将过期时间设置为过去，例如

```
setcookie('email', '', time()-3600); 
```

此外，您应该`Absolute URI`为您的`header('Location:' ....)`.**

# jquery - 如何在 jquery 中允许通配符或其他验证

> ID：12491763
> 
> 赞同：0
> 
> 时间：2012-09-19T09:17:26.663
> 
> 标签：jquery, jquery-validate

我有一个输入文件，我正在使用 jquery 进行验证

我正在尝试允许它使用通配符或一些验证，例如允许 10 位数字。

当用户输入 * 作为输入时，应该没有其他验证。如果用户没有输入 * 还有其他应该工作

我创建了一个方法

```
jQuery.validator.addMethod("exactlength", function(value, element, param) {
    return this.optional(element) || value.length == param;
}); 
```

以太 * 或固定长度的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:52:37.193

您可以使用`string.Match`JavaScript 正则表达式：

[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

# unit-testing - 依赖注入测试单元

> ID：12491764
> 
> 赞同：0
> 
> 时间：2012-09-19T09:17:31.547
> 
> 标签：unit-testing, testing, symfony, symfony-2.1

我在[这里](https://gist.github.com/3249173)使用这个例子来做我的 DependencyInjection 测试单元，但是，当我测试时，我得到以下错误：

```
Myapp\MyBundle\Tests\DependencyInjection\MybundleExtensionTest::test Load
Argument 1 passed to Myapp\MyBundle\DependencyInjection\Configuration::buil
dPathNode() must be an instance of Myapp\MyBundle\DependencyInjection\NodeD
efinition, instance of Symfony\Component\Config\Definition\Builder\ArrayNodeDefi
nition given, called in E:\wamp\www\testingUnit\src\Myapp\MyBundle\Dependen
cyInjection\Configuration.php on line 33 and defined 
```

DependencyInjection/MyappMybundleExtensions.php

```
<?php
namespace Myapp\Mybundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;
use Symfony\Component\Config\Definition\Processor;

class MybundleExtension extends Extension
{
/**
 * Build the extension services
 *
 * @param array $configs
 * @param ContainerBuilder $container
 */

public function load(array $configs, ContainerBuilder $container)
{
    $processor = new Processor();
    $configuration = new Configuration();

    $config = $this->processConfiguration($configuration, $configs);

    $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__ . '/../Resources/config'));
    $loader->load('file.yml');

    $config = $processor->processConfiguration($configuration, $configs);

    $container->setParameter('FashionWeb\ProductBundle\Controller\FamilyController::showFamilyAction', $config['action']);
}

} 
```

测试/依赖注入/MyappMyBundleExtensionsTest.php

```
 namespace Myapp\Mybundle\Tests\DependencyInjection;

  use Symfony\Component\DependencyInjection\ContainerBuilder;

  class Myapp\MybundleExtensionTest extends \PHPUnit_Framework_TestCase
 {
public function testLoad()
{

    $container = new ContainerBuilder();

    $extension = new MyappMybundleExtension();

    $extension->load(array(), $container);

    $this->assertEquals('FashionWeb\ProductBundle\Controller\FamilyController::showFamilyAction', $container->getParameter('myapp_mybundle.action'), sprintf('%s parameter is correct', 'myapp_mybundle.action'));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:35:15.033

您`use Symfony\Component\Config\Definition\Builder\NodeDefinition;`的 Configuration.php 文件中有吗？

错误似乎是由于缺少 use 语句引起的。

# actionscript-3 - 在 CandlestickSeries LineSeries 上绘图使蜡烛变窄

> ID：12491769
> 
> 赞同：0
> 
> 时间：2012-09-19T09:17:49.007
> 
> 标签：actionscript-3, apache-flex, charts, flex4.5, candlestick-chart

我正在使用 Flex 4.5。在我的应用程序中，我有一个带有基本 CandlestickSeries 的 CandlestickChart。我让用户能够通过向 CandleStickChart 添加 LineSeries 来在蜡烛图顶部添加折线图，如 adobe 的文档中所述：[here](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7c4f.html)

我的问题是，当添加线条时，蜡烛的形状会变窄。此外，添加的每一行都使蜡烛变窄。

我环顾四周，在 adobe 的论坛中找到了这个主题：[“LineSeries 的 CandlestickChart 问题”](http://forums.adobe.com/message/4095074)，它描述了完全相同的问题。

不幸的是，该线程仍未得到答复。

有谁知道这个问题的解决方案？

提前致谢， 拉维德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:34:32.713

我知道这个答案有点晚了，但如果它对其他人有帮助，这就是我所做的。（它也没有经过彻底的测试）

创建一个扩展 CandleStickChart 类的类，并简单地覆盖“applySeriesSet”函数，如下所示：

```
override protected function applySeriesSet(seriesSet:Array /* of Series */,
                                               transform:DataTransform):Array /* of Series */
    {
        // filter out the non-candlestick series
        var filteredSeriesSet:Array = new Array();
        for each(var series:Series in seriesSet){
            if(series is CandlestickSeries) filteredSeriesSet.push(series);
        }

        // call the CandlestickChart applySeriesSet function with the filtered set, ignore return value
        super.applySeriesSet(filteredSeriesSet, transform);

        // do the code that the CartesianChart applySeriesSet function would have done, but with the unfiltered seriesSet 
        // would have preferred to do something like super.super.applySeriesSet(seriesSet, transform);
        var n:int = seriesSet.length;
        for (var i:int = 0; i < n; i++)
        {
            var newSeries:IChartElement = seriesSet[i];
            if (newSeries is Series)
                customizeSeries(Series(seriesSet[i]), i);
        }
        return seriesSet;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:38:43.037

好吧，我发现的解决方案不是很好，更好的解决方案仍然值得赞赏，但对于那些有同样问题的人来说，这个解决方案对我有用：

出现问题是因为蜡烛的默认项目渲染器使用项目的宽度来计算蜡烛的大小，这是有意义的。问题在于，当您添加另一个系列时，会出现错误，并且在更改蜡烛之前更改了项目的宽度。

我的解决方案是创建默认项目渲染器的副本，并根据图表的宽度和您希望放置的蜡烛数量绘制蜡烛（因此您不使用项目的宽度）。

它解决了这个问题，但如果你使用工具提示功能，它会弄乱它相对于蜡烛的位置。

# c# - 从另一个集合中访问结构集合属性

> ID：12491771
> 
> 赞同：4
> 
> 时间：2012-09-19T09:17:49.323
> 
> 标签：c#, collections

我有一个需要存储在集合中的结构。该结构有一个返回字典的属性。

```
public struct Item
{
    private IDictionary<string, string> values;
    public IDictionary<string, string> Values
    {
        get
        {
            return this.values ?? (this.values = new Dictionary<string, string>());
        }
    }
}

public class ItemCollection : Collection<Item> {} 
```

在测试时，我发现如果我将项目添加到集合中然后尝试访问字典，则 structs values 属性永远不会更新。

```
 var collection = new ItemCollection { new Item() }; // pre-loaded with an item
 collection[0].Values.Add("myKey", "myValue");
 Trace.WriteLine(collection[0].Values["myKey"]); // KeyNotFoundException here 
```

但是，如果我先加载该项目，然后将其添加到集合中，则会保留值字段。

```
 var collection = new ItemCollection();
 var item = new Item();
 item.Values.Add("myKey", "myValue");
 collection.Add(item);
 Trace.WriteLine(collection[0].Values["myKey"]); // ok 
```

我已经确定结构是这种类型的错误选项，并且在使用类时不会出现问题，但我很好奇这两种方法之间有什么不同。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:31:12.260

将您的结构更改为一个类：

```
public class Item {} 
```

现在我对内部结构不太熟悉，但结构是值类型，类是引用类型，我相信其中有逻辑可以解释为什么在运行第一个代码示例时会出现异常。

我希望有人可以介入给你一个更彻底的答案，但现在，只需将结构更改为一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:36:25.510

“项目”是价值项目。这意味着，如果您访问该集合，则会制作一个副本。所有操作都在该副本上完成

```
 collection[0].Values.Add("myKey", "myValue"); 
```

这里对第一项进行了复制，然后 Value get 访问器创建了一个新实例，该实例存储在副本中，然后添加了该项。然后副本被销毁。

一种解决方法是在创建结构时直接创建 Values 字典

```
public struct Item
{
    private IDictionary<string, string> values = new Dictionary<string, string>();
    public IDictionary<string, string> Values
    {
        get
        {
            return this.values;
        }
    }
} 
```

如果您访问该集合，则会制作一份副本。但是此副本包含对与原始字典相同的值字典的引用。所以原来的字典被修改了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:40:06.540

如前所述，更改`struct Item`为`class Item`. 当您使用`struct`时，表达式`collection[0]`不会返回对在中创建的对象的引用，`new ItemCollection { new Item() }`而是创建它的副本并将其提供给您。

# java - 为什么从远程机器访问时 request.getRemoteAddr().equals("127.0.0.1")

> ID：12491773
> 
> 赞同：5
> 
> 时间：2012-09-19T09:18:07.753
> 
> 标签：java, security, servlets, httprequest

我有一个在 Tomcat 中运行的 Java servlet 应用程序，出于安全原因，我只想能够从机器本身（或者我自己的电脑）运行一个管理命令。因此，为了强制执行此操作，我检查了收到的 HttpServletRequest 的远程地址，但**即使请求不是来自本地主机，它也始终返回 127.0.0.1**

为什么会这样，我可以修复它还是有另一种方法可以仅从服务器运行我的管理命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:42:49.580

首先检查请求是否具有“X-Forwarded-For”标头。如果设置了标头，则其中的第一个 IP 应该是您要查找的 IP。如果标头为空`request.getRemoteAddr()`，则应返回正确的 IP。

'X-Forwarded-For' 的 Wiki：[http ://en.wikipedia.org/wiki/X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)

请注意，您不能 100% 确定您获得了这样的正确 IP，因为转发实例不会强制设置“X-Forwarded-For”标头。

# android - 在异步方法中使用 Tesseract 代码

> ID：12491779
> 
> 赞同：3
> 
> 时间：2012-09-19T09:18:53.400
> 
> 标签：android, asynchronous, xamarin.android, tesseract

我正在为 Android 构建一个在异步调用中使用 Tesseract 库的应用程序。执行 OCR 的方法效果很好，直到我在不同的线程上调用它。我得到的例外是：

> *1: java.Lang.Unsatisfiedlinkerror: Library opencv_core not found; 试过 [/vendor/lib/libopencv_core.so, /system/lib/libopencv_core.so]
> 
> 2：System.TypeInitializationException：Emgu.CV.CvInvoke 的类型初始化程序引发了异常*

我正在使用的代码：

```
protected override void OnStart()
{
    base.OnStart();
    ImageView testimage = FindViewById<ImageView>(Resource.Id.TestImage);
    testimage.SetImageBitmap(ScanImage);

    ThreadPool.QueueUserWorkItem(state => {
        PerformOCR();
    });
}

protected void PerformOCR() //object state
{
    //Get the tesseract directory
    Java.IO.File myDir = Android.OS.Environment.ExternalStorageDirectory;
    Tesseract _ocr = new Tesseract(myDir.ToString() + "/tesseract/", "eng", Tesseract.OcrEngineMode.OEM_TESSERACT_CUBE_COMBINED);

    //Image optimization
    Image<Gray, Byte> passport = new Image<Gray, Byte>(ScanImage);
    Image<Gray, float> sobel = passport.Sobel(1, 0, 5);
    sobel.Add(passport.Sobel(0, 1, 5));
    passport = passport.Add(sobel.Convert<Gray, byte>());           

    _ocr.Recognize(passport);
    string text = _ocr.GetText();
    RunOnUiThread(() => SpecificationsText.Text = text); 
} 
```

OCR 中使用的图像存储在静态类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:54:50.060

好的，我已经解决了我自己的问题。

由于某种原因，无法在异步方法中完成 tesseract 初始化，因此通过从方法调用中删除初始化并在其他地方进行，我的问题得到了解决。

```
protected override void OnStart()
{
    base.OnStart();
    ImageView testimage = FindViewById<ImageView>(Resource.Id.TestImage);
    testimage.SetImageBitmap(ScanImage);

    //Get the tesseract directory
    Java.IO.File myDir = Android.OS.Environment.ExternalStorageDirectory;
    Tesseract _ocr = new Tesseract(myDir.ToString() + "/tesseract/", "eng", Tesseract.OcrEngineMode.OEM_TESSERACT_CUBE_COMBINED);

    ThreadPool.QueueUserWorkItem(state => {
        PerformOCR(_ocr);
    });
}

protected void PerformOCR(Tesseract _ocr)
{
    //Image optimization
    Image<Gray, Byte> passport = new Image<Gray, Byte>(ScanImage);
    Image<Gray, float> sobel = passport.Sobel(1, 0, 5);
    sobel.Add(passport.Sobel(0, 1, 5));
    passport = passport.Add(sobel.Convert<Gray, byte>());           

    _ocr.Recognize(passport);
    string text = _ocr.GetText();
    RunOnUiThread(() => SpecificationsText.Text = text); 
} 
```

# php - 如何为 Magento 中的所有客户制作全球通讯录？

> ID：12491780
> 
> 赞同：2
> 
> 时间：2012-09-19T09:18:53.057
> 
> 标签：php, magento

我正在调查是否有可能在我的 Magento 1.6.1 社区商店中为所有客户预先填充一些固定送货地址的地址簿？因此，onstepcheckout 中的地址选择框会为所有客户填充？

当然有可能，但我不知道从哪里开始？非常感谢任何指向资源的链接或可能的扩展。

非常感谢，伊斯梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:12:23.520

这必须通过创建一个模块来完成。这样的事情是否已经存在，我不知道，但我对此表示怀疑。

您真正需要做的就是覆盖运输模板，或者可能是生成选择 html 的块。

我还没有研究它是如何完成的。如果您需要更多帮助，我很乐意提供帮助，但这些是您必须做的一般指导方针。我假设您已经知道如何创建模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:41:33.867

好，朋友们！

我为 Magento 做了一个自定义扩展。如果你想要它，你可以在下面发表评论。

最好的，伊斯梅尔

# c# - out参数有问题

> ID：12491781
> 
> 赞同：5
> 
> 时间：2012-09-19T09:18:58.407
> 
> 标签：c#, .net

我在调用我所做的方法时遇到问题。

我调用的方法如下

```
public bool GetValue(string column, out object result)
{
    result = null;
    // values is a Dictionary<string, object>
    if (this._values.ContainsKey(column))
    {
        result = Convert.ChangeType(this._values[column], result.GetType());
        return true;
    }
    return false;
} 
```

我正在使用此代码调用该方法，但出现编译器错误

```
int age;
a.GetValue("age", out age as object) 
```

> ref 或 out 参数必须是可赋值变量

其他人有这个问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T09:19:59.273

该变量必须完全属于方法签名中指定的类型。您不能在通话中使用它。

该表达式`age as object`不是一个可赋值的值，因为它是一个表达式，而不是一个存储位置。例如，您不能在作业的左侧使用它：

```
age as object = 5; // error 
```

如果要避免强制转换，可以尝试使用通用方法：

```
public bool GetValue<T>(string column, out T result)
{
    result = default(T);
    // values is a Dictionary<string, object>
    if (this._values.ContainsKey(column))
    {
        result = (T)Convert.ChangeType(this._values[column], typeof(T));
        return true;
    }
    return false;
} 
```

当然，应该在适当的地方插入一些错误检查）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:58:33.250

试试这个

```
public bool GetValue<T>(string column, out T result)
{
    result = default(T);
    // values is a Dictionary<string, object>
    if (this._values.ContainsKey(column))
    {
        result = (T)Convert.ChangeType(this._values[column], typeof(T));
        return true;
    }
    return false;
} 
```

示例调用

```
int age;
a.GetValue<int>("age", out age); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:21:24.227

试试这个

```
object age; 
a.GetValue("age", out age);

int iage = (int)age; 
```

# xpath - 来自可迭代节点的子字符串

> ID：12491788
> 
> 赞同：3
> 
> 时间：2012-09-19T09:19:22.213
> 
> 标签：xpath, xpath-2.0

请考虑这个示例文件：[http ://www.w3schools.com/dom/books.xml](http://www.w3schools.com/dom/books.xml)

这个 XPath 表达式`//title/text()`，返回：

> 日常意大利语
> Harry Potter
> XQuery 开始
> 学习 XML

现在我只想要名字，然后尝试：`tokenize(//title/text(),' ')[1]`，它返回：

> 过多的物品

OTOH`tokenize((//title/text())[1],' ')[1]`返回第一个节点的名字。

如何在迭代节点时使用 XPath 获取子字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:44:39.410

**使用**：

```
//text()/tokenize(.,' ')[1] 
```

这将生成 XML 文档中每个文本节点的第一个“单词”序列。

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:sequence select="//text()/tokenize(.,' ')[1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
    <a>Everyday Italian</a>
    <b>Harry Potter</b>
    <c>XQuery Kick Start</c>
    <d>Learning XML</d>
</t> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
 Everyday 
 Harry 
 XQuery 
 Learning 
```

上面包括一些只有空格的文本节点。

**如果要忽略任何纯空格文本节点，请将 XPath 表达式更改为**：

```
//text()[normalize-space()]/tokenize(.,' ')[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:27:55.993

**试试这个**

**1\. 要获取除最后一个以外的所有部分，请使用以下命令：**

```
//title/string-join(tokenize(.,'\s+')[position() ne last()],' ') 
```

或者

**2.只得到第一个使用这个：**

```
//title/string-join(tokenize(.,'\s+')[position() eq 1],' ') 
```

**希望这可以帮助。**

# c# - SGen 不使用父程序集中的 FileVersion

> ID：12491791
> 
> 赞同：1
> 
> 时间：2012-09-19T09:19:22.833
> 
> 标签：c#, .net, sgen

似乎 SGen 不使用父程序集中的文件版本，而是使用 AssemblyVersion。如果您想保持强名称不变并通过 MSI API 兼容补丁发布，这是有问题的。

例如，如果添加了新数据类型，则需要在目标机器上修补生成的 XmlSerializers 程序集。但是 MSI 只查看文件版本（相等）并且什么都不做。

有没有办法指示 SGen 使用源程序集中的文件版本？

例子：

源程序集：

```
 [assembly: AssemblyVersion("2.0.0.0")]
  [assembly: AssemblyFileVersion("35.0.0.0")] 
```

生成的序列化程序程序集将在 PE Header for File 和 Product Version 中获得 2.0.0.0。这是错误的。

作为最后的手段，我会考虑修补生成的程序集的文件版本，但我确实担心如果程序集是强命名的，它将不再加载（尚未尝试过），因为至少以前的 .NET 版本确实创建了包含PE头的完整文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T18:29:36.290

解决这个问题的方法是创建一个包含程序集属性的代码文件，`AssemblyFileVersion`并告诉`sgen`包含该文件。

使用以下代码创建一个名为 XmlSerializersAssemblyInfo.cs 的文件：

```
[assembly:System.Reflection.AssemblyTitleAttribute("title")] 
[assembly:System.Reflection.AssemblyDescriptionAttribute("description")] 
[assembly:System.Reflection.AssemblyCompanyAttribute("company")] 
[assembly:System.Reflection.AssemblyProductAttribute("product")] 
[assembly:System.Reflection.AssemblyFileVersionAttribute("1.2.3.4")] 
```

该`sgen`实用程序允许您使用`/c`如下方式添加编译器开关：

```
sgen.exe" /a:"$(TargetPath)" /f /c:/keyfile:"$(ProjectDir)myApp.snk" /c:"$(ProjectDir)XmlSerializersAssemblyInfo.cs" 
```

将`sgen`命令添加到您的后期构建事件中，瞧！您将获得一个具有所需的和其他程序集属性的`XmlSerializer`DLL 。`AssemblyFileVersion`

# sql-server - 新数据库：它应该区分重音吗？

> ID：12491792
> 
> 赞同：0
> 
> 时间：2012-09-19T09:19:29.980
> 
> 标签：sql-server, sql-server-2008

我正在准备一个新的数据库服务器，我将从现有的大型多语言数据库（主要是英语/法语/西班牙语文本，很少有来自其他语言的特殊字符，例如城市名称）迁移数据。我的问题是：它应该对口音敏感吗？如果搜索在咖啡馆和咖啡馆之间没有区别，用户会很高兴。但作为一名 DBA，我很担心：我从来没有见过一个数据库至少偶尔会遭受坏字符转换的困扰。如果我选择不区分重音，我将如何查询数据库并询问“给我所有标题包含特殊字符的书”？如果我有办法做到这一点，我会很乐意对口音不敏感。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:23:46.440

它应该取决于您的一般用法。

这并不排除您为特定查询更改它

例如

```
declare @t1 table (word nvarchar(50) collate Latin1_General_CI_AI)
declare @t2 table (word nvarchar(50) collate Latin1_General_CI_AS)

insert @t1 values ('cafe'),('restaurant'), ('café')
insert @t2 select * from @t1

select * from @t1 where word like 'cafe' 
select * from @t1 where word like 'cafe' collate Latin1_General_CI_AS
select * from @t1 where word like 'café' 
select * from @t1 where word like 'café' collate Latin1_General_CI_AS

select * from @t2 where word like 'cafe' 
select * from @t2 where word like 'cafe' collate Latin1_General_CI_AI
select * from @t2 where word like 'café' 
select * from @t2 where word like 'café' collate Latin1_General_CI_AI 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:29:17.587

[您可以在选择的时间更改排序规则：](http://msdn.microsoft.com/en-us/library/ms184391.aspx)

```
with t as (
select 'ali' as w union
select 'àli' as w
) 
select *
into #t
from t;

select * from #t
where w  collate Latin1_General_CS_AS_KS_WS like '%à%'

w   
--- 
àli 

select * from #t
where w  collate Traditional_Spanish_ci_ai like '%à%'

w   
--- 
ali 
àli 
```

# button - 在 EXTJS 中添加按钮返回 [object][object]

> ID：12491797
> 
> 赞同：1
> 
> 时间：2012-09-19T09:19:37.323
> 
> 标签：button, extjs, extjs4, extjs-mvc

我有一个控制器，它基本上调用一个显示几秒钟的消息窗口。我正在尝试向此消息窗口添加一个按钮，但它返回 [object][object]。

控制器

```
success : function(response) {

                this.mWin = Ext.create('App.view.GenMessage');
                this.mWin.addMessage(true, LANG.SUCT, LANG.SUCTxt1);
} 
```

看法

```
Ext.define('App.view.GenMessage', {
extend : 'Ext.panel.Panel',
alias : 'widget.genmessage',

initComponent : function() {

    this.msgCt = App.genMsgCt
    this.msgCt.setWidth(300);
},
addMessage : function(status, title, msg) {

    if (status == false) {
        delay = 3000;
    } else {
        delay = 2000;
    }

    Ext.DomHelper.append(this.msgCt, {
        html : this.buildMessageBox(status, title, msg)
    }, true).slideIn('t').pause(delay).ghost("t", {
        remove : false
    });
},

/*
 * buildMessageBox
 */
buildMessageBox : function(status, title, msg) {
    console.log('buildMesssage');

    switch (status) {
        case true :
            var icon = GENHTML.tick;
            break;
        case false :
            var icon = GENHTML.warning;
            break;
    }

    return ['<div class="genMsgDiv">', icon,
                    '<div class="genMsgHd leftMargin">', title,
                    '</div><div class="H3 leftMargin">', msg,
                    '</div></div>'].join('');
} 
```

我所做的是声明一个按钮

```
var button={
id: 'button1',
text :'Button1'
} 
```

然后添加到上面提到的div类并返回

```
['<div class="genMsgDiv">', button].join(); 
```

但是，我在屏幕上看到的是 [object][object] 代替了按钮。谁能告诉我这里做错了什么。这是添加按钮的正确方法吗

编辑

由于我们无法将按钮添加到 div，我尝试做

```
var config = Ext.create(Ext.panel.Panel, {

                itemId : 'GENMSGPANEL',

                height : 150,
                cls : 'msg effect1',

                border : false,
                html : '<div class="genMsgDiv">' + icon +
                    '<div class="genMsgHd leftMargin">'+ title +
                    '</div><div class="H3 leftMargin">'+ msg +
                    '</div></div>',

                items : [{
                    xtype : 'panel',
                    //cls : 'winTitle',

                }, {
                    xtype : 'form',
                    itemId : 'GENMSGFORM',
                    border : false,
                    title : '',
                    buttonAlign : 'center',
                    fieldDefaults : {
                        msgTarget : 'side',
                        labelWidth : 110,
                        size : 30
                    },
                    buttons : [{
                        text : LANG.BTYES,
                        iconCls : 'icon-tick-tb',
                        iconAlign : 'right',
                        cls : 'tip-btn',
                        action : 'genDelete',
                        id : 'BTYES'
                    }, {
                        text : LANG.BTNO,
                        iconCls : 'icon-cross-tb',
                        iconAlign : 'right',
                        cls : 'tip-btn',
                        action : 'notDelete',
                        id : 'BTNO'
                    }]
                }]
            });

    return config; 
```

但是，即使这样也没有返回任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:34:09.867

答案很简单：您不能将 ExtJS 按钮添加到组件的 html 配置属性中。这仅适用于纯 html。ExtJS 对象属于 items 数组。

决定将您的 html 内容放入一个框（组件的 xtype）并将其添加到 items 数组中。然后你可以添加你的按钮。在您的情况下根本不要使用html。

您可以更改/设置任何所需的课程。*请注意，我没有检查您操作 DOM 的方式。*

```
// you may use a layout to align them
items : [
    { 
        xtype: 'box',
        cls : 'msg effect1',
        html : '<div class="genMsgDiv">' + icon +
            '<div class="genMsgHd leftMargin">'+ title +
            '</div><div class="H3 leftMargin">'+ msg +
            '</div></div>'
    },
    {
        xtype : 'panel',
        //cls : 'winTitle',
    },
    ... 
```

# android - 内部 AsyncTask 不更新外部类中的成员变量

> ID：12491798
> 
> 赞同：0
> 
> 时间：2012-09-19T09:19:40.663
> 
> 标签：android, android-asynctask

我有一个应用程序，它在其中一个活动中使用 AsyncTask 从另一个类中调用一个方法，该类连接到数据库以验证用户的登录凭据。Activity EntryActivity 具有三个成员变量，需要使用 AsyncTask 的结果进行更新，即 carerID、firstName 和 surName 。当我第一次运行应用程序时，所有三个变量都为空，但如果我第二次按下登录按钮，变量设置正确并且应用程序运行正常。

在应用程序的第一次运行中没有从 onPostexecute 正确设置三个成员变量是否有原因？

.

```
public class EntryActivity extends NfcBaseActivity{

    private LoginWebservice loginWebservice;
    private static final String TAG = EntryActivity.class.getSimpleName(); 
    private Button login;
    private EditText userName;
    private EditText passwordPin;
    NfcScannerApplication nfcscannerapplication;
    public static final String CUSTOM_QRCODE_ACTION = "com.carefreegroup.QRCODE_ACTION"; 
    private String carerID;
    private String firstName;
    private String surName;
    private boolean isValidated = false;

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.entryscreen); 
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        loginWebservice = new LoginWebservice(this);
        carerID = null;
        firstName = null;
        surName = null;

        userName = (EditText)findViewById(R.id.username);
        passwordPin = (EditText)findViewById(R.id.password);

        login = (Button)findViewById(R.id.buttonlogin);
        login.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                ////////////get user's input///////////

                String compId = "100";
                String theUsername = userName.getText().toString();
                String thePassword = passwordPin.getText().toString();
                String loginType = "1";

                String[] params = new String[]{compId, theUsername, thePassword, loginType};

                //validate user Asynchonously on background thread
                 new AsyncValidateCarer().execute(params);

                Log.e(TAG, "carerid =" + carerID + " firstname = " + firstName + " surnamee = " + surName);
                DateTime now = new DateTime();
                long loginTime = now.getMillis();
                String fullName = firstName +" " + surName;
                Log.e(TAG, "fullname = " + fullName); 

                if(carerID != null){

                ContentValues loginValues = new ContentValues();
                loginValues.putNull(LoginValidate.C_ID_INDEX);
                loginValues.put(LoginValidate.C_CARER_ID, carerID);
                loginValues.put(LoginValidate.C_COMP_ID, compId);
                loginValues.put(LoginValidate.C_CARER_NAME, fullName);
                loginValues.put(LoginValidate.C_PASSWORD, thePassword);
                loginValues.put(LoginValidate.C_DATE_TIME, loginTime);
                nfcscannerapplication.loginValidate.insertIntoCarer(loginValues);

                Toast.makeText(
                        EntryActivity.this,
                        "Carer logged in to System",
                        Toast.LENGTH_LONG).show();

                isValidated = true;

                Intent intent = new Intent(EntryActivity.this,
                        NfcscannerActivity.class);
                intent.setAction(CUSTOM_QRCODE_ACTION);
                startActivity(intent);

                }else{

                    Toast.makeText(
                            EntryActivity.this,
                            "Please check credentials",
                            Toast.LENGTH_LONG).show();

                }
                //////////////validate user/////////////////

            }
        });

        Button changeUser = (Button)findViewById(R.id.buttonchangeuser);
        changeUser.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.e(TAG, "change user button clicked");
                nfcscannerapplication.loginValidate.deleteTableCarer();
                Toast.makeText(
                        EntryActivity.this,
                        "Carer logged out",
                        Toast.LENGTH_LONG).show();
                EntryActivity.this.onCreate(savedInstanceState);
            }
        });

    }//end of onCreate

    private void hideSoftKeyboard() {

        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(passwordPin.getWindowToken(), 0);

    }

    private class AsyncValidateCarer extends AsyncTask<String, Void, ContentValues> {

        @Override
        protected ContentValues doInBackground(String... params) {

            ContentValues cv = null;

            try {
                Log.e(TAG, "inside asynctask");
                cv = loginWebservice.validateCarer(params[0], params[1], params[2], params[3]);
                 if (cv != null){
                     Log.e(TAG, "cv = not null!");
                 }

            } catch (Exception e) {
               e.printStackTrace();
            } 
            return cv;

        }

        @Override
        protected void onPostExecute(ContentValues result) {
            Log.e(TAG, "inside onpostexecute");

            EntryActivity.this.carerID = (String) result.get("carerID"); 
            EntryActivity.this.firstName = (String) result.get("firstname");
            EntryActivity.this.surName = (String) result.get("surname");
        }
    }

} 
```

[更新]

```
private class AsyncValidateCarer extends AsyncTask<String, Void, Void> {

        @Override
        protected Void doInBackground(String... params) {

            ContentValues cv = null;

            try {
                Log.e(TAG, "inside doInBackground");
                cv = loginWebservice.validateCarer(params[0], params[1], params[2], params[3]);
                carerID = (String) cv.get("carerID"); 
                firstName = (String) cv.get("firstname");
                surName = (String) cv.get("surname");
                 if (cv != null){
                     Log.e(TAG, "cv = not null! and exiting doInBackground");
                 }

            } catch (Exception e) {
               e.printStackTrace();
            }
            return null; 

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:33:08.933

AsyncTask 将异步执行，因此您无法保证在“执行”方法调用之后，任务实际上已完成。我的建议是移动“onPostExecute”方法中“执行”调用之后的所有内容（或至少与这些字段相关的内容）。

似乎第一次单击不起作用而第二次起作用的原因是，在第一次“登录”单击和第二次单击之间，您等待 AsyncTask 完成的时间足够长。因此，当您第二次单击时，您会看到第一次执行的结果。请在“onPostExecute”中添加一些“日志”消息以了解发生了什么。

希望能帮助到你：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:23:41.810

```
carerID = null;
firstName = null;
surName = null; 
```

**从方法中**删除上面的 there 语句**`onCreate()`，因为它们已被**初始化为它们的默认值**，因为它们在`Class Scope`和 被称为`Instance Variables.`**

# php - 网络服务 - iphone + php

> ID：12491799
> 
> 赞同：1
> 
> 时间：2012-09-19T09:19:45.683
> 
> 标签：php, iphone, web-services

我想在 php 中创建 web 服务并通过 iphone 的视图调用我已经为此参考了很多。但不能得到正确的结果。请帮我。
你能告诉我xml解析吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:53:51.467

查看本教程，以创建 Web 服务：

如何为 iOS 应用程序编写简单的 PHP/MySQL Web 服务 [http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

然后本教程使用该 Web 服务：

如何编写使用 Web 服务的 iOS 应用程序 [http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)

# c# - Web 应用程序中基于混合字符和整数的标识符最佳实践

> ID：12491800
> 
> 赞同：0
> 
> 时间：2012-09-19T09:19:53.197
> 
> 标签：c#, algorithm, primary-key, primary-key-design

我正在开发一个 Web 应用程序，我需要在其中使用标识符来识别某个页面。

通常我会使用自动增量整数，它与数据库中项目的 ID 有关。

例如： [http ://example.com/item/1](http://example.com/item/1)

但我看到越来越多地使用这样的标识（TinyUrl 和 YouTube）： [http ://example.com/item/1BHYQJh1](http://example.com/item/1BHYQJh1)

我想知道，我应该选择这个解决方案吗？

有什么好处，如果你得到一个非常长的整数，它是否只是为了缩短 ID？

还是要“破解”解决方案，以便人们无法通过将 1 替换为 2 来“猜测”网址。

我真的很感谢最后一个，我想为我的应用程序添加这个额外的安全性。但是有没有人知道有什么代码片段可以做到这一点？

C# 中的示例会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:33:07.677

这不是一个真正的编程问题，但是......

我更喜欢“漂亮”的 URL，而且我并不孤单，对我来说，普通数字比 1BHY 更好......，但 YMMV。

您提到的“猜测”与此无关。如果允许用户访问 /2 则没关系。如果他不被允许，那么基于模糊 URL 的安全性是一个糟糕的选择。如果有人输入错误的值并偶然发现不适合他的页面怎么办。

如果您需要安全，您需要检查当前用户是否被允许访问指定 URL 的页面并采取相应措施。

我不明白“C# 中的示例”是什么意思。这些是 URL，它们不是用 C# 表示的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:02:07.073

您可以使用 Guid.NewGuid() 创建一个“唯一”标识符

[GUID 是否 100% 都是唯一的？](https://stackoverflow.com/questions/39771/is-a-guid-unique-100-of-the-time)

# winforms - 通过 Team Foundation Server 2010 获取特定版本的表单

> ID：12491801
> 
> 赞同：1
> 
> 时间：2012-09-19T09:19:54.273
> 
> 标签：winforms, tfs

我正在公司内部开发一个 WinForms C# 项目。
我们使用 Visual Studio 2010 和 Team Foundation Server 2010 来管理代码版本。

我想恢复表单的一个版本。
我们将表单称为 MyForm。
MyForm 由三个文件组成：

*   MyForm.cs 包含后面的代码。
*   MyForm.Designer.cs 包含 VS2010 在设计 Form 时自动生成的代码。
*   MyForm.resx。

这是变更集的简化历史记录：

*   更改集编号：1587。存档文件：
    *   MyForm.Designer.cs。添加了一个 TextBox 控件。我们将 TextBox 控件称为 txtMyBox。
    *   MyForm.cs。txtMyBox 用于后面的代码。
*   更改集编号：1390。存档文件：
    *   MyForm.cs
*   更改集编号：1299。存档文件：
    *   MyForm.cs
    *   MyForm.Designer.cs
*   ...
*   更改集编号：986。存档文件：
    *   MyForm.cs
    *   MyForm.Designer.cs
    *   MyForm.resx

这是我遵循的程序：

1.  在解决方案资源管理器中右键单击 MyForm.cs 文件。
2.  单击上下文菜单中的“获取特定版本”选项。
3.  选择变更集编号 1390，然后单击“获取”按钮。

然后我尝试在设计器中打开 MyForm 但显示错误。
错误消息告诉我提取已被取消。

我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:50:37.347

你有旧版本的 MyForm.cs（没有文本框）但最新版本的 MyForm.Designer.cs（有文本框）。

你可以做几件事

1.  在包含这两个文件的文件夹上获取特定版本，这会将所有文件恢复为签入变更集 1390 时可用的版本。（如果您有其他文件需要拥有最新版本的)
2.  在 1390 在 MyForm.cs 上获取特定版本，在 1299 在 MyForm.Designer.cs 上获取特定版本

这应该确保两个文件彼此同步并解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T19:41:12.710

这有点旧，但我最近遇到了同样的问题，这是我的解决方法。VS2012 和 TFS2012

删除本地工作区版本，然后获取最新版本。而已。

# java - Jersey/Jaxb 返回字符串列表而不是整数

> ID：12491802
> 
> 赞同：1
> 
> 时间：2012-09-19T09:19:55.840
> 
> 标签：java, javascript, json, jaxb, jersey

这是我的球衣服务返回的课程：

```
@XmlRootElement(name="chart-data")
public class ChartDataDto {
private List<Series> series = new ArrayList<>();

    public ChartDataDto()
    {

    }

    public void putSeries(String name, Integer... series)
    {
        this.series.add(new Series(name, series));
    }

    @XmlElement(name="series")
    public List<Series> getSeries()
    {
        return this.series;
    }

    @XmlRootElement(name="series")
    static class Series
    {
        @XmlElement(name="name")
        public String name;
        @XmlElement(name="values")
        public List<Integer> series;

        public Series()
        {

        }

        public Series(String name, Integer... series)
        {
            this.name = name;

            this.series = Arrays.asList(series);
        }
    }
} 
```

返回的 JSON 字符串例如：

```
{"series":[
    {
        "name":"Series 1",
        "values":["1","2","2","3","3","4","4","5","5","6","6","7","7"]
    },{
        "name":"Series 2",
        "values":["7","7","6","6","5","5","4","4","3","3","2","2","1"]
    }
]} 
```

但我认为正确的 JSON 字符串应该是：

```
{"series":[
    {
        "name":"Series 1",
        "values":[1,2,2,3,3,4,4,5,5,6,6,7,7]
    },{
        "name":"Series 2",
        "values":[7,7,6,6,5,5,4,4,3,3,2,2,1]
    }
]} 
```

那里有什么问题？整数列表的类型错误？错误的注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:30:24.043

使用`Jackson`并且`Gson`您的代码运行良好。

# c++ - 我是否错误地传递了这个二维数组？

> ID：12491806
> 
> 赞同：0
> 
> 时间：2012-09-19T09:20:03.760
> 
> 标签：c++, arrays, pointers, syntax, multidimensional-array

我正在传递函数：

```
fillArrays(arrays); 
```

现在，arrays 是一个二维数组。我这样声明数组：

```
int **arrays = new int*[NUM_OF_ARRAYS];
    arrays[0] = new int[128];
    arrays[1] = new int[512];
    arrays[2] = new int[2048];
    arrays[3] = new int[8192];
    arrays[4] = new int[32768];
    arrays[5] = new int[131072];
    arrays[6] = new int[524288];
    arrays[7] = new int[2097152]; 
```

我是否正确地将数组传递给以下函数？

```
void fillArrays(int **arrays) {
    const int NUM_OF_ARRAYS = 8;
    for(int i = 0;i < NUM_OF_ARRAYS;i++) {
        switch(i) {
        case 0:
            for(int j = 0;j < 128;j++)
                arrays[i][j] = 1 + rand() % 2000;
            break;
        case 1:
            for(int j = 0;j < 512;j++)
                arrays[i][j] = 1 + rand() % 5000;
            break;
        case 2:
            for(int j = 0;j < 2048;j++)
                arrays[i][j] = 1 + rand() % 10000;
            break;
        case 3:
            for(int j = 0;j< 8192;j++)
                arrays[i][j] = 1 + rand() % 30000;
            break;
        case 4:
            for(int j = 0;j < 32768;j++)
                arrays[i][j] = 1 + rand() % 100000;
            break;
        case 5:
            for(int j = 0;j < 131072;j++)
                arrays[i][j] = 1 + rand() % 200000;
            break;
        case 6:
            for(int j = 0;j < 524288;j++)
                arrays[i][j] = 1 + rand() % 1000000;
            break;
        case 7:
            for(int j = 0;j < 2097152;j++)
                arrays[i][j] = 1 + rand() % 30000000;
            break;
        }
    }
} 
```

如果您需要任何进一步的信息，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:48:46.670

我会尝试采取不同的方法并给出一个全面的答案，也许它会更清楚。**该函数将采用与声明的参数的确切类型相匹配的任何变量**。C++ 中的基本数组只是一个常量指针（指向开头，保存其余部分的空间大小）。使用指针通过内存分配存储数组的数组，与 C++ 生成的二维数组并不完全相同（for`datatype arrays[const][const]`和 for生成的汇编代码`**arrays = new datatype[const]`不同）。了解这一点很重要，因为您可以**区分指向指针的指针和 2D C++ 生成的数组**。

为简单起见，**请按原样对待您的参数：指向指针的指针**。如果那是您传递给函数的内容，这是您的情况，那么您将正确的变量传递给正确的参数。**您在函数中处理该参数的方式将决定您是否将其视为 2D 数组**。

我这样回答是因为似乎有人怀疑为什么指向指针的指针被视为二维数组。如果是这样的话，你有理由怀疑。**二维数组只是**对变量所持有的内容的解释，但变量**仍然是指向指针的指针**，并且您对其进行与其他指针变量相同的处理（内存分配和释放、作为参数传递、处理等） ..)。

至于用结构（类）和诸如此类的东西替换它：我相信您这样做是为了通过创建动态多维数组来**更好地理解内存分配和指向**，仅使用 C++ 作为平均值。如果是这样的话，那么我相信我的回答会很好地满足您的需求。否则，有更好抽象的替代方案，可以自动处理内存分配（对于 C++，搜索 STL 容器）。如果你愿意的话，通过按照自己的方式去做，你会增加对“幕后”发生的事情的理解。它是**计算科学**中比现代或未来程序化使用更重要的知识。

希望答案是这样的，您将能够通过了解正在发生的事情来处理类似的情况，这通常是这些情况下语法错误的真正原因。英语不是我的母语；对于可能的语义误用，我提前道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:29:08.987

我认为数组的传递没有任何问题。但我会更关心的是变量的**范围和生命周期。**数组元素应该可以在您的函数内部访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:54:25.967

这是可行的，不可行的。

1.  数组的传递将正常工作。

2.  您还需要用大括号将`for`循环括在块中。`switch``{..}`

完整代码清单：

```
#include <iostream>
using namespace std ;

const int NUM_OF_ARRAYS = 8;
int **arrays = new int*[NUM_OF_ARRAYS];
void fillArrays(int **arrays);

int main(void)
{

   arrays[0] = new int[128];
    arrays[1] = new int[512];
    arrays[2] = new int[2048];
    arrays[3] = new int[8192];
    arrays[4] = new int[32768];
    arrays[5] = new int[131072];
    arrays[6] = new int[524288];
    arrays[7] = new int[2097152];

   fillArrays(arrays);

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
}

void fillArrays(int **arrays) 
{
    const int NUM_OF_ARRAYS = 8;
    for(int i = 0;i < NUM_OF_ARRAYS;i++) 
    {
        switch(i) 
        {
        case 0:
            {
            for(int j = 0;j < 128;j++)
            {
                arrays[i][j] = 1 + rand() % 2000;
                cout<<arrays[i][j]<<"\n";}
            }
            break;

        case 1:
            {
            for(int j = 0;j < 512;j++)
                arrays[i][j] = 1 + rand() % 5000;
            }
            break;

        case 2:
            {
            for(int j = 0;j < 2048;j++)
                arrays[i][j] = 1 + rand() % 10000;
            }
            break;

        case 3:
            {
            for(int j = 0;j< 8192;j++)
                arrays[i][j] = 1 + rand() % 30000;
            }
            break;

        case 4:
            {
            for(int j = 0;j < 32768;j++)
                arrays[i][j] = 1 + rand() % 100000;
            }
            break;

        case 5:
            {
            for(int j = 0;j < 131072;j++)
                arrays[i][j] = 1 + rand() % 200000;
            }
            break;

        case 6:
            {
            for(int j = 0;j < 524288;j++)
                arrays[i][j] = 1 + rand() % 1000000;
            }
            break;

        case 7:
            {
            for(int j = 0;j < 2097152;j++)
                arrays[i][j] = 1 + rand() % 30000000;
            }
            break;

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:38:49.743

您传递数组的方式很好，但是您可以大大缩短您的功能。如果您只需要这些值，您可以简单地执行以下操作：

```
void fillArrays(int **arrays) {

    int divisors[8] = {2000,5000,10000,30000,100000,200000,1000000,30000000};
    int bounds[8] = {128,512,2048,8192,32768,131072,524288,2097152};

    for( int i = 1; i < 7; i++ )
    {
        for(int j = 0; j < bounds[i]; j++ )
            arrays[i][j] = 1 + rand() % divisors[i];
    }
} 
```

# sql-server - 将选择的输出写入表中

> ID：12491809
> 
> 赞同：0
> 
> 时间：2012-09-19T09:20:13.640
> 
> 标签：sql-server

我有这样的声明：

```
 insert into Admin.VersionHistory --do not know what to put here
 select COUNT(*) as cnt
 from membership.members as mm 
 left join aspnet_membership as asp
 on mm.aspnetuserid=asp.userid 
 left join trade.tradesmen as tr 
 on tr.memberid=mm.memberid  
 where asp.isapproved = 0 and tr.ImportDPN IS NOT NULL and tr.importDPN <> '' 
```

它总共给了我 179956。我想把这个总数写到另一个名为的表中`Admin.VersionHistory`，该表具有 id(autoinc)、version(varchar) 和 date(sysdate) 列，

请问我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:25:25.883

您的查询返回一列一行的结果集。它可以插入到某个具有一个整数列的表中。您的目标表不适合这样做，因为它有三列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:23:50.643

```
INSERT INTO Admin.VersionHistory (ColCount, version, Sysdate)
VALUES(  

(SELECT COUNT(*) AS cnt  FROM membership.members AS mm     
lLEFT JOIN aspnet_membership AS asp ON mm.aspnetuserid = asp.userid   
LEFT JOIN trade.tradesmen AS tr ON tr.memberid=mm.memberid   
WHERE   
asp.isapproved = 0 AND   
tr.ImportDPN IS NOT NULL AND   
tr.importDPN <> ''),   
VERSIONVALUE, GETDATE()) 
```

虽然我在 Oracle 中尝试过类似的事情，但我想它在 SQL 中应该不会有太大的不同。

试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:25:35.803

你应该能够做到这一点：

```
INSERT INTO Admin.VersionHistory(ColumnName) 
SELECT COUNT(*)
-- the resut of your query here 
```

# mysql - 将 Access 转换为 mysql 命令

> ID：12491810
> 
> 赞同：0
> 
> 时间：2012-09-19T09:20:20.580
> 
> 标签：mysql

我们的一位客户在他自己的服务器中有一个 Access 数据库，我需要在我自己的服务器中将它导入到带有 mysql 的 linux 服务器。换句话说，我需要将 Access 转换为 mysql 命令（基本上是插入）。

我已经尝试过运行良好的 DBWScript，尽管它不允许只导出一个表。它导出所有表。我现在正在做的是将所有表导出到一个 sql 文件，然后我过滤它只使用我真正需要的插入。

我想知道是否有人知道像 DBWScript 这样可以在控制台模式下运行并只允许从数据库中导出一个表的软件，因为该表有很多行（最多 100.000 行）而且没有意义如果我不打算使用它们，则导出所有其他表。这大大增加了转换时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T07:10:48.157

我终于使用了一个名为“Bullzip MS Access to MySQL”的软件，它的工作原理就像一个魅力！这是作者的网站：[http ://www.bullzip.com/products/a2m/info.php](http://www.bullzip.com/products/a2m/info.php)

它允许您在不同的表中选择所需的表和所需的列，除了创建一个批处理脚本来自动化该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:20:29.343

您可以尝试使用技巧[将 MS Access 转换为 MySQL](http://en.latindevelopers.com/ivancp/2012/ms-access-to-mysql-with-relationships/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:38:48.700

[您可以在dbForge Studio for SQL Server](http://www.devart.com/dbforge/sql/studio/)中尝试[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具。

打开数据导入向导，选择 MS Access 格式，指定其他选项并保存模板文件。然后在命令行模式下使用这个模板文件 (*.dit)。

# java - 为什么我不应该在 Web 界面上使用静态文本？

> ID：12491812
> 
> 赞同：1
> 
> 时间：2012-09-19T09:20:28.587
> 
> 标签：java, html, web-applications, static

就我而言，这个问题具体是关于 JSF，但它可以应用于任何使用 Web 界面的技术。

我正在维护一个 Web 界面（xhtml，使用 JSF），它都是静态文本（硬编码）。

另一个选项不是使用硬编码文本，而是使用类似的东西`<h:outputText value=" #{msg['hello.world']} >`并将 hello.world 放在属性文件中。这使您可以非常轻松地进行 i18n。

直观地说，这个选项更好，但如果你从未计划过 i18n，它是否比仅仅编码更好？对于这个问题，我没有找到任何明确的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:24:39.193

您可以集中消息，所以如果您需要更改标签，您不需要搜索整个项目并在每个地方替换它，您可以简单地在消息包中替换它

它还启用了 i18n

你可以有参数化的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:28:32.313

它还可以很好地翻译 html 实体，并允许您重用文本，这将导致一致性。

# php - PHPUnit：测试具有多个数据集的函数的最佳方法是什么？

> ID：12491816
> 
> 赞同：4
> 
> 时间：2012-09-19T09:20:37.080
> 
> 标签：php, phpunit

假设我有以下课程：

```
class Foo
{
    static function bar($inputs)
    {
         return $something;
    }
} 
```

现在，在一个测试类中，我具有以下结构：

```
class FooTest extends PHPUnit_Framework_TestCase
{
    function testBar()
    {
         $result = Foo::bar($sample_data_1);
         $this->assertSomething($result);

         $result = Foo::bar($sample_data_2);
         $this->assertSomething($result);

         $result = Foo::bar($sample_data_3);
         $this->assertSomething($result);
    }
} 
```

这是一个好的结构吗？我应该`testBar()`分成3个独立的功能吗？为什么？为什么不？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:23:43.593

如果您使用具有不同数据集的相同代码并且您期望类似的输出，则可以使用该[**`dataProvider()`功能**](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)

### 改编自 PHPUnit 文档的示例：

```
<?php
class DataTest extends PHPUnit_Framework_TestCase
{
    /**
     * @dataProvider provider
     */
    public function testAdd($sample, $data, $result)
    {
        $this->assertEquals($result, Foo::bar($sample, $data);
    }

    public function provider()
    {
        return array(
          array(0, 0, 0),
          array(0, 1, 1),
          array(1, 0, 1),
          array(1, 1, 3)
        );
    }
} 
```

如果您有完全不同的返回值/结构，例如它根据输入返回 XML 和 JSON，那么最好进行多个测试，因为您可以使用正确的`assert[Xml/Json]StringMatches()`函数并获得更好的错误输出。

### 对于其他错误检查，我建议添加更多测试方法：

```
/**
 * @expectedException InvalidArgumentException
 */
public function testError() {
    Foo::bar("invalidArgument");
} 
```

# forms - Symfony2：使用自定义约束进行验证会引发异常

> ID：12491818
> 
> 赞同：0
> 
> 时间：2012-09-19T09:20:40.553
> 
> 标签：forms, symfony, validation

我有一个对某些字段进行自定义验证的用户类。当我提交表单时，我收到以下错误：

> 警告：class_parents() [function.class-parents]：类不存在，无法加载到 ..../vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php 第 223 行

有人可以告诉我我做错了什么吗？

这是我的用户类：

```
<?php
namespace MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use FOS\UserBundle\Entity\User as BaseUser;
use Symfony\Component\Validator\Constraints as Assert;
use MyBundle\Validation\Constraint as MyAssert;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class User extends BaseUser
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\generatedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * @var string $email
     * @Assert\NotBlank(groups={"registration"})
     * @Assert\Email(groups={"registration"})
     * @MyAssert\Unique(groups={"registration"})
     */
    protected $email;
   .... 
```

堆栈跟踪：

```
in /myApp/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php at line 65    
at ErrorHandler ->handle ('2', 'class_parents() [<a href='function.class-parents'>function.class-parents</a>]: Class does not exist and could not be loaded', '/myApp/vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php', '223', array('name' => '', 'parentClasses' => array())) 
at class_parents ('') 
in /myApp/vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php at line 223    
at ClassMetadataFactory ->getParentClasses ('') 
in /myApp/vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php at line 246    
at ClassMetadataFactory ->loadMetadata ('') 
in /myApp/vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php at line 170    
at ClassMetadataFactory ->getMetadataFor ('') 
in /myApp/vendor/doctrine/lib/Doctrine/ORM/EntityManager.php at line 257    
at EntityManager ->getClassMetadata ('') 
in /myApp/vendor/doctrine/lib/Doctrine/ORM/EntityManager.php at line 574    
at EntityManager ->getRepository (null) 
in /myApp/src/comp/MyAppBundle/Validation/Constraint/UniqueValidator.php at line 21    
at UniqueValidator ->isValid ('asdfasdf', object(Unique)) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 176    
at GraphWalker ->walkConstraint (object(Unique), 'asdfasdf', 'registration', 'data.email') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 136    
at GraphWalker ->walkMember (object(PropertyMetadata), 'asdfasdf', 'registration', 'data.email', null) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 119    
at GraphWalker ->walkProperty (object(ClassMetadata), 'email', object(User), 'registration', 'data.email', null) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 111    
at GraphWalker ->walkObjectForGroup (object(ClassMetadata), object(User), 'registration', 'data') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 82    
at GraphWalker ->walkObject (object(ClassMetadata), object(User), 'registration', 'data') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 162    
at GraphWalker ->walkReference (object(User), 'registration', 'data', true) 
in /myApp/vendor/symfony/src/Symfony/Component/Form/Extension/Validator/Validator/DelegatingValidator.php at line 125    
at DelegatingValidator ::validateFormData (object(Form), object(ExecutionContext)) 
at call_user_func (array('Symfony\Component\Form\Extension\Validator\Validator\DelegatingValidator', 'validateFormData'), object(Form), object(ExecutionContext)) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/Constraints/CallbackValidator.php at line 65    
at CallbackValidator ->isValid (object(Form), object(Callback)) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 176    
at GraphWalker ->walkConstraint (object(Callback), object(Form), 'Default', '') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 104    
at GraphWalker ->walkObjectForGroup (object(ClassMetadata), object(Form), 'Default', '') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/GraphWalker.php at line 82    
at GraphWalker ->walkObject (object(ClassMetadata), object(Form), 'Default', '') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/Validator.php at line 62    
at Symfony\Component\Validator\{closure} (object(GraphWalker), 'Default') 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/Validator.php at line 120    
at Validator ->validateGraph (object(Form), object(Closure), null) 
in /myApp/vendor/symfony/src/Symfony/Component/Validator/Validator.php at line 65    
at Validator ->validate (object(Form)) 
in /myApp/vendor/symfony/src/Symfony/Component/Form/Extension/Validator/Validator/DelegatingValidator.php at line 79    
at DelegatingValidator ->validate (object(Form)) 
in /myApp/vendor/symfony/src/Symfony/Component/Form/Form.php at line 556    
at Form ->bind (array('firstname' => '', 'lastname' => '', 'username' => '', 'email' => 'asdfasdf', 'plainPassword' => array('Passwort' => '', 'Passwort wiederholen' => ''), 'code' => '', 'plan' => '10', 'phone' => '', 'street' => '', 'zip' => '', 'city' => '', 'country' => '1')) 
in /myApp/vendor/symfony/src/Symfony/Component/Form/Form.php at line 592    
at Form ->bindRequest (object(Request)) 
in /myApp/src/comp/MyAppBundle/Controller/IndexController.php at line 151    
at IndexController ->registerAction () 
at call_user_func_array (array(object(IndexController), 'registerAction'), array()) 
in kernel.root_dir/cache/dev_local/classes.php at line 3905    
at HttpKernel ->handleRaw (object(Request), '1') 
in kernel.root_dir/cache/dev_local/classes.php at line 3875    
at HttpKernel ->handle (object(Request), '1', true) 
in kernel.root_dir/cache/dev_local/classes.php at line 4879    
at HttpKernel ->handle (object(Request), '1', true) 
in kernel.root_dir/bootstrap.php.cache at line 547    
at Kernel ->handle (object(Request)) 
in /myApp/web/app_dev_local.php at line 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:09:45.030

```
at EntityManager ->getRepository (null) 
in /myApp/src/comp/MyAppBundle/Validation/Constraint/UniqueValidator.php at line 21    
at UniqueValidator ->isValid ('asdfasdf', object(Unique)) 
```

错误的原因是使用空值调用**EntityManager->getRepository() 。**您的 UniqueValidator.php 似乎存在一些问题，如果没有该文件，无法准确判断问题所在。

# java - 具有 Windows 外观的半透明窗口？

> ID：12491821
> 
> 赞同：2
> 
> 时间：2012-09-19T09:20:55.343
> 
> 标签：java, swing, user-interface, transparency, look-and-feel

我正在使用 JDK7 的半透明窗口支持，发现它不适用于 Windows 的外观和感觉。

这是我的代码：

```
JFrame.setDefaultLookAndFeelDecorated(true);
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        JFrame frame = new JFrame("Translucent Window");
        frame.setOpacity(0.5F);
        frame.setSize(640, 360);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

此代码正确显示半透明窗口。但是，如果我设置 Windows 外观：

```
UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel"); 
```

抛出异常：

```
Exception in thread "AWT-EventQueue-0" java.awt.IllegalComponentStateException: The frame is decorated 
```

如果我用 禁用框架装饰`frame.setUndecorated(true)`，它会再次工作，但这不是我想要的，因为缺少标题栏。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:26:31.030

请参阅本教程以了解如何制作`JFrame`透明或半透明

[http://blogofjavacrazy.blogspot.in/2007/03/transparent-window-in-java.html](http://blogofjavacrazy.blogspot.in/2007/03/transparent-window-in-java.html)

我偶然发现了一个简洁的小技巧，它实际上不是透明的，而是截取屏幕截图并将那个小片段添加为背景。

**看到这个链接：**

[http://onjava.com/pub/a/onjava/excerpt/swinghks_hack41/index.html](http://onjava.com/pub/a/onjava/excerpt/swinghks_hack41/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:18:51.417

这真的很愚蠢。在带有 的 Java 6 下`AWTUtilities`，这工作得很好。

你会想读这个。

[Java 教程半透明窗口示例是否会给使用 jdk7 的人带来麻烦？](https://stackoverflow.com/questions/6259269/is-the-java-tutorials-translucent-window-example-giving-trouble-to-those-playing)

# java - 如何从 Internet 建立到 ServerSocket 的连接？

> ID：12491824
> 
> 赞同：1
> 
> 时间：2012-09-19T09:21:01.333
> 
> 标签：java, sockets, serversocket

我`ServerSocket`听 LAN 连接并很好地接受它们，但是当我尝试通过我的手机连接到相同的设备时 - 使用 3G 连接 - 它似乎没有连接。

1.  我尝试使用`getMyIP`站点来获取`IP`并尝试连接到它，它确实正确`IP`（用我的路由器检查）但是根本不接受任何连接。

2.  我尝试在 Windows 7 和我的路由器上完全打开端口。

3.  我将这些行放在我的服务器构造函数中：

    ```
    ss = new ServerSocket(port);
    host=ss.getInetAddress().getHostAddress(); 
    ```

    我将主机上的 ip 设置为 0.0.0.0

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:29:42.633

**-**当您在 时`LAN`，您可以使用`Private IP`以及`Public IP ranges`

**-**但是当您使用`Internet`访问您所在位置的服务器时，您**需要有一个** `static Public IP address.`

**-**您可以向`static Public IP address`您的 ISP 索取额外费用，也有一些基于您的动态 IP 提供静态 IP 的网络站点。

**专用 IP 范围 不能通过 Internet 使用。**

```
Class A - 10.0.0.0 - 10.255.255.255  

Class B - 172.16.0.0 - 172.31.255.255

Class C - 192.168.0.0 - 192.168.255.255 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:31:40.143

您需要有一个公共 IP 地址。如果你有一个路由器，它必须将你想暴露给互联网的端口的流量传递给你的机器。如果您有防火墙，它必须允许到此端口的外部连接。

无论您使用哪种语言，您所做的所有更改都是相同的，并且您无法从 Java 中做任何事情来解决需要做这些事情的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:41:52.570

1.  检查您的防火墙是否允许传入连接。你需要在那里制造和例外。
2.  您需要明确绑定您的机器上的 IP 地址，该地址由您的 ISP 为该时间实例分配。
3.  `ipconfig`您可以通过在 windows 命令提示符下运行命令来获取分配给您的 IP 地址。
4.  使用以下代码绑定到特定的 IP 地址

    ```
    InetSocketAddress insa = new InetSocketAddress("22.23.23.111", 9090);       
    ServerSocket ss = new ServerSocket();
    ss.bind(insa);
    String host=ss.getInetAddress().getHostAddress();
    System.out.println(host); 
    ```

这将打印分配给您的 IP 地址。

# mysql - MySQL 审计跟踪使用 web user_id 的触发器和 mysql 会话变量。好的解决方案？

> ID：12491827
> 
> 赞同：0
> 
> 时间：2012-09-19T09:21:19.943
> 
> 标签：mysql, triggers, session-variables, audit-trail

如果我在 MySQL 中使用触发器进行审计跟踪，并使用 MySQL 会话变量来存储我需要存储的 PHP 变量，例如：

```
SET @user_id = $user_id
SET @user_ip = $user_ip_address 
```

然后在触发器中使用该信息，这行得通吗？这是一个好的解决方案吗？

我担心的是，如果多个用户同时进行查询，@user_id 会话变量可能会在触发器执行之前发生更改，并且它将存储在数据库中，就像其他用户进行了更改一样。

会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:53:14.460

据我所知，变量是仅限会话的，因此您可以使用相同的变量名称进行一千个会话而不会出现重叠。

# business-intelligence - 如何在 Pentaho 勺子中连接字符串？

> ID：12491832
> 
> 赞同：6
> 
> 时间：2012-09-19T09:21:28.927
> 
> 标签：business-intelligence, pentaho, kettle

我是 Pentaho 的新手（今天安装）。我能够在 Spoon 中进行基本的转换。现在我需要做一些事情，我不知道该怎么做。

我的输入看起来像

```
2012-09-17|garima|fbhjgjhgj87687jghgj88jgjj|garima#1347868164626|::ffff:120.56.132.137 
```

第三个字段是一个 ID，我需要从 REST API 获取一些信息

```
http://api.app.com/app/api/v1/feature/fbhjgjhgj87687jghgj88jgjj 
```

我需要在 Spoon 中做什么才能完成这项工作？

此外，数据返回将采用 json 格式。我该如何解析？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T12:19:10.680

`CSV File Input`您应该首先使用 using`|`作为分隔符来获取您的输入。然后您可以将第三个字段作为字符串获取。

接下来，您可能需要通过一个`String operations`步骤从该字符串中删除所有空格。查看`Remove special character`列，然后选择`space`。

然后你需要将它与你的 http 地址连接起来`http://api.app.com/app/api/v1/feature/`。为此，您将使用一个`Calculator`步骤。在这一步首先创建一个新的临时字段`tmpAddr`，使用操作`Define a constant value for ...`（或类似的东西，对不起我的勺子是葡萄牙语）。在该`Field A`列中，您将写下您的 http 地址。这是一个很好的做法，在你完成这项工作之后，将你的地址设置为系统变量，所以如果它发生变化，你不需要在你的转换中到处替换它（查看 menu `Edit -> System Variables`）。

现在在同一`Calculator`步骤上创建另一个字段，比方说`MyAddress`，使用 operation `A+B`。选择您刚刚创建`Field A`的字段，以及您输入的第三个字段。`tmpAddr``Field B`

现在在您的流中，您应该将完整地址作为字段`MyAddress`。连接一个`REST client`步骤。标记`Accept URL from field`并选择字段`MyAddress`为`URL Field Name`。设置`Application Type`为`JSON`。设置`Result Fieldname`为`MyResult`。

如果您需要进一步的 JSON 解析，您可以添加一个`Json input`步骤。设置`Source is defined in a field`并选择字段`MyResult`为`Get Source from field`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:31:24.290

另一种方法是使用“替换字符串”步骤来附加字符串。

1.  将“使用正则表达式”设置为 Y
2.  将“搜索”设置为`(.*)`
3.  将“替换为”设置为`http://api.app.com/app/api/v1/feature/$1`
4.  将“整个单词”设置为 Y

正则表达式中的括号设置了一个捕获组，然后您可以使用 $X 语法将其插入到替换字符串中

# python - Numpy 数组和 python 属性

> ID：12491834
> 
> 赞同：3
> 
> 时间：2012-09-19T09:21:45.187
> 
> 标签：python, properties, numpy

我想在每次设置 numpy 数组时对其内容进行检查。可以为此使用python属性吗？我的做法：

```
import numpy as np

class Obj(): 
    def __init__(self):                                                                                 
        self._np_arr = None                                                                             

    @property                                                                                           
    def np_arr(self):                                                                                   
        if self._np_arr is None:                                                                        
            self._np_arr = np.ones(10)                                                                  
        return self._np_arr                                                                             

    @np_arr.setter
    def np_arr(self, value):
        if np.sum(value)>10:
            raise ValueError('Error message')                                                           
        self._np_arr = value

if __name__ == '__main__':
    o = Obj()                                                                                           
    print o.np_arr
    o.np_arr = np.zeros(10) # ok                                                                        
    o.np_arr = np.ones(10)*2 # not ok                                                                   
    print o.np_arr 
```

当对象仍然是 None 时输入 getter。一旦 np_arr 是一个 numpy 数组，getter 和 setter 就不再起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:33:24.387

属性仅适用于新型类 - 更改`class Obj():`为`class Obj(object):`提供预期输出：

```
$ python2 test.py
[ 1\.  1\.  1\.  1\.  1\.  1\.  1\.  1\.  1\.  1.]
Traceback (most recent call last):
  File "test.py", line 22, in <module>
    o.np_arr = np.ones(10) * 2
  File "test.py", line 16, in np_arr
    raise ValueError('Error message')
ValueError: Error message 
```

When`Obj`是一个老式的类（Python 2 中的默认值），分配 to`o.np_arr`不会调用 setter - 它的行为就像一个常规的属性分配，并且破坏了属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T09:38:14.143

首先。这很难（最多，我相信不可能）做对。这里的错误很简单，一定是新的样式类。所以只需替换`class Obj()`为`class Obj(object)`.

但是，这可能无法解决您的问题，因为用户仍然可以将其分配到位，即：

```
o.np_arr[:] = 2 
```

您可以通过使用来规避这一点`_np_arr.setflags(write=False)`，但是用户根本无法使用此类操作。

编辑：你也可以继承ndarray，并定义你自己的`__array_finalize__`来规避它。但是，即使那样，用户也可以`np.asarray(o.np_arr)`就地执行和修改...

我想您可以提供自己的方法，然后通过在可写的内部工作来“模拟”一个数组。但我怀疑是否有 100% 万无一失或至少优雅的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:09:44.610

使用“_”前缀表示它是私有的，同时还定义 get/set 属性以直接将其访问为 `o._np_arr`.

如果您希望它真正私有，也许您宁愿定义明确的 get/setter ( `o.set_arr`, `o.get_arr`) 并邀请用户不要就地修改它。

# android - 在android中的viewpager中放大和缩小

> ID：12491838
> 
> 赞同：0
> 
> 时间：2012-09-19T09:22:24.600
> 
> 标签：android, android-viewpager

我有一个查看寻呼机来滚动图像。
在这里，我使用图像视图来显示图像。我想实现图像的放大和缩小功能。
我怎样才能在android中实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:49:13.060

尝试这个。缩放图片的简单方法

缩放.java

```
import android.app.Activity;
import android.os.Bundle;

public class zooming extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(new Zoom(this));
    }
} 
```

缩放.java

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.view.KeyEvent;
import android.view.View;

public class Zoom extends View {
    private Drawable image;
    private int zoomControler=20;
    public Zoom(Context context)
    {
            super(context);
            image=context.getResources().getDrawable(R.drawable.icon);
            setFocusable(true);

    }
    @Override
    protected void onDraw(Canvas canvas) {
            // TODO Auto-generated method stub
            super.onDraw(canvas);
    //here u can control the width and height of the images........ this line is very important
    image.setBounds((getWidth()/2)-zoomControler, (getHeight()/2)-zoomControler, (getWidth()/2)+zoomControler, (getHeight()/2)+zoomControler);
            image.draw(canvas);
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

            if(keyCode==KeyEvent.KEYCODE_DPAD_UP)// zoom in
                    zoomControler+=10;
            if(keyCode==KeyEvent.KEYCODE_DPAD_DOWN) // zoom out
                    zoomControler-=10;
            if(zoomControler<10)
                    zoomControler=10;

            invalidate();
            return true;
        }
} 
```

希望这会有所帮助。

# php - 如何从函数中返回多个值

> ID：12491840
> 
> 赞同：1
> 
> 时间：2012-09-19T09:22:25.423
> 
> 标签：php, function, return, explode

我正在构建一个脚本来使用 Payment Express 中的 PxPost，我使用了他们的示例代码，可以在[http://www.paymentexpress.com/Technical_Resources/Sample_code_-_PHP/PX_Post__-_cURL.aspx找到](http://www.paymentexpress.com/Technical_Resources/Sample_code_-_PHP/PX_Post_-_cURL.aspx)

它是如何工作的：它内置在一个自动化脚本中，可以从我的数据库中查询订单、处理它们并返回一个值。

我唯一的问题是我希望函数返回多个值，所以这就是我所做的。

运行函数的代码（第 201 行）：

```
$once_complete = process_request($billingID, $order_total, $merchRef); 
```

它发送要处理的付款，然后获取返回并使用示例代码处理 XML。在代码的末尾，我删除了所有`$html`信息，并将其替换为以下内容（第 111 行）：

```
return $CardHolderResponseDescription.":".$MerchantResponseText.":".$AuthCode.":".$MerchantError; 
```

据我了解，应该将其返回到开始的地方。然后，我想拆分这些值并使用以下内容将它们作为字符串返回（第 202 行）：

```
list($RespDesc, $MerchResp, $AuthCode, $MerchError) = explode(":", $once_complete); 
```

但由于某种原因，这不起作用。

我试过回显返回，然后它工作正常，但之后它似乎消失了。可能出了什么问题？

[您可以在http://pastebin.com/LJjFutne](http://pastebin.com/LJjFutne)查看整个页面的代码。此代码正在进行中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T09:31:13.347

返回一个数组。

```
function process_request(){
    ...
    return array( $CardHolderResponseDescription, $MerchantResponseText, $AuthCode, $MerchantError );
} 
```

并通过以下方式获取：

```
$_result = process_request();
$CardHolderResponseDescription = $_result[0];
$MerchantResponseText = $_result[1];
... 
```

提示：使用较短的变量以获得更好的阅读效果:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:28:02.807

在您的函数 process_request 中：

```
return array($CardHolderResponseDescription, $MerchantResponseText, $AuthCode, $MerchantError); 
```

调用您的函数时：

```
list($RespDesc, $MerchResp, $AuthCode, $MerchError) = process_request($billingID,$order_total,$merchRef); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:33:50.830

您可以做的最简单的事情是将返回值放入一个数组中，以便稍后访问：

```
return array("CardHolderResponseDescription"=>$CardHolderResponseDescription, "MerchantResponseText" => $MerchantResponseText, "AuthCode" => $AuthCode ); 
```

然后：

列表（$RespDesc，$MerchResp，$AuthCode，$MerchError）=$my_return_value

# android - 如何将项目添加到动态创建的微调器？

> ID：12491841
> 
> 赞同：1
> 
> 时间：2012-09-19T09:22:29.590
> 
> 标签：android, spinner

嗨，以下是动态创建微调器的代码，但我对如何将数据添加到生成的微调器感到困惑。提前谢谢。

```
LinearLayout rAlign = (LinearLayout)findViewById(R.id.lId);
    LinearLayout spinnerHolder = new LinearLayout(getApplicationContext());
    spinnerHolder.setOrientation(LinearLayout.HORIZONTAL);
    spinnerHolder.setLayoutParams(
            new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT, 
                LinearLayout.LayoutParams.WRAP_CONTENT, 1f));
        Spinner newSpinner = new Spinner(getApplicationContext());
        newSpinner.setLayoutParams(
            new Spinner.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                ViewGroup.LayoutParams.WRAP_CONTENT));
        newSpinner.setAdapter(options);
        rAlign.addView(spinnerHolder);
        spinnerHolder.addView(newSpinner); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:28:57.383

[本指南](http://developer.android.com/guide/topics/ui/controls/spinner.html)解释了这个问题。一般来说，需要声明一个接口 SpinnerAdapter 的实例来处理 Spinner 的选项。
您可以自己实现接口，或使用以下类之一：ArrayAdapter、BaseAdapter、CursorAdapter、ResourceCursorAdapter、SimpleAdapter 或 SimpleCursorAdapter。
然后只需调用`spinner.setAdapter()`，就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:32:15.697

检查这篇[文章](https://stackoverflow.com/questions/12110370/how-do-i-dynamically-update-a-spinner-using-arraylist/12110782#12110782)。它将帮助您如何将项目添加到微调器...它将帮助您创建适配器以及如何将项目动态添加到微调器。

# maven - Maven 报告方法级别的所有测试

> ID：12491842
> 
> 赞同：1
> 
> 时间：2012-09-19T09:22:43.197
> 
> 标签：maven, maven-2, maven-3, maven-plugin

我想在 Maven 运行测试后生成一份报告，该报告将显示所有正在运行的测试的列表。我不希望按类对测试进行分组，我只想要一个已执行测试的列表。例如，如果我有

```
class Test1 {
  @Test
  public void test1() {
  }
}

class Test2 {
  @Test
  public void test2() {
  }
} 
```

运行测试后，我想要一个看起来像这样的报告：

Test1.test1 通过时间：2 秒

Test2.test2 失败时间：1 秒

是否有一个 Maven 报告插件可以做到这一点或任何其他方式可以做到这一点？

我已经查看了[maven 测试报告格式](https://stackoverflow.com/questions/6503895/maven-test-report-format)，但似乎您必须逐类单击才能查看失败的方法。

我会很感激任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:18:02.677

我研究了 SureFire 和[Cobertura](http://mojo.codehaus.org/cobertura-maven-plugin/index.html)的文档，似乎没有您寻求的格式的内置报告。

但是，`TEST-TestSuite.xml`SureFire 生成的文件将包含方法级别的每个单独测试用例的条目。因此，最好的办法是开发一个简单的 XML 转换，将该文件转换为您喜欢的格式。

# qt - 如何用属于另一个 QWidget 类的另一个子框架动态替换 QWidget 类中的子框架

> ID：12491843
> 
> 赞同：1
> 
> 时间：2012-09-19T09:22:49.873
> 
> 标签：qt, qt4.8

我有一个具有 2 个子 QFrame 的 QWidget 类。还有另一个 QWidget 类（在同一个项目中）包含多个子框架。

我想用第二类的特定框架动态替换我的第一类的子框架。

有没有可能的方法来复制框架？

# javascript - 判断网页是否来自历史

> ID：12491848
> 
> 赞同：0
> 
> 时间：2012-09-19T09:23:04.953
> 
> 标签：javascript, browser-history

我想在我的网页上知道用户是否通过单击链接、输入 URL 或其他方式正常加载了该页面，或者该页面是否来自历史记录并且用户通过按浏览器中的“后退”按钮来到那里（或使用热键...）。

所以本质上我正在寻找像window.location.canGoForward()这样的方法。这样的事情存在吗？如果不是，有什么解决方法？

我不在乎按下后退/前进按钮时会发生什么，网上有很多关于此的内容。我只想查询加载的页面是否是浏览历史记录中的最新页面。广泛的浏览器支持表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:39:00.060

您可以计算历史变量的长度，以查看它们是否对您的站点是新的。这里有一些有用的链接

*   [http://www.w3schools.com/jsref/obj_history.asp](http://www.w3schools.com/jsref/obj_history.asp)

*   [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

*   [https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

# java - 右键单击复制 JTable 的单元格值

> ID：12491850
> 
> 赞同：4
> 
> 时间：2012-09-19T09:23:06.673
> 
> 标签：java, swing, jtable, clipboard, jpopup

我在由 2 列组成的 JTable 中显示了一些结果。

文件 - 结果

我实现了一个 JPopupMenu，它显示了一个复制条目，我尝试复制单元格的值，我在其中右键单击。

```
filelistTable.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
         if(SwingUtilities.isRightMouseButton(e))
         {
             TablePopupMenu popup = new TablePopupMenu(filelistTable, e.getPoint());
             filelistTable.setComponentPopupMenu(popup);
         }
    }
}); 
```

--

```
 public TablePopupMenu(JTable table, Point p) {

        this.table = table;
        this.p = p;

        JMenuItem mntmKopieren = new JMenuItem("Kopieren");
        mntmKopieren.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                copyCellToClipboard();
            }
        });
        add(mntmKopieren);
    }

    public void copyCellToClipboard()
    {
        int r = table.rowAtPoint(p);
        int c = table.columnAtPoint(p);
        System.out.println(table.getValueAt(table.convertRowIndexToView(r), 
                table.convertRowIndexToView(c)));
        StringSelection entry = new StringSelection(table.getValueAt(table.convertRowIndexToView(r), 
                table.convertRowIndexToView(c)).toString());
        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
        clipboard.setContents( entry, this );

    } 
```

无论如何，这只适用于少数测试。我做错了什么或遗漏了什么？在我看来，好像单元格甚至不会被正确选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:14:51.427

有两件事略有不同：

*   在 mouseEvents 序列中将 componentPopup 设置为 clicked 为时已晚（弹出窗口通常在单击之前发生的按下或释放时触发）
*   该值取自错误的单元格：JTable 中的所有坐标都在视图坐标系中，将它们转换为视图坐标将完全关闭

也就是说：获取与单元格坐标相关的上下文的支持很差。通常，最好的选择是（下面的代码片段）

*   覆盖 getPopupLocation(MouseEvent) 并将位置存储在某处
*   实施弹出/操作以访问该位置

如果失败（应该在行为良好的应用程序中完成），弹出窗口可能由键盘触发：如果是这种情况，您将需要提供一些其他标记（在焦点单元格中）以进行操作。

```
final String popupLocation = "table.popupLocation";
final JTable table = new JXTable(new AncientSwingTeam()) {

    @Override
    public Point getPopupLocation(MouseEvent event) {
        // event may be null if triggered by keyboard, f.i.
        // thanks to @Mad for the heads up!
        ((JComponent) event.getComponent()).putClientProperty(
                popupLocation, event != null ? event.getPoint() : null);
        return super.getPopupLocation(event);
    }

};
JPopupMenu popup = new JPopupMenu();
Action printLocation = new AbstractAction("print cell") {

    @Override
    public void actionPerformed(ActionEvent e) {
       Point p = (Point) table.getClientProperty(popupLocation);
       if (p != null) { // popup triggered by mouse
           int row = table.rowAtPoint(p);
           int column = table.columnAtPoint(p);
           LOG.info("" + table.getValueAt(row, column)); 
       } else { // popup triggered otherwise
           // could choose f.i. by leadRow/ColumnSelection
           ...
       }
    }

};
popup.add(printLocation);
table.setComponentPopupMenu(popup); 
```

**编辑**（由 Mad 的评论触发）：

> 您应该检查 MouseEvent.isPopupTrigger，因为触发点取决于平台。这确实意味着您需要监视 mousePressed、mouseReleased 和 mouseClicked

不，这不是必需的（刚刚检查过:-)：显示 componentPopup 以响应 mouseEvent 的机制 - 发生在 BasicLookAndFeel.AWTEventHelper 中 - 只有当它*是*popupTrigger 时才会这样做。

通过再次阅读 api 文档（昨天应该完成 ;-)，事实证明该方法*总是*在显示 componentPopup 之前调用，如果通过其他方式触发，fi 键盘也是如此。在这种情况下，事件参数为空 - 原始代码会崩溃。从好的方面来说，有了这个保证，所有寻找目标细胞的逻辑都可以转移到那个方法中。虽然没有尝试，所以它可能不可行（如果那时该位置应该基于当时可能尚未完全处理的leadRow / ColumnSelection）

# telerik - 在 PostBack 上清除 Telerik RadGrid 的过滤器排序

> ID：12491851
> 
> 赞同：4
> 
> 时间：2012-09-19T09:23:09.213
> 
> 标签：telerik, telerik-grid

我们如何才能删除以前在回传时在 Telerik RadGrid 上完成的数据排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:25:03.687

将主表视图的 SortExpression 设置为清除。例子：

```
_rdGrdReport.MasterTableView.SortExpressions.Clear(); 
```

如果网格名称是 _rdGrdReport

# php - preg_replace() [function.preg-replace]: 未知修饰符 '?'

> ID：12491853
> 
> 赞同：1
> 
> 时间：2012-09-19T09:23:10.597
> 
> 标签：php, regex

以下代码给了我一个错误“preg_replace() [function.preg-replace]: Unknown modifier '?'”

```
$str = 'background: url("../../dsdgsd/contain.jpg");';

echo preg_replace('/url\s?\(\s?(\"|\')([../?]*[a-z/]*?[/?]?)([a-z0-9_-]*[.][jpg|jpeg|png|jpeg]*)([\'|\"]\))/gi','url("../images/$3")',$str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:27:53.410

我不确定这个正则表达式应该做什么，但是由于`/`模式中有字符，所以给出了错误。然后解析器认为您的模式已经完成，并将其后的所有内容（`?`在本例中）作为修饰符。因此错误。

通过使用另一个分隔符进行修复：（大多数人`#`在处理大量 时使用`/`）

```
echo preg_replace('#url\s?\(\s?(\"|\')([../?]*[a-z/]*?[/?]?)([a-z0-9_-]*[.][jpg|jpeg|png|jpeg]*)([\'|\"]\))#i','url("../images/$3")',$str); 
```

（除此之外，如前所述，`g`不需要修饰符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:25:12.533

对于`preg_replace`，没有必要使用`global`修饰符`g`（不应该使用），它已经全局替换。

[php 中没有 g 修饰符。](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:28:23.177

由于您以`/`字符开始正则表达式，因此它是一个分隔符，您应该转义`/`正则表达式中出现的所有 。因为第二个字符之后的第一个字符`/`是`?`，所以它被解释为修饰符。

# android - Android ListView：当 ListView 的内容发生变化时，如何将其保持在顶部？

> ID：12491855
> 
> 赞同：6
> 
> 时间：2012-09-19T09:23:18.087
> 
> 标签：android, android-listview, simplecursoradapter, android-cursor

我有一个包含绑定到光标适配器的 ListView 的视图。当光标内容更改时，我想将 ListView 保持在顶部，然后在我的自定义光标适配器中添加：

```
@Override
protected void onContentChanged() {
    // ...
    myListView.scrollTo(0, 0);
} 
```

但这不起作用。然后我在某处读到这个动作，如下所示：

```
myListView.post(new Runnable() {
    public void run() {
        myListView.scrollTo(0, 0);
    }
}); 
```

但这也不起作用。

当 ListView 的内容发生变化时，如何将其保持在顶部？

编辑：

只是为了尝试，我添加了一个按钮并在其 onClickListener 中调用了 scrollTo() ，但它不起作用！我错过了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-19T09:27:31.080

而不是**scrollTo**，尝试**setSelection(0)**以到达列表视图的顶部位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T02:59:58.447

我制作了对其他人有用的列表视图滚动功能，它们适用于每个 android 版本、模拟器和设备，这里的 itemheight 是列表视图中视图的固定高度。

```
int itemheight=60;
public void scrollToY(int position)
{
    int item=(int)Math.floor(position/itemheight);
    int scroll=(int) ((item*itemheight)-position);
    this.setSelectionFromTop(item, scroll);// Important
}
public void scrollByY(int position)
{
    position+=getListScrollY();
    int item=(int)Math.floor(position/itemheight);
    int scroll=(int) ((item*itemheight)-position);
    this.setSelectionFromTop(item, scroll);// Important
}
public int getListScrollY()
{
    try{
    //int tempscroll=this.getFirstVisiblePosition()*itemheight;// Important
    View v=this.getChildAt(0);
    int tempscroll=(this.getFirstVisiblePosition()*itemheight)-v.getTop();// Important
    return tempscroll;
    }catch(Exception e){}
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-19T09:29:04.393

ListView's`scrollTo`适用于`ListView`它自己作为`View`

`setSelection(0)`成功了，因为它适用于列表视图的适配器

# python - 选择性继承 Python

> ID：12491857
> 
> 赞同：3
> 
> 时间：2012-09-19T09:23:23.407
> 
> 标签：python

我正在制作一个使用类的python程序，我希望一个类只能选择性地从另一个类继承，例如：

```
class X(object):
    def __init__(self):
        self.hello = 'hello'

class Y(object):
    def __init__(self):
        self.moo = 'moo'

class Z():
    def __init__(self, mode):
        if mode == 'Y':
             # Class will now Inherit from Y
        elif mode == 'X':
             # Class will now Inherit for X 
```

我怎么能做到这一点而不上另一堂课？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:44:33.900

在 Python 中，类可以在运行时创建：

```
class X(object):
    def __init__(self):
        self.hello = 'hello'

class Y(object):
    def __init__(self):
        self.moo = 'moo'

def create_class_Z(mode):
    base_class = globals()[mode]
    class Z(base_class):
        def __init__(self):
            base_class.__init__(self)
    return Z

ZX = create_class_Z('X')
zx = ZX()
print(zx.hello)

ZY = create_class_Z('Y')
zy = ZY()
print(zy.moo) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:45:58.203

您可以通过[覆盖`__new__`](http://docs.python.org/reference/datamodel.html#object.__new__)和更改传入的方法来做到这一点（您正在通过附加或作为基类`cls`创建新类型）：`X``Y`

```
class X(object):
    def __init__(self):
        self.hello = 'hello'

class Y(object):
    def __init__(self):
        self.moo = 'moo'

class Z(object):
    def __new__(cls, mode):
        mixin = {'X': X, 'Y': Y}[mode]
        cls = type(cls.__name__ + '+' + mixin.__name__, (cls, mixin), {})
        return super(Z, cls).__new__(cls)
    def __init__(self, mode, *args, **kwargs):
        super(Z, self).__init__(*args, **kwargs) 
```

请注意，您需要绕过`Z.__new__`using`super`以避免无限递归；这是`__new__`特殊覆盖方法的标准模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:55:03.117

使用的解决方案`type`：

```
class _Z(): pass #rename your class Z to this

def Z(mode): #this function acts as the constructor for class Z
    classes = {'X': X, 'Y': Y, 'Foo': Bar} #map the mode argument to the base cls
    #create a new type with base classes Z and the class determined by mode
    cls = type('Z', (_Z, classes[mode]), {})
    #instantiate the class and return the instance
    return cls() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:36:43.113

我认为你最好在 Z 中定义两个成员，一个是 X 的类实例，另一个是 Y 的实例。您可以在使用不同的模式时获取这些实例中存储的关联信息。

# ubuntu - Elastic Search 挂起并导致 ubuntu 冻结

> ID：12491859
> 
> 赞同：0
> 
> 时间：2012-09-19T09:23:24.957
> 
> 标签：ubuntu, elasticsearch, openjdk

我正在尝试在 Ubuntu 11 64 位 VM 上运行 ElasticSearch-0.19-4。问题是当我运行它时，它会冻结系统并恢复大约 30 秒。可能在后端崩溃。我的运行环境如下。Prev 我有 openjdk6 但后来我尝试使用 openjdk-1.7 但无济于事。

```
root@elastica:/home/madmin/elasticsearch-0.19.4/bin# dpkg --get-selections|grep jdk
openjdk-6-jdk                   deinstall
openjdk-6-jre                   deinstall
openjdk-6-jre-headless              deinstall
openjdk-7-jre-headless              install
openjdk-7-jre-lib                       install

root@elastica:/home/madmin/elasticsearch-0.19.4/bin# java -version
java version "1.7.0_147-icedtea"
OpenJDK Runtime Environment (IcedTea7 2.0) (7~b147-2.0-0ubuntu0.11.10.1)
OpenJDK 64-Bit Server VM (build 21.0-b17, mixed mode) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:02:08.613

您是否尝试更新到最新的 0.19.9 版本？一些重要问题已得到修复。

# jquery - jquery自定义规则动态添加

> ID：12491860
> 
> 赞同：0
> 
> 时间：2012-09-19T09:23:28.047
> 
> 标签：jquery

我有一个自定义规则：

```
jQuery.validator.addMethod("greaterThanStartPrice", function(value, element, param) {
return this.optional(element) || (parseFloat(value) > $(param).val());
}, "\"Reserve Price\" must be greater than \"Start Price\""); 
```

检查输入框 b 中输入的值是否大于输入框 a。这条规则很好用，但是它所应用的表单字段是动态的，所以我也有：

```
$("#txtReservePrice").rules("remove"); 
```

删除规则。启动规则：

```
$("#frmEditListingAuction").validate({
    meta: "validate",
    rules : {
        txtReservePrice:{ 
            greaterThanStartPrice:"#txtStartPrice",
        }
    }
}); 
```

我无法重新添加规则。我试过了：

```
$("#txtReservePrice").rules("add", "greaterThanStartPrice");
$("#txtStartPrice").rules("add", "greaterThanStartPrice"); 
```

但除此之外，我有点失落。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:53:21.357

如果有人想知道就解决了

```
$("#txtReservePrice").rules("add", {greaterThanStartPrice:"#txtStartPrice"}); 
```

# codeigniter - 分页在 codeigniter 中不起作用

> ID：12491864
> 
> 赞同：0
> 
> 时间：2012-09-19T09:23:46.247
> 
> 标签：codeigniter, pagination

我已经成功地在我正在使用的应用程序的某些页面上创建了分页，但我无法在这个页面上创建：

我在数据库中有 7 条记录，当显示页面时，所有 7 条记录都会显示，而不是 5 条，就像我希望的那样。

果然，没有显示分页链接。

这是我的控制器代码：

```
public function displayAllFaqCategories()
    {

         //initializing & configuring paging

        $currentUser = $this->isLoggedIn();
        $this->load->model('faqCategoriesModel');
        $this->db->order_by('sorder');
        $limit = 5;
        $offset = 3;

        $offset = $this->uri->segment(3);
        $this->db->limit(5, $offset);

        $data['faq_categories'] = $this->faqCategoriesModel->selectCategoriesAndParents();
        $totalresults = $this->db->get('faq_categories')->num_rows();

        //initializing & configuring paging
        $this->load->library('pagination');
        $config['base_url'] = site_url('/backOfficeUsers/faqcategories');
        $config['total_rows'] = $totalresults;
        $config['per_page'] = 5;
        $config['uri_segment'] = 3;

        $this->pagination->initialize($config); 

        $errorMessage = '';
        $data['main_content'] = 'faq/faqcategories';
        $data['title'] = 'FAQ Categories';

        $this->load->vars($data,$errorMessage);
        $this->load->vars($currentUser);
        $this->load->view('backOffice/template');

    } // end of function displayAllFaqCategories 
```

这是我的模型功能代码：

```
public function selectCategoriesAndParents($selectWhat = array())
   {    
       $data = array();
       $query = $this->db->query("SELECT fq . * , COALESCE( fqp.$this->parent_name,  '0' ) AS parentname
                                  FROM $this->table_name AS fq
                                  LEFT OUTER JOIN $this->table_name AS fqp ON fqp.catid = fq.parentid"); 
       if($query->num_rows() > 0) 
       {
           foreach($query->result_array() as $row) 
               {
                   $data[] = $row;  
               }
           }           
       $query->free_result();
       return $data;
   } // end of function selectCategoriesAndParents 
```

在视图中，带有记录的表的下面我有以下代码：

```
 <?php echo $this->pagination->create_links();?> 
```

任何帮助将不胜感激。

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:31:27.663

我想你把两种不同的东西混合在一起了。您部分使用 CI 的 ActiveRecord 类，但随后自己运行查询。

最简单的改变是：

```
 // get all the rows
    $data['faq_categories'] = $this->faqCategoriesModel->selectCategoriesAndParents();
    // figure out the count of all of them
    $totalresults = count($data['faq_categories']);
    // only take some of the rows of the array, instead of keeping all of them and then showing all 7 of your records
    $data['faq_categories'] = array_splice($data['faq_categories'], $offset, $limit); 
```

希望这应该解决它！

为了进一步解释最初的问题是什么，我认为当你运行这个时：

```
$totalresults = $this->db->get('faq_categories')->num_rows(); 
```

它考虑了前一行`$this->db->limit(5, $offset);`，所以它只返回 5 行。然后，当您告诉分页库您只想显示每页 5 个时，库认为它实际上是在显示所有结果，因此不需要分页链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:27:19.547

像这样编辑

```
$offset = $this->uri->segment(3) ? $this->uri->segment(3) : 0; 
```

# android - 在 KSOAP2 中将复杂对象作为参数传递

> ID：12491867
> 
> 赞同：1
> 
> 时间：2012-09-19T09:23:52.317
> 
> 标签：android

我想通过使用 ksoap 将整数值数组传递给排序 web 服务。在服务器端测试时，我的应用程序成功运行。但是，客户端程序在调用“androidHttpTransport.call(SOAP_ACTION,envelope)”方法后会阻塞。任何人都可以指导我做错了什么。谢谢

在下面找到我的 android 应用程序代码：

```
public void onClick(View arg0) {
         try {
             KVMInterface ob=new KVMInterface();    
             PropertyInfo pi = new PropertyInfo();
                pi.setName("ob");
                pi.setValue(ob);
                pi.setType(ob.getClass());
              METHOD_NAME = "Sort";  
              SOAP_ACTION = NAMESPACE+METHOD_NAME;

             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);            
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
               request.addProperty(pi);
                envelope.setOutputSoapObject(request);
                envelope.addMapping(NAMESPACE, "ob",new KVMInterface().getClass());

                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapObject response = (SoapObject)envelope.getResponse();
                System.out.println("Response Received");
                                 SoapObject  ks = ( SoapObject ) envelope.bodyIn; 
                ob=(KVMInterface) ks.getProperty(0);
                System.out.println(ob); 
```

其中客户端上的KVMInterface类如下：

```
public class KVMInterface implements KvmSerializable
{
public int [] a=new int[5]; 
public KVMInterface()
{
            initialize();
    }

@Override
public Object getProperty(int arg0) {
    // TODO Auto-generated method stub
    return a;
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 1;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
    // TODO Auto-generated method stub
    arg2.type=PropertyInfo.INTEGER_CLASS;
    arg2.name="Array";
}

@Override
public void setProperty(int arg0, Object arg1) {
    // TODO Auto-generated method stub

}
private void initialize()
{
for(int i=0;i<a.length;i++) 
    a[i]=i;
} 
```

}

以下是 webserver 应用上 Sort 方法的代码

[WebMethod (EnableSession = true)]

```
 public KVMInterface Sort(KVMInterface ob)
    {
         Random random = new Random();

         for (int i = 0; i < a.Length; i++)
         {
             a[i] = random.Next(1, a.Length);
             }
        KVMInterface obkvm = (KVMInterface)ob;
        int temp = 0;

        for (int i = 0; i < obkvm.a.Length; i++)
        {
            for (int j = i + 1; j < obkvm.a.Length; j++)
            {
                if (obkvm.a[i] > obkvm.a[j])
                {
                    temp = obkvm.a[i];
                    obkvm.a[i] = obkvm.a[j];
                    obkvm.a[j] = temp;
                }
            }

        }
        return ob;
    }

public class KVMInterface
    {
        public int[] a = new int[5];

        public KVMInterface()
        {
            intialize();
        }
        void intialize()
        {
            for (int i = 0; i < a.Length; i++)
            {
                a[i] = i;
            }
        }
    } 
```

# android - 支持不同的屏幕尺寸

> ID：12491870
> 
> 赞同：0
> 
> 时间：2012-09-19T09:24:10.137
> 
> 标签：android

我有一个可以在不同类型的 android 设备上运行的应用程序的项目：-small device :example samsung ace -normal device:samsung galaxi s3 -tablet 10''

我的布局很复杂，使用 match_parent 和“dp”是不够的。我已阅读： http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)但我并不完全理解。

我是否必须在`res/layout-sw720dp/main_activity.xml`文件夹中创建更多的 XML，我是否必须使用不同的限定符？它究竟是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:28:26.533

对于不同的屏幕尺寸，以下是一个应用程序中的资源目录列表，为不同的屏幕尺寸提供不同的布局设计。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

Manifest 中的以下代码支持所有 dpi。

```
<supports-screens android:smallScreens="true" 
          android:normalScreens="true" 
          android:largeScreens="true"
          android:xlargeScreens="true"
          android:anyDensity="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:33:31.427

如果您想为不同的设备创建 1 个应用程序，那么您必须使用 sdk 中定义的 android 不同的文件夹

例如

```
drawable-ldpi - to place the images for the low screen density devices(240*320)
drawable-mdpi - to place the images for the middle screen density devices(320*480)
drawable-hdpi - to place the images for the high screen density devices(480*800)
drawable-xhdpi - to place the images for the extra high screen density devices (above 480*800) 
```

如果您想为平板电脑创建应用程序 drawble-sw720dp - 为平板电脑设备放置图像（7“）

drawable 用于放置图像。您必须为不同的可绘制文件夹创建布局

```
layout-ldpi - to place the layout for the low screen density devices(240*320)
layout-mdpi - to place the layout for the middle screen density devices(320*480)
layout-hdpi - to place the layout for the high screen density devices(480*800)
layout-xhdpi - to place the layout for the extra high screen density devices (above 480*800) 
```

android根据设备密度自动从应用程序中获取图像和布局。但为此你必须定义

```
<supports-screens android:smallScreens="true" 
          android:normalScreens="true" 
          android:largeScreens="true"
          android:xlargeScreens="true"
          android:anyDensity="true" /> 
```

以便为多种屏幕分辨率设备开发应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:19:14.697

要开发支持各种密度和分辨率的应用程序，我们应牢记以下几点：

(1) 将不同大小的图片（同名）按比例放在4个不同的文件夹中：

ldpi：mdpi：hdpi：xhdpi = 3：4：6：8

(2) 这些分辨率常用的尺寸有：

ldpi = 36 * 36 像素 mdpi = 48 * 48 像素 hdpi = 72 * 72 像素 xhdpi = 96 * 96 像素

但是您也可以使用您想要的图像尺寸。（只需尝试按照不同尺寸的比例。）在所有这些图像中，将自动选择适合设备密度的图像。

(3) 除此之外，您还可以通过编程方式获取设备的密度并相应地设置布局，如下所示：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
      switch(displayMetrics.densityDpi){ 
      case DisplayMetrics.DENSITY_LOW: 
        // layout for small sized devices.
        break; 
      case DisplayMetrics.DENSITY_MEDIUM: 
        // layout for medium-sized devices.
        break; 
      case DisplayMetrics.DENSITY_HIGH: 
        // layout for big-sized devices.
        break; 
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:30:12.283

```
Kindly Use This qualifier for your Android Project with compatible screen size.

Resource          Screen Size 

layout-small       <3 inch

layout-normal      3-4 inch

layout-large       >4 inch<7.1

layout-xlarge      7.1 - 10.1 inch 
```

如果您仍然遇到问题，请使用此教程[链接](http://www.youtube.com/watch?v=IA_oduajAuM&feature=related)

# sql - MS 访问 2003，sql 脚本

> ID：12491871
> 
> 赞同：1
> 
> 时间：2012-09-19T09:24:09.823
> 
> 标签：sql, ms-access, transactions

我如何在 MS Access 2003 sql 脚本中执行。例如 - 多次插入或更新。

我尝试执行：

*   插入 tbl (field1, field2) 值 (1,2), (3,4) -*在 (1,2)- 之后 - 必须是分号*。
*   insert ... values (1,2,3,4) -*参数数量不匹配*
*   插入 ...(1,2); insert ... (3,4) -*分号后的额外符号*。

可能我可以执行外部脚本文件？

或者我必须编写 VB/JS/Other 脚本，一次调用一个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:28:15.177

MS Access 一次只会执行一个 sql 语句，你不能放一个分号然后写下一条语句，所以是的，你需要另一个脚本或 CSV，可以直接插入。

# python - 在 Windows 中测试 Python 的内存限制

> ID：12491873
> 
> 赞同：0
> 
> 时间：2012-09-19T09:24:12.390
> 
> 标签：python, memory-consumption

我试图探测 Python 32 位内存限制。所以我写了这个小程序

```
a=[]
while 1:
    a.append(chr(65)) 
```

并查看了 Windows 任务管理器中 python.exe 的内存消耗情况。首先，我很惊讶它偶尔会减少（有时几乎减半）。其次，数量仅上升到大约 500MB（我相信在另一台 64 位机器上它会不断上升）。

计算机有 4GB 内存，windows boot>3GB 应该是活动的，我用 .patch 修补了 python.exe `imagecfg.exe -l`。没有其他相关进程在运行且总内存不超过 40%。我相信同样的程序可以在另一台计算机上运行。

有什么建议可以检查我的 python 现在是否可以达到 3GB？

# javascript - 通过原型的Javascript“类” - 未定义的变量

> ID：12491874
> 
> 赞同：0
> 
> 时间：2012-09-19T09:24:17.633
> 
> 标签：javascript, class, undefined

我正在开发一个用 Javascript 编写的倒数计时器。真的很基本。仅`setInterval`用于计时方面。我使用存储函数和变量的原型方法编写它，这样我就可以创建一个“类”。

我以这种方式调用代码。

```
function testTimer() {
    var newTimer = new CDTimer($("#voteTimer"),30,"");
    newTimer.start();
} 
```

当下面的代码运行时，`console.log`正在打印`undefined`或`NaN`.

```
function CDTimer (target, duration, callback) {
    this.target = target;
    this.duration = duration;
    this.callback = callback;
}

CDTimer.prototype.start = function() {
    this.start = new Date().getTime();
    this.interval = setInterval(this.update, 1000);
}

CDTimer.prototype.update = function() {
    console.log(this.duration, this.start);
    this.elapsed = this.duration - (new Date().getTime() - this.start) / 1000

    if (this.elapsed < 0) {
            clearInterval(this.interval);
            this.callback();
    }
    else {
        console.log(this.elapsed);
        $(this.target).text(this.elapsed);
    }
}

CDTimer.prototype.stop = function() {
    clearInterval(this.interval);
} 
```

我一定错过了一些愚蠢的事情。我的变量及其值发生了什么变化？

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:27:20.597

调用 from 的函数`setInterval`提供了一个`this`窗口，而不是计时器。

你可以这样做：

```
CDTimer.prototype.start = function() {
    this.start = new Date().getTime();
    var _this = this;
    this.interval = setInterval(function(){_this.update()}, 1000);
} 
```

请注意，MDN 提供[了详细的解释](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。

编辑以下评论：如果您不想在 start 函数中创建新变量，您可以这样做：

```
CDTimer.prototype.start = function() {
    this.start = new Date().getTime();
    this.interval = setInterval(function(_this){_this.update()}, 1000, this);
} 
```

但是我不确定这个变量创建的移动是否提高了可读性，并且它与 IE 不兼容（如果你不修补它，请参阅 MDN 的解决方案）。

# c# - 如何获取窗口下的快照图像？

> ID：12491879
> 
> 赞同：2
> 
> 时间：2012-09-19T09:24:35.613
> 
> 标签：c#, wpf, transparency, screen-capture

我想淡入一个 WPF 窗口，但我不能这样做，除非窗口设置为透明并且窗口样式设置为无，我不希望那样。取而代之的是，我想通过将窗口下方的任何内容放在窗口顶部来创建窗口正在淡入的错觉，然后逐渐降低不透明度，以便将其带入视野。

我知道，为了使另一个具有透明度且没有边框的窗口必须用作保存捕获的图像并执行淡入淡出的对象。

所以理论上我知道我想要什么，但我不知道如何将 WPF 窗口下的任何内容捕获为图像。当然，我要显示的界面会一直隐藏，直到抓拍完成，所以上面的窗口并没有抓拍到实际的界面，我只会在抓图后才显示GUI，所以可以在图像开始失去不透明度后显示。

这只是对我需要这个的解释。基本问题是：**如何将窗口下的任何内容捕获到图像中（即使它要求窗口是透明的）？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T14:40:44.077

在这里找到一篇文章，描述了我需要的几种方法：http: [//www.codeproject.com/Articles/91487/Screen-Capture-in-WPF-WinForms-Application](http://www.codeproject.com/Articles/91487/Screen-Capture-in-WPF-WinForms-Application)

# jquery - 拆分数字并将每个数字放在单独的html元素中

> ID：12491882
> 
> 赞同：0
> 
> 时间：2012-09-19T09:24:45.990
> 
> 标签：jquery, loops, split

问题是我不知道如何打破第一个数字的循环并重新开始下一个数字。目前，一个**span.nNumber**具有两个数字的总位数 (123456)，而下一个**span.nNumber**仅包含来自另一个数字 (456) 的数字。目标是创建序列 123 和 456：

**标记**：

```
<span class='nNumber'>
 <span>1</span>
 <span>2</span>
 <span>3</span>
</span> 

<span class='nNumber'>
 <span>4</span>
 <span>5</span>
 <span>6</span>
</span> 
```

JavaScript（**[示例](http://jsfiddle.net/PZ8Pt/2/)**）：

```
$('div .number').each(function(){
    var number = $(this).text();
    var i = 0;

    $(this).parent().prepend($("<span class='nNumber'></span>"));
    while(i<number.length)
    {
        $(this).closest('span').hide();
        var nChar = number.charAt(i);  
        i++;
        $('.nNumber').append('<span class="digit-'+nChar+'">'+nChar.split(" ").join(", ")+'</span>');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:37:38.773

在您的`while`循环中，使用以下内容；

```
$(this).parent().find('.nNumber').append('<span class="digit-'+nChar+'">'+nChar+'</span>'); 
```

这样，您将始终修改您正在迭代的`nNumber`类。`div`如果您使用`$(".nNumber")`，您将获得类为 的*所有*元素`nNumber`，甚至是那些不在您当前的`div`. 这就是为什么第二次迭代`.each()`将额外的数字添加`456`到第一个`span`。

**[演示](http://jsfiddle.net/E5HhN/)**。

# c# - 如何使用 DataGridComboBoxColumn？

> ID：12491885
> 
> 赞同：2
> 
> 时间：2012-09-19T09:24:54.123
> 
> 标签：c#, wpf, datagrid, datagridcomboboxcolumn

我创建了一个`DataGrid`并以`DataGridComboBoxColumn`编程方式添加了一个。

```
public partial class MainWindow : Window
{

    private DataGridComboBoxColumn weightColumnChar = new DataGridComboBoxColumn();
    ObservableCollection<int> mComboBoxValues;
    public ObservableCollection<int> ComboBoxValues
    {
        get { return this.mComboBoxValues; }
        set { this.mComboBoxValues = value; }
    }//end property
    public MainWindow()
    {
        InitializeComponent();
        mComboBoxValues = new ObservableCollection<int>() {-1, 0, 1 };
    }//end constructor
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        weightColumnChar.Header = "Weight";
        dataGrid_Char.Columns.Add(weightColumnChar);

        weightColumnChar.ItemsSource = ComboBoxValues;
        Binding binding = new Binding();
        binding.Path = new PropertyPath(ComboBoxValues[1]);
        weightColumnChar.SelectedItemBinding = binding;
    }//end method
    private void dataGrid_Char_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

    }//end method
    //Opens ComboBox on first click
    private void dataGrid_Char_GotFocus(object sender, RoutedEventArgs e)
    {
        if (e.OriginalSource.GetType() == typeof(DataGridCell))
        {
            DataGrid grd = (DataGrid)sender;
            grd.BeginEdit(e);
        }//end if
    }//end method
}//end class 
```

我在其中添加了一个`ItemsSource`并从`ObservableCollection`.

集合中的值在运行时显示。

我的问题是，如果我从该值中选择一个值，`ComboBox`则不会选择并在之后显示。我究竟做错了什么？

而且我还想选择一个默认值。这是如何运作的？

请以编程方式而不是在 XAML 中解释！

如果有人可以帮助我，那就太好了。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:24:28.563

首先，您还没有显示绑定到 DataGrid 的基础集合是什么。

您将需要类似的东西`DataGrid.ItemsSource = new ObservableCollection<MyClass>();`（它必须是支持更改通知的集合，因此我选择了 ObservableCollection）。

其次，您将其绑定`ComboBox.SelectedItemBinding`到`ComboBox.ItemsSource`无意义的。`ComboBox.ItemsSource`是您可以选择的值的集合，`ComboBox.SelectedItemBinding`（我实际上会使用`ComboBox.SelectedValueBinding`）是包含/表示最终值的基础数据源的“路径”（例如**MyClass.IntProperty**）。因此，您从集合中选择一个值并将其分配给某个数据项（您不能将其分配回您从中选择的集合）。

PS！如果您稍后使用类似于 KeyValuePair 的东西（例如 Id; Name）作为您的`ComboBox.ItemsSource`，那么您设置`ComboBox.SelectedValuePath = Id; ComboBox.DisplayMemberPath = Name;`. 在这种情况下，**MyClass.IntProperty**将包含**Id值。**

# python - Jinja2 无法使用 webapp2 呈现数据 html 问题

> ID：12491891
> 
> 赞同：0
> 
> 时间：2012-09-19T09:25:16.777
> 
> 标签：python, jinja2, webapp2

在 main.py 代码中：

```
# -*- coding: utf-8 -*-

import os
import time
import re
import urllib
import urllib2
import MySQLdb

import webapp2
import jinja2

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
            autoescape = True)

class Handler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class MainPage(Handler):
    def get(self):
        self.render('front.html')

    def post(self):
        hostip = self.request.get('hostip')
        username = self.request.get('username')
        dbname = self.request.get('dbname')
        password = self.request.get('password')

        if hostip and username and dbname and password:
            conn = MySQLdb.connect(host = hostip, user = username, passwd = password, db = dbname)
            cur = conn.cursor()
            cur.execute("show tables")
            alltable = cur.fetchall()
            tablenames = []
            for i in range(len(alltable)):
                for j in range(len(alltable[i])):
                    tablenames.append(alltable[i][j])
            finalname = tablenames

app = webapp2.WSGIApplication([('/', MainPage)],
                                debug = True)

def main():
    from paste import httpserver
    httpserver.serve(app, host = '127.0.0.1', port = '8888')

if __name__ == '__main__':
    main() 
```

在 front.html 中：

```
<html>
<body>
    <h1>ACCESS YOUR SQL</h1>

    <form method = "post" accept-charset="UTF-8" action="/"/>
        <label>
            <div>SQL Host IP</div>
            <input type="text" name="hosttip" value="{{hostip}}">
        </label>

        <label>
            <div>UserName</div>
            <input type="text" name="username" value="{{username}}">
        </label>

        <label>
            <div>DBname</div>
            <input type="text" name="dbname" value="{{dbname}}">
        </label>

        <label>
            <div>Password</div>
            <input type="password" name="password" value="{{password}}">
        </label>

        <input type="submit" value="submit">
    <form>

    <hr>

    {% for tablename in finalname %}

        <form>
            <input type="checkbox" name="tablename">{{tablename}}

        </form>
    {% endfor %}

</body>
</html> 
```

填充并运行后，front.html什么都没有返回，无法返回fetchall的数据，代码有什么问题，有人可以帮我解决吗？非常非常非常感谢:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:35:00.337

渲染页面时：

```
self.render('front.html') 
```

您还必须将您在页面中引用的数据传递给它

尝试这个

```
from flask import render_template 
```

然后用数据渲染你的页面

```
return render_template('front.html',hostip = hostip, username = username) 
```

现在你可以使用

```
{{ hostip }} 
```

并访问您在 render_template 调用中作为 hostip 传递的任何内容。

此处有关该用法的信息：http: [//jinja.pocoo.org/docs/templates/#variables](http://jinja.pocoo.org/docs/templates/#variables)

最简单的用法就是这样：

```
>>> from jinja2 import Template
>>> template = Template('Hello {{ name }}!')
>>> template.render(name='John Doe')
u'Hello John Doe!' 
```

[http://jinja.pocoo.org/docs/intro/](http://jinja.pocoo.org/docs/intro/)

# java - Eclipse RCP Spring 集成错误

> ID：12491892
> 
> 赞同：2
> 
> 时间：2012-09-19T09:25:22.953
> 
> 标签：java, eclipse, spring, eclipse-plugin, eclipse-rcp

我遇到了问题，将 Spring 集成到我的 eclipse rcp 项目中。基本上，为了避免混淆，我创建了一个简单的带有视图的 Hello RCP，从现有的 jars（用于 spring Jars）创建了一个插件，将此项目添加到 Hello RCP 中，并将视图作为依赖项，我放置了 applicationContext.xml文件在我的 RCP 项目的 src 文件夹中。当我将 applicationContext.xml 放在 src 文件夹中时，它总是抛出 FileNotFoundException 。作为一种解决方法，我也尝试过使用绝对路径

```
ApplicationContext applicationContext = new FileSystemXmlApplicationContext("E:/applicationContext.xml"); 
```

这种方法thorws ClassNotFoundException: Cannot find class with bean Name .....

对于普通的 Java 应用程序，它适用于我。我该怎么做，在 Eclipse RCP 中放置 applicationContext.xml 的位置，是否有任何简单的教程用于将 spring 与 eclipse rcp 集成。如何摆脱这个问题并在我的应用程序中使用 spring。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:07:54.410

Spring DM 是集成 spring 和 osgi 的一个选项。在 osgi 中将 spring bean 公开为服务。

# pinterest - Pinterest 描述中详细 url 的多个参数

> ID：12491895
> 
> 赞同：4
> 
> 时间：2012-09-19T09:25:25.870
> 
> 标签：pinterest

我正在我的网站中集成 Pin it 功能，但我无法在 url 或 description 中传递多个参数。我尝试过以下代码

```
 $detail_wow_pin = $baseurl.'/wow/Wowitems/wowdetail?
obj_id='.$obj_id.'&amp;obj_type='.$obj_type;

        <a href="http://pinterest.com/pin/create/button/?
url=http://softprodigy.in/thinkbright/wow/Wowitems&media=<?=$wowimg?>
&description=<?='http://'.$_SERVER['SERVER_NAME'].''.$detail_wow_pin?>" 
count-layout="none">
    <img src="<?php echo IMG_WOWS; ?>/img/pinterest.png" alt="">
    </a> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T17:44:05.567

我发现正确编码整个href的url，确认与符号（&）在href属性内编码为&。此外，& 在 url 参数中编码为 %26 并将 url 参数移动到 href 属性中的最后一个位置，当从您的 pin it 板上单击时，将正确地创建返回包含图像的页面的链接。

例子：

```
<a href="//pinterest.com/pin/create/button/?media=http%3a%2f%2example.com%2fImages%2fimage.jpg&amp;description=Example+description.&amp;url=http%3A%2F%2Fexample.com%2FExample%2FExample.php%3Fparam1%3Dvalue1%26param2%3Dvalue2%26param3%3Dvalue3"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:22:33.853

**Pinterest 的动态链接**

> 下面的代码将为不同的页面生成动态 pinterest 按钮。

```
<a href="http://pinterest.com/pin/create/button/?url=http://www.example.com/page-one&amp;media=http://www.example.com/image/cache/data/image.jpg&amp;description=description will come here" class="pin-it-button" count-layout="none">
 <img src="http://assets.pinterest.com/images/PinExt.png" data-cfsrc="//assets.pinterest.com/images/PinExt.png" title="Pin It" border="0">
</a> 
```

# apache - 如果使用 .htaccess 从给定目录请求 PDF，我如何重定向？

> ID：12491901
> 
> 赞同：0
> 
> 时间：2012-09-19T09:25:55.457
> 
> 标签：apache, .htaccess, redirect, rewrite

我有一堆 PDFS 在：/uploads/dashboard/

我想做的是，如果从此目录请求 PDF，则重定向到一个脚本，该脚本检查用户的当前会话是否允许他们访问 PDF。如果用户被允许，脚本将提供 PDF。

这就是我所在的位置：

```
RewriteCond %{REQUEST_URI}/dashboard \.(pdf)$ [NC]   # If filename ends with .pdf and is in the 'dashboard' directory
RewriteRule ^(.*)$ dl/$1 [L,R]              # Redirect the user to the auth script 
```

但是，我不断收到当前代码的 404 错误。

这是一个带有 PHP 5.3 的 Zend Framework 应用程序 下面是我的 .htaccess 的全部内容：

```
php_flag magic_quotes_gpc Off

SetEnv APPLICATION_ENV development

RewriteEngine On

# Force trailing slash
RewriteCond %{REQUEST_URI}/dashboard \.(pdf)$ [NC]    # If filename ends with .pdf or .cdr
RewriteRule ^(.*)$ dl/$1 [L,R]              # Redirect the user to the other site

RewriteCond %{REQUEST_URI} !.(jpe?g|gif|png|js|css|swf|flv)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_METHOD} !=POST
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ %{REQUEST_URI}/ [L,R=301]

RewriteCond %{REQUEST_URI} .(jpe?g|gif|png|js|css|swf|flv)$ [NC,OR]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:28:50.120

你只需要这样的东西..

```
RewriteRule ^path/to/pdfs/(.*).pdf       dl/$1.pdf [NC, L] 
```

# asp.net-mvc - ASP.NET | STAThread属性错误

> ID：12491902
> 
> 赞同：0
> 
> 时间：2012-09-19T09:25:56.297
> 
> 标签：asp.net-mvc, vb.net, razor

我想在 MVC razor(VB) 语法中单击按钮时打开一个 FolderBrowseDialog。

为此，我在“onclick”按钮事件上调用 jquery 函数，并通过该函数发出 Post 请求以在我的控制器中运行，其中包含显示 FolderBrowseDialog 的代码。

这是我的代码。

html:

```
<input type="button" class="btn" value="browse" onclick="SelectFolder()"/> 
```

jQuery：

```
<script type="text/javascript">

function SelectFolder()
{
    $.post("@Url.Action("FolderPicker", "Home")", function () {
            alert('sdd');
        },function(ex){
            alert("Error occured in AJAX");  
    });
}

</script> 
```

Controller.. vb代码显示FolderBrowserDialog。

```
<STAThreadAttribute()>
Sub FolderPicker()
    Dim browser As FolderBrowserDialog = New FolderBrowserDialog()
    browser.Description = "Select Folder"
    browser.ShowNewFolderButton = False
    browser.RootFolder = Environment.SpecialFolder.Desktop
    Dim result As DialogResult = browser.ShowDialog()

    If result = DialogResult.OK Then
        Dim selectedPath As String = browser.SelectedPath
    End If

End Sub 
```

在 Dim 结果 As DialogResult = browser.ShowDialog() 我遇到异常

```
Current thread must be set to single thread apartment (STA) mode before OLE  

calls can be made. Ensure that your Main function has STAThreadAttribute  

marked on it. This exception is only raised if a debugger is attached to the  

process. 
```

我还包括了 STATreadAttribute() 和 STATread() 但我仍然收到此错误。

我错过了什么吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:29:03.223

STATreadAttribute 应该在程序的 Main 函数上，表示程序的入口点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:33:10.620

FolderBrowseDialog 在 ASP.NET/MVC 中不可用。[你可以在这里](https://stackoverflow.com/questions/6506090/using-folderbrowserdialog-in-asp-net)
阅读更多内容。

# c# - 基于 MVC4 MEF 的动态加载插件

> ID：12491904
> 
> 赞同：18
> 
> 时间：2012-09-19T09:26:03.967
> 
> 标签：c#, asp.net-mvc-4, mef

**更新：在这篇文章中阅读下面的最小解决方案**

我对带有插件的 MVC4 解决方案有一些新手问题。我用谷歌搜索了一下，发现了一些好东西，但它并不完全符合我的要求，所以我在这里寻求一些建议。

似乎 MVC 中类似小部件的插件的最佳解决方案是可移植区域（在 MvcContrib 包中）。我在这里找到了基本指导：

[http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/](http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/)

以及一些有用的提示：

[http://geekswithblogs.net/michelotti/archive/2010/04/05/mvc-portable-areas-ndash-web-application-projects.aspx](http://geekswithblogs.net/michelotti/archive/2010/04/05/mvc-portable-areas-ndash-web-application-projects.aspx)

这篇文章中的更多内容：

[如何将 ASP.NET MVC 区域创建为插件 DLL？](https://stackoverflow.com/questions/11482768/how-to-create-asp-net-mvc-area-as-a-plugin-dll)

这一切都很酷，但遗憾的是我的要求有点不同：

1.  不幸的是，我需要一个动态添加和发现插件的系统，而便携式区域并非如此，它必须由主 MVC 站点项目引用。我只想将一些东西上传到站点并让它发现和使用新组件，所以我将为此使用 MEF。

2.  幸运的是，我的插件不会像小部件那样可能非常复杂和异构；相反，它们是必须遵循共同、共享模式的组件。将它们想象成专门的编辑器：对于每种数据类型，我将提供一个具有编辑功能的组件：新建、编辑、删除。所以我在考虑实现一个通用接口并提供新建、编辑、删除等操作的插件控制器。

3.  我必须使用 MVC4，将来我必须添加本地化和移动自定义。

4.  我必须避免来自复杂框架的依赖，并使代码尽可能简单。

所以，每当我想在这个网站上添加一个新的数据类型进行编辑时，我只想在它的插件文件夹中放置一个 DLL，用于逻辑东西（控制器等），以及正确位置的一些视图，以获取该站点发现并使用新的编辑器。

最终我可以将视图包含在 DLL 本身中（我发现了这个：[http](http://razorgenerator.codeplex.com) ://razorgenerator.codeplex.com ，本教程： http: [//www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled -razor-views-in-your-dll/](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，我想我可以将它与 codeplex razorgenerator 一起使用，因为它引用的代码与 VS2012 不兼容），但可能我最好将它们分开（也是因为本地化和移动感知要求）；我正在考虑向我的站点管理区域添加上传机制，您可以在其中上传带有控制器和文件夹的 DLL 的单个 zip，然后让服务器在需要的地方解压缩和存储文件。这将使我能够轻松地修改视图，而无需再次部署整个加载项。

于是我开始寻找MEF和MVC，但是大部分帖子都提到了MVC2并且不兼容。我的运气更好，它主要专注于 Web API，但看起来很有前途且足够简单：

[http://kennytordeur.blogspot.it/2012/08/mef-in-aspnet-mvc-4-and-webapi.html](http://kennytordeur.blogspot.it/2012/08/mef-in-aspnet-mvc-4-and-webapi.html)

这实质上将基于 MEF 的依赖解析器和控制器工厂添加到“标准”MVC 应用程序。无论如何，帖子中的示例是指单组件解决方案，而我需要部署几个不同的插件。所以我稍微修改了代码以使用指向我的插件文件夹的 MEF DirectoryCatalog（而不是 AssemblyCatalog），然后创建了一个测试 MVC 解决方案，在类库中有一个插件。

无论如何，当我尝试加载插件控制器时，框架会使用 null 类型调用我的工厂 GetControllerInstance，因此 MEF 当然无法继续进行组合。可能我遗漏了一些明显的东西，但我是 MVC 4 的新手，欢迎任何建议或有用的（符合 MVC4 的）链接。谢谢！

这是基本代码：

```
公共静态类 MefConfig
{
    公共静态无效RegisterMef（）
    {
        CompositionContainer 容器 = ConfigureContainer();

        ControllerBuilder.Current.SetControllerFactory(new MefControllerFactory(container));

        System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver =
            新的 MefDependencyResolver（容器）；
    }

    私有静态 CompositionContainer ConfigureContainer()
    {
        //AssemblyCatalog assemblyCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());

        DirectoryCatalog 目录 = 新 DirectoryCatalog(
            HostingEnvironment.MapPath("~/Plugins"));
        组合容器容器 = 新组合容器（目录）；
        返回容器；
    }
}

公共类 MefDependencyResolver : IDependencyResolver
{
    私有只读 CompositionContainer _container；

    公共 MefDependencyResolver（CompositionContainer 容器）
    {
        _container = 容器；
    }

    公共 IDependencyScope BeginScope()
    {
        返回这个；
    }

    公共对象 GetService（类型 serviceType）
    {
        var export = _container.GetExports(serviceType, null, null).SingleOrDefault();
        return (export != null ? export.Value : null);
    }

    公共 IEnumerable GetServices（类型 serviceType）
    {
        var export = _container.GetExports(serviceType, null, null);
        列出 createdObjects = new List();

        如果（出口。任何（））
            createdObjects.AddRange(exports.Select(export => export.Value));

        返回创建的对象；
    }

    公共无效处置（）
    {
    }
}

公共类 MefControllerFactory : DefaultControllerFactory
{
    私有只读 CompositionContainer _compositionContainer;

    公共 MefControllerFactory(CompositionContainer compositionContainer)
    {
        _compositionContainer = 合成容器；
    }

    受保护的覆盖 IController GetControllerInstance(
        System.Web.Routing.RequestContext requestContext，类型控制器类型）
    {
        if (controllerType == null) throw new ArgumentNullException("controllerType");
        var export = _compositionContainer.GetExports(controllerType, null, null).SingleOrDefault();

        IController 结果；

        if (null != export) result = export.Value as IController;
        别的
        {
            结果 = base.GetControllerInstance(requestContext, controllerType);
            _compositionContainer.ComposeParts(结果);
        } //否则

        返回结果；
    }
}

```

您可以从这里下载完整的测试解决方案：

[http://www.filedropper.com/mvcplugins](http://www.filedropper.com/mvcplugins)

## 编辑：第一个可行的最小解决方案

这是我的发现，希望它们对从这些东西开始的其他新手有用：我没有成功运行上述回复中引用的框架，我想必须为 VS2012 和 MVC4 更新一些东西。无论如何，我查看了代码并搜索了更多内容：

1）首先，对我来说，混淆的根源是两个具有相同名称的不同接口：IDependencyResolver。如果我理解得很好，一个（System.Web.Http.Dependencies.IDependencyResolver）用于 webapi，另一个（System.Web.Mvc.IDependencyResolver）用于通用 DI。这篇文章在这里帮助了我：http: [//lucid-nonsense.co.uk/dependency-injection-web-api-and-mvc-4-rc/](http://lucid-nonsense.co.uk/dependency-injection-web-api-and-mvc-4-rc/)。

2) 另外，第三个组件是 DefaultControllerFactory 派生的控制器工厂，这对本文至关重要，因为它是用于插件托管控制器的工厂。

以下是我对所有这些的实现，对几个示例稍作修改：首先是 HTTP 解析器：

```
公共密封类 MefHttpDependencyResolver : IDependencyResolver
{
    私有只读 CompositionContainer _container；

    公共 MefHttpDependencyResolver（CompositionContainer 容器）
    {
        if (container == null) throw new ArgumentNullException("container");
        _container = 容器；
    }

    公共对象 GetService（类型 serviceType）
    {
        if (serviceType == null) throw new ArgumentNullException("serviceType");

        字符串名称 = AttributedModelServices.GetContractName(serviceType);

        尝试
        {
            返回 _container.GetExportedValue(name);
        }
        抓住
        {
            返回空值；
        }
    }

    公共 IEnumerable GetServices（类型 serviceType）
    {
        if (serviceType == null) throw new ArgumentNullException("serviceType");

        字符串名称 = AttributedModelServices.GetContractName(serviceType);

        尝试
        {
            返回 _container.GetExportedValues(name);
        }
        抓住
        {
            返回空值；
        }
    }

    公共 IDependencyScope BeginScope()
    {
        返回这个；
    }

    公共无效处置（）
    {
    }
}

```

然后是 MVC 解析器，它非常相似，即使对于这种情况下的虚拟样本严格来说不是必需的：

```
公共类 MefDependencyResolver : IDependencyResolver
{
    私有只读 CompositionContainer _container；

    公共 MefDependencyResolver（CompositionContainer 容器）
    {
        if (container == null) throw new ArgumentNullException("container");
        _container = 容器；
    }

    公共对象GetService（类型类型）
    {
        if (type == null) throw new ArgumentNullException("type");

        字符串名称 = AttributedModelServices.GetContractName(type);

        尝试
        {
            返回 _container.GetExportedValue(name);
        }
        抓住
        {
            返回空值；
        }
    }

    公共 IEnumerable GetServices（类型类型）
    {
        if (type == null) throw new ArgumentNullException("type");

        字符串名称 = AttributedModelServices.GetContractName(type);

        尝试
        {
            返回 _container.GetExportedValues(name);
        }
        抓住
        {
            返回空值；
        }
    }
}

```

最后是控制器工厂：

```
[导出（类型（IControllerFactory））]
公共类 MefControllerFactory : DefaultControllerFactory
{
    私有只读 CompositionContainer _container；

    [导入构造函数]
    公共 MefControllerFactory（CompositionContainer 容器）
    {
        if (container == null) throw new ArgumentNullException("container");
        _container = 容器；
    }

    公共覆盖 IController CreateController(RequestContext requestContext, string controllerName)
    {
        var 控制器 = _container
            .GetExports()
            .Where(c => c.Metadata.Name.Equals(controllerName, StringComparison.OrdinalIgnoreCase))
            .Select(c => c.Value)
            .FirstOrDefault();

        返回控制器 ?? base.CreateController(requestContext, controllerName);
    }
}

```

至于示例控制器，我将它创建到一个类库项目中：

```
[导出（类型（IController））]
[PartCreationPolicy(CreationPolicy.NonShared)]
[导出元数据（“名称”，“Alpha”）]
公共密封类 AlphaController : 控制器
{
    公共行动结果索引（）
    {
        ViewBag.Message = "你好，这是插件控制器！";

        返回视图（）；
    }
}

```

在主项目（MVC 站点）中，我有一个 Plugins 文件夹，我在其中复制此 DLL，并在其文件夹中为该控制器的视图加上一组“标准”视图。

这是最简单的情况，可能还有更多需要找出和改进的地方，但我需要从简单开始。无论如何，欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-12T19:26:57.113

我目前正在处理同样的问题。我找到了这个解决方案：

*   博文：http: [//blog.longle.net/2012/03/29/building-a-composite-mvc3-application-with-pluggable-areas/](http://blog.longle.net/2012/03/29/building-a-composite-mvc3-application-with-pluggable-areas/)
*   源代码：[https ://bitbucket.org/darincreason/mvcapplication8.web](https://bitbucket.org/darincreason/mvcapplication8.web)

基本上，它从指定位置加载程序集，并在 Web 应用程序启动时使用一些名称模式：

装配信息.cs：

```
[assembly: PreApplicationStartMethod(
  typeof(PluginAreaBootstrapper), &quot;Init&quot;)] 
```

PluginAreaBootstrapper.cs：

```
public class PluginAreaBootstrapper
{
    public static readonly List<Assembly> PluginAssemblies = new List<Assembly>();

    public static List<string> PluginNames()
    {
        return PluginAssemblies.Select(
            pluginAssembly => pluginAssembly.GetName().Name)
            .ToList();
    }

    public static void Init()
    {
        var fullPluginPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Areas");

        foreach (var file in Directory.EnumerateFiles(fullPluginPath, "*Plugin*.dll", SearchOption.AllDirectories))
            PluginAssemblies.Add(Assembly.LoadFile(file));

        PluginAssemblies.ForEach(BuildManager.AddReferencedAssembly);

        // Add assembly handler for strongly-typed view models
        AppDomain.CurrentDomain.AssemblyResolve += AssemblyResolve;
    }

    private static Assembly AssemblyResolve(object sender, ResolveEventArgs resolveArgs)
    {
        var currentAssemblies = AppDomain.CurrentDomain.GetAssemblies();
        // Check we don't already have the assembly loaded
        foreach (var assembly in currentAssemblies)
        {
            if (assembly.FullName == resolveArgs.Name || assembly.GetName().Name == resolveArgs.Name)
            {
                return assembly;
            }
        }

        return null;
    }
} 
```

但我相信您可以创建一些可以动态加载程序集的目录观察器，因此您甚至不需要重新启动 Web 应用程序。

在我看来，它满足您的 1、2 和 4 需求。它非常简单，不需要任何框架，具有最少的配置，允许动态加载插件并与 MVC 4 一起使用。

该解决方案将程序集插入到 Area 目录中，但我相信您可以很容易地使用路由对其进行调整，使其随心所欲地播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:44:03.603

您可以在此处找到更完整的解决方案，并[在此处](http://www.fidelitydesign.net/?p=159)找到更多背景[信息](http://www.fidelitydesign.net/?p=259)。我们的要求也是 DI，所以[这](http://shazwazza.com/post/MVC-Controllers-as-plugins-with-MEF-and-Autofac.aspx)也会有所帮助，尽管不需要（第一个链接也为 DI 提供解决方案。祝你好运，这并不难。另请注意，这些适用于 MVC3，但很容易转换/迁移到 MVC 4

# php - Doctrine2 减去两个日期时间

> ID：12491905
> 
> 赞同：-2
> 
> 时间：2012-09-19T09:26:04.840
> 
> 标签：php, datetime, doctrine-orm

因此，在我的数据库中，我得到了一个日期时间字段，其中填充了例如 2012-09-19 11:20:33。现在我正在尝试获取日期时间。

```
$blabla = $something->getDatetime(); 
```

之后我创建一个新的 DateTime，它代表现在的时间

```
$now = new \DateTime("now"); 
```

之后我想像这样减去它们（但它不起作用）？

```
$test1 = strtotime($blabla);
$test2 = strtotime($now);
$diff = $test2 - $test1; 
echo $diff; 
```

我的目标是从现在的时间中减去数据库中的持久日期时间......结果应该以秒为单位显示......所以 2012-09-19 11:22:22 - 2012-09-19 11:20:22等于 120（秒）。

我还尝试将 unix 时间戳保存到我的数据库中，但不幸的是字段类型时间戳不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:06:22.357

如果您希望以秒为单位显示答案，则只需减去时间戳：-

```
$blabla = $something->getDatetime();
$now = new DateTime();
$seconds = $now->getTimestamp() - $blabla->getTimestamp(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:28:01.657

```
$blabla = $something->getDatetime();
$now = new \DateTime("now");
$diff = $now->diff($blabla); 
```

请记住 $diff 是一个[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)对象，您必须使用它的方法和属性来获得最终所需的结果。

# iphone - Dropbox图片上传结果认证错误

> ID：12491908
> 
> 赞同：0
> 
> 时间：2012-09-19T09:26:21.800
> 
> 标签：iphone, objective-c, ios, dropbox

我正在开发一个将图像上传到 Dropbox 的 iphone 应用程序。我使用以下代码上传图片。

```
NSData *datobj = UIImagePNGRepresentation(pic.image);
    NSString *stringConvertion = [[NSString alloc] initWithData:datobj encoding:NSUTF8StringEncoding];
    NSString *filename = stringConvertion;
    NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Temp.png"];
    [UIImagePNGRepresentation(pic.image) writeToFile:tmpPngFile atomically:NO];
    NSString *destDir = @"/";
    [[self restClient] uploadFile:filename toPath:destDir
                    withParentRev:nil fromPath:tmpPngFile]; 
```

但我收到如下错误，向 /1/files_put/dropbox 发出请求时出错 - 身份验证失败 我该如何进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:09:45.687

在 info.plist 的第一个标签下方添加以下代码

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>db-dz0h38qnvcwrzhk</string>
            </array>
        </dict>
    </array> 
```

# mysql - 如何从多个表中获取数据？

> ID：12491909
> 
> 赞同：2
> 
> 时间：2012-09-19T09:26:28.033
> 
> 标签：mysql, sql

我想要的是来自 tbmedAssign 的所有记录，其中 zoneid 或区域名称作为参数给出。如何为此编写查询？请帮忙。

表名 tablzone

```
zone_id(PK)   ZoneName
-----------   --------
1             east
2             west
3             north
4             south

tbluser

usrId(PK) userzoneId(FK to tblzone)   username
--------  -------------------------   ------------
1         1                           manish
2         3                           rahul
3         2                           ankit
4         4                           amir
5         2                           rashmi
6         1                           akash
tbldoctor

docId(PK)    usrId(Fk to tbluser)      docname
--------     --------------------      ------------
1             2                        hemant
2             2                        chintu
3             3                        rahim
4             1                        salman
5             3                        kishor
6             3                        saurabh
7             2                        banti

tblmedAssign 

transId(Pk)  doctorId(FK to tbldoctor)    medId(FK)    dateInsert
----------   -------------------------    ------   -----------
1            2                            2        20/12/2012
2            3                            3        21/12/2012
3            2                            3        23/12/2012
4            4                            1        24/12/2012 
```

tblmedia

```
medid(PK)   medianame 
---------   ---------
1           casfung 
2           inem 
3           media1
4           tplan
5           casfung test 
```

我想要来自 tblmedAssign 的所有记录，其中医生属于 tbluser 中的特定用户，而在 tbluser 中，用户属于特定区域，并且区域 ID 作为参数提供？例如 zoneid= 1;

我也想在记录中选择 medianame

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:28:32.293

基本上，您需要将四个表与它们的链接列连接起来。试试这个，

```
SELECT  a.*,
        b.*,
        c.*,        
        d.*,
        e.*
FROM    tblmedAssign a
        INNER JOIN tblDoctor b
            ON a.doctorID = b.docID
        INNER JOIN tblUser c
            ON b.usrID = c.usrID
        INNER JOIN tblZone d
            ON c.userzoneID = d.zone_ID
        INNER JOIN tblmedAssign e
            ON e.medid = a.medid
WHERE   d.zone_id = @zone_id OR    -- supply value here
        d.zoneName = @zoneName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:30:38.243

通过`JOIN`三个表，类似于：

```
SELECT -- what you want to select
FROM tblmedAssign ta
LEFT JOIN tbldoctor td ON ta.doctorId = td.docId
LEFT JOIN tbluser tu ON td.usrId = tu.usrId
LEFT JOIN tablzone tz ON tu.userzoneId = tz.zone_Id
WHERE tz.zone_Id = @zoneIdParam 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:37:43.717

```
select * 
from tblmedAssign 
inner join tbldoctor on tbldoctor.docId = tblmedAssign.doctorId
inner join tbluser on tbluser.usrId = tbldoctor.usrId
inner join tablzone on tablzone.zone_id = tbluser.userzoneId
where tablzone.ZoneName = 'east' 
or tablzone.zone_id = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:17:32.320

这应该符合您的目的

```
select * 
from
tblmedAssign, tbldoctor, tbluser, tablzone 
where
tblmedAssign.doctorId = tbldoctor.docId and 
tbldoctor.usrId = tbluser.usrId and 
tbluser.userzoneId =  tablzone.zone_id and 
(tablzone.zone_id = x or tablzone.ZoneName = 'y') 
```

# facebook - facebook 应用程序突然显示 ssl 错误

> ID：12491911
> 
> 赞同：0
> 
> 时间：2012-09-19T09:26:31.767
> 
> 标签：facebook, facebook-graph-api, ssl

我正在构建一个 Facebook 应用程序。我没有https。但它在几分钟前运行良好。但是现在当我尝试以[https://apps.facebook.com/reelreview/](https://apps.facebook.com/reelreview/)访问应用程序时，它显示 SSL 错误为

```
Secure Connection Failed

      An error occurred during a connection to www.synergiadigital.com. 
```

SSL 收到超过最大允许长度的记录。

（错误代码：ssl_error_rx_record_too_long）

您尝试查看的页面无法显示，因为无法验证接收到的数据的真实性。请联系网站所有者告知他们这个问题。或者，使用帮助菜单中的命令来报告这个损坏的站点。

我知道这是由于缺少 https，但我怀疑它在几分钟前运行良好。在过去的几天里也运行良好。突然显示错误。

我无法找到确切的原因和解决方案，

请帮我 ，

真挚地，

苏尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:57:20.857

您是否检查了您的帐户设置 -> 安全 -> 安全浏览？也许您错误地将其更改为“通过安全连接浏览 Facebook”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T08:25:05.300

*这不是直接回答您关于应用程序的问题 - 但无论如何都要回答，因为这是错误消息在谷歌上的热门点击之一。*

当在 HTTPS (SSL) 连接上接收到纯 HTTP 响应时，可能会导致该错误。该站点是为 HSTS 配置的，因此之前访问过该站点的浏览器将从 http: 升级到 https: 甚至在在那里建立初始连接之前，无需重定向。

就我而言，当 TP-Link 家用路由器上的家长控制阻止该站点时，Firefox 给出了*错误代码：SSL_ERROR_RX_RECORD_TOO_LONG*，尽管连接为 https：但在 http：上发送“站点被阻止”响应页面：

[![火狐 SSL 错误](../Images/b451d560b62decb090429a412b91b94f.png)](https://i.stack.imgur.com/9mTqu.png)

这是使用另一个以前未使用过的浏览器（MS Edge），它不知道 HSTS 设置（它以前从未访问过 facebook.com），因此跟随重定向回到路由器家长控制错误页面显示更人性化的消息： [![边缘家长控制](../Images/571212ea86a6aef33efdf56faac4534e.png)](https://i.stack.imgur.com/pOVfH.png)

# php - 存储在 PHP 数组中的数据量

> ID：12491914
> 
> 赞同：0
> 
> 时间：2012-09-19T09:26:33.203
> 
> 标签：php, arrays, debugging, size

我正在寻找一种方法来测量存储在`PHP`数组中的数据量。我不是在谈论数组中的元素数量（您可以用 来[`count($array, COUNT_RECURSIVE)`](http://nl.php.net/manual/en/function.count.php)计算），而是所有键及其对应值的累积数据量。例如：

```
array('abc'=>123); // size = 6
array('a'=>1,'b'=>2); // size = 4 
```

因为我感兴趣的是数量级而不是确切的数量（我想比较处理内存和时间使用与数组的大小），所以我考虑使用以下技巧：

`strlen(print_r($array,true));`

然而，来自的开`print_r`销量取决于数组的结构，这并不能给我一致的结果：

```
echo strlen(print_r(array('abc'=>123),true)); // 27
echo strlen(print_r(array('a'=>1,'b'=>2),true)); // 35 
```

**有没有办法（理想情况下在单行中并且不会影响太多性能，因为我需要在生产运行时执行此操作）来测量 PHP 中存储在数组中的数据量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:29:57.097

这是否可以解决问题：

```
<?php
    $arr = array('abc'=>123);
    echo strlen(implode('',array_keys($arr)).implode('',$arr));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T12:48:12.697

## 简短回答：不可能完成的任务

您可以尝试以下方法：

```
 strlen(serialize($myArray))     // either this
    strlen(json_encode($myArray))   // or this 
```

但是要近似一个数组的*真实*内存占用量，您将不得不做更多的事情。如果您正在寻找一个大概的估计值，数组需要比其序列化版本多 3-8 倍，具体取决于您在其中存储的内容以及您拥有的元素数量。随着阵列的增长，它会逐渐增加，越来越大。为了让您了解正在发生的事情，经过数小时的尝试，我想出了一个数组估计函数，仅适用于单级数组：

```
function estimateArrayFootprint($a) { // copied from one of my failed quests :(
    $size = 0;
    foreach($a as $k=>$v) {
        foreach([$k,$v] as $x) {
            $n = strlen($x);
            do{
                if($n>8192 ) {$n = (1+($n>>12)<<12);break;}
                if($n>1024 ) {$n = (1+($n>> 9)<< 9);break;}
                if($n>512  ) {$n = (1+($n>> 8)<< 8);break;}
                if($n>0    ) {$n = (1+($n>> 5)<< 5);break;}
            }while(0);
            $size += $n + 96;
        }
    }
    return $size;
} 
```

所以这很容易，*不是*。再说一次，这不是一个可靠的估计，它可能取决于 PHP 内存限制、架构、PHP 版本等等。问题是您需要这个值的*准确程度。*

另外，我们不要忘记这些值来自`memory_get_usage(1)`也不是很精确的 a。PHP 以大块的形式分配内存，以避免在您的字符串/数组/其他任何内容增长时产生明显的开销，例如在某种`for(...) $x.="yada"`情况下。

我希望我能说一些更有用的话。

# android - 最好将数据传递给另一个活动或对 sqlite 进行两次查询

> ID：12491916
> 
> 赞同：1
> 
> 时间：2012-09-19T09:26:42.763
> 
> 标签：android

我有一个很大的问卷要填写，所以我决定将它分成两个活动/屏幕。我的问题是： - 我应该将数据从activity1发送到activity2（startActivityForResult）并在sqlite上插入所有数据并在activity2上插入吗？- 因为我知道行_id，我应该在activity1 上插入并在activity2 上进行更新吗？

选项 1 更好地确保用户填写所有问卷，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:07:36.350

您是否已经考虑过：

1.  在活动1中使用共享偏好，从活动2中读取，然后插入；或者，
2.  使用两个活动都可以访问的静态数组或映射？

我不知道您的安全需求是什么，但是这两个选项似乎都简单得多，尤其是第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:30:43.533

第一个选项更好，因为这样您将永远不会在数据库中获得不完整的信息（如果用户在完成第一个屏幕后退出应用程序会发生什么？）并且您只会进行唯一的调用来插入数据。

# javascript - d3 - 如何在数组上设置动画

> ID：12491922
> 
> 赞同：2
> 
> 时间：2012-09-19T09:27:03.723
> 
> 标签：javascript, animation, d3.js, transition

我对d3很陌生。目前我能够根据一组数据绘制圆圈 - 哇 - 我知道 :-) 但现在我想在为整个数组设置动画时一次绘制两个圆圈。假设我的数组中有 1000 个元素，我想同时绘制 1 和 2，然后绘制 2 和 3、3 和 4 等等。这应该会得到一个非常漂亮的动画:-) 我玩过 i index 和 exit().remove() 的函数，但这不起作用。

这就是我所拥有的：

```
var w = 500;
        var h = 300;
        var padding = 20;

        var dataset = [
                        [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
                        [410, 12], [475, 44], [25, 67], [85, 21], [220, 88],
                        [600, 150]
                      ];

        //Create SVG element
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        //Create scale functions
        var xScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) { return d[0]; })])
            .range([padding, w - padding * 2]);

        var yScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) { return d[1]; })])
            .range([h - padding, padding]);

        //Create circles
        svg.selectAll("circle")
               .data(dataset.slice(0,2))
               .enter()
               .append("circle")
               .attr("cx", function(d) {
                    return xScale(d[0]);
               })
               .attr("cy", function(d) {
                    return yScale(d[1]);
               })
               .attr("r",10);

        for (var i=0; i<4;i++) {

            svg.selectAll("circle").data(dataset.slice(i,i+2)).transition().duration(2000).delay(2000)
            .attr("cx", function(d) {
                    return xScale(d[0]);
               })
               .attr("cy", function(d) {
                    return yScale(d[1]);
               })
               .attr("r", 10);
            //svg.selectAll("circle").data(dataset.slice(i,i+1)).exit().remove();
            console.log(dataset.slice(i,i+2));
        } 
```

但我只会得到一个动画而不是 4 .. 嗯 .. 出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:40:22.910

delay 函数接受回调，因此无需将您的选择包装在 for 循环中。

```
 .delay( function(d, i) { (2000*i); } ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:49:35.660

查看代码，您有固定的持续时间 (2s) 和固定的延迟 (2s)。FOR 循环将立即运行，从而一次将所有四个动画排入队列，因此它们可能都在同时播放 - 但（可能）只有最后一个动画可见，因为您已经反弹了数据。

尝试类似：

```
svg.selectAll("circle")
   .delay( (2000*i) )
   .data(dataset.slice(i,i+2))
   .transition()
   .duration(2000)
   .attr("cx", function(d) {return xScale(d[0]);})
   .attr("cy", function(d) {return yScale(d[1]);})
   .attr("r", 10);) 
```

将延迟乘以动画计数器应该抵消每个动画，并且通过将延迟放在第一位，它应该在开始动画之前数据得到反弹（从而在第一个动画运行之前停止最后的动画步骤重新绑定它的数据）

# java - Android Dropbox 访问。使用户能够访问整个 Dropbox

> ID：12491924
> 
> 赞同：0
> 
> 时间：2012-09-19T09:27:06.447
> 
> 标签：java, android, dropbox, dropbox-api

我正在开发一个应用程序，以便用户可以访问其保管箱中的所有文件夹。我已经获得了我的应用程序的生产状态。我现在需要做的就是找到一种方法来打开我的 Dropbox 应用程序，或者以某种方式在我的应用程序中列出 Dropbox 的内容。无论哪种方式，我都需要一些帮助。

这种访问的目的是允许用户从他们的保管箱文件夹中挑选文件，然后他们将下载到应用程序中。

提前致谢。:)

# vb.net - 通过单击按钮将图像保存在 sql server DB 中

> ID：12491927
> 
> 赞同：0
> 
> 时间：2012-09-19T09:27:14.323
> 
> 标签：vb.net

我在后端语言中使用带有 vb 的 asp.net2008。我想在 sql server 数据库中上传图像文件，以便将记录保存在数据库中。当我点击保存按钮时。并且还想在网格视图表中显示保存的图像数据。带有下载选项请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:44:46.820

你可以试试

注意：

调整您的查询

调整你的参数值（字节）

调整连接

```
 Dim connetionString As String
        Dim connection As SqlConnection
        Dim adapter As New SqlDataAdapter
        Dim sql As String

        connetionString = "......."
        connection = New SqlConnection(connetionString)

        sql = "...."
        Try
            connection.Open()

            Dim cmd As New SqlCommand(sql, connection)
            cmd.Parameters.Add("@Name", SqlDbType.VarBinary)

            Dim image As [Byte]()
            cmd.Parameters("@Name").Value = image

            adapter.InsertCommand = cmd
            adapter.InsertCommand.ExecuteNonQuery()
            MsgBox("Image inserted !! ")

        Catch ex As Exception
            ......
        End Try 
```

# symfony - 在 twig+formbuilder 中更改 html 选择

> ID：12491931
> 
> 赞同：0
> 
> 时间：2012-09-19T09:27:22.377
> 
> 标签：symfony, twig, formbuilder

我想知道如何改变这个：

```
<select id="mifid-proprio" name="mifid-proprio">
    <option value="{{ personne.id }}">{{ personne.prenom }} {{ personne.nom }}</option>
    {% for key, proprietaire in proprietaires %}
        <option value="{{ proprietaire.destination.id }}">{{ proprietaire.destination.prenom }} {{ proprietaire.destination.nom }}</option>
    {% endfor %}
</select> 
```

进入 Twig + Formbuilder (Symfony 2)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:51:23.030

我认为您想在 FormBuilder 中构建该小部件。如果我是对的，您应该查看[选项 Field Type](http://symfony.com/doc/current/reference/forms/types/choice.html)的文档。当您要在该选择框中显示的数据来自数据库时，您应该查看[实体 Field Type](http://symfony.com/doc/current/reference/forms/types/entity.html)。如果您以前从未使用过 FormBuilder，您还应该阅读如何[创建表单类](http://symfony.com/doc/current/book/forms.html#creating-form-classes)。

如果您在 FormBuilder 中构建该小部件，您可以在 Twig 中输出它：

```
{{ form_widget(form.field_name) }} 
```

当您对生成的 HTML 代码不满意时，您可以在每个模板或全局基础上覆盖它。您可以阅读有关[表单主题](http://symfony.com/doc/current/book/forms.html#form-theming)的更多信息。

# r - 将文本添加到使用 r 中的函数创建的绘图

> ID：12491933
> 
> 赞同：4
> 
> 时间：2012-09-19T09:27:29.880
> 
> 标签：r, function, text, plot

我使用一个函数创建一个包含两个图的图形，即

```
data1<-1:3

basic<-function(data1){
par(mfrow=c(2,1))
plot(data1)
plot(data1)
}

basic(data1) 
```

现在我想在绘图中添加文本，而不必将其包含在函数中。但我只能将文本添加到底部情节（见下文）。

```
text(x=c(1.5,1.6,1.7),y=c(2,2.1,2.2), labels=c("X","Y","Z")) 
```

![在此处输入图像描述](../Images/a558a5c77875a0051ef2d27e7b40cf9c.png)

如何将文本添加到函数外部的顶部图？（我有很多使用相同功能创建的图形，但需要在每个图形的稍微不同的位置放置略有不同的文本标签）。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:40:45.707

为此，您可以使用 function`split.screen`而不是`par(mfrow=...)`or `layout`。

```
split.screen(c(2,1)) # Two rows of plots, one column. 
```

然后，您可以使用功能从一个“屏幕”切换到另一个`screen`。有关`?split.screen`更多信息，请参阅。

在您的示例中，提供以下内容：

```
basic <- function(data1){
    split.screen(c(2,1))
    screen(1)
    plot(data1)
    screen(2)
    plot(data1)
    }

basic(data1)
screen(1, new=FALSE)
text(x=c(1.5,1.6,1.7),y=c(2,2.1,2.2), labels=c("X","Y","Z")) 
```

![在此处输入图像描述](../Images/0626afd8397a53064073e7c04d6809ef.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:50:02.523

这是使用`par`命令执行此操作的一种方法：

```
data1 <- 1:3

basic <- function(data1) {
    out <- list()
    par(mfrow=c(2,1))

    plot(data1)
    out[[1]] <- par(no.readonly=TRUE)

    plot(data1)
    out[[2]] <- par(no.readonly=TRUE)

    invisible(out)
}

pars <- basic(data1)

par(pars[[1]])
par(mfg=c(1,1))
text( x=c(1.5,1.6,1.7), y=c(2,2.1,2.2), labels=c("X","Y","Z") )

par(pars[[2]])
par(mfg=c(2,1))
text( x=c(1.5,1.6,1.7), y=c(2,2.1,2.2), labels=c("A","B","C") )

par(pars[[1]])
par(mfg=c(1,1))
text( x=c(1.7,1.6,1.5), y=c(2,2.1,2.2), labels=c("X","Y","Z") )

par(pars[[2]])
par(mfg=c(2,1))
text( x=c(1.7,1.6,1.5), y=c(2,2.1,2.2), labels=c("A","B","C") ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:47:06.967

您可以首先概述不同的文本，例如

```
data1<-1:3

text1 <- data.frame(x=c(1.5,1.6,1.7),y=c(2,2.1,2.2), labels=c("X","Y","Z"))
text2 <- data.frame(x=c(2,2.9,1.0),y=c(2,2.1,2.2), labels=c("X","Y","Z")) 
```

然后把它们放在你的函数中

```
basic<-function(data1){
par(mfrow=c(2,1))
plot(data1)
text(text1)
plot(data1)
text(text2)
}

basic(data1) 
```

正如@Andrie 所说，调用 plot 意味着任何进一步`text()`的调用都只会在最后一个情节上起作用

![在此处输入图像描述](../Images/6e29327f1c31407032295fd8932bc52e.png)

# objective-c - NSPasteboard generalPasteboard 返回 nil

> ID：12491936
> 
> 赞同：4
> 
> 时间：2012-09-19T09:27:32.907
> 
> 标签：objective-c, cocoa, osx-mountain-lion, appkit, nspasteboard

我正在尝试将一个作为插件加载到另一个程序中的一个复制`NSString`到粘贴板。`NSBundle`

出于某种原因，`[NSPasteboard generalPasteboard]`返回 nil。

我的代码来自 Apple 的[NSPasteboard 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nspasteboard_Class/Reference/Reference.html)和[NSPasteboard 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PasteboardGuide106/Articles/pbCopying.html#//apple_ref/doc/uid/TP40008102-SW1)：

```
NSPasteboard *pasteboard = [NSPasteboard generalPasteboard];

// Outputs: (null)
NSLog(@"%@", pasteboard);

[pasteboard clearContents];
BOOL copiedToPasteboard = [pasteboard writeObjects:@[@"The string"]]; 
```

有什么我可能无意中造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:45:54.053

我已经构建了一个最小的应用程序，它加载一个包并添加了`[NSPasteboard generalPasteboard]`每个步骤返回的值的日志记录。不幸的是，我无法重现此问题。这是我得到的输出：

```
NUAppDelegate> init:<NSPasteboard: 0x100647740>
NUAppDelegate> awakeFromNib:<NSPasteboard: 0x100647740>
NUAppDelegate> applicationDidFinishLaunching::<NSPasteboard: 0x100647740>
Loading plugin
Plugin> init:<NSPasteboard: 0x100647740>
Plugin> someMethod:<NSPasteboard: 0x100647740> 
```

如果没有更多细节，我看不出我们如何找到答案。你有一些我们可以下载或检查的代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:02:19.143

通过重新安装我的操作系统解决了我的问题。

我只能假设某处某处某时某处被损坏了，导致了这个令人愤怒的问题。

# php - 用 PHP 或 Javascript 生成实际的 Youtube 下载链接

> ID：12491940
> 
> 赞同：2
> 
> 时间：2012-09-19T09:27:50.800
> 
> 标签：php, javascript, youtube, youtube-api, jplayer

我已经开发了一个媒体网站，通过在 PHP 中使用 jPlayer 来播放来自 Youtube 的视频。我在获取实际的 Youtube 下载链接以使其在我的 jPlayer 中播放时遇到问题。

假设我有一个 Youtube 链接：[https](https://www.youtube.com/watch?v=zpfNeFWA2vE) ://www.youtube.com/watch?v=zpfNeFWA2vE而我的实际下载链接是：[http://oo---preferred---hkg05s03---v12--- nonxt5.c.youtube.com/videoplayback?upn=PnVtBEZ_KJw&sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=919109%2C911646%2C920917%2C922401%2C920704%2C912806%2C913419%2C913558% 2C913556%2C925109%2C912706&ms=nxu&expire=1348071130&itag=18&ipbits=8&gcr=kh&sver=3&ratebypass=yes&mt=1348046463&ip=119.15.90.10&mv=m&source=youtube&key=yt1&cp=U0hTTVBST19ISkNOM19ITFNCOmNBYVpWN2FtYXpn&id=ce97cd785580daf1&signature=74DF90D5D04F4DA2A2D588BDAFE777594673D2EE.64E845538B00C1FAA2E0AC043DAB5C512A49E45D&redirect_counter=1&cms_redirect=yes](http://o-o---preferred---hkg05s03---v12---nonxt5.c.youtube.com/videoplayback?upn=PnVtBEZ_KJw&sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=919109%2C911646%2C920917%2C922401%2C920704%2C912806%2C913419%2C913558%2C913556%2C925109%2C912706&ms=nxu&expire=1348071130&itag=18&ipbits=8&gcr=kh&sver=3&ratebypass=yes&mt=1348046463&ip=119.15.90.10&mv=m&source=youtube&key=yt1&cp=U0hTTVBST19ISkNOM19ITFNCOmNBYVpWN2FtYXpn&id=ce97cd785580daf1&signature=74DF90D5D04F4DA2A2D588BDAFE777594673D2EE.64E845538B00C1FAA2E0AC043DAB5C512A49E45D&redirect_counter=1&cms_redirect=yes) .

这个实际的网址将在第二天过期。

是否有任何方法可以仅将[https://www.youtube.com/watch?v=zpfNeFWA2vE](https://www.youtube.com/watch?v=zpfNeFWA2vE)粘贴到 jPlayer 或 PHP 或 Javascript 中的脚本可以生成该实际链接？

**笔记**

我已经从[http://www.masnun.me/2011/05/17/phptube-a-php-class-to-get-download-links-from-youtube-watch-videos.html](http://www.masnun.me/2011/05/17/phptube-a-php-class-to-get-download-links-from-youtube-watch-videos.html)下载了 phptube 。它正在工作，但是当我从这个生成链接下载视频时，它说“我没有权限下载这个文件。403 Forbidden”

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:27:31.257

您是否确保当您使用 phptube 生成 youtube 下载链接时，您也在从服务器（而不是从客户端计算机）访问它们？您只能从用于生成它们的同一台机器上访问这些下载链接（`phptube`文章开头的作者声明）。

一个解决方案是从您的服务器生成这些链接。然后使用服务器将内容下载到它。然后使用下载的文件将其显示给用户。问题是您的服务器将不得不使用双倍的带宽，并且该过程需要时间。YouTube 只是不允许您直接共享下载链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:34:08.070

我有同样的问题！比我发现这个：

[http://navarr.me/ytaudio/?q=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DtvS5MLzJfAw&s=on&psize=s&theme=dark](http://navarr.me/ytaudio/?q=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DtvS5MLzJfAw&s=on&psize=s&theme=dark)

来源：[https ://github.com/navarr/ytaudio/](https://github.com/navarr/ytaudio/)

该脚本还创建了一个下载链接，如 phptube。但我可以从本地电脑上访问视频！

# php - 发送 HTML 电子邮件时 $_POST 不起作用

> ID：12491945
> 
> 赞同：0
> 
> 时间：2012-09-19T09:27:59.520
> 
> 标签：php, html, forms, email, post

我一直在弄清楚我的代码有什么问题。我一直`$_POST`不工作。这是我的 HTML 代码：

```
<form id="EmailForm" action="mailForm.php" method="post" 
  onsubmit="validateForm()" enctype="text/plain">
  <div>
    Name: <input type="text" value="" name="name" size="30" />
    Email: <input type="text" value="" name="email" size="30" />
    Subject: <input type="text" value="" name="subject" size="60" />
    Message: <br />
    <textarea name="message" rows="5" cols="60"></textarea>
    <input type="submit" value="Send" />
  </div>
</form> 
```

这是我的`mailForm.php`代码：

```
<?php
$name = $_POST['name']; 
$email = $_POST['email'];
$message = $_POST['message'];
$subject = $_POST['subject'];
$mailsent = mail("admin@example.com", "$subject", "$message\n\n$name\n$email", "");
if ($mailsent) {
echo ("Your email has been sent. Thank you for using our mail form. <br />");
echo ("Name: ".$name."<br />");
echo ("Email: ".$email."<br />");
echo ("Subject: ".$subject."<br />");
echo ("Message: ".$message);
}
?> 
```

到目前为止，我可以发送电子邮件，但所有电子邮件都是空的。名称或电子邮件未显示，但已从网络托管服务更改为默认名称。没有名字，没有电子邮件，没有主题，没有消息。在`mailForm.php`，我只得到以下内容：

```
Your email has been sent. Thank you for using our mail form.   
Name:
Email:
Subject: 
Message: 
```

我试过`echo $_POST["name"]; echo $_POST["email"]`了，但是页面是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:30:41.620

只需删除`enctype="text/plain"`：

```
<form id="EmailForm" action="mailForm.php" method="post" onsubmit="validateForm()"> 
```

`<form>`标记中enctype 在 PHP 中的有效值为：

```
application/x-www-form-urlencoded
multipart/form-data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:40:41.737

`enctype="text/plain"`在这种情况下，您不应在`<form>`标签中使用...

`$_POST`如果您使用该代码，php 将不会显示您的表单元素。

php 有一个名为的变量`$HTTP_RAW_POST_DATA`，当使用`enctype="text/plain"`.

所以你`<form>`在 HTML 代码中的标签应该是这样的：

```
<form id="EmailForm" action="mailForm.php" method="post" onsubmit="validateForm()"> 
```

标签中的有效`enctype`值为：`<form>`

**应用程序/x-www-form-urlencoded：**默认值。所有字符在发送前都经过编码（空格转换为“+”符号，特殊字符转换为 ASCII HEX 值）

**multipart/form-data：**空格转换为“+”符号，但不编码特殊字符 不编码字符。当您使用具有文件上传控件的表单时，此值是必需的

**text/plain：**空格转换为“+”符号，但不编码特殊字符

除了`text/plain`其他 2 种方法将在 $_POST ...

# php - 网络通知在 from chatbox

I'm trying to put web notifications in the title/tab screen of my webpage. So whenever someone new says something and you're not on the tab, the will give notifications that you have a ne

> ID：12491946
> 
> 赞同：3
> 
> 时间：2012-09-19T09:28:00.590
> 
> 标签：php, javascript, notifications, title

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:30:50.917

我建议你看看 JavaScript 函数[`setInterval()`](http://www.w3schools.com/jsref/met_win_setinterval.asp)。如果发现任何更新，则使此函数每 x 毫秒检查一次更新；编辑页面标题。

像这样的东西应该可以解决问题，调整以获得首选结果：

```
// This function will run every ~1s
setInterval(function() {

   // Get the new data
   $.post('post.php', function(data) {

      // Handle the data
      document.title = data;

   });

}, 1000); 
```

您绝对应该在 PHP 脚本上添加一些错误检查（检查是否设置了变量`isset($_SESSION['value'])`：），也可能在 javascript 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:31:07.773

请参阅 javascript 中的“document.title”。

```
var xarray = ['Someone Posted','Someone else posted'];
var i = 0;

function changeTitle(data){
  document.title = data;
}

function changeEvery5Seconds()
{
   i++;
   i = i%2;
   changeTitle(xarray[i]);
   setTimeout("changeEvery5Seconds();",5000);
}
changeEvery5Seconds(); 
```

# c# - 从另一个进程启动时的 Python 输出

> ID：12491948
> 
> 赞同：0
> 
> 时间：2012-09-19T09:28:00.493
> 
> 标签：c#, python, file-io

我有 GUI 控制器，用 C# WPF 编写，它运行带有 args 的 python 脚本。在这个 python 脚本中有一些打印和写入文件。我将 stdout 和 stderr 输出重定向到 TextBlock。但是没有一个输出不起作用。有任何想法吗？

C# 跑步者：

```
...
pr.StartInfo.FileName = pythonPath;
pr.StartInfo.Arguments = scriptPath + " " + args;
pr.StartInfo.UseShellExecute = false;
pr.StartInfo.RedirectStandardOutput = true;
pr.StartInfo.RedirectStandardError = true;
pr.StartInfo.CreateNoWindow = true;
pr.ErrorDataReceived += new DataReceivedEventHandler(sortErrorHandler);
pr.OutputDataReceived += new DataReceivedEventHandler(sortOutputHandler);
pr.EnableRaisingEvents = true;
//pr.Exited += new EventHandler(whenExitProcess);
TB.Text = "";
pr.Start();
pr.BeginOutputReadLine();
pr.BeginErrorReadLine();                
}
e.Handled = true;
}

private void sortErrorHandler(object sendingProcess, DataReceivedEventArgs outLine)
        { 
            Dispatcher.BeginInvoke(new MethodInvoker(delegate
            {
                if (!String.IsNullOrEmpty(outLine.Data))
                {
                    TB.Text += outLine.Data + Environment.NewLine;

                }
            }));

    }
    private void sortOutputHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {            
        Dispatcher.BeginInvoke(new MethodInvoker(delegate
        {
            if (!String.IsNullOrEmpty(outLine.Data))
            {                   
                TB.Text += outLine.Data + Environment.NewLine;                   
            }
        }));

    } 
```

Python：

```
print "Hello"
file.open("test", "a")
file.write("Hello again")
file.close()
... remaining code 
```

好的， sys.stderr.write("test") 正在工作，但是 stdout 和 stderr 之间可能有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:39:42.577

如果你只是没有得到任何数据，你可能需要在你的 python 脚本中调用`sys.stdout.flush()`（和/或）。`sys.stderr.flush()`

我不清楚您是否说写入文件也存在问题。

# ssrs-2008 - SSRS 2008 图表：对图表中的图表进行选择性过滤

> ID：12491951
> 
> 赞同：0
> 
> 时间：2012-09-19T09:28:16.447
> 
> 标签：ssrs-2008, reporting-services

我在单个图表上有 3 个图表系列 A、B、C 的数据

通常，当我对单个系列应用过滤器时，过滤器会影响所有 3 个系列 A、B、C。我需要以某种方式在 A、B 而非 C 上应用特定过滤器，就像我的可计费状态为可计费、不可计费和部分计费。我想要图表中的两列。1 只描绘了不可计费的员工，1 显示了所有计费状态的总和，即整个团队的规模。我的类别轴有月份。

我无法对我需要的两列中的一列应用选择性过滤器。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:00:41.670

您将无法做您想做的事，因为每个系列/类别都是数据集的一个子集，这意味着如果您按“全部”分组，那么数据集的所有元素都将属于该类别。

实现您想要的最佳方法是在创建数据集的查询上与员工总数进行联合，例如：

```
SELECT 1 as NumberEmployees, SSN, BillableStatus FROM mytable
UNION
SELECT COUNT(*), 0 as SSN, -1 as BillableStatus FROM mytable 
```

然后，当您的状态为 -1 时，它对应于所有员工，并将在图表上显示为不同的条形

# sql - 选择计数外部联接和位置

> ID：12491957
> 
> 赞同：3
> 
> 时间：2012-09-19T09:28:35.870
> 
> 标签：sql, sql-server

我有以下 SQL：

```
SELECT 
    ud.firstname + ' ' + ud.lastname, 
    COUNT(a.createdDate) AS ActivityCount, 
    au.LastActivityDate
FROM 
    dbo.aspnet_Users au 
    INNER JOIN dbo.UserDetails ud 
    ON au.UserId = ud.AspNetUserId
    LEFT OUTER JOIN dbo.audit a 
    ON au.LoweredUserName = a.username
WHERE 
    (
        au.LoweredUserName IN ('u1', 'u2', 'u3')
    ) 
AND a.createdDate > '2012-09-18'
GROUP BY ud.firstname + ' ' + ud.lastname, au.LastActivityDate
ORDER BY au.LastActivityDate DESC 
```

但是让我们说，`u1`并且`u3`没有任何活动，因为`2012-09-18`-- 那么结果只包含`u2`.

我认为`LEFT OUTER JOIN`确保我从中获取所有记录`aspnet_Users`- 但我想这是由于我的`WHERE`子句中的秒条件过滤另一个表......

为了获得所有指定的用户，我需要更改什么，然后如果在给定期间不存在数据，则 ActivityCount 为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:33:45.377

> 但我想这是由于我的 WHERE 子句中的秒条件过滤了另一个表......

对，`createdDate`in`WHERE`子句的条件是抑制来自`dbo.audit`. 您可以将其移至`LEFT OUTER JOIN`条件列表以获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:31:06.820

```
SELECT 
    ud.firstname + ' ' + ud.lastname,
    sum(case when a.createdDate is null then 0 else 1 end) AS ActivityCount, 
    au.LastActivityDate
FROM 
    dbo.aspnet_Users au 
    INNER JOIN dbo.UserDetails ud 
    ON au.UserId = ud.AspNetUserId
    LEFT OUTER JOIN dbo.audit a 
    ON au.LoweredUserName = a.username
WHERE 
    (au.LoweredUserName IN ('u1', 'u2', 'u3')) 
AND (a.createdDate > '2012-09-18' or a.createdDate is null)
GROUP BY 
    ud.firstname + ' ' + ud.lastname,
    au.LastActivityDate
ORDER BY au.LastActivityDate DESC 
```

# windows-phone-7 - wp7 - 使用 RestSharp 在请求正文中发布带有参数的 http 请求

> ID：12491960
> 
> 赞同：1
> 
> 时间：2012-09-19T09:28:55.013
> 
> 标签：windows-phone-7, restsharp

我正在尝试通过请求将参数发布到返回 JSON 对象的服务。该服务适用于 android 和 iOS。我正试图让它为 wp7 工作。该服务要求内容类型为“应用程序/json”我已粘贴以下设置 http 请求的代码：

```
 var client = new RestClient(baseurl);
            var request = new RestRequest();
            request.Resource = "login";
            request.Method = Method.POST;
            request.AddHeader("Accept", "application/json");
            request.AddHeader("content-type", "application/json");         
            request.RequestFormat = DataFormat.Json;

            var postData = new Dictionary<string, string>()
            {
                {"key1",value1},
                {"key2",value2}
            };

            request.AddBody(postData); 
            client.ExecuteAsync(request, response =>
            {
                var jsonUser = response.Content;
            }); 
```

我从服务器得到的响应错误是内部服务器错误。上面的代码有什么问题吗。我也尝试了 request.AddParameter 方法，但结果相同。代码如下：

```
 var client = new RestClient(baseurl);
            var request = new RestRequest();
            request.Resource = "login";
            request.Method = Method.POST;
            request.AddHeader("Accept", "application/json");
            request.AddHeader("content-type", "application/json");         
            request.RequestFormat = DataFormat.Json;

            var postData = new Dictionary<string, string>()
            {
                {"key1",value1},
                {"key2",value2}
            };
            var json = JsonConvert.SerializeObject(postData);
            request.AddParameter("application/json", json, ParameterType.RequestBody);
            client.ExecuteAsync(request, response =>
            {
                var jsonUser = response.Content;
            }); 
```

在这两种情况下我做错了什么吗？

# javascript - 内容未在滚动中加载

> ID：12491962
> 
> 赞同：0
> 
> 时间：2012-09-19T09:29:00.420
> 
> 标签：javascript, jquery

所以我创建了一个在 jsfiddle 中工作的动态滚动——> [http://jsfiddle.net/9zXL5/39/](http://jsfiddle.net/9zXL5/39/)

```
var movelist = document.getElementById('movelist');

function yHandler() {
    var contentHeight = movelist.scrollHeight;
    var yOffset = movelist.clientHeight;
    var y = yOffset + movelist.scrollTop;
    if (y >= contentHeight) {
        movelist.innerHTML += '<div class ="newData">yooooo</div>';
    }
}

movelist.onscroll = yHandler;​ 
```

但它有未捕获的错误，例如未定义 yHandler。所以我通过放置 var movielist=.. 和 movielist.onscroll = yHandler; 来修复错误。在我的 $(document).ready 里面。错误消失了，但是现在当我的滚动条到达底部时，内容将不会加载——> [http://jsfiddle.net/9zXL5/40/](http://jsfiddle.net/9zXL5/40/)

```
$(document).ready(function() {
    var movelist = document.getElementById('movelist');

    movelist.onscroll = yHandler;
});

function  yHandler (){

        var contentHeight = movelist.scrollHeight;

        var yOffset = movelist.clientHeight;

        var y = yOffset + movelist.scrollTop;

        if(y >= contentHeight){

            movelist.innerHTML += '<div class ="newData">hey look at me</div>';

        });
    }
} 
```

我不知道为什么。如果有人向我解释为什么会这样，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:33:40.597

您的小提琴中有几个错误：

1.  你没有加载 jQuery
2.  你有几个语法错误

这是一个工作小提琴：http: [//jsfiddle.net/9zXL5/42/](http://jsfiddle.net/9zXL5/42/)

如果您使用控制台（chrome/devtools 或 FF/firebug）来发现错误并更正它们，它会有所帮助。在您的情况下，您在这里有右括号和方括号：

```
 movelist.innerHTML += '<div class ="newData">hey look at me</div>';
    }); // <-- remove the );
} // <-- remove this line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:35:05.137

您在该 jsFiddle 中有许多 JavaScript 语法错误，原因是：

1.  不加载 jQuery，
2.  在函数声明之后有一个不必要的括号和分号 ( `);`)，并且在该函数声明之后还有一个额外的、不匹配的右花括号 ( `}`)。

如果您还没有，我强烈建议您安装或开始使用 JavaScript 调试器。如果您使用 Firefox，我个人建议使用 Firebug。在 Internet Explorer 和 Chrome 中，可以使用`F12`密钥访问内置的开发人员工具。

这是一个[更新的 jsFiddle](http://jsfiddle.net/anthonygrist/9zXL5/41/)。

# facebook - Open Graph URL 是重定向到页面的永久链接

> ID：12491969
> 
> 赞同：2
> 
> 时间：2012-09-19T09:29:14.097
> 
> 标签：facebook, facebook-like, facebook-opengraph

我正在我的网站上添加开放图形元标记并测试它是否与 Facebook URL Linter 一起使用。

唯一不符合我要求的是`og:url:`标签，在这个元标签中，我想添加当前页面的永久链接 url。

永久链接实际上重定向到当前页面。我使用它是因为我的页面 URL 看起来像这样：`http://website.com/photos/243/hello-this-is-the-title/`并且 URL 的最后一部分可以更改为用户，如果更改，URL 将更改，并且不会与存储在 Facebook 的所有“喜欢”相关联.

这就是为什么我有一个看起来像这样的永久链接页面：`http://website.com/permalink/243/`这将重定向到`http://website.com/photos/243/hello-this-is-the-title/`，因此 Facebook 上的所有喜欢都与永久链接而不是另一个相关联。

当我使用 Facebook URL linter 时，它告诉我有一些需要修复的严重错误 - 检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）。

我不知道我想做的事情是否可行。但我真的可以在这里使用一点帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:01:59.917

> 这就是为什么我有一个看起来像这样的永久链接页面：[http](http://website.com/permalink/243/) ://website.com/permalink/243/这将重定向到[http://website.com/photos/243/hello-this-is-the- title/](http://website.com/photos/243/hello-this-is-the-title/)，以便 Facebook 上的所有喜欢都与永久链接相关联，而不是与另一个相关联。
> 
> 当我使用 Facebook URL linter 时，它告诉我有一些需要修复的严重错误 - 检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）。

两种选择：

*   [通过查找它的用户代理（详细信息](https://developers.facebook.com/docs/reference/plugins/like/#scraperinfo)）来排除 Facebook 刮板被重定向。

*   不要重定向服务器端，而是通过 JavaScript 在客户端进行。（刮板不关心 JavaScript。）

# php - 我可以将这个回报写在一行中吗？

> ID：12491972
> 
> 赞同：2
> 
> 时间：2012-09-19T09:29:17.827
> 
> 标签：php, sql-server, shortcode

我在 PHP 中使用数据库，并且经常从其中获取数据。我的问题是：我可以用一行写这个吗？

```
$res = mssql_fetch_assoc($result);
return $res['col']; 
```

我尝试了多种方法，包括

```
return (mssql_fetch_assoc($result))['col']; 
```

和

```
return mssql_fetch_assoc($result)['col']; 
```

但似乎没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:31:57.900

仅当您使用的是 PHP >= 5.4.0 时，它是使用名称[数组 dereferencing](http://schlueters.de/blog/archives/138-Features-in-PHP-trunk-Array-dereferencing.html)实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:32:39.747

您可以使用：

```
function getvalue($array, $key)
{
  return $array[$key];
} 
```

进而`return getvalue(mssql_fetch_assoc($result),'col');`

# javascript - Javascript三角确定

> ID：12491976
> 
> 赞同：1
> 
> 时间：2012-09-19T09:29:30.037
> 
> 标签：javascript

我正在用 javascript 编写一个基本程序，如果有人将某个变量输入到 3 个输入中，则该程序确定正在制作哪种三角形。

```
<html>
<head>
<link href="stylesheet/stylesheet.css" rel="stylesheet" type="text/css">

<script language="Javascript" type="text/javascript">

/*  Key/Legend
Var
    inp1 = input1
    inp2 = input2
    inp3 = input3
    Triangle_Inputs = Form Name

    */

/* Notes

    In computing, a parser is one of the components in an interpreter or 
    compiler that checks for correct syntax and builds a data structure 
    (often some kind of parse tree, abstract syntax tree or other hierarchical structure) 
    implicit in the input tokens.

    Technique
    if (side1 is equal to side2 AND side 2 is equal to side3) {equalitateral}

    if (side1 is equal to side2 AND side 2 doesn't equal to side3) {isosceles}

    if (side1 doesn't equal to side2 AND side2 doesn't equal to side 3 AND side 3 doesn't equal side 1) {scalene}

    http://www.w3schools.com/js/js_comparisons.asp

    */

function checkinputs()
{
/* Var = parseInt(document.Name_Of_Element_Form.Field_Name(Input).value); */
/* Input Fields */
inp1 = parseInt(document.Triangle_Inputs.input1.value);
inp2 = parseInt(document.Triangle_Inputs.input2.value);
inp3 = parseInt(document.Triangle_Inputs.input3.value);
/* Side options */
sideA = (inp1 + inp2);
sideB = (inp1 + inp3);
sideC = (inp2 + inp3);
    if (sideA == sideB && sideB == sideC) {
    alert("Equalateral");
    }
    if (sideA == sideB && != sideC) {
    alert("Isosceles");
    }
    if (sideA != sideB == sideC) {
    alert("Isosceles");
    }
    if (sideA != sideB != sideC != sideA) {
    alert("Scalene!");
    }
}
</script>

</head>
<body>
<div id="Container">

<div id="Header"><h1></h1></div>

        <div id="Content_1">
                <div id="Explanation">
                This calculator will determine what
                triangle you have made depending on
                the integer values in the input fields.

                </div>
                <div id="Form">
                    <FORM NAME="Triangle_Inputs" METHOD="GET">
                    Enter the triangle values below: <br>
                    <p>
                    <h4>Side 1: </h4><BR>
                    <INPUT TYPE="Integer" NAME="input1" VALUE=""><P>
                    <h4>Side 2: </h4><BR>
                    <INPUT TYPE="Integer" NAME="input2" VALUE=""><P>
                    <h4>Side 3:</h4> <BR>
                    <INPUT TYPE="Integer" NAME="input3"  VALUE=""><P>
                    <INPUT TYPE="button" NAME="Submit" Value="Submit" Class="Submit" onClick="checkinputs()">
                    </FORM>
                </div>
                <div id="Verbal_Output">
                    <h2>You made a:</h2>
                    <p>        
                    <h2>Triangle</h2>
                </div>

            </div>
            <p>
            <p>
        <div id="Content_2">

        <div id="Image_Output">asdad</div>
    </div>      
</div>

</body>
</html> 
```

但是我认为我遗漏了一些东西，我似乎无法得到警报来告诉用户任何事情。

谢谢大家，很抱歉发布这个问题，这真的让我很困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:42:46.220

试试这个功能：

```
function getTriangleType(a,b,c) {
  return (a === b && b === c) && 'equilateral' ||
  (a === b || a === c || b === c) && 'isosceles' ||
  'scalene';
} 
```

**演示：http:** [//jsbin.com/eyoxor/3/edit](http://jsbin.com/eyoxor/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:38:04.143

1.  您永远不会调用`checkinputs`函数，因此表单永远不会转换为 sideA、B、C。

2.  您的`equation`函数中缺少 }。请记住正确缩进您的代码以发现这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:38:07.477

您需要将比较与逻辑运算符链接在一起，例如：

```
sideA == sideB && sideB == sideC 
```

代替

```
sideA == sideB == sideC 
```

# java - 注释中的 Eclipse 错误

> ID：12491977
> 
> 赞同：4
> 
> 时间：2012-09-19T09:29:35.627
> 
> 标签：java, eclipse

使用 Eclipse 我将错误注释掉作为临时解决方案。每隔一段时间，这些错误仍然很棘手（即使通过评论删除代码也无法消除错误（评论颜色确认评论）保存/清理/重建/重新启动 Eclipse ...除了辛苦之外没有任何帮助逐个文件重新创建项目文件....谁能给我一个提示？错误文本经常被删除模块无法解决，变量无法解决这只是完全删除变量的使用的错误！

我有最新的 eclipse 版本，但也有以前的版本

在此先感谢，这可以节省我一天无用的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:33:26.587

请试试这个：我通常做的是剪切整个文档/文件并粘贴它。我正在使用 Helios 服务版本 1

```
Ctrl+A, Ctrl+C and then Ctrl+V. 
```

它为我解决了这个问题。我希望它对你也一样。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:35:01.707

只需转到列出错误/问题的问题列表并删除该条目，然后它也应该从编辑器中消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:37:19.227

**-**转到 IDE 底部的问题选项卡。

**-**删除所有错误和警告条目。

**-**最后清理项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T12:33:00.730

我有类似的错误。我的问题是在 Eclipse 中禁用了自动构建。（**项目>自动构建**）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T21:01:39.823

尝试单击鼠标右键并选择“拼写检查”选项。当我用母语而不是英语写评论时，我意识到我有这个错误。

# asp.net - 由 SQLDataSource 填充的下拉列表的RequiredFieldValidator

> ID：12491979
> 
> 赞同：0
> 
> 时间：2012-09-19T09:29:45.100
> 
> 标签：asp.net, visual-studio-2010, visual-studio

大家早，

我有一个由 SQLSataSource 填充的下拉列表。我希望将此下拉列表设为必填字段，并且需要在此列表顶部添加一个默认项目，如 - 请选择 - 以提示用户进行选择。

这是我的代码...

```
 <asp:DropDownList ID="ddOwner" runat="server" DataSourceID="OwnersList" 
       DataTextField="UserFullName" DataValueField="UserFullName" Height="24px" 
       Width="125px">
  </asp:DropDownList>

  <asp:RequiredFieldValidator ID="rfvOwner"
       ControlToValidate="ddOwner" 
       ErrorMessage="Please assign an Owner"
       Text="*" 
       runat="server" Display="None"/> 
```

我可以在“初始值”项中添加一些代码来设置-请选择-默认项吗？

问候贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:32:25.717

你可以在你之后尝试`DataBind Method`

```
...

ddOwner.DataBind();
ddOwner.Items.Add("Please select- default item?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:33:01.127

添加一个未绑定的项目：

```
<asp:DropDownList ID="ddOwner" runat="server" DataSourceID="OwnersList" 
       DataTextField="UserFullName" DataValueField="UserFullName" Height="24px" 
       AppendDataBoundItems="true"
       Width="125px">
     <asp:ListItem Text="-Please Select-" Value="" />
</asp:DropDownList> 
```

# objective-c - 如何将复选框值选中/取消选中保存到 NSUserDefault

> ID：12491984
> 
> 赞同：3
> 
> 时间：2012-09-19T09:30:01.300
> 
> 标签：objective-c, xcode, cocoa

我有复选框记住密码（用于登录表单）。我想当我检查时记住它保存并运行它显示复选框检查。如果我取消选中它运行并显示复选框取消选中。请分享给我。预先感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T10:09:09.577

Bind the checkbox value binding to some key on the shared user defaults controller:

![enter image description here](../Images/11c7ad54ed1af34f6d7292c28dad7c76.png)

(You didn't specifically say whether this is iOS or Mac, but because there's no standard checkbox control in iOS, I assumed the latter.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:55:05.387

在 .h 文件上：

```
@property (nonatomic, unsafe_unretained) IBOutlet NSButton *isCheckedButton; 
```

在 .m 文件上

```
@synthesize isCheckedButton;

- (IBAction)changeButtonState:(id)sender{
if ([isCheckedButton state]) { // Check if button is checked
    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"YOUR KEY HERE"];
    NSLog(@"Change state to On");
}else{
    [[NSUserDefaults standardUserDefaults] setBool:FALSE forKey:@"YOUR KEY HERE"];
     NSLog(@"Change state to Off");
}
 [[NSUserDefaults standardUserDefaults] synchronize]; // ** DON'T FORGET THIS LINE! ** //
} 
```

上面的代码可能更简单，但这是我认为更好理解的方式。您始终可以通过以下方式读取值：

```
[[NSUserDefaults standardUserDefaults] boolForKey:@"YOUR KEY HERE"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:52:43.077

使用`-setBool:forKey:`方法`NSUserDefaults`。

```
if(checked)
    [[NSUserDefaults standardUserDefaults] setBool:true forKey:@"RememberMe"];
else
    [[NSUserDefaults standardUserDefaults] setBool:false forKey:@"RememberMe"]; 
```

然后你就可以得到一个像这样返回的**实际**BOOL 值：

```
BOOL checked = [[NSUserDefaults standardUserDefaults] boolForKey:@"RememberMe"]; 
```

**编辑**：不要忘记添加`synchronize`此调用`NSUserDefaults`以立即保存数据

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:48:59.400

你试试这个：

```
- (void)checkboxButton:(id)sender
 {

 if ( checkboxSelected == 1){

[ checkbox setSelected:NO];
[checkbox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];

checkboxSelected = 0;
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger: checkboxSelected forKey:@"checkboxstate"];

 } else {
[checkbox setSelected:YES];
[checkbox setImage:[UIImage imageNamed:@"checkbox-checked.png"] forState:UIControlStateNormal];
 checkboxSelected = 1;
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger: checkboxSelected forKey:@"checkboxstate"];

}

} 
```

# objective-c - 与属性一起使用时，不同的 iVar 名称是否更改保留计数

> ID：12491995
> 
> 赞同：1
> 
> 时间：2012-09-19T09:30:55.967
> 
> 标签：objective-c, cocoa-touch

这是2个代码快照-

```
@interface A:NSObject
{
     NSMutableArray *a;
}

@property (retain)   NSMutableArray *a;

@implementation

@synthesize a;

-(id)init
{
      if(self=[super init])
     {
            a=[[NSMutableArray alloc] init];
     }
}

@end

@interface A:NSObject
{
     NSMutableArray *_a;

}

@property (retain)   NSMutableArray *a;

@implementation

@synthesize  a=_a;

-(id)init
{
      if(self=[super init])
     {
            _a=[[NSMutableArray alloc] init];
     }
}

@end 
```

现在我需要知道的是，在两个代码实例变量中直接赋值而不是使用访问器并且保留计数为 1？或者他们之间有区别。谢谢。

还有一件事，Apple 建议不要在 init/dealloc 中使用 accessor，但同时要求不要直接设置 iVar。那么在 init() 中分配 ivar 值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:31:46.177

**ARC 与非 ARC**

首先，您应该决定是要使用自动引用计数 (ARC) 还是手动引用计数。看起来您选择了后者 - 这很好，因为您以后总是可以过渡到 ARC。

**属性属性/setter 语义**

您已将属性的 setter 语义标记`a`为`retain`。这将起作用；但由于该属性暴露在类接口中，类用户可以使用它来设置`_a`ivar。由于类用户可能不希望您的类`A`直接修改`NSMutableArray`他们传递的实例，因此最好`copy`对可变对象属性使用语义。

**财产访问`init`和`dealloc`**

`init`通常不鼓励在and中使用声明的属性，`dealloc`因为这样做可能会因 KVO 而产生副作用。这些副作用可能不适用于部分构造或部分解构的对象。

**你的问题**

这是我要做的：

```
// assumes Xcode 4.4+ for autosynthesize
@interface A:NSObject
@property (nonatomic,copy) NSMutableArray *a;
@end

@implementation A

- (id)init {
    self = [super init];
    if( !self ) return nil;

    _a = [[NSMutableArray alloc] init];

    return self;
}
@end 
```

**编辑：**

或者，如果自动合成不可用：

```
@interface A:NSObject
@property (nonatomic,copy) NSMutableArray *a;
@end

@implementation A

@synthesize a = _a;

- (id)init {
    self = [super init];
    if( !self ) return nil;

    _a = [[NSMutableArray alloc] init];

    return self;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:23:41.647

您提到的上述两个代码没有区别。在最新的编译器中，您现在不需要使用属性指定实例变量。所以上面的代码现在将是：

```
@interface A:NSObject
@property (strong) NSMutableArray *a;
@end

@implementation
-(id)init
{
    if (self = [super init])
    {
       _a = [[NSMutableArray alloc] init];
    }
    return self;
}

@end 
```

在这种情况下，属性“a”具有自动合成功能，_a 是实例变量。基本上，以属性名称为前缀的 _ 是实例变量名称。

如果在 ARC 中，则不会发布。使用 self.a 访问其他任何地方。

您说得对，Apple 建议不要在初始化程序和 dealloc 中使用属性，因为它们没有被初始化。

并回答您的问题：“与属性一起使用时，不同的 iVar 名称是否更改保留计数”是使用属性时，您不应该担心这一点。它可能在短时间内具有不同的保留计数，但对您或代码而言应该无关紧要。

希望能帮助到你。

# c - C Visual 2008 正在尝试在 ifdef 之外包含适用于 linux 的库

> ID：12491998
> 
> 赞同：0
> 
> 时间：2012-09-19T09:31:06.323
> 
> 标签：c, visual-studio-2008, include, libraries, platform

我对这个跨平台的东西真的很陌生，至少可以说我有点讨厌与 windows 打交道，但我必须为 uni :(

无论如何，我几乎拥有我想要在 linux 和 windows 上工作的所有东西，但我正在尝试将它们结合起来并拥有一个程序。我已经对此进行了一些搜索，但找不到解决方案。这是我所拥有的-

```
#ifdef WIN32

#include <windows.h>
#include <process.h>
#pragma comment(lib, "wsock32.lib")

#else

#include <sys/socket.h>
#include <netdb.h>
void killMe();

#endif 
```

Visual Studio 尝试“包含”sys/socket，而这在 Windows 中不存在。我希望有一个简单的解决方案来实现这一目标。
如果我只是将它注释掉并且我知道 WIN32 被定义为我使用 printf() 来测试它，那么它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:33:01.360

宏是`_WIN32`（前导下划线），而不是`WIN32`：

```
#ifdef _WIN32

#include <windows.h>
#include <process.h>
#pragma comment(lib, "wsock32.lib")

#else

#include <sys/socket.h>
#include <netdb.h>
void killMe();

#endif 
```

请参阅[预定义宏](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.90%29.aspx)。

* * *

宏`WIN32`是`#define`头文件中的 d `WinDef.h`（在第 31 行）。这将解释为什么`WIN32`在您的`.c`源代码中可用，而不是在`.h`标头`windows.h`包含的文件中`WinDef.h`，并且（可能）您的`.c`文件包含您的头文件。