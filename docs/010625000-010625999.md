# StackOverflow 问答 10625000-10625999

# c# - 如何获取 HttpResponse 大小

> ID：10625005
> 
> 赞同：3
> 
> 时间：2012-05-16T19:04:06.673
> 
> 标签：c#, asp.net-2.0, httpresponse

我正在寻找一种方法来获取在 ASP.NET 2.0 响应中发送到某个点的字节数，以便我可以将此数字写入响应中。就像是：

页面.aspx：

```
<script runat="server">
    private string GetResponseSize()
    {
        int nCurrentResponseSize = ...; // what goes here?
        return ( nCurrentResponseSize.ToString() );
    }
</script>
<html>
  <head runat="server"><title>test</title></head>
  <body>
    <div>Size 1: <%= GetResponseSize() %></div>
    <br />
    <div>Size 2: <%= GetResponseSize() %></div>
  </body>
</html> 
```

问题是`HttpResponse.OutputStream.Length`不支持（[NetworkStream](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream%28v=vs.80%29)不支持）。

我可以实现一个[`HtmlTextWriter`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmltextwriter%28v=vs.80%29)来覆盖页面的默认值并计算字节数，但是 ASP.NET 中的某些东西应该已经有了这个计数，我正在尝试看看是否有可能得到它。

我想避免的是涉及获取所有数据然后将其解析到某个点以找到该点的大小的解决方案。到目前为止，我的大部分搜索都只找到了这些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:29:33.417

使用 dotPeek 我发现 HttpResponse 有一个内部 GetBufferedLength 方法，用于计算跟踪控件的大小：

```
int bufferedLength1 = httpContext.Response.GetBufferedLength();
this.RenderControlInternal(writer, adapter);
int bufferedLength2 = httpContext.Response.GetBufferedLength(); 
```

这并不理想，但您可以通过反射调用此方法。

# java - 使用java比较同一日期

> ID：10625007
> 
> 赞同：0
> 
> 时间：2012-05-16T19:04:08.427
> 
> 标签：java

用户使用年、月和日的下拉菜单选择日期。我必须将用户输入的日期与今天的日期进行比较。基本上看他们是不是同一个日期。例如，用户输入 02/16/2012。如果今天是 2012 年 2 月 16 日，那么我必须显示一条消息。我该怎么做？我尝试使用毫秒，但这给出了错误的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:09:47.070

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            Date date1 = sdf.parse("2012-05-17");
            Date date2 = sdf.parse("2012-01-01");

            System.out.println(sdf.format(date1));
            System.out.println(sdf.format(date2));

            if(date1.compareTo(date2)>0){
                System.out.println("Date1 is after Date2");
            }else if(date1.compareTo(date2)<0){
                System.out.println("Date1 is before Date2");
            }else if(date1.compareTo(date2)==0){
                System.out.println("Date1 is equal to Date2");
            } 
```

或者

```
 if(date1.equals(date2)){
        System.out.println("Date1 is equal Date2");
    } 
```

查看 [如何比较日期](http://www.mkyong.com/java/how-to-compare-dates-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:17:20.127

你要拿回什么样的物体？字符串、日历、日期？您可以获取该字符串并进行比较，至少您认为订单 YYYY MM DD /// DD MM YYY 会出现问题，在这种情况下，我建议根据您的规范 YYYYMMDD 创建一个自定义字符串，然后比较它们。

```
 Date d1 = new Date();
    Date d2 = new Date();

    String day1 = d1.getYear()+"/"+d1.getMonth()+"/"+d1.getDate(); 
    String day2 = d2.getYear()+"/"+d2.getMonth()+"/"+d2.getDate(); 
    if(day1.equals(day2)){
        System.out.println("Same day");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:19:09.530

Java中的日期是时间点，分辨率为“毫秒”。为了有效地比较两个日期，您需要首先将两个日期设置为“相同的时间”，以小时、分钟、秒和毫秒为单位。a 中的所有“setTime”方法`java.util.Date`都被弃用了，因为它们在国际化和本地化问题上不能正常工作。

为了“解决”这个问题，引入了一个新类`GregorianCalendar`

```
GregorianCalendar cal1 = new GregorianCalendar(2012, 11, 17);
GregorianCalendar cal2 = new GregorianCalendar(2012, 11, 17);
return cal1.equals(cal2); // will return true 
```

GregorianCalendar 起作用的原因与年、月、日构造函数中的小时、分钟、秒和毫秒被初始化为零有关。您可以尝试`java.util.Date`通过使用**不推荐使用**的方法来近似这种情况`setHours(0)`；但是，最终这将由于缺少`setMillis(0)`. 这意味着要使用该`Date`格式，您需要获取毫秒并执行一些整数数学运算以将毫秒设置为零。

```
date1.setHours(0);
date1.setMinutes(0);
date1.setSeconds(0);
date1.setTime((date1.getTime() / 1000L) * 1000L);
date2.setHours(0);
date2.setMinutes(0);
date2.setSeconds(0);
date2.setTime((date2.getTime() / 1000L) * 1000L);
return date1.equals(date2); // now should do a calendar date only match 
```

相信我，只需使用 Calendar / GregorianCalendar 类，它就是前进的方向（直到 Java 采用更复杂的东西，比如 joda time。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T19:20:28.220

有两种方法可以做到。第一个是以相同的日期格式格式化日期或以字符串格式处理日期。

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
        String date1 = sdf.format(selectedDate);
        String date2 = sdf.format(compareDate);
        if(date1.equals(date2)){
        }else{
        } 
```

或者

```
 Calendar toDate = Calendar.getInstance();
    Calendar nowDate = Calendar.getInstance();
    toDate.set(<set-year>,<set-month>,<set-date->);  
    if(!toDate.before(nowDate))
    //display your report
    else
    // don't display the report 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T19:20:34.393

以上答案是正确的，但请考虑使用 JodaTime - 它更简单直观的 API。您可以设置`DateTime`使用`with*`方法并进行比较。

看看这个[答案](https://stackoverflow.com/questions/10624229/compare-dates-using-calendar-class-using-java/10624325#10624325)

# c# - 在 C# 中深度克隆对象列表

> ID：10625013
> 
> 赞同：1
> 
> 时间：2012-05-16T19:04:31.330
> 
> 标签：c#

我有一个名为“SmallClass”的 C# 类。

我有一个现有列表 myList 包含“SmallClass”类型的对象

我想要列表“myList”的深层克隆。即对包含列表进行深度克隆，对列表中包含的对象进行深度克隆。

我该怎么做。

```
 public class SmallClass: ICloneable {

    public string str1;
    public string str2;
    public string str3;

     public SmallClass Clone() //This just deep clones 1 object of type "SmallClass"
            {
                MemoryStream m = new MemoryStream();
                BinaryFormatter b = new BinaryFormatter();
                b.Serialize(m, this);
                m.Position = 0;
                return (SRO)b.Deserialize(m);
            }

      public override equals(Object a)
        {
                return Object.Equals(this.str1 && a.str1);
            }
    }

    public class AnotherClass
    {
           SomeCode();
           List<SmallClass> myList = new List<SmallList>();  //myList is initialized.

           // NOW I want to deep clone myList. deep Clone the containing list and deep clone the objects contained in the list.

         List<SmallClass> newList = new List<SmallClass>();
      foreach(var item in myList)
        {
           newList.Add((SmallClass)item.Clone());
        } 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:22:13.637

> **警告**：`BinaryFormatter`当与不受信任的输入一起使用时，该类型很危险。虽然下面的用法应该是安全的，但微软[建议`BinaryFormatter`](https://docs.microsoft.com/en-us/dotnet/standard/serialization/binaryformatter-security-guide)完全避免，因为它可能被滥用，并将[从 .NET 7–8 中删除](https://github.com/dotnet/designs/blob/main/accepted/2020/better-obsoletion/binaryformatter-obsoletion.md)。考虑为您的深度克隆使用另一种序列化程序或方法。

首先，您可以定义一个实用方法来深度克隆任何对象（根）：

```
public static T DeepClone<T>(T obj)
{
    using (var stream = new MemoryStream())
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(stream, obj);
        stream.Position = 0;
        return (T)formatter.Deserialize(stream);
    }
} 
```

如果你想深度克隆`myList`，你需要做的就是将它作为参数传递给上面的方法：

```
List<SmallClass> myListClone = DeepClone(myList); 
```

您需要注意的最重要的考虑因素是您的所有类都必须标记为可序列化，通常通过`[SerializableAttribute]`.

```
[SerializableAttribute]
public class SmallClass
{
    // …
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T19:10:05.637

您的 SmallClass 需要实现[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable)接口。然后使用 Clone() 方法复制每个元素。

```
List<SmallClass> newList = new List<SmallClass>();
foreach(var item in myList)
{
    newList.Add((SmallClass)item.Clone());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-18T03:47:47.187

有几种创建深拷贝的方法，包括序列化和使用 Object.MemberwiseClone Method ()。由于此处已经提供了使用序列化的示例，因此我有一种使用“MemberwiseClone”的方法。

注意：递归，平台：.NETStandard2.0

```
 /// <summary>
        /// Returns a deep copy of an object.
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="source"></param>
        /// <returns></returns>
        public static T DeepClone<T>(this T source) where T : class
        {
            if(source == null) return null;

            if(source is ICollection<object> col)
            {
                return (T)DeepCloneCollection(col);
            }
            else if(source is IDictionary dict)
            {
                return (T)DeepCloneDictionary(dict);
            }

            MethodInfo method = typeof(object).GetMethod("MemberwiseClone", BindingFlags.NonPublic | BindingFlags.Instance);
            T clone = (T)method.Invoke(source, null);

            foreach(FieldInfo field in source.GetType().GetRuntimeFields())
            {
                if(field.IsStatic) continue;
                if(field.FieldType.GetTypeInfo().IsPrimitive) continue;

                object sourceValue = field.GetValue(source);
                field.SetValue(clone, DeepClone(sourceValue));
            }

            return clone;
        }

        private static ICollection<object> DeepCloneCollection(ICollection<object> col)
        {
            object[] arry = (object[])Activator.CreateInstance(col.GetType(), new object[] { col.Count });

            for(int i = 0; i < col.Count; i++)
            {
                object orig = col.ElementAt(i);
                object cln = DeepClone(orig);

                arry[i] = cln;
            }

            return arry;
        }

        private static IDictionary DeepCloneDictionary(IDictionary dict)
        {
            IDictionary clone = (IDictionary)Activator.CreateInstance(dict.GetType());

            foreach(object pair in dict)
            {
                object key = pair.GetValueOf("Key");
                object original = pair.GetValueOf("Value");

                clone.Add(key, original.DeepClone());
            }

            return clone;
        }

        public static dynamic GetValueOf<T>(this T value, string property)
        {
            PropertyInfo p = value.GetType().GetTypeInfo().GetProperty(property);

            if(p != null && p.CanRead)
            {
                dynamic val = p.GetValue(value);

                return val;
            }

            return Activator.CreateInstance(p.PropertyType); //Property does not have  value, return default
        } 
```

# distributed-system - 查看更改算法和paxos

> ID：10625019
> 
> 赞同：1
> 
> 时间：2012-05-16T19:04:45.240
> 
> 标签：distributed-system, paxos, distributed-algorithm

我想知道视图更改算法和Paxos之间有什么关系？在我的讲义中，它指出“每个视图的参与者都同意主要的，然后再控制复制过程”。在这种情况下的观点是什么？ Paxos 与此有何关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:10:26.847

paxos 中的“视图”概念适用于节点（proposers/acceptors/learners）的数量是动态的场景。

想象一个场景，节点在启动时通过 UDP 广播相互发现。在任何时间点，您都可以运行可变数量的节点。每次这个“节点数”改变时，这将表明一个新的视图。

为什么这很重要，因为在这样一个动态的环境中，您如何确定接受消息的“quorom”大小是多少？通过将单调递增的 ViewNumber 添加到 ProposalNumber（也称为 Viewstamp），这允许优雅地检测“视图”或节点数的变化。

文章中提出了整个视图/复制概念：

[Paxos 实用](http://net.pku.edu.cn/~course/cs501/2008/cprj/paxos.pdf "Paxos 实用")

# jquery - 使用jQuery循环遍历子列表

> ID：10625022
> 
> 赞同：0
> 
> 时间：2012-05-16T19:04:53.953
> 
> 标签：jquery, colors, nested-lists

我正在尝试制作丰富多彩的菜单。假设顶部节点是红色的 - 所以它的子节点也将是浅红色，在绿色顶部项目下方 - 浅绿色等等。

我有一组颜色（深色和浅色）和一个嵌套列表对象。

顶级着色正在工作，但我无法让它在子对象上工作。

这是html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
.mainMenu {
    float: left;
    width: 140px;
    margin-left:10px;

    list-style:none;

    padding:0;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    font-weight:bold;

}
.mainMenu li a {
    display: block;
    padding: 10px 25px;
    background: #F90  ;
    margin-top:3px;

    text-decoration: none;
   color:#FFF;
   text-align:right;
}
.mainMenu li a:hover, .mainMenu li a.active {
    background: #999;
    color: #fff;
    list-style:none;
}
.mainMenu li ul {
   display: none; // used to hide sub-menus
   list-style:none;
   padding-left:3px;
}
.mainMenu li ul li a {
    padding: 2px 25px;
    background:#f7d8ba   ;
    border-bottom: 1px dotted #ccc;
    color:#000;
    font-size:12px;
    font-weight:normal;
    margin-top:4px;
}
</style>
</head>

<body>

<ul class="mainMenu">
    <li><a href="#">Board</a>
        <ul>
          <li><a href="#">Selling</a></li>
            <li><a href="#">Buying</a></li>
            <li><a href="#">Wanted</a></li>
            <li><a href="#">Dating</a></li>
        </ul>
    </li>

    <li><a href="#">Phone Book</a>
        <ul>
            <li><a href="#">Office</a></li>
            <li><a href="#">People</a></li>
            <li><a href="#">Marketing</a></li>
        </ul>
    </li>

    <li><a href="#">Schedual</a>
        <ul>
             <li><a href="#">Busses</a></li>
            <li><a href="#">Pharmacy</a></li>
            <li><a href="#">Other</a></li>  
        </ul>  
    </li>

  <li><a href="#">Another</a></li>
      <li><a href="#">One</a></li>
       <li><a href="#">Here</a></li>
</ul>   

</body>
</html> 
```

这是Jquery：

```
<script>

var colorsDarkTable = ["#f6921e","#c0272d","#8bc53f","#006837","#29aae1","#2959e1"];
var colorsLightTable = ["#f7d8ba","#f6d5d6","#e8f3d9","#cdeadc","#d4eef9","#d4def9"];

$(document).ready(function () {
  $('.mainMenu > li > a').hover(function(){

    if ($(this).attr('class') != 'active'){
        $('.mainMenu li ul').slideUp();
        $(this).next().css("listStyle","none");
        $(this).next().slideToggle();
        $('.mainMenu li a').removeClass('active');
        $(this).addClass('active');
    }
  });

        $("ul.mainMenu>li>a").each(function() {
                var $parentLi = $(this).parent()
                var myIndex = $parentLi.index();

        // This is working!      
        $(this).css("backgroundColor", colorsDarkTable[myIndex]);

        // This sub loop isn't working ***
        $(this).children("li>a").each(function(index) {
           $(this).parent().css("backgroundColor",colorsLightTable[myIndex]);
        });
     });
});
</script> 
```

这是演示： [http ://www.dvirad.co.il/test.html](http://www.dvirad.co.il/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:37:02.160

在这一位：`$(this).children("li>a")`，`this`是`<a>`，它没有孩子。

你需要`$(this).parent().children("li>a")`.

**更新**

这可能就是你想要的：http: [//jsfiddle.net/7TjfC/1/](http://jsfiddle.net/7TjfC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:42:59.683

```
// This sub loop is now working ***
    console.log($(this).parent().children("ul").find("li a"))
    $(this).parent().children("ul").find("li a")
                             .css("backgroundColor", colorsLightTable[myIndex]) 
```

[http://jsfiddle.net/52QDc/1/](http://jsfiddle.net/52QDc/1/)

修复背景：

```
.mainMenu li a:hover, .mainMenu li a.active {
    background: #999 !important;
} 
```

# asp.net - 如何在查询字符串值中查找域名

> ID：10625023
> 
> 赞同：1
> 
> 时间：2012-05-16T19:04:58.337
> 
> 标签：asp.net, regex, query-string

我认为正则表达式可能能够做到这一点，如果不能，那么字符串操作也是一个可行的解决方案。

我需要打开以下输入：

1.  `"http://open.thumbshots.org/image.pxf?url=www.party.com"`
2.  `"http://www.xclicks.net/sc/ct.php?s=9971&l=http%3A//www.google.com/imgres%3F"`
3.  `"http://whos.amung.us/pingjs/?k=yvybju40twbs&t=Mudswimmer%3A%20Spam%20%26%20Crap%3A%20Http%3AUniversity.com%3A%20No%20Animals%20Allowed..&c=c&y=htt"`

进入以下输出：

1.  `"party.com"`
2.  `"google.com"`
3.  `"University.com"`

我不想获取 URL 的主机名，我想要第二个域，即查询字符串中的域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:46:42.020

至少对我而言，涉及正则表达式的所有内容都存在一定程度的不确定性，但是为您的三个输入提供以下代码有效：

```
string[] urls = new string[] 
{ 
    "http://open.thumbshots.org/image.pxf?url=www.party.com",
    "http://www.xclicks.net/sc/ct.php?s=9971&l=http%3A//www.google.com/imgres%3F",
    "http://whos.amung.us/pingjs/?k=yvybju40twbs&t=Mudswimmer%3A%20Spam%20%26%20Crap%3A%20Http%3AUniversity.com%3A%20No%20Animals%20Allowed..&c=c&y=htt"
};

foreach (var url in urls)
{
    var result = HttpUtility.ParseQueryString(new Uri(url, UriKind.Absolute).Query);

    foreach (string item in result)
    {
        string value = result.GetValues(item).Single();

        const string DomainNamePattern = "(?:www\\.|\\b)(?<domain>([a-z0-9]([-a-z0-9]*[a-z0-9])?\\.)+((a[cdefgilmnoqrstuwxz]|aero|arpa)|(b[abdefghijmnorstvwyz]|biz)|(cat|com|coop|c[acdfghiklmnorsuvxyz])|d[ejkmoz]|(e[ceghrstu]|edu)|f[ijkmor]|(g[abdefghilmnpqrstuwy]|gov)|h[kmnrtu]|(i[delmnoqrst]|info|int)|(j[emop]|jobs)|k[eghimnprwyz]|l[abcikrstuvy]|(m[acdghklmnopqrstuvwxyz]|mil|mobi|museum)|(n[acefgilopruz]|name|net)|(om|org)|(p[aefghklmnrstwy]|pro)|qa|r[eouw]|s[abcdeghijklmnortvyz]|(t[cdfghjklmnoprtvwz]|travel)|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))";

        var match = Regex.Match(
            value,
            DomainNamePattern,
            RegexOptions.IgnoreCase);

        if (match.Success)
        {
            string domain = match.Groups["domain"].Value;

            Console.WriteLine(domain);
        }
    }
} 
```

使用的正则表达式改编自[这里](http://shauninman.com/archive/2006/05/08/validating_domain_names)。

如果你运行它，你会得到以下输出：

```
// party.com
// google.com
// University.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:55:37.817

如果您的链接始终包含 url 查询字符串键，那么您可以简单地通过 `String url = Request.QueryString["url"].ToString();` 这将重新运行 url 的值。

# css - 两个带阴影的 div 看起来像一个部分。在CSS中可能吗？

> ID：10625025
> 
> 赞同：8
> 
> 时间：2012-05-16T19:05:02.527
> 
> 标签：css

我有两个相邻的 div，背景颜色为白色。[http://jsfiddle.net/J5ZXt/](http://jsfiddle.net/J5ZXt/)是代码的链接。我希望两个 div 看起来像一个元素，所以我需要删除一部分阴影。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T19:14:41.567

是的，有可能。只需用以下内容掩盖它`:before`：

```
/* Add relative positioning */
#two {
  position:relative;
}
/* Add :before element to cover up shadow */
#two:before {
  background:white;
  display:block;
  content:".";
  font-size:0;
  width:4px;
  height:100px;
  position:absolute;
  left:-4px;
  top:0;
}

/* Existing styles */
#one {
  width: 100px;
  height: 100px;
  background: #FFF;
  -moz-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  -webkit-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  float:left;
}
#two {
  width: 100px;
  height: 300px;
  background: #FFF;
  -moz-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  -webkit-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
  float:left;
}
```

```
<div id="one"></div>
<div id="two"></div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T19:16:28.863

这是我能在几分钟内得到的最好的，我认为它可以完成工作。最好的事情是它的简单性（您的 css 只需 3 次编辑）

定位 D1 的阴影，使右边缘具有负值（-4px 足以隐藏它）

给两个 div 相对定位，这样我们就可以控制它们的堆叠顺序。

给 D1 一个比 D2 更高的 z-index，这样它就可以掩盖 D2 阴影的顶部。

```
#one {
    width: 100px;
    height: 100px;
    background: #FFF;
    -moz-box-shadow: -4px 0 3px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow: -4px 0 3px 1px rgba(0,0,0,0.3);
    box-shadow: -4px 0px 3px 1px rgba(0,0,0,0.3);
    float:left;
    position: relative;
    z-index: 20;
}
#two {
    width: 100px;
    height: 300px;
    background: #FFF;
    -moz-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    float:left;
    z-index: 5;
    position: relative;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T19:11:15.723

纯 CSS - 没有

您总是可以尝试在其上方绝对放置一个 div，如本[例所示](http://jsfiddle.net/jackdent/J5ZXt/3/)

::before 解决方案不适用于所有浏览器

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T19:42:30.740

因为我讨厌被超越并且倾向于成为一个完美主义者，所以我想出了一个不依赖于特定高度的答案`#one`——它必须比（[当前接受](https://stackoverflow.com/a/10625181/526741)`#two`的答案也是如此）短. 它的一侧也没有缺口或较大阴影的缺点。`#one`

***注意：****这个答案还提供了通过 弯曲角的可能性`border-radius`。只需添加`border-radius:4px;`即可`#one:after`查看结果。*

[jsFiddle 示例](http://jsfiddle.net/J5ZXt/25/)

## 新的 CSS

```
<style type="text/css">
#one {
    width: 100px;
    height: 200px;
    background: #fff;
    float:left;
    position:relative;
    overflow:hidden;
}
#one:after {
    display:block;
    content:".";
    font-size:0;
    color:transparent;
    height:8px;
    width:100%;
    padding-left:4px;
    position:absolute;
    bottom:-4px;
    left:-4px;
    background:#fff;
    z-index:2;
    -moz-box-shadow: inset 0 0 3px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow: inset 0 0 3px 1px rgba(0,0,0,0.3);
    box-shadow: inset 0 0 3px 1px rgba(0,0,0,0.3);
}
#two {
    width: 100px;
    height: 300px;
    background: #FFF;
    -moz-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    box-shadow: 0 0 3px 1px rgba(0,0,0,0.3);
    float:left;
}
</style> 
```

# c# - 无法确定在哪里设置值

> ID：10625028
> 
> 赞同：1
> 
> 时间：2012-05-16T19:05:24.473
> 
> 标签：c#

我正在处理一些 Project Euler 问题，需要一些帮助来理解我找到的解决方案。

我的问题是：X 在 SkipWhile 方法调用中设置在哪里？当我在运行时中断代码并单步执行到该点时，我从来没有看到为它设置了一个值。然而，代码将一直有效。我检查了 SkipWhile 的定义，也许我只是不明白调用中传递的参数如何满足 3 参数方法定义。Math.Pow 也是一样 - X 在哪里设置！？

```
public long FindGreatestPrimeFactor(long factorGreaterThan, long number)
    {
        long upperBound = (long)Math.Ceiling(Math.Sqrt(number));

        // find next factor of number
        long nextFactor = Range(factorGreaterThan + 1, upperBound)
             .SkipWhile(x => number % x > 0).FirstOrDefault();

        // if no other factor was found, then the number must be prime
        if (nextFactor == 0)
        {
            return number;
        }
        else
        {
            // find the multiplicity of the factor
            long multiplicity = Enumerable.Range(1, Int32.MaxValue)
                 .TakeWhile(x => number % (long)Math.Pow(nextFactor, x) == 0)
                 .Last();

            long quotient = number / (long)Math.Pow(nextFactor, multiplicity);

            if (quotient == 1)
            {
                return nextFactor;
            }
            else
            {
                return FindGreatestPrimeFactor(nextFactor, quotient);
            }
        }
    }

    private IEnumerable<long> Range(long first, long last)
    {
        for (long i = first; i <= last; i++)
        {
            yield return i;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:08:10.487

我相信你在谈论[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)：

```
x => number % x > 0 
```

> 所有 lambda 表达式都使用 lambda 运算符 =>，读作“goes to”。lambda 运算符的左侧指定输入参数（如果有），右侧保存表达式或语句块。

在 LINQ 表达式中，每个项目在迭代时都会提供给 lambda。在 lambda 的主体中，如果您希望引用该项目，则需要为其命名。在这种情况下，参数最终命名为`x`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:09:04.030

看起来像这样的表达式：

```
x => number % x > 0 
```

被称为[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。它们实际上是函数，并且`x`是参数。`SkipWhile`接受一个函数，然后使用不同的参数值执行它。

下面是如何将 lambda 表达式编写为函数：

```
bool Foobar(long x)
{
    return number % x > 0;
} 
```

在`SkipWhile`中，我相信该函数是`x`作为列表中的第一项调用的。如果为真，则使用列表中的第二项再次调用该函数，依此类推，直到该函数返回假。

在这种情况下，`SkipWhile`要求一个函数将列表中类型的值转换为 a `bool`。Lambda 表达式是表达这一点的简洁方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:07:45.407

`SkipWhile`正在从该方法中检索其输入值（`x`），该`Range`方法又返回从`factorGreaterThan + 1`到 的数字`upperBound`。不知道为什么作者决定为此编写一个方法，因为这是内置在`Enumerable.Range`方法中的。

# hibernate - JPA 2.0 使用一个 @JoinedTable 映射两个相同类型的集合

> ID：10625036
> 
> 赞同：1
> 
> 时间：2012-05-16T19:05:55.040
> 
> 标签：hibernate, jpa-2.0

假设我有以下实体：

```
@Entity
@Table(name = "A")
public class A implements Serializable {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private Long id;

  @OneToMany
  @JoinTable(name="A_B", joinColumns = @JoinColumn(name = "A_ID"),
    inverseJoinColumns = @JoinColumn(name = "B_ID"))
  private List<B> bList1;

  @OneToMany
  @JoinTable(name="A_B", joinColumns = @JoinColumn(name = "A_ID"),
    inverseJoinColumns = @JoinColumn(name = "B_ID"))
  private List<B> bList2;

  // getters and setters

}

@Entity
@Table(name = "B") 
public class B implements Serializable {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private Long id;

  //some other data
  //getters and setters
} 
```

@JoinTable 结构类似于：

```
A_B (a_id, b_id, discriminator); 
```

是否可以使用一些注释来指定鉴别器列，基于哪个 bList1 和 bList2 将被填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:40:44.357

发布代码是不可能的，因为即使您可以在检索时指定`@Where("discriminator='list1'")`和`@Where("discriminator='list2'")`在集合上进行过滤，但是休眠在插入/更新时仍然不维护鉴别器。

你可以试着做这个工作（我没有测试过这个）：

```
@ManyToAny(metaColumn = @Column( name = "discriminator" ) )
@AnyMetaDef(idType = "long", metaType = "string", metaValues = {
    @MetaValue( value = "list1", targetEntity = B.class ) } )
private List<B> bList1;

@ManyToAny(metaColumn = @Column( name = "discriminator" ) )
@AnyMetaDef(idType = "long", metaType = "string", metaValues = {
    @MetaValue( value = "list2", targetEntity = B.class ) } )
private List<B> bList2; 
```

或者您只需为具有鉴别器值的可连接件创建一个类，并在 list1 和 2 的属性中处理它。

# jquery - JQuery 横幅下拉 - 动画跳动并且结束 32 像素太高

> ID：10625037
> 
> 赞同：0
> 
> 时间：2012-05-16T19:05:57.670
> 
> 标签：jquery

我们的问题与此位置的 jQuery 动画有关：

[http://www.simalam.com/leeanderson/profile/](http://www.simalam.com/leeanderson/profile/)

单击下拉箭头查看动画...并单击上拉箭头关闭横幅。既然您已经看到了，我可以更好地描述问题所在。

动画在底部附近跳动，并以错误的位置结束（特别是 32 像素太高）。不过，它从正确的位置开始。

我们已经尝试在每种可能的组合中切换 -32 和 0。为我们提供我们喜欢的动画的唯一组合是两个 if 语句的 0 0。但是，我们不喜欢个人和组织下方的 32 像素白色边框。

如果有人有任何建议，他们将不胜感激。

**这是应用于它的代码：**

```
/* code for dropdown of menu */
$("#dropArrow").click(function () { //with every click, the arrow should rotate
    value += 180; //for every click, add 180 degrees, so that it goes back to either pointing up or down with each click
    if ((value % 325) == 0) { //(hide) before hiding the .topDivSlideWrap, we do this first and restore css settings to default
        $( ".drop" ).css("top", "-0px"); //move .drop back to original positioning
        $( "#individuals" ).css("z-index", "0"); //remove z-index of #individuals
        $( "#organizations" ).css("z-index", "0"); //remove z-index of #individuals
    }   
    $('.topDivSlideWrap').slideToggle('slow', function() {;
    if (value % 325) { //(show), this is set in a callback function so it happens after slideToggle
        $( ".drop" ).css("top", "-32px"); //move .drop up to hide whitespace
        $( "#individuals" ).css("z-index", "1000"); //add z-index of #individuals
        $( "#organizations" ).css("z-index", "1000"); //add z-index of #individuals
    }
    });
    $('#rotate').rotate({  //function within a function
        animateTo:value,easing: $.easing.easeInOutCirc //rotate 180 degrees every time 
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:16:14.367

为了使滑块正常工作，您需要解决几个问题。

请参阅此工作[小提琴示例！](http://jsfiddle.net/zuul/694zQ/)

# 1)

您控制滑动和旋转的功能可以显着简化为：

```
// reset variable
var value = 0;

$("#rotate").bind("click", function(e) {

    // prevent browser's default behavior
    e.preventDefault();

    // increment value to control rotation
    value+=180;

    // rotate arrow
    $(this).rotate({
        angle     : 0,
        animateTo : value,
        easing    : $.easing.easeInOutExpo
    });

    // slide contents
    $(".topDivSlideWrap").slideToggle("slow");

}); 
```

# 2)

`#individuals`and`#organizations`有一个`css` `top`声明，将其更新为，`0`它强制内容低于容器高度：

```
#individuals, #organizations {
    top:0;
} 
```

# 3)

与灰度降级一起使用的背景图像在底部有一个空白区域，高度为 31px，这会导致您的 div 比背景高的错觉。您将需要修复该图像。

*这里有一个固定的，右键保存。* ![在此处输入图像描述](../Images/4b8617ab157e0e3f08ae9cfb1ddb5751.png)

* * *

有了这两个更改，正如在 Fiddle 工作示例中看到的那样，您的问题就解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:19:25.817

您的主要问题不是 jQuery，而是您最初应用于 CSS 中的滑块元素的位置。您需要解决的是：如果您为`top`位置设置动画 - 确保它在您的 CSS 中明确定义并且不会覆盖`margin-top`. 只需使用此属性，您就可以解决问题。或者：（在您的 jQuery 代码中）而不是动画`top`位置，尝试使用`margin-top`. 但同样，必须在您的 CSS 中最初定义这些值，以防止（例如）Safari 浏览器不为您的元素设置动画。

* * *

一些其他“缩小”代码的建议：

使用逗号列出您的元素：

`$( "#individuals, #organizations" ).css("z-index", "0");`//从元素列表中删除z-index。

`$( "#individuals, #organizations" ).css("z-index", "1000");`//将z-index添加到元素列表

`if (value % 325) {`这就像你说的，例如：`if( 1 + 2) {`只是模数（没有意义）

比你有一个奇怪的错字：

```
$('.topDivSlideWrap').slideToggle('slow', function() {;  // <-- what is this??? (;) 
```

快乐编码。

# c# - AccessViolationException 在 Outlook 2007 中读取电子邮件发件人

> ID：10625039
> 
> 赞同：4
> 
> 时间：2012-05-16T19:06:00.680
> 
> 标签：c#, interop, outlook

当我尝试通过 MailItem.Sender 获取电子邮件地址时，我收到了 AccessViolationException。Outlook 2007 (Windows XP) 上的地址。当我在 Outlook 2010 (Windows 7) 上运行相同的代码时，我没有收到此错误。

```
Outlook.MailItem email = inbox.Items[i] as Microsoft.Office.Interop.Outlook.MailItem;
Outlook.MailItem email
Console.WriteLine("Subject: " + email.Subject);
Console.WriteLine("Sender: " + email.Sender); <-- Exception Here!
Console.WriteLine("Addr: " + email.Sender.Address); 
```

控制台：错误：System.AccessViolationException：试图读取或写入受保护的内存。方法：get_Sender()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T21:42:07.467

这表明您正在使用早期版本的接口未公开的属性 - Outlook 2010 中添加了 MailItem.Sender 属性。当您针对 Outlook 2007 运行代码时，调用会经过对象的 v-table，因此访问冲突。

解决方法是使用 MailItem.PorpertyAccessor.GetProperty 读取 PR_SENDER_ENTRYID MAPI 属性（DASL 名称`http://schemas.microsoft.com/mapi/proptag/0x0C190102`）并使用它来调用 Namespace.GetAddressEntryFromID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T19:03:39.767

如上所述：

> 是的。我有一个解决方法：email.SenderEmailAddress

**参考**

*   [互操作性疑难解答 (Visual Basic)](https://msdn.microsoft.com/en-us/library/vstudio/8877bdk6)

# javascript - Javascript 模块模式有什么好处？

> ID：10625042
> 
> 赞同：8
> 
> 时间：2012-05-16T19:06:12.370
> 
> 标签：javascript

我一直在研究为我的团队提出标准化的 Javascript 编码风格。现在大多数资源都推荐涉及闭包的“模块”模式，例如：

```
var Module = function() { 

    someMethod = function() { /* ... */ };

    return { 
        someMethod: someMethod
    };

}(); 
```

并像`Module.someMethod();`. 这种方法似乎只适用于传统 OOP 上下文中的静态方法，例如用于获取/保存数据的存储库类、用于发出外部请求的服务层等。除非我遗漏了什么，否则模块模式不打算与通常需要传递到服务方法或从服务方法传递到 UI 胶水代码的数据类（想想 DTO）一起使用。

我看到引用的一个共同好处是，您可以使用模块模式在 Javascript 中拥有真正的私有方法和字段，但这也可以通过*具有*类似于此的“经典”Javascript 风格的静态**或实例方法来实现：**

```
myClass = function(param) { 
    // this is completely public
    this.publicProperty = 'Foo';

    // this is completely private
    var privateProp = param;

    // this function can access the private fields
    // AND can be called publicly; best of both?
    this.someMethod = function() { 
        return privateProp;
    };

    // this function is private.  FOR INTERNAL USE ONLY
    function privateMethod() { 
        /* ... */
    };
}

// this method is static and doesn't require an instance
myClass.staticMethod = function() { /* ... */ };

// this method requires an instance and is the "public API"
myClass.prototype.instanceMethod = function() { /* ... */ }; 
```

所以我想我的问题是是什么让模块模式比传统风格更好？它有点干净，但这似乎是唯一立即显而易见的好处；事实上，传统风格似乎提供了提供真正封装的能力（类似于 Java 或 C# 等真正的 OOP 语言），而不是简单地返回仅静态方法的集合。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:14:14.467

上面的模块模式毫无意义。你所做的只是使用一个闭包来返回一个带有原型的构造函数。您可以通过以下方式实现相同的目标：

```
function Module() {};
Module.prototype.whatever = function() {};

var m = new Module();
m.whatever(); 
```

实际上，您将保存一个对象（闭包），使其具有相同的输出。

我对模块模式的另一个不满是，如果您将它用于私有封装，您只能将它轻松地用于单例而不是具体类。要创建具有私有数据的具体类，您最终会包装两个关闭器，这会变得很难看。我也同意，当它们可见时，能够调试下划线伪私有属性要容易得多。“如果有人错误地使用你的课程怎么办”的整个概念是没有道理的。制作一个干净的公共 API，记录它，如果人们没有正确地遵循它，那么你的团队中有一个糟糕的程序员。Javascript 中隐藏变量所需的工作量（可以在 Firefox 中使用 eval 发现）不值得使用 JS，即使对于大中型项目也是如此。人们不会窥探您的对象来学习它们，他们会阅读您的文档。如果您的文档很好（使用 JSDoc 的示例），那么他们会坚持使用它，就像我们使用我们需要的每个 3rd 方库一样。我们不会“篡改” jQuery 或 YUI，我们只是信任并使用公共 API，而不关心它在下面使用的方式或内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:18:28.300

模块模式也可用于创建原型，请参阅：

```
var Module = function() { 
  function Module() {};
  Module.prototype.whatever = function() {};
  return Module
}();
var m = new Module();
m.whatever(); 
```

正如另一张海报所说，干净的全局命名空间是它的原因。然而，实现这一点的另一种方法是使用 AMD 模式，它也解决了其他问题，如依赖管理。它还将所有内容包装在各种闭包中。这是一个很棒[的 AMD 简介，](http://addyosmani.com/writing-modular-js/) 它代表异步模块定义。

我还建议阅读[JavaScript 模式](http://shop.oreilly.com/product/9780596806767.do)，因为它彻底涵盖了各种模块模式的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:09:31.537

您忘记提及模块模式的另一个好处是，它可以减少全局名称空间中的混乱，即人们说“不要污染全局名称空间”时所指的内容。当然，您可以在经典方法中做到这一点，但似乎在匿名函数之外创建对象会更容易在全局命名空间中创建这些对象。

换句话说，模块模式促进了自包含代码。一个模块通常会将一个对象推送到全局命名空间中，并且与模块的所有交互都通过该对象进行。这就像一个“主要”方法。

全局命名空间中的混乱较少是好的，因为它减少了与其他框架和 javascript 代码冲突的机会。

# c# - 一种方式同步 b/w Sql Server 2008 和 SQL CE 4.0 (WPF)

> ID：10625046
> 
> 赞同：0
> 
> 时间：2012-05-16T19:06:26.010
> 
> 标签：c#, frameworks, sql-server-ce, sync

我打算使用同步框架在 sql server 2008 和 sql CE 4.0 之间同步数据。这是单向的 - 仅来自 sql server -> sql CE 。更新将直接转到 SQL Server 2008。Microsoft 声明没有对 SQL Server -> SQL CE 4.0 的同步支持。你能指导我如何实现从 sql server 2008 - SQL CE 4.0 同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:47:36.313

您可以将 Sync FX 与 SQLCompact 4.0 一起使用 - [http://jtabadero.wordpress.com/2012/04/20/sync-framework-and-sql-compact-4-yes-you-can/](http://jtabadero.wordpress.com/2012/04/20/sync-framework-and-sql-compact-4-yes-you-can/)或者您可以将 RDA 与 4.0 一起使用- [http://erikej.blogspot.com/2011/03/snapshot-synchronization-with-sql.html](http://erikej.blogspot.com/2011/03/snapshot-synchronization-with-sql.html)

# spring - 如何在控制器中以编程方式实现 Spring Security SpEL isFullyAuthenticated()？

> ID：10625049
> 
> 赞同：2
> 
> 时间：2012-05-16T19:06:55.313
> 
> 标签：spring, spring-mvc, spring-security

我有一个控制器，我想在其中检查用户是否经过完全身份验证，类似于 Spring Security`isFullyAuthenticated()`表达式提供的内容。我怎么做？

我使用的解决方案基于 Tomasz Nurkiewicz 下面的回答，只是从 org.springframework.security.access.expression.SecurityExpressionRoot 窃取实现

```
 public class SpringSecurityUtils {
    private static final AuthenticationTrustResolver trustResolver = new AuthenticationTrustResolverImpl();

    public static boolean isFullyAuthenticated()
    {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        return !trustResolver.isAnonymous(authentication) && !trustResolver.isRememberMe(authentication);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:25:07.293

查看源代码，[`SecurityExpressionRoot`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/access/expression/SecurityExpressionRoot.html)看起来[`AuthenticationTrustResolverImpl`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationTrustResolverImpl.html)您可以使用以下条件：

```
public boolean isFullyAuthenticated(Authentication auth) {
    return !(auth instanceof AnonymousAuthenticationToken || 
             auth instanceof RememberMeAuthenticationToken);
} 
```

您在哪里获得身份验证，例如使用：

```
SecurityContextHolder.getContext().getAuthentication() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:36:10.123

您可以调用[`isUserInRole()`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole%28java.lang.String%29)方法`SecurityContextHolderAwareRequestWrapper`或`HttpServletRequest`使用字符串[`IS_AUTHENTICATED_FULLY`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/vote/AuthenticatedVoter.html#IS_AUTHENTICATED_FULLY)：

```
request.isUserInRole("IS_AUTHENTICATED_FULLY"); 
```

# wpf - DateTimePicker wpf 工具包绑定

> ID：10625054
> 
> 赞同：10
> 
> 时间：2012-05-16T19:07:10.383
> 
> 标签：wpf, binding, wpftoolkit, datetimepicker

由于我没有找到 SelectedDateTime 属性，如何在 WPF Toolkit 或扩展 Toolkit 的 DateTimePicker 中绑定 Selected DateTime？

我想我可能需要将它与“ **Value** ”属性绑定，但我不确定。没有可用的文档。

我正在使用 MVVM。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T11:01:43.313

因为`DatePicker`它的属性`SelectedDate`，因为没有其他类型的属性。`DateTimePicker``Value``DateTime`

```
<DatePicker SelectedDate="{Binding MyDate}" />

<xctk:DateTimePicker Value="{Binding MyDate}"></xctk:DateTimePicker> 
```

如果您使用的是 .Net 4，则已经内置了 DatePicker，因此不需要 Toolkit，但没有 DateTimePicker。

# javascript - 成功的 XHR 请求中的以下内容是什么？

> ID：10625056
> 
> 赞同：0
> 
> 时间：2012-05-16T19:07:23.890
> 
> 标签：javascript, xmlhttprequest

我之前发布了一个关于不太具体的主题的问题，位于此处：[重定向对下载文件的响应](https://stackoverflow.com/questions/10620969/redirect-response-to-download-file)

如果您愿意，可以在那里阅读详细信息。

蒂姆给了我一个很好的答案，只需设置`document.location.href = '/genericHandlers/DownloadFile.ashx?id=' + this.model.get("id");`并使用 a`GET`而不是`POST`我最初认为的。

这种方法的唯一问题是，如果找不到文件，我不能优雅地失败。所以我现在的问题是：

在`XHR`对象内部，什么与蒂姆的答案相当？基本上，我要做的就是开始下载。我试过了：

`document.location.href = xhr.getAllResponseHeaders();`

但这显然行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:16:25.483

您可以先发出 AJAX 请求，看看页面是否会返回 404 错误。但是，这会产生性能和带宽问题。

这个问题有关于植入细节的答案：[如何使用 JavaScript 检查文件是否存在？](https://stackoverflow.com/questions/1657121/how-can-i-check-existence-of-a-file-with-javascript)

# java - Java，本地 TCP 服务器，接受来自浏览器的 HTTP 请求

> ID：10625057
> 
> 赞同：0
> 
> 时间：2012-05-16T19:07:25.703
> 
> 标签：java, sockets

我正在尝试“编写一个作为 TCP 服务器的 Java 程序，它向浏览器返回 HTTP 响应，显示客户端的 IP 地址及其连接到服务器的次数”

目前我认为正在发生的事情。我正在创建一个服务器并监听请求的端口（作为参数输入），然后填充一个字节数组并将该数组转换为字符串。我希望此时只看到请求。

我的问题是，如果我确实尝试通过访问我的网络浏览器并键入“localhost:1235”来连接到该服务器，我的浏览器只会一直说“正在连接...”，而我的程序什么也不做，它只是坐着等待。

我该如何着手修复/并实施其余部分？我目前的问题可能是什么？

到目前为止，这是我的代码

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class TCPHTTP 
{
private static final int MAXFILELEN = 4096000;
static byte[] request = new byte[MAXFILELEN];
static String[] log;

public static void main (String args[])
{
    if (args.length != 1) 
        throw new IllegalArgumentException( "Parameter(s): <Port>");

    int port = Integer.parseInt(args[0]); 

    ServerSocket socket = null;
    Socket sock = null;

    try 
    {
        socket = new ServerSocket(port);
    } 
    catch (IOException e) 
    {
        return;
    }
    for (;;) 
    {
        try 
        {
            sock = socket.accept();
            InputStream is = sock.getInputStream();
            int offset = 0;
            int len = 0;
            while ((len = is.read(request, offset, MAXFILELEN - offset)) >= 0)
            {
                offset += len;
            }

            String s = new String(request);
            System.out.println(s);

            // Add the users IP to the log
            String from = "From: ";
            int loglen = log.length;
            int indexOfSenderIP = s.indexOf(from, 0);
            indexOfSenderIP += from.length();
            int indexOfNewline = s.indexOf("\n", indexOfSenderIP);
            String sendersIP = s.substring(indexOfSenderIP, indexOfNewline);
            log[loglen] = sendersIP;

            //Find out how many times the sender IP appears in the log
            int timesVisited = 0;
            for(int i = 0; i < log.length; i++)
                if(log[i].endsWith(sendersIP))
                    timesVisited++;

            // Construct the HTTP response message
            String httpResponse = "";

            OutputStream os = sock.getOutputStream();
            os.write(httpResponse.getBytes());

            os.close();
            is.close();
            sock.close();
        } 
        catch (IOException e) 
        { 
            break; 
        }
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:29:01.357

考虑添加一个`Content-Length`标头来指定响应的大小，以便浏览器知道要读取多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:36:33.347

您的程序冻结的原因是它等待客户端关闭连接（读取在 eof 之后返回一个 <0 的值）。您应该阅读，直到您从客户端收到双 [cr][lf]，这就是 http 标头结束的标志

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:12:34.883

```
String httpResponse = ""; 
```

这不是有效的 HTTP 响应。您的浏览器正在等待正确的响应。发一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T19:24:20.387

from what i see, you closed the socket before answering the client's request

also, i tested your code, and that while cycle never ends

# javascript - 用于 JSUnit 测试的公共测试群？

> ID：10625059
> 
> 赞同：1
> 
> 时间：2012-05-16T19:07:37.633
> 
> 标签：javascript, unit-testing, qunit, jsunit, testswarm

我遇到了 jQuery 用于在所有浏览器（真实浏览器）上运行 JSUnit（Qunit）测试的 Test Swarm。我可以在我的机器上下载和安装测试群，并启动大量虚拟机来加载和连接所有浏览器，但我想知道它周围是否已经有服务？

配置所有浏览器（包括移动浏览器）并将它们连接到 testSwamp 以运行我的测试是一件很痛苦的事情。是否有一个公共社区/沼泽让我可以访问，以便我可以提交我的工作并通过一些回调来取回结果？

还有什么其他的选择吗？

谢谢

斯帕什古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T14:57:36.840

您可以将 TestSwarm 与浏览器虚拟化服务集成作为替代方案。这里有几个：

*   [MogoTest](https://bitbucket.org/mogotest/)
*   [跨浏览器测试](http://crossbrowsertesting.com/)
*   [酱汁实验室](https://saucelabs.com/)
*   [浏览器](https://browserling.com/)

# ruby - Ruby AWS - 以编程方式生成可用 AWS 实例类型的列表

> ID：10625069
> 
> 赞同：7
> 
> 时间：2012-05-16T19:08:12.240
> 
> 标签：ruby, amazon-ec2, amazon-web-services

我最近开始`aws`在 Sinatra Web 应用程序中使用 gem，其目的是为实例管理提供自定义前端（集成非 AWS 工具）。我目前正在处理表单以允许用户设置可能需要设置的所有选项，其中一个选项是实例类型（m1.small、c1.medium 等）。

我想要的是能够联系到一些来源以获取可用类型的列表。我查看了 AWS::EC2 文档，没有找到任何符合此描述的内容。我没有必要坚持将解决方案作为`aws`gem 的一部分，但如果是，那就更好了，因为那是我已经在使用的工具。

你知道以编程方式收集这些信息的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T10:33:48.567

据我所知，这是不可能的。如果可能的话，亚马逊会在[他们的文档](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/Welcome.html?r=2202)中列出 api 调用。

考虑到已经有 api 列出了几乎所有其他内容，我觉得这个遗漏有点奇怪。

您也许可以通过`DescribeReservedInstancesOfferings`调用将其组合起来，该调用列出了您可以购买的所有类型的保留实例 - 我原以为从中提取唯一实例类型将是一个合理的近似值（据我所知，没有实例类型您无法获得保留实例）。看起来`aws`宝石不支持它。亚马逊[官方sdk](http://aws.amazon.com/sdkforruby/)和[fog一样](http://fog.io)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T20:29:25.373

对于亚马逊仍未发布用于枚举实例类型的 API 的事实，这里有一个有点笨拙的解决方法：

```
instance_types = Set.new()
response = {:next_token => ''}
loop do
    response = ec2.client.describe_spot_price_history(
        :start_time => (Time.now() - 86400).iso8601,
        :end_time => Time.now().iso8601,
        :product_descriptions => ['Linux/UNIX'],
        :availability_zone => 'us-east-1c',
        :next_token => response[:next_token]
    )

    response[:spot_price_history_set].each do |history_set|
        instance_types.add(history_set[:instance_type])
    end

    if(response[:next_token].nil?)
        break
    end
end 
```

# ruby-on-rails - Rails：不匹配的资产摘要

> ID：10625070
> 
> 赞同：1
> 
> 时间：2012-05-16T19:08:16.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, sprockets

下面是我的 Rails 应用程序的资产主机配置

```
ASSET_HOSTS = ["http://host1.cdn.com", "http://host2.cdn.com"]

config.asset_host = proc do |path, request=nil, *_|
  ASSET_HOSTS.sample
end 
```

这样做的问题是我的一个 javascript 文件（它是一个 .js.erb 文件）具有与 manifest.yml 中指定的摘要（在预编译期间生成）不同的摘要（当由 javascript_include_tag 调用时）。

有谁知道为什么会发生这种情况以及如何解决？

# java - JTable 行标题文本

> ID：10625075
> 
> 赞同：2
> 
> 时间：2012-05-16T19:08:31.357
> 
> 标签：java, swing, jtable

有人可以告诉我是否有一种方法可以添加带有文本的行标题，或者是否有某种技巧可以让我们做这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:14:08.337

RowHeader 是

*   [单程](https://stackoverflow.com/a/8187799/714968)

*   [更好的方法](http://tips4java.wordpress.com/2008/11/18/row-number-table/)

# jsf-2 - 如何使用 Primefaces 动态生成按钮？

> ID：10625076
> 
> 赞同：0
> 
> 时间：2012-05-16T19:08:33.580
> 
> 标签：jsf-2, primefaces

我正在处理一个项目，该项目使用 Primefaces 3.2、JSF 2.0.3 和 JBoss 6.1。我还使用了最新版本的 Openfaces（我终于找到了 BorderLayoutPanel 的 PF 版本，所以我可能会摆脱 OF）。

我的情况是我在面板网格-> 行中有这些按钮-添加、编辑、删除和取消。如果我单击添加，则编辑和删除按钮将替换为保存按钮。唯一显示的按钮是保存和取消。我总是可以将所有可能的按钮添加到视图中，然后使用支持 bean 代码切换 render=，但是有没有更优雅的方法来做到这一点？支持 bean 中的 render= 代码可能会很快变得丑陋，我不确定我是否喜欢 Primefaces 有时会生成各种生命周期更改的方式。我有一个最近的数据表仅通过选择一行执行 value= 21 次（Openfaces 实际上通过调用一次正确地做到了这一点）。

# android - 从物理键盘输入

> ID：10625077
> 
> 赞同：2
> 
> 时间：2012-05-16T19:08:36.073
> 
> 标签：android, keyboard

我在 TabHost 中有一个片段，它有一个文本输入字段。我可以使用软键盘在此字段中输入文本，但是，我不能使用物理键盘。当光标在文本字段中时，我将按任何物理键，光标将消失，因此我无法输入文本。如果我然后按键盘上的向上键，光标将重新出现在文本字段中并允许我输入文本。

有谁知道为什么会发生这种情况？

# html - Html 页面在本地显示，但在服务器上发布时不显示

> ID：10625085
> 
> 赞同：0
> 
> 时间：2012-05-16T19:08:59.317
> 
> 标签：html, vb.net, streamwriter

我在 Visual Basic .Net 程序中将 html 代码创建为字符串（名为 htmlString），并希望将创建的 html 显示为新页面

```
 Dim path As String = Server.MapPath("~/tmp/")
        Dim strWriter As StreamWriter = New IO.StreamWriter(path & "SomeHtml.html")
        strWriter.Write(htmlString)
        strWriter.Close()
        System.Diagnostics.Process.Start(path & "SomeHtml.html") 
```

这在本地工作，但在服务器上发布时它不会打开 html 页面。（当我单击应该触发代码段以创建 .html 并显示它的按钮时，什么也没有发生。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:11:53.360

我认为这可能行不通的原因有两个：

1.  服务器上不存在 HTML 文件
2.  文件权限设置不正确

正如 Andrew Morton 正确指出的那样，当这实际上正常工作时，HTML 文件将在服务器上打开，并且不会显示给客户端。（只有当你 RDP 进入服务器时，IE 才可见）

# facebook - 新的 FB 评论导出到数据库

> ID：10625089
> 
> 赞同：1
> 
> 时间：2012-05-16T19:09:09.687
> 
> 标签：facebook, facebook-graph-api

我在这里浏览了很多帖子，看看如何从 fb 评论社交插件（wordpress 网站，即使并不重要）导出网站上留下的所有评论。但我仍然找不到明确的答案。是否有明确的答案或尝试/错误？显然，使用 xids 的 FQL 不再起作用了，因为 facebook 现在正在使用 url。我知道您可以逐个链接导出它们，但我正在寻找更自动化的东西。我想知道这是否仍然有效[http://facebook.stackoverflow.com/questions/7389950/export-comments-from-fbcomments/7462589#7462589](http://facebook.stackoverflow.com/questions/7389950/export-comments-from-fbcomments/7462589#7462589)

有什么想法/帮助/方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:09:46.533

在发帖时，我就是这样做的...

```
FB.Event.subscribe('comment.create', function (response) {
    var commentQuery = FB.Data.query('SELECT fromid, text FROM comment WHERE post_fbid=\'' + response.commentID + '\' AND object_id IN (SELECT comments_fbid FROM link_stat WHERE url=\'' + response.href + '\')');

    FB.Data.waitOn([commentQuery], function () {
        text = commentQuery.value[0].text;
        fromid = commentQuery.value[0].fromid;

        $.ajax({
            type: "POST", // form method
            url: "add_fb_comments.php", // destination
            data: "&fromid=" + fromid + "&comment=" + text + "&commentID=" + response.commentID, // data to post
            cache: false
        });
    });
}); 
```

然后在 中`add_fb_comments.php`，只需保存那里发布的详细信息。

# sql-server - 在一个文件夹中运行一堆 SQL 文件

> ID：10625091
> 
> 赞同：2
> 
> 时间：2012-05-16T19:09:14.053
> 
> 标签：sql-server, ssms

我在一个文件夹中有一堆脚本，我必须**按顺序**运行。我只是在 SSMS 中打开它并一一点击执行。我必须等待其中一个完成然后运行第二个。

有没有办法让我在 SSMS 中创建一个批处理脚本或一个脚本（如果可能的话），它将一个一个地遍历文件？这将节省我的时间，因为我可以在脚本运行时做其他事情并防止错误（它们中的大多数依赖于连续创建的临时表）。

我认为我正在寻找一个批处理脚本，`sqlcmd`但不知道如何完成这项任务。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:24:22.460

为此很容易组合一个批处理文件。将以下内容放入文本文件中，但以 .bat 结尾，例如“ExecuteMyScripts.bat”

Sqlcmd 接受各种参数，但主要的参数是 -S 用于服务器实例，-d 用于数据库，-i 用于输入文件，即您的 SQL 文件，-U 用于用户，-P 用于密码，-o 用于输出文件。注意字母的大小写。

所以打开记事本并添加以下内容：

```
sqlcmd -S mysqlserver -d mydb -U sa -P pass1 -i "c:\script1.sql" -o "c:\script1log.txt"
IF ERRORLEVEL 1 goto :eof
sqlcmd -S mysqlserver -d mydb -U sa -P pass1 -i "c:\script2.sql" -o "c:\script2log.txt"
IF ERRORLEVEL 1 goto :eof
sqlcmd -S mysqlserver -d mydb -U sa -P pass1 -i "c:\scripr3.sql" -o "c:\script3log.txt" 
```

将文件另存为 ExecuteMyScripts.bat。双击该文件，两个脚本都将被执行。

如果发现错误，在每个 sqlcmd 调用之后添加 'IF ERRORLEVEL 1 goto :eof' 将跳转到脚本的末尾。

在这里找到完整的用法， http: [//msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# .net - 数据协定序列化可以与 BasicHttpBinding 一起使用吗？

> ID：10625092
> 
> 赞同：2
> 
> 时间：2012-05-16T19:09:18.683
> 
> 标签：.net, wcf, datacontractserializer, xmlserializer, basichttpbinding

如果我想编写一个 Web 服务并将其公开为 WCF 和基本 SOAP，我的数据类型可以只使用数据协定序列化，还是必须使用 XmlSerializer？

[微软提到](http://msdn.microsoft.com/en-us/library/ms733901.aspx)需要 XmlSerializer

> 创建遵循旧版 SOAP 编码标准的服务时

这可能意味着这一点。

是否有创建可以通过所有绑定公开的数据类型的标准技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:22:37.427

我相信您可以使用 data 和 xml 序列化属性来装饰您的类型。它们都将根据上下文应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:49:46.947

如果您正在创建新服务，则可以完全忽略旧的 XML 序列化器。只需使用数据合同序列化，绑定将负责其余的工作。

# templates - 将标准模板文件中的数据编译到主电子表格中

> ID：10625095
> 
> 赞同：0
> 
> 时间：2012-05-16T19:09:24.937
> 
> 标签：templates, compilation, directory, spreadsheet, master

基本上，我有一大堆 excel 文件列表，这些文件有一个标准模板，发送给人们填写。把它想象成一种形式。它是数字和单词的混合体，我想对其进行排序并将其归档到主电子表格中，其中一些值位于不同的工作簿中。人们填写的文件与主电子表格的格式不同（这意味着我无法将块复制并粘贴到主表格中）。

这些 excel 文件都将与主电子表格一起放在一个文件夹中。

我正在考虑一些循环来遍历文件夹并读取每个文件并将这些值放入各自的工作簿中，但是我对 excel 中的宏很陌生，这似乎是一个非常困难的项目。我也不熟悉使用哪个函数来“复制和粘贴”这些值。

谁能给我一些指导？在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:26:24.773

您可以使用一个非常有用的技巧 如果您给所有电子表格（除了主/总计一个）类似的名称（例如 SHEET1、SHEET2、SHEET3 等）以数字结尾，那么您可以执行例如 SUM如下：

```
=SUM(Sheet1:Sheet99!A1) 
```

这将把每个电子表格中的每个单元格 A1 相加，得出一个总数。这适用于任何功能。

希望这有所帮助。

# python - 提取numpy矩阵的前n列

> ID：10625096
> 
> 赞同：59
> 
> 时间：2012-05-16T19:09:29.317
> 
> 标签：python, numpy

我有一个这样的数组：

```
 array([[-0.57098887, -0.4274751 , -0.38459931, -0.58593526],
         [-0.22279713, -0.51723555,  0.82462029,  0.05319973],
         [ 0.67492385, -0.69294472, -0.2531966 ,  0.01403201],
         [ 0.41086611,  0.26374238,  0.32859738, -0.80848795]]) 
```

现在我想提取以下内容：

```
 [-0.57098887, -0.4274751]
   [-0.22279713, -0.51723555]
   [ 0.67492385, -0.69294472]
   [ 0.41086611,  0.26374238] 
```

所以基本上只是前两列..

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-16T19:13:40.293

如果`a`是你的数组：

```
In [11]: a[:,:2]
Out[11]: 
array([[-0.57098887, -0.4274751 ],
       [-0.22279713, -0.51723555],
       [ 0.67492385, -0.69294472],
       [ 0.41086611,  0.26374238]]) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-05-14T18:20:17.280

我知道这是一个很老的问题-

```
A = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]] 
```

假设您要提取前 2 行和前 3 列

```
A_NEW = A[0:2, 0:3]
A_NEW = [[1, 2, 3],
         [4, 5, 6]] 
```

理解语法

```
A_NEW = A[start_index_row : stop_index_row, 
          start_index_column : stop_index_column)] 
```

如果一个人想要第 2 行和第 2 列和第 3 列

```
A_NEW = A[1:2, 1:3] 
```

参考numpy indexing and slicing文章[——Indexing & Slicing](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)

# c - 如何（以编程方式）滚动到 gtktextview/gtksourceview 中的特定行

> ID：10625099
> 
> 赞同：3
> 
> 时间：2012-05-16T19:09:35.390
> 
> 标签：c, gtk, gtksourceview

我正在创建一个文本编辑器作为更熟悉 C 和 gtk+ 的一种方式。我正在使用 gtk+-2.0 & gtksourceview-2.0 和 gtk_scrolled_window 。作为创建 goto 函数浏览器的第一次尝试，我想我只需创建在文档中找到的函数数组以及它们出现的相应行数组。我做了那么多。我惊讶地发现在 devhelp 中没有可以轻松找到的 goto line 功能。听起来 gtk_text_view_scroll_to_mark () 是我想要的（在创建标记之后），但是所有 *scroll_to 函数都需要一个 inside_margin，老实说我不太明白。：

来自开发帮助：

用于此功能的有效屏幕减少了一个大小为 within_margin 的边距。

这意味着什么？

我什至接近吗？如何创建此滚动到行号功能？

谢谢。

**更新：**以下三个函数用于滚动到缓冲区中的一行：

```
gtk_text_iter_set_line (&start, lineNums[9]);
gtk_text_buffer_add_mark (tbuffer, scroll2mark, &start);  
gtk_text_view_scroll_to_mark (text_view, scroll2mark, 0.0, TRUE, 0.0, 0.17); 
```

gtk_text_view_scroll_to_mark 的最后一个参数用于获取目标行号以与缓冲区中的最顶部行对齐。我想这个参数不适用于所有屏幕尺寸，但我还没有测试过。

gtk_text_view_scroll_mark_onscreen 函数让我接近了行号，但它只是文本区域底部的几行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:53:06.917

inside_margin 参数控制滚动到的文本应该出现的屏幕区域，或者更准确地说，它设置了不应该出现文本的屏幕边框的空间量。

这是存在的，因此当您将 use_align 设置为 false 时（即您不希望文本出现在屏幕上的特定位置），您仍然可以确保文本不会直接出现在底部的顶部屏幕（这可能不利于可读性）。

如果您根本不关心文本将出现的位置，您可以使用`g_text_view_scroll_mark_on_screen`它只接受文本视图和一个标记，而无需进一步的参数。这将始终滚动最小量以使文本出现在屏幕上。

# jquery - 如何使用 JQuery .on() 捕捉滚动事件

> ID：10625104
> 
> 赞同：7
> 
> 时间：2012-05-16T19:10:07.993
> 
> 标签：jquery, css, jquery-plugins

我正在尝试使用 jQuery 中的 .on() 来捕获标签内的滚动事件。

所以这是我的解决方案：

*   div id='popup'
*   .fixedHeader 类是我尝试将其固定在 div 框架顶部的东西。
*   getScrollTop() 是一个返回最高值的 javascript 函数（有效）

    ```
    $(document).on("scroll#popup", '#popup', function(){
       alert('scrolling');
       $(".fixedHeader").css("position", "relative");
       $(".fixedHeader").css("top", getScrollTop());
    }); 
    ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T18:19:39.357

困惑在于“on()”是如何工作的。在 jQuery 中，当您说 $(document).on(xx, "#popup", yy) 时，只要 xx 事件到达文档但原始目标是“#popup”，您就会尝试运行 yyy。

如果文档没有收到 xx 事件，那么这意味着它没有冒泡！详细信息在 jQuery On 文档中，但“加载”、“错误”和“滚动”三个事件不会在 DOM 中冒泡。

这意味着您需要将事件直接附加到接收它的元素上。$("#popup").on(xx,yy);

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T19:11:13.617

事件很简单`scroll`，没有`scroll#popup`。

```
// http://ejohn.org/blog/learning-from-twitter
// Also, be consistent with " vs '
var $fixedHeader = $('.fixedHeader').css('position', 'relative');

$(document).on('scroll', '#popup', function() {
   console.log('scrolling'); // you *really* don't want to alert in a scroll
   $fixedHeader.css("top", getScrollTop()); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T05:47:05.907

正如@ Venar303 所说，滚动不会冒泡，因此绑定到文档将不起作用。

用这个：

```
$('#popup').on('scroll', function() {}); 
```

而不是这个：

```
$(document).on('scroll', '#popup', function() {}); 
```

# android - ListView 中的相对布局

> ID：10625106
> 
> 赞同：0
> 
> 时间：2012-05-16T19:10:16.893
> 
> 标签：android

下午好，

我无法让RelativeLayout 在ListView 中工作。如果我将布局更改为线性等。我会看到它的行为与我预期的一样，但是 RelativeLayout 将所有内容都压缩到重叠空间中。现在我没有受过教育的猜测是，它正试图将所有内容都塞进一行。我认为它会扩展该行，但也许不会，或者这不是问题。

请注意，我的代码已缩写为空格。

无论如何在我的父 XML 中：

```
<LinearLayout ..._width="fill_parent" ..._height="fill_parent" ...orientation="vertical" >
    <ListView ...layout_width="fill_parent" ...layout_height="fill_parent" />
</LinearLayout> 
```

所以我的想法是这会填满设备屏幕，并且在 Eclipse 的 GraphicalLayout 视图中它似乎确实如此。

我对 ListView 的“行”定义是这样的：

```
<RelativeLayout width="fill_parent" height="fill_parent" >

    <ImageView
       android:layout_width="60dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="5dp" />
      .....
</RelativeLayout> 
```

如前所述，我认为这将填充所有可用空间，但它似乎只填充某种“默认”行高？

不知道我错过了什么，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:35:12.867

在您的 xml 中使用布局属性`layout-above`, `layout-below`, `layout-toRightOf`, 。`layout-toLeftOf`这样，物品就会放在您希望它们去的地方。现在您正在根据父级设置所有内容，因此它们都会重叠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:48:53.657

`RelativeLayout`默认情况下，将其子项添加到布局的左上角。

通过使用 的非常方便的属性`RelativeLayout`，您可以同时安排孩子

*   相对于彼此，并且
*   相对于父视图。

`layout_alignParentLeft`, `..Right`, `..Top`, `..Bottom`, `layout_centerInParent`, `layout_centerHorizontal`, `layout_centerVertical`, `layout_toLeftOf`, `..toRightOf`, `..above`,`..below`

这些属性将帮助您以非常有效（平面）的方式获得所需的显示，因此我建议继续阅读并考虑使用它而不是其他布局容器来实现复杂视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:36:57.807

我最终覆盖了 ArrayAdapter 的 getView，然后将高度和宽度设置为动态确定的屏幕尺寸

……剪……

```
int[] iarry_ScrnDim = new int[2];

DisplayMetrics metrics = new DisplayMetrics();
metrics = ctx_Currnt.getResources().getDisplayMetrics();

iarry_ScrnDim[0] = metrics.heightPixels;
iarry_ScrnDim[1] = metrics.widthPixels;

return iarry_ScrnDim; 
```

....剪断....

```
if (vw_BigRow == null)
{
    LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    vw_BigRow = inflater.inflate(R.layout.liftdatalayout, null);
}

vw_BigRow.setMinimumHeight(mHeight);
vw_BigRow.setMinimumWidth(mWidth); 
```

# c# - SoundClip 仅在 button_Click 上播放一次

> ID：10625110
> 
> 赞同：0
> 
> 时间：2012-05-16T19:10:50.817
> 
> 标签：c#, xaml

我希望在单击按钮时播放声音。声音文件将播放，但只会播放一次。每次我按下按钮时，我都需要它播放。请帮忙。

这是我到目前为止所拥有的::

XAML：

MediaElement x:Name="SoundClip" Source="Dart.mp3" AutoPlay="False" />

C＃：

```
 private void OutBull_Click(object sender, RoutedEventArgs e)
    {
        SoundClip.Play();
        game.update_score(25);
        updateGUI();
    }

    private void Bull_Click(object sender, RoutedEventArgs e)
    {
        SoundClip.Play();
        game.update_score(50);
        updateGUI();
    } 
```

当我点击它们时，我需要所有这些来播放声音。不只是一次，它只做？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:17:29.503

SoundPlayer 应该只与 .wav 文件兼容。您是否尝试过将 .mp3 文件转换为 .wav 文件？由于缺乏兼容性，它可能会导致 SoundPlayer 在第一次播放文件后停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:19:25.717

所以在你的 HTML 代码中应该有一个或一些你可以设置为重置的东西

这是 java 但如果你用谷歌 onclick 重置它应该会有所帮助。

```
<br>
<input type="reset" name=resetbutton value=Reset
   onClick='alert("The reset button was clicked")'>
<br> 
```

在最后重置按钮，以便下次单击它时，方法会再次传递给按钮。

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:18:01.987

如果您将 MediaEnded 事件设置如下，它应该可以工作。

```
private void SoundClip_MediaEnded(object sender, Windows.UI.Xaml.RoutedEventArgs e) {
  SoundClip.Stop();
 } 
```

# tfs - TFS 2010 中的用例和用户故事

> ID：10625119
> 
> 赞同：1
> 
> 时间：2012-05-16T19:11:24.740
> 
> 标签：tfs, scrum, use-case, user-stories

在 SCRUM 敏捷项目中，我们使用 TFS 2010/VS2010。

在开始这个项目之前，客户已经写出了所有用例的 80%。问题是这些 UC 中的大多数都非常大，我想将它们分成用户故事。用户故事可以与用例的场景进行比较。

我现在的计划是使用敏捷过程模板并开始创建顶级用户故事作为用例。每个顶级用例将有 1 个或多个用户故事作为父用户故事下方的子级。然后在 2 级用户故事下方，我添加了一个或多个任务，开发人员可以在其中进行签到。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:46:51.927

是的，证明是当您从用户故事创建子工作项时，只有两种类型可用：任务和用户故事。

![在此处输入图像描述](../Images/46c9a6d03d813b33d9c0fb045afb952f.png)

这是为了将大用户故事拆分为较小的用户故事的子集。

# ajax - Jquery ajax - 将参数作为变量传递

> ID：10625124
> 
> 赞同：0
> 
> 时间：2012-05-16T19:12:07.273
> 
> 标签：ajax, jquery

我有一个 ajax 调用（使用 blackberry webworks api [但我认为这无关紧要]）。

目前我正在发送这样的参数：

```
params: {
   user: userId,
   sid: sessionKey,
   db: dbId,
   urn: activeRecord
}, 
```

我想构建参数（有时我不需要它们，而且我不想发送空白数据）。

但是，如果我尝试构建一个字符串并发送该程序错误。

例如：

如果我尝试像这样构建参数，则会发生错误：

```
var myParams ="";

if(userId != ""){
   myParams != "user:" + userId + ",";
}

if(sessionKey != ""){
   myParams != "sid:" + sessionKey + ",";
}

myParams = myParams.slice(-1); 
```

然后尝试在调用中添加参数，如下所示：

```
params: { myParams }, 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:24:59.027

I think this is what you're after:

```
$.ajax({
    type: 'GET',
    url: 'INPUT URL HERE',
    data: {
        user: userId,
        sid: sessionKey,
        db: dbId,
        urn: activeRecord
    },
    success: function(response)
    {
        // Do stuff.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:27:23.783

!= 你的问题吗？

```
如果（用户ID！=“”）{
   myParams = "用户：" + userId + ",";
}

如果（会话密钥！=“”）{
   myParams = "sid:" + sessionKey + ",";
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:38:32.773

感谢各位大侠的帮助，不胜感激，终于弄明白了。问题是我试图将变量添加到一个不起作用的对象中。这样做的方法是这样的：

```
//create the object
var myParams = {};

//add variables (if statements are fine here)
myParams.user = userId;
myParams.sid = sessionKey; 
```

然后当你需要使用它时，你可以像这样添加它：

```
params: myParams, 
```

# excel - Excel - 使用来自不同工作表上的行的内容填充列标题

> ID：10625128
> 
> 赞同：0
> 
> 时间：2012-05-16T19:12:21.230
> 
> 标签：excel

这是我的场景 - 我在工作表上的 COLUMN A 中有一个客户列表 - 以及相关数据......我有另一个工作表，我想在其中创建一个矩阵......但是在第 1 行有客户列表。

我希望添加到工作表 1 上的列的新客户 - 被添加到工作表 2 上的行

这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:53:52.873

我不确定您的 VBA 功能水平，但在您的第一张工作表的代码隐藏中，您可以捕获 Workhseet_Change 事件。

您可以检查更新后的单元格是否在 A 列中。如果是，则可以将该值添加到表 2 的第一行。

以下是一些帮助您入门的代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    'check to make sure the updated cell (Target) is in column 1 (column A)
    If Target.Column = 1 Then addToSheet2 (Target.Value2)

End Sub

Private Sub addToSheet2(ByVal newValue As Variant)

    Dim ws As Worksheet
    Dim columnCount As Integer
    Dim nextColumn As Integer

    On Error GoTo errTrap

    Set ws = ThisWorkbook.Sheets(2) 'probably want to use the sheet name, instead of the index

    'probably a good idea to check if it already exists in row 1 of sheet 2

    'get the number of columns used in sheet 2
    columnCount = ws.UsedRange.Columns.Count

    'this may be overkill, but if you are starting from scratch, columnCount will be 1 even if
    'there is no data in sheet 2 row 1
    If columnCount = 1 And ws.Range("A1").Value2 = vbNullString Then
        nextColumn = columnCount
    Else
        nextColumn = columnCount + 1
    End If

    ws.Cells(1, nextColumn).Value2 = newValue

errTrap:
    Set ws = Nothing

End Sub 
```

# php - hta - 对网络服务器上的 php 脚本的 ajax 调用

> ID：10625129
> 
> 赞同：1
> 
> 时间：2012-05-16T19:12:21.877
> 
> 标签：php, ajax, database, hta

我正在考虑编写一个桌面 HTA 程序。

但是，在启动时，我需要对网站进行 1 次 ajax php 数据库调用，这需要成功元素回调。

这可能吗？我需要克服任何跨浏览器问题吗？防火墙会导致任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:56:31.943

可能——是的。请参阅下面的代码。Crossbrowser 在 HTA 中不适用——您总是使用 IE 渲染引擎。但是我认为您可能是指跨域问题，这在 HTA 中也不适用。Microsoft 选择禁用所有 Javascript 跨域保护，因为 HTA（HTML 应用程序）被视为应用程序而不是网页。

防火墙有很多考虑因素，但防火墙不太可能比 HTML AJAX 更严格地阻止 HTA AJAX 调用。如果你有一个调用你的 PHP 页面的网页，它可能也可以在 HTA 中工作。祝你好运！

```
<html><head>
<script language="javascript" type="text/javascript">
 var XHR = new ActiveXObject("Msxml2.XMLHTTP");
 function callAjax(url){
   XHR.onreadystatechange=(callback);
   txtStatus.value += "opening: " + url + "\n";
   XHR.open("GET",url,true); //"POST" also works
   XHR.send(); // XHR.send("name1=value1&name2=value2");
 }

 function callback(){
   if(XHR.readystate == 4) txtStatus.value += "DONE\n" + XHR.responseText;
 }
</script>
</head>
<body onload="callAjax(txtURL.value)">
  <textarea id=txtURL style="width:100%" rows=1>http://www.google.com</textarea>
  <textarea id=txtStatus style="width:100%" rows=20></textarea>
</body></html> 
```

# javascript - 视差滚动效果

> ID：10625131
> 
> 赞同：1
> 
> 时间：2012-05-16T19:12:26.387
> 
> 标签：javascript, html, css, parallax

我想做与此页面完全相同的操作。[http://www.googleventures.com/](http://www.googleventures.com/)

当您向下滑动页面的下部时，它就像一个视差效果。如何使用图像作为标题来做到这一点？纯jQuery？有 onSlide 功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:33:05.147

我做了一个替代选择。您甚至不需要 z-index，因为较新的元素在 z-index 中自动更高。

**HTML**

```
<div class="fixed">
  <img src="http://placekitten.com/800/300" />
  This is some text that will be static as well
</div>
<div class="scroll">
  Lorem ipsum dolor sit amet
</div>​ 
```

**CSS**

```
.fixed{
    position: fixed;
}
.scroll{
    background: #eee;
    height: 700px;
    position: relative;
    top: 350px;        
}​ 
```

工作示例：http: [//jsfiddle.net/3vxBA/](http://jsfiddle.net/3vxBA/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:32:13.437

这看起来就像标题有一个固定的位置和一个较低的 z-index，所以当你定期滚动时，页面会继续向上，但标题保持在主要内容后面的相同位置。

示例 HTML：

```
<body>

<div id="header">
some image here
</div>

<div id="pagecontent">
everything else
</div>

</body>​ 
```

示例 CSS：

```
body {
    padding-top: 100px; /* #header height */
}

#header {
    position: fixed;
    top: 0px;
    z-index: -1;
    background-color: #ccccff;
    height: 100px;
    width: 100%;
}

#pagecontent {
    background-color: #ccffcc;
    height: 1000px;
    width: 100%;
}​ 
```

这是一个工作示例：http: [//jsfiddle.net/Nv7Ku/](http://jsfiddle.net/Nv7Ku/)

# android - 如何将控制权交还给应用程序（Webview 之外）？

> ID：10625136
> 
> 赞同：0
> 
> 时间：2012-05-16T19:13:01.377
> 
> 标签：android, android-webview, android-activity

我`Webview`在这样的 Android 活动（比如**Activity B**）中使用

```
webview = new WebView(this);
webview.setWebViewClient(new WebViewClient());
setContentView(webview);
webview.loadUrl("http://mywebpage"); 
```

因此，webview 在 Activity 中打开了一个网页，预期的功能是用户可以按照 webview 中的链接浏览不同的网页。（该网站属于移动应用程序，或者换句话说，在我的控制之下）。

现在，在用户检查完网页后，我如何将用户带到另一个活动？（如果它有助于活动 -**活动 A** - 将与调用包含 webview 的活动 B 的位置相同）。

那么我可以从 webview 决定完成当前的活动（B），以便用户回到活动 A 吗？或者如果可能的话，根据网页上的某个事件直接启动另一个可能是活动 A 或其他活动 C 的活动？

或者我是否需要在 Activity B 的 Webview 之外提供一个按钮，我可以从中处理流程？

还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:24:12.140

我过去所做的是在 webview 活动中的 webview 下方提供一个关闭按钮（在你的情况下是 Activity B）。如果您使用 startActivityForResult 从 Activity A 调用 Activity B，则一旦 Activity B 关闭，控件将返回到 Activity A（更具体地说，一旦 Activity B 关闭，则在 Activity A 中调用 onActivityResult）。

结合上述内容，如果您有一个从页面 A 开始到页面 X 的已定义浏览过程，您可以尝试的另一件事是，您可以在到达页面 X 时自动关闭活动 B。Extend `WebViewClient`，监听`onPageFinished`事件以获取当前页面 URL，如果当前 URL 匹配终止 URL，则关闭活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:33:22.150

有几种方法可以处理您所描述的内容。首先，如果用户点击他们的后退按钮，该活动应该可以正常完成并返回到活动 A，而无需调用完成。

现在，如果您正在创建/控制他们看到的网页，您可以创建意图过滤器以从 Web 视图启动另一个活动。例如：

```
<intent-filter>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" 
          android:host="www.yourwebsite.com" 
          android:path="your/path/here"/>
    <action android:name="android.intent.action.ACTION_VIEW"/>
</intent-filter> 
```

如果您将该意图过滤器应用于清单中的活动，并在您的网站上放置一个指向 URL [http://www.yourwebsite.com/your/path/here](http://www.yourwebsite.com/your/path/here)的链接，则应该启动支持该意图过滤器的活动。

# .net - 构建 .NET 使用的 Perl Soap 服务

> ID：10625139
> 
> 赞同：2
> 
> 时间：2012-05-16T19:13:05.667
> 
> 标签：.net, perl, soap, wsdl, service-reference

我有一个带有 Perl 库的 Linux 服务器，我需要将其公开给 .NET 应用程序。自然地，我想我会构建一个独立于平台的解决方案，比如 SOAP，来弥补差距。我发现这并不像我想象的那么容易。

作为一个小型的概念证明，我正在尝试在 Perl 中构建一个 hello world 服务。我根据本教程生成了我的代码：

[http://guide.soaplite.com/#quick%20start%20guide%20with%20soap%20and%20soap::lite](http://guide.soaplite.com/#quick%20start%20guide%20with%20soap%20and%20soap::lite)

并在我在这里找到的一些 Pod::SOAP 评论中加入： [http ://www.perlmonks.org/?node_id=632923](http://www.perlmonks.org/?node_id=632923)

最后得到了这项服务：

```
#!/usr/bin/perl
use CGI;
use SOAP::Transport::HTTP;

SOAP::Transport::HTTP::CGI->dispatch_to('Demo')-> handle;

package Demo;

=begin WSDL
_RETURN $string
=end WSDL
=cut

sub hi {
    return "hello, world";
} 
```

我用这个脚本生成了一个 WSDL：

```
#!#!/usr/bin/perl
use Pod::WSDL;

my $pod = new Pod::WSDL(source => '/var/www/html/perl/test.pl', location => 'http://localhost/perl/test.pl', pretty => 1, withDocumentation =>1);

print $pod->WSDL; 
```

瞧，当我点击这个脚本时，我得到了一个 WSDL。我将它作为 ServiceReference 加载到 .NET 4.0 中，并认为生活很美好。但事实并非如此。

当我尝试像这样唤起参考时：

```
var myWS = new ServiceReference1.DemoHandlerClient(new System.ServiceModel.BasicHttpBinding(), new System.ServiceModel.EndpointAddress(url));
string result = myWS.hi(); 
```

我最终从肥皂请求中得到了这个错误：

> SOAPAction 应匹配 'uri#method' 如果存在（得到 'http://localhost/Demo/DemoHandler/hiRequest'，预期 'http://localhost/Demo#hi'

显然，我看到 .NET 没有提交预期的 SOAPAction。我能做些什么来解决这个问题？我怀疑如果我要为客户端使用 perl SOAP::Lite 库，这将正常工作。

**编辑**：也许更奇怪——如果我使用 Fiddler 来捕获 .NET 发送的 XML，然后使用 SoapUI 手动发送相同的 XML，我最终会得到一个有效的响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:39:39.413

我`SOAP::Lite`在 2006 年用来构建一个 Web 服务，这是一次糟糕的经历，我从那以后就一直避免，就像魔鬼避免圣水一样。如果您确实在走 SOAP 之路，那么我非常建议您熟悉[`XML::Compile`](https://metacpan.org/module/XML%3a%3aCompile)用于 XML Schema、SOAP 和 WSDL 的模块套件。我发现该模块更易于使用，并且有一个邮件列表，作者反应迅速。

看看[`XML::Compile::SOAP::Daemon`](https://metacpan.org/module/XML%3a%3aCompile%3a%3aSOAP%3a%3aDaemon)以了解如何构建服务器。

# php - 需要 HTML 来显示 SQL 表

> ID：10625141
> 
> 赞同：0
> 
> 时间：2012-05-16T19:13:14.640
> 
> 标签：php, html

我需要制作 HTML 表以显示 SQL 表，但它不会显示。

我不知道为什么它不会出现。

这是代码。

```
<h1> <img src="gag3.png" width="454" height="70" alt="Velkommen!"></h1>
      <table width="100%" cellspacing="1" cellpadding="1" border="0" summary="">
        <tbody>

            <?php
$db_host = 'localhost';
$db_user = 'root';
$db_pwd = '';

$database = 'test1';
$table = 'text';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($database))
    die("Can't select database");

// sending query
$result = mysql_query("SELECT * FROM {$table}");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

// printing table headers
for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
}
echo "</tr>\n";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result);
?>      

        </tbody>
      </table> 
```

现在我真的希望它显示在那里的表格中，我希望它显示 PHP，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:18:42.543

`<tr>`您在该片段中没有开口。还可以考虑使用`<th></th>`您的表格标题。您还需要呼应标题！

```
// printing table headers
<tr>     
for($i=0; $i<$fields_num; $i++)         
{         
$field = mysql_fetch_field($result);
echo "<th>".$field."</th>       
}         
echo "</tr>\n"; 
```

你也不需要那里的 \n ；`<tr></tr>`自动为下一行换行。我不知道这些如何影响 HTML；如果它仍然不起作用，考虑删除它们？

# c# - 以编程方式用于网格的 ImageBrush

> ID：10625147
> 
> 赞同：5
> 
> 时间：2012-05-16T19:13:29.317
> 
> 标签：c#, wpf

所以我尝试应用图像但看不到任何变化......

我错过了什么？谢谢！！

```
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.UriSource = new Uri(@"pack://application:,,,/Images/bg1.jpg", UriKind.RelativeOrAbsolute);
bi.EndInit();
ImageBrush ib = new ImageBrush();
ib.TileMode = TileMode.Tile;
ib.ImageSource = bi;
ib.Stretch = Stretch.None;
RootGrid.Background = ib; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T19:19:19.183

试试这个：

```
var ib = new ImageBrush {
  ImageSource =
    new BitmapImage(
      new Uri(@"Images\bg1.jpg", UriKind.Relative)
    )
};

RootGrid.Background = ib; 
```

此外，这很明显，但请确保图像实际上位于正确的路径并设置为项目中的内容。

# object - 在 smalltalk 中创建字符串时会发生什么？

> ID：10625148
> 
> 赞同：3
> 
> 时间：2012-05-16T19:13:36.247
> 
> 标签：object, smalltalk

我是 Smalltak 的菜鸟，但我需要为我的论文了解一些东西。创建字符串或任何其他对象时究竟发生了什么？例如，让我们这样做：

```
fruit <- 'apple' 
```

当我尝试检查对象水果时，我看到它有 5 个 inst var。如果我将“梨”分配给水果，它将有 4 个 inst 变量。那么解释器创建了新的字节串实例，为每个字符添加了所需的 inst 变量并为它们分配了适当的值？我相信还有更多的事情发生，但是我在任何地方都找不到，而且我没有时间正确学习 smalltalk。你能解释一下吗，或者给我一些可以找到的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:28:44.370

字符串是对象。对象包含实例变量并响应消息。在 Smalltalk 中，基本上有两种实例变量：命名实例变量由名称引用（如 Person 对象中的 name 或 phoneNumber）和索引实例变量由数字引用。字符串使用索引实例变量。

考虑以下示例：

```
fruit := String new: 5.
fruit at: 1 put: $a;
    at: 2 put: $p;
    at: 3 put: $p;
    at: 4 put: $l;
    at: 5 put: $e. 
```

这将创建一个包含 5 个字符的字符串。然后它获取fruit 变量以指向该对象。然后它将 5 个字符写入字符串。结果是字符串'apple'。

由于字符串如此常用，编译器支持在编译时创建字符串的特殊语法。

```
fruit := 'apple' 
```

在这个例子中，'apple' 是一个字符串字面量。Smalltalk 编译器在编译该行时创建该字符串。当您运行该行时，您将使 fruit 指向字符串“apple”，该字符串具有 5 个包含 Character 对象的索引实例变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T20:55:31.867

它们不是实例变量，它们是可索引对象中的位置，与创建 Array 或任何其他类型的集合时发生的情况非常相似。

在 Smalltalk 中，字符串只是字符的集合，其中每个字符都存储在它在字符串中占据的位置。

一些例子可以让你熟悉字符串就像数组一样：

```
'Good Morning' at: 3.
#(1 'hi' $d 5.34) at: 3.

'Good Morning' fourth.
#(1 'hi' $d 5.34) fourth.

'Good Morning' reversed.
#(1 'hi' $d 5.34) reversed.

'Good Morning' select: [ :each | each ~= $d ].
#(1 'hi' $d 5.34) select: [ :each | each ~= $d ]. 
```

如您所见，字符串只是另一种集合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T20:40:44.190

字符串是可索引的对象，这意味着它们是数组，并且插槽被编号而不是“标记”...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T22:42:18.440

首先，您作为示例给出的表达式不会创建字符串。这是简单的任务。

```
fruit := 'apple' 
```

不创建字符串。它将现有字符串'apple'分配给fruit变量。如果要创建新字符串，则应使用 (Byte)String new: 类似于 Array new: ..

这就是编译器在编译源代码时实际创建新字符串的方式。

# ios - 恢复暂停的视频后 MPMoviePlayerController 音频加倍

> ID：10625150
> 
> 赞同：1
> 
> 时间：2012-05-16T19:13:42.003
> 
> 标签：ios, xcode, mpmovieplayercontroller

在视图中使用 MPMoviePlayerController。我正在使用自定义控件。当我点击暂停时，很好。然后当我点击播放时，我听到了之前的多个音频流。这就像一个回声。有人遇到过这个吗？

# nlp - Lojban 能否在自然语言理解方面表现得比英语更好？

> ID：10625152
> 
> 赞同：4
> 
> 时间：2012-05-16T19:13:57.977
> 
> 标签：nlp, artificial-intelligence

不确定这是否是解决问题的好地方，但我想我会尝试，因为这里有很多聪明人。

我只是想知道使用像[Lojban](http://en.wikipedia.org/wiki/Lojban)这样的构造（即不是自然开发）和句法明确的人类语言是否可以用来在自然语言理解方面表现得比英语更好，因为它是一种更合乎逻辑的语言。

如果有人探索过这个想法或对 NLP 有更好的理解，我希望得到一些反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T01:48:10.970

[我在语言学堆栈交换](https://linguistics.stackexchange.com/questions/6297/would-a-progamming-language-in-lojban-mean-that-program-could-be-written-in-natu)中问了一个类似的问题。

我收到的回复来自用户@Prash：

> 一些更正：lojban虽然是一种人类语言，但不是自然语言；这是一个conlang。AFAIK，没有以 lojban 为母语的人：这需要将 lojban 作为主要语言之一教授给非常年幼的孩子。
> 
> Lojban 在句法上是明确的，并且在语义上几乎是明确的。如果有一种 lojban 编程语言，这应该无关紧要，因为人们会避免编写语义模糊的形式（如隐喻）。这个问题已经在lojban、Prolog、Haskell等各种论坛上出现过，那些论坛上的共识似乎是有可能，但还没有人做过。一些人（[例如 1](http://web.mit.edu/%7Erspeer/Public/jimpe.pdf)，[例如 2](http://gulik.pbworks.com/w/page/7760016/Lojban%20programming%20language)）试图为非常有限的领域实现这样的事情，但是 AFAIK。

# .htaccess - htaccess 和 GET 用于子页面

> ID：10625159
> 
> 赞同：0
> 
> 时间：2012-05-16T19:14:24.840
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我正在尝试对将 htaccess 中的 get 值传递给 php 进行排序：

我有这样的：

RewriteRule ^pubs$ pubs.php RewriteRule ^pubs/beer$ pubs.php?sort=beer

上面的代码工作正常。现在我尝试对子页面（城市）做同样的事情：

```
RewriteRule ^pubs/(.*)$ district.php?name=$1
RewriteRule ^pubs/(.*)/beer$ district.php?name=$1&sort=beer 
```

链接如下所示：
www.domain.com/pubs/beer - 工作正常
www.domain.com/pubs/new-york/beer - 不工作

我做错了什么？如果我删除*RewriteRule ^pubs/(.*)$ district.php?name=$1*行，那么链接 www.domain.com/pubs/new-york/beer 正在工作。我花了几个小时寻找没有运气的解决方案。我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:33:12.453

> 如果我删除 RewriteRule ^pubs/(.*)$ district.php?name=$1 行，那么链接 www.domain.com/pubs/new-york/beer 正在工作。

因为 www.domain.com/pubs/new-york/beer 匹配

```
RewriteRule ^pubs/(.*)$ district.php?name=$1 
```

导致 District.php?name=newyork/beer 而不是匹配

```
RewriteRule ^pubs/(.*)/beer$ district.php?name=$1&sort=beer 
```

您可以解决此问题的一种方法是：

```
RewriteRule ^pubs/([^/]*)$ district.php?name=$1 
```

因此，如果您所在城市之后的任何地方有一个额外的斜线，则该规则将被忽略并继续执行第二条规则......请务必将其放在后面

```
RewriteRule ^pubs/beer$ pubs.php?sort=beer 
```

或者它会匹配啤酒，就好像它是一个城市名称，比如 District.php?name=beer

# javascript - javascript数组对象

> ID：10625160
> 
> 赞同：5
> 
> 时间：2012-05-16T19:14:27.213
> 
> 标签：javascript

[http://jsfiddle.net/gfuKS/5/](http://jsfiddle.net/gfuKS/5/)

```
var transitionInitial = {property: "none"};
var rules = ["color", "background-color"];
var transitions = [];
for ( var k = 0; k < rules.length; k++)
{
    transitions[k] = transitionInitial;
    transitions[k].property = rules[k];
    alert(transitions[0].property);
}​ 
```

为什么在第二次迭代时 transitions[0].property 等于“背景颜色”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T19:18:17.663

因为您存储的是对 的引用`transitionInitial`，而不是它的副本。`transitionInitial`指向内存中的一个对象，并且您将对该对象的引用存储在`transitions[k]`. 无论您处于何种迭代中，您总是在更改同一个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:25:21.607

It's because both values in your `transitions` array are pointing at the same object. During the execution of your code you produce one object that has three different references (`transitionInitial`, `transistions[0]`, & `transistions[1]`).

During the first iteration of the loop, `transistions[0]` is set to reference the `transitionInitial` object. Then the `property` property of that object is set to the value `"color"`. During the second iteration `transitions[1]` is set to reference the same object as `transitionInitial` and `transitions[0]`. You then reset the `property`'s value to `"background-color"`.

To solve this create different objects for each of your array indexes:

```
// Not needed anymore:
// var transitionInitial = {property: "none"};
var rules = ["color", "background-color"];
var transitions = [];
for ( var k = 0; k < rules.length; k++) {
  transitions[k] = {};
  transitions[k].property = rules[k];
  alert(transitions[0].property);
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:18:07.680

它可能与此有关吗？`for ( var k = 0; k < rules.length; k++)` 尝试更改计时器。

# javascript - GWO：使用触发器退出页面开始测试变体

> ID：10625170
> 
> 赞同：0
> 
> 时间：2012-05-16T19:15:36.640
> 
> 标签：javascript, google-analytics, exit, google-website-optimizer

我们的营销团队正在询问是否可以在我们的网站上运行测试，其中根据页面退出而不是页面加载显示变体。我说我可以尝试看看我是否可以使用自定义代码来处理它，但我很想使用已经存在的东西。我还没有自己触发页面退出的知识，这就是我需要找出的。

场景：用户将加载页面，GWO 将决定在加载时显示哪个变体，当用户“退出”时，变体 1 将加载一个弹出窗口。弹出窗口中将包含一个链接，并且转换将基于用户单击该链接。此处将退出定义为任何通过后退按钮离开域、关闭浏览器或在地址栏中输入另一个地址的人。这里的退出不是特定的页面，而是整个域本身。测试的变体 1 将仅在大约 10 个页面上提供（我们零售网站上的数千个页面）。

我不知何故认为谷歌分析已经定义了退出并且想知道我是否不能存钱那个触发器？GWO有类似的东西吗？我认为我们的网站跟踪变体 1 用户是否从任何时候离开域是不可行或不合逻辑的，因此也许只有在为他们提供变体 1 并且仅从他们获得变体 1 的同一页面时才跟踪退出。

所以我知道这是一个加载的问题，但它之前是否在测试中出现过？有什么简单的处理方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:52:02.727

首先，当访问者试图离开你的网站时弹出一个窗口是可怕的用户体验。这是绝对每个人都讨厌的东西，绝对没有例外。而且...试图找出“退出链接弹出窗口”的哪种变体效果最好，就像试图找出人们最喜欢哪种折磨方法一样。所以我给你的第一个建议是我强烈建议你把这个问题推给你的营销团队，他们应该知道得更好......如果他们真的建议这样做，那么也许他们需要接受（重新）培训（或解雇...... ） 只是在说'...

但无论如何...... Ga*官方*声明[没有自动退出链接跟踪](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)。我知道在大多数情况下，GA 确定当前 ping 与下一个 ping（或缺少）的退出链接，但我在 ga.js 上戳的经验让我相信他们确实在某种程度上确实有退出链接/页面卸载跟踪隐藏在那里...

但与其尝试对 ga.js 进行逆向工程，以查看是否有可能利用可能存在或可能不存在的东西，如果您的页面上有 jQuery 或类似框架（大多数网站都有，如果您没有） t，只需将它包含在您的测试页面中就足够简单了），您可以使用 jQuery 的[.unload()](http://www.google-analytics.com/ga.js)让它根据需要触发。

**编辑：** 你说的一件事：

> 这里的退出不是特定的页面，而是整个域本身。

好吧，这是一个不可能的“陷阱”。如果访问者单击您页面上的链接，您可以编写代码将当前 URL 与目标 URL 进行比较，但是 javascript 不允许您访问在地址栏中键入的新 URL，也不允许您查看历史记录中的前一个 URL（例如，如果用户单击后退按钮） - 这两者都是浏览器安全功能 - 因此您无法 100% 知道访问者是否正在退出您的域。

像 GA 这样的跟踪工具通过“会话”计时器跟踪访问者的最后一次活动来解决他们的*一些数据的问题。*如果会话超时，则提交的最后一个 ping 会获取退出站点的额外数据，例如“访问的最后一页”、跳出率数字等。（尽管由于列出的原因，它不会显示访问者实际去了哪里多于）

# magento - Magento - 无法使用 SSL 访问结帐

> ID：10625176
> 
> 赞同：1
> 
> 时间：2012-05-16T19:16:19.207
> 
> 标签：magento, ssl

我的 Magento 商店有问题。如果我在前端打开 SSL，我将无法访问结帐。当我尝试去结账时，我只是被弹回到购物车页面。

如果客户先登录，那么它工作正常，但客人无法到达结账处。

“我的帐户”部分适用于 SSL。

如果我关闭 SSL，那么每个人都可以毫无问题地访问结帐。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:15:52.347

尝试关闭服务器上的 Suhosin：

[http://www.magentocommerce.com/boards/viewthread/15445/#t55590](http://www.magentocommerce.com/boards/viewthread/15445/#t55590)

# ios - 在我的 iPod v4.2.1 上进行测试时，ios ASIHTTPRequest 已停止工作

> ID：10625183
> 
> 赞同：1
> 
> 时间：2012-05-16T19:16:48.263
> 
> 标签：ios, asihttprequest

我在使用 asihttprequest 时遇到了一些非常令人沮丧的问题。当我在模拟器中运行代码时，一切正常，但在我的 ipod 上调试时，它突然停止工作。

它曾经在设备上也能正常工作。我已经调试了代码，大多数时候请求失败，因为`secondsSinceLastActivity > [self timeOutSeconds]*1.5`这意味着超时。有时请求似乎由于网络事件而失败，`kCFStreamEventErrorOccurred`？

我尝试使用 https 连接到服务器。证书颁发机构是受信任的。当我写这篇文章时，我突然想到这可能与处理证书的设备有关？

实际上，当尝试使用 safari 登录 gmail 或 facebook 时，会显示一个对话框，提示“无法验证服务器的身份”。我想这就是导致请求失败的原因？为什么我的 ipod 突然不信任这些证书？我用谷歌搜索了这个，但没有找到任何解决方案。

我不确定这是正确的论坛，但是有人可以帮忙吗？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:10:48.930

我首先要弄清楚为什么您在使用 gmail 和 facebook 时遇到问题。设备上的日期/时间设置是否正确？

# android - 通知用户已到达

> ID：10625186
> 
> 赞同：0
> 
> 时间：2012-05-16T19:17:16.340
> 
> 标签：android, google-maps

目前我正在开发基于 Android 的移动应用程序。它将被集成到一个 ERP 系统中，供需要大量旅行并希望计算其旅行时间等的用户获得回报。

我认为，如果我的应用程序可以在用户到达某个位置时收到通知（比如说 Serice 组件），这将是一个很好的功能。假设用户正在使用谷歌地图的导航系统。我想通知用户已到达，以便我的应用程序可以自动执行一些管理工作。我知道如何查询我当前的位置，但不知道如何通知用户在导航系统中输入的内容。我不想强迫他把它输入到我的程序中。

那么是否可以在我的应用程序中获取一些信息？

感谢和抱歉我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:20:25.743

您可以通知用户使用`Notification Manager`，您可以在`IntentService`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:22:12.057

我认为您无法从导航应用程序中获取原始导航查询。

那是在设备上运行的自定义应用程序，该应用程序必须将此信息提供给系统的其余部分（我怀疑他们是否允许）。我认为导航应用程序也不会提供用户已到达其位置的信息。

最重要的是，我认为您无法从 Google 导航应用程序中获取任何类型的信息，因为他们不提供此信息。

# javascript - 如何在editrow调用时滚动jqGrid单元格编辑？

> ID：10625187
> 
> 赞同：1
> 
> 时间：2012-05-16T19:17:19.003
> 
> 标签：javascript, jquery, jqgrid, scroll

我已经将我的 jqGrid 设置为使用单元格编辑，并且我已经绑定了一些导航键。

向上和向下箭头将调用上一行或下一行的编辑行，效果很好。唯一的问题是，如果我到达可见记录的末尾，它不会滚动以跟上。

我已经尝试`scrollrows: true`在网格选项中进行设置，但这似乎只适用于选择一整行，而不是一个单元格。

以前有人必须处理这个吗？我对滚动和 javascript/jquery 不是很有经验，所以我没有开箱即用的解决方案。

感谢您的任何建议！

编辑：这是一个帮助调试[的小提琴。](http://jsfiddle.net/ironicmuffin/7dGrp/)要查看问题，请单击“Thingy”列，使用向下箭头导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:21:14.423

`editNewCell`可以修改该函数以使用`setSelection`以确保新编辑的行可见：

```
function editNewCell(iRow, iCol) {
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();
    grid.editCell(iRow, iCol, true);

    var selRow = grid.getGridParam('selrow');
    grid.jqGrid('setSelection', selRow );
}; 
```

如果您想尝试一下，这是一个带有更改的[jsfiddle 。](http://jsfiddle.net/7dGrp/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:36:26.757

我不确定我做对了。“如果我到达可见记录的末尾，它不会滚动以跟上。”是什么意思？你的意思是一旦你到达顶行/底行你就不能再往前走了，***或者***你的意思是如果你继续水平滚动并且一旦你越过可见记录的末尾，你的编辑模式就会消失。

我有类似的[excel 像 gridedit 实现](https://stackoverflow.com/questions/7016109/jqgrid-any-easy-way-to-implement-undo-on-excel-like-jqgrid-implementation)，我在编辑模式下有向上和向下箭头导航以进行单元格编辑。第一段中的链接将带您进入[jsfiddle 示例](http://jsfiddle.net/justcurious/qLQRA/)。在 javascript 部分中查找*HandleInputNavigation*函数。我已将列的**editoptions下 colModel 中的****keydown**事件绑定到*HandleInputNavigation*函数。那就是我处理向上/向下导航的地方。

 *****5/24 更新：**您的代码应如下所示：

```
 if (iRow && iCol) {
    var isShift = window.event.shiftKey ? true : false;
    var top = 1; //UPDATED
    var bottom = grid.getGridParam('reccount');
    var left = 0;
    var right = grid.getGridParam("colNames").length - 1;

    switch (key) {

    case 38:
            // up
        if (iRow === top) saveCell(iRow, iCol); //UPDATED
        else editNewCell(iRow - 1, iCol);
        break;

    case 40:
            // down
        if (iRow === bottom) saveCell(iRow, iCol); //UPDATED
        else editNewCell(iRow + 1, iCol);
        break;
    ...
    ... 
```

**[更新的小提琴](http://jsfiddle.net/justcurious/7dGrp/10/)*****

# java - 如何获取 Hashmap Key 并将其转换为其他数据类型

> ID：10625189
> 
> 赞同：1
> 
> 时间：2012-05-16T19:17:20.113
> 
> 标签：java, hashmap, key

嗨，我在运行此代码时出错

```
Map<String, Integer> map = new TreeMap<String, Integer>();//Already populated
public ArrayList<Map<String, Integer>> storage(){
    for (String getCharacter : map.keySet()){
        String convertBinGrp;
        **Integer binGroups = Integer.valueOf(getCharacter);**

        if ( binGroups>=0 && binGroups<= 32){
            convertBinGrp = Long.toString(binGroups);
            binInsideList.get(convertBinGrp);
            Integer getVal = getCharacter.getValue();
            binInsideList.put(convertBinGrp, getVal);
        }
    } 
```

错误消息：线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“”
指示的错误是**Integer binGroups = Integer 。valueof(getCharacter)**铸造。我已经尝试使用 long 和 double 来确保它的大小更大，因为我理解它是从 Map 获取的 String 值。但是还有其他方法可以解决这个问题吗？我想将字符串转换为数值，以便可以将其放入适当的箱或组中。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:18:40.027

您的地图包含`" "`作为键之一。该代码试图将 解释`" "`为一个数字，但它不是一个有效的数字。

您需要弄清楚空间的来源，然后决定最佳的行动方案（解决导致它的问题，忽略它等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:29:54.340

例外是正确的： Integer.valueOf(" ") 会给你`java.lang.NumberFormatException`。TreeMap 的初始化（填充）为您提供了空白值。

尝试：

```
System.out.println("Key is: '" + getCharacter + "'); 
```

`Integer.valueOf(getCharacter);` 如果有“一个白字符键”，则在种群中寻找错误

# python - 最适合 Github API v3 的 python 库

> ID：10625190
> 
> 赞同：88
> 
> 时间：2012-05-16T19:17:26.713
> 
> 标签：python, api, github

我正在寻找适合我的 Github APIv3 的 python 库。

[我找到了GH API docs](http://developer.github.com/v3/libraries/)中提到的一个库[（python-github3）](https://github.com/copitux/python-github3)。在 ipython 中玩了一两个小时后，我发现探索/使用它真的很不直观。我又看了一些，发现至少有很多人在尝试编写这样的库。更有前途的（一目了然）是[PyGithub](https://github.com/jacquev6/PyGithub)和[另一个 python-github3](https://github.com/ChristopherMacGown/python-github3)，这显然与第一个不同。

*在接下来的几天里连续尝试一个又一个库之前，我想问一下 SO 社区，该库是否有一个公认的、明确的、明显的选择？*

我不喜欢第一个库的是（对我而言）获取数据的不直观方式——有些东西是作为属性得到的，有些是作为方法的返回值得到的，返回值是一些复杂的对象，必须被分页和迭代，等等。

在这方面，PyGithub 第一眼看起来更有吸引力——清楚地向下钻取对象层次结构，然后到达包含您想要的属性的属性：

`for repo in g.get_user().get_repos(): print repo.name`

那么，有什么智慧的明珠可以分享吗？我知道我没有足够的技能来快速判断图书馆的质量，这就是我转向 SO 社区的原因。

*编辑：fwiw，我最终使用了**PyGithub**。它运行良好，作者非常乐于接受反馈和错误报告。:-)*

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-16T20:37:14.550

既然你提到你是一个初学者 python 程序员，我建议你先尝试在没有任何 Github 库的情况下使用 JSON API。这真的没有那么难，它会在你以后的编程生活中帮助你很多，因为同样的方法可以应用于任何 JSON API。特别是如果尝试图书馆似乎需要几天时间。

我并不是说某些库不容易使用，我只是说从长远来看，直接使用 API 所付出的额外努力可能是值得的。至少它会帮助您理解为什么其中一些库看起来“不直观”（如您所说）。

获取 django 存储库创建时间的简单示例：

```
import requests
import json
r = requests.get('https://api.github.com/repos/django/django')
if(r.ok):
    repoItem = json.loads(r.text or r.content)
    print "Django repository created: " + repoItem['created_at'] 
```

这是使用流行的[requests 库](http://docs.python-requests.org/en/latest/index.html)。在您的代码中，您自然也需要处理错误情况。

如果您需要通过身份验证进行访问，那将有点复杂。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-01-13T10:15:38.623

最后，我最终使用了[PyGithub](https://github.com/jacquev6/PyGithub)。它运行良好，作者非常乐于接受反馈和错误报告。:-)

*（改编自我对原始问题的编辑，以获得更好的可见性）*

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-08-29T13:07:32.893

PyGitHub 的文档很糟糕，但产品很棒。这是一个实际检索文件的快速示例，在文件开头使用新注释更改它并将其提交回来

```
from github import Github
gh = Github(login_or_token='.....', base_url='...../api/v3')
user = gh.get_user()
repo = user.get_repo("RepoName")
file = repo.get_file_contents("/App/forms.py")
decoded_content = "# Test " + "\r\n" + file.decoded_content
repo.update_file("/"RepoName"/forms.py", "Commit Comments", decoded_content, file.sha) 
```

# c# - 如何保存游戏状态？

> ID：10625194
> 
> 赞同：1
> 
> 时间：2012-05-16T19:17:37.997
> 
> 标签：c#

所以我目前正在开发一个简单的游戏项目，大多数人都是从“突破”开始的。我的部分目标是以最简单的方式制作当前游戏状态的游戏存档。例如。

==场景==

然后假设我输掉了比赛，或者我因为累了想上床睡觉，所以我想重新加载游戏状态到我回到桨、球和砖的相同位置的地方。唯一的问题是我有多个表格，我只想将这个特定的表格保存在它的特定状态。

我有一个关于如何接近的想法（我会找到一种方法来保存桨、球和砖块的位置以及确切的时间）只是我不知道我将如何执行它。我究竟如何才能实现这一壮举？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:37:20.220

这可能是一个非常复杂的问题，但在您的情况下，我建议您从简单开始，随着您的游戏变得更加复杂，从那里开始。本质上，这个问题被称为[序列化](http://en.wikipedia.org/wiki/Serialization)。或者，将应用程序的内存写入磁盘或数据库，以便以后可以读回内存。

有很多技术可以做到这一点，例如将您的对象转换为 XML 或 JSON 或其他一些二进制文件格式。例如，位图文件只是内存中某些图像结构的序列化形式。

除了 C#（XNA？）之外，我真的不知道您用于制作游戏的技术（XNA？）但本质上您想使用某种在您的环境中可用的文件系统 API 并在那里编写您的序列化对象。根据您的问题，您可能需要重新设计一些游戏以促进这一点。一般来说，最好有一个单一的“真实来源”来表示你的游戏状态，但即使你没有，你仍然可能会弄明白。

所以这里是我将采取的步骤的粗略轮廓......

**序列化**

1.  编写一个获取游戏状态并输出更简单、可序列化对象的例程。
    *   这些简单的对象大多具有所有公共 getter/setter 属性，但没有任何功能。
    *   试着只写出稍后重新创建游戏状态所需的最少信息。
    *   例如查看国际象棋如何序列化游戏状态：[国际象棋符号](http://en.wikipedia.org/wiki/Chess_notation)
2.  将这些对象序列化为[JSON](http://en.wikipedia.org/wiki/Json)（因为它简单灵活）
3.  将该json写入磁盘。
    *   我可能会在这里使用基于约定的方法。
    *   例如“Saves\game1.json”是第一个游戏槽的状态。
    *   只需根据正确名称的文件的存在来推断保存的游戏。

**反序列化**

1.  根据上述约定查找游戏存档。
2.  将 JSON 反序列化回简单的序列化对象。
3.  通过查看序列化对象重新创建更复杂的游戏状态。
    *   考虑使用访问者模式。
4.  使用新水合的游戏状态恢复游戏。

[**编辑**：添加一些额外的链接和快速代码示例]

这是一个相当不错的开源 json 库：http: [//json.codeplex.com/](http://json.codeplex.com/)

```
// somehow convert your game state into a serializable object graph
var saveState = gameState.Save();

// use json.net to convert that to a string
string json = JsonConvert.SerializeObject(saveState, Formatting.Indented);

// save that string to the file system using whatever is available to you.
fileSystemService.WriteAllText("Saves\game1.json", json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:19:52.260

您可以简单地将其保存在 XML 文件中，然后在启动时读取 XML 文件。

# linux-kernel - 从 IOCTL 调用返回内核句柄 - 安全问题？

> ID：10625197
> 
> 赞同：0
> 
> 时间：2012-05-16T19:17:54.463
> 
> 标签：linux-kernel, linux-device-driver

我有一个设备驱动程序，它允许用户空间应用程序使用 ioctl 机制执行各种操作。作为初始 ioctl 调用的一部分返回的是一个句柄，该句柄应该对应用程序在其他 ioctl 调用中提供的用户空间应用程序是不透明的。

在驱动程序内部，句柄是内核空间中某些控制/上下文块的地址。如果可以信任应用程序忠实地传回返回的句柄，那么一切都很好。担心的是如果应用程序是恶意的并传回一些任意句柄，然后驱动程序将其转换为适当的指针类型并取消引用它。

我正在考虑的一项健全性检查是与 PAGE_OFFSET 进行比较，如果小于则拒绝（以确保地址至少指向内核内存）。如果我认为在内核空间中不合法的页面错误怎么办？一个简单的方案可能是检查句柄是否先前已返回到用户空间，但搜索的开销可能很高（因为可能有很多这样的句柄）。

是否有一种强大而有效的方法来验证句柄？任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:56:14.773

永远不要接受来自不受信任程序的指针。
这对您的代码和其他代码（例如，使用您窥视进程不得访问的内存）造成的攻击没有止境。

有很多方法可以验证它，但它们很复杂或很昂贵。例如：
1\. 将所有手柄放在一个数组中。验证指针是否在数组内，并且正确对齐。但是你可以使用数组索引作为句柄。
2\. 扫描您的句柄数据库并将指针与用户提供的指针进行比较。在数据库中找到之前不要取消引用句柄。但同样，使用一些 ID 进行查找，而不是指针，可以简化它。

您可能需要验证更多的事情：
1\. 正如 Alex 评论的那样，如果有几种可能的句柄类型，请验证您是否获得了正确的类型（即 prevent `h = get_handle_typeA(); use_handle_typeB(h)`）。
2\. 确保每个进程只使用它创建的句柄。因此，一个进程将无法猜测句柄值并希望捕捉到一个有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:32:21.877

为什么你甚至需要一个把手？打开的文件*是*一个句柄，您可以在其中存储自己的私有数据，例如：

```
static long your_ioctl(struct file *f, unsigned int cmd, unsigned long arg)
{
      struct your_struct *p = f->private_data;
      ... 
```

# c# - 在 asp.net mvc3 中使用 JsonResult 操作的用例是什么？

> ID：10625203
> 
> 赞同：6
> 
> 时间：2012-05-16T19:18:04.613
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-3, c#-4.0

什么时候在 ASP.NET MVC 3 应用程序中使用 JsonResult 操作？

通常从哪里调用 JsonResult；来自另一个动作或 html 中呈现的动作链接？

你能给我一些你想要json而不是典型视图的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:20:31.700

比方说，例如，您想使用基于另一个字段选择的值列表填充 jQuery 自动完成，因此您无法确定页面加载时的数据。我通常会在调用中调用一个操作方法`$.ajax`，然后返回一个项目数组来填充自动完成功能。

例如，这是我的 jQuery，一个用于调用的函数，另一个用于使用接收到的数据填充 automcomplete 的函数：

```
$(function() {
    $.ajax({
            url: '@Url.Action("GetHomes", "Account")',
            type: "POST",
            datatype: "json",
            success: function (data) {
                if (data.Success || data.Success == null) {
                    WireUpHomesData(data);
                } else {
                    ShowErrorDialog();
                }
            }
        });

    ShowDialog();
});

function WireUpHomesData(data) {
    var homes = new Array();

    for (var i = 0; i < data.length; i++) {
        homes[i] = { label: data[i].HomeName, text: data[i].HomeId, icon: data[i].HomeIcon, desc:data[i].HomeAddress };
    }
    $("#home").autocomplete({
            source: homes,
            select: function (event, item) {
                homeUrl = '@Url.Action("Site", "Sites")/' + item.item.text;
            }
        }).data("autocomplete")._renderItem = function (ul, item) {
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append("<a><span class='" + item.icon + "'/><span class='fs-ui-autocomplete-home'>" + item.value + "</span><br>" + item.desc+ "</a>")
            .appendTo(ul);
    }; 
    $(".ui-autocomplete").addClass("fs-ui-autocomplete");
} 
```

这是我的控制器：

```
public JsonResult GetHomes()
{
    return Json(RequiresAclAttribute.HomesForUser());
} 
```

这是被调用方法的方法签名：

```
public IEnumerable<HomeInfo> HomesForUser() 
```

为了清楚起见，这里是`HomeInfo`类：

```
public class HomeInfo
{
    public string HomeId { get; set; }
    public string HomeName { get; set; }
    public string DisplayName { get; set; }
    public string HomeAddress { get; set; }
    public string HomeIcon { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:23:30.583

`JsonResult` 是从类派生的子`ActionResult`类。当你想返回一个 Json 对象时，你可以使用它。

```
public JsonResult GetItems()
{
  var jsonResult=new { Id = "23", Name = "Scott"};
  return Json(jsonResult,JsonBehaviour.AllowGet);
} 
```

这将返回与

```
public ActionResult GetItems()
{
  var jsonResult=new { Id = "23", Name = "Scott"};
  return Json(jsonResult,JsonBehaviour.AllowGet);
} 
```

可能的用途是以异步方式获取一些数据块。例如：假设您有一个显示州的下拉菜单，当用户选择一个州时，您希望将属于该州的城市列表显示在页面中，而无需页面刷新。您可以调用使用 jQuery ajax /getJson 方法（jQuery get 以 json 作为数据类型的简写）方法从`ActionMethod`返回数据的方法中获取此`Json`数据。

一个调用返回 Json 数据的 Action 方法的小例子

```
$(function(){
   $.getJSON('YourController/GetItems', function(data) {
      alert(data.Id);
      alert(data.Name );
   });
}); 
```

对于 JsonResult 类，`application/json`如果没有明确指定，则响应内容类型将为“”。内部 返回数据时用于序列化内容的`ExecuteResult`方法。`JavaScriptSerializer`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:22:39.530

JsonResult 在从 javascript 进行 ajax 调用时非常有用，例如使用 jQuery 中的 getJSON：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

JsonResult 的好处是它可以毫不费力地返回 JSON 格式的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T19:19:42.543

来自不涉及整个页面加载的客户端脚本的 Ajax 请求。基本上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-06T13:55:01.907

Whenever there is client side processing and client need that data use jsonresult like in autofill or remote validation

# ruby-on-rails - Ruby on Rails - 如何实例化一个空模型并填充对象

> ID：10625205
> 
> 赞同：0
> 
> 时间：2012-05-16T19:18:07.483
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建一个空模型，填充它，然后将其添加到数据库中。

我正在通过 Google 查找用于实例化可以在其中设置字段的简单模型的语法，但似乎没有太多相关文档。

这不是预期的使用模式吗？如果是，我怎样才能创建空模型？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:46:23.667

ActiveRecord 模型基于它的相关表在您的数据库中具有哪些字段来工作。如果您还没有数据库，那么您还没有字段。使用模式是这样的：

```
$ rails g model client name:string
#stuff happens
$ rake db:migrate 
```

您现在有一个与客户表相关联的模型，该表具有一个名为 name 的字符串属性。

现在在您的控制器中，您可以通过

```
@client = Client.new
@client.name = "foo"
@client.save 
```

这将创建模型对象，设置名称并将其持久化到数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:47:39.133

您应该阅读[Rails 指南](http://guides.rubyonrails.org/)。[此链接](http://guides.rubyonrails.org/getting_started.html#creating-a-resource)涵盖了您当前的问题，但您确实需要阅读入门。

# javascript - 如何防止 javascript 在 for 循环中破坏我的表格？

> ID：10625209
> 
> 赞同：0
> 
> 时间：2012-05-16T19:18:21.627
> 
> 标签：javascript, jquery, cookies

我遇到的问题是，当我尝试通过 javascript 创建表格时，它会在我实际给出结束标记之前关闭表格。

我正在使用此解决方案记录/读取 cookie [https://stackoverflow.com/a/1960049](https://stackoverflow.com/a/1960049)

我需要的是从这个“数组”的 cookie 中创建一个愿望清单，通过循环遍历它们并将它们放入一个表中。（在#catalog div 内）

```
function loopArray() { 
      var cookie = $.cookie("testCookie"); 
      var items = cookie ? cookie.split(/,/) : new Array();

     $('#catalog').empty();
     $('#catalog').append("<table><tr><th>Part #</th><th>Delete</th></tr>");

     for(var i=0;i<items.length;i++){
         $('#catalog').append("<tr><td width='150'>"+items[i]+"</td><td><a href='javascript:;' onclick='remNum("+i+")'><img src='searchAssets/img/delete.png' /></a></td></tr>");
     }

     $('#catalog').append("</table>");

} 
```

不知道为什么这不起作用。尝试使用 innerHTML 作弊，但这给我带来了问题，我尝试使用 document.write，但是当使用 remNum 函数删除 cookie 值并刷新列表时，它完全擦除了我的整个页面。

当我取出代码时，这就是我的桌子最终的样子

```
<table><tbody><tr><th>Part #</th><th>Delete</th></tr></tbody></table><tr><td width="150">three</td><td><a href="javascript:;" onclick="remNum(0)"><img src="searchAssets/img/delete.png"></a></td></tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:19:22.840

您不能使用 . `append()`. 您必须添加完整的 HTML 片段。这条线`$('#catalog').append("<table><tr><th>Part #</th><th>Delete</th></tr>");`是一个真正的问题，因为它只是一段有效的 HTML 并且本身是无效的。

您可以做的是在循环中累积部分 HTML 字符串，然后将完成的字符串一次附加到最后的 DOM。

或者，您可以为表格添加完整的 HTML，但没有行，然后在循环中一次插入一个完整的行。

你不能做的是 append `<table>`，然后是一些行，然后`</table>`在最后追加。append 创建了整个 HTML 对象，因此 append 会`<table>`挑战浏览器以生成整个对象或拒绝整个对象。

例如，您可以这样做：

```
function loopArray() { 
  var cookie = $.cookie("testCookie"); 
  var items = cookie ? cookie.split(/,/) : new Array();
  var html = "<table><tr><th>Part #</th><th>Delete</th></tr>";

  for(var i=0;i<items.length;i++){
     html += "<tr><td width='150'>"+items[i]+"</td><td><a href='javascript:;' onclick='remNum("+i+")'><img src='searchAssets/img/delete.png' /></a></td></tr>";
  }
  html += "</table>";
  $('#catalog').html(html);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:22:37.913

你在做什么是错误的。`.append`不能那样工作。您需要在 append 中包含完整的标签，而不是部分内容。

在您的情况下，我建议您将它们作为字符串并将其附加到末尾。见下文，

```
 $('#catalog').empty();
 var tableContent = [];

 tableContent.push("<table><tr><th>Part #</th><th>Delete</th></tr>");

 for(var i=0;i<items.length;i++){
     tableContent.push("<tr><td width='150'>"+items[i]+"</td><td><a href='javascript:;' onclick='remNum("+i+")'><img src='searchAssets/img/delete.png' /></a></td></tr>");
 }

 tableContent.push("</table>");

 $('#catalog').html(tableContent.join('')); //using .html as you had it emptied earlier. 
```

# objective-c - 原生 iOS Facebook SSO 不会返回到应用程序

> ID：10625210
> 
> 赞同：12
> 
> 时间：2012-05-16T19:18:23.947
> 
> 标签：objective-c, ios, xcode, facebook

好的，这看起来像是重复的，但我已经解决了围绕这个问题的所有问题，但我似乎仍然无法让它适用于我的应用程序。

我遵循了 Facebook 开发者网站上的 iOS 教程，并完成了以下操作：

1.  创建了一个 Facebook 应用程序来获取 Facebook 应用程序 ID。
2.  我已将此 A​​pp ID 分配给一个常量，并使用它来初始化我的应用程序中的 Facebook 对象。
3.  我已确保我的应用已标记为多任务处理
4.  我已经在 URL 下拉列表下的 plist 中设置了 fbAPP_ID
5.  我将 AppDelegate 设为 FBSessionDelegate 并实现了非常简单的 fbDidLogin 和 fbDidNotLogin 委托方法。

版本：Lion 上的 XCode 4.3.2、iOS 5.1、Facebook iOS 4.1.1

所有这一切，我似乎仍然无法让 Facebook 在授权时将控制权交还给我的应用程序。它只是留在 Facebook 中。

代码：（注意这里FB_APP_ID改为基本号查看）

AppDelegate.h：

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

#define FB_APP_ID @"1234567890"

@interface AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong) Facebook* facebook;

@end 
```

AppDelegate.m:

```
#import "AppDelegate.h"

@implementation AppDelegate
@synthesize window = _window;
@synthesize facebook = _facebook;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    _facebook = [[Facebook alloc] initWithAppId:FB_APP_ID andDelegate:self];
    if (![_facebook isSessionValid])
    {
        [_facebook authorize:nil];
    }
}

- (BOOL)application:(UIApplication*)application handleOpenURL:(NSURL *)url
{
    return [_facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [_facebook handleOpenURL:url];
}

- (void)fbDidLogin
{
    NSLog(@"App logged in");
}

- (void)fbDidNotLogin:(BOOL)cancelled
{
    NSLog(@"App did not login");
}

@end 
```

相关信息.plist 端口：

![在此处输入图像描述](../Images/e65fc5ab37afe8a7af19af0062f81dc8.png)

Facebook 应用程序屏幕（大部分是粉红色的）：

![Facebook 应用程序屏幕](../Images/dd3facb09f50b82d08e1d499f9b5385a.png)

注意：我只尝试了基本设置，也尝试了 iOS 本机应用程序设置，使用假的 iTunes 商店 ID，但我的配置文件中的捆绑 ID 相同。

无论我做什么，它总是会加载 Facebook 并要求授权我的应用程序，然后它只是关闭身份验证屏幕窗口并坐在我的 Facebook 屏幕上而不是返回到我的应用程序。

另请注意：我知道它总是会询问，因为我没有检查身份验证令牌和到期日期......这是下一步......现在我至少想让它返回到我的应用程序之前我担心那个。

我在这里错过了什么吗？还有什么我可以尝试让 Facebook 返回到我的应用程序的方法吗？

编辑：同样在调试时，我似乎找不到任何一个 openURL 出于某种原因被调用的地方。

编辑#2：在模拟器上运行它时，它通过 Safari 加载 FB 对话框（如预期的那样），然后当我授权时，safari 抛出一个错误，就好像他们试图用来返回我的应用程序的 URL 无效：

![模拟器 Safari 错误](../Images/883340e88043fdcf7a039caf2c94066f.png)

这仍然没有告诉我太多，因为据我在 Info.plist 中所知，我的 fb1234567890 已正确设置。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T22:54:22.320

您的 info.plist 似乎格式不正确

确保 url 方案嵌套在名为“URL 方案”的项目（确切地说是一个数组）下

该数组应包含所有可以启动您的应用程序的可能 URL 方案

有关 URL 方案的更好解释，请参见附图

[![网址方案](../Images/01a7a2daa6a5416ee4e9d776f6cad768.png)](https://i.stack.imgur.com/QnBmM.png)

此外，“URL 标识符”应该是您的包标识符：例如。com.mycompany.myapp 这应该与您在配置文件中提供的标识符相匹配

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T12:36:45.157

### 所有你必须按照这些步骤

### 步骤1：

Facebook 开发者方面的东西：

如果您的应用已提交，请填写 iphone/ipad 应用商店 ID，否则将其留空。 ![facebook 开发者账号 app id 设置](../Images/ce1e36c9d24a78e0caa715df52edf371.png)

### 第2步：

接下来在您的 XCode 中：

转到 `Target > Info > URL Types`>单击加号图标并添加这样的项目- ![URL 方案设置](../Images/4a04d0e0d618d9d6fd3e7ccf71f4ae96.png)

在我的应用程序中，有两个选项可以通过 facebook 和 google 登录，所以我创建了两个 URL 类型。您可以看到第二个是 Facebook URL 类型设置。URL Scheme 将是您来自 Facebook 开发者帐户的 facebook 应用程序 ID，并`fb`在开始时。因此，如果您的 facebook 开发者应用程序 id 是，`9876543267575645`那么 URL Scheme 将变为`fb9876543267575645`.

### 第 3 步：

接下来，您必须在 info.plist 中添加一个新密钥。所以保持在同一个屏幕上并`FacebookAppID`像这个屏幕一样添加： ![info.plist 设置](../Images/137981e1b9676a1c6ac8cf2fa1cdcec4.png)

在成功的 facebook oauth 之后，所有这些东西都会让你的应用恢复原状。

### 第4步：

你会在`AppDelegate`课堂上休息。只需将此方法添加到`AppDelegate.m`

```
NSString *retURL = [NSString stringWithFormat:@"%@", url];    
if ([retURL rangeOfString:facebookid].location != NSNotFound)
{
    // if your application is coming back from facebook native app.
    return [_facebook handleOpenURL:url];
}
else
{
    // if your app is coming back from google plus oauth.
    return [GPPURLHandler handleURL:url sourceApplication:sourceApplication annotation:annotation];
} 
```

在这一切期间，必须初始化和合成`facebook`实例`AppDelegate.m`

```
@synthesize facebook = _facebook; 
```

和`didFinishLaunchingWithOptions`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    _facebook = [[Facebook alloc] initWithAppId:facebookid];
    // rest of your code is already here......
} 
```

还有一件事很重要。在我实施这些步骤的过程中，我也做了太多的研究来实现这一点，最后工作的东西就在这里。我在我的两个应用程序中进行了这些设置。

但是，当我创建第三个应用程序时，我从头开始，没有遵循**第 1**步和**第 3**步，瞧……重定向有效！因此，当您在应用程序中进行 Facebook 登录时，我认为不需要 facebook 开发人员帐户**Native iOS App设置。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:37:04.633

我遇到了另一个问题。我编辑了原始 Info.plist 文件并添加了：

```
<key>URL Types</key>
<array>
    <dict>
        <key>URL Schemes</key>
        <array>
             <string>fbxxxxxxxxx</string>
        </array>
    </dict>
</array> 
```

这不起作用，因为键不是“URL Types”、“URL Schemes”和“URL Identifier”，而是“CFBundleURLTypes”、“CFBundleURLSchemes”和“CFBundleURLIdentifier”。Xcode 将在编辑器中将其重命名为“URL Types”、“URL Schemes”和“URL Identifier”。

要确保在 xcode 中选择 Info.plist，请右键单击->显示原始键/值。

![在此处输入图像描述](../Images/c367f43d599c6ea5641ff2cf4c40bb2c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T11:52:51.770

尽管我似乎遇到了完全相同的问题，但上述任何一个或关于 SO 的其他答案都不适合我。

但是，当我启用“深度链接”时，它工作得很好，所以它可能是上述所有内容的组合并且也启用了该选项。

# iphone - UIBarButton item 两种方法/IBAction

> ID：10625217
> 
> 赞同：0
> 
> 时间：2012-05-16T19:18:44.310
> 
> 标签：iphone, objective-c, ios

我有一个底部工具栏按钮，其中包含一个打开一个按钮`UIWebView *webView`

```
- (IBAction)rebateWebView:(id)sender {
       [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
} 
```

现在，在 webView 加载后，我想更改按钮的标题，当再次点击按钮时，我希望 webView 消失，或者实质上是重新加载 firstviewcontroller。

我知道如何更改标题并使其正常工作。我最大的问题是放弃 webView。我只是无法绕过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:20:19.083

`[self.webView removeFromSuperView];`将从超级视图中删除您`webView`，这几乎可以肯定是您的视图控制器的`self.view`.

然后根据您是否仍然需要它，如果您不使用 ARC，您可能希望将`nil`其退出和/或退出。`release`

如果您尝试“重新加载”视图控制器（这与 drop 完全不同，如果您需要这些方法`self.webView`，则可以调用。`[self viewWillDisappear:NO]; [self viewWillAppear:NO];`

**编辑**

`self.webView`如果您将来可能想重新证明这一点，Jim 的建议也是有效的：

`self.webView.hidden = YES`隐藏 `self.webView.hidden = NO`显示

# python - 如何将元组元素作为参数传递给函数？

> ID：10625220
> 
> 赞同：14
> 
> 时间：2012-05-16T19:18:56.360
> 
> 标签：python, list, arguments, tuples

我有一个由元组组成的列表，我想将每个元组的元素作为参数传递给函数：

```
mylist = [(a, b), (c, d), (e, f)]

myfunc(a, b)
myfunc(c, d)
myfunc(e, f) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-16T19:19:39.627

这实际上在 Python 中非常简单，只需遍历列表并使用 splat 运算符 ( `*`) 将元组解包为函数的参数：

```
mylist = [(a, b), (c, d), (e, f)]
for args in mylist:
    myfunc(*args) 
```

例如：

```
>>> numbers = [(1, 2), (3, 4), (5, 6)]
>>> for args in numbers:
...     print(*args)
... 
1 2
3 4
5 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:06:28.297

要明确@DSM 的评论：

```
>>> from itertools import starmap
>>> list(starmap(print, ((1,2), (3,4), (5,6)))) 
# 'list' is used here to force the generator to run out.
# You could instead just iterate like `for _ in starmap(...): pass`, etc.
1 2
3 4
5 6
[None, None, None] # the actual created list;
# `print` returns `None` after printing. 
```

# c# - 如何知道参数“whatif”是否已以编程方式传递给客户 cmdlet？

> ID：10625222
> 
> 赞同：0
> 
> 时间：2012-05-16T19:19:17.830
> 
> 标签：c#, .net, powershell, powershell-2.0, cmdlets

我想知道 whatif 参数是否已传递给 cmdlet。

例如：remove-mycmdlet -whatif

我试图通过查找变量的值来做到这一点：**WhatIfPreference**。

但它总是产生错误。

你能告诉我如何知道whatif参数是否传入？

非常感谢，

问候， 纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:31:37.093

当我这样定义函数时：

```
function Test-WhatIf {
[CmdletBinding(SupportsShouldProcess = $true)]
param (
)

    $WhatIfPreference
    $PSBoundParameters.ContainsKey('WhatIf')
} 
```

我得到 $false 或 $true，这取决于在命令中添加 -WhatIf。虽然这只是高级功能，但我不希望在编译命令中有不同的行为......你确定你已经正确实现了 SupportsShouldProcess 吗？

# javascript - 如何访问用户选择的网址的 DOM

> ID：10625224
> 
> 赞同：0
> 
> 时间：2012-05-16T19:19:19.587
> 
> 标签：javascript

我需要直接从我的页面执行小书签的操作。

我需要在给定该 url 的情况下提取网页的 document.title 属性。

因此，假设用户输入 www.google.com，我希望能够以某种方式在 iframe 中提取 google.com，而不是访问 document.title 属性。

我知道书签（从书签栏运行的 javacript）可以访问用户所在的任何站点的 document.title 属性，然后将该信息 ajax 到服务器。

这基本上是我想要做的，但直接从我的网页而不使用书签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:23:51.667

根据[这个问题](https://stackoverflow.com/questions/4348912/get-title-of-website-via-link) 你可以使用 PHP 来实现这个，试试这个代码：

```
 <?php

function getTitle($Url){
    $str = file_get_contents($Url);
    if(strlen($str)>0){
        preg_match("/\<title\>(.*)\<\/title\>/",$str,$title);
        return $title[1];
    }
}
//Example:
echo getTitle("http://www.washingtontimes.com/");

?> 
```

但是，我认为可以使用 JS 读取文件内容并执行相同的搜索标签逻辑。

尝试在[这里搜索](https://stackoverflow.com/questions/750032/reading-file-contents-on-the-client-side-in-javascript-in-various-browsers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:23:01.293

不幸的是，这并不容易。出于安全原因，不允许 JavaScript 访问不在同一域中的框架或窗口的文档对象。这类事情必须通过对后端 PHP 脚本的请求来完成，该脚本可以获取请求的页面、通过 DOM 并检索`<title>`标签中的文本。如果您没有这种能力，那么您所要求的将更加困难。

这是基本的 PHP 脚本，它将获取页面并使用 PHP 的 DOM 扩展来解析页面的标题：

```
<?php
$html = file_get_contents($_GET["url"]);

$dom = new DOMDocument;
$dom->loadXML($html);
$titles = $dom->getElementsByTagName('title');

foreach ($titles as $title) {
    echo $title->nodeValue;
}
?> 
```

**演示：** [http ://www.dstrout.net/pub/title.htm](http://www.dstrout.net/pub/title.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:24:42.293

您可以编写一个服务器端脚本，为您检索页面（即使用 curl）并解析 dom 并将所需的属性作为 json 返回。然后用ajax调用它。

# coldfusion - 调试照片上传器/ CfCatch

> ID：10625228
> 
> 赞同：0
> 
> 时间：2012-05-16T19:19:30.680
> 
> 标签：coldfusion, upload, photos

我正在处理的网站上的照片上传功能似乎有问题。

```
<cftry>

                <cffile
                    action="upload"
                    destination="#physicalPath#\PHOTOS"
                    filefield="photo"
                    nameconflict="makeunique"                       
                    accept="image/jpeg, image/pjpeg" 
                    result="mypicture"
                />                                                    

     <cfset OutcomeID = "#FORM.OutcomeID#"/> 
              <!---Inserts file name and outcome id into Uploads table in the database --->
  <cfinvoke component="#classpath#.cf_classes.dao.uploads" method="insertPhoto" returnvariable="success">
    <cfinvokeargument name="fileName" value="#mypicture.SERVERFILE#"/>
    <cfinvokeargument name="OutcomeID" value="#OutcomeID#"/>
    </cfinvoke>

      <cfset photoError = "Photo uploaded successfully"/>
<cfcatch type="any">
      <cfset photoError = "There was an error uploading your photo.<br/> Please make sure it is a JPEG format."/>
   </cfcatch>
</cftry> 
```

无论如何，我只是不断返回 cfCatch 中定义的错误消息。有什么好的方法可以解决这样的问题？有什么问题对任何人都很突出吗？

感谢您的帮助，我对 CF 还是比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:54:04.837

您只需在其中设置一个字符串即可掩盖您的 cfcatch 捕获的异常。如果您不想删除异常处理程序，那么在您仍在处理代码时查看潜在错误的一种快速简便的方法是添加：

```
<cfcatch><cfdump var="#cfcatch#"></cfcatch> 
```

您可能需要添加一个`abort="true"`以`cfcatch`停止处理进一步的代码，这可能会掩盖您的异常转储或导致它不出现。

放入`cfcatch.message`用户看到的字符串不是好的做法，因为这可能会导致信息泄露，这可能是安全风险（例如，如果消息包含服务器上的文件路径或类似文件）

从长远来看，如果您使用的是 Coldfusion Builder，那么您还可以使用内置的[Coldfusion 调试器](http://help.adobe.com/en_US/ColdFusionBuilder/Using/WS0ef8c004658c1089-2cf13501121af8ece2c-7ff1.html)来单步执行您的代码，并查看此时在您的变量状态下失败的地方。

# .net - 如何在 DesignTime 中使用 .NET XMLSerializer 反序列化

> ID：10625229
> 
> 赞同：1
> 
> 时间：2012-05-16T19:19:33.187
> 
> 标签：.net, xml-serialization, design-time

我的项目中有一些配置文件，可以在运行时使用带有列表框和属性网格的用户控件进行更改。使用这种方法，每次手动将配置文件更改到项目文件夹中时，我都必须从 \bin\debug\ 文件夹中复制配置文件。

现在我想在设计时更改这些文件的内容。所以我开始写我自己的设计师。第一次打开设计器时，一切正常，但是当项目重建时，它不再工作了。当反序列化对象被强制转换时会发生 InvalidCastException，这似乎是[http://social.msdn.microsoft.com/Forums/pl-PL/csharpgeneral/thread/7192f23e-7d43-47b5-b401-5fcd19671cf6](http://social.msdn.microsoft.com/Forums/pl-PL/csharpgeneral/thread/7192f23e-7d43-47b5-b401-5fcd19671cf6)中描述的问题类型相同，但它们不在同一个程序集中。

这是将 UserControl1 添加到窗体时出现相同问题的示例：

```
public class SerializerTest
{
    public String Name { get; set; }
}

[Designer(typeof(MyDesigner))]
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public String Content 
    {
        get { return this.textBox1.Text; }
        set { textBox1.Text = value; }
    }
}

class MyDesigner : ControlDesigner
{ 
    public override void Initialize(IComponent component)
    {
        base.Initialize(component);
        try
        {
            string fName = @"D:\XMLSerializerTest\WindowsFormsApplication1\WindowsFormsApplication1\test.xml";
            XmlSerializer xmlSer = new XmlSerializer(typeof(SerializerTest));
            FileStream fs = new FileStream(fName, FileMode.Open);
            SerializerTest test = (SerializerTest)xmlSer.Deserialize(fs);
            ((UserControl1)this.Control).Content = (test != null) ? test.ToString() + " \n" + test.Name : "NULL";
        }
        catch (Exception ex) { ((UserControl1)this.Control).Content = ex.Message; }
    }
} 
```

似乎序列化程序在重建后仍然被缓存和使用。所以我已经尝试了一个更复杂的构造函数，不应该使用缓存，但行为没有改变。

有谁知道如何避免invalidcastexception？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:49:27.947

尝试预生成 XML 序列化程序集：http: [//msdn.microsoft.com/en-us/library/bk3w6240%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/bk3w6240%28v=VS.100%29.aspx)

# c# - 我的 DataGridView 上只显示最后一行

> ID：10625233
> 
> 赞同：0
> 
> 时间：2012-05-16T19:19:45.273
> 
> 标签：c#, winforms, datagridview

以下代码是我每次想向 tableDocTypes DataGridView 添加行时调用的方法。调试显示 RowCount 正确递增并且传递的所有数据都是正确的，但是一旦表单显示它只显示最后一行。此外，显示的最后一行位于应该是空白的行中，因此我无法添加任何新行，因为星号旁边没有空白单元格。我的猜测是我不应该使用 tableDocTypes.RowCount - 1 作为索引，但它似乎正在正确递增，我找不到其他可以使用的东西。任何信息都有帮助。

```
private void addRowToDocTypeTable(bool docTypeValid, string formName, string formCabinet, string docType)
{
    tableDocTypes.Rows.Add();

    if (!docTypeValid)
    {
        // Change color to yellow and display IndexWarning icons
        tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnDocTypeImage.Index].Value = Properties.Resources.IndexWarning;
        tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnDocType.Index].Style.BackColor = Color.LightGoldenrodYellow;
    }
    else
    {
        // Index is good so display IndexCorrect and leave line white
        tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnDocTypeImage.Index].Value = Properties.Resources.IndexCorrect;
    }

    tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnFormName.Index].Value = formName;
    tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnFormCabinet.Index].Value = formCabinet;
    tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnDocType.Index].Value = docType;

    // Assign the rename menue to only the image column
    tableDocTypes.Rows[tableDocTypes.RowCount - 1].Cells[columnDocTypeImage.Index].ContextMenuStrip = menuDocTypeEdit;
} 
```

# sql-server - 什么会导致 SqlClient 重用无效连接？

> ID：10625234
> 
> 赞同：5
> 
> 时间：2012-05-16T19:19:48.400
> 
> 标签：sql-server, ado.net, sqlclient

我们有一个托管在 IIS 中的 WCF 服务，在服务器上运行。该服务连接到在另一台服务器上运行的 SQL Server 实例。在我们的代码中，我们为每个请求打开和关闭连接。WCF 服务每分钟向数据库发出多个请求。

如果我在不停止 WCF 服务的情况下重新启动 SQL 服务，WCF 服务会开始将错误记录到我们的错误日志中，这是完全正常的。

问题是有时（并非总是），在 SQL 服务重新启动后，WCF 服务会继续在每个请求上报告此错误：

```
Cannot open database "mydatabase" requested by the login. The login failed." 
```

错误的堆栈跟踪以：

```
at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.SqlClient.SqlConnection.Open() 
```

发生这种情况时，我可以使用 SQL Management Studio（从运行 WCF 服务的同一台机器）连接到数据库。为了解决这个问题，我必须为我的 WCF 服务回收应用程序池。

所以我的问题是：什么会导致这种情况，我可以做些什么来确保我的应用程序可以从 SQL 重启中恢复？

PS：在我的开发箱（也运行 IIS）上，当我进行相同的测试时，我得到了几次相同的错误（我想是在开始加载数据库时），然后它又开始工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:07:50.180

有时您从池中获得的连接是一个新连接（并且您的连接尝试成功），其他时候连接被重用并且连接尝试失败。并非所有被切断的连接实际上都会被重用，因为池化器可能会或可能不会检测到条件并从池中删除这样的连接。

[从这里](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.100%29.aspx)：

> 如果存在与已消失的服务器的连接，则即使连接池程序没有检测到断开的连接并将其标记为无效，也有可能从池中提取此连接。发生这种情况时，会生成异常。但是，您仍然必须关闭连接才能将其释放回池中。

如果您很少创建连接，因此不会影响性能，最好关闭池化。只需在连接字符串中设置`Pooling`为。`no`

# java - Android中的HashMap反序列化问题

> ID：10625238
> 
> 赞同：4
> 
> 时间：2012-05-16T19:20:03.603
> 
> 标签：java, android, serialization, hashmap

我正在使用以下代码在我的 PC 应用程序上序列化 HashMap：

```
private void serialize(HashMap<Integer, Integer> map2write, String name_ser)
{// serializes fphlist into .ser file called name_ser
    FileOutputStream fileOut = null;
    try {
        fileOut = new FileOutputStream(project_dir + "/" + name_ser + ".ser");
    } catch (FileNotFoundException ex) {
        Logger.getLogger(AdminConsoleUI.class.getName()).log(Level.SEVERE, null, ex);
    }
    ObjectOutputStream out;
    try {
        out = new ObjectOutputStream(fileOut);
        out.writeObject(map2write);
        out.reset();
        out.flush();
        out.close();
        fileOut.close();

    } catch (IOException ex) {
        Logger.getLogger(AdminConsoleUI.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

然后我在我的 Android 应用程序中使用以下代码对其进行反序列化：

```
private HashMap<Integer,Integer> deserialize_Map(String fn)
{// deserializes fn into HashMap

    HashMap<Integer,Integer> hm = new HashMap<Integer,Integer>();
    try
    {
        FileInputStream fileIn = new FileInputStream(project_dir + "/" + fn + ".ser");
        ObjectInputStream in = new ObjectInputStream(fileIn);
        hm = (HashMap<Integer,Integer>) in.readObject();
        in.close();
        fileIn.close();

   }catch(IOException i)
   {
       Log.e("MYAPP", "exception", i);
       return null;
   }catch(ClassNotFoundException c)
   {
       Log.e("MYAPP", "exception", c);
       return null;
   }catch(ClassCastException ex)
   {
       Log.e("MYAPP", "exception", ex);
       return null;
   }

    return hm;
} 
```

最后，我面临两个问题。

1）反序列化需要很长时间。它包含大约数千个键，这是否正常？有没有更有效的序列化方法来解决这个问题？

2) 反序列化后，我得到一个哈希图，其占用的大小几乎是它在 VM 上最初占用的大小的两倍，当我在调试器中检查它时，它最初应该包含的键值之间有很多空条目。但是，它们不是空键，而只是空键，我无法查看其中的内容。我在 Eclipse 中调试。为什么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:26:33.910

1) VM 大小中“正常”HashMap 的大小是多少？我不认为这是解决该问题的另一种解决方案（如果有请有人告诉我们）。您可以尝试共享一个 sqlite 或其他东西。如果您想合作解决您要解决的问题，我们可以提出使工作更快的技术

**更新**

您可以尝试按照您的建议在初始化时初始化您的地图，如果您知道大小，则使用大容量 `HashMap<Integer,Integer> hm = new HashMap<Integer,Integer>(SIZE*2);`

2\. 从[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子与当前容量的乘积时，通过调用rehash方法，容量大致翻倍

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:27:17.203

您是否尝试过将 HashMap 序列化为 JSON 对象？Android 对从文件中反序列化 JSON 有很好的支持。

# html - IE9/IE7 选择标签行为不同

> ID：10625240
> 
> 赞同：2
> 
> 时间：2012-05-16T19:20:19.837
> 
> 标签：html, internet-explorer, internet-explorer-7, internet-explorer-9

```
<select size="4" name="lbxEmployees" id="lbxEmployees" disabled="disabled" class="FormDropDown" style="width:100%;">
        <option value="1">jim jubak</option>
        <option value="2">Peyton Andrew</option>
        <option selected="selected" value="3">Pat smith</option>
        <option value="4">Mark Smith</option>
        <option value="5">Kobe Bryan</option>
</select> 
```

上面的代码在 IE9 和 IE7 上呈现不同。有人可以解释为什么吗？选择框在两种浏览器中都被禁用，但一个显示所选值（IE7），而另一个不显示（IE9）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:42:28.280

这仅仅是因为 IE9 是一个不同的浏览器。IE7 于 2006 年发布，而 IE9 于 2011 年发布。没有必要在未启用的内容中显示默认设置，因此他们已将其禁用。

编辑：如果你想因为安全而禁用它，你应该在服务器端强制执行。如果黑客复制了您的源代码，并删除了“禁用”部分，他们将能够更改并包含该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:41:45.693

有趣的是，从启用的复选框开始，我尝试将其作为欺骗 IE9 的一种方法......

```
<script type="text/javascript">

 document.getElementById("lbxEmployees").value = 3;

 document.getElementById("lbxEmployees").disabled=true;

</script> 
```

没用。在IE7中做过

（如果您的目标是向用户展示选定的值并且必须具有选择框）看起来我们可能需要做类似...

```
 <div id="EmployeesDiv">

    Employee:

    <select name="lbxEmployees" id="lbxEmployees">
      <option value="1">jim jubak</option>
      <option value="2">Peyton Andrew</option>
      <option selected="selected" value="3">Pat smith</option>
      <option value="4">Mark Smith</option>
      <option value="5">Kobe Bryan</option>
    </select>

  </div>

<script type="text/javascript">

 window.onload = function() {
 var selectBox = document.getElementById("lbxEmployees");
 var val = (selectBox.options[selectBox.selectedIndex].text;

/* remove select box and replace */
document.getElementById("EmployeesDiv").innerHTML ="Employee: "+val;
}
</script> 
```

当然，您的应用程序可能有一个更简单的方法，IE9 的事情让我思考......

*如果禁用的原因是安全性，那就不好了，如果是这样，请在打印页面之前在服务器端执行所有这些操作！

# linq-to-xml - 如何将以下代码从 C# 转换为 VB.net（linq 到 xml）

> ID：10625248
> 
> 赞同：0
> 
> 时间：2012-05-16T19:20:37.560
> 
> 标签：linq-to-xml

我是新的 VB.net，希望得到一些帮助。如何将以下代码从 C# 转换为 VB.NET

```
 protected override Func<XElement, Person> Selector     
    {         
        get         
        {             
            return x => new Person() 
            {                 
                Id = x.Attribute("Id").GetGuid(),                 
                    FirstName = x.Attribute("FirstName").Value,                 
                    LastName = x.Attribute("LastName").Value,                 
                        Dias = x.Attribute("Dias").GetByte()               

            };         
        }     
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:16:49.093

我发现这个免费工具可以很好地将 C# 转换为 Vb.net：

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

结果：

```
Protected Overrides ReadOnly Property Selector() As Func(Of XElement, Person)
    Get

        Return Function(x) New Person() With { _
            Key .Id = x.Attribute("Id").GetGuid(), _
            Key .FirstName = x.Attribute("FirstName").Value, _
            Key .LastName = x.Attribute("LastName").Value, _
            Key .Dias = x.Attribute("Dias").GetByte() _
        }
    End Get
End Property 
```

# java - 如何使用 Java 获取所有可用的西班牙语语言环境？

> ID：10625249
> 
> 赞同：0
> 
> 时间：2012-05-16T19:20:46.073
> 
> 标签：java, locale

我确实知道如何使用 Java 中的 SimpleDateFormat 类的 getAvailableLocales() 方法获取所有可用英语语言环境的列表。但我想用西班牙语写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:33:06.203

我不确定，但您似乎想获得西班牙语的所有语言环境。它可以做成：

```
 Locale.setDefault(new Locale("ES"));
    Locale[] locales = SimpleDateFormat.getAvailableLocales();
    for(Locale l : locales) {
        System.out.println(l.getDisplayName());
    } 
```

首先，您必须将默认语言环境设置为西班牙语并获取所有语言环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:28:19.417

试试这个：

```
Locale loc = new Locale(language, country); 
```

和

```
Calendar c = Calendar.getInstance(loc); 
```

我希望能帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:42:58.037

是的，根据bontade，如果你想过滤西班牙语国家，你可以添加 l.getLanguage().equals("es") 条件来做到这一点

# ios - 如何在 armv7 应用程序中使用 armv6 第三方库？

> ID：10625253
> 
> 赞同：0
> 
> 时间：2012-05-16T19:21:14.537
> 
> 标签：ios, libraries, armv7, armv6

我有两个 3rd 方库。一个只有 armv6 的构建，另一个只有 armv7 的构建。我需要在我的 iOS 企业应用程序中同时使用它们。我已经要求 armv6 库供应商提供 armv7 版本，但他们无法提供。（注意：我已经得到了答案并将提供它。其他人在评论中提出了这个问题并且没有足够的空间来回答，所以我创建了自己的问题，并将提供我的答案。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:39:03.977

答案是破解 armv6 库，使其认为它是 armv7 库。这将使您运行，直到供应商提供库。之所以可行，是因为 arm 规范要求所有 arm 架构都能够运行由以前的架构生成的代码。因此，如果 armv6 库告诉链接器它是 armv7，处理器应该仍然能够运行代码。当然，你不能走另一条路。在这两个库上使用 otool -h 来查看 cputype 和 cpusubtype。在我的库中，两种 cputype 为 12，子类型为 6 和 9，表示 armv6 和 armv7。使用十六进制编辑器，查找十六进制字符串 0xcefaedfe，它是标记 MH_MAGIC (0xfeedface) 由于大/小端而反转。

之后，整个单词只有 0xC。那是cputype的12。接下来是 0x6 的单词。在所有情况下将其更改为 0x9。现在 ld 会认为你的库是 armv7，并采取相应的行动。

您可能还没有完成，因为 armv6 可能已经链接到一些拇指库例程中。如果你得到链接错误（我有一些关于 switch8 和 switch16），你需要找到包含它们的达尔文代码。在网上查找文件[lib1funcs.asm](http://opensource.apple.com/source/gcc/gcc-5664/gcc/config/arm/lib1funcs.asm)。这可能会有你缺少的功能。它们可能是有条件的，所以调整#ifdefs 并确保它们正在被编译。这个文件试图在最后打开一些包含，但由于它们在最后，它们不会影响任何东西，所以只需将它们注释掉。

是的，这是一个巨大的 hack，但它可以让你启动并运行。如果您获得了修改后的库，您只需将其放入。无需更改代码。如果它对您有用，那么您仍在使用 Apple 的代码，并且如果您仅使用 armv6，它将与您运行的代码相同。

# c# - 为什么要创建一个 Try 方法 + out vs 检查一些默认值（即 NULL）

> ID：10625254
> 
> 赞同：0
> 
> 时间：2012-05-16T19:21:18.907
> 
> 标签：c#, return-type, out

以下是 C#，尽管代码模式可能与任何 OO 语言相关。

我有两种方法，MethodWithTry 和 MethodWithSomeReturnValue，我认为它们在功能上是等效的。我想知道其中一个是否是“正确”的方式。是否有一些东西（例如并发）使它们中的一个成为一个糟糕的选择。

```
 public void MethodWithTry()
    {
        int returnValue;
        string someInput;

        if (TryGetValueThisWay(someInput, returnValue))
        {
            //do something this way
        }
        else
        {
            if (TryGetValueThatWay(someInput, returnValue))
            {
                //do something that way
            }
            else
            {
                //do something a default way
            }
        }
    }

    public void MethodWithSomeReturnValue()
    {
        int? returnValue;
        string someInput;

        returnValue = GetValueThisWay(someInput);
        if (returnValue != null)
        {
            //do something this way
        }
        else
        {
            returnValue = GetValueThatWay(someInput);
            if (returnValue != null)
            {
                //do something that way
            }
            else
            {
                //do something a default way
            }
        }
    } 
```

被调用方法的签名是

```
 public int? GetValueThisWay(string input)
    public int? GetValueThatWay(string input)
    private bool TryGetValueThisWay(string input, out int value)
    private bool TryGetValueThatWay(string input, out int value) 
```

**编辑——附加信息**

被调用的方法是在集合中进行查找。所以可能有不同的名字

```
public int? GetValueFromCollectionA()
public int? GetValueFromCollectionB() 
```

恕我直言，TrySomeMethodName - 使代码更具可读性。但是，使用 OUT 变量，尤其是当返回值为整数时，意味着它始终是可变的并且至少分配了两次（默认设置为 0）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:35:47.193

根据今天编写此方法的返回类型 - 假设*操作可能会失败*，这是整个工作流程的一部分 - 我将返回一个可为空的结构或`null`引用值而不是`Tryxxx`方法 - 必须使用`out`值在我的意见。

```
 public int? MethodWithSomeReturnValue()
 {
    //return null in failure case
 }

 int? result = MethodWithSomeReturnValue();
 if(result != null)
 {
   //...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:36:35.337

嗯，这取决于。也许这将是您从愿意回答您的每个人那里得到的答案*。*有时你知道或者你可以假设一个值总是来自某种类型，你可以使用 GetValue 或 ConvertToInt32（例如），例如从具有定义类型的数据库中获取值。但是其他时候您不能信任输入并且您不确定它是哪种类型，例如用户输入......在这种情况下，您可能更喜欢使用 TryGetValue 或 TryParse（例如）。所以最终取决于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:07:42.453

如果您对值类型（如`int`）进行操作并且您的方法的结果可以是`null`，您应该选择`Try`版本。这是因为值类型不能很好地与`null`. 例如`int?`，比`int`由于引入的拳击慢得多`?`。所有 .NET`TryParse`方法都使用值类型，它们都遵循这种模式。我认为遵循这种方法很好。

当您开始对引用类型进行操作时，使用方法结果并`null`在需要时返回变得更加自然。

# php - Wordpress is_user_logged_in 限制

> ID：10625257
> 
> 赞同：1
> 
> 时间：2012-05-16T19:21:39.263
> 
> 标签：php, wordpress

我试图让 Wordpress 之外的页面使用 is_user_logged_in 函数来确定他们是否可以查看某些数据。我肯定已登录，并且 Wordpress 文件的路径是正确的。任何人有任何想法为什么我看不到数据？

```
 <?php
    error_reporting(E_ALL);

    include('../blog/wp-load.php');
    include('../blog/wp-blog-header.php');

    if(is_user_logged_in()) {
            //Do Something
    } else {
            echo 'Not logged in';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-03T07:46:28.053

我使用 require 而不是 include ，您的代码现在很完美。

```
<?php
error_reporting(E_ALL);

require(dirname(__FILE__) . '/wp-load.php' );
// include('/wp-blog-header.php');

if(is_user_logged_in()) {
        //Do Something
    echo "LoggedIN";
} else {
        echo 'Not logged in';
}
?> 
```

# jenkins - 如何在 Jenkins 中设置环境变量？

> ID：10625259
> 
> 赞同：257
> 
> 时间：2012-05-16T19:21:48.640
> 
> 标签：jenkins, continuous-integration, environment-variables

我希望能够做类似的事情：

```
AOEU=$(echo aoeu) 
```

并让詹金斯设置`AOEU=aoeu`。

Jenkins 中的*环境变量*部分没有这样做。相反，它设置`AOEU='$(echo aoeu)'`.

如何让 Jenkins 评估 shell 命令并将输出分配给环境变量？

最终，我希望能够将作业的执行程序分配给可以传递给其他脚本或由其他脚本使用的环境变量。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-05-16T20:28:09.473

这可以通过[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)以下列方式完成：

1.  创建一个运行的“执行 shell”构建步骤：

    ```
    echo AOEU=$(echo aoeu) > propsfile 
    ```

2.  创建一个*注入环境变量*构建步骤并将“属性文件路径”设置为`propsfile`.

**注意**：这个插件（大部分）与 Pipeline 插件不兼容。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2015-06-18T23:07:14.390

### 最简单的方法

您可以使用[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)在构建启动时注入环境变量。例如：

![在 'Build Environment'->'Inject environment variables to the build process' -> 'Properties Content' 下添加 key=value (bash OK!)](../Images/b6daa63a501069767e99866f84198036.png)

### 你怎么知道它在工作

![EnvInject - 变量注入成功](../Images/0702407e655a19a0e0db9553d081fbb5.png)

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2016-08-17T18:52:34.887

就我而言，我需要`JMETER_HOME`在我的 Jenkins 服务器 (Linux) 上的所有项目中通过我的 Ant 构建脚本添加环境变量，这样不会干扰`build.xml`脚本中的本地构建环境（Windows 和 Mac） . **通过Manage Jenkins - Configure System - Global properties**设置环境变量是完成此操作的最简单且侵入性最小的方法。不需要插件。

[![管理 Jenkins 全局属性](../Images/86f0762af551835a42463debae8a928b.png)](https://i.stack.imgur.com/bhDYC.png)

* * *

然后通过以下方式在 Ant 中提供环境变量：

```
<property environment="env" />
<property name="jmeter.home" value="${env.JMETER_HOME}" /> 
```

这可以通过添加来验证是否有效：

```
<echo message="JMeter Home: ${jmeter.home}"/> 
```

产生：

> JMeter 主页：~/.jmeter

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-02-21T13:04:54.587

在我的情况下，我使用以下选项配置环境变量并且它有效 -

```
Manage Jenkins -> Configure System -> Global Properties -> Environment Variables -> Add 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2017-07-24T20:37:38.030

你可以试试这样的

```
stages {
        stage('Build') {
            environment { 
                    AOEU= sh (returnStdout: true, script: 'echo aoeu').trim()
                }
            steps {
                sh 'env'
                sh 'echo $AOEU'
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2017-11-21T10:32:03.387

您可以使用[Environment Injector Plugin](https://plugins.jenkins.io/envinject)在 Jenkins 中在作业和节点级别设置环境变量。下面我将展示如何在工作级别设置它们。

1.  从 Jenkins Web 界面，转到**`Manage Jenkins > Manage Plugins`**并安装插件。

[![环境注入器插件](../Images/c1e20bfabde8c9a1ed894db21df08063.png)](https://i.stack.imgur.com/9KkFp.png)

2.  转到您的工作**`Configure`**屏幕
3.  **`Add build step`**在部分中查找**`Build`**并选择**`Inject environment variables`**
4.  将所需的环境变量设置为 VARIABLE_NAME=VALUE 模式。就我而言，我更改了 USERPROFILE 变量的值

[![在此处输入图像描述](../Images/f2d65bec859d5fd3bad6a377c27a42a0.png)](https://i.stack.imgur.com/lO6Xg.png)

如果您需要根据某些条件（例如作业参数）定义一个新的环境变量，那么您可以参考这个[答案](https://stackoverflow.com/a/47511305/1808829)。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-05-14T06:59:52.707

[EnvInject Plugin](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin) aka ( *Environment Injector Plugin* ) 为您提供了几个选项来从 Jenkins 配置中设置环境变量。

通过选择`Inject environment variables to the build process`，您将获得：

*   `Properties File Path`
*   `Properties Content`
*   `Script File Path`

*   `Script Content`

*   最后`Evaluated Groovy script`。

* * *

`Evaluated Groovy script`使您可以**根据执行命令的结果设置环境变量**：

*   用`execute`方法：

```
 return [HOSTNAME_SHELL: 'hostname'.execute().text, 
        DATE_SHELL: 'date'.execute().text,
        ECHO_SHELL: 'echo hello world!'.execute().text
    ] 
```

*   或使用显式`Groovy`代码：

```
 return [HOSTNAME_GROOVY: java.net.InetAddress.getLocalHost().getHostName(),
        DATE_GROOVY: new Date()
    ] 
```

（关于每种方法的更多细节可以在内置帮助（？）中找到）

* * *

不幸的是，你不能`Script Content`像它所说的那样做同样的事情：

> 执行旨在设置环境的脚本文件，例如创建文件夹、复制文件等。给出脚本文件内容。您可以使用上述属性变量。 **但是，在脚本中添加或覆盖环境变量不会对构建作业产生任何影响**。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2016-07-09T21:09:36.603

[Build Env Propagator Plugin](https://plugins.jenkins.io/build-env-propagator/)可让您添加新的构建环境变量，例如

[![Jenkins Build - 传播构建环境变量](../Images/a459511e3c75bddebfad605815beff2e.png)](https://i.stack.imgur.com/nNVDM.png)

> 任何后续的传播构建环境变量步骤都将覆盖先前定义的环境变量值。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-05-31T15:49:08.210

> 这是存储环境变量并访问它的片段。

```
node {
   withEnv(["ENABLE_TESTS=true", "DISABLE_SQL=false"]) {
      stage('Select Jenkinsfile') {
          echo "Enable test?: ${env.DEVOPS_SKIP_TESTS}
          customStep script: this
      }
   }
} 
```

注意：环境变量的值以字符串的形式出现。如果要将其用作布尔值，则必须使用 Boolean.parse(env.DISABLE_SQL) 对其进行解析。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-07-09T22:07:09.383

通常，您可以在*配置系统*的*全局属性中配置**环境变量*。

 **但是对于带有 shell 替换的动态变量，您可能希望在 Jenkins HOME 目录中创建一个脚本文件并在构建期间执行它。需要 SSH 访问权限。例如。

1.  以 Jenkins 身份登录：`sudo su - jenkins`或`sudo su - jenkins -s /bin/bash`
2.  创建一个shell脚本，例如：

    ```
    echo 'export VM_NAME="$JOB_NAME"' > ~/load_env.sh
    echo "export AOEU=$(echo aoeu)" >> ~/load_env.sh
    chmod 750 ~/load_env.sh 
    ```

3.  在 Jenkins Build ( *Execute shell* ) 中，先调用脚本及其变量，例如

    ```
    source ~/load_env.sh 
    ```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-02-08T01:18:57.503

尝试与[EnvInject](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)非常相似的[Environment Script Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Environment+Script+Plugin) ( [GitHub](https://github.com/jenkinsci/environment-script-plugin) ) 。它允许您在构建之前（在 SCM 检出之后）运行脚本，为其生成环境变量。例如

[![Jenkins Build - 常规工作 - 构建环境](../Images/daef39ab9c877239f63ce2bfe3e8508c.png)](https://i.stack.imgur.com/8t38I.png)

并且在您的脚本中，您可以将例如打印`FOO=bar`到标准输出以设置该变量。

附加到现有`PATH`-style 变量的示例：

```
echo PATH+unique_identifier=/usr/local/bin 
```

因此，您可以自由地在脚本中做任何您需要的事情 - 无论`cat`是文件，还是从项目的源代码树中以其他语言运行脚本等。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-10-19T12:30:26.690

扩展@JSixface 的答案：

**要全局**定义环境变量以从*声明性管道*的所有阶段访问，您可以在块中添加该`environment`部分`pipeline`。

```
pipeline {                                                                                               
  agent {                                                                                                
    node {                                                                                               
      label 'myAgent'                                                                                   
    }                                                                                                    
  }                                                                                                      
  environment {
    AOEU = "${sh(returnStdout: true, script: 'echo aoeu').trim()}"                
  }                                                                                                      
  stages {
    ...
  }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-05-09T02:22:54.823

由于某种原因`sudo su - jenkins`没有将我登录到`jenkins` [用户](https://stackoverflow.com/a/38286755/432903)，我最终使用了不同的方法。

我使用 jenkins `config.xml`at `/var/lib/jenkins/config.xml`（安装在 Linux/RHEL 中）成功设置了全局环境变量 - 没有使用外部插件。

我只需要停止 jenkins add 然后 add `globalNodeProperties`，然后重新启动。

例如，我正在定义变量`APPLICATION_ENVIRONMENT`并`SPRING_PROFILES_ACTIVE`在`continious_integration`下面定义，

```
<?xml version='1.0' encoding='UTF-8'?>
<hudson>

  <globalNodeProperties>
    <hudson.slaves.EnvironmentVariablesNodeProperty>
      <envVars serialization="custom">
        <unserializable-parents/>
        <tree-map>
          <default>
            <comparator class="hudson.util.CaseInsensitiveComparator"/>
          </default>
          <int>2</int>
          <string>APPLICATION_ENVIRONMENT</string>
          <string>continious_integration</string>
          <string>SPRING_PROFILES_ACTIVE</string>
          <string>continious_integration</string>
        </tree-map>
      </envVars>
    </hudson.slaves.EnvironmentVariablesNodeProperty>
  </globalNodeProperties>
</hudson> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-08T09:28:31.310

您可以使用下列任一方式：

1.  使用[Env Inject Plugin](https://wiki.jenkins.io/display/JENKINS/EnvInject+Plugin)创建环境变量。按照这里的用法和更多详细信息[https://github.com/jenkinsci/envinject-plugin](https://github.com/jenkinsci/envinject-plugin)
    2.  在下方导航并可以添加

管理 Jenkins -> 配置系统 -> 全局属性 -> 环境变量 -> 添加

[![在此处输入图像描述](../Images/8aed853fd06a355f18e128c044466702.png)](https://i.stack.imgur.com/SEOla.png)

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2018-12-07T18:50:10.053

我们使用 groovy 作业文件：

```
description('')
steps {
    environmentVariables {
        envs(PUPPETEER_SKIP_CHROMIUM_DOWNLOAD: true)
    }
} 
```**

# php - HTML 表单 POST 未传输到 php $_POST

> ID：10625261
> 
> 赞同：0
> 
> 时间：2012-05-16T19:22:04.757
> 
> 标签：php, html, forms, post

这是我的表单声明

```
 <form enctype="text/plain" method="post" action="PI_Application_Submission.php"> 
```

这是我的输入：

```
 <tr><td>Requested User Name<font color="red">*</font></td> <td><input type="text" name="user_name" size="35"></td></tr> 
```

这是我的php行...

```
 echo $_POST['user_name']; 
```

我知道如何检查 isset 函数，这不仅仅是一个警告。由于某种原因， user_name 的值没有被传递。我究竟做错了什么？

我的错误信息如下：

```
 Notice: Undefined index: use in /var/www/html/PI_Application_Submission.php on line 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:24:59.867

Try to removing `enctype` form attribute. Basically PHP does not parse POST when your enctype different from `application/x-www-form-urlencoded` or `multipart/form-data`.

You can access to raw post data with `file_get_contents('php://input')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:24:32.737

You also need an ID attribute on the input element, also, don't forget to close your html tags

```
<input type="text" name="user_name" id="user_name" size="35" /> 
```

# php - 按钮 URL 在某些浏览器中不起作用

> ID：10625266
> 
> 赞同：0
> 
> 时间：2012-05-16T19:22:29.123
> 
> 标签：php, wordpress, internet-explorer

我正在尝试调用特定的帖子元数据（“购买门票”）以用作可点击按钮。该代码在 Safari 中有效，但在其他浏览器中无效。我正在使用最新版本的 Wordpress。下面是我目前正在使用的一段代码：

```
<td>
<input type="button" value="Buy tickets"
onclick="window.open('<?php echo get_post_meta(get_the_ID(), 'Buy tickets', true); ?>')">
</td> 
```

我也尝试过使用以下脚本，但这会使按钮无法点击：

```
<td>
<button id="<?php $postId = get_the_ID(); echo $postId ?>" style="float:right">
<p>Buy tickets</p>
</button>
</td>

<script>
$(document).ready(function() {
// Handler for .ready() called.

$("#<?php $postId = get_the_ID(); echo $postId ?>").click(function(){
         window.location="<?php echo get_post_meta(get_the_ID(), 'Buy tickets', true); ?>"
         return false;
    });

    });
</script> 
```

任何建议将不胜感激！要查看第一段代码，请单击[此处](http://www.thelaughingpod.com/events/upcoming/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:26:09.540

```
<form onsubmit="return false;">
<table class="tickets">
<tr>
    <td><button data-goto="<?php echo get_post_meta(get_the_ID(), 'Buy tickets', true); ? >">Buy tickets</button></td>
</tr>
</table>
</form>

<script>
jQuery(document).ready(function($) {
$("table.tickets button").click(function(event) {
    window.location.href = $(this).attr("data-goto");
});
});
</script> 
```

# ruby - 安装为 Ruby gem 实现的系统服务的方法

> ID：10625267
> 
> 赞同：3
> 
> 时间：2012-05-16T19:22:31.030
> 
> 标签：ruby, linux, installation, daemon, rhel

在远离 Ruby 多年之后，我又全力以赴，刚刚完成了我的第一个 gem，其中包括一个可执行文件。一切都像魅力一样。

然而，我面临的问题是我还有一个启动脚本（不是 gem istelf 的一部分），它可以守护可执行文件。此外，我还希望启动脚本将可执行文件指向配置中的 /var/ 等位置

据我所知，rubygems、gemspec 等无法在安装期间指定文件被吹到系统的其他部分（例如，启动脚本到 /etc/init.d，配置到 /var/ ）。如果你能做到这一点，那肯定是没有意义的。

所以......我的问题是......自动化安装这样的东西的正确程序是什么。我正在使用 RHEL，并且想知道是否是时候让我的脚弄湿我的第一个 RPM。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:49:06.493

你**可以**做到。但是，这可能不是推荐的方法。但是是的，可以使用该`extensions`选项在 gem 安装期间运行任意代码。

来自[RubyGems 手册](http://docs.rubygems.org/read/chapter/20#extensions)：

```
Usage
  spec.extensions << 'ext/rmagic/extconf.rb'

Notes
These files will be run when the gem is installed, causing the 
C (or whatever) code to be compiled on the user’s machine. 
```

只需将您需要的任何 ruby​​ 代码放入`extconf.rb`（或等效的）文件中。

从 RubyGems 指南构建 C 扩展的示例：http:
[//guides.rubygems.org/c-extensions/](http://guides.rubygems.org/c-extensions/)

# c++ - 如何在进程已经访问数据结构时修改它？

> ID：10625274
> 
> 赞同：0
> 
> 时间：2012-05-16T19:22:44.137
> 
> 标签：c++, multithreading, data-structures, multiprocessing

我用 C++ 编写了一个程序（假设 X），它创建了一个数据结构，然后连续使用它。现在我想修改那个数据结构而不中止之前的程序。我尝试了两种方法来完成这项任务：

1.  在同一个程序 X 中，我首先创建了数据结构，然后尝试创建一个子进程，该子进程开始访问并出于某种目的使用该数据结构。父进程继续执行并要求用户进行任何修改，如插入、删除等，并从控制台获取输入，随后完成修改。这里的问题是，它不会修改子进程正在使用的数据结构的副本。后来，我发现这无济于事，因为子进程正在使用自己的数据结构副本，因此通过父进程所做的修改不会反映在其中。但毫无疑问，我不希望这种情况发生。所以我选择了多线程。

2.  我没有创建子进程，而是创建了另一个线程来访问该数据结构并使用它，并尝试在不同线程中从控制台获取用户输入。甚至，由于线程之间的切换非常快，这也不起作用。

所以，请帮我解决这个问题。我希望修改反映在原始数据结构中。此外，我不希望进程（不断访问和使用它）有时等待，因为它的时间至关重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:27:53.247

您实现并发访问的方法类似于在满是蒙眼幼儿的教室之间共享蛋糕。毫不奇怪，您最终会遇到一团糟。每个蹒跚学步的孩子要么必须等待轮到他们挖，要么确切地知道她一个人可以触摸蛋糕的哪一部分。

翻译成代码，前者意味着拥有一个锁或[互斥锁](http://en.wikipedia.org/wiki/Mutual_exclusion)来控制对数据结构的访问，以便在任何时候只有一个线程可以修改它。

后者可以通过拥有一个由线程修改的数据结构来完成，每个线程都确切地知道他们可以更新数据结构的哪些部分，例如通过传递一个结构，其中包含要更新的范围的详细信息，有效地预先拆分数据. 这些不应该重叠并且迭代器不应该无效（例如通过调整大小），这对于给定的问题可能是不可能的。

处理资源竞争的算法有很多，所以这里被大大简化了。[分布式计算](http://en.wikipedia.org/wiki/Distributed_computing)是专门研究这类问题的计算机科学的一个重要领域。研究问题（你没有提供细节），不要指望魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:27:15.000

第一点：这*不是*一个小问题。要完全处理好它，您需要设计一个*系统*，而不仅仅是一两个快速破解。

首先，为了支持动态变化，您几乎肯定会希望在代码中以 DLL 或 .so 之类的形式定义数据结构，以便动态加载它。

如何进行部分取决于您是在谈论严格存储在内存中的数据，还是更面向文件的数据。在后一种情况下，一些决定将在一定程度上取决于数据结构的新形式是否大于旧形式（即，您是否可以就地升级）。

让我们从简单开始，假设您只处理内存中的结构。每个数据项都将表示为一个对象。除了访问数据所需的一切之外，每个对象都将提供锁定，以及一种从该对象的先前版本的对象构建自身的方法（惰性——即，按需，而不仅仅是在 ctor 中）。

当您加载定义新对象类型的 DLL/.so 时，您将创建一个与当前现有对象集合大小相同的集合。每个新对象都将处于“惰性”状态，它已被初始化，但尚未真正从旧对象创建。

然后，您将启动一个线程，该线程使程序的其余部分知道新集合，然后遍历新对象的集合，锁定旧对象，使用它创建新对象，然后销毁旧对象并从旧集合中删除它。当它试图锁定旧对象时，它会使用一个相当短的超时时间（即，如果一个对象正在使用中，它不会等待很长时间，只需继续下一个。它会反复迭代直到所有旧对象已更新，旧对象集合为空。

对于磁盘上的数据，情况*几乎*相同，只是您的对象集合提供了对磁盘上数据的访问。您创建两个单独的文件，并将数据从一个复制到另一个，并根据需要进行转换。

另一种可能性（特别是如果数据可以就地升级）是使用单个文件，但在每条记录中嵌入一个版本号。读取一些原始数据，检查版本号，并使用适当的代码来读/写它。如果您正在阅读旧版本号，请使用旧代码阅读，转换为新格式，然后以新格式写入。如果没有空间更新到位，将新记录写入文件末尾，并更新索引以指示新位置。

# xsd - XSD - 强制存在子标签？

> ID：10625275
> 
> 赞同：0
> 
> 时间：2012-05-16T19:22:44.313
> 
> 标签：xsd

这是一个非常简单的问题，但我的谷歌技能还没有给我答案，所以：

XSD 可以强制一个元素必须存在于更高级别的元素中吗？我知道您可以允许或禁止“显式设置为零”，但这听起来不是一回事。

例如：

```
<parentTag>
    <childTag1>
        ... stuff
    </childTag1>
    <childTag2>   <!-- FAIL VALIDATION IF a childTag2 isn't in parentTag!!! -->
        ... stuff
    </childTag2>
</parentTag> 
```

如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:53:34.150

默认情况下，XSD 中的元素必须存在。如果未指定，则子元素的[`minOccurs`](http://www.w3schools.com/schema/el_element.asp)属性设置为 1。

也就是说，您必须通过设置显式地使元素*可选*`minOccurs="0"`。

**示例架构**

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="parentTag">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="childTag1" minOccurs="0"/> <!-- This element is optional -->
      <xs:element name="childTag2"/> <!-- This element is required -->
    </xs:sequence>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

**测试有效的 XML（使用 xmllint）**

```
<?xml version="1.0"?>
<parentTag>
  <childTag1>
        <!-- ... stuff -->
  </childTag1>
  <childTag2>
        <!-- ... stuff -->
  </childTag2>
</parentTag> 
```

```
testfile.xml 验证

```

**测试无效的 XML**

```
<?xml version="1.0"?>
<parentTag>
  <childTag1>
        <!-- ... stuff -->
  </childTag1>
</parentTag> 
```

```
testfile.xml:2：元素 parentTag：架构有效性错误：元素“parentTag”：缺少子元素。预期是（ childTag2 ）。
testfile.xml 无法验证

```

# php - 对使用 PHP 和 fopen() 从 Google Docs 电子表格中提取的数组感到困惑

> ID：10625284
> 
> 赞同：1
> 
> 时间：2012-05-16T19:23:25.560
> 
> 标签：php, arrays, google-docs

这是我用来从公共谷歌文档电子表格（导​​出为 CSV）中提取数据的代码。

```
<?php
// link to Google Docs spreadsheet
$url='https://docs.google.com/spreadsheet/pub?key=xxxx&output=csv';

// open file for reading
if (($handle = fopen($url, "r")) !== FALSE)
{
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
    {
        $totalrows = count($data);
        for ($row=0; $row<=$totalrows; $row++)
        {           
            if (strlen($data[$row])>0)
            {

                $firstname = $data[1];
                $surname = $data[1];

                echo $firstname;
                echo $surname;
            }
        }
        echo '<pre>';
        print_r($data);
        echo '</pre>';
    }
    fclose($handle);
}
exit;

?> 
```

我得到的输出如下：

```
MartinMartin

Array
(
    [0] => Firstname
    [1] => Martin
)

CarlinCarlin

Array
(
    [0] => Surname
    [1] => Carlin
) 
```

我只是对自己做错了什么感到困惑，我希望能够将数据设置为变量，以便稍后在脚本中回显它们。

IE

```
<?php echo $firstname; ?> 
```

应该呼应`Martin`，不是`MartinMartin`。

这是数据在电子表格中的存储方式：

```
 A          B
1  Firstname Martin
2  Surname   Carlin 
```

任何帮助表示赞赏！

**更新**

现在将结构更改如下（抱歉冗长和重复）：

```
// open file for reading
if (($handle = fopen($url, "r")) !== FALSE)
{
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
    {
        for ($row = 0; $row < count($data); $row += 2)
        {
            $firstname = $data[$row][1];
            $surname = $data[$row + 1][1];
        }

    }
    fclose($handle);
}
echo 'Firstname: '.$firstname.'<br /><br />';
echo 'Surname: '.$surname;
exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:27:29.277

您得到 MartinMartin 是因为您将 firstname 和 surname 设置为相同的 data[1] 值，并在每行迭代中将两者一起回显。如果你注释掉 echo $surname，你会发现它只是输出 Martin。请记住，Martin 的姓 Carlin 也与他的名字位于不同的行，因此您不能只执行 $surname = $data[1] 来获取它。你需要向前看下一行才能得到他的姓氏。您可能希望以两步方式迭代 $row 数组，以便可以索引 $data[$i][1] 和 $data[$i + 1][1] 的名字和姓氏。

```
$rows = array();
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
{
    $rows[] = $data;
}

fclose($handle);

for ($i = 1; $i < count($rows); $i += 2) 
{
    $first = $rows[$i][1];
    $surname = $rows[$i + 1][1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:33:39.247

文档的布局方式，每次 while 语句循环时，您都会得到名字或姓氏。不是都在同一个循环中。您应该将电子表格重构为：

```
 A - Firstname      B - Surname
1   Martin             Carlin
2   Next               Name 
```

或者您需要在交替循环旋转时添加名字和姓氏

# java - 实体类、反射、设置通用值

> ID：10625285
> 
> 赞同：0
> 
> 时间：2012-05-16T19:23:30.430
> 
> 标签：java, jpa

我试过四处搜索，发现很多结果似乎是我需要的。但是我无法以适合我的方式实现它。需要帮助 =(

这是我的课：

```
import Apple;
public static void SetAddChg(Apple a) throws ClassNotFoundException {
    DateFormat addDate = new SimpleDateFormat("yyyy-MM-dd");
    DateFormat addTime = new SimpleDateFormat("HH:mm:ss");
    Date date = new Date();
    EntityManager entityManager = Persistence.createEntityManagerFactory("EntityLibraryPU").createEntityManager();
    entityManager.getTransaction().begin();
    a.setAddDate((addDate.format(date)));
    entityManager.getTransaction().commit();
} 
```

这是有效的，因为我特别说明了课程。但是，我希望这是一个通用类，您可以将任何类（Apple、Banana、Orange）传递给它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:29:06.890

对于要设置的通用属性，可以拥有`Banana`并`Apple`实现通用接口（如“ `Audited`”）：

```
public interface Audited {
    void setDateAdded(Date date);
    //etc, etc
}

public class Apple implements Audited { /*...*/ }

public class Banana implements Audited { /*...*/ } 
```

然后你可以接受`Audited`你的辅助方法：

```
public void setAuditFields(Audited auditedEntity) {
  auditedEntity.setDateChanged(new Date());
  //...etc...
}

//...
a.setSize(textboxSize.getText());
setAuditFields(a); 
```

# php - JQuery 的 $.post 在同一个域上返回 403 Forbidden

> ID：10625288
> 
> 赞同：2
> 
> 时间：2012-05-16T19:23:43.443
> 
> 标签：php, jquery, ajax, http

我对 jquery 的 $.post 函数和（我认为的）跨域安全问题有疑问。

奇怪的是，我要发布的页面与发送帖子的页面位于同一目录中。

这是 'latest.php' 的 javascript 代码，发出 post 请求的文件：

```
$.post("upload.php", { base64: fCanvas, description: description }, function(data){
             // some things happen here
        }); 
```

upload.php 是一个 php 脚本，用于将 base64 变量的内容上传到 Tumblr。

JavaScript 控制台显示 403 Forbidden 错误。我尝试了 chmodding -777 'upload.php'，但这并没有改变任何东西。

使用 $.get 代替 $.post 是可行的，但由于安全原因以及 $get 数据的长度限制（我正在发送 base64 编码图像），这是不受欢迎的。

* * *

编辑：我将 'latest.php' 上的 $.get 请求之一更改为 $.post 请求，它正在工作......

```
$.post("base64.php", { url: t_url },
               function(data){
                 data = "data:image/gif;base64,"+data;
                 draw(data);
               }); 
```

所以，我完全不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:25:06.560

`403 Forbidden`是服务器生成的响应，与“同源策略”无关。真的无法提供比这更进一步的帮助，但这将与配置相关——而不是跨域问题。

* * *

编辑：我打算*建议*这是缺乏执行权限，但你已经做了 777 chmod，你可以用 打它`GET`，这有点令人困惑。为了不*完全*没用，这里有一个链接建议您需要使用[644 而不是 777](http://www.daniweb.com/hardware-and-software/linux-and-unix/threads/21777/403-forbidden-you-dont-have-permission-to-access-index.htm-on-this-server)。

* * *

另一个建议：在您的（或其他配置）中`mod_security`启用？众所周知，它对包含标记/url 或其他潜在尝试`.htaccess`等内容的表单值不友好。`XSS`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:41:28.140

好。我让它工作了。

我尝试向我的 upload.php 脚本发送一个较小的（仍然是 base64 编码的）图像，它完成了这项工作。看来 jQuery 的 post 函数无法处理大量（相对而言，它只是 640x453 图像）的数据量。

我通过使用 XMLHttpRequest() 解决了这个问题。它就像一个魅力。

如果有人知道 jQuery 的 Ajax 的确切问题，请告诉我，因为我仍然不知道为什么我的数据会导致 HTTP Forbidden 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-26T20:55:54.353

嗨，禁止错误，这是因为使用 post 方法并且在服务器端 CORS 未实现与客户端 CORS 一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T19:27:08.627

尝试使用绝对链接（对我有用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-02T19:08:42.147

与您的托管服务提供商检查 mod_security！将其列入白名单或禁用它时，与此类似的大多数问题都已解决！

# entity-framework-4 - DynamicData RegisterContext error using multiple edmx

> ID：10625289
> 
> 赞同：1
> 
> 时间：2012-05-16T19:23:50.887
> 
> 标签：entity-framework-4, global-asax, edmx

Before posting this I made sure to read all suggestion made from SO.

The application currently has two projects one for the web application and one for the Entity Frame work (version 4.0). We are trying a tool from RSSBus for the Quickbooks Provider [description here](http://www.rssbus.com/ado/quickbooks/) Setting it up was easy enough. I prefixed QB on all the entities and generated the QB.tt file, no issues. Both edmx files are housed in the same project using a shared namespace (SMR.Model)

When I rebuilt the project to run it the global.asax.cs file threw an error:

```
DefaultModel.RegisterContext(typeof(SMR.Model.SMREntities),
new ContextConfiguration() { ScaffoldAllTables = true }); 
```

The error given was:

> The given key was not present in the dictionary.
> 
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
> 
> Source Error: Line 36: public static void RegisterRoutes(RouteCollection routes) Line 37: { Line 38: DefaultModel.RegisterContext(typeof(SMR.Model.SMREntities), Line 39: new ContextConfiguration() { ScaffoldAllTables = true }); Line 40:
> 
> Source File: C:\all\src\smr\smr.pl.Web\Global.asax.cs Line: 38
> 
> Stack Trace: [KeyNotFoundException: The given key was not present in the dictionary.] System.Collections.Generic.Dictionary`2.get_Item(TKey key) +9624829 System.Web.DynamicData.ModelProviders.EFDataModelProvider..ctor(Object contextInstance, Func`1 contextFactory) +800 System.Web.DynamicData.ModelProviders.SchemaCreator.CreateDataModel(Object contextInstance, Func`1 contextFactory) +126 System.Web.DynamicData.MetaModel.RegisterContext(Func`1 contextFactory, ContextConfiguration configuration) +378 System.Web.DynamicData.MetaModel.RegisterContext(Type contextType, ContextConfiguration configuration) +88 smr.pl.Web.Global.RegisterRoutes(RouteCollection routes) in C:\all\src\smr\smr.pl.Web\Global.asax.cs:38 smr.pl.Web.Global.Application_Start(Object sender, EventArgs e) in C:\all\src\smr\smr.pl.Web\Global.asax.cs:91
> 
> [HttpException (0x80004005): The given key was not present in the dictionary.] System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9170941 System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +131 System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194 System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339 System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253
> 
> [HttpException (0x80004005): The given key was not present in the dictionary.] System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090044 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

With so little to go on as to what could eb the problem I looked at the .config files to see if they were wrong and all checked out as ok.

```
<add name="SMREntities" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=localhost;Initial Catalog=SMR;Persist Security Info=True;User ID=sa;Password=XXX;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
<add name="RSSQBEntities" connectionString="metadata=res://*/Model.QBOE.csdl|res://*/Model.QBOE.ssdl|res://*/Model.QBOE.msl;provider=System.Data.RSSBus.QuickBooks;provider connection string=&quot;Offline=False;Application Id=987654321;Connection Ticket=TGT-000-T_xxxxxxxxxxxxxxxxxxxx;Online Login=ohno&quot;" providerName="System.Data.EntityClient" /> 
```

Any thoughts as to what is causing the structure to fail like this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:13:52.533

我终于弄清楚了“真正的”问题。我首先将这两个模型分成单独的项目。我面临的问题是元数据被集成到同一个程序集命名空间中。我通过更新 res://*/ 部分解决了我的问题

```
<add name="SMREntities" connectionString="metadata=res://SMR.Model/;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=localhost;Initial Catalog=SMR;Persist Security Info=True;User ID=sa;Password=XXX;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
<add name="RSSQBEntities" connectionString="metadata=res://SMR.QBOE/Model.RSSQBOE.csdl|res://SMR.QBOE/Model.RSSQBOE.ssdl|res://SMR.QBOE/Model.RSSQBOE.msl;provider=System.Data.RSSBus.QuickBooks;provider connection string=&quot;Offline=False;Application Id=987654321;Connection Ticket=TGT-000-T_xxxxxxxxxxxxxxxxxxxx;Online Login=ohno&quot;" providerName="System.Data.EntityClient" /> 
```

经典的“问题不是问题”。

# c# - 该字符串未被识别为有效的日期时间。有一个从索引 0 开始的未知单词

> ID：10625292
> 
> 赞同：5
> 
> 时间：2012-05-16T19:24:03.807
> 
> 标签：c#, datetime

我有以下 C# 在尝试将字符串解析为日期时间时给我上面的错误。

```
DateTime backupdate = System.Convert.ToDateTime(imageflowlabel.Text);   
DateTime currentdate = System.DateTime.Now.AddHours(-2);    
int result = currentdate.CompareTo(backupdate); 
```

`imageflowlable.text`看起来像这样`2012-04-15 15:23:34:123`

关于如何转换它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:26:49.433

是 - 使用带有自定义格式字符串的“DateTime.ParseExact()”或“TryParseExact()”：

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
DateTime currentdate;
int result;
try
{
  // EXAMPLE: 2012-04-15 15:23:34:123 
  DateTime backupdate =
     DateTime.ParseExact (
       "yyyy-MM-dd HH:mm:ss:fff", //mind the casing
       imageflowlabel.Text, 
       CultureInfo.InvariantCulture);
  currentdate = System.DateTime.Now.AddHours(-2);    
  result = currentdate.CompareTo(backupdate);
}
catch (Exception ex)
{
  ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T19:33:58.513

您的问题在于 dateTime 字符串的时间部分。如果您的字符串显示为“2012-04-15 15:23:34.123”，那么它会起作用。您可以修改您的字符串并用句点替换最后一个冒号，这样就可以解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:33:20.230

您的代码看起来正确；问题可能与您的字符串格式有关，其最后一个`:`实际上应该是 a `.`（表示小数秒的开始）。

```
Incorrect: 2012-04-15 15:23:34:123
Correct:   2012-04-15 15:23:34.123 
```

`Convert.ToDateTime("2012-04-15 15:23:34.123")`工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T19:33:04.153

[ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)应该适合您，假设您的用户无法自行编辑该值；在这种情况下，您应该使用[TryParseExact](http://msdn.microsoft.com/en-us/library/ms131044)，除非您想要`FormatException`.

```
var toParse = "2012-04-15 15:23:34:123";

var parsed = DateTime.ParseExact(toParse, "yyyy-MM-dd HH:mm:ss:fff", null);

Assert.AreEqual(new DateTime(2012, 4, 15, 15, 23, 34, 123), parsed); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T06:12:33.690

我已经看到了几个解决此问题中概述的情况的答案，例如使用 DateTime.Parse、DateTime.ParseExact 或 Convert.ToDateTime。我试图确定为什么这个问题看起来不一致。我使用带有 SQL Server 2008 R2 后端的 Microsoft Enterprise Library Software Factory 构建了一个应用程序，现在它已经投入生产了大约 9 个月。它至少有 20 个具有相同代码格式的实例，这些实例将 DateTime 属性值从 C# 分配给存储过程的 System.Data.DBType.DateTime 参数。20 个代码块中有 19 个工作正常。20 日，我必须添加如下所示的 .ToString() 调用来解决此问题中提到的错误。

```
db.AddInParameter(command, "beginDT", DbType.DateTime, timeBlock.BeginDT.ToString()); 
```

因此，任何人都对为什么它在 19 个完全相同的实例而不是 20 个实例中可以正常工作有一些见解？我只是想更多地了解这些对象的相互关系，以便构建可靠的代码。我已经回到所有其他实例并添加了 .ToString() 调用。虽然还没有完成我的回归测试；所以，我不知道这是否是一个错误。

# asp.net - asp:MaskedEditExtender 停止验证器工作

> ID：10625296
> 
> 赞同：0
> 
> 时间：2012-05-16T19:24:13.600
> 
> 标签：asp.net, validation, ajaxcontroltoolkit

我有一个RequiredFieldValidator。代码如下：

```
 <asp:TextBox runat="server" ID="phone" MaxLength="10" Columns="10" 
                            Width="90px"></asp:TextBox>
                        <asp:MaskedEditExtender ID="phone_MaskedEditExtender" runat="server" CultureAMPMPlaceholder=""
                            CultureCurrencySymbolPlaceholder="" CultureDateFormat="" CultureDatePlaceholder=""
                            CultureDecimalPlaceholder="" CultureThousandsPlaceholder="" CultureTimePlaceholder=""
                            Enabled="True" TargetControlID="phone" Mask="(999)999-9999" ClearMaskOnLostFocus="False">
                        </asp:MaskedEditExtender>
                        <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidatorPhone" ControlToValidate="phone"
                            ErrorMessage="Phone is required." Display="Dynamic" InitialValue=""  /> 
```

如果我删除 asp:MaskedEditExtender，RequiredFieldValidator 会按预期运行。否则，验证器似乎失去了它的功能。

为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:01:58.443

您的 MaskedEditExtender 没有做任何事情，只是声明了一个掩码，并将自己置于您输入值的位置。

在电话号码的情况下，不需要所有这些文化。

什么是验证表达式？

MaskedExtender 的重点是控制输入类型。如果您使用的是 ASP，您可以通过从数据库中提取并限制字段的最大长度来做到这一点。

这是一个例子。

```
<cc1:MaskedEditExtender  ID="MaskedEditExtender1" 
                     runat="server"
                     TargetControlID="txtClientLookupValue"
                     Mask="999999-9999"
                     ClearMaskOnLostFocus="false"> 
</cc1:MaskedEditExtender>

<cc1:MaskedEditValidator ID="MaskedEditValidator1" 
                     ControlExtender="MaskedEditExtender1"
                     runat="server"
                     ControlToValidate="txtClientLookupValue"
                     IsValidEmpty="True" 
                     InvalidValueMessage="INVALID"
                     ValidationExpression="^[2-9][0-9][0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$"
                     Display="Dynamic">    
</cc1:MaskedEditValidator> 
```

这是一个参考：

[MaskedEditExtenderLinkASP](http://forums.asp.net/t/1082132.aspx)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T10:56:05.593

这是我在 ASP.NET 中处理电话号码的方法（掩码和验证）。只是想帮忙！

```
 <div>
                <asp:ScriptManager ID="ScriptManager1" runat="server">
                </asp:ScriptManager>

                <asp:TextBox ID="txb_HomePhoneNumb"
                    Cssclass="BoxStyleHireAppCityStateZip" runat="server"
                    Width="175" MaxLength="12">
                </asp:TextBox>

                <%--MaskedEditExtender Created with: ASP.NET AJAX Control
                   Toolkit: https://ajaxcontroltoolkit.codeplex.com--%>

                <cc1:MaskedEditExtender ID="MaskedEditExtenderHomePhoneNumb"
                   runat="server" 
                   TargetControlID="txb_HomePhoneNumb"
                   ClearMaskOnLostFocus ="false"
                   MaskType="None"
                   Mask="(999) 999-9999" 
                   MessageValidatorTip="true"
                   InputDirection="LeftToRight"
                   ErrorTooltipEnabled="True"
                />

                <asp:RegularExpressionValidator runat="server"
                     ControlToValidate="txb_HomePhoneNumb" style="color:red;"
                     CssClass="display-next"
                     ErrorMessage="*Not a valid phone number!"
                     ValidationExpression="^\D?(\d{3})\D?\D?(\d{3})\D?
                                               (\d{4})$" Font-Size="Medium">
                </asp:RegularExpressionValidator>
            </div> 
```

# javascript - 用javascript移动图像

> ID：10625302
> 
> 赞同：2
> 
> 时间：2012-05-16T19:24:37.083
> 
> 标签：javascript, html

这个功能有什么问题？

```
function moveColor()
 {
 document.getElementById(purple).style.marginRight = "34px";
 } 
```

使用这个 html：

```
<div><img src="images/purple.png" id="purple" onclick="colorpurple()" onmouseover="moveColor()" style="cursor:pointer;"/></div> 
```

我也想让它移动 1 秒，但似乎无法解决这个简单的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:25:32.940

您需要将 id 放在引号中（*以便将其视为字符串*）。

```
document.getElementById('purple').style.marginRight = "34px"; 
```

当前用法意味着`purple`引用一个未定义的变量，因此它具有一个`undefined`值，因此该`document.getElementById`方法不返回任何内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:27:47.057

好像您错过了函数 getElementById 上的引号。

像这样：

```
function moveColor() { 
      document.getElementById('purple').style.marginRight = "34px";
} 
```

# iphone - iOS 故事板松散连接？

> ID：10625304
> 
> 赞同：0
> 
> 时间：2012-05-16T19:24:40.010
> 
> 标签：iphone, ios, xcode, storyboard, viewcontroller

我有一个非常简单的应用程序，它只有 2 个视图控制器。初始根控制器上有两个 UIButton，它们都通过 Storyboard 转换到第二个视图控制器。在第二个视图控制器上加载的信息由链接到两个初始视图控制器的 buttonPressed IBAction 确定。我遇到的问题是，一旦我点击两个按钮之一，我就会让第二个视图控制器加载空白。从调试中，我注意到 buttonPressed 函数在第二个视图加载后被调用。如何在第二个视图控制器加载空白之前调用 buttonPressed 函数？

几乎不涉及任何代码，我将 UIButtons 标记为 1 和 2，并且按钮按下功能根据等于 1 或 2 的发件人标记加载两个文本文件。所有内容都在 Storyboard 中链接。有什么建议么？

*按钮按下功能：

if([发件人标签] == 1)

```
count = 1; 
```

别的

```
count = 2; 
```

计数确定要加载的文件。

*在 Storyboard 中，我只有 2 个视图控制器（没有导航或任何其他）和初始视图上的两个 UIButtons 和第二个显示文本的文本视图。UIButtons 连接到 buttonPressed 和第二个视图控制器 segue。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:52:35.837

不要为按下按钮而烦恼 IBAction。让按钮连接到新控制器并用于`prepareForSegue:sender:`确定点击了哪个按钮（发送者）。

然后，您可以获得对即将出现的控制器的引用，例如...

```
SecondController *next = (SecondController *)[segue destinationViewController]; 
```

...并告诉它要加载哪个文件，它可以在`viewDidLoad:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:57:00.033

这听起来像是一个案例`prepareForSegue`！

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"First Button Segue Identifier"])
    {
        ViewController *theViewController = segue.destinationViewController;
        theViewController.textProperty = self.firstButtonText;
    } 
    else if ([[segue identifier] isEqualToString:@"Second Button Segue Identifier"])
    {
        ViewController *theViewController = segue.destinationViewController;
        theViewController.textProperty = self.secondButtonText;
    }
} 
```

好了，它非常通用，因为我不知道您的变量名称或您使用的文本。同样，如果 segue 没有单独的标识符，您可以使用 sender 来确定正在按下哪个按钮。

祝你好运！

# php - 将redis用作具有许多键但服务器上没有太多内存的数据库（php）

> ID：10625309
> 
> 赞同：1
> 
> 时间：2012-05-16T19:24:50.453
> 
> 标签：php, redis

我正在使用 Redis，并且正在存储许多没有 TTL 的密钥（我需要所有这些密钥）

该程序运行得足够快，但我真的不想一直将所有这些键保留在内存中，因为最终它会用完。

有没有办法将数据库转储到文件中，然后在我需要该信息时导入转储文件？

*编辑*我知道替代方法是重新编码我的程序中的逻辑，但现在重新编码它不是一个选项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:30:08.547

很确定您要么修复代码，要么升级服务器。以正确的方式解决问题与解决问题一样多，所以你最好在第一次就做对。

# crystal-reports - 如何在交叉表水晶报表中加粗计算成员行的文本？

> ID：10625312
> 
> 赞同：1
> 
> 时间：2012-05-16T19:24:53.277
> 
> 标签：crystal-reports

在水晶报表的交叉表报表中，我有

```
A   aa      1
    bb      2
    cc      0
    dd      1
   ATotal   4

B   tt      0
    yy      1
    hh      0
    jj      1
   BTotal   2 
```

这里**ATotal**和**BTotal**是从计算的成员派生的......这些显示为 aa、bb、cc 的常规字体......我希望这些 ATotal 和 BTotal 仅作为**粗体**字母，其余 aa、bb、cc 为常规的。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:15:11.247

选择所需的字段并键入 CTRL+B。

# sql - 如何将子查询链接到主查询？

> ID：10625317
> 
> 赞同：0
> 
> 时间：2012-05-16T19:25:06.537
> 
> 标签：sql, sql-server-2008-r2

`blast_seconds`我在显示为正确值时遇到问题。在我的 select 子查询中，我需要`blast_seconds`在我的主 Select 语句中同时显示 。执行查询时`Year`，`Month`、`ScheduledSeconds`、`TotalDays`和`Totaltrucks`匹配，但`blast_seconds`列在所有月份中显示相同的值。

这是我的查询：

```
SELECT      DATEPART(YEAR, [Time])      AS [Year]
        ,   DATEPART(MONTH, [Time])     AS [Month]
        ,   SUM(Total)                  AS ScheduledSeconds
        ,   COUNT(DISTINCT([Time]))     AS TotalDays
        ,   COUNT(DISTINCT(Equipment))  AS TotalTrucks
        ,   (
                SELECT      SUM(CASE 
                                    WHEN dbo.reasons.status_id = '298' 
                                        THEN (dbo.by_operator_reasons.seconds) 
                                    ELSE 0 
                                END)        
                FROM        dbo.reasons     
                INNER JOIN  by_operator_reasons 
                ON          dbo.reasons.id = by_operator_reasons.reason_id
                INNER JOIN  equipment
                ON          by_operator_reasons.equipment_id = equipment.id     
                WHERE       reasons.descrip LIKE 'Blast' 
                AND         [Time] BETWEEN '2011-01-01' AND '2012-05-15'
                AND         by_operator_reasons.deleted_at IS NULL
                AND         equipment.type = 'Truck'
            ) AS Blast_Seconds              
FROM        by_equipment_times
WHERE       [Time] BETWEEN '2011-01-01' and '2012-05-15' 
AND         equipment_type  = 'Truck'
GROUP BY    DATEPART(YEAR, [Time])
        ,   DATEPART(MONTH, [Time])
ORDER BY    DATEPART(YEAR, [Time])      ASC
        ,   DATEPART(MONTH, [Time])     ASC 
```

这是我当前的输出：

```
Year  Month  SchedSec  Days  TotalTrucks  Blast_Seconds
----  -----  --------  ----  -----------  -------------
2011    1    51340448   31        20      4931156
2011    2    51979509   28        22      4931156
2011    3    58845600   31        22      4931156
2011    4    59121967   30        24      4931156
2011    5    66857271   31        25      4931156
2011    6    67306766   30        28      4931156
2011    7    76976358   31        30      4931156
2011    8    80393145   31        30      4931156
2011    9    75556005   30        30      4931156
2011    10   77741205   31        29      4931156
2011    11   75272400   30        29      4931156
2011    12   77691044   31        29      4931156
2012    1    77683752   31        29      4931156
2012    2    72662400   29        29      4931156
2012    3    77574538   31        29      4931156
2012    4    75172177   30        29      4931156
2012    5    37584000   15        29      4931156 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:45:12.670

这很可能是因为您没有告诉

```
Select SUM(CASE WHEN dbo.reasons.status_id = '298' 
    then (dbo.by_operator_reasons.seconds) ELSE 0 END.... 
```

子查询以获取相应行的值 - 它只是将找到的所有内容相加。您必须将子查询绑定到主查询 - 例如

```
[...]
    AND equipment.equipemnt_id_or_something = T1.equipment_id_or_something
    ) AS Blast_Seconds              
FROM        by_equipment_times as T1
[...] 
```

或者我认为.... :)

PS。字段名称是虚构的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:10:53.210

The subquery is not corelated to main query, that is it does not depend on it. You need to connect it, and I believe that you want to do it using Time column.

```
SELECT      DATEPART(YEAR, [Time])      AS [Year]
        ,   DATEPART(MONTH, [Time])     AS [Month]
        ,   SUM(Total)                  AS ScheduledSeconds
        ,   COUNT(DISTINCT([Time]))     AS TotalDays
        ,   COUNT(DISTINCT(Equipment))  AS TotalTrucks
        ,   (
                SELECT      SUM(CASE 
                                    WHEN dbo.reasons.status_id = '298' 
                                        THEN (dbo.by_operator_reasons.seconds) 
                                    ELSE 0 
                                END)        
                FROM        dbo.reasons     
                INNER JOIN  by_operator_reasons 
                ON          dbo.reasons.id = by_operator_reasons.reason_id
                INNER JOIN  equipment
                ON          by_operator_reasons.equipment_id = equipment.id     
                WHERE       reasons.descrip LIKE 'Blast' 
                AND         DATEPART(YEAR, [Time]) = DATEPART(YEAR, by_equipment_times.[Time])
                AND         DATEPART(MONTH, [Time]) = DATEPART(MONTH, by_equipment_times.[Time])
                AND         by_operator_reasons.deleted_at IS NULL
                AND         equipment.type = 'Truck'
            ) AS Blast_Seconds              
FROM        by_equipment_times
WHERE       [Time] BETWEEN '2011-01-01' and '2012-05-15' 
AND         equipment_type  = 'Truck'
GROUP BY    DATEPART(YEAR, [Time])
        ,   DATEPART(MONTH, [Time])
ORDER BY    DATEPART(YEAR, [Time])      ASC
        ,   DATEPART(MONTH, [Time])     ASC 
```

If you regularly take more than few months it would probably pay off to convert subquery to derived table, grouping by year/month and outer-joining to main query.

# c# - this == null 在 .NET 实例方法中 - 为什么会这样？

> ID：10625326
> 
> 赞同：35
> 
> 时间：2012-05-16T19:25:47.857
> 
> 标签：c#, .net

我一直认为`this`在实例方法体内不可能为空。以下简单的程序表明这是可能的。这是一些记录在案的行为吗？

```
class Foo
{
    public void Bar()
    {
        Debug.Assert(this == null);
    }
}

public static void Test()
{            
    var action = (Action)Delegate.CreateDelegate(typeof (Action), null, typeof(Foo).GetMethod("Bar"));
    action();
} 
```

更新

我同意答案，即这是记录此方法的方式。但是，我并不真正理解这种行为。特别是因为它不是 C# 的设计方式。

> 我们从某个人（可能是使用 C# 的 .NET 小组之一（当时还没有命名为 C#））那里得到了一份报告，他编写了在空指针上调用方法的代码，但他们没有得到一个异常，因为该方法没有访问任何字段（即“this”为空，但方法中没有使用它）。然后那个方法调用了另一个方法，它确实使用了这个点并抛出了一个异常，随之而来的是一些令人头疼的问题。在他们弄清楚之后，他们给我们发了一张关于它的便条。我们认为能够在空实例上调用方法有点奇怪。Peter Golde 做了一些测试，看看总是使用 callvirt 对性能的影响是什么，它足够小，我们决定做出改变。

[http://blogs.msdn.com/b/ericgu/archive/2008/07/02/why-does-c-always-use-callvirt.aspx](http://blogs.msdn.com/b/ericgu/archive/2008/07/02/why-does-c-always-use-callvirt.aspx)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T19:30:23.470

因为你正在传递`null`到`firstArgument``Delegate.CreateDelegate`

所以你在一个空对象上调用一个实例方法。

[http://msdn.microsoft.com/en-us/library/74x8f551.aspx](http://msdn.microsoft.com/en-us/library/74x8f551.aspx)

> 如果 firstArgument 是空引用并且 method 是实例方法，则结果取决于委托类型类型和方法的签名：
> 
> 如果类型的签名显式地包含方法的隐藏的第一个参数，则称该委托代表一个开放的实例方法。当委托被调用时，参数列表中的第一个参数被传递给方法的隐藏实例参数。
> 
> 如果方法和类型的签名匹配（即所有参数类型都兼容），则称委托在空引用上关闭。调用委托就像在空实例上调用实例方法一样，这并不是一件特别有用的事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T19:30:17.103

如果您使用 call IL 指令或委托方法，当然可以调用方法。仅当您尝试访问将给您提供您确实寻求的 NullReferenceException 的成员字段时，您才会关闭此诱杀装置。

尝试

```
 int x;
 public void Bar()
 {
        x = 1; // NullRefException
        Debug.Assert(this == null);
 } 
```

BCL 甚至包含明确的 this == null 检查，以帮助调试不一直使用 callvirt 的语言（如 C#）。有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/10169035/why-does-string-equalsobject-obj-check-to-see-if-this-null/10169640#10169640)。

例如 String 类就有这样的检查。它们并没有什么神秘之处，只是您不会在 C# 等语言中看到对它们的需求。

```
// Determines whether two strings match. 
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)] 
public override bool Equals(Object obj)
{
    //this is necessary to guard against reverse-pinvokes and
    //other callers who do not use the callvirt instruction
    if (this == null)
        throw new NullReferenceException();

    String str = obj as String;
    if (str == null) 
        return false;

    if (Object.ReferenceEquals(this, obj)) 
        return true;

    return EqualsHelper(this, str);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T19:31:08.580

尝试`Delegate.CreateDelegate()` [在 msdn](http://msdn.microsoft.com/en-us/library/s3860fy3.aspx)的文档。

您正在“手动”调用所有内容，因此`this`您没有传递指针的实例，而是传递了 null。所以它可能会发生，但你必须非常努力地尝试。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-16T19:33:20.807

`this``null`是一个引用，所以从类型系统的角度来看它的存在是没有问题的。

你可能会问为什么`NullReferenceException`没有被抛出。[记录](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)了 CLR 引发该异常的完整情况列表。您的案例未列出。是的，它*是*一个`callvirt`, 但是 to `Delegate.Invoke`（[见这里](https://stackoverflow.com/questions/1367070/difference-between-delegate-invoke-and-delegate)）而不是 to `Bar`，所以`this`引用实际上是你的非空委托！

您看到的行为对 CLR 有一个有趣的实现结果。委托具有非常频繁的`Target`属性（对应于您的引用） ，即当委托是静态的（想象是静态的）时。现在自然有一个私有的属性支持字段，称为. 静态委托是否包含空值？ [不，它没有。](http://www.ikriv.com/en/prog/info/dotnet/Delegates.html) 它包含对委托本身的引用。为什么不为空？因为如您的示例所示，null 是委托的合法目标，并且 CLR 没有两种类型的指针来以某种方式区分静态委托。`this``null``Bar``_target``_target``null`

这段琐碎的事情表明，对于委托，实例方法的空目标不是事后考虑的。您可能仍在问最终的问题：但为什么必须支持它们？

早期的 CLR 有一个雄心勃勃的计划，即成为甚至是宣誓 C++ 开发人员的首选平台，这个目标首先通过托管 C++ 实现，然后通过 C++/CLI 实现。一些过于具有挑战性的语言特性被省略了，但是在支持没有实例的情况下执行实例方法并没有什么真正的挑战，这在 C++ 中是完全正常的。包括代表支持。

因此最终的答案是：因为 C# 和 CLR 是两个不同的世界。

[更好的阅读](http://blog.barrkel.com/2006/05/call-vs-callvirt-for-c-non-virtual.html)，[甚至更好的阅读](http://bradwilson.typepad.com/blog/2008/01/c-30-extension.html)来展示允许空实例的设计即使在非常自然的 C# 句法上下文中也能显示出它的痕迹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T05:34:13.223

这是 C# 类中的只读参考。因此，正如预期的那样，这可以像任何其他参考一样使用（在只读模式下）......

```
this == null // readonly - possible
this = new this() // write - not possible 
```

# java - Setting up Emacs 23.4, CEDET 1.1, and SemanticDB to use GNU Global on Windows

> ID：10625328
> 
> 赞同：5
> 
> 时间：2012-05-16T19:26:01.250
> 
> 标签：java, windows, maven, emacs, cedet

I've been trying to get my Emacs config for Java development working. It's pretty good - I've gotten malabar-mode working and have GNU Global working for tag browsing. The one thing I can't get working is getting semanticdb to use gnu global properly. None of my imports are found.

First, this is a Maven multi-module project with all sources checked out from the top-level root project folder. All other projects are below this one in the directory tree. There is a single GTAGS database in this root folder covering everything.

Things that work:

*   `M-x gtags-find-tag RET symbol RET` works fine, so the database is good and global can find it.
*   `M-x cedet-gnu-global-version-check` works and reports that my version is good.
*   `M-x cedet-gnu-global-expand-filename` works
*   `M-x semanticdb-find-test-translate-path` shows a "GNU Global Search Table" when in a Java buffer
*   I have the JDK source folder set as a system include folder, so core Java imports are parsed properly.

My java config is as follows (cedet initialization is earlier in the file):

```
(add-local-load-path "malabar/lisp")

(require 'malabar-mode)
(setq malabar-groovy-lib-dir (concat emacs-local-site-lisp "malabar/lib"))
(add-to-list 'auto-mode-alist '("\\.java\\'" . malabar-mode))

;; enable semanticdb support for gnu global
(when (cedet-gnu-global-version-check t)
  (semanticdb-enable-gnu-global-databases 'java-mode))

(add-hook 'java-mode-hook
    (lambda ()
    (gtags-mode 1)))

(add-hook 'java-mode-hook 'flymake-mode-on)

(defun my-java-flymake-init ()
  (list "javac" (list (flymake-init-create-temp-buffer-copy
                   'flymake-create-temp-with-folder-structure))))

(add-to-list 'flymake-allowed-file-name-masks
         '("\\.java$" my-java-flymake-init flymake-simple-cleanup))

(add-hook 'java-mode-hook
      '(lambda ()
         (semantic-add-system-include (getenv "JAVA_HOME") 'java-mode))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:15:34.910

答案与您的项目的设置方式以及您是否使用 EDE 有关。EDE 是 Emacs 开发环境（在 IDE 上运行），它是 CEDET 跟踪哪些文件属于您的项目的方式。该限制器与性能（搜索更少的东西）和防止配置从一个项目渗入另一个项目有关。

不幸的是，CEDET/EDE 还不支持 Maven。但是，您可以只标记项目的根目录，我猜 ede-cpp-root（通常用于 C++ 项目）可能就足够了。我们可能应该制作一个Java版本。

无论如何，可以将 EDE 配置为使用 GNU Global 快速查找文件（请参阅使用 EDE 和语义的 GNU Global 支持手册），但您的 GTAGS 文件需要位于项目根目录下。

如果您在 project-1 中，并希望跳转到 project-2 中的文件，而 GTAGS 是 project-1 的根目录，那么它将无法正常工作。您必须将 GTAGS 文件和 EDE 项目移动到一个公共父目录。

在您当前的设置中，如果所有内容都已经在 GTAGS 的公共目录下，那么您很可能只需要设置一个 EDE 项目来挂起 GTAGS 文件查找功能。

cedet-devel 邮件列表存档中有几个在这方面取得了一些成功的人的主题。

# css - How to couple img to body?

> ID：10625329
> 
> 赞同：-3
> 
> 时间：2012-05-16T19:26:01.243
> 
> 标签：css

1.  I need to couple top border image to top border body as you can see in the left side.
2.  I need to cupole the "NEXT PICTURE :" to right. Thanks. You know something strange happens images switch in chrom slowly and stop in firefox there is no problem with velocity [my site.](http://www.centerwow.com/comics/comics.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:32:32.630

你可以在css中使用背景属性

```
body {
   background-image: url(someimage.png);
   background-position: top left;
   background-repeat:repeat-x;  (or no-repeat if you only want it once)
   background-attachment:fixed;
} 
```

这将在页面顶部平铺图像（使用**背景附件：固定；**如果您希望它始终位于屏幕顶部）

[教程](http://www.w3schools.com/cssref/pr_background-position.asp)

您可以将下一张图片放在 div 中：

```
<div style="text-align:right">
    NEXT PICTURE :<img id="scroll_me" alt="NEXT PICTURE :" src="img/next.jpg">
</div> 
```

这将使您的图像与浏览器窗口的右侧边缘对齐。

试试看，看看你的情况如何，还有其他事情可以做，但让我知道你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:34:55.580

将您移动`<p>NEXT PICTURE..</p>`到“容器”div 的下方（外部），并移除`<br>`顶部的两个。那会成功的。

# list - 如何创建一对并将其放在 Prolog 中的列表中？

> ID：10625331
> 
> 赞同：1
> 
> 时间：2012-05-16T19:26:08.020
> 
> 标签：list, prolog

我正在使用 Prolog 编程，但我完全迷失了……我不断将编程语言混为一谈，即使它们完全不同……我正在制作一款名为 Meta-Forms 的游戏，作为我必须完成的任务根据我得到的一些线索，将不同类型的棋子放在一个 3x3 的棋盘上。例如，要将黄色矩形放在板“Board”的左上角，我将使用以下代码： place(piece(rectangle, yellow), top, left, Board) 根据第二个和第三个参数，我已根据位置将其放入列表B中。[（上，左），（上，中），（上，右），（中，左），（中，中），（中，左），（下，左），（下，中），（底部，右）]。但不是我需要的位置是“一块（矩形，黄色）”你能帮我制作“

```
put_piece(X, [X,_,_,_,_,_,_,_,_]) :- line_of(place(_,top,_,_), top), column_of(place(_,_,left,_), !.
put_piece(X, [_,X,_,_,_,_,_,_,_]) :- line_of(place(_,top,_,_), top), column_of(place(_,_,middle,_), middle), !.
put_piece(X, [_,_,X,_,_,_,_,_,_]) :- line_of(place(_,top,_,_), top), column_of(place(_,_,right,_), right), !.
put_piece(X, [_,_,_,X,_,_,_,_,_]) :- line_of(place(_,center,_,_), center), column_of(place(_,_,left,_), left), !.
put_piece(X, [_,_,_,_,X,_,_,_,_]) :- line_of(place(_,center,_,_), center), column_of(place(_,_,middle,_), middle), !.
put_piece(X, [_,_,_,_,_,X,_,_,_]) :- line_of(place(_,center,_,_), center), column_of(place(_,_,right,_), right), !.
put_piece(X, [_,_,_,_,_,_,X,_,_]) :- line_of(place(_,bottom,_,_), bottom), column_of(place(_,_,left,_), left), !.
put_piece(X, [_,_,_,_,_,_,_,X,_]) :- line_of(place(_,bottom,_,_), bottom), column_of(place(_,_,middle,_), middle), !.
put_piece(X, [_,_,_,_,_,_,_,_,X]) :- line_of(place(_,bottom,_,_), bottom), column_of(place(_,_,right,_), right), !.

line_of(place(_,Line,_,_), Line).
column_of(place(_,_,Column,_), Column).
cor_de(defPiece(_,Color), Color).
forma_de(defPiece(Form,_), Form).

place(P, L, Col, Tab) :-
    put_piece(P, Tab),
    line_of(place(_,L,_,_), L),
    column_of(place(_,_,Col,_), Col),
    color_of(Piece, cor),
    form_of(P, forma). 
```

另外，我有点需要你的帮助来制作一对。一块应该是包含表格和颜色的一对，例如位置应该是一对列和一条线。

例子：

```
challenge(1, Board) :- 
    place(piece(square, blue), bottom, left, Board),
    place(piece(square, yellow), top, left, Board),
    place(piece(circle, blue), center, right, Board),
    place(piece(circle, red), top, middle, Board),
    place(piece(square, red), bottom, right, Board),
    place(piece(triangle, blue), top, right, Board),
    place(piece(circle, yellow), bottom, middle, Board),
    place(piece(triangle, red), center, left, Board),
    place(piece(triangle, yellow), center, middle, Board). 
```

应该打印这个：

[片（方形，黄色），片（圆形，红色），片（三角形，蓝色），片（三角形，红色），片（三角形，黄色），片（圆形，蓝色），片（正方形，蓝色），片（圆形，黄色），片（方形，红色）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:34:14.793

尝试重新定义`put_piece`；例如，将一块放在左上角是：

```
put_piece(X, [X,_,_,_,_,_,_,_,_], top, left). 
```

然后相应地简化`place`：

```
place(P,L,C,T) :-
    put_piece( P, T, L, C ). 
```

我不知道你在用 form/forma 做什么。

# .net - DateTimePicker not selected in wpf

> ID：10625335
> 
> 赞同：0
> 
> 时间：2012-05-16T19:26:18.120
> 
> 标签：.net, wpf, ms-access

I have a database field of dateTime, I'm added a DateTimePicker Control into the window , I want that if not selected any date. Not enter anything into the database I tried the following code And it returns an error ,Does anyone have an idea? I am working on WPF, C # and Access DB

```
try
{
    string insert_query = "INSERT INTO dbo_tasks ( Date_Created, write_From, Task_To ) " +
                          "VALUES ('" + DP_date.SelectedDate + "', " + txt_from.SelectedValue + ", " + txt_to.SelectedValue + ")";

    con1.Open();
    OleDbCommand cmd = new OleDbCommand(insert_query, con1);
    cmd.ExecuteNonQuery();
}
catch (Exception)
{

    MessageBox.Show("");
}
con1.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:46:29.030

您需要添加逻辑，如果没有选择日期，那么。

“插入到 dbo_tasks (Date_Created, write_From, Task_To) VALUES ('" + null+ "', " + txt_from.SelectedValue + ", " + txt_to.SelectedValue + ")"

问题是如果没有选择日期，DP_date.SelectedDate 不会返回 null。

这将在 dbnull 中插入一个空值。Date 是一个接受 null 的 smalldatetime

插入 [test].[dbo].[DateRange] ([id] ,[date]) VALUES ('1000',null) GO

# php - mod_rewrite $_GET

> ID：10625338
> 
> 赞同：1
> 
> 时间：2012-05-16T19:26:36.983
> 
> 标签：php, regex, apache, mod-rewrite

我有一个`FrontController`期待两个`$_GET`参数：

```
controller
action 
```

对该站点的典型调用如下所示：

> [http://foo.bar/index.php?controller=start&action=register](http://foo.bar/index.php?controller=start&action=register)

我想要做的是允许用户通过以下网址访问该网站：

> [http://foo.bar/start/register](http://foo.bar/start/register)

我试过的：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(.+)/(.+)$ index.php?controller=$1&action=$2 [L,QSA]
</IfModule> 
```

由于这给了我 404 错误，它似乎不起作用。

`mod_rewrite`本身在服务器上启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:35:54.127

你为我发布的`.htaccess`作品：

```
// GET /cont1/action1

print_r($_GET);

/* output
Array
(
    [controller] => cont1
    [action] => action1
)
*/ 
```

您可能想尝试使用绝对路径`index.php`而不是相对路径。

无论如何，该正则表达式将导致：

```
// GET /cont1/action1/arg1

print_r($_GET);

/* output
Array
(
    [controller] => cont1/action1
    [action] => arg1
)
*/ 
```

你最好这样做：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php?url=$1 [QSA,L]
</IfModule> 
```

并让你`index.php`分成`$_GET['url']`控制器，动作，参数等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T18:02:37.323

让这个工作有两个部分。如果您正在使用 PHP 和 Apache，那么您的服务器上必须有可用的重写引擎。

在您的用户文件夹中放置一个以`.htaccess`这些内容命名的文件：

```
 RewriteEngine on
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule . index.php [L] 
```

然后`index.php`你可以使用`REQUEST_URI`server 变量来查看请求的内容：

```
<?php
$path = ltrim($_SERVER['REQUEST_URI'], '/'); 
echo $path;
?> 
```

如果有人要求`/start/register`，那么假设所有上述代码都在 html 根目录中，`$path`变量将包含`start/register`.

我将使用explode 函数`$path`作为`/`分隔符并将第一个元素拉为寄存器。

重写代码具有使用文件名和目录名的好处。

# .htaccess - .htaccess 'IF' in rewrite rule?

> ID：10625340
> 
> 赞同：0
> 
> 时间：2012-05-16T19:26:43.103
> 
> 标签：.htaccess

This is my rule:

```
RewriteRule ^([^/]+)(/.+)? /negocio$2.php?shopURL=$1 [L,QSA] 
```

If `$2` doesn't exist (URL doesn't have two slashes), I want to echo '/' instead of '.php'. So the condition becomes:

```
RewriteRule ^([^/]+)(/.+)? /negocio/?shopURL=$1 [L,QSA] 
```

How do I do this or archive the same result?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:34:14.340

很确定这就是 RewriteCond 的用途！

```
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/([^/]+)(/.+)$
RewriteRule ^([^/]+)(/.+)? /negocio$2.php?shopURL=$1 [L,QSA]

RewriteCond %{REQUEST_URI} ^/([^/]+)$
RewriteRule ^([^/]+)(/.+)? /negocio/?shopURL=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:29:51.307

用这个替换你的代码：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/?$ negocio/?shopURL=$1 [L,QSA]

RewriteRule ^([^/]+)(/.+?)/?$ negocio$2.php?shopURL=$1 [L,QSA] 
```

# ruby-on-rails - Reopen ActiveRecord class from an initializer

> ID：10625346
> 
> 赞同：0
> 
> 时间：2012-05-16T19:27:13.927
> 
> 标签：ruby-on-rails, activerecord

I want to add an association to my `Comment` class from a different location than `comment.rb`, e.g. in an initializer. Something like:

```
# in config/initializers/comment_setup.rb
class Comment < ActiveRecord::Base
  has_many :replies
end 
```

But when I try this (rails 2.3.4) I get an error that the has_many association does not exist.

What's the best way to re-open an ActiveRecord class from a location other than `app/models/blah.rb`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:31:45.030

看到您的评论后，我认为您的做法是错误的。看看多态关联，[http ://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

这是一种通过存储关联类型（即模型的类名）以及 ID 来将一个模型关联到多个模型的方法。这就是您在多个模型中重用关联的方式。

# php - 无法从定义了 id 的 xpath 中检索值

> ID：10625365
> 
> 赞同：2
> 
> 时间：2012-05-16T19:28:30.903
> 
> 标签：php, yql

我正在尝试从 yql 生成的 xml 中获取 id "yfs_a00_xauusd=x" 的数据。

我试过这个..但结果是

问：真[http://finance.yahoo.com/q?s=XAGUSD%3DX&ql=1](http://finance.yahoo.com/q?s=XAGUSD%3DX&ql=1) 613 600 27426 28.3600 我只想抢**28.3600**

```
<?php
session_start();
$yql_base_url = "http://query.yahooapis.com/v1/public/yql";  
$xpath='//*[@id="yfs_g00_xagusd=x"]';
$url = 'http://finance.yahoo.com/q?s=XAGUSD%3DX&ql=1';
$yql_query = "select * from html where url=$url and xpath = $xpath;";  
$yql_query_url = $yql_base_url . "?q=" . urlencode($yql_query);
$yql_query_url .= "&env=http://datatables.org/alltables.env";
$yql_query_url .= "&format=json";
$session = curl_init($yql_query_url);  
curl_setopt($session, CURLOPT_RETURNTRANSFER,true);      
$json = curl_exec($session);
$phpObj =  json_decode($json);  

if(!is_null($phpObj->query->results->span)){  
    foreach($phpObj->query->results->span as $result){  
        $_SESSION['price'] = $result;
  }  
}  
?>

<div> Ask:<?php echo $_SESSION['span'];?> </div> 
```

yahoo生成的XML是....

```
<query yahoo:count="1" yahoo:created="2012-05-16T19:00:25Z" yahoo:lang="en-US">
  <diagnostics>
    <publiclyCallable>true</publiclyCallable>
    <url execution-start-time="1" execution-stop-time="601" execution-time="600" proxy="DEFAULT">http://finance.yahoo.com/q?s=XAGUSD%3DX&ql=1</url>
    <user-time>613</user-time>
    <service-time>600</service-time>
    <build-version>27426</build-version>
  </diagnostics>
  <results><span id="yfs_g00_xagusd=x">28.3600</span></results>
</query> 
```

我真的很感谢你的帮助..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:02:16.370

您的查询已损坏，应引用这些值。

```
$yql_query = "select * from html where url='$url' and xpath='$xpath';"; 
```

或者更好的是，通过查询参数提供这些值。

```
$yql_query = "select * from html where url=@url and xpath=@xpath;";
$params = array(
     'q'      => $yql_query,
     'url'    => $url,
     'xpath'  => $xpath,
     'env'    => 'http://datatables.org/alltables.env',
     'format' => 'json',
);
$yql_query_url = $yql_base_url . '?' . http_build_query($params); 
```

* * *

一旦您让 YQL 返回您真正想要的结果，您正在寻找的价格将可用。

```
$phpObj->query->results->span->content 
```

查看[运行示例](http://codepad.viper-7.com/0STEdA)。

# drawing - Cairo 与 GDK 有什么关系？

> ID：10625367
> 
> 赞同：4
> 
> 时间：2012-05-16T19:28:44.560
> 
> 标签：drawing, cairo, gdk, x11, drawing2d

GDK 库的功能到底是什么？ Cairo 是如何适应的？它们是竞争技术还是互补技术？其中一个是否以任何方式依赖于另一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-11T12:42:53.880

**TL;博士：**

在最近的版本中，GDK 是 GTK+ 的平台抽象层。它还为 Cairo 提供了一些平台集成（例如用于显示使用 Cairo 创建的图像），但在其他方面独立于它。

**更长的版本：**

GDK 最初是作为[Xlib](https://en.wikipedia.org/wiki/Xlib)的包装器，它是 X Window 系统的客户端库。它支持 GTK+ 所需的 X Windows API 的所有部分，包括绘图操作。

当 GTK+ 被移植到其他窗口系统（如 Windows）时，GDK 演变成一个平台抽象层。后来发现，从 Xlib“继承”的绘图 API 是有问题的——它使移植变得困难，并且受到限制（例如，对透明度的支持很少）。因此，GDK 的绘图功能已被弃用，并在 GTK+ 3 中被删除（请参阅[Migrating from GTK+ 2.x to GTK+ 3: Use cairo for drawing](https://developer.gnome.org/gtk3/stable/gtk-migrating-2-to-3.html)）。

所以 GDK 一开始是作为一个平台抽象层，包括一个绘图后端。在最近的版本中，Cairo 是 GTK+ 使用的绘图后端，GDK 与 Cairo 并存，用于处理窗口创建和输入处理等平台方面的问题。

GDK 有一些使用 Cairo 的功能，但这些只是为了允许与 Cairo 互操作。例如，`gdk_cairo_create ()`允许您为允许使用 Cairo 绘制到该窗口的窗口创建 Cairo 表面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:32:43.897

Cairo 是 gdk 使用的绘图后端。

# java - 用于读取电子邮件和创建 JIRA 票证的 Java 守护程序？

> ID：10625368
> 
> 赞同：0
> 
> 时间：2012-05-16T19:28:49.823
> 
> 标签：java, jakarta-mail, daemon, jira

所以我需要的基本上是创建一个从命令行运行的java程序，并将继续运行，直到我决定停止它。该程序的目标是读取来自特定电子邮件地址的电子邮件并使用电子邮件的内容创建 JIRA 票证。

IE：电子邮件的主题将是标题。身体将被描述。ETC...

我对如何设计如何做到这一点感到困惑。我知道我可以使用 JavaMail 来访问电子邮件，对吗？然后我只需要解析电子邮件。但除此之外，我对如何制作 JIRA Ticket 有点困惑

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:40:24.413

您的问题是[esb](/questions/tagged/esb "显示标记为“esb”的问题")的理想用例，例如[mule](/questions/tagged/mule "显示标记为“骡子”的问题")或[spring-integration](/questions/tagged/spring-integration "显示标记为“弹簧集成”的问题")。基本上，这些[eip](/questions/tagged/eip "显示标记为“eip”的问题")框架提供了您只需要连接的所有构建块。

首先，您需要定义[邮件入站](http://static.springsource.org/spring-integration/reference/htmlsingle/#mail)。该组件将自动连接到邮件收件箱并获取所有新邮件。

然后定义从电子邮件到[json](/questions/tagged/json "show questions tagged 'json'")对象的[转换。](http://static.springsource.org/spring-integration/reference/htmlsingle/#messaging-transformation-chapter)[最后使用HTTP outbound](http://static.springsource.org/spring-integration/reference/htmlsingle/#http)发布该对象。您可以使用API 方法在 JIRA 中创建票证。[`/rest/api/2/issue`](http://docs.atlassian.com/jira/REST/latest/#id161572)

几乎无需编码即可实现整个工作流程。当然，您可以手动完成所有操作（使用[javamail](/questions/tagged/javamail "显示标记为“javamail”的问题")和[httpclient](/questions/tagged/httpclient "显示标记为“httpclient”的问题")），但是线程、错误处理和重试取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:38:53.027

对于未来 - 如果您对发送的请求等感到困惑 - 请使用 Google Chrome。

按`Ctrl+Shift+I`-> 网络并提出请求。如果您需要先登录等。它是相同的。

对于处理 HTTP 请求（POST、GET 等），我建议使用[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)或者如果您需要使用 JavaScript [HtmlUnit](http://htmlunit.sourceforge.net/)。

所以答案是这样的： - 跟踪通过 Web 浏览器执行某些操作时发出的请求 - 使用 HttpClient 或 HtmlUnit 在 Java 代码中实现相同的请求

# python - 为什么当我使用 HttpResponse 输出美丽的汤时返回的是 ascii 代码而不是实际字符

> ID：10625376
> 
> 赞同：1
> 
> 时间：2012-05-16T19:29:20.980
> 
> 标签：python, django, django-views, beautifulsoup, httpresponse

我正在从存储目录中读取一个 html 文件，用漂亮的汤做一些修改，然后使用 HttpResponse 输出结果。我的问题是某些字符（例如 <> 符号）作为 ascii 代码而不是符号返回，例如 < 而不是 <

为了消除我使用 BeautifulSoup 进行更改的任何机会，我将其简化为基础。这有效：

```
file = default_storage.open(fileLocation, 'r')
html = file.read()

HttpResponse(html) 
```

这不会：

```
file = default_storage.open(fileLocation, 'r')
html = file.read()
soup = BeautifulSoup(html)

HttpResponse(str(soup)) 
```

这绝不代表我对此的唯一尝试。我梳理了 BeautifulSoup 文档并尝试了几种不同的编码方法，但结果相同。

# python - 在python中使相对路径成为绝对路径

> ID：10625378
> 
> 赞同：2
> 
> 时间：2012-05-16T19:29:22.320
> 
> 标签：python, web-crawler, web-scraping

我想用python爬取网页，问题是相对路径，我有以下函数可以对网页中的url进行规范化和去关联化，我无法实现去关联化功能的一部分。有任何想法吗？：

```
def normalizeURL(url):
    if url.startswith('http')==False:
        url = "http://"+url
    if url.startswith('http://www.')==False:
        url = url[:7]+"www."+url[7:]
    return url

def deRelativizePath(url, path):
    url = normalizeURL(url)

    if path.startswith('http'):
        return path
    if path.startswith('/')==False:
        if url.endswith('/'):
            return url+path
        else:
            return url+"/"+path
    else:
        #this part is missing 
```

问题是：我不知道如何获取主 url，它们可以有多种格式：

```
http://www.example.com
http://www.example.com/
http://www.sub.example.com
http://www.sub.example.com/
http://www.example.com/folder1/file1 #from this I should extract http://www.example.com/ then add path
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:32:24.730

我建议您考虑[`urlparse.urljoin()`](http://docs.python.org/library/urlparse.html#urlparse.urljoin)为此使用：

> 通过将“基本 URL”( `base`) 与另一个 URL ( `url`) 组合来构造一个完整的（“绝对”）URL。非正式地，这使用基本 URL 的组件，特别是寻址方案、网络位置和（部分）路径，以提供相对 URL 中缺少的组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:31:44.443

`from urlparse import urlparse`

然后解析成各自的部分。

# qt - GDB 无法在 NetBeans 7.1.1 上运行 (0xc0000135)

> ID：10625379
> 
> 赞同：1
> 
> 时间：2012-05-16T19:29:31.427
> 
> 标签：qt, netbeans, gdb

问题：我有一个 C++ Qt 项目，它在我点击“运行”时运行，在我手动执行输出可执行文件时运行，但不会在 NetBeans 中使用 GDB 运行。在 NetBeans 中单击“调试主项目”后，我收到消息“在启动程序期间退出，代码为 0xc0000135”。

我有调试器日志：

```
=thread-group-added,id="i1"
~"GNU gdb (GDB) 7.4\n"
~"Copyright (C) 2012 Free Software Foundation, Inc.\n"
~"License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\n"
~"This GDB was configured as \"i686-pc-mingw32\".\nFor bug reporting instructions, please see:\n"
~"<http://www.gnu.org/software/gdb/bugs/>.\n"
&"C:\\\\Users\\\\Rafael Andreatta/.gdbinit: No such file or directory.\n"
(gdb) 
2-list-features
3-gdb-set print repeat 0
4-gdb-set backtrace limit 1024
5-gdb-set print elements 0
6-file-symbol-file "B:/Dropbox/Projects/rafaame/FileSync/dist/Debug/MinGW-Windows/FileSync"
7-file-exec-and-symbols  "B:\\Dropbox\\Projects\\rafaame\\FileSync\\dist\\Debug\\MinGW-Windows\\FileSync"
2^done,features=["frozen-varobjs","pending-breakpoints","thread-info","data-read-memory-bytes","breakpoint-notifications","ada-task-info"]
(gdb) 
3^done
(gdb) 
4^done
(gdb) 
5^done
(gdb) 
6^done
(gdb) 
7^done
(gdb) 
8-file-list-exec-source-file
9cd B:\Dropbox\Projects\rafaame\FileSync
10-exec-arguments 
11set environment Path=B:\Synced\Applications\Development\Cygwin\bin;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;B:\Synced\Applications\Development\Cygwin\bin;B:\Synced\Applications\Development\SDKs\jdk1.7.0_03\bin;B:\Synced\Applications\Development\SDKs\QtSDK\Desktop\Qt\4.8.0\mingw\bin;B:\Synced\Applications\Development\Clients\PrivateShell;
12-break-insert -f "B:/Dropbox/Projects/rafaame/FileSync/DebugHandler.cpp:29"
8^done,line="21",file="../mingw/main.c",macro-info="0"
(gdb) 
13-break-insert -t _start
&"cd B:\\Dropbox\\Projects\\rafaame\\FileSync\n"
~"Working directory B:\\Dropbox\\Projects\\rafaame\\FileSync.\n"
9^done
(gdb) 
10^done
(gdb) 
&"set environment Path=B:\\Synced\\Applications\\Development\\Cygwin\\bin;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;B:\\Synced\\Applications\\Development\\Cygwin\\bin;B:\\Synced\\Applications\\Development\\SDKs\\jdk1.7.0_03\\bin;B:\\Synced\\Applications\\Development\\SDKs\\QtSDK\\Desktop\\Qt\\4.8.0\\mingw\\bin;B:\\Synced\\Applications\\Development\\Clients\\PrivateShell;\n"
11^done
(gdb) 
12^done,bkpt={number="1",type="breakpoint",disp="keep",enabled="y",addr="0x00403fcb",func="DebugHandler::messageOutputLog(QtMsgType, char const*)",file="DebugHandler.cpp",fullname="B:\\Dropbox\\Projects\\rafaame\\FileSync\\DebugHandler.cpp",line="29",times="0",original-location="B:/Dropbox/Projects/rafaame/FileSync/DebugHandler.cpp:29"}
(gdb) 
13^error,msg="Function \"_start\" not defined."
(gdb) 
14-break-insert -t main
14^done,bkpt={number="2",type="breakpoint",disp="del",enabled="y",addr="0x00404ab4",func="main",file="../mingw/main.c",line="30",times="0",original-location="main"}
(gdb) 
15-exec-run
&"warning: Warning: Failed to open TTY /dev/pty0, error 0x3.\n"
=thread-group-started,id="i1",pid="3928"
=thread-created,id="1",group-id="i1"
~"[New Thread 3928.0x27d8]\n"
15^running
*running,thread-id="all"
(gdb) 
=thread-exited,id="1",group-id="i1"
=thread-group-exited,id="i1"
15^error,msg="During startup program exited with code 0xc0000135."
(gdb) 
```

Windows 中的 PATH 环境变量是

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;%SystemRoot%\system32;
%SystemRoot%;
%SystemRoot%\System32\Wbem;
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;
B:\Synced\Applications\Development\SDKs\jdk1.7.0_03\bin;
B:\Synced\Applications\Development\SDKs\QtSDK\Desktop\Qt\4.8.0\mingw\bin;
B:\Synced\Applications\Development\Clients\PrivateShell;
B:\Synced\Applications\Development\MinGW\bin 
```

有没有人有同样的问题并修复？

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:24:57.107

**我很长时间**没有接触 C++，但我今天遇到了类似的问题。事实证明，有些库没有与可执行文件链接。我通过添加来修复它

```
-static-libgcc -static-libstdc++ 
```

到编译器选项（Makefile 中的 CXXFLAGS）

# java - 通过java文件批量传递参数

> ID：10625384
> 
> 赞同：0
> 
> 时间：2012-05-16T19:30:02.317
> 
> 标签：java, batch-file, osgi

我正在尝试运行 java 文件的控制台并将一些命令发送到该控制台，**而不**使用外部文件。

例如

`java -jar "D:AndroidProjects\eclipse-SDK-3.7-win32\eclipse\plugins\org.eclipse.osgi_3.7.2.v20120110-1415.jar" -console < ss.txt`

有人知道如何将参数传递给java文件控制台吗？

[http://img850.imageshack.us/img850/2273/41496357.png](http://img850.imageshack.us/img850/2273/41496357.png)

编辑：我认为我对自己的解释不够好。`org.eclipse.osgi_3.7.2.v20120110-1415.jar`不是我开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:21:01.960

换一种说法，您想在启动时自动发出一些 OSGi 控制台命令，对吗？可能您的主要目标是指定要加载的捆绑包的 URL？

您在控制台上所做的一切也可以通过编程方式完成。您应该使用可以执行您希望的启动操作的激活器创建一个 jar。

或者，如果在加载任何其他包之前需要配置，那么编写自己的 main() 执行一些任务然后启动框架包并不难。

特定于 Eclipse 的替代方法是创建 Equinox 内核将读取的 config.ini 文件。config.ini 可以列出所有启动包。

在我看来，一个更友好的选择是 Apache Karaf 容器。它有一个非常好的手动添加捆绑包的 Web 控制台，以及一些自动添加捆绑包的便捷方法（startup.properties、部署文件夹和 Karaf features.xml）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:39:49.163

您的应用程序的主要方法可以从数组 args[] 中读取它们

# ruby-on-rails - 在工厂女孩中设置具有相同值的多个列

> ID：10625387
> 
> 赞同：0
> 
> 时间：2012-05-16T19:30:19.573
> 
> 标签：ruby-on-rails, ruby, factory-bot

```
Factory.define(:player) do |u|
    u.association(:owner), :factory => :user
    u.association(:updater), :factory => user
end 
```

我可以重写上面的定义，这样我就可以将所有者和更新者的值初始化为相同，而无需在调用 create 时显式传递它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:40:37.310

```
Factory.define(:player) do |uu|
  uu.association(:owner), :factory => :user
  uu.association(:updater), { |player| player.owner }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:54:44.243

`after_create`在定义关联时，我经常发现使用or`after_build`钩子之一更容易：

```
Factory.define(:player) do |u|

  after_build do |player|
    user = FactoryGirl.create :user
    player.owner = user
    player.creator = user
  end

end 
```

我通常也尝试设置我的工厂，以便无论我是在构建（实例化）还是创建（实例化和保存）它们都可以工作，但是 ActiveRecord 对于你在构建时如何设置关联有点挑剔，所以我在这个例子中使用了 create 。

# .net - System.Net.Mail.SMTPException：发送邮件失败

> ID：10625391
> 
> 赞同：0
> 
> 时间：2012-05-16T19:30:30.510
> 
> 标签：.net, email, smtp, gmail

我曾多次尝试使用以下代码发送附件。我使用了端口 25、465、467 和 587，但都导致了相同的错误。我已经浏览了具有相同问题或接近相同问题的其他帖子，并尝试了许多涉及的修复程序，但没有一个对我有用。帮助！

```
try
{
    var smtp = new SmtpClient
    {
        Host = "smtp.gmail.com",
        Port = 587,
        EnableSsl = true,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        UseDefaultCredentials = false,
        Credentials = new System.Net.NetworkCredential("thisisjustatestokay1@gmail.com", "xxxxxxxxxxxx")
    };
    using (var message = new MailMessage("thisisjustatestokay1@gmail.com", "thisisjustatestokay1@gmail.com")
        {
            Subject = "Boom Baby!",
            Body = "The stuff!"
        })
    {
        smtp.Send(message);
    }
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:39:27.537

The code looks good, but I modified it as shown below, and it worked flawlessly.

```
protected void Btn_SendMail_Click(object sender, EventArgs e){

  var smtp = new SmtpClient {
    Host = "smtp.gmail.com",
    Port = 587, 
    EnableSsl = true, 
    DeliveryMethod = SmtpDeliveryMethod.Network, 
    UseDefaultCredentials = false, 
    Credentials = new System.Net.NetworkCredential("someone@gmail.com","**********")
  };

  MailMessage mailObj = new MailMessage("someone@gmail.com", txtTo.Text, txtSubject.Text, txtBody.Text);

  smtp.Send(mailObj);

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-04T07:04:19.967

**`I have tried repeatedly to send an attachment using the following code`**

缺少向电子邮件添加附件的代码。

```
System.Net.Mail.Attachment attachment;
attachment = new System.Net.Mail.Attachment("path of the file to be attached");
mail.Attachments.Add(attachment); 
```

# macos - QuickLook 插件没有引起注意

> ID：10625394
> 
> 赞同：2
> 
> 时间：2012-05-16T19:30:45.933
> 
> 标签：macos, quicklook

我有一个 QuickLook 插件，我已成功调试并在该`qlmanage`工具下工作。我已将插件添加到我的应用程序中，位于`Contents/Library/QuickLook/`，我还尝试将其放入`/Library/QuickLook`. 但是操作系统没有注意到我的插件。

Finder 不会显示我的文件的缩略图，`qlmanage -m`也不会列出与我的插件或文件类型相关的任何内容。

我尝试运行`qlmanage -r`以重置 QL 缓存，然后启动我的应用程序以尝试让操作系统注意到那里有一个 QL 插件。

我已将所有必需的文档类型和 UTI 信息放在我的 Info.plist 中。我会错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:19:00.950

您可能想使用`plutil -lint`我自己的免费[InfoPlistChecker](http://www.jwwalker.com/pages/infoplistchecker.html)检查生成器的 Info.plist 。

# iphone - 在 cellForRowAtIndex 路径的自定义表格单元格中的 UIScrollView 不起作用

> ID：10625396
> 
> 赞同：0
> 
> 时间：2012-05-16T19:30:54.170
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

我正在尝试`UIScrollView`在“UITableView”的每个单元格中实现一个。我基于 Apple 的自定义 Scrollview 项目编写了我的代码：[https ://developer.apple.com/library/ios/#samplecode/Scrolling/Listings/ReadMe_txt.html](https://developer.apple.com/library/ios/#samplecode/Scrolling/Listings/ReadMe_txt.html)

每个表格单元格`UIScrollView`滚动浏览一组标签，这些标签在`cellForRowAtIndexPath`方法中被初始化。每个标签的文本在初始化后设置为等于数组中的字符串。

一切正常，直到我向下滚动到第 4 个表格单元格。此`UIScrollView`单元格中的 与第一个单元格具有相同的标签。相同的前 3 组标签或前 3 个滚动视图在前 3 个单元格之后不断重复。奇怪的是，当我在`label.text`设置后记录它时，输出显示`label.text`了相应单元格中应该显示的正确内容。

```
- (void)layoutScrollLabels: (float)arrayCount
{
UIView *view = nil;
NSArray *subviews = [cell.popularLinkScrollView subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UILabel class]] && view.tag >= 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

[cell.popularLinkScrollView setContentSize:CGSizeMake((arrayCount * kScrollObjWidth),     [cell.popularLinkScrollView bounds].size.height)];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Custom Cell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSDictionary *dictionary = [parseDataArray objectAtIndex:indexPath.row];
NSArray *popularLinkTitleArray = [dictionary objectForKey:@"popularLinkTitleArray"];

cell.popularLinkScrollView.clipsToBounds = YES;

kScrollObjHeight = cell.popularLinkScrollView.frame.size.height;
kScrollObjWidth = cell.popularLinkScrollView.frame.size.width;

NSUInteger i;
for (i = 0; i < popularLinkTitleArray.count; i++)
{
    NSString *string = [NSString stringWithFormat:@"%@", [popularLinkTitleArray objectAtIndex: i]];
    UILabel *label = [[UILabel alloc] init];
    label.text = [NSString stringWithFormat:@"%@", string];
    label.backgroundColor = [UIColor clearColor];
    label.numberOfLines = 5;
    NSLog(@"%@", label.text);

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect rect = label.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    label.frame = rect;
    label.tag = i;  // tag our images for later use when we place them in serial fashion
    [cell.popularLinkScrollView addSubview:label];
}

[self layoutScrollLabels:popularLinkTitleArray.count];
}
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:56:54.777

您不应将标签作为子视图添加到 cellForRowAtIndexPath 中的 PopularLinkScrollView。如果标签计数需要是动态的，请在 cellForRowAtIndexPath 中的 for 循环之前尝试此代码。

```
for (UIView* subView in cell.popularLinkScrollView.subviews)
    [subView removeFromSuperview]; 
```

# java - 强制文件已经存在的java文件选择器

> ID：10625400
> 
> 赞同：3
> 
> 时间：2012-05-16T19:31:24.090
> 
> 标签：java, swing, jfilechooser

经过一番谷歌搜索后，我没有看到这个出现太多。是否有一些“通用”方式强制用户选择“已经存在”的文件

我可以添加类似 [http://coding.derkeiler.com/Archive/Java/comp.lang.java.help/2004-01/0302.html](http://coding.derkeiler.com/Archive/Java/comp.lang.java.help/2004-01/0302.html)或[带有确认对话框的 JFileChooser 之](https://stackoverflow.com/questions/3651494/jfilechooser-with-confirmation-dialog)类的内容，但有一些规范的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:40:33.033

首先，您需要检查您更好的选择是 chooser.showOpenDialog 还是 showSaveDialog

保存对话框将让您选择指定路径中的任何名称，它可能是不存在的文件，但打开将始终接受所选文件..您可以安全地添加 file.exists() 以确保文件存在。您还可以更改按钮的文本.. 对话框.. 等..

```
JFileChooser chooser = new JFileChooser();
    chooser.setApproveButtonText("Save");
    int result = chooser.showOpenDialog(null);
    if(result == JFileChooser.APPROVE_OPTION){
        File selection = chooser.getSelectedFile();
        //verify if file exists
        if(selection.exists()){
            //you can continue the code here or call the next method or just use !exists and behavior for wrong file
        }else{
            //System.exit(0), show alert.. etc
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:36:07.890

听起来你想要一个“打开”行为，但一个确认按钮显示“保存”而不是“打开”。

您可以通过此方法执行此操作：http: [//docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#showDialog%28java.awt.Component,%20java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#showDialog%28java.awt.Component,%20java.lang.String%29)

为approveButtonText 参数传入“Save”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T19:46:03.400

就这么简单：

```
JFileChooser fc = new JFileChooser();
while(true)
{
    if(fc.showSaveDialog(null) == JFileChooser.APPROVE_OPTION &&
      !fc.getSelectedFile().exists())
        JOptionPane.showMessageDialog(null, "You must select an existing file!");
    else break;
} 
```

# php - Else 语句永远不会运行

> ID：10625403
> 
> 赞同：0
> 
> 时间：2012-05-16T19:31:44.040
> 
> 标签：php, if-statement

我遇到了一些麻烦，我的最后一个`else`语句永远不会运行，即使我知道第一个语句`if`最终会返回错误，有什么想法吗？

```
if ($productType == 'HSweat' || 'T Shirt') {
    if ($productType == 'HSweat') {
        if (!$queryResult) {
        }
    } elseif ($productType == 'T Shirt') {
        if (!$queryResult) {
        }
    }
} else {
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T19:33:01.570

```
if ($productType == 'HSweat' || 'T Shirt') { 
```

应该

```
if ($productType == 'HSweat' || $productType == 'T Shirt') { 
```

'T Shirt' 作为字符串将始终评估为 True

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:39:46.457

我建议使用`switch`：

```
switch( $productType ){
case 'HSweat':
     if (!$queryResult) {
         //Do something
     }
     break;
case 'T Shirt':         
     if (!$queryResult) {
         //Do something
     }
     break;
default:
     //Do something
     break;
} 
```

# javascript - 在咖啡脚本中将参数传递给带有“myarguments ...”的函数时出现问题

> ID：10625406
> 
> 赞同：0
> 
> 时间：2012-05-16T19:31:51.947
> 
> 标签：javascript, coffeescript, spine.js

我有一个这样的搜索模型（从[https://github.com/maccman/quora2](https://github.com/maccman/quora2)得到这个）

```
Spine = require('spine')

classMethods = 
  query: (params) ->
    @select (rec) ->
      rec.query params

instanceMethods =
  query: (params) ->
    attributes = @query_atts?() || @attributes()
    for key of attributes
      value = attributes[key]
      if value?.query?(params).length
        return true
      else if value && typeof value == "string"
        value = value.toLowerCase()
        return true if value.indexOf(params) != -1
    return false

class Search extends Spine.Class
  @include Spine.Events

Search.Model = 
  extended: ->
    @extend  classMethods
    @include instanceMethods

Search.include
  init: (models...) ->
    console.log('models: ', models)
    @models  = models
    @results = []

  query: (params) ->
    @clear()
    return unless params
    @params = params.toLowerCase()
    @models.forEach (model) =>
      console.log(typeof(model))
      continue until typeof(model) == 'undefined'
      results  = model.query(@params)
      @results = @results.concat(results)

    @trigger "change"

  clear: ->
    @results = []
    @trigger "change"

  each: (callback) ->
    @results.forEach(callback)

module.exports = Search 
```

和一个页面模型：

```
Spine = require('spine')

class Page extends Spine.Model
  @configure 'Page', 'title', 'description'

  @extend require('models/search').Model

  constructor: ->
    super

module.exports = Page 
```

我遇到的问题是，每当在我的控制器中实例化搜索时：

`Search.init(Page)`并记录init得到的参数我有页面作为第一个参数，然后我有4个未定义。

```
models:  [Page(title, description), undefined, undefined, undefined, undefined] 
```

这些是从哪里来的？当然它在 quora 中运行良好，如果我不在`models...`init 中使用它也会运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:57:40.017

你打电话时

```
Search.init 
```

调用该`Module.init`方法，[在 Spine 中定义如下](https://github.com/maccman/spine/blob/master/src/spine.coffee#L538)：

```
Module.init = Controller.init = Model.init = (a1, a2, a3, a4, a5) ->
  new this(a1, a2, a3, a4, a5) 
```

（注意`Spine.Class`= `Module`。）然后调用从[继承](https://github.com/maccman/spine/blob/master/src/spine.coffee#L80)`Search`的构造函数，它将所有这些参数转发给附加到原型的方法：[`Module`](https://github.com/maccman/spine/blob/master/src/spine.coffee#L80)`init``Search.include``Search`

```
constructor: ->
  @init?(arguments...) 
```

因此有四个未定义的参数（最初`a2`是 、`a3`、`a4`和`a4`）。

# c# - 测试其他属性代码中的属性

> ID：10625407
> 
> 赞同：6
> 
> 时间：2012-05-16T19:31:59.927
> 
> 标签：c#, reflection, custom-attributes

是否可以在另一个属性的代码中测试一个属性的存在？

假设您有以下类定义：

```
public class Inception {
    [Required]
    [MyTest]
    public int Levels { get; set; }
}
public class MyTestAttribute : ValidationAttribute {
    public override bool IsValid(object o){
        // return whether the property on which this attribute
        // is applied also has the RequiredAttribute
    }
} 
```

... MyTestAttribute.IsValid 是否可以确定 Inception.Levels 是否具有RequiredAttribute？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:36:27.517

在特定情况下 a`ValidationAttribute`是可能的，但您必须使用`IsValid`具有上下文参数的其他重载。上下文可用于获取包含类型，也可用于获取应用属性的属性的名称。

```
protected override ValidationResult IsValid(object value, 
  ValidationContext validationContext)
{
  var requiredAttribute = validationContext.ObjectType
    .GetPropery(validationContext.MemberName)
    .GetCustomAttributes(true).OfType<RequiredAttribute>().SingleOrDefault();
} 
```

# android - Android：不确定的水平进度（对话框）栏

> ID：10625409
> 
> 赞同：24
> 
> 时间：2012-05-16T19:32:14.237
> 
> 标签：android, android-dialog, android-progressbar

创建不确定的水平进度条的最佳方法是什么？如果我这样做，

```
 dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    dialog.setIndeterminate(true); 
```

我仍然得到底部的进度数字（百分比等）。在 ICS 上，我可以做到这一点，

```
 dialog.setProgressNumberFormat("");
    dialog.setProgressPercentFormat(new NumberFormat() {

        @Override
        public StringBuffer format(double value, StringBuffer buffer, FieldPosition field) {
            return new StringBuffer();
        }

        @Override
        public StringBuffer format(long value, StringBuffer buffer, FieldPosition field) {
            return new StringBuffer();
        }

        @Override
        public Number parse(String string, ParsePosition position) {
            return 0;
        }
    }); 
```

摆脱底部的数字，但这两种方法仅在 ICS 上可用。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-13T18:14:24.847

我们走吧——我刚刚找到它。:) android:indeterminateOnly="true" 是关键。

```
 <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:indeterminateOnly="true" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T12:09:44.813

我认为您可能应该将转轮模式用于不确定模式，因为水平进度条可能会误导用户，实际上该模式不是不确定的。

请查看[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)的文档 请注意，您可以尝试使用*Indeterminate Only模式。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T10:35:18.073

水平进度条显示从条形宽度的 0% 开始逐渐变宽并在条形宽度的 100% 处结束的水平进度条不是不确定的，因为它似乎正在结束，因此可以确定它的状态。

所以你可能不是在寻找一个不确定的进度条，而是一个确定的进度条，就像 buzeeg 指出的那样：http: [//developer.android.com/design/building-blocks/progress.html](http://developer.android.com/design/building-blocks/progress.html)。

# javascript - FB.Event.subscribe('edge.create', function()) 触发器适用于链接按钮，但不适用于链接框

> ID：10625410
> 
> 赞同：3
> 
> 时间：2012-05-16T19:32:20.097
> 
> 标签：javascript, facebook, sdk, facebook-like, xfbml

我创建了两个测试页面，一个带有 Facebook 链接按钮，一个带有链接框。当有人点击“喜欢”时，我希望触发一个图像像素，以便我们可以从 Web 服务器日志中获取它。

它适用于 Like 按钮，但由于某种原因不适用于 Like 框。两个 Like 插件都包含在 XFBML 版本中。

我在触发像素调用时使用的代码：

```
<div id="fb-root"></div>
<script type="text/javascript">
<!--

window.fbAsyncInit = function()
{
    FB.init({
        appId: '{{appId}}',
        status: true,
        cookie: true,
        xfbml: true 
    });

    FB.Event.subscribe('edge.create', function(){
        var tracking_pixel = new Image(1, 1);
        tracking_pixel.src = '{{image_pixel_url}}';
    });
};

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if(d.getElementById(id))
    {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));

// -->
</script> 
```

我还宣布：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

任何建议表示赞赏！

提前致谢。

/马库斯

# android - 是否可以使用设备专门运行一个应用程序？

> ID：10625413
> 
> 赞同：19
> 
> 时间：2012-05-16T19:32:26.680
> 
> 标签：android

我开发了一个应用程序，该应用程序专用于医院的平板电脑供患者使用。

现在我被要求将平板电脑的唯一功能作为我的应用程序，以防止个人或任何人使用它进行网页浏览、游戏或其他任何事情。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T19:36:42.197

市场上有提供“信息亭模式”式设备锁定的产品，您可以借此限制应用程序。

[Surelock](http://www.42gears.com/surelock/surelockandroid.html)

[SuperLockLite](https://play.google.com/store/apps/details?id=com.superkiosk.ospolice.superlocklite)

另请参阅此 Stackoverflow 帖子以进行类似讨论。

[Android 中的 Kiosk 模式](https://stackoverflow.com/questions/2068084/kiosk-mode-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T09:09:19.623

这是迄今为止我发现的信息亭模式的最佳解决方案 [http://thebitplague.wordpress.com/2013/04/05/kiosk-mode-on-the-nexus-7/](http://thebitplague.wordpress.com/2013/04/05/kiosk-mode-on-the-nexus-7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:42:13.000

android is a linux OS and you can create users with specific permission,

i never did this but I've seen it: [http://l4android.org/](http://l4android.org/)

I hope might help

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T20:09:29.227

例如，您可以创建自己的自定义 android 版本，以防止用户使用后退按钮或访问设置。如果应用程序崩溃，您必须注意重新启动应用程序。您可以覆盖主启动器，以使您的应用程序成为唯一可启动的应用程序。您想采取相同类型的“后门”，以防万一您想授予超级用户访问权限

# android - Android 应用屏幕尺寸不适合设备

> ID：10625427
> 
> 赞同：0
> 
> 时间：2012-05-16T19:33:13.093
> 
> 标签：android, xml, android-layout, layout, crash

我是开发新手，所以我不知道我做的对不对t 出现。所以我用谷歌搜索了一些信息并尝试了一切......这是layout/Main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:launcher="http://schemas.android.com/apk/res/com.android.launcher">
    <LinearLayout android:orientation="vertical" android:id="@id/LLImage" android:layout_width="fill_parent" android:layout_height="wrap_content" android:adjustViewBounds="true" android:minHeight="100.0dip"
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:launcher="http://schemas.android.com/apk/res/com.android.launcher">
        <RelativeLayout android:id="@id/drag_layer" android:layout_width="fill_parent" android:layout_height="370.0dip" android:adjustViewBounds="true" android:minHeight="100.0dip">
            <ImageView android:id="@id/imageViewContainer" android:layout_width="fill_parent" android:layout_height="370.0dip" android:src="@drawable/backgsammi" android:scaleType="matrix" android:adjustViewBounds="true" android:minHeight="100.0dip" />
            <ImageView android:id="@id/imageWatermark" android:visibility="invisible" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/watermark" android:layout_alignParentRight="true" />
        </RelativeLayout>
    </LinearLayout>
    <LinearLayout android:orientation="vertical" android:id="@id/mainLLauout" android:layout_width="fill_parent" android:layout_height="fill_parent"
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:launcher="http://schemas.android.com/apk/res/com.android.launcher">
        <LinearLayout android:gravity="center_horizontal" android:orientation="horizontal" android:background="@drawable/background" android:layout_width="fill_parent" android:layout_height="50.0dip"
          xmlns:android="http://schemas.android.com/apk/res/android">
            <ImageButton android:padding="0.0px" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/open" android:text="Select Picture" android:onClick="openGallery" />
            <ImageButton android:padding="0.0px" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/cat" android:text="Choose Cat" android:onClick="chooseCat" />
            <ImageButton android:id="@id/btnFlip" android:padding="0.0px" android:longClickable="true" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/rotate" android:onClick="rotateImage" />
            <ImageButton android:padding="0.0px" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/eraser" android:onClick="eraseImage" />
            <ImageButton android:id="@id/btnSave" android:padding="0.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/save" android:text="Save" android:onClick="saveToGallery" />
            <ImageButton android:padding="0.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="3.0dip" android:src="@drawable/help" android:text="Save" android:onClick="openHelp" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

我想这是因为“android:layout_height="370.0dip"” - 它应该更小。但是当我尝试在 Eclipse 上将其更改为“360”或“fill_parent”，签署 apk，在手机上安装并尝试打开应用程序时，它崩溃了。我错过了什么吗？我只是想让应用适合我的手机屏幕

抱歉英语不好和那个愚蠢的问题

```
 05-16 18:21:30.796: W/dalvikvm(11715): threadid=1: thread exiting with uncaught exception (group=0x40018560)
05-16 18:21:31.306: E/AndroidRuntime(11715): FATAL EXCEPTION: main
05-16 18:21:31.306: E/AndroidRuntime(11715): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.addacat.addacat/com.addacat.addacat.AddaCatActivity}: java.lang.ClassNotFoundException: com.addacat.addacat.AddaCatActivity in loader dalvik.system.PathClassLoader[/data/app/com.addacat.addacat-2.apk]
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1680)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.os.Looper.loop(Looper.java:130)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread.main(ActivityThread.java:3835)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at java.lang.reflect.Method.invokeNative(Native Method)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at java.lang.reflect.Method.invoke(Method.java:507)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at dalvik.system.NativeStart.main(Native Method)
05-16 18:21:31.306: E/AndroidRuntime(11715): Caused by: java.lang.ClassNotFoundException: com.addacat.addacat.AddaCatActivity in loader dalvik.system.PathClassLoader[/data/app/com.addacat.addacat-2.apk]
05-16 18:21:31.306: E/AndroidRuntime(11715):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-16 18:21:31.306: E/AndroidRuntime(11715):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1672)
05-16 18:21:31.306: E/AndroidRuntime(11715):    ... 11 more 
```

一个

```
package com.addacat.addacat;

import android.app.Activity;
import android.os.Bundle;

public class AddaCatActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // TODO Auto-generated method stub
    }

} 
```

这就是 AddaCatActivity.java 上的一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:05:18.390

我使用 20px x 20px 图像代替您的图像在一个虚拟应用程序中测试了您的布局。当我将这些高度从 370dip 更改为 fill_parent 时，它不会崩溃。

当应用程序连接到 Eclipse 时，您确实需要让应用程序在模拟器上或手机上运行。您需要能够看到 LogCat。它可能会让您对可能的原因有一个很好的了解。

* * *

编辑：

现在您已经解决了应用程序崩溃问题，您应该查看[此](http://developer.android.com/resources/tutorials/views/index.html)页面。它提供了一些如何构建布局的示例。

现在，你有：

```
<LinearLayout>
  <LinearLayout>  // Unused
    <RelativeLayout>
      <ImageView />
      <ImageView />
    </RelativeLayout>
  </LinearLayout>

  <LinearLayout>  // Unused
    <LinearLayout>
      <ImageButton />
      <ImageButton />
      <ImageButton />
      <ImageButton />
      <ImageButton />
      <ImageButton />
    </LinearLayout>
  </LinearLayout>
</LinearLayout> 
```

此时，至少有两个 LinearLayout 块看起来未使用。这是一个布局，可以满足我的想法：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <RelativeLayout 
    android:id="@+id/drag_layer"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:adjustViewBounds="true"
    android:minHeight="100.0dip" >

    <ImageView
      android:id="@+id/imageViewContainer"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:src="@drawable/backgsammi"
      android:scaleType="fitCenter"
      android:adjustViewBounds="true" />

    <ImageView
      android:id="@+id/imageWatermark"
      android:visibility="invisible"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/watermark"
      android:layout_alignParentRight="true" />

  </RelativeLayout>

  <LinearLayout
    android:orientation="horizontal"
    android:id="@+id/mainLLauout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0" >

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/open" />

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/cat" />

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/rotate" />

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/eraser" />

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/save" />

    <ImageButton
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/help" />

  </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:03:19.040

**关于像素大小：** 1dp 仅在 mdpi 上等于 1px。在 ldpi 上， 1dp=(1+1/3)px 。那是因为：mdpi 是 160dpi，ldpi 是 120dpi。

这意味着如果您的屏幕是 240x320 并且您在“布局”文件夹中使用 dp 的尺寸（如果没有专门编写，则用于 mdpi），370dp ~493 像素。这超过了您的屏幕宽度或高度。

阅读此内容以获取更多信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

**关于错误本身：**，似乎该应用找不到您希望启动的活动，可能是因为您重命名了它，或者您将它放在了不同的位置。

您需要确保您的活动在具有正确路径的清单上。为了完全确定路径没问题，请将活动的完整路径放在清单上，而不是以“。”开头。然后是活动的名称。例如：

```
<activity android:name="com.my_awesome_app.MyAwesomeActivity" ... 
```

# php - 与 R 中的这些行等效的 PHP 是什么？

> ID：10625437
> 
> 赞同：3
> 
> 时间：2012-05-16T19:33:41.977
> 
> 标签：php, r

我正在尝试将脚本从 R 移植到 PHP，但不确定第 3 行和第 4 行（[取自此处讨论的较大函数](https://stackoverflow.com/questions/8708048/position-of-the-sun-given-time-of-day-latitude-and-longitude/8764866#8764866)）在做什么。看起来像逻辑运算和数组定义。有人可以给我PHP中的等价物吗？

```
cosAzPos <- (0 <= sin(dec) - sin(el) * sin(lat))
sinAzNeg <- (sin(az) < 0)
az[cosAzPos & sinAzNeg] <- az[cosAzPos & sinAzNeg] + twopi
az[!cosAzPos] <- pi - az[!cosAzPos] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:15:20.683

我认为它看起来像：

```
if (0 < sin($dec) - sin($el) * sin($lat)) {
  if(sin($az) < 0)
    $az = $az + $twopi;
} 
else {
  $az = $pi - $az;
} 
```

仅适用于第 3-4 行：

```
if ($cosAzPos && $sinAzNeg) {
  $az = $az + $twopi;
}
elseif (!$cosAzPos) {
  $az = $pi - $az;
}
else {
  // leave $az value
} 
```

根据我在参考帖子中找到的commet。但我不确定访问浮动索引

# xml - Spotify Web Apps - 将结果限制为 50 而不是默认的 100

> ID：10625438
> 
> 赞同：1
> 
> 时间：2012-05-16T19:33:42.123
> 
> 标签：xml, spotify

Spotify Web XML/JSON（我正在使用 XML）使您默认为 100。我可以在我调用的 xml 文件中添加一些内容以将结果限制为另一个数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:14:13.643

No, there's no way to change the `itemsPerPage` property.

There's no public roadmap for the Web API, but there hasn't been any (significant) changes the past couple of years, so it's not very likely that this will change any time soon.

# iphone - iphone自定义表格单元格，UILabel需要可滚动

> ID：10625443
> 
> 赞同：1
> 
> 时间：2012-05-16T19:34:17.350
> 
> 标签：iphone, scroll, uilabel, xcode4.3, longtext

我有一个带有 UILabel 的自定义表格单元格。我想要的可以通过两种方式完成。

1- 找到包含长文本的标签的高度并设置 rowHeight 以使整个文本可见。

2- 使 UILabel 可滚动，以便用户可以用手上下移动文本以阅读整个字符串。

你能建议我做哪一个吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:51:45.353

我建议在大多数情况下不要使用第一个选项，因为这取决于字符串的长度，它可能会使表格单元格变大。

至于第二个选项：您应该能够将 UIScrollView 作为子视图添加到表格视图单元格中。滚动视图可以包含完整大小的文本标签，并允许您在固定大小的单元格中滚动它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:56:46.583

如果您的文本是静态的并且不会动态更改，则应使用第一个选项。您可以缓存结果，因此无论何时刷新表格，您都不必重新计算文本。您可以使用[sizeWithFont:constrainedToSize:lineBreakMode](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aconstrainedToSize%3alineBreakMode%3a)来计算实际的文本大小。

对于行高：您应该使用[tableView:heightForRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)而不是 rowHeight，因为 rowHeight 会改变所有行的高度 - 而不仅仅是单个单元格。

就表格内的可滚动文本视图而言：在我看来 - 它看起来像是应用程序中的廉价解决方案，并且有点业余。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:05:09.697

> 我们有任何关于如何做到这一点的例子吗？我是 iphone 新手，抱歉打扰了。– 帕诺斯 9 分钟前

```
UIScrollView *scroller = [[UIScrollView alloc]initWithFrame:cell.frame];
scroller.contentSize = CGSizeMake(280, 100);
UILabel *test = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 20)];
test.text = @"This would be your label.";
[scroller addSubview:test];
[cell addSubview:scroller]; 
```

这将在表格单元“单元格”中创建一个 UIScrollView 和一个标签。这会起作用，但我认为这不是最好的解决方案，因为它将是已经提供滚动的 tableview 内的滚动视图。我的建议是调整行高。

# windows - Windows 上的 gvim：tempname() 指向的文件不存在

> ID：10625444
> 
> 赞同：0
> 
> 时间：2012-05-16T19:34:19.277
> 
> 标签：windows, vim

我正在尝试使用向 sas 发出命令的 vim 脚本，当我尝试运行脚本时收到错误消息

“无法打开文件..path../AppData/Local/Temp/..临时文件..”

这是 :tempname() 返回的路径和文件名

导航到 appdata 临时文件目录后，临时文件不存在。

我尝试使用 set backupdir=~\tmp （我创建的目录）手动更改备份目录，但这不会更改 :tempname() 的返回值，也不会实际存在临时文件。

两个问题，1\. 有没有办法确保 vim 正在编写脚本似乎需要的文件 2\. 我可以重写脚本以避免需要临时文件吗？（只是将实际文件的路径传递给sas？）

脚本的相关部分是

```
 let returntxt = system("\"" .
    \ shellescape("C:\\Program\ Files\\SAS\\SASFoundation\\9.2\\sas.exe") .
    \ "\ -nosplash" . "\ -sysin" . "\ " .
    \ shellescape(expand("%:p")) .  "\"") 

" Shows the return messages from the SAS commandline (may be useful
" if no log produced)
:echo "*** SAS commandline: " . returntxt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:21:39.960

选项 'backupdir' 包含生成备份文件的目录列表，它与临时目录无关（除了它*取决于*它所在的位置，反之则不然）。您应该尝试使用`%TMP%`或`%TEMP%`环境变量，无论是从 vim 使用

```
let $TMP=expand('~/tmp') 
```

或在启动 vim 之前（不知道如何在 Windows 上执行此操作）。在 wine 下使用`let $TMP`确实对我有用，但仅适用于现有的临时目录。

请注意，您的`system()`调用相当奇怪：`shellescape()`应该已经添加了所有需要的引号，以便不需要环绕`"\""`（如果不需要，您应该正确配置 'shell*' 选项）。您也不需要转义空格：`"\ "`并且`" "`是完全相同的字符串。

关于第二个问题：您可以尝试将文件内容作为第二个参数传递给`system()`，但如果文件可能包含 NULL，则它不起作用。

# javascript - 更改集合 textareas 的 css 最大宽度

> ID：10625445
> 
> 赞同：0
> 
> 时间：2012-05-16T19:34:20.587
> 
> 标签：javascript, jquery, css

我有一组使用选择器的文本区域。然后我正在迭代并尝试根据其当前宽度为其设置最大宽度（它们并不完全相同，这就是我这样做的原因）。但是，我无法访问数组中元素的 .css 属性，我猜是因为它们是 HTMLTextAreaElements？有没有办法使这项工作或更好的方法来解决这个问题？

我无法静态设置最大宽度，因为这是一个通用控件，可用于各种页面并具有各种不同的尺寸。

```
$(function () {
var a = $('.myTextAreaCssClass');
for(var i = 0;i < a.length; i++) {
var w = a[i].css(width);
a[i].css('max-width',w);
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:38:34.160

我认为你应该使用 $.each。尝试这个，

```
$(function () {
   var a = $('.myTextAreaCssClass');
   a.each (function () {
      $(this).css('max-width', $(this).css('width'));
   });
}); 
```

或者您可以使用下面给出的 css 函数参数，

```
$(function () {
   var a = $('.myTextAreaCssClass');
   a.css ('max-width', function () {
      return $(this).css('width');
   });
}); 
```

**编辑：** 我刚刚意识到这实际上只是将最大宽度设置为我在我的 css 文件中指定的宽度，我需要的是以像素为单位的宽度 - jas

尝试这个，

```
$(function () {
   var a = $('.myTextAreaCssClass');
   a.css ('max-width', function () {
      return $(this).width(); //returns computed width
   });
}); 
```

注意：有不同版本的`width()`功能，因此请相应使用。请参阅：[https ://stackoverflow.com/a/10018686/297641](https://stackoverflow.com/a/10018686/297641)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:39:18.773

```
var a = $('.myTextAreaCssClass');

a.each(function() {
  w = $(this).width();
  $(this).css('max-width',w + 'px');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:40:18.417

尝试这个：

```
$('.myTextAreaCssClass').each(function(){
    $(this).css("max-width", $(this).css("width"))
}) 
```

# jquery - 如何对页面的不同部分实现视差效果？

> ID：10625450
> 
> 赞同：2
> 
> 时间：2012-05-16T19:34:34.270
> 
> 标签：jquery, html, scroll, position, parallax

我希望在网站上实现视差效果。我想知道是否可以在页面的不同部分实现这种滚动效果而不相互影响。

我创建了一个有点过于简单的例子来说明我想要做什么。我希望精灵（红色圆圈和绿色方块）以与实际背景不同的速率向上移动。但是，a) 和 b) 中的示例位于不同的 DIV 中，并且它们具有不规则的边框，位于同一容器内的另一个 div 中。像这样：

```
<div id="section-1">
<div id="1-top"></div>
<div id="1-content"></div>
<div id="1-bottom"></div>
</div> 
```

有没有办法通过 div 和边框向上移动精灵，但在主背景上不可见（在这种情况下为蓝色）。

b) 部分中的方块会向上移动到 a) 部分，还是有办法限制对象可以移动多少像素或百分比？

![例子](../Images/13d2bdd5083028f01f2cd0c4c5c85ac1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:15:07.697

使用两个脚本可以实现您想要完成的任务。

除了使用**jQuery 视差脚本**之外，您还应该使用**jQuery 滚动脚本**来处理您的红色圆圈和绿色方块的要求。

有很多 Demo 需要查看，并且选择正确的滚动脚本应该在视差脚本之前，因为这些对象包含在 div 中，然后视差会随着背景移动。

由于两个脚本都将使用事件侦听器进行垂直/滚动活动，因此它们**将协调工作**以创建适当的动画，每个脚本都处理它的特定任务。

仅此一项就可以提供更好的灵活性，因为您可以使用**两个不同的 API 来**实现非常特定的功能。

这是一个最近的[站点](http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm)，显示了开始寻找正确的滚动和视差脚本的最新插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:41:24.560

好像已经有很多jquery parallax相关的答案了。

我在 jsfiddle 上玩过它：http: [//jsfiddle.net/thinkingsites/88sqh/2/](http://jsfiddle.net/thinkingsites/88sqh/2/)

视差的诀窍在于，它越靠后，移动更短的距离需要相同的时间。虽然我没有任何具体的等式来设置它们，但可以通过一些工作来完成。

不规则的背景不会被子元素的动画所困扰。

看看这里的侧边栏，似乎有很多关于视差 jquery 的答案，尽管其中一些似乎基于 nikebetterworld 示例，这不是我认为您正在寻找的。

# html - div之间的另一个空白

> ID：10625452
> 
> 赞同：-2
> 
> 时间：2012-05-16T19:34:41.417
> 
> 标签：html, css

很抱歉在我问过很多人之前问过同样的问题......我读过很多这些，他们都说改变

```
margin: 0; 
```

两个 div 之间存在差距（div class="heady" 和 div class="menus"）我似乎无法摆脱空白，希望它足够清楚，如果不是，请告诉我。

谢谢詹姆斯。

html

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>website</title>
        <link rel="shortcut icon" href="favicon.ico"/>
    </head>
    <link rel="stylesheet" type="text/css" href="CSS/style1.css" />
    <body>
    <div class="heady">

    <br></br>
    <h1><a class="header" href="index.html">website</a></h1>
    </div>

    <div class="menus">

    <ul>
        <il><a class="list" href="x.html">About</a></il>
        <t> | </>
        <il><a class="list" href="y.html">Beginners</a></il>
        <t> | </>
        <il><a class="list" href="z.html">Advanced</a></il>
        <t> | </>
        <il><a class="list" href="contact.html">Contact</a></il>

    </ul>
    </div>

    </body>
</html> 
```

CSS

```
/*general rules*/

html,body {
    font-size:11pt;
    font-family: 'Lucida Grande', 'Lucida Sans', Geneva, Arial, Helvetica, sans-serif;
    color: black;

    padding-left: 5px;
    padding-right: 5px;
    padding-bottom: 0px;
    background-color: white;
    padding-top: 0px;
    margin-top: 0px;

}

h1 {  
    font-size: 25pt;
    margin-left:10px;
    margin-bottom:0;
    padding-bottom: 0;
}

a:link, a:visited {
    color: white;
}
a:hover, a:active {
    color: grey;
} 

/*header section rules*/
div.heady {
            height: 200px;
            width: 760px;
            padding: 0;
            background-color: grey;
            background-repeat:no-repeat;
             margin: 0;
 }

a.header {
    text-decoration: none;
 }
 a.header:link, a.header:visited, a.header:active,a.header:hover  {
    color: red;
    margin:0;

 } 

 div.menus {
 padding: 0;
 margin:0;
 background-color:black;
 width: 760px;
 text-align: center;
 font-size:12pt;

 }

 a.list {
 margin:0;
 } 
```

这是[jsFiddle](http://jsfiddle.net/6jbHQ/1/ "jsFiddle")的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:43:04.550

浏览器将默认样式应用于某些元素。在这种情况下，它`ul`会获得一些利润。请注意，即使 div 本身没有边距，此边距也会分隔 div。

利用

```
ul { margin: 0; } 
```

或包含一个[重置样式表](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:10:47.620

你在使用 Firefox 的 Firebug 插件吗？即使您还没有使用 firefox，也应该将其与 firebug 插件一起下载。使用 Firebug，您可以查看源代码中的元素并查看正在应用的样式、布局（宽度/高度、填充、边距），甚至可以操作样式以查看 CSS 中的更改会做什么。

我强烈推荐它！

[下载火狐](http://www.mozilla.org/en-US/firefox/new/)
[下载火狐](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:38:43.570

```
 .heady { display:block; }
  .heady { margin:0; padding:0; }
  .heady { line-height:100%; /* or even 0 (if no text present) */ } 
```

内容可以在这里愚弄，但其中 1 个或全部 3 个应该在浏览器中驯服野兽。

谷歌也有“css重置”

# asp.net - 在 GridView 中单击选择时执行代码

> ID：10625458
> 
> 赞同：0
> 
> 时间：2012-05-16T19:35:05.653
> 
> 标签：asp.net

I have a GridView and a select link in the GrdiView, when the item is selected I want it to read the contents to a textbox below the GridView. 我能想到的唯一方法是访问选择链接的 onClick 函数的背后代码。问题是我不确定如何做到这一点。

更新的果酱方法：

C# 代码

```
protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    GridView1.SelectedIndex = e.NewSelectedIndex;
    TextBox1.Text = GridView1.Rows[e.NewSelectedIndex].Cells[0].Text;
} 
```

正面代码

```
<asp:GridView ID="GridView1" OnSelectedIndexChanging="GridView1_SelectedIndexChanging" runat="server" AutoGenerateColumns="False" CellPadding="4" ForeColor="#333333" 
GridLines="None"> 
```

更新我的方法：

```
protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    int i = GridView1.SelectedIndex;
    ds.Tables["Comments"].Rows[i]["Comment"] = TextBox1.Text;
} 
```

也试过这个，但我得到一个错误-> System.IndexOutOfRangeException：位置-1没有行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:43:39.440

您需要将 OnSelectedIndexChanged 事件与您的 gridview

```
<asp:GridView OnSelectedIndexChanged="GridView1_SelectedIndexChanged" /> 
```

然后在后面的代码中你可以这样做：

```
void GridView1_SelectedIndexChanged(Object sender, EventArgs e)
  {

    GridViewRow row = CustomersGridView.SelectedRow;// you will get the selected row
    someLabel.Text =  row.Cells[0].Text;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:50:04.657

附加到 selectedindexchanged 事件后，您还需要设置一些数据键，以便您可以从网格中检索值。[在此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeys.aspx)查看示例。

```
void CustomersGridView_SelectedIndexChanged(Object sender, EventArgs e)
{

  // Determine the index of the selected row.
  int index = CustomersGridView.SelectedIndex;

  // Display the primary key value of the selected row.
  Message.Text = "The primary key value of the selected row is " +
    CustomersGridView.DataKeys[index].Value.ToString() + ".";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:05:10.833

最好使用网格视图的 oORowCommand 事件并将命令参数和命令名称作为属性值传递给同一事件。然后我认为它会工作。

# html - WPF System.Windows.Controls.WebBrowser 不呈现链接按钮

> ID：10625460
> 
> 赞同：2
> 
> 时间：2012-05-16T19:35:12.643
> 
> 标签：html, css, webbrowser-control, doctype, x-ua-compatible

我有一个网页显示在桌面应用程序的 WPF WebBrowser 控件中。我刚刚更新了网页以使用样式按钮而不是默认的灰色按钮，方法是从 asp.net Button 类型更改为 asp.net LinkBut​​ton 并对其应用 CSS 样式：

```
 a.btnSave
    {
        background: url(Resources/Images/btnSave.png) no-repeat 0 0;
        display:inline-block;
        width: 75px;
        height: 23px;
        text-indent: -9999px;
    }
    a.btnSave:hover {background-position: 0 -23px;}

    a.btnCancel
    {
        background: url(Resources/Images/btnCancel.png) no-repeat 0 0;
        display:inline-block;
        width: 75px;
        height: 23px;
        text-indent: -9999px;
    }
    a.btnCancel:hover {background-position: 0 -23px;}

    a.btnReset
    {
        background: url(Resources/Images/btnReset.png) no-repeat 0 0;
        display:inline-block;
        width: 75px;
        height: 23px;
        text-indent: -9999px;
    }
    a.btnReset:hover {background-position: 0 -23px;} 
```

...

```
<asp:LinkButton ID="btnSave" runat="server" CssClass="btnSave" OnClick="btnSave_Click" OnClientClick="OnSubmit()" UseSubmitBehavior="False" Text=" " />
<asp:LinkButton ID="btnCancel" runat="server" CssClass="btnCancel" OnClick="btnCancel_Click" OnClientClick="OnSubmit()" CausesValidation="False" Text=" " />
<asp:LinkButton ID="btnReset" runat="server" CssClass="btnReset" OnClick="btnReset_Click" OnClientClick="OnSubmit()" CausesValidation="False" Text=" " /> 
```

当我在 IE 8（或 firefox）中查看页面时，按钮显示正确。但是当我在应用程序的 WebBrowser 控件中加载页面时，按钮丢失了。如果我将鼠标悬停在它们应该在的位置上，我不会收到手形图标，因此不仅仅是没有加载图像。当我查看源代码时，锚标记就在那里，如果我复制源代码并将其保存到 HTML 文件并在浏览器窗口中打开它，它们确实会正确显示。过去，我遇到了 WebBrowser 无法像浏览器那样显示浮动 div 的问题，不得不切换到表格布局。它不支持 inline-block 显示类型吗？

如果重要，这是为页面声明的文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:41:03.477

默认情况下，它使用不支持样式的兼容模式。将其更改为

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T18:23:23.793

WPF WebBrowser 默认以 IE7 兼容模式运行。如果您可以控制该网站，则可以添加 <meta http-equiv="X-UA-Compatible"...> 标记，如此处其他答案之一所述。我尝试在运行 WPF 应用程序 + Web 应用程序的解决方案中执行此操作。客户端计算机正在运行 IE11。添加元标记并没有解决与用户代理字符串相关的问题。WebBrowser 仍然报告它是 IE7。我找到的解决方案是在注册表中配置 WebBrowser，如下所示：

```
Registry.SetValue(
@"HKEY_CURRENT_USER\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION",
AppDomain.CurrentDomain.FriendlyName,
int.MaxValue); 
```

# facebook - 如何让 Facebook 内嵌视频共享工作

> ID：10625466
> 
> 赞同：3
> 
> 时间：2012-05-16T19:35:52.577
> 
> 标签：facebook, share, jwplayer

我有一个视频网站，其中包含重新编写的嵌入式 youtube 视频网址。我想在 Facebook 上分享 jwplayer 中的可播放视频。我找到了 jwplayer 的这个片段来提供帮助，但似乎没有帮助。

[http://www.longtailvideo.com/sites/default/files/facebookfeednew.png](http://www.longtailvideo.com/sites/default/files/facebookfeednew.png)

```
<meta property="og:description" content="Big Buck Bunny is a short animated film by the Blender Institute. It is made using free and open source software."/>
<meta property="og:image" content="http://content.bitsontherun.com/thumbs/nPripu9l-320.jpg"/>
<meta property="og:site_name" content="Big Buck Bunny"/>
<meta property="og:title" content="Big Buck Bunny Trailer"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.longtailvideo.com/players/jw-flv-player/"/>
<meta property="og:video" content="https://content.bitsontherun.com/players/nPripu9l-8toGQxMR.swf" />
<meta property="og:video:height" content="270" />
<meta property="og:video:type" content="application/x-shockwave-flash" />
<meta property="og:video:width" content="480" /> 
```

特别是没有 video.flv 路径，演示喜欢：！[在此处输入图像描述][1]

[http://www.longtailvideo.com/support/addons/sharing-plugin/14048/facebook-video-sharing](http://www.longtailvideo.com/support/addons/sharing-plugin/14048/facebook-video-sharing) 我不是这方面的专家。请帮忙。

# jquery - 具有长随机 id 的 html 段落标签有什么意义？

> ID：10625470
> 
> 赞同：-2
> 
> 时间：2012-05-16T19:36:00.087
> 
> 标签：jquery, html

我看到一个带有这样标签的网页 (p id="zw-13733b2dc46p4lOvv123628e") 和 (p id="zw-13733b5602cFOXxgp123628e")。所以显然 ids 是相似的，但不相等和随机的。重点是什么？如果他们使用 jquery 操作这些段落，为什么他们不使用类标签而不是奇怪的 id？这里有什么深奥的原因，还是只是一个奇怪且可能愚蠢的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:06:08.823

**这不是愚蠢的设计**，通常它们被应用程序/框架用来识别某些部分，以便可以轻松地操作它们。用户不需要知道他们的意思，网站开发人员也间接知道他们的意思。

ID 是随机生成的，通常使用一些种子`microtime`来获取唯一 ID。例如，框架可以提供方法来添加可以识别的新段落，因此可以动态更改、删除、移动等。

使用随机 ID 时重要的是应用程序开发人员可以以某种方式跟踪它们，例如，在 Web 服务器的源代码中它可能是这样的（*你的问题中有 jQuery 标记但是......没有足够的信息来具体回答所以这里是一些伪代码*）：

```
$link_to_home$ = new object tagWithRandomID("Homepage");
insertTagToPage( $link_to_home$ ); 
```

用户在检查传递到浏览器的源时，会看到：

```
...
<a href="http://example.com/?aiwhiafw=s74Gtr54745uhftg7544n">Home</a>
... 
```

**在某些情况下，只有框架开发人员需要知道**发生了什么。这种行为的例子是一些常见的容器被自动插入到页面中，比如每个`<p>`标签的包装器，这样标签就可以被跟踪、样式化、修改......根据用户行为、请求、一天中的时间...... .

**就像您硬盘上的文件一样**，每个文件都由一些哈希或 id 标识，然后将该标识链接到数据和文件属性，以便您的文件浏览器可以显示文件名、创建时间、大小......

您应该阅读一些关于散列的文章，以了解唯一的随机 id（*或看起来像随机的 id，即使它们确实不是随机的*）。或者看看一些使用随机 ID 的设计，例如[http://tinyurl.com](http://tinyurl.com)或[http://goo.gl](http://goo.gl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:38:31.347

通常 id 是由 jQuery 等框架添加到页面中的——它们看起来是随机的，但对框架来说是有意义的——通常它是索引 DOM 元素的一种快速方法。

贴一个页面链接，我可以帮你看看。

# xml - SSIS、Oracle 连接和配置文件

> ID：10625482
> 
> 赞同：0
> 
> 时间：2012-05-16T19:36:42.787
> 
> 标签：xml, oracle, ssis

我有一个 SSIS 包 ( **Archive.dtsx** ) 和一个配置文件 ( **ArchiveConfig.dtsConfig** )。该包使用 Oracle 连接，在设计器中可以正常工作。但是，一旦从命令行部署和执行，包就无法验证 Oracle 连接。包中的所有其他东西都运行良好，MS SQL 数据流功能正常，是 Oracle 数据流导致了问题，我相信它与配置文件有关。

我正在使用的命令：

```
dtexec /f "g:\SSIS\Archive.dtsx" /conf "g:\SSIS\ArchiveConfig.dtsConfig" /set "\Package.Variables[User::date].Value";"MAY_2004" 
```

以及配置代码：

```
<?xml version="1.0"?>
<DTSConfiguration>
    <DTSConfigurationHeading>
        <DTSConfigurationFileInfo 
            GeneratedDate="5/2/2012 1:25:21 PM" 
            GeneratedFromPackageID="{AA679926-1E5C-42ED-B805-450A3E7AE555}" 
            GeneratedFromPackageName="Archive" 
            GeneratedBy="davenport"/>
    </DTSConfigurationHeading>
    <Configuration ValueType="String" Path="\Package.Connections[Oracle].Properties[ConnectionString]" ConfiguredType="Property">
        <ConfiguredValue>
            Data Source=ORACLE;User ID=userName;Persist Security Info=True;Unicode=True;
        </ConfiguredValue>
    </Configuration>
    <Configuration ValueType="String" Path="\Package.Connections[Oracle].Properties[Password]" ConfiguredType="Property">
        <ConfiguredValue>
            password
        </ConfiguredValue>
    </Configuration>
    <Configuration ValueType="String" Path="\Package.Connections[Oracle].Properties[ServerName]" ConfiguredType="Property">
        <ConfiguredValue>
            ORACLE
        </ConfiguredValue>
    </Configuration>
    <Configuration ValueType="String" Path="\Package.Connections[Oracle].Properties[UserName]" ConfiguredType="Property">
        <ConfiguredValue>
            userName
        </ConfiguredValue>
    </Configuration>
</DTSConfiguration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:58:31.953

无需修改配置文件。

请检查以下步骤。

在部署包之前。您应该将 Oracle 客户端安装到您的系统中。并且您必须在安装后从以下位置打开 .TNS 文件：

C:\Oracle\product\11.1.0\client_1\Network\Admin

之后，您必须从同一位置复制源系统 TNS 文件并使用凭据更新系统 TNS 文件中的详细信息。

> > 如果连接成功，您可以使用网络管理器测试连接，那么您就在正确的道路上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:03:53.600

您需要安装 oracle 客户端并编辑`tnsnames.ora`文件

这是一个例子：

```
ORACLE=
  (DESCRIPTION =
  (ADDRESS_LIST =
  (ADDRESS = (PROTOCOL = TCP)(HOST = your_host)(PORT = your_port)))
  (CONNECT_DATA =
  (SERVICE_NAME = your_service_name)
  )
) 
```

# java - 在 Java 中将 Signed Int 转换为 Unsigned String 值

> ID：10625483
> 
> 赞同：2
> 
> 时间：2012-05-16T19:36:43.383
> 
> 标签：java, binary, unsigned, signed, representation

为了简短起见，我得到了一个有符号数 -25771（在 Java 中），我需要它的无符号字符串表示形式，即“4294941525”。Java 认为这个数字是有符号的二进制补码，但我需要它的无符号值。

我注意到 Integers 的 toString() 方法的 Javadoc 仅转换为有符号表示。

是否没有像“& 0xFF”这样的按位运算来获取无符号数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-15T20:46:35.890

在 Java 8 中，您可以只使用[`Integer.toUnsignedString(int i)`](https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toUnsignedString-int-).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T19:41:44.130

我会尝试

```
int val = -25771;
System.out.println(Long.toString(val & 0xFFFFFFFFL)); 
```

印刷

```
4294941525 
```

或者

```
"" + (val & 0xFFFFFFFFL) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T14:21:47.170

您可以使用 Guava 的[UnsignedInts.toString](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/UnsignedInts.html#toString%28int%29)和[parseUnsignedInt](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/UnsignedInts.html#parseUnsignedInt%28java.lang.String%29)来反转该过程。

# c# - 每种类型的最新记录？

> ID：10625484
> 
> 赞同：2
> 
> 时间：2012-05-16T19:36:48.407
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, tsql

我的实体数据模型中有两个表（从旧数据库转换而来）

实体 1：Food_I_Have_In_Fridge：

```
Food  | Category
---------------
Apple | Fruit
Beef  | Meat
Tomato| Veggie
Pork  | Meat
Bacon | Meat
Orange| Fruit
Carrot| Veggie 
```

实体 2：Food_I_ate：

```
Date | Food
------------
01/01| Apple
01/01| Beef
01/02| Pork
01/03| Orange
01/04| Tomato 
```

我想生成按食物类别分类的我最后吃的东西的列表。输出如下所示：

```
Categ| Food
-----------
Meat | Pork
Fruit| Orange
Veggi| Tomato 
```

我在下面有等效的 sql 代码，但是因为我们完全放弃了 sql，所以我正在尝试使用实体框架来实现以下功能。

```
with FW as (
    select a.[Date], f.category, a.food, a.date
    from
        [Food_I_ate] a
    inner join
        [Food_I_Have_In_Fridge] f on a.Food = f.Food
    )
select
    FW2.category,
    FW2.Food,
    FW2.Date
from
    (select FW.category, max(fw.ix) as maxix
     from FW group by FW.category) FW
inner join
    FW FW2 on FW2.ix = FW.maxix and FW2.category = FW.category 
```

我想知道如何使用实体框架来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:44:24.640

试试这个，假设你的实体是`db.FoodIAte`并且`db.FoodInFridge`（喜欢表名！）：

```
var food = (from fif in db.FoodInFridge
           join fia in db.FoodIAte on fif.Food equals fia.Food
           select new
                  {
                      Food = fif.Food,
                      Category = fif.Category,
                      Date = fia.Date
                  })
           .OrderByDescending(f => f.Date)
           .ToList() 
```

这样你就可以按照吃的日期顺序吃食物，最近的在前。然后，如果您想要其中的前三个，您可以这样做（确保您检查食物清单是否与您所服用的数量一样长/大小相同，否则它会死！）：

```
var topFood = food.Take(3).ToList(); 
```

# java - 可打印对？

> ID：10625485
> 
> 赞同：2
> 
> 时间：2012-05-16T19:36:55.317
> 
> 标签：java, android

有没有办法创建可打印的对？`pair.toString()`看起来像这样：`android.util.Pair@fd55fdb8`，当我需要打印很多包含这些对的数组时，调试起来非常困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:43:22.620

我没有尝试过，但无论如何它应该可以工作：

Javadoc[对](http://developer.android.com/reference/android/util/Pair.html)

```
public class PrintablePair extends Pair {
 public String toString() {
     return "" + first +"," + ,second //(they are public)
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:43:04.140

只需覆盖`toString`方法，即：http: [//developer.android.com/reference/java/lang/Object.html](http://developer.android.com/reference/java/lang/Object.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:43:57.973

你的意思是在Eclipse中？如果是这样，右键单击 a 的实例`Pair`，选择`New Detail Formatter...`并输入如下内容：

```
String text = "{ " + first + ", " + second + " }";
text.toString(); 
```

您应该在监视窗口中看到这对。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-05T07:23:24.760

如果可能，您可以使用`org.apache.commons.lang3.tuple.Pair`而不是`android.util.Pair`

使用构建对`Pair.of(first, second)`

我建议的原因是这个类包含一个自定义 toString 方法以及一个默认的 toString 来满足您的需求：

```
Pair.of(1, 2).toString(); // prints (1,2)
Pair.of(1, 2).toString("%s_%s"); // prints 1_2 
```

[配对文档](https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/tuple/Pair.html)

# php - symfony2 并抛出异常错误

> ID：10625491
> 
> 赞同：25
> 
> 时间：2012-05-16T19:37:15.237
> 
> 标签：php, exception, symfony

我正在尝试抛出异常，并且正在执行以下操作：

```
use Symfony\Component\HttpKernel\Exception\HttpNotFoundException;
use Symfony\Component\Security\Core\Exception\AccessDeniedException; 
```

然后我按以下方式使用它们：

```
 throw new HttpNotFoundException("Page not found");
   throw $this->createNotFoundException('The product does not exist'); 
```

但是我收到诸如 HttpNotFoundException is not found 之类的错误。

这是抛出异常的最佳方法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-16T23:05:05.753

尝试：

```
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException; 
```

和

```
throw new NotFoundHttpException("Page not found"); 
```

我认为你有点倒退了:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T10:58:32.523

如果它在控制器中，您可以这样做：

```
throw $this->createNotFoundException('Unable to find entity.'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-29T15:53:08.113

**在控制器**中，您可以简单地执行以下操作：

```
public function someAction()
{
    // ...

    // Tested, and the user does not have permissions
    throw $this->createAccessDeniedException("You don't have access to this page!");

    // or tested and didn't found the product
    throw $this->createNotFoundException('The product does not exist');

    // ...
} 
```

在这种情况下，无需`use Symfony\Component\HttpKernel\Exception\HttpNotFoundException;`在顶部包含 。原因是您没有直接使用该类，例如使用构造函数。

**在控制器之外**，您必须指出可以找到该类的位置，并像往常一样抛出异常。像这样：

```
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

// ...

// Something is missing
throw new HttpNotFoundException('The product does not exist'); 
```

或者

```
use Symfony\Component\Security\Core\Exception\AccessDeniedException;

// ...

// Permissions were denied
throw new AccessDeniedException("You don't have access to this page!"); 
```

# facebook-graph-api - /me/friends Facebook 开放图形 API 调用是否会分页？

> ID：10625492
> 
> 赞同：9
> 
> 时间：2012-05-16T19:37:19.143
> 
> 标签：facebook-graph-api, pagination

我正在根据大约 350 人的朋友列表测试我的应用程序，并且在`/me/friends/`.

我不清楚（通过测试和文档）如下：

`graph.facebook.com/me/friends`如果有的话，或`graph.facebook.com/ID/friends`打开图形调用开始分页的朋友有多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:37:07.477

看看 Graph API Explorer：[https](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends) ://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends并滚动到最底部 - 你会看到类似的东西：

> “分页”：{“下一个”：“ [https://graph.facebook.com/me/friends?format=json&limit=5000&offset=5000&__after_id=XXX](https://graph.facebook.com/me/friends?format=json&limit=5000&offset=5000&__after_id=XXX) ”}

这让我相信默认页面大小是 5000

如果您愿意，可以明确设置该限制：[https ://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends%26limit%3D1](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends&limit=1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T06:17:41.193

1.  使用 limit=5000 自己设置限制作为最大限制。即 /me/friends?limit=5000

2.  使用 JavaScript SDK，返回两个字段，数据和分页。只需点击nextPage URL，在next结果上，将不再有分页变量/下一个变量，表明您已经结束了。

# heroku - 尝试迁移数据库时出现 Heroku 弃用警告

> ID：10625495
> 
> 赞同：0
> 
> 时间：2012-05-16T19:37:25.600
> 
> 标签：heroku, rake, ruby-on-rails-3.2, dbmigrate

我有一个我创建的 Rails 3.2 应用程序，并希望将其部署在 Heroku 上。

我在 cedar 堆栈上创建了一个新会话并将我的应用程序推送到它。

但是，当我尝试迁移数据库时，会收到弃用警告。

我用命令运行了 migrate 推荐`--trace`，这就是它给我的：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
uninitialized constant SimpleForm
/app/config/initializers/simple_form.rb:2:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/engine.rb:587:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/engine.rb:587:in `block in <class:Engine>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/config/environment.rb:5:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:103:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:103:in `require_environment!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

我的应用程序在本地运行良好。

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production do
  gem 'thin'
  gem 'pg'
end

group :development, :test do
    gem 'sqlite3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', '~> 0.9.2'
  gem 'bootstrap-sass'
  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails', '2.0.2'
  gem 'simple_form'
  gem 'fog'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:30:04.760

将 simple_form gem 移到您的 :assets 组之外 - 我的位于 jquery-rails gem 参考下，然后确保在推送到 heroku 之前在控制台中本地运行此命令：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

希望有帮助！

# javascript - 正则表达式检查字符串中是否存在 http 或 https

> ID：10625497
> 
> 赞同：13
> 
> 时间：2012-05-16T19:37:28.970
> 
> 标签：javascript, regex

所以我有这个代码：

```
function validateText(str)
{
    var tarea = str;
    var tarea_regex = /^(http|https)/;
    if(tarea_regex.test(String(tarea).toLowerCase()) == true)
    {
        $('#textVal').val('');
    }
} 
```

这非常适合：

[https://hello.com](https://hello.com)
http://hello.com

但不适用于：

这是一个网站[http://hello.com](http://hello.com) asdasd asdasdas

尝试做一些阅读，但我不知道在哪里放置 * ？因为他们会根据这里检查字符串上的任何地方的表达式-> [http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

谢谢你

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T19:40:24.343

从外观上看，您只是在检查字符串中是否存在 http 或 https。为此目的，正则表达式有点矫枉过正。试试这个简单的代码`indexOf`：

```
function validateText(str)
{
    var tarea = str;
    if (tarea.indexOf("http://") == 0 || tarea.indexOf("https://") == 0) {
        // do something here
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-29T09:50:26.970

尝试这个：

```
function validateText(string) {
  if(/(http(s?)):\/\//i.test(string)) {
    // do something here
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T19:39:38.960

`^`开头的 匹配字符串的开头。只需将其删除。

```
var tarea_regex = /^(http|https)/; 
```

应该

```
var tarea_regex = /(http|https)/; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-16T19:40:07.197

```
((http(s?))\://)) 
```

这里有很多想法：[http ://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1](http://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-16T19:39:02.083

您是否尝试过使用分词符而不是行首字符？

```
var tarea_regex = /\b(http|https)/; 
```

它似乎做我*认为*你想要的。见这里：http: [//jsfiddle.net/BejGd/](http://jsfiddle.net/BejGd/)

# javascript - 使用 Jquery .after() 移动元素

> ID：10625501
> 
> 赞同：2
> 
> 时间：2012-05-16T19:37:48.133
> 
> 标签：javascript, jquery, html, jquery-after

我正在阅读有关该功能的[jquery 手册：](http://api.jquery.com/after/)`.after()`

```
$('.container').after($('h2')); 
```

它说

> “如果以这种方式选择的元素插入到其他地方，它将被移动而不是克隆”

所以如果我有多个 `<div class='before' onclick='afterfunction();'><div>`，

我想`<div class='after'></div>`在点击了哪个 div 之后放置（让它移动，而不是克隆）我会做这样的事情吗？

```
var afterdiv = "<div class='after'></div>";
function afterfunction() {
    $(this).after(afterdiv);
} 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:00:32.527

像你说的：

> **DOM 中的一个元素也可以被选中并插入到另一个元素之后：** $('.container').after($('h2'));
> 如果以这种方式选择的元素被插入到别处，它将被移动而不是克隆：

但是你错过了大胆的部分。

```
$('.before').click(function() {
  afterfunction(this);
});

// this will not work cause you'll append a string to your DOM
// var afterdiv = "<div class='after'>ola</div>";
// and will repeatedly be appended after each action.

// instead define your element by wrapping it into a $( )
  var afterdiv = $("<div class='after'>ola</div>");
// now 'afterdiv' variable is binded to that element only once inside the DOM 

function afterfunction(elem) {
   $(elem).after(afterdiv);
} 
```

而且您不需要`.remove()`它（就像这里的答案中错误地建议一样。）

## *[演示 jsFiddle](http://jsfiddle.net/NSncw/)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:43:47.867

像这样制作`.before`div：

```
<div class='before'><div/> 
```

然后尝试，

```
$('.before').on('click', function() {
  afterfunction(this);
});

function afterfunction(el) {
  var afterdiv = "<div class='after'></div>";
  $('.after').remove(); // remove previous `.after`
  $(el).after(afterdiv); // add newly after the clicked div
} 
```

**[演示](http://jsfiddle.net/thesystemrestart/cSyjs/10/)**

# xml - 如何实现在 cfscript 标签内写入 svg？

> ID：10625505
> 
> 赞同：0
> 
> 时间：2012-05-16T19:38:00.787
> 
> 标签：xml, coldfusion, svg

我正在尝试实现与此类似的目标： [http](http://rickosborne.org/blog/2008/01/generating-scalable-stretchy-and-smart-graphics-with-coldfusion-part-2/) ://rickosborne.org/blog/2008/01/generating-scalable-stretchy-and-smart-graphics-with-coldfusion-part-2/ 但在标签内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:04:41.350

```
savecontent variable="myVariable" { WriteOutput("Hello World"); } 
```

引自：[http ://www.isummation.com/blog/cfsavecontent-in-cf9-cfscript/](http://www.isummation.com/blog/cfsavecontent-in-cf9-cfscript/)

# environment-variables - 如何在 init.gradle 中使用系统环境变量

> ID：10625508
> 
> 赞同：1
> 
> 时间：2012-05-16T19:38:07.450
> 
> 标签：environment-variables, gradle

我们正在将我们的构建迁移到 gradle，我曾经有一个用于部署的外部脚本，它引用了一些系统环境变量。我可以在我的 init.gradle 中引用它们吗？如何访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:02:33.903

环境变量以通常的 Java 方式访问：`System.getenv()`获取所有环境变量，并`System.getenv("foo")`获取特定的一个。

# php - preg_match 错误信息

> ID：10625517
> 
> 赞同：0
> 
> 时间：2012-05-16T19:38:41.420
> 
> 标签：php

```
preg_match("/[\]/",'',$body); 
```

我使用 preg_match 但我在这里有这个错误

编译失败：在偏移量 3 处缺少字符类的终止 ]

这里有什么问题我找不到

```
$email_message = "Form details below.\n\n";

                    function clean_string($string) {
                        $bad = array("content-type","bcc:","to:","cc:","href");
                        return str_replace($bad,"",$string);
                    }

                    $email_message .= "Full Name: ".clean_string($_POST['full_name'])."\n";
                    $email_message .= "Email: ".clean_string($_POST['email'])."\n";
                    $email_message .= "Telephone number: ".clean_string($_POST['telephone'])."\n";
                    $email_message .= "Message: ".clean_string($_POST['comments'])."\n";

                    $mail             = new PHPMailer();
                    $body             = $email_message;
                    $body             = str_replace('\\', '', $body);

                    $mail->IsSMTP(); // telling the class to use SMTP
                    $mail->SMTPAuth   = true;                       // enable SMTP authentication
                    $mail->SMTPSecure = "ssl";                      // sets the prefix to the servier
                    $mail->Host       = "smtp.gmail.com";           // sets GMAIL as the SMTP server
                    $mail->Port       = 465;                        // set the SMTP port for the GMAIL server
                    $mail->Username   = "hanem@gmail.com";      // GMAIL username
                    $mail->Password   = "hinadk";       // GMAIL password

                    $mail->SetFrom('from-email@domain.com', 'First Last');

                    $mail->Subject    = "Imperia";

                    $mail->AltBody    = "To view the message, please use an HTML compatidble email viewer!"; // optional, comment out and test

                    $mail->MsgHTML($body);

                    $address = "hanem@gmail.com";
                    $mail->AddAddress($address, "To Name");

                    if(!$mail->Send()) {

                        echo "<font color='red'> Message error </font>". $mail->ErrorInfo;
                    } else {
                        echo "<font color='red'> Message sent </font>";
                    } 
```

有 eregi_replace("[]",'',$body);

但我有另一个错误，因此我将其更改为 preg_match

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:41:12.767

您正在转义最后一个括号，但不是第一个。要匹配反斜杠，您可以执行以下操作：

```
preg_match('/\\\\/', '', $body); 
```

从您的编辑中，您似乎正在尝试从`$body`. 在这种情况下，您需要使用[preg_replace](http://us.php.net/manual/en/function.preg-replace.php)。但是，由于您进行了简单的搜索和替换，因此最好只使用[str_replace](http://us.php.net/manual/en/function.str-replace.php)：

```
str_replace('\\', '', $body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:48:36.787

preg_match 的第三个参数是匹配数组，这样你就可以用数组覆盖 $body 变量的值。替换使用 preg_replace 而不是 preg_match $body = preg_replace("/[\]/",'',$body); 并在正则表达式中使用转义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:40:59.147

用于转义特殊字符，因此`\`您正在转义右括号，并且您有一个没有右括号的左括号，从而导致错误。

你想准确匹配什么，`\`角色？

# javascript - Ext.js 网格中的自定义编辑器

> ID：10625520
> 
> 赞同：2
> 
> 时间：2012-05-16T19:38:47.920
> 
> 标签：javascript, jquery, jquery-ui, extjs, extjs4

所以这是我第一次在这里发帖，但我或多或少被难住了。基本上我所拥有的是一个加载一堆数据的 ext 网格。这些列中包含所有这些日期字段。开始、完成等。我正在尝试创建一个日期选择器来编辑这些列。我已经尝试了不同的 ext 组件编辑器，并且能够将一些最有效的东西组合在一起，但我真正喜欢的是一种使用我自己的自定义日期选择器甚至更好的第三方解决方案，如 JQuery UI 日期选择器.

扩展或覆盖编辑器似乎都不起作用。我并不是在寻找代码，而是更多地寻找 ext 是否可以实现，如果可以，可能会指向正确的方向。那么有没有人遇到过类似的问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:45:47.137

在我看来，扩展 Ext.form.field.Picker 并使用 jQuery 日期选择器作为选择器部分是相当直接的。我已经将 FCK 编辑器包装在一个 Ext 组件中，这很容易做到。Picker 涉及更多的活动部件，但我认为值得一试。

话虽如此，选择 ExtJS 的几个部分用于非 Ext 应用程序然后尝试将其他东西结合到 Ext 中的想法将是痛苦的。我强烈建议完全接受 ExtJS，然后非常小心地选择你偏离的地方。另一种方法可能是使用与 jQuery 配合得更好的不同网格系统（对不起，Evan）。

# java - 如何向 JUNIT 测试套件添加方法..？

> ID：10625521
> 
> 赞同：2
> 
> 时间：2012-05-16T19:38:48.823
> 
> 标签：java, junit, annotations

我正在为我的一组测试用例创建自定义注释，我只想选择那些符合我的注释标准的方法并动态创建一个测试套件。

有没有办法将方法添加到测试套件而不是整个类？

就像是

`@Suite.Suitemethods({ Support.method1(), Test2.method2(), ServiceName.method3(), ServiceName2.method4() })`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:58:26.463

使用**类别功能**。

示例：声明测试服：

```
interface Cate1{};

@RunWith(Categories.class)  
@IncludeCategory(Cate1.class)//Only allow @Category(Cate1.class)  
@SuiteClasses({Support.class,   
               Test2.class,
               ServiceName.class,...}) 
class MyTest{} 
```

测试用例，只有 m1() 会运行：

```
class Support{
    @Test   
    @Category(Cate1.class)  
    public void m1(){}  

    @Test  
    public void m2(){}  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:28:44.993

@Shengyuan，用户想要的就像说

```
 Class A{

    @Test     
    @CustomAnnotation(attrib1 = "foo"; attrib2 = "moo"; attrib3 = "poo") 
    void methodA(){ }

    @Test      
    @CustomAnnotation(attrib1 = "blahblah"; attrib2 = "flahflah"; attrib3 = "klahklah") 
    void methodB(){ }

    @Test      
    @CustomAnnotation(attrib1 = "foo"; attrib2 = "flahflah"; attrib3 = "poo") 
    void methodC(){ }
    } 
```

现在，使用反射，我的注释处理类将返回一个符合我的条件的方法的 SET/LIST（比如，attrib1="foo"）。方法 A 和方法 C 将满足。现在我需要在运行时将这些添加到测试套件并运行它。

如何将它们添加到测试套件中？您建议的显然是编译时解决方案。用户想要一个运行时解决方案。在给出标准之前，用户不知道哪些方法将成为测试套件的一部分。

我也在为 JUNIT4 寻找相同的解决方案。我想这在 Junit3 中是可能的。不过不确定。如果您遇到此用例的解决方案，请告诉我们。

# git - GitHub 如何处理推送安全？

> ID：10625522
> 
> 赞同：1
> 
> 时间：2012-05-16T19:38:51.373
> 
> 标签：git, ssh, github

当我为 Git 设置计算机时，我会生成一个私有和公共 SSH 密钥。然后我让 GitHub 知道我的公钥是什么。我的理解是公钥可以加密消息，而私钥可以解密它。所以我可以理解 github 是如何通过 SSH 向我发送加密消息的。

但是，我的问题是，当我推送到 GitHub 时，它怎么知道是我在做推送？其他人不能用我的姓名和电子邮件创建自己的 SSH 密钥，然后推送到我的 GitHub 存储库吗？

我怀疑情况是否如此，那么为此采取了哪些安全措施？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:43:36.393

GitHub 有一份您的公钥副本，其中包含的信息不仅仅是您的姓名和电子邮件地址。它有一个独特的指纹，无法通过生成伪造的公钥来复制（至少在没有大规模暴力攻击或一些意想不到的数学突破的情况下是这样）。

ssh 协议的工作方式是，GitHub 会看到一个 ssh 连接，它会根据您的公钥进行身份验证。这种连接*只能*由拥有您的私钥副本的人创建。

GitHub 没有你的私钥的副本，但它可以验证你有。（这就是[公钥密码学](http://en.wikipedia.org/wiki/Public_key_cryptography)的全部内容。）

# java - Java：是否有可能（在运行时）获取未来方法调用的源文件名和行号？

> ID：10625526
> 
> 赞同：1
> 
> 时间：2012-05-16T19:39:06.190
> 
> 标签：java, swing, events, logging, stack-trace

我正在处理一个项目，我的任务是实现一个自定义 Java Swing 库，只要用户与 Swing 组件交互，就会将事件记录到文件中。换句话说，每当用户与 GUI 上的按钮、复选框等交互时，该事件都会记录到文件中。日志条目必须包含事件发生位置的源文件名和行号。**有一个问题：对于开发人员在库外**实现的方法，日志记录机制需要在**库**中自动发生。可以做到吗？这是我到目前为止所拥有的：

 **自定义库动作监听器：

```
public abstract class MyActionListener implements ActionListener
{
    // Prevents the developer from implementing the "actionPerformed" method
    @Override
    public final void actionPerformed(ActionEvent e)
    {
        // Do nothing
    }

    // Custom method
    public void actionPerformed(MyActionEvent e)
    {
        doCustomMethod();

        // Tried obtaining the stack trace here but there's no entry
        // in the trace for "doCustomMethod()"
        StackTraceElement [] elements = Thread.currentThread().getStackTrace();
        for (StackTraceElement element : elements)
        {
            // print each element
        }
    }

    // Forces the developer to implement this method
    public abstract void doCustomMethod();
} 
```

自定义库按钮：

```
public class MyButton extends JButton
{
    ...

    // Custom method
    public void addActionListener(MyActionListener l)
    {
        listenerList.add(MyActionListener.class, l);
    }
} 
```

开发人员创建的 GUI：

```
public class TestGui extends JFrame
{
    TestGui()
    {
        ...

        MyButton button = new MyButton("Push");
        button.addActionListener(new MyActionListener()
        {
            public void doCustomMethod()
            {
                // Want to log this line number and file name,
                // but need the library to do it; NOT the developer.
            }
        });
    }
} 
```

我已经准备好所有正确的逻辑，以便调用正确的*addActionListener()*和*actionPerformed()*方法。我的问题是尝试记录事件。我也尝试过实现自定义 Java 注释，但没有奏效。此外，开发人员必须在构建 GUI 时包含 -processor 选项。我们试图让开发人员使用我们的自定义 Swing 库，就像 Java Swing 库一样。我实施的更改对开发人员来说是透明的。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:49:12.997

也许[Logback](http://logback.qos.ch/) + [SLF4J](http://www.slf4j.org/)可以帮助你

首先将 logback-classic.jar、logback-core.jar 和 slf4j-api 放在你的类路径中

如果不存在，则有一个默认配置，但如果您想要更详细的配置，您可以添加一个 logback.xml 配置文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>

<configuration scan="true" scanPeriod="60 seconds">

<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
    <layout class="ch.qos.logback.classic.PatternLayout">
        <pattern>[%d{ISO8601}] [%-5level] \(%F:%L\) - %msg%n</pattern>
    </layout>
</appender>

<logger name="org.hibernate" level="WARN" />
<logger name="org.springframework" level="INFO" />

<root level="INFO">
    <appender-ref ref="CONSOLE" />
</root>

</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:52:53.783

遍历组件树并将您的侦听器添加到每个组件（JButton 等 - 可以与用户交互并且您需要它）怎么样？

然后开发人员可以使用简单的 JButton（不是 MyButton）。但是当您使用这种方法时 - 您应该在创建所有组件后调用遍历组件方法。如果要添加其他组件，您还可以添加侦听 Component#add 方法的 ComponentListener 并更新您的侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:58:19.207

如果您可以强制他们在其 doCustomMethod() 实现中调用方法，那么您可以从堆栈跟踪信息中访问行号。否则，您可以使用 this.getClass() 找出其实现的类名，并使用 ASM [ClassReader](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/ClassReader.html)找出行号/源文件。**

# python - 如何使用另一个 ValueQuerySet 更新 ValueQuerySet？

> ID：10625527
> 
> 赞同：0
> 
> 时间：2012-05-16T19:39:10.807
> 
> 标签：python, django

我有以下两个来自 Django 的 ValueQuerySet。

```
dict1 = [{'user': 1, 'total_bookmarked': 2}, {'user': 2, 'total_bookmarked': 3}]

dict2 = [{'user': 1, 'name': 'Joe'}, {'user': 2, 'name': 'Paula'}] 
```

如何合并两个 ValueQuerySet 以便获得以下信息：

```
dict3 = [{'user': 1, 'name': 'Joe', 'total_bookmarked':2}, {'user': 2, 'name': 'Paula', 'total_bookmarked': 3}] 
```

我该怎么做？我曾考虑将这些转换回 Python 字典列表，但我不确定如何处理它，即使它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:59:40.530

我首先建议您尝试查看是否可以在一个查询中获得此信息，因为它更有效。但是，如果您想**用第二个列表更新第一个列表**，并且它们的顺序相同：

```
list1 = [{'user': 1, 'total_bookmarked': 2}, {'user': 2, 'total_bookmarked': 3}]
list2 = [{'user': 1, 'name': 'Joe'}, {'user': 2, 'name': 'Paula'}]

for a,b in zip(list1, list2):
    a.update(b) 
```

如果它们是非常大的列表，您可以通过使用进一步提高效率`izip`

```
from itertools import izip

for a,b in izip(list1, list2):
    a.update(b) 
```

如果由于某种原因它们都没有按用户排序：

```
from operator import itemgetter

list1.sort(key=itemgetter('user'))
list2.sort(key=itemgetter('user')) 
```

我会避免使用嵌套 for 循环的解决方案，因为它不会那么有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:50:18.613

如果它们只是无序列表或字典，那将是

```
list1 = [{'user': 1, 'total_bookmarked': 2}, {'user': 2, 'total_bookmarked': 3}]
list2 = [{'user': 1, 'name': 'Joe'}, {'user': 2, 'name': 'Paula'}]
list3 = []
for d1 in list1:
    for d2 in list2: 
        if d1['user'] == d2['user']:
            d3 = dict(d1.items()+d2.items()
            list3.append(d3)
            break
        else:
            continue 
```

如果您的列表是由用户订购的，那么有一个更好的方法

```
list1 = [{'user': 1, 'total_bookmarked': 2}, {'user': 2, 'total_bookmarked': 3}]
list2 = [{'user': 1, 'name': 'Joe'}, {'user': 2, 'name': 'Paula'}]

list3 = [dict(d1.items()+d2.items()) for (d1, d2) in zip(list1,list2)] 
```

# .htaccess - 显示来自不同域的特定网址的页面？

> ID：10625532
> 
> 赞同：0
> 
> 时间：2012-05-16T19:39:43.633
> 
> 标签：.htaccess, dns, nameservers

我的站点 mysite.com/test 上有一个页面，例如，我想在另一个站点 test.jit.su 上加载一个页面。我已经用我的注册商 (godaddy) 设置了我的域名服务器，这样我就可以为 mysite.com/test 添加一条指向 test.jit.su 的 A 记录。这给我的虚拟主机上的电子邮件和其他东西带来了一些问题，所以我打算将名称服务器更改为虚拟主机的名称服务器。

没有A记录还有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:51:58.320

DNS 记录只能在域（任何级别）上设置别名，例如 mydomain.com --> yotherdomain.com 这也自动暗示重定向，如 mydomain.com/anything --> myotherdomain.com/anything 但你不能这样做mydomain.com 到一台服务器，mydomain.com/anything 到另一台服务器，如果你想这样做，你必须使用 HTTP 重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:08:28.103

正如@unleashed-dev 所述，更改 A 记录不会解决您的问题。

您需要为此在 Apache 配置中**启用** `mod_proxy`。启用 mod_proxy 后，启用`mod_rewrite`并`.htaccess`通过`httpd.conf`，然后将此代码放在您`.htaccess`的`$DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# proxy /test to http://test.jit.su/test
RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$ [NC]
RewriteRule ^(test)/?$ http://test.jit.su/$1 [L,P,NC] 
```

# jquery - jquery-html5-upload 问题（点击按钮上传文件）

> ID：10625535
> 
> 赞同：0
> 
> 时间：2012-05-16T19:39:49.890
> 
> 标签：jquery, html, jquery-plugins, file-upload, fileapi

我无法使用此插件在单击按钮时上传文件的正确方法。

[https://github.com/mihaild/jquery-html5-upload](https://github.com/mihaild/jquery-html5-upload)

在文档中它说：

> # 选项
> 
> ### 活动
> 
> 除了插件使用的“change”之外的所有事件都有前缀“html5_upload.”。
> 
> ### 插件使用的事件
> 
> 不建议为本事件手册设置处理程序。
> 
> **start**开始上传选定的文件
> 
> **cancelOne**取消当前上传文件的上传
> 
> **cancelAll**取消当前上传
> 
> **删除**插件工作的痕迹
> 
> [https://github.com/mihaild/jquery-html5-upload#options](https://github.com/mihaild/jquery-html5-upload#options)

我希望能够做这样的事情。

```
$("#submit-button-1").click(function(){
$("#upload-src").html5_upload(start) //or something like that for each uploader
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:49:14.930

以下是针对您的具体情况的答案：

```
jQuery('#submit-button-1').on('click',function(){
  jQuery('#upload-src').triggerHandler('html5_upload.start');
}) 
```

# ms-access - 错误 2448：无法为该对象赋值……为什么不呢？

> ID：10625536
> 
> 赞同：4
> 
> 时间：2012-05-16T19:39:55.460
> 
> 标签：ms-access

```
Private Sub Form_Open(Cancel As Integer)
  Me.Bathroom = Forms!frmBathrooms!ID
  Me.txtBathInfo.Caption = "Bathroom Room Number: " & 
        DLookup("Room", "tblRooms", "ID = " & 
           DLookup("Room", "tblBathrooms", "ID = " & Me.Bathroom))
  Me.RecordSource = "SELECT * FROM tblStalls WHERE Bathroom = " & Me.Bathroom
  Me.Recordset.AddNew
End Sub 
```

其中第 2 行`Me.Bathroom = Forms!frmBathrooms!ID`正在触发错误。调试器说`Me.Bathroom = 1, Forms!frmBathrooms!ID = 38`。基本上我试图自动使这个表单的浴室字段与 frmBathrooms 表单的 ID 匹配。“我”是浴室物品的一种形式；可以有很多项目。

这到底是怎么抛出错误？尽管搜索了大约一个小时，但我找不到任何东西。我理解这个消息，但不知道这怎么可能抛出它？

Item 表的浴室字段在表单的记录源等中。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-20T10:37:12.503

有同样的问题，但它与 VBA 语法无关。我试图在表单上设置一个控件（订单号）。必须计算这个订单号，我继续在 VBA 中进行计算。计算后我会尝试在表单上设置控件（订单号）。这在运行时触发了 2448 错误。随后我发现在表单设计中，我已经将控制源设置为计算。所以运行时 VBA 也不允许我设置控件。在表单设计中删除控件的控制源中的计算后 - >属性表窗口它工作正常。我承认，真的很愚蠢的错误，但你有它。希望这会有所帮助--X--

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:48:52.583

对于遇到同样问题的其他人，我所做的只是将第 2 行和第 3 行移到 Me.Recordset.AddNew 下方（以便在更改 Me.Bathroom 和标题之前更改源并添加新记录）。– 用户 1394455

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T12:55:26.207

主表单必须是可编辑的，以便更改下拉列表，即使在表单标题区域也是如此。（VBA 在加载时使其不可编辑。）

# msbuild - MSBuild 或 StyleCop 任务验证 App.config 文件中的密钥？

> ID：10625537
> 
> 赞同：2
> 
> 时间：2012-05-16T19:40:04.733
> 
> 标签：msbuild, msbuild-task, stylecop

在几个项目的 App.config 文件中，有一行

```
<add key="url" value="http://www.example.com/"/> 
```

在每次构建时，我都希望有一个任务来验证`"url"`密钥是否**没有**text `"http://localhost"`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:44:53.923

我假设您有一个团队，并且您的一些团队成员无意中签入了这些配置，将该值更改为 localhost。

如果是这种情况，为什么不为每个环境提供转换文件，您的调试配置可以将密钥设置为 localhost，而您的 production/test/stage/qa/whatever 配置可以将其设置为 example.com 或其他内容。

您可能不知道 msbuild 可以转换您的配置文件。基本上你有你的主配置文件，然后是一个配置文件，其中包含每个环境的更改内容。在进行构建时，msbuild 将使用其他“转换”文件中的任何更改来修改主要的。

[不是 Visual Studio 2010 中的 Web 项目的项目的 App.Config 转换？](https://stackoverflow.com/questions/3004210/app-config-transformation-for-projects-which-are-not-web-projects-in-visual-stud)

您的转换文件如下所示：

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">    
  <appSettings>
    <add key="url" value="http://www.example.com/" xdt:Locator="Match(key)" xdt:Transform="SetAttributes"/>
  </appSettings>
</configuration> 
```

微软链接是[http://msdn.microsoft.com/en-us/library/dd465326(VS.100).aspx](http://msdn.microsoft.com/en-us/library/dd465326(VS.100).aspx)

它们可以很容易地在 web.configs 和 app.configs 上使用，只需对您的项目文件进行一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T16:39:39.780

另一种解决方案是将单元测试集成为构建的一部分，并让测试验证 web.config 中的密钥。

转到您的构建：

[![在此处输入图像描述](../Images/7ff1467fe7ca971589446e9c5145de67.png)](https://i.stack.imgur.com/dWL5u.png)

右键单击您的构建，然后单击编辑构建定义：

[![在此处输入图像描述](../Images/21559412e2178ed5c6ac25346b7c0d08.png)](https://i.stack.imgur.com/FOTf7.png)

选择流程：

[![在此处输入图像描述](../Images/6a011b58e3a384ade57f4470081ca731.png)](https://i.stack.imgur.com/KNU6c.png)

现在我们可以在这里设置失败：

[![在此处输入图像描述](../Images/9c5d2623970fc3a2e7ad874315fc4b3b.png)](https://i.stack.imgur.com/P7uq8.png)

# regex - Perl：“正则表达式中 {,} 中的量词大于 32766”

> ID：10625544
> 
> 赞同：6
> 
> 时间：2012-05-16T19:40:33.313
> 
> 标签：regex, perl

假设我想在一个大的（300,000 个字母）中找到“dogs”这个词，字母之间的距离**正好是**40,000 个字母。所以我这样做：

```
$mystring =~ m/d.{40000}o.{40000}g.{40000}s/; 
```

这在其他（较慢的）语言中会很好地工作，但在 Perl 中它会抛出“{,} 中的量词大于正则表达式中的 32766”。

所以：

1.  我们可以以某种方式使用更大的数字作为量词吗？
2.  如果没有，是否有另一种好方法可以找到我想要的东西？请注意，“狗”只是一个例子；我想对任何单词和任何跳转大小（并且快速）执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T19:46:56.063

如果您真的需要*快速*执行此操作，我会查看基于[Boyer-Moore string search](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)的想法的自定义搜索。正则表达式被解析为有限状态机。即使是这种 FSM 的巧妙、紧凑的表示也不会是执行您所描述的搜索的非常有效的方法。

如果你真的想继续你现在的路线，你可以连接两个表达式，就像在实践`.{30000}.{10000}`中一样。`.{40000}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T20:07:47.667

我认为[index](http://perldoc.perl.org/functions/index.html)可能更适合这项任务。完全未经测试的东西：

```
sub has_dogs {
    my $str = shift;
    my $start = 0

    while (-1 < (my $pos = index $$str, 'd', $start)) {
        no warnings 'uninitialized';
        if ( ('o' eq substr($$str, $pos +  40_000, 1)) and
             ('g' eq substr($$str, $pos +  80_000, 1)) and
             ('s' eq substr($$str, $pos + 120_000, 1)) ) {
             return 1;
         }
     }
     return;
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T20:57:57.587

40,000 = 2 * 20,000

```
/d(?:.{20000}){2}o(?:.{20000}){2}g(?:.{20000}){2}s/s 
```

# c - 传递矩阵作为参数

> ID：10625547
> 
> 赞同：5
> 
> 时间：2012-05-16T19:40:39.000
> 
> 标签：c, matrix, c89

我想传递两个矩阵作为参数。这些矩阵有不同的大小，我不明白我必须如何做这项工作：

```
#include <stdio.h>
#include <stdlib.h>

void f(int m[3][], int n);

int main()
{
  int A[3][3]={{1,2,3},{4,5, 6},{7,8,9}};
  int B[3][2]={{1,2},{3, 4}, {5, 6}};

  f(A, 3);
  f(B, 2);

  return 0;
}

 void f(int m[3][], int n)
 {
    int i,j;
    for(i=0;i<3;i++)
    {
      for(j=0;j<n;j++)
       printf("%5d", m[i][j]);
    }
    return;
 } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:46:18.237

我知道的唯一安全方法是在参数中包含矩阵维度，或者制作某种矩阵结构

选项 A) 尺寸作为参数

```
void f(int **m, int w, int h )
{
    int i,j;
    for(i=0;i<w;i++)
    {
      for(j=0;j<h;j++)
         printf("%5d", m[i][j]);
    }
    return;
} 
```

选项 B) 使用结构

```
typedef struct Matrix
{
    int w, h;
    int** m;
} Matrix;

void f ( Matrix *m )
{
    for ( int i = 0; i < m->w; ++i )
    {
        for ( int j = 0; j < m->h; ++j )
        {
            printf(%5d", m->m[i][j]);
        }
    }
} 
```

# html - 是否可以锁定或加密 SVG 图形？

> ID：10625549
> 
> 赞同：2
> 
> 时间：2012-05-16T19:41:00.757
> 
> 标签：html, webkit, svg

我正在研究使用 SVG 图形构建 Web 组合，该组合主要针对现代 Webkit 智能手机/平板电脑。我会考虑使用 SVG 来获得清晰度和动画属性，但我只是想知道是否可以**锁定**或**加密**SVG？出于版权目的保护我的图形？

谢谢

ķ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:06:29.390

总之，不。图像就是答案。

浏览器在某些时候需要对象的完整路径，任何人都可以拦截它。

如果您真的不想只使用图像，请确保在源代码中包含许可证。你真正需要的只是谷歌和律师。任何足够复杂的 svg 文件都是[可搜索的](https://www.google.ca/search?q=56.23%20C387.73%2054.23%20386.73%2049.23%20389.23%2048.73%20zM383.23%2059.73%20C385.73%2058.73%20393.23%2060.23%20392.73%2063.23)

# jquery - 使用 JSON.NET 编码撇号

> ID：10625550
> 
> 赞同：11
> 
> 时间：2012-05-16T19:41:10.430
> 
> 标签：jquery, asp.net-mvc-3, razor, json.net

说我有一个像

```
public class MyTestClass
{
    public MyTestClass()
    {
        Testing = "check ' out";
    }
    public string Testing { get; set; }
} 
```

和 JavascriptSerializer/JsonNet 序列化器如：

```
public IHtmlString ToJsonNet(object value)
{
    return new MvcHtmlString(JsonConvert.SerializeObject(value));
}

public IHtmlString ToJson(object value)
{
    var json = new JavaScriptSerializer();
    return new MvcHtmlString(json.Serialize(value));
} 
```

然后在一个视图中我有

```
 @(Serializers.ToJsonNet(new MyTestClass()))
 @(Serializers.ToJson(new MyTestClass())) 
```

JsonNet 将返回 {"Testing":"check ' out"}，而 JavascriptSerializer 将返回 {"Testing":"check \u0027 out"}。我希望创建一个像

```
var model = $.parseJSON('@jsonString'); 
```

但这仅在撇号被编码时才有效。否则，撇号使我的 javacript 看起来像

```
var model = $.parseJSON('{"Testing":"check ' out"}'); 
```

失败是因为插入的撇号使`parseJSON`我的字符串过早转义。

JavascriptSerializer 默认将撇号编码为 \u0027 而 JSON.NET（我想使用）没有。我怎样才能改变 JSON.NET 来做到这一点？有没有我缺少的设置？有没有一种不同的方法可以将我的 JSON 字符串解析为 javascript，其中撇号是可以的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:21:57.613

您是否尝试过用“\”转义撇号？

就像是`Testing = "check \' out";`

* * *

你也应该看看[这篇](https://stackoverflow.com/q/12042302/2182203)文章，这里似乎有一些有趣的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T10:02:02.137

尝试这个：

> ```
> {"Testing":"check \u0027 out"} 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:50:41.360

以下答案表明两者应该是等价的。 [https://stackoverflow.com/a/5022386/1388165](https://stackoverflow.com/a/5022386/1388165)

如果是 parseJSON 调用失败，也许参数中的双引号而不是单引号会有所帮助。

# sql - 有趣的 sql 用两个字符分割

> ID：10625552
> 
> 赞同：1
> 
> 时间：2012-05-16T19:41:22.943
> 
> 标签：sql, tsql

我需要为带有两个字符的拆分字符串编写函数。例如：**“海得拉巴 Hyd，测试”**

在上面的字符串中，我需要用空格（“”）和逗号（，）吐出，输出结果将保存在表格中

```
The oputput should be:
Hyderabad
Hyd,Test
Hyd
Test

CREATE function dbo.SplitString   
    (  
        @str nvarchar(4000),   
        @separator char(1)  
    )  
    returns table  

    AS      
    return (  
        with tokens(p, a, b) AS (  
               select   
                1,   
                1,   
                charindex(@separator, @str)  
            union all  
            select  
                p + 1,   
                b + 1,   
                charindex(@separator, @str, b + 1)  
            from tokens  
            where b > 0  
        )  

        select  
            p-1 SNO,  
            substring(  
                @str,   
                a,   
                case when b > 0 then b-a ELSE 4000 end)   
            AS word  
        from tokens  
      ) 
```

请帮忙......

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:49:28.787

对于您显示的结果，您不需要*新*的拆分功能。只是一个普通的，需要一个列表和一个分隔符。

```
SELECT
  second_split.*
FROM
  dbo.fn_split(@myList, ' ')   AS first_split
CROSS APPLY
(
  SELECT first_split.item
  UNION
  SELECT item FROM dbo.fn_split(first_split.item, ',')
)
  AS second_split 
```

first_split 将是`Hyderabad`and `Hyd,Test`。

第二个拆分将是... - `Hyderabad`UNION`Hyderabad`这只是`Hyderabad`
- 加上`Hyd,Test`UNION`Hyd`和`Test`

给...

*   `Hyderabad`
*   `Hyd,Test`
*   `Hyd`
*   `Test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:53:26.297

有几种方法可以做到这一点。您可能想要探索创建 SQL CLR，因为它可能会更快、更容易地进行您正在寻找的拆分。

[http://msdn.microsoft.com/en-us/library/ms254498(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms254498(v=vs.100).aspx)

这是一篇博客文章，可能也会有所帮助。

[http://dataeducation.com/faster-more-scalable-sqlclr-string-splitting/](http://dataeducation.com/faster-more-scalable-sqlclr-string-splitting/)

# php - PHP - 如果输入错误，不要转到下一页

> ID：10625553
> 
> 赞同：1
> 
> 时间：2012-05-16T19:41:31.747
> 
> 标签：php

我正在使用 .html 和 .php。在 default.html 中，用户必须输入一些信息，当单击按钮时，html 会发布到 default2.php。在 default2.php 中检查数据，如果正确，它将用户重定向到另一个页面。我遇到的问题是输入的数据错误。我在这里有两个问题：

1.  当数据错误时，我会将用户重定向到 default.html，因为如果我不这样做，它将保留在 default2.php 中，而 default2.php 对用户来说没有什么重要的东西可以看到。我不知道这是否是最好的方法。
2.  当输入的数据错误时，我希望在 default.html 中向用户发送回显消息。但我不知道如何从 default2.php 触发它。

我该如何解决这两个问题？谢谢...

* * *

### 默认.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">

</script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PHP4</title>
<style type="text/css">
body {
    background-color: #CCC;
}
</style>
</head>

<body>

<p>&nbsp;</p>

<form id="form1" name="form1" method="post" action="default2.php">
  <p>
    <label for="textfield1">User Name</label>
    <input type="text" name="username" id="username" />
  </p>
  <p>
    <label for="textfield2">Password</label>
    <input type="password" name="password" id="password" />
  </p>
  <p>
    <input type="submit" name="button1" id="button1" value="Submit"  />
    <br />
    <br />
  <label id="label1">
  </label></p>
  <p>&nbsp;</p>  
</form>
<p>&nbsp;</p>

</body>
</html> 
```

### 默认2.php：

```
<?php
require 'connection.php';

  if (isset($_POST['button1'])) {

    $username_v = $_POST['username'];
    $password_v = $_POST['password'];

    // Then you can prepare a statement and execute it.    
    $stmt = $dbh->prepare("CALL login(?, ?)");
    $stmt->bindParam(1, $username_v, PDO::PARAM_STR); 
    $stmt->bindParam(2, $password_v, PDO::PARAM_STR); 

    // call the stored procedure
    $stmt->execute();

    if ($row = $stmt->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) 
    {
          header("Location: main.php");
    }
    else
    {
        header("Location: default.html");
    }

  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:54:47.597

只需添加一些参数

```
header("Location: default.html?test=failed"); 
```

并且在 html 中，当变量 test 设置为失败时，使用 Javascript 来显示一些有意义的东西。[您可以在此处](http://www.onlineaspect.com/2009/06/10/reading-get-variables-with-javascript/)找到如何使用 javascript 获取 url 参数值的教程。

希望有帮助。

除此之外，您可以在不离开页面并突出显示验证错误的情况下`PHP`在您的`default.html`甚至请求中进行验证。`AJAX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:55:52.170

如果您将 default.html 设置为 PHP 文件，则可以通过 URL 传递一个变量，这将允许您检查该变量是否已被传递`$_GET[]`，并向用户显示一条消息。

例如，如果您将用户转发到

> default.php?error=1

在默认页面上，您可以有一段代码，例如

```
if (isset($_GET['error'])) {
echo "Show user a message here";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:21:48.817

就个人而言，我不喜欢使用查询字符串向用户公开诸如*“错误”*和*“无效”之类的状态。*在这种情况下，我会将这两个文件合并到一个 PHP 文件中，PHP 代码在顶部，HTML 代码在底部。

PHP 代码中的`if`语句是：

```
if ($row = $stmt->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) 
{
    header("Location: main.php");
    exit;
}
else
{
    $error = true;
} 
```

在要显示消息的 HTML 中向下：

```
<?php

if( isset( $error ) && $error )
    echo 'You have entered the wrong data!';

?> 
```

当然，在表单元素中，您必须删除`action="default2.php"`.

如果您更喜欢分离逻辑和标记，您可以更改`default.html`为例如`template.php`并将其包含在控制器 php 文件的末尾。

我只是不喜欢没有任何仅充当重定向器的内容的额外页面的想法。

# php - 如果输入的值在数据库中有效，则更改输入背景颜色

> ID：10625559
> 
> 赞同：0
> 
> 时间：2012-05-16T19:41:56.130
> 
> 标签：php, javascript

我想做的逻辑是：

```
input field starts white (Normal);
after somebody finish typing, if the email does not exists, the input gets light red;
if the email exists in the database, the input becomes white again; 
```

我有这样的代码：

索引.php

```
<?php
include 'my database connection page';
include 'page that return me an array with all the emails';
?>
<form method="POST">
    <input type="text" name="email" id="email_field" onFocus="changeColorEmail(this)">
    <input type="submit">
</form> 
```

脚本.js

```
function changeColorEmail(which) {
    which.value = which.value.split(' ').join('')
        if (which.value == "<? echo $user_data['user_email'] ?>") {
            which.style.background = '#ffffff';
    }else {
            which.style.background = "#ffebe8";
    }
} 
```

任何想法表示赞赏！

**user.php**（包含验证电子邮件是否存在于数据库中的函数）

```
function email_exists($email){
    return (mysql_result(mysql_query("SELECT COUNT(user_id) FROM user WHERE user_email = '$email'"), 0) == 1) ? true : false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:46:30.423

好的，有两种方法可以做到这一点：

**困难的方式：** 您将需要捕获 onblur 事件 - 当他们离开电子邮件框时将触发该事件，您还需要一些 AJAX 将该值发送回您的脚本以测试它是否有效或不是。

**jQuery：**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"/>
<script>

function ValidateEmail(email)
{
   var url = 'validateemail.php?email=' + email;

   $.getJSON( url, function(data) {

       var result = jQuery.parseJSON(data);
       var ctrl = $("#email_field");

       if(result.isValid == "true") {
           ctrl.addClass("valid").removeClass("inValid");
       }
       else {
           ctrl.addClass("inValid").removeClass("valid");
       }
   });
}

$(document).ready(function() {

     // change blur to keyup if you want it to validate as they type (bad idea)
     $("#email_field").bind("blur", function(){
         ValidateEmail($(this).val());
     });
});

</script> 
```

*（未经测试，但应该给你大致的想法）*

您需要在服务器上安装一个名为 validateemail.php 的脚本 - 它应该获取 email 参数，然后返回：

```
{"isValid": "true"} or {"isValid": "false"} 
```

取决于电子邮件的价值。

**简单的方法：** 向您的页面添加两个 css 类（有效和无效） - 提交页面时，如果电子邮件存在，则将有效类添加到输入控件，如果它不添加无效类。

**CSS：**

```
.valid { color: #ffffff; }
.invalid { color: #ffebe8; } 
```

**PHP：**

```
<input type="text" 
    name="email" 
    id="email_field" 
    onFocus="changeColorEmail(this)"
    <?echo 'class="'.(email_exists($_GET['email']) ? 'valid': 'inValid').'"';?>
> 
```

*先试试第二个*

更新：错误修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:53:18.097

您应该更改`onFocus`为`onkeyup`，因为您似乎想在用户键入时验证电子邮件地址。

从交互设计的角度来看，我建议您*仅*在最终输入无效时将颜色更改为红色，并更改验证过程的时间。

尽管红色确实很容易与“错误”相关联，但当赋予字段焦点已被视为错误时，它可能会让用户感到困惑。我建议您开始验证`onblur`事件何时触发 - 当用户显然完成打字时 - 和/或当用户仍然有焦点但在一定时间内没有按下某个键时。

如果我是用户，那将是我觉得最舒服的行为，也是我直接解释为*“我输入了无效的电子邮件地址”*的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:03:43.250

首先，您的用例似乎存在一些可用性问题。通常，一个字段在失去焦点之前不会给出验证结果的指示。这样，您就不会在用户尚未完成输入数据时因验证错误而打扰他们。

关于如何完成异步验证，您将使用 XMLHttpRequest（例如使用 jQuery 的`$.ajax()`）。

在您的用例中，仅当电子邮件地址已存在时输入才有效。在这种情况下，您可以创建一个单独的 PHP 页面（例如`email_exists.php`），它只是简单地回显文本`true`或`false`取决于传递的电子邮件是否存在。

例如
请求：`http://example.com/email_exists.php?email=me@awesome.com`
响应：`true`或者`false`它可能是。

最后，为您的输入注册一个“onChange”或“onBlur”事件监听器。当它触发时，您`$.ajax()`将电子邮件地址发送到上述 PHP 页面并检查响应。然后，您可以根据响应添加/删除类，以使输入元素具有所需的外观。

# javascript - Javascript How to trigger a function when we User Tries to Exit or Refresh the Page

> ID：10625560
> 
> 赞同：0
> 
> 时间：2012-05-16T19:42:01.100
> 
> 标签：javascript, html, ajax

When a user tries to exit the page after reading price of the product, i want to offer them 1st discount.

1.  If they select **'YES'** they buy the product instead of closing the window, if they select **'NO'** then i would make 2nd discount offer and this time it will be the last offer.

2.  If they click **'NO'** again even second time, his browser will close or else he would buy the product at the given 2nd discount price.

**My Example is illustrated below:**

```
<script type="text/javascript">
function getOffers()
{
  var question1 = confirm("Wait! we are now offering this Product in $25.00, buy it?");
  if(question1 == 'true')
  {
        alert('You have purchased this product for $25.00');
  }
  else
  {
        var question2 = confirm("Wait! we would like to make one Final Offer, price of Product in $15.00, buy it?");
        if(question2 == true)
        {
              alert('You have purchased this product for $15.00');
        }
        else
        {
              //Close this window
        }
  }
}
</script> 
```

My question is, **how can i trigger this function when user tries to exit (or) refresh the page.**

## Additional INFO:

I have rewritten the code and trying to fix the annoying page load popup, can any one suggest me on this?

```
<script type="text/javascript">
function getOffers()
{
  //alert(firrsTime);
  if(firstTime == 'no')
  {
      var question1 = confirm("Wait! we are now offering this Product in $25.00, buy it?");
      if(question1 == 'true')
      {
            alert('You have purchased this product for $25.00');
      }
      else
      {
            var question2 = confirm("Wait! we would like to make one Final Offer, price of Product in $15.00, buy it?");
            if(question2 == true)
            {
                  alert('You have purchased this product for $15.00');
            }
            else
            {
                  //Close this window
            }
      }
  }
}

window.onunload = function(){
    firstTime = 'no';
    getOffers();
}
window.onload = function(){
    firstTime = 'yes';
    getOffers();
}
</script> 
```

I am trying to pass a global variable ***'firstTime'*** to check if it is from onLoad then dont display offer if it is from onUnload then display offer. Is there any solution on this problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:46:14.983

使用 onunload 和 onload。

```
window.onunload = function(){getOffers();}
window.onload = function(){getOffers();} 
```

虽然它会在用户首次加载页面时显示，所以我不建议这样做。

关于区分首次加载和刷新的方法，还没有尝试过，但我在某处找到了这段代码：

```
 function OnCrmPageLoad()
{
   //bind to the onsave event
   crmForm.attachEvent(“onsave”,OnCrmPageSave);

   if (crmForm.new_ispostback.DataValue ==  true)
   {
           //form was saved
           //reset the field
            crmForm.new_ispostback.DataValue = false;
   }
}

function OnCrmPageSave()
{
    // validate form if needed
    crmForm.new_ispostback.DataValue = event.returnValue = true;
    crmForm.new_ispostback.ForceSubmit = true;
     return true;
} 
```

玩弄它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T19:46:29.443

```
<body onunload="OnUnload()"> 
```

然后

```
function OnUnload()
{
   //put code here
} 
```

# ruby-on-rails-3 - 在不使用路径辅助方法时使用 link_to 添加 url 参数

> ID：10625567
> 
> 赞同：4
> 
> 时间：2012-05-16T19:42:33.740
> 
> 标签：ruby-on-rails-3

我正在使用 link_to 来构建我的 URL，我正在做这种事情

```
<%= link_to "new wire", [:new, @object, @post], :class => 'green', ... 
```

但是我如何通过 link_to 添加 url 参数？例如，我希望 URL 是

```
http://www.something.com/groups/3/posts/4?a_param=23 
```

无需使用 new_group_post_path(@group, @post, :a_param => '23') 助手。

更新：

更清楚一点，我不知道@object 是什么，它可能是 Group 对象、Member 对象等，我也不想使用长且绑定的 if/elsif/elsif...end 条件来定位哪个object 反过来知道什么 url 助手（即 new_group_post_path() 或 new_member_post_path() ...）因此让 Rails 使用上面显示的数组结构为我猜测 URL 的原因 ie.[@object, @post...] .

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T05:54:13.267

这应该有效：

```
<%= link_to "new wire", polymorphic_path([:new, @object, @post], a_param: '23', b_param: '24'), :class => 'green', ... 
```

有关详细信息，请参阅[polymorphic_path](http://apidock.com/rails/ActionController/PolymorphicRoutes/polymorphic_path)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:59:44.770

将其作为散列传递给您在 link_to 中的 url 助手：

```
<%= link_to "new wire", new_object_url(@object, :a_param => 23), :method=> :post, :class => 'green', ... 
```

# java - 在一个实体中休眠 OneToMany

> ID：10625576
> 
> 赞同：1
> 
> 时间：2012-05-16T19:43:22.630
> 
> 标签：java, hibernate

我尝试在一个实体中创建关系（一个表中的 OneToMany，父 - 子关系）并且我有一个类：

```
public class MenuItem {
@Id
@GeneratedValue
private long Id;
private String content;
private String name;

@ManyToOne(cascade = { CascadeType.ALL })
@JoinColumn(name="parent")
private MenuItem parent;

@OneToMany(cascade = CascadeType.ALL, mappedBy="parent")
private Set<MenuItem> childrens  = new HashSet<MenuItem>();

//getters and setters

} 
```

加载数据效果很好，但是当我尝试保存 MenuItem 时，出现以下错误：

“字段‘childrens_id’没有默认值”

Hibernate 尝试保存 MenuItem 相关值（我在日志中看到它），但是，我认为，它尝试创建另一个 Join 表和 finnaly 事务失败。

这完全显示在： [http](http://www.roseindia.net/hibernate/hibernate4/OnetoManySelfJoin.shtml) ://www.roseindia.net/hibernate/hibernate4/OnetoManySelfJoin.shtml 但不起作用。我使用了 Hibernate 4.1.1 和 Tomcat 服务器 7。

**已解决**：删除并再次创建数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:00:19.690

猜测最好的办法是删除你的数据库并再次运行。似乎您有 hibernate/jpa impl 设置来生成您的数据库方案，但是代码和表太多不同步了。您的表中可能有一个“悬空”字段。

作为旁注：“狂野”的猜测：您在`@JoinColumn(name="childrens_id")`将其更改为上面的代码之前尝试过吗？（与 mappedBy 值混淆？）

# mysql - SQL 通过 myODB 不返回任何行，但在 SQL 中有行

> ID：10625583
> 
> 赞同：0
> 
> 时间：2012-05-16T19:43:48.680
> 
> 标签：mysql, odbc

我有一个名为“tbl_einheit”的 SQL 表。phpmyadmin 在表中显示超过 14.000 行。通过网页访问时，表格为空“eof”。

我最小化了 SQL 语句，并删除了所有 WHERE、ORDER BY 元素，这样简单

```
SELECT * FROM tbl_einheit 
```

是声明。但它仍然返回一个空的结果集。我也试过

```
SELECT E . * FROM tbl_einheit E, ( SELECT @a := NULL ) AS init LIMIT 0,30 
```

也是空的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:46:34.130

1.  在您的代码中添加跟踪以确保您正在执行您认为的代码。
2.  仔细检查您的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:12:10.580

原因是你的mysql dtaabse中有一些数据类型，ASSp中的ADODB连接器无法识别，所以asp认为它是EOF。

在 MySQL 中使用 CAST 将数据类型转换为 asp 可以理解的，例如：

```
SELECT CAST(SUM(Entry_Data_1) as UNSIGNED) as score FROM contests_entries 
```

# python - 在多线程 C 应用程序中嵌入 python

> ID：10625584
> 
> 赞同：19
> 
> 时间：2012-05-16T19:43:57.627
> 
> 标签：python, c, multithreading, gil, python-embedding

我将 python 解释器嵌入到多线程 C 应用程序中，我对应该使用哪些 API 来确保线程安全感到有些困惑。

根据我收集到的信息，在嵌入 python 时，在调用任何其他 Python C API 调用之前，由嵌入器负责处理 GIL 锁。这是通过以下功能完成的：

```
gstate = PyGILState_Ensure();
// do some python api calls, run python scripts
PyGILState_Release(gstate); 
```

但这似乎还不够。我仍然遇到随机崩溃，因为它似乎没有为 Python API 提供互斥。

在阅读了更多文档后，我还添加了：

```
PyEval_InitThreads(); 
```

就在调用之后，`Py_IsInitialized()`但这就是令人困惑的部分。文档指出此功能：

> 初始化并获取全局解释器锁

这表明当这个函数返回时，GIL 应该被锁定并且应该以某种方式解锁。但实际上这似乎不是必需的。有了这条线，我的多线程工作完美，并且功能保持互斥`PyGILState_Ensure/Release`。
当我在应用程序在随后的调用中很快死锁`PyEval_ReleaseLock()`后尝试添加.`PyEval_ReleaseLock()``PyImport_ExecCodeModule()`

那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-26T15:56:22.823

我遇到了完全相同的问题，现在可以通过使用`PyEval_SaveThread()`after 立即解决`PyEval_InitThreads()`，正如您上面建议的那样。但是，我的实际问题是我使用`PyEval_InitThreads()`了`PyInitialise()`它，然后`PyGILState_Ensure()`在从不同的后续本机线程调用时导致阻塞。总之，这就是我现在所做的：

1.  有全局变量：

    ```
    static int gil_init = 0; 
    ```

2.  从主线程加载本机 C 扩展并启动 Python 解释器：

    ```
    Py_Initialize() 
    ```

3.  从多个其他线程，我的应用程序同时对 Python/C API 进行大量调用：

    ```
    if (!gil_init) {
        gil_init = 1;
        PyEval_InitThreads();
        PyEval_SaveThread();
    }
    state = PyGILState_Ensure();
    // Call Python/C API functions...    
    PyGILState_Release(state); 
    ```

4.  从主线程停止 Python 解释器

    ```
    Py_Finalize() 
    ```

我尝试过的所有其他解决方案要么导致随机 Python sigfaults 要么使用`PyGILState_Ensure()`.

Python 文档确实应该对此更加清楚，并且至少为嵌入和扩展用例提供了一个示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T12:33:10.907

最终我想通了。
后

```
PyEval_InitThreads(); 
```

你需要打电话

```
PyEval_SaveThread(); 
```

同时正确释放主线程的 GIL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-22T18:16:56.673

请注意，`if (!gil_init) {`@forman 答案中的代码只运行一次，因此它可以在主线程中完成，这允许我们删除标志（`gil_init`必须正确地是原子的或以其他方式同步的）。

`PyEval_InitThreads()`仅在 CPython 3.6 及更早版本中才有意义，并且在 CPython 3.9 中已弃用，因此必须使用宏对其进行保护。

鉴于这一切，我目前使用的是以下内容：

在主线程中，运行所有

```
Py_Initialize();
PyEval_InitThreads(); // only on Python 3.6 or older!
/* tstate = */ PyEval_SaveThread(); // maybe save the return value if you need it later 
```

现在，每当您需要调用 Python 时，请执行

```
state = PyGILState_Ensure();
// Call Python/C API functions...    
PyGILState_Release(state); 
```

最后，从主线程，停止 Python 解释器

```
PyGILState_Ensure(); // PyEval_RestoreThread(tstate); seems to work just as well
Py_Finalize() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T05:50:12.253

让一个多线程 C 应用程序尝试从多个线程与单个 CPython 实例的多个 Python 线程进行通信对我来说看起来很冒险。

只要只有一个 C 线程与 Python 通信，即使 Python 应用程序是多线程的，您也不必担心锁定问题。如果您需要多个 python 线程，您可以通过这种方式设置应用程序，并让多个 C 线程通过队列与单个 C 线程进行通信，该单个 C 线程将它们分配给多个 Python 线程。

一种可能对您有用的替代方法是为每个需要它的 C 线程设置多个 CPython 实例（当然 Python 程序之间的通信应该通过 C 程序进行）。

另一种选择可能是 Stackless Python 解释器。这取消了 GIL，但我不确定您是否遇到了将其绑定到多个线程的其他问题。stackless 是我的（单线程）C 应用程序的直接替代品。

# algorithm - 检查非线性函数 f 是否始终为正的算法

> ID：10625585
> 
> 赞同：6
> 
> 时间：2012-05-16T19:44:11.043
> 
> 标签：algorithm, maple, nonlinear-functions, nonlinear-optimization

是否有一种算法来检查给定的（可能是非线性的）函数 f 是否总是正的？

我目前的想法是找到函数的根（使用 newton-raphson 算法或类似技术，请参阅[http://en.wikipedia.org/wiki/Root-finding_algorithm](http://en.wikipedia.org/wiki/Root-finding_algorithm)）并检查导数，或找到最小值f，但它们似乎不是这个问题的最佳解决方案，而且求根算法也存在很多收敛问题。

比如在 Maple 中，function **verify**可以做到这一点，但是我需要在自己的程序中实现。Maple 验证帮助：[http](http://www.maplesoft.com/support/help/Maple/view.aspx?path=verify/function_shells) ://www.maplesoft.com/support/help/Maple/view.aspx?path=verify/function_shells Maple 示例：assume(x,'real'); 验证（x^2+1,0，'大于'）；--> 返回真，因为对于每个 x 我们都有 x^2+1 > 0

[编辑] 问题的一些背景：函数 $f$ 是电路的右手边微分非线性模型。非线性电路可以通过应用修正节点分析 (MNA) 建模为一组常微分方程，为简单起见，我们只考虑一维系统，因此 $x' = f(x)$ 其中 $f$ 描述电路，例如 $f$ 可以是 $f(x) = 10x - 100x^2 + 200x^3 - 300x^4 + 100x^5$ （非线性隧道二极管的模型）或 $f=10 - 2sin (4x)+ 3x$（约瑟夫森结的模型）。

$x$ 是有界的，$f$ 只在区间 $[a,b] \in R$ 中定义。$f$ 是连续的。我也可以假设 $f$ 是 Lipschitz 且 Lipschitz 常数 L>0，但我不想这样做，除非我必须这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:51:49.743

如果我正确理解了您的问题，则归结为计算一个区间内的（实）根数，而不必识别它们。事实上，你甚至不需要得到确切的数字，只要它是否等于零。

如果您的函数是多项式，我认为[Sturm 定理](http://en.wikipedia.org/wiki/Sturm%27s_theorem)可能适用。Wikipedia 文章声称其他两个程序是首选的，因此您可能也想查看这些程序。我不确定[笛卡尔的符号规则是否](http://en.wikipedia.org/wiki/Descartes%27_rule_of_signs)适用于区间，但[布丹定理](http://en.wikipedia.org/wiki/Budan%27s_theorem)似乎确实有效。

# android - 在滚动时沿圆形路径旋转图标/视图 - Android

> ID：10625587
> 
> 赞同：0
> 
> 时间：2012-05-16T19:44:15.627
> 
> 标签：android, android-layout, android-animation, android-view, android-scrollview

我基本上是在尝试实现类似于[this](http://rdsquared.wordpress.com/2011/09/06/circular-layout-and-scrolling-part-2/)的东西。可悲的是，这是一个 iOS 教程。

我已经搜索了大多数可能的关键字以循环方式移动某些内容，但找不到任何开始。至少有人可以提供有关如何在 android 上被黑客入侵的任何提示吗？请。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:53:25.290

我使用旋转动画来围绕一个点旋转图像。

```
 double r = Math.atan2(evt.getX() - turntable.getWidth() / 2, turntable.getHeight() / 2 - evt.getY());
    rotation = (int) Math.toDegrees(r);

    if (evt.getAction() == MotionEvent.ACTION_MOVE)
        {
                x= (int)evt.getX();
                y = (int)evt.getY();
                    rotateAnim = new RotateAnimation(angle,rotation-50,200,100);
                    rotateAnim.setFillAfter(true);
                    ImageView.setanimation(rotateAnim );
                    ImageView.startAnimation(rotateAnim);
          } 
```

你也可以使用矩阵

```
 float newRot = new Float(rot);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.disc);

    Matrix matrix = new Matrix();
    matrix.postRotate(newRot - 50);

    Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
    turntable.setImageBitmap(redrawnBitmap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:04:37.017

这在自定义控件中很容易做到。只需创建一个扩展 View 的类并覆盖 draw() 方法。然后您可以监听触摸并计算用户旋转控件的距离。然后您只需要使用该数据来旋转画布并在其上绘制数字。

-= 更新 =- 当你重写 draw 方法时，你会得到一个 Canvas 对象。该对象可让您随心所欲地绘制它。它看起来像这样：

```
@Override
public void draw(Canvas c)
{
    c.rotate(amount);
    c.drawBitmap(myImage);
} 
```

这是完整[Canvas 文档](http://developer.android.com/reference/android/graphics/Canvas.html)的链接。

# c# - 如何知道以编程方式传递给 cmdlet 的所有参数？

> ID：10625588
> 
> 赞同：1
> 
> 时间：2012-05-16T19:44:16.290
> 
> 标签：c#, powershell, powershell-2.0, cmdlets, cmdlet

我在 .net 中实现了客户 cmdlet。我想知道用户传递给它的所有参数。

```
My-Cmdlet -foo -bar -foobar 
```

基本上我想知道用户以编程方式使用参数 foo、bar、foobar 执行了这个 cmdlet。

看起来在脚本中我们可以使用： $PSBoundParameters.ContainsKey('WhatIf')

我需要.net（c＃）中的等价物

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T20:31:19.217

据我记得： $PSBoundParameters 只是 $MyInvocation.BoundParameters 的快捷方式： $MyInvocation.BoundParameters.Equals($PSBoundParameters) True

如果您想在*您*编写的 cmdlet 中获取相同的信息，您可以像这样获取它...：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management.Automation;

namespace Test
{
    [Cmdlet(VerbsCommon.Get, "WhatIf", SupportsShouldProcess = true)]
    public class GetWhatIf : PSCmdlet
    {

        // Methods
        protected override void BeginProcessing()
        {
            this.WriteObject(this.MyInvocation.BoundParameters.ContainsKey("WhatIf").ToString());
        }
    }
} 
```

代码是快速的'n'dirty，但你应该得到图片。免责声明：我不是开发人员，所以我可能做错了。;)

HTH 巴特克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:51:16.710

在我的脑海中，你不能没有访问代码，除非你围绕 cmdlet 创建一个代理命令（用函数包装命令）并将你的自定义代码添加到它。另一个想法是检查控制台历史记录中最后执行的命令或类似方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T01:30:19.473

一些whatifpreference的this.GetVariable总是返回false。

我通过使用 myinvocation.buildparameters 字典解决了这个问题。

```
public bool WhatIf
{
    get
    {                                
        //if (this.GetVaribaleValue<bool>("WhatIfPreference", out whatif))
        return this.MyInvocation.BoundParameters.ContainsKey("WhatIf")
            && ((SwitchParameter)MyInvocation.BoundParameters["WhatIf"]).ToBool(); 
    }
} 
```

问候，梦想家

# directx - DirectX 11：同时使用多个适配器

> ID：10625595
> 
> 赞同：9
> 
> 时间：2012-05-16T19:44:45.287
> 
> 标签：directx, direct3d11

我们需要从一台 pc 驱动 8 到 12 台显示器，所有显示器都渲染单个 3d 场景图的不同视图，因此必须使用多个显卡。我们目前在 dx9 上运行，因此正在寻求迁移到 dx11 以希望使这更容易。

初步调查似乎表明，显而易见的方法是行不通的——除非我们从单独的进程中驱动每张卡，否则性能很差。网络搜索一无所获。任何人都可以建议使用 dx11 从单个进程同时使用多张卡的最佳方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T21:38:29.737

我看到您已经找到了解决方案，但我认为最好将我自己最近的经验提供给遇到这个问题的其他人......

是的，您可以从单个进程驱动任意数量的适配器和输出。以下是一些可能有用的信息：

在 DXGI 和 DX11 中：

每张显卡都是一个“适配器”。每个监视器都是一个“输出”。有关通过这些枚举的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205075%28v=vs.85%29.aspx#Enumeration)

一旦有了指向要使用的适配器的指针，就可以使用[D3D11CreateDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476082%28v=vs.85%29.aspx)为每个适配器创建一个设备 (ID3D11Device)。也许您想要一个不同的线程来与您的每个设备进行交互。如果这有助于为您加快处理速度，该线程可能具有特定的处理器亲和性。

一旦每个适配器都有自己的设备，就为每个输出创建一个[交换链](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174537%28v=vs.85%29.aspx)和[渲染目标](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476517%28v=vs.85%29.aspx)。您还可以在使用时为每个输出[创建深度模板视图。](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476507%28v=vs.85%29.aspx)

创建交换链的过程需要设置您的窗口：每个输出一个窗口。我认为*从*包含交换链的窗口驱动渲染没有太多好处。您可以将窗口创建为交换链的主机，然后完全忘记它们。

对于渲染，您需要遍历每个设备的每个输出。对于每个输出，将设备的渲染目标更改为您使用[OMSetRenderTargets](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464%28v=vs.85%29.aspx)为当前输出创建的渲染目标。同样，如果您愿意，您可以在不同的线程上运行每个设备，因此每个线程/设备对将通过输出进行渲染有自己的迭代。

以下是一些在完成此过程时可能会有所帮助的链接：

[每台显示器显示不同的图像 directX 10](https://stackoverflow.com/questions/10744788/display-different-images-per-monitor-directx-10?answertab=active#tab-top)

[Windows 7 上的 DXGI 和 2+ 全屏显示](https://stackoverflow.com/questions/15423021/dxgi-and-2-full-screen-displays-on-windows-7/15452007#15452007)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025%28v=vs.85%29.aspx#multiple_monitors](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025%28v=vs.85%29.aspx#multiple_monitors)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:15:28.500

也许您不需要升级 Directx。
见[这篇文章](http://msdn.microsoft.com/en-us/library/bb206364%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:55:09.960

使用 IDXGIFactory 枚举可用设备，为每个设备创建一个 ID3D11Device，然后从不同的线程提供它们。应该可以正常工作。

# asp.net-mvc-3 - ASP.NET MVC 3 应用程序导致浏览器超时

> ID：10625596
> 
> 赞同：1
> 
> 时间：2012-05-16T19:44:53.350
> 
> 标签：asp.net-mvc-3, entity-framework, iis-7.5

我有一个首先使用 Entity Framework 4.3 代码的 ASP.NET MVC 3 应用程序。该应用程序可与 Visual Studio 中的 WebDev 服务器完美配合。一旦应用程序在 IIS 7.5 中运行，服务器偶尔会不再响应。浏览器会一直等到超时。此外，刷新页面也无济于事。只有当浏览器关闭并重新启动时，IIS 才会向浏览器提供响应。

工作流程在这里被利用到 0%。因此，无限循环被排除在外。当我使用调试器检查工作进程时，所有线程都在外部代码中。即使使用 WinDbg，我也无法确定原因。

应用程序将 DbContext 与 UnitOfWork 模式一起使用。控制器通过依赖注入接收一个 UnitOfWork 对象。依赖解析是通过 Unity.Mvc 包的 UnityDependencyResolver 完成的。Entity Framwork 也用于我自己的 MembershipProvier 和角色提供者，但这里是显式创建和销毁的 DbContext。

我很绝望。什么可能导致这种行为？

# networking - POSIX 套接字 bind() 练习

> ID：10625597
> 
> 赞同：1
> 
> 时间：2012-05-16T19:44:53.710
> 
> 标签：networking, posix

我正在尝试解决以下介绍性 POSIX 套接字练习：

编写一个 TCP 回显客户端实现“使用 bind() 以便系统选择地址和端口”。

（我假设“系统”是指操作系统。）

我不明白为什么当 connect() 以上述方式执行绑定时需要调用 bind() （如果我不正确，请纠正我）。此外，提供给 bind() 调用的套接字地址需要哪些 sin6_addr 和 sin6_port 值才能完成此行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:59:20.233

你是对的，`bind`不需要打电话。`connect`如果您不选择源地址和源端口，系统会选择您的源地址和源端口`bind`。

这是一个练习。它只是测试你是否知道如何使用`bind`这种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:18:00.307

> 我不明白为什么当 connect() 以上述方式执行绑定时需要调用 bind() （如果我不正确，请纠正我）。

你是对的。

> 此外，提供给 bind() 调用的套接字地址需要哪些 sin6_addr 和 sin6_port 值才能完成此行为？

IPv4 的 INADDR_ANY。我将把 IPv6 作为练习留给读者。

您还应该指定零作为端口号，然后系统将选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T20:14:55.803

编辑：这与所要求的相反。对不起，我认为问题是关于*用户*选择 IP 地址和端口。感谢 EJP 指出这一点。

* * *

[这](https://stackoverflow.com/questions/4852256/need-a-complete-snippet-example-of-binding-tcp-client-socket)应该是您正在寻找的。

这应该是最有趣的部分：

```
clnt_addr.sin_family = AF_INET;
clnt_addr.sin_addr.s_addr = INADDR_ANY;
clnt_addr.sin_port = htons(33333);
if (bind(sockfd, (struct sockaddr *) &clnt_addr,
          sizeof(clnt_addr)) < 0) 
          error("ERROR on binding"); 
```

在此示例中，套接字仅在 connect() 之前绑定到所需的端口 (33333)，但在您的练习中，您可以将上述代码的第二行更改为：

```
clnt_addr.sin_addr.s_addr = inet_addr("192.168.0.1"); 
```

让套接字也绑定在特定的 IP 地址上。这里重要的是在 connect() 之前绑定套接字将 TCP/IP 通信的端点设置为使用所需的 IP 地址/端口。如果没有 bind()，您的套接字将是无限的：内核将为您选择源 IP 地址，并为您的套接字分配一个随机源端口。

# redirect - WebSphere、sendRedirect 和 HTTPS

> ID：10625603
> 
> 赞同：1
> 
> 时间：2012-05-16T19:45:16.753
> 
> 标签：redirect, https, websphere

环境：WebSphere App Server / WebSphere Portal 7，由 IBM IHS/Apache httpd 使用 was_ap20_module / mod_was_ap20_http 提供前端。

我有一个带有重定向的 servlet 或 JSP 页面，例如

```
response.sendRedirect("/wps/myportal/....") 
```

生成的 HTTP 最终得到了 IHS/Apache 端点的正确主机和端口，但协议错误。它是http而不是https。

例如，如果 IHS/Apache 正在侦听`https://myserver.com`并且 WAS 处于打开状态`http://192.168.12.34:12345`（所有端口/主机都是假的），那么我的重定向返回为`http://myserver.com`- 正确的主机和端口但错误的协议。

WebSphere 如何确定要使用的正确主机/端口而不是协议？如何强制执行所需的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:30:38.983

添加 Apache mod_headers 以在请求转发到 websphere 之前添加自定义标头，在 websphere 中，将 httpsIndicatorHeader 设置为该自定义标头，然后 websphere 将知道切换到 https

[http://www.ibmconnections.org/wordpress/index.php/tag/was-ssl-http-https/](http://www.ibmconnections.org/wordpress/index.php/tag/was-ssl-http-https/) http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic= %2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frweb_custom_props.html

# java - 创建后如何调用流程操作？

> ID：10625605
> 
> 赞同：2
> 
> 时间：2012-05-16T19:45:34.077
> 
> 标签：java

我正在编写创建一个流程的简单类，我希望使用该流程可以执行的操作（方法），但我不知道如何..

我的简单方法是：

```
 public void initProcesses()
    {
        Process pA;
        Process pB;
        Process pC;

        try 
        {
            pA = Runtime.getRuntime().exec("java -cp ProccesA.java ");
                    Class<ProccesA> a = pA.getClass<ProccesA>();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
        }
    } 
```

现在，我不确定我是否知道 getclass 是否会有所帮助（而且我知道我可以使用 reflation 代替）但我需要通过流程来做到这一点，所以这是我的问题，

有人对我如何使用我的进程 ProccessA.Java 并使用 hie 方法有任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:14:59.103

正如其他人指出的那样，您不能直接在另一个进程中调用 Java 对象的方法。

但是，您可以使用[Java RMI ，或者使用](http://docs.oracle.com/javase/tutorial/rmi/index.html)[套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/)构建您自己的类似接口。

但是，请仔细考虑您是否真的需要一个单独的进程，因为进程间通信会使代码复杂化并且有很多性能开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:51:44.430

`Runtime.exec()`通常意味着从 Java 中启动非 Java 进程。无法访问该进程中的任何内容*（* stdout 和 stderr 等内容除外）。

可能你可能想做这样的事情：

```
ProcessA instance = new ProcessA();
instance.someMethod(); 
```

# javascript - 在另一个 JS 文件中加载 JavaScript 文件

> ID：10625606
> 
> 赞同：1
> 
> 时间：2012-05-16T19:45:39.370
> 
> 标签：javascript, jquery, node.js, socket.io

我正在使用`node.js`和`socket.io`做服务器/客户端的事情。在我的服务器上，因为它不在网页上，有没有办法可以加载最新的文件（或最新的 jQuery？），这样我就可以在我的服务器 js 文件中使用 jQuery 函数。

我试着做`npm install jquery`然后将文件夹拖到我的`jquery`文件夹中`node_modules`到我的网站上。然后在我的文件顶部我放了`var $ = require('jQuery');`然后我运行它，我得到了错误`Cannot find module 'location'`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:58:38.257

我遇到了同样的问题。我创建了一个小型测试应用程序（使用 express），重新安装了 jquery，一切都开始工作了。

检查我的初始项目，一些更改似乎很重要

1.  我为 jquery 和 jsdom 做了一个 npm unisntall
2.  我做了一个 npm install jquery （注意，小写）
3.  我将 require('jQuery') 更改为 require('jquery') （再次，小写）

我认为重要的部分是删除和重新安装 jsdom 和 jquery，但其他部分则需要让事情再次正常工作。

# java - 以 1:n 关系存储对象时出现 ConstraintViolationException

> ID：10625610
> 
> 赞同：0
> 
> 时间：2012-05-16T19:45:57.513
> 
> 标签：java, hibernate, jpa

我有两个类 PLibObject 和 PLibEntry。一个 PLibObject 可以有多个 PLibEntries。一个 PLibEntry 只能有一个 PLibObject。

使用 PLibEntry 存储 PLibObject 时会引发 ConstraintViolationException（请参阅底部的异常）。

```
@Entity
@Table(name = "pla_objects")
public class PLibObject {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private int id;
  @Column(name = "plibid", unique = true, nullable = false)
  private String plibId;
  @Column(name = "oid", nullable = false)
  private String oid;
  @OneToMany(mappedBy = "pLibObject", orphanRemoval = true, cascade = CascadeType.ALL)
  private Set<PLibEntry> pLibEntries = new HashSet<PLibEntry>();
  ...

@Entity
@Table(name = "pla_entries")
public class PLibEntry {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private int id;
  @Column(name = "entryid", unique = true, nullable = false)
  private String entryId;
  @Column(name = "userid", nullable = false)
  private int userId;
  @ManyToOne(optional = false, cascade = CascadeType.ALL)
  @JoinColumn(name = "plibid")
  private PLibObject pLibObject;
  @Temporal(TemporalType.TIMESTAMP)
  @Column(name = "creationdate", nullable = false)
  private Date creationDate;
  @Column(name = "sharedfrom", nullable = false)
  private String sharedFrom;
  @Enumerated(EnumType.STRING)
  @Column(name = "sharingstatus", nullable = false)
  private SharingStatus sharingStatus;
  @ElementCollection
  @CollectionTable(name = "pla_tags", joinColumns = @JoinColumn(name = "entryid"))
  @Column(name = "tag")
  private Set<String> tags;
  ...

public enum SharingStatus {
  UNSHARED,
  SHARING_PENDING,
  SHARING_ACCEPTED,
  SHARING_CANCELLED_BY_SHARER;
} 
```

数据库表（MySQL）：

```
create table pla_objects(
  id int(10) not null auto_increment,
  plibid varchar(255) not null,
  oid varchar(255) not null,
  primary key (id),
  unique (plibid)
) charset=utf8 engine=innodb;

create table pla_entries(
  id int(10) not null auto_increment,
  entryid varchar(255) not null,
  userid int(10) not null,
  plibid varchar(255) not null,
  creationdate datetime not null,
  sharedfrom varchar(255),
  sharingstatus enum('UNSHARED', 'SHARING_PENDING', 'SHARING_ACCEPTED', 'SHARING_CANCELLED_BY_SHARER') not null,
  primary key (id),
  unique (entryid),
  foreign key (plibid) references pla_objects(plibid)
) charset=utf8 engine=innodb;

create table pla_tags(
  entryid varchar(255) not null,
  tag varchar(255) not null,
  primary key (entryid, tag),
  foreign key (entryid) references pla_entries(entryid)
) charset=utf8 engine=innodb; 
```

例外：

```
javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Referentielle Integrität verletzt: "CONSTRAINT_B23: PUBLIC.PLA_ENTRIES FOREIGN KEY(PLIBID) REFERENCES PUBLIC.PLA_OBJECTS(PLIBID) 
```

产生异常的代码（仅出于测试目的，实际实现要复杂得多）：

```
PLibObject pLibObject = new PLibObject("plibid", "oid");
new PLibEntry("entryid", 0, pLibObject, new Date(1), null, SharingStatus.UNSHARED,
                    Arrays.asList("tagA", "tagB")); // entry is set in object via constructor

Map<String, String> map = new HashMap<String, String>();
map.put("javax.persistence.jdbc.url", "jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;LOCK_TIMEOUT=3000");
map.put("javax.persistence.jdbc.user", "sa");
map.put("javax.persistence.jdbc.password", "sa");
map.put(Environment.SHOW_SQL, "true");
map.put(Environment.FORMAT_SQL, "true");

EntityManagerFactory factory = Persistence.createEntityManagerFactory("plib", map);
EntityManager entityManager = factory.createEntityManager();
entityManager.getTransaction().begin();
entityManager.persist(pLibObject);
entityManager.getTransaction().commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:15:25.810

看起来它认为您正在尝试将 plibEntry 的所有权授予另一个表中的 plibid 列。尝试为它指定表格

```
 @ManyToOne(optional = false, cascade = CascadeType.ALL)
  @JoinColumn(table = "pla_entries", name = "plibid")
  private PLibObject pLibObject; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:14:29.313

你是如何存储数据的？

也许您正在为您的 PLibObject 设置一组 pLibEntries，并且该集合的每个元素 PLibEntry 都有一个空 PLibObject，并且因为您已标记 CascadeType.ALL 它试图使用 NULL Pk 持久化 PLibObject。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:51:49.187

这很奇怪 - 我使用 Spring 并且对于第一个插入它工作正常：

```
PLibObject pLibObject = new PLibObject("plibid", "oid");
    PLibEntry entry = new PLibEntry("entryid", 0, pLibObject, new Date(1), null, SharingStatus.UNSHARED,
            Arrays.asList("tagA", "tagB"));
    pLibObject.getPLibEntries().add(entry);

    SpringUtil.getBean(PLibDao.class).saveOrUpdate(pLibObject); 
```

在构造函数中`PLibEntry`：

```
public class PLibEntry {

public PLibEntry(String entryId, int i, PLibObject pLibObject2, Date date, String object,
        SharingStatus unshared, List<String> asList) {
    this.entryId = entryId;
    userId = i;
    pLibObject = pLibObject2;
    this.creationDate = date;
    sharedFrom = "";
    sharingStatus = unshared;
    tags = new HashSet<String>(asList);
} 
```

弹簧配置：

```
@Configuration
@EnableTransactionManagement

public class TestConfiguration {

@Bean
public LocalSessionFactoryBean getSessionFactory() {
    LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();
    sessionFactory.setDataSource(dataSource());
    sessionFactory.setPackagesToScan(new String[] { "my.package.domain" });
    sessionFactory.setHibernateProperties(hibernateProperties());
    return sessionFactory;
}

@Bean
public Properties hibernateProperties() {
    Properties properties = new Properties();
    properties.put("hibernate.connection.driver_class", "org.h2.Driver");
    properties.put("hibernate.connection.url", "jdbc:h2:db/test;CIPHER=AES");
    properties.put("hibernate.connection.username", "root");
    properties.put("hibernate.connection.password", "root root");
    properties.put("hibernate.connection.pool_size", "1");
    properties.put("hibernate.dialect", "org.hibernate.dialect.H2Dialect");
    properties.put("hibernate.format_sql", "true");
    properties.put("hibernate.use_sql_comments", "true");
    properties.put("hibernate.show_sql", "false");
    properties.put("hibernate.hbm2ddl.auto", "update");
    properties.put("hibernate.c3p0.min_size", "5");
    properties.put("hibernate.c3p0.max_size", "20");
    properties.put("hibernate.c3p0.timeout", "300");
    properties.put("hibernate.c3p0.max_statements", "50");
    properties.put("hibernate.c3p0.idle_test_period", "3000");

    properties.put("hibernate.cache.use_second_level_cache", "true");
    properties.put("hibernate.cache.region.factory_class",
            "org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory");
    properties.put("hibernate.cache.use_query_cache", "true");
    properties.put("hibernate.cache.use_minimal_puts", "true");
    properties.put("hibernate.max_fetch_depth", "10");
    return properties;
}

@Bean
public DataSource dataSource() {
    DriverManagerDataSource dataSource = new DriverManagerDataSource();
    dataSource.setDriverClassName("org.h2.Driver");
    dataSource.setUrl("jdbc:h2:db/test;CIPHER=AES");
    dataSource.setUsername("root");
    dataSource.setPassword("root root");
    return dataSource;
}

@Bean
public HibernateTransactionManager transactionManager() {
    HibernateTransactionManager txManager = new HibernateTransactionManager();
    txManager.setSessionFactory(getSessionFactory().getObject());
    return txManager;
}

@Bean
public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {
    return new PersistenceExceptionTranslationPostProcessor();
}

@Bean
public PLibDao pLibDao() {
    return new PLibDao();
} 
```

}

在`main`：

```
public class App {
public static void main(String[] args) throws IOException {

    PLibObject pLibObject = new PLibObject("plibid", "oid");
    PLibEntry entry = new PLibEntry("entryid", 0, pLibObject, new Date(1), null, SharingStatus.UNSHARED,
            Arrays.asList("tagA", "tagB"));
    pLibObject.getPLibEntries().add(entry);

    SpringUtil.getBean(PLibDao.class).saveOrUpdate(pLibObject); 
```

SpringUtil 类：

```
public class SpringUtil {
private static AnnotationConfigApplicationContext ctx = buildContext();

private static AnnotationConfigApplicationContext buildContext() {
    return new AnnotationConfigApplicationContext(JCashConfiguration.class);
}

public static AnnotationConfigApplicationContext getCtx() {
    return ctx;
}

public static <T> T getBean(Class<T> classType) {
    return ctx.getBean(classType);
}

public static <T> T getBean(String beanName) {
    return (T) getBean(beanName);
} 
```

}

# c# - 如何在 asp.net 中使用 C# 代码将参数传递给 JavaScript 函数？

> ID：10625612
> 
> 赞同：2
> 
> 时间：2012-05-16T19:46:03.387
> 
> 标签：c#, javascript, asp.net

```
<% string s=LinkButton_ID.Text; %>
<asp:LinkButton ID="LinkButton_ID" runat="server" Text="LinkButton_Text" onclientclick="JscriptFunction(...)">
</asp:LinkButton> 
```

我想将“s”作为参数发送给 JscriptFunction。我尝试 JscriptFunction(<% s %>); 但不起作用。你有什么建议吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:48:34.617

试试这个：

```
JscriptFunction('<%= s %>'); 
```

不要忘记在 JS 函数调用中引用文本值。

### 编辑：

我没有注意到您的调用`JscriptFunction`在您的服务器标签内。如果您无法访问 jQuery，则传递按钮的客户端文本的最简单方法可能是：

```
onclientclick="JscriptFunction(this.innerHTML)" 
```

**[这是一个在 jsFiddle 上工作的示例。](http://jsfiddle.net/qBupj/)**

您还可以传递控件的客户端 ID 并使用 JavaScript 操作值。如果您这样做，请确保您拥有`ClientIDMode="Predictable"`或设置了控件。`ClientIDMode="Static"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:48:16.443

您需要将您的代码部分声明为 javascript，然后您需要将 asp.net/c# 值作为字符串输出。最简单的方法是：

```
<script type="text/javascript">
    var s = <% Response.write(LinkButton_ID.Text); %>;
    //do your other javascript stuff
</script> 
```

或者

```
<script type="text/javascript">
    var s = <%= LinkButton_ID.Text %>;
    //do your other javascript stuff
</script> 
```

如果您需要围绕此执行更多逻辑，您还可以在此处粘贴一个文字控件并在代码隐藏中输出到它：

```
<script type="text/javascript">
    var s = <asp:literal id="litMyValue" runat="server">;
    //do your other javascript stuff
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:57:59.823

你可以通过简单的方法/而不是你可以在函数本身中使用它

## 像

```
<script>
function JscriptFunction()
{
   var s = <%= LinkButton_ID.Text %>;
  // do what you want here.
}
</script>

<asp:LinkButton ID="LinkButton_ID" runat="server" Text="LinkButton_Text" onclientclick="JscriptFunction();"></asp:LinkButton> 
```

# php - 创建 Craigslist 匿名电子邮件转发程序

> ID：10625616
> 
> 赞同：0
> 
> 时间：2012-05-16T19:46:21.860
> 
> 标签：php, mysql, imap, gmail-imap

以下程序旨在将传入的电子邮件别名与数据库中的别名进行匹配，并将电子邮件转发到正确的地址，就像 Craigslist 所做的那样。

我现在收到此错误：

```
Error: [1] You must provide at least one recipient email address.
in anon-email.php at line number: sending the email 
```

这是代码：

```
$mailboxinfo = imap_mailboxmsginfo($connection);
$messageCount = $mailboxinfo->Nmsgs; //Number of emails in the inbox
for ($MID = 1; $MID <= $messageCount; $MID++)
  {
  $EmailHeaders = imap_headerinfo($connection, $MID); //Save all of the header information
  $Body = imap_qprint(imap_fetchbody($connection, $MID, 1)); //The body of the email to be forwarded

  $MessageSentToAllArray = $EmailHeaders->to; //Grab the “TO” header
  $MessageSentToAllObject = $MessageSentToAllArray[0];
  $MessageSentToMailbox = $MessageSentToAllObject->mailbox ."@". $MessageSentToAllObject->host; //Everything before and after the “@” of the recipient

  $MessageSentFromAllArray = $EmailHeaders->from; //Grab the “FROM” header
  $MessageSentFromAllObject = $MessageSentFromAllArray[0];
  $MessageSentFromMailbox = $MessageSentFromAllObject->mailbox ."@". $MessageSentFromAllObject->host; //Everything before and after the “@” of the sender
  $MessageSentFromName = $MessageSentFromAllObject->personal; //The name of the person who sent the email

  $toArray = searchRecipient($MessageSentToMailbox); //Find the correct person to send the email to
  if($toArray == FALSE) //If the alias they entered doesn’t exist…
    {
    $bounceback = 'Sorry the email in your message does not appear to be correct';
    /* Send a bounceback email */
    $mail = new PHPMailer(); // defaults to using php “mail()”
    $mail -> ContentType = 'text/plain'; //Plain email
    $mail -> IsHTML(false); //No HTML
    $the_body = wordWrap($bounceback, 70); //Word wrap to 70 characters for formatting
    $from_email_address = 'name@domain.com';
    $mail->AddReplyTo($from_email_address, "domain.Com");
    $mail->SetFrom($from_email_address, "domain.Com");
    $address = $MessageSentFromMailbox; //Who we’re sending the email to
    $mail->AddAddress($address, $MessageSentFromName);
    $mail->Subject = 'Request'; //Subject of the email
    $mail->Body = $the_body;
    if(!$mail->Send()) //If the mail fails, send to customError
      {
      customError(1, $mail->ErrorInfo, "anon-email.php", "sending the email");
      }
    }
  else //If the candidate address exists, forward on the email
    {
    $mail = new PHPMailer(); // defaults to using php “mail()”
    $mail -> ContentType = 'text/plain'; //Plain E-mail
    $mail -> IsHTML(FALSE); //No HTML
    $the_body = wordwrap($Body, 70); //Wordwrap for proper email formatting
    $from_email_address = "$MessageSentFromMailbox";
    $mail->AddReplyTo($from_email_address);
    $mail->SetFrom($from_email_address);
    $address = $toArray[1]; //Who we’re sending the email to
    $mail->AddAddress($address, $toArray[0]); //The name of the person we’re sending to
    $mail->Subject = $EmailHeaders->subject; //Subject of the email
    $mail->Body = ($the_body);
    if(!$mail->Send()) //If mail fails, go to the custom error
      {
      customError(1, $mail->ErrorInfo, "anon-email.php", "sending the email");
      }
    }
  /* Mark the email for deletion after processing */
  imap_delete($connection, $MID);
  }
  imap_expunge($connection); // Expunge processes all of the emails marked to be deleted
  imap_close($connection);

  function searchRecipient() // function to search the database for the real email
{
    global $MessageSentToMailbox; // bring in the alias email
    $email_addr = mysql_query("SELECT email FROM tbl WHERE source='$MessageSentToMailbox'"); // temp store of the real email
    $row = mysql_fetch_array($email_addr); //making temp store of data for use in program
    if(empty($row['email']))
    {
        return FALSE;
    }
    else  /* Else, return find the person's name and return both in an array */
    {
        $results = mysql_query("SELECT * FROM tbl WHERE email = '$email_addr'"); // temp store of both queries from this function
        $row = mysql_fetch_array($results, $email_addr); //making temp store of data for use in program
        $name = $row['author'];  // taking the author data and naming its variable
        return array($name, $email_addr);  // this is the name and the real email address to be used in function call
    }
}

function customError($errno, $errstr, $file, $line)
{
    error_log("Error: [$errno] $errstr in $file at line number: $line",1, "name@domain.com","From: name@domain.com.com");   
    die();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:11:27.633

这是我要尝试的第一件事：您的函数 searchRecipient 似乎没有被传递参数。我不会使用 global 关键字，而是在您的函数调用中定义它。此外，mysql_fetch_array 不会传回关联数组，这是您在下一步中使用的。我会将其更改为 mysql_fetch_assoc （本质上是相同的）。此函数中还有一些其他小的语法更正。这是我对该功能的建议更改。我认为这应该可以解决您的问题。或者至少让你前进。

```
function searchRecipient($MessageSentToMailbox) // function to search the database for the real email
{

    $email_addr = mysql_query("SELECT email FROM tbl WHERE source='$MessageSentToMailbox'"); // temp store of the real email
    $row = mysql_fetch_assoc($email_addr); //making temp store of data for use in program
    if(empty($row['email']))
    {
        return FALSE;
    }
    else  /* Else, return find the person's name and return both in an array */
    {
        $email_addr = $row['email'];
        $results = mysql_query("SELECT * FROM tbl WHERE email = '$email_addr'"); // temp store of both queries from this function
        $row = mysql_fetch_assoc($results); //making temp store of data for use in program
        $name = $row['author'];  // taking the author data and naming its variable
        return array($name, $email_addr);  // this is the name and the real email address to be used in function call
    }
} 
```

您也可以将其组合到一个查询中并使其更容易一些。这是解决方案。

```
function searchRecipient($MessageSentToMailbox)
{
    $results = mysql_query("SELECT email, author FROM tbl WHERE source='$MessageSentToMailbox'");
    $row = mysql_fetch_assoc($results);
    if(empty($row['email']) || empty($row['author'])) return false;
    return array($row['email'], $row['author']);
} 
```

# javascript - self.focus() & window.focus() 适用于 Safari 但不适用于 IE

> ID：10625625
> 
> 赞同：1
> 
> 时间：2012-05-16T19:46:30.880
> 
> 标签：javascript, window.open

在进入新打开的窗口之前，我有此代码可以执行 a`window.focus();`或 a`self.focus();`以在当前窗口上显示一条消息。这在 Safari 上运行良好。浏览器会在原始窗口上暂停指定的时间，然后再转到新窗口。在 Internet Explorer 上，浏览器`self.focus();`完全忽略调用，对`window.focus();`. 在 IE 中是否有不同的方式来保持或关注当前窗口。

```
 if ( show_message == true ) {
        var message_page = "livemass_message.php?message_id="+message_id;
        message_window = window.open (message_page,'_blank','width=600,height=200,top=200,left=300,alwaysRaised');
        self.focus();
        setTimeout(function() { external_window.focus(); message_window.focus(); }, 3500);
        setTimeout(function() { message_window.close(); }, 60000);
    }
    else {
        self.focus();
        setTimeout(function() { external_window.focus(); }, 3500);                      
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-05T18:57:55.040

当我的页面每 5 分钟自动刷新一次时（因此，在正文加载中），我必须这样做，以确保窗口位于顶部。以下对我有用（仅使用 Internet Explorer 测试）：

```
top.document.body.focus(); 
```

# spring - Entity-Classes 什么时候增强，有什么用？jpa, 春天, 休眠, javassist

> ID：10625626
> 
> 赞同：5
> 
> 时间：2012-05-16T19:46:34.057
> 
> 标签：spring, hibernate, jpa, lazy-loading, javassist

我正在使用 spring 3.0.6、jpa 2.0、hibernate 3.6.8。我的问题是，在哪些情况下 javassist 用于为 EntityClass 创建“代理”？这个代理的原因是什么？我有以下实体：

```
@Entity
public MyEntity{
..

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "adresseID")
  private Adresse adresse;

  @OneToMany(fetch = FetchType.LAZY, mappedBy = "myEntity")
  private List<Parameter> parameters;

..
} 
```

当我从 db 加载 MyEntity 时，实体类类似于 MyEntity__$$_javassist。为什么要完成？做什么的？我认为这里可以使用常规类 MyEntity 。

要实现延迟加载，我们可以：

*   对于@OneToMany - PersistenceBag 可以在这里使用
*   对于@ManyToOne - 这里应该使用“enchancedClass”，如 Adress_ *$$* _javassist

那么增强 MyEntity 的原因是什么？我可以在哪里阅读更多有关它的信息？你能推荐我哪本书/文章/博客？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T19:50:51.297

增强实体类的主要原因是 JPA（或 Hibernate）需要跟踪实体对象的状态。

特别是 JPA 必须知道给定的实体字段是否“脏” - 它已被用户修改，但此更改尚未反映在数据库中，因此 JPA 必须在提交事务时将其与数据库同步。

另一种情况是实体字段的“加载”状态。任何字段都可以指定为延迟加载。当即将使用此类字段时，JPA 必须知道必须执行数据库查询以初始化该字段的值。

Hibernate 的默认设置是使用运行时增强——代理只是实体的一个子类，添加了额外的东西。

[此处](http://struberg.wordpress.com/2012/01/08/jpa-enhancement-done-right/)概述了一些一般性的想法。

# android - 从 PreferenceActivity 更改音量

> ID：10625632
> 
> 赞同：0
> 
> 时间：2012-05-16T19:47:00.463
> 
> 标签：android, volume, preferenceactivity

我在从 PreferenceActivity 更改铃声、通知等的音量时遇到问题。

我的 pref.xml 对于卷看起来像这样：

```
 <PreferenceCategory
            android:title="Incoming Call">

    <RingtonePreference
            android:name="Ringtone Preference"
            android:summary="Select a ringtone"
            android:title="Ringtones"
            android:key="ringtonePref" />
    <VolumePreference
        android:name="Volume Preference"
        android:summary="Ringtone Volume"
        android:title="Ringtone Volume"
        android:key="ringVolPref"/>

    </PreferenceCategory> 
```

而且我不知道如何更改铃声的音量（对于通知音量，我已经声明了另一个 PreferenceCategory。）。

这是 PreferenceActivity 的代码：

```
public class SettingTest extends PreferenceActivity implements onPreferenceClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.ringtone);

        RingtonePreference ringVolPref = (RingtonePreference) findPreference("ringVolPref");
        RingtonePreference notifVolPref = (RingtonePreference) findPreference("notifVolPref");

    public boolean  onPreferenceClick(Preference preference){
        int progress = 1;
        if (preference.getKey().equals("ringVolPref")){

            AudioManager aManager = (AudioManager) getSystemService(AUDIO_SERVICE);
            aManager.setStreamVolume(AudioManager.STREAM_RING, progress, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);

        }
        return true;

      } 
```

而且我不知道如何将代码放在 onPreferenceClic() 中。请帮助各位。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:59:26.510

您需要`onPreferenceClickListener`在您的类中实现，然后在`onPreferenceClick`您覆盖的方法上使用您在 xml 中设置的键来查找点击了什么

有关类似示例，请参见[此处](https://stackoverflow.com/questions/10518667/best-way-to-update-checkbox-prefefences/10519018#10519018)

# c++ - 为 TypeList 实现 Loki IndexOf

> ID：10625637
> 
> 赞同：1
> 
> 时间：2012-05-16T19:47:26.810
> 
> 标签：c++, templates, metaprogramming, loki

我正在实现一个基于 Loki 的 TypeList，基于以下内容：

[http://aszt.inf.elte.hu/~gsd/halado_cpp/ch06s09.html](http://aszt.inf.elte.hu/~gsd/halado_cpp/ch06s09.html)

并从网站上看到了 IndexOf 的代码（在类型列表中查找类型的索引）：

```
template <class T>
struct IndexOf< NullType, T>
{
    enum { value = -1 };
};

template <class T, class Tail>
struct IndexOf< Typelist<Head, Tail>, T>
{
private:
    enum { temp = IndexOf<Tail, T>::value };
public:
    enum { value = (temp == -1) ? -1 : 1+temp };
}; 
```

这似乎行不通，因为在递归遍历列表时，我在任何地方都看不到比较 T 的东西。在我的实现中，它看起来像这样：

```
template<typename Tlist, typename T>
struct IndexOf
{
private:
  static const int temp = IndexOf<typename Tlist::Tail, T>::value;
public:
  static const int value = (temp == -1) ? -1 : 1 + temp;
};

template<typename T>
struct IndexOf<NullType, T>
{
  static const int value = -1;
}; 
```

而且，事实上，总是返回 -1。如果我想到它，想象一个有 TypeList；然后 Tail 将是 NullType，因此 temp 将通过专业化为 -1，然后 value 将为 -1 ..即使 Head 是 char 而我预计为零。我在这里想念什么？

谢谢

* * *

我对 Typelist 的实现仅仅是：

```
template<typename H, typename T>
struct Typelist
{
  typedef H Head;
  typedef T Tail;
}; 
```

我猜这不是 Lokis，但随着 Joel 的回答，我得到了这个为我工作：

```
template<typename Head, typename Tail, typename T>
struct IndexOfImpl
{
private:
  static const int temp = IndexOfImpl<typename Tail::Head, typename Tail::Tail, T>::value;
public:
  static const int value = (temp == -1) ? -1 : temp + 1;
};

template<typename T, typename Tail>
struct IndexOfImpl<T, Tail, T>
{
  static const int value = 0;
};

template<typename T>
struct IndexOfImpl<T, NullType, T>
{
  static const int value = 0;
};

template<typename Head, typename T>
struct IndexOfImpl<Head, NullType, T>
{
  static const int value = -1;
};

template<typename Tlist, typename T>
struct IndexOf
{
 public:
  static const int value = IndexOfImpl<typename Tlist::Head, typename Tlist::Tail, T>::value;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:54:09.760

应该 ：

```
template <class T>
struct IndexOf< NullType, T>
{
    enum { value = -1 };
};

template <class T, class Head, class Tail>
struct IndexOf< Typelist<Head, Tail>, T>
{
private:
    enum { temp = IndexOf<Tail, T>::value };
public:
    enum { value = (temp == -1) ? -1 : 1+temp };
};

template <class T, class Tail>
struct IndexOf< Typelist<T, Tail>, T>
{
public:
    enum { value = 0 };
}; 
```

您尝试在列表的递归编码中的某个 Head 处找到 T。

# ruby-on-rails - 为什么我的 FactoryGirl 定义无法正常工作？

> ID：10625641
> 
> 赞同：1
> 
> 时间：2012-05-16T19:47:44.630
> 
> 标签：ruby-on-rails, factory-bot

我已经定义了一个名为 admin_user 的工厂，但是当我尝试使用它时出现错误：

工厂/user_factory.rb：

```
FactoryGirl.define do
  factory :user do
    email "example_user@example"
    password "password"
  end

  factory :admin_user do
    email "admin_user@example.com"
    password "admin_password"
  end
end 
```

authentication_steps.rb：

```
Given /^I have a valid admin account$/ do
  @user = FactoryGirl.create(:admin_user)
end 
```

运行该步骤时出现以下错误：

```
uninitialized constant AdminUser (NameError) 
```

是否有一些我没有正确遵循的语法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:51:20.860

您应该指定以下类别`:user_admin`：

```
FactoryGirl.define do
  factory :admin_user, :class => User do
    email "admin_user@example.com"
    password "admin_password"
  end
end 
```

说明：

当您使用 时`factory :admin_user do`，FactoryGirl 会自动查找不存在的*AdminUser类。*
因此，您必须通过添加来告诉它要使用哪个类`:class => User`。

# sql - 时间表数据库架构

> ID：10625642
> 
> 赞同：2
> 
> 时间：2012-05-16T19:47:49.687
> 
> 标签：sql, database, vb.net, database-design, schema

我的公司正在使用一个旧的时间表应用程序，我将在 asp.net 中重写它。

还有其他表可以链接到新的时间表表，如员工表，但我主要关心的是 Project 和 Project_Activity 表。

在当前系统中，有一个项目和一个活动表，它们分别链接到时间表表，用户必须花费大量时间来选择他们为特定项目工作的活动代码。

我想出了这个新主意；在开始这个项目之前，项目经理必须填写一个项目模板并将所有活动代码与一个项目链接起来。这样，用户只需选择项目，它就会自动为他们带来关联代码。

这是逻辑模式设计。

我想知道这个设计是否可行？可以将 Project_Activity 表与时间表链接起来吗？

## 项目

PK_PROJECT_ID，名称

## PROJECT_ACTIVITIES

PK_PA_ID、描述、FK_ACTIVITY_ID、FK_PROJECT_ID

## 活动

PK_ACTIVITY_ID，
描述

## 时间表

PKID、
EMP_ID、
FK_PK_PA_ID、
日期、
小时

```
 PROJECT -->  PROJECT_ACTIVITIES <-- ACTIVITIES
                    |
                    |
                    |____TIME_SHEET 
```

注意：时间表表有许多其他字段不属于此问题的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:58:17.003

我假设一个`Activity`只能指一个`Project`？

如果是这样，你真的不需要`Project_Activity`表，只需将表的外键放在`Project`表中即可`Activity`。

如果 an`Activity`可以引用多个，那么您的架构很好，您已经有效地分解了和`Project`之间的多对多关系。:)`Project``Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:03:24.607

一般来说，架构是好的。我不会使用您的命名约定，因为我发现它很难阅读。使用完整的单词没有害处，但这是一个旁白。

我要更改的是时间表表。改为这样做：

```
PKID,
EMP_ID,
FK_PK_PA_ID,
STARTDATE,
ENDDATE 
```

这将允许您更轻松地查询在给定时间内谁在做什么。您还可以允许记录具有 NULL ENDDATE 以显示当前正在处理的活动。

我会添加一个触发器以确保对于相同的 EMP_ID，记录的 STARTDATE 和 ENDDATE 永远不会介于其他记录的 STARTDATE 和 ENDDATE 之间（没有重叠）。

# parallel-processing - MPI 通信复杂度

> ID：10625643
> 
> 赞同：4
> 
> 时间：2012-05-16T19:47:59.410
> 
> 标签：parallel-processing, communication, complexity-theory, mpi

我正在研究 MPI 中 Quicksort 的并行实现的通信复杂性，我在一本书中发现了类似的内容：

> “单个进程从其他 p-1 个进程中收集 p 个常规样本。由于传递的值相对较少，因此消息延迟很可能是这一步的主要术语。因此，收集的通信复杂度为 O(log p)"（O 实际上是一个 theta，p 是处理器的数量）。

对广播消息进行同样的确认。

为什么这些组通信复杂度为 O(log p)？是因为通信是使用某种基于树的层次结构完成的吗？

如果延迟不是主要术语并且正在发送大量数据怎么办？复杂度会是 O(n log (p))，其中 n 是发送数据的大小除以可用带宽吗？

而且，MPI_Send() 和 MPI_Recv() 的通信复杂度如何？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T21:19:48.693

是的，聚集和分散是使用（取决于特定的 MPI 版本）例如二叉树、超立方体、线性阵列或 2D 方形网格来实现的。可以使用超立方体等来实现全聚集操作。

对于聚集或分散，设 lambda 为延迟，beta 为带宽。然后需要记录 p 个步骤。假设您发送 n 个整数，每个整数用 4 个字节表示。发送它们的时间是

![在此处输入图像描述](../Images/0695c8a46f2376aaa26446f011f32706.png)

当 n = O(1) 时为 O(log p)，否则为 O(log p + n)。对于广播，所需的时间是

![在此处输入图像描述](../Images/bbc60301ef2c9d2cd5ba3f4cdf4415bd.png)

当 n = O(1) 时为 O(log p)，否则为 O(n log p)。

最后，对于像 MPI_Send() 这样的点对点通信，如果您发送 n 个整数，则通信复杂度为 O(n)。当 n = O(1) 时，复杂度显然是 O(1)。

# jms - Glassfish 3.1 JMS 队列监控和统计

> ID：10625646
> 
> 赞同：3
> 
> 时间：2012-05-16T19:48:13.510
> 
> 标签：jms, java-ee-6, glassfish-3

我来自 Tibco 和 EMS（与 JMS 相同）的世界，我想知道是否有一种 GUI 方式可以查看 Glassfish 中 JMS 队列的统计信息。

例如，我想知道发布了多少消息，消耗了多少，持久连接，活跃的订阅者和发布者，诸如此类。

我已经看到以前的版本似乎有它，但是在 Glassfish 的管理手册中我找不到除了使用控制台之外的任何其他方法。我认为这是善良或古老的。

提前致谢。

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:38:09.020

Glassfish 使用“Open Message Queue”，它带有一个 GUI 管理工具和一整套命令行工具。您可以在 Glassfish/imq/bin 文件夹中找到这些文件。gui 工具是 imqadmin，它将回答您提出的一些问题。

如果需要，您也可以使用 3rd 方应用程序，您只需要提供连接信息。

有关详细信息，请访问[Oracle GlassFish Server 消息队列 4.5 管理指南](http://docs.oracle.com/cd/E18930_01/html/821-2438/index.html)。

# ruby-on-rails - 创建多个资源的页面应该放在哪里？

> ID：10625651
> 
> 赞同：1
> 
> 时间：2012-05-16T19:48:35.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, controller, nested-resources

我有一个演示模型，我以通常的方式通过表单创建它。

Presentation Model 有两个嵌套资源：Recording Model 和 SlideDeck Model：

```
class Presentation < ActiveRecord::Base

has_one :recording
has_one :slide_deck

end 
```

我有一个 Flash 组件，它允许用户录制演示文稿并在其持续时间内添加幻灯片。用户完成创建和编辑演示文稿后，他们单击保存。

此时，我需要将 Recording 和 SlideDeck 创建为 Presentation 上的嵌套资源。这意味着从一个表单创建两个模型。

我的问题是这个页面应该放在哪里？如果组件仅创建 Recording，则页面将通过recording_controller 上的新操作呈现，如果它仅创建SlideDeck，则页面将从新的slide_deck_controller 呈现。但是在这种情况下，我同时创建两者。

那么组件应该放在哪里呢？是否应该通过presentation_controller 上的操作来呈现；另一个编辑动作？从某种意义上说，该页面允许通过创建其嵌套资源来编辑演示文稿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:00:21.090

通常，PresentationController#edit（和相应的#update）用于修改“Presentation”模型。如果您已经拥有#edit 和相应的#update，并且您希望在单独的操作中创建记录，那么您需要创建另一对操作。另一种选择是您可以使#update 足够通用以处理“正常编辑”和“创建记录”。在这种情况下，#edit 和#record 操作都可以将表单提交给#update 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:11:47.883

我认为它应该是 Presentation 模型中 nested_attributes 的一部分，而不是您可以使用 create 或 update 操作将所有这些信息添加到演示文稿中

# java - Java ResultSet 获取返回的字段名称

> ID：10625653
> 
> 赞同：0
> 
> 时间：2012-05-16T19:48:52.533
> 
> 标签：java, sql, resultset

对于标准查询，我对此没有任何问题。我只是：

```
ResultSet rs = stmt.executeQuery("SELECT a, b FROM table_name");
ResultSetMetaData rsMetaData = rs.getMetaData();
int numberOfColumns = rsMetaData.getColumnCount();

for (int i = 1; i < numberOfColumns + 1; i++) {
    String fieldName = rsMetaData.getColumnName(i);
    System.out.print(fieldName + ",  ");
} 
```

但是当我将字段名称分配给另一个名称时，即

```
ResultSet rs = stmt.executeQuery("SELECT a AS foo, b AS bar FROM table_name"); 
```

它会引发错误，因为`a`未`b`找到字段。

我应该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:52:53.180

*列名*和*列标签*之间有区别。`ResultSet`期望列标签中的方法。所以你应该使用方法`ResultSetMetaData.getColumnLabel`而不是`ResultSetmetaData.getColumnName`.

# java - 如何在 Java 中调用系统控制台？

> ID：10625656
> 
> 赞同：1
> 
> 时间：2012-05-16T19:49:01.773
> 
> 标签：java, console

我制作了一个基于控制台的 Java 应用程序，但每次我尝试通过单击它来启动 .jar 文件时，程序似乎正在运行，但没有显示控制台。我必须编写特定代码才能调用系统控制台吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:53:33.060

您可以先启动控制台，将目录更改为您的 jar 文件所在的位置，然后运行 ​​java -jar yiurjarfilename 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:36:29.903

gcivil是正确的，只有从控制台启动才能在控制台中看到结果，如果您在Windows中，则可以打开命令行Super + R并输入cmd，然后按Enter（Super是带有Windows图标的那个）

在那里你可以输入： java -jar "absolute path to your file" （不要忘记引号）

另一种方法是在 .jar 旁边创建一个 .bat 文件，bat 文件应包含 java -jar filename.jar

您不需要引号或绝对路径，因为它位于 .bat 文件旁边，现在您可以`double click that instead of the .jar`

一旦应用程序终止，它将关闭控制台，如果您需要查看下一步，您必须添加暂停

```
java -jar filename.jar
pause 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T19:58:04.617

操作系统负责显示控制台输出。您无法在 Java 中编写代码来显示或隐藏“控制台”（因为在 Java 中，只有标准输出和您写入的错误流）。

Windows 通常在您的程序退出后使控制台保持打开状态，但 Java 运行时环境中可能有一个配置该行为的设置。

# ssh - 如何连接独立的 SSH 客户端——AWS EC2

> ID：10625664
> 
> 赞同：2
> 
> 时间：2012-05-16T19:49:29.713
> 
> 标签：ssh, key-pair

可以说我得到了下面的 ssh。

```
ssh -i keypair.pem root@ec2-20-21-137-245.compute-1.amazonaws.com 
```

我想将它保存在 /Users/UserName/Documents/ServerKeys

我相信我会将其添加到 ssh 密钥中

```
ssh -i ~/Documents/ServerKeys/keypair.pem root@ec2-20-21-137-245.compute-1.amazonaws.com 
```

当我在终端中运行它时，我得到

```
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Permissions 0644 for '/Users/UserName/Documents/ServerKeys/keypair.pem' are too open.
It is recommended that your private key files are NOT accessible by others.
This private key will be ignored.
bad permissions: ignore key: /Users/UserName/Documents/ServerKeys/keypair.pem
Permission denied (publickey). 
```

我需要在某个时候运行 chmod 400 keypair.pem 吗？

我做错了什么，我还需要做什么才能使用密钥对进入服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:05:39.943

是的，您应该确保文件的权限是安全的。使用 0644 模式，系统上的任何其他人都可以读取密钥并使用它连接到远程系统。将其设置为 0600 确保您并且只有您可以读取和写入文件（除了`root`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:04:34.090

将密钥的权限更改为 600 应该可以解决该特定错误。

# objective-c - 可可http post请求

> ID：10625665
> 
> 赞同：0
> 
> 时间：2012-05-16T19:49:30.393
> 
> 标签：objective-c, http, xcode4, httprequest

你好，我知道这已经被问过很多次了，但我似乎无法理解它是如何工作的（我是 iPhone 开发者和目标 c 的新手）

我正在尝试`create user`为我的应用程序制作一个。我的服务器上有一个文件`create.php`，它期望获得一个`_POST`名为`id`. 在它被称为`echo`成功之后是“DONE”，失败是“EXIT”。

我找到了一些代码并对其进行了更改（据我所知）以满足我的需要：

```
NSMutableString *tmpurl = [NSMutableString stringWithString: @"http://mysite.com/"];
[tmpurl appendString:@"create.php"];
NSURL *url = [NSURL URLWithString:tmpurl];
NSString *uid = @"32478907348920437829078902347804930893741"; // should chenge for randome.
NSString *post = [NSString stringWithFormat:@"id=%@", uid];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData]; 
```

现在我不知道如何查看页面`echo`返回的内容，或者即使它已经到达它。

任何信息将不胜感激，并提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:52:09.423

您缺少 NSURLConnection。根据您要同步还是异步发送此请求，您可能需要实现 NSURLConnectionDelegate 方法。

# c# - 通过 C# 代码将字符串传递给 .ASPX 中的 SQL

> ID：10625667
> 
> 赞同：2
> 
> 时间：2012-05-16T19:49:44.353
> 
> 标签：c#, asp.net, parameters

我在处理这种事情方面还很陌生，所以如果我的问题看起来太简单了，请原谅我。我已经尝试了一段时间，并搜索了我能找到的所有相关文章，但我无法让我的代码正常工作。

我想通过另一侧的参数传递来自“BadgeNum.Text”的字符串并让它执行查询。我无法让值正确传递，因此无法让任何记录出现在我的查询中。我已经使用硬编码数据多次测试了查询，它工作正常。

在这里的任何帮助将不胜感激。

```
<asp:SqlDataSource ID="GridDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:Oracle1TestString %>" 
            ProviderName="<%$ ConnectionStrings:Oracle1TestString.ProviderName %>" 
            SelectCommand="SELECT MODEL_NUMBER, SERIAL_NUMBER, DEFECT_CODE, RECORD_DATE, RECORD_TIME, PRODUCTION_DATE, AUDIT_TYPE FROM AUDITENT WHERE AUDITOR_BADGE = @BadgeNum" 
            onselecting="GridDataSource_Selecting">

            <SelectParameters>
                <asp:Parameter Name="BadgeNum" Direction="Input" DbType="String" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

这是（C＃）背后的代码：

```
protected void Page_Load(object sender, EventArgs e) {

        BadgeNum.Text = "0205096";
        Parameter badge = new Parameter();
        badge.DefaultValue = BadgeNum.Text;
        badge.Type = TypeCode.String;
        badge.Name = "BadgeNum";
        GridDataSource.SelectParameters.Add(badge);
        GridDataSource.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:05:18.460

好的，那么您的选择语句中的前缀可能是错误的

```
@BadgeNum 
```

对比

```
:BadgeNum 
```

# php - Zend 框架对 DynamoDB 的支持

> ID：10625671
> 
> 赞同：1
> 
> 时间：2012-05-16T19:50:14.557
> 
> 标签：php, zend-framework, amazon-dynamodb

我正在查看亚马逊的 DynamoDB 服务，将我们应用程序中的日志（特别是使用写入器`Zend_Log`）存储到 DynamoDB 数据库中。

目前，在 zend 框架中没有对 DynamoDB 的原生支持，看起来亚马逊将其签名处理更改为更新版本 ( [http://docs.amazonwebservices.com/general/latest/gr/signing_aws_api_requests.html](http://docs.amazonwebservices.com/general/latest/gr/signing_aws_api_requests.html) )，这意味着zend 框架甚至不能为亚马逊的新服务签署 API 请求。

任何人都熟悉可以使用 DynamoDB 服务的 Zend_Log_Writer 吗？或者有一些关于实现这样一个作家的建议？

我也在考虑使用他们的会话管理处理程序`Zend_Session`（[http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonDynamoDB/register_session_handler](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonDynamoDB/register_session_handler)）。但是，再一次，zend 框架中没有对它的原生支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:05:21.320

如果 Zend Framework 不支持 DynamoDB，那么您将需要创建一个自定义适配器来扩展`Zend_Db_Adapter_Abstract`和实现适用于 DynamoDB 的所有方法。一旦完成，您就可以像在应用程序中使用任何其他 Zend_Db 对象一样使用它。

然后，您可以通过扩展类并实现抽象方法来[创建自定义日志写入](http://framework.zend.com/manual/en/zend.log.writers.html)`Zend_Log_Writer_Abstract`器，以使用您的 DynamoDB 适配器写入数据。

# json - 如何使用命名参数为 Sinatra 路由指定 json 格式？

> ID：10625672
> 
> 赞同：1
> 
> 时间：2012-05-16T19:50:15.543
> 
> 标签：json, routes, sinatra

如何将“.json”添加到包含命名参数（例如 get '/view/:name' ）的 Sinatra 路由
？

我认为 get '/view/:name.json' 可能有效，但出现“无法访问路径 /view/name.json”异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:03:47.203

此代码完美运行：

```
get '/hello/:name.json' do
  "Hello #{params[:name]}"
end

=> /hello/samy.json outputs "Hello samy" 
```

请显示您的异常的完整堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:30:13.930

还，

[https://github.com/sinatra/sinatra/issues/490](https://github.com/sinatra/sinatra/issues/490)

# android - 在 32 位 x86 中可以有多大的 VMALLOC 空间？

> ID：10625674
> 
> 赞同：3
> 
> 时间：2012-05-16T19:50:34.353
> 
> 标签：android, linux-kernel, 32-bit, vmalloc

我的物理内存是 4G，我使用的是 32 位的 Android x86，启用了 HIGHMEM4G。我想尽可能地扩大 vmalloc() 空间。

正如我所尝试的，如果更改为 2G/2G VMsplit 并使 VMALLOC_RESERVED 更大，vmalloc() 空间有望达到 1G。但是如果我想获得更大的vmalloc()，例如2G，有可能吗？

Vmalloc() 从 ZONE_HIGHMEM 和 ZONE_NORMAL 分配。如果我有足够的物理内存，ZONE_HIGHMEM 就足够大了。将vmalloc()设为2G以上有帮助吗？或者vmalloc()受到其虚拟空间的限制，所以如果内核虚拟空间总共是2G，vmalloc()绝对不能大于那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:48:50.597

您可以接近 2G（在 2G/2G 拆分时），但是当您这样做时，您的正常区域会缩小。
大多数内核分配都是从正常区域完成的，因此您会开始看到那里的短缺，从而导致严重的问题。

将 VMALLOC_RESERVE 从 1G 增加到 2G 通常是一件坏事。例如，当从 1G 移动到 1.5G 时，您的 vmalloc 增加了 50%，但您的正常区域缩小了一半。当您接近 2G 时，权衡变得更糟。

我最好的建议是更改您的代码不要使用太多`vmalloc`。
您可以使用`kmalloc`and`__get_free_pages`代替。
或者你可以想为什么实际上需要这么多内核内存。

# java - 我什么时候将内存使用量翻倍？

> ID：10625681
> 
> 赞同：0
> 
> 时间：2012-05-16T19:51:04.150
> 
> 标签：java, servlets, jvm, jetty

我有一个用户向其发布 XML 文件的 servlet。

我使用以下方法读取该文件：

```
String xml = request.getParameter("..."); 
```

现在说 xml 文档是 10KB，因为我创建了变量，所以`xml`我现在为该变量使用了 10KB 的内存，对吗？

现在我需要解析该 xml（使用 xerces），并在将其传递给 saxparsers 解析方法时将其转换为输入流（http://docs.oracle.com/javase/1.5.0/docs/api/ javax/xml/parsers/SAXParser.html)。

因此，如果我将字符串转换为流，是否会使我的内存使用量增加一倍？

需要对此进行一些澄清。

如果我在单步执行代码时将我的进程与 visualvm 或 jconsole 连接，我是否可以在单步执行调试器中的代码时查看是否使用了额外的内存？

我想确保我不会低效地执行此操作，因为此端点将受到重创。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:59:09.000

10,000 字节的文本通常会变成 20 KB。

当您处理文本时，您通常需要 2-10 倍以上的内存，因为您将使用该信息执行某些操作，例如创建数据结构。

这意味着您可能需要 200 KB。但是，鉴于在 PC 中这代表 1 美分的价值，我通常不会担心。如果您有一个资源严重受限的设备，我会考虑将处理转移到另一个设备，如服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:01:29.833

我认为您可能会在实际看到代码运行之前对其进行优化。JVM**非常**好并且可以快速恢复未使用的内存。

但是回答你的问题`String xml = request.getParameter("...");`并没有使内存加倍，它只是为指针分配了额外的 4 或 8 个字节（取决于 JVM 是否使用压缩指针）。

解析 xml 是不同的，SAX 解析器非常节省内存，所以它不会使用太多内存，我认为每个处理程序大约 20 个字节加上你拥有的任何实例变量......显然你可能会在其中生成任何额外的对象处理程序。

因此，您拥有的代码看起来就像它可以获得的内存效率一样高（当然取决于您的处理程序中的内容）。

除非您正在将该代码嵌入到设备中或每秒运行 100k 次，否则我建议您不要优化任何东西，除非您确定需要优化它。JVM 有一些疯狂的高级逻辑来优化代码，垃圾收集器可以非常快速地恢复短期对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:06:19.613

如果用户可以将大量文件发布回您的 servlet，那么最好不要使用 getParameter() 方法并直接处理流 - [Apache File Upload Library](http://commons.apache.org/fileupload/)。

这样您就可以在 InputStream 上使用 SAX 解析器（并且在处理之前不需要将整个文本加载到内存中）——就像您必须使用基于字符串的解决方案一样。

与 String xml = getParameter(...) 解决方案相比，这种方法扩展性很好，每个请求只需要少量内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:00:13.107

您将编写如下代码：

```
saxParser.parse(new InputSource(new StringReader(xml)); 
```

您首先需要`StringReader`围绕`xml`. 这不会使您的内存使用量加倍，`StringReader`类只是包装`xml`变量并在请求时逐个字符地返回它。

`InputSource`甚至更薄 - 它只是简单地包装提供`Reader`或`InputStream`。简而言之：不，您`String`不会被复制，您的实现非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T20:01:09.730

不，你不会得到字符串的 2 个副本，从而使你的内存加倍。其他东西可能会使内存加倍，但字符串本身不会被复制。是的，您应该连接 visualVm 和 jconsole 以查看内存和线程处理会发生什么。

# html - 简单的 CSS 样式不会显示.. 为什么？

> ID：10625682
> 
> 赞同：0
> 
> 时间：2012-05-16T19:51:05.943
> 
> 标签：html, css

所以我试图用我从颜色生成器获得的背景渐变为我的 html 的 div 部分着色，但由于某种原因，这段代码不起作用。

我正在关注 css/html 教程，并且正在复制他们所做的事情，但是当我进行自己的调整时，这对我来说并不奏效。请参阅下面的代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>

    <head>
        <title>Let's Play</title>
        <link href="styles.css" rel="stylesheet" type="text/css">
    </head>

    <body> 
        <div id="mainbg">this part should have a colored gradient</div>
    </body>

</html> 
```

我的CSS是..

```
<style type ="text/css">

#mainbg{
    background: -webkit-linear-gradient(left, #e4efc0 0%,#abbd73 100%); /* Chrome10+,Safari5.1+ */
    /* background-color: rgb( 149, 206, 145); */
}
</style> 
```

甚至没有一个简单的背景出现..提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T19:52:48.120

从您的 CSS 文件中删除`<style type ="text/css">`和`</style>`标签，留下：

```
#mainbg{
    background: -webkit-linear-gradient(left, #e4efc0 0%,#abbd73 100%); /* Chrome10+,Safari5.1+ */
    /* background-color: rgb( 149, 206, 145); */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:58:10.153

你说你的css是：

```
<style type ="text/css">... 
```

我认为样式标签导致了问题，因为我没有看到您的 css 代码有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:12:18.337

[这](http://davidwalsh.name/css-gradients)似乎涵盖了有关`css3`渐变的所有内容。

您肯定要添加：

*   -moz 过滤器

*   -ms-过滤器

*   -小姐-

*   -o-

*   等等

# asp.net-mvc - MVC3 .Net + ExtJs 4

> ID：10625687
> 
> 赞同：1
> 
> 时间：2012-05-16T19:51:25.797
> 
> 标签：asp.net-mvc, extjs, extjs4

我需要知道是否可以在 MVC 3 .Net 的 Razor 视图中使用 ExtJS 4 组件，如 Grid、Combobox 等。如果可能*的*话，我还想知道在哪里可以阅读手册/教程或一些相关文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T02:20:50.603

这是关于 ExtJS4 Combo & ASP.NET MVC3 的教程：

[http://whatisextjs.com/extjs-4-tutorial/extjs4-combo-asp-net-mvc3#more-452](http://whatisextjs.com/extjs-4-tutorial/extjs4-combo-asp-net-mvc3#more-452)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:53:15.883

当然有可能，Razor 视图只会生成普通的 HTML 页面，因此您可以在普通 HTML 中执行的任何操作，都可以在 ASP.NET MVC 中执行。

Ps 查看 Ext.NET，一个用于 .NET 的 ExtJs 库。也许你觉得它有用：[http](http://www.ext.net/) ://www.ext.net/ 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:59:15.917

您可以在 mvc 中使用 extjs 网格。mvc - 网格示例 [http://nraykov.wordpress.com/2009/11/29/using-ext-js-grid-with-asp-net-mvc/](http://nraykov.wordpress.com/2009/11/29/using-ext-js-grid-with-asp-net-mvc/)

检查这也[将数据从 ASP.net 返回到 ExtJS 网格](https://stackoverflow.com/questions/221273/returning-data-from-asp-net-to-an-extjs-grid)

# opengl - OpenGL渲染到多个纹理，结果是白色的

> ID：10625689
> 
> 赞同：2
> 
> 时间：2012-05-16T19:51:30.057
> 
> 标签：opengl, rendering, fbo

我已经开始切换我的渲染代码以支持着色器，并且在渲染到后台缓冲区时一切正常。所以现在我正在努力渲染到 FBO，但我得到的只是颜色和法线的白色纹理。

这是我的 FBO 创建代码：

```
void RenderTarget_GL::CreateFBO (void)
{
  // if the machine supports the GL FBO extension
  if (s_supportfbo)
  {
    // Create FBO
    glGenFramebuffersEXT(1, &m_fbo);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, m_fbo);

    // Create default texture buffer
    char *buffer = new char [static_cast<int>(g_window->GetWidth() * m_screenWidth) * static_cast<int>(g_window->GetHeight() * m_screenHeight) * 4];
    std::memset(buffer, 0, static_cast<int>(g_window->GetWidth() * m_screenWidth) * static_cast<int>(g_window->GetHeight() * m_screenHeight) * 4);

    // Create Render Texture
    glGenTextures(1, &m_rendertexture);
    glBindTexture(GL_TEXTURE_2D, m_rendertexture);
    glTexImage2D(GL_TEXTURE_2D, 0, 4, static_cast<int>(g_window->GetWidth() * m_screenWidth), static_cast<int>(g_window->GetHeight() * m_screenHeight), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // Bind Render Texture to FBO
    glBindTexture(GL_TEXTURE_2D, 0);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, m_rendertexture, 0);

    // Create Normal Texture if this FBO will be rendering normals
    if (m_hasnormal)
    {
      glGenTextures(1, &m_normaltexture);
      glTexImage2D(GL_TEXTURE_2D, 0, 4, static_cast<int>(g_window->GetWidth() * m_screenWidth), static_cast<int>(g_window->GetHeight() * m_screenHeight), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

      // Bind Normal Texture to FBO
      glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT1_EXT, GL_TEXTURE_2D, m_normaltexture, 0);
    }

    // UnBind FBO and cleanup default buffer
    delete [] buffer;
    Clear();
  }
} 
```

我用来设置当前渲染目标的代码：

```
void RenderTarget_GL::Set (void)
{
  if (s_supportfbo && g_glgraphics->GetShaderEnabled())
  {
    static const GLenum buffer1[] = {GL_COLOR_ATTACHMENT0_EXT};
    static const GLenum buffer2[] = {GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT};

    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, m_fbo);
    if (m_hasnormal)
      glDrawBuffers(2, buffer2);
    else
      glDrawBuffers(1, buffer1);
  }
} 
```

最后，我的实际绘图代码：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);
// Setup the camera transformation
glMatrixMode(GL_MODELVIEW);
glPushMatrix();

if (m_camera)
  m_camera->GLMatrix();
else
  m_defaultCam.GLMatrix();

// Setup Render Target
if (m_shaderenabled)
{
  glPushAttrib(GL_VIEWPORT_BIT);
  glViewport(0,0,g_window->GetWidth(),g_window->GetHeight());
  m_initialpass->Set();
}

// Draw All Objects with their per-object shaders

// Clear render target and shader bindings
if (m_shaderenabled)
{
  glPopAttrib();
  RenderTarget_GL::Clear();
  Shader_GL::ClearShaderBinding();
}

glPopMatrix();

glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();

// Draw Scene
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, m_initialpass->GetColorTexture());
glBegin(GL_QUADS);
  glTexCoord2f(0.0f, 0.0f);
  glVertex3f(-1.0f, -1.0f, 0.0f);
  glTexCoord2f(1.0f, 0.0f);
  glVertex3f(1.0f, -1.0f, 0.0f);
  glTexCoord2f(1.0f, 1.0f);
  glVertex3f(1.0f, 1.0f, 0.0f);
  glTexCoord2f(0.0f, 1.0f);
  glVertex3f(-1.0f, 1.0f, 0.0f);
glEnd();

Texture_GL::ClearTextureBinding();
glPopMatrix();

// Swap Buffers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:02:37.990

`GL_TEXTURE_MIN_FILTER``GL_NEAREST_MIPMAP_LINEAR`默认情况下。提供 mipmap 或切换到`GL_LINEAR`或`GL_NEAREST`。

OpenGL Wiki[有更多](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture).

# c++ - 如何使用 cin.getline 修复“无重载函数实例”错误？

> ID：10625701
> 
> 赞同：1
> 
> 时间：2012-05-16T19:52:18.563
> 
> 标签：c++, getline

```
string add_text()
{
    const int string_size(30);
    string add_string;
    cin.getline (add_string,string_size,'\n');
    return add_string;
} 
```

当我用上面的函数编译程序时，我得到一个错误。请注意，我`using namespace std;`在程序的早期使用。如果它有帮助，我正在使用代码块，并且还尝试使用 Visual Studio 11 Professional Beta 编译程序。

**错误：**

```
C:\Users\Jonathan\Documents\Code_Blocks\test_12\main.cpp|32|error: no matching function for call to 'std::basic_istream<char, std::char_traits<char> ::getline(std::string&, const int&, char)'| 
```

任何有关此问题的帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:57:57.677

您正在调用[std::istream::getline(char *, streamssize)](http://en.cppreference.com/w/cpp/io/basic_istream/getline) -您可以看到它需要 a`char *`而不是`std::string`您正在传递的。

改用[std::getline(std::istream&, std::string&, char)](http://en.cppreference.com/w/cpp/string/basic_string/getline)，如下所示：

```
getline(cin, add_string, '\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:54:42.637

`istream::getline`不采用 a`std::string`作为参数，而是采用`char*`. 您可以通过正确调用该函数来修复它。

所以，只要你知道这条线的最大尺寸：

```
char buff[256]; //or whatever length
cin.getline (buff,string_size,'\n');
string add_string(buff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:54:45.233

不要使用 member `.getline()`，而是使用 global [`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)。

member`.getline()`只能`char *`用作缓冲区，而`std::getline()`可以使用`std::string`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T19:56:12.157

`cin.getline`是成员函数。因此，考虑存在的每种可能类型并不会重载。因此，开发人员重载了全局版本（即`std::getline`）。

# core-data - 如何从代码中访问核心数据属性验证信息？

> ID：10625702
> 
> 赞同：2
> 
> 时间：2012-05-16T19:52:23.030
> 
> 标签：core-data

我在最大长度值为 40 的核心数据实体中有一个字符串属性。我想在代码中使用此值，而不必重新键入值“40”。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:43:42.540

正如@K.Steff 在上面的评论中所说，您最好在代码中进行验证，而不是在核心数据模型中设置最大长度。为了补充该评论，我还建议您查看为此实体类型使用自定义 NSManagedObject 子类，并在该子类中覆盖`validateValue:forKey:error:`或实现此属性的特定于键的验证方法。

这种方法的价值在于，您可以通过在验证时截断字符串来“强制”验证。从 NSManagedObject 文档：

> 此方法负责两件事：将值强制转换为对象的适当类型，并根据对象的规则对其进行验证。
> 
> NSManagedObject 提供的默认实现参考对象的实体描述来强制值并检查基本错误，例如在不允许的情况下为空值以及为属性指定字段宽度时的字符串长度。然后它搜索 validate< Key >:error: 形式的方法，如果存在则调用它。
> 
> 您可以实现 validate< Key >:error: 形式的方法，以执行使用属性描述中可用的约束无法执行的验证。如果它发现一个不可接受的值，你的验证方法应该返回 NO 并且错误地返回一个描述问题的 NSError 对象。有关更多详细信息，请参阅“模型对象验证”。对于属性间验证（检查无效值的组合），请参阅 validateForUpdate: 和相关方法。

因此，您可以实现此方法来验证字符串是否太长，并在必要时在太长时将其截断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:04:17.177

从`NSManagedObject`您可以访问`NSEntityDescription`via `entity`。在那里，您可以获取数组`properties`和字典`propertiesByName`，其中任何一个都会让您进入`NSPropertyDescription`s. 每个属性描述都有一个属性，`validationPredicates`它将返回一个`NSPredicate`s 数组。其中之一是您的字符串长度必须最多为 40。

遗憾的是，谓词对于逆向工程来说非常麻烦——而且这样做甚至是不可能的，因为您可以通过提供一个块来创建一个。希望尽管您只有一个`NSComparisonPredicate`或能够从一个`NSCompoundPredicate`或一个向下走的树上到达一个`NSExpression`。

从比较谓词中，您将能够从左右表达式中发现一个是字符串长度，另一个是常量值。

所以，总结一下：

*   Core Data 仅通过非常通用的谓词方式公开验证标准；
*   您通常（但并非总是`NSExpression`）可以从谓词重建表达式（在自然语言意义上而不是意义上）；和
*   如果您明确知道您只是在某处寻找长度比较，那么您可以将其进一步简化为树遍历，以进行涉及长度的比较谓词。

由于具体和一般的不匹配，它肯定不会很漂亮，但这是可能的。

# android - 从另一个类访问首选项

> ID：10625703
> 
> 赞同：-4
> 
> 时间：2012-05-16T19:52:34.703
> 
> 标签：android, sharedpreferences, android-preferences

我有一个具有 Preferences 类的应用程序，我想知道如何制作，以便在启动应用程序时甚至在进入首选项（设置）类之前应用设置。我有一个 getPrefs() void 方法，当我在偏好活动中按下“保存”按钮时会调用该方法。

那么，您能否帮助我并告诉我应该在进入应用程序时应用哪些“默认”首选项？（我需要另一个类的 getprefs 方法）

如果您能给我一些建议或提示，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:00:29.653

`SharedPreferences`要从应用程序中的任何位置获取实例，请使用：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPrefences(context); 
```

要在首选项中设置值，您需要为这些首选项调用编辑器，然后设置键的值并最终提交结果。这一切都可以在一行中完成：

```
prefs.edit().putString("myKey","myValue").commit(); 
```

这会将字符串值存储`myValue`在一个名为的键上`myKey`，如果它在调用`getDefaultSharedPreferences`.

要检索存储的值，请指定键和*备用*值，以防没有使用该键设置首选项：

```
prefs.getString("myKey","oops no value found"); 
```

# c++ - 在什么情况下我们需要包括 ?

> ID：10625716
> 
> 赞同：52
> 
> 时间：2012-05-16T19:53:28.130
> 
> 标签：c++, header-files, assert

在什么情况下我们应该包括**cassert**？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-16T20:15:35.810

简而言之，不要使用它；使用`<assert.h>`.

C++11 删除了“c....”标头不会污染全局命名空间的任何形式保证。

它从来都不是实践中的保证，现在甚至不是正式的保证。

因此，对于 C++11，使用“c....”头文件变体不再具有任何可以想象的优势，而与一个编译器和该编译器版本一起工作的代码可能会存在明显而明显的缺点。由于例如名称冲突或全局命名空间中的不同重载选择，无法使用其他编译器或版本进行编译。

所以，虽然`cassert`在 C++03 中毫无意义（你不能将宏放在命名空间中），但在 C++11 中它完全没有意义——即使作为一般方案的特例。

* * *

**附录**，2013 年 12 月 22 日：

该标准根据 <cX> 标头定义每个 C++ *C 标头*<Xh> 标头，而该标头又根据相应的 C 库标头定义。

**C++11 §D.5/2**：

> “每个 C 标头，每个都有一个形式的名称`name.h`，表现得好像每个由相应的*cname*标头放置在标准库命名空间中的名称都放置在全局命名空间范围内。”

**C++11 §D.5/3**（非规范示例）：

> “标头`<cstdlib>`确实在命名空间内提供了它的声明和定义`std`。它还可以在全局命名空间中提供这些名称。头文件`<stdlib.h>`在全局命名空间中确实提供了相同的声明和定义，就像在 C 标准中一样。它还可能在命名空间内提供这些名称`std`。”

Stack Overflow 用户[CR](https://stackoverflow.com/users/832878/c-r)的评论让我意识到某些版本的 g++，例如 MinGW g++ 4.7.2，在标头方面非常**不标准**`<X.h>`，缺少`sin`C++ 标准要求的重载：

我已经知道 MinGW g++ 4.7.2 也完全缺乏诸如 的功能`swprintf`，并且它在纯 C++ 库中也有同样的缺点，例如缺乏 C++11 `std::to_string`。然而，关于它缺少 C 函数重载的信息对我来说是新的。

在实践中，g++ 缺少重载意味着

*   忽略 g++ 问题，或

*   避免使用缺少的 g++ 重载，
    例如仅使用`double sin( double )`，或

*   使用`std`命名空间重载
    （然后需要包含`<cmath>`以保证它们在 g++ 中的存在）。

为了使用`std`不合格的 g++ 命名空间重载，一种实用的方法是为此编译器定义**标头包装器。**我已经使用这种方法来解决 g++ 的缺点。给`printf`家人。正如大卫惠勒曾经说过的那样，“计算机科学中的所有问题都可以通过另一个层次的间接来解决”......

然后可以安排事情，以便使用 g++ 缺失重载的标准代码也可以使用 g++ 编译。这会将编译器调整为标准，并使用固定数量的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T19:55:44.627

就像任何其他头文件一样，`#include <cassert>`当您使用在该头文件中声明的内容时，例如`assert()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:58:46.100

查看易于访问的[参考](http://en.cppreference.com/w/cpp/error/assert)

```
#include <iostream>
// uncomment to disable assert()
// #define NDEBUG
#include <cassert>

int main()
{
    assert(2+2==4);
    std::cout << "Execution continues past the first assert\n";
    assert(2+2==5);
    std::cout << "Execution continues past the second assert\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T06:22:50.257

assert.h 定义了一个可以用作标准调试工具的宏函数。

# css - 试图围绕一个链接制作一个特定大小的盒子 - 不工作

> ID：10625720
> 
> 赞同：0
> 
> 时间：2012-05-16T19:53:44.227
> 
> 标签：css

试图在 Wordpress 中的链接菜单周围添加一个框。到目前为止，我已经得到了这个 - 如果我是正确的，它应该是一个 150px x 50px 的盒子。但是，虽然边距、填充等都可以工作，但它不起作用。为什么会这样？在最近的 CSS 中，宽度是否已被弃用？

```
.menu-header .menu-item {
    display: inline !important;
    margin: 0px 50px !important;
    border-style: solid !important;
    border-width: 2px !important;
    width: 150px !important;
    height: 50px !important;
    background-color: #EDEDED !important;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:57:52.827

删除`display: inline`- 这将导致设置大小的问题。元素需要是块级才能指定大小。

此外，CSS 可以简化：

```
.menu-header .menu-item{
    margin: 0 50px;
    border: 2px solid #000;
    width: 150px;
    height: 50px;
    background: #EDEDED;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:57:50.957

display:inline 和 width 150px 相互碰撞。内联元素每次都具有其内容的宽度。

当您确实需要内联或阻止时，您可以将显示设置为内联块。

# javascript - Node.js 中的 XML（使用 Javascript）

> ID：10625721
> 
> 赞同：1
> 
> 时间：2012-05-16T19:53:59.260
> 
> 标签：javascript, xml, node.js

我已经将模拟的 XML 数据存储在硬盘上（称为 simmedData.xml）。我还有通过 Web 端点 ( ) 出售的“真实”数据（“真实”数据是动态的`http://localhost:8079/realData`）。

XML 文档的格式完全相同，但我想将它们“合并”到一个可用的端点`http://localhost:8080/mergedData`。

我想使用node.js 来托管mergedData 端点——当请求mergedData 时，有没有一种简单的方法可以将这些xml 文档合并在一起？

例如：

**simmedData.xml**

```
<site:Tracks xmlns:site='http://mysite/site'>
  <site:track id='1' latitude='37.82091918923291' longitude='128.87375778822812' altitude='9753.6005859375' bearing='10.542624087704585' speedInKnots='454.6067199707031' />
  <site:track id='2' latitude='37.45048387959727' longitude='129.49111126654887' altitude='9144.0' bearing='190.90400586790983' speedInKnots='436.89837646484375' />
</site:Tracks> 
```

**http://localhost:8079/realData**

```
<site:Tracks xmlns:site='http://mysite/site'>
  <site:track id='1001' latitude='39.82093291' longitude='128.87375722812' altitude='9753.60375' bearing='10.542704585' speedInKnots='454.6707031' />
  <site:track id='1002' latitude='39.387959727' longitude='129.4126654887' altitude='9144.0' bearing='90.90790983' speedInKnots='436.8984375' />
  <site:track id='1003' latitude='40.82093291' longitude='138.87375722812' altitude='9753.5' bearing='10.542704585' speedInKnots='454.6707031' />
  <site:track id='1004' latitude='40.387959727' longitude='139.4126654887' altitude='9124.0' bearing='90.90790983' speedInKnots='436.8984375' />
</site:Tracks> 
```

**http://localhost:8080/mergedData**

```
<site:Tracks xmlns:site='http://mysite/site'>
  <site:track id='1' latitude='37.82091918923291' longitude='128.87375778822812' altitude='9753.6005859375' bearing='10.542624087704585' speedInKnots='454.6067199707031' />
  <site:track id='2' latitude='37.45048387959727' longitude='129.49111126654887' altitude='9144.0' bearing='190.90400586790983' speedInKnots='436.89837646484375' />
  <site:track id='1001' latitude='39.82093291' longitude='128.87375722812' altitude='9753.60375' bearing='10.542704585' speedInKnots='454.6707031' />
  <site:track id='1002' latitude='39.387959727' longitude='129.4126654887' altitude='9144.0' bearing='90.90790983' speedInKnots='436.8984375' />
  <site:track id='1003' latitude='40.82093291' longitude='138.87375722812' altitude='9753.5' bearing='10.542704585' speedInKnots='454.6707031' />
  <site:track id='1004' latitude='40.387959727' longitude='139.4126654887' altitude='9124.0' bearing='90.90790983' speedInKnots='436.8984375' />
</site:Tracks> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:11:37.910

如果您想要进行任何类型的智能“XML 感知”合并，那么您可能会使用 XML 解析器来进行 DOM 操作，或者使用 XSLT 转换器来运行将两者合并的样式表。我确信节点有 libxml/libxslt 包装器：

*   [用于 node.js 的 XSLT](http://toolbox.no.de/packages/node_xslt)
*   [node.js 的 XML 解析器](https://stackoverflow.com/questions/6240577/node-js-library-implementing-w3c-xml-dom)

我最近在 SO 上回答了一个关于[XML 与 XSLT 合并](https://stackoverflow.com/questions/10477524/how-to-concatenate-two-or-more-xml-files-using-xslt-and-maintain-the-order/10523360#10523360)的问题，但如果您只是简单地“追加”，那么它会变得不那么棘手。

# lua - Intellij 11.1.1，Corona API 代码完成不起作用

> ID：10625722
> 
> 赞同：0
> 
> 时间：2012-05-16T19:53:59.947
> 
> 标签：lua, intellij-idea

# 问题

已安装

*   IntelliJ 11.1.1，
*   Windows 版 Lua (5.1),
*   电晕SDK，
*   [来自https://bitbucket.org/sylvanaar2/idlua-sdk-corona](https://bitbucket.org/sylvanaar2/idlua-sdk-corona)的 Corona API

**自动完成无法正常工作。**

它显示例如`physics`，但不是例如`physics.addBody`，如此屏幕截图所示

![截屏](../Images/43072130d4cda9c5a5ff8c1cd9b208e6.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:41:46.120

我一直有同样的麻烦。我可以让它工作的唯一方法是将 API 文件拆分为单独的文件并为每个文件创建一个模块。

因此，您将打开 corona_api.lua，并将所有物理函数复制到一个名为“physics”的新文件中，然后在该文件中您应该执行以下操作；

```
module "physics"
function  addBody() end
function  getGravity() end
function  newJoint() end
function  pause() end
and so on... 
```

你可以找到并替换物理。在功能的开始，使生活更轻松。

# wpf - 无法在 XAML Accordion 中更改蓝色背景

> ID：10625728
> 
> 赞同：2
> 
> 时间：2012-05-16T19:54:21.850
> 
> 标签：wpf, xaml, background, accordion

我正在尝试在 XAML 中使用手风琴控件，但无法更改默认使用的深蓝色背景。我设法偶然发现其他一些人有同样的问题，但没有发布解决方案。到目前为止，我找到的唯一答案是使用 Expression Studio，但不幸的是我没有副本。

请参阅下面的设计器代码，目前还没有很多，我尝试在每个元素上设置背景属性，但没有得到任何结果。

```
<Window x:Class="Test.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="289" 
    Width="500" 
    xmlns:my="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit">
    <Grid>
        <my:Accordion HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
            <my:AccordionItem x:Name="item1" Header="Item 1">
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                </Grid>
            </my:AccordionItem>
            <my:AccordionItem x:Name="item2" Header="Item 2">

            </my:AccordionItem>
            <my:AccordionItem x:Name="item3" Header="Item 3">

            </my:AccordionItem>
        </my:Accordion>        
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:34:14.130

看看有同样问题的人的这个[MSDN 论坛线程](http://social.msdn.microsoft.com/forums/en-us/wpf/thread/46FFD9A7-5759-40F8-828F-159B4BDC69B5)。另请注意，此控件具有[预览](http://wpf.codeplex.com/wikipage?title=Quality%20Bands)质量，根据 CodePlex，它等同于 Alpha 版本。

从上面的链接：

> 关键部分是绑定到实际的外部网格。出于某种原因，手风琴项目没有为内部网格提供一个宽度/高度来拉伸，所以你必须将它绑定到“更高”的东西上。

* * *

我对其进行了测试，它确实有效，但它确实给了设计者错误，`Object reference not set to an instance of an object`但它确实可以编译和运行。

```
<Grid>
    <my:Accordion HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
        <my:AccordionItem x:Name="item1" Header="Item 1">
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="White" 
                Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}, Path=ActualWidth}"
                Height="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type Grid}}, Path=ActualHeight}">
            </Grid>
        </my:AccordionItem>
        <my:AccordionItem x:Name="item2" Header="Item 2">
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="White"  
                Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}, Path=ActualWidth}"
                Height="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type Grid}}, Path=ActualHeight}">
            </Grid>
        </my:AccordionItem>
        <my:AccordionItem x:Name="item3" Header="Item 3">
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="White" 
                Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}, Path=ActualWidth}"
                Height="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type Grid}}, Path=ActualHeight}">
            </Grid>
        </my:AccordionItem>
    </my:Accordion>
</Grid> 
```

# openmp - 使用 OpenMP 的 FFTW 文档中存在误解或拼写错误

> ID：10625730
> 
> 赞同：0
> 
> 时间：2012-05-16T19:54:25.990
> 
> 标签：openmp, fftw

此报价来自[FFTW 手册](http://www.fftw.org/doc/Usage-of-Multi_002dthreaded-FFTW.html#Usage-of-Multi_002dthreaded-FFTW)：

> [...] 第三，在创建要并行化的计划之前，您应该调用：
> 
> `void fftw_plan_with_nthreads(int nthreads);`
> 
> nthreads 参数表示您希望 FFTW 使用的线程数（或者实际上是最大数）。[...]
> 
> 使用 OpenMP，要将 FFTW 配置为使用所有当前正在运行的 OpenMP 线程（由 omp_set_num_threads(nthreads) 或 `OMP_NUM_THREADS`环境变量设置），您可以这样做 ：） `fftw_plan_with_nthreads(omp_get_num_threads()`。

我认为最后一个命令是错误的。应该是`fftw_plan_with_nthreads(omp_get_max_threads())`。`omp_get_num_threads()`将返回当前线程数。但这可能是`1`因为有人在一个线程上创建 fftw_plan。`omp_get_num_threads()`不会返回 的值`OMP_NUM_THREADS`并且不是 的倒数`omp_set_num_threads(nthreads)`。

我是对的还是我误解了 FFTW 或 OpenMP API？

# javascript - Javascript - 如何在字符串中查找子字符串并检查它之前/之后是否有空格？

> ID：10625741
> 
> 赞同：0
> 
> 时间：2012-05-16T19:55:33.840
> 
> 标签：javascript, string, contains, indexof

有谁知道我如何在字符串`"<br/>"`中找到子字符串并检查它之前或之后是否有空格？我一直在使用它来检查字符串是否包含子字符串：

```
if (str.indexOf('<br/>') !== -1) {
} 
```

但是我将如何在它之前或之后检查一个空间？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:58:17.630

```
var idx = str.indexOf('<br/>');

var hasSpaces = idx > 0 &&
    (str.charAt(idx -1) === ' ' || str.charAt(idx + 5) === ' '); 
```

* * *

编辑：如果您还关心`<br/>`即使没有空格的索引，此解决方案也有效。如果您不关心`<br/>`何时没有空格，那么@David 的解决方案会更好（尽管请注意`\b`匹配任何单词边界，因此您可能希望根据您的需要使其更严格）。

* * *

另一个编辑：我刚刚意识到提供的几个正则表达式解决方案只有在前后有空格的情况下才有效。这是一个示例，可以在*前后**或*两侧*使用*空格：

 **```
var match = str.match(/\s?<br\/>\s?/);
var hasSpaces = match && match[0].length > 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:00:36.640

```
var index = str.indexOf('<br/>');
var spaceBefore = false;
var spaceAfter = false;

if (index !== -1) {
    if (str.charAt(index - 1) === ' ') {
        spaceBefore = true;
    }

    if (str.charAt(index + 5) === ' ') {
        spaceAfter = true;
    }
} 
```

[http://jsfiddle.net/jbabey/8FYhv/](http://jsfiddle.net/jbabey/8FYhv/)**

# eclipse - 如何从 IFile 实例创建 IEditorInput 实例？

> ID：10625745
> 
> 赞同：0
> 
> 时间：2012-05-16T19:55:46.730
> 
> 标签：eclipse, eclipse-plugin

我目前正在实现一个自定义 MultiPageEditorPart，我希望在编辑文件类型 .xxx 时拥有多个页面（因此具有相同基本名称和 .yyy 的文件出现在另一个页面中）。

我已经获得了 .xxx 文件对应的 .yyy 文件的 IFile 引用，现在希望实例化一个新的 TextEditor 实例，但它需要一个 IEditorInput 实例进行初始化。

如何使用我的 IFile 实例创建 IEditorInput 的实例？我当然也可以访问 IProject 和通常的 Eclipse 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:16:15.423

尝试

```
new FileEditorInput(iFile) 
```

# python - 缩写python中的双重比较

> ID：10625746
> 
> 赞同：10
> 
> 时间：2012-05-16T19:55:47.037
> 
> 标签：python

有没有办法在python中缩写比较语句，这样我就不必再把整个事情写出来了？例如，而不是：

```
a=3
if a==3 or a==2:
    print "hello world" 
```

我可以做类似的事情吗：如果 a==(3 or 2): print "hello world"

我知道上面的例子行不通，但是还有其他方法可以达到预期的效果吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T19:56:36.263

```
if a in (2, 3):
  print "hello world" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-16T19:57:07.783

可能的解决方案，具体取决于您想要什么：

*   `if a in (2,3)`
*   `if a in xrange(2, 4)`
*   `if 2 <= a <= 3`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-16T20:11:46.403

有关以下答案的原因，请参阅[Python 3.2 优化。](http://docs.python.org/py3k/whatsnew/3.2.html#optimizations)

```
a = 3
if a in {2, 3}:
    print('Hello, world!') 
```

# javascript - 如何在两个元素之间定位文本

> ID：10625750
> 
> 赞同：1
> 
> 时间：2012-05-16T19:56:00.970
> 
> 标签：javascript, jquery, codemirror

**下面更新**

我正在尝试以[codemirror](http://codemirror.net/)的输出为目标，并向模块元素添加一些自定义事件和样式。

Codemirror 显示以下代码。

```
<div><module type="content"></module><span>can contain other data</span></div> 
```

在 DOM 中，它在一系列跨度之间呈现。

```
<pre>      
    <span class="cm-tag">&lt;div&gt;&lt;module</span> 
    <span class="cm-attribute">type</span>
    =
    <span class="cm-string">"content"</span>
    <span class="cm-tag">&gt;&lt;/module&gt;&lt;span&gt;</span>
    can contain other data
    <span class="cm-tag">&lt;/span&gt;&lt;/div&gt;</span>
</pre> 
```

我遇到的问题是尝试为整个模块元素添加黄色背景，但由于“=”部分位于两个元素之间，我不确定如何使用选择器来定位它。

这就是我现在所拥有的，但是因为它不包括元素之间的文本，所以背景颜色存在间隙。

```
 $('.cm-tag:contains("<module")').each(function () {
        var $closingElement;
        $(this).nextAll().each(function () {
            if ($(this).text() == "></module>") {
                $closingElement = $(this).next();
                return false;
            }
        });
        var $module =$(this).add($(this).nextUntil($closingElement));

        $module.addClass('module');
    }); 
```

任何人都对如何实现这一点有建议/想法？

**更新** 通过使用 wrapAll jquery 方法，我能够部分到达那里，但可见的结果仍然不太正确。现在空格和等号从被包裹的元素中移除并放在它之后。

```
<modulename"content"id"1234"/> = =

function hilightModules() {
    $('.cm-tag:contains("<module")').each(function() {
        var $module = $(this);

        $(this).nextAll().each(function() {
            $module = $module.add($(this));

            // closing element
            if ($(this).hasClass('cm-tag')) {
                return false;
            }
        });

        $module.wrapAll('<span class="module" />').click(function() {
            // Do stuff                    
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:10:36.080

要将单击处理程序添加到内容文本，最好的办法是在 CodeMirror 包装器元素上注册一个 mousedown 处理程序，并在该处理程序中确定单击的内容是否是您要查找的内容。内容元素可能随时更改，您不想注册大量的处理程序。

至于突出显示的东西，我建议使用覆盖模式（参见[http://codemirror.net/demo/mustache.html](http://codemirror.net/demo/mustache.html)的示例），而不是尝试使用 DOM munging（出于上面列出的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:14:57.423

就像@Raminson 所说，您可以定位`<pre>`标签以使背景跨越整个部分。这是你想要的？

[http://jsfiddle.net/ckaufman/CSzny/](http://jsfiddle.net/ckaufman/CSzny/)

# visual-c++ - 当我的图形驱动程序支持时，如何在 Windows 上使用 glGenerateMipmapEXT？

> ID：10625751
> 
> 赞同：0
> 
> 时间：2012-05-16T19:56:08.770
> 
> 标签：visual-c++, opengl

这是我的情况： 1）我检查了GLEW库的**glewinfo**工具，发现我的图形驱动程序支持glGenerateMipmapEXT函数：

```
glGenerateMipmapEXT:                                         OK 
```

2) 我已经获得 GLEW 代码并在 VC++ 2010 上重建它，我不知道`auto\core\`or`auto\extensions\`文件夹中的文件是否影响我的构建:(

3) 在构建使用该`glGenerateMipmapEXT`函数的源代码时，VC++ 给我一个错误

```
 error LNK2001: unresolved external symbol __imp____glewGenerateMipmapEXT 
```

那么，我该如何使用该`glGenerateMipmapEXT`功能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:44:37.250

*   初始化opengl窗口
*   glewInit()
*   创建纹理并使用 glGenerateMimapEXT()

    if (GLEW_EXT_framebuffer_object) { // 你有 FBO 和 glGenerateMipmapExt ！}

您应该拥有支持 OpenGL 2.1 的 GFX 卡，以确保拥有这些扩展...

# javascript - XDomainRequest POST 与 XML ......我做错了什么？

> ID：10625754
> 
> 赞同：0
> 
> 时间：2012-05-16T19:56:21.093
> 
> 标签：javascript, xml, wcf, post, xdomainrequest

这是（希望）一个简单的问题。我必须使用 XDomainRequest 通过 POST 向 Web 服务提交请求。我在互联网上找到了很少的文档，但我拒绝相信没有人知道这一点。

这是我的 XDomainRequest 代码：

```
var testURL = 'http://localhost:4989/testendpoint';

//let us check to see if the browser is ie.  If it is not, let's 
if ($.browser.msie && window.XDomainRequest) {
    var xdr2 = new XDomainRequest();
    xdr2.open("POST", testURL);
    xdr2.timeout = 5000;
    xdr2.onerror = function () {
        alert('we had an error!');
    }
    xdr2.onprogress = function () { 
        alert('we have some progress!');
    };
    xdr2.onload = function () {
        alert('we load the xdr!');

        var xml2 = new ActiveXObject("Microsoft.XMLDOM");
        xml2.async = true;
        xml2.loadXML(xdr2.responseText);
    };

    //what form should my request take to be sending a string for a POST request?  
    xdr2.send("thisisastring");
} 
```

根据 Web 服务的帮助页面，我的 Web 服务 (WCF) 采用单个参数，如下所示：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">String content</string> 
```

我已经通过其他http客户端（移动和桌面API，提琴手）通过构建一个字符串，将我尝试传递给Web服务的参数与字符串序列化的其余部分连接起来，从而使其工作。例如，我尝试过：

```
xdr2.send("thisisastring");
xdr2.send("<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">thisisastring</string>"); 
```

但是 onerror 处理程序总是被触发。我认为这与 WCF 没有任何关系，因为：

*   WCF 在我调用它的所有其他客户端中总是成功的，并且
*   如果是服务，onerror 方法将永远不会被触发。它会返回垃圾，但它会返回一些东西。

当我使用控制台（在 ie9 的开发工具中）记录 responseText 时，它说：

```
LOG:undefined 
```

所以我相当确定问题在于我如何使用 XDomainRequest。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:56:26.187

如果有人遇到这种情况，我最终会将我的 Web 服务转换为返回 JSON 格式的数据。使用 JSON 消除了对 XDomainRequest 的需求，允许我使用传统的 ajax jquery 工具代替。

# javascript - 文档对象模型问题

> ID：10625759
> 
> 赞同：0
> 
> 时间：2012-05-16T19:56:50.907
> 
> 标签：javascript

好的，当我执行任何类型的 Javascript 时，我的 DOM 都遇到了严重问题。以下代码片段不起作用，由于某种原因，我无法开始理解。每当我尝试使用 getElementById()功能，脚本停止工作。请告诉我我做错了什么。

```
var total=0;
document.write("test");
function quickTotal(price,id){
    alert(price)
    alert(id)
    var object=getElementById(id)
    if(object.checked == 1){
        total=parseFloat(total)+parseFloat(price)
        alert("add")
    }
    if(object.checked == 0){
        total=parseFloat(total)-parseFloat(price)
        alert("subtract")
}

    alert(total)
    //document.floater.price.innerHTML("test")
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T19:59:30.123

尝试使用`document.getElementById(id)`（前缀为`document`，因为该方法在`document`对象上，而不是`window`）。

*更新：您的代码示例：*

```
<input type="checkbox" id="myChkBox" />
<input type="button" onclick="quickTotal(30, 'myChkBox');" value="Click me" />

<script type="text/javascript">
    var total = 0;
    document.write("test");
    function quickTotal(price, id) {
        alert(price);
        alert(id);
        var object = document.getElementById(id);
        if (object.checked == 1) {
            total = parseFloat(total) + parseFloat(price);
            alert("add");
        }
        if (object.checked == 0) {
            total = parseFloat(total) - parseFloat(price);
            alert("subtract");
        }

        alert(total);
        //document.floater.price.innerHTML("test")
    }
</script> 
```

# jsf - JSF 转换器更改选项值

> ID：10625762
> 
> 赞同：1
> 
> 时间：2012-05-16T19:57:00.643
> 
> 标签：jsf, converter

我有一个转换器，它正在改变我所有选项的值：

当我第一次创建时，`selectOneMenu`我有这个`html`：

```
<select name="j_idt14:j_idt20" size="1">
        <option value="2" selected="selected">Infantil</option> //value="2"
    <option value="6">Lançamento Inverno</option>
    <option value="5">Lançamento Verão 2</option>
    <option value="4">Lançamento Preview 1</option>
    <option value="3">Feminina</option>
    <option value="7">Masculina</option>//value="7"
</select> 
```

当我提交表单时，它会调用转换器并将其转换为对象，它会对我的值（id）造成某种混乱，它`id`在第一个和最后一个结果上大多重复相同。

```
<select name="j_idt14:j_idt20" size="1">
    <option value="2" selected="selected">Infantil</option>//value="2"
    <option value="6">Lançamento Inverno</option>
    <option value="5">Lançamento Verão 2</option>
    <option value="4">Lançamento Preview 1</option>
    <option value="3">Feminina</option>
    <option value="2">Masculina</option>//value="2" ?
</select> 
```

这是我的`converter`

```
@FacesConverter(value = "SubGroup")
public class SubGroup implements Converter
{
    private static ProductSubgroupVO productSubgroupVO   = new ProductSubgroupVO();

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        productSubgroupVO.setId(Integer.valueOf(value));
        productSubgroupVO = (ProductSubgroupVO) new ProductSubgroupBO().getProductSubgroup(productSubgroupVO).toArray()[0];
        return (ProductSubgroupVO) productSubgroupVO;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        productSubgroupVO = (ProductSubgroupVO) value;
        String teste = String.valueOf(productSubgroupVO.getId());
        return teste;
    }
} 
```

我注意到了一些事情，但我不知道它是否是 a 的正确行为`converter`，每次`getAsObject`调用时，最后都会`getAsString`再次调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:14:31.727

您`productSubgroupVO`已声明并因此在**所有**转换器实例和线程`static`之间共享。这不是线程安全的。删除它并仅在方法本地范围内声明它。

 **```
@Override
public Object getAsObject(FacesContext context, UIComponent component, String value)
{
    ProductSubgroupVO productSubgroupVO = new ProductSubgroupVO();
    productSubgroupVO.setId(Integer.valueOf(value));
    return (ProductSubgroupVO) new ProductSubgroupBO().getProductSubgroup(productSubgroupVO).toArray()[0]
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value)
{
    ProductSubgroupVO productSubgroupVO = (ProductSubgroupVO) value;
    return String.valueOf(productSubgroupVO.getId());
} 
```**

# c# - 为什么我在调用 ExceptionPolicy.HandleException 时收到 System.InvalidOperationException？

> ID：10625764
> 
> 赞同：3
> 
> 时间：2012-05-16T19:57:05.337
> 
> 标签：c#, exception, exception-handling, enterprise-library

我正在开发一个测试程序，该程序可以帮助我弄清楚 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling 框架是如何工作的。该程序定义了几种自定义异常类型并将自定义异常处理程序与每种类型相关联。在运行时，程序提示用户抛出异常的类型，抛出异常，并使用 ExceptionHandling 框架为异常类型调用适当的异常处理程序：

```
using System;
using System.Collections.Specialized;
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
using Microsoft.Practices.EnterpriseLibrary.ExceptionHandling;
using Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration;

namespace ConsoleApplication1
{
    public class AException  : Exception  { public AException(string message)  : base(message) { } }
    public class BException  : Exception  { public BException(string message)  : base(message) { } }
    public class BBException : BException { public BBException(string message) : base(message) { } }

    public class WrapperException : Exception
    {
        public WrapperException(Exception innerException)
            : base("Wrapped exception: [" + innerException.Message + "]", innerException) { }
    }

    public class MyExceptionHandler<T> : IExceptionHandler
    {
        protected NameValueCollection Ignore { get; set; }
        public MyExceptionHandler(NameValueCollection ignore)
        {
            Ignore = ignore;
        }

        #region IExceptionHandler Members

        public virtual Exception HandleException(Exception exception, Guid handlingInstanceId)
        {
            if (exception is T)
            {
                Console.WriteLine("Exception Handled:");
                Console.WriteLine("  Expected Type : [{0}]", typeof(T).ToString());
                Console.WriteLine("  Actual Type   : [{0}]", exception.GetType().ToString());
                Console.WriteLine("  Message       : [{0}]", exception.Message);
                Console.WriteLine();
            }
            else
            {
                Console.WriteLine("Unexpected Exception Type: [{0}]", exception.GetType().ToString());
            }
            return exception;
        }

        #endregion
    }

    [ConfigurationElementType(typeof(CustomHandlerData))]
    public class AExceptionHandler : MyExceptionHandler<AException>
    {
        public AExceptionHandler(NameValueCollection ignore) : base(ignore) { }
    }

    [ConfigurationElementType(typeof(CustomHandlerData))]
    public class BExceptionHandler : MyExceptionHandler<BException>
    {
        public BExceptionHandler(NameValueCollection ignore) : base(ignore) { }
    }

    [ConfigurationElementType(typeof(CustomHandlerData))]
    public class ExceptionHandler : MyExceptionHandler<Exception>
    {
        public ExceptionHandler(NameValueCollection ignore) : base(ignore) { }

        public override Exception HandleException(Exception exception, Guid handlingInstanceId)
        {
            var wrapper = new WrapperException(exception);
            return base.HandleException(wrapper, handlingInstanceId);
        }
    }

    class Program
    {
        static void ThrowSomething()
        {
            Console.Write("Enter the exception type: ");
            var x = Console.ReadLine();
            if (x.Equals("a"))
            {
                throw new AException(x);
            }
            else if (x.Equals("b"))
            {
                throw new BException(x);
            }
            else if (x.Equals("bb"))
            {
                throw new BBException(x);
            }
            else
            {
                throw new Exception(x);
            }
        }

        static void Main(string[] args)
        {
            ExceptionManager xm = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
            while (true)
            {
                //xm.Process(ThrowSomething, "Policy");
                try
                {
                    ThrowSomething();
                }
                catch(Exception ex)
                {
                    Exception exToThrow = null;
                    if (ExceptionPolicy.HandleException(ex, "policy", out exToThrow))
                    {
                        if (exToThrow == null)
                        {
                            throw;
                        }
                        else
                        {
                            throw exToThrow;
                        }
                    }
                }
                Console.WriteLine();
            }
        }
    }
} 
```

在该程序的第一次迭代中，我使用 ExceptionManager.Process() 方法来调用我的 ThrowSomething() 方法。使用这种方法，一切都很好。然后我修改了 Main 以使用 ExceptionPolicy.HandleException() 代替。当我这样做时，我开始收到此异常：

> 未处理的异常：Microsoft.Practices.ServiceLocation.ActivationException：尝试获取 ExceptionPolicyImpl 类型的实例时发生激活错误，键“策略”---> Microsoft.Practices.Unity.ResolutionFailedException：依赖项解析失败，类型 =“Microsoft. Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl”，名称 = “策略”。异常发生时：解决时。例外是： InvalidOperationException - ExceptionPolicyImpl 类型有多个长度为 2 的构造函数。无法消除歧义。

我的 App.config 文件包含以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    </configSections>
    <exceptionHandling>
        <exceptionPolicies>
            <add name="Policy">
                <exceptionTypes>
                    <add name="AException" type="ConsoleApplication1.AException, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                        postHandlingAction="None">
                        <exceptionHandlers>
                            <add type="ConsoleApplication1.AExceptionHandler, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                                name="AExceptionHandler" />
                        </exceptionHandlers>
                    </add>
                    <add name="BException" type="ConsoleApplication1.BException, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                        postHandlingAction="None">
                        <exceptionHandlers>
                            <add type="ConsoleApplication1.BExceptionHandler, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                                name="BExceptionHandler" />
                        </exceptionHandlers>
                    </add>
                    <add name="All Other Exceptions" type="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                        postHandlingAction="NotifyRethrow">
                        <exceptionHandlers>
                            <add type="ConsoleApplication1.ExceptionHandler, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                                name="ExceptionHandler" />
                        </exceptionHandlers>
                    </add>
                </exceptionTypes>
            </add>
        </exceptionPolicies>
    </exceptionHandling>
</configuration> 
```

谁能告诉我为什么会出现此异常以及如何解决该问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T13:29:52.400

嗯，我觉得很愚蠢。问题是用小写“p”而不是大写“P”拼写“policy”。换行

```
if (ExceptionPolicy.HandleException(ex, "policy", out exToThrow)) 
```

到

```
if (ExceptionPolicy.HandleException(ex, "Policy", out exToThrow)) 
```

解决了这个问题。

# iphone - UIPanGestureRecognizer 不在一个方向上平移

> ID：10625772
> 
> 赞同：1
> 
> 时间：2012-05-16T19:57:41.670
> 
> 标签：iphone, objective-c, uiview, uigesturerecognizer, uipangesturerecognizer

我已经为此奋斗了大约一个小时。我试图让我`UIView`的平移方式与 iOS Facebook 应用程序平移主 UIView 并在左侧显示导航表相同。因此，当您向右滑动时，它会一直向右平移并显示导航表。您可以将其滑回左侧。所以它基本上就像一个滑块。

我有一个`UIPanGestureRecognizer`分配给`UIView`. 这是我`selector`的手势：

```
- (void)swipeDetected:(UIPanGestureRecognizer *)recognizer
{

    CGPoint newTranslation = [recognizer translationInView:self.view];

    NSLog(@"%f", newTranslation.x + lastTranslation.x);

    // only pan appropriately when view is within correct bounds
    if (lastTranslation.x + newTranslation.x >= 0 && lastTranslation.x + newTranslation.x <= 255)
    {

        self.navController.view.transform = CGAffineTransformMakeTranslation(newTranslation.x, 0);

        if (recognizer.state == UIGestureRecognizerStateEnded) {

            // if navcontroller is at less than 145px, snap back to 0
            if (newTranslation.x + lastTranslation.x <= 145)
                self.navController.view.transform = CGAffineTransformMakeTranslation(0, 0);

            // else if its at more than 145px, snap to 255
            else if (newTranslation.x + lastTranslation.x >= 145)
                self.navController.view.transform = CGAffineTransformMakeTranslation(255, 0);

            lastTranslation.x += newTranslation.x;
        }
    }
} 
```

这在将 UIView 向右滑动时非常有效。然后它将停留在 255px，因此它的一部分显示在屏幕上，因此它不会消失。但是，当它在该位置时，当我将它滑回左侧时，它会一直跳到原点，而不是跟随平移手势。

这是为什么？我该如何解决？

谢谢

# java - Android 关注焦点变化

> ID：10625775
> 
> 赞同：8
> 
> 时间：2012-05-16T19:57:49.860
> 
> 标签：java, android

当用户将焦点从 edittext 更改为另一个项目时，我想更新 EditText 我想检查 edittext 的内容，例如大于 10 的数字，如果将其更改为 10。

我该怎么做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T20:06:15.987

设置`setOnFocusChangeListener`为您的编辑文本...

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {

                if(!hasFocus){
              //this if condition is true when edittext lost focus...
              //check here for number is larger than 10 or not
                    editText.setText("10");
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T20:05:49.370

```
 EditText ET =(EditText)findViewById(R.id.yourtextField);
ET.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View arg0, boolean arg1) {

String myText = ET.getText();
//Do whatever

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-18T20:01:55.163

如果有人想在 kotlin 中使用数据绑定来执行此操作，请参考以下代码

```
 //first get reference to your edit text 

 var editText:EditText = viewDataBinding.editText 

 // add listner on edit text 

 editText.setOnFocusChangeListener { v, hasFocus ->
        if(!hasFocus)
        {
      if((editText.text.toString().toIntOrNull()>10)
       {// add any thing in this block
         editText.text = "10"
       }
      }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T05:52:37.260

如果您有兴趣，我已经在这篇文章中进行了解释。去看看[https://medium.com/@mdayanc/how-to-use-on-focus-change-to-format-edit-text-on-android -工作室-bf59edf66161](https://medium.com/@mdayanc/how-to-use-on-focus-change-to-format-edit-text-on-android-studio-bf59edf66161)

这是使用 OnFocusChangeListener 的简单代码

```
 EditText myEditText = findViewById(R.id.myEditText);

    myEditText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus)
            {
              //Do something when EditText has focus
            }
            else{
              // Do something when Focus is not on the EditText
            }
        }
    }); 
```

# pdf - 在 C# 中的横向文档中添加 PDF 字段

> ID：10625782
> 
> 赞同：1
> 
> 时间：2012-05-16T19:58:05.287
> 
> 标签：pdf, itext, pdfsharp

为此，我正在使用 PDF Clown。

我想在 PDF 文档中添加字段。实际上我已经成功地在纵向 PDF 文档中添加了字段，但是在横向 PDF 文档中做同样的事情是很麻烦的。

控件垂直放置而不是水平放置。

即使您提出的解决方案正在使用任何其他库，也请在这件事上提供帮助。我将非常感激。

问候，

穆杰塔巴·潘杰瓦尼

PS。我已经尝试过 PDFSharp.NET，但它似乎不支持创建字段和 iTextsharp，我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:43:08.567

iTextSharp 应该可以解决问题。查看他们网站上提供的许多示例。

# c# - 在 ASP.NET MVC 中使用参数重用另一个视图中的视图

> ID：10625789
> 
> 赞同：4
> 
> 时间：2012-05-16T19:58:23.433
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

作为 ASP.NET MVC 的新手，我已经看到了它在代码重用和可维护性方面的一些好处。在询问[上一个关于 routing](https://stackoverflow.com/questions/10553756/correct-terminology-and-examples-for-nesting-routing-views-in-asp-net-mvc)的问题时，我对我的示例有另一个想法，但不确定如何实现它。

**问题：**如何在单独的页面中重用我的问题视图和控制器，以及为某些事情设置参数（例如要显示多少问题）？

**示例：**假设在我的 Web 应用程序中我想显示问题列表。这些问题按项目分组。因此，如果您访问 www.example.com/projectname/issues，您会看到该项目的问题列表，如果您访问 www.example.com/issues，您会看到所有项目的所有问题。我想做的是，如果您访问 www.example.com/projectname，您会看到有关该项目的一些信息，包括最近提交的 10 个问题。

如何重用此问题代码？我看到我有 Partial View 的选项，但是当我实现它时，我不确定如何将任何代码路由到它。在 Web 窗体中，您可以制作一个 ASP.net 控件，在后面的代码中设置一些参数，然后将此控件嵌入到其他地方。

到目前为止，我发现的一些示例要么缺乏完整的实现（不仅仅是在其他页面中添加一些 HTMl），看起来像是在 ASP.NET MVC 3 中似乎不适合我的旧 MVC 代码，并且缺乏允许我设置参数并显示这种类型的重用。

我的术语在这里可能并不完全正确。如果有的话，我试图找到最好的（阅读 MVC）方法来复制像[ASP.net Web Forms User Controls](http://msdn.microsoft.com/en-us/library/y6wb1a0e%28v=VS.71%29.aspx)这样的东西。如在“主”问题列表以及问题“小部件”上重用我的“问题”代码（HTML 和 C#），如果你愿意的话

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:49:08.660

跳过在视图中编写代码并自行访问数据的诱惑。这包括使用 RenderAction 等内置函数。即使 RenderAction “返回”以执行另一个控制器，但这并不意味着视图没有自行执行操作，这可以说打破了 MVC 方法，其中视图应该什么都不做，而模型应该包含*所有*查看需求。

相反，您可以做的是为您的问题列表页面发回一个模型，其中包含一个包含问题列表的属性：

```
public class IssueListModel {
    public List<Issue> Issues { get; set; }
} 
```

将其填充到您的问题列表操作中：

```
public ActionResult IssueList(string projectName) // projectName may be null
{
    var issueListModel = new IssueListModel();

    issueListModel.Issues = SomeRepository.GetIssues(projectName); // whatever you need to send...

    return View(issueListModel);
} 
```

然后在您的列表页面上，您可以循环浏览它：

```
@foreach (var issue in Model.Issues) {
    <div>@issue.IssueName</div>
} 
```

或者您可以将问题集合发送到局部视图：

```
@Html.RenderPartial("IssueList", Model.Issues) 
```

您可以键入部分视图以期望 List 作为模型：

```
@model List<MyProject.Models.Issue> 
```

...然后在局部视图中循环遍历它，这一次对模型本身进行 foreach：

```
@foreach (var issue in Model) {
    <div>@issue.IssueName</div>
} 
```

然后您可以做的是为您的项目详细信息视图创建一个单独的模型，该模型还包含一个包含问题的属性：

```
public class ProjectDetailModel {
    public Project Project { get; set; }
    public List<Issue> Issues { get; set; }
    public string Whatever { get; set; }
} 
```

在控制器中，您可以使用您在列表控制器中填充的相同功能来填充此列表：

```
public ActionResult ProjectDetail(string projectName)
{
    var projectDetailModel = new ProjectDetailModel();

    projectDetailModel.Issues = SomeRepository.GetIssues(projectName, 10); // whatever you need to send

    return View(projectDetailModel);
} 
```

然后，您可以在 ProjectDetail 视图上重新使用相同的部分视图：

```
@Html.RenderPartial("IssueList", Model.Issues) 
```

一个很长的答案，但我希望这就是你要找的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:44:05.017

如果您只想重用表示逻辑，则可以使用部分视图。如果您还想重用控制器的逻辑，则必须使用结合局部视图的子操作。

创建控制器

```
public class IssuesController : Controller
{
    [ChildActionOnly]
    public PartialViewResult List(string projectName, int issueCount = 0)
    {
        IEnumerable<Issue> issueList = new List<Issue>();

        // Here load appropriate issues into issueList

        return PartialView(issueList);
    }
} 
```

不要忘记在文件夹 Issues 中创建名为 List 的适当局部视图。

最后在您的项目视图中使用这一行

```
@{ Html.RenderAction("List", "Issues", new { projectName = "Px", issueCount = 10 } ); } 
```

以及问题列表视图中的这一行

```
@{ Html.RenderAction("List", "Issues", new { projectName = "Px" } ); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:04:10.837

在您的控制器方法中，按名称返回视图，而不仅仅是 View()

IE...

```
public ViewResult IssueView1()
{ return View("Issue");}

public ViewResult IssueView2()
{return View("Issue");} 
```

# asp.net-mvc-3 - 创建异步任务时的 HttpContext 范围

> ID：10625791
> 
> 赞同：1
> 
> 时间：2012-05-16T19:58:44.383
> 
> 标签：asp.net-mvc-3, entity-framework-4, ninject, task-parallel-library, httpcontext

如果我在 MVC3 控制器操作中启动异步任务，然后立即返回，那么是 HttpContext 范围直到下一次垃圾收集调用，还是等到异步任务完成后再进行垃圾收集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:11:18.837

对象[在请求](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)结束时被[`Dispose`d](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx) （不是垃圾收集） 。

# javascript - AJAX 调用 jQuery 后调整 div 的大小

> ID：10625793
> 
> 赞同：1
> 
> 时间：2012-05-16T19:58:48.680
> 
> 标签：javascript, jquery, html, ajax

通过 AJAX 加载新的 HTML 内容后，我试图调整 div 的大小。我有一个 hashbang 链接系统，如果 URL 中存在某些哈希，它会加载特定的 HTML 片段。当按下链接以加载内容时，div 高度会正确调整大小，但当直接导航到页面时，加载内容的计算高度始终会减少 20px。

HTML：

```
<div id="help_page_header">
      <h3>Need some help with searches?</h3>
      <ul class="help_tabs">
        <li class="help_tab"><a class="docs_link" rel="recommendations" href="#!/recommendations">Recommendations</a></li>
        <li class="help_tab"><a class="docs_link" rel="whats_hot" href="#!/whats_hot">What's Hot</a></li>
        <li class="help_tab"><a class="docs_link" rel="history" href="#!/history">History</a></li>
        <li class="help_tab"><a class="docs_link" rel="misc" href="#!/misc">Additional Features</a></li>
      </ul>
      </div>
      <div class="help_page_content">
        <p>Select a help topic above!</p>
      </div>
 ... 
```

jQuery：

```
$(document).ready(function(){
  if(window.location.hash)
  {
    loadContent(window.location.hash)
  }

  $(".docs_link").click(function(e){
    $(".help_page_content").html("")
    var fragment = this.hash
    loadContent(fragment)
  });

  function loadContent(fragment)
  {
    fragment = fragment.slice(1).replace(/!\//g, "");
    $(".help_page_content").load("./"+fragment+".html", function(){
      var height = $("#ajax_page_wrap").outerHeight();
      $(".help_page_content").animate({height: height}, 500);
    });
  }
}); 
```

一个例子来澄清：

如果我直接导​​航到 www.homepage.com/docs/，然后单击帮助链接之一来加载内容，则高度计算得很好。但是，如果我导航到 www.homepage.com/docs/#!/history，计算出的高度总是比应有的低 20px 左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:03:41.497

当您直接导航到那里时（并且 AJAX 调用在加载之前完成），是否有 div内的图像`#ajax_page_wrap`尚未加载？

使用`$(window).load`（等待所有图像加载）而不是`$(document).ready`（不加载）怎么样。看到[这个答案。](https://stackoverflow.com/questions/544993/official-way-to-ask-jquery-wait-for-all-images-to-load-before-executing-somethin/545005#545005)

希望有帮助！让我知道这是否不是问题，我会继续集思广益:)

# django - 模板中未显示 Django ModelForm

> ID：10625795
> 
> 赞同：1
> 
> 时间：2012-05-16T19:58:59.407
> 
> 标签：django, django-templates, django-forms

我的 models.py 文件底部有一些 ModelForms。一些模型表单正在工作（即它们在模板中正确显示）。

这些是其中的两个：

```
class Account_Balance_Form(ModelForm):
    class Meta:
        model = Account_Balance
        fields = ('date','balance')

class Asset_Form(ModelForm):
    class Meta:
        model = Asset
        exclude = ('account','id') 
```

其他的虽然不行。即使使用相同的视图（传递不同的 ModelForm）到相同的模板。这些是 2 不起作用：

```
class Allocation_Form(ModelForm):
    class Meta:
        model = Allocation

class Deduction_Form(ModelForm):
    class Meta:
        model = Deduction 
```

不太确定我做错了什么......我试过运行syncdb，但这没有帮助。此外，看起来表单对象的创建效果很好：

```
allocation_form <forecast.models.Allocation_Form object at 0x90f15ac> 
```

他们只是没有被展示......有什么想法吗？

====================

仅供参考，有效的示例视图：

```
def view_allocation(request):
    form = Asset_Form()
    return render_to_response('alloc.html',
                                {'form': form}) 
```

不工作：

```
def view_allocation(request):
    form = Allocation_Form()
    return render_to_response('alloc.html',
                                {'form': form}) 
```

样本模板：

```
<html>
<body>
{{ form.as_p }}
</body>
</html> 
```

* * *

按照要求：

```
class Allocation(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=40)
    account = models.ForeignKey(Account)
    amount = models.DecimalField(max_digits=20,decimal_places=2)
    percent = models.DecimalField(max_digits=10,decimal_places=10)
    allocation_group = models.IntegerField(max_length=11)
    def __unicode__(self):
        return self.name

class Deduction(models.Model):
    iei = models.ForeignKey(Inc_Exp_Item, null=True, blank=True)
    name = models.CharField(max_length=40)
    amount = models.DecimalField(max_digits=20,decimal_places=2)
    percent = models.DecimalField(max_digits=10,decimal_places=10)
    before_tax = models.BooleanField()
    credit_debit = models.CharField(max_length=6, 
                                    choices=(('Debit','Income'),
                                             ('Credit','Expense'),))
    tax_category = models.ForeignKey(Tax_Category)
    account = models.ForeignKey(Account)
    active = models.BooleanField()
    deduct_taxes = models.BooleanField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:38:34.037

感谢大家的帮助，尤其是。啤酒。试图在 shell 中打印表单并得到类型错误。

The object was being created, but couldn't be printed (or .as_p() ).

The problem was in the Account model that Allocation and Deduction had a foreign key to:

```
class Account(models.Model):
    user = models.ForeignKey(User)
    account_type = models.ForeignKey(Account_Type)
    def __unicode__(self):
        return self.account_type 
```

I removed the unicode method and it worked. I guess unicode doesn't return another model's unicode method, haha.

# c# - 如何在asp.net中加入3个表？

> ID：10625796
> 
> 赞同：-1
> 
> 时间：2012-05-16T19:59:03.757
> 
> 标签：c#, asp.net, sql, tsql

> **可能重复：**
> [不明确的列名错误](https://stackoverflow.com/questions/318066/ambiguous-column-name-error)

我想加入 3 个表：post_job、apply_job 和employer_detail。

1.  表 1：post_job

    job_id、emp_id、job_title

2.  表 2：apply_job

    应用 ID、作业 ID、js_id、emp_id

3.  表 3：jobskker_personal

    js_id，全名

我希望它看起来像这样：

```
job_id, job_title, full_name 
```

我写了一个这样的查询：

`"SELECT job_id,job_title,post_date ,full_name " + "FROM post_job,applied_jobs,jobseeker_personal WHERE emp_id='"+emp_id+"' ";`

它显示一个错误：

```
Ambiguous column name 'emp_id'.
Ambiguous column name 'job_id'.
Ambiguous column name 'job_title'. 
```

谁能帮帮我吗？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:05:54.263

尝试在列名前面指定表名。这可能就是您的代码不知道在哪里查找的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:06:51.183

“歧义列”是指该列存在于多个表中。使用 [table name].[column name] 指定完整的列名，如下所示：

```
"SELECT post_job.job_id, post_job.job_title, post_date, full_name  " + "FROM
    post_job, applied_jobs, jobseeker_personal WHERE post_job.emp_id='" + emp_id + "' "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:09:56.047

前缀就是答案...您可以给表名加上别名，并在整个查询中引用它们，如下所示：

```
SELECT 
    pj.job_id, pj.job_title, pj.post_date, jp.full_name 
FROM 
    post_job pj, applied_jobs aj, jobseeker_personal jp 
WHERE
    emp_id='"+emp_id+"' " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:10:14.060

您需要 (a) 编写连接条件，以及 (b) 将表标识符添加到出现在多个表中的字段名称中。

在这种情况下，我猜你想说的是：

```
select p.job_id, p.job_title, s.full_name
FROM post_job p
join applied_jobs a on a.job_id=p.job_id
join jobseeker_personal s on s.js_id=a.js_id
WHERE a.emp_id=? 
```

旁注：您的问题与 ASP.NET 无关。这是一个 SQL 问题。

# javascript - JavaScript 函数声明区别

> ID：10625799
> 
> 赞同：1
> 
> 时间：2012-05-16T19:59:17.337
> 
> 标签：javascript, function, declaration

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

这个函数的声明有什么区别我知道示例一是正常的方法，为什么我们需要两个和三个？

```
function one(var1,var2) {
   alert("inside functtion one");
}

two = function (var1,var2) {
   alert("inside function two");
}

var three = function (var1,var2) {
   alert("inside function three");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:05:05.437

第一种和第三种只是声明一个全局存在于作用域链中的函数的两种方式。中间是将函数附加`two`到窗口对象并允许它存在于那里。

```
console.log(window.one); // undefined
console.log(window.two);
console.log(window.three); // undefined 
```

# unix - 怎么做 我有这个 ant talk 将 cgi-dir 复制到 cgi-dest。 <exec executable="cp" failonerror="yes"><arg value="${cgi-dir
问问题
问问题 2012-05-16T19:59:17.973
1252 次
This question shows research effort; it is useful and clear
0
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
我有这个 ant talk 将 cgi-dir 复制到 cgi-dest。
<exec executable=" cp"="" failonerror="yes"></arg></exec>我选择了这种方法而不是“复制”ant 任务，因为我想保留权限。蚂蚁任务明确不能。 问题是它复制了它看到的所有 .svn 目录，我该如何防止这种情况发生？ 嗯..你可以看这里，这里或这里。 我认为这将起作用：tar --exclude='.svn' -c -f - /path/to/sourcedir/* | (cd /path/to/destdir ; tar xfp -) PS：这些现有答案会自动显示为“相关”下右侧的建议，并且当您输入问题的主题时（看起来您是 Stack Exchange 的新手）。 尽管如此，祝你好运。 unixantcp 4 1 回答 1 This answer is useful 2 嗯..你可以看这里，这里或这里。 我认为这将起作用：tar --exclude='.svn' -c -f - /path/to/sourcedir/* | (cd /path/to/destdir ; tar xfp -) PS：这些现有答案会自动显示为“相关”下右侧的建议，并且当您输入问题的主题时（看起来您是 Stack Exchange 的新手）。 尽管如此，祝你好运。 于 2012-05-17T02:38:09.427 回答 Related 3 r - 如何为在格中使用 splom 绘制的相关系数添加 p 值？ 2 java - 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：10 2 java - 使用 Jackson 反序列化 JSON 数组 1 python - tornado.locale.Locale.translate 有什么意义？ 1 java - Android-与 AndroidManifest.xml 中的 NFC 清单标签混淆 1 elasticsearch - Elasticsearch jdbc河导入慢 4 php - 从 JSON API 获取数据到 JS 或 jquery 变量中 2 java - 请帮助我了解协议缓冲区 5 c# - *.designer.cs 文件的手动编辑 1 python - 如何从 python 运行一个调用另一个脚本的 shell 脚本？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10625800
> 
> 赞同：0
> 
> 时间：
> 
> 标签：unix, ant, cp

我有这个 ant talk 将 cgi-dir 复制到 cgi-dest。

```
 <exec executable="cp" failonerror="yes">
        <arg value="-a" />
        <arg value="${cgi-dir}" />
        <arg value="${cgi-dest}" />
    </exec> 
```

我选择了这种方法而不是“复制”ant 任务，因为我想保留权限。蚂蚁任务明确不能。

问题是它复制了它看到的所有 .svn 目录，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:38:09.427

嗯..你可以看[这里](https://stackoverflow.com/questions/3839596/how-can-i-exclude-files-from-a-reference-path-in-ant)，[这里](https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory)或[这里](https://stackoverflow.com/questions/808413/how-can-i-exclude-a-list-of-files-held-in-a-file-from-an-ant-fileset)。

我认为这将起作用：`tar --exclude='.svn' -c -f - /path/to/sourcedir/* | (cd /path/to/destdir ; tar xfp -)`

**PS：这些现有答案会自动显示为“相关”**下右侧的建议，并且当您输入问题的主题时（看起来您是 Stack Exchange 的新手）。

尽管如此，祝你好运。

# mysql - mysql中的二进制、十六进制和八进制值

> ID：10625802
> 
> 赞同：5
> 
> 时间：2012-05-16T19:59:21.153
> 
> 标签：mysql, hex, bin, octal

我对在 mysql 数据库中使用二进制、十六进制和八进制系统非常感兴趣。首先，请给我一个建议，为什么我们在存储信息期间需要它们，因为大量信息或为什么？

此外，哪种类型的值必须存储在标记的系统中？

此外这里还有像“<<”这样的位运算符

这是示例=>`SELECT 50<<2 AS example;`

这给了我们200个结果，任何人都可以解释它是如何计算的吗？

谢谢回答 ：））

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:28:26.800

> 首先，请给我一个建议，为什么我们在存储信息时需要它们

计算机以二进制形式存储数据。有时考虑存储的实际*位*对我们很有用，在这种情况下，我们熟悉的十进制系统可能有点尴尬（因为转换并不简单）；我们可以完整地写出这些位，但这通常太麻烦了，因为即使是非常小的数字也会占用大量空间来写入（例如十进制`24521`是二进制`101111111001001`）。

相反，我们倾向于使用 2 的幂的基数，因为它们比二进制更紧凑，同时具有每个“数字”代表二进制表示中精确位数的属性。例如，一个十六进制（base-16）数字表示四个位（一个“半字节”），其中的数字`0`一直到`F`（十进制`15`/二进制`1111`）；一个八进制（base-8）数字代表三位，数字`0`一直到`7`（二进制`111`）。

我们之前的十进制示例`24521`是`5FC9`十六进制或`57711`八进制：从右边开始，您可以看到每个数字分别代表上述二进制表示中的 4 位和 3 位。因此，我们人类在查看其他基础中的这些紧凑表示时，（相对）容易将二进制表示可视化。

> 此外，哪种类型的值必须存储在标记的系统中？

我不确定你的意思。如上所述，相同的值可以在所有这些系统中表示。在 MySQL 中，我们可以通过在它前面加上一个二进制字面量`0b`和一个十六进制字面量在它前面加上`0x`. MySQL 不支持八进制文字。

> 任何人都可以解释它是如何计算的吗？

[`<<`运算符](http://dev.mysql.com/doc/en/bit-functions.html#operator_left-shift)执行按位左移。也就是说，它将左侧操作数的位向左移动右侧操作数给出的位数。

对于每个位置，整数的*位*左移，这些位表示的值增加两倍。这类似于在我们的十进制系统中将*数字*左移的效果，即值增加十倍（例如，50 向左移动一位得到 500，这是增加十倍；在二进制`110`（十进制 6）中移动一位左边的地方给出`1100`（十进制12），这是一个两倍的增加）。

在您的情况下，将数字 50 的位（即`110010`）向左移动*两个*位置会产生 2 两倍的增加（即整体增加四倍）：`11001000`是十进制的 200。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:18:44.117

您的前两个问题太模糊无法回答，但第三个问题足够具体，我会回答。

正在将这些`<<2`位向左移动 2 位，如此[处](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html#operator_left-shift)所述。这相当于将 50 乘以 2^2：

```
mysql> SELECT 50<<2 AS example;
+---------+
| example |
+---------+
|     200 |
+---------+
1 row in set (0.00 sec)

mysql> 
mysql> SELECT 50 * POW(2,2) AS example;
+---------+
| example |
+---------+
|     200 |
+---------+
1 row in set (0.00 sec) 
```

# jquery - Keyup 使用 jQuery 过滤带有标题的多个列表

> ID：10625811
> 
> 赞同：0
> 
> 时间：2012-05-16T19:59:59.297
> 
> 标签：jquery, list, filter, keyup

我正在尝试使用 jQuery 在 keyup 上过滤带有标题（类别名称）的多个列表（特定类别的书籍）。我只想过滤搜索列表中的项目（特定书籍），但不过滤标题。如果列表为空，则标题（类别名称）应该消失。到目前为止，我的工作是过滤多个列表，但如果列表为空，标题不会消失。我还想从过滤器中排除 .custom-books 列表。

HTML：

```
<input type="text" id="search" />

<ul id="workflow_books">    
<li>
    <h6 class="custom"> Custom Books</h6>

    <ul>
        <li class="custom-books">
            <a>Don't see your book in our list? Add it yourself!</a>
        </li>
    </ul>
</li>

<li>
    <h6>Academic</h6>

    <ul>
        <li>
            <a>Academic Book One</a>
        </li>

        <li>
            <a>Academic Book Two</a>
        </li>
    </ul>
</li>

<li>        
    <h6>Botany</h6>

    <ul>
        <li>
            <a>Botany Book One</a>
        </li>

        <li>
            <a>Botany Book Two</a>
        </li>
    </ul>
</li>
</ul> 
```

和我的 jQuery：

```
var $products = $('#workflow_books li ul li a')

$("#search").keyup(function() {
    $products.show().filter(function() {
        return !re.test($(this).text());
    }).hide();
}) 
```

有任何想法吗？

谢谢和击掌！麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:43:57.417

```
var $products = $('#workflow_books li ul:not(:first)');
$("#search").keyup(function() {
    var val = this.value.trim();
    if(!val) $('li:hidden', '#workflow_books').show();
    else {
        $('li:hidden', $products).show();
        $('li', $products).filter(function() {
            var re = new RegExp(val, 'ig');
            return !re.test($('a', this).text());
        }).hide();
        $products.each(function() {
            if($('li:visible', this).length == 0) $(this).parent('li').hide();
            else $(this).parent('li').show();
        });
    }
}); 
```

**[工作演示](http://jsfiddle.net/thesystemrestart/zzG4f/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:40:09.487

在这里，这将过滤它们，忽略第一个列表，按字符串的开头。如果您需要更具体的内容，请告诉我。

```
var $products = $('#workflow_books ul:not(:first)');

$("#search").keyup(function() {
    var input = this.value;    

    $products.each(function() {
        var $this = $(this),
            $matches = $this.children('li').filter(function() {

                return $(this).children('a').text().toLowerCase().indexOf(input) === 0;
            });

        if($matches.length > 0) {
            $this.children().hide();
            $this.parent().show(); 
            $matches.show();            
        } else {
         $this.parent().hide();   
        }
    });
})​;​ 
```

# c# - 在 IObservable 中返回 IDisposable 的目的是什么 界面？

> ID：10625815
> 
> 赞同：15
> 
> 时间：2012-05-16T20:00:28.407
> 
> 标签：c#, design-patterns, system.reactive, observer-pattern, idisposable

我正在阅读 Head First Design Patterns 这本书，并尽我所能将代码从他们的 Java 转换为 C#。在本书讨论了观察者模式之后，它提到 Java 内置了类/接口，.NET4 也是如此。所以我开始研究如何正确使用它，除了方法之外，我已经弄清楚了大部分`Subscribe()`。

如果您在尝试订阅 IObserver 时查看[MSDN 文章，该方法会返回 IDisposable。](http://msdn.microsoft.com/en-us/library/dd782981.aspx)为什么有必要这样做？为什么不直接实现一个基于方法参数取消订阅 IObserver 的方法呢？[我研究了使用 IDisposable 接口的原因](https://stackoverflow.com/questions/454521/whats-the-purpose-of-implementing-the-idisposable-interface)。我也读了这个，但不太明白区别/它试图告诉我什么：

> 它返回对 IDisposable 接口的引用。这使观察者能够在提供者完成发送通知并调用订阅者的 OnCompleted 方法之前取消订阅（即停止接收通知）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:38:27.513

取消订阅所需的信息将根据事件发布者管理订阅的方式而有所不同。用于事件的方法——将`Remove`委托传递给之前传递给方法的`Add`方法——有点可行，但有一些重大缺陷。其中：

1.  它通常需要事件发布者执行线性搜索来定位包含与订阅相关的信息的记录。如果一个事件有可能有很多订阅者，这可能会不必要地创建 O(N^2) 行为。如果订阅者保存在某种链表中（链接对象或索引链接数组槽），并且取消订阅请求包含有关要取消的订阅的信息，则订阅和取消订阅都可以在恒定时间内处理。此外，取消订阅可以以无锁非阻塞方式安全轻松地处理（在很可能是无竞争的数组插槽上使用一个 `CompareExchange`），可以在 `Finalize` 上下文中安全地完成。
2.  如果一个委托多次订阅处理顺序很重要的事件，并且代码尝试取消第一个订阅，则最后一个订阅将被取消，而第一个订阅将保持有效。
3.  如果订阅了委托“D”，则订阅了包含“A”、“B”、“C”和“D”的多播委托“ABCD”，然后“D”被取消订阅，则代表“DABC”将保留按顺序订阅，即使代码尝试取消订阅“ABCD”。请注意，如果使用“List”而不是“delegateType.Combine”，则可以避免此问题，但其他问题仍然存在。

让事件订阅方法返回一个可用于取消订阅的对象可以避免这些问题。那么最大的问题就是应该使用什么类型的对象。想到三个选择：

1.  一个委托（可能是无参数的，返回 `void`）
2.  一些`ICancelSubscription`接口，用单一方法（可能无参数，返回`void`）取消订阅
3.  `IDisposable`，一个存在的接口，有一个单一的无参数方法，被广泛用于清理相关的目的

使用委托将是一个合理的选择。它可以很容易地封装取消订阅所需的任何信息，而用户不必担心该信息可能采用什么形式。使用委托将需要分配至少一个额外的堆对象（用于委托本身）和可能的两个（第二个是保存取消订阅信息的对象）。使用`IDisposable`与使用委托基本相同，除了调用`Dispose`而不是`Invoke`; 但是，在许多情况下，`IDisposable`在效率方面会略有优势。使用其他一些接口也是可行的，但与使用现有的`IDisposable`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T22:55:37.913

一对订阅和取消订阅方法将是非组合的。每个操作员都需要保存一个传入订阅的观察者字典，将它们映射到每个观察者实例上，然后传递给相关的可观察序列（传递给操作员）。

例如，考虑为两个源编写合并运算符。今天，这看起来很像这样（textarea 编译）：

```
static IObservable<T> Merge<T>(IObservable<T> xs, IObservable<T> ys)
{
    return Observable.Create<T>(observer =>
    {
        var n = 2;

        var mergeObserver = Observer.Create<T>(
            observer.OnNext,
            observer.OnError,
            () =>
            {
                // protected by the gate, see use of Synchronize below
                if (--n == 0)
                    observer.OnCompleted();
            }
        );

        var gate = new object();

        return new CompositeDisposable(
            xs.Synchronize(gate).Subscribe(mergeObserver),
            ys.Synchronize(gate).Subscribe(mergeObserver)
        );
    });
} 
```

如您所见，序列的组合还会导致从 Subscribe 调用返回的 IDisposable 对象的组合。请注意，在 Observable.Create 中发生了很多事情，它会在向给定观察者发送终端消息时自动处理返回的 IDisposable。在这种情况下，对observer.OnError 和observer.OnCompleted 的调用负责在CompositeDisposable 中处理这两个订阅。（但这是一个完全不同的话题，需要一段时间来讨论。）

下面的代码是假设的，假设在 IObservable 上存在订阅/取消订阅对（因此使用具有两个操作的 Create 工厂方法）：

```
static IObservable<T> Merge<T>(IObservable<T> xs, IObservable<T> ys)
{
    var map = new Dictionary<IObserver<T>, IObserver<T>>();

    return Observable.Create<T>(
        subscribe: observer =>
        {
            var gate = new object();
            var n = 2;

            var mergeObserver = Observer.Create<T>(
                x =>
                {
                    lock (gate)
                        observer.OnNext(x);
                },
                ex =>
                {
                    lock (gate)
                        observer.OnError(ex);
                },
                () =>
                {
                    lock (gate)
                        if (--n == 0)
                            observer.OnCompleted();
                }
            );

            //
            // Using .Synchronize(gate) would be a mess, because then we need to
            // keep the  two synchronized sequences around as well, such that we
            // can call Unsubscribe on those. So, we're "better off" inlining the
            // locking code in the observer.
            //
            // (Or: how composition goes down the drain!)
            //
            xs.Subscribe(mergeObserver);
            ys.Subscribe(mergeObserver);

            lock (map)
                map[observer] = mergeObserver;
        },
        unsubscribe: observer =>
        {
            var mergeObserver = default(IObserver<T>);
            lock (map)
                map.TryGetValue(observer, out mergeObserver);

            if (mergeObserver != null)
            {
                xs.Unsubscribe(mergeObserver);
                ys.Unsubscribe(mergeObserver);
            }
        }
    );
} 
```

注意这是假设的；我什至没有考虑过更多的边缘情况，也没有考虑过这个 Create 将如何工作，以便在调用 OnError 或 OnCompleted 后自行清理。此外，以 Merge 为例，我们很幸运在“取消订阅”期间没有其他资源需要关心（例如调度程序作业）。

希望这可以帮助，

-巴特（Rx 团队）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T23:11:43.557

您的主要问题似乎是微软为什么选择：

```
interface IObservable<T>
{
    IDisposable Subscribe(IObserver<T> observer);
} 
```

代替

```
interface IObservable<T>
{
    void Subscribe(IObserver<T> observer);
    void Unsubscribe(IObserver<T> observer);
} 
```

虽然我不知道设计会议或其中的推理，但我可以推测做出这个选择的一些原因。

我能想到的选择第一种格式的最佳理由是，它允许您仅跟踪从订阅返回的 IDisposable，而不是同时跟踪可观察对象和观察者。例如，假设您有这样的代码：

```
var obsSource = /* some observable source */
var subscription = obsSource.Where(x => x != null).Subscribe(Console.WriteLine);
// stuff...
subscription.Dispose(); 
```

在这种情况下，我不需要持有对订阅的 observable 的引用（从 中返回`Where`），也不需要显式创建观察者（通过`Subscribe`扩展方法）。如果选择了第二个选项，您将不得不这样做：

```
var obsSource = /* some observable source */
var filtered = obsSource.Where(x => x != null);
var observer = Observer.Create(Console.WriteLine);
filtered.Subscribe(observer);
// stuff...
filtered.Unsubscribe(observer); 
```

从表面上看，这看起来并没有太大的不同，但正如我在[另一个问题](https://stackoverflow.com/a/9741958/174594)中讨论的那样，一旦订阅，就不需要保留中间可观察对象。如果采用第二种方法，您仍然需要为链中的每个步骤创建并保留观察者，并且还必须保留对中间可观察对象的引用。

版本 1 使对偶性`IEnumerable`比方法 2 更容易看到。这可能是初始设计的一部分，但对于长期而言，它肯定不是一个不那么重要的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T00:30:17.730

调用取消订阅方法意味着您需要传入订阅的同一个实例。你必须保留一个参考。如果您有许多不同类型的可观察对象，则需要保留许多不同的引用。

取消订阅方法会使清理代码变得混乱。

但是，`IDisposable`您只需要一个结构来保存所有引用 - `List<IDisposable>`（或者您可以使用 Rx's `CompositeDisposable`）。

现在您的清理代码可以非常整洁。

我更进一步，`IDisposable`为所有清理代码创建了实例——不仅仅是来自 Rx 订阅。它使生活变得非常轻松。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T13:20:07.970

除了给出的其他原因之外，`IDisposable`还允许您使用`using`块。

```
using (var subscription = source.Subscribe(observer))
{
    // ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T20:38:54.307

当观察者本身被 Disposed 时，它可以很容易地确保终止对观察者的订阅。考虑订阅通常由实现 IObservable 的类调用：

```
class MyObserver<Foo> : IObserver<Foo>, IDisposable {

    private IDisposable _subscription;

    public MyObserver(IObservable<T> eventSource) {
        _subscription = eventSource.Subscribe(this);
    }

    // implementation of IObservable members here

    public void Dispose() {
        _subscription.Dispose();
    }
} 
```

现在，当我的 MyObserver 实例被释放时，订阅将随之自动释放：

```
public partial class MyGUIThing : Form {
    private MyObservable<Foo> _observer = new MyObservable<Foo>(someEventSource);
    // whatever else
} 
```

创建此表单的实例时，将启动订阅。当表单关闭并`_observer`完成时，订阅也将自动处理。

# javascript - JS querySelector：如何在不需要 HTML 标签的情况下获取 HTML 标签数据并将其硬编码到 javascript 中

> ID：10625817
> 
> 赞同：-1
> 
> 时间：2012-05-16T20:00:31.947
> 
> 标签：javascript, css-selectors, selectors-api

我试图弄清楚它试图从下面的代码中得到什么：

```
var svg   = document.querySelector('svg'),
path  = document.querySelector('path');
var code = document.querySelector('#code'); 
```

上面引用的代码是：

```
<textarea id="code">var curve = new CurveAnimator(
 [206,47], [182,280],
 [90,234], [273,101]
);

var o = document.getElementById('img');
o.style.position = 'absolute';

curve.animate(2, function(point,angle){
  o.style.left = point.x+"px";
  o.style.top  = point.y+"px";
  o.style.transform =
    o.style.webkitTransform =
    o.style.MozTransform =
    "rotate("+angle+"deg)";
});
</textarea>

<section>
<svg viewBox="0 0 450 370" width="400px" height="370px" xmlns="http://www.w3.org/2000/svg" class="content">
    <path d="M50,300 C50,100 350,100 350,300 " />
</svg>
</section> 
```

目标是获取这些 HTML 代码并将其放置在 javascript 本身中，这样它就不会在 HTML 代码的标签中查找它。但是，我无法找出它从那些**querySelector**中得到了什么，以便我自己去做。

任何帮助都会很棒！

当我做**alert(document.getElementById('code'));** 我明白了：

![在此处输入图像描述](../Images/436bf5394ce27f262b15295797c3b089.png)

代码串：

```
var code = "var curve = new CurveAnimator([206,47], [182,280],[90,234], [273,101]);var o = document.getElementById('img');
o.style.position = 'absolute';curve.animate(2, function(point,angle){o.style.left = point.x+""px"";o.style.top  = point.y+""px"";o.style.transform = o.style.webkitTransform =o.style.MozTransform =""rotate("" + angle + ""deg)"";});" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:06:10.870

```
document.querySelector('svg')  === document.getElementsByTagName('svg').item(0)
document.querySelector('path') === document.getElementsByTagName('path').item(0)
document.querySelector('#code') === document.getElementById('code') 
```

`querySelector`返回第一个匹配的元素，或者`null`如果它没有找到任何元素。

**document.querySelector**

> 返回文档中与指定选择器组匹配的第一个元素（使用文档节点的深度优先前序遍历）。

您应该学习有关 CSS 选择器的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:24:08.617

你得到了正确的东西，如果你想要#code的内容，那么你需要做

```
alert(document.getElementById('code').innerHTML) 
```

你现在所做的就是找到名为的节点`code`

将该代码放到您需要执行此操作的页面上，

```
var node = document.createElement("script");
node.innerHTML = document.getElementById('code').innerHTML;
document.getElementsByTagName("head").appendChild(node); 
```

这将从您的文本区域中提取代码，在标题中创建一个脚本标签，并从您的 div 中添加内容..然后页面将准备好使用的代码，您所要做的就是调用它。

或者，您可以将此内容放在外部 js 文件中，并在文档加载时以类似的方式将其添加到页面中......

```
var node = document.createElement("script");
node.setAttribute("href","js/curveanimate.js") 
document.getElementsByTagName("head").appendChild(node) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:54:11.047

您只需在末尾添加“.value”即可查看该属性

```
alert(document.getElementById('code').value) 
```

[这是您的代码的示例。](http://jsfiddle.net/EZp9p/)

编辑：

[这是否更符合您正在寻找的内容？](http://jsfiddle.net/EZp9p/1/)

# android - 在Android中使用Select子句进行左外连接

> ID：10625822
> 
> 赞同：4
> 
> 时间：2012-05-16T20:00:36.387
> 
> 标签：android, sqlite

我正在尝试在我的 SQLite 数据库上运行此查询：

```
SELECT * FROM tag LEFT OUTER JOIN (SELECT tag, annotation FROM annotation_tag_map WHERE annotation = ?) AS map ON tag._id = map.tag; 
```

这 ？是注释的 ID。

当我在 android 中运行此查询时，我得到一个空光标。

但是，当我在同一个数据库的命令行中使用 sqlite3 运行它时，我得到了我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:05:12.507

在运行时检查您的查询并输入获取 Rsults 的命令行？

如果是的话,,

```
Cursor cursor = database.rawQuery(Your Query as a String,null); 
```

# apache-flex - Flex FileReference.browse() 打开一个保存对话框 - 不是一个打开的对话框

> ID：10625824
> 
> 赞同：3
> 
> 时间：2012-05-16T20:00:39.293
> 
> 标签：apache-flex, filereference

IE 将打开一个打开的对话框，但带有 Flash 插件 11.2.202.235 的 FireFox 12 会打开一个保存对话框。

这发生在另外 2 位同事身上，但不会发生在其他任何人身上——有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:38:13.700

降级到 10.1 解决了这个问题。去这里获取它： [http ://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html)

# c++ - 在 VS C++ 6.0 中，哪些调试工具可以很好地找到内存泄漏的位置？

> ID：10625832
> 
> 赞同：2
> 
> 时间：2012-05-16T20:00:57.187
> 
> 标签：c++, visual-studio, visual-c++, memory-leaks

我的程序最终会消耗所有内存并崩溃...查看代码，我找不到任何可以做到这一点的突出内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:10:10.137

您可以修改代码以使用和的调试版本`malloc`吗`free`？如果是，请检查[_malloc_dbg](http://msdn.microsoft.com/en-us/library/faz3a37z.aspx)和[_free_dbg](http://msdn.microsoft.com/en-us/library/16swbsbc)。

（您可以根据这些函数编写自己的`new`和运算符。）`delete`

我记得 VS 6.0 没有`_realloc_dbg`.

```
#ifdef _DEBUG
#define _CRTDBG_MAP_ALLOC 1
#include <Crtdbg.h>
#define malloc(size) _malloc_dbg(size,_CLIENT_BLOCK,__FILE__,__LINE__)
#define free(addr) _free_dbg(addr,_CLIENT_BLOCK)
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:20:58.493

您可以尝试 BoundsChecker（现为 DevPartner）： http: [//www.microfocus.com/products/micro-focus-developer/devpartner/index.aspx](http://www.microfocus.com/products/micro-focus-developer/devpartner/index.aspx)

您将能够在代码中看到内存泄漏、接口泄漏和其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:54:53.453

根据泄漏的类型，您可以使用 umdh 或 debugdiag 作为简单工具，否则我会推荐使用 windbg。所有这些都是免费的，并且是 Windows 调试工具的一部分，您可以谷歌搜索所有这些工具的教程。在 windbg 中自动查找泄漏的命令是 !heap -l。

# c# - AdventureWorks 从数据库中删除失败的测试

> ID：10625838
> 
> 赞同：2
> 
> 时间：2012-05-16T20:01:46.963
> 
> 标签：c#, unit-testing, adventureworks, argumentnullexception

我有来自 AdventureWorks 数据库的下表，您可以在此处查看我的模型：

![模型](../Images/fb6a1c8db4f00157fa586b83e577c2f6.png),

这是我的存储库服务

```
public class EmployeeRepository : IEmployeeRepository
{
    private AdventureWorksEntities dataBaseContext = new AdventureWorksEntities();

    public IQueryable <Employee> Employees
    {
        get
        {
            return dataBaseContext.Employees;
        }
    }

    public bool SaveEmployee(Employee employee)
    {
        try{
            dataBaseContext.Employees.AddObject(employee);
            dataBaseContext.SaveChanges();
            return true;
        }
        catch
        {
            return false;            
        }
    }

    public bool DeleteEmployee(int employeeId)
    {
        try
        {
            var employeeToDelete = from e in dataBaseContext.Employees
                                   where e.EmployeeID == employeeId
                                   select e as Employee;
            dataBaseContext.Employees.DeleteObject((Employee)employeeToDelete.FirstOrDefault());
            dataBaseContext.SaveChanges();
            return true;
        }
        catch
        {
            return false;
        }
    }
} 
```

这是我的测试课，我正在使用 nunit 进行测试。

```
[TestFixture]
class EmployeeRepositoryTest : BaseTestClass
{
    private Employee employee;
    [Test]
    public void Chech_if_repository_returns_non_null_number_of_Employees()
    {
        var obtainedEmployees = employeeRepository.Employees;
        Assert.Greater(obtainedEmployees.Count(),0);

    }

    [Test]
    public void Check_If_One_Can_Add_Employee()
    {
        employee = new Employee {EmployeeID = 3200, Title = "Mr"};
        success = employeeRepository.SaveEmployee(employee);
        if (success)
        {
            var obtainedEmployee = from e in employeeRepository.Employees
                                   where e.EmployeeID == employee.EmployeeID
                                   select e;
            Assert.AreEqual(obtainedEmployee.FirstOrDefault().EmployeeID,employee.EmployeeID);
            Assert.AreEqual(obtainedEmployee.FirstOrDefault().Title,employee.Title);

        }
    }

    [Test] //Problem is in delete section
    public void Check_If_One_Can_Delete_Employee()
    {
        employee = new Employee { EmployeeID = 3201, Title = "Ms" };
        employeeRepository.SaveEmployee(employee);

        success = employeeRepository.DeleteEmployee(employee.EmployeeID);
        Assert.IsTrue(success); //this is false
    }

    [Test]
    public void Check_If_One_Can_Save_Employee()
    {
        employee = new Employee { EmployeeID = 3202, Title = "Mr" };
        success = employeeRepository.SaveEmployee(employee);
        if (success)
        {
            employee.Title = "Mr";
            Assert.IsTrue(employeeRepository.SaveEmployee(employee));

            var obtainedEmployee = from e in employeeRepository.Employees
                                   where e.EmployeeID == employee.EmployeeID
                                   select e;
            Assert.AreEqual(obtainedEmployee.FirstOrDefault().EmployeeID, employee.EmployeeID);
            Assert.AreEqual(obtainedEmployee.FirstOrDefault().Title, employee.Title);

        }
    }

    [TearDown]
    public void Cleanup()
    {
        success = false;
        employeeRepository.DeleteEmployee(3200);
        employeeRepository.DeleteEmployee(32001);
        employeeRepository.DeleteEmployee(3202);

    }

} 
```

我有一个`System.ArgumentException`方法`DeleteEmployee`。employeeToDelete 变量为空。

这是来自异常的信息。

```
System.ArgumentNullException: Value cannot be null.
Parameter name: entity
   at System.Data.EntityUtil.ThrowArgumentNullException(String parameterName)
   at System.Data.EntityUtil.CheckArgumentNull[T](T value, String parameterName)
   at System.Data.Objects.ObjectContext.DeleteObject(Object entity, EntitySet expectedEntitySet)
   at System.Data.Objects.ObjectSet`1.DeleteObject(TEntity entity)
   at AdventureWorks.Domain.RepositoryServices.EmployeeRepository.DeleteEmployee(Int32 employeeId) in D:\dokumenty\Visual Studio 2010\Projects\Kainos\MVC3-Adventure-Works\AdventureWorks\AdventureWorks.Domain\RepositoryServices\EmployeeRepository.cs:line 45 
```

# sparql - 语义网 - jena sparql

> ID：10625841
> 
> 赞同：2
> 
> 时间：2012-05-16T20:02:00.670
> 
> 标签：sparql, jena

在 sparql jena 中执行查询后，我尝试将查询结果作为列表获取，所以我使用了这个：

```
res = ResultSetFormatter.toList(results); 
```

但是当我在该方法之前编写此方法时，变量`res`返回null。

```
ResultSetFormatter.out(System.out, results);
res = ResultSetFormatter.toList(results); 
```

我不知道是什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:01:23.223

主要`ResultSet`实现是`com.hp.hpl.jena.sparql.engine.ResultSetStream`只能使用一次，而您尝试使用它两次。API[文档](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/sparql/engine/ResultSetStream.html)`ResultSetStream`说：

> 从查询返回结果的主要 ResultSet 实现。这个版本是“使用一次”——你不能重置结果集，因为查询的结果不会被记住，以免消耗潜在的大量内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:14:55.937

猜测一下，我会说`ResultSetFormatter.out(ResultSet)`消耗`ResultSet`. 所以这个方法完成后，`ResultSet`是空的。

它有点类似于 an 的`Iterator`工作方式：一旦迭代了所有元素，迭代器就为空。

# node.js - Socket.IO 没有触发连接事件

> ID：10625843
> 
> 赞同：0
> 
> 时间：2012-05-16T20:02:14.957
> 
> 标签：node.js, socket.io

我正在尝试设置 Socket.IO 服务器，而现在，连接似乎不像在 Wiki 中那样工作。我正在使用 namespace 连接到服务器`/client`，并且我成功地在调试日志中看到了连接，但是连接消息永远不会显示（并且其他内容永远不会附加）。

## 服务器端

```
var clients = io
    .of('/client')
    .on('connect', function (socket) {
        // This is never getting run
        console.log('Client connected');
    }); 
```

## 客户端

```
var socket = io.connect('http://localhost:8082/client'); 
```

为什么在上面的代码中，我的控制台中没有收到“客户端已连接”消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:59:39.300

所以，事实证明这是一个非常简单的问题，正如我所怀疑的那样。客户端使用`connect`事件，但[服务器使用`connection`](https://github.com/LearnBoost/socket.io/wiki/Exposed-events).

代码应如下所示：

```
var clients = io
    .of('/client')
    .on('connection', function (socket) {
        // This is never getting run
        console.log('Client connected');
    }); 
```

# javascript - Node.js hubot 在服务器上执行命令

> ID：10625846
> 
> 赞同：3
> 
> 时间：2012-05-16T20:02:20.543
> 
> 标签：javascript, linux, node.js, coffeescript, hubot

我正在尝试使用hubot在服务器上执行命令。这个例子对我有用：

```
 robot.respond /(cmd)/i, (msg) ->
    doing = spawn 'ls', ['-la']
    doing.stdout.on 'data', (data) ->
      msg.send data.toString() 
```

但是，在执行要执行的命令之前，我需要更改文件夹。我希望hubot运行的是：

```
cd /var/folder && some-command 
```

但是从hubot脚本更改文件夹不起作用。

执行的命令根据它所在的文件夹加载了很多文件，所以看来我必须去这个文件夹。

如何让hubot从特定路径执行命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:18:17.603

```
process.chdir('/var/folder') 
```

是我一直在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:15:29.890

不熟悉hubot，但是您是否尝试过shell命令链，例如 **'cd /var/folder; 一些命令'**？

# c - 在 C 中将数组分配给另一个数组时出错

> ID：10625852
> 
> 赞同：4
> 
> 时间：2012-05-16T20:02:45.880
> 
> 标签：c, pointers

考虑这个代码段：

```
char message[255];
char newMessage[255];
int i;
for (i = 0 ; i < 255 ; i++)
     message[i] = i;
newMessage = message; 
```

当我尝试这样做时，我在最后一行得到一个错误：

```
incompatible types when assigning to type ‘char[255]’ from type ‘char * 
```

如果数组具有相同的类型，为什么我会得到它？我如何解决它？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:04:17.540

无法分配数组。您可以使用`memcpy()`将一个数组的内容复制到另一个数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T20:03:58.193

解决此问题的一种方法是声明`newMessage`为指针：`char* newMessage`.

另一种方法是使用`memcpy()`-- 或者`strncpy()`if`message`是一个字符串 -- 来复制`message`into的内容`newMessage`。

哪种方法更可取取决于您使用`newMessage`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T20:06:17.490

尽管数组被声明为相同类型，但一旦您尝试使用一个，它就会变成指向其第一个元素的指针，因此您不能使用它来分配给另一个数组。

您可以使用显式复制数组，`memcpy`或者在数组是结构的一部分的情况下，它将被复制为结构的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T20:06:36.323

您需要遍历其中的每个元素`message`并将值分配给`newMessage`. （或`memcpy()`按照其他人的建议使用。）

该错误仅在您尝试执行的操作的上下文中是偶然的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T15:50:44.320

您不能按照上述方式将数组的内容从一个数组复制到另一个数组。

`int arr[2]` 这是一个由 2 个整数组成的数组，`arr[0]`第一个整数`arr[1]`是第二个整数。但。`arr`是数组第零个元素的地址（不可变）。

因此，当您这样做时，您并`newMessage = message;`没有复制数组中的元素，而是复制`message`. 这是非法的，因为数组是指向内存的常量指针。你不能改变它。

因为它是一个字符数组。用于复制使用`strcpy`或`strncpy`查看手册页以获取两者的描述：)

# php - 由于重定向而从 $_REQUEST 获取查询的问题

> ID：10625857
> 
> 赞同：0
> 
> 时间：2012-05-16T20:03:10.013
> 
> 标签：php, codeigniter, linkedin

下面的代码处理通过 PHP CodeIgniter 连接到 LInkedIn API 并运行了很长时间，直到我添加了更改 URL 和添加重定向的国际化。

我修复了 URL，因此除了 /en/ 语言段之外它们没有变化。

在 LinkedIn 上授权后，我仍然收到未定义的索引错误，但我在浏览器的链接中看到了变量。

我不明白为什么 $_REQUEST 在 URL 中时看不到 oauth_token 或 oauth_verifier ？

第一个错误：未定义的索引：oauth_verifier

关联：

[http://www.youinapage.com/en/linklogin/get_resume_linkedin?oauth_token=e68974fc-5ba9-41d8-bc2f-9b33a5e59961&oauth_verifier=07539](http://www.youinapage.com/en/linklogin/get_resume_linkedin?oauth_token=e68974fc-5ba9-41d8-bc2f-9b33a5e59961&oauth_verifier=07539)

代码示例：

```
 session_start();
    $this->load->library('format');

    $config['linkedin_access'] = "---";
    $config['linkedin_secret'] = "---";
    $config['base_url']  = site_url('linklogin/initiate/');
    $config['callback_url']  = site_url('linklogin/get_resume_linkedin/');

        # First step is to initialize with your consumer key and secret. We'll use an out-of-band oauth_callback
$linkedin = new LinkedIn($config['linkedin_access'], $config['linkedin_secret'], $config['callback_url'] );
//$linkedin->debug = true;

   if (isset($_REQUEST['oauth_verifier'])){
        $_SESSION['oauth_verifier']     = $_REQUEST['oauth_verifier'];

        $linkedin->request_token    =   unserialize($_SESSION['requestToken']);
        $linkedin->oauth_verifier   =   $_SESSION['oauth_verifier'];
        $linkedin->getAccessToken($_REQUEST['oauth_verifier']);

        $_SESSION['oauth_access_token'] = serialize($linkedin->access_token);
        header("Location: " . $config['callback_url']);
        exit;
   }
   else{

        $linkedin->request_token    =   unserialize($_SESSION['requestToken']); 
        $linkedin->oauth_verifier   =   $_SESSION['oauth_verifier'];  //GENERATE INITIAL ERROR
        $linkedin->access_token     =   unserialize($_SESSION['oauth_access_token']);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:14:08.890

我认为问题不是来自 $_REQUEST，而是来自 $_SESSION。

如果您仔细查看错误输出，它会显示第一个错误已打开

```
$_SESSION['requestToken'] 
```

然后确实，引擎也失败了

```
$_SESSION['oauth_verifier'] 
```

虽然出于未知的原因，但这意味着一个肯定不同的问题，（我认为）

Rgds。

# c# - ASP.NET 中的自定义角色/权限

> ID：10625861
> 
> 赞同：0
> 
> 时间：2012-05-16T20:03:38.760
> 
> 标签：c#, asp.net, session, permissions, windows-authentication

我目前有一个 Web 应用程序，它使用它自己的“权限”表，其中包含以下列：

*   用户名 - Windows 用户名 (Context.User.Identity.Name)
*   DivisionID - 到分区表的链接
*   RoleID - 来自自定义角色表
*   RegionID - 最近添加的字段将我的应用程序划分为国家（加拿大、美国、国际）

当用户登录站点时，他们选择他们想要进入的区域，我需要根据他们是否为该特定 RegionID 设置任何权限来授予他们访问这些区域的权限。选择区域后，RegionID 将存储在 Session 中，并将用于此权限检查并定义如何在页面上填充数据（我还没有在所有页面中实现 Session 变量，以便可以更改如果需要）

我最初的想法是在将它们发送到三个目的地之一的每个页面上运行我的权限检查：

*   无效的权限页面 (false)
*   区域选择页面 - 会话中未选择区域 (RegionID = 0)
*   他们请求的页面 - 如果为该区域设置了权限

我还研究过在 Global.asax 中使用 Application_AuthenticateRequest 方法，但我不能在该区域内使用 Session 并且它似乎比应有的更多地击中 Application_AuthenticateRequest。

使用我当前的应用程序，根据他们的权限，使用相应区域对每个用户进行身份验证的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:12:07.207

通常我不会推荐这种方法，但由于您似乎已经开发了您的应用程序，您可以相对轻松地实现以下内容而不会发生太大的变化：

为您的页面创建一个基类，然后从该基类继承您应用程序中的所有页面。您当然会在基类中实现“授权”。

一个相当讨厌的问题是，如果你忘记从基类派生你的页面，那么你的页面就没有安全性......但是你很容易忘记实现你的“权限检查”...... ..

就像是

```
public class AuthorizedPage: System.Web.UI.Page
{
    protected override void OnLoad(EventArgs e)
    {
       // ... authorization logic here...

       // Be sure to call the base class's OnLoad method!
       base.OnLoad(e);
    }
} 
```

你可以看看这个[ASP.net“BasePage”类的想法](https://stackoverflow.com/questions/2064943/asp-net-basepage-class-ideas)和这个[http://www.4guysfromrolla.com/articles/041305-1.aspx](http://www.4guysfromrolla.com/articles/041305-1.aspx)

或者，另一个想法，如果您使用过母版页，您也可以在母版页中执行这些操作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:28.830

我真的只使用过表单身份验证——但我假设您将使用 Windows 身份验证来进行成员身份验证和某种形式的自定义角色身份验证。我从来没有做过，但有人会认为它应该工作。

[http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.getrolesforuser](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.getrolesforuser)

您可以创建一个自定义提供程序，该提供程序将考虑 Region 的 Session 值，以便返回正确的角色。我知道对于 Web 应用程序，默认提供程序将角色存储为客户端上的加密 cookie。我想你可以做类似的事情。

# python - PyArg_ParseTupleAndKeywords 是如何工作的？

> ID：10625865
> 
> 赞同：19
> 
> 时间：2012-05-16T20:03:57.470
> 
> 标签：python, python-c-api, python-c-extension

我一直在尝试学习如何为 Python 编写 C 扩展，并希望确保我了解 PyArg_ParseTupleAndKeywords 的工作原理。

我相信第一个参数是一个 PyObject 指针，它指向按传递顺序传递给 C 扩展函数的参数数组。第二个参数是传递的关键字列表，它们传递的位置，很可能是某种指示标志，告诉关键字从哪个位置开始，位置变得无关紧要。

然后 PyArg_ParseTupleAndKeywords 使用其关键字列表（第 4 个参数）在用关键字指定的参数与格式字符串（第 3 个参数）和 C 变量的地址（第 5 个和 + 参数）之间进行映射，适当的值应复制到该地址。

我的理解正确吗？当我阅读在线文档时，我看到的只是对“位置参数和关键字参数”的引用，这让我感觉有点摸不着头脑。处理 PyArg_ParseTupleAndKeywords 的 Python 解释器的文件在哪里？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-02-12T21:19:07.787

在 python 中模拟以下内容：

```
def keywords(a, b, foo=None, bar=None, baz=None):
    pass 
```

以下将起作用：

```
static PyObject *keywords(PyObject *self, PyObject *args, PyObject *kwargs)
{
    char *a;
    char *b;
    char *foo = NULL;
    char *bar = NULL;
    char *baz = NULL;

    // Note how "a" and "b" are included in this
    // even though they aren't supposed to be in kwargs like in python
    static char *kwlist[] = {"a", "b", "foo", "bar", "baz", NULL};

    if (!PyArg_ParseTupleAndKeywords(args, kwargs, "ss|sss", kwlist, 
                                     &a, &b, &foo, &bar, &baz)) 
    {
        return NULL;
    }

    printf("a is %s\n", a);
    printf("b is %s\n", b);
    printf("foo is %s\n", foo);
    printf("bar is %s\n", bar);
    printf("baz is %s\n", baz);

    Py_RETURN_NONE;
}

// ...

static PyMethodDef SpamMethods[] = 
{
    // ...
    {"keywords", (PyCFunction) keywords, METH_VARARGS | METH_KEYWORDS, "practice kwargs"},
    {NULL, NULL, 0, NULL}
    // ...
} 
```

并使用它：

```
from spam import keywords

keywords()         # Fails, require a and b
keywords('a')      # fails, requires b
keywords('a', 'b')
keywords('a', 'b', foo='foo', bar='bar', baz='baz') 
keywords('a', 'b','foo', 'bar', 'baz')
keywords(a='a', b='b', foo='foo', bar='bar', baz='baz') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T20:12:01.403

您是否阅读了[http://docs.python.org/c-api/arg.html](http://docs.python.org/c-api/arg.html)上的开场解释？它很好地解释了正在发生的事情。不要直接参考`PyArg_ParseTupleAndKeywords`; 它假设您阅读了上面的文字，并且它本身并不是很有帮助。

不过，你几乎得到了它。第一个参数确实是传入位置参数的列表。第二个是传入关键字参数的映射（将给定关键字名称映射到给定值）。第四个参数实际上是您的函数准备接受的关键字列表。是的，第 3 个参数是格式字符串，第 5 个和以后的参数是 C 指针，值被复制到其中。

您会`PyArg_ParseTupleAndKeywords()`在`Python/getargs.c`.

# php - 我需要允许我网站的用户上传图片 - 我可以在不将文件夹权限设置为 777 的情况下这样做吗

> ID：10625866
> 
> 赞同：1
> 
> 时间：2012-05-16T20:03:58.093
> 
> 标签：php, linux, upload, permissions

所以，基本上问题就在标题和更详细的场景中：

我有一个用 PHP 编写的站点后端（在 linux 服务器 - centos 6 上），实际上我只有 2 个可以访问它的用户。他们需要能够通过某种形式上传图像。所以，我制作了简单的上传脚本，但无论如何（或者我不知道：/），上传只适用于设置为 777 的文件夹权限，所以我的问题是这样可以，还是我应该实现一些更好的'在这种情况下的常见做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:06:23.720

您不需要 777 的目录权限。您需要确定该目录可由 Web 服务器用户写入，这意味着使其归 Web 服务器用户所有或由其组设置为的另一个用户所有Web 服务器用户和组可写权限。

因此，例如，如果您的 Web 服务器用户是`www-data`（其他常见的可能性包括`apache, httpd, www`）：

```
# Set ownership to the web server user
chown www-data uploads_dir
# and make it writable by the web server user
# could also be 755 (readable by others)
chmod 700 uploads_dir 
```

或者，如果它必须由您的帐户用户拥有（例如在共享主机上），请将组设置为 Web 服务器用户：

```
chown youruser:www-data uploads_dir
# and make it group-writable:
chmod 775 uploads_dir 
```

底线是，将 777（全局可写）权限分配给目录通常*不是一个好主意。*此外，`uploads_dir`理想情况下，应该将其放置在 Web 服务器的文档根目录之外，因此它不可用 vit HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:03:56.977

一个解决方案是使用 FastCgi。

这使得新文件和目录归同一个用户和组所有。

FastCgi 有性能损失，但您会获得一些额外的安全性，因为它限制了 php。如果您要托管具有多个用户的多个网站，这可能是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:08:50.127

您还可以使用 suphp 之类的东西以用户身份运行 php 脚本，同时保留使文件夹不能被任何其他用户或组写入的能力。

不过，您需要对您的网络服务器进行管理访问。

# java - OpenGL ES 对象显示异常/扭曲 - Android

> ID：10625868
> 
> 赞同：0
> 
> 时间：2012-05-16T20:03:59.993
> 
> 标签：java, android, opengl-es, render

编辑好-我抓起一个设备，然后..猜猜是什么...它显示正确？有谁知道为什么这只会在模拟器上发生？谢谢你。

我正在尝试在 Android 上使用 glDrawElements 绘制对象。我正在使用下面的代码来读取我的顶点和索引数据，然后在我的渲染方法中绘制对象。我在模拟器而不是真实设备上测试这个。

这是我的场景对象代码：

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;
import java.nio.ShortBuffer;

import javax.microedition.khronos.opengles.GL10;

public class SceneObject {
public FloatBuffer mVertexBuffer;
public FloatBuffer mTextureBuffer;
public ShortBuffer indexBuffer;
public FloatBuffer mMatriceBuffer;
public FloatBuffer mPivotBuffer;

public short[] indicesTest = {0,1,2,3,4,5,3,5,6,7,5,8,7,8,9,10,7,9,11,10,9,12,1,0,13,12,14,15,13,14,14,10,11,15,14,11,0,14,12,16,17,18,19,16,18,18,20,19,21,16,19,22,21,19,22,19,23,4,24,25,25,26,27,25,27,28,4,25,28,5,4,28,5,28,8,29,30,31,29,31,19,29,19,20,32,33,31,32,31,30,32,34,33,35,22,23,36,35,23,37,36,23,37,23,38,39,37,38,40,39,38,41,40,38,41,38,1,42,41,1,12,43,1,42,1,43,17,27,26,26,18,17,44,45,46,46,47,44,48,49,50,51,52,53,53,54,51,55,51,54,54,56,55,57,48,50,50,58,57,52,59,60,60,53,52,59,44,47,47,60,59,61,62,63,63,64,61,65,66,67,67,68,65,69,70,71,71,72,69,66,69,72,72,67,66,73,65,68,68,74,73,70,75,76,76,71,70,75,61,64,64,76,75,77,78,79,79,80,77,81,82,62,62,61,81,83,81,61,61,75,83,84,63,62,62,82,84,63,84,85,86,87,88,89,90,91,92,93,87,87,86,92,94,95,96,96,97,94,98,99,100,100,101,98,102,103,104,104,105,102,106,107,108,108,109,106,110,111,112,78,77,113,114,115,78,112,111,116,117,118,115,119,116,120,121,122,123,123,124,121,125,126,127,127,128,125,129,130,131,132,133,5,5,133,6,5,134,135,135,134,136,134,137,136,137,138,136,129,139,130,139,140,141,140,142,141,137,141,138,141,142,138,141,130,139,143,144,145,144,146,145,147,145,146,144,148,146,148,149,146,146,149,150,151,132,152,153,152,154,154,152,155,152,132,155,132,5,155,155,5,135,156,157,158,158,157,146,146,157,147,159,160,158,158,160,156,34,160,159,149,161,150,161,162,150,162,163,150,150,163,164,163,165,164,165,166,164,166,167,164,164,167,129,167,168,129,169,139,129,129,168,169,154,143,153,145,153,143,170,171,172,173,172,171,174,175,176,177,178,179,180,179,178,178,181,180,182,180,181,175,183,176,184,176,183,185,177,186,179,186,177,171,185,173,186,173,185,187,188,189,190,189,188,191,192,193,194,193,192,195,196,197,198,197,196,196,191,198,193,198,191,192,199,194,200,194,199,201,195,202,197,202,195,188,201,190,202,190,201,203,204,205,206,205,204,207,208,187,188,187,208,208,209,188,201,188,209,189,210,187,207,187,210,210,189,211,212,213,214,215,216,217,218,219,220,221,220,219,222,223,224,225,226,227,228,229,230,231,230,229,232,233,234,235,236,237,238,239,240,241,242,243,123,244,124,245,246,203,204,203,246,247,248,203,249,250,251,252,253,247,248,247,253,159,33,34,254,255,256,256,257,254,255,244,123,123,256,255,244,258,121,121,124,244,259,260,125,125,128,259};

public float[] verticeTest = {20360.8f,20679.5f,611.547f,24248.7f,13527f,1074.93f,24207.4f,23005.5f,1503.19f,9819.59f,14845.7f,8.81875f,11126.3f,13982.2f,32.0718f,8379.01f,17678.5f,0.00115749f,8379.01f,15141.6f,0.00111471f,12137.8f,17973.8f,60.0461f,14591.9f,14509.2f,164.113f,15621.5f,15846.6f,223.075f,15136.7f,18549.5f,194.186f,16918.2f,16705.3f,310.215f,21081.8f,15846.6f,687.576f,19789f,16705.3f,554.435f,18467.9f,19868.7f,433.258f,18354.3f,17001.2f,423.539f,14591.9f,7402.34f,164.113f,13930.5f,9087.62f,131.015f,13039.7f,9096.18f,92.3283f,19110.4f,-8011.43f,490.311f,12811.7f,7228.03f,83.5128f,15621.5f,6064.9f,223.074f,16918.2f,5206.21f,310.215f,21807.5f,-426.492f,768.658f,11221.5f,13854f,34.3347f,12150f,12649.6f,60.4329f,12811.7f,10964.3f,83.513f,13702.6f,10955.8f,120.472f,13930.5f,12823.9f,131.015f,12150f,5542.76f,60.4327f,11119f,4205.31f,31.902f,15341.7f,-15792.9f,206.155f,9819.59f,3346.62f,8.81857f,10735.6f,-21752.5f,23.5976f,8379.01f,3050.73f,0.000981022f,18354.3f,4910.32f,423.538f,19789f,5206.21f,554.434f,21081.8f,6064.9f,687.576f,23336.1f,6399.27f,954.364f,22106.6f,7402.34f,803.393f,22764f,9087.62f,882.485f,22990.5f,10955.8f,910.595f,22764f,12823.9f,882.485f,22106.6f,14509.2f,803.393f,24248.7f,8492.36f,-3249.03f,24207.4f,17415.3f,-3297.97f,24207.4f,23005.5f,1503.19f,24248.7f,13527f,1074.93f,12728.3f,-24463.4f,-4243.56f,15341.7f,-20827.5f,-4117.81f,15341.7f,-15792.9f,206.155f,19110.4f,-13046f,-3833.65f,21807.5f,-5461.09f,-3555.3f,21807.5f,-426.492f,768.658f,19110.4f,-8011.43f,490.311f,15341.7f,-20827.5f,-4117.81f,15341.7f,-15792.9f,206.155f,10735.6f,-26787.1f,-4300.36f,10735.6f,-21752.5f,23.5976f,23336.1f,1364.68f,-3369.59f,23336.1f,6399.27f,954.364f,24883.8f,8123.11f,-2819.08f,24859.5f,16025.8f,-2803.12f,24207.4f,17415.3f,-3297.97f,24248.7f,8492.36f,-3249.03f,13363.4f,-24832.7f,-3813.62f,15976.8f,-21196.8f,-3687.86f,15341.7f,-20827.5f,-4117.81f,12728.3f,-24463.4f,-4243.56f,19745.5f,-13415.3f,-3403.7f,22442.7f,-5830.35f,-3125.36f,21807.5f,-5461.09f,-3555.3f,19110.4f,-13046f,-3833.65f,10915.8f,-27847.5f,-3863.23f,10735.6f,-26787.1f,-4300.36f,23222.6f,-2518.03f,-3057.67f,23336.1f,1364.68f,-3369.59f,10301.8f,-40240.8f,-15469.8f,10482f,-40907.1f,-14694f,10915.8f,-27847.5f,-3863.23f,10735.6f,-26787.1f,-4300.36f,25648.8f,8121.58f,-2817.31f,25624.5f,16024.2f,-2801.34f,24056.1f,-2550.94f,-3019.36f,25678.7f,16560.2f,-2907.29f,25594.2f,17951.2f,-3237.71f,25624.5f,-88046.9f,-92182.7f,25678.7f,-87767f,-92508.6f,25678.7f,16560.2f,-2907.29f,25678.7f,16560.2f,-2907.29f,25624.5f,16024.2f,-2801.34f,25624.5f,-88046.9f,-92182.7f,25624.5f,-88413.1f,-92497.2f,25678.7f,-88133.2f,-92823.1f,24765.7f,-88413.1f,-92497.2f,24820f,-88133.2f,-92823.1f,25678.7f,-88133.2f,-92823.1f,25624.5f,-88413.1f,-92497.2f,24765.7f,-89895.8f,-93770.7f,24820f,-89615.9f,-94096.6f,24820f,-88133.2f,-92823.1f,24765.7f,-88413.1f,-92497.2f,25678.7f,-89596.5f,-94079.9f,25678.7f,-88133.2f,-92823.1f,24820f,-88133.2f,-92823.1f,24820f,-89615.9f,-94096.6f,23222.6f,-93458.9f,-81162.2f,24056.1f,-93491.8f,-81123.9f,24056.1f,-2550.94f,-3019.36f,23222.6f,-2518.03f,-3057.67f,10579.6f,-102089f,-68973.2f,10579f,-102925f,-68042.7f,10482f,-40907.1f,-14694f,10579.6f,-102089f,-68973.2f,10579f,-102925f,-68042.7f,10482f,-41291.8f,-14246f,10579f,-102925f,-68042.7f,10489f,-103571f,-67018.6f,10482f,-41713.9f,-13886.7f,10482f,-41291.8f,-14246f,10489f,-103571f,-67018.6f,8379.01f,-102145f,-69021.7f,10579.6f,-102089f,-68973.2f,10301.8f,-40240.8f,-15469.8f,8379.01f,-68082.6f,-39554.7f,8379.01f,-101057f,-70411.1f,10735.6f,-101057f,-70411.1f,10579.6f,-102089f,-68973.2f,8379.01f,-102145f,-69021.7f,-7490.7f,13527f,1074.93f,-3602.79f,20679.5f,611.547f,-7449.35f,23005.5f,1503.19f,5631.77f,13982.2f,32.0718f,6938.43f,14845.7f,8.81875f,4620.19f,17973.8f,60.0461f,2166.16f,14509.2f,164.113f,1136.48f,15846.6f,223.075f,1621.29f,18549.5f,194.186f,-160.178f,16705.3f,310.215f,-4323.73f,15846.6f,687.576f,-3030.97f,16705.3f,554.435f,-1709.92f,19868.7f,433.258f,-1596.32f,17001.2f,423.539f,2827.51f,9087.62f,131.015f,2166.16f,7402.34f,164.113f,3718.3f,9096.18f,92.3283f,-2352.36f,-8011.43f,490.311f,3946.3f,7228.03f,83.5128f,1136.48f,6064.9f,223.074f,-160.182f,5206.21f,310.215f,-5049.53f,-426.492f,768.658f,5536.51f,13854f,34.3347f,4608.07f,12649.6f,60.4329f,3946.3f,10964.3f,83.513f,3055.44f,10955.8f,120.472f,2827.51f,12823.9f,131.015f,5639.04f,4205.31f,31.902f,4608.07f,5542.76f,60.4327f,1416.3f,-15792.9f,206.155f,6022.45f,-21752.5f,23.5976f,6938.43f,3346.62f,8.81857f,-1596.32f,4910.32f,423.538f,-3030.97f,5206.21f,554.434f,-4323.73f,6064.9f,687.576f,-6578.08f,6399.27f,954.364f,-5348.56f,7402.34f,803.393f,-6006f,9087.62f,882.485f,-6232.44f,10955.8f,910.595f,-6006f,12823.9f,882.485f,-5348.57f,14509.2f,803.393f,-7449.35f,17415.3f,-3297.97f,-7490.7f,8492.36f,-3249.03f,-7449.35f,23005.5f,1503.19f,-7490.7f,13527f,1074.93f,1416.3f,-20827.5f,-4117.81f,4029.77f,-24463.4f,-4243.56f,1416.3f,-15792.9f,206.155f,-5049.53f,-5461.09f,-3555.3f,-2352.36f,-13046f,-3833.65f,-5049.53f,-426.492f,768.658f,-2352.36f,-8011.43f,490.311f,1416.3f,-20827.5f,-4117.81f,1416.3f,-15792.9f,206.155f,6022.45f,-26787.1f,-4300.36f,6022.45f,-21752.5f,23.5976f,-6578.08f,1364.68f,-3369.59f,-6578.08f,6399.27f,954.364f,-8101.47f,16025.8f,-2803.12f,-8125.81f,8123.11f,-2819.08f,-7449.35f,17415.3f,-3297.97f,-7490.7f,8492.36f,-3249.03f,781.19f,-21196.8f,-3687.86f,3394.66f,-24832.7f,-3813.62f,1416.3f,-20827.5f,-4117.81f,4029.77f,-24463.4f,-4243.56f,-5684.64f,-5830.35f,-3125.36f,-2987.47f,-13415.3f,-3403.7f,-5049.53f,-5461.09f,-3555.3f,-2352.36f,-13046f,-3833.65f,5842.26f,-27847.5f,-3863.23f,6022.45f,-26787.1f,-4300.36f,-6464.54f,-2518.03f,-3057.67f,-6578.08f,1364.68f,-3369.59f,6276.06f,-40907.1f,-14694f,6456.25f,-40240.8f,-15469.8f,5842.26f,-27847.5f,-3863.23f,6022.45f,-26787.1f,-4300.36f,-8866.45f,16024.2f,-2801.34f,-8890.79f,8121.58f,-2817.31f,-7298.12f,-2550.94f,-3019.36f,-8920.72f,16560.2f,-2907.29f,-8836.13f,17951.2f,-3237.71f,-8920.72f,-87767f,-92508.6f,-8866.45f,-88046.9f,-92182.7f,-8920.72f,16560.2f,-2907.29f,-8866.45f,16024.2f,-2801.34f,-8920.72f,16560.2f,-2907.29f,-8866.45f,-88046.9f,-92182.7f,-8920.72f,-88133.2f,-92823.1f,-8866.45f,-88413.1f,-92497.2f,-8920.72f,-87767f,-92508.6f,-8866.45f,-88046.9f,-92182.7f,-8061.98f,-88133.2f,-92823.1f,-8007.72f,-88413.1f,-92497.2f,-8920.72f,-88133.2f,-92823.1f,-8866.45f,-88413.1f,-92497.2f,-8920.72f,-88133.2f,-92823.1f,-8007.72f,-88413.1f,-92497.2f,-8061.98f,-89615.9f,-94096.6f,-8007.72f,-89895.8f,-93770.7f,-8061.98f,-88133.2f,-92823.1f,-8007.72f,-88413.1f,-92497.2f,-8920.72f,-88133.2f,-92823.1f,-8920.72f,-89596.5f,-94079.9f,-8061.98f,-88133.2f,-92823.1f,-8061.98f,-89615.9f,-94096.6f,-8061.98f,-88133.2f,-92823.1f,-8920.72f,-89596.5f,-94079.9f,-7298.12f,-93491.8f,-81123.9f,-6464.54f,-93458.9f,-81162.2f,-7298.12f,-2550.94f,-3019.36f,-6464.54f,-2518.03f,-3057.67f,-7298.12f,-2550.94f,-3019.36f,-6464.54f,-93458.9f,-81162.2f,6456.25f,-40240.8f,-15469.8f,6179.01f,-102925f,-68042.7f,6178.41f,-102089f,-68973.2f,6276.06f,-41291.8f,-14246f,6179.01f,-102925f,-68042.7f,6179.01f,-102925f,-68042.7f,6276.06f,-40907.1f,-14694f,6179.01f,-102925f,-68042.7f,6276.06f,-41713.9f,-13886.7f,6269.01f,-103571f,-67018.6f,6022.45f,-21752.5f,23.5976f,6022.45f,-26787.1f,-4300.36f,10735.6f,-26787.1f,-4300.36f,10735.6f,-21752.5f,23.5976f,6178.41f,-102089f,-68973.2f,6178.41f,-102089f,-68973.2f,6022.45f,-101057f,-70411.1f
};

public String objectName;
public int triangleCount;
public int verticeCount;
public float[] vertices;
public float[] normals;
public float[] textures;
public short[] indices;
public float[] matrices;
public float[] pivots;
public float[] animations;

public void awake() {

        ByteBuffer vbb = ByteBuffer.allocateDirect(verticeTest.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        mVertexBuffer = vbb.asFloatBuffer();
        mVertexBuffer.put(verticeTest);
        mVertexBuffer.position(0);

        ByteBuffer tbb = ByteBuffer.allocateDirect(textures.length * 4);
        tbb.order(ByteOrder.nativeOrder());
        mTextureBuffer = tbb.asFloatBuffer();
        mTextureBuffer.put(textures);
        mTextureBuffer.position(0);

        //short has 2 bytes
        ByteBuffer ibb = ByteBuffer.allocateDirect(indicesTest.length*2);
        ibb.order(ByteOrder.nativeOrder());
        indexBuffer = ibb.asShortBuffer();
        indexBuffer.put(indicesTest);
        indexBuffer.position(0);

        verticeCount = (triangleCount*3);
    }

    public void draw(GL10 gl) {

        System.out.println("Draw Method Called in Object");

        gl.glEnable(GL10.GL_TEXTURE_2D); //workaround bug 3623
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mVertexBuffer);

        System.out.println("Triangle Vertice Count is "+verticeCount);

        int x = vertices.length;
        System.out.println("Rendering following number of vertices "+x);

        int y = indices.length;
        System.out.println("Rendering following number of indices "+y);

        gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, GL10.GL_UNSIGNED_SHORT, indexBuffer);

    }
} 
```

这是我调用 draw 方法的代码：

```
import java.nio.FloatBuffer;
import java.util.ArrayList;
import java.util.Iterator;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView;
import android.opengl.GLU;

class GLRenderer implements GLSurfaceView.Renderer {

private static final String TAG = "GLRenderer";
private final Context context;
private final GLCube cube = new GLCube();
private long startTime;
private long fpsStartTime;
private long numFrames;
SceneObject drawObject;
SceneObject object;

//Used for object position and rotation.
float zRotation;
float xRotation;
float yRotation;

float kxRotation = 0.0f;
float kyRotation = 0.0f;

ArrayList<SceneObject> sceneObjects = new ArrayList<SceneObject>();

boolean SEE_THRU = false; 

GLRenderer(Context context) {
    this.context = context;
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // Setup any OpenGL Options that are required.
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glEnable(GL10.GL_TEXTURE_2D);

    if (SEE_THRU) {
        gl.glDisable(GL10.GL_DEPTH_TEST);
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE);
    }

    //Optional - disable dither to boost peformance.
    //gl.glDisable(GL10.GL_DITHER); //Dithering enabled by default.

    //Turn on the lights.
    float lightAmbient[] = new float[] { 0.2f, 0.2f, 0.2f, 1};
    float lightDiffuse[] = new float[] {1, 1, 1, 1};
    float[] lightPos = new float[] {1 ,1 ,1 , 1};
    gl.glEnable(GL10.GL_LIGHTING);
    gl.glEnable(GL10.GL_LIGHT0);
    gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_AMBIENT, lightAmbient, 0);
    gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_DIFFUSE, lightDiffuse, 0);
    gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_POSITION, lightPos, 0);

    //Specify which materials we should use.
    float matAmbient[] = new float[] {1, 1, 1, 1};
    float matDiffuse[] = new float[] {1, 1, 1, 1};
    gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_AMBIENT, matAmbient, 0);
    gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_DIFFUSE, matDiffuse, 0);

    }

public void onSurfaceChanged(GL10 gl, int width, int height) {
    //Define the view frustrum
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    float ratio = (float)width/height;
    gl.glLoadIdentity();
    //gl.glOrthof(0, 480f, 800f, 0, 0, 1);
    GLU.gluPerspective(gl, 45.0f, ratio, 1.0f, 100f);
}

public void onDrawFrame (GL10 gl) {

    //Defs for rotation of object.
    float kzRotation = 0.0f;
    kyRotation +=1.0f;
    kxRotation =280.0f;

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    SceneObject object = sceneObjects.get(13); //Get the object

    //Position the model.
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    gl.glTranslatef(0.0f, 0.0f, -30.0f);
    gl.glScalef(0.0001f, 0.0001f, 0.0001f);

            zRotation = kzRotation;
            xRotation = kxRotation;
            yRotation = kyRotation;
            gl.glRotatef(yRotation, 0.0f, 1.0f, 0.0f);
            gl.glRotatef(xRotation, 1.0f, 0.0f, 0.0f);
            gl.glRotatef(zRotation, 0.0f, 0.0f, 1.0f);

           object.draw(gl);

            }

        } 
```

}

问题是对象没有按应有的方式显示，而是看起来扭曲和挤压。谁能发现可能出了什么问题？

编辑 - 根据 Tim 下面的回答更改了 onSufaceChanged 方法，但没有任何改进。

我已经添加了对象如何在 Android 上渲染以及在 iPhone 上正确渲染的图像。最明显的问题是“腿”应该是直的而不是弯曲的，并且总体上物体应该更长。我确定上面代码中的顶点和索引是正确的（它们与 iPhone 完全相同）。

如果这里相关的是我如何设置表面视图/视图：

```
public class SaxParserActivity extends Activity {
/** Called when the activity is first created. */
ArrayList<SceneObject> sceneObjects = new ArrayList<SceneObject>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    GLView view;
    view = new GLView(this, sceneObjects);
    //Pass down our sceneObjects into the view class.
    //view.sceneObjects = sceneObjects;
    setContentView(view);
}
}

class GLView extends GLSurfaceView {
private final GLRenderer renderer;
ArrayList<SceneObject> sceneObjects = new ArrayList<SceneObject>();

GLView(Context context, ArrayList<SceneObject> sceneObjects) {
    super (context);
    //Uncomment this to turn on error-checking and logging.
    //setDebugFlags(DEBUG_CHECK_GL_ERROR | DEBUG_LOG_GL_CALLS);
    renderer = new GLRenderer(context);
    //Pass down our sceneObjects.
    renderer.sceneObjects = sceneObjects;

    setRenderer(renderer);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:03:37.977

我对你在做什么有点困惑。为什么要在投影矩阵上擦除`onDrawFrame`，设置后`onSurfaceChanged`？

您应该像这样在 onSurfaceChanged 中设置投影：

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);     
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity(); //make sure to reset before glOrthof
    gl.glOrthof(0, 320f, 480f, 0, 0, 1);
} 
```

然后改回模型视图，不要在`onDrawFrame`.

完成此操作后，您可能需要重新校准秤并进行翻译`onDrawFrame`。

# javascript - 在页面加载后一段时间内淡出对象，然后在淡出后运行另一组代码

> ID：10625876
> 
> 赞同：0
> 
> 时间：2012-05-16T20:04:42.613
> 
> 标签：javascript, settimeout, fadein, fadeout

我正在尝试获取一个对象并在文档准备好 5 秒后使其淡出。然后我想让另一组函数触发，在我的例子中，它[开始添加和缓动一组块。](http://isotope.metafizzy.co/index.html)

我的主要问题是 SetTimeout 没有回调，因此完成后我无法运行某些东西。其余代码在 SetTimeout 运行时运行。

这就是我现在所拥有的：

```
$(document).ready(function() {
                    setTimeout(function() {
                      $('#background-example').fadeOut(2000, function(){
                    });
                      }, 3000); 
                      alert("Hello");   
            });
            </script> 
```

这样做是在文档准备好 3000 毫秒后运行 2000 毫秒的淡出。但是，添加警报会使警报在 setTimeout 开始时立即运行，因为它具有不等待的属性。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:09:50.363

你放在那里的那个空函数有一个在动画完成后调用的回调。只需将您的警报（或任何其他函数调用）移到里面。

```
setTimeout(function() {
    $("#background-example").fadeOut(2000, function() {
        alert("All done!");
    });
}, 3000); 
```

# wpf - 列表框样式选择不适用于数据模板

> ID：10625877
> 
> 赞同：2
> 
> 时间：2012-05-16T20:04:46.363
> 
> 标签：wpf, listbox

我在这里使用 ListBox 和 ListBox 样式：http: [//viblend.com/products/net/wpf/controls/free-wpf-controls.aspx](http://viblend.com/products/net/wpf/controls/free-wpf-controls.aspx)

看起来像这样：

```
 <ListBox x:Name="listBox" ItemsSource="{Binding}" Style="{StaticResource Office2010SilverListBoxStyle}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}" Content="{Binding}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

但是，如果我单击一个项目，它不会被标记为选定项目。如果我不使用数据模板，一切正常。那么有人知道为什么吗？这是工作示例：

```
<ListBox x:Name="listBox" Style="{StaticResource Office2010SilverListBoxStyle}">
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">1\. Frame</ListBoxItem>
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">2\. Frame</ListBoxItem>
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">3\. Frame</ListBoxItem>
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">4\. Frame</ListBoxItem>
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">5\. Frame</ListBoxItem>
    <ListBoxItem Style="{StaticResource Office2010SilverListBoxItemStyle}">6\. Frame</ListBoxItem>
</ListBox>--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:07:10.760

您*不*`DataTemplate`应该包含将由控件创建的 a ，在您的示例中将有a ，混淆选择。*`ListBoxItem``ListBox``ListBoxItem``ListBoxItem`*

 *此外，您应该通过 将样式应用于项目`ItemContainerStyle`。（据我所知，这仅适用于自动生成`ListBoxItems`的，如果您直接或通过添加数据`ItemsSource`，如果您`ListBoxItems`直接添加两者`DataTemplate`，`ItemContainerStyle`则会被忽略）

另请参阅：[数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)*

# iphone - UISlider 在值更改后不会重绘

> ID：10625878
> 
> 赞同：0
> 
> 时间：2012-05-16T20:04:47.947
> 
> 标签：iphone, cocoa-touch, uikit, uislider

> **可能重复：**
> [UISlider 不会自动重绘](https://stackoverflow.com/questions/6952754/uislider-does-not-redraw-automatically)

我有一个 UISlider，其中`minValue = 0`,`maxValue = 100`和`value = 0`.

当我将其更改为`minValue = -100`,`maxValue = 100`和`value = 0`时，它不会重绘......它仍然在远端而不是移动到中间......即使我打电话`setNeedsDisplay`.

有任何想法吗？

我想我可以`setValue:1`，然后`setValue:0`，但是天啊...

# c# - C# Linq .ToDictionary() 键已经存在

> ID：10625879
> 
> 赞同：5
> 
> 时间：2012-05-16T20:04:59.573
> 
> 标签：c#, regex, linq, dictionary, ini

**最终编辑：我能够在 ini 文件中找到重复的字段。谢谢大家的帮助！**

我正在使用正则表达式来解析 ini 文件并使用 LINQ 将其存储在字典中：

> **示例数据：**
> [WindowSettings]
> Window X Pos='0'
> Window Y Pos='0'
> Window Maximized='false'
> Window Name='Jabberwocky'
> 
> [Logging]
> Directory='C:\Rosetta Stone\Logs'

**编辑：这是实际导致问题的文件：http: [//pastebin.com/mQSrkrcP](http://pastebin.com/mQSrkrcP)**

**EDIT2：我已将其缩小为由文件中的最后一部分引起：[list_first_nonprintable]**

出于某种原因，我正在解析的文件之一是抛出此异常：

> System.ArgumentException：已添加具有相同键的项目。

有什么办法让我找出导致问题的键（以便我可以修复文件），或者只是跳过导致此问题的键并继续解析？

这是代码：

```
try
{
    // Read content of ini file.
    string data = System.IO.File.ReadAllText(project);

    // Create regular expression to parse ini file.
    string pattern = @"^((?:\[)(?<Section>[^\]]*)(?:\])(?:[\r\n]{0,}|\Z))((?!\[)(?<Key>[^=]*?)(?:=)(?<Value>[^\r\n]*)(?:[\r\n]{0,4}))*";
    //pattern = @"
    //^                           # Beginning of the line
    //((?:\[)                     # Section Start
    //     (?<Section>[^\]]*)     # Actual Section text into Section Group
    // (?:\])                     # Section End then EOL/EOB
    // (?:[\r\n]{0,}|\Z))         # Match but don't capture the CRLF or EOB
    // (                          # Begin capture groups (Key Value Pairs)
    //  (?!\[)                    # Stop capture groups if a [ is found; new section
    //  (?<Key>[^=]*?)            # Any text before the =, matched few as possible
    //  (?:=)                     # Get the = now
    //  (?<Value>[^\r\n]*)        # Get everything that is not an Line Changes
    //  (?:[\r\n]{0,4})           # MBDC \r\n
    //  )*                        # End Capture groups";

    // Parse each file into a Dictionary.
    Dictionary<string, Dictionary<string, string>> iniFile
                    = (from Match m in Regex.Matches(data, pattern, RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline)
                       select new
                       {
                           Section = m.Groups["Section"].Value,

                           kvps = (from cpKey in m.Groups["Key"].Captures.Cast<Capture>().Select((a, i) => new { a.Value, i })
                                   join cpValue in m.Groups["Value"].Captures.Cast<Capture>().Select((b, i) => new { b.Value, i }) on cpKey.i equals cpValue.i
                                   select new KeyValuePair<string, string>(cpKey.Value, cpValue.Value)).ToDictionary(kvp => kvp.Key, kvp => kvp.Value)

                       }).ToDictionary(itm => itm.Section, itm => itm.kvps);

    return iniFile;
}
catch (ArgumentException ex)
{
    System.Diagnostics.Debug.Write(ex.ToString());
    return new Dictionary<string, Dictionary<string, string>>();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T20:08:46.890

这只是意味着当您转换为字典时-

```
.ToDictionary(itm => itm.Section, itm => itm.kvps); 
```

-- 有多个键（itm.Section）。您可以改用[ToLookup](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)，它有点像字典，但允许多个键。

**编辑**

有几种方法可以调用*ToLookup*。最简单的是指定键选择器：

```
var lookup = 
   // ...
.ToLookup(itm => itm.Section); 
```

这应该提供一个查找，其中键的类型为**Group**。然后获取查找值应返回一个 IEnumerable，其中 T 是匿名类型：

```
Group g = null;
// TODO get group
var lookupvalues = lookup[g]; 
```

如果 .NET 编译器不喜欢这样（有时似乎很难确定各种类型应该是什么），您还可以指定一个元素选择器，例如：

```
ILookup<string, KeyValuePair<string,string>> lookup = 
    // ...
.ToLookup(
    itm => itm.Section.Value,    // key selector
    itm => itm.kvps              // element selector
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T20:41:37.460

您可以编写自己的 ToDictionary 方法，该方法不会很容易被重复键破坏。

```
public static Dictionary<K,V> ToDictionary<TSource, K, V>(
    this IEnumerable<TSource> source, 
    Func<TSource, K> keySelector, 
    Funct<TSource, V> valueSelector)
{
  //TODO validate inputs for null arguments.

  Dictionary<K,V> output = new Dictionary<K,V>();
  foreach(TSource item in source)
  {
    //overwrites previous values
    output[keySelector(item)] = valueSelector(item); 

    //ignores future duplicates, comment above and 
    //uncomment below to change behavior
    //K key = keySelector(item);
    //if(!output.ContainsKey(key))
    //{
      //output.Add(key, valueSelector(item));
    //}
  }

  return output;
} 
```

我假设您可以弄清楚如何实现额外的重载（没有值选择器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T10:12:44.690

您可以使用`Tuple`传递多个密钥。检查下面的示例代码：

```
.ToDictionary(k => new Tuple<string,string>(k.key1,k.key2), v => v.value) 
```

# c# - C#，访问类中不同列表的通用方法

> ID：10625887
> 
> 赞同：5
> 
> 时间：2012-05-16T20:05:21.617
> 
> 标签：c#, generics

我有一类 3 个不同的链表（用于在我正在开发的游戏中保存实体）。这些列表都是具有相同基本类型的对象，但出于处理原因，我将它们分开。请注意，IEntity、IObject 和 IUndead 都继承自 IEntity。

```
public class EntityBucket
{
    public LinkedList<IEntity> undeadEntities;
    public LinkedList<IEntity> objects;
    public LinkedList<IEntity> livingEntities;

    public EntityBucket()
    {
        undeadEntities = new LinkedList<IEntity>();
        objects = new LinkedList<IEntity>();
        livingEntities = new LinkedList<IEntity>();
    }

    public LinkedList<IEntity> GetList(IObject e)
    {
        return objects;
    }

    public LinkedList<IEntity> GetList(IUndead e)
    {
        return undeadEntities;
    }

    public LinkedList<IEntity> GetList(ILiving e)
    {
        return livingEntities;
    }

} 
```

我有 3 种方法来检索每个列表，目前基于它们的参数。有 3 个这一事实很好，因为我知道每个列表都会以某种方式需要它自己的访问器。不过，传递一个实例化的对象并不理想，因为我可能想在某个地方检索一个列表，而手头没有类似类型的对象。请注意，这里的对象甚至没有在 GetList 方法中使用，它们只是用来确定要使用的版本。这是我手头有一个实例化对象的示例：

```
public void Delete(IUndead e, World world)
{

     .....
     LinkedList<IEntity> list = buckets[k].GetList(e);
     .....
} 
```

我不喜欢这个当前的实现，因为我可能并不总是手头有一个实例化的对象（例如在渲染实体时）。我正在考虑一般地这样做，但我不确定这是否可能与我想做的事情有关。有了这个，我还需要 3 个 Delete 方法（以及 3 个任何其他方法，例如 add 等） - 每种类型一个，IUndead、IObject 和 ILiving。我只是觉得这不是正确的做法。

我会根据要求发布到目前为止我尝试做的事情，但是我的泛型相当糟糕，我觉得任何人阅读这篇文章也是一种浪费。

最后，性能非常重要。我不是过早地优化，我是后期优化，因为我已经有工作代码，但需要它更快。getlist 方法将被非常频繁地调用，我想避免任何显式类型检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:12:51.240

所以你想要一个更好的接口，因为正如你所说，传递一个不必要的对象`GetList`只是为了弄清楚它的类型是没有意义的。

您可以执行以下操作：

```
public List<IEntity> GetList<T>() : where T:IEntity
{
    if(typeof(T)==typeof(IUndead)) return undedEntities;
    // and so on
} 
```

你必须这样称呼它：`GetList<IUndead>();`

我认为枚举在这里是一个更好的主意：

```
enum EntityTypes { Undead, Alive, Object };
public List<IEntity> GetList(EntityTypes entityType) { ... } 
```

它更干净，对我来说更有意义。

编辑：使用泛型实际上并不是那么简单。有人可以将 GetList 称为`Zombie`实现 IUndead 的类型，然后您必须检查接口实现。有人甚至可以给你一个`LiveZombie`实现 IUndead 和 IAlive 的。绝对要使用枚举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:23:24.300

像下面这样的东西怎么样？

```
public LinkedList<IEntity> GetList(Type type) {
    if (typeof(IUndead).IsAssignableFrom(type)) return undeadEntities;
    if (typeof(ILiving).IsAssignableFrom(type)) return livingEntities;
    if (typeof(IObject).IsAssignableFrom(type)) return objects;
} 
```

然后你会这样称呼它：

```
var myUndeads = GetList(typeof(IUndead));
var myLivings = GetList(typeof(ILiving));
// etc 
```

相同类型的逻辑可以在您的删除、添加和其他方法中实现，并且您永远不需要对象的具体实例来访问它们。

`IsAssignableFrom`逻辑可以很好地处理子类化（即你可以有一个，`CatZombie`它派生自`Zombie`，它实现`IUndead`，这仍然可以工作）。这意味着您仍然只需要创建一个 Delete 方法，如下所示：

```
public void Delete(IEntity e, World world) {
    if (typeof(IUndead).IsAssignableFrom(type)) undeadEntities.Remove(e);
    if (typeof(ILiving).IsAssignableFrom(type)) livingEntities.Remove(e);
    if (typeof(IObject).IsAssignableFrom(type)) objects.Remove(e);
} 
```

**编辑：**我注意到您对 zmbq 关于性能的回答的评论；这绝对不快。如果您需要高性能，请使用枚举风格的方法。您的代码将更加冗长并且需要更多维护，但您将获得更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:53:12.470

更好的实现与更好的接口一起使用怎么样？

```
public class EntityBucket
{
  public LinkedList<IEntity> Entities;

  public IEnumerable<T> GetEntities<T>() where T : IEntity
  {
    return Entities.OfType<T>();
  }

}

List<IUndead> myBrainFinders = bucket.GetEntities<IUndead>().ToList(); 
```

* * *

通过这个实现，调用者更好地将每个项目添加到正确的列表中。这是您原始实施的要求，所以我认为这没问题。

```
public class EntityBucket
{
  Dictionary<Type, List<IEntity>> entities = new Dictionary<Type, List<IEntity>>();

  public void Add<T>(T item) where T : IEntity
  {
    Type tType = typeof(T);
    if (!entities.ContainsKey(tType))
    {
      entities.Add(tType, new List<IEntity>());
    }
    entities[tType].Add(item);
  }

  public List<T> GetList<T>() where T : IEntity
  {
    Type tType = typeof(T);
    if (!entities.ContainsKey(tType))
    {
      return new List<T>();
    }
    return entities[tType].Cast<T>().ToList();
  }

  public List<IEntity> GetAll()
  {
    return entities.SelectMany(kvp => kvp.Value)
      .Distinct() //to remove items added multiple times, or to multiple lists
      .ToList();
  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:43:12.650

在我看来，您可以只实现一个名为 LinkedList 的字典并通过名称或枚举来引用它们。

这样添加或删除列表只是一个实现问题，不需要处理单独的类。

# facebook - 使用 Open Graph 更改单击“喜欢”按钮时发布的文本

> ID：10625889
> 
> 赞同：1
> 
> 时间：2012-05-16T20:05:42.820
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

如果我只是在按下like 按钮时更改写入的内容，我是否需要为我的网站上的 fb:like 元素设置额外的范围权限？

我宁愿不请求更多权限，因为这会减少通过 Facebook Connect 加入我的网站的用户数量。我也不明白我为什么需要这样做，因为我没有发布他们不会看到的任何东西（只是改变文本，以便喜欢某事的行为在上下文中更有意义）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:19:39.957

最好的资源是 facebooks 权限页面：

[https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms](https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)

我不确定你是如何修改写的，但你可以通过打开的图表来做到这一点。在这种情况下，我认为您只需要基本的开放图权限。

“Open Graph 权限允许您的应用程序向 Open Graph 发布操作，并检索其他应用程序发布的操作。要请求这些权限，您必须启用增强的身份验证对话框。”

希望有帮助

# excel - OpenOffice Calc - 用于比较的复杂公式

> ID：10625893
> 
> 赞同：0
> 
> 时间：2012-05-16T20:05:57.990
> 
> 标签：excel, excel-formula, openoffice-calc

我基本上有 4 个列表：为方便起见，称它们为 SKU-A、Price-A、SKU-B、Price-B

skuA 是大约 1000 个值的列表，skuB 是大约 20000 个值的列表。我需要将skuA中的每个项目与skuB进行比较，如果skuB的价格不是9876.54，则使用skuB价格，否则使用skuA价格，或者如果没有列出价格，则使用9876.54。

我对公式了解很多，但是比较两个单独的列表完全把我搞砸了，在我的一生中，我无法获得 vlookup 或正常工作的东西；有什么建议吗？

两个 sku 列表都是无序的，因此 skuA:300 可能不是 skuB:300，它可能是 skuB:10、skuB:9850 或介于两者之间的任何位置

如果更容易，我也可以在 excel 中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:41:55.403

也许这会起作用（仅限 Excel 2007 或更高版本）：

![多条规则](../Images/8f568b9094aba28431221b1e9fef2779.png)

使用公式**这个价格**( `F2`) 是

`=IFERROR(IF(VLOOKUP(A2,H:I,2,FALSE)=9876.54,B2,VLOOKUP(A2,H:I,2,FALSE)),9876.54)`

temp1、temp2 和 temp3 不是必需的，但本着“展示我的工作”的精神，我把它们留在里面，这样你就可以看到我是如何找到解决方案的。

`temp1=VLOOKUP(A2,H:I,2,FALSE)`

`temp2=IF(C2=9876.54,B2,C2)`

`temp3=IFERROR(D2,9876.54)`

# android - 如何将项目从数据库添加到列表视图？

> ID：10625898
> 
> 赞同：0
> 
> 时间：2012-05-16T20:06:16.283
> 
> 标签：android, android-listview, android-adapter

我通常使用此代码将项目从数据库添加到列表视图：

```
public class ViewEvents extends Activity {

    DBAdapter DB=new DBAdapter(this);

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewevents);

        final ListView myListView = (ListView)findViewById(R.id.MyList);

          final ArrayList<String> todoItems = new ArrayList<String>();
          final ArrayAdapter<String>  aa = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, todoItems);

           DB.open();
         Cursor c=DB.select();
          c.moveToFirst();
          Integer n=new Integer(c.getCount());

        for(int i=0;i<c.getCount();i++)
        {
             todoItems.add(0, c.getString(0));
             c.moveToNext();
        }

            aa.notifyDataSetChanged();
            myListView.setAdapter(aa);
enter code here 
```

但是，在我的项目中，我将图像添加到列表视图，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >
 <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    <ImageView
        android:id="@+id/logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:drawablePadding="0dip"
        android:src="@drawable/icon_remove" >
    </ImageView>

    <TextView
        android:id="@+id/label"
       android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/logo"
        android:text="@+id/label"
        android:textSize="25px" >
    </TextView>
</RelativeLayout>
</LinearLayout> 
```

这会导致 arrayadapter 出现问题，我无法像往常一样捕获 listview：

```
ListView myListView = (ListView)findViewById(R.id.MyList); 
```

请有任何建议

新代码：

```
public class RemoveEvent extends ListActivity {

    DBAdapter DB=new DBAdapter(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final ArrayList<String> todoItems = new ArrayList<String>();
         final ArrayAdapter<String>  aa = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, todoItems);

         DB.open();
         Cursor c=DB.select();
          c.moveToFirst();
          Integer n=new Integer(c.getCount());
        for(int i=0;i<c.getCount();i++)
        {
             todoItems.add(0, c.getString(0));
             c.moveToNext();
        }

           // todoItems.add(0, c.getString(0));
            aa.notifyDataSetChanged();
            setListAdapter(new RemoveArrayAdapter(this, .......));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        //get selected items
        String selectedValue = (String) getListAdapter().getItem(position);
        Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

} 
```

删除数组适配器代码：

```
public class RemoveArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public RemoveArrayAdapter(Context context, String[] values) {
        super(context, R.layout.removeevent, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.removeevent, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values[position]);

        return rowView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:20:29.413

> 这会导致 arrayadapter 出现问题，我无法像往常一样捕获 listview：

这究竟意味着什么？你得到什么例外（如果有的话）？

一些问题：

如果您使用`android.R.layout.simple_list_item_1`，那么您发布的 xml 布局是什么？如果您打算使用该布局文件，请使用以下构造函数`ArrayAdapter`：

```
final ArrayAdapter<String>  aa = new ArrayAdapter<String>(this, R.layout.Name_of_layout_you_posted, R.id.label, todoItems); 
```

此外，如果您打算通过`Context`：

```
 DBAdapter DB=new DBAdapter(this); 
```

然后你应该在方法中初始化*数据库*`onCreate`：

```
DBAdapter DB;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewevents);
    DB = new DBAdapter(this);
    //... rest of the code 
```

此外，您应该尝试使用`Cursor`基于适配器的适配器，这样您就不必解析列表中的光标。

**编辑：** 修改您`RemoveArrayAdapter`以接受您使用以下数据填充的 ArrayList `Cursor`：

```
 public class RemoveArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final ArrayList<String> values;

        public RemoveArrayAdapter(Context context, ArrayList<String> values) {
            super(context, R.layout.removeevent, values);
            this.context = context;
            this.values = values;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.removeevent, parent, false);
            TextView textView = (TextView) rowView.findViewById(R.id.label);
            ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
            textView.setText(values.get(position));
            // I'm guessing you want to modify the Logo?!? if yes pass another ArrayList to this adapter
           //contaning the info to set the ImageView  
            return rowView;
        }

} 
```

并且在`RemoveActivity`：

```
for(int i=0;i<c.getCount();i++) {
    todoItems.add(c.getString(0));
    c.moveToNext();
}
setListAdapter(new RemoveArrayAdapter(this, todoItems)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:08:32.220

你可以做到这一点更容易

```
ListView lv = (ListView)d.findViewById(R.id.dialog_list);
            Cursor c = getContentResolver().query(BowlersDB.CONTENT_URI,new String[] {BowlersDB.ID,BowlersDB.NAME},null,null,BowlersDB.NAME + " COLLATE LOCALIZED ASC");
            if(c.moveToFirst() && c != null){
                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.names_listview,c
                        ,new String[] {BowlersDB.NAME},new int[] {R.id.bListTextView});
                lv.setAdapter(adapter); 
```

基本上只需将光标传递给简单的光标适配器，它将从您的布局中填充列表，当您已经拥有信息时无需制作列表适配器

编辑：自定义适配器示例

```
public class ImageAdapter extends SimpleCursorAdapter {
Context context;

public ImageAdapter(Context context,int textViewResourceId,Cursor c,String[] from,int[] to){
    super(context,textViewResourceId,c,from,to);

    this.context = context;
}

@Override
public void setViewText(TextView tv,String text){
    Cursor c = context.getContentResolver().query(BowlersDB.CONTENT_URI,new String[] {BowlersDB.ID,BowlersDB.NAME}
    ,BowlersDB.ID+"="+text,null,null);
    if(c.moveToFirst() && c != null){
        tv.setText(c.getString(1));
    }
    c.close();
}
@Override
public void setViewImage(ImageView iv,String text){
    if(text.equals("1")){
        iv.setImageResource(R.drawable.rate_star_small_on_holo_light);
    }
}

} 
```

这 2 部分代码来自我程序的两个不同部分，所以请不要认为它们放在一起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:12:01.007

你可以使用我的代码

```
 Cursor cursor = myDBClass.returnResult();

    ArrayList<String> result = new ArrayList();
     for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext())
      {
       result.add( cursor.getString(cursor.getColumnIndex(myDBClass.BI_Attr2)));
      }
    String[] Values= new String[result.size()];

    for(int i=0;i<result.size();i++)
    {
        Values[i]=result.get(i);
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_single_choice, android.R.id.text1, Values);
    // set this adapter as your ListActivity's adapter
    ListView LV=(ListView)findViewById(R.id.LVV);
    LV.setAdapter(adapter);
    LV.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
        {
        //Do whatever you want onClick of item of ListView
        }
    }); 
```

# php - 从 mysql where 中选择记录

> ID：10625902
> 
> 赞同：0
> 
> 时间：2012-05-16T20:06:20.727
> 
> 标签：php, sql

如果您查看下面的 SQL，我在整理查询时遇到问题（让我发疯），请注意和/或。我基本上需要将 2 个类别中的艺术家的图像组合到一个调用中，但是如果我使用下面的 sql，我会得到第一个类别中的所有图像以及第二个类别中每个艺术家的所有图像，而不是那些对于特定的艺术家。如果您使用 AND 调用，它只会获取两者中的图像。所以基本上希望这是有道理的。感谢所有帮助。

```
SELECT i.img_name, i.ordered_by, i.img_description, a.artist_path_name, a.artist_id, a.artist_dir, a.artist_name, a.first_name, a.last_name, a.artist_titletag, a.artist_metadesc, a.artist_metakey, ck.catKey_id, ck.keyword
        FROM images AS i JOIN artists AS a USING (artist_id)
        JOIN img_cat_table AS imc USING (img_id)
        JOIN catKeys AS ck USING (catKey_id)
        WHERE artist_name = 'j' AND catKey_id = 5 OR catKey_id = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:07:59.757

如果您同时使用两者，`AND/OR`那么您将需要使用括号来确定顺序

```
WHERE (artist_name = 'j') AND (catKey_id = 5 OR catKey_id = 1) 
```

甚至使用以下`WHERE`子句：

```
WHERE (artist_name = 'j') AND (catKey_id IN (5, 1)) 
```

# php - 只允许字符串中的某些字符

> ID：10625904
> 
> 赞同：0
> 
> 时间：2012-05-16T20:06:27.490
> 
> 标签：php, regex, string

我想禁止字符串中的所有符号，而不是去禁止每个符号，我认为只允许字母数字字符（az AZ 0-9）会更容易。

我将如何解析字符串并将其转换为仅包含允许字符的字符串？我还想将任何空格转换为`_`.

目前我有：

```
function parseFilename($name) {
    $allowed = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    $name = str_replace(' ', '_', $name);

    return $name;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:09:02.987

尝试

```
$name = preg_replace("/[^a-zA-Z0-9]/", "", $name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:20:24.447

`find`您可以通过使用数组作为/`replace`参数一次完成两个替换`preg_match()`：

```
$str = 'abc def+ghi&jkl   ...z';
$find = array( '#[\s]+#','#[^\w]+#' );
$replace = array( '_','' );
$newstr = preg_replace( $find,$replace,$str );
print $newstr;

// outputs:
// abc_defghijkl_z 
```

`\s`匹配空格（替换为单个下划线），并且如@FJ 所述，`^\w`是任何“非单词字符”（替换为空字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:13:34.570

`preg_replace()`是去这里的方式，以下应该做你想要的：

```
function parseFilename($name) {
    $name = str_replace(' ', '_', $name);
    $name = preg_replace('/[^\w]+/', '', $name);
    return $name;
} 
```

`[^\w]`相当于`[^a-zA-Z0-9_]`，它将匹配任何不是字母数字或下划线的字符。在`+`它意味着匹配一个或多个之后，这应该比单独替换每个字符更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T14:04:29.077

尝试使用 HTML 部分

```
pattern="[A-Za-z]{8}" title="Eight letter country code"> 
```

# java - 是否有可用于 Java、c++ 和 JS 的可下载 eclipse 包

> ID：10625906
> 
> 赞同：3
> 
> 时间：2012-05-16T20:06:29.147
> 
> 标签：java, javascript, c++, eclipse, apache-flex

我正在尝试下载eclipse。我在套餐方面有很多选择。

我看到了针对 java、c++ 和 JS 的不同包。

是否有一个可以安装的软件包，我可以使用它来开发所有这些应用程序？并且最好使用 flex 构建应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:54:48.273

实际上 Eclipse 中的所有内容都是一个插件，这意味着您可以将新功能安装到现有的 Eclipse 实例中。例如，从**IDE for Java Developers**包或**IDE for C/C++ Developers**包开始，然后安装所需的附加功能。在下载页面的右侧，有标题为“安装指南”和“更新 Eclipse”的链接，这两个链接都将指向有关安装附加功能的信息。

至于 Flex，这是 Adob​​e 提供的工具，我还没有尝试将它安装到现有的 Eclipse 包中（首先要检查的是 Adob​​e 是否提供了可以从中安装的更新站点）。另一种选择是将 Flex 工具安装为您的“基础”包，然后从 eclipse.org 更新站点添加 Java、C/C+、JS 等功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:25:19.410

其余信息已经提到，很容易获得大部分语言。Flex 可以使用 Air Gear 插件来实现。使用新版本的 SDK 非常好，并且非常可定制。FDT等软件也构建在eclipse平台上，也可以作为eclipse插件下载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T20:08:28.467

如果安装每个包，您的工作区中可以有 Java 和 C++ 项目，并且您的项目中可以有 Java、C++ 和 javascript 文件。因此，在其他作品中，安装您想要使用的所有软件包，它们被集成在一起以相互协作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T20:11:45.973

如果您感到困惑，请参阅页面：[Eclipse 比较](http://www.eclipse.org/downloads/compare.php)

但是，例如，如果您只想为 Flex 开发应用程序 - 下载具有最少插件的软件包，并且在 Eclipse 下载之后 - 为 Flex 安装插件。~~这样做的原因是 Eclipse 的初始化速度更快 - 您拥有的插件越多，等待 Eclipse 初始化的时间就越多。~~（正如@E-Riz 所指出的，Eclipse 会延迟加载捆绑包，如此[处](http://wiki.eclipse.org/Lazy_Start_Bundles)所述- 另请查看@E-Riz 评论）

如果你想`general`使用“for Java”包，我建议下载`Java EE`有尽可能多的开发插件。

答案取决于您的需求 - 如果您将仅使用 Flex 开发应用程序，那么您不应该下载“所有内容” - 您应该下载所有您**需要**的内容。

Eclipse Core 只是 OSGi 的“小”包——其余的只是插件。[您在Eclipse 比较](http://www.eclipse.org/downloads/compare.php)中看到的比较是包含不同插件集的包。下载“smaller plugins set”-Eclipse后安装即可。没有区别。

# php - SQL 得到结果 21-30？

> ID：10625909
> 
> 赞同：-1
> 
> 时间：2012-05-16T20:06:50.197
> 
> 标签：php, mysql, sql, limit

这似乎是一个非常简单的问题，但我似乎无法找到有关它的信息。

如果我有 100 个结果，并且我只想获得 21 到 30 之间的结果（从我的 SQL 查询获取它们的顺序），我将如何完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:08:32.060

你可以使用这个：

```
LIMIT 20, 10 
```

例如，

```
select *
from MyTable
LIMIT 20, 10 
```

# c - 在 c 中一次处理多个连接

> ID：10625912
> 
> 赞同：0
> 
> 时间：2012-05-16T20:06:54.623
> 
> 标签：c, sockets, networking

我能够创建一个套接字，将其绑定到连接，监听它并接收结果，但在这一切中我只有 1 个连接。如何在 c 中处理多个传入连接？我通过网络得到了一些东西，但不能让它工作..

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:39:03.373

你可以使用`fork`//`threads`或`some poll`框架函数。

来自谷歌的简单 fork 示例：

```
#include <stdio.h>
#include <strings.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <unistd.h>
#include <stdlib.h>

void doprocessing (int sock)
{
    int n;
    char buffer[256];

    bzero(buffer,256);

    n = read(sock,buffer,255);
    if (n < 0)
    {
        perror("ERROR reading from socket");
        exit(1);
    }
    printf("Here is the message: %s\n",buffer);
    n = write(sock,"I got your message",18);
    if (n < 0)
    {
        perror("ERROR writing to socket");
        exit(1);
    }
}

int main( int argc, char *argv[] )
{
    int sockfd, newsockfd, portno;
    socklen_t clilen;
    struct sockaddr_in serv_addr, cli_addr;

    /* First call to socket() function */
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0)
    {
        perror("ERROR opening socket");
        exit(1);
    }
    /* Initialize socket structure */
    bzero((char *) &serv_addr, sizeof(serv_addr));
    portno = 5001;
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(portno);

    /* Now bind the host address using bind() call.*/
    if (bind(sockfd, (struct sockaddr *) &serv_addr,
                          sizeof(serv_addr)) < 0)
    {
         perror("ERROR on binding");
         exit(1);
    }
    /* Now start listening for the clients, here
     * process will go in sleep mode and will wait
     * for the incoming connection
     */
    listen(sockfd,5);
    clilen = sizeof(cli_addr);
    while (1)
    {
        newsockfd = accept(sockfd,
                (struct sockaddr *) &cli_addr, &clilen);
        if (newsockfd < 0)
        {
            perror("ERROR on accept");
            exit(1);
        }
        /* Create child process */
        pid_t pid = fork();
        if (pid < 0)
        {
            perror("ERROR on fork");
            exit(1);
        }
        if (pid == 0)
        {
            /* This is the client process */
            close(sockfd);
            doprocessing(newsockfd);
            exit(0);
        }
        else
        {
            close(newsockfd);
        }
    } /* end of while */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:12:07.687

我可以简要介绍一下它是如何工作的。

您需要设置一个系统来侦听连接，当有连接时，它会将其推送到打开的连接列表中。在它将连接存储在列表中之后，您将创建另一个侦听器。根据连接状态定期修剪您的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:45:19.020

你没有提到哪个操作系统，所以我假设是 Unix/Linux。

处理多个连接的最常见方法是在单独的进程中处理每个连接，例如通过`fork()`或使用线程。`pthreads`这个想法是服务器等待连接，当一个连接被接受时，使用创建一个新进程`fork()`或创建一个新线程来处理新连接。这是一个不错的[教程](http://www.google.com/url?sa=t&rct=j&q=unix%20network%20programming%20concurrent%20connections&source=web&cd=3&ved=0CFMQFjAC&url=http://retis.sssup.it/~lipari/courses/OS_CP/sockets.pdf&ei=Fyy0T8jjEaPg2QX-pdEX&usg=AFQjCNFUB4og10lTxwC_chfFoCp6_Vb27A&cad=rja)，您可能想看看。

这是一个有用的[pthreads 教程](http://students.cs.byu.edu/~cs460ta/cs460/labs/pthreads.html)

# .net - 在 T-SQL 中实现 .NET 属性的想法

> ID：10625917
> 
> 赞同：1
> 
> 时间：2012-05-16T20:07:17.360
> 
> 标签：.net, vb.net, tsql

当我使用带有 SQL Server/T-SQL 的 VB.NET 设计我的系统时，我总是对在我看来明显的差距感到震惊，即 VB 类属性。

假设我有一个带有列的表 Employee：

```
First varchar  
Last varchar  
KnowsSPANISH bit  
KnowsGERMAN bit 
```

在 VB 中，我可能有一个类似的类：

```
Class Employee  
  Public First as string  
  Public Last as string  
  Public KnowsSPANISH as boolean  
  Public KnowsGERMAN as boolean  

  Public Readonly Property SpeaksAForeignLanguage  
    Get  
     If KnowsSPANISH or KnowsGERMAN return True else return False   
    End Get  
  End Property  
End Class 
```

所以我的财产`SpeaksAForeignLanguage`目前取决于两个领域。也许有一天这会改变，更多的领域或条件可能会发挥作用。这就是使用属性的全部原因。

现在，如果我出于某种原因在 SQL 中需要我的属性的等价物，除了使用两个 Knows... 列重新编码一些 SELECT 语句之外，别无他法。

有没有人找到一个干净的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:34:46.860

您可以添加另一个表，例如 KnownLanguages，其中包含 First、Last 和 Language 列，并将其连接到 First 和 Last 的 Employee 表，或者我想可能有一个列 EmployeeNumber，您可以将其用作它们之间的键。

# python - python中的随机化函数/全局变量麻烦？

> ID：10625918
> 
> 赞同：1
> 
> 时间：2012-05-16T20:07:20.273
> 
> 标签：python, global-variables

所以我有一些代码重写起来有点麻烦：

```
def func_A():

    x=[]
    # the function picks random members of the local x and rearranges them,
    # after giving x some initial value
    return x 
```

现在我想在一个迭代中创建一个迭代`func_B`，对于交互中的每个贯穿，`func_B`使用生成的`x`值`func_A`来做事。

但是，我想避免创建`x`一个全局变量。

我的第一个想法是制作 def 的第一行`func_B` `x=func_A()`，但这会运行随机器两次，并且`x`会更改 of 的值。

如何在不再次运行随机发生器（直到下一次迭代）并且不使用全局变量的情况下引用产生的相同`x`内容？`func_A``func_B``func_B`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:20:39.073

使用类

```
import random
class Randomizer():
    def __init__(self):
        # Generates a list of random values
        self.x = []
        self.rng = 10
        for i in range(1,self.rng+1):
            self.x.append(random.random())            

        # Need to call once to make sure all vars defined
        self.func_A()

    # pick a random value from a list
    def func_A(self):
        self.recent = self.x[random.randint(0,self.rng-1)]
        return self.recent

    # Do something with random value picked by A
    def func_B(self):
        return self.recent*self.recent 
```

你以为这就是你的意思吗？

```
>>> r = Randomizer()
>>> r.func_A()
0.91223345147715629
>>> r.func_B()
0.83216986999392528 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:54:20.563

根据提供的信息，我能想到的最简单的方法是将 x 的生成抽象为一个新函数。像这样的东西：

```
def gen_x():
    x = []
    # your code here
    return x

def func_a(x):
    # your code here
    return x

def func_b(x):
    # your code here
    return x

x = gen_x()
func_a(x)
func_b(x) 
```

另一种选择可能是 func_a 返回一个带有 x 的元组和当前 func_a 的结果。然后你可以将 func_a 生成的 x 传递给 func_b

# wpf - WP7 / WPF Stretch="Uniform" 时图像周围的空白区域

> ID：10625919
> 
> 赞同：0
> 
> 时间：2012-05-16T20:07:22.693
> 
> 标签：wpf, silverlight, image, windows-phone-7

我正在使用 Windows Phone 7 应用程序，它在 HyperlinkBut​​ton 中加载图像。这很好用，除了`Stretch="Uniform"`在图像不是完全正方形时会在图像周围放置空白区域。有没有办法让这个透明？

![图像周围的空白区域](../Images/bb0eb36e09e4ed1a574dbd777a35db9f.png)

```
<HyperlinkButton NavigateUri="{Binding Id, StringFormat='{}/x;component/Pages/FullScreenImage.xaml?id={0}'}"
                    Grid.Column="0" Grid.Row="0"
                    toolkit:TiltEffect.IsTiltEnabled="True" Background="Transparent">
    <HyperlinkButton.Template>
        <ControlTemplate TargetType="HyperlinkButton">
            <Grid Margin="0,0,0,10" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Column="0"
                    Grid.Row="0"
                    Text="Advertised"
                    Margin="10,0,0,0"
                    Style="{StaticResource PhoneTextSubtleStyle}" />
                <Image Grid.Column="0"
                    Grid.Row="1"
                    Margin="0"
                    Stretch="Uniform" 
                    Source="{Binding ExpectedImage}"  />
            </Grid>
        </ControlTemplate>
    </HyperlinkButton.Template>
</HyperlinkButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:21:39.110

我的图像源正在创建白色。：-/

# android - AndroidPlot设置网格间距

> ID：10625920
> 
> 赞同：4
> 
> 时间：2012-05-16T20:07:26.497
> 
> 标签：android, androidplot

我想知道如何使用[AndroidPlot](http://androidplot.com/)更改网格间距。我的网格目前有 9 行域和 9 行范围，我不知道这是从哪里来的。

此外，如果您碰巧知道如何使图形线更粗一点，那将不胜感激。

这是应该修复的最后两点，我已经搜索了一段时间。

我几乎发现了如何“让其他一切看起来都很漂亮”。

非常感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:37:29.903

如何更改 GRID（两种可能的方式）：

```
plot.setRangeStep(XYStepMode.INCREMENT_BY_VAL, 125);
plot.setDomainStep(XYStepMode.SUBDIVIDE, 16); 
```

如何更改图形线的粗细：您需要以这种方式更改您正在使用的 LineAndPointFormatter（使用 lineAndPointFormatter 的当前 Paint 初始化 Paint 是必不可少的，否则您会得到非常奇怪的行为）：

```
LineAndPointFormatter lineAndPointFormatter = new LineAndPointFormatter(
        Color.rgb(0, 0, 0), null, null);

//change the line width
Paint paint = lineAndPointFormatter.getLinePaint();
paint.setStrokeWidth(3);
lineAndPointFormatter.setLinePaint(paint);

// create a series using a temporary formatter, with a transparent fill
// applied immediately
xyPlot.addSeries(currentConsumptionSeries, lineAndPointFormatter); 
```

# vb.net - VB.net 将完整字符串与包含通配符的字符串进行比较

> ID：10625921
> 
> 赞同：4
> 
> 时间：2012-05-16T20:07:32.570
> 
> 标签：vb.net

我有一个需要 2 个字符串参数的方法。一种包含普通字符串，另一种包含带有一个或多个通配符的字符串。我试过以下代码：

```
Private Function DoesMatchWildcardString(ByVal fullString As String, ByVal wildcardString As String) As Boolean
    Dim stringParts() As String
    Dim matches As Boolean = True

    stringParts = wildcardString.Split("*")

    For Each str As String In stringParts
        If fullString.Contains(str) = False Then
            matches = False
        End If
    Next

    Return matches

End Function 
```

我意识到它不能正常工作。如果我将 ABCD 作为正常字符串，将 A*CD 作为通配符字符串，即使我的正常字符串是 CDAB，匹配也会起作用，这不是我想要的。

有任何想法吗？？

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T20:19:07.467

您的方法很有趣，但即使纠正后也非常低效。通配符匹配算法的有效实现使用[**移位或算法**](http://en.wikipedia.org/wiki/Bitap_algorithm)的扩展（根据维基百科，某些来源也称为“bitap”，但我自己从未读过）。

对传统移位或算法的唯一更改是在预处理中：对于`*`您在模式中遇到的每个字符，在此位置启用字母表中的*所有字符。*

如果您想更正自己的算法，请将`Contains`调用替换为`IndexOf`，并提供它应该开始搜索的位置 - 即在上一个匹配之后。这适用于大多数情况，但它会执行非贪婪搜索，在某些情况下可能会失败。详尽的搜索必然会回溯。正如我所说，这是低效的，移位或算法不会受到这个缺点的影响。

**但所有这些都是不必要的**，因为 VB 已经提供了必要的运算符：**`Like`**

```
If fullString Like wildcardString Then
    ' Yep, matches.
End If 
```

* * *

风格说明：

声明变量时始终初始化变量，不要不必要地将声明和初始化分开。

也就是说，写

```
Dim stringParts As String() = wildcardString.Split("*")
' or, with Option Infer On:
Dim stringParts = wildcardString.Split("*") 
```

`If X = False`此外，将布尔值与文字 ( ...)进行比较是没有意义的。写吧

```
If fullString.Contains(str) Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T16:31:13.397

试试这个，有帮助吗？

```
Private Function DoesMatchWildcardString(ByVal fullString As String, ByVal wildcardString As String) As Boolean
    Dim count As Integer = 1
    Dim wildchr As String
    Dim fschr As String
    Dim resultstring As String = String.Empty

    Do Until count - 1 = Len(wildcardString)
        wildchr = Mid$(wildcardString, count, 1)
        fschr = Mid$(fullString, count, 1)
        If wildchr = "*" Then ' this one matches any char
            resultstring = resultstring & fschr
        Else
            If wildchr = fschr Then
                resultstring = resultstring & fschr
            End If
        End If
        count = count + 1
    Loop
    Return resultstring = fullString
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T15:21:43.393

`"*"`不代表单个字符，而是任何范围的字符。当你想比较两个字符串时，我发现`if maskedtextbox1.text like maskedtextbox2.text`or`maskedtextbox2.text = maskedtextbox1.text`效果很好。

# git - Git 子模块和钢筋

> ID：10625926
> 
> 赞同：3
> 
> 时间：2012-05-16T20:07:57.463
> 
> 标签：git, erlang, git-submodules, mochiweb, rebar

我的应用程序使用 Mochiweb。据我了解，`rebar`当我运行时从 Github 获取最新版本`make`，因为有一行`rebar.config`：

```
{deps, [
  {mochiweb, ".*",
   {git, "git://github.com/mochi/mochiweb.git", "master"}} 
```

我的应用程序有一个 VCS，它是 git。所以，基本上我在另一个里面有一个 git 存储库：

```
myapp
 .git
 deps
  mochiweb
   .git
 src
 etc 
```

我知道在另一个存储库中添加一个 git 存储库不是一个好主意（`git add .`）。应该使用 Git 子模块功能。

因此，我将该`deps/mochiweb`目录作为子模块添加到主 git 存储库中。

问题是，当另一个开发人员克隆他必须首先克隆的主存储库`init`和`update`子模块时`deps/mochiweb`（否则它将是空的）。

如果开发人员`make`在克隆主存储库后立即运行，则 Makefile 会显示以下内容：

```
ERROR: Dependency dir deps/mochiweb failed application validation with reason:

{missing_app_file,"deps/mochiweb"}

make: *** [all] Error 1 
```

我的问题是：将另一个应用程序添加到 Erlang 应用程序的部门以允许其他开发人员在不使用 git 子模块的情况下轻松更新的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:31:28.597

> 将另一个应用程序添加到 Erlang 应用程序的部门以允许其他开发人员在不使用 git 子模块的情况下轻松更新的正确方法是什么？

将应用程序添加到 rebar.config 并使用：

```
./rebar update-deps 
```

用于更新。第一次，您需要使用：

```
./rebar get-deps 
```

见：[https ://github.com/basho/rebar/wiki/Rebar-commands](https://github.com/basho/rebar/wiki/Rebar-commands)

现在，回到你的错误。

我的感觉是，您的部门中有一个（几乎）空的 mochiweb 目录，可能是由于使用了 Git 子模块。当您运行该`get-deps`命令时，rebar 会默默地丢弃 mochiweb，因为该目录已经存在。但它需要一个 OTP 应用程序并查找`mochiweb.app`不存在的文件（目录为空）。因此，错误。如果我的解释是正确的，你可以简单地做：

```
rm -rf deps/mochiweb
./rebar get-deps 
```

不过，看看你的 rebar.config 会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T05:00:23.677

在我们内部的 Erlang 项目中，我们使用[Git 子树合并](https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging)方法来引用依赖项。在我看来，即使`rebar get-deps`是获取`github`托管项目依赖项的简便方法，但在公司环境中并不是那么好：

1.  `github`需要可以从每台构建机器访问（并且依赖项的源代码是硬编码的`rebar.config`）
2.  你依赖于不那么精确的依赖项目愿景（你能指出具体的提交吗？）。不仅无法重现项目过去的状态（当时包含所有依赖项），而且更糟糕的是，一旦更新了某些依赖项`github`（不更新其版本），您的项目也很容易被破坏。
3.  如果要自定义依赖项目怎么办？就像依赖项目的“rebar.config”文件中的一个小改动？

因此，`get-deps`我们不是为每个依赖项目使用单独的分支（+ 远程指向特定`github`项目），而是将 git subtree 合并到我们项目分支上的“dep”目录中。实际上，我们将所有依赖项存储在主分支中，但这样我们就解决了上述所有问题：

1.  您可以通过从我们的内部 git 存储库中提取项目主分支（或开发等）来获得整个代码库。它可以立即构建。
2.  所有依赖项的精确版本都被子树合并到我们的主分支中，我们仅在我们想要/需要时更新到更新版本的依赖项：只需切换到依赖项分支，`git pull`然后它们子树将某些特定版本的依赖项合并到主分支中分支。您可以随时获取整个项目的任何过去版本。
3.  一旦需要更新依赖项，就可以在其自己的分支（或另一个自定义分支）中自定义依赖项：您必须`git merge`使用最新的代码进行更改，但这通常不是问题。您甚至可以将远程指向您自己的存储库（分叉`github`或内部）。

当然，我们不会以这种形式（包括所有依赖项）在“github”上发布我们的项目，但您可以在单独的分支上剥离所有依赖项（通过删除“dep”文件夹）并发布结果。这种方法的缺点是依赖项更新有点麻烦：`rebar get-deps`您不必为要更新的每个依赖项都执行`git push`+ `git merge -s subtree`，但这只是严格的依赖项管理和易于构建的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:42:19.837

我认为您正在寻找 rebar get-deps 命令。看看 Riak 使用的[Makefile](https://github.com/basho/riak/blob/master/Makefile)和[rebar.config](https://github.com/basho/riak/blob/master/rebar.config)就是一个很好的例子。

# sql-server-2008 - 如何进行 sql 循环查询来检查值之间的差异？

> ID：10625931
> 
> 赞同：0
> 
> 时间：2012-05-16T20:08:15.110
> 
> 标签：sql-server-2008, loops, datediff

首先，我不是以英语为母语的人，这是一个很难解释的问题。如果您有任何疑问，请告诉我。

我们正在使用 GPS 车辆跟踪设备，该设备被编程为在不移动时每 5 分钟发送一次车辆位置并将其存储在数据库中，在移动时每 100 米发送一次。

该数据库有一个名为“vehicle_gps”的表，用于存储数据，包括速度、位置、日期时间、vehicle_gps_id 等值。

我需要某种查询来显示车辆停止超过一定时间的不同位置（例如2分钟，丢弃红绿灯）。

例如，我需要一些可以告诉我以下内容的信息：“车辆在 8:00 位于 Positon1 (P1)，它离开 P1 前往 P2，在 8.20 到达它。车辆一直停留在 P2 直到 10.20，它在 P3 到达10.50"

表中的记录示例

```
vehicle_gps_id  | datetime---------- | latitude | longitude | speed

1000------------| 05/16/2012 08:00:00|50.0000   |50.00000   |40 (km/h)
1001------------| 05/16/2012 08:01:00|51.0000   |51.00000   |38 (km/h)
1002------------| 05/16/2012 08:01:23|51.0045   |50.000054  |40 (km/h)
1003------------| 05/16/2012 08:01:40|51.00540  |51.0005430 |39 (km/h)
.
.
.
1040------------| 05/16/2012 08:20:40|53.00540  |53.0005430 |0 (km/h)
1041------------| 05/16/2012 08:25:40|53.00540  |53.0005430 |0 (km/h)
1042------------| 05/16/2012 08:30:40|53.00540  |53.0005430 |0 (km/h)
.
.
.
1060------------| 05/16/2012 10:20:40|53.00540|53.0005430|20 (km/h) 
```

我怎么能做这样的事情？

到目前为止，我能够得到固定位置之间的分钟差异，因此，我想要一个循环来检查位置之间的所有日期，并在差异超过 5 分钟时中断，这意味着车辆已经停止。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:05:21.353

```
DECLARE @idFrom as int,
        @idTo as int,
        @gpsDateFrom as datetime,
        @gpsDateTo as datetime
DECLARE VehicleCursor CURSOR FAST_FORWARD FOR 
SELECT  vehicle_gps_id, 
        datetimeCol
FROM    yourtable
ORDER BY vehicle_gps_id
OPEN VehicleCursor FETCH NEXT FROM VehicleCursor INTO @idFrom, @gpsDateFrom
    FETCH NEXT FROM VehicleCursor INTO @idTo, @gpsDateTo
    WHILE @@FETCH_STATUS = 0 BEGIN 
        IF DATEDIFF(MI,@gpsDateFrom,@gpsDateTo) >5
        BEGIN
            --Break (your code here)
        END
        SET @idFrom = @idTo
        SET @gpsDateFrom = @gpsDateTo
        FETCH NEXT FROM VehicleCursor INTO @idTo, @gpsDateTo
    END 
CLOSE VehicleCursor 
DEALLOCATE VehicleCursor 
```

像这样的东西应该适合你。它是一个游标，它只在比较日期时间的所有列中运行。您可以在 if 语句后的注释部分中输入您想要执行的任何操作。

# oracle - Oracle SQLPlus 报告中的复杂 TTITLE 表达式

> ID：10625944
> 
> 赞同：0
> 
> 时间：2012-05-16T20:09:15.563
> 
> 标签：oracle, reporting, sqlplus

我正在编写一个 SQLPlus 报告，其中重复的标题包含一个业务地址，后面是几个与该业务相关的行，然后是下一个业务的地址：

```
BOB'S GUITARS 
123 SESAME STREET 
NEW YORK, NY 10001

customer name   last purchase date   last purchase amount
-------------   ------------------   --------------------

DAVE'S CIGARS 
456 MOCKINGBIRD LANE 
WASHINGTON, DC 12345

customer name   last purchase date   last purchase amount
-------------   ------------------   -------------------- 
```

问题是这样的：

其中一些企业有多行地址，而另一些则没有。

我可以用类似的东西处理基本情况 `TTITLE CENTER BUSINESSNAME SKIP 1 CENTER ADDR1 SKIP 1 CENTER CITY`

（其中“CITY”是一个包含城市、州和邮编的变量）

但是我很难弄清楚如何放置“如果 ADDR2 不为空，则添加第二个地址行”而不冒 ADDR1 和 CITY 之间的空白行的风险。

换句话说，我不想

```
BOB'S GUITARS
123 SESAME STREET

NEW YORK, NY 10001 
```

为了支持

```
DAVE'S CIGARS
456 MOCKINGBIRD LANE
SUITE 101
WASHINGTON, DC 12345 
```

**编辑/添加**： nvl 和 decode 组合的建议是正确的第一步，但现在我遇到了问题，即有问题的两行“行”超过了报告的 LINEWIDTH，因此被截断为 LINEWIDTH 字符. 这是我用来生成该行的代码。请记住，两条线都必须居中：

```
SELECT RPAD(' ', (79 - length(trim(address)))/2) 
  || trim(address) 
  || decode(nvl(trim(address_2), '='), '=', '', 
    CHR(10) 
    || RPAD(' ', (79 - length(trim(address_2)))/2, '-') 
    || trim(address_2) || ' ') ADDR1 from business 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:32:21.560

假设您可以定义包含 addr_1 或 addr1+addr_2（如果存在 addr_2）的地址变量。这将是这个变量的选择：

选择地址1 || 从表中解码(nvl(addr_2,'='),'=','', CHR(10) || addr_2)

CHR (10) 是换行符！！

* * *

试图完成我的建议。（您不需要手动处理填充）

您需要在 select 和 temp 变量中定义一个列并使用别名

```
COLUMN NEW_ADDR new_value N_ADDR noprint
TTITLE CENTER BUSINESSNAME SKIP 1 CENTER N_ADDR SKIP 1 CENTER CITY
-- I suppose you have some break on businessname command here 
BREAK ON BUSINESSNAME ON NEW_ADDR .... 
SELECT ...., ADDRESS || DECODE (NVL(ADDRESS_2,'='),'=','',CHR(10)||ADDRESS_2) AS NEW_ADDR  FROM BUSINESS 
```

另外我建议你看看[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:48:08.710

在考虑了文档和分析之后，似乎无法做到这一点。（非技术性的）解决方案是迫使企业主接受 SQL*Plus 实际可以生成的格式。他们对该解决方案感到满意。

# javascript - 如果...否则如果 javascript

> ID：10625946
> 
> 赞同：1
> 
> 时间：2012-05-16T20:09:28.460
> 
> 标签：javascript, regex, if-statement

我正在做表单验证并且我的代码有问题：

```
var reValue = /^\s*$/;      
var phoneClass = /(^|\s)phoneValidate(\s|$)/;              
var phoneValue = 
     /^[01]?[- .]?(\([2-9]\d{2}\)|[2-9]\d{2})[- .]?\d{3}[- .]?\d{4}$/;  

for (var i=0; i < iLen; i++) {
    el = allElements[i];

    if(phoneClass.test(el.className) && reValue.test(el.value)){
        // The field is empty.
        aMessages += 'Please enter a phone number in: '+ el.name +'.\n';
    }
    else if (phoneClass.test(el.className) && phoneValue.test(el.value)) {
        // The field is not a valid phone number
        // Advise user to fix it
        aMessages += 'Please enter a valid phone number in: '+ el.name +'.\n';
    }
} 
```

如果该字段为空，则第一个 IF 语句有效并显示消息，但 ELSE IF 由于某种原因不...我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:14:37.823

基于查看您的正则表达式，我认为您需要反转`phoneValue`测试中的逻辑。您希望`else if`子句在与正则表达式不匹配时执行，`phoneValue`如下所示：

```
else if (phoneClass.test(el.className) && !phoneValue.test(el.value)) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:13:12.970

`phoneValue.test(el.value)`解决为`false`。这就是为什么`else if`不射击的原因。

# asp.net - 如何使用在同一 GridView RSS 中的 radcombobox 的“Onclientsideselectedindexchanged”上触发的 javascript 函数在 GridView 中查找文本框

> ID：10625948
> 
> 赞同：1
> 
> 时间：2012-05-16T20:09:29.647
> 
> 标签：asp.net, gridview, textbox, telerik, radcombobox

我有两个控件，一个 TextBox 和`radcombobox`一个 GridView 的 ItemTemplate。我想要做的是当事件`onclientsideselectedindexchanges`被`radcombobox`触发时。我想用 JavaScript 在客户端显示/隐藏文本框。

这样做的基本目的是避免回发以显示将数据绑定到数据库的 TextBox。

如果无法在客户端执行，请在服务器端提出一些替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:49:27.050

在我的示例中，我有一个带有模板字段的 GridView，它包含一个下拉菜单和一个文本框。JavaScript 中的`OnLoad`事件将 TextBox 的显示样式设置为`"none"`. 在 GridView的事件中设置`OnChange`DropDown 的`OnRowDataBound`事件并调用 JavaScript 函数，您可以在其中将 TextBox 显示样式设置为您需要的样式。

在我的示例中，我仅在 DropDown 选择的索引为`"1"`.

我已经在我的代码中完成了所有这些，请参考：Gridview `ID="GridView1"`：

```
<Columns>
    <asp:TemplateField HeaderText="Order Status">
        <ItemTemplate>
           <asp:DropDownList ID="ddlOrderStatus" runat="server" Width="104px" ToolTip="Select order status">
            </asp:DropDownList><br />
             <asp:TextBox ID="txtShipTrackNo" runat="server" 
      Width="100px" Text='<%# Eval("sct_order_docket_id") %>'></asp:TextBox>
</ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

```
<script type="text/javascript">
var TargetBaseControl = null;
window.onload = function() {
    try {
    //get target base control.
    TargetBaseControl = document.getElementById('<%= this.GridView1.ClientID %>');
    for (var rowId = 1; rowId < TargetBaseControl.rows.length; ++rowId) {
    var txtShip = TargetBaseControl.rows[rowId].cells[0].getElementsByTagName("input")[0];
    txtShip.style.display = "none";
        }
    }
    catch (err) {
        TargetBaseControl = null;
    }
}

function selectCheck(rowid) 
{
     TargetBaseControl = document.getElementById('<%= this.GridView1.ClientID %>');
     var ddlStatus = TargetBaseControl.rows[rowid].cells[0].getElementsByTagName("select")[0];
     var txtShip = TargetBaseControl.rows[rowid].cells[0].getElementsByTagName("input")[0];
     txtShip.style.display = "none";
     if (ddlStatus.selectedIndex == '1') {
         txtShip.style.display = "block";
     }         
} 
```

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList ddlStatus = (DropDownList)e.Row.FindControl("ddlOrderStatus");
        string strFunc = string.Format("return selectCheck('{0}')", e.Row.RowIndex + 1);  
        ddlStatus.Attributes.Add("onchange", strFunc);
    }
} 
```

# c# - 编写一个简单的 LINQ 查询

> ID：10625952
> 
> 赞同：1
> 
> 时间：2012-05-16T20:09:52.687
> 
> 标签：c#, wpf, linq

所以我一直生活在迭代数据并以老式方式找到我感兴趣的东西的黑暗时代，但这个项目我认为我应该让事情变得更优雅并在我知道可以使用的地方使用 LINQ，但是事情不是很顺利。

所以我有两个简单的 ObservableCollections，我想从其中一个中提取所有数据，以匹配另一个的当前选定项。对象很简单...

```
public class foo
{
    //....
    public string barID{ get; set; }
    //....
}

public class bar
{
    public string ID { get; set; }
    //....
} 
```

因此，在我的代码中，我选择了 foo，并且我想创建一个包含所有具有匹配 barID 的 bar 的集合...

```
ObservableCollection<bar> bars = 
    from data in fooCollection
    where data.barID == barCollection.SelectedItem.ID
    select data; 
```

所以我根据我在网上找到的 LINQ 的语法尝试了这个，但这会引发无法将 IEnumerable 隐式转换为 ObservableCollection 的编译错误。于是我试了...

```
ObservableCollection<bar> bars = 
    (ObservableCollection<bar>)
    (from data in fooCollection
    where data.barID == barCollection.SelectedItem.ID
    select data); 
```

哪个编译但抛出运行时错误......

```
Unable to cast object of type 
'WhereEnumerableIterator`1[TestProj.bar]' to type 
'System.Collections.ObjectModel.ObservableCollection`1[TestProj.bar]'. 
```

所以我确信我可以在事后强制转换对象或做其他事情，但我正在寻找一个尽可能优雅的解决方案，因此将这个简单的 LINQ 语句放在一起的一点帮助将不胜感激。此外，对幕后发生的事情的简单解释将极大地帮助我理解一些 LINQ 基础知识。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T20:12:18.010

您只需使用[ObservableCollection 构造函数](http://msdn.microsoft.com/en-us/library/cc679169)。

```
IEnumerable<bar> barEnumerable = 
    from data in fooCollection
    where data.barID == barCollection.SelectedItem.ID
    select data;

ObservableCollection<bar> bars = new ObservableCollection<bar>(barEnumerable); 
```

发生的事情基本上是：

```
IEnumerable<bar> barEnumerable = 
fooCollection.Where(data => data.barID == barCollection.SelectedItem.ID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:56:13.463

强制转换会更改表达式的类型，如果表达式确实是该类型，它将起作用。

考虑`class Customer : Person`

```
Customer c = new Customer();
Person p = c;  //no problem;  this is an implicit up-cast (from child to parent)
Customer c2 = p;  //compiler doesn't allow because
                  //p may refer to a Person instance that isn't a Customer
Customer c3 = (Customer) p; //we certify to the compiler that p is referencing
                            //a Customer instance, and we take responsibility
                            //for an exception if we are wrong.
                            // this is a down-cast (from parent to child)
Customer cSafe = p as Customer; //safe down-cast, we get a null in cSafe if we are wrong 
```

由于潜在的异常，向下转换在我的代码中极为罕见。让我们花点时间感谢 Generics 使之成为可能。好的，继续转换：

转换从旧实例创建所需类型的新实例。

```
Customer c4 = new Customer(p); //conversion constructor
Customer c5 = p.ToCustomer(); //conversion method
Customer c6 = (Customer) p; // if defined, implicit conversion. Otherwise, casting
                            // yes, casting and implicit conversion are the same syntax
                            // terribly confusing. 
```

* * *

我们从异常消息中知道查询返回的实例是一个`WhereEnumerableIterator<TestProj.bar>`.

此结果实例不是数组，也不是 a `List<T>`，也不是`ObservableCollection<T>`. 演员表不能工作，因为`ObservableCollection<T>`不继承自`WhereEnumerableIterator<T>`. 如果你想`ObservableCollection<T>`从中得到一个，你需要转换。

在语法后面，该查询调用`Enumerable.Where`( [msdn](http://msdn.microsoft.com/en-us/library/bb534803.aspx) )，它返回一个`IEnumerable<T>`. 从该类型转换为所需类型的最简单方法是使用[构造函数](http://msdn.microsoft.com/en-us/library/cc679169.aspx)for `ObservableCollection<T>`。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-16T20:13:08.990

您可以简单地使用“var”作为您的条形类型：

```
var bars = from data in fooCollection
where data.barID == fooCollection.SelectedItem.ID
select data; 
```

# c# - SQL 级别的函数是否可用于 LINQ to Entity 查询？

> ID：10625955
> 
> 赞同：2
> 
> 时间：2012-05-16T20:10:02.973
> 
> 标签：c#, entity-framework

我希望我可以编写调用其他函数的 LINQ to Entity 查询：

```
from c in context.Widgets
where MyFunc(c.name)
select c 
```

这会导致错误，因为表达式显然无法转换为调用 MyFunc 的 TSQL。

好吧，我在想，除非 MyFunc 是用户定义的函数或（我认为更好）SQL/CLR 函数。

那么这可能吗，而且是否推荐？

如果不可能，我是否希望拥有此功能有效并且可能会在 ADO.NET 的未来中得到解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:19:44.463

您应该在数据库中创建一个用户定义的函数`MyFunc`并将其手动“导入”到您的上下文中（edmx，因此首先是数据库），无论是在 XML 中还是作为上下文类的部分类中的存根。此处描述了该过程：

[如何使用自定义数据库函数](http://blogs.msdn.com/b/alexj/archive/2009/08/07/tip-30-how-to-use-a-custom-store-function.aspx)（请注意，“StorageNamespace”是您在 .xml 文件下的 XML 文件中找到的命名空间`<edmx:StorageModels><Schema Namespace=...`。

[MSDN](http://msdn.microsoft.com/en-us/library/dd456812.aspx)有类似的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:13:55.247

EF 致力于将 .net 类与数据库的结构同步，并且最好在数据库哑且所有逻辑都位于类中的情况下使用。

但是你可以映射到函数和存储过程——解释起来有点技术性（做起来容易得多）——让我为你找到一些链接。

**这是一个不好的方法：**

```
// Query that calls the OrderTotal function to recalculate the order total.
string queryString = @"USING Microsoft.Samples.Entity;
    FUNCTION OrderTotal(o SalesOrderHeader) AS
    (o.SubTotal + o.TaxAmt + o.Freight)

    SELECT [order].TotalDue AS currentTotal, OrderTotal([order]) AS calculated
    FROM AdventureWorksEntities.SalesOrderHeaders AS [order]
    WHERE [order].Contact.ContactID = @customer";

int customerId = 364;

using (AdventureWorksEntities context =
    new AdventureWorksEntities())
{
    ObjectQuery<DbDataRecord> query = new ObjectQuery<DbDataRecord>(queryString, context);
    query.Parameters.Add(new ObjectParameter("customer",customerId));

    foreach (DbDataRecord rec in query)
    {
        Console.WriteLine("Order Total: Current - {0}, Calculated - {1}.", 
            rec[0], rec[1]);
    }
} 
```

[http://msdn.microsoft.com/en-us/library/dd490951.aspx](http://msdn.microsoft.com/en-us/library/dd490951.aspx)

**这里是如何正确地做到这一点：**

[http://scipbe.wordpress.com/2010/08/30/stored-procedures-udfs-in-the-entity-framework-part-1/](http://scipbe.wordpress.com/2010/08/30/stored-procedures-udfs-in-the-entity-framework-part-1/)

# java - 使用非默认程序打开文件

> ID：10625956
> 
> 赞同：1
> 
> 时间：2012-05-16T20:10:06.173
> 
> 标签：java, file, desktop

我想让一个 java 程序女巫自动打开一个指定的程序到一个给定的文件，例如一个 mp4 文件应该用转换器打开以将其转换为 avi

所以我的问题是：是否可以使用给定的程序在 java 中打开文件，但不能使用默认程序？如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:18:56.200

只要您知道确切的路径或程序具有已知的环境变量，就很容易：

```
try
{
    Process p = Runtime.getRuntime().exec("notepad Q:/Test/tmp.txt");
    BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
    stdInput.close();
}
catch(Exception k)
{
    JOptionPane.showMessageDialog(null, k.getMessage());
} 
```

这将在记事本中打开文件 tmp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:13:04.447

您可以使用 Process.exec() 使用所需的任何文件运行所需的任何程序

（实际上让它打开默认程序更棘手恕我直言）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:27:14.793

您将需要使用`Runtime.exec()`方法，但您**必须事先**阅读[When Runtime.exec() 不会](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。您要运行的程序必须接受代表要打开的文件的 exec 参数。

我知道这不是您问题的答案，但是如果您想使用默认应用程序（由操作系统注册）打开文件，您应该使用`java.awt.Desktop`类的“打开”方法。

# ruby-on-rails - 如何裁剪和显示特定尺寸的外部图像？

> ID：10625962
> 
> 赞同：0
> 
> 时间：2012-05-16T20:10:48.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, crop

我通过 API 获取图片网址。它通常有 360x200 但有时是 233x350 等。

我想将它们全部裁剪为特定尺寸 260x186。并向他们展示使用

```
 <%= image_tag image_url if hotel.images.first %> 
```

我不想存储这些图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:25:25.430

要裁剪它们，我认为您将需要 rmagick 和 image_magick。

如果您只想缩小它们并显示它们，我建议您定义一个 CSS 类并使用它

```
<%= image_tag image_url, :class=>'my_class' if hotel.images.first %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:04:30.030

您可以使用 css 裁剪、缩小或拉伸图像。问题是，如果纵横比不同，图像在收缩或拉伸时会变形，或者图像不会完全填满目标图像尺寸，或者在裁剪时会丢失一些源图像。另外，如果您不提前知道图像大小，这会限制您做任何智能事情的能力。本文讨论了三种技术，我相信其中一种对您有用：

[http://cssglobe.com/post/6089/3-easy-and-fast-css-techniques-for-faux-image](http://cssglobe.com/post/6089/3-easy-and-fast-css-techniques-for-faux-image)

# performance - Makefile：对许多文件的依赖

> ID：10625965
> 
> 赞同：0
> 
> 时间：2012-05-16T20:10:59.643
> 
> 标签：performance, makefile

我有大约 30K 文件，我想将它们批量转换为复杂 Makefile 中的另一种格式。当我明确列出文件时，GNUMake 会阻塞（或至少运行很长时间）。当我只依赖 30K 文件中的一个时，它可以工作，但是当其他一些文件发生更改时，它当然不会重建转换......

我该怎么办？

# windows - Windows上的emacs unicode字符输入

> ID：10625969
> 
> 赞同：0
> 
> 时间：2012-05-16T20:11:10.680
> 
> 标签：windows, emacs, unicode

为了使我的 emacs 键和弦更短，我开始使用另一个修饰键 - Mode_switch(AltGr)：

我已将 Mode_switch 绑定到 ; 和 az 到 α-ζ。因此，我有诸如 ;+β 之类的快捷方式。

这在 Ubuntu 上运行良好，但在 Windows 上存在问题：

输入到 emacs 中的 unicode 字符显示为 ?。

Unicode 输入在 notepad.exe 中有效，问题出在 emacs 上。

一件奇怪的事情是 μ 输入正确，而 β 被转换为 ß。问题也不在于希腊字符，当我将输入方法切换为希腊字符时，我可以输入它们（以通常的方式，而不是使用 Mode_switch）。

谁能给我一个解决这个问题的捷径？我想，很长的路要走，看看切换输入方法是如何实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:22:16.853

我在使用 unicode 方框绘图符号时遇到了类似的问题。

在 Windows 中查看您的字体。运行charmap windows 实用程序，然后选择在emacs 中使用的字体（Mx describe-font）。

您可以在那里获得具有广泛 unicode 支持的良好[字体](http://dejavu-fonts.org/wiki/Download)

# java - 使 android 视图与服务器数据保持同步

> ID：10625970
> 
> 赞同：0
> 
> 时间：2012-05-16T20:11:21.243
> 
> 标签：java, android, synchronization

我有一个游戏，它具有开放挑战的活动/视图。挑战由某个用户打开，然后可以被任何其他用户接受。我预计挑战会很快被打开和接受。

然后，将打开的挑战视图与服务器上的挑战保持同步会出现问题。我不想显示其他用户已经接受的挑战。我知道它不可能是完全实时的，但是在这种情况下最好的办法是什么？

在创建活动时，挑战会从 REST 服务器加载到视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:30:32.607

有没有想过使用 websockets？

我在最近的一个项目中使用它来跟踪视频状态（在设备之间切换时，例如手机到平板电脑或手机到电视等）。

在挑战屏幕上，您将保持开放连接。

这是一个 Android 实现： [http ://autobahn.ws/developers/tutorials/pubsub](http://autobahn.ws/developers/tutorials/pubsub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:27:46.630

Android Push、C2DM 会解决您的问题吗？在这里你会发现[谷歌的人](http://www.google.com/events/io/2010/sessions/push-applications-android.html)在谈论 C2DM

# git - git 在更改分支时是否正在'M'erging 未提交的编辑？

> ID：10625972
> 
> 赞同：1
> 
> 时间：2012-05-16T20:11:22.580
> 
> 标签：git

**更新**：根据我下面问题中的链接，当您在分支更改期间看到它时，“M”似乎意味着合并，但修改为`git status`： *“当我们切换到主分支时，工作目录被认为是“脏”由于 README 文件尚未添加到索引并提交。因此，git 将尝试将 README 的内容从 test 分支合并到 master 分支中的 README 文件中："*

原谅我对 git 的无知，但是为什么当我在上游分支中进行更改，然后签出我的 master 分支（没有提交）时，修改后的文件[作为 Merge 跟随当前分支](http://www.gitguys.com/topics/switching-branches-without-committing/)？我以为 git 只有在我告诉它合并时才合并。我并不总是希望我的编辑传播到另一个分支，所以有没有办法告诉 git 在合并之前询问？

iow：如果我不小心切换到当前分支中未提交的编辑，如何告诉 git 防止我搞砸另一个分支？

```
[on branch:foo]
$ echo test >> main.c

[on branch:foo]
$ cat main.c 
#include <stdio.h>

int main void (int argc, char **argv)
{
   printf ("Hello world!\n");
   return (0);
}
test

[on branch:foo]
$ git checkout master
M       main.c
Switched to branch 'master'

[on branch:master]
$ cat main.c 
#include <stdio.h>

int main void (int argc, char **argv)
{
   printf ("Hello world!\n");
   return (0);
}
test

[on branch:master]
$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:18:56.870

M 代表修改后的意思，您的工作目录中有修改后的版本。AKA 您有尚未提交的更改。

当您更改分支时，您未提交的更改会随之而来。如果您想更改分支，但还没有准备好提交它们，您可以使用它们来存储它们，然后使用`git stash`它们来恢复它们`git stash pop`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:33:01.697

这取决于您想对更改执行什么操作。

如果你想把它们扔掉，请使用`git checkout -f master`

如果您想保存它们以供以后使用，`git stash`则可以清理工作树并`git pop`随时随地再次应用更改。

如果您希望更改保留在分支中，只需`git commit`更改之前的`git checkout master`.

# c# - 是否可以使用并行端口对 LCD 20X2 显示器进行编程？

> ID：10625973
> 
> 赞同：1
> 
> 时间：2012-05-16T20:11:24.627
> 
> 标签：c#, .net, lcd, parallel-port

我想使用 C# 使用 LCD DISPLAY，在搜索时我意识到有几个人使用 PICS 来执行此操作，我只想知道这是否可以使用这种语言？

如果可能的话，一些与 this.c 相关的信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:14:14.017

是的，这是可能的。请注意，理想情况下，您需要使用带有并行控制器的 LCD。

该项目正是您所描述的示例：http: [//www.codeproject.com/Articles/5081/IO-Ports-Uncensored-Part-2-Controlling-LCDs-Liqui](http://www.codeproject.com/Articles/5081/I-O-Ports-Uncensored-Part-2-Controlling-LCDs-Liqui)

作者建议了一些可以在这种情况下工作的 LCD 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T13:58:25.560

如果您想手动输入（按位）检查显示器的命令响应，您可以使用[www.berndjager.de/LPT-Display/overview.htm中的“LPT-Display.exe”（适用于 Windows）](http://www.berndjager.de/LPT-Display/overview.htm)

# jquery - 用于嵌入页面中控件的 Jquery 移动选择器

> ID：10625975
> 
> 赞同：0
> 
> 时间：2012-05-16T20:11:31.820
> 
> 标签：jquery, mobile, css-selectors

我在一个 html 页面中有多个数据角色页面，我很难访问 div 标签来设置来自`$('#myPage').live`事件/方法的文本、html 等。我已经尝试过`$('#myPage #myControl')`了`$('#myControl')`，但都没有工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:14:09.943

```
$('body').on('click', '#myPage', function() {
  // do you code
  $(this).text('Clicked');
  // if you want to add text/html to #myControl then try
  $('#myControl', this).text('Clicked');
}); 
```

# java - Java - socket.isConnected 使用端口 80 对任何 ip 地址返回 true

> ID：10625976
> 
> 赞同：1
> 
> 时间：2012-05-16T20:11:35.963
> 
> 标签：java, sockets, telnet

我正在尝试通过使用 与本地网络上的设备建立通信`Socket`，并使用该方法验证连接`Socket.isConnected()`- 看起来很简单，但我遇到了一些奇怪的行为。

目前，我使用无参数`Socket()`构造函数实例化一个未连接的套接字，然后在准备好后连接到服务器（位于设备的端口 80 上）。这是代码片段：

```
deviceSocket = new Socket();
...
SocketAddress deviceSocketAddress = new InetSocketAddress(hostName, portNum);
deviceSocket.connect(deviceSocketAddress);
if (deviceSocket.isConnected()){
     System.out.println("Connected to "+hostName+":"+portNum);
} 
```

如前所述，`portNum`我必须在设备上连接的 80 是 80，但无论`hostName`提供什么，它**总是**返回`true`. 如果我给出一个 10.0.1.115 的 IP 地址（这是设备的地址），我得到的结果与我提供 10.0.1.114 时的结果相同，甚至是像 13.2.5.2 这样的虚假地址。

我已经做了一些研究，发现如果套接字已成功连接，该`Socket.isConnected()`方法将返回`true`，但这不是我的问题，我确保在每种情况下我都从一个全新的未连接套接字开始.

我决定把我的问题带到 telnet 上，我在其中发现了一些非常奇怪的东西。如果在`telnet xxx.xxx.xxx.xxx 80`命令提示符下发出命令，它**总是会**打开一个空白页面，该页面会挂起一段时间，然后退出到命令提示符，而不是给出适当的错误消息（假设端点确实不存在）

```
Connecting to 13.2.5.2... Could not open connection to the host, on port 82: Connect failed 
```

（此外，还有一些奇怪的事情，使用端口 81 的行为方式相同，只有当我使用 82 或其他随机端口时，连接才会失败）

所以我想我偶然发现了一个有趣的问题，但我们很快就会看到......

在此先感谢您的所有回复！

-M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:38:50.950

我无法复制这种行为，但这是一个猜测。

您的防火墙允许端口 80 (http) 和 81（通常用作 http 替代）。这些端口尝试，然后在超时后无法连接。防火墙中未打开的其他端口（如 82）会立即被拒绝。

# asp.net-mvc-3 - 查看未将下拉列表选择的值绑定回模型

> ID：10625977
> 
> 赞同：2
> 
> 时间：2012-05-16T20:11:41.207
> 
> 标签：asp.net-mvc-3, razor

我正在寻找一种将模型中的枚举绑定到下拉列表的方法。我找到[了这篇](https://stackoverflow.com/questions/388483/how-do-you-create-a-dropdownlist-from-an-enum-in-asp-net-mvc)文章并使用了第二个答案中的代码，它在创建下拉列表时效果很好。但是，当我提交表单时，它总是将模型与枚举的第一个值一起传回。

枚举（这包含在我的模型中）：

```
public LayoutType Layout;
public enum LayoutType
{
    Undefined = 0,
    OneColumn = 1,
    TwoColumn = 2,
    ThreeColumn = 3
} 
```

Html 辅助方法：

```
private static Type GetNonNullableModelType(ModelMetadata modelMetadata)
    {
        Type realModelType = modelMetadata.ModelType;

        Type underlyingType = Nullable.GetUnderlyingType(realModelType);
        if (underlyingType != null)
        {
            realModelType = underlyingType;
        }
        return realModelType;
    }

    private static readonly SelectListItem[] SingleEmptyItem = new[] { new SelectListItem { Text = "", Value = "" } };

    public static string GetEnumDescription<TEnum>(TEnum value)
    {
        FieldInfo fi = value.GetType().GetField(value.ToString());

        DescriptionAttribute[] attributes = (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute), false);

        if ((attributes != null) && (attributes.Length > 0))
            return attributes[0].Description;
        else
            return value.ToString();
    }

    public static MvcHtmlString EnumDropDownListFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression)
    {
        return EnumDropDownListFor(htmlHelper, expression, null);
    }

    public static MvcHtmlString EnumDropDownListFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression, object htmlAttributes)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        Type enumType = GetNonNullableModelType(metadata);
        IEnumerable<TEnum> values = Enum.GetValues(enumType).Cast<TEnum>();

        IEnumerable<SelectListItem> items = from value in values
                                            select new SelectListItem
                                            {
                                                Text = GetEnumDescription(value),
                                                Value = value.ToString(),
                                                Selected = value.Equals(metadata.Model)
                                            };

        // If the enum is nullable, add an 'empty' item to the collection
        if (metadata.IsNullableValueType)
            items = SingleEmptyItem.Concat(items);

        return htmlHelper.DropDownListFor(expression, items, htmlAttributes);
    } 
```

看法：

```
@Html.EnumDropDownListFor(model => model.Layout) 
```

在呈现视图时，下拉列表按预期完全填充，并选择了正确的值。但是当我提交一个 POST 并将值传回我的控制器时，我对 Model.Layout 的值始终是“未定义”。任何帮助将不胜感激！谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T18:48:41.043

如果您使用的是 VB.Net - MVC4- Razor 这个答案与 Frigik 几乎相同（感谢 Frigik）

在您的模型中创建两个字段，一个是保存 SelectedItem 的字段（这里是字符串的 TagType），第二个是下拉值（TagTypeList）

## 模型类- Tag.vb

```
Imports System.Web.Mvc

Private _tagType As String
Private _tagTypeList As List(Of SelectListItem)

Public Property TagType() As String
        Get
            Return _tagType
        End Get
        Set(ByVal value As String)
            _tagType = value
        End Set
End Property

Public Property TagTypeList() As List(Of SelectListItem)
        Get
            Return _tagTypeList
        End Get
        Set(value As List(Of SelectListItem))
            _tagTypeList = value
        End Set
    End Property

'In the constructor

Sub New()
        TagTypeList = CommonUtility.LoadDropDownByName("TAGTYPE")
End Sub 
```

## 在 CommonUtility 类中 - CommonUtility.vb

```
Imports System.Web.Mvc
Imports System.Collections.Generic

Public Shared Function LoadDropDownByName(ByVal DropDownName As String) As List(Of SelectListItem)
        Dim dt As DataTable
        Dim ds As DataSet
        Dim results As List(Of SelectListItem) = Nothing
        Try
            ds = obj.LoadDropDown(DropDownName)   'Pass the dropdown name here and get the values from DB table which is - select ddlId, ddlDesc from <table name>
            If Not ds Is Nothing Then
                dt = ds.Tables(0)
                If (dt.Rows.Count > 0) Then
                    results = (From p In dt Select New SelectListItem With {.Text = p.Item("ddlDesc").ToString(), .Value = p.Item("ddlId").ToString()}).ToList()
                End If
            End If
        Catch ex As Exception
        End Try
        Return results
    End Function 
```

## 在视图中

```
@Html.DropDownListFor(Function(x) x.TagType, Model.TagTypeList, "", New With {.id = "ddlTagType",.class = "dropDown", .style = "width: 140px"}) 
```

这里第三个参数（可选）为空，它将在下拉列表中插入第一个为空的项目。第一个参数是 selectedItem，一旦值已经存在于 DB 表中，它有助于填充。

希望这对使用 VB.Net 的人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:18:13.397

在您的模型中创建两个字段，一个应该保存选定项目（SelectedItem）第二个下拉值（GroupNames）

```
 public string SelectedItem { get; set; }

  [Required]
  public IEnumerable<SelectListItem> GroupNames { get; set; } 
```

然后在构造函数中填写 GroupNames 例如

```
GroupNames = layer.GetAll().Select(p => new SelectListItem
                                                        {
                                                            Value = p.Id.ToString(CultureInfo.InvariantCulture),
                                                            Text = p.Name,
                                                            Selected = p.Id == someEntity.someFK
                                                        });
            SelectedItem = GroupNames.Where(p => p.Selected).Select(p => p.Value).Single(); 
```

然后在视图中像这样渲染下拉：

```
 @Html.DropDownListFor(x => x.SelectedItem, Model.GroupNames) 
```

这就是 SelectedItem 字段中的所有选定值都应与模型一起提供。

# linux - 自动设置目录中创建的文件的权限

> ID：10625981
> 
> 赞同：0
> 
> 时间：2012-05-16T20:11:50.490
> 
> 标签：linux, file, permissions, directory

我想在我的 Linux 机器中拥有一个具有 777 权限的目录，但是放置（复制/移动）其中的任何文件都需要自动设置 666 权限。换句话说，在 Linux 中是否有可能有一个目录，其中放置的任何文件都会自动变为不可执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:14:13.947

`noexec`您可以使用该标志挂载文件系统；即使其权限另有说明，此类系统中的任何文件都将不可执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:03:25.250

这样做的一个好方法是使用“umask”内置，这会影响当前 shell 环境的文件创建掩码，您可以使用

```
umask -S 
```

因此，要创建具有特定掩码的文件，您可以执行以下操作：

```
mask_for_file_creation="u=rw,g=rw,o=rw"
curr_mask=$(umask -S)
umask $mask_for_file_creation
#create files here
umask $curr_mask 
```

提供掩码作为 umask 的第一个参数将掩码设置为该值。

# php - PHPMailer：“无法连接到 SMTP 主机”

> ID：10625991
> 
> 赞同：1
> 
> 时间：2012-05-16T20:12:18.037
> 
> 标签：php, smtp, phpmailer

```
$email_message = "Form details below.\n\n";

function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
}

$email_message .= "Full Name: ".clean_string($_POST['full_name'])."\n";
$email_message .= "Email: ".clean_string($_POST['email'])."\n";
$email_message .= "Telephone number: ".clean_string($_POST['telephone'])."\n";
$email_message .= "Message: ".clean_string($_POST['comments'])."\n";

$mail             = new PHPMailer();
$body             = $email_message;
$body             = str_replace('\\', '', $body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->SMTPAuth   = true;             // enable SMTP authentication
$mail->SMTPSecure = "ssl";            // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com"; // sets GMAIL as the SMTP server
$mail->Port       = 465;              // set the SMTP port for the GMAIL server
$mail->Username   = "xxx@gmail.com";  // GMAIL username
$mail->Password   = "XXXXXX";         // GMAIL password

$mail->SetFrom('from-email@domain.com', 'First Last');

$mail->Subject    = "Imperia";

$mail->AltBody    =                   // optional, comment out and test
    "To view the message, please use an HTML compatible email viewer!";

$mail->MsgHTML($body);

$address = "xxx@gmail.com";
$mail->AddAddress($address, "To Name");

if(!$mail->Send()) {

    echo "<font color='red'> Message error </font>". $mail->ErrorInfo;
} else {
    echo "<font color='red'> Message sent </font>";
} 
```

我正在使用此代码尝试使用 SMTP 发送电子邮件，但出现错误：

> SMTP 错误：无法连接到 SMTP 主机

谁能告诉我这里有什么问题？我找不到解决此问题的方法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-05T14:46:03.433

我也遇到了这个问题，daemoni 的解决方案对我有用。更具体地说，我将代码更改为：

```
$mail->Host = gethostbyname("smtp.gmail.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T00:35:37.207

昨天我遇到了类似的问题，原来 smtp.gmail.com 正在解析为 IPv6 地址，然后从那里开始一切都或多或少地被破坏了。

我的解决方法是输入 IPv4 地址而不是 smtp.gmail.com

（在我的情况下是 173.194.79.108，我不确定这是否是全球性的，所以可能先 ping 以获取 IP）

它是一个临时解决方案，但可能会工作很长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:45:38.380

“无法连接到 SMTP 主机”表示您没有从源服务器到目标服务器的连接，在本例中为 smtp.gmail.com。

可能的原因是

*   防火墙阻止
*   PHP 不允许建立这样的连接

如果您完全可以在端口 465 连接到 smtp.gmail.com（从托管您的 PHP 代码的服务器），请使用例如 telnet 进行测试。

另外，我假设您已[启用 required extensions](https://stackoverflow.com/questions/6168882/phpmailer-to-use-gmail-as-smtp-server-could-not-connect-to-smtp-host-mailer-err)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T20:59:58.273

```
$mailer->Host = 'ssl://smtp.gmail.com:465'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-22T13:53:18.437

有类似的错误，必须在 gmail 帐户中打开“访问不太安全的应用程序”功能。

您可以在帐户设置中找到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-31T02:34:34.510

检查这些东西

1.  检查 php.ini 行 extension=php_openssl.dll
2.  关闭防火墙。它可能会阻止 ssl 连接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T03:19:48.260

检查 php.ini 行 extension=php_openssl.dll 并关闭防火墙。它可能会阻止 ssl 连接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-01T18:08:37.063

从 whm 禁用 SMTP 限制并尝试

# c++ - 使用模板化适配器编译错误作为运算符重载实例的 rhs

> ID：10625994
> 
> 赞同：3
> 
> 时间：2012-05-16T20:12:23.517
> 
> 标签：c++, templates, compiler-errors, operator-overloading

我一直在尝试使用模板化适配器来启用重载运算符。我收到一个编译错误（gcc 4.5.2），这对我来说似乎很矛盾。我想知道为什么以及如何解决它。下面是说明问题的简化代码。

```
// The adapter
template <typename T>
class A {
    T t;
public:
    A(T t_) : t(t_) {}
};

// Utility function to return an adaptor
template <typename T>
A<T> make_A(T t) {
    A<T> a(t);
    return a;
}

// The operator overload on the adapter
template <typename T>
A<T> &operator<<(A<T> &a, int) {
    return a;
}

// Shows use case
int main(int,char**) {
    auto aa = make_A(1);
    aa << 2;        // Compiles

    // Desired use:
    make_A(4) << 5; // Compile Error
} 
```

错误消息：

```
main_operatorinsert.cpp: In function ‘int main(int, char**)’:
main_operatorinsert.cpp:28:22: error: no match for ‘operator<<’ in ‘make_A [with T = int](4) << 5’
main_operatorinsert.cpp:18:11: note: candidate is: A<T>& operator<<(A<T>&, int) [with T = int] 
```

为什么行“aa << 2;” 编译，其中行“make_A(4) << 5;” 才不是？make_A 返回与 aa 相同的类型。为什么编译器会出现不匹配？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:16:41.613

`make_A`返回一个*rvalue*，但您`operator<<`需要一个非常量*左值*作为第一个参数。你需要围绕这个重新设计一点，如果你真的需要支持`make_A(4) << 5;`你可以创建`operator<<`一个成员函数，但要注意从它返回一个*左值*引用是危险的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:15:58.900

您不能将临时 ( `make_A(4)`) 绑定到非常量左值引用。

您可以尝试将其作为`const`参考，或者只是避免临时使用。在 C++11 中，您可以使用右值引用。

请参阅：[为什么非常量引用不能绑定到临时对象？](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object)

# silverlight - 重新显示子窗口时项目集合为空

> ID：10625995
> 
> 赞同：0
> 
> 时间：2012-05-16T20:12:25.087
> 
> 标签：silverlight, data-binding, ria

有一个我无法解决的奇怪问题。我有一个 gridview，它有一个按钮来编辑用户的角色列表，该列表显示在子窗口中。该窗口有一个绑定到 ria 查询的列表框。第一次显示子窗口时一切正常。但是当多次打开它时，列表框的项目集合是空的，所以复选框设置不正确。为什么项目集合是空的？

xml:

```
<ListBox Name="lstRoles" HorizontalAlignment="Left" Height="406" Margin="10,10,0,0" VerticalAlignment="Top" Width="372" Loaded="lstRoles_Loaded_1" ItemsSource="{Binding Data, ElementName=rolesQueryDomainDataSource, Mode=OneWay}" ScrollViewer.VerticalScrollBarVisibility="Visible">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Name="spRoles">
                    <CheckBox x:Name="chkRoleSelected" Unchecked="chkRoleSelected_Unchecked_1" Checked="chkRoleSelected_Checked_1"/>
                    <TextBlock x:Name="txtRoleId" Visibility="Collapsed" Text="{Binding RoleId}"/>
                    <TextBlock Text="{Binding Description}"/>
                </StackPanel>
            </DataTemplate>                
        </ListBox.ItemTemplate>
    </ListBox> 
```

代码隐藏：

```
private void FillListBox(ListBox lb)
    {
        MembershipContext context = new MembershipContext();
        EntityQuery<aspnet_UsersInRoles> query = from c in context.GetAspnet_UsersInRolesQuery() where c.UserId == _crmContact.UserId select c;
        var loadOp = context.Load(query);
        loadOp.Completed += (opSender, eArgs) =>
        {
            var op = opSender as LoadOperation;
            List<aspnet_UsersInRoles> rowData = ((LoadOperation<aspnet_UsersInRoles>)op).Entities.ToList();
            var index = 0;

            foreach (var item in lb.Items)
            {
                var role = item as RolesQuery;
                var lbi = lb.ItemContainerGenerator.ContainerFromIndex(index) as ListBoxItem;
                CheckBox chk = FindDescendant<CheckBox>(lbi);
                var x = (from r in rowData where r.RoleId == role.RoleId select r).FirstOrDefault();
                if (x != null)
                {
                    chk.IsChecked = true;
                }
                index++;
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:25:10.047

你可能有时间问题。在 DomainDataSource 完成加载后尝试调用 FillListBox。

# php - MySQL - 跨两个表的最佳实践

> ID：10625996
> 
> 赞同：1
> 
> 时间：2012-05-16T20:12:30.243
> 
> 标签：php, mysql, sql, select

我有两张桌子。每一个都填充了大约 50K 条记录。两者都有一个共同的领域。我想要公共字段匹配的两个表的记录。所以我使用下面的 SQL 代码。问题是查询现在已经运行了 20 分钟，但什么也没发生。我觉得很奇怪，它花了这么多时间。我想知道是否有更好的方法来实现我的目标。预先感谢您的回复。

我的 SQL 代码：

```
Select * from tableOne T1, tableTwo T2 
Where T1.name = T2.name 
```

顺便说一句，我对 php 解决方案持开放态度（循环或其他更好的...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:15:55.513

两件事情：

1.  您需要确保两个表中的*name*列都有索引。否则，查询将不得不扫描每个表的每一行以查找匹配项。

2.  理想情况下，索引应该具有您要在查询中选择的“包含的列”。否则查询将无法完全使用索引，而必须返回表并为每一行手动提取其他列。这意味着您应该考虑在查询中仅选择您需要的列（而不是 *），并将这些列作为包含列添加到索引中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:18:59.370

试试这个：

```
select *
from tableOne t1
inner join tableTwo t2 on t1.name = t2.name 
```

尽管我怀疑这会有所作为，但尝试不会受到伤害。不建议使用 `from tableOne t1, tableTwo t2`，因为你在隐式地制作笛卡尔积！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:16:00.717

我相信最好使用[Join](http://www.w3schools.com/sql/sql_join.asp)

像这样的东西：

```
SELECT *
FROM tableOne
INNER JOIN TableTwo
ON tableOne.name=TableTwo.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:16:04.017

应该是一个内部连接，以从两个表中获取连接名称的行。

```
SELECT t1.*, t2.* FROM table1 t1 INNER JOIN table2 t2 ON t1.name = t2.name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T20:18:16.803

MySQL Inner Joins - 你在那里发生的事情 - 非常有效。50K 条记录根本不算多，即使对于有几百万条记录的一对表来说，20 分钟也长得离谱。尝试重新启动查询，或者只是重新启动整个 Web 服务器。查询本身是否正常（尽管最好从每个表中准确指定您想要的列，即使您想要除一个之外的每一列）。如果您没有索引，添加索引也是一个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T21:00:41.177

你的表的存储引擎是什么？如果是 InnoDB，您需要在这两个表之间设置一个外键——这肯定会解决您的性能问题。

# .net - 避免 `Control.Invoke` 和析构函数之间的死锁，重新访问 UserControl

> ID：10625999
> 
> 赞同：0
> 
> 时间：2012-05-16T20:12:55.867
> 
> 标签：.net, winforms, deadlock, invoke, dispose

[我遇到了我在这里](https://stackoverflow.com/questions/7520663/windows-forms-is-there-a-way-to-wait-for-all-pending-invokes-to-a-control-to-en)询问的问题的变体。而不是类扩展`System.Windows.Form`，我有一个类扩展`System.Windows.UserControl`，它没有`FormClosing`事件。

我考虑向`Close`用户控件添加一个方法，在该方法中我告诉本机线程停止。当它停止时，它会向用户控件引发一个事件，该事件会调用`Dispose`自身。这种方法的问题是`Dispose`从对象调用 dispose（自杀？）似乎是一种不好的做法，我不得不编写一个什么都不做的终结器（以避免双重处置），这感觉更糟......

建议？

**更新：**我的用户控件位于 extends 类`System.Windows.Forms.ToolStripControlHost`中，该类的实例位于主应用程序表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:16:36.450

我会向用户控件添加某种方法并在表单`FormClosing`事件中调用它......

用户控件中的方法将被阻塞，因此在处理完成之前它不会返回。

但是，您可以在 Closing 事件中取消关闭，禁用表单，在后台执行某些操作，完成后，从代码中关闭表单。例如：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    // if disposed, close as usual
    if (myControl == null || myControl.Disposed) return;
    // disable the form so nothing can be done while
    // were asynchronously disposing the form...
    this.Enabled = false;
    e.Cancel = true;
    var context = TaskScheduler.FromCurrentSynchronizationContext();
    Task.Factory.StartNew(()=>myControl.Dispose())
        .ContinueWith(a=>Close(), context);
} 
```