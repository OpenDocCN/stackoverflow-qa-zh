# StackOverflow 问答 10661000-10661999

# jquery - 滚动上的淡入和淡出

> ID：10661001
> 
> 赞同：2
> 
> 时间：2012-05-18T23:35:07.893
> 
> 标签：jquery

我试图制作如果 scrollTop > 200 时出现的按钮并在 scrollTop < 200 时隐藏。但是我希望按钮淡入并出现问题。

这是我的javascript：

```
$(window).scroll(function(){
  if($(this).scrollTop() > 200) {
    $(".button").removeClass("opacity");
  }
  else {
    $(".button").addClass("opacity");
  }; 
```

和CSS：

```
.opacity { opacity:0; } 
```

使用这样的代码，显示/隐藏功能可以正常工作，但不能使其淡入。我还尝试将我的 jscript 更改为：

```
$(window).scroll(function(){
  if($(this).scrollTop() > 200) {
    $(".button").animate({"opacity":"1"}, 1500);
  else {
    $(".button").animate({"opacity":"0"}, 1500);
  }; 
```

但是有了这个它根本不起作用。

我尝试的最后一件事是fadeIn 和fadeOut 属性，它起作用了，但是这个按钮下的其他按钮在它显示/隐藏后改变了它们的位置（按钮是位置：固定；随着页面滚动），使得效果不是很好..

有什么想法可以让它淡入淡出吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T23:50:31.397

您的代码看起来不错，但是我最好添加`stop`方法并缩短持续时间。这应该可以正常工作：

```
$(window).scroll(function() {
    if ($(this).scrollTop() > 200) {
        $(".button").stop().animate({
            opacity: 1
        }, 500);
    } else {
        $(".button").stop().animate({
            opacity: 0
        }, 500);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/qXunw/](http://jsfiddle.net/qXunw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:22:25.833

Vision 的回答似乎奏效了。我唯一要添加的是一个布尔值，用于跟踪按钮动画的时间。

```
 var animating = false; 
```

这样你的 if 语句就会像

```
 if ($(this).scrollTop() > 200 && !animating) { ... 
```

目的是，现在动画的方式随着用户不断滚动而继续重置，每次间隔设置为 1.5 秒。因此，在您停止滚动之前，该按钮不会完全淡入，这可能不是您想要的。要解决此问题，您需要在设置淡入时将“动画”布尔值设置为 true，然后在回调函数中将其设置回 false。

# ruby-on-rails - Rails 3 教程 Michael Hartl - 第 9.4.1 节重新访问 attr_accessible - 恶意 PUT 请求

> ID：10661004
> 
> 赞同：1
> 
> 时间：2012-05-18T23:35:31.293
> 
> 标签：ruby-on-rails, curl, attr-accessible

我是 Rails 初学者，目前正在阅读 Michael Hartl 的 Rails 3 教程，并且有一个我非常好奇的问题：
在通过“faker”创建管理员用户和其他 99 个普通用户的上下文中，Hartl 解释了为什么它会将“：admin”添加到用户模型中的 attr_accessible 并因此将“admin：true”添加到“faker”测试代码中的初始化哈希是一个坏主意。相反，他解释说应该使用“toggle!(:admin)”并避免在可访问属性中添加“:admin”，否则恶意用户可以直接发送 PUT 请求，如“PUT /users/17?admin=1”。 [http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec:revisiting_attr_accessible](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec:revisiting_attr_accessible)

因此，按照 Hartl 的建议，我的管理员布尔值现在是安全的，但是我的其他用户属性（例如姓名、电子邮件）被定义为可访问属性呢？这是否意味着恶意用户可以通过类似于上述的 PUT 请求轻松更改这些属性？在教程中，Hartl 谈到了一个名为 curl 的命令行工具，它可以发出这样的 PUT 请求表单。我真的不想用我的示例应用程序尝试这个，我的问题只是，我是否忽略了某些东西或者可能是恶意 PUT 请求，例如“put /users/17?name='new_name'”？

如果有人会回答我的问题，请提前感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T23:39:07.267

是的，它们可以通过 PUT 进行更改，但通常这就是您想要的。**您仍然应该检查当前用户是否有权在用户上设置这些字段。**

管理员标志等是特殊情况，因为您希望能够明确设置它们，而不是批量分配。您不希望用户能够将自己设置为管理员，但让用户更改自己的电子邮件地址或姓名或其他任何应该没问题的东西。

# android - 使用活动列表管理 sqlite 数据库

> ID：10661006
> 
> 赞同：1
> 
> 时间：2012-05-18T23:35:40.873
> 
> 标签：android, sqlite, listview, android-activity

好的，我有一个以 id 列作为时间戳的数据库，我从数据库中创建了一个活动列表。我想使用列表来管理数据库（删除行），但问题是我不想查看整个时间戳，在每一行中我只会把时间和一些信息放在一起，我想对列表进行分组，就像按字母、日期分组的联系人一样。

首先，如何在活动列表中进行分组？（对输出列表进行分组而不是分贝）其次，实现这一点的最佳方法是什么？当用户选择一个项目并确认删除时，我应该从数据库中删除它，但我只有部分时间戳......（我到数据库的唯一链接是时间戳 - 我实际上不知道将它存储在列表中的哪个位置，我不想把它作为字符串放在文本视图中，做一个子字符串来取回它 - 还有另一种方法吗？）

我试图在网上搜索一些例子，但我只找到了一个简单的例子。

谢谢 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:43:59.427

?

我认为您要做的是创建一个由时间戳标识的任务数据库。您可能不想使用时间戳作为行的唯一 ID。相反，在创建数据库时使用整数并将其限定为“PRIMARY KEY”。

将列表分组？我不确定您为什么要在数据库结构中执行此操作。更常见的做法是在*输出*中对列表进行分组，并将 db 本身保持在尽可能平坦的结构中。

显示任务列表时检索主键。当用户点击一个任务时，使用*主键*选择要删除的任务。您不必显示主键；它充当显示信息和数据库行之间的幕后“链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:00:59.427

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

我应该使用游标适配器来管理数据库。

而这个用于分组列表： [http ://code.google.com/p/android-amazing-listview/](http://code.google.com/p/android-amazing-listview/)

感谢您的努力

# facebook - 移动 Web URL 是否足以在 Facebook 应用程序中添加应用程序域？

> ID：10661011
> 
> 赞同：2
> 
> 时间：2012-05-18T23:36:10.927
> 
> 标签：facebook, facebook-apps

当我第一次尝试将应用程序域添加到我的 Facebook 应用程序时，它给出了以下错误。

> 错误您已指定应用程序域但未指定站点 URL 或移动 Web URL 必须从您的站点 URL 或移动 Web URL 派生。

好的。所以我添加了一个移动网络 URL。现在我可以添加一个应用程序域。我点击保存。但是当我回到页面**应用域字段为空时**

但是，如果我填写“使用 Facebook 登录的网站”下的站点 URL 字段，我可以提供应用程序域并且应用程序域字段保持不变。

**所以基本上，要给出一个应用程序域，我必须给出一个站点 URL，即使我没有使用“带有 Facebook 登录的网站”** ，对吗？

# c - WinHTTP 多个异步请求

> ID：10661014
> 
> 赞同：3
> 
> 时间：2012-05-18T23:36:28.853
> 
> 标签：c, winapi, asynchronous, winhttp

我需要从网站的大约 6000 个页面中提取数据。在做了一些研究之后，我决定试一试 WinHTTP。我能够让这个工作，但是我正在同步做事情，所以需要一段时间才能完成。我现在正在尝试异步使用 WinHTTP，但遇到了障碍。我搜索了许多教程和示例，但我只能找到 MSDN 文档，这对于我正在做的事情来说似乎过于复杂。如前所述，我找不到很多资源，所以我继续尝试一下：

```
std::string theSource = "";
char * httpBuffer;
DWORD dwSize = 1;
DWORD dwRecv = 1;

HINTERNET hOpen = 
           WinHttpOpen
           (
               L"Example Agent", 
               WINHTTP_ACCESS_TYPE_NO_PROXY, 
               NULL, 
               NULL, 
               WINHTTP_FLAG_ASYNC
           );

WINHTTP_STATUS_CALLBACK theCallback = 
           WinHttpSetStatusCallback
           (
               hOpen, 
               (WINHTTP_STATUS_CALLBACK) HttpCallback,
               WINHTTP_CALLBACK_FLAG_ALL_NOTIFICATIONS,
               NULL
           );

HINTERNET hConnect = 
           WinHttpConnect
           (
               hOpen, 
               L"example.org",
               INTERNET_DEFAULT_HTTPS_PORT, 
               0
           );

HINTERNET hRequest = NULL;

BOOL allComplete = false;

int theRequest = 1;

while (!allComplete)
{
    if (theRequest == 1)
    {
        hRequest = WinHttpOpenRequest
                   (
                       hConnect,
                       L"GET", 
                       L"example.html",
                       0,
                       WINHTTP_NO_REFERER, 
                       WINHTTP_DEFAULT_ACCEPT_TYPES, 
                       WINHTTP_FLAG_SECURE
                   );

        WinHttpSendRequest
        (
            hRequest, 
            WINHTTP_NO_ADDITIONAL_HEADERS, 
            0, 
            WINHTTP_NO_REQUEST_DATA, 
            0, 
            0, 
            0
        );
    }

    else if (theRequest == 2)
    {
        WinHttpReceiveResponse(hRequest, NULL);
    }

    else if (theRequest == 3)
    {
        WinHttpQueryHeaders
        (
            hRequest, 
            WINHTTP_QUERY_RAW_HEADERS_CRLF, 
            WINHTTP_HEADER_NAME_BY_INDEX, 
            NULL, 
            &dwSize, 
            WINHTTP_NO_HEADER_INDEX
        );

        WCHAR * headerBuffer = new WCHAR[dwSize/sizeof(WCHAR)];

        WinHttpQueryHeaders
        (
            hRequest, 
            WINHTTP_QUERY_RAW_HEADERS_CRLF, 
            WINHTTP_HEADER_NAME_BY_INDEX, 
            headerBuffer, 
            &dwSize, 
            WINHTTP_NO_HEADER_INDEX
        );

        delete [] headerBuffer;

        dwSize = 1;

        while (dwSize > 0)
        {
            if (!WinHttpQueryDataAvailable(hRequest, &dwSize))
            {
                break;
            }

            httpBuffer = new char[dwSize + 1];

            ZeroMemory(httpBuffer, dwSize + 1);

            if (!WinHttpReadData(hRequest, httpBuffer, dwSize, &dwRecv))
            {
                std::cout << "WinHttpReadData() - Error Code: " << GetLastError() << "\n";
            }

        else
        {
            theSource = theSource + httpBuffer;
        }

        delete [] httpBuffer;

        // Parse the source for the data I'm looking for.

        break;

    }
} 
```

下面是我的回调函数：

```
void CALLBACK HttpCallback(HINTERNET hInternet, DWORD * dwContext, DWORD dwInternetStatus, void * lpvStatusInfo, DWORD dwStatusInfoLength)
{
    switch (dwInternetStatus)
    {
        default:
            std::cout << dwInternetStatus << "\n";
            break;

        case WINHTTP_CALLBACK_STATUS_HANDLE_CREATED:
            std::cout << "Handle created.\n";
            theRequest = 1;
            break;

        case WINHTTP_CALLBACK_STATUS_REQUEST_SENT:
            std::cout << "Request sent.\n";
            theRequest = 2;
            break;

        case WINHTTP_CALLBACK_STATUS_RESPONSE_RECEIVED:
            std::cout << "Response received.\n";
            theRequest = 3;
            break;

    }
} 
```

注意：我只提供了我的代码的这一部分，因为它是与我的问题/问题有关的部分。如果缺少变量声明，我深表歉意。

上面的代码对我有用，实际上确实得到了我正在寻找的所需信息，但仅适用于单个页面。到了这一步之后，我意识到当使用这种方法发出多个请求时，我不知道该怎么做。同样，除了 MSDN 文章之外，搜索并没有出现太多，据我所知，这些文章并不是一次发出多个请求的示例。此外，我用来打开/发送/等的 while 循环。基于 theRequest 值的请求似乎是一种糟糕的方式。我也很感激任何其他建议来改进我的代码。

一般来说，这里是我的问题的一个总结：我需要使用 WinHTTP 异步发出大约 6000 个 GET 请求。我不完全确定如何执行此操作，因为我是 WinHTTP 的新手，所以我正在寻找处理多个异步请求的最基本（或可能有效）的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:22:15.960

您将重复您正在做的事情`while (!allComplete) { ... }`并以这种方式发出更多请求。您可以重用`hConnect`，但您需要`WinHttpOpenRequest`为每个资源请求执行此操作。

# ios - 由于 iOS 不允许您在后台运行 JS，是否可以将您的应用程序（活动/运行）保持在前台？

> ID：10661015
> 
> 赞同：0
> 
> 时间：2012-05-18T23:36:35.210
> 
> 标签：ios, cordova, geolocation

我的 phonegap 应用程序通过 watchPosition() 跟踪用户位置，并且该应用程序持续运行很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T23:45:56.407

iOS 提供了一项服务，可将重大位置更改通知您的应用程序。这不是您可以直接在 JavaScript 中访问的内容，但您可以为 PhoneGap 创建一个插件（或只是修改您的应用程序的本机代码）来注册这些通知并在 JavaScript 中调用例程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T23:42:16.000

这将做到：

```
 [UIApplication sharedApplication].idleTimerDisabled = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T02:17:49.307

PhoneGap 等框架存在限制。

如果您需要让它在后台运行，获取位置信息，最好的办法是编写一个原生应用程序，这样您就可以利用 IOS 提供的功能。

您可能需要阅读此内容，以了解应用程序何时可以在后台运行：

[https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T23:43:13.233

理论上你可以在后台运行一个 JS 应用程序，但你首先需要制作一个 PhoneGap 插件来提供对 iOS 后台处理的访问。

# php - 为什么这个正则表达式不适用于文件读取和 PHP？虽然它适用于其他文件

> ID：10661024
> 
> 赞同：3
> 
> 时间：2012-05-18T23:38:03.363
> 
> 标签：php, regex

我有这段代码是为了让我在下载.torrents时更轻松，代码如下，

```
$file = 'http://kat.ph/new/';
if($file = file_get_contents($file)) {
    // RETURN ALL MAGNET URIS FROM FILE
    preg_match_all('/\"magnet\:\?xt\=urn\:btih\:(.*?)\"/x', $file, $magnetURI);
    // FOR EACH MAGNET URI RETURNED
    foreach($magnetURI[1] as $info) {
        echo '<a href="magnet:?xt=urn:btih:' . $info . '">' . $info . '</a><br /><br /><br /><br />';
    }
} else {
    echo '<strong>FAIL</strong>';
} 
```

它应该匹配磁铁 uri 链接并以易于点击的链接将它们返回给我，它适用于其他网站尝试用 替换文件`http://thepiratebay.se/recent/0`，但由于某种原因，示例中的网站无法正常工作？！？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:42:04.253

它对[我有用](http://regexpal.com/?flags=g&regex=%5C%22magnet%5C%3A%5C%3Fxt%5C%3Durn%5C%3Abtih%5C%3A%28.%2a%3F%29%5C%22&input=%3Ca%20title%3D%22Torrent%20magnet%20link%22%20href%3D%22magnet%3A%3Fxt%3Durn%3Abtih%3ACC75C3297A9818E6469C3B4C68AAF494D4EF8C3D%26dn%3Dthe%2Bdictator%2B2012%2Bhd%2B780p%26tr%3Dhttp%253A%252F%252Ftracker.publicbt.com%252Fannounce%22%20onclick%3D%22_gaq.push%28%5B%27_trackEvent%27%2C%20%27Download%27%2C%20%27Magnet%20Link%27%2C%20%27Other%27%5D%29%3B%22%20class%3D%22imagnet%20icon16%22%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fa%3E)，请尝试删除`x`修饰符。

* * *

问题是`file_get_contents()`调用，显然 kat.ph 不喜欢匿名用户代理，如果您尝试输出`$file`变量，您会得到一堆垃圾，例如：

```
��}�r�Ʋ�o�)&\ˑ\@�Aڒ�I���X���8Y;�r �!    �Ĭ���� ϓ����.   ��ey�ĥg�랾��;�u޻��:��Q6����9�Q�[e��E�~vv��J��Z�٬��=5��n-̒>Ũc�Q�O���ip�[s�(cQ&�&amp;�F<�m������T^oD��e��l 7j���e��]K�K�ţ�ݚ�R/ &YG���x��|��gQS�D��dq�����~�ӌ�32�2HS8�,�B��)z��x'4M�S;uq�ӝ0�NH���Z��OG�e5����Q���zhd4<ŋ�u����Ug��o+�� �H�b�8ɼiFY��f0�C���oR��e*t2��x���Մ.߭L�����,�H��7]��Q�q=1fW�   ��"?�!�{O/5��f��IH����[�DO�8Y#i�]i�S�5�R>�,=��SG��_�G��4o�,4�X�XcS� 36����wl�Vr�0D�_I�Ì%�X�*s�Q��$M�s4r| �֎�}$�g`+���0�c#7�'4S&�:|�~� ��$��S�d���y�����8 ��u{���M=P㩑����[oN����?��h`�/ћ}����R|�A � z;�0(�(���Q����=�8���&gt;І[�ㆻF,��]��M����6!��=a4GW�+o���z��o۩s�s    ]�0��H�b�����#�/d��Z�/ԕߌ6�P�|�gE�V���dz�ćz���|�zl�ɗ�)��i���e�$�/"��l�ʟ�) ���K�ʗx��Ʉ��:9'H�$�2�ؓP�,�r/��+Fcmq]�P|���n 
```

尝试将用户代理设置为已知浏览器（通过`file_get_contents()`HTTP 上下文或 CURL）。

# ruby-on-rails - 将redis部署到heroku无法连接

> ID：10661026
> 
> 赞同：19
> 
> 时间：2012-05-18T23:38:26.853
> 
> 标签：ruby-on-rails, heroku, redis, resque

我一直试图让 resque 与 heroku 一起工作。我可以成功地让它在开发模式下工作，但是当我尝试推送到 heroku 时，我得到了

```
Errno::ECONNREFUSED (Connection refused - Unable to connect to Redis on 127.0.0.1:6379): 
```

然后我阅读并关注了[http://blog.redistogo.com/2010/07/26/resque-with-redis-to-go/](http://blog.redistogo.com/2010/07/26/resque-with-redis-to-go/)

我把网站中列出的配置，但得到了以下错误

```
SocketError (getaddrinfo: nodename nor servname provided, or not known): 
```

我把我的初始化程序/resque.rb

```
Resque.after_fork = Proc.new { ActiveRecord::Base.establish_connection }

ENV["redis://redistogo:11111111111111111@lab.redistogo.com:9254/"] ||= "redis://heroku_username:heroku_password@host:9254/"
uri = URI.parse(ENV["redis://redistogo:1111111111111111@lab.redistogo.com:9254/"])
Resque.redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

但是它会引发上述错误。现在在我的开发模式下，我也得到了错误。

我尝试使用我的heroku用户名（我使用heroku的插件），将我的密码输入heroku，并将端口更改为9254。但是我现在不断收到套接字错误。我究竟做错了什么？

帮助将不胜感激。谢谢你

更新。

@凯文

我试过了

```
uri = URI.parse(ENV["my_url_string"] || "redis://localhost:9254/" )
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

在初始化程序/redis.rb 中，但我收到以下错误

```
Errno::ECONNREFUSED (Connection refused - Unable to connect to Redis on 127.0.0.1:6379): 
```

错误中的数字是否重要，即 127.0.0.1:6379？我检查了我的 redis gui 应用程序，还从 heroku 配置中检查了我的端口号是 9254

```
REDISTOGO_URL       => redis://redistogo:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@lab.redistogo.com:9254/ 
```

你有其他配置设置吗？感谢您的帮助！

最后更新。

我修好了它。我简直不敢相信！我的完整解决方案是

```
uri = URI.parse(ENV["REDISTOGO_URL"])
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
Resque.redis = REDIS 
```

逐字。它可以在没有明确设置 url 的情况下工作，因为我猜 heroku 已经尝试为我设置它

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-19T02:19:27.557

对于我的设置，我有`/config/initializers/redis.rb`以下几行：

```
uri = URI.parse(ENV["REDISTOGO_URL"] || "redis://localhost:6379/" )
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

My`REDISTOGO_URL`在我的 heroku 配置中定义。您应该能够通过键入以下内容来验证：

```
heroku config --app my_app 
```

您将在输出中看到`REDISTOGO_URL`

你应该`REDISTOGO_URL`直接从 Redis To Go 复制你的。您可以通过转到 heroku 中的实例并单击 Add Ons -> Redis To Go 来找到它。

这里有几个指针：

1.  从命令行验证您在 heroku 配置中是否有 REDIS_TO_GO URL，就像我在上面演示的那样。
2.  验证 REDIS_TO_GO URL 与 Add Ons -> Redis To Go 配置中分配给该实例的 URL 相同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-19T09:08:57.863

我修好了它。我简直不敢相信！我的完整解决方案是

```
uri = URI.parse(ENV["REDISTOGO_URL"])
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
Resque.redis = REDIS 
```

逐字。它可以在没有明确设置 url 的情况下工作，因为我猜 heroku 已经尝试为我设置它

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-09T04:15:44.170

我得到了同样的东西，所以，基本上 Sidekiq 并没有从 vars 中获取 REDISCLOUD_URL，它是在获取 REDIS_PROVIDER。

```
heroku config:set REDIS_PROVIDER=REDISCLOUD_URL 
```

它就像一个魅力。

# c++ - 如果大小写在括号中，是否需要中断？

> ID：10661028
> 
> 赞同：-4
> 
> 时间：2012-05-18T23:38:48.670
> 
> 标签：c++, c

> **可能重复：**
> [为什么 switch 语句被设计为需要中断？](https://stackoverflow.com/questions/252489/why-was-the-switch-statement-designed-to-need-a-break)

我有这个：

```
switch(i)
{
  case a:
  {
   //code
  }
  case b:
  {
   //code
  }
  case c:
  {
   //code
  }
} 
```

如果`i == a`是，代码会在`b`其中`c`执行还是必须`break;`在每个代码中都放一个？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T23:40:27.960

> `break;`我必须在每个中放一个吗？

是的，如果您只想执行一个案例。或者，其他控制流语句也可以导致`switch`退出，例如`return`或`throw`。

如果您要替换`//code`为 ，`std::cout << "case [x]" << std::endl`则答案将很明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T23:40:31.897

是的，它需要休息才能正常工作。括号仅介绍范围，它们不影响流量控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T23:42:29.150

不是在最后一个，即使这样做是个好习惯。

如果您不`break`输入一个，那么当前案例和所有后续案例将执行到下一次中断、抛出或返回。

`case`这在您希望两个部分执行相同代码的情况下很有用，您可以编写：

```
case a:
case b:
   // ... some code...
   break; 
```

这将为 a 和 b 执行。

# iphone - CGPoint 旋转改变与原点的距离

> ID：10661030
> 
> 赞同：3
> 
> 时间：2012-05-18T23:39:09.737
> 
> 标签：iphone, objective-c, ios, image-processing, cgpoint

我想围绕另一个 CGPoint（蓝色矩形）旋转一个 CGPoint（红色矩形），但它会改变与原点（蓝色矩形）的距离......当我给出 270 的角度时，它会在原点正上方创建一个点但是当我给出 90作为角度值，它从原点下降，但距离也改变了近三倍......我想保持距离不变，并想围绕另一个旋转 CGPoint。请指导 cgpoints 旋转的任何方法...

```
distance = 100;
angle = 270*M_PI/180;    
rotatedPoint.x = initialPoint.x+distance*cos(angle);
rotatedPoint.y = initialPoint.y+distance*sin(angle);
    //rotatedPoint.x = initialPoint.x+tan(angle);

[test setCenter:rotatedPoint];   
[test setBackgroundColor:[UIColor redColor]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:46:06.103

当涉及到旋转、平移和缩放时，CGAffineTransform 是一个方便的工具。为了确保一个点正确旋转，您必须将其平移到原点，旋转它，然后再平移回来。

要完成您的转换，如下所示应该可以解决问题：

```
CGPoint pointToRotate = CGPointMake(30, 30);
float angleInRadians = DEGREES_TO_RADIANS(90);
CGPoint distanceFromOrigin = CGPointMake(0 - pointToRotate.x, 0 - pointToRotate.y);

CGAffineTransform translateToOrigin = CGAffineTransformMakeTranslation(distanceFromOrigin.x, distanceFromOrigin.y);
CGAffineTransform rotationTransform = CGAffineTransformMakeRotation(angleInRadians);
CGAffineTransform translateBackFromOrigin = CGAffineTransformInvert(translateToOrigin);

CGAffineTransform totalTransform = CGAffineTransformConcat(translateToOrigin, rotationTransform);
totalTransform = CGAffineTransformConcat(totalTransform, translateBackFromOrigin);

pointToRotate = CGPointApplyAffineTransform(pointToRotate, totalTransform); 
```

这里是关于 CGAffineTransform 的文档，如果您想进一步查看它：http: [//developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)

如果这不能解决您的问题，请告诉我您是否需要其他任何东西！

# python - python获取和重用会话cookie帮助好吗？

> ID：10661032
> 
> 赞同：0
> 
> 时间：2012-05-18T23:39:15.043
> 
> 标签：python, urllib2, session-cookies

所以我正在尝试从 12bet.co.uk 上抓取数据。我有以下针对我想要的信息的python代码：

```
import urllib2
sid = 'lgvvtb45xlqtwe45wjp3wy45'  # value copied from a Firefox session
url = 'http://eu.12bet.co.uk/EuroSite/Match_data.aspx?Scope=Sport&Id=1&Sport=1&Market=d&RT=W&Game=0&OddsType=1'
http_req_data = None
http_req_header = {'User-Agent' : 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0',
    'Accept' : 'text/html',
    'Accept-Language' : 'en-us,en;q=0.5',
    'DNT' : '1',
    'Referer' : 'http://eu.12bet.co.uk/EuroSite/Euro_index.aspx',
    'Cookie' : 'MuSou_eu=20110303; iom_territory=UK; LangKey=en; OddsType_12BETUUS01015=1; ASP.NET_SessionId='+sid+'',
    'Connection' : 'keep-alive'}
web_req = urllib2.Request(url, http_req_data, http_req_header)  # create request object
web_resp = urllib2.urlopen(web_req)  # open the request object and return a handle
print web_resp.info() 
```

当我从 Firefox 会话复制/粘贴 sid 的值时，这很好用（内容长度很大 = 返回了很多好的内容）。但是，如果我尝试以编程方式获取 sid 的值，首先运行类似以下代码的内容，然后当我使用以下代码找到的 sid 值运行上述代码时，我不会得到任何内容：

```
import urllib2, re
url='http://eu.12bet.co.uk/EuroSite/Euro_index.aspx'
http_req_data = None
http_req_header = {'User-agent' : 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0',
    'Accept' : 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Language' : 'en-us,en;q=0.5',
    'DNT' : '1',
    'Connection' : 'keep-alive'}
web_req = urllib2.Request(url, http_req_data, http_req_header)  # create request object
web_resp = urllib2.urlopen(web_req)  # open the request object and return a handle
print '==== HEADERS ===='
print web_resp.info()
headers = dict(web_resp.info())
cookies = headers['set-cookie']
print '==== MISC ===='
print "cookies>"+cookies+"<"
sid = re.search('ASP.NET_SessionId=(\w+)',cookies).group(1)
print "sid>"+sid+"<" 
```

我已经为此工作了很多年，但我无法解决。它让我很头疼。有人能告诉我这里有什么问题吗？许多thanx提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:49:38.500

在第一个响应中还有另一个 cookie 值，每次都不同，需要捕获并与以后的每个请求一起发回以保持状态/一致性。

# ios - MPMoviePlayerController 怪癖？用户退出“完成”后再次播放视频时无法点击其视图

> ID：10661040
> 
> 赞同：0
> 
> 时间：2012-05-18T23:41:06.743
> 
> 标签：ios, controls, mpmovieplayercontroller

A 类使用 MPMoviePlayerController 加载电影。我调用 prepareToPlay 并等待显示电影，直到我得到 loadState = 3。如果我播放视频并让它走到最后，然后再次播放，一切正常。但是，如果我以“完成”结束视频，从而进入 MPMovieFinishReasonUserExited 退出原因，然后我再次重播视频，我可以点击控件但不能点击视频屏幕。当控件消失时，由于视图没有响应，因此无法再次取回控件。这只发生在 iOS 5.1 而不是 iOS 4.3（模拟器和实际设备）。有任何想法吗？

编辑：

我想通了一件事。我对 MPMoviePlayerController 视图的子视图进行了一些调试，我发现它第一次播放时我们有：

```
<MPSwipableView: 0x9b671f0; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x9b67290>> 
```

而在第二次播放之后，我们有：

```
<MPSwipableView: 0x9b671f0; frame = (0 0; 320 480); hidden = YES; autoresize = W+H; layer = <CALayer: 0x9b67290>> 
```

为什么它隐藏了寄存器触摸的视图？这是一个错误吗？

编辑2：

不幸的是，上述观察似乎无关紧要。我手动将隐藏设置为否，我仍然无法让它响应水龙头。当我重新加载电影时，没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:02:07.767

我遇到了同样的问题并遇到了这篇文章。我发现除非在重播视频之前文件的 URL 发生更改，否则控件不会在点击时重新出现。为了解决这个问题，我简单地释放了以前的 MPMoviePlayerController 并分配并初始化一个新的。

将 MPMoviePlayerController 的文件 URL 更改为其他内容，然后返回视频也可能有效，但我尚未对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:20:19.720

`controlStyle`一旦应用程序进行了多余的更改，我就看到了这个问题。检查您的设置/拆卸事件处理程序。确保只设置尚未激活的 controlStyle。

```
if (player.controlStyle != newControlStyle)
{
    player.controlStyle = newControlStyle;
} 
```

这似乎没有任何意义，但请放心，`MPMoviePlayerController`如果不这样做，它确实会触发错误。

# python - 与 Tkinter 合作？

> ID：10661041
> 
> 赞同：2
> 
> 时间：2012-05-18T23:41:10.840
> 
> 标签：python, macos, tkinter, glade

有没有办法让 Glade 或任何类似的软件与 Tkinter 一起工作？我无法安装 WxPython 或任何其他库，所以我需要一些与 OSX.6 默认安装的兼容的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T18:50:53.187

不，没有办法让 glade 或其他非为 tkinter 设计的 GUI 工具与 tkinter 一起工作。至少，并非没有巨大的努力。

# python - Python中的CARP哈希

> ID：10661046
> 
> 赞同：1
> 
> 时间：2012-05-18T23:41:51.597
> 
> 标签：python, hash, carp

我正在尝试在 Python 中实现 CARP 哈希，如以下 IETF 草案中所述：

[https://datatracker.ietf.org/doc/html/draft-vinod-carp-v1-03#section-3.1](https://datatracker.ietf.org/doc/html/draft-vinod-carp-v1-03#section-3.1)

具体来说：

> 3.1。哈希函数
> 
> 散列函数基于以零结尾的 ASCII 输入字符串输出 32 位无符号整数。URL 的机器名称和域名、协议以及每个成员代理的机器名称应以小写形式计算，因为 URL 的该部分不区分大小写。
> 
> 由于此应用程序不需要不可逆性和强大的加密功能，因此使用了一个非常简单且快速的基于按位左旋转运算符的散列函数。
> 
> 对于（URL 中的每个字符）： URL_Hash += _rotl(URL_Hash, 19) + char ；
> 
> 成员代理哈希以类似的方式计算：
> 
> 对于（MemberProxyName 中的每个字符）： MemberProxy_Hash += _rotl(MemberProxy_Hash, 19) + char ；
> 
> 由于成员名称通常彼此相似，因此它们的哈希值通过以下附加操作进一步分布在哈希空间中：
> 
> MemberProxy_Hash += MemberProxy_Hash * 0x62531965 ; MemberProxy_Hash = _rotl (MemberProxy_Hash, 21) ;
> 
> 3.2\. 哈希组合
> 
> 哈希通过首先异或 (XOR) URL 哈希与机器名称组合，然后乘以常数并执行按位旋转。
> 
> 所有最终值和中间值都是 32 位无符号整数。
> 
> Combined_Hash = (URL_hash ^ MemberProxy_Hash) ; 组合哈希 += 组合哈希 * 0x62531965 ; Combined_Hash = _rotl(Combined_Hash, 21) ;

我尝试使用 numpy 创建 32 位无符号整数。第一个问题是在实现左位移时出现的。Numpy 自动将结果重新转换为 64 位无符号整数。对于任何会溢出 32 位的算术都是一样的。

例如：

```
from numpy import uint32

def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = uint32()
    for char in data:
        hashed += hashed << 19 + ord(char)
    return hashed

x = key_hash("testkey")
print type(x) 
```

回报：

输入“numpy.int64”

关于如何将这一切限制为 32 位空间的任何提示？此外，我对规范如何执行其中一些操作（如“MemberProxy_Hash += MemberProxy_Hash * 0x62531965”）在计算哈希时将永远适合 32 位感到有些困惑。

* * *

编辑：

根据反馈，听起来正确的解决方案是：

```
def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        hashed += ((hashed << 19) + (hashed >> 13) + ord(char)) & 0xFFFFFFFF
    return hashed

def server_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        hashed += ((hashed << 19) + (hashed >> 13) + ord(char)) & 0xFFFFFFFF
    hashed += (hashed * 0x62531965) & 0xFFFFFFFF
    hashed = ((hashed << 21) + (hashed >> 11)) & 0xFFFFFFFF
    return hashed

def hash_combination(key_hash, server_hash):
    # hash should be a 32-bit unsigned integer
    combined_hash = (key_hash ^ server_hash) & 0xFFFFFFFF
    combined_hash += (combined_hash * 0x62531965) & 0xFFFFFFFF
    return combined_hash 
```

编辑＃2：

另一个固定版本。

```
def rotate_left(x, n, maxbit=32):
    # assumes 32 bit
    x = x & (2 ** maxbit - 1)
    return ((x << n) | (x >> (maxbit - n)))

def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        hashed = (hashed + rotate_left(hashed, 19) + ord(char))
    return hashed

def server_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        hashed = (hashed + rotate_left(hashed, 19) + ord(char))
    hashed = hashed + hashed * 0x62531965
    hashed = rotate_left(hashed, 21)
    return hashed

def hash_combination(key_hash, server_hash):
    # hash should be a 32-bit unsigned integer
    combined_hash = key_hash ^ server_hash
    combined_hash = combined_hash + combined_hash * 0x62531965
    return combined_hash & 0xFFFFFFFF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:38:40.360

不要为 numpy uint32 烦恼。只需使用标准 Python `int`。`result &= 0xFFFFFFFF`通过删除不需要的高位位来限制操作的结果。

```
def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        # hashed += ((hashed << 19) + ord(char)) & 0xFFFFFFFF
        # the above is wrong; it's not masking the final addition.
        hashed = (hashed + (hashed << 19) + ord(char)) & 0xFFFFFFFF
    return hashed 
```

你可以只做一个最终的掩码，但在长输入时会相当慢，因为中间`hashed`值会是一个相当大的数字。

顺便说一句，上面不是一个很好的哈希函数。`rot`in`rotl`表示**旋转**，而不是移位。

你需要

```
# hashed += ((hashed << 19) + (hashed >> 13) + ord(char)) & 0xFFFFFFFF
# the above is wrong; it's not masking the final addition.
hashed = (hashed + (hashed << 19) + (hashed >> 13) + ord(char)) & 0xFFFFFFFF 
```

**编辑**……比较；这段代码：

```
def rotate_left(x, n, maxbit=32):
    # assumes 32 bit
    x = x & (2 ** maxbit - 1)
    return ((x << n) | (x >> (maxbit - n)))

def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = 0
    for char in data:
        hashed = (hashed + rotate_left(hashed, 19) + ord(char))
    return hashed

def khash(data):
    h = 0
    for c in data:
        assert 0 <= h <= 0xFFFFFFFF
        h = (h + (h << 19) + (h >> 13) + ord(c)) & 0xFFFFFFFF
    assert 0 <= h <= 0xFFFFFFFF
    return h

guff = "twas brillig and the slithy toves did whatever"
print "yours: %08X" % key_hash(guff)
print "mine : %08X" % khash(guff) 
```

产生：

```
yours: A20352DB4214FD
mine : DB4214FD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:38:06.337

以下对我有用，虽然可能有点不合时宜：

```
from numpy import uint32

def key_hash(data):
    # hash should be a 32-bit unsigned integer
    hashed = uint32()
    for char in data:
        hashed += hashed << uint32(19) + uint32(ord(char))
    return hashed

x = key_hash("testkey")
print type(x) 
```

问题是数字被强制指向更多而不是更少。

# c++ - 如何向模板类声明模板友元函数？

> ID：10661047
> 
> 赞同：0
> 
> 时间：2012-05-18T23:41:52.380
> 
> 标签：c++, templates

抱歉，这个问题似乎已经被问过很多次了，但我无法得到其他答案来为我的设置工作。我有以下类和函数设置：

```
namespace ddd {
  template <typename T>
  class A {
    ...
  };

  template <typename T, typename U>
  A<T> a_func(const A<U> &a) {
    ...
  }
} 
```

我想将 a_func 声明为 A 的朋友，并且我希望它是 A 的所有实例的朋友，无论 T 和 U 使用哪种类型名（例如，a_func 可以访问 A）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:49:34.477

您可以这样做（看起来就像您拥有它的方式）：

```
template<typename X>
class A {
    template<typename T, typename U>
    friend A<T> a_func(const A<U>& a);
};

template<typename T, typename U>
A<T> a_func(const A<U>& a) {
    // whatever
} 
```

[演示](http://ideone.com/H1ZVF)

# ios - 在 iOS4 中包含 HelveticaNeue-Medium

> ID：10661051
> 
> 赞同：1
> 
> 时间：2012-05-18T23:42:11.780
> 
> 标签：ios, fonts

iOS5 支持 HelveticaNeue-Medium 开箱即用，我可以使用 xibs 设置所有内容。

但是，iOS4 中缺少该字体。我尝试从我的 OSX 目录中添加 HelveticaNeue.dfont，并通过 UIFonts 在 plist 中添加。我尝试（用于测试）添加我在网上找到的 ttf，但没有任何效果。

有没有办法让这个工作而不必以编程方式手动设置每个 UILabel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:48:37.493

我的错，我有两个冲突的 plist 文件。

# python - 跨多个进程分配 python 工作负载

> ID：10661058
> 
> 赞同：0
> 
> 时间：2012-05-18T23:42:57.867
> 
> 标签：python, multiprocessing

让我们假设我想在谷歌上搜索“你好”这个词。然后，我想访问 Google 前 100 个页面上的每个链接，并下载该链接页面的 HTML。由于每页有 10 个结果，这意味着我必须点击大约 1,000 个链接。

这就是我使用单个进程的方式：

```
from selenium import webdriver
driver=webdriver.Firefox()
driver.get('http://google.com')

# do the search
search = driver.find_element_by_name('q')
search.send_keys('hello')
search.submit()

# click all the items
links_on_page = driver.find_elements_by_xpath('//li/div/h3/a')
for item in links_on_page:
    item.click()
    # do something on the page
    driver.back()

# go to the next page
driver.find_element_by_xpath('//*[@id="pnnext"]') 
```

这显然需要很长时间才能在 100 页上完成。我将如何分配负载，这样我可以（例如）打开三个驱动程序，每个驱动程序都会“签出”一个页面。例如：

*   驱动程序 #1 签出第 1 页。开始第 1 页。
*   驱动程序 #2 看到第 1 页已签出并转到第 2 页。开始第 2 页。
*   驱动程序#3 看到第 1 页已签出并转到第 2 页。与第 2 页相同。从第 3 页开始。
*   驱动程序 #1 完成第 1 页的工作...开始第 4 页。

我了解这将如何工作的原理，但是获得此工作的基本实现的实际代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:52:43.450

您可能想要使用[`multiprocessing Pool`](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers). 为此，请编写一个由页码参数化的方法：

```
def get_page_data(page_number):
    # Fetch page data
    ...
    # Parse page data
    ...
    for linked_page in parsed_links:
        # Fetch page source and save to file
        ... 
```

然后只需使用`Pool`您认为合适的过程中的一个（确定这个数字可能需要一些实验）：

```
from multiprocessing import Pool

if __name__ == '__main__':
    pool = Pool(processes=4)
    pool.map(get_page_data, range(1,101)) 
```

现在这将设置 4 个进程，每个进程从 Google 获取一个页面，然后获取它链接到的每个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:50:07.453

不直接回答您的问题，而是提出一种可能使您的代码在单个进程中可用的途径，从而避免您在不同线程/进程之间出现同步问题......

您可能最好使用 Twisted 等支持异步网络操作的框架，以便将所有操作保持在同一进程中。在您的代码中，解析 HTML 代码所花费的时间可能远少于获取页面所需的完整网络操作时间。因此，使用异步 IO，您可以同时启动几个请求，并仅在响应到达时解析结果。实际上，每次返回页面时，您的进程都可能在运行循环中“闲置”。

# asp.net-mvc-3 - MVC 3 该进程无法访问该文件，因为它正在被另一个进程使用

> ID：10661061
> 
> 赞同：2
> 
> 时间：2012-05-18T23:43:11.703
> 
> 标签：asp.net-mvc-3

我在我的 MVC 3 项目中上传了一个文件。

```
 [HttpPost]
    public ActionResult MyUpload(HttpPostedFileBase file)
    {
        string filePath = string.Empty;
        string path = "C:\\";
        string filePath = string.Empty;

        try
        {
            if (file != null && file.ContentLength > 0)
            {
               filePath = path + file.FileName;

                file.SaveAs(filePath);
                file.InputStream.Dispose();
                GC.Collect();

               // other operations, where can occur an exception 
               // (because the uploaded file can have a bad content etc.)
            }
        }
        catch (Exception e)
        {
            if (file.InputStream != null)
                file.InputStream.Dispose();

            GC.Collect();

            if (!string.IsNullOrEmpty(filePath))
            {
                if (System.IO.File.Exists(filePath))
                    System.IO.File.Delete(filePath); //here is the error
            }
        }
 } 
```

在该代码中，如果在我保存文件后发生异常，我无法删除它（我也无法再次上传），因为我收到错误

> 该进程无法访问文件“[filePath]”，因为它正被另一个进程使用。

该代码有什么问题？

## 编辑

我不得不`file.InputStream.Dispose();`改变

```
file.InputStream.Close(); 
file.InputStream.Dispose(); 
file.InputStream = null; 
```

而且，现在它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T16:40:30.650

而不是检查块`file.InputStream`内是否不为空`catch`，您应该将其放置在`finally`块内，如下所示：

```
if (file != null && file.ContentLength > 0)
{
    try
    {
        filePath = path + file.FileName;

        file.SaveAs(filePath);

        // other operations, where can occur an exception 
        // (because the uploaded file can have a bad content etc.)
    }
    catch (Exception e)
    {
        if (!string.IsNullOrEmpty(filePath))
        {
            if (System.IO.File.Exists(filePath))
                System.IO.File.Delete(filePath); //here is the error
        }
    }
    finally
    {
        file.InputStream.Close(); 
        file.InputStream.Dispose(); 
        GC.Collect();
    }
} 
```

顺便说一句，该`InputStream`属性是只读属性。您不能将其设置为 null。

# uinavigationcontroller - UIImagePickerController 自定义编辑模式

> ID：10661063
> 
> 赞同：1
> 
> 时间：2012-05-18T23:43:16.747
> 
> 标签：uinavigationcontroller, uiimagepickercontroller, customization, subclass

我尝试在我的 UIImagePickerController 中实现自定义编辑。我写了一个 UIView 的绘图视图子类。

现在我想添加一个我的 UIDrawView 作为 UIImagePickerController 的编辑视图。有没有办法实现这样的事情？

听说 UIImagePickerController 是 UINavigationController。那么我可以创建一个 UIImagePickerController 的子类并在用户拍照时将一个 UIDrawView 对象推送到 imagePicker 中吗？

如果可能，我应该从 UIImagePickerController 继承哪些类方法？

* * *

谢谢你的帮助！亲切的问候——朱利安

# c# - 使用 ASP.NET MVC 3 中的 EntityFramework 和 TryUpdateModel 方法更新多个对象

> ID：10661067
> 
> 赞同：4
> 
> 时间：2012-05-18T23:43:50.700
> 
> 标签：c#, asp.net-mvc-3, entity-framework

尝试通过实体框架更新数据时，我正在努力使用 ASP.NET MVC3。过程如下：

我有这个模型：

```
 public class Bet
    {
       public string BetID { get; set; }
       public int FixtureID { get; set; }
       public string Better { get; set; }
       public int GoalsHome { get; set; }
       public int GoalsGuest { get; set; }

       public virtual Fixture { get; set; }

    } 
```

在控制器中，我通过 where 语句过滤表以仅获取与用户匹配的条目：

```
 [HttpGet]
    public ActionResult Index()
    {
        var user = User.Identity.Name;
        var model = _db.Bets.Where(t => t.Better == user);

        return View(model);
    } 
```

视图由两部分组成，一个负责处理表格标题，另一个列出用户的所有投注：

```
<fieldset>
    <legend>Bets</legend>
    <table>
        <tr>
            <th>
                Kickoff
            </th>
            <th>
                Home Team
            </th>
            <th>
                Guest Team
            </th>
            <th>
                Group
            </th>
            <th>
                Bet
            </th>
        </tr>
        @Html.EditorFor(m => m)  //this is resolved in an self made EditorTemplate
  </table> 
```

编辑器模板：

```
@model Betting.Models.Bet
<tr>
<td>
    @Html.DisplayFor(modelItem => Model.Fixture.Kickoff)
</td>
<td>
    @Html.DisplayFor(modelItem => Model.Fixture.HomeTeam)
</td>
<td>
    @Html.DisplayFor(modelItem => Model.Fixture.GuestTeam)
</td>
<td>
    @Html.DisplayFor(modelItem => Model.Fixture.Group)
</td>
<td>
    @Html.TextBoxFor(modelItem => Model.GoalsHome, new { style = "width: 30px" }):
    @Html.TextBoxFor(modelItem => Model.GoalsGuest, new { style = "width: 30px" })
</td>
    @Html.HiddenFor(modelItem => Model.FixtureID)
</tr> 
```

回到控制器中，我尝试更新模型：

```
 [HttpPost]
    public ActionResult Index(FormCollection collection)
    {
        var user = User.Identity.Name;
        var model = _db.Bets.Where(t => t.Better == user);
        TryUpdateModel(model);
        _db.SaveChanges();

        return RedirectToAction("Index");
    } 
```

这绝对没有任何作用。实体框架根本不会更新数据库。我什至将表格分开，以便在 html 文件中生成的 bet 标签可以区分（注意名称值之前的 [index]：

```
 <input data-val="true" data-val-number="The field GoalsHome must be a number." data-val-required="The GoalsHome field is required." name="[1].GoalsHome" style="width: 30px" type="text" value="3" />:
 <input data-val="true" data-val-number="The field GoalsGuest must be a number." data-val-required="The GoalsGuest field is required." name="[1].GoalsGuest" style="width: 30px" type="text" value="0" /> 
```

有人能告诉我为什么实体框架不更新数据库吗？对象映射有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:02:35.633

我以前也有同样的问题。[MSDN](http://msdn.microsoft.com/en-us/library/dd456854)在这个主题上可能会很混乱，但在页面的中途指出，如果您在没有启用代理创建的情况下创建 POCO 实体，则必须在调用 savechanges 之前调用 detectchanges。

```
TryUpdateModel(model);
_db.DetectChanges();
_db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:44:33.283

好的，看来我找到了一种无需使用 TryUpdateModel 方法即可更新数据库的方法。由于 html 帖子中发送的项目是可区分的，因此我可以向控制器方法添加一个参数，该参数保存我从视图中获得的赌注。然后，我遍历数据库中的结果，并使用视图中投注的字段值更新更改的字段：

```
 [HttpPost]
    public ActionResult Index(FormCollection collection, List<Bet> bets)
    {
        var user = User.Identity.Name;
        var model = _db.Bets.Where(t => t.Better== user);
        int i = 0;
        foreach (var bet in model)
        {
            Bet the_Bet= bets.Find(
                delegate(Bet _bet)
                {
                    return _bet.BetID == bet.BetID;
                });
            bet.GoalsHome= the_Bet.GoalsHome;
            bet.GoalsGuest= the_Bet.GoalsGuest;
            i++;
        }
        _db.SaveChanges();

        return RedirectToAction("Index");
    } 
```

我想知道是否还有办法让它与 TryUpdateModel 方法一起使用。

# c++ - 来自文件错误的 Win32 LoadImage()

> ID：10661071
> 
> 赞同：1
> 
> 时间：2012-05-18T23:44:40.267
> 
> 标签：c++, winapi, graphics, error-handling, bmp

抱歉，如果这是重复的，但我在其他地方找不到答案。我只是想在运行时使用 WINAPI 的 LoadImage() 函数加载图像。我收到错误代码 (8)，表示存储空间不足（[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)找到错误代码）。

该文件相对较小（2.5kb）所以我想知道我的代码是否有问题：

```
void OnCreate()
{
...
HBITMAP hbmDeck = (HBITMAP)LoadImage(hInstance, L"standard.bmp", IMAGE_BITMAP, 0, 0, LR_CREATEDIBSECTION | LR_LOADFROMFILE);

    DWORD err = GetLastError();
    HBITMAP hbmT = SelectBitmap(hdc, hbmDeck);
    if(!hbmT)
    {
        MessageBox(NULL, L"Failed to LoadImage - 'hbmDeck'", L"OnCreate()", MB_OK);
        PostMessage(hwnd, WM_DESTROY, NULL, NULL);
    }
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:04:21.670

是的，一些 API 返回错误代码有点神秘，不符合错误。

您尝试加载的文件“standard.bmp”是磁盘上的文件，不在资源部分，对吗？要从磁盘加载文件，LoadImage (hInst) 的第一个参数必须为 NULL，并且 fuLoad 标志需要包含您正确拥有的 LR_LOADFROMFILE。

# python - 限制 Python 的语法以安全地执行用户代码。这是一种安全的方法吗？

> ID：10661079
> 
> 赞同：13
> 
> 时间：2012-05-18T23:46:18.333
> 
> 标签：python, security, abstract-syntax-tree

原始问题：

[在 python Web 服务器上执行数学用户代码，最简单的安全方法是什么？](https://stackoverflow.com/questions/10647234/executing-mathematical-user-code-on-a-python-web-server-what-is-the-simplest-se/10654285#comment13827379_10654285)

*   我希望能够在 python 网络服务器上运行用户提交的代码。代码本质上将是简单和数学的。

由于需要这么小的 Python 子集，我目前的方法是通过遍历 Python 的抽象语法树来将允许的语法列入白名单。函数和名称得到特殊处理；只允许明确列入白名单的函数，并且只允许未使用的名称。

```
import ast

allowed_functions = set([
    #math library
    'acos', 'acosh', 'asin', 'asinh', 'atan', 'atan2', 'atanh',
    'ceil', 'copysign', 'cos', 'cosh', 'degrees', 'e', 'erf',
    'erfc', 'exp', 'expm1', 'fabs', 'factorial', 'floor', 'fmod',
    'frexp', 'fsum', 'gamma', 'hypot', 'isinf', 'isnan', 'ldexp',
    'lgamma', 'log', 'log10', 'log1p', 'modf', 'pi', 'pow', 'radians',
    'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc',
    #builtins
    'abs', 'max', 'min', 'range', 'xrange'
    ])

allowed_node_types = set([
    #Meta
    'Module', 'Assign', 'Expr',
    #Control
    'For', 'If', 'Else',
    #Data
    'Store', 'Load', 'AugAssign', 'Subscript',
    #Datatypes
    'Num', 'Tuple', 'List',
    #Operations
    'BinOp', 'Add', 'Sub', 'Mult', 'Div', 'Mod', 'Compare'
    ])

safe_names = set([
    'True', 'False', 'None'
    ])

class SyntaxChecker(ast.NodeVisitor):

    def check(self, syntax):
        tree = ast.parse(syntax)
        self.visit(tree)

    def visit_Call(self, node):
        if node.func.id not in allowed_functions:
            raise SyntaxError("%s is not an allowed function!"%node.func.id)
        else:
            ast.NodeVisitor.generic_visit(self, node)

    def visit_Name(self, node):
        try:
            eval(node.id)
        except NameError:
            ast.NodeVisitor.generic_visit(self, node)
        else:
            if node.id not in safe_names and node.id not in allowed_functions:
                raise SyntaxError("%s is a reserved name!"%node.id)
            else:
                ast.NodeVisitor.generic_visit(self, node)

    def generic_visit(self, node):
        if type(node).__name__ not in allowed_node_types:
            raise SyntaxError("%s is not allowed!"%type(node).__name__)
        else:
            ast.NodeVisitor.generic_visit(self, node)

if __name__ == '__main__':
    x = SyntaxChecker()
    while True:
        try:
            x.check(raw_input())
        except Exception as e:
            print e 
```

这似乎接受了所需的语法，但我对编程相当陌生，可能会遗漏任何数量的安全漏洞。

所以我的问题是：这是否安全，是否有更好的方法，还有我应该采取的其他预防措施吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T00:23:18.080

我注意到你仍然可以改进的两点：

您应该始终转义可以从某种形式的用户输入生成的任何输出。在您的示例中，不允许的标识符未经修改就被镜像回输出。这可能会被利用，例如[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)。因此，我还会转义任何此类错误消息以防止这种情况发生。

您需要注意的另一件事是拒绝服务攻击。想象一下，有人编写了一个 Ackermann 函数和一个脚本，将其提交到您的服务器数千次……为了防止这种情况，您应该对所提交的任何代码的执行时间进行时间限制。这是必不可少的，因为这种类型的“攻击”通常会在无意中发生——有人设法产生了无限循环。

编辑：

Finally, I would also recommend to update your Python version to prevent a ["hashDoS" attack](http://bugs.python.org/issue13703).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T03:05:01.307

Have you looked at [pypy's sandboxing features](http://doc.pypy.org/en/latest/sandbox.html)? It is reputedly much safer than any CPython sandboxing efforts. You can even limit the heap size and cpu execution time to prevent denial of service.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T05:37:49.557

The Openerp's source code contains a [safe_eval.py](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/tools/safe_eval.py) that do a similar thing. But Instead of checking the ast of the source, it restrict the byte code that is allowed to execute. I think you may also have a look on it :)

# java - Java - 返回值是否会破坏循环？

> ID：10661081
> 
> 赞同：44
> 
> 时间：2012-05-18T23:46:30.710
> 
> 标签：java, while-loop, boolean, return, singly-linked-list

我正在编写一些基本上遵循以下格式的代码：

```
public static boolean isIncluded(E element) {
    Node<E> c = head;
    while (c != null) {
        if (cursor.getElement().equals(element)) {
            return true;
        }
        c = c.getNext();
    }
    return false;
} 
```

该代码将在节点列表中搜索一个元素。但是，我的问题是，如果 while 循环确实找到了 if 语句说它应该返回 true 的元素，它会简单地返回 true 并中断循环吗？此外，如果它确实打破了循环，它会继续执行该方法并仍然返回false，还是一旦返回值，该方法是否完成？

谢谢

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-05-18T23:48:21.537

## 是的*

是的，*通常*（在你的情况下）它确实会跳出循环并从方法返回。

## 一个例外

一个例外是，如果循环内有 finally 块并围绕 return 语句，那么 finally 块中的代码将在方法返回之前执行。finally 块可能不会终止——例如它可能包含另一个循环或调用一个永远不会返回的方法。在这种情况下，您永远不会退出循环或方法。

```
while (true)
{
    try
    {
        return;  // This return technically speaking doesn't exit the loop.
    }
    finally
    {
        while (true) {}  // Instead it gets stuck here.
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-18T23:48:11.400

Return 确实会中断循环并立即从整个方法返回。唯一会在退出时执行的代码是子句的主体和任何语句`finally`的释放。`synchronized`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-31T20:05:20.300

我还应该补充一点，如果你想打破循环的当前迭代，并立即开始下一个循环，你可以使用：

```
continue; 
```

似乎没有人建议它。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-18T23:48:24.060

是的。

无论如何，对于这么短的问题，我认为您自己尝试会更好（并获得更早的答案）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T23:55:09.427

每当被调用时返回从任何地方退出一个方法并向调用者返回一个值。

# sql - 将 CSV 转换为此表格式的 ETL Pentaho 建议（或 SQL 建议）

> ID：10661084
> 
> 赞同：0
> 
> 时间：2012-05-18T23:47:20.403
> 
> 标签：sql, etl, pentaho, data-integration

我有一个要转换的 CSV。将数据转换为我的模式有点问题。我在我的结束表中有一个 locationID，在 CSV 中，大约 10 列中有 1 或 NULL（每一列都是不同的位置）。

我的逻辑是：如果 column("locationThree") == 1，则将 locationID 设置为 5（例如）

我不知道如何在 SQL 中执行此操作，Pentaho 中是否有此工具，或者我如何在 SQL 中执行此操作？

例如

```
INSERT INTO endTable(locationID)
SELECT * FROM grubbyCSVData
if(locationOne == "1")
 locationID = 5;
if(locationTwo == "1")
 locationID = 6; 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:58:31.340

您可能想尝试在 SQL 中组合[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349)and表达式。[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)假设您使用的是 SQL Server，如下所示可能会起作用。我还没有验证它是否正确执行，因为我刚刚在浏览器中编写了它。

```
INSERT INTO endTable(locationID)
SELECT COALESCE( CASE locationOne
                 WHEN 1 THEN 5
                 ELSE NULL
                 END,
                 CASE locationTwo
                 WHEN 1 THEN 6
                 ELSE NULL
                 END
                ); 
```

或者，您可能希望查看 SQL Server 2005 及更高版本中可用的[`PIVOT`and`UNPIVOT`](http://msdn.microsoft.com/en-US/library/ms177410%28v=SQL.90%29.aspx)语句。

# macos - 如何使用 Homebrew 在 Mac OSX 上安装 PerlMagick？

> ID：10661085
> 
> 赞同：3
> 
> 时间：2012-05-18T23:47:20.877
> 
> 标签：macos, perl, imagemagick, homebrew

我已经使用 Homebrew 成功安装了 ImageMagick，但我无法使用此处的说明正确安装 PerlMagick：[http ://www.imagemagick.org/script/perl-magick.php](http://www.imagemagick.org/script/perl-magick.php)

我在 Magick.xs 上遇到很多错误。任何人都知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:57:47.147

在[这个回复](https://stackoverflow.com/questions/11892362/error-installing-imagemagick-with-homebrew#11974704)之后，我只是卸载了单声道（brew医生一直在抱怨），卸载并重新安装了 brew imagemagick。

cpanm 然后报告 Image::Magick 已经安装。它也奏效了。

# javascript - js setTimeout递归返回-继续

> ID：10661089
> 
> 赞同：0
> 
> 时间：2012-05-18T23:48:09.190
> 
> 标签：javascript, c++, recursion, return, settimeout

我将使用这个用 C 编写的简单的迷宫求解程序，例如我在 javascript 中需要的东西：

```
int is_free_place(int x,int y) {
 char ch[2];
 if(x<1||x>80||y<1||y>20)
  return 0;
 gettext(x,y,x,y,ch);
 return ch[0]==32; // X or space
}
int solve(int x, int y, int x_end,int y_end) {
 int ans=0;
 if(kbhit()) efn();
 gotoxy(x,y);
 putchar('.');
 delay(DELAY_TIME);
 if(x==x_end&&y==y_end)
  return 1;
 if(is_free_place(x-1,y))
  ans=solve(x-1,y,x_end,y_end);      //// <<<<< recursion starts here
 if(ans==0&&is_free_place(x+1,y))    //// can't continue to here if using setTimeout
  ans=solve(x+1,y,x_end,y_end);      //// because ans is not set
 if(ans==0&&is_free_place(x,y-1))
  ans=solve(x,y-1,x_end,y_end);
 if(ans==0&&is_free_place(x,y+1))
  ans=solve(x,y+1,x_end,y_end);
 if(ans==0){
  gotoxy(x,y);
  putchar(' ');
  delay(DELAY_TIME);
 }
 return ans;
}
void main(){
 clrscr();
 efn(); // reads maze from file, shows menu, calls solve()
} 
```

我正在尝试在 javascript 中进行类似的递归，但是浏览器会冻结，直到代码完成，我需要的是一个缓慢的进度动画，可以选择暂停和更改内容。所以我尝试使用 setTimeout，但我无法弄清楚函数何时“返回”并且代码从递归调用继续的算法......（setTimeout 立即继续并且不等待函数返回）

[更新]有没有办法使用yield而不是使用堆栈来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:53:17.100

`setTimeout`只运行一次。它的返回值是超时本身。

```
var timeout = setTimeout(function () { console.log( "hi" ) }, 1000);
// timeout == some id 
```

如果您选择使用该`clearTimeout`方法执行此操作，这允许您清除超时

您可以使用递归循环创建游戏`setTimeout`循环。

```
setTimeout(function call() {
     // Do code
     //...     
     setTimeout( call, 1000 / 60 ); // loop
}, 1000 / 60 ) // 60 fps 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:53:11.667

将它写成可以与 setTimeout 一起使用的东西会有点不重要，特别是因为正如所写的那样，您*需要获得递归调用的结果*。我认为处理此类事情的最简单方法是必须使用某种承诺基础设施，如 dojo 和 jQuery（或自己编写）。我会更详细地介绍，但目前我无法进一步处理。一个提示：我认为 jQuery 的`pipe`方法会在这里创造奇迹。

想到的其他选择是重写它以使用一个堆栈来保存 ans 变量，并且可能表示您需要返回到当前函数调用的哪一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T23:55:36.800

这是一个 javascript 示例，如何使用`setTimeout`以及如何使用`clearTimeout`.

```
<html>
<head>
<script type="text/javascript">
var c=0;
var t;
var timer_is_on=0;

function timedCount()
  {
  document.getElementById('txt').value=c;
  c=c+1;
  t=setTimeout("timedCount()",1000);
  }

function doTimer()
  {
  if (!timer_is_on)
    {
    timer_is_on=1;
    timedCount();
    }
  }

function stopCount()
  {
  clearTimeout(t);
  timer_is_on=0;
  }
</script>
</head>
<body>

<form>
<input type="button" value="Start count!" onclick="doTimer()" />
<input type="text" id="txt" />
<input type="button" value="Stop count!" onclick="stopCount()" />
</form>

</body>
</html> 
```

它取自[这里。](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T01:46:27.557

我认为 setInterval 会完成这项工作：[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)

```
 var int = setInterval(clock,1000);

  function clock()
  {
     var d=new Date();
     var t=d.toLocaleTimeString();
     document.getElementById("clock").value=t;
  } 
```

# mysql - 以月份中的日期为列的 SQL 查询

> ID：10661095
> 
> 赞同：0
> 
> 时间：2012-05-18T23:48:27.290
> 
> 标签：mysql, date

我正在尝试创建一个查询，它将显示这样的销售额：

```
 Jan  Feb  Mar  ...
2011 1253 1381 1973 ...
2012 3124 3829 1823 ... 
```

顶部显示从 1 月到 12 月的月份，左侧列显示年份。该数据是该年/月整个期间的 SUM 数据。

该表包含总计和日期时间字段的销售记录。

我已经看到了一些使用 UNPIVOT 的选项，但我无法理解它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:12:31.237

在没有看到您的表结构的情况下，您可以执行类似的操作

```
select
      year( YT.YourDateColumn ) as SalesYear,
      sum( if( month( yt.YourDateColumn ) = 1, YT.SalesAmt, 000000.00 )) as Jan,
      sum( if( month( yt.YourDateColumn ) = 2, YT.SalesAmt, 000000.00 )) as Feb,
      sum( if( month( yt.YourDateColumn ) = 3, YT.SalesAmt, 000000.00 )) as Mar,
      sum( if( month( yt.YourDateColumn ) = 4, YT.SalesAmt, 000000.00 )) as Apr,
      sum( if( month( yt.YourDateColumn ) = 5, YT.SalesAmt, 000000.00 )) as May,
      sum( if( month( yt.YourDateColumn ) = 6, YT.SalesAmt, 000000.00 )) as Jun,
      sum( if( month( yt.YourDateColumn ) = 7, YT.SalesAmt, 000000.00 )) as Jul,
      sum( if( month( yt.YourDateColumn ) = 8, YT.SalesAmt, 000000.00 )) as Aug,
      sum( if( month( yt.YourDateColumn ) = 9, YT.SalesAmt, 000000.00 )) as Sep,
      sum( if( month( yt.YourDateColumn ) = 10, YT.SalesAmt, 000000.00 )) as Oct,
      sum( if( month( yt.YourDateColumn ) = 11, YT.SalesAmt, 000000.00 )) as Nov,
      sum( if( month( yt.YourDateColumn ) = 12, YT.SalesAmt, 000000.00 )) as Dec
   from
      YourTable YT
   group by
      year( YT.YourDateColumn )
   order by
      Year( YT.YourDateColumn ) 
```

# linq - 挑战：LINQ 将层次结构 XML 转换为链接对象

> ID：10661097
> 
> 赞同：0
> 
> 时间：2012-05-18T23:48:32.917
> 
> 标签：linq, linq-to-xml

我有一个这样的 XML 结构：

```
<?xml version="1.0" encoding="utf-8"?>
<categories version="2.0">
  <category>
    <name>cat1</name>
    <category>
      <name>cat 1.1</name>
    </category>
    <category>
      <name>cat 1.2</name>
    </category>
  </category>
</categories> 
```

我尝试使用以下代码将此 XML 转换为对象：

```
XElement root = XDocument.Load(categoryXmlFile).Descendants("categories").First();
CategoryXml cat = new CategoryXml(root);

class CategoryXml
{
    public string Name { get; set; }
    public int Level { get; set; }
    public int Order { get; set; }
    public CategoryXml Parent { get; set; }
    public List<CategoryXml> Children { get; set; }

    CategoryXml() { }

    public CategoryXml(XElement root)
    {
        Name = "Root Category";
        Level = 0;
        Order = 1;
        Parent = null;
        Children = GetSubCategories(root, Level, this);
    }

    private List<CategoryXml> GetSubCategories(XElement parentElement, int level, CategoryXml parentCategory)
    {
        int order = 1;
        level++;

        var s = from childElement in parentElement.Elements("category")
                select new CategoryXml
                {
                    Name = childElement.Element("name").Value,
                    Level = level,
                    Order = order++,
                    Parent = parentCategory,
                    Children = GetSubCategories(childElement, level, this)
                };

        return s.ToList();
    }
} 
```

但是，每个子类别的 Parent 属性都显示为“根类别”。相反，“cat 1.1”的 Parent 属性应该是“cat1”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:00:46.777

在`GetSubCategories`中，您将每个子对象的父对象设为*当前*对象的父对象：

```
select new CategoryXml
{
    ...
    Parent = parentCategory,
    ...
} 
```

我想你的意思是：

```
select new CategoryXml
{
    ...
    Parent = this,
    ...
} 
```

毕竟，每个孩子的父母都是创建孩子的对象，对吧？

但是，我建议您实际上在`select`子句中调用构造函数，如下所示：

```
private CategoryXml(XElement current, string name, int level, int order,
                    CategoryXml parent)
{
    Name = name;
    Level = level;
    Order = order;
    Parent = parent;
    Children = current.Elements("category")
                      .Select((child, index) => new CategoryXml(child,
                                 (string) child.Element("name"),
                                 Level + 1,
                                 index + 1,
                                 this))
                      .ToList();
}

public CategoryXml(XElement root)
{
    this(root, "Root Category", level: 0, order: 1, parent: null);
} 
```

# android - Android：仅在调试服务时绑定到远程服务成功

> ID：10661099
> 
> 赞同：1
> 
> 时间：2012-05-18T23:48:47.753
> 
> 标签：android, debugging, service, connection

我编写了一个连接到远程服务的库，该服务调用

```
 return context.bindService(bindIntent,
            serviceConnectionSmartCard, Context.BIND_AUTO_CREATE); 
```

上下文是 ApplicationContext 和 serviceConnectionSmartCard 是我的自定义 ServiceConnection

```
public void onServiceConnected(ComponentName className, IBinder service) {
    synchronized (this) {
        if (waitForConnection) {
            waitForConnection = false;
        } else {
            return;
        }
    }
    if(service == null) {
        Log.w(TAG, "Binding to Service failed.");
        smartCardReaderService.onConnected(null);
    } else {
        if (D) Log.d(TAG, "Attached to Server.");
        IConnectionService connectionService = IConnectionService.Stub.asInterface(service);
        smartCardReaderService.onConnected(connectionService);
    }
} 
```

在服务方面，我在 onBind() 中有以下内容：

```
public IBinder onBind(Intent intent) {
    if (D) Log.d(TAG, "onBind");
    android.os.Debug.waitForDebugger();
    return iConnectionService.asBinder();
} 
```

iConnectionService 是我的 AIDL 文件的实现。

现在我的问题：只要我调试服务（在返回语句上设置断点）它就可以工作，但是当我调试活动时它就不起作用。ServiceConnection 永远不会返回。

顺便说一句：我打电话

```
startActivityForResult(...); 
```

在 Activity.onCreate 中调用远程 Activity。这可能是这里的问题吗？我根本不知道如何调试这种奇怪的行为......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:04:39.167

解决方案非常简单。只是未注释

```
android.os.Debug.waitForDebugger(); 
```

as it will silently wait for the debugger to attach even if not started by my debug application - which is never going to happen.

# ruby-on-rails - 使用 :through 方法尝试丰富的 many2many rails assoc，错误：“在模型 AdminUser 中找不到关联 'section_edits'”

> ID：10661100
> 
> 赞同：1
> 
> 时间：2012-05-18T23:49:00.383
> 
> 标签：ruby-on-rails, activerecord, model, many-to-many, has-many-through

我第一次尝试在 rails 中使用 :through 方法，进行丰富的多对多关系练习，并在尝试对其进行测试时在命令行收到错误。基本上试图将 AdminUser 指向“sections”而不通过“section_edits”。

这是控制台错误

```
C:\Users\davo\Desktop\RailsProjects\simple_cms>rails c
Loading development environment (Rails 3.2.3)
irb(main):001:0> me = AdminUser.find(1)
  ←[1m←[36mAdminUser Load (1.0ms)←[0m  ←[1mSELECT `admin_users`.* FROM `admin_us
ers` WHERE `admin_users`.`id` = 1 LIMIT 1←[0m
=> #<AdminUser id: 1, first_name: "David", last_name: "Douglas", email: "", pass
word: nil, created_at: "2012-05-18 20:18:20", updated_at: "2012-05-18 20:18:20",
 username: "ddd1600">
irb(main):002:0> me.sections
ActiveRecord::HasManyThroughAssociationNotFoundError: Could not find the associa
tion "section_edits" in model AdminUser
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_r
ecord/reflection.rb:501:in `check_validity!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_r
#etc, etc 
```

以下是三个相关的类：

管理员用户.rb

```
 class AdminUser < ActiveRecord::Base

  has_and_belongs_to_many :pages
  scope :named, lambda {|first,last| where(:first_name => first, :last_name => last)}

 has_many :section_edits
 has_many :sections, :through => "section_edits"
end 
```

SectionEdit.rb

```
class SectionEdit < ActiveRecord::Base

  belongs_to :admin_user
  belongs_to :editor, :class_name => "AdminUser", :foreign_key => 'admin_user_id'

  belongs_to :section

end 
```

节.rb

```
class Section < ActiveRecord::Base

  belongs_to :page
  has_many :section_edits

  has_many :admin_users, :through => :section_edits
  has_many :editors, :through => :section_edits, :class_name => "AdminUser"

end 
```

编辑：我已经能够对 me.sections 执行（有点）反向命令而没有问题。下面，部分指向 AdminUser（编辑器）。

```
irb(main):003:0> section = Section.find(1)
  ←[1m←[35mSection Load (0.0ms)←[0m  SELECT `sections`.* FROM `sections` WHERE `
sections`.`id` = 1 LIMIT 1
=> #<Section id: 1, page_id: nil, name: "Section One", position: 1, visible: fal
se, content_type: nil, content: nil, created_at: "2012-05-18 22:50:44", updated_
at: "2012-05-18 22:50:44">
irb(main):004:0> section.editors
  ←[1m←[36mAdminUser Load (209.0ms)←[0m  ←[1mSELECT `admin_users`.* FROM `admin_
users` INNER JOIN `section_edits` ON `admin_users`.`id` = `section_edits`.`admin
_user_id` WHERE `section_edits`.`section_id` = 1←[0m
=> [#<AdminUser id: 1, first_name: "David", last_name: "Douglas", email: "", pas
sword: nil, created_at: "2012-05-18 20:18:20", updated_at: "2012-05-18 20:18:20"
, username: "ddd1600">]
irb(main):005:0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:58:00.703

尝试改变：

```
 has_many :sections, :through => "section_edits" 
```

到：

```
 has_many :sections, :through => :section_edits 
```

# string - 按名称获取 EventHandler？

> ID：10661102
> 
> 赞同：0
> 
> 时间：2012-05-18T23:49:52.940
> 
> 标签：string, events, handler

如果还有另一个问题可以解释这一点，我很抱歉无法找到它，但我认为这可能与我不熟悉与我正在尝试做的事情相关的一些术语有关。

我想要做的是按名称将事件处理程序添加到按钮。因此，例如，在下面的代码中，我不知道我想添加 showInfo，我可以按名称（字符串）引用 EventHandler，如“showInfo”吗？

```
myButton.Click += new EventHandler(showInfo);

void showInfo(object sender, EventArgs e)
{
    // ..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T23:54:10.050

您可以通过反射从方法创建委托，然后通过反射将其订阅到事件，是的。示例代码：

```
using System;
using System.Reflection;

class Publisher
{
    public event EventHandler Foo;

    public void RaiseFoo()
    {
        EventHandler handler = Foo;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
}

class Subscriber
{
    public void HandleEvent(object sender, EventArgs e)
    {
        Console.WriteLine("In HandleEvent");
    }
}

class Test
{
    static void Main()
    {
        var subscriber = new Subscriber();
        var publisher = new Publisher();

        var methodInfo = typeof(Subscriber).GetMethod("HandleEvent");
        var handler = (EventHandler) Delegate.CreateDelegate(
               typeof(EventHandler), subscriber, methodInfo);

        var eventInfo = typeof(Publisher).GetEvent("Foo");
        eventInfo.AddEventHandler(publisher, handler);

        publisher.RaiseFoo();
    }    
} 
```

# r - 如何获取 R 中向量的所有可能分区的列表？

> ID：10661105
> 
> 赞同：9
> 
> 时间：2012-05-18T23:50:44.757
> 
> 标签：r, vector, combinatorics

假设我有一个包含唯一元素的 R 向量，例如`x <- c(1,2,3,4,5)`.

有没有一个函数可以给我这个向量的所有可能分区的列表`x`？我猜每个分区都是一个向量列表，其中每个元素都`x`属于其中一个向量。我希望将所有可能的分区分成任意数量的任意大小的集合。

（我认为此类分区的数量类似于`2^n * n!`，其中`n`是唯一元素的数量。我可能不会在具有超过 4 个唯一元素的向量上使用此函数。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T16:45:18.647

这是一个解决方案，可以为您提供完整的分区列表，每个分区都表示为向量列表。由于列表列表在打印到屏幕上时非常难看，我还向您展示了如何获得打印效果更好的对象。

```
library(partitions)

x <- c(2,4,6)       # Substitute the vector for which you want partitions 
parts <- listParts(length(x))
out <- rapply(parts, function(ii) x[ii], how="replace")

# This step is for cosmetic purposes only. It allows you to take advantage of
# the `print.equivalence` print method when printing the object to a console 
for(i in seq_along(out)) class(out[[i]]) <- c("list", "equivalence")
out
[[1]]
[1] (2,4,6)

[[2]]
[1] (2,6)(4)

[[3]]
[1] (2,4)(6)

[[4]]
[1] (4,6)(2)

[[5]]
[1] (2)(4)(6) 
```

另请参阅`setparts()`同一包中的一种更紧凑的方式来表示同一组分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:45:32.173

这是否为您提供了您正在寻找的东西，

```
install.packages("gregmisc", dependencies = TRUE)
library(gregmisc)

x <- c(1,2,3,4,5)
for(i in 1:length(x)) {
print(combinations(5,i,x,repeats=TRUE))
} 
```

# python - Python - Matplotlib - Setting X axis range - Plotting Packets Per Second

> ID：10661106
> 
> 赞同：2
> 
> 时间：2012-05-18T23:50:49.650
> 
> 标签：python, matplotlib

I'm working on a script that plots a pps count versus time from a csv file. Everything works up to this point however I can't seem to figure out how to change the interval at which the ticks/tick-labels occur at on the X-axis, I want there to be 60 timestamps/tick instead of the default. Here's where I'm at:

```
import matplotlib
matplotlib.use('Agg')                   
from matplotlib.mlab import csv2rec     
import matplotlib.pyplot as plt
from matplotlib.ticker import MaxNLocator
from pylab import *

data = csv2rec('tpm_counter.log', names=['packets', 'time']) # reads in the data from the csv as column 1 = tweets column 2 = time
rcParams['figure.figsize'] = 12, 4                           # this sets the ddimensions of the graph to be made
rcParams['font.size'] = 8

fig = plt.figure()
plt.plot(data['time'], data['packets'])                      # this sets the fields to be graphed
plt.xlabel("Time(minutes)")                                  # this sets the x label
plt.ylabel("Packets")                                        # this sets the y label
plt.title("Packets Capture Log: Packets Per Minute")         # this sets the title

#plt.xticks(range(60)) --- nothing shows on the graph if I use this

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')

plt.savefig('tpm.png')                                      # this sets the output file name 
```

I've tried `plt.xticks(range(60))` but when the plot generates, it has nothing on it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:52:11.957

bmu's answer above works. But it might be helpful to others to see a more general way of rescaling the xticks and xlabels in a plot. I have generated some example data instead of using a csv file.

```
import matplotlib            
import matplotlib.pyplot as plt
from pylab import *

time=range(5000) #just as an example
data=range(5000) # just as an example

fig = plt.figure()
plt.plot(time,data)                      # this sets the fields to be graphed
plt.xlabel("Every 60th point")           # this sets the x label
plt.ylabel("Data")                       # this sets the y label
plt.title("Rescaling axes")              # this sets the title

#Slice the data into every 60th point. We want ticks at these points
tickpos=data[::60] 
#Now create a list of labels for each point...
ticklabels=[]
for point in tickpos:
    ticklabels.append(str(point/60))  

plt.xticks(tickpos,ticklabels) # set the xtick positions and labels

plt.savefig('tpm.png') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:13:59.480

Have a look at the [date demo](http://matplotlib.sourceforge.net/examples/api/date_demo.html).

You can use the [HourLocator](http://matplotlib.sourceforge.net/api/dates_api.html#matplotlib.dates.HourLocator) or the MinuteLocator together with an adapted [DateFormatter](http://matplotlib.sourceforge.net/api/dates_api.html#matplotlib.dates.DateFormatter).

```
import matplotlib.dates as mdates
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.plot_date(data['time'], data['packets']) 
hours = mdates.HourLocator() 
fmt = mdates.DateFormatter('%H:%M')
ax.xaxis.set_major_locator(hours)
ax.xaxis.set_major_formatter(fmt) 
```

# javascript - 插入输入字段后使用 enter 提交表单中断 - 为什么以及如何修复？

> ID：10661108
> 
> 赞同：1
> 
> 时间：2012-05-18T23:51:28.027
> 
> 标签：javascript, html, forms

如果 HTML 表单字段具有焦点并且您按 Enter 键，则该表单将被提交（除非您做了一些花哨的事情来绕过它）。奇怪的是，如果 JavaScript 在表单中添加一个字段，则输入到提交的行为似乎会中断。例如：

[http://jsfiddle.net/SChas/1/](http://jsfiddle.net/SChas/1/)

```
function goose() { 
  document.getElementById("addhere").innerHTML="<input name=goose value=honk>";
}

function checkForm() {
  alert("ok");
}​

--

<form onsubmit="checkForm();">
  <input name="duck" value="quack">
  <div id="addhere"></div>
  </form>
<button onclick="goose();">add a goose</button> 
```

​（这是一个人为设计的示例，试图尽可能简洁。所涉及的原始代码是更现代的代码，带有附加在 JavaScript 中的事件等。但这是复制问题的最简单的代码。此外，在实际中*是*必要的用例通过添加/删除字段来动态修改表单。）

无论如何，您将获得一个具有单个字段且值为“duck”的表单。点击进入并按回车，表单将提交（您会看到“ok”警报，然后 JSFiddle 会告诉您不要发布！）。

但是，如果您单击“添加鹅”，则会得到一个新字段。现在，您无法按 Enter 提交表单。

为什么会这样？我无法通过谷歌找到任何关于这种行为的信息，也许我使用了错误的搜索词。但它至少发生在 Windows 上的 IE 和 OSX 上的 Chrome 和 FF 中。因此，这似乎是一种有意的，也许是符合规范的行为。是某种安全保护吗？

而且，一旦插入字段，有什么方法可以恢复表单上的输入提交行为？除了将 onkey* 事件添加到输入字段之外的其他方法？

FWIW，输入是通过 DOM 方法（appendChild）添加，还是使用 jQuery 或老式 JavaScript 设置 innerHTML 似乎并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:03:40.510

这是因为只有当它是表单上的唯一输入时才会发生输入提交行为。

您可以通过在表单上输入 type=submit 来恢复它，它甚至不必是可见的。

看看：http: [//jsfiddle.net/SChas/10/](http://jsfiddle.net/SChas/10/)

# jquery - 如何在 jQuery 方法中包含 javascript 变量？

> ID：10661111
> 
> 赞同：1
> 
> 时间：2012-05-18T23:51:59.303
> 
> 标签：jquery

自动分页无限滚动脚本有一个名为`offset`. 我想将它传递给`scrollPagination`方法*（当它再次被调用时）*，但我不知道该怎么做。

我需要这样做，因为该部分`offset`内的变量会发生变化`afterLoad`，而现在`offset`for`contentPage`参数始终为 0。

```
var offset = 0;
$('#stuffhere').scrollPagination({ 
    'contentPage': 'themes/[var.theme]/ajaxcontrols.php?page=products&offset='+offset, // the page where you are searching for results
    },
    'afterLoad': function(elementsLoaded, offset){ // after loading, some function to animate results and hide a preloader div
         offset = offset + [var.homelist]; alert(offset);
    }
}); 
```

*代码示例被修剪。*

**更新**

这是我得到的结果。 ![偏移量仍然为零](../Images/70ad0375010f4bbf053ca327c4656491.png)

我**确实**知道变量范围。我想将变量传递`offset`给`.scrollPagination({`，只是不知道该怎么做。使用`.scrollPagination function(offset){`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T00:51:39.723

更好的是......在加载之前使用，删除原始的 contentPage 字符串。否则搜索将经常重复。例子：

```
 'beforeLoad': function(){ // before load function, you can display a preloader div
        $('#loading').fadeIn();         
         offset += 10;  
         this.contentPage = "democontent.php?offset=" + offset;
    }, 
```

# 更新

你知道，我认为在这种情况下实际上有一个更简单的解决方案，不需要破解插件甚至猴子补丁：

```
// Inside afterLoad

offset += 8;

this.contentPage = "..." + offset; 
```

我刚刚注意到它`afterLoad`被称为 as `opts.afterLoad`，在这种情况下应该绑定`this`到`opts`函数内部。

# 原始答案

好的，在我看来，您最初传递给 ScrollPagination 插件的 URL 用于每个请求，而不是暴露在外部以便您在请求之间进行更改（例如，在您的 ScrollPagination 中`afterLoad`）。您可以破解插件以允许这样做，或者使用新的对其进行猴子补丁`loadContent()`，例如：

```
var offset = 0;

var loadContent = $.fn.scrollPagination.loadContent;

$.fn.scrollPagination.loadContent = function ( obj, opts ) {

  opts.contentPage = 'themes/jessicatheme/ajaxcontrols.php?page=products&offset=' + offset;

  return loadContent.call( this, obj, opts );

};

$( '#stuffhere' ).scrollPagination({

... 
```

我会考虑联系插件作者，看看他们是否会在 MIT 或 Simplified BSD 许可下发布它，以便可以修改和分发它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:38:02.313

使用 JavaScript 闭包你不需要显式地传递它。在定义函数时处于范围内的变量将在该函数闭包中并且可以被引用。如果您想了解更多关于闭包的信息（它们并不像您想象的那么复杂），请阅读这篇文章。很好：[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

```
var offset = 0;
$('#stuffhere').scrollPagination({ 
  'contentPage': 'themes/[var.theme]/ajaxcontrols.php?page=products&offset='+offset,
  }
  ,'afterLoad': function(elementsLoaded){ 
     // offset will reference to the variable in the beginning of this script. It will be shared by all afterLoad invokes. Not sure if that is what you want
     offset = offset + [var.homelist];
     alert(offset);
  }
}); 
```

# wpf - 使用 WPF WebBrowser 将字典传递给 ObjectForScripting

> ID：10661112
> 
> 赞同：2
> 
> 时间：2012-05-18T23:52:05.053
> 
> 标签：wpf, webbrowser-control, expandoobject, comvisible

我`WebBrowser`在 WPF 中使用一个组件来托管一些 JavaScript + HTML，并且我希望能够将可自定义的对象作为`ObjectForScripting`属性传递。我的最终目标是运行在 javascript 中的`WebBrowser`可以调用类似：

```
window.external['lookup'].getValue(someId); 
```

我可以通过实现一个`ComVisible`设置为它的类来实现接近此的目标，该类`true`具有一个`lookup`属性：

```
[ComVisible(true)]
public class ScriptingContext
{
    public LookupService lookup { get; set; } //where LookupService is also ComVisible
} 
```

但是，我希望对`ObjectForScripting`传入的成员保持灵活，因此我无法事先指定每个属性是什么。

理想情况下，我只想指定一个名称-对象对来传递，但这不起作用。

到目前为止我已经尝试过（但失败了）：

*   使用 a`Dictionary<string,object>`作为我的上下文
*   使用的扩展`Dictionary<string,object>`被标记为`ComVisible`
*   使用`ExpandoObject`
*   用一个`List<KeyValuePair<string,object>>`
*   使用的扩展 `List<KeyValuePair<string,object>>`被标记为`ComVisible`

有什么方法可以将可自定义的内容传递到我缺少`ObjectForScripting`的 WPF中吗？`WebBrowser`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:34:33.910

我不确定您所说的可定制是什么意思，但是有很多方法可以实现您的目标，例如为您的字典构建一个包装器并将其作为您的 ObjectForScripting：

```
[ComVisible(true)] 
public class ScriptingContext 
{
    private Dictionary<string, object> objectsForScripting;
    public object GetValue(string s) 
    {
        return objectsForScripting[s];
    }
} 
```

用相应的 javascript `window.external.GetValue("lookup").getValue(someId)`。

请注意，您还可以通过 InvokeScript 方法将 ComVisible 对象传递给 javascript 并以这种方式与它们交互，使用类似的东西`webBrowser.InvokeScript("RegisterProperty", "lookup", lookupObject)`并管理您在 javascript 端公开的对象。

# ruby - QListView 的 clicked() 信号

> ID：10661113
> 
> 赞同：1
> 
> 时间：2012-05-18T23:52:25.443
> 
> 标签：ruby, qt, listview, signals, click

我有一个 ListView，当我单击一行时，我需要显示有关该行的更多信息。我的问题是信号 clicked() 不适用于 ListView。当我初始化我的应用程序时，我在控制台中得到以下输出

> Object::connect: 没有这样的信号 QListView::clicked(index)
> 
> 对象：：连接：（发件人名称：'appointments_list'）

当我连续单击时，什么也没发生。

```
class GUICustomerAppointmentDetail < Qt::Widget

    def initialize (parent = nil, customer = nil)
        super(parent)
        ...     
        @ui.appointments_list.connect(SIGNAL('clicked(index)'), self, SLOT('load_data()')) 
    end

end 
```

约会列表是一个 Qt::ListView

我已经换了

> @ui.appointments_list.connect(SIGNAL('clicked(index)'), self, SLOT('load_data()'))

经过

> 连接(appointments_list.connect, SIGNAL('clicked(index)'), self, SLOT('load_data()'))

我得到

> Object::connect: 没有这样的信号 QListView::clicked(index)
> 
> 对象：：连接：（发件人名称：'appointments_list'）
> 
> Object::connect: （接收方名称：'customerAppointmentDetail'）

还

> @ui.appointments_list.connect(SIGNAL('clicked(index)')){ load_data() }

我得到

> Object::connect: 没有这样的信号 QListView::clicked(index)
> 
> 对象：：连接：（发件人名称：'appointments_list'）

请问，谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:45:18.130

什么都没有发生，仍然无法正常工作，但我找到了一个[很棒的宝石](https://github.com/CeesZ/qt_connect/)并且效果很好！

这个宝石允许我写：

```
appointments_list.clicked.connect { load_data() } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:43:56.767

这个指数是多少？你用 Qmodelindex 对它进行 typedef 吗？

尝试

`@ui.appointments_list.connect(SIGNAL('clicked(QModelIndex&)')){ load_data() }`

代替

```
@ui.appointments_list.connect(SIGNAL('clicked(index)')){ load_data() } 
```

# php - PHP：在循环中使用 SQL 结果而不重新执行查询

> ID：10661114
> 
> 赞同：0
> 
> 时间：2012-05-18T23:52:27.923
> 
> 标签：php, mysql, arrays, for-loop, while-loop

我正在尝试添加 3 个组合框，它们都显示来自我的 MySQL 数据库的完全相同的信息。似乎我编写的代码使整个页面等到所有 3 个组合框都被填充，然后再继续。

```
<?
$query = "Select * from tblWriters order by surname";

for ($i = 1; $i <= 3; $i++) {

    $result = mysql_query($query);

    echo "<tr><td>Writer".$i." *</td><td>";
    echo "<select name='txtWriter".$i."' style='width: 200px;'>";
    echo "<option value ='' selected='selected'></option>";

    while ($row = mysql_fetch_array($result))
    {
         echo "<option value ='" . $row['id'] . "'> " . $row['surname'] . ", " . $row['name'] . "</option>";
    }

    echo "</select><td></tr>";
}
?> 
```

我想优化这段代码，所以查询不会被执行 3 次，因为我相信这是页面变慢的地方。

如果我把

> $result = mysql_query($query);

在 for 循环之外，不填充第二个和第三个组合框。我试图研究重置结果的指针，但我似乎无法弄清楚它是如何工作的。

另外，有没有办法可以重用while循环，所以我不必执行3次？

有人可以指出我正确的方向吗？我对 PHP 很陌生，并试图自学。任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:01:54.020

如果再次将 mysql_query() 移出循环，则可以在循环的开头或结尾使用[mysql_data_seek()重置 mysql-result-pointer。](http://www.php.net/manual/en/function.mysql-data-seek.php)

这将导致：

```
 mysql_query($query);
 for($i=1;$i<=3;$i++);
 {
     mysql_data_seek(0); // reset datapointer

     // output querydata
 } 
```

然而，我不得不指出，mysql-extension 现在已被弃用，您应该将[mysqli](http://www.php.net/mysqli)或[pdo](http://www.php.net/pdo)用于新项目和代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:02:34.687

将查询结果缓存在一个数组中，然后生成您的标记：

```
$query = "Select * from tblWriters order by surname";
$result = mysql_query($query);
$data = array();
while ($row = mysql_fetch_array($result))
{
    $data[] = $row;
}

for ($i = 1; $i <= 3; $i++) {

    echo "<tr><td>Writer".$i." *</td><td>";
    echo "<select name='txtWriter".$i."' style='width: 200px;'>";
    echo "<option value ='' selected='selected'></option>";
    foreach ($data as $row) {
       echo "<option value ='" . $row['id'] . "'> " . $row['surname'] . 
            ", " .   $row['name'] . "</option>";        
    }

    echo "</select><td></tr>";
} 
```

# c# - 通过多个表单 POST 持久化数据

> ID：10661115
> 
> 赞同：3
> 
> 时间：2012-05-18T23:52:41.410
> 
> 标签：c#, asp.net, asp.net-mvc

我想知道在 ASP.NET MVC 中解决这个问题的最佳方法是什么。以下是我想要做的一个简单的例子：

我有一个带有文本框和提交按钮的网页。当按下提交按钮时，我希望内容显示在同一网页上。当再次按下它时，我希望显示第一次提交时已经显示的内容以及刚刚提交的新数据。

我曾尝试将这些数据保存到模型中，但每次表单发布时模型都会被擦除干净。我怎样才能做到这一点，并在最后一个帖子（以及之前的帖子）之前保留帖子中的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:45:41.160

如果您希望数据在请求之间保持不变，我将使用“TempData”作为起点。TempData 属性值存储在会话状态中，并且在被读取或会话到期之前一直存在。

示例视图模型：

```
 public class SomeClass
    {
        public string Something { get; set; }
        public List<string> RetainedValues { get; set; } 
    } 
```

示例控制器：

```
 [HttpGet]
    public ActionResult Index()
    {
        return View("Index");
    }

    [HttpPost]
    public ActionResult Index(SomeClass postedValues)
    {
        // retrieve retained values
        var retained = (List<string>) TempData["RetainedValues"] ?? new List<string>();
        retained.Add(postedValues.Something);

        // save for next post
        TempData["RetainedValues"] = retained;

        // setup viewmodel
        var model = new SomeClass
        {
            RetainedValues = retained
        };

        return View("Index", model);
    } 
```

示例视图（强类型）：

```
 <div>
        @foreach(var item in Model.RetainedValues)
        {
            <div>@item</div>
        }
    </div>
    @using(Html.BeginForm())
    {
        @Html.EditorFor(m=>m.Something)
        <input type="submit"/>
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:05:56.470

只需为您的模型属性添加一个隐藏字段，然后您的预览值将被加载并传递回下一篇文章。

前任。：`@Html.HiddenFor(model => model.YourProperty)`

因此，知道您可以拥有两个属性，例如：一个名为 newValue，另一个名为 allValues。

您将其与隐藏字段一起使用的 allValues 以及用于插入新字段的 newValue。因此，在发布后，您只需将 newValue 添加到 allValues。

类似的东西：model.allValues += newValue;

--**更新**

或者您可以使用@Jesse 提到的会话或临时数据

对于这种情况，我更喜欢使用隐藏字段，因为它的复杂性较低，并且它的数据不需要安全，因为它无论如何都会显示给用户。

# objective-c - 除了 setNeedsDisplayInMapRect 什么时候调用 drawMapRect？

> ID：10661117
> 
> 赞同：1
> 
> 时间：2012-05-18T23:52:48.570
> 
> 标签：objective-c, ios, cocoa-touch, mapkit

我正在按照苹果提供的面包屑示例代码在用户位置后面画一条线。一切都很好，除非你放大得足够远，drawMapRect 停止被调用，即使我在每次新位置时都调用 setNeedsDisplayInMapRect 。

奇怪的是，我什至注释掉了整个程序中唯一一个我称之为 setNeedsDisplayInMapRect 的地方，当你缩小它时，它仍然为每个新位置调用 drawMapRect，但是如果你放大它就会停止。

奇怪的...

# wordpress - 什么是 wordpress.org 用于他们的代码文档？

> ID：10661128
> 
> 赞同：1
> 
> 时间：2012-05-18T23:54:04.873
> 
> 标签：wordpress, documentation

我喜欢 wordpress.org 如何显示和组织他们的代码文档。

[http://codex.wordpress.org/Function_Reference/wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)

有谁知道他们是否使用特定的软件来生成他们的文档？或者他们会安排人来写这一切。我很想知道我正在处理的项目文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:02:36.910

媒体维基[http://mediawiki.org](http://mediawiki.org)

也被维基百科使用

# mysql - mysqldump 阻止innodb 数据库上的插入？

> ID：10661131
> 
> 赞同：0
> 
> 时间：2012-05-18T23:54:19.537
> 
> 标签：mysql, mysqldump

在 innodb 数据库上执行默认 mysqldump 时，它是否执行表锁定和挂起的“INSERTS”排队？我有事务数据库，在 100K+ 记录中，我发现可能有 2-3 打重复记录（所有字段都相同，例如时间戳，除了主键）。

我怀疑前端应用程序上的用户在进行数据库备份时单击了 GUI 上的“保存”，然后再单击了几次，直到他收到响应。这就是我的理论。

请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:01:36.270

我相信`mysqldump`默认情况下会锁定。由于您使用的是 innodb，因此请使用它`--single-transaction`来防止锁定（请参阅[此问题](https://stackoverflow.com/questions/104612/run-mysqldump-without-locking-tables)）。或者使用类似[innodb 热备份工具](http://www.innodb.com/wp/products/hot-backup/)。

# html - CancelableFormController 和 2 个提交按钮

> ID：10661133
> 
> 赞同：0
> 
> 时间：2012-05-18T23:54:45.513
> 
> 标签：html, spring-mvc

如果在表单上按下 Enter，我的 CancelableFormController 似乎会选择 2 个提交按钮的第一个操作。

即如果我的successView 是success.jsp 而cancelView 是cancel.jsp 并且在我的表单上Cancel 按钮出现在Register 之前，当我按下回车键时会调用cancel.jsp。

为什么会这样。我的按钮代码是：

<input type="submit" name="cancel" value="<spring:message code="submit.cancel"/>"/> <input type="submit" value="<spring:message code="submit.注册"/>"/>

我可以改变这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:23:30.863

如果您的 jsp 中有两个单独的提交按钮，并不意味着您的控制器将基于此执行不同的操作。

这里的事情是，每当您提交任何按钮时，它都会执行在表单标记中定义的相同操作。

您需要为每个提交按钮有两个单独的表单，并且它们必须具有在其中定义的单独操作。

# python - 您将如何从以下坐标绘制椭圆？

> ID：10661134
> 
> 赞同：1
> 
> 时间：2012-05-18T23:54:55.463
> 
> 标签：python, graphics

我正在尝试使用 python 中的媒体模块从这些坐标中绘制一个椭圆形。

(244,88) 至 (288,44)

这是我到目前为止所拥有的：

```
import media
from color import *

z=media.create_picture(640, 400, white)
media.add_oval_filled(y, 288, 44, 44, 88, black)

media.show(z) 
```

我知道这是不对的，但是我怎么能从上述坐标中画一个圆。这将产生一个倾斜的椭圆形。（请只使用媒体模块和颜色！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:39:25.810

如果你想画一个从 (244,88) 到 (288,44) 的椭圆，你的宽高应该是 44 和 44 而不是 44 和 88。所以试试这个

```
z=media.create_picture(640, 400, white)
media.add_oval_filled(z, 244, 88, 44, 44, black)
media.show(z) 
```

绘制圆弧使用`pygame`模块。

要绘制椭圆的部分截面，请使用

```
pygame.draw.arc(Surface, color, Rect, start_angle, stop_angle, width) 
```

# iphone - 单点触控中的 aync 和等待

> ID：10661137
> 
> 赞同：9
> 
> 时间：2012-05-18T23:55:15.950
> 
> 标签：iphone, xamarin.ios, c#-5.0

目前是否可以在 Monotouch 5.2.11 中使用异步和等待。哪些 c# 5.0 功能已经可用？为什么 xamarin mobile 需要用于 wp7 的异步 CTP - 这有点告诉我该库使用了一些异步功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T01:24:09.067

自 2013 年 2 月起，MonoTouch 目前不附带 C# 5.0 编译器。

我们计划在 2013 年 4 月启动对 Evolve 会议 (xamarin.com/evolve) 的异步支持。

# 旧回应

截至 2012 年 5 月 19 日，答案是：我们正在等待微软正式发布他们的编译器，这表明他们不会对语言或运行时进行更改。

在此之前，发布可能会破坏的功能是不安全的。

Xamarin.Mobile 库的计划不同，它目前处于测试阶段，因此它可以使用一些即将推出的功能。

我们的计划是在微软发布带有 C# 5 的官方 Visual Studio 2012 之后不久发布基于 C# 5 的 MonoTouch

# android - 开发可调整大小的小部件的最佳实践是什么？

> ID：10661139
> 
> 赞同：1
> 
> 时间：2012-05-18T23:55:41.823
> 
> 标签：android, android-widget, widget, resizable

主要需求：可调整大小的小部件

次要需求：广泛的 Android 操作系统，在版本 1.6(donut) - 4.04(ics) 上运行

在小部件上，它上面有图像和文本。虽然小部件不可调整大小，但有许多自定义启动器允许我们调整小部件的大小。调整大小后，小部件看起来很糟糕。

实现这一目标的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:07:37.437

它在这里[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# html - 里面的图片 隐藏数字？

> ID：10661142
> 
> 赞同：1
> 
> 时间：2012-05-18T23:56:22.783
> 
> 标签：html, css

```
<ol>
   <li><img src="someimage" class="pic"> text</li>
   <li>some </li>
</ol> 
```

和风格：

```
.pic {float:left;} 
```

基本上第一个元素不显示`1.` 计数从第二个`<li>`开始`2.`

如果删除图像上的 float:left，则数字 1\. 再次显示。有什么想法吗？

示例： http: [//jsfiddle.net/jHS2S/](http://jsfiddle.net/jHS2S/)
截图：http: [//i45.tinypic.com/34t7eaq.png](http://i45.tinypic.com/34t7eaq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:38:09.250

让图像大小为 24x24 然后使用

```
<ol>
   <li style="min-height:24px;"><img src="someimage" class="pic"> text</li>
   <li style="min-height:24px;">some </li>
</ol> 
```

这是一个演示[http://jsfiddle.net/jHS2S/1/](http://jsfiddle.net/jHS2S/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:05:16.407

您的列表样式位置是否设置在列表中？如果您使用`list-style-position:inside;`的是 li 容器内的数字，它将被 float:left 覆盖。尝试`list-style-position:outside;`

`clear:left`如果您的图像比行高高得多，您可能还想在 li 类中添加一个。

# c# - 按国家和关键字/词搜索？

> ID：10661144
> 
> 赞同：0
> 
> 时间：2012-05-18T23:57:04.760
> 
> 标签：c#, .net-4.0, google-places-api

我最近开始使用 google places api 并且是它的一个大菜鸟，我查看了有关如何在 API 上运行查询的主要文档，但似乎它不支持我想要的或者我看错了地方。

我需要在特定地点搜索特定术语，例如：

*   餐馆和美国

这是可能的还是我必须如何使用 API 来生产它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:41:59.353

当您进行地点搜索时：[https](https://developers.google.com/maps/documentation/places/#PlaceSearches) ://developers.google.com/maps/documentation/places/#PlaceSearches 您可以指定一个`types`参数来限制您正在搜索的事物的类型。

或者，您可以指定一个`keyword`参数，该参数在整个 Place 记录中选择某个术语。

对于位置，您唯一的选择是选择纬度/经度对并指定半径。这不适用于“美国”，因为最大半径为 50000 米。但是，您可以将其添加为关键字。对于城市等位置，您可以先进行地理编码以获得纬度/经度对： [https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# css - CSS - 顶级属性

> ID：10661145
> 
> 赞同：0
> 
> 时间：2012-05-18T23:57:16.510
> 
> 标签：css, properties

在 CSS 中，top 属性是与页面的顶部相关，还是与父元素的顶部相关？如果不是父元素的顶部，是否附加了一些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:05:02.620

[CSS/顶部定义](http://www.w3.org/wiki/CSS/Properties/top)

**对于绝对定位元素：** 此属性指定元素的上边距边缘与其包含块的上边缘之间的距离。

**对于相对定位的元素：** 此属性指定相对于框本身的顶部边缘的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:03:11.193

如果元素本身是绝对定位的，则“top”属性指的是元素与其最近定位的父元素的顶部偏移量。如果元素使用相对定位进行定位，则 top 属性指示元素将定期呈现的位置的顶部偏移量。因此，例如，一个相对位置为 2px 的元素会比它原本渲染的位置低 2 个像素。

我不认为我真的理解你的问题，你能用另一种方式问吗？

# java - android：通过类传递变量？

> ID：10661148
> 
> 赞同：2
> 
> 时间：2012-05-18T23:57:27.173
> 
> 标签：java, android, parameter-passing

我想知道如何通过类传递数据/变量？

**类.java**

```
public class AddItem extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
         mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
         mlocListener = new CurrentLocation();
         mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    }   
}

public void sendDataDetail(View v){
    // This is where my HTTPPOST goes, need the location here
}

public class CurrentLocation implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {
        // TODO Auto-generated method stub
        loc.getLatitude();
        loc.getLongitude();
        String Text = "My Current Location is: " + "Lat = " + loc.getLatitude() + "Long = " + loc.getLongitude();
        Toast.makeText(getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
    }
} 
```

所以基本上，我在 onCreate 中有 CurrentLocation()，然后在`sendDataDetail`. 然后我有一个类可以获取位置。

如何获取该位置并将其发送到`sendDataDetail`？我应该采取什么方法？

请注意，我还在学习android，

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:03:58.323

在 Android 中，[sharedpreferences](http://developer.android.com/guide/topics/data/data-storage.html)用于在类之间传递信息。

这是我知道的最简单的例子来解释它是如何工作的。[http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:21:29.783

在某些用例中，您可以在某处放置一个静态变量供两个类引用。这将是最简单的，它会让学究们不寒而栗，这总是一件好事。好吧，当然，除非他们是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:04:03.713

一种方法是扩展 Application 类并使用数据获取实例，将其填充到一个类中并在另一个类中使用它。在 StackOverflow 上查看[这个](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables/708317#708317)问题。

基本上，您所做的是扩展 Application 对象并添加您的字段（在您的情况下为位置）并将其设置在一个地方并在另一个地方获取它。这是我提到的链接中的示例代码：

```
class MyApp extends Application {

  private String myState;

  public String getState(){
    return myState;
  }
  public void setState(String s){
    myState = s;
  }
}

class Blah extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
  }
} 
```

还有其他方法，但是这个解决方案还不错！

# mysql - 如何继承mysql表

> ID：10661156
> 
> 赞同：1
> 
> 时间：2012-05-18T23:58:32.460
> 
> 标签：mysql, inheritance

我在一个数据库中有 30 个表，都是 InnoDB。他们有他们的结构。

我想要做的实际上是将波纹管列添加到每个表中。

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text COLLATE utf8_unicode_ci NOT NULL,
 `description` text COLLATE utf8_unicode_ci NOT NULL,
 `categoryId` int(11) NOT NULL,
 `imageId` int(11) NOT NULL,
 `created` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
 `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 `createdId` int(11) NOT NULL,
 `updatedId` int(11) NOT NULL,
 `allowedEmployeeIds` text COLLATE utf8_unicode_ci NOT NULL, 
```

在编程语言（假设 PHP）中，通常的方法是创建一个抽象类，将所有公共变量放在那里，然后从它继承。那么 MySQL 呢？我该怎么做？

由于设计原因，我无法创建`commonData`表并使用外键/连接。请注意，我是从头开始编写创建语句，因此无需更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:04:37.287

我认为最实用的方法是使用 GUI mysql 界面来复制表。例如，在 mac 上，您可以使用 SequelPro 并根据需要复制表，这只需几秒钟，而不是`CREATE TABLE`在 shell 脚本或其他方式中编写 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:06:29.980

Mysql没有表继承的概念。您需要将所有这些列添加到每个表中。我会编写一个脚本来`MODIFY TABLE ... ADD ...`为您关心的每个表生成语句，然后针对您的数据库运行结果。

我怀疑您是否找不到其他方式来组织您的数据，而无需将相同的确切列添加到 30 个表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:11:04.827

我会考虑一段时间 - 它很复杂，并且会为您尝试做的事情增添光彩。以后会增加很多工作。

但是如果你真的想这样做，方法不是把它放在表定义中，而是创建一个脚本，*可以将这些列添加到表中*。

就像是：

```
ALTER TABLE table_name
ADD `id` int(11) NOT NULL AUTO_INCREMENT,
ADD `name` text COLLATE utf8_unicode_ci NOT NULL,
ADD `description` text COLLATE utf8_unicode_ci NOT NULL,
ADD `categoryId` int(11) NOT NULL,
ADD `imageId` int(11) NOT NULL,
ADD `created` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
ADD `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
ADD `createdId` int(11) NOT NULL,
ADD `updatedId` int(11) NOT NULL,
ADD `allowedEmployeeIds` text COLLATE utf8_unicode_ci NOT NULL; 
```

然后只需为您拥有的每个表执行此脚本。

如果您想编写脚本来执行此操作，请使用以下命令：

```
SHOW TABLES; 
```

找到所有的表。然后循环遍历所有表并在所有表上执行 alter 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T14:13:33.490

我知道这是一个老话题，但所提供的解决方案展示了如何在创建表时创建所需的列 - 真的是一种节省打字的设备。

我更多地从设计的角度考虑这个问题。在这种情况下，可以使用公共列定义第二个表。例如 ：

```
CREATE TABLE article 
    :
    :

CREATE TABLE classified_ad
     :
     :

CREATE TABLE details
    :
 `details_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text COLLATE utf8_unicode_ci NOT NULL,
 `description` text COLLATE utf8_unicode_ci NOT NULL,
       :
 `categoryId` int(11) NOT NULL,
 `allowedEmployeeIds` text COLLATE utf8_unicode_ci NOT NULL,

  parent_id int(11) NOT NULL
  parent_table enum('classified_ad', 'article') 
```

这样做的一个问题是强制加入会影响性能。因此，这些模式可能不会有太多好处。

但是，如果您需要报告详细信息。例如报告允许的员工，然后这将看到好处，例如

```
SELECT * from details WHERE allowedEmployeeIds = '1'; 
```

相比之下，在使用单独的表时使用联合。

# r - 如何获取数据框中所有列的类？

> ID：10661159
> 
> 赞同：92
> 
> 时间：2012-05-18T23:59:04.147
> 
> 标签：r

找出数据框中每列是什么类的简单方法是什么？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-18T23:59:26.377

一种选择是使用`lapply`and `class`。例如：

```
> foo <- data.frame(c("a", "b"), c(1, 2))
> names(foo) <- c("SomeFactor", "SomeNumeric")
> lapply(foo, class)
$SomeFactor
[1] "factor"

$SomeNumeric
[1] "numeric" 
```

另一种选择是`str`：

```
> str(foo)
'data.frame':   2 obs. of  2 variables:
 $ SomeFactor : Factor w/ 2 levels "a","b": 1 2
 $ SomeNumeric: num  1 2 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-07-05T06:22:02.627

您可以简单地使用`lapply`或`sapply`内置函数。

`lapply`会给你一个`list`-

```
lapply(dataframe,class) 
```

while`sapply`将采用最好的返回类型 ex。矢量等 -

```
sapply(dataframe,class) 
```

这两个命令都将返回所有列名及其各自的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-16T09:12:06.353

您好正在寻找相同的，它也可能是

```
unlist(lapply(mtcars,class)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-04T17:14:27.123

我想要一个比上面使用的好答案更紧凑的输出`lapply`，所以这是一个包装为小函数的替代方案。

```
# Example data
df <-
    data.frame(
        w = seq.int(10),
        x = LETTERS[seq.int(10)],
        y = factor(letters[seq.int(10)]),
        z = seq(
            as.POSIXct('2020-01-01'),
            as.POSIXct('2020-10-01'),
            length.out = 10
        )
    )

# Function returning compact column classes
col_classes <- function(df) {
    t(as.data.frame(lapply(df, function(x) paste(class(x), collapse = ','))))
}

# Return example data's column classes
col_classes(df) 
```

```
 [,1]            
w "integer"       
x "character"     
y "factor"        
z "POSIXct,POSIXt" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-05T09:17:11.333

您也可以使用`purrr`，类似于`apply`家庭功能：

```
as.data.frame(purrr::map_chr(mtcars, class))
purrr::map_df(mtcars, class) 
```

# air - 从 SSH 运行 adt（Adobe 的 AIR 开发工具）

> ID：10661160
> 
> 赞同：2
> 
> 时间：2012-05-18T23:59:05.123
> 
> 标签：air, adt, headless

尝试从 SSH 会话运行 adt 会导致：

```
Exception in thread "main" java.lang.InternalError: Can't connect to window server - not enough permissions.
 at java.lang.ClassLoader$NativeLibrary.load(Native Method)
 at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1827)
 at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1724)
 at java.lang.Runtime.loadLibrary0(Runtime.java:823)
 at java.lang.System.loadLibrary(System.java:1045)
 at sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:50)
 at java.security.AccessController.doPrivileged(Native Method)
 at java.awt.Toolkit.loadLibraries(Toolkit.java:1605)
 at java.awt.Toolkit.<clinit>(Toolkit.java:1627)
 at java.awt.Dimension.<clinit>(Dimension.java:70)
... 
```

通常这可以通过传递`-Djava.awt.headless=true`给java来解决。但是，adt 会在没有此参数的情况下生成其他 java 进程，因此此解决方案不起作用。

我能够通过将 /usr/bin/java 替换为包含以下内容的 shell 脚本来破解我的方法：

```
java.old -Djava.awt.headless=true "$@" 
```

但是，这会影响在此框上运行的所有 java 进程，从而导致许多其他问题。一定有更好的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:09:08.887

我刚刚注意到有一个非常简单的解决方法。我在 OS X 上对此进行了测试，虽然不完全是一个解决方案，但可能已经足够好了。只需确保尝试通过 ssh 进行 adt 的用户具有打开的控制台会话，并且 adt 将运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:31:21.207

您倾向于找到的唯一解决方法是让您的 Jenkins 用户成为 OSX 上的实际用户。
我一直不得不依靠在我的 OSX 构建盒上将 Jenkins 设置为普通用户。即使使用 Xvfb Jenkins 插件也无济于事。这非常令人沮丧。

Adobe在这里有一个相当无用的线程：

> [http://forums.adobe.com/message/4162406](http://forums.adobe.com/message/4162406)

这里还有另一个线程用于将部分作业包装在 shell 脚本中：

> [https://groups.google.com/forum/?fromgroups=#!topic/fluint-discussions/tL6AEWKgDfw](https://groups.google.com/forum/?fromgroups=#!topic/fluint-discussions/tL6AEWKgDfw)

# android - 在片段中使用 AdMob？

> ID：10661162
> 
> 赞同：1
> 
> 时间：2012-05-18T23:59:27.853
> 
> 标签：android, android-fragments, admob

我已经开始开发一个新的应用程序，我决定`Fragment`通过 v13 支持包使用 s 开始这个应用程序，这样我就可以构建一个同时进行手机和平板电脑设计的应用程序。

如果我从 XML 文件中创建 AdMob 广告，则我的 AdMob 广告在片段中工作，但是，如果我尝试通过代码创建它们，我会遇到问题。

```
public class Fragment_Admob extends Fragment implements AdListener 
{

    private static final String LOG_TAG = "Fragment_Admob";

    private AdView adView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {

        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.admob_view, container, false);

        // Create an ad.
        adView = new AdView(this, AdSize.BANNER, "My_AdMob_Code");

        ...
    }

    ...
} 
```

日食告诉我：

> 构造函数 AdView(Fragment_Admob, AdSize, String) 未定义

所以我觉得这很有意义，因为 AdView 需要一个 Activity 而不是 Fragment。因此，我尝试使该类扩展 FragmentActivity 而不是 Fragment 并解决了该特定问题。但是现在我在运行时遇到了片段扩展问题，我之前已经解决过，但我无法在这里解决，因为我真的不认为我应该在非活动代码集中使用 FragmentActivity。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:58:47.670

我意识到我试图在片段中放置广告是错误的。相反，我让我的类扩展了 FragmentActivity，然后将我的布局设置为 RelativeLayout，并在底部注入了一个新的 RelativeLayout，并具有正确的重力以使其保持不变。Fragments 然后驻留在RelativeLayout 内并相应地调整大小。

```
public class MyClass extends FragmentActivity implements AdListener 
{
    // Create an ad.
    adView = new AdView(this, AdSize.SMART_BANNER, "MY_ID");
    // Set the AdListener.
    adView.setAdListener(this);
    // Add the AdView to the view hierarchy. The view will have no size until the ad is loaded.
    RelativeLayout layout = (RelativeLayout) findViewById(R.id.home_layout);
    RelativeLayout.LayoutParams adsParams =new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT); 
    adsParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    layout.addView(adView,adsParams);
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    // Start loading the ad in the background.
    adView.loadAd(adRequest);
} 
```

# c++ - C++：如何在编译时创建一个常量？

> ID：10661165
> 
> 赞同：0
> 
> 时间：2012-05-19T00:00:06.517
> 
> 标签：c++, hash

我想在编译时创建一个常量。这就是我的意思：

```
template <int M = 31>
int fast_hash(int prev_hash, int c1, int c3)
{
    enum {m3 = m*m*m;}
    return m * prev_hash - m3 * c1 + c3;
} 
```

在上面的示例中，我可以在每次调用函数时计算 m3 = m*m*m，但我认为如果只在编译期间执行一次会更酷。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:02:02.437

最好使用**C++11**来完成`constexpr`，但在**C++03**中，您仍然可以使用元函数来完成：

```
template< int M >
struct some_calculation
{
    static const int value = M * M * M;
}; 
```

它当然*更酷*，但我认为你担心它太多太早了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T01:54:07.243

我认为您误解了您提供的代码在 C++ 中的作用：

```
template <int M = 31>
int fast_hash(int prev_hash, int c1, int c3)
{
    enum {m3 = m*m*m;}
    return m * prev_hash - m3 * c1 + c3;
} 
```

在原始代码中，`m3`已经是一个编译时常量（constant expression）。编译器将计算它并用值替换用途。请注意，您只能从常量表达式（在编译时计算）设置枚举数的值。

事实上，这是一个过早的优化。在大多数情况下，您甚至不需要定义枚举，因为给定编译时间常数`M`（模板参数），所有编译器都将替换`M*M*M`为正确的值。这对编译器来说是微不足道的，没有生产级编译器会做不到。

# c# - 在 C# 中用长列表声明元组

> ID：10661166
> 
> 赞同：0
> 
> 时间：2012-05-19T00:00:08.513
> 
> 标签：c#

我想声明一个包含布尔值和长列表的元组。

这就是我所拥有的，但它在最后一个列表中带有红色下划线：

```
Tuple<bool, List<long>> TheTuple = new Tuple<bool,List<long>>(false, List<long>); 
```

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:06:25.927

```
Tuple<bool, List<long>> TheTuple = Tuple.Create(false, default(List<long>)); 
```

请注意，它将`Item2`元组的属性设置为 null，这可能不是您想要的。如果要将其设置为实际`List<long>`，请使用`new List<long>()`：

```
Tuple<bool, List<long>> TheTuple = Tuple.Create(false, new List<long>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:03:15.373

您正在将类型描述传递给构造函数，您需要传入该类型的变量。（可能是一个Doh！时刻）

# javascript - 调用 javascript 函数时何时使用 ()

> ID：10661167
> 
> 赞同：3
> 
> 时间：2012-05-19T00:00:14.493
> 
> 标签：javascript, function, parameters

所以在之前的问题中，我被告知要调用/执行/启动函数，例如`thisFunc;`而不是`thisFunc();`.

而且我发现有时这有效，有时则无效。

```
<script type='text/javascript'>
var valgo = 0;
var thing = "";
var lastPost = document.getElementById(<? echo $_SESSION['countything']; ?>); 
lastPost.style.opacity = valgo;

function valgogoer(thing){
valgo += .05;
if (lastPost.style.opacity < 1){
lastPost.style.opacity = valgo;
}
}

setInterval(function(){valgogoer(<? echo $_SESSION['countything']; ?>)}, 50);

// Somethings are leftover from when I was messing with it, like the parameter thing.
</script> 
```

在这段代码中（如果它很糟糕，请告诉我），因为我使用 setInterval 来调用一个带参数的函数，我通过研究发现它必须按照上面的方式调用。

所以两个问题

1.  我什么时候应该在调用函数时使用 () ？

2.  在上面的代码中，我怎样才能让它在不透明度达到 1 后停止执行该函数。目前它被限制为 1，但它仍在被调用，我有一种感觉最好停止被调用的函数，而不是让它被调用但不做任何事情。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:05:03.283

当您要调用该函数时，请使用方括号。但如果只是想传递函数的内容，你就不要。例子：

```
var a = function(){
    return "I'm a function";
}
var b = a;//Equals to function(){return "I'm a function";}
var c = a();//Equals to "I'm a function" 
```

在事件处理程序中，您不使用方括号，因为您必须告诉浏览器才能执行函数的内容。如果你放它们，浏览器会调用函数的返回值，这可能会导致错误：

```
var a = function(){
    alert("Welcome to my site");
}
window.onload = a();//Wrong, equals to undefined, since the a function doesn't return any value
window.onload = a;//Correct, calls the function a when the event is fired 
```

当您使用函数作为参数调用 setInterval 方法时，也会发生同样的事情。这就是为什么括号如此重要的原因

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:15:26.307

`thisFunc()`当你想调用函数时使用。当您`thisFunc`希望将函数的引用作为值时使用。

当您的函数没有参数时，您可以将引用用于回调：

```
function thisFunc() {
  // do something
}

window.setTimeout(thisFunc, 1000); 
```

当您的函数有参数时，您需要将其包装在另一个函数中以使用参数值调用它：

```
function thisFunc(param1) {
  // do something
}

window.setTimeout(function(){ thisFunc(42); }, 1000); 
```

您当然也可以在函数中包装无参数函数：

```
function thisFunc() {
  // do something
}

window.setTimeout(function(){ thisFunc(); }, 1000); 
```

您不需要使用匿名函数来包装函数，您可以使用命名函数并获取对其的引用：

```
function thisFunc(param1) {
  // do something
}

function callFunc() {
  thisFunc(42);
}

window.setTimeout(callFunc, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:08:54.253

`()`当您希望另一个函数执行您的函数时使用

```
function log(arg) { console.log(arg); }

setTimeout(log, 1000) // Logs undefined after 1 second

log("hi"); // logs the String hi 
```

该功能是可重用的，因此您可以自己实际使用它

```
function logUsingTheLogMethod( callback ) {
    if ( typeof callback === "function" ) {
        callback( "This will log to the console!" );
        callback( log === callback ); // Logs true
    }
}
logUsingTheLogMethod( log ); 
```

这是 JS 中的一种常见模式，在方法中使用函数作为回调

假设您有一些计算数学的函数，但您不想为所有函数编写日志记录方法。

```
function add(a,b,fn) {
    if ( fn === log ) {
       fn( a + b );
    }
}
function subtract(a,b,fn) {
    if ( fn === log ) {
       fn( a - b );
    }
}

add(1, 2, log); // logs 3
subtract(5, 4, log) // logs 1 
```

或修改函数以确保它是函数而不是日志函数，并且您可以对响应执行任何操作

```
function add(a,b,fn) {
    if ( typeof fn === "function" ) {
       fn( a + b );
    }
}

// answer is automatically passed in by the calling add method
add( a, b, function ( answer ) { 
     // do ssomething with the answer
     alert( answer );
}); 
```

# wpf - BackgroundWorker 未引发 RunWorkerCompleted 事件

> ID：10661168
> 
> 赞同：0
> 
> 时间：2012-05-19T00:00:19.277
> 
> 标签：wpf, backgroundworker

在我的应用程序的业务逻辑层中，我有以下类：

```
public class EocMonitor : DeviceMonitor {

    public BackgroundWorker BackendWorker { get; set; }

    public BackgroundWorker EocWorker { get; set; }

    public EocMonitor() {
        BackendWorker = new BackgroundWorker {
            WorkerReportsProgress = true,
            WorkerSupportsCancellation = true
        };
        BackendWorker.DoWork += BackendWorker_DoWork;

        EocWorker = new BackgroundWorker {
            WorkerReportsProgress = true,
            WorkerSupportsCancellation = true
        };
        EocWorker.DoWork += EocWorker_DoWork;
    }

    private void BackendWorker_DoWork( object sender, DoWorkEventArgs e ) {
        // Does some lengthy operation
    }

    void EocWorker_DoWork( object sender, DoWorkEventArgs e ) {
        // Does some lengthy operation
    }

    public void GetDiagnostics() {
        BackendWorker.RunWorkerAsync( new DiagnosticsInfo() );
            EocWorker.RunWorkerAsync( new DiagnosticsInfo() );
    }

}

public class DiagnosticsInfo {

    public int DataTypeCount { get; set; }

    public int DataTypesProcessed { get; set; }
} 
```

`BackgroundWorkers`用于通过线路从我的应用程序中运行的 2 个其他进程查询信息。回复可能需要一段时间才能回复。此外，数据可能需要一段时间才能恢复。

我的应用程序主窗口中有一个名为`Dashboard`. `Dashboard`上面有一个 `DataGrid`显示冗长操作的结果。因为它们很长，所以它上面还有一个`Button`名为 Refresh 的启动进程。而且，因为它可能需要很长时间才能运行，所以我`ProgressControl`在表单上写了一个名为 a 的 UserControl。这包括一个 Cancel `Button,`a`ProgressBar`和一个`TextBlock`可以显示消息的位置。当用户单击 Cancel`Button`时，刷新停止。

以下是一些代码`Dashboard`：

```
public partial class Dashboard : UserControl {

    public Dashboard() {
        InitializeComponent();
    }

    private Dashboard_Loaded( object sender, RoutedEventArgs e ) {
        if ( !setupProgress && EocMonitor != null ) {
             EocMonitor.BackendWorker.ProgressChanged += BackendWorker_ProgressChanged;
             EocMonitor.BAckendWorker.RunWorkerCompleted += BackendWorker_RunWorkerCompleted;
             EocMonitor.EocWorker.ProgressChkanged += EocWorker_ProgresChanged;
             EocMonitor.EocWorker.RunWorkerCompleted += EocWorker_RunWorkerCompleted;
        }
    }

    private void BackendWorker_ProgressChanged( object sender, ProgressChangedEventArgs e ) {
        DiagnosticsInfo info = e.UserState as DiagnosticsInfo;

        // Other processing to notify the user of the progress
    }

    private void BackendWorker_RunWorkerCompleted( object sender, RunWorkerCompletedEventArgs e ) {
        // Processing to do when the back-ground worker is finished
    }

    private void DiagnosticsProgressCtrl_Click( object sender, RoutedEventArgs e ) {
        EocMonitor.BackendWorker.CancelAsync();
        EocMonitor.    EocWorker.CancelAsync();

        DiagnosticsProgressCtrl.Visibility = Visibility.Collapsed;

        e.Handled = true;
    }

    void EocWorker_RunWorkerCompleted( object sender, RunWorkerCompletedEventArgs e ) {
        // Processing to do when the back-ground worker is finished
    }

    private void RefreshButton_Click( object sender, RoutedEventArgs e ) {
        DiagnosticsProgressCtrl.Maximum = DiagnosticsProgressCtrl.Minimum = DiagnosticsProgressCtrl.Value = 0.0;

        DiagnosticsProgressCtrl.Visibility = Visibility.Visible;

        backendDataTypeCount   = eocDataTypeCount   = 0;
        backendWorkerCompleted = eocWorkerCompleted = false;

        EocMonitor.GetDiagnostics();

        e.Handled = true;
    }

} 
```

问题是我在 DoWork 方法中放置了断点并观察它们运行到完成，但没有调用 RunWorkerCompleted 方法。没有发生或抛出错误。这个东西是 EocMonitor 类和 Dashboard 类在两个不同的 DLL 中。这有什么区别吗？据我所知，它不应该，但我不明白为什么完成的事件处理程序没有被调用。我应该`BackgroundWorkers`在前端应用程序中实例化吗？

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:11:56.203

该事件已引发，但您看不到它，因为您没有订阅该`RunWorkerCompleted`事件...

```
BackendWorker.RunWorkerCompleted += BackendWorker_RunWorkerCompleted;
EocWorker.RunWorkerCompleted += EocWorker_RunWorkerCompleted; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:26:39.640

好吧，在我发布了上述内容之后，我回去并稍微改变了一些东西。我现在实例化控件`BackgroundWorker`中的对象`Dashboard`并将它们传递给 EocMonitor 的`GetDiagnostics`方法。EocMonitor 中保存这些对象的属性具有私有设置器，因此使用它们的唯一方法是创建它们并将它们传递给该方法。中的代码`Dashboard_Loaded`现在移动到`RefreshButton_Click`方法中，并在对象实例化之后运行，然后再传递给`GetDiagnostics.`

这一切现在都有效！我看到`Progress_Changed`方法和`RunWorkerCompleted`方法运行。

它只是打动了我为什么它可能不起作用。EocMonitor 对象是在我的程序初始化阶段在非 UI 线程上创建的。由于它在 UI 对象中调用方法，因此可能无法调用这些方法。可能会抛出某种类型的无效操作异常，但没有地方可以捕获它。

所以让它成为一个教训：`BackgroundWorker`必须在 UI 线程上的代码中实例化。

# html - 如何在选择元素上使用插入框阴影？

> ID：10661170
> 
> 赞同：1
> 
> 时间：2012-05-19T00:00:33.200
> 
> 标签：html, css, html-select

[这](http://jsfiddle.net/AlienWebguy/UD2QP/)是在选择标签上使用框阴影的示例。

但是这里使用了 wrapper 元素，所以 inset 属性在那里不起作用。

是否可以在选择标签上使用插入框阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T10:46:01.007

我设法通过用 div 包装选择元素来做到这一点。这是一个工作示例 - [http://jsfiddle.net/UD2QP/779/](http://jsfiddle.net/UD2QP/779/ "Js小提琴")。

**HTML**：

```
<div class="select_wrapper">
    <select name="type" id="type">
        <option value="week">11 week</option>
        <option value="month">11 month</option>
    </select>
</div> 
```

**CSS**：

```
select,
div.select_wrapper {
    display: block;
    width: 430px;
    color:#58595b;
    font-weight: normal;
    font-size: 16px;
    font-family: "Arial", sans-serif;
    padding:5px;
    margin-top:5px;
    margin-bottom: 10px;
    background: #fff;
    -moz-box-shadow: inset 0px 0px 7px  rgba(0, 0, 0, 0.33);
    -webkit-box-shadow: inset 0px 0px 7px  rgba(0, 0, 0, 0.33);        
    box-shadow: inset 0px 0px 7px  rgba(0, 0, 0, 0.33);
    outline: none;
    border: none;
    resize:none;
}

select {        
    padding: 0px;
    margin:0px;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
}

div.select_wrapper {
    margin:0;
    padding:5px;
    margin-top:5px;
    margin-bottom: 10px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:16:16.947

它似乎可以工作，`input="text"`但我怀疑它会在`select`-s上工作

```
select, input {
  -webkit-box-shadow: 5px 5px 5px #666;
  -moz-box-shadow: 5px 5px 5px #666;
  box-shadow: 5px 5px 5px #666;

  display:block;
  margin:20px;
  padding: 3px;
  border: 0;
  outline: 1px solid #666;
}
```

```
<input type="text" name="foo" placeholder="First Name" />

<select name="bar">
  <option value="foobar">Foobar</option>
  <option value="bazbat">Bazbat</option>
</select>
```

# php - PHP：一种将列表插入数据库的有效方法

> ID：10661174
> 
> 赞同：0
> 
> 时间：2012-05-19T00:01:12.187
> 
> 标签：php, mysql, database, performance

只是为了提高效率，我想在这里听听 PHP 专家的一些建议。（实际上，这个问题让所有经常搞乱数据库连接的开发人员都知道）

假设你有一个**personId**并且这个 id 有多个**numbers**。**您有一个包含pID**、**nums**列的表

 **从 php 方面，您可以在数组中检索这些数字。现在我的问题来了。你做类似的事情；

```
for($i=0;$i<count($arr);$i++)
{
   //Call the insert query over and over again
} 
```

或者显然有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:09:33.553

基本上你想做一个批量插入 - 执行一个复合语句比许多单独的插入更快，所以尝试：

```
$data is your array
$sql = array(); 
foreach( $data as $row ) {
    $sql[] = '("'.mysql_real_escape_string($row['field1']).'")';
}
mysql_query('INSERT INTO table (field) VALUES '.implode(',', $sql)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:09:03.677

如果您的数据集非常大，您可以查看将值转储到文件中，然后执行“LOAD DATA INFILE”（仅当 MySQL 与您的脚本在同一主机上运行时才有效）。

或者，您可以使用一个插入查询：

```
INSERT INTO table(pid,nums) VALUES (1,2), (1,3), (1,4), ... -- etc 
```

具有多个值。**

# php - 使用 Firefox 的 PHP 会话 unset()

> ID：10661178
> 
> 赞同：0
> 
> 时间：2012-05-19T00:01:30.767
> 
> 标签：php, firefox

当用户未在某些字段中输入数据时，我正在尝试显示错误消息。如果用户没有在字段中输入任何内容，我会将该错误存储在 Session 中。当用户点击回车并设置带有错误消息的会话时，它应该阻止用户继续并显示错误。当我显示错误时，我将会话中的错误存储在一个变量中，然后取消设置会话，然后循环遍历错误，将每个错误打印出来。这适用于除 Firefox 之外的所有浏览器。

在 Firefox 中，如果我尝试在页面上任何位置的会话上使用 unset() ，它也会清除变量中的值。好像变量引用了会话。这只是Firefox中的一个问题。我需要取消设置会话，否则它会影响我打印出错误消息的任何其他页面。

有人对如何解决这个问题有任何想法吗？

发现错误显示在我的 localhost 服务器上，但当我将其上传到网络时却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:21:55.143

当我遇到类似问题时，此解决方案解决了我的问题。

[http://sofiac.us/resources/press/20120521_firefox_unset.php](http://sofiac.us/resources/press/20120521_firefox_unset.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:04:08.063

为什么不将错误消息存储在数组中并检查数组是否为空？

```
$errors = array();

if(empty($_POST['variable']))
{
    $errors[] = "Variable empty.";
}

if(empty($errors))
{
    // Process form
}
else
{
    // Loop through the array and echo out each error messsage
} 
```

这会更有意义，并且可以保证在所有浏览器中工作。

# php - 使用 php 命令行

> ID：10661180
> 
> 赞同：2
> 
> 时间：2012-05-19T00:01:36.970
> 
> 标签：php, python

就像我们可以从它的命令行解释器在命令行中使用 python 来测试小代码片段是否正常一样，我怎样才能用 PHP 做同样的事情（或者我可以）？

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:22:14) [MSC v.1500 64 bit (AMD64)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> print "abc"
abc
>>>

C:\wamp\bin\php\php5.3.4>php -a
Interactive mode enabled 
```

不给我php提示

有人可以举例说明如何在 php 中使用交互式 shell。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:03:23.603

PHP 手册有一个关于[命令行使用](http://php.net/manual/en/features.commandline.php)的部分。

还有关于[交互式 shell](http://php.net/manual/en/features.commandline.interactive.php)的详细信息。

# git - 如何合并 Git 分支中的选定更改？

> ID：10661196
> 
> 赞同：1
> 
> 时间：2012-05-19T00:04:10.887
> 
> 标签：git, merge, conflict

我有两个分支用于开发和部署。我对要合并到开发分支的部署分支进行了一些更改。现在我希望合并命令在这种情况下显示冲突 -

```
//development
$path = 'localhost'; 
```

和

```
//deployment
$path = 'example.com'; 
```

相反，部署分支线只是替换了开发分支线。我可以挑选提交并将它们应用到开发分支或手动进行更改，但我认为必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:11:54.673

如果您在开发分支中也*更改*了它，它只会发生冲突。因此，因为您只在部署中更改了它，所以它只是一个正常的版本更改。

只需不要在您的变更集中提交该特定文件。（假设您没有对该文件进行其他更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:08:15.800

由于该配置文件变化很大，因此最好完全避免此类文件的任何合并问题。

您应该将该配置文件的值版本化到单独的文件中：

*   `config_dev.values`
*   `config_depl.values`

而且您将只有一个`config.template`带有占位符的版本化文件用于值：

```
// server name for dev or deployment or other environments
$path = '@@SERVER_NAME@@' 
```

这样，这个模板文件就不会改变，也不会被合并。
您还可以对能够在结帐时生成实际配置文件的脚本进行版本控制（不会进行版本控制，保持“私有”，即仅在您当前工作目录的本地）

![内容过滤器驱动程序](../Images/5a3c113802b7d7b142f404987deeace3.png)

如果您将该脚本声明为文件中的**[内容过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)**，它将`.gitattributes`在[只获取每个签出文件的内容](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)）`git checkout`

# delphi - KOL PBitmap 转 PJpeg

> ID：10661203
> 
> 赞同：0
> 
> 时间：2012-05-19T00:05:23.850
> 
> 标签：delphi, delphi-7

我将 Delphi7 与 KOL 组件和 JPegObj 一起使用。如何将 PBitmap 传输到 PJpeg？

```
var 
 MyBitmap : PBitMap;
 MyJpeg   : PJpeg;
begin
 MyBitMap := ....;
 MyJPeg.Bitmap.Assign (MyBitMap); // ===> Wrong?
 MyJPeg.SaveToFile ('C:\test.jpg');
end; 
```

谢谢你的帮助。

编辑：图片在这里：

![在此处输入图像描述](../Images/d65ad684b8b4c2cb607c06394f27bfd4.png)

编辑：我的代码：

```
program Project2;

{$APPTYPE CONSOLE}

uses
 Kol,
 JpegObj;

var
 Jpeg: PJpeg;
 Bitmap: PBitmap;

begin
 Bitmap := NewBitmap(50, 50);
 try
  Bitmap.Canvas.Brush.Color := $0000FF80;
  Bitmap.Canvas.Ellipse(0, 0, 50, 50);
  Jpeg := NewJpeg;
  try
   Jpeg.Bitmap := Bitmap;
   Jpeg.SaveToFile('test.jpg');
  finally
   Jpeg.Free;
  end;
 finally
 Bitmap.Free;
end; 
```

0041128E 处的运行时错误 216

编辑：我取消注释 JpegObj 中的行：

```
 {$DEFINE VER62} // if you plan to use .obj-files from Delphi7 distributive only! 
```

现在程序刚刚冻结。

编辑：程序在 JpegObj 中冻结

```
function __ftol: Integer;
 var
  f: double;
begin
 asm
  lea    eax, f             //  BC++ passes floats on the FPU stack
  fstp  qword ptr [eax]     //  Delphi passes floats on the CPU stack
 end;
 Result := Integer(Trunc(f));
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:43:15.310

***免责声明：以下内容已在 Delphi 2009 上进行了测试！***

您不能`PJpeg.Bitmap.Assign`在您的`PJpeg`实例上使用，因为在`PJpeg.Bitmap`您访问它时它是 nil，因为它没有在`PJpeg`构造函数中实例化，也没有在您使用该实例时被实例化。因此，尝试使用这些`PJpeg.Bitmap`会导致访问冲突。

尝试以这种方式分配位图（它基于[`JpegObj`](http://kolmck.net/Components/graphics/kolJpegObj.zip)扩展中的示例）：

```
var 
  MyJpeg: PJpeg;
  MyBitmap: PBitmap;
begin
  // the MyBitMap has a picture assigned here
  MyJpeg := NewJpeg;
  try
    MyJpeg.Bitmap := MyBitmap;
    MyJpeg.SaveToFile('c:\test.jpg');
  finally
    MyJpeg.Free;
  end;
end; 
```

这是一个 VCL 简约演示：

```
uses
  KOL, JPEGObj;

procedure TForm1.Button1Click(Sender: TObject);
var
  Jpeg: PJpeg;
  Bitmap: PBitmap;
begin
  Bitmap := NewBitmap(50, 50);
  try
    Bitmap.Canvas.Brush.Color := $0000FF80;
    Bitmap.Canvas.Ellipse(0, 0, 50, 50);
    Jpeg := NewJpeg;
    try
      Jpeg.Bitmap := Bitmap;
      Jpeg.SaveToFile('c:\image.jpg');
    finally
      Jpeg.Free;
    end;
  finally
    Bitmap.Free;
  end;
end; 
```

和惊人的结果:-)

![在此处输入图像描述](../Images/ee82bd4f7f7f8256cf8bea451a50ad03.png)

这是另一个控制台简约演示：

```
program Console;

{$APPTYPE CONSOLE}

uses
  SysUtils, KOL, JPEGObj;

var
  Jpeg: PJpeg;
  Bitmap: PBitmap;    
begin
  try
    Bitmap := NewBitmap(50, 50);
    try
      Bitmap.Canvas.Brush.Color := $0000CCFF;
      Bitmap.Canvas.Ellipse(0, 0, 50, 50);
      Jpeg := NewJpeg;
      try
        Jpeg.Bitmap := Bitmap;
        Jpeg.SaveToFile('c:\image.jpg');
      finally
        Jpeg.Free;
      end;
    finally
      Bitmap.Free;
    end;
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
end. 
```

和令人兴奋的结果:-)

![在此处输入图像描述](../Images/0f0bdcc19c5fd2d6a383629928dc4785.png)

# ruby-on-rails - 如何在 Rails 中实现自动启动和退出守护进程

> ID：10661204
> 
> 赞同：1
> 
> 时间：2012-05-19T00:05:35.507
> 
> 标签：ruby-on-rails, ruby, asynchronous, daemon, worker

Rails 社区为我的问题创建的可能解决方案的数量让我有点不知所措。所以也许任何人都可以帮助我弄清楚如何最好地解决它。

我想做的是编写一个行为类似于“dropbox”的 Rails 应用程序。一方面，它应该是一个 Web 界面，我可以在其中将文件上传和下载到我的 Web 服务器。这与我的数据库和所有这些东西交互。另一方面，我可以通过 SSH 访问该服务器，并且可以手动将文件放在那里。现在我希望这个文件系统操作触发我的 Rails 应用程序执行如果我通过 Web 界面创建文件时会执行的操作。

所以我以某种方式编写了一个守护进程，对吧？有很多解决方案， 比如
daemons.rubyforge.org/github.com/mirasrael/daemons-rails
github.com/costan/daemonz
github.com/kennethkalmer/daemon-kit

我想拥有的另一个功能是，我的 Rails 应用程序会在启动或退出我的 Rails 应用程序时自动生成和停止我的守护进程。所以“daemonz”似乎是最好的解决方案。但是当我进一步搜索时，我发现
github.com/FooBarWidget/daemon_controller/
这似乎更“高科技”并且已经在我与乘客一起部署时使用。但是我不明白当我退出 Rails 时它是否会杀死我的守护进程。我想情况并非如此，所以我想知道如何在我的应用程序中实现它。

实现“事物”以对文件系统更改做出反应的方式对我来说似乎很简单。我会使用
github.com/guard/listen/
（另一种选择是：github.com/ttilley/fssm）
但是我第一次真正面对这个协议时不明白的是，如果这会产生一个我能够与之通信的服务器或者我必须处理什么样的对象。

我想实现的最后一件事是一种工作队列，以便侦听文件系统更改与我的 rails 应用程序的操作分开。但是有这么多解决方案，我完全不知所措 ：
github.com/tobi/delayed_job/github.com/defunkt/resque [http://backgroundrb.rubyforge.org/](http://backgroundrb.rubyforge.org/)

[http://godrb.com/](http://godrb.com/)到底是什么
？这对我有什么帮助？

有没有人提示如何解决这个问题？非常感谢！

简

PS 我想发布所有 github 项目的链接，但不幸的是我没有足够的“声誉”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:10:54.720

我肯定会考虑创建一个监视相关目录的进程（守护进程）。然后，您的 Rails 应用程序可以直接将文件放入其中，而无需了解任何有关后端的信息，并且它也可以与 SSH 一起使用。

您的守护进程可以加载 Rails 环境并与您的数据库通信。我会把他们之间的所有沟通都留在那个层面。

至于使用 Rails 应用程序启动/停止它……你确定吗？我使用上帝（红宝石宝石）来启动/监控进程。它也会为你“守护”你的 Ruby 应用程序。如果你愿意，你实际上可以告诉上帝停止你的目录监控进程，然后在 Rails 停止时退出。你可以从 Rails 初始化程序中触发上帝。

但是，如果您发现自己在 rails 未运行时使用 SSH 或其他方式将文件放入该目录，您可能会考虑将脚本放入 /etc/init.d 以在服务器启动时自动启动 God。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:28:13.797

[我认为您需要Guard](https://github.com/guard/guard)之类的东西来监视文件系统上的更改并在更改发生时执行操作。

至于上帝，你一定要调查一下。它将使您所依赖的启动/停止过程变得更加容易。我们使用了一段时间的 Bluepill，但是有很多错误，我们放弃了它并转向上帝，恕我直言，在大多数情况下，使用它更愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:51:31.743

您是否尝试过创建脚本文件，例如：

```
startDaemon.rb 
```

然后放置它：

```
config/initializers/ 
```

?

# php - 从 MySQL 表中检索值并保存在变量中

> ID：10661207
> 
> 赞同：1
> 
> 时间：2012-05-19T00:05:59.000
> 
> 标签：php, mysql, sql, wordpress

我有一个表（wp_postmeta），其中包含四列（meta_id、post_id、meta_key、meta_value）。meta_key 包含一个名为 neighbor_value 的字段，并且 neighbor_value 的值存储在 meta_value 列下。如何从我的表中检索neighborhood_value 的内容并将它们用作变量？任何支持表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:11:14.023

如果我理解正确，您想从 meta_value 中键入一个键列表吗？

我会在 php 中执行此操作：（假设您正在使用某种支持此构造的框架。此示例适用于 codeigniter 框架）

```
$sql = "SELECT distinct meta_value FROM wp_postmeta"
$result = $db->query($sql)
foreach ($result->reult() as $row) {
  $mydata[] = $row->meta_value;
} 
```

$mydata 现在是包含所有 meta_value 值的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:12:20.850

我正在做与以下相同的事情。

```
<?php foreach($values as $value)
{
    $myVarname[$value[valuefield]]=$value[valuefield];

}

$myVarname[field1]="Cow";
$myVarname[field2]="dog";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:16:35.337

好的，因为一切都是元，代码也将是“元”:)

**更新**- 现在，当我知道您使用什么连接到数据库时，我可以将答案更改为更具体。

```
global $wpdb;

$sql = "SELECT meta_key, meta_value FROM $wpdb->postmeta WHERE post_id=XXX";

$retMeta = array();
$results = $wpdb->get_results($sql);

foreach ($results as $resultRow)
{
    if (!isset($retMeta[$resultRow['meta_key']]))
    {
        $retMeta[$resultRow['meta_key']] = array();
    }
    $retMeta[$resultRow['meta_key']][] = $resultRow['meta_value'];
} 
```

生成的 $retMeta 将是二维数组，然后您将能够使用 $retMeta['neighbourhood_value'][0] 访问您的邻域值（当然首先您必须检查是否设置了 - `isset($retMeta['neighbourhood_value'])`）。

**更新2**

对于导入数据的脚本，它看起来像这样：

```
$sql = "SELECT meta_key, meta_value FROM wp_postmeta WHERE post_id=XXX";

$retMeta = array();
$result = mysql_query($sql);

while ($resultRow= mysql_fetch_assoc($result))
{
    if (!isset($retMeta[$resultRow['meta_key']]))
    {
        $retMeta[$resultRow['meta_key']] = array();
    }
    $retMeta[$resultRow['meta_key']][] = $resultRow['meta_value'];
}
mysql_free_result($result); 
```

但是无论如何你都应该使用 WP_Query 来保持可移植性（wp_postmeta 不必这样命名，它可以是 wp2_postmeta 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T00:16:54.433

如果您正在使用诸如 loop.php 等 Wordpress 模板文件，只需使用方便的[get_post_meta()](http://codex.wordpress.org/Function_Reference/get_post_meta)函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T01:44:03.413

你没有指定你想为你的变量使用什么语言——但如果它恰好是 MySQL 中的 SQL，这里是你如何“从 MySQL 表中检索值并保存在变量中”的方法：

```
select @var_name := column_name from table_name where other_column = 5; 
```

这会执行选择，并作为副作用将用户变量 @var_name 的值分配给 column_name 的值。

或者

```
select @var_name := count(*) from other_table where other_column > 5; 
```

它将@var_name 设置为匹配条件的记录数。

# php - 日志目录上的 chmod 777 安全漏洞？

> ID：10661212
> 
> 赞同：1
> 
> 时间：2012-05-19T00:06:53.270
> 
> 标签：php, logging, permissions, chmod

我将我的网站托管在共享服务器中，因此我的选择有限。例如，我无权[访问`exec`function](http://www.php.net/exec)。

我的问题是我非常简单的`addLog`PHP 函数需要写入日志文件的权限。我在另一篇文章中读到，在传统的 UNIX 所有者-组-其他权限方案中，PHP 用户*通常*被同化为“其他人”。

但是，由于我构建了自己的`www`结构，因此我正在考虑将`./log`目录的权限设置为，`777`以便脚本可以写入必要的日志。

应用程序只需要能够写入日志文件；不需要读取或执行权限。（当涉及到 UNIX 权限时，我什至不知道它们是什么）此外，我没有在日志中存储任何数据库信息；但是，我可以存储堆栈跟踪。

*   **将日志目录的权限设置为 是否存在安全风险`777`？**
    此文件夹中除了日志之外没有任何内容。
*   **此目录是否需要读取和执行权限？**
    我只需要写入（附加）到日志中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:10:06.407

请记住，应用程序错误可能包含数据库登录信息、查询字符串以及应用程序的文件结构。您可能对用户和机器人隐藏了某些文件，但仍位于文档根目录中。通过允许共享环境中的任何人 (777) 查看日志（任何）文件，您会面临更大的风险。

如果 PHP 正在写入日志，理论上它也应该能够读取日志。底线是使文件所有者成为将写入文件的同一用户。然后使用适当的权限。

当然，如果您不关心站点上的任何内容是否安全，并且没有数据库连接，那真的没关系。

真的取决于共享环境。我看到共享主机设置不当，用户可以通过 FTP 遍历并查看其他文件/文件夹。777 在共享主机上不是一个好主意。（最好是安全，而不是抱歉）

# python - exceptions.TypeError：只能将元组（不是“int”）连接到元组

> ID：10661213
> 
> 赞同：-3
> 
> 时间：2012-05-19T00:06:55.050
> 
> 标签：python

我这样称呼：

```
for count in result:
    print "Exist: %s" % count
    self.IdCode = count

self.IdCode += 1 
```

并收到此错误：

```
exceptions.TypeError: can only concatenate tuple (not "int") to tuple 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:51:36.977

`self.IdCode`是值的元组（例如`(1, 2)`），并且您不能将整数添加到元组（如果您搜索错误消息，很容易找到原因的解释）。

从您的代码来看，这似乎`self.IdCode += 1`是在增加一个整数。但是，`count`结果中的每个（或至少最后一个`count`）都是元组，而不是整数。`self.IdCode`正在分配给这样的元组，然后您尝试添加一个整数，这是您无法做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-11T13:56:23.453

应该是版本不同吧！我可以通过在 IPython notebook 和 v3.4 中创建第三个元组来连接两个元组。但是，我在 v2.7 中遇到了同样的错误。

不知道为什么会这样。

来自 IPython：

```
t1 = (1,2)    
t1    
(1, 2)    
t2 = (2,3)
t3 = t1 + t2
t3
(1, 2, 2, 3) 
```

*学习Python！:)

# c++ - 多重继承类的复制构造函数

> ID：10661215
> 
> 赞同：6
> 
> 时间：2012-05-19T00:07:30.370
> 
> 标签：c++, inheritance, stl, multiple-inheritance, copy-constructor

考虑这段代码：

```
#include <vector>
#include <iostream>
using namespace std;

class Base
{
    char _type;
public:
    Base(char type):
        _type(type)
    {}

    ~Base() {
        cout << "Base destructor: " << _type << endl;
    }
};

class uncopyable
{
    protected:
        uncopyable() {}
        ~uncopyable() {}
    private:
        uncopyable( const uncopyable& );
        const uncopyable& operator=( const uncopyable& );
};

class Child : public Base, private uncopyable
{
    int j;
public:
    Child():
        Base('c')
    {}
    ~Child() {
        cout << "Child destructor" << endl;
    }
};

int main()
{
    vector<Base> v;
    Base b('b');
    Child c;

    v.push_back(b);
    v.push_back(c);
    return 0;
} 
```

我的系统上的输出是：

```
Base destructor: b
Child destructor
Base destructor: c
Base destructor: b
Base destructor: b
Base destructor: c 
```

我的问题是：

*   为什么`Base`（类型 b）的析构函数被调用了 3 次而不是 2 次（我们是否有超过两个对象 b 的副本）？

*   `Child`考虑到其父对象之一的复制构造函数是私有的，当我们复制类型对象时会发生什么。它是未定义的行为吗？

*   每当我尝试复制类型的对象时，我都希望得到一个编译时错误`Child`。我以为孩子的默认复制构造函数会尝试调用 Uncopyable 类的私有复制构造函数并导致编译错误。为什么它不给出编译错误？

以这种方式设计代码的原因是因为`Child`类很大。

`Child`所需的行为是每当客户端尝试复制对象时丢弃子数据（调用析构函数`Child`而不调用析构函数`Base`）。

这段代码实现了这一点，但我猜它会导致未定义的行为并存在内存泄漏（从不`Child`为复制的实例调用析构函数）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T02:10:45.470

这是您的代码中发生的情况：

```
int main() 
{ 
    vector<Base> v;    // 1
    Base b('b');       // 2
    Child c;           // 3

    v.push_back(b);    // 4
    v.push_back(c);    // 5
    return 0; 
}                      // 6 
```

1.  第 1 行：向量 v 构造

2.  第 2 行：Base b 构造（调用 Base 的构造函数）

3.  第 3 行：Child c 构造（调用 Child 的构造函数和 Base 的构造函数）

4.  第 4 行：v 当前处于最大容量，需要调整大小。
    v 为 Base 的 1 个元素分配内存
    。Base b 复制到 v[0]（调用 Base 的复制构造函数）。

5.  第 5 行： v 再次达到最大容量，需要调整大小。
    v 为 Base 的 2 个元素分配内存。
    旧的 v[0] 被复制到新的 v[0] 中（调用 Base 的复制构造函数）。
    旧的 v[0] 被删除（调用 Base 的析构函数（“Base destructor: b”））。
    子 c 被复制到 v[1] 中（调用 Base 的复制构造函数）。

6.  第 6 行：c、b 和 v 超出范围。
    子 c 被删除（调用 Child 的析构函数（“Child destructor”）然后调用 Base 的析构函数（“Base destructor: c”）。
    删除 Base b（调用 Base 的析构函数（“Base destructor: b”））。
    Base v[0]， v[1] 被删除（调用 Base 的析构函数两次（“Base destructor: b”、“Base destructor: c”））。

没有内存泄漏 - 对于上述序列中的每个构造函数，都会调用相应的析构函数。

此外，您似乎对复制构造函数感到非常困惑。Child c 作为 Base& 传递给 push_back - 然后按预期调用 Base 的复制构造函数。由于 Base 的隐式复制构造函数不是虚拟的或被覆盖的，因此让 Child 从 uncopyable 派生不会改变这一点。

注意 a`vector<Base>`不能存储 Child 类型的对象；它只知道为 Base 分配足够的内存。将 Child 的实例分配给 Base 时发生的事情称为切片，虽然这通常是无意和误解的，但看起来它实际上可能是您所描述的场景中想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T01:21:29.870

> 每当我尝试复制 Child 类型的对象时，我都希望得到一个编译时错误。

您不是在复制`Child`对象。当你放入`Child` `c`a`vector<Base>`时，只有`Base`被复制的。它与执行基本相同`b = c;`。如果你复制/分配`Child`你会得到一个错误。

```
Child d = c;  // compile error 
```

默认复制构造函数将调用任何基类和成员对象的复制构造函数，并对基元和指针进行按位复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:51:50.333

**编辑：答案是错误的..目前正在编辑以做出更好的回应。**

> 为什么 Base（类型 b）的析构函数被调用了三次而不是两次（我们是否有两个以上的对象 b 副本）？

很可能是 Vector 正在制作`b`. 向量经常这样做。

> 考虑到其父对象之一的复制构造函数是私有的，当我们复制 Child 类型的对象时会发生什么。它是未定义的行为吗？

不会。C 的复制构造函数会调用基类的复制构造函数。因此，如果基类复制构造函数是私有的，它将无法编译。

> 每当我尝试复制 Child 类型的对象时，我都需要得到一个编译时错误，同时允许复制基类对象。最好的方法是什么？

像这样为 Child 声明一个私有复制构造函数：

```
private:
    Child(const Child& a) {
        throw "cannot make a copy";
    } 
```

> 每当客户端尝试复制 Child 对象（调用 Child 的析构函数而不调用 Base 的析构函数）时，所需的行为就是丢弃子数据。

不明白你的意思。复制构造函数意味着创建一个新对象。您不能对（旧）对象进行操作。

# iphone - 为越狱的iphone制作命令行应用程序

> ID：10661216
> 
> 赞同：-1
> 
> 时间：2012-05-19T00:07:42.753
> 
> 标签：iphone, ios, jailbreak

我正在寻找一些工具来为越狱的 iPhone 制作应用程序。

在我的应用程序中，我需要运行另一个应用程序（带参数的 Unix 命令行）。

也许，有人可以建议我一些开发人员工具或库，因为我认为 XCode 对于这些目的不是很有用的工具。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:33:01.420

你可以看看[iOS Open Dev](http://iosopendev.com/)

或开始阅读[iphonedevwiki](http://iphonedevwiki.net/index.php/Jailbreak_Development_Tools)

但是，您当然可以使用 XCode 编写应用程序（也许还有一些脚本来对您的应用程序进行后处理......伪造代码签名并使用 安装`dpkg`），该问题`system()`调用。

您可能需要[特权升级](https://stackoverflow.com/a/8796556/119114)，具体取决于您要执行的操作

# youtube - urls yotube的参数“begin”有什么意义？

> ID：10661218
> 
> 赞同：2
> 
> 时间：2012-05-19T00:07:58.807
> 
> 标签：youtube, youtube-api, youtube-javascript-api

例如：

[http://oo.preferred.telemexperu-lim1.v3.lscache6.c.youtube.com/videoplayback?upn=N2EK-YTwdeU&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Cms%2Cmt% 2Csource%2Cupn%2Cexpire&fexp=919321%2C901027%2C907217%2C907335%2C921602%2C919306%2C919316%2C904455%2C919324%2C904452&key=yt1&algorithm=throttle-factor&mt=1337382014&ipbits=8&itag=35&sver=3&signature=94D9344CEF1C28BB9BB5F8C51C1F409BE39329B2.69CAFFDDF1556B2A83200F45F173F6E0FB8DE2CC&source=youtube&expire=1337407932&ms=au&ip= 190.0.0.0&factor=1.25&cp=U0hSTFRLVV9ITENOMl9MRVlKOnVubENtTm5YaDRH&burst=40&id=ea8d708a77758947&ptchn=MARVEL&](http://o-o.preferred.telemexperu-lim1.v3.lscache6.c.youtube.com/videoplayback?upn=N2EK-YTwdeU&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Cms%2Cmt%2Csource%2Cupn%2Cexpire&fexp=919321%2C901027%2C907217%2C907335%2C921602%2C919306%2C919316%2C904455%2C919324%2C904452&key=yt1&algorithm=throttle-factor&mt=1337382014&ipbits=8&itag=35&sver=3&signature=94D9344CEF1C28BB9BB5F8C51C1F409BE39329B2.69CAFFDDF1556B2A83200F45F173F6E0FB8DE2CC&source=youtube&expire=1337407932&ms=au&ip=190.0.0.0&factor=1.25&cp=U0hSTFRLVV9ITENOMl9MRVlKOnVubENtTm5YaDRH&burst=40&id=ea8d708a77758947&ptchn=MARVEL&) **begin=9724** &ptk=迪士尼&cm2=1

当我们推进视频（在某些情况下）youtube播放器发送参数开始的情况下......但不是字节数，那是什么？

你可以在这里做一些测试：

```
http://youtube.googleapis.com/v/6o1wind1iUc?version=2 
```

对不起我的英语不好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:13:42.660

我相信这是从一开始的毫秒数。

# joomla - Joomla 1.5->2.5 菜单缺失

> ID：10661220
> 
> 赞同：0
> 
> 时间：2012-05-19T00:08:25.453
> 
> 标签：joomla, joomla2.5

我将我的网站从 Joomla 1.5 升级到 2.5.4，但是，菜单似乎消失了。我以前使用的是仅 1.5 的模板，但 jUpgrade 过程默认为预安装的模板，这很好 - 但没有菜单！我试过安装一些随机的其他模板，但都有同样的问题。

FWIW 大多数菜单链接都已损坏，但我修复了几个只是为了检查，但不高兴。迁移的站点仍在其子路径中，这就是我认为组件本身无法正常工作的原因。

据我所知，我按照 Joomla 网站上的 Wiki 中的说明进行操作。

有任何想法吗？谢谢。

[http://www.simsig.co.uk](http://www.simsig.co.uk) - 原始网站

[http://www.simsig.co.uk/jupgrade](http://www.simsig.co.uk/jupgrade) - 迁移网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:13:14.877

最可能的原因是菜单显示在特定于您在 Joomla 中使用的模板的模块位置！1.5 和你的 Joomla！2.5 模板没有匹配的位置。或者，迁移过程没有正确更新菜单模块位置，它正在寻找特定模板中的位置。

打开`Extensions->Module Manager`然后从过滤器选项中选择`Type->Menu`以查看菜单模块列表。通过打开菜单模块并通过实际单击“选择位置”按钮并单击当前使用的模板中的正确位置来选择位置来检查分配给它们的位置。

为了便于选择，您可以通过从单击“选择位置”时打开的“选择位置”灯箱右上角的弹出菜单中选择当前模板来过滤选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:18:31.983

jUpgrade 无法将菜单项从 1.5 正确传输到 2.5。这些必须重新创建。

# ruby - ruby 脚本中的 CSS 选择器和条件

> ID：10661222
> 
> 赞同：1
> 
> 时间：2012-05-19T00:08:49.587
> 
> 标签：ruby, css-selectors, nokogiri

我正在尝试用 Ruby 编写一个脚本来使用 Nokogiri 和 CSS 选择器来解析维基百科的文章。不过，我对脚本中的条件有点困惑。这是我到目前为止所拥有的（`page`是使用 Nokogiri 下载的 html）：

```
page.css('h3').each do |node|
  puts node.text
end

page.css('li').each do |node|   
  if /\d|\D/.match(node)
    puts node.text.scan(/[\d]+\D*/).first
  end
end

page.css('td b').each do |node|
  puts node.text
end 
```

这一切都很好。但是，我真正想要的是这样的：

```
page.css('h3, li, td b').each do |node|
  # if it's an h3 node, do one thing
  # if it's a li node, do another thing
  # else if it's a 'td b' node, do another thing
end 
```

这将允许按顺序解析页面，而不是分别通过正文三次。但是，我不确定如何在我的脚本中编写这些条件。

编辑：所以现在我的脚本是

```
page.css('h3, li, td b').each do |node|
        case node.name
        when 'h3', 'b'
            puts node.text
        when 'li'
            if /\d|\D/.match(node)
                puts node.text.scan(/[\d]+\D*/).first
            end
        else
            next
    end
end 
```

但是，它并没有改变行为。它以与之前相同的顺序处理它们（所有'h3'元素，然后是所有'li'元素，然后是所有'b'元素）。

编辑2：

好吧，我终于让它工作了。这是我的最后一组条件：

```
page.traverse do |node|
    case
            when 'h3' == node.name 
            puts node.text
        when 'li' == node.name 
            puts node.text.scan(/[\d]+\D*/).first if /\d|\D/.match(node)
        when 'b' == node.name
            puts node.text if (node.parent.name == 'p' or node.parent.name == 'td')
    end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:26:56.167

使用 Nokogiri，即使在您的第一个场景中，页面也不会被解析三次。Nokogiri 解析页面一次，创建内存中的 DOM，然后使用 DOM 查找所需的节点。执行多个 CSS 或 XPath 查找并不是低效的。

不过，如果您仍想一次抓取所有节点，您可以执行以下操作：

```
page.css('h3, li, td b').each do |node|
  case node.name
  when 'h3'
    do_something
  when 'li'
    do_something_else
  when 'b'
    do_another_thing
end 
```

请注意，如果您需要区分 a`td b`和 a，`p b`那么此技术将不起作用。我建议单独查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T01:54:48.770

您可能正在寻找遍历：

```
page.traverse do |node|
  case
    when ['h3', 'li'].include?(node.name) then puts node.text
    when 'b' == node.name && 'td' == node.parent.name then puts node.text[/\d+\D*/]
  end
end 
```

# mysql - 为什么 MySQL 连接返回一个循环集？

> ID：10661225
> 
> 赞同：1
> 
> 时间：2012-05-19T00:09:07.170
> 
> 标签：mysql, join

假设我有两张桌子：

有两列的表`english`， `id`并且`letter`：

```
1,a
2,b
3,c 
```

有两列的表`greek`， `id`并且`letter`：

```
1,alpha
2,beta
3,gamma 
```

好的，所以我执行查询`select * from english limit 1,5` 并得到：

```
2,b
3,c 
```

这是我所期望的。现在我尝试`select english.id,english.letter,greek.letter from english join greek on greek.id=english.id order by english.id asc limit 1,5`

```
2,b,beta
3,c,gama
1,a,alpha
2,b,beta
3,c,gama 
```

**什么！？** 为什么这个集合是圆形的？好的，下一个查询按我的预期工作：

`select english.id,english.letter,greek.letter from english join greek on greek.id=english.id group by english.id order by english.id asc limit 1,5`

```
2,b,beta
3,c,gama 
```

**那么这里到底发生了什么？**为什么我需要`group by english.id`像我期望的那样添加 for set 的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T00:15:48.903

可能您的`greek`表中有重复的行。

当我在 MySQL 5.5.20 上尝试它时它工作正常：[sqlfiddle](http://sqlfiddle.com/#!2/163cd/4)。

这是一个示例，其中我故意在`greek`表中插入了重复的行，它给出的结果与您得到的结果完全相同：[sqlfiddle](http://sqlfiddle.com/#!2/3b548/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:20:01.753

LIMIT 适用于整个查询。如果要限制特定表，请先对其应用限制

```
select english.id,english.letter,greek.letter 
from (select * from english limit 1,5) as english
join greek on greek.id=english.id 
```

你应该把 ORDER BY 放在 LIMIT 子句上，除非它是随机的

# php - php代码不进入循环（mysqli）

> ID：10661228
> 
> 赞同：0
> 
> 时间：2012-05-19T00:09:35.250
> 
> 标签：php, mysqli

我尝试用 RGraph(JS) 制作图表。我的网站上有一个用户计数器。现在我想用这张图做一个用户统计。

但是，我创建了一个列表，应该用于每个查询（制作了一个表格来选择月份和年份）。

我的问题是代码没有进入循环来创建新值（Day 和 Count）。

任何的想法？

这里的代码：

```
$days = 0;
$day_value = array();

//check months which have 30 days
if (in_array($month, array(4,6,9,11))) {
    $days = 30; 

}
//leapyear?
if ($month == 2) {
    if ($year%4 == 0) {
        $days = 29;
    } else {
        $days = 28;
    }
} 

//Count users for each day
for ($i=1; $i<=$days; $i++) {
    $sql = "SELECT
                 Anzahl
            FROM
                 Counter
            WHERE
                 YEAR(Datum) = '".$year."' AND
                 MONTH(Datum) = '".$month."' AND
                 DAYOFMONTH(Datum) = '".$i."'";
    if (!$result = $db->query($sql)) {
        return $db->error;
    }

    $row = $result->fetch_assoc();
    $day_value[$i] = (int)$row['Anzahl'];
} 

//delete list for new month/year
$sql = "DELETE
        FROM
            Statistics
           ";
if (!$result = $db->query($sql)) {
    return $db->error;
}

//Create list with values for each day
for ($j=1; $j<=$days; $j++) {
    $sql = "INSERT INTO 
                Statistics(Day,Count)
            VALUES 
                (?, ?)";
    $stmt = $db->prepare($sql);
    if (!$stmt) {
        return $db->error;
    }
    $stmt->bind_param('ii', $j, $day_value[$j]);
    if (!$stmt->execute()) {
        return $stmt->error;
    }

    $stmt->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:17:14.140

`$days`设置为 0，它仅在`$months`2,4,6,9,11 时更改，因此对于每个其他值`$month` `$days`0 并且不进入 for 循环。

```
if (in_array($month, array(4,6,9,11))) {
//code
}
elseif ($month == 2) {
//code
}
else{
//code
} 
```

# jquery - 从 jQuery AJAX 调用解析 JSON

> ID：10661231
> 
> 赞同：0
> 
> 时间：2012-05-19T00:10:28.420
> 
> 标签：jquery, json

我可以成功取回看起来像 JSON 对象的内容，但是在解析它时出现非空白错误，当我不解析它时，我无法访问这些元素。基本上，我只想访问 JSON 中的每个元素并显示它。这是代码：（代码下方是我返回的 JSON（或看起来是 JSON）

```
$('#cardText').change(function(){
            if($('#cardText').val().trim().length == 9)
                {
                    $.ajax({

                        url: 'components/Person.cfc',

                        //GET method is used
                        type: "POST",

                        //pass the data        
                        data: {
                            method: "getGroup",
                            uid: $('#cardText').val(),
                            },

                        success: function(response) {

                            //obj = jQuery.parseJSON(response); -- I get a non-whitespace error if I do this
                            var Col1 = response.COLUMNS[0]; -- this gives me response.Columns is undefined

                            $('#form_result').html(response);

                        },

                        error: function(jqXHR, exception) {
                            if (jqXHR.status === 0) {
                                alert('Not connect.\n Verify Network.');
                            } else if (jqXHR.status == 404) {
                                alert('Requested page not found. [404]');
                            } else if (jqXHR.status == 500) {
                                alert('Internal Server Error [500].');
                            } else if (exception === 'parsererror') {
                                alert('Requested JSON parse failed.');
                            } else if (exception === 'timeout') {
                                alert('Time out error.');
                            } else if (exception === 'abort') {
                                alert('Ajax request aborted.');
                            } else {
                                alert('Uncaught Error.\n' + jqXHR.responseText);
                            }
                        }
                }); 
            }
        }); 
```

返回数据：

```
{
    "COLUMNS": ["PLAN", "NAME", "ID", "ISSUE", "TYPE", "LASTUSED", "BALANCE"],
    "DATA": [["DINING STAFF CAFE 1919 ", "YOUNG, MARIA ", 8.03976343E8, "2001-04-02", 2.0, "2012-01-27", 1]]
}​ 
```

来自记事本（数据有限） {"COLUMNS":["PLAN","NAME"],"DATA":[["DINING STAFF CAFE 1919 ","YOUNG, MARIA "]]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:23:05.217

在最后一个花括号之后，您似乎有一个时髦的角色。尝试将您的 JSON 粘贴到 Notepadd++ 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:23:48.720

`}`在您粘贴的示例返回数据中，在结束符和换行符之间有一个零宽度的 unicode 字符 U+200b 。这阻止了 Firefox 接受该片段。它是如何到达那里的？

# zend-framework - 用路由重命名一个zend模块

> ID：10661232
> 
> 赞同：0
> 
> 时间：2012-05-19T00:10:30.463
> 
> 标签：zend-framework, routes

我有一条将“项目”模块重命名为“产品”的路线，它在大多数情况下都有效，但在 url 中没有明确设置控制器或操作时无效。例如，`example.com/products`不起作用，而起作用，`example.com/items`并且与 相同`example.com/products/index/index`。任何想法如何解决它，或使控制器和动作可选？

```
$router->addRoute('item-alias', new Zend_Controller_Router_Route('products/:controller/:action', array(
    'module'=>'items'
))); 
```

* * *

**编辑：**

当我将其更改为时，它似乎有效

```
$router->addRoute('item-alias', new Zend_Controller_Router_Route('products/:controller/:action/*', array(
    'module'=>'items'
    'controller'=>'index',
    'action'=>'index'
))); 
```

'*' 允许附加额外的可选参数，例如`example.com/products/index/index/page/2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:11:33.643

为控制器和动作设置默认值。这样它们将是可选参数并且可以被跳过。

# xcode - 为什么我不能创建带有未解析符号的 MacOS 框架？

> ID：10661234
> 
> 赞同：1
> 
> 时间：2012-05-19T00:10:45.123
> 
> 标签：xcode, macos, frameworks

我认为动态库（以及 Apple 的 Mach-O 框架的扩展）的一个特性是在使用的应用程序被链接之前保留一些符号（方法）未定义，但似乎必须解析所有符号`clang++`才能成功构建框架。

例如，在构建飞行模拟框架时，可能会留下一个名为`aero`undefined 的 C 例程（但具有“extern aero()”规范）。但 XCode 4.2 拒绝构建框架，称其`_aero`为“未定义符号”。

这是 Objective-C 和 ANSI-C 例程包含的头文件：

```
// FlightVehicleCAdapter_data.h

#ifndef FlightVehicleCAdapter_data_h
#define FlightVehicleCAdapter_data_h

#ifdef __cplusplus
external "C" {
#endif

extern void aero( void );

#ifdef __cplusplus
}
#endif 
```

这里是它被调用的地方：

```
// FlightVehicleCAdapter.m

-(void) calcAero {
    aero();
    [self setBodyAeroForce_lb:   [lsVector3 vectorFromScalarX:fv_data->f_aero_v.x
                                                            Y:fv_data->f_aero_v.y
                                                            Z:fv_data->f_aero_v.z]];
    [self setBodyAeroMoment_ftlb:[lsVector3 vectorFromScalarX:fv_data->m_aero_v.x
                                                            Y:fv_data->m_aero_v.y
                                                            Z:fv_data->m_aero_v.z]];

} 
```

我曾希望能够`aero()`在应用程序中定义链接该框架的真实例程，但是当尝试构建*框架*本身时，链接器拒绝在没有具体`aero()`实现的情况下构建它：

```
Undefined symbols for architecture [i386|x86_64]:
  "_aero", referenced from:
    -[FlightVehicleCAdapter calcAero] in FlightVehicleCAdapter.o 
```

所以我然后定义了一个虚拟`aero()`例程：

```
// dummy_aero.c
// not showing fv_data structure definition for clarity

void aero(void){
    fv_data->f_aero_v.x = 0.0; 
    fv_data->f_aero_v.y = 0.0;
    fv_data->f_aero_v.z = 0.0;

    fv_data->m_aero_v.x = 0.0;
    fv_data->m_aero_v.y = 0.0;
    fv_data->m_aero_v.z = 0.0;
} 
```

这个定义`aero()`满足`clang++`了Mach-O框架（动态库）的构建成功。但是，当我将生成的框架与包含非平凡`aero()`例程的应用程序目标链接时，将调用框架的虚拟`aero()`对象而不是应用程序的`aero()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:43:53.433

您需要将`-bundle_loader <executable>`选项传递给链接器，尽管我不确定它是否适用于框架。或者，您可以使用`-undefined dynamic_lookup`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:21:08.783

您需要为 aero() 执行此操作：

```
#ifdef __cplusplus
extern "C" {
#endif

extern void aero( void );

#ifdef  __cplusplus
}
#endif 
```

这确保函数在 C++ 中声明为具有 C 可解析的名称。C++ 构建名称的方式与 C 不同。

请注意，然后 aero() 可以在运行时链接。

# ajax - appMobi xhr.js 丢失 jquery 后返回数据

> ID：10661236
> 
> 赞同：1
> 
> 时间：2012-05-19T00:10:48.883
> 
> 标签：ajax, jquery, appmobi

也许我用错了。我不知道。我所知道的只是它与 appMobi 附带的 XHR.js 相关。我拥有 2 天前网站上的最新版本。我正在 Macbook Pro 上开发。我正在尝试使用 XDK 在本地进行测试，并通过本地 Wifi/使用 Android 平台使用 HTC Evo 3D 在任何地方进行测试。以及我正在使用 iPhone 4S 和 iPad2。每次都是一样的结果。

我在控制台调试窗口中看不到任何错误。我看到的只是“RemoteBridge”或“RemoteBridge2”这两个词。我的脚本很简单。只是一个简单的基于 jQuery 的 $.ajax 帖子和一个小 html。虽然我会在发布它时更改它，因为我不希望它通过公共论坛可见，但该 URL 是一个有效的 URL，并删除了一个有效的 JSON 对象作为其输出。所以我需要输入，我不知道从哪里开始，因为我的应用程序需要大量动态更新的动态数据。据称我所要做的就是包含 xhr.js 并且我的标准 jQuery 应该可以工作。

无论如何，这是我的代码。

索引.html

```
<!DOCTYPE HTML>
<html>
   <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Untitled Document</title>
      <link rel="stylesheet" media="all" href="./src/global.css">
   </head>
   <body>
      <div id="header">
         <div id="logo"></div>
         <div id="coname">COMPANY</div>
      </div>
      <div id="content"></div>
      <div id="footer">
         <div id="advert"></div>
      </div>   
      <script type="text/javascript" charset="utf-8" src="./src/appmobi.js"></script>
      <script type="text/javascript" charset="utf-8" src="./src/xhr.js"></script>
      <script type="text/javascript" charset="utf-8" src="./src/jquery-1.7.2.min.js"></script>
      <script type="text/javascript" charset="utf-8" src="./src/global.js"></script>
   </body>
</html> 
```

以及 global.js 的内容

```
// This event handler is fired once the AppMobi libraries are ready
function onDeviceReady() {
    //use AppMobi viewport to handle device resolution differences if you want
    //AppMobi.display.useViewport(768,1024);

    //hide splash screen now that our app is ready to run
    AppMobi.device.hideSplashScreen();
}

//initial event handler to detect when appMobi is ready to roll
document.addEventListener("appMobi.device.ready",onDeviceReady,false);

$(document).ready(function()
{
/*
   var request = $.ajax({
      url: "http://this.url-has-been-changed.net/geo/suggest",
      type: "POST",
      data: {"entry" : "951"},
      dataType: "json"
   });
   request.done(function(data){$('#advert').append('done');});
   request.fail(function(data){$('#advert').append('fail');})
   request.error(function(data){$('#advert').append('error');})
   request.complete(function(data){$('#advert').append('complete');})
   request.success(function(data){$('#advert').append('success');})
   */

   $.ajax({
      type: 'POST',
      url: "http://this.url-has-been-changed.net/geo/suggest?entry=951",
      success: function(data){$('#advert').html('success');},
      error : function(data){$('#advert').html('failed');},
      complete : function(data){$('#advert').html('complete');},
      dataType: "json"
   });

}); 
```

发现包含的所有其他文件均来自 appmobi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:55:09.227

克里斯，

有几件事可以帮助您解决这个问题。

1.  确保您引用 appMobi.js 和 XHR.js 来自

```
    http://localhost:58888/_appMobi

```

为了利用 JavaScript API 桥命令 (http://www.appmobi.com/documentation/jsAPI.html)。

1.  等到“appMobi.device.ready”事件触发后再使用这些 JavaScript API 桥接命令。在您的情况下，XHR.js 库实际上正在将 XMLHttp 调用转换为本机 AppMobi.device.getRemoteData 调用。

试试这个 index.html

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<!--
<link rel="stylesheet" media="all" href="./src/global.css">
-->
</head>
<body style="background-color:white;">
<div id="header">
<div id="logo"></div>
<div id="coname">COMPANY</div>
</div>
<div id="content"></div>
<div id="footer">
<div id="advert"></div>
</div>   
<script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/appmobi.js"></script>
<script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/xhr.js"></script>
<script type="text/javascript" charset="utf-8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="global.js"></script>
</body>
</html> 
```

连同这个 global.js

```
// This event handler is fired once the AppMobi libraries are ready
function onDeviceReady() {
//use AppMobi viewport to handle device resolution differences if you want
//AppMobi.display.useViewport(768,1024);

//hide splash screen now that our app is ready to run
AppMobi.device.hideSplashScreen();

$.ajax({
type: 'POST',
url: "http://this.url-has-been-changed.net/geo/suggest?entry=951",
success: function(data){$('#advert').html('success');},
error : function(data){$('#advert').html('failed');},
complete : function(data){$('#advert').html('complete');},
dataType: "json"
});
}

//initial event handler to detect when appMobi is ready to roll
document.addEventListener("appMobi.device.ready",onDeviceReady,false); 
```

* * *

XHR.js 和 appMobi.js 库由包装应用程序本身提供，以便“侦听”需要本机级别功能的 JavaScript 调用。例如，允许您发出跨域数据请求的 AppMobi.device.getRemoteData 命令。为方便起见，XHR.js 库将 XmlHTTP 调用转换为 AppMobi.device.getRemoteData 命令。

有关 JavaScript API 的更多信息，请查看以下文档：

[http://www.appmobi.com/documentation](http://www.appmobi.com/documentation)

# php - InstaPaper API - /api/1/bookmarks/get_text

> ID：10661247
> 
> 赞同：0
> 
> 时间：2012-05-19T00:12:43.803
> 
> 标签：php, api, instapaper

我正在使用 InstaPaper API

我正在使用这个字符串来提取文章的内容。

```
$Bookmark_Text = $connection->getBookmarkText($Bookmark['bookmark_id']); 
```

不幸的是，它拉动了整个 html，基本上把 HTML 结构放在了我的 HTML 中。

例子。

```
<html>
<head></head>
<body>
    <html>
    <head>Instapaper Title</head>
    <body>InstaPaper Article Content</body>
    </html>
</body>
</html> 
```

关于如何获取“Instapaper 文章内容”的任何想法

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:45:48.990

这是一些仅提取文章并删除 Instapaper 的东西（例如顶部和底部栏）的 JS 代码。

`html.replace(/^[\s\S]*<div id="story">|<\/div>[^<]*<div class="bar bottom">[\s\S]*$/gim, '');`

请注意，它可能会随着 Instapaper 的 HTML 输出的变化而变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:27:05.160

使用解析器提取`<body>`. [PHP 有一些内置的](http://www.php.net/manual/en/refs.xml.php)，但还有[一些](http://simplehtmldom.sourceforge.net/)可能更容易使用。

如果`$Bookmark_Text`是有效的 HTML 文档，则应该这样做。

```
$dom = new DOMDocument();
$dom->loadHTML($Bookmark_Text);
$body = $dom->getElementsByTagName('body')->item(0);
$content = $body->ownerDocument->saveHTML($body); 
```

# javascript - Javascript 时髦函数

> ID：10661249
> 
> 赞同：1
> 
> 时间：2012-05-19T00:13:16.417
> 
> 标签：javascript, forms, validation

为客户站点编写验证脚本。每个函数单独正常工作，但是当我从一个函数调用它们时，页面仍然提交。这是我的代码：

```
 <script type="text/javascript">

    function validateForm() {
      checkDate();
      checkRemainingFields();
      checkPhone();
    }

    /**--------------------------
    //* Validate Date Field script- By JavaScriptKit.com
    //* For this script and 100s more, visit http://www.javascriptkit.com
    //* This notice must stay intact for usage
    ---------------------------**/

    function checkDate(){
      var input=document.forms[0].eventdate;
      var validformat=/^\d{2}\/\d{2}\/\d{4}$/; //Basic check for format validity

      if (!validformat.test(input.value)) {
        alert("Invalid Day, Month, or Year range detected. Proper format is MM/DD/YYYY, please correct and submit again.")
        return false;
      } else{  //Detailed check for valid date ranges
      var monthfield=input.value.split("/")[0];
      var dayfield=input.value.split("/")[1];
      var yearfield=input.value.split("/")[2];
      var dayobj = new Date(yearfield, monthfield-1, dayfield);
    }

    if ((dayobj.getMonth()+1!=monthfield)||(dayobj.getDate()!=dayfield)||(dayobj.getFullYear()!=yearfield)) {
      alert("Invalid Day, Month, or Year range detected. Proper format is MM/DD/YYYY, please correct and submit again.")
      return false;
      } else return true;
    }

    function checkRemainingFields() {
      var theme=document.forms[0].theme;
      var text=document.forms[0].text;
      var name=document.forms[0].contactperson;

      if (theme.value.length==0) {
        alert("Invalid theme value.  Please correct the theme field to continue.");
        return false;
      } else if (text.value.length==0) {
        alert("Invalid description value. Please correct the desciption field to continue.");
        return false;
      } else if (name.value.length==0) {
        alert("Invalid name value.  Please correct the name field to continue.");
        return false;
      } else return true;
    }

    function checkPhone() {
      var input=document.forms[0].contactphone;
      var validformat=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
      var ext=document.forms[0].extension;

      if (!validformat.test(input.value)) {
        alert("Invalid phone number detected. The proper format is 555-555-5555\. Please correct and submit again.");
        return false;
      } else if (ext.value.length != 3){ //Check extension
        alert("Invalid extension.  Please type your 3 digit extension.");
        return false;
      } else return true;
    }

    </script> 
```

validateForm() 是在页面稍后的表单中通过 onsubmit 调用的。我不确定我是否正确地编写了调用。提交表单时，它会通过所有检查并显示每个检查的警报，但页面继续到 php 处理页面。我需要一点帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:18:11.250

尝试类似：

```
function validateForm() {
    return checkDate() && checkRemainingFields() && checkPhone();
} 
```

`false`当这些函数中的任何一个返回时，您需要返回`false`，否则返回`true`。

等效但更冗长的方式是：

```
function validateForm() {
    if (!checkDate()) return false;
    if (!checkRemainingFields()) return false;
    if (!checkPhone()) return false;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:16:38.613

```
function validateForm() {
  if(checkDate())
     {
       if(checkRemainingFields())
            {
              checkPhone();
            }
       }
  } 
```

# python - Django ORM - 如何结合注释和过滤

> ID：10661255
> 
> 赞同：1
> 
> 时间：2012-05-19T00:14:03.733
> 
> 标签：python, django, orm, django-templates

我有以下型号：

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True, related_name='profile')
    starred_authors = models.ManyToManyField(Author, related_name='users_with_stars')

class Author(models.Model):
    name = models.CharField(max_length=250)
    slug = models.SlugField(unique=True) 
```

然后在作者模板中，我想显示当前登录的用户是否已为该作者加注星标，但我在构建合适的查询以使用 ORM 获取此数据时遇到了麻烦。

在视图中，我曾考虑使用计数来注释作者对象，如果作者没有被加注星标，则计数为 0，如果加注星标则为 1。像这样的东西：

```
def author_detail(request, slug):
    user_id = request.user.pk
    author = Author.objects.filter(slug=slug).filter(users_with_stars__user__pk=user_id).annotate(fav=Count('users_with_stars'))[0]
    return render_to_response('app/author_detail.html',
                              { 'author': author},
                              context_instance=RequestContext(request)) 
```

但上述情况并不好，因为如果当前用户没有给作者加星标，则找不到对象。我想做的是以某种方式将最后一个过滤器放在注释中，但我无法让它工作。

理想情况下，我想在模板中执行以下操作：

```
{% if author.fav %}
    <p>This is one of your favorite authors</p>
{% endif %} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T02:25:13.030

我可能会将其拆分为模板字典中的一个单独属性，并通过直接检查该用户是否在为该作者加星标的用户列表中来计算它。

就像是：

```
[...]
author = Author.objects.filter(slug=slug)
is_fav = author.users_with_stars.filter(pk=user_id).exists()
return render_to_response('app/author_detail.html',
                          { 'author': author,
                            'is_fav': is_fav },
                          context_instance=RequestContext(request)) 
```

在模板中：

```
{% if is_fav %}
    <p>This is one of your favorite authors</p>
{% endif %} 
```

# java - 在java中解析这个字符串的最佳方法是什么？

> ID：10661257
> 
> 赞同：3
> 
> 时间：2012-05-19T00:14:28.573
> 
> 标签：java, regex, string, parsing, tokenize

我有一个字符串，其形式为：

```
{'var1':var2} 
```

我能够解析这个字符串，以便 var1 和 var2 都是字符串变量。但是，它需要多个字符串标记器调用，首先从“：”中拆分，然后提取数据。

那么什么是最好的（最少的代码行）来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:35:22.227

如果您只想要一个包含两个值的数组，那么您可以通过提取子字符串然后在“':”上拆分来分两行完成。它最终看起来像这样：

```
s = s.substring(2, s.length()-1);
String[] sarr = s.split("':"); 
```

如果你真的想要一行代码，你可以将它们组合成：

```
String[] sarr = s.substring(2, s.length()-1).split("':"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:35:22.723

这应该有效：

```
String yourstring = "{'var1':var2}";
String regex = "\\{'(.+)':(.+)}";
Matcher m = Pattern.compile(regex).matcher(yourstring);
String var1 = m.group(1);
String var2 = m.group(2); 
```

**编辑**：对于评论员：

细绳：

```
{'this is':somestring':more stuff:for you} 
```

输出：

```
var1 = this is':somestring
var2 = more stuff:for you 
```

PS：用 Perl 测试过，目前手头没有 Java，抱歉。

编辑：看起来Java正则表达式引擎不喜欢未`{`转义的*用户未知*点。逃脱了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T01:07:18.937

这在一般情况下是无法解决的。考虑例如：

案例一）

变量1=

```
:':': 
```

var2=

```
':' 
```

完整的原始字符串将是

```
{':':':':':'} 
```

案例 b) var1=

```
: 
```

var2=

```
':':':' 
```

完整的原始字符串将是

```
{':':':':':'} 
```

所以，我们需要“更多信息”。根据您的要求/用例，您必须忍受歧义，对字符串施加限制，或对字符串进行转义/编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T00:25:57.947

类似***（脆弱 - 见评论）***：

```
// 3 lines..
String[] parts = "{'var1':var2}  ".trim().split("':");
String var1 = parts[0].substring(2,parts[0].length);
String var2 = parts[1].substring(0,parts[1].length-1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T00:53:22.293

您可以使用正则表达式：

```
String re = "\\{'(.*)':(.*)}";
String var1 = s.replaceAll (re, "$1");
String var2 = s.replaceAll (re, "$2"); 
```

你需要掩盖开头`{`，否则你会得到一个 java.util.regex.PatternSyntaxException: Illegal repeat

# actionscript-3 - as3 文档类不加载

> ID：10661259
> 
> 赞同：0
> 
> 时间：2012-05-19T00:15:12.907
> 
> 标签：actionscript-3, flash

我的项目中有一个文档类，在我更新它并将它放在服务器上之后，flash 播放器会加载旧版本。它不会保存在我每次测试结果时清理的缓存中，但是当我更改名称并修改 swf 的 doc 类时似乎可以工作。知道如何解决这个问题吗？如果重要的话，我的文档类与 swf 位于同一个文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:54:38.523

您必须在本地重新编译您的 .swf 并将其重新上传到您的服务器。任何类（.as 文件）都编译到 .swf 中而不是由 .swf 加载 事实上，没有理由将任何源代码放在服务器上，就像没有理由上传 .fla 文件一样。

# android - 使用 Android 在 PhoneGap 上启动 JQuery Mobile

> ID：10661261
> 
> 赞同：3
> 
> 时间：2012-05-19T00:15:26.430
> 
> 标签：android, jquery-mobile, cordova

我知道这可能是一个基本问题，但我在网上找不到基本答案。如何在我使用 android 开发的 PhoneGap 应用程序上实现 JQuery Mobile？我不清楚我需要下载哪个版本，以及我需要在我的 Eclipse 项目和 index.html 文件中添加什么符号才能让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T01:02:28.463

AppLaud Eclipse Plugin for PhoneGap Android 中的项目创建向导有一个复选框，用于将 jQuery Mobile 包含到项目中。基本上，它将 jQuery 和 jQuery Mobile 文件添加到项目中，并将 index.html 中的链接添加到它们。

您可以通过安装新软件将插件添加到 Eclipse ADT -> 添加[https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download](https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download)

更多信息请访问[http://www.mobiledevelopersolutions.com/](http://www.mobiledevelopersolutions.com/)

# iphone - 如何将数据从选项卡栏控制器传递到其选项卡之一？

> ID：10661275
> 
> 赞同：26
> 
> 时间：2012-05-19T00:17:02.960
> 
> 标签：iphone, objective-c, uiviewcontroller, uitabbarcontroller, storyboard

我在情节提要中设置了一个 UITabBarController 。我想从标签栏控制器传递一个数据字典，以便在适当的子标签中使用，这是一个标准的 UIViewController。

这似乎是一个很长的问题要回答，但我真的不知道从哪里开始。我正在寻找最简单的方法。我必须以编程方式使选项卡起作用吗？将我指向任何有用的开发人员文档也将不胜感激。

-Austin
ps 我是新来的，到目前为止，我一直依赖故事板进行视图控制器转换

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T05:11:39.370

花了几天时间，但我发现了一个简单的解决方案。在我的 TabBarController 的 viewDidLoad 方法中，我可以使用

```
 [[self viewControllers] objectAtIndex:0] 
```

或您希望访问的任何索引。

将其保存为我的 tab1_viewController 的实例会给我一个指向该对象的指针，我可以从中获取和设置我的属性值。这最初是不清楚的，因为故事板为我创建了 tab_viewController 对象。我从来没有机会按照我想要的方式初始化它们！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T00:54:22.437

最好的选择是使用通知。

在您的标签栏中，您将执行以下操作：

```
NSDictionary *myDictionary; // Populate this with your data.

// Fire the notification along with your NSDictionary object.
[[NSNotificationCenter defaultCenter] postNotificationName:@"Some_Notification_Name" 
                                                    object:myDictionary]; 
```

然后在您的子标签 ViewController 中，您将“收听”该通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(handleNotification:) 
                                             name:@"Some_Notification_Name" 
                                           object:nil];

- (void)handleNotification:(id)object {
  // Use your NSDictionary object here.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-10T19:59:10.397

如果您有一个`UINavigationController`作为您的`UITabBarController`视图控制器之一，您可以执行以下操作：

```
NSArray *viewControllers = [self.tabBarController viewControllers];
UINavigationController *myNavController = (UINavigationController *)viewControllers[2];
MyViewController *myController = [[myNavController childViewControllers] firstObject];
// Remember to alloc/init objects first if the objects haven't been initialized already.
[myController.whateverArray = [[NSArray alloc] initWithArray:@[@"Example1", @"Example2"]];
[self.tabBarController setSelectedIndex:2]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-23T00:15:30.587

**使用斯威夫特**

如果您有`UINavigationController`作为 中的选项卡之一`UITabBarController`，您希望获取子视图控制器的实例而不是创建新实例并将其推送到导航视图控制器，然后再更改选项卡视图索引。你可以这样做...

此示例代码假定导航控制器位于第一个选项卡（索引 0），并且“childViewController”嵌入在导航控制器中。

```
let viewControllers = self.tabBarController?.viewControllers

let navController = viewControllers![0] as! UINavigationController

let profileViewController = self.storyboard?.instantiateViewControllerWithIdentifier("childViewController") as? ProfileViewController

profileViewController!.parameter1 = "Value1"

profileViewController!.parameter2 = "Value2"

navController.pushViewController(profileViewController!, animated: true)

self.tabBarController?.selectedIndex = 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-26T01:34:55.223

使用**斯威夫特**：

```
if let navController = self.tabBarController?.viewControllers?[1] as? UINavigationController{
        if let testController = navController.childViewControllers.first as? MyViewController{
            testController.data = data
            self.tabBarController?.selectedIndex = 1
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-25T06:20:48.140

得到这个工作...

我有 3 个视图控制器，我必须将数组从一个传递到另一个..

这是我所做的

将数据附加到选项卡视图控制器之一

```
NSArray *viewControllers = [self.tabBarController viewControllers];
    ListViewController *listView = (ListViewController *)viewControllers[1];
    listView.myArray = self.myArray;
    [self.tabBarController setSelectedIndex:1]; 
```

之后，加载视图控制器，就是这样

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ListViewController *listView = (ListViewController *)[storyboard instantiateViewControllerWithIdentifier:@"IDListView"]; 
```

# android - Media Query Cursor 在模拟器和设备上不断返回 null ......但为什么呢？

> ID：10661280
> 
> 赞同：1
> 
> 时间：2012-05-19T00:17:51.227
> 
> 标签：android, mediastore

我正在使用以下代码获取设备上的歌曲列表。最终我想用它们做更多的事情，但刚开始我想在 Android 设备中找到音频/音乐。

我已经使用此代码来查询媒体存储并且我一直得到一个空游标...我已经检查了这些堆栈溢出答案，但它们要么不相关，要么我对它们的理解不足以实现它们...

将不胜感激任何帮助！提前致谢

```
public class AudioFinalActivity extends Activity {

    private TextView tv;
    private String res;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // link text view obj
        tv = (TextView) findViewById(R.id.tv);
        res = "";

         String[] proj = { MediaStore.Audio.Media._ID,
         MediaStore.Audio.Media.DATA,
         MediaStore.Audio.Media.DISPLAY_NAME,
         MediaStore.Audio.Artists.ARTIST };
         // managed query doesn't need startManagingCursor called on the
         Cursor c = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
         proj, null, null, null);

//      ContentResolver contentResolver = getContentResolver();
//      String[] columns = { MediaColumns.TITLE, AudioColumns.DURATION,
//              MediaColumns.DATA
//      // add more columns if you want to fetch more data
//      };
//
//      Cursor c = contentResolver.query(
//              MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, columns, null,
//              null, null);

        if (c != null) {
            Log.d("AFA", "Cursor returned NULL");
        } else if (c.getCount() < 1) {
            Log.d("AFA", "Cursor query is empty.. :( ...");
        } else {
            // do stuff with our content...
            while (c.moveToNext()) {

                //String title = c.getString(c
                        .getColumnIndex(MediaColumns.TITLE));
                //Long duration = c.getLong(c
                        .getColumnIndex(AudioColumns.DURATION));
                //String data = c.getString(c
                        .getColumnIndex(MediaColumns.DATA));

                //res += title + "\n";
                res +=  c.getString(c.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)) + "\n";
                tv.setText(res);
            }
        }
    }
} 
```

我股票音乐播放器可以很好地播放我的手机音频..

**编辑：**

我刚刚删除了对光标为空和光标为空的检查，我似乎得到了一个结果..奇怪为什么光标为空而 while(c.MoveToNext())... 返回值...嗯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:36:11.227

your checking is `if (c != null) {}`, but I suppose it is `if (c == null) {}` (if you are checking the cursor being null)

# objective-c - ios 间接指针到目标 c 指针到 id 的隐式转换被 arc 禁止

> ID：10661283
> 
> 赞同：2
> 
> 时间：2012-05-19T00:18:10.287
> 
> 标签：objective-c, ios, casting, compiler-errors, nsmutablearray

嗨，下面的代码块给了我错误

```
-(void) addObserver: (id <ObserverDelegate>*) observer {    
     [self.queue addObject: observer]; //ERROR ON THIS LINE
} 
```

错误是说'间接指针到目标 c 指针到 id 的隐式转换是不允许使用 arc

我的 .h 文件

```
-(void) addObserver: (id <ObserverDelegate>*) observer;
@property(nonatomic, assign) NSMutableArray* queue; 
```

此行编译错误 [self.queue addObject:observer];

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:21:39.577

为什么要使用指向参数的`id`指针`observer`？为什么不只是有`id<ObserverDelegate>`？

# python - Django 管理员“预览 PDF”按钮

> ID：10661288
> 
> 赞同：2
> 
> 时间：2012-05-19T00:18:54.067
> 
> 标签：python, django, transactions, admin

迫切需要这项任务的帮助；现在已经破解了一天。该功能是将管理员通过管理界面编写的文本翻译成用户可以通过 Web 应用程序查看的 PDF。

该功能已经实现，只是我希望能够在实际发布之前看到我将生成的 PDF。所以在管理界面中，我希望创建一个“预览 PDF”按钮。本质上，它将保存当前表单（带有新更改）生成 PDF，以便可以看到更改，并回滚到原始状态，因此外部世界看不到任何更改。

我正在通过覆盖模型中的保存功能来解决这个问题。

```
@transaction.commit_manually
def save(self, force_insert=False, force_update=False, using=None):
    super(Doc, self).save(force_insert=force_insert, force_update=force_update, using=using)
    if self.preview:
        from lava_server.settings import common
        # make a copy
        doc_copy = self
        doc_copy.id = None
        # Prevent loopback
        doc_copy.preview = False
        transaction.rollback()
        doc_copy.save()
        common.TEMP_PDF_ID = doc_copy.id
    else:
        transaction.savepoint_commit(sid) 
```

我还覆盖了 response_change 和 response_add 以重定向到呈现 PDF 的视图。视图在渲染后删除 doc_copy。

老实说，我认为它是有效的，但现在它给了我一个

```
TransactionManagementError: Transaction managed block ended with pending COMMIT/ROLLBACK 
```

可能是因为我在保存方法中的嵌套事务？但我觉得我应该在这方面寻求更高的帮助，以防我遗漏了一些基本的东西，或者只是有一种简单的优越方法。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:16:15.790

这似乎是一种非常复杂的方法 - 这样您就可以创建一个保存点并且永远不会将其提交/回滚到 DB 中，这可能会导致数据库锁定（如您的示例中所示）。

我会更简单 - 点击“预览 PDF”按钮时，只需创建 pdf 并使用

```
response = HttpResponse(mimetype='application/pdf')
response['Content-Disposition'] = 'attachment; filename=preview.pdf'

#print PDF to response
return response 
```

这将在您的浏览器中下载 PDF，并且不会保存到数据库中。您可以预览它，当一切正常时 - 然后以常规方式保存它。只需将所有其他更改保存在数据库中，以便在重新加载页面时将它们保留在表单中。

另一种解决方案可能是为 PDF 文件实现文件状态字段，status = "DRAFT|PUBLISHED"，并仅向用户显示 PUBLISHED 版本，而 DRAFT 仅在管理员中可用...

# c# - 将字符串转换为 int64 列表

> ID：10661289
> 
> 赞同：1
> 
> 时间：2012-05-19T00:18:58.630
> 
> 标签：c#

在客户端，我有一个整数数组，我在其上调用 ToString 方法；然后我通过 ajax 将该字符串发送到服务器。

在服务器上，我正在写这个：

```
var TestList = (from string s in TheString.Split(',')
                select Convert.ToInt64(s)).ToList<long>(); 
```

如果传入的字符串实际上包含意外的值，这会崩溃吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:20:19.120

如果字符串包含意外值，它可能会抛出 a`FormatException`或 an `OverflowException`，如[`Convert.ToInt64(string)`](http://msdn.microsoft.com/en-us/library/0zahhahw.aspx).

为避免出现异常，您可以使用`bool long.TryParse(string, out long)`.

```
List<long> testList = new List<long>();
foreach (string s in theString.Split(','))
{
    long number;
    if (long.TryParse(s, out number))
    {
        testList.Add(number);
    }
    else
    {
        // Do something?
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:31:44.430

你可以在一个语句中完成它，但你需要一个辅助方法的帮助......

```
var TestList =
    (from string s in TheString.Split(',')
     let value = TryParseLong(s)
     where value != null
     select value.Value).ToList();

...

static long? TryParseLong(string s)
{
    long result;
    if (long.TryParse(s, out result))
        return result;
    return null;
} 
```

注意：实际上，您*可以*在没有辅助方法的情况下做到这一点：

```
long value;
var TestList =
    (from string s in TheString.Split(',')
     where long.TryParse(s, out value)
     select value).ToList(); 
```

但这不是一个好主意，因为查询会产生副作用，如果查询变得更复杂，可能会导致意外行为。

# orm - 具有关系的 Coldfusion HQL 查询 - 无法解析路径

> ID：10661290
> 
> 赞同：1
> 
> 时间：2012-05-19T00:19:16.880
> 
> 标签：orm, coldfusion, hql, entity-relationship, railo

我在使用 HQL 查询从相关实体获取数据时遇到问题。

我有一个与“图像”实体具有一对多关系的“照片拍摄”实体。我正在尝试提取属于特定 Photoshoot 的所有图像，我想使用 HQL 查询来执行此操作，以便我可以进行一些特定的过滤。

我得到的是：无法解析路径 [Photoshoot.sPhotoshootGUID]，意外令牌 [Photoshoot] [FROM Image WHERE Photoshoot.sPhotoshootGUID = '889440aa-a12a-11e1-8edb-d02788828044']

我不知道为什么 - 如果我撤回 Photoshoot，我可以使用“getImages()”函数轻松获取相关图像。如果我使用完全相同的代码来获取另一个相关实体，它似乎工作正常！

这是我的实体的代码：

- - 图片 - -

```
<cfcomponent persistent="true" entityname="Image" table="tblImages_Base">
<!--- Identifier --->
<cfproperty name="sImageGUID" fieldtype="id" generator="guid" setter="false" />

<!--- Properties --->
<cfproperty name="sFileName" ormtype="string" />
<cfproperty name="sImageFolder" ormtype="string" dbdefault="" />

<cfproperty name="Active" ormtype="boolean" default=0 dbdefault=0 notnull="true" />

<!--- Many Images can belong to a single Photoshoot --->
<cfproperty name="Photoshoot" 
            fieldtype="many-to-one" 
            cfc="Photoshoot" 
            fkcolumn="fk_sPhotoshootGUID" 
            fetch="join"
            inverse="true"             
            />
</cfcomponent> 
```

- - 照片拍摄 - -

```
<cfcomponent persistent="true" entityname="Photoshoot" table="tblPhotoshoots">
<!--- Identifier --->
<cfproperty name="sPhotoshootGUID" fieldtype="id" generator="guid" setter="false" />

<!--- Properties --->
<cfproperty name="Active" ormtype="boolean" default=0 dbdefault=0 notnull="true" />
<cfproperty name="l_ImageOrder" ormtype="text" />

<!--- One Photoshoot can contain many Images --->
<cfproperty name="Images" 
            fieldtype="one-to-many" 
            cfc="Image" 
            fkcolumn="fk_sPhotoshootGUID" 
            type="array" 
            singularname="Image"
            />
</cfcomponent> 
```

--- HQL 查询 ---

```
<cfquery name="Local.objPhotoshootImages" dbtype="hql">
    FROM    Image
    WHERE   Photoshoot.sPhotoshootGUID = '889440aa-a12a-11e1-8edb-d02788828044' 
</cfquery> 
```

如果它有所作为，我在 Railo 3.3.3.000 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:55:04.037

我不确定您的 HQL 失败的原因 - 该错误可能是由于区分大小写，但在您发布的代码中，“Photoshoot”似乎是正确的。

作为一种解决方法，您可以尝试调整 HQL 以使联接明确：

```
<cfquery name="Local.objPhotoshootImages" dbtype="hql">
FROM    Image
WHERE   fk_sPhotoshootGUID = '889440aa-a12a-11e1-8edb-d02788828044'
</cfquery> 
```

# ios - 将 UIImage 分成两半？

> ID：10661291
> 
> 赞同：10
> 
> 时间：2012-05-19T00:19:40.653
> 
> 标签：ios, xcode, cocoa-touch, ipad, xcode4.3

我将如何将 UIImage 分成两半（中间），以便制作两个图像？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T04:11:43.933

你可以试试这个

```
UIImage *image = [UIImage imageNamed:@"yourImage.png"];
CGImageRef tmpImgRef = image.CGImage;
CGImageRef topImgRef = CGImageCreateWithImageInRect(tmpImgRef, CGRectMake(0, 0, image.size.width, image.size.height / 2.0));
UIImage *topImage = [UIImage imageWithCGImage:topImgRef];
CGImageRelease(topImgRef);

CGImageRef bottomImgRef = CGImageCreateWithImageInRect(tmpImgRef, CGRectMake(0, image.size.height / 2.0,  image.size.width, image.size.height / 2.0));
UIImage *bottomImage = [UIImage imageWithCGImage:bottomImgRef];
CGImageRelease(bottomImgRef); 
```

希望这可以帮到你， ：）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-14T14:53:56.937

```
- (void)splitImage:(UIImage *)image
{
    CGFloat imgWidth = image.size.width/2;
    CGFloat imgheight = image.size.height;

    CGRect leftImgFrame = CGRectMake(0, 0, imgWidth, imgheight);
    CGRect rightImgFrame = CGRectMake(imgWidth, 0, imgWidth, imgheight);

    CGImageRef left = CGImageCreateWithImageInRect(image.CGImage, leftImgFrame);
    CGImageRef right = CGImageCreateWithImageInRect(image.CGImage, rightImgFrame);

    // These are the images we want!
    UIImage *leftImage = [UIImage imageWithCGImage:left];
    UIImage *rightImage = [UIImage imageWithCGImage:right];

    // Don't forget to free the memory!
    CGImageRelease(left);
    CGImageRelease(right);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-18T09:25:48.083

iOS 11，swift 4.0 更新版本[https://stackoverflow.com/users/893872/durul-dalkanat](https://stackoverflow.com/users/893872/durul-dalkanat)我认为老实说是最好的:)

这将图像分成 4 个部分

```
func splitImage(image2D: UIImage) -> [UIImage] {
    let imgWidth = image2D.size.width / 2
    let imgHeight = image2D.size.height / 2
    var imgImages:[UIImage] = []

    let leftHigh = CGRect(x: 0, y: 0, width: imgWidth, height: imgHeight)
    let rightHigh = CGRect(x: imgWidth, y: 0, width: imgHeight, height: imgHeight)
    let leftLow = CGRect(x: 0, y: imgHeight, width: imgWidth, height: imgHeight)
    let rightLow = CGRect(x: imgWidth, y: imgHeight, width: imgWidth, height: imgHeight)

    let leftQH = image2D.cgImage?.cropping(to:leftHigh)
    let rightHQ = image2D.cgImage?.cropping(to:rightHigh)
    let leftQL = image2D.cgImage?.cropping(to:leftLow)
    let rightQL = image2D.cgImage?.cropping(to:rightLow)

    imgImages.append(UIImage(cgImage: leftQH!))
    imgImages.append(UIImage(cgImage: rightHQ!))
    imgImages.append(UIImage(cgImage: leftQL!))
    imgImages.append(UIImage(cgImage: rightQL!))

    return imgImages
} 
```

# r - 在列组上应用函数

> ID：10661295
> 
> 赞同：17
> 
> 时间：2012-05-19T00:20:21.380
> 
> 标签：r, dataframe, multiple-columns, apply

如何使用`apply`或相关函数创建一个新数据框，其中包含非常大数据框中每对列的行平均值的结果？

我有一台仪器可以输出`n`大量样本的重复测量值，其中每个测量值都是一个向量（所有测量值都是相同长度的向量）。我想计算每个样本的所有重复测量的平均值（和其他统计数据）。这意味着我需要将`n`连续的列组合在一起并进行逐行计算。

举个简单的例子，对两个样本进行三个重复测量，我怎么能得到一个有两列（每个样本一个）的数据框，一个是 中每行重复的平均值，`dat$a`一个是和的每一行的平均值。`dat$b``dat$c``dat$d``dat$e``dat$f`

这是一些示例数据

```
dat <- data.frame( a = rnorm(16), b = rnorm(16), c = rnorm(16), d = rnorm(16), e = rnorm(16), f = rnorm(16))

            a          b            c          d           e          f
1  -0.9089594 -0.8144765  0.872691548  0.4051094 -0.09705234 -1.5100709
2   0.7993102  0.3243804  0.394560355  0.6646588  0.91033497  2.2504104
3   0.2963102 -0.2911078 -0.243723116  1.0661698 -0.89747522 -0.8455833
4  -0.4311512 -0.5997466 -0.545381175  0.3495578  0.38359390  0.4999425
5  -0.4955802  1.8949285 -0.266580411  1.2773987 -0.79373386 -1.8664651
6   1.0957793 -0.3326867 -1.116623982 -0.8584253  0.83704172  1.8368212
7  -0.2529444  0.5792413 -0.001950741  0.2661068  1.17515099  0.4875377
8   1.2560402  0.1354533  1.440160168 -2.1295397  2.05025701  1.0377283
9   0.8123061  0.4453768  1.598246016  0.7146553 -1.09476532  0.0600665
10  0.1084029 -0.4934862 -0.584671816 -0.8096653  1.54466019 -1.8117459
11 -0.8152812  0.9494620  0.100909570  1.5944528  1.56724269  0.6839954
12  0.3130357  2.6245864  1.750448404 -0.7494403  1.06055267  1.0358267
13  1.1976817 -1.2110708  0.719397607 -0.2690107  0.83364274 -0.6895936
14 -2.1860098 -0.8488031 -0.302743475 -0.7348443  0.34302096 -0.8024803
15  0.2361756  0.6773727  1.279737692  0.8742478 -0.03064782 -0.4874172
16 -1.5634527 -0.8276335  0.753090683  2.0394865  0.79006103  0.5704210 
```

我追求这样的东西

```
 X1          X2
1  -0.28358147 -0.40067128
2   0.50608365  1.27513471
3  -0.07950691 -0.22562957
4  -0.52542633  0.41103139
5   0.37758930 -0.46093340
6  -0.11784382  0.60514586
7   0.10811540  0.64293184
8   0.94388455  0.31948189
9   0.95197629 -0.10668118
10 -0.32325169 -0.35891702
11  0.07836345  1.28189698
12  1.56269017  0.44897971
13  0.23533617 -0.04165384
14 -1.11251880 -0.39810121
15  0.73109533  0.11872758
16 -0.54599850  1.13332286 
```

我这样做了，但显然对我更大的数据框没有好处......

```
data.frame(cbind(
apply(cbind(dat$a, dat$b, dat$c), 1, mean),
apply(cbind(dat$d, dat$e, dat$f), 1, mean)
)) 
```

我已经尝试过`apply`循环并不能完全组合在一起。我的实际数据有数百列。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-19T01:03:13.133

这可能更适合您的情况，因为您传递了一个索引列表。如果速度是一个问题（大数据框），我会选择`lapply`with`do.call`而不是`sapply`：

```
x <- list(1:3, 4:6)
do.call(cbind, lapply(x, function(i) rowMeans(dat[, i]))) 
```

如果您也只有 col 名称，则可以使用：

```
x <- list(c('a','b','c'), c('d', 'e', 'f'))
do.call(cbind, lapply(x, function(i) rowMeans(dat[, i]))) 
```

**编辑**

只是碰巧想到也许你想自动执行此操作以每三列执行一次。我知道有更好的方法，但这里是 100 列数据集：

```
dat <- data.frame(matrix(rnorm(16*100), ncol=100))

n <- 1:ncol(dat)
ind <- matrix(c(n, rep(NA, 3 - ncol(dat)%%3)), byrow=TRUE, ncol=3)
ind <- data.frame(t(na.omit(ind)))
do.call(cbind, lapply(ind, function(i) rowMeans(dat[, i]))) 
```

**编辑 2** 仍然对索引不满意。我认为有更好/更快的方法来传递索引。这是第二个虽然不令人满意的方法：

```
n <- 1:ncol(dat)
ind <- data.frame(matrix(c(n, rep(NA, 3 - ncol(dat)%%3)), byrow=F, nrow=3))
nonna <- sapply(ind, function(x) all(!is.na(x)))
ind <- ind[, nonna]

do.call(cbind, lapply(ind, function(i)rowMeans(dat[, i]))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T17:51:50.783

@david 在这里提出了一个类似的问题：[平均 r 中的每 16 列](https://stackoverflow.com/questions/10704344)（现已关闭），我根据@joran 和 @Ben 的建议，通过改编上面的@TylerRinker 的答案来回答这个问题。因为生成的函数可能对 OP 或未来的读者有帮助，所以我在此处复制该函数以及 OP 数据的示例。

```
# Function to apply 'fun' to object 'x' over every 'by' columns
# Alternatively, 'by' may be a vector of groups
byapply <- function(x, by, fun, ...)
{
    # Create index list
    if (length(by) == 1)
    {
        nc <- ncol(x)
        split.index <- rep(1:ceiling(nc / by), each = by, length.out = nc)
    } else # 'by' is a vector of groups
    {
        nc <- length(by)
        split.index <- by
    }
    index.list <- split(seq(from = 1, to = nc), split.index)

    # Pass index list to fun using sapply() and return object
    sapply(index.list, function(i)
            {
                do.call(fun, list(x[, i], ...))
            })
} 
```

然后，要找到重复的平均值：

```
byapply(dat, 3, rowMeans) 
```

或者，也许是复制品的标准偏差：

```
byapply(dat, 3, apply, 1, sd) 
```

**更新**

`by`也可以指定为组向量：

```
byapply(dat, c(1,1,1,2,2,2), rowMeans) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-19T00:30:36.850

来自向量 a,b,c 的行的平均值

```
 rowMeans(dat[1:3]) 
```

表示来自向量 d,e,f 的行

```
 rowMeans(dat[4:6]) 
```

一站式通话

```
results<-cbind(rowMeans(dat[1:3]),rowMeans(dat[4:6])) 
```

如果您只知道列的名称而不知道顺序，那么您可以使用：

```
rowMeans(cbind(dat["a"],dat["b"],dat["c"]))
rowMeans(cbind(dat["d"],dat["e"],dat["f"]))

#I dont know how much damage this does to speed but should still be quick 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-19T00:34:50.073

该`rowMeans`解决方案会更快，但为了完整起见，您可以使用以下方法执行此操作`apply`：

```
t(apply(dat,1,function(x){ c(mean(x[1:3]),mean(x[4:6])) })) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-19T04:10:41.403

受@joran 建议的启发，我想出了这个（实际上与他的建议有点不同，尽管转置建议特别有用）：

使用 cols 制作示例数据的数据框`p`以模拟真实的数据集（按照上面@TylerRinker 的回答，与我在问题中的糟糕示例不同）

```
p <- 99 # how many columns?
dat <- data.frame(matrix(rnorm(4*p), ncol = p)) 
```

重命名此数据框中的列以创建`n`连续列组，这样如果我对三列的组感兴趣，我会得到列名，例如 1,1,1,2,2,2,3,3,3,等等，或者如果我想要四列的组，它将是 1,1,1,1,2,2,2,2,3,3,3,3 等。我现在要三个（我猜这个对于像我这样对索引不太了解的人来说是一种索引）

```
n <- 3 # how many consecutive columns in the groups of interest?
names(dat) <- rep(seq(1:(ncol(dat)/n)), each = n, len = (ncol(dat))) 
```

现在使用 apply 和 tapply 获取每个组的行均值

```
dat.avs <- data.frame(t(apply(dat, 1, tapply, names(dat), mean))) 
```

主要缺点是原始数据中的列名被替换（尽管这可以通过将分组编号而不是列名放在新行中来克服）并且列名由 apply-tapply 函数返回，无济于事命令。

除了@joran 的建议，这里有一个`data.table`解决方案：

```
p <- 99 # how many columns?
dat <- data.frame(matrix(rnorm(4*p), ncol = p))
dat.t <-  data.frame(t(dat))

n <- 3 # how many consecutive columns in the groups of interest?
dat.t$groups <- as.character(rep(seq(1:(ncol(dat)/n)), each = n, len = (ncol(dat))))

library(data.table)
DT <- data.table(dat.t)
setkey(DT, groups)
dat.av <- DT[, lapply(.SD,mean), by=groups] 
```

感谢大家的快速和耐心的努力！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-05T17:39:04.497

如果您有兴趣将函数应用于每个独特的列组合，有一个非常简单的解决方案，即所谓的组合。

```
combinations <- combn(colnames(df),2,function(x) rowMeans(df[x])) 
```

要计算三列的每个唯一组合的统计信息等，只需将 2 更改为 3。该操作是矢量化的，因此比循环更快，例如`apply`上面使用的族函数。如果列的顺序很重要，那么您需要一个置换算法来重现有序集：`combinat::permn`

# javascript - 此 JavaScript 代码是否也会通过禁用一个键来影响其他按键事件？

> ID：10661296
> 
> 赞同：2
> 
> 时间：2012-05-19T00:20:27.213
> 
> 标签：javascript, jquery, keypress, dom-events

我正在使用它来禁用空格键在浏览器中的“滚动”效果。这也会影响其他按键事件吗？

```
window.onkeydown = function(e) {
    return !(e.keyCode == 32);
}; 
```

有人可以解释一下这是在做什么吗？我不确定这段代码是否不好，但它似乎禁用了我页面中的其他按键相关代码，我想确保这不是原因。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:43:58.590

ASCII 码 32 是代表空格键的 ASCII 值，您的代码本质上是告诉浏览器在检测到该键码时返回 false。由于返回 false ，因此您所说的滚动条效果实际上已成功禁用。

然而，这个方便的空格键滚动禁用功能的不幸副作用是它禁用了页面上任何地方的空格键按键。

如果检测到 keycode，则不要返回 false，而是将当前 scrollTop 值传递到闭包中，该闭包将函数返回给 setTimeout 事件。当 setTimeout 触发时，scrollTop 位置被重置回它在 setTimeout 事件第一次注册时的值。

```
window.onkeydown = function(e) {
    if(event.keyCode == 32) { // alert($(document).scrollTop() );
        setTimeout(                 
            (function(scrollval) { 
                return function() { 
                    $(document).scrollTop(scrollval);
                };
            })( $(document).scrollTop() ), 0);
    }
}; 
```

Your users can still conveniently make use of spacebars in input textboxes and textareas, and at the same time, pressing the spacebar key while not focused on a text element will no longer result in the page scrolling.

Under the hood, the scroll is still taking place. It's just being reset at a rate fast enough to where the user doesn't notice.

If you increase this value to 100 or 1000, it will give you a better idea of what is going on under the hood. You'll actually see the page scroll and then get set back to the previous scroll position.

This was only tested in Chrome and Firefox 13! So you may have to adjust the setTimeout duration -- currently 0 -- to a different value in browsers like Internet Explorer. Be prepared to gracefully degrade -- by supporting this feature only in modern browsers -- if necessary.

**UPDATE:**

For reference, below is the method to use to make this compatible in the major browsers. It has been tested in Chrome, Firefox, IE8, IE9, and Safari.

While it does work in IE8/IE9, it isn't very smooth.

```
// put the eventhandler in a named function so it can be easily assigned
   // to other events.
function noScrollEvent(e) {
    e = e || window.event;
    if(e.keyCode == 32) {  
        setTimeout(                 
            (function(scrollval) { 
                return function() { 
                    $(document).scrollTop(scrollval);
                };
            })( $(document).scrollTop() ), 0);
    }
}

// Chrome and Firefox must use onkeydown
window.onkeydown = noScrollEvent;

// Internet Explorer 8 and 9 and Safari must use onkeypress
window.document.onkeypress = noScrollEvent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:25:44.637

如果另一个元素绑定到 keydown 事件，它将不受此代码的影响

查看我的小提琴并尝试添加和删除监听 keydown 事件的 textarea

```
window.onkeydown = function(e) {
    return !(e.keyCode == 32);
};

document.getElementsByTagName("textarea")[0].onkeydown = function(e) {
    alert("hi");
} 
```

[http://jsfiddle.net/HnD4Y/](http://jsfiddle.net/HnD4Y/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:04:23.073

The answer above with the setTimeout did not work for me at all on Chome with a delay of 0\. With a delay bumped above 50ms, it began to work, but that caused a noticeable page jump. I believe that setTimeout was scrolling the page up too early, then Chrome moved it down later.

Below is my solution that is working well. It returns false on the keydown event to prevent the browser from doing a page-down. Then you make sure event you set up on your button etc. to use the keyup event instead.

```
$(mySelector).keyup(eventHandlerFunction);

[dom element].onkeydown = function(event) {
  if (event.keyCode == 32) {return false;}
}; 
```

Note: input fields will not reflect spacebar key events if they or their parent are covered by this onkeydown handler

# javascript - 在 HTML 中调用 Javascript 方法

> ID：10661297
> 
> 赞同：0
> 
> 时间：2012-05-19T00:20:33.550
> 
> 标签：javascript, html

我的 javascript 文件（test.js）定义了 Method1() 方法。

```
<script src="../Scripts/test.js" type="text/javascript"></script> 
```

我的 html 定义如下。我找不到 Method1()。有任何想法吗？

```
<p><input type="button" name="login" id="login" value="Login" onclick="Method1()"/> </p> 
```

这是 test.js 中声明的代码...

```
<script type="text/javascript">

 function LoginToServer() {

......
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:30:17.157

文件中的代码`.js`是 JavaScript 代码，而不是 HTML 标记。

这：

```
<script type="text/javascript">
</script> 
```

是 HTML 标记，而不是 JavaScript 代码。你应该把它从`test.js`.

由于您没有准确地向我们展示您`Method1`的定义，我认为它没问题，这是唯一的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:57:58.573

未检测到的原因`Method1()`是因为您`test.js`有语法错误 -`<script></script>`标签。

删除`<script>`您的开始和结束标签`test.js`，一切都应该正常工作。

```
function LoginToServer() {
//function code
} 
```

`.js`文件应该只包含 JavaScript 代码。

`.html`文件也可能包含 JavaScript，但代码必须用`<script></script>`.

此外，您不必提供，`type="text/javascript"`因为**HTML5**知道在这些标记之间将是 JavaScript。

# mod-rewrite - 如何重写 URL，将路径拆分为单独的查询字符串参数？

> ID：10661303
> 
> 赞同：1
> 
> 时间：2012-05-19T00:22:23.993
> 
> 标签：mod-rewrite, apache2

我想将诸如 mysite.com/Section/Subsection/SubSubSection 的 URL 重写为 mysite.com/index.php?s=Section&sub1=SubSection&sub2=SubSubSection

我写了这条规则：

```
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/?$ /index.php?s=$1&sub1=$2&sub2=$3 
```

但问题是 Section、SubSection 和 SubSubSection 根本不是强制性的，但如果我插入一些“？” 字符它继续内部服务器错误...

（我试过这个：

```
RewriteRule ^([^/]*)(/([^/]*))?(/([^/]*))?/?$ /index.php?s=$1&sub1=$3&sub2=$5 
```

但它不起作用）

另一个问题是还有其他不应编辑的 URL，例如 /res/img/logo.png。

有问题的网站是动态的，所以我事先不知道部分名称。当然，我知道应该排除的 URL。

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:15:49.577

我认为你应该做这样的事情......

```
RewriteRule ^/([a-zA-Z]*)/([a-zA-Z]*)/([a-zA-Z]*)/?$ /index.php?s=$1&sub1=$2&sub2=$3 
```

问候，

咪咪兹

# php - Ubuntu php mkdir

> ID：10661314
> 
> 赞同：0
> 
> 时间：2012-05-19T00:24:18.580
> 
> 标签：php, ubuntu, permissions, mkdir, umask

我正在尝试创建一个目录，但每次创建新目录时我都获得了错误的权限。

创建文件夹的文件的权限：

```
rwxr-xr-x 
```

尝试在其中创建文件夹的权限

```
rwxr-xr-x 
```

两者都归 www-data www-data 所有

我尝试用 php 创建文件夹

```
mkdir(location,0775); 
```

运行脚本后的结果

```
r-----rwt 
```

我没有理由相信它出了问题。

umask 在 002 上。

希望有人能帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-19T00:28:22.817

```
$location = "path/to/you/dir";
$uold     = umask(0);

mkdir($location,0777,true);
umask($uold); 
```

试一试，看看它说什么......

# ruby-on-rails - Rails 3 级深度嵌套资源

> ID：10661315
> 
> 赞同：8
> 
> 时间：2012-05-19T00:25:00.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我知道许多 Rails 开发人员说将资源嵌套超过 2 层是错误的。我也同意，因为当您的网址看起来像 mysite.com/account/1/people/1/notes/1 时，它会变得混乱。我正在尝试找到一种使用嵌套资源但不将它们嵌套 3 层的方法。

这是错误的做法，因为 Rails 开发人员不推荐它，而且很难弄清楚如何将它嵌套在控制器或表单视图中。

```
resources :account do 
  resources :people do
    resources :notes
  end
end 
```

Rails 开发人员说应该这样做的正确方法是这样的

```
resources :account do 
  resources :people
end

resources :people do
  resources :notes
end 
```

这是我经常遇到的问题。每当我访问 account/1/people 时，我都可以将一个人添加到该帐户中，并且可以说 URL 就像 mysite.com/account/1/people/1 一样，并且效果很好。

现在，如果我尝试从帐户 1 访问 mysite.com/people/1/notes，我会收到错误消息

> 找不到没有和帐户 ID 的人

如何让它正常工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T01:55:27.663

您可以将路线嵌套到您喜欢的深度，因为 rails 3.x 允许您使用 shallow: true 将它们展平

尝试尝试

```
resources :account, shallow: true do 
  resources :people do
    resources :notes
  end
end 
```

使用 rake 路线看看你得到了什么:)

**更新以回应评论**

正如我所说，玩 rake routes 看看你能得到什么 url

```
resources :account, shallow: true do 
  resources :people, shallow: true do
    resources :notes
  end
end 
```

为您提供这些路线

```
:~/Development/rails/routing_test$ rake routes
      person_notes GET    /people/:person_id/notes(.:format)        notes#index
                   POST   /people/:person_id/notes(.:format)        notes#create
   new_person_note GET    /people/:person_id/notes/new(.:format)    notes#new
         edit_note GET    /notes/:id/edit(.:format)                 notes#edit
              note GET    /notes/:id(.:format)                      notes#show
                   PUT    /notes/:id(.:format)                      notes#update
                   DELETE /notes/:id(.:format)                      notes#destroy
    account_people GET    /account/:account_id/people(.:format)     people#index
                   POST   /account/:account_id/people(.:format)     people#create
new_account_person GET    /account/:account_id/people/new(.:format) people#new
       edit_person GET    /people/:id/edit(.:format)                people#edit
            person GET    /people/:id(.:format)                     people#show
                   PUT    /people/:id(.:format)                     people#update
                   DELETE /people/:id(.:format)                     people#destroy
     account_index GET    /account(.:format)                        account#index
                   POST   /account(.:format)                        account#create
       new_account GET    /account/new(.:format)                    account#new
      edit_account GET    /account/:id/edit(.:format)               account#edit
           account GET    /account/:id(.:format)                    account#show
                   PUT    /account/:id(.:format)                    account#update
                   DELETE /account/:id(.:format)                    account#destroy 
```

可以看出，您可以访问您决定需要的任何级别的所有模型。其余的取决于您在控制器操作中放入的任何内容。

您确实必须执行操作以确保在未传入 id 参数时采取适当的操作，因此如果您为特定模型使用 id，请检查该 id 是否在参数列表中，如果没有则采取替代行动。例如，如果您没有传递帐户 ID，请确保您不要尝试使用它

您的评论表明您已经使用浅层路线，但这不是您在问题中发布的内容？

# java - MacOSX 上的 Java：如何访问包中的文件

> ID：10661316
> 
> 赞同：0
> 
> 时间：2012-05-19T00:25:07.553
> 
> 标签：java, macos, file, configuration

我有一个 Java 应用程序，我正在打包到一个 Mac 应用程序包（该文件夹结构包含所有应用程序，但对用户来说看起来像是一个可执行文件）。

我的问题：我正在本地文件夹（“。”）中读取和写入一些配置文件。但是，在 Mac 上，这似乎是应用程序包所在的文件夹（所以通常是“应用程序”文件夹，我显然不希望这样。

我的问题：如何在该包中存储文件？如何以编程方式检索捆绑名称以计算完全限定的文件夹？

我知道我可以尝试使用 ClassLoader 方式，但我想避免这种情况（出于安全原因）。

还是有更好的方法来在本地存储应用程序缓存和配置数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:18:31.793

Mac OS X Finder 将*任何*名称以`.app`应用程序结尾的目录处理；右键单击以*显示包内容*。它仍然是用于 I/O 目的的正常目录。这个[项目](http://robotchase.sourceforge.net/)就是一个例子。有关相对于应用程序包的路径，请参阅此[答案。](https://stackoverflow.com/a/7947496/230513)

附录：*有没有更好的方法在本地存储应用程序缓存和配置数据？*

引用的[示例](http://robotchase.sourceforge.net/)`java.util.prefs.Preferences`使用了，但是`javax.jnlp.PersistenceService`是一种[替代方法](https://stackoverflow.com/a/6886694/230513)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:23:00.533

好的，基本答案/解决方案是：不要这样做。

我最初想要这样做的原因是在本地 HD 上缓存大量数据。Java 首选项是配置数据（即小数据量）的不错选择，但无法处理兆字节大小范围内的数据。

我的解决方案：

在 MacOSX ( `System.getProperty("os.name").contains("Mac OS X")`) 上，我只需在用户的主文件夹 ( `System.getProperty("user.home")`) 中创建一个文件夹。我在该文件夹前面加上 a`.`以确保它对用户隐藏。这也确保了我对该文件夹具有写访问权（这可能是 .app 文件夹中的问题，具体取决于用户复制它的位置）

在 Windows ( `System.getProperty("os.name").contains("Windows")`) 上，我在目录中创建该文件夹`System.getenv("APPDATA")`（请注意，此环境变量仅存在于 Windows 系统上。

现在我可以完全访问文件系统（即使没有管理员权限），并且可以存储尽可能多的数据。

# c++ - 在 C++ 中转换为 double 时处理异常

> ID：10661321
> 
> 赞同：0
> 
> 时间：2012-05-19T00:26:09.657
> 
> 标签：c++, file, exception-handling

我正在从文本文件中读取数据，并且需要从文件中读取双值。现在的问题是，如果双精度值无效，例如“！@#$%^&*”，那么我希望我的程序给出异常以便我可以处理它。这是我的代码

```
void Employee::read(istream &is) {
    try{

        is.get(name, 30);
        is >> salary;
        char c;

        while(is.peek()=='\n')
            is.get( c ); 

    }
    catch(exception e){
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:21:00.813

这是验证**双重**输入的可运行示例。

```
#include<iostream>
#include<sstream>
#include<limits>
using std::numeric_limits;
int main(){
    std::string goodString = "12.212", badString = "!@$&*@"; 
    std::istringstream good(goodString), bad(badString);
    double d1=numeric_limits<double>::min(),
           d2=numeric_limits<double>::min();
    std::string tmp;

    good >> d1;
    if (d1 == numeric_limits<double>::min()) {
      // extraction failed
      d1 = 0;
      good.clear(); // clear error flags to allow further extraction
      good >> tmp; // consume the troublesome token
      std::cout << "Bad on d1\n";
    } else std::cout << "All good on d1\n";

    if (d2 == numeric_limits<double>::min()) {
      d2 = 0;
      bad.clear();
      bad >> tmp;
      std::cout << "Bad on d2\n";
    } else std::cout << "All good on d2\n";
} 
```

产生的输出是..

> d1 一切顺利
> 
> d2不好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T10:33:28.760

我终于通过为 istream 设置异常位使其工作

```
is.exceptions(ios::failbit | ios::badbit);  //setting ifstream to throw exception on bad data 
```

# html - CSS3：为图像添加圆角

> ID：10661322
> 
> 赞同：1
> 
> 时间：2012-05-19T00:26:16.017
> 
> 标签：html, css

我一直在尝试为框架添加圆角，但它仅适用于 mozilla 而不适用于 chrome 或 IE。

![圆角](../Images/f00661bda456920d1ac0637f4f9629ac.png)

我没有将`border-radius`属性添加到图像标签，而是添加到画布标签

```
canvas {border-bottom-right-radius: 50px;border-bottom-left-radius: 50px;} 
```

任何人都可以提出一些建议吗？

该网站是[n1bar.com](http://n1bar.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:30:14.297

确保为所有浏览器设置半径，如下所示：

```
canvas {
    -moz-border-bottom-right-radius: 50px; /* Firefox */
    -webkit-border-bottom-right-radius: 50px; /* Safari, Chrome */
    border-bottom-right-radius: 50px; /* CSS3 */

    -moz-border-bottom-left-radius: 50px; /* Firefox */
    -webkit-border-bottom-left-radius: 50px; /* Safari, Chrome */
    border-bottom-left-radius: 50px; /* CSS3 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:44:08.463

更清洁的版本：

```
-moz-border-radius: 0 0 50px 50px;
-webkit-border-radius: 0 0 50px 50px;
border-radius: 0 0 50px 50px; 
```

本质上，顺序是“左上、右上、右下、左下”。

# .htaccess - 301 将所有重定向到一个文件夹

> ID：10661329
> 
> 赞同：0
> 
> 时间：2012-05-19T00:27:10.273
> 
> 标签：.htaccess, redirect

我不想重定向

```
www.example.com/folder 
```

**包括要登陆的子文件夹和所有文件**

```
www.example.com/new 
```

进一步澄清一下，'/folder/blah' 应该只登陆 '/new' 而**不是**'/new/blah'！

请帮助重定向..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:51:21.360

这应该将文件夹下的任何内容重写`folder`到`new`文件夹：

```
RewriteEngine on    
RewriteRule ^folder/.+$ /new/ [L,R=301] 
```

例子：

*   文件夹/测试
*   文件夹/test.html
*   文件夹/test/test2.html

所有将被重定向到`/new/`文件夹

# java - 有状态会话 bean 与无状态会话 bean，实例变量困境

> ID：10661331
> 
> 赞同：0
> 
> 时间：2012-05-19T00:27:46.177
> 
> 标签：java, netbeans, ejb, stateless-session-bean

我有一个无状态会话 bean，但我想添加对另一个 bean 的引用以执行某些过程。因此，如果我添加对另一个 bean 的引用，它会显示在这样的实例级别变量中，

```
@Stateless
public class AccountFacade extends AbstractFacade<Account> implements AccountFacadeRemote         {
    @EJB
    private BillerFacadeRemote billerFacade;

    public AccountFacade() {
    super(Account.class);
    }

    ... all other methods...
} 
```

### 问题

现在，根据定义，无状态 bean 不应该有任何实例级变量。所以我很困惑把这个放在哪里`private BillerFacadeRemote billerFacade;`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:33:28.627

你的代码很好。

@EJB 注释将 bean 注入到您的类中，并且应用程序服务器管理它的生命周期。

我建议阅读或略读相当长的 Java EE[教程](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html#giplm)。

“EJB 容器通常创建和维护一个无状态会话 bean 池，开始无状态会话 bean 的生命周期。容器执行任何依赖注入，然后调用注解 @PostConstruct 的方法（如果存在）。bean 现在已准备好开展业务客户端调用的方法。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:12:07.143

无状态 bean 可以具有表示依赖项的实例变量。

事实上，这甚至是被鼓励的。如果没有实例变量，您可以在许多情况下只在实用程序类中使用静态方法。

然而，不鼓励的是使用代表客户端可观察状态的实例变量。*这*是错误的，但是像实体管理器、jms 队列、JDBC 连接以及因此无状态服务委托（部分）其工作的其他服务等依赖项是绝对可以的。

请注意，注入是实例变量中的真正实例注入。它*不是*类级别（静态）注入。

# android - 创建我自己的 android 应用程序/启动器

> ID：10661336
> 
> 赞同：0
> 
> 时间：2012-05-19T00:28:44.620
> 
> 标签：android, eclipse, launcher

首先，什么软件最好用，在哪里可以下载？有没有什么程序可以让我更多地通过视觉而不是使用一堆代码来工作？

我查看了 Android 为开发人员提供的信息，然后下载了 Eclipse Classic。但是，当我尝试运行它时出现此错误。

" 必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 Eclipse。搜索以下位置后未找到 Java 虚拟机：C:\users\administrator\desktop\eclipse...</p >

如果这被证明是最好的程序......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:48:20.223

实际上 Eclipse 是开发 Android 应用程序的最佳工具。并且使用 Eclipse 的 Android 开发工具 (ADT) 插件，您可以以图形方式创建简单的界面。

使用本教程设置 eclipse 和 ADT [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

您面临的错误是因为您没有 Java 开发工具包 (JDK) 或未正确安装。从[这里](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:50:09.397

您缺少 JDK。

请参阅[Android SDK](http://developer.android.com/sdk/installing.html)，尤其是第 1 步和下载[JDK的链接](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# java - 在java中将缩短的url扩展为其原始的全长url

> ID：10661337
> 
> 赞同：6
> 
> 时间：2012-05-19T00:28:45.550
> 
> 标签：java, url, urlconnection

我正在尝试采用缩短的 url 并将其扩展为 java 中字符串格式的原始全长 url。我已经能够在网上找到一个教程，但是我无法得到这个来真正让我得到完整的网址。有没有人这样做过或知道如何做到这一点？任何帮助都是巨大的，谢谢

```
URLConnection conn = null;
try {
    URL inputURL = new URL("http://bit.ly/9mglq8");
    conn = inputURL.openConnection();

} catch (MalformedURLException e) {

} catch (IOException ioe) {

}
String realU = conn.toString();
Toast.makeText(ImagetestActivity.this, realU,
               Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T00:40:01.177

```
System.out.println("Short URL: "+ shortURL);
                urlConn =  connectURL(shortURL);
                urlConn.getHeaderFields();
                System.out.println("Original URL: "+ urlConn.getURL());

/* connectURL - This function will take a valid url and return a 
URL object representing the url address. */
URLConnection connectURL(String strURL) {
        URLConnection conn =null;
 try {
     URL inputURL = new URL(strURL);
     conn = inputURL.openConnection();
            int test = 0;

 }catch(MalformedURLException e) {
     System.out.println("Please input a valid URL");
 }catch(IOException ioe) {
     System.out.println("Can not connect to the URL");
 }
 return conn;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T00:38:53.050

您可能想要使用官方 bit.ly API 中的[扩展查找，或 URLConnection 的](http://dev.bitly.com/links.html#v3_expand)[getHeaderField](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getHeaderField%28java.lang.String%29)方法来获取`Location`标题。

我从来没有做过这些，我假设后者不会有任何问题，但我想官方方法可能是保证你得到你需要的东西的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-11T14:09:58.167

```
public static void getURL(String bitly) throws SQLException {   

        URLConnection conn = null;
        String bitlyLink = null;
        try {
            URL inputURL = new URL(bitlyLink);
            conn = inputURL.openConnection();
            conn.getHeaderFields();
            System.out.println("Original URL: "+ conn.getURL());

        } catch(Exception e) { 
          System.out.println("Error: "+ e.getMessage());
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T05:45:43.123

从 bit.ly 规范：

比特利是如何工作的？bitly 通过发出“301 重定向”来工作：一种使网页在许多 URL 下可用的技术。当您使用 bitly 缩短链接时，您会将点击从 bitly 重定向到目标 URL。301 重定向是最有效且对搜索引擎友好的网页重定向方法，也是 bitly 使用的方法。由于 bitly 不会重复使用或修改链接，我们认为我们的重定向是永久性的。

这意味着当您收到 301 响应代码时，您必须查看“位置”标头以确定重定向到的位置。这是一个示例 301 响应：

HTTP/1.1 301 永久移动位置：[http ://www.example.org/index.asp](http://www.example.org/index.asp)

# objective-c - 滚动时在uitableview单元格上异步加载自定义对象的任何简单教程

> ID：10661339
> 
> 赞同：1
> 
> 时间：2012-05-19T00:29:58.240
> 
> 标签：objective-c, uitableview, asynchronous

我正在尝试找到一个简单的教程，用于在滚动时在 uitableview 单元格上异步插入自定义对象，因为我的 uitableview 滚动不顺畅。我已经搜索过，但我只发现图像异步加载没有帮助。我有一个需要异步加载的uiview。在对象加载之前需要进行过多的处理工作，结果滚动不流畅。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T01:43:02.800

这并不像看起来那么难。只有一个警告。即使没有完全加载，您也必须知道单元格的高度。

如果 tableView 具有恒定的行高，则设置 tableView.rowHeight。如果您需要动态确定行高，请使用 UITableViewDelegate 的`–tableView:heightForRowAtIndexPath:`回调。

然后在`-tableView:cellForRowAtIndexPath`出列单元格中，将其设置为某个初始状态，启动 NSOperation 或 GCD 块，最后返回已重置的单元格。

在 NSOperation 或 CCG 块中，您将执行所需的工作，然后回调到主线程以将值设置到单元格中。这是异步单元加载的本质。

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // dequeue a cell

    // Reset the cell
    cell.imageView.image = nil;
    cell.textLabel.text = nil;
    cell.detailTextLabel.text = nil;

    // Use gcd
    dispatch_queue_t queue = dispatch_queue_create("blah blah replace me blah", 0);
    dispatch_async(queue, ^{ 

        // Do work in the background

        UIImage *image       = value1;
        NSString *text       = value2;
        NSString *detailText = value3;

        dispatch_async(dispatch_get_main_queue(), ^{ 
            // Back to main thread to set cell properties.
            if ([tableView indexPathForCell:cell].row == indexPath.row) {
                cell.imageView.image      = image;
                cell.textLabel.text       = text;
                cell.detailTextLabel.text = detailText;
            }
        });//end
    });//end
    dispatch_release(queue);

    // Return the reset cell
    return cell;
} 
```

# java - 总重量。UiBinder 中的国际化是如何工作的？

> ID：10661343
> 
> 赞同：3
> 
> 时间：2012-05-19T00:30:47.640
> 
> 标签：java, gwt, internationalization, uibinder, gwt2

我正在尝试使用 GWT 编写我的第一个项目。而且我不明白用 UiBinder 实现 GWT 应用程序国际化的原理。我以前用过JSP。我清楚地了解技术的国际化：

```
<fmt:message key="myValue" /> 
```

在 GWT 中，类似的标签可以有一些内容：

```
<ui:msg key="myKey" description="myDescription">My content</ui:msg> 
```

我不清楚。这个标签的内容是什么意思？它有什么意义？据我所知，所有数据都应该从`.properties`文件中获取。属性`key`和`description`含义是什么？它们应该包含哪些值？

如果有人可以解释 UiBinder 中的国际化是如何工作的，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T14:03:43.947

[UiBinder i18n](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinderI18n)通过在后台生成[`Messages`接口](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Messages.html)来工作，因此要了解 UiBinder i18n，您实际上只需要了解 GWT i18n。

接口中的每一个`ui:msg`都变成一个方法，该方法上的每个属性`ui:msg`变成该方法上的一个注解，该方法上一个注解的内容`ui:msg`变成`@DefaultMessage`该方法上一个注解的值，每个widget或者`ui:ph`变成一个占位符并解析*在运行时*。
类似地，顶层元素上的一些属性属性在生成的界面`ui:UiBinder`上变成了注解。`Messages`

在 GWT i18n 中，您可以将一个语言环境以注释的形式（`@DefaultMessage`在`Messages`接口内）集成到您的代码中，而无需`*.properties`该语言环境的文件。语言环境`@DefaultLocale`在接口上的注释中给出（`ui:defaultLocale`在 UiBinder 中）。只有其他语言环境的消息必须在`*.properties`文件中提供。
（请注意，您不能使用`Messages`UiBinder 的所有功能：复数、选择、可选参数等）

因此，要回答您更具体的问题：[`key`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/LocalizableResource.Key.html)给出用于在`*.properties`文件中查找消息的密钥（对于除 之外的所有语言环境`ui:defaultLocale`，消息在 UiBinder 文件中直接给出），[`description`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/LocalizableResource.Description.html)以及[`meaning`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/LocalizableResource.Meaning.html)翻译人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T17:00:47.290

我认为进行 uibinder 国际化的最佳方法是按照以下博客的步骤操作：http: [//joergviola.blogspot.com.es/2011/07/gwt-uibuilder-internationalisation.html](http://joergviola.blogspot.com.es/2011/07/gwt-uibuilder-internationalisation.html)。

我已经测试过它，它就像一个魅力！

# php - 为什么不打印所有这些字符串？

> ID：10661348
> 
> 赞同：0
> 
> 时间：2012-05-19T00:32:01.907
> 
> 标签：php, string, wordpress, concatenation

我只是想用类似的东西生成一条路径：

```
$PhotoName = the_title(); 
$DestinationFile = 'temp/watermarked/';
$DestinationFile .= $PhotoName;
$DestinationFile .= '.jpg'; 
```

`the_title();`是一个获取帖子标题的 Wordpress 函数。如果我`echo`只是`$PhotoName`看到帖子的名称是可疑的。但是，如果我`echo $DestinationFile`它永远不会打印字符串的那一部分，所以我会看到类似的东西`temp/watermarked/.jpg`，它永远不会`$PhotoName`作为它的一部分打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:37:18.187

您需要`false`作为第三个参数传递以获取它以将页面标题返回给您。

```
$PhotoName = the_title('', '', false); 
```

有关更多详细信息，请参阅[WordPress 参考](http://codex.wordpress.org/Function_Reference/the_title)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:20:50.040

`the_title()`是必须在循环中运行的模板标签。标题应用过滤器并将标题打印到屏幕上。

用于`get_the_title()`返回 php.ini 中的值。

当使用 foreach 循环`get_posts()`来`$post->post_title`获取值时。如果要应用过滤器：`apply_filters( 'the_title', $post->post_title );`

# sql - 活动记录包含查询

> ID：10661352
> 
> 赞同：0
> 
> 时间：2012-05-19T00:32:58.717
> 
> 标签：sql, ruby-on-rails, activerecord

如何在活动记录中实现“包含功能”？我正在尝试查询包含以下数据的数据库作为示例

品牌：ipad 型号：ipad 3gen 规格：wifi+3g 32 GB 黑色

当用户搜索“ipad black 3gen”时，他应该得到上述记录。

这是我没有用的线索

```
 @products = Product.where("brand like ? OR generation like ? OR spec_overview like ? ", "%"+params[:query].capitalize+"%", "%"+params[:query].capitalize+"%", "%"+params[:query].capitalize+"%") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:04:04.527

Sql 不太适合这种类型的查询。您可能可以使用全文索引来做到这一点，但使用像[Solr](http://lucene.apache.org/solr/)这样的东西会少得多痛苦，而且更准确。如果您决定朝这个方向发展，您可以将 Solr 集成到带有[sunspot的 Rails 应用程序中。](http://sunspot.github.com/)

# mapping - 从 2D 到 1D 的映射功能

> ID：10661355
> 
> 赞同：2
> 
> 时间：2012-05-19T00:33:47.457
> 
> 标签：mapping, 2d, element

我有 2D 元素分布在 [-4, +4] 的空间中，并希望将 2D 空间中的任何点转换为 1D 实数值，以便第一象限 [+, +] 应该具有更高的值（重要性），第二和第三象限 [+, -] 和 [-, +] 应该是下一个，第四象限 [-, -] 应该具有最小值。

我怎么会有这样的映射功能！

谢谢！

# c# - 如何将字符串键和 IV 转换为 Rijndael 的字节数组

> ID：10661357
> 
> 赞同：2
> 
> 时间：2012-05-19T00:34:17.660
> 
> 标签：c#, .net, rijndael

文档说“如果您使用以下值，那么您将获得此结果”。

> **块大小：** 128 **密码模式：** CBC **填充模式：**零

**密钥：** BTikvHBatPdAtgT3317QIQqGFY25WpIz

**四：** a5Sg4U9m11Mw2tIZ

**要加密的值：** 2008-06-02 13:28:45,Statements,1234567,,06/01/2008,06/01/2008,0

这是根据开发人员指南使用所有这些值后加密结果的样子。

> b97f3985245be1065604c5808cebaa2e15813bf938cfaa3c198fd464565c13ced7c91ac6 b68326ce5ed5e81cb7de81acb9fcd1b1636127efbac3203da5bdccea

但是，由于某种原因，我无法得到这个结果，这是我用来填充这个结果的代码，但它一开始给了我相同的字符，后来在字符更改时给了我相同的字符，正如您在这个问题最底部的结果中看到的那样。

这是代码，下面是新输出：

```
public static void Main(string[] args)
{
  RijndaelManaged rij = new RijndaelManaged();
  rij.Mode = CipherMode.CBC;
  rij.Padding = PaddingMode.Zeros;
  rij.Key = ASCIIEncoding.UTF8.GetBytes("BTikvHBatPdAtgT3317QIQqGFY25WpIz");
  rij.IV = ASCIIEncoding.UTF8.GetBytes("a5Sg4U9m11Mw2tIZ");
  ICryptoTransform transform = rij.CreateEncryptor();

  byte[] data = Encoding.ASCII.GetBytes("2008-06-02 13:28:45,Statements,1234567,,06/01/2008,06/01/2008,0");
  byte[] result = transform.TransformFinalBlock(data, 0, data.Length);
  Console.WriteLine(ByteArrayToString(result));
}

public static string ByteArrayToString(byte[] ba)
{
  StringBuilder hex = new StringBuilder(ba.Length * 2);
  foreach (byte b in ba)
    hex.AppendFormat("{0:x2}", b);
  return hex.ToString();
} 
```

我的输出：

> b97f3985245be1065604c5808cebaa2e15813bf938cfaa3c198fd464565c13ced7c91ac6b68326ce5ed5e81cb7de81ac

注意：随着我的进步，我需要更新问题并找到更好的解决方案，但现在出现了新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:38:09.763

您拥有的这个密钥和 IV 看起来像 base64 编码......

```
rij.Key = Convert.FromBase64String("BTikvHBatPdAtgT3317QIQqGFY25WpIz");
rij.IV = Convert.FromBase64String("a5Sg4U9m11Mw2tIZ"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:42:27.527

您在谈论输出中的奇怪字符 - 实际上，您发布的输出是十六进制编码，因此您也应该尝试将您的输出编码为十六进制，如此[处](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)所述。

编辑：

我现在想通了。您需要另外添加`Close()`流或写入器 - 在 CBC 模式下，需要完成最后一个块的填充，如果省略，则不会输出最后一个块。下一个问题是，如果您这样做，那么您最终仍会得到与示例中预期的输出略有不同的输出。原因如下：如果您解密示例密文，您将获得：

```
2008-06-02 13:28:45,Statements,1234567,,06/01/2007,06/01/2007,0 
```

它与您的纯文本不同之处在于，在您拥有 2008 的末尾有一个 2007。如果您修复此问题并正确关闭流，那么您最终将收到与示例中完全相同的输出。

# c# - 在所有 DataTable 列中查找字符串

> ID：10661361
> 
> 赞同：3
> 
> 时间：2012-05-19T00:34:56.113
> 
> 标签：c#, foreach, datatable

我正在尝试找到一种在所有数据表列中查找字符串的快速方法！跟随不起作用，因为我想在所有列值中搜索。

```
string str = "%whatever%";
foreach (DataRow row in dataTable.Rows)
    foreach (DataColumn col in row.ItemArray)
        if (row[col].ToString() == str) return true; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T00:39:34.370

您可以使用 LINQ。它不会更快，因为如果值不存在，您仍然需要查看每个单元格，但它会放在一行中：

```
return dataTable
    .Rows
    .Cast<DataRow>()
    .Any(r => r.ItemArray.Any(c => c.ToString().Contains("whatever"))); 
```

要搜索随机文本并返回一组行，其中至少有一个单元格不区分大小写，请使用以下命令：

```
var text = "whatever";
return dataTable
    .Rows
    .Cast<DataRow>()
    .Where(r => r.ItemArray.Any(
        c => c.ToString().IndexOf(text, StringComparison.OrdinalIgnoreCase) > 0
    )).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T17:22:48.453

如果你想检查数据表中每一列的每一行，试试这个（它对我有用！）。

```
DataTable YourTable = new DataTable();
// Fill your DataTable here with whatever you've got.

foreach (DataRow row in YourTable.Rows)
{
    foreach (object item in row.ItemArray)
    {
        //Do what ya gotta do with that information here!
    }
} 
```

不要忘记将类型转换`object item`为您需要的任何内容（字符串、整数等）。

我已经使用了调试器，它很有魅力。我希望这个帮助能祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T16:16:19.690

这可以通过过滤来实现。根据所有列创建（可重用）过滤字符串：

```
 bool UseContains = false;
        int colCount = MyDataTable.Columns.Count;

        string likeStatement = (UseContains) ? " Like '%{0}%'" : " Like '{0}%'"; 
        for (int i = 0; i < colCount; i++)
        {
            string colName = MyDataTable.Columns[i].ColumnName;
            query.Append(string.Concat("Convert(", colName, ", 'System.String')", likeStatement));

            if (i != colCount - 1)
                query.Append(" OR ");
        }

        filterString = query.ToString(); 
```

现在您可以获得其中一列与您的搜索字符串匹配的行：

```
 string currFilter = string.Format(filterString, searchText);
 DataRow[] tmpRows = MyDataTable.Select(currFilter, somethingToOrderBy); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T20:36:57.153

您也可以使用包含列名称的字符串数组创建搜索例程：

```
string[] elems = {"GUID", "CODE", "NAME", "DESCRIPTION"};//Names of the columns             
foreach(string column in elems)
{
    string expression = string.Format("{0} like '%{1}%'",column, 
    txtSearch.Text.Trim());//Search Expression
    DataRow[] row = data.Select(expression);
    if(row.Length > 0) {
        // Some code here
    } else {
        // Other code here
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-16T16:55:17.310

您可以使用 ColmunName 方法获取列的名称。然后，您可以使用它们搜索 DataTable 中的每一列。例如，以下代码将起作用。

```
string str = "whatever";
foreach (DataRow row in dataTable.Rows)
{
    foreach (DataColumn column in dataTable.Columns)
    {
        if (row[column.ColumnName.ToString()].ToString().Contains(str))
        {
            return true; 
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-19T00:41:02.533

您也可以在数据表上创建过滤器表达式。请参阅此 MSDN[文章](http://msdn.microsoft.com/en-us/library/zk13kdh0%28v=vs.71%29.aspx)。在过滤器表达式中使用 like。

```
 string filterExp = "Status = 'Active'";
 string sortExp = "City";
 DataRow[] drarray;
 drarray = dataSet1.Customers.Select(filterExp, sortExp, DataViewRowState.CurrentRows);
 for (int i=0; i < drarray.Length; i++)
 {
    listBox1.Items.Add(drarray[i]["City"].ToString());
 } 
```

# sockets - 我可以接受来自 LAN 和 Internet 的连接吗？只听 INADDR_ANY

> ID：10661368
> 
> 赞同：0
> 
> 时间：2012-05-19T00:36:40.953
> 
> 标签：sockets, listen

我编写 GateServer 来隔离 LAN 和 Internet，Gateserver 接受来自双方的连接和路由数据包。假设如果在 LAN 中，PC 分配地址 10.0.0.40 并在 Internet 上分配 202.xxx.xxx.xxx，我可以只在 INADDR_ANY 上监听以接收来自双方的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:59:30.240

是的。但是，由于您在网络之间进行自己的路由，因此如果您创建单独的侦听套接字（一个仅绑定到 LAN IP，另一个绑定到 Internet IP），可能会使您的逻辑更易于管理。这样，当你的代码收到一个新的连接时，它就会准确地知道它是一个 LAN 客户端还是一个 Internet 客户端。如果您只监听两个 IP 上的一个套接字，则必须手动确定每个连接来自哪个网络。

# jquery - asp.net 和 jquery ui 可拖动初学者

> ID：10661369
> 
> 赞同：-3
> 
> 时间：2012-05-19T00:36:51.777
> 
> 标签：jquery, asp.net

嗨，我对 jquery 非常陌生，并将其组合到我的 asp.net 工作中。

我已经阅读了您注册 jquery 文件的顺序，所以我将核心文件放在顶部？我真的不明白我在这里出了什么问题：

```
 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <asp:PlaceHolder runat="server" ID="ph">
       <script src="development-bundle/ui/jquery.ui.core.js" type="text/javascript">     </script>
       <script src="development-bundle/jquery-1.7.2.js" type="text/javascript"></script>
    <script src="development-bundle/ui/jquery.ui.draggable.js" type="text/javascript">     </script>
    <script type="text/javascript">

  $(function () {

     $("#draggable").draggable();

  });

 </script> 
    </asp:PlaceHolder>
    <asp:Panel ID="pnl_deck_holder" runat="server">

    </asp:Panel>
 <div id="draggable" class="ui-widget-content">
    drag me
    </div>

 </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:39:18.160

jquery-1.7.2 应该是第一个，然后是 jquery.ui.core 和其他 UI 组件。但是，如果您使用的是 jquery UI，如果您使用下载构建器，它通常会将您需要的所有内容捆绑在一个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:40:39.573

应该是这样的。第一个 Jquery Source 文件，然后是 Jquery UI 。

```
<script src="development-bundle/jquery-1.7.2.js" type="text/javascript"></script>
<script src="development-bundle/ui/jquery.ui.core.js" type="text/javascript"></script>
<script src="development-bundle/ui/jquery.ui.draggable.js" type="text/javascript"> 
```

# iphone - 应用程序在 iPhone 上崩溃，但在模拟器中没有

> ID：10661374
> 
> 赞同：0
> 
> 时间：2012-05-19T00:37:30.907
> 
> 标签：iphone, ios-simulator

我对 iOS 开发相当陌生，目前我为一家房地产公司创建的应用程序在我在实际 iPhone 上切换故事板时崩溃，但在模拟器中运行完美。我已经三重检查了我的代码，一切似乎都很好。这是我从以下网站获得代码的网站：[http](http://www.skillmasters.net/main/xcode-using-multiple-storyboards/) ://www.skillmasters.net/main/xcode-using-multiple-storyboards/ 。

这是崩溃报告：

```
Incident Identifier: E6C2C623-BBAC-4F4B-8C90-C08F1F61EADF
CrashReporter Key:   e86ddaf63451cf9a7b4ed5e011de01e23b0ebec0
Hardware Model:      iPhone4,1
Process:         Island House Sellers [6338]
Path:            /var/mobile/Applications/3C9E194F-8A24-4E62-A82D-8A53D73D337D/Island House Sellers.app/Island House Sellers
Identifier:      Island House Sellers
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-17 13:55:32.120 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3557988f 0x354c0000 + 759951
1   libobjc.A.dylib                 0x37920259 0x37917000 + 37465
2   UIKit                           0x333255fb 0x32faa000 + 3651067
3   Island House Sellers            0x000ebcb3 -[ViewController gotostoryboard3] (ViewController.m:27)
4   CoreFoundation                  0x354d33fd 0x354c0000 + 78845
5   UIKit                           0x32fc8e07 0x32faa000 + 126471
6   UIKit                           0x32fc8dc3 0x32faa000 + 126403
7   UIKit                           0x32fc8da1 0x32faa000 + 126369
8   UIKit                           0x32fc8b11 0x32faa000 + 125713
9   UIKit                           0x32fc9449 0x32faa000 + 128073
10  UIKit                           0x32fc792b 0x32faa000 + 121131
11  UIKit                           0x32fc7319 0x32faa000 + 119577
12  UIKit                           0x32fad695 0x32faa000 + 13973
13  UIKit                           0x32facf3b 0x32faa000 + 12091
14  GraphicsServices                0x3716c22b 0x37167000 + 21035
15  CoreFoundation                  0x3554d523 0x354c0000 + 578851
16  CoreFoundation                  0x3554d4c5 0x354c0000 + 578757
17  CoreFoundation                  0x3554c313 0x354c0000 + 574227
18  CoreFoundation                  0x354cf4a5 0x354c0000 + 62629
19  CoreFoundation                  0x354cf36d 0x354c0000 + 62317
20  GraphicsServices                0x3716b439 0x37167000 + 17465
21  UIKit                           0x32fdbcd5 0x32faa000 + 203989
22  Island House Sellers            0x000ebb69 main (main.m:16)
23  Island House Sellers            0x000ebb14 0xea000 + 6932

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35e2f32c 0x35e1e000 + 70444
1   libsystem_c.dylib               0x3297b208 0x3292e000 + 315912
2   libsystem_c.dylib               0x32974298 0x3292e000 + 287384
3   libc++abi.dylib                 0x35931f64 0x3592b000 + 28516
4   libc++abi.dylib                 0x3592f346 0x3592b000 + 17222
5   libobjc.A.dylib                 0x37920350 0x37917000 + 37712
6   libc++abi.dylib                 0x3592f3be 0x3592b000 + 17342
7   libc++abi.dylib                 0x3592f44a 0x3592b000 + 17482
8   libc++abi.dylib                 0x3593081e 0x3592b000 + 22558
9   libobjc.A.dylib                 0x379202a2 0x37917000 + 37538
10  CoreFoundation                  0x354cf506 0x354c0000 + 62726
11  CoreFoundation                  0x354cf366 0x354c0000 + 62310
12  GraphicsServices                0x3716b432 0x37167000 + 17458
13  UIKit                           0x32fdbcce 0x32faa000 + 203982
14  Island House Sellers            0x000ebb62 main (main.m:16)
15  Island House Sellers            0x000ebb0c 0xea000 + 6924

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x35e1f3a8 0x35e1e000 + 5032
1   libdispatch.dylib               0x34409f04 0x34406000 + 16132
2   libdispatch.dylib               0x34409c22 0x34406000 + 15394

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x35e1f004 0x35e1e000 + 4100
1   libsystem_kernel.dylib          0x35e1f1fa 0x35e1e000 + 4602
2   CoreFoundation                  0x3554d3ec 0x354c0000 + 578540
3   CoreFoundation                  0x3554c124 0x354c0000 + 573732
4   CoreFoundation                  0x354cf49e 0x354c0000 + 62622
5   CoreFoundation                  0x354cf366 0x354c0000 + 62310
6   WebCore                         0x313cec9c 0x31325000 + 695452
7   libsystem_c.dylib               0x3293c72e 0x3292e000 + 59182
8   libsystem_c.dylib               0x3293c5e8 0x3292e000 + 58856

Thread 3:
0   libsystem_kernel.dylib          0x35e2fcd4 0x35e1e000 + 72916
1   libsystem_c.dylib               0x32936f36 0x3292e000 + 36662
2   libsystem_c.dylib               0x32936cc8 0x3292e000 + 36040

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3eb86d98      r6: 0x00000002      r7: 0x2fee8a40
    r8: 0x0d62fd90    r9: 0x00000000     r10: 0x3338c8cc     r11: 0x00000001
    ip: 0x00000148    sp: 0x2fee8a34      lr: 0x3297b20f      pc: 0x35e2f32c
  cpsr: 0x00070010

Binary Images:
   0xea000 -    0xedfff +Island House Sellers armv7  <607a28905ab231a3b9c880aea83198a3> /var/mobile/Applications/3C9E194F-8A24-4E62-A82D-8A53D73D337D/Island House Sellers.app/Island House Sellers
 0x3ee4000 -  0x3ee7fff  QuickSpeak armv7  <06848e83ddc638dfaf1250093ea9ca39> /System/Library/AccessibilityBundles/QuickSpeak.bundle/QuickSpeak
0x2fee9000 - 0x2ff0afff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x302c1000 - 0x302c7fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x3039b000 - 0x304c0fff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x304fa000 - 0x30500fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x30583000 - 0x30598fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x306aa000 - 0x306adfff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x306ae000 - 0x306f6fff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x30732000 - 0x30c76fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x31325000 - 0x31ae4fff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x31af7000 - 0x31bcffff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x31bd0000 - 0x31db4fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x31db5000 - 0x31dfffff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31e27000 - 0x31e3dfff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x31e49000 - 0x32006fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3217f000 - 0x32190fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x323a3000 - 0x32494fff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x324a7000 - 0x324aafff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x32584000 - 0x325a4fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x32601000 - 0x3260dfff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x3260e000 - 0x32631fff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x326e3000 - 0x3272dfff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x32748000 - 0x3274efff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x32751000 - 0x32755fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x32756000 - 0x32757fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x32758000 - 0x32759fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x32768000 - 0x3276afff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x32905000 - 0x32929fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x3292e000 - 0x329bafff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x32a31000 - 0x32a42fff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x32ac0000 - 0x32ac1fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x32ac2000 - 0x32ac5fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x32bad000 - 0x32be8fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x32faa000 - 0x3344cfff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x335a2000 - 0x335e7fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x33626000 - 0x3362bfff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x33865000 - 0x338aefff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x338b1000 - 0x338e4fff  Preferences armv7  <f1a9b0b7ffbe3c44877f5e7ba44d4a2f> /System/Library/PrivateFrameworks/Preferences.framework/Preferences
0x339f1000 - 0x339f7fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x33add000 - 0x33ae7fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x33e9d000 - 0x33eacfff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x33ead000 - 0x33eb2fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x33eb9000 - 0x33ec3fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x33f9d000 - 0x33fc2fff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x33ffe000 - 0x34014fff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3406b000 - 0x340a9fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x340aa000 - 0x340c0fff  VoiceServices armv7  <c5b98e94eff33bf49006ff157c819987> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x3421a000 - 0x34363fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x34364000 - 0x34364fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x34365000 - 0x34370fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3438c000 - 0x343c3fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x34401000 - 0x34405fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x34406000 - 0x3441cfff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x34444000 - 0x34495fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x34496000 - 0x3449dfff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34568000 - 0x34569fff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x3458b000 - 0x34597fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x34598000 - 0x345abfff  AssistantServices armv7  <4a0843742f363a8885b8db13b44ae256> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x345c9000 - 0x345d1fff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x345d2000 - 0x345d6fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x34761000 - 0x34775fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x34b46000 - 0x34b8afff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x34bbc000 - 0x34bc9fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x34d6c000 - 0x34e43fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x34e44000 - 0x34ec3fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x34ff8000 - 0x35176fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x35252000 - 0x35322fff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x35459000 - 0x3545ffff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x35463000 - 0x354acfff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x354ad000 - 0x354b0fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x354b8000 - 0x354bcfff  libAXSpeechManager.dylib armv7  <a8cd1b0b9702334b90fba44d36577b40> /usr/lib/libAXSpeechManager.dylib
0x354c0000 - 0x355d7fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x35762000 - 0x357bafff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x357bd000 - 0x357bdfff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x357c6000 - 0x357d5fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x357d6000 - 0x357d6fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x357d9000 - 0x357e8fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x3592b000 - 0x35932fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x35959000 - 0x359a5fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x35a28000 - 0x35ad2fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x35af4000 - 0x35af7fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x35b14000 - 0x35b17fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x35b1e000 - 0x35c63fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x35c64000 - 0x35c70fff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x35c71000 - 0x35ca9fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x35caa000 - 0x35cc0fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x35e1e000 - 0x35e34fff  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x35e69000 - 0x35e71fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x35e7a000 - 0x35e7afff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x3604f000 - 0x3604ffff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3605b000 - 0x36149fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x36199000 - 0x3619afff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x36212000 - 0x3622bfff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x36264000 - 0x36311fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x3632a000 - 0x3636dfff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x3636e000 - 0x3636ffff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x363a6000 - 0x363aafff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x363c8000 - 0x363ccfff  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x36600000 - 0x36601fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x36645000 - 0x366befff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x366bf000 - 0x366defff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x36748000 - 0x36784fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x36c23000 - 0x36c27fff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x36c28000 - 0x36c98fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x37167000 - 0x37171fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x372c6000 - 0x37587fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x37635000 - 0x37637fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x37640000 - 0x37675fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x3770b000 - 0x3774bfff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37917000 - 0x379ddfff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x37a1a000 - 0x37a68fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x37ab7000 - 0x37ab7fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x37ab8000 - 0x37ad5fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x37b1a000 - 0x37b23fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x37b93000 - 0x37b93fff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x37bb5000 - 0x37c06fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText 
```

这是 Viewcontroller.m 的内容：

```
//

#import "ViewController.h"

@implementation ViewController

-(void)contactreturn {
    [self dismissModalViewControllerAnimated:YES];
}

-(void)gotostoryboard2 {
    UIStoryboard *storyboard2 = [UIStoryboard storyboardWithName:@"storyboard2" bundle:nil];
    UIViewController *storyboard2VC = [storyboard2 instantiateInitialViewController];
    storyboard2VC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:storyboard2VC animated:YES];

}

-(void)gotostoryboard3 {
    UIStoryboard *storyboard3 = [UIStoryboard storyboardWithName:@"storyboard3" bundle:nil];
    UIViewController *storyboard3VC = [storyboard3 instantiateInitialViewController];
    storyboard3VC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:storyboard3VC animated:YES];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

同样，这一切在模拟器中都可以正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:28:19.337

也许您在代码“storyboard2”中编写并且您的文件名为“Storyboard2”，这会在设备上而不是在模拟器中崩溃，因为模拟器不区分大小写。– Retterdes 对话

我永远不会认为模拟器不区分大小写。非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:16:29.820

您是否尝试过放入一堆断点并查看代码中导致崩溃的原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:14:19.720

我的情况类似于上面描述的科尔弗莱彻。就我而言，我使用了一个新的故事板，忘记在代码中输入新的故事名称/视图控制器故事板 ID。它在设备上崩溃了。仍然不知道为什么它首先在模拟器上工作？

# python - 使用 python 生成动画 SVG

> ID：10661381
> 
> 赞同：0
> 
> 时间：2012-05-19T00:38:42.163
> 
> 标签：python, svg, slice, animated

我一直在使用 svgwrite 库来生成一系列 svg 图像。我想将这一系列图像转换为动画 svg。svgwrite 中对动画 svg 的支持似乎只能以算法在绘图中移动对象的形式起作用。是否可以使用我必须生成动画 svg 的时间片，或者我是否坚持将它们光栅化并从图像创建视频。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T00:46:55.870

> svgwrite 中对动画 svg 的支持似乎只能以算法在绘图中移动对象的形式起作用。

嗯，是。这就是 SVG 动画的工作原理；它获取图像中的当前对象并对它们应用变换。如果你想要一部“电影”，那么你需要从图像中制作视频。

# java - 为邪恶天才编程视频游戏：项目 10：激进赛车-汽车

> ID：10661388
> 
> 赞同：0
> 
> 时间：2012-05-19T00:40:21.810
> 
> 标签：java, video

![在此处输入图像描述](../Images/fefbe5daea5e83c8a04296a5106e0f30.png)

我四处寻找这本书的答案。我知道任何试图阅读这本书的人都有同样的感受。这本书叫《为邪恶天才编程电子游戏》 有人读过这本书吗？我在项目 10：激进赛车-汽车。一切都正确编译，但由于某种原因，我的汽车没有出现在 JFrame 上的正确位置。它们应该出现在两条白线下方。我很肯定代码与书中的代码完全相同，但是这本书是错误的。我已经尝试过更改原点的高度部分，但无论我做什么，它都不会让步。我不能附上图片，因为我没有至少 10 的代表。这是处理汽车放置的代码。

```
public class TheCars extends JFrame
{
final int WIDTH = 900; int HEIGHT = 650;

double p1Speed = .5, p2Speed = .5;

Rectangle p1 = new Rectangle(WIDTH/9,HEIGHT/2, WIDTH/30,WIDTH/30);

Rectangle p2 = new Rectangle(((WIDTH/9)+((int)((WIDTH/9)*1.5)/2)),(HEIGHT/2)+    
(HEIGHT/10),WIDTH/30,WIDTH/30);
//the constructor
public TheCars()
{
    //the following code creates the JFrame
    super("Radical Racing");
    setSize(WIDTH,HEIGHT);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);

    //start the inner class (which works on it's own because it is a thread)
    Move1 m1 = new Move1();
    Move2 m2 = new Move2();
    m1.start();
    m2.start();

  }
  //this will draw the cars and the racetrack
  public void paint(Graphics g)
 {
     super.paint(g);

  //set the color to blue for p1
    g.setColor(Color.BLUE);
    //now draw the actual player
    g.fill3DRect(p1.x,p1.width,p1.width,p1.height,true);

    //set the color to red for p2
    g.setColor(Color.red);
    //now draw the actual player
      g.fill3DRect(p2.x,p2.width,p2.width,p2.height,true);

}
private class Move1 extends Thread
{
    public void run()
            //This should all be in an infinite loop so that the process repeats.
    {
        while(true)
        {
        //now put in the try block. This will let 
        //the program exit if there is an error
        try
        {
            //first refresh the screen
            repaint();
            //increase speed a bit
            if(p1Speed<=5)
                p1Speed+=.2;
            p1.y-=p1Speed;

            //this delays the refresh rate
            Thread.sleep(75);
        }
        catch(Exception e)
        {
            //if there is an exception (an error), exit the loop
            break;

        }

        }
    }
}

private class Move2 extends Thread
{
    public void run()
    {
    //this should all be in an infinite loop so the process repeats
    while(true)
    {
    //now put the code in a "try" block.
        //this will let the program exit if there is an error
        try
        {
            //first refresh the screen
            repaint();
            //increase the speed a bit
                    if(p2Speed<=5)
                        p2Speed+=.2;
                    p2.y-=p2Speed;

                    //this delays the refresh rate
                    Thread.sleep(75);
        }
        catch(Exception e)
        {
            //if there is an exception (an error), exitthe loop
            break;
        }
    }
    }

 }
public static void main(String[]args)
{
    new TheCars();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:52:24.420

假设您将这些`Rectangle`对象直接绘制到屏幕上，我们必须假设表达式“ `HEIGHT/2`”和“ `HEIGHT/2 + HEIGHT/10`”输出相等，并且非零但很小。如果 HEIGHT 是`int`，并且该值大于 2 且小于 10，就会出现这种情况。大概该值至少需要几百个，这些框才能显示在屏幕中间。检查`HEIGHT`（只使用 a`System.out.println()`就可以了）的值并确保它是窗口的实际高度。

**编辑**

现在我们看到了代码的其余部分：每个调用的第二个参数`fill3DRect()`是错误的。它应该是对象的`y`成员`Rectangle`，这是一个很大的、可变的数字，但您传递的`width`是一个小的固定数字。将两个调用更改为如下所示，您将回到正轨：

```
g.fill3DRect(p1.x, p1.y, p1.width, p1.height, true); 
```

# apache-pig - 如何在猪拉丁文中组合/连接两个袋子

> ID：10661389
> 
> 赞同：3
> 
> 时间：2012-05-19T00:40:24.753
> 
> 标签：apache-pig

我有两个数据集：

```
A = {uid, url}; B = {uid, url}; 
```

现在我做一个`cogroup`：

```
C = COGROUP A BY uid, B BY uid; 
```

我想把 C 改成 { `group AS uid, DISTINCT A.url+B.url`};

我的问题是如何连接两个包 A.url 和 B.url？

或者换一种说法，我该如何`DISTINCT`处理多个列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:27:49.637

它不可能是你所期望的，但这就是我从你的问题中理解的：

```
C = JOIN A BY uid, B BY uid;
D = DISTINCT C; 
```

连接是通过以下方式完成的：

```
E = FOREACH D GENERATE CONCAT(A::uid,B::uid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T07:56:15.020

```
A = LOAD 'A' using PigStorage() as (uid,url);
B = LOAD 'B' using PigStorage() as (uid,url);
C = JOIN A by uid ,B by uid;
D = FOREACH C GENERATE $0,CONCAT(A::url,B::url);
E= DISTINCT D;
dump E; 
```

# ruby-on-rails - Rails 表单到数据库设置

> ID：10661390
> 
> 赞同：0
> 
> 时间：2012-05-19T00:40:28.830
> 
> 标签：ruby-on-rails, database, forms, model, sqlite

我是 Rails 的新手，我有一些初学者的问题。我想为我的网络应用程序创建一个 beta 注册页面，类似于[http://www.realestapp.com/](http://www.realestapp.com/)。我该如何初始化这样一个 rails 项目——我应该安装哪些 gems 以及应该使用哪些生成命令？我知道我需要一个带有字符串属性的用户模型来保存电子邮件地址。我想将表单中的用户电子邮件地址保存到 sqlite3 数据库中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:53:06.210

我是漂亮的 gem (https://github.com/ryanb/nifty-generators) 的忠实粉丝。它大大减少了头痛。将其添加到您的 gemfile 并运行`bundle install`. 然后你可以：

```
rails generate nifty:scaffold User email:string 
```

# python - 为什么 from ... import 在 Python 的导入时似乎绑定到值？

> ID：10661392
> 
> 赞同：5
> 
> 时间：2012-05-19T00:40:59.933
> 
> 标签：python

我读过的所有 Python 文档似乎都表明，除了副作用之外，如果您导入模块 A 然后引用 Aa，那么您引用的变量就像您编写“从 A 导入 a”一样。

但是，这里的情况似乎并非如此，我不确定发生了什么。我正在使用 Python 2.6.1。

如果我创建一个模块 alpha.py：

```
bravo = None

def set_bravo():
  global bravo
  bravo = 1 
```

然后创建一个导入模块的脚本：

```
import sys, os
sys.path.append(os.path.abspath('.'))

import alpha
from alpha import bravo

alpha.set_bravo()
print "Value of bravo is: %s" % bravo
print "Value of alpha.bravo is: %s" % alpha.bravo 
```

然后我得到这个输出：

```
Value of bravo is: None
Value of alpha.bravo is: 1 
```

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T00:43:41.487

`from ... import ...` *总是*立即绑定，即使之前`import`只导入了模块/包。

**编辑：**

对比以下：

```
import alpha

alpha.set_bravo()

from alpha import bravo

print "Value of bravo is: %s" % bravo
print "Value of alpha.bravo is: %s" % alpha.bravo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:07:07.067

python -m dis bravo.py 执行它以查看编译期间代码发生了什么。我发现这个博客有助于了解幕后发生的事情。[http://late.am/post/2012/03/26/exploring-python-code-objects](http://late.am/post/2012/03/26/exploring-python-code-objects)

# matlab - DEM 的参考矩阵

> ID：10661395
> 
> 赞同：0
> 
> 时间：2012-05-19T00:41:26.400
> 
> 标签：matlab, mapping

我按照[此博客](http://blogs.mathworks.com/steve/2009/04/24/continental-divide-1-intro/)中的步骤阅读了NOAA/NGDC-GLOBE DEM（[tileinfo](http://www.ngdc.noaa.gov/mgg/topo/report/s11/s11C.html)和[元数据）中的](http://www.ngdc.noaa.gov/mgg/topo/report/s11/s11D.html)[Tile](http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/e10g.gz) E。

我有一个稍微不同的目标，即找到特定坐标的 W、SW 和 NW 的最高点。因此，在获得`dem`该区域的矩阵后，我创建了一个参考矩阵：

```
Rdem=makerefmat('RasterSize',[6000 10800],'Latlim',[0 50],'Lonlim',[-180 -90]); 
```

当我使用时，`ltln2val(dem,Rdem,40,-105)`我得到一个值 -500 表示海洋。这个位置在科罗拉多州。有人可以解释我哪里出错了吗？

谢谢多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:37:52.623

`makerefmat`假设 dem 矩阵从底部开始，而不是从顶部开始，这对于许多映射函数来说很常见。但是因为 Tile 是使用通用函数（不是从映射工具箱中读取的）读取的，所以它的行为就像一个普通矩阵。`makerefmat`有一个选项可以切换为地理配准索引行的方向。Rdem 的正确语法是：

```
Rdem=makerefmat('RasterSize',[6000 10800],'Latlim',[0 50],'Lonlim',[-180 -90],'ColumnsStartFrom','north'); 
```

# mobile - 为什么 setCenter 实现在移动设备和笔记本电脑上不一致？

> ID：10661399
> 
> 赞同：3
> 
> 时间：2012-05-19T00:42:17.750
> 
> 标签：mobile, google-maps-api-3

我有一些非常简单的代码，可以在运行 Chrome 的笔记本电脑上正常运行，但不能在我的 Android（Gingerbread 2.3.6）浏览器上运行：

```
window.addEventListener("resize", handleResize, false);
//define Map ("map") and LatLng ("myLoc")
function handleResize() {
    if( map != null ) {
        map.setCenter(myLoc);
        //test to see if device knows it has been resized
        var w1 = $(mapDiv).width();
        alert(w1 + " " + myLoc);
    }
} 
```

如您所见，我所做的只是在调整大小事件后尝试重新定位。知道为什么这在我的手机上不起作用吗？（而且，是的，手机知道它已调整大小。）

# macos - 如何在 Mac OS X 10.7.4 中使用 Bash 输入 0xA (\n)

> ID：10661400
> 
> 赞同：0
> 
> 时间：2012-05-19T00:42:18.120
> 
> 标签：macos, bash

要输入 0xD (\r)，我们有 ^V^M (Ctrl+V, Ctrl+M)。

当我在终端中输入 ^V^J (Ctrl+V, Ctrl+J) 时，光标只是跳到新行的开头。

^V^J (Ctrl+V, Ctrl+J) 在 AIX 中运行良好，ksh。

其实问题是：

在文本文件“foo.txt”中，内容为

```
aaa
bbb 
```

在十六进制视图中：`61 61 61 0D 62 62 62`

我只是喜欢使用**sed 's/^M/^J/g' foo.txt**替换`OD`为`OA`.

但结果是`sed 's/^M/`

```
/g' foo.txt` 
```

在单独的行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:54:07.590

`$'...'`解释其中的转义码，因此您可以使用`$'\n'`将 \n 添加到命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:00:47.103

问题似乎主要在于输入如何回显到屏幕上。如果我输入`echo -n '`, Control-V, Control-J, `' | hexdump -C`，则表明我输入了换行符。

如果我省略了 Control-V，则输出是相同的，尽管 bash 会显示`>`提示。在这种情况下，bash 在输入时看到了换行符，并提示继续，因为引用未终止。如果我不使用 Control-V 并且只按 Return 而不是 Control-J，则结果与仅按 Control-J 相同。

使用 Control-V 而不是引号，Control-J 被解释为换行符，但 bash 不会立即看到它。因此，键入`echo foo`、Control-V、Control-J`echo bar`等价于键入：

```
echo foo
echo bar 
```

它发出两个`echo`命令并打印：

```
foo
bar 
```

这两行（如 bash 或 readline 所见）都分别在历史记录中。

这样想，如果你发出以下命令，你期望会发生什么？

```
printf "echo foo\necho bar" | sh 
```

（请注意，`printf`它会在其输入中解释转义序列。）Bash 会将其输入流中的换行符解释为两个单独行之间的分隔符。好吧，当您键入 Control-V、Control-J 时，它会看到相同的内容并以相同的方式对其进行解释。

# ruby-on-rails - 在 Windows 服务器上托管 Rails 应用程序的最佳方式？

> ID：10661415
> 
> 赞同：2
> 
> 时间：2012-05-19T00:45:12.280
> 
> 标签：ruby-on-rails, windows, deployment

我有一个简单的 rails 应用程序，我需要将它部署在 Window Server 2008 R2 服务器上。我环顾四周，但没有找到太多关于该主题的内容。有什么简单/最好的方法来实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:04:41.417

我不确定您是否可以使用 Capistrano 在 Windows 上进行部署。否则，您可能想看看[kwatee](http://www.kwatee.net)（自我推销）。我还没有考虑部署 Rails 应用程序，因为 Capistrano 是那里的首选工具，但 kwatee 是一个免费工具，可以部署几乎任何东西，从独立应用程序到任何平台上的 Web 应用程序，包括 Windows。

# sql-server-2000 - 使用 Checkpoint 清除脏页，并从 MemoryStatus 获取结果

> ID：10661416
> 
> 赞同：1
> 
> 时间：2012-05-19T00:45:27.840
> 
> 标签：sql-server-2000, query-analyzer

警告：我是一个多面手，我所知道的关于配置 SQL 服务器的知识，你可以收集起来放在你的肚脐中，并且棉绒不会被取代。大多数情况下，我可以编写查询来获得我需要的东西。不幸的是，我还负责让服务器完成它的工作，而我对此几乎一无所知。

我正在尝试解决慢速 SQL Server (2000) 的问题。我希望我的测试查询的时间一致，所以我正在清除缓冲区/缓存。

除其他事项外，我想确保所有脏页在乱搞之前都已写入磁盘。

但是如果我运行命令：

```
 DBCC MemoryStatus
    Go
    Checkpoint
    Go
    DBCC MemoryStatus
    Go 
```

...脏页计数不变。

我重新启动了服务器，它*确实*发生了变化，但在启动时仍然列出了 70 个脏页。

我显然不明白这里的东西。是否有一种良好且一致的方法来确保当我运行计时测试时，我从处于相同状态的服务器开始？（这是一个活跃网站上的实时服务器，我宁愿不要每 10 分钟重新启动一次。）

# android - Eclipse 和 APK 和 BAR

> ID：10661422
> 
> 赞同：0
> 
> 时间：2012-05-19T00:48:09.630
> 
> 标签：android, eclipse, blackberry, apk

我可以在 Eclipse 中将 APK 转换为 BAR 并编辑 blackberry 的格式，但仍保留用于 Android 的原始 APK？换句话说，我有一个我想要两种不同格式的应用程序。一个用于 Google Play，一个用于 Blackberry App World，但我希望能够为了格式而单独编辑它们，但在功能上保持相同。这是一个简单的文本应用程序，但格式和每个应用程序都不同。谢谢你。抱歉，我很难解释我需要什么。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-19T03:40:22.020

您无法将 Android APK 应用程序转换为 Blackberry BAR 格式。但是，我听说 BB 有某种运行时允许您运行 Android 应用程序。我不建议这样做。

# c++ - 使用 boost 和/或 stdlib 将整个文件读入 std::string 的最简洁（相当有效）的方法

> ID：10661425
> 
> 赞同：2
> 
> 时间：2012-05-19T00:48:29.207
> 
> 标签：c++, boost

> **可能重复：**
> [将整个 ASCII 文件读入 C++ std::string](https://stackoverflow.com/questions/2602013/read-whole-ascii-file-into-c-stdstring)

C＃

```
string contents = File.ReadAllText(filename); 
```

Python

```
contents = open(filename).read() 
```

我们真的没有像 C++ 那样简单明了的东西吗？我见过的最好的是：

```
string slurp(const std::string& filename) {
    ifstream ifs("test.txt", ifstream::in);
    stringstream sstr;
    sstr << ifs.rdbuf();
    return sstr.str();
} 
```

这对于一种已经存在了很长时间的语言来说是可耻的，而且 boost 和 stdlib 都可以使用。简单的事情应该是简单的...

# asp.net-mvc - UpshotContext 处理帖子

> ID：10661427
> 
> 赞同：2
> 
> 时间：2012-05-19T00:49:16.420
> 
> 标签：asp.net-mvc, upshot

找不到**DataController**和**UpshotContext**组合的任何文档。我看到 Upshot 在 DataController 上调用“**提交**”方法（从基继承），而不是使用命名约定**Insert**，**Delete**或**Update**方法被调用。

如何在使用**this.dataSource.commitChanges()**（或任何其他操作）进行发布时显式设置要调用的数据控制器方法的名称？

# apache - 如何使用 fluentd 将 Apache 组合日志写入具有自定义属性的 mongoDB

> ID：10661442
> 
> 赞同：1
> 
> 时间：2012-05-19T00:53:19.757
> 
> 标签：apache, mongodb, logging, fluentd

我正在使用 tail 和 [fluent-plugin-mongo](http://github.com/fluent/fluent-plugin-mongo)将 Apache 组合日志格式写入 mongoDB，但我想自定义一些属性格式以写入 mongoDB，例如

*   拆分路径到新属性

{

```
ip : 21.18.104.8
host : www.sample.com
message : buildtime=2012_02_14_16_25;version=01.03.3752;totalTimeMin=0; 
```

}

至

{

```
ip : 21.18.104.8
host : www.sample.com 
message : buildtime=2012_02_14_16_25;version=01.03.3752;totalTimeMin=0;
buildtime : 2012_02_14_16_25
version : 01.03.3752
totalTimeNin : 0 
```

}

*   将日期时间格式从 ISODate("2011-11-27T07:56:34Z" 更改为 "2011-11-27 07:56:34"

*   上限时间戳到最近的 5 分钟，例如。12:33:22 => 12:35:00

*   添加一些功能，例如 from

{

```
ip : 69.249.69.211
host : www.sample.com
message : buildtime=2012_02_14_16_25;version=01.03.3752;totalTimeMin=0; 
```

}

至

{

```
ip :  69.249.69.211
country : US
host : www.sample.com
message : buildtime=2012_02_14_16_25;version=01.03.3752;totalTimeMin=0; 
```

}

那有可能吗？我不知道应该使用哪些插件。我已经阅读了文档，但我没有得到它，因为它没有很多示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:43:39.597

您可以扩展 in_tail 插件以实现您的目标。下面的 URL 描述了如何执行此操作。

> [http://docs.fluentd.org/articles/plugin-development#custom-parser-for-tail-input-plugin](http://docs.fluentd.org/articles/plugin-development#custom-parser-for-tail-input-plugin)

如果您有任何问题，请在此处或 Google 网上论坛问我。谢谢-K

# android - Android：下载大量文件的正确方法

> ID：10661443
> 
> 赞同：1
> 
> 时间：2012-05-19T00:53:21.187
> 
> 标签：android, android-asynctask

在我的应用程序中，我需要下载一堆文件。我最初的计划是为每个文件使用一个单独的 AsyncTask，以便在下载每个文件时通知应用程序的其余部分。我发现它测试虽然这有效，但它似乎真的内存效率低下。有没有一种使用单个 AsyncTask 或服务来下载文件并通知每个文件完成的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:28:44.607

没有理由使用多个`AsyncTask`s，因为您可以创建文件名列表，将其传递给单个`AsyncTask`，并在每个文件下载后，使用`publishProgress()`和发布下载进度`onProgressUpdate()`，它在 UI 线程中运行，可以轻松通知其他活动在您的应用程序中。

```
private class DownloadFilesTask extends AsyncTask<URL, String, Long> {
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        for (int i = 0; i < count; i++) {
            Downloader.downloadFile(urls[i]);
            publishProgress(urls[i].toString());
        }
        return 0;
    }

    protected void onProgressUpdate(String... progress) {
        // notify whomever you like with url from progress[0]
        // this is run on UI thread
    }

    protected void onPostExecute(Long result) {
        // do something else
        // this is also run on UI thread
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:08:55.543

远程服务可以工作，但我认为这是错误的方法，因为您的功能有限。

我会使用 AsyncTask，但要通过方法调用它。

当您在 AsyncTask 中完成后，再次调用该方法，该方法将在删除列表中的项目或更新某些计数器后创建一个新的 AsyncTask。

请记住，AsyncTask 不能重复使用，因此每次都需要重新创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T01:13:49.483

从内存和网络的角度来看，您最好只使用一个 AsyncTask（或 Java 线程）并一一下载所有文件。这大大提高了设备​​的响应能力，同时也消耗了一点内存。如果您可以控制服务器端，我还建议您将较小的文件压缩到一个存档中（我的项目还通过 HTTP 下载大量文件），如果将文件合并到大小约为 2- 的存档中，速度会大大提高4 MB 并下载。如果您仅使用 TCP/IP 连接进行下载，那么如果您不每次都重新建立连接，那么文件有多大都无关紧要。但是对于 HTTP 来说，最大的时间浪费通常是建立连接。

# jquery - XML的DOM对象，到HTML

> ID：10661446
> 
> 赞同：2
> 
> 时间：2012-05-19T00:53:56.710
> 
> 标签：jquery, html, xml, dom

我有一个带有 XML 表的 XML 代码

```
<displayTable>
<tr>
<td> items </td>
<..>
</displayTable> 
```

它的结构与 HTML 中的表格完全相同，但元素的名称不同。然后我用 jQuery 解析 XML，并得到一个 DOM 对象。但是现在当我试图获取表格的 html 元素时，我没有得到 HTML 表格（没有错误，我得到标签内的项目），`.text()`并且`.html()`......有人知道为什么吗？

编辑：很抱歉造成混乱。所以它类似于这个js。我想要来自 XML 的 HTML 代码。所以只是 A... 在 &&& 行它会产生“Uncaught TypeError: Cannot call method 'replace' of undefined”错误 var str = "A";

```
$('#code-analysis').html(str);
console.log(str);

// parse string of XML code
var xmlString = str;
var xml = $.parseXML( xmlString );
$xml = $( xml );

// print to table in console
var displayTable = $xml.find( 'displayTable' ).children;
console.log ( displayTable );

// print table.text() to console, 
// but not in the HTML format 
// just the text within the element
var displayTableText = displayTable.text();
console.log ( displayTableText );              // A

// print table.html() to console
var displayTableHTML = displayTable.html();  // &&&
console.log ( displayTableHTML ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:44:17.857

你必须使用`.children()`，而不是`.children`。它是 jQuery 中的函数调用，而不是属性。此外，您可以将孩子传递给`.html()`而无需将它们转换为字符串（我在尝试这样做时遇到错误）。

这样，只需将表格行添加到`<table>`元素：http: [//jsfiddle.net/cRRAM/3/](http://jsfiddle.net/cRRAM/3/)

# iphone - Objective C - UserDefaults 重写

> ID：10661447
> 
> 赞同：0
> 
> 时间：2012-05-19T00:53:57.340
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我似乎无法在我的 ios 用户默认值中重新编辑此对象。这是我的代码...

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:nil forKey:@"savedScoreCards2"]; 
```

在我这样做之前，我将键 savedScoreCards 设置为一个巨大的 3-d 字典，现在当我尝试重写它甚至将键设置为 nil 时，我不久前设置的那个巨大的 3-d 字典仍然存在。我似乎无法过度写入/替​​换它（零）或另一个巨大的 3-d 字典。有任何想法吗？

更新：

```
 + (void)saveCurrentScoreCard 
  {
    //save score card
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *savedScoreCards = [[NSMutableDictionary alloc] init];
    [userDefaults setObject:nil forKey:@"savedScoreCards2"];//reset at beginning

    NSMutableArray *golferOneScoresu = [userDefaults arrayForKey:@"golferOneScoresArray"];
    NSMutableArray *golferTwoScoresu = [userDefaults arrayForKey:@"golferTwoScoresArray"];
    NSMutableDictionary *golferIconsu = [userDefaults objectForKey:@"golferIconsFirstScene"];
    NSMutableArray *golferThreeScoresu = [userDefaults arrayForKey:@"golferThreeScoresArray"];
    NSMutableArray *golferFourScoresu = [userDefaults arrayForKey:@"golferFourScoresArray"];
    NSMutableDictionary *golferIcons2u = [userDefaults objectForKey:@"golferIcons"];
    NSMutableArray *golferNamesu = [userDefaults objectForKey:@"golferNames"];

    NSMutableArray *golferNames = [[NSMutableArray alloc] initWithArray:golferNamesu copyItems:YES];
    NSMutableDictionary *golferIconsSceneOne = [[NSMutableDictionary alloc]initWithDictionary:golferIconsu];
    NSMutableDictionary *golferIcons = [[NSMutableDictionary alloc]initWithDictionary:golferIcons2u];
    NSMutableArray *golferFourScores = [[NSMutableArray alloc] initWithArray:golferFourScoresu copyItems:YES];
    NSMutableArray *golferThreeScores = [[NSMutableArray alloc] initWithArray:golferThreeScoresu copyItems:YES];
    NSMutableArray *golferOneScores = [[NSMutableArray alloc] initWithArray:golferOneScoresu copyItems:YES];
    NSMutableArray *golferTwoScores = [[NSMutableArray alloc] initWithArray:golferTwoScoresu copyItems:YES];

    NSMutableDictionary *currentScoreCard = [[NSMutableDictionary alloc] init];

    [currentScoreCard setObject:golferNames forKey:@"golferNames"];
    [currentScoreCard setObject:golferIconsSceneOne forKey:@"golferIconsFirstScene"];
    [currentScoreCard setObject:golferIcons forKey:@"golferIcons"];
    [currentScoreCard setObject:golferOneScores forKey:@"golferOneScoresArray"];
    [currentScoreCard setObject:golferTwoScores forKey:@"golferTwoScoresArray"];
    [currentScoreCard setObject:golferThreeScores forKey:@"golferThreeScoresArray"];
    [currentScoreCard setObject:golferFourScores forKey:@"golferFourScoresArray"];

    [savedScoreCards setObject:currentScoreCard forKey:@"1"];

    NSLog([golferIconsSceneOne objectForKey:@"30101"]);

    [userDefaults setObject:savedScoreCards forKey:@"savedScoreCards2"];
    [userDefaults synchronize];
    NSLog(@"SAVED SCORE CARD");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:57:58.423

如果`[userDefaults removeObjectForKey:@"savedScoreCards2"]`您只是想删除存储的值，请使用。还请立即致电`[userDefaults synchronize];`“刷新”您的更改。我认为这`[userDefaults synchronize]`可能是你所缺少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:58:26.530

当您对 NSUserDefaults 进行更改时，它们不会自动保存。尝试在您上面发布的行下方添加此行：

```
[userDefaults synchronize]; 
```

This should save any changes you've made.

As a side note, I'm not sure you can save 'nil' into NSUserDefaults; at its core I believe it's a dictionary, in which nil values cannot be set. So you might try setting an empty object, instead.

Hope this helps, let me know if you need any more information!

# com - 调用 VBScript Procedure 结果类型不匹配错误

> ID：10661449
> 
> 赞同：1
> 
> 时间：2012-05-19T00:54:12.330
> 
> 标签：com, vbscript, variant

我的一个 COM 对象有一个以下成员，它在第二个参数中返回字节数组及其长度。

```
HRESULT GetBinaryData([out] VARIANT *pVal, [out] long *pLen); 
```

供参考，

```
**Part of implementation is as follows:**
....
VariantInit(pVal);
pVal->vt = VT_UI1 | VT_ARRAY;
SAFEARRAYBOUND rgsabound[1];
rgsabound[0].lLbound = ARRAY_LBOUND;
rgsabound[0].cElements = (ULONG)len;
pVal->parray = SafeArrayCreate(VT_UI1, 1, rgsabound);
.... 
```

我试图在 VBScript 中调用这个成员，但在我所有的试验中都失败了。这是我的 vbscript 代码片段：

```
Set op = CreateObject("myserver")
dim bytearray()
op.GetBinaryData bytearray, bytearray_len 
```

但是在第 3 行，遇到类型不匹配错误...

如何将过程中的结果放入我的 vbscript 变量中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:09:04.553

考虑`retval`在 COM 级别使用：

```
HRESULT GetBinaryData([out, retval] VARIANT *pVal); 
```

因为返回值是`SAFEARRAY`你现有的 C++ 仍然可以工作。在这种情况下，`SAFEARRAY`返回给调用者数组和长度是足够的。即您的 C++ 代码保持原样。

您的 VBScript 代码变为：

```
Option Explicit
Set op = CreateObject("myserver")
Dim byteArray, lenArray
byteArray = op.GetBinaryData()
lenArray = UBound(byteArray) - LBound(byteArray) + 1 
```

尽管您只能拥有一个`retval`by`SAFEARRAY`或等效对象（例如`IXMLDOMDocument`），但您可以为 VBScript 打包多个返回值。

# php - 转换html表格

> ID：10661452
> 
> 赞同：1
> 
> 时间：2012-05-19T00:54:22.720
> 
> 标签：php, html

嗨，我有一个按字母顺序排列的电影名称数组，我想创建一个 html 表，我想即时执行此操作，因此我执行了以下操作：

```
echo "<div align=\"center\"><table>";   
$i=0;
foreach ($results as $entry){   
    //If first in row of 4, open row
    if($i == 0) {
        echo "<tr>\n";
    }
    //print a cell
    echo "\t<td>" . $entry . "</td>\n";
    i++;
    //if last cell in row of 4, close row
    if($i == 4) {
         echo "</tr>\n";
        $i=0;
    }
}

if($i < 4)  {
    while($i < 4) {
        echo "\t<td></td>\n";
        $i++;
    }
    echo "</tr>\n";
}
echo "</table></div>"; 
```

但是，这会构建一个如下所示的表：

```
entry0 | entry1 | entry2 | entry3
entry4 | entry5 | entry6 | entry7 
```

我怎样才能建立一个像这样的表：

```
entry0 | entry3 | entry6
entry1 | entry4 | entry7
entry2 | entry5 | entry8 
```

?

我猜我必须重新组织我的 $results 数组并仍然以相同的方式构建表？

我对 php 很陌生（一周！）所以我不太确定该怎么做

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:19:37.127

```
$results = array( 'e1', 'e2', 'e3', 'e4', 'e5', 'e6','e7' );

$NUM_COLUMNS = 3;

$numRows = count($results) / $NUM_COLUMNS;
if (count($results) % $NUM_COLUMNS > 0) {
  $numRows += 1;
}

echo "<div align=\"center\"><table>";
$i=0;
for ($i = 0; $i < $numRows; $i++) {
  echo "<tr>\n";

  $index = $i;
  for ($j = 0; $j < $NUM_COLUMNS; $j++) {
    //print a cell
    $entry = '';
    if ($index < count($results)) {
      $entry = $results[$index];
    }
    echo "\t<td>" . $entry . "</td>\n";

    $index += $numRows;
  }

  echo "</tr>\n";
}

echo "</table></div>"; 
```

这是经过测试的，包括垂直排序项目。我会写一个描述，但我刚接到一个电话，不得不去。如果您有任何问题，我会在约 1 小时内回答问题。（对不起！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:05:39.823

这个怎么样：（我没有测试，但应该可以）

```
<?php
$i = 1;
$max = 3; // this is the number of columns to display

echo "<div align=\"center\"><table><tr>"; 

foreach ($results as $entry) {
    echo "<td style=\"text-align: center;\">";
    echo $entry;
    echo "</td>";

    $i++;

    if ($i == ($max)) {
        echo '</tr><tr>';

        $i = 1;
    }
}

echo "</tr>\n";
echo "</table></div>";
?> 
```

# python - 为什么 shell=True 会吃掉我的 subprocess.Popen 标准输出？

> ID：10661457
> 
> 赞同：15
> 
> 时间：2012-05-19T00:55:52.160
> 
> 标签：python, subprocess, pipe, popen

似乎在链的第一个进程中使用 shell=True 会以某种方式从下游任务中删除标准输出：

```
p1 = Popen(['echo','hello'], stdout=PIPE)
p2 = Popen('cat', stdin=p1.stdout, stdout=PIPE)
p2.communicate()
# outputs correctly ('hello\n', None) 
```

使第一个进程使用 shell=True 会以某种方式杀死输出......

```
p1 = Popen(['echo','hello'], stdout=PIPE, shell=True)
p2 = Popen('cat', stdin=p1.stdout, stdout=PIPE)
p2.communicate()
# outputs incorrectly ('\n', None) 
```

shell=True 在第二个进程上似乎并不重要。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-19T01:03:18.577

当您传递 时`shell=True`，Popen 需要一个字符串参数，而不是列表。所以当你这样做时：

```
p1 = Popen(['echo','hello'], stdout=PIPE, shell=True) 
```

会发生什么：

```
execve("/bin/sh", ["/bin/sh", "-c", "echo", "hello"], ...) 
```

也就是说，它调用`sh -c "echo"`, 并被`hello`有效地忽略（从技术上讲，它成为 shell 的位置参数）。所以shell运行`echo`，它打印`\n`，这就是你在输出中看到它的原因。

如果你使用`shell=True`，你需要这样做：

```
p1 = Popen('echo hello', stdout=PIPE, shell=True) 
```

# java - 使用@GeneratedValue 对@Id 进行休眠空约束违规

> ID：10661461
> 
> 赞同：7
> 
> 时间：2012-05-19T00:57:35.147
> 
> 标签：java, hibernate, postgresql, annotations, playframework

我在 Play 上使用 Hibernate 4.1.3 (JPA)！框架。数据库是 PostgreSQL 8.4.2。架构是使用生成的`hibernate.hbm2ddl.auto="update"`。

简短版本：我有一个类，它的`@Id`字段是`@GeneratedValue`. 有时，当`persist`我使用它时，我得到一个空列违规，为什么？

* * *

更多细节：

我有一个非常简单的类，我想将其保存到数据库中，如下所示：

```
@Entity
class MyObject {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Long id;

    @NotNull
    public String email;

    public Integer total;
} 
```

我通常创建一个 MyObject 的实例，在为 null时为`email`和`total`字段分配一个值，然后通过. Hibernate 获取新对象的 id 并将其保存到数据库。`id``EntityManager.persist()`

但是有时，我会得到以下堆栈跟踪：

```
2012-05-19 00:45:16,335 - [ERROR] - from org.hibernate.engine.jdbc.spi.SqlExceptionHelper [SqlExceptionHelper.java:144] in play-akka.actor.actions-dispatcher-6 
ERROR: null value in column "id" violates not-null constraint

2012-05-19 00:45:16,350 - [ERROR] - from application in play-akka.actor.actions-dispatcher-6 

! @6ad7j3p8p - Internal server error, for request [POST /method] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[PersistenceException: org.hibernate.exception.ConstraintViolationException: ERROR: null value in column "id" violates not-null constraint]] 
```

这怎么可能？我怎样才能找到问题？

下面是 Hibernate 生成的相关 DDL：

```
CREATE TABLE myobject (
    id bigint NOT NULL,
    email character varying(255) NOT NULL,
    physical integer
);

CREATE SEQUENCE hibernate_sequence
    START WITH 1
    INCREMENT BY 1
    NO MAXVALUE
    NO MINVALUE
    CACHE 1;

ALTER TABLE ONLY dailydetailedscore
    ADD CONSTRAINT dailydetailedscore_pkey PRIMARY KEY (id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:38:05.590

尝试注释`@org.hibernate.annotations.GenericGenerator(name = “test-hilo-strategy”, strategy = “hilo”)`：

```
@Id
@org.hibernate.annotations.GenericGenerator(name=“hilo-strategy”, strategy = “hilo”)
@GeneratedValue(generator = ”hilo-strategy”) 
```

正如上面有人指出的那样，`AUTO`不会按照您的想法行事。它使用底层数据库来确定如何生成值。它可以选择序列（对于 oracle）、标识列（对于 mssql）或其他特定于 db 的内容。

这里的方法使用 Hibernate 提供的称为“hilo”的内部策略。

请参阅 Hibernate 参考手册的第 5 章处理“生成器”，以完整描述每个提供的生成器的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T09:59:13.317

OP 解决方案和 Matt 的解决方案都不适用于我的 PostgreSQL 9.3。

但这一个有效：

```
@SequenceGenerator(name="identifier", sequenceName="mytable_id_seq", allocationSize=1)  
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="identifier") 
```

替换`mytable_id_seq`为生成您的 id 的序列的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T07:51:52.290

使用 Hibernate 方法：- save(String entityName, Object object) 持久化给定的瞬态实例，首先分配一个生成的标识符。

**如果要保留用户定义的 Id，请不要使用 :- @GeneratedValue(strategy=GenerationType.IDENTITY) 作为主键**。

详情：- [http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Session.html#save(java.lang.String](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Session.html#save(java.lang.String)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-06T06:39:38.697

在我的情况下，我使用了**身份**生成策略，并且在 Postgres 中设置了错误的数据类型。按照我执行的步骤来调试问题。

放

```
spring.jpa.hibernate.ddl-auto=update 
```

`spring.jpa.show-sql=true`在 application.properties 中并删除表。

通过这个休眠将根据您的数据类型自动为您创建模式。我注意到 id 字段的数据类型发生了变化。

现在，当我尝试任何发布请求时，一切正常。

# java - 保护来自客户端应用程序的服务器端输出

> ID：10661464
> 
> 赞同：0
> 
> 时间：2012-05-19T00:58:09.110
> 
> 标签：java, security, applet, server-side, data-security

我将本地应用程序转换为 Java 小程序以实现数据安全性¹但我不知道如何将信息输出到文件。我正在通过 URL 对象输入文件，但不知道如何将数据输出到服务器上的文件。

1.  **安全**，因为在监督条件下运行程序的人不能保留它并为其他人运行它（这是我正在试点的一项调查）。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:10:26.253

小程序在客户端上运行，而不是在服务器上，所以小程序不能做到这一点。它*可以*做的是将数据发送到服务器上的某种服务，然后该服务可以转身并将数据写入文件。

# iis - IIS 7 中 mp3 mimeMap 的奇怪行为

> ID：10661465
> 
> 赞同：6
> 
> 时间：2012-05-19T00:58:09.577
> 
> 标签：iis, iis-7, mime-types

在为具有 mp3 扩展名的文件添加 mimeMap 元素时，我遇到了完全意外的行为。这工作正常：

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules runAllManagedModulesForAllRequests="true" />
  <staticContent>
    <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
    <mimeMap fileExtension=".ogv" mimeType="video/ogg" />
    <mimeMap fileExtension=".webm" mimeType="video/webm" />
    <mimeMap fileExtension=".ogg" mimeType="audio/ogg" />
    <!--      <mimeMap fileExtension=".mp3" mimeType="audio/mpeg" /> -->
  </staticContent>
</system.webServer> 
```

但是，一旦我取消注释与 MP3 文件有关的元素，一切都会在众所周知的手提篮中陷入困境。我的 js、我的 css 和我的 aspx 文件都不会被提供，我得到了很多这些：

HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

有人以前见过这种行为，或者有任何指示吗？我（显然）不擅长 IIS 配置。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T12:04:55.000

这种行为可能是因为.. 在 IIS 中，已经配置了 mp3 的 mimetype。您在 mp3 的 web.config mimemap 中添加将导致重复条目。做就是了

`<remove fileExtension=".mp3"/>`

`<mimeMap fileExtension=".mp3" mimeType="audio/mpeg" />`

问候

Goutham Ganesh V

# java - Solr 查询结果 - 需要搜索的文本及其周围的几行

> ID：10661466
> 
> 赞同：1
> 
> 时间：2012-05-19T00:58:10.500
> 
> 标签：java, solr, search-engine, document

我完全迷路了。我想我肯定在这里遗漏了一些基本的东西。每个人都对 Solr 有这么棒的评价，但我没看到。

我在 Solr 中索引了一个结构化的 pdf 文档。问题是当我搜索一个简单的字符串时 - 我将整个内容字段作为响应！我不知道如何改变它。我的要求是，假设我搜索它应该给我的“元数据”

*" **MetadataDiscussion** . . . 4 个匹配项...确保 Tika 用户有机会获得 Tika 创建和/或提取的所有**元数据**。== 原始问题 == 此页面的原始灵感是 Tika .. . 10.7k - rev: 2 (current) last modified: 2010-08-02 18:09:45 "*

但它给了我整个文档！- 被索引的整个字符串。似乎 Lucene 只能告诉我它发生在哪个领域，而不是它发生在哪个领域

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T02:08:45.317

Lucene/Solr 主要是一个检索引擎——它检索与查询匹配的文档。所以这种行为是可取的和预期的。现在，对于您的要求，您可以使用Solr的[突出显示功能来满足您的要求。](http://wiki.apache.org/solr/HighlightingParameters)假设您的文档文本存储在名为`text`- 的字段中，那么您将向 Solr 传递以下参数：

```
&hl=true&hl.fl=text&hl.snippets=5&hl.fragsize=200 
```

查看其他参数以进一步自定义它。

Solr*是*惊人的 :)

# css - 重叠的照片

> ID：10661471
> 
> 赞同：0
> 
> 时间：2012-05-19T00:59:47.127
> 
> 标签：css, position, hide, css-float, show

当您将鼠标悬停在照片上时，我试图设置一种查看照片的方式，并且在浮动和定位方面遇到了一些麻烦。我让它像这样工作......

```
**HTML**

<div id="container-collection">

  <div id="clothes1"><img src="Images/smallest/JPEG/IMG_3148.jpg" alt="1" width="211" height="316" onMouseOver="MM_showHideLayers('closeup1','','show')" onMouseOut="MM_showHideLayers('closeup1','','hide')"></div><div id="clothes2"><img src="Images/smallest/JPEG/IMG_3124.jpg" alt="2" width="211" height="316" onMouseOver="MM_showHideLayers('closeup2','','show')" onMouseOut="MM_showHideLayers('closeup2','','hide')"></div>
  <div id="closeup1"><img src="Images/Smaller/bigger ones/JPEG/IMG_3148_1.jpg" width="432" height="648" alt="11"></div>  <div id="closeup2"><img src="Images/Smaller/bigger ones/JPEG/IMG_3124_1.jpg" width="432" height="648" alt="11"></div>

</div>

**CSS**

#container-collection { width: 900px; margin:0 auto; padding-top: 90px; }

#clothes1 { float:left; left:0px; top:5px; width:209px; height:316px; z-index:1; }

#clothes2 { float:left; left:5px;   top:5px; width:209px;   height:316px;   z-index:1; }

#closeup1 { float:left; left:400px; top:-316px; width:427px;    height:648px;   z-index:2;  visibility: hidden; }

#closeup2 { position:relative;  left:423px; top:-648px; width:427px;    height:648px;   z-index:3;  visibility: hidden; } 
```

但必须有更好的方法。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:41:58.230

您可以使用许多 JavaScript 插件来快速实现这一点。

例如，尝试引导插件：

[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

注意：标签`data-content`中的属性`<a>`可以包含 HTML 内容。请注意引号的使用。

```
<a href="#" rel="popover" data-content="<img src='image2.jpg' />" data-original-title="A Title">
<img src="image1.jpg" border="0" />
</a> 
```

**可选地**，一个更简单的显示预览的版本可以**仅使用 CSS**完成，利用悬停。

```
<style>
    a.info
    {
        position: relative; /*this is the key*/
        z-index: 204;
        color: #000;
        text-decoration: none;
    }

    a.info:hover
    {
        z-index: 205;
        background-color: gainsboro;
    }

    a.info span{display: none}

    a.info:hover span
    {
        /*the span will display just on :hover state*/
        display: block;
        position: absolute;
        top: 3em;
        left: 1em;
    }
</style>

<a class="info" href="javascript:focus();">
<img src="image1.jpg" /><span><img src="image2.jpg" /></span>
</a> 
```

# cordova - 创建基于 PhoneGap 的应用程序时从哪里开始？

> ID：10661473
> 
> 赞同：0
> 
> 时间：2012-05-19T01:00:38.047
> 
> 标签：cordova

我希望为所有主要的智能手机操作系统（包括：iOS、Android、Windows 和 Blackberry）创建一个基本的智能手机应用程序。但我不知道从哪里开始。我要创建的应用程序将非常基本。它将显示一些每天都会更改的内容。它会在有新内容时提醒用户并且用户可以查看内容。用户还可以看到过去的内容。

虽然应用程序本身相当简单，但我不知道从哪里开始。我运行windows软件，没有mac。（阻止我正确构建 iOS？）我对应用程序编码的知识也一无所知。我知道 HTML/CSS/ 和一些 javascript。我曾想过使用PhoneGap 来做我需要的事情，并使用PhoneGap 在Dreamweaver CS6 中的内置集成（使用PhoneGap 将允许我为iOS 创建对吗？）。我需要能够做到这一点而不必学习新代码（或者至少有很多新代码，我可以处理的基础知识，我还在学习 javascript！）。

所以我的问题是，我最好从哪里开始尝试学习如何创建一个基于 PhoneGap 的应用程序来满足我的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:42:44.220

请参阅[http://docs.phonegap.com/en/1.7.0/guide_getting-started_index.md.html](http://docs.phonegap.com/en/1.7.0/guide_getting-started_index.md.html)

即使在 PG/Cordova 上，您也需要 Mac 和 iOS 开发人员认证才能制作 iOS 应用程序。但是您将能够在您的 Windows 机器上为其他平台进行开发。

我在 PG/Cordova 上的体验在 Android 上很好，在 iOS 上还可以，在 Blackberry（手机和平板电脑）上都很好。但我主要将这种爱归咎于黑莓，就像我爱我的手机和剧本一样。

你*必须*学习更多才能制作一个 Phonegap 应用程序，特别是如果你想将外部内容加载到手机上（查找 jQuery，尤其是 jQuery.ajax() 方法），并美化用户界面（jQuery Mobile*等*） .

然而，像 Phonegap 这样的框架（还有其他框架，但到目前为止，我最喜欢 PG）是初学者（和高级）编码人员制作快速、简单的移动应用程序的最简单的解决方案。

因此，请阅读 PG/Cordova 文档，在 stackoverflow 中搜索已在此主题上提出和回答的问题（使用 phonegap 标签），并提高您的 JS 技能！

# java - 从字符串中删除特定单词

> ID：10661482
> 
> 赞同：25
> 
> 时间：2012-05-19T01:01:25.910
> 
> 标签：java, replace

我正在尝试使用该函数从某个字符串中删除一个特定的单词，`replace()`或者`replaceAll()`即使它是另一个单词的一部分，它们也会删除该单词的所有出现！

*例子：*

```
String content = "is not like is, but mistakes are common";
content = content.replace("is", ""); 
```

**输出：** `"not like , but mtakes are common"`

**所需的输出：** `"not like , but mistakes are common"`

如何仅替换字符串中的整个单词？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-19T01:06:06.813

有没有搞错，

```
String regex = "\\s*\\bis\\b\\s*";
content = content.replaceAll(regex, ""); 
```

请记住，您需要`replaceAll(...)`使用正则表达式，而不是`replace(...)`

*   `\\b`给你单词边界
*   `\\s*`将要删除的单词两侧的任何空格都塞满（如果您也想删除它）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T01:05:45.867

`content = content.replaceAll("\\Wis\\W|^is\\W|\\Wis$", "");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T01:03:18.107

您可以尝试将“is”替换为“”。前后各有一个空格，替换为一个空格。

更新：

为了使它适用于句子中的第一个“is”，还要将“is”替换为“”。用空字符串替换第一个 is 和第一个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-05T15:39:35.650

```
 public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        String input = s.nextLine();
        char c = s.next().charAt(0);
        System.out.println(removeAllOccurrencesOfChar(input, c));
    }

    public static String removeAllOccurrencesOfChar(String input, char c) {
   String r = "";
   for (int i = 0; i < input.length(); i ++) {
      if (input.charAt(i) != c) r += input.charAt(i);
      }
   return r;
      }
    } 
```

# javascript - 我怎样才能在这个共享原型中有单独的数组？

> ID：10661483
> 
> 赞同：4
> 
> 时间：2012-05-19T01:01:35.300
> 
> 标签：javascript, prototype

鉴于这种：

```
var p = function(){}; 
p.prototype = { id : null, arr : []}
var a = new p(); 
var b = new p();
a.id = 1;
a.arr.push(5);
alert(b.arr[0]); 
```

警报的`5`意思是 a.arr == b.arr，但是 a.id 和 b.id 是分开的 (a.id != b.id)。我怎样才能做到a.arr！= b.arr？

约束：

p 一定能`new p()`用过。或者，必须有一种方法来制作唯一的 p。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:14:00.683

如果您希望 id 和 arr 对于 p 的每个实例都是唯一的，则需要在 p 构造函数中实例化它们。原型对象应该只用于共享常量和函数。

```
var p = function(){
    this.id = null;
    this.arr = [];
}; 

var a = new p(); 
var b = new p();

a.id = 1;
a.arr.push(5);
alert(b.arr[0]); 
```

# c# - 将参数传递给绑定到gridview更新中的下拉列表的sqldatasource

> ID：10661493
> 
> 赞同：1
> 
> 时间：2012-05-19T01:04:42.563
> 
> 标签：c#, asp.net, gridview, drop-down-menu

我有一个包含许多列的可编辑网格视图。其中两个是 100mPlot 和 SubPlot。SubPlot 不是唯一的（1A、1B、1C 和 1D），但 100mPlot + SubPlot 构成一组唯一的值。

当用户单击“编辑”时，他们将在 SubPlot 列中看到一个下拉列表。此列表需要基于 100mPlot 的值是多少。因此，为了显示 SubPlot 的正确值，我需要将 100mPlot 列中的值作为参数传递给将绑定到 SubPlot 下拉列表的 sqldatasource。我该怎么办？

```
<asp:BoundField DataField="100mPlot" HeaderText="100m plot" 
     SortExpression="100mPlot" ReadOnly="True" />
<asp:TemplateField HeaderText="SubPlot" SortExpression="SubPlot">
     <EditItemTemplate>
         <asp:DropDownList ID="DropDownList1" runat="server" 
             DataSourceID="dsSubPlotNames" 
             DataTextField="SiteID" DataValueField="SiteID" 
             SelectedValue='<%# Bind("SiteID") %>'
             AppendDataBoundItems="True">
             <asp:ListItem Value=""></asp:ListItem>
         </asp:DropDownList>
         <asp:SqlDataSource ID="dsSubPlotNames" runat="server" 
             ConnectionString="<%$ ConnectionStrings:WERCMTX %>" SelectCommand="exec [339_PPM].usp_SubPlotNames_Select @100mPlotSiteID;">
             <SelectParameters>
                 <asp:Parameter Name="100mPlotSiteID" />
             </SelectParameters>
          </asp:SqlDataSource>
       </EditItemTemplate>
       <ItemTemplate>
           <asp:Label ID="Label3" runat="server" Text='<%# Bind("SubPlot")%>'></asp:Label>
       </ItemTemplate>
</asp:TemplateField> 
```

如您所见，参数名称“100mPlotSiteID”需要取自 100mPlot 列。我不知道如何再清楚地描述这一点，如果您有任何问题，请告诉我。谢谢你的帮助。

使用新修订的代码进行编辑。现在这么近！

```
<asp:TemplateField HeaderText="SubPlot" SortExpression="SubPlot">
    <EditItemTemplate>                            
        <asp:DropDownList ID="DropDownList1" runat="server" 
            DataSourceID="dsSubPlotNames" 
            DataTextField="SiteName" DataValueField="SiteID" 
            SelectedValue='<%# Bind("SiteID") %>'
        >
        </asp:DropDownList>
        <asp:SqlDataSource ID="dsSubPlotNames" runat="server" 
            ConnectionString="<%$ ConnectionStrings:WERCMTX %>" SelectCommand='exec [339_PPM].usp_SubPlotNames_Select null, @100mPlotName;'
            CancelSelectOnNullParameter="False">                                
            <SelectParameters>
                <asp:ControlParameter ControlID="GridView1" DefaultValue='<%# Eval("100mPlot") '
                    Name="100mPlotName" PropertyName="SelectedValue" />
             </SelectParameters>
         </asp:SqlDataSource>
     </EditItemTemplate>
          <ItemTemplate>
              <asp:Label ID="Label3" runat="server" Text='<%# Bind("SubPlot") %>'></asp:Label>
     </ItemTemplate>                        
 </asp:TemplateField> 
```

不幸的是，我在 Eval("100mPlot") 中遇到了这个错误：

> 只有具有 DataBinding 事件的对象才支持数据绑定表达式。System.Web.UI.WebControls.ControlParameter 没有 DataBinding 事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T01:15:37.220

您需要在数据源中放置标签并将文本属性设置为`'<%# Eval("100mPlot") %>'`并使用控制参数。

如果标签的 id 是“label1”（必须在编辑项模板内），那么使用这个

```
<asp:ControlParameter ControlID="label1" PropertyName="Text" Name="100mPlotSiteID" /> 
```

# c# - 从 iOS 连接到 C# 服务器

> ID：10661499
> 
> 赞同：0
> 
> 时间：2012-05-19T01:06:45.830
> 
> 标签：c#, ios, tcp, azure

我正在尝试制作一个连接到 C# 服务器（使用 TCP）的 iOS 应用程序，其编程方式与[此处](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)显示的类似。在客户端 (iOS) 端，我使用 CFStreams 和 CFStreamCreatePairWithSocketToHost 方法连接到我的云服务器。我已经按照[这里](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)为 iOS 端找到的教程进行了操作。可以在[此处](http://numberonekits.com/tcpConnect.m)找到主连接程序的副本。

不幸的是，当我运行应用程序时，我从未从 inputStream 中获得 NSStreamEventHasBytesAvailable 事件，即使服务器被编程为在建立连接后立即向客户端发送消息。有人可以帮我解决这个问题吗？

非常感谢所有帮助，我总是至少接受一个答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:59:34.377

您可能希望在服务器端打印接收到的内容和发送的内容。你可能想阅读这篇文章，因为他很好地提供了如何获取更多信息的想法：

[bytesWritten，但其他设备从未收到 NSStreamEventHasBytesAvailable 事件](https://stackoverflow.com/questions/10378001/byteswritten-but-other-device-never-receives-nsstreameventhasbytesavailable-eve)

# c++ - 使用基类指针作为方法的参数

> ID：10661506
> 
> 赞同：2
> 
> 时间：2012-05-19T01:08:21.873
> 
> 标签：c++, abstract-class

以下测试代码演示了我在更大的应用程序中遇到的问题。在应用程序中，我有一项服务“提供”了几个服务器，这些服务器都派生自一个基类。然后，我使用 createInstance 根据服务器类型（下面使用的“n”）“访问”特定服务器。然后使用 dynamic_cast 转换为适当的服务器。这一切都很好。

问题是当我尝试使用 deleteInstance 返回服务并删除它时，清理任何内部服务器相关数据。我似乎找不到一个好的传递机制，或者它是否是实现我正在做的事情的有效方式。

```
#include <iostream>
#include <string>

class MM
{
public:
    virtual ~MM() {}

    virtual void start() = 0;
};

class M1 : public MM
{
public:
    void start()
    {
        std::cout << "M1 start" << std::endl;
    }
};

class M2 : public MM
{
public:
    void start()
    {
        std::cout << "M2 start" << std::endl;
    }
    void start( const std::string strName )
    {
        std::cout << "M2 start - " << strName << std::endl;
    }
};

MM * createInstance( int n )
{
    if( 2 == n )
    {
        return new M2;
    }
    else
    {
        return new M1;
    }
}

void deleteInstance( MM * & pInstance )
{
    delete pInstance;
    pInstance = NULL;
}

void deleteInstance2( MM ** ppInstance )
{
    delete *ppInstance;
    *ppInstance = NULL;
}

int main( int argc, char *argv[] )
{
    M1 *pM1 = dynamic_cast<M1 *>( createInstance( 1 ) );
    M2 *pM2 = dynamic_cast<M2 *>( createInstance( 2 ) );

    pM1->start();

    pM2->start();
    pM2->start( "test" );

    deleteInstance( pM1 );
    deleteInstance( pM2 );
    //deleteInstance2( &pM1 );
    //deleteInstance2( &pM2 );

    return 0;
} 
```

要完成信息，我收到的 deleteInstance 实现错误：

```
68:25: error: invalid initialization of reference of type ‘MM*&’ from expression of type ‘M1*’
46:6: error: in passing argument 1 of ‘void deleteInstance(MM*&)’
69:25: error: invalid initialization of reference of type ‘MM*&’ from expression of type ‘M2*’
46:6: error: in passing argument 1 of ‘void deleteInstance(MM*&)’ 
```

对于 deleteInstance2：

```
70:27: error: invalid conversion from ‘M1**’ to ‘MM**’
70:27: error:   initializing argument 1 of ‘void deleteInstance2(MM**)’
71:27: error: invalid conversion from ‘M2**’ to ‘MM**’
71:27: error:   initializing argument 1 of ‘void deleteInstance2(MM**)’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:21:05.933

问题在于，将指向派生类型的指针与对基类型指针的引用绑定会破坏类型系统。考虑这个鼓舞人心的例子：

```
void resetPtr( base*& b ) {
   static base instance;
   b = &instance;
}
int main() {
   derived *d;
   resetPtr( d );        // Now d points to a base, not a derived object!!!!
} 
```

尽管您可以像其他答案指出的那样解决此问题（例如，通过使用将推断出适当类型的模板等），但我建议您**重新设计**并按值传递指针。

*为什么删除后将指针重置为 NULL 是个坏主意？*

将指针重置为 NULL 的问题在于它并没有真正解决任何问题，而是增加了它自己的问题。

它不能解决知道指针在您的应用程序中是否有效的问题，因为在一般情况下，您可以拥有多个指向给定对象的指针，并且由于您只删除其中一个，因此只会重置其中一个指针为 NULL，并且您（至少在大多数情况下）会遇到与开始时相同的情况。

它可以帮助隐藏应用程序逻辑中的错误：将指针重置为 NULL 后，应用程序中的任何潜在问题`delete`都将被隐藏，因为它对`delete`NULL 指针是安全的。虽然您可能认为这是一个好主意——毕竟，它避免了你的应用程序崩溃——但从长远来看，这是一个坏主意，因为核心问题仍然存在：设计未能提供适当的所有权语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:19:26.670

这个问题与基类与派生类指针无关；问题只是你已经声明你的方法接受一个指向 MM 的指针作为参数，而你只是传递了一个指向 MM 的指针。

您可以通过引用传递一个指向 MM 的指针——即

```
void deleteInstance( T* &pInstance ) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T01:14:51.197

我不确定我是否喜欢你正在尝试做的事情，但我无法解释为什么 - 我认为这个想法很好。..但是这是一种可以实现它的方法。

```
template<typename T>
void deleteInstance( T * & pInstance )
{
  // This conversion is here so you get a nice error if 
  // you try to use it on a type that isn't derived from MM.
  MM* tmp = pInstance;
  delete tmp;
  pInstance = NULL;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T01:18:26.417

`deleteInstance`不起作用的原因是您正在对由 M1* 或 M2* 转换为 MM* 创建的临时对象进行非常量引用。

不起作用的原因`deleteInstance2`是 Derived** 不能转换为 Base**。[这个常见问题解答](http://www.parashift.com/c++-faq-lite/proper-inheritance.html#faq-21.2)很好地解释了它。

# javascript - 如何在扩展中播放音频？

> ID：10661507
> 
> 赞同：5
> 
> 时间：2012-05-19T01:08:39.440
> 
> 标签：javascript, firefox-addon, html5-audio, firefox-addon-sdk

```
AudioObj = new Audio; 
```

将返回“音频未定义”

我还尝试了经典修复：

```
var audio = require("audio"); 
```

但没有运气。我可以在扩展程序的其他部分添加音频播放，而不是在 中添加音频播放`main.js`，比如一些可以工作的内容脚本，但也许有一个更简单和优雅的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T06:15:32.537

`new Audio`创建一个新的`<audio>`HTML 元素 - 这仅适用于绑定到文档的上下文。SDK 模块在没有文档的上下文中执行，因此没有任何 DOM 方法可以工作，包括这个。解决方法是`about:blank`通过[`page-worker`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/addon-kit/page-worker.html)加载并在那里注入内容脚本。然后，您可以向该内容脚本发送消息，并让它在您需要时为您播放音频。

另一种方法是使用[`nsISound.play()`](https://developer.mozilla.org/en/nsISound#play%28%29)，类似于以下内容：

```
var {Cc, Ci} = require("chrome");
var sound = Cc["@mozilla.org/sound;1"].createInstance(Ci.nsISound);
var uri = Cc["@mozilla.org/network/io-service;1"]
            .getService(Ci.nsIIOService)
            .newURI(self.data.url(...), null, null);

sound.play(uri); 
```

请注意，`nsISound`它[可能](https://bugzilla.mozilla.org/show_bug.cgi?id=683263)很快就会被弃用。它是一个旧 API，不如 HTML5 音频。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-26T05:25:35.603

```
var window = require("sdk/window/utils").getMostRecentBrowserWindow();
AudioObj = new window.Audio; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T01:52:54.587

main.js 无法访问通常存在于 Web 内容中的 DOM api。如果要使用 DOM api，则需要使用内容脚本。有关 SDK 模块系统如何工作的更多信息，请参阅文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/commonjs.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/commonjs.html)

# java - 射击精灵安卓

> ID：10661509
> 
> 赞同：2
> 
> 时间：2012-05-19T01:08:49.560
> 
> 标签：java, android, sprite

我正在用java开发一个Android游戏，我将有一个跟随用户手指的精灵，并且应该每秒发射一次子弹。换句话说，我正在尝试附加一个每秒向上移动的位图。位图从主角精灵的 x 和 y 坐标开始。我不能让它一次吸引超过一枚导弹，而且我已经没有办法做到这一点了。我已经尝试了很多东西，我真的可以使用一些帮助。

顺便说一句，我的主游戏面板类扩展了一个surfaceView并实现了一个SurfaceHolder.Callback：

```
public class MainGamePanel extends SurfaceView implements SurfaceHolder.Callback{ 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:20:50.127

据我了解，您希望能够一次发射超过 1 颗子弹？您可以使用向量或数组来执行此操作。使用 Array，您可以设置默认的可见子弹数量，在 Vector 中，您可以拥有手指能够产生的子弹子弹。

这是我用来生成激光的代码（我将值存储在数组中）。

```
public void updatePlayerLaser(boolean shootLaser) {
        // Check if a new Laser should be created
        if(shootLaser == true) {
            if(timeLastCreatedLaser + 100 < System.currentTimeMillis()) {
                timeLastCreatedLaser = System.currentTimeMillis();
                boolean createdNewLaser = false;
                for(int i = 0; i < this.amountOfVisibleLasers; i++) {
                    if(createdNewLaser == false) {
                        if(holderLaser[i].isDisposed()) {
                            this.generateNewLaser(i);
                            createdNewLaser = true;

                        }
                    }
                }
            }
        }

        // Update all the other Lasers
        for(int i = 0; i < this.amountOfVisibleLasers; i++) {
            if(holderLaser[i].isDisposed() == false) {
                holderLaser[i].update();
            }

        }

    } 
```

在这种情况下布置意味着激光器已失效，从而为新激光器占据旧激光器光斑腾出空间。

# java - 每次moneynum变量增加100时增加状态textview？

> ID：10661511
> 
> 赞同：0
> 
> 时间：2012-05-19T01:08:55.017
> 
> 标签：java, android

好吧，所以我正在制作一个 android 应用程序，基本上一切正常，期待每次“moneynum”增加 100 时更改状态文本视图的整个部分。这是我的代码：

```
package life.project;

import android.app.Activity;

import android.content.Intent;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.ViewFlipper;
public class LifeActivity extends Activity {
/** Called when the activity is first created. */
ViewFlipper views;
int lifestatus=0;
TextView status;
Button main;
Button work;
TextView timer;
int moneynum=0;
int test=0;
Button GasStation;
Button Walmart;
Button Business;
TextView Moneycount;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    main=(Button) findViewById(R.id.button9);
    views=(ViewFlipper) findViewById(R.id.viewFlipper1);
    GasStation=(Button) findViewById(R.id.button13);
    Walmart=(Button) findViewById(R.id.button23);
    Business=(Button) findViewById(R.id.button33);
    Moneycount=(TextView) findViewById(R.id.textView);
    timer=(TextView) findViewById(R.id.textView3);
    status=(TextView) findViewById(R.id.textView4);
    work=(Button) findViewById(R.id.button1);
    new CountDownTimer(1200000, 60000) {

        public void onTick(long millisUntilFinished) {
            timer.setText("Minutes remaining: " + millisUntilFinished / 60000);
        }

        public void onFinish() {
            onPause();{
            Intent timerends=new Intent("com.life.project.timesup");
            startActivity(timerends);
            finish();
            }
        }
     }.start();
     main.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            views.showPrevious();
        }
    });
     work.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            views.showNext();
        }
    });
        GasStation.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                moneynum+=5;
                Moneycount.setText("Money:$ "+moneynum+" .00");
                if(moneynum==moneynum+100){
                    lifestatus+=1;
                    status.setText("Status: "+lifestatus);
                }
            }
        });
        Walmart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                moneynum+=10;
                Moneycount.setText("Money:$ "+moneynum+" .00");
                if(moneynum==moneynum+100){
                    lifestatus+=1;
                    status.setText("Status: "+lifestatus);
                }
            }
        });
        Business.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                moneynum+=20;
                Moneycount.setText("Money:$ "+moneynum+" .00");
                if(moneynum==moneynum+100){
                    lifestatus+=1;
                    status.setText("Status: "+lifestatus);
                }
            }
        });

}
} 
```

这是它不起作用的部分：

```
 Moneycount.setText("Money:$ "+moneynum+" .00");
                if(moneynum==moneynum+100){
                    lifestatus+=1;
                    status.setText("Status: "+lifestatus);
                } 
```

所以每次moneynum 增加100 我希望lifestatus 增加1 并通过其余的代码。但是当我运行程序时 if 语句没有执行，我认为这是因为我的 if 语句的参数错误..有人能弄清楚我可以使它工作吗？抱歉，如果这令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:23:13.073

```
public .... LifeActivity
{
  int moneySum = 100;
....
....
}

public void moneyCount()
{
 if(moneynum>=moneySum)  // Morethan incase your using looking for when moneynum passes 100 mark not when it equal exactly 100
   {
                    lifestatus+=1;
                    status.setText("Status: "+lifestatus);
                    moneySum+=100;
   }
}

public void onClick(View v) {
                // TODO Auto-generated method stub
                moneynum+=20;
                Moneycount.setText("Money:$ "+moneynum+" .00");
                moneyCount(); 
```

# alignment - 如何对齐D中的结构成员？

> ID：10661518
> 
> 赞同：5
> 
> 时间：2012-05-19T01:10:51.247
> 
> 标签：alignment, d, alignof

我试过这个

```
struct Foo(T)
{
    align(8) void[T.sizeof] data;
} 
```

但

```
static assert(Foo!(int).data.alignof == 8); 
```

失败，告诉我对齐仍然是`1`而不是`8`.

为什么会这样，我该如何解决它，以便它适用于任何 2 的幂（不仅仅是 8）的任意对齐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:49:08.347

浏览DMD源，好像`alignof`没有考虑`align`属性。

这是处理它的地方：

```
... if (ident == Id::__xalignof)
{
    e = new IntegerExp(loc, alignsize(), Type::tsize_t);
} 
```

这会将`.alignof`表达式转换为`size_t`具有 value 的表达式`alignsize()`，所以让我们看一下`alignsize()`静态数组：

```
unsigned TypeSArray::alignsize()
{
    return next->alignsize();
} 
```

在您的情况下，它只是获取元素类型 ( `void`) 的对齐方式。

`void`由 处理`TypeBasic::alignsize()`，它只是转发到`TypeBasic::size(0)`

```
switch (ty)
{
    ...
    case Tvoid:
        size = 1;
        break;
    ...
} 
```

查看其他类型的处理方式`alignof`，看起来根本没有考虑`align`属性，但我可能是错的。手动测试对齐可能是值得的。

# image-processing - 通过分析二进制前景图像的白色像素来计算车辆计数所需的想法

> ID：10661521
> 
> 赞同：2
> 
> 时间：2012-05-19T01:11:00.560
> 
> 标签：image-processing, opencv, pixels, motion-detection

我对图像处理有点陌生，所以我想问你如何为我的问题找到最佳解决方案，而不是帮助代码。我想不出一个好主意，所以想征求你的意见。希望你能帮忙。

我正在开发 OpenCV 下的一个项目，该项目是关于从视频文件或实时摄像头中计算车辆数量。从事此类项目的其他人通常会跟踪移动的物体，然后对其进行计数，但我不想使用它，而是想从不同的角度进行工作；要求用户在视频窗口上设置一个 ROI（感兴趣区域）并仅针对该区域工作（出于某些原因，例如不处理整个帧和一些性能提升），如下所示。（顺便说一句，用户可以设置一个以上的 ROI 并且要求用户通过比例感将 ROI 的高度设置为普通汽车的 2 倍左右）

![1..](../Images/93803a035ac62d805c71aa1f35ac210b.png)

到目前为止，我已经取得了一些基本进展，例如背景更新、形态过滤器、阈值化以及将移动对象作为二值图像获取，如下所示。

![2.](../Images/c46271a15758545ecbacc71b8d2f7791.png)

完成之后，我尝试计算最终阈值前景帧的白色像素，并通过检查总白色像素数来估计它是否是汽车（我通过知道 ROI 的高度通过静态计算设置了下限） . 为了说明，我画了一个示例图形：

![3.](../Images/bfae0465bddf1569fd572f2c25ba37a6.png)

从图中可以看出，很容易计算白色像素并检查它是否按时间绘制曲线并确定是汽车还是噪音之类的东西。

我非常成功，直到两辆车同时通过我的投资回报率。我的算法通过将它们算作一辆车而崩溃，你可以猜到：/我尝试了不同的方法来解决这个问题，就像长车一样，但我到目前为止还没有得到最佳解决方案。

我的问题是：通过这种像素值计数方法是否无法处理这项任务？如果可能，您的建议是什么？我希望您以前也遇到过类似的事情并且可以帮助我。

欢迎所有想法，提前感谢朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:26:34.513

将流量与背景隔离 - 拍摄两张图像，对其中一张运行高通滤波器，将另一张转换为二值图像 - 使用二值图像屏蔽过滤后的图像，您应该能够使用边缘检测来识别屋顶将每辆车作为四边形，然后您应该能够计算出它的相对度量。

然后你有四种情况：

1.  没有四边形 - 没有汽车
2.  大四边形 - 卡车
3.  多个小四边形 - 几辆车
4.  单四边形 - 一辆车

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:23:08.653

回答您的问题“是否可以使用像素计数来做到这一点？” 简短的回答是“不”，因为您引用的原因是：仅对静态图像进行像素计数是不够的。

如果您*仅限*于像素计数，您可以尝试查看像素计数速度（成功帧之间像素计数的变化），当 1 辆汽车、2 辆汽车或卡车经过时，您*可能会*挑选出不同的“速度”形状。

但只是简单的像素计数？不，您还需要形状（几何）信息。

如果您应用任何类型的阈值算法（例如用于背景减法），请不要忘记在光照水平发生变化时（例如白天和黑夜）更新背景。还要考虑当它是部分多云时的悲伤，并且在您的图像上移动时有尖锐的云阴影。

# vb.net - 安装了 IE9 的 Web 浏览器控件默认为 IE7

> ID：10661526
> 
> 赞同：1
> 
> 时间：2012-05-19T01:11:49.107
> 
> 标签：vb.net, visual-studio-2010, internet-explorer-7, browser, internet-explorer-9

我正在 VB.Net 中编写一个使用标准 Web 浏览器控件的应用程序。我带着我的应用程序访问了 YouTube.com，页面上有一条消息说我正在使用 IE7。从那以后，我检查了多个地方，他们都报告说我的应用程序运行 IE7，但我安装了 IE9。我使用标准安装的网络浏览器访问了相同的地方，并且相同的网站说我使用的是 IE9。我假设在我的应用程序中，Web 浏览器控件正在切换到 IE7 兼容模式。我去了 reg 并尝试将我的应用程序添加到 FEATURE_BEHAVIORS 但这不起作用，并且仍然说我使用的是 IE7。当我尝试这个时，我正在从 VS2010 运行我的应用程序，所以我不知道，但这可能是为什么 reg 更改没有效果的问题的一部分。我的主要问题是，

Vb.Net,Vista Home Premium Service Pack 2,Visual Studio 2010 Ultimate

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:44:30.450

实际密钥是 FEATURE_BROWSER_EMULATION 而不是 FEATURE_BEHAVIORS

这是启用此功能的**Inno Setup**脚本

```
[Setup]
AppName=Browser Patch
AppVersion=1.0.0.0
AppID={{D1A4934F-E67B-44CF-A8E2-07A8CFEDFAB3}
AlwaysRestart=false
ChangesEnvironment=true
OutputBaseFilename=Patch
PrivilegesRequired=admin
ShowLanguageDialog=no
DisableWelcomePage=True
DisableReadyPage=True
DisableReadyMemo=True
DisableFinishedPage=True
AllowCancelDuringInstall=False
CreateAppDir=False
DisableProgramGroupPage=yes
Uninstallable=no
SolidCompression=True
Compression=lzma2/ultra
InternalCompressLevel=ultra
CompressionThreads=2
UsePreviousAppDir=yes
ArchitecturesInstallIn64BitMode=x64
VersionInfoVersion=1.0.0.0
VersionInfoCompany=Company Name
VersionInfoDescription=Registry Patch
VersionInfoCopyright=Company Name
VersionInfoProductName=Company Name Registry Patch
VersionInfoProductVersion=1.0.0.0
AppPublisher=Your company name

[Registry]
;Current User
Root: "HKCU"; Subkey: "Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION"; ValueType: dword; ValueName: "yourapp.exe"; ValueData: "0x2711"

;Local Machine
Root: "HKLM"; Subkey: "SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION"; ValueType: dword; ValueName: "yourapp.exe"; ValueData: "0x270f"

;64 Bit Mode
Root: "HKLM"; Subkey: "SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION"; ValueType: dword; ValueName: "yourapp.exe"; ValueData: "0x2711"; Check: IsWin64 
```

# java - 除非使用 System.out.println()，否则程序不会执行

> ID：10661527
> 
> 赞同：-3
> 
> 时间：2012-05-19T01:12:31.307
> 
> 标签：java, awtrobot, system.out

```
public class Main {

    public static void main(String[] args) {
        GUI gui = new GUI();
        GameHandler gameHandler = new GameHandler();
        while (!gui.shouldStop()) {
            while (gui.isRunning()) {
                gameHandler.run();
            }
        }
    }

}

import javax.swing.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

public class GUI extends JFrame implements KeyListener, WindowListener {

    private JLabel label;
    private boolean run = false;
    private boolean stop = false;

    public GUI() {
        label = new JLabel("Not running.");
        JPanel panel = new JPanel();
        panel.setSize(300, 200);
        panel.add(label);
        setSize(300, 200);
        add(panel);
        addKeyListener(this);
        addWindowListener(this);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setResizable(false);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public boolean isRunning() {
        return run;
    }

    public boolean shouldStop() {
        return stop;
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
            String text = label.getText().equalsIgnoreCase("Not running.") ? "Running!" : "Not running.";
            label.setText(text);
            run = !run;
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }

    @Override
    public void windowOpened(WindowEvent e) {
    }

    @Override
    public void windowClosing(WindowEvent e) {
        stop = true;
    }

    @Override
    public void windowClosed(WindowEvent e) {
        stop = true;
    }

    @Override
    public void windowIconified(WindowEvent e) {
    }

    @Override
    public void windowDeiconified(WindowEvent e) {
    }

    @Override
    public void windowActivated(WindowEvent e) {
    }

    @Override
    public void windowDeactivated(WindowEvent e) {
    }
}

import java.awt.*;

public class GameHandler {

    private Elektra elektra;
    private Button popupExitButton;

    public GameHandler() {
        elektra = new Elektra();
        popupExitButton = new Button(Button.EXIT_POPUP_IMAGE_PATH);
    }

    public void run() {
        if (elektra.isAlive()) {
            try {
                new Robot().mouseMove(20, 90);
            } catch (AWTException e) {
                e.printStackTrace();
            }
        } else if (popupExitButton.isVisible()) {
            try {
                new Robot().mouseMove(90, 90);
            } catch (AWTException e) {
                e.printStackTrace();
            }
        }
    }

}

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class Button {

    BufferedImage image;

    public Button(String fileName) {
        try {
            image = ImageIO.read(ClassLoader.getSystemResourceAsStream(fileName));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public boolean isVisible() {
        try {
            return new ImageSearcher(new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()))).containsSubImage(image);
        } catch (AWTException e) {
            e.printStackTrace();
        }
        return false;
    }

    public static final String EXIT_POPUP_IMAGE_PATH = "images/exitPopupButton.png";

}

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class Elektra {

    String imagePath = "images/elektra.png";
    BufferedImage image;

    public Elektra() {
        try {
            image = ImageIO.read(ClassLoader.getSystemResourceAsStream(imagePath));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public boolean isAlive() {
        try {
            return new ImageSearcher(new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()))).containsSubImage(image);
        } catch (AWTException e) {
            e.printStackTrace();
        }
        return false;
    }

} 
```

我的程序应该检查屏幕上的某个图像，如果找到它应该移动鼠标。问题是，除非我记录消息，否则它永远不会起作用。我不知道为什么。

如果我添加 System.out.println("blah"); 在主类的每个 while 循环中，它都有效。但如果我不包括它们，它不会。有人可以解释一下吗...？为什么会发生这种情况对我来说毫无意义。当我使用调试器时也会发生这种情况。它在调试时有效，但在运行时无效。

它何时起作用的示例：

```
public class Main {

    public static void main(String[] args) {
        GUI gui = new GUI();
        GameHandler gameHandler = new GameHandler();
        while (!gui.shouldStop()) {
            System.out.println("..");
            while (gui.isRunning()) {
                System.out.println("..");
                gameHandler.run();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:55:19.823

*这个*MSCCE 的行为是否符合您的预期？（我必须承认我并不完全清楚它应该做什么。似乎和 glug-glug 盒子一样有用。）

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

class Main {

    public static void main(String[] args) {
        GameHandler gameHandler = new GameHandler();
        GUI gui = new GUI(gameHandler);
        gameHandler.run();
    }
}

class GUI extends JFrame implements KeyListener {

    private JLabel label;
    private boolean run = false;
    private boolean stop = false;
    GameHandler gameHandler;

    public GUI(GameHandler gameHandler) {
        this.gameHandler = gameHandler;
        label = new JLabel("Not running.");
        JPanel panel = new JPanel();
        panel.setSize(300, 200);
        panel.add(label);
        setSize(300, 200);
        add(panel);
        addKeyListener(this);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setResizable(false);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public boolean isRunning() {
        return run;
    }

    public boolean shouldStop() {
        return stop;
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
            String text = label.getText().equalsIgnoreCase("Not running.") ? "Running!" : "Not running.";
            label.setText(text);
            run = !run;
            if (run) {
                gameHandler.run();
            } else {
                gameHandler.stop();
            }
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }
}

class GameHandler {

    private Elektra elektra;
    private Button popupExitButton;
    Timer timer;

    public GameHandler() {
        elektra = new Elektra();
        popupExitButton = new Button("Button.EXIT_POPUP_IMAGE_PATH");
        timer = new Timer(400, listener);
    }

    public void run() {
        timer.start();
    }

    public void stop() {
        timer.stop();
    }

    ActionListener listener = new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            System.out.println("elektra.isAlive(): " + elektra.isAlive());
            if (elektra.isAlive()) {
                try {
                    new Robot().mouseMove(20, 90);
                } catch (AWTException e) {
                    e.printStackTrace();
                }
            } else if (popupExitButton.isVisible()) {
                try {
                    new Robot().mouseMove(90, 90);
                } catch (AWTException e) {
                    e.printStackTrace();
                }
            }
        }
    };

}

class Button {

    BufferedImage image;

    public Button(String fileName) {
        try {
            //image = ImageIO.read(ClassLoader.getSystemResourceAsStream(fileName));
            image = new Robot().createScreenCapture(new Rectangle(0,0,200,200));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public boolean isVisible() {
        try {
            return new ImageSearcher(new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()))).containsSubImage(image);
        } catch (AWTException e) {
            e.printStackTrace();
        }
        return false;
    }

}

class Elektra {

    BufferedImage image;

    public Elektra() {
        try {
            image = new Robot().createScreenCapture(new Rectangle(0,0,200,50));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public boolean isAlive() {
        try {
            return new ImageSearcher(
                new Robot().createScreenCapture(
                    new Rectangle(Toolkit.getDefaultToolkit().getScreenSize())))
                    .containsSubImage(image);
        } catch (AWTException e) {
            e.printStackTrace();
        }
        return false;
    }

}

class ImageSearcher {

    BufferedImage mainImage;

    public ImageSearcher(BufferedImage image) {
        mainImage = image;
    }

    public boolean containsSubImage(BufferedImage subImage) {
        int mainWidth = mainImage.getWidth();
        int mainHeight = mainImage.getHeight();
        int width = subImage.getWidth();
        int height = subImage.getHeight();
        for (int xOffset = 0; xOffset < mainWidth && xOffset + width < mainWidth; xOffset++) {
            for (int yOffset = 0; yOffset < mainHeight && yOffset + height < mainHeight; yOffset++) {
                if (picturesEquivalent(subImage, xOffset, yOffset)) {
                    return true;
                }
            }
        }
        return false;
    }

    private boolean picturesEquivalent(BufferedImage subImage, int xOffset, int yOffset) {
        int mainWidth = mainImage.getWidth();
        int mainHeight = mainImage.getHeight();
        int width = subImage.getWidth();
        int height = subImage.getHeight();
        for (int x = 0; x < width && xOffset + x < mainWidth; x++) {
            for (int y = 0; y < height && yOffset + y < mainHeight; y++) {
                int mainRGB = mainImage.getRGB(xOffset + x, yOffset + y);
                int subRGB = subImage.getRGB(x, y);
                if (mainRGB != subRGB) {
                    return false;
                }
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:27:22.637

我在互联网上找不到任何东西来专门支持这一点，但我认为你的打印语句减慢了程序的速度，足以让一切以正确的顺序运行。Swing 请求从单个线程触发，因此事件很容易被捆绑，正如 Hover 所说，特别是如果您有很多输入事件，例如 KeyEvents 等。要解决此问题，您可以尝试 Thread.sleep，但最好将程序重写为不使用该 while 循环或不使用 swing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:40:41.650

使您的应用程序正确地多线程。

尽可能避免在**事件调度线程中工作（google this！）。**它应该只用于对 UI 进行更改。永远不要在其中运行等待循环，你甚至可能会死锁你的程序。

花更多的时间来规划您的应用程序何时工作以及何时（以及如何）等待事情发生。您不希望您的应用程序浪费 100% 的 CPU。

# apache - 如何从 www.domain.com 重定向到 domain.com？

> ID：10661528
> 
> 赞同：6
> 
> 时间：2012-05-19T01:12:55.003
> 
> 标签：apache

我在`httpd.conf`重定向中使用以下代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

但是，它最终重定向到`www.domain.com/domain.com//domain.com//domain.com`

我希望以下所有 URL 重定向到 domain.com：

```
http://domain.com
http://www.domain.com
www.domain.com 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T01:23:21.233

这应该这样做。问题是它看起来很像你已经拥有的。当您`http://domain.com`在浏览器中输入时，它是否有效？还是重定向到其他地方？

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteRule ^(.*)$ http://domain.com$1 [R=permanent,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:23:04.953

[http://www.webweaver.nu/html-tips/web-redirection.shtml](http://www.webweaver.nu/html-tips/web-redirection.shtml)建议

```
Options +FollowSymLinks 
RewriteEngine on
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^example\.com
RewriteRule (.*) http://example.com/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-28T10:41:37.950

```
RewriteEngine On

# Redirect ANY non-www request to https and www
RewriteCond %{HTTP_HOST} !^(www.\.domain\.com)?$

RewriteRule (.*) https://www.domain.com/$1 [R=301,L]

# Redirect ANY HTTP request to https and www
RewriteCond %{SERVER_PORT} !443

RewriteRule (.*) https://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-07T09:59:04.823

对于 SSL 虚拟主机，请使用以下内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.yourdomain\.com
RewriteRule ^(.*)$ https://yourdomain.com$1 [R=301,L] 
```

下面的完整示例：

```
<VirtualHost *:443>
    ServerAdmin youname@yourdomain.com
    DocumentRoot "/var/www/html/yourdomain"
    ServerName yourdomain.com
    ServerAlias  www.yourdomain.com *.yourdomain.com
    ErrorLog "logs/yourdomain-error_log"
    CustomLog "logs/yourdomain-access_log" common
    ErrorDocument 404 /index.php
    <Directory "/var/www/html/yourdomain">
        Options FollowSymLinks
        AllowOverride All
        Order deny,allow
        Allow from all
    </Directory>
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/yourdomain/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/yourdomain/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/yourdomain/chain.pem
    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^www\.yourdomain\.com
    RewriteRule ^(.*)$ https://yourdomain.com$1 [R=301,L]
</VirtualHost> 
```

# android - 判断Activity是关闭还是重绘

> ID：10661537
> 
> 赞同：1
> 
> 时间：2012-05-19T01:15:21.527
> 
> 标签：android

在 Android SDK 中使用 onPause 方法时，只要重新绘制 Activity（例如旋转设备），就会运行该代码。有没有办法检测 Activity 是否实际暂停（例如弹出一个新窗口）或者 Activity 是否实际上只是重新绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:36:10.190

实际上，如果您查看活动的生命周期，当设备旋转时，活动会重新启动，因此之后`onPause()`，活动会经历完整的重新启动周期（`onStop()`并且`onRestart()`也被调用），因此在这种情况下您可以设置一些值取决于调用了哪些函数，或检查设备的方向。

此外，当活动进入后台时，`onPause()`被调用，当活动不再对用户可见时，`onStop()`被调用，这是由于特定原因，应用程序可以通过设置一些变量来检查。为了完全理解，研究[活动生命周期](http://grail.cba.csuohio.edu/~matos/notes/cis-493/lecture-notes/Android-Chapter03-Life-Cycle.pdf)（[备用链接](http://developer.android.com/reference/android/app/Activity.html)）

但是为什么你需要知道活动发生了什么？通过覆盖适当的函数并提供适当的布局资源，您不需要知道大多数情况下发生了什么。

对于方向，您也可以使用`getRotation`方法获取方向。

# c# - 使用 .NET 构建 Access 连接字符串以查找当前目录>

> ID：10661543
> 
> 赞同：0
> 
> 时间：2012-05-19T01:16:50.817
> 
> 标签：c#, database, connection-string

我有一行代码可以构建到 Access 数据库的连接字符串。

```
private static string ConnectionString = 
            @"Provider=Microsoft.Jet.OLEDB.4.0;" + 
            @"Data source= C:\Documents and Settings\username\My Documents\AccessFile.mdb"; 
```

我怎样才能使用这些代码中的任何一个：`Path.GetDirectoryName()`或`System.Environment.CurrentDirectory`？

```
System.IO.Path.GetDirectoryName(System.Environment.CurrentDirectory) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T01:39:50.820

目前尚不清楚您要在字符串中的哪个位置插入它，但我假设您要替换整个目录路径。为此，您*可以*使用以下方法将字符串连接在一起`+`：

```
private static string ConnectionString = 
    @"Provider=Microsoft.Jet.OLEDB.4.0;Data source=" + 
    System.IO.Path.GetDirectoryName(System.Environment.CurrentDirectory) +
    @"\AccessFile.mdb"; 
```

或者（可能更好）将使用`string.Format`：

```
private static string ConnectionString = string.Format(
    @"Provider=Microsoft.Jet.OLEDB.4.0;Data source={0}\AccessFile.mdb", 
    System.IO.Path.GetDirectoryName(System.Environment.CurrentDirectory)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:41:29.867

尝试使用

```
using System.Linq; 
using System.Text; 
using System.Data; 
using System.Data.OleDb;

namespace DAL 
{
    public class OLEDBhelper
    {
        private static string ConnectionString = 
            @"Provider=Microsoft.Jet.OLEDB.4.0;" + 
            @"Data source= " + System.IO.Path.GetDirectoryName(System.Environment.CurrentDirectory) + "\AccessFile.mdb";
    }
} 
```

# perl - 在 perl 中使用 TokeParser 从自包含标签中提取值

> ID：10661544
> 
> 赞同：1
> 
> 时间：2012-05-19T01:17:51.083
> 
> 标签：perl, html-parsing

我正在尝试做的事情听起来很容易，但不知何故我现在已经为此苦苦挣扎了几个小时，所以请指出我正确的方向：

我有一些看起来像这样的html：

```
<img src="random.jpg" class="someClass" id="someId" alt="test" /> 
```

目前我无法将此与此代码匹配：

```
my $tp = HTML::TokeParser->new(\$rawHTML) || die "Cant't open: $!";
while (my $token = $tp->get_token){
  my $ttype = shift @{ $token };
  if($ttype eq "S"){
    my($tag, $attr, $attrseq, $rawtxt) = @{ $token };
    if ($tag eq "img"){
      if(($attr->{'class'} eq "someClass")&&($attr->{'id'}eq "someId")){
        my $alttext = $attr->{'alt'};
        print "AltText: $alttext";
        ...
        }
      }        
    }
  }
} 
```

似乎 TokeParser 只是忽略了自包含标签 <.../>。为什么？我已经为此寻找了长期而艰苦的解决方案，并且非常感谢任何帮助以使其与 TokeParser 或任何其他 Perl 模块一起使用...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:02:17.450

它不会忽略任何东西：

```
#!/usr/bin/env perl

use strict; use warnings;
use HTML::TokeParser;
use YAML;

my $html = q{<img src="random.jpg" class="someClass" id="someId" alt="test"/>};

my $parser = HTML::TokeParser->new( \$html );

while (my $token = $parser->get_token) {
    print Dump $token;
} 
```

输出：

```
---
-S
- 图像
- /：/
  alt：测试
  类：someClass
  id: 一些Id
  来源：随机.jpg
-
  - 源代码
  - 班级
  - ID
  - 替代
  - /
- '<img src="random.jpg" class="someClass" id="someId" alt="test"/>'
```

顺便说一句，[HTML::TokeParser::Simple](http://search.cpan.org/perldoc/HTML%3a%3aTokeParser%3a%3aSimple)为您提供了更好的界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:02:08.487

看起来您有兴趣在`"test"`html 片段中捕获替代文本，给定`someClass`和`someId`. 如果是这样，请尝试以下操作：

```
use Modern::Perl;
use Web::Query qw();

my $w = Web::Query->new_from_html(<<'HTML');
<img src="random.jpg" class="someClass" id="someId" alt="test" />
HTML

my @altText = $w->find('img[class="someClass"][id="someId"]')->attr('alt');

say @altText; 
```

输出：

```
test 
```

# wpf - 如何防止 WPF 触发器在退出时重置原始值

> ID：10661545
> 
> 赞同：2
> 
> 时间：2012-05-19T01:18:14.047
> 
> 标签：wpf, triggers

我使用触发器有一个鼠标悬停选择列表视图：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="IsSelected" Value="True" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

但是，当鼠标移出时，触发器会`IsSelected`重新设置为 false，这在此处是不需要的。有没有办法让触发器只在输入时设置而不是在退出时重置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:43:06.890

这就是[EventTriggers](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.aspx)的用途：

> 与 Trigger 不同，EventTrigger 没有状态终止的概念，因此一旦引发事件的条件不再为真，该操作将不会被撤消。

以您为例：

```
<EventTrigger RoutedEvent="MouseEnter">
    <BeginStoryboard>
        <Storyboard>
            <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsSelected">
                <DiscreteBooleanKeyFrame KeyTime="0" Value="True" />
            </BooleanAnimationUsingKeyFrames>
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

# java - 无法让这个 java 代码运行得更快

> ID：10661554
> 
> 赞同：3
> 
> 时间：2012-05-19T01:19:34.520
> 
> 标签：java, performance, readline

我参加了一个在线评委页面，在那里我解决了一个问题，但我无法让我的程序及时运行。代码如下：

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
Set l = new HashSet();
String line;
String[] numStr;
 while(true){
  line = in.readLine();      
  numStr = line.split("\\s");      
  int a = Integer.parseInt(numStr[0]);
  if(a == 0){
     System.exit(0);
  }
  int n = 0;
  int b = Integer.parseInt(numStr[1]);
  l.clear();
  for(int i=0;i<a;i++){
    l.add(in.readLine());
  }
  for(int i=0;i<b;i++){
    if(l.contains(in.readLine())){
      n++;
    }
  }
  System.out.println(n); 
```

我到了一个地步，对于 200 万个项目的测试用例（numStr = "1000000 1000000"），我让它在 1.5 秒内运行，但显然这对于​​测试用例来说还不够（它说 3000 毫秒）。现在我不知道如何让它更快，非常感谢任何帮助！

问题：[http ://coj.uci.cu/24h/problem.xhtml?abb=1438](http://coj.uci.cu/24h/problem.xhtml?abb=1438)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T01:27:28.207

输入规范的“升序”部分是关键：由于两个列表都是预先排序的，您可以将第一个列表读入数组，然后使用二进制搜索从最后一项的位置到末尾数组来决定是否匹配。事实上，即使是第一个数组的线性搜索也可能有效，因为您最多需要遍历它一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:46:08.743

假设第一行输入是`1000000 0`; 您的程序将读取数百万个值并将它们输入到散列中，只是没有要查找的值，因此输出保证为 0。这显然会花费比必要更长的时间（您需要阅读它们，但是不要将它们存储在哈希中）。

此外，您只需检查第一个值为 0 即可终止；按照规范，`0 1000000`应该产生 0 的输出，但你的程序会终止。也许法官没有对此进行检查，但这样做是合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T02:27:30.267

由于数据已排序，因此非常适合 Merge 处理

即处理的逻辑是

```
Read Jacks records into array

While (More of jacks record to process)
  and (More of Jills record to process)  {

      if ( jacks_Record < Jills_Record)
         Jacks_Array_Index += 1;
      else if ( jacks_Record > Jills_Record)
         Read the next Jills_Record from the file
      else
         Match processing
} 
```

只有一次通过文件，没有搜索。在某些情况下，二分搜索可能会更快

此外，可能值得在 BufferedReader 上指定一个大缓冲区

# asp.net-mvc - 从控制器返回 html 字符串并在视图中显示

> ID：10661561
> 
> 赞同：11
> 
> 时间：2012-05-19T01:21:47.313
> 
> 标签：asp.net-mvc, asp.net-mvc-3

如何返回具有包含`<li>`元素的字符串属性的模型并将其显示在视图中？如果我只写@Model.Messages 它会显示所有字符串.. 我需要它以 html 格式。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-23T18:02:58.017

您可以使用`Content`带有 Content-Type 的方法`text/html`直接返回 HTML，而无需`Html.Raw`.

```
public ActionResult MyHtmlView() {
    return Content("<html><body>Ahoy.</body></html>", "text/html")
} 
```

您可以传递任何您想要的 Content-Type，例如`text/xml`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-19T01:30:43.670

你没有说你正在使用哪个渲染引擎：

MVC3：
@Html.Raw（模型.描述）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-19T01:31:48.490

用于`Server.HtmlEncode()`发送 html 到视图，然后使用`Server.HtmlDecode()`获取 html 以显示在视图上。

然后你可以使用`@Html.Raw(Server.HtmlDecode(str)).`

尝试这个：

```
<div class='content'>     
   @Html.Raw(HttpUtility.HtmlDecode(Model.Message)); 
</div> 
```

参考： [用剃刀显示编码的 html](https://stackoverflow.com/questions/5029264/display-encoded-html-with-razor)

# c# - 使用 datareader.GetSchemaTable 创建 SQL Server CE 表

> ID：10661566
> 
> 赞同：0
> 
> 时间：2012-05-19T01:24:02.030
> 
> 标签：c#, .net, oracle, sql-server-ce, sql-server-2008-r2

我正在使用`IDataReader`.Net 对 Oracle 和 SQL Server 数据库运行查询...有没有办法使用[GetSchemaTable](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.getschematable)的结果*轻松*创建 SQL Server CE 4 表？在我看来，这似乎是某人应该已经发明的东西之一，但我似乎找不到它。

我在 Codeplex 上找到[了这个项目](http://dbschemareader.codeplex.com/)，这几乎正是我所需要的，但并不完全是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:41:55.280

您可以使用我的 SQL Compact 脚本 API，允许您基于 SQL Compaxct 架构生成任何类型的 SQL：http: [//exportsqlce.codeplex.com](http://exportsqlce.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:41:08.543

要在不提供任何`GetSchema`功能的数据库中获取表的 Schema，我们通常运行 Select 命令。

```
"Select top 1 * from mytablename" 
```

使用此命令填充 DataTable。

如果表为空，这将为您提供单行或可能不是，但将提供相关表的架构。

当我被要求在 SQLite 中这样做时，我遇到了同样的问题，我做了上面提到的。

# javascript - jQuery jPlayer 更改媒体不起作用

> ID：10661567
> 
> 赞同：6
> 
> 时间：2012-05-19T01:24:07.997
> 
> 标签：javascript, jquery, jplayer

我正在尝试使用开发人员指南更改 jQuery 上的歌曲，我想出了这个功能：

```
<script type="text/javascript">
$(document).ready(function(){
    $('.embedinfo').click(function() {
        $("#jquery_jplayer_1").jPlayer( "clearMedia" );
        $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                mp3:"/audio/<?php echo $audioarray[0]['audio']; ?>"

            }).jPlayer("<?php if(empty($auto)){ echo "pause"; }     elseif($auto==1){ echo "play"; } ?>");
        },
        swfPath: "/js/Jplayer.swf",
        supplied: "mp3",
        wmode: "window",
        solution:"flash,html",
        volume:"1"
        });
    }); 
```

});

该`setMedia`功能实际上与我最初用于设置音乐的功能相同（确实有效），但是这个通过点击更改音乐的功能不起作用。

该`clearMedia`功能正在运行，只是设置不可用。为什么它不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T02:35:21.410

我找到了解决方案

而不是使用

```
$("#jquery_jplayer_1").jPlayer( "clearMedia" ); 
```

删除媒体，使用

```
$("#jquery_jplayer_1").jPlayer( "destroy" ); 
```

它取消绑定 .jPlayer 的所有实例，允许从头开始更新媒体。

# ruby-on-rails - 为什么在我的 Ruby on Rails 应用程序中访问用户页面时不断收到路由错误？

> ID：10661569
> 
> 赞同：1
> 
> 时间：2012-05-19T01:24:37.520
> 
> 标签：ruby-on-rails, routing

我正在尝试对来自 michael hartl railstutorial的[https://github.com/railstutorial/sample_app_2nd_ed中的微博添加评论。](https://github.com/railstutorial/sample_app_2nd_ed)

如果用户没有发微博，似乎没有问题，我可以访问他们的页面。但是，如果他们有，则会出现路由错误。这是我的问题。

这是我的 routes.rb 文件中的相关区域。

```
resources :microposts, only: [:create, :destroy] do
    resources :comments, 
  end 
```

这是我尝试访问用户页面 (localhost:3000/users/2) 时遇到的错误：

```
Started GET "/users/2" for 127.0.0.1 at 2012-05-21 21:32:47 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "2"]]
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'iGivWVhrOQL2tp1MOOJwgA' LIMIT 1
  Rendered users/_follow_form.html.erb (0.8ms)
   (0.2ms)  SELECT COUNT(*) FROM "microposts" WHERE "microposts"."user_id" = 2
  CACHE (0.0ms)  SELECT COUNT(*) FROM "microposts" WHERE "microposts"."user_id" = 2
  Micropost Load (0.1ms)  SELECT "microposts".* FROM "microposts" WHERE "microposts"."user_id" = 2 ORDER BY microposts.created_at DESC LIMIT 30 OFFSET 0
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  Rendered microposts/_micropost.html.erb (12.2ms)
  Rendered users/show.html.erb within layouts/application (53.1ms)
Completed 500 Internal Server Error in 69ms

ActionController::RoutingError (No route matches {:controller=>"comments", :format=>nil, :micropost_id=>#<Micropost id: nil, content: nil, user_id: nil, created_at: nil, updated_at: nil>}):
  app/views/microposts/_micropost.html.erb:23:in `_app_views_microposts__micropost_html_erb___1795431923022101738_32372620'
  app/views/users/show.html.erb:16:in `_app_views_users_show_html_erb__1221738286899740817_32260600'

  Rendered /home/alex/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms) 
```

这是 rake grep|comments 的输出

```
user_comments GET    /users/:user_id/comments(.:format)                    comments#index
                       POST   /users/:user_id/comments(.:format)                    comments#create
      new_user_comment GET    /users/:user_id/comments/new(.:format)                comments#new
     edit_user_comment GET    /users/:user_id/comments/:id/edit(.:format)           comments#edit
          user_comment GET    /users/:user_id/comments/:id(.:format)                comments#show
                       PUT    /users/:user_id/comments/:id(.:format)                comments#update
                       DELETE /users/:user_id/comments/:id(.:format)                comments#destroy
    micropost_comments GET    /microposts/:micropost_id/comments(.:format)          comments#index
                       POST   /microposts/:micropost_id/comments(.:format)          comments#create
 new_micropost_comment GET    /microposts/:micropost_id/comments/new(.:format)      comments#new
edit_micropost_comment GET    /microposts/:micropost_id/comments/:id/edit(.:format) comments#edit
     micropost_comment GET    /microposts/:micropost_id/comments/:id(.:format)      comments#show
                       PUT    /microposts/:micropost_id/comments/:id(.:format)      comments#update
                       DELETE /microposts/:micropost_id/comments/:id(.:format) 
```

这是我的comments_controller.rb

```
class CommentsController < ApplicationController 
  def create
    @micropost = Micropost.find(params[:micropost_id]) 
    @comment = @micropost.comments.build(params[:comment]) 
    @comment.user = current_user

    if @comment.save 
      redirect_to @micropost
    else 
      redirect_to @micropost
    end 
  end 

  def show
    @comment = Comment.find(params[:id])
  end

  def new 

  end

  def destroy
    @comment = Comment.find(params[:id])
    @comment.destroy
    redirect_back_or root_path
  end
end 
```

# python - 正则表达式帮助 Python？

> ID：10661573
> 
> 赞同：2
> 
> 时间：2012-05-19T01:25:11.143
> 
> 标签：python, regex, string

我有这个代码：

```
import re
#TEST CASES
match_dict = ['hello(here)',
             'Hello   (Hi)',
             "'dfsfds Hello (Hi) fdfd' Hello (Yes)",
             "Hello ('hi)xx')",
             "Hello  ('Hi')"]
for s in match_dict:
    print "INPUT: %s" % s
    m = re.sub(r"(?<!\()'[^']+'", '', s, flags=re.M)
    paren_quotes = re.findall(r"Hello\s*\('([^']+)'\)", m, flags=re.M)
    output = paren_quotes if paren_quotes else []
    m = re.sub(r"Hello\s*\('[^']+'\)", '', m, flags=re.M)
    paren_matches = re.findall(r"Hello\s*\(([^)]+)\)", m, flags=re.M)
    if paren_matches:
        output.extend(paren_matches)
    print 'OUTPUT: %s\n' % output 
```

此代码用于输出单词“Hello”之后括号中的所有内容，

```
Hello (Hi)  would give 'Hi' 
```

我的问题是当我输入时：

```
Hello('Hi') 
```

...`'Hi'` 当我想要它返回时它仍然返回`"'Hi'"`

有谁知道我该如何修复此代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T01:56:14.907

只需使用非贪婪匹配：

```
matches = re.search(r'^Hello\s*\((.*?)\)', text) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T02:03:47.943

```
>>> import re
>>> p = re.compile(r'Hello\s*\((.*?)\)', re.M)
>>> m = p.findall("Hello  ('Hi')")
>>> print m
["'Hi'"]
>>> m = p.findall("'dfsfds Hello (Hi) fdfd' Hello (Yes)")
>>> print m
['Hi', 'Yes'] 
```

# ruby-on-rails-3 - 如何将附加数据添加到 has_and_belongs_to_many 关系的连接表中？

> ID：10661575
> 
> 赞同：1
> 
> 时间：2012-05-19T01:25:53.863
> 
> 标签：ruby-on-rails-3, has-and-belongs-to-many

我有两个表`users`，`providers`并且有 has_and_belongs_to_many 关系。除了和之外，连接表`providers_users`还有一个额外的列。`uid``user_id``provider_id`

如何添加由和组成`users.id`的新记录？我可以添加，但不知道如何添加.`providers.id``uid``users.id``providers.id``uid`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T23:31:48.237

你不能。如果要给join table添加属性，需要make成模型，然后在relationships上使用:through来达到同样的效果（这其实是我最喜欢的habtm关系实现方式）：

```
class ProviderUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :provider

  validates_presence_of :uid
end

class User < ActiveRecord::Base
  has_many :provider_users
  has_many :providers, :through=>:provider_users
end

class Provider < ActiveRecord::Base
  has_many :provider_users
  has_many :users, :through=>:provider_users
end 
```

# python - 如何防止部分任意代码在 Python 中被编译？

> ID：10661578
> 
> 赞同：1
> 
> 时间：2012-05-19T01:27:05.200
> 
> 标签：python, optimization, assert

根据[python 文档](http://docs.python.org/reference/simple_stmts.html?highlight=assert) `assert`，如果使用`-O`密钥编译，代码中不包含语句。我想知道是否可以用任意一段代码来模拟这种行为？

例如，如果我有一个在执行期间被大量调用的记录器，我可以从消除`if DEBUG: ...`与它们相关联的所有代码的语句中受益。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:01:00.110

由于 Python 是一种解释型语言，它不能在自己的代码中跳跃。但是您不需要“特殊工具”来剥离部分代码——使用 Python 吧！

这是一个最小的例子。您可能希望将`strip_debug()`函数放入您的`__init__.py`并让它处理模块列表。此外，您可能想要添加一些额外的检查，以确认用户是否真的想要*修改*代码，而不仅仅是*运行*它。可能，使用命令行选项`--purge`会很好。然后，您可以复制您的库并运行一次

```
python __init__.py --purge 
```

在您发布库之前或将其留给您的用户这样做。

```
#!/usr/bin/env python3.2

# BEGIN DEBUG
def _strip_debug():
    """
    Generates an optimized version of its own code stripping off all debugging
    code.

    """
    import os
    import re
    import shutil
    import sys
    import tempfile
    begin_debug = re.compile("^\s*#+\s*BEGIN\s+DEBUG\s*$")
    end_debug = re.compile("^\s*#+\s*END\s+DEBUG\s*$")
    tmp = None
    debug = False
    try:
        tmp = tempfile.NamedTemporaryFile(mode="w", suffix=".py", delete=False)
        with open(sys.argv[0]) as my_code:
            for line in my_code:
                if begin_debug.match(line):
                    debug = True
                    continue
                elif end_debug.match(line):
                    debug = False
                    continue
                else:
                    if not debug:
                        tmp.write(line)
        tmp.close()
        shutil.copy(tmp.name, sys.argv[0])
    finally:
        os.unlink(tmp.name)
# END DEBUG    

def foo(bar, baz):
    """
    Do something weired with bar and baz.

    """
    # BEGIN DEBUG
    if DEBUG:
        print("bar = {}".format(bar))
        print("baz = {}".format(baz))
    # END DEBUG
    return bar + baz

# BEGIN DEBUG
if __name__ == "__main__":
    _strip_debug()
# END DEBUG 
```

执行后，该文件将只包含函数的功能代码`foo()`。我用了特别评论

```
# BEGIN DEBUG 
```

和

```
# END DEBUG 
```

在这个例子中，它允许剥离任意代码，但如果它只是为了删除

```
if DEBUG:
    # stuff 
```

部分，也很容易检测到那些没有任何附加注释的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:31:20.693

你为什么不把你不想要#符号的代码注释掉呢？

# php - 菜单显示不正确

> ID：10661579
> 
> 赞同：1
> 
> 时间：2012-05-19T01:27:08.573
> 
> 标签：php, jquery, html, css

我正在研究**premiumepress - RealtorPress 儿童主题**，目前菜单有问题。

我实际上使用 PremiumPress PHP 代码来显示菜单

```
<?php echo $ThemeDesign->LAY_NAVIGATION(); ?> 
```

我将此代码包装在我的 CSS 下，例如：

```
<ul class="sf-menu">
    <?php echo $ThemeDesign->LAY_NAVIGATION(); ?> 
</ul> <!-- END .sf-menu --> 
```

我在菜单中使用**Superfish**，但我无法理解为什么它不能正常工作，因为我正确使用了这个插件。

```
<script type="text/javascript">
    jQuery(document).ready(function() { 
        jQuery('ul.sf-menu').superfish({
            delay:       200, 
            animation:   {opacity:'show',height:'show'},
            speed:       'fast',
            autoArrows:  false,
            dropShadows: false
        });
    });     
</script> 
```

但是当我看到主页时......我发现菜单里面有一些不相关**的div ......**

```
<div class="dropdown_1column"> <div class="col_1 firstcolumn"> 
```

请检查真正的链接以获得想法..我在说什么：

[http://www.ruralpropertyagents.com/](http://www.ruralpropertyagents.com/)

所以请帮我摆脱这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:00:15.400

您的预感是正确的 - 删除这些`div`元素，您将得到修复。我使用 fiddler 将它们从标记中删除，它立即解决了问题。它们目前包装了所有嵌套的无序列表。

全部纠正后，结构应类似于以下内容：

```
<ul class="sf-menu">
  <li><a href="...">Home</a></li>
  <li><a href="...">Commercial Sales</a>
      <ul>
        <li><a href="...">Industrial Units for Sale</a></li>
        <li><a href="...">Office Blocks for Sale</a></li>
      </ul>
  </li>
</ul> 
```

# machine-learning - 关于估计训练值和调整权重的特定机器学习查询

> ID：10661581
> 
> 赞同：4
> 
> 时间：2012-05-19T01:27:24.293
> 
> 标签：machine-learning, artificial-intelligence, information-retrieval, training-data

嘿，我对机器学习领域真的很陌生，最近开始阅读 Tom Mitchell 的《机器学习》一书，我被困在第一章的一个特定部分，他谈到了估计训练值和调整权重。对估计训练值的概念的解释会很好，但我知道解释所有这些并不容易，所以如果有人能够将我指向资源（讲座视频或简单的讲座幻灯片，或一些文本片段）谈论估计训练数据等的概念。

再次抱歉，我无法就我所问的问题提供更多信息。如果有人读过这本书并且在理解这些部分中描述的概念时遇到同样的问题，那么这本书的部分是“Tom Mitchell 的机器学习”中的 1.2.4.1 和 1.2.4.2。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T02:48:20.563

啊。经典教科书。我的副本有点过时，但看起来我的第 1.2.4 节处理的主题与您的相同。

首先，这是一个介绍性的章节，试图笼统而不是吓人，但结果它也很抽象，有点模糊。在这一点上，我不会太担心你不理解这些概念，更有可能是你想多了。后面的章节将充实现在似乎不清楚的事情。

*在这种情况下，价值*应该被理解为对某个状态或实例的*质量*或性能的衡量，而不是一般意义上的“价值”。以他的跳棋为例，具有高价值的*状态*是对计算机玩家有利/有利的棋盘情况。

这里的主要思想是，如果您可以为每个可能遇到的状态提供一个*值*，并且有一组规则定义可以通过执行哪些操作从当前状态到达哪些状态，那么您可以做出通知决定采取何种行动。

但是为状态分配值对于游戏的最终状态来说只是一项微不足道的任务。在最终状态获得的价值通常称为*奖励*。目标当然是最大化奖励。*估计训练值*是指根据您稍后在游戏中获得的结果将猜测值分配给中间状态的过程。

因此，在玩许多训练游戏时，您会跟踪您遇到的状态，如果您发现某个状态 X 导致状态 Y，您可以根据当前对 X 的估计值稍微改变您对 X 的估计值和Y 的当前估计值。这就是“估计训练权重”的全部内容。通过反复训练，模型变得有经验，估计应该收敛到可靠的值。它将开始避免导致失败的举动，而偏爱导致胜利的举动。有许多不同的方式来进行这种更新，并且有许多不同的方式来表示游戏状态，但这就是本书其余部分的内容。

我希望这有帮助！

# ruby-on-rails - rails ActiveRecord 在控制台中找到

> ID：10661586
> 
> 赞同：7
> 
> 时间：2012-05-19T01:28:14.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

当我在 Rails 3.2 控制台中时，我可以做到这一点：

```
p = Person.last
p.last_name 
```

它打印姓氏。

但是当我尝试通过 找到它时`id`，它能够找到单个记录并将其存储在我的变量`p`中，但我无法打印该`last_name` 列。例如：

```
p = Person.where(id: 34).limit(1) 
```

在此处打印`p`显示所有列，但`p.last_name`这样说

```
NoMethodError: undefined method `last_name' for
#<ActiveRecord::Relation:0x000000055f8840> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T01:38:17.833

一个`where`查询将返回一个[`ActiveRecord::Relation`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)，它的行为类似于一个数组，即使您限制了返回记录的数量。

如果您改为将查询更改为：

```
p = Person.where(id: 34).first 
```

它将按您的意愿工作，并且 arel 知道自动将查询限制为单个结果，因此您不必显式指定`limit(1)`.

您也可以更改为

```
p = Person.find(34) # Throws an ActiveRecord::RecordNotFound exception if Person with id 34 does not exist 
```

或者

```
p = Person.find_by_id(34) # Returns nil if Person with id 34 does not exist. Does *not* throw an exception. 
```

它将按预期返回一条记录。

编辑：where 查询返回 ActiveRecord::Relation，因为注释中提到的[@mu 太短](https://stackoverflow.com/users/479863/mu-is-too-short)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T02:25:41.283

这将返回活动记录对象的集合：

```
p = Person.where(id: 34).limit(1) 
```

但是只有一个 id = 34，所以它是 1 的集合。

这样做的方法是：

```
p = Person.where(id: 34).limit(1).first 
```

或更好：

```
p = Person.where(id: 34).first 
```

或者，甚至更好：

```
p = Person.find(34) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T02:16:28.487

你可能真正在寻找的是

```
@person = Person.find(34)
@person.last_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T08:18:56.320

在您的情况下， Person 是一个类，它是从 ApplicationRecord 继承的

```
p = Person.where(id:10).limit(1) 
```

它只返回查询的结果而不是对象。

您可以使用

```
p.class # => It reurns Nilclass which means its not at all a class 
```

所以你不能在 p 上使用 p.last_name 或 p.first_name。

# jquery - jQuery 表单提交，带有表单验证，在提交之前发送电子邮件

> ID：10661590
> 
> 赞同：1
> 
> 时间：2012-05-19T01:30:30.107
> 
> 标签：jquery, jquery-validate, jquery-forms-plugin

想知道是否有人可以帮助我解决我遇到的这个小问题。我正在使用 2 个带有 jQ​​uery 的插件。

1.  [http://jquery.malsup.com](http://jquery.malsup.com)
2.  [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我想做的是找出是否有人提交了我的表格，给我发一封电子邮件（或数据库条目），看看他们是否进入下一步。

这是我到目前为止的代码，由于某种原因，我无法让 beforeSubmit 正常工作，它一定只是对我所拥有的内容的简单误用。

任何帮助是极大的赞赏。

我的代码：

```
$(".validate2").validate({
        beforeSubmit: function() {
                $('input[type=submit]').attr("disabled", true);
                $(".formResponse").show();
                $(".formResponse").append("<img src='../images/icons/ajax-loader.gif' />");

                $.ajax({
                    url: "../classes/class.jQueryCallbacks.php?a=notifySignUpButton",
                    data: { 'name': $(".firstName").val() }
                });

        },
        submitHandler: function(form) 
        {
            form.submit();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:41:48.477

```
$(document).ready(function () {
            $("#formId").submit(function () {
                if ($(this).valid()) {
                    $('input[type=submit]').attr("disabled", true);
                    $(".formResponse").show();
                    $(".formResponse").append("<img src='../images/icons/ajax-loader.gif' />");

                    $.ajax({
                        url: "../classes/class.jQueryCallbacks.php?a=notifySignUpButton",
                        data: { 'name': $(".firstName").val() }
                    });

                    return true;
                }
                else {
                    return false;
                }
            });
        }); 
```

# ios - CGContextDrawLinearGradient 与 cagradientlayer？

> ID：10661594
> 
> 赞同：2
> 
> 时间：2012-05-19T01:31:07.317
> 
> 标签：ios, performance, core-graphics, calayer, drawrect

在 UIView 的 drawRect 方法中调用的 CGContextDrawLinearGradient 和 CAGradientLayer 有什么区别？他们如何比较性能？创建渐变视图的最佳实践是什么？我真的很想很好地解释它们之间的关系以及为什么一个比另一个性能更好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:07:08.837

如果您只想要一个带有渐变的盒子，那么性能并不是真正的问题。您应该使用最简单的方法来满足您的特定要求。

添加 CAGradientLayer 意味着您不必创建视图子类，只需将图层添加到现有视图即可。设置也稍微容易一些，因为您无需担心帧大小或任何 c 风格的核心图形功能。您也可以毫不费力地添加圆角、阴影等。

但是，如果您想要多个渐变视图，子类可能是一个好主意，因此您可以创建新的。

因此，不幸的是，您的问题没有明确的答案。两者都不是绝对更好。如果您关心性能，请同时实施并使用仪器进行测试。

# javascript - 了解 javascript THIS 关键字

> ID：10661597
> 
> 赞同：1
> 
> 时间：2012-05-19T01:31:40.530
> 
> 标签：javascript

我试图通过搜索网络找到这个问题的答案，但没有任何运气。大多数信息比我预期的要复杂得多，而且没有人真正回答了这个问题。

在这个标签中：

```
<form method="post" action="process.php" name="processform" id="form1" onsubmit="return validate(this)"> 
```

“这”指的是什么？

如果我要用对同一对象的硬编码引用替换“this”，我会用什么替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:35:39.597

`this`将引用正在提交的表单节点。您可以将引用替换为`document.getElementById('form1')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T01:36:19.080

里面的`this`“onsubmit”属性指的是表单本身；当`validate`函数被调用时，它的第一个参数是表单的 DOM 元素。

例如，考虑以下可能的实现`validate`：

```
function validate(form)
{
    alert(form.action); // will display "process.php"
} 
```

像这样在 HTML 中使用（而不是固定名称或 ID）的好处`this`是您不必通过 ID 或名称来引用表单。

# ruby-on-rails - Rails 应用程序中的嵌套表单错误

> ID：10661600
> 
> 赞同：1
> 
> 时间：2012-05-19T01:32:17.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, simple-form

与此问题相关的模型：用户、朋友、兴趣、person_interest。Person_interest 是多态的，可以存储属于用户或朋友的兴趣。

兴趣预先填充了大约。30个兴趣。当用户注册时，他们被要求选择自己的兴趣，然后在表格下方输入他们的朋友姓名选择该人的兴趣。

试图通过`<%= friend_f.input :interests, :as => :check_boxes, :label => false %>`

但出现以下错误：

```
NoMethodError in User_steps#show

Showing /Users/nelsonkeating/Desktop/ReminDeal/app/views/user_steps/show.html.erb where line #30 raised:

undefined method `to_i' for []:ActiveRecord::Relation
Extracted source (around line #30):

27:         :end_year => Date.today.year - 12,
28:         :order => [:month, :day, :year ] %>
29:       <%= friend_f.input :gender, :collection => ['male','female'] %>
30:       <%= friend_f.input :interests, :as => :check_boxes, :label => false %>
31:     <%end%>
32:   
33: 
Rails.root: /Users/nelsonkeating/Desktop/ReminDeal

Application Trace | Framework Trace | Full Trace
app/views/user_steps/show.html.erb:30:in `block (2 levels) in _app_views_user_steps_show_html_erb__1202886937753978667_70281885932700'
app/views/user_steps/show.html.erb:23:in `block in _app_views_user_steps_show_html_erb__1202886937753978667_70281885932700'
app/views/user_steps/show.html.erb:1:in `_app_views_user_steps_show_html_erb__1202886937753978667_70281885932700'
Request

Parameters:

{"id"=>"show"} 
```

这是表格..

```
<%= simple_form_for @user do |f| %>

  <%= f.input :name %>
  <%= f.input :city %>
  <%= f.input :address, :live => true  %>
  <%= f.input :zipcode %>
  <%= f.input :date_of_birth, :as => :date, :start_year => 1900,
    :end_year => Date.today.year - 12,
    :order => [ :day, :month, :year] %>
  <%= f.input :gender, :collection => [:male, :female] %>

    <h4>Select your top 3 interests..</h4>
      <%= f.association :interests, :as => :check_boxes, :label => false %>

    <h4>What holidays do you celebrate?</h4>
      <%= f.association :holidays, :as => :check_boxes, :label => false %> 

<h4>Add up to 10 friends birthdays that you would like to remember..</h4>
    <%= f.simple_fields_for :friends do |friend_f| %>

      <%= friend_f.input :name %>
      <%= friend_f.input :dob, :label => :Birthday, :as => :date, :start_year => Date.today.year - 90,
        :end_year => Date.today.year - 12,
        :order => [:month, :day, :year ] %>
      <%= friend_f.input :gender, :collection => ['male','female'] %>
      <%= friend_f.input :interests, :as => :check_boxes, :label => false %>
     <%end%>

 <%= f.button :submit, :class => 'btn btn-success' %>
      <%end%> 
```

Git repo 在这里：[https ://github.com/nelsonkeating/ReminDeal](https://github.com/nelsonkeating/ReminDeal)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T07:48:21.413

你有什么要避免的理由`friend_f.association`吗？

```
<%= friend_f.association :interests, :as => :check_boxes, :label => false %> 
```

为我工作。或者改成`:interests`kasper`:interest_ids`的代码，也应该可以。

```
<%= friend_f.input :interest_ids, :as => :check_boxes, :label => false, :collection => Interest.all %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:24:02.517

尝试`<%= friend_f.input :interests, :as => :check_boxes, :label => false %>`用`:collection`密钥编写代码。例如：

```
<%= friend_f.input :interests, :as => :check_boxes, :label => false, :collection => Interest.all %> 
```

# java - Java中的特殊正则表达式语法

> ID：10661601
> 
> 赞同：0
> 
> 时间：2012-05-19T01:32:20.310
> 
> 标签：java, regex

我正在为图像文件名使用正则表达式。我使用 RegEx 的主要原因是为了防止多个文件用于完全相同的目的。

文件名的语法可以是：

```
1)    img_0F_16_-32_0.png
2)    img_65_32_x.png 
```

您可能已经注意到，“img_”是通用前缀。接下来是一个两位数的十六进制数。在另一个下划线之后是一个整数，它必须是 2 的幂，介于 1 到 512 之间。接下来是另一个下划线。

好的，到目前为止，我的正则表达式工作完美。剩下的就是我遇到的问题：因为后面可以是一对整数坐标（可以是 0），用下划线或 x 分隔。之后是最终的“.png”。完毕。

现在我遇到的主要问题是这两种变体都必须是可能的，而且非常重要的是不能有任何重复的坐标。最重要的是，整数，无论​​是正数还是负数，都**不能**以一个或多个**零开头**！这会产生重复，如：

```
401 = 00401
-10 = -0010 
```

这是我的第一次尝试：

```
img_[0-9a-fA-F]{2}_(1|2|4|8|16|32|64|128|256|512)_([-]?[1-9])?[0-9]*_([-]?[1-9])?[0-9]*[.]png 
```

提前感谢您的帮助，

汤姆·S。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:36:06.680

为什么要使用正则表达式？为什么不创建一个将 String 的任一变体分解为规范 String 的类，给类 a`hashCode()`和`equals()`使用此规范 String 的方法，然后创建这些对象的 HashSet 以确保仅存在这些类型的文件中的一种？

# monodevelop - Monodevelop - 焊盘布局和对接

> ID：10661605
> 
> 赞同：1
> 
> 时间：2012-05-19T01:32:58.600
> 
> 标签：monodevelop

我刚刚开始在我的 Linux Mint 系统上使用 MonoDevelop。（版本是 2.6，有点旧，但它是存储库中的内容）。

我有两个宽屏显示器，但我无法配置 MonoDevelop 以使用我的正常开发布局。

对于VS和Windows7，我通常做的是让主窗口包含源代码，占据左显示器的右半部分。我有一个包含错误的第二个窗口，并且输出视图占据了右监视器的左半部分。

当我进入调试时，我让正在运行的程序窗口占据了右侧窗口的左半部分，第三个包含调试视图的窗口占据了右侧窗口的右半部分。

左侧窗口的左半部分是空的，或者包含一个显示 Stack Overflow 的 Web 浏览器。

我对 MonoDevelop 的问题是，虽然我可以将焊盘拖出主窗口，但我无法将它们停靠在一起。我可以将它们移动到另一台显示器，但是当我这样做时，每个都是一个单独的窗口。我无法将它们停靠在一起，就像我在 Visual Studio 中习惯的那样。

这是 MonoDevelop 无法做到的吗？或者只是我还没有想出怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:35:19.100

这是不可能的。您可以将多个焊盘停靠为单个浮动窗口的选项卡，但不能将多个焊盘停靠为单个浮动窗口的不同拆分部分。

# html - HTML5 div 样式不起作用

> ID：10661606
> 
> 赞同：1
> 
> 时间：2012-05-19T01:33:37.423
> 
> 标签：html, styles

我的页面（使用 HTML5）在没有 doctype 的情况下可以正常工作，但是当我添加 HTML5 doctype 时，`<div>`s 上的样式似乎不起作用（具体来说，`<div>`应该从左侧对齐 20 像素的样式没有对齐...另一个`<div>`应该有 90% 的高度恢复到默认高度...另一个`<div>`我改变了行间距和字符间距的似乎使用了默认的行间距和字符间距）。s上的样式`<span>`虽然工作得很好……但似乎只有`<div>`s 有问题。我已更改`<div>`为`<section>`...仍然无法正常工作。我尝试过内联样式，然后切换到样式表……似乎都不管用。我扔了一些`display:block;`（不确定那是做什么的）但它似乎没有做任何事情。
顺便说一句，代码没有问题。我通过验证器运行它，它根本没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:52:28.717

你的 CSS 有错误

```
.indented {
    display: block;
    left: 20;
    position: relative;
} 
```

应该：

```
.indented {
    display: block;
    left: 20px;
    position: relative;
} 
```

请注意，您必须为 - 的值指定一个单位值，`20`否则它可能会被忽略（这就是导致您的问题的原因！）

# zend-framework - Zend Framework $this->_forward 发送 POST/GET 参数

> ID：10661607
> 
> 赞同：0
> 
> 时间：2012-05-19T01:34:28.613
> 
> 标签：zend-framework, redirect, post

是否可以使用在控制器中发送 POST/GET 参数

```
$this->_forward("/url/here"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:13:50.627

```
public function fooAction()
{
    // forward to another action in the current controller and module:
    $this->_forward('bar', null, null, array('baz' => 'bogus'));
}

public function barAction()
{
    // forward to an action in another controller:
    // FooController::bazAction(),
    // in the current module:
    $this->_forward('baz', 'foo', null, array('baz' => 'bogus'));
}

public function bazAction()
{
    // forward to an action in another controller in another module,
    // Foo_BarController::bazAction():
    $this->_forward('baz', 'bar', 'foo', array('baz' => 'bogus'));
} 
```

根据手册，您可以使用数组发送参数，应该是最后一个参数。

# ruby - 实现树迭代器

> ID：10661610
> 
> 赞同：0
> 
> 时间：2012-05-19T01:34:58.847
> 
> 标签：ruby, algorithm, tree, binary-tree, traversal

我创建了一个非常简单的节点类，其中包含一个名称和一个节点数组。我还创建了一个带有 next 方法的迭代器类，该方法帮助我在每个节点和子节点上进行迭代。我需要编写下一个方法，但我不知道最好的方法是什么。

```
class Node

  def initialize(name, nodes
    @name = name
    @nodes = nodes
  end
end

class Iterator
  def initialize(node)
    @node = node
  end

  def next
    ???
  end
end 
```

例子：

```
z = Node.new("z", [])
b = Node.new("b", [z])    
c = Node.new("c", [])
parent = Node.new("a", [b, c]) 

iterator = Iterator.new(parent)
str = ''
next = iterator.next
while next do
 str += next.name
 next = iterator.next
end 
```

str 应该等于“abzc”

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T04:56:27.050

如果我可以建议一种更惯用的方法：

```
class Node

  attr_accessor :name, :children

  def initialize(name, children = [ ])
    @name = name
    @children = children
  end

  def traverse(&block)
    yield self
    @children.each { |child| child.traverse(&block) }
  end

end

z = Node.new("z")
b = Node.new("b", [z])
c = Node.new("c")
parent = Node.new("a", [b, c])

str = ''
parent.traverse { |node| str += node.name }
puts str 
```

这比 btilly 的解决方案（这也是正确的）有一个好处，因为它不会增殖 Iterator 对象并占用内存 - 实际上 Iterator 从实现中消失了（同时仍然保留对每个节点执行操作的能力连续）。这更惯用；更红宝石风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:00:56.490

在您的迭代器中，如果节点有任何子节点，则 next 将是其中的第一个。如果没有，那么您需要“备份”到您跳过的最后一个兄弟姐妹。这意味着您需要跟踪已跳过的兄弟姐妹，以便您可以返回到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:22:02.187

通过执行以下操作，我已经能够解决我的问题。但是我不喜欢这种方法的是我在初始化期间而不是在下一个方法中遍历节点......

```
class Iterator

  def initialize(node)
    @node   = node
    @index  = -1
    @list   = []

    traverse(@node)
  end

  def next
    @index += 1
    @list[@index]
  end

  private
  def traverse(root)
    @list[@list.size] = root
    if root.nodes
      for n in root.nodes do
        traverse(n)
      end
    end  
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T02:21:39.113

这是一些运行代码，演示了我认为您正在寻找的内容。

```
class Node
  attr_accessor :name, :nodes

  def initialize(name, nodes)
    @name = name
    @nodes = nodes
  end
end

class Iterator
  def initialize(node)
    @node = node
  end

  def each_node
    yield @node
    for node in @node.nodes do
      iterator = Iterator.new(node)
      iterator.each_node {|next_node|
        yield next_node
      }
    end
  end
end

z = Node.new("z", [])
b = Node.new("b", [z])
c = Node.new("c", [])
parent = Node.new("a", [b, c])

iterator = Iterator.new(parent)
str = ''
iterator.each_node {|node|
  str += node.name
}
puts str 
```

# html - Rails 3：我的视图没有被渲染

> ID：10661612
> 
> 赞同：1
> 
> 时间：2012-05-19T01:35:53.820
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, view, rendering

我是新来的铁路。我有我的控制器和视图设置。

当我查看我的 html 源代码时，我的身体是空的。我在我的控制器和我的视图中放置了一个调试器，它同时命中了两者，所以我知道它正在被执行。知道我做错了什么吗？我还安装了引导程序。

先感谢您。见下文。

```
class ListController < ApplicationController
  def recent
    @page_title = @head_title="Lists"
  end
end 
```

最近的.html.erb

```
 <ul class="tabs">
  <li class="active"><a href="#">Lorem</a></li>
  <li><a href="#">Ipsum</a></li>
  <li><a href="#">Dolor</a></li>
  <li><a href="#">Sit</a></li>
  <li><a href="#">Amet</a></li>
</ul> 
```

应用程序.html.erb

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "Myapp" %></title>
    <meta name="description" content="">
    <meta name="author" content="">
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= yield(:head) %>
  </head>

</html> 
```

html源代码

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myapp</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/twitter/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="7imEFVfD5bYIV7ZcK4181eCoz0pKxyyE2G+UFI46v5U=" name="csrf-token" />

  </head>

</html> 
```

从服务器日志

> 2012 年 5 月 18 日星期五 17:54:57 -0700 开始 GET "/list/recent" for 127.0.0.1 由 ListController#recent 处理为 HTML 在布局/应用程序中呈现 list/recent.html.erb (0.8ms) 完成 200 OK在 17 毫秒内（查看：16.9 毫秒 | ActiveRecord：0.0 毫秒）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T01:46:15.200

嗯，您的 application.html.erb 文件中没有`<body>`标签或任何视图内容？:-)

尝试在你的之前添加这个`</html>`：

```
<body>
  <%= yield %>
</body> 
```

没有`yield`参数的将从渲染视图中获取内容并将其吐出到您的应用程序布局中。

# ios - 如果执行，如何使用MDM执行应用程序的添加和删除？

> ID：10661616
> 
> 赞同：1
> 
> 时间：2012-05-19T01:36:27.547
> 
> 标签：ios, apple-push-notifications, mdm

我正在使用 Apple 的“APNs”和“MDM”。应用程序列表也可以使用“MDM”从 iOS 终端获取。但是，不能进行应用程序的添加和删除。显示“MDM”管理下没有任何内容的错误消息。我正在尝试执行应用程序的添加和删除的是企业自己创建的应用程序。

它不是来自错误消息。

Iphone 配置管理器实用程序 (IPCU)。下面有一个日志。

```
May 23 04:51:18 iPhone mdmd[1134] <Notice>: (Note ) MDM: mdmd starting...
May 23 04:51:18 iPhone profiled[1135] <Notice>: (Note ) profiled: Service starting...
May 23 04:51:18 iPhone mdmd[1134] <Notice>: (Note ) MDM: Network reachability has changed.
May 23 04:51:18 iPhone mdmd[1134] <Notice>: (Note ) MDM: Network reachability has changed.
May 23 04:51:18 iPhone mdmd[1134] <Notice>: (Note ) MDM: Polling MDM server https://www.anetm.com/davtest/pro.php for commands
May 23 04:51:18 iPhone mdmd[1134] <Notice>: (Note ) MDM: Transaction completed. Status: 200
May 23 04:51:19 iPhone mdmd[1134] <Notice>: (Note ) MDM: Transaction completed. Status: 200
May 23 04:51:21 iPhone mdmd[1134] <Notice>: (Note ) MDM: mdmd stopping... 
```

但是，未安装应用程序。

MDM 协议参考的“托管应用程序”正在将“InstallApplication”用于有效负载。

如果执行，如何使用MDM执行应用程序的添加和删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:36:12.867

尝试安装[airwatch-mdm-agent](http://itunes.apple.com/in/app/airwatch-mdm-agent/id338761996?mt=8)应用程序。iTunes 商店 ID 为 338761996，然后检查设备日志。如果安装成功，则尝试通过发送 MDM 命令删除此应用程序。

参考[这个](http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobiledevicemanagement_121211.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:14:17.177

检查已安装的 MDM 有效负载是否允许`AccessRights`密钥下的应用程序管理。安装了具有该访问权限的 MDM 有效负载后，您可以使用该`InstallApplication`命令将应用程序推送到托管设备。如果被推送的应用程序是 iTunes 应用程序，您将需要该应用程序的 iTunes 商店 ID 号。有关详细信息，请参阅 Apple 的“移动设备管理协议参考”文档。

更详细地说，当 iOS 设备接受 MDM 有效负载并同意由 MDM 系统管理时，该有效负载将包含受管设备同意允许的“访问权限”列表。此列表在 iOS 设备启动 MDM 注册过程时显示，如果用户觉得她授予 MDM 管理系统过多的控制权，则用户有机会取消。

在 iOS 5 中，有一个新的应用程序管理访问权限，允许“推送”iTunes 应用程序或本地“企业”应用程序。（请注意，每次推送应用程序时，iOS 设备用户都必须同意。）如果原始 MDM 注册负载中不包含该权限，则 MDM 系统无法管理应用程序。

# jquery - jQueryUI 检测元素何时被拖动

> ID：10661621
> 
> 赞同：0
> 
> 时间：2012-05-19T01:38:12.733
> 
> 标签：jquery, jquery-ui

我正在尝试检测何时拖动元素。jQuery 文档指出添加 a`.bind('drag'`应该这样做。不幸的是，这在我的情况下不起作用。我已经验证我的项目是可拖动的（由 jQueryUI 初始化）。

```
//all of these elements show a "drag" listener, yet nothing happens     
console.log($('#roster .sponsors li, #roster .players li'));

 $('#roster .sponsors li, #roster .players li').bind('drag', function () {
      $('.team div.sponsors, .team div.players').remove();
      $(this).unbind('drag');
 }); 
```

当他们开始拖动时，我试图让“拖动赞助商”div标签消失...... [http://jsfiddle.net/gEuZz/2/](http://jsfiddle.net/gEuZz/2/)

**更新**

看看这个问题——已移除——

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:55:43.313

使用[`sortstart`事件](http://jqueryui.com/demos/sortable/#event-start)。您还需要使用与创建可排序对象相同的选择器来绑定事件。这是您对这些更改的一个分支 - [http://jsfiddle.net/Bs6u7/](http://jsfiddle.net/Bs6u7/)。

# icloud - 从 iCloud 下载 iPhone 备份

> ID：10661623
> 
> 赞同：5
> 
> 时间：2012-05-19T01:38:31.163
> 
> 标签：icloud, icloud-api

有谁知道以编程方式从 iCloud 下载 iPhone / iPad 备份的方法？

# javascript - 需要从下拉列表列表中选择具有特定属性值的下拉列表元素并设置其选定值

> ID：10661624
> 
> 赞同：0
> 
> 时间：2012-05-19T01:38:49.237
> 
> 标签：javascript, jquery

`.FilterList`是所有下拉列表的类名

```
var $lists = $('.FilterList[ctype="' + ctype + '"]').css('display', 'inline'); 
```

像下面这样的东西可以正常工作，但我想知道是否有更简洁有效的方法可以用来代替`.each()`

```
 $lists.each(function () { $(this).attr('filterid') == filterid ? $(this).val(thisval) : null; }); 
```

虽然我追求的更像是：

```
$lists.first('.FilterList[filterid = "' + filterid + '"]').val(thisval); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:08:19.820

您的问题有点含糊，没有任何 HTML 来演示您试图从 DOM 中获取的内容，但从我收集的信息来看，似乎这样的事情应该有效：

```
$lists.find("[filterid='" + filterId + "']").val(myVal); 
```

不过，老实说，我只是在猜测您在寻找什么。尝试创建一个[jsFiddle](http://jsfiddle.net/)，让我们更好地了解您的目标。

# node.js - NodeJS 强大的套接字

> ID：10661625
> 
> 赞同：1
> 
> 时间：2012-05-19T01:39:29.863
> 
> 标签：node.js, socket.io

我正在尝试使用 Formidable 创建进度标准：

```
form.on('progress', function(bytesReceived, bytesExpected){
    percent = (bytesReceived / bytesExpected * 100) | 0;
        io.sockets.emit('progress', percent);
    }); 
```

这工作正常。但是 io.sockets.emit 将发送给所有正在监听的客户端，即使它们不是当前正在上传的客户端。我想只向那个特定的客户广播。

有没有人这样做或知道更好的方法？res.write 似乎也不起作用。

谢谢

# ruby-on-rails-3 - 集体运行时出现 RSpec 错误，但不是单独运行

> ID：10661629
> 
> 赞同：0
> 
> 时间：2012-05-19T01:40:16.973
> 
> 标签：ruby-on-rails-3, testing, rspec, delayed-job

不幸的是，我没有具体的问题（或线索），但希望有人能指出我正确的方向。

当我运行所有测试（rspec 规范）时，我得到了两个与延迟作业特别相关的失败测试。

当我单独运行这个规范文件（rspec ./spec/controllers/xxx_controller_spec.rb）时，所有测试都通过了......这是一个常见问题吗？我应该寻找什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:17:37.587

您已经提到它：隔离可能是解决方案。通常我会猜测您在数据库中有些东西正在被更改并且没有正确清理（或者更确切地说，没有正确模拟）。

在这种情况下，虽然我会建议，因为系统的工作量很大，延迟的作业没有足够快地完成。挑战在于应该测试的所有异步任务：您不能让系统运行延迟的作业，而是模拟调用并确保已收到延迟的作业。

可悲的是，没有例子，我很难指出丢失的模拟。但是要确保所有对 delay_jobs 和类似的调用都接收到正确的数据，但不要实际创建和运行这些作业——你的规范也会更快。确保隔离被测函数并且不调用外部依赖项。

# ruby-on-rails - 如何使这个 sass 工作

> ID：10661630
> 
> 赞同：-1
> 
> 时间：2012-05-19T01:40:38.947
> 
> 标签：ruby-on-rails, sass

我有非 sass：

```
.rounded-corners {
  -moz-border-radius-topleft: 4px; 
```

并想做类似的事情：

```
$radius_size: 4;

.rounded-corners {
  -moz-border-radius-topleft: #{$radius_size}px; 
```

或者

```
.rounded-corners {
  -moz-border-radius-topleft: $radius_sizepx; 
```

但这些都行不通。这个调用的语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:47:11.760

你用的是什么版本的 sass？您的第一个示例 ( `-moz-border-radius-topleft: #{$radius_size}px;`) 应该可以工作。它在 3.1.16 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:06:12.533

您的第一个选项（使用插值）看起来应该可以工作：

```
$radius_size: 4;
.rounded-corners {
  -moz-border-radius-topleft: #{$radius_size}px;
} 
```

不过，一般来说，我认为最好将单位存储在变量本身中，因为当您在算术表达式中使用变量时，SASS 会[自动](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#number_operations)在单位之间进行转换（如果可以的话）：

```
$radius_size: 4px;
.rounded-corners {
  -moz-border-radius-topleft: $radius_size;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-19T03:15:08.813

还可以考虑使用[Compass](http://compass-style.org/)。有了它，你可以写：

```
$radius_size: 4px;
.rounded-corners {
  +border-top-left-radius($radius_size);
} 
```

这会自动产生：

```
.rounded-corners {
  -moz-border-radius-topleft: 4px;
  -webkit-border-top-left-radius: 4px;
  -o-border-top-left-radius: 4px;
  -ms-border-top-left-radius: 4px;
  -khtml-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
} 
```

# java - 使用 HTMLUnit 从 url 保存图像

> ID：10661631
> 
> 赞同：11
> 
> 时间：2012-05-19T01:40:44.003
> 
> 标签：java, htmlunit

是否可以通过提供图像 URL 来使用 HTMLUnit 将图像保存到硬盘？如果有怎么办？

问候！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T06:05:10.540

如果您使用的是 HtmlUnit，那么您应该有一个 HtmlPage。在那里你可以得到一个 HtmlImage 并以这种方式保存文件：

```
HtmlImage image = page.<HtmlImage>getFirstByXPath("//img[@src='blah']");
File imageFile = new File("/path/to/file.jpg");
image.saveAs(imageFile); 
```

如果您确实有一个 URL……那么我认为您不需要 HtmlUnit 来下载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:48:59.613

这是我编写这样的代码的方式：

```
NodeList nlx = downloadPage.getElementsByTagName("a");
for (int y = 0; y<nlx.getLength(); y++) {
    String ss = nlx.item(y).toString();
    if(ss.contains("download/?fileformat=kml")) {
        System.out.println(ss);
        HtmlElement anchorAttachment = (HtmlElement)nlx.item(y);
        InputStream is =anchorAttachment.click().getWebResponse().getContentAsStream();
        try {
            //System.out.println(is);
            OutputStream out = new FileOutputStream(new File(fileName+".KML"));

            int read=0;
            byte[] bytes = new byte[1024];
            while((read = is.read(bytes))!= -1) {
                out.write(bytes, 0, read);
            }
            is.close();
            out.flush();
            out.close();    
            System.out.println("New file created!");
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

# opencv - 在 OpenCv 中匹配两个图像

> ID：10661632
> 
> 赞同：0
> 
> 时间：2012-05-19T01:40:52.917
> 
> 标签：opencv

我在匹配两个相似的图像时遇到了一些麻烦。即我已经从过滤器获得了一个二进制图像 tat 显示为“pic1”，我需要将此图像与文件夹中存储的图像进行比较，如果与输入图像匹配，则代码/prgm 应返回 true 和如果没有匹配，它应该返回 false。问题是我在 OpnenCV 中找不到特定的函数来进行这种特定类型的匹配。我在 openCV 中发现了一些技术，它们是 Surf、模板匹配。但是我无法找到如何实现这些功能来解决我的问题，以及即使图像与数据库的方向不同，也无法确定哪个更准确地找到匹配项。所以请有人帮助解决这个问题。谢谢你。

图1： ![在此处输入图像描述](../Images/a69defc9ef31682a19e351abbee15af6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:48:36.223

如果所有图像都是二进制的，具有相同的精确比例，并且位于相同的位置。使用 XOR 函数并计算不匹配。您还可以使用归一化互相关、SSD 和其他错误指标等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T17:59:40.583

如果您的对象都具有相同的大小，我建议您使用模板匹配，这是一个示例：http: [//docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)

但是，如果您有一些变形（比例、大小、旋转、倾斜、透视退化......），您可以使用描述符匹配（[FAST](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)、[SURF](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#surf)、[SIFT](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html)、.. 等）。

# ruby - 如果使用以下命令未列出 gem，是否意味着未安装它？

> ID：10661633
> 
> 赞同：2
> 
> 时间：2012-05-19T01:41:06.390
> 
> 标签：ruby, rubygems

例如，我试图找出是否安装了 RubyGems，所以我试图`gem query --name-matches rubygems`什么都没有。`gem query`导致列表中没有列出 RubyGems。到目前为止我的猜测正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:09:47.053

如果您想知道本地安装了哪些 gem，请使用`gem list <pattern>`. 如果您想列出所有宝石，请不要使用该模式。

如果您谈论的是 RubyGems 本身，那么您可以运行该`gem`命令这一事实表明它已经安装。您可以`gem -v`查看实际版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T02:28:55.370

要查看它是否已安装：

```
gem list bundler 
```

给出：

```
*** LOCAL GEMS ***

bundler (1.1.3) 
```

要查找 gem 源代码：

```
gem which bundler 
```

给出：

```
/path/to/directory/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.3/lib/bundler.rb 
```

# netbeans - 如何计算netbeans项目中的行数

> ID：10661636
> 
> 赞同：35
> 
> 时间：2012-05-19T01:41:39.303
> 
> 标签：netbeans, lines-of-code

您好，我有 netbeans 7，我想知道如何计算项目的总行数。我浏览过谷歌，但每次我这样做时，我只会发现死胡同或无法工作的插件。有谁知道如何计算行数？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-19T14:10:42.060

您可以使用~~适用于 7.1的~~~~[wordcount](http://plugins.netbeans.org/plugin/1531/wordcount)~~ ，适用于 8.2[的 nb-wordcount 。](http://plugins.netbeans.org/plugin/73172/nb-wordcount)

要配置字数，请进入`Tools`-> `Options`-> `Miscellaneous`。 **如果要匹配 Java 和 Groovy 以外的其他文件，则****必须进行更改。`Accept filename`**

要显示计数窗口，请进入`Window`-> `Open WordCount Window`。

要显示统计信息，请单击`WordCounting`（第二个按钮）。我将显示在其中选择的目录的统计信息`Projects (window)`（它必须是一个包或类似源包或网页的东西，**如果您选择项目，它将不起作用**）。

此外，如果您在 linux 上，您可以简单地执行：

```
 find . -name '*.java' | xargs wc -l 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-10-22T00:29:59.237

我知道这是一个非常古老的问题，但是有一种更简单的方法可以在不涉及安装插件的 netbeans 项目中查找行数：

1.  右键单击要查找行数的文件夹或包
    *注意：不要右键单击项目本身，因为这会导致它也计算所有生成文件中的行数。*
2.  单击`Find`或`Find in Files`或按`Ctrl``F`。
3.  确保`Match`下拉菜单设置为`Regular Expression`。
4.  在`\n`搜索框中输入。
5.  按查找，您的项目的行数将显示在
    `Search Results`选项卡的顶部。

*注意：在 NetBeans 中，搜索在 5000 个结果后停止，因此如果您的项目比这更长，那么此方法将不起作用*

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-18T13:36:04.773

我希望得到一个剪切和粘贴的答案。所以我写了一个。

编辑：支持数百万行代码。不需要外部库。

```
public static void main(String[] args) throws FileNotFoundException {

    final String folderPath = "D:\\Dev\\MYPROJECT\\src";

    long totalLineCount = 0;
    final List<File> folderList = new LinkedList<>();
    folderList.add(new File(folderPath));
    while (!folderList.isEmpty()) {
        final File folder = folderList.remove(0);
        if (folder.isDirectory() && folder.exists()) {
            System.out.println("Scanning " + folder.getName());
            final File[] fileList = folder.listFiles();
            for (final File file : fileList) {
                if (file.isDirectory()) {
                    folderList.add(file);
                } else if (file.getName().endsWith(".java")
                        || file.getName().endsWith(".sql")) {
                    long lineCount = 0;
                    final Scanner scanner = new Scanner(file);
                    while (scanner.hasNextLine()) {
                        scanner.nextLine();
                        lineCount++;
                    }
                    totalLineCount += lineCount;
                    final String lineCountString;
                    if (lineCount > 99999) {
                        lineCountString = "" + lineCount;
                    } else {
                        final String temp = ("     " + lineCount);
                        lineCountString = temp.substring(temp.length() - 5);
                    }
                    System.out.println(lineCountString + " lines in " + file.getName());
                }
            }
        }
    }
    System.out.println("Scan Complete: " + totalLineCount + " lines total");
} 
```

结果类似于以下内容：

```
 (truncated)
   47 lines in WarningLevel.java
Scanning design
 1367 lines in ProcessResultsFrame.java
   83 lines in TableSettingPanel.java
Scanning images
Scanning settingspanel
   67 lines in AbstractSettingPanel.java
  215 lines in AdvancedSettingsPanel.java
   84 lines in BaseSettingsPanel.java
  451 lines in DatabasePanel.java
  488 lines in EmailPanel.java
  458 lines in FTPGUIPanel.java
  482 lines in FTPScheduledTaskPanel.java
  229 lines in GUISettingPanel.java
   87 lines in RootSettingJPanel.java
  722 lines in ServerVisualIdentificationSettingPanel.java
Scan Complete: 123685 lines total 
```

如果它遗漏了什么，请告诉我，我会尽力纠正它。谢谢！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-19T02:03:27.810

您可以使用Java 项目的[源代码指标](http://plugins.netbeans.org/plugin/42970/sourcecodemetrics)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-22T14:00:33.320

@Johnathan，我喜欢你简单但有用的 LOC 计数程序。当我将它用于我的项目时，我发现扫描仪并不总是计算正确的行数，有时它甚至不会计算特定文件的一行。一点研究使我看到了这篇文章[Java 扫描仪没有遍历整个文件](https://stackoverflow.com/questions/8330695/java-scanner-not-going-through-entire-file)。似乎 Scanner 在不同的编码方面存在一些问题。为了避免这种情况并使程序更可靠，我建议将 Scanner 替换为 BufferedReader ，如下所示：

```
[...]
//  final Scanner scanner = new Scanner(file);
//  while (scanner.hasNextLine()) {
//      scanner.nextLine();
//      lineCount++;
//  }
InputStream is = new FileInputStream(file);
BufferedReader br = new BufferedReader(new InputStreamReader(is));
while (br.readLine() != null) {
    lineCount++;
}
[...] 
```

# java - 使用 Jena 将子子项添加到 RDF

> ID：10661643
> 
> 赞同：2
> 
> 时间：2012-05-19T01:43:11.850
> 
> 标签：java, xml, rdf, sparql, jena

好的，我有一个问题，我会很感激有人传播一些光。基本上我有下面的例子

```
<rdf:Description rdf:about="http://test.com">
<hasX></hasX>
<hasY></hasY>
<hasA></hasA>
<hasA></hasA>
<hasA></hasA>
</rdf:Description> 
```

我正在尝试制作以下内容：

```
<rdf:Description rdf:about="http://test.com">
<hasX></hasX>
<hasY></hasY>
<hasZ>
<hasA></hasA>
<hasA></hasA>
<hasA></hasA>
</hasZ>
</rdf:Description> 
```

我已经尝试将属性添加到属性然后是资源，声明新资源，添加文字，这些的每一种可能的组合，但是我得到的结果是生成一个新的 rdf:description 块，其中包含我想要的数据，在外面原始 rdf:description 使其一文不值。

我真的不想让其他`<rdf:Description rdf:about="">`人来描述这些`A`标签。

这是一个小测试示例

```
String NS = "http://example.com/test";      
Model m = ModelFactory.createDefaultModel();
Resource r = m.createResource("http://meetup/nyc");

Property p = m.createProperty(XmlParser.NS + "hasData");
Property p2 = m.createProperty(XmlParser.NS + "hasData");
Property p3 = m.createProperty(XmlParser.NS + "hasData");

r.addProperty(p, "somedata");
r.addProperty(p2, "somedata2");
r.addProperty(p3, "somedata3");

m.write(System.out); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:41:23.620

正如其他响应者所说，不要考虑 XML 树结构。但是，如果在 XML 树中查看图形有助于您理解模型，请将输出语法更改为紧凑的 RDF/XML 形式：

```
m.write( System.out, "RDF/XML-ABBREV" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:08:19.713

从模型创建 a`Resource`不会自动将其添加到该模型。我通常通过`add`Model 类的一种方法将三元组添加到模型中：

```
 String NS = "http://example.com/test#";
    Model m = ModelFactory.createDefaultModel();
    Resource r = m.createResource("http://meetup/nyc");

    Property p = m.createProperty(NS + "hasData");

    m.add(r, p, "somedata");
    m.add(r, p, "more data");

    m.write(System.out); 
```

这将创建：

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
           xmlns:j.0="http://example.com/test#" > 
     <rdf:Description rdf:about="http://meetup/nyc">
         <j.0:hasData>more data</j.0:hasData>
         <j.0:hasData>somedata</j.0:hasData>
      </rdf:Description>
   </rdf:RDF> 
```

# java - Java 加密设置失败并出现 InvalidKeySpecException

> ID：10661644
> 
> 赞同：0
> 
> 时间：2012-05-19T01:43:48.223
> 
> 标签：java, encryption

我正在尝试编写一个简单的应用程序，它接收上传的文件并在将它们存储到磁盘之前对其进行加密。

这是一个片段

```
InputStream is = item.openStream(); // item is obtained from file upload iterator
try{
   PBEKeySpec keySpec = new PBEKeySpec(passphrase.toCharArray(), salt.getBytes(),  iterations, keyLength);
   SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DESede"); 
   SecretKey key = keyFactory.generateSecret(keySpec); // Throws Exception
   CipherInputStream cis;
   Cipher cipher = Cipher.getInstance("RSA");
   cis = new CipherInputStream(is, cipher);
   cipher.init(Cipher.ENCRYPT_MODE, key);
 } catch (Exception ex){
    // catches the following exceptopn 
    java.security.spec.InvalidKeySpecException: Inappropriate key specification
    at com.sun.crypto.provider.DESedeKeyFactory.engineGenerateSecret(DashoA13*..)
   //
 } 
```

我也尝试了“RSA/ECB/PKCS1Padding”但没有成功。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:57:41.833

那是因为您需要初始化与您提供`SecretKeyFactory`的兼容的a 。`KeySpec`试试这个例如：

```
PBEKeySpec keySpec = new PBEKeySpec(passphrase.toCharArray(), salt.getBytes(),  iterations, keyLength);
SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndTripleDES");
SecretKey key = keyFactory.generateSecret(keySpec);
Cipher cipher = Cipher.getInstance(key.getAlgorithm());
CipherInputStream cis = new CipherInputStream(is, cipher);
cipher.init(Cipher.ENCRYPT_MODE, key); 
```

此调用生成的`SecretKeyFactory`可以从 的实例成功生成密钥，`PBEKeySpec`并`Cipher`使用正确的算法进行初始化。

# bash - 如何找到括号之间出现的所有单词？

> ID：10661646
> 
> 赞同：7
> 
> 时间：2012-05-19T01:44:48.760
> 
> 标签：bash, grep

我有一个包含括号中的单词的文件。我想编译出现在那里的所有独特单词的列表，例如：

```
This is some (text).
This (text) has some (words) in parenthesis.
Sometimes, there are numbers, such as (123) in parenthesis too. 
```

这将是结果列表：

```
text
words
123 
```

如何列出括号之间出现的所有项目？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-19T02:42:45.910

你可以`awk`这样使用：

`awk -F "[()]" '{ for (i=2; i<NF; i+=2) print $i }' file.txt`

印刷：

```
text
text
words
123 
```

您可以使用数组来打印唯一值：

`awk -F "[()]" '{ for (i=2; i<NF; i+=2) array[$1]=$i; print array[$1] }' file.txt`

印刷：

```
text
words
123 
```

高温高压

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T09:49:23.640

使用 GNU grep，您可以使用与 perl 兼容的正则表达式和环视断言来排除括号：

```
grep -Po '(?<=\().*?(?=\))' file.txt | sort -u 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T02:00:26.660

`grep -oE '\([[:alnum:]]*?\)' | sed 's/[()]//g' | sort | uniq`

*   `-o`只打印匹配的文本
*   `-E`表示使用扩展正则表达式
*   `\(`表示匹配文字括号
*   `[[:alnum:]]`是字母和数字的 POSIX 字符类。

该`sed`脚本应该去掉括号。这是针对 GNU grep 测试的，但是 BSD sed 所以要小心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T02:05:53.500

要重现您的列表：

```
cat file.txt | sed  's/.*(\(.*\)).*/\1/' 
```

要编译唯一词列表，您需要进一步处理该列表：

```
cat file.txt | sed  's/.*(\(.*\)).*/\1/' | sort | uniq 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T17:42:58.703

你可以试试这个

```
 sed -e 's/\(/\n\(/g' -e 's/\)/\n/g' filename|awk -F'(' '{print $2}'|sort -u 
```

解释：

第一个 sed 语句将括号中的单词放在新行中，第二个 sed 将字符 ')' 替换为新行。所以在运行下面的语句之后

```
sed -e 's/\(/\n\(/g' -e 's/\)/\n/g' filename 
```

输出看起来像这样

```
This is some 
(text
.This 
(text
has some 
(words
 in parenthesis.
Sometimes, there are numbers, such as 
(123
 in parenthesis too. 
```

现在将此输出传递到下面的 awk 语句，该语句打印过滤器字符 '(' 之间的第二个单词

```
awk -F'(' '{print $2}' 
```

现在的输出将是

```
text
text
words
123 
```

上面的输出通过管道传送到 sort -u 命令，以从上面的输出中给出唯一的单词。希望这个解释有所帮助。

# java - 使用随机数执行 CommandA A% 时间，CommandB B% 时间，CommandC C% 时间 ----- CommandZ Z% 时间

> ID：10661647
> 
> 赞同：2
> 
> 时间：2012-05-19T01:45:05.030
> 
> 标签：java, random

**问题陈述**：通过匹配其百分比随机执行各种命令。比如执行 CommandA 50% 的时间和 commandB 25% 的时间和 commandC 15% 的时间等等，总百分比应该是 100%。

**我的问题是 - 执行 CommandA A% 的时间，CommandB B% 的时间，CommandC C% 的时间 ----- CommandZ Z% 的时间。总百分比应该是 100%，最后我可以看到在总执行完成后每个命令执行了多少次以及每个命令的百分比是多少（表示每个命令执行的百分比） .**

**想法：-** 生成一个介于 1 到 100 之间的随机数，看看是否有任何百分比属于该类别

```
List<Double> comamndDistribution = new ArrayList<Double>();

    /* Commands to execute. Here I have Z command 
    *  and total percentage should be 100% (A+B+C+D+...+Z=100%)
    */
        comamndDistribution.add(A%); // command A
        comamndDistribution.add(B%); // command B
        comamndDistribution.add(C%); // command C
        comamndDistribution.add(D%); // command D
        comamndDistribution.add(E%); // command E
        -----------
        -----------
        comamndDistribution.add(Z%); // command Z

private Command getNextCommandToExecute() {

    for (int i=0; i < 10000; i++) {
       // generating a random number between 1 and 100
      int random = r.nextInt(100-1) + 1;

    /* My Question is- Execute CommandA A% of time, CommandB B% 
       of time, CommandC C% of time ----- Command Z Z% of time. 
       And total percentage should be 100% and at the end I can see
       how much times each command is being executed and what is 
       the percentage of each command(means how many times each command is 
       being executed in terms of percentage) after total execution is complete.
    */
        }
}

/* Get the next command to execute by maintaining the Percentage of 
    each command randomly*/
    Command nextCommand = getNextCommandToExecute(); 
```

***让我说得更清楚 - 我的问题是 - 使用随机数执行 CommandA A% 的时间，CommandB B% 的时间，CommandC C% 的时间 ----- 命令 NN% 的时间。总百分比应为 100%。***

PS：我认为这个问题已经被问过几次了，但这不是我想要的方式。所以我想通过发布我到目前为止所做的代码来再次提出问题。

**更新：-我通过删除我用另一种逻辑编写的先前代码来更新问题，以便人们可以更多地理解它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:49:11.603

这不是你问的，但我认为这是你的意思。

```
class RandomCommands {
  // A Map that associates each command with a threshold from 0 - totalWeights.
  // The order of iteration is the same as the order of insertion.
  private Map<int, Command> commands = new LinkedHashMap<int, Command>>();

  // Running total of the weights of all of the commands.  The likelihood that
  // particular command will be executed is its weight / totalWeights.
  private int totalWeights = 0;

  // Adds a command with the specified weight, which can be any positive integer.
  public void addCommand(int weight, Command command) {
    commands.put(totalWeights, command);
    totalWeights += weight;
  }

  // Chooses a random command.
  public Command getRandomCommand() {
    // Choose a random number to select a command.
    int selector = Random.nextInt(totalWeights);

    // Find the corresponding command.
    for (Element<int, Command> command : commands) {
      if (command.key >= selector) {
        return command.value;
      }
      selector -= command.key;
    }
  }
} 
```

**例子：**

假设我们有 3 个命令，权重分别为 20、20 和 40。由于权重的总和为 80，我们可以计算：

*   前 2 个命令中的每一个将被选择 20/80 = 1/4 = 25% 的时间。
*   第三条命令将在 40/80 = 1/2 = 50% 的时间内被选中^。

地图将`commands`包含以下条目：

```
<0,  Command1>
<20, Command2>
<40, Command3> 
```

每次`getRandomCommand()`被调用时，它会从 0 到 79 中选择一个随机数。它会返回如下命令之一：

```
选择器命令执行频率
———————— ————————— ——————————————————————————————————————— ————
 0 - 19 命令1 (1 + 19 - 0) / 80 = 20/80 = 1/4 = 25%
20 - 39 命令2 (1 + 39 - 20) / 80 = 20/80 = 1/4 = 25%
40 - 79 命令3 (1 + 79 - 40) / 80 = 40/80 = 1/2 = 50%

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:36:45.480

我以与 Adam Liss 类似的方式进行操作，但结果更加冗长。

同样，我认为你不能依赖提供的命令总是加起来 100%，所以我已经解决了这个问题，但我的方式需要一个方法调用来重新规范化比例（所以更容易出错）。

```
import java.util.*;

/** 
  A basic 'Command' class for testing
*/
class Command {
  private String id;
  public Command (String pId) {
    this.id = pId;
  }
  public void execute () {
    System.out.println ("Command: "+id);
  }
}

/** The class that does the random selection bit of magic */
public class CommandDist {

  /** an internal helper class to manage proportions and the command */
  class Cmd {
    Command command;                 // the command that will get executed
    double assignedProportion;       // weight assigned when added
    double cumulativeProportion;     // recalculated later to between 0 and 1

    public Cmd (Command c, double proportion) {
      this.command = c;
      this.assignedProportion = proportion;
      this.cumulativeProportion = 0.0;
    }
  }

  // the list I'm using 
  private List<Cmd> commandDistribution = new ArrayList<Cmd>();
  private java.util.Random myRandom = new java.util.Random();

  void addCommand (Command command, double proportion) {
    commandDistribution.add ( new Cmd (command, proportion));
  }

  // ** MUST BE CALLED **, after adding all the commands, to normalise the proportions.
  // you could do this tidier by setting a flag in add, and checking it in
  // getNextCommandToExecute
  void normaliseProportion() {
    double total = 0;
    double cumulativeProp = 0;
    for (Cmd cmd: commandDistribution) {
       total += cmd.assignedProportion;
    }
    for (Cmd cmd: commandDistribution) {
       cumulativeProp += cmd.assignedProportion/total;
       cmd.cumulativeProportion = cumulativeProp;
    }
  }

  private Command getNextCommandToExecute () {
    double d = myRandom.nextDouble();
    for (Cmd cmd: commandDistribution) {
      if (d < cmd.cumulativeProportion) {
        return cmd.command;
      }
    }
    // theoretically, should not get here.  Never rely on theoretically.
    return commandDistribution.get(0).command;

  }

  public static void main (String [] args) {
    CommandDist cd = new CommandDist();
    Command c; 

    cd.addCommand (new Command ("A"), 50.0);
    cd.addCommand (new Command ("B"), 20.0);
    cd.addCommand (new Command ("C"), 15.0);
    cd.addCommand (new Command ("D"), 10.0);

    cd.normaliseProportion();

    for (int i = 0; i < 10000; i++) {
       c = cd.getNextCommandToExecute();
       c.execute();
    }

  }
} 
```

输出如下所示：

```
Command: C
Command: A
Command: C
Command: A
Command: D 
```

并且通常像这样分布（当然，每次运行的计数不同）。

```
java CommandDist | sort | uniq -c
   5183 Command: A
   2151 Command: B
   1595 Command: C
   1071 Command: D 
```

# ios - ios - 在 UILabel 中显示核心数据结果？

> ID：10661648
> 
> 赞同：2
> 
> 时间：2012-05-19T01:45:07.737
> 
> 标签：ios, core-data, nsstring, uilabel

我知道如何设置 a`UILabel`并用 a 填充它`NSString`，所以我假设我可以将 Core Data 数据库的属性加载到 an`NSString`并将结果显示到 a中是错误的`UILabel`吗？

如果我是对的，这是可能的，我该怎么做？在学习如何做到这一点时，我尝试拼凑一些代码:-)

我想以正常`UIView`而不是`UITableView`.

干杯杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:37:20.813

你应该有`NSManagedObject`类来访问你的核心数据实体。例如，如果您有一个名为 的实体`Person`，则应该有一个相应的`Person`类（在`Person.h`and中声明`Person.m`）。对于该 Person 类的每个属性，您应该有一个对应的`@property`. 查询数据后（通常使用`NSFetchRequest`），您可以访问这些属性并将它们分配给您想要的任何 UI 控件。

例如：

```
myLabel1.text = person.firstName;
myLabel2.text = person.lastName; 
```

（假设`firstName`和`lastName`是`NSString`s）。

# apache-flex - Flex/ActionScript 3：覆盖数据服务超类中的参数名称

> ID：10661649
> 
> 赞同：0
> 
> 时间：2012-05-19T01:45:08.453
> 
> 标签：apache-flex, actionscript, flash-builder, overriding, superclass

使用 Flash Builder，我需要创建一个具有 2 个名为**start-index**和**max-results**的参数的数据服务（用于 YouTube API）。在 Flash Builder/Flex 数据服务中，参数名称只能包含字母、数字和下划线。我暂时使用**startIndex**和**maxResults**打算使用其子类在服务的超类中覆盖这些。事实证明它并不像我想象的那么简单，我已经尝试了很多方法。如果我覆盖超类中的参数名称，它可以正常工作，但这不可避免地会被覆盖，因为它是自动生成的。这是超类**_Super_TopRatedService.as**：

```
package services.topratedservice
{
**(imports here)**

[ExcludeClass]
internal class _Super_TopRatedService extends com.adobe.fiber.services.wrapper.HTTPServiceWrapper
{
    private static var serializer0:XMLSerializationFilter = new XMLSerializationFilter();

    // Constructor
    public function _Super_TopRatedService()
    {
        // initialize service control
        _serviceControl = new mx.rpc.http.HTTPMultiService();
         var operations:Array = new Array();
         var operation:mx.rpc.http.Operation;
         var argsArray:Array;

         operation = new mx.rpc.http.Operation(null, "getData");
         operation.url = "https://gdata.youtube.com/feeds/api/standardfeeds/top_rated";
         operation.method = "GET";
         argsArray = new Array("startIndex","maxResults");
         operation.argumentNames = argsArray;         
         operation.serializationFilter = serializer0;
         operation.properties = new Object();
         operation.properties["xPath"] = "/::entry";
         operation.resultElementType = valueObjects.Entry;
         operations.push(operation);

         _serviceControl.operationList = operations;  

         preInitializeService();
         model_internal::initialize();
    }        
    //init initialization routine here, child class to override
    protected function preInitializeService():void
    {

    }    
    /**
      * This method is a generated wrapper used to call the 'getData' operation. It returns an mx.rpc.AsyncToken whose 
      * result property will be populated with the result of the operation when the server response is received. 
      * To use this result from MXML code, define a CallResponder component and assign its token property to this method's return value. 
      * You can then bind to CallResponder.lastResult or listen for the CallResponder.result or fault events.
      *
      * @see mx.rpc.AsyncToken
      * @see mx.rpc.CallResponder 
      *
      * @return an mx.rpc.AsyncToken whose result property will be populated with the result of the operation when the server response is received.
      */
    public function getData(startIndex:int, maxresults:int) : mx.rpc.AsyncToken
    {
        var _internal_operation:mx.rpc.AbstractOperation = _serviceControl.getOperation("getData");
        var _internal_token:mx.rpc.AsyncToken = _internal_operation.send(startIndex,maxresults) ;
        return _internal_token;
    }         
} 
```

**您可以在argsArray = new Array("startIndex","maxResults");**行中看到参数名称

 **这是子类**TopRatedService.as**：

```
package services.topratedservice
{    
public class TopRatedService extends _Super_TopRatedService
{
    /**
     * Override super.init() to provide any initialization customization if needed.
     */
    protected override function preInitializeService():void
    {
        super.preInitializeService();
        // Initialization customization goes here
    }                   
}    
} 
```

我应该如何以及在哪里覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:55:44.530

我认为这是应该在**TopRatedService.as**中完成的方式：

```
protected override function preInitializeService():void
    {
        super.preInitializeService();
        // Initialization customization goes here
        super._serviceControl.operations.getData.argumentNames= new Array("start-index","max-results")
    } 
```**

# iphone - 是否需要显式创建init方法和dealloc方法

> ID：10661650
> 
> 赞同：0
> 
> 时间：2012-05-19T01:45:42.227
> 
> 标签：iphone, objective-c, ipad

当我创建一个 NSObject 类时，是否有必要创建 init 方法和 dealloc 方法显式，是否有它们的默认方法。我发现如果我不写init方法，就会发生内存泄漏，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:19:51.573

如果您不为您的类编写`init`or`dealloc`方法，那么它具有继承的`init`和`dealloc`超类的。
除非您没有为对象成员分配任何内存，否则不会发生内存泄漏。

# git - git cherry-pick 导致分支在 origin/master 之前

> ID：10661655
> 
> 赞同：0
> 
> 时间：2012-05-19T01:46:44.110
> 
> 标签：git, cherry-pick, git-cherry-pick

我正在尝试将来自分支的特定提交合并到 master 中，并将它们推送到原点。

这是我正在做的事情：

```
M4600 ~/git/plutext/docx4j (master)
$ git reset --hard origin/master
HEAD is now at 2b2d124 Image support in non-XSLT HTML export.

M4600 ~/git/plutext/docx4j (master)
$ git status
# On branch master
nothing to commit (working directory clean)

M4600 ~/git/plutext/docx4j (master)
$ git cherry-pick d89cc32b11d338c0874838a730f04f83c85021bd
[master cb6bf93] Make table output work again.
 1 files changed, 11 insertions(+), 11 deletions(-)

M4600 ~/git/plutext/docx4j (master)
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:13:27.097

完全没有问题。

您只需向本地 master 应用提交，因此它现在比 origin/master（远程分支）多 1 个，因此您只需推送它。

# css - 冻结/快照 CSS 并获取值

> ID：10661656
> 
> 赞同：1
> 
> 时间：2012-05-19T01:47:08.330
> 
> 标签：css, media-queries, responsive-design, css-transitions

我添加了[过渡](http://elliotjaystocks.com/blog/css-transitions-media-queries/)以平滑响应视口宽度的 CSS 更改。在某一时刻，外部（〜顶层）之一似乎`div`下降到零宽度并再次回到所需的宽度。

### 无论如何要*“暂停”* CSS并查看`div`导致奇怪视觉效果的原因？

* * *

有一些媒体查询和很多 CSS（我没有写），所以我只想能够在宽度看起来为零的位置拍摄样式快照。

我在本地运行此程序，因此无法在线重现此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:50:54.043

好吧，您可以在整个过渡过程中尝试 console.log($(yourTopLevelDiv).width()) ，这样您就可以看到问题是否来自这里。

[http://jsfiddle.net/qf3L3/](http://jsfiddle.net/qf3L3/)

# php - 有谁知道在多个 html 文件中替换标签及其之间的所有内容的最简单方法？

> ID：10661658
> 
> 赞同：0
> 
> 时间：2012-05-19T01:47:28.853
> 
> 标签：php, html, shell, applescript, automator

我有很多带有自定义样式表的 html 文件。我想创建一个他们都可以使用的通用样式表。所以我需要做的是更换

> <style type="text/css">
> 
> .Title {.. .body {..
> 
> </风格>

在多个 html 文件中包含带有 this 的标签。

> <link media="screen" href="style.css" type="text/css" rel="stylesheet" />

我确定有人遇到了这个问题，我想知道完成这项任务的最简单方法是什么？我可以运行某种applescript或php脚本来执行此操作，还是有其他方法可以执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:21:08.990

请参阅今天早些时候发布的此问题的已接受答案。

[如何使用 preg_replace 删除整个 div](https://stackoverflow.com/questions/10658770/how-to-remove-entire-div-with-preg-replace/10658809#10658809)

它非常接近你想要做的事情。简而言之，使用 DOMDocument 类 - [http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:04:54.287

我通常只使用 TextMate 在 Project 中的 Search 或一些 Ruby 或 shell 脚本。我有一个这样的脚本保存为`ggsub.rb`，当我需要替换多个文件中的某些内容时只需修改它。

```
#!/usr/bin/env ruby -Ku

# paths = `find ~/Sites -name '*.html'`.chomp.split("\n")
paths = Dir["*.html"]

paths.each do |path|
  html = File.read(path)
  html.sub!(/<style.*?>.*?<\/style>/m,
  "<link rel=\"stylesheet\" href=\"style.css\">")
  puts html
  # File.open(path, "w") { |f| f.puts(html) }
end 
```

# c# - 扩展 SortedList 时不能使用某些方法

> ID：10661661
> 
> 赞同：0
> 
> 时间：2012-05-19T01:48:00.813
> 
> 标签：c#, .net, collections

我有一个扩展 SortedList 的类。我可以在我的类中使用许多 SortedList 方法，例如 Add() 和 Remove()，但由于某种原因，当我尝试使用 GetKey() 时它不喜欢它。谁能告诉我为什么会发生这种情况？

```
public class SymbolTableImplementation : SortedList<string, SymbolTableEntry>, SymbolTable
{
    public SymbolTableEntry Enter(string name)
    {
        SymbolTableEntry entry = SymbolTableFactory.CreateSymbolTableEntry(name, this);
        Add(name, entry);  // This is OK
        return entry;
    }

    //  Look up an existing symbol table entry. Null if it does not exist.
    public SymbolTableEntry Lookup(string name)
    {
        return GetKey(name);  // Doesn't exist in current context
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:51:59.873

`GetKey`在 中定义`SortedList`，它实际上是一个完全独立于 的类`SortedList<TKey, TValue>`。您的原始代码也有错误；如果您实际使用/ ，*则*不会编译：`GetKey``SortedList`

```
return GetKey(name); 
```

相反，只需使用`IDictionary`索引器：

```
return this[name]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T01:51:49.320

类中没有名称`GetKey`的方法`SortedList<TKey, TValue>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T02:33:49.470

没有GetKey()，这已经很清楚了。正确的实现是：

```
public SymbolTableEntry Lookup(string name)
{
    return this[name];
} 
```

这应该让你停下来，方法是多余的。SortedList 的索引器已经足够完成工作了。所以只要去掉这个方法，这个类的用户将无法猜测使用哪一个。

请注意，Add() 与 Enter() 存在类似的问题。当客户端程序员使用 Add() 时，不会发生任何好事。您真正想要做的是*替换*或隐藏 Add() 方法，但这是不可能的。你可以超载它，但这是可以做到的。

.NET 集合类并不是真正设计为从中派生的，它们的方法不是虚拟的。如果您*封装*它们，它们会更好地工作，创建您自己的仅继承 IDictionary 的集合类并使用私有的 SortedList 来完成工作。这是相当多的工作，但它会非常干净。

# javascript - 在异步 JavaScript 函数完成后调用函数？

> ID：10661662
> 
> 赞同：2
> 
> 时间：2012-05-19T01:48:16.607
> 
> 标签：javascript, callback

我是 JavaScript 新手，我四处寻找解决问题的方法。我真的很难找到正确的答案。我想我可能不得不对回调做一些事情，但我不确定。

基本上，我在我的网站上实现了一个“喜欢”按钮。单击“赞”按钮后，我需要完成两个主要的后端操作：更新“赞”的数据库，并向获得“赞”的人发送电子邮件通知。单击“喜欢”按钮后，我呈现一个“喜欢”按钮以向用户显示它通过了。

问题是，拍摄电子邮件需要很长时间。因此，如果我更新数据库，然后发送电子邮件，*然后*呈现按钮，用户将在他/她看到按钮更改为“喜欢”按钮之前等待一段时间。因此，我想更新数据库，渲染点赞按钮，*然后*发送电子邮件。

在我的 JavaScript 中，我尝试执行以下操作：

```
function foo()
{
  xmlhttp1.onreadystatechange = liked( function() {
    xmlhttp2.open("POST", "async/async_likeEmail.php",true)
    xmlhttp2.setRequestHeader(...
    ...
    xmlhttp2.send(parameters);
  }

  xmlhttp1.open("POST", "async/async_likeUpdateDB.php", true)
  xmlhttp1.setRequestHeader(...
  ...
  xmlhttp1.send(parameters);
}

function liked(callback) {
  if (xmlhttp1.readyState == 4)
  {
    xmlhttp1.responseText;
    someElement.innerHTML = xmlhttp1.responseText; // render the "liked" button
    callback();
  }
} 
```

这样做，异步“喜欢”函数无法被调用。出于某种原因，传入回调会破坏它。我也尝试过不传入回调，而是定义一个单独的“like_notify”函数，并在异步“liked”函数中调用 like_notify() 也失败了。

有人可以让我知道我做错了什么以及为什么这些尝试失败了吗？回调不是解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:56:55.063

一种流行的技术不是等待来自服务器的响应来获得更新用户界面的许可，而是简单地假设继续更新 UI 是可以的。在大多数情况下，请求通常是成功的，所以只要做出这样的假设，然后向服务器发出请求。

之后，当响应返回时，不是更新 UI，而是检查请求是否确实成功。如果是的话，太好了！您可以什么都不做，因为您已经更新了 UI，或者您可以检查以确保您的快速更新与服务器发送的内容相匹配。它应该，但如果没有，你可以修复它。

此外，您还可以检查响应中的状态代码。如果它是 500、404 或任何非 200 状态代码，表明存在异常情况，那么您可以通过将您的点赞按钮恢复到之前的状态，然后向您的用户显示一条漂亮的错误消息来对其进行操作。

这不仅使您的 UI 非常灵活，而且您仍然能够在错误情况发生时处理它们。

这是您的代码，稍作修改以促进此技术。由于我没有您的所有代码，因此不能将其解释为一个工作示例，而只是为了让您入门：

```
function foo()
{ 
   // call liked immediately. Don't wait for the server to respond
      // think "update the UI immediately"
   liked( function() {
       xmlhttp2.open("POST", "async/async_likeEmail.php",true)
       xmlhttp2.setRequestHeader(...
       ...
       xmlhttp2.send(parameters);
   });

  // this is a handler where you just check to make sure the request succeeded
    // if it does, great, do nothing. If it fails, change the like button back!
  xmlhttp1.onreadystatechange = function() {
      if(xmlhttp1.status == 404 || xmlhttp1.status == 503) {
          alert("problem!");
          // put the like button back to the previous state
      }
  };

  xmlhttp1.open("POST", "async/async_likeUpdateDB.php", true)
  xmlhttp1.setRequestHeader(...
  ...
  xmlhttp1.send(parameters);
}

function liked(callback) {

  /* insert code to render the liked result
   *  show what the button would look like if successful.
   */

  // you don't really need to do this part. You know what a liked button looks like
   // so just render it without waiting for the response.
    // however, leaving this here acts as a failsafe in case your  
     // code that updates it immediately does something wrong
  if (xmlhttp1.readyState == 4)
  {
    xmlhttp1.responseText;
    someElement.innerHTML = xmlhttp1.responseText; // render the "liked" button

    // call the callback to make the 2nd Ajax request
    callback();
  }
} 
```

**更新：**

您的第一个 AJAX 调用未正确触发的原因是因为您将“喜欢”函数的*结果*分配给 onreadystatechange 处理程序，而不是将实际函数对象分配给 onreadystatechange 处理程序：

```
xmlhttp1.onreadystatechange = liked( function() {
    xmlhttp2.open("POST", "async/async_likeEmail.php",true)
    xmlhttp2.setRequestHeader(...
    ...
    xmlhttp2.send(parameters);
} 
```

相反，这会奏效：

```
xmlhttp1.onreadystatechange = function() { 
    liked( function() {
        xmlhttp2.open("POST", "async/async_likeEmail.php",true)
        xmlhttp2.setRequestHeader(...
        ...
        xmlhttp2.send(parameters);
    }
} 
```

为了更清楚，请考虑以下几点：

```
xmlhttp1.onreadystatechange = someFunct();   // assign the result to the handler

xmlhttp1.onreadystatechange = someFunct;    // assign the function to the handler

// also assigns function to handler, but wrapped in anonymous function
xmlhttp1.onreadystatechange = function() {   
    someFunct();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T01:59:51.547

```
//abstract the ajax 
function ajaxpost(url,callback){

    //all the xhr setup stuff

    xmlhttp.open("POST", url, true)
    xmlhttp.onreadystatechange = function(){
        if (xmlhttp1.readyState == 4){

            //execute callback when done
            callback(xmlhttp.responseText);
        }
    }
    xmlhttp.send();
}

function like(){
    //update db
    ajaxpost("async/async_likeUpdateDB.php",function(data){
        //render like button
        someElement.innerHTML = xmlhttp1.responseText
        //email
        email();
    }
}

function email(){
    //hit email
    ajaxpost("async/async_likeEmail.php",function(data){
        //everything done
    }
} 
```

# c - 如何使用 MinGW 在命令行上编译 C 程序？

> ID：10661663
> 
> 赞同：31
> 
> 时间：2012-05-19T01:48:17.113
> 
> 标签：c, windows, gcc, command-line, mingw

在 Windows 7 的命令行中必须输入什么命令来编译一个基本的 C 程序？

就像我真的想知道您在命令提示符中键入什么来编译 .c 文件。

我试过了：

```
> gcc foo.c 
```

但它说：

```
'gcc' is not recognized as an internal or external command, 
 operable program or batch file. 
```

我也试过：

```
> minGW foo.c 
```

但我回来了：

```
 'minGW' is not recognized as an internal or external command, 
  operable program or batch file. 
```

我将路径环境变量设置为安装 MinGW 的位置：

```
C:\Program Files (x86)\CodeBlocks\MinGW\bin 
```

我真的找不到任何关于我哪里出错的信息，也找不到官方 MinGW 文档中的任何内容，因为这似乎是一个如此简单、令人尴尬的问题，以至于人们知道是什么去做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T02:09:28.327

表示找不到`gcc.exe`。

> 我将路径环境变量设置为安装 MinGW 的位置

也许你没有正确设置路径？

```
echo %path% 
```

显示 gcc.exe 的路径？否则，编译类似于 Unix：

```
gcc filename.c -o filename 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-24T11:32:12.507

我遇到了这个问题，找不到为什么它一直发生。原因很简单：一旦你设置了环境路径，你必须关闭 CMD 窗口，然后再次打开它，因为它会知道新的环境路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-10T03:52:18.273

**第一的：**

在系统变量 => 路径中添加您的 minGW 的 bin 文件夹目录（例如：**C\mingw64\bin ）。**[视觉示例](https://prnt.sc/m56o71)

* * *

**编译：**

**.c:** gcc 文件名.c -o 愿望

**.cpp:** g++ 文件名.cpp -o 愿望

* * *

**跑：**

欲望/***或***./欲望

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-19T10:48:14.040

我对包含函数（不是`main()`我的程序）的 .c 文件有同样的问题。例如，我的头文件是“fact.h”和“fact.c”，而我的主程序是“main.c”，所以我的命令是这样的：

```
E:\proj> gcc -c fact.c 
```

现在我有一个 fact.c (fact.o) 的目标文件。在那之后：

```
E:\proj>gcc -o prog.exe fact.o main.c 
```

然后我的程序（prog.exe）就可以使用并正常工作了。我认为`-c`after`gcc`很重要，因为它会生成可以附加的目标文件来制作我们需要的程序。如果不使用`-c`, gcc 在程序中查找 main ，当它没有找到它时，它会给你这个错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T07:44:24.967

只需将环境变量设置为 gcc.exe 的确切路径，如下所示：

```
C:\Program Files (x86)\CodeBlocks\MinGW\bin\gcc.exe 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-07T21:32:41.983

您可以永久包含 MinGW 文件的目录，方法是单击我的电脑、属性、高级系统设置、环境变量，然后编辑并粘贴您的目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-09T02:54:03.250

在将 MinGW 存档解包`C:\MinGW`并将环境变量的路径设置为`C:\MinGW\bin;`.

当我尝试编译时出现此错误！

> gcc：错误：CreateProcess：没有这样的文件或目录

我终于发现一些下载的档案在解压时被报告损坏`C:\MinGW`（但我最初忽略了这一点）。一旦我删除了损坏的文件并再次从 SourceForge 重新下载了整个档案，将它们成功解压缩到 C:\MinGW，错误就消失了，编译器工作正常并输出了我想要的`hello.exe`.

我跑了这个：

```
gcc hello.c -o hello 
```

结果是这样的（闪烁的下划线）：

_

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-07T13:54:02.217

即使在我的环境变量中添加了正确的系统路径之后，我曾经在安装 MinGW 以在 Windows 中工作时遇到过这种问题。

经过几天的痛苦，我终于偶然发现了一个建议卸载原始 MinGW 编译器并删除`C:\MinGW`文件夹并安装 TDM-GCC MinGW 编译器的线程，可以在[这里](http://tdm-gcc.tdragon.net/download)找到。

您可以从下载页面选择 64/32 位安装程序，它也会为您创建环境路径变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-20T08:58:35.753

`%PATH%`您可以输入您的[msys](http://www.mingw.org/wiki/MSYS) shell ，而不是设置。在标准 msys 和 mingw 安装中，gcc 在路径中，因此您可以运行`gcc`或`which gcc`.

我的 Windows 7 上有一个批处理文件`sh.bat`，位于 %PATH% 中：

```
C:\lang\msys\bin\sh.exe --login %* 
```

每当我想使用 gcc 时，我都会输入 cmd, then `sh`, then `gcc`。我觉得很方便。

使用源自 linux 的软件时，请避免使用`Program Files`. 将它们安装到`Program_Files`. 对于您可能希望从 msys 环境运行的工具也是如此。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-04T17:49:43.157

如果您将文本粘贴到路径变量中并在分号前添加了一个空格，您应该删除它并在目录末尾添加一个反斜杠 (;C:\Program Files (x86)\CodeBlocks\MinGW\bin

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-10T19:53:42.977

你在哪里`gcc`？

我`gcc`在“C:\Program Files\CodeBlocks\MinGW\bin\”中。

```
"C:\Program Files\CodeBlocks\MinGW\bin\gcc" -c "foo.c"
"C:\Program Files\CodeBlocks\MinGW\bin\gcc" "foo.o" -o "foo 01.exe" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-18T05:15:48.850

在 Windows 10 中，可以在其他版本的 Windows 中遵循类似的步骤。

右键单击“我的电脑”选择属性，转到高级系统设置-> 高级-> 选择“环境变量..”。

找到“路径”选择它并选择编辑选项->单击新建并添加“C:\MinGW\bin”（或gcc.exe的位置，如果您已安装在其他位置）->保存并重新启动命令提示符. Gcc 应该可以工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-21T18:37:36.827

我回答这个问题很晚（确切地说是 5 年），但我希望这对某人有所帮助。

我怀疑这个错误是因为环境变量而不是 GCC。当您设置一个新的环境变量时，您需要打开一个新的命令提示符！这是 90% 的问题（当我第一次下载 GCC 时，我坚持了 3 个小时！）如果不是这种情况，你可能没有正确设置环境变量，或者你在一个文件夹中名称中的空格。

一旦你有 GCC 工作，每次编译和删除都会很麻烦。如果您不想安装完整的 ide 并且已经安装了 python，请尝试这个 github 项目：[https](https://github.com/sophiadm/notepad-is-effort) ://github.com/sophiadm/notepad-is-effort 这是一个用 tkinter 在 python 中编写的小型 IDE。您可以复制源代码并将其保存为 .py 文件

# javascript - 如何动态删除这些元素？

> ID：10661666
> 
> 赞同：2
> 
> 时间：2012-05-19T01:49:32.657
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

`<li>`如果元素的存在时间超过一分钟，我将尝试删除它们。每个都`<li>`包含一个`<a>`具有`data-created-at`属性的元素。该`created_at`值存储在服务器端的数据库中。

当页面加载时，它会显示来自数据库的记录。

```
<ul id="foobar">
  <% @foos.each do |foo| %>
    <li><%= link_to 'Foobar', '#', :'data-created-at' => foo.created_at.to_i %></li>
  <% end %>
</ul> 
```

`<li>`我的 JS 试图在删除元素之前比较系统（浏览器，而不是服务器）的时间：

```
$(document).ready(function(){
  setInterval(function() {
    $('#foobar a').each(function() {
      if(new Date().getTime() - $(this).data('created-at') >= 60000) {
        // It's been a minute
        $(this).parents('li').fadeOut()
      }
    });
  }, 10000); // 10 seconds
}); 
```

这是一个问题，因为我需要 JS 来动态删除任何`<li>`元素。由于`Date().getTime()`是基于浏览器/系统的。如果它处理`created_at`从服务器呈现的值，这有点不一致。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:27:36.310

是的@Lilina 有一个很好的方法。在 HTML 文档的末尾插入时间戳作为隐藏输入。这确保它最后加载。然后添加一个文档就绪处理程序来计算浏览器时间和系统时间之间的偏移量（来自隐藏的输入标签）。将此偏移量应用于所有 created-at 属性。

# facebook - 我可以在朋友的墙上张贴“打开图表操作”还是我需要经典的“墙贴”？

> ID：10661667
> 
> 赞同：1
> 
> 时间：2012-05-19T01:49:52.307
> 
> 标签：facebook, facebook-graph-api, permissions, facebook-opengraph

Open Graph 权限允许应用在用户自己的时间线上发布“操作”。

如果应用程序想在朋友的时间线上发布，它是否需要发布一个好的旧“墙帖”（publish_stream 权限）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:05:51.903

从[https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms](https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)可以清楚地看到，没有与“publish_actions”等效的朋友权限。

代表朋友发布动作完全没有意义，因为动作是由用户自己进行的；以对象/动作组合“书”和“阅读”为例——我在*你的*墙上贴出*你*应该正在阅读*哈利波特之类的东西……对**我来说*有什么意义？

# objective-c - UIPopOver 不显示内容？

> ID：10661669
> 
> 赞同：1
> 
> 时间：2012-05-19T01:50:31.283
> 
> 标签：objective-c, uipopovercontroller, uipopover

我试图让我的 UIPopOver[做到这一点](https://stackoverflow.com/questions/10645529/dismissing-and-opening-a-uipopover-with-one-uitoolbaritem-button)，它只是显示为蓝色 UIPopOver 而我的内容没有显示。到目前为止，这是我在主 ViewController 的 .m 文件中的代码：

```
- (void)viewWillAppear:(BOOL)animated
{
    self.PopOverController = [[UIPopoverController alloc] initWithContentViewController:viewController];
    [super viewWillAppear:animated];
} 
```

在我`IBAction`的按钮中，

```
if (self.PopOverController.popoverVisible) {
    [self.PopOverController dismissPopoverAnimated:YES];
} else {
    PopOverView *pickerPopView = [[PopOverView alloc] init];
    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:pickerPopView];
    [self.PopOverController setDelegate:self];
    [self.PopOverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:NO];
    [self.PopOverController setPopoverContentSize:CGSizeMake(320, 260)];
    [self.PopOverController release];   
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T04:54:53.507

不要只是将 pickerPopView 添加到 UIPopOverController 因为那是一个视图而不是控制器所以它会产生问题

# php - mysql区分和计数

> ID：10661670
> 
> 赞同：2
> 
> 时间：2012-05-19T01:50:59.337
> 
> 标签：php, mysql, sql, count

我有这样的表：

```
+------+-------+
| user | data  |
+------+-------+
|  1   |   a   |
+------+-------+
|  1   |   b   |
+------+-------+
|  2   |   c   |
+------+-------+ 
```

我需要得到类似的东西：

```
Array
(
    [1] => 2
    [2] => 1
) 
```

获取唯一用户并计算数据行中的实例，有什么想法吗？

我试过这个查询：

```
SELECT DISTINCT user from table ORDER BY ID DESC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T01:54:02.193

你应该使用`GROUP BY`这个。

```
SELECT `User`, COUNT(data) TotalCount
FROM tableName
GROUP BY `User`
ORDER BY TotalCount DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:55:03.967

从表 GROUP BY 用户中选择 COUNT(*)

（未测试）

# php - 使用 Zend 框架的 MVC 实现

> ID：10661671
> 
> 赞同：0
> 
> 时间：2012-05-19T01:51:03.217
> 
> 标签：php, model-view-controller, zend-framework

我目前正在为一个使用 Zend Framework 的 MVC 架构的站点开发登录系统。

哪种设计更有意义

*   注册和登录每个都有自己的一组模型、视图和控制器。

*   注册和登录都是在同一个模型、视图和控制器中实现的。

很想听听支持和反对这两种设计模式的论点，这样我就可以更好地理解使用 MVC 架构实现程序的“首选”或“最佳”方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:11:27.577

我认为分开`controllers`并且`views`应该用于**Login(Authentication)**和**Registration**但相同的数据库`Model`，`DbTable`并且`Mapper`类可以用于两者。

**例如：**

**登录控制器：**

```
index action (Show login form)
process action (Process login form) 
```

*访问网址：projectname.com/login*

**注册控制器：**

```
index action (Show registration form)
process action (Process registration form) 
```

*访问网址：projectname.com/registration*

**但是一样：**

```
Model class
Mapper class
DbTable class 
```

# scroll - 如何屏蔽固定图像？

> ID：10661677
> 
> 赞同：1
> 
> 时间：2012-05-19T01:52:31.110
> 
> 标签：scroll, element, z-index, fixed, masking

我是编码新手，第一次尝试设计自己的网站。我正在尝试创建一个页面，其中心有一个固定元素，当用户向下滚动页面时，该元素会发生变化。使用 z-index，我想让它在其他元素下方通过并改变外观。我正在寻找的是一种遮盖元素的方法，以便它仅在滚动到页面中间时才显示，就像 Photoshop 中的遮罩一样。

谢谢！

# javascript - 视图应该触发事件吗？

> ID：10661678
> 
> 赞同：1
> 
> 时间：2012-05-19T01:52:53.047
> 
> 标签：javascript, model-view-controller, oop, design-patterns

我有一个 GUI 的一部分的类。它是一个拨动开关，具有`switch`公共成员功能，可将 GUI 开关置于您想要的任何位置。当您单击 GUI 元素时，我希望`onToggle`在 GUI 调用该`switch`函数时触发一个事件。

这是我的选择（我正在考虑并希望得到您的建议）来实现这一点：

1）创建一个`setOnclick`公共成员函数，我的控制器可以使用它来将事件的触发分配给元素并处理`switch`函数调用。

```
toggleInstance.setOnclick(function() {
    onToggle.fire();
    toggleInstance.switch();
}) 
```

2）我可以将事件触发和`switch`函数调用放在类本身中

```
element.onclick = function() {
    onToggle.fire();
    public.switch();
} 
```

我认为让 GUI 类（例如我的拨动开关）完全没有任何逻辑或功能会很好，但我不确定这是否有必要。

我没有使用 MVC 框架，但我喜欢应用在 MV 和 C 之间分离功能的原则。

您能想到未来这两种方法的任何潜在缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:21:43.640

**HTML/CSS/JavaScript：**

在客户端代码中，您拥有表示内容的 HTML、定义该内容的呈现方式的 CSS 以及用于确定和分配内容和呈现元素的行为的 JavaScript。

简而言之，您在这里有正确的想法。仅仅通过将 JavaScript 排除在 HTML 之外，将 HTML 排除在 JavaScript 之外，您就已经在正确规划架构方面做了很多工作。

在 JavaScript 中，您可以遵循 MVC，但在大多数情况下，只要您记住 HTML 是内容，JavaScript 是行为，CSS 是表示，那么您已经做了很多工作来使您的代码具有高度可维护性。

话虽如此，让我们专注于您的 JavaScript。

**MVC：**

虽然我认为您确实有正确的想法，但您的第一个示例函数的命名可能并不完全正确。当我想到“setOnclick”时，我认为您正在设置 onclick 事件，而不是触发 onclick 事件。

因此，我描绘了这个：

```
// reuse this same function to bind that same event to other similar buttons
toggleInstance.setOnclick(function(element) {

    element.onclick = function() {
        onToggle.fire();
        public.switch();
    }
}); 
```

如果您需要多个控件来重复该事件，您只需传入该元素并将相同的单击处理程序绑定到它即可。

您可以通过在单独的函数中定义实际的事件处理程序来更进一步

```
// event handler is now named, so it can be easily reused
toggleSwitch: function() {
    onToggle.fire();
    public.switch();
}

toggleInstance.setOnclick(function(element) {

    // bind the event to the element passed in
    element.onclick = toggleInstance.toggleSwitch;
}); 
```

我唯一的建议是小心不要过度架构。MVC 是一种平衡，过度架构的东西可能与粗心的架构不足的东西一样笨拙和难以使用。

考虑这些细节很好；如果您知道需要重用哪些事件并专注于这些事件，他们将以较低的技术债务形式支付红利。

# c# - C# - 在程序中运行 CMD 命令。

> ID：10661692
> 
> 赞同：0
> 
> 时间：2012-05-19T01:55:56.000
> 
> 标签：c#, process, lua, cmd

我在此程序中运行 CMD 命令时遇到问题。我正在使用“lua LuaSrcDiet.lua myscript.lua -o myscriptdone.lua”命令。每当我运行程序时，它都会告诉我找不到指定的文件。我猜这是因为命令提示符在运行时不在正确的目录中。正确的目录是用户文件夹。你有什么办法可以让我解决这个问题。非常感谢。

```
try 
{
    File.Copy(filedir1, userPath + "/myscript.lua", true);
}
catch
{
    MessageBox.Show("There has been an problem. It may be because you need to select a Lua file to open.", "Love Compiler", MessageBoxButton.OK, MessageBoxImage.Error);
}

File.Copy("Stuff/LuaDiet/lua.exe", userPath + "/lua.exe", true);
File.Copy("Stuff/LuaDiet/LuaSrcDiet.lua", userPath + "/LuaSrcDiet.lua", true);

Process luarun = new Process();
luarun.StartInfo.WorkingDirectory = @"C:\Users\Leachman";
luarun.StartInfo.FileName = "lua LuaSrcDiet.lua myscript.lua -o myscriptdone.lua";
luarun.StartInfo.UseShellExecute = false;
luarun.StartInfo.Arguments = "/all";
luarun.StartInfo.RedirectStandardOutput = true;
luarun.StartInfo.CreateNoWindow = false;
luarun.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:59:53.987

看起来您正在尝试在文件名字段中传递参数。尝试将文件名设置为实际文件名（lua.exe）并将其他项目移动到参数部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:10:18.597

只需编辑这些行：

从 ：

```
luarun.StartInfo.FileName = "lua LuaSrcDiet.lua myscript.lua -o myscriptdone.lua";
luarun.StartInfo.Arguments = "/all"; 
```

到 ：

```
luarun.StartInfo.FileName = "lua.exe";
luarun.StartInfo.Arguments = "  LuaSrcDiet.lua myscript.lua -o myscriptdone.lua /all"; 
```

我认为这应该工作！

## 更新

看到您的评论后，我意识到您应该使用`AsynchronousFileCopy`.

代码来自[`Answer of another SO Question`](https://stackoverflow.com/a/882793/1118933)：

```
public class AsyncFileCopier
{
    public delegate void FileCopyDelegate(string sourceFile, string destFile);

    public static void AsynFileCopy(string sourceFile, string destFile)
    {
        FileCopyDelegate del = new FileCopyDelegate(FileCopy);
        IAsyncResult result = del.BeginInvoke(sourceFile, destFile, CallBackAfterFileCopied, null);
    }

    public static void FileCopy(string sourceFile, string destFile)
    { 
        // Code to copy the file
    }

    public static void CallBackAfterFileCopied(IAsyncResult result)
    {
        // Code to be run after file copy is done
    }
} 
```

像这样称呼它：

```
AsyncFileCopier.AsynFileCopy("Stuff/LuaDiet/lua.exe", userPath + "/lua.exe"); 
```

# objective-c - 为什么我需要不断地重新加载我的数据来填充我的 NSTableView？

> ID：10661693
> 
> 赞同：0
> 
> 时间：2012-05-19T01:56:11.127
> 
> 标签：objective-c, core-data, nsarray, nstableview

我正在使用 Objective-C 并在我的程序中遇到一个一致的问题。我有一堆 NSTableView，直到现在，我总是不得不在我的两个函数中不断地“重新加载”数据：numberOfRowsInTableView 和一个用内容填充它们的函数。

例如，我的“loadData()”函数使用获取请求（使用 Core Data）填充在我的 .h 文件中声明的数组。

我只想在我的“awakeFromNib”函数中访问这个 loadData() 函数，或者在更新内容时访问这个函数。但是，如果我不在两个必要的 NSTableView 函数的顶部添加对函数的调用，我发现程序会崩溃。

这开始引起问题，因为我认为在没有任何变化的情况下不断地从核心数据文件中获取是非常多余的。

这是一些代码：

```
- (int)numberOfRowsInTableView:(NSTableView *)aTableView {
[self loadData];

if ([aTableView isEqual:(invoicesListTable)])
{
    return (int)[fetchedInvoices count];
}} 
```

如果我不包含 [self loadData] 函数，程序就会崩溃。即使我在 awakeFromNib 函数中有 [self loadData] 也会发生这种情况。

为什么我的程序没有“记住”我的 fetchedInvoices 数组的值？它在我的 .h 文件中声明如下：`NSArray *fetchedInvoices;`

我的“loadData”函数如下：

```
- (void)loadData {
NSError *error = nil;

// fetch all invoices
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Invoice"
                                          inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"InvoiceNumber" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
[sortDescriptor release];

fetchedInvoices = [managedObjectContext executeFetchRequest:fetchRequest error:&error];

if (fetchedInvoices == nil) {
    NSLog(@"ERROR");
}
[fetchRequest release];
// end of invoice fetch 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T09:29:33.827

因为你没有使用 ARC——我`-release`在你的代码中看到了调用——你必须确保对象只要你想要它们就一直存在。

特别是，`-executeFetchRequest:error:`返回一个您不拥有的数组。它有一个不可预测的寿命。由于您将其保留很长时间，因此您需要保留它。如果您保留它，那么您当然也有责任在不再需要它时释放它。

确保正确进行内存管理（不使用 ARC）的最佳方法是将其限制在`-init`、`-dealloc`和属性的设置器中。因此，您应该使用适当的所有权语义（、、或）实现或`@synthesize`设置器，并使用它来设置属性，而不是直接分配实例变量。`fetchedInvoices``strong``retain``copy`

因此，例如，您可以将以下内容放入您的班级`@interface`：

```
@property (copy) NSArray *fetchedInvoices; 
```

然后，在您的 中`@implementation`，您将拥有：

```
@synthesize fetchedInvoices; 
```

或者您将使用其声明所需的语义来实现 setter。

然后，而不是这一行：

```
fetchedInvoices = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

你会这样做：

```
self.fetchedInvoices = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

或者，等效地，这个：

```
[self setFetchedInvoices:[managedObjectContext executeFetchRequest:fetchRequest error:&error]]; 
```

# objective-c - 将按钮连接到 webView 的问题

> ID：10661701
> 
> 赞同：0
> 
> 时间：2012-05-19T01:57:31.483
> 
> 标签：objective-c, uiwebview, uibutton

我有一个 UIWebView 应该在按下按钮时打开，但是按下它时模拟器上什么也没有发生。有人可能会看到我做错了什么吗？我不知道它是什么。这是按钮的 IBAction：

```
NSString *fullURL = @"http:coronetjck.com";
NSURL *url = [NSURL URLWithString:fullURL];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView setScalesPageToFit:YES];
[webView loadRequest:request]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:58:03.633

您是否缺少 URL 中的 2 个反斜杠？

```
NSString *fullURL = @"http:coronetjck.com"; 
```

应该：

```
NSString *fullURL = @"http://coronetjck.com"; 
```

# php - 无法使用 php 脚本和 fpdf 在 pdf 中打印希腊字符

> ID：10661703
> 
> 赞同：4
> 
> 时间：2012-05-19T01:58:26.583
> 
> 标签：php, character-encoding, pdf-generation, fpdf

在尝试打印希腊字符时`'φ'`，我在 pdf 上打印了以下字符`'Ï†'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-07-25T07:36:00.157

我会把这个留给下一个。

[FPDF 有自己的指南](http://www.fpdf.org/en/tutorial/tuto7.htm)，用于为特定编码导入新字体。步骤是：

1.  转到[http://www.fpdf.org/makefont/](http://www.fpdf.org/makefont/)并上传字体的 .ttf 或 .otf 文件（确保字体支持希腊字符，如 Courier New）。
2.  对于编码选项，根据指南选择 ISO-8859-7（最好）或 cp1253。
3.  下载创建的 .php 和 .z 文件并将它们存储在 fpdf 包的 fpdf/font 文件夹（如默认字体）中。
4.  在运行时将字体导入pdf文件`$pdf->AddFont('Courier New', '', 'Courier New.php');`
5.  并使用它`$pdf->SetFont('Courier New', '', 20);`
6.  您必须将要打印的字符串转换为 ISO-8859-7 编码。这是用`$text = iconv('UTF-8', 'ISO-8859-7', $text);`
7.  然后你终于可以打印字符串了`$pdf->Write(20,$text);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T00:06:45.457

您需要使用 FPDF 项目的 TFPDF 扩展。TFPDF 使用多字节字符串函数并使用 UTF-8 编码写入其输出，而 FPDF 没有。

看：

[http://fpdf.org/en/script/script92.php](http://fpdf.org/en/script/script92.php)

# objective-c - 在 UITableView 中显示建议的位置

> ID：10661707
> 
> 赞同：3
> 
> 时间：2012-05-19T01:59:45.517
> 
> 标签：objective-c, ios, xcode, uitableview, uisearchbar

基本上我想在我的应用程序中做的是有一个`UISearchBar`，当我写进去时，它将反馈位置结果并将其填充到出现的 UITableView 中。我在这个网站上看到另一个问题：

[在 UITableview 上显示位置](https://stackoverflow.com/questions/10140536/display-locations-on-uitableview)

但这真的对我没有帮助，根本没有答案对我有帮助，而且它们很模糊。

所以，我的问题是。您知道某些应用程序可能需要输入城市或国家/地区，但用户可能无法完全拼写，因此根据您的`UISearchBar`结果，它会显示带有建议城市的 TableView。所以说我要写新加坡，我不知道它是怎么拼写的。所以我写：

'唱歌'

和 BAM，下面的 UITableView 会弹出不同的选项/单元格标题，包括一个建议“新加坡”的单元格。然后我点击那个单元格，然后我的搜索栏会自动填充“新加坡”。这是我想对新加坡应用商店中名为“iChangi”的当前应用执行的操作的屏幕截图示例：

![我正在尝试做的屏幕截图](../Images/018af7aac1dd0d97d11454cca6b80fdd.png)

所以我知道我应该实现`UISearchBar`文本更改的委托，但我想知道是否有 API 或数据库可以查询以反馈建议的城市？我将**如何**去做，你能给我提供一个教程或者简单地说明几个步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:14:05.267

在表格视图和搜索栏的帮助下，您可以创建城市列表的演示文稿。现在关于城市列表的 API，在 Map 上有许多可用的链接。请参考以下

[http://www.geonames.org/export/](http://www.geonames.org/export/)

[https://developers.google.com/adwords/api/docs/appendix/cities_world](https://developers.google.com/adwords/api/docs/appendix/cities_world)

从上面的 URL 下载表格并将其与资源目录一起放置并用于建议。

查看更多相同的链接

[http://www.geodatasource.com/cities-free.html](http://www.geodatasource.com/cities-free.html)

[http://weather.noaa.gov/data/nsd_cccc.txt](http://weather.noaa.gov/data/nsd_cccc.txt)

[http://www.geonames.org/export/JSON-webservices.html#citiesJSON](http://www.geonames.org/export/JSON-webservices.html#citiesJSON)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:36:38.837

我知道这已经很晚了，但也许它可以帮助其他人，我最近创建了`autocomplete view`，它可以附加到任何`UITextField`，只需一行代码。可以配置颜色、分隔符、边距。附带谷歌位置完成源。

你可以[从 GitHub 克隆它](https://github.com/TarasRoshko/TRAutocompleteView)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:49:37.173

检查这个项目[http://iosboilerplate.com/#maps](http://iosboilerplate.com/#maps)

# oracle - Oracle NUMBER 数据类型中的精度和小数位数是什么意思

> ID：10661708
> 
> 赞同：6
> 
> 时间：2012-05-19T01:59:45.947
> 
> 标签：oracle, oracle10g, oracle11g, sqldatatypes

我一直在阅读 Oracle DB 的初学者指南。精度和规模的定义相当混乱。书说：

```
number(6,3) 

Oracle allows for 2 not 6 significant digitalis. 
```

我的问题是，6 表示精度。这意味着有效数字的数量。所以它应该接受 6 位有效数字。为什么这本书说它是2位有效数字

我所指的书是[Oracle Database 11g A Beginner's Guide，McGraw Hill Professional，2008 年 12 月 18 日](http://books.google.ch/books/about/Oracle_Database_11g_A_Beginner_s_Guide.html?id=sof6utYpfMYC&redir_esc=y)，第 12 页

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T02:09:10.090

查看在线 Oracle[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#autoId6)：

> p 是精度，或有效十进制数字的最大数量，其中最高有效数字是最左边的非零数字，最低有效数字是最右边的已知数字。Oracle 保证数字的可移植性，精度高达 20 个 base-100 位，这相当于 39 或 40 个十进制数字，具体取决于小数点的位置。
> 
> s 是比例，或从小数点到最低有效位的位数。范围可以从 -84 到 127。
> 
> 正小数位数是小数点右侧的有效数字位数，包括最低有效数字。
> 
> 负数是小数点左边的有效数字位数，但不包括最低有效数字。对于负比例，最低有效位在小数点左侧，因为实际数据四舍五入到小数点左侧的指定位数。例如，指定 (10,-2​​) 意味着四舍五入到数百。

# c# - 修改枚举值的扩展方法

> ID：10661714
> 
> 赞同：4
> 
> 时间：2012-05-19T02:01:05.967
> 
> 标签：c#, enums, extension-methods

我对扩展有点陌生。在发布之前，我四处寻找一个现有的答案，因为我讨厌写，但我没有看到任何我发现有帮助的东西。

我想要一个带有 Flag 属性的枚举的扩展方法，我可以调用它来基本上将另一个枚举/标志附加到调用枚举。

在有人将其否决到 Int32.MinValue 之前，我*确实*看起来相当数量，但我发现的只是一堆关于“IsFlagSo-and-SoSet”和标志处理的问题，而不是简单的添加标志。

我将枚举定义如下：

```
 [Flags]
    internal enum eDiskFormat
    {
        None        = 0x00,

        _3D         = 0x01,

        Blu_ray_3D  = 0x02,

        Blu_ray     = 0x04,

        DigitalCopy = 0x08,

        Dvd         = 0x10

    } 
```

扩展定义为：

```
 internal static void AddFormat(this Movie.eDiskFormat target, Movie.eDiskFormat newFormat)
    {
        target |= newFormat;
    } 
```

当我如下调用它时，我希望生成的枚举是 Movie.eDiskFormat.Blu_ray...（它被初始化为 eDiskFormat.None）。

```
m.DiskFormat.AddFormat(Movie.eDiskFormat.Blu_ray); 
```

相反，结果值仍然是 eDiskFormat.None。我认为用“this”传递变量与通过引用传递*非常*相似，但我显然是不正确的。方法内部的值和我想的一样，但是结果……好吧，我想我已经说过了；因此这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:04:57.583

枚举是值类型。它们是不可变的。你不能改变他们的价值。

你能做的最好的事情是这样的：

```
m.DiskFormat = m.DiskFormat.AddFormat(Movie.eDiskFormat.Blu_ray); 
```

在哪里

```
internal static Movie.eDiskFormat AddFormat(this Movie.eDiskFormat target, 
                                                 Movie.eDiskFormat newFormat)   
{   
    return target | newFormat;   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-27T23:16:26.337

从 C# 7.2 开始

只需添加参考

```
internal static void AddFormat(ref this Movie.eDiskFormat target, Movie.eDiskFormat newFormat)
{
    target |= newFormat;
} 
```

# python - 存储用户信息 Django

> ID：10661716
> 
> 赞同：2
> 
> 时间：2012-05-19T02:01:38.773
> 
> 标签：python, sql, django, web, django-database

对于网站上的用户，使用数据库在 Django 中存储信息的最佳方式是什么。我正在处理的网站有以下部分：

1.  一种聊天室，用户可以在其中发表评论。
2.  一组对其他用户公开的文档。
3.  对每份文件的审查

问题是，文件应该存储在哪里？（我不知道每个人会有多少）。对于每个文档，评论应该存储在哪里？（我不知道会有多少评论）。

我对 Django 很陌生，刚开始买我买的书，但需要开始计划才能在 8 月之前完成（对于这么新的人来说，这甚至可能吗？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T02:30:49.850

直截了当的[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)，您应该为每个工件创建一个模型（对象） - 例如：

```
class ChatComment(models.Model):
    owner = models.ForeignKey(User)
    when = models.DateTimeField(auto_now_add=True)
    message = models.CharField(...)
    ...
    chatroom = models.ForeignKey(ChatRoom)

class PublicDocument(models.Model):
    owner = models.ForeignKey(User)
    created = models.DateTimeField(auto_now_add=True)
    title = models.CharField(...)
    payload = models.FileField(...)

class DocumentReview(models.Model):
    author = models.ForeignKey(User)
    document = models.ForeignKey(PublicDocument)
    when = models.DateTimeField(auto_now_add=True)
    text = models.CharField(...) 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:39:27.180

保罗的回答很到位。但我还要补充一点，您应该仔细阅读[FileField的文档。](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)

文档通常存储在文件系统的目录中。数据库（根据保罗的回答）将包含对该位置的引用。Django 几乎可以使用 FileField 自动为您执行此操作，因此只需阅读并确保您理解它。

# cocos2d-iphone - 在 ccTouchesMoved 上获取 CCSprite

> ID：10661721
> 
> 赞同：0
> 
> 时间：2012-05-19T02:02:35.760
> 
> 标签：cocos2d-iphone, chipmunk

在 cocos2d 中，我动态创建了许多精灵，我需要在事件方法中获取当前触摸的精灵以进行拖放。

使用这种方法：

```
- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:25:27.760

只是快速谷歌试试这个......

[http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d](http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d)

# storyboard - 无法打开 .storyboard 文件

> ID：10661722
> 
> 赞同：1
> 
> 时间：2012-05-19T02:02:52.843
> 
> 标签：storyboard

我有一个全新的 Mac Mini 安装（雪豹）并安装了 XCode 4-2.2。安装了最新的 monotouch 库。

当我在 monotouch 中双击 .storyboard 文件时，出现以下错误。有任何想法吗？：

**更新 Objective-C 类型信息时出错。不支持操作。**

```
System.NotSupportedException: Operation is not supported.
  at ICSharpCode.NRefactory.TypeSystem.CecilLoader+BlobReader.ReadCustomAttributeFieldOrPropType () [0x00146] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/contrib/ICSharpCode.NRefactory/TypeSystem/CecilLoader.cs:1224 
  at ICSharpCode.NRefactory.TypeSystem.CecilLoader+BlobReader.ReadNamedArg (IType attributeType) [0x00040] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/contrib/ICSharpCode.NRefactory/TypeSystem/CecilLoader.cs:1173 
  at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.DecodeBlob (System.Collections.Generic.List`1 positionalArguments, System.Collections.Generic.List`1 namedArguments) [0x0008c] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/contrib/ICSharpCode.NRefactory/TypeSystem/CecilLoader.cs:913 
  at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.DecodeBlob () [0x0000c] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/contrib/ICSharpCode.NRefactory/TypeSystem/CecilLoader.cs:894 
  at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.get_PositionalArguments () [0x00014] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/contrib/ICSharpCode.NRefactory/TypeSystem/CecilLoader.cs:869 
  at MonoDevelop.MacDev.ObjCIntegration.NSObjectInfoService.ConvertType (MonoDevelop.Ide.TypeSystem.ProjectContentWrapper dom, ITypeDefinition type) [0x00064] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/addins/MonoDevelop.MacDev/ObjCIntegration/NSObjectInfoService.cs:174 
  at MonoDevelop.MacDev.ObjCIntegration.NSObjectInfoService+<GetRegisteredObjects>c__Iterator2.MoveNext () [0x000d2] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/addins/MonoDevelop.MacDev/ObjCIntegration/NSObjectInfoService.cs:152 
  at MonoDevelop.MacDev.ObjCIntegration.NSObjectProjectInfo.Update () [0x0022a] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/addins/MonoDevelop.MacDev/ObjCIntegration/NSObjectProjectInfo.cs:102 
  at MonoDevelop.MacDev.ObjCIntegration.NSObjectProjectInfo.Update (Boolean force) [0x0000c] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/addins/MonoDevelop.MacDev/ObjCIntegration/NSObjectProjectInfo.cs:73 
  at MonoDevelop.MacDev.XcodeSyncing.XcodeProjectTracker.UpdateTypes (IProgressMonitor monitor) [0x00031] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/addins/MonoDevelop.MacDev/XcodeSyncing/XcodeProjectTracker.cs:392 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:19:55.067

我是 Monotouch 的新手，遇到了同样的错误。

我只是关闭了 Monotouch。打开 XCode 以确保它没有问题，然后关闭 Xcode。再次打开 Monotouch，它运行了一些 xcode 更新并修复了问题。

# python - 使用谷歌日历 api v3 进行身份验证

> ID：10661726
> 
> 赞同：2
> 
> 时间：2012-05-19T02:03:33.920
> 
> 标签：python, calendar

来自这个人的问题：[未经授权的与谷歌日历 API v3 的交互](https://stackoverflow.com/questions/10591849/unauthorized-interaction-with-google-calendar-api-v3)

我知道，谷歌日历不能与 service_account 一起使用。

关键是，我需要编写一个在我的服务器中运行的脚本/python，这个脚本从谷歌日历中获取我的日历数据

但是，我怎样才能对谷歌进行身份验证？不是 Web 应用程序，不是 installed_app，只是一个脚本

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:54:46.280

这些是获取[Google 日历 API 访问权限](https://developers.google.com/google-apps/calendar/firstapp)的说明。

此处有安装[Google 库和示例代码](https://developers.google.com/google-apps/calendar/instantiate)的详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T09:53:10.573

实际上谷歌日历适用于服务帐户。我在 php 和 java 中成功使用它。您需要前往 Google 开发者控制台创建一个项目，然后为该项目创建服务帐户，并启用 API 访问。您将使用它提供给您的服务帐户 ID 和密钥来进行授权。

# java - 为什么'T'与.Net和Java中的通用而不是'G'相关联

> ID：10661731
> 
> 赞同：1
> 
> 时间：2012-05-19T02:04:44.007
> 
> 标签：java, .net, generics, extension-methods

我是一个 .Net 人（尽管这也适用于 java），但我找不到文档或任何文献告诉我们为什么使用字母表`T`来表示通用类。如果是`G`我们本可以理解但为什么`T`。

`T`微软通过以like`TSource`或开头来使用它们`TResult`

```
public static void FooBar<TSource>(this IEnumerable<TSource> Foo)
{
} 
```

不仅在 .Net 中，而且在 java 中，我也看到了这种模式。但为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T02:08:31.620

T 代表“类型”。假设您的泛型类旨在处理任何类型，那么这是您可以使用的最佳名称。

G 没有意义，因为类型参数本身不是泛型类。

有时，当类型参数是指更具体的东西时，会使用其他首字母缩写，例如：

```
Map<K, V> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T02:08:52.153

根据 Oracle 文档，T 代表“类型”。 [来源](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)。

# mysql - MySQL - 如何从表中获取结果，以及一个查询中有多少个连接项的计数？

> ID：10661734
> 
> 赞同：0
> 
> 时间：2012-05-19T02:05:47.333
> 
> 标签：mysql, sql

我有一个这样的查询：

```
select display_order , section_name , solution_section_id from solution_sections order by display_order 
```

它非常基础，可以获取特定讨论的部分。有用。

我想要做的是还显示每个部分中的评论数量。所以我想在评论表上做一个连接，并计算有多少评论。

这是其他表的架构：

```
mysql> describe suggested_solution_comments;
+-----------------------+----------------+------+-----+---------+----------------+
| Field                 | Type           | Null | Key | Default | Extra          |
+-----------------------+----------------+------+-----+---------+----------------+
| comment_id            | int(10)        | NO   | PRI | NULL    | auto_increment |
| problem_id            | int(10)        | NO   |     | NULL    |                |
| suggested_solution_id | int(10)        | NO   |     | NULL    |                |
| commenter_id          | int(10)        | NO   |     | NULL    |                |
| comment               | varchar(10000) | YES  |     | NULL    |                |
| solution_part         | int(3)         | NO   |     | NULL    |                |
| date                  | date           | NO   |     | NULL    |                |
| guid                  | varchar(50)    | YES  | UNI | NULL    |                |
+-----------------------+----------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> describe solution_sections;
+---------------------+---------------+------+-----+---------+----------------+
| Field               | Type          | Null | Key | Default | Extra          |
+---------------------+---------------+------+-----+---------+----------------+
| solution_section_id | int(10)       | NO   | PRI | NULL    | auto_increment |
| display_order       | int(10)       | NO   |     | NULL    |                |
| section_name        | varchar(1000) | YES  |     | NULL    |                |
+---------------------+---------------+------+-----+---------+----------------+ 
```

所以它必须是 solution_section_id 和 solution_part 的连接（即使它们的命名有些不一致，它们也是外键）其中问题 ID = 一些 ID。

但是，我将如何获得Suggested_solution_comments 表中返回评论的数量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:13:44.097

```
SELECT solution_sections.display_order, solution_sections.section_name, solution_sections.solution_section_id, COUNT(suggested_solution_comments.comment_id) FROM solution_sections, suggested_solution_comments GROUP BY solution_sections.solution_section_id 
```

也许尝试这样的事情？自从我接触表连接以来已经有一段时间了，你的表命名对我来说看起来很混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:20:20.890

更新外连接：

```
select s.display_order, s.section_name, s.solution_section_id
      ,count(c.comment_id) AS comment_count
  from solution_sections s
  left outer join suggested_solution_comments c ON (c.solution_part = s.solution_section_id)
  group by s.display_order, s.section_name, s.solution_section_id
  order by display_order 
```

# objective-c - EXC_BAD_ACCESS 试图实现 NSTableView 委托协议

> ID：10661737
> 
> 赞同：0
> 
> 时间：2012-05-19T02:06:03.697
> 
> 标签：objective-c, delegates, exc-bad-access

我正在关注“Mac OS X 的 Cocoa 编程”的示例，它解释了如何实现 NSTableView 的协议。
我试着按照书上说的做所有事情，但可能我错过了一些东西。
有一个 NSSpeechSynthesizer 和一个文本域，每次用户按下“speak”按钮，文本域的内容由语音合成器说出。还有一个 NSTableView 包含所有声音的列表，用户可以选择他更喜欢的声音。
这是代码：

界面：

```
#import <Cocoa/Cocoa.h>

@interface SpeakLineAppDelegate : NSObject <NSApplicationDelegate, NSSpeechSynthesizerDelegate, NSTableViewDelegate, NSTableViewDataSource> 
{
@private
    NSWindow *window;
    NSTextField *textField;
    NSTableView *tableView;
    NSButton *speakButton;
    NSSpeechSynthesizer* ss;
    NSButtonCell *stopButton;
    NSArray* voices;
}

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSTextField *textField;
@property (assign) IBOutlet NSTableView *tableView;

@property (assign) IBOutlet NSButton *speakButton;

- (IBAction)speak:(id)sender;
- (IBAction)stop:(id)sender;
@property (assign) IBOutlet NSButtonCell *stopButton;

@end 
```

执行：

```
#import "SpeakLineAppDelegate.h"

@implementation SpeakLineAppDelegate
@synthesize stopButton;
@synthesize textField;
@synthesize tableView;
@synthesize speakButton;

@synthesize window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
 }

- (id) init
{
    self=[super init];
    if(self)
    {
        NSLog(@"init method called");
        ss=[[NSSpeechSynthesizer alloc]initWithVoice:nil];
        [ss setDelegate: self];
        voices=[NSSpeechSynthesizer availableVoices];
    }
    return self;
}

- (IBAction)speak:(id)sender 
{
    NSString* str=[textField stringValue];
    if([str length]>0)
    {
        [ss startSpeakingString: str];
        [stopButton setEnabled: YES];
        [speakButton setEnabled: NO];
    }
    else
    {
        NSLog(@"The string has length zero");
    }
}

- (IBAction)stop:(id)sender 
{
    [ss stopSpeaking];
}

- (void) speechSynthesizer:(NSSpeechSynthesizer *)sender didFinishSpeaking:   (BOOL)finishedSpeaking
{
    NSLog(@"Has finished speaking");
    [stopButton setEnabled: NO];
    [speakButton setEnabled: YES];
}

- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView
{
    return [voices count];
}

- (id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSString* str=[voices objectAtIndex: row];
    NSDictionary* dict=[NSSpeechSynthesizer attributesForVoice: str];
    return [dict objectForKey: NSVoiceName];
}

- (void)tableViewSelectionDidChange:(NSNotification *)notification
{
    NSInteger row=[tableView selectedRow];
    if(row!=-1)
    {
        NSString* str=[voices objectAtIndex: row];
        [ss setVoice: str];
        NSLog(@"New voice: %@",str);
    }
}

@end 
```

我还在 xib 文件中完成了以下操作：
-我已将 NSTableView 的选项“数据源”和“委托”链接到 SpeakLineAppDelegate（我的应用程序的文件名）。
IBOutlet textField 与 xib 文件中的 NSTextField 链接，speak 和 stop 也是为 xib 文件中的按钮设置的操作。
NSTableView 是 IBOutlet “tableView”，这个也是在 xib 文件中链接的。
问题：此时我得到 EXC_BAD_ACCESS：

```
- (id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSString* str=[voices objectAtIndex: row];  // here I get the exception
    NSDictionary* dict=[NSSpeechSynthesizer attributesForVoice: str];
    return [dict objectForKey: NSVoiceName];
} 
```

我无法弄清楚这个异常的原因，因为声音是在 init 方法中分配的。
使用gdb，如果我在抛出异常时尝试打印行的值，它会打印为零，所以我真的不知道我的代码有什么问题。

# oracle - 尝试使用 Lotus 中的 Java 代理连接 Oracle 数据库时出现连接错误

> ID：10661738
> 
> 赞同：0
> 
> 时间：2012-05-19T02:06:06.423
> 
> 标签：oracle, jdbc, lotus-notes

尝试连接到 lotus notes java 代理的数据库时显示以下错误。JDBC 驱动程序存储在服务器上（myserver:/opt/ibm/lotus/notes/85020/linux/jvm/lib/ext），因此当同一个驱动程序嵌入应用程序时，驱动程序只加载一次而不是多次。问题是驱动程序内置到应用程序中时不会发生错误，但我不能离开它，jar必须在服务器内。有谁知道可能是什么？

18/05/2012 21:44:18 代理错误：java.sql.SQLException：Exceo de E/S：网络适配器无法建立连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:37:36.883

您可以直接在服务器上使用例如 Telnet 访问 Oracle 数据库吗？也许防火墙阻止了端口？确保检查从服务器到 Oracle 数据库的一切是否按预期工作。

查看有关 Oracla 连接错误的其他答案： [https ://stackoverflow.com/search?q=ORACLE+The+Network+Adapter+could+not+establish+the+connection](https://stackoverflow.com/search?q=ORACLE+The+Network+Adapter+could+not+establish+the+connection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T05:10:37.203

由于您的代码在 jar 内置到代理中时有效，但在外部时无效，我认为您很可能遇到了安全限制问题。默认情况下，Domino JVM 限制了外部 jar 的权限，我认为网络访问是限制区域之一。可以通过编辑 jvm/lib/security/java.policy 文件来调整权限。您可以在[此处](http://www-01.ibm.com/support/docview.wss?uid=swg21279509)找到有关它的一些信息。

# java - 为什么这不起作用（Java）？（数组到 int 类型的 Arraylist 中）

> ID：10661742
> 
> 赞同：-2
> 
> 时间：2012-05-19T02:06:56.417
> 
> 标签：java, arrays, arraylist, int

我正在处理的这个小程序的正确代码是什么？我只需要将 int 类型的数组添加到 Arraylist 中......粗体是主要问题（如果其余的工作...... -__-）！

```
import java.applet.Applet;
import java.awt.*; 
import java.awt.event.*; 
import java.applet.*; 
import javax.swing.*; 
import java.text.DecimalFormat;
import java.util.ArrayList;
public class BinomialExpander extends JApplet implements ActionListener 
{ 
     JLabel lblFahrenheit; 
     JLabel lblCelsius; 
     JLabel outputCelsius; 
     JTextField txtFahrenheit; 
     double degreesFahrenheit; 
     FlowLayout layout;
     ArrayList<int[]> pascalsT = new ArrayList<int[]>();
     private int[] pascal1 = {1,1};
     private int[] pascal2 = {1,2,1};
     private int[] pascal3 = {1,3,3,1};
     private int[] pascal4 = {1,4,6,4,1};
     private int[] pascal5 = {1,5,10,10,5,1};
     private int[] pascal6 = {1,6,15,20,15,6,1};
     private int[] pascal7 = {1,7,21,35,35,21,7,1};
     private int[] pascal8 = {1,8,28,56,70,56,28,8,1};
     private int[] pascal9 = {1,9,36,84,126,84,36,9,1};
     private int[] pascal10 = {1,10,45,120,210,120,45,10,1};
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:16:58.447

如果我理解您的问题，您只想将数组值放入列表中。

在所有声明之后添加以下内容：

```
{
    pascals.add(pascal1);
    pascals.add(pascal2);
    ...
} 
```

或者，您可以在构造函数中添加这些语句。这种特殊的语法就是所谓的实例初始化器。它在您的构造函数之前运行，您可以在类中的任何位置使用它们，并且它将按照声明的顺序运行。实际上，您可以将它们与变量声明交错，但我相信变量必须在引用它的实例初始化程序之上声明。

附带说明一下，拥有一个带有赋值的实例变量是必不可少的。

```
private Integer a = new Integer(1); 
```

在功能上等同于

```
private Integer a;
{ a = new Integer(1); } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-19T02:24:37.197

Array 到 ArrayList 的转换就是这样完成的，试试这个：

```
int[] a = {1,2,3};

List list = new ArrayList(Arrays.asList(a)); 
```

# hibernate - Grails 1.1 应用程序的集成测试无法在 Grails 2.0.3 中运行。会不会是 GORM 配置问题？

> ID：10661763
> 
> 赞同：4
> 
> 时间：2012-05-19T02:12:08.080
> 
> 标签：hibernate, grails, grails-orm, h2

我正在研究 Smith 和 Ledbrook 的*Grails in Action。*书中的示例是针对 Grails 1.1 和 Hibernate 1.1 编写的（根据下载源的 application.properties）。

其中一个例子是“hubbub”。我的机器上有 Grails 2.0.3。我使用“grails create-app hubbub”创建了自己的应用程序副本，使用 Grails 命令创建了域类和测试，然后在书中输入了源代码。换句话说，我并不是要在 Grails 2.0.3 环境中运行使用 Grails 1.1 生成的源代码树。Grails 2.0.3 生成了并非示例所独有的所有配置和类。我只是在示例中输入了最初不是由 Grails 生成的少量源代码。

这是我的问题 - 集成测试之一使用 save() 方法来持久化对象。当我运行测试时，它只包含一个 save()，它成功了。但是，如果测试包含多个 save() 方法，**则在第一个方法之后对 save() 的所有调用都会失败，并显示：**

```
| Failure:  testSaveAndUpdate(com.grailsinaction.UserIntegrationTests)
|  groovy.lang.MissingMethodException: No signature of method:
   com.grailsinaction.User.save() is applicable for argument
   types: () values: []
 Possible solutions: save(), save(boolean), save(java.util.Map), wait(), 
   any(), wait(long)
 at
 com.grailsinaction.UserIntegrationTests.testSaveAndUpdate
 (UserIntegrationTests.groovy:46) 
```

我重新安排了对 save() 的调用，*第*一个总是有效，而后续调用总是失败。我已经注释掉了运行每个调用以自行保存的测试，并且每个人都可以自行成功。

这是我调用 save() 方法的类：

```
package com.grailsinaction

class User {

String userId
String password
String homepage
Date dateCreated

static constraints = {
    userId(size: 3..20, unique: true)
    password(size: 6..8)
    homepage(url: true, nullable: true)
} 
```

这是在 User 上调用 save() 的集成测试：

```
package com.grailsinaction

import grails.test.*

class UserIntegrationTests extends GrailsUnitTestCase {

void testFirstSaveEver() {
    def user = new User(userId: 'joe', password: 'secret',
        homepage: 'http://www.grailsinaction.com')
    assertNotNull user.save()
    assertNotNull user.id

    def foundUser = User.get(user.id)
    assertEquals 'joe', foundUser.userId
}

void testSaveAndUpdate() {
    def user = new User(userId: 'joe', password: 'secret',
        homepage: 'http://www.grailsinaction.com')
    assertNotNull user.save()

    def foundUser = User.get(user.id)
    foundUser.password = 'sesame'
    foundUser.save()

    def editedUser = User.get(user.id)
    assertEquals 'sesame', editedUser.password
 }
} 
```

这是我生成的 DataSource.groovy 中的数据配置（为简洁起见，除测试之外的所有环境都被删除）：

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "sa"
    password = ""
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        ...
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE"
        }
    }
    production {
        dataSource {
            ...
            }
        }
    }
} 
```

以下是书中的原文：

```
dataSource {
    pooled = true
    driverClassName = "org.hsqldb.jdbcDriver"
    username = "sa"
    password = ""
}
hibernate {
    cache.use_second_level_cache=true
    cache.use_query_cache=true
    cache.provider_class='com.opensymphony.oscache.hibernate.OSCacheProvider'
}
// environment specific settings
environments {
    development {
        dataSource {
            ...
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:hsqldb:mem:testDb"
        }
    }
    production {
        dataSource {
            ...
        }
    }
} 
```

跳出来的最大区别是原来的驱动是org.hsqldb.jdbcDriver，而Grails 2.0.3使用的是org.h2.Driver。另一个主要区别是原始数据源 url 是 jdbc:hsqldb:mem:testDb，而新的数据源是 jdbc:h2:mem:testDb;MVCC=TRUE。最后，指定的缓存机制有很大不同。

这可能是一个配置问题，必须对 h2 和 hsqldb 之间的差异做一些事情吗？如果是这样，我去了解我需要做什么才能使其正常工作的最佳地点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T04:02:15.580

在 grails 2 中，您不应该`GrailsUnitTestCase`在集成测试中进行扩展，将其更改为`GroovyTestCase`并且您应该摆脱该问题。

这失败了，因为`GrailsUnitTestCase`认为这是一个必须从域对象中模拟（然后拆除并删除）GORM 方法的单元测试。它没有意识到它有真正的方法，而不是模拟。

# jquery - mvc 3远程验证未触发

> ID：10661764
> 
> 赞同：2
> 
> 时间：2012-05-19T02:12:11.310
> 
> 标签：jquery, ajax, asp.net-mvc-3, c#-4.0

我第一次尝试在 MVC 3 中使用远程数据注释。我缺少一些简单的东西。设置根本没有触发控制器操作，我没有立即看到问题。

我正在尝试验证用户名的唯一性。

这是代码设置。

查看代码

```
@Html.Raw(Html.Script("jquery.validate.min.js"))
@Html.Raw(Html.Script("jquery.validate.unobtrusive.min.js"))

<tr>
            <td class="editor-label">@Html.LabelFor(model => model.UserName):</td>
            <td  class="editor-field">@Html.EditorFor(model => model.UserName)</td>
            <td>@Html.ValidationMessageFor(model => model.UserName)</td>
        </tr> 
```

视图模型代码

```
 [DisplayName("Username")]
    [StringLength(100)]
    [Remote("CheckIfUsernameExists", "UserProfile", ErrorMessage = "This username is taken. Please enter a different user name.")]
    public string UserName { get; set; } 
```

控制器代码

```
[HttpGet]
        public JsonResult CheckIfUsernameExists(string userName)
        {
            return Json("false");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:39:16.087

检查您的设置，应启用客户端验证和不显眼

```
<appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

下面的代码应该可以工作

```
 [Get]
    public JsonResult CheckIfUsernameExists(string userName)
    {
        return Json(false,JsonRequestBehavior.AllowGet);
    } 
```

# objective-c - 检索 `valueForKey` 作为字符串

> ID：10661769
> 
> 赞同：0
> 
> 时间：2012-05-19T02:13:15.567
> 
> 标签：objective-c, xcode

我有一个`NSArray`包含三个键及其对应值的键......当我使用方法检索键的值时，我`valueForKey:`在 a 上得到了这个`NSLog()`：

```
2012-05-18 21:59:52.176 ScrollApp[21443:f803] value for key is(
    "Image 4"
) 
```

这正是我在 plist 上设置的值。

但是，如果我将此值分配给标签的文本，编译器会抱怨`unrecognized selector sent to instance`.

我知道我必须将数组的返回值作为字符串检索并将其传递给标签。

问题是**如何？**

这是代码：

```
NSArray *imgList = [[NSArray alloc]initWithContentsOfFile:path];
NSArray *imgName = [[NSArray alloc] initWithObjects:[imgList objectAtIndex:3], nil];

NSLog(@"%@", [imgName valueForKey:@"Details"]);

NSString *currentPic = [imgName valueForKey:@"Details"];

subPanel.small_panel_Detail_Lbl.text =  currentPic; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:59:41.727

valueForKey 发送到数组时会返回数组中具有该键的所有值的数组——它可能只有一个值，但它会在数组中。如果你记录 [currentPic class]，我猜它会是一个数组，所以你需要发送 objectAtIndex 给它以获取单个字符串

# php - MySQL (# of Products in Category) COUNT() w/ LEFT JOIN & ON 2 表

> ID：10661773
> 
> 赞同：2
> 
> 时间：2012-05-19T02:13:46.037
> 
> 标签：php, mysql, sql

我正在尝试解决每个类别中所有产品的计数问题。产品由**PRODUCT_ID**唯一标识。PRD_PRODUCTS表没有 CATEGORY_ID 字段，但所有产品都在 PRODUCT_ID 和 CATEGORY_ID的连接表**PRD_CATEGORIES中****连接。**

**我有 2 张桌子：**

PRD_PRODUCTS 和 PRD_CATEGORIES。

```
PRD_PRODUCTS
------------
PRODUCT_ID  - varchar(64)
TITLE - varchar(64)

PRD_CATEGORIES
--------------
CATEGORY_ID - varchar(64)
PRODUCT_ID - varchar(64)
TITLE - varchar(64) 
```

**示例数据：**
PRODUCT_ID：*5e313ec3bf7b967569eec196b4693829（分配给每个产品的唯一 ID）*
TITLE：*产品名称一（产品名称）*
PARENT_CATEGORY_ID：（与 CATEGORY_ID 连接）
CATEGORY_ID：10（每个类别的唯一标识符）

**这就是我目前正在使用的**，并且只是在错误之后得到错误。最后一个错误说 PRODUCT_ID 字段不存在，但我确定它确实存在。希望对这件事有新的看法……

```
$db->query="SELECT count(a.PRODUCT_ID), 

    a.PRODUCT_ID,
    a.TITLE 

    FROM 

    PRD_PRODUCTS AS a, 
    PRD_CATEGORIES AS b

    LEFT JOIN PRD_PRODUCTS ON a.PRODUCT_ID = b.PRODUCT_ID

    LEFT JOIN PRD_CATEGORIES ON b.CATEGORY_ID = c.CATEGORY_ID 

WHERE a.SHOW_ON = 'A' 

GROUP BY a.PRODUCT_ID

ORDER BY a.TITLE DESC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:25:44.963

你不只是在寻找这样的东西吗？

```
SELECT CATEGORY_ID, COUNT(PRODUCT_ID) AS product_count
  FROM PRD_CATEGORIES
  GROUP BY CATEGORY_ID 
```

更新过滤器：

```
SELECT pc.CATEGORY_ID, COUNT(pc.PRODUCT_ID) AS product_count
  FROM PRD_CATEGORIES pc
      ,PRD_PRODUCTS p
  WHERE pc.PRODUCT_ID = p.PRODUCT_ID
    AND p.SHOW_ON = 'A'
  GROUP BY CATEGORY_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:33:04.040

不，他需要将两个表连接在一起才能知道哪些产品属于哪个类别。我不确定为什么原始代码会加入两次？如果我理解他正在尝试做什么，那么他应该将产品 ID 加入类别（反之亦然），然后计算不同产品 ID 的数量......对吗？

此外，分组需要更改为按类别分组，因为这就是您要总结的...

```
SELECT 
     b.TITLE 
    ,count(distinct a.PRODUCT_ID)
 from PRD_PRODUCTS a
 left join  PRD_CATEGORIES b on b ON a.PRODUCT_ID = b.PRODUCT_ID
GROUP BY b.TITLE 
```

# java - Java自定义枚举值到枚举

> ID：10661775
> 
> 赞同：7
> 
> 时间：2012-05-19T02:13:50.103
> 
> 标签：java, enums

我有这样的枚举

```
public enum Sizes {
    Normal(232), Large(455);

    private final int _value;

    Sizes(int value) {
        _value = value;
    }

    public int Value() {
        return _value;
    }
} 
```

现在我可以调用 Sizes.Normal.Value() 来获取整数值，但是如何将整数值转换回枚举？

我现在要做的是：

```
public Sizes ToSize(int value) {
    for (Sizes size : Sizes.values()) {
        if (size.Value() == value)
            return size;
    }
    return null;
} 
```

但这是唯一的方法吗？这就是Java的工作原理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T02:20:53.180

是的，这就是它的完成方式，通常是通过向枚举添加静态方法。想想看；你可以在枚举上有 10 个字段。您是否希望 Java 为所有这些设置查找？

这里的重点是 Java 枚举没有“价值”。他们有身份和序数，加上你为自己添加的任何东西。这与 C# 不同，后者遵循 C++ 具有任意整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:23:23.667

我上次使用 Java 已经有一段时间了，但如果我没记错的话，你的`_value`字段和枚举的序数之间没有关系。例如， AFAIK 你可以有两个相同的条目`_value`。正如@bmargulies 指出的那样，您可以在枚举中有许多字段，并且没有什么限制您为每个（或全部）使用不同的值。

另请参阅[此相关问题](https://stackoverflow.com/q/5372855/520779)。显然，您不能直接设置条目的序号。

# spring - JSF - 无法将 Spring Data JPA 存储库注入 Converter

> ID：10661787
> 
> 赞同：0
> 
> 时间：2012-05-19T02:16:22.993
> 
> 标签：spring, jsf, converter, inject

我确定我过去有这个工作，但它今天不想工作。

**例子：**

```
@FacesConverter(value = "inputConverter")
public class InputConverter implements Converter {

    private InputRepository inputRepository;

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {

        List<Input> allInputs = inputRepository.findAll();

        for(Input input : allInputs) {
            if(input.getInputName().equals(arg2)) {
                return input;
            }
        }
        return null;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
        Input input = (Input) arg2;
        return input.getInputName();
    }

    public InputRepository getInputRepository() {
        return inputRepository;
    }

    @Inject
    public void setInputRepository(InputRepository inputRepository) {
        this.inputRepository = inputRepository;
    }

} 
```

**结果：**

itemRepository.findAll() 调用上的空指针异常 - @Inject 没有设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:28:35.713

在另一篇文章中找到答案：[ManagedProperty not injection in @FacesConverter](https://stackoverflow.com/questions/6135942/managedproperty-not-injected-in-facesconverter)

由于我正在使用 @Inject 并且注入的 JPA 存储库由 Spring 管理，因此必须使用它来`@Component("itemConverter"), @Scope("session")`代替`@ManagedBean`.

# virtualization - Xen 如何将硬件暴露给客人？

> ID：10661791
> 
> 赞同：1
> 
> 时间：2012-05-19T02:17:22.317
> 
> 标签：virtualization, xen, hypervisor

（*我觉得这个问题一半属于这里，一半属于服务器故障；如果您认为有更好的场所，请告诉我。*）

Xen，或者实际上，任何管理程序，如何将硬件暴露给客户操作系统？

例如，一位客人想要在网络上进行交流；在某个阶段，它的请求必须转化为对 NIC 的请求。虚拟机管理程序是否公开了一个虚拟网络设备，我们假设来宾知道如何使用？或者半虚拟化的客人是否知道如何直接请求给定的硬件？（如果是这样，非半虚拟化的客人会做什么？）

一旦提出请求，谁来处理？我猜虚拟机管理程序对物理硬件有很多了解（从驱动程序的角度来看），所以它可能必须归结为 dom0。对？

我问是因为我喜欢做内核开发，但是编写驱动程序是一件苦差事。如果我可以依赖具有非常好的硬件支持（例如 Ubuntu）的 dom0，然后只编写我的内核来运行半虚拟化，和/或使用 Xen 公开的一些模拟设备，那会让我的生活更轻松. 但是，很难找到关于这些主题的文档，所以我的下一站可能是查看一系列 Xen 客户机实现；[HaLVM](http://halvm.org/wiki/)是 GHC 的一个端口，用于作为 Xen 来宾本机运行 Haskell 软件，看起来是一个好的开始。

谢谢和问候！

**编辑**：[这个来自 Xen.org](http://www.xen.org/files/Marketing/HowDoesXenWork.pdf)的营销文档似乎声明 dom0 运行驱动程序以促进 domUs 的块设备和网络访问，这与我的猜测一致。在这种情况下，任何技术参考/规格/等。太棒了！

**编辑**：[这个（显然过时的）文档](http://wiki.xensource.com/xenwiki/XenNetworking)看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:19:42.260

共有三种类型的设备模型。

1.  PV — 例如，Linux PV 来宾使用 pv_ops ( [http://wiki.xen.org/wiki/XenParavirtOps](http://wiki.xen.org/wiki/XenParavirtOps) , [http://wiki.xen.org/wiki/Category:PVOPS](http://wiki.xen.org/wiki/Category:PVOPS) )

2.  HVM — 使用 QEMU 对设备进行完全虚拟化 ( [https://serverfault.com/questions/222010/difference-between-xen-pv-xen-kvm-and-hvm](https://serverfault.com/questions/222010/difference-between-xen-pv-xen-kvm-and-hvm) )

3.  直通（[http://wiki.xensource.com/wiki/Xen_PCI_Passthrough](http://wiki.xensource.com/wiki/Xen_PCI_Passthrough)）

[The Definitive Guide to the Xen Hypervisor](https://rads.stackoverflow.com/amzn/click/com/013234971X)一书可能对您有用。

wiki 上有很多与开发相关的信息： [http](http://wiki.xen.org/wiki/Category:Developers) ://wiki.xen.org/wiki/Category:Developers 。

# c++ - 如何在 C++11 中创建线程对象数组？

> ID：10661792
> 
> 赞同：34
> 
> 时间：2012-05-19T02:17:41.950
> 
> 标签：c++, arrays, multithreading, constructor, c++11

我想学习如何使用新的 C++ 标准库创建多个线程并将它们的句柄存储到一个数组中。
如何启动线程？
我看到的示例使用构造函数启动了一个线程，但是如果我使用数组，则无法调用构造函数。

```
#include <iostream>
#include <thread>

void exec(int n){
    std::cout << "thread " << n << std::endl;
}

int main(int argc, char* argv[]){

    std::thread myThreads[4];

    for (int i=0; i<4; i++){
        //myThreads[i].start(exec, i); //?? create, start, run
        //new (&myThreads[i]) std::thread(exec, i); //I tried it and it seems to work, but it looks like a bad design or an anti-pattern.
    }
    for (int i=0; i<4; i++){
        myThreads[i].join();
    }

} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-19T05:13:07.663

没有什么花哨的要求；只需使用分配。在你的循环中，写

```
myThreads[i] = std::thread(exec, i); 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-19T03:06:48.657

对于 C++0x / C++11，尝试使用向量而不是线程数组；像这样的东西：

```
vector<thread> mythreads;
int i = 0;
for (i = 0; i < 8; i++)
{
   mythreads.push_back(dostuff, withstuff);
}
auto originalthread = mythreads.begin();
//Do other stuff here.
while (originalthread != mythreads.end())
{
   originalthread->join();
   originalthread++;
} 
```

编辑：如果你真的想自己处理内存分配并使用指针数组（即向量不是你的东西），那么我不能高度推荐 valgrind。它有内存分配检查器和线程检查器等。这种东西是无价的。无论如何，这是一个使用手动分配线程数组的示例程序，它会自行清理（没有内存泄漏）：

```
#include <iostream>
#include <thread>
#include <mutex>
#include <cstdlib>

// globals are bad, ok?
std::mutex mymutex;

int pfunc()
{
  int * i = new int;
  *i = std::rand() % 10 + 1;

  // cout is a stream and threads will jumble together as they actually can
  // all output at the same time. So we'll just lock to access a shared
  // resource.
  std::thread::id * myid = new std::thread::id;
  *myid = std::this_thread::get_id();
  mymutex.lock();
  std::cout << "Hi.\n";
  std::cout << "I'm threadID " << *myid << std::endl;
  std::cout << "i is " << *i << ".\n";
  std::cout << "Bye now.\n";
  mymutex.unlock();

  // Now we'll sleep in the thread, then return.
  sleep(*i);
  // clean up after ourselves.
  delete i;
  delete myid;
  return(0);
}

int main ()
{

  std::thread * threadpointer = new std::thread[4];
  // This seed will give us 5, 6, 4, and 8 second sleeps...
  std::srand(11);
  for (int i = 0; i < 4; i++)
    {
      threadpointer[i] = std::thread(pfunc);
    }
  for (int i = 0; i < 4; i++)
      // Join will block our main thread, and so the program won't exit until
      // everyone comes home.
    {
      threadpointer[i].join();
    }
  delete [] threadpointer;
} 
```

# php - 查询从两个表中选择

> ID：10661797
> 
> 赞同：0
> 
> 时间：2012-05-19T02:19:05.300
> 
> 标签：php, mysql, html

我在处理看起来很简单的选择查询时遇到了麻烦，我知道有很多教程可以解决这个问题，但似乎没有一个对我有用，我不断得到

警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

错误

这是导致它的查询，基本上我只想从 2 个不同的表中进行选择

```
$trash_statement = "SELECT * FROM user_inbox, user_outbox WHERE user_inbox.receiver_user_id='$user_id' AND user_outbox.sender_user_id='$user_id' AND mail_deleted='1'"; 
```

任何想法，我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:31:55.750

mail_deleted 不与任何表名相关联！这会导致 Mysql 返回错误，而不是[mysql_fetch_assoc()](http://php.net/manual/en/function.mysql-fetch-assoc.php)预期的资源。

**MySql 错误：**说字段名与任何东西都不相关

```
#1052 - Column 'mail_deleted' in where clause is ambiguous 
```

**您的查询**

```
$trash_statement = "
  SELECT * 
  FROM user_inbox, user_outbox 
  WHERE user_inbox.receiver_user_id='$user_id' 
  AND user_outbox.sender_user_id='$user_id' 
  AND yourTableName.mail_deleted='1'"; 
```

**解决这个问题：**

... **yourTableName** .mail_deleted...

# haskell - GLFW 窗口关闭

> ID：10661800
> 
> 赞同：0
> 
> 时间：2012-05-19T02:19:29.763
> 
> 标签：haskell, graphics, window, glfw

我正在使用 X11 和 xfce4 在 x86_64 Arch Linux 上运行，并尝试使用 OpenGL 和 GLFW-b 库编译一个简单的 OpenGL/GLFW 应用程序。不过，我无法关闭窗口 - 我只能用 Ctrl-C 杀死它。

代码在[http://pastebin.com/i7Zshfk1](http://pastebin.com/i7Zshfk1)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T03:39:22.373

您的 main 函数中有一个无限循环。即使主窗口关闭，您仍然会在后台运行主更新循环。您可以通过使用这样的主循环来解决问题：

```
mainLoop = do
  drawFrame
  swapBuffers

  -- Check if window is still open
  isOpen <- windowIsOpen
  -- Call mainLoop recursively
  when isOpen mainLoop 
```

然后你应该调用`mainLoop`函数而不是`forever $ do ...`循环。

另请注意，您应该注意 FPS 限制；您将搞砸可能由您的驱动程序或 GLFW 选项控制的自动 vsync。`swapBuffers`尽可能快地跟注几乎总是更好。

# ios - 键盘卡在 endEditing/resignFirstResponder 上？

> ID：10661804
> 
> 赞同：1
> 
> 时间：2012-05-19T02:19:59.507
> 
> 标签：ios

刚刚注意到这件很奇怪的事情（iOS 5.1、sim 和设备）：

我有一个相当简单的 UITableViewController。它处于编辑模式，带有一些轻微定制的 UITextField。触摸一个单元格，它成为第一响应者，键盘弹出，一切正常。我有几个不同的控件（例如，您的典型键盘工具栏），通过退出第一响应者来强制键盘隐藏。通常这一切都很好。

除非在触摸控件时作为第一响应者的视图不在屏幕上。它确实让第一响应者辞职，通过跟踪呼叫和向上滚动并看到它不再具有焦点/光标都可以看到。但是键盘并没有隐藏。事实上，从那时起，即使我弹出控制器，它也经常不会发生。

代码有点多引用。但是我已经走到了（通过从窗口开始的视图层次结构）追踪辞职呼叫之前和之后的第一响应者的地步，这是我所期望的，之前的文本字段，之后什么都没有。但是该死的键盘还在。

有人见过这个吗？有什么明显的吗？还是不明显？

更新：我确实找到了一种解决方法，即创建一个简单的 UITextField，将其添加到视图中，成为并退出第一响应者，然后将其从视图中删除。似乎是一个 hack，我想知道它将如何与其他版本一起玩，但除非有正确的方法来做到这一点......

让我猜这是 UITableViewController 中的一个错误（或者可能是 UITableView，但对我来说，控制器更可疑。）

# android - 为什么 ICS 会拉出比实际尺寸更大的图像？

> ID：10661805
> 
> 赞同：0
> 
> 时间：2012-05-19T02:20:01.310
> 
> 标签：android, resources, bitmap, android-4.0-ice-cream-sandwich

我有一个合成两个图像的过程，它在我所有的设备上都能很好地工作%。

我已经尝试将艺术作品放在 drawable 和 drawable_hdpi 文件夹中（这不重要），但图像总是以错误的大小拉出。我不是 DPI 方面的专家，但问题是所有这些都发生在任何东西被吸引到任何地方之前。我只是从资源中加载位图并询问它的尺寸是什么，并获得这个增加 30% 的数字。对我来说，图像被炸毁的谜团更加复杂！所以，它也在这个过程中失去了质量。

有没有人对可能导致这种情况的原因有任何想法？我只有一台 ICS 设备（三星 Nexus），所以我不确定这是 ICS 问题还是设备问题。

我通过将艺术品缩放到原始尺寸来解决它，但是我花了一段时间才弄清楚到底发生了什么，我很想知道我是否忽略了艺术品存储方式中非常重要的东西并在 ICS 中阅读，或者这只是一个错误。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:08:39.493

`xhdpi`当设备的本机密度（对于 Galaxy Nexus）[文档](http://developer.android.com/training/multiscreen/screendensities.html)和[更多文档](http://developer.android.com/guide/practices/screens_support.html)不可用时，Android 会自动向上（和向下）扩展资源

因此，如果您的图像*仅*在`mdpi`100x100 的文件夹中，系统会自动将其缩放到 150x150`hdpi`和 200x200 的`xhdpi`. 显然，您将在这里失去质量，因此您应该提供多种密度的图像（通常是`hdpi`和`xhdpi`）。如果您根本不想缩放图像，则可以将其放在`nodpi`文件夹或`assets`文件夹中。

`mdpi`是基线，因为它是第一个设备 (G1) 的密度并且是 160dpi

`hdpi`为 240dpi (1.666 * mdpi)

`xhdpi`是 320dpi (2 * mdpi)

现在，当您通过 BitmapFactory 读取资源时，它将报告已为您缩放的图像的尺寸，而不是实际的资源尺寸。在大多数情况下，这就是您想要发生的事情。

# ios - 从更新调用时 GLKTextureLoader 失败

> ID：10661807
> 
> 赞同：6
> 
> 时间：2012-05-19T02:20:22.733
> 
> 标签：ios, xcode, opengl-es

从 viewDidLoad 加载纹理效果很好。但是，如果我尝试从`GLKViewController`更新中加载它们，我会收到错误消息。我这样做是因为我想在不改变视图的情况下交换新的背景纹理。

这在上次升级之前有效。也许我在时机上很幸运。我怀疑它失败是因为某个线程很忙还是什么？

这是完整的错误。

**Domain=GLKTextureLoaderErrorDomain Code=8 "操作无法完成。(GLKTextureLoaderErrorDomain error 8.)" UserInfo=0x10b5b510 {GLKTextureLoaderGLErrorKey=1282, GLKTextureLoaderErrorKey=OpenGL 错误}**

所以问题是，我可以安全地从`GLKViewController`更新函数中加载纹理吗？还是我需要重新考虑我的方法并重新加载整个视图或其他什么？

这是我的功能：

```
-(void) LoadTexture:(NSString *)texture textureInfo:(GLKTextureInfo**)textureInfo
{
    NSString *path = [[NSBundle mainBundle] pathForResource:texture ofType:@"png"]; 
    NSError *error = nil;

    (*textureInfo) = [GLKTextureLoader textureWithContentsOfFile:path options:nil error:&error];

    NSLog(@"path %@", path);

    if(!(*textureInfo))
    {
        NSLog(@"Failed to load texture %@ %@", texture, error);  
    }
    else
    {
        NSLog(@"LOADED Texture %@ !!! YAY!!! ", texture);
    }
} 
```

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T17:18:35.497

我遇到了这样的问题，工作是在没有 glktextureloader 的情况下加载纹理。

这里有一些不使用 GLKtextureLoader 加载纹理的代码：

```
bool lPowerOfTwo  = false;

UIImage *image    = [UIImage imageNamed:@"texture.png"];

GLuint width = CGImageGetWidth(image.CGImage);
GLuint height = CGImageGetHeight(image.CGImage);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
void *imageData = malloc( height * width * 4 );
CGContextRef context = CGBitmapContextCreate( imageData, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big );
CGColorSpaceRelease( colorSpace );

CGContextClearRect( context, CGRectMake( 0, 0, width, height ) );
CGRect bounds=CGRectMake( 0, 0, width, height );
CGContextScaleCTM(context, 1, -1);
bounds.size.height = bounds.size.height*-1;
CGContextDrawImage(context, bounds, image.CGImage);

GLuint lTextId;
glGenTextures(1, &lTextId);
glBindTexture(GL_TEXTURE_2D, lTextId);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData);

if(!lPowerOfTwo)
{
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );

    glGenerateMipmap(GL_TEXTURE_2D);
}else
{
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
}

CGContextRelease(context);

free(imageData); 
```

lTextId 变量具有 opengl 纹理 ID。

注意：如果纹理尺寸不是 2 的幂，如果 GL_TEXTURE_WRAP_S 和 _T 未设置为 GL_GLAMP_TO_EDGE，则纹理将显示为黑色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:52:25.947

我看到了同样的行为，这是由不相关的错误引起的。修复错误，纹理应该正确加载。看到这个帖子：[GLKTextureLoader第一次加载某个纹理时失败，但第二次成功](https://stackoverflow.com/questions/8611063/glktextureloader-fails-when-loading-a-certain-texture-the-first-time-but-succee)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:30:39.813

我和你有类似的问题。我为解决这个问题所做的就是创建一个包含我想在整个游戏中使用的所有纹理的类。在`viewDidLoad:`我初始化了类并加载了所有的纹理。当我需要使用任何纹理时，它们已经被加载并且没有出现问题。

例如。在`viewDidLoad`

```
GameTextures *textures = [GameTextures alloc] init];
[textures LoadAll]; 
```

LoadAll 将加载所有纹理以供以后使用

然后当你需要使用纹理时

```
[myBackground setTexture: textures.backgroundTexture2]; 
```

希望这有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-25T07:55:02.033

我有几乎相同的错误：

> 错误域=GLKTextureLoaderErrorDomain Code=8 "(null)" UserInfo={GLKTextureLoaderGLErrorKey=1282, GLKTextureLoaderErrorKey=OpenGLES 错误。}

它是由程序之间的切换引起的。如果我尝试使用当前未使用的程序调用 glUniform1i，将会遇到 Open GL ES 错误断点。

通过使用正确的程序进行修复，避免触发任何错误断点。

# php - php/mysql 替代 openinviter cloudponge

> ID：10661808
> 
> 赞同：1
> 
> 时间：2012-05-19T02:20:30.993
> 
> 标签：php, mysql, contacts

经过相当多的时间和精力，我按照 SO 上的一些帖子的建议安装了 openinviter，以从用户通讯录中获取联系信息。但是，我后来发现这里和网络上其他地方的其他人认为 openinviter 已过时。它适用于我的 gmail——尽管我还没有测试过每个提供商——但该网站上的大多数帖子都是一两年前的。如果它现在不可靠且未维护，我不愿意花大量时间集成它。有人说该行业正朝着 cloudponge 使用的 oauth 发展（这需要花钱。) 其他人建议使用来自 Gmail 和其他一些人的已发布 apis 我已经有一个关于这个主题的问题关闭，因为不是特定于代码的，但似乎知道人们认为什么是最新的获取联系人而不是什么会更有用是实现过时脚本的最佳代码。除了cloudsponge，还有什么更新、更好的openinviter替代品吗？从任何人那里，获取用户联系人的当前最佳实践是什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:49:31.230

Janrain Engage 可以利用我们的 get_contacts API 端点帮助您完成此任务。查看 down and dirty 的文档：

[http://developers.janrain.com/documentation/api/get_contacts/](http://developers.janrain.com/documentation/api/get_contacts/)

# php - 文件 /usr/local/apache2/modules/libphp5.so 中的 PHP 和 Apache “php5_module” 是乱码”

> ID：10661812
> 
> 赞同：1
> 
> 时间：2012-05-19T02:20:52.150
> 
> 标签：php, compilation

最近，我一直在尝试在运行 OS X 10.4 的旧 PPC mac 上编译 php。从我过去的问题可以看出，我一直遇到问题。它终于编译安装好了，我正准备启动 apache，开始编程，然后松了一口气，发现在运行“/usr/local/apache2/bin/apachectl start”时又返回了另一个错误：

> $ ./apachectl start
> /usr/local/apache2/conf/httpd.conf 的第 232 行语法错误：
> 文件 /usr/local/apache2/modules/libphp5.so 中的 API 模块结构 'php5_module' 乱码 - 预期签名 41503230但看到 41503232 - 也许这不是 Apache 模块 DSO，或者是为不同的 Apache 版本编译的？

我假设 apache 版本 2.0.64 与 php 版本 5.3.12 不兼容，但我找不到旧版本的 php 或似乎适用于我的系统的新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:42:27.180

我已经找到了我的问题的答案，最后让 php 和 apache 一起工作。经过更深入的研究，我发现一些遇到相同问题的人已经通过弄乱 libpng ([这里](http://www.linuxquestions.org/questions/solaris-opensolaris-20/error-while-starting-apache-with-php-711260/page2.html)) 来修复它。我认为 libpng 存在一些未知问题，因为我不需要它，所以我只是重新编译了“--without-png-dir”。

很高兴它可以工作，现在我可以开始编程了！

# qt - 无法为 mips arch 编译 QtCore 库的发布版本

> ID：10661814
> 
> 赞同：0
> 
> 时间：2012-05-19T02:20:56.480
> 
> 标签：qt

我正在尝试为其中一个基于 mips 架构的板编译 Qt 库的发布版本。我首先使用以下命令进行配置

```
./configure -arch mips -release -little-endian -xplatform qws/linux-mipsel-g++ -no-qt3support -no-openssl -no-phonon -no-webkit -no-gui -opensource -nomake demos -nomake examples -nomake XLib 
```

我在 linux-mipsel-g++ 中进行了设置以找到工具链以编译库。配置步骤后，我 cd 进入 qt/src/corelib 并运行 make。它成功完成但是当我在 libQtCore.so.4.8.1 上运行文件命令时它说

```
libQtCore.so.4.8.1: ELF 32-bit LSB shared object, MIPS, MIPS32 rel2 version 1 (SYSV), dynamically linked (uses shared libs), with unknown capability 0xf41 = 0x756e6700, with unknown capability 0x70100 = 0x3040000, not stripped 
```

大小也是 4.7MB。我认为这是库的调试版本，因为它说非条带，而且大小很大。谁能告诉我如何编译发布库？

感谢开发

# c# - Threading.Tasks：WaitAll() 的概念

> ID：10661817
> 
> 赞同：0
> 
> 时间：2012-05-19T02:21:13.107
> 
> 标签：c#, .net, multithreading, task-parallel-library, task

我在**控制台**应用程序中遇到了一个奇怪的问题（不确定这是否与它有关）并使用 Tasks。

大多数示例显示故意调用异常来测试/解释 WaitAll 的概念 - 但就我而言，*似乎*我在做一些根本错误的事情（或不完全理解）。

```
Task<int> task1 = Task<int>.Factory.StartNew(()=> foo(arg));
Task<int> task2 = Task<int>.Factory.StartNew(()=> bar(arg));

Task<int>[] tasks = {task1, task2};

try
{
    Task.WaitAll(tasks); //hits this far

     if((int)task1.Result * (int)task2.Result == 99) //this seems to never get hit
     {
         System.Environment.Exit(0); //so this isn't called             
     }
     else
     {
         System.Environment.Exit(1); // neither is this called
     }
 }
 catch
 {
     ..... 
```

在上面似乎`if`没有命中该块，因此没有返回退出代码 - 因此控制台应用程序挂起。

也没有抛出异常 - 我可以确认这一点，因为实际上**所有**任务都已完成 - 为了简洁起见，我只是没有包括`catch`上面的部分。

任务很快完成 - 它们没有挂起，所以它不像 Task.WaitAll 仍在等待 - 或者它可能是，这就是我错过的东西（它在等待什么）？

有什么想法、建议或残酷的更正吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T03:06:38.473

只是为了争论，我做了一个小测试（如下所示） - 它表明您的一项任务正在挂起，并且没有返回值。

```
 Task<int> task1 = Task<int>.Factory.StartNew(() =>
        {
            Thread.Sleep(2000);
            return 10;
        });
        Task<int> task2 = Task<int>.Factory.StartNew(() => 15);
        Task<int>[] tasks = {task1, task2};
        try
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            Task.WaitAll(tasks);
            sw.Stop();
            Console.WriteLine(String.Format("tasks completed in {0}ms", sw.ElapsedMilliseconds));
        }
        catch
        {
            Console.WriteLine("Error");
        }
        Console.ReadLine(); 
```

如果你运行它，它将打印`tasks completed in 2000ms`（给或需要几毫秒）。我所做的只是复制/粘贴您的代码并添加我自己的任务。

所以你说`"The tasks are [...] not hanging..."`那是假的——他们一定是挂着的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:37:44.870

正如上面的 caesay 所解释的，任务必须是挂起的。要检查这一点，我建议为您的 WaitAll 呼叫设置默认超时时间。您可以通过传入一个 int 来执行此操作，该 int 表示调用必须等待任务结束的毫秒数。试试这个

```
Task.WaitAll(tasks, 10000); //Set to wait for 10 seconds 
```

然后看看是否有异常或者你的“if”语句是否被命中。如果这可行，则尝试使用更大的时间间隔来查看任务发生了什么。

此外，我建议运行 foo 和 bar 中没有任务（即顺序）的代码作为测试工具，以了解这两个示例方法是否存在任何特定问题。

# ajax - JSON 对象中的访问值

> ID：10661820
> 
> 赞同：1
> 
> 时间：2012-05-19T02:22:29.793
> 
> 标签：ajax, json

这可能很容易，但我需要访问这个 JSON 对象中的值。我不知道怎么做。这是对象：

```
{
    "COLUMNS": ["NAME"],
    "DATA":  [["YOUNG, MARIA              "]]
} 
```

我希望“obj.NAME”会这样做，但它说它是未定义的。这是我的 AJAX 调用：

```
$.ajax({
                        //this is the php file that processes the data and send mail
                        url: 'components/Person.cfc',

                        //GET method is used
                        type: "POST",

                        //pass the data        
                        data: {
                            method: "getGroup",
                            uid: $('#cardText').val()
                            },

                        success: function(response) {

                            var obj = $.trim(response);
                            var obj = jQuery.parseJSON(obj);
                            $('#form_result').html(obj.NAME);

                        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:31:03.677

在您的代码中，以下示例显示了如何访问此特定 JSON 对象中的属性：

```
alert( obj.COLUMNS[0] );  // alerts the string "NAME".

alert( obj.DATA[0][0] );   // alerts "YOUNG, MARIA              " 
```

要理解为什么这是输出，理解和学习阅读构成 JSON 的符号很重要：

```
{} = object

[] = array 
```

你的 JSON：

```
{
    "COLUMNS": ["NAME"],
    "DATA":  [["YOUNG, MARIA              "]]
} 
```

由于最外面的部分用花括号表示，我们知道 JSON 表示的是一个对象，而不是一个数组。该对象有两个属性，它们都是数组，因为分配给它们的值被括在括号中。

第二个属性 DATA 实际上是一个大小为 1 的数组，其中包含另一个大小为 1 的数组，其中包含一个字符串。

最后，在您的代码中，您尝试访问 NAME，它是一个值，而不是一个属性。JSON 最后一点要了解 JSON 是所有对象都由键/值对表示。您使用密钥来访问值。obj.COLUMNS 检索第一个数组，而 obj.DATA 检索第二个数组。

NAME 不是属性。相反，它是分配给数组的值。

为了帮助您了解如何访问 JSON，请练习访问不同对象的属性。此外，您可以将现有对象转换回 JSON 并在控制台中显示它们，以便查看它们在 JSON 中的结构：

```
var your_object = new Object();
your_object.name = "Bob";
your_object.skills = ["programmer","debugger","writer"];

console.info( JSON.stringify( your_object ) );

// this would convert the object to JSON. Going the other direction could help 
  // you further understand the concepts under the hood. Here is the output:
{ "name" : "Bob", "skills" : [ "programmer" , "debugger" , "writer" ] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:32:24.143

通过 parseJSON 运行对象后，您将拥有一个有两个孩子的对象

```
myObj = parseJSON (yourJSONStringAbove);
myObj.COLUMNS ; // this is an array containing one item whose value is "name"
myObj.DATA; // this is an array of arrays, it contains one array which has one value

so, myObj.data[0][0] ; // this is "YOUNG, MARIA          " 
```

# tcl - 嵌入式 Tk - 挂在 ctrl+d

> ID：10661822
> 
> 赞同：0
> 
> 时间：2012-05-19T02:23:15.197
> 
> 标签：tcl, freeze, tk

我们的应用程序已`tcl`嵌入其中并使用`starkit`; `tk`静态链接到其中。

当我运行应用程序时，`gui`会出现并响应所有键，但是当我点击`ctrl+d`终止时它会挂起。我在帖子末尾给出了挂起的回溯。

首先让我描述一下我们是如何嵌入`Tcl/Tk`到我们的应用程序中的。

```
#--------------------------------------------------------------
# (*) install ActiveTcl
# we need starkit and ActiveTcl tclsh is batteries included
#--------------------------------------------------------------
% tar -xzf ActiveTcl8.5.8.1.291945-linux-x86_64-threaded.tar.gz
% cd ActiveTcl8.5.8.1.291945-linux-x86_64-threaded
# specify /a/b/tcltk8.5.8/linux26_x86_64 as install dir in gui
% ./install.sh 
```

我们需要`tk`没有真正的字体，因为它会使应用程序[崩溃](https://stackoverflow.com/questions/5488429/tk-segfaults-when-i-use-widget-button-text)。`tk`要从我们需要编译的源安装`tcl`：（我不知道如何编译指向 Active-Tcl 目录。如果`tk`有`--with-tcl`选项请告诉我）

```
#--------------------------------------------------------------
# (*) install tcl from sources
#--------------------------------------------------------------
% tar -xzf tcl8.5.8-src.tar.gz 
% cd tcl8.5.8/unix
% ./configure --prefix=/a/b/tcltk8.5.8/linux26_x86_64 \
              --enable-shared=no \
              --enable-threads 
% gmake 
```

否`gmake install`，`tcl`因为我们需要保留 ActiveTcl 的 tclsh。接下来安装`tk`。

```
#--------------------------------------------------------------
# (*) install tk from sources
# need to disable xft (true type font) set --disable-xft
#--------------------------------------------------------------
% tar -xzf tk8.5.8-src.tar.gz 
% cd tk8.5.8/unix
% ./configure --prefix=/a/b/tcltk8.5.8/linux26_x86_64 \
              --enable-shared=no \
              --with-tcl=/a/b/tcltk8.5.8/src/tcl8.5.8/unix \
              --disable-xft \ 
              --enable-threads
% gmake
% gmake install 
```

现在我使用以下命令运行我的应用程序`gdb`：

```
% gdb rs
% r -gui 
```

我击中`ctrl+d`了导致挂起的原因，它给出了以下回溯。有人可以帮我解决这个问题吗？

```
Program received signal SIGINT, Interrupt.
[Switching to Thread 182897358720 (LWP 9535)]
0x0000003739608b3a in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/tls/libpthread.so.0
(gdb) bt
#0  0x0000003739608b3a in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/tls/libpthread.so.0
#1  0x0000000001833e22 in Tcl_ConditionWait ()
#2  0x0000000001834d41 in Tcl_WaitForEvent ()
#3  0x00000000017fec68 in Tcl_DoOneEvent ()
#4  0x00000000017cb4ad in Tcl_VwaitObjCmd ()
#5  0x000000000178b6ec in TclEvalObjvInternal ()
#6  0x00000000017cd08d in TclExecuteByteCode ()
#7  0x00000000017d5798 in TclCompEvalObj ()
#8  0x000000000178d6ac in TclEvalObjEx ()
#9  0x00000000017939c4 in Tcl_CatchObjCmd ()
#10 0x000000000178b6ec in TclEvalObjvInternal ()
#11 0x00000000017cd08d in TclExecuteByteCode ()
#12 0x00000000017d5a84 in Tcl_ExprObj ()
#13 0x000000000178c3e3 in Tcl_ExprBooleanObj ()
#14 0x0000000001796704 in Tcl_IfObjCmd ()
#15 0x000000000178b6ec in TclEvalObjvInternal ()
#16 0x000000000178cee6 in TclEvalEx ()
#17 0x000000000178d616 in Tcl_EvalEx ()
#18 0x00000000017f1be9 in Tcl_FSEvalFileEx ()
#19 0x000000000179c385 in Tcl_SourceObjCmd ()
#20 0x000000000178b6ec in TclEvalObjvInternal ()
#21 0x000000000178cee6 in TclEvalEx ()
---Type <return> to continue, or q <return> to quit---
#22 0x000000000178d616 in Tcl_EvalEx ()
#23 0x000000000178d9d8 in TclEvalObjEx ()
#24 0x000000000180d45f in Tcl_UplevelObjCmd ()
#25 0x000000000178b6ec in TclEvalObjvInternal ()
#26 0x00000000017cd08d in TclExecuteByteCode ()
#27 0x000000000180e4cd in TclObjInterpProcCore ()
#28 0x000000000178b6ec in TclEvalObjvInternal ()
#29 0x000000000178cee6 in TclEvalEx ()
#30 0x000000000178d616 in Tcl_EvalEx ()
#31 0x000000000178dacd in Tcl_Eval ()
#32 0x00000000008f26aa in xrAppPlatformInit (interp=0x211a410)
    at xrAppPlatform.c:430
#33 0x00000000017f69ca in Tcl_Main ()
#34 0x00000000008f2153 in xrMain (argc=3, argv=0x20fe880)
    at xrAppPlatform.c:177
#35 0x00000000008f1092 in main (argc=2, argv=0x7fbfffe718) at main.cpp:213 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:09:52.697

好吧，终端将`Ctrl`+`D`解释为 EOF 指示符，这意味着`stdin`通道（在 Tcl 级别）现在将处于 EOF 状态。那么问题是你的代码将如何响应它。在那里很难说任何通用的东西，因为您可以编写 Tcl 代码来完全定制那种东西。

但是，我（从您的堆栈跟踪）看到您`vwait`正在使用一个（即自定义事件循环）。我想问题是因此您的代码没有正确响应 EOF 并且使用`exit`或导致循环终止。要检测到这一点，您需要设置一个可读`fileevent`的`stdin`，尝试从该通道读取（到目前为止正常）；如果读取失败，请检查 EOF`eof`并采取适当的措施……</p>

# javascript - 如何将对象列表转换为数组 anf 然后将其传递给我的 java 脚本

> ID：10661827
> 
> 赞同：-1
> 
> 时间：2012-05-19T02:24:14.733
> 
> 标签：javascript, asp.net-mvc-3, jqplot

我有以下`JavaScript`显示图表，目前出于测试目的，我正在传递硬编码数组，如下所示：

```
@model IEnumerable<Medical.Models.Session>

<script src="../../Scripts/jqplot/jquery.jqplot.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.barRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.categoryAxisRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.pointLabels.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.dateAxisRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.highlighter.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.cursor.min.js" type="text/javascript"></script>

<p>
<script type="text/javascript">
    $(document).ready(function () {

        line1 = [['23-May-2008', 578.55], ['20-Jun-2008', 566.5], ['25-Jul-2008', 480.88],
        ['22-Aug-2008', 509.84], ['26-Sep-2008', 454.13], ['24-Oct-2008', 379.75],
        ['21-Nov-2008', 303], ['26-Dec-2008', 308.56], ['23-Jan-2009', 299.14],
        ['20-Feb-2009', 346.51], ['20-Mar-2009', 325.99], ['24-Apr-2009', 386.15], ['01-Apr-2012', 786.15]];
        var plot1 = $.jqplot('chart1', [line1], { title: 'Data Point Highlighting',
            axesDefaults: { pad: 1.2 },
            axes: { xaxis: { renderer: $.jqplot.DateAxisRenderer,
                tickOptions: {
                    formatString: '%d/%b/%Y'
                }
            },
                yaxis: { tickOptions: { formatString: '%.2f'} }
            },
            highlighter: { show: true, sizeAdjust: 7.5, tooltipLocation: 'nw'
                //            , formatString: '<b>%s</b>'
            }, cursor: { show: true, tooltipOffset: 6 }
        })

    });

</script>

<div id = "chart1">
</div> 
```

但是我如何动态构建上述`Line1`数组以获得模型值，类似于：

```
 @foreach (var item in Model) {
      //code goes here,, 
      line1 [1,1] = [item.Date, item.Result]
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:48:29.670

Razor 不能很好地与 javascript 混合，因此这种转换本质上是错误的。我会建议和替代。

变量 line1 的数据是一个二维数组。那么为什么不使用 JSON 动态加载它，而不是转换 Razor 语法。例如，您可能有这样的控制器：

```
public JsonResult LoadGraphData( ... )
{
     //Populate your two dimensional array here.
     .... 
     return Json( any_two_dim_array , JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:07:23.750

我是否正确地假设您想将数组数组转换为对象数组？

```
var line2=[];
for (var i in line1) {
  var a=line1[i];
  var b=new Object;
  b.Date=a[0];
  b.Result=a[1];
  line2[i]=b
} 
```

line2 现在包含可以使用 .Date 和 .Result 访问值的对象：

```
for (item in line2) {
  // do something with item.Date and item.Result
} 
```

# css - 动态数据库驱动的 CSS 2.0

> ID：10661828
> 
> 赞同：0
> 
> 时间：2012-05-19T02:24:20.767
> 
> 标签：css, database, dynamic

好的，所以我正在尝试改进我之前关于由 MYSQL 数据库驱动的动态 CSS 的问题。我已经让它适用于一个 CSS 类，但不止一个。我想做的是将一个while语句放在另一个语句中。我的数据库目前包含以下内容：

```
table styles
id - class - style - setting - page
1    header  width   1000px    index
2    header  height  200px     index
3    footer  width   1000px    index 
```

我的代码如下：

```
$pname = $_SERVER['REQUESTED_URI'];
$class_query = mysql_query("SELECT DISTINCT(class) AS class FROM styles WHERE pname='".$pname."'");
$style_query = mysql_query("SELECT style, setting FROM styles WHERE pname='".$pname."' AND class='".$class_result['class']."'");
echo "<style>";
while($class_result_row = mysql_fetch_array($class_query,MYSQL_ASSOC))  {
    echo ".".$class_result_row['class']."{";
    while($style_result_row = mysql_fetch_array($style_query,MYSQL_ASSOC)) {
        echo $style_result_row['style'].":".$style_result_row['setting'].";";
    }
    echo "}";
}
echo "</style>"; 
```

这对索引内容非常有用，但它不显示页脚样式。这与我之前在这里问的主要区别在于，我不是为每个页面手动设置相同的脚本来加载页面特定的内容，而是将其包装在一个函数中并在标题中调用一次并成为完成它。我也尝试为页面名称设置 $GLOBALS 和 $SESSION 变量，但结果是相同的。在旁注中，我还使用了没有额外引号和句点的变量，也得到了相同的结果。提前谢谢大家！ - 约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:46:01.920

我认为每次遍历类查询结果时都必须执行样式查询。尝试类似：

```
$pname = $_SERVER['REQUESTED_URI'];
$class_query = mysql_query("SELECT DISTINCT(class) AS class FROM styles WHERE pname='".$pname."'");
echo "<style>";
while($class_result_row = mysql_fetch_array($class_query,MYSQL_ASSOC))  {
    echo ".".$class_result_row['class']."{";
    $style_query = mysql_query("SELECT style, setting FROM styles WHERE pname='".$pname."' AND class='".$class_result_row['class']."'");

    while($style_result_row = mysql_fetch_array($style_query,MYSQL_ASSOC)) {
        echo $style_result_row['style'].":".$style_result_row['setting'].";";
    }
    echo "}";
}
echo "</style>"; 
```

# c++ - 如何为 CodeBlocks 安装 boost？

> ID：10661829
> 
> 赞同：1
> 
> 时间：2012-05-19T02:24:26.200
> 
> 标签：c++, codeblocks

> **可能重复：**
> [代码块的 Boost 库设置](https://stackoverflow.com/questions/1008119/boost-library-setup-for-codeblocks)

我想用boost写一个程序。实际上这是一个来自 Boost Getting Started 网页的程序。这是 ：

```
#include <boost/lambda/lambda.hpp>
#include <iostream>
#include <iterator>
#include <algorithm>
int main()
{
    using namespace boost::lambda;
    typedef std::istream_iterator<int> in;

    std::for_each(
        in(std::cin), in(), std::cout << (_1 * 3) << " " );
} 
```

当我构建它时，它给了我一个错误列表： error: boost/lambda/lambda.hpp: No such file or directory error: 'boost' has not been declared ... 对于这些错误我该怎么办？我的意思是如何设置“编译器和调试器”和“全局变量”。

# c++ - 神秘的编译器错误，可能与使用“虚拟”有关？

> ID：10661833
> 
> 赞同：0
> 
> 时间：2012-05-19T02:25:13.167
> 
> 标签：c++, gcc, virtual, undefined

我收到此编译器错误。我有几百行代码，所以我会发布一些我认为可能相关的代码，但你需要告诉我你想看到什么。

这是我在编译时遇到的错误：

```
/tmp/ccBE5kZ5.o:game.cpp:(.text+0x1067): undefined reference to `vtable for Person'
/tmp/ccBE5kZ5.o:game.cpp:(.text+0x17a5): undefined reference to `vtable for Person'
/tmp/ccBE5kZ5.o:game.cpp:(.text+0x1ee6): undefined reference to `vtable for Person'
/tmp/ccBE5kZ5.o:game.cpp:(.text+0x2560): undefined reference to `vtable for Person'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: /tmp/ccBE5kZ5.o: bad reloc address 0xc in section `.text$_ZN6WeaponD1Ev[Weapon::~Weapon()]'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: final link failed: Invalid operation
collect2: ld returned 1 exit status 
```

这是我的`Person`班级和`Weapon`班级的声明，`Actor`班级`Person`是以下的后代：

```
class Actor {
public:
virtual void act();
virtual string getName();
virtual void setName(string n);
Actor();
Actor(string n);
virtual ~Actor();
private:
string name;
};

class Person : public Actor {
public:
void act();
virtual void fight(Person enemy);
virtual void takeDamage(double dmg);

// getters and setters
virtual unsigned getX();
virtual void setX(unsigned amt);
virtual unsigned getY();
virtual void setY(unsigned amt);
virtual Weapon getWeapon();
virtual void setWeapon(Weapon w);
virtual Weapon getArmor();
virtual void setArmor(Weapon a);
virtual unsigned getLevel();
virtual void setLevel(unsigned amt);
virtual double getHealth();
virtual void setHealth(double amt);
virtual double getXP();
virtual void setXP(double amt);
Person();
Person(string n);
private:
Weapon wep;
Weapon armor;
double xp;
unsigned level;
double health;
unsigned x;
unsigned y;
};

class Weapon {
public:
double getStrength();
void setStrength(double s);
double getValue();
void setValue(double amt);
double getHealth();
void setHealth(double amt);
string getName();
void setName(string n);
string getType();
void setType(string t);
Weapon();
Weapon(string n, string t, double dmg);
private:
string name;
string type;
double value;
double health;
double strength;
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T02:33:13.057

您的错误归结为单一定义规则 (ODR) 和语言对程序的要求。特别是要求*必须定义所****使用****的每个功能***。如果调用非虚拟函数或获取其地址，则认为该函数已被*使用。*所有虚函数都是*odr 使用的*，因此必须在您的程序中定义。**

 **回到程序中的确切错误，这可能是由于 GCC 编译器如何处理虚拟表的生成，这基本上归结为一个简单的规则：虚拟表是在包含定义的翻译单元中定义的类中的第一个非内联虚函数。如果所有虚函数都是*内联*的，那么 vtable 将在每个包含类定义的翻译单元中生成。

在您的情况下，似乎至少有一个虚函数未*内联*声明或未在程序中链接的翻译单元之一中定义。如果在一个翻译单元中定义了第一个非内联虚函数，则将生成 vtable，并且您将收到一条不同的错误消息，说明缺少任何没有定义的虚函数的定义.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:32:04.477

就是说有些`virtual`字段`Person`没有定义。到目前为止，我们可以看到您的声明，但看不到定义。检查是否`Person`定义了 中的每个虚拟字段，包括那些继承的。**

# python - IPython：如何将某些内容通过管道传输到 Python 脚本中

> ID：10661835
> 
> 赞同：8
> 
> 时间：2012-05-19T02:25:29.767
> 
> 标签：python, pipe, ipython

我知道我可以通过 IPython 在 IPython 中运行脚本`run test.py`并从那里进行调试。

但是如何将输出通过管道传输到 test.py 中？例如，通常我可以在命令行中运行`grep "ABC" input.txt | ./test.py`，但如何在 IPython 中执行相同的操作？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T02:37:45.870

在 Python 脚本中，您应该从 sys.stdin 中读取：

```
import sys

INPUT = sys.stdin

def do_something_with_data(line):
    # Do your magic here
    ...
    return result

def main():
    for line in INPUT:
        print 'Result:', do_something_with_data(line)

if __name__ == '__main__':
    main() 
```

在迭代解释器中，您可以使用[子流程](http://docs.python.org/library/subprocess.html)模块 mock sys.stdin。

```
In[0]: from test.py import *
In[1]: INPUT = subprocess.Popen(['grep', 'ABC', 'input.txt'], \
                               stdout=subprocess.PIPE).stdout
In[2]: main() 
```

您还可以将输出通过管道传输到文件，然后从文件中读取。出于实际目的，stdin 只是另一个文件。

```
In[0]: ! grep "ABC" input.txt > output.txt
In[1]: INPUT = open('output.txt')
In[2]: main() 
```

# android - 将多个整数值从 jni 传递给 java

> ID：10661839
> 
> 赞同：0
> 
> 时间：2012-05-19T02:27:06.580
> 
> 标签：android, java-native-interface

我最初在这里发布（包括代码）： [Weird: can't change the value of Integer in jni](https://stackoverflow.com/questions/10650230/weird-can-not-change-the-value-of-integer-in-jni)

要将多个值从 jni 传递到 java，我将 2 个整数引用传递给 jni/c，并使用 SetIntField() 修改对象。

不幸的是，这 2 个值是相同的。Lawrence D'Oliveiro 解释说 Integer 是不可变的，所以我们不能改变它。我不知道为什么。

作为一种解决方法，我创建了自己的 Integer 类：

```
public class MyInteger {
    int value;

    public MyInteger(int v) {
        value = v;
    }
} 
```

并将这种类型的对象传递给 jni：

```
native int do_something(MyInteger p1, MyInteger p2); 
```

有用。我很好奇为什么整数不起作用。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:52:02.450

此问题与“不可变对象”无关。使用 Integer 的原始代码不起作用是因为自动装箱。

# android - 如何让布局占据屏幕的 1/2？

> ID：10661843
> 
> 赞同：0
> 
> 时间：2012-05-19T02:27:56.283
> 
> 标签：android, layout

我很好奇如果我想让布局占据屏幕右侧，无论屏幕大小如何，我需要做什么。

我是否必须在左侧放置一些权重为 1 的空元素？或者是否可以只指定布局与其父级的右侧对齐并占据一些百分比？如果是这样……怎么办？理想情况下，父级是RelativeLayout，但我会使用任何可行的解决方案，因为目前我尝试过的一切都会导致完全错误的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:31:32.007

据我所知，唯一的解决方案是加权`LinearLayout`. 视图的权重除以布局的 weightSum 表示屏幕上*可用空间的百分比。*

你可以让它有两个子视图，每个宽度设置为 0dp，权重设置为 1。

加权布局分两个阶段工作：第一阶段测量`layout_width`每个视图的。第二阶段分配关于`layout_weight`/`weightSum`关系的任何剩余空间（总布局宽度 - 每个视图宽度的累积总和）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:48:54.943

要使元素与任何一侧对齐，您应该设置其父元素的重力（可能是包含该元素的布局）。当然，在您的情况下，将线性布局的**“重力”属性设置为****right**。您可能还需要将布局的**“方向”**更改为**水平**

为了让它只占屏幕的一半，设置父布局的**“重量总和”和子布局的****“布局重量”**。孩子的权重之和应该等于父母的权重之和。

# javascript - HTML5画布，多边形上/中的图像可能吗？

> ID：10661844
> 
> 赞同：6
> 
> 时间：2012-05-19T02:28:27.153
> 
> 标签：javascript, html, canvas, html5-canvas

有没有办法使用 javascript html5 画布，有一个多边形，然后在其中显示图像而不是颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T02:51:18.917

经过一些研究，我相信可以通过首先使用您的图像创建一个模式，然后将该模式设置为`fillStyle`：

```
var ctx = canvas.getContext("2d");
var pattern = ctx.createPattern(imageObj, "repeat");
ctx.fillStyle = pattern; 
```

然后只需创建多边形（使用`moveTo`and `lineTo`）然后正常填充它。

来源：[这个插件](http://blogfreakz.com/jquery/polyclip-js-clip-jpeg-images-into-polygons/)的源代码。免责声明：我自己没有尝试过确认它有效。

**更新：**我仍在调查您是否可以操纵图像以适合任意多边形。原则上，您可以[`setTransform`](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Transformations)这样做：

```
ctx.save();
ctx.setTransform(m11, m12, m21, m22, dx, dy);
ctx.drawImage(imageObj);
ctx.restore(); 
```

确定`setTransform`参数的值（如果可能的话）是棘手的部分。自从我做**任何**数学以来已经很长时间了，但是如果我没记错的话，这就是需要做的事情：

```
(0,0) --- (w,0)       (x1,y1) --- (x2,y2)
  |         |            |           |
  |  Image  |     =>     |  Morphed  |
  |         |            |           |
(0,h) --- (w,h)       (x3,y3) --- (x4,y4) 
```

对于每个点，您将执行以下矩阵运算：

```
|m11 m21 dx|   |xI|   |xM|
|m12 m22 dy| X |yI| = |yM|
| 0   0   1|   | 1|   | 1| 
```

八个方程，六个变量（记住矩阵元素是变量，其余的是常数——我们的输入）。可能无解。现在只需推断（或谷歌搜索，或在 Math.SE 中询问...）并为每个参数实现公式...

**更新 2：**虽然我没有确凿的证据，但我相信用`setTransform`. 看看 Gimp 如何使用它的“透视”工具，有必要更改变换矩阵的第三行，以将图像变换为任意多边形。Canvas API 似乎没有为此提供方法（通常只支持仿射变换：平移、旋转、缩放、剪切或以上的组合）。

引用[这篇](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)关于 2D 变换的帖子：

> CSS3 2D-Transforms 只能将块转换为平行四边形。例如，不可能将块转换成这种形状： [不规则形状] 为了做到这一点，必须使用 CSS3 3D 转换。这就是为什么矩阵构造集只有三个控制点可以拖动，而不是四个。

有[CSS 3D Transforms](http://www.w3.org/TR/css3-3d-transforms/)的计划，但我不仅不知道它的支持范围有多广，而且我不知道 canvas 元素（带有 2d 上下文，也就是说 - WebGL 是另一个故事）是否会支持它。简而言之，不可能通过我所知道的任何方式来做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T21:40:57.967

您可以使用以下方法用图像填充多边形`context.clip()`：

```
 //create an image
  var img = new Image();
  img.src = 'imgPath/image.png'

  //draw the image when loaded
  img.onload = function(){
      var ctx = canvas.getContext("2d");
      ctx.save();

      //define the polygon
      ctx.beginPath();
      ctx.moveTo(x1,y1);
      ctx.lineTo(x2,y2);
      ctx.lineTo(x3,y3);
      ctx.closePath();

      //draw the image
      ctx.clip();
      ctx.drawImage(img, leftMostXCoor, highestYCoor, polyWidth, polyHeight);

      //fill and stroke are still available for overlays and borders
      ctx.fill();
      ctx.stroke();

      ctx.restore();
  } 
```

# mysql - Wordpress：使用类别 slug 使用 mysql 查询获取类别 ID

> ID：10661849
> 
> 赞同：1
> 
> 时间：2012-05-19T02:29:12.390
> 
> 标签：mysql, wordpress

基本上，我有一个存储了类别 slug 的 cookie，使用这些数据我想查询数据库并返回类别的 ID。

我是 mysql 新手，这似乎是一个可能需要使用连接的高级查询，任何帮助或指导将不胜感激。

谢谢！

参考： [http ://codex.wordpress.org/File:WP3.0-ERD.png](http://codex.wordpress.org/File:WP3.0-ERD.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:31:29.893

查看[get_category_by_slug](http://codex.wordpress.org/Function_Reference/get_category_by_slug)页面上的示例：

```
<?php 
  $idObj = get_category_by_slug('slug'); 
  $id = $idObj->term_id;
?> 
```

更重要的是，如果您已经存储了 slug，为什么不将 id 连同它一起存储，以避免每次都需要查询 ID？

**编辑：**根据您的评论，您可能最容易将以下内容添加到任何 WordPress 页面：

```
define('SAVEQUERIES', true);
global $wpdb;
print_r($wpdb->queries); 
```

然后运行这篇文章的原始代码。这将使您能够查看 WordPress 为获取类别和相关数据而执行的查询，您可以复制它们并在代码中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:54:32.567

```
SELECT wp_term_taxonomy.term_taxonomy_id
FROM   wp_terms
  JOIN wp_term_taxonomy USING (term_id)
WHERE  wp_term_taxonomy.taxonomy = 'category'
   AND wp_terms.slug = ? 
```

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:26:29.757

好吧，名称和 slug 存储在同一张表上，所以应该这样做（仅 mysql，不涉及 WP Query）：

```
SELECT term_id as id FROM wp_terms WHERE slug = 'slug-here'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T13:44:42.893

您可以使用 WordPress 原生函数，[**`get_term_by`**](http://codex.wordpress.org/Function_Reference/get_term_by)例如：

```
$term = get_term_by('slug',$SLUG_FROM_COOKIE,'category'); 
```

现在`$term`是一个术语对象，因此您可以使用`$term->ID`

# button - 缩略图上方的 CSS 按钮

> ID：10661852
> 
> 赞同：0
> 
> 时间：2012-05-19T02:31:15.753
> 
> 标签：button, css, css-float, thumbnails

我不太确定如何进行此操作。我以前尝试过做这种事情但完全没有成功，所以我想我会先跳到这里来寻求你们这些聪明人的智慧。

基本上，我的页面上平铺了一系列 80x80 的缩略图，我希望在拇指的右下角有一个小的加号按钮（它有一个悬停，所以你可以看到它是一个按钮），它执行 Javascript 功能。基本上加号按钮会将缩略图添加到页面的另一个区域。

无论如何，有人可以给我一个快速的例子来说明如何做到这一点吗？不仅按钮可单击，而且如果单击缩略图的正常图像部分，我希望它转到该缩略图。我已经让缩略图部分工作了，我只需要弄清楚如何覆盖按钮并使其成为实际缩略图的单独可点击元素。我为此制作了一个加号按钮图像和一个悬停加号按钮图像。

基本上我只是在寻找一个起点，我在谷歌上尝试了一些例子，但我什么都做不了，而且没有一个是真正适合我想要做的。不幸的是，CSS 不是我的强项之一。

感谢大家的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:33:25.113

如果我理解正确，试试这个...

```
.img_container {position: relative; width: 80px; height: 80px;}

.img_container button {display: none; position: absolute; bottom: 0; right: 0; width: 20px; height: 20px;}
.img_container:hover {background: rgba(0,0,0,.4);}
.img_container:hover button {display: inline-block;) 
```

你的html

```
<div class="img_container">
    <img src="pic.png">
    <button>+</button>
</div> 
```

希望这可以帮助 ：）

# java - 如何让 java db sql 具有“按姓氏排序”？

> ID：10661854
> 
> 赞同：1
> 
> 时间：2012-05-19T02:31:31.193
> 
> 标签：java, android, database

这是源代码 - 当我尝试添加 +“按姓氏排序”时出现错误有什么想法吗？（绝对是新手）我有 // 在我的尝试前面大约 55 行。我试图让结果按姓氏排序

```
package com.tritech.colony;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class SearchPersonByColonyActivity extends Activity implements    OnItemClickListener
{
    private EditText searchPersonByColonyEditText ;
    private SQLiteDatabase db ;
    private Cursor cursor ;
    private ListAdapter adapter ;
    private ListView personByColonyListView ;
    private DatabaseHelper databaseHelper ;
    private String colonyName ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.searchpersonbycolony);
        this.colonyName =     this.getIntent().getStringExtra(DatabaseHelper.KEY_COLONY_NAME);
        this.databaseHelper = new DatabaseHelper(this);
        this.databaseHelper.createDatabase();
        try {
            this.databaseHelper.openDatabase();
        } catch( SQLException ex ) {
            Log.e( DatabaseHelper.TAG, "Database can not be opened", ex);
        }
        this.databaseHelper.close();
        this.db = this.databaseHelper.getReadableDatabase() ;
        this.searchPersonByColonyEditText =         (EditText)this.findViewById(R.id.searchPersonByColonyEditText);
        this.personByColonyListView = (ListView)this.findViewById(R.id.searchPersonByColonyList);
        this.personByColonyListView.setOnItemClickListener(this);
        this.cursor = this.db.rawQuery("SELECT _id as _id , " + 
                DatabaseHelper.KEY_LAST_NAME + " , " + 
                DatabaseHelper.KEY_FIRST_NAME + " , " +
                "\"" + DatabaseHelper.KEY_SR_JR + "\" " + 
                "FROM " + DatabaseHelper.TABLE_NAME + 
                " WHERE " + DatabaseHelper.KEY_COLONY_NAME + " LIKE ?", 
                new String[] { this.colonyName } );
// tried these for line above and they fails
// new String[] { this.colonyName } + " ORDER BY " + DatabaseHelper.KEY_LAST_NAME );
// new String[] { this.colonyName } + " ORDER BY lastname" );

        this.startManagingCursor(this.cursor);
        this.adapter = new SimpleCursorAdapter(this, 
                R.layout.searchpersonbycolonyrow , 
                this.cursor , 
                new String[] { DatabaseHelper.KEY_LAST_NAME ,     DatabaseHelper.KEY_FIRST_NAME , DatabaseHelper.KEY_SR_JR }, 
                new int[] { R.id.searchPersonByColonyLastnameTextView ,         R.id.searchPersonByColonyFirstnameTextView , R.id.searchPersonByColonySrJrTextView } );
        this.personByColonyListView.setAdapter(this.adapter);
    }

    @Override
    protected void onResume() {
        super.onResume();
        boolean back_tag = this.getSharedPreferences(MainActivity.TAG, MODE_PRIVATE).getBoolean(MainActivity.BACK_TAG, false);
        if( back_tag ) {
            this.finish();
        }
    }

    public void searchPerson( View v ) {
        String text = this.searchPersonByColonyEditText.getText().toString();
        if( !text.equals("") ) {
            this.cursor = this.db.rawQuery("SELECT _id as _id , " + 
                DatabaseHelper.KEY_LAST_NAME + " , " + 
                    DatabaseHelper.KEY_FIRST_NAME + " , " +
                    "\"" + DatabaseHelper.KEY_SR_JR + "\" " + 
                    "FROM " + DatabaseHelper.TABLE_NAME + 
                    " WHERE " + DatabaseHelper.KEY_COLONY_NAME + " LIKE ?" + 
                    " AND " + DatabaseHelper.KEY_LAST_NAME + " LIKE ?" , 
                    new String[] { this.colonyName , "%"+text+"%" } );
        } else {
            this.cursor = this.db.rawQuery("SELECT _id as _id , " + DatabaseHelper.KEY_LAST_NAME + " , " + DatabaseHelper.KEY_FIRST_NAME + " FROM " +     DatabaseHelper.TABLE_NAME + " WHERE " + DatabaseHelper.KEY_COLONY_NAME + " LIKE ?", new String[] { this.colonyName } );
            this.cursor = this.db.rawQuery("SELECT _id as _id , " + 
                    DatabaseHelper.KEY_LAST_NAME + " , " + 
                    DatabaseHelper.KEY_FIRST_NAME + " , " +
                    "\"" + DatabaseHelper.KEY_SR_JR + "\" " + 
                    "FROM " + DatabaseHelper.TABLE_NAME + 
                    " WHERE " + DatabaseHelper.KEY_COLONY_NAME + " LIKE ?", 
                    new String[] { this.colonyName } );
        }
        this.startManagingCursor(this.cursor);
        this.adapter = new SimpleCursorAdapter(this, 
                R.layout.searchpersonbycolonyrow , 
                this.cursor , 
                new String[] { DatabaseHelper.KEY_LAST_NAME ,     DatabaseHelper.KEY_FIRST_NAME , DatabaseHelper.KEY_SR_JR }, 
                new int[] { R.id.searchPersonByColonyLastnameTextView ,     R.id.searchPersonByColonyFirstnameTextView , R.id.searchPersonByColonySrJrTextView } );
        this.personByColonyListView.setAdapter(this.adapter);
    }

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Intent intent = new Intent( this , PersonDetailsActivity.class );
        Cursor cursor = (Cursor)this.adapter.getItem(position);
        intent.putExtra(DatabaseHelper.KEY_ID, cursor.getInt(     cursor.getColumnIndex(DatabaseHelper.KEY_ID) ) );
        this.startActivity(intent);
    }

    protected void onDestroy() {
        this.cursor.close();
        this.databaseHelper.close();
    super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:43:47.780

rawQuery() 看起来它需要两个参数：sql 语句，以及将替换 sql 语句中的 ? 的字符串数组。如果这是正确的，我认为你想要的是：

```
 this.cursor = this.db.rawQuery("SELECT _id as _id , " + 
            DatabaseHelper.KEY_LAST_NAME + " , " + 
            DatabaseHelper.KEY_FIRST_NAME + " , " +
            "\"" + DatabaseHelper.KEY_SR_JR + "\" " + 
            "FROM " + DatabaseHelper.TABLE_NAME + 
            " WHERE " + DatabaseHelper.KEY_COLONY_NAME + " LIKE ? ORDER BY " 
            + DatabaseHelper.KEY_LAST_NAME, 
            new String[] { this.colonyName } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:43:43.320

我认为您在 Order By 之前缺少 WHERE 子句。

例如：

```
 SELECT * FROM items
         WHERE item LIKE 'B%'
         ORDER BY cost; 
```

# java - Java - 写入标准？

> ID：10661856
> 
> 赞同：2
> 
> 时间：2012-05-19T02:31:45.653
> 
> 标签：java, swing, stdin

我有一个应用程序，在该应用程序中，让鼠标单击事件模拟用户在标准输入中键入某个字符串会非常方便。所以我想知道，有没有办法将代码写入标准？我意识到这有点像黑客，但它对于我需要做的事情非常有效。

编辑（响应气垫船的 EDIT2）：

谢谢。我了解该代码如何阻止人类玩家在不应该移动的情况下移动棋子。我不明白你是如何设想主游戏循环的。你介意写代码来告诉我你在想什么吗？您是否只是在想象一个忙碌的等待循环，它不断生成新的计算机动作并调用您的`Move()`方法（大部分时间在等待人类玩家移动时被拒绝）？像这样的东西？

```
public void gameLoop()
{
   while (gameNotOver)
   {
      Move compMove = generateComputersNextMove();
      move(blackPlayer, compMove); // where the blackPlayer is the computerPlayer 
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T03:10:01.030

你说：

> 基本上，我希望我的代码在某个点阻塞并等待用户单击我的 JFrame 中的特定 JLabel。用户单击 JLabel 后，我希望在获取所单击的 JLabel 的 id 后恢复代码。我不知道我会怎么做。我之前的方式是在代码中的那个点，用户只需输入一个 id （和 Scanner 的 next() 方法块）。

您不想阻止您的程序（不是在事件驱动程序中），而是更改您的 GUI 的状态，并将您对用户输入的响应基于此状态。您尝试的解决方案是一种*线性*思维方式，不适用于 Swing 或其他事件驱动的 GUI。

例如，作为一个简单的例子，考虑给你的程序一个布尔变量，

```
private boolean labelClicked = false; 
```

单击 JLabel 后，在 JLabel 的 MouseListener 中将其更改为 true。然后仅在布尔值为真时才响应其他用户输入。

或者另一种可能的解决方案：如果您想在按下 JLabel 后激活 JButton，则禁用 JButton，并从 JLabel 的 MouseListener 中调用 JButton 上的 setEnabled(true)。

关键是要思考*事件驱动编程*。
在这个论坛中问这样的问题时，另一个关键不是问我们一个特定于代码的问题，而是一个特定于行为的问题。这里真正的问题不是如何写入标准，而是如何让你的程序暂停并等待用户输入——这是一个很大的区别。

最后，如果您需要更具体和更好的建议，请向我们填写您的问题的详细信息，如果其中有任何令人困惑的地方，请务必提出问题。祝你好运！

**编辑 1**
您可能会有几个类，包括管理此应用程序的 GUI 和非 GUI 类，非 GUI 类可以包括：

*   播放器类：可以是人或计算机
*   棋盘类：棋盘的逻辑（非gui）表示
*   Piece 类：所有具体 Pieces 派生自的抽象类
*   ChessAI 课：这是你的 AI 课，它为计算机计算出下一个最佳棋步应该是什么。
*   游戏类：也许是本次讨论中最重要的类，因为它将控制游戏流程并决定轮到谁移动。

Game 类将包含一个名为 Player 的字段`turn`，该字段将包含对轮到谁的引用。假设你的 Game 类包含两个 Player 变量，humanPlayer 和 computerPlayer。turn 变量将持有这些对象中的一个或另一个，而 Player 的响应方式将取决于 turn 持有的对象。

Game 类将有一个循环，一个游戏循环，它在告诉humanPlayer 对象和computerPlayer 对象轮到他们移动之间交替。

所以说轮到计算机了，计算下一个最佳动作需要一段时间。如果同时人类玩家试图在 GUI 上拖动棋子，GUI 将通知 Game 类人类试图移动，Game 类将检查是否轮到人类（通过检查`if (turn == humanPlayer)`）以及是否轮到人类, 游戏会通知 GUI，GUI 会将棋子设置回原来的位置，并且可能会弹出警告消息。

在计算机请求 Game 移动其棋子后，Game 将告诉 GUI 移动计算机的棋子，然后 Game 将设置 turn = humanPlayer，现在允许人类玩家移动。在humanPlayer 尝试移动后，GUI 将告诉 Game 人类尝试移动。游戏将检查它是否有效，如果是，将告诉 computerPlayer 它现在应该采取行动。

请注意，当我说“告诉”时，我的意思是它将调用该对象的公共方法。

**编辑2**
我的意思是这样的：

```
public class Game {
   private Player whitePlayer;
   private Player blackPlayer;
   private Player turn;
   private Board board = new Board(); // non-GUI logical board
   private Gui gui; // the Swing GUI that displays all

   public Game(String humanPlayerName, boolean humanWhite) {
      if (humanWhite) {
         whitePlayer = new HumanPlayer(humanPlayerName, this);
         blackPlayer = new ComputerPlayer("Computer", this);
      } else {
         whitePlayer = new ComputerPlayer("Computer", this);
         blackPlayer = new HumanPlayer(humanPlayerName, this);
      }
   }

   public void start() {
      whitePlayer.setMyTurn(true); // tell white player to move
   }

   public void move(Player playerMakingMove, Move move) {

      // only respond if the right player is making the move
      if (turn == playerMakingMove) {
         // check if its a valid move
         // if so, tell GUI to make move
         // check if game over

         turn.setMyTurn(false); // current player's turn is over
         turn = (turn == blackPlayer) ? whitePlayer : blackPlayer; // swap players
         turn.setMyTurn(true); // tell other player, it's his turn

         turn.makeMove(); // *** added
      } else {
         // send message that it's not their turn to move
      }
   }
} 
```

因此，如果人类玩家尝试移动 GUI 将为人类玩家移动（...），但 Game 对象不会响应，除非实际上轮到人类了。

**添加到 Player 的Edit 3**
`makeMove()`方法 请注意，Game 的`move(...)`方法可能是所有需要的游戏循环，特别是如果 ComputerPlayer 的`makeMove(...)`方法告诉 AI 引擎创建下一个最佳移动，然后再次调用 Game 的 move(...) 方法：

```
abstract class Player {
   private String name;
   private boolean myTurn = false;
   protected Game game;

   public Player(String name, Game game) {
      this.name = name;
      this.game = game;
   }

   public abstract void makeMove();

   public boolean isMyTurn() {
      return myTurn;
   }

   public void setMyTurn(boolean myTurn) {
      this.myTurn = myTurn;
   }

   public String getName() {
      return name;
   }

}

class HumanPlayer extends Player {

   public HumanPlayer(String name, Game game) {
      super(name, game);
   }

   @Override
   public void makeMove() {
      // TODO: ask GUI to inform player that it's his turn to move and accept the move

   }

}

class ComputerPlayer extends Player {
   private ChessAi chessAi = new ChessAi();

   public ComputerPlayer(String name, Game game) {
      super(name, game);
   }

   @Override
   public void makeMove() {
      game.move(this, chessAi.calcBestMove());
   }

} 
```

两个玩家`game.move(...)`都知道移动后会打电话，这使得游戏提示下一个玩家移动......直到游戏结束。

请注意，这不是一个正在运行的程序，也不是故意的，而是更多的模型来说明可能的游戏逻辑。我没有做过这样的事情，并且可能有更好和更清洁的方法来做到这一点，但我只想了解在事件驱动的 GUI 程序中实现基于回合的逻辑的方法。

**编辑 4**
编译并运行以下简单的事件驱动 GUI：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class EventDrivenGui extends JPanel {
   private static final Color GO_COLOR = Color.green;
   private static final Color STOP_COLOR = Color.red;
   private static final int SIDE = 300;
   private static final int TIMER_DELAY = 4 * 1000; // change light every 4 seconds
   private boolean go = false;
   private JButton button = new JButton("Button");

   public EventDrivenGui() {
      add(button);
      button.addActionListener(new ButtonListener());
      new Timer(TIMER_DELAY, new TimerListener()).start();
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

      Color color = go ? GO_COLOR : STOP_COLOR;
      g2.setColor(color);
      g2.fillOval(0, SIDE / 3, SIDE, SIDE);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(SIDE, (4 * SIDE) / 3);
   }

   private class ButtonListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent arg0) {
         if (go) {
            JOptionPane.showMessageDialog(EventDrivenGui.this, "Button is Active");
         }
      }
   }

   private class TimerListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent e) {
         // toggle go. if true, now false, and visa versa
         go = !go;
         repaint(); // redraw oval
      }
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            EventDrivenGui mainPanel = new EventDrivenGui();

            JFrame frame = new JFrame("EventDrivenGui");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add(mainPanel);
            frame.pack();
            frame.setLocationByPlatform(true);
            frame.setVisible(true);
         }
      });
   }

} 
```

您会看到在 JPanel 中有一个 JButton。作为用户，您可以随时按下按钮，但它只会在灯为绿色时响应（当 go 布尔变量为 true 时）。这是一个示例，其中按钮的行为（是否响应按下）取决于类的状态，无论 go 是否为真。一旦设置了 GUI——构造函数被调用，它被放置在一个 JFrame 中，并被显示出来，没有代码阻塞或类似的东西。有一个 Swing Timer，它唯一的工作就是切换 go 的值并重新绘制 JFrame，但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:33:44.107

看看 JDialog [http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html)。它可以在 Swing 应用程序中阻塞，而不会造成不必要的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:11:11.037

你必须重新考虑你的解决方案。考虑标准已经连接到您的键盘，因此已经有一些东西写入标准输入。抱歉，标准客栈没有空间。

# javascript - Javascript 方法：this & that

> ID：10661859
> 
> 赞同：2
> 
> 时间：2012-05-19T02:32:10.343
> 
> 标签：javascript, object, methods, this

这里的第一个问题。

我正在尝试 Javascript 对象。这是我的代码：

```
function main(){
    document.onkeydown = hero.keyListener;
    hero.move();
    hero.counter(); 
}
var hero = {
    dx: undefined,
    dy: undefined,
    keyListener: function (e) {
        this.dy = 100;
    },  
    move: function () {
        this.dx = 80;
    },
    counter: function() {
        document.getElementById("dxcounter").innerHTML = "Dx: "+ this.dx + " Dy: "+ this.dy;
    }   
}; 
```

move 方法会更新，但 keyListener在按下键时`this.dx`不会更新。`this.dy`

如果我像这样更改keyListener，它会起作用：

```
keyListener: function (e) {
    that = hero;
    that.dy = 100;
}, 
```

为什么 move 方法对 keyListener 有效，`this`但对 keyListener 无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:34:50.003

在 JavaScript 中，`this`默认情况下不绑定到对象；它是由上下文设置的。在这种情况下，`this`将`document`. 解决此问题的一种方法是绑定函数，使其`this`始终为`hero`：

```
document.onkeydown = hero.keyListener.bind(hero); 
```

^(注意：[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)仅在更新的浏览器中可用。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:35:51.003

JavaScript 中的`this`运算符并不总是遵循您期望的范围规则。

这篇文章将有助于解释发生了什么：[http ://unschooled.org/2012/03/understanding-javascript-this/](http://unschooled.org/2012/03/understanding-javascript-this/)

# nginx - Pyramid url 生成错误，在 nginx+phusion 乘客和 Mako 模板上提供

> ID：10661867
> 
> 赞同：0
> 
> 时间：2012-05-19T02:33:16.947
> 
> 标签：nginx, passenger, pylons, pyramid, mako

遇到一个涉及 Pyramid 请求 url 的问题，其中`request.static_url`2`request.application_url`个可识别的嫌疑人。

Pyramid 中生成的请求 url 在我将其放在网络主机上时以某种方式包含视图 url，但在本地使用`pserve`.

例如：

```
config.add_route('signin','/view/signin') 
```

Mako 模板内部

我有：

```
href="${request.static_url('project:static/blueprint/css/screen.css')}" 
```

应该显示（使用`pserve`）：

```
href="http://www.site.com/static/blueprint/css/screen.css" 
```

但相反，它显示：

```
href="http://www.site.com/view/signin/static/blueprint/css/screen.css" 
```

另一个例子是首页的网址应该显示：

```
src = "http://www.site.com/static/img/foo.jpg" 
```

相反，它显示：

```
src = "http://www.site.com//static/img/foo.jpg" 
```

我目前在 VPS 服务器上使用 nginx 0.8.53 + Phusion 乘客 2.2.15 运行 Pyramid 1.3 + Mako 模板。

这与`request.application_url`. 在视图代码中，我发送了一个 dict ( `url = request.application_url + '/view/signin'`)

表单的 url 应显示：

```
action="http://www.site.com/view/signin" 
```

相反，它显示：

```
action="http://www.site.com/view/signin/view/signin" 
```

我在[http://wiki.pylonshq.com/display/pylonscookbook/Running+Pylons+with+NGINX](http://wiki.pylonshq.com/display/pylonscookbook/Running+Pylons+with+NGINX)上复制了一些 nginx 设置。

尤其是：

```
 #site runs on Pylons 
    location / {
        include /usr/local/nginx/conf/proxy.conf;
        proxy_pass  http://127.0.0.1:8080;
        proxy_redirect  default; 
    } 
```

和proxy.conf：

```
 proxy_redirect          off;
    proxy_set_header        Host $host;
    proxy_set_header        X-Real-IP $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    client_max_body_size    10m;
    client_body_buffer_size 128k;
    proxy_connect_timeout   90;
    proxy_send_timeout      90;
    proxy_read_timeout      90;
    proxy_buffer_size       4k;
    proxy_buffers           4 32k;
    proxy_busy_buffers_size 64k;
    proxy_temp_file_write_size 64k; 
```

我留下的其他人是我不想碰的。

服务器上的 nginx.conf 看起来像这样。（我不使用 PHP，但那是我不想接触的东西）。

有人建议将应用程序服务/安装在 /，但我不知道该怎么做。

```
 server {
            listen <ip>:80;

            server_name site.com www.site.com;

            access_log /<path>/access.log combined;
            error_log /<path>/error.log error;

            root /home/<path>/public;

            index index.html index.htm index.php index.php5;
            include /home/<path>/nginx/site.com/*;

            # No mirrors - using strict redirects
            #if ($http_host != site.com) {
            rewrite ^(.*)$ http://site.com$1 permanent;
            #}

            autoindex on;

            passenger_enabled on;
            passenger_base_uri /;

            # Disallow access to config / VCS data
            location ~* /\.(ht|svn) {
                deny all;
            }

            #site runs on Pylons 
            location / {
                include /<path to conf file>/proxy.conf;
                proxy_pass  http://127.0.0.1:8080;
                proxy_redirect  default; 
            }

            # Statistics
            location /stats/ {
                alias /home/<path>/html/;
                auth_basic "Statistics Area";
                auth_basic_user_file /home/<path>/html/.htpasswd;
            }

            location /doc/analog/ {
                alias /usr/share/analog/;
            }

            # PHPMyAdmin
            rewrite ^/dh_phpmyadmin/([^/]*)/(.*)$ /dh_phpmyadmin/$2;

            location /dh_phpmyadmin/ {
                alias /dh/web/phpmyadmin/;
            }

            location ~ /dh_phpmyadmin/(.+)\.php {
                alias /dh/web/phpmyadmin/;
                fastcgi_param SERVER_PORT 80;
                fastcgi_split_path_info ^(.+\.php)(/.*)$;
                include /dh/nginx/etc/fastcgi_params;
                set $relpath "index.php";
                if ($uri ~ ^/dh_phpmyadmin/(.+)$) {
                    set $relpath $1;
                }
                fastcgi_param SCRIPT_FILENAME /dh/web/phpmyadmin/$relpath;
                fastcgi_pass unix:/home/<path>/.php.sock;
            }

            # PHP
            location ~* \.(php|php5|php4)($|/) {
                fastcgi_param SERVER_PORT 80;
                fastcgi_split_path_info ^(.+\.(?:php|php5|php4))(/.*)$;
                if (!-e $document_root$fastcgi_script_name) {
                    return 404;
                }
                include /dh/nginx/etc/fastcgi_params;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_pass unix:/home/<path>/.php.sock;
                #pragma php_launch <path>
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:13:59.747

您的网络服务器（乘客？我没用过）似乎没有`request.environ`正确设置环境 ( )。这可能是一个配置选项，但如果您在访问时查看环境`SCRIPT_NAME`和`PATH_INFO`键，`/view/signin`您应该会看到`SCRIPT_NAME=''`和`PATH_INFO='/view/signin'`。如果不是这种情况，您的应用程序前缀可能在乘客中是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:04:35.243

您的网站没有使用乘客来服务金字塔。它确实使用了 reverse_proxy。除非有办法在端口 8080 上运行乘客，否则 nginx 配置中的乘客部分是无用的。

也就是说，你可以看看那里：

[http://kbeezie.com/view/using-python-nginx-passenger/5/](http://kbeezie.com/view/using-python-nginx-passenger/5/)

您必须删除此块才能使其与乘客一起使用：

```
 location / {
            include /<path to conf file>/proxy.conf;
            proxy_pass  http://127.0.0.1:8080;
            proxy_redirect  default; 
        } 
```

然后你必须创建你的可调用 wsgi 函数，该函数将调用金字塔。

您必须为乘客定义根路径：

```
root /path/to/app/public/; 
```

并放入`/path/to/app/`

一个名为passenger_wsgi.py 的文件，其内容与此文件相似

```
import sys
import os

def application(environ, start_response):
    start_response("200 OK", [])
    ret = ["%s: %s\n" % (key, value)
        for key, value in environ.iteritems()]
    return ret 
```

但是，您必须调用pyramid，而不是它，它是您应用程序的入口点。

也就是说，你有什么理由使用乘客。使用 uwsgi 之类的东西来部署您的应用程序不是更容易吗？与乘客一起部署一个 ruby​​ 应用程序是有意义的，但我看不出你从使用乘客中得到了什么。

这是一个很好的教程，您可以跳过大部分部分，因为这里只有对您有意义的 nginx-uwsgi 部分。

[http://liangsun.org/2012/02/pyramid-nginx-uwsgi-mysql/](http://liangsun.org/2012/02/pyramid-nginx-uwsgi-mysql/)

# php - CodeIgniter：如何显示单个验证错误？

> ID：10661869
> 
> 赞同：5
> 
> 时间：2012-05-19T02:33:45.063
> 
> 标签：php, codeigniter

如果我用这个

```
<?= validation_errors(); ?> 
```

结果是

```
Username field is required
Password field is required
<textbox for username>
<textbox for password> 
```

我真正需要的是在它们的元素中显示这些错误

例子：

```
<textbox for username> Username field is required
<textbox for password> Password field is required 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T05:59:41.277

为了单独显示错误，您应该使用函数**form_error('username')**。为了让您获得正在检查的字段的值，请使用函数**set_value('username')**。

要使这两个功能起作用，您必须在控制器中为“用户名”字段设置规则。您指定适用于该字段的验证规则的位置。

```
<?php echo form_error('username'); ?>
<input type="text" name="username" value="<?php echo set_value('username'); ?>"> 
```

这是一个[关于表单登录的简单教程](http://jrtashjian.com/2009/02/simple-login-form-with-codeigniter-2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T02:44:56.967

用户指南中对此进行了介绍：

> [http://codeigniter.com/user_guide/libraries/form_validation.html#individualerrors](http://codeigniter.com/user_guide/libraries/form_validation.html#individualerrors)
> 
> ### 单独显示错误
> 
> 如果您希望在每个表单字段旁边显示错误消息，而不是作为列表，您可以使用该`form_error()`功能。

因此，如果您的字段名称是`username`，您将使用`form_error('username')`.

> **重要提示**：如果您使用数组作为表单字段的名称，则必须将其作为数组提供给函数。例子：
> 
> `<?php echo form_error('options[size]'); ?>`

这是 的快捷方式`$this->form_validation->error()`，您也可以根据需要使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-25T19:25:25.547

当我搜索这个问题时，我正在寻找一种不同的答案。所以我想分享我对我遇到的问题的解决方案，即“如何显示单个验证错误？”

解决方案是在每个后​​续表单验证规则之前运行验证例程。这样只报告第一个错误。

```
 $this->form_validation->set_rules('username', 'Username', 'callback_check_username');

        if ($this->form_validation->run() == TRUE){
            $this->form_validation->set_rules('password', 'Password', 'callback_check_password');
        } 
```

# c# - string 和 StringBuilder 有什么区别？

> ID：10661877
> 
> 赞同：6
> 
> 时间：2012-05-19T02:35:22.457
> 
> 标签：c#, .net, string, stringbuilder

我知道这`string`是不可变的并且`StringBuilder`是可变的。但是任何人都可以解释以下代码输出吗？既然都是引用类型，为什么会有不同的结果呢？

```
String s1 = "hello";
String s2 = "hello";
Console.WriteLine(s1 == s2); //true
Console.WriteLine(Object.ReferenceEquals(s1, s2)); //true

StringBuilder sb1 = new StringBuilder("hello");
StringBuilder sb2 = new StringBuilder("hello");
Console.WriteLine(sb1 == sb2); //false
Console.WriteLine(Object.ReferenceEquals(sb1,  sb2)); //false 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T02:40:32.753

> 既然都是引用类型，为什么会有不同的结果呢？

因为`string`对象是高度优化的。特别是，由于它们是不可变的，编译器可以对它们进行实习以防止重复。

如果您有两个不同`string`的对象，它们都表示完全相同的字符串（如您的示例中所示），编译器将识别这一点并仅维护实际字符串对象的一个​​实例。

结果是，就编译器而言， the`s1`和对象实际上都是同一个对象，甚至引用内存中的相同位置。`s2`

这种簿记发生在称为“实习生表”的幕后，但这并不是您真正需要担心的事情。重要的是所有字符串文字都默认由编译器进行实习。

*对象不会*发生同样的事情`StringBuilder`，因为它们不是不可变的。它们旨在允许您修改字符串对象，因此，优化没有多大意义。这就是为什么您的`sb1`和`sb2`对象实际上被视为两个不同的对象。

经验法则非常简单：`string`默认使用，或者当您需要单个不可变字符串时使用。仅`StringBuilder`在您想多次修改同一个字符串时使用，例如在循环或其他相对较短的代码段中。

相关阅读：[优化 C# 字符串性能](http://blogs.msdn.com/b/charlie/archive/2006/10/11/optimizing-c_2300_-string-performance.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T02:43:23.813

当你声明

```
String s1 = "hello";
String s2 = "hello"; 
```

编译器足够聪明，知道这两个字符串是（并且将永远是）相同的，因此它只存储`"hello"`一次并创建`s1`和`s2`作为同一物理内存的别名。稍后，当您测试相等性时，两者相等，因为它们本质上是相同的变量。

另一方面，当您声明

```
StringBuilder sb1 = new StringBuilder("hello");
StringBuilder sb2 = new StringBuilder("hello"); 
```

编译器创建两个变量（因为它们都是可变的，但恰好被初始化为相同的值）。它将字符串复制`"hello"`到其中的每一个中，但现在有 2 个副本，因为以后可能会更改每个副本。因此，即使它们的内容相同，它们也是 2 个不同的实体，位于不同的物理内存位置，因此对象相等性测试失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T03:10:22.927

默认情况下，当比较两个引用类型的对象时，只有当两个引用相等时结果才为*真*，这意味着两个操作数必须引用相同的对象实例。因为 sb1 和 sb2 引用的对象是两个不同的对象，所以 StringBuilders 比较的结果是 false。

但是 String 类以这样一种方式覆盖了相等运算符，它不会通过引用来比较对象，而是通过它们的值来比较对象，因为这种行为非常直观并且是程序员所期望的。这就解释了为什么 s1 == s2 返回 true。

Object.ReferenceEquals(s1, s2) 也返回 true 的原因（尽管 s1 和 s2 似乎引用了不同的字符串实例）称​​为[字符串实习](http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html)。它导致 CLR 将所有出现的相同字符串文字（例如您的示例中的“hallo”和“hallo”）放入每个应用程序的内部字符串池一次，因此 s1 和 s2 实际上都引用了字符串“hallo”的相同实例. 这是可能的，因为字符串是不可变的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T02:40:07.017

当您执行以下操作时，您正在比较两个不同的 StringBuilder 对象而不是它们的值：

```
StringBuilder sb1 = new StringBuilder("hello");
StringBuilder sb2 = new StringBuilder("hello");
Console.WriteLine(sb1 == sb2); //false 
```

这是您可以比较它们的值的方式：

```
Console.WriteLine(sb1.ToString() == sb2.ToString()); 
```

# spring - 为什么当我将 hbm2ddl.auto 设置为创建时，Hibernate 会抛出 SQLGrammarException 说表/视图不存在？

> ID：10661878
> 
> 赞同：3
> 
> 时间：2012-05-19T02:35:24.247
> 
> 标签：spring, hibernate, servlets, sqlexception, hbm2ddl

我一直在试验hibernate、spring和servlet。现在，我被困住了。为什么我会收到此异常？我认为当 hbm2ddl.auto 设置为创建时会自动创建表。

***应用上下文.xml***

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver" />
    <property name="url" value="jdbc:derby://localhost:1527/db;create=true" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="org.springpractice.domain" />
    <property name="hibernateProperties">
        <props>
            <prop key="dialect">
                org.hibernate.dialect.DerbyTenSevenDialect</prop>
            <prop key="show_sql">true</prop>
            <prop key="cache.provider_class">
                org.hibernate.cache.NoCacheProvider</prop>
            <prop key="hbm2ddl.auto">create</prop>
        </props>
    </property> 
</bean> 
```

***用户详细信息.java***

```
package org.springpractice.domain;

@Entity
public class UserDetails {

    @Id @GeneratedValue
    protected int id;
    protected String name;
    protected String email;

    // setters/getters ...
} 
```

***主.java***

```
@WebServlet("/")
public class Main extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter pw = response.getWriter();
        pw.println("hello from servlet");

        UserDetails user = new UserDetails();
        user.setEmail("bob.smith@gmail.com");
        user.setName("Bob Smith");

        ApplicationContext beanFactory =
            WebApplicationContextUtils
                .getRequiredWebApplicationContext(getServletContext());
        SessionFactory sessionFactory = (SessionFactory)     beanFactory.getBean("sessionFactory");
        Session session = sessionFactory.openSession();
        session.save(user);
        session.close();

    }

} 
```

***例外***

```
org.hibernate.exception.SQLGrammarException: Table/View 'USERDETAILS' does not exist.
org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:146)
org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
$Proxy10.prepareStatement(Unknown Source)
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:14:38.327

属性名称应以 hibernate 为前缀。

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="org.springpractice.domain" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.DerbyTenSevenDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.provider_class">
                org.hibernate.cache.NoCacheProvider</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property> 
</bean> 
```

顺便说一句，有一种更简单的方法来配置属性，如下所示

```
 <property name="hibernateProperties">
        <value>
            hibernate.dialect=org.hibernate.dialect.DerbyTenSevenDialect
            hibernate.show_sql=true
            hibernate.cache.provider_class=org.hibernate.cache.NoCacheProvider
            hibernate.hbm2ddl.auto"=create
        </value>
    </property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:11:37.710

尝试使用注释注释您的实体`@Table("USERDETAILS")`和所有字段`@Column`。

参考[http://www.vaannila.com/spring/spring-hibernate-integration-1.html](http://www.vaannila.com/spring/spring-hibernate-integration-1.html) [Hibernate 是否会自动在数据库中创建表](https://stackoverflow.com/questions/4507142/does-hibernate-create-tables-in-the-database-automatically) [Hibernate hbm2ddl.auto 可能的值以及它们的作用？](https://stackoverflow.com/questions/438146/hibernate-question-hbm2ddl-auto-possible-values-and-what-they-do)

# python-3.x - Python 布尔映射

> ID：10661881
> 
> 赞同：0
> 
> 时间：2012-05-19T02:35:37.877
> 
> 标签：python-3.x, boolean

我将如何映射二`sets`、一`boolean`、一`string`。

在我的程序的情况下，列表是空的，并且在程序的开头和`batsmanName`位置插入了两个字符串（用户选择的名称）。`[0]``[1]`

现在在另一个函数中有一个计算，根据运行是奇数还是偶数，将`batsmanBatting`in`[0]`或设置为 true 或 false 的状态。`[1]`基本上如果`batsmanBatting`index 是`true`，那么它需要`batsmanName`在相应的索引中显示。

```
batsmanName=[]
batsmanRun=[0,0,0,0,0,0,0,0,0,0,0]
batsmanOnField=[False,False,False,False,False,False,False,False,False,False,False]
batsmanBatting=[False,False,False,False,False,False,False,False,False,False,False] 
```

我是否走在正确的道路上：`bat=dict(zip(batsmanName, batsmanBatting)`

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:11:08.743

**我认为你在正确的轨道上，但是当调用bat**函数时 batsmanName 列表不能为空，否则字典将为空，因为不会有针对值的键。

# android - 带有布局行的 Android 动画

> ID：10661884
> 
> 赞同：0
> 
> 时间：2012-05-19T02:36:15.153
> 
> 标签：android, animation

我正在为 Android 布局动画而苦苦挣扎。下图告诉我想要做什么：

布局中有 3 行。第 1 行位于布局的顶部，第 2 行和第 3 行位于布局的底部。

当用户点击 row1 时，row2 将移动到 row1 下方的位置。

![在此处输入图像描述](../Images/1ec74f43b2f0444c1eb22d58ca271a51.png)

(1) 我应该使用带有翻译动画的 AbsoluteLayout（其中包含行）吗？

（2）还有其他更好的方法吗？在 AbsoluteLayout 中处理子布局并不容易。

# android - SQLiteException：接近“null”：插入数据库时 出现语法错误

> ID：10661885
> 
> 赞同：0
> 
> 时间：2012-05-19T02:36:36.430
> 
> 标签：android, sqlite

美好的一天，只是用相关的代码来简短地说，

如果我在我的活动中这样做：

```
 Intent i = getIntent();
          Bundle extras = i.getExtras();

          BitmapFactory.Options bf = new BitmapFactory.Options();
          bf.inSampleSize = 2;

          filename = extras.getString("pic_name");
          ImageView  iv = new ImageView(getApplicationContext());
          Bitmap bm = BitmapFactory.decodeFile(filename, bf);
          iv.setImageBitmap(bm);
          setContentView(iv);

  registerForContextMenu(iv);

public boolean onContextItemSelected(MenuItem item){
       // weatherimagedb = new WeatherImageDB(this);
        //weatherimagedb.open();

        ContentValues vals = new ContentValues();
        int selection = item.getItemId();
        switch(selection){
        case Holidays:

             vals.put(ImageDB.HOLIDAYS, filename);

        break;
        case Weather:
            vals.put(ImageDB.WEATHER, filename);

        break;
        }
             imagedb.tagImage(filename, vals); //logcat error is here

  return true;
} 
```

在 imageDB 数据库类中，我有一个这样的方法：

```
public long tagImage(String pathname, ContentValues val){  
    return db.insert(DATABASE_TABLE, null, val);    //logcat error is here

} 
```

我在数据库中收到此错误，但它不会使我的应用程序崩溃：

```
05-19 02:44:55.580: E/Database(3088): Error inserting 
05-19 02:44:55.580: E/Database(3088): android.database.sqlite.SQLiteException: near "null": syntax error: , while compiling: INSERT INTO imagetags(null)  VALUES(NULL);
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1231)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1658)
05-19 02:44:55.580: E/Database(3088):   at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1515)
05-19 02:44:55.580: E/Database(3088):   at com.MyApps.ImageUpdate.ImageDB.tagImage(ImageDB.java:82)
05-19 02:44:55.580: E/Database(3088):   at com.MyApps.ImageUpdate.ViewImage.onContextItemSelected(ViewImage.java:134)
05-19 02:44:55.580: E/Database(3088):   at android.app.Activity.onMenuItemSelected(Activity.java:2254) 
```

请问我做错了什么？..我没有正确使用 ContentValues 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:38:40.333

难道你`selection`的既不是`Holidays`也不是`Weather`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:51:41.070

在某些情况下，可能没有一个 case 开关是正确的，因此不会在“val”中添加任何内容。

# ide - 如何在不将手从键盘上移开（或使用箭头键）的情况下跳过 IDE 中自动生成的结尾？

> ID：10661886
> 
> 赞同：1
> 
> 时间：2012-05-19T02:36:39.757
> 
> 标签：ide, tags, keyboard-shortcuts, text-editor, html

好的，让我们举个例子，但在此之前，一个简单的键。

```
"*" means "this is where the cursor is".
"**" means "this is where we'd like the cursor to be able to 'jump' to" 
```

现在假设您或我需要编写一些代码，假设我们甚至没有认真思考，甚至​​可能正在抄袭别人的代码。我们有耐心，但很匆忙。好的，所以你正在写这个......

```
<div class="subject show"> 
#ok, the ">" and "" were pregenerated, but I didn't need to skip, next line
<h2>title*</h2>** 
```

我们立即遇到了这个问题。是的，我的 IDE 自动为我的 h2 标签生成了结束标签，这很棒，但是当我完成定义它时，如何跳过括号之外的内容？

```
<h2>Show Subject*</h2>** 
```

如果我的光标在那个星号所在的位置，我如何自动跳到两个星号所在的位置？**那甚至会被称为什么？**这基本上是我的问题。我认为答案会非常简短。这里还有几个例子来说明这一点。

在同一个 html.erb 文件中继续...

```
 <table summary="Subject detail view">
    <tr>
      <th>Name*</th>**
    </tr>
  </table>
</div> 
```

所以在这里，我的 IDE（我也使用的 RubyMine、Aptana 和大多数其他编辑器一样做类似的事情）执行得很漂亮，自动生成结束标签，我只需要稍后再进行处理。完成输入“名称”后，我遇到了下一个障碍。同样，我被困在 * 但想跳到 ** 而不会造成太多干扰。

现在我想我已经说明了我的观点。我喜欢这个社区，并且知道你们中的一些人知道如何解决这个问题。*仅仅描述*我们在这里所做的事情本身就是一个挑战！我将其称为“跳过自动生成的结束标签”，但谷歌目前还没有同情这个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:41:39.253

尝试按 End 键，这将跳到行尾。

资料来源： [http ://en.wikipedia.org/wiki/Table_of_keyboard_shortcuts](http://en.wikipedia.org/wiki/Table_of_keyboard_shortcuts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:54:16.480

在某些 IDE 中，按 Tab 键会将光标移动到当前自动替换元素中的下一个占位符，如果没有更多占位符，则会将您带到自动替换文本的末尾。

# android - XML 菜单背景内存问题

> ID：10661894
> 
> 赞同：0
> 
> 时间：2012-05-19T02:39:00.520
> 
> 标签：android, xml, out-of-memory

我正在开发一款安卓游戏。我使用 xml 文件创建 2 个菜单。当它们具有相同的背景时，菜单可以正常工作，但是当它们具有不同的背景时，程序会因 OutOfMemoryError 而崩溃。

这是两个 xml 文件的样子：

文件 1：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:layout_width="wrap_content"
        android:gravity="center_horizontal"
        android:layout_height="wrap_content"
        android:background="@drawable/background">

                Bunch of TextViews 
```

文件 2 完全相同，只是背景是 @drawable/background2

我得到的 LogCat 错误是：

```
E/AndroidRuntime(534): FATAL EXCEPTION: GLThread
E/AndroidRuntime(534): java.lang.OutOfMemoryError
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:605) 
```

我不太确定这个错误与我更改背景图像有何关系，而且问题与我正在使用的背景图像的大小无关。我尝试使用一张 800KB 的背景图片并没有问题，但是当我尝试两张大约 150KB 的不同背景图片时出现错误。

我有一个创建菜单的活动：

```
 public class MenuActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main_new); 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:15:27.593

> 该问题与我使用的背景图像的大小无关。

*实际上，它是，尽管size*的含义不同。文件大小在运行时并不重要，因为在内部 Android 将所有图像加载为`Bitmap`s`ARGB_8888`格式。这意味着每个像素由 4 个字节表示，并且*视觉大小*（图像尺寸/分辨率）决定了显示图像所需的内存。例如，一个 800 x 480 像素的图像在运行时需要 800 * 480 * 4 = 1536000 字节，或大约 1.5 MB。

话虽如此，应该清楚为什么为 Android 指定的不同密度桶提供资产很重要。如果您还没有阅读[“支持多个屏幕”指南](http://developer.android.com/guide/practices/screens_support.html)，我强烈建议您这样做。提供正确大小的资产可能会显着提高内存使用率，尽管它通常以更大的 apk 为代价。

此外，您还有更多选择。例如，如果背景图像的内容允许，则将它们转换为[9-patches](http://developer.android.com/guide/developing/tools/draw9patch.html)。您还可以尝试以（出于质量原因不推荐使用）`ARGB_4444`格式加载图像，与`ARGB_8888`.

最后，根据您的实现细节，您可以通过手动释放资源（例如通过调用对象）来提高运行时的内存`recycle()`使用率`Bitmap`。尽管 Dalvik VM 也会处理垃圾收集未引用的资源，但它可能需要几个周期才能真正发生。显式释放资源有时会有所帮助，例如，如果您仅加载`Bitmap`s 以将它们作为纹理传递到 OpenGL 管道，则这是常见的做法。此外，如果您使用 OpenGL 纹理，请不要忘记调用`gl.glDeleteTextures(...)`以释放包含您不再需要的纹理的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:08:52.277

您可以清除垃圾收集器。它

```
@Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        Runtime.getRuntime().gc();
        System.gc();
        super.onDestroy();
    } 
```

# javascript - jQuery scrollTop 有替代品吗？

> ID：10661896
> 
> 赞同：7
> 
> 时间：2012-05-19T02:39:17.427
> 
> 标签：javascript, scroll

是否有任何替代方法可用于将浏览器滚动到页面顶部的功能？现在我正在使用：`$('html, body').animate({scrollTop: '0px'}, 300);`。

**是否还有其他东西，或者不是 jQuery 的东西**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T07:56:25.173

下面是 scrollTop 函数的纯 JavaScript 实现。它使用 setInterval 作为异步 while 循环，周期性地递减 pageYOffset 值，该值表示相对于页面顶部的滚动条位置。

澄清一下，while 循环会阻止页面上的其他脚本运行，并且会立即滚动到顶部，而与 step 值无关。然而，具有 50 毫秒迭代的 setInterval 只会每 50 毫秒阻塞一次页面，并且会在每次单独的迭代后更新滚动条 UI。

该函数采用单个参数“step”，它确定滚动条移动到屏幕顶部的速率。步长越小，滚动条移动到顶部的速度越慢。

```
function scrollTop(step) {
    var start = window.pageYOffset;
    var count = 0;
    var intervalRef = setInterval( (function(interval, curOffset) {
        return function() {
            curOffset -= (interval * step);
            console.info("offset = " + curOffset);
            window.scrollTo(0, curOffset);
            console.info("pageYoffset = " + window.pageYOffset);
            count++;
            if(count > 150 || curOffset < 0) clearInterval(intervalRef);
        }
    })(step, start--), 50);
}

// scroll to the top from the middle of the page in about 5 seconds.
scrollTop(5);

// scroll to the top in about 1 second
scrollTop(15);

// scrolls to the top very fast!
scrollTop(35); 
```

当偏移量达到 0 时，间隔停止，这意味着滚动条已到达页面顶部。

但是，计数检查器会将操作限制为仅 150 次迭代，以防止您锁定浏览器，以防您决定对其进行修改。否则，您可以删除该条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T02:46:01.727

Hiya**工作演示** [http://jsfiddle.net/jqj9T/5/](http://jsfiddle.net/jqj9T/5/) **或** [http://jsfiddle.net/jqj9T/5/show/](http://jsfiddle.net/jqj9T/5/show/)

这就是你要找的吗，在 IE - 8 中也检查过，这个版本有效。

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

希望这可以帮助，

**请注意**，我从 150 开始演示/展示它是如何工作的，您可以根据自己的情况将其更改为 0。

另一个使用慢的版本：http: [//jsfiddle.net/jqj9T/7/](http://jsfiddle.net/jqj9T/7/)

**jQuery代码**

```
if( $('html,body').scrollTop() != 150 ){
    $('html,body').animate({scrollTop: $(window).scrollTop() + 150}, 300);
} 
```

# python - 将列表中的元素分类为特定长度列表的列表

> ID：10661897
> 
> 赞同：1
> 
> 时间：2012-05-19T02:39:20.317
> 
> 标签：python, list, sorting, split

嘿伙计们，我正在使用 python，我只是想知道我们如何从原始元素列表中组合特定长度的列表？例如，我有一个原始列表`["2H", "AH", "KH", "QH", "JH", "0H", "9H"]`，我有什么办法可以创建一个最终列表，其中包含所有特定长度 ( `3`to `5`) 的新分类列表？

基本上从上面的原始列表中，我想要一个返回的列表，如下所示：

```
[['9H', '0H', 'JH'], ['0H', 'JH', 'QH'], ['JH', 'QH', 'KH'], ['QH', 'KH', 'AH'], 
['KH', 'AH', '2H'], ['9H', '0H', 'JH', 'QH'], ['0H', 'JH', 'QH', 'KH'], 
['JH', 'QH', 'KH', 'AH'], ['QH', 'KH', 'AH', '2H'], ['9H', '0H', 'JH', 'QH', 'KH'], 
['0H', 'JH', 'QH', 'KH', 'AH'], ['JH', 'QH', 'KH', 'AH', '2H']] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:48:30.827

```
>>> from itertools import islice, chain
>>> L = ["2H", "AH", "KH", "QH", "JH", "0H", "9H"]
>>> list(chain.from_iterable(
        zip(*[islice(reversed(L),i,None) for i in range(j)])
        for j in range(3,6)))
[('9H', '0H', 'JH'), ('0H', 'JH', 'QH'), ('JH', 'QH', 'KH'), ('QH', 'KH', 'AH'), 
 ('KH', 'AH', '2H'), ('9H', '0H', 'JH', 'QH'), ('0H', 'JH', 'QH', 'KH'), 
 ('JH', 'QH', 'KH', 'AH'), ('QH', 'KH', 'AH', '2H'), ('9H', '0H', 'JH', 'QH', 'KH'),
 ('0H', 'JH', 'QH', 'KH', 'AH'), ('JH', 'QH', 'KH', 'AH', '2H')] 
```

**解释**

该解决方案建立在使用`zip`.

```
>>> zip(L,L)
[('2H', '2H'), ('AH', 'AH'), ('KH', 'KH'), ('QH', 'QH'), ('JH', 'JH'), ('0H', '0H'), ('9H', '9H')] 
```

这显示了一个如何`zip`工作的示例，通过从每个参数中获取一个项目。

```
>>> zip(L,L[1:])
[('2H', 'AH'), ('AH', 'KH'), ('KH', 'QH'), ('QH', 'JH'), ('JH', '0H'), ('0H', '9H')] 
```

通过从与第二个参数相同的列表的第一个项目开始，您可以获得每 2 个项目。

```
>>> zip(L,L[1:],L[2:])
[('2H', 'AH', 'KH'), ('AH', 'KH', 'QH'), ('KH', 'QH', 'JH'), ('QH', 'JH', '0H'), ('JH', '0H', '9H')] 
```

每 3 个项目相同。

```
>>> zip(*[L[i:] for i in range(3)])
[('2H', 'AH', 'KH'), ('AH', 'KH', 'QH'), ('KH', 'QH', 'JH'), ('QH', 'JH', '0H'), ('JH', '0H', '9H')] 
```

要自动执行此操作，您可以使用(splat)从列表`*`推导中获取参数。`zip`

在示例中，结果是反向的，因此`reversed`在列表中提供了一个反向迭代器。要对迭代器进行切片，`islice`必须使用 from itertools。`islice`采用 iterable 后跟索引来开始切片和索引来结束它。`None`可用于一直到可迭代的末尾。

```
>>> zip(*[islice(reversed(L),i,None) for i in range(3)])
[('9H', '0H', 'JH'), ('0H', 'JH', 'QH'), ('JH', 'QH', 'KH'), ('QH', 'KH', 'AH'), ('KH', 'AH', '2H')] 
```

这样就给出了每 3 个项目的所有结果。现在需要每 4 和 5 个项目，因此对 和 执行`range(3)`此`range(4)`操作`range(5)`。

```
(zip(*[islice(reversed(L),i,None) for i in range(j)]) for j in range(3,6)) 
```

这将为生成器提供每个 , 的列表`3`，`4`但`5`它们必须是一个列表。它们可以链接在一起，`chain.from_iterable`并将结果转换为`list`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T05:49:05.160

使用[迭代工具](http://docs.python.org/library/itertools.html#itertools.combinations)

```
import itertools

original = ["2H", "AH", "KH", "QH", "JH", "0H", "9H"]

result = itertools.chain()
for size in range(3, 6):
    curr_subsets = itertools.combinations(original, size)
    result = itertools.chain(result, curr_subsets)

result_as_list = list(result) 
```

# fortran - 如何使用fortran读取不规则行

> ID：10661901
> 
> 赞同：2
> 
> 时间：2012-05-19T02:40:29.610
> 
> 标签：fortran

我有一个格式如下的文本文件：

```
1  2 
3  4  5
6  7 
```

等等许多行。

我运行这个 fortran 程序：

```
i=1
tt=1
do while(.true.)
  read(unit=1,*,IOSTAT=status) lon(i,tt),lat(i,tt),h(i,tt)
  i=i+1
  if(status/=0)exit
enddo 
```

我想将同一行中的三个数字分配给`lon`, `lat`, `h`。但是，由于第一行没有第三个元素，程序会读取第二行的第一个元素（即 3 到 h(i,tt)），这不是我想要的。我*想*在某些行中将 h(i,tt) 设置为缺失值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:37:14.977

对于您的具体示例，您可以尝试以下操作：

```
program test

  integer :: status, i, tt
  character(len=100) :: line
  integer :: lon(3, 1), lat(3, 1), h(3, 1)

  lon(:, :) = 0
  lat(:, :) = 0
  h(:, :) = 0

  open(unit=1, file='data.txt')
  i=1
  tt=1
  do

     read(1, '(A100)', iostat=status) line
     if(status/=0) exit

     read(line, *, iostat=status) lon(i, tt), lat(i, tt), h(i, tt)

     if(status/=0) then
        read(line, *) lon(i, tt), lat(i, tt)
        h(i, tt) = 1  ! default value
     end if

     i = i + 1

  end do

  print *, 'lon=', lon
  print *, 'lat=', lat
  print *, 'h=', h

end program test 
```

返回

```
lon=           1           3           6
lat=           2           4           7
h=           1           5           1 
```

# debugging - Spring mvc，调试应用程序

> ID：10661904
> 
> 赞同：0
> 
> 时间：2012-05-19T02:40:54.603
> 
> 标签：debugging, spring-mvc

当我编写一个 Spring mvc 示例并用 ant 构建它时，我在 web broswer 上输入了该站点。但它只是说找不到该页面。我该如何调试应用程序？我只想知道日志以及什么异常。谢谢。

# python - 在 Python 列表中插入值

> ID：10661905
> 
> 赞同：0
> 
> 时间：2012-05-19T02:40:55.613
> 
> 标签：python, list

我正在研究一个解析文本文件的脚本，试图对其进行标准化，以便能够将其插入数据库。数据代表由 1 个或多个作者撰写的文章。我遇到的问题是，因为没有固定数量的作者，我在输出文本文件中得到了可变数量的列。例如。

```
author1, author2, author3, this is the title of the article
author1, author2, this is the title of the article
author1, author2, author3, author4, this is the title of the article 
```

这些结果给我的最大列数为 5。因此，对于前 2 篇文章，我需要添加空白列，以便输出具有偶数列。最好的方法是什么？我的输入文本是制表符分隔的，我可以通过在制表符上拆分来轻松地遍历它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:58:22.757

假设您已经拥有最大列数并且已经将它们分成列表（我将假设您将其放入自己的列表中），您应该能够只使用 list.insert(-1,item)添加空列：

```
def columnize(mylists, maxcolumns):
    for i in mylists:
        while len(i) < maxcolumns:
            i.insert(-1,None)

mylists = [["author1","author2","author3","this is the title of the article"],
           ["author1","author2","this is the title of the article"],
           ["author1","author2","author3","author4","this is the title of the article"]]

columnize(mylists,5)
print mylists

[['author1', 'author2', 'author3', None, 'this is the title of the article'], ['author1', 'author2', None, None, 'this is the title of the article'], ['author1', 'author2', 'author3', 'author4', 'this is the title of the article']] 
```

使用列表推导不会破坏原始列表的替代版本：

```
def columnize(mylists, maxcolumns):
    return [j[:-1]+([None]*(maxcolumns-len(j)))+j[-1:] for j in mylists]

print columnize(mylists,5)

[['author1', 'author2', 'author3', None, 'this is the title of the article'], ['author1', 'author2', None, None, 'this is the title of the article'], ['author1', 'author2', 'author3', 'author4', 'this is the title of the article']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:24:29.477

如果我误解了，请原谅我，但听起来你正在以一种困难的方式解决这个问题。将您的文本文件转换为将标题映射到一组作者的字典非常容易：

```
>>> lines = ["auth1, auth2, auth3, article1", "auth1, auth2, article2","auth1, article3"]
>>> d = dict((x[-1], x[:-1]) for x in [line.split(', ') for line in lines])
>>> d
{'article2': ['auth1', 'auth2'], 'article3': ['auth1'], 'article1': ['auth1', 'auth2', 'auth3']}
>>> total_articles = len(d)
>>> total_articles
3
>>> max_authors = max(len(val) for val in d.values())
>>> max_authors
3
>>> for k,v in d.iteritems():
...     print k
...     print v + [None]*(max_authors-len(v))
... 
article2
['auth1', 'auth2', None]
article3
['auth1', None, None]
article1
['auth1', 'auth2', 'auth3'] 
```

然后，如果你真的想要，你可以使用python 内置的[csv 模块输出这些数据。](http://docs.python.org/library/csv.html)或者，您可以直接输出您需要的 SQL。

您多次打开同一个文件并多次读取它，只是为了获得可以从内存中的数据中得出的计数。请不要出于这些目的多次阅读该文件。

# javascript - 如何为 jQuery 的 autoSuggest 插件附加的文本区域设置宽度？

> ID：10661907
> 
> 赞同：0
> 
> 时间：2012-05-19T02:42:09.760
> 
> 标签：javascript, jquery, jquery-autocomplete, autosuggest

由于这篇 Stack Overflow 帖子，我找到了一个很棒的插件，用于使用 Javascript 进行自动完成，称为 AutoSuggest：

[用于分隔标签的插件（如 stackoverflow 的输入标签接口）](https://stackoverflow.com/questions/5031162/plugin-to-separate-tags-like-the-stackoverflows-input-tags-interface)

这是插件作者页面的链接：

[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

autoSuggest 插件将用于输入查询的**输入**框（type="text"）的宽度设置为 1000px，比我想要的宽得多。它以某种方式覆盖了文档 HTML 中输入框样式属性中设置的宽度：

```
<div NAME="divAutoSuggest" ID="divAutoSuggest">
        <input type="text" NAME="editQuery2" ID="editQuery2" wrap="soft" style="margin-left:5px;width:600px;" title="Enter your search query here using plain English"></input>
</div> 
```

我也尝试在输入框定义中使用*cols*属性，但这也被忽略了。我发现另一个 Stack Overflow 帖子谈到在*打开*事件期间拦截宽度设置，但该示例是针对*自动完成*插件而不是 autoSuggest：

[单独更改 jquery-ui 自动完成小部件的宽度](https://stackoverflow.com/questions/4607164/changing-width-of-jqueryui-autocomplete-widgets-individually)

我还是使用以下代码尝试了它：

```
$(document).ready
(
function() 
{
    // Put jQuery related initialization code that must occur after the document is ready here.

    $("input[type=text]").autoSuggest
    (
        data.items, 
        {
            selectedItemProp: "name", 
            searchObjProps: "name",
            startText: "Enter Evernote tags here...",
            open: function(event, ui) 
            {
                $(this).autoSuggest("widget").css
                (
                    {
                        "width": 600
                    }
                );
            }
        } // data. items
    ); // $("input[type=text]").autoSuggest
} // function() 
); // $(document).ready 
```

但这也不起作用。谁能告诉我如何设置输入框的宽度？注意我不是在谈论带有自动完成条目的下拉框，我指的是您键入触发自动完成下拉框的文本的主要输入区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:48:10.403

要设置[AutoSuggest jQuery 插件](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)的宽度，您需要`ul.as-selections`在随附的 CSS 中搜索并定义您的宽度：

**CSS**

```
ul.as-selections {
  ...
  width: 400px; // define your width
  ...
} 
```

* * *

如果你没有改变原来的CSS，它是这样的：

**CSS 原始** ^(声明`ul.as-selections`)

```
ul.as-selections {
 list-style-type: none;
  border-top: 1px solid #888;
  border-bottom: 1px solid #b6b6b6;
  border-left: 1px solid #aaa;
  border-right: 1px solid #aaa;
  padding: 4px 0 4px 4px;
  margin: 0;
  overflow: auto;
  background-color: #fff;
  box-shadow:inset 0 1px 2px #888;
  -webkit-box-shadow:inset 0 1px 2px #888;
  -moz-box-shadow:inset 0 1px 2px #888;
} 
```

# java - 新的 Google App Engine Datastore API 似乎没有抛出那么多异常？

> ID：10661912
> 
> 赞同：1
> 
> 时间：2012-05-19T02:43:08.263
> 
> 标签：java, google-app-engine, exception-handling, google-cloud-datastore

我针对 Java Google App Engine 1.6.4.1 API 编写了一些代码，为了让我的代码能够编译，我必须处理很多异常，例如 ConcurrentModificationException。我升级到 1.6.5，现在我可以删除大部分异常处理程序，并且我的代码编译得很好。到底是怎么回事？

更新：不再抛出几类异常；因为这可能是由于不同的异常原因而发生的，这里是不再被抛出的异常

*   IllegalArgumentException

*   非法状态异常

*   数据存储故障异常

*   并发修改异常

以下是有人在 GAE 中获得 IllegalArgumentException 的示例：[Google App Engine - “java.lang.IllegalArgumentException: 数据存储事务或写入太大。”](https://stackoverflow.com/questions/2792413/google-app-engine-java-lang-illegalargumentexception-datastore-transaction-o) 这不能再发生了吗？

事务接口文档说您可以在执行 commit() 时获得最后三个中的任何一个：[https ://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/交易#commit()](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Transaction#commit%28%29)

> 抛出：
> 
> java.lang.IllegalStateException - 如果事务已经提交、回滚、提交或回滚正在进行中（通过异步调用），或者尝试提交或回滚已经失败。如果在调用此方法时有任何未完成的异步数据存储调用，则此方法将在这些调用完成后阻塞，然后再继续。
> 
> DatastoreFailureException - 如果发生数据存储错误。
> 
> java.util.ConcurrentModificationException - 如果其他一些事务同时修改了相同的实体组。

然而，我不再需要处理它们来编译我的代码。这似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:18:15.010

最新版本的 Google App Engine 要求`<threadsafe>true</threadsafe>`在 appengine-web.xml 中设置属性。在此版本之前，这不是必需的。

当您的应用程序中的一个对象的单个实例同时被多个线程修改时，会发生 ConcurrentModificationExceptions。这当然会导致数据和结果不一致，并且某些类会抛出此异常，以代替返回错误数据或对数据库进行不一致的更改。

将 threadsafe 属性设置为 true，现在可以启用并发请求。

**[使用并发请求](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)**

> 默认情况下，App Engine 将请求串行发送到给定的网络服务器。您可以通过将元素添加到 appengine-web.xml 来配置 App Engine 以并行发送多个请求：

```
<threadsafe>true</threadsafe> 
```

* * *

在 1.6.5 之前，threadsafe 指令是可选的，在 1.4.3 中引入：

```
Java applications can enable concurrent request support by setting <threadsafe>
to True in their appengine-web.xml. This flag indicates that request handlers
for your app are thread safe and multiple request handlers may safely run
at the same time in the same memory space for your application. 
```

虽然现在需要这样做，但似乎没有任何立即可用的信息可以解释为什么您的 ConcurrentModificationExceptions 突然消失了。如果您没有按照 1.4.3 发行说明中的​​建议对代码进行更改以使其成为线程安全的，那么这些线程安全问题很可能仍然存在。

以下是博文[宣布 App Engine 1.4.3 版本](http://googleappengine.blogspot.com/2011/03/announcing-app-engine-143-release_30.html)中有关 1.4.3 版本的更多信息：

> 并发请求：到目前为止，Java 应用程序依赖于启动额外的实例来动态扩展以获得更高的流量水平。现在支持并发请求，每个应用程序实例可以同时服务多个用户请求。首先，确保您的应用程序代码是线程安全的，然后通过将标志添加到您的 appengine-web.xml 来启用并发请求。

如果您报告的异常已经消失，您的代码可能仍然存在一些线程安全问题。您可能看不到这些，因为您增加了实例数量或在应用程序中执行了其他操作来缓解 ConcurrentModificationExceptions。

考虑到 1.6.5 发布不到一个月，我会非常犹豫是否要从我的代码中删除我的异常处理程序。毕竟，他们的工作是检测和处理发生的问题，如果你删除它们，那么你就失去了在它们删除之前可能已经存在的任何优雅降级。

此外，没有某些东西，例如异常，并不构成证明某些东西不会在未来某个未知时间点再次出现。

来自[ConcurrentModificationException 的javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)：

> 当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。
> 
> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些 Iterator 实现（包括 JRE 提供的所有集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:54:55.893

> 我针对 Java Google App Engine 1.6.4.1 API 编写了一些代码，为了让我的代码能够编译，我必须处理很多异常，例如 ConcurrentModificationException。

这里有些奇怪：ConcurrentModificationException 和您列出的其他异常是 RuntimeException 的子类。你永远不需要捕捉那些来满足 Java 编译器。

# php - PHP：file_get_contents 中的文件名不能为空

> ID：10661917
> 
> 赞同：3
> 
> 时间：2012-05-19T02:44:02.050
> 
> 标签：php, forms, email, server-side

在我开始之前，我想指出我是一个 PHP 新手，在最终决定我不知道我在用它做什么之前，我已经为此苦苦挣扎了一段时间。我认为我没有像[这个人](https://stackoverflow.com/questions/1882052/why-does-file-get-contents-return-the-error-filename-cannot-be-empty "这家伙")那样拼写错误或大写错误 ，但是，请原谅我乱七八糟的代码。

```
<?php
$field_name = $_POST['name'];
$field_email = $_POST['email'];
$field_comment = $_POST['comment'];
$field_question = $_POST['question'];
$field_support = $_POST['support'];
$field_steam = $_POST['steam'];
$field_file = $_POST['file'];
$field_message = $_POST['message'];
//Get the uploaded file information
$name_of_uploaded_file = basename($_FILES['uploaded_file']['name']);
//get the file extension of the file
$type_of_uploaded_file = substr($name_of_uploaded_file, strrpos($name_of_uploaded_file, '.') + 1);
$size_of_uploaded_file = $_FILES["uploaded_file"]["size"]/1024;//size in KBs
//Settings
$max_allowed_file_size = 10000; // size in KB
$allowed_extensions = array("doc", "docx", "txt", "pdf", "rtf", "otf");
//Validations
if($size_of_uploaded_file > $max_allowed_file_size )
{
$errors .= "\n Size of file should be less than     $max_allowed_file_size";
}
//------ Validate the file extension -----
$allowed_ext = false;
for($i=0; $i<sizeof($allowed_extensions); $i++)
{
if(strcasecmp($allowed_extensions[$i],$type_of_uploaded_file) == 0)
{
$allowed_ext = true;
}
}
if(!$allowed_ext)
{
$errors .= "\n The uploaded file is not supported file type. ".
" Only the following file types are supported: ".implode(',',$allowed_extensions);
}

//copy the temp. uploaded file to uploads folder
$path_of_uploaded_file = $upload_folder . $name_of_uploaded_file;
$tmp_path = $_FILES["uploaded_file"]["tmp_name"];
if(is_uploaded_file($tmp_path))
{
if(!copy($tmp_path,$path_of_uploaded_file))
{
$errors .= '\n error while copying the uploaded file';
}
}

$to = 'me@myemail.com';
$subject = 'Contact Form Message from '.$field_name;
$attachment = chunk_split(base64_encode(file_get_contents($path_of_uploaded_file)));

$boundary = md5(date('r', time())); 

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Message Type: '." ";
$body_message .= ''.$field_comment." ";
$body_message .= ''.$field_question." ";
$body_message .= ''.$field_support." ";
$body_message .= ''.$field_steam."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$boundary."\""; 

$mail_status = mail($mail_to, $subject, $attachment, $body_message, $headers);

if ($mail_status) { ?>
<script language="javascript" type="text/javascript">
alert('Thank you for the message. We will contact you shortly.');
window.location = 'contact.html';
</script>
<?php
}
else { ?>
<script language="javascript" type="text/javascript">
alert('Message failed. Please, send an email to me@myemail.com');
window.location = 'contact.html';
</script>
<?php
}
?> 
```

我不断收到这个错误：

警告：file_get_contents() [function.file-get-contents]：第 57 行 /%ROOT%/contact.php 中的文件名不能为空

我的问题是，我在尝试将上传的文件作为附件传递时做错了什么？而且，为什么 $path_of_uploaded_file 似乎是空的？另外，不是每个人都会上传文件，所以我怎么能允许提交呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T02:51:47.187

`$_FILES['uploaded_file']['name']`只是用户选择要上传
`$_FILES['uploaded_file']['tmp_name']`的文件的名称是上传到服务器的文件。
[PHP Post 文件上传](http://www.php.net/manual/en/features.file-upload.post-method.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:26:42.750

这是做你想做的吗？（我做了一些小的修改，但没有提交表格我无法测试。）

```
<?php
$field_name = $_POST['name'];
$field_email = $_POST['email'];
$field_comment = $_POST['comment'];
$field_question = $_POST['question'];
$field_support = $_POST['support'];
$field_steam = $_POST['steam'];
$field_file = $_POST['file'];
$field_message = $_POST['message'];

$errors = '';

//Get the uploaded file information
$upload_folder = '/path/to/file/';
$name_of_uploaded_file = basename($_FILES['file']['name']);

//get the file extension of the file
$type_of_uploaded_file = substr($name_of_uploaded_file, strrpos($name_of_uploaded_file, '.') + 1);
$size_of_uploaded_file = $_FILES["file"]["size"]/1024;//size in KBs

//Settings
$max_allowed_file_size = 10000; // size in KB
$allowed_extensions = array("doc", "docx", "txt", "pdf", "rtf", "otf");

//Validations
if($size_of_uploaded_file > $max_allowed_file_size )
{
    $errors .= "\n Size of file should be less than $max_allowed_file_size";
}

//------ Validate the file extension -----
// could use in_array here, but its OK
$allowed_ext = false;
for($i=0; $i<sizeof($allowed_extensions); $i++)
{
    if(strcasecmp($allowed_extensions[$i], $type_of_uploaded_file) == 0)
    {
        $allowed_ext = true;
    }
}

if(!$allowed_ext)
{
    $errors .= "\n The uploaded file is not supported file type. ".
        " Only the following file types are supported: ".implode(',', $allowed_extensions);
}

//copy the temp. uploaded file to uploads folder
$path_of_uploaded_file = $upload_folder . $name_of_uploaded_file;
$tmp_name = $_FILES["file"]["tmp_name"];

if(is_uploaded_file($tmp_name))
{
    if(!move_uploaded_file($tmp_name, $path_of_uploaded_file))
    {
        $errors .= '\n error while copying the uploaded file';
    }
}

$mail_to = 'me@myemail.com';
$subject = 'Contact Form Message from '.$field_name;
$message = readfile($path_of_uploaded_file);

$boundary = md5(date('r', time()));

$additional_headers = 'From: '.$field_name."\n";
$additional_headers .= 'E-mail: '.$field_email."\n";
$additional_headers .= 'Message Type: '." ";
$additional_headers .= ''.$field_comment." ";
$additional_headers .= ''.$field_question." ";
$additional_headers .= ''.$field_support." ";
$additional_headers .= ''.$field_steam."\n";
$additional_headers .= 'Message: '.$field_message;

$additional_parameters = 'From: '.$field_email."\r\n";
$additional_parameters .= 'Reply-To: '.$field_email."\r\n";
$additional_parameters .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$boundary."\"";

$mail_status = mail($mail_to, $subject, $message, $additional_headers, $additional_parameters);

if ($mail_status) { ?>

    <script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');
        window.location = 'contact.html';
    </script>

<?php } else { ?>

    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send an email to me@myemail.com');
        window.location = 'contact.html';
    </script>

<?php } ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:47:11.313

决定以不同的方式和更清洁的方式去做。

```
<?php
//start session
session_start();

// prints form
function print_form(){
?>

<form method="post" action="<?php echo $_SERVER[’PHP_SELF’];?>" id="uploadform" enctype="multipart/form-data">
<input name="name" id="name" type="text" style="border: none;background-color: transparent;background-image: url(images/text_field.png);width: 418px;height: 48px;padding-left: 15px;background-repeat: no-repeat;background-size: 450px 48px;padding-right: 13px;" class="field" value="Name" tabindex="1"/></p>
<p>
<input name="email" id="email" type="text" style="border: none;background-color: transparent;background-image: url(images/text_field.png);width: 418px;height: 48px;padding-left: 15px;background-repeat: no-repeat;background-size: 450px 48px;padding-right: 13px;float:right;margin-top: -65px;" class="field" value="Email" tabindex="2"/>
</p>
<p>
<table width="950" style="padding-top: 10px;text-align: center;"><tr><td width="115"><input name="comment" type="checkbox" value="Comment" /> Comment </td><td width="119"><input name="question" type="checkbox" value="Question" /> Question </td><td width="139"><input name="support" type="checkbox" value="Support" /> Support </td><td width="171"><input name="steam" type="checkbox" value="Street Team" /> Street Team</td><td width="382"><input type="hidden" name="MAX_FILE_SIZE" value="2048"><span style=";margin-left: -180px;">Resume : </span><br />
<span style="font-size:9px;margin-left: -180px;">1 file only, max file size 2 MB.</span><br /><span style="font-size:9px;margin-left: -180px;">Allowed file formats are </span><br /><span style="font-size:9px;margin-left: -180px;">.doc, .docx, .txt, .pdf, .rtf, .otf</span><br /></label>
<input name="attachment" id="attachment" style="position: absolute;margin-left: 100px;margin-top: -40px;" type="file" tabindex="7"></td></tr></table><br />
<textarea name="comments" id="comments" style="background-color: #fff;width: 922px;height: 172px;padding-left: 10px;background-repeat: no-repeat;padding-top:8px;resize:none;border-color: #CCC;padding-right: 15px;border-width: 2px;margin-left: 7px;border-radius: 1em;box-shadow: inset #EEE 0.25em 0.25em 0.3em;" rows="" cols="" class="field" tabindex="6">Message
</textarea>
</p>
<p>
<p><input type="submit" name="submit" id="submit" style="width: 112px;height: 32px;background-image: url(images/submit.png);color: transparent;border: none;background-repeat: no-repeat;background-position: -5px;float: right;" value="Send"  tabindex="8"/></p>
<p><input type="hidden" name="submitted"  value="true" /></p>
</form>
<?php
}

// enquiry form validation

function process_form() {
// Read POST request params into global vars
$to = "email@email.com";

$name = trim($_POST['name']);
$email = trim($_POST['email']);
$comment = trim($_POST['comment']);
$question = trim($_POST['question']);
$support = trim($_POST['support']);
$steam = trim($_POST['steam']);
$comments = trim($_POST['comments']);
$from = $email;
$subject = 'Contact Form Message From '.$name;

// Allowed file types. add file extensions WITHOUT the dot.
$allowtypes=array("doc", "docx", "txt", "pdf", "rtf", "otf");

// Require a file to be attached
$requirefile="true";

// Maximum file size for attachments in KB NOT Bytes for simplicity. MAKE SURE your php.ini can handle it
// post_max_size, upload_max_filesize, file_uploads, max_execution_time!
$max_file_size="2048";

// Thank you message
$thanksmessage="Your message has been sent, we will respond as soon as possible.";

$errors = array(); //Initialize error array

//checks for a name
if (empty($_POST['name']) ) {
$errors[]='Please enter your name.';
}

//checks for an email
if (empty($_POST['email']) ) {
$errors[]='Please enter your email.';
} else {

if (!eregi ('^[[:alnum:]][a-z0-9_\.\-]*@[a-z0-9\.\-]+\.[a-z]{2,4}$', stripslashes(trim($_POST['email'])))) {
$errors[]='Please enter a valid email address.';
} // if eregi
} // if empty email

//checks for a message
if (empty($_POST['comments']) ) {
$errors[]='Did you want to tell us something?';
}

// checks for required file
//if($requirefile=="true") {
//  if($_FILES['attachment']['error']==4) {
//      $errors[]='You forgot to attach a file';
//  }
//}

//checks attachment file
// checks that we have a file
if((!empty($_FILES["attachment"])) && ($_FILES['attachment']['error'] == 0)) {
// basename -- Returns filename component of path
$filename = basename($_FILES['attachment']['name']);
$ext = substr($filename, strrpos($filename, '.') + 1);
$filesize=$_FILES['attachment']['size'];
$max_bytes=$max_file_size*1024;

//Check if the file type uploaded is a valid file type. 
if (!in_array($ext, $allowtypes)) {
$errors[]="Invalid extension for your file: <strong>".$filename."</strong>";

// check the size of each file
} elseif($filesize > $max_bytes) {
$errors[]= "Your file: <strong>".$filename."</strong> is too big. Max file size is ".$max_file_size."kb.";
}

} // if !empty FILES

if (empty($errors)) { //If everything is OK

// send an email
// Obtain file upload vars
$fileatt      = $_FILES['attachment']['tmp_name'];
$fileatt_type = $_FILES['attachment']['type'];
$fileatt_name = $_FILES['attachment']['name'];

// Headers
$headers = "From: $email";

// create a boundary string. It must be unique
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// Add the headers for a file attachment
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";

// Add a multipart boundary above the plain message
$message ="This is a multi-part message in MIME format.\n\n";
$message.="--{$mime_boundary}\n";
$message.="Content-Type: text/plain; charset=\"iso-8859-1\"\n";
$message.="Content-Transfer-Encoding: 7bit\n\n";
$message.="From: ".$name."\n";
$message.="Email: ".$email."\n";
$message .= 'Message Type: '." ";
$message .= ''.$comment." ";
$message .= ''.$question." ";
$message .= ''.$support." ";
$message .= ''.$steam."\n";
$message.="Message: ".$comments."\n\n";

if (is_uploaded_file($fileatt)) {
// Read the file to be attached ('rb' = read binary)
$file = fopen($fileatt,'rb');
$data = fread($file,filesize($fileatt));
fclose($file);

// Base64 encode the file data
$data = chunk_split(base64_encode($data));

// Add file attachment to the message
$message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatt_type};\n" .
" name=\"{$fileatt_name}\"\n" .
//"Content-Disposition: attachment;\n" .
//" filename=\"{$fileatt_name}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .
$data . "\n\n" .
"--{$mime_boundary}--\n";
}

// Send the completed message

$envs = array("HTTP_USER_AGENT", "REMOTE_ADDR", "REMOTE_HOST");
foreach ($envs as $env)
$message .= "$env: $_SERVER[$env]\n";

if(!mail($to,$subject,$message,$headers)) {
exit("Mail could not be sent. Sorry! An error has occurred, please email info@cannysoftware.com.\n");
} else {
echo '<div id="formfeedback"><h3>Thank You!</h3><p>'. $thanksmessage .'</p></div>';
unset($_SESSION['myForm']);
print_form();

} // end of if !mail

} else { //report the errors
echo '<div id="formfeedback"><h3>Error!</h3><p>The following error(s) have occurred:<br />';
foreach ($errors as $msg) { //prints each error
echo " - $msg<br />\n";
} // end of foreach
echo '</p><p>Please correct the errors and try again.</p></div>';
print_form();
} //end of if(empty($errors))

} // end of process_form()
?> 
```

# android - Android 调试 - 删除 TextView、Button 和 Layout 时崩溃

> ID：10661919
> 
> 赞同：0
> 
> 时间：2012-05-19T02:44:27.520
> 
> 标签：android

当我单击按钮删除 TextView、Button 和 LinearLayout 时，我的应用程序崩溃。这是 logcat 报告。当我想在第 118 行删除视图时，它就崩溃了：

```
 tasklayout.removeView(taskbutton);

05-19 14:35:58.222: E/AndroidRuntime(632): java.lang.NullPointerException
05-19 14:35:58.222: E/AndroidRuntime(632):  at com.com.com.addtask.deltask(addtask.java:118)
05-19 14:35:58.222: E/AndroidRuntime(632):  at com.com.com.addtask$2.onClick(addtask.java:65)
05-19 14:35:58.222: E/AndroidRuntime(632):  at android.view.View.performClick(View.java:3511)
05-19 14:35:58.222: E/AndroidRuntime(632):  at android.view.View$PerformClick.run(View.java:14105)
05-19 14:35:58.222: E/AndroidRuntime(632):  at android.os.Handler.handleCallback(Handler.java:605) 
```

这是 onClickListner 和 deltask void

```
 Button delt = (Button) findViewById(R.id.btndelete1);
    delt.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            deltask(v);
        }
    });

public void deltask(View v) {

    SharedPreferences datatask;
    datatask = getSharedPreferences(filename, 0);
    int tnum = datatask.getInt("tasknumber", 1);
    int layoutnum = 1000 + tnum;
    int textviewnum = 1100 + tnum;
    int buttonviewnum = 1200 + tnum;

    LinearLayout layout = (LinearLayout) findViewById(R.id.taskll);
    LinearLayout tasklayout = (LinearLayout) findViewById(layoutnum);
    TextView tasktv = (TextView) findViewById(textviewnum);
    Button taskbutton = (Button) findViewById(buttonviewnum);

    tasklayout.removeView(taskbutton);
    tasklayout.removeView(tasktv);
    layout.removeView(tasklayout);

} 
```

有人帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T03:31:24.997

尝试在函数之外初始化 findviewbyiD 的所有布局和文本视图。全局执行我认为在执行相同操作后它可能会起作用。在 oncreate 中初始化它可能会解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:47:32.140

您可能会弄乱视图 ID 并试图找到实际上不存在的东西。与其以编程方式分配 id，不如设置标签并使用`findViewByTag`.

# python - Python 的 random.shuffle 限制

> ID：10661920
> 
> 赞同：5
> 
> 时间：2012-05-19T02:44:49.667
> 
> 标签：python, algorithm, random

来自 random.shuffle 的[Python 文档](http://docs.python.org/library/random.html#random.shuffle)，它采用一个列表并随机化其元素的顺序：

> 请注意，即使是相当小的 len(x)，x 的排列总数也大于大多数随机数生成器的周期；这意味着永远不会生成长序列的大多数排列。

这是否适用于任何语言，因为限制似乎取决于随机数生成器？是否可以编写一个函数来生成任意长列表的任何可能排列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T04:04:11.900

请参阅[http://mail.python.org/pipermail/python-ideas/2009-March/003670.html](http://mail.python.org/pipermail/python-ideas/2009-March/003670.html)。它开始成为问题的确切长度取决于 PRNG，但基本问题将始终适用。

@TryPyPy 链接到的上一个问题也关注 Python，但接受的答案很好地解释了为什么它总是会发生。套用一下，你可以想象一个幼稚的洗牌算法以这种方式工作：

1.  生成`p`输入的所有可能排列的列表
2.  `x`从您的 PRNG 中获取一个随机数
3.  改组后的列表是`p[x]`

如果`p`长于`x`PRNG 可以产生的所有可能的 s 的列表，则某些排列是不可达的。

由于花哨的 shuffle 算法的核心是一种这样做的方法，而无需在丢弃除其中一个之外的所有排列之前生成所有可能的排列，因此解决此问题的唯一方法是拥有真正随机性的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T03:59:30.963

对的，这是可能的。您可以编写一个排列生成器，`random.SystemRandom`用于您的所有决策。

这样做的缺点是您的程序可能不得不暂停任意长的时间，而您的操作系统会收集更多的熵供您使用。

# c - C中的数组初始化

> ID：10661927
> 
> 赞同：0
> 
> 时间：2012-05-19T02:46:42.553
> 
> 标签：c

有人可以解释一下为什么不能`'\0'`在给定的数组中放置一个字符：

```
char a[]={'r','b'};

a[2]='\0'; 
```

上面的代码不应该在第三个插槽中放置一个空字符，从而将字符数组 a 转换为字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T02:48:55.657

您正在写超出数组边界：当您用两个字符初始化数组时，最后一个有效索引是`1`，而不是`2`。

您应该使用三个项目初始化数组，如下所示：

```
char a[] = {'r', 'b', '\0'}; 
```

你也可以使用这个版本：

```
char a[] = "rb"; 
```

这将为您提供一个*可写*数组，其中包含一个以零结尾的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:51:01.303

C 中的字符串以字符数组的形式实现，并以 null '\0' 结尾。就说吧 `char* a = "rb";`。（记得包含 string.h）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:08:10.343

虽然 TeoUltimus 的答案是正确的，但请注意，在他的情况下，指针 'a' 将指向字符串文字。这意味着您永远不能修改字符串。更具体地说，虽然代码`a[1] = 'c';`会编译，但运行它会导致错误。`char a[] = "ab"`如果您打算修改字符串中的各个元素，请写下。详情见：[https ://www.securecoding.cert.org/confluence/display/seccode/STR30-C.+Do+not+attempt+to+modify+string+literals](https://www.securecoding.cert.org/confluence/display/seccode/STR30-C.+Do+not+attempt+to+modify+string+literals)

# ruby-on-rails - 更新 Rails 模型的属性

> ID：10661932
> 
> 赞同：2
> 
> 时间：2012-05-19T02:47:34.663
> 
> 标签：ruby-on-rails

在我的应用程序中，我试图让管理员用户可以编辑“帖子”的一个属性

后模型为：

```
class PostsController < ApplicationController

before_filter :admin_user,   only: [:edit, :update]

def edit
  @post = Post.find(params[:id])
end

def update
  @post = Post.find(params[:id])
  if @post.update_attributes(params[:post][:some_attr])
     flash[:success] = "Post updated"
     redirect_to posts_path
  else
    redirect_to root_path
  end
end 
```

编辑视图是：

```
 <% provide(:title, "Edit post") %> 
  <h1>Update the post</h1>

  <div class="row">
    <div class="span6 offset3">
    <%= form_for(@post) do |f| %>
        <%= f.label :some_attr %>
        <%= f.text_field :some_attr %>

    <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
   <% end %> 
```

当我尝试在编辑页面的 some_attr test_field 中输入“123”时，它会呈现错误：

```
NoMethodError in PostsController#update

undefined method `stringify_keys' for "123":String

Application Trace | Framework Trace | Full Trace
app/controllers/posts_controller.rb:22:in `update'
Request

Parameters:

{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"EdTg+cFBnZY447oSDqSTPfb/PJ6VisJOrQ8kvichDrE=",
 "post"=>{"some_attr"=>"123"},
 "commit"=>"Save changes",
 "id"=>"17"} 
```

可能是什么问题呢？我错过了哪一块拼图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:53:02.783

我相信这条线：

```
@post.update_attributes(params[:post][:some_attr]) 
```

应该是这样的：

```
@post.update_attributes(params[:post]) 
```

要对 执行更新`@post`，您需要为其传递整个属性散列 - 而不仅仅是您要更改的属性。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:53:12.853

问题是这一行：

```
 if @post.update_attributes(params[:post][:some_attr]) 
```

`params[:post][:some_attr]`只是一个值。未指定字段。如果将行更改为

```
 if @post.update_attributes(params[:post]) 
```

该属性应按预期更新。

# r - 制作等长向量的列表

> ID：10661937
> 
> 赞同：5
> 
> 时间：2012-05-19T02:48:44.533
> 
> 标签：r

在 SO ( [LINK](https://stackoverflow.com/questions/10661295/apply-a-function-over-groups-of-columns) ) 上的一个问题中，一位发帖者提出了一个问题，我给出了一个有效的答案，但有一部分让我感到困扰，`list`从向量创建一个作为索引列表传递。所以说我有这个向量：

```
n <- 1:10
#> n
# [1]  1  2  3  4  5  6  7  8  9 10 
```

假设我想将它分解成一个向量列表，每个向量的长度为 3。完成此任务的最佳（最短代码量或最快）方法是什么？我们想扔掉第 10 项，因为`10 %% 3`10/3 ( `length(n) - 10 %% 3`) 中还有 1 ( ) 的余数。

这是期望的结果

```
list(1:3, 4:6, 7:9) 
```

这将为我们提供那些不能组成三个组的索引：

```
(length(n) + 1 - 10 %% 3):length(n) 
```

**编辑**

这是 Wojciech Sobala 在与之链接的[另一个线程](https://stackoverflow.com/questions/10661295/apply-a-function-over-groups-of-columns)上发布的一个有趣的方法（我让他们在这里回答，如果他们回答，我将删除此编辑）

```
n <- 100
l <- 3
n2 <- n - (n %% l)
split(1:n2, rep(1:n2, each=l, length=n2)) 
```

作为一个函数：

```
indices <- function(n, l){
    if(n > l) stop("n needs to be smaller than or equal to l")
    n2 <- n - (n %% l)
    cat("numbers", (n + 1 - n %% l):n, "did not make an index of length", l)
    split(1:n2, rep(1:n2, each=l, length=n2))
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T03:02:55.743

不确定这是否有效？

```
x = function(x, n){ 
    if(n > x) stop("n needs to be smaller than or equal to x")
    output = matrix(1:(x-x%%n), ncol=(x-x%%n)/n, byrow=FALSE)
    output
} 
```

编辑：将输出更改为列表

```
x = function(x, n){ 
    if(n > x) stop("n needs to be smaller than or equal to x")
    output = matrix(1:(x-x%%n), ncol=(x-x%%n)/n, byrow=TRUE)
    split(output, 1:nrow(output))
}

Example:
x(10, 3)
$`1`
[1] 1 2 3

$`2`
[1] 4 5 6

$`3`
[1] 7 8 9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T03:12:59.823

```
xx <- 1:10
xxr <- rle(0:(length(1:10)-1) %/% 3)  # creates an rle object
fac3 <- rep( xxr$values[xxr$lengths == 3], each=3)  #selects the one of length 3
                                     # and recreates the shortened grouping vector
tapply(xx[ 1:length(fac3)],          # a shortened original vector
                       fac3, list)   # split into little lists
$`0`                                # Hope you don't mind having names on your list
[1] 1 2 3

$`1`
[1] 4 5 6

$`2`
[1] 7 8 9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T03:46:57.697

这不是最短的，但这里有一个小递归版本：

```
wrap <- function(n,x,lx,y) {
    if (lx < n) return (y)
    z <- x[-(1:n)]
    wrap(n, z, length(z), c(y, list(x[1:n])))
}

wrapit <- function(x,n) {
    wrap(n,x,length(x),list())
}

> wrapit(1:10,3)
[[1]]
[1] 1 2 3

[[2]]
[1] 4 5 6

[[3]]
[1] 7 8 9 
```

# javascript - Jquery Mobile、PhoneGap 和 JavaScript

> ID：10661941
> 
> 赞同：2
> 
> 时间：2012-05-19T02:50:12.160
> 
> 标签：javascript, jquery-mobile, cordova

这个要死我了。

我有一个相当复杂的 JavaScript 例程，通过单击 JQM 表单上的按钮触发，该表单在桌面浏览器中运行良好，但在 PhoneGap（所有平台）中什么都不做。

我用来触发脚本的 JQM 代码是：

```
<input type=button value="Submit" onClick="function(blah,int);"> 
```

在其他任何地方都可以正常工作...

我尝试了各种方法来执行此操作，包括输入 type="submit" 并将函数调用移动到表单标签以进行发布，确保所有指向页面的链接都将 data-rel="external" 设置为移出主页 DOM... 没有任何区别。是什么让 PhoneGap 中的按钮消失但在所有桌面浏览器中都可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:48:31.143

原来是我的phonegap设置中的一个小权限问题。去搞清楚。

```
<input type="button" value="Submit" onClick="function();"> 
```

只要您在使用应用程序外部的资源时允许 phonegap 访问外部页面，就可以很好地从 JQM 表单中触发 JS。

# javascript - Chrome 中使用的变量 $x 是什么？

> ID：10661949
> 
> 赞同：11
> 
> 时间：2012-05-19T02:52:35.343
> 
> 标签：javascript, google-chrome, v8

几天前，当我们将字符串分配给变量 $x .

```
$x = "hello" 
```

但是当我们回显 $x 的值时，我们会在控制台中得到以下代码：

```
bound: function (xpath, context)
{
    var doc = (context && context.ownerDocument) || inspectedWindow.document;
    var result = doc.evaluate(xpath, context || doc, null, XPathResult.ANY_TYPE, null);
    switch (result.resultType) {
    case XPathResult.NUMBER_TYPE:
        return result.numberValue;
    case XPathResult.STRING_TYPE:
        return result.stringValue;
    case XPathResult.BOOLEAN_TYPE:
        return result.booleanValue;
    default:
        var nodes = [];
        var node;
        while (node = result.iterateNext())
            nodes.push(node);
        return nodes;
    }
} 
```

我们在 Safari 和 Firefox 的稳定版本中得到了类似的输出。据我们所知，$x 变量没有附加到全局窗口对象。

$x 是什么，它的用途是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-19T03:10:08.383

这是一个 XPath 实用程序函数。来自[精美的 Firebug 手册](http://getfirebug.com/wiki/index.php/Command_Line_API#.24x.28xpath.29)：

> **`$x(xpath)`**
> 返回与给定 XPath 表达式匹配的元素数组。

并来自[精美的 Chrome 手册](https://developers.google.com/chrome-developer-tools/docs/commandline-api#xpath)：

> `$x(xpath)`
> 返回与给定 XPath 表达式匹配的 DOM 元素数组。

该`$x`函数不是 JavaScript 本身的一部分，它只是控制台中可用的实用程序。如果您尝试`$x`在控制台之外访问（[http://jsfiddle.net/ambiguous/fsewU/](http://jsfiddle.net/ambiguous/fsewU/)），您将得到一个 ReferenceError，当然，除非您在`$x`某处定义了自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:16:34.167

看起来与 XPath（XML 路径语言）有关..各种帮手...我找到了一个可以帮助你的链接.. [http://userscripts.org/topics/26131](http://userscripts.org/topics/26131)希望有帮助..

# c++ - c++ 中对 class::function 的另一个未定义引用

> ID：10661950
> 
> 赞同：1
> 
> 时间：2012-05-19T02:52:36.200
> 
> 标签：c++, class, function, reference, undefined

我不断遇到这个常见错误，然后编译我的程序。我已经尝试了互联网上的许多建议，但到目前为止都没有奏效。我尝试通过 CMD 和 Code::Blocks 使用 g++ 编译我的代码，但都出现了相同的错误：

```
C:\Users\Damian\Desktop\test program.cpp|17|undefined reference to `level1::segout(int, double, double)' 
```

我尝试使用所有 cpp 文件在 CMD 中编译：

```
g++ "main program.cpp" "level1.cpp" -o "test.exe" 
```

下面是我的代码......也许我遗漏了一些明显的东西。自从我进行 C/C++ 编码以来已经有一段时间了。

主程序.cpp

```
#define _USE_MATH_DEFINES

#include <iostream>
#include <C:\Users\Damian\Desktop\level1.h>
#include <string>
#include <math.h>
using namespace std;

int main()
{
    double pitch = 0;
    double yaw = 0;
    cout << "Low-Level Test Program\nPlease enter the pitch value (in degrees):\n";
    cin >> pitch;
    cout << "Please enter the yaw value (in degrees):\n";
    cin >> yaw;
    level1::segout(0, pitch * (M_PI/180), yaw * (M_PI/180));
    return 0;
} 
```

级别1.h

```
//all dimensions in MM, all angles in RADIANS

#pragma once

class level1 {
        static const double LENGTH_NEUTRAL, ANGLE_MAX, RADIUS, WIRE_RADIUS, ENCODER_RES;
        double L1, L2, L3;
    public:
        static void segout(int, double, double);
}; 
```

一级.cpp

```
#define _USE_MATH_DEFINES

#include <iostream>
#include <math.h>
#include <stdlib.h>
//#include <level0.h> --not implemented yet
using namespace std;

const double LENGTH_NEUTRAL = 30;
const double ANGLE_MAX = M_PI/4;
const double RADIUS = 16;
const double WIRE_RADIUS = 0.1;
const double ENCODER_RES = (2*M_PI)/64;

void segout(int Seg, double P, double Y)
{
    //work area check
    if (sqrt(pow(P, 2) + pow(Y, 2)) <= LENGTH_NEUTRAL + ANGLE_MAX)
    {
        cout << "ERROR (0001): Specified coordinates are outside work area.\n";
        return;
    }

    //conversion

    //stage 1
    double L1 = LENGTH_NEUTRAL * (1 - ((sqrt(pow(P, 2) + pow(Y, 2)))/LENGTH_NEUTRAL) * RADIUS * sin((M_PI/2)+atan2(P, Y)));

    double L2 = LENGTH_NEUTRAL * (1 + ((sqrt(pow(P, 2) + pow(Y, 2)))/LENGTH_NEUTRAL) * RADIUS * sin((5*M_PI/6)+atan2(P, Y)));

    double L3 = LENGTH_NEUTRAL * (1 + ((sqrt(pow(P, 2) + pow(Y, 2)))/LENGTH_NEUTRAL) * RADIUS * cos((2*M_PI/3)+atan2(P, Y)));

    //stage 2
    L1 = labs((sqrt((L1 * sqrt(4 * pow(LENGTH_NEUTRAL, 2)+ pow(L1, 2)))/(pow(WIRE_RADIUS, 2)) - (pow(L1, 2))/(pow(WIRE_RADIUS, 2)))/sqrt(2)) / ENCODER_RES);

    L2 = labs((sqrt((L2 * sqrt(4 * pow(LENGTH_NEUTRAL, 2)+ pow(L2, 2)))/(pow(WIRE_RADIUS, 2)) - (pow(L2, 2))/(pow(WIRE_RADIUS, 2)))/sqrt(2)) / ENCODER_RES);

    L3 = labs((sqrt((L3 * sqrt(4 * pow(LENGTH_NEUTRAL, 2)+ pow(L3, 2)))/(pow(WIRE_RADIUS, 2)) - (pow(L3, 2))/(pow(WIRE_RADIUS, 2)))/sqrt(2)) / ENCODER_RES);

    //output
    //temp output for debugging
    cout << "-------\nResults:\n";
    cout << "L1: " << L1 << "\n";
    cout << "L2: " << L2 << "\n";
    cout << "L3: " << L3 << "\n";
} 
```

这是迄今为止我尝试过的事情的详尽清单：

*   将 level1 从静态类更改为普通类（因此我必须创建一个对象才能使其工作）
*   在搜索路径中包括桌面
*   先将level1编译成一个对象，再用主程序编译。
*   在 Code::Blocks 中为头文件打开链接器和/或编译
*   将 level1.h #include 标头放入 level1.cpp

可能还有一些，但是已经晚了，我的记忆正在消失……非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T02:55:34.070

你的问题是

```
void segout(int Seg, double P, double Y) 
```

不一样

```
void level1::segout(int Seg, double P, double Y) 
```

因此，您正在声明一个函数并定义另一个函数。这就是链接器找不到函数定义的原因。使用成员函数时，无论它们是静态的还是非静态的，您都需要在它们的类中限定它们的范围。

此外，括号 <includes> 用于系统库。其他任何内容都应使用带引号的“包含”。

# php - 用 PHP 处理验证错误的最简洁方法是什么？

> ID：10661953
> 
> 赞同：8
> 
> 时间：2012-05-19T02:53:24.407
> 
> 标签：php, validation, error-handling

只要我一直在开发 Web 应用程序，我就一直在寻找更好的方法来处理验证。经常需要捕获多个验证错误，所以我想知道是否有比以下更好的方法来做到这一点。

现在我`assert`在自己开发的框架中有一个方法。该方法的一个示例如下：

`assert(($foo == 1), 'Foo is not equal to 1');`

如果第一个参数中的条件为假，则将第二个参数中的错误消息添加到一个`$errors`数组中（该数组被包装在一个类中（由`$eh`下面引用），该类提供了诸如 等便利功能`hasErrors()`）。

这种方法有效，但在实践中很混乱。考虑这段代码：

```
public function submit($foo, $bar, $baz)
{
    assert(($foo == 1), 'Foo is not equal to 1');
    assert(($bar == 2), 'Bar is not equal to 2');

    if (!$eh->hasErrors())
    {
        assert(($baz == 3), 'Baz is not equal to 3');

        if (!$eh->hasErrors())
        {
            finallyDoSomething();
            return;
        }
    }

    outputErrors();
} 
```

这是相当普遍的事情。我想在继续之前检查两个条件，然后如果通过，在最终做我想做的事情之前检查第三个条件。如您所见，此代码中的大多数行都与验证有关。在实际应用中，会有更多的验证，可能还有更多的嵌套 if 语句。

有没有人有比这更好的处理验证的结构？如果有框架可以更优雅地处理这个问题，它们是什么以及它们是如何实现的？多个嵌套的 if 语句似乎是解决问题的“蛮力”解决方案。

请注意，我知道将一些常见的验证函数包装在一个类中可能是个好主意，这样我就可以通过调用这些函数来检查长度、字符串格式等。我要问的是一种更简洁的代码结构方法，而不是我实际检查错误的方式。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T17:06:33.650

请检查[尊重\验证](http://documentup.com/Respect/Validation)。这是一个为此目的而建的库。它可以非常轻松地处理多个规则并使用异常来处理错误。这是一个快速示例：

```
<?php

use Respect\Validation\Validator as v;

$usernameValidator = v::alnum()->noWhitespace()->length(1,15);

$valid = $usernameValidator->validate("alganet"); //$valid now == true
$valid = $usernameValidator->validate("ácido acético"); //$valid now == false 
```

现在使用异常：

```
try {
    $usernameValidator->assert("foo # bar");
} catch (Exception $e) {
    $errors = $e->findMessages('alnum', 'noWhitespace', 'length');
} 
```

在上面的示例中，`$errors`变量将是这样的：

```
array(
    "alnum" => '"foo # bar" must contain only letters and digits',
    "noWhitespace" => '"foo # bar" must not contain whitespace',
    "length" => null
) 
```

我使用“foo #bar”打破了两个先前声明的规则：它有空格并且它有一个非 alnum 字符。对于每条未通过的规则，都会返回一条消息。由于“长度”是可以的，因此错误消息为空。

该[文档](http://documentup.com/Respect/Validation)包括更多示例，包括嵌套、分层规则和更好的异常处理。还为所有 30 多个内置验证器提供了广泛的示例列表。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T02:57:36.540

抛出异常怎么办？您可以使用 try /catch 块明确地捕获异常，和/或使用捕获它们`set_exception_handler()`

PHP 中定义了许多有用的异常类型，如果您在异常处理中需要粒度，可以使用它们。另外，您可以定义自定义异常。

[http://php.net/manual/en/function.set-exception-handler.php](http://php.net/manual/en/function.set-exception-handler.php) http://www.php.net/manual/en/spl.exceptions.php

**编辑**

要回答您关于其他一些框架如何解决此问题的问题 - 明智地使用异常似乎很常见。使用它们的有用之处是，假设您有一个特定的方法，该方法执行许多可能是错误的不同验证 - 您可以在每种情况下抛出一个适当的异常，但您不必处理不同的可能异常那个方法。相反，根据您构建代码的方式，您可以允许异常冒泡到代码中更集中的位置，您可以在其中捕获并适当地处理它。

**编辑 2**

详细说明我的最后评论[`filter_input_array()`](http://php.net/manual/en/function.filter-input-array.php)

基于一个非常简单的 POSTed 用户数据示例。首先创建一个定义：

```
$userFormDefinition = array(
    'email' => FILTER_VALIDATE_EMAIL,
    'age'   => FILTER_VALIDATE_INT,
    'name'  => array(
        'filter'  => FILTER_VALIDATE_REGEXP, 
        'options' => array('regexp' => '/^\w+$/')
    ),
); 
```

然后使用通用验证类（下面的类定义）：

```
$formValidator = new FormValidator();
$formValidator->validatePost($userFormDefinition);

if ($formValidator->isValid()) {

    // if valid, retrieve the array
    // and use the values how you wish

    $values = $formValidator->getValues();

    // for example, extract and populate
    // a User object, or whatever :)

    extract($values);

    $user = new User();
    $user->setName($name);
    $user->setEmail($email);
    $user->setAge($age);

    // etc.
} 
```

FormValidator 的一个非常基本的（未经测试的）实现。

基本用例是为要过滤的请求方法调用适当的方法。这反过来检查返回的值并确定输入是否有效。

这可能需要很多的爱——*尤其*是`filterInput`方法，因为您可能需要进行一些测试以确保您正确处理“真实”或“虚假”值。我在考虑复选框类型的值。直接`in_array`检查`false`可能不会像这里实施的那样削减它。但是有很多标志可以通过定义传入。

我想您还可以通过计算结果数组和定义的计数来检查丢失的输入`$values`，以确保它们匹配。定义中没有的其他输入被过滤掉（你可能想检查一下，但我有理由确定这一点）。

```
<?php

class FormValidator
{   
    private $isValid = false;

    private $isBound = false;

    private $values  = array();

    public function validatePost(array $definition)
    {
        // additional REQUEST_METHOD checking here?
        $this->filter(INPUT_POST, $definition);
    }

    public function validateGet(array $definition)
    {
        // additional REQUEST_METHOD checking here?
        $this->filterInput(INPUT_GET, $definition);
    }

    protected function filterInput($type, $definition)
    {
        $this->isBound = true;

        $this->values = filter_input_array($type, $definition);

        // might have to do some reading on nulls vs false, 
        // and validating checkbox type values here... you can
        // set all sorts of flags so a better implementation
        // would probably be required here... :s

        if (is_array($this->values) && !in_array(false, $this->values))) {
            $this->isValid = true;
        }   
    }

    public function isValid()
    {
        if (!$this->isBound) {
            throw new Exception("you didn't validate yet!");
        }

        return $this->isValid;
    }

    public function getValues()
    {
        if (!$this->isBound) {
            throw new Exception("You didn't validate yet!");
        }

        return $this->values;
    }
} 
```

无论如何，我会说重构并测试该类中的 bejayzis，（甚至完全改变它）但希望它概述了基本思想：对于每种类型的输入，创建一个定义，然后使用通用验证类来过滤并确保有效性。

希望这可以帮助。`filter_input`和`filter_input_array`摇滚:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T21:11:30.027

当您说“验证”时 - 我假设您在执行操作之前正在验证用户输入。在通过 jQuery 使用 AJAX 提交数据或从 Web 服务响应时，我经常使用它。

如果是这样，您可能想看看我的[非常简单的验证类](https://gist.github.com/2771633)。

```
<?php

$validator = new Validator();

// Each validation rule is a property of the validator object.
$validator->username = function($value, $key, $self)
{
    if(preg_match('~\W~', $value))
    {
        return 'Your username must only contain letters and numbers';
    }
};

$validator->password = function($value, $key, $self)
{
    if(strlen($value) < 8)
    {
        return 'Your password must be at least 8 characters long';
    }
};

if( ! $validator($_POST))
{
    die(json_encode($validator->errors()));
}

// ... register user now 
```

您可以使用它来验证任何数据 - 只要它是数组形式。不仅仅是 $_POST/$_GET 数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T08:43:54.953

我们创建并使用了许多不同的框架。表单处理通常是创建 Web 应用程序的重要组成部分。因此，要回答您有关错误处理的问题，我建议您更广泛地研究这个问题。

显然，对于要验证的任何内容，您需要某种类型的输入数据和输入数据的定义。接下来，您是否拥有一个表单，或者您是否计划对多个表单进行集中验证。如果，那么，创建公共验证器对象是有意义的。

```
class validator {} 
```

好的，所以，要让验证器正常工作，它必须知道要验证什么以及如何验证。所以，在这里我们回到你如何创建表单的问题——那些是动态的，基于模型，还是它们是纯 html。如果表单基于模型，它通常定义了所有字段，并且通常大多数验证规则已经存在于模型级别。在这种情况下，教你的验证者从模型中学习字段是有意义的，例如

```
function setModel($model){}
function getFields(){ -- iterates through $model fields} 
```

或者，如果您不使用模型并且表单是纯 html，那么简单的字段和验证器数组最有意义：

```
$fields = array(
    "name" => array("notNull"),
    "age" => array("notNull", array("size", 13, 99))
); 
```

上述方法允许您定义验证器（一个或多个），并且每个验证器可能包含额外的参数。在这种情况下，您的验证器将如下所示：

```
function validate($data, $fields){
    $this->valid = true;
    $this->data = $data;
    foreach ($fields as $field_name => $validators){
        foreach ($validators as $v){
            $params = array($field_name, isset($data[$field_name])?$data[$field_name]:null);
            if (is_array($v)){
                $m = "_" . $v[0];
                unset($v[0]);
                $params = array_merge($params, $v);
            } else {
                $m = "_" . $v;
            }
            if (method_exists($this, $m)){
                call_user_func_array(array($this, $m), $params);
            }
        }
    }
    if (!empty($this->errors)){
        $this->valid = false;
    }
    return $this->valid;
} 
```

很酷的是，您可以通过以下方式将下一个验证器作为新方法添加到验证器类：

```
function _notNull($field_name, $value){
    if (!$value){
        $this->errors[$field_name][] = "Must be filled";
    }   
}

function _size($field_name, $value, $min = null, $max = null){
    if ($value < $min && $min){
        $this->errors[$field_name][] = "Must be at least $min";
    } else if ($value > $max && $max){
        $this->errors[$field_name][] = "Must be at most $max";
    }   
} 
```

因此，然后，使用这种方法，您将拥有可以轻松扩展的验证器类，您可以为验证器提供多个参数，并且验证器可以使用正则表达式/过滤器或任何其他验证字段的方法。最后，`$this->errors array`将包含带有字段和错误的关联数组。而且，每个字段只有一个错误，不要混淆用户。显然，您可以根据进行验证的环境仅使用数组或模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T00:44:01.847

为了帮助您放松，无论您做什么，您最终都会得到与您描述的相同的基本程序循环。您可以稍微移除嵌套（见下文），但不会太多。

对于验证，您需要一个程序流程，这就是您所拥有的。可能会有细微的变化（例如，即使某些其他字段错误，您也可以执行组合验证器），但这是程序流程。

```
1\.  Loop through all fields, and validate them; store errors if any
2\.  If (no errors) {
3\.      loop though all multiple combinations and validate them, store errors if any
4\.  }
5\.  If (no errors) {
6\.     do action, store errors if any
7\.  }
8\.  If (no errors) {
9\.     Report back success
10\. } else {
11\.    Report back problems
12\. } 
```

从编码的角度来看，为了提高效率，您几乎可以遵循那里的任何答案——添加“字段”类，然后循环遍历这些，或者一组验证条件并循环遍历这些。你可以添加“验证器类”（但你需要两种类型——一种附加到字段，一种附加到表单），你可以使用异常让你回到上面的循环——但是那个基本的程序循环你'关心永远不会改变。

* * *

但要更恰当地回答我的工作方式（在较大的项目中），需要：

1.  “字段验证器”类，用于验证字段的类型、长度、强制等。
2.  “表单验证器”类，用于验证特定的数据组合等。
3.  控制表单动作的“表单”类。这也很有用，不同类型的表单类可以链接到数据库（类似于 VB/C# .Net）并从字段类型中提取字段验证，并具有标准的“编辑”、“添加”和“删除”功能。
4.  控制字段动作的“字段”类。字段也可以链接到数据库，链接到其他字段等。

表单将使用完全相同的程序结构进行验证，除了它循环遍历字段对象（不是原始字段），并将异常吐回存储表单错误的循环（如 Darragh 所建议的）。有了类，它就更加结构化，更容易添加/编辑等。

对于没有框架悬垂的快速项目（一页表单），我只需使用您的代码进行特定验证。（这是个人选择——其他人会说即使是小型项目也应该始终使用该框架；这两个选项都是有效的，这里不讨论。有时我只使用中级选项。无论哪个适合项目。）

但无论如何——基本程序循环是相同的。您无需为此做任何事情，因为这是必需的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T19:57:53.313

下面我编写了一个示例，向您展示了如何在一般情况下使用异常（非特定于您的情况）并进一步了解更具体的内容（仍然使用异常）。前两个示例将一次处理 1 个错误。我提供的第三个示例给出了如何处理多个错误和异常的示例。

大部分解释都在代码的注释中，所以一定要仔细阅读：）

***一般异常处理***

```
<?php
//Define some variables to work with
$var  = false;
$var2 = false;

try { //Outer try
    echo 'Do something here!<br />';

    try { //Inner try
        if($var !== true) { //Fail
            throw new Exception('$var is not true',123); //Exception is thrown (caught 2 lines down)
        }
    } catch (Exception $e) { //Exception caught here
        echo 'InnerError# '.$e->getCode().': '.$e->getMessage().'<br />'; //Exception handled (in this case printed to screen)
    }

    //Code is continuing here even after the exception was thrown
    echo 'Do something else here!<br />';

    if($var2 !== true) { //Fail
        throw new Exception('$var2 is not true', 456); //Exception is thrown (caught 6 lines down)
    }

    //Code fails to run as the exception above has been thrown and jumps straight into the below catch
    echo 'Do the third thing here!<br />';

} catch (Exception $e) { //Exception caught here
    echo 'Error # '.$e->getCode().': '.$e->getMessage().' on line '.$e->getLine().' in '.$e->getFile().'<br />'; //Exception handled (in this case printed to screen)
}

//Code is continuting here even after both of the exceptions
echo 'Do even more stuff here!<br />';
?> 
```

*   [http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)
*   [http://www.php.net/manual/en/class.exception.php](http://www.php.net/manual/en/class.exception.php)

标准异常类构造函数：

```
public __construct ([ string $message = "" [, int $code = 0 [, Exception $previous = NULL ]]] ) 
```

* * *

***自定义例外***

现在，将此与您的示例相关联，您可以按照以下方式做一些事情：

```
<?php
class customException extends Exception { //Create a custom exception handler that allows you to pass more arguments in the constructor             
    public function __construct($errorString, $errorNumber, $errorFile, $errorLine) {
        $this->message = $errorString; //Using the Exception class to store our information
        $this->code = $errorNumber;
        $this->file = $errorFile;
        $this->line = $errorLine;
    }
}

function err2Exception($errNo, $errStr, $errFile, $errLine) {  //This function converts the error into an exception
    throw new customException($errStr, $errNo, $errFile, $errLine); //Throw the customException
}

set_error_handler('err2Exception'); //Set the error handler to the above function

try {
    assert(1==2); //This fails, calls the function err2Exception with the correct arguments, throws the error and is caught below
} catch (Exception $e) { //Error caught as an Exception here
    //Echo out the details (or log them, or whatever you want to do with them)
    echo 'Error String: '.$e->getMessage().'<br />';
    echo 'Error Number: '.$e->getCode().'<br />';
    echo 'File containing error: '.$e->getFile().'<br />';
    echo 'Line with error: '.$e->getLine().'<br />';

}
?> 
```

[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

上述代码的输出：

> 错误字符串：assert()：断言失败
> 
> 错误编号：2
> 
> 包含错误的文件：18
> 
> 有错误的行：/var/www/test2.php

您可以将第一个代码示例中的嵌套`try`/`catch`语句的概念与自定义错误处理的第二个示例一起应用。

***处理多个错误/异常***

```
<?php
class errorLogger  { //create an errorLogger class
    private $errors; //Stores all errors

    public function addError($errCode, $errMsg, $errFile = null, $errLine = null) { //Manually add an error
        $this->errors[] = array( //Add to the error list
            'code' => $errCode,
            'message' => $errMsg,
            'file' => $errFile,
            'line' => $errLine
        );
    }

    public function addException($exception) { //Add an exception to the error list
        $this->errors[] = array( //Add to the error list
            'code' => $exception->getCode(),
            'message' => $exception->getMessage(),
            'file' => $exception->getFile(),
            'line' => $exception->getLine()
        );
    }

    public function getErrors() { //Return all of the errors
        return $this->errors;
    }

    public function numErrors() { //Return the number of errors
        return count($this->errors);
    }
}

$el = new errorLogger(); //New errorLogger
set_error_handler(array($el, 'addError')); //Set the default error handler as our errorLoggers addError method
set_exception_handler(array($el, 'addException')); //Set the default exception handler as our errorLoggers addException method

if(!is_numeric('a')) //Will fail
    $el->addError('Invalid number', 1); //Adds a new error

if(($name = 'Dave') !== 'Fred') //Will fail
    $el->addError('Invalid name ('.$name.')', 2, 'test.php', 40); //Adds another error

assert(1==2); //Something random that fails (non fatal) also adds to the errorLogger

try {
    if('Cats' !== 'Dogs') //Will fail
        throw new Exception('Cats are not Dogs', 14); //Throws an exception
} catch (Exception $ex) { //Exception caught
    $el->addException($ex); //Adds exception to the errorLogger
}

trigger_error('Big bad wolf blew the house down!'); //Manually trigger an error

//throw new Exception('Random exception', 123); //Throw an exception that isn't caught by any try/catch statement
                                                //(this is also added to the errorLogger, but any code under this is not run if it is uncommented as it isn't in a try/catch block)

//Prints out some 
echo '<pre>'.PHP_EOL;
echo 'There are '.$el->numErrors().' errors:'.PHP_EOL; //Get the number of errors

print_r($el->getErrors());

echo '</pre>'.PHP_EOL;
?> 
```

显然，您可以更改和调整`errorLogger`课程以专门满足您的需求。

上述代码的输出：

> 有5个错误：
> 
> 大批 （
> 
> ```
> [0] => Array
>     (
>         [code] => Invalid number
>         [message] => 1
>         [file] => 
>         [line] => 
>     )
> 
> [1] => Array
>     (
>         [code] => Invalid name (Dave)
>         [message] => 2
>         [file] => test.php
>         [line] => 10
>     )
> 
> [2] => Array
>     (
>         [code] => 2
>         [message] => assert(): Assertion failed
>         [file] => /var/www/test.php
>         [line] => 42
>     )
> 
> [3] => Array
>     (
>         [code] => 14
>         [message] => Cats are not Dogs
>         [file] => /var/www/test.php
>         [line] => 46
>     )
> 
> [4] => Array
>     (
>         [code] => 1024
>         [message] => Big bad wolf blew the house down!
>         [file] => /var/www/test.php
>         [line] => 51
>     ) 
> ```
> 
> )

上面的代码允许您：

*   抛出异常并将它们添加到`errorLogger`
*   处理随机函数中任何未处理的情况，这些情况通常会导致显示错误
*   手动添加您自己的错误
*   触发错误（[http://uk3.php.net/trigger_error](http://uk3.php.net/trigger_error)）

然后，您可以稍后显示/记录/任何所有错误。

*注意：以上所有代码都可以直接复制和粘贴，给你一些实验的东西*

# html - “lang”属性改变了我在谷歌浏览器中的字体设置

> ID：10661954
> 
> 赞同：6
> 
> 时间：2012-05-19T02:53:25.703
> 
> 标签：html, google-chrome, fonts

例如：

```
<!doctype html>
<html lang="zh-cn">
    <head>
        <style type="text/css">
            body
            {
                font-family: sans-serif;
            }
        </style>
    </head>
    <body>
        <div>Test.</div>
    </body>
</html> 
```

此 HTML 文档显示的字体不是我的浏览器无衬线字体。对我来说，它是 SimSun。

```
<!doctype html>
<html>
    <head>
        <style type="text/css">
            body
            {
                font-family: sans-serif;
            }
        </style>
    </head>
    <body>
        <div>Test.</div>
    </body>
</html> 
```

这是正常的。

它只影响谷歌浏览器中的字体，我认为这可能与 CSS 属性“-webkit-locale”有关。

这是正常的吗？如何设置“sans-serif”的字体，以便“lang”属性不会改变字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T03:34:06.727

“在 Microsoft Windows XP 及更早版本的中文版本中，默认界面字体是带衬线的（MingLiU 和 SimSun），这与该产品的大多数其他（包括东亚）地区使用的无衬线样式不一致。从 Windows Vista 开始，所有地区的默认界面字体更改为无衬线字体，在繁体中文环境使用微软正黑，在简体中文环境使用微软雅黑。”

来自 Wikipedia.org [http://en.wikipedia.org/wiki/East_Asian_sans-serif_typeface](http://en.wikipedia.org/wiki/East_Asian_sans-serif_typeface)

解决方案：

使用不同的字体样式。中国和西方用户会得到不同的字体，即使他们有相同的名字。

或者，您可以使用 :lang(Lang-Code) 规则来区分字体样式。这是一个例子：

```
<!doctype html>
<html>
    <head>
        <meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'>
        <style type="text/css">
        body {
            font-family: "Times New Roman", serif;
        }
        :lang(zh-ch){
            font-family: SimSum-18030,SimHei, serif;
        }
        </style>
    </head>
    <body>
        <div lang="zh-ch">Chinese font </div>
        <div>Default font.</div> 
    </body>
</html> 
```

演示：http: [//jsfiddle.net/wCuND/](http://jsfiddle.net/wCuND/)

更多信息在这里。

[http://www.w3.org/International/questions/qa-css-lang.en.php](http://www.w3.org/International/questions/qa-css-lang.en.php)

# ruby-on-rails - 为什么我在运行我的 Rails 应用程序时不断收到路由错误？

> ID：10661959
> 
> 赞同：0
> 
> 时间：2012-05-19T02:54:58.740
> 
> 标签：ruby-on-rails

> **可能重复：**
> [为什么我不断收到路由错误？](https://stackoverflow.com/questions/10661569/why-do-i-keep-getting-a-routing-error)

对不起，我再次问这个问题，但我第一次没有得到任何回应。

我正在尝试向michael hartl railstutorial的[https://github.com/railstutorial/sample_app_2nd_ed中的微博添加评论](https://github.com/railstutorial/sample_app_2nd_ed)

这是我的 routes.rb 文件中的相关区域。

```
resources :microposts, only: [:create, :destroy] do
    resources :comments, 
  end 
```

这是我尝试访问用户页面时遇到的错误：No route matches {:controller=>"comments", :format=>nil, :micropost_id=>#}

这是 rake 路由的输出 | grep 评论：

```
 user_comments GET    /users/:user_id/comments(.:format)                    comments#index
                       POST   /users/:user_id/comments(.:format)                    comments#create
      new_user_comment GET    /users/:user_id/comments/new(.:format)                comments#new
     edit_user_comment GET    /users/:user_id/comments/:id/edit(.:format)           comments#edit
          user_comment GET    /users/:user_id/comments/:id(.:format)                comments#show
                       PUT    /users/:user_id/comments/:id(.:format)                comments#update
                       DELETE /users/:user_id/comments/:id(.:format)                comments#destroy
    micropost_comments GET    /microposts/:micropost_id/comments(.:format)          comments#index
                       POST   /microposts/:micropost_id/comments(.:format)          comments#create
 new_micropost_comment GET    /microposts/:micropost_id/comments/new(.:format)      comments#new
edit_micropost_comment GET    /microposts/:micropost_id/comments/:id/edit(.:format) comments#edit
     micropost_comment GET    /microposts/:micropost_id/comments/:id(.:format)      comments#show
                       PUT    /microposts/:micropost_id/comments/:id(.:format)      comments#update
                       DELETE /microposts/:micropost_id/comments/:id(.:format)      comments#destroy 
```

最后是我的comments_controller.rb

```
class CommentsController < ApplicationController 
  def create
    @micropost = Micropost.find(params[:micropost_id]) 
    @comment = @micropost.comments.build(params[:comment]) 
    @comment.user = current_user

    if @comment.save 
      redirect_to @micropost
    else 
      redirect_to @micropost
    end 
  end 

  def show
    @comment = Comment.find(params[:id])
  end

  def new 

  end

  def destroy
    @comment = Comment.find(params[:id])
    @comment.destroy
    redirect_back_or root_path
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:20:54.970

您的路由代码生成的路由是：

```
GET    /microposts/:micropost_id/comments
POST   /microposts/:micropost_id/comments
GET    /microposts/:micropost_id/comments/new
GET    /microposts/:micropost_id/comments/:id/edit
GET    /microposts/:micropost_id/comments/:id
PUT    /microposts/:micropost_id/comments/:id
DELETE /microposts/:micropost_id/comments/:id
POST   /microposts
DELETE /microposts/:id 
```

因此，要访问您的评论控制器，您需要 `/microposts/:micropost_id/comments`从表单发布到`:micropost_id`url——您要添加评论的微博的 ID 号在哪里。

您能否确认您发布到的网址以及您希望它能做什么？

# configuration - 如何可靠地确定我的项目在哪个 PaaS 上运行？

> ID：10661963
> 
> 赞同：0
> 
> 时间：2012-05-19T02:56:07.870
> 
> 标签：configuration, heroku, environment-variables, paas, openshift

我有一个小项目，我想同时部署到 Heroku 和 OpenShift，以便在这两个平台上进行尝试。我正在使用 Python/Django 所以我想利用动态导入功能来定义每个环境的设置，为我想要部署到的平台维护一个设置模块，例如：

```
my_project/
    settings/
        __init__.py  <-- This is what's being imported during app init, here is where I want to detect which platform specific settings module to load
        dev_settings.py
        heroku_settings.py
        openshift_settings.py 
```

到目前为止，我使用此代码：

```
ENVIRONMENT = the_function_or_code_that_returns_the_environment() # Defaults to "dev"
from django.utils.importlib import import_module

try:
    # Import any symbols that begin with A-Z. Append to lists any symbols that
    # begin with "EXTRA_".
    local_settings_module_name = '%s_settings' % ENVIRONMENT
    local_settings = import_module(local_settings_module_name)
    import re
    for attr in dir(local_settings):
        match = re.search('^EXTRA_(\w+)', attr)
        if match:
            name = match.group(1)
            value = getattr(local_settings, attr)
            try:
                globals()[name] += value
            except KeyError:
                globals()[name] = value
        elif re.search('^[A-Z]', attr):
            globals()[attr] = getattr(local_settings, attr)
except ImportError:
    pass 
```

最好通过默认（不是由我/开发人员设置）环境变量来检测这一点。Heroku 只公开了一些：

```
DATABASE_URL
ENVIRONMENT
LANG
LD_LIBRARY_PATH
LIBRARY_PATH
PATH
PYTHONHASHSEED
PYTHONHOME
PYTHONPATH
PYTHONUNBUFFERED
SHARED_DATABASE_URL 
```

和 OpenShift 的：

```
OPENSHIFT_DB_HOST
OPENSHIFT_LOG_DIR
OPENSHIFT_TMP_DIR
OPENSHIFT_DB_CTL_SCRIPT
OPENSHIFT_REPO_DIR
OPENSHIFT_HOMEDIR
OPENSHIFT_GEAR_NAME
OPENSHIFT_PHPMYADMIN_IP
OPENSHIFT_RUNTIME_DIR
OPENSHIFT_INTERNAL_PORT
OPENSHIFT_PHPMYADMIN_CTL_SCRIPT
OPENSHIFT_DB_MYSQL_51_RESTORE
OPENSHIFT_DB_MYSQL_51_DUMP
OPENSHIFT_DB_PASSWORD
OPENSHIFT_DB_USERNAME
OPENSHIFT_PHPMYADMIN_GEAR_DIR
OPENSHIFT_RUN_DIR
OPENSHIFT_INTERNAL_IP
OPENSHIFT_GEAR_DIR
OPENSHIFT_GEAR_CTL_SCRIPT
OPENSHIFT_APP_DNS
OPENSHIFT_GEAR_TYPE
OPENSHIFT_GEAR_DNS
OPENSHIFT_DB_MYSQL_51_EMBEDDED_TYPE
OPENSHIFT_DB_URL
OPENSHIFT_APP_NAME
OPENSHIFT_DATA_DIR
OPENSHIFT_DB_SOCKET
OPENSHIFT_GEAR_UUID
OPENSHIFT_APP_UUID
OPENSHIFT_DB_TYPE
OPENSHIFT_DB_MYSQL_51_DUMP_CLEANUP
OPENSHIFT_DB_PORT 
```

OpenShift 变量带有前缀，`OPENSHIFT_`因此有一个开头，但 Heroku 并非如此。

如何使用环境变量可靠地检测平台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:08:38.360

我建议设置我自己的 ENV 配置设置。这可以使用 heroku 轻松完成。

```
heroku config:add MY_DEPLOYMENT_PLATFORM=heroku 
```

然后，在您的初始化程序（或任何您需要的地方）中，您可以像这样访问该值：

```
if ENV["MY_DEPLOYMENT_PLATFORM"] == "heroku"
 // perform heroku config
else 
 // perform other PAAS config
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:01:48.590

这就是我检测我的应用程序当前使用的 PaaS 的方式。overide_settings 方法不是我的。

```
def override_settings(dottedpath):
    """Imports uppercase modules from an string based module.
    Example:
        override_settings('my.module.settings')
    """
    try:
        _m = import_module(dottedpath)
    except ImportError:
        warnings.warn("Failed to import %s" % dottedpath) # <-- will show up in your error log
    else:
        _thismodule = sys.modules[__name__]
        for _k in dir(_m): # <-- moved the block inside else
            if _k.isupper() and not _k.startswith('__'): setattr(_thismodule,
                _k, getattr(_m, _k))

ON_OPENSHIFT = False
if os.environ.has_key('OPENSHIFT_REPO_DIR'):
    ON_OPENSHIFT = True

ON_HEROKU = False
if os.environ.get('LD_LIBRARY_PATH', None) == '/app/.heroku/vendor/lib':
    ON_HEROKU = True

if ON_OPENSHIFT:
    override_settings('settings.openshift')

if ON_HEROKU:
    override_settings('settings.heroku') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:31:52.487

@Kevin，我将我的评论发布为答案，以便人们可以快速看到它（或改进它！）：

```
if len([k for k in os.environ.keys() if k.startswith('OPENSHIFT_')]):
    ENVIRONMENT = 'openshift'
elif len([k for k in os.environ.values() if k.find('heroku') > -1]):
    ENVIRONMENT = 'heroku'

local_settings_module_name = '%s_settings' % ENVIRONMENT
local_settings = import_module(local_settings_module_name)
# do the magic with the `local_settings` module 
```

# javascript - 哪些 JavaScript 应该包含在 中，哪些包含在 ?

> ID：10661964
> 
> 赞同：29
> 
> 时间：2012-05-19T02:56:07.763
> 
> 标签：javascript, jquery, html, css

我对应该在哪里包含哪些 JavaScript 感到困惑？

例如：

*   应该在哪里包含 jQuery 库？在`<head>`结束`</body>`元素之前还是之前？

*   如果 JavaScript 是在底部定义的`<body>`，可以在正文中内联使用吗？

*   如果它阻止并行下载，那么为什么从来没有说过在底部包含您的 CSS？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T03:02:12.030

# CSS

加载 CSS 是`<head>`为了防止 Flash Of Unstyled Content (FOUC)，在这种情况下，您的页面会在一瞬间显示没有样式。加载它们`<head>`是一个很小的牺牲，以确保您的页面在内容被渲染时看起来很完美。

# JS

### 一般情况：

JS 加载到底部有几个（但不限于以下）原因：

*   这样它就不会阻塞其他资源的加载和页面的渲染。

*   JS 的传统用途是用于增强，例如客户端验证和较小的特殊效果。这些通常是可选的，不会影响页面的整体用途。因此它们最后加载。

*   在内容之后添加脚本可确保您的脚本引用的元素被安全访问，因为它们已经在 DOM 上。

### 例外：

但是该规则有一些例外，例如：

*   像 Modernizr 这样的“飞行前图书馆”

    Modernizr 在`<html>`标签上应用类来表示功能的可用性，可用于 JS 和 CSS 目的。延迟这可能会由于添加类而导致样式突然转变，以及由于没有更早进行检查而导致 JS 损坏。

*   CSS 解析器，如 LESS/SASS 和影响样式的脚本

    远程 LESS/SASS 样式通过 AJAX 加载，因此无论样式是否准备好，页面都会呈现。将它们加载到头部将使它们尽早加载样式以避免 FOUC。

*   像RequireJS这样的“引导程序库”需要尽早加载，以并行下载其他脚本。

*   Web 应用程序需要 JS 作为平台。最好尽早加载这些库。此外，在 web 应用程序中，应用程序运行之前的页面内容最少。

### 边缘案例：

这里还有两个值得一提的 script 属性，它们是[`defer`](http://caniuse.com/#search=defer)和[`async`](http://caniuse.com/#search=async)。

基本上，这个想法是脚本标签`defer`仅在解析 DOM 后运行，而脚本标签`async`异步加载脚本而不阻塞其他操作。这意味着您可以在头部使用脚本，`async`并行加载它们，并`defer`确保 DOM 在执行时准备好，但每个都有自己的问题。

这是一个[MDN 文档](https://developer.mozilla.org/en/HTML/Element/script#Attributes)，解释了更多关于它们是什么以及一个几乎讲述了它们的历史、支持和当前状态[的答案。](https://stackoverflow.com/a/3982619/575527)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T08:02:41.893

# c# - 我如何将多个一维数组组合成一个多维数组，从而产生一个列出的显示

> ID：10661965
> 
> 赞同：0
> 
> 时间：2012-05-19T02:56:22.723
> 
> 标签：c#, visual-studio-2010

嗨，我试图让我的代码正常工作，但不幸的是，我在将我的数组组合成一个列表时遇到了一些麻烦。

我希望列出的内容显示如下：

1.a、1.b、1.c、1.d、1.e、2.a、2.b、2.c、2.d、2.e

每个调用数组 1 中的数字（即 1、2、3、4、5、6、...）和数组 2 中的问题（即 a、b、c、d、e）

但是当它被调用时，我也想记录每个数字和问题的回答，例如。

1.a 响应 1、1.b 响应 2、1.c 响应 1... 等等。

到目前为止，我有这段代码，但它只是向我展示了：

```
const int phone_number = 50;

string[] phone_number1;

phone_number1 = new string[phone_number];

const int question = 5;

string[] question1;

question1 = new string[question];

const int answers = phone_number + question;

string[] answer1;

answer1 = new string[answers]; 
```

> 50 5 55

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:36:55.233

好吧，你想要的一部分（一个例子）......可能是这样的

```
 int[] intarr = { 1, 2, 3, 4, 5, 6 };
        char[] chrarr = { 'a', 'b', 'c', 'd', 'e' };
        ArrayList alist = new ArrayList();

        for (int j = 0; j < chrarr.Length; j++)
        {
            for (int i = 0; i < intarr.Length; i++)
            {
                alist.Add(intarr[i] + "." + chrarr[j]);
            }
        }
          alist.Sort();

        foreach (string str in alist)
        {
            Console.WriteLine(str);
        } 
```

输出：

> 1.a 1.b 1.c 1.d 2.a 2.b 2.c 2.d 3.a 3.b 3.c 3.d 4.a 4.b 4.c 4.d 5。 5.b 5.c 5.d

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:51:21.990

制作三个数组，伪代码：

```
string[] num;
string[] que;
string[] res; 
```

将它们放在第四个数组中

```
Object[] acc = {num, que, res}; 
```

将其放入您正在维护的 ArrayList 中。

```
lsit.Add(acc); 
```

这只是一个想法，您应该避免使用 Object 数组，如果允许，最好的方法是为这些属性创建一个类并将它们保存在列表中。

# c# - 在c#中从内存流中另存为jpeg

> ID：10661967
> 
> 赞同：3
> 
> 时间：2012-05-19T02:57:03.000
> 
> 标签：c#, image, jpeg, memorystream

我有如下所示的方法将图像保存为 jpeg。我想保存所有具有相同高度和宽度的图片而不会失真。

我怎样才能做到这一点？请帮忙

```
public void SaveFileOnDisk(MemoryStream ms, string FileName)
{
    try
    {
        string appPath = HttpContext.Current.Request.ApplicationPath;
        string physicalPath = HttpContext.Current.Request.MapPath(appPath);
        string strpath = physicalPath + "\\Images";
        string WorkingDirectory = strpath;

        System.Drawing.Image imgSave = System.Drawing.Image.FromStream(ms);
        Bitmap bmSave = new Bitmap(imgSave);
        Bitmap bmTemp = new Bitmap(bmSave);

        Graphics grSave = Graphics.FromImage(bmTemp);
        grSave.DrawImage(imgSave, 0, 0, imgSave.Width, imgSave.Height);

        bmTemp.Save(WorkingDirectory + "\\" + FileName + ".jpg");

        imgSave.Dispose();
        bmSave.Dispose();
        bmTemp.Dispose();
        grSave.Dispose();
    }
    catch (Exception ex)
    {
        //lblMsg.Text = "Please try again later.";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T03:25:22.877

调整图像大小并保存

```
Private void ResizeImage(Image img, double maxWidth, double maxHeight)
{
    double srcWidth = img.Source.Width;
    double srcHeight = img.Source.Height;

    double resizeWidth = srcWidth;
    double resizeHeight = srcHeight;

    double aspect = resizeWidth / resizeHeight;

    if (resizeWidth > maxWidth)
    {
        resizeWidth = maxWidth;
        resizeHeight = resizeWidth / aspect;
    }
    if (resizeHeight > maxHeight)
    {
        aspect = resizeWidth / resizeHeight;
        resizeHeight = maxHeight;
        resizeWidth = resizeHeight * aspect;
    }

    img.Width = resizeWidth;
    img.Height = resizeHeight;
} 
```

您可以使用此代码将图像大小调整为所需的尺寸，然后再保存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:10:10.710

正如其他人所提到的，如果您希望所有图像的大小相同而不失真，则需要在保持纵横比的同时调整大小。请参阅下面的此功能：

```
public Image ResizeWithSameRatio(Image image, float width, float height)
{
    // the colour for letter boxing, can be a parameter
    var brush = new SolidBrush(Color.Black);

    // target scaling factor
    float scale = Math.Min(width / image.Width, height / image.Height);

    // target image
    var bmp = new Bitmap((int)width, (int)height);
    var graph = Graphics.FromImage(bmp);

    var scaleWidth = (int)(image.Width * scale);
    var scaleHeight = (int)(image.Height * scale);

    // fill the background and then draw the image in the 'centre'
    graph.FillRectangle(brush, new RectangleF(0, 0, width, height));
    graph.DrawImage(image, new Rectangle(((int)width - scaleWidth)/2, ((int)height - scaleHeight)/2, scaleWidth, scaleHeight));

    return bmp;
} 
```

现在您的使用功能可以大大简化（假设这里的目标图像为 1024x768）：

```
public void SaveFileOnDisk(MemoryStream ms, string FileName)
{
    try
    {
        string appPath = HttpContext.Current.Request.ApplicationPath;
        string physicalPath = HttpContext.Current.Request.MapPath(appPath);
        string strpath = physicalPath + "\\Images";
        string WorkingDirectory = strpath;

        using (var original = Image.FromStream(ms))
        using (var resized = ResizeWithSameRatio(original, 1024, 768))
        {
            resized.Save(WorkingDirectory + "\\" + FileName + ".jpg");
        }
    }
    catch (Exception ex)
    {
        //lblMsg.Text = "Please try again later.";
    }
} 
```

请注意在变量数量方面增加的简化，并通过使用`using`而不是`Dispose()`.

# silverlight - 自定义 DevExpress LookupeditSettings

> ID：10661968
> 
> 赞同：0
> 
> 时间：2012-05-19T02:57:11.097
> 
> 标签：silverlight, devexpress

我编写了我的自定义查找编辑（源自查找编辑）

我想在lookupeditsettings 中使用它而不是lookupedit 我该怎么做？（在银光中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:45:32.767

我建议您查看[自定义编辑器](http://documentation.devexpress.com/#WPF/CustomDocument9325)帮助主题，该主题描述了此任务的基本概念（本文适用于 WPF 和 Silverlight）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:07:57.847

您可以获得帮助主题[自定义编辑器](http://documentation.devexpress.com/#WPF/CustomDocument9325)，该主题说明了如何`inherit`从`DevExpress`编辑器/设置中进行操作。

检查[LookUpEditBase](http://documentation.devexpress.com/#Silverlight/clsDevExpressXpfEditorsLookUpEditBasetopic)类的成员和属性，然后尝试实现自定义代码。有关该主题的更多帮助，请参阅 LookupEdit 的 DevExpress 文档和[lookupEdit Customization](http://search.devexpress.com/?q=custom%20editor%20&p=T4%7CP3%7C0&d=762)上的[搜索结果](http://search.devexpress.com/default.aspx?q=custom%20editor%20lookupedit&p=T4%7CP3%7C0&d=762&page=1)。

*如果您需要进一步的帮助，请关注 DevExpress 问答线程 -[在 lookupeditsettings 中使用自定义查找编辑](http://www.devexpress.com/Support/Center/p/Q402541.aspx)*

希望这有帮助。

# javascript - 使用 jsfiddle 嵌套列表视图导致的多个 pagebeforecreate 事件

> ID：10661969
> 
> 赞同：2
> 
> 时间：2012-05-19T02:57:32.943
> 
> 标签：javascript, jquery, cordova, jquery-mobile, jquery-events

从我关于@ jquery 的主题： [https ://forum.jquery.com/topic/multiple-pagebeforecreate-events-triggered-when-jqm-builds-the-page-for-nested-listviews-w-jsfiddle](https://forum.jquery.com/topic/multiple-pagebeforecreate-events-triggered-when-jqm-builds-the-page-for-nested-listviews-w-jsfiddle)

现在可以理解了，但有点不直观。谷歌并没有太大帮助，主要是指出“使用 pageinit 而不是 doc.ready()”。嵌套列表视图页面中的注释会节省一些时间。只是我还是在点击之前加载页面有点不直观？

**问题是：如何检测事件负载的差异？探索事件对象时没有任何闪光。**

我在说什么？:) Daedalus 更新：http: [//jsfiddle.net/3Shyb/](http://jsfiddle.net/3Shyb/) 原文： http: [//jsfiddle.net/jhr007/mDVfP](http://jsfiddle.net/jhr007/mDVfP) 在 jsfiddle 中，消息被发送到控制台日志。打开并清除控制台。跑。

注意关于“pagebeforecreate Man handle the dom..”等的两条消息。1，然后是 2

如果您编辑 html 并删除嵌套的`<ul> ... </ul>`，然后运行。你会收到一次消息。

这发生在每个带有子菜单的导航菜单加载的页面上。

* * *

[http://www.jquerymobile.com/demos/1.1.0/docs/lists/docs-lists.html](http://www.jquerymobile.com/demos/1.1.0/docs/lists/docs-lists.html)

当单击带有子列表的列表项时，框架将生成一个新的 ui 页面，其中填充了标题中父项的标题和子元素列表。.. 列表可以嵌套多个级别，所有页面和链接都将由框架自动处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:28:26.970

我发现的解决方案是使用 live/delegate（在 jq 1.7 中已弃用）的现在和未来绑定之类的功能。

所以给 div[date-role=page] 添加一个 id 属性，然后使用 'on' 方法绑定到这些 ids("#pageid1, #pageid2") 上的事件，现在和将来......

```
$( document ).on( 'pagebeforecreate', "#pageid1, #pageid2" ,
    function (event) {
      console.log('pagebeforecreate ', event.target.id );
    }                    
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:44:10.493

不幸的是，您引用的那部分文档是错误的。listview 小部件在创建父页面时创建 ui 页面。不是在单击列表视图项时。这就是为什么您会看到多个 pagecreate 事件。如果您有两个嵌套列表视图，您将看到 3 个 pagebeforecreate 事件。您可以从我在下面粘贴的代码中看到，嵌套列表的子页面与普通的 JQM 页面完全一样。

```
<div data-role="page" data-url="/_display/&amp;ui-page=0-0" data-theme="null" data-count-theme="c" tabindex="0" class="ui-page ui-body-null">

    <div data-role="header" data-theme="b" class="ui-header ui-bar-b" role="banner">
        <div class="ui-title">Step 1</div>
    </div>

    <div data-role="content" class="ui-content" role="main">
        <ul class="ui-listview">
            <li class="ui-li ui-li-static ui-body-c">Step 1</li>
            <li class="ui-li ui-li-static ui-body-c">Step 2</li>
            <li class="ui-li ui-li-static ui-body-c">Step 3</li>
            <li class="ui-li ui-li-static ui-body-c">Step 4</li>
            <li class="ui-li ui-li-static ui-body-c">Step 5</li>
        </ul>
    </div>

</div> 
```

# ios - 是否可以在没有继承的情况下覆盖类上的 drawRect？

> ID：10661971
> 
> 赞同：1
> 
> 时间：2012-05-19T02:57:45.317
> 
> 标签：ios, overriding, drawrect

我需要知道是否可以全局覆盖 UI 类的 drawRect。类似于“外观”类属性的东西。本质上，我需要为应用程序中的所有按钮使用自己的绘图程序。最好我不想继承并且必须在情节提要中的每个按钮上设置类类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:47:52.213

使用类类别

```
@interface UIView (UIViewDR)
- (void)drawRect:(CGRect)rect;
@end

@implementation UIView (UIViewDR)
- (void)drawRect:(CGRect)rect { /* your implementation */ return; }
@end 
```

您可能会使用 UIView 以外的类；就像一个按钮所依赖的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:22:26.510

你看过[UIAppearance](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAppearance_Protocol/Reference/Reference.html)吗？我以前没有考虑过解决像你这样的问题，但我在谷歌上浏览了一下，似乎 UIAppearance 可以解决问题？

# java - java eclipse调试错误

> ID：10661978
> 
> 赞同：1
> 
> 时间：2012-05-19T03:02:26.977
> 
> 标签：java, eclipse, debugging

我已经尝试了一些现有的解决方案，但它不起作用。

我有两个文件/类 First.java（其中定义了 main）和 Second.java，其中定义了简单的函数。

```
**First.java:**

import java.util.*;

public class First 
{
    public static void main(String[] args) 
    {   
        Second s1 = new Second();
        s1.Hello(); 
    }
} 
```

当我在eclipse中调试上面的代码时，它给了我错误“source not found”就行了`Second s1 = new Second();`

但是，如果我单击“进入”，则会发生此错误。如果我在上述行中单击“跳过”，则不会发生错误；如果在后续步骤中点击“step into”，则错误不再出现，执行成功进入第二个文件“Second.java”。

所以我的问题是，有没有一种方法可以让我进入“Second.java”的构造函数而不会越过它？

如何设置源路径。

第二个.java类：

```
public class Second 
{
    int a;
    public Second()
    {
        this.a=100;
    }

     public void Hello()
     {
         System.out.println("hello how are you");
     }

     public int GetResult()
     {
        return a; 
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:57:05.130

问题是当您在创建第二个对象时“进入”行时，它要求类加载器加载第二个类。由于您可能没有 eclipse 设置来指向 java 源的位置，因此 eclipse 不知道 java 源代码在您的机器上用于 vm 用于加载类的所有文件的位置，包括 java.lang.ClassLoader， eclipse 会向您显示“找不到源”页面。

你可以：

1.  将断点从 First.java 中的行`Second s1 = new Second();`移动到`public Second()`Second.java 中。*然后，当您调试时，您应该在 VM 加载第二个对象后*点击断点，并且您应该能够在构造函数被实例化时对其进行调试。
2.  当您“进入”该行的断点`Second s1 = new Second();`并获取未找到源页面时，立即“返回”，然后再次按“进入”，这将带您进入第二类的构造函数。
3.  单击附加源，然后浏览到 java 源文件的目录。它们通常包含在 JDK 下载中，位于 VM 安装文件夹中名为 src.zip 的文件中（对于 Sun VM）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:08:06.740

Source not found 通常意味着 Eclipse 找不到所需的文件。Second.java 在您的项目中吗？最好的办法是制作一个包，例如 me.russjr08.projects。这样 Eclipse 可以搜索包（假设所有正确的文件都在那里）并找到您想要使用的类/java 文件。

IIRC 另一种解决方案是在您的 src 文件夹中包含 Second.java

# node.js - cloud9 + mongodb + nodejs

> ID：10661981
> 
> 赞同：1
> 
> 时间：2012-05-19T03:03:20.040
> 
> 标签：node.js, mongodb, cloud9-ide

我使用 cloud9 ide 编码新项目。当我从 cloud9ide 部署到 cloudfoundry 时。我有错误

> 应用程序无法启动。请注意，CloudFoundry 使用不同的端口来监听。调用“listen()”时，可以像“.listen(process.env.PORT || process.env.VCAP_APP_PORT)”一样使用它。

这是我的来源

> var port = (process.env.VMC_APP_PORT || 3000);
> 
> var host = (process.env.VCAP_APP_HOST || 'localhost');
> 
> var http = require('http');
> 
> var env = process.env.VCAP_SERVICES ？JSON.parse(process.env.VCAP_SERVICES)：空；
> 
> var mongodata = env['mongodb-1.8'][0]['credentials'];
> 
> http.createServer(function (req, res) {
> 
> res.writeHead(200, {'Content-Type': 'text/plain'});
> 
> res.end('Hello World\n' + env); }).listen(端口，主机);

当我得到 mongo 对象时，这个来源有错误

> var mongodata = env['mongodb-1.8'][0]['credentials'];

但没有这条线部署成功

请帮我 ！！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:40:26.223

正如 cloud9 控制台中的错误可能会告诉您的那样（当我尝试此操作时它会告诉我:-)）：

```
haalasdoallalsakdl (CloudFoundry): [5/6] Crash log
============/logs/stderr.log============
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Cannot read property '0' of undefined
    at Object.<anonymous> (/var/vcap/data/dea/apps/haalasdoallalsakdl-0-8be0d413a9ec29a79f665d388ce414bd/app/server.js:7:35)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Array.0 (module.js:470:10) 
```

所以没有`VCAP_SERVICES`像那样被调用的条目。当我变量时`console.log`，`process.env`甚至没有列出任何服务。

因此，您必须为您的应用安装 mongodb 服务。最快的方法是通过 CF VMC 工具（目前无法在 cloud9 中运行，因此您必须在本地安装）：

```
vmc create-service mongodb --bind your_app_name 
```

然后就可以正常启动了。

*注意您可能可以在 .yml 文件中解决此问题，但我不知道如何执行此操作:-)*

# php - PHP PDO 参数 - $data 数组中的空字符串导致查询失败

> ID：10661982
> 
> 赞同：1
> 
> 时间：2012-05-19T03:03:32.923
> 
> 标签：php, pdo, odbc

我对 PHP 5.3 有一个 PDO 问题。我正在为我的数据库运行 MaxDB 7.8 - 如果您还没有听说过，那么您并不孤单。它是一个在纸面上与 MySQL 连接的开源企业数据库，但与它完全不同。

我不确定这个问题是由 MaxDB 引起的，但我想提一下。

我发现当通过 ODBC 驱动程序使用准备好的语句时，如果任何 $data 数组值是空字符串，我的查询就会失败。例如，向用户显示一个对话框，其中 1 个值是必需的（'title'），但 2 个是可选的（'author'、'version'）。如果用户选择不输入可选值之一，则该数组元素将是 == ""。如果是这种情况， $sth->execute($data) 会失败，并抱怨 null 错误。

我已经尝试了 setAttribute 命令 re: Nulls on all 3 settings，我尝试检查 $value == null { $value = ""; }...以及我在文章中发现的许多其他内容，均无济于事。如果我用“（无）”之类的字符串手动替换任何空值，则查询有效。

无论如何，这是细节：

```
$data: 
```

`Array ( [cust] => 1 [ftype] => 1 [title] => test [author] => [version] => [folder] => 0 [modified] => 1337394898 [content] => "this is test content" [status] => 1 [pages] => 1 )`

```
$sql = "INSERT INTO FORMS (CUST, FTYPE, TITLE, AUTHOR, VERSION, FOLDER, MODIFIED, STATUS, CONTENT, PAGES) VALUES (:cust, :ftype, :title, :author, :version, :folder, :modified, :status, :content, :pages)";
$sth = $dbh->prepare($sql) or $this->error($sql, $dbh->errorInfo());
$sth->execute($data); 
```

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:33:16.230

在失去了几天的时间之后，我放弃了这个。如果有人找到解决方案，我很想听听，但我需要继续前进。

我的胶带/铁丝网解决方案是从绑定参数列表中删除可能为空的值，并将它们作为 SQL 语句的一部分包含在内。这样，如果某些事情恰好等于 ''，它就不会惊慌失措并爆炸。

感谢所有尝试过的人。

# c# - 可以检测到任务栏的移动吗？

> ID：10661983
> 
> 赞同：0
> 
> 时间：2012-05-19T03:04:03.747
> 
> 标签：c#, visual-studio-2010, taskbar

我有一个类可以访问 win32 API 来拉取任务栏的位置、大小、状态和边缘。我使用该类来了解在哪里创建警报，具体取决于任务栏的位置。我有一种方法可以根据任务栏何时生成或删除新警报来更新警报位置。

有没有办法检测任务栏何时移动，以便我可以调用更新方法？这样，如果用户移动任务栏，警报就会移动到适当的位置，而不是处于荒谬的位置，直到出现新警报或删除警报。

我的想法是让计时器检查我上次生成的当前任务栏对象，每隔一秒左右使用一个新对象，如果有变化则调用更新方法。我只是想知道是否有“更简单”或“更好”的方法来做到这一点。

（使用 Visual Studio 2010 C#）

TL;DR 需要检测任务栏何时移动以调用方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-19T03:13:55.817

一般的想法，你应该继承任务栏窗口。正如您现在可能看到的，每个窗口都定义了所谓的 WndProc（窗口过程），用于处理系统或其他窗口发送的所有消息。

您不能直接访问此函数，但您可以使用正确的 API (SetWindowLong) 将消息流重定向到您选择的另一个 WndProc 函数（请记住回调旧的 WndProc 以便目标窗口函数正常运行）。

通过这样做，您可以监视目标窗口收到的所有消息。特别是您的 WM_MOVE 消息。

这是一个简单的解释，我建议彻底阅读它。

这是一个起始链接：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569(v=vs.85).aspx)

# asp.net - 如何在 ASP.NET (VB) 后面的代码中循环数据

> ID：10661985
> 
> 赞同：0
> 
> 时间：2012-05-19T03:04:49.587
> 
> 标签：asp.net, vb.net, webforms

目前，我正在寻找一种解决方案，让我的数据在后面的代码中循环？

它实际上是一个从数据库中查询的包含标题和内容的公告列表。

```
cmdDa = New SqlDataAdapter("SELECT * FROM announcement ORDER BY announcement_PostDT DESC", conn)
ds = New DataSet()

cmdDa.Fill(ds, "announcement")
Dim total_rows_count As Integer = ds.Tables("announcement").Rows.Count - 1

For i = 0 To total_rows_count

   Dim title As String = ds.Tables("announcement").Rows(i).Item("announcement_Title")

   'How do I going to make it display on a label and keeps it loop?
   lbl_announcement_title.Text += title
   'This is not the thing I expect, what I expect is to make it show nicely, like 
   'the next loop will automatically goes to the next line.
Next 
```

我应该把它放到面板、列表视图或任何东西中并循环吗？急需帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:17:47.410

要完成您想要的代码可能是这样的：

```
cmdDa = New SqlDataAdapter("SELECT * FROM announcement ORDER BY announcement_PostDT DESC, announcement_Title ASC", conn)
ds = New DataSet()

cmdDa.Fill(ds, "announcement")
Dim total_rows_count As Integer = ds.Tables("announcement").Rows.Count - 1
Dim title As String = String.Empty
Dim content As String = String.Empty
Dim itemText As String = String.Empty
For i = 0 To total_rows_count
   title = ds.Tables("announcement").Rows(i).Item("announcement_Title")
   content = ds.Tables("announcement").Rows(i).Item("announcement_Content")

  itemText = "Title: "+ title + " Content: "+ content
   lbl_announcement_title.Text += itemText + "</br>
Next 
```

# vim - 如何保存 GVIM 设置？

> ID：10661988
> 
> 赞同：21
> 
> 时间：2012-05-19T03:05:28.257
> 
> 标签：vim

我刚刚安装`GVIM`，浏览了菜单，并更改了一堆设置。

我关闭`GVIM`了，所有设置都丢失了。:(

我再次进行了更改。

现在如何保留我的设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T04:59:47.553

您可以使用`:set`命令列出所有设置并将其放入`${HOME}/.vimrc`.

```
:se[t]     Show all options that differ from their default value. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:26:36.873

I wonder why nobody mentioned to use a vim session to save global settings and the views for all windows. Of course mastering `.vimrc` should be on the agenda of any serious vim user, but sessions can help further. Especially since they are similar to 'profiles' which are familiar to many people.

There also exist a plugin for gvim that facilitates the dealing with sessions further ([sessions.vim : Easy session management for gvim.](http://www.vim.org/scripts/script.php?script_id=2151)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-19T03:16:48.460

你真的应该学习如何使用[.vimrc](http://vim.wikia.com/wiki/Open_vimrc_file)。就像 VIM 本身一样，以艰难的方式学习这一点意味着以后有更多的功能和易用性。

# keyboard - Xkb：如何在 XkbDescRec 键盘描述的客户端映射中增加 KeySym 的数量？

> ID：10661998
> 
> 赞同：2
> 
> 时间：2012-05-19T03:09:51.367
> 
> 标签：keyboard, x11, keycode

我正在尝试以编程方式修改 X11 中我的 xkb 键盘映射的一些属性。在struct的`XkbClientMapRec`struct`map`成员中`XkbDescRec`，我们有以下成员：

```
typedef struct {                        /* Client Map */
  unsigned char      size_types;    /* # occupied entries in  types */
  unsigned char      num_types;     /* # entries in types */
  XkbKeyTypePtr      types;         /* vector of key types used by this keymap */
  unsigned short     size_syms;     /* length of the syms array */
  unsigned short     num_syms;      /* # entries in syms */
  KeySym *           syms;          /* linear 2d tables of keysyms, 1 per key */
  XkbSymMapPtr       key_sym_map;   /* 1 per keycode, maps keycode to syms */
  unsigned char *    modmap;        /* 1 per keycode, real mods bound to key */
} XkbClientMapRec, *XkbClientMapPtr; 
```

然后，我们有 XkbSymMapRec 结构，这里：

```
#define XkbNumKbdGroups            4
#define XkbMaxKbdGroup            (XkbNumKbdGroups-1)
typedef struct {                      /* map to keysyms for a single keycode */
  unsigned char     kt_index[XkbNumKbdGroups]; /* key type index for each group */
  unsigned char     group_info;       /* # of groups and out of range group handling */
  unsigned char     width;            /* max # of shift levels for key */
  unsigned short    offset;           /* index to keysym table in  syms array */
} XkbSymMapRec, *XkbSymMapPtr; 
```

`KeySym * syms`数组中的数组`XkbClientMapRec`当然只是`KeySym`s 中定义的数组（实际上是二维数组的数组）`keysymdefs.h`。

无论如何，我在这里想知道的是如何将全新`KeySym`的 s 添加到该`syms`数组中。基本上，我想完全更改键盘上一个键码的映射，而我想要等同的 KeySym 通常不在`KeySym`s 数组中。将键码重新分配给现有和定义的`KeySym`s 集很容易 - 例如，如果我希望键码 45 与键码 63 执行相同的操作，我会这样做：

```
XkbDescPtr desc = XkbGetKeyboard( curr_display, XkbAllComponentsMask, XkbUseCoreKbd );
XkbSymMapRec * client_map = desc->map;
client_map->key_sym_map[ 45 ] = client_map->key_sym_map[ 23 ];
XkbMapChangesRec changes;
changes.changed = XkbKeySymsMask;
changes.first_key_sym = 45;
changes.num_key_syms = 1;
XkbChangeMap( curr_display, desc, &changes ); 
```

这行得通，但这不是我想要的。我想在其中创建全新`KeySym`的条目`client_map->sym`并分配`client_map->key_sym_map[ 45 ]->kt_index[ 0..n ]`给这些新条目。不幸的是，这似乎不可能？XbkMapChangesRec 结构没有任何方式规定该`KeySym * syms`数组已被重新分配给更大的东西。它拥有的最好的`XkbKeySymsMask`是仅用于更改`key_sym_map`.

有任何想法吗？